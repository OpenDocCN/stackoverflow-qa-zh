# StackOverflow 问答 12189000-12189999

# python - 如何编写一个函数来返回变量名？

> ID：12189000
> 
> 赞同：0
> 
> 时间：2012-08-30T02:15:38.763
> 
> 标签：python

我想要一个可以像这样返回变量/对象名称的函数：

```
def get_variable_name (input_variable):
    ## some codes

>>get_variable_name(a)
'a'

>>get_variable_name(mylist)
'mylist' 
```

它看起来很傻，但我需要该函数来构造关于变量的表达式，以便稍后在“exec（）”中使用。有人可以帮助编写“get_variable_name”吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T02:35:20.173

我现在已经在 SO 上多次看到此类问题的一些变体。答案是*不要*。 **学习在`dict`需要名称和对象之间关联的任何时候使用。** 稍后你会为此感谢自己。

在回答“我的代码如何发现对象的名称？”这个问题时，[引用](http://effbot.org/pyfaq/how-can-my-code-discover-the-name-of-an-object.htm)Fredrik Lundh（在 comp.lang.python 上）的一段话：

> 就像你得到你在门廊上发现的那只猫的名字一样：猫（物体）本身不能告诉你它的名字，它并不真正关心 - 所以找出它叫什么的唯一方法是问你所有的邻居（命名空间），如果它是他们的猫（对象）......</p>
> 
> ....如果您发现它有很多名字，或者根本没有名字，请不要感到惊讶！

* * *

注意：至少在 CPython 实现中，获取绑定到对象的名称列表在*技术上是可行的。*如果您有兴趣看到演示，请在[`inspect`](https://docs.python.org/3/library/inspect.html)此处查看我的答案中显示的模块的用法：

[对象可以检查分配给它的变量的名称吗？](https://stackoverflow.com/a/8875313/674039)

这种技术应该只在一些疯狂的调试会话中使用，不要在你的设计中使用这样的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T02:17:36.963

一般来说，这是不可能的。当您将某些东西传递给函数时，您传递的是对象，而不是名称。同一个对象可以有多个名称或没有名称。如果您调用该函数应该做什么`get_variable_name(37)`？你应该想想你为什么要这样做，并尝试找到另一种方法来完成你的真正任务。

编辑：如果你想`get_variable_name(37)`返回 37，那么如果你做`a=37`然后做`get_variable_name(a)`，那也将返回 37。一旦进入函数，它就无法知道对象的“名称”在外面是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T02:26:16.097

```
def getvariablename(vara):
    for k in globals():
        if globals()[k] == vara:
                  return k
     return str(vara) 
```

在某些情况下可能会起作用...但很容易损坏...而且我基本上永远不会在任何类型的生产代码中使用它...

基本上我想不出有什么好的理由这样做……大约有一百万不这样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-25T02:39:17.803

这是一个好的开始，取决于 Python 版本和运行时，您可能需要稍作调整。打个断点，花点时间了解一下结构`inspect.currentframe()`

```
import inspect

def vprint(v):
    v_name = inspect.currentframe().f_back.f_code.co_names[3]
    print(f"{v_name} ==> {v}")

if __name__ == '__main__':
    x = 15
    vprint(x) 
```

会产生

```
x ==> 15 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-03T19:07:36.697

如果您只想返回根据用户输入选择的变量的名称......以便他们可以跟踪他们的输入，除了从他们的选择中生成的值之外，在他们进行选择时在代码中添加一个变量名称。例如：

```
temp = raw_input('Do you want a hot drink?  Type yes or no. ')
size = raw_input('Do you want a large drink? Type yes or no. ')
if temp and size == 'yes':
    drink = HL
    name = 'Large cafe au lait'
if temp and size != 'yes':
    drink = CS
    name = 'Small ice coffee'
print 'You ordered a ', name, '.' 
```

乔丹

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-10T10:11:40.840

如果您要在 exec() 中使用的语句是这样的

```
a = ["ddd","dfd","444"] 
```

然后做这样的事情

```
exec('b = a = ["ddd","dfd","444"]') 
```

现在您可以在代码中使用“b”来处理“a”。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-30T02:46:45.160

也许您可以使用 traceback.extract_stack() 获取调用堆栈，然后从条目中提取变量名称？

```
def getVarName(a):
    stack = extract_stack()
    print(stack.pop(-2)[3])

bob = 5
getVarName(bob); 
```

输出：

```
getVarName(bob) 
```

# jquery - jquery mouseleave 在 aa href 链接上触发

> ID：12189004
> 
> 赞同：0
> 
> 时间：2012-08-30T02:15:48.197
> 
> 标签：jquery, mouseevent

我有一个 div 菜单要显示，鼠标离开 div 时，它会自行隐藏。问题是我在菜单 div 中有 href 链接，当鼠标悬停在链接上时，会触发 mouseleave。这显然不是我想要的效果。我试过 mouseout 和 hover 但效果相同。

任何见解都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:47:23.910

这听起来像是 mouseout 和 mouseover 而不是 mouseenter 和 mouseleave 的问题。使用前一种组合，您可能会遇到意外事件，如果您使用“切换”而不是直接设置值，它看起来就像收到了鼠标离开。

[如果在视觉上看到它有帮助的话，底部](http://api.jquery.com/mouseover/)的示例很好地解释了这两种情况。使用 jsfiddle 或提供一些代码确实有助于解决这类问题。

随意使用[这个](http://jsfiddle.net/v556w/2/)来证明你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T12:28:14.820

确保没有其他元素的 z-index 破坏了乐趣

# objective-c - dateByAddingTimeInterval 参数语法

> ID：12189014
> 
> 赞同：3
> 
> 时间：2012-08-30T02:17:19.910
> 
> 标签：objective-c, oop, nsdate

如果我将方法 dateByAddingTimeInterval: 发送到 NSDate，如下所示：

```
NSDate *today = [NSDate date]; 
NSDate *tomorrow = [now dateByAddingTimeInterval:24.0];
NSDate *yesterday = [now dateByAddingTimeInterval:-24.0];

NSArray *dates = [NSArray arrayWithObjects: today, tomorrow, yesterday, nil];

NSLog(@"today's date is %@", [dates objectAtIndex:0]);
NSLog(@"yesterday's date was %@", [dates objectAtIndex:2]); 
```

我得到这个输出：

```
...The first date is 2012-08-30 02:14:19 +0000
...The third date is 2012-08-30 02:13:55 +0000 
```

这很奇怪，因为第三个日期应该是 2012-08-29

但是...如果我将 NSDate 消息更改为：

```
NSDate *today = [NSDate date];
NSDate *tomorrow = [now dateByAddingTimeInterval:24.0 * 60.0 * 60.0];
NSDate *yesterday = [now dateByAddingTimeInterval:-24.0 * 60.0 * 60.0]; 
```

为什么添加 * 60.0...

```
...The first date is 2012-08-30 02:15:25 +0000
...The third date is 2012-08-29 02:15:25 +0000 
```

使输出正确？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T02:21:25.760

NSDate 按秒计算时间。

# python - 通过 Cygwin 运行 Python 脚本的问题

> ID：12189016
> 
> 赞同：3
> 
> 时间：2012-08-30T02:17:36.603
> 
> 标签：python, windows, cygwin

我正在尝试通过 Windows 中的 Cygwin 运行我的 Python 脚本。运行 Python 时出现以下错误。问题是当通过 Cygwin 运行 Python 时，它然后通过 Python 的 Windows 实例运行命令，即`C:\Python32\python.exe`找不到`py`我使用 Cygwin 方式链接到的文件。

```
$ /cygdrive/c/Python32/python /cygdrive/c/elf/GIT/src/sfgenctl.py
C:\Python32\python.exe: can't open file '/cygdrive/c/elf/GIT/src/sfgenctl.py':
[Errno 2] No such file or directory 
```

有没有解决的办法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:26:15.167

在将`cygpath`其传递给之前将其转换为 Windows 路径`python.exe`：

```
/cygdrive/c/Python32/python "`cygpath -w /cygdrive/c/elf/GIT/src/sfgenctl.py`" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-01T10:59:49.470

我通过以下方式解决它：

1.  进入脚本所在的文件夹。`cd /cygdrive/c/elf/GIT/src/`
2.  跑`python -i sfgenctl.py`

注意`-i`国旗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:59:57.010

这样做的简单方法是安装 Python Cygwin 插件。谢谢各位大侠。

# delphi - 调用 Halt 后程序仍在任务管理器中

> ID：12189025
> 
> 赞同：1
> 
> 时间：2012-08-30T02:18:34.190
> 
> 标签：delphi, indy10

问题是，作为我的第一个可执行语句，我想检查是否可以从数据库中读取。如果我不能，我打电话`MessageDlg`解释一下，然后我`Halt;`。

但是，关闭对话框后，我仍然在 tak 管理器中看到应用程序（如果我停止它并重新运行应用程序，也会发生同样的事情）。

知道我做错了什么吗？

* * *

Global.ADQuery1 是一个 AnyDac 数据库访问组件。我通过 IP 地址访问 d/b。当我将我的 PC 地址设置为 d/b 地址时，代码工作正常，并在我更改我的 IP 地址时给出报告的问题（因此，无法访问 d/b，这会引发异常）。

```
procedure TMainForm.FormCreate(Sender: TObject);
begin
   try
      Global.ADQuery1.Open('SHOW DATABASES');

   except
      On E: Exception do
      begin
         MessageDlg('Database access problem', mtError, [mbOK], 0);
         Halt;
      end;
   end; 
```

[更新] 当我在 IDE 中运行时，捕获后

`(EMySQLNativeException) : "[AnyDAC][Phys][MySQL] Can't connect to MySQL server on '10.21.18.211' (10060)"`

我抓住了一个`EIdWinSockStubError either the program has not called wsastartup or wsastartup failed`- 但我不知道它是如何被抛出的......我猜`Application.Terminate`调用可能是 main form's `FormClose`，它对我的​​ Indy 组件没有任何作用，但我猜当父窗体被销毁时，它的子窗体会也是。

* * *

[进一步更新]

我`TMainForm.FormCreate`现在只说

```
Sleep(1000);
PostMessage(Handle, UM_PROGRAM_START, 0, 0); 
```

我把所有的代码都移到了处理它的函数的stat中。确定一切都是在那个时候创造的吗？那么，为什么我的 Indy 组件会抛出异常呢？

也许我应该把它`PostMessage()`放在我的 [application].pas 之后`Application.Run();`？

（旁白：1）其他人通常如何以这种方式处理应用程序启动？2）有人有应用程序框架吗？我正在考虑创建一个选项来处理最小化到系统托盘，只允许一个实例，最近的文件菜单等） - 尽管作为一个单独的问题可能会更好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T03:46:29.497

该`Halt`程序不是我们有时误认为的直接进程杀手。它调用所有程序单元的单元完成部分，因此您的程序可能会卡在其中一个中，可能正在等待您的表单发生某些事情，由于您的`OnCreate`处理程序尚未返回，因此这不会发生。

您可以使用调试器来找出您的程序正在做什么或等待什么。

要*真正*尽快退出程序，请跳过`Halt`并直接转到`ExitProcess`. 这是最后的事情`Halt`。

`Application.Terminate`实际上*离*任何真正终止发生的点更远，因为它实际上只是一个咨询命令；应用程序在到达消息循环之前不会终止。

更好的是，找到一种更优雅的方式来退出程序。例如，在创建表单*之前*测试您的数据库，这样您就不会陷入尴尬的境地，因为您不再需要创建一半的表单。

# php - 从 XML 更新 Mysql 数据库

> ID：12189029
> 
> 赞同：-1
> 
> 时间：2012-08-30T02:19:27.523
> 
> 标签：php, mysql, xml, simplexml

我正在使用以下 php 代码从 xml 文件加载数据以插入到 Mysql 中，我想在此网站中有新文章时更新此 rss 提要。

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("rss") ;

$feeds = array('http://mywebsite.com/index.php?format=feed&type=rss');
foreach( $feeds as $feed ) {
$xml = simplexml_load_file($feed);

foreach($xml->channel->item as $item)
{
$date_format = "j-n-Y"; // 7-7-2008

 echo '<style type="text/css">.style1 { direction: rtl;</style><p class="style1">';
 echo $item->pubDate;  
 echo '<br><a href="'.$item->link.'" target="_blank">'.$item->title.'</a><br>';
 echo '<div>' . $item->description . '</div><br><br><br><hr><br>';
 echo '<div>' . $item->content . '</div><br><br><br>';             
 echo '</p>';

mysql_query("INSERT INTO rss_feeds (id, title, description, link, category, pubdate,  facebook_pub, website) 
VALUES (
    '', 
    '".mysql_real_escape_string($item->title)."', 
    '".mysql_real_escape_string($item->description=htmlspecialchars(trim($item->description)))."', 
    '".mysql_real_escape_string($item->link)."', 
    '".mysql_real_escape_string($item->category)."', 
    '".mysql_real_escape_string($item->pubDate)."',
    'No', 
    'almourassel.com')");    
    }
    }
    ?> 
```

但是，当我加载此脚本时，它会重新插入先前添加的数据。我怎样才能更新新文章。

我认为脚本应该添加新项目，直到它通过比较 Pubdate 来满足表中添加的 las 元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:26:11.603

最简单的方法是使用 MySQL`replace into`命令

`REPLACE INTO table_name(column_name1,column_name2,…) VALUES(value1,value2,…)`

MySQL REPLACE 语句是对 SQL 标准的 MySQL 扩展。MySQL REPLACE 的工作方式类似于 INSERT 语句，具有以下规则：

*   如果正在插入的记录不存在，MySQL REPLACE 将插入一条新记录。
*   如果正在插入的记录存在，MySQL REPLACE 将首先删除旧记录，然后插入具有新值的新记录。

基本上，您所要做的就是在 SQL 语句中替换`INSERT INTO`为。`REPLACE INTO`

但是，如果你有`auto-increment primary keys`，例如，`replace into`可能不是一个好主意，因为它删除和插入记录，将为相同的记录创建新的 PK id，从而导致 FK 约束问题。

另一种选择是使用`INSERT ... ON DUPLICATE KEY UPDATE`这将再次检查唯一键字段上的重复项。如果您可以确定每篇文章的 pubdate 都是唯一的，则可以使用此语法代替`replace into`

或者您可以走传统路线，`select from table where db_pubdate = rss_pubdate`如果没有匹配的记录，您可以执行`insert into table`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T11:27:36.310

您还可以编写两个不同的查询，一个用于删除表的现有数据，然后点击您的插入查询。或者你可以使用替换到mysql的命令。我以前以非常简单的方式完成过，请参阅：

```
mysql_query("DELETE FROM `wp_property`") or die(mysql_error());   
echo "Old data deleted !: <br /><br />";
$xmls = simplexml_load_file('my_file_location.xml');
foreach($xmls->Property as $xml)
{
$ID = $xml->ID;  
$ManagementCompanyID = $xml->ManagementCompanyID;
$MarketingName = $xml->MarketingName;
}

$sql = "INSERT INTO `wp_property` SET`ID`='".mysql_real_escape_string(trim($ID))."',   `ManagementCompanyID`='".mysql_real_escape_string(trim($ManagementCompanyID))."', `MarketingName`='".mysql_real_escape_string(trim($MarketingName))."'";

if (!mysql_query($sql))
{
die('Error: ' . mysql_error());
}

}
echo "New Records added successfully ! <br /><br />"; 
```

希望它会帮助你。快乐编码！

# python - 打开并读取多个 pcap 文件

> ID：12189030
> 
> 赞同：0
> 
> 时间：2012-08-30T02:19:28.573
> 
> 标签：python

我试图找出如何使用 dpkt 模块打开**多个.pcap 文件并****同时**读取它们。经过大量的谷歌搜索和长时间的搜索，我设法找到的示例仅显示了如何打开和读取 1 个 .pcap 文件。

我尝试使用超过 1 个 for 循环，并使用数组 zip() 文件，但无济于事。有一个错误，ValueError: need more than 1 value to unpack。有什么建议么？这是我当前的python脚本：

```
 import dpkt, socket, glob, pcap, os

    files = [open(f) for f in glob.glob('*.pcap')]
    abc = dpkt.pcap.Reader(file("abc.pcap", "rb"))
    fgh = dpkt.pcap.Reader(file("fgh.pcap", "rb"))

    print files
    print "\r\n"
    List = [abc, fgh]

    for ts, data in zip(List):
       eth = dpkt.ethernet.Ethernet(data)
       ip = eth.data
       tcp = ip.data

       src = socket.inet_ntoa(ip.src)
       dst = socket.inet_ntoa(ip.dst)

       if tcp.dport == 80 and len(tcp.data) > 0:
          http = dpkt.http.Request(tcp.data)
          print "-------------------"
          print "HTTP Request /", http.version
          print "-------------------"
          print "Type: ", http.method
          print "URI: ", http.uri
          print "User-Agent: ", http.headers ['user-agent']
          print "Source: ", src
          print "Destination: ", dst
          print "\r\n" 
```

**编辑：//**

嘿，谢谢所有的建议。为了简化这个过程，我现在修改了我的代码以打开 .txt 文件。我的代码如下所示。输出中没有显示错误，但是当我打印输出时，如何去掉换行符 '\n'、方括号和单引号？

**代码：**

```
 import glob

    fileList = [glob.glob('*.txt')]

    for files in fileList:
       print "Files present:",files
       print ""

       a = open("1.txt", 'r')
       b = open("2.txt", 'r')

       List = [a,b]

       for line in zip(*List):
          print line 
```

**输出：**

```
>Files present: ['2.txt', '1.txt']
>
>('This is content from the FIRST .txt file\n', 'This is content from the SECOND .txt file\n')
>('\n', '\n')
>('Protocol: Testing\n', 'Protocol: PCAP\n')
>('Version: 1.0\n', 'Version: 2.0\n') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:28:43.223

`zip()`将每一件事作为单独的参数进行迭代。

```
for ts, data in zip(abc, fgh):
  //... 
```

通过首先列出列表，您只是放弃`zip()`了要迭代的东西，那个东西恰好包含可以迭代的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:29:28.670

你实际上*非常*接近。你只需要解压你传递给的序列`zip()`。

```
for ts, data in zip(*List): 
```

# javascript - 为什么原型需要通过实例访问？

> ID：12189031
> 
> 赞同：2
> 
> 时间：2012-08-30T02:19:36.437
> 
> 标签：javascript, class, instance, function-prototypes

我正在尝试创建一个类常量，但我想我对 JavaScript 的新手级理解正在显示。当这段代码执行时：

```
var Class = function() {};
Class.prototype = { CONST : 1 };
var instance = new Class(),
c1 = instance.CONST,
c2 = Class.CONST; 
```

结果是`c1 === 1`和`c2 === undefined`。为什么不是`c2 === 1`？JavaScript 不查找原型链`Class`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T02:47:37.043

您要做的是在其他语言中称为类静态方法。
要在 Javascript 中做到这一点，您必须编写

`Class.CONST = 1;` 然后你可以用`Class.CONST;`

如果您尝试使用类似的实例方法访问它`new Class().CONST`，它将是未定义的

回到您的问题， Class.prototype 中的所有内容只能由对象实例访问（即，通过 创建`new`），而不是 Class 本身。为什么？

考虑实施`new`

```
Function.method('new', function () {
    var that = Object.create(this.prototype);
    var other = this.apply(that, arguments);
    return (typeof other === 'object' && other) || that;
}); 
```

首先`Object.create(this.prototype)`创建一个全新的对象，该对象继承自`this.prototype`你声明的 via `Class.prototype = { Const : 1 }`，然后它调用`this.apply(that, arguments)`，它只是调用你声明的 Class 函数，并`that`用作`this`变量。然后它返回对象。您可以看到 Class 函数只是用作将事物填充到新生对象中的一种方式 create via `new`。并且只有创建的对象才能访问原型方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T02:21:45.743

您正在尝试访问`CONST`构造函数 ( `Class = function(){}`) 的属性。`CONST`在您实例化之前将不可用`Class`。

关于这个的几个很好的链接：

*   [MDN - 继承和原型链](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain?redirectlocale=en-US&redirectslug=JavaScript/Guide/Inheritance_constructor_prototype)
*   [MDN - 重访继承](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited)
*   [JavaScript 构造函数、原型和`new`关键字](http://pivotallabs.com/users/pjaros/blog/articles/1368-javascript-constructors-prototypes-and-the-new-keyword)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:29:16.097

简单的答案是实例继承自其构造函数的公共原型，因此`c1`具有`CONST`继承自的属性`Class.prototype`（严格来说，它是实例的私有`[[Prototype]]`属性）。

另一方面，`Class`is 的一个实例`Function`，所以它继承自`Function.prototype`（即它的私有`[[Prototype]]`是`Function.prototype`），not `Class.prototype`，所以它没有`CONST`属性。

对象的值`[[Prototype]]`是在构造时设置的，并且永远无法更改。用其他对象替换`Class.prototype`只会影响新实例。

请注意，在一些较旧的 Mozilla 浏览器（例如 Firefox）中，有一个[`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)引用对象的属性`[[Prototype]]`并且可以设置，但现在已弃用。

一般来说，最好不要谈论关于 javascript 的类，因为它推断只能在某种程度上模拟的行为和特性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T02:31:27.543

`Class`是一个函数对象。函数对象没有`CONST`属性。它用于构造一个“类”对象。“类”对象是具有`CONST`属性的自定义对象，因为它是在构造函数中声明的。

# jquery - jQuery - 当正确答案输入文本框时如何显示 div？

> ID：12189046
> 
> 赞同：1
> 
> 时间：2012-08-30T02:23:06.383
> 
> 标签：jquery

我对 jQuery 很陌生，我需要一些帮助：

**我在找什么：** 当一个人在文本框中输入正确答案时，我想让一个 div 出现。如果他们得到错误的答案，就会出现一个不同的 div。

**我现在拥有的：** 目前，我正在使用 Javascript 来输出 2 种不同的文本，具体取决于该人的回答。请看看它现在的样子：http: [//yankrupnik.com/wowza/cats.html](http://yankrupnik.com/wowza/cats.html)

这是该测试页上的 html

```
<!DOCTYPE html>
    <html>
        <head>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
            <script type="text/javascript"> 
                $(document).ready(function(){
                    $("button#start").click(function(){
                        $("div#catbox").animate({height:336},1000);
                        $("div#catbox").animate({width:480},1000);
                        $("div#catbox").animate({height:100},700);
                        $("div#catbox").animate({width:100},500);
                        $("div#catbox").hide(2000);
                        $(this).hide();
                    });
                }); 
            </script> 
        </head>
    <body>
        <div align="center">
            <h3>The Cat Test</h3>
            <p>Click "start" and count how many cats you see! Enter your estimation below, and if you've got it, collect a cookie!</p>
            <button id="start">START!</button>
            <br /><br />
                <div id="catbox" style="background:#98bf21;height:100px;width:100px;overflow:hidden">
                <img src="images/manycats.jpg">
                </div>

            <p>So, how many cats did you manage to spot?</p> <input id="cats" value="enter number here" onfocus="this.value='';" />
            <button onclick="valFunction () ">Submit Answer!</button>

            <p id="demo"></p>

            <script type="text/javascript">
            function valFunction()
                {
                cats=document.getElementById("cats").value;
                validation=(cats==7)?"Nice! You've Got it!":"Sorry... press [F5] and try again!";
                document.getElementById("demo").innerHTML=validation;
                }
            </script>     
        </div>
    </body>
    </html> 
```

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:26:10.543

用于[`.show()`](http://api.jquery.com/show/)显示`div`. 我假设它们最初会被隐藏`display: none`：

```
if (answer == correctAnswer) {
  $("#id_of_correct_answer_div").show();
} else {
  $("#id_of_wrong_answer_div").show();
} 
```

# c - 指向嵌套结构中的结构的指针

> ID：12189049
> 
> 赞同：0
> 
> 时间：2012-08-30T02:23:49.813
> 
> 标签：c, pointers, structure

我有 6 层嵌套结构。我在最后三个级别有问题。该程序编译得很好，但是当我运行它时，它会因分段错误而崩溃。作业有问题是我的感觉。请指出错误。

```
typedef struct {
    char addr[6];
    int32_t rs;
    uint16_t ch;
    uint8_t ap;
} C;

typedef struct {
      C *ap_info;
} B;

typedef struct {
    union {
        B wi;
    } u;
} A;

function1(char addr , int32_t rs, uint16_t ch, uint8_t ap) {
    A la;
    la.u.wi.ap_info->addr[6] = addr;
    la.u.wi.ap_info->rs = rs;
    la.u.wi.ap_info->ch = ch;
    la.u.wi.ap_info->ap = ap;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:34:53.143

您没有为 指向的结构分配内存，也没有`la.u.wi.ap_info`设置`la.u.wi.ap_info`指针本身。你需要类似的东西：

```
la.u.wi.ap_info = calloc(1,sizeof(C)); // allocate a C instance and 
                                       //  point la.u.wi.ap_info at it 
```

...稍后`free(la.u.wi.ap_info);`当您不再需要该结构时。或者你可以将它指向一个预先存在的结构，只要你确保你指向的结构将存在，直到你完成它。

此外，该行：

```
la.u.wi.ap_info->addr[6] = addr; 
```

是不正确的; 它将字符分配给`addr`数组的第七个元素，该元素只有六个元素的空间（所以它超出了界限）。如果`addr`本来是要复制到结构中的字符串，则其类型不应为`char *`not `char`，并且您需要以下内容：

```
strncpy(la.u.wi.ap_info->addr, addr, 5); // copy up to 5 chars
la.u.wi.ap_info->addr[5] = '\0'; // explicitly null the sixth char 
```

而不是简单的赋值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:25:46.553

您没有为指针分配内存

# google-maps - fancyBox 谷歌地图偏离中心

> ID：12189052
> 
> 赞同：2
> 
> 时间：2012-08-30T02:24:02.370
> 
> 标签：google-maps, fancybox

我在我的网站上安装了最新版本的 fancyBox 并复制了 Google Maps (iFrame) 的示例。当我在我的网站上试用时，地图信息窗口位于左上方并被切断。我回到示例页面并注意到它在那里做了同样的事情。我知道过去我使用 fancyBox 和 Google Maps 时没有遇到这个问题。有任何想法吗？

fancyBox 示例：[http](http://fancyapps.com/fancybox/#examples) ://fancyapps.com/fancybox/#examples （在各种类型下）

我在 Mac (OS X 10.8.1) 上使用 Firefox 15.0。我尝试了 Safari，它做了同样的事情，尽管地图信息窗口显示和切断的不是左上角，而是左下角。

# android - 如何仅使用一个选项卡启动 Firefox，或者如何在我的 android 应用程序中打开我的选项卡之前关闭其他选项卡？

> ID：12189054
> 
> 赞同：0
> 
> 时间：2012-08-30T02:24:01.903
> 
> 标签：android, firefox

我有一个安卓应用程序。我想启动 Firefox 以在我的应用程序中加载 url。我的问题是 Firefox 每次在我的应用程序中启动它时都会添加一个新选项卡。如何避免添加新选项卡来加载 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:48:33.730

好吧，我不认为您的应用程序可以控制 Firefox 的行为。如果您启动意图，Firefox 将从那里处理它。除非 Firefox 有一个 API 可以用来控制行为。

# java - Git 子模块和 Maven 标准目录结构

> ID：12189055
> 
> 赞同：0
> 
> 时间：2012-08-30T02:24:18.457
> 
> 标签：java, git, maven, project

对于我的项目，我想使用 Maven 构建和 git 子模块。我有一堆我希望能够从项目中的多个应用程序中引用的 java 文件，以保持应用程序之间的文件一致。为这些文件创建一个存储库并将它们作为子模块添加到我的应用程序似乎是可行的方法。repo 中的文件可以以最方便的方式构建。

如果可能的话，我想尊重 Maven 标准目录结构。但是，似乎 git 只能将子模块添加为父 repo 的直接子目录。虽然这实际上可能不会遵循 Maven 标准目录结构，但我还没有弄清楚如何使它工作。

是否可以完美和谐地一起使用这两个工具，这样我就不必手动修补 poms？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:30:49.540

我相信您正在尝试做的事情与 Maven 的想法背道而驰。您不应该在这种意义上共享源代码。为什么不为共享代码制作一个单独的工件并将其作为这些应用程序的依赖项？

# asp.net - 动态调用 ASP.NET MVC 全局助手

> ID：12189056
> 
> 赞同：0
> 
> 时间：2012-08-30T02:24:31.110
> 
> 标签：asp.net, asp.net-mvc

有没有办法动态执行 ASP.NET MVC 全局帮助函数（不是 HtmlHelper 扩展方法），类似于使用反射方法调用类上的方法？我需要能够动态调用方法，并将响应注入到视图中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:32:15.920

假设您根据视图可以访问的值来决定执行哪个帮助器，您可以将每个帮助器函数封装在部分视图中（或者只是将帮助器重构为部分）并直接使用`@Html.RenderPartial`. 如果您想要两个视图之间的更多隔离和更大的灵活性，请`@Html.RenderAction`改为使用（但请注意，当您从视图调用子操作时，您正在重新调用 MVC 管道的中大型部分）。

# c++ - 如何通过成员函数指针调用？

> ID：12189057
> 
> 赞同：69
> 
> 时间：2012-08-30T02:25:01.117
> 
> 标签：c++, function-pointers

我正在尝试使用成员函数指针进行一些测试。这段代码有什么问题？该`bigCat.*pcat();`语句无法编译。

```
class cat {
public:
   void walk() {
      printf("cat is walking \n");
   }
};

int main(){
   cat bigCat;
   void (cat::*pcat)();
   pcat = &cat::walk;
   bigCat.*pcat();
} 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-08-30T02:26:10.903

需要更多括号：

```
(bigCat.*pcat)();
^            ^ 
```

函数调用 ( `()`) 的优先级高于指向成员的绑定运算符 ( `.*`)。一元运算符的优先级高于二元运算符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2021-10-13T19:44:55.297

今天，规范的方法是使用[std::invoke](https://en.cppreference.com/w/cpp/utility/functional/invoke)函数模板，尤其是在通用代码中。请注意，成员函数指针首先出现：

```
import <functional>;

std::invoke(pcat, bigCat); 
```

你得到什么：几乎任何东西的统一调用语法，这是可调用的。

开销：无。

# delphi - 如何让 TVirtualStringTree 在禁用状态下显示图标？

> ID：12189058
> 
> 赞同：2
> 
> 时间：2012-08-30T02:25:18.483
> 
> 标签：delphi, virtualtreeview, tvirtualstringtree

我需要将目录中的文件显示到 TVirtualStringTree。所以，我使用 SHGetFileInfo 来获取文件的图标。但似乎我只能获得“正常”图标（以下屏幕截图的左侧）。如果是这样，TVirtualStringTree 可以将图标绘制为“禁用”吗？就像您禁用了 a 节点一样。请看屏幕截图：

![在此处输入图像描述](../Images/27771d7b3c150ebe6e079db1750e1e15.png)

**更新**

Soft Gems 论坛中有一个[类似的主题](http://support.soft-gems.net/forums/viewtopic.php?t=900)。我可以得到图标的矩形，然后自己绘制图标。我正在使用 TcxImageList，它可以轻松绘制“禁用”图标。我首先在 GetImageIndex 事件中分配了一个不存在的图像索引，这样我就有了绘制图标的空间。然后使用以下代码进行绘制。

```
procedure TfrmMain.tvSharesAfterItemPaint(Sender: TBaseVirtualTree; TargetCanvas: TCanvas; Node: PVirtualNode; ItemRect: TRect); 
var 
  rImage: TRect; 
  OffsetLeft: Integer; 
begin 
    rImage  := ItemRect; 

    with TVirtualStringTree(Sender) do begin 
      if (toShowRoot in TreeOptions.PaintOptions) then 
        OffsetLeft := Indent * (GetNodeLevel(Node) + 1) 
      else 
        OffsetLeft := Indent * GetNodeLevel(Node); 

      Inc(rImage.Left, Margin + OffsetLeft); 
      Inc(rImage.Top, (NodeHeight[Node] - Images.Height) div 2); 
      rImage.Right  := rImage.Left + Images.Width; 
      rImage.Bottom := rImage.Top + Images.Height; 
    end; 

    // draw the "normal" or "disabled" icon here
    imageList.Draw(TargetCanvas, rImage.left, rImage.Top, ...);
  end; 
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T02:30:59.510

没有直接的方法来绘制禁用的图像状态。我更愿意为图像的自定义绘制创建事件（现在[`I've suggested this as a new feature`](http://code.google.com/p/virtual-treeview/issues/detail?id=282)用于虚拟树视图，由于这种缺乏）。这是用于虚拟字符串树的插入类的示例。

对于灰度图像的自定义绘制，它使用[`code from this post`](https://stackoverflow.com/a/6003256/960757). 当然，它不是永久使用的解决方案，您必须使`PaintImage`方法代码与实际代码保持同步，因为该方法被完全覆盖。

事件的参数计数`OnCustomDrawImage`表明参数应该包装成某种结构，但这只是一个展示它的样子。这个新事件被触发两次；第一次为图像绘制（`DrawOverlay`为假），第二次为叠加（`DrawOverlay`参数为真）：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, DateUtils, StdCtrls, VirtualTrees, ImgList, CommCtrl;

type
  TCustomDrawImageEvent = procedure(Sender: TBaseVirtualTree; Node: PVirtualNode;
    ImageList: TCustomImageList; ImageIndex: Integer; TargetCanvas: TCanvas;
    X, Y: Integer; Style: Cardinal; DrawEnabled: Boolean; DrawOverlay: Boolean;
    var CustomDraw: Boolean) of object;
  TVirtualStringTree = class(VirtualTrees.TVirtualStringTree)
  private
    FOnCustomDrawImage: TCustomDrawImageEvent;
  protected
    function DoCustomDrawImage(Node: PVirtualNode; ImageList: TCustomImageList;
      ImageIndex: Integer; TargetCanvas: TCanvas; X, Y: Integer; Style: Cardinal;
      DrawEnabled: Boolean; DrawOverlay: Boolean): Boolean; virtual;
    procedure PaintImage(var PaintInfo: TVTPaintInfo; ImageInfoIndex: TVTImageInfoIndex;
      DoOverlay: Boolean); override;
  published
    property OnCustomDrawImage: TCustomDrawImageEvent read FOnCustomDrawImage write FOnCustomDrawImage;
  end;

type
  TForm1 = class(TForm)
    VirtualStringTree1: TVirtualStringTree;
    ImageList1: TImageList;
    procedure FormCreate(Sender: TObject);
    procedure VirtualStringTree1GetImageIndex(Sender: TBaseVirtualTree;
      Node: PVirtualNode; Kind: TVTImageKind; Column: TColumnIndex;
      var Ghosted: Boolean; var ImageIndex: Integer);
  private
    procedure VirtualTreeCustomDrawImage(Sender: TBaseVirtualTree; Node: PVirtualNode;
      ImageList: TCustomImageList; ImageIndex: Integer; TargetCanvas: TCanvas;
      X, Y: Integer; Style: Cardinal; DrawEnabled: Boolean; DrawOverlay: Boolean;
      var CustomDraw: Boolean);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TVirtualStringTree }

type
  TCustomImageListCast = class(TCustomImageList);

function TVirtualStringTree.DoCustomDrawImage(Node: PVirtualNode;
  ImageList: TCustomImageList; ImageIndex: Integer; TargetCanvas: TCanvas; X,
  Y: Integer; Style: Cardinal; DrawEnabled: Boolean; DrawOverlay: Boolean): Boolean;
begin
  Result := False;
  if Assigned(FOnCustomDrawImage) then
    FOnCustomDrawImage(Self, Node, ImageList, ImageIndex, TargetCanvas, X, Y,
      Style, DrawEnabled, DrawOverlay, Result);
end;

procedure TVirtualStringTree.PaintImage(var PaintInfo: TVTPaintInfo;
  ImageInfoIndex: TVTImageInfoIndex; DoOverlay: Boolean);
var
  CutNode: Boolean;
  ExtraStyle: Cardinal;
  DrawEnabled: Boolean;
  PaintFocused: Boolean;
const
  Style: array[TImageType] of Cardinal = (0, ILD_MASK);
begin
  with PaintInfo do
  begin
    CutNode := (vsCutOrCopy in Node.States) and (tsCutPending in TreeStates);
    PaintFocused := Focused or (toGhostedIfUnfocused in TreeOptions.PaintOptions);
    if DoOverlay then
      GetImageIndex(PaintInfo, ikOverlay, iiOverlay, Images)
    else
      PaintInfo.ImageInfo[iiOverlay].Index := -1;
    DrawEnabled := not (vsDisabled in Node.States) and Enabled;
    with ImageInfo[ImageInfoIndex] do
    begin
      if (vsSelected in Node.States) and not (Ghosted or CutNode) then
      begin
        if PaintFocused or (toPopupMode in TreeOptions.PaintOptions) then
          Images.BlendColor := Colors.FocusedSelectionColor
        else
          Images.BlendColor := Colors.UnfocusedSelectionColor;
      end
      else
        Images.BlendColor := Color;
      if (ImageInfo[iiOverlay].Index > -1) and (ImageInfo[iiOverlay].Index < 15) then
        ExtraStyle := ILD_TRANSPARENT or ILD_OVERLAYMASK and
          IndexToOverlayMask(ImageInfo[iiOverlay].Index + 1)
      else
        ExtraStyle := ILD_TRANSPARENT;
      if (toUseBlendedImages in TreeOptions.PaintOptions) and PaintFocused
        and (Ghosted or ((vsSelected in Node.States) and
        not (toFullRowSelect in TreeOptions.SelectionOptions) and
        not (toGridExtensions in TreeOptions.MiscOptions)) or CutNode)
      then
        ExtraStyle := ExtraStyle or ILD_BLEND50;
      if (vsSelected in Node.States) and not Ghosted then
        Images.BlendColor := clDefault;

      // in this modified part of code, the new event OnCustomDrawImage
      // is fired once before the image is actually drawn and once when
      // the overlay is to be drawn; when you keep its CustomDraw param
      // in False value (what is, by default), the default drawing will
      // be done otherwise you need to take care of drawing by yourself

      // draw image default way when the CustomDraw parameter of the new
      // OnCustomDrawImage event remains False (what is, by default)
      if not DoCustomDrawImage(Node, Images, Index, Canvas, XPos, YPos,
        Style[Images.ImageType] or ExtraStyle, DrawEnabled, False)
      then
        TCustomImageListCast(Images).DoDraw(Index, Canvas, XPos, YPos,
          Style[Images.ImageType] or ExtraStyle, DrawEnabled);
      // draw overlay default way when the CustomDraw parameter of the new
      // OnCustomDrawImage event remains False (what is, by default)
      if PaintInfo.ImageInfo[iiOverlay].Index >= 15 then
      begin
        if not DoCustomDrawImage(Node, ImageInfo[iiOverlay].Images,
          ImageInfo[iiOverlay].Index, Canvas, XPos, YPos,
          Style[ImageInfo[iiOverlay].Images.ImageType] or ExtraStyle,
          DrawEnabled, True)
        then
          TCustomImageListCast(ImageInfo[iiOverlay].Images).DoDraw(
            ImageInfo[iiOverlay].Index, Canvas, XPos, YPos,
            Style[ImageInfo[iiOverlay].Images.ImageType] or ExtraStyle,
            DrawEnabled);
      end;
    end;
  end;
end;

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  VirtualStringTree1.OnCustomDrawImage := VirtualTreeCustomDrawImage;
end;

type
  TImageListDrawParams = record
    cbSize: DWORD;
    himl: HIMAGELIST;
    i: Integer;
    hdcDst: HDC;
    x: Integer;
    y: Integer;
    cx: Integer;
    cy: Integer;
    xBitmap: Integer;
    yBitmap: Integer;
    rgbBk: COLORREF;
    rgbFg: COLORREF;
    fStyle: UINT;
    dwRop: DWORD;
    fState: DWORD;
    Frame: DWORD;
    crEffect: COLORREF;
  end;

procedure DrawDisabledImage(DC: HDC; ImageList: TCustomImageList; Index, X,
  Y: Integer);
var
  Options: TImageListDrawParams;
begin
  FillChar(Options, SizeOf(Options), 0);
  Options.cbSize := SizeOf(Options);
  Options.himl := ImageList.Handle;
  Options.i := Index;
  Options.hdcDst := DC;
  Options.x := X;
  Options.y := Y;
  Options.fState := ILS_SATURATE;
  ImageList_DrawIndirect(@Options);
end;

procedure TForm1.VirtualStringTree1GetImageIndex(Sender: TBaseVirtualTree;
  Node: PVirtualNode; Kind: TVTImageKind; Column: TColumnIndex;
  var Ghosted: Boolean; var ImageIndex: Integer);
begin
  ImageIndex := 0;
end;

procedure TForm1.VirtualTreeCustomDrawImage(Sender: TBaseVirtualTree;
  Node: PVirtualNode; ImageList: TCustomImageList; ImageIndex: Integer;
  TargetCanvas: TCanvas; X, Y: Integer; Style: Cardinal; DrawEnabled: Boolean;
  DrawOverlay: Boolean; var CustomDraw: Boolean);
begin
  CustomDraw := True;
  if not DrawOverlay then
    DrawDisabledImage(TargetCanvas.Handle, ImageList, ImageIndex, X, Y);
end;

end. 
```

结果（我不得不说混合它会很好）：

![在此处输入图像描述](../Images/dc06930a4d816c3c45805159b42f6d17.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T03:52:04.260

不，TVirtualStringTree 没有明确的 DisabledIcon 属性或任何类似的东西。

但是，您可以通过 GetImageIndex 事件的适当处理程序来实现您想要的结果。在此事件的事件处理程序中，确定节点是否被禁用，并将此测试用作计算图像索引的判别器。

在您的图像列表中，您需要有正常版本的字形和禁用版本。VirtualTree 不会神奇地为您创建禁用的版本，但是克隆一个字形并对其进行灰洗是一件小事。

如果您需要用于 GetImageIndex 事件处理程序或灰色洗涤的演示代码，请告诉我。

# arrays - 给定一个具有字段 foo 的结构数组，是否有一种简单的方法来获取 foo 值的数组？

> ID：12189066
> 
> 赞同：2
> 
> 时间：2012-08-30T02:26:25.977
> 
> 标签：arrays, matlab, iterator

我正在使用 mksqlite 从 Matlab 执行一些 SQL：

```
myPeople = mksqlite('SELECT * from People'); 
```

People 表中有三行，myPeople 将是一个 3x1 结构，包含三个 1x1 结构，每个结构都有 id、name 等字段。我想要的是一个包含三个 id 值的数组。

在 Python 中，我会使用这样的列表迭代器：

```
myIDs = person.id for person in myPeople 
```

Matlab 中是否有类似的方法可以从具有该字段的结构数组中提取某个字段的所有值？

到目前为止，我拥有的最好的是：

```
myIDs = []
for x = myPeople.'
    myIDs = [myIDs x.id]
end 
```

但这可能效率很低，因为它会在每次迭代时调整数组的大小，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:40:43.813

```
myIDs = [myPeople.id]; %# nice shortcut syntax (horizontally concatenates)
myIDs = horzcat(myPeople.id); %# explicit way to horizontally concatenate
myIds = vertcat(myPeople.id); %# explicit way to vertically concatenate 
```

有关结构和逗号分隔列表的进一步阅读，请参阅[此链接](http://blogs.mathworks.com/loren/2006/06/02/structures-and-comma-separated-lists/)。

# r - 使用 R 和 ggplot2 的连续缩放错误

> ID：12189069
> 
> 赞同：2
> 
> 时间：2012-08-30T02:27:11.307
> 
> 标签：r, ggplot2

我正在遵循书中的一个例子`Machine Learning for Hackers`。`R 2.15.1`并被`ggplot 0.91`使用。我收到以下错误：

```
Error in continuous_scale(aesthetics, "date", identity, breaks = breaks,  : 
unused argument(s) (major = "5 years", format = "%Y")
In addition: Warning message:
In discrete_scale(aesthetic, "manual", pal, ...) :
"legend" argument in scale_XXX is deprecated. Use guide="none" for suppress the guide   display. 
```

我尝试运行的代码是

```
state.plot<-ggplot(all.sightings, aes(x=YearMonth,y=Sightings))+ 
    geom_line(aes(color="darkblue"))+ 
    facet_wrap(~State,nrow=10,ncol=5)+
    theme_bw()+ 
    scale_color_manual(values=c("darkblue"="darkblue"),legend=FALSE)+   
    scale_x_date(major="5 years", format="%Y")+ 
    xlab("Time")+ylab("Number of Sightings")+
    opts(title="Number of UFO sightings by Month-Year and U.S. State (1990-2010)") 
```

我用过`library(scales)`，但没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:21:40.197

尝试这个

```
state.plot<-ggplot(all.sightings, aes(x=YearMonth,y=Sightings))+ 
    geom_line(aes(color="darkblue"))+ 
    facet_wrap(~State,nrow=10,ncol=5)+
    theme_bw()+ 
    scale_color_manual(values=c("darkblue"="darkblue"),guide=FALSE)+   
    scale_x_date(breaks = date_breaks("5 years"), labels = date_format("%Y"))+ 
    xlab("Time")+ylab("Number of Sightings")+
    opts(title="Number of UFO sightings by Month-Year and U.S. State (1990-2010)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T18:12:31.987

新版本的**ggplot**不再使用“ **opts** ”，所以我们需要将“ **opts** ”替换为“ **labs** ”。

正确的代码是：

```
state.plot<-ggplot(all.sightings, aes(x=YearMonth,y=Sightings))+ 
    geom_line(aes(color="darkblue"))+ 
    facet_wrap(~State,nrow=10,ncol=5)+
    theme_bw()+ 
    scale_color_manual(values=c("darkblue"="darkblue"),guide=FALSE)+   
    scale_x_date(breaks = date_breaks("5 years"), labels = date_format("%Y"))+ 
    xlab("Time")+ylab("Number of Sightings")+
    labs(title="Number of UFO sightings by Month-Year and U.S. State (1990-2010)") 
```

# apache - 禁止在网址中使用 .php

> ID：12189072
> 
> 赞同：0
> 
> 时间：2012-08-30T02:27:37.877
> 
> 标签：apache, .htaccess

我正在使用 htaccess 创建对 SEO 友好的 URL，如下所示：

```
RewriteRule ^search/page/(.*)$ /search.php?page=$1 
```

所以效果很好。当我输入 /search/page/2/ 时，它会正确重定向。但是人们仍然可以通过输入 /search.php?page=2 来访问它。我怎么能不允许呢？它应该被发送到 404 页面还是返回到 /search/page/2/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:06:21.117

我希望这个能帮上忙

```
RewriteCond %{QUERY_STRING} ^page=(.*)
RewriteRule ^search.php /search/page/%1/? [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:29:38.917

试试这个重定向到新的 URL：

```
RewriteCond %{QUERY_STRING} page=(.*)
RewriteRule ^search.php /search/page/%1 [R=301,L] 
```

# html - IE 没有正确对齐我的文本

> ID：12189074
> 
> 赞同：0
> 
> 时间：2012-08-30T02:28:19.120
> 
> 标签：html, internet-explorer, css, alignment

我在 Firefox 和 Chrome 上检查了这个网站，“发布”部分中的对齐看起来是正确的：[http ://www.mysecretathens.gr/Sera/releases.html](http://www.mysecretathens.gr/Sera/releases.html)

但是，如果您出于某种原因在 Internet Explorer 中打开页面，如您所见，某些文本会居中对齐。我一直在为此苦苦挣扎，找不到解决方案。

我想知道我在表格格式中使用的伪元素是否导致了问题

```
table td:nth-child(even) {text-align:center; } 
```

但我认为情况并非如此。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:35:05.800

首先，您的导航锚是浮动的——您在哪里清理以维持块状结构？这就是您的导航在 IE 7 中损坏的原因。

我认为 IE 7 不支持 CSS 中的 nth-child - 您可能必须通过 Jquery 执行此操作，或者在您希望内容居中的表格单元格上添加一个类。

希望这可以帮助

污秽

/ *****此处更新答案 ** ****** /

我认为值得你在[这里阅读“](http://www.w3schools.com/cssref/pr_class_clear.asp)**清除**”浮动元素

由于 IE 7 和 6 有时是一个完整的 B&#@H，因此您必须能够以其他方式开发您想要的东西，以适应这些像浏览器一样的垃圾。所以，这里是你的“**导航**”css 和 html 根据当前标准应该是什么样子的[Jsfiddle 。](http://jsfiddle.net/4BPC3/1/)

 **另外，我认为您需要重新了解何时使用“ **id** ”而不是“ **class** ”-在这种情况下，您的 HTML 中将/应该只有一个“ **nav** ”，因此您想给它一个**ID**因为它是独一无二的。

如果你想要一个内联导航，我发现最好浮动“ **li** ”元素并在导航后通过将类“ **clearfix** ”添加到“ **ul** ”和相应的样式来完成您的清除。

有关“**清除**”的简短示例，我在 nav 之后有一个 div，其中包含一个段落。如果您从“ **nav ”中删除类“** **clearfix** ”，您将看到“**段落”与“** **nav** ”一样出现在一行中。这就是为什么清除所有浮动元素很重要的原因。

 ******至于您的表格居中问题，我给您的 Jsfiddle 是要采取的路线，因为它将适应所有浏览器和移动设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:47:33.187

您的页面上的 html 格式错误，`<center>cover: Poor Designers</></div>`我认为它应该是 `<center>cover: Poor Designers</center></div>`. 不同的浏览器会以不同的方式呈现格式错误的标记，chrome 将其`<center>`扔掉并将其包裹在 div 周围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T02:38:13.177

我认为它内部的表格由于某种原因默认为 text-align center 并且 td 正在继承该值。

```
.text table{
    text-align:left;
} 
```********

# java - 我可以在 Maven 中使用混合的 java 和具有依赖关系的 scala 代码编译一个 Scala 项目吗？

> ID：12189078
> 
> 赞同：7
> 
> 时间：2012-08-30T02:28:58.720
> 
> 标签：java, eclipse, scala, maven, dependency-management

我有一个项目，它同时具有 scala 和 java 代码，我目前正在使用 scala IDE 插件在 eclipse 中管理它。目前，目录结构是这样组织的，一些包中同时包含 java 和 scala 代码。有依赖于 java 类的 scala 类，还有其他依赖于 scala 类的 java 类。该插件透明地处理所有这些 - 我相信（但我不是 100% 确定）scala 编译器将 java 和 scala 代码编译在一起，这就是处理交叉依赖关系的方式。我确实找到了一些使用 Maven 编译混合项目的参考，[例如这里](https://stackoverflow.com/questions/336144/building-a-scala-app-with-maven-that-has-java-source-mixed-in)但我看到的那些谈论将 java 和 scala 分成两个单独的源代码树。Maven 尝试首先编译 scala 代码，但由于对 java 代码的依赖而失败。同样，如果首先编译 java 代码，它也会失败，因为依赖项是双向的。有没有办法让 Maven 像 eclipse 插件一样编译所有代码？如果可能的话，我还希望能够生成一个 Eclipse 项目，而无需在事后进行太多手动修复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T02:50:13.093

通常的 Maven 目录结构是

```
src/
  main/
    java/
      com/foo/mypackage/
    scala/
      com/foo/mypackage/ 
```

如果您以这种方式进行设置，那么您肯定可以在 Java 和 Scala 代码之间建立交叉依赖关系。请参阅有关该主题的[maven-scala-plugin](http://scala-tools.org/mvnsites/maven-scala-plugin/example_java.html)或[scala-maven-plugin](http://davidb.github.com/scala-maven-plugin/example_java.html)页面。

我不建议将 Java 和 Scala 代码放在同一个目录中。

# vb6 - 使用 vb6 进行 youtube api 搜索

> ID：12189079
> 
> 赞同：0
> 
> 时间：2012-08-30T02:29:07.347
> 
> 标签：vb6, youtube-api

我需要用 vb6 搜索 youtube api，我只能在网上找到其他流行语言的库

目前，正在使用以下网址进行搜索

```
URL = "http://www.youtube.com/results?search_query=" & TextBox1.Text &
"&suggested_categories=2%2C23%2C25&page=" & pagenum 
```

我必须使用正则表达式解析页面，如果搜索页面中的某些更改可能会失败

但如果我可以用 api 来做，我更愿意，任何人都可以提出资源或解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:11:32.860

为什么不使用 Internet Explorer 附带的 MSHTML 解析网页？您需要添加对“Microsoft HTML 对象库”的引用。奇怪的是，您必须实例化一个空的 HTMLDocument 对象，然后通过调用第一个对象的方法基于您的 URL 创建一个新的 HTMLDocument 对象。但是您必须保留原始对象，否则您会不断收到“Permission Denied”错误消息。我仍然将它们都放入一个 UDT 以确保它们保持在彼此相同的范围内。

```
Option Explicit

Private Type HtmlDoc
    Parent          As MSHTML.HTMLDocument
    Main            As MSHTML.HTMLDocument
End Type

Private Sub Command1_Click()

    Dim URL
    Dim uHTMLDoc As HtmlDoc

    URL = "http://www.youtube.com/results?search_query=" & TextBox1.Text &  "&suggested_categories=2%2C23%2C25&page=" & pagenum 

    ' Source Code
    GetHTMLDocumentFromURL URL, uHTMLDoc
    Debug.Print uHTMLDoc.Main.documentElement.outerHTML

End Sub

Private Sub GetHTMLDocumentFromURL(ByRef the_sURL As String, ByRef the_uHTMLDoc As HtmlDoc)

    With the_uHTMLDoc

        Set .Parent = New MSHTML.HTMLDocument

        Set .Main = .Parent.createDocumentFromUrl(the_sURL, vbNullString)

        ' Wait for the document to load completely.
        ' This is because the transfer is asynchronous.
        ' It is possible that this string might be different if you have another
        ' language than English for Internet Explorer on the
        ' machine where the code is executed.

        Do While .Main.readyState <> "complete"
            DoEvents
        Loop

    End With

End Sub 
```

我不知道你想做什么类型的解析，但是看看 HTMLDocument 类上的各种方法，例如 GetElementById()、GetElementsByName() 和 GetElementsByTagName()。好好看看类型库，并尝试一些实验来掌握它。

# jquery - Ajax 调用后添加表单元素

> ID：12189080
> 
> 赞同：0
> 
> 时间：2012-08-30T02:29:07.140
> 
> 标签：jquery, ruby-on-rails, ajax

我正在构建一个允许用户输入单词的表单，当他们关闭时，我查询字典（Wordnik.com）以检索定义，并将定义作为单选按钮选择添加到表单中。javascript 拿起这个词，在我的 WordsController 中调用 get_definition 函数并查询字典 API，但我似乎无法得到要渲染的部分（现在它只是打印出 "<%= escape_javascript.....% >")

PS：我也试过直接用jquery查询api（所以我没有点击get_definitions函数）但我无法获得发送请求，所以我现在坚持使用上述方法。

words_controller：

```
def index
    @words = Word.where(user_id: current_user)
    @word = current_user.words.new
    @defs = Array.new
end

def get_definition
    @defs = Wordnik.word.get_definitions(params['word'])
    render nothing: true
end 
```

javascript:

```
$('input#word_name').blur(function(){
    var word = $('input#word_name').val();
    $.ajax({
            url: '/words/get_definition',
            data: 'word='+word
    })
    $('#addDefinitionContainer').html("<%= escape_javascript(render partial: 'words/definitions', locals: {f: f}) %>")
}) 
```

_definitions 部分：

```
<% @defs.each do |definition| %>
   <div class="definition_choice">
   <%= f.label definition %>
   <%= f.radio_button :definition, "yes" %>
   </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:35:46.773

我决定在 js 中手动添加表单元素，而不是尝试在 javascript 中呈现 ruby​​ 部分。在 ajax 调用我的 ruby​​ 方法之后，我调用以下方法作为回调：

```
function addDefsToForm(data){           
    $.each(data, function(index,item){
        var radio = $('<input />', { id: 'word_definition_'+index, name: 'word_definition', type: 'radio', value: item['text']});
        $('#addDefinitionContainer').append(radio);
        $('#addDefinitionContainer').append(item['text']+"<br />");
    });

}; 
```

这会为我收到的每个定义添加一个单选按钮（带有相关文本）到页面。但是，用户选择的单选按钮不会与 POST 请求中的单词一起发送。解决方案是在提交时在表单上调用 jquery serialize() 函数：

```
$('form').submit(function(){
    $(this).serialize();
}); 
```

我想由于这些添加的表单元素（单选按钮）在页面首次呈现时不在 DOM 中，因此不会在表单提交时查找它们。serialize 函数按照现在的形式遍历表单并准备一个要发送的新字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:21:26.013

问题是您不能在 .js 文件中包含 ruby​​ 代码。即使你内联了 js 代码，你仍然会遇到问题。

值得庆幸的是，Rails 内置了库来帮助您使用 ajax。看看这个： http: [//guides.rubyonrails.org/ajax_on_rails.html](http://guides.rubyonrails.org/ajax_on_rails.html)

# php - PHPStorm 4.0 - 无法在单个类/方法上运行 PHPUnit

> ID：12189091
> 
> 赞同：1
> 
> 时间：2012-08-30T02:31:10.820
> 
> 标签：php, phpunit, phpstorm

我在 PHPStorm 4.0.3 中的 PHP 项目（使用 Kohana 3.2 框架）有问题。在使用 Class 或 Method 范围设置 PHPUnit 时，如果测试类扩展自`Unittest_Database_Testcase`.

例如，我无法测试下面的类，因为“**选择测试类**”对话框显示“Nothing to show”。

```
/**
 * Class cannot be chosen.
 */
class A_Test extends Unittest_Database_Testcase {
    public function test_something() { /* ... hence this method test cannot be chosen */ }
} 
```

但是，如果文件扩展自`Unittest_Testcase`，则 PHPStorm 可以检测到该类（以及随后的方法），并且我能够运行测试。

```
class A_Test extends Unittest_Testcase {
    public function test_something() {}
} 
```

我怀疑原因是 PHPStorm 尚未支持单独运行数据库测试。有没有办法解决这个问题？

**注意：**我对运行整个测试套件没有任何问题，但是，我担心测试的数量正在增长。运行单个数据库测试大约需要半秒钟（由于涉及到查询），因此每次我需要验证新编写的测试是否正常工作时，运行整个测试套件将非常耗时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:08:29.300

对于任何错过它的人，OP找到了答案并将其发布在评论中......

> 我必须在引导文件中手动包含 Abstract_Class。可能是因为当 PHPUnit 指向测试文件时没有自动包含它。

# java - http请求之间是否重用了请求线程？

> ID：12189100
> 
> 赞同：2
> 
> 时间：2012-08-30T02:34:13.040
> 
> 标签：java, multithreading, google-app-engine, thread-safety, httprequest

我有一个 true 的 java appengine 应用程序。我知道多个线程将在处理多个并发请求的单个实例上运行。我知道代码必须是线程安全的，即没有全局静态变量。

我不明白的是线程是否在请求结束时被杀死，或者同一个线程是否可以在处理完一个请求后用于处理另一个传入请求。

为什么这很重要？一些细节：

我有一个带有线程局部变量的静态类，如下所示：

```
public abstract class Foo {
    private static final ThreadLocal<Boolean> threadIsApiCall = new ThreadLocal<Boolean>();
    static {
         setIsApiCall(false);
    }
} 
```

该变量存储当前对该线程的请求是调用我们的 rest api 还是来自我们自己的自定义客户端的调用。只有在匹配我们的 api 路径的过滤器运行时，才会设置此变量。我遇到的问题是，如果向我们的 API 发出请求，并且 threadlocal 变量设置为 true，那么在后续请求（不是 api 请求）上，threadlocal 变量仍设置为 true。您会怀疑它会因为静态初始化程序而设置为 false。仍然可以将其设置为 true 的唯一方法是，如果初始化程序没有运行，这让我相信线程被重用了。这是真的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:49:02.577

线程重用是 servlet 实现的一个实现细节。线程通常通过线程池重用。这通常可以通过 servlet 配置进行配置。不幸的是，GAE 并非如此。

您可以通过 logging 简单地检查 GAE 是否回收线程`Thread.currentThread().getName()`。

由于可能的线程重用，`ThreadLocal`在 servlet 中使用总是一个坏主意。如果`servletRequest.setAttribute(..)`您需要在请求范围内存储一些数据，请使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:54:17.780

static{...} 只被调用一次（每个类加载器，当类第一次加载到内存中时）。

您需要为每个线程设置 theadlocal 值：

```
public abstract class Foo {
    private static final ThreadLocal<Boolean> threadIsApiCall = new ThreadLocal<Boolean>();

    public static void yourFirstMethodInvokedByCustomClient() {
         threadIsApiCall.set(false);
    }

    public static void yourFirstMethodInvokedByRESTAPI() {
         threadIsApiCall.set(true);
    }

    public static void anotherLaterMethod() {
         boolean isAPI = threadIsAPICall.get();
         ...
    }
} 
```

# css - 将Rails中的radio_button_tag和label_tag与twitter bootstrap 2水平对齐？

> ID：12189104
> 
> 赞同：3
> 
> 时间：2012-08-30T02:34:54.017
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我似乎无法将 radio_button_tag 与其 label_tag 水平对齐。（使用 HAML）

```
=radio_button_tag(:animal, "dog")
=label_tag(:animal, "Dog") 
```

我为这两个表单助手分配了哪些类，以使它们彼此相邻，如下所示：

```
O Dog 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T03:26:57.350

在封闭的表单标签上使用`.form-inline`通常可以解决我遇到的任何垂直对齐问题，尽管它可能不适用于所有情况。

**更新**

Bootstrap 现在还有几个类，您可以将它们应用于封闭块，以便分别将复选框和单选按钮与以下文本对齐。从他们的文档中：

```
<label class="checkbox">
  <input type="checkbox" value="">
  Option one is this and that—be sure to include why it's great
</label>

<label class="radio">
  <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
  Option one is this and that—be sure to include why it's great
</label>
<label class="radio">
  <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
  Option two can be something else and selecting it will deselect option one
</label> 
```

它不一定是标签 - 任何块元素都应该工作。

请参阅此处： http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)（“复选框和收音机”部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-20T17:05:12.390

对我来说，内联显示元素的各种方式并没有解决问题。我意识到问题不在于显示，而是单选按钮的内容高度（出于某种原因 46px）。

因此，将单选按钮的高度设置为“自动”为我解决了这个问题：

```
input[type='radio'] {
  height: auto;
 } 
```

# html - webrtc - 视频得到blob，但它仍然是黑色的

> ID：12189109
> 
> 赞同：10
> 
> 时间：2012-08-30T02:35:28.123
> 
> 标签：html, html5-video, webrtc

我用 chrome 21 运行我的 webrtc 代码。

如果我在同一个 chrome 中打开两个选项卡，然后打开带有 webrtc 代码的页面。一个选项卡用于发送视频流；一个选项卡用于接收视频流它工作正常。

但是，如果我使用两种隐身模式或两种不同的 chrome 浏览器打开页面，我可以正确获取**sdp**和**候选**信息。似乎视频可以解码信息。

在远程视频中，我只能看到![在此处输入图像描述](../Images/f7aee8ab2c39a428e1eb4ff29bf4f605.png)

此外，它似乎崩溃了。我试图点击“关闭 chrome”，但没用。

有没有人有类似的问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T01:45:54.203

在测试**WebRTC**时，我发现当我们`peerConnection.addStream(…)`在**错误**的地方调用时会发生这种情况----

*您必须记住，在**WebRTC**中订购非常重要！*

* * *

### 更新时间：下午 6:36 - 2014 年 7 月 17 日星期四（UTC）

以下情况会出现空白视频：

1.  当您的 SSL 证书已过期或包含无效条目时，您正在使用 STUN。
2.  您正在使用 STUN，但它是公司防火墙、医院网络或私有网络，它阻止或隐藏外部 IP 地址或某些端口。
3.  两个对等点都有无效的 sendrecv/sendonly/recvonly 对
4.  提供者没有附加流，或者它是 Firefox，如果用户仅附加音频流但您正在使用它会失败`OfferToReceiveVideo:true`
5.  您正在检查`HTMLMediaElement.HAVE_CURRENT_DATA`或`mediaElement.paused`或`mediaElement.currentTime`同时它是 android 有关于这些属性的已知问题。

## 解决方案？

1.  使用 XirSys 的 TURN 或[安装您自己的](https://code.google.com/p/rfc5766-turn-server/).
2.  确保您使用的是有效的 SSL 证书或改用 HTTP。
3.  确保提供者附加了流；还要确保`OfferToReceiveAudio`/`OfferToReceiveVideo`根据附加的流使用。
4.  确保您没有修改 SDP；还尝试比较两个对等点之间的 SDP 并找出不匹配。

现在，代码的排序是一种罕见的问题，因为我们都知道`addStream`应该在创建报价或答案之前调用它；即使是重新谈判的会议。

尝试使用`chrome://webrtc-internals`Firefox`about:config`来查看这些浏览器内部发生的情况；并始终使用控制台日志记录`onIceConnectionStateChange`事件，这可以帮助您检查 ICE-Agent 是否`failed`在 ICE 连接检查过程中或...

有时为提供者设置-remote-sdp 太早会导致异常。始终使用`onSdpError`for `createOffer`/`createAnswer`和`setLocalDescription`/`setRemoteDescription`例如

`peer.setRemoteDescription(remoteSDP, onSdpSuccess, onSdpFailure);`

* * *

一些演示资源：

1.  [https://github.com/muaz-khan/WebRTC-Experiment/Demos](https://github.com/muaz-khan/WebRTC-Experiment) _ [_](https://www.webrtc-experiment.com/)
2.  [https://github.com/mozilla/webrtc-landing](https://github.com/mozilla/webrtc-landing)

和[https://www.webrtc-experiment.com/docs/TURN-server-installation-guide.html](https://www.webrtc-experiment.com/docs/TURN-server-installation-guide.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-07T16:05:10.267

我遇到了同样的问题，我只是在将流附加为 VideoElement.src 后立即调用 VideoElement.play() 解决了这个问题

```
document.querySelector( "#video" ).src = window.URL.createObjectURL( remoteStream );
document.querySelector( "#video" ).play(); 
```

不要等待loadedmetadata事件，因为它似乎没有被触发，而是WebRTC流。

# objective-c - 应用程序设计 - 谁应该拥有单例对象

> ID：12189110
> 
> 赞同：0
> 
> 时间：2012-08-30T02:35:40.427
> 
> 标签：objective-c, cocoa, design-patterns

在我的基于文档的应用程序中，我有一个 AppController 来处理打开 Prefs、About 面板等。我还有一个单例类；因为它基本上是一个被传递的全局对象，谁应该拥有它？使用它的对象还是我的 AppController？我读过的一些文章说你*应该*有一个“中心”的地方——比如一个代表，其他人说这是糟糕的设计，只有一个使用类 X 的对象应该拥有类 X。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:11:52.673

没有什么真正拥有单例，因为它存储在这样的静态变量中：

```
static Globals *sharedGlobals = nil;

@implementation Globals

+ (Globals *) sharedGlobals {
    if (!sharedGlobals) sharedGlobals = [[Globals alloc] init];
    return sharedGlobals;
} 
```

第一次`sharedGlobals`调用该方法时，单例将由调用它的任何类创建。谁先调用它并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:47:23.360

我认为单例对象在第一次分配后才存在于内存中，它不应该被任何对象拥有。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T06:44:19.467

您不应该使用单例来定义全局对象，单例模式旨在提供一种方法来确保在一个上下文中具有唯一性。但问题是，如果不使用依赖注入框架，通过java实现，实现模式的静态方法让所有应用类可以自由访问单例。因此，这是一种开始破坏您自己的模块/应用程序设计的方法（如果您没有正确控制它）。

在您决定使用或不使用单例模式（反对和赞成）之前先看看这篇文章：

*   [单身人士有什么不好？](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)
*   [http://caines.ca/blog/programming/singletons-anti-pattern-or-worst-anti-pattern-ever/](http://caines.ca/blog/programming/singletons-anti-pattern-or-worst-anti-pattern-ever/)
*   [http://jorudolph.wordpress.com/2009/11/22/singleton-considerations/](http://jorudolph.wordpress.com/2009/11/22/singleton-considerations/)

# c++ - 如何在当前目录下强加dll文件？

> ID：12189112
> 
> 赞同：2
> 
> 时间：2012-08-30T02:35:53.467
> 
> 标签：c++, windows, dll, mfc

此应用程序使用 msado15.dll、msvcr100.dll 和许多 dll。

我发现应用程序没有使用 ProcessExplorer 和 DependencyWalker 在当前目录中加载 msado15.dll 和 msvcr100.dll 文件。

相反，此应用程序从 winsxs 文件夹或不同的 Windows 系统目录加载 dll。

我想阻止它在“非当前目录”中加载 dll，即使它在没有我复制的 dll 的情况下也能正常工作。

我怎样才能解决这个问题？任何帮助，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T02:50:56.603

我做了一些研究，实际上很容易。根据[这篇文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375142%28v=vs.85%29.aspx)，您所要做的就是创建一个名为`(YourAppName).local`. 这将告诉 Windows 在 exe 文件夹中查找，而不是使用共享组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:08:08.287

将这些 DLL（msado15.dll、msvcr100.dll）的副本放在包含您的 exe 的目录中。Loader 将首先尝试从包含您的 exe 的目录中加载 DLL。

以下是 Windows 加载程序搜索 DLL 的顺序：[参考：Windows via C-C++ by Jeffrey Richter]

1.  包含可执行文件的目录
2.  GetWindowsDirectory 返回的 Windows 系统目录
3.  16 位系统目录——即 Windows 目录下的 System 子文件夹
4.  GetSystemDirectory 返回的 Windows 目录
5.  进程的当前目录
6.  PATH 环境变量中列出的目录

# rpc - 如何使用 samba 实现的 dcerpc 库？

> ID：12189114
> 
> 赞同：3
> 
> 时间：2012-08-30T02:36:04.020
> 
> 标签：rpc, samba, dce

现在我的任务是通过 samba 实现的 dcerpc 库编写 rpc 服务器和客户端。我想在过去 4 天内从 samba.org 和来源获取一些信息。不幸的是，我没有得到任何对我有用的东西。

有没有用samba的rpc工具写一个rpc服务器和客户端（RPC Helloworld）的例子或者教程？？？

多谢

# asp.net - SQL 和 ASP.net 中的层次结构

> ID：12189115
> 
> 赞同：1
> 
> 时间：2012-08-30T02:36:17.040
> 
> 标签：asp.net, sql, sql-server, ado.net, hierarchical-data

`Posts`我正在创建一个包含和的网页`Comments`。但是，当我在渲染 that 期间检索`Comments`for each时，检索速度非常慢。我的猜测是，这是由于频繁打开/关闭连接。无论如何，它不能很好地扩展。`Post``Post`

为了解决这个问题，我正在考虑将两个实体合并为一个，并`Posts`以`Comments`多态方式进行建模。换句话说，`Entry`成为一个超类，被`Post`和子类化`Comment`。

谁能给我一些建议，这是否是一种有效的方法？或者，我愿意接受其他可能也解决我可能没有想到的嵌套`Repeater`/性能问题的建议。`DataList`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:00:11.687

即使您的博客对帖子有数千条评论，它仍然可以正常工作。
RDBMS 表经常会遇到数百万条记录。

频繁打开和关闭连接将成为性能瓶颈。
您应该一次获取所有数据，然后将其传递给您的嵌套中继器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:41:11.743

扩展 nunespascal 所说的：

无论您是通过两个单独的表将数据作为两个单独的实体拉回，还是从同一个表中以多态方式将其拉回，听起来您遇到的问题是您*如何*请求数据。

在 C#-ish EF 伪代码中考虑这两种方法：

**方法 1：迭代加载子项**

```
var posts = db.Posts;
foreach (Post p in posts) {
    Html.Render(p);

    var comments = db.Comments.Where(c => c.PostId == p.PostId);
    foreach (Comment c in comments) {
        Html.Render(c);
    }
} 
```

这听起来像是您在当前的中继器迭代中基本上正在做的事情。对于您来到的每个帖子，加载属于它的评论 - 并将它们呈现出来。

这正是您所描述的瓶颈，您正在打开/关闭大量连接并运行大量单独的原子 SQL 语句。如果可以，请避免这种情况。

**方法 2：一起加载父母/孩子**

```
var posts = db.Posts.Top(10);
// ^ The .Top(10) limits the result-set to a manageable number of posts (10).

var ids = posts.Select(p => p.PostId);
// ^ This line creates an Enumerable list of the IDs of your loaded posts.

var comments = db.Comments.Where(c => ids.Contains(c.PostId));
// ^ This line loads all the comments which belong to the 10 posts you loaded.

foreach (Post p in posts) {
    Html.Render(p);

    foreach (Comment c in comments.Where(c => c.PostId == p.PostId)) {
        // This loop iterates the comments in the same way the previous example
        // showed, with the exception that it iterates *in memory*, rather than
        // running additional SQL on each iteration.
        Html.Render(c);
    }
} 
```

因为您在第二个示例中加载了内存中的所有项目，所以您保存了所有往返行程 - 只创建了 2 个 SQL 语句，这两个语句都在开始时运行。

如果您实际上使用的是 EF4/5（上面的代码基于），您实际上甚至可以执行以下操作：

```
var posts = db.Posts.Include("Comments");
// ^ This line loads both Posts and Comments in a single SQL statement

foreach (Post p in posts) {
    Html.Render(p);

    foreach (Comment c in p.Comments) {
        // EF5 and other ORMs can create a .Comments property which contains an
        // Enumerable list of the comments, already filtered on the FK binding
        Html.Render(c);
    }
} 
```

# internet-explorer - ie10中的xml问题

> ID：12189118
> 
> 赞同：1
> 
> 时间：2012-08-30T02:36:37.883
> 
> 标签：internet-explorer, asp-classic

```
<XM1L ID="Update"><%= HdrXML.xml %></X1ML>
<script language="Javascript">
    var xslPath = "../Naven.xsl";
    var x = OrchGenericObj.TranformSP(Update.innerHTML,xslPath);
    document.write (x);
</script> 
```

我有上面的代码。在 IE10 Update.innerHTML 中，它提供了包括 HdrXML.xml 在内的所有 js 代码，因此我无法加载 xml，但相同的代码在所有其他版本的 IE 中工作正常......在其他版本中，当我执行 Update.innerHTML它只给了我 HdrXML。`enter code here`xml 这就是我想要的...知道为什么在 IE10 中出现这种行为..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:23:33.743

开始标签 XM1L 与结束标签 X1ML 不匹配。您还应该使用这一行：

```
 var x = OrchGenericObj.TranformSP(document.getElementById("Update").innerHTML, xslPath); 
```

# java - Maven 和 GitHub 的版本编号/发布机制

> ID：12189121
> 
> 赞同：8
> 
> 时间：2012-08-30T02:37:15.057
> 
> 标签：java, git, maven, github, versioning

我正在尝试找出管理工作流程的最佳方式，以允许使用 Maven 和 Git 进行版本编号和发布。

目前我的工作流程是：

1.  编辑 pom.xml 以指示新的快照版本“1.2.3-SNAPSHOT”
2.  使用消息“在 1.2.3-SNAPSHOT 上开始工作”提交到 git
3.  做编码工作，在每次成功的“mvn test”等之后提交。
4.  对版本满意后，将 pom.xml 版本编辑为“1.2.3”
5.  提交消息“1.2.3 Release”
6.  添加标签“1.2.3”
7.  部署代码（例如推送到外部 Maven 存储库）
8.  转到 1。

我在“master”分支中完成所有工作，除非我需要做一些实验性的事情（在这种情况下，我会切换到一个新分支，定期合并）

这是一个合理的工作流程吗？我可以改进它的任何方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T04:17:50.530

使用应该为您执行此操作的[maven-release 插件。](http://maven.apache.org/plugins/maven-release-plugin/)发布涉及两个步骤：

*   [`mvn release:prepare`](http://maven.apache.org/plugins/maven-release-plugin/prepare-mojo.html)它将询问您发布的版本、标签名称和下一个开发版本
*   [`mvn release:perform`](http://maven.apache.org/plugins/maven-release-plugin/perform-mojo.html)这将构建发布工件并将它们发布到远程 Maven 存储库

为了使这项工作，你必须在你的 pom 文件中配置几件事：

*   正确的[SCM URLs](http://maven.apache.org/pom.html#SCM)，对于 GitHub 应该如下所示：

```
 <scm>
    <connection>scm:git:git://github.com/user/repo.git</connection>
    <developerConnection>scm:git:git@github.com:user/repo.git</developerConnection>
    <url>https://github.com/user/repo/tree/master/</url>
  </scm> 
```

*   适当的[分发存储库](http://maven.apache.org/pom.html#Distribution_Management)将`release:perform`上传构建的工件

当您使用它时，您应该设置一个用于[签署标签](http://maven.apache.org/plugins/maven-gpg-plugin/)的 GPG 密钥。

# html - 浮动右框的宽度到最大宽度

> ID：12189122
> 
> 赞同：2
> 
> 时间：2012-08-30T02:37:29.127
> 
> 标签：html, css, css-float, width

类似于这里的问题：

[CSS - 浮动到最大宽度](https://stackoverflow.com/questions/8146908/css-float-to-max-width)

我正在尝试 <pic> / <info> 样式的布局 - 但扭曲的是，如果用户将浏览器的大小调整得更小，我想让这个布局响应。

为此，我需要将 <info> 框放在布局中的 <pic> 框上方，这样当宽度低于某个像素宽度时，我会从 <info> 中删除“浮动右侧”，它应该正好插在上面图片框。

这是全尺寸布局的 JS 小提琴：

[http://jsfiddle.net/FNwcA/](http://jsfiddle.net/FNwcA/)

有没有办法让“Fred”框填充宽度，以便它在**不使用精确像素宽度**的情况下抵靠红色框？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:05:28.093

如果图片 div 在 info div 之前，您可以将其浮动`left`，并根据视口宽度（使用[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)）将其删除。[**演示**](http://jsfiddle.net/Qwuzt/1/)。

正如对[链接问题的公认答案](https://stackoverflow.com/a/8146946/825789)所说：

> 当您希望它扩展以填充父对象时，浮动某些东西没有多大意义

# xaml - 名称空间 YYY 中不存在名称 XXX (XAML VS12 Windows 8)

> ID：12189127
> 
> 赞同：18
> 
> 时间：2012-08-30T02:38:27.710
> 
> 标签：xaml

所以我在 Windows 8 上的 VS12 中工作，并破解 ContosoCookbook 代码来制作不同的应用程序。我正在尝试设置一个“MainMenu.xaml”页面，并且我有：

```
 <CollectionViewSource
        x:Name="groupedItemsViewSource"
        Source="{Binding Groups}"
        IsSourceGrouped="true"
        ItemsPath="TopItems"
        d:Source="{Binding AllGroups, Source={d:DesignInstance Type=data:FlashCardDataSource, IsDesignTimeCreatable=True}}"/> 
```

我得到的错误是：名称“FlashCardDataSource”在命名空间“using:FlashCards.Data”中不存在。

...但我不明白它是怎么做到的。我从哪里开始寻找？我是 XAML 的新手。

-肯

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-22T07:00:24.627

如果没有其他可能，请注释使用命名空间的行，重新构建，然后再次构建完整的项目。

我还尝试重建项目，重新打开 Visual Studio。没有任何帮助。我终于评论`xaml`了，重建了项目，取消了评论，`xaml`它终于奏效了！奇怪的问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-12T11:03:54.097

如果清理和重建没有帮助，请尝试重新启动 Visual Studio。为我工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-18T12:58:01.583

通常，此错误是由以下原因之一引起的：

1.  您尚未引用该类所在的程序集。
2.  将类添加到程序集后，您尚未更新对程序集的引用。
3.  您引用了错误版本的程序集。
4.  您引用的是 .DLL 文件而不是项目（如果项目是您的解决方案的一部分）
5.  您引用的类中存在语法错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-27T10:26:40.687

检查每个类和 xaml 文件的命名空间（即使在*App.xaml*和*MainWindow.xaml*中）。确保您没有`x:Class`将文件顶部元素中的 与命名空间混淆。有时它确实看起来像一个错误，但它只是某个地方的一个命名空间，它独立于将所有东西混在一起的所有其他东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T02:44:21.007

您是否尝试重建您的项目？也许清理项目并再次重建。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-28T11:41:03.833

如果您确定该类存在于正确的命名空间中，只需右键单击 VS 中的项目并选择 Unload。然后重新加载项目。这使得它重新评估所有命名空间，并且是我发现的问题的唯一解决方法（当它真的持续不承认你的类时；）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-23T04:19:00.547

就我而言，我清除了所有类中与我通过代码分配的绑定相关的所有属性值，然后一切都变得正常。

我认为如果在类中的某个错误位置同时使用 in 绑定的属性赋予值会导致问题，因此删除与该属性相关的所有分配代码可能会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-25T16:07:53.377

以上都没有为我工作，但简单地添加另一个虚拟类到包含它声称不存在的类的文件夹似乎可以解决问题。或许它让 VS 有了另外一番景象。

# html - 加载链接而不是链接

> ID：12189131
> 
> 赞同：0
> 
> 时间：2012-08-30T02:38:48.243
> 
> 标签：html, forms, button, anchor

我有一个包含很多表格行的表格`<tr>`。

每个`<tr>`作为 a`button`和 a `link`。

这是我的一些代码

```
<form name="mycart" id="mycart" action="library/cartactivity.php?action=update" method="post">
   <table cellspacing="0">   
      <tr id="cart-list" onClick="document.location.href='index.php'">
         <td><button onclick="location.href='library/stockactivity.php';">Remove</button></td>
      </tr>
   </table>
   <input type="submit" value="submit"/>
</form> 
```

我的问题是当我点击`<button>`它加载`<input type="submit">`链接

但是，我将代码更改为

```
<form name="mycart" id="mycart" action="library/cartactivity.php?action=update" method="post">
    <table cellspacing="0">   
       <tr id="cart-list" onClick="document.location.href='index.php'">
          <td><input type="button"  onclick="location.href='library/stockactivity.php';" value="Remove" /></td>
       </tr>
    </table>
    <input type="submit" value="submit"/>
</form> 
```

（我`<button>`改为`<input type="button">`）

我的问题是当我点击`<input type="button">`它加载`<tr>`链接

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:41:28.387

您需要添加`return false;`到您的事件处理程序：

```
<button onclick="location.href='......'; return false;">Remove</button> 
```

这将阻止提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:59:36.220

使用`<a>`标签而不是`onclick`. 试试这个

```
<a href="library/stockactivity.php" style="text-decoration: none;"><input type="button" value="Remove" /></a> 
```

# android - 如何在复选框上设置附加文本参见图片

> ID：12189132
> 
> 赞同：0
> 
> 时间：2012-08-30T02:38:49.253
> 
> 标签：android

如何在复选框上添加另一个文本，请参见红色圆圈内。见下文。请帮忙。

![在此处输入图像描述](../Images/37ae9a5b0e427d2a0fae3540864b1e12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:02:09.670

我认为显示的图片来自复选框偏好，您可以在[这里学习教程](http://thenewboston.org/watch.php?cat=6&number=54)

如果您不想使用首选项，可以自定义它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:02:14.070

只需在 CheckBox 旁边放置一个带有两个 TextView 的 LinearLayout。以下代码应该可以实现您正在寻找的内容。

```
 <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="10dip"
                    android:orientation="horizontal" >  

                   <CheckBox
                        android:id="@+id/cb_MyCheckBox"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>

                    <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:layout_gravity="center" >

                            <TextView
                                android:id="@+id/tv_TopText"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Top Text "
                                android:textColor="#000000"
                                android:textSize="10dp" >
                            </TextView>

                            <TextView
                                android:id="@+id/tv_BottomText"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="BottomText "
                                android:textColor="#000000"
                                android:textSize="10dp" >
                            </TextView>                             
                        </TextView>
                </LinearLayout>
                </LinearLayout> 
```

您将需要相应地调整以获得所需的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:04:04.303

看起来您是从 Preference Activity 获得的。如果您不想要 Preference 活动，您可以使用自定义列表视图。

# python - 在 Python 中生成层次图

> ID：12189133
> 
> 赞同：-1
> 
> 时间：2012-08-30T02:38:56.343
> 
> 标签：python, data-visualization

我有一个 CSV 结构的 BOM，如下所示

```
1, Part 1
2, Part 12
2, Part 13
3, Part 123
1, Part 2
2, Part 22 
```

有没有办法在 Python 中创建一个层次图，比如这个？任何帮助将不胜感激！ [http://mirror.neu.edu.cn/mysql/tech-resources/articles/hierarchical-data-1.png](http://mirror.neu.edu.cn/mysql/tech-resources/articles/hierarchical-data-1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:52:03.143

您可以生成[DOT](http://www.graphviz.org/Gallery.php)描述并使用[Graphviz](http://www.graphviz.org/)进行渲染。它有很多 Python 绑定： http: [//www.graphviz.org/Resources.php](http://www.graphviz.org/Resources.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:51:01.753

[pydot](http://code.google.com/p/pydot/)是[Graphviz](http://www.graphviz.org/)的一个接口，它能够处理[各种图形](http://www.graphviz.org/Gallery.php)。

# ruby-on-rails - has_many/has_one :through 在某些情况下进行 N+1 查询，使用委托代替？

> ID：12189134
> 
> 赞同：2
> 
> 时间：2012-08-30T02:39:16.957
> 
> 标签：ruby-on-rails, optimization, rails-activerecord

在诊断 N+1 查询问题时，我注意到 ActiveRecord has_one/has_many :through 链接在一起时的关联忽略了包含。

示例代码（我的案例是我们的模型）：

```
class Post  < ActiveRecord::Base
   has_one :user
   has_one :badge, through: :user
end

class User  < ActiveRecord::Base
   has_one :badge
 end

 class Badge  < ActiveRecord::Base

 end 
```

遍历关联不会执行除包含之外的其他查询

```
post = Post.include(:user => :badge)
post.user.badge 
```

但试图通过：

```
post = Post.include(:user => :badge)
post.badge 
```

进行另一个 LIMIT 1 查询。这将导致 N+1 在循环中。

为了解决这个问题，我想用代表替换所有 has_one/many :through。has_many/one :through 选项有什么优势（在没有条件的情况下）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:00:07.207

问题很可能是 include(:user => :badge) 遵循 Post.user 关联，然后是 User.badge 关联，因此当您遵循单个 Post.badge 关联时，Rails 会忽略包含，因为您已经设置了它对于不同的协会。

也就是说，即使它是相同的路径，它们也是不同的关联。

只包括（：徽章）会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:51:31.380

我认为这段代码可能更适合你。

```
post = Post.includes(:user => [:badge]) 
```

# java - Spring Project Nature 是什么？

> ID：12189137
> 
> 赞同：4
> 
> 时间：2012-08-30T02:40:07.110
> 
> 标签：java, eclipse, spring, sts-springsourcetoolsuite, spring-nature

我有一个在 Eclipse 中创建的项目，但我现在想使用 SpringSource 的 STS IDE。我现在在 STS 中有 Java 项目，我将项目转换为 Maven 项目以获得 Maven 的支持。

**问题**

“Add Spring Project Nature”功能究竟是做什么的？它的目的是什么？

**编辑** 也许更好的问题是“自然”相对于 Spring STS 意味着什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T03:18:23.823

“性质”与您的代码或弹簧无关。在 Eclipse 中，“项目性质”在项目和工具、插件或功能集之间创建了关联。通过向 Eclipse 项目添加性质，您可以告诉 Eclipse 插件它已配置为使用该项目。通过将“Spring Project Nature”添加到您的项目中，您可以启用 eclipse 的 spring 插件来处理您的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T07:08:44.550

我发现了自己；分享它可能对其他人有用.. 所涉及的步骤：

1.  转到“帮助”，单击“安装新软件”
2.  在链接部分输入此链接：[http ://springide.org/updatesite。](http://springide.org/updatesite)
3.  从下面填充的列表中选择“Spring IDE 核心”。您也可以根据使用情况选择其他，然后按照屏幕说明进行操作。

# winapi - Windows 7 显示器交换错误

> ID：12189139
> 
> 赞同：3
> 
> 时间：2012-08-30T02:40:34.283
> 
> 标签：winapi, windows-7, multiple-monitors

我写了一个小应用程序来切换主监视器上的按钮单击，如下所示：

```
Monitor 0 --> Monitor 1 --> Monitor 2 
```

每单击一次按钮，主监视器就会在三者之间切换。

每次单击按钮时，我都能够成功切换监视器，并且监视器坐标应该是

```
(0,0)
(1920,0)
(3840,0) 
```

在这三种情况下，我也能够实现它。但是，当我尝试将监视器从监视器 2 切换到监视器 0 时，返回的监视器坐标为：

```
(0,0)
(0,0)
(1920,0) 
```

ChangeDisplaySettingEx 函数不返回任何错误，并且监视器按预期工作。由于返回的坐标不正确，因此我尝试定位的窗口放置不正确。必须放置在第二个屏幕上的窗口被放置在第一个屏幕上。

这是我当前如何切换监视器的代码示例：

```
 next_position++;

        if(next_position>2)
        {
            next_position=0;            
        }

     POINTL posPrimary={0};
     posPrimary.x=0
     posPrimary.y=0;

     DEVMODE mode_primary = {0};
     mode_primary.dmSize = sizeof(mode_primary);
     mode_primary.dmFields = DM_POSITION;
     mode_primary.dmPosition = posPrimary;

    LONG status = ChangeDisplaySettingsEx(
        nameofMonitor[next_position],
        &mode_primary,
        nullptr, // reserved
       CDS_SET_PRIMARY | CDS_UPDATEREGISTRY,
        nullptr // no video parameter
    );
      if (DISP_CHANGE_SUCCESSFUL != status) {
        printf("ChangeDisplaySettingsEx returned %d", status);
        return -__LINE__;
    }

    int m =1;
    for(int var =0; var<=2;var++)
    {

         posPrimary.y=0;
         posPrimary.x=dxWidthPrimary*m;
         m++;
         DEVMODE mode_primary = {0};
         mode_primary.dmSize = sizeof(mode_primary);
         mode_primary.dmFields = DM_POSITION;
         mode_primary.dmPosition = posPrimary;

        if(var!=next_position)
        {
        status = ChangeDisplaySettingsEx(
        nameofMonitor[var],
        &mode_primary,
        nullptr, // reserved
       CDS_GLOBAL | CDS_UPDATEREGISTRY,
        nullptr // no video parameter
    );
          if (DISP_CHANGE_SUCCESSFUL != status) {
        printf("ChangeDisplaySettingsEx returned %d", status);
        return -__LINE__;
    }
        }
    }

    ChangeDisplaySettingsEx (NULL, NULL, NULL, 0, NULL); 
```

由于我的代码按预期工作，我是否应该通过将 (0,0) 更改为 (3840,0) 来覆盖这个错误条件？我在这里找不到问题

# ruby - 如何使交互式 Ruby 程序更好？

> ID：12189142
> 
> 赞同：1
> 
> 时间：2012-08-30T02:41:26.817
> 
> 标签：ruby

（运行 Ruby 1.9.3 的 Windows 7 x64）

情况是这样的：我用 Ruby 制作了文本游戏，并且我使用传统的`gets`方法来获取用户的输入。当游戏中发生某些事情时（即，正在将内容打印到屏幕上），用户输入的任何内容都会丢失，用户必须继续在新行上输入他/她输入的内容。他/她在丢失之前最初输入的内容仍然存在，只是没有显示出来。

如果以上没有意义，请尝试执行此代码，您将看到问题：

```
Thread.new do
    loop do
        puts "Hello!"
        sleep 2
    end
end

Thread.new do
    loop do
        gets
    end
end 
```

我想要的是打印的行（在这种情况下`"Hello!"`）放置在用户输入的行之前。

我知道要实现这一点，我可能需要深入研究 Windows API。甚至可能是不可能的。但如果有办法，我真的很想知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:05:06.163

创建交互式终端程序最有用的库是[Curses](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/curses/rdoc/Curses.html)和[Readline](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/readline/rdoc/Readline.html)。前者让您可以在终端中的任意位置移动光标、以颜色打印、创建单独的“窗口”等。后者本质上`gets`是`irb`.

如果你想在线程中使用 Curses，你可以查看我[的 Ruby fork](https://github.com/silverhammermba/ruby/tree/curses/ext/curses)，它添加了这个功能（以及重构整个 curses 库）。

# c# - 如果用户使用 MVC2 遍历 Web 应用程序文件夹，则关闭或阻止页面

> ID：12189144
> 
> 赞同：0
> 
> 时间：2012-08-30T02:42:01.473
> 
> 标签：c#, url, asp.net-mvc-2, directory

我是 ASP.NET 和 MVC2 的新手，我想知道如何确定用户是否遍历了我的 Web 应用程序文件夹之一。例如，地址栏中的 URL 是

> 本地主机：一些数字/图像/其他/model1.jpg

页面显示图像。我不想显示图像，而是想关闭或阻止页面（如果可能的话）。

（如果我的术语有误，请在必要时进行编辑。）

最后，请注意，我尝试过`HttpContext.Current.Request.Url`，`Request.ServerVariables["URL"]`但都没有我想要的回报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:05:26.117

您是否正在寻找一种方法来处理对所有（或者可能只是 *.jpg）文件（包括静态文件）的请求？

要处理对代码中现有文件的请求，您需要执行以下操作：

*   在 Web.Config 中运行AllManagedModulesForAllRequests，让 IIS 将请求转发到您的代码，而不是先提供静态内容（即查看[本文](http://blogs.msdn.com/b/tmarq/archive/2010/04/01/asp-net-4-0-enables-routing-of-extensionless-urls-without-impacting-static-requests.aspx)）
    *   配置路由到现有文件的hadnel请求`RouteTable.Routes.RouteExistingFiles = false`并添加相应的IgnoreRoute - [http://forums.asp.net/t/1536510.aspx](http://forums.asp.net/t/1536510.aspx)

到服务器内容 - 从您的处理程序返回[FileResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.fileresult(v=vs.108).aspx)。通常使用 Controller 的 File 辅助方法来完成。看到这个问题：[ASP.NET MVC 控制器可以返回一个图像吗？](https://stackoverflow.com/questions/186062/can-an-asp-net-mvc-controller-return-an-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:47:40.947

没有任何直接的方法，但我使用了[处理程序/模块](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)并动态*加载*了 css/Javascript。

# php - 尝试使用 php 将动态文本区域推送到 mysql

> ID：12189145
> 
> 赞同：-1
> 
> 时间：2012-08-30T02:42:06.147
> 
> 标签：php, mysql, dynamic, textarea

我快到了，可以品尝到它，但我无法将最后一小部分交给 getpost.php。基本上我有动态文本区域，用户可以在其中添加步骤。假设他们添加了 5 个步骤，我需要通过 PHP 将这些步骤添加到 mysql 数据库中。我不确定执行此操作所需的 php。任何帮助我将不胜感激！

这是我的 post.php 步骤：

```
<head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(function(){

var counter = 2;

$("#addButton").click(function () {

if(counter>10){
        alert("Only 10 textboxes allow");
        return false;
}   

var newTextBoxDiv = $(document.createElement('div'))
     .attr("id", 'TextBoxDiv' + counter);

newTextBoxDiv.after().html('<p><label>Step #'+ counter + ' : </label><br>' +
      '<textarea rows="10" cols="150" type="text" name="textbox' + counter + 
      '" id="textbox' + counter + '" value="" >');

newTextBoxDiv.appendTo("#TextBoxesGroup");

counter++;
 });

 $("#removeButton").click(function () {
if(counter==1){
      alert("No more steps to remove");
      return false;
   }   

counter--;

    $("#TextBoxDiv" + counter).remove();

 });

 $("#getButtonValue").click(function () {

var msg = '';
for(i=1; i<counter; i++){
  msg += "\n Step #" + i + " : " + $('#textbox' + i).val();
}
      alert(msg);
 });

});
</script>

</head>

<body>
Add new step below:<p>

<form action="getpost.php" method="post">
<div id='TextBoxesGroup'>
<div id="TextBoxDiv1">
    <label>Step #1 : </label><br />
    <textarea rows="10" cols="150" type='textbox' id='textbox1'></textarea>
</div>
</div>
<input type='button' value='Add Step' id='addButton'>
<input type='button' value='Remove Step' id='removeButton'>
<input type='button' value='Get TextBox Value' id='getButtonValue'>
<input type="submit" />
</form>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:11:34.520

您可以使用 jquery 的 clone 方法来实现文本框的动态创建。尝试这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">   </script>
<script>
$(document).ready(function(){
var counterb = 1;
$("#addathletehistory").click(function(){
if(counterb>6){
        alert("Maximum 5 textarea allow");
        return false;
}   
$("#sport_history").clone().attr({"id":"sport_history"+counterb, "name":"sport_history"+counterb}).add("<br/>").appendTo("#stablehistory");
counterb++;
  });
}); 
```

此 jquery 代码通过单击“添加更多”按钮创建 5 个文本区域。请注意，每个新文本区域的 id 和名称都会随着我向其添加计数器的值而更改。希望它有所帮助。快乐编码！

# playframework - 在 PlayFramework 中修改 http 结果的正文

> ID：12189146
> 
> 赞同：4
> 
> 时间：2012-08-30T02:42:22.037
> 
> 标签：playframework, playframework-2.0

我正在使用[PlayFramework](http://www.playframework.org/)的 2.0.2 版本，并且正在尝试创建一个游戏`play.mvc.Action`来实现http 结果的**后过滤器。**

[play docs](http://www.playframework.org/documentation/2.0.2/JavaActionsComposition)中解释了使用actors进行预处理的示例。

但是我想要实现的有点不同。我需要：

*   拿一个`play.mvc.Result`
*   **提取身体**
*   对身体应用变换
*   然后创建一个新的结果。

该`Result`接口**不公开 http 正文**，即使假设您有特定的子类（例如`SimpleResult`，或`AsyncResult`），我也不知道如何提取消息正文。

我的具体用例是对结果正文进行 GZip 过滤并添加正确的“内容编码”标头。我希望能够`GZip`通过添加类似于文档中实现身份验证的方式的注释来将此过滤器应用于任何现有控制器。

下面是我正在尝试做的一个例子

```
public class Compress {
  @With(GZipResult.class)
  public @interface GZip {
  }

  public static class GZipResult extends Action<GZip> {
    @Override
    public Result call(Http.Context ctx) throws Throwable {
      Result result = delegate.call(ctx);
      if (requestSupportsGZip(ctx) {
         result = extractAndGZipResult(result); //how to extract http body?
      }
      return result;
    }
  }
} 
```

可以用作

```
@Compress.GZip
class MyController extends Controller {
   public static Result index() {
      return ok(someHtml);
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T03:09:01.517

我在修改 http 结果时遇到了类似的情况。我想分享我在 Java 中处理这个问题的方法。

通过查看Play 2.0.3的Scala源代码，我发现可以在Java`play.core.j.JavaResultExtractor`中检索响应体、cookies、headers和类的状态，并且可以编写响应体的内容。`Result``play.core.j.JavaResults`

尽管如此，我仍然不知道如何以简单的方式用修改后的主体替换当前的响应主体。也许用 Scala 实现处理这个问题会更容易，但我仍然发现 Scala 太难读了:-(

我找到的方式是看`play.mvc.Results.Status`是如何实现的，它使用`play.core.j.JavaResults`来编写内容主体。我提到的类是Java中类中生成的`ok()`、、、和其他类似方法的核心。此类的实现如下所示：（*重构 Scala 类以提高可读性）*`notFound()``forbidden()``Result``Controller`

 *```
// scala classes
import play.api.mvc.Codec;
import play.api.mvc.Content;
import play.core.j.JavaResults;
// ...    

    public static class Status implements Result {
        final private play.api.mvc.Result wrappedResult;
        // ... 

        // there are a lot of constructors for this class to reference from
        // this particular constructor is the general approach for most cases
        public Status(play.api.mvc.Results.Status status, Content content, Codec codec) {
            // ...
            wrappedResult = status.apply(
                content,
                JavaResults.writeContent(codec),
                JavaResults.contentTypeOf(content.contentType() + "; charset=" + codec.charset())
            );
        }

} 
```

如果要实现上面的代码，还需要实现`play.api.mvc.Content`接口。总而言之，按照我所说的实现你的代码看起来像这样：

```
import play.api.mvc.Codec;
import play.api.mvc.Content;
import play.core.j.JavaResultExtractor;
import play.core.j.JavaResults;
// ...

public static class GZipResult extends Action<GZip> {

    @Override
    public Result call(Http.Context ctx) throws Throwable {
        Result result = delegate.call(ctx);
        if (requestSupportsGZip(ctx)) {
            // copy parts of current response
            final int statusCode = JavaResultExtractor.getStatus(result);
            final Map<String,String> headers = JavaResultExtractor.getHeaders(result);
            final byte[] body = JavaResultExtractor.getBody(result);

            // create a gzip result
            result = new GZipResult(statusCode, new String(body), headers.get("Content-Type"));

            // add appropriate headers here
            // ...
        }

        return result;
    }
}

private static class GZipResult implements Result {
    final private play.api.mvc.Result wrappedResult;

    public GZipResult(final int StatusCode, final String content, final String contentType) {
        if(content == null) throw new NullPointerException("null content");

        // i guess this is the good place in transforming the content body
        String gzippedContent = someMethodToGzipContent(content);

        this.wrappedResult = JavaResults.Status(statusCode).apply(
                // implement the play.api.mvc.Content interface
                new Content() {
                    @Override public String body() { return gzippedContent; }
                    @Override public String contentType() { return contentType; }
                },
                JavaResults.writeContent(Codec.utf_8),
                JavaResults.contentTypeOf(contentType))
            );
    }

    // ...
} 
```

通过上面的实现，我可以修改 http 结果。我希望这可以为您的特定用例提供帮助。

干杯!

## ****更新****

**上面的代码可以解决大多数修改 http 结果的用例。您的特殊情况，即 gzipping 响应，需要另一种方法，因为 gzipped 正文`byte[]`不在`String`. 该类`play.mvc.Results.Status`还提供处理方法`byte[]`。实现如下所示：**

 **```
// scala classes
import play.core.j.JavaResults;
// ...    

    public static class Status implements Result {
        final private play.api.mvc.Result wrappedResult;
        // ... 

        public Status(play.api.mvc.Results.Status status, byte[] content) {
            // ...
            wrappedResult = status.apply(
                content,
                JavaResults.writeBytes(),
                JavaResults.contentTypeOfBytes()
            );
        }

} 
```

您可以在我更新之前根据我的实现找出如何对您的代码执行此操作。请注意，您不再需要实现`play.api.mvc.Content`并确保在响应中返回适当的内容类型。

快乐编码:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:37:48.020

AFAIK，经过一番挖掘，您可以使用`result.getWrappedResult()`; 它返回一个`play.api.mvc.Result`可以（通常）转换为`play.api.mvc.SimpleResult`包含`body()`方法的a：

```
play.api.mvc.SimpleResult wrappedResult = (play.api.mvc.SimpleResult) result.getWrappedResult();
Enumerator body = wrappedResult.body(); 
```

然后，我建议您阅读[Enumerator 文档](http://www.playframework.org/documentation/2.0.3/Enumerators)；目前，我还没有弄清楚这些东西是如何工作的:-)。

希望这对您有所帮助...***

# php - 我用 php 计算行数的 sql 最佳实践

> ID：12189147
> 
> 赞同：0
> 
> 时间：2012-08-30T02:42:26.793
> 
> 标签：php, mysql, count

1）计数记录：

```
//Connect to mysql server
$link = mysql_connect(HOST, USER, PASSWORD);
if(!$link) {
    die('Could not connect to server: ' . mysql_error());
}

//Select database
$db = mysql_select_db(DATABASE);
if(!$db) {
    die("cannot use the database");
}
mysql_set_charset('charset=utf8',$link); 

$query="SELECT `id`FROM `table` WHERE `abc`='123'";
$result=mysql_query($query);               
$count= mysql_num_rows($result); 
```

我正在使用它来计算记录。该表有 500K 记录。计算记录的最佳做法是什么？

2）我是初学者@mysql和php。我错过了上述脚本中的某些内容吗？我想我最后需要关闭mysql连接！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:48:33.333

当你只需要计算记录时，你应该使用`COUNT()`mysql的功能，而不是加载所有记录。

```
$query="SELECT COUNT(*) AS num FROM `table` WHERE `abc`='123'"; 
```

第二，使用`PDO`代替`mysql_`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T02:48:03.427

为什么不让数据库来做 - 一个简单的怎么样

```
SELECT COUNT(*) FROM table WHERE abc=123; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T02:49:09.557

mysql有一个计数功能：

[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

所以你可以使用：

```
SELECT COUNT(*) FROM table WHERE abc=123 
```

或任何条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T02:51:05.263

```
$query="SELECT COUNT(id) FROM `table` WHERE `abc`='123'";
$result = mysql_query($query);
$count = mysql_fetch_row($result); 
```

这将工作得又快又轻。此外，正如`Jack`上面评论中所说，您应该使用 MySQLi 或 PDO，因为 PHP 已弃用 MySQL 插件。

# haskell - 声明性语言

> ID：12189151
> 
> 赞同：-5
> 
> 时间：2012-08-30T02:43:58.080
> 
> 标签：haskell, imperative-programming, declarative-programming, imperative-languages

我正在阅读一篇关于[声明式编程语言](http://en.wikipedia.org/wiki/Declarative_programming)的文章。

如果我不了解这种类型/范式的编程语言的质量并且它与命令式语言形成对比，我是否应该只阅读这种类型的编程语言（如 Haskell）的编程，然后再阅读那篇文章？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T09:19:40.603

声明式范式的要点是懒惰。我们声明式程序员喜欢让编译器完成所有工作。我们尽可能多地不指定我们想要使用的算法，而只指定我们想要的结果的定义。

例如，如果在命令式设置中您想要计算直到 的整数之和`n`，您可以编写（在 C 中）：

```
int f(int n) {
    int result = 0, i = 1;
    for(;i <= n; i ++)
        result += i;
    return result;
} 
```

在声明性设置中，您只需声明这个总和是多少（在 Haskell 中）：

```
f 0 = 0
f n = n + f (n - 1) 
```

这不是一个算法，它只是一个定义。但是 Haskell 编译器足够聪明，无论如何都能得到结果。

当您切换到 Prolog 时，它会更加明显，下面是规范示例：

1.  我们声明了不同人之间的一些关系：

    ```
    father(luke, anakin).
    father(anakin, a_slave_on_tattouin).
    father(a_slave_on_tattouin, someone).
    father(someone, adam). 
    ```

2.  然后我们声明某人的祖先是他的父亲或他父亲的祖先：

    ```
    ancestor(Young, Old) :-
        father(Young, Old).

    ancestor(Young, VeryOld) :-
        father(Young, Old),
        ancestor(Old, VeryOld). 
    ```

就是这样，Prolog 可以释放魔法并回答以下问题：

```
?- ancestor(luke, X).
X = anakin ;
X = a_slave_on_tattouin ;
X = someone ;
X = adam ;
false. 
```

对阅读上述内容有一些帮助：`Head :- Body`表示`Head` **if** `Body`。那么上面，

```
ancestor(Young, VeryOld) :-
    father(Young, Old),
    ancestor(Old, VeryOld). 
```

如果是的父亲并且是的祖先，则表示`VeryOld`是的祖先。`Young``Old``Young``VeryOld``Old`

和`;`意味着**或**。所以这里 Prolog 告诉我们卢克有 4 个祖先，`anakin`，`a_slave_on_tattouin`，等等。

正如你所看到的，我们没有指定任何关于算法的内容，但 Prolog 仍然可以做一些很棒的事情，比如为我们提供`luke`'s 家谱的所有细节。这就是声明式编程的力量：您指定数据，这就是您所关心的，剩下的就是处理编译器的聪明人的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T12:06:16.073

可能需要一些时间来了解 Haskell 和 Prolog 以及其他任何东西，但这是值得的。这是一个类比，可以让您开始使用声明式与命令式。

假设您想找出当 x 为 5.279 时 5sin(7x+20)+cos(x) 是多少，而您所拥有的只是您的计算器。如果它是一个旧的计算器，你必须告诉它如何做以及以什么顺序。如果我们使用`MC`for clear memory to 0 和`MR`for recall memory 并将`M+`当前数字添加到内存中的数字，您实际输入的是

```
MC       -- clear the memory
5.279    -- take the number 5.279
*7=      -- multiply it by seven
+20=     -- add twenty
sin=     -- find sin of that
*5=      -- times by five
M+       -- store that in the memory
5.279    -- take the number 5.279
cos      -- find cos of it
M+       -- add that to what you had in the memory
MR       -- get the total back out of memory onto the screen 
```

您正在逐步告诉计算器要进行哪些计算，因为它没有被编程来理解数学，只是算术。你计算的结构已经被转化为步骤而变得模糊了。有些人喜欢这种循序渐进的方式，觉得它非常简单，无法理解为什么其他人会被其他方式打扰。有用。你不必相信计算器。

现在**任何**编程语言和任何*现代*计算器都可以让你输入

```
5*sin(7*5.279+20)+cos(5.279) 
```

这更清晰，在过去十年中购买的一些计算器甚至可以让你做

```
5.279 -> x
5sin(7x+20)+cos(x) 
```

现代计算器让您根据自己的理解来表达问题，而不是将其分解为计算器的步骤。有些人喜欢这种随心所欲的做事方式，觉得它非常简单，不明白为什么其他人会被其他方式打扰。很明显。您不必向计算器解释。

尽管这`5.279 -> x; 5sin(7x+20)+cos(x)`几乎正是您在命令式*编程语言*中解决此特定问题的方式，但我们刚才正在讨论计算器的样式，而使用旧计算器的第一种方法*更加*命令式（逐步) 风格，而新计算器的这种风格更具声明性（只是说出你的意思）。

让我们改变上下文，而不是使用计算器来计算一个数字，我们使用一些感觉技巧来绘制一个简单的废话图片。假设我们在测量时总是从左上角开始。命令式（逐步）风格将是

```
take a piece of paper 7 by 10
pick up a red pen
put it at the point (3,4)   
draw a 2x4 rectangle here
colour it in
pick up a black pen
put it at the point (4,4)
draw a circle here radius 3
colour it in 
```

而声明式的just-say-what-you-mean风格将是

```
on a piece of paper 7 by 10
red 2x4 rectangle at (3,4)
underneath
black circle radius 3 at (4,4) 
```

这些不是命令式或声明式代码的示例，而是试图向您展示思维方式和编程风格的差异。在声明式编程中，您说出您的意思，然后使用一个*非常*聪明的编译器将您的声明转换为最佳指令序列。因为您已经说出了您的意思，所以它可以从根本上将实现这一目标的代码更改为最有效的形式，同时保留您的意思。你信任编译器。

在命令式编程中，你一步一步说出你想要做什么，*确保你自己*使用了你能想到的最有效的方法，然后编译器使用一些技巧来消除不必要的缓慢并转换为更低的级指令序列。因为您已经指定了执行操作的顺序，所以它可以进行多少优化是有限度的，但是您相信程序员已经做出了最佳选择。

（我谈到信任是因为有人读过这份信任的草稿很重要——她解释说她以命令的方式使用计算器，因为如果她以声明的方式进行计算，她并不真正信任它。我认为这就是程序员也一样。许多程序员对编译器的信任度不够，无法声明性——他们想要控制，并喜欢自己优化代码。）

听起来，一直使用声明式风格会容易得多，但声明式语言通常有一个陡峭的学习曲线，而且大多数人更喜欢命令式。传统上，速度存在*巨大*差异（命令式的开销更少，因为它更直接地像计算机工作），但一些更现代的声明性代码编译器似乎在很多时候都在速度表的前几名 - 编译的诗句解释比命令式和声明式的区别要大得多，这就是为什么 python 等即使它们是命令式的也经常变慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T09:25:17.977

要回答你的问题*，我应该只是阅读*我建议答案是否定的，你应该开始编程。我真的不相信你可以很好地理解编程语言的实用性和适用性，或者它们的各种分类，而不用它们编写程序。阅读它们是对编程的补充，而不是替代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T03:22:52.890

通常被指出作为声明式编程示例的语言是[Prolog](https://en.wikipedia.org/wiki/Prolog)（它实际上仍在我的“学习”列表中；[SWI-Prolog](http://www.swi-prolog.org/)在Squeeze[的 Debian 存储库](http://packages.debian.org/stable/swi-prolog)中可用）。

当然，尝试它是最好的，但如果您只是想体验一下范式，那么仔细查看一些[代码示例](http://rosettacode.org/wiki/Category%3aProlog)可能就足够了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-30T04:52:41.620

声明式编程主要是关于发明领域特定语言 (DSL)，然后使用这些子语言进行编程。 [Haskell](http://www.haskell.org/)是该特定风格的一个非常好的选择。在 Haskell 中，几乎所有特定领域的语言都嵌入在宿主语言中。然后将它们称为嵌入式 DSL (EDSL)。换句话说，您不需要编写解析器，而是受益于 Haskell 优雅的轻量级语法。让我举几个例子。

假设您要对图像/视频处理进行编码。您注意到几乎所有过滤器都有一些共同点：它们根据周围环境更新点。有一个抽象的概念，称为*comonads*用于该特定目的。您不表达状态更改，而是对与过滤器关联的转换函数进行编码。换句话说，您对数据相关性和依赖关系进行编码。请注意模糊滤镜令人难以置信的简洁性以及它适用于图片*和*视频（任何 a 的任何内容`Filterable`）的事实：

```
blur :: (Filterable img) => Radius -> img -> img
blur radius = extend (average . surroundingPoints radius) 
```

假设您要对图形用户界面 (GUI) 进行编码。您注意到几乎所有的 GUI 都有一些共同点：GUI 的各个元素基本上是随时间变化的字段，它们之间存在相关性。有一个抽象概念称为*函数式反应式编程*（FRP）用于该特定目的。您不处理事件，而只是描述元素之间的数据关系：

```
text1 = textField "text1"
text2 = textField "text2"
sum   = fmap show (text1 + text2) <|> "Please enter numbers"

dialog =
    label "First number:" ~|~ text1
        ~---~
    label "Second number:" ~|~ text2
        ~---~
    label "Sum:" ~|~ label sum 
```

构建对话框所需的一切都包含在此描述中，包括用户未输入数字时发生的情况。这既不是特殊语言也不是伪代码。这是实际的 Haskell 代码（使用[Netwire](http://www.haskell.org/haskellwiki/Netwire)库）！

# php - 识别选中的复选框序列然后保存到mysql数据库

> ID：12189152
> 
> 赞同：0
> 
> 时间：2012-08-30T02:44:04.110
> 
> 标签：php, javascript, mysql, checkbox, sequence

我在这里有一个代码，其中我有一个通过查询填充了 mysql 数据的复选框数组。我可以成功地将选中复选框的值提交到数据库中的表中。但我想要做的是根据用户选中复选框的顺序保存它。有人告诉我，我可以通过 javascript 实现这一点，但不幸的是，我根本不熟悉 javascript。如果可能，您能否提供仅通过 PHP 实现此目的的步骤？如果没有，请指导我如何使用 javascript 来实现这一点，因为我是新手。这是我的示例代码，让您想象我正在尝试做什么..

```
<?php
require("aacfs.php");
echo"<div align= center >
  <table width=300 border= 1 align= right><tr><th align=center bgcolor=silver><font face=consolas>Choose Itinerary</font></th></tr>
    <tr>
      <td></br>
      <form method=post>"; 

$result=mysql_query(" select * from itinerary group by location");
    $y=mysql_affected_rows();
    for($i=0;$i<$y;$i++)
    {$row=mysql_fetch_array($result);
        $pr=$row['icode'];
        $n=$row['location'];
        $l=$row['btime'];
echo"<table border=1 align=center width=250>
          <tr><td width=15><input name=prod[] type=checkbox value='$pr'></td><td>$n</td></tr>
          </table>";
        $t=$_POST[prod];

        }
echo"</td></tr></table>";

echo"      

    <table width= 664 border= 1  align= left >
    <tr><td height= 282 ><p align= center  class= style77>
<p align= right ><h4>$d</h4></p>
<p align= center ><font face=consolas><b>Itinerary List</b></font></p>
<p align=center><font face=consolas>To change your itinerary list, choose again.</font></p>

<br>
  <center><input name=add  type= submit  value='Add to Itinerary List'></center>
<br>  
<table width=654  border= 1>
  <tr bgcolor = silver align=center>
    <td>Itinerary</td>
    <td>Block Time</td>

 </tr></form>";

 if(isset($_POST['add']))
{           
if(isset($_POST[prod]))
 {  foreach($t as $k)
    {$result=mysql_query("select * from itinerary where icode='$k'");
    $y=mysql_affected_rows();

for($x=0;$x<$y;$x++)
{$row=mysql_fetch_array($result);
        $r=array($row['icode']);
        $n=$row['location'];
        $p=$row['btime'];   

    echo"<form method=post><tr>
<td>$n</td>
<td>$p</td>
 </tr>";

    $a=$_POST[pro];
    $stat1='Not Submitted';

foreach($r as $a=>$l)
{

$kdot=mysql_query("select max(reservno) as 'maxr' from reservation") or die(mysql_error());
$row2=mysql_fetch_array($kdot);
$fi=$row2['maxr'];
mysql_query("insert into location_list(reservno, icode, location, status) values('$fi', '$l', '$n', '$stat1')") or die(mysql_error());
}
}}}

} 
```

澄清是最受欢迎的。希望你能帮我！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:15:39.800

您使用您的复选框创建一个隐藏的输入，然后当您提交表单时，您将按`$_POST['sequence']`顺序获得所有点击：

```
​&lt;input id="sequence" name="sequence" />
<input type="checkbox" class="check" name="checkbox1" value="checkbox1"​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&gt;
<input type="checkbox" class="check" name="checkbox2" value="checkbox2">
<input type="checkbox" class="check" name="checkbox3" value="checkbox3">
<input type="checkbox" class="check" name="checkbox4" value="checkbox4"> 
```

`check`然后在本例中将每个复选框的点击与类绑定

```
var windowOnload=window.onload||function(){};window.onload=function(){windowOnload();};
window.onload = function(){

    var all = document.getElementsByTagName("input");
    for (var i=0;i<all.length;i++) {
        if(all[i].className == 'check'){
            all[i].onclick = inputClickHandler;
        }             
    }
};

function inputClickHandler(e){
    e = e||window.event;
    var inputElm = e.target||e.srcElement;
    var text = inputElm.value;
    var target = document.getElementById('sequence');
    if(inputElm.checked == true){
        if(target.value == ''){
            target.value = text;
        } else {
            target.value = target.value+','+text;
        }
    } else {
         var textToSearch = text+',';
         var textAlternative = ','+text;
         var regex = new RegExp( '\\b' + textToSearch + '\\b' );
         var regex2 = new RegExp( '\\b' + textAlternative + '\\b' );
         if(regex.test( target.value )){
             target.value = target.value.replace(textToSearch, '');
         } else if(regex2.test( target.value )){
             target.value = target.value.replace(textAlternative, '');
         } else {
             target.value = target.value.replace(text, '');
         }
    }
}​ 
```

您也可以使用[jQuery](http://www.jquery.com)来实现这一点（它更清洁和可靠）：

```
$(window).load(function(){
    $('.check').on('click', function(){
        if($(this).attr('checked')){
            if($('#sequence').val() == ''){
                $('#sequence').val($(this).val());
            } else {
                $('#sequence').val($('#sequence').val()+','+$(this).val());
            }
        } else {
             var targetValue = $('#sequence').val();
             var textToSearch = $(this).val()+',';
             var textAlternative = ','+$(this).val();
             var regex = new RegExp( '\\b' + textToSearch + '\\b' );
             var regex2 = new RegExp( '\\b' + textAlternative + '\\b' );
             if(regex.test( targetValue )){
                 $('#sequence').val(targetValue.replace(textToSearch, ''));
             } else if(regex2.test( targetValue )){
                 $('#sequence').val(targetValue.replace(textAlternative, ''));
             } else {
                 $('#sequence').val(targetValue.replace($(this).val(), ''));
             }
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:46:00.917

通过此代码检测到选中的复选框序列：

```
<script type="text/javascript"> 
<!--

$(document).ready(function(){

    var array = [];

    $("input[type=button]").click(function(){
    for (var i = 0; i < array.length; i++){  
    if (array[i] == $(this).attr('value')){  
    array.splice(i, 1);  
    }  
    }  
    alert(array.length);
    });

    $('input[type="checkbox"]').click(function(){

    if ($(this).attr('checked')){
    // Add the new element if checked:  
    array.push($(this).attr('value'));
    //alert(array2.push($(this).attr('name')));
    }

    else{ 
    // Remove the element if unchecked:  
    for (var i = 0; i < array.length; i++){  
    if (array[i] == $(this).attr('value')){  
    array.splice(i, 1);
    }
    }
    }

        $("#result").show(function(){
        $(this).val("");
        for (var i = 0; i < array.length; i++){
    $(this).val($(this).val() + " " + array[i]+ "\n");
        }
        });

    });

}); 
//--> 
</script> 
```

我将它绑定在我的复选框中。

```
$result=mysql_query(" select * from itinerary group by location");
    $y=mysql_affected_rows();
    for($i=0;$i<$y;$i++)
    {$row=mysql_fetch_array($result);
        $pr=$row['icode'];
        $n=$row['location'];
        $l=$row['btime'];
echo"<table border=1 align=center width=250>
          <tr><td width=15>
          <input type='checkbox' value='$n -> $l' id='cb1'>
</td><td>$n</td><td width=4>$l</td></tr>
          </table>"; 
```

然后将其输出到文本区域。

```
<textarea name=resulta id='result' style='height:200px; width:350px' disabled='disabled'></textarea> 
```

我可以通过这个将它保存在我的数据库中：

```
echo "<form><center><input type=submit name='pindot' value='Gora Men~'></center></form>";
$val=$_POST['resulta'];
if (isset($_POST['pindot']))
{
$lines = explode("\n", $val);

foreach ($lines as $line) {
    // $line here is a string
    // build a query based on it and execute it
    mysql_query("insert into postflight (sample_lang) values ('$line')") or die(mysql_error());

};
} 
```

感谢大家的帮助！上帝保佑！

# c - 线性探测哈希表插入

> ID：12189153
> 
> 赞同：0
> 
> 时间：2012-08-30T02:44:07.627
> 
> 标签：c, hashtable

==3139== 条件跳转或移动取决于未初始化的值

==3139== 在 0x4A0673F: strcpy (mc_replace_strmem.c:311)

==3139== by 0x400ADB: htable_insert (hashtable.c:56)

==3139== 由 0x400F25: 主要 (mylib.c:11)

大家好，我仍在尝试插入哈希表。我不能让它工作，我已经包含了我的打印方法，只是因为我认为这可能是一个问题。我正在尝试进行线性探测。当我运行 valgrind 时，我收到了这个错误，我认为这与复制到我的字符串有关，但我不确定这是什么意思？我现在真的不知道如何让这个插入工作，一些输入会很棒..
hashtable insert 中的第 56 行是 strcpy(str, key)

```
int htable_insert(htable h, char *str) {
   int i;
   /*convert string to integer*/
   unsigned int index = htable_word_to_int(str);
   /*calculate index to insert into hash table*/
   int remainder = index%h->capacity;
   /*once calculated position in the hash table, 3 possibilities occur*/
   /*no string in this positon, copy string to that position, increment number of keys, return 1*/
   if (h->key[remainder] == NULL) {
      char *key = emalloc(strlen(str) + 1);
      strcpy(str, key);
      h->key[remainder] = key;
      h->frequencies[remainder] = 1;
      h->num_keys++;
      return 1;
   }
   /*the exact same string is at the position, increment frequency at that position, return frequency*/
   if (strcmp(str, h->key[remainder]) == 0) {
      h->frequencies[remainder]++;
      return h->frequencies[remainder];
   }/*a string is at that position, but it isnt the rightone, keep moving along the array
      until you find either an open space or the string you are looking for*/
   if (h->key[remainder] != NULL && strcmp(str, h->key[remainder]) != 0) {
      /*you may need to wrap back around to the beginning of the table, so each time you add
        to the position you should also mod by the table capacity.*/
      for (i = 0; i <= h->capacity; i++) {
         /*no string in this positon, copy string to that position, increment number of keys*/
         if (h->key[remainder] == NULL) {
            char *key = emalloc(strlen(str) + 1);
            strcpy(str, key);
            h->key[remainder] = key;
            h->frequencies[remainder] = 1;
            h->num_keys++;
         }
         /*if you find the string you were looking for, increment the frequecny at the position
           and return the frequency*/
         if (strcmp(str, h->key[remainder]) == 0) {
            h->frequencies[remainder]++;
            return h->frequencies[remainder];
         }
         if (h->key[remainder] != NULL && h->capacity ==  i) {
            i = 0;
         }
      }   
   }
   /*if you have kept looking for an open space but there isnt one, the hash table must fu*/
   return 0;
}

void htable_print(htable h, FILE *stream) {
   int i;
   for(i = 0; i < h->capacity; i++) {
      if(h->key[i] != NULL) {
         fprintf(stream, "%d%s\n", h->frequencies[i], h->key[i]);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:17:59.680

您的 strcpy 应该是 strcpy(key, str) 而不是相反。（您可以只使用 strdup，顺便说一句，并保存 malloc+strcpy）。

另外，在： if (h->key[remainder] != NULL && strcmp(str, h->key[remainder]) != 0) {

条件 "h->key[remainder] != NULL" 是多余的：您已经在上面检查过。

最后，在你的循环中（遍历桶），它看起来像：

1.  循环条件应该是 <，而不是 <=
2.  您应该在某处增加余数，或使用“remainder+i”和 h->keys 的索引
3.  代替 "capacity==i" --> "i=0"，只需使用 "(remainder+i)%capacity" 作为 h->keys 的索引

.. 最后最后——初始部分，即在循环之外的部分，可能在循环中，从而节省了代码。

# iphone - iphone呼叫转移信息

> ID：12189154
> 
> 赞同：1
> 
> 时间：2012-08-30T02:44:09.077
> 
> 标签：iphone, call, forwarding

有什么方法可以获取 iphone 的呼叫转移信息的状态吗？我只是在iOS5.0中找到，有一种方法可以打开“prefs:root=Phone”，但它会被appStore拒绝。所以我想知道还有其他方法可以得到这个信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:16:20.777

我也很乐意得到这些信息。

# android - 如何在安卓 4.0+ 上截屏

> ID：12189155
> 
> 赞同：0
> 
> 时间：2012-08-30T02:44:13.850
> 
> 标签：android, screenshot, android-4.0-ice-cream-sandwich

我听说Android 4.0+ 支持用户在没有root 的情况下截屏。所以，我认为它必须提供一些 API 来帮助开发人员在他们的应用程序中构建这个功能，对吧？如果有，你能告诉我它们是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:52:09.563

应用程序没有用于截屏的 API。截图被放置到一个标准文件夹中，但是有些设备使用不同的文件夹，并且没有 API 来获取正确的文件夹名称。用户可以通过在大多数手机上按下音量和电源来截取屏幕截图。在某些设备上，它是通过 power+home 完成的，在某些设备上是通过手动滑动完成的。没有 API 可以告诉您如何在当前设备上截屏。

# javascript - 访问 JSON 中的数组

> ID：12189158
> 
> 赞同：0
> 
> 时间：2012-08-30T02:44:29.420
> 
> 标签：javascript, arrays, json

我觉得这个问题必须被问到，但对于我的生活，我找不到它。我有一个按播放数据进行足球比赛的对象数组。数组实际上是对象之一。每个对象都封装了足球比赛中任何给定比赛期间发生的所有数据。这是我的 JSON 对象：

```
    var playToAdd = {
    “玩”：
    [
     {“四分之一”：””}，
     {“驾驶”：””}，
     {“向下”：””}，
     {"fieldPos":""},
     {"yardsToGo":""},
     {"yardsGained":""},
     {"playType":""},
     {"playResult":""},
     {"ballSide":""},
     {"oForm":""},
     {"dForm":""},
     {"scoreFSU":""},
     {"scoreOp":""},
     {"playSide":""},
     {"addToDB":""},
     {“玩家”：
      [
       {“姓名”：””}，
       {“位置”：””}
      ]
     }
    ]
   };

```

这是我尝试向对象添加数据的地方

```
for(l=0;l<plays.length;l++)
   {
    playsToAdd.play[l].quarter=plays[l].quarter;
    playsToAdd.play[l].drive=plays[l].drive;
    playsToAdd.play[l].down=plays[l].down;
    playsToAdd.play[l].fieldPos=plays[l].fieldPos;
    playsToAdd.play[l].yardsToGo=plays[l].yardsToGo;
    playsToAdd.play[l].yardsGained=plays[l].yardsGained;
    playsToAdd.play[l].playType=plays[l].playType;
    playsToAdd.play[l].playResult=plays[l].playResult;
    playsToAdd.play[l].ballSide=plays[l].ballSide;
    playsToAdd.play[l].oForm=plays[l].oForm;
    playsToAdd.play[l].dForm=plays[l].dForm;
    playsToAdd.play[l].scoreFSU=plays[l].scoreFSU;
    playsToAdd.play[l].scoreOp=plays[l].scoreOp;
    playsToAdd.play[l].playSide=plays[l].playSide;
    playsToAdd.play[l].addToDB=plays[l].addToDB;
    for(m=0;m<plays[l].players.length;m++)
    {
     //playsToAdd[l].players[m].position=plays[l].players[m][1];
     //playsToAdd[l].players[m].name=plays[l].players[m][0];
     playsToAdd.play[l].players[m].name="test";
    }
   } 
```

一切似乎都很好，直到我进入球员部分。我实际上注释掉了我的对象以确保这不是问题。我收到一个`Unable to get value of the property '0': object is null or undefined`关于`playsToAdd.play[l].players[m].name="test";`. 我环顾了这个网站和其他网站，但没有发现任何与我的问题有关的东西。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:50:15.850

问题是，现在，你`playsToAdd`是一个对象数组，每个对象包含一个属性，即季度、驱动器等。

相反，它应该是一个对象数组，其中每个对象包含一个游戏的所有属性，即季度、驱动器等。

您的 JSON 结构应如下所示：

```
var playsToAdd = {
    "play":
    [
     {
       "quarter":"",
       "drive":"",
       "down":"",
       "fieldPos":"",
       "yardsToGo":"",
       "yardsGained":"",
       "playType":"",
       "playResult":"",
       "ballSide":"",
       "oForm":"",
       "dForm":"",
       "scoreFSU":"",
       "scoreOp":"",
       "playSide":"",
       "addToDB":"",
       "players":
      [
       {"name":"", "position":""},
       {"name":"", "position":""},
       ...
      ]
     }
    ]
   }; 
```

这样，您可以访问/设置您的数据，例如：

```
playsToAdd.play[x].quarter = 'xyz'; 
```

和

```
playsToAdd.play[x].players[y].name = 'xyz'; 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:49:04.373

当你运行那个循环时，你还没有定义`playsToAdd.play[l].players`。

如果您尝试创建对象的副本，则可以复制它：

```
playsToAdd = plays.slice(0); 
```

`plays`这将创建数组的精确副本。也就是说，我不确定嵌套数组是否被复制或引用。如果您对此有任何问题，请告诉我，我将能够提供进一步的帮助。

# barcode-scanner - 可编程条码扫描器

> ID：12189161
> 
> 赞同：4
> 
> 时间：2012-08-30T02:44:42.940
> 
> 标签：barcode-scanner

是否有可编程的条形码阅读器，我可以将程序放入其中。使用该程序，我可以告诉读者什么是有效代码。所以阅读器将拒绝阅读无效代码。

或者，使用该程序，我可以加密它读取的代码。

而且，我可以用Java来制作程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:05:08.953

有各种类型的条形码阅读器，从手持式扫描仪到台面式扫描仪，再到移动计算机的扫描仪附件。大多数使用 USB 连接，但有些使用串行端口连接。有些连接到便携式设备，例如平板电脑，有些则插入手持式扫描仪。有些手持式条形码阅读器也可以用作站立式扫描仪，无需手持即可站立在柜台上。

我见过的两种主要类型的条码是具有不同宽度垂直线的[标准条码](http://en.wikipedia.org/wiki/Barcode)（另请参见[GS1.org 的条码类型](http://www.gs1.org/barcodes/technical/bar_code_types)）和[Denso Wave 的 QR 码](http://en.wikipedia.org/wiki/QR_code)。商业销售点扫描仪，例如台面式或手持式扫描仪，专为标准条形码而设计，其中一些还提供读取 QR 码的能力。然而，并非所有手持式扫描仪都可以读取 QR 码。

通常，条形码阅读器会扫描条形码并生成文本字符串，然后由其他设备（例如销售点终端）处理。我还没有看到允许 Java 程序或类似的程序更改的条形码扫描仪。但是，有些自助服务终端类型或带有内置扫描仪的小型设备是可编程的。 [请参阅 Symbol 中的此选择](http://www.motorola.com/Business/US-EN/Product+Lines/Symbol/Symbol+Bar+Code+Scanners)。

带有 USB 连接的条形码阅读器通常有两种配置驱动程序的方法，即作为 HID 类型的 USB 设备或作为楔形键盘类型的设备。楔形键盘类型的设备通常更易于交互，因为它与从键盘输入中读取文本相同。当使用楔形键盘类型的界面时，您通常会对条形码扫描仪进行编程以生成一个保护字符，以便当该字符进入您的应用程序时，您知道它是由条形码扫描仪生成的文本，而不是来自某人键入的文本。

某些类型的扫描仪将具有可与 OPOS 控制对象一起使用的[零售 POS OPOS 服务对象的 OLE 。](http://en.wikipedia.org/wiki/OPOS)这种方法为您的软件提供了设备独立性，因为您将编写应用程序以使用 OPOS 控制对象接口，该接口解决了许多接口问题，例如使用 HID USB 接口与设备通信。然而，OPOS 是一种 COM 类型的接口，使用 Java 编程语言可能会比较困难。搜索有关[UnifiedPOS](http://en.wikipedia.org/wiki/UnifiedPOS)的信息，以找到符合最新标准的方法。

手持式扫描仪将具有开箱即用的出厂设置，这些设置可能不适合您的应用。我使用的手持式扫描仪可以通过程序进行编程，并通过以特定顺序扫描特殊扫描代码的程序来更改它们的设置。通常，特定扫描仪的用户手册会有一个或两个附录，其中包含有关可以更改哪些设置、用于进行更改的程序或步骤以及为程序步骤扫描条形码的文档。您可能需要在制造商的网站上搜索相应的手册。

例如，[摩托罗拉 LS2208 产品参考指南](https://atgsupportcentral.motorolasolutions.com/content/emb/docs/manuals/MN000754A02a.pdf)包含有关为各种环境和扫描仪应用设置手持式扫描仪的各个部分。以下来自指南页面的屏幕截图显示了用于为 USB 接口设置设备的条形码。 [![在此处输入图像描述](../Images/5c6df48695c3df64e9158f7eeb48e934.png)](https://i.stack.imgur.com/R7XyZ.png)

另一种选择是在手机上安装一个使用手机摄像头作为条形码扫描仪的应用程序。然而，大多数相机似乎不适用于标准条形码。

大多数用于零售系统的扫描仪都相当复杂，其中激光用于实际扫描。我已经使用了几种不同类型的销售点应用程序，它们都相当容易使用。您可以通过使用文档中的一组条形码输入命令来更改设置。这些设置用于条码符号、前缀字符、后缀字符（前缀和后缀字符用于楔形键盘类型的界面）。

请参阅[有关使用相机获取标准条码的论坛讨论](http://social.msdn.microsoft.com/Forums/zh/vssmartdevicesvbcs/thread/445c85d7-2f92-4dc8-b2f0-38edccbf1096)。

另请参阅[有关 Android 条码扫描的此网页](http://www.serialio.com/products/scanner/mobile/Android/Android_Scan.php)。

# postgresql - 使用带有 pgbouncer 的事务池有什么好处？

> ID：12189162
> 
> 赞同：34
> 
> 时间：2012-08-30T02:44:45.763
> 
> 标签：postgresql, pgbouncer

我无法很好地总结使用 pgbouncer 进行事务池与会话池的优缺点。

这是否意味着事务繁重的工作负载以某种方式更好地负载平衡？是为了防止从 pgbouncer 连接到数据库需要尽可能多的连接吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-30T04:38:12.183

如果您有持有空闲会话的应用程序，事务级池将有所帮助。PgBouncer 不需要保持会话打开和空闲，它只是在新事务开始时抓取一个。那些空闲会话只花费你一个 pgbouncer 连接，而不是一个真正的空闲 Pg 会话，后端坐在那里浪费内存和同步开销什么都不做。

您想要会话池而不是事务池的主要原因是，如果您想使用命名的准备好的语句、咨询锁、侦听/通知或其他在会话级别而不是事务级别上运行的功能。

# winapi - 从 BMP 文件创建带有 Alpha 通道的 HBITMAP

> ID：12189163
> 
> 赞同：2
> 
> 时间：2012-08-30T02:44:48.400
> 
> 标签：winapi, gdi

我从一张PNG图像开始。然后，我将 Alpha 通道拆分为灰度 BMP 文件，并将 PNG 转换为 BMP。我想加载两个 BMP 文件并将它们合并以提供带有 alpha 通道的 HBITMAP：

```
HBITMAP splash = LoadBitmap(hInstance, MAKEINTRESOURCE(IDB_SPLASH));
HBITMAP splashMask = LoadBitmap(hInstance, MAKEINTRESOURCE(IDB_SPLASH_MASK));
HBITMAP splashAlpha = .... 
```

我找到了一个直接从 PNG 创建 HBITMAP的[示例。](http://code.logos.com/blog/2008/09/displaying_a_splash_screen_with_c_part_i.html)它使用 IStream 和 COM 进行导入。我宁愿不包含更多依赖项。当然有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:53:14.967

如果您正在寻找最少的代码，您应该考虑将您的 PNG 转换为 32 位位图并使用[AlphaBlend API](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183351%28v=vs.85%29.aspx "AlphaBlend 函数")绘制它们。

```
BLENDFUNCTION fn;
ZeroMemory(&fn, sizeof(fn));
fn.BlendOp = AC_SRC_OVER;
fn.BlendFlags = 0;
fn.SourceConstantAlpha = 255;
fn.AlphaFormat = AC_SRC_ALPHA;
AlphaBlend(dstDC, dstX, dstY, dstW, dstH, hdcSrc, srcX, srcY, srcW, srcH, fn); 
```

问题是 hdcSrc 应该引用 32 位 BGRA 图像，其中 Alpha 通道预乘到 BGR 通道中，即

```
B = B * A / 255;
G = G * A / 255;
R = R * A / 255; 
```

# mysql - 计算日期间隔mysql之间的总和

> ID：12189168
> 
> 赞同：3
> 
> 时间：2012-08-30T02:45:07.013
> 
> 标签：mysql

我试图找到两个日期之间的值的总和，在这种情况下，我总是希望保持一个日期不变。示例查找日期 4 月到 7 月之间的值，保持 4 月不变，因此另一种情况可能是日期 4 月到 5 月之间的值的总和，再次保持 4 月不变。我一直在处理几个查询很长一段时间但没有成功这样做你能看看下面的SQLFiddle[并](http://sqlfiddle.com/#!2/ad042/8)帮助我吗我真的很感激帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T02:56:58.880

为什么不添加另一个`CASE`语句：

```
sum(case when pay_date between '2012-04-01' and '2012-06-01'
        then amount end) range_amount 
```

所以你的查询是：

```
SELECT p.name,
       v.v_name,
       SUM(CASE
             WHEN MONTH(py.pay_date) = 4 THEN amount
           end) april_amount,
       SUM(CASE
             WHEN MONTH(py.pay_date) = MONTH(CURDATE()) THEN amount
           end) current_month_amount,
       SUM(CASE
             WHEN MONTH(py.pay_date) = MONTH(CURDATE()) - 1 THEN amount
           end) previous_month_amount,
       SUM(CASE
             WHEN pay_date BETWEEN '2012-04-01' AND '2012-06-01' THEN amount
           end) range_amount
FROM   persons p
       LEFT JOIN vehicle v
              ON p.id = v.person_veh
       LEFT JOIN payment py
              ON p.id = py.person_id
GROUP  BY p.name,
          v.v_name 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/ad042/14)

然后，如果要更改日期范围，可以传入结束日期的值并将其设为变量。

# java - 如何在没有文本字段 Java 的情况下监听键盘输入

> ID：12189170
> 
> 赞同：1
> 
> 时间：2012-08-30T02:45:28.780
> 
> 标签：java, keyboard, rfid

我正在开发一个 Java 应用程序，并与充当键盘输入设备的 RFID 阅读器连接。

该应用程序将用于员工时间跟踪，因此员工不应该看到他/她的 RFID 标签包含的代码。

目前，应用程序打开一个 jFrame，要求员工扫描他们的标签。这是我想听键盘输入的地方。

所有的 RFID 标签都是 10 位数字，所以如果可能的话，我想使用某种正则表达式来检测卡片何时被扫描。

如果有人能指出我正确的方向，或者提供一些代码，我将不胜感激。

提前致谢。

**更新：**

通过将以下内容添加到我的 JFrame 的构造函数中，我能够读取扫描仪的输入。

```
addKeyListener(new KeyListener(){
    @Override
    public void keyPressed(KeyEvent e){ System.out.print(e.getKeyChar());}
    @Override
    public void keyReleased(KeyEvent e) { }
    @Override
    public void keyTyped(KeyEvent e) { }
}); 
```

所以现在确认阅读器只是标准键盘输入。

这是我为标签获得的示例：0006459027

现在，最大的问题是，我如何获取我得到的字符，并检测它是一个 10 位数的字符串，并从那里触发一个事件以打开一个新帧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:51:57.810

首先，我会查看 RFID 阅读器是否`ActionEvent`在扫描标签时触发触发。这将是最简单的方法。

否则，您需要将 a 附加`DocumentListener`到文档基础字段并监视更改。

您需要决定如何最好地中断结果（因为您可能一次获得 RFID 的每个字母）。您可以监视文档的长度或`javax.swing.Timer`在短暂延迟后触发 which （您将在由 触发的每个更新事件上重置计时器`DocumentListener`）

查看

*   [JTextField.addActionListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#addActionListener%28java.awt.event.ActionListener%29)
*   [JTextField.getDocument().addDocumentListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Document.html#addDocumentListener%28javax.swing.event.DocumentListener%29)

我建议`DocumentFilter`也看一下，但您对最终结果感兴趣，而不是修改它。

**已更新 DocumentListener 示例**

```
// In the classes variable decleration section...
private JTextField rfidField;

// In the classes constructor or UI init method...
rfidField = new JTextField(12);
rfidField.getDocument().addDocumentListener(new DocumentListener() {

    public void handleUpdate(DocumentEvent e) {

        if (e.getDocument().getLength() == 10) {

            System.out.println("Trigger me happy...");
            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    rfidField.setText(null);
                }
            });

        }

    }

    @Override
    public void insertUpdate(DocumentEvent e) {
        handleUpdate(e);
    }

    @Override
    public void removeUpdate(DocumentEvent e) {
        handleUpdate(e);
    }

    @Override
    public void changedUpdate(DocumentEvent e) {
        handleUpdate(e);
    }
});

// Now don't forget to add the field to your forms container ;)
////// 
```

当您“触发”代码事件时，我会做的一件事是，一旦您从文本字段中读取它，就清除文本字段（`JTextField.setText(null)`） - 恕我直言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:53:24.870

如果 RFID 阅读器充当*键盘*输入设备，请尝试使用[按键事件](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/KeyListener.html)：

```
JFrame frame = new JFrame();

// frame setup

frame.addKeyListener(new KeyAdapter(){

    public void KeyPressed(KeyEvent ke)
    {

        System.out.println(ke);

    }

}); 
```

否则，您必须检查它触发哪种事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T04:21:44.517

我也遇到过类似的情况，但使用的是条形码扫描仪。

我真的很努力地设计了一个`DocumentListener`可以处理所有场景的定制，但没有一个奏效。

无奈之下，我加了一个`ActionListener`，然后效果很好。

这是一个代码快照：

```
try {
    txtStockItemRef.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            System.out.println(txtStockItemRef.getText()); 
            DatabaseManager.peformStockItemLookupByBarcodeRef(txtStockItemRef.getText());
        } 
    }); 
} catch(Exception exc) {
    LiveCityRetailTools.handleExceptionWithUserMessage(exc);
} 
```

# ruby-on-rails - 在我的 Rails 应用程序中格式化表单

> ID：12189176
> 
> 赞同：0
> 
> 时间：2012-08-30T02:47:27.840
> 
> 标签：ruby-on-rails

我有一个带有表单的 Rails 应用程序。我的 css 文件已准备就绪。我只是不知道如何将 css 表单类和 id 也应用于我的 form_for 所在的创建操作页面内的字段？

```
 <%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @user.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </p>
  <p>
    <%= f.label :password %><br />
    <%= f.password_field :password %>
  </p>
  <p>
    <%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation %>
  </p>
  <p class="button"><%= f.submit %></p>
<% end %> 
```

我的表单标签及其字段的 CSS 样式如下：

```
 id="phx-signup-form" 
```

电子邮件字段 css 样式：

```
 class="email-input" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:56:31.427

尝试

```
<%= form_for @user, :html => { :id => 'phx-signup-form' } do |f| %> 
```

和

```
<%= f.text_field :email, :class => 'email-input' %> 
```

[您可以在http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)上阅读更多参考资料

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:57:43.050

您的表单会自动获取 id，就`new_user`好像您的表单正在作为新表单运行一样，并且会自动获取 id，就`edit_user`好像您的表单正在作为编辑表单运行一样。所以你根据条件在你的css中使用`id="new_user"`or`id="edit_user"`代替。`id="phx-signup-form"`

对于您的表单和 `<%= f.text_field :email, "", :class => 'email-input' %>`电子邮件字段。去尝试一下。它可能会解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:04:21.450

[Rails API 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)是一个很好的起点。

```
form_for(@user, html: { id: 'phx-signup-form' }) 
```

应该让你走上正确的道路。

# java - 查找给定单词中字符的重复次数

> ID：12189181
> 
> 赞同：1
> 
> 时间：2012-08-30T02:47:43.957
> 
> 标签：java, performance, algorithm, hashmap

所以我正在开发一种算法来计算给定单词中每个字符的重复次数。我正在使用 a`HashMap`并将每个唯一字符添加到`HashMap`作为键，值是重复次数。我想知道我的解决方案的运行时间是多少，以及是否有更有效的方法来解决问题。

这是代码：

```
public static void getCount(String name){
        public HashMap<String, Integer> names = new HashMap<String, Integer>() ;
        for(int i =0; i<name.length(); i++){

            if(names.containsKey(name.substring(i, i+1))){
                names.put(name.substring(i, i+1), names.get(name.substring(i, i+1)) +1);
            }
            else{
                names.put(name.substring(i, i+1), 1);
            }
        }

        Set<String> a = names.keySet();
        Iterator i = a.iterator();

        while(i.hasNext()){
            String t = (String) i.next();
            System.out.println(t + " Ocurred " + names.get(t) + " times");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:00:50.810

该算法的时间复杂度为`O(n)`，但我会更改您的实现的某些部分，即：

*   使用单个`get()`而不是`containsKey()`+ `get()`;
*   使用`charAt()`代替`substring()`which 将创建一个新`String`对象；
*   使用 a`Map<Character, Integer>`而不是，`Map<String, Integer>`因为您只关心单个字符，而不是整个`String`：

换句话说：

```
public static void getCount(String name) {
    Map<Character, Integer> names = new HashMap<Character, Integer>();
    for(int i = 0; i < name.length(); i++) {
        char c = name.charAt(i);
        Integer count = names.get(c);
        if (count == null) {
            count = 0;
        }
        names.put(c, count + 1);
    }
    Set<Character> a = names.keySet();
    for (Character t : a) {
        System.out.println(t + " Ocurred " + names.get(t) + " times");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:57:09.320

从算法的角度来看，您的解决方案是 O(n)，这已经是最佳的（至少您必须检查整个字符串中的每个字符至少一次，即 O(n)）。

但是，有几种方法可以加快速度，以减少持续的开销，例如

*   使用`HashMap<Character,Integer>`. 字符将比长度为 1 的字符串更有效。
*   使用`charAt(i)`而不是`substring(i,i+1)`. 这样可以避免创建一个对您有很大帮助的新字符串。可能是您可以做出的最大单一改进。
*   如果字符串很长（例如数千个字符或更多），请考虑使用`int[]`数组而不是 HashMap 来计算单个字符，并将字符的 ASCII 值用作数组的索引。如果您的字符串很短，这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T02:52:21.990

将初始时间存储到变量中，如下所示：

```
long start = System.currentTimeMillis(); 
```

然后最后，当你完成时，打印出当前时间减去开始时间：

```
System.out.println((System.currentTimeMillis() - start) + "ms taken"); 
```

看看做这件事所花费的时间。据我所知，这是最有效的方法，但可能还有另一种好方法。此外，对每个单独的字符使用 char 而不是字符串（因为 char/Character 是字符的最佳类，一系列字符的字符串）然后做`name.charAt(i)`而不是`name.substring(i, i+1)`将你的 hashmap 更改为 HashMap<Character, Integer>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:52:11.057

字符串 s="好";

```
 //collect different unique characters 

    ArrayList<String> temp=new ArrayList<>();
    for (int i = 0; i < s.length(); i++) {
        char c=s.charAt(i);
        if(!temp.contains(""+c))
        {
            temp.add(""+s.charAt(i));

        }

    }

    System.out.println(temp);
    //get count of each occurrence in the string
    for (int i = 0; i < temp.size(); i++) {
        int count=0;
        for (int j = 0; j < s.length(); j++) {

            if(temp.get(i).equals(s.charAt(j)+"")){

                count++;
            }
        }
        System.out.println("Occurance of "+ temp.get(i) + " is "+ count+ " times" );
    }*/ 
```

# jquery - 在页面滚动上沿余弦波为袋鼠制作动画

> ID：12189182
> 
> 赞同：2
> 
> 时间：2012-08-30T02:47:47.697
> 
> 标签：jquery, math, parallax

我正在尝试让袋鼠在页面滚动上沿正弦波跳跃，但已经离开学校将近 15 年，无法锻炼实现这一目标所需的数学。我在下面的尝试中已经接近了某个地方，但看起来袋鼠患有癫痫症，并且在整个地方上下跳跃。

这是我的 CSS

```
.bgRoo{
    position: fixed; 
    background: url(../images/bg-roo.png) no-repeat; 
    width: 225px; height: 239px; 
    left: 50%; margin-left: 250px; 
    border: red; margin-top: 400px;} 
```

和我的 jQuery

```
$(window).bind('scroll',function(e){
        parallaxScroll();
    });

    function parallaxScroll(){
        var scrolledY = $(window).scrollTop();
        $('.bgRoo').css('top',''+((Math.sin(scrolledY)*30)+(scrolledY*0.1))+'px');
        $('.bgRoo').css('margin-left',(250+scrolledY)+'px')
    } 
```

有人愿意尝试一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:52:34.890

这可能是因为它对滚动更改有点敏感......也许`Math.sin(scrolledY)` 应该是`Math.sin(scrolledY/30)`左右。传递给 Math.sin 的数字 (scrolledY) 以弧度表示，所以 .... 每 6.28ish 是一个完整的正弦波。意味着目前每 6 像素 ish 它正在经历一个完整的正弦循环，这意味着滚动可能看起来很随机。

# python - 无法让字典键看起来像我想要的那样

> ID：12189184
> 
> 赞同：0
> 
> 时间：2012-08-30T02:48:22.970
> 
> 标签：python, dictionary

我的字典键需要这种格式的“/ cat/”，但我不断收到多个正斜杠。这是我的代码：

```
 # Defining the Digraph method #
 def digraphs(s):
      dictionary = {}
      count = 0;
      while count <= len(s):
          string = s[count:count + 2]
          count += 1
          dictionary[string] = s.count(string)
      for entry in dictionary:
          dictionary['/' + entry + '/'] = dictionary[entry]
          del dictionary[entry]
      print(dictionary)
 #--End of the Digraph Method---# 
```

这是我的输出：

我这样做：

digraphs('我的猫在帽子里')

```
{'///in///': 1, '/// t///': 1, '/// c///': 1, '//s //': 1, '/my/': 1, '/n /': 1, '/e /': 1, '/ h/': 1, '////ha////': 1, '//////': 21, '/is/': 1, '///ca///': 1, '/he/': 1, '//th//': 1, '/t/': 3, '//at//': 2, '/t /': 1, '////y ////': 1, '/// i///': 2} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:54:27.057

在 Python 中，您通常不应该在修改对象时对其进行迭代。不要修改您的字典，而是创建一个新字典：

```
new_dict = {}

for entry in dictionary:
    new_dict['/' + entry + '/'] = dictionary[entry]

return new_dict 
```

或更简洁（Python 2.7 及更高版本）：

```
return {'/' + key + '/': val for key, val in dictionary.items()} 
```

更好的方法是首先跳过创建原始字典：

```
# Defining the Digraph method #
def digraphs(s):
    dictionary = {}

    for count in range(len(s)):
        string = s[count:count + 2]
        dictionary['/' + string + '/'] = s.count(string)

    return dictionary
#--End of the Digraph Method---# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T02:51:04.767

您在循环时将条目添加到字典中，因此您的新条目也包含在循环中并再次添加额外的斜杠。更好的方法是制作一个包含您想要的新键的新字典：

```
newDict = dict(('/' + key + '/', val) for key, val in oldDict.iteritems()) 
```

正如@Blender 指出的那样，如果您使用的是 Python 3，您还可以使用字典理解：

```
{'/'+key+'/': val for key, val in oldDict.items()} 
```

# iphone - 选择 UITableViewCell AccessoryView，与选择行分开

> ID：12189191
> 
> 赞同：8
> 
> 时间：2012-08-30T02:49:34.263
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个`UITableview`我正在显示一些任务，每一行都有一个复选框来标记任务是否完成。

我希望在用户点击复选框时切换复选标记，并在用户点击行时切换到详细视图。后者很简单，只需使用

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是，我想分隔选择区域，仅在选中复选框时切换复选框，仅在选中`accessoryview`单元格的其余部分时才进入详细视图。如果我在`UIbutton`里面添加一个`accessoryview`，用户会选择行并且`UIButton`当他们只想点击复选框时，对吗？

另外，如果用户只是通过拖动来滚动表格视图`accessoryview`怎么办？这不会触发`UIButton`on TouchUp 上的动作吗？

有人对如何做到这一点有任何想法吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T03:09:40.823

在这个委托方法中管理附件水龙头怎么样：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

**编辑：**

您可以为响应`accessoryButtonTappedForRowWithIndexPath:`方法的自定义附件视图执行类似的操作。

在`cellForRowAtIndexPath:`方法中 -

```
BOOL checked = [[item objectForKey:@"checked"] boolValue];
UIImage *image = (checked) ? [UIImage   imageNamed:@"checked.png"] : [UIImage imageNamed:@"unchecked.png"];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
CGRect frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
button.frame = frame;
[button setBackgroundImage:image forState:UIControlStateNormal];

[button addTarget:self action:@selector(checkButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside];
button.backgroundColor = [UIColor clearColor];
cell.accessoryView = button;

- (void)checkButtonTapped:(id)sender event:(id)event
{
   NSSet *touches = [event allTouches];
   UITouch *touch = [touches anyObject];
   CGPoint currentTouchPosition = [touch locationInView:self.tableView];
   NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint: currentTouchPosition];
   if (indexPath != nil)
  {
     [self tableView: self.tableView accessoryButtonTappedForRowWithIndexPath: indexPath];
  }
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
  NSMutableDictionary *item = [dataArray objectAtIndex:indexPath.row];
  BOOL checked = [[item objectForKey:@"checked"] boolValue];
  [item setObject:[NSNumber numberWithBool:!checked] forKey:@"checked"];

  UITableViewCell *cell = [item objectForKey:@"cell"];
  UIButton *button = (UIButton *)cell.accessoryView;

  UIImage *newImage = (checked) ? [UIImage imageNamed:@"unchecked.png"] : [UIImage imageNamed:@"checked.png"];
  [button setBackgroundImage:newImage forState:UIControlStateNormal];
} 
```

# python - python解释器有多聪明？

> ID：12189196
> 
> 赞同：-1
> 
> 时间：2012-08-30T02:50:37.933
> 
> 标签：python

可能是一个愚蠢的问题，但我一般想知道，如果有人知道，Python 解释器有多少远见，特别是在正则表达式和文本解析领域。

假设我的代码在某个时候看起来像这样：

```
mylist = ['a', 'b', 'c', ... ]

if 'g' in list: print(mylist.index('g')) 
```

有没有更安全的方法可以使用 while 循环或类似方法来做到这一点。我的意思是，是否会从一开始就进行第二次解析来查找索引，还是 Python 认为两个 g（在上面的行中）是同一件事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T02:55:16.463

它会进行两次查找。如果值得（例如，一个非常大的列表），请使用`try`：

```
try:
    print(mylist.index('g'))
except ValueError:
    pass 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T02:55:38.710

包含检查的结果没有被缓存，因此需要重新发现索引。而 Python 的动态特性使得这种东西的隐式缓存不可靠，因为该`__contains__()`方法可能会改变对象（尽管这样做会违反一些编程原则）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:22:01.223

您可以轻松地制作字典进行查找。像这样的东西：

```
mydict = {k:v for v,k in enumerate(mylist)} 
```

除非您在同一个文件上进行一些这样的查找，否则创建的开销是`dict`不值得的`list`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T02:55:40.603

您的代码将导致两次查找，首先确定“g”是否在列表中，然后查找索引。Python 不会尝试将它们合并到单个查找中。如果您担心效率，您可以使用字典而不是列表，这将使查找 O(1) 而不是 O(n)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T05:32:04.627

是的，它将被查找两次，python解释器不缓存指令，尽管我想知道它是否可能（对于某些事情），如果这是一个问题，那么你可以使用[set](http://docs.python.org/library/sets.html)或[dicts](http://docs.python.org/library/stdtypes.html)两者都有常量查时间。

无论哪种方式，您似乎都是[LBYL](http://docs.python.org/glossary.html?highlight=lbyl#term-lbyl)，在 python 中，我们倾向于[EAFP](http://docs.python.org/glossary.html?highlight=lbyl#term-eafp)，因此将这些东西包装在`try ... except`块中是很常见的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T04:36:28.640

尝试是在列表中查找元素索引的更好选择。尝试： print(mylist.index('g')) except ValueError: print "value not in list"
pass

# jquery-mobile - How to add a transition to all pages in jquery mobile?

> ID：12189203
> 
> 赞同：1
> 
> 时间：2012-08-30T02:51:33.110
> 
> 标签：jquery-mobile

By default jQuery Mobile transitions is set to "fade". I know i can add a transition to all links, but since I'm using the same transition "slide" for all pages is there a way that i don't have to `data-transition="slide"` to all links.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:05:47.887

Insert this on your head tag:

```
<script>    
    $.mobile.defaultPageTransition = 'slide';    
</script> 
```

# javascript - jquery插件中的闭包和上下文

> ID：12189207
> 
> 赞同：0
> 
> 时间：2012-08-30T02:52:29.850
> 
> 标签：javascript, jquery, closures

我已经阅读了很多关于 jquery 插件中的闭包和设计模式（甚至有些矛盾的东西），但我并不完全理解它......我有这段代码，它已经在工作，但我不知道它是否我正在做的最佳实践......

```
(function($) {

    var methods = { 
               method1 : function() { .... }
                  }

    return this.each(function() {

    $(this).change(function()
        {
        methods.method1.apply($(this));
        })

    });

})(jQuery); 
```

我的疑问在于事件委托功能......我应该在那里使用闭包而不是应用？最佳做法是什么？我应该如何定义该闭包？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:00:04.520

你得到的东西从这里看起来是正确的。（虽然 jQuery 代码有时很难通过肉眼验证！）当事件委托被调用时，`this`将是 DOM 元素引发事件。那里不需要关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:05:05.223

除了其他答案提到的内容外，`this.each`仅`$(this).change(...)`在其中是多余的。如果你把它改成这样：

```
// no this.each
this.change(function() {
    // ...
}); 
```

那么它的工作方式应该完全相同，但更简洁，可以说更清晰。

# javascript - parseInt 出了什么问题

> ID：12189209
> 
> 赞同：2
> 
> 时间：2012-08-30T02:52:59.413
> 
> 标签：javascript, jquery

我刚刚在 parseInt 上遇到了 1 个问题，我确实将这个 parseInt 应用于我的所有项目，但今天我只是遇到了这个

我有一个普通的文本输入`<input type='text' name='KG'>` ，我使用 jquery 检索输入值，然后写入另一个输入 `<input type='text' name='KG2'>`

下面是我的jQuery代码

```
$(":input[name='KG']").keyup(calc);
function calc(){
   var kg = $(":input[name='KG']").val();
   kg=parseInt(kg);
   $(":input[name='KG2']").val(kg);
} 
```

猜猜看，这是我得到的结果
input@KG > show@KG2
28 > 28
028 > 2
34 > 34
034 > 28
9 > 9
09 > 0

有谁知道出了什么问题？它可以通过使用 Math.round 来解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T02:54:31.483

`028`,`034`并被`09`视为八进制数，因为它们以开头`0`并且您没有指定基数。`8`and`9`是无效的数字，所以你得到第一个`2`和`0`最后一个的 and ，第二个被转换为 decimal `3*8 + 4 = 28`。

采用`parseInt(kg,10);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T02:53:55.497

您忘记了第二个参数，它指定了解释 int 的基数。要修复您的示例，请尝试以下操作：

```
$(":input[name='KG']").keyup(calc);
function calc(){
   var kg = $(":input[name='KG']").val();
   kg=parseInt(kg, 10);
   $(":input[name='KG2']").val(kg);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T02:54:23.593

将您的代码更改为；

```
kg=parseInt(kg, 10); 
```

您必须将基数（第二个参数）传递给，`parseInt()`否则它将根据内容进行猜测。“猜测”逻辑[在 MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Functions/parseInt)都有描述。

在您的情况下，如果字符串以 a`0`而不是 a开头`0x`，它将假定字符串是八进制的，它仅将 0-8 作为合法字符并以 8 为基数进行转换。

故事的寓意 - 总是将基数值传递给`parseInt()`.

# asp.net - ASP.net 中的文件夹浏览

> ID：12189212
> 
> 赞同：2
> 
> 时间：2012-08-30T02:53:34.170
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我在这里要做的是允许我的用户在网络上的数据服务器中选择一个路径，以便我可以生成一个配置文件。

我希望能够在我的 asp.net 页面上复制 OpenFileDialog() 的功能。然而这个函数在 asp.net 上不存在，而且我知道在 asp.net 调用 FileUpload 中有这个控件。但我在这里需要的只是文件夹的路径/目录。我不需要上传我的文件。

怎么做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:43:00.683

不，对此没有内置控件。这不是一个正常的要求，因为大多数网站不让他们的用户看到他们的文件结构。

构建一个执行此操作的用户控件将很简单。

我建议使用 TreeView asp.net 控件，附加到您列出文件的数据源。

[这个关于绑定树视图的](http://www.codeproject.com/Articles/18425/Auto-Binding-a-TreeView-control-from-a-self-refere)示例应该可以帮助您入门。

您可以使用填充数据

```
var path = Server.MapPath("/");
var dirs = Directory.[EnumerateDirectories][2](path);
var files = Directory.[EnumerateFiles][3](path ); 
```

最后，为了让它看起来像一个对话框，您可以使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:14:39.877

在 Web 应用程序中执行此操作很棘手。您必须枚举服务器上要浏览的文件夹（大概这是运行 Web 应用程序的同一台服务器），然后将该层次结构呈现给用户以选择文件夹。如果层次结构不是太大，您可以在前面枚举整个一堆，并将其显示在树中。如果它很大，您可以使用 Ajax 方法：选择顶级文件夹，然后发送 Ajax 请求以获取下一个级别，依此类推。

要枚举文件夹，您需要自己遍历文件系统。一种方法见[http://msdn.microsoft.com/en-us/library/dd997370(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd997370(v=vs.100).aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-13T06:27:27.107

我找到的解决方案是，这仅适用于寻找答案的任何人：-

protected void browse_Click(object sender, EventArgs e) {

```
 Thread thdSyncRead = new Thread(new ThreadStart(openfolder));
        thdSyncRead.SetApartmentState(ApartmentState.STA);
        thdSyncRead.Start();

    }
    public void openfolder()
    {

        FolderBrowserDialog fbd = new FolderBrowserDialog();
        DialogResult result = fbd.ShowDialog();

        string selectedfolder = fbd.SelectedPath;

        string[] files = Directory.GetFiles(fbd.SelectedPath);
        System.Windows.Forms.MessageBox.Show("Files found: " + files.Length.ToString(), "Message");

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T05:06:43.540

asp.net 站点是与您的服务器完全断开连接的环境。正如其他人所提到的，要复制 OpenFileDialog() 您将需要查看文件夹结构并将其呈现给 web/断开连接环境中的用户。在这种情况下，用户是从实际的文件系统中抽象出来的……因为这种抽象已经发生，现在是考虑您所采用的路线的好时机。可能值得考虑的是不需要文件系统的直接复制，您可以管理数据库中的“虚拟”文件夹结构，并在那里维护磁盘上文件的链接/路径？

# javascript - 如何检查循环中的所有内容是否正确？

> ID：12189219
> 
> 赞同：1
> 
> 时间：2012-08-30T02:54:21.687
> 
> 标签：javascript, jquery

我有一个简单的多题表格，每个问题有 4 个答案，用户必须为每个问题选择 1 个答案。

到目前为止，我可以检查未回答的问题并显示错误消息。

但是现在，如果所有问题都已得到解答，我需要表格进入结果页面（我假设`window.location`？）

如何检查是否所有问题都已回答？

```
$('.submit-button').click(function(event){
    $('.validate-message').hide();

    for (var i=1;i<6;i++) {
        var input = $("input[name=q"+i+"]");
        var inputChecked = $("input[name=q"+i+"]:checked");

        if (!inputChecked.val()) { //if an answer is not selected for a question
            $(input).parents('fieldset').append('<div class="validate-message" style="color:red;">Please choose an answer!</div>');

        } else { // if an answer is selected for a question
        }
    }       
    return false;          
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:57:25.383

只需使用一个布尔变量：

```
$('.submit-button').click(function(event){
    var noErrors = true;  // default to no errors

    $('.validate-message').hide();

    for (var i=1;i<6;i++) {
        var input = $("input[name=q"+i+"]");
        var inputChecked = $("input[name=q"+i+"]:checked");

        if (!inputChecked.val()) { //if an answer is not selected for a question
            noErrors = false;  // an error was found, set noErrors to false
            $(input).parents('fieldset').append('<div class="validate-message" style="color:red;">Please choose an answer!</div>');

        } else { // if an answer is selected for a question
        }
    }       

    if(noErrors) // do stuff

    return false;          
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:04:23.917

出于兴趣，这是一个简单的 javascript 解决方案。

假设 HTML 如下所示：

```
<form id="f0" onsubmit="return validateForm(this);">
  <div>
    <p>Question 1.<br>
      A<input type="radio" value="A" name="q1"><br>
      B<input type="radio" value="B" name="q1"><br>
      C<input type="radio" value="C" name="q1"><br>
      D<input type="radio" value="D" name="q1"><br>
    </p>
    <p>Question 2.<br>
      A<input type="radio" value="A" name="q2"><br>
      B<input type="radio" value="B" name="q2"><br>
      C<input type="radio" value="C" name="q2"><br>
      D<input type="radio" value="D" name="q2"><br>
    </p>
    <input type="reset"  value="Clear answers">
    <input type="submit" value="Submit answers">
  </div>
</form> 
```

验证每个问题是否已得到回答的功能是：

```
function validateForm(form) {

  var control, controls = form.elements;
  var visited = {};
  var name, radios;

  for (var i=0, iLen=controls.length; i<iLen; i++) {
    control = controls[i];
    name = control.name;

    if (control.type == 'radio' && name && !visited.hasOwnProperty(name)) {
      visited[name] = false;
      radios = form[name];

      for (j=0, jLen=radios.length; j<jLen; j++) {
        visited[name] = visited[name] || radios[j].checked;
      }

      if (!visited[name]) {
        // Question hasn't been answered, cancel submit and do whatever
        alert('There are unanswered questions for ' + name);
        return false;
      }
    }
    // Validation for other controls
    // ...
  }
} 
```

# java - writeObject 和 readObject 是如何工作的？

> ID：12189221
> 
> 赞同：2
> 
> 时间：2012-08-30T02:54:24.543
> 
> 标签：java, serialization, java-custom-serialization

当我阅读 JDK 6.0 的源代码时，我在 ArrayList 中找到了这两个方法。你看他们都是私人的。但是经过搜索，我没有找到任何其他调用它们的方法。我也考虑了本地方法，但仍然找不到。这两个方法似乎是处理 IO 的，但它们从来没有被调用过。

所以，我的问题是，它们是如何工作的？还有其他方法可以调用私有方法吗？

```
/**
 * Save the state of the <tt>ArrayList</tt> instance to a stream (that is, serialize it).
 */
private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException;

/**
 * Reconstitute the <tt>ArrayList</tt> instance from a stream (that is, deserialize it).
 */
private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:00:18.487

这两种方法在可序列化类中用于自定义序列化（也称为[自定义默认协议）](http://java.sun.com/developer/technicalArticles/Programming/serialization/)。

文章中的文字：

> 然而，有一个奇怪而狡猾的解决方案。通过使用序列化机制的内置特性，开发人员可以通过在其类文件中提供两种方法来增强正常流程。这些方法是：
> 
> 1.  private void writeObject(ObjectOutputStream out) 抛出 IOException；
> 2.  private void readObject(ObjectInputStream in) 抛出 IOException，ClassNotFoundException；
> 
> 请注意，这两个方法都（并且必须）声明为私有，证明这两个方法都没有被继承、覆盖或重载。这里的技巧是虚拟机会自动检查是否在相应的方法调用期间声明了任一方法。虚拟机可以随时调用您的类的私有方法，但没有其他对象可以。

# mysql - 查询以显示第一个未来事件和显示当前事件之后的时间事件

> ID：12189228
> 
> 赞同：3
> 
> 时间：2012-08-30T02:55:38.257
> 
> 标签：mysql, sql

我有一个存储事件的表，它有 2 个日期字段。一个用于事件的开始日期 (start_date)，另一个用于结束日期 (end_date)。有些事件没有定义 end_date 或 end_date='1970-01-01'。

我使用以下 mysql 查询来检索当前和未来的事件。

```
SELECT * 
FROM events 
WHERE start_time >= CURDATE() 
    OR (start_time <= CURDATE() AND end_time>=CURDATE()) 
ORDER BY events.start_time; 
```

我需要的是一个返回相同结果但以不同方式排序并根据以下方式排序的查询：

*   事件被“划分”为两组：当前事件和未来事件。当前事件被认为是在实际日期（“昨天”）前一天开始但仍未完成的所有事件。

*   结果将显示第一个未来事件，按 start_time 升序排列，显示当前事件后，按 start_time 升序排列。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:05:48.727

```
SELECT *,
       DATEDIFF(start_time, CURDATE()) AS diff
FROM   events
WHERE  start_time >= CURDATE()
        OR ( start_time <= CURDATE()
             AND end_time >= CURDATE() )
ORDER  BY CASE
            WHEN diff > 0 THEN 0
            ELSE 1
          end,
          diff ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:04:29.263

试试这个：

```
ORDER BY 
  (CASE WHEN start_time < CURDATE() AND end_time >= CURDATE() THEN 1 ELSE 0 END) ASC,
  start_time ASC 
```

# javascript - JS/jquery：我将如何遍历我的 HTML 中的每个图像？

> ID：12189231
> 
> 赞同：2
> 
> 时间：2012-08-30T02:55:53.577
> 
> 标签：javascript, jquery

我是编程新手。我目前正在尝试使用 jqueryrotate 插件来尝试随机旋转我的 HTML div 中的所有图像`.holder`以获得分散的图片外观。

我知道 $.each 函数应该在数组上使用......但我想不出其他任何东西来遍历我的图像。有什么建议么？

```
$.each($('.holder img'), function(i, value){
    value.rotate(Math.random() * -90 + Math.random() * 90);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T02:57:44.930

当您传递一个对象数组时，您可以访问当前 using `this`，但它不是 jQuery 对象，因此您应该使用`$(this)`to 链接 with `.rotate`。

```
$.each($('.holder img'), function(){
    $(this).rotate(Math.random() * -90 + Math.random() * 90);
}); 
```

*参考*

*   [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:59:20.373

```
$('.holder img').each(function() { //your func }); 
```

这应该工作

# intel - 在交流适配器上使用 NVidia optimus 有什么好处吗？

> ID：12189234
> 
> 赞同：-1
> 
> 时间：2012-08-30T02:55:57.773
> 
> 标签：intel, nvidia, optimus

我的笔记本上安装了**NVidia**显卡，它支持**Optimus**技术（第二张显卡集成在**Intel**处理器上）。

假设，我的笔记本电脑**永远**在交流适配器上（或者至少 99% 的笔记本电脑工作） - 与**独立显卡相比，选择****optimus**选项有什么优势吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:16:08.973

是的，您将消耗更少的电力，从而减少您的供应商的费用:)

在某些笔记本电脑上，它还使 CPU 能够全速运行，而在激活独立 GPU 时并非如此（由于全局热配置文件）。**

# java - Java模式的优点，其中方法将对象作为参数而不是单个参数

> ID：12189236
> 
> 赞同：4
> 
> 时间：2012-08-30T02:56:17.273
> 
> 标签：java, amazon-web-services, amazon-glacier

我一直在通过 Amazon Java SDK 使用 Amazon Glacier。

我很惊讶参数是通过对象传递的，而不是作为单个参数传递的。

例如，要检索参数为 Vault、JobId、range 的作业的输出，使用以下技术：

```
client.getJobOutput(new GetJobOutputRequest(Vault, JobId, range)); 
```

代替：

```
client.getJobOutput(Vault, JobId, range); 
```

这两种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T03:06:07.577

优点：

1.  如果您的方法采用许多参数，则使用参数对象会使方法签名更加合理。
2.  如果以后要为方法获取额外的参数，使用参数对象意味着您只需在 param 对象中添加另一个字段，并且方法签名不需要更改。
3.  如果您想要该方法的批处理版本，只需传递参数对象列表。

缺点：

1.  额外的冗长
2.  另一个级别的间接

# objective-c - Xcode 4.4 中的@synthesize

> ID：12189245
> 
> 赞同：2
> 
> 时间：2012-08-30T02:57:25.197
> 
> 标签：objective-c, xcode

在 Xcode 4.4 的描述中，它说：

*   在 Objective-C`@synthesize`中使用属性时默认生成命令。

这意味着：我不需要再写`@synthesize`了，**或者**Xcode 会为我自动填充`@synthesize`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T03:00:33.463

你不需要再写`@synthesize`了——你自己试试吧！

[文章参考](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)：

> 在 Xcode 4.4 和 LLVM Compiler 4.0 中，不再需要 @synthesize 指令，因为它将默认提供。这意味着在大多数情况下，您现在只需要 @property 并且编译器会为您处理其他所有事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:46:55.840

是的。这是 Apple 的出版物，其中涵盖了[Objective-C 功能可用性指数](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html#//apple_ref/doc/uid/TP40012243) ，其中指出：

> **@property 实例变量和访问器方法的默认综合：** Xcode 4.4 (LLVM Compiler 4.0)

# css - jmpress：在具有自动高度的绝对定位元素（幻灯片）上滚动

> ID：12189247
> 
> 赞同：0
> 
> 时间：2012-08-30T02:57:46.877
> 
> 标签：css, scroll, css-position

## [现场直播](http://srsgores.jit.su)

我有一个使用 jmpress 的网站，我很难滚动我的内容。我可以通过简单地选择页面上的文本并向下拖动来在 Chrome 中滚动，但我想在所有具有本机滚动的浏览器中实现这一点，也许是由 javascript 模拟的。我已经检查了许多插件来执行此操作，例如 jScrollpane 和 tinyScrollbar，但是如果没有设置高度并`overflow-y`设置为滚动，它们都不会工作。第二个问题：即使我设置`overflow-y`为`scroll`，鼠标滚轮也不会滚动。

在控制台中试试这个：`$(".step").jScrollPane();`。没发生什么事。将每个步骤设置`height`为 800px 和`overflow-y` `scroll`, 并且滚动有效，但这仍然只是相对于窗口的高度。我需要某种方法来计算周围元素的大小（相对定位），以便在用户调整屏幕大小时可以计算高度。

那么是否可以在绝对定位的元素（幻灯片）上实现滚动并使用 jmpress 将高度保持为自动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T08:40:46.187

设置高度后，可以使用jquery的窗口调整大小事件动态设置高度，可以调用tinyscrollbar的update方法来更新滚动条。

# ios - 显示不应该存在的文件的主包的内容

> ID：12189248
> 
> 赞同：1
> 
> 时间：2012-08-30T02:57:51.483
> 
> 标签：ios, xcode, nsbundle

我一直在尝试各种文件管理的东西，但我遇到了一些令人困惑的事情。我创建了一个 .txt 文件并放在 Supporting Files 文件夹中。然后，在程序中，我遍历了主包的内容以查看它是否存在：

```
// Get main bundle
NSBundle *myBundle = [NSBundle mainBundle];

// Collect all text files in main bundle
NSArray *textFiles = [myBundle pathsForResourcesOfType:@"txt"
                                           inDirectory:nil];

NSLog(@"%@", textFiles); 
```

很简单，你瞧，它出现了。太好了，完美。然而，这就是事情变得奇怪的地方。我重命名了该文件，再次运行该文件，然后出现了两个文件——一个具有原始名称，一个具有新名称。即使我实际上并没有创建一个新文件，只是重命名了一个。

接下来，我尝试删除文件并制作一个全新的文件。当我再次运行它时，它告诉我还有两个文件——之前的两个。我制作的新文件没有显示出来。旧文件是，即使只有一个旧文件并且已被删除。

即使从设备中删除应用程序并重新安装后，也会发生同样的事情。它从哪里找到这些文件？为什么新的不出现？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:15:53.923

在 Xcode 中，您应该在删除文件时选择**Move to Trash**而不是**Remove Reference 。**然后你应该在构建之前**清理**项目，因为 Xcode 中可能有一些缓存。

# java - 我们什么时候真的需要为我们的 Java 代码使用休眠？

> ID：12189251
> 
> 赞同：7
> 
> 时间：2012-08-30T02:58:12.033
> 
> 标签：java, database

作为 Java 数据库项目的初学者，如何决定何时应该在 Java 代码中使用 Hibernate 而不是简单的 jdbc？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T03:25:45.760

如果满足 1 到 4 则使用休眠

1.  如果您正在重新设计数据库架构和域对象。
2.  您设想您的域对象和您的模式将同步，例如汽车供应商应用程序，其中您的车辆对象可能靠近您的表结构。只是一个例子。
3.  您真的想使用 ORM 并将您的对象与模式紧密联系起来。
4.  想要使用 ORM 框架来处理连接等。

别的

我会推荐ibatis。这仍然是一个 ORM 框架，但在处理模式和域对象方面留下了灵活性。它在处理查询等方面提供了更大的灵活性。

Spring jdbc 还具有提供灵活性的良好特性。但我觉得它仍然不接近 ORM。但是spring确实提供了模板来处理像hibernate和ibatis这样的orms。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T03:29:42.877

基本上，如果您的应用程序需要存储一些数据，您可能会想要使用 ORM（例如，您为您的公司构建了一些业务应用程序并且您需要跟踪用户和帐户）。如果您的应用程序*是*您的数据，那么您可能会想要使用 JDBC（例如，您为您的公司构建了一个数据仓库）。

作为附加说明，应用程序同时使用 ORM 和 JDBC 是完全合理*的*。例如，如果您正在构建一个允许用户访问您的数据仓库的 web 应用程序，您可以使用 ORM 管理用户/帐户信息，但使用 JDBC 与数据仓库交互。

# xml - XML 文件作为存储库

> ID：12189258
> 
> 赞同：0
> 
> 时间：2012-08-30T02:58:53.610
> 
> 标签：xml, file, parsing

我正在使用 FW 4.0 开发 WPF 应用程序，我需要将应用程序数据（即设置）保存在 xml 文件中。

我之前使用过 2.0，我想知道创建 xml 文件然后能够在 xml 文件中修改（追加、添加新元素和删除）的最佳方法是什么。XML 文件将包含许多元素和子元素。

有人可以指出一个链接/建议方法来创建一个通用方法，可以调用它来添加/修改/删除元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:03:43.290

我发现[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387087.aspx)是在 .NET 4.0 中处理 XML 的最方便、最清晰的方法之一（它在 .NET 3.5 中也可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:40:52.310

我个人建议您创建一个类来表示您的设置，然后使用 XML 序列化来保存和检索它们。

不建议将其作为原始 XML 处理，您可能会得到难看的代码，难以维护。

关于 C# 中 XML 序列化主题的快速入门教程：[http ://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)

但是，如果您有理由使用原始 XML，那么 Petr Abdulin 推荐的 LINQ to XML 是一个不错的选择。

附带说明 - LINQ to XML 仅推荐用于小型或中型 XML 文件（因此适用于存储应用程序设置），但不应用于处理大文件。LINQ to XML 完整地读入和解析 XML 文件。如果它们很大，最好使用 an`XmlReader`并按顺序处理它们。

# c++ - 与复制构造函数和私有成员混淆

> ID：12189259
> 
> 赞同：1
> 
> 时间：2012-08-30T02:58:55.873
> 
> 标签：c++

假设我有以下课程：

```
class Test
{
             int num;
     public:
             Test(int x):num(x){}
             Test(const Test &rhs):num(rhs.num+1){}
};

int main()
{
      Test test(10);
      Test copy = test;
} 
```

副本中的`num`应该是`11`，我的问题是关于副本构造函数内部，为什么我们可以访问using的私有成员`num`来初始化副本中的 ？令我困惑的是，如果您键入，当然这是错误的，因为您试图访问 private ，但是如果您通过引用复制构造函数通过测试，它可以工作，有人可以告诉我这里发生了什么吗？ `test``num``num``cout<<test.num<<endl``num`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T03:01:55.257

私有成员是类本身的私有成员，而不是类的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T03:02:21.177

访问限制是针对每个类的，而不是针对每个对象的。

“私有”的意思是——只能从同一个类中访问。

“受保护”的意思是——可以从同一个类中访问，也可以从派生类中访问（在派生类中，受保护的非静态成员只能通过具有派生类类型的变量访问）。

“公共”的意思是——任何东西都可以访问。

访问点限制是限制必须检查的代码区域，以便了解值的使用位置，而不是阻止代码使用这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T03:04:52.057

`private`并不意味着对象实例私有。这意味着*该类*的私有。一个类的实例`T`可以访问其他实例的私有成员`T`。类似地，类中的静态方法`T`可以访问`T`.

如果`private`仅限制对单个实例的访问，它将使对象不可复制，因为正如您所指出的，复制构造函数将无法从原始实例中读取数据。

# asp.net - 如何在按钮单击时在 MVC3 剃须刀中添加动态文本框

> ID：12189262
> 
> 赞同：1
> 
> 时间：2012-08-30T02:59:20.647
> 
> 标签：asp.net, asp.net-mvc-3, dynamic

我想在单击按钮时动态创建文本框，并在单击另一个按钮时将其删除。我用 jquery 做到了，效果很好。

```
$(document).ready(function () {

    var counter = 2;

    $("#addButton").click(function () {
        if (counter > 10) {
            alert("Only 10 textboxes allow");
            return false;
        }

        var newTextBoxDiv = $(document.createElement('div'))
     .attr("id", 'TextBoxDiv' + counter);

        newTextBoxDiv.after().html('<input type="text" name="textbox' + counter +
      '" id="textbox' + counter + '" value="" >');

        newTextBoxDiv.appendTo("#TextBoxesGroup");

        counter++;
    });

    $("#removeButton").click(function () {
        if (counter == 1) {
            alert("No more textbox to remove");
            return false;
        }

        counter--;

        $("#TextBoxDiv" + counter).remove();

    });

    $("#getButtonValue").click(function () {

        var msg = '';
        for (i = 1; i < counter; i++) {
            msg += "\n Textbox #" + i + " : " + $('#textbox' + i).val();
        }
        alert(msg);
    });
});
</script>

<div id='TextBoxesGroup'>
<div id="TextBoxDiv1">       
    <input type="textbox" id="textbox1" />
</div></div><input type='button' value='Add Button' id='addButton' /><input type='button' value='Remove Button' id='removeButton' /><input type='button' value='Get TextBox Value' id='getButtonValue' /> 
```

但我想要 mvc3 razor 的这个功能。

# php - PHP上传多个文件总是给我超时错误

> ID：12189264
> 
> 赞同：1
> 
> 时间：2012-08-30T02:59:40.000
> 
> 标签：php, file, request-timed-out

好的，我不太明白为什么，但是无论我在PHP的ini_set函数中设置了什么，我都无法上传多个文件或者我正在上传的文件太大......我不明白. 到目前为止，这是我在处理`$_FILES[]`发布表单时上传的数组的脚本中设置的内容：

```
// Try and allow for 3 hours, just in case...
@set_time_limit(10800);

// Try and set some ini settings to buy us some time...
@ini_set('memory_limit', '512M');
@ini_set('upload_max_filesize', '512M');
@ini_set('post_max_size', '550M');
@ini_set('session.gc_maxlifetime', '10800');  // Allows for up to 3 hours
@ini_set('max_input_time', '10800');  // Allows for up to 3 hours
@ini_set('max_execution_time', '10800'); // Allows for up to 3 hours 
```

我`move_uploaded_file`用来把它放在指定的目录中，不知道这是否重要？

老实说，我怎样才能允许在没有超时错误的情况下上传多个文件？如果我上传 1 个文件，似乎很好。不确定是多个文件的数量问题还是组合文件的文件大小太大？已尝试使用 15MB 的总文件大小，这会产生 TIMED OUT ERROR！啊啊啊啊！！！！

我必须做什么才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:19:35.307

如果您使用的是 apache 服务器，则服务器本身也有时间限制。

查看 apache 配置中的 TimeOut 指令（默认为 300 秒）

您也可以查看 apache 错误日志

如果您只上传 2 个文件，每个文件 1Kb，可以正常工作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:23:22.530

为了可靠地上传大+多个文件，您应该使用文件上传器

我更喜欢[http://www.uploadify.com/](http://www.uploadify.com/)这个

# android - 在图像中绘制文本时换行

> ID：12189265
> 
> 赞同：4
> 
> 时间：2012-08-30T02:59:57.800
> 
> 标签：android, canvas, paint

我有一个用户插入文本的应用程序，当他单击一个按钮时，它会在预定图像中生成一个带有该文本的新图像并将其保存在手机上。

但有时该文本太长并超过图像的宽度，所以我想要做的就是将它分成一个新行。我该怎么做？

我尝试使用breakText，但我不确定如何使用它......我正在使用：

```
 textPaint.breakText(text[2], true, bmp.getWidth(), null); 
```

但它没有用。

此外，当我在 EditText 处手动换行时，它只显示所有内容，并在第二行应开始的位置显示“[]”...

编辑：我的代码原始代码：

```
 private void SaveMyImage() {
    // TODO Auto-generated method stub
    File myDir = new File(Environment.getExternalStorageDirectory().getPath()+"/App/");
    myDir.mkdirs();
    File file = new File (myDir, fname);
    if (file.exists ()) file.delete (); 
    try {
        FileOutputStream out = new FileOutputStream(file);

        Canvas canvas = new Canvas(bmp); 
        Paint textPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        if (text[0].equals("Image 01")) {
            textPaint.setColor(Color.BLACK);
        }
        else {
            textPaint.setColor(Color.WHITE);
        }
        textPaint.setTextAlign(Align.CENTER);
        textPaint.setTextSize(tamanho);
        textPaint.setShadowLayer(2, 2, 2, Color.BLACK);
        textPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OVER)); // Text Overlapping Pattern
        canvas.drawBitmap(bmp, 0, 0, null);
        canvas.drawText(text[1], largura, altura2, textPaint);
        canvas.drawText(text[2], largura, altura, textPaint);
        bmp.compress(Bitmap.CompressFormat.JPEG, 90, out);
        out.flush();
        out.close();
        Toast.makeText(SaveIMG.this, "Image saved on phone", Toast.LENGTH_LONG).show();
    } catch (Exception e) {
       e.printStackTrace();
    }
    sendBroadcast(new Intent(
            Intent.ACTION_MEDIA_MOUNTED,
            Uri.parse("file://" + Environment.getExternalStorageDirectory())));
    uri = Uri.parse(Environment.getExternalStorageDirectory().getPath()+"/App/"+fname);
    pronto.setImageURI(uri);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:20:12.680

[BreatText](http://developer.android.com/reference/android/graphics/Paint.html#breakText%28java.lang.String,%20boolean,%20float,%20float%5B%5D%29)返回字符串中在被截断之前可以显示的字符数。我建议循环调用它。删除它可以容纳的许多字符并将它们放置在每次迭代的字符串中，直到源文本为空。：

```
ArrayList<String> lines = new ArrayList<String>();
String test = text[2];
while(!test.isEmpty()){
    int newLength = textPaint.breakText(test, true, bmp.getWidth(), null);
    lines.add(test.substring(0, newLength));
    test = test.substring(newLength);
} 
```

至于打印多行。我假设您使用的[Canvas.drawText](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28char%5B%5D,%20int,%20int,%20float,%20float,%20android.graphics.Paint%29)似乎[不支持换行符。因此，您需要使用不同的 Y 值分别绘制每条线。（代码改编自这里）：](https://stackoverflow.com/questions/3153870/canvas-drawtext-does-not-print-linebreak)

```
Rect bounds = new Rect();
int yoff = 0;
for(String line:lines){
    canvas.drawText(line, x, y + yoff, paint);
    textPaint.getTextBounds(line, 0, line.length(), bounds);
    yoff += bounds.height();
} 
```

**编辑**我没有在您的代码中看到您实际拆分字符串的位置，正如我所描述的那样。如果您实际上没有向我展示您是如何实现它的，我无法诊断为什么我的解决方案不起作用。

虽然我想我可以从这里开始工作，但我可以向您展示如何修复错误。如果您想多次执行此操作，最好为它编写一个方法。将以下方法添加到您的类中：

```
public void splitAndDrawLines(Canvas canvas,String text, int x, int y, Paint textPaint, int width){
    ArrayList<String> lines = new ArrayList<String>();
    String test = text;
    while(!test.isEmpty()){
        int newLength = textPaint.breakText(test, true, canvas.getWidth(), null);
        lines.add(test.substring(0, newLength));
        test = test.substring(newLength);
    }
    Rect bounds = new Rect();
    int yoff = 0;
    for(String line:lines){
        canvas.drawText(line, x, y + yoff, textPaint);
        textPaint.getTextBounds(line, 0, line.length(), bounds);
        yoff += bounds.height();
    }
} 
```

替换此代码：

```
canvas.drawText(text[1], largura, altura2, textPaint);
canvas.drawText(text[2], largura, altura, textPaint); 
```

使用此代码：

```
this.splitAndDrawLines(canvas, text[1], largura, altura2, textPaint);
this.splitAndDrawLines(canvas, text[2], largura, altura, textPaint); 
```

**编辑2：**

这是我用来设置和发送代码的代码：

```
 // Create a 100x100 bitmap
    bmp = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888);
    // Set the height of the text to 12.
    this.tamanho = 12f;
    // Draw the text in the middle of the picture width-wise.
    this.largura = bmp.getWidth() / 2;
    // Text parameters
    this.text = new String[]{"MAKE THE TEXT WHITE", "This text starts in the middle of the middle is too long and will be split","Short text at the top of the image"}; 
    // Start one line size into the picture height-wise.
    this.altura = this.tamanho;
    // Start in the middle of the picture height-wise.
    this.altura2 = bmp.getHeight()/2;
    // Output File name.
    this.fname = "TEST.jpg";
    // Save the image
    SaveMyImage(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:51:10.793

我找到了一个解决方案，我创建了一个布局并将字符串设置为 textview 并将图像设置为背景并绘制它。

# java - 与控制块速度的俄罗斯方块游戏中的一段代码混淆

> ID：12189268
> 
> 赞同：0
> 
> 时间：2012-08-30T03:00:06.990
> 
> 标签：java, tetris

```
 if(loopCount % (20 - loopCount / 100) == 0) {
            if(dropBlock() == false) {
                mode = -1;
                loopCount = 1;
            }
            if(loopCount == 1900)
                loopCount--;
        }
        loopCount++; 
```

来自java写的书的俄罗斯方块程序。我只是不明白为什么要使用这样一段代码来控制块的下降速度以及它是如何工作的。谢谢 ！

loopCount 的初始值为 1，如果游戏结束，dropBlock 将返回 false。这部分包含在主循环中。和模式无关。我很抱歉，但我不能在这里查看整个程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:12:52.543

似乎它设置为让 loopcount 从 1 开始，并让我们使用一个表来检查`if(loopCount % (20 - loopCount / 100) == 0) {`

loopCount < 100, loopCount/100 = 0，所以 loopCount % 20 对于 20、40、60 和 80 返回 true。假设 loopCount 是 100 - 199。现在我们正在检查它是否可以被 19 整除，对于 200-300 可以被18\. 不过，我不确定他到底想达到什么目的。然后它检查它是否可能无法删除块，（dropBlock 可能试图删除块，并返回 true 表示成功，返回 false 表示失败。然后如果失败，它将模式设置为 -1（可能退出？）。然后一旦 loopCount达到 1900，它阻止它上升（通过在 之前减少到 1899 `loopCount++;`，它基本上减少然后增加，所以什么都不做（保持在 1900）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:22:37.120

该代码是如何不写好代码的一个很好的例子。它充满了神奇的数字（1900、20、100），这让你很难解释为什么你在做你正在做的事情。

但是实现这一点并打印出值表明 loopCount 的值只是从 1 一直增长到 1900，一旦达到 1900，它就会停留在那里。

所以在我看来，逻辑的作用是减少到 1899 并在每次迭代达到 1900 时增加到 1900。

# sql - sql到mongodb的翻译

> ID：12189273
> 
> 赞同：1
> 
> 时间：2012-08-30T03:00:48.643
> 
> 标签：sql, mongodb, language-translation

我想知道我们如何进行以下从 sql 到 mongoDB 的转换：

假设该表具有以下结构：

```
table
=====
-----
##id contribution         time

1            300                  Jan 2, 1990

2            1000                 March 3, 1991 
```

* * *

我想按照贡献数量的降序查找 id 的排名列表。

'$' 这就是我使用 sql 所做的：

```
select id, count(*) c from table group by id order by c desc; 
```

如何使用 count()、order() 和 group() 将这个复杂的 sql 转换为 mongoDB？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T12:52:52.020

设置测试数据：

> db.donors.insert({donorID:1,contribution:300,date:ISODate('1990-01-02')}) db.donors.insert({donorID:2,contribution:1000,date:ISODate('1991 -03-03')}) db.donors.insert({donorID:1,contribution:900,date:ISODate('1992-01-02')})

您可以在 MongoDB 2.2中使用新的[聚合框架：](http://docs.mongodb.org/manual/applications/aggregation/)

```
db.donors.aggregate(
    { $group: {
        _id: "$donorID",
        total:   { $sum: "$contribution" },         
        donations: { $sum: 1 }
    }},
    { $sort: {
        donations: -1
    }}
) 
```

要产生所需的结果：

```
{
    "result" : [
        {
            "_id" : 1,
            "total" : 1200,
            "donations" : 2
        },
        {
            "_id" : 2,
            "total" : 1000,
            "donations" : 1
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T03:08:58.870

检查[mongodb 聚合](http://www.mongodb.org/display/DOCS/Aggregation)

```
db.colection.group(
  {key: { id:true},
  reduce: function(obj,prev) { prev.sum += 1; },
  initial: { sum: 0 }
}); 
```

得到结果后，按`sum`.

# php - 设置 imagepng 路径以通过 FTP 保存

> ID：12189275
> 
> 赞同：1
> 
> 时间：2012-08-30T03:01:27.317
> 
> 标签：php, image, ftp

如何通过 FTP 保存图像？这是我的代码：

```
$conn_id = ftp_connect('***');
$login_result = ftp_login($conn_id, '***','***'); 
if( $login_result) echo 'connected';
$save = "FTP://temp/". $FileName;

imagepng($this->Picture, $save);

/*if (ftp_put($conn_id,$save,$save, FTP_ASCII)) 
  echo "successfully uploaded \n";
else 
  echo "There was a problem while uploading \n";
*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:30:35.247

你可以这样做：

```
ob_start();
imagepng($this->Picture);
$image = ob_get_clean();
$stream = stream_context_create(array('ftp' => array('overwrite' => true))); 
file_put_contents("ftp://user:pass@host/folder/".$FileName, $image, 0, $stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:40:42.930

希望这可以帮助你

```
<?

//Configuration
$ftp_server = "ftpaddress";
$ftp_user = "username";
$ftp_pass = "password";

// set up a connection or die
$conn_id = ftp_connect($ftp_server) or die("Couldn't connect to $ftp_server"); 

//trying to connect with login details
if (@ftp_login($conn_id, $ftp_user, $ftp_pass)) {
    echo "Connected! ";
} else {
    echo "Couldn't connect!";
}

//You can change it with the file name, this is for if you're upload using form.

   $myName = $_POST['name']; //This will copy the text into a variable
   $myFile = $_FILES['file_name']; // This will make an array out of the file information that was stored.
?>

<?PHP
        $destination_path = "dest/path/"; 

//your desired path for uploading)

    $destination_file = $destination_path."img.jpg";

//This will create a full path with the file on the end for you to  use, I like splitting the variables like this in case I need to use on on their own or if I'm dynamically creating new folders.

        $file = $myFile['tmp_name'];

//Converts the array into a new string containing the path name on the server where your file is.

    $upload = ftp_put($conn_id, $destination_file, $file, FTP_BINARY);// upload the file
    if (!$upload) {// check upload status
        echo "FTP upload of $destination_file has failed!";
    } else {
        echo "Uploaded $file to $conn_id as $destination_file";
    }

?> 
```

# c# - c# winform函数麻烦

> ID：12189276
> 
> 赞同：1
> 
> 时间：2012-08-30T03:01:27.890
> 
> 标签：c#, function, browser

我的功能有一些问题，我正在尝试为 webbrowser 制作功能，以便我可以更轻松地控制它

这是我的浏览器功能

```
static void Web_Browser_Data(Dictionary<string, string> Data_Array)
{
    global webBrowser1; // This didnt work

    webBrowser1.Navigate(Data_Array["WebSite_URL"]);
    webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
} 
```

我尝试通过全局（全局 webBrowser1;）包含 webBrowser1，就像在 php 上包含一些外部命令一样，但我看到它不起作用......

我得到的错误是非静态字段、方法或属性“Form.Form1.webBrowser1”需要对象引用

**更新：**
我对我的功能进行了一些更改，但我得到了一些错误，我真的找不到如何修复它......

我的新功能：

```
private void Web_Browser_Data(Dictionary<string, string> Data_Array)

{
    using (new WebBrowserDocumentCompletedEventArgs())
    {
        webBrowser1.Navigate(Data_Array["WebSite_URL"]);
        webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
    }
} 
```

我的命令代码我称之为函数是这样的：

```
Dictionary<string, string> Data_Array = new Dictionary<string, string>();

Data_Array.Add("WebSite_URL", "http://www.google.com");

Web_Browser_Data(Data_Array); 
```

我收到此错误：

“System.Windows.Forms.WebBrowserDocumentCompletedEventArgs”不包含采用“0”参数的构造函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:03:16.300

PHP 和 C# 非常不同。

您需要使您的函数非`static`，以便它可以访问类实例中的字段。

# java - 缓冲阅读器不同的类

> ID：12189279
> 
> 赞同：0
> 
> 时间：2012-08-30T03:01:45.087
> 
> 标签：java, android

主.java

```
public class Main extends Activity implements onClickListener{
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ...
    Toast.makeText(this ,testingShow(), Toast.LENGTH_SHORT).show(); //*1
    ...
    /* //*2
     *  MyProcessData hey = new MyProcessData();
     *  String yo = hey.sameTestingShow();
     *  Toast.makeText(this,yo, Toast.LENGTH_SHORT).show(); 
     */
}
public String testingShow(){
     StringBuilder appVariableDataToInitialize = new StringBuilder();
        BufferedReader reader=null;
        String line = "";
        try {
            reader = new BufferedReader(new FileReader(
                    new File(getFilesDir()+File.separator + DATA_FILE)));
            while ( (line = reader.readLine() )!= null ){
                appVariableDataToInitialize.append(line + "\n");
            }
        reader.close();

        } catch (FileNotFoundException e) {
            Toast.makeText(this, "nofile" , Toast.LENGTH_LONG).show();
            e.printStackTrace();
        } catch (IOException e) {
            // 
            e.printStackTrace();
        }

    return appVariableDataToInitialize.toString();
 }

} 
```

MyProcessData.java

```
public class MyProcessData extends MainActivity{

...

public String sameTestingShow(){
      StringBuilder appVariableDataToInitialize = new StringBuilder();
        BufferedReader reader=null;
        String line = "";
        try {
            reader = new BufferedReader(new FileReader(
                    new File(getFilesDir()+File.separator + DATA_FILE)));
            while ( (line = reader.readLine() )!= null ){
                appVariableDataToInitialize.append(line + "\n");
            }
        reader.close();

        } catch (FileNotFoundException e) {
            Toast.makeText(this, "nofile" , Toast.LENGTH_LONG).show();
            e.printStackTrace();
        } catch (IOException e) {
            // 
            e.printStackTrace();
        }

    return appVariableDataToInitialize.toString();
 }

} 
```

日志猫

```
08-30 13:21:00.245: D/AndroidRuntime(2112): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
08-30 13:21:00.245: D/AndroidRuntime(2112): CheckJNI is ON
08-30 13:21:00.325: D/AndroidRuntime(2112): --- registering native functions ---
08-30 13:21:00.675: D/AndroidRuntime(2112): Shutting down VM
08-30 13:21:00.675: D/dalvikvm(2112): Debugger has detached; object registry had 1 entries
08-30 13:21:00.685: I/AndroidRuntime(2112): NOTE: attach of thread 'Binder Thread #3' failed
08-30 13:21:00.995: D/AndroidRuntime(2120): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
08-30 13:21:00.995: D/AndroidRuntime(2120): CheckJNI is ON
08-30 13:21:01.075: D/AndroidRuntime(2120): --- registering native functions ---
08-30 13:21:01.425: I/ActivityManager(58): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.easylog/.MainActivity }
08-30 13:21:01.436: I/ActivityManager(58): Start proc com.easylog for activity com.easylog/.MainActivity: pid=2126 uid=10040 gids={}
08-30 13:21:01.465: D/AndroidRuntime(2120): Shutting down VM
08-30 13:21:01.475: D/dalvikvm(2120): Debugger has detached; object registry had 1 entries
08-30 13:21:01.955: I/global(2126): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
08-30 13:21:01.995: D/AndroidRuntime(2126): Shutting down VM
08-30 13:21:01.995: W/dalvikvm(2126): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-30 13:21:02.025: E/AndroidRuntime(2126): FATAL EXCEPTION: main
08-30 13:21:02.025: E/AndroidRuntime(2126): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.easylog/com.easylog.MainActivity}: java.lang.NullPointerException
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.os.Looper.loop(Looper.java:123)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at java.lang.reflect.Method.invokeNative(Native Method)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at java.lang.reflect.Method.invoke(Method.java:521)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at dalvik.system.NativeStart.main(Native Method)
08-30 13:21:02.025: E/AndroidRuntime(2126): Caused by: java.lang.NullPointerException
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.content.ContextWrapper.getFilesDir(ContextWrapper.java:178)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at com.easylog.MyProcessData.sameTestingShow(MyProcessData.java:56)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at com.easylog.MainActivity.onCreate(MainActivity.java:54)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-30 13:21:02.025: E/AndroidRuntime(2126):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-30 13:21:02.025: E/AndroidRuntime(2126):     ... 11 more
08-30 13:21:02.025: W/ActivityManager(58):   Force finishing activity com.easylog/.MainActivity
08-30 13:21:02.535: W/ActivityManager(58): Activity pause timeout for HistoryRecord{450a1690 com.easylog/.MainActivity}
08-30 13:21:04.235: I/Process(2126): Sending signal. PID: 2126 SIG: 9
08-30 13:21:04.255: I/ActivityManager(58): Process com.easylog (pid 2126) has died.
08-30 13:21:04.265: W/InputManagerService(58): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@45058308
08-30 13:21:12.781: W/ActivityManager(58): Activity destroy timeout for HistoryRecord{450a1690 com.easylog/.MainActivity}
08-30 13:22:54.366: D/dalvikvm(171): GC_EXPLICIT freed 153 objects / 6128 bytes in 97ms 
```

当我运行这段代码时，它完美地工作。
但是在我在 Main.java 中注释 *1 并且在 Main.java 中也取消注释 *2 之后，我得到一个错误 java.lang.NullPointerException 。
这是什么意思？它是完全相同的功能（相同的代码），所以我不知道问题出在哪里。我是编程初学者，请温柔。

# 编辑 => 已解决

1.将传递上下文的构造函数添加到MyProcessData.java

```
private final Context myC;

public MyProcessData(Context c) {
    myContext = c;
} 
```

2.edit MyProcessData => sameTestingShow()

```
reader = new BufferedReader(new FileReader(
                new File(myContext.getFilesDir()+File.separator + DATA_FILE))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:45:40.180

要从另一个类调用方法，您应该这样做：`ClassName.MethodName()`，而不是：

```
MyProcessData hey = new MyProcessData();
String yo = hey.sameTestingShow(); 
```

更新代码

```
String yo = MyProcessData.sameTestingShow(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:50:40.243

您不能使用新调用初始化 MyProcessData。任何活动都应该只由框架初始化，以便上下文是正确的。在你的情况下，你不能这样做

```
MyProcessData hey = new MyProcessData(); 
```

调用另一个 Activity 的方法是个坏主意，因为上下文不会被初始化。

如果你非常坚持。

然后像下面一样传递上下文

```
MyProcessData hey = new MyProcessData(this); 
```

然后使用此上下文获取目录`context.getFileDir()`

# javascript - ReferenceError：crimeID 未定义

> ID：12189284
> 
> 赞同：0
> 
> 时间：2012-08-30T03:02:17.377
> 
> 标签：javascript, ajax, google-maps-api-3

这部分代码下载了一个 xml 文件，用作地图上的数据源。数据放置在一个信息窗口中，该窗口有一个按钮，该按钮调用加载 php 文件的函数 confirmData(data)。但是当我单击按钮时，会出现错误提示“RefereceError：crimeID 未定义”。如何调试这个？

```
 var url = "crimeFetch3.php"; 
    downloadUrl(url, function(data) {   
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("crime");
        for (var i = 0; i < markers.length; i++) {
            var point = new google.maps.LatLng(
                parseFloat(markers[i].getAttribute("lat")),
                parseFloat(markers[i].getAttribute("lng")));
            var crimeID = markers[i].getAttribute("crimeID");   
            var id = markers[i].getAttribute("id"); 
            var type = markers[i].getAttribute("type");
            var address = markers[i].getAttribute("address");
            var date = markers[i].getAttribute("date");
            var date2 = date +  " (yyyy-mm-dd)";
            var desc = markers[i].getAttribute("desc");
            var status = markers[i].getAttribute("status");
            if(status == "confirmed"){
                var html ="<table>"+

                    "<tr><td><b>Crime: </b> </td> <td><b><u> "  + type + "</u></b></td></tr></br>" +
                    "<tr><td><b>Address: </b> </td> <td> " + address + "</td></tr></br>" +
                    "<tr><td><b>Date: </b></td> <td> " + date2 + "</td></tr></br" +
                    "<tr><td><b>Description: /b></td> <td> " + desc + " </a></td></tr></br>" +
                    "<tr><td><b>Status: </b></td> <td> " + status + "</td></tr></table>";

            }else{
                var html ="<table>"+

                    "<tr><td><b>Crime: </b></td> <td><b><u> "  + type + "</u></b></td></tr></br>" +
                    "<tr><td><b>Address: </b></b></td> <td> " + address + "</td></tr></br>" +
                    "<tr><td><b>Date: </b></td> <td> " + date2 + "</td></tr></br" +
                    "<tr><td><b>Description: </b></td> <td> " + desc + " </a></td></tr></br>" +
                    "<tr><td><b>Status: </b></td> <td> " + status + "</a></td></tr></br>" +
                    "<tr><td></td><td><input type='submit' value='Confirm' onclick='confirmData(crimeID)'/></td></tr></table>";
            }
            var icon = markerIcons[type] || {};
            var marker = new google.maps.Marker({
                            map: map,
                            position: point,
                            shadow: shadow,
                            icon: markerIcons[id],
                            title: type
            });
            bindInfoWindow(marker, map, infoWindow, html);

        }
    }); 

} 
    function bindInfoWindow(marker, map, infoWindow, html) {
        google.maps.event.addListener(marker, 'click', function() {
            infoWindow.setContent(html);
            infoWindow.open(map, marker);
        });
    }

    function downloadUrl(url, callback) {
        var request = window.ActiveXObject ?
        new ActiveXObject('Microsoft.XMLHTTP') :
        new XMLHttpRequest;

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                request.onreadystatechange = doNothing;
                callback(request, request.status);
            }
        };

        request.open('GET', url, true);
        request.send(null);
    }

    function doNothing() {};

    var xmlhttp;
    function ajaxFunction(){
        if(window.ActiveXObject){
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        else if(window.XMLHttpRequest){
            xmlhttp = new XMLHttpRequest();
        }
        else{
            alert("Get another Web Browser!");
            }

    }
    function confirmData(data) {
        var crimeNum = data;
        ajaxFunction();

        function stateChanged(){
            if(xmlhttp.readyState == 4 && xmlhttp.status==200){
                alert(xmlhttp.responseText);
            }
        }
            var url = "confirmCrime.php?crimeNum=" + crimeNum;  
                xmlhttp.onreadystatechange=stateChanged();
                xmlhttp.open("GET",url,true);
                xmlhttp.send(null);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:10:51.430

`crimeID`不是全局变量。

这段代码执行后：

```
downloadUrl(url, function(data) {
   ...
   var crimeID = ...
}); 
```

没有任何东西可以引用该变量`crimeID`了。这部分`onclick='confirmData(crimeID)`实际上超出了该代码块的范围。

更改此部分：

```
"<tr><td></td><td><input type='submit' value='Confirm' onclick='confirmData(crimeID)'/></td></tr></table>"; 
```

对此：

```
"<tr><td></td><td><input type='submit' value='Confirm' onclick='confirmData(" + crimeID + ")'/></td></tr></table>"; 
```

# c - 为什么 org-babel 不能识别 C 代码？

> ID：12189287
> 
> 赞同：3
> 
> 时间：2012-08-30T03:03:20.590
> 
> 标签：c, emacs, org-mode, org-babel

我在带有 Ubuntu 12.04 的 emacs 版本 24 上运行 org-mode 版本 7.01，我无法使用 C 源代码块。不过，默认的 emacs-lisp 语言可以正常工作。

键入 Cc ' 不会为输入 C 代码创建单独的缓冲区，而是在 minibuffer 中声明“没有这种语言模式：C 模式”。

键入 Cc Cc 只会产生以下消息，“在缓冲区 src.org 中位置 15 的第一个标题之前”，用于块正文中的任何代码选择。例如，

```
 #+begin_src C
 #include <stdio.h>
 printf("hello");
 #+end_src 
```

我当前的 org-mode-load-languages 值为 ((emacs-lisp . t) (C . t))。是否有另一个我缺少的变量可以配置？

我读过的关于使用代码块的所有文档都只涉及更改 org-mode-load-languages 变量以开始使用支持的语言。任何关于问题所在的想法或建议将不胜感激。

谢谢。

# variables - 为什么编程语言需要这种方式来声明变量？

> ID：12189288
> 
> 赞同：1
> 
> 时间：2012-08-30T03:03:22.120
> 
> 标签：variables, language-agnostic, types, programming-languages

我正在学习 C 并且我有点知道如何在 Mathematica 上编程。

在 Mathematica 上，我可以简单地通过编写来声明一个变量：

```
a=9
a="b"
a=9.5 
```

似乎 Mathematica 通过简单地阅读并在其上找到某种模式就可以自然地理解这是什么类型的变量。（整数、字符、浮点数）。我猜 Python 也有同样的功能。

在 C 上，我必须先说它是什么：

```
int num;
char ch;
float f;

num=9;
ch='b';
f=9.5; 
```

我知道这延伸到其他语言。所以我的问题是：为什么编程语言需要这种变量声明？

关于该主题的参考资料将非常有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T04:59:37.800

Mathematica、Python 和其他“动态类型”语言的变量由值和类型组成，而“静态类型”语言（如 C）则具有仅由值组成的变量。这不仅意味着存储变量需要更少的内存，而且动态类型语言必须在运行时设置和检查变量类型以了解变量包含的值类型，而静态类型语言则需要类型，因此需要进行哪些操作可以/需要对其执行，在编译时是已知的。因此，静态类型语言的速度要快得多。

此外，现代静态类型语言（如 C# 和 C++11）具有类型推断，这通常使得无需提及类型。在一些非常先进的静态类型语言（如 Haskell）中，可以在不指定类型的情况下编写大型程序，从而提供静态类型语言的效率和动态类型语言的简洁性和便利性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T04:47:13.293

声明对于将 C 编译成有效的二进制文件是必要的。基本上，这是 C 比 Mathematica 快得多的重要原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T14:25:04.500

与大多数其他答案似乎暗示的相反，这与类型无关，很容易推断（更不用说效率了）。这完全是关于*作用域*的明确语义。

在允许语言结构的非平凡嵌套的语言中，对变量所属的位置以及哪些标识符引用同一个变量有明确的规则很重要。为此，每个变量都需要一个明确的*范围*来定义它的可见位置。如果没有显式*声明*变量（无论有无类型注释），这在一般情况下是不可能的。

考虑一个简单的函数（您可以使用其他形式的嵌套范围构造类似的示例）：

```
function f() {
  i = 0
  while (i < 10) {
    doSomething()
    i = i + 1
  }
}

function g() {
  i = 0
  while (i < 20) {
    f()
    i = i + 1
  }
} 
```

怎么了？要告诉您，您需要知道`i`将在哪里绑定：在全局范围内还是在本地函数范围内？后者意味着两个函数中的变量是完全独立的，而前者将使它们共享——并且这个特定的示例永远循环（尽管全局范围可能是其他示例中的意图）。

对比上面的

```
function f() {
  var i = 0
  while (i < 10) {
    doSomething()
    i = i + 1
  }
}

function g() {
  var i = 0
  while (i < 20) {
    f()
    i = i + 1
  }
} 
```

对比

```
var i

function f() {
  i = 0
  while (i < 10) {
    doSomething()
    i = i + 1
  }
}

function g() {
  i = 0
  while (i < 20) {
    f()
    i = i + 1
  }
} 
```

这使得不同的可能含义非常清楚。

一般来说，没有好的规则能够（1）猜测程序员的真正意思，（2）在程序扩展或重构下足够稳定。程序越大、越复杂，情况就越糟糕。

避免多义性和令人惊讶的错误的唯一方法是要求变量的显式声明——这是所有合理的语言所做的。（这是语言设计 101，已经有 50 年了，不幸的是，这并不能阻止新一代的语言“设计者”一遍又一遍地重复同样的老错误，尤其是在所谓的脚本语言中。直到他们学会以艰难的方式吸取教训并纠正错误，例如 ES6 中的 JavaScript。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T05:00:28.687

编译器需要变量类型才能验证是否为变量分配了正确的值类型。潜在需求因语言而异。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T01:01:29.387

这与类型没有任何关系。考虑 JavaScript，它有没有类型的变量声明：

`var x = 8; y = 8;`

原因是 JavaScript 需要知道您是在引用旧名称还是创建新名称。上面的代码将保留任何现有的 s 不变，但会破坏周围范围内`x`现有的旧内容。`y`

有关更广泛的示例，请参阅[此答案](https://stackoverflow.com/questions/1470488/difference-between-using-var-and-not-using-var-in-javascript)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-30T04:58:59.050

从根本上说，您正在比较两种类型的语言，一种由高级虚拟机或解释器（python、Mathematica ...）解释，另一种被编译为正在执行的本机二进制文件（C、C++ ...）一台物理机，很明显，如果您可以定义自己的虚拟机，那么您可以非常灵活地了解您的语言的动态性和强大程度，而物理机则非常有限，结构和基本指令集的数量非常有限等等.. ..

虽然确实某些编译为虚拟机或解释的语言仍然需要声明类型（java，C#），但这只是为了提高性能，想象一下必须在运行时推断类型或必须使用基类型每种可能的类型，这将消耗相当多的资源，更不用说很难实现将在本机运行某些东西的 JIT（即时编译器）。

# php - 流式上传到 PHP

> ID：12189292
> 
> 赞同：2
> 
> 时间：2012-08-30T03:03:46.360
> 
> 标签：php, file-upload, stream, websocket

我`PHP`用来上传文件。在上传完成后调用的操作的服务器端很简单：

```
<?php
     print_r($_FILES);
?> 
```

输出如下：

```
Array
(
  [file] => Array
    (
        [name] => space_needlenever_lonely_alone.mp3
        [type] => audio/mp3
        [tmp_name] => /srv/www/uploads/php1TCIY9
        [error] => 0
        [size] => 3768714
    )

) 
```

问题是我根本不想在服务器磁盘上存储文件`( /srv/www/uploads/php1TCIY9)`。我实际上想将文件存储到`MongoDB`使用`GridFS`. 有没有办法直接流式传输到 PHP 而无需先将文件存储在服务器上的磁盘上？在磁盘上存储文件需要各种令人头疼的问题，例如权限和有关上传的 php ini 配置。

如果我可以将二进制数据直接流式传输到服务器端页面而不写入磁盘，那么 websocket 连接会很棒。

或者，是否可以从 JavaScript 的角度（客户端）与 MongoDB 交互并跳过与 PHP 的交互？

可能，还是白日梦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:05:17.097

在文件上传完成之前，您的 PHP 应用程序甚至不会执行。正因为如此，我相信这对于 PHP 来说是不可能的。

# ruby - 等待 webdriver 错误解析主机

> ID：12189295
> 
> 赞同：0
> 
> 时间：2012-08-30T03:04:21.300
> 
> 标签：ruby, watir, watir-webdriver

只需一个简单的脚本来自动化一个 firefox 浏览器：只需一个简单的脚本来自动化一个 firefox 浏览器：

```
require 'rubygems'
require 'watir-webdriver'
# Initialize watir firefox browser
$browser = Watir::Browser.new :ff , :profile => 'default' 
```

导致以下我无法弄清楚的错误。是否有 TCP 端口被阻止或其他原因？。顺便说一句，我正在使用我的办公室电脑，代码在我的家用电脑上运行良好。

```
C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: No such
host is known.  (SocketError)
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `open'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:762:in `connect'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:744:in `start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1284:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/remote/http/default.rb:76:in `response_for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/remote/http/default.rb:38:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/remote/http/common.rb:40:in `call'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/remote/bridge.rb:598:in `raw_execute'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/remote/bridge.rb:92:in `create_session'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/remote/bridge.rb:68:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/firefox/bridge.rb:28:in `initialize'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/common/driver.rb:31:in `new'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver/common/driver.rb:31:in `for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.22.2/lib/s
elenium/webdriver.rb:65:in `for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir
-webdriver/browser.rb:35:in `initialize'
        from sic_class.rb:8:in `new'
        from sic_class.rb:8:in `<main>' 
```

没有代理，我使用的是 windows 7，watir webdriver 0.6.1 和 firefox 13.01

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:12:06.157

如果要安装 gems，则必须在 PATH 中设置 http_proxy 环境变量。但这会导致 watir-webdriver 出现上述问题，在删除 http_proxy 变量后它对我有用。然后它使用浏览器中的代理设置。

# json - 如何将 MtGox 代码数据添加到网站？

> ID：12189296
> 
> 赞同：0
> 
> 时间：2012-08-30T03:04:23.733
> 
> 标签：json, api, jsonp, ticker

我尝试了各种方法，目前如下

```
$(document).ready(function(){
    $('#stage').click(function(){
jQuery.getJSON('https://mtgox.com/api/1/BTCUSD/ticker?callback=showTick',function(ticker){
            $('div#tickerbox').html(ticker)}
    )})}) 
```

没头绪 。. .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:49:06.070

我构建了 php 工具来简化此操作，提供纯文本代码、html 代码，甚至图像代码（以及其他工具，如 rss 代码提要）。

看看代码： [https ://github.com/neofutur/bitcoin_simple_php_tools](https://github.com/neofutur/bitcoin_simple_php_tools)

更多细节和例子： [https ://bitcointalk.org/index.php?topic=68205](https://bitcointalk.org/index.php?topic=68205)

这些工具包括一个 30 秒的缓存系统，因此您不会经常访问 api，从而避免被反 ddos​​ 系统黑名单

我不认为 javascript 是添加 mtgox 代码的最佳主意，但如果您真的希望它是 js，则至少有一个 javascript 实现，即这些代码的 firefox 插件： [https ://github.com/joric/ mtgox-ticker](https://github.com/joric/mtgox-ticker) https://github.com/joric/mtgox-ticker/blob/master/lib/main.js

另外，要知道 SE 也有一个专门的空间来解决比特币相关的问题： [http](http://bitcoin.stackexchange.com) : //bitcoin.stackexchange.com 你可能在这里有更多的答案，所有比特币用户都在这里；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:09:14.820

不幸的是，在**撰写本文时，** **Mt. Gox API 不支持 JSONP 或[CORS](http://www.w3.org/TR/cors/)**。他们似乎很容易添加 JSONP 支持，所以如果他们在不久的将来添加它，这个答案应该会有所帮助；然而，在那之前，这个答案并没有帮助。这个答案的其余部分假设现在是未来并且他们支持 JSONP。

* * *

首先，您需要更改`callback=showTick`为，`callback=?`以便 jQuery 知道将*其*自动生成的回调名称放在那里。然后，当您的回调被调用时，`ticker`将是一个解码的 JSON 对象，而不是一个字符串，因此您需要从那里提取您想要的信息。例如，要显示平均价格：

```
jQuery.getJSON('https://mtgox.com/api/1/BTCUSD/ticker?callback=?', function(data) {
    // We can't use .return because return is a JavaScript keyword.
    alert(data['return'].avg.display_short);
}); 
```

# sql - 用于范围查找的快速表索引

> ID：12189297
> 
> 赞同：3
> 
> 时间：2012-08-30T03:04:25.647
> 
> 标签：sql, postgresql, indexing, range-types

我有一个大约 450 万行的 Postgres 表。列基本上只是

```
low BIGINT,
high BIGINT,
data1,
data2, 
... 
```

当您查询此表时，您有一个长整数，并希望找到与`low`包含`high`该值的范围相对应的数据。索引此表以进行快速查找的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T03:09:01.163

具有相反排序顺序的[**多列索引：**](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)

```
CREATE INDEX tbl_low_high_idx on tbl(low, high DESC); 
```

这样，索引可以向前扫描到`low`足够高的位置，然后取出所有行直到`high`太低 - 一次扫描。[这就是为索引实现排序顺序](http://www.postgresql.org/docs/current/interactive/indexes-ordering.html)的主要原因：在具有不同顺序的多列索引中组合不同的排序顺序。基本上，b-tree 索引可以以几乎相同的速度在两个方向上遍历，因此单列索引几乎不需要`ASC`/ 。`DESC`

* * *

您可能还对PostgreSQL **9.2的新**[**范围类型**](http://www.postgresql.org/docs/9.2/interactive/rangetypes.html)感兴趣。可以[使用这样的](http://www.postgresql.org/docs/9.2/interactive/rangetypes.html#RANGETYPES-GIST)[**GiST 索引**](http://www.postgresql.org/docs/9.2/interactive/rangetypes.html#RANGETYPES-GIST)进行索引：**[](http://www.postgresql.org/docs/9.2/interactive/rangetypes.html#RANGETYPES-GIST)**

 ****```
CREATE INDEX tbl_idx ON tbl USING gist (low_high); 
```

应该使这种形式的查询执行得非常快：

```
SELECT * FROM tbl WHERE my_value <@ low_high; 
```

`<@`是[“元素包含在”运算符](http://www.postgresql.org/docs/9.2/interactive/functions-range.html#RANGE-OPERATORS-TABLE)中。****

# php - 将 php 变量传递并更新到 javascript

> ID：12189301
> 
> 赞同：0
> 
> 时间：2012-08-30T03:04:38.937
> 
> 标签：php, javascript, variables, option

有没有办法可以将 php 选项值变量 $option_value['price'] 作为字符串传递给 javascript，然后每次选择不同的选项时，javascript 都会使用新值“更新”字符串。我试过 onchange() 但一定做错了什么。我确定我的错误是因为 php 是服务器端而 javascript 是客户端，但我不知道如何让两者按照我的意愿行事。

```
<?php if ($options) { ?>
    <?php foreach ($options as $option) { ?>
    <?php if ($option['type'] == 'select') { ?>
    <span id="option-<?php echo $option['product_option_id']; ?>" class="option">

<select name="option[<?php echo $option['product_option_id']; ?>]" onchange="getIt(this)">
        <?php foreach ($option['option_value'] as $option_value) { ?>
        <option value="<?php echo $option_value['product_option_value_id']; ?>"><?php echo $option_value['name']; ?>
        <?php if ($option_value['price']) { ?>
        <?php $option_value['price']; ?>
        <?php } ?>
        </option>
        <?php } ?>
      </select>
</span> 
```

我努力了：

```
<script type="text/javascript"> 
function getIt(elm) {
var val = elm.options[elm.selectedIndex].text;
window.alert(val);
}
</script> 
```

和

```
<script type="text/javascript">
function getIt() {
var val = "<?php $option_value['price']; ?>";
window.alert(val);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:09:48.510

Here is an example how you can do it. What you have to do are:

1.  Analyze the code (notice that I use jquery from google's account. You will need to at some point install jquery on your web site and use this one instead of the google's one.
2.  Build your `fruits` array so it looks like the one in the example.

I have prepared page that will show you this working here: [http://jsfiddle.net/7uudp/](http://jsfiddle.net/7uudp/)

Below is what it contains. Notice that this example does not use your variables. You will need to use them the way you want/need. I have also defined `entry_fruit` to show you how to chose the default one to be selected. Hope it will help.

```
<html>
<head>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript">

fruits = [{n:"apple",p:1},{"n":"strawbery",p:3}];
entry_fruit="strawbery";

function build_select(select,list,which)
{
    $.each( list, function(i,v){
         var selopt="" ;
         if ( v.n == which ) selopt="selected" ;
         $(select).append("<option "+selopt+" value="+i+">"+v.n+" - $"+v.p+"</option>");
     }) ;
}

$(document).ready(function(){
    build_select($("select[name=fruits]"),fruits,entry_fruit);
     $("select[name=fruits]").change(function(){
         alert("Price is $" + fruits[$(this).val()].p);
     }) ;
})

</script>
</head>
<body>
<select name="fruits"></select>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:09:33.517

```
<script type="text/javascript">
function getIt() {
var val = "<?php echo $option_value['price']; ?>";
window.alert(val);
}
</script> 
```

像这样？在我看来，您只是忘记了“回声”。

编辑-

```
<script type="text/javascript">
var val = "<?php echo $option_value['price']; ?>"; 
function getIt(elm) {
    val = elm.options[elm.selectedIndex].text;
    window.alert(val);
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T03:14:32.360

好的，撤销我之前的条目。

您需要做的是在匹配您的元素时`selected`向您的元素添加关键字`<option>``option_value['price']`

现在你需要以不同的方式排列你的数据。在您的 javascript 中，准备一个将映射`$option_value['product_option_value_id']`到`$option_value['price'];`. 当您构建您的, 时`<select>`，`$option_value['product_option_value_id']`请检查其价格是否与最初从 php.ini 提供的价格相匹配。

您的 getIt 将简单地获取该值，在该地图中找到它，并使用窗口`<option value="___">`将其显示给用户。`alert()`

# php - 如何在php中获取两个单词之间的差异

> ID：12189302
> 
> 赞同：0
> 
> 时间：2012-08-30T03:04:49.623
> 
> 标签：php, string

我的网站有一个搜索引擎。我已经安装了一个功能，比如谷歌的“你的意思是 xxx 吗？”。它返回更正后的字符串。那么，有没有办法让我可以比较那些不正确和正确的字符串，并像谷歌那样将更正的单词加粗？

这是我的代码：

```
 <?php
 function suggestion($word){
    $first_word=substr($word,0,1);
    $first_word=strtoupper($first_word);
    $query="SELECT * FROM words WHERE UPPER(LEFT(name,1))='$first_word'";
    $db_words=mysql_query($query);
    $flag=true;
    while($row_words=mysql_fetch_array($db_words)){
        similar_text($row_words['name'],$word,$percent);
        if(($percent>50)&&($percent!=100)){
            echo '<strong>Did you mean:</strong><br>';
            echo $row_words['name'],'<br>';
            $flag=false;
        }
    }
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:07:48.400

根据下面的评论，您正在寻找这样的东西：

```
function corrected($bad, $good, $wholephrase) {
    return preg_replace('#\b'. preg_quote($bad) . '\b#g', '<em>' . htmlspecialchars($good) . '</em>', $wholephrase);
} 
```

对于那些对如何完成拼写错误检测和替代建议感兴趣的人，请看这里：[Levenshtein Distance](http://php.net/manual/en/function.levenshtein.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:06:13.790

没人帮我！！;-(

这是我创建的代码：

```
function suggestion($word){
    $first_word=substr($word,0,1);
    $first_word=strtoupper($first_word);
    $query="SELECT * FROM words WHERE UPPER(LEFT(name,1))='$first_word'";
    $db_words=mysql_query($query);
    $wd=explode(" ",$word);
    while($row_words=mysql_fetch_array($db_words)){
        similar_text($row_words['name'],$word,$percent);
        if(($percent>50)&&($percent!=100)){
            $rw=explode(" ",$row_words['name']);
            $d=array_udiff($rw,$wd,'strcasecmp');
            for($i=0;$i<count($rw);$i++){
                if(in_array($rw[$i],$d)){
                    $rw[$i]="<em>".$rw[$i]."</em>";
                }
            }
            echo '<strong>Did you mean:</strong><br>';
            foreach($rw as $r){
                echo $r," ";
            }
            echo '<br>';
        }
    }
} 
```

# c# - 哪些构造使用 .NET 4 中的 ThreadPool？

> ID：12189305
> 
> 赞同：3
> 
> 时间：2012-08-30T03:04:56.777
> 
> 标签：c#, .net, multithreading, parallel-processing, threadpool

这个问题最好征求高级用户的意见。

我正在优化一些数字运算代码，并有一些空闲的处理器内核。为了有效地利用它们，我正在研究一些使用任务`Task.StartNew`（这里根本不涉及 UI。

这里的一个关键元素是使用 ThreadPool，它可以为短期运行的任务带来性能优势，而不会产生线程创建的开销。然而，在某些情况下，更自然地考虑循环而不是任务（例如 Parallel.For）。

我了解任务使用 ThreadPool，但不确定 Parallel.For。问题是：

*   哪些构造使用了 ThreadPool？
*   可以将 Parallel.For 配置为使用 ThreadPool 还是总是会产生线程创建开销？
*   不是主要问题的一部分，但任何与最大化并行性的链接都会有所帮助。

请注意，此问题特定于 .NET 4。目前无法选择升级到 4.5。

**更新**：
根据 Daniel Kinsman 的评论，考虑以下几点：

```
System.Threading.Tasks.Parallel.For(0, 100, i => { System.Console.WriteLine("Is ThreadPool @ low priority: " + System.Threading.Thread.CurrentThread.IsThreadPoolThread); });
System.Diagnostics.Process.GetCurrentProcess().PriorityBoostEnabled = true;
System.Diagnostics.Process.GetCurrentProcess().PriorityClass = System.Diagnostics.ProcessPriorityClass.RealTime;
System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Highest;
System.Threading.Tasks.Parallel.For(0, 100, i => { System.Console.WriteLine("Is ThreadPool @ high priority: " + System.Threading.Thread.CurrentThread.IsThreadPoolThread); }); 
```

如果您有一台多核机器，IsThreadPoolThread 将根据您运行的应用程序数量返回不确定的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:10:32.717

`Parallel.For`，**默认情况下**，'always' 使用线程池来运行任务并且不会产生线程创建开销。

在当前版本的 .Net 4.0 CLR 中，`Parallel.For`内部使用`ThreadPoolTaskScheduler`类（一个内部类）来运行其任务。当然，这是内部细节可能会发生变化，但很可能`Parallel.For`会继续使用 ThreadPool 来运行其任务。如果您不想承担这种“风险”，那么您可以随时编写自己的[TaskScheduler](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)并将其提供给`Parallel.For`使用[ParallelOptions 类](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)

> 如果您有一台多核机器，IsThreadPoolThread 将根据您运行的应用程序数量返回不确定的结果。

解释：

ThreadPoolTask​​Scheduler 类是一个优化的任务调度程序，如果没有必要，它会尽量不在线程上运行任务，即如果任务可以立即执行，它会在可能不是线程的**当前线程**`ThreadPool`上执行。您看到的“假”输出适用于这种情况。但是如果它不能立即运行任务，它总是使用线程池将任务排队等待以后执行。

请注意，在这两种情况下，都没有线程创建“开销”（不完全正确，因为 ThreadPool 本身可能决定在某些启发式方法中在池中包含新线程）

您可以使用以下代码来确认这一点：

```
Thread.CurrentThread.Name = "MyThread";
System.Threading.Tasks.Parallel.For(0, 100, i => Console.WriteLine(i + ". Is ThreadPool: " + Thread.CurrentThread.IsThreadPoolThread + " Name: " + Thread.CurrentThread.Name)); 
```

您将能够注意到，对于所有“假”情况，线程名称都是“MyThread”。

关于最大化并行性，CPU 绑定的工作只能在可用 CPU 内核数量的范围内进行并行化。TPL 考虑到了这一点，非常适合和优化 CPU 绑定任务的并行计算。通过使用 TPL，您走在了正确的道路上，应该继续沿着这条道路前进 :)

# django - 在 Django 中设置环境变量的常见做法？

> ID：12189311
> 
> 赞同：0
> 
> 时间：2012-08-30T03:05:28.967
> 
> 标签：django

我对 Django 框架很陌生。我正在编写一个应用程序，我想在服务器运行之前设置一些环境变量。是否有标准化的方法来执行此操作（即在服务器启动完成之前运行的设置脚本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:20:29.197

这取决于您要使用的网络服务器。例如带有 mod_wsgi 的 apache，您可以在`os.environ`. 参考[WSGI IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)

但是，通常更新`os.environ`in`setttings.py`也可以。

# c# - System.Type 来自

> ID：12189313
> 
> 赞同：0
> 
> 时间：2012-08-30T03:05:41.620
> 
> 标签：c#, .net, generics

我怎样才能得到一个（泛型函数中的类型）的 System.Type？我需要获取类名的字符串表示形式。

```
typeof(T).GetType().Name 
```

给了我'runtimetype'，我不想要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:15:27.833

做就是了：

```
typeof(T) 
```

这将导致您的通用类/方法的特定实例`T`的实际类型。`T`如果`T`碰巧是`System.String`，您将获得表示类型的实例`System.String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:14:27.613

可以这样用吗？

```
Type thisType = this.GetType();   // Get your current class type
thisType.FullName                 // Get your Assembly Name. 
```

**在你的课堂上**编辑，****

 **```
Type thistype = TypeOf(T);
thisType.Name                    // Get you class name 
```**

# sql-server - 无效的对象名称 sysservers

> ID：12189320
> 
> 赞同：0
> 
> 时间：2012-08-30T03:06:07.937
> 
> 标签：sql-server, vb.net, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。这是我的查询：

```
SELECT * FROM sysservers 
```

当我在 SQL Server 中执行它时它工作正常，但是当我在 VB.net 中使用查询时出现此错误：

> 无效的对象名称“sysservers”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:17:03.250

您不应该再使用`sysservers`- 这是一个 2000 系统表，仅出于向后兼容性的原因提供。您应该使用`sys.servers`并且您可能还想明确说明在哪里可以找到它：

```
SELECT * FROM master.sys.servers; 
```

# mysql - SQL，为什么显式查找数据比 SELECT * 快

> ID：12189321
> 
> 赞同：2
> 
> 时间：2012-08-30T03:06:24.023
> 
> 标签：mysql, sql, django, database-design, django-models

我正在阅读 Django Book 并遇到了有趣的声明。

```
Notice that Django doesn’t use SELECT * when looking up data and instead lists
 all fields explicitly. This is by design:
 in certain circumstances SELECT * can be slower, 
```

我从[http://www.djangobook.com/en/1.0/chapter05/得到这个](http://www.djangobook.com/en/1.0/chapter05/)

所以我的问题是有人能解释一下为什么`SELECT *`比明确地调用每一列要慢。如果你能给我一些例子就好了。或者如果你认为相反（没关系），你能解释一下为什么吗？

**更新：**

那是表：

```
BEGIN;
CREATE TABLE "books_publisher" (
    "id" serial NOT NULL PRIMARY KEY,
    "name" varchar(30) NOT NULL,
    "address" varchar(50) NOT NULL,
    "city" varchar(60) NOT NULL,
    "state_province" varchar(30) NOT NULL,
    "country" varchar(50) NOT NULL,
    "website" varchar(200) NOT NULL
); 
```

这就是 Django 的调用方式`SELECT * FROM book_publisher`：

```
SELECT
    id, name, address, city, state_province, country, website
FROM book_publisher; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:56:05.290

1.  性能（仅当您选择的列少于表中的列时才重要
2.  我不确定 Django 是如何工作的；但是在某些语言/数据库驱动程序中，如果您更改表架构（例如添加新列），“select *”将导致错误。这是因为 DB 驱动程序“缓存”了表模式，现在它的内部模式与表模式不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:13:10.817

如果您有 100 列，`SELECT *`将返回所有列的数据。显式列出列将减少返回的列，从而减少服务器和应用程序之间传输的数据量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:29:36.227

我认为在这种确切的情况下不会有性能差异，这正是*在某些情况下`SELECT *`可以变慢*的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T03:13:17.073

在许多情况下，这显然不是更快，当其中一个更快时，它会略微领先：自己检查，对很多查询进行基准测试:)

在某些情况下，仅选择某些列可能会更快，包括仅选择组合索引上的列、避免读取整行以及避免访问 MySQL 上的 BLOB 或 TEXT 列时。

自然，如果您选择更少的列，您将在 MySQL 和您的应用程序之间传输更少的数据

# iphone - Iphone：显示空白的 Facebook 登录对话框

> ID：12189326
> 
> 赞同：0
> 
> 时间：2012-08-30T03:07:33.820
> 
> 标签：iphone, facebook, login, dialog, key

我已经在 iphone 应用程序中集成了 facebook sdk。它工作正常。但是，突然间，它停止在对话框中显示“Facebook 登录页面”，如屏幕截图所示。我尝试使用不同的 facebook api 密钥，秘密，它工作正常，但它不适用于我的旧 api 密钥，秘密。请帮助我。

谢谢你。

![在此处输入图像描述](../Images/354cec0a037e94b7fbca192f39374c28.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T10:00:44.337

我遇到的这个问题和你的完全一样。

我设法弄清楚我设置的用户代理无法被 facebook 登录对话框（这是一个 web 视图）识别。

Facebook 登录对话框采用默认用户代理，应如下所示：Mozilla/5.0（iPhone 模拟器；CPU iPhone OS 5_0，如 Mac OS X）AppleWebKit/534.46（KHTML，如 Gecko）Mobile/9A334。因此，保留用户代理默认值可能是一个不错的尝试。

不知道你是否还有这个问题，因为这个问题已经很久了。只是为面临此问题并正在寻找可能解决方案的人留言。

# javascript - 使用 JQuery 获取选择标签的 innerHTML 的值

> ID：12189332
> 
> 赞同：0
> 
> 时间：2012-08-30T03:08:53.047
> 
> 标签：javascript, jquery, html, select

我在这里有这个选择标签

```
<select id = "options" style = "width:150px;">      
    <option>Artist Name</option>
    <option>Track Name</option>
    <option>Date Uploaded</option>
</select> 
```

我正在使用 JQuery 获取当前选定的 innerHTML 值

```
 var option = $("#options").innerHTML;
   console.log(option); 
```

但是每次我打印它只返回一个未定义的值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T03:11:09.990

jQuery 对象没有`innerHTML`属于 html dom 元素对象的属性。

```
var option = $("#options option:selected").html();
console.log(option); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T03:10:37.920

您只需：

```
 $("#options").val();
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<select id = "options" style = "width:150px;">      
    <option>Artist Name</option>
    <option>Track Name</option>
    <option>Date Uploaded</option>
</select>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:25:06.403

```
<form>
<select id = "options" style = "width:150px;">      
    <option>Artist Name</option>
    <option>Track Name</option>
    <option>Date Uploaded</option>
</select>
<input type="text" id="optionstext"/>
<input type="text" id="optionshtml"/>
</form>

    $('#options').change(function(){

        $('#optionstext').val($('#options').text());
        $('#optionshtml').val($('#options').html());

    });

http://jsfiddle.net/pKsC8/8/ 
```

# .htaccess - 配置页面后出现 500 错误，使用子存储设置 magento

> ID：12189337
> 
> 赞同：0
> 
> 时间：2012-08-30T03:09:27.713
> 
> 标签：.htaccess, magento, installation

我已经创建了一个工作 magento 站点现在我正在尝试基于现有工作站点创建一个测试环境。它位于同一台服务器上，并将位于不同的子域下。

workingSubDomain.domain.com/store/ newSubDomain.domain.com/store/

我保持子存储目录结构与工作站点相同。

我已经将所有文件夹设置为 755，并将 app/etc/、media、var 设置为 777

在安装向导配置页面上单击继续后，我收到 500 错误。

服务器日志文件显示以下内容：

```
PHP Fatal error: Call to a member function insert() on a non-object in /var/www/vhosts/domain.com/magentoFolder/subStore/app/code/core/Mage/Core/Model/Resource/Resource.php on line 133, referer: http://newSubDomain.domain.com/subStore/index.php/install/wizard/config/?config%5Blocale%5D=en_US&config%5Btimezone%5D=America%2FChicago&config%5Bcurrency%5D=USD 
```

我在 .htaccess 文件夹中尝试了以下 url 重写：

```
RewriteEngine On
RewriteBase /clint/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /clint/index.php [L] 
```

和

```
RewriteBase /magentoFolder/subStore 
```

和

```
RewriteBase /magentoFolder/subStore/ 
```

和

```
RewriteBase /magentoFolder/ 
```

和

```
RewriteBase /subStore/ 
```

我也清除了 var 文件夹。

任何建议将不胜感激。

这是 resource.php 文件中第 133 行的代码：

```
 * Set module version into DB
 *
 * @param string $resName
 * @param string $version
 * @return int
 */
public function setDbVersion($resName, $version)
{
    $dbModuleInfo = array(
        'code'    => $resName,
        'version' => $version,
    );

    if ($this->getDbVersion($resName)) {
        self::$_versions[$resName] = $version;
        return $this->_getWriteAdapter()->update($this->getMainTable(),
                $dbModuleInfo,
                array('code = ?' => $resName));
    } else {
        self::$_versions[$resName] = $version;
        return $this->_getWriteAdapter()->insert($this->getMainTable(), $dbModuleInfo);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:12:24.837

这不是 apache 错误，而是 php 错误。看一下`/var/www/vhosts/domain.com/magentoFolder/subStore/app/code/core/Mage/Core/Model/Resource/Resource.php`，第**133行**

可能是数据库连接错误。

# java - java socket InputStream 在客户端和服务器上都挂起/阻塞

> ID：12189338
> 
> 赞同：4
> 
> 时间：2012-08-30T03:09:30.613
> 
> 标签：java, sockets

**大家好**

我最近正在开发一个旨在远程关闭浏览器的小程序。基本流程如下：
服务器端：

1.  创建一个 SocketServer 来监听某个特定的端口。
2.  接受一个连接并创建一个对应的socket对象
3.  从创建的套接字中读取 InputStream（在此操作中被阻塞）

* * *

客户端：

1.  创建一个套接字对象以建立与服务器的连接。
2.  通过将字节写入 OutputStream 来发送关闭服务器端浏览器的命令。
3.  在套接字的 InputStream 上使用 read() 从服务器读取反馈（在此操作上被阻塞）

* * *

下面的代码：

**Server.java**

```
package socket;

import java.io.IOException;
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Enumeration;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Server {

private static ExecutorService es = Executors.newFixedThreadPool(5);

public static void main(String[] args) throws IOException {

    InetAddress targetAddress = null;
    NetworkInterface ni = NetworkInterface.getByName("eth2");
    System.out.println(ni);
    Enumeration<InetAddress> inetAddresses = ni.getInetAddresses();
    while(inetAddresses.hasMoreElements()) {
        InetAddress inetAddress = inetAddresses.nextElement();
        if(inetAddress.toString().startsWith("/10")) {
            targetAddress = inetAddress;
            break;
        }
    }
    ServerSocket sSocket = new ServerSocket(11111, 0, targetAddress);
    while(true) {
        System.out.println("Server is running...");
        Socket client = sSocket.accept();
        System.out.println("Client at: " + client.getRemoteSocketAddress());
        es.execute(new ClientRequest(client));
    }

}
} 
```

**客户端请求.java**

```
package socket;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;

public class ClientRequest implements Runnable {

private Socket client;

public ClientRequest(Socket client) {
    this.client = client;
}

@Override
public void run() {

    try {
        System.out.println("Handled by: " + Thread.currentThread().getName());
        // get input/output streams for client socket
        InputStream cis = client.getInputStream();
        OutputStream cos = client.getOutputStream();

        // buffer size : 1024 ?
        byte[] buffer = new byte[1024];
        int recvSize;
        int totalRecvSize = 0;
        while(-1 != (recvSize = cis.read(buffer, totalRecvSize, 1024 - totalRecvSize))) {
            totalRecvSize += recvSize;
        }

        String command = new String(buffer, "utf-8");
        System.out.println("Command from client: " + command);

        String commandNative = CommandMap.getNativeCommand(command.trim());
        if(null != commandNative) {
            Process np = Runtime.getRuntime().exec(commandNative);
            InputStream is = np.getInputStream();
            byte[] bufferProcess = new byte[1024];
            int bytesRead;
            int totalBytesRead = 0;
            while(-1 != (bytesRead = is.read(bufferProcess, totalBytesRead, 1024 - totalBytesRead))) {
                totalBytesRead += bytesRead;
            }
            // give feed back of process output
            cos.write(bufferProcess);

            // close process input stream
            is.close();
        } 
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if(null != client) {
            try {
                client.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

最后，**Client.java**

```
package socket;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.nio.charset.Charset;

public class Client {

private static final int BUF_SIZE = 1024;

// feedback message size will not exceed 1024 bytes
private static final byte[] BUFFER = new byte[BUF_SIZE];

public static void main(String[] args) throws UnknownHostException, IOException, InterruptedException {

    Socket socket = new Socket("10.117.37.176", 11111);
    System.out.println("Connected to Server...");
    OutputStream os = socket.getOutputStream();
    InputStream is = socket.getInputStream();

    String command = "kill ie";
    byte[] commandBytes = command.getBytes(Charset.forName("utf-8"));

    System.out.println("Send: " + command);
    os.write(commandBytes);
    System.out.println("After send: " + command);

    int totalRecv = 0;
    int recvSize;

    while(-1 != (recvSize = is.read(BUFFER, totalRecv, BUF_SIZE - totalRecv))) {
        totalRecv += recvSize;
    }

    String feedback = new String(BUFFER, "utf-8");
    System.out.println("Feedback: " + feedback);

    socket.close();
}
} 
```

重申问题：

*   服务器端无法通过在套接字的 InputStream 对象上调用 read(buffer, offset, len) 来读取命令。它阻塞。
*   客户端无法通过在其套接字的 InputStream 对象上调用 read(buffer, offset, len) 来读取反馈。它阻塞。
*   但是当我注释掉Client.java中的反馈读取操作时，Server和Client都可以正常工作。

* * *

我想知道这些代码中隐藏的原因是什么？
希望有人可以帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T03:32:57.507

您的套接字读取代码正在读取直到 EOF。在关闭套接字之前，您不会收到 EOF。因此，您的代码永远不会继续。

如果您只想在套接字连接上发送单个命令，则在编写命令后关闭 OutputStream（使用`Socket.shutdownOutput()`）。

如果您想在单个套接字连接上发送多个命令，那么您需要想出一种分隔每个命令的方法（[此处为简单示例](https://stackoverflow.com/a/11588369/552759)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T09:58:28.587

您正在阅读直到两端的 EOS，这是一个糟糕的选择，因为您无法“发送” EOS 而不会失去在同一连接上发送更多数据的能力。你需要重新设计你的应用程序协议，这样你就可以一次读取一个命令，而不需要关闭连接来完成它。例如，发送行，或长度字前缀，或诸如 XML 或 Java 对象序列化之类的自描述协议，或者您可以通过 DataInputStream 读取的任何内容，而无需依赖 EOFException。

# lua - 如何在 Awesome WM 中聚焦客户

> ID：12189340
> 
> 赞同：4
> 
> 时间：2012-08-30T03:09:36.923
> 
> 标签：lua, awesome-wm

我有应该关注的客户实例。我发现只有以下方法可以将重点放在客户身上：

*   focus.bydirection (dir, c) - 通过给定的方向关注客户。
*   focus.byidx (i, c) - 通过相对索引关注客户。
*   focus.filter (c) - 过滤掉我们不想被处理的窗口
*   重点。focus.history.add (c) - 更新客户端焦点历史。
*   focus.history.delete (c) - 从焦点历史中删除客户端。
*   focus.history.get (screen, idx) - 获取最新的焦点客户端
*   历史上的画面。focus.history.previous () - 关注历史上的前一个客户端。

但是，如果我已经有一个实例，如何聚焦客户呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T17:26:41.920

你应该试试：

```
client.focus = c
c:raise() 
```

`c`是您要关注的客户。

# javascript - Chrome 扩展：加载窗口后执行脚本

> ID：12189348
> 
> 赞同：1
> 
> 时间：2012-08-30T03:10:38.830
> 
> 标签：javascript, google-chrome-extension

我正在尝试构建我的第一个 Chrome 扩展程序。基本上我想要做的是，单击扩展图标，从当前页面获取页面标题、URL 和选定的内容，打开一个新窗口，并将该数据传递到这个新窗口中。

我已经完成了大部分工作，但是在窗口完全加载后我无法弄清楚如何执行代码。

[这是扩展名的所有文件的要点](https://gist.github.com/369fe266176d45b488fd)。

我想在加载窗口后执行 contentscript.js 和 insertdata.js 代码，并在页面上使用 jQuery（如果存在）。出于某种原因，即使我设置了一个间隔来不断检查 $ 是否是一个函数，它从来都不是。我想我不明白为什么我无法访问页面上可用的 JS 功能。

此外，所有这些代码似乎有点令人费解，所以我想知道是否有更好的方法来实现这一点。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:33:08.733

看看“测试截图扩展”：http: [//developer.chrome.com/trunk/extensions/samples.html](http://developer.chrome.com/trunk/extensions/samples.html)

此扩展程序用于屏幕截图，但如果有屏幕截图，它会等待，然后在新标签页中打开该信息。

# c++ - QT 按钮按下小部件

> ID：12189352
> 
> 赞同：2
> 
> 时间：2012-08-30T03:11:26.557
> 
> 标签：c++, qt

使用 Qt 很新。我有一个自定义小部件，我需要接收按钮按下，然后从该按钮按下找到鼠标在小部件上的位置。不幸的是，目前 mousePressEvent(QMouseEvent *me) 似乎无法正常工作。所以我想知道我到底做错了什么，下面的代码；

头文件：

```
#ifndef TILESHEETPANE_H
#define TILESHEETPANE_H

#include <QWidget>
#include "global.h"

class tileSheetPane : public QWidget
{
   Q_OBJECT

 public:
     tileSheetPane(int scnWidth, Global *global, QWidget *parent);

 protected:
     void mousePressEvent(QMouseEvent *me);
     void paintEvent(QPaintEvent *);

 private:
     Global *tempGlobal;
     QPoint cursorPos;
     int tileSheetPaneWidth, tileSheetPaneHeight, renderOffsetY;
 };

 #endif // TILESHEETPANE_H 
```

源文件：

```
 #include <QPainter>
   #include <QMouseEvent>
   #include "tilesheetpane.h"

   //Constructor & Paint Event .. 

   void tileSheetPane::mousePressEvent(QMouseEvent *me)
   {
        cursorPos = me->pos();
   } 
```

CursorPos 的值只是在初始化为 0 时表示。所以任何帮助将不胜感激 :)，正如我所说，使用 QT 很新可能仅在 2 天前开始，所以我仍在试图弄清楚事情：D。

编辑; 因此，在尝试了评论中的一些建议之后，似乎没有任何效果。我确实有 setMouseTracking(true) 但仍然没有。我按照建议在函数中插入了一个 qDebug 调用，似乎 mousePressEvent 永远不会被调用。

```
 void tileSheetPane::mousePressEvent(QMouseEvent *me)
 {
     cursorPos = me->pos();

     //These Never Show Up!
     qDebug() << me->pos().x();
     qDebug() << me->pos().y();
 } 
```

某些东西可能正在阻止或阻止这个被调用，但我不确定它可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:09:53.943

试试这个：

```
qDebug() << me->pos()->x(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:06:07.007

所以我只是无法让鼠标点击工作，所以在谷歌上进行了一些搜索后，我最终找到了以下视频； [http://www.youtube.com/watch?v=E29KiTRYpjk](http://www.youtube.com/watch?v=E29KiTRYpjk)

由于我的小部件还是相当小，我基本上只是重新做了整个事情。但它是值得的。基本上我删除了我的旧文件，创建了一个 Qt 设计器表单，在我的 mainWindow.ui 文件中添加了一个新的小部件，将它提升为使用“tileSheetPane”，就是这样。现在完美运行：D。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T20:06:55.647

在 QWidget-child-class 的构造函数中添加`setMouseTracking(true);`

没有这个，您的小部件将不会跟踪鼠标位置。

[`MouseTracking`财产文件](http://doc.qt.nokia.com/4.7-snapshot/qwidget.html#mouseTracking-prop)

# java - 子剪辑安装和设置

> ID：12189355
> 
> 赞同：0
> 
> 时间：2012-08-30T03:11:57.463
> 
> 标签：java, eclipse, svn, subclipse

我过去曾使用`Subclipse`过，但从未自己进行过完整的安装和设置。我尝试按照几个网站上的说明进行操作，但似乎无法正常工作。我在 Eclipse 中安装了它，我在 Tigris 上有一个帐户，但我不知道如何创建一个新项目来共享。从在 Eclipse 中添加新存储库开始，我需要帮助。我是安装 POV 的新手，所以请尽可能彻底。我的一个课程有一个项目，需要我们使用 SVN 来处理一个小组项目，所以我需要启动并运行它。如果有帮助的话，我有一台带有 Mountain Lion OSX 的 Macbook Pro。

**编辑**我在[这里](http://agile.csc.ncsu.edu/SEMaterials/tutorials/subclipse)停留在第 4 步， 我只是不知道如何设置存储库并获取正确的 url。我在 tigris 网站上开了一个帐户，但在他们的帮助菜单下，它说“项目”选项卡下有一个“创建新项目”链接......但我在任何地方都看不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:44:59.617

如果您有现有的 Subversion 服务器和存储库，那么您只需选择添加 SVN 存储库并输入存储库的 URL。

如果您需要创建存储库，则只能在硬盘驱动器上本地进行。在视图下拉菜单中有一个选项标记为 New Repository ... 这将允许您指定一个本地文件夹，它将在其中创建一个新的存储库并添加到该存储库的连接。

# spring - Spring mvc3应用测试环境搭建

> ID：12189356
> 
> 赞同：0
> 
> 时间：2012-08-30T03:12:14.217
> 
> 标签：spring, spring-mvc, spring-test, spring-test-mvc

我正在一个 spring mvc3 应用程序下工作。

当我想对 Dao 组件进行一些单元测试时，我遇到了一些问题。

这是我在 Eclipse 中的应用程序结构：

```
application
    build
        classes
    src
        org.....
    res
        jdbc.properties
        log4j.properties
    www
        resources
            css
            js
        WEB-INF
            mybatis
                config.xml
            view
            spring
                servlet-context.xml
                spring-contex.xml
                spring-dao.xml
            web.xml 
```

servlet-context.xml：

```
<!-- web related config omitted -->
    <import resource="spring-context.xml" />
    <import resource="spring-dao.xml" /> 
```

弹簧上下文.xml：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">.......</bean>

<context:property-placeholder location="classpath*:jdbc.properties" />

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation" value="/WEB-INF/mybatis/config.xml" />
</bean>

<bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate">
    <constructor-arg index="0" ref="sqlSessionFactory" />
</bean> 
```

spring-dao.xml：

```
<bean id="postDao" class="com.king.dao.PostDao" /> 
```

这是我的 PostDao 课程：

```
public class PostDao extends SqlSessionDaoSupport{
    public Post query(int id) {
        return getSqlSession().selectOne("com.king.model.PostMapper.selectById", id);
    }
} 
```

上述配置在 servlet 容器中运行良好。

但是，当我想在没有 servlet 环境的情况下测试 PostDao 时，我遇到了一些问题。

我试过这个：

```
public static main(String[] args){
    ApplicationContext ctx = new ClassPathXmlApplicationContext("E:/application/www/WEB-INF/spring/servlet-context.xml");
    PostDao pd = (PostDao) ctx.getBean("postDao");
    Post p = pd.query(9);
} 
```

然后我得到错误，“mybatis/config.xml”无法创建。

我知道这是由不同的运行环境引起的。

在 servlet 上下文中，spring 会找到“/WEB-INF/mybatis/config.xml”，但是在 java 应用程序中，它找不到它。

所以我想知道如何让我的测试工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:47:30.330

你的意思是单元测试还是集成测试？如果是这样，我建议使用 Spring Test 模块——它允许您定义一个特定的测试上下文，您可以在其中提供相关 bean 的真实或模拟实现。它与 JUnit 很好地集成，并提供了在 Spring 环境中成功运行测试所需的大量脚手架。

# c++ - 变量的切换和初始化

> ID：12189359
> 
> 赞同：1
> 
> 时间：2012-08-30T03:12:38.083
> 
> 标签：c++, c

> **可能重复：**
> [为什么不能在 switch 语句中声明变量？](https://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement)

我在那里看到，在 C 中，变量的初始化可以通过跳转语句跳过，如下例所示：

```
/* valid in C but not C++ */

int main()
{
    switch (1)
    {
    case 0:
        int foo = 0;
        break;
    case 1:
        ++foo;
    }

    return 0;
} 
```

但是当我尝试用 Comeau 编译器编译它时，会出现错误：

> “ComeauTest.c”，第 8 行：错误：声明不能有标签 int foo = 0；^
> 
> “ComeauTest.c”，第 5 行：警告：控制转移绕过初始化：变量“foo”（在第 8 行声明）开关 (1) ^

# c# - 读取 Excel 2010 文件 - C# 中的单元格

> ID：12189360
> 
> 赞同：3
> 
> 时间：2012-08-30T03:12:45.823
> 
> 标签：c#, excel, excel-2010

**更新 2**

```
string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", EXCELFILENAME);

            string testCaseName = "test_case_2";

            string query = String.Format("SELECT * from [{0}$] WHERE columns={1}", workbookName, testCaseName);

            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);

            DataSet dataSet = new DataSet();
            dataAdapter.Fill(dataSet); //<<ERROR 

        DataTable myTable = dataSet.Tables[0]; 
```

错误：没有为一个或多个必需参数指定值。

**更新结束**

**更新：**

```
string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", EXCELFILENAME);
            string query = String.Format("select * from [{0}$]", workbookName);

            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);               
            DataSet dataSet = new DataSet();
            dataAdapter.Fill(dataSet);

            DataTable myTable = dataSet.Tables[0]; 
```

如何从单元格中读取数据并将其存储在数组/字符串中。我已经阅读了工作表，但找不到更好的方法

所以这是我的 excel 表的样子：

![在此处输入图像描述](../Images/a18aedd41f7234b546acdf183e9e914d.png)

我应该能够通过我的案例 test_case_1 或 test_case_2 等中的列...并读取该特定行的列...。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:40:01.147

我建议你看看[LinqToExcel](http://code.google.com/p/linqtoexcel/)。它使在 .NET 中查询 Excel 变得非常容易。

```
var book = new LinqToExcel.ExcelQueryFactory(@"E:\Temporary\Workbook.xlsx");

var current_test_case = "Test_case_1";

var query =
    from row in book.Worksheet("Sheet1")
    let columns = row["columns"].Cast<string>()
    where columns == current_test_case
    select new
    {
        id = row["id"].Cast<int>(),
        name = row["name"].Cast<string>(),
        caption = row["caption"].Cast<string>(),
        date = row["date"].Cast<DateTime>(),
        success = row["success"].Cast<bool>(),
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:57:34.230

嗨，Abu Hamzah，作为您的要求只读必填列，代码在这里，它是一个用于读取 excel 数据的 consol 应用程序

```
class Program
{
    internal static ILog logger = LogManager.GetLogger(typeof(Program));
    static void Main(string[] args)
    {
        log4net.Config.XmlConfigurator.Configure();
        string firstName, lastName, dob, lexisNexisID;
        string filePath = @"yor directory path\your file name";

        ExcelProvider provider = ExcelProvider.Create(filePath, "Sheet1");
        foreach (ExcelRow row in (from x in provider select x))
        {
            Console.WriteLine("{0}", row.GetString(1));
            /* the row.Getstring(index) the index is for your column you mey select morcolume as Console.WriteLine("{0}/t{1}", row.GetString(0),row.Getstring(1)); */
        }

    }

}

public class ExcelRow
{
    List<object> columns;

    public ExcelRow()
    {
        columns = new List<object>();
    }

    internal void AddColumn(object value)
    {
        columns.Add(value);
    }

    public object this[int index]
    {
        get { return columns[index]; }
    }

    public string GetString(int index)
    {
        if (columns[index] is DBNull)
        {
            return null;
        }
        return columns[index].ToString();
    }

    public int Count
    {
        get { return this.columns.Count; }
    }
}

public class ExcelProvider : IEnumerable<ExcelRow>
{
    private string sheet;
    private string filePath;
    private List<ExcelRow> rows;

    public ExcelProvider()
    {
        rows = new List<ExcelRow>();
    }

    public static ExcelProvider Create(string filePath, string sheet)
    {
        ExcelProvider provider = new ExcelProvider();
        provider.sheet = sheet;
        provider.filePath = filePath;
        return provider;
    }

    private void Load()
    {
        string connectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=    ""Excel 12.0;HDR=YES;""";
        connectionString = string.Format(connectionString, filePath);
        rows.Clear();
        using (OleDbConnection conn = new OleDbConnection(connectionString))
        {
            try
            {
                conn.Open();
            }
            catch (Exception ex)
            {
            }
            using (OleDbCommand cmd = conn.CreateCommand())
            {
                cmd.CommandText = "select * from [" + sheet + "$]";
                using (OleDbDataReader reader = cmd.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        ExcelRow newRow = new ExcelRow();
                        for (int count = 0; count < reader.FieldCount; count++)
                        {
                            newRow.AddColumn(reader[count]);
                        }
                        rows.Add(newRow);
                    }
                }
            }
        }
    }

    public IEnumerator<ExcelRow> GetEnumerator()
    {
        Load();
        return rows.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        Load();
        return rows.GetEnumerator();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T09:34:15.487

关于过滤。

当您使用 OleDb 进行数据检索时，没有什么可以阻止您使用更高级的 SQL：

```
string testCaseName = "Test_case_1
string query = String.Format("SELECT * from [{0}$] WHERE columns=\"{1}\"", workbookName, testCaseName); 
```

您可以使用列的名称进行过滤。在您的情况下，过滤器位于**列**字段上。（顺便说一句。这是一个令人困惑的名字）

据我记得表格的标题必须在第一行，您可能需要将表格向上移动一行。

# c# - 我的 ViewModel 有什么问题

> ID：12189361
> 
> 赞同：0
> 
> 时间：2012-08-30T03:12:46.823
> 
> 标签：c#, asp.net-mvc, razor

我正在尝试通过 ViewModel 将一些列表传递给我的视图。我已经多次重建我的项目，但无济于事。我在网上查了一下，和我的做法没有什么不同。

![在此处输入图像描述](../Images/43b48e0389534628b1ea36ca43b3b839.png)

```
namespace sportingbiz.Models.ViewModels
{
    public class MatchesViewModel
    {
        private List<MatchViewModel> _matches = new List<MatchViewModel>();
        public List<MatchViewModel> Matches
        {
            get { return _matches; }
            set { _matches = value; }
        }
    }
} 
```

标记

```
@model IEnumerable<sportingbiz.Models.ViewModels.MatchesViewModel>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<table style="width:100%">

@foreach (var item in Model.Matches)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Team1Name)
        </td>
    </tr>
} 
```

如果我`.Matches`从`foreach`它的工作原理中删除。`Matches`不显示在智能感知中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T03:16:59.983

您的模型是`IEnumerable<sportingbiz.Models.ViewModels.MatchesViewModel>`一系列 MatchesViewModels。您需要先枚举该列表，然后才能调用`Matches`. 如果您只返回一个 MatchesViewModel，请将您的模型声明更改为：

```
@model sportingbiz.Models.ViewModels.MatchesViewModel 
```

**编辑**- 我经常使用的一个技巧是将鼠标悬停在任何实例上`Model`，VS 会告诉你模型是什么*类型。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:24:25.853

IEnumerable 不包含名为 Matches 的方法。所以很自然地，试图引用它是行不通的。

这就像拿一袋薯片并试图通过抓住袋子而不是伸手去拿薯片。

我认为您不想将视图模型的 IEnumerable 传递给视图。我认为您只想传递视图模型本身。

# google-chrome - WebSocket Chrome 接收数据问题

> ID：12189363
> 
> 赞同：3
> 
> 时间：2012-08-30T03:13:02.080
> 
> 标签：google-chrome, websocket

我试图四处寻找一些信息，但找不到任何信息。我正在使用最新版本：21.0.1180.83 m。

我有一个正在使用的 C++ 服务器，握手后我向 Chrome 发送以下内容：“10000001000000100110100001101001”应该只是“嗨”，对吗？但由于某种原因，chrome 什么也没做。我的服务器正在正确发送数据——我在搞乱这些位并且有一个 chrome 错误说：一个或多个保留位打开：reserved2 = 1，reserved3 = 1。所以，我知道 chrome 正在正确接收。

```
ws.onmessage = function (evt) 
     { 
        var received_msg = evt.data;
        alert(received_msg);
     }; 
```

据我所知，这应该是正确的，除非我遗漏了什么……任何帮助将不胜感激。

*编辑*我解决了我的问题，似乎我没有正确地将字节放在一起......

这是我拼凑在一起修复的一段代码......（不要讨厌）

```
string construct_data ( string data ) {
    string return_value = "";
/*    0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-------+-+-------------+-------------------------------+
     |F|R|R|R| opcode|M| Payload len |    Extended payload length    |
     |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |
     |N|V|V|V|       |S|             |   (if payload len==126/127)   |
     | |1|2|3|       |K|             |                               |
     +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +
     |     Extended payload length continued, if payload len == 127  |
     + - - - - - - - - - - - - - - - +-------------------------------+
     |                               |Masking-key, if MASK set to 1  |
     +-------------------------------+-------------------------------+
     | Masking-key (continued)       |          Payload Data         |
     +-------------------------------- - - - - - - - - - - - - - - - +
     :                     Payload Data continued ...                :
     + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +
     |                     Payload Data continued ...                |
     +---------------------------------------------------------------+*/
    char unmasked  = 129;
    char size;

    if ( data.size() <= 125 ) {
        size = data.size();
    } else  if ( data.size() > 125 && data.size()  <= 65535) {
        size = 126;
    } else if ( data.size() > 65535 ) {
        size = 127;
    }

    stringstream it_um;
    stringstream it_s;
    for ( int i = 0; i < 1 ; i++ )
        it_um << unmasked;
    for ( int i = 0; i < 1; i++ )
        it_s << size;

    std::string raw_unmask;
    std::string raw_size;

    raw_unmask = it_um.str();
    raw_size = it_s.str();

    string raw_data = raw_unmask + raw_size + data;

    return_value.append(raw_data);

    return return_value;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:35:03.390

看起来你的字节顺序是倒退的。线路上输出的第一个字节是“01101001”，即：

*   0 - 延续帧
*   110 - rsvd 1 和 rsvd 2（但不是 rsvd 3）
*   1001 - ping 操作码。

看来您有一个小端架构，并且正在尝试一次构建具有多个字节的帧/标头，这就是字节序发挥作用的地方。如果您要一次构建具有多个字节的帧，则需要交换值以使用网络字节顺序（即大端序）。

参考：

*   [https://www.rfc-editor.org/rfc/rfc6455#section-5](https://www.rfc-editor.org/rfc/rfc6455#section-5)
*   [wchar_t 数据是否需要字节序转换？](https://stackoverflow.com/questions/421530/is-endian-conversion-required-for-wchar-t-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T00:59:10.387

如果在握手之后出现任何非帧数据，那么这个“问题”也可能在 Chrome 中出现，然后是帧数据。我只是想分享一下，因为我刚刚调试了这个确切的问题几个小时。我开始的实现是在标题后面的 CRLF \ CRLF 之后添加接受字符串。希望它可以帮助别人:)

# soap - SugarCRM 通过后端更新记录

> ID：12189364
> 
> 赞同：1
> 
> 时间：2012-08-30T03:13:04.170
> 
> 标签：soap, set, sugarcrm

今天学习另一个框架，现在才开始大约 4 天。我的目标是在具有功能的详细视图中添加一个新按钮，特别是在联系人模块中。我添加了一个名为“active_c”的新字段，它是一个复选框。如果复选框被选中，则他单击该字段的按钮，然后未选中，这意味着该联系人处于非活动状态。

我已经完成了新的按钮部分，并且我已经找到了在单击按钮时将代码放在哪里（它在模块控制器上，对吗？）。我缺少的是更新记录以选中或取消选中，或真或假，或 1 或 0。

我发现一些使用肥皂，但它对我不起作用。这是我的代码的一部分。

```
 $client = new nusoapclient('http://localhost/sugarcrm/soap.php?wsdl',true);
    //login
    $auth_array = array(
        'user_name' => $current_user->user_name,
        'password' => $current_user->user_hash,
        'version' => '6.5.2'
    );
  $session = $client->call('login',array('user_auth'=>$auth_array,
             'application_name'=>'SugarCRM'));
  $session_id =  $session['id']; 
```

如果我将其打印出来，我的“$session”不会返回任何内容。没有 session['id'] 我无法继续 *set_entry*。

我只使用本地主机。

求助，大佬们这个怎么办？

问候， Ronel C.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:37:12.303

谢谢大家的回复。我的真正意图是，每次单击按钮时更新记录并找到答案。我太愚蠢了，以非常复杂的方式进入。

我所做的是（以防其他人有问题）：

```
//Instantiate the class - for me its Contacts
$contact = new Contact();
// Use retrive
$data = $contact->retrieve($record_id);
$data->first_name = 'Pedro Penduko';
$data->save($record_id); 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:57:20.620

您不应该使用较旧的soap.php 入口点，但较新的服务/较旧的入口点已被弃用，并将在未来的版本中删除。

[http://developers.sugarcrm.com/wordpress/2010/11/11/web-services-in-your-own-language-part-1-php-2/](http://developers.sugarcrm.com/wordpress/2010/11/11/web-services-in-your-own-language-part-1-php-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:24:41.373

你可以`127.0.0.1`在你的 URL 中测试，而不是像 localhost 一样`http://127.0.0.1/sugarcrm/soap.php?wsdl`

# hadoop - “添加 " 在 hive cli

> ID：12189367
> 
> 赞同：1
> 
> 时间：2012-08-30T03:13:27.007
> 
> 标签：hadoop, hive, bigdata, hadoop-streaming

我想要类似的东西

```
$hive
> ADD FILE <directory_path>; 
```

它将目录添加到配置单元的工作目录。

我正在使用配置单元 0.7。
我需要这个来添加映射器/减速器脚本使用的 python 包。
我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:33:09.240

对于 0.7.1，您可以使用 shell 转义 (!)`!hadoop fs -mkdir <path>`或“dfs”命令来运行`dfs -mkdir <path>`。有关更多信息，请参阅[cli wiki 页面](https://cwiki.apache.org/Hive/languagemanual-cli.html)。不确定这些是否在 0.7 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:32:17.917

对我有用的是将所有内容（目录/文件）压缩到一个 zip 文件并使用“添加存档”，如[将多个文件添加到 HIVE 中的分布式缓存中所述](https://stackoverflow.com/questions/15429040/add-multiple-files-to-distributed-cache-in-hive)

# oracle - 无法从另一台仅 oracle 客户端的计算机连接到 oracle 服务器

> ID：12189370
> 
> 赞同：0
> 
> 时间：2012-08-30T03:13:42.907
> 
> 标签：oracle, ora-12170

我有一台机器作为 webserver，另一台作为 oracle 服务器，webserver：-centOS x64-从[http://dony-ramansyah.blogspot.com/2012/02/install-oracle-client-dan-oci8-di 安装的 oracle 客户端。 html](http://dony-ramansyah.blogspot.com/2012/02/install-oracle-client-dan-oci8-di.html)

oracle 服务器 - XP 家庭 x32

我无法连接到 oracle 服务器，

有什么建议吗？

在我的 Oracle 服务器（centOS）上

```
lsnrctl.exe status :
Security ON: Local OS Authentication
Version: TNSLNR for 32-bit Windows: Version 11.2.0.2.0-Praction 
```

在我的 Oracle 客户端 (XP)

```
#sqlplus64 system/passwd@192.168.137.3/1521:XE :
ERROR: ORA-12170 TNS:Connect timeout occured 
```

我认为我的 oracle 服务器阻止了来自外部的连接..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:44:18.870

来自评论：您的[简单连接](http://docs.oracle.com/cd/E14072_01/network.112/e10836/naming.htm#i498306)字符串是错误的；它应该是`@192.168.137.3:1521/XE`。您的版本正在连接到`1521`服务器上的默认端口`192.168.137.3`; 但随后会寻找服务名称`1521:XE`而不是`XE`.

但是由于您仍在连接到同一个端口，因此不应获得`ORA-12170`，因为网络部分实际上是相同的。它会期望它得到一个`ORA-12514: TNS: listener does not currently know of service requested in connect descriptor`. 也许 Windows 版本的 SQL*Plus 的行为略有不同，尽管这似乎不太可能；尾随的额外空格和`:`问题导致 SQL*Plus 在 Linux 中显示使用信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T12:23:04.890

可能是您的防火墙阻止了您的端口。您可以通过更改防火墙设置来启用此功能。这是用于访问端口的 Windows 7 配置控制面板->系统和安全->Windows防火墙->高级设置->绑定规则->新规则（在右侧）->选择端口选项，值为“1521”- > 下一个 下一个....

# php - 循环遍历大型 xml 响应，然后在另一个循环中将元素发送回以进行响应

> ID：12189371
> 
> 赞同：0
> 
> 时间：2012-08-30T03:13:46.180
> 
> 标签：php, xml, api

一定有更好的方法！这是我的代码：

```
checksession();
$restNew2 = new RESTConnector();

$urlNew2 = "https://localhost:9630/api/products/";
$restNew2->createRequest($urlNew2,"GET", null, $_SESSION['cookies'][0]);
$restNew2->sendRequest();

$responseNew2 = $restNew2->getResponse();
$xmlNew2 = new SimpleXMLElement($responseNew2);

foreach ($xmlNew2 as $purge){
    $id = (string)$purge->attributes()->id;

checksession();
$restNew = new RESTConnector();

$urlNew = "https://localhost:9630/api/products/".$id."/";
$restNew->createRequest($urlNew2,"GET", null, $_SESSION['cookies'][0]);
$restNew->sendRequest();

$responseNew = $restNew->getResponse();
$xmlNew[] = new SimpleXMLElement($responseNew);

}
$array = array();

foreach ($xmlNew as $purgeDet){
    $code[] = (string)$purgeDet->code;
    $classId[] = (string)$purgeDet->class['id'];
    for($i=0, $count = count($xmlNew); $i < $count; $i++) {
$array[$code[$i]]['classId'] = $classId[$i];
    }
}
print_r($array); 
```

第一个响应给了我大约 300,000 行，然后我必须解析它以获取产品的 id，以便发送另一个请求以获取产品的完整呈现。它最终发送了大约 40,000 个请求。我希望在晚上使用 cron 将其插入到 mySQL 数据库中，这样我就可以在第二天创建关于它的报告。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:38:53.477

我分块做。进行第一个 API 调用并遍历它，构建一个仅包含 ID 的列表并存储它。Id 将它们存储在每行 1 个的文件中...然后您可以稍后逐行保存文件，而不是将整个数组加载到缓冲区中，或者您仍然可以将文件读取到数组中...无论哪个最终成为更好的解决方案.

然后读取文件并循环通过 ID 进行详细调用并存储它们。

**更新**：

您还可以通过使用 xpath 查询在编译端保持对 ID 的抓取。

```
$xmlNew2->xpath("//THE_ELEMENT_WITH_THE_ID/@id"); 
```

但我不知道这是否会为你节省很多，因为你仍然需要循环这个......它只是节省你必须`SimpleXMLElement::attributes`在每个节点上调用。但结果仍然是属性元素数组。

# c# - 从 UML 模型生成代码到列表

> ID：12189374
> 
> 赞同：1
> 
> 时间：2012-08-30T03:14:24.027
> 
> 标签：c#, asp.net, ef-code-first, uml

使用 Visual Studio 2012，我创建了一个 UML 类图。从类图中，我生成了 C# 类。

我没有展示所有代码和图像，而是在以下位置创建了一个帖子：[代码优先：从 UML 类图到创建 MS SQL 数据库](http://idedogs.blogspot.com/2012/08/code-first-from-uml-class-diagram-to.html)

从类图生成代码时，我注意到，当存在关系时，会生成一个 IEnumerable 类型。

这没关系，但是我想将生成的代码用于 Code First 实现。下面，我创建了上下文。目前，Context 类只包含一种关系。

```
modelBuilder.Entity<Owner>()
.HasKey(o => o.ownerID)
.HasMany<Client>(o => (ICollection<Client>)o.Clients); 
```

这将创建与 Owner 和 Client 表的一对多关系。因为 HasMany 需要一个 ICollection 类型，所以我将 IEnumerable 强制转换为 ICollection。

**我的问题是：**当我从 UML 类图生成代码时，有没有办法将关系生成为 ICollection 类型而不是 IEnumerable 类型。我的 UML 类图呈现在我的博客上。我在上面提供的博客链接。

最终，我只想创建我的项目的类图，生成代码，创建上下文（这将创建数据库表}，并利用实体进行开发。

因为类图将关系生成为 IEnumerable，所以当我转换为 ICollection 时，上下文会起作用。它创建了一对多的关系。我只想在类图中创建关系，而不用担心生成代码后的关系。

```
public class Context : DbContext
{
    public DbSet<Client> Clients { get; set; }
    public DbSet<Medication> Medications { get; set; }
    public DbSet<MedicalHistory> MedicalHistories { get; set; }
    public DbSet<FeedingSchedule> FeedingSchedules { get; set; }
    public DbSet<Vaccine> Vaccines { get; set; }
    public DbSet<Owner> Owners { get; set; }
    public DbSet<Walk> Walks { get; set; }
    public DbSet<WhoWalk> WhoWalks { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Owner>().Property(b => b.fname).IsRequired().HasMaxLength(150);
        modelBuilder.Entity<Owner>().Property(b => b.lname).IsRequired().HasMaxLength(150);

        modelBuilder.Entity<Owner>().HasKey(o => o.ownerID).HasMany<Client>(o => (ICollection<Client>)o.Clients); 

        base.OnModelCreating(modelBuilder);
    }

} 
```

所有代码都可以在我的博客中查看：[Code-First: From UML Class Diagram to Creating MS SQL Database](http://idedogs.blogspot.com/2012/08/code-first-from-uml-class-diagram-to.html)

我在下面包含了一个 UML 类图生成的 C# 代码示例。目前，创建了两个类，它们具有一对多的关系。

```
 public class Client
    {
        public virtual int clientID
        {
            get;
            set;
        }

        public virtual int ownerID
        {
            get;
            set;
        }
    }

public class Owner
{
    public virtual int ownerID
    {
        get;
        set;
    }

    /// <summary>
    /// The pets and owners
    /// </summary>
    public virtual IEnumerable<Client> Clients
    {
        get;
        set;
    }
} 
```

我希望类图生成以下代码：

```
public class Owner
{
    public virtual int ownerID
    {
        get;
        set;
    }

    /// <summary>
    /// The pets and owners
    /// </summary>
    public virtual ICollection<Client> Clients
    {
        get;
        set;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T20:00:48.893

我有同样的问题，另一个stackoverflow帖子帮助了我：

1) 像这篇文章一样更新 t4 文件：[Visual Studio Architecture Code Generation - Create List<type> 而不是 IEnumerable<type>](https://stackoverflow.com/questions/23592471/visual-studio-architecture-code-generation-create-listtype-rather-than-ienum)

2）我复制了这些文件并修改了 ICollection，并在 VS->Architecture->Configure Default Code Generation Settings 上更新了我的 UML 类图上的 t4 参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:22:18.203

当然。

只需将多重性保留为 1 并将您的属性类型更改为字面意思`ICollection<Client>`

# class - iPhone SDk 中的类声明？导入/类？

> ID：12189382
> 
> 赞同：0
> 
> 时间：2012-08-30T03:15:25.900
> 
> 标签：class, import

我有三个视图控制器。--> AViewController,BViewController,CViewController </p>

AViewController 是导航到它们中的每一个的主页。但是他们都需要访问彼此的属性。因为他们需要在他们的视图控制器中创建另一个控制器的对象。BViewController 负责更改 AViewController 中的 label1 文本。CViewController 负责更改 AViewController 中的 label2 文本。AViewController 使用 presentModalController: 切换到 BViewController 和 CViewController。

这样做有错误。为什么？与@class 或#import 有什么关系？@class 和 #import 应该放在哪里，是在 .h 还是 .m 中？可以告诉我吗？我很困扰。

任何人都可以帮助我，提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:24:46.633

通常，以您尝试的方式将类紧密耦合在一起是一个坏主意。相反，创建另一个类，比如`ViewControllerManager`. 然后这个类可以实例化所有视图控制器类并将一个类的属性传递给另一个类。经理还必须对所有视图控制器类的生命周期和范围负责。

# jquery - 选择所有选项并禁用在 IE 中不起作用

> ID：12189387
> 
> 赞同：0
> 
> 时间：2012-08-30T03:16:07.100
> 
> 标签：jquery, html, internet-explorer-8

我在 IE8 多选中遇到问题，我们使用 jQuery 全选并禁用列表。列表被禁用但未被选中，并且相同的场景在 FireFox 中完美运行，其中整个列表被选中并禁用

谁能帮我在 IE 中处理这个问题

提前致谢

下面是我的代码：

```
<select name="weekdays" id="weekdays" disabled="disabled" multiple>
  <option value="Monday">Monday </option>
  <option value="Tuesday">Tuesday</option>
  <option value="Wednesday">Wednesday</option>
  <option value="Thursday">Thursday </option>
  <option value="Friday">Friday</option>
  <option value="Saturday">Saturday</option>
  <option value="Sunday">Sunday</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:34:18.677

**方法 ：**

```
$('select:disabled'); 
```

或者 ：

```
$('select[disabled=true]'); // [disabled*=true] 
```

或者 ：

```
$('select').find('*[disabled=true]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:33:20.330

好吧，这就是我的做法：

```
$("#weekdays option").prop("selected",true); 
```

鉴于您显示的 html 已经有了，`disabled="disabled"`我不明白为什么需要 jQuery 来禁用它，而是禁用选择并选择所有选项：

```
$("#weekdays").prop("disabled",true).find("option").prop("selected",true); 
```

这适用于 IE7；我没有IE8可以测试。

更新：在我看来，您遇到的问题可能是未提交所选值。[禁用的表单元素不会被提交。](http://www.w3.org/TR/html4/interact/forms.html#h-17.12)一个常见的解决方法是创建隐藏输入来保存所需的值。但是，如果 FF 不遵守这条规则，我会感到惊讶。

# c# - How does one control what numericUpDown displays, 1 and not 1,0, while keeping 0,5 percision?

> ID：12189390
> 
> 赞同：1
> 
> 时间：2012-08-30T03:16:12.733
> 
> 标签：c#, .net, winforms, numericupdown

I have configured my numericUpDown control to have 0,5 precision. (from 0 to 10.)

```
-changed decimalplaces to 1
-changed increment to 0,5
-maximum at 10
-minimum at 0 
```

When the value is incremented, I see:

```
0,0
0,5
1,0
1,5
...
10,0 
```

What I want is:

```
0
0,5
1
1,5
...
10 
```

Is there any simple way to do this? Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:36:29.210

Can you Handle in the `ValueChanged` event and change the `DecimalPlaces` property to compare when you value is rounded value.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T03:44:17.170

You can extend the Winform `NumericUpDown` control and `override` its `UpdateEditText` method as shown on [this answer](https://stackoverflow.com/questions/5921446/having-text-inside-numericupdown-control-after-the-number) to a similar question here on SO.

Your class might look like this:

```
public class NumericUpDownEx : NumericUpDown 
{
    public NumericUpDownEx() {
        // Optionally set other control properties here.
        this.Maximum = 10;
        this.Minimum = 0;
        this.DecimalPlaces = 1;
        this.Increment = ,5m;
    }
    protected override void UpdateEditText() {
        // Remove any trailing ',5'.
        this.Text = this.Value.ToString().Replace(".0", string.Empty);
    } 
} 
```

An advantage to the approach is that you're creating a new control you can use in other projects.

# objective-c - Facebook SDK API IOS 发布到用户墙时出错

> ID：12189396
> 
> 赞同：3
> 
> 时间：2012-08-30T03:17:45.650
> 
> 标签：objective-c, ios, facebook, api, sdk

尝试发布到用户的 Facebook 墙上时出现以下错误，我似乎无法找到来源。有人对这个问题有一些见解吗？

```
2012-08-29 22:14:38.490 CanP[405:707] Error: HTTP status code: 400
2012-08-29 22:14:38.494 CanP[405:707] FBSDKLog: Response <#1111> <Error>:
The operation couldn’t be completed. (com.facebook.sdk error 5.) 
```

应该将消息发布到 facebook 墙上的运行方法如下：

```
[FBSettings setLoggingBehavior:[NSSet setWithObjects:
                                FBLoggingBehaviorFBRequests,
                                nil]];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"My test app", @"name",
                               @"http://www.google.com", @"link",
                               @"FBTestApp app for iPhone!", @"caption",
                               @"This is a description of my app", @"description",
                               @"Hello!\n\nThis is a test message\nfrom my test iPhone app!", @"message",
                               nil];

// Publish.
// This is the most important method that you call. It does the actual job, the message posting.
[facebook requestWithGraphPath:@"me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T01:54:36.960

正如 C Abernathy 所建议的，您应该“在错误行放置一个断点并查看错误变量，然后深入到一个名为 userInfo 的字典，其中应该包含更易读的错误消息。”

对于我们这些测试新的 Facebook 集成的人来说，**最常见的问题**可能会显示在`error.userInfo` `"com.facebook.sdk.ParsedJSONResponseKey"`：

```
message = "(#506) Duplicate status message"; 
```

改变用于测试 Facebook 集成的文本，您可能会发现您的代码运行良好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T03:40:50.340

我建议您使用新的 SDK 3.1 方法进行发布。

```
[FBRequestConnection
 startWithGraphPath:@"me/feed"
 parameters:params
 HTTPMethod:@"POST"
 completionHandler:^(FBRequestConnection *connection,
                     id result,
                     NSError *error) {
     if (error) {
         /* Handle error */
     } else {
         /* Handle success */
     }
 }]; 
```

有关分步教程，请参阅：[https ://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

还要确保您首先要求获得 publish_action 权限，以确保您可以发布到墙上。

如果您仍然遇到问题，请在错误行放置断点并查看错误变量，然后深入到名为 userInfo 的字典，该字典应包含更易读的错误消息。

# mysql - 如何根据另一个表中的值更新列？

> ID：12189400
> 
> 赞同：0
> 
> 时间：2012-08-30T03:18:47.570
> 
> 标签：mysql

`$grade`如果他们的 ID 与另一个表中选择的 ID 匹配，我想更新成绩表中的一些变量：

```
SELECT ID
FROM posts
WHERE post_parent = %d, $parent_id 
```

使用我从上述查询中获得的 ID，现在，如何更新此成绩表中成绩列中的变量？

```
ID  | user_id  | grade 
```

最好的做法是将两步合二为一——在一个代码中获取 ID 和更新成绩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:22:22.063

```
UPDATE grade AS g
       INNER JOIN post p
               ON g.id = p.id
SET    g.grade = 'your-intended-grade'
WHERE  p.post_parent = $parent_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T03:25:15.387

您可以使用**INNER JOIN**

试试下面的代码

```
UPDATE a
SET grade ='your value' FROM grade a
INNER JOIN posts b ON a.id = b.id
WHERE b.post_parent = $parent_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:22:01.807

```
Update grades SET grade = ? 
WHERE ID IN (SELECT ID FROM posts WHERE post_parent = ?) 
```

# java - 如何在 Hibernate/JPA 中捕获 @Formula 注释引发的异常？

> ID：12189403
> 
> 赞同：0
> 
> 时间：2012-08-30T03:19:40.877
> 
> 标签：java, hibernate, orm

`@Formula`我在我的应用程序中使用来自 Hibernate 的注释遇到了一个场景`jsf`。我的实体属性之一用于从使用`@Formula`注释标记的关联实体列中获取值，查询是从该列中简单选择，有时值是`null`并且我`EntityNotFoundException`在迭代到我的实体时得到。我将如何捕捉这个错误，或者可能抑制这个错误，这样我的页面上就不会出现错误。

我该怎么做？谢谢。

# ruby - Jekyll 没有生成 _sites 文件夹

> ID：12189404
> 
> 赞同：2
> 
> 时间：2012-08-30T03:19:52.593
> 
> 标签：ruby, gem, yaml, jekyll

我正在为一个朋友开发一个网站，之前从未使用过 Jekyll 或 Ruby。我分叉了他的 github 项目，虽然花了我一段时间，但我最终正确地安装了 Jekyll（我想），一切似乎都在工作。我将项目分支并在分支中工作，并且在某些时候它随机停止生成 _site 文件夹，尽管我无法将其链接到任何特定的东西。我切换回主分支，它仍然无法正常工作。我在 _config.yml 文件中关闭了自动重新生成，然后我开始收到以下错误：

```
/Users/SamGavisHughson/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:148:in `parse':couldn't parse YAML at line 16 column 0 (Psych::SyntaxError)  
from /Users/SamGavisHughson/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:148:in `parse_stream'  
from /Users/SamGavisHughson/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:119:in `parse'  
from /Users/SamGavisHughson/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:106:in `load'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/convertible.rb:33:in `read_yaml'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/page.rb:24:in `initialize'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:140:in `new'
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll 0.11.2/lib/jekyll/site.rb:140:in `block in read_directories'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:130:in `each'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:130:in `read_directories'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:135:in `block in read_directories'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:130:in `each'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:130:in `read_directories'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:98:in `read'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/lib/jekyll/site.rb:38:in `process'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/gems/jekyll-0.11.2/bin/jekyll:250:in `<top (required)>'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/bin/jekyll:19:in `load'   
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/bin/jekyll:19:in `<main>'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `eval'  
from /Users/SamGavisHughson/.rvm/gems/ruby-1.9.2-p320/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我在另一篇文章（[Rails 错误，无法解析 YAML](https://stackoverflow.com/questions/4980877/rails-error-couldnt-parse-yaml)）上看到他们提到更改 config/boot.rb 中的某些内容，但我不知道如何执行此操作，所以如果有人可以 1\. 解释如何执行此操作，2 .解释为什么这个错误突然出现，或者 3\. 提出其他解决方案，我将非常感激！

这是 _config.yml 文件，但我不认为这是问题所在，因为它在我更改之前停止工作：

```
permalink: pretty
auto: false
server: true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:33:11.433

运行`jekyll --no-auto --server`将打印有关您无法生成`_site`目录的原因的错误消息。让我知道这是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:07:36.397

`_config.yml`您很可能在编辑它以关闭自动重新生成时引入了语法错误。尝试修复它，或使用文件内容更新您的问题，以便这里的人可以查看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:46:06.930

我删除了我的回购并再次分叉了原始文件，然后重新完成了我的工作，它似乎正在工作，至少现在是这样，直到我把其他事情搞砸了；）

# java - 如何逐行扫描输入整数？

> ID：12189408
> 
> 赞同：1
> 
> 时间：2012-08-30T03:20:44.787
> 
> 标签：java, input

我们想编写一个程序来求解两个`"Ax2+Bx+C=0"`形式方程。

当方程的系数在`Ax2+Bx+C=0`每个方程中输入 1 行时，它可能如下所示：

```
2   3       // linear equation when the coefficient for the term x2 is zero

4   5   6   // quadratic equation 
```

nextInt() 不会告诉我们 4 是第一行的第三个数字还是第二行的第一个数字。也就是说，下面的输入将返回完全相同的信息。

```
2   3   4    // quadratic equation

5   6          // linear equation 
```

两个输入也与`2 3 4 5 6`for nextInt()没有什么不同

那么如何逐行扫描这些系数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:22:38.420

使用 Scanner's 一次获取每一行`nextLine()`，然后使用`String#split(" ")`以正确顺序获取各个令牌。您可以通过获取返回数组的长度轻松找出存在多少令牌。您当然需要解析通过`Integer.parseInt(...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:26:43.513

**-**扫描仪的使用`nextLine()`方法。

**例如：**

```
Scanner scan = new Scanner(System.in);

String l = scan.nextLine(); 
```

**-**使用带有“”（空格）的 split() 作为分隔符来获取每个值。

```
String[] arr = l.split(" "); 
```

**-**使用 将`Integer.parseInt()`其转换**回 int**。

```
ArrayList<Integer> aList = ArrayList<Integer>();

for (String s : arr){

     aList.add(Integer.parseInt(s));

} 
```

# java - 另存为 .txt 格式

> ID：12189410
> 
> 赞同：-8
> 
> 时间：2012-08-30T03:21:41.173
> 
> 标签：java

我做了一个记事本程序。问题是它不保存为 .txt 格式，它保存为没有格式的文件。但它可以打开 .txt 文件。我该如何解决？这是我的工作。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Scanner;
import java.io.*;

public class NotePad extends JFrame {

    private JTextArea noteArea;

    public static void main(String[] args) {
        NotePad p = new NotePad();
        p.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        p.setSize(500,300);
        p.setVisible(true);
    }

    public NotePad() {
        super("Java Notepad");
        setLayout(new BorderLayout());
        noteArea = new JTextArea("",20,20);
        noteArea.setWrapStyleWord(true);
        noteArea.setLineWrap(true);

        Font font = new Font("sanserif", Font.BOLD,14);
        noteArea.setFont(font);

        JScrollPane scroller = new JScrollPane(noteArea);
        scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        scroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        add(scroller,BorderLayout.CENTER);

        JMenuBar menuBar = new JMenuBar();
        JMenu fileMenu = new JMenu("File");
        JMenuItem openMenu = new JMenuItem("Open");
        openMenu.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                JFileChooser openFile = new JFileChooser();
                openFile.showOpenDialog(new NotePad());
                loadFile(openFile.getSelectedFile());
            }

        });
        JMenuItem saveMenu = new JMenuItem("Save");
        saveMenu.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                JFileChooser saveFile = new JFileChooser();
                saveFile.showSaveDialog(new NotePad());
                fileSaved(saveFile.getSelectedFile());
            }

        });

        JMenuItem exitMenu = new JMenuItem("Close");
        exitMenu.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ae) {
                System.exit(0);
            }

        });

        fileMenu.add(openMenu);
        fileMenu.add(saveMenu);
        fileMenu.add(exitMenu);
        menuBar.add(fileMenu);
        this.setJMenuBar(menuBar);

    }

    public void loadFile(File file) {
        noteArea.setText("");
        try {

            BufferedReader read = new BufferedReader(new FileReader(file));
            String line = null;

            while((line =read.readLine())!=null) {
                noteArea.append(line +"\n");
            }
            read.close();
        }   
        catch (Exception e) {
        System.out.println("Error " + e.toString());
        }
    }

    public void fileSaved(File file) {
        try {
            PrintWriter writer = new PrintWriter(file);
            String[] lines  = noteArea.getText().split("\\n");
            for (String ) {

                writer.println(words);

            }
            writer.close();
        } catch (Exception e) {
            System.out.println("Error " + e.toString());
        }
    }
} 
```

顺便说一句，由于没有根据网站解释场景，我无法发布我的问题。所以在那里。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:37:38.510

如果不存在，您需要确保将“.txt”扩展名添加到输出文件名的末尾。Java 和 Windows 不会为你做这件事......

```
public void fileSaved(File file) {
    String name = file.getPath();
    if (!name.toLowerCase().endsWith(".txt")) {
        name += ".txt";
        file = new File(name);
    }

    //... 
```

这是相当沉重的，因为我没有检查用户是否提供了不同的扩展，但我认为 NotePad 基本上做同样的事情：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:04:25.943

每个文件名由两部分组成： - 名称和扩展名。Notepad ，默认情况下保存为 .txt 但并非总是如此。

您需要将扩展​​名指定为

```
public void fileSaved(File file) {
String name = file.getPath();
if (!name.toLowerCase().endsWith(".txt")) {
    name += ".txt";
    file = new File(name);
} 
```

为了使它工作。试试看。

# android - 如何在 Android 上显示连接的窗口？

> ID：12189412
> 
> 赞同：0
> 
> 时间：2012-08-30T03:21:45.480
> 
> 标签：android, connection, detect

> **可能重复：**
> [检查 android 上的互联网连接](https://stackoverflow.com/questions/4086159/checking-internet-connection-on-android)

当您没有连接wifi或3g时如何在Android上显示连接窗口？就像在 Skype 应用程序上一样，它会检测到您没有连接到互联网。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:07:58.567

您可以添加侦听器以接收连接状态。通过wifi接收器，您可以在连接和断开连接时获取状态，对于移动数据连接，您可以通过电话状态监听器接收。此链接将帮助您跟踪相同的内容。

[电话状态监听器](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)

[无线监听器](https://stackoverflow.com/questions/6362314/wifi-connect-disconnect-listener)

# ios - 当我的 iOS 应用程序向服务器查询消息时，我应该设置多少秒超时？

> ID：12189413
> 
> 赞同：0
> 
> 时间：2012-08-30T03:21:54.457
> 
> 标签：ios, timeout, request, seconds

目前我的超时时间为 90 秒。如果我遇到用户点击刷新但找不到连接的错误，它将继续检查 90 秒，在屏幕上显示“刷新”标签。

最佳做法是多少秒？我担心如果我太低，那么它总是会超时并且不会轮询新消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:39:20.823

首先，您需要使用可达性 API 检查网络可用性，您应该去请求服务器。如果网络未连接，则没有必要向服务器发出请求。

对于任何服务器请求调用，理想的超时时间是 30 秒。

# php - 验证类实例化

> ID：12189424
> 
> 赞同：1
> 
> 时间：2012-08-30T03:23:32.477
> 
> 标签：php, validation, constructor

当我实例化一个新对象时，我应该如何处理在验证方面传入的参数？

我猜只是假设传入的参数很好是不安全的，但是我认为验证应该分成另一层？

例如，如果一个类需要一个开始时间和结束时间，那么该类应该需要的东西：

*   `start_time`并且`end_time`都是有效的日期时间对象
*   `start_time`应该是之前`end_time`

任何可以在类构造函数中验证的方向（如果有的话）以及关于应该在哪里进行验证的任何一般信息都会有所帮助。

值得注意的是，我正在尝试使用 MVC 结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:18:40.510

数据验证是域对象的责任，[域对象](http://c2.com/cgi/wiki?DomainObject)是模型层的一部分。

不，您不应该在构造函数中进行任何计算。构造函数应该只为局部变量赋值。您应该验证*setters*中的信息，或者使用单独的公共方法。

此外，您不应将验证与数据完整性检查混淆（例如*“用户必须拥有唯一的电子邮件”*）。这些应该由存储抽象结构（如[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)）执行和/或由您的存储介质强制执行。当您从域对象中保存信息时，您的存储抽象结构可能会遇到错误。在这种情况下，他们将*错误状态*分配给域对象。

根据您的应用程序的结构，错误状态（由验证问题和数据完整性冲突引起的错误状态）可以不恰当地处理或临时存储在某个地方，例如：在会话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:41:45.880

您将问题标记为[php](/questions/tagged/php "显示标记为“php”的问题")和[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")。两者都是松散类型的语言，不会强制您的变量和 orguments 为特定类型。取决于您将如何处理这些值，这很好。有时，您必须检查，否则您的代码会产生错误。两种语言都提供了这样做的方法。

回答您的问题：是的，可以在构造函数上验证您的数据。但这也很无聊和凌乱，所以不要到处这样做。何时应该*这样*做取决于代码的结构，以及如何在更高级别上处理错误和异常。

# php - yii : 如何获取帖子数据？

> ID：12189427
> 
> 赞同：2
> 
> 时间：2012-08-30T03:23:45.697
> 
> 标签：php, jquery, ajax, yii

状态：通过 ajax 创建了一个包含项目列表的表单。将新项目添加到表单中工作正常。计算工作正常。但无法在控制器（创建）处获取添加的项目。

问：如何从视图的帖子中获取控制器的数据？

这是我的看法。

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'acc-recei-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>
    <?php
    Yii::app()->clientScript->registerScript('add-item', "
        $('#add-item').click(function(){

            //console.log(item_template);
            $('#template .template_item').clone().appendTo('#item_list');
            $('#item_list .template_item').fadeIn();

            return false;
        });

        $('.item-name').live('change', function(){
            var itemID = $(this).val(),
                vNode  = $(this);
            $.ajax({
                url: 'getitem/'+itemID,
                dataType: 'json',
                success: function(data){
                    var target = $(vNode).parents('tr');
                    //console.log('target tr: ' + target);
                    $(target).find('.price').text(data.item_price);
                }
            });

        });

        $('.qty').live('keyup', function(){
          var vNode  = $(this);
          var vQty = $(this).val();
          var target = $(vNode).parents('tr');
          var vPrice = $(target).find('.price').text();

          //console.log($(target).find('.price').text());

          var vrowtotal = vQty * vPrice;
          $(target).find('.row_total').text('$ ' + vrowtotal);
           findTotals();
        });

        function findTotals() {

            var subTotal = '';
            $('#item_list tr.template_item').each(function() {

                //console.log($('.row_total').text());              
                var row_total = 0,
                        price = Number($('.price',this).text());
                        qty   = Number($('.qty',this).val());

                    row_total = price*qty; 
                    subTotal = Number(row_total) + Number(subTotal);
            });
            subTotal = Number(subTotal);
            $('#grandtotal').text('$ '+ subTotal);

        }
");

    ?>
<table id="item_list" name="item_list[]">
<tr class="item_list">
    <td>name</td>
    <td>price</td>
    <td>qty</td>
    <td>row_total</td>
<tr>
</table>
<label id="grandtotal"></label>
    <p align="right">
        <?php echo CHtml::link('Add Item','#',array('class'=>'btn btn-info', 'id'=>'add-item')); ?>
    </p>
    <div class="row">
        <?php echo $form->labelEx($model,'acc_category_id'); ?>
        <?php
            echo $form->dropDownList($model,'acc_category_id', $acccategorieslist, array(
            'prompt'=>'Please select a category',
            'options'=>array("$model->acc_category_id"=>array('selected'=>'selected')),
            )
        ); 
        ?>
        <?php echo $form->error($model,'acc_category_id'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'customer_id'); ?>
        <?php echo $form->textField($model,'customer_id',array('size'=>11,'maxlength'=>11)); ?>
        <?php echo $form->error($model,'customer_id'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'job_id'); ?>
        <?php echo $form->textField($model,'job_id',array('size'=>11,'maxlength'=>11)); ?>
        <?php echo $form->error($model,'job_id'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'accmain_id'); ?>
        <?php echo $form->textField($model,'accmain_id',array('size'=>11,'maxlength'=>11)); ?>
        <?php echo $form->error($model,'accmain_id'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'date'); ?>
        <div class="controls">
        <?php 
            $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                'name'=>'AccRecei[date]',       
                'model'=>$model,
                'value' => $model->date,    
                'options'=>array(
                    'showAnim'=>'fold',
                    'dateFormat' => 'dd-mm-yy',                   
                ),
                'htmlOptions'=>array(
                    'style'=>'height:20px;'
                ),
            ));
            ?>

        <p> Expire Date should not be Current Date.</p>
        </div>
        <?php echo $form->error($model,'date'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'status'); ?>
        <?php echo $form->dropDownList($model,'status', $arr_status, array('prompt'=>'Please select a status')); ?>
        <?php echo $form->error($model,'status'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'description'); ?>
        <?php echo $form->textArea($model,'description',array('rows'=>6, 'cols'=>50)); ?>
        <?php echo $form->error($model,'description'); ?>
    </div>  

    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form -->

<table id="template" style="display:none;" >
<tr class="template_item">
    <td><?php
            echo $form->dropDownList(
                $model,
                'item_name', 
                $accitemslist, 
                array(
                    'prompt'=>'Please select a category',
                    'options'=>array("$model->acc_category_id"=>array('selected'=>'selected')),
                    'class'=>'item-name',
                    )                                    
                ); 
        ?></td>
    <td><label id="price" class="price"></label></td>
    <td><input type="text" name="item_qty[]" class="qty" /></td>
    <td><label id="row_total" class="row_total"></label></td>
<tr>
</table> 
```

这是我的控制器

```
public function actionCreate()
    {
        $model=new AccRecei;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['AccRecei']))
        {
            //$model->attributes=$_POST['AccRecei'];
            //if($model->save())
                //$this->redirect(array('view','id'=>$model->id));

            var_dump($_POST['AccRecei']);
        }

        $records = AccCategory::model()->findAll();
        $acccategorieslist = CHtml::listData($records, 'id', 'name');

        $records = AccItem::model()->findAll();
        $accitemslist = CHtml::listData($records, 'id', 'name');

        $arr_status = array('Open'=>'Open', 'Close'=>'Close', 'Late'=>'Late', 'Draft'=>'Draft', 'Partial'=>'Partial');
        $this->render('create',array(
            'model' => $model,
            'acccategorieslist' => $acccategorieslist,
            'accitemslist'=>$accitemslist,
            'arr_status'=> $arr_status,
        ));
    } 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-30T05:42:49.063

在视图

```
<table id="template" style="display:none;" >
<tr class="template_item">
    <td><?php
            echo $form->dropDownList(
                $model,
                'item_name[]', 
                $accitemslist, 
                array(
                    'prompt'=>'Please select a category',
                    'options'=>array("$model->acc_category_id"=>array('selected'=>'selected')),
                    'class'=>'item-name',
                    )                                    
                ); 
        ?></td>
    <td><input type="text" name="item_price[]" class="item-price" /></td>
    <td><input type="text" name="item_qty[]" class="item-qty" /></td>
    <td><label id="row_total" class="row_total"></label></td>
<tr>
</table> 
```

在控制器

```
for($i=0; $i < count($_POST['AccRecei']['item_name']); $i++)
            {
                echo    $_POST['AccRecei']['item_name'][$i] . " - " . $_POST['item_qty'][$i] . " - " . $_POST['item_price'][$i] . "<br />";
            } 
```

# java - 相同的测试使用 jdk6 和 jdk7 得到不同的结果

> ID：12189428
> 
> 赞同：0
> 
> 时间：2012-08-30T03:24:19.613
> 
> 标签：java, performance, long-integer, java-7, jdk6

在尝试比较数据类型“int”和“long”的性能时，我遇到了这个奇怪的问题，基本上我有两个单元测试：

```
@Test
public void testLongOperationPerformance(){
    StopWatch sw = new StopWatch();
    sw.start();
    long count = 0l;
    for(int i = 0; i < Integer.MAX_VALUE; i ++){
        count++;
    }
    sw.stop();
    System.out.println(count);
    System.out.println(sw.elaspedTimeInMilliSeconds());
}

@Test
public void testIntegerOperationPerformance(){
    StopWatch sw = new StopWatch();
    sw.start();
    int count = 0;
    for(int i = 0; i < Integer.MAX_VALUE; i ++){
        count++;
    }
    sw.stop();
    System.out.println(count);
    System.out.println(sw.elaspedTimeInMilliSeconds());
} 
```

这两个单元测试做同样的事情，不同的是一个使用 int 作为 counter 的数据类型，另一个使用 long 作为那个。结果：

```
jdk6u32 (64 bit):
test with long
2147483635
96
test with int
2147483647
2

jdk7 (64 bit)
test with long
2147483647
1599
test with int
2147483647
1632 
```

我注意到：

1.  在 jdk6u32 中，使用 int 进行测试比使用 long 进行测试要快得多
2.  在 jdk6u32 中，int 测试和 long 测试的测试结果不同
3.  在 jdk7 中，两个测试的速度差不多，而且都比 jdk6u32 慢得多
4.  在 jdk7 中，两个测试都得到了相同的结果

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T05:45:41.577

Java JIT 特别擅长消除不做任何事情的代码。在您的示例中，循环

```
long count = 0l;
for(int i = 0; i < Integer.MAX_VALUE; i ++){
    count++;
} 
```

可以替换为

```
long count = 0l;
count += Integer.MAX_VALUE * 1; 
```

您正在计时的是检测和移除循环需要多长时间。这个时间可能取决于它之前所做的事情，所以我建议以不同的顺序测试循环，看看是否会改变结果。

在 Java 6 和 7 中，许多循环优化被错误地优化。

例如，对于某些更新，这个无限循环并不总是无限的

```
for(int i=0; i < Integer.MAX_VALUE; i += 2) 
```

因此，某些更新会根据它们是否适用于该版本而开启或关闭不同的优化。我建议尝试最新版本的 Java 7，看看它是否有所作为。

# reflection - 验证一个接口是否满足另一个接口

> ID：12189432
> 
> 赞同：2
> 
> 时间：2012-08-30T03:24:58.120
> 
> 标签：reflection, interface, go, bdd

我正在为我正在编写的玩具包编写规范，虽然大部分规范都保证包中的各种结构满足主要的公共接口，但我也有兴趣指定接口必须要求的方法；我知道这有点迂腐，但我认为这将是一个巧妙的实验，并且会施加压力以保持公共界面的稳定。

这是我的第一次尝试：

```
type Roller interface {
        Min()  int
}

type minS struct {}
func (m minS) Min() int {return 0}
func (m minS) Max() int {return 0}

func RollerSpec(c gospec.Context) {

        var r Roller = minS{}

        c.Specify("has a minimum value.", func() {
                _, ok := r.(interface{Min() int})
                c.Expect(ok, Equals, true)
        })

        c.Specify("has a maximum value.", func() {
                _, ok := r.(interface{Max() int})
                c.Expect(ok, Equals, true)
        })

        c.Specify("has an expected value.", func() {
                _, ok := r.(interface{Exp() int})
                c.Expect(ok, Equals, true)
        })

        c.Specify("can be rolled.", func() {
                _, ok := r.(interface{Roll() int})
                c.Expect(ok, Equals, true)
        })
} 
```

如您所见，我的`Roller`界面只需要`Min()`但同时`minS`实现了`Min()`和`Max()`。我通过了前两个规范，即使`Runner`不满足`interface{Max() int}`因为我用来测试它的虚拟类型。同样，在没有基类型的情况下声明 r 会导致它无法满足所有规范。

很明显，为什么 Go 会在接口之间对实际存储的类型进行类型断言，但这不是我在这里寻找的。我还检查了反射包，但它似乎也只检查结构。有没有办法以编程方式检查接口是否需要给定的方法，而无需自己拉入解析包并爬取解析树以获取方法名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T18:27:01.267

简单地说，你不能。没有办法只存储一个接口，因为它不是一个具体类型，并且反射只适用于具体类型。请参阅反射包及其文档。

无论如何，您想做的事情似乎没有必要。界面是您的规格。看起来你想要做的是编写一个规范来描述你的规范，一旦你这样做了，最大的问题就是你在哪里停下来。一路下来都是乌龟:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:40:01.743

具有单个接口的简单类型断言应该可以做到。

```
type minRoller interface {
    Min() int
}

type maxRoller interface {
    Max() int
} 
```

在你的测试中：

```
if _, ok := r.(minRoller); ok {
    print("has a min value")
}
if _, ok := r.(maxRoller); ok {
    print("has a max value") 
} 
```

您的 Roller 界面可以嵌入较小的界面：

```
type MinRoller interface {
    minRoller
}

type MinMaxRoller interface {
    minRoller
    maxRoller
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T18:07:53.393

当然有一种方法 -`reflect.Type`接口包含`reflect.Method`与接口方法相对应的方法（但不要尝试调用这些方法！请参阅我的问题[Go reflection with interface embedded in struct - how to detect “real” functions?](https://stackoverflow.com/questions/29988632/go-reflection-with-interface-embedded-in-struct-how-to-detect-real-functions)）

使用它，循环访问接口的方法并检查这些方法是否也存在于另一个接口中（几乎）是微不足道的：

```
func InterfaceExtendsInterface(parent reflect.Type, child reflect.Type) bool {
    if parent.Kind() != reflect.Interface || child.Kind() != reflect.Interface {
        return false
    }
    for i := 0; i < parent.NumMethod(); i++ {
        m := parent.Method(i)
        if n, has := child.MethodByName(m.Name); !has {
            return false
        } else if !reflect.DeepEqual(m,n) {
            return false
        }
    }
    return true
} 
```

由于接口“扩展”（在接口中嵌入接口）的工作方式，我真的看不出两者之间的区别

```
type Foo interface {...}
type Bar interface { Foo; ... }
type Baz struct { ... } // reflect.TypeOf(Baz{}).CovertibleTo(reflect.TypeOf([]Bar{}).Elem()) 
```

和稍弱的

```
type Foo interface {...}
type Bar interface { ... }
type Baz struct { ... } // reflect.TypeOf(Baz{}).CovertibleTo(reflect.TypeOf([]Bar{}).Elem()) && 
                        // reflect.TypeOf(Baz{}).CovertibleTo(reflect.TypeOf([]Foo{}).Elem()) 
```

以至于我什至无法想到任何情况下，这两者会暗示对 ... 实例的非反射调用具有不同的语义（当然，如果不嵌入它，则必须直接`Baz`转换为)`Foo``Bar`

# mysql - 如何从MYSQL中的2个表中获取数据

> ID：12189438
> 
> 赞同：0
> 
> 时间：2012-08-30T03:25:53.190
> 
> 标签：mysql, database, join, left-join

假设我有 2 个表：成员和订单（Mysql）

```
Members : 
id   |   name
1    |   Lee
2    |   brad
Orders : 
id   |   member_id   |   status (1: paid, 2: unpaid)   |    total
1    |   1           |   1                             |   1000000 
2    |   1           |   1                             |   1500000
3    |   1           |   2                             |   1300000
4    |   2           |   1                             |   3000000 
5    |   2           |   2                             |   3500000
6    |   2           |   2                             |   3300000 
```

我有一个 sql 查询：

```
SELECT m.name,
       o.member_id,
       COUNT(o.id)  AS number_of_order,
       SUM(o.total) AS total2
FROM   orders o
       LEFT JOIN members m
              ON o.member_id = m.id
GROUP  BY o.member_id 
```

这给了我这个：

```
name   |   number_of_order   |   total2
Lee    |   3                 |   3800000
brad   |   3                 |   9800000 
```

我想要的只是这样的：

```
 name   |   number_of_order   |   total2
           |  Paid        Unpaid | Paid      Unpaid
    ------------------------------------------------
    Lee    |         3           |   3800000
           |  2             1    | 2500000   1300000
    ------------------------------------------------
    brad   |         3           |   9800000
           |  1             2    | 3000000   6800000
    ------------------------------------------------ 
```

如何进行可以给我结果的查询？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:36:39.017

您可以在`SUM/COUNT`函数中使用条件。

```
SELECT 
  m.name,
  COUNT(o.id) AS number_of_order,
  SUM(o.total) AS total2,
  COUNT(IF(o.status=1, 1, NULL)) AS paid_order,
  COUNT(IF(o.status=2, 1, NULL)) AS unpaid_order,
  SUM(IF(o.status=1, o.total, 0)) AS paid,
  SUM(IF(o.status=2, o.total, 0)) AS unpaid
FROM orders o 
LEFT JOIN members m ON o.member_id=m.id
GROUP BY o.member_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:42:57.030

尝试使用不同的别名和 where 子句多次列出订单表。就像是：

```
SELECT m.name,
       COUNT(po.id),
       COUNT(uo.id),
       COUNT(o.id),
       SUM(po.total),
       SUM(uo.total),
       SUM(o.total)
FROM   members m,
       orders o,
       orders po,
       orders uo
WHERE  o.member_id = m.id
       AND po.member_id = m.id
       AND uo.member_id = m.id
       AND po.status = 1
       AND uo.status = 2
GROUP  BY m.name 
```

这并不完全符合您的要求，但它应该让您朝着正确的方向前进。

# objective-c - 在 AppKit 中开发时，为什么 IB 会创建一个分配的属性，而不是保留？

> ID：12189439
> 
> 赞同：16
> 
> 时间：2012-08-30T03:25:53.910
> 
> 标签：objective-c, memory-management, appkit

我是一位经验丰富的 iOS 开发人员，我决定尝试一些 AppKit 开发。我在 API 方面进行了一些调整，但除此之外，我发现 OS X 开发是，容我们说，“熟悉”。

我一直在 Interface Builder 中构建我的 AppKit UI，并注意到当我使用 WYSIWYG 编辑器在我的代码文件中创建属性时，Apple 正在创建以下内容：

```
@property (assign) IBOutlet NSTableView *tableView; 
```

我觉得这很好奇，因为 iOS 中默认的做事方式会导致我这样做：

```
@property (nonatomic, retain) IBOutlet NSTableView *tableView; 
```

我意识到，在 Mac 开发中，我没有在移动设备上那样的内存限制，在移动设备上，视图可能会被卸载，并且可能需要对 UI 元素的强引用。

在 AppKit 案例中，我可以很好地假设我的 UI 元素将始终存在，除非我摆弄视图层次结构并将其从其父视图中删除。为了防止无意中访问悬空指针，在任何时候都有一个强引用似乎是谨慎的。

**为什么 Apple 在这里创建一个弱引用，而不是一个强引用？**

**我是否通过使用强引用（但在 中正确释放`dealloc`）来为一些意想不到的后果做好准备？这里有一些我想念的模式吗？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-30T04:10:18.707

作为文件的所有者，您应该拥有 nib 中的所有顶级对象。您通常不需要拥有这些对象中的任何对象，因为父对象将拥有其子对象；例如，一个窗口将拥有它的视图。

[AppKit 的 nib 加载器代表文件所有者隐式保留所有顶级对象。](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW10)（这在`@property`、合成访问器和 ARC 存在之前是有意义*的。）因此，即使相关属性是`weak`or`unsafe_unretained`*（后者是 的同义词`assign`），所有者实际上也将拥有顶级对象。如果你反过来创建这些属性`strong`（aka `retain`），那么 FO 对每个对象都有*两个*所有权：隐式所有权和`strong`-property 所有权。

假设您使用手动引用计数，您可以释放 中的隐式所有权`awakeFromNib`，但这只是成功了。只要您在加载 nib 后不打算替换任何这些对象（例如，将一个表视图换成另一个表视图），一个`unsafe_unretained`属性就可以正常工作，而无需多余的保留或任何已完成的工作。

`unsafe_unretained``assign`但是，出于某种原因，将其命名为（并且该名称优先于对象属性）。返回 window-and-its-views 示例，假设您拥有一个窗口并且知道它的一个视图。视图的父视图可能是它的唯一所有者，因此，当您关闭窗口（或用户关闭它）时，视图将被释放并因此被释放。如果您的视图属性是`unsafe_unretained`/ `assign`，您仍然知道这个现已死亡的对象，并且尝试向视图发送消息可能会导致崩溃或异常。

您应该切换到 ARC 并将属性声明为`weak`. 这样，就不会创建多余的所有权，并且该属性将`nil`在视图终止时自动设置为，从而防止过度释放崩溃。

（如果您不是文件的所有者，那么这些都不适用于您，您可能应该按照您认为合适的方式声明您的属性。`weak`或者`strong`可能是一个不错的选择，这取决于您如何看待您的所有权层次结构以及您使用什么样的对象'正在参考。）

在 iOS 上，UIKit 的作者去掉了现在有问题的隐式保留。您应该编写自己的所有权；如果你想从一个 nib 或 storyboard 中拥有一个对象，你写一个`strong`属性，如果你只是想知道它，你写一个`weak`或`unsafe_unretained`一个，正如你所期望的那样。

**TL;DR：** [歇斯底里的原因。](http://www.catb.org/jargon/html/H/hysterical-reasons.html)

# java - 在 Vaadin 中更改音频源

> ID：12189440
> 
> 赞同：0
> 
> 时间：2012-08-30T03:26:02.153
> 
> 标签：java, vaadin

我正在尝试在 Vaadin 中编写音乐播放器。我正在使用它内置的音频组件。

我希望它工作的方式是我在树中选择一个文件并播放该音频文件。

我在树处理程序中设置了正确的源文件：

```
Tree tree = new Tree();
    FilesystemContainer container = new FilesystemContainer(file);
    tree.setContainerDataSource(container);
    tree.setImmediate(true);
    mainWindow.addComponent(tree);

tree.addListener(new Property.ValueChangeListener() {

        @Override
        public void valueChange(ValueChangeEvent event) {

            System.out.println(event);
            File file = (File) event.getProperty().getValue();
            FileResource resource = new FileResource(file, application);
            audio.setSource(resource);
            audio.pause();
            audio.requestRepaint();
        }
    }); 
```

但是，我必须手动刷新页面才能使其正常工作。如何在不刷新页面的情况下让音频组件拾取新源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:00:39.627

听起来像是 HTML5 音频元素或相关浏览器的限制。

作为一种解决方法，您可以尝试删除并添加新的音频组件。这是非常轻量级的操作，不会造成任何额外的开销。

# c# - 我可以通过引用传递锁定对象吗？

> ID：12189445
> 
> 赞同：2
> 
> 时间：2012-08-30T03:27:09.570
> 
> 标签：c#, asynchronous, recursion, locking

我有一个产生几个异步任务的递归函数。每个任务更新一个公共字典对象。

我可以将锁对象作为函数中的参数与其他线程共享吗？

```
public class RecursiveTest
{ 

   void DoRecursiveWork(ref object myDictLock, dictionary<string,string> myDict)
   {
    // yadda.. async code that calls DoRecursiveWork()

   }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T03:32:33.563

假设你打算做这样的事情

```
// do something
lock (myDictLock) {
    // access the dictionary
}
// do something else 
```

您可以“通过引用”或“值”传递您的对象（即通过对引用的引用或通过引用的值，因为`object`是引用类型）。在这两种情况下，锁定对象都会起作用。当您通过引用传递时，您也可以分配在递归链顶部传递的变量，尽管我怀疑您打算这样做。

# vb6 - 如何检查一个值是否超过 2 个十进制数字

> ID：12189448
> 
> 赞同：0
> 
> 时间：2012-08-30T03:27:56.980
> 
> 标签：vb6

美好的一天..只是想问一下，是否可以检查该值是否超过 2 位十进制数字..？

希望早日收到你的消息..

谢谢，

关联

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:01:19.620

您使用 round 函数并将其与原始数字进行比较。所以...

```
Function MoreThan2Digits(N As Single) As Boolean
    MoreThan2Digits = (N - Round(N, 2)) <> 0
End Function 
```

# sql - 如何将名字修剪为单个字符？

> ID：12189450
> 
> 赞同：0
> 
> 时间：2012-08-30T03:28:54.407
> 
> 标签：sql, sql-server-2008, tsql

我有一列以全名格式存储数据，例如：

> 汤姆史密斯
> 
> 安德鲁·史密斯

是否有一个函数（或函数组合）可以用来将其转换为以下内容：

> T·史密斯
> 
> A.史密斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T03:31:55.230

您*应该*分别存储名字和姓氏。同时：

```
SELECT CASE WHEN FullName LIKE '% %' THEN 
  LEFT(FullName, 1) + '.' + SUBSTRING(FullName, CHARINDEX(' ', FullName), 255)
    ELSE FullName END
  FROM dbo.table; 
```

另一种选择：

```
SELECT COALESCE(LEFT(FullName, 1) 
  + '.' + SUBSTRING(FullName, NULLIF(CHARINDEX(' ', FullName), 0), 255), 
  FullName)
FROM dbo.table; 
```

这两个都处理单字名称，例如`Prince`or `Madonna`- 但它们不能正确处理您有中间名的情况。这种情况下的问题将是：

```
John Wayne Bobbitt
Billy Ray Cyrus
Lisa Van der Wal
Lee Harvey Oswald
Dennis Moseley Williams
James de Caan 
```

您如何确定其中哪些是中间名，哪些具有多字姓氏？如果您正在处理这种情况，请开始更用力地握拳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:35:49.983

```
Declare @t table(FullName Varchar(100))
Insert Into @t Values('Tom Smith'),('Andrew Smith'),('  Andrew '),('John Wayne Bobbitt'),(NULL) 
```

**- 解决方案**

```
SELECT 
    NewName = CASE WHEN CHARINDEX(' ', LTRIM(RTRIM(FullName))) > 0 THEN LEFT(LTRIM(RTRIM(FullName)),1)
              + '.'
              +SUBSTRING((LTRIM(RTRIM(FullName))),CHARINDEX(' ', LTRIM(RTRIM(FullName))),LEN(FullName))
         ELSE LTRIM(RTRIM(FullName))
    END
FROM @t 
```

//结果

**新名字**

```
T. Smith
A. Smith
Andrew
J. Wayne Bobbitt
NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:35:00.630

这应该有效：

```
SELECT SUBSTRING(nameCol, 1, 1) + '.' + SUBSTRING(nameCol, CHARINDEX(' ', nameCol), 100) 
```

# appharbor - BitBucket + AppHarbor 未触发

> ID：12189451
> 
> 赞同：1
> 
> 时间：2012-08-30T03:29:14.810
> 
> 标签：appharbor

我正在尝试在 2 之间配置自动部署。所以我转到 AppHarbor 中的选项，它启动了小向导，我选择了正确的存储库并单击添加，然后将我带到 Bitbucket 并授权它。

好吧，我预计它会触发，但显然它没有触发。

我做错什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:36:23.740

目前，当您创建网桥时我们不会触发构建，您必须在创建网桥后推送到您的 bitbucket 存储库。这是我们正在努力的事情，并且会在某个时候进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:19:32.247

我想通了，我认为系统插入了错误的令牌，当我手动添加它开始工作的令牌时。

# ios - NSSortDescriptor 代码中的 iOS 内存泄漏

> ID：12189457
> 
> 赞同：0
> 
> 时间：2012-08-30T03:29:57.663
> 
> 标签：ios, xcode, memory-leaks, nsarray, nsentitydescription

我在以下 CLASS 辅助函数中遇到了内存泄漏（见下文 >>）。

```
 + (NSArray *)findAllRoomsInContext:(NSManagedObjectContext *)context;
{
    NSEntityDescription *entity = [self entityDescriptionInContext:context];
    NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
    [request setEntity:entity];

    >> NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]; 
    >> NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil]; 
    [request setSortDescriptors:sortDescriptors];

    NSError *error = nil;
    NSArray *results = [context executeFetchRequest:request error:&error];
    if (error != nil)
    {
        //handle errors
    }

    sortDescriptors = nil;

    return results;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:38:17.193

你分配但`sortDescriptor`最后`sortDescriptors`不释放它们

```
NSSortDescriptor *sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)] autorelease]; 
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil]; 
```

# google-docs-api - 默认文档提要 URL 返回无效的请求 URI

> ID：12189463
> 
> 赞同：1
> 
> 时间：2012-08-30T03:30:42.020
> 
> 标签：google-docs-api, google-drive-api

我阅读文档的方式似乎是 oauth 用户的默认文档提要网址是[https://docs.google.com/feeds/default/private/full](https://docs.google.com/feeds/default/private/full)

[https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files](https://developers.google.com/google-apps/documents-list/#getting_a_list_of_documents_and_files)

```
OAuthRequest request = new OAuthRequest(
  Verb.GET, 
  "https://docs.google.com/feeds/default/private/full");
service.signRequest(accessToken, request);
Response response = request.send();
String bodyString = response.getBody();
JSONObject body = new JSONObject(bodyString); 
```

我从这个提要 url 收到一个无效的无效请求 URI 响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T22:30:57.370

您必须添加查询参数`?v=3`或发送 HTTP 标头`GData-Version: 3.0`才能使用 Documents List API v3。

还建议使用较新的 Drive API，因为它可以完成 Documents List API 所做的所有事情，并且由一组新的客户端库支持。有关 Drive SDK 的更多详细信息，请查看[https://developers.google.com/drive/](https://developers.google.com/drive/)

# c# - 如何加密 SQLite 数据库文件“.s3db”？

> ID：12189464
> 
> 赞同：2
> 
> 时间：2012-08-30T03:30:43.937
> 
> 标签：c#, sql, database, sqlite

我正在将`SQLite`数据库版本 3 与`C#`Windows 应用程序一起使用。我想使用`password`或任何其他加密方式加密 SQLite 数据库，以免客户端打开它。以及应该将哪些更改添加到`connection string`配置文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:04:17.363

```
Data Source=filename;Version=3;Password=myPassword; 
```

来源： http: [//www.connectionstrings.com/sqlite](http://www.connectionstrings.com/sqlite)

# java - 公共静态变量和Android活动生命周期管理

> ID：12189476
> 
> 赞同：28
> 
> 时间：2012-08-30T03:33:38.550
> 
> 标签：java, android, static, android-activity, android-lifecycle

根据文档，Android 操作系统可以杀死后台堆栈后面的活动。

所以，比如说我有一个应用程序并打开主活动（我们称之为活动 A）。在这个公共活动类中，我声明并初始化了一个公共静态变量（我们称之为“foo”）。然后在 Activity A 的 onCreate() 方法中更改“foo”的值。从 Activity A 开始，用户在我的应用程序中启动另一个名为 Activity B 的活动。在 Activity B 中使用变量“foo”。在用户导航到其他应用程序中的其他一些活动后，Activity B 会暂停。最终，在内存不足发生后，Activity A 和 Activity B 可以被杀死。用户导航回我的应用程序后，它会重新启动（实际上是“重新创建”）活动 B。

发生什么了：

1.  此时变量“foo”是否会具有 Activity A 的 onCreate() 方法运行时为其设置的值？

2.  变量“foo”不存在？

3.  变量“foo”存在，但现在是初始化值，而不是 Activity A 的 onCreate() 方法中设置的值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-30T03:36:43.040

如果进程被终止，那么所有静态变量都将重新初始化为其默认值。

因此，您在活动 A 中设置的任何值都不会持续存在

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-25T21:26:47.150

可以从 2:50 到这里查看很好的解释 [http://www.infoq.com/presentations/Android-Design](http://www.infoq.com/presentations/Android-Design)

以下是给想要手动测试此问题的用户的一些说明：创建 android v.4 模拟器，然后转到设置 -> 开发人员设置 -> 禁用后台任务。然后创建具有 2 个活动的示例 android 项目，在活动 A 中声明静态变量，在 onCreate() 方法中对其进行初始化。在活动 A 中放置一个按钮以启动活动 B。在活动 B 的 onCreate() 方法中，将 A.staticVar 的值打印到 logcat。

启动项目 - 出现活动 A。点击按钮 - 出现活动 B，静态变量的值被打印到 logcat。按主页按钮并启动任何其他程序 - 您的示例项目进程将被终止（因为您已禁用后台进程）。现在长按主页按钮 - 您将看到最近启动的程序列表。选择您的示例项目 - 操作系统将尝试从堆栈中恢复您项目的活动并重新创建上次运行的活动 B。但在此步骤中，由于 A.staticVar 将为空，程序将因 NullPointerException 而崩溃，我们正在尝试将其打印到 logcat。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-30T03:39:18.847

答案是（3）。如果您需要保留值，请在每个活动暂停时将它们保存在共享首选项中，并在恢复时恢复它们。`onCreate()`或者，您也可以维护一个“已初始化”静态标志，如果它为假，则从任何活动的方法中重新初始化静态变量。

# c++ - 抽象类的 C++ ILink32 错误

> ID：12189477
> 
> 赞同：0
> 
> 时间：2012-08-30T03:33:48.300
> 
> 标签：c++, class, abstract

我有一个名为 LibItem 的抽象类，以及一个派生自该类的 DVD 类。

这是我的代码：

DVD.h：

```
//---------------------------------------------------------------------------

#ifndef DVDH
#define DVDH

class DVD : public LibItem
{
public:
    DVD(const std::string&, const std::string&, const std::string&, const std::string&, const std::string&, const std::string&, int, const std::string&, const std::string&, const std::string&);
    void setRunningTime(int RunningTimeDetails);
    int getRunningTime();
    void setDirector(const std::string&);
    std::string getDirector();
    void setStudio(const std::string&);
    std::string getStudio();
    void setProducer(const std::string&);
    std::string getProducer();
    void PrintDetails();

private:
    DVD();
    int RunningTime;
    std::string Director;
    std::string Studio;
    std::string Producer;

};

//---------------------------------------------------------------------------
#endif 
```

DVD.cpp：

```
//---------------------------------------------------------------------------

#pragma hdrstop

#include "DVD.h"

DVD::DVD(const std::string& setItemTitle, const std::string& setItemAuthor, const std::string& setItemReleaseDate, const std::string& setItemCopyright, const std::string& setItemGenre, const std::string& setItemStatus, int setItemRunningTime, const std::string& setItemDirector, const std::string& setItemStudio, const std::string& setItemProducer)
{
setDetails(setItemTitle, setItemAuthor, setItemReleaseDate, setItemCopyright, setItemGenre, setItemStatus);
setRunningTime(setItemRunningTime);
setDirector(setItemDirector);
setStudio(setItemStudio);
setProducer(setItemProducer);
}
void DVD::setRunningTime(int RunningTimeDetails)
{
RunningTime = RunningTimeDetails;
}
int DVD::getRunningTime()
{
return RunningTime;
}
void DVD::setDirector(const std::string& DirectorDetails)
{
Director = DirectorDetails;
}
std::string DVD::getDirector()
{
return Director;
}
void DVD::setStudio(const std::string& StudioDetails)
{
Studio = StudioDetails;
}
std::string DVD::getStudio()
{
return Studio;
}
void DVD::setProducer(const std::string& ProducerDetails)
{
Producer = ProducerDetails;
}
std::string DVD::getProducer()
{
return Producer;
}
void DVD::PrintDetails()
{
cout << "Title: " << getTitle() << endl;
cout << "Author: " << getAuthor() << endl;
cout << "Release Date: " << getReleaseDate() << endl;
cout << "Copyrite: " << getCopyright() << endl;
cout << "Genre: " << getGenre() << endl;
cout << "Status: " << getStatus() << endl;
cout << "Running Time: " << getRunningTime() << endl;
cout << "Director: " << getDirector() << endl;
cout << "Studio: " << getStudio() << endl;
cout << "Producer: " << getProducer() << endl;
}

//---------------------------------------------------------------------------
#pragma package(smart_init) 
```

我收到此错误：

> [ILINK32 错误] 错误：未解析的外部 'DVD::DVD(std::basic_string, std::allocator >&, std::basic_string, std::allocator >&, std::basic_string, std::allocator >&, std::basic_string, std::allocator >&, std::basic_string, std::allocator >&, std::basic_string, std::allocator >&, int, std::basic_string, std::allocator >&, std::basic_string, std::allocator >&, std::basic_string, std::allocator >&)' 引用自 H:\2012\TRIMESTER 2\IT6253 - C++ PROGRAMMING\ASSESMENT\QUESTION 5\WIN32\DEBUG\QUESTION 5.OBJ

我可以帮忙解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:38:47.520

您的链接中缺少 DVD.o。如果您发布链接程序或 Makefile 文件的方式，我会告诉您在何处以及如何添加它。

一般来说，假设您的程序由 main.cpp 文件组成，它包括您的 DVD.h 以及其他头文件。我们还假设您使用命令编译（和链接）它：

```
g++ main.cpp -o myprogram 
```

为了能够在您的程序中使用 DVD 正文，您需要执行以下操作：

```
g++ main.cpp DVD.cpp -o myprogram 
```

当然，如果您使用 Makefile，它可能会有所不同，并且您可能会在链接 myprogram 代码的地方看到类似的内容`g++ main.o -o myprogram`：在这种情况下，您需要找到构建 main.o 的位置，并对 DVD.o 执行相同的操作。

我希望它会有所帮助。

# python - 如何在 HTML 页面中显示 blobstore 图像

> ID：12189479
> 
> 赞同：0
> 
> 时间：2012-08-30T03:33:53.450
> 
> 标签：python, google-app-engine

我是 GAE 和 Python 新手。

我有一个 GAE/Python 应用程序，用户在其中为应用程序创建大量 html 文件。文件内容以 ndb 类型存储为 blob 类型（连同文件夹和文件名）。我有数百个这样的文件记录。

如何在网页中显示 blob 字段（标签需要 url）？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:26:33.343

那这个呢？

模板：

```
Photo: <img src="/image?id={{someid}}" /> 
```

并且，在视图中（映射为`/image`）：

```
class GetImage(webapp.RequestHandler):
    def get(self):
        # retrieve the image from the blobstore using self.request.get('id')
        img = ... # omitted
        self.response.headers['Content-Type'] = 'image/png'
        self.response.out.write(img)

urls = [('/image', GetImage),]
application = webapp.WSGIApplication(urls)
if __name__ == "__main__":
    run_wsgi_app(application) 
```

# c - 为什么不能直接分配结构？

> ID：12189480
> 
> 赞同：29
> 
> 时间：2012-08-30T03:34:17.403
> 
> 标签：c, structure

假设我有一个带有 tag 的完全定义的结构`MyStruct`，并假设`x, y, ..., z`它的字段是允许的值。为什么是

```
struct MyStruct q = {x,y,..,z}; 
```

允许，但是

```
struct MyStruct q;
q = {x,y,...,z}; 
```

不允许？我觉得这很烦人。在我之前声明的第二种情况下，`q`我需要一个一个地为每个字段分配一个值：

```
q.X = x; q.Y = y; ... q.Z = z; 
```

`X, Y, ..., Z`的字段在哪里`MyStruct`。这背后有什么原因吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-30T04:06:29.130

您正在寻找的是复合文字。这被添加到 C99 中的语言中。

你的第一个案例：

```
struct MyStruct q = {x,y,..,z}; 
```

是特定于初始化的语法。你的第二种情况，在语言的迂腐中不是初始化，而是赋值。赋值的右侧必须是正确类型的结构。在 C99 之前，语言中没有用于编写结构文字的语法，这就是您正在尝试做的事情。{x,y,..,z} 看起来像一个块，里面有一个表达式。如果有人受到启发尝试将其视为文字值，尽管语言没有，但人们无法确定它的类型。（在您的上下文中，您可以做出一个很好的猜测。）

为了实现这一点并解决类型问题，C99 添加了语法，因此您可以编写：

```
q = (struct MyStruct){x,y,...,z}; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-30T03:46:49.853

您可以这样做，但您需要在聚合之前提供结构的类型：

```
struct MyStruct q;
q = (struct MyStruct){x,y,...,z}; 
```

# php - 为什么即使发送了无缓存标头，页面仍然在缓存？

> ID：12189487
> 
> 赞同：4
> 
> 时间：2012-08-30T03:35:31.403
> 
> 标签：php, javascript, google-chrome, caching, dygraphs

我已经对此进行了大量研究，并要求许多人提供帮助，但仍然没有成功。以下是详细信息...

我参与开发一个网站，该网站从各种数据文件中提取数据，将它们组合到一个临时的 .csv 文件中，然后使用流行的图形库绘制图形：dygraphs。该网站的大部分内容是用 PHP 编写的。确定绘制数据的参数存储在用户会话中，.csv 以用户会话命名并可供下载，然后将 .csv 文件写入脚本，将其传递给 dygraphs 对象。我们发现，即使发送了无缓存标头：

```
header("Cache-Control: no-cache, must-revalidate");  
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

许多用户在会话中间体验，（如果生成了足够多的不同图表）页面显示了较旧的页面静态渲染（他们在会话中早些时候绘制的数据），就好像它被缓存和加载而不是获得新的请求。但它只会变得更奇怪：

我已经在 Firefox 和 Chrome 中使用开发者工具进行了检查，两种浏览器都可以正常接收无缓存标头；即使在查看页面源时出现问题，源也是正确的内容（表/图例也是使用 php 动态创建的，源显示正确的表，但呈现的是较旧的内容）；页面开始正确渲染，直到图表即将显示，然后显示较旧的内容；较旧的内容显示为好像它是一个完全静态的覆盖 - 缓存的图形没有相同的动态功能（翻转数据点显示、缩放和平移等）并且好像正确的页面在它下面的某个地方（csv 文件的下载按钮会根据表格的大小移动。如果您单击下载 .csv 按钮，旧的静态页面不会执行任何操作，但是，如果您可以设法在其下方的页面中找到该文件，则可以单击并仍然下载 .csv。.csv 中的数据是正确的）

这是迄今为止我在开发中看到的最奇怪的事情之一。其他一些相关事实是，我个人遇到的所有问题都是在我使用 Chrome 时发生的。Firefox 用户没有报告过这些症状。IE用户也有同样的问题（IE用户被迫使用chrome frame）。

在这一点上，我束手无策。我们已经发送了 php 标头；我们尝试将 IIS 上 php 的缓存配置文件设置为“DisableCache”（或其他）；我们尝试向结果页面发送一个随机查询字符串；我们已经尝试了所有适当的元标记——都没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:45:34.837

您是否尝试过“Last-Modified”和“ETag”？并且只观看关于该图的 HTTP 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:47:44.553

只要您的服务器忽略 URL 参数，您就可以通过获取“url.csv？（随机数）”而不是“url.csv”来绕过任何浏览器缓存。

# java - 根据HashMap中的键值获取arraylist的值

> ID：12189489
> 
> 赞同：-3
> 
> 时间：2012-08-30T03:35:46.183
> 
> 标签：java

我有一个地图声明为

```
 Map<Integer,List<String>> parameter_map=new LinkedHashMap<Integer,List<String>>(); 
```

我想根据键值获取列表的值。我该怎么做。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:39:10.917

使用[`.get()`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#get%28java.lang.Object%29).

```
Integer value = new Integer(3);
List<String> aList = parameter_map.get(value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:52:41.810

在您的情况下，地图包含以下值。

```
parameter_map.put(1, <first instance of arrayList>);
parameter_map.put(2, <second instance of arrayList>);
... 
```

所以为了从地图中获取价值的价值，你需要使用：

```
List<String> al = parameter_map.get(1); 
```

为了从这个数组列表中获取值，您需要对其进行迭代。

```
 for(String s: al)
  System.out.println(" list value " + s); 
```

希望这会帮助你。

# java - 如何在java中创建超链接？

> ID：12189490
> 
> 赞同：0
> 
> 时间：2012-08-30T03:36:13.687
> 
> 标签：java, google-app-engine, hyperlink

我正在浏览[谷歌应用引擎教程](https://developers.google.com/appengine/docs/java/gettingstarted/usingusers)

一般来说，我对谷歌应用引擎、Java 和网络编程很陌生。所以我的问题是，在页面底部它说添加一个链接以允许用户注销。到目前为止，我有这个：

```
public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();

    if(user != null){
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, " + user.getNickname());

        String logoutLink = String.format("<a href=\"%s\">Click here to log out.</a>",
            userService.createLogoutURL(req.getRequestURI()));
        resp.getWriter().println(logoutLink);
    }else {
        resp.sendRedirect(userService.createLoginURL(req.getRequestURI()));
    }
} 
```

但是，完整的字符串不是链接，而是打印到包括标签在内的屏幕上。当我查看页面源代码时，我没有标签或网页附带的任何其他内容。考虑到我没有做任何输出，我想这是有道理的。我只是做一堆 resp.GetWriter().println() 语句来输出网页的其余部分，还是有其他我不知道的东西？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:40:13.087

您需要将内容类型更改为`text/html`而不是 .`text/plain`该`<a href`链接是一个 html 元素。然后只有浏览器会将其重新作为链接。

# objective-c - 在 Objective-C 程序中使用 GLM .obj 加载器

> ID：12189496
> 
> 赞同：0
> 
> 时间：2012-08-30T03:36:47.550
> 
> 标签：objective-c, opengl, .obj

我正在尝试使用 GLM 在我的 Objective-C 程序（Xcode 4.4 Mac Os X）中加载 .obj 对象。我已将 glm 文件夹添加到我的项目中。我尝试使用#import "glm/glm.hpp" 导入它，但程序没有构建。一些错误如下：（此错误在 GLM 文件中产生）

```
namespace glm{         //Unknown type name 'namespace'
namespace detail
{ ..... 
```

它没有找到 cstdlib、cmath 和其他库。

发生这种情况是因为我的程序在 Objective-c 中，而 GLM 不适用于这种语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:54:53.173

这些都是尝试使用 C 编译器编译 C++ 应用程序的症状。命名空间是 C++ 关键字，而 cstdlib、cmath 等是标准 C 头文件的 C++ 名称。您必须将项目迁移到 Objective-C++ 才能使用 GLM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:45:53.383

任何使用 GLM 库的文件都需要将文件扩展名重命名为 .mm，因为它使用的是 Objective-C++。另外，因为它只是一个文件，而不是一个框架，你只需要把`#import "glm.hpp"`

# php - 使用 PHP 和 MySQL 计算 6 个月的周期

> ID：12189500
> 
> 赞同：2
> 
> 时间：2012-08-30T03:38:04.167
> 
> 标签：php, mysql, date, period, date-arithmetic

晚上好。

如何计算 6 个月（学期或两个学期）的期限？

解释：有一个电子表格，我将其转换为 MySQL 数据库，其中包含以下相关的列**Course**、**Begin**和**Duration**。**Course**是一个字符串字段，结合另一个表中的信息返回**Duration**。**Begin**字段是课程开始的一年学期（如 2010-2 是 2010 秒学期）。持续时间是年数。

格式

表格1

```
**Course**       **Begin**
Graduation 1     2010-1 
```

表2

```
 **Course**      **Duration**
 Graduation 1    4,5 
```

2010-1 表示 2010 年第一学期，4.5（实际上是 4.5 年 - 四点五年）表示四年半，最终日期类似于 2014-1。不幸的是，字段格式来自另一个我无权更改的数据库，我只能导入数据。

这可能很简单，也可能非常简单。

[编辑]我希望现在是正确的。[编辑] 这将从第一个数据库导入，计算并导入另一个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:18:51.970

MySQL 没有对学期的标准支持，因此您必须先转换为月份（也支持季度，但就日期而言，使用月份更容易）。

这意味着您需要将“2010-1”替换为“2010-01-01”，将“2010-2”替换为“2010-07-01”。这可以用`REPLACE($begin, '-1', '-01-01')`和来完成`REPLACE($begin, '-2', '-07-01')`。

对于每个学期，您可以添加 6 个月：`DATE_ADD('2010-01-01', INTERVAL 6 MONTH)`将返回“2010-07-01”。将“持续时间”乘以 12，这将得出移动“开始”所需的月数。

# hadoop - 非常基本的猪拉丁初学者代码

> ID：12189505
> 
> 赞同：1
> 
> 时间：2012-08-30T03:38:31.267
> 
> 标签：hadoop, apache-pig

我是 hadoop 及其所有衍生产品的新手。我真的被大量可用的信息吓倒了。

但我意识到的一件事是，要开始实施/使用 hadoop 或分布式代码，必须从根本上改变他们思考问题的方式。

我想知道是否有人可以在以下方面帮助我。

所以，基本上（像其他人一样）我有一个原始数据。我想解析它并提取一些信息，然后运行一些算法并保存结果。

假设我有一个文本文件“foo.txt”，其中数据如下：

```
 id,$value,garbage_field,time_string\n
  1, 200, grrrr,2012:12:2:13:00:00
  2, 12.22,jlfa,2012:12:4:15:00:00
  1, 2, ajf, 2012:12:22:13:56:00 
```

正如你所看到的，这个id可以重复。这个id可以像一个客户花了多少钱！！我想要做的是将结果保存在一个文件中，其中包含每个客户在“早上”、“下午”、“晚上”、“晚上”花了多少钱（您可以定义一些时间段来定义早上和都是。例如这里可能

```
 1, 0,202,0,0 
1 is the id, 0--> 0$ spent in morning, 202 in afternon, 0 in evening and night 
```

现在我有一个 python 代码.. 但我必须在猪中实现它.. 才能开始。如果有人可以通过这个来写/指导我。这就是我开始所需要的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:25:14.780

我会这样开始：

```
foo = LOAD 'foo.txt' USING PigStorage(',') AS (
    CUSTOMER_ID:int, 
    DOLLARS_SPENT:float, 
    GARBAGE_FIELD, 
    TIME_STRING:chararray
);

foo_with_timeslots = FOREACH foo {
    GENERATE 
        CUSTOMER_ID,
        DOLLARS_SPENT,
        /* DO TIME SLOT CALCULATION HERE */ AS TIME_SLOT
    ;
} 
```

我对 pig 中的日期/时间值了解不多，所以我将把如何从时间字符串转换为时间段的方法留给你。

```
id_grouped_foo_with_timeslots = GROUP foo_with_timeslots BY (
    CUSTOMER_ID, 
    TIME_SLOT
);

-- Calculate how much each customer spent at time slots
spent_per_customer_per_timeslot = FOREACH id_grouped_foo_with_timeslots {
    GENERATE 
        group.CUSTOMER_ID as CUSTOMER_ID,
        group.TIME_SLOT as TIME_SLOT,
        SUM(foo_with_timeslots.DOLLARS_SPENT) as TOTAL_SPENT
    ;
} 
```

您将在花费的_per_customer_per_timeslot 中获得如下输出

```
1,Morning,200
1,Evening,100
2,Afternoon,30 
```

此时重新分组数据并将其放入您想要的形状应该是微不足道的。

# wpf - WPF 将类绑定到列表框

> ID：12189506
> 
> 赞同：0
> 
> 时间：2012-08-30T03:38:37.647
> 
> 标签：wpf, expression-blend

我使用了 exprssion blend4 编辑 itemcontainerstyle 并在项目中增加了 3 个文本块。现在，我想将 3 个文本块绑定到一个类。该类有 3 个不同的属性。例如，我有一个学生班级，学生有姓名、年龄和专业。我想将全校学生绑定到列表框，每个文本块显示特定信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:11:32.973

您至少应该阅读 MSDN[数据绑定概述](http://msdn.microsoft.com/en-us/library/ms752347.aspx)。它提供了有关 WPF 中数据绑定的必要基础知识。

# sql - 如何复制关系表中的数据？

> ID：12189509
> 
> 赞同：0
> 
> 时间：2012-08-30T03:39:04.177
> 
> 标签：sql, sql-server-2008

目前，我有 2 张桌子：

*   表 A ( `master`) 有 3 列：tblA ( `tblA_ID`, `name`, desc) （`tblA_ID`是身份密钥）
*   表 B ( `detail`) 有 4 列：tblB ( `tblB_ID`, `tblA_ID`, `name`, desc)

`Table A`有100条记录，每条记录在关系表B中有10条记录。

我想要的是为这 100 个 tblA_ID 中的每一个在表 2 中添加 1.000.000 条记录。或者更确切地说，为每个 tblA_ID 添加 999.990 条记录，因为表 B 中的每个 ID 已经有 10 条记录。

我的解决方案是使用`cursors`, 在表 A 中逐一获取，每个`tblA_ID`, 获取它，在表 B 中找到它的数据，然后插入到两个表中。

那么，有可能吗？您对解决此案有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:38:45.267

从我想了解的情况来看，您似乎正在尝试插入虚拟数据进行测试。有一些软件可以完成你所追求的。我发现非常好的一个是：

RedGate SQL 数据生成器：[http ://www.red-gate.com/products/sql-development/sql-data-generator/](http://www.red-gate.com/products/sql-development/sql-data-generator/)

这有一个 14 天的试用期来测试它。

有一些免费选项可用，但不是很好，因为 redgate 的软件自己处理表关系。

免费生成器之一是：[http ://www.generatedata.com](http://www.generatedata.com)

您可以下载 csv 文件并将其添加到表中，方法是右键单击数据库，将鼠标悬停在**Tools**上，然后单击**Import data**

# c# - 如何通过绑定到复选框来过滤表格项？

> ID：12189512
> 
> 赞同：0
> 
> 时间：2012-08-30T03:39:15.400
> 
> 标签：c#, wpf, mvvm

我有一些表（使用 ListView），如果选中了某个复选框，我想在表中显示一些对象（制作过滤器）....（如果未选中该复选框，我想显示所有表项）

我如何使用 mvvm 来做到这一点？我无法使用包含 xaml 的 .cs 文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:38:26.013

您可以在 ViewModel 中绑定复选框的 IsChecked 属性。在属性设置器中，您可以过滤绑定到 ListView 的集合。

**XAML：**

```
<CheckBox IsChecked="{Binding IsChecked}"/> 
```

**视图模型：**

```
private bool _isChecked;
public bool IsChecked
{
   get
   {
     return _isChecked; 
   }
   set
   {
     _isChecked = value;
     //filer your collection here
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T07:06:02.137

这是一个小例子，它是如何工作的

xaml 中的代码，绑定到 FilterItems 属性

```
<CheckBox Content="should i filter the view?" IsChecked="{Binding FilterItems}" />
<ListView ItemsSource="{Binding YourCollView}" /> 
```

在您的模型视图中隐藏代码

```
public class MainModelView : INotifyPropertyChanged
{
    public MainModelView()
    {
        var coll = new ObservableCollection<YourClass>();
        yourCollView = CollectionViewSource.GetDefaultView(coll);
        yourCollView.Filter += new Predicate<object>(yourCollView_Filter);
    }

    bool yourCollView_Filter(object obj)
    {
        return FilterItems
            ? false // now filter your item
            : true;
    }

    private ICollectionView yourCollView;
    public ICollectionView YourCollView
    {
        get { return yourCollView; }
        set
        {
            if (value == yourCollView) {
                return;
            }
            yourCollView = value;
            this.NotifyPropertyChanged("YourCollView");
        }
    }

    private bool _filterItems;
    public bool FilterItems
    {
        get { return _filterItems; }
        set
        {
            if (value == _filterItems) {
                return;
            }
            _filterItems = value;
            // filer your collection here
            YourCollView.Refresh();
            this.NotifyPropertyChanged("FilterItems");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String propertyName)
    {
        var eh = PropertyChanged;
        if (eh != null) {
            eh(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

**编辑** 一个完整的例子[在这里](https://github.com/punker76/sharpdevelop_projects/tree/master/filter_table_item_by_checkbox)

希望有帮助

# facebook - 如何使用 Facebook 的 API 获取一组用户被邀请参加的所有活动？

> ID：12189517
> 
> 赞同：1
> 
> 时间：2012-08-30T03:39:29.913
> 
> 标签：facebook, facebook-graph-api, facebook-fql

假设我想获取 Bob、Jane 和 Joe 被邀请参加的所有活动。只有当所有三个都被邀请时，才应该返回一个事件。使用 Facebook 的 API 最有效的方法是什么？显然我可以单独检索每个用户的事件，然后将它们相交，但这似乎很慢。

以下是可以使用 FQL 查询的相关事件表：[https ://developers.facebook.com/docs/reference/fql/event_member/](https://developers.facebook.com/docs/reference/fql/event_member/)

但是，FQL 似乎不支持 INTERSECT，这在这里会有所帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-01T14:37:55.107

似乎没有办法只获取某些用户组是成员的事件。似乎您能做的最好的事情就是获取每个人参加的所有活动：

```
SELECT eid, uid, rsvp_status FROM event_member WHERE
   uid IN (BOB'S_UID, JANE'S_UID, JOE'S_UID) 
```

回复将为您提供这些人中的任何一个人正在参加的所有活动。您需要遍历响应以查找所有三个人都参加的活动。

我尝试将`uid [=/IN] n's_UID`语句与`AND`. 这不适用于我的两个朋友参加的示例活动。

# c# - 如何在reportviewer c#中将数据库中的值显示为列标题

> ID：12189518
> 
> 赞同：0
> 
> 时间：2012-08-30T03:39:41.313
> 
> 标签：c#, mysql

我希望数据库中的数据通过从表中检索数据成为列标题名称。该表有两个字段，TimingID 和 Timing，我想在reportviewer 中将Timing 显示为列标题。实际上，我正在创建一个时间表，将时间显示为列，以便将员工安排在各自的时间范围内。我希望所有时间都显示为标题。我希望报告看起来像这样。

```
LocationStation | 0000 | 0100 | 0200 | 0300 | 0400 | 0500 | 0600 | 0700 | 0800 | 0900 | 1000 | 1100 | 1200
T5-PML          | John | John | John | John | John | John | John | John | John | John | John | John 
```

所以这意味着员工“约翰”从 00:00 到 12:00 工作。Timing 存储所有时隙，如列标题所示。我想这样展示它。

请给我一些关于如何编写SQL语句的想法？

提前致谢。

# gcc - 如何在没有优化的情况下将 gcov 与 gcc 一起使用？

> ID：12189519
> 
> 赞同：4
> 
> 时间：2012-08-30T03:39:46.623
> 
> 标签：gcc, code-coverage, gcov, lcov, cunit

我有一个这样的测试代码：

```
int diff21(int n)
{
    if (n <= 21)
    {
        return 21 - n;
    }
    else
    {
        return (n - 21) * 2;
    }
} 
```

我添加了编译标志：`-fprofile-arcs -ftest-coverage`提供覆盖数据。

我写了这样的测试代码：

```
CU_ASSERT(diff21(19) == 2); 
```

我使用 lcov 生成了一个 html 报告，它说`else`分支`return (n - 21) * 2`已执行，所以我得到了 100% 的行覆盖率。**这不是真的**

我google了一下，发现就是因为[这个](http://gcc.gnu.org/onlinedocs/gcc-4.5.4/gcc/Gcov-and-Optimization.html#Gcov-and-Optimization)——gcc优化可以通过将一些简单的代码行与其他行组合来消除它们，**但是如果我不应该使用`-fprofile-arcs -ftest-coverage`标志，我应该如何生成覆盖数据？**

顺便说一句，我正在使用 netbeans 和 cygwin 进行单元测试，我不认为手动调用`gcov`makefile 或脚本对我有好处。

仅供参考，我正在使用 lcov，如下所示：

```
#!/bin/bash

rm -rf coverage_report
rm -f app.info

lcov -b . -d . -c -o app.info
mkdir coverage_report
genhtml --legend --highlight -o coverage_report app.info
rm -f app.info
lcov -d . -z 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-20T08:38:00.020

尝试使用`-O0`标志编译。

# youtube-api - 是否有免费的无限 API 来获得 Youtube 音乐视频的前 100 名广告牌？

> ID：12189523
> 
> 赞同：0
> 
> 时间：2012-08-30T03:40:09.473
> 
> 标签：youtube-api

在[http://www.youtube.com/music](http://www.youtube.com/music)上，有一个 Billboard hot 100 榜单。是否有 API 以编程方式获取此列表？

我知道有一个 youtube API 可以获取热门音乐视频：[http](http://gdata.youtube.com/feeds/api/standardfeeds/most_popular_Music?v=2&max-results=50&time=this_week) ://gdata.youtube.com/feeds/api/standardfeeds/most_popular_Music?v=2&max-results=50&time=this_week ，但它只返回 50 个视频和列表不是公告牌排行榜。

还有一个公告牌前 100 名的 rss，[http://www.billboard.com/rss/charts/hot-100](http://www.billboard.com/rss/charts/hot-100)，但它不返回 Youtube 视频链接和缩略图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:42:30.803

您可以使用分页获得结果。Jeffrey Posnick 举了一个例子来说明如何做到这一点：

[https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/4sjeUOy9ojE](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/4sjeUOy9ojE)

```
int count = 1; 
    boolean moreResults = true; 
    while (moreResults) { 
      for (VideoEntry videoEntry : videoFeed.getEntries()) { 
        // Do whatever you'd like with videoEntry... 
        System.out.println(videoEntry.getMediaGroup().getVideoId()); 
      } 
      if (count++ >= 10) { 
        moreResults = false; 
      } else { 
        Link nextLink = videoFeed.getNextLink(); 
        if (nextLink == null) { 
          moreResults = false; 
        } else { 
          videoFeed = service.query(new YouTubeQuery(new 
URL(nextLink.getHref())), VideoFeed.class); 
        } 
      } 
    } 
```

# iphone - 在 UIIImageView 上长按，创建一个克隆的“幽灵”图像，然后将其拖动到周围

> ID：12189525
> 
> 赞同：0
> 
> 时间：2012-08-30T03:40:38.390
> 
> 标签：iphone, uigesturerecognizer

我有一个示例项目，我正在尝试测试这种行为。我有两个 UIImageViews 并排。我希望能够在左侧或右侧 UIImageView 上长按，创建一个半透明的克隆图像，并将其拖动到另一个 UIImageView 以交换图像。

例如，要交换图像，用户可以执行以下操作：

1.  点击并按住左侧的 UIImageView
2.  触摸坐标处将出现一个克隆的、较小的“幽灵”图像
3.  用户将克隆的图片拖到右边的 UIImageView
4.  用户将手指从屏幕上松开以“放下”克隆的图像
5.  然后左右 UIImageViews 可以淹没他们的图像。

这里有一些图片来说明：

原始状态：

[http://d.pr/i/PNVc](http://d.pr/i/PNVc)

长按左侧 UIImageView 后，将较小的克隆图像添加为子视图：

[http://d.pr/i/jwxj](http://d.pr/i/jwxj)

我可以检测到长按并制作克隆图像，但除非我松开手指并在屏幕上再次触摸，否则我无法平移该图像。

我希望能够一次完成所有操作，而无需用户将手指从屏幕上移开。

我不知道这是否是正确的方法，但这就是我现在的做法。谢谢你的帮助！

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self addLongPressGestureToPiece:leftImageView];
    [self addLongPressGestureToPiece:rightImageView];
}

- (void)addLongPressGestureToPiece:(UIView *)piece
{
    NSLog(@"addLongPressGestureToPiece");
    UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressPiece:)];
    [longPressGesture setDelegate:self];
    [piece addGestureRecognizer:longPressGesture];
    [longPressGesture release];
}

- (void)addPanGestureRecognizerToPiece:(UIView *)piece
{
    NSLog(@"addPanGestureRecognizerToPiece");
    UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panPiece:)];
    [panGesture setMaximumNumberOfTouches:1];
    [panGesture setDelegate:self];
    [piece addGestureRecognizer:panGesture];
    [panGesture release];
}

- (void)longPressPiece:(UILongPressGestureRecognizer *)gestureRecognizer
{
    UIImageView *piece = (UIImageView*)[gestureRecognizer view];

    CGPoint point = [gestureRecognizer locationInView:self.view];

    if(gestureRecognizer.state == UIGestureRecognizerStateBegan)
    {
        NSLog(@"UIGestureRecognizerStateBegan");

        // create the semi-transparent imageview with the selected pic

        UIImage *longPressImage = [piece image];
        UIImageView *draggableImageView = [[UIImageView alloc] initWithFrame:CGRectMake(point.x - longPressImage.size.width/6/2, point.y - longPressImage.size.height/6/2, longPressImage.size.width/6, longPressImage.size.height/6)];
        draggableImageView.image = longPressImage;
        draggableImageView.alpha = 0.5;
        draggableImageView.userInteractionEnabled = YES;
        [self.view addSubview:draggableImageView];

        [self addPanGestureRecognizerToPiece:draggableImageView];
        photoView.userInteractionEnabled = NO;
    }
    else if(gestureRecognizer.state == UIGestureRecognizerStateChanged)
    {
        NSLog(@"Changed");
    }
    else if(gestureRecognizer.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"Ended");
        photoView.userInteractionEnabled = YES;
    }

}

- (void)adjustAnchorPointForGestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
{
    NSLog(@"adjustAnchorPointForGestureRecognizer");
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan) {
        UIView *piece = gestureRecognizer.view;
        CGPoint locationInView = [gestureRecognizer locationInView:piece];
        CGPoint locationInSuperview = [gestureRecognizer locationInView:piece.superview];
        piece.layer.anchorPoint = CGPointMake(locationInView.x / piece.bounds.size.width, locationInView.y / piece.bounds.size.height);
        piece.center = locationInSuperview;
    }
}

- (void)panPiece:(UIPanGestureRecognizer *)gestureRecognizer
{
    NSLog(@"pan piece");
    UIView *piece =[gestureRecognizer view];

    [self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

    CGPoint translation = [gestureRecognizer translationInView:[piece superview]];

    // if velocity.y is positive, user is moving down, if negative, then moving up
    CGPoint velocity = [gestureRecognizer velocityInView:[piece superview]];

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged)
    {
        [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y + translation.y)];

        [gestureRecognizer setTranslation:CGPointZero inView:[piece superview]];
    }
    else if([gestureRecognizer state] == UIGestureRecognizerStateEnded)
    {
        NSLog(@"piece y %f", piece.frame.origin.y);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:45:00.680

这可能是因为在创建图像（以及手势识别器）之前已经检测到触摸。我建议事先创建重影图像，但将它们隐藏起来。这样，手势识别器实际上会被触发，因为幻影图像已经存在。

但是，如果您有很多图像，这可能会很昂贵。如果性能不好，您也可以考虑只创建图像视图，但仅在触摸时为这些视图设置图像。这样您就不必不必要地将图像加载到内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T21:35:42.017

对我来说，我发现由于 .begin 状态多次调用 longGestureAction ，我得到了幻影图像。虽然我知道 .changed 将是连续的，但我发现（并且文档确认）每个状态都可以发生多次。因此，当您从 GraphicsContext 创建图像时，在 .begin 状态下，它会因多次调用而中断 - 导致旧调用出现重影。像我一样在你的代码中设置一个守卫，以防止这种情况发生。问题解决了。

# oracle11g - 使用此脚本后我还需要插入 id 值吗？

> ID：12189531
> 
> 赞同：0
> 
> 时间：2012-08-30T03:42:00.703
> 
> 标签：oracle11g

我在下面有一个脚本 - 我不知道它是否会产生与自动增量相同的效果。当我开始在我的数据库中插入行时，我不想插入 id。我希望数据库在我插入非 ID 行时自动生成并插入它们。

```
CREATE TABLE myschema.mytable
(id NUMBER PRIMARY KEY NOT NULL,
name VARCHAR2(30));

CREATE SEQUENCE myschema.test1_sequence
START WITH 1
INCREMENT BY 1;

create or replace trigger myschema.auto_increment
before insert on myschema.mytable
for each row
begin
select test1_sequence.nextval into :new.id from dual;
end;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:50:48.147

是的，它会工作，除了你不必使用

```
id NUMBER PRIMARY KEY NOT NULL 
```

因为`PRIMARY KEY`已经包含`NOT NULL`约束，所以

```
id NUMBER PRIMARY KEY 
```

足够。

# iphone - 真正简单的 CoreData 关系但返回 nil 和 null？

> ID：12189533
> 
> 赞同：19
> 
> 时间：2012-08-30T03:42:14.393
> 
> 标签：iphone, ios, core-data, entity-relationship, one-to-one

在过去的 4 个小时里，这个错误一直困扰着我。

此外，当我交换它并首先获取用户数据然后是消息数据时......`User.name`会显示，但`Message.message`不会。所以数据肯定会进入，但它们之间的关系似乎被打破了。

![在此处输入图像描述](../Images/ad9770d9deec90e977d46ffcc14b6f4e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T03:49:04.027

首先，+1 表示您为说明您的问题而创建的图像所做的努力。

问题的原因是您从未将用户分配给消息（反之亦然）。

尝试

```
message.fetchUser = user; 
```

或者

```
user.fetchMessage = message; 
```

然后保存您的上下文并执行获取请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:20:49.493

正如罗格所说，我需要将用户分配给消息（反之亦然）。基本上，我将这段代码放在输入数据的位置之后。

```
messageDetails.fetchUser = userDetails 
```

# ajax - 如何使用 Ajax 功能订阅 ActiveMQ 主题。

> ID：12189539
> 
> 赞同：1
> 
> 时间：2012-08-30T03:43:21.930
> 
> 标签：ajax, jsp, jakarta-ee, activemq, long-polling

我使用 ActiveMQ 作为我的 JMS 提供者和 JSP 来构建实时 Web 应用程序。Web 应用程序应该订阅在其他一些应用程序中生成的主题。

我已经在 Tomcat 中成功部署了我的 we web 应用程序。另外，我已将所有需要的 jar 文件放在 lib 目录中。但是，我仍然收到错误，请参阅 Google Chrome 的以下错误信息。有人可以告诉我如何解决这个问题。

![在此处输入图像描述](../Images/043cc3424a9ff9b8859cd8ef7ca70643.png)

![在此处输入图像描述](../Images/bc8d28c15fccbc2ff946212c81372964.png)

我的 web.xml

```
 <context-param>
        <param-name>org.apache.activemq.brokerURL</param-name>
        <param-value>vm://localhost</param-value>
      </context-param>

     <servlet>
          <servlet-name>AjaxServlet</servlet-name>
          <servlet-class>org.apache.activemq.web.AjaxServlet</servlet-class>
      <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
      <servlet-name>AjaxServlet</servlet-name>
      <url-pattern>/amq/*</url-pattern>
  </servlet-mapping>

  <servlet>
      <servlet-name>MessageServlet</servlet-name>
      <servlet-class>org.apache.activemq.web.MessageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
      <servlet-name>MessageServlet</servlet-name>
      <url-pattern>/message/*</url-pattern>
  </servlet-mapping> 
```

我的 index.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Rainbow for Nurse Station</title>

<script type="text/javascript" src="amq/amq.js"></script>
<script type="text/javascript">

var amq = org.activemq.Amq;
amq.init({ 
uri: 'amq', 
logging: true,
timeout: 20
});

var myHandler =  
{  
  rcvMessage: function(message)  
  {  
    document.writeln(message); 
  }  
};  

amq.addListener("test", "topic://RAINBOW_NURSECALL", myHandler.rcvMessage);

</script>

</head>
<body>

None.

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:00:44.077

您似乎只是错过了*之前* `amq.js`包含以下 2 个脚本：

```
<script type="text/javascript" src="<your_path>/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="<your_path>/amq_jquery_adapter.js"></script> 
```

因为`org.activemq.Amq`需要`org.activemq.AmqAdapter`等

# java - 可见性设置为 false 后的 SWT 组件重新布局

> ID：12189543
> 
> 赞同：11
> 
> 时间：2012-08-30T03:43:53.380
> 
> 标签：java, layout, swt

假设我有一个`GridLayout`列 = 1 的复合材料。（类似于垂直流布局）

我已将标签 1、标签 2、标签 3 添加到此复合材料中，它们将相应地出现。

```
----------
Label 1  |
Label 2  |
Label 3  |
---------- 
```

那么，如果我将标签 2 的可见性设置为`false`，标签 3 是否可以向上移动以替换标签 2？如果将标签 2 的可见性设置回`true`，标签 3 会向下移动吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T08:46:28.323

一个非常简单的解决方案可以使用`GridData::exclude`属性。例如，

### 代码

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Event;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Listener;
import org.eclipse.swt.widgets.Shell;

public class HideLabel 
{
    public static void main(String[] args)
    {
        Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, false));
        shell.setText("Hide Label");

        Label label = new Label(shell, SWT.NONE);
        label.setText("Label 1");

        final Label bHidden = new Label(shell, SWT.NONE);
        bHidden.setText("Label 2");
        GridData data = new GridData();
        data.exclude = false;
        data.horizontalAlignment = SWT.FILL;
        bHidden.setLayoutData(data);

        label = new Label(shell, SWT.NONE);
        label.setText("Label 3");

        Button button = new Button(shell, SWT.CHECK);
        button.setText("hide");
        button.addListener(SWT.Selection, new Listener() {
            public void handleEvent(Event e) {
                Button b = (Button) e.widget;
                GridData data = (GridData) bHidden.getLayoutData();
                data.exclude = b.getSelection();
                bHidden.setVisible(!data.exclude);
                shell.layout(false);
            }
        });
        shell.setSize(200, 200);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

# binary-tree - 二叉树定义

> ID：12189547
> 
> 赞同：0
> 
> 时间：2012-08-30T03:44:31.193
> 
> 标签：binary-tree

[我在Wikipedia](http://en.wikipedia.org/wiki/Binary_tree#Definition_in_graph_theory)中看到了二叉树的这个定义：

> 定义二叉树的另一种方法是在有向图上递归定义。二叉树是：
> 
> 单个顶点。
> 
> 由两棵二叉树组成的图，添加一个顶点，然后添加一条从新顶点指向每个二叉树根的边。

那么如何才能拥有一个具有一个根和一个左子的二叉树，如下所示：

```
 O
        /
       O 
```

这是二叉树吧？我在这里想念什么？

请不要只说“维基百科可能是错误的”，我在其他几个地方也看到过这个定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:54:02.277

正确的。一棵树可以是空的（nil）

假设你有两棵树：一棵有一个顶点，另一棵是空的（nil）。它们看起来像这样：

```
O   . 
```

请注意，我为 (nil) 树使用了一个点。

然后我添加一个新顶点，并将新顶点的边添加到现有的两棵树（请注意，我们不会从现有树中获取边并将它们连接到新顶点 - 这是不可能的。）。所以它现在看起来像这样：

```
 O
  / \
 O   . 
```

由于没有绘制通向 (nil) 的边，因此这里是最后的内容：

```
 O
  /
 O 
```

我希望它澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:30:15.630

维基百科可能是错误的。二叉树是有限的数据结构，必须允许子树为空，否则二叉树将是无限的。二叉树的递归定义的基本情况必须允许单个节点或空树。

第 14.4 节的[Touch of Class: An Introduction to Programming Well Using Objects and Contracts，Bertrand Meyer，Springer Verlag，2009。© Bertrand Meyer，2009。](http://touch.ethz.ch/recursion.pdf)对二叉树有更好的递归定义

```
Definition: binary tree

A binary tree over G, for an arbitrary data type G, is a finite set of items called
nodes, each containing a value of type G, such that the nodes, if any, are
divided into three disjoint parts:
  • A single node, called the root of the binary tree.
  • (Recursively) two binary trees over G, called the  left subtree and right subtree.

The definition explicitly allows a binary tree to be empty (“the nodes, if any”).
Without this, of course, the recursive definition would lead to an infinite
structure, whereas our binary trees are, as the definition also prescribes, finite.
If not empty, a binary tree always has a root, and may have: no subtree; a
left subtree only; a right subtree only; or both. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:49:28.677

这取决于您用于二叉树的算法：至于冰淇淋，有很多口味:)

一个示例是，当您在一个节点上混合使用节点指针和叶指针时，当您在完整节点上插入新值时，平衡系统决定创建第二个节点（无论是根节点还是另一个节点）：而不是创建一个根和两个叶子，通过拆分它，创建另一个节点更经济。

# ruby-on-rails-3 - 使用咖啡脚本处理表单

> ID：12189551
> 
> 赞同：0
> 
> 时间：2012-08-30T03:45:32.100
> 
> 标签：ruby-on-rails-3, forms, coffeescript

这似乎是最常见的咖啡脚本之一，但在对 stackoverflow 和谷歌进行广泛搜索之后，我找不到任何例子。

由于各种原因，我试图让coffeescript处理标准的rails表单提交。想象一个带有名称（字符串）、年龄（整数）和生日（日期）的 User 类的表单（由 rails 生成）——因此表单具有命名的字段对象。

```
$(document).ready ->
  $('form').submit ->
    name = form.name.value
    age = form.age.value
    birthday = form.birthday.value
    User.create(:name => name, :age => age, :birthday => birthday) 
```

另一个问题是，我希望它呈现一个不同的页面而不是 /user/，我不清楚如何做到这一点。

我已经尝试了代码，但似乎无法捕获这些值。我想网上会有一些例子，但经过多次不同的搜索尝试后，我找不到任何东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:09:35.197

您可能想研究像[Backbone.js这样的客户端框架](http://backbonejs.org/)

这将允许您修改模型的 javascript 表示并通过 restful api 将其与您的 rails 应用程序同步。

# glassfish-3 - 玻璃鱼 3.1.2 在 netbeans 7.2 中启动失败

> ID：12189552
> 
> 赞同：0
> 
> 时间：2012-08-30T03:45:33.067
> 
> 标签：glassfish-3, netbeans-7

我已经安装了 Netbeans 7.2。使用 GlassFish Server 3.1.2 但是当我运行 Web 应用程序的默认 jsp 页面或任何其他 jsp 页面时出现错误：

> GlassFish Server 3.1.2 启动失败
> 
> C:\Users****\Documents\NetBeansProjects\WebApplication3\nbproject\build-impl.xml:1022：部署错误：GlassFish Server 3.1.2 启动失败有关详细信息，请参阅服务器日志。构建失败（总时间：47 秒）

**构建-impl.xml**

> <targetdepends="init,-init-cos,compile,compile-jsps,-do-compile-single-jsp,-pre-dist,-do-tmp-dist-with-manifest,-do-tmp-dist-没有清单，-pre-run-deploy，-pre-nbmodule-run-deploy，-run-deploy-nb，-init-deploy-ant，-deploy-ant，-run-deploy-am，-post-nbmodule -run-deploy,-post-run-deploy,-do-update-breakpoints" name="run-deploy"/>
> 
> <target if="netbeans.home" name="-run-deploy-nb">
> 
> < nbdeploy clientUrlPart="${client.urlPart}" debugmode="false" forceRedeploy="${forceRedeploy}"/>

//////////////////////

> 玻璃鱼服务器 3.1.2
> 
> 严重：由于启动异常而关闭 v3：范围内没有可用端口：8080=com.sun.enterprise.v3.services.impl.monitor.MonitorableSelectorHandler@788a7b

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T03:09:50.487

我找到了解决方案。我的 8080 端口被 Oracle 保留。所以我在 glassfish\domains\domain1\ config\domain.xml 文件中编辑了 domain.xml 文件。

我用9999替换了端口8080并替换了文件。之后，我将 glassfish 服务器添加到 netbeans，现在它可以工作了。

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T06:17:32.247

错误消息清楚地说明了这一点：

> 范围内没有空闲端口：8080

可能有另一个 Glassfish 实例（或任何其他服务器）在您的系统上运行。`http://localhost:8080`尝试通过在浏览器中调用来找出它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:27:07.613

## **解决此问题的另一种选择

**在命令行输入以下内容：

网络统计 -ao

将列出活动的 TCP 地址和端口 — 找到本地地址为“0.0.0.0:80”的行并记下 PID 值。

现在右键单击任务栏并选择启动任务管理器。导航到 Processes 选项卡，如有必要，单击 View > Select Columns... 以确保选中“PID（进程标识符）”。您现在可以找到上面提到的 PID。描述和属性应该可以帮助您确定哪个应用程序正在使用该端口。

任务管理器允许您终止进程，但要小心谨慎——特别是如果它是“NT Kernel & System”。*** *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T20:55:13.743

我有同样的问题。我通过使用 jdk7 而不是 jdk8 配置 glassfish 来解决它。我不知道为什么它不能与 jdk8 一起工作，但现在 glassfish 正在运行。

# c# - 由于 CommandName="edit"，GridView OnRowUpdating 不会触发

> ID：12189555
> 
> 赞同：0
> 
> 时间：2012-08-30T03:45:45.033
> 
> 标签：c#, asp.net, gridview

我已经花了 2 天时间试图解决这个问题，但没有运气解决这个问题。我有一个 GridView 来显示数据库中的数据，然后它还具有修改和删除的功能。这是我的 GridView 的当前 ASP 代码：

```
<asp:GridView ID="dgvSortKey" runat="server" AllowSorting="True" OnRowDataBound="gv_drb"
                AutoGenerateColumns="False" AllowPaging="True" BackColor="White" BorderColor="#336666"
                BorderStyle="Double" BorderWidth="3px" CellPadding="4" GridLines="Horizontal"
                Height="73px" AutoGenerateEditButton="True" OnRowEditing="dgvSortKey_RowEditing"
                OnRowUpdating="dgvSortKey_RowUpdating" OnRowCancelingEdit="dgvSortKey_RowCancelingEdit"
                OnSelectedIndexChanging="dgvSortKey_SelectedIndexChanging" OnPageIndexChanged="dgvSortKey_PageIndexChanged"
                OnPageIndexChanging="dgvSortKey_PageIndexChanging" OnRowCommand="dgvSortKey_RowCommand"
                OnRowDeleted="dgvSortKey_RowDeleted" OnRowUpdated="dgvSortKey_RowUpdated" Width="561px"
                PageSize="15" DataKeyNames="KeyCode,KeyDescription">
                <FooterStyle BackColor="White" ForeColor="#333333" />
                <RowStyle BackColor="White" ForeColor="#333333" />
                <PagerStyle BackColor="#336666" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#339966" Font-Bold="True" ForeColor="White" />
                <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" />
                <AlternatingRowStyle BackColor="LightCyan" />
                <Columns>
                    <asp:TemplateField HeaderText="">
                        <ItemTemplate>
                            <asp:LinkButton ID="lnkdelete" runat="server" OnClick="lnkdelete_Click">Delete</asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Instruction Key Code">
                        <ItemTemplate>
                            <asp:Label ID="lblValKeyCode" runat="server" Text='<%#System.Web.HttpUtility.HtmlEncode((string)Eval("KeyCode")) %>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtValKeyCode" runat="server" Text='<%#Bind("KeyCode") %>' MaxLength="10"
                                CausesValidation="false"></asp:TextBox>
                        </EditItemTemplate>
                        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" CssClass="GvBorderGreen" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Description">
                        <ItemTemplate>
                            <asp:Label ID="lblValKeyDescription" runat="server" Text='<%#System.Web.HttpUtility.HtmlEncode((string)Eval("KeyDescription")) %>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtValKeyDescription" runat="server" Text='<%#Bind("KeyDescription") %>'
                                Width="300" MaxLength="20" CausesValidation="false"></asp:TextBox>
                        </EditItemTemplate>
                        <ItemStyle CssClass="GvBorderGreen" />
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

问题是点击更新按钮后我无法更新某条记录，请看下图：

![在此处输入图像描述](../Images/35392908bcb9fcd574aa71bb8b010d15.png)

当我处于调试模式时，它不会传递 OnRowUpdating 事件，而是传递给 OnRowEditing。令我惊讶的一件事是，当它触发 OnRowCommand 时，当单击***更新按钮时，CommandName 设置为******“编辑”***。请看下图：

 *![在此处输入图像描述](../Images/6d6ca50568dbc7a915cfa58a38817bc4.png)

顺便说一句，这是背后的代码。

```
protected void dgvSortKey_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        //Currently Unreachable code due to unknown reason. RowUpdating not trigger even clicking Update Button in the GridView
        // this.dvDetialContent.Visible = true;
        List<SqlDbParameter> list = new List<SqlDbParameter>();

        TextBox txtValKeyDescription = dgvSortKey.Rows[e.RowIndex].FindControl("txtValKeyDescription") as TextBox;
        TextBox txtValKeyCode = dgvSortKey.Rows[e.RowIndex].FindControl("txtValKeyCode") as TextBox;

        if (string.IsNullOrEmpty(txtValKeyCode.Text) || string.IsNullOrEmpty(txtValKeyDescription.Text))
        {
            string alert = "alert('Instruction KeyCode or KeyDecription should not be empty');";
            ScriptManager.RegisterStartupScript(this, this.GetType(), "scripting", alert, true);
        }
        else
        {
            //Trace.Write("txtKeyCode", HttpUtility.HtmlDecode(txtKeyCode.Text));
            //Trace.Write("txtKeyDescription", txtKeyDescription.Text);
            //Trace.Write("txtValKeyCode", txtValKeyCode.Text);
            //Trace.Write("txtValKeyDescription", txtValKeyDescription.Text);
            list.Add(new SqlDbParameter("@oldcode", HttpUtility.HtmlDecode(txtKeyCode.Text)));
            list.Add(new SqlDbParameter("@oldname", HttpUtility.HtmlDecode(txtKeyDescription.Text)));
            list.Add(new SqlDbParameter("@newcode", HttpUtility.HtmlDecode(txtValKeyCode.Text)));
            list.Add(new SqlDbParameter("@newname", HttpUtility.HtmlDecode(txtValKeyDescription.Text)));
            try
            {
                int result = CoreUtility.ExecuteNonQuery("update InstructionKey set KeyCode=@newcode, KeyDescription=@newname where KeyCode = @oldcode and KeyDescription = @oldname", list);
                //Trace.Write("ResultValue", result.ToString());
            }
            catch (Exception ex)
            {
                string alert = "alert('Instruction KeyCode should not be duplicate');";
                ScriptManager.RegisterStartupScript(this, this.GetType(), "scripting2", alert, true);
            }
        }

        dgvSortKey.EditIndex = -1;
        imgbtnFilter_Click(null, null);

        this.txtKeyCode.Text = "";
        this.txtKeyDescription.Text = "";

    }
    protected void dgvSortKey_RowEditing(object sender, GridViewEditEventArgs e)
    {
        // this.dvDetialContent.Visible = true;
        //if (ViewState["updateFlag"] == null)
        //{
            //ViewState["editFlag"] = "forEdit";
            //ViewState["editIndex"] = e.NewEditIndex;
            dgvSortKey.EditIndex = e.NewEditIndex;
            Label lblValKeyDescription = dgvSortKey.Rows[e.NewEditIndex].FindControl("lblValKeyDescription") as Label;
            Label lblValKeyCode = dgvSortKey.Rows[e.NewEditIndex].FindControl("lblValKeyCode") as Label;
            this.txtKeyCode.Text = lblValKeyCode.Text;
            this.txtKeyDescription.Text = lblValKeyDescription.Text;
            imgbtnFilter_Click(null, null);
        //}
        //else
        //{
            //RowUpdate((int)ViewState["editIndex"]);
            //ViewState.Remove("updateFlag");
            //ViewState.Remove("editFlag");
            //ViewState.Remove("editIndex");
        //}
    }
    protected void dgvSortKey_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        dgvSortKey.EditIndex = -1;
        imgbtnFilter_Click(null, null);
    }
    protected void dgvSortKey_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
    {
        this.dvDetialContent.Visible = true;
        Label lblValKeyDescription = dgvSortKey.Rows[e.NewSelectedIndex].FindControl("lblValKeyDescription") as Label;
        Label lblValKeyCode = dgvSortKey.Rows[e.NewSelectedIndex].FindControl("lblValKeyCode") as Label;

        this.txtKeyCode.Text = lblValKeyCode.Text;
        this.txtKeyDescription.Text = lblValKeyDescription.Text;
    }
    protected void dgvSortKey_PageIndexChanged(object sender, EventArgs e)
    {

    }
    protected void dgvSortKey_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        dgvSortKey.PageIndex = e.NewPageIndex;
        imgbtnFilter_Click(null, null);
    }
    protected void dgvSortKey_RowUpdated(object sender, GridViewUpdatedEventArgs e)
    {

    }
    protected void dgvSortKey_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        String jsScript = "";
        jsScript += "var answer=confirm('Delete this Instruction Key?');\n";
        jsScript += "if (!answer){\n";
        jsScript += " document.getElementById('ctl00_cthContent_hdDelete').Value = 'DELETE';\n";
        jsScript += "}\n";

        //return;
        ScriptManager.RegisterStartupScript(this, this.GetType(), "script", jsScript, true);

        List<SqlDbParameter> list = new List<SqlDbParameter>();

        Label lblValKeyCode = dgvSortKey.Rows[e.RowIndex].FindControl("lblValKeyCode") as Label;
        Label lblValKeyDescription = dgvSortKey.Rows[e.RowIndex].FindControl("lblValKeyDescription") as Label;
        list.Add(new SqlDbParameter("@code", lblValKeyCode.Text));
        list.Add(new SqlDbParameter("@name", lblValKeyDescription.Text));

        CoreUtility.ExecuteNonQuery("DELETE FROM [InstructionKey] WHERE KeyCode=@code and KeyDescription=@name;", list);
        Initial();
        this.dvDetialContent.Visible = false;
        dgvSortKey.EditIndex = -1;
        imgbtnFilter_Click(null, null);
    }
    protected void dgvSortKey_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        string id = e.CommandName;
    }
    protected void dgvSortKey_RowDeleted(object sender, GridViewDeletedEventArgs e)
    {

    }
    protected void gv_drb(object sender, GridViewRowEventArgs e)// 
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            LinkButton lnkbtnresult = (LinkButton)e.Row.FindControl("lnkdelete");
            //raising javascript confirmationbox whenver user clicks on link button
            lnkbtnresult.Attributes.Add("onclick", "javascript:return ConfirmationBox()");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:54:15.917

虽然我还没有发现错误，但您可能想尝试一种解决方法。
既然自动生成的编辑按钮给你带来了麻烦，为什么不自己生成呢？

像这样：

```
<asp:TemplateField HeaderText="">
    <ItemTemplate>
        <asp:LinkButton ID="lnkedit" runat="server" CommandName="Edit">Edit</asp:LinkButton>
    </ItemTemplate>
    <EditItemTemplate>
        <asp:LinkButton ID="lnkedit" runat="server" CommandName="Update">Update</asp:LinkButton>
        <asp:LinkButton ID="lnkedit" runat="server" CommandName="Cancel">Cancel</asp:LinkButton>
    </EditItemTemplate> 
</asp:TemplateField> 
```

并在后面的代码中处理它：

```
 void dgvSortKey_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    // If multiple buttons are used in a GridView control, use the
    // CommandName property to determine which button was clicked.
    if(e.CommandName=="Update")
    {

    }
  } 
```*

# android - PPI PIXEL DENSITY 新混淆

> ID：12189558
> 
> 赞同：0
> 
> 时间：2012-08-30T03:46:18.100
> 
> 标签：android, android-layout

我发现我创建的应用程序设计无法在三星 Galaxy Note 上正常运行。我搜索手机规格并找到这部分

```
~285 ppi pixel density 
```

它是什么？ahm DPI和PPI是一样的吗？因为在android中没有285DPI。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:00:12.857

就营销材料和技术表而言（我认为这是您正在查看的内容），它们是相同的。

PPI = 每英寸像素数。衡量有多少像素位于平行或垂直于显示器的一条线上（即非对角线）。

DPI = 每英寸点数。印刷中使用的术语（图像由点而不是像素组成），但适用于屏幕术语。

PPI 是首选术语，但它们可以互换使用。

Android 操作系统支持任意分辨率（请注意，“分辨率”实际上是指显示器的 DPI，而不是显示区域的像素尺寸），因此如果显示器是 285dpi，它并不一定意味着系统（或运行在它）画一条 285px 长的线，并期望它在现实生活中是 1 英寸，会有变化。285dpi 足够接近 Android 的“HDPI”模式 240dpi。

您可以在此处阅读更多内容：[如何将 Android 图像的 ppi 转换为 dpi？](https://stackoverflow.com/questions/6930031/how-do-i-convert-ppi-into-dpi-for-android-images)

# jquery - 允许箭头键导航/输入功能自动建议框

> ID：12189559
> 
> 赞同：1
> 
> 时间：2012-08-30T03:46:25.437
> 
> 标签：jquery, navigation, autosuggest, arrow-keys

我正在学习如何实现自动建议框，但我只是不知道如何使用箭头键和输入按钮使结果可访问。我真的不知道我会怎么做。我已经有了它，所以当我单击该框时，结果将移动到输入字段，但现在我想使用箭头键使结果可访问，并且当您单击 Enter 时，它将将该项目移动到输入字段。这是我的代码：

```
 <div class="input-wrapper">
<input type="text" class="autosuggest" value="Type in a city or town" onblur="onBlur(this)" onfocus="onFocus(this)" > <input type="submit" value="Search">

<div class="dropdown">
    <ul class="result"></ul>

</div>
</div> 
```

和脚本：

```
 $(document).ready(function() {
$('.autosuggest').keyup(function() {
var search_term = $(this).attr('value');

$.post('php/search.php', { search_term: search_term }, function(data) {
    $('.result').html(data);

$('.result li').click(function(){
    var result_value = $(this).text();
    $('.autosuggest').attr('value', result_value);
    $('.result').html('');

    });

    });

});
     });
     function onBlur(el) { 
    if (el.value == '') { 
      el.value = el.defaultValue; 
    } 
    } 
   function onFocus(el) { 
      if (el.value == el.defaultValue) { 
       el.value = ''; 
    } 
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:48:19.723

```
$('.autosuggest').keyup(function(e) {
    if(e.which == 13) {
        // yourcode
    }
}); 
```

# iphone - tableView:didSelectRowAtIndexPath:]: 消息发送到释放的实例 0xebba1b0

> ID：12189567
> 
> 赞同：0
> 
> 时间：2012-08-30T03:47:24.920
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我理解调用的原因 `message sent to deallocated instance 0xebba1b0`，这是因为我正在向不再在内存中的对象发送消息。

所以这是我的场景。我有一个 ZoomedViewController，里面有一个 UITableView。UITableView 有一个自定义的 UITableViewCell，它有一个属性标签作为子视图。当在属性标签上按下链接时（这反过来会触发 didSelectRowAtIndexPath），它会委托给我的 MainViewController 并在 MainViewController 中调用 closeZoomedImageVC 方法：

```
-(void) closeZoomedImageVC
{
    [self.zoomedImageContainer_ removeFromParentViewController];
    [self.zoomedImageContainer_.view removeFromSuperview];
} 
```

问题是当触发 didSelectRowAtIndexPath 时， zoomedImageContainer_ 已经消失了。那我该如何解决呢？

为了更好地说明这一点，基本上当我这样做时：

```
 [self performSelector:@selector(closeZoomedImageVC) withObject:nil afterDelay:1.0]; 
```

这不再导致崩溃，但这不是解决方案，因为它很hacky。它的作用是让 didSelectRowAtIndexPath 在被释放之前首先被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:53:39.640

存储对您的`UITableView`in的引用`ZoomedViewController`：

```
@property (nonatomic, strong) IBOutlet UITableView *tableView; 
```

确保在 Interface Builder 中连接插座。现在，当您被删除时，在您释放该引用之前`zoomedImageContainer_.view`它不会解除分配。`UITableView`

您还需要存储对in的`strong`引用，并且仅在将所选行保存回 in 后才将其设置为。`ZoomedViewController``MainViewController``nil``MainViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:09:07.990

当点击表格中的单元格时会调用动画以突出显示选定的单元格，并且它需要很短的持续时间才能完成，所以最好的方法是你正在做的事情，延迟后执行选择器，我认为 0.5 秒就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:11:32.887

我发现我自己的解决方案是在 tableView 属性中设置 allowSelection = NO 。这将让 UITableViewCell 中的属性标签进行交互，但会禁用 didSelectRowAtIndexPath 被调用

# ruby-on-rails - 如何获得 ActiveRecord::Association 来初始化父对象的自动加载子对象的父引用以指向实际的父对象？

> ID：12189572
> 
> 赞同：0
> 
> 时间：2012-08-30T03:47:49.303
> 
> 标签：ruby-on-rails, ruby, activerecord, associations, arel

这是 Ruby 1.9.3p194 和 Rails 3.2.8

应用程序/模型/所有者.rb：

```
class Owner < ActiveRecord::Base
  attr_accessible :name
  has_many :pets
end 
```

应用程序/模型/pet.rb：

```
class Pet < ActiveRecord::Base
  attr_accessible :name, :owner
  belongs_to :owner
end 
```

db/migrate/20120829184126_create_owners_and_pets.rb：

```
class CreateOwners < ActiveRecord::Migration
  def change
    create_table :owners do |t|
      t.string :name
      t.timestamps
    end
    create_table :pets do |t|
      t.string :name
      t.integer :owner_id
      t.timestamps
    end
  end
end 
```

好吧，现在看看会发生什么……

```
# rake db:migrate
# rails console
irb> shaggy = Owner.create(:name => 'Shaggy')
irb> shaggy.pets.build(:name => 'Scooby Doo')
irb> shaggy.pets.build(:name => 'Scrappy Doo')
irb> shaggy.object_id
  => 70262210740820
irb> shaggy.pets.map{|p| p.owner.object_id}
  => [70262210740820, 70262210740820]
irb> shaggy.name = 'Shaggie'
irb> shaggy.name
  => "Shaggie"
irb> shaggy.pets.map{|p| p.owner.name}
  => ["Shaggie", "Shaggie"]
irb> shaggy.save
irb> shaggy.reload
irb> shaggy.object_id
  => 70262210740820
irb> shaggy.pets.map{|p| p.owner.object_id}
  => [70262211070840, 70262211079640]
irb> shaggy.name = "Fred"
irb> shaggy.name
  => "Fred"
irb> shaggy.pets.map{|p| p.ower.name}
  => ["Shaggie", "Shaggie"] 
```

我的问题：我怎样才能让 rails 初始化 shaggy.pets 的元素以使其所有者设置为 shaggy （确切的对象），不仅是在首次构建/创建宠物对象时，而且即使它们是从自动加载的通过关联的数据库？

加分项：让它在 Rails 2.3.5 中也能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:27:05.120

如果你不关心 2.3.5 的支持，下面的就简单多了：

**应用程序/模型/所有者.rb：**

```
class Owner < ActiveRecord::Base
  attr_accessible :name
  has_many :pets, :inverse_of => :owner
end 
```

**应用程序/模型/pet.rb：**

```
class Pet < ActiveRecord::Base
  attr_accessible :name, :owner
  belongs_to :owner, :inverse_of => :pets
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:01:58.010

克里斯，

你缺少的是这个；

*   当您查询数据库时，您会在那个确切时刻拍摄数据的快照。
*   您的关联不指向对象引用，它们是从数据库中查询的对象的浅表副本。
*   为了使您的代码正常工作，您需要将对象保存回数据库，以便宠物适当地获取更新。

我还会展示更多代码，因为我可以清楚地看到你在做的事情上采取了错误的方向。

您展示的是一个桌面应用程序模式示例，它使用了为 Web 应用程序设计的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:15:58.530

弄清楚了。这适用于 Rails 3.2.8 和 Rails 2.3.5：

```
class Owner < ActiveRecord::Base
  attr_accessible :name
  has_many :pets do
    def load_target
      super.map do |pet|
        pet.owner = (proxy_association.owner rescue proxy_owner)
        pet
      end
    end
  end
end 
```

请注意，在 Rails 2.3.5 中，`object_id`s`shaggy.pets.map{|p| p.owner}`仍然不同，因为它们是不同的 ProxyAssociation 对象，但它们至少指向同一个底层对象。

如果您经常这样做，您可能想要概括...

**lib/remember_parent_extension.rb：**

```
class RememberParentExtension < Module
  def initialize(parent_name)
    parent_setter = "#{parent_name}="
    super() do
      define_method(:load_target) do
        super.map do |child|
          parent_proxy = (proxy_association.owner rescue proxy_owner)
          child.send(parent_setter, parent_proxy)
          child
        end
      end
    end
  end
end 
```

**应用程序/模型/所有者.rb：**

```
class Owner < ActiveRecord::Base
  attr_accessible :name
  has_many :pets, :extend => RememberParentExtension.new(:owner)
end 
```

# android - 指定 imageView 调整为屏幕的百分比

> ID：12189573
> 
> 赞同：4
> 
> 时间：2012-08-30T03:48:12.623
> 
> 标签：android, xml, layout

在 Android 中，我需要使用 XML 布局（而不是编程）设计一个简单的布局：

我需要具备以下条件：

1- 左侧的小图像视图（垂直居中）

2-三个图像视图彼此稍大（也垂直居中）

3-右侧的小图像视图（垂直居中）

所以 5 个图像水平相邻，垂直居中。

这很简单，无论如何问题是如何指定图像视图以调整屏幕高度的百分比？

因此，如果我将三个图像项指定为屏幕高度的 60%，我希望 imageView 的大小（包括源图像）调整为屏幕高度的 60%。

它可以实现吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:57:38.433

是的，它是一个 LinearLayout(Horizo​​ntal)，然后给所有的孩子(这里的 Imageviews) `layout:height="0dp" and layout:weight=".6"`，先试试这个，如果你有任何进一步的问题，请更新问题

# java - 使用 XML 作为后端的 LDAP 服务器

> ID：12189574
> 
> 赞同：0
> 
> 时间：2012-08-30T03:48:15.883
> 
> 标签：java, xml, ldap, backend

我是 LDAP 的新手。我需要为 Java 应用程序的用户身份验证/授权设置一个基本的 ldap 服务器。据我所知，这将是一个小型部署，因此我被要求提供一些简单、轻量级的东西，如果可能的话，还需要一个使用 XML 作为后端的服务器。

您能推荐任何符合此标准的可能服务器吗？我还没有找到任何甚至提到 XML 作为后端的东西。这存在吗？我只发现 OpenLDAP 支持基于纯文本 LDIF 文件构建的后端。

==== 编辑 ==== 我错过了上面关于 OpenLDAP 及其后端支持的措辞。我的意思是，我能够[轻松] 找到支持纯文本文件的唯一服务器是 OpenLDAP（在我研究的文档中公开说明）。==== 结束编辑 ====

任何有关 ldap 的通用指针、要使用的产品等都值得赞赏。我打算使用 UnboundID API 与服务器对话；我还没有决定使用什么服务器（可能是 ApacheDS）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:48:15.053

> 我只发现 OpenLDAP 支持基于纯文本 LDIF 文件构建的后端。

这是严重不真实的。OpenLDAP 支持相当多的后端，包括 BDB、LDIF、SQL、另一个 LDAP 服务器、relay、passwd、null、...

XML 不在其中，但 XML 无论如何都是一个糟糕的选择。

例如，使用 BDB 后端有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:32:53.943

我不是回答这个问题的专家。但我希望你看看这个链接并决定。

[http://www.aten.com/data/helpfiles/Ldap_Example.pdf](http://www.aten.com/data/helpfiles/Ldap_Example.pdf)

[http://support.sas.com/rnd/itech/doc9/admin_ldap/ldap/index.html](http://support.sas.com/rnd/itech/doc9/admin_ldap/ldap/index.html)

[http://tldp.org/HOWTO/LDAP-HOWTO/installing.html](http://tldp.org/HOWTO/LDAP-HOWTO/installing.html)

[http://www.debuntu.org/ldap-server-and-linux-ldap-clients](http://www.debuntu.org/ldap-server-and-linux-ldap-clients)

[http://thoughtblender.info/2008/11/04/comparison-of-directory-ldap-servers/](http://thoughtblender.info/2008/11/04/comparison-of-directory-ldap-servers/)

[http://kkalev.wordpress.com/2007/03/14/open-source-ldap-servers-battle/](http://kkalev.wordpress.com/2007/03/14/open-source-ldap-servers-battle/)

[https://wikis.forgerock.org/confluence/display/OPENDJ/Comparing+OpenDJ](https://wikis.forgerock.org/confluence/display/OPENDJ/Comparing+OpenDJ)

# javascript - JavaScript浮点求和问题

> ID：12189575
> 
> 赞同：-3
> 
> 时间：2012-08-30T03:48:18.493
> 
> 标签：javascript

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

为什么 JS 显示 25.1+61.7+13.2 = 100.00000000000001 ？如果你只是改变数字的位置，比如 13.2+25.1+61.7 = 100，它是固定的。谁能解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:49:53.560

因为您使用的是浮点运算。 [这是对正在发生的事情的解释。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:50:37.557

JavaScript 使用 IEEE 754 浮点数学，这是一种 base-2 浮点格式。有许多值无法以该格式精确表示，特别是其中的小数部分，例如`x.7`.

这不是**编译器**问题。这是 JavaScript 表示实数的基本方式的问题。许多其他语言也会有完全相同的问题。

通常，计算机不会以严格的方式处理实数。

# javascript - 使用 Math.random() 和 .css 的 jQuery/JS 随机图像定位？

> ID：12189577
> 
> 赞同：0
> 
> 时间：2012-08-30T03:48:23.407
> 
> 标签：javascript, jquery

我是编程新手。现在我正在使用 jQuery + jqueryrotate 随机旋转我的图像，所以看起来它们是分散的。我设法让它们随机旋转，但我对如何使位置随机化有点困惑。我`position: absolute`在一个`position: relative`带有 class 的 div中制作了所有图像`.holder`。我知道通常使用 jquery 的 css 属性通常应该是`({"top": "4px"})`，但是当我将它包装在 toString 函数周围时，我希望它不起作用。

```
$.each($('.holder img'), function (i, element) {
    $(element).rotate(Math.random() * -90 + Math.random() * 90);
    $(element).css({
        "top": Math.random() * 300;
    })
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:51:51.297

没有单元顶部不知道你的意思，试试这个：

```
$.each($('.holder img'), function(i, element){
    $(element).rotate(Math.random() * -90 + Math.random() * 90);
    $(element).css({
        "top": (Math.random() * 300) + "px"
    })
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T03:54:07.363

```
$(element).css({
    "top": Math.random() * 300;
}); 
```

应该

```
$(element).css({
    "top": Math.random() * 300
}); 
```

删除`;`，否则它会触发一个 sintax 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:58:59.160

您只需在属性`+ "px"`的 CSS 值的末尾添加`top`

```
$(element).css({
    "top": (Math.random () * 300) + "px"
}); 
```

# java - 种族条件：从有害到无害

> ID：12189578
> 
> 赞同：1
> 
> 时间：2012-08-30T03:48:39.507
> 
> 标签：java, concurrency

[*我从Everything2.com*](http://everything2.com/title/Race+condition)采用如下竞争条件定义：

> 竞争条件是运行多个并发进程的情况（出于这些目的，一个线程也被建模为一个进程，就像在不同机器上运行的进程一样）将给出不同的结果，具体取决于（未指定的，通常是未指定的）细节操作的顺序。

现在考虑第 3 章中的以下示例[*：竞争条件和互斥*](http://java.sun.com/developer/Books/performance2/chap3.pdf)：

> 然而，最危险的竞争条件涉及对共享数据结构的访问。如果两个线程同时更新相同的数据结构，则更改可能部分由一个线程进行，部分由另一个线程进行。然后数据结构的内容可能会变得乱码，这将混淆稍后访问它的线程，从而导致它们崩溃。

显然，该样本包含有害的竞争条件。

有一种解决方案可以避免这种有害的竞争条件：

> 诀窍是强制线程一次访问一个数据结构，即所谓的互斥，这样每个线程都可以完成其更新并使结构保持一致状态以供下一个线程使用。

现在根据上述定义，上述解决方案中仍然存在竞争条件：

> 如果线程A先改变，那么共享数据结构的最终内容由线程B填充；如果线程 B 先进行更改，则共享数据结构的最终内容由线程 A 填充。

但现在它是一种无害的竞争条件。

从这个样本中，我得到以下结论：

> 竞争条件是有害的当且仅当它是可以避免的。

我不确定上述结论的两个方向或一个方向是否正确。那么有没有样本可以反驳这个结论呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:53:28.883

你说的对。

竞争条件 - 当多个线程访问相同的资源时出现。
导致竞争条件的代码段称为临界区。请注意，当我们试图避免竞争条件时会发生死锁。

您可以通过创建线程安全代码来避免竞争条件。

*   局部变量。

    局部变量存储在每个线程自己的堆栈中。这意味着局部变量永远不会在线程之间共享。

*   本地对象引用。

    所有对象都存储在共享堆中，但如果本地创建的对象从不逃避创建它的方法，那么它是线程安全的。

*   使成员字段可变、最终和私有。

但是，如果您想共享一个变量并仍然以同步方式控制它的访问。您可以通过以下方式做到这一点，

*   使用显式锁（和条件变量）
*   使用同步（隐式锁）

这仍然不能保证哪个线程首先获得访问权，然后哪个线程获得访问权。对于这样的线程控制使用信号。

它可以通过多种方式实现。

*   通过共享对象发送信号
*   忙等
*   wait()、notify() 和 notifyAll()
*   错过的信号
*   虚假唤醒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:22:26.293

您在这里错过了非常重要的一点。对数据结构的任何操作都在几个周期内发生，例如，另外给出一个非常基本的步骤，

step 1\. 检索变量的当前值 step 2\. 将所需的数字添加到变量的值 step 3\. 存储变量的值

在寄存器级别，您可以看到更多的步骤。但关键是，通过锁定变量/数据结构的访问来避免竞争条件意味着只有一个线程可以读取/写入该数据结构。不允许其他线程读取数据结构，一旦第一个线程完成所有循环，它将允许其他线程进行更改。

如果数据结构没有被任何人锁定，线程所做的第一件事就是获取锁。然后它做读/写的东西。

所以，如果你正确地实现锁，就不应该有任何竞争条件。

竞争条件存在于两个或多个线程可以对同一数据结构进行更改时，如果不通过锁或其他机制避免这种情况，则可能是有害的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:19:54.433

我不同意。当你不想改变时，改变是“有害的”，无论它是否可以避免。

显然，当两个进程并行运行时，总是会不断地更改数据，因此状态的最终结果也可能取决于该竞争。

但是在谈论竞争条件时：当数据的*一致性*可能被竞争过程破坏时，就会发生有害的竞争条件。

# matlab - 在matlab中使用算法：确定关节的位移u_{i}

> ID：12189581
> 
> 赞同：1
> 
> 时间：2012-08-30T03:49:09.300
> 
> 标签：matlab

![在此处输入图像描述](../Images/693b3b39ec7306bdda256965d80ac0b4.png)

平面桁架的位移公式类似于质量-弹簧系统的位移公式。不同之处在于 (1) 构件的刚度为 k_{i} = (EA/L)_{i}，其中 E 为弹性模量，A 为横截面积，L 为长度成员; (2) 每个关节有两个位移分量。对于所示的静不确定桁架，位移公式产生对称方程 Ku = p，其中

![在此处输入图像描述](../Images/7e56ba8c716025f3dd419e929f323582.png)

确定关节的位移 u_{i}

在matlab中使用算法

有人可以帮我解决算法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:56:37.217

您应该使用反斜杠运算符。键入`help slash`以获取更多信息。基本上，

```
u = K\p 
```

意味着`u = inv(K)*p`但是是一种更快更准确的方法。我还没有针对您的问题对其进行测试，但这通常是解决此类问题的方法。

# git - 使Git diff和merge使用opendiff的某种方法是什么？

> ID：12189585
> 
> 赞同：-1
> 
> 时间：2012-08-30T03:49:42.127
> 
> 标签：git, opendiff

我正在使用 github 建议使其工作： [https ://gist.github.com/329690](https://gist.github.com/329690)

现在我的全局配置文件包含：

```
[merge]
        tool = opendiff
        external = /Users/mike/bin/git-diff-cmd.sh

[diff]
        tool = opendiff
        external = /Users/mike/bin/git-diff-cmd.sh 
```

但是，当我使用 时`gif diff`，输出仍然以文本输出的形式出现，使用时的任何合并冲突也是如此`git merge <branch>`。有确定的方法让他们使用 opendiff 吗？（当使用`git diff`并且`git merge`最好不要通过其他命令时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:01:39.467

编辑：完全改变

不仅您需要`merge.tool`已经设置，还需要`mergetool.<tool>`. 在下面你会看到你需要的代码（选项`--merge`和`--result`依赖于 opendiff）：

```
[merge]
    tool = opendiff
[mergetool "opendiff"]
    cmd = \"/Users/mike/bin/git-diff-cmd.sh\" --merge --result=\"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\"
    trustExitCode = true
    keepBackup = false 
```

请参阅此[参考](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)并搜索“mergetool”

编辑：根据作者的评论（对不起，我不能拼写你的名字）[merge] 标签是强制性的，即使是 diff。

# multithreading - 线程同步：确保按顺序调用函数

> ID：12189594
> 
> 赞同：0
> 
> 时间：2012-08-30T03:51:07.287
> 
> 标签：multithreading, synchronization

我正在编写一个程序，我需要确保调用的特定函数一次不会在多个线程中执行。

在这里，我编写了一些简化的伪代码，它们完全可以在我的真实程序中完成。

```
mutex _enqueue_mutex;
mutex _action_mutex;
queue _queue;
bool  _executing_queue;

// called in multiple threads, possibly simultaneously
do_action() {
  _enqueue_mutex.lock()
  object o;
  _queue.enqueue(o);
  _enqueue_mutex.unlock();

  execute_queue();
}

execute_queue() {
  if (!executing_queue) {
    _executing_queue = true;
    enqueue_mutex.lock();
    bool is_empty = _queue.isEmpty();
    _enqueue_mutex.lock();
    while (!is_empty) {
      _action_mutex.lock();

      _enqueue_mutex.lock();
      object o = _queue.dequeue();
      is_empty = _queue.isEmpty();
      _enqueue_mutex.unlock();

      // callback is called when "o" is done being used by "do_stuff_to_object_with_callback" also, this function doesn't block, it is executed on its own thread (hence the need for the callback to know when it's done)
      do_stuff_to_object_with_callback(o, &some_callback);
    }
    _executing_queue = false;
  }
}

some_callback() {
  _action_mutex.unlock();
} 
```

本质上，这个想法是`_action_mutex`锁定在 while 循环中（我应该说它`lock`被假定为阻塞，直到它可以再次被锁定），并且在调用完成回调时期望被解锁（`some_callback`在上面的代码中）。

这似乎不起作用。如果`do_action`同时调用不止一次，程序就会锁定。我认为这可能与同时执行不止一次的 while 循环有关，但我只是看不出这是怎么回事。我的方法有问题吗？有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:58:22.593

`queue`不是专门设计为多线程的（多生产者多消费者）将需要使用相同的互斥锁序列化和操作`eneueue`。`dequeue`

（如果您的`queue`实现有不同的假设，请在您的问题中说明。）

校验`_queue.isEmpty()`也需要保护，如果`dequeue`操作容易出现[*校验时间到使用时间的*问题](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)。

也就是说，这条线也
`object o = _queue.dequeue();`
需要被`_enqueue_mutex.lock();`和包围`_enqueue_mutex.unlock();`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:07:54.857

您可能只需要一个用于队列的互斥锁。此外，一旦您使对象出队，您可能可以在锁之外处理它。这将防止调用`do_action()`挂起太久。

```
mutex moo;
queue qoo;
bool keepRunning = true;

do_action():
{
    moo.lock();
    qoo.enqueue(something);
    moo.unlock(); // really need try-finally to make sure,
    // but don't know which language we are using
}

process_queue():
{
    while(keepRunning)
    {
        moo.lock()
        if(!qoo.isEmpty)
            object o = qoo.dequeue();

        moo.unlock(); // again, try finally needed

        haveFunWith(o);
        sleep(50);
    }
} 
```

然后调用`process_queue()`它自己的线程。

# php - 是否可以从删除中获取结果？

> ID：12189595
> 
> 赞同：0
> 
> 时间：2012-08-30T03:51:29.330
> 
> 标签：php, mysql, sql, database, pdo

如果我从数据库中删除几行，是否可以获取关于哪些行已成功删除、哪些行未删除的结果？我正在使用 PHP + MySQl, PDO 。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T03:56:05.403

不，这是不可能的，但是您可以使用它`mysqlbinlog`来生成 sqlfile

***请参见此处：*** [如何在 mysql 中恢复刚刚删除的行](https://stackoverflow.com/questions/6924823/how-to-recover-just-deleted-rows-in-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:55:22.273

我能想到的是。

1.  将要从表中删除的所有 pk 列值（可能是 id）放入临时表中。
2.  然后在主表上运行删除查询。
3.  删除后只需将临时表与主表连接并检查计数以了解删除的行数和未删除的行数。
4.  如果您想逐行了解，则只需将临时表与主表连接即可获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T03:56:56.003

为什么不首先使用您用来删除行的条件`SELECT`呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T05:45:55.717

首先，您需要从数据库中保存所选行的数据，然后您可以删除这些行。删除后您可以显示哪些行被删除，以及具体的行详细信息

# android - 如何以编程方式将特定铃声分配给android中特定组中的所有联系人

> ID：12189596
> 
> 赞同：1
> 
> 时间：2012-08-30T03:51:30.297
> 
> 标签：android, ringtone, telephonymanager

我已经为特定组中的所有联系人分配了铃声。请告诉电话部分，例如，如果有人从某个号码呼叫并且该号码是具有特定铃声的组的一部分，我们如何提供此铃声？

# html - 在长文本的情况下增加表格列的高度而不影响其他列

> ID：12189598
> 
> 赞同：0
> 
> 时间：2012-08-30T03:51:49.990
> 
> 标签：html, css

我正在尝试使用 HTML 表格创建发票。但是我面临的问题是，当 的值`customer address`很长时，下一列`sold by`会向下移动。我想打破它达到最大宽度但不影响列`</br>`的值。这是我以下[代码](http://jsfiddle.net/kVzSJ/1/)的现场演示：`customer address``sold by`

你能帮我解决这个问题吗？

谢谢：）

我的 HTML

```
<table width="100%" id="info"  align="center">
<tr>
<td class="item-left">Invoice# </td><td width="35%">: INV-PC-2012-000001</td>
<td class="">Date</td><td>: 2012-08-30</td>
</tr>

<tr>
<td class="item-left">Customer Name</td><td>: Charlie Sheen</td>
<td class="">Time</td><td>: 6:46:49 PM</td>
</tr>

<tr>
 <td class="item-left">Customer Address</td><td class="customer_addr">:Long Address Long Address Long Address Long Address Long Address</td>
<td class="">Sold By</td><td>: John Cryer</td>
</tr>​
</table> 
```

CSS

```
body {font-size:75%;color:#222; font-family: Geneva, Arial, Helvetica, sans-serif;  }
#info { clear: both; width: 100%; margin: 30px 0 0 0; table-layout: fixed;border-collapse: collapse; }
#info table { }
#info td{ padding-top: .3em;padding-bottom: .3em;}
#info td.item-left { width: 150px; }​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:57:17.753

如果我理解正确，您关心的是文本垂直位置的变化，而不是实际的列高。如果是这种情况，那么试试这个：

```
#info td{ padding-top: .3em;padding-bottom: .3em;vertical-align:top;} 
```

[小提琴](http://jsfiddle.net/kVzSJ/3/)

# php - (apache) 如何使文件夹内容只能下载？（仅将所有文件视为可下载对象）

> ID：12189599
> 
> 赞同：1
> 
> 时间：2012-08-30T03:51:49.987
> 
> 标签：php, .htaccess

我正在尝试实现一个用户系统（PHP），其中每个用户都有一个唯一的文件夹，用户可以将任何文件上传到该文件夹​​并稍后下载。

当前限制是：文件名中的“htaccess”字符串替换为“hhtaccesss”。没有创建子文件夹。

**我的问题：**有没有办法（.htaccess 或其他）使这些文件仅用于下载目的？为了确保这些未知文件都不会在系统上运行？

**子问题**是否有任何危险压缩/解压缩这些文件？

示例：如果用户键入 .php 文件的直接 url，系统将不会处理该文件（这可能是有害的），而只是将其“交付”给用户？所有类型的脚本/文件都相同..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:04:16.683

解决方案之一是不直接公开文件。例如将它们存储在非公共目录中并通过另一个页面提供它们，例如`download.php`，它可以读取文件内容然后输出并使用“Content-Disposition：附件；”提供它们。标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:15:47.593

在 .htaccess 的相应目录中添加

```
 ForceType application/octet-stream
  Header set Content-Disposition attachment 
```

无论类型如何，都应强制浏览器下载任何文件。`<FilesMatch ..`如果您想保留一些完整的内容，可以使用。

# perl - 如何在用于打开的命令中使用变量以及（-|）管道输出，其中文件名被解释为通过管道输出给我们的命令

> ID：12189605
> 
> 赞同：2
> 
> 时间：2012-08-30T03:52:33.387
> 
> 标签：perl, pipe

如何在用于打开的命令中使用变量以及`(-|)`管道输出，其中文件名被解释为通过管道输出给我们的命令。

```
$cmd = 'ps -elf';
open( my $fh, "-|",$cmd  ) || die( "$cmd failed: $! " ); 
```

在这里，我想将在`$cmd = 'ps $myOptions';` 哪里`$myOptions`设置为所需的选项，例如 `$myOptions = "-elf"`

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:08:56.380

您可以为此使用字符串连接作为 $cmd = "ps ".$myOptions;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:08:13.640

双引号对我有用：

```
#!/usr/bin/perl

use strict;
use warnings;

my $cmd = 'ps';
my $opt = "-elf";
open( my $fh, "-|", "$cmd $opt"  ) || die( "$cmd failed: $! " );

while( <$fh>) { print "line $.: $_"; } 
```

也可以：`"ps $opt"`, join( ' ', $cmd, $opt) `,`$cmd 。' ' 。$opt `and probably many other ways. You just have to make sure that the 3rd argument to open is a string, with the proper content`ps -elf`。为此，您必须确保插入变量（即没有单引号），并且不会以列表而不是字符串结束（即在双引号之间连接或使用变量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:00:40.640

如果您想将命令指定为单个字符串（例如，如果您的选项实际上可能包含多个参数）：

```
my $cmd = "ps $myOptions";
open my $fh, "$cmd |" or die "$cmd failed: $!"; 
```

如果要将其指定为两个字符串（例如，`$myOptions`应始终将 if 视为单个参数）：

```
open my $fh, "-|", "ps", $myOptions or die "ps $myOptions failed: $!"; 
```

# jquery - 使用jquery禁用鼠标事件的方法？

> ID：12189610
> 
> 赞同：2
> 
> 时间：2012-08-30T03:53:13.357
> 
> 标签：jquery

我正在寻找一种方法来在我的动画开始使用 jquery 时禁用鼠标事件，以及在动画完成后再次启动事件时。我知道这可以使用 webkit css 支持来完成。

```
'pointer-events', 'none' 
```

但它不适用于 IE。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:57:16.837

如果要禁用右键单击事件或鼠标单击事件。如果你想禁用右键单击事件意味着尝试这个

```
$(document).ready(function() {  

     //this one line will disable the right mouse click menu  
     $(document)[0].oncontextmenu = function() {return false;}  

}); 
```

如果你想禁用鼠标点击事件意味着参考[这个](https://stackoverflow.com/questions/5855135/css-pointer-events-property-alternative-for-ie)

# javascript - 在应用程序启动时预加载 Ext JS 和自定义 JavaScript 文件

> ID：12189611
> 
> 赞同：3
> 
> 时间：2012-08-30T03:53:13.757
> 
> 标签：javascript, extjs, extjs4.1, preload

我正在创建一个 Intranet 应用程序，其 UI 主要使用 Ext JS 4.1.1

我创建了几个自定义 javascript 类，扩展 Ext JS 控件和其他用于 UI、验证、通信等的代码。

鉴于我的代码不是很大，并且我的应用程序将部署在受控且众所周知的环境中，我理想情况下希望在应用程序调用（启动）时预先加载所有 .js 文件。我想知道一种实现这一目标的方法，主要来自 Ext JS 的领域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:16:49.557

你想做的事情真的很平常。查看部署部分，了解如何使用 Sencha SDK 创建一个文件，其中包含您所有扩展 extjs 组件的自定义 javascript[类](http://docs.sencha.com/ext-js/4-0/#!/guide/getting_started-section-3)

我希望它有用；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:06:32.767

截至本月，Sencha（测试版）发布了一个改进的构建工具。实际上，它是用 Java 完全重写的（我相信）。`Sencha Cmd`是名字，前身本该如此！

编译时间已经缩短到其前身的十分之一，并且现在使用强大的命令处理器配置包/构建。

与其他构建框架和 CI 服务器的集成现在是重中之重，并通过将该工具与 ANT 集成来实现。

我刚刚花了几个小时将一个项目从旧的迁移`Sencha SDK Tools`到新的`Sencha Cmd`. 我特别喜欢新的编译器。

文档已经很不错了。

*   介绍[的博文](http://www.sencha.com/blog/all-new-sencha-cmd/)`Sencha Cmd`
*   [SDK 官方文档](http://docs.sencha.com/ext-js/4-1/#!/guide/command)- 总共有 10 篇文章，不要错过，尤其是
*   [编译器文档](http://docs.sencha.com/ext-js/4-1/#!/guide/command_compiler)

对于遵循 Sencha 建议的标准（单页）模式的小型项目，实际上有一系列更高级的命令来管理整个应用程序的创建和构建过程。

[此外，Sencha 现在已经为多页应用程序](http://docs.sencha.com/ext-js/4-1/#!/guide/command_app_multi)提供了一个模式。

而且您始终可以直接使用编译器并在其之上实现自己的构建过程。这就是我们在项目中所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T09:23:30.983

有一个类叫做[Ext.Loader](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T12:10:22.807

这更像是一个服务器端问题，而不是 Ext JS 问题。您想预先包含所有页面吗？获取一个 JavaScript 压缩器来将您的文件连接在一起，缩小整个包，并`<script>`为您的 Web 应用程序中的每个页面添加一个标签。

我还在一个大量使用 Ext JS（3 和 4）的 Intranet Web 应用程序上工作，但我们有相当大的代码库。由于我们使用 Tomcat，因此我们有一个 Java 类，其中包含每个页面上的标准文件，以及该页面所需的任何文件组或单个文件。类似的东西也可能对你有用。

您可以`Ext.Loader`在需要时使用动态加载，但这听起来不像您正在寻找的。不过，如果您的代码库扩展并且您需要更好的解决方案，这仍然是一个选择。

**编辑：**如评论中所述，我最初的答案未能解决[Sencha SDK Tools](http://www.sencha.com/products/sdk-tools/)。我觉得将我的回复作为修改后的答案的一部分会更有益。

虽然这个任务可能正是 Sencha SDK 的设计目的，但我觉得该产品对于生产环境来说还不够成熟。在撰写本文时，当前版本是 2.0.0 Beta 3\. Beta，这意味着它仍在开发中，它显示。文档几乎不存在，官方论坛上充斥着声称该产品根本不起作用的主题。在这一点上，它只不过是一个可以玩的玩具。我见过的最有用的文档是[Sencha SDK Tools 2.0 and ExtJS4: The Missing Docs](https://docs.google.com/document/d/1_yrwYiRTeExJiSYDhhPV75UEo8HUyl_RDq0JzxIRwwk/edit?pli=1)，作者甚至以“SDK 工具需要大量工作”结尾。

当我为生产环境选择产品时，我想要稳定、可靠、具有良好文档的产品和质量支持的产品。Sencha SDK 工具不是这些东西。然而。

# xslt - xslt 将输入文档作为字符串传递给 java 扩展

> ID：12189617
> 
> 赞同：0
> 
> 时间：2012-08-30T03:53:48.960
> 
> 标签：xslt, binary

我正在尝试编写两个 XSL 文件，以实现以下目标：

1.  它应该加密输入文档。

2.  它应该对 XML 文档进行二进制编码。

1) 的示例输出

```
<Response>
  <encryptedData>e070dee5cb4688c608ee</encryptedData>
</Response> 
```

2) 的示例输出

```
<Response>
   <compressedData>ASCDee5cb4688c608ee</compressedData>
</Response> 
```

对于功能 #1，我有一个 Java 扩展函数，它接受字符串输入并返回加密字符串。但我不知道如何将输入文档作为字符串传递给扩展函数。

对于功能 #2，我不确定如何将输入转换为二进制 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:12:47.700

我只能回答您关于如何从 XSLT 调用 java 函数的第一个问题。在您的样式表声明中，您必须定义一个命名空间，例如`xmlns:filecounter="mappings.GenerateSequenceNumber"`：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:filecounter="mappings.GenerateSequenceNumber"
exclude-result-prefixes="filecounter" version="1.0">
<xsl:output indent="yes"/> 
```

In this case the java function is in the package "mappings" and the java class is called "GenerateSequenceNumber".

When calling the java function in your stylesheet you do for example:

```
<xsl:value-of select="filecounter:getSequenceNumber('countit',3)"/> 
```

So you call the method "getSequenceNumber" in your java class and pass any variables that the java function needs in the brackets.

Unfortunately I can't help you with your second question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:12:06.223

**XSLT cannot exactly reproduce the original string representing an XML document** -- due to various lexical peculiarities (and substitution of entity referencies) that are not able to reconstruct from the XmlDocument produced by the XML parser -- which is the input that an XSLT processor sees.

**You can pass to the extension function the document object (`/`)** and then the Java function can use a method like `OuterXml()` or `InnerXml()` to get one possible representation of the XML document.

# objective-c - 对于循环计数器返回空值？

> ID：12189622
> 
> 赞同：0
> 
> 时间：2012-08-30T03:55:06.083
> 
> 标签：objective-c, for-loop

我正在做一门逐位算术的课程（即任何大小的数字的算术）。

我有这个在运行时崩溃的 for 循环，并抱怨“列”为空。任何人都可以对此有所了解吗？

```
for(column=0; column < bigger.length; column++) {
    NSLog(@"column %@", column);
    workingDigit = [y intAt:column] + [self intAt:column] + carry;
    carry = workingDigit / 10;      //make the carry not include the last digit of the sum
    workingDigit = workingDigit % 10;      //make the digit not include the carry

    [result insertString:[NSString stringWithFormat:@"%d", workingDigit] atIndex:0];
} 
```

顺便说一句，列是一个 int，声明为实例变量。此外，该 NSLog 打印出“列（空）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:59:04.917

你应该使用这个：

```
NSLog(@"column %d", column); 
```

# php - 为什么我会收到有关 T_CONSTANT_ENCAPSED_STRING 的语法错误？

> ID：12189626
> 
> 赞同：0
> 
> 时间：2012-08-30T03:55:37.990
> 
> 标签：php, syntax, syntax-error

我有一个函数用于在表格中显示用户购物车中的项目：

```
function products() {
    $get = mysql_query('SELECT id, name, description, price FROM menu WHERE quantity > 0');
    if (mysql_num_rows($get) == 0) {
        echo"Sorry, There is no products to display.";
    }
    else {
        while ($get_row = mysql_fetch_assoc($get)) {
            echo '<p>''<table>''<tr>''<td>'.$get_row['name'].'</td>''<td>'.$get_row['description'].'</td>''<td>$'.number_format($get_row['price'], 2).'</td>''<td>''<a href="cart.php?add='.$get_row['id'].'">Add To Cart</a></td></tr></table></p>';
        }
    }
} 
```

不幸的是，当我尝试使用该代码时，出现此错误：

> 解析错误：语法错误、意外`T_CONSTANT_ENCAPSED_STRING`、期待`,`或`;`在`C:\xampp\htdocs\shopping\cart.php`第 37 行

第 37 行是这一行：

```
echo '<p>''<table>''<tr>''<td>'.$get_row['name'].'</td>''<td>'.$get_row['description'].'</td>''<td>$'.number_format($get_row['price'], 2).'</td>''<td>''<a href="cart.php?add='.$get_row['id'].'">Add To Cart</a></td></tr></table></p>'; 
```

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T03:59:23.680

与其他一些语言不同，PHP 不会自动连接连续的字符串文字。您必须明确连接：

```
echo 'a' . 'b' . 'c' . $someVar . 'd'; 
```

或使用逗号：

```
echo 'a', 'b', 'c', $someVar, 'd'; 
```

或者只是自己加入文字：

```
echo 'abc' . $someVar . 'd'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:58:38.123

那里不应该有小''。IE：

```
<p>''<table>''<tr>''<td> 
```

将其更改为...

```
<p><table><tr><td> 
```

在其他任何地方，你都有一个像上面一样的''。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:58:47.833

尝试这个

```
 echo '<p><table><tr><td>'.$get_row['name'].'</td><td>'.$get_row['description'].'</td><td>$'.number_format($get_row['price'], 2).'</td><td><a href="cart.php?add='.$get_row['id'].'">Add To Cart</a></td></tr></table></p>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T03:59:04.550

像这样的事情`'<p>''<table>'`是不好的。你为什么不把它们全部`'<p><table>'`合二为一呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T04:00:49.447

```
echo '<p><table><tr><td>'.$get_row['name'].'</td>
<td>'.$get_row['description'].'</td>
<td>'$.number_format($get_row['price'], 2).'</td>
<td><a href="cart.php?add='.$get_row['id'].'">Add To Cart</a></td>
</tr></table></p>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T04:03:54.633

```
you have to write like this in while loop

echo '<p><table><tr><td>'.$get_row['name'].'</td><td>'.$get_row['description'].'</td><td>$'.number_format($get_row['price'], 2).'</td><td><a href="cart.php?add='.$get_row['id'].'">Add To Cart</a></td></tr></table></p>'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-30T11:15:12.920

像这样编辑

```
echo'<p><table><tr><td>'.$get_row['name'].'</td><td>'.$get_row['description'].'</td><td>'.$number_format($get_row['price'], 2).'</td><td><a href="cart.php?add='.$get_row['id'].'">Add To Cart</a></td></tr></table></p>'; 
```

简单的朋友。接受答案，如果它适合你。你也做错了

```
<td>'.$number_format($get_row['price'],2).'</td>//you coded like <td>$'.number_format()... 
```

# arrays - 按索引对切片 R 数组

> ID：12189627
> 
> 赞同：2
> 
> 时间：2012-08-30T03:55:41.720
> 
> 标签：arrays, r, slice

我在 R 中有一个包含 3 列的数组，如下所示：

```
>x
[,1]     [,2] [,3]
V1 7.803550 0.000000    0
V2 7.842899 0.000000    0
V3 7.310273 0.000000    0
V4 7.230438 0.000000    0
V5 6.582147 1.097024    0
V6 9.364152 0.000000    0 
```

对于我的数组切片，我想要每一行的不同列，所以我想要的索引是：

```
rows<-1:6
cols<-c(1,1,1,2,3,1) 
```

当我尝试在 R 中获取适当的数组切片时，而不是获取具有适当值的向量，

```
> t
      V1       V2       V3       V4       V5       V6 
7.803550 7.842899 7.310273 0.000000 0.000000 9.364152 
```

我得到一个 6x6 的输出矩阵，其中为所有选定的行打印出给定的列

```
> t
       [,1]     [,2]     [,3]     [,4] [,5]     [,6]
V1 7.803550 7.803550 7.803550 0.000000    0 7.803550
V2 7.842899 7.842899 7.842899 0.000000    0 7.842899
V3 7.310273 7.310273 7.310273 0.000000    0 7.310273
V4 7.230438 7.230438 7.230438 0.000000    0 7.230438
V5 6.582147 6.582147 6.582147 1.097024    0 6.582147
V6 9.364152 9.364152 9.364152 0.000000    0 9.364152 
```

如何在没有 for 循环的向量中获得所需的索引对？

根据大卫的建议，我希望能工作的代码是

```
t<-x[rows,cols] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T04:14:58.443

怎么样：

```
x[cbind(rows, cols)] 
```

读入？“[”为什么这应该有效。（我认为它比罗宾逊的 sapply 策略更快。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:59:34.440

可能不能做得更好

```
sapply(1:length(rows), function(i) x[rows[i], cols[i]]) 
```

# qt - Qt 客户端（GUI）连接到 QT 服务器

> ID：12189636
> 
> 赞同：0
> 
> 时间：2012-08-30T03:56:55.130
> 
> 标签：qt, client-server, qtnetwork

到目前为止，我所看到的所有示例都指向客户端服务器，其中客户端只有一个功能（例如：获取服务器日期和时间），而服务器仅提供此功能。因此，当服务器从客户端收到请求时，它知道必须调用什么业务对象的函数来服务请求。但是，当构建复杂的应用程序（例如：学校管理系统）时，服务器上有很多业务对象，现在，客户端如何告诉服务器要调用哪个业务对象的功能。这整个问题是关于 QT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:41:10.190

您可以根据自己的目的使用自定义信号和插槽。

从客户端

只需发出带有传递参数作为作业 ID 或作业名称的信号

```
ex: emit signalA(jobId); 
```

在服务器端，将信号连接到所需的功能

```
ex: connect(client, SIGNAL(signalA(int jobId)), this, SLOT(functionA(int jobId))); 
```

我希望这将有助于您确定工作

# csv - CSV 转换

> ID：12189640
> 
> 赞同：0
> 
> 时间：2012-08-30T03:57:21.403
> 
> 标签：csv

我一直在寻找一种方法来使用一些 if 参数重新格式化 CSV（管道分隔符）文件，我很确定这可以在 PHP（strpos 和 if 语句）或使用 XSLT 中完成，但想知道这是否是最好的/在我去学习一门新语言之前最简单的方法。这是我试图实现的那种事情的一个小例子（真实文件大约有 25000 行，这会改变答案吗？）

99407350|数学书#13（随机信息）|AB Collings|http:www.abc.com/ABC 497790366|英文书|Harold Herbert|http:www.abc.com/HH

转换成这样：

99407350|数学书|#13|AB Collings|http:www.abc.com/ABC 497790366|英文书||Harold Herbert|http:www.abc.com/HH

关于我需要朝哪个方向看的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:11:05.610

PHP 为此提供了 getcsv() (PHP 5) 和 fgetcsv() (PHP 4 和 5)，因此如果您在 PHP 环境中工作，请使用它。参见例如[http://www.php.net/manual/en/function.fgetcsv.php](http://www.php.net/manual/en/function.fgetcsv.php)

如果您自己做某事，请记住处理“...|...”和/或 \| 有| 在一个领域内。或者进行测试以确保它不会发生 - 例如，如果发生这种情况，请检查将数据库导出到 CSV 的代码。

另请注意 - 在 Unix / Solaris / Linux / OS X 系统上，awk -F '|' '(NF != 9)' yourfile.csv | wc 将计算非 9 个字段的行数；如果你确定| 除非作为字段分隔符，否则永远不会出现，awk 也是一种非常好的语言，例如使用 awk -F '|' '{ gsub(/ [(].*[)]/, "", $1); 打印}' yourfile.csv

在这里，[(] 匹配 ( 以一种适用于不同版本的 awk 的方式，对于 [)] 也是如此。

# linux - 检测是否应用了补丁

> ID：12189645
> 
> 赞同：1
> 
> 时间：2012-08-30T03:57:57.960
> 
> 标签：linux, makefile, patch

我正在开发一个项目，该项目需要我修补 3rd 方开源库以在我的应用程序中使用。为了简单起见，我只使用 Makefile 和一个简单的配置脚本来构建应用程序。我有多个需要应用的补丁，因此我使用 Makefile 依赖项进行补丁：

```
all: patch1 patch2 patch3
    do-build-stuff-here
patch1:
    patch -p0 < patch1.patch && touch patch1
patch2:
    patch -p0 < patch2.patch && touch patch2
patch3:
    patch -p0 < patch3.patch && touch patch3 
```

我知道 Quilt，Debian 打包系统用于维护者补丁。我用过，真的很管用。然而，它引入了不必要的依赖，特别是对于那些没有 Debian 的人。

有时，并非所有补丁都被应用以允许我（和其他开发人员）在某些条件下重新测试建筑物和应用程序。当我调用“clean”或“distclean”时，我通常会反转补丁：

```
clean: rmpatch1 rmpatch2 rmpatch3
    do-clean-stuff-here
rmpatch1:
    patch -p0 -R < patch1.patch
rmpatch2:
    patch -p0 -R < patch2.patch
rmpatch3:
    patch -p0 -R < patch3.patch 
```

（忽略我可以删除原始来源并重新开始的事实。）

但是，如果不应用补丁#3，补丁可能会失败，而补丁#1 和#2 是。因此，我依赖于每个 rmpatch 的对应补丁：

```
rmpatch1: patch1
    patch -p0 -R < patch1.patch
rmpatch2: patch2
    patch -p0 -R < patch2.patch
rmpatch3: patch3
    patch -p0 -R < patch3.patch 
```

但这仍然不能解决我的问题，并且“make clean”最终会先修补源代码，然后再次取消修补！

我想我的问题是：有什么方法可以检测是否应用了补丁？我知道补丁在交互式运行时会告诉您它找到了以前应用的补丁。这种行为可以以非交互方式重现吗？

另一个问题（有点相关）是这种修补方法是否有效，如果不是，我可以使用哪种顺序修补方法（仅通过 Makefiles）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T09:40:50.790

你可以用这样的东西欺骗 Makefile：

```
all: patch1 patch2 patch3
    do-build-stuff-here
patch1:
    patch -p0 < patch1.patch && touch patch1
    touch $@
patch2:
    patch -p0 < patch2.patch && touch patch2
    touch $@
patch3:
    patch -p0 < patch3.patch && touch patch3
    touch $@ 
```

这样，一旦应用了补丁，就会为每个规则创建一个文件。您可以测试它在规则中的存在以取消应用补丁，或者使用它来决定是否需要重新应用补丁。

# couchdb - 同时使用图形数据库和文档数据库

> ID：12189646
> 
> 赞同：7
> 
> 时间：2012-08-30T03:58:01.063
> 
> 标签：couchdb, neo4j, graph-databases, document-database, 2phase-commit

我正在考虑一种设置，其中我将实体存储在文档数据库（例如 CouchDB）和图形数据库（例如 Neo4j）中。基本原理是将每个实体信息（数据、blob、值、复杂的内部结构）存储在文档数据库中，同时将实体关系（父、子、关联实体）存储在图形数据库中。

有没有人做过/看到/被这样的设置咬过？我应该期待什么样的问题？首先想到的是两阶段提交。但是备份在这里也有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T13:27:39.253

您可以查看“[七周内的七个数据库](http://pragprog.com/book/rwdata/seven-databases-in-seven-weeks)”一书。第 8 章讨论通过 CouchDB、Neo4j 和 Redis 构建多语言结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:07:25.840

冉，

由于 CouchDB 和大多数（全部？）文档/ kv 存储不支持事务，因此您需要停止担心两阶段提交。例如，您*可以*在 Neo4j 和 MySQL 之间进行 XA 事务，但不能在 CouchDB 或其亲属之间进行。

确实，为简单起见，为什么不采用纯图形数据库架构呢？您获得了更好的表现力和交易 - 以第二个商店类型的形式添加另一个移动部分的基本原理是什么？

# c# - IEnumerable 之间的复杂性 返回类型实现

> ID：12189647
> 
> 赞同：0
> 
> 时间：2012-08-30T03:58:06.900
> 
> 标签：c#, .net, ienumerable

这两种实现之间是否存在显着的复杂性差异，或者编译器是否对其进行了优化？

**用法**：

```
for(int i = 0; i < int.MaxValue; i++)
{
    foreach(var item in GoodItems)
    {
        if(DoSomethingBad(item))
           break; // this is later added.
    }
} 
```

**实施（1）**：

```
public IEnumerable<T> GoodItems
{
   get { return _list.Where(x => x.IsGood); }
} 
```

**实施（2）**：

```
public IEnumerable<T> GoodItems
{
   get { foreach(var item in _list.Where(x => x.IsGood)) yield return item; }
} 
```

似乎 IEnumerable 方法应该始终使用 (2) 来实现？什么时候比另一个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:14:11.843

我刚刚构建了一个示例程序，然后使用 ILSpy 来检查输出程序集。第二个选项实际上将生成一个额外的类，该类将调用包装起来，`Where`但将零值添加到代码中。代码必须遵循的额外层可能不会在大多数程序中导致性能问题，但考虑所有额外的语法只是为了以稍慢的速度执行相同的事情。在我的书中不值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T04:18:48.393

`where`内部使用`yield return`。您无需将其包装在另一个`yield return`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:16:17.733

你`_list.where(x => x.IsGood);`两者都做。话虽如此，这不是很明显哪个必须是更好的用法吗？

`yield return`有它的用途，但这种情况，尤其是在吸气剂中，不是一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T06:52:25.380

“实现 2”中没有有效负载的额外代码在这里不那么邪恶。

每次调用属性 getter 时，这两种变体都会导致不必要的新对象创建。因此，两个连续的 getter 调用的结果将不相等：

```
interface IItem
{
    bool IsGood { get; set; }
}

class ItemsContainer<T>
    where T : IItem
{
    private readonly List<T> items = new List<T>();

    public IEnumerable<T> GoodItems
    {
        get { return items.Where(item => item.IsGood); }
    }

    // ...
}

// somewhere in code
class Item : IItem { /* ... */ }

var container = new ItemsContainer<Item>();
Console.WriteLine(container.GoodItems == container.GoodItems); // False; Oops! 
```

您应该避免这种副作用：

```
class ItemsContainer<T>
    where T : IItem
{
    private readonly List<T> items;
    private readonly Lazy<IEnumerable<T>> goodItems;

    public ItemsContainer()
    {
        this.items = new List<T>();
        this.goodItems = new Lazy<IEnumerable<T>>(() => items.Where(item => item.IsGood));
    }

    public IEnumerable<T> GoodItems
    {
        get { return goodItems.Value; }
    }

    // ...
} 
```

或制作一个方法而不是属性：

```
public IEnumerable<T> GetGoodItems()
{
  return _list.Where(x => x.IsGood);
} 
```

此外，如果您想向客户端代码提供项目的快照，该属性也不是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T04:41:37.147

在内部，第一个版本被编译成如下所示：

```
public IEnumerable<T> GoodItems
{
    get
    {
        foreach (var item in _list)
            if (item.IsGood)
                yield return item;
    }
} 
```

而第二个现在看起来像：

```
public IEnumerable<T> GoodItems
{
    get
    {
        foreach (var item in GoodItemsHelper)
            yield return item;
    }
}

private IEnumerable<T> GoodItemsHelper
{
    get
    {
        foreach (var item in _list)
            if (item.IsGood)
                yield return item;
    }
} 
```

LINQ 中的`Where`子句是通过延迟执行实现的。所以没有必要应用`foreach (...) yield return ...`模式。您正在为自己做更多的工作，并可能为运行时做更多的工作。

我不知道第二个版本是否与第一个版本相同。从语义上讲，两者*的*区别在于，第一个执行单轮延迟执行，而第二个执行两轮。基于这些理由，我认为第二个会更复杂。

您需要问的真正问题是：当您公开 IEnumerable 时，您要做出什么保证？你是说你想简单地提供前向迭代吗？或者你是说你的界面提供了延迟执行？

在下面的代码中，我的*意图*是简单地提供没有随机访问的前向枚举：

```
private List<Int32> _Foo = new List<Int32>() { 1, 2, 3, 4, 5 };

public IEnumerable<Int32> Foo
{
    get
    {
        return _Foo;
    }
} 
```

但在这里，我想防止不必要的计算。我希望仅在请求结果时才执行昂贵的计算。

```
private List<Int32> _Foo = new List<Int32>() { 1, 2, 3, 4, 5 };

public IEnumerable<Int32> Foo
{
    get
    {
        foreach (var item in _Foo)
        {
            var result = DoSomethingExpensive(item);
            yield return result;
        }
    }
} 
```

尽管这两个版本在外观上`Foo` *看起来*相同，但它们的内部实现却做了不同的事情。这是您需要注意的部分。当您使用 LINQ 时，您无需担心延迟执行，因为大多数操作员都会为您执行此操作。在您自己的代码中，您可能希望根据需要使用第一个或第二个。

# sql-server - 编写此 sql 的另一种方法

> ID：12189651
> 
> 赞同：1
> 
> 时间：2012-08-30T03:58:28.453
> 
> 标签：sql-server, sql-server-2008, tsql

环境：SQL Server 2008

具有包含逗号分隔值的列的行。

即使该 csv 中存在单个产品，要获取该行的内容。

这就是我能做到的，但只是想知道是否有另一种写法？

```
SELECT * FROM REWARDS
WHERE ProductCsv like '%banana%' 
   or ProductCsv like '%strawberry%' 
   or ProductCsv like '%orange%' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:11:31.123

您当前的查询似乎无法准确捕获您想要的结果。如果我们有这样的一行怎么办：

```
bananaberry cream pie,strawberry shortcake,orange juice 
```

这是否应该与您的查询匹配？我认为这会更准确：

```
WHERE ',' + ProductCsv + ',' LIKE '%,banana,%'
   OR ',' + ProductCsv + ',' LIKE '%,strawberry,%'
   OR ',' + ProductCsv + ',' LIKE '%,orange,%' 
```

如果您只是想找到*一个*项目，这可能更有效：

```
WHERE ',' + ProductCsv + ',' LIKE '%,banana,%' 
```

您可能想要使用拆分功能。例如：

```
CREATE FUNCTION dbo.SplitStrings_XML
(
   @List   NVARCHAR(MAX),
   @Delim  NVARCHAR(255)
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN 
   (  
      SELECT Item = y.i.value('(./text())[1]', 'nvarchar(4000)')
      FROM 
      ( 
        SELECT x = CONVERT(XML, '<i>' + REPLACE(@List, @Delim, '</i><i>') 
        + '</i>').query('.')
      ) AS a CROSS APPLY x.nodes('i') AS y(i)
   );
GO 
```

所以现在你可以说：

```
SELECT * FROM dbo.REWARDS AS r
WHERE EXISTS 
(
  SELECT 1 FROM dbo.REWARDS AS r2
  CROSS APPLY dbo.SplitStrings_XML(r2.ProductCsv, ',') AS x
  WHERE x.Item IN ('orange','strawberry','banana')
  AND r2.[key] = r.[key]
); 
```

或者更简单地说：

```
SELECT DISTINCT r.ProductCsv --, other columns
  FROM dbo.REWARDS AS r
  CROSS APPLY dbo.SplitStrings_XML(r.ProductCsv, ',') AS x
  WHERE x.Item IN ('orange','strawberry','banana'); 
```

XML 方法有点脆弱，具体取决于可以存储在表中的字符串的种类，但是有很多替代方法（包括通过 TVP 而不是作为列表或单独的值传递您的集合）。有关拆分函数的更深入背景，请参阅以下博客文章：

[http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)

[http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-follow-up](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-follow-up)

[http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)

说了这么多，不知道是不是比你现在的好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:09:45.210

看看下面使用 XML 的例子

```
DECLARE @Table TABLE(
        CommaList VARCHAR(MAX)
)

INSERT INTO @Table SELECT 'banana,test,hello'
INSERT INTO @Table SELECT 'homer,banana,test,hello'
INSERT INTO @Table SELECT 'homer,banana'
INSERT INTO @Table SELECT '1,2,3'

;WITH XMLValues AS (
        SELECT  *,
                CAST('<d>' + REPLACE(CommaList, ',', '</d><d>') + '</d>' AS XML) XMLValue
        FROM    @Table t
)
, SplitValues AS (
        SELECT  xv.*,
                T2.Loc.value('.','VARCHAR(MAX)') SplitValue
        FROM    XMLValues xv
        CROSS APPLY XMLValue.nodes('/d') as T2(Loc) 
)
SELECT  DISTINCT
        CommaList
FROM    SplitValues
WHERE   SplitValue = 'banana' 
```

[xml 数据类型方法](http://msdn.microsoft.com/en-us/library/ms190798%28v=sql.105%29.aspx)

[nodes() 方法（xml 数据类型）](http://msdn.microsoft.com/en-us/library/ms188282%28v=sql.105%29.aspx)

[value() 方法（xml 数据类型）](http://msdn.microsoft.com/en-us/library/ms178030%28v=sql.105%29.aspx)

[使用公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T05:59:07.357

您可以将所有要比较的值存储在一个表中

```
DECLARE @Product_list TABLE(
        products VARCHAR(50)
)

Insert into @Product_list values
('banana'),
('strawberry'),
('orange')

SELECT * FROM REWARDS
join @Product_list
on ProductCsv like '%'+products+'%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T04:02:27.263

您可以使用拆分功能（网上有很多）将 ProductsCsv 拆分为单个元素，然后将其与香蕉、草莓等进行比较。

理想情况下，您不会将 CSV 数据存储在列中，而是为此使用单独的表。

# asp.net - 如何在一个数据库的视图中显示多个表？

> ID：12189653
> 
> 赞同：0
> 
> 时间：2012-08-30T03:58:36.950
> 
> 标签：asp.net, database, asp.net-mvc-3

目前我有一个包含这些字段的产品数据库表：

名称 类别（例如产品类型） 子类别（例如包装） 价格

例如，A 类有 3 种包装。我希望它显示在三个不同的表格中。我可以分别取出三个表，但表显示相同的数据。

有人可以帮我吗？

我的公共 ViewResult Index() 控制器类中有这些代码。var productsCornIndustrial = from cornIndustrial in db.Products where cornIndustrial.Category == "Corn Oil" & cornIndustrial.SubCategory == "Industrial" 选择cornIndustrial;

```
 return View(productsCornIndustrial.ToList());

        var productsCornFoodservice = from cornFoodservice in db.Products
                                      where cornFoodservice.Category == "Corn Oil" & cornFoodservice.SubCategory == "Foodservice"
                                      select cornFoodservice;

        return View(productsCornFoodservice.ToList());

        var productsCornRetail = from cornRetail in db.Products
                                 where cornRetail.Category == "Corn Oil" & cornRetail.SubCategory == "Retail"
                                 select cornRetail;

        return View(productsCornRetail.ToList()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:22:35.910

阅读 ViewModels 模式。我会这样写：

构建一个单独的 ViewModel 类来保存你的所有数据：

```
public class NewViewModel
{
  public List<Products> IndustrialList {get;set;}
  public List<Products> FoodList {get;set;}
  public List<Products> RetailList{get;set;}

  //ctor etc... get the data from DAL
} 
```

……

并在控制器中使用此类向视图传递强类型的 ViewModel 对象：

```
public ActionResult Index(int? id)
{
  var items = new NewViewModel();
  return View(items);
} 
```

# google-app-engine - 是否可以滥用 allocate_ids？我可以冒用完身份证的风险吗？

> ID：12189655
> 
> 赞同：1
> 
> 时间：2012-08-30T03:58:45.333
> 
> 标签：google-app-engine, google-cloud-datastore

前面的问题：

据我了解， allocate_ids 将保留一个 id 块，数据存储不会将其用于新实体创建或另一个 allocate_ids 调用。那是对的吗？

如果是这样，未使用的分配 id 是否曾经被重用过？如果是这样，超时时间是多少？

如果未使用的已分配 id 永远不会被重用，我会冒 id 用完的风险吗？是否有任何其他不利影响（即 id 变得过大）。

背景：

我正在尝试创建一个系统来防止通过 REST API 创建重复的对象。我在创建初始表单时调用了 allocate_ids，并将 id 嵌入到表单中。当表单提交到 REST API 时，它会创建具有嵌入 ID 的对象。如果同一个表单被提交两次，我会知道不要创建重复的对象。

表单可能会被多次查看而没有提交，在这种情况下，我冒着用完很多我从未创建实体的 id 的风险。这个计划有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:34:02.700

您的系统很容易被黑客入侵，有人可以手动更改 ID 的值，它将覆盖现有实体。创建新对象时，只需发布​​数据并让 AppEngine 为您生成和标识。

allocate_id（至少）在 64 位空间中工作，因此即使您每秒生成 10 个 id，也需要数千年才能用完它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T08:38:15.957

几个问题：

1.  不要向客户端公开数据存储 ID。正如@Shay 所指出的，这是一个安全风险，因为用户可以直接操作数据。

2.  重复提交表单的问题基本上是应用程序工作流程的问题。为了解决这个问题，我更喜欢客户端解决方案（javascript），但如果您坚持使用服务器端解决方案，请使用[session](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)。创建一个伪造的 ID，将其保存在会话中，并将其设置为表单中的隐藏字段。提交表单时检查此字段。

# java - 从txt文件java扫描仪读取二维数组

> ID：12189666
> 
> 赞同：1
> 
> 时间：2012-08-30T03:59:37.593
> 
> 标签：java, arrays, 2d

我不断得到：

```
java.util.InputMismatchException
at java.util.Scanner.throwFor(Scanner.java:909)
at java.util.Scanner.next(Scanner.java:1530)
at java.util.Scanner.nextInt(Scanner.java:2160)
at java.util.Scanner.nextInt(Scanner.java:2119)
at Driver0.readFile(Driver0.java:38)
at Driver0.main(Driver0.java:18) 
```

尝试使用扫描仪类，因为到目前为止我只知道它。任何帮助表示赞赏。试图读取二维数组，但它从未完全读取它。我的 input.txt 文件是：

3 5

2 3 4 5 10

4 5 2 3 7

-3 -1 0 1 5

```
import java.io.*;
import java.util.*;
public class Driver0 {
//public static String fileName; // declare so it may be used outside of main
public static int[][] array; // declare as empty until given dimensions
public static int dimensionA, dimensionB; // dimensions used in methods
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    System.out.println("What is the name of the data file?");
    System.out.print("> ");
    String fileName = input.nextLine();
    readFile(fileName);
    String nextCommand = "";
    while (!(nextCommand.equals("quit"))) {
        System.out.println("\nNext command");
        System.out.print("> ");
        nextCommand = input.nextLine();
        choice (nextCommand);
    }
}
public static void choice(String command) {
    switch (command) {
        case "help": System.out.println("show array\nrows sorted\ncols sorted"+
                    "increase row i by n\nincrease col j by n\nquit\n");
                break;
        default: showArray();
    }
}
public static void readFile(String fileName) {
    try {
        Scanner foo = new Scanner(fileName);
        dimensionA = foo.nextInt();
        dimensionB = foo.nextInt();

        array = new int[dimensionA][dimensionB];
        while (foo.hasNext()) {
            for (int row = 0; row < dimensionA; row++) {
                foo.nextLine();
                for (int column = 0; column < dimensionB; column++) {
                    array[row][column] = foo.nextInt();
                }
            }
        }
        foo.close();
    }
    catch(Exception e) {
        e.printStackTrace(); // displays type of error
    }
}
public static void showArray() {
    for (int ro = 0; ro < dimensionA; ro++) {
        for (int col = 0; col < dimensionB; col++) {
            System.out.print(array[ro][col]);
        }
        System.out.println();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:50:42.277

遍历[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)类中的方法。

特别是`hasXXX()`和`nextXXX()`方法，它们是成对出现的。尽量不要混合匹配那些会使事情变得复杂的方法。您正在使用`nextInt()`、`hasNext()`和`nextLine()`。文档还解释了调用它们时这些方法的作用。

对于您的情况，`hasNextLine()`如果`nextLine()`您愿意使用[`String.split()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29). 您可以拆分返回的字符串`nextLine()`并解析整数并将其分配给数组元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:30:29.107

我认为最好使用 ArrayList。尝试这个

```
package readfile;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class Read {

public static void main(String[] args) throws FileNotFoundException, IOException {

    String line = null;
    List<String[]> list = new ArrayList<String[]>();
    BufferedReader reader = new BufferedReader(new FileReader("/home/user/My_Folder/read_me.txt"));
    while ((line = reader.readLine())!=null) { 
        list.add(getArray(line));
    }        
    reader.close();

    for (String[] stringArr : list) {
        for(String str : stringArr){
            System.out.print(str+" ");
        }
        System.out.println("");
    }

}

private static String[] getArray(String s){
    String[] array = s.split("\\s");
    return array;
}

} 
```

# svg - Highcharts 使用图表上的点进行操作

> ID：12189667
> 
> 赞同：0
> 
> 时间：2012-08-30T03:59:48.823
> 
> 标签：svg, highcharts

我正在寻找一种方法来访问图形实际 svg 对象上的每个点，以便即时更改其某些属性。

假设我有 100 个对象，其中大约 50% 需要用不同的颜色绘制（尽管它们属于同一个数据系列，但没有办法）。因此，通过使用：

```
chart.series[0].points 
```

我可以修改对象属性（如填充），但之后无法重绘图表。使用 chart.redraw() 什么也没有，实际上它会改变点的颜色，但只有在我将鼠标悬停在它们上之后，图表本身才不会正确重绘。

任何帮助表示赞赏。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:28:00.350

至少有两种方法可以在这里使用。

**加载**
时您可以在将每个点添加到数据数组时明确定义每个点的颜色。以下是文档说明的内容

> 具有命名值的对象列表。在这种情况下，对象是点配置对象，如下所示。
> 
> 范围系列值由低和高给出。例子：

```
data: [{
name: 'Point 1',
color: '#00FF00',
y: 0
}, {
name: 'Point 2',
color: '#FF00FF',
y: 5
}] 
```

参考：[http ://api.highcharts.com/highcharts#series.data](http://api.highcharts.com/highcharts#series.data)

jsFiddle @ [http://jsfiddle.net/jugal/mXPPH/](http://jsfiddle.net/jugal/mXPPH/)

**动态**您可以使用以下方法
将颜色/标记添加到各个点，`point.update()`

```
var p = chart.series[0].points[l - 1];
p.update({
    marker: {
        symbol: 'square',
        fillColor: "#A0F",
        lineColor: "A0F0",
        radius: 5
    }
}); 
```

参考：[http ://api.highcharts.com/highcharts#Point.update%28%29](http://api.highcharts.com/highcharts#Point.update%28%29)

您可能还想查看我为这个问题提供的类似答案@ [Dynamically draw marker on last point in highcharts](https://stackoverflow.com/questions/11083794/draw-marker-on-last-point-in-highcharts/11785236#11785236) and its jsFiddle @ [http://jsfiddle.net/jugal/zJZSx/](http://jsfiddle.net/jugal/zJZSx/)

# c++ - C++；使用字符串 getline() 不适用于文件输入

> ID：12189668
> 
> 赞同：2
> 
> 时间：2012-08-30T03:59:48.113
> 
> 标签：c++, input, iostream, getline

我可以让 getline() 与 cin (getline(cin,line)) 一起使用，但是当我打开一个流时，它不会从文件中读取该行。该文件包含元素周期表中的元素列表。

例如：
H
He
O
等...

编辑：

但是，当我尝试 cout 新读取的行时，它不会将其放入该行的 var 符号中：
cout << "symbol: " << symbol << endl;

它没有给我任何东西，但它应该返回第一个元素（H）。

```
#include <fstream>
#include <iostream>
#include <vector>
#include <string>

using namespace std;

void print(vector <string> x)
{
    cout << "list of elements:" << endl;
    for (int i = 0; i < x.size(); ++i)
    {
        cout << x[i] << endl;
    }
}

int main(int argc, char** argv) 
{
    string symbol;
    vector <string> elementlist;
    ifstream readin;

    readin.open("Elements.txt");
    getline(readin,symbol);
    cout << "symbol: " << symbol << endl;
    while (!readin.good())
    {
        elementlist.push_back(symbol);
        getline(readin,symbol);
    }
    print (elementlist);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:31:49.017

我会这样做：

```
#include <string>
#include <iostream>
#include <fstream>
#include <vector>
#include <iterator>

class line {
    std::string data;
public:
    friend std::istream &operator>>(std::istream &is, line &l) {
        std::getline(is, l.data);
        return is;
    }
    operator std::string() const { return data; }    
};

int main() {
    std::ifstream readin("Elements.txt");

    // Initialize vector from data in stream:
    //
    std::vector<std::string> 
        element_list((std::istream_iterator<line>(readin)),
                      std::istream_iterator<line>());

    // write data from vector to cout:
    //
    std::copy(element_list.begin(), element_list.end(),
             std::ostream_iterator<std::string>(std::cout, "\n"));

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:08:14.633

正如我在[评论](https://stackoverflow.com/questions/12189668/c-using-strings-getline-not-working-with-file-input/12189729#comment16321778_12189668)中所说，您的循环条件是错误的。

> ```
> while (!readin.good())
> {
>     elementlist.push_back(symbol);
>     getline(readin,symbol);
> } 
> ```

事实证明，您*想*使用条件进行循环`readin.good()`。由于`!readin.good()`将评估为`false`，因此您永远不会真正进入循环。

# objective-c - UIPickerView：排序和显示一组值会在移动时导致崩溃？

> ID：12189672
> 
> 赞同：1
> 
> 时间：2012-08-30T04:00:43.733
> 
> 标签：objective-c, sorting, nsmutablearray, nsarray, uipickerview

我正在尝试按字母顺序对字符串的 NSMutableArray 进行排序，并在 UIPickerView 中显示排序列表。我正在使用另一个 NSArray 来创建排序列表。

我使用 PickerView 委托方法并将它们包含在我的 .h 设置中：并将数据源和委托出口连接到 filesOwner。在我的 .h 文件中，我还创建了一个 IBOutlet UIPickerView *pickerView; 并为它创建了一个合成属性，如下所示：

```
@property (nonatomic, retain) IBOutlet UIPickerView *pickerView; 
```

为了解决问题，我首先通过执行以下操作将未排序的 NSMutableArray 设为源：

```
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

return [pickerArray objectAtIndex:row];
} 
```

我未排序的 MutableArray 没有问题，并且在 PickerView 中显示数据（未排序）没有问题，但是当我将数组更改为排序的 NSArray 时，我在尝试移动 PickerView 后崩溃了！？两个数组中项目的 NSLog 显示相同数量的项目，相同的数据（明显不同的显示）但是 Xcode 报告 EXC_BAD_ACCESS?? 这个分不清？？

这是我的代码：（注意：sortedPickerArray 是一个 NSArray，pickerArray 是一个在我的 .h 文件中声明的 NSMutableArray）

```
- (void)viewDidLoad{

[super viewDidLoad];

sortedPickerArray = [[NSArray alloc] init];

pickerArray = [[NSMutableArray alloc] initWithObjects:
               @"ObjectA",
               @"ObjectB",
               @"ObjectC",
               @"ObjectD",
               nil];

sortedPickerArray = [pickerArray sortedArrayUsingSelector: @selector(caseInsensitiveCompare:)];
[pickerView selectRow:0 inComponent:0 animated:NO];
pickerView.showsSelectionIndicator = YES;}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView{

return 1;
}

-(NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component{

return [sortedPickerArray count];
}

-(NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
return [sortedPickerArray objectAtIndex:row];
}

-(void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

NSLog(@"Row %d was selected", row);
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:12:02.523

我在这个答案中假设你没有使用 ARC，因为你有一个保留的财产。您可以使用以下语句为您的实例变量分配一个自动释放的值：

`sortedPickerArray = [pickerArray sortedArrayUsingSelector: @selector(caseInsensitiveCompare:)];`

当您`sortedPickerArray`稍后访问时，它已经被释放。因此，再次假设您没有使用 ARC，请`retain`在其中添加一个。并删除该行 `sortedPickerArray = [[NSArray alloc] init];`，因为您现在正在泄漏此数组。

# c# - 使用 Castle Windsor 解析具有泛型类型的接口

> ID：12189673
> 
> 赞同：0
> 
> 时间：2012-08-30T04:00:45.683
> 
> 标签：c#, castle-windsor

我正在尝试使用具有继承自的泛型类型的接口来解析具体类型。

这一切似乎都有效，但是当我尝试在已解析的具体类型上调用方法时，它会引发以下异常：

> {“'MvcApplication2.Utilities.Common.CQRS.GetAlbumsByIdQueryHandler.Execute(MvcApplication2.Utilities.Common.CQRS.GetAlbumsByIdQuery)'的最佳重载方法匹配有一些无效参数”}

有谁知道这可能是什么原因造成的？解析的类型是正确的，我认为可能与使用动态类型有关？

谢谢。

* * *

这是我的处理程序安装程序：

```
container.Register(AllTypes.FromAssemblyContaining<IQueryHandler>()
                                        .BasedOn(typeof (IQueryHandler<>))
                                        .WithService
                                        .AllInterfaces()
                                        .LifestyleSingleton()); 
```

目前的决议是：

```
 Type queryHandlerType = typeof (IQueryHandler<>).MakeGenericType(query.GetType());
        dynamic queryHandler = _kernal.Resolve(queryHandlerType);

        return queryHandler.Handle(query); 
```

以及相关的类：

```
public interface IQueryHandler<in TQuery> : IQueryHandler where TQuery : IQuery
{
    IQueryResult Handle(TQuery query);
}

public class GetAlbumsByIdQueryHandler : IQueryHandler<GetAlbumsByIdQuery>
{
    #region IQueryHandler<GetAlbumsByIdQuery> Members

    public IQueryResult Execute(GetAlbumsByIdQuery query)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T10:10:13.307

```
 return queryHandler.Handle((dynamic)query); 
```

# php - 使用 PHP 驱动程序在文档中查找嵌套值

> ID：12189674
> 
> 赞同：1
> 
> 时间：2012-08-30T04:00:46.160
> 
> 标签：php, mongodb, nested

好的，这是我的问题。我数据库中的每个用户都有名为“朋友”的字段。每次添加朋友时，它都会获得一个唯一的 id，并根据该 id 的字符串类型版本在朋友字段中键入，如下所示：

```
$user          =   AppDatabase::getInstance()->getUser($user_id);
$user_friends  =   $user['friends'];
$new_friend    =   array
                                    (
                                        'friend_id'=>new MongoId($friend_id),
                                        'nickname'=>(string)$nickname,
                                        'friendpic'=>''
                                    );

$user_friends[(string)$friend_id] = $new_friend; 
```

这一切都很好，工作正常，我在 db 中得到如下所示的结果：

```
'friends':
{
503da7ba65d351681a00000c
{
'friend_id':{$oid:503da7ba65d351681a00000c},
'nickname':"Heisenberg",
'friendpic':''
}
} 
```

现在，我需要做的是只使用他们的friend_id而不知道user_id（或有关用户的任何信息）来找到朋友。我对如何做到这一点有点困惑，基本上我脑海中的过程是：

*   传入好友的id
*   查询用户的收藏
*   查找所有“user_friends”字段
*   从中找到与我最初传入的id匹配的key
*   以正确的朋友对象结束

我正在尝试的所有方法都没有真正起作用。也许我的数据结构不正确。如果有人能让我走上正确的道路，我将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:21:57.480

基本上我认为你想做的是为一个跨越多个用户的朋友创建一个编辑表单。所以让我们分解一下：

*   你有好友ID
*   所有用户中的所有朋友都具有相同的数据（或者可能没有，并且朋友 ID 是唯一的，这应该可以工作）
*   您需要在不知道根文档的 id 的情况下更新该朋友 id

在这里可以为您提供帮助的一件事是 Mongo 的 v2.2，它实际上可以使用主文档中的位置运算符来选择它，从而为您提供与以下类似的结果：

```
'friends':
{
503da7ba65d351681a00000c: {
    'friend_id':{$oid:503da7ba65d351681a00000c},
    'nickname':"Heisenberg",
    'friendpic':'' }
} 
```

无论您在该列表中有多少朋友。我个人还没有使用过这种查询方法，但是这里是它的 JIRA：[https](https://jira.mongodb.org/browse/SERVER-828) ://jira.mongodb.org/browse/SERVER-828所以你可以玩这样的查询：

```
find({'friends.503da7ba65d351681a00000c': {$exists: true}}, {'friends.$':1}) 
```

可能会奏效，我听说有时您需要使用`$elematch`. 我不确定这是否完全有效，因为我不确定friend_id是否重复但仍然值得一试。

在 2.2 之前，这有点困难，正如您所说，您必须找出所有存在该朋友 ID 的朋友：

```
find({'friends.503da7ba65d351681a00000c': {$exists: true}}); 
```

然后通过它来挑选它们（伪代码）：

```
foreach(result as id => friend){
    if(id == id_i_am_looking_for) return friend;
} 
```

然后您可以使用该文档并对其进行更新。要将其放回数据库中（假设您手头有完整的对象），您可以执行以下操作：

```
db.update({'friends.503da7ba65d351681a00000c': {$exists: true}}, 
    {$set: {'friends.$' : new_friend_object}}); 
```

如果您没有要玩的整个朋友对象，那么您将需要以相对相同的方式更新每个字段。

之后，您现在应该能够在不知道 user_id 的情况下更新朋友。

希望能帮助到你，

# javascript - 绑定问题 使用 XML，需要显示多个 XML 格式的视频

> ID：12189676
> 
> 赞同：0
> 
> 时间：2012-08-30T04:00:56.390
> 
> 标签：javascript, jquery, xml

我正在尝试使用 XML 创建视频，我需要显示我的 xml 中的所有视频。我试过了，但没有显示视频。对于一个视频它工作正常，但对于多个它不工作

[http://jsfiddle.net/x7PxM/7/](http://jsfiddle.net/x7PxM/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:11:24.553

你有一个逗号，应该没有任何内容或分号；尝试以下操作：

```
var xml = "<rss version='2.0'><channel><video>http://www.youtube.com/embed/mkP0FhPWTlQ</video><video>http://www.youtube.com/embed/mkP0FhPWTlQ</video></channel></rss>";
//                                                                                                                                                        Notice this ^
var xmlDoc = $.parseXML(xml);
var $xmldata = $(xmlDoc);

var video = $xmldata.find("video").text();

console.log(video); 
```

[**演示**](http://jsfiddle.net/x7PxM/6/)

**更新**

[这将做你想要](http://jsfiddle.net/x7PxM/9/)的。请注意，由于写入浏览器软件的安全限制，您无法更改不同域的 iframe。无法绕过这些限制。

如果您的 iframe 是相同的主机、端口等，您可以更改以下行：

```
$('#video').append('<iframe width="420" height="315" src="' + $(v).text() + '" frameborder="0" allowfullscreen></iframe>'); 
```

至：

```
$('#iVideo').append('<iframe width="420" height="315" src="' + $(v).text() + '" frameborder="0" allowfullscreen></iframe>'); 
```

它应该可以正常工作。

# php - 关于 Windows 上 Apache 的 MPM

> ID：12189677
> 
> 赞同：1
> 
> 时间：2012-08-30T04:01:05.277
> 
> 标签：php, apache

我想知道如何将 Apache MPM 从 mpm_winnt 更改为 prefork。

因为我使用 PHP 5.3 Non Thread Safe 。

而且我听说 prefork 比线程模型更稳定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T03:28:46.087

如果我是正确的，那么您不能在 Windows 上选择 mpm 模型。

下表列出了各种操作系统的默认 MPM。**如果您在编译时**没有做出其他选择，这将是选择的 MPM 。

 **网件：mpm_netware

操作系统/2：mpmt_os2

Unix：prefork、worker 或 event，取决于平台功能

视窗：mpm_winnt

（参考：[http](http://httpd.apache.org/docs/current/en/mpm.html) ://httpd.apache.org/docs/current/en/mpm.html ）**

# sql - 更新表时在“FROM”处或附近出现语法错误

> ID：12189678
> 
> 赞同：1
> 
> 时间：2012-08-30T04:01:10.690
> 
> 标签：sql, postgresql

我有两张桌子

```
junk=# select * from t;                                                                                                                                
   name   | intval 
----------+--------
 bar2  |      2
 bar3  |      3
 bar4  |      4
(3 rows) 
```

和

```
junk=# select * from temp;                                                                                                                             
 id |    name    | intval 
----+------------+--------
  1 | foo   |      0
  2 | foo2  |      2
  3 | foo3  |      3
  4 | foo4  |      4
  5 | foo5  |      5
(5 rows) 
```

现在，我想使用 from 中的值`table t`来更新`table temp`. 基本上，我想用 bar2、bar3 和 bar4 替换 temp 中第二、第三和第四个值中的名称列。

我使用 COPY 语句创建了表 t。我正在做批量更新，我正在尝试优化它。

所以，我得到这个错误。我认为这是非常基本的一个。

```
junk=# UPDATE temp FROM t SET name=t.name FROM t WHERE intval=t.intval;
ERROR:  syntax error at or near "FROM"
LINE 1: UPDATE temp FROM t SET name=t.name FROM t WHERE intval=t.int...
                    ^
junk=# 
```

现在，这行得通。

```
UPDATE test SET name=t.name FROM t WHERE test.intval=t.intval 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:02:46.413

摆脱你的第一个 FROM t 子句。

FROM 必须在 SET 之后，而不是之前，它只会影响 WHERE 子句。SET 必须使用子查询来完成。

您完成的代码是：

```
UPDATE temp SET name=(SELECT t.name FROM t WHERE temp.intval = t.inval); 
```

PostgreSQL 有一些方法可以优化这一点，所以它不像你只是在做一个巨大的嵌套循环连接（并根据连接条件从堆中一遍又一遍地查找一行）。

编辑：添加计划以显示我们实际上并没有对第一个表上的每一行的第二个表进行顺序扫描。

下面是一个示例，它使用来自另一个表的 group-by 更新一个表中的 172 行：

```
mtech_test=# explain analyze
update ap
set amount = (select sum(amount) from acc_trans ac where ac.trans_id = ap.id) + 1;
                                                                 QUERY PLAN 

--------------------------------------------------------------------------------
---------------------------------------------------------------------
Update on ap  (cost=0.00..3857.06 rows=229 width=231) (actual time=39.074..39.0
   74 rows=0 loops=1)
 ->  Seq Scan on ap  (cost=0.00..3857.06 rows=229 width=231) (actual time=0.050..28.444 rows=172 loops=1)
     SubPlan 1
       ->  Aggregate  (cost=16.80..16.81 rows=1 width=5) (actual time=0.109..0.110 rows=1 loops=172)
             ->  Bitmap Heap Scan on acc_trans ac  (cost=4.28..16.79 rows=4 width=5) (actual time=0.075..0.102 rows=4 loops=172)
                   Recheck Cond: (trans_id = ap.id)
                   ->  Bitmap Index Scan on acc_trans_trans_id_key  (cost=0.00..4.28 rows=4 width=0) (actual time=0.006..0.006 rows=4 loops=172)
                         Index Cond: (trans_id = ap.id)
Trigger for constraint ap_entity_id_fkey: time=69.532 calls=172
Trigger ap_audit_trail: time=391.722 calls=172
Trigger ap_track_global_sequence: time=1.954 calls=172
Trigger check_department: time=111.301 calls=172
Total runtime: 612.001 ms
(13 rows) 
```

`

# visual-studio - Visual Studio 2012 w/ Blend - System.Windows.Interactivity 在哪里？

> ID：12189685
> 
> 赞同：4
> 
> 时间：2012-08-30T04:02:35.740
> 
> 标签：visual-studio, expression-blend, blend-2012

我在 Win8 上安装了全新的 VS 2012 Premium，并正在尝试打开现有的 Silverlight 项目。该项目对 System.Windows.Interactivity.dll 的引用无法找到。VS2012内置了Blend，但是SDK在哪里？我需要从某个地方下载它吗？我应该在旧的 VS2010 机器上安装 Blend Ultimate 试用版吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:21:50.550

看来我必须安装 Blend Ultimate 试用版才能获得 SDK。我安装了它，现在 System.Windows.Interactivity 已解决

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:44:08.417

这是一个更好的解决方案： http: [//www.microsoft.com/en-us/download/confirmation.aspx?id=10801](http://www.microsoft.com/en-us/download/confirmation.aspx?id=10801)

它是包含 System.Windows.Interactivity 的 Blend SDK，它是免费提供的。（这不是试用）

# javascript - 在页脚中显示总计，以便在页面更改时值保持不变，一旦为真

> ID：12189687
> 
> 赞同：1
> 
> 时间：2012-08-30T04:02:46.093
> 
> 标签：javascript, jqgrid

我正在实现 JQGrid 并将数据类型作为 JSON 发送。另外，我设置`loadonce`为 `true`，并且能够在页脚中正确获取页脚摘要。

但是，在页面导航中，总值会根据每个页面中的行数据而变化。我的要求是显示特定列的所有记录的总计，以便页脚值在页面更改时保持不变。

我正在使用以下代码来获取页脚摘要：

```
var grid=$("#mygrid");
sum = grid.jqGrid('getCol','amount',false,'sum');
grid.jqGrid('footerData','set',{ID:'Total:',amount:sum}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:27:47.600

您可以使用`userDataOnFooter`选项来实现您的目标。首先，`true`在初始化时将此选项设置为：

```
$("#mygrid").jqGrid({
    ...
    footerrow : true,
    userDataOnFooter : true,
}); 
```

之后，您可以在响应中发送页脚行的值，JSON 应该如下所示：

```
{
    total: x,
    page: y,
    records: z,
    rows : [
        { id: "1", cell: ["value11", "value12", "value13"] },
        { id: "2", cell: ["value21", "value22", "value23"] },
        ...
    ],
    userdata: { ID: "Total:", amount: <sum counted on server side> }
} 
```

[jqGrid Demos](http://trirand.com/blog/jqgrid/jqgrid.html)页面上也有现场示例，您应该选择“New in Version 3.5”，然后选择“Summary Footer Row”。

# jsf - JBoss Seam 会破坏 JSF 生命周期吗？

> ID：12189688
> 
> 赞同：1
> 
> 时间：2012-08-30T04:02:48.583
> 
> 标签：jsf, jboss-seam

由于对话范围和双射特性，我在我的 jsf 应用程序中使用了 jboss seam。但是我担心 jboss seam 会破坏 jsf 的生命周期。jboss seam可以中断jsf生命周期吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:19:04.717

这个问题没有一个简单的答案。我认为您应该查看 Dan Allen 的[Seam in Action](http://www.manning.com/dallen/ "接缝在行动")第 3 章，详细了解 Seam (2.x) 如何使用 servlet 过滤器和 JSF 阶段侦听器扩展 JSF (1.2) 生命周期。对 Seam 实现中的类（特定的 servlet 过滤器、阶段侦听器）提供了引用，这将使跳转到源代码变得容易。还有一个图表比较了在 JSF 中添加和不添加 Seam 的 HTTP 请求处理。可以[在*Seam 和 JSF*部分](http://www.ibm.com/developerworks/java/library/j-seam1/ "艾伦关于接缝的文章")中找到同一作者对 Seam 请求处理的不太详细的描述。

# sql - SQL Help 无法解决这个关于内部连接的查询

> ID：12189690
> 
> 赞同：0
> 
> 时间：2012-08-30T04:02:58.190
> 
> 标签：sql, database

我必须弄清楚哪些游泳者在同一事件中获得了相同的位置。对于每一对这样的游泳者，我必须显示一行，显示每个游泳者的事件 ID、地点和参赛者编号。例子

```
eventid  place  competitors tied

SWM012  2   1072528 1099641

SWM021  2   1018529 1061698 
```

到目前为止，这是我的代码

```
select R1.Eventid, R1.Place, R1.Competitornum, R2.Competitornum
from Results R1, Results R2 
where R1.Place = R2.Place
group by R1.Eventid, R1.Place, R1.Competitornum, R2.Competitornum 
```

这是输出

```
eventid  Place   competitornum    competitornum

SWM010   1       1121587           1056740

SWM010   1       1121587           1061698 
```

依此类推，第一列的相同竞争者编号在第二个竞争者列中不同

我只想知道如何获得上述描述中的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:09:46.883

首先，您可能还需要加入 Event ID

```
select R1.Eventid, R1.Place, R1.Competitornum, R2.Competitornum
from Results R1, Results R2 
where R1.Place = R2.Place AND R1.EventId = R2.EventId
group by R1.Eventid, R1.Place, R1.Competitornum, R2.Competitornum 
```

上述查询返回与此相同的结果

```
select distinct R1.Eventid, R1.Place, R1.Competitornum, R2.Competitornum
from Results R1, Results R2 
where R1.Place = R2.Place AND R1.EventId = R2.EventId 
```

但这将返回所有独特的“关系”对。一个解决方案是这样

```
select distinct R1.Eventid, R1.Place, R1.Competitornum, R2.Competitornum
from Results R1, Results R2 
where R1.Place = R2.Place AND R1.EventId = R2.EventId AND R1.Competitornum > R2.Competitornum 
```

不过，这仅适用于双向联系。

# iphone - 向锁屏添加按钮

> ID：12189691
> 
> 赞同：2
> 
> 时间：2012-08-30T04:03:03.717
> 
> 标签：iphone, objective-c

我只想在锁屏上添加一个按钮，我知道`SBAwayController`管理锁屏，他们有一个拥有所有视图的 SBAwayView*，并使用 MSHook...我得到 *_awayView 那么如何添加一个按钮，例如在屏幕中间？

# php - PHP：使用 XMLHttpRequest 在文件系统中搜索图像

> ID：12189693
> 
> 赞同：0
> 
> 时间：2012-08-30T04:03:12.870
> 
> 标签：php, javascript, html, web

我正在建立一个漫画网站，并希望允许用户搜索存储在文件系统上的漫画。搜索将动态返回每个匹配漫画的缩略图，这些缩略图将链接到实际的全尺寸漫画。

我按照这个使用 XMLHttpRequest 实现搜索：http: [//www.w3schools.com/php/php_ajax_php.asp](http://www.w3schools.com/php/php_ajax_php.asp)

在该示例中，每次有字母匹配时，它都会在数组中构建一串值。我想在每次匹配字母时显示图像，而不是字符串。

所以，如果我的漫画是：[comic1，comic2，comic3，thiscomic1，thiscomic2] 并且我输入“c”，我希望显示 Comic1、comic2 和 Comic3 的图像。

我可以构建一个图像文件位置的“字符串”，以便它们可以显示，逗号分隔？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:57:51.350

您应该查看 jQuery (http://jquery.com/) - 它节省了您将遇到的很多麻烦，有两点。

1.  它简化了 AJAX（XMLHttpRequest 可以用不同的浏览器进行不同的处理，另外还有所有需要担心的错误检查和状态处理 - jQuery 简化了这一点）

2.  它还简化了将 HTML 插入 DOM 的过程（手动操作可能会很麻烦，具体取决于插入的 HTML）。

基本上，使用 jquery.get() (http://docs.jquery.com/Get#.24.get.28.29__-_Data_transfer_method) 和 html() (http://docs.jquery.com/Html)

如果您的返回是 HTML，那么结束代码就像

```
$.get("url",
  {},
  function(returned_data)
      {
      $('#ContainingDiv').html(returned_data);
      }); 
```

您还应该添加错误处理（它可以小到另外 1 行，但是您在阅读文档时选择）并且如果您想要返回文件的“数组”，您可以返回 JSON（或 XML，但 JSON通常更容易处理）但您需要编写一个函数来接收和处理该列表。

# java - Java中的字符串排列（非递归）

> ID：12189698
> 
> 赞同：7
> 
> 时间：2012-08-30T04:04:00.490
> 
> 标签：java, string, permutation

我是一名 10 年级的高中生，试图解决 Java 数据结构和算法书中的一些问题。

其中一个问题是打印字符串的所有排列。

```
class C14
{
public static void main(char a[])
{
    // char[] a = {'c','a','r','b','o','n'};
    int c=0,w=0;
    for(int q = 0;q<a.length;q++) 
    {
        for(int i=0;i<a.length;i++)
        {
            for(int j=1;j<a.length;j++)
            {
                for(int k=1;k<a.length-1;k++) 
                {
                    for(int z=0;z<a.length;z++)
                    {
                        System.out.print(a[z]);
                        c++;
                    }
                    w++;
                    System.out.println();
                    char p=a[k+1];
                    a[k+1]=a[k];
                    a[k]=p;
                }
                System.out.println();
            }
            System.out.println();
            char x=a[0];
            a[0]=a[1];
            a[1]=x;
        }
      }
    System.out.println(" Character count = " + c);
    System.out.println(" Word count = " + w);
    }
} 
```

这是我的尝试。这本书要求我为字符'c'，'a'，'r'，'b'，'o'，'n'做这件事。我的解决方案就是这样做的，但是当我尝试使用 3 或 4 个字母的单词时，它会给我重复。如果我删除最外面的循环并尝试打印它，它适用于 3 和 4 个字母的单词，但不适用于 5+ 字母的单词。

我很乐意澄清我的推理，我知道这不是最有效的，但请记住我才 10 年级的事实，这是我首先想到的。

有人可以帮助我，或者至少暗示出什么问题吗？请不要建议递归解决方案，因为我想先迭代地完成它。谢谢，苏米特。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:38:42.817

重复排列

当你有 n 件事可供选择时……你每次都有 n 个选择！

选择它们时，排列是：

n × n × ... (r 次) = n^r

我介绍2个案例。第一种情况是当我们已经知道 n 和 r 的大小时，这很容易。第二个当 n 和 r 是动态的。

```
//when n and r are known statically

class Permutation
{
    public static void main(String[] args)
    {
        char[] values = {'a', 'b', 'c', 'd'};
        int n = values.length;
        int r = 2; 

        int i = 0, j = 0;
        for(i=0; i<n; i++)
        {
            for(j=0; j<n; j++)
            {
                System.out.println(values[j] + " " + values[i]);
            }
        }
    }
}

//when n and r are known only dynamically

class Permutation
{
    public static void main(String[] args)
    {
        char[] values = {'a', 'b', 'c', 'd'};
        int n = values.length;
        int r = 2; 
        int i[] = new int[r];
        int rc = 0;
        for(int j=0; j<Math.pow(n,r); j++)
        {

            rc=0;
            while(rc<r)
            {
                System.out.print(values[i[rc]] + " ");
                rc++;
            }
            System.out.println();
            rc = 0;
            while(rc<r)
            {
                if(i[rc]<n-1)
                {
                    i[rc]++;
                    break;
                }
                else
                {
                    i[rc]=0;
                }
                rc++;
            }
        }
    }
} 
```

# python - Firefox Not Loading - selenium webdriver 编程

> ID：12189706
> 
> 赞同：3
> 
> 时间：2012-08-30T04:05:21.923
> 
> 标签：python, selenium, webdriver

我试图在XP的虚拟机上运行python + selenium（使用VirtualBox），这样所有的测试工作都可以在后台运行。但我现在面临的问题是`browser.get("http://google.com")`，它根本不加载。任何人都可以帮助我吗？

**更新：**对不起，伙计们，我一直在使用 selenium 2.22 以保持双方的一致性，但是我错误地轻松安装了 selenium 2.2 ......无论如何问题都解决了。

# objective-c - 通过核心数据将数据添加到 sqlite - 可以添加到一个表但不能添加到另一个表

> ID：12189708
> 
> 赞同：0
> 
> 时间：2012-08-30T04:05:39.923
> 
> 标签：objective-c, sqlite, core-data

我正在尝试将数据添加到 User 表和 Items 表中。添加到用户很好，但不知何故它不会添加到项目表

两者都没有错误。

例如，当我`NSFetchRequest`在项目上时，在我添加到表格之后，我可以看到数据。但是在我重新构建并再次运行该应用程序之后。它消失了，但用户记录仍然存在。

怎么来的？

而且，我手动检查了 sqlite 数据库。用户记录存在，但项目不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:09:36.377

比如说

我有一个创建帐户视图控制器

```
NSManagedObjectContext *context = [(BDOAppDelegate *) [[UIApplication sharedApplication] delegate] managedObjectContext];

    User *newUser = [NSEntityDescription insertNewObjectForEntityForName:@"User" inManagedObjectContext:context];

    newUser.firstName = firstName;
    newUser.lastName = lastName;
    newUser.emailAddress = email;
    newUser.password = password; 
```

这部分很好。它实际上确实添加到了 User 模型中。

我还将用户的登录和注销时间存储在另一个视图控制器中

NSManagedObjectContext *context = [(BDOAppDelegate *) [[UIApplication sharedApplication] delegate] managedObjectContext];

```
- (void)signLoggedInLoggedOut:(User *)getUser:(NSNumber *)login
{    
    LoggedInLoggedOut *newRecord = [NSEntityDescription insertNewObjectForEntityForName:@"LoggedInLoggedOut" inManagedObjectContext:context];

    newRecord.user = getUser;
    newRecord.login = [NSNumber numberWithInt:1];
    //input the time (NSDATE) as well
    newRecord.created_at = [NSDate date];
    //Create relationship with User - LoggedInLoggedOut
    [getUser addLoggedInLoggedOutsObject:newRecord];
} 
```

所以关系是一对多的，即用户可以有多个登录注销条目。

当我立即获取它时，我实际上可以检索数据。

但是当我退出时，构建然后再次运行。不存储登录和注销数据。但是用户实际上是存储的。

所以我不知道如何解决这个问题

# php - 如何在一页上调用多个模型（Codeigniter equiv of Cake Elements）

> ID：12189709
> 
> 赞同：0
> 
> 时间：2012-08-30T04:05:41.377
> 
> 标签：php, codeigniter, cakephp, codeigniter-2

我刚刚熟悉 Codeigniter (2.1.0) 并构建了一个简单的站点，其中有一个产品表和一个位置表。我遵循 CI 文档并成功构建了一个页面来显示每个表中的数据。但我的目标是在主页上显示两组数据。CakePHP 用“元素”很好地处理了这个问题，其中来自不相关控制器的数据可以显示在由不同控制器处理的页面上。看起来很简单，我很难找到一个起点。

这是产品控制器的索引函数：

```
public function index()
{
$data['product'] = $this->product_model->get_product();
$data['title'] = 'title of page';

$this->load->view('templates/header', $data);
$this->load->view('product/index', $data);
$this->load->view('templates/footer');
} 
```

我尝试通过在产品控制器中创建一个调用该模型的函数来包含位置模型，然后使用 $this->functionName(); 在上面包含该函数。那没有用。关于从哪里开始的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:11:46.850

这是包含模型的程序

1.  **包括模型**
2.  **调用特定方法**

是的，您可以尽可能包含模型

```
Public function index()
{
$this->load->model('mymodel');
$this->load->model('mymodel2');
$this->load->model('mymodel3');

$data['product'] = $this->product_model->get_product();
$data['result']    = $this->mymodel->abc();
$data['result2']    = $this->mymodel2->xyz();

$data['title'] = 'title of page';

$this->load->view('templates/header', $data);
$this->load->view('product/index', $data);
$this->load->view('templates/footer');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:10:42.730

只需在此方法中加载其他模型

```
public function index(){
     $this->load->model('products');
     $this->load->model('locations');

     $products = $this->products->index();
     $locations= $this->locations->index();

     $data['products'] = products ;
     $data['locations'] = locations;

     $this->load->view('templates/header', $data);
     $this->load->view('product/index', $data);
     $this->load->view('templates/footer');
} 
```

# windows-phone-7 - wp7 在 web broser 控件中打开另一个 web 浏览器控件

> ID：12189711
> 
> 赞同：0
> 
> 时间：2012-08-30T04:06:04.790
> 
> 标签：windows-phone-7, webbrowser-control

我有 Web 浏览器控件，其中包含许多链接和数据。所有这些数据都来自网络服务。

现在，当我单击第一个网络浏览器链接时，我想打开另一个网络浏览器控件。那么怎么做呢？

我的第一个网络浏览器代码是：

```
 webBrowser1.NavigateToString(htmlCode); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:21:21.683

您可以在 webBrowser1 下隐藏另一个 webBrowser。让我们称之为`webBrowser2`。现在，当用户点击 webBrowser1 上的链接时，将其捕获为一个字符串，比如说`link`. 现在您可以导航到`link`使用`webBrowser2.Navigate(new Uri(link,UriKind.Absolute));`. 不要忘记让 webBrowser1 隐藏而 webBrowser2 可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:41:48.850

如果我理解你，你想在你的第一个 WB 控件（称为 WB1）中拦截 onClick 事件，并在另一个 WB 控件（称为 WB2）中打开该页面（单击超链接时）？

有几种方法可以做到这一点，此链接是否设置为在新窗口中打开？如果有，可以拦截NewWindow2事件为WB1，在WB1的NewWindow2事件中运行如下代码... Set pDisp = WB2.object

（它可能是 ppDisp 而不是 pDisp，但它会在您的事件自动生成时显示，请选择参数列表中显示的任何对象名称）。

否则，您可以在WB1事件的BeforeNavigate2事件期间拦截该请求，检查URL属性是否是您感兴趣的链接，如果是，则取消当前请求并重新发出一个新的请求，如下所示...（在WB1 BN2 事件)... Cancel = True ' 这将取消请求 WB2.Navigate2 URL, , "YourWB2sDocumentNameOrTargetFrameNameGoesHere"

第二行代码只是重新发出请求。

当然，YourWB2sDocumentNameOrTargetFrameNameGoesHere 是 TargetFrameName（或 WB2 控件/窗口中顶级文档或任何 iframe 的框架或文档名称）。这通常可以在 BODY tags name= 属性中找到，但如果您只想将其加载为 WB2 中的顶级文档，您甚至不需要这样做......如果您只想将其加载为WB2 中的父顶级文档，只需执行此操作... Cancel = True WB2.Navigate2 URL

通过引用 WB2，它只会在取消 WB1 请求后向 WB2 窗口发送相同的 URL 请求。

如果您需要更多帮助，请告诉我，并告诉我您的相处方式。

# regex - regex - 查找与另一个标记值一起出现的 XML 标记

> ID：12189714
> 
> 赞同：2
> 
> 时间：2012-08-30T04:06:26.957
> 
> 标签：regex

假设我有 XML： `<Customer><CustomerType>Business</CustomerType><CreditRating>Good</CreditRating></Customer>` `<Customer><CustomerType>Residential</CustomerType><CreditRating>Good</CreditRating></Customer>`

我想将住宅消费者的所有信用评级从好更改为坏。

仅当发生在具有住宅客户类型的客户记录中时，我可以使用什么正则表达式搜索词来查找（并因此替换）CreditRating 标签？

我知道我可以使用： `<Customer>.*?<CustomerType>Residential.*?</Customer>`匹配整个记录住宅客户记录，但我只想匹配客户记录中的 CreditRating 标签，以便进行搜索和替换。

非常感谢，

:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:39:07.437

这在 XSLT 中很容易（而且安全）...

**XML 输入**（包装`<Customers>`成格式良好）

```
<Customers>
    <Customer>
        <CustomerType>Business</CustomerType>
        <CreditRating>Good</CreditRating>
    </Customer>
    <Customer>
        <CustomerType>Residential</CustomerType>
        <CreditRating>Good</CreditRating>
    </Customer>
</Customers> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Customer[CustomerType='Residential']/CreditRating">
        <CreditRating>Bad</CreditRating>
    </xsl:template>

</xsl:stylesheet> 
```

**输出 XML**

```
<Customers>
   <Customer>
      <CustomerType>Business</CustomerType>
      <CreditRating>Good</CreditRating>
   </Customer>
   <Customer>
      <CustomerType>Residential</CustomerType>
      <CreditRating>Bad</CreditRating>
   </Customer>
</Customers> 
```

# android - 通过在android中放置一个中心以圆形方式放置imageviews

> ID：12189717
> 
> 赞同：3
> 
> 时间：2012-08-30T04:06:32.283
> 
> 标签：android, android-layout, drag-and-drop, android-imageview

我想实现**拖放**，`android 4.1`因为我想围绕中心点以圆形方式放置我的图标图像视图。**（使用图像视图我可以完美地实现拖放，位图有点复杂）**

我尝试使用位图和绘画，但它不像我们可以在 android 4.1 中那样平滑。

`Is there any method or way in android 4.1 by which i can place the imageviews in circular manner by giving the radius of the circle and number of sections it will get divide, its like a math question ?`

查看此[链接](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)以进行拖放。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:00:24.840

我已经通过在 android 中使用**Math来实现。**

我正在分享我的一部分代码：

```
double xOffset = currentRadius * Math.cos(Math.toRadians(d));
double yOffset = currentRadius * Math.sin(Math.toRadians(d)); 
```

希望对你有帮助。请关注[此处](http://math.stackexchange.com)以了解更多信息。

# c++ - 如何在头文件中使用复杂的库？

> ID：12189719
> 
> 赞同：0
> 
> 时间：2012-08-30T04:07:05.807
> 
> 标签：c++, header-files, complex-numbers

我写了一段使用复杂库的代码。我已将函数的定义放在头文件中，并且在 main.cpp 中我定义了复数“I”，您可以在下面的代码中看到。但是当我想编译这段代码时，我收到错误。

我认为头文件中的函数不能使用复杂的库。我该如何解决这个问题？

谢谢。

主文件

```
#include <iostream>
#include "math.h"
#include <complex>
#include "header.h"

using namespace std;
typedef complex<double> cmp;
cmp I(0.0,1.0);

int main()
{
cout << function(5.0) << endl;

return 0;
} 
```

头文件.h

```
#ifndef header
#define header

double function(double x)
{
return 5*exp(I*x).real();
}

#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:15:41.970

问题是`I`在解析头文件时未定义。您需要`I`在`#include "header.h"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T04:17:56.020

因为`I`是在`header`包含之后定义的，所以你的 main.cpp 基本上变成了这样：

```
double function(double x)
{
    return 5*exp(I*x).real();
}

using namespace std;
typedef complex<double> cmp;
cmp I(0.0,1.0); 
```

编译器解析你的函数，并抛出一个错误，因为它不知道什么`I`是（还）。

您应该在函数之前包含函数依赖的任何常量，例如在头文件中：

```
#ifndef header
#define header

#include <complex>

typedef complex<double> cmp;
cmp I(0.0,1.0);

double function(double x)
{
    return 5*exp(I*x).real();
}

#endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T04:12:21.767

您应该在`header.h`使用库符号的 header() 中包含库头文件。

```
#include <complex> 
```

最好将文件的所有依赖项包含在其自身中，而不是依赖于它们被包含在内。也许您`header.h`被包含在某个地方，库符号名称依赖项不会通过其他包含间接解决。

**编辑：**

在旁注中，我不确定您为什么将函数的定义包含在头文件本身中。您应该将标题更改为只有声明：

**头文件.h**

```
#ifndef header
#define header

#include <complex> 

typedef std::complex<double> cmp;
extern cmp I;

double function(double x);

#endif 
```

添加另一个定义函数的源文件

**头文件.cpp**

```
#include "header.h"    

double function(double x)
{
    return 5*exp(I*x).real();
} 
```

**主文件**

```
#include <iostream>
#include "math.h"
#include <complex>
#include "header.h"

using namespace std;
cmp I(0.0,1.0);

int main()
{
   cout << function(5.0) << endl;

return 0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T04:23:32.143

更改 header.h 以包含以下内容：

```
double function( std::complex<double> I, double x) 
```

更改您的 main.cpp，使其包含以下内容：

```
cout << function(I, 5.0) << endl ; 
```

您的问题是因为`header.h`您使用了不可见的变量 I。

# android - Smack没有出现

> ID：12189720
> 
> 赞同：1
> 
> 时间：2012-08-30T04:07:25.770
> 
> 标签：android, xmpp, asmack

我正在将用户从 spark 添加到我的客户。在这种情况下，如果我更改 spark 的状态，我将不会收到任何存在数据包。我启用了调试，当状态改变时它没有显示任何数据包。

而如果我反转用户登录。例如：Spark 上的早期 A，我的客户端上的 B。现在：A 在我的客户上，B 在火花上。

在这种情况下，我会收到存在数据包。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:42:00.030

kk 到目前为止，对于其他任何人，我都想通了。

我在客户端中将订阅模式设置为手动。

然后，当收到订阅请求时，我回复了订阅数据包和订阅数据包，然后将订阅数据包发送给我。

感谢： Yul，他的评论给了我一个提示。

# c# - SqlClient SqlException 未捕获

> ID：12189721
> 
> 赞同：1
> 
> 时间：2012-08-30T04:07:40.720
> 
> 标签：c#, entity-framework, entity-framework-4, azure-sql-database, sqlclient

我有一个 Azure 辅助角色在 SQL Azure 数据库上执行简单的选择。很少会引发以下 SqlException。

日志

**基础提供程序在打开时失败。内部异常：超时已过期。在操作完成之前超时时间已过或服务器没有响应。异常类型：System.Data.SqlClient.SqlException**

异常不会作为 SqlException 捕获。它被通用异常处理程序捕获。关于为什么会这样的任何建议？

```
try{
}
catch(System.Data.SqlClient.SqlException sqlExcep)
{
}
catch(Exception genericExcep)
{
    **//The exception is caught as a generic exception**
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:31:42.173

The SQL Database environment is a layer of routers and proxies that handle network load balancing and resource management. If SQL Database itself didn't timeout, then something else in the middle could have (although that's typically rare).

I usually handle IOException errors as well and treat some of them as a form of transient error. What exception type are you actually receiving?

Did you try implementing the Transient Fault Handling Application Block? [http://msdn.microsoft.com/en-us/library/hh680934(v=pandp.50](http://msdn.microsoft.com/en-us/library/hh680934(v=pandp.50))

Herve

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T21:38:20.603

看起来这是*内部*异常，而不是您捕获的实际异常。外部异常的类型是什么？您唯一能做的就是捕获捕获的异常类型，然后检查内部异常：

```
try
{
    // Stuff
}
catch (Exception exc)
{
    if (exc.InnerException is System.Data.SqlClient.SqlException)
    {
        var sqlException = exc.InnerException as System.Data.SqlClient.SqlException;

        // Do stuff with the error.
    }
} 
```

这个故事的寓意是你不能明确地捕捉到内部异常:(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-10T14:46:19.660

尝试**Microsoft.Data.SqlClient.SqlException**而不是 System.Data.SqlClient.SqlException

```
 catch (Microsoft.Data.SqlClient.SqlException ex)
        {

        } 
```

# iphone - iad横幅不需要设置吗？

> ID：12189723
> 
> 赞同：0
> 
> 时间：2012-08-30T04:07:42.687
> 
> 标签：iphone, ios, xcode, iad, banner-ads

[http://bees4honey.com/blog/tutorial/how-to-add-iad-banner-in-iphoneipad-app/](http://bees4honey.com/blog/tutorial/how-to-add-iad-banner-in-iphoneipad-app/)

我已经做了类似的链接..它正在工作..

但我仍然很困惑，IAd 已经完成了吗？还是我必须先设置成为我的简单应用程序启动？

因为当我在模拟器上运行该应用程序时，横幅显示“测试广告”并且还使用真实设备..

如果我必须设置 IAd，谁能告诉我该怎么做？

首先，谢谢

基本上我们把那个iad thingy。将其插入应用程序。发布应用程序并等待资金进来？

我看到测试广告是因为我还没有发布我的广告吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:21:25.907

您说 iAd 正在您的模拟器和真实设备上运行。这样您就完成了 iAd。我以为你已经在 iTunes 帐户中配置了 iAd。因此无需更改任何设置。

# javascript - JAVASCRIPT：有没有更快的方法让这个字符串被多字符分隔符分割？

> ID：12189733
> 
> 赞同：0
> 
> 时间：2012-08-30T04:08:26.443
> 
> 标签：javascript, string, split

我知道这是一个新手问题，但我正在寻找一个简单的解决方案。
例如，`Resource`=> **"cancel_&MyButton"**；
我想得到一个结果字符串**"cancel"**，它是 Resource 的第一部分，由多字符分隔符**"_&"**分割。
`Result`=> **“取消”**
你能给我一个最快最简单的方法吗？
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T04:10:11.437

`"cancel_&MyButton".split('_&')[0]`会给出结果。

# java - Tomcat 会自动编译 java servlet 吗？

> ID：12189735
> 
> 赞同：0
> 
> 时间：2012-08-30T04:08:38.427
> 
> 标签：java, eclipse, tomcat, servlets

我在 Eclipse 中使用 Tomcat 7.0。tomcat服务器与eclipse同步。创建我的第一个类后，我将 .java 文件放在 src/(default package)/HelloWorld.java 下（我知道这不是一个好习惯，但只是为了测试）

内容如下，比较简单：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

@WebServlet("/HelloWorld")

public class HelloWorld extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println ("Hello World");
    }
} 
```

许多教程声称我必须使用它`javac`来编译代码。但我什么也没做，它运行没有问题。此外，每次我更改代码时，它都会像魔术一样立即更新。一定有什么东西在起作用，但我不知道它是什么。

是的，这显然是一个新手问题，所以欢迎任何帮助。此外，如果您有任何系统且易于遵循的教程链接，那就更好了。我正在寻找他们几天，但得到了很多不一致的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T06:05:35.357

对我来说，你混合了两种主要技术——tomcat 作为 web 容器，eclipse 作为你的 IDE。他们的整合让你感到困惑。让我们暂时离开 JSP，只讨论 servlet，因为它更容易混淆

Tomcat 无法使用源文件 (*.java)。例如，您*必须*使用 javac 编译您的应用程序并创建一个名为 WAR - web 存档 - 一个 zip 文件，其中将包含您编译的类并遵守一些 tomcat 理解的 EE 标准（也可以使用文件夹而不是 zip，但让我们把它除此之外，它与此解释无关）。

除其他外，这场战争（一旦正确编译）将包含您编译的 servlet 类 HelloWorld.class）。

一旦tomcat启动并识别出部署文件夹中的war文件，它就会打开它并在运行时加载。没有编译，只有运行时加载。

现在人们在这里谈论JSP。事实上，JSP 在技术上等同于 servlet，但类似于 HTML。您放置扩展名为 .jsp 的文件并构建您的 WAR。java 编译器无法读取 JSP 文件，因此您应该以某种方式将它们放入您的 war 文件中（通常构建工具/IDE 会为您完成）。底线是您在战争中创建了 JSP 文件。现在你把你的战争放到 Tomcat 中，它会像以前一样识别它并加载。在这一点上，它仍然对您的 JSP 没有任何作用。

因此，您的战争已部署，tomcat 已启动并从您的浏览器转到“ [http://localhost:8080/myfirstjsp.jsp](http://localhost:8080/myfirstjsp.jsp) ” 此时（第一次调用您的 JSP）发生了很多事情：

1.  Tomcat 获取浏览器的 HTTP 请求
2.  Tomcat 认识到它应该处理 JSP 文件
3.  Tomcat 解析你的 JSP 文件
4.  Tomcat 在内部将其编译为您不知道的某个类文件（它存储在 Tomcat 内部），
5.  Tomcat 在运行时加载此文件并将其视为已编译的 Java 类。

下次调用 JSP 时，它已经被编译。

这里的最后一个问题是 Eclipse 是如何连接到这个故事的 :) 事实上 Eclipse 与 tomcat 集成，所以所有创建和部署战争的东西都是透明的。这就是为什么你在 Eclipse 上推送“播放”，它会编译你的项目，创建一个战争，确保 tomcat 知道这场战争（配置与部署相关的东西），启动 tomcat 和瞧！- 你有你的应用程序工作。

了解在什么级别发生了什么很重要

希望这有助于
马克

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T04:17:06.143

看起来您正在使用带有 Eclipse 的 tomcat 服务器插件。在这种情况下，只要您保存 .java 文件，eclipse 就会编译它并自动更新 tomcat 服务器中的类文件。

Eclipse 是一个 IDE，它会自动为您完成大部分工作，例如编译代码、设置类路径以包含所需的 jar 文件等。

如果您想按照教程进行操作，我建议您使用纯文本编辑器和独立的 tomcat 服务器。然后，您必须完成教程中提到的所有步骤（使用 javac 编译 servlet 类，将 .class 文件复制到 tomcat 服务器等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:18:12.770

不可以。Java EE 容器 (Tomcat) 不能`compile`自动/隐式地 .java 文件。实际上`JSP engine`会`container`解析 JSP 并生成类文件 - [JSP-wiki](https://stackoverflow.com/tags/jsp/info)

看看[Eclipse 构建故事。](http://www.eclipse.org/eclipse/platform-core/documents/scoped_builds.html)

# jquery - 如何定位特定的选择列表并返回它在多行中使用的值

> ID：12189738
> 
> 赞同：0
> 
> 时间：2012-08-30T04:08:48.677
> 
> 标签：jquery, html

我有以下 HTML 代码，在这种情况下，我有三行记录，其中这三个记录中的表格单元格之一是选择/选项列表。我通过“selectLOV1”、“selectLOV2”和“selectLOV3”的 id 为这三个选择列表单独分配了唯一 id

```
<table summary="Contacts" class="uReport uReportStandard">
    <thead>
        <tr>
            <th id="CONTCT_NM">Contact Name</th>
            <th id="TEL_NO">Telephone
                <br/>No.</th>
            <th id="STATE">State</th>
            <th id="REAS">Reason</th>
            <th id="DATE_CALLED">Date
                <br/>Contacted</th>
            <th id="MPA_COMMENT">Comments</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td headers="CONTCT_NM">Contact A</td>
            <td headers="TEL_NO">123456</td>
            <td headers="STATE">VIC</td>
            <td headers="REAS">
                <input type="hidden" name="f01" value="16919" />
                <input type="hidden" name="f02" value="100319" />
                <select name="f10" id="selectLOV1" class="lov_select">
                    <option value="0">--- Please select a reason ---</option>
                    <option value="1" selected="selected">Contacted / Spoken</option>
                    <option value="2">Contacted / Unavailable</option>
                    <option value="3">Other</option>
                </select>
            </td>
            <td headers="DATE_CALLED">
                <input type="text" name="f20" size="14" maxlength="2000" value="30/08/2012 09:42"
                class="date_val" readonly="readonly" style="background-color:#B0C4DE;border:1px solid #999999;"
                />
            </td>
            <td headers="COMMENT">
                <textarea name="f30" rows="2" cols="30" wrap="VIRTUAL">Contact A</textarea>
            </td>
        </tr>
        <tr>
            <td headers="CONTCT_NM">Contact B</td>
            <td headers="TEL_NO">123456</td>
            <td headers="STATE">VIC</td>
            <td headers="REAS">
                <input type="hidden" name="f01" value="16919" />
                <input type="hidden" name="f02" value="100314" />
                <select name="f10" id="selectLOV2" class="lov_select">
                    <option value="0">--- Please select a reason ---</option>
                    <option value="1" selected="selected">Contacted / Spoken</option>
                    <option value="2">Contacted / Unavailable</option>
                    <option value="3">Other</option>
                </select>
            </td>
            <td headers="DATE_CALLED">
                <input type="text" name="f20" size="14" maxlength="2000" value="30/08/2012 09:42"
                class="date_val" readonly="readonly" style="background-color:#B0C4DE;border:1px solid #999999;"
                />
            </td>
            <td headers="COMMENT">
                <textarea name="f30" rows="2" cols="30" wrap="VIRTUAL">Contact B</textarea>
            </td>
        </tr>
        <tr>
            <td headers="CONTCT_NM">Contact C</td>
            <td headers="TEL_NO">123456</td>
            <td headers="STATE">VIC</td>
            <td headers="REAS">
                <input type="hidden" name="f01" value="16919" />
                <input type="hidden" name="f02" value="100312" />
                <select name="f10" id="selectLOV3" class="lov_select">
                    <option value="0">--- Please select a reason ---</option>
                    <option value="1" selected="selected">Contacted / Spoken</option>
                    <option value="2">Contacted / Unavailable</option>
                    <option value="3">Other</option>
                </select>
            </td>
            <td headers="DATE_CALLED">
                <input type="text" name="f20" size="14" maxlength="2000" value="30/08/2012 09:42"
                class="date_val" readonly="readonly" style="background-color:#B0C4DE;border:1px solid #999999;"
                />
            </td>
            <td headers="COMMENT">
                <textarea name="f30" rows="2" cols="30" wrap="VIRTUAL">Contact C</textarea>
            </td>
        </tr>
    </tbody>
</table> 
```

基于此，我不确定通过使用 jQuery 如何定位我当前所在的选择列表，因为我需要一种在更改时返回我所在的特定行的选项值的方法。

我基本上是在尝试为我正在使用 jQuery 的行返回选择列表选项，但我不确定如何实现这一点，因为我需要根据选择列表值（可以是 0、1、2 或 3）执行一些处理在这种情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:14:29.097

嗨，你可以像这样简单地做到这一点

```
$('.lov_select').change(function(){
    alert($(this).val());
});​ 
```

[现场演示](http://jsfiddle.net/KPkZR/)

# facebook - 使用图形 api 获取一系列链接的信息

> ID：12189740
> 
> 赞同：0
> 
> 时间：2012-08-30T04:09:03.100
> 
> 标签：facebook, facebook-graph-api, hyperlink

我正在尝试获取一系列链接的分享、喜欢和评论的数量。

是否有任何方法可以在不输入图形 api 并询问每个链接的情况下做到这一点？

我正在使用此链接进行检查：graph.facebook.com/ ?id [= http://www.mydomain.com/link1.php](http://www.mydomain.com/link1.php)

我想做这样的事情：graph.facebook.com/ ?id [= http://www.mydomain.com/link1.php&id2=http://www.mydomain.com/link2.php&http://www。 mydomain.com/link3.php](http://www.mydomain.com/link1.php&id2=http://www.mydomain.com/link2.php&http://www.mydomain.com/link3.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:26:19.213

`http://graph.facebook.com/?ids=http://www.example.com/link1.php,http://www.example.com/link2.php`

# android - 设备字体大小覆盖应用程序的字体大小

> ID：12189746
> 
> 赞同：1
> 
> 时间：2012-08-30T04:09:48.217
> 
> 标签：android, fonts, device

更改设备字体后，应用程序的字体也发生了变化，这在 Sony Xperia S 中发生了，我将 textsize 设置为`15 dp`.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:30:08.497

`sp`你可以在like中使用字体大小`15sp`

# mysql - 即使正在使用主索引和良好的 EXPLAIN 计划，MySQL 的查询也很慢

> ID：12189752
> 
> 赞同：2
> 
> 时间：2012-08-30T04:11:07.677
> 
> 标签：mysql, performance, explain

我有一个 130 万行的高流量表，它看到了大量以下类型的慢查询：

```
UPDATE app_info SET data1=269223, data2=0, data3=164, last_update='2012-08-30'
WHERE slice_id=7636 AND app_id=375 AND user_id=21012286 AND mode_id=1; 
```

然而，这个查询的解释计划表明了一个最佳计划（我们正在使用主键）：

```
explain select * from app_info
where slice_id=7636 and app_id=375 and user_id=21012286 and mode_id=1\G

*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: app_info
         type: const
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 18
          ref: const,const,const,const
         rows: 1
        Extra: 
```

这是慢查询日志：

```
 Time: 120830  3:23:37
# User@Host: rest_service[rest_service] @ app01.peak.mindjolt.com [10.0.0.174]
# Thread_id: 10091395  Schema: platform  Last_errno: 0  Killed: 0
# Query_time: 68.559347  Lock_time: 0.000045  Rows_sent: 0  Rows_examined: 1 Rows_affected: 1  Rows_read: 2
# Bytes_sent: 52  Tmp_tables: 0  Tmp_disk_tables: 0  Tmp_table_sizes: 0
# InnoDB_trx_id: 575CBF3B9
UPDATE app_info SET data1=269223, data2=0, data3=164, last_update='2012-08-30' WHERE slice_id=7636 AND app_id=375 AND user_id=21012286 AND mode_id=1; 
```

大约 30% 的查询耗时 >1s，大约 10% 的查询耗时 >10s (!)

什么可能导致此查询运行缓慢？据我所知，计划很完美，只扫描了一行，没有花时间获取锁。那么，会发生什么？

更新：忘记包含服务器规格，这是在 64G Quad Xeon X5650 2.66GHz（24 核）、Mysql 5.1.52-rel11.6-log Percona 服务器 11.6、12 磁盘 PERC H700 RAID 阵列上。该服务器已经运行了很长时间（正常运行时间表示 565 天）。

更新2：这个表只有一个索引，它是一个由元组（app_id，user_id，slice_id，mode_id）组成的主索引。此外，这是一个只写的主服务器，其他三个从服务器处理所有读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:40:27.423

我怀疑您正在更新的一个或多个列上有索引，并且索引如此之大，可能需要一些时间来刷新这些索引并重建必要的部分。我会对索引进行审计，并删除任何没有给你带来非常有价值的`select`性能提升的东西。快速搜索还发现了[延迟键写入选项](http://dev.mysql.com/doc/refman/5.0/en/server-options.html#option_mysqld_delay-key-write)（仅限 MyISAM :-/），这可能会有所帮助。最后一个前沿（如果这确实是问题的话）是研究主写/从读架构，然后在你的写主服务器上做更少的索引。

**编辑**我搜索了一些 InnoDB 选项，发现[了这个](https://serverfault.com/questions/234893/how-to-disable-keys-in-mysql-innodb)关于如何暂时禁用键以进行写操作的问题。

# php - 如何在文本框再次显示模糊事件后修复？

> ID：12189755
> 
> 赞同：0
> 
> 时间：2012-08-30T04:11:24.127
> 
> 标签：php, jquery, html, ajax, onblur

在我输入输入后，文本框再次显示，我不知道如何修复。这是输出的屏幕截图：

![在此处输入图像描述](../Images/5a3d03ff63337bfec6cb4da699ab44a4.png)

是否在开启模糊后再次显示

这是我的代码，我不知道如何解决这个问题。虽然我的功能运作良好

```
<!DOCTYPE HTML>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Amateur</title>
        <link rel="stylesheet" href="css/reset.css" type="text/css">
        <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
        <script>
            function check_email() {
                var email=$("#txtEmail").val();
                $.ajax(
                {
                    type:"POST",
                    url:"index.php",
                    data: "email="+email,
                    success:function(msg) {
                        $("#chkEmail").html(msg);
                    }
                });
                return false;
            }
        </script>
    </head>

    <body>
    <form method="post">
        <label for="txtEmail">E-mail:</label>
            <input id="txtEmail" name="email" type="email" onblur="return check_email()">
        <label id="chkEmail" for="txtEmail"></label>
        <?php
        if(isset($_POST['email']))
        {
            $user='root';

            $pdo=new PDO('mysql:host=localhost;dbname=class;charset=utf8',$user);

            $email=$_POST['email'];

            $stmt=$pdo->prepare('SELECT user_email from tbl_users WHERE user_email=:email LIMIT 1');
            $stmt->execute(array(':email'=>$email));

            if($stmt->rowCount()>0) {
                echo 'E-mail already use.';
            }
            else {
                echo 'E-mail not use.';
            }   
        }
        ?>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:16:16.057

像这样更改您的代码。问题是您将数据发布到您所在的同一页面，并且您将整个代码作为 AJAX 请求的响应。因此，如果您在 POST 上退出执行，您将只会收到相关消息。

```
 <?php
        if(isset($_POST['email']))
        {
            $user='root';

            $pdo=new PDO('mysql:host=localhost;dbname=class;charset=utf8',$user);

            $email=$_POST['email'];

            $stmt=$pdo->prepare('SELECT user_email from tbl_users WHERE user_email=:email LIMIT 1');
            $stmt->execute(array(':email'=>$email));

            if($stmt->rowCount()>0) {
                echo 'E-mail already use.';
            }
            else {
                echo 'E-mail not use.';
            } 
            exit;  
        }
        ?><!DOCTYPE HTML>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Amateur</title>
        <link rel="stylesheet" href="css/reset.css" type="text/css">
        <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
        <script>
            function check_email() {
                var email=$("#txtEmail").val();
                $.ajax(
                {
                    type:"POST",
                    url:"index.php",
                   data: { 
            'email': email
                },
                    success:function(msg) {
                        $("#chkEmail").html(msg);
                    }
                });
                return false;
            }
        </script>
    </head>

    <body>
    <form method="post">
        <label for="txtEmail">E-mail:</label>
            <input id="txtEmail" name="email" type="email" onblur="return check_email()">
        <label id="chkEmail" for="txtEmail"></label>

    </form>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T04:15:20.047

在添加`check_email`之前的函数中`return false`

```
$("#txtEmail").hide(); 
```

这是你的意思吗？

# perl - 可以在 Perl 的哈希声明中使用子程序返回值（作为数组）吗？

> ID：12189759
> 
> 赞同：2
> 
> 时间：2012-08-30T04:11:44.883
> 
> 标签：perl, grep, hashtable, subroutine

已经有一段时间了，所以为我生锈的问题道歉......

给定当前（工作）代码：

```
my @keywords = ( 'foo', 'bar', 'kan', 'moo', 'ban', 'noob' );    
my @good = grep { /oo/ } @keywords;
my @bad = grep { !/oo/ } @keywords;

my %data = (
  keywords => \@keywords,
  good => \@good,
  bad => \@bad
);

print Dumper(\%data); 
```

声明只是临时变量，以确保哈希以数组引用结束。有没有办法整合上述内容以简单地使用散列声明中的方法？

我试图达到类似于以下内容（非工作代码）：

```
my @keywords = ( 'foo', 'bar', 'kan', 'moo', 'ban', 'noob' );    

my %data = (
  keywords => \@keywords,
  good => grep { /oo/ } @keywords,
  bad => grep { !/oo/ } @keywords
);

print Dumper(\%data); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T04:14:19.920

是的，只需使用*匿名数组 ref*：

```
my %data = (
  keywords => [@keywords],
  good => [grep { /oo/ } @keywords],
  bad => [grep { !/oo/ } @keywords],
);

print Dumper(\%data); 
```

# java - 从 C++ 到 Java 的转换

> ID：12189761
> 
> 赞同：12
> 
> 时间：2012-08-30T04:11:50.193
> 
> 标签：java, c++, jakarta-ee, programming-languages

我是一名彻头彻尾的 C++ 开发人员。我对这门语言充满热情，特别喜欢模板元编程和编译时多态性给我的力量，以及最近的发展，如 C++11 的可变参数模板和右值引用等。

我喜欢 C++ 给了我如此多的控制权，并且能够利用内存做巧妙的技巧来提高性能。

我最近有机会采访一家使用 Java 进行所有开发的公司。他们声称他们首先对技术充满热情，并且他们正在努力寻找真正优秀的技术人员。因此，他们希望聘请铁杆 C++ 技术人员，并让他们换成 Java。

对Java知之甚少，我不确定这是否是我想要走的路。

*   我们在 C++ 中可用的低级细节是否在 Java 中被取消了？
*   热情的 C++ 开发人员会喜欢 Java 还是渴望回到 C++？

我意识到这是非常主观的，但我希望以前走过这条路的人可以提供一些见解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T04:18:36.863

看看这些线程 -

[Java 和 C++ 有什么区别？](https://stackoverflow.com/questions/387256/what-is-the-difference-between-java-and-c)

[http://www.javacoffeebreak.com/articles/thinkinginjava/comparingc++andjava.html](http://www.javacoffeebreak.com/articles/thinkinginjava/comparingc++andjava.html)

[http://www.programmersheaven.com/2/FAQ-JAVA-Differences-Between-JAVA-And-C-CPP](http://www.programmersheaven.com/2/FAQ-JAVA-Differences-Between-JAVA-And-C-CPP)

[http://en.wikipedia.org/wiki/Comparison_of_Java_and_C%2B%2B](http://en.wikipedia.org/wiki/Comparison_of_Java_and_C%2B%2B)

[http://www.csun.edu/~hbcsc240/C++vsJava_St.htm](http://www.csun.edu/~hbcsc240/C++vsJava_St.htm)

[Java 和 C++ 在对象创建方面的主要区别是什么？](https://stackoverflow.com/questions/3820178/what-is-the-main-difference-in-object-creation-between-java-and-c)

如果有人有更好的线程，他们应该编辑我的答案。

# windows-phone-7 - 在 Windows Phone 7 应用程序中访问和操作来自 .mp4 文件的视频帧

> ID：12189764
> 
> 赞同：4
> 
> 时间：2012-08-30T04:12:16.737
> 
> 标签：windows-phone-7, file-io, mp4, video-processing

您可能知道，当您在 Windows Phone 上录制视频时，它会保存为 .mp4。我希望能够访问视频文件（即使它只存储在应用程序的独立存储中），并操纵每一帧的像素值。

我找不到任何可以让我将 .mp4 加载到应用程序中，然后访问框架的东西。我希望能够将处理后的视频也保存为 .mp4 文件，或者能够共享它。

有没有人想出一套好的步骤来做到这一点？我的猜测是首先将 .mp4 文件加载到 Stream 对象中。从这里我不知道我到底能做什么，但我想把它变成一种形式，我可以遍历帧，操作像素，然后在操作完成后再次创建一个带有音频的 .mp4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:56:49.123

我试过一次做同样的事情。不幸的是，没有可以帮助您解决此问题的公开可用的库。您将不得不编写自己的代码来执行此操作。

解决这个问题的方法是首先阅读 mp4 的存储格式并弄清楚帧是如何存储在那里的。然后，您可以阅读 mp4、提取帧、修改它们并将它们缝合回原始格式。

我最大的担忧是硬件可能不够强大，无法在足够短的时间内完成此任务。

# javascript - 如何将我的自动建议结果限制为 5 个结果

> ID：12189765
> 
> 赞同：0
> 
> 时间：2012-08-30T04:12:20.063
> 
> 标签：javascript, jquery, autosuggest

我只想为我的自动建议框提供 5 个结果，但不知道该怎么做。任何帮助将不胜感激这是我的代码：

```
<div class="input-wrapper">
    <input type="text" class="autosuggest" value="Type in a city or town" onblur="onBlur(this)" onfocus="onFocus(this)" >
    <input type="submit" value="Search">

    <div class="dropdown">
        <ul class="result"></ul>
    </div>
</div> 
```

这是我的脚本：

```
$(document).ready(function() {
    $('.autosuggest').keyup(function() {
        var search_term = $(this).attr('value');
        $.post('php/search.php', { search_term: search_term }, function(data) {
            $('.result').html(data);
            $('.result li').click(function(){
                var result_value = $(this).text();
                $('.autosuggest').attr('value', result_value);
                $('.result').html('');
            });
        });
    });
});
function onBlur(el) { 
    if (el.value == '') { 
        el.value = el.defaultValue; 
    } 
} 
function onFocus(el) { 
    if (el.value == el.defaultValue) { 
        el.value = ''; 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:06:40.110

最好的解决方案是在服务器上进行。但是，由于某种原因，如果在服务器上不可行，您可以尝试在 JS 中跟随。在这里，我期望服务器以以下格式“<li>data</li>”返回数据。

```
$('.autosuggest').keyup(function() {
    var search_term = $(this).attr('value');

    $.post('php/search.php', { search_term: search_term }, function(data) {
        //Edit Start
        var dataarr=data.split('<li>');
        var totalrow=(dataarr.length>5)?5:dataarrr.length;
        $('.result').html('');
        for(var i=1;i<=totalrow;i++){//neglectine first data as it will be blank
             $('.result').html( $('.result').html('')+'<li>'+dataarr[i]);
        }
        //Edit end

        $('.result li').click(function(){
            var result_value = $(this).text();
            $('.autosuggest').attr('value', result_value);
            $('.result').html('');

        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:55:33.883

将您的搜索结果限制在`search.php`文件 (php/search.php) 中。你可以这样做；

```
$fetch = mysql_query("SELECT * FROM table LIMIT 5") 
```

# windows - x86 程序集创建窗口 - 错误 A2111：参数定义冲突和 A2008：语法错误 - 如何修复？

> ID：12189768
> 
> 赞同：0
> 
> 时间：2012-08-30T04:12:36.067
> 
> 标签：windows, assembly, x86, masm32

我正在关注 Iczelion 的 Win32 教程，特别是教程 3（“A Simple Window”），并且在尝试“剥离”一些错误处理和不必要的代码以进行实验时，编译时出现以下错误：

```
test.asm(38) : error A2111: conflicting parameter definition. 
```

这是行：

第 38 行：

```
WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdShow:DWORD 
```

我的问题是：这行代码有什么问题？

提前致谢。

编辑：

这是整个脚本，有问题的行注释在：

```
.386 

.model flat, stdcall 
option casemap :none 

WinMain proto :DWORD,:DWORD,:DWORD,:DWORD

include \masm32\include\windows.inc 
include \masm32\include\user32.inc 
include \masm32\include\kernel32.inc 
include \masm32\include\gdi32.inc 
includelib \masm32\lib\user32.lib 
includelib \masm32\lib\kernel32.lib 
includelib \masm32\lib\gdi32.lib

.data 

    ClassName db "Testwin", 0
    AppName db "Testing Window", 0

.data?

    hInstance HINSTANCE ?

.code 
start: 

    push NULL
    call GetModuleHandle
        mov  hInstance,eax
    push SW_SHOWDEFAULT
    push NULL
    push hInstance
    call WinMain
    push eax
        call ExitProcess

WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdShow:DWORD   ; this is the line
; local vars:
LOCAL wc:WNDCLASSEX 
    LOCAL msg:MSG 
    LOCAL hwnd:HWND

; defining the window:
    mov   wc.cbSize,SIZEOF WNDCLASSEX 
    mov   wc.style, CS_HREDRAW or CS_VREDRAW 
    mov   wc.lpfnWndProc, OFFSET WndProc 
    mov   wc.cbClsExtra,NULL 
    mov   wc.cbWndExtra,NULL 
    push  hInst 
    pop   wc.hInstance 
    mov   wc.hbrBackground,COLOR_WINDOW+1 
    mov   wc.lpszMenuName,NULL 
    mov   wc.lpszClassName,OFFSET ClassName 
    invoke LoadIcon,NULL,IDI_APPLICATION 
    mov   wc.hIcon,eax 
    mov   wc.hIconSm,eax 
    invoke LoadCursor,NULL,IDC_ARROW 
    mov   wc.hCursor,eax 
    invoke RegisterClassEx, addr wc 
;create the window
    invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\ 
           WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\ 
           CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\ 
           hInst,NULL
    invoke ShowWindow,hwnd,CmdShow
WinMain endp

WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM   
    cmp uMsg, WM_DESTROY
    jne _next
    invoke PostQuitMessage, NULL
_next:

WndProc endp      
end start 
```

希望这可以帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T04:42:27.470

这三个错误消息准确地解释了您做错了什么。

```
test.asm(38) : error A2111: conflicting parameter definition. 
```

再看看你的原型：

```
WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdShow:DWORD 
```

`WinMain`与先前声明冲突的参数。如果您查看前面的声明，您会发现参数列表是不同的。

下一个错误：

```
test.asm(69) : error A2008: syntax error: WndProc 
```

让我们看看那条线：

```
WndProc WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM 
```

语法错误意味着您违反了语法。在这种情况下，这是因为汇编程序无法弄清楚如何处理第二个`WndProc`；重复`WndProc`在这里是不合法的。

第三个错误：

```
test.asm(75) : fatal error A1010: unmatched block nesting: WndProc 
```

由于该`WndProc`过程从未正确启动，因此您结束它的尝试是无效的。

TL;DR：阅读错误消息。他们会解释你做错了什么。

# php - 奇怪的 JSON.toString() 格式 PHP 转 Android

> ID：12189769
> 
> 赞同：1
> 
> 时间：2012-08-30T04:12:44.560
> 
> 标签：php, json

我只是一个简单的人，通过从 Android 传递 JSON 来工作，我遇到了一个奇怪的问题。

为了更好地理解 JSON 在 PHP 和 Android 之间的工作方式，我首先创建了一个 Json（OK），将其传递给 PHP 并回显完全相同的文件 - 只是为了看看会发生什么。

问题是传出的 JSON.toString() 如下： {"Age at Death":32.5,"Enemy":"Darius","Battles":["Issus","Arbela"],"Death": -323}

但是返回的 JSON.toString() 是： {\"Age at Death \":32.5,\"Enemy\":\"Darius\",\"Battles\":[\"Issus\",\"Arbela\ "],\"死亡\":-323}

当我尝试从 PHP 读取 Json 时，这会引发错误。（PS：这是我发现的一个问题；可能来源在别处，所以不要让我把你引向错误的轨道）

这是我的代码：

安卓：

```
private void connectToURL() throws UnsupportedEncodingException {
        // TODO Auto-generated method stub
        HttpParams httpParams = new BasicHttpParams();
        HttpClient client = new DefaultHttpClient(httpParams);
        String url = "http://www.this.url.is.correct.php";

        List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
        String hello = myJson.toString();
        nameValuePair.add(new BasicNameValuePair("Json", myJson.toString()));

        HttpPost request = new HttpPost(url);
        request.setEntity(new UrlEncodedFormEntity(nameValuePair));

        //ResponseHandler<String> responseHandler = new BasicResponseHandler();
        try {
            HttpResponse response = client.execute(request);
            HttpEntity entity = response.getEntity();
            String myResponse = EntityUtils.toString(entity);
            showResponse(myResponse);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    private void showResponse(String thisResponse) {
        try {
            JSONObject newJson = new JSONObject(thisResponse);

            viewer02.setText(newJson.toString(2));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

这是PHP（没有比这更简单的了）：

```
<?php

$obj = $_POST['Json'];
//$json = json_encode($obj);
//$string = $json->{'enemy'};

echo $obj;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:27:57.250

这是因为在 php.ini 中打开了魔术引号选项。

IIRC 目前已弃用，实际上不建议使用（因为它没有意义）

# google-closure-compiler - 其他语言的谷歌闭包编译器？

> ID：12189772
> 
> 赞同：1
> 
> 时间：2012-08-30T04:13:02.627
> 
> 标签：google-closure-compiler

是否有与其他语言的 Google Closure Compiler 等效的工具？例如，最好有一个 PHP 可以从我的次优代码中找出最优的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:55:37.020

该编译器的结果减少了需要下载的源代码量，同时仍然产生相同的结果。这与编译代码的系统不太相关，即使只是 p 代码，并且代码在执行之前也不会“通过线路”发送到客户端。

然而，正如@ChadKillingsworth 所指出的，解析和语义检查显然是编译器的特性，它可能对任何解释语言都有好处，即使输出被忽略。

谷歌搜索显示[http://www.phpcompiler.org/](http://www.phpcompiler.org/)是一个答案，尽管它已经将近一年没有更新了。

# android - 无法从 values-v11/themes.xml 引用 Holo 主题

> ID：12189773
> 
> 赞同：8
> 
> 时间：2012-08-30T04:13:11.237
> 
> 标签：android, xml, themes

如果我的应用程序在 3.0+ 设备上运行，我正在尝试让我的应用程序使用 Holo Light 主题，但由于某种原因，values-v11 方法不起作用。我看到很多其他人显然在使用这种方法，但是当我在 res/values-v11/themes.xml 中定义我的主题时：

```
<resources>
<style name="MainStyle" parent="@android:Theme.Holo.Light">

</style>
</resources> 
```

Eclipse 给我`error: Error retrieving parent for item: No resource found that matches the given name '@android:Theme.Holo.Light'.`不管我用`android:Theme.Holo.Light`还是`android:style/Theme.Holo.Light`.

我的 minSdkVersion 设置为 10，我的 targetSdkVersion 设置为 15。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T05:36:07.820

我怀疑你应该使用`parent="@android:style/Theme.Holo.Light"`. 确保它完全像这样——有`@`标志和一切。

*来自评论*：还要确保您在项目属性（不是清单）中将目标 API（不同于目标 SDK）设置为至少 4.0/API 14。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T06:21:50.740

将您的项目构建目标设置为高于或等于 14，并确保您为 Theme.Holo.Light 使用了正确的语法。应该是这样的 parent="@android:style/Theme.Holo.Light"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T09:10:18.287

TextAppearance.Holo.Widget.ActionBar.Title 似乎已添加到 API 级别 13。确保您的构建目标设置为 13，而不仅仅是 11。

**AndroidManifest.xml：**

```
<uses-sdk
    android:minSdkVersion=...
    android:targetSdkVersion="11" /> 
```

# ios - 如何在iOS中声明具有多个参数的函数

> ID：12189774
> 
> 赞同：6
> 
> 时间：2012-08-30T04:13:40.890
> 
> 标签：ios, function

谁能解释下面的代码？

```
- (id)initWithTitle:(NSString*)title ratings:(float)rating;

(NSString*)title = first parameter , type =string, name = title 
```

**`rating:(float)rating = ? ? ?`**这是什么意思 ？

浮点数是一种类型，如果第二个评级是参数的名称，则开始评级是什么。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-30T04:24:25.450

Objective-C 方法被设计为自我记录，它们借鉴了 Smalltalk 的丰富传统。

我会试着解释你在这里有什么，`-(id)initWithTitle:(NSString*)title rating:(float)rating;`

`- (id)`

第一部分表明这是一个返回 id 对象的 Objective C 实例方法。（`-`破折号）表示这是一个实例方法，其中 a`+`表示这是一个类方法。括号中的第一个值是方法的返回值。

`initWithTitle:`

这部分是消息名称的一部分。在这种情况下，完整的消息名称是`initWithTitle:rating:`。Objective-C 运行时获取此方法信息并将其发送到指定的接收器。在纯 C 中，这看起来像 `id initWithTitle(NSString* title, float rating)`. 但是，由于这是 Objective-C，附加信息被打包到消息名称中。

`(NSString*)title`

这部分是输入的一部分。这里的输入是类型的`NSString*`，并且有一个局部变量名称为title。

`rating:`

这部分是消息名称的第二部分。正如您在此处看到的，消息名称被拆分以帮助指示您传递给接收者的信息。因此，如果我要使用变量 foo 和 bar 向对象 myObject 发送消息，我会键入： `[myObject initWithTitle:foo rating:bar];` 而不是 C++ 样式： `myObject.initWithTitle(foo, bar);`。

`(float)rating`

这是输入的最后一部分。这里的输入是 float 类型，并且有一个名为 rating 的局部变量。

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T04:23:13.813

这将指导您了解如何声明函数。

[Objective-C 函数概述](http://www.techotopia.com/index.php/An_Overview_of_Objective-C_Functions)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T04:41:30.903

`initWithTitle`是objective-c中的方法名，

`title`和分别是和的`rating`两个参数。`initWithTitle method``string``float`

where`ratings`只是参数第二部分的名称或标识符。

您可以使用以下方法调用此方法：`[self initWithTitle:str ratings:0.5];`

我希望你的疑问现在很清楚:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T06:13:41.853

```
- (id)initWithTitle:(NSString*)title ratings:(float)rating; 
```

在里面你知道

`(NSString*)title`= 第一个参数，`type`=字符串，`name`= 标题

同样的方法

`ratings:(float)rating` `ratings:`是连接参数，`type`= float 并且`rating`是此函数中的占位符名称。

# android - 如何在键盘上方显示对话框

> ID：12189776
> 
> 赞同：7
> 
> 时间：2012-08-30T04:13:58.943
> 
> 标签：android

我是 android 的新手，我编写了一个应用程序，当用户选择一件事时，它使用对话框显示数据。这是对话框的外观：

[https://docs.google.com/file/d/0B3NUAgD0tB0YOS16azFCWXdSVVE/edit](https://docs.google.com/file/d/0B3NUAgD0tB0YOS16azFCWXdSVVE/edit)

但是当我点击最后一个 EditText 输入一些数据时，对话框仍然显示，当我输入第一个字符时，对话框向下滚动。对话框位于键盘后面，某些部分完全被遮挡。

谁能告诉我如何在软键盘上方显示整个对话框？这就是我希望它的样子：

[https://docs.google.com/file/d/0B3NUAgD0tB0YOFVQYUF0U0JvOEk/edit](https://docs.google.com/file/d/0B3NUAgD0tB0YOFVQYUF0U0JvOEk/edit)

谢谢

克拉克

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-30T04:28:58.540

你试过这个吗？

为我工作：

[http://developer.android.com/reference/android/view/Window.html#setSoftInputMode(int)](http://developer.android.com/reference/android/view/Window.html#setSoftInputMode(int))。

```
alertDialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-25T15:36:45.623

您可能需要手动设置对话框的宽度和高度，以使软输入模式如下所示：

```
 WindowManager.LayoutParams params = window.getAttributes();
    params.width = WindowManager.LayoutParams.MATCH_PARENT;
    params.height = WindowManager.LayoutParams.MATCH_PARENT;
    params.gravity = Gravity.CENTER;
    window.setAttributes(params); 
    window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T13:43:07.270

创建一个xml文件名**style.xml**

```
<style name="FullHeightDialog" parent="android:style/Theme.Dialog">
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowSoftInputMode">stateUnchanged</item>
        <item name="android:windowBackground">@color/dialog_transparent</item>
</style> 
```

然后实施

这对我有用，希望它也对你有用。

```
final Dialog dialog = new Dialog(this , R.style.FullHeightDialog); 
```

并在您的清单文件中进行更改

```
android:windowSoftInputMode="adjustResize|adjustPan" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-02T17:34:18.883

```
 AlertDialog dialog = new AlertDialog.Builder(this).create();
 dialog.show();
 Window window = dialog.getWindow();
 window.clearFlags(WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);
 window.setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

# c++ - 如何更正 c++11 的以下生产者消费者代码

> ID：12189782
> 
> 赞同：0
> 
> 时间：2012-08-30T04:14:35.180
> 
> 标签：c++, multithreading, c++11, clang, semaphore

我正在为 c++11 编写一个带有简单信号量实现的消费者/生产者类。但是，以下代码无法编译。如果我删除`producer_consumer`类和make`producer`和`consumer`全局函数，并将线程创建部分（`std::thread t1(consumer), t2(consumer); t1.join(); t2.join();`）移动到`main`函数中，它可以编译，但实现仍然不正确，最终会导致分段错误。如何更正代码？谢谢。

```
#include <iostream>
#include <thread>
#include <mutex>

class semaphore {
private:
    std::mutex m;
    std::condition_variable cond;
    unsigned long n;
public:
    semaphore(int i) : n(i) {}

    void up() {
        std::unique_lock <std::mutex> lock (m);
        ++n;
        cond.notify_one();
    }

    void down() {
        std::unique_lock <std::mutex> lock (m);
        while(!n) cond.wait(lock);
        --n;
    }
};
class producer_consumer{
private:
    semaphore full, empty;
    int i = 0;
    std::thread t1, t2;
public:
    producer_consumer(int n): full(0), empty(n), i(0){}
    void run(){
        t1 = std::thread(&producer_consumer::producer, *this); 
        t2 = std::thread(&producer_consumer::consumer, *this);
    }
    void stop(){
        t1.join();
        t2.join();
    }
    void producer (){
        while (true){
            empty.down();
            i ++;
            std::cout << "[p]" << i << std::endl;
            full.up();  
        }
    }
    void consumer (){
        while (true){
            full.down();
            i --;
            std::cout << "[c]" << i << std::endl;
            empty.up(); 
        }
    }
};

int main(){
    producer_consumer pc(5);
    pc.run();
    pc.stop();
    return 0;
} 
```

我使用 clang++ 编译文件：

```
clang++ -std=c++0x -stdlib=libc++ pc.cpp ; ./a.out 
```

错误信息：

```
In file included from file_name.cpp:1:
In file included from /usr/bin/../lib/c++/v1/iostream:38:
In file included from /usr/bin/../lib/c++/v1/ios:216:
In file included from /usr/bin/../lib/c++/v1/__locale:15:
In file included from /usr/bin/../lib/c++/v1/string:434:
In file included from /usr/bin/../lib/c++/v1/algorithm:591:
/usr/bin/../lib/c++/v1/type_traits:1423:12: error: call to implicitly-deleted
      copy constructor of 'typename decay<producer_consumer &>::type'
      (aka 'producer_consumer')
    return _VSTD::forward<_Tp>(__t);
           ^~~~~~~~~~~~~~~~~~~~~~~~ 
```

更新：@DanqiWang 通过更改`*this`为`this`. 现在看来，信号量不能正常工作，最终会使程序崩溃：

```
./a.out
[p]1
[p]2
[p]3
[p]4
[p]5
....
[p]2
[p]3
[p]4
1
[c]3
[p[]c3]
3
[[c]3
p][2c
][p]3
[p]4
4
[c]3
[c]2
Segmentation fault: 11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T05:57:27.763

我对您的代码有以下建议：

*   尽管`iostream`在 C++11 中成为线程安全的，但它应该被锁定以避免输出错误。
*   使用`std::atomic`而不是裸`int`。
*   如果有段错误，转储内核，用于`gdb`调试它，或在此处发布堆栈跟踪。

希望这些帮助。

# javascript - 如何使用带有“this”的javascript提交表单

> ID：12189791
> 
> 赞同：8
> 
> 时间：2012-08-30T04:16:05.333
> 
> 标签：javascript, forms, submit

有什么方法可以提交我有这样的href链接的当前表单

```
<a href="javascript:;" onclick="this.submit();">Save</a> 
```

我想在任何地方都使用相同的代码，所以我不能使用任何 id 或类

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T04:41:40.637

使用提交表单`this.form.submit()`

即在你的情况下它会像

```
<a href="#" onclick="this.form.submit();">Save</a> 
```

但强烈建议使用表单名称

否则，如果你习惯使用 jquery，你也可以使用 jquery[**最接近**](http://api.jquery.com/closest/)函数

```
$(field).closest("form").submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:00:36.087

```
<a href="" onclick="!function(a){while(a&&a.nodeName!="FORM")a=a.parentNode;if(a)a.submit();}(this);"></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-04T06:32:25.753

我将此解决方案用于未知表单名称：

```
function submitForm(originator)
{
    var pN=originator.parentNode;
    while (true)
    {
        if (pN&&pN.nodeName=='FORM')
        {
            pN.submit();
            break;
        }
        pN=pN.parentNode;
    }
} 
```

现在在任何文档的对象事件上，我们都可以使用这个函数：

```
<div onclick="doSomething();submitForm(this)">test</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T04:19:04.180

你想要的是：

```
<a href="javascript:;"onclick="document.forms.<formname>.submit();">Save</a> 
```

`<formname>`实际上，当它被替换为表单的 id时，它似乎也有效。

尽管我强烈建议您研究称为[Unobtrusive Javascript的做法](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T04:24:46.680

假设您`n`的页面上有许多表单。您可以使用以下方式提交`i+1`表单：

```
document.forms[i].submit(); 
```

因此，如果您只有一个，并且想通过链接点击提交，

```
document.forms[0].submit(); 
```

应该是你的`onclick`属性值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-15T10:13:51.107

你可以试试这段代码

```
<a href="" onkeypress="submit(this.form)"/>
<script>
    function submit(form) {
        form.submit();
    }
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-08T10:53:36.693

我使用更棘手的方式。让你的按钮看起来像`<a href>`

`<button type="submit" style="background-color: transparent!important;border: none;padding: 0!important;color: #3c8dbc;cursor: pointer;box-sizing: border-box;">MY LINK BUTTON</button>`

# asp.net-mvc-4 - 我添加了一个连接字符串，但是当我将数据添加到我的站点时，它没有出现在我的数据库中；它在哪里保存？

> ID：12189792
> 
> 赞同：0
> 
> 时间：2012-08-30T04:16:07.483
> 
> 标签：asp.net-mvc-4, entity-framework-5

标题说明了大部分内容。

我已将此添加到我的`Web.Debug.config`文件中：

```
<connectionStrings>
  <add name="Sharpix"
    connectionString="Server=localhost; Database=sharpix; Uid=root; Pwd=;"
    providerName="MySql.Data.MySqlClient"/>
</connectionStrings> 
```

我正在使用我在[这里](https://stackoverflow.com/a/848539/65387)找到的 MySQL 驱动程序。大概如果我安装不正确，或者它有错误，我会得到一个异常，但据我所知，它没有被使用，也没有尝试使用它。

但是，我可以将数据添加到我的网站就好了：

![](../Images/dc05fed1a249c78db0bf7612c49eb70c.png)

那么它在哪里存储我的数据，以及如何让它使用我的 MySQL 数据库？

如果相关，我的模型如下所示：

```
public class ImageModel
{
    public int Id { get; set; }
    public string FileName { get; set; }
} 
```

}

我的上下文如下所示：

```
public class SharpixContext : DbContext
{
    public DbSet<ImageModel> ImageModels { get; set; }
} 
```

当谈到 ASP.NET MVC 时，我几乎是一个初学者，但我对 MVC 的一般概念和 Django 框架非常熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:32:22.870

您需要在构造函数中给出连接字符串名称。否则 EF 将尝试创建一个`namespace.SharpixContext`在本地服务器中命名的数据库。

```
public class SharpixContext : DbContext
{
    public SharpixContext()
     : base("Sharpix")
    {}

    public DbSet<ImageModel> ImageModels { get; set; }
} 
```

# qt - QWebView 不播放 HTML5 视频

> ID：12189801
> 
> 赞同：1
> 
> 时间：2012-08-30T04:17:09.013
> 
> 标签：qt, qt4, html5-video

我有 Windows 7 Ultimate x86 和 Qt 4.8.1。但我无法在 QWebView 小部件中播放 html5 视频。那么我该怎么做呢？

# php - 我可以使用 gmail 作为我网站的 smtp 服务器吗

> ID：12189802
> 
> 赞同：11
> 
> 时间：2012-08-30T04:17:45.137
> 
> 标签：php, email, smtp, gmail

您好，我正在尝试建立一个网站并运行。它目前托管在 AWS 上，因此我目前没有运行自己的 smtp 服务器。所以在阅读了几篇文章之后，我明白了我们可以使用 gmail 作为 smtp 服务器。

我想仔细检查我读到的内容是否正确，我将使用智能工作板软件，我可以插入 gmail 提供的值并将其用作 smtp 服务器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T04:23:15.903

我成功使用了 GMail SMTP 服务器。

我们确实有一个公司的 GMail 帐户，但我认为这并不重要。个人 GMail 帐户就足够了。

**我没有 PHP 示例**，但是 ASP.Net 的以下配置应该提供足够的指导：

```
<mailSettings>
  <smtp from="me@gmail.com">
    <network enableSsl="true" host="smtp.gmail.com" port="587" userName="me@gmail.com" password="mypassword" />
  </smtp>
</mailSettings> 
```

*如果有人有合适的 PHP 示例，请随时编辑我的答案或发布您自己的*.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T07:16:46.447

是的，Google 允许通过其 SMTP 进行连接，并允许您从您的 GMail 帐户发送电子邮件。

您可以使用许多 PHP 邮件脚本。一些最流行的 SMTP 发件人是：[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)（带有有用的[教程](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/UsefulTutorial)）和[SWIFTMailer](http://swiftmailer.org/)（及其[教程](http://swiftmailer.org/docs/sending.html)）。

您需要从他们的服务器连接和发送电子邮件的数据是您的[GMail](http://www.gmail.com)帐户、您的`password`、他们的`SMTP server`（在这种情况下`smtp.gmail.com`）和端口（在这种情况下`465`），您还必须确保电子邮件是通过 SSL 发送的。

[一个使用PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/list)发送电子邮件的简单示例：

```
<?php
    require("class.phpmailer.php");

    $mail = new PHPMailer();

    $mail->IsSMTP();  // telling the class to use SMTP
    $mail->SMTPAuth   = true; // SMTP authentication
    $mail->Host       = "smtp.gmail.com"; // SMTP server
    $mail->Port       = 465; // SMTP Port
    $mail->Username   = "john.doe@gmail.com"; // SMTP account username
    $mail->Password   = "your.password";        // SMTP account password

    $mail->SetFrom('john.doe@gmail.com', 'John Doe'); // FROM
    $mail->AddReplyTo('john.doe@gmail.com', 'John Doe'); // Reply TO

    $mail->AddAddress('jane.doe@gmail.com', 'Jane Doe'); // recipient email

    $mail->Subject    = "First SMTP Message"; // email subject
    $mail->Body       = "Hi! \n\n This is my first e-mail sent through Google SMTP using PHPMailer.";

    if(!$mail->Send()) {
      echo 'Message was not sent.';
      echo 'Mailer error: ' . $mail->ErrorInfo;
    } else {
      echo 'Message has been sent.';
    }
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T04:23:05.013

我相信需要身份验证，但我不明白为什么不这样做。我不会为你做研究，但有几件事需要调查：

*   他们的 SMTP 服务器需要 TLS 加密，并且托管在非标准端口 (995) 上。您需要确保 AWS 支持 SMTP 出站的这两个选项。
*   在被标记为垃圾邮件之前，您可以发送的电子邮件可能存在上限。您应该对此进行研究并确保它不会超出您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T07:14:29.493

您可以使用[PHPMailer 类](http://phpmailer.worxware.com/)来完成这项工作。您可以轻松配置 smtp。

配置示例

```
if (class_exists(@PHPMailer)) {
    $smtp_mail  = new PHPMailer();
    $smtp_mail->isSMTP();
    $smtp_mail->SMTPAuth   = true;                  // enable SMTP authentication
    $smtp_mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
    $smtp_mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
    $smtp_mail->Port       = 465;                   // set the SMTP port
    $smtp_mail->Username   = "info@example.com";  // GMAIL username
    $smtp_mail->Password   = "password";            // GMAIL password
    $smtp_mail->From       = "info@example.com";
    $smtp_mail->FromName   = "Name";
    $smtp_mail->AltBody    = "This is the body when user views in plain text format"; //Text Body
    $smtp_mail->WordWrap   = 50; // set word wrap
    $smtp_mail->AddReplyTo("info@example.com","Name");
    $smtp_mail->isHTML(true); // send as HTML
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-03T11:24:48.867

尽管从技术上讲，您可以将 Gmail 用作 SMTP 服务器，但不建议将其用于大型网站。到时候您可能会收到诸如“421 4.7.0 临时系统问题”或类似问题，它不是为应用程序设计的，而是由一个人使用的。

上述错误消息的相关问题： [Gmail SMTP 错误 - 临时阻止？](https://stackoverflow.com/questions/39097834/gmail-smtp-error-temporary-block)

# vbscript - 正确使用 vbScript MsgBox

> ID：12189804
> 
> 赞同：0
> 
> 时间：2012-08-30T04:17:51.793
> 
> 标签：vbscript

我需要在浏览器中显示一些文本，中间有一些单词作为链接。单击我想要显示的链接时，会弹出一些文本和确定按钮。我希望弹出窗口的标题可以通过代码更改，并且图标也可以是信息图标。我使用 JavaScript 警报框，它总是弹出标题为“来自网页的消息”。我认为它可以使用 vbScript 完成。有人可以帮助正确使用 vbScript。PFB 使用 JavaScript 的示例，我需要对此进行调整，以便使用 vbScript 和 MsgBox。

```
<html>
<head>
<script type="text/javascript">
fucntion(test){
alert(test)
}
</script>
</head>
<body>
This is my <a href="javascript:void(o)" onclick="test('This is test')">link</a> which     
you can click on for definition.
</body>   
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:40:35.507

这工作正常。64 用于信息图标和确定按钮。但我无法摆脱标题开头的“vbscript：”。不知道为什么会这样。

```
<html>
<head>
<script type="text/vbscript">
Function myPopUp(test)
    MsgBox test, 64, "My Custom Title"
End Function
</script>
</head>
<body>
This is my <a href="#" language="vbscript" onclick="myPopUp('How are you do
today')">link</a> which     
you can click on for definition.
</body>   
</html> 
```

# c# - 检索（验证）字符串的一部分

> ID：12189811
> 
> 赞同：1
> 
> 时间：2012-08-30T04:18:35.407
> 
> 标签：c#, .net, wpf, regex, string

给定一个字符串，我需要验证该字符串是否严格包含单词 $LOOP。例如，

```
$LOOP(0,"0000","00000009","00000010",5000,100,0,0,0,0,10,0,0); 
```

将返回为真，而

```
$LOOP_A("asdf","zxcv")
$LOOP_INIT(0); 
```

将返回为假。

我遇到的问题 string.Contains($LOOP) 是它也为以下两个字符串返回 true。

我怎么解决这个问题？

编辑1：

以下是一些其他示例：

```
$LOOPING should return false
$LOOP$LOOP should return false
$LOOP(anything here) should return true
$LOOP        (Anything here) should return true
$asdLOOP should return false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:28:25.930

也许你可以只使用模式`\$LOOP\(.*\);`？

`\$LOOP[^_\w]`将匹配后面`$LOOP` *不*跟 _ 或单词字符。

或者，您可以拆分模式`$LOOP`并查看是否有任何结果片段以不属于您的单词的字符开头（例如，`(`但不是`_`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T04:46:23.710

您正在寻找的可能是带有 Word 边界的 REGEX。这会成功的

```
Regex re = new Regex(@"\$LOOP\b"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:38:19.393

假设这是 C# 和 .NET，您可以将 RegEx 用于您的目的：

```
bool Res = System.Text.RegularExpressions.Regex.IsMatch(YourString, @"^.*\$LOOP\b.*$"); 
```

但是，我想说你的问题有点模棱两可。您希望在字符串“$LOOP”之后允许哪些字符？例如，它应该匹配“$LOOPING”、“$LOOP$LOOP”还是“$LOOP (something)”？一旦你决定了，上面的表达式就可以改进了。

# c# - 如何在 Windows 应用程序的标签中显示查询结果？

> ID：12189823
> 
> 赞同：0
> 
> 时间：2012-08-30T04:20:28.267
> 
> 标签：c#, windows-applications

```
 private void button1_Click(object sender, EventArgs e)
        {
            string costring = connection();
            string MyQuery = "select SUM(balance) from dbo.KmtAccounts where registernumber='" + txtRegNo.Text + "'";
            SqlConnection conn = new SqlConnection(costring);
            SqlCommand cmd = new SqlCommand(MyQuery, conn);
            conn.Open();
            SqlDataReader reader = cmd.ExecuteReader();
            lblResult.Text = 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:22:58.370

在这种情况下，我可能会建议您使用[SqlCommand.ExecuteScalar 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)，因为您有一个返回的值。

> 执行查询，并返回查询返回的结果集中第一行的第一列。其他列或行将被忽略。

然后，当您希望将其分配给标签文本属性时，您可能会查看[Convert.ToString 方法。](http://msdn.microsoft.com/en-us/library/system.convert.tostring%28v=vs.110%29.aspx)

或者，如果您希望对其进行格式化，您可以查看使用[Convert.ToDouble 方法](http://msdn.microsoft.com/en-us/library/system.convert.todouble.aspx)，然后使用[Double.ToString 方法](http://msdn.microsoft.com/en-us/library/system.double.tostring.aspx)来格式化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:24:41.300

```
 private void button1_Click(object sender, EventArgs e)
            {
                string costring = connection();
                string MyQuery = "select SUM(balance) from dbo.KmtAccounts where     registernumber='" + txtRegNo.Text + "'";
                SqlConnection conn = new SqlConnection(costring);
                SqlCommand cmd = new SqlCommand(MyQuery, conn);
                conn.Open();
                lblResult.Text =cmd.ExecuteScalar().ToString();
                conn.close()
            } 
```

# iphone - UITableViewCell textLabel 宽度大小错误 Expression is not assignable

> ID：12189824
> 
> 赞同：0
> 
> 时间：2012-08-30T04:20:32.443
> 
> 标签：iphone, ios, uitableview, textlabel

我想在`tableView:cellForRowAtIndexPath:`我收到错误的情况下设置我的 UITableViewCell 标签的框架宽度。

这就是我尝试设置单元格的方式。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        [cell.textLabel setLineBreakMode:UILineBreakModeCharacterWrap];
        cell.textLabel.frame.size.width = 200.0; // just as an example.
        [cell.textLabel setMinimumFontSize:FONT_SIZE];
        [cell.textLabel setNumberOfLines:0];
        [cell.textLabel setFont:[UIFont boldSystemFontOfSize:FONT_SIZE]];
        [cell.textLabel setTag:1];

        [[cell contentView] addSubview:cell.textLabel];
    } 
```

但是在我尝试设置的那一行`textLabel.frame.size.width`我得到了这个错误

**表达式不可赋值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:28:37.900

这是自我解释的，因为您无法更改.`width`的`height`属性`UITableViewcell`。更重要的是，您无法更改`textLabel`in的框架`UITableViewCell`。您应该自定义`UITableViewCell`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:02:29.720

你不能这样做，如果你想这样做，那么它不会给出任何错误，但它不会影响你的代码......所以只需制作简单的标签，然后设置它的框架，然后将它添加到你的单元格中。

```
[cell addSubview:YourLbl]; 
```

# git - 在来自两个来源的一个文件夹中使用 git

> ID：12189835
> 
> 赞同：0
> 
> 时间：2012-08-30T04:21:53.223
> 
> 标签：git

我正在开发一个 CakePHP 项目，我已经通过 GitHub 克隆了它的源代码。我自己的代码位于 CakePHP 文件夹中。

我希望能够将我的代码推送到它自己在 GitHub 中的存储库中，同时能够从 Github 中提取任何 CakePHP 更新，而不会删除或覆盖我的代码。

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:26:13.687

是的，您可以直接克隆 CakePHP 代码，然后在 CakePHP 工作树中克隆您自己的代码。在这种情况下，当在 CakePHP 代码中工作时，git 将报告您的目录未跟踪。

或者，您可以在`.gitignore`CakePHP 根目录内的文件中添加您的目录名称，但除非您拥有 CakePHP 的提交权限或使用您自己的 fork，否则您将无法这样做。因此，另一种方法是将其添加到`.git/info/exclude`仅存在于本地克隆中的文件中。

# linux - 我无法构建 deb 包

> ID：12189840
> 
> 赞同：0
> 
> 时间：2012-08-30T04:23:01.427
> 
> 标签：linux, deb

我想构建具有

```
/package/debtest/
/package/debtest/bin
/package/debtest/bin/E01.bin
/package/debtest/bin/E02.bin
/package/debtest/bin/E03.bin``
/package/debtest/log
/package/debtest/mon 
```

我想安装到目录 /opt/debtest/

这是我的规则文件

```
 #!/usr/bin/make -f
    # -*- makefile -*-
    # Sample debian/rules that uses debhelper.
    # This file was originally written by Joey Hess and Craig Small.
    # As a special exception, when this file is copied by dh-make into a
    # dh-make output file, you may use that output file without restriction.
    # This special exception was added by Craig Small in version 0.37 of dh-make.

install:

install -d /opt/debtest/
install -d /opt/debtest/bin
install -d /opt/debtest/log
install -d /opt/debtest//mon

****# Uncomment this to turn on verbose mode.**
****#export DH_VERBOSE=1******

%:
    dh $@ 
```

当使用 dpkg-buildpackage 命令时，它会查看这个

dpkg-source --before-build debtest-1.0 debian/rules clean debian/rules:11: ***缺少分隔符。停止。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:08:38.267

您的 Makefile 语法无效。如果缩进命令，每个目标都应包含一个数字。缩进必须以文字制表符开头。

不过，您显然要完成的工作最好使用`debian/dirs`文件来完成。无论如何，您都不会将常规 Makefile 目标放在`debian/rules`文件中。

# android - 每 5 秒间隔隐藏并显示按钮

> ID：12189850
> 
> 赞同：2
> 
> 时间：2012-08-30T04:23:43.207
> 
> 标签：android, button, show-hide

是否可以在屏幕上制作一个每隔 5 秒自动显示并消失的按钮？通过使用这个

```
b.setVisibility(View.VISIBLE); 
```

我们可以看到并且

```
b.setVisibility(View.GONE); 
```

我们可以隐藏它。但我无法在时间间隔内成功。有什么想法吗？请分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:29:53.463

有几种不同的方式，一种是 Handler 和 Runnable：

```
public class Example extends Activity {
    private Handler mHandler = new Handler();
    private Runnable alternate = new Runnable() {
        public void run() {
            // Alternate visible and not
            mHandler.postDelayed(alternate, 5000);
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mHandler.postDelayed(alternate, 5000);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T04:29:55.417

用这个

```
new CountDownTimer(9000000, 5000) {

 public void onTick(long millisUntilFinished) {
     if(b.getVisibility() == View.GONE)
      b.setVisibility(View.VISIBLE);
     else
      b.setVisibility(View.GONE);
 }

 public void onFinish() {
   //Restart timer if you want.
 }
}.start(); 
```

# xaml - 在 XAML 中使用 TextBlock 创建类似选取框的效果

> ID：12189851
> 
> 赞同：1
> 
> 时间：2012-08-30T04:23:46.733
> 
> 标签：xaml, overflow, textblock, marquee

我在 XAML 中有一个 TextBlock，我正在尝试在按钮上创建一个水平滚动的“选取框”文本。但是，TextBlock 的宽度设置为父级的宽度。

例如，假设我们在 TextBlock 中有以下文本：

> [敏捷的棕色狐狸跳过了懒狗

即长文本应如下所示：

> [快速棕色 f]

但它仅限于父级的大小，这意味着当它滚动时，文本会丢失：

> [ick brown f] //缺少'ox'

关于如何强制 TextBlock 忽略父宽度的任何想法？

# c# - NUnit 和 NHibernate，FileLoadException

> ID：12189852
> 
> 赞同：0
> 
> 时间：2012-08-30T04:24:08.150
> 
> 标签：c#, nhibernate, nunit

我尝试使用 NUnit 为简单的 NHibernate 映射和 InMemory SqLite 数据库进行一些单元测试。SqLite 在我的单元测试项目中被引用，而 NHibernate 在 Nuget 的同一版本中被两个项目引用。

我的测试看起来像

```
[Test]
    public void AddDocumentTest()
    {
        var document = new Repository<Document>(Session);
        document.Add(new Document { FileName = "Blubb", Id = Guid.NewGuid(), Title = "Dummy Title" });
        // here comes the error            
        var i = document.All().Count();
    } 
```

当我在文档类上调用一些 Linq 方法时，我得到

> System.IO.FileLoadException : Die Datei oder Assembly "NHibernate, Version=2.1.2.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4" oder eine Abhängigkeit davon wurde nicht gefunden。Die gefundene Manifestdefinition der Assembly stimmt nicht mit dem Assemblyverweis überein。（Ausnahme von HRESULT：0x80131040）

对不起，我只有德语，但我认为它清楚发生了什么。为什么他要寻找一个完全不同的 NHibernate 版本？（我的版本是 3.3.1.4000）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:03:37.590

问题是我还引用了 NHibernate2Linq 项目，该项目试图在旧版本中获取 Nhibernate。

# spring - Spring Mongo 存储库多态性

> ID：12189855
> 
> 赞同：4
> 
> 时间：2012-08-30T04:24:27.510
> 
> 标签：spring, mongodb, polymorphism

如何为多态类定义存储库接口

前任。

```
abstract class Source { public String name }

class InternalSource extends Source { public int internalId }
class ExternalSource extends Source { public String contact } 
```

现在我知道我无法定义像这样的存储库接口

```
interface SourceRepo extends Repository<? extends Source, String>{....} 
```

或者

```
interface SourceRepo extends Repository<Source, String> { ....} 
```

定义简单的普通接口并拥有一个实现类是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:57:35.367

那么让spring通过'_class'属性将mongo文档关联到java类映射会很好。

Mongo文档想要一些这样的

```
{_id : "xxx", name : "abc", internalId : 123, _class = "...InternalSource" }
{_id : "xxx", name : "abc", contact: "John doe", _class = "...ExternalSource"} 
```

# javascript - 如何使用 jQuery 切换 ListItem 的最后两个孩子

> ID：12189856
> 
> 赞同：0
> 
> 时间：2012-08-30T04:24:26.527
> 
> 标签：javascript, jquery

我有一个列表项，其中有一些孩子喜欢..

```
 <li id="li1">Your Text 
      <a id="link1" href="#">click to enter</a>
      <input type="text" id="textbox1" value=""/>
      <input type="button" id="button1" value="Edit" />
   </li> 
```

单击链接时，我想隐藏并显示文本框和按钮。

请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:30:40.553

你可以这样做

```
$('#link1').click(function(){
    $('#li1').children().slice(-2).toggle();
});
​ 
```

[现场演示](http://jsfiddle.net/QF44J/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:27:59.330

像这样的东西：

```
$(document).ready(function() {
    $("#idOfList li a").click(function(e) {
        e.preventDefault();
        $(this).siblings().toggle();
    });
}); 
```

以上假设您在每个 li 元素中都有类似的内容，并且您希望对所有这些元素执行相同的操作 - 为了使其正常工作，您显然会将 id 从包含的 ul 或 ol 元素放在我说过的地方`"#idOfList"`。

演示：http: [//jsfiddle.net/nnnnnn/j8NrE/](http://jsfiddle.net/nnnnnn/j8NrE/)

*仅*针对特定链接执行此操作，`id="link1"`只需将`"#idOfList li a"`选择器更改为`"#link1"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:37:37.917

通过使用 jQuery [**.siblings()**](http://api.jquery.com/siblings/)和[**.slideToggle()**](http://api.jquery.com/slideToggle/)方法，您可以通过以下代码行轻松实现它：

**jQuery：**

```
$(".list-item a").on("click", function(event){           
    $(this).siblings().slideToggle();
    event.preventDefault();    
});​ 
```

**HTML：**

```
<ul>
    <li class="list-item">Your Text 
        <a id="link1" href="#">clike to enter</a>
        <input type="text" id="textbox1" value=""/>
        <input type="button" id="button1" value="Edit" />
    </li>

    <li class="list-item">Your Text 
        <a id="link2" href="#">clike to enter</a>
        <input type="text" id="textbox2" value=""/>
        <input type="button" id="button2" value="Edit" />
    </li>
</ul>​ 
```

## [看演示](http://jsfiddle.net/akhurshid/LG44d/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T04:26:07.097

将此添加到您的文档中：

```
<script type="text/javascript">
    $(function () {
        $('#link1').click(function () {
            $('#textbox1').toggle();
            $('#button1').toggle();
        });
    });
</script> 
```

在这里查看它的实际效果：

[http://jsfiddle.net/LC7LT/2/](http://jsfiddle.net/LC7LT/2/)

# jira - 如何使用 API 调用从特定项目中的项目角色（前用户角色）中删除组

> ID：12189860
> 
> 赞同：1
> 
> 时间：2012-08-30T04:24:45.577
> 
> 标签：jira, jira-plugin

我想使用 api call 删除给定项目中用户角色中的组。我怎样才能做到这一点？我可以使用删除所有组和用户

```
jiraSoapService.removeAllRoleActorsByProject(authToken,remoteProject); 
```

但我只想删除角色组 - 用户我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:42:10.577

您应该使用SOAP API 中的[removeActorsFromProjectRole](http://docs.atlassian.com/rpc-jira-plugin/latest/com/atlassian/jira/rpc/soap/JiraSoapService.html#removeActorsFromProjectRole%28java.lang.String,%20java.lang.String%5b%5d,%20com.atlassian.jira.rpc.soap.beans.RemoteProjectRole,%20com.atlassian.jira.rpc.soap.beans.RemoteProject,%20java.lang.String%29)方法：

```
jiraSoapService.removeActorsFromProjectRole(
    authToken,
    arrayOfGroupNames,
    projectRole,
    project,
    "atlassian-group-role-actor"); 
```

如果您想删除用户而不是组，您应该使用“atlassian-user-role-actor”作为该方法的最后一个参数。

# asp.net - 动态创建的 HTML 按钮 serverclick 功能不起作用

> ID：12189861
> 
> 赞同：1
> 
> 时间：2012-08-30T04:25:01.253
> 
> 标签：asp.net, html, postback, literals

我需要在我的 ASP.NET C# 代码隐藏中动态创建一个 HTML 按钮，我必须在我的文字控件中插入这个按钮，我使用以下语法：

```
literal.Text+=<button id=\"MyButton\" runat=\"server\" OnServerClick=\"MyButton_Click\">Click Me</Button>"; 
```

按钮显示，它会导致回发，但我的服务器点击函数（MyButton_Click）没有被调用，这里出了什么问题？我当然应该使用文字，我可以在文字中使用 ASP.NET 控件吗？

我想在此按钮导致回发后调用一个函数，我可以在我的文字中使用其他对象吗？我当然应该使用文字

感谢您的回答，我的文字中有很多代码，如下所示：

```
......
......

dynTable += "</td></tr>";
                        dynTable += "<tr><td></td></tr>";
                        dynTable += "<tr><td></td></tr>";
                        dynTable += "<tr><td></td></tr>";
                        dynTable += "<tr><td></td></tr>";

                        dynTable += "<tr><td align=\"left\">";
                        dynTable += "<button id=\"MyButton\" type=\"submit\" runat=\"server\" OnServerClick=\"MyButton_Click\">Foo</button>";
                        dynTable += "</tr></td> </table>  ";
                    }
                }

                //=====================================
                dynTable += "                   </td>";
                dynTable += "               </tr>";
                dynTable += "             </table>";
                dynTable += "           </td>";
                dynTable += "         </tr>";
                dynTable += "       </table>";

                dynTable += "     </td>";
                dynTable += "  </tr>";

            }
            dynTable += "</table>";

        }
        ReviewPlace.Text = dynTable; 
```

ReviewPlace 是我的 asp.net 文字对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:30:18.533

您不能以这种方式添加*Server - Html/Web*控件。您必须在事件中创建一个*Control*`Page_Init/Page_Load`对象并将其添加到`PlaceHolder's`Controls 集合中。

在标记 (.aspx) 中添加 PlaceHolder1 控件

```
<form id="form1" runat="server">
   <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
</form> 
```

并编写`Page_Init`处理程序，

```
 protected void Page_Init(object sender, EventArgs e)
    {
        System.Web.UI.HtmlControls.HtmlButton button = new System.Web.UI.HtmlControls.HtmlButton();
        button.InnerText = "OK";
        //Event handler - Lambda (anonymous method) expression
        button.ServerClick += (sa, ea) =>
            {
                Response.Write("button is pressed");
            };
        //Named Event handler
        button.ServerClick += new EventHandler(button_ServerClick);
        PlaceHolder1.Controls.Add(button);
    }

 void button_ServerClick(object sender, EventArgs e)
   {
    Response.Write("Another handler");
   } 
```

* * *

*编辑：如果*您希望/想要*手动生成标记，*我建议您使用`jQuery/JavaScript`-`ajax`请求服务器资源而不是处理服务器事件。这个问题的替代解决方案*是*使用控件——尤其是 GridView/ListView，我相信这些控件和绑定机制将解决这个问题。***`Server`***

 ***另一种可能性是使用`Table`服务器控制。看看样本：

```
//For ease of use I'v subclass the `TableRow`
 public class Row : TableRow
    {
        public Row(int col)
        {
            for(int i=0;i<col;i++)
            Cells.Add(new TableCell());
        }
        public TableCell this[int index]
        {
            get { return Cells[index]; }
        }
    } 
```

和 Page_Init 代码来填充`Table`对象。

```
protected void Page_Init(object sender, EventArgs e)
    {
        Table table = new Table();

        Row row1 = new Row(3);
        row1[0].ColumnSpan = 3;
        row1[0].Text = "Search";
        table.Rows.Add(row1);

        Row row2 = new Row(3);
        row2[0].Text = "Enter keyword";
        row2[1].Controls.Add(new TextBox());
        table.Rows.Add(row2);

        Row row3 = new Row(3);
        row3[0].ColumnSpan = 3;
        Button button = new Button();
        button.Text = "Search";
        button.Click += (sa, ea) => Response.Write("Button is pressed");
        row3[0].Controls.Add(button);

        table.Rows.Add(row3);

        PlaceHolder1.Controls.Add(table);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:42:21.607

正如 AVD 指出的那样，这不是一个好主意。

但是，如果您决定继续沿着这条路走下去，则需要通过调用`__doPostBack()`具有正确`__EVENTTARGET`和`__EVENTARGUMENT`属性集的客户端脚本函数来回发。

这篇 SO 帖子显示了一个快速而肮脏的~~黑客~~解决方法在这里，通过`asp:button`在屏幕上放置一个 hidden ，然后更改您的代码以调用[隐藏按钮 click](https://stackoverflow.com/questions/5448825/is-it-ok-to-use-dopostback)。***

# cuda - 如何降级cuda版本

> ID：12189862
> 
> 赞同：2
> 
> 时间：2012-08-30T04:25:04.000
> 
> 标签：cuda

我目前正在使用 cuda 4.2 版，但我需要将其更改为 3.1。是否可以卸载当前版本（4.2 版）然后安装以前的版本（3.1 版）？

编辑：请参考我的操作系统是 linux ubuntu 10.04 64bit。

编辑：我找到了如何获得 3.1 的版本。我必须发送电子邮件到“devzoneupdate@nvidia.com”来请求这个旧版本。现在，请让我知道如何卸载 4.2 然后安装 3.1。

编辑：我通过请求 nvidia 下载了 cuda 3.1，然后安装了工具包和 SDK。安装 cuda 3.1 工具包时，会出现卸载当前版本的问题。对于 SDK，我们可以直接删除 ~/NVIDIA_GPU_Computing_SDK 目录进行卸载。删除后我可以安装 cuda 3.1 SDK。我已经完成了，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T20:21:28.743

警告：

ubuntu 12.04 升级到 12.10 并安装了标准 cuda 4.2；在使用 NVIDA 安装程序降级到 CUDA 4.0 的过程中导致了 !! 彻底拆除！！/usr/bin/

在提供删除现有 CUDA 安装时选择“否”可能是个好主意；虽然我从来没有尝试过，因为只有已经加载的 Firefox 仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:44:41.227

是的，您可以轻松降级 CUDA 版本，前提是您不使用 CUDA 工具包功能，这些功能仅存在于高于 3.1 的版本中。

此外，您还必须修改项目设置以使用 CUDA 规则 3.1 版。

# perl - “我的”和“本地”之间的区别如何与符号引用相互作用？

> ID：12189865
> 
> 赞同：4
> 
> 时间：2012-08-30T04:25:32.407
> 
> 标签：perl

之前看过《Effective Perl Programming》这本书的相关内容，但并没有真正看懂。今天遇到了一个问题，代码如下。

```
my $vname = "a";
my @a = qw(1 2 3);
local @array = @$vname; 
foreach(@array) { print "$_\n"; }; 
```

它什么也不输出。然后我修改了这一行：

```
local @a = qw(1 2 3); 
```

只需将“my”替换为“local”，即可使用。所以我想弄清楚它们之间有什么区别。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T06:00:32.463

有一个[`perldoc`](http://perldoc.perl.org)条目可以回答这个问题[`perlfaq7`](http://perldoc.perl.org/perlfaq7.html#What's-the-difference-between-dynamic-and-lexical-(static)-scoping%3f-Between-local()-and-my()%3f)：

> **动态和词法（静态）作用域有什么区别？之间`local()`和`my()`？**
> 
> `local($x)`保存全局变量的旧值`$x`并在子例程的持续时间内分配一个新值，该值在从该子例程调用的其他函数中可见。这是在运行时完成的，因此称为动态范围。`local()`总是影响全局变量，也称为包变量或动态变量。 `my($x)`创建一个仅在当前子例程中可见的新变量。这是在编译时完成的，因此称为词法或静态作用域。`my()`总是影响私有变量，也称为词法变量或（不正确的）静态（ly 作用域）变量。
> 
> 例如：
> 
> ```
> sub visible {
>     print "var has value $var\n";
> }
> 
> sub dynamic {
>     local $var = 'local';   # new temporary value for the still-global
>     visible();              #   variable called $var
> }
> 
> sub lexical {
>     my $var = 'private';    # new private variable, $var
>     visible();              # (invisible outside of sub scope)
> }
> 
> $var = 'global';
> visible();              # prints global
> dynamic();              # prints local
> lexical();              # prints global 
> ```
> 
> 请注意，值“private”是如何被打印出来的。那是因为`$var`只有在函数块中具有该值`lexical()` ，并且它对被调用的子例程隐藏。
> 
> 总之，`local()`不会使您认为的私有局部变量。它给全局变量一个临时值。如果您想要私有变量，my() 就是您要查找的内容。
> 
> 请参阅[`Private Variables via my()`perlsub](http://perldoc.perl.org/perlsub.html#Private-Variables-via-my()) 和[`Temporary Values via local()`perlsub](http://perldoc.perl.org/perlsub.html#Temporary-Values-via-local()) 中的详细信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-30T04:49:48.353

`my`创建一个新变量。它只能在声明它的词法范围内看到。

`local`创建在范围退出时恢复的全局变量的临时备份，但不会缩小其范围（仍然可以在全局范围内看到）。它不会创建新变量。

您总是希望尽可能使用`my`，但是`local`当您必须处理全局变量（例如`$_`）时，这是一个不错的近似值。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-30T04:35:05.023

Perl 中有两种变量作用域：

*   *全局变量*：它们驻留在当前包中，可以从外部访问并且可以具有“本地”值。该名称可以用作“stash”、包变量哈希/符号表中的键。
*   *词法变量*：它们驻留在当前范围内（大致由大括号分隔）。没有可以检查的符号表。

词法变量和全局变量互不干扰，可以有两个不同的变量同名。

大多数 Perl 变量魔法都发生在全局变量中。以下语法适用于全局变量：

```
our $var;
$::var;
$main::var;
${'var'};
local $var; 
```

但不是`my $var`。

所以我们可以写：

```
@::array = qw(a b c);
my @secondArray = @{array}; 
```

复制数组。我们还可以使用存储在变量中的名称查找数组：

```
@::array = qw(a b c);
my $name = "array";
my @secondArray = @{$name}; 
```

最后一行缩写为`… = @$name`.

这对于词法变量是不可能的，因为它们不驻留在存储中。

该`local`函数将“本地”值分配给当前范围内的全局变量（仅限全局变量）以及从该范围内调用的所有子范围（“动态范围”）。

最初（在 Perl 4 中）干预变量名和存储是模拟引用的唯一方法。这些用法现在大多已经过时了约 2 年，因为有可用的参考资料（更安全的方法）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T06:51:40.093

我想关注您使用它们的主要情况：

*   **对于您希望将其限制在特定块中的变量，**我应该是您的“默认值”。**这应该是大部分时间**
***   **如果您希望使用全局变量，尤其是特殊变量之一，则local**很有用。例如

    ```
    local $/;                          # enable "slurp" mode
    local $_ = <$some_file_handle>;    # whole file now here 
    ```

    使用 local 可以防止您的更改影响其他代码（包括您未编写的模块）** 

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T18:24:06.240

在您的情况下，不同之处在于`local`解决了符号表中的变量而`my`没有解决。这很重要，因为如何使用它：

```
local @array = @$vname; 
```

也就是说，您将`$vname`其用作[符号参考](http://perldoc.perl.org/perlref.html#Symbolic-references)（一种有问题的做法，没有`no strict 'refs'`告诉我们您知道自己在做什么）。配额：

> 只有包变量（全局变量，即使已本地化）对符号引用可见。词法变量（用 my() 声明）不在符号表中，因此对这种机制是不可见的。

所以符号引用只能引用符号表中的变量。无论您声明`@a`为词法的 with`my`还是全局的 with `local`，`@$vname`都只引用`@main::a`. 当你说

```
local @a = qw(1 2 3); 
```

, 你给`@main::a`. 当你说

```
my @a = qw(1 2 3); 
```

，您正在创建一个新的词法变量`@a`并为其赋值，但`@main::a`未定义。什么时候

```
local @array = @$vname; 
```

然后访问 的值`@main::a`，如果发现它是未定义的并设置它的值`@array`。

如果这一切看起来令人困惑，那是因为它是。这就是为什么强烈鼓励你使用`strict`and `warnings`（这在这段代码中会很爆炸）并且不鼓励使用符号引用，除非你*真的*知道你在做什么。**

# javascript - 在 a 下收集类名 java脚本数组中的标记

> ID：12189867
> 
> 赞同：0
> 
> 时间：2012-08-30T04:25:47.493
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
 $(document).ready(function () {

 });

</script>

<div id="input">
    <div class="feature draggable">Drag 1</div>
    <div class="feature resizable">Resize</div>
    <div class="feature downloadable">Download</div>
    <div class="feature draggable">Drag 2</div>
    <div class="feature trackable">Track</div>
    <div class="feature colorable">Color</div>
</div>​ 
```

我想将所有类元素存储在`<div id="input">`in 数组下。正确的方法是什么？

JS 小提琴：http: [//jsfiddle.net/gMjxu/](http://jsfiddle.net/gMjxu/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:38:28.790

```
var classnames = $("#input div").map(function() { return this.className }).get(); 
```

如果一个元素上有多个类，您将不得不做一些额外的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:40:14.963

在这里，我有完整的演示箱和链接如下：

**演示** [http://codebins.com/bin/4ldqp7w](http://codebins.com/bin/4ldqp7w)

**HTML**

```
<div id="input">
  <div class="feature draggable">
    Drag 1
  </div>
  <div class="feature resizable">
    Resize
  </div>
  <div class="feature downloadable">
    Download
  </div>
  <div class="feature draggable">
    Drag 2
  </div>
  <div class="feature trackable">
    Track
  </div>
  <div class="feature colorable">
    Color
  </div>
</div>
<input type="button" value="Show Classes" id="btn1" /> 
```

**jQuery**

```
$(function() {
    var c = [];
    $("#input div").each(function() {
        var cls = $(this).attr('class').split(' ');
        for (var j = 0; j < cls.length; j++) {
            if (cls[j] != '') {
                c.push(cls[j]);
            }
        }
    });

    $("#btn1").click(function() {
        if (c.length <= 0) {
            alert("No Class Exists...!");
        } else {
            for (var i = 0; i < c.length; i++) {
                alert(c[i]);
            }
        }
    });

}); 
```

**演示** [http://codebins.com/bin/4ldqp7w](http://codebins.com/bin/4ldqp7w)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:31:03.057

```
 $(document).ready(function () {
        $.each($("#input div"), function() {
           alert($(this).prop('class'));
        });

 }); 
```

这个小提琴

[http://jsfiddle.net/dappledore/gMjxu/17/](http://jsfiddle.net/dappledore/gMjxu/17/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T04:44:32.103

```
var classNames = []  

$('#input div').each(function(){
     classNames.push($(this).attr('class')) }); 
```

希望这是您正在寻找的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T04:42:19.267

```
(function($) {
    $.fn.classes = function(f) {
        var c = [];
        $.each(this, function(i, v) {
            var _ = v.className.split(/\s+/);
            for (var j in _)'' === _[j] || c.push(_[j]);
        });
        c = $.unique(c);
        if ("function" === typeof f) for (var j in c) f(c[j]);
        return c;
    };
})(jQuery);

$(document).ready(function() {
    alert($('#input div').classes());
});​

$(document).ready(function () {
alert($('#input div').classes());
    });
</script>

<div id="input">
        <div class="feature draggable">Drag 1</div>
        <div class="feature resizable">Resize</div>
        <div class="feature downloadable">Download</div>
        <div class="feature draggable">Drag 2</div>
        <div class="feature trackable">Track</div>
        <div class="feature colorable">Color</div>
    </div>​ 
```

应该做的伎俩。 [http://jsfiddle.net/FRhKS/](http://jsfiddle.net/FRhKS/)

您最终会得到所有选定元素的唯一类数组。

# html - 在 Erlang Cowboy 中提供 html 文件，但它显示为文本

> ID：12189869
> 
> 赞同：1
> 
> 时间：2012-08-30T04:26:12.033
> 
> 标签：html, erlang, cowboy

我正在尝试使用 Erlang Cowboy 提供动态生成的 html 页面，但它在 Firefox 14.0.1 中以文本形式出现。

这是从浏览器页面源复制的 doctype 和初始标题标签：

```
<DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-type" content="text/html;charset="UTF-8"><title>Welcome!</title>
<link href="css/bootstrap.css" rel="stylesheet">
yada yada 
```

如果我不使用 doctype，它会按预期显示。

Bootstrap Scaffolding (http://twitter.github.com/bootstrap/scaffolding.html) 需要 html 文档类型。

我不确定这是否是我的 html 或 Cowboy 配置的问题。

这是 _app.erl 中 Dispatch 的相关部分：

```
 {['...'], cowboy_http_static,
       [ {directory, {priv_dir, cw, []}},
           {mimetypes, [  {<<".css">>, [<<"text/css">>]} ]} 
```

有人可以告诉我我的方式错误吗？

非常感谢，

LRP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:45:18.790

试试这个

```
{['...'], cowboy_http_static,
   [ {directory, {priv_dir, cw, []}},
       {mimetypes, [{<<".css">>, [<<"text/css">>]},
                    {<<".html">>, [<<"text/html">>]}]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:59:19.653

我使用 cowboy_static 来提供 DOCTYPE html，它可以正常工作，并且具有正确的 mimetype。缺少感叹号：**“！DOCTYPE”**而不是“DOCTYPE”

`<!DOCTYPE html>`

见[http://www.w3schools.com/tags/tag_doctype.asp](http://www.w3schools.com/tags/tag_doctype.asp)

**编辑：** Firefox 和 Chrome`<DOCTYPE html>`也接受。所以问题很可能是 Mimetype。

# actionscript-3 - FLASH actionscript 3.0 问题

> ID：12189872
> 
> 赞同：0
> 
> 时间：2012-08-30T04:26:27.460
> 
> 标签：actionscript-3, flash, movieclip

我想问一下这个问题。我有一个影片剪辑（实例名称：char）。在里面我有2个框架。第一帧包含一个movieclip（它什么也没做，我忘记了为什么我还要费心把它做成movieclip）。这第一帧具有帧标签“静止”。

第二帧还包含一个影片剪辑，其中包含 12 帧。第二个第一帧有帧标签“运行”这是我的代码

```
char.gotoAndStop(char.still);

stage.addEventListener(KeyboardEvent.KEY_DOWN, keysDown);
stage.addEventListener(KeyboardEvent.KEY_UP,keysUp);

function keysDown(e:KeyboardEvent):void{
    if(e.keyCode == Keyboard.RIGHT)
    {       
        char.gotoAndStop("run");
        this. char.scaleX = 1;
    }   
}

function keysUp(e:KeyboardEvent):void{
    if(e.keyCode == Keyboard.RIGHT)
    {
        char.gotoAndStop("still");
    }
} 
```

问题是，当我按下右箭头按钮时，它会移动，但影片剪辑（帧名称为“run”）无法循环播放，甚至无法从第 1-12 帧完整播放，它只能从第 1-9 帧播放然后停止（不要转到第 10 帧甚至循环）我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:10:22.213

Have a look at how often the KEY_DOWN-Event is actually fired. For example by just tracing.

```
function keysDown(e:KeyboardEvent):void{
    if(e.keyCode == Keyboard.RIGHT)
    {       
        trace("pressed");
        char.gotoAndStop("run");
        this. char.scaleX = 1;
    }   
} 
```

You will realize that the event is thrown WHILE the Key is pressed, not only once. You actually call the gotoAndStop("run") repeatedly, which makes your animation mc restart all the time.

# java - 处理实体碰撞

> ID：12189873
> 
> 赞同：3
> 
> 时间：2012-08-30T04:26:28.537
> 
> 标签：java, collision

我正在使用 LWJGL 和 Java 1.6 编写一个 2d 自上而下的 RPG。到目前为止，我的渲染和输入方法工作正常，并且刚刚开始编写游戏逻辑。

所以我有一个名为 World 的类，它包含一个 ArrayList 的实体。我想在游戏中实现简单的碰撞（使用相交的正方形），应该没问题。我现在唯一的问题是如何访问我的列表的单个单元格而不必遍历它。我只能想出碰撞方法，这些方法在每个实体内部执行并遍历我的世界中的所有实体。这根本不快，但我真的不知道该怎么做才能让它更快。

我的游戏是基于瓷砖的，但运动不是瓷砖到瓷砖的，可以走更小的部分，这避免了我简单地使用二维数组......

是否有处理实体及其碰撞的标准方法？（或者可能是一种处理位于 ArrayList 内的实体之间的冲突的方法？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:18:22.730

处理碰撞实体的标准方法是空间分区。你的世界是一个由离散点组成的二维平面。每一块都可以位于其中一个点上。点的数量决定了平面的分辨率——点越多，视觉效果越好，你需要执行的计算就越多。这是权衡。

您可以维护实体位置和实体本身之间的映射，其中位置由覆盖 equals 和 getHashCode 的对象表示。位置对象包含两个成员 - X 和 Y 坐标。

注意-您必须以适当和有效的方式覆盖。

因此，如果您知道它的坐标，您可以非常快速地访问每个实体，重新洗牌只是删除一个实体并使用新坐标添加它（这可以针对局部性进行优化）并且碰撞检测是微不足道的 - 只需检查相同的位置是否被某个实体。

我还会向您推荐关于 SO的[这个问题。](https://stackoverflow.com/questions/8084525/java-collision-detection-with-many-objects?rq=1)

# c# - 从后面的代码中将控件（在 xaml 中定义）添加到堆栈面板

> ID：12189874
> 
> 赞同：1
> 
> 时间：2012-08-30T04:26:32.080
> 
> 标签：c#, wpf, xaml, stackpanel

我有一个用户控件，我想在 XAML 中将其定义为模板。在后面的代码中，在运行时，我想继续将项目（我的用户控件类型）添加到堆栈面板。

我该怎么做？

我不想这样做：

```
myUserControl myUserControl = new MyUserControl;
myStackPanel.Children.Add(myUserControl); 
```

这是因为我在 XAML 中为我的 UserControl 设置了多个属性，并且我不想从后面的代码中设置所有绑定。我正在寻找更优雅的解决方案。

如何在 XAML 中为用户控件定义模板？那么我该怎么做这样的事情呢？

```
myStackPanel.Children.Add(myCustomControlTemplate); 
```

我是 WPF 新手，所以如果这是一个非常琐碎的问题，请多多包涵。

**编辑：（**根据 Erno 的要求）

*XAML 文件*：

```
<someNamespace:MyUserControl x:Name="usrControl" SomeState="{Binding CachedValue}" MyUserControlEventAggregator="{Binding ParentEventAggregator}"
                                           DepedencyProperty1="{Binding Property1, Mode=TwoWay}"
                                           DepedencyProperty2="{Binding Property2}"
                                           DepedencyProperty3="{Binding Property3}"
                                           d:DataContext="{Binding Path=ParentViewModel}"> 
```

*XAML.CS 文件*：

```
public partial class ParentControl: Window
{
    public ParentControlViewModel ParentViewModel{ get; set; }

    public ListBuilderView(ParentViewModel viewModelPassedByPRISM)
    {
        ParentViewModel = viewModelPassedByPRISM;
        DataContext = ParentViewModel;
        InitializeComponent();
    }

    private void AddMyUserControlButton_Click(object sender, RoutedEventArgs e)
    {
        // I need to create an instance of MyUserControl here and add it to any WPF component of ParentControl as I may need it for some other user action
    }

    private void ProcessInfoButton_Click(object sender, RoutedEventArgs e)
    {
        // I need to loop through and look into each of the MyUserControls that the user adds, get some values from the MyUserControl and pass this information to do some calc and make some database calls
    }
} 
```

*ParentViewModel.cs 文件*：

```
public class ParentViewModel: BaseViewModel
{
     public IEventAggregator ChildEventAggregator { get; set; }

     private AnyType _property1;
     public AnyType Property1
     {
         get { return _property1; }
         set
         {
             _property1 = value;
             NotifyPropertyChanged("Property1");
         }
     }

     private AnyType _property2;
     public AnyType Property2
     {
         get { return _property2; }
         set
         {
             _property2 = value;
             NotifyPropertyChanged("Property2");
         }
     }

     private AnyType _property3;
     public AnyType Property3
     {
         get { return _property3; }
         set
         {
             _property3 = value;
             NotifyPropertyChanged("Property3");
         }
     }

     public AnyType CachedValue { get; set; }
} 
```

因此，如您所见，我在 xaml.cs 文件中创建的所有 MyUserControl 类型的对象将共享公共属性并自行更新。用户将与这些控件进行交互，当他们请求进行某些处理时，我必须查看用户添加到主控件的每个 MyUserControl，调用 MyUserControl 中的一些方法来获取一些信息，使用来自每个 MyUserControl 的这些信息进行一些其他处理和查询数据库。

我希望这有帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:13:04.020

**编辑**

请注意，您发布的代码中的 ViewModel 属性是集合！您可能希望将这些列表更改为 ObservableCollection。

要绑定到这些：使用项目控件，例如用户控件中的列表框。（顺便说一句：请使用更好的属性名称！）

这是它的样子：

```
<StackPanel>
    <MyUserControl DataContext="{Binding Property1}"/>
    <MyUserControl DataContext="{Binding Property2}"/>
    <MyUserControl DataContext="{Binding Property3}"/>
</StackPanel> 
```

在 MyUserControl 中：

```
<UserControl x:Class="MyUserControl">
    <ListBox ItemsSource="{Binding}">
         <ListBox.ItemTemplate>
             <DataTemplate>
                 <StackPanel Orientation="Horizontal">
                     <TextBlock Text="{Binding AttributeName}"/>
                     <TextBox Text="{Binding AttributeValue}"/>
                 </StackPanel>
             </DataTemplate>
         </ListBox.ItemTemplate>
    </ListBox>
</UserControl> 
```

**旧答案 - 仍然有效** 针对您的评论：

您需要一种非常相似的不同方法。通过使用诸如 ListBox 之类的 ItemsControl，您只需指定要绑定到的集合，并自动为集合中的每个项目创建 ItemTemplate 的实例（在本例中包含用户控件）并设置其 DataContext到项目，因此用户控件中的绑定将与项目相关。 

无需在代码中添加实例，也无需设置每个控件的DataContext。欢迎来到数据绑定的美妙世界。

我的猜测是您不是在寻找模板，而是在寻找样式：

```
<StackPanel x:Name="MyStackPanel">
    <StackPanel.Resources>
        <Style x:Key="ucStyle" TargetType="MyUserControl">
            <Setter Property="Background" Value="Azure" />
            <Setter Property="BorderThickness" Value="2" />
        </Style>
    </StackPanel.Resources>
</StackPanel> 
```

在代码中：

```
myUserControl myUserControl = new MyUserControl;
Style style = MyStackPanel.FindResource("ucStyle") as Style;
if(style != null)
{
    myUserControl.Style = style;
}
myStackPanel.Children.Add(myUserControl); 
```

或者，更短，但不太明显，使用隐式样式：

```
<StackPanel x:Name="MyStackPanel">
    <StackPanel.Resources>
        <Style TargetType="MyUserControl">
            <Setter Property="Background" Value="Azure" />
            <Setter Property="BorderThickness" Value="2" />
        </Style>
    </StackPanel.Resources>
</StackPanel> 
```

在代码中：

```
myUserControl myUserControl = new MyUserControl;
myStackPanel.Children.Add(myUserControl); 
```

# jquery - jquery ajax完成功能立即触发

> ID：12189875
> 
> 赞同：0
> 
> 时间：2012-08-30T04:26:32.737
> 
> 标签：jquery, asp.net, ajax

我有一个从未见过的奇怪情况。我有一个 jquery ajax，它调用一个执行 sql 查询的方法，构建 json 响应并将其写回响应流。

一旦执行了 ajax 调用，完整的函数就会成功触发，并带有空响应文本......我可以调试该方法并查看它是否正在构建响应并返回它。只是不确定这里有什么想法吗？ASP .net 如果有帮助的话。

```
 jQuery.ajax({
            url: 'Data/ServiceCalls.aspx?SelectRequestsWithDate=1&start_date=' + escape(jQuery("#request_start_date").val()) + '&end_date=' + escape(jQuery("#request_end_date").val()) + "'",
            type: "POST",
            dataType: "json",
            success: function (jsonresponse, stat) {

                if (stat === "success") {
                    var thegrid = jQuery("#grid_requests")[0];
                    var jsonObject = eval('(' + jsonresponse.responseText + ')');
                    thegrid.addJSONData(jsonObject);
                    jsonresponse = null;
                    thegrid = null;
                }
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:36:03.540

当您使用 POST 时，您可以尝试将数据作为 POST 值发送，而不是作为 GET 将其附加到您的 url，例如：

```
jQuery.ajax({
   url: 'Data/ServiceCalls.aspx",
   type: "POST",
   dataType: "json",
   data : {"SelectRequestsWithDate" : 1"...},
   ...... 
```

或者尝试使用 GET 作为你的类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:53:08.137

如果要调试，只需将成功回调函数移至单独的回调函数即可：

```
jQuery.ajax({
            url: 'Data/ServiceCalls.aspx?SelectRequestsWithDate=1&start_date=' + escape(jQuery("#request_start_date").val()) + '&end_date=' + escape(jQuery("#request_end_date").val()) + "'",
            type: "GET",
            dataType: "json",
            success: callback
        });

function callback (jsonresponse, stat) {

                if (stat === "success") {
                    var thegrid = jQuery("#grid_requests")[0];
                    var jsonObject = eval('(' + jsonresponse.responseText + ')');
                    thegrid.addJSONData(jsonObject);
                    jsonresponse = null;
                    thegrid = null;
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:40:52.573

我感谢你的所有建议。问题似乎是我在 jqgrid 内部进行了 ajax 调用。无论出于何种原因，它都会立即触发成功功能。我将它移到网格之外，一切都开始工作了。

不是最好的答案，但也许它会帮助别人。

布莱克

# jquery-ui - 每次单击时如何加载 Jquery 选项卡内容？

> ID：12189879
> 
> 赞同：0
> 
> 时间：2012-08-30T04:27:03.607
> 
> 标签：jquery-ui

我在我的 jsp 页面中有 3 个作为选项卡的链接。每个链接都进入一个 servlet 并获取数据。但是，当我在 IE-7 中尝试相同的操作时，我看不到每次单击选项卡时都会加载选项卡内容。

当我在 Firefox 中尝试相同的页面时，我看到每次单击选项卡时该页面都会动态加载。有人可以帮助我如何使其在 IE 上运行。所有这些链接都从 3 个不同的 servlet 获取数据 谢谢！

我正在使用 jquery-1.7.2、jquery-ui-1.8.22 并使用 Le_Frog 主题。

我的标签代码：

```
$("#main").tabs({
cache: false,
spinner: "Processing"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:07:46.040

我添加了以下代码，它工作正常。

```
$("#main").tabs({
cache: false,
spinner: "Retrieving data...",
ajaxOptions: { async: false,cache:false }

}); 
```

# python - 带烧杯的python瓶.middleware

> ID：12189883
> 
> 赞同：0
> 
> 时间：2012-08-30T04:28:22.330
> 
> 标签：python, bottle, beaker

我想将 python beaker.middleware 与瓶子 mvc 集成。这个（https://github.com/cavillingelite/bottle-mvc-mod_wsgi）是瓶子微框架作为MVC的配置版本。我可以运行这个（http://bottlepy.org/docs/dev/recipes.html）编码，但不知道如何将它与瓶子 MVC 集成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-21T19:34:24.340

你可能想多了。如果您将烧杯作为中间件加载，那么会有一个 request.environ.get('beaker.session') 字典，其作用类似于烧杯的接口。

我会设置一个用户类，在安全路由上使用登录装饰器，然后在渲染模板之前加载用户对象。在用户对象中，您可以执行以下操作：

```
self.session = request.environ.get('beaker.session')
self.__dict__.update(self.session) 
```

现在只需调用 user.key 将导致在烧杯会话中保存任何内容。如果您在烧杯配置中打开了自动保存，那么您只需将值分配给 self.session 字典，它就会将它们存储在烧杯会话中。

这真的很容易。我目前正在使用烧杯/瓶子/redis，效果很好。

# java - 更改内容辅助 Eclipse 的顺序以进行 android 开发

> ID：12189884
> 
> 赞同：4
> 
> 时间：2012-08-30T04:28:22.667
> 
> 标签：java, android, eclipse, content-assist

我正在使用 Eclipse 4.2 开发一个 Android 应用程序。我几乎按照我的意愿设置了内容辅助。但是，例如，当我开始输入 int 以创建 Java int 变量时，内容辅助中的 Android.R.Integer 条目是主要条目。
我有相关性设置的内容辅助。这只是一个烦恼，因为每次我想创建一个 int 变量时，我都必须按 Esc 或按 Enter 并从类型末尾删除“eger”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-05T13:29:15.030

这里发布的解决方案都没有真正起作用，所以我所做的就是去

**Java** ->**外观**->**类型过滤器**

并添加 *** *int* ***（是的，它是一个星号，后面是*int*，然后是另一个星号）。

您刚刚添加的过滤器旁边有一个复选框，请确保选中它。

问题解决了（终于！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:02:22.027

您可以使用 Preferences->Java->Appearance->Type Filters 过滤掉您想要忽略的建议。我想知道为什么您真的需要内容辅助来创建一个 int 变量，只需键入它会更容易。但如果你真的想要，你可以输入整数值，然后使用 Ctrl-2-L 快捷键来创建局部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T14:37:02.567

在 Java->外观>类型过滤器中

点击添加

输入'int*' -> 点击确定。

然后当你输入 int 时，第一个是 int 而不是 integer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T04:06:26.927

克伦我在同一条船上。我将内容辅助设置为随每个字母自动激活，因为我发现这种方式非常有用，但遇到与您相同的 int(eger) 问题。

我想出了一些处理它的方法，并认为我会分享它们，以防你发现其中一种有用。

您可以使用类型过滤器，因为 ralph 建议工作得很好，当您真正想要整数时，您只是没有得到帮助，这没什么大不了的。

您可以将内容辅助延迟足够长的时间，以便您可以键入“int”并在它弹出之前输入，从而始终给您延迟。（在 Preferences->Java->Editor->Content Assist 中有一个自动激活延迟设置）

或者从自动激活触发器中删除“i”、“n”和“t”（再次在 Preferences->Java->Editor->Content Assist 中）。这是我目前正在尝试的方法，它似乎适用于所有内容，甚至是整数，让我不必输入“ger”:)。

# java - Maven 中的 Beans.xml

> ID：12189888
> 
> 赞同：0
> 
> 时间：2012-08-30T04:28:45.057
> 
> 标签：java

我对 Maven 很陌生，我有一个包含多个服务的项目。我们可以在 beans.xml 中使用多个 jaxws:endpoint。

例如：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jaxws="http://cxf.apache.org/jaxws"
xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

**<jaxws:endpoint id="accountSnapshot" implementor="AccountSnapshot" address="/AccountSnapshot" wsdlLocation="classpath:wsdl/ser/service/rs/AccountSnapshot/1.0/AccountSnapshot.wsdl">

<jaxws:endpoint id="accountSnapshot1" implementor="AccountSnapshot1" address="/AccountSnapshot" wsdlLocation="classpath:wsdl/ser/service/rs/AccountSnapshot1/1.0/AccountSnapshot1.wsdl">**

        <jaxws:properties>
            <entry key="schema-validation-enabled" value="false" />
        </jaxws:properties>

</jaxws:endpoint>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:12:56.577

是的，你当然可以在 beans.xml 中有多个 jaxws:endpoint 元素......但是，正如评论所暗示的，这个问题与 Maven 无关。

# java - 使用 Java 在 CentOS ec2 实例上进行 FTP

> ID：12189891
> 
> 赞同：0
> 
> 时间：2012-08-30T04:29:04.990
> 
> 标签：java, ftp, amazon-ec2, centos, filezilla

从我们的服务器（FileZilla，以被动模式设置）到部署在 CentOS ec2 实例上的 Web 应用程序的 FTP 传输出现问题。从实例中使用 wget 和 ftp 手动测试，我们能够进行身份验证、更改目录和获取文件。然而，我们的 ec2 部署的 webapp 并没有获取文件，尽管它确实成功地进行了身份验证和导航。我们应用程序中的 FTP 上传在我们的 LAN 上运行良好，并且还可以在外部进行测试（无线系绳上的开发笔记本电脑，没有 VPN）

作为其中的一部分，我们编写了更集中的单元测试，目前正在重现失败和成功的案例，这些案例是从 ec2（失败）和非 ec2（成功）部署的：

```
import org.junit.Test;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

public class FTPTest {

    @Test
    public void testFTPAccess() throws IOException {
        String fileUrl = "ftp://username:password@ftp.site.com/path/to/resource.txt";
        URL url = new URL(fileUrl);
        URLConnection uc = url.openConnection();
        InputStream is = uc.getInputStream();
        ByteArrayOutputStream out = new ByteArrayOutputStream(1024*10);
        com.google.common.io.ByteStreams.copy(is,out);
        System.out.println(new String(out.toByteArray()));
    }
} 
```

FileZilla 服务器日志文件通过登录、USER、PASS、CWD 是相同的，但在传输开始后会有所不同。

成功案例如下：

```
(000216) 8/28/2012 10:47:20 AM - (not logged in) (external IP)> Connected, sending welcome message...
(000216) 8/28/2012 10:47:20 AM - (not logged in) (external IP)> 220-FileZilla Server version 0.9.24 beta
(000216) 8/28/2012 10:47:20 AM - (not logged in) (external IP)> 220 Connected to server FTP!
(000216) 8/28/2012 10:47:20 AM - (not logged in) (external IP)> USER ftpUser
(000216) 8/28/2012 10:47:20 AM - (not logged in) (external IP)> 331 Password required for ftpUser
(000216) 8/28/2012 10:47:20 AM - (not logged in) (external IP)> PASS *********
(000216) 8/28/2012 10:47:20 AM - ftpUser (external IP)> 230 Logged on
(000216) 8/28/2012 10:47:20 AM - ftpUser (external IP)> TYPE I
(000216) 8/28/2012 10:47:20 AM - ftpUser (external IP)> 200 Type set to I
(000216) 8/28/2012 10:47:20 AM - ftpUser (external IP)> CWD DPS
(000216) 8/28/2012 10:47:20 AM - ftpUser (external IP)> 250 CWD successful. "/DPS" is current directory.
(000216) 8/28/2012 10:47:20 AM - ftpUser (external IP)> CWD DP276
(000216) 8/28/2012 10:47:20 AM - ftpUser (external IP)> 250 CWD successful. "/DPS/DP276" is current directory.
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> PASV ALL
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> 227 Entering Passive Mode (FTP Server IP4,190)
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> PASV
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> 227 Entering Passive Mode (FTP Server IP4,191)
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> RETR sales.txt
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> 150 Connection accepted
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> 226 Transfer OK
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> QUIT
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> 221 Goodbye
(000216) 8/28/2012 10:47:21 AM - ftpUser (external IP)> disconnected. 
```

失败案例：

```
(000217) 8/28/2012 11:25:11 AM - (not logged in) (ec2 Instance IP)> Connected, sending welcome message...
(000217) 8/28/2012 11:25:11 AM - (not logged in) (ec2 Instance IP)> 220-FileZilla Server version 0.9.24 beta
(000217) 8/28/2012 11:25:11 AM - (not logged in) (ec2 Instance IP)> 220 Connected to server FTP!
(000217) 8/28/2012 11:25:11 AM - (not logged in) (ec2 Instance IP)> USER ftpUser
(000217) 8/28/2012 11:25:11 AM - (not logged in) (ec2 Instance IP)> 331 Password required for ftpUser
(000217) 8/28/2012 11:25:11 AM - (not logged in) (ec2 Instance IP)> PASS *********
(000217) 8/28/2012 11:25:11 AM - ftpUser (ec2 Instance IP)> 230 Logged on
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> TYPE I
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> 200 Type set to I
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> CWD DPS
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> 250 CWD successful. "/DPS" is current directory.
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> CWD DP276
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> 250 CWD successful. "/DPS/DP276" is current directory.
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> EPSV ALL
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> 229 Entering Extended Passive Mode (|||1318|)
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> EPSV
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> 229 Entering Extended Passive Mode (|||1319|)
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> EPRT |1|ec2 internal IP|37245|
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> 200 Port command successful
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> RETR products.txt
(000217) 8/28/2012 11:25:12 AM - ftpUser (ec2 Instance IP)> 150 Opening data channel for file transfer.
(000217) 8/28/2012 11:25:23 AM - ftpUser (ec2 Instance IP)> 425 Can't open data connection. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:35:01.347

尝试在测试方法结束时调用 out.flush() 或 out.close()。似乎主线程正在死亡而没有将内容刷新到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:28:06.613

成功案例使用被动模式，而失败案例使用扩展被动模式。您可能很难使用纯 URLConnection 微调 FTP 连接。我强烈建议改用 java 客户端库，例如[Apache Commons Net](http://commons.apache.org/net/)。您将在主页上找到一个 FTP 示例。

# java - Android 在 TabActivity 之上推送新活动并返回

> ID：12189892
> 
> 赞同：0
> 
> 时间：2012-08-30T04:29:08.427
> 
> 标签：java, android

我有一个问题，我一直在寻找几天的答案，但没有运气。

因此，具体而言，我在 TabActivity 中有 TabActivity，在其中有 listview（我将整个屏幕称为“主屏幕”）。该列表视图是从我的数据库发送的数据中填充的。单击列表视图的项目后，我启动了一个活动，但在退出该活动并返回主屏幕后，重新创建了列表视图，我想知道是否有办法停止重新创建。

我需要重写哪种方法来简单地开始和完成活动而不破坏主屏幕？

编辑 -

我没有将 FLAG_ACTIVITY_CLEAR_TOP 附加到任何活动

# sql-server - 连接到在 Mac 上的 Parallels 上运行的 SQL Server

> ID：12189894
> 
> 赞同：1
> 
> 时间：2012-08-30T04:29:16.243
> 
> 标签：sql-server, macos, parallels

我正在运行安装了并行程序的 MAC。我在 Parallels 上安装了 Windows 7 Pro，在 Windows 7 上安装了 SQLServer Express 2012。

我正在尝试从 Mac OS 连接到 SQL Server 数据库，但没有任何运气。

我[在这里关注了这篇文章](https://stackoverflow.com/questions/11278114/enable-remote-connections-for-sql-server-express-2012)，但仍然无法连接。所以我认为这可能与它在虚拟机中运行有关？

尝试连接时收到以下错误：

```
ERROR: An error occurred while trying to make a connection to
the database: 

JDBC URL: jdbc:jtds:sqlserver://10.211.55.4:1433;appName=RazorSQL;ssl=request;useCursors=true

Login
timed
out. 
```

我能够ping通IP地址。

有没有人设置这个？您可以提出任何技巧或建议吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:54:19.233

原来是 Windows 7 上的防火墙。一旦我创建了一个规则以允许端口 1433 上的流量通过，我就能够正常连接。

这是由

1.  打开“具有高级安全性的 Windows 防火墙”。
2.  选择“入站规则”>“新规则”。
3.  选择“端口”作为规则类型，然后输入 1433 作为允许的端口号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:34:15.067

您必须更改 Parallels 的默认行为以使用 NAT，并使用专用 IP（在 10.xxx 范围内以避免 IP 与您自己的网络冲突！），然后连接到此 IP。

# ruby - 具有超时和捕获输出的分叉子进程

> ID：12189904
> 
> 赞同：9
> 
> 时间：2012-08-30T04:30:22.040
> 
> 标签：ruby, linux, windows, process, stdout

假设我有一个像下面这样的函数，我如何捕获 Process.spawn 调用的输出？如果它花费的时间超过指定的超时时间，我也应该能够终止该进程。

请注意，该功能还必须是跨平台的（Windows/Linux）。

```
def execute_with_timeout!(command)
  begin
    pid = Process.spawn(command)     # How do I capture output of this process?
    status = Timeout::timeout(5) {
      Process.wait(pid)
    }
  rescue Timeout::Error
    Process.kill('KILL', pid)
  end
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T17:36:27.087

您可以使用`IO.pipe`并告诉`Process.spawn`使用重定向的输出，而无需外部 gem。

当然，只能从 Ruby 1.9.2 开始（而且我个人推荐 1.9.3）

以下是[Spinach BDD](http://codegram.github.com/spinach/)在内部用于捕获 out 和 err 输出的简单实现：

```
# stdout, stderr pipes
rout, wout = IO.pipe
rerr, werr = IO.pipe

pid = Process.spawn(command, :out => wout, :err => werr)
_, status = Process.wait2(pid)

# close write ends so we could read them
wout.close
werr.close

@stdout = rout.readlines.join("\n")
@stderr = rerr.readlines.join("\n")

# dispose the read ends of the pipes
rout.close
rerr.close

@last_exit_status = status.exitstatus 
```

原始来源在[features/support/filesystem.rb](https://github.com/codegram/spinach/blob/master/features/support/filesystem.rb#L34-68)

强烈建议您阅读 Ruby 自己的[Process.spawn](http://rubydoc.info/stdlib/core/1.9.3/Process.spawn)文档。

希望这可以帮助。

PS：我将超时实现作为作业留给你;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T05:28:51.433

[我在此处](http://www.ruby-forum.com/topic/104941#234810)的 Ruby 论坛上遵循了 Anselm 的建议。

该功能如下所示 -

```
def execute_with_timeout!(command)
  begin
    pipe = IO.popen(command, 'r')
  rescue Exception => e
    raise "Execution of command #{command} unsuccessful"
  end

  output = ""
  begin
    status = Timeout::timeout(timeout) {
      Process.waitpid2(pipe.pid)
      output = pipe.gets(nil)
    }
  rescue Timeout::Error
    Process.kill('KILL', pipe.pid)
  end
  pipe.close
  output
end 
```

这可以完成工作，但我宁愿使用包装此功能的第三方 gem。有人有更好的方法吗？我已经尝试过[Terminator](https://github.com/jeremyd/terminator)，它完全符合我的要求，但它似乎不适用于 Windows。

# c# - ASP.Net 和 Console 的执行区别

> ID：12189910
> 
> 赞同：0
> 
> 时间：2012-08-30T04:31:45.257
> 
> 标签：c#, asp.net-mvc-3, console-application, environment

我编写的 ASP.Net MVC3 应用程序有问题。该应用程序基本上由两个程序集组成，一个用于 UI 的 MVC3 应用程序和一个包含业务逻辑的基础结构 DLL。

基础设施程序集还引用了软件供应商提供的一些程序集，我认为这些程序集是封装了同一供应商提供的某些 COM 组件功能的互操作程序集。基础结构程序集对 Interop 程序集进行了多次调用，以执行我的应用程序的各种功能。

当我在我的开发机器（Win7）上的 Visual Studio 中运行 MVC 应用程序时，它运行良好。然后我将应用程序部署到预期的 Web 服务器（Win2k3R2 上的 IIS 6），它可以正常启动，并且大部分功能都可以正常工作。然而，对供应商程序集的调用之一失败，出现以下神秘异常：

```
System.Runtime.InteropServices.COMException: Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED))
   at SmarTeam.Std.Interop.SmarTeam.SmApplic.ISmObject.InsertEx2(ISmBehavior Behavior)
   at Baa.Smarteam.SecurityManager.Infrastructure.Smarteam.SmarteamAccountRepository.Create(UserAccountFromST smarteamAccount)
   --- End of inner exception stack trace ---
   at Baa.Smarteam.SecurityManager.Infrastructure.Smarteam.SmarteamAccountRepository.Create(UserAccountFromST smarteamAccount)
   at Baa.Smarteam.SecurityManager.Infrastructure.UserAccountRepository.Create(IDualSourceUserAccount userAccount)
   at Baa.Smarteam.SecurityManager.Infrastructure.UserManager.CreateUser(Int32 bemsId)
   at Baa.Smarteam.SecurityManager.Web.Controllers.UserController.ProcessAction(Nullable`1 id, String actionName, Func`2 action) 
```

奇怪的是，Interop 程序集中的所有其他调用都可以正常工作。只是这一个失败了。

我还在我们的测试环境中为供应商的应用程序将我的 MVC 应用程序部署到 Web 服务器上。据我所知，OS/IIS/.Net/etc。两台服务器上的配置相同。MVC 应用程序在此服务器上完美运行。

我已经尝试使用网络监视器和进程监视器进行调试，但没有出现任何明显的问题。

今天，我创建了一个控制台应用程序来练习基础结构程序集，从而将 ASP.Net 排除在外。控制台应用程序在我的开发机器和目标服务器上都能完美运行。

所以我的问题是：除了显而易见的，ASP.Net 和控制台应用程序之间的执行环境有什么区别？

我想到的一个是用户上下文。MVC 应用程序生成的日志的所有者是“网络服务”，但我显然是在自己的帐户下运行控制台应用程序。但是，这并不能解释两台服务器上的操作差异。

除了联系供应商（他们通常不太有帮助），我还应该看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:35:23.433

这几乎可以肯定是一个权限问题。

您的堆栈跟踪引用了

```
Baa.Smarteam.SecurityManager 
```

命名空间。正如您正确指出的那样，您的 MVC 应用程序作为 NETWORK SERVICE 运行（默认情况下），而您的控制台应用程序在您的登录帐户下运行（同样，默认情况下）。

如果在测试服务器上运行正常，那是因为运行“Baa”代码的必要权限已授予 NETWORK SERVICE，或者因为 MVC 应用程序*没有*在该机器上作为 NETWORK SERVICE 运行。

考虑“Baa”应用程序可能会尝试引用哪些安全资源（文件、注册表项等），并将工作服务器上这些资源的安全设置与发生故障的服务器上的设置进行比较。

# iphone - 以编程方式添加的按钮在情节提要中崩溃

> ID：12189911
> 
> 赞同：2
> 
> 时间：2012-08-30T04:31:46.363
> 
> 标签：iphone, objective-c, ios, uibutton, storyboard

我正在添加一个`UIScrollView`按钮`StoryBoard`

下面是我正在使用的代码。

```
-(void)addScrollView
{
    for(int i=0;i<[array count];i++)
    {
        UIScrollView *subScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 400, SUBSCROLLVIEW_WIDTH, SUBSCROLLVIEW_HEIGHT)];
        UITextView *txtVwDetail = [[UITextView alloc] initWithFrame:CGRectMake(342, 0, TEXTVIEW_WIDTH, TEXTVIEW_HEIGHT)];
        txtVwDetail.text = SAMPLE_STRING;
        [self addSubScrollView:subScrollView];
        [self.view addSubview:subScrollView];
        [self.view addSubview:txtVwDetail];
     }
}

-(void)addSubScrollView:(UIScrollView *)aSubScrollView
{
    for(int i=0;i<[array count];i++)
    {
        UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
        aButton.frame = CGRectMake(intBtnX, (aSubScrollView.frame.size.height - 80)/2, 50, 80);
        [aButton setImage:[UIImage imageNamed:[self.items objectAtIndex:i]] forState:UIControlStateNormal];
        **[aButton addTarget:self action:@selector(btnSubImageClicked) forControlEvents:UIControlEventTouchUpInside];**    
        aSubScrollView.contentSize = CGSizeMake(intScrollViewWidth, aSubScrollView.frame.size.height);
        [aSubScrollView addSubview:aButton];
    }
} 
```

在`addSubScrollView`方法中，我添加了 Button 及其崩溃的单击事件。

```
-(void)btnSubImageClicked
{
    NSLog(@"btnSubImageClicked");
} 
```

我的情况是

`MyMainViewController`是`sourceViewController`为我创建的`customSegue`，这是`UIStoryboardSegue`类

`MyMainViewController`有一个 UIView `PlaceHolderView` ，我在其中添加了`MydestinationViewContoller`这个 Scrollview 的 View

```
-(void)perform
{
    BrowseScreenVC *srcObj = (BrowseScreenVC *)[self sourceViewController];
    UIViewController *dstObj = (UIViewController *)[self destinationViewController];

    for(UIView *vw in srcObj.viewPlaceHolder.subviews)
    {
        [vw removeFromSuperview];
    }

    NSLog(@"dest : %@",dstObj.view);
    NSLog(@"destobj  :%@",dstObj);
    srcObj.currentViewController = dstObj;
    [srcObj.viewPlaceHolder addSubview:[dstObj.view retain]];

} 
```

更新

有了答案，我也必须换行 `srcObj.currentViewController = dstObj;`

至

`srcObj.addChildViewController = dstObj;`

让它工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:06:01.217

您必须按如下方式添加目标：

```
[aButton addTarget:self action:@selector(btnSubImageClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

`@selector()`，在这些大括号中，您必须提供要执行的方法。“：”表示该方法有一些参数。在这种情况下，参数将是调用该方法的按钮本身。

您必须实现您的方法，然后它的签名将如下所示

```
- (void)btnSubImageClicked:(id)sender{
// sender would be the button that is calling the method. you can use this object according to your requirements if you want. 

   // your code 
} 
```

如果你也想从其他地方调用这个方法，你可以通过传递 sender 参数 nil 来调用它。例如`[self btnSubImageClicked:nil];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:40:53.210

你的动作需要接受一个`(id) sender`参数，即使你没有使用它：

```
-(void)btnSubImageClicked:(id) sender
{
    NSLog(@"btnSubImageClicked");
} 
```

在`addSubScrollView`：

```
[aButton addTarget:self action:@selector(btnSubImageClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T04:42:07.113

按钮目标应该喜欢

```
-(void) btnSubImageClicked:(id)sender{} 
```

尝试这个。

更新：-

请更正您的代码，更改此行

```
 [aButton addTarget:self action:@selector(btnSubImageClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

现在工作我检查了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T04:53:16.000

代替

`UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];`

写这个，

`UIButton *aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];`

为了更好的练习，总是写这个，

```
-(void) btnSubImageClicked:(id)sender{} 
```

# php - CakePHP - 如何提交按钮并使页面保持在同一部分？

> ID：12189913
> 
> 赞同：0
> 
> 时间：2012-08-30T04:31:53.697
> 
> 标签：php, css, cakephp, html

我有一个表单，当我 sumbit 加载表单的新部分时，会发生页面加载并将我发送回页面顶部，因此我必须一直向下滚动到表单所在的位置。

有没有办法可以将页面保持在它所在的同一部分，或者让它加载到我显示的一个子标题文本标题旁边？

这是我显示的按钮：

```
echo $this->Form->submit("View Now"); 
```

但是我怎样才能让它加载到下面的这个子标题文本旁边，而不是回到页面顶部呢？

```
<h2><?php __("Information Results");?></h2> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:07:35.537

试试这个代码：

```
echo $this->Form->submit("View Now",array('id'=>'contact_btn'));
<div id='result'><?php __("Information Results");?></div>

<script>
$.ajax({data:$("#contact_btn").closest("form").serialize(),
    dataType:"html",
    success:function (data, textStatus)
    {$("#result").html(data);},
    type:"post",
    url:"\/yourproject\/controller\/action"
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:40:59.597

Ajax 是正确的方法，但您也可以使用锚点。例如，您可以使您的表单操作是这样的：

```
<?php echo $this->Form->create(
                               'YourModel', 
                               array(array('#'=>'subform')    
);?> 
```

然后在h2之上，你应该放：

```
<a name="subform"></a> 
<h2><?php __("Information Results");?></h2> 
```

提交表单时，它将准确定位在您想要的位置。但它是 Ajax 的替代品。我会用 Ajax 来做。

奖金（如果可以这样算的话）你的逻辑是相同的动作。

# objective-c - 从 RSS 提要中检索数据时，是否可以提取文本的实际正文？

> ID：12189915
> 
> 赞同：0
> 
> 时间：2012-08-30T04:32:00.950
> 
> 标签：objective-c, ios, rss

我找到了几个制作从 RSS 提要加载数据的 iphone 应用程序的教程，但它们只提取 URL，然后在 WebView 中从 Internet 加载页面。

但是，我宁愿能够从文章中提取正文和图片，这样我就可以用针对 iPhone 优化的设计自己布局内容。

这可能吗？

编辑：

我从另一个[问题](https://stackoverflow.com/questions/5638909/nsstring-stringwithcontentsofurl-is-deprecated-what-should-i-do)中找到了这段代码，根据我的解释，它应该将页面的源代码作为字符串返回。

```
NSError *error = nil;

NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSUTF8StringEncoding error:&error]; 
```

如果我使用它，解析包含正文和图片的代码的字符串，我应该能够得到我想要的。这会是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:17:22.243

是的，这在技术上是可行的。RSS 是 XML，因此请使用您喜欢的任何 XML 解析器来提取信息。真正的斗争将是使用您拥有的东西与设计要求的东西。但要开始，只需获取一些示例提要，然后使用您想尝试的任何解析器开始破解它们。NSXMLParser 是内置的，还有其他不错的第三方，比如 RaptureXML。

# java - Java：确定maven模块中每个java类的依赖项的工具

> ID：12189916
> 
> 赞同：0
> 
> 时间：2012-08-30T04:32:06.583
> 
> 标签：java, eclipse, maven, dependencies

我想知道这是否是一个微不足道的问题，我不知道。

在多模块 Maven 项目中，假设有一个“通用”模块。例如，有 5 个模块，其中 1 个模块是通用的。有没有办法确定其他4个模块是否依赖于公共模块类，即对于公共模块中的每个类，我想知道其他模块中的类共同依赖于该类？（实际上maven在这里并不重要）。eclipse本身有这个功能吗？

如果该工具提供图表表示，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:54:46.963

在 Eclipse 中，您可以简单地通过选择要检查的类并按 CTRL-SHIFT-G 来搜索工作区中的引用。在这种情况下，这意味着您必须打开多模块的所有模块。缺点是您需要为您想知道的每个课程都这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:24:32.347

据我所知，Maven 不能“按类”工作，就依赖项而言，模块是它的原子元素。

您可以使用`mvn dependency:tree`来获取每个模块的依赖关系，在 eclipse/intellij 企业版中，您可以使用图形表示结果，仅此而已。

基本上，您必须在编译时和运行时依赖项之间有所不同。

当然，如果您在某些类中具有“不满意”的编译时间依赖性，例如，使用 Logger 但在类路径中没有 log4j/其他相关库，您将在*类编译期间*收到错误，它的编译器的工作，不是行家的。

现在运行时依赖项更难跟踪，例如：如果您在某个容器内运行并且您在“提供”范围内定义您的 log4j 库依赖项，那么您依赖于容器，它将将该库带给您并且将负责所有类加载的东西。但是 Maven 如何知道容器内发生了什么？

所以，底线，你所要求的在 Maven 中是不可能的，我试图解释为什么:)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:10:25.630

我是开发人员之一，所以我并不公正，但我相信[Restructure101](http://structure101.com/products/index.php#/refactor)非常适合您的需求。将 RS101 指向根 POM，您将看到所有 POM 的依赖关系图，如下所示：

![在此处输入图像描述](../Images/db1fe87ed928a80ef24ca66234b1194f.png) 然后，您可以通过双击将任何项目展开到您想要的任何级别，将依赖关系从一个 pom 转移到另一个 pom。在这种情况下，我深入研究了 Maven-core 以发现 maven-compat 中的代码使用了什么：

![在此处输入图像描述](../Images/5e22674a98431653604a8c9e90647343.png)

您还可以使用 Restructure101 在 pom 之间重新组织类（例如创建/改进您提到的公共 pom），例如通过将类拖到新 pom 并查看对 pom 级别依赖项的影响。操作列表被导出到您的 IDE。

配套产品 Structure101 具有相关功能，值得一试，但我更喜欢 Restructure101 的描述。

# javascript - 如何使用 Javascript 获取相对 Xpath

> ID：12189918
> 
> 赞同：1
> 
> 时间：2012-08-30T04:32:13.050
> 
> 标签：javascript, xpath

**更新**：这个问题是尝试突出显示文本并将突出显示存储在数据库中以便以后加载的更大努力的一部分。

我正在关注此处使用的代码：[带有 JSON 的范围对象](https://stackoverflow.com/questions/9074091/range-object-with-json) 我正在尝试捕获用户选择的文本位置以存储在数据库中，然后在 ajax 调用上恢复。

首先，我想让我得到的 xpath 看起来像这样

```
endXPath: "/HTML[1]/BODY[1]/DIV[1]/DIV[5]/P[3]/text()[1]" 
```

看起来像这样

```
endXPath: "/DIV[5]/P[3]/text()[1]" 
```

其中第一个示例中的 DIV[1] 的 ID 为“content”。

我相信这条路来自这个功能

```
function makeXPath (node, currentPath) {
  /* this should suffice in HTML documents for selectable nodes, XML with namespaces needs     more code */
  currentPath = currentPath || '';
  switch (node.nodeType) {
    case 3:
    case 4:
      return makeXPath(node.parentNode, 'text()[' + (document.evaluate('preceding-sibling::text()', node, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null).snapshotLength + 1) + ']');
    case 1:
      return makeXPath(node.parentNode, node.nodeName + '[' + (document.evaluate('preceding-sibling::' + node.nodeName, node, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null).snapshotLength + 1) + ']' + (currentPath ? '/' + currentPath : ''));
    case 9:
      return '/' + currentPath;
    default:
      return '';
  }
} 
```

从我到目前为止所读到的内容来看，我猜我需要更改 contextNode？但我也不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T00:56:37.770

有一个 JQuery 插件可以完成这个调用[Annotator](http://okfnlabs.org/annotator/)。它已经内置了所有内容来突出显示、存储突出显示并添加关于突出显示的评论。

# ruby-on-rails-3 - 如何识别瘦服务器进程？

> ID：12189922
> 
> 赞同：0
> 
> 时间：2012-08-30T04:32:31.747
> 
> 标签：ruby-on-rails-3, thin

当启动多个运行 Rails 3 的瘦服务器时，有没有办法在代码中区分它们？

例如，如果我有这样的配置：

```
port: 4000
pid: tmp/pids/thin.pid
servers: 2 
```

有没有办法判断代码是否在端口 4000 或 4001 上的进程上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:02:56.467

您可以分别启动 2 个服务器

精简启动 -p 4000 精简启动 -p 4001

:D

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-18T19:08:02.353

假设您发布的代码是 config/thin-config.yml 的来源

要使用该参数启动服务器，只需执行以下操作：

```
thin start -C config/thin-config.yml 
```

Yml 文件是配置服务器的最佳方式，但如果您不想使用它们，您可以这样做：

```
thin start -P tmp/pids/thin.pid -p 4000 -s 2 
```

# php - php pdo lastInsertId() 作为第二个表的输入

> ID：12189929
> 
> 赞同：0
> 
> 时间：2012-08-30T04:33:15.727
> 
> 标签：php, pdo

我感谢所有的帮助！！我是 PDO 的新手，当我对 2 个不同的表执行插入操作时遇到问题。我在第二个表（fk_employee）中有一个字段，我想要第一个查询（插入）中最后记录的 id。当我运行查询时，我收到以下错误：

`Query failed: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '; 'address1', 'address2', 'city', 'TN', '77777', ' at line 10`

这是我的方法：

```
 function completeCallback()
    {
        // finally, all form data is valid and the user has confirmed they
        // want to proceed. Now we do all the final processing here.

        $name_title = $this->getValue('name_title');
        $emp_lastname = $this->getValue('emp_lastname');
        $emp_suffix = $this->getValue('emp_suffix');
        $emp_firstname = $this->getValue('emp_firstname');
        $emp_middlename = $this->getValue('emp_middlename');
        $emp_prefername = $this->getValue('emp_prefername');
        $address1 = $this->getValue('address1');
        $address2 = $this->getValue('address2');
        $city = $this->getValue('city');
        $state = $this->getValue('state');
        $postal_code = $this->getValue('postal_code');
        $country = $this->getValue('country');

      $conn = parent::connect();
      $sql = "INSERT INTO " . TBL_EMPLOYEES . " (
                name_title,
                emp_lastname,
                emp_firstname,
                emp_suffix,
                emp_prefername,
                emp_middlename
              ) VALUES (
                :name_title,
                :emp_lastname,
                :emp_firstname,
                :emp_suffix,
                :emp_prefername,
                :emp_middlename
              )";

      try {
        $st = $conn->prepare( $sql );
        $st->bindValue( ":name_title", $name_title, PDO::PARAM_STR );
        $st->bindValue( ":emp_lastname", $emp_lastname, PDO::PARAM_STR );
        $st->bindValue( ":emp_firstname", $emp_firstname, PDO::PARAM_STR );
        $st->bindValue( ":emp_suffix", $emp_suffix, PDO::PARAM_STR );
        $st->bindValue( ":emp_prefername", $emp_prefername, PDO::PARAM_STR );
        $st->bindValue( ":emp_middlename", $emp_middlename, PDO::PARAM_STR );
        if($st->execute()){
            $lastInsertID = $conn->lastInsertId();
        }
      $sql = "INSERT INTO " . TBL_EMPLOYEEADD . " (
                fk_employee,
                address1,
                address2,
                city,
                state,
                postal_code,
                country
              ) VALUES (
                :fk_employee;
                :address1,
                :address2,
                :city,
                :state,
                :postal_code,
                :country
              )";

        $st = $conn->prepare( $sql );
        $st->bindValue( ':fk_employee', $lastInsertID, PDO::PARAM_INT );
        $st->bindValue( ':address1', $address1, PDO::PARAM_STR );
        $st->bindValue( ':address2', $address2, PDO::PARAM_STR );
        $st->bindValue( ':city', $city, PDO::PARAM_STR );
        $st->bindValue( ':state', $state, PDO::PARAM_STR );
        $st->bindValue( ':postal_code', $postal_code, PDO::PARAM_STR );
        $st->bindValue( ':country', $country, PDO::PARAM_STR );
        if($st->execute()){
            $lastInsertID = $conn->lastInsertId();
        }
      } catch ( PDOException $e ) {
        parent::disconnect( $conn );
        die( "Query failed: " . $e->getMessage() );
      }
    } 
```

这是我的两张桌子：

```
CREATE TABLE IF NOT EXISTS `ds_employee` (
  `id_employee` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name_title` varchar(20) DEFAULT NULL,
  `emp_lastname` varchar(100) NOT NULL DEFAULT '',
  `emp_suffix` varchar(50) DEFAULT NULL,
  `emp_firstname` varchar(100) NOT NULL DEFAULT '',
  `emp_prefername` varchar(100) NOT NULL DEFAULT '',
  `emp_middlename` varchar(100) NOT NULL DEFAULT '',
  PRIMARY KEY (`id_employee`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=19 ; 
```

表#2

```
CREATE TABLE IF NOT EXISTS `ds_employee_address` (
  `id_employee_address` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `fk_employee` int(10) unsigned NOT NULL,
  `address1` varchar(100) NOT NULL DEFAULT '',
  `address2` varchar(100) NOT NULL DEFAULT '',
  `city` varchar(100) NOT NULL DEFAULT '',
  `state` varchar(100) NOT NULL DEFAULT '',
  `postal_code` varchar(100) NOT NULL DEFAULT '',
  `country` varchar(100) NOT NULL DEFAULT '',
  PRIMARY KEY (`id_employee_address`),
  UNIQUE KEY `fk_employee` (`fk_employee`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 
```

我确信这很简单，但我一直在敲我的头，无法弄清楚！

谢谢，参考

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:43:50.247

如下更改该查询。

```
$sql = "INSERT INTO " . TBL_EMPLOYEEADD . " (
                fk_employee,
                address1,
                address2,
                city,
                state,
                postal_code,
                country
              ) VALUES (
                :fk_employee,
                :address1,
                :address2,
                :city,
                :state,
                :postal_code,
                :country
              )"; 
```

# wordpress - 不同自定义帖子类型的不同缩略图大小，并仅为特色图像创建缩略图

> ID：12189931
> 
> 赞同：3
> 
> 时间：2012-08-30T04:33:37.200
> 
> 标签：wordpress, wordpress-theming

我有一个带有一些自定义帖子类型的 wordpress 网站。每个自定义帖子类型都显示一个列表页面，基本上显示一个特色图像和一个标题，然后您可以点击进入包含更多图像的详细信息页面。

我只需要调整上传的“特色图片”的大小。如果上传的图像不用作特征图像，我不需要它的缩略图。此外，每种自定义帖子类型都会显示不同大小的特征图像。

所以，我想做的是说：

a) 只为特征图像创建缩略图

b）为某些帖子类型创建某些大小，而不是为其他类型。

这可能吗？目前，每张上传的图片都有 5 个缩略图大小，我的 wp-content 目录比它需要的要大得多！

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T16:23:55.363

好的，我找到了使用 intermediate_image_sizes 过滤器挂钩的解决方案。将此代码放在您的functions.php 中，并将“post_type”和“img_size_name”替换为您的帖子名称和所需的图像大小。

```
add_filter( 'intermediate_image_sizes', function($sizes){
    $type = get_post_type($_REQUEST['post_id']);
    foreach($sizes as $key => $value){
        if($type=='post_type'  &&  $value != 'img_size_name'){
            unset($sizes[$key]);
        }
    }
    return $sizes;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T11:21:04.887

为避免浪费空间，最好的解决方案是在页面模板中使用 phpthumb ( [http://phpthumb.sourceforge.net/ )。](http://phpthumb.sourceforge.net/)

# local-storage - 简单 Parse.com 本地存储解决方案

> ID：12189933
> 
> 赞同：2
> 
> 时间：2012-08-30T04:34:02.943
> 
> 标签：local-storage, parse-platform

有没有人有一个很好的解决方案来存储`Parse.com objects`到`Javascript`项目的 localStorage 中？

我遇到的问题是，在转换 时`object to JSON`，我们丢失了对象上的 id。这是因为 id in`Parse.com objects`没有存储在属性中。
给我一些提示。
提前致谢。

更新我的小例子

```
var Something = Parse.Object.extend("Something");
var something = new Something();
something.set("attribute1", "attribute1");
something.save(null, {
        success: function(obj) {
            something.fetch({
                success: function(obj) {
                    console.log("object:"); console.log(obj); 
                    console.log("json:");     console.log(JSON.stringify(obj));
                },
            })
        },
    }) 
```

这给出了这个输出：

```
object: appmob.js:1563
d.hasOwnProperty.f
_changing: false
_escapedAttributes: Object
_existed: true
_hasData: true
_hashedJSON: Object
_opSetQueue: Array[1]
_pending: Object
_previousAttributes: Object
_saving: false
_serverData: Object
_silent: Object
attributes: Object
changed: Object
cid: "c0"
createdAt: Mon Sep 03 2012 15:43:50 GMT+1000 (EST)
id: "e419YJmhR5"
updatedAt: Mon Sep 03 2012 15:43:50 GMT+1000 (EST)
__proto__: c 
```

** 有 id。

```
json: 
{"attribute1":"attribute1","attribute2":"attribute2"} 
```

** 没有 id。

这与这个 stackoverflow 问题 [Backbone model .toJSON() does not render all attributes to JSON 有关](https://stackoverflow.com/questions/10262498/backbone-model-tojson-doesnt-render-all-attributes-to-json)

所以我想知道将 JSON 字符串存储到本地存储中的最简单方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:09:53.863

您可能有兴趣了解 Parse 对其 JS SDK 所做的更新：

v1.1.10 — 2012 年 11 月 13 日

Parse.Object 的扩展 JSON 序列化：在 Parse.Object 上调用 JSON.stringify() 现在将在输出中包含默认属性“objectId”、“createAt”和“updatedAt”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:57:36.457

好的，所以据我所知（参见上面的评论），用于 Parse 的本机 JS API 假设您只想序列化对象的属性（即核心数据）而不是实际的元数据，包括 ID、created 等。因为它们真的希望你只在他们的系统上存储东西，这是有道理的。但是，您可以编写自己的代码来自己处理。例如，下面的这个方法获取两个元数据键（id 和 createdAt，还有更多，但我只是在测试）并为核心属性创建一个名为“数据”的键。

```
function serializeParseObject(pob) {
  var ob = {};
  ob.id = pob.id;
  ob.createdAt = pob.createdAt;
  ob.data = pob.attributes;
  return JSON.stringify(ob);
} 
```

我测试了一个示例结果对象，它工作正常。同样，尽管您可能希望添加其他元数据键以确保完整性。（或者也许你只关心 id。）

# ios4 - sqlite3_step 给出错误

> ID：12189934
> 
> 赞同：1
> 
> 时间：2012-08-30T04:34:09.713
> 
> 标签：ios4, sqlite, ios5.1

我有一个在 iOS 4 中创建的项目。但我必须迁移到 iOS 5.1。当我在 iOS 5.1 中运行它时，它会在此处出现错误。

`

```
 if (sqlite3_prepare_v2(database,query_stmt, -1, &statement, NULL) == SQLITE_OK){

        NSLog(@"2nd if");

        while(sqlite3_step(statement) == SQLITE_ROW){

            NSLog(@"error: %s\n",sqlite3_errmsg(database));` 
```

此错误消息被打印为未知错误但是有一个类似的代码来加载 UITableView。它可以正常工作。这已经在 iOS 4 上运行，没有任何问题。谁能帮我

谢谢

# java - 在java中选择随机颜色

> ID：12189939
> 
> 赞同：0
> 
> 时间：2012-08-30T04:34:34.043
> 
> 标签：java, iphone, objective-c, xcode, porting

我有一个 iPhone 版本的应用程序，它使用一些代码来设置颜色。

```
((rand() % 176) * 80) / 256.0f 
```

我是新手，`objective c`所以我无法弄清楚这是如何工作的。我想在`Java`.

在 Java 中，我们通常使用`Random()`. 我想如何使用来实现上述功能`Random r = Random();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T05:01:29.780

在 Android 中，我首先会初始化一个变量`rand = new Random()`。然后我会把你的表达写成：

```
rand.nextInt(176) / 3.2f 
```

（请注意。）每次我需要一种新颜色时，`80 / 256.0 == 1 / 3.2`我只会为`rand`一次分配一个值并重用同一个对象。`Random`

经过一些粗略的工作，您的原始代码似乎只是一种计算均匀分布在 0 和 55.0f 之间的随机浮点值的奇特方式。因此，做同样事情的一个更简单的方法是：

```
rand.nextFloat(55) 
```

唯一的缺点是它与原始代码不太相似（尽管它的行为相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T04:45:33.933

Java中等效的单行代码是：

```
((new Random().nextInt() % 176) * 80) / 256.0f; 
```

更多关于[JavaDoc上的随机类](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)

`Random`显然你不应该每次都创建一个新实例。

```
Random r = new Random();
// call r.nextInt() each time you need a new random integer
double color = ((r.nextInt() % 176) * 80) / 256.0f; 
```

# python - 用 if 语句查找和替换一行中的字符串

> ID：12189943
> 
> 赞同：0
> 
> 时间：2012-08-30T04:35:05.457
> 
> 标签：python, string, if-statement, replace

我正在尝试解析特定的文本文件。我正在尝试打开文本文件并逐行询问是否存在特定字符串（在以下示例中，大括号中存在数字 01），然后向前向后操作特定字符串，或保留它相同。这是那个示例，其中一行任意命名为“go”...（完整文件中的其他行具有类似的格式，但有`{01}, {00}`等...

```
go = 'USC_45774-1111-0     <hkxhk> {10} ; 78'

go = go.replace(go[22:24],go[23:21:-1])

>>> go
'USC_45774-1111-0     <khxkh> {10} ; 78' 
```

我试图`"hk" (go[22:24])`通过用相同的字母但向后替换它来操纵第一个。`(go[23:21:-1)`我想要看到`khxhk`，但正如你所看到的，我得到的结果是两者都倒退到`khxkh`.

我也有为每一行执行特定 if 语句的问题。许多没有`{01}`的行被操纵，好像它们是......

```
with open('c:/LG 1A.txt', 'r') as rfp:
with open('C:/output5.txt', 'w') as wfp:
    for line in rfp.readlines():
        if "{01}" or "{-1}" in line:
            line = line.replace(line[25:27],line[26:24:-1])   
            line = line.replace("<"," ")
            line = line.replace(">"," ")
            line = line.replace("x","   ")
            wfp.write(line)

        elif "{10}" or "{1-}" in line:
            line = line.replace(line[22:24],line[23:21:-1])   
            line = line.replace("<"," ")
            line = line.replace(">"," ")
            line = line.replace("x","   ")
            wfp.write(line)

        elif "{11}" in line:
            line = line.replace(line[22:27],line[26:21:-1])   
            line = line.replace("<"," ")
            line = line.replace(">"," ")
            line = line.replace("x","   ")
            wfp.write(line)

    wfp.close() 
```

我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:46:49.333

string`replace`方法不会按位置替换字符，它会用它们是什么字符来替换它们。

```
>>> 'apple aardvark'.replace('a', '!')
'!pple !!rdv!rk' 
```

所以在你的第一种情况下，你告诉用“kh”替换“hk”。它不“知道”您只想替换其中一个事件；它只知道你想用“kh”替换“hk”，所以它会替换所有出现的地方。

您可以使用`count`参数来替换来指定您只想替换第一次出现：

```
>>> go = 'USC_45774-1111-0     <hkxhk> {10} ; 78'
... go.replace(go[22:24],go[23:21:-1],1)
'USC_45774-1111-0     <khxhk> {10} ; 78' 
```

但请注意，这将始终替换第*一次*出现，不一定是您指定的字符串中的位置。在这种情况下，我想这就是您想要的，但它可能无法直接用于其他类似任务。（也就是说，没有办法按原样使用此方法替换第二个或第三个出现；只能替换第一个，或前两个，或前三个等。替换第二个或第三个发生你需要做更多的事情。）

至于你问题的第二部分，你误解了什么`if "{01}" or "{-1}" in line`意思。通俗地说，就是说`if "{01}" or if "{-1}" in line`。由于`if "{01}"`始终为真（即字符串“{01}”不是假值），因此整个条件始终为真。你想要的是`if "{01}" in line or "{-1}" in line"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:44:55.547

我不知道 Python 是什么，但你的问题是每天至少在这里发布几次。

```
if "{01}" or "{-1}" in line: 
```

这并不像你认为的那样。它问，“是`"{01}"`真的”吗？因为它是一个非零长度的字符串，所以它是。因为`or`短路，其余的条件没有被测试，因为第一个参数为真。因此，您的`if`语句的主体总是被执行。

换句话说，Python 的计算就像你这样写：

```
if ("{01}") or ("{-1}" in line): 
```

你想要这样的东西：

```
if "{01}" in line or "{-1}" in line: 
```

或者，如果您有很多类似的情况：

```
if any(x in line for x in ("{01}", "{-1}")): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:45:28.483

您可以使用 count 参数`replace()`：

```
'USC_45774-1111-0     <hkxhk> {10} ; 78'.replace("hk","kh",1) 
```

对于第二个问题，您需要将条件更改为：

```
if "{01}" in line or "{-1}" in line:
    ... 
```

# android - android 浏览器是否支持来自任何自定义服务器的自动消息处理？

> ID：12189946
> 
> 赞同：0
> 
> 时间：2012-08-30T04:35:31.133
> 
> 标签：android, browser, notifications, message

是否可以通过任何渠道向 Android 设备发送消息，从而导致在 Android 通知栏上发布通知。当用户单击此项目时，会在浏览器中打开一个 URL（在收到的消息中提到）。诀窍是，我不想在 android 设备上安装任何客户端应用程序。

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:02:29.647

AFAIK 这是不可能的。Android 浏览器不支持在您导航到网站时发布通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:58:35.467

不，这是不可能的！没有这样的功能作为android的一部分。

# .net - 我的项目的已编译程序集的物理位置是什么？

> ID：12189947
> 
> 赞同：1
> 
> 时间：2012-08-30T04:35:50.323
> 
> 标签：.net, frameworks

我是初学者，试图了解什么是 dotnet net 框架的基础知识。我遇到了装配的概念。我从 [http://msdn.microsoft.com/en-us/library/hk5f40ct%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/hk5f40ct%28VS.71%29.aspx)搜索了解？

1.据我了解是指当我创建一个项目并编译它时，编译出来的代码就是我们所说的程序集？这里我的意思是当我编译我的代码时，“调试”文件夹是在我的 bin 目录中创建的。它住在哪里？

1.  有人可以帮我知道我如何看待组装吗？我的意思是在我的例如 Windows 应用程序项目中。

2.  我读的程序集可以是 .dll 或 .exe 是不是当我创建类库项目时会在编译后形成 .dll 程序集，而当我创建例如窗口、控制台、Web 应用程序项目等时会在编译后形成 .exe 程序集。我理解正确吗？

3.  在理解框架时，我发现 CIL 代码位于 Common Language Infrastructure Assembly 中。 [http://en.wikipedia.org/wiki/Assembly_(CLI)](http://en.wikipedia.org/wiki/Assembly_(CLI))？是 CLI 程序集本身的程序集，它维护或用于我们创建的应用程序程序集。我说的是我在问题 1,2 和 3 中提出的集会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:11:56.907

编译后，默认情况下，程序集位于项目下方的 /bin/Debug 或 bin/Release 文件夹中，具体取决于配置。

IE

c:\YourProject\bin\Debug\YourProject.dll

c:\YourProject\bin\Release\YourProject.dll

# c# - 如何提供关闭功能以从 StackPanel 中删除项目？

> ID：12189950
> 
> 赞同：0
> 
> 时间：2012-08-30T04:36:13.333
> 
> 标签：c#, wpf, stackpanel

我有一个 UserControl，我需要在运行时（根据用户的操作）继续添加到 StackPanel。我想在 StackPanel 中的每个项目的右上角有一个关闭按钮（一个小的“x”）。

我可以这样做：将我的 UserControl 添加到某个具有在鼠标悬停时发光的“x”按钮的面板中，单击该按钮时会从 StackPanel 中删除该项目。

但是，我正在寻找更好的解决方案来解决这个问题。就像有没有提供类似功能的控件？

我正在寻找 TileView。我所需要的只是一行 Tiles，它会根据用户输入不断添加，并且能够删除“Tile”。每个图块都将包含我的 UserControl。

请告诉我，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:05:43.900

您可以使用 tileview，但 Grid 也可以在这里工作，您可以将用户控件添加到一个单元格，在其他单元格上您可以提供一个关闭按钮，然后在关闭按钮上单击您可以从网格中删除该行，
如果您要添加多个用户控件比 Grid 可以轻松维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:53:26.580

您可以使用 ItemsControl 轻松完成此操作。把它想象成一个没有选择的 ListBox。稍微修改一下：

```
 <ItemsControl HorizontalAlignment="Center" VerticalAlignment="Center">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border Padding="4" Background="CornflowerBlue">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <Button Content="Close" HorizontalAlignment="Right"/>

                        <Grid Margin="4" Grid.Row="1">
                           <!-- put your usercontrol here -->
                        </Grid>

                    </Grid>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>

        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl> 
```

# jquery - 通过 jquery 设置 type="file" 的值

> ID：12189953
> 
> 赞同：7
> 
> 时间：2012-08-30T04:36:25.220
> 
> 标签：jquery, html

> **笔记：**
> 
> 下面的答案反映了 2009 年旧版浏览器的状态。现在，您实际上可以在 2017 年使用 JavaScript 动态/编程地设置文件输入元素的值。
> 
> 有关详细信息以及演示，请参阅此问题中的答案：
> [如何以编程方式设置文件输入值（即：拖放文件时）？](https://stackoverflow.com/q/47515232/584192)

如果没有上传（浏览）文件，我想`fileuploader`通过按钮单击设置值。这可能还是我的方式错误？
示例 html：

```
<input type="file" id="files" />
<input type="button" id="btnTest" value="Test"/> 
```

和jQuery：

```
 $("#btnTest").click(function() {
      alert('test');
     //$('#files').html('pp.img');
     //$('#files').val('pp.img');
     $('#files').text('pp.img')
}); 
```

但它对我不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T04:42:09.750

> 是否可以？

## 不

如果您能够通过 JavaScript 执行此操作，那将是一个严重的安全漏洞，因为您可以指定用户计算机上的任何文件，这就是为什么您不允许设置文件输入元素的值的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T04:43:14.567

好吧，我必须说没有跨浏览器的方法可以做到这一点。“未选择文件”文本位于小部件的实现定义部分，它完全是特定于浏览器的。如果有必要，当 value 属性为空时，您可以简单地使用 CSS 来覆盖文本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T04:41:59.487

我认为您根本不允许设置该值。因为如果可以的话，您可以`C:\passwords.txt`在那里输入并自动提交值。不是很安全。

# php - 在 PHP 和 MySQL 中转换从 Word 粘贴的字符

> ID：12189955
> 
> 赞同：2
> 
> 时间：2012-08-30T04:36:30.153
> 
> 标签：php, mysql

我正在从一个数据库解析数据，其中大部分文本已从 Word 粘贴到另一个数据库中，这是一场真正的噩梦。每天都需要通过解析器清洗数据，因此这不仅仅是清理源数据一次的问题。

问题是目标在处理过程中不断移动，我得到的结果很复杂。

该过程基本上是复制从 PHPMyAdmin 生成的导出 SQL；将其粘贴到表单中，然后运行解析脚本；然后脚本将“清理”的数据保存到不同的数据库中。

数据中的样本包括...

```
Comply with â€œRegulationsâ€? 
```

理想情况下，这将是……

```
Comply with "Regulations" 
```

当所有的解析完成并存储在我剩下的新数据库中时......

```
Comply with AS3868 Ã¢â‚¬Å"RegulationsÃ¢â‚¬Â 
```

还有其他 Word 字符，例如省略号等，但此示例仅显示智能引号。

一旦通过表单发布数据，对我来说清理数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T22:14:05.507

# r - R 中的 tm 包挂起小数据集

> ID：12189960
> 
> 赞同：-5
> 
> 时间：2012-08-30T04:37:00.823
> 
> 标签：r, tm

我有一个包含 30k 条记录（公司名称和其他属性）的 data.frame。`dba_nm`是最长元素 < 60 个字符的公司名称字段。

当我尝试以下代码时，R 会话的内存使用量从 100MB 上升到 3GB 并挂起`?tm::VectorSource`：

```
ds <- VectorSource(dat$dba_nm)
inspect(Corpus(ds)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:32:54.283

好吧，我从数据库中获取了一个数据框（dat）并尝试将其中一列（dba_nm）读入向量源。事实证明，您必须将其转换为字符向量。以下代码有效：

```
> cs <- as.character(dat$dba_nm)
> ds <- VectorSource(cs)
> Corpus(ds)
A corpus with 30453 text documents 
```

# unix - Unix中相对路径的绝对路径

> ID：12189961
> 
> 赞同：0
> 
> 时间：2012-08-30T04:37:06.593
> 
> 标签：unix, ls

此命令仅列出我的 fileAsst 目录中的文本文件：

```
 ls ~/UnixCourse/fileAsst/*.txt 
```

现在我需要做同样的事情，但使用相对路径，到目前为止我尝试过的是：

```
 ls ~/UnixCourse/../*.txt 
```

但它说我没有得到正确的答案，任何人都可以给我一些提示或解释相对路径和绝对路径之间的区别，因为我仍然不知道它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:51:10.020

绝对路径：绝对路径是包含根目录和所有其他包含文件或文件夹的子目录的路径。

```
 ~/UnixCourse/fileAsst/*.txt 
```

相对路径：相对路径只是完整路径的一部分。

```
 cd ~UnixCourse/fileAsst/ 

  ls *.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:12:36.350

相对总是相对于某些现有目录，您当前“位于”其中（`cd`通常通过命令）。在您的问题中，您没有显示当前目录是什么。所以没有单一的“正确”答案。

例如，如果您的当前目录是`~`（这只是您的主目录的快捷方式，例如，`/home/myuser`），那么您的相对`ls`命令将如下所示（为了清楚起见，我添加了隐含的先前`cd`命令）：

```
 cd ~
 ls UnixCourse/fileAsst/*.txt 
```

同样，如果您的当前目录是`~/UnixCourse`，那么您的相对`ls`命令将如下所示：

```
 cd ~/UnixCourse
 ls fileAsst/*.txt 
```

或者最简单的情况，当您已经在要列出以下内容的目录中时：

```
 cd ~/UnixCourse/fileAsst
 ls *.txt 
```

明白了吗？

最后，正如您（偶然地，我假设）发现的那样，您可以在路径中使用`..`and`.`来暗示“一个（子）目录向上”或“当前目录”。

例如，以下路径是等效的，并且都解析为“UnixCourse/fileAsst”：

```
 UnixCourse/../UnixCourse/fileAsst/
 UnixCourse/SomeOtherDir/../fileAsst/
 UnixCourse/./fileAsst
 UnixCourse/fileAsst/YetAnotherDir/../ 
```

请注意，这是一个正交概念，可用于相对路径和绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:20:26.817

有两类路径名：

1.  绝对：以斜线开头。
2.  相对：不要以斜线开头。

无论您当前的工作目录如何，绝对路径名都具有相同的含义。绝对路径名可能包含`..`初始斜杠之后的组件。在可用于确定名称的真实路径的系统调用之后，不包含不遍历符号链接的组件的绝对路径名`..`有时称为“真实路径” 。`realpath()`

相对路径名是相对于当前工作目录的；从概念上讲，每个相对路径名都可以被视为以`./`. 相对名称可能`..`以从当前工作目录向上移动开始。相对路径名的一个特例是一个简单的文件名——一个没有显式目录组件的名称。当然，那是当前目录中的一个文件（或其他命名对象）。

要从绝对路径名确定相对路径名，您还必须知道当前工作目录。

有关更多信息，请参阅：

*   [bash — 给定当前目录，将绝对路径转换为相对路径](https://stackoverflow.com/questions/2564634/bash-convert-absolute-path-into-relative-path-given-a-current-directory/2565049#2565049)
*   [如何从绝对路径获取相对路径](https://stackoverflow.com/questions/275689/how-to-get-relative-path-from-absolute-path)- 标记为[.net](/questions/tagged/.net "显示标记为“.net”的问题")并应用于 Windows 而不是 Unix。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T03:17:01.947

没有看到一个单行的答案...

```
ls ../fileAsst/*.txt 
```

希望可以帮助某人！

# performance - 高效的 Git 历史

> ID：12189962
> 
> 赞同：0
> 
> 时间：2012-08-30T04:37:10.710
> 
> 标签：performance, git

有没有办法在 Git 中有效地读取以前版本的文件？（我使用 Git 作为内容管理系统的数据库，并且需要它来显示历史）。

Git 不存储文件的完整版本，它只存储差异，因此，如果您需要以前的版本 - 您不能只从磁盘读取它，您应该让 Git 使用差异来计算它。

似乎 GitHub 以某种方式做到了这一点，例如， You can see [previous version of file](https://github.com/rails/rails/blob/bfb84cfb3eab81d86585632452a60b76eb05db43/actionmailer/Rakefile)。它真的会为每个 HTTP 请求计算它还是以某种方式对其进行优化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:41:05.753

勘误：git 总是存储文件的完整版本。因此查看任何修订版同样有效。

这与其他一些仅存储差异（补丁）的修订系统形成鲜明对比。由于这个原因（对于拥有许多用户的大型存储库），Cvs 尤其难以访问深层历史记录或非主干分支。

* * *

作为参考，为了*方便*地访问特定版本的特定文件（sha/reference）：

```
git show HEAD:full/path/to/file 
```

用标签、分支或 git sha（长十六进制数）替换 head

该路径是相对于 git 存储库基础的完整路径，而不是文件系统根目录。我只提到这一点是因为它已经咬了我几次——你不能`cd`进入一个目录并期望不指定完整路径。

* * *

维基百科（所有真实而美好的事物之家）支持我：

[Git 将文件的每个修订版本存储为唯一的 blob 对象。通过检查树和提交对象可以找到 blob 之间的关系。新添加的对象使用 zlib 压缩完整存储。](http://en.wikipedia.org/wiki/Git_%28software%29)

如果维基百科不是你的包，仔细阅读[git internals 手册](http://git-scm.com/book/en/Git-Internals-Git-Objects)也可以验证它。

# mysql - MySQL程序在插入不起作用之前检查记录是否存在

> ID：12189968
> 
> 赞同：2
> 
> 时间：2012-08-30T04:37:46.217
> 
> 标签：mysql, stored-procedures, insert, exists, not-exists

我已经查看了有关此问题的其他问题。它不工作。

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `environment_admin`(
IN environment_id   TEXT,
IN user_id          TEXT,
IN username         VARCHAR(75),
IN password         VARCHAR(512)
)
BEGIN
DECLARE env_id INT;
DECLARE admin_id INT;

SET env_id = CAST(environment_id AS SIGNED INT);
SET admin_id = CAST(user_id AS SIGNED INT);

IF NOT EXISTS(SELECT 1 FROM `environment`.`environment_accounts` WHERE environment_id = env_id AND user_id = admin_id) THEN
    BEGIN
    INSERT INTO 
        `environment`.`environment_accounts` 
        (
            `environment_id`, 
            `user_id`, 
            `username`, 
            `password`, 
            `is_active`, 
            `is_admin`, 
            `is_mod`
        ) 
        VALUES 
        (
            env_id, 
            admin_id,
            username,
            password,
            1,
            1,
            1
        );
    END;
END IF;
END 
```

所以如果我运行：

```
CALL `environment`.`environment_admin`('22','1','kacieh','512c9ad228332bbd30d09ce7ffb8896e00a1610e914a5fa180bf15ce702b90423e6a9540579f672315ae3c6cb1b8d06ee2b784b4761e806675aa88c2a915553e'); 
```

我得到 0 行影响，果然，什么也没发生。-_- 这几个小时我一直在工作，我测试了条件查询，它有效。我只测试了存储过程中的插入语句，它也可以工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T04:42:41.507

不要那样做，效率低下，如果两个插入同时运行可能会更糟！:)

使用 INSERT.... ON DUPLICATE KEY UPDATE ...[见这里](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

一个技巧是执行 ON DUPLICATE KEY UPDATE environment_id = env_id （不更改列，因此不会更新任何内容，确保 INSERT 不会在没有任何错误条件的情况下工作，之后您可以检查修改/插入的行数）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T15:28:37.090

我意识到您已经解决了您的问题（并为 Parallelis 的回答 +1，特别是在突出并发问题时），但以防万一它可以帮助其他人......

`environment_id`MySQL 可能在您的参数and`user_id`和`environment_accounts`列`environment_id`and之间感到困惑`user_id`。我怀疑参数在`WHERE`子句中具有优先权，这意味着只要在 中至少有一行`environment_accounts`，该`NOT EXISTS`子句将始终返回 false，并且您的插入永远不会运行。

例如，如果您的`environment_id`和`user_id`参数的值分别为 1 和 2，则该`NOT EXISTS`子句将评估为

```
IF NOT EXISTS(SELECT 1 FROM `environment`.`environment_accounts` WHERE 1 = 1 AND 2 = 2) THEN 
```

可能值得为您的参数（和其他变量）制定命名约定，例如`p_`为参数添加前缀。

# css - 子容器崩溃

> ID：12189972
> 
> 赞同：1
> 
> 时间：2012-08-30T04:38:07.543
> 
> 标签：css, html

我有一个网页，整个页面都有一个大容器。在里面`<div>`我有`<div>`另一个`float:left`。然后，浮动到那个孩子的右边，`<div>`我有第二个容器，它将包含其他`<div>`s。辅助容器正在折叠。我已经搜索并尝试了其他解决方案，但他们没有解决任何问题。顺便说一句，这是一个 html5 页面`<!DOCTYPE html>`。有任何想法吗？CSS：

```
body {
    border: 0px;
    padding: 0px;
    margin: 0px;
    background: white;
    overflow: hidden;
    height: 100%;
    font-family: Hanuman;
}
#container {
    margin: 0 auto;
    background: red;
    height: 100%;
    width: 100%;
    overflow: hidden;
}
#bibletree {
    padding: 0;
    margin: 0;
    height: 100%;
    width: 15%;
    float: left;
    background: blue;
    overflow: auto;
    white-space:nowrap;
}
#container2 {
    margin: 0 auto;
    height: 100%;
    width: 85%;
    background: gray;
    float: right;
    overflow: auto;
} 
```

html:

```
<div id="container">
     <div id="bibletree">
          stuff here
     </div>
     <div id="container2">
          there will be two other divs here as well. This one is collapsing.
     </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:41:36.583

嗨，现在给`body`和`html height 100%`

像这样

```
body, html{
height:100%;
} 
```

***[演示](http://tinkerbin.com/zTVYBafv)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:43:36.567

[这](http://jsfiddle.net/QNASS/)能解决问题吗？

（添加`overflow:hidden`到`#container2`的规则？）

# algorithm - 查找包含所需值的组合

> ID：12189976
> 
> 赞同：0
> 
> 时间：2012-08-30T04:38:35.070
> 
> 标签：algorithm, set

我有一组对象。我还有一组必需的对象，包含 0 到 3 个对象。我试图从包含所需对象的初始集中找到 3 个对象的所有组合。

编辑：示例——

```
objects: {A,B,C,D,E}
required: {A}
output: {A,B,C}, {A,B,D}, {A,B,E}, {A,C,D}, {A,C,E}, {A,D,E}

objects: {A,B,C,D,E}
required: {A,B}
output: {A,B,C}, {A,B,D}, {A,B,E} 
```

明显但缓慢的解决方案类似于：

```
for(int i = 0; i < objects.size()-2 ; i++){
  for(int j = i; j < objects.size()-1 ; j++){
    for(int k = j; k < objects.size() ; k++){
      if(required.contains(i) || required.contains (j) || required.contains(k)){
        results.add(new Result(i,j,k));
      }
    }
  }
} 
```

该解决方案遍历整个搜索空间，而不考虑所需的对象。

我想出的另一种方法是为每个所需对象的数量编写自定义代码：

```
switch (required.size()){
case 3:
  results.add(new Result(required));
  break;
case 2:
  Object a = requiredIngredients.toArray()[0];
  Object b = requiredIngredients.toArray()[1];
  for(Object o : objects){
    if(!required.contains(i)){
      results.add(new Result(EnumSet.of(o, a, b)));
    }
  }
  break; 
```

ETC..

这可行，但令人讨厌且不可推广。

第三种方法是制作三个单独的集合，如果存在需求，则缩小集合以仅包含所需的值，然后正常迭代它们：

```
 for(Object i : firstObjects){
    for(Object j : secondObjects){
      if(i == j) continue;
      for(Object k : thirdObjects){
        if(j == k) continue;
        results.add(new Result(i,j,k));
      }
    }
  } 
```

这似乎更好一些，但会产生重复的组合。例如。它会将 ABC 和 ACB 作为两个单独的结果返回。我可以让结果集识别重复项，但我不想从一开始就计算它。

希望这些例子能说明问题。我觉得有人已经想出了如何解决这类问题，但我很难确定普遍的问题类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:31:55.700

这是一种简单而通用的方法，但可能不是最有效的（在python中）：

```
from itertools import combinations

def combinations_including(n,objects,required):
  extra=objects-required
  return sorted([sorted(tuple(required)+x) for x in combinations(extra,n-len(required))])

print combinations_including(3,set('ABCDE'),set('A'))
print combinations_including(3,set('ABCDE'),set('AB')) 
```

输出

```
[['A', 'B', 'C'], ['A', 'B', 'D'], ['A', 'B', 'E'], ['A', 'C', 'D'], ['A', 'C', 'E'], ['A', 'D', 'E']]
[['A', 'B', 'C'], ['A', 'B', 'D'], ['A', 'B', 'E']] 
```

如果所需集很小，那么它可能比蛮力更糟糕，但随着所需集的大小增加，它将变得比蛮力更有效。例如，如果所需集与输入集相同，则它会在恒定时间内找到答案。

# c# - EvilDicom 使用 VoxelGrid 的问题

> ID：12189978
> 
> 赞同：1
> 
> 时间：2012-08-30T04:39:04.783
> 
> 标签：c#, dicom, .net, evil-dicom

我正在尝试实现[这个例子](https://vimeo.com/20800062)。

```
DicomFile df;  
VoxelGrid vt ;    
if (openFileDialog1.ShowDialog () == DialogResult.OK)    
{    
    df = new DicomFile (openFileDialog1.FileName);    
    vt = new VoxelGrid (df);    
    pictureBox1.Image = vt.getImage();   
} 
```

问题是它在你的 dll (EvilDicom) 中没有找到组件 VoxelGrid，只有一个名为 Voxel 的组件不能按照教程要求工作，是否有任何版本更改 EvilDicom 0,04 或需要使用另一个组件在我的图片框中添加图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:24:16.130

在最近的[Evil DICOM](http://sourceforge.net/projects/evildicom/)版本中，例如[0.05.7](http://sourceforge.net/projects/evildicom/files/0.05.7/)，有一个`ImageMatrix`类可用于从 DICOM 文件中检索图像位图数据。

您应该能够将您的示例更改为以下内容，以将图像充分上传到您的图片框：

```
if (openFileDialog1.ShowDialog() == DialogResult.OK)
{
    var imgFile = new ImageMatrix(openFileDialog1.FileName);
    pictureBox1.Image = imgFile.GetImage(0);
} 
```

# android - Cursor.moveToFirst() 和 nullpointerexception

> ID：12189980
> 
> 赞同：0
> 
> 时间：2012-08-30T04:39:21.430
> 
> 标签：android, sqlite, cursor

我的问题是：会`moveToFirst()`抛出一个`NullPointerException`？

我应该使用：

```
if (cursor != null) {
    if (cursor.moveToFirst()) {
        // TODO
    }
} 
```

要不就：

```
if (cursor.moveToFirst()) {
    // TODO
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:46:39.050

看起来您正在使用 Android [Cursor](http://developer.android.com/reference/android/database/Cursor.html)和[SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)类。如果是这样，那么`cursor`永远不会为空。（所以你不必担心 NullPointerException 在这里。）它们可以是*空*的，但在这种情况下`cursor.moveToFirst()`会返回。`false`您只需使用：

```
if (cursor.moveToFirst()) {
    // TODO
} 
```

或者不止一行：

```
while (cursor.moveToNext()) {
    // TODO
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T04:48:08.547

除非您的is ，否则调用 cursor`moveToFirst()`不会出错。`cursor``null`

# python - 在管理表格内联中显示外键字段

> ID：12189982
> 
> 赞同：2
> 
> 时间：2012-08-30T04:39:39.213
> 
> 标签：python, django

我将如何在表格内联中将外键字段（而不是 id 字段）显示为只读列？

例如，我拥有的管理页面用于编辑显示在滑块上的项目。我拥有的表格内联代表了一个故事列表：

```
class SliderItemInline(TabularInline):
    model = SliderItem
    ordering = ['position']
    fields = ('position', 'story', 'active') 
```

我也想将**story.status**显示为内联的只读列，但我不知道该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-28T18:31:13.973

我知道问这个问题后已经过去了很多时间，但也许它对其他人有用。

这是一种方法：

```
class SliderItemInline(TabularInline):
    model = SliderItem
    ordering = ['position']
    fields = ('position', 'story', 'active', 'story_status')
    readonly_fields = ('story_status',)

    def story_status(self, obj):
        return obj.story.status 
```

# meteor - 使用 Meteor，为什么调用 MyCollection.findOne 会影响其他模板函数？

> ID：12189984
> 
> 赞同：0
> 
> 时间：2012-08-30T04:39:50.567
> 
> 标签：meteor

我使用 findOne 只是为了获取我的收藏中的某个元素。

但是，当我这样做时，包含这些集合的所有模板函数都会重新运行并刷新内容。内容相似，问题是我正在将样式应用于其中一些元素，而这些更新也只是重置了所有内容。更重要的是：那些刷新完全没用。

例如，我有这个模板：

```
Template.content.cars = function () {
    alert("I AM RERUN!");
    return Cars.find();
}; 
```

在另一个函数中，我正在这样做：

```
Cars.findOne({ _id: Session.get('current_car') }, {}); 
```

为什么第一个模板会重新运行？难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:03:46.103

我不确定为什么要重新运行您的第一个模板：您确定没有其他事情发生吗？

但作为对您问题的一般非答案：您应该期望依赖于整个集合的模板将重新运行多次（例如，当页面首次呈现时数据增量加载）。使用流星，您需要以这种重新渲染不会导致问题的方式编写 HTML/CSS。

在不了解您的问题的情况下，我真的不能说更多。

# c++ - 控制 QT 中准备从声卡读取的字节数

> ID：12189985
> 
> 赞同：1
> 
> 时间：2012-08-30T04:39:55.300
> 
> 标签：c++, qt, audio, buffer

在 QT 中，我可以将音频输入定义为：

```
m_audioInput = new QAudioInput(m_Inputdevice, m_format, this);
m_input = m_audioInput->start(); 
```

在我的应用程序中，我想使用麦克风并从声卡中读取。

现在，如果我想查看有多少字节可以从我使用的音频缓冲区中读取：

```
qint64 len = m_audioInput->bytesReady(); 
```

看起来它`len`是采样率和每个样本位数的函数。我的问题是有没有办法在`len`不改变采样率的情况下进行控制？换句话说，我想控制声卡，使其以较短的块读取数据并发出就绪信号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:48:43.180

您可以通过设置适当的格式参数来控制声卡，例如频率、样本大小。为此，您需要使用`QAudioFormat`类。

除此之外，没有其他方法可以从 Qt 控制声卡。

[类参考](http://doc.qt.nokia.com/4.7-snapshot/qaudioformat.html)。

[参考](http://doc.qt.nokia.com/4.7-snapshot/qaudioinput.html)示例：

```
QFile outputFile;   // class member.
QAudioInput* audio; // class member.

outputFile.setFileName("/tmp/test.raw");
outputFile.open( QIODevice::WriteOnly | QIODevice::Truncate );

QAudioFormat format;

// set up the format you want, eg.
format.setFrequency(8000);
format.setChannels(1);
format.setSampleSize(8);
format.setCodec("audio/pcm");
format.setByteOrder(QAudioFormat::LittleEndian);
format.setSampleType(QAudioFormat::UnSignedInt);

QAudioDeviceInfo info = QAudioDeviceInfo::defaultInputDevice();
if (!info.isFormatSupported(format)) {
    qWarning()<<"default format not supported try to use nearest";
    format = info.nearestFormat(format);
}

audio = new QAudioInput(format, this);
QTimer::singleShot(3000, this, SLOT(stopRecording()));
audio->start(&outputFile);
// Records audio for 3000ms 
```

# c# - udp 在 .net 中的工作原理

> ID：12189986
> 
> 赞同：3
> 
> 时间：2012-08-30T04:40:03.420
> 
> 标签：c#, .net, networking, udp

有人告诉我 UDP 是无连接的，这意味着您无法确定包裹是否会到达目的地。

为什么在做的时候：

```
var dataToSend = new byte[]{1};
UdpClient client = new UdpClient();
client.Send(dataToSend,1,"192.168.0.45", 1234); 
```

变量 LocalEndpoint 初始化：

![在此处输入图像描述](../Images/f803fd385a1519731708ecf46e8d655b.png)

如果我错了，请纠正我。我相信变量 LocalEndPoint 是由路由器初始化的。我之所以相信这是因为每次服务器（192.168.0.45）接收数据然后回复时，我看到数据正在通过回复上的端口62446发送。

**所以我的问题是**，如果我使用的是 udp 协议，为什么我会收到路由器的响应？如果我从路由器得到响应，那么那不是 UDP，或者我对 udp 的理解有误。我不认为端口号是随机选择的。如果我已将路由器配置为在端口 62446 上将端口转发到其他计算机，那么我的程序将无法正常工作。

* * *

**这是客户端代码：**

```
string ipOfServer = "192.168.0.45";
int portServerIsListeningOn = 1234;

// send data to server
Socket sending_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
IPEndPoint sending_end_point = new IPEndPoint(IPAddress.Parse(ipOfServer), portServerIsListeningOn);
sending_socket.SendTo(Encoding.ASCII.GetBytes("Test"), sending_end_point);

// after I send data localendpoint gets initialized! and the server always respond through that port!

// get info
var port = sending_socket.LocalEndPoint.ToString().Split(':')[1];

// now wait for server to send data back
IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, int.Parse(port));
byte[] buffer = new byte[1024];
sending_socket.Receive(buffer); // <----- keeps waiting in here :( 
```

**这是服务器代码：**

```
// wait for client to send data
UdpClient listener = new UdpClient(11000);
IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, 11000);        
byte[] receive_byte_array = listener.Receive(ref groupEP);
listener.Connect(groupEP);

// reply
byte[] dataToSend = new byte[] { 1, 2, 3, 4, 5 };
listener.Send(dataToSend, dataToSend.Length); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T08:43:02.830

Bind 为您提供 LocalEndPoint 属性中包含的信息，而不是路由器：

这段摘录来自[MSDN](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.localendpoint.aspx)：

> LocalEndPoint 属性获取一个 EndPoint，其中包含您的 Socket 绑定到的本地 IP 地址和端口号。在检索任何信息之前，您必须将此 EndPoint 转换为 IPEndPoint。然后，您可以调用 IPEndPoint.Address 方法来检索本地 IPAddress，并调用 IPEndPoint.Port 方法来检索本地端口号。
> 
> LocalEndPoint 属性通常在调用 **[Bind 方法](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.bind.aspx)**后设置。如果您允许系统分配您的套接字的本地 IP 地址和端口号，则 LocalEndPoint 属性将在第一次 I/O 操作后设置。对于面向连接的协议，第一个 I/O 操作是调用 Connect 或 Accept 方法。对于无连接协议，第一个 I/O 操作将是任何发送或接收调用。

但是您的理解是正确的，UDP 是一种发送数据的方式。

# ruby - shopify 应用程序是否仅限于触摸产品和售后？

> ID：12189987
> 
> 赞同：0
> 
> 时间：2012-08-30T04:40:23.337
> 
> 标签：ruby, shopify

我已通读所有 API 文档并查看了 github 上的 shopify 应用 PixelPrinter，但在文档中我没有看到可以让客户在结账时添加自定义美元金额以用于特定原因的任何地方。

是否可以通过我的应用程序向购物车/结帐屏幕添加一个下拉字段（或指导他们如何添加此字段）并使该选定值最终出现在订单中？也许我在想这一切都是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:30:15.990

如果您想使用 Shopify 收款，您需要销售产品。一个产品可以有变体，每个都有一个美元金额。您不能以随机金额出售任何产品。您可以创建一个名为 Donation 的产品，并为其分配一些值，允许客户从一些可用的变体中进行选择，然后将其分配给他们最喜欢的原因。

# php - 我的系统允许重复 - 原因可能是 MySQL 写入延迟吗？

> ID：12189992
> 
> 赞同：2
> 
> 时间：2012-08-30T04:40:53.257
> 
> 标签：php, mysql

我构建的 Web 应用程序有问题。它通过网络服务接收和处理客户订单。

现在，它会检查 MySQL 以确保之前没有处理过这个订单，但最近，我们收到了一些重复的订单。这两个命令之间的时间间隔为 1 毫秒。

我知道这是我的应用程序，我应该知道这一点，但这更像是一个通用问题：

1毫秒的差异是否可能是MySQL将记录写入其数据库与我的应用程序检查该记录之间的差异？如果 MySQL 用这个时间来写它的记录，我可以看到有可能有 2 个重复的订单潜入。

似乎它允许重复，因为它正在检查订单是否已经存在，并确定它不存在。

如果是这样 - 有没有更好的方法来防止重复进入我的系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:45:19.963

您需要检查订单是否存在并有条件地将其插入到单个事务中。

如果您首先执行 SELECT 并单独执行 INSERT，则您会打开一个窗口，在该窗口中可能会发生相同的 INSERT。

如果您在使您的订单唯一的字段（例如订单 ID）上使用唯一索引，则插入相同数据的第二次尝试将以您可以正常处理的方式失败。

# android - 如何在 AS3 (Flash CS6) 中找到 20 分钟 MP3 的结尾并将其停止？

> ID：12189993
> 
> 赞同：0
> 
> 时间：2012-08-30T04:40:56.560
> 
> 标签：android, actionscript-3, flash, audio, mp3

我以前使用过 Flash，但对 AS3 来说是新手。我正在为 Android 应用程序设计一个持续 20 分钟的 MP3 触摸播放/暂停按钮，但无法找到 MP3 文件的实际结尾并使其停止。我怎样才能在时间线上滚动到我非常非常长的 MP3 的末尾来执行此操作？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:50:59.807

你应该简单地调用你的声音对象函数：

```
var minute:int = 20;
sound.play(minute * 60 * 1000); 
```

这将寻求 20 分钟的你的声音。

# java - 如何将文件夹添加到由 maven cargo 插件启动的 Tomcat 容器的类路径中

> ID：12189997
> 
> 赞同：2
> 
> 时间：2012-08-30T04:41:13.890
> 
> 标签：java, tomcat, maven, cargo

我正在使用 cargo-maven2-plugin 从我的 maven 构建中启动和停止一个 tomcat 容器。我能够为我的应用程序使用此功能，包括部署未包含在战争中的额外 jar 文件。但是，我正在部署的 war 文件需要在 tomcat 通用类路径中包含一个 groovy 脚本的目录/文件夹。

是否可以配置此货物插件以将文件夹添加到 tomcat 通用类路径？注意，我不希望在这个类路径中包含一个 jar 依赖项——只是 groovy 脚本的文件夹。

编辑：到目前为止，我已经通过复制包含此文件夹的新 catalina.properties 文件来解决此问题。这可行，但它是非常特定于容器的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:02:34.843

例如，您可以添加一个部分以包含文件或目录

```
 <plugin>
                    <groupId>org.codehaus.cargo</groupId>
                    <artifactId>cargo-maven2-plugin</artifactId>
                    <version>1.2.3</version>
                    <configuration>
                        <container>
                           ...
                        </container>
                        <configuration>
                            <properties>
                               ....
                            </properties>
                            <files>
                                <file>
                                    <file>${basedir}/src/test/resources/alfresco-global.properties</file>
                                    <todir>shared/classes</todir>
                                </file>
                            </files>
                        </configuration>
                    </configuration>
                    <executions>
                        ...
                    </executions>
                </plugin> 
```

[Maven 2 插件参考指南](http://cargo.codehaus.org/Maven2+Plugin+Reference+Guide#Maven2PluginReferenceGuide-dependency "Maven 2 Plugin Reference Guide")中的更多文档

# c++ - C++ 流程图/GUI 设计器

> ID：12189999
> 
> 赞同：3
> 
> 时间：2012-08-30T04:41:20.167
> 
> 标签：c++, user-interface, wxwidgets, vtk, flowchart

我需要编写一个 C++ GUI，以便用户可以通过从工具栏中选择几个块并将它们放入窗口并以他想要的某种顺序连接它们然后程序运行流程图来制作**流程图/管道。**（为简单起见，只需考虑每个块的任务是打印一些数字。我的问题是 GUI）

有没有人尝试过类似的事情/任何经验？

是否可以在 WxWidget 或任何其他图形/窗口形式库中制作这样的 GUI？

是否可以使用VTK制作GUI？

你知道任何类似的开源工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T10:59:14.313

我已经开发了几个带有 GUI 的应用程序来做这种事情。

我最满意的是 VASE：一个用于创建布局、设置参数和查看流程模拟器结果的 GUI。

![在此处输入图像描述](../Images/f650ee7641369b94a7e0329abddd05fe.png)

这不是一项微不足道的任务，尽管一旦你完成了一两个，就有很多想法可以重复使用，而且进展很快。

绘制连接对象的线（如您所见，即使在 VASE 中，这个问题也没有完全解决）和以可以轻松恢复和重绘的格式存储布局是两个最大的挑战。

有什么特别的问题需要帮助吗？

如果您想要一个非常非常简单的示例来帮助您入门，我已经重新实现了几个基本功能（一切都很好，干净，没有版权限制） - 左键单击选择，拖动移动，右键单击连接。

这是源代码存储库 -`http://66.199.140.183/cgi-bin/vase.cgi/home`

这是它的样子

![在此处输入图像描述](../Images/011ab1b6b99791f9a77dc47c684e41ad.png)

我已经实现了一个简化的连接器，我称之为管道。为了让您了解如何做这种事情，这里是当用户右键单击时添加管道的代码

```
/**

  User has right clicked

  If he right clicks on a flower
  and there is a different flower selected
  then connect the selected flower to the right clicked flower

  if he right clicks on empty background
  create a new flower

*/
void cVase::MouseRightDown( wxMouseEvent& event )
{
    // find flower under click
    iterator iter_flower_clicked = find( event.GetPosition() );

    // check there was a flower under click
    if( iter_flower_clicked != end() ) {

        // check that we have a selected flower
        if( ! mySelected )
            return;
        // check that selected flower is different from one clicked
        if( mySelected == (*iter_flower_clicked) )
            return;
        // construct pipe from selected flower to clicked flower
        myPipe.push_back(cPipe( mySelected, *iter_flower_clicked ));

    } else {

        // no flower under click
        // make one appear!
        cFlower * pflower  = Add();
        pflower->setLocation( event.GetPosition() );
    }
    // redraw everything
    Refresh();
} 
```

这是绘制管道的代码

```
/**

 Draw the pipe

 From starting flower's exit port to ending flower's entry port

*/
void cPipe::Paint( wxPaintDC& dc )
{
    dc.SetPen( *wxBLUE_PEN );
    dc.DrawLine( myStart->getExitPort(), myEnd->getEntryPort() );
} 
```

通过浏览源代码存储库，您可以看到将所有这些联系在一起的 wxWidgets 代码的其余部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T07:05:54.590

我认为使用诸如[wxArt2D](http://www.wxart2d.org/moin)之类的库会比使用标准 wxWidgets [绘图类](http://docs.wxwidgets.org/trunk/group__group__class__gdi.html#)更容易。wxArt2D的[电线样本](http://www.wxart2d.org/moin/WxArt2dSamples#wires)看起来与您正在寻找的相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T14:16:05.263

也许您可以尝试使用名为 Flowchart to Code 的小工具，您可以获得所需的流程图，就像这样。可以在这里下载：http: [//www.athtek.com/flowchart-to-code.html#.Ug4z29JPTfI](http://www.athtek.com/flowchart-to-code.html#.Ug4z29JPTfI)