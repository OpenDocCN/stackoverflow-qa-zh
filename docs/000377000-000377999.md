# StackOverflow 问答 000377000-000377999

# python - 需要在 Python 中创建帮助变量（续）

> ID：377000
> 
> 赞同：-3
> 
> 时间：2008-12-18T05:43:39.167
> 
> 标签：python, variables

[这](https://stackoverflow.com/questions/374572/need-help-variable-creation-in-python#374604)对kgiannakakis很有帮助。我面临以下问题：

```
a = ['zbc','2.3']
for i in range(0,5):
    exec('E%d=%s' %(i,a[i])) 
```

这导致：

```
回溯（最近一次通话最后）：
  文件“”，第 2 行，在
    exec('E%d=%s' %(i,a[i]))
  文件“”，第 1 行，在
NameError：名称'zbc'未定义

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T06:55:56.960

看起来您生成的代码扩展为：

```
E0=zbc
E1=2.3 
```

在循环的下一次迭代中，您将得到一个 IndexError 异常，因为`a`它只有两个元素长。

因此，鉴于上述情况，您正在尝试分配 to 的`zbc`值`E0`。如果`zbc`不存在（似乎不存在），那么您将收到您提到的 NameError 。

很难确定您实际上要使用此代码做什么，因此我不确定该推荐什么。您可以改为分配字符串：

```
exec('E%d="%s"' %(i,a[i])) 
```

这将扩展为：

```
E0="zbc"
E1="2.3" 
```

您仍然会收到 IndexError，因为您的数组`a`不是 5 个元素长。这对你来说应该很容易解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T05:54:23.903

好的。这段代码很奇怪。

作为这样的单行符，它在语法上不正确，但我怀疑您由于某种原因缺少换行符。但后来它变成了

```
a = ['zbc','2.3']
for i in range(0,5): 
    exec('E%d=%s' %(i,a[i])) 
```

但这将导致对 a[i] 的引用出现索引错误，如下所示：

```
>>> a
['zbc', '2.3']
>>> for i in range(0,5):
...    print a[i]
... 
zbc
2.3
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IndexError: list index out of range 
```

如果你避免了这个问题，你会得到

```
exec("E2.3=1") 
```

在第二次通过lopp时，这也是一个语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T19:42:31.080

您似乎正在尝试使用[此](https://stackoverflow.com/questions/374572/need-help-variable-creation-in-python)问题中标记的解决方案。

如果您的目标是循环访问值，则应该只使用列表。这种带有数字的变量名称的奇怪概念不应该在任何语言中使用。试试这个。

```
vals = ['foo', 'bar', 'blah', 67, -0.4, 'your mom']
for i in range(len(vals)):
    print(vals[i]) 
```

这是获得由整数索引的值列表的正确方法，而不是将其放在变量名中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T18:03:18.217

请记住，'exec' 执行您传递给它的任何字符串，就好像您在 .py 文件或解释器中键入它一样。

在调试 exec() 相关代码时，在遇到麻烦时记录您将要“执行”的任何内容会很有帮助，如果这样做，您很容易注意到 E0 没有被分配给字符串“zbc”但是对于不存在的对象zbc。

除此之外，这个代码示例真的很奇怪。将字符串解析为实例变量或其他命名空间中的对象有一些合法用途，最值得注意的是，当您编写一个高度动态的类时，该类需要用混乱的输入做一些明智的事情，或者需要从一个字典或字符串。但是如果没有上下文，您问题中的代码看起来像是在避免或不理解如何使用 list() 和 dict() 对象。

我建议您在下次就这样奇特的事情提出问题时，多谈谈您要达到的目标。这会给人们一个很好的机会来提出更好的解决方案，或者——如果你以一种完全明智的方式处理一个特定的问题——防止一堆答案告诉你你做的事情完全错误。

# asp.net - 单声道上的 DevExpress ASP.Net 组件

> ID：377010
> 
> 赞同：3
> 
> 时间：2008-12-18T05:49:14.350
> 
> 标签：asp.net, mono, pinvoke, devexpress

我是 DevExpress 组件的快乐用户，尽管目前我仍在使用 linux 网络主机。

在另一个线程中，我谈到了我迁移到 Windows 环境的计划，以便我可以使用 DevExpress 的 ASP.Net 组件。一段时间以来，DevExpress 的立场是，由于 P/Invoke 的大量使用，他们的组件不太可能在 Mono 上工作。

以前没有使用过他们的 ASP.Net 组件的经验，我的问题是，有没有人在 Mono 下成功使用过他们的 ASP.Net 控件？我读过一些帖子，表明他们在单声道下使用 ASP.Net 的东西比 WinForms 的东西好得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-02T15:13:39.007

如果他们声明他们的控件是 P/Invoke 繁重，那么您可以删除控件或删除 Linux。Mono 没有错，唯一要怪的就是只考虑 Windows 编写的代码。根据我的经验 - 由于使用 P/Invokes 在 Linux 上中断的代码也会在 Windows 64 位上中断（因为本机库不像托管程序集那样与 32/64 位无关）。

# python - Test if executable exists in Python?

> ID：377017
> 
> 赞同：334
> 
> 时间：2008-12-18T05:55:36.787
> 
> 标签：python, path

In Python, is there a portable and simple way to test if an executable program exists?

By simple I mean something like the `which` command which would be just perfect. I don't want to search PATH manually or something involving trying to execute it with `Popen` & al and see if it fails (that's what I'm doing now, but imagine it's `launchmissiles`)

* * *

## 回答 #1

> 赞同：368
> 
> 时间：2012-09-26T22:40:30.507

I know this is an ancient question, but you can use `distutils.spawn.find_executable`. This has been [documented since python 2.4](http://docs.python.org/release/2.4/dist/module-distutils.spawn.html) and has existed since python 1.6.

```
import distutils.spawn
distutils.spawn.find_executable("notepad.exe") 
```

Also, Python 3.3 now offers [`shutil.which()`](https://docs.python.org/library/shutil.html#shutil.which).

* * *

## 回答 #2

> 赞同：334
> 
> 时间：2008-12-18T06:05:29.043

Easiest way I can think of:

```
def which(program):
    import os
    def is_exe(fpath):
        return os.path.isfile(fpath) and os.access(fpath, os.X_OK)

    fpath, fname = os.path.split(program)
    if fpath:
        if is_exe(program):
            return program
    else:
        for path in os.environ["PATH"].split(os.pathsep):
            exe_file = os.path.join(path, program)
            if is_exe(exe_file):
                return exe_file

    return None 
```

**Edit**: Updated code sample to include logic for handling case where provided argument is already a full path to the executable, i.e. "which /bin/ls". This mimics the behavior of the UNIX 'which' command.

**Edit**: Updated to use os.path.isfile() instead of os.path.exists() per comments.

**Edit**: `path.strip('"')` seems like the wrong thing to do here. Neither Windows nor POSIX appear to encourage quoted PATH items.

* * *

## 回答 #3

> 赞同：209
> 
> 时间：2012-12-18T16:05:19.767

Use [shutil.which()](https://docs.python.org/3.8/library/shutil.html#shutil.which) from Python's wonderful standard library. Batteries included!

* * *

## 回答 #4

> 赞同：65
> 
> 时间：2015-03-07T00:28:11.780

### For python 3.3 and later:

```
import shutil

command = 'ls'
shutil.which(command) is not None 
```

As a one-liner of [Jan-Philip Gehrcke Answer](https://stackoverflow.com/a/13936916/1695680):

```
cmd_exists = lambda x: shutil.which(x) is not None 
```

As a def:

```
def cmd_exists(cmd):
    return shutil.which(cmd) is not None 
```

* * *

### For python 3.2 and earlier:

```
my_command = 'ls'
any(
    (
        os.access(os.path.join(path, my_command), os.X_OK) 
        and os.path.isfile(os.path.join(path, my_command)
    )
    for path in os.environ["PATH"].split(os.pathsep)
) 
```

This is a one-liner of [Jay's Answer](https://stackoverflow.com/a/377028/1695680), Also here as a lambda func:

```
cmd_exists = lambda x: any((os.access(os.path.join(path, x), os.X_OK) and os.path.isfile(os.path.join(path, x))) for path in os.environ["PATH"].split(os.pathsep))
cmd_exists('ls') 
```

Or lastly, indented as a function:

```
def cmd_exists(cmd, path=None):
    """ test if path contains an executable file with name
    """
    if path is None:
        path = os.environ["PATH"].split(os.pathsep)

    for prefix in path:
        filename = os.path.join(prefix, cmd)
        executable = os.access(filename, os.X_OK)
        is_not_directory = os.path.isfile(filename)
        if executable and is_not_directory:
            return True
    return False 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2008-12-18T22:25:15.370

Just remember to specify the file extension on windows. Otherwise, you have to write a much complicated `is_exe` for windows using `PATHEXT` environment variable. You may just want to use [FindPath](http://www.raboof.com/projects/findpath/).

OTOH, why are you even bothering to search for the executable? The operating system will do it for you as part of `popen` call & will raise an exception if the executable is not found. All you need to do is catch the correct exception for given OS. Note that on Windows, `subprocess.Popen(exe, shell=True)` will fail silently if `exe` is not found.

* * *

Incorporating `PATHEXT` into the above implementation of `which` (in Jay's answer):

```
def which(program):
    def is_exe(fpath):
        return os.path.exists(fpath) and os.access(fpath, os.X_OK) and os.path.isfile(fpath)

    def ext_candidates(fpath):
        yield fpath
        for ext in os.environ.get("PATHEXT", "").split(os.pathsep):
            yield fpath + ext

    fpath, fname = os.path.split(program)
    if fpath:
        if is_exe(program):
            return program
    else:
        for path in os.environ["PATH"].split(os.pathsep):
            exe_file = os.path.join(path, program)
            for candidate in ext_candidates(exe_file):
                if is_exe(candidate):
                    return candidate

    return None 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-06-17T08:01:46.533

## For *nix platforms (Linux and OS X)

This seems to be working for me:

**Edited** to work on Linux, thanks to [Mestreion](https://stackoverflow.com/users/624066/mestrelion)

```
def cmd_exists(cmd):
    return subprocess.call("type " + cmd, shell=True, 
        stdout=subprocess.PIPE, stderr=subprocess.PIPE) == 0 
```

What we're doing here is using the builtin command `type` and checking the exit code. If there's no such command, `type` will exit with 1 (or a non-zero status code anyway).

The bit about stdout and stderr is just to silence the output of the `type` command, since we're only interested in the exit status code.

Example usage:

```
>>> cmd_exists("jsmin")
True
>>> cmd_exists("cssmin")
False
>>> cmd_exists("ls")
True
>>> cmd_exists("dir")
False
>>> cmd_exists("node")
True
>>> cmd_exists("steam")
False 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-07-26T08:06:30.777

On the basis that it is [easier to ask forgiveness than permission](http://docs.python.org/glossary.html#term-eafp) (and, importantly, that the command is safe to run) I would just try to use it and catch the error (OSError in this case - I checked for file does not exist and file is not executable and they both give OSError).

It helps if the executable has something like a `--version` or `--help` flag that is a quick no-op.

```
import subprocess
myexec = "python2.8"
try:
    subprocess.call([myexec, '--version']
except OSError:
    print "%s not found on path" % myexec 
```

This is not a general solution, but will be the easiest way for a lot of use cases - those where the code needs to look for a single well known executable which is safe to run, or at least safe to run with a given flag.

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-12-18T06:08:00.147

See [os.path](http://docs.python.org/library/os.path.html#module-os.path) module for some useful functions on pathnames. To check if an existing file is executable, use [os.access(path, mode)](http://docs.python.org/library/os.html#os.access), with the os.X_OK mode.

> os.X_OK
> 
> Value to include in the mode parameter of access() to determine if path can be executed.

**EDIT:** The suggested `which()` implementations are missing one clue - using [`os.path.join()`](http://docs.python.org/library/os.path.html#os.path.join) to build full file names.

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-08-31T10:30:02.497

I know that I'm being a bit of a necromancer here, but I stumbled across this question and the accepted solution didn't work for me for all cases Thought it might be useful to submit anyway. In particular, the "executable" mode detection, and the requirement of supplying the file extension. Furthermore, both python3.3's `shutil.which` (uses `PATHEXT`) and python2.4+'s `distutils.spawn.find_executable` (just tries adding `'.exe'`) only work in a subset of cases.

So I wrote a "super" version (based on the accepted answer, and the `PATHEXT` suggestion from Suraj). This version of `which` does the task a bit more thoroughly, and tries a series of "broadphase" breadth-first techniques first, and eventually tries more fine-grained searches over the `PATH` space:

```
import os
import sys
import stat
import tempfile

def is_case_sensitive_filesystem():
    tmphandle, tmppath = tempfile.mkstemp()
    is_insensitive = os.path.exists(tmppath.upper())
    os.close(tmphandle)
    os.remove(tmppath)
    return not is_insensitive

_IS_CASE_SENSITIVE_FILESYSTEM = is_case_sensitive_filesystem()

def which(program, case_sensitive=_IS_CASE_SENSITIVE_FILESYSTEM):
    """ Simulates unix `which` command. Returns absolute path if program found """
    def is_exe(fpath):
        """ Return true if fpath is a file we have access to that is executable """
        accessmode = os.F_OK | os.X_OK
        if os.path.exists(fpath) and os.access(fpath, accessmode) and not os.path.isdir(fpath):
            filemode = os.stat(fpath).st_mode
            ret = bool(filemode & stat.S_IXUSR or filemode & stat.S_IXGRP or filemode & stat.S_IXOTH)
            return ret

    def list_file_exts(directory, search_filename=None, ignore_case=True):
        """ Return list of (filename, extension) tuples which match the search_filename"""
        if ignore_case:
            search_filename = search_filename.lower()
        for root, dirs, files in os.walk(path):
            for f in files:
                filename, extension = os.path.splitext(f)
                if ignore_case:
                    filename = filename.lower()
                if not search_filename or filename == search_filename:
                    yield (filename, extension)
            break

    fpath, fname = os.path.split(program)

    # is a path: try direct program path
    if fpath:
        if is_exe(program):
            return program
    elif "win" in sys.platform:
        # isnt a path: try fname in current directory on windows
        if is_exe(fname):
            return program

    paths = [path.strip('"') for path in os.environ.get("PATH", "").split(os.pathsep)]
    exe_exts = [ext for ext in os.environ.get("PATHEXT", "").split(os.pathsep)]
    if not case_sensitive:
        exe_exts = map(str.lower, exe_exts)

    # try append program path per directory
    for path in paths:
        exe_file = os.path.join(path, program)
        if is_exe(exe_file):
            return exe_file

    # try with known executable extensions per program path per directory
    for path in paths:
        filepath = os.path.join(path, program)
        for extension in exe_exts:
            exe_file = filepath+extension
            if is_exe(exe_file):
                return exe_file

    # try search program name with "soft" extension search
    if len(os.path.splitext(fname)[1]) == 0:
        for path in paths:
            file_exts = list_file_exts(path, fname, not case_sensitive)
            for file_ext in file_exts:
                filename = "".join(file_ext)
                exe_file = os.path.join(path, filename)
                if is_exe(exe_file):
                    return exe_file

    return None 
```

Usage looks like this:

```
>>> which.which("meld")
'C:\\Program Files (x86)\\Meld\\meld\\meld.exe' 
```

The accepted solution did not work for me in this case, since there were files like `meld.1`, `meld.ico`, `meld.doap`, etc also in the directory, one of which were returned instead (presumably since lexicographically first) because the executable test in the accepted answer was incomplete and giving false positives.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-17T04:06:02.103

Added windows support

```
def which(program):
    path_ext = [""];
    ext_list = None

    if sys.platform == "win32":
        ext_list = [ext.lower() for ext in os.environ["PATHEXT"].split(";")]

    def is_exe(fpath):
        exe = os.path.isfile(fpath) and os.access(fpath, os.X_OK)
        # search for executable under windows
        if not exe:
            if ext_list:
                for ext in ext_list:
                    exe_path = "%s%s" % (fpath,ext)
                    if os.path.isfile(exe_path) and os.access(exe_path, os.X_OK):
                        path_ext[0] = ext
                        return True
                return False
        return exe

    fpath, fname = os.path.split(program)

    if fpath:
        if is_exe(program):
            return "%s%s" % (program, path_ext[0])
    else:
        for path in os.environ["PATH"].split(os.pathsep):
            path = path.strip('"')
            exe_file = os.path.join(path, program)
            if is_exe(exe_file):
                return "%s%s" % (exe_file, path_ext[0])
    return None 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-08-25T13:10:52.853

An important question is "**Why** do you need to test if executable exist?" Maybe you don't? ;-)

Recently I needed this functionality to launch viewer for PNG file. I wanted to iterate over some predefined viewers and run the first that exists. Fortunately, I came across `os.startfile`. It's much better! Simple, portable and uses the *default* viewer on the system:

```
>>> os.startfile('yourfile.png') 
```

**Update:** I was wrong about `os.startfile` being portable... It's Windows only. On Mac you have to run `open` command. And `xdg_open` on Unix. There's a [Python issue](http://bugs.python.org/issue3177) on adding Mac and Unix support for `os.startfile`.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-10-13T22:43:51.193

This seems simple enough and works both in python 2 and 3

```
try: subprocess.check_output('which executable',shell=True)
except: sys.exit('ERROR: executable not found') 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-11-06T18:05:55.643

You can try the external lib called "sh" ([http://amoffat.github.io/sh/](http://amoffat.github.io/sh/)).

```
import sh
print sh.which('ls')  # prints '/bin/ls' depending on your setup
print sh.which('xxx') # prints None 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-18T11:34:02.280

So basically you want to find a file in mounted filesystem (not necessarily in PATH directories only) and check if it is executable. This translates to following plan:

*   enumerate all files in locally mounted filesystems
*   match results with name pattern
*   for each file found check if it is executable

I'd say, doing this in a portable way will require lots of computing power and time. Is it really what you need?

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-19T05:11:05.517

There is a [which.py](http://svn.python.org/view/python/trunk/Tools/scripts/which.py?view=markup) script in a standard Python distribution (e.g. on Windows `'\PythonXX\Tools\Scripts\which.py'`).

EDIT: `which.py` depends on `ls` therefore it is not cross-platform.

# sql - sql server replication - 从查询中获取上次同步日期

> ID：377023
> 
> 赞同：1
> 
> 时间：2008-12-18T06:03:14.133
> 
> 标签：sql, sql-server, synchronization, replication

有谁知道从 sql server (2008) 查询上次同步日期。

它与复制监视器中显示的信息相同，但我希望能够从查询中获取该日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-01-04T18:38:22.270

我创建了一个这样的视图来获取订阅者的最后日期

```
select subscriber_name, max(start_time) as last_sync 
from msMerge_sessions inner join msMerge_agents 
   on msmerge_agents.id = msmerge_sessions.agent_id 
group by subscriber_name 
```

我将视图称为“LastSync” - 然后我像这样加入该视图以获得类似于复制监视器显示的表示。

```
SELECT     dbo.LastSync.id, dbo.LastSync.subscriber_name, dbo.LastSync.creation_date, dbo.LastSync.last_sync, 
                  distribution.dbo.MSmerge_sessions.estimated_upload_changes + distribution.dbo.MSmerge_sessions.estimated_download_changes AS estimate_rows, 
                  distribution.dbo.MSmerge_sessions.upload_inserts + distribution.dbo.MSmerge_sessions.upload_updates + distribution.dbo.MSmerge_sessions.upload_deletes + distribution.dbo.MSmerge_sessions.download_inserts
                   + distribution.dbo.MSmerge_sessions.download_updates + distribution.dbo.MSmerge_sessions.download_deletes AS actual_rows, 
                  distribution.dbo.MSmerge_sessions.duration AS total_seconds, distribution.dbo.MSmerge_sessions.percent_complete, 
                  distribution.dbo.MSmerge_sessions.delivery_rate, CASE (runstatus) 
                  WHEN 1 THEN 'Start' WHEN 2 THEN 'Succeed' WHEN 3 THEN 'In Progress' WHEN 4 THEN 'Idle' WHEN 5 THEN 'Retry' WHEN 6 THEN 'Fail' END AS Status
FROM         distribution.dbo.MSmerge_sessions INNER JOIN
                  dbo.LastSync ON dbo.LastSync.id = distribution.dbo.MSmerge_sessions.agent_id AND distribution.dbo.MSmerge_sessions.start_time = dbo.LastSync.last_sync 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T11:05:32.370

通过使用系统表 msMerge_sessions，您可以看到很多有关合并会话的信息：

```
select * from msMerge_sessions 
```

根据您需要的信息，使用数据库中可用的其他系统表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T13:13:47.147

对于已回答的数字 3

很大的努力，但有一些修改关于运行查询的能力视图

---- 创建视图 LastSync 如下

```
Create View LastSync As 
select subscriber_name, max(start_time) as last_sync, ID, creation_date
from msMerge_sessions inner join msMerge_agents 
   on msmerge_agents.id = msmerge_sessions.agent_id 
group by subscriber_name, ID, creation_date
Go 
```

---- 在下面运行查询

> 选择 dbo.LastSync.id、dbo.LastSync.subscriber_name、dbo.LastSync.creation_date、dbo.LastSync.last_sync、distribution.dbo.MSmerge_sessions.estimated_upload_changes + distribution.dbo.MSmerge_sessions.estimated_download_changes AS estimate_rows、distribution.dbo.MSmerge_sessions.upload_inserts + distribution.dbo.MSmerge_sessions.upload_updates + distribution.dbo.MSmerge_sessions.upload_deletes + distribution.dbo.MSmerge_sessions.download_inserts + distribution.dbo.MSmerge_sessions.download_updates + distribution.dbo.MSmerge_sessions.download_deletes AS actual_rows，distribution.dbo.MSmerge_sessions.duration AS total_seconds，distribution.dbo.MSmerge_sessions.percent_complete，distribution.dbo.MSmerge_sessions.delivery_rate，CASE（运行状态） WHEN 1 THEN 'Start' WHEN 2 THEN 'Succeed' WHEN 3 THEN '进行中' WHEN 4 THEN 'Idle' WHEN 5 THEN 'Retry' WHEN 6 THEN 'Fail' END AS Status FROM distribution.dbo.MSmerge_sessions INNER JOIN dbo.LastSync ON dbo.LastSync.id = distribution.dbo.MSmerge_sessions.agent_id AND distribution.dbo.MSmerge_sessions.start_time = dbo.LastSync.last_sync

- 祝你好运

# c# - Enum.ToString() 在工具提示中不起作用

> ID：377026
> 
> 赞同：2
> 
> 时间：2008-12-18T06:04:50.043
> 
> 标签：c#, asp.net, linq

我有一个 Linq 查询，我在其中执行以下操作：

```
query = context.Select(a => new 
{
   Course = (CourseType)a.CourseCode,
   CourseDetail = sting.Format("Course: {0}\r\nCourse Detail: {1}", ((CourseType)a.CourseCode).ToString(), a.CourseDetail)
});

enum CourseType{
 Unknown = 0,
 FullTime = 1,
 PartTime = 2
} 
```

a.CourseCode 是一个 int，a.CourseDetail 是一个字符串。我现在将网格内的标签绑定到此查询。我将 Text 设置为 <%# Eval("Course")%>，将 Tooltip 设置为 <%# Eval("CourseDetail")%>。尽管标签中的文本正确显示 Enum.ToString() 的预期值，但 Tootip 始终将枚举的整数值的值显示为 1,2,3...

这是什么原因造成的？

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-24T23:19:24.090

我认为这是一个错误（或功能）LINQ to SQL。我猜它会重写

```
query = context.Select(a => new 
{
   Course = (CourseType)a.CourseCode,
   CourseDetail = sting.Format("Course: {0}\r\nCourse Detail: {1}",
                        ((CourseType)a.CourseCode).ToString(), a.CourseDetail)
}); 
```

至

```
query = context.Select(a => new 
{
   Course = (CourseType)a.CourseCode,
   CourseDetail = sting.Format("Course: {0}\r\nCourse Detail: {1}",
                               a.CourseCode.ToString(), a.CourseDetail)
}); 
```

因为枚举是数据库中的一个int，所以这是等价的吧？（错误的。）

解决此问题的一种方法是将 ToString() 交给框架，而不是 LINQ to SQL，方法是使用

```
query = context.Select(a => new 
{
   Course = (CourseType)a.CourseCode,
   CourseDetail = a.CourseDetail
}.ToArray() // get LINQ to SQL out of the way
.Select(a => new
{
   Course = a.Course,
   CourseDetail = sting.Format("Course: {0}\r\nCourse Detail: {1}",
                               a.Course, a.CourseDetail)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T10:57:21.530

你确定那是你使用的确切代码吗？

有一个错字：sting.Format 而不是 st **ing.Format**，所以我猜你已经为这个问题重新输入了代码。检查以确保所有括号都在正确的位置等。

我尝试了以下代码，打印出“Fulltime”，因此 .ToString 方法应该可以按您的预期工作：

```
class Program
{
    enum CourseType
    {
        Unknown = 0,
        Fulltime = 1,
        Parttime = 2
    }

    static void Main(string[] args)
    {
        var i = 1;
        Console.WriteLine("Coursetype: {0}", ((CourseType)i).ToString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-24T23:30:34.270

静态[`Enum.GetName()`](http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx)方法用于获取给定枚举值的常量名称。尝试调用`Enum.GetName(typeof(CourseType), a.CourseCode)`您的课程详细信息行，如下所示：

```
CourseDetail = String.Format("Course: {0}\r\nCourse Detail: {1}", Enum.GetName(typeof(CourseType), a.CourseCode), a.CourseDetail) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T14:58:46.363

你真的在那里设置了正确的值吗？我只问是因为你的枚举 CourseTypes 只上升到 2，但你说：

> Tootip 始终将枚举的整数值的值显示为 1,2,3...

在您的代码中，您有：

```
 Course = (CourseType)a.CourseCode,
   CourseDetail = sting.Format("Course: {0}\r\nCourse Detail: {1}", ((CourseType)a.CourseCode).ToString(), a.CourseDetail) 
```

看起来您正在尝试将课程**代码**解析为课程**类型**（这可能只是表明参数名称选择不当），但可能是您的问题所在。

如果我有：

```
 var Course = (CourseType)3; 
```

这将编译得很好，即使枚举只到 2，但是当我调用 .ToString() 时，我只会得到“3”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T11:12:34.213

不是直接的答案，而只是一个问题，您为什么要输入：

```
((CourseType)i).ToString()
((CourseType)a.CourseCode).ToString() 
```

string.Format 将对象作为 ParamArray 并在每个对象上调用 .ToString()。您使用的附加 .ToString() 仅执行创建不需要的新字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-24T23:02:50.457

我刚刚在使用 LINQ 时遇到了我认为同样的问题。以下代码始终返回 OfferType 枚举的数字表示。

```
public enum OfferType
{
  Unknown,
  Dining,
  Shopping,
  etc...
}

return (from so in db.Offers
        where so.Status == status
        select new
               {
                 so.Headline,
                 so.BusinessName,
                 OfferType = ((OfferType) so.OfferTypeId).ToString(),
                 ExpirationDate = so.ExpirationDate.ToShortDateString(),
                 StartDate = so.StartDate.ToShortDateString(),
               }).ToList(); 
```

在行

```
OfferType = ((OfferType) so.OfferTypeId).ToString(), 
```

OfferType 始终是枚举值的数字表示，而不是预期的字符串表示。so.OfferTypeId 的值是正确的。将线路更改为

```
OfferType = ((OfferType) 1).ToString(), 
```

将返回枚举的预期字符串表示。

我不得不将演员表和 ToString 移动到另一种方法以使其正常工作。

```
OfferType = GetOfferType(so.OfferTypeId),

...

public static string GetOfferType(int id)
{
  return ((OfferType) id).ToString();
} 
```

# c# - Silverlight Datagrid：根据值更改单元格样式

> ID：377030
> 
> 赞同：3
> 
> 时间：2008-12-18T06:07:09.167
> 
> 标签：c#, silverlight, datagrid, cells

我有一些数据。如果该数据满足特定条件，我想浏览该数据并更改单元格（例如 - 背景颜色）。不知何故，我无法弄清楚如何在 Silverlight 中完成这个看似简单的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T15:23:37.717

这是稍微旧的代码（来自 RTM 之前的代码），但它的功能类似于您正在寻找的东西。它检查一行中某个对象的一些数据，然后相应地设置该行的颜色。

**XAML：**

```
<my:DataGrid x:Name="Grid" Grid.Row="1" Margin="5" GridlinesVisibility="None" PreparingRow="Grid_PreparingRow">
    <my:DataGrid.Columns>
        <my:DataGridTextBoxColumn 
            DisplayMemberBinding="{Binding Cheese}" 
            Header="Cheese"></my:DataGridTextBoxColumn>
        <my:DataGridTextBoxColumn 
            DisplayMemberBinding="{Binding Biscuit}" 
            Header="Biscuit"></my:DataGridTextBoxColumn>
    </my:DataGrid.Columns>
</my:DataGrid> 
```

**代码：**

```
this.Grid.AlternatingRowBackground = null; 

private void Grid_PreparingRow(object sender, DataGridRowEventArgs e)
{
    CheesyClass c = e.Row.DataContext as CheesyClass;
    if (c != null && c.Cheese == "cheddar")
    {
       e.Row.Background = new System.Windows.Media.SolidColorBrush(System.Windows.Media.Color.FromArgb(255, 255, 125, 125));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-12T07:51:27.450

实际上，这并非在所有示例中都有效。请参阅这些链接以了解实现此目的的“正确”方式

[http://silverlight.net/forums/p/27465/93474.aspx#93474](http://silverlight.net/forums/p/27465/93474.aspx#93474)

[http://silverlight.net/forums/t/27467.aspx](http://silverlight.net/forums/t/27467.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-23T15:16:13.277

我通常为每个绑定的数据类型编写自定义 ValueConverters，返回 Visibility、Color 等。

这提供了一个定义自定义规则的点，我发现效果很好。

Robin 的第二个链接描述了编写自定义 ValueConverter。

# flash - 删除flash 9中的右键菜单

> ID：377033
> 
> 赞同：8
> 
> 时间：2008-12-18T06:08:22.983
> 
> 标签：flash, actionscript-3, menu, cs3, right-click

是否可以使用 actionscript 3 禁用右键菜单？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-18T11:31:53.050

您可以使用：

```
stage.showDefaultContextMenu = false; 
```

隐藏除设置选项之外的所有内容。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-20T19:22:11.747

从 Flash Player 11.2 开始，现在可以覆盖鼠标右键单击的行为，例如

```
stage.addEventListener(MouseEvent.RIGHT_CLICK, function(e:Event){}); 
```

这是[ActionScript 3 参考中的相应条目](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html#RIGHT_CLICK)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T06:21:06.873

我认为您不能在 AS3 中执行此操作（Adobe 可能永远不会在其中提供支持，因为它会阻止用户访问安全设置）。

有一些方法可以通过 HTML 等来实现。

查看[http://www.actionscript.org/forums/showthread.php3?t=175669](http://www.actionscript.org/forums/showthread.php3?t=175669)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-30T13:41:27.333

正如 Lain 所说，您可以隐藏除“设置”项之外的所有内容。

顺便说一句：如果您需要自定义它，您可以使用 flash.ui 包中的[ContextMenu 类](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/ui/ContextMenu.html)。首先调用 hideBuiltInItems 以隐藏除设置之外的所有内容，然后将其分配给要使用菜单的对象的菜单属性（或整个小程序的根）。

仅供参考，有一个很好的教程，你可以在[这里找到](http://www.albinoblacksheep.com/tutorial/contextmenu)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-16T13:17:53.747

这段代码也可以

```
var newMenu=new ContextMenu();
newMenu.hideBuiltInItems();
this.menu = newMenu; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-13T11:59:49.760

几年后你好。我有同样的问题，但在使用触摸屏时。如果您让定点设备（我的手指）触摸屏幕超过一秒钟，则会显示“右键单击菜单”。我将它转到Windows7下的控制面板，“铅笔和输入设备”，触摸选项卡，操作，关闭“按住”操作。

我的窗口是西班牙语，名称可能有点不同，但我相信你会知道哪个按钮是哪个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-23T10:27:53.810

这是一个更好的选择

```
_level1._y = 195;
var myMenu:ContextMenu = new ContextMenu();
myMenu.hideBuiltInItems();
_root.menu = myMenu; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-12T14:24:10.290

如果您可以忍受，`wmode` `opaque`那么您可以在浏览器级别拦截右键单击，如下所示：

[http://www.uza.lt/rightclick/](http://www.uza.lt/rightclick/)

# javascript - 使用多个 id 和类的 jQuery 翻转

> ID：377035
> 
> 赞同：3
> 
> 时间：2008-12-18T06:10:44.103
> 
> 标签：javascript, jquery, plugins, rollovers

我正在建立一个照片库，我想做的是让用户滚动图像（假设出于这个问题的目的，它是一张苹果的照片），所有其他苹果图像该页面还显示其“结束”状态。

任何和所有帮助将不胜感激，并提前感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T06:47:21.847

您可以将图像的“类型”添加为类。例如一个苹果将是：

```
<img src='' class='apple fruit red' /> 
```

您可以拥有任意数量的空格分隔类。

然后添加以下处理程序：

```
$(".apple").mouseover(function() {
   $(".apple").addClass("overState");
}); 
```

您需要在 CSS 中定义 overState。在 mouseout 上，您必须删除该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T07:24:47.853

所以每个图像都有许多标签（例如：“apple”、“red”、“big”），当您将鼠标悬停在大红苹果上时，您希望所有其他的苹果、大的东西和红色的东西都亮起来吗？

正如 kgiannakakis 建议的那样，我会将这些数据放入图像的类属性中 - 唯一的区别是我会为每个类添加一些前缀，这样您就不会与页面上的其他类发生冲突。

```
<img src="the-big-red-apple.jpg" class="tagged tag-big tag-red tag-apple" /> 
```

我还在那里添加了一个名为“tagged”的额外类，因此您可以从导航图像或其他任何内容中分辨出您的标记照片。

```
$('img.tagged')
    .each(function() {
        var thisClasses = this.className.split(/s+/); // array of classes.
        var search = [];
        for (var i = 0; i < thisClasses.length; ++i) {
            if (thisClasses[i].substr(0, 4) == "tag-") {
                search.push("." + thisClasses[i]);
            }
        }
        $(this).data("tags", search.join(","));  // ".tag-big,.tag-red,.tag-apple"
    })
    .hover(function() {
        $('img.tagged')
            .filter(this.data('tags'))
            .addClass("highlight")
        ;
    }, function() {
        $('img.tagged')
            .filter(this.data('tags'))
            .removeClass("highlight")
        ;
    })
; 
```

这样做最初是遍历所有标记的图像，并计算出每个标记上的标记，并将其存储到该元素的 data() 中。这意味着我们只需要这样做一次，而不是每次。

然后它为每个标记的图像添加一个[悬停](http://docs.jquery.com/Events/hover)事件以查找与该图像的任何标签匹配的任何内容并添加“highlight”类。同样，当您鼠标移出时，它会删除该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-19T22:09:08.983

## 更改图片来源

这种方法实际上会以统一的方式改变图像源，而不是仅仅对它们应用一个类。

```
function swapImageGroup(imgSelector,suffix){
if (suffix == null) {suffix = "-hover";}
//imgSelector is the jQuery selector to use
//both imgSelector and suffix must be strings
$(selector).hover(
   function() {
      $(selector).each(function(){
      //store ".jpg" or ".png" or whatever as fileExtension
      var fileExtension = $(this).attr("src").substr($(this).attr("src").lastIndexOf("."));
      //replace something like ".jpg" with something like "-hover.jpg",
      //assuming suffix == "-hover"
      $(this).attr("src", $(this).attr("src").replace(fileExtension, suffix + fileExtension));
    });
    },
    function() {
      $(selector).each(function(){
      //chop off the end of the filename, starting at "-hover" (or whatever)
      //and put the original extension back on
      $(this).attr("src", $(this).attr("src").split(suffix + ".").join("."));
      });
    }
);
} 
```

所以你会使用这样的功能：

```
swapImageGroup("img.apple"); 
```

或者

```
swapImageGroup("img.foo","-active"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T08:42:46.510

如果这些是链接（锚标记），则不需要 jQuery 来执行此操作。您可以在 CSS 中使用 :hover 。

```
a.apple:hover img {
  /* whatever you want to change here */
} 
```

编辑：忽略我。这不会同时更改页面上的所有苹果元素。这就是我在深夜困倦时细读的结果。

# language-features - 为什么要在 python 上使用 ruby ，反之亦然？

> ID：377037
> 
> 赞同：5
> 
> 时间：2008-12-18T06:11:34.587
> 
> 标签：language-features, scripting-language

在决定使用哪种语言或技术来实现一个想法时，我想知道；一个设计，做出决定的因素有哪些？特别谈到流行的脚本语言，为什么要选择使用 ruby​​ 而不是 python 或 perl，反之亦然？所有这些脚本语言都证明了它们的价值，那么如何决定呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T06:58:01.263

我刚刚遇到了[这个比较](http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&lang=python&lang2=ruby)，b/w Ruby 和 Python，这是在性能和​​内存管理方面。

可以在[这里](http://c2.com/cgi/wiki?PythonVsRuby)找到一个公平的比较。此外，我倾向于同意上述所有三个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T06:18:26.490

除了一种语言接受而另一种语言没有的任何炒作之外，我认为有两个因素在起作用：语言的掌握程度和库的可用性。如果你已经了解 Ruby，你更有可能再次使用它，并且在被问到时也会推荐它；对于 Python 也是如此。写。库：如果你想使用 Ruby-on-Rails（你可能出于某种原因选择了它），你必须使用 Ruby；同样，如果你想使用 Django，你必须使用 Python。等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T06:20:55.660

这在很大程度上取决于您想要做什么（股票答案）。

Ruby 和 Python 之间并没有太大的区别——两者都是面向对象的语言，实际上，它们的相似之处多于不同之处。我建议您将它们中的每一个都用于中等规模的编程项目 - 说一些可能需要 2 或 3 小时的东西。您会注意到它们中的每一个可能会以错误的方式惹恼您（例如，在涉及 Python 时，缩进作为语法会让一些人望而却步。）很多选择将取决于您的个人喜好.

如果这是您正在考虑实施的独立项目，那么您选择两种语言中的哪一种可能并不重要。如果您需要与一些现有的基础设施进行交互，那么这可能很重要 - 例如，如果您需要使用一些与 Rails 相关的基础设施，那么您可能想要使用 Ruby，如果它是 Django，那么您会想要Python。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T06:21:40.073

我在做决定时会考虑这些因素——

您的舒适度和您的团队

你的能力和你的团队

您的资源

要求

平台成熟度

支持

# c# - 使用 ThreadPools 搜索对象列表

> ID：377039
> 
> 赞同：0
> 
> 时间：2008-12-18T06:17:08.350
> 
> 标签：c#, wpf, threadpool

我在一个列表中有这些容器对象（我们称它们为容器）。这些 Container 对象中的每一个又`DataItem`在列表中具有一个（或派生类）。在典型场景中，用户将拥有 15-20 个 Container 对象，每个对象有 1000-5000`DataItems`个。然后有一些`DataMatcher`对象可用于不同类型的搜索。这些工作大部分都很好（因为我对它们进行了数百个单元测试），但为了让我的 WPF 应用程序感觉敏捷和响应，我决定我应该使用`ThreadPool`这个任务。因此，我有一个在 Container 对象上运行的**DataItemCommandRunner**，并且基本上在列表中执行每个委托，它`DataItem`依次作为每个委托的参数；我用`ThreadPool`为每个 Container 排队一个线程，这样理论上搜索在多核计算机等上应该尽可能高效。

这基本上是在一个看起来像这样的**DataItemUpdater类中完成的：**

```
public class DataItemUpdater
{
    private Container ch;
    private IEnumerable<DataItemCommand> cmds;

    public DataItemUpdater(Container container, IEnumerable<DataItemCommand> commandList)
    {
        ch = container;
        cmds = commandList;
    }

    public void RunCommandsOnContainer(object useless)
    {
        Thread.CurrentThread.Priority = ThreadPriority.AboveNormal;
        foreach (DataItem di in ch.ItemList)
        {
            foreach (var cmd in cmds)
            {
                cmd(sh);
            }
        }
        //Console.WriteLine("Done running for {0}", ch.DisplayName);
    }
} 
```

（**RunCommandsOnContainer**的无用对象参数是因为我正在尝试使用和不使用线程，其中一个需要一些参数。此外，将优先级设置为**AboveNormal**也只是一个实验。）

这适用于除一种情况外的所有情况 - 当我使用将查找包含所有正在搜索的单词的对象的`AllWordsMatcher`对象类型时（而不是任何单词，例如确切的短语或正则表达式）。`DataItem`

这是一个非常简单`somestring.Contains(eachWord)`的基于对象，由单元测试支持。但这里有一些毛茸茸的奇怪。

当**RunCommandsOnContainer**使用`ThreadPool`线程运行时，它将返回疯狂的结果。假设我有一个这样的字符串：

```
var someString = "123123123 - just some numbers"; 
```

我运行这个：

```
var res = someString.Contains("data"); 
```

当它运行时，这实际上会返回很多 true - 我有调试信息显示它对于空字符串和其他根本不包含数据的字符串返回 true。此外，即使字符串实际上包含正在查找的数据，它有时也会返回 false。

在这一切的踢球者？为什么我怀疑`ThreadPool`而不是我自己的代码？

当我为我的主线程中的每个容器运行**RunCommandsOnContainer()**命令时（即锁定 UI 和所有内容），它可以 100% 正确运行 - 每次！它永远不会找到它不应该找到的任何东西，它永远不会跳过它应该找到的任何东西。

但是，一旦我使用`ThreadPool`，它就会开始找到**很多它不应该找到的**项目，而有时却找不到它应该找到的项目。

我意识到这是一个复杂的问题（尝试调试很痛苦，这是肯定的！），但是任何关于为什么以及如何解决这个问题的见解将不胜感激！

谢谢！

符文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T06:30:52.003

从您发布的片段中很难看出，但从症状来看，我会查看 AllWordsMatcher （查找静态状态）。如果 AllWordsMatcher 是有状态的，您还应该检查您是否正在为每个线程创建一个新实例。

更一般地说，我会查看匹配/搜索过程中涉及的所有实例，特别是多线程时使用的工作对象。从过去的经验来看，问题通常出在那儿。（在这种情况下，很容易看太多表示您的业务数据Container/DataItem 的对象图）

# apache - .htaccess - 规则被忽略

> ID：377050
> 
> 赞同：1
> 
> 时间：2008-12-18T06:28:45.237
> 
> 标签：apache, .htaccess

我在我的 .htaccess 文件中使用这一行来自动添加斜杠（如果不存在）

```
rewriteRule ^(([a-z0-9\-]+/)*[a-z0-9\-]+)$ /$1/ [NC,R=301] 
```

这很好，直到我使用这些行将所有请求重定向到非文件或目录到 index.php

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php 
```

这现在转发页面，但不添加尾部斜杠。

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T06:31:49.693

我想通了，我在第一个 rewriteRule 中添加了最后一条规则的 L。

所以现在看起来像这样

```
rewriteRule ^(([a-z0-9\-]+/)*[a-z0-9\-]+)$ /$1/ [NC,R=301,L] 
```

# sql - 不可用天数

> ID：377058
> 
> 赞同：2
> 
> 时间：2008-12-18T06:35:45.783
> 
> 标签：sql, sql-server, tsql, datetime

我需要一个简单的 SQL 来完成以下任务：

问题：

当一个汽油铺的燃料用完时，管理员会在燃料用完时记下日期时间 (RunOutDate)，并在燃料供应恢复时记下日期时间 (ResupplyDate)。

我需要创建一份关于铺位燃料用完多少*天的报告。*

例如。

1/1/1 10:10 到 1/1/1 10:50 应计为 1

1/1/1 10:10 至 2/1/1 07:20 应计为 2

1/1/1 23:55 至 2/1/1 00:10 应计为 2

我无法使用 DateDiff 使用小时数，因为 24 小时可能跨越 2 天。

TIA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T06:51:20.870

```
DATEDIFF(d, RunOutDate, ResupplyDate) + 1 
```

请记住，DATEDIFF 始终计算您跨越的边界数。对于天数（第一个参数 d），它计算时钟经过午夜的次数。因此，要计算涵盖的天数，只需加 1。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T06:48:08.460

DATEDIFF 使用天，然后加 1。

DATEDIFF 使用午夜来计算天数，因此对于上面的每个示例，您将得到 0、1、1。然后加1。

```
DATEDIFF(day, '16 Dec 2008 10:10', '16 Dec 2008 10:50') + 1 
```

# nhibernate - 如何查看城堡活动记录传递给 NHibernate 的映射配置？

> ID：377062
> 
> 赞同：1
> 
> 时间：2008-12-18T06:39:26.230
> 
> 标签：nhibernate, nhibernate-mapping, castle-activerecord

是否可以查看从 activerecord 传递到 nhibernate 的映射配置/映射 xml 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T12:54:05.943

您可以在配置文件的 ActiveRecord 部分中将 isDebug 标志设置为 true。启用此标志后，NHibernate 映射文件将在 ActiveRecord 引擎初始化后保存到应用程序目录。

# asp.net-mvc - JSON 参数自动。当 ajax 请求向 MVC 操作方法发出时转换为小写？

> ID：377071
> 
> 赞同：0
> 
> 时间：2008-12-18T06:50:39.653
> 
> 标签：asp.net-mvc, json, jquery

有人知道为什么我的参数在遇到我的 ASP.NET MVC 控制器操作时被“转换”为小写吗？

我只能假设它被转换为在 ajax 请求之前查看数据值，它的大小写正确，但是在 ajax 请求期间在 .NET 中调试我的操作方法并检查传入参数时，它已被转换为小写？

这给我带来了麻烦，因为我需要保留用户输入的案例。

下面的代码，正在发送的示例数据是：' `SimpleDATATest1`'

```
$.ajax({
    type: "GET",
    url: "/configuration/module-message-types/GetTranslation",
    data: "messageToTranslate=" + messageToTranslate,
    dataType: "json",
    success: function(result) {
        // Insert the returned HTML into the <div>.
        $('#TranslationResponse').html(result.message).fadeIn('fast');
        $("#" + ajaxLoadImgId).hide();
    },
    error: function(req, status, error) {
        $('#TranslationResponse').text('Could not load example translation message, please try reloading the page.');
        $("#" + ajaxLoadImgId).hide();
    }
}); 
```

而 MVC Action 方法签名是：

```
[AcceptVerbs(HttpVerbs.Get)]
    public JsonResult GetTranslation(string messageToTranslate) 
```

但是，当检查“messageToTranslate”的值时，它返回为：“ `simpledatatest1`”。

我怎样才能阻止任何力量改变这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T07:21:20.467

没关系......我发现我实施的这个是罪魁祸首：
[http://www.coderjournal.com/2008/03/force-mvc-route-url-lowercase/](http://www.coderjournal.com/2008/03/force-mvc-route-url-lowercase/)

# sharepoint - MOSS 2007 内容导入失败

> ID：377072
> 
> 赞同：0
> 
> 时间：2008-12-18T06:51:15.923
> 
> 标签：sharepoint, sharepoint-2007

我收到了一个 MOSS 2007 站点的内容导出，我需要在我的环境中复制它，但我在使用`stsadm`.

导出是使用`stsadm`类似于以下的命令完成的：

> stsadm -o export -url [http://localhost](http://localhost) -filename C:\Export

我正在使用导入命令，例如：

> stsadm -o import -url [http://myServer](http://myServer) -filename C:\Import

大多数事情都很好，直到我得到一个错误：

> 你调用的对象是空的。在 Microsoft.SharePoint.Deployment.RolesImport..ctor(*等等*

本质上，似乎是从另一台服务器导入角色组的错误。因为我的系统是 MOSS 2007 的全新安装，所以我没有像他们那样设置用户角色，我希望内容导入能够处理这个问题。但实际上，角色根本不重要。

是否可以进行内容导入但完全忽略角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T12:16:20.323

不，唯一的选择是删除内容导出的 Manifest.xml 文件中的角色。如果您将导出作为单个文件接收，只需将其重命名为 .CAB 并提取 Manifest.xml 文件进行修改。XML 格式非常广泛，可能需要您进行一些研究才能弄清楚角色的位置。Microsoft 在此处记录了 XML 架构：http: [//msdn.microsoft.com/en-us/library/bb249989.aspx](http://msdn.microsoft.com/en-us/library/bb249989.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-18T01:01:38.627

我们试图通过按照 Lars 的建议从清单中删除部分来解决这个问题，但随后无法导入所有内容。

我们必须在`-includeusersecurity`启用该选项的情况下进行导出

# visual-studio - 如何在 VC++ 的解决方案中定义全局设置？

> ID：377075
> 
> 赞同：12
> 
> 时间：2008-12-18T06:51:27.453
> 
> 标签：visual-studio, visual-c++, visual-studio-2008

我有许多解决方案，其中包含大量项目。我希望能够为所有项目使用的解决方案定义全局设置。例如包含目录。我希望能够在一个地方为解决方案中的所有项目更改包含目录。

当我搜索解决方案时，我找到了[与我的完全匹配](http://www.eggheadcafe.com/software/aspnet/33334376/solutionglobal-settings.aspx)的问题的良好描述，但那里建议的解决方案，项目属性表，是按项目定义的，而不是按解决方案定义的。

我可以使用环境变量或 Visual Studio 设置，但是需要编译代码的每个人都必须定义完全相同的设置。

谁能建议一种方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-18T14:27:34.193

我们使用属性表来实现这一点。可以将单个属性表分配给解决方案中的所有项目。从那时起，您可以更改该属性表中的设置，它将影响所有项目。

高级提示：我们实际上使用了多个属性表（例如，一个用于发布目标类型，一个用于调试目标类型）。提示是顺序非常重要。如果您手动编辑项目文件，则最后一个属性表将覆盖列表中先前属性表中的设置。如果您在 GUI 中进行编辑，那么 TOP 会覆盖它下面的那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T21:47:36.020

正如其他人所建议的那样，属性表可以做你想做的事。诀窍是像在 C++ 中`InheritedPropertySheets`一样使用。`#include`注意：项目文件和属性表文件的 XML 略有不同。`prjA.vcproj`这是两个项目 (和)的人为设计和简化的示例，`prjB.vcproj`其中包含相同的属性表 ( `sln.vsprops`)，而该属性表本身包含另一个 ( `strict.vsprops`)：

**严格的.vsprops**

```
<VisualStudioPropertySheet ...>
    <Tool Name="VCCLCompilerTool" WarningLevel="3" WarnAsError="true"/>
</VisualStudioPropertySheet> 
```

**sln.vsprops**

```
<VisualStudioPropertySheet ... InheritedPropertySheets=".\strict.vsprops">
    <Tool
        Name="VCCLCompilerTool"
        PreprocessorDefinitions="NOMINMAX=1"
        RuntimeTypeInfo="true"
    />
</VisualStudioPropertySheet> 
```

**prjA.vcproj**

```
<VisualStudioProject ...>
    <Configurations>
        <Configuration ... InheritedPropertySheets=".\sln.vsprops">
        </Configuration>
    </Configurations>
    ...
</VisualStudioProject> 
```

**prjB.vcproj**

```
<VisualStudioProject ...>
    <Configurations>
        <Configuration ... InheritedPropertySheets=".\sln.vsprops">
        </Configuration>
    </Configurations>
    ...
</VisualStudioProject> 
```

您可能还会发现[这个问题](https://stackoverflow.com/questions/142708/what-do-delimiter-and-inheritsfromparent-attributes-mean-in-vsprops-files)及其答案很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:37:15.793

也许您可以将 MSBuild 文件添加到您定义许多共享属性的解决方案中，然后将该文件[<Import>](http://msdn.microsoft.com/en-us/library/92x05xfs(VS.80).aspx)到您的所有实际项目中？

也就是说，在您的“设置”MSBuild 文件中，您定义了许多属性：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <WinUnitIncludeDir>C:\Includes\WinUnit</WinUnitIncludeDir>
        <!-- Other shared properties go here -->
    </PropertyGroup>
</Project> 
```

从您的实际项目中，您可以参考以下内容：

```
<Project ...>
    ...
    <Import Project="path/to/settings.msbuild" />
    ...
    <Configurations>
        <Configuration ...>
            <Tool Name="VCCLCompilerTool"
                  ...
                  AdditionalIncludeDirectories="$(WinUnitIncludeDir)"
                  ... />
            ...
        ...
    ...
</Project> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-28T13:30:38.007

按照建议，您应该查看属性表（又名 .vsprops 文件）。[我在这里](http://xnodet.blogspot.com/2009/08/short-introduction-to-vsprops-files-in.html)
写了一个关于这个特性的简短介绍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T13:08:03.760

前段时间我搜索了完全相同的东西，但没有找到我想要的东西。

唯一可能接近此功能的是[Property Sheets](http://msdn.microsoft.com/en-us/library/3z7t21ew(VS.80).aspx)。这并不完全是全球性的，因为它由一个项目拥有并被其他人使用。

# f# - F# 浮点范围是实验性的，可能会被弃用

> ID：377078
> 
> 赞同：4
> 
> 时间：2008-12-18T06:54:45.170
> 
> 标签：f#, floating-point

我正在尝试制作一个小函数来在具有给定增量的两个值之间进行插值。

```
[ 1.0 .. 0.5 .. 20.0 ] 
```

编译器告诉我这已被弃用，并建议使用整数然后转换为浮点数。但是，如果我有一个分数增量，这似乎有点冗长 - 我是否必须将我的开始值和结束值除以我的增量，然后再乘以？（耶！）。

我曾经在某个地方看到过关于使用序列推导来做到这一点的东西，但我不记得是如何做到的。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-24T21:45:18.480

TL;DR：**F# PowerPack 的`BigRational`类型是要走的路**。

* * *

## 浮点循环有什么问题

正如许多人指出的那样，`float`值不适合循环：

*   它们确实有舍入误差，就像`1/3`十进制一样，我们不可避免地会丢失从某个指数开始的所有数字；
*   他们确实经历了灾难性的取消（当减去两个*几乎*相等的数字时，结果四舍五入为零）；
*   它们始终具有非零[Machine epsilon](http://en.wikipedia.org/wiki/Machine_epsilon)，因此每次数学运算都会**增加**错误（除非我们多次添加不同的数字以使错误相互抵消——但循环并非如此）；
*   它们在整个范围内确实具有不同的精度：一个范围内的`[0.0000001 .. 0.0000002]`唯一值的数量等于 中的唯一值的数量`[1000000 .. 2000000]`；

## 解决方案

可以立即解决上述问题的方法是切换回整数逻辑。

使用[F# PowerPack](http://fsharppowerpack.codeplex.com/)，您可以使用`BigRational`以下类型：

```
open Microsoft.FSharp.Math
// [1 .. 1/3 .. 20]
[1N .. 1N/3N .. 20N]
|> List.map float
|> List.iter (printf "%f; ") 
```

**请注意**，我冒昧地将步骤设置为，`1/3`因为`0.5`从您的问题实际上具有精确的二进制表示 0.1 [b]并表示为 +1.00000000000000000000000 * 2 ^(-1)；因此它不会产生任何累积求和误差。

输出：

> 1.000000; 1.333333；1.666667；2.000000; 2.333333; 2.666667; 3.000000; **（跳过）** 18.000000；18.333333; 18.666667; 19.000000; 19.333333; 19.666667; 20.000000;

```
// [0.2 .. 0.1 .. 3]
[1N/5N .. 1N/10N .. 3N]
|> List.map float
|> List.iter (printf "%f; ") 
```

输出：

> 0.200000；0.300000；0.400000；0.500000；**（跳过）** 2.800000；2.900000；3.000000;

## 结论

*   `BigRational`使用整数计算，不比浮点*慢；*
*   每个值仅发生一次舍入（转换为 a`float`时，但不在循环内）；
*   `BigRational`就好像机器 epsilon 为零；

有一个明显的限制：您不能使用无理数，例如`pi`或`sqrt(2)`因为它们没有精确的分数表示。这似乎不是一个很大的问题，因为通常情况下，我们不会*同时*循环有理数和无理数，例如`[1 .. pi/2 .. 42]`. 如果我们这样做（比如几何计算），通常有一种方法可以减少不合理部分，例如从弧度切换到度数。

* * *

进一步阅读：

*   [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)
*   [PowerPack 中的数字类型](http://tomasp.net/blog/powerpack-numeric.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-04-16T23:10:29.863

有趣的是，浮动范围似乎不再被弃用。而且我记得最近看到一个问题（对不起，无法追踪）谈论浮动范围所体现的固有问题，例如

```
> let xl = [0.2 .. 0.1 .. 3.0];;

val xl : float list =
  [0.2; 0.3; 0.4; 0.5; 0.6; 0.7; 0.8; 0.9; 1.0; 1.1; 1.2; 1.3; 1.4; 1.5; 1.6;
   1.7; 1.8; 1.9; 2.0; 2.1; 2.2; 2.3; 2.4; 2.5; 2.6; 2.7; 2.8; 2.9] 
```

我只是想指出，您可以在`decimal`类型上使用范围，而此类舍入问题要少得多，例如

```
> [0.2m .. 0.1m .. 3.0m];;
val it : decimal list =
  [0.2M; 0.3M; 0.4M; 0.5M; 0.6M; 0.7M; 0.8M; 0.9M; 1.0M; 1.1M; 1.2M; 1.3M;
   1.4M; 1.5M; 1.6M; 1.7M; 1.8M; 1.9M; 2.0M; 2.1M; 2.2M; 2.3M; 2.4M; 2.5M;
   2.6M; 2.7M; 2.8M; 2.9M; 3.0M] 
```

如果你最后真的需要花车，那么你可以做类似的事情

```
> {0.2m .. 0.1m .. 3.0m} |> Seq.map float |> Seq.toList;;
val it : float list =
  [0.2; 0.3; 0.4; 0.5; 0.6; 0.7; 0.8; 0.9; 1.0; 1.1; 1.2; 1.3; 1.4; 1.5; 1.6;
   1.7; 1.8; 1.9; 2.0; 2.1; 2.2; 2.3; 2.4; 2.5; 2.6; 2.7; 2.8; 2.9; 3.0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-23T16:06:20.303

正如 Jon 和其他人所指出的，浮点范围表达式在数值上并不稳健。例如`[0.0 .. 0.1 .. 0.3]`等于`[0.0 .. 0.1 .. 0.2]`。在范围表达式中使用 Decimal 或 Int 类型可能会更好。

对于浮点数，我使用此函数，它首先通过最小的浮点步长将总范围增加 3 倍。我不确定这个算法现在是否非常健壮。但对我来说，确保停止值包含在 Seq 中就足够了：

```
let floatrange start step stop =
    if step = 0.0 then  failwith "stepsize cannot be zero"
    let range = stop - start 
                |> BitConverter.DoubleToInt64Bits 
                |> (+) 3L 
                |> BitConverter.Int64BitsToDouble
    let steps = range/step
    if steps < 0.0 then failwith "stop value cannot be reached"
    let rec frange (start, i, steps) =
        seq { if i <= steps then 
                yield start + i*step
                yield! frange (start, (i + 1.0), steps) }
    frange (start, 0.0, steps) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T07:25:06.870

试试下面的序列表达式

```
seq { 2 .. 40 } |> Seq.map (fun x -> (float x) / 2.0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T11:50:32.450

您还可以编写一个相对简单的函数来生成范围：

```
let rec frange(from:float, by:float, tof:float) =
   seq { if (from < tof) then 
            yield from
            yield! frange(from + by, tof) } 
```

使用它你可以写：

```
frange(1.0, 0.5, 20.0) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-12T13:48:57.043

Tomas Petricek 的答案的更新版本，它编译并适用于递减范围（并且适用于测量单位）：（但它看起来不那么漂亮）

```
let rec frange(from:float<'a>, by:float<'a>, tof:float<'a>) = 
   // (extra ' here for formatting)
   seq { 
        yield from
        if (float by > 0.) then
            if (from + by <= tof) then yield! frange(from + by, by, tof) 
        else   
            if (from + by >= tof) then yield! frange(from + by, by, tof) 
       }

#r "FSharp.Powerpack"
open Math.SI 
frange(1.0<m>, -0.5<m>, -2.1<m>) 
```

**更新**我不知道这是否是新的，或者它是否总是可能的，但我刚刚发现（[在这里](http://fssnip.net/3H)），这 - 更简单的 - 语法也是可能的：

```
let dl = 9.5 / 11.
let min = 21.5 + dl
let max = 40.5 - dl

let a = [ for z in min .. dl .. max -> z ]
let b = a.Length 
```

（注意，在这个特定的例子中有一个陷阱：）

# performance - 你需要多长时间才能适应 Haskell？

> ID：377082
> 
> 赞同：34
> 
> 时间：2008-12-18T07:00:23.100
> 
> 标签：performance, haskell

我是一个不错的 C/C++ 程序员。我发现 Haskell 非常有趣。但在我看来，尽管编写干净的 Haskell 代码相对容易，因为它很好地模仿了数学（我对此非常满意），但在 Haskell 中编写运行速度快的干净代码却非常困难。

更快的 Haskell 快速排序版本非常长且可怕，它与幼稚但短（两行）、干净且直观的实现没有相似之处。长而可怕的 Haskell 版本实际上仍然比更短更简单的 C 对应部分慢得多。

是因为当前的 Haskell 编译器太笨了，还是普通人（当然 SJP 除外）无法编写快速的 Haskell 代码？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-12-20T04:19:54.947

You ask two different questions: learning and performance.

*   It took me about a month to become comfortable with functional programming using recursion, pattern matching, `map`, `filter`, and `fold`. I did all that with ML but it translated to Haskell very easily.
*   It took me two or three years to wrap my head around monads, but that's because I read the wrong stuff. I think there are better tutorials now. But if you're beginning, avoid monads for a while.
*   It took me several months to get *good* at creating new type classes, but using the existing ones was easy.
*   I'm still not sure I have the hang of **lazy evaluation**. But I love Haskell's **purity** and tend to treat lazy evaluation as an unhappy accident that only a few people (like John Hughes) know how to exploit.

You've observed a performance problem only because you've adapted an algorithm loaded with mutation, which Tony Hoare designed for imperative languages, and tried to translate into Haskell. In Haskell as in any other functional language **the expensive operation is *allocation***. Try writing a **merge sort** and you'll find it's **simple and performs very well.**

How do you avoid making similar mistakes in the future? Have a look at Chris Okasaki's book [Purely Functional Data Structures](https://rads.stackoverflow.com/amzn/click/com/0521663504). Great book, and it will help you learn the 'functional way of doing things' without giving up performance.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-12-18T07:33:20.113

快速排序在 Haskell 中没有那么快有一个非常具体的原因。这是一个神一般的算法示例，它在其工作方式中融入了出色的黑客技术——在这种情况下，我所说的黑客技术是真正的 Haskell 爱好者认为不必要的危险和非数学的技术。最初的实现尽一切努力打破 Haskell 强加给自己的规则：真正的快速排序通过用新信息覆盖存储槽来工作。在 Haskell 中这样做是非常痛苦的，它发现对现有信息进行全新的复制要容易得多。

因此，尽管那个朴素的两行 Haskell 版本抓住了快速排序的一些本质（它进行了相同数量的键比较），但它并不是真正的快速排序。它缺少很大一部分进入它的天才，它充分利用了调整现有值状态的能力。因此，它会生成大量列表片段的中间副本。

推测：Haskell 编译器是否可以分析您的代码，应用与 Hoare（快速排序的发明者）相同的推理，并找出它可以通过以有状态的方式完全重新实现来优化它？可能。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-18T08:58:48.587

重点不是写出快速的 Haskell 代码，而是快速写出 Haskell 代码。当您到达那里并且需要使您的代码更快（呃）时，开始优化（或使用 FFI，您不必忘记您的 C++ 技能）。在 Haskell 中，您首先要寻找优雅、可靠性和可维护性。我会在我的 Haskell-fu 中添加分析，这样您就不会浪费时间优化未使用的内容。记住不要过早优化。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-12-19T22:33:54.830

因此，要回答标题中的问题，您可能会在短时间内对 Haskell 的基础知识感到宾至如归。特别是如果您已经熟悉函数式编程。真正让 Haskell 脱颖而出的东西，比如懒惰、类型类、类型族，当然还有可怕的 monad（和箭头），可能需要更多时间来理解和习惯。有很多学习语言的好资源，许多免费提供，还有一个乐于助人的社区，所以我想说你可能会在半认真学习的一两个星期内感觉舒服;-)

不过我认为这是值得的，就像有些人认为值得学习 Lisp 一样，即使你永远不会真正将它用于任何事情。这是值得的，因为它让你成为一个更好的程序员——它让你以不同的方式思考。我认为 Haskell 也有类似的效果。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-18T08:29:55.977

原因是计算机的数学基础不同于一般的 Haskell 和函数式语言的数学基础。

要了解编译器面临的问题... 将 Haskell 程序翻译成 C，使其尽可能接近原始程序，然后尝试优化该 C 代码（不要以 C 方式从头开始重写）

它并不愚蠢，但函数式语言并不是为了性能而设计的，简洁的数学符号也不是免费的。

# wpf - 使用 WPF 显示 XPS 文档的另一种方法

> ID：377087
> 
> 赞同：4
> 
> 时间：2008-12-18T07:06:21.870
> 
> 标签：wpf, xps, documentviewer, xpsviewer

我想问一下，除了 DocumentViewer 之外，是否还有其他替代方法可以在 WPF 应用程序中显示 XPS 文档？.NET 中的即用型控件或类（如果可能）。

这是因为在滚动页面时 DocumentViewer 有点慢。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-04T20:08:19.380

不，除非有任何我不知道的第三方控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-07T12:48:05.743

使用[NiXPS](http://www.nixps.com/)将您的 XPS 文档转换为 PDF，并使用任何用于 WPF 的 PDF 查看器。这样，您将获得比 DocumentViewer 更好的性能。

# haskell - 你如何在 Haskell 中进行泛型编程？

> ID：377093
> 
> 赞同：11
> 
> 时间：2008-12-18T07:09:32.020
> 
> 标签：haskell, generic-programming

来自 C++，我发现泛型编程必不可少。我想知道人们如何在 Haskell 中处理这个问题？

说一下如何在 Haskell 中编写通用交换函数？

Haskell中是否有等效的部分专业化概念？

在 C++ 中，我可以将通用交换函数部分专门化为通用 map/hash_map 容器的特殊函数，该容器具有 O(1) 容器交换的特殊交换方法。你是如何在 Haskell 中做到这一点的，或者 Haskell 中泛型编程的典型例子是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-18T08:01:27.857

这与您关于 Haskell 和快速排序的其他问题密切相关。我认为您可能至少需要阅读一本关于 Haskell 的书的*介绍*。听起来您似乎还没有掌握它的关键点，那就是它禁止您修改现有变量的值。

交换（在 C++ 中被理解和使用）就其本质而言，都是关于修改现有值的。这样我们就可以使用一个名称来引用一个容器，并用完全不同的内容替换该容器，并将该操作专门化为特定容器的快速（且无异常），从而允许我们实现修改和发布的方法（对于编写异常安全代码或尝试编写无锁代码至关重要）。

您可以在 Haskell 中编写通用交换，但它可能需要一对值并返回一个包含相同值但位置相反的新对，或类似的东西。不是真的一样的东西，也没有相同的用途。通过在地图内部挖掘并交换其各个成员变量来尝试将其专门用于地图是没有任何意义的，因为您只是不允许在 Haskell 中做类似的事情（您可以进行专门化，但不能变量的修改）。

假设我们想在 Haskell 中“测量”一个列表：

```
measure :: [a] -> Integer 
```

那是一个类型声明。这意味着该函数`measure`接受任何内容的列表（`a`是泛型类型参数，因为它以小写字母开头）并返回一个整数。所以这适用于任何元素类型的列表——它在 C++ 中称为函数模板，或在 Haskell 中称为多态函数（与 C++ 中的多态类不同）。

我们现在可以通过为每个有趣的案例提供专业化来定义它：

```
measure [] = 0 
```

即测量空列表，你得到零。

这是一个涵盖所有其他情况的非常笼统的定义：

```
measure (h:r) = 1 + measure r 
```

LHS 括号中的位是一个模式。它的意思是：取一个列表，把头部折断，叫它h，剩下的部分叫r。这些名称是我们可以使用的参数。这将匹配任何包含至少一项的列表。

如果您在 C++ 中尝试过模板元编程，那么这对您来说都是老生常谈了，因为它涉及完全相同的风格 - 递归执行循环，特化使递归终止。除了在 Haskell 中它在运行时工作（针对特定值或值模式的函数的专门化）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-18T08:28:06.870

正如 Earwicker 所说，这个例子在 Haskell 中意义不大。如果你绝对想要它，这里有类似的东西（交换一对的两个部分），来自交互式会话的 c&p：

```
GHCi, version 6.8.2: http://www.haskell.org/ghc/  :? for help
Loading package base ... linking ... done.
Prelude> let swap (a,b) = (b,a)
Prelude> swap("hello", "world")
("world","hello")
Prelude> swap(1,2)
(2,1)
Prelude> swap("hello",2)
(2,"hello") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-19T23:21:24.097

在 Haskell 中，函数尽可能是通用的（多态的）——编译器会推断出“最通用的类​​型”。例如，TheMarko 的示例交换在没有类型签名的情况下默认是多态的：

*Main> let swap (a,b) = (b,a)
*Main> :t swap
swap :: (t, t1) -> (t1, t)

至于部分特化，ghc 有一个非 98 扩展名：
[file:///C:/ghc/ghc-6.10.1/doc/users_guide/pragmas.html#specialize-pragma](http://file:///C:/ghc/ghc-6.10.1/doc/users_guide/pragmas.html#specialize-pragma)

另外，请注意术语不匹配。在 c++、Java 和 C# 中所谓的泛型在 Haskell 中称为多态。Haskell 中的“通用”通常表示多类型：http: [//haskell.readscheme.org/generic.html](http://haskell.readscheme.org/generic.html)
但是，我使用通用的 c++ 含义。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-09-01T16:35:13.340

在 Haskell 中，您将创建类型类。类型类不像 OO 语言中的类。以 Numeric 类型类为例，它表示类的任何实例都可以执行某些操作（+ - * /），因此 Integer 是 Numeric 的成员，并提供了被视为 Numeric 所需的函数的实现，并且可以在任何地方使用预计为数字。

假设您希望能够 foo 整数和字符串。然后将 Int 和 String 声明为 Foo 类型类的实例。现在，无论您在哪里看到类型 (Foo a)，您现在都可以使用 Int 或 String。

不能直接添加整数和浮点数的原因是因为 add 具有类型 (Numeric a) a -> a -> aa 是一个类型变量，就像常规变量一样，它只能绑定一次，所以只要你绑定它对 Int 列表中的每个 a 都必须是 Int。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-19T22:38:33.510

在阅读了 Haskell 书籍以真正理解 Earwicker 的答案之后，我建议您也阅读有关类型类的内容。我不确定“部分专业化”是什么意思，但听起来他们可以接近。

# c++ - GDI+ 抖动问题

> ID：377094
> 
> 赞同：4
> 
> 时间：2008-12-18T07:10:10.457
> 
> 标签：c++, gdi+, gdi

我有一个使用适用于 Windows 的 Win32 API 的 C++ 应用程序，当我不知道为什么会这样时，我遇到了 GDI+ 抖动问题。

我有一个自定义控件（自​​定义窗口）。当我收到 WM_PAINT 消息时，我在图形设备上使用 FillPolygon 绘制了一些多边形。此图形设备是使用 BeginPaint 的 HDC 创建的。

但是，当多边形出现在屏幕上时，它们会抖动而不是透明，并且似乎只显示很少的颜色（可能是 256 种？）让我想知道发生了什么。

我没有做任何特别的事情，据我所知，这是一个应该可以正常工作的简单示例。难道我做错了什么？

编辑：没关系。它只发生在远程桌面上，即使 C# 示例没有在远程桌面上抖动。远程桌面设置为 32 位颜色，所以我不知道这是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T07:41:57.070

> 它只发生在远程桌面上

许多远程应用程序会降低颜色深度以降低带宽要求。虽然我没有使用远程桌面，但在某些 VNC 连接上也会发生同样的情况。我会检查您的 RD 服务器和客户端设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T22:57:08.103

嗯...填充能力由目标设备决定。在远程桌面上工作时，AFAIK Windows 会替换显示驱动程序，从而可以更改显示的支持功能。

1.  在 wm_paint 上绘图时，实际上是直接在屏幕表面上绘制，而 .net 通常使用双缓冲（绘制到内存位图，然后对整个位图进行 blits）
2.  gdi+ 中有一些设置会影响绘图质量。也许屏幕上，屏幕外和远程绘画有不同的默认值？

# odbc - 使用 OdbcConnection 连接到 iSeries：密码提示

> ID：377097
> 
> 赞同：2
> 
> 时间：2008-12-18T07:12:26.927
> 
> 标签：odbc, ibm-midrange

我想使用 iSeries Client Access 驱动程序连接到 DB。我使用以下连接字符串：

DRIVER=客户端访问 ODBC 驱动程序（32 位）；QUERYTIMEOUT=0；PKG=QGPL/DEFAULT(IBM),2,0,1,0,512；LANGUAGEID=ENU；DFTPKGLIB=QGPL；DBQ=QGPL XXXXXXXX；SYSTEM=XXX。 XXXXXXX.XXX;登录=2

连接时出现异常：

错误 [28000] [IBM][iSeries Access ODBC 驱动程序]通信链路故障。comm rc=8015 - CWBSY1006 - 用户 ID 无效，密码长度 = 0，提示模式 = 从不

如何让应用程序提示用户输入他的数据库凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T19:17:13.573

我假设这是一个桌面应用程序，而不是基于应用程序措辞的服务器应用程序。

如果您可以使用 ODBC 数据源管理器中的 ODBC 设置，则可以将其设置为使用 iSeries 访问的默认设置。

否则，您可能必须在应用程序中提示输入用户名和密码，然后将其传递到连接字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-16T18:37:00.607

下面是一个关于如何从 Excel 建立到 iSeries 的 ODBC 连接的快速示例。如果它还没有连接，它会提示输入用户名和密码。您需要在客户端上安装 iSeries Navigator（也称为客户端访问）ODBC 驱动程序。

```
Dim DB2Con As New ADODB.Connection

DB2Con.Properties("Prompt") = adPromptComplete
DB2Con.Open "DRIVER=Client Access ODBC Driver (32-bit);SIGNON=1;SYSTEM = YOURSYSTEMNAME" 
```

# asp.net - 最新的 Microsoft Chart 和 ASP.NET MVC

> ID：377100
> 
> 赞同：6
> 
> 时间：2008-12-18T07:14:53.303
> 
> 标签：asp.net, asp.net-mvc, charts

最近 ASP.NET 开发人员推出了其最新的控件 Charting 控件。（[微软图表](http://www.microsoft.com/downloads/details.aspx?FamilyID=130f7986-bf49-4fe5-9ca8-910ae6ea442c&DisplayLang=en)）。这与 ASP.NET MVC 兼容，还是仅与 ASP.NET WebForm 兼容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T07:56:58.740

[它们与 MVC 兼容](http://weblogs.asp.net/melvynharbour/archive/2008/11/25/combining-asp-net-mvc-and-asp-net-charting-controls.aspx)

# iphone - 如何从我的应用程序中打开设置应用程序？

> ID：377102
> 
> 赞同：13
> 
> 时间：2008-12-18T07:19:02.593
> 
> 标签：iphone, cocoa-touch

在我正在开发的 iPhone 应用程序中，用户需要通过设置应用程序输入一些配置，然后我的应用程序才能连接到服务器并运行。现在，当用户第一次启动我的应用程序时，我会显示一条警报，说明用户应该转到设置，输入配置详细信息然后重新启动，但这并不理想。

不幸的是，我无法为这个应用程序提供合理的默认值，服务器主机名、用户帐户等会因每个用户而异。我认为我能希望的最好结果是显示一条警报，说明需要通过设置输入一些配置，并提供一个“带我去那里...”按钮，该按钮将打开设置，然后打开我的应用程序的设置部分. 如果这不可能，打开设置总比没有好。

我依稀记得 iPhone 越狱者已经想出了一种方法来通过地址簿中的有趣 URL 或电话号码启动设置或其他应用程序，但我在 Google 中没有找到任何有关它的信息。

:(

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-18T07:26:08.133

据我所知，没有经过批准的方法可以从另一个应用程序打开设置。

在我看来，如果您在启动时需要这些值，您应该只询问这些值，将它们存储在您的 NSUserDefaults 中，并可能指导您的用户在将来需要更改这些设置时查看 Settings.app。

不幸的是，这意味着在第一次启动时为您的用户维护一些最小的 UI 来填写他们的设置，但从 UX 的角度来看，这似乎比拒绝用户立即使用应用程序的乐趣要好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-19T00:31:26.690

在当前形式下，设置并不能真正满足您想要使用它的任务。

如果您还没有遇到过，您会遇到的问题是您想以某种方式验证用户的信息。也许他们输入了错误的服务器名称，或者输入了错误的密码。然后怎样呢？继续将用户送回“设置”以重试，然后切换回您的应用以查看他们这次是否正确？这将是一个糟糕的用户体验，解决它的最佳方法是让用户选择更改应用程序中的设置，以便您可以立即验证信息。

仅当您完成此操作后，噗，您不再需要为此使用设置。您可以在您的应用首次启动时立即将用户发送到该帐户编辑视图。您的用户会获得更好的体验，并且您无需尝试找到一种让用户在“设置”应用中找到您的应用配置的好方法。

苹果已经这样做了——看看移动邮件就知道了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:24:18.537

上面建议的一种可能的解决方案是编写自己的设置对话框。我找到了这个项目[http://www.inappsettingskit.com/](http://www.inappsettingskit.com/)你可以将它包含到你的应用程序中，它显示的设置与 iOS 相同。我还没有测试它，但现在要做。

# delphi - 鼠标左键按下时如何更改鼠标光标？

> ID：377105
> 
> 赞同：6
> 
> 时间：2008-12-18T07:21:06.020
> 
> 标签：delphi, onmousemove

在 Delphi 2007 中，在鼠标移动事件中，我尝试使用以下命令更改鼠标光标：

```
procedure TFr_Board_Display.PaintBox_Proxy_BoardMouseMove(Sender: TObject;
  Shift: TShiftState; X, Y: Integer);
begin

  if left_mouse_button_down then begin  
    if some_condition then begin
      Cursor := crDrag;
    end
    else begin
      Cursor := crNoDrop;
    end;
  end
  else begin
    if some_other_condition then begin
      Cursor := crHandPoint;
    end
    else begin
      Cursor := crDefault;
    end;
  end;
end; 
```

例如。但是，当按下鼠标左键并移动鼠标时，光标不会变为 crDrag 或 crNoDrop。代码被执行（例如Cursor := crDrag;）但光标没有改变。当鼠标左键向上时，我移动鼠标，光标改变没有问题。

（我最初尝试使用一些拖放事件和属性，但无法让一切按我想要的方式工作。）

编辑：阐明了所需的行为和格式化的代码。

编辑：谢谢你，Gamecat，但我希望鼠标左键按下时光标会改变，而鼠标移动时光标应该在 crDrag 和 crNoDrop 之间来回改变。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T08:02:44.330

如果您在 OnMouseDown 中设置鼠标光标并在 OnMouseUp 中重置它，则一切正常：

```
procedure TForm4.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Cursor := crCross;
end;

procedure TForm4.FormMouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Cursor := crDefault; // Or you can restore a saved cursor.
end; 
```

如果您希望鼠标光标在鼠标移动时做出反应，请使用以下命令：

```
procedure TForm4.FormMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  if ssLeft in Shift then begin
    if X<100 then
      Screen.Cursor := crCross
    else
      Screen.Cursor := crHourGlass;
  end else
    Screen.Cursor := crDefault;  // Or you can restore a saved cursor.
end;

procedure TForm4.FormMouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Screen.Cursor := crDefault; // Or you can restore a saved cursor.
end; 
```

需要 MouseUp，否则如果光标悬停在控件上方，则光标不会变回。

确保在任何地方都使用 Screen.Cursor。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-18T21:40:09.577

有点题外话，但也许对你有用。

我创建了一个全局堆栈以允许嵌套游标更改。它允许任何代码将鼠标光标设置为他们想要的，而不必担心他们的调用者或被调用者将其设置为什么。

例如：

```
procedure AskUserWhatToDo;
begin
  PushMouseCursor(crArrow);
  try
     if MessageDlg('Abort?', mtConfirmation, [mbYes, mbNo], 0) = mrYes then
        SysUtils.Abort;
  finally
     PopMouseCursor;
  end;
end;

procedure LongProcess;
begin
  PushMouseCursor(crHourglass);
  try
     //  do something
     if QuestionableState then
       AskUserWhatToDo;
     //  do something
  finally
    PopMouseCursor;
  end;
end; 
```

两个程序都不必担心其他程序需要什么状态或离开鼠标光标。

```
//===============================================================
//   in a universal utility module (mine is called CraftWindows.pas)

function SetMouseCursor(ACursor : TCursor) : TCursor;
begin
   Result := Screen.Cursor;
   Screen.Cursor := ACursor;
end;

var
   GlobalMouseCursorStack : TList = nil;

procedure PushMouseCursor(ACursor : TCursor);
begin
   if GlobalMouseCursorStack = nil then
       GlobalMouseCursorStack := TList.Create;

   GlobalMouseCursorStack.Add(Pointer(SetMouseCursor(ACursor)));
end;

procedure PopMouseCursor;
begin
   if (GlobalMouseCursorStack <> nil) and (GlobalMouseCursorStack.Count > 0) then
   begin
       SetMouseCursor(TCursor(GlobalMouseCursorStack.Last));
       GlobalMouseCursorStack.Delete(GlobalMouseCursorStack.Count - 1);
   end;
end;

...

finalization
  GlobalMouseCursorStack.Free; 
```

# sql - 嵌套选择语句？

> ID：377109
> 
> 赞同：0
> 
> 时间：2008-12-18T07:24:14.097
> 
> 标签：sql, sql-server

嗨，我对 sql 很陌生，但已经通过了一项工作，我需要查询数据库（MS SQL 2005）我需要返回所有给出 HeadID 的工作人员。（下表）所以我需要得到所有匹配 HeadID 的经理，然后是所有通过 ManagerID 匹配这些经理的工人。我该怎么做？任何可以帮助我更好地搜索解决方案的帮助或任何 sql 术语将不胜感激。谢谢

tb_Head: HeadID

tb_Manager: ManagerID, HeadID,

tb_Worker：WorkerID、ManagerID、

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T07:30:33.880

一个简单的方法是做这样的事情：

```
select * from tb_Worker
  join tb_Manager on tb_Worker.ManagerID = tb_Manager.ManagerID
  join tb_Head on tb_Manager.HeadID = Head.HeadID
  where tb_Head.HeadID = <given value> 
```

调整表名并根据需要选择列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T07:28:11.967

使用公用表表达式

```
USE AdventureWorks;
GO
WITH DirectReports(ManagerID, EmployeeID, EmployeeLevel) AS 
(
    SELECT ManagerID, EmployeeID, 0 AS EmployeeLevel
    FROM HumanResources.Employee
    WHERE ManagerID IS NULL
    UNION ALL
    SELECT e.ManagerID, e.EmployeeID, EmployeeLevel + 1
    FROM HumanResources.Employee e
        INNER JOIN DirectReports d
        ON e.ManagerID = d.EmployeeID 
)
SELECT ManagerID, EmployeeID, EmployeeLevel 
FROM DirectReports ;
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T07:31:58.090

听起来您想使用递归 CTE。[书籍在线文章](http://msdn.microsoft.com/en-us/library/ms186243.aspx)讨论了您的场景。这是我刚刚在另一篇stackoverflow文章中使用的一组示例代码...

```
CREATE TABLE dbo.ctetest (employeeid int primary key not null, managerid int null);

INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 1, NULL;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 2, 1;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 3, 1;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 4, 2;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 5, 2;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 6, 3;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 7, 2;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 8, 5;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 9, 4;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 10, 6;
INSERT INTO dbo.ctetest (employeeid, managerid) SELECT 11, 6;

WITH recursivecte (employeeid, managerid, level)
AS
(SELECT employeeid
    , managerid
    , 'level' = 0
FROM dbo.ctetest
WHERE managerid IS NULL
UNION ALL
SELECT ct.employeeid
    , ct.managerid
    , 'level' = rc.level + 1
FROM dbo.ctetest ct
JOIN recursivecte rc
    ON ct.managerid = rc.employeeid)

SELECT *
FROM recursivecte rc 
```

这应该为您提供每个员工从级别到级别的层次结构。如果要返回下一个最高级别的信息，例如经理姓名，那么只需将 rc.managername 添加到 UNION ALL 的第二部分，将列添加到 CTE 表（即 WITH recursivecte (employeeid, managerid , level) 部分，并在语句的第一部分给出占位符。

# language-agnostic - 还有哪些其他支持“部分专业化”的语言？

> ID：377114
> 
> 赞同：11
> 
> 时间：2008-12-18T07:27:26.587
> 
> 标签：language-agnostic, generics, programming-languages, partial-specialization

部分模板特化是 C++ 中泛型编程最重要的概念之一。例如：实现一个通用的交换函数：

```
template <typename T>
void swap(T &x, T &y) {
  const T tmp = x;
  y = x;
  x = tmp;
} 
```

将其专门用于支持 O(1) 交换的向量：

```
template <typename T, class Alloc>
void swap(vector<T, Alloc> &x, vector<T, Alloc> &y) { x.swap(y); } 
```

因此，当您在通用函数中调用 swap(x, y) 时，您始终可以获得最佳性能；

非常感谢，如果您可以在替代语言中发布等效的（或语言的部分专业化的规范示例，如果该语言不支持交换概念）。

**编辑**：所以看起来很多回答/评论的人真的不知道部分专业化是什么，并且通用交换示例似乎妨碍了某些人的理解。一个更一般的例子是：

```
template <typename T>
void foo(T x) { generic_foo(x); } 
```

部分专业化将是：

```
template <typename T>
void foo(vector<T> x) { partially_specialized_algo_for_vector(x); } 
```

一个完整的专业化将是：

```
void foo(vector<bool> bitmap) { special_algo_for_bitmap(bitmap); } 
```

为什么这很重要？因为您可以在通用函数中调用 foo(anything) ：

```
template <typename T>
void bar(T x) {
  // stuff...
  foo(x);
  // more stuff...
} 
```

并在编译时获得最合适的实现。这是 C++ 以最小的性能损失实现抽象的一种方式。

希望它有助于澄清“部分专业化”的概念。在某种程度上，这就是 C++ 在不需要显式模式匹配语法（比如 Ocaml/F# 中的 match 关键字）的情况下进行类型模式匹配的方式，这有时会妨碍泛型编程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-24T18:56:50.087

[D](http://www.digitalmars.com/d/1.0)支持偏特化：

*   [语言概览](http://www.digitalmars.com/d/2.0/overview.html)
*   [模板功能比较](http://www.digitalmars.com/d/2.0/template-comparison.html)（使用 C++ 98 和 0x）。

（在上述链接中扫描“部分”）。

特别是第二个链接将为您提供模板专业化可以做什么的*非常*详细的细分，不仅在 D 中，在 C++ 中也是如此。

这是 D 的特定示例`swap`。`Thing`它应该打印出该类专用交换的消息。

```
import std.stdio;    // for writefln

// Class with swap method

class Thing(T)
{
public:

    this(T thing)
    {
        this.thing = thing;
    }

    // Implementation is the same as generic swap, but it will be called instead.
    void swap(Thing that)
    {
       const T tmp = this.thing;
       this.thing = that.thing;
       that.thing = tmp;
    }

public:

    T thing;
}

// Swap generic function

void swap(T)(ref T lhs, ref T rhs)
{
    writefln("Generic swap.");

    const T tmp = lhs;
    lhs = rhs;
    rhs = tmp;
}

void swap(T : Thing!(U))(ref T lhs, ref T rhs)
{
    writefln("Specialized swap method for Things.");

    lhs.swap(rhs);
}

// Test case

int main()
{
    auto v1 = new Thing!(int)(10);
    auto v2 = new Thing!(int)(20);

    assert (v1.thing == 10);
    assert (v2.thing == 20);
    swap(v1, v2);
    assert (v1.thing == 20);
    assert (v2.thing == 10);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T08:09:33.457

I am afraid that C# does not support partial template specialization.

Partial template specialization means:

You have a base class with two or more templates (generics / type parameters). The type parameters would be <T, S>

In a derived (specialized) class you indicate the type of one of the type parameters. The type parameters could look like this <T, int>.

So when someone uses (instantiates an object of) the class where the last type parameter is an int, the derived class is used.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-19T08:29:13.997

Haskell has overlapping instances as an extension:

```
class Sizable a where
  size :: a -> Int

instance Collection c => Sizable c where
  size = length . toList 
```

is a function to find size of any collection, which can have more specific instances:

```
instance Sizable (Seq a) where
  size = Seq.length 
```

See also [Advanced Overlap on HaskellWiki](http://haskell.org/haskellwiki/GHC/AdvancedOverlap).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T08:54:15.020

实际上，您可以（不完全；见下文）使用扩展方法在 C# 中执行此操作：

```
public Count (this IEnumerable<T> seq) {
    int n = 0;
    foreach (T t in seq)
        n++;
    return n;
}

public Count (this T[] arr) {
    return arr.Length;
} 
```

然后调用`array.Count()`将使用专用版本。“不完全”是因为分辨率取决于 的静态类型`array`，而不是运行时类型。即这将使用更通用的版本：

```
IEnumerable<int> array = SomethingThatReturnsAnArray();
return array.Count(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-19T07:44:12.493

C#:

```
void Swap<T>(ref T a, ref T b) {   
  var c = a;   
  a = b;   
  b = c;
} 
```

I guess the (pure) Haskell-version would be:

```
swap :: a -> b -> (b,a)
swap a b = (b, a) 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2008-12-19T04:01:20.150

Java 有泛型，它允许你做类似的事情。

# .net - iPhone上的单声道？

> ID：377116
> 
> 赞同：19
> 
> 时间：2008-12-18T07:28:18.067
> 
> 标签：.net, iphone, mono, clr

Mono 已经移植到 iPhone 上了吗？我很想为 iPhone 编写 .NET 应用程序，而学习 Objective C 对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-01-02T07:38:44.833

今天的 Mono 有两种形式：

*   根据[http://monotouch.net绑定到 iOS API 的 Mono](http://monotouch.net)
*   Mono 作为支持 Unity3D 的脚本引擎

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-18T07:56:00.210

抱歉但不完全正确： [http ://www.mono-project.com/Mono:Iphone](http://www.mono-project.com/Mono:Iphone)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-06-29T16:58:28.490

我们正在开发一个名为[MonoTouch的](http://en.wikipedia.org/wiki/Mono_%28software%29#MonoTouch)[Cocoa Touch](http://en.wikipedia.org/wiki/Cocoa_Touch)绑定和一个完整的[AOT](http://en.wikipedia.org/wiki/Mono_%28software%29#Code_Execution_Engine)工具链，它允许使用 Mono 和[MonoDevelop](http://en.wikipedia.org/wiki/MonoDevelop)构建原生 iPhone 应用程序。这将是一个商业产品，计划在 8 月进行测试。敬请关注！

Miguel 曾[在博客上对此](http://tirania.org/blog/archive/2009/Jun-29.html)进行过讨论。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-18T14:01:26.790

对于反对者，请[听 Miguel de Icaza本人在 2008 年 11 月 24 日](http://hanselminutes.com/default.aspx?showID=157)[Hanselminutes](http://hanselminutes.com/)播客（大约 23:50 分）上与[Scott Hanselman](http://www.hanselman.com/blog/)谈论这个话题。

长话短说：计划静态编译 Silverlight 应用程序以符合 Apple 的要求。
您将无法在浏览器中运行它们，但它们将像任何其他应用程序一样完全集成 iPhone 应用程序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-18T08:02:44.237

这是Miguel de Icaza[的一篇博客文章，展示了在 iPhone 上运行的 Mono](http://tirania.org/blog/archive/2008/Mar-10.html)

（我怀疑这是一部越狱的手机，而 KiwiBastard 对它的官方变化可能是非常正确的）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-07T15:41:39.103

[第一款 Mono 游戏登陆 Apple AppStore。](http://tirania.org/blog/archive/2009/Jan-06-1.html) 因此，不仅在技术上可行，Apple 也会批准它们。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-11-11T14:44:55.897

这使您现在可以在 iPhone 上使用 C#（我认为是最近发布的），但您仍然必须拥有 Mac。

[http://monotouch.net/](http://monotouch.net/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-18T08:45:25.757

这个问题被一遍又一遍地问到。如果您想为 iPhone 编写官方应用程序，您需要：

*   拥有一台真正的 Mac

*   学习 Objective-C 和[Cocoa Touch](http://en.wikipedia.org/wiki/Cocoa_Touch)

*   喝酷爱

尝试解决上述任何问题都是浪费您和我们的时间。正如我在史蒂夫的方式或高速公路之前多次说过的那样，如果你想在 iPhone 上进行开发，你最好早点而不是晚点学习这一课。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T07:35:15.757

永远不要说永远，但由于它也需要运行时，所以我看不到它会发生。Apple 将不得不批准并使用标准固件安装 mono/.net 运行时。我猜Java也是如此......

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-12-18T13:28:42.533

对不起，孩子，但 Obj-C 是唯一的方法。为什么它“不是一种选择”？

除非它是在 Xcode 上用 Obj-C 编写并正确签名的，否则您的应用程序将不是 Apple 用于 App Store 的选项。

# asp.net-mvc - ASP.NET MVC 路由问题

> ID：377117
> 
> 赞同：13
> 
> 时间：2008-12-18T07:29:05.380
> 
> 标签：asp.net-mvc, routing

我一定很密集。在 StackOverflow 上问了几个问题后，在掌握 ASP.NET MVC 提供的新路由引擎方面，我仍然一头雾水。我想我已经将问题缩小到一个非常简单的问题，如果解决了，可能会让我解决其余的路由问题。所以这里是：

您将如何注册路由以支持用户个人资料的类似 Twitter 的 URL？

> `www.twitter.com/username`

假设还需要支持：

*   默认`{controller}/{action}/{id}`路由。

*   网址如：

    > `www.twitter.com/login`
    > `www.twitter.com/register`

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T08:51:09.490

关于什么

```
routes.MapRoute(
    "Profiles",
    "{userName}",
    new { controller = "Profiles", action = "ShowUser" }
); 
```

然后，在 ProfilesController 中，会有一个函数

```
public ActionResult ShowUser(string userName)
{
... 
```

在函数中，如果没有找到具有指定用户名的用户，您应该重定向到默认的 {controller}/{action}/{id}（这里，它只是 {controller}）路由。

像 www.twitter.com/login 这样的网址应该在此之前注册。

```
routes.MapRoute(
    "Login",
    "Login",
    new { controller = "Security", action = "Login" }
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T09:01:33.027

要理解的重要一点是路由按照它们注册的顺序匹配。因此，您需要首先注册最具体的路由，最后注册最一般的路由，否则与一般路由匹配的所有请求永远不会到达更具体的路由。

对于您的问题，我会在用户名规则之前为每个特殊页面注册路由规则，例如“注册”和“登录”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T07:51:01.560

您可以在家庭控制器中处理它，但控制器方法不会很优雅。我猜这样*的*事情*可能会*起作用（未经测试）：

```
routes.MapRoute(
    "Root",
    "{controller}/{view}",
    new { controller = "Home", action = "Index", view = "" }
); 
```

然后在你的 HomeController 中：

```
public ActionResult Index(string view) {
    switch (view) {
        case "":
            return View();

        case "register":
            return View("Register");

        default: 
            // load user profile view
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T09:04:50.867

好的，我还没有正确尝试过，但是您是否尝试过扩展 RouteBase 类来处理用户。[RouteBase](http://msdn.microsoft.com/en-us/library/system.web.routing.routebase.getroutedata.aspx)的文档建议，如果 GetRouteData 方法与当前请求不匹配，则应返回 null。您可以使用它来检查请求是否与您拥有的用户名之一匹配。

您可以使用以下方法添加 RouteBase 子类：

```
 routes.Add(new UserRouteBase()); 
```

当您注册路线时。

可能值得研究。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-06T07:57:18.957

我认为您的问题与我的相似。[ASP.NET MVC 路由](https://stackoverflow.com/questions/1442803/asp-net-mvc-routing)

这是[罗伯特·哈维的](https://stackoverflow.com/users/102937/robert-harvey)回答。

```
routes.MapRoute( _
    "SearchRoute", _
    "{id}", _
    New With {.controller = "User", .action = "Profile", .id = ""} _ 
```

)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-03T23:26:38.173

这是标准路线注册的另一种方法：

**1\. 下载[RiaLibrary.Web.dll](http://maproutes.codeplex.com/)并在你的 ASP.NET MVC 网站项目中引用它**

**2\. 使用 [Url] 属性装饰控制器方法：**

```
public SiteController : Controller
{
    [Url("")]
    public ActionResult Home()
    {
        return View();
    }

    [Url("about")]
    public ActionResult AboutUs()
    {
        return View();
    }

    [Url("store/{?category}")]
    public ActionResult Products(string category = null)
    {
        return View();
    }
} 
```

顺便提一句， '？' 登录 '{?category}' 参数意味着它是可选的。您不需要在路由默认值中明确指定它，这等于：

```
routes.MapRoute("Store", "store/{category}",
new { controller = "Store", action = "Home", category = UrlParameter.Optional }); 
```

**3\. 更新 Global.asax.cs 文件**

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoutes(); // This do the trick
    }

    protected void Application_Start()
    {
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

**如何设置默认值和约束？例子：**

```
public SiteController : Controller
{
    [Url("admin/articles/edit/{id}", Constraints = @"id=\d+")]
    public ActionResult ArticlesEdit(int id)
    {
        return View();
    }

    [Url("articles/{category}/{date}_{title}", Constraints =
         "date=(19|20)\d\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])")]
    public ActionResult Article(string category, DateTime date, string title)
    {
        return View();
    }
} 
```

**如何设置排序？例子：**

```
[Url("forums/{?category}", Order = 2)]
public ActionResult Threads(string category)
{
    return View();
}

[Url("forums/new", Order = 1)]
public ActionResult NewThread()
{
    return View();
} 
```

# oop - 编译器中的控制反转

> ID：377120
> 
> 赞同：1
> 
> 时间：2008-12-18T07:30:06.457
> 
> 标签：oop, inversion-of-control, compiler-construction

*有没有人在*编译器实现中实际使用过控制容器的反转？我知道按照设计，编译器需要非常快，但我一直很好奇 IoC/DI 如何影响编程语言的构造——热交换语法，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-10T16:13:24.447

Lisp 风格的语言经常这样做。[阅读器宏](http://www.psg.com/~dlamkins/sl/chapter03-12.html)是用户编写的代码片段，它扩展了语言的阅读器（以及语法）。普通宏是用户编写的代码片段，它们也扩展了语言。

整个语法不是可热交换的，但某些部分可以通过各种方式进行扩展。

这一切都不是一个新想法。在它被认为值得一个三个字母的首字母缩写词之前，IoC 被称为“后期绑定”，并且被认为是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T08:11:56.807

LR(k) 语法通常使用由表驱动的通用解析器系统（action-goto/shift-reduce 表），因此您使用生成这些表并将它们提供给通用解析器系统的表生成器工具，然后可以解析您的输入使用表格。通常，这些解析器系统会向您发出信号，表明非终结符已减少。参见例如免费的 GoldParser 系统。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2008-12-18T08:34:46.293

我不会真正将其称为控制*反转*，因为它对编译器来说是很自然的。它们通常是一系列将输入语言的代码转换为输出语言的代码的过程。当然，您可以交换不同的通道（例如，gcc 使用不同的前端编译多种语言）。

# .net - 在 Visual Basic 6 中使用 .NET 类的最佳方式是什么？

> ID：377132
> 
> 赞同：5
> 
> 时间：2008-12-18T07:43:53.603
> 
> 标签：.net, vb6, scripting

在我的工作场所，我坚持使用 Visual Basic 6，但在阅读了“[如何使用 vbscript 对数组进行排序？](https://stackoverflow.com/questions/268648/how-do-i-sort-arrays-using-vbscript) ”的答案后，我抱起了希望，至少一些缺少的 VB6 功能可以通过 .NET 功能进行补充. （主要是不同种类的收藏品）

看来，至少有一些 .NET 类可用于编写脚本，并且可以从 VB6 到`CreateObject`. 但我有一种明显的好到真实的感觉，所以...

*   我可能会遇到什么陷阱吗？（除了必须安装.NET）
*   是否所有 .NET 类都可以通过`CreateObject`?
*   有什么方法可以将这些类导入到我的 VB6 项目中，这样我就可以拥有 IntelliSense 了吗？
*   您对这种方法有什么一般性建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T14:52:59.510

[MSDN 上的 VB Fusion 开发人员中心](http://msdn.microsoft.com/en-us/vbrun/ms788241.aspx)提供了大量信息。特别感兴趣的是[使用 Visual Basic 6 中的 .NET Framework 类库](http://msdn.microsoft.com/en-us/library/aa719110(VS.71).aspx)，[我可以让您对 5000 个类感兴趣吗？](http://msdn.microsoft.com/en-us/library/aa719105.aspx).

您需要在 .NET 中编写一些代码才能使用文章中描述的技术。如果您还没有 Visual Studio 2008，可以免费下载[Visual Basic 2008 Express](http://www.microsoft.com/express/vb/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T13:15:38.473

为我公司的 CAD/CAM 应用程序进行转换。我不建议自下而上，即替换核心 DLL 或通过 .NET 添加核心功能。

通过替换表单并逐步进入核心 DLL，我从自上而下的工作中获得了更好的结果。

最大的障碍是提供合适的打印机和图形界面。但是微软发布的打印机兼容工具包解决了这两个问题。幸运的是，当 .NET 只是一线曙光时，我将所有以 VB6 为中心的图形和打印调用都放在了一个接口后面。

再次以调用 COMM 核心库的 .NET 程序集替换格式开始。

如果您的逻辑与表单交织在一起，我强烈建议将其分离到 VISUAL BASIC SIX 中的新 COM DLL 中。让新的 DLL 通过接口与窗体交互。该表单将是一个将事件传递给 DLL 并执行各种操作（绘图、重新排列等）的薄壳。

如果您无法避免使用 .NET 程序集来提供新功能，那么请创建一系列定义良好且受限的接口来控制 .NET 端和 VB6/COM 端之间的交互。

例如，我们想将我们行业的办公/工作管理软件添加到我们销售的软件范围内。我们决定使用 .NET 框架来实现。它必须与我们的 CAD/CAM 软件交互，因此我们创建了一系列界面，每个界面都可以从中提取所需信息或触发动作。

最后，如果 .NET 类实现了 COM 接口，最大的问题是您需要确保作为 COM 中属性一部分的任何参数都必须声明为 ByVal，否则 .NET 将无法实现该属性并且无法实现该接口. 这包括 Let 或 Set 的 value 参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T14:32:28.257

也许[这](http://www.kellyethridge.com/vbcorlib/)会有所帮助：

> 通过使用可用信息，MS .NET mscorlib.dll 中的许多类已在 Visual Basic 6 中重现。这不是 CLI 运行时的实现，只是 mscorlib.dll 库中的一些单元类文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T08:34:55.513

您应该只使用互操作作为在系统之间推送数据的机制——而不是核心逻辑代码；所有编组等的性能影响太大了。我建议你看看在 VS2008 等中使用更新的 VB 变体。这是一个很大的转变，但如果你有能力做出改变，你不会后悔的。

就个人而言，当我从 VB6 迁移到 C# 时，我必须根据本地上下文等做出决定。

# .net - 我是否需要为每个版本的强命名库创建一个新的 .snk 密钥文件？

> ID：377134
> 
> 赞同：6
> 
> 时间：2008-12-18T07:44:58.907
> 
> 标签：.net, strongname, snk

如果我用 .snk 文件强命名类库，如果我创建同一个库的新版本，是否需要用新的替换这个 .snk 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T07:54:28.760

否。类库程序集使用 SNK 文件中的公钥进行签名。

您可以对您创建的任何和所有程序集使用相同的 SNK 文件。这样，可以将目标系统配置为允许信任特定的公钥（即你们所有的程序集）。这可以通过控制面板 --> 管理工具 --> .NET 配置 x.0 来完成。

我们有一个公司范围的 SNK，所有程序集都使用同一个 SNK 签名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T07:53:32.990

不，您也可以在不同的文件/项目中重用密钥文件

# php - 如何在 Linux/PHP 堆栈上将文档转换为 PDF？

> ID：377135
> 
> 赞同：8
> 
> 时间：2008-12-18T07:46:33.833
> 
> 标签：php, linux, pdf

我想在我的网站上显示文档。服务器托管在 Debian 机器上。我在想我可以允许上传支持文档，然后使用 Linux 应用程序或 PHP 应用程序将文档转换为 PDF 并在 HTML 页面中显示。是否有任何 API 或二进制文件允许我这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T08:34:32.627

如果是办公文档，一种选择是在无头模式下使用 openoffice。请参阅此处以获取显示如何操作的 python 脚本： [http ://www.oooninja.com/2008/02/batch-command-line-file-conversion-with.html](http://www.oooninja.com/2008/02/batch-command-line-file-conversion-with.html)

如果它是任何其他类型的文档（例如您自己的 XML 文档），那么您需要做更多的工作。我使用 XSL 定义了文档格式的翻译，然后使用文档工具生成 PDF（和各种其他格式），取得了一些成功。如果您需要更精确地控制事物的外观，也可以使用 XSL 直接转至 PDF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:50:54.713

您可以创建 PDF 打印到文件打印机并通过 lpr 将任意数量的文档发送到打印机。

```
 function lpr($STR,$PRN,$TITLE) {

    $prn=(isset($PRN) && strlen($PRN))?"$PRN":C_DEFAULTPRN ;
    $title=(isset($TITLE))?"$TITLE":"stdin" . rand() ;
    $CMDLINE="lpr -P $prn -T $title";
    $pipe=popen("$CMDLINE" , 'w');
    if (!$pipe) {print "pipe failed."; return ""; }
    fwrite($pipe,$STR);
    pclose($pipe);

  } // lpr()

//open document...
//read into $source
lpr($source, "PDF", $title); //print to device
exit(); 
```

[HTMLDOC](http://www.easysw.com/htmldoc/)还可以将您的 HTML 转换为 PDF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-17T12:23:25.940

一个名为 phpLiveDocx 的相对较新的项目可以将 DOC 转换为 PDF（以及许多其他格式）。它是一个基于 SOAP 的服务，可以完全免费使用。有关使用 phpLiveDocx 将 DOC 转换为 PDF 的示例代码，请查看最近的博客文章：

[http://www.phplivedocx.org/2009/02/06/convert-doc-to-pdf-in-php/](http://www.phplivedocx.org/2009/02/06/convert-doc-to-pdf-in-php/)

当然，由于它是基于 SOAP 的，它可以在所有支持 PHP 的操作系统上使用 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:27:37.770

Pear 有一个 PHP PDF 类。请参阅： http:
[//pear.php.net/package/File_PDF](http://pear.php.net/package/File_PDF)
[http://pear.php.net/package/File_PDF/docs/latest/apidoc/File_PDF/File_PDF.html](http://pear.php.net/package/File_PDF/docs/latest/apidoc/File_PDF/File_PDF.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T15:30:45.720

另一种方法是生成一个 HTML 文件，其中包含您在 pdf 中需要的内容。然后使用 htmldoc 将其转换为 PDF。

[http://www.easysw.com/htmldoc/](http://www.easysw.com/htmldoc/)

它实际上比直接操作 PDF 文档中的对象要容易得多。

# ruby-on-rails - Rails - 多个顶级域和单个会话/cookie

> ID：377137
> 
> 赞同：18
> 
> 时间：2008-12-18T07:48:32.563
> 
> 标签：ruby-on-rails, ruby, session, dns

我已经为此苦苦挣扎了很长一段时间，但一直无法找到解决方案。我需要一个用户能够通过一次登录查看多个顶级域。

我的理解是，这需要设置`environment.rb`并使用`before_dispatch`. 这就是我想出的：

```
require 'activesupport'
require 'dispatcher'
module ActionController
   class Dispatcher

      def set_session_domain
         ActionController::Base.session_options.update :session_domain => "#{@request.host}"
      end 

      before_dispatch :set_session_domain
   end
end 
```

但是，当我尝试从中提取值时，这似乎不起作用`session[:session_domain]`。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T14:51:12.023

这个有点棘手。由于 cookie 只能分配给（并从中检索）当前域（例如“forms.example.com”）和父域（“.example.com”，但不能分配给“.com”），但不能分配给其他域（“othersite.com”），你必须自己找到另一个解决方案。这与 Rails 无关，而与 cookie 的工作方式有关。

编辑：会话依赖于特定于客户端的句柄，存储在 cookie 中，这就是会话也不能跨域工作的原因。

[这个站点](http://www.theserverside.com/patterns/thread.tss?thread_id=31258)有一种创建跨域 cookie 的可能解决方案，它是我所知道的最干净的方式，尽管它可能有一些安全隐患。更复杂的版本将让服务器通过一些安全通道直接通信。

如果您正在寻找更通用的单登录服务，请尝试实现某种形式的[OpenID](http://openid.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-23T12:19:21.980

对于 Rails 2.3 中的子域

```
ActionController::Base.session = { :domain => ".mydomain.com" } 
```

对于顶级域，试试[这个中间件](http://codetunes.com/2009/04/17/dynamic-cookie-domains-with-racks-middleware/)。

目前我一直在使用上述中间件，但它并没有按预期工作。如果您确实使用中间件，则不需要上面的代码，因为它也处理子域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-23T17:37:19.747

如果您想要跨域进行身份验证，无论它们是顶级域还是子域，您可能需要类似 RubyCAS 的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T14:35:52.087

恕我直言，您的问题不够精确。您想要为您拥有的所有 Rails 应用程序提供一个 cookie，还是在单个 cookie 的上下文中？如果是前者，您想查看使用数据库支持的会话或类似[RubyCAS](http://code.google.com/p/rubycas-client/)的东西来实现[CAS](http://www.ja-sig.org/products/cas/)协议的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-30T20:07:13.243

Keltia 和 zuk 都是对的，答案是 ruby​​CAS，我们已经进行了集成，它允许

SSI - 单点登录 您登录到一个站点，然后自动登录到另一个站点

SSO - 单点登出 您从一个站点登出，然后自动从另一个站点登出

对我们来说，这是一个行之有效的解决方案，并不难实施

我们在 [http://www.cabslk.com](http://www.cabslk.com)和 www.ticketslk.com使用它

干杯，萨梅拉

# ms-office - 将文本文档的内容分门别类，查看部分文本

> ID：377143
> 
> 赞同：2
> 
> 时间：2008-12-18T07:52:05.710
> 
> 标签：ms-office, filtering, openoffice.org

当我浏览一个文本文档时，我通过突出显示不同颜色的句子来将内容划分为不同的类别。

我希望能够创建一组类别，然后检查文本并标记一个句子并将其分配给其中一个类别。然后可以选择查看仅包含一个或多个类别的句子的过滤文本。

我想知道open-office或microsoft office是否支持这个，如果没有，是否有插件，如果没有，有一些关于如何使用open office的api的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T02:37:04.467

使用颜色会使这变得困难，但在 Microsoft Office（例如）中，您可以使用样式作为起点。创建多个样式，每个样式都有一个有意义的名称（例如“Important”、“Irrelevant”或“Miscategorized”），并将每个样式与一种颜色相关联。

然后，您可以相当轻松地创建一个宏，该宏将隐藏您不想看到的样式。或者您可以暂时将颜色或字体大小更改为不可见。

# vb.net - 如何使用 vb.net 获取 MS Access 数据库作者、上次修改日期、上次修改者等

> ID：377148
> 
> 赞同：-2
> 
> 时间：2008-12-18T07:54:30.337
> 
> 标签：vb.net, ms-access

我正在尝试使用 vb.net 获取 MS Access DB 的所有属性，例如作者、上次修改日期、上次修改者等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T11:26:30.860

这些是扩展属性。我认为这个线程[读/写“扩展”文件属性（C#）](https://stackoverflow.com/questions/220097/readwrite-extended-file-properties-c)会有所帮助。它包括一个 vb,net 示例。

所有者可能比 Access 数据库的作者更感兴趣。

您不妨阅读[如何提出问题](http://support.microsoft.com/kb/555375/en-us)

# winapi - CreateFile("CONIN$" ..) 是做什么的？

> ID：377152
> 
> 赞同：8
> 
> 时间：2008-12-18T07:58:16.727
> 
> 标签：winapi, input, pipe, plink

[我正在破解plink](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)的源代码以使其与 unison 兼容。

如果你不知道，unison是一个文件同步工具，它运行一个“ssh”命令来连接远程服务器，但是windows没有ssh.exe；有 plink，它非常接近但不够接近（它的行为不像 unison 期望的那样），所以人们通常在它周围做包装，[就像这个](http://www.wischik.com/lu/programmer/unison-ssh.html)。

问题之一是 unison 期望密码提示打印到 stderr（但 plink 将其打印到 stdout，并导致 unison 混淆），所以我想，嗯，应该足够简单，破解我的 thru plink 代码并制作它将提示打印到标准输出。所以我破解了我的方式并做到了。

Next problem: I can't respond to the prompt!! no matter what I type, it has no effect.

the code for getting input is roughly like this:

```
hin = GetStdHandle(STD_INPUT_HANDLE);
....
r = ReadFile(hin, .....); 
```

I'm not sure why it's done this way, but I'm not an expert in designing command line tools for windows, so what do I know! But I figure something is missing in setting up the input handle.

I looked at the source code for the [above wrapper tool](http://www.wischik.com/lu/programmer/unison-ssh.html) and I see this: `hconin=CreateFile("CONIN$",GENERIC_READ|GENERIC_WRITE,FILE_SHARE_READ,0,OPEN_EXISTING,0,0)`

and I try it (just for the heck of it)

```
hin=CreateFile("CONIN$",GENERIC_READ|GENERIC_WRITE,FILE_SHARE_READ,0,OPEN_EXISTING,0,0);
....
r = ReadFile( hin ...... ) 
```

and surprisingly it works! I can now respond to the prompt!

Why is this? what is "CONIN$"? and why is it different from the `STD_INPUT_HANDLE`?

我可以“猜测”`FILE_SHARE_READ`并`OPEN_EXISTING`在其中发挥作用（因为 ssh 是从另一个进程中运行的），但我想了解这里发生了什么，并确保这段代码没有一些不需要的方面效果或安全漏洞或类似的可怕的东西！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-18T08:00:35.753

`CONIN$`是控制台输入设备。通常，标准输入是一个打开的文件句柄，但如果标准输入由于某种原因被重定向，那么`CONIN$`尽管重定向，使用将允许您访问控制台。[参考。](http://msdn.microsoft.com/en-us/library/ms682075.aspx)

# events - GridView PostBack 事件的困难

> ID：377153
> 
> 赞同：2
> 
> 时间：2008-12-18T07:58:22.403
> 
> 标签：events, gridview, postback

在 RowDataBound OnClick 事件处理程序中，`'Hi'`当我单击任何行时会打印它。但我希望它只在我点击第 15 行时打印“嗨”。我该如何实施？

我的代码：

```
protected void dtvExDetails_RowDataBound1(object sender, GridViewRowEventArgs e)
{

    if (e.Row.DataItemIndex == -1)
        return;

    e.Row.Attributes.Add("onMouseOver","this.style.cursor='hand';");
    e.Row.Attributes.Add("onclick", this.GetPostBackClientEvent(dtvExDetails, "Select$15"));
}

protected void dtvExDetails_SelectedIndexChanged(object sender, EventArgs e)
{
    Response.Write("hi");
    DataGrid();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T08:18:33.597

```
 protected void dtvExDetails_SelectedIndexChanged(object sender, EventArgs e)
    {
            GridViewRow selrow = sender as GridViewRow;

            if(selrow.Count == 15)
                Response.Write("hi");
            DataGrid();
    } 
```

# sql - SQL表达式问题

> ID：377156
> 
> 赞同：0
> 
> 时间：2008-12-18T08:02:33.503
> 
> 标签：sql, group-by, expression

下面是我的表格，一个用户可以有多个特定语言的个人资料，非英语个人资料具有更高的优先级。

```
+---------+--------+----------------+------------ ----+
|ProfileID |用户ID |ProfileLanguage |ProfilePriority |
+---------+--------+----------------+------------ ----+
|1 |1 |zh-CN |2 |
+---------+--------+----------------+------------ ----+
|2 |1 |es-MX |1 |
+---------+--------+----------------+------------ ----+
|3 |1 |ja-JP |1 |
+---------+--------+----------------+------------ ----+
|4 |2 |es-MX |1 |
+---------+--------+----------------+------------ ----+
|5 |2 |ja-JP |2 |
+---------+--------+----------------+------------ ----+
|6 |2 |de-DE |1 |
+---------+--------+----------------+------------ ----+
|7 |3 |zh-CN |2 |
+---------+--------+----------------+------------ ----+

```

例如：当讲西班牙语的访问者请求我的网站时（其中 ProfileLanguage = 'es-MX' 或 ProfilePriority = 2），我想要如下记录：

```
+---------+--------+----------------+------------ ----+
|ProfileID |用户ID |ProfileLanguage |ProfilePriority |
+---------+--------+----------------+------------ ----+
|2 |1 |es-MX |1 |
+---------+--------+----------------+------------ ----+
|5 |2 |ja-JP |2 |
+---------+--------+----------------+------------ ----+
|7 |3 |zh-CN |2 |
+---------+--------+----------------+------------ ----+

```

下面是获取用户的基本 SQL：

```
SELECT UserID, MIN(ProfilePriority) AS ProfilePriority
FROM Profile
WHERE ProfileLanguage = 'es-MX' OR ProfilePriority = 2
GROUP BY UserID 
```

但如你所知，我只能获取UserID，但我还需要其他列信息，如ProfileID等。所以我希望这里的专家能告诉我正确的SQL表达式以获得正确的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T08:08:15.020

如果 profilepriority 和 userid 可以是复合唯一键，这可能会起作用；

```
select p.* from Profile p join 
(SELECT UserID, MIN(ProfilePriority) AS ProfilePriority
FROM Profile
WHERE ProfileLanguage = 'en-US' OR ProfilePriority = 2
GROUP BY UserID) tt
on p.userID = tt.UserID and p.ProfilePriority = tt.ProfilePriority 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T08:07:15.040

```
SELECT *
FROM Profile as tb1 inner join
(SELECT UserID, MIN(ProfilePriority) AS ProfilePriority
FROM Profile
WHERE ProfileLanguage = 'es-MX' OR ProfilePriority = 2
GROUP BY UserID) as tb2 on 
tb1.userid = tb2.userid and tb1.ProfilePriority = tb2.ProfilePriority 
```

在上述查询中输入您需要的所有列，用逗号而不是 * 分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T08:08:21.870

在我看来，虽然没有您的表格和一些示例数据还不清楚，但您的问题可以通过扩展分组来解决，如下所示：

```
SELECT UserID, ProfileID, MIN(ProfilePriority) AS ProfilePriority
FROM Profile
WHERE ProfileLanguage = 'en-US' OR ProfilePriority = 2
GROUP BY UserID, ProfileID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T09:49:25.067

如果 profilepriority 和 profilelanguage 都正确，我猜你有优先权。所以在这种情况下这可能会有所帮助；

```
select p.* from
(select tt1.userid, min(tt.pr) pr from 
(
SELECT profileid, UserID, MIN(ProfilePriority) AS ProfilePriority, 1 as pr
FROM Profile
WHERE ProfileLanguage = 'en-US' and ProfilePriority = 2
GROUP BY profileid, UserID

union 

SELECT profileid, UserID, MIN(ProfilePriority) AS ProfilePriority, 2 as pr
FROM Profile
WHERE ProfileLanguage = 'en-US' or ProfilePriority = 2
GROUP BY profileid, UserID

) tt1
group by userid) tt2    
join
(
SELECT profileid, UserID, MIN(ProfilePriority) AS ProfilePriority, 1 as pr
FROM Profile
WHERE ProfileLanguage = 'en-US' and ProfilePriority = 2
GROUP BY profileid, UserID

union 

SELECT profileid, UserID, MIN(ProfilePriority) AS ProfilePriority, 2 as pr
FROM Profile
WHERE ProfileLanguage = 'en-US' or ProfilePriority = 2
GROUP BY profileid, UserID
) tt3
on tt2.userId = tt3.userId and tt2.pr = tt3.pr
join profile p on p.profileid = tt3.profileid 
```

# c# - MonthCalendar.SelectionRange 数据绑定示例

> ID：377163
> 
> 赞同：2
> 
> 时间：2008-12-18T08:04:36.930
> 
> 标签：c#, data-binding, monthcalendar

如何对 MonthCalendar.SelectionRange 属性执行数据绑定？鉴于该属性的类型为“SelectionRange”，这是一个类，我不知道该怎么做。任何例子将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T09:37:18.850

`MonthCalendar`好吧，在或上似乎没有任何明显的事件`SelectionRange`，也没有实现`INotifyPropertyChanged`，所以*看起来*数据绑定在这里可能是不可能的。

更新：但是，它确实提高了 DateChanged，因此您可以手动将一些东西连接在一起，或者（更有用）通过子类化控件来以适合绑定的方式公开值和事件。请注意这`Actual(...)`是有用的，因为结束（否则）就在午夜之前，而不是午夜本身......

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Windows.Forms;
class Foo : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        Debug.WriteLine(ToString());
    }
    private void SetField<T>(ref T field, T value, string propertyName)
    {
        if (!EqualityComparer<T>.Default.Equals(field, value))
        {
            field = value;
            OnPropertyChanged(propertyName);            
        }
    }
    private DateTime start, end;
    public DateTime Start { get { return start; } set { SetField(ref start, value, "Start"); } }
    public DateTime End { get { return end; } set { SetField(ref end, value, "End"); } }
}

class BindableCalendar : MonthCalendar
{
    public DateTime ActualSelectionStart
    {
        get { return SelectionRange.Start; }
        set { if (ActualSelectionStart != value) { SetSelectionRange(value, ActualSelectionEnd); } }
    }
    public DateTime ActualSelectionEnd
    {
        get { return SelectionRange.End; }
        set { if (ActualSelectionEnd != value) { SetSelectionRange(ActualSelectionStart, value); } }
    }
    // should really use EventHandlerList here...
    public event EventHandler ActualSelectionStartChanged, ActualSelectionEndChanged;

    DateTime lastKnownStart, lastKnownEnd;
    protected override void OnDateChanged(DateRangeEventArgs drevent)
    {
        base.OnDateChanged(drevent);
        if (lastKnownStart != drevent.Start)
        {
            if (ActualSelectionStartChanged != null) ActualSelectionStartChanged(this, EventArgs.Empty);
            lastKnownStart = drevent.Start;
        }
        if (lastKnownEnd != drevent.End)
        {
            if (ActualSelectionEndChanged != null) ActualSelectionEndChanged(this, EventArgs.Empty);
            lastKnownEnd = drevent.End;
        }
    }

}

static class Program
{
    [STAThread]
    static void Main()
    {

        Application.EnableVisualStyles();
        MonthCalendar cal;
        Button btn;
        using (Form form = new Form
        {
            Controls = {
                (cal = new BindableCalendar { Dock = DockStyle.Fill, MaxSelectionCount = 10 }),
                (btn = new Button { Dock = DockStyle.Bottom, Text = "thwack"})
            }
        })
        {
            Foo foo = new Foo { Start = DateTime.Today, End = DateTime.Today.AddDays(1) };
            cal.DataBindings.Add("ActualSelectionStart", foo, "Start").DataSourceUpdateMode = DataSourceUpdateMode.OnPropertyChanged;
            cal.DataBindings.Add("ActualSelectionEnd", foo, "End").DataSourceUpdateMode = DataSourceUpdateMode.OnPropertyChanged;
            btn.Click += delegate
            {
                foo.Start = foo.Start.AddDays(1);
                foo.End = foo.End.AddDays(1);
            };
            Application.Run(form);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T08:53:30.123

对我来说，这似乎很简单。我刚刚绑定了 MonthCalendar 组件的 SelectionStart 和 SelectionEnd 属性。

```
this.Calendar1.DataBindings.Add(new System.Windows.Forms.Binding("SelectionStart",
bindingSource, "DateField", true));
this.Calendar1.DataBindings.Add(new System.Windows.Forms.Binding("SelectionEnd",
bindingSource, "DateField", true)); 
```

# c++ - 除了分配和 ctor 调用之外，C++ new 运算符还有什么作用？

> ID：377178
> 
> 赞同：8
> 
> 时间：2008-12-18T08:16:27.127
> 
> 标签：c++, new-operator

`new`除了分配内存和调用构造函数之外，操作员还做了哪些其他事情？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-18T08:33:20.447

C++ 标准对来自标头的 new 运算符的单个对象形式（通常使用的形式）有这样的说法`<new>`：

> 要求的行为：
> 
> 返回指向适当对齐存储的非空指针 (3.7.3)，否则抛出 bad_alloc 异常。此要求对该功能的替换版本具有约束力。
> 
> 默认行为：
> 
> — 执行循环：在循环内，函数首先尝试分配请求的存储空间。未指定尝试是否涉及对标准 C 库函数 malloc 的调用。
> 
> — 如果尝试成功，则返回指向已分配存储的指针。否则，如果 set_new_handler() 的最后一个参数是空指针，则抛出 bad_alloc。
> 
> — 否则，该函数调用当前的 new_handler (18.4.2.2)。如果被调用的函数返回，则循环重复。
> 
> — 当尝试分配请求的存储成功或调用的 new_handler 函数没有返回时，循环终止。

该标准还有很多关于新运算符和动态内存分配的其他内容（要说的很多），但我认为“默认行为”列表很好地总结了新运算符的基础知识。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-24T01:37:32.587

我已经解释了它在[这个](https://stackoverflow.com/questions/365887/how-do-malloc-and-new-work-how-are-they-different-implementation-wise#365891)答案中的作用。它解释了如何

*   `new`获取内存
*   `new`处理内存故障
*   `new`处理构造函数异常
*   `new`处理特殊放置和非抛出版本

Michael 解释了默认分配器函数 (::operator new) 如何很好地获取内存以及它如何处理故障。我已经在他的评论中看到了您关于对象大小存储在哪里的问题。答案是，如果没有必要，就没有存储大小。请记住，C 不需要大小`free`（并且 ::operator new 可以使用`malloc`）：

```
void * memory = malloc(x);
free (memory); // no need to tell it the size 
```

这是一个示例，您可以在其中看到存储大小如何影响新表达式的数组形式的分配大小（我的其他答案未涵盖）：

```
#include <cstddef>
#include <iostream>

struct f {
    // requests allocation of t bytes
    void * operator new[](std::size_t t) throw() {
        void *p = ::operator new[](t);
        std::cout << "new    p: " << p << std::endl;
        std::cout << "new size: " << t << std::endl;
        return p;
    }

    // requests deleting of t bytes starting at p
    void operator delete[](void *p, std::size_t t) throw() {
        std::cout << "delete p: " << p << std::endl;
        std::cout << "size    : " << t << std::endl;
        return ::operator delete[](p);
    }
};

int main() {
    std::cout << "sizeof f: " << sizeof (f) << std::endl;

    f * f_ = new f[1];
    std::cout << "&f_     : " << f_ << std::endl;
    delete[] f_;
} 
```

它将打印出如下内容：

```
sizeof f: 1
new    p: 0x93fe008
new size: 5
&f_     : 0x93fe00c
delete p: 0x93fe008
size    : 5 
```

一个字节用于对象本身，4 个字节用于存储在对象分配区域之前的计数。现在，如果我们使用不带大小参数的释放函数（只是从运算符 delete 中删除它），我们会得到以下输出：

```
sizeof f: 1
new    p: 0x9451008
new size: 1
&f_     : 0x9451008
delete p: 0x9451008 
```

这里的 C++ 运行时不关心大小，因此不再存储它。请注意，这是高度特定于实现的，这就是 gcc 在这里所做的，以便能够告诉您成员运算符删除的大小。其他实现可能仍会存储大小，并且很可能会在有要为类调用的析构函数时存储。例如，只要在`~f() { }`上面添加，gcc 就会存储大小，无论我们编写什么释放函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T08:25:27.483

取决于它是否超载，是否构建用于调试的应用程序，是否使用内存泄漏检测器，是否有某种内存池方案，是否有类似 Boehm 垃圾收集器的标记/取消标记位，等等，等等。它可能在里面做了很多自定义的东西，或者根本没有什么特别的。

# .net - 从 .Net 托管代码加载 32 位或 64 位 DLL

> ID：377181
> 
> 赞同：6
> 
> 时间：2008-12-18T08:17:39.620
> 
> 标签：.net, 64-bit, fusion

我有一个非托管 DLL（Scintilla 代码编辑器的 scilexer.dll，由[CodePlex](http://www.codeplex.com/ScintillaNET)的 Scintilla.Net 使用），它是通过 Scintilla.Net 组件从托管应用程序加载的。Windows 管理的应用程序在 32 位和 64 位环境下都可以正常运行，但我需要创建使用 64 位或 32 位 scilexer.dll 的不同安装。

有没有办法以 32 位和 64 位格式分发 DLL，以便 .Net 框架的 DLL 加载器根据某些 .config 选项或某些“路径名魔术”的东西以 32 位或 64 位格式加载非托管 DLL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-17T02:31:56.253

P/Invoke 使用 LoadLibrary 加载 DLL，如果已经有一个使用给定名称加载的库，LoadLibrary 将返回它。因此，如果您可以为 DLL 的两个版本赋予相同的名称，但将它们放在不同的目录中，您可以在第一次从 scilexer.dll 调用函数之前执行一次类似的操作，而无需复制您的 extern 声明：

```
 string platform = IntPtr.Size == 4 ? "x86" : "x64";
    string dll = installDir + @"\lib-" + platform + @"\scilexer.dll";
    if (LoadLibrary(dll) == IntPtr.Zero)
        throw new IOException("Unable to load " + dll + "."); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-31T17:18:00.673

不幸的是，我对这个特定的 DLL 一无所知。但是，当您自己执行 P/Invoke 时，您可以应对一些重复，可以为每个平台创建一个代理。

例如，假设您有以下接口，它应该由 32 位或 64 位 DLL 实现：

```
public interface ICodec {
    int Decode(IntPtr input, IntPtr output, long inputLength);
} 
```

您创建代理：

```
public class CodecX86 : ICodec {
    private const string dllFileName = @"Codec.x86.dll";

    [DllImport(dllFileName)]
    static extern int decode(IntPtr input, IntPtr output, long inputLength);

    public int Decode(IntPtr input, IntPtr output, long inputLength) {
        return decode(input, output, inputLength);
    }
} 
```

和

```
public class CodecX64 : ICodec {
    private const string dllFileName = @"Codec.x64.dll";

    [DllImport(dllFileName)]
    static extern int decode(IntPtr input, IntPtr output, long inputLength);

    public int Decode(IntPtr input, IntPtr output, long inputLength) {
        return decode(input, output, inputLength);
    }
} 
```

最后制造一家为您挑选合适的工厂：

```
public class CodecFactory {
    ICodec instance = null;

    public ICodec GetCodec() {
        if (instance == null) {
            if (IntPtr.Size == 4) {
                instance = new CodecX86();
            } else if (IntPtr.Size == 8) {
                instance = new CodecX64();
            } else {
                throw new NotSupportedException("Unknown platform");
            }
        }
        return instance;
    }
} 
```

由于 DLL 在第一次被调用时被延迟加载，这实际上是有效的，尽管每个平台只能加载它的本机版本。有关更详细的说明，请参阅[本文。](http://norheim.wordpress.com/2009/01/29/dual-platform-pinvoke/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T11:43:36.910

我想出的最好的方法如下：

*   使用两个名为 64 或 32 的 DLL 分发我的应用程序
*   在主启动代码中包括以下内容：

```

    File.Delete(Application.StartupPath + @"\scilexer.dll");
    {
      // 检查 64 位并复制正确的 scilexer dll
        if (IntPtr.Size == 4)
        {
          File.Copy(Application.StartupPath + @"\scilexer32.dll",
            Application.StartupPath + @"\scilexer.dll");
        }
        别的
        {
          File.Copy(Application.StartupPath + @"\scilexer64.dll",
            Application.StartupPath + @"\scilexer.dll");
        }
    }

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T08:25:25.813

您可以将dll放在system32中。syswow64 中的 32 位和真实 system32 中的 64 位。对于 32 位应用程序，当他们访问 system32 时，它们会被重定向到 Syswow64。

您可以在注册表中创建一个条目。软件密钥有一个名为 Wow6432Node 的子密钥，32 位应用程序将其视为软件密钥。

这是[powershell 安装程序所做](https://blogs.msdn.com/powershell/archive/2007/01/09/behind-powershell-installer-for-windows-xp-windows-server-2003.aspx)的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T15:39:15.283

非托管 dll 可以与其托管对应项并排安装到 GAC 中。 [这篇文章](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/d87e7dd8-c687-40ae-8f34-b862de9072c7/)应该解释它是如何工作的。

# c# - 处理来自 DB 的空值

> ID：377185
> 
> 赞同：2
> 
> 时间：2008-12-18T08:22:26.817
> 
> 标签：c#, .net

我正在查询的数据库返回一些空值。我如何防范这种情况并确保调用者取回一些数据。

我的代码是：

使用数据读取器

```
 while (dr.Read())
        {
            vo = new PlacementVO();
            vo.PlacementID = dr.GetString(0); 
```

如果我使用数据集，我可以这样做。

```
 obj.email = (row["email"] == DBNull.Value) ? String.Empty : Convert.ToString(row["email"]); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T08:25:38.807

如果`IsDBNull(int ordinal)`你正在使用序数（你就是）。

所以：

```
string email = reader.IsDBNull(0) ? null : reader.GetString(0); 
```

如果您正在使用字符串列名，那么要使用它，您必须先调用`GetOrdinal`，例如：

```
string GetSafeString(this IDataReader reader, string name)
{
    int index = reader.GetOrdinal(name);
    return reader.IsDBNull(0) ? null : reader.GetString(0);
} 
```

当然，只查找一次序数更快，而不是每行一次。

类似的方法可以用于`int?`等，或者使用默认值而不是空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T08:25:57.183

另一种方法是将**isnull**（*可以为 null 的列，为 null*时*替换*）到实际的 SQL 查询。代码更少，无需在客户端代码中执行任何操作即可工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-06T12:56:30.650

使用包装类来执行此功能。一个例子[可以在这里找到](http://www.codeproject.com/KB/database/NullableReaders.aspx)。我相信[CSLA 框架](http://www.lhotka.net/cslanet/)也有这个功能

# ruby-on-rails - 在 Ruby on Rails 中避免视图和控制器之间代码重复的最佳方法是什么？

> ID：377187
> 
> 赞同：3
> 
> 时间：2008-12-18T08:23:29.343
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我目前在我的 ApplicationController 中有代码来检查用户是否已登录并具有执行给定操作所需的访问权限（测试发生在 before_filter 中）。

我需要视图中的相同功能来决定是否应该在列表视图中显示管理链接，但是如何最好地避免在控制器和视图中重复代码？

我现在选择这样做的方式是拥有 user_can_edit_customers？本质上是“can_edit_customers”的包装器？在我的用户类上：

应用控制器：

```
类应用控制器
```

然后在我的视图助手中做类似的事情。

这样所有功能都封装在 User 模型中，但我仍然需要在我的控制器和助手中定义包装器，但是有更聪明的方法吗？

请注意，用户资料只是一个示例——这也适用于其他功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T08:50:03.767

我会说取消包装，只需调用*can_edit_customers？*直接在传递给视图的用户对象上。

如果您想保留它们，一个解决方案可能是在您的控制器中使用**[helper_method 。](http://api.rubyonrails.org/classes/ActionController/Helpers/ClassMethods.html#M000323)**

```
helper_method :current_user, :can_edit_customers?

def current_user
    @current_user ||= User.find_by_id(session[:user])
end

def can_edit_customers?
    @current_user.can_edit_customers?
end 
```

这样，该方法也可以在视图中使用。

```
<% if can_edit_customers? -%>...<% end -%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T22:31:09.227

只是为了更直接。控制器中的 helper_method“宏”使控制器方法表现得好像它也是应用程序助手中的方法一样。

```
helper_method :current_user, :can_edit_customers? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-23T02:55:10.450

我个人认为你不应该使用助手。

我会采取不同的解决方案。

假设我们有 Cucumber，一个模型，它不应该被某些用户编辑。我创建`#editable?`方法如下：

```
class Cucumber < ActiveRecord::Base
  def editable?(current_user)
    # Something happens here.
  end
end 
```

请注意，如果每个人都可以访问页面，则 current_user 可能为 false。

然后，在您可以执行的视图中：

```
<%- if @cucumber.editable?(current_user) -%>
<%# Something happens here. -%>
<%- end -%> 
```

并且，在控制器中，使用过滤器。

这种方法最好的一点是它遵循[Fat Model](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)，并且使您能够轻松地通过单元测试覆盖您的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T10:13:56.547

我认为助手是做你想做的事的方式。至于在视图中检查用户是否有权做某事，您可以在会话数据中放置一个标志（例如`session[:admin] = true`并在您的视图中检查它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T11:39:34.300

制作诸如logged_in之类的方法是常见的做法？在控制器和视图中可用。在大多数情况下，您不需要将授权逻辑下推到模型中。

绝对采用用户 Hates 描述的方法。看看像restful_authentication和acts_as_authenticated这样的插件，看看他们是怎么做到的。

有几个 railscasts ( [http://railscasts.com/episodes?search=authentication](http://railscasts.com/episodes?search=authentication) ) 涵盖了这个主题。例如，您可以编写一个获取块的助手，然后像这样使用：

```
<%- admin_user_ do %>
  <%= link_to .. %>
  <%= link_to .. %>
  <%= link_to .. %>
<%- end %> 
```

# c - 如何在 GDB 中调试 fork-exec 进程的入口点？

> ID：377195
> 
> 赞同：16
> 
> 时间：2008-12-18T08:26:01.927
> 
> 标签：c, linux, gdb

我有一个 C linux 应用程序 (A)，它在启动时会生成另一个进程 (P)。当我想像往常一样调试 PI start A 并使用 ddd/gdb 连接到 P 时。

当我想调试 P 的入口点（main 的开始）时会出现问题。如果我在将调试器连接到 P 时遵循通常的方法已经为时已晚。我找到的解决方案是在 P 的 main 开头插入一个 sleep ，这样我就有时间连接 gdb ，但这不是一个非常优雅的解决方案。

我也尝试过使用`asm("int $3")`，但它似乎不起作用。

你知道我该如何解决这个问题吗？（最好不要改变A或P的代码）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-18T09:07:49.550

您应该使用此选项：

```
set follow-fork-mode *模式*
```

其中*mode*是`parent`,`child`或之一`ask`。

要跟随父级（这是默认设置），请使用：

```
set follow-fork-mode parent 
```

跟随孩子：

```
set follow-fork-mode child 
```

让调试器每次都询问您：

```
set follow-fork-mode ask 
```

所以基本上你会开始将gdb连接到A，然后设置gdb跟随孩子，然后当A产生P时，gdb将连接到P并与A分离。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T15:07:39.643

除了[Nathan Fellman 的回答](https://stackoverflow.com/a/377295/441652)之外，*catchpoints*也派上用场，例如：

```
catch exec 
```

Catchpoint 用作断点。每次检测到对*exec()*系统调用的调用时，GDB 都会停止。这允许您`break main`在继续之前在任何新加载的可执行文件中设置任何断点 (ig)。*对于fork()*系统调用检测，另一个捕获点`catch fork`的工作方式类似。

 *特别方便：

*   当必须跟随父母和孩子时（`set detach-on-fork off`）；
*   当父进程分叉时，通常会加载各种可执行文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-29T16:39:37.287

**`exec`与`file`+部分`break main`**

分叉部分在以下位置进行了解释：[https ://stackoverflow.com/a/377295/895245](https://stackoverflow.com/a/377295/895245)

现在为`exec`：

交流：

```
#include <unistd.h>

int main(void) {
    execl("./b", "./b", "ab", "cd", (char*)NULL);
    return 1;
} 
```

公元前：

```
#include <stdio.h>

int main(int argc, char **argv ) {
    printf("%s\n", argv[0]);
    printf("%s\n", argv[1]);
} 
```

然后：

```
gcc -g a.c -o a
gcc -g b.c -o b
gdb -nh -q a 
```

现在在交互式会话中：

```
Reading symbols from a...done.
(gdb) start
Temporary breakpoint 1 at 0x4004ea: file a.c, line 4.
Starting program: /home/ciro/test/gdb-exec/a 

Temporary breakpoint 1, main () at a.c:4
4           execl("./b", "./b", "ab", "cd", (char*)NULL);
(gdb) file b
A program is being debugged already.
Are you sure you want to change the file? (y or n) y
Load new symbol table from "b"? (y or n) y
Reading symbols from b...done.
(gdb) b main
Breakpoint 2 at 0x4004f5: file b.c, line 4.
(gdb) n

Breakpoint 2, main (argc=0, argv=0x7fffffffa570) at b.c:4
4               printf("%s\n", argv[1]);
(gdb) n
process 4877 is executing new program: /home/ciro/test/gdb-exec/b

Breakpoint 2, main (argc=3, argv=0x7fffffffa598) at b.c:4
4               printf("%s\n", argv[1]);
(gdb) n
ab
5               printf("%s\n", argv[2]);
(gdb) n
cd
6       }
(gdb) 
```

您只需要确保您转到`exec`运行之前的文件，可能带有`b execl`，因为之后您将使用新文件中的符号。

在 Ubuntu 14.04、gdb 7.7.1 中测试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-18T08:51:03.390

您应该能够通过使用 gdb 的远程调试功能来做到这一点，特别是`gdbserver`. 实际上，使用 启动 (P) `gdbserver`。这些链接有更详细的信息：

*   [使用 gdbserver](http://davis.lbl.gov/Manuals/GDB/gdb_17.html)
*   [GDB 远程调试](http://sources.redhat.com/gdb/onlinedocs/gdb_18.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-25T19:48:48.943

在 main() 处设置断点，它也会在执行程序的 main() 处中断。

# java - Java 开发人员正在寻找一种可以使用的第二语言

> ID：377201
> 
> 赞同：2
> 
> 时间：2008-12-18T08:28:30.457
> 
> 标签：java

除了Java，什么是最好的学习语言？

这种第二语言的标准是：

1.  成为“下一件大事”的高潜力。例如，如果 Java 未平仓头寸市场*假设*消亡/萎缩，那么下一个将拥有更大未平仓头寸市场的编程语言是什么？提出这个问题的另一种方法是：如果我拥有一家用 Java 实现解决方案的小公司，我应该使用哪种语言？

2.  可以制作网页应用程序。

3.  可以制作桌面应用程序。

4.  学习简单有趣。

5.  范围广泛的可用库和框架（免费或开源），可增强和加速您的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T08:36:51.983

Python 几乎满足了所有这些要求，但我不知道是否会成为“下一件大事”，但是，嘿，Google 使用它，我认为它的受欢迎程度正在提高。

这是一种脚本语言，顺便说一句。

我将它用于 Web 应用程序（使用[django](http://djangoproject.com)），您绝对可以使用它创建桌面应用程序（尽管我自己没有这样做）。

这既简单又有趣！（虽然这是相当主观的，但它比 Java 更容易和“有趣”）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T08:37:00.063

就业能力：任何 .Net 语言，可能是 C#。那么你就可以为大多数潜在客户做好准备了。

为了扩展自己：一些功能性的东西（F# 也涵盖了 .Net？），或者 Lisp 或 Smalltalk 的东西——曾经是下一件大事，但它可能永远不会再发生了，但它仍然是一种语言，它极大地改变了我在其他语言中的编程方法语言。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T08:46:10.873

如果您是 Java 专家，您可能会真正喜欢 groovy。

它向后兼容 java，并具有 ruby​​ 和类似动态语言的许多优秀特性。它还具有正在形成的 grails 中的一个不错的 rails-a-like 以及 GORM 中的一个很好的对象关系映射框架。

它的真正好处是您可以混合和匹配 groovy 类和 java 类。因此，如果您发现自己忘记了 groovy 语法，您可以直接进入 Java。当然，您可以从中获取任何 Java 库。同时，您可以从 groovy 非常简洁的习语中受益，例如 Beans 属性。

（顺便说一句，它也符合您上面列出的所有标准）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-18T08:51:49.490

学习一门可能*不会*成为 Next Big Thing™ 的语言。学习一门新语言通常意味着学习新概念（除非您学习的一种与您已经知道的另一种非常相似）。

学习新概念有很大的优势，不管你用哪种语言编程，所以这是一件非常好的事情。

如果您将自己限制在将成为 Next Big Thing™ 的语言，那么您很可能会发现很多熟悉的概念，而新概念相对较少（IT 世界就是这样保守的）。

学习一些你觉得有趣的东西。如果它很有趣，您不仅可以更快地学习，而且您也会从中获得更多乐趣！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-18T08:30:26.753

Scala 或 JavaScript 怎么样？功能范式将进一步扩展您的思维，无论它们是否是“下一件大事”，都会有帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-18T08:54:33.383

选择不同的范例：functionnal、lisp、haskell、ocaml、erlang、scala 等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T08:37:45.197

如果你对微软没有任何宗教问题，我会支持 C#。我能看到的唯一缺点是它不是跨平台的。否则，据我所知，它符合您的要求

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T08:45:53.433

[您的标准与Python](http://www.python.org/)和[Ruby](http://www.ruby-lang.org/en/)非常接近，它们在 Web 开发方面都有不断增长的市场基础，并且完全有能力生成桌面应用程序。虽然它们相当接近，但 Python 有一个稍大的可重用代码模块库，而 Ruby 的优势更多地依赖于它完善的框架。

作为旁注，您应该确保不要停留在 2 种语言上。开始学习第二个，然后随着你的进步学习第三个甚至第四个。随着一般学习曲线趋于平稳，学习新的编程语言变得更加微不足道。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T09:21:57.320

我必须在此让 Gilles 成为第二个；学习不同的范式是非常有益的，而函数式编程[不太可能成为]下一件事情。
Erlang 在灵活性、易用性（一旦你掌握了基本概念）和 - 最重要的是 - 它非常适合未来和当前硬件的高度并行性。它还涵盖了您的所有五个标准，尽管它可能更像是一种“服务器”语言而不是“桌面”语言。

如果你有兴趣，我推荐Joe Armstrong的[Programming Erlang一书。](https://rads.stackoverflow.com/amzn/click/com/193435600X)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T10:31:32.003

就个人而言，我会选择 Ruby，并专注于在 JRuby 下运行您的 Ruby 脚本。通过这种方式，您可以通过运行代码的 JVM 获得 Ruby 的表现力。我见过 Rails 和 Merb 在 Glassfish 下运行。可能看起来很奇怪，但是您可以通过 Ruby 代码获得 Glassfish 的所有出色工具。JMX、RMI 等与 JRuby 配合得很好。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-18T11:24:08.010

[举例说明](http://squeakbyexample.org/)

# cocoa-touch - 我应该使用哪个，-awakeFromNib 还是 -viewDidLoad？

> ID：377202
> 
> 赞同：58
> 
> 时间：2008-12-18T08:28:31.347
> 
> 标签：cocoa-touch

我最近在我的应用程序中遇到了一个问题，我在 UIViewController 子类的 `-awakeFromNib`方法中创建的一些子视图从视图中消失了。经过一番摸索后，我发现移动我输入的代码`-awakeFromNib`可以`-viewDidLoad`解决问题。似乎`-awakeFromNib`只在从笔尖取消归档 UIViewController 时调用一次，并`-viewDidLoad`在每次取消归档视图时调用。

那么最佳实践是什么？看起来 UIViewController`-awakeFromNib`不应该在视图中添加任何视图，那种东西应该在`-viewDidLoad`. 我是否正确理解这一点？还是我比我想象的更困惑？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-12-18T09:50:00.917

`awakeFromNib`当**控制器**本身从笔尖取消归档时调用。在创建/取消归档**视图**`viewDidLoad`时调用。当控制器的视图存储在单独的 nib 文件中时，这种区别尤其重要。

 *** * *

## 回答 #2

> 赞同：24
> 
> 时间：2010-10-25T12:01:37.210

同样重要的是，`awakeFromNib`从内存警告中恢复后将永远不会调用该函数。但是，该`viewDidLoad`函数将被调用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-18T08:33:52.987

是的，这是正确的。你不应该真的依赖`awakeFromNib`做那种任务。

`awakeFromNib`类似于在 .NET 中反序列化后调用的事件。`viewDidLoad`类似于`Load`.NET 中的事件。

如果您熟悉 .NET 的概念，我认为这应该足够了。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-09T15:13:49.763

我将尝试通过举例来回答：

如果定义`customCell`类和`customCell.xib`文件，然后通过 using 加载单元格，则当 xib 中的对象未归档时
`- (NSArray *)loadNibNamed:(NSString *)name owner:(id)owner options:(NSDictionary *)options`，将调用**awakeFromNib 。**

如果您定义 a `customViewController`，那么当`customViewController`使用`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`. **viewDidLoad**将在加载到视图层次结构时被调用。

一些相关的混淆方法：

*   （无效）加载视图；如果子类不使用 nib，则应在此处创建自定义视图层次结构。如果您不指定 nib 名称，则 loadView 将尝试加载名称与视图控制器的类相同的 nib。如果不存在这样的 nib，那么您必须在调用 -view 之前调用 -setView:，或者覆盖 -loadView 方法以编程方式设置视图。-loadView 永远不应该被直接调用。

*   (void)viewDidLoad：在视图加载后调用。对于在代码中创建的 viewController，这是在 -loadView 之后。对于从 nib 未归档的视图控制器，这是在设置视图之后。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-22T00:10:26.207

对于 ViewController，IBOutlets 在 vi​​ewDidLoad() 中可用

这里**stackView**代表了一个ViewController中的IBOutlet，**stackView**在awakeFromNib中是nil，但是在调用viewDidLoad()的时候已经实例化了。

[![awakeFromNib() 中的 IBOutlets 状态与 viewDidLoad() 中的 IBOutlet 状态](https://i.stack.imgur.com/kvK7c.png)](https://i.stack.imgur.com/kvK7c.png)

# java - 带有 null 参数的 Java 方法分派

> ID：377203
> 
> 赞同：13
> 
> 时间：2008-12-18T08:28:36.837
> 
> 标签：java, null, method-dispatch

为什么（显然）我`null`是直接作为参数传递，还是传递`Object`我分配的*值* `null`？

```
Object testVal = null;
test.foo(testVal);    // dispatched to foo(Object)
// test.foo(null);    // compilation problem -> "The method foo(String) is ambiguous"   

public void foo(String arg) { // More-specific
    System.out.println("foo(String)");
}

public void foo(Object arg) { // Generic
    System.out.println("foo(Object)");
} 
```

换句话说，为什么（注释掉的）第二个调用`foo(...)`未发送到`foo(Object)`？

**更新：**我使用 Java 1.6。我可以毫无问题地编译 Hemal 的代码，但我的仍然无法编译。我看到的唯一区别是 Hemal 的方法是静态的，而我的不是。但我真的不明白为什么这会有所作为......？

**更新 2：**已解决。我的班级中有另一个方法 foo(Runnable)，因此调度程序无法明确选择单个最具体的方法。（请参阅我在 Hemal 的第二个答案中的评论。）感谢大家的帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-18T08:45:18.270

您使用的是哪个版本的 Java？使用 1.6.0_11 代码（粘贴在下面）编译并运行。

我敢肯定，为什么`foo(testVal)`要去`foo(Object)`。

`foo(null)`去的原因`foo(String)`有点复杂。常量`null`是 type `nulltype`，它是所有类型的子类型。所以，这`nulltype`延伸`String`了，延伸了`Object`。

当您调用`foo(null)`编译器时，会查找具有最特定类型的重载方法。因为`String`更具体，所以`Object`这是被调用的方法。

如果您有另一个与 String 一样具体的重载，`foo(Integer)`那么您会得到一个模棱两可的重载错误。

```
class NullType {

  public static final void main(final String[] args) {
    foo();
  }

  static void foo()
  {
    Object testVal = null;
    foo(testVal);    // dispatched to foo(Object)
    foo(null);    // compilation problem -> "The method foo(String) is ambiguous"   
  }

  public static void foo(String arg) { // More-specific
    System.out.println("foo(String)");
  }

  public static void foo(Object arg) { // Generic
    System.out.println("foo(Object)");
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T08:35:17.680

因为第二个用 null 注释掉的调用对编译器来说是模棱两可的。文字 null 可以是字符串或对象。而分配的值具有确定的类型。您需要强制转换为空值，例如 test.foo((String)null) 以消除歧义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T08:46:49.857

有没有人试过这个例子？？？

在 1.6.0 中，foo(null) 被分派到最具体的适用方法，即 foo(String)...

如果您添加一个新方法，比如 foo(Integer)，编译器将无法选择最具体的适用方法并显示错误。

-帕特里克

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T10:22:49.540

很抱歉使用答案来发表评论，但我需要发布不适合评论的代码。

@Yang，我也可以编译和运行以下内容。你能发布一个完整的代码，用一行注释编译，这样如果我取消注释那一行，它就不会编译？

```
class NullType {

  public static final void main(final String[] args) {
    foo();
    new Test().bar(new Test());
  }

  static void foo()
  {
    Object testVal = null;
    foo(testVal);    // dispatched to foo(Object)
    // foo(null);    // compilation problem -> "The method foo(String) is ambiguous"   
  }

  public static void foo(String arg) { // More-specific
    System.out.println("foo(String)");
  }

  public static void foo(Integer arg) { // More-specific
    System.out.println("foo(Integer)");
  }

  public static void foo(Object arg) { // Generic
    System.out.println("foo(Object)");
  }

}

class Test
{
  void bar(Test test)
  {
    Object testVal = null;
    test.foo(testVal);    // dispatched to foo(Object)
    test.foo(null);    // compilation problem -> "The method foo(String) is ambiguous"   
  }

  public void foo(String arg) { // More-specific
    System.out.println("foo(String)");
  }

  public void foo(Object arg) { // Generic
    System.out.println("foo(Object)");
  }
} 
```

# python - 如何设置和保持最小宽度？

> ID：377204
> 
> 赞同：4
> 
> 时间：2008-12-18T08:28:49.410
> 
> 标签：python, wxpython, wxwidgets, listctrl

我在 wx.LC_REPORT 模式下使用了一些 wx.ListCtrl 类，并通过 ListCtrlAutoWidthMixin 进行了扩充。

问题是：当用户双击列分隔符（自动调整列大小）时，列宽设置为与内容的宽度匹配。这是由 wx 库完成的，并在控件为空时将列的大小调整为仅几个像素。

我试着打电话

> self.SetColumnWidth(colNumber, wx.LIST_AUTOSIZE_USEHEADER)

在创建列表时，它只是设置初始列宽，而不是允许的最小宽度。

有人成功设置列最小宽度吗？

编辑：尝试捕捉

```
wx.EVT_LEFT_DCLICK
```

没有成功。用户双击列分隔符时不会生成此事件。也试过了

```
wx.EVT_LIST_COL_END_DRAG
```

此事件通常会生成两次，用于双击，但我看不到如何检索有关新大小的信息，或者如何区分双击和拖放。有人有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T12:44:05.817

老实说，我已经停止使用原生 wx.ListCtrl 转而使用[ObjectListView](http://objectlistview.sourceforge.net/python/)。有一点学习曲线，但有很多例子。 [这](http://objectlistview.sourceforge.net/python/recipes.html#recipe-column-width)对你的问题很感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T08:38:07.550

好的，经过一番努力，我找到了解决方法。从设计的角度来看它很丑陋，但对我来说已经足够好了。

这就是它的工作原理：

1.  存储列的初始宽度。

    ```
    self.SetColumnWidth(colNum, wx.LIST_AUTOSIZE_USEHEADER)

    self.__columnWidth[colNum] = self.GetColumnWidth(c) 
    ```

2.  为更新 UI 事件注册处理程序。

    ```
    wx.EVT_UPDATE_UI(self, self.GetId(), self.onUpdateUI) 
    ```

3.  并编写处理函数。

    ```
    def onUpdateUI(self, evt):
        for colNum in xrange(0, self.GetColumnCount()-1):
            if self.GetColumnWidth(colNum) < self.__columnWidth[colNum]:
                self.SetColumnWidth(colNum, self.__columnWidth[colNum])
        evt.Skip() 
    ```

self.GetColumnCount *() - 1*是故意的，所以最后一列没有调整大小。我知道这不是一个优雅的解决方案，但它对我来说已经足够好了——你不能通过双击分隔线来使列太小（事实上——你根本不能这样做）并在之后双击分隔线最后一列调整最后一列的大小以适合列表控件的宽度。

不过，如果有人知道更好的解决方案，请发布。

# windows - Git 服务：我希望它这么简单

> ID：377213
> 
> 赞同：139
> 
> 时间：2008-12-18T08:34:56.900
> 
> 标签：windows, git, mercurial

我想知道如何简单地通过 http = 发布，就像[Mercurial](http://en.wikipedia.org/wiki/Mercurial)的 hg 服务！在 Windows/work 框中执行以下操作：

```
git serve 
```

然后在 Linux 盒子上简单地去：

```
git clone http://project project 
```

完成的。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2008-12-18T09:07:40.253

导航到您的项目并使用以下开关启动 git-daemon：

```
cd project
git daemon --reuseaddr --base-path=. --export-all --verbose 
```

这告诉 git-daemon 提供当前目录中的所有项目（我假设是包含 .git/ 文件夹的项目目录）。如果您将其关闭并重新启动过快，它还会告诉它重新使用相同的地址。

您可以将其放入批处理脚本中，并使用易于记忆的名称（例如“gitserve”），因此您无需再次全部输入。正如一些评论中所建议的，在最新版本的 Git 中，您可以[为 Git 配置添加别名](https://git.wiki.kernel.org/index.php/Aliases#Serve_repo_on_the_spot)：

```
[alias]
    serve = !git daemon --reuseaddr --verbose --base-path=. --export-all ./.git 
```

在服务器（您的 Windows 机器）上完成此操作后，您可以执行以下操作：

```
git serve 
```

git-daemon 使用 git:// 协议进行传输，因此在客户端（您的 Linux 机器）上，您需要执行以下操作：

```
git clone git://123.456.789.111/ project 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-19T01:14:58.193

与其编写自己的批处理脚本，不如使用[gitjour](http://github.com/chad/gitjour/tree/master)。它知道如何正确启动 git 守护进程，并将通过 mDNS 广播克隆 URL，因此您可以`gitjour show`在 linux 机器上进行复制和粘贴。

还有一篇很好的文章，概述了 gitjour 和 Nic 博士的许多其他类似工具，[什么是 *jour 以及为什么它们是 RailsCamp08 的杀手级应用程序](http://drnicwilliams.com/2008/06/18/what-is-gitjour-gemjour-starjour/)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-20T05:55:31.913

目前使用两个别名 - serve 和 hub。服务于只读共享和集线器用于读/写共享：

```
[alias]
  serve = !git daemon --base-path=. --export-all --reuseaddr --informative-errors --verbose
  hub = !git daemon --base-path=. --export-all --enable=receive-pack --reuseaddr --informative-errors --verbose 
```

此外，还有更详细的关于通过 git daemon 共享的教程：http: [//l.rw.rw/git-daemon](http://l.rw.rw/git-daemon)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2011-03-15T00:06:47.683

如果您只想使用 Web 浏览器公开存储库

[git-instaweb](http://linux.die.net/man/1/git-instaweb)

```
$ git instaweb -d apache2 --start
$ lynx localhost:1234 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-01-29T20:53:48.763

这是另一种方法。您将需要安装 python。

*   跑`git update-server-info`
*   转到`.git`目录
*   跑`python -mSimpleHTTPServer`

（只需在您的 gitconfig 中创建一个别名）

现在您可以使用`git pull http://HOST_NAME:8000/`

PS：当使用 git daemon 解决方案时，您可以设置`--base-path=.git`这样的 url`git://HOST/`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-23T13:23:09.757

git-webui 是一个 git 扩展，它提供了一个基于 Web 的用户界面以及从其他计算机克隆/拉取的能力

[https://github.com/alberthier/git-webui](https://github.com/alberthier/git-webui)

```
$ cd my_git_repo
$ git webui 
```

其他人可以

```
$ git clone http://<ip-of-your-computer>:8000/ repoclone 
```

或者

```
$ git pull http://<ip-of-your-computer>:8000/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-03T13:42:37.553

在 .git/config 中添加以下行

```
[instaweb]
               local = true
               httpd = webrick
               port = 4231 
```

然后执行

```
git instaweb 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-03T17:33:59.760

Git 2.21（2019 年 2 月）允许您将 python 和[`git instaweb`](https://git-scm.com/docs/git-instaweb)：

请参阅[Arti Zirk ( ) 的](https://github.com/artizirk)[提交 2eb14bb](https://github.com/git/git/commit/2eb14bb2d41b27d23120206bbe3d409a83cf042f)（2019 年 1 月 28 日[）](https://github.com/artizirk)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 abf39e3](https://github.com/git/git/commit/abf39e3396f597adfac1f37a3b5706950dadfec3))^(中，2019 年 2 月 5 日）)[`artizirk`](https://github.com/artizirk)
^([`gitster`](https://github.com/gitster))

> ## `git-instaweb`: 添加 Python 内置`http.server`支持
> 
> 使用此补丁，可以通过选项`git-instaweb`使用 Python `http.server`CGI 处理程序启动。`-d python`
> 
> `git-instaweb``http.server`在(in )周围生成一个小包装器`GIT_DIR/gitweb/`，解决 CGI 处理程序的限制，其中 CGI 脚本必须位于`cgi-bin`子目录中并且目录索引不能轻易更改。为了使实现保持较小，`gitweb`在 url 上运行，`/cgi-bin/gitweb.cgi`并且在打开时自动重定向`/`。
> 
> 生成的包装器与 Python 2 和 3 兼容。
> 
> Python 默认安装在大多数现代 Linux 发行版上，`git instaweb -d python`无需其他任何东西即可运行。

# c# - 具有不同参数的两个方法的 C# 委托

> ID：377217
> 
> 赞同：17
> 
> 时间：2008-12-18T08:36:01.597
> 
> 标签：c#, generics, delegates

我正在使用以下方法：

```
public void M1(Int32 a)
{
  // acquire MyMutex
  DoSomething(a);
  // release MyMutex
} 
```

和

```
public void M2(String s, String t)
{
  // acquire MyMutex
  DoSomethingElse(s, t);
  // release MyMutex
} 
```

从到目前为止我发现的情况来看，似乎不可能将单个委托用于具有不同签名的两种方法。

有没有其他替代方法可以写这样的东西：

```
public void UsingMutex(...)
{
  // acquire MyMutex
  ...
  // release MyMutex
}

UsingMutex(M1);
UsingMutex(M2); 
```

目前我所能想到的就是使用两个代表和一个布尔标志来知道要调用哪个代表，但这不是一个长期的解决方案。

可以将泛型与委托结合起来吗？如果是这样，您是否有任何类型的文档的链接？

环境：C# 2.0

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-18T08:37:34.977

绝对可以将委托与泛型混合使用。在 2.0`Predicate<T>`等中就是很好的例子，但是你必须有相同数量的 args。在这种情况下，也许一种选择是使用捕获将 args 包含在委托中？

IE

```
 public delegate void Action();
    static void Main()
    {
        DoStuff(delegate {Foo(5);});
        DoStuff(delegate {Bar("abc","def");});
    }
    static void DoStuff(Action action)
    {
        action();
    }
    static void Foo(int i)
    {
        Console.WriteLine(i);
    }
    static void Bar(string s, string t)
    {
        Console.WriteLine(s+t);
    } 
```

请注意，这`Action`是在 .NET 3.5 中为您定义的，但您可以为 2.0 目的重新声明它；-p

请注意，匿名方法 ( `delegate {...}`) 也可以参数化：

```
 static void Main()
    {
        DoStuff(delegate (string s) {Foo(5);});
        DoStuff(delegate (string s) {Bar(s,"def");});
    }
    static void DoStuff(Action<string> action)
    {
        action("abc");
    }
    static void Foo(int i)
    {
        Console.WriteLine(i);
    }
    static void Bar(string s, string t)
    {
        Console.WriteLine(s+t);
    } 
```

最后，C# 3.0 使用“lambdas”使这一切变得更容易和更漂亮，但这是另一个话题；-p

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T08:40:22.507

是的，可以将泛型与委托结合起来。

```
public delegate void Action<T>(T x);
public delegate void Action<T,U>(T x, U y);

public void UsingMutex<T>(Action<T> x, T t) {
    // acquire mutex...
    x(t);
    // release mutex...
}
public void UsingMutex<T,U>(Action<T,U> x, T t, U u) {
    // acquire mutex...
    x(t, u);
    // release mutex...
} 
```

但是您仍然必须使用重载来处理不同数量的参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T08:39:02.137

如果您查看框架中的`Func<T>`和`Action<T>`委托，您会发现它们定义了许多具有不同数量参数的类似委托。您可以使用泛型，但这并不能解决您正在谈论的参数数量问题。

# coding-style - 你有编码标准吗？如果是这样，它们是如何执行的？

> ID：377218
> 
> 赞同：22
> 
> 时间：2008-12-18T08:36:21.423
> 
> 标签：coding-style

我参与过几个项目，我们花了很多时间讨论和编写详细的编码标准，涵盖从语法布局到实际最佳实践的所有内容。然而，我也发现这些很少被完全遵循。许多开发人员似乎对仅基于违反编码标准的代码审查犹豫不决。即违规行为会定期提交到存储库。

我的问题是：你们有编码标准吗？他们涵盖什么？每个人都跟着他们吗？你会做什么（如果有的话）来确保每个人都遵守标准？

我知道这里有一个类似的问题[，](https://stackoverflow.com/questions/167575/should-a-project-manager-enforce-coding-standards)但我关心的不是你如何做到这一点，而是你实际上是如何去做的以及感知到的好处是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-18T08:52:12.670

我曾在几乎没有遵循编码实践的地方工作过，以及其他接近强制执行的地方 - 或者至少很容易检查。

几点建议：

*   最重要的是要接受一致性胜过您个人偏好的风格的想法。在制定之前和之后都应该讨论编码标准，但不应允许任何人选择退出。
*   代码审查应该是强制性的，签入注释包括审查者的用户名。如果您使用的是功能强大的 SCM，请考虑不允许没有有效审阅者姓名的签入。
*   应该有一个*每个人都*知道的关于制定编码标准的文件。有了足够的细节，你就不应该过多地争论。
*   在可能的情况下，自动检查约定（通过 Lint、CheckStyle、FXCop 等），这样提交者和审阅者都可以轻松快速检查诸如排序导入/使用指令、空格等内容。

好处是：

*   主要是一致性——如果你让任何人都可以在任何时候在代码库的任何部分感到“宾至如归”，它会给你更多的灵活性。
*   传播最佳实践——如果你禁止公共字段、可变结构等，那么没有人会意外地在你的代码中植入定时炸弹。（至少，不是标准涵盖的定时炸弹。当然，没有完美代码的编码标准：）

编辑：我应该指出，在大公司工作时，编码标准可能是*最*重要的。我相信即使在小公司中它们也会有所帮助，但在这一点上，围绕标准的流程可能不太需要。当所有开发人员彼此认识并且都在同一地点时，这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T08:58:15.327

你有编码标准吗？

> > 是的，因项目而异。

它涵盖什么？

> > 代码（类、变量、方法、常量）、SQL 命名和格式约定

是不是大家都在追？

> > 是的，可以要求项目中的每个新进入者按照组织编码约定创建一个演示项目，然后对其进行审查。这个练习让开发人员在开始真正的工作之前感到轻松。

你会做什么（如果有的话）来确保每个人都遵守标准？

> > **使用 StyleCop 和 FxCop**来确保他们得到严格遵守。**如果代码不符合**组织编码约定，它将显示为警告/错误。
> > 
> > **Visual Studio Team 系统**具有**很好的代码分析和签入策略**，可以防止开发人员签入不符合要求的代码

希望能帮助到你

谢谢，毛利克·莫迪

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T08:51:43.933

我们使用 Eclipse 的保存操作和格式化程序。我们确实有一个建议的标准，但实际上没有人执行它，因此实际格式化的内容和方式存在一些变化。

这有点麻烦（对我来说），因为各种空白变体被提交为 SVN 存储库的更新......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T09:05:00.210

[StyleCop](http://code.msdn.microsoft.com/sourceanalysis)在执行编码布局实践方面做得很好，如果对您很重要的基本规则中未涵盖某些内容，您可以为其编写自定义规则。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T11:27:00.313

我认为编码标准非常重要。没有什么比试图找出文件的两个修订版本之间的差异却发现整个文件已被重新格式化的人更改更令人沮丧的了。而且我知道有人会说这种做法应该被淘汰，但是大多数 IDE 都具有“重新格式化文件”功能（例如，Visual Studio 中的 Ctrl-K Ctrl-D），这使得您的代码保持布局容易多了。

我见过一些项目因缺乏编码标准而失败——我上一家公司的花括号大战导致了团队的崩溃。

我发现最好的编码标准不是团队中某个人制定的标准。我在我们的团队中实施了 iDesign 创建的标准（[单击此处](http://www.idesign.net/idesign/download/IDesign%20CSharp%20Coding%20Standard.zip "IDesign编码标准")），如果您尝试实施自己的“标准”，这会让您远离任何类型的怨恨。

快速提及 Code Style Enforcer（[单击此处](http://joel.fjorden.se/static.php?page=CodeStyleEnforcer "代码风格执行器")），它非常适合在 Visual Studio 中突出显示不合规性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-22T17:49:09.147

我有个人和公司编码标准的组合，这些标准在某种程度上仍在发展。它们涵盖代码结构、测试和描述各种功能的各种文档。

随着它的发展，它正在被我团队的其他成员采用和解释。最终会发生的部分情况是，如果在某些部分上达成共识，那么这些部分将保持不变，而其他部分可能只是保留不一定符合标准的代码。

我认为可能会有一些尊重或专业的钦佩，作为让人们遵循编码标准的一种方式，其中某些部分在应用后变得清晰，例如重构函数以使其更具可读性或以某种形式添加测试，用各种“灯泡时刻”借用奥普拉的一句话。

好处的另一部分是看看其他人的工作情况如何，他们有哪些技巧和技术，以及如何随着时间的推移改进成为更好的开发人员。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T08:52:30.173

我从来没有见过一个项目因为缺乏编码标准（或遵守它们）而失败，甚至对生产力有任何影响。如果您花时间执行它们，那么您就是在浪费金钱。相反，有很多重要的事情需要担心（比如代码质量）。

为那些喜欢遵循某些东西的人创建一套建议的标准，但不要这样做。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T08:56:02.320

我认为查看编码标准的最佳方式是根据您希望通过应用实现的目标，以及如果错误应用它们可能造成的损害。例如，我认为以下内容非常好；

*   记录并提供单元测试，以说明使用给定例程或模块的给定接口的所有典型场景。
*   尽可能使用以下容器类库等...
*   使用断言来验证传入的参数和返回的结果 (C & C++)
*   最小化所有变量的范围
*   通过方法访问对象成员
*   在 malloc 和 free 上使用 new 和 delete
*   使用规定的命名约定

我不认为强制风格超出这个是一个好主意，因为不同的程序员使用不同的风格是有效的。强迫程序员改变风格可能会适得其反，并导致时间损失和质量下降。标准应该简短易懂。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T09:37:53.640

哦，是的，我是编码标准警察 :) 我只是写了一个简单的脚本来定期检查和修复代码（我的编码标准很[简单，](https://stackoverflow.com/questions/276173/what-are-your-favorite-c-coding-style-idioms#276560)可以实现。）我希望人们在看到所有这些“编码”后会得到消息公约清理”消息:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T09:46:18.163

我们有一种“宽松”的标准。也许是因为我们无法就“在哪里放多少空格”、“在哪里放我的左括号，在语句之后或下一行”中的一些达成一致。

但是，由于我们有每个专用模块或组件的主要开发人员，以及可能在这些模块中工作的一些其他开发人员，我们有以下主要规则：

“坚持主开发者使用的风格”

因此，如果他想做 3 个空格缩进，也请自己做。

这并不理想，因为它可能需要重新调整您的编辑器设置，但它保持和平:-)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-18T10:07:10.303

> 你有编码标准吗？它涵盖什么？

是的，它有命名约定、 if, while ... 之后的强制大括号、不允许警告、建议 32/64 位对齐、没有幻数、标头保护、变量初始化和有利于遗留代码一致性的格式化规则。

> 是不是大家都在追？你会做什么（如果有的话）来确保每个人都遵守标准？

大多数情况下，获得**团队共识**和一个轻量级的编码标准（少于 20 条规则）对我们有帮助。

> 它是如何执行的？

轻轻地说，我们没有编码标准警察。

*   在审查时检查标准的应用
*   我们有提供标准样板的模板文件

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-14T22:40:31.663

ParaSoft 的 JTest 非常适合 Java。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-16T22:38:52.317

我们的编码标准列在我们的程序员手册中，因此每个人都可以轻松地参考它们。它们之所以有效，仅仅是因为我们得到了所有团队成员的认可，因为人们不害怕在代码审查期间提出标准和风格问题，并且因为它们允许一定程度的灵活性。如果一个程序员创建了一个新文件，并且她更喜欢将括号与 if 语句放在同一行，那么这就为该文件设定了标准。将来修改该文件的任何人都必须使用相同的样式以保持一致。

我承认，当我第一次阅读编码标准时，我不同意其中的一些。例如，我们对函数声明使用某种样式，如下所示：

```
 static       // Scope
    void         // Type declaration 
func(

char   al,                //IN: Description of al
intl6u hash_table_size,   //IN/OUT: Description of hash_table_size
int8u  s)                 //OUT: Description of s
{
<local declarations>

        <statements>
} 
```

我以前从未见过，所以起初对我来说似乎很陌生和陌生。我的直觉反应是，“嗯，这很愚蠢。” 现在我在这里已经有一段时间了，我已经适应了这种风格，并欣赏我如何快速理解函数声明，因为每个人都这样做。

# linux - 如何在 Linux 中使用 MS-Access 文件？

> ID：377219
> 
> 赞同：20
> 
> 时间：2008-12-18T08:36:41.470
> 
> 标签：linux, ms-access

我正在学习数据库入门课程，其中一个练习是使用 MS-Access。但是我在家里使用 Linux，虽然我可以在大学使用计算机课程，但它很不方便（开放时间有限 - 我的学习时间大多是晚上）。

那么如何`*.mdb`在 Linux 中使用 Access 文件（）？使用我的意思是更改表、编写查询等。

是否有工具可以将其转换为另一种数据库格式（mysql、postgresql 甚至 gadfly）？

另外我可能会遇到什么问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-18T09:15:43.887

虽然有点过时，但我已经取得了很好的成功，`mdbtools`它是一组用于访问 Access 数据库并将其转换为其他格式的命令行工具。我用它来将数据库导入 PostgreSQL。

如果您运行的是 Ubuntu 变体，您可以使用以下命令安装它：

```
sudo apt-get install mdbtools 
```

或者你可以从[这里](http://sourceforge.net/projects/mdbtools/)下载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-19T02:26:03.777

你运气不好。Access 在 Linux 上没有真正的等价物，虽然[Kexi](http://kexi-project.org/)是一个有趣的替代方案，可以导入 Access 文件并旨在提供类似的功能，但一旦导入数据，它实际上并不使用 Access 文件。

如果你的任务是开发一个带有表单等的 Access 应用程序，而不是仅仅使用和`mdb`数据库作为存储，那么你可以尝试使用兼容 Access 版本的 Wine 的最新版本（参见[兼容性列表](http://appdb.winehq.org/objectManager.php?sClass=application&iId=12)），或者更好的是，找到一个 Windows机器，你确定它会工作。

不要忘记，使用装有 Windows 的虚拟机将帮助您在 Linux 机器上实现相同的目标。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T11:12:47.020

我目前正在 Ubuntu 上尝试使用[Wine](https://help.ubuntu.com/community/Wine)访问，我似乎已经到了那里。我发现我需要手动复制各种 dll，但这很容易导致缺乏对该主题的阅读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T09:00:21.873

来自文档：[连接到 Microsoft Access](http://wiki.services.openoffice.org/wiki/Connecting_to_Microsoft_Access)。但是，这似乎表明您需要在 Windows 主机中运行访问并通过 ODBC 连接...另请参阅[已知问题](http://dba.openoffice.org/FAQ/specific.html#ms_access)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-24T14:16:48.803

我最近发现[https://dbeaver.io/](https://dbeaver.io/)这是一个软件（在 java 中），用于管理不同的数据库类型（MySQL、PostGreSQL…），有点像 phpmyadmin（但作为基于主机的软件，不需要服务器），它可以如果版本太旧，管理 MS Access 例外（这可能是我的情况）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T10:38:39.040

您可以通过连接（ODBC 或 OLEDB）使用 Access，只要您只需要管理文件的“数据库”维度（表和视图，在 Access 中称为“查询”）。

一旦连接打开（有关连接字符串，请参见[此处](http://www.connectionstrings.com/)），您可以将 SQL 命令发送到您的 mdb 数据库，例如（`cn`此处是连接对象）：

```
cn.execute "CREATE TABLE myTableName (myTable_id autoNumber, myTable_code Text, ...)" 
```

请注意，MsAccess 使用一个特定的 DDL，它看起来像标准的 T-SQL，但实际上并非如此。检查 MsAccess 帮助中的语法。

根据您的数据库（及其约束、默认值、使用的主键、关系、数据验证规则等），传输 Access 可以简单直接，甚至可能无法实现。每次您的数据库实施特定于访问/非标准的 SQL 规则时，您都会遇到问题。

如果您确实需要将访问数据转换为其他内容，我建议您 (1) 在 MS-SQL 下导出它（免费版本可以，Access 或[此站点上](http://www.ssw.com.au/ssw/)提供升迁向导），（ 2）使用像[这样](http://www.SQLManager.net)的附加工具生成“CREATE DATABASE”SQL 脚本，包括或不包括数据插入，（3）使用此脚本尝试在另一台数据库服务器上创建数据库及其数据。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2008-12-19T02:00:14.093

如果您有使用 Access 的任务，那么请找一台 Windows 计算机并在 Access 的本机平台上进行练习。做任何其他事情是完全没有意义的，因为您不会学到任何有关 Access 的有用信息。

如果任务是使用 Jet 数据存储，那就另当别论了。如果是这样，那么你应该用不同的措辞来表达你的问题。我不建议在除本机 Windows 文件系统之外的任何东西上使用 Jet。当然，如果项目实际上是读取/写入数据到 Jet 数据文件，那么如果您至少不使用 Windows 作为 ODBC 主机，那么您并没有真正完成任务。

# magento - 如何从首页排除“缺货”商品？

> ID：377228
> 
> 赞同：1
> 
> 时间：2008-12-18T08:39:26.533
> 
> 标签：magento, product

我目前正在使用 Magento 1.1.6。我的商店只销售独特的商品（独家设计的衬衫），这意味着在任何时候，每件商品只有 1 件可用。

如何在首页中省略那些已经售出的商品？

顺便说一句，我正在使用这些代码在首页上显示产品：

```
{{block type="catalog/product_list" category_id="3" template="catalog/product/list_home_batik.phtml"}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T21:21:27.720

转到系统>配置>目录>库存>库存选项。“显示缺货产品”的下拉菜单更改为否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-16T05:52:07.707

我认为文件 catalog/product/list_home_batik.phtml 是基于 catalog/product/list.phtml

您可以通过添加修改文件 catalog/product/list_home_batik.phtml

```
<?php if($_product->isSaleable()): ?> 
```

刚过

```
<?php foreach ($_productCollection as $_product): ?> 
```

并通过添加

```
<?php foreach ($_productCollection as $_product): ?> 
```

就在之前

```
<?php endforeach; ?> 
```

如果它不起作用，您应该提供完整的文件，以便我查看。

# javascript - 问题：XMLHttpRequest - 处理服务器连接丢失

> ID：377231
> 
> 赞同：5
> 
> 时间：2008-12-18T08:43:11.207
> 
> 标签：javascript, xmlhttprequest

如何处理使用 XMLHttpRequest 向服务器发出同步请求而服务器不可用的情况？

```
xmlhttp.open("POST","Page.aspx",false);
xmlhttp.send(null); 
```

现在这种情况会导致 JavaScript 错误：“系统找不到指定的资源”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T11:41:36.417

好的，我通过使用 try...catch around xmlhttprequest.send 解决了它

：

```
xmlhttp.open("POST","Page.aspx",false);              
       try
       {
       xmlhttp.send(null);
       }
       catch(e)
       {
            alert('there was a problem communicating with the server');
       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T09:14:35.357

尝试超时属性。

```
xmlHTTP.TimeOut= 2000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:39:52.963

您没有检查正确返回的状态。通过您提供的代码，您正在执行 GET 请求。要正确检查请求的状态，您必须为 onreadystatechange 事件创建一个事件处理程序，然后在其中检查 readyState 属性是否等于 4，然后在方法内部检查状态是否为 200。

您可以在此处找到详细说明：[Mozilla 的 Ajax 教程](https://developer.mozilla.org/en/AJAX/Getting_Started)

```
 xmlhttp.onreadystatechange=function()

xmlhttp.open("GET","Page.aspx",false);
{
  if (xmlhttp.readyState==4) 
  {
     if (xmlhttp.status==200)
     {
       //Ajax handling logic
     }
  }
}
xmlhttp.send(null); 
```

# ruby - 在 Ruby 中调用多个对象的方法的酷方法？

> ID：377237
> 
> 赞同：7
> 
> 时间：2008-12-18T08:45:02.357
> 
> 标签：ruby, object, methods

很久以前，我在 Ruby 中看到了这个技巧。而不是做（例如）

```
if array1.empty? and array2.empty? and array3.empty? 
```

您可以一次调用所有对象并在最后附加操作，有点像

```
if %w(array1 array2 array3).each { |a| a.empty? } 
```

但我认为它比那更简单......或者，它可能就是那样。我真的不知道，但这就是为什么我有兴趣找出答案。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-18T09:02:48.250

`if [array1, array2, array3].all? { |a| a.empty? }`

我想这就是你要找的

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T09:47:47.427

如果您使用的是 Rails 或 Ruby 1.9，则可以使用 Symbol#to_proc：

```
[array1, array2, array3].all?(&:empty?) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T09:39:49.063

J Cooper 说得对，但只是添加一个脚注：

```
%w(array1 array2 array3) # => ["array1", "array2", "array3"] 
```

%w 接受一个字符串并将其拆分为空格以返回一个字符串数组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T15:39:33.317

附带说明一下，Symbol#to_proc 可能存在性能问题，因此在值得阅读的情况下使用它。

# java - 用于服务器端应用程序的 JavaFX 脚本

> ID：377242
> 
> 赞同：2
> 
> 时间：2008-12-18T08:46:10.983
> 
> 标签：java, javafx, server-side, javafx-1

有没有人尝试在服务器端应用程序中使用*JavaFX 脚本？*

该语言本身看起来非常漂亮和现代，并且完全兼容 Java。如果 Sun 是认真的，它可能在服务器端也很普遍，Java 很强大。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-26T12:58:49.230

是的，您是对的，但 JavaFx 的主要关注点是 RIA，许多组织都在考虑为自己选择这项技术。

# sql - ms sql 2005 中返回字段的问题 - System.InvalidCastException：

> ID：377243
> 
> 赞同：1
> 
> 时间：2008-12-18T08:46:28.470
> 
> 标签：sql, sql-server

使用下面的代码，我从*MS SQL 2005*返回一个 nvarchar 字段并不断收到 System.InvalidCastException。

```
vo.PlacementID = dr.IsDBNull(0) ? null : dr.GetString(0); 
```

vo.PlacementID 变量是 String 类型，所以应该没有问题。我试图返回的值是这样的（数字、数字、字母）：00F、02A、01F 等

```
System.InvalidCastException: Unable to cast object of type 'System.Int32' to 
type 'System.String'.
    at System.Data.SqlClient.SqlBuffer.get_String()
    at System.Data.SqlClient.SqlDataReader.GetString(Int32 i) 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T11:45:10.013

如果您再次阅读异常，它会为您提供有关问题的线索：

> 系统。**InvalidCastException**： ***无法将“System.Int32”类型的对象转换为“System.String”类型***。在 System.Data.SqlClient.SqlBuffer.get_String() 在 System.Data.SqlClient.SqlDataReader.GetString(Int32 i)

基本上，在 SqlDataReader 的第 0 列中返回的基础数据类型不是字符串兼容类型，因此是强制转换异常。

我建议在有问题的行上设置一个断点，然后在即时窗口中执行以下行：

```
? dr.GetValue(0).GetType() 
```

这将告诉返回什么类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T11:52:55.333

转换异常不是在赋值中引发，而是在 datareader 的 GetString() 中引发。

试试 Dr.GetValue(0).ToString()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T08:49:08.840

由于`InvalidCastException`属性`PlacementID`和`string`. 如果是这种情况，你会得到一个编译时错误。问题是结果集中的第一个字段不是 a `string`，而是别的东西。

# api - API 设计术语，我就是记不住这个词！

> ID：377245
> 
> 赞同：2
> 
> 时间：2008-12-18T08:46:59.297
> 
> 标签：api

API 设计中使用的一个词与两个实体之间的耦合有关。如果一个实体可以在不影响实体的情况下发生变化，则称它们为_ _ _ _ _。例如给定声明

类点 { public int X; 在 Y 公开；}

可以说成员 X 和 Y 表现出这种行为，因为对 X 的更改不会导致 Y 的任何变化。我正在寻找的这个词在 .NET 圈子中使用得不多，但你很难阅读一个关于 C++ STL 的博克，没有重复出现这个词。

所以，经过大量搜索，我不记得这个词了，你可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T08:55:40.853

正交？独立的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-12T19:31:11.277

据说它们是**松耦合的**。

# python - 无堆栈python和多核？

> ID：377254
> 
> 赞同：25
> 
> 时间：2008-12-18T08:51:22.640
> 
> 标签：python, multithreading, concurrency, multicore, python-stackless

所以，我在玩[Stackless Python ，一个问题突然出现在我的脑海中，也许这是“假设”或“常见”知识，但我在](http://www.stackless.com/)[stackless 站点](http://www.stackless.com/)上的任何地方都找不到它。

[Stackless Python](http://www.stackless.com/)是否利用了多核 CPU？在普通的 Python 中，GIL 一直存在，并且要（真正）使用多个内核，您需要使用多个进程，对于[Stackless](http://www.stackless.com/)也是如此吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-12-18T09:43:07.653

Stackless python 不*使用*它运行的任何类型的多核环境。
这是对 Stackless 的常见误解，因为它允许程序员利用基于线程的编程。对于许多人来说，这两者紧密相连，但实际上是两个独立的东西。

在内部，Stackless 使用循环调度程序来调度每个[tasklet](http://www.stackless.com/wiki/Tasklets)（微线程），但没有 tasklet 可以与另一个 tasklet 并发运行。这意味着如果一个小任务很忙，其他小任务必须等到该小任务放弃控制权。默认情况下，调度程序不会停止一个小任务并将处理器时间分配给另一个小任务。tasklet 负责使用 Stackless.schedule() 将自己安排回调度队列的末尾，或者完成其计算。

**因此，所有小任务都以顺序方式执行**，即使在多核可用时也是如此。

Stackless 不支持多核的原因是因为这使线程变得更加容易。这正是 stackless 的全部意义所在：

[来自官方无堆栈网站](http://www.stackless.com/)

> Stackless Python 是 Python 编程语言的增强版本。它允许程序员获得基于线程的编程的好处，而不会出现与传统线程相关的性能和复杂性问题。Stackless 添加到 Python 的微线程是一种廉价且轻量级的便利，如果使用得当，可以带来以下好处：
> 
> *   改进的程序结构。
> *   更具可读性的代码。
> *   提高程序员的工作效率。

这是有关多核和无堆栈的更多信息的[链接。](http://www.stackless.com/pipermail/stackless/2007-August/001963.html)

# visual-studio - VS2008中的代码分析/FxCop

> ID：377257
> 
> 赞同：8
> 
> 时间：2008-12-18T08:51:45.883
> 
> 标签：visual-studio, fxcop

FxCops 对我来说是新事物，但我一如既往地想了解新事物。根据我的阅读，FxCops 已经包含在 VS2008 中。我猜这是“代码分析”功能。每当我尝试运行它时，它似乎开始重建并以“完成重建”状态结束。
我检查了输出窗口，那里有一堆警告。但如果我没记错的话，应该有更多的图形用户界面，然后是我的输出窗口中的文本墙，对吧？
我错过了应该弹出的窗口吗？我可以在某个地方打开它吗？还是我还缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T08:57:52.080

是的，代码分析是 FxCop 的友好名称。但是，我不知道错误/警告列表之外的友好窗口应该出现在哪里，前缀为`CA`.

在项目属性屏幕上有一个代码分析选项卡，您可以在其中将警告视为错误以强制执行您关心的规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T08:58:58.927

你不会错过任何东西 - 没有弹出窗口。

输出窗口中的问题列表几乎就是您在 FxCop 中获得的所有内容。只是 FxCop 是一个独立的应用程序。

这是一篇关于 FxCop 和代码分析的不错的文章：

[http://geekswithblogs.net/sdorman/archive/2008/08/19/visual-studio-and-code-analysis.aspx](http://geekswithblogs.net/sdorman/archive/2008/08/19/visual-studio-and-code-analysis.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-09T14:58:33.847

所有人都知道，因为我花了很长时间才弄清楚这一点.... 代码分析/FxCop 仅包含在 VS 2008 的 Team System 和 Team Suite 版本中，不包含在专业版中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T16:46:07.363

FxCop 的替代方法是使用 NDepend 工具，该工具允许[在 C# LINQ 查询（即 CQLinq）上编写代码规则](http://www.ndepend.com/Features.aspx#CQL)。NDepend 集成在 VS 2012、2010 和 2008 中。*免责声明：我是该工具的开发人员之一*

默认提出超过[200 条代码规则。](http://www.ndepend.com/DefaultRules/webframe.html)*借助众所周知的*C# LINQ 语法，自定义现有规则或创建自己的规则非常简单。

NDepend 代码规则可以[在 Visual Studio 中实时](http://www.ndepend.com/Doc_VS_CQL.aspx)验证，并在生成过程中，在[生成的 HTML+javascript 报告](http://www.ndepend.com/Doc_CI_Report.aspx#CQLRule)中进行验证。

您似乎担心*误报*的数量。为了保持低误报的数量，CQLinq 提供了独特的功能，可以通过以 notmycode 为前缀的特殊代码查询来**定义**JustMyCode**集合**。有关此功能的更多说明，请参见[此处](http://www.ndepend.com/Doc_CQLinq_Syntax.aspx#NotMyCode)。例如，这里有两个*notmycode*默认查询：

 ****   [丢弃 JustMyCode 中生成的和设计器的方法](http://www.ndepend.com/DefaultRules/webframe.html?Q_Discard_generated_and_designer_Methods_from_JustMyCode.html)
*   [丢弃 JustMyCode 生成的类型](http://www.ndepend.com/DefaultRules/webframe.html?Q_Discard_generated_Types_from_JustMyCode.html)

为了保持低误报的数量，使用 CQLinq，您还可以将规则结果集中在添加的代码或重构的代码上，因为[过去定义了基线](http://www.ndepend.com/Doc_CI_Diff.aspx)。请参阅以下规则，该规则检测自基线以来添加或重构的过于复杂的方法：

```
warnif count > 0 
from m in Methods
where m.CyclomaticComplexity > 20 &&
      m.WasAdded() || m.CodeWasChanged()
select new { m, m.CyclomaticComplexity } 
```

# c# - 将事件发送到所有工作站的最佳方式是什么

> ID：377275
> 
> 赞同：5
> 
> 时间：2008-12-18T09:00:56.630
> 
> 标签：c#, wcf, web-services, tcp, udp

我希望有人可以指导我，因为我被卡住了......我需要编写一个紧急广播系统，通知工作站出现紧急情况并在用户屏幕底部弹出一条小消息。这看起来很简单，但在多个子网中有大约 4000 个工作站。该系统需要几乎是实时的、轻量级的并且易于部署为 Windows 服务。

当我发现路由器不转发 UDP 广播数据包 xxx255 时，问题就开始了。后来我在 VB6 中做了一个简单的测试钩子来捕获网络发送消息，但即使是那些也没有通过路由器。我还编写了一个简单的数据包嗅探器来过滤数据包，只是发现网络数据包从未到达预期的目的地。

然后我看了一下并探索了使用 MSMQ over HTTP，但这需要在目标工作站上安装 IIS。由于有这么多工作站，这将是一个主要的安全问题。

现在我已经完成了一个带有异步回调的 Web 服务，它向订阅者发送事件。它在小规模上完美运行，但一旦订阅者超过 15 个，性能就会大大降低。轮询服务器并不是一个真正的选择，因为它会在服务器上产生负载（另外我也尝试过）

我需要你的帮助来指导我使用什么技术。有没有人对这么多客户使用过彗星方式，或者我应该看看 WCF 吗？

我正在使用 Visual C# 2005。请帮助我摆脱这种困境。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T09:58:58.870

考虑使用 WCF 回调机制和事件。Juval Lowy有[很好](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)的介绍。

另一种模式是实现[阻塞 Web 服务调用](http://xmpp.org/extensions/xep-0124.html)。例如，这就是 GMail 聊天的工作方式。但是，您将不得不在这里处理会话和超时。当客户端位于 NAT 和防火墙之后且无法直接访问时，它可以工作。但是对于内部网中的简单警报来说，它可能太复杂了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T15:50:43.357

这正是[多播](http://en.wikipedia.org/wiki/Multicast)的设计目的。

正常的网络广播（根据定义）停留在本地子网上，不会通过路由器转发。

另一方面，多播传输可以具有各种范围，从本地子网到本地站点，甚至到全局。您所需要的只是让将您的子网连接在一起的各种路由器能够感知多播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T09:03:29.073

我认为这个问题最好用socket解决。

打开与服务器的连接，并保持打开状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T09:19:12.880

您能否在每个子网中都有一个从属服务器，负责将消息分发给子网中的所有客户端？

然后，您可以只将从属服务器连接到启动消息的中央服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T14:26:43.040

我认为你们中的一些人*对此*想得太多了。每个版本的 Windows 中都已经内置了一项服务，可以提供这种确切的功能！它被称为 Messenger 服务。您所要做的就是确保此服务已启用并在所有客户端上运行。

（尽管您没有在问题中指定，但我从您选择的技术中假设该网络的客户端全部是 Windows）。

您可以使用以下工具从命令行使用此工具发送消息：

```
NET SEND computername "This is a test message" 
```

NET SEND 命令还具有按 Windows 域发送的选项，或按名称发送给特定用户（无论他们在何处登录）或连接到特定 Windows 服务器的每个系统。这些选项应该可以让您轻松避免子网问题，特别是如果您在网络上使用基于域的安全性。（如果您通过服务器而不是直接向客户端发送消息，您可能需要在某些服务器上启用“警报器”服务）。

它的编程版本是一个名为[NetMessageBufferSend()](http://msdn.microsoft.com/en-us/library/aa370605.aspx)的 API ，它非常简单。快速浏览 P/Invoke.net 可以找到[该 API 的页面，该页面](http://www.pinvoke.net/default.aspx/netapi32/NetMessageBufferSend.html)不仅提供了调用 API 所需的定义，还提供了 C# 示例程序！

您根本不需要编写任何客户端代码。可能最复杂的事情将是找出对该 API 的最佳调用集，这些调用将在您的配置中完全覆盖网络。

ETA：我刚刚注意到 Messenger 服务和这个 API 在 Windows Vista 中完全消失了。微软很奇怪完全删除这样的功能。该供应商似乎[有兼容](http://www.lantalk.net/netsend/)的 Vista 替代品。

# flash - 用于商业 Web 应用程序的 Flash - 为什么不呢？

> ID：377285
> 
> 赞同：9
> 
> 时间：2008-12-18T09:04:53.470
> 
> 标签：flash, web-applications

我从事开发业务 Web 应用程序的行业。它们主要供内部使用，有时与合作伙伴区一起使用，但很少可用于公共互联网。它们是帮助公司运营业务的应用程序。

一段时间以来，我有一个想法困扰着我——为什么不为他们使用 Flash 呢？到现在都是ASP.NET+AJAX，还不错，但还是老的HTML+JS。因此，浏览器兼容性很难实现，创建满足客户需求/愿望的丰富 UI 具有挑战性。大多数情况下，这会导致应用程序仅支持 IE，或者最多支持 IE 和 FireFox。

Flash 将解决这一切。它将立即在所有浏览器和所有平台上运行。UI 能力远超 HTML+JS。可以分部加载，可以与服务器进行异步通信。你还能有什么愿望？

然而不知何故，我还没有看到或听到有人这样做。相反，创建了新的替代品（如 Silverlight），它们基本上做同样的事情，但仍试图坚持 HTML+JS。我错过了什么？

应该注意的是，我从未做过任何 Flash 开发，所以也许我严重忽略了一些使这成为不可能的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T09:09:15.913

已经发生了？[柔性！](http://en.wikipedia.org/wiki/Adobe_Flex)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-27T18:33:30.583

我经营一家成功的小型企业（我自己和其他 2 个合作伙伴）为大型金融服务公司（Fidelity、Hancock、Vanguard、T.Rowe Price）开发 Web 应用程序已有 7 年时间，只使用 Flash。

在最初的几年（2001-2004 年），我觉得我们处于领先地位——很少有其他公司使用 Flash 来开发强大的、“真正的商业”网络应用程序。在 2005-2008 年，我觉得我们有很多竞争。现在，我开始看到这条路的尽头了——JS 和 Ajax 现在可以很容易地完成我们使用 Flash 完成的所有事情（异步通信、高度响应的交互性、图表、图形、拖放等） .)

以下是我的一些看法：

1.  Flash 绝对可以处理“真正的”业务应用程序——我们的客户使用我们的应用程序来运行或集成交易系统、风险管理应用程序、投资组合监控和其他业务关键功能。任何说 Flash 无法处理此类事情的人都是错误的。

2.  在开始自己的事业之前，我已经开发了多年的桌面应用程序。Flash 是第一个让我能够在 Web 应用程序中做的事情和在桌面应用程序中一样多的技术。

3.  Flash 确实允许我们开发一次，并在任何浏览器上运行

4.  Flash 为我们提供了更多的 UI 控件和小部件 - 当特定类型的交互需要的不仅仅是文本框或单选按钮或下拉菜单时，我们可以构建任何我们需要的东西。一些应用程序需要新颖的交互功能

5.  也就是说，根据我们的经验，Web 应用程序必须看起来像 Web 应用程序，否则用户将无法获得它。因此，即使您可以构建任何类型的 UI 控件或您想要的界面，您也应该将它们构建成看起来与标准 HTML 控件完全一样，并扩展它们的行为，但永远不要改变它们。不要期望用户学习新东西。

6.  如果您注意的话，您可以让您的 Flash 应用程序比类似的 JS/Ajax 实现更轻量级。摆脱无关的图形、动画、不必要的字体。我们已经构建了比许多流行的 AJAX 库更轻量的严肃的定量 Monte-Carlo 模拟/财务规划应用程序。

7.  最大的缺点是管理您的应用程序/与其他开发人员共享工作负载。底线 - 没有那么多的 Flash 开发人员，也没有多少已建立的编码标准或框架。因此，请提前知道，只要应用程序存在，您就可能自己拥有该应用程序。如果您的客户在您交付应用程序后会接管该应用程序，那么他们将很难找到新的开发人员来管理/扩展它。

8.  第二个最大的缺点是你对 Adob​​e 很感激。如果他们决定停止使用 Flash，我们就会陷入困境。

9.  正如其他人指出的那样，可访问性是一个真正的问题。有一些变通方法，但需要做很多额外的工作，而如果您使用 HTML，它通常是“免费的”。（尽管 AJAX/JS 也可能存在巨大的可访问性问题）。

10.  我不认为 iPhone 会支持 Flash。虽然 Flash 在台式机上基本上无处不在，但它可能永远不会进入移动设备。（Adobe 为移动设备提供 FlashLite，但我对此知之甚少。似乎吸收率非常低。）

11.  虽然其他技术正在追赶（并在某些情况下超越它），但我认为 Flash 至少还有一两年的使用寿命。

希望这会有所帮助。祝你好运。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-18T09:09:09.157

一个重要的原因是可访问性。在一个足够大的组织中，您将有一些用户需要更大的文本、屏幕阅读器、盲文终端或更高的对比度。现有的、成熟的技术可以用于“普通”Web 应用程序（如果它们通常不太依赖 JavaScript）。

一旦您的内容被困在闪存中，这些技术通常就会一蹶不振。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T12:00:05.520

多年来，Flash 似乎一直是交互式应用程序中的下一件大事。然而，无论出于何种原因，它从未发生过。我认为它现在不会发生，原因如下：

*   Javascript 框架几乎完全解决了浏览器兼容性和丰富功能的问题。你见过 Ext.js 吗？另请参阅[**http://www.joelonsoftware.com/items/2007/09/18.html**](http://www.joelonsoftware.com/items/2007/09/18.html)
*   所有的 Web 开发人员都对 javascript 有一定的了解，因此使用它来扩展应用程序的功能的门槛很低。如果您想编写交互式 Flash 应用程序，您可能会从头开始。
*   你可以用 javascript 做的事情发展得如此之快，Flash 可能对于许多（不是全部）用途来说已经过时了。这是让我说“Flash 已死”的网站：**[http](http://webdev.stephband.info/parallax.html)** ://webdev.stephband.info/parallax.html - 如果您可以使用 javascript 做到这一点，您为什么需要（学习）Flash？
*   Chrome 和 FF3 将 javascript 的执行速度放在了开发的最前沿。Flash 是一种资源消耗。
*   就我个人而言 - 我知道基于浏览器的应用程序的视觉提示。我不使用 Flash 应用程序，我觉得这是我需要学习的新范例。我不认为我是唯一有这种反应的用户。

考虑到所有这些，对我来说，Javascript 是交互式应用程序的未来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T09:44:30.333

1.  部署。您依赖于您的 IT 部门可能愿意或可能不愿意分发的浏览器插件。
2.  通过使用 Flash/Flex，您的技术基于专有软件。
3.  封闭源代码，因此调试起来更加困难

说了这么多，其实我还是挺喜欢 Flex 的，但出于以上原因，我认为它只不过是一个玩具。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T09:55:41.793

它把你的应用程序放在一个盒子里。

如果您对 box 带来的限制感到满意，那么一切都很好，但是除了更容易访问丰富的 UI 之外，您还会受到一些限制。例如，如果您需要您的应用程序具有搜索功能，您可能必须编写自己的而不是依赖于 google（外部）或内部索引服务器（假设您仍然可以使用后端数据库的索引服务，然后能够通过您的 Flash 应用程序访问它？）

我已经有 7 年没有写过 Flash 应用程序了。当我这样做时，让小玩具运行起来很有趣，而且相当容易，但我从未考虑过认真的应用程序——尽管很久以前——我怀疑事情已经改变了。

> Flash 将解决这一切。它将立即在所有浏览器和所有平台上运行。

即刻？

> 加载中... 23% ...

;-)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-27T18:39:41.240

很简单：因为 Flash 的当前版本仍然充满了 bug。例如，[在 Linux 下重音字符输入存在一个问题，](http://bugs.adobe.com/jira/browse/FP-40)这几乎是一个障碍。我最近还测试了几个同时提供 JS 和 Flash 作为客户端技术的框架，我只用了几分钟就编写了一些在 Flash 中表现不正确的小示例。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T11:39:31.973

许多人和组织都在使用 Flex 和常规 Flash 进行此操作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-27T18:50:39.690

这是可以做到的，并且是有效的。但是，通常做得不好。有一种被 Flex 的阴暗面所吸引的倾向，而忘记了基础知识。结果是大量真正可怕的应用程序破坏了预期的用户行为。

当然，这不仅限于 Flash/Flex。我被聘为一个针对 iPhone 的网站的顾问。由于他们实施了 CIUI，Web 浏览器的后退按钮和书签功能被破坏了。“哦，我们已经考虑过了”。他们创建了一种精心设计的方法来在他们的服务器上存储您自己的页面收藏夹，当然前提是您已登录。一系列链接确保用户永远不需要他们的后退按钮。我在这里也没有夸大其词，我没有骗你。

这个基本级别的失败是你要注意的。可以使用 Flash 和 Flex 构建非常好的应用程序，并且可以解决浏览器兼容性问题。请注意不要忘记基础知识。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-15T21:16:03.940

值得注意的是，我的银行使用 Flash 作为其登录屏幕。他们正在做某种生物特征打字节奏识别，我认为如果它是在 Javascript 中，那将是一个安全漏洞。

缺点是这意味着我不能在我的手机上使用他们该死的网站！

# unicode - 如何识别 UTF-8 编码的字符串

> ID：377294
> 
> 赞同：15
> 
> 时间：2008-12-18T09:07:43.980
> 
> 标签：unicode, encoding, utf-8

识别字符串（是或）是否可能是 UTF-8 编码的最佳方法是什么？Win32 API`IsTextUnicode`在这里没有多大帮助。此外，该字符串不会有 UTF-8 BOM，因此无法检查。而且，是的，我知道只有 ASCII 范围以上的字符才被编码为超过 1 个字节。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-18T10:40:33.717

Mozilla 开发的用于 FireFox 的[chardet字符集检测。](http://www.mozilla.org/projects/intl/chardet.html)[源代码](http://mxr.mozilla.org/mozilla/source/intl/chardet/)

[jchardet](http://jchardet.sourceforge.net/)是来自 mozilla 的自动字符集检测算法的源代码的 java 端口。

[NCharDet](http://www.conceptdevelopment.net/Localization/NCharDet/)是 Mozilla 和 FireFox 浏览器中使用的 C++ 的 Java 端口的 .Net (C#) 端口。

使用 Microsoft 的[MLang](http://msdn.microsoft.com/en-us/library/aa767865(VS.85).aspx)进行字符编码检测的[代码项目 C#示例。](http://www.codeproject.com/KB/recipes/DetectEncoding.aspx)

[UTRAC](http://utrac.sourceforge.net/)是用 C++ 编写的用于检测字符串编码的命令行工具和库

[cpdetector](http://cpdetector.sourceforge.net/link.shtml)是一个用于编码检测的java项目

[chsdet](http://chsdet.sourceforge.net/)是一个 delphi 项目，是一个独立的可执行模块，用于对给定文本或文件进行自动字符集/编码检测。

另一个有用的帖子指向很多库来帮助您确定字符编码[http://fredeaker.blogspot.com/2007/01/character-encoding-detection.html](http://fredeaker.blogspot.com/2007/01/character-encoding-detection.html)

您还可以查看相关问题[How Can I Best Guess the Encoding when the BOM (Byte Order Mark) is Missing?](https://stackoverflow.com/questions/373081/how-can-i-best-guess-the-encoding-when-the-bom-byte-order-mark-is-missing) ，它有一些有用的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-18T09:15:06.320

没有真正可靠的方法，但基本上，作为字节的随机序列（例如，标准 8 位编码的字符串）不太可能是有效的 UTF-8 字符串（如果设置了字节的最高有效位，关于 UTF-8 中可以跟随什么样的字节有非常具体的规则），您可以尝试将字符串解码为 UTF-8，如果没有解码错误，则认为它是 UTF-8。

确定是否存在解码错误完全是另一个问题，许多 Unicode 库只是用问号替换无效字符，而不指示是否发生错误。因此，您需要一种明确的方法来确定解码时是否发生错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-18T09:18:20.963

[这个 W3C 页面](http://www.w3.org/International/questions/qa-forms-utf-8)有一个用于验证 UTF-8 的 perl 正则表达式

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-11T01:17:31.660

对于 Win32，您可以使用 mlang API，这是 Windows 的一部分，并且受 Windows XP 的支持，很酷的一点是，它可以为您提供输入在特定编码中的可能性的统计信息：

```
CComPtr<IMultiLanguage2> lang;
HRESULT hr = lang.CoCreateInstance(CLSID_CMultiLanguage, NULL, CLSCTX_INPROC_SERVER);
char* str = "ï»¿abc"; // EF BB BF 61 62 63
int size = 6;
DetectEncodingInfo encodings[100];
int encodingsCount = 100;
hr = lang->DetectInputCodepage(MLDETECTCP_NONE, 0, str, &size, &encodings, &encodingsCount); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-07-18T16:01:28.787

要**在 ruby​​ 中**进行字符检测，请安装“chardet”gem

```
sudo gem install chardet 
```

这是一个在标准输入流上运行 chardet 的小 ruby​​ 脚本。

```
require "rubygems"
require 'UniversalDetector' #chardet gem
infile =  $stdin.read()
p UniversalDetector::chardet(infile) 
```

Chardet 从其统计分析中输出对字符集编码的猜测以及置信度 (0-1)

[另请参阅此片段](http://snippets.aktagon.com/snippets/159-Detecting-file-data-encoding-with-Ruby-and-the-chardet-RubyGem)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T00:10:05.003

基于 Mozilla 字符集检测器的 C/C++ 独立库

[https://github.com/batterseapower/libcharsetdetect](https://github.com/batterseapower/libcharsetdetect)

> 通用字符集检测器 (UCSD) 向 Mozilla C++ UCSD 库公开 C 接口和无依赖性接口的库。该库提供了一组高度准确的启发式方法，试图确定用于对某些输入文本进行编码的字符集。当您的程序必须处理没有任何编码元数据提供的输入文件时，这非常有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-21T00:16:08.817

您没有指定语言，但在 PHP 中您可以使用`mb_check_encoding`

```
 if(mb_check_encoding($yourDtring, 'UTF-8'))
   {
   //the string is UTF-8
    }
   else 
    {
       //string is not UTF-8
     } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-21T01:11:53.483

在 Windows 上，您可以使用`MultiByteToWideChar()`代码`CP_UTF8`页和`MB_ERR_INVALID_CHARS`标志。如果函数失败，则字符串不是有效的 UTF-8。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-11T09:21:21.240

作为上一个关于 Win32 mlang DetectInputCodepage() API 的[答案](https://stackoverflow.com/a/19308773/2215591)的附加内容，以下是如何在 C 中调用它：

```
#include <Mlang.h>
#include <objbase.h>
#pragma comment(lib, "ole32.lib")

HRESULT hr;
IMultiLanguage2 *pML;
char *pszBuffer;
int iSize;
DetectEncodingInfo lpInfo[10];
int iCount = sizeof(lpInfo) / sizeof(DetectEncodingInfo);

hr = CoInitialize(NULL);
hr = CoCreateInstance(&CLSID_CMultiLanguage, NULL, CLSCTX_INPROC_SERVER, &IID_IMultiLanguage2, (LPVOID *)&pML);
hr = pML->lpVtbl->DetectInputCodepage(pML, 0, 0, pszBuffer, &iSize, lpInfo, &iCount);

CoUninitialize(); 
```

但测试结果非常令人失望：

*   它无法区分 CP 437 和 CP 1252 中的法语文本，即使文本在错误的代码页中打开时完全不可读。
*   它可以检测以 CP 65001 (UTF-8) 编码的文本，但不能检测以 UTF-16 编码的文本，因此很有把握地错误地报告为 CP 1252！

# latex - 是否有一个 LaTeX 命令可以使文本全部小写？

> ID：377301
> 
> 赞同：4
> 
> 时间：2008-12-18T09:14:00.113
> 
> 标签：latex, macros

嘿，我正在尝试使用 textsc 命令编写一个命令以在报告的首页上打印今天的日期，但是今天的日期大写了 12 月。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T09:30:32.953

您可以使用`\MakeLowercase`宏或`\MakeTextLowercase`来自[textcase](http://www.ctan.org/tex-archive/macros/latex/contrib/textcase/)包。有关详细信息，请参阅UK TeX 常见问题解答中的[此页面](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=casechange)。

# snmp - SNMP MIB 开发工具

> ID：377303
> 
> 赞同：9
> 
> 时间：2008-12-18T09:14:38.523
> 
> 标签：snmp, mib

有谁知道帮助开发具有正确格式和语法的 SNMP MIB 的好工具吗？

如果可能，它应该是免费的并在 Linux 下运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-09-23T12:54:01.360

您总是可以在 emacs 中使用[snmp-mode](http://simon.nitro.dk/dotfiles/emacs/snmp-mode.el)来突出显示语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T10:20:55.220

根据[这个](http://net-snmp.sourceforge.net/wiki/index.php/Writing_your_own_MIBs)net-snmp howto，他们推荐的[smilib](http://www.ibr.cs.tu-bs.de/projects/libsmi/)包中有一个名为[smilint的工具。](http://www.ibr.cs.tu-bs.de/projects/libsmi/smilint.html)听起来比使用 snmptranslate 更有针对性。

另请参阅[此](http://www.ops.ietf.org/mib-review-tools.html)ietf 页面以获取有关用法的说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-06T14:57:55.773

对于一个非常快速和肮脏的 systax-hightlighter，请尝试[vim 中的默认颜色语法突出显示](http://www.cyberciti.biz/faq/turn-on-or-off-color-syntax-highlighting-in-vi-or-vim/)。下面是 vim 中 MIB-II 文件的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/SEYxV.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-03T17:09:33.137

我一直在使用[MIB Explorer Lite](http://www.mibexplorer.com/download/download.html)，它在您加载 MIB 时具有语法检查器。有一个免费试用版，我认为持续大约 30 天。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T07:27:22.933

我使用了[http://www.mibdesigner.com/](http://www.mibdesigner.com/)几次，我发现它是一个显着减少 MIB 设计时间的有价值的工具。

它允许我轻松地重新排序 MIB 的部分并重命名 OID。更重要的是，它不仅检查无效语法，而且检查常用的设计和建议违规。输出格式很好。

# sql - 带有 Hibernate 的组合框

> ID：377311
> 
> 赞同：1
> 
> 时间：2008-12-18T09:16:55.693
> 
> 标签：sql, mysql, database, hibernate

我正在寻找在 Hibernate 对象访问的 Mysql 数据库中维护组合框值的最佳方法。

目前我们有下表：

```
CREATE TABLE COMBO_VALUES(
   KEY VARCHAR(5) NOT NULL,
   COMBO_TYPE VARCHAR(20) NOT NULL,
   VALUE VARCHAR(100) NOT NULL
   PRIMARY KEY(KEY,COMBO_TYPE)
);
INSERT INTO COMBO_VALUES VALUES('A1', 'COMBO1', 'VALUE1');
INSERT INTO COMBO_VALUES VALUES('A2', 'COMBO1', 'VALUE2');
INSERT INTO COMBO_VALUES VALUES('A3', 'COMBO1', 'VALUE3'); 
```

这个表的问题是我们无法用 Hibernate 映射它。

以前有人遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T14:26:21.293

除非您明确编写可以从数据库配置的用户界面，否则不应将组合框选项存储在数据库中。

组合框只是*一种从枚举列表中选择选项的机制*。它是 UI 工件，而不是数据工件。

您应该存储的是一个*独立于显示机制*的枚举选项列表，并将它们传递给您的用户界面代码，该代码从中创建一个组合框。

这样，如果您稍后决定更改为单选按钮、复选框或命令行界面，则只有您的 UI 代码会更改，而数据库表不会更改...

# java - JSP 代码到 Struts 或 JSTL 标记

> ID：377312
> 
> 赞同：0
> 
> 时间：2008-12-18T09:17:51.620
> 
> 标签：java, jsp, struts

你好，

我在jsp代码中做folling的东西我需要使用Struts或使用JSTL标签来做任何人有相关的想法请分享..

以下是我的 JSP 代码

```
<%

                        Object category = request.getAttribute("categoryDetails");
                        Hashtable<String, Hashtable<String, Integer>> cat = (Hashtable<String, Hashtable<String, Integer>>) category;
                        //out.print(cat.entrySet());

                        Set<String> functions = cat.keySet();

                        for(String fun : functions){

                            out.print("-----------");
                            out.print(fun);
                            out.print("-----------");

                            Hashtable<String, Integer> obj = cat.get(fun);

                            Vector<String> subFunction = new Vector<String>(obj.keySet());

                            Collections.sort(subFunction);

                            for(String str : subFunction){                            
                                out.print("#"+str+"-"+obj.get(str));
                                }
                        }

                        %> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T09:35:58.010

两者我都不会使用，看看所涉及的逻辑，我宁愿写一个自定义的jsp标签来实现这一点。JSTL/Struts 在这方面同样出色/糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T09:53:08.240

您可以使用自定义标签或创建临时视图结构，如下所示：

```
public class FunctionView {
    String functionName;
    List<SubFunctionView> subfunctions;

    public FunctionView(String functionName, List<SubFunctionView> subfunctions) {
        this.functionName = functionName;
        this.subfunctions = subfunctions;
    }

    public String getFunctionName() {
        return functionName;
    }

    public void setFunctionName(String functionName) {
        this.functionName = functionName;
    }

    public List<SubFunctionView> getSubfunctions() {
        return subfunctions;
    }

    public void setSubfunctions(List<SubFunctionView> subfunctions) {
        this.subfunctions = subfunctions;
    }
}

public class SubFunctionView {
    String subFunctionName;
    Integer value;

    public SubFunctionView(String subFunctionName, Integer value) {
        this.subFunctionName = subFunctionName;
        this.value = value;
    }

    public String getSubFunctionName() {
        return subFunctionName;
    }

    public void setSubFunctionName(String subFunctionName) {
        this.subFunctionName = subFunctionName;
    }

    public Integer getValue() {
        return value;
    }

    public void setValue(Integer value) {
        this.value = value;
    }
} 
```

然后，您只需在控制器上发布一个名为 List getFunctionsView() 的方法，并使用一个简单的嵌套 jstl foreach 循环。

编辑：不得不稍微修改一下。

# events - JQuery：如何查看元素上定义了哪些事件？

> ID：377319
> 
> 赞同：3
> 
> 时间：2008-12-18T09:21:55.357
> 
> 标签：events, jquery

我用

```
$(window).bind( ... ) 
```

设置事件处理程序，但由于某种原因，我一直丢失事件处理程序（我认为）。调试（firebug）时有什么方法可以查看哪些自定义事件已添加到给定元素？

你的 安德烈亚斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-18T09:31:19.330

jQuery 绑定的所有事件（例如非内联事件）都可以通过 .data 访问

```
var $el = $('#someId');
var allEvents =  $.data( $el , "events" ); 
```

或者

```
$('#someId').data('events'); 
```

我将事件绑定到窗口对象非常罕见，但同样的概念仍应适用，因此请尝试`$(window).data('events')`

这确实[在这里](http://pastebin.me/494a1a1181c23)工作演示（写入控制台，所以使用 firefox + firebug）

# c++ - 有人可以解释 C++ FAILED 函数吗？

> ID：377322
> 
> 赞同：4
> 
> 时间：2008-12-18T09:23:15.727
> 
> 标签：c++, windows, com

我见过很多将函数调用包装在 FAILED() 函数/方法/宏中的示例 C++ 代码。有人可以向我解释这是如何工作的吗？如果可能的话，有人知道 ac# 等价物吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T09:24:23.760

它通常检查 COM 函数错误。但是检查任何返回 a 的函数`HRESULT`是它的意义所在，特别是。`FAILED`如果值为负，则返回真值`HRESULT`，这意味着函数失败（“错误”或“警告”严重性）。两者`S_OK`都`S_FALSE`>= 0，因此它们不用于传达错误。“负数”是指为`HRESULT`错误代码设置高位，*即*它们的十六进制表示，可以在*例如*winerror.h 中找到，以 8 开头，如 0x8000FFFF。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T09:38:59.283

[此页面](http://msdn.microsoft.com/en-us/library/ms819775.aspx)显示 WinError.h 包含文件的一半，其中定义了`FAILED()`. 它实际上只是一个非常简单的宏，整个定义是这样的：

```
#define FAILED(Status) ((HRESULT)(Status)<0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T10:20:09.967

> 如果可能的话，有人知道 ac# 等价物吗？

在 C# 中你实际上不需要它，除非你使用 COM 对象。大多数 .NET 函数要么已经返回（或多或少）有意义的值（即 null、false），要么在失败时抛出异常。

如果您直接访问 COM 对象，则可以定义一个简单的 Failed 函数，该函数执行 unwind 帖子中的宏所做的事情。在本地定义（受保护/私有），因为杂乱的 COM 详细信息无论如何都不应该在您的应用程序中可见。

如果您不知道，COM 中还有一个 SUCCEEDED 宏。无需测试失败:)

# ssl - 社区服务器上的 OpenID

> ID：377323
> 
> 赞同：3
> 
> 时间：2008-12-18T09:23:52.107
> 
> 标签：ssl, openid, community-server

好的，我在社区服务器论坛上问过，完全被忽略了。所以我会在这里问。CommunityServer 的 OpenID 提供程序（可能是 janrain）不适用于 SSL OpenID 端点。我真的不知道非 SSL OpenID 端点，即使我知道......我不确定是否要使用它。

我有一个社区服务器安装，我所有的用户都抱怨注册/登录表单似乎支持 openid，但实际上并不支持。有人遇到过这个问题并解决了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-23T20:17:51.860

CS 目前使用的是 Janrain 的 C# 库的旧版本。我认为下一个版本预计会使用 dotnetopenid。但即使在其当前版本中，我也希望它能够与 SSL OP 端点一起正常工作。如果没有，那么来自 myopenid.com 的 OpenID 将无法用于登录 CS，我希望 CS 人员会注意到这一点。

但是，如果特定端点被破坏，则可能是另一个问题的迹象。如果您可以提供无法正常工作的特定 OpenID 端点，请发送电子邮件至 dotnetopenid@googlegroups.com，我很乐意进一步调查。

有一个非 SSL 的测试 OP 端点，您可以通过以下方式登录您的 CS 来尝试查看它是否有效：http: [//nerdbank.org/opaffirmative/affirmativeidentity.aspx](http://nerdbank.org/opaffirmative/affirmativeidentity.aspx)（是的，这实际上是您的有效 OpenID无需密码即可登录）。

# java - 从类和 javadoc 生成代码存根

> ID：377331
> 
> 赞同：2
> 
> 时间：2008-12-18T09:29:34.810
> 
> 标签：java, class, intellij-idea, javadoc

是否有人熟悉从类和 javadoc生成*具有有意义名称的代码存根的工具？*

真正的问题应该是“我有没有调试信息和匹配 javadoc 的类，但是我的 IntelliJ IDEA 8.0.1（请，没有 IDE 战争）没有考虑到 javadoc 并向我显示“void setLocation（Object object , String str1, int i1, int i2);" 而不是 "void setLocation(Object component, String name, int x, int y);" - 这对自动完成和易用性都有很大的不同”。如果能回答这个问题，我也很满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T09:50:08.433

我建议按照以下思路向 IDEA 提交一个错误：如果一个类没有调试信息但有 JavaDocs，IDEA 应该使用 JavaDoc 来确定参数的名称。

顺便提一句。Eclipse 也有同样的问题。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-22T12:45:58.837

转到项目结构（在 8.x 中为 Ctrl+Alt+Shift+S）-> 模块->（选择您正在编码的模块）-> 依赖项。选择包含第三方组件的依赖项（JAR 文件或目录）。单击“编辑...”按钮，将弹出一个新窗口。如果您的计算机上有 JAR 文件或带有 javadocs 的文件夹，请选择“附加 JavaDoc...”并将 IDEA 指向该位置。您还可以使用“指定 JavaDoc URL...”将其指向在线 API - 只需为其提供 javadoc 生成的输出的根即可。选择确定并关闭所有其他对话框窗口。

返回编辑器，并突出显示第三方组件中的一个方法。如果您按 Ctrl+Q，您应该会看到一个带有完整参数描述的 javadoc 弹出窗口。

# sql-server-2005 - SQL Server 2005：具有唯一约束的 2 列表的自然排序顺序

> ID：377332
> 
> 赞同：2
> 
> 时间：2008-12-18T09:30:29.443
> 
> 标签：sql-server-2005, database-design

我的 SQL Express 2005 数据库中有这张表：

```
CREATE TABLE [dbo].[test_sort_order](
    [Col1] [int] IDENTITY(1,1) NOT NULL,
    [Col2] [nchar](50) COLLATE French_CI_AS NULL,
 CONSTRAINT [PK_test_sort_order] PRIMARY KEY CLUSTERED 
(
    [Col1] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY],
 CONSTRAINT [UQ_test_sort_order] UNIQUE NONCLUSTERED 
(
    [Col2] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] 
```

当对它运行一个平面 SQL 查询时（通常`SELECT * FROM test_sort_order`），我得到一个根据第二列（Col2）排序的结果集

我希望它（自然地）根据 PK 列排序（实际上是插入记录的顺序）事实上，如果你从 Col2 中删除唯一约束，这就是你得到的。

当您保留唯一约束并向该表添加第三列（任何类型）时，事情变得更加神秘，因为 SELECT * 的结果随后会根据自然顺序进行排序。

知道为什么会有这种行为吗？以及如何摆脱它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T09:44:23.313

SELECT 是一种面向集合的操作，由于集合是无序的，因此不能保证结果集中的特定顺序，除非您明确使用 ORDER BY。

# python - OOP 和 MVC 编程风格

> ID：377337
> 
> 赞同：1
> 
> 时间：2008-12-18T09:32:57.627
> 
> 标签：python, model-view-controller, oop, coding-style

我正在编写一些数据分析软件并决定使用这种方法：

epn:
model/data.py <- 模型定义
model/reader.py <- 如何将数据读入模型
view/gui.py <- 主 gui 框架 (wx)
view/dialogs.py <- 不同的对话框 (wx)
epn .py <- 控制器

对于 gui 和数据之间的通信，我使用了 wx.lib.pubsub。因此，当按下“调制指数”按钮时，epn.py 会捕获消息并发出命令：

```
self.view.control_panel.displayModulationIndex(self.data.getModulationIndex()) 
```

其中 self.data.getModulationIndex() 是：

```
def getModulationIndex(self):
  m = self.mean_flux
  f = self.fluxes
  # other things 
```

另一方面，我可以将其写为：

```
def getModulationIndex(self, m, f)
  # other things 
```

并将其称为：

```
m = self.data.mean_flux
f = self.data.fluxes
self.view.control_panel.displayModulationIndex(self.data.getModulationIndex(m, f)) 
```

从我的角度来看，第一个示例更好（更短、更封装、更防错）。但它更难测试——你不能只在一些模拟对象上调用该方法。

希望这个很清楚

问候
克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T11:26:33.543

示例 1：“更好（更短、更封装、更防错）”

并不真地。

*   示例 1 的函数调用不比示例 2 短；您必须在调用函数之前设置实例变量，而不是将值作为参数传递。这是相同的代码。

*   示例 1 函数调用不再封装。封装是*整个*类的属性，而不是单个方法。方法只是方法，它们通常有参数，因此它们清晰、明显、可替换且易于测试。

*   示例 1 的函数调用在任何意义上都不是防错的。您很可能会忘记设置实例变量，就像忘记在函数调用中传递实例变量一样。

    当您有显式参数时（示例 2），Python 可以检查您是否提供了正确数量的参数。在示例 1 中，没有为您完成检查。

示例 1：“更难测试”

同意。

**概括**

实例变量是特殊的。它们反映了某个对象的存在状态。对于模型对象，它们是严肃的事情，因为它们通常是持久的。对于 GUI 对象，它们是“现在正在显示的内容”，这通常是短暂的。

不要过度使用实例变量。实例变量应该是有意义和重要的。不仅仅是那些在其他任何地方都没有合适的家的东西的垃圾变量。

方法函数只是函数。在 OO 世界中，它们仍然只是函数。它们将输入参数映射到输出结果（或对象状态更改）。传递所有有意义的论点。

# sql - SELECT WHERE ...数百个条件

> ID：377354
> 
> 赞同：3
> 
> 时间：2008-12-18T09:38:07.943
> 
> 标签：sql, where

有没有一种优雅的方法来做到这一点：

```
SELECT Cols from MyTable WHERE 
zip = 90210 OR
zip = 23310 OR
zip = 74245 OR
zip = 77427 OR
zip = 18817 OR
zip = 94566 OR
zip = 34533 OR
zip = 96322 OR
zip = 34566 OR
zip = 52214 OR
zip = 73455 OR
zip = 52675 OR
zip = 54724 OR
zip = 98566 OR
zip = 92344 OR
zip = 90432 OR
zip = 91532 OR
... 
```

（这篇文章中的邮政编码是虚构的，与实际生活或死亡的邮政编码没有任何相似之处）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-18T09:39:31.827

是的：试试这个 sql 查询。

```
Select cols from MyTable where zip in (90210, 23310, ... etc.) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-18T09:43:53.800

取决于“优雅”的定义:)

但是，有这么多邮政编码，我认为您可能也想在数据库中管理它们。

您如何决定要匹配哪些邮政编码？

因此，您可以将邮政编码放在自己的表格中并执行

```
SELECT cols FROM MyTable, ZipTable WHERE MyTable.zip = ZipTable.zip 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-18T09:47:26.350

或两者的组合，嵌套查询：

```
SELECT cols FROM MyTable WHERE zip IN 
    (SELECT zip FROM ZipTable WHERE condition=true) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-18T11:26:11.067

我会使用类似的东西：

*   `start transaction;`
*   `create temporary table if not exists ZIPS(ZIP integer) storage=memory;`
*   `insert into ZIPS (ZIP) VALUES(...)`
*   `select COLS from MYTABLE M, ZIPS Z where Z.ZIP = M.ZIP`
*   `drop table ZIPS` （或截断它或做任何你想做的事）
*   要么`commit`_`rollback`

在每个 db API 中，您应该有一些*executemany*函数的变体，它可以调用`insert into TABLE(COLUMNS) VALUES`多个值行并且比重复单个插入更快。您可以将这样的调用序列包装在某个函数中，以便于重用，因为带有一个 INT 列的临时表通常很方便:-)

通过这种方式，您可以避免最大 SQL 查询长度问题（例如 MySQL），并且您的查询有效、干净且易于维护或进一步扩展。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-23T21:24:24.503

有了这么多项目，您真的应该创建一个查找表，特别是如果您需要在其他代码部分中定期搜索它们。这将封装您的代码，如果它用于多个功能和更好的阅读美学，则可以更轻松地进行编辑。

示例： --create table Lookups 并在这种情况下使用您的邮政编码集填充列 Values

```
SELECT Cols 
FROM MyTable  
WHERE EXISTS (Select * FROM Lookups WHERE MyTable.zip = Lookups.values) 
```

使用加入

```
SELECT DISTINCT Cols
FROM MyTable JOIN
     Lookups ON MyTable.zip = Lookups.values 
```

# java - 数字 2^1000 的位数之和

> ID：377361
> 
> 赞同：-8
> 
> 时间：2008-12-18T09:41:49.200
> 
> 标签：java, algorithm

2^15 = 32768，其数字之和为 3 + 2 + 7 + 6 + 8 = 26。

1000 (2^1000) 的 2 次方的位数和是多少？

任何人都可以在java中提供这个问题的解决方案或算法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-18T11:07:39.107

这是我的解决方案：

```
public static void main(String[] args) {

    ArrayList<Integer> n = myPow(2, 100);

    int result = 0;
    for (Integer i : n) {
        result += i;
    }

    System.out.println(result);
}

public static ArrayList<Integer> myPow(int n, int p) {
    ArrayList<Integer> nl = new ArrayList<Integer>();
    for (char c : Integer.toString(n).toCharArray()) {
        nl.add(c - 48);
    }

    for (int i = 1; i < p; i++) {
        nl = mySum(nl, nl);
    }

    return nl;
}

public static ArrayList<Integer> mySum(ArrayList<Integer> n1, ArrayList<Integer> n2) {
    ArrayList<Integer> result = new ArrayList<Integer>();

    int carry = 0;

    int max = Math.max(n1.size(), n2.size());
    if (n1.size() != max)
        n1 = normalizeList(n1, max);
    if (n2.size() != max)
        n2 = normalizeList(n2, max);

    for (int i = max - 1; i >= 0; i--) {
        int n = n1.get(i) + n2.get(i) + carry;
        carry = 0;
        if (n > 9) {
            String s = Integer.toString(n);
            carry = s.charAt(0) - 48;
            result.add(0, s.charAt(s.length() - 1) - 48);
        } else
            result.add(0, n);
    }

    if (carry != 0)
        result.add(0, carry);

    return result;
}

public static ArrayList<Integer> normalizeList(ArrayList<Integer> l, int max) {
    int newSize = max - l.size();
    for (int i = 0; i < newSize; i++) {
        l.add(0, 0);
    }
    return l;
} 
```

这段代码可以在很多方面进行改进......这只是为了证明你可以在没有 BigInts 的情况下完美地做到这一点。

关键是将每个数字转换为一个列表。这样你就可以做基本的总结，比如：

```
123456
+   45
______
123501 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-22T06:54:14.720

```
int result = 0;

String val = BigInteger.valueOf(2).pow(1000).toString();

for(char a : val.toCharArray()){
    result = result + Character.getNumericValue(a);
}
System.out.println("val ==>" + result); 
```

如果你知道如何使用 biginteger，那就很简单了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-18T09:48:31.870

我不会提供代码，但`java.math.BigInteger`应该让它变得微不足道。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-03T14:04:17.460

这个问题不仅仅是问你如何找到最近的大整数库，所以我会避免这种解决方案。[这个页面很好地概述](http://blog.functionalfun.net/2008/07/project-euler-problem-16-calculating.html)了这个特定的问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-25T07:54:26.863

创建一个长度为 302 的向量，即 2^1000 的长度。然后，将 2 保存在索引 0 处，然后加倍 1000 次。只需单独查看每个索引，如果前一个索引超过 10，则将 1 添加到下一个索引。然后总结一下！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T09:55:38.207

类似的东西可以用力做到这一点： - 虽然有一个很好的使用数学的分析解决方案（想想笔和纸） - 这也可能适用于大于 1000 的数字。

```
 final String bignumber = BigInteger.valueOf(2).pow(1000).toString(10);
    long result = 0;
    for (int i = 0; i < bignumber.length(); i++) {
        result += Integer.valueOf(String.valueOf(bignumber.charAt(i)));
    }
    System.out.println("result: " + result); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-18T09:59:29.553

2^1000如何交替表示？

我对数学时代的记忆并不多，但也许像 (2^(2^500)) 之类的东西？那怎么表达呢？

找到一种简单的方法来计算 2^1000，将结果放入 BigInteger，剩下的可能很简单。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-10-19T06:38:48.523

这是我的代码...请提供运行此代码所需的参数。

导入 java.math.BigInteger；

```
public class Question1 {
    private static int SumOfDigits(BigInteger inputDigit) {
        int sum = 0;
        while(inputDigit.bitLength() > 0) {
            sum += inputDigit.remainder(new BigInteger("10")).intValue();
            inputDigit = inputDigit.divide(new BigInteger("10"));       
        }                       
        return sum;
    }

    public static void main(String[] args) {
        BigInteger baseNumber = new BigInteger(args[0]);
        int powerNumber = Integer.parseInt(args[1]);
        BigInteger powerResult = baseNumber.pow(powerNumber);
        System.out.println(baseNumber + "^" + powerNumber + " = " + powerResult);
        System.out.println("Sum of Digits = " + Question1.SumOfDigits(powerResult));
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T09:55:32.900

2^1000 是一个非常大的值，您必须使用 BigIntegers。该算法将类似于：

```
import java.math.BigInteger;
BigInteger two = new BigInteger("2");
BigInteger value = two.pow(1000);
int sum = 0;
while (value > 0) {
  sum += value.remainder(new BigInteger("10"));
  value = value.divide(new BigInteger("10"));
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T11:32:57.993

或者，您可以抓住一个 double 并[操纵它的 bits](http://en.wikipedia.org/wiki/IEEE_754-1985)。使用 2 次方的数字，您将不会出现截断错误。然后，您可以将其转换为字符串。

话虽如此，它仍然是一种蛮力方法。必须有一种很好的数学方法可以在不实际生成数字的情况下生成它。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2010-03-10T13:59:36.173

```
In[1162] := Plus @@ IntegerDigits[2^1000]
Out[1162] = 1366 
```

# python - 代码不等待类初始化！

> ID：377362
> 
> 赞同：1
> 
> 时间：2008-12-18T09:41:52.897
> 
> 标签：python

我有一段代码基本上初始化了几个类，但它们是按顺序放置的，因为后面的引用了早期的。

由于某种原因，最后一个在第一个之前初始化......在我看来，有某种线程正在进行。我需要知道的是如何阻止它这样做？

有没有办法让类初始化做一些类似于发送返回值的事情？

或者，也许我可以在某种 if 语句中使用该类来检查该类是否已经被初始化？

我对 Python 有点陌生，并且正在从 C 迁移，所以我仍然习惯于命名约定等小差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T09:47:51.560

Python 到 3.0 有一个全局锁，所以一切都在一个线程中按顺序运行。

我的猜测是某些副作用会从与您预期不同的地方初始化最后一个类。在最后一个类中抛出一个异常`__init__`以查看它被调用的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T10:03:17.487

空格与制表符问题......呃。>.>

好吧，至少它现在有效。我承认我有点想念 C 中的大括号而不是强制缩进。不过，它作为原型语言非常方便。也许当我更好地掌握它时，我会变得更喜欢它。

# .net - Castle Windsor with .net 3.5 framework

> ID：377371
> 
> 赞同：2
> 
> 时间：2008-12-18T09:45:14.437
> 
> 标签：.net, .net-3.5, castle-windsor

How can I use Windsor in my .net 3.5 solution? Can I use the binaries built for .net 2.0? Do I need to compile the Castle Windsor source myself, targeting 3.5?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T10:12:52.960

You can use the .net 2.0 binaries in your 3.5 solution without any problem. They are both built for the same version of the CLR. There is no need to recompile the source code targeting 3.5

There's a nice [picture](http://www.flickr.com/photos/75251211@N00/313250406/) outlining different versions of the framework with the corresponding CLR version.

# sql - SQL 数据库设计初学者指南

> ID：377375
> 
> 赞同：126
> 
> 时间：2008-12-18T09:47:05.103
> 
> 标签：sql, database, database-design, scalability

您知道学习如何设计 SQL 解决方案的好资源吗？

除了基本的语言语法之外，我还在寻找可以帮助我理解的东西：

1.  要构建哪些表以及如何链接它们
2.  如何针对不同规模进行设计（小客户端APP到庞大的分布式网站）
3.  如何编写有效/高效/优雅的 SQL 查询

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2008-12-18T10:54:41.940

我从这本书开始：[清晰地解释了关系数据库设计（数据管理系统中的摩根考夫曼系列）（平装本）](http://www.amazon.co.uk/Relational-Database-Explained-Kaufmann-Management/dp/1558608206/ref=sr_1_3?ie=UTF8&s=books&qid=1229597641&sr=8-3)，作者 Jan L. Harrington，发现它非常清晰且很有帮助

当你加快速度时，这个也很好[数据库系统：设计、实施和管理的实用方法（国际计算机科学系列）](http://www.amazon.co.uk/Database-Systems-Implementation-Management-International/dp/0321210255/ref=cm_lmf_tit_5_rsrrsi0)（平装本）

我认为 SQL 和数据库设计是**不同**（但互补）的技能。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-04T17:09:13.620

我从这篇文章开始

[http://en.tekstenuitleg.net/articles/software/database-design-tutorial/intro.html](http://en.tekstenuitleg.net/articles/software/database-design-tutorial/intro.html)

与阅读整本书相比，它非常简洁，并且很好地解释了数据库设计的基础知识（规范化、关系类型）。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2008-12-18T11:49:33.030

经验很重要，但在表设计方面，您可以从 Hibernate 和 Grails 等 ORM 的运行方式中学到很多东西，以了解它们为什么这样做。此外：

1.  将不同类型的数据分开 - 不要将地址存储在您的订单表中，例如，链接到单独的地址表中的地址。

2.  我个人喜欢在作为主键的每个表（保存数据，而不是将不同表链接在一起的那些，例如 m:n 关系）上有一个整数或长代理键。

3.  我也喜欢创建和修改时间戳列。

4.  确保您在任何查询中执行“where column = val”的每一列都有索引。对于数据类型来说，也许不是世界上最完美的索引，但至少是一个索引。

5.  设置你的外键。还可以在相关的地方设置 ON DELETE 和 ON MODIFY 规则，以级联或设置 null，具体取决于您的对象结构（因此您只需在对象树的“头部”删除一次，所有该对象的子对象都会得到自动删除）。

6.  如果你想模块化你的代码，你可能想模块化你的数据库模式——例如，这是“客户”区域，这是“订单”区域，这是“产品”区域，并使用连接/链接表它们之间，即使它们是 1:n 关系，并且可能会复制重要信息（即，将产品名称、代码、价格复制到您的 order_details 表中）。阅读规范化。

7.  其他人会为上述部分或全部推荐完全相反的方法：p - 从来没有一种真正的方式来做一些事情，嗯！

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-05-08T17:43:00.673

我真的很喜欢这篇文章.. [http://www.codeproject.com/Articles/359654/important-database-designing-rules-which-I-fo](http://www.codeproject.com/Articles/359654/important-database-designing-rules-which-I-fo)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-18T12:46:48.280

[Head First SQL](https://rads.stackoverflow.com/amzn/click/com/0596526849)是一个很好的介绍。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-18T10:57:49.967

在我看来，这些问题需要来自不同领域的不同知识。

1.  您只是无法提前知道要构建“哪些”表，您必须知道要解决的问题并相应地设计架构；
2.  这是数据库设计决策和您的数据库供应商自定义功能的混合（即您应该检查您的 (r)dbms 的文档并最终学习一些扩展的“提示和技巧”），您的 dbms 的配置对于扩展（复制、数据分区等）；
3.  同样，几乎每个 rdbms 都带有 SQL 语言的特定“方言”，因此如果您想要高效的查询，您必须学习该特定方言 --btw。很可能编写优雅的查询也很有效是一件大事：优雅和效率经常是相互冲突的目标——

也就是说，也许你想读一些书，我个人在我的数据库大学课程中使用过[这本书](http://www.webml.org/dbbook/ "这本书")（找到了一本不错的书，但我没有读过这个领域的其他书，所以我的建议是查看一些数据库设计方面的好书）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-18T11:46:20.820

我已经有一段时间没有阅读它了（所以，我不确定其中有多少仍然相关），但我记得 Joe Celko 的 Smarties 的 SQL 这本书提供了很多关于编写优雅、有效和高效查询的信息.

# xml - 如何在指定计数后打破 xsl 中的表格行？

> ID：377377
> 
> 赞同：3
> 
> 时间：2008-12-18T09:47:20.063
> 
> 标签：xml, xslt, grouping

我有以下 xsl 按字母顺序对我的 xml 进行排序：

```
<xsl:template match="/">
  <xsl:apply-templates />
</xsl:template> 

<xsl:key name="rows-by-title" match="Row" use="translate(substring(@Title,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
<xsl:variable name="StartRow" select="string('&lt;tr &gt;')" />

<xsl:template name="Meunchian" match="/dsQueryResponse/Rows">
  <table>
    <tr>
      <xsl:for-each select="Row[count(. | key('rows-by-title', translate(substring(@Title,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'))[1]) = 1]">
        <xsl:sort select="translate(substring(@Title,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
        <!-- Puts out the title -->
        <td>
          <xsl:value-of select="translate(substring(@Title,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
        </td>
        <!-- Now all it's children -->
        <xsl:for-each select="key('rows-by-title', translate(substring(@Title,1,1),'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ'))">
          <xsl:value-of select="@Title" /><br/>
        </xsl:for-each>
      </xsl:for-each>
   </tr>
  </table>
</xsl:template> 
```

XML:

```
<dsQueryResponse>
  <Rows>
    <Row Title="Agenda" />
    <Row Title="Policy" />
    <Row Title="Policy" />
    <Row Title="Report" />
    <Row Title="Report" />
  </Rows>
</dsQueryResponse> 
```

我现在想打破每 4 列输出的表格行，以便输出看起来像：

```
ABCD
EFGH
IJKL
MNOP
QRST
UVWX
YZ 
```

谁能建议实现这一目标的最佳方法？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T11:44:16.343

这是我的解决方案。

您可以通过参数决定是要显示空单元格`"per-row"`还是`"show-empty"`要隐藏它们。我确信存在一个更优雅的版本，但我想不出一个。;-) 欢迎评论。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" version="4.0" encoding="iso-8859-1" indent="yes"/>

  <xsl:key name="rows-by-title" match="Row" use="translate(substring(@Title, 1, 1), 'abcdefghijklmnopqrstuvwxyz', 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
  <xsl:variable name="alphabet" select="string('ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
  <xsl:variable name="per-row" select="number(4)" /> 
  <xsl:variable name="show-empty" select="false()" />

  <xsl:template match="/">
    <xsl:apply-templates select="dsQueryResponse/Rows" />
  </xsl:template> 

  <xsl:template match="Rows">
    <table>
      <xsl:call-template name="create-rows" />
    </table>
  </xsl:template>

  <xsl:template name="create-rows">
    <xsl:param name="index" select="1" />

    <xsl:variable name="letters">
      <xsl:call-template name="next-letters">
        <xsl:with-param name="index" select="$index" />
      </xsl:call-template>
    </xsl:variable>

    <xsl:if test="$letters != ''">
      <tr title="{$letters}">
        <xsl:call-template name="create-cells">
          <xsl:with-param name="letters" select="$letters" />
        </xsl:call-template>
      </tr>
    </xsl:if>

    <xsl:if test="string-length($letters) = $per-row">
      <xsl:call-template name="create-rows">
        <xsl:with-param name="index" select="string-length(substring-before($alphabet, substring($letters, string-length($letters), 1))) + 2" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <xsl:template name="next-letters">
    <xsl:param name="index" />

    <xsl:variable name="letter" select="substring($alphabet, $index, 1)" />

    <xsl:variable name="letters">
      <xsl:if test="$index &lt;= string-length($alphabet)">
        <xsl:if test="$show-empty or key('rows-by-title', $letter)">
          <xsl:value-of select="$letter" />
        </xsl:if>

        <xsl:call-template name="next-letters">
          <xsl:with-param name="index" select="$index + 1" />
        </xsl:call-template>
      </xsl:if>
    </xsl:variable>

    <xsl:value-of select="substring($letters, 1, $per-row)" />
  </xsl:template>

  <xsl:template name="create-cells">
    <xsl:param name="letters" />

    <xsl:variable name="letter" select="substring($letters, 1, 1)" />

    <xsl:if test="$letter != ''">
      <td title="{$letter}">
        <strong>
          <xsl:value-of select="$letter" />
        </strong>
        <xsl:apply-templates select="key('rows-by-title', $letter)">
          <xsl:sort select="@Title" />
        </xsl:apply-templates>
      </td>
      <xsl:call-template name="create-cells">
        <xsl:with-param name="letters" select="substring($letters, 2, string-length($letters) - 1)" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>

  <xsl:template match="Row">
    <br />
    <xsl:value-of select="@Title" />
  </xsl:template>

</xsl:stylesheet> 
```

使用此输入：

```
<dsQueryResponse>
  <Rows>
    <Row Title="Agenda" />
    <Row Title="Policy" />
    <Row Title="Policy" />
    <Row Title="Report" />
    <Row Title="Report" />
    <Row Title="Test2" />
    <Row Title="Test1" />
    <Row Title="Boo" />
    <Row Title="Foo" />
  </Rows>
</dsQueryResponse> 
```

生成此输出（`title`属性仅用于调试。我将它们留在里面，随时删除它们）：

```
<table>
  <tr title="ABFP">
    <td title="A">
      <strong>A</strong>
      <br>Agenda
    </td>
    <td title="B">
      <strong>B</strong>
      <br>Boo
    </td>
    <td title="F">
      <strong>F</strong>
      <br>Foo
    </td>
    <td title="P">
      <strong>P</strong>
      <br>Policy
      <br>Policy
    </td>
  </tr>
  <tr title="RT">
    <td title="R">
      <strong>R</strong>
      <br>Report
      <br>Report
    </td>
    <td title="T">
      <strong>T</strong>
      <br>Test1
      <br>Test2
    </td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T16:19:01.953

**必须编辑此问题，以便任何人了解问题的真正含义**。Tomalak 的评论表明，OP“*想要按字母顺序排列的网格中的项目列表。每个字母一个列表。水平四个字母，与垂直方向一样多*”

**以下转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common"
 extension-element-prefixes="ext"
 >

 <xsl:variable name="vDoc" select="/"/>
 <xsl:variable name="vNumCols" select="4"/>

 <xsl:variable name="vLower"
  select="'abcdefghijklmnopqrstuvwxyz'"
  />

 <xsl:variable name="vUpper"
  select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"
  />

  <xsl:key name="rows-by-FirstLetter" match="Row"
  use="translate(substring(@Title,1,1),
                 'abcdefghijklmnopqrstuvwxyz',
                 'ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />

  <xsl:variable name="vrtfStartLetters">
    <xsl:for-each select=
    "/*/*/Row
           [count(.
               |
                key('rows-by-FirstLetter',
                   translate(substring(@Title,1,1),
                             $vLower,
                             $vUpper)
                  )[1]
                  )
              = 1
           ]">

         <startLetter>
           <xsl:value-of select=
             "translate(substring(@Title,1,1),
                      $vLower,
                      $vUpper)"/>
         </startLetter>
      </xsl:for-each>
    </xsl:variable>

    <xsl:variable name="vStartLetters" select=
      "ext:node-set($vrtfStartLetters)"/>

  <xsl:template match="Rows">
    <table>
      <xsl:apply-templates select=
       "$vStartLetters/*[position() mod $vNumCols = 1]">
        <xsl:with-param name="pDoc" select="$vDoc"/>
        <xsl:with-param name="pNumCols" select="$vNumCols"/>
      </xsl:apply-templates>
    </table>
  </xsl:template>

  <xsl:template match="startLetter">
    <xsl:param name="pDoc"/>
    <xsl:param name="pNumCols" select="10"/>
    <tr>
      <xsl:apply-templates mode="copy" select=
      ". | following-sibling::*
               [not(position() >= $pNumCols)]">
         <xsl:with-param name="pDoc" select="$pDoc"/>
         <xsl:sort/>

      </xsl:apply-templates>
    </tr>
  </xsl:template>

  <xsl:template match="startLetter" mode="copy">
    <xsl:param name="pDoc"/>

    <xsl:variable name="pThis" select="."/>

    <td>
      <xsl:value-of select="."/>
      <br />
      <table>
     <xsl:for-each select="$pDoc">
      <xsl:for-each select="key('rows-by-FirstLetter', $pThis)">
        <tr><td><xsl:value-of select="@Title"/></td></tr>
      </xsl:for-each>
     </xsl:for-each>
    </table>
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<dsQueryResponse>
  <Rows>
    <Row Title="Agenda" />
    <Row Title="Accrual" />
    <Row Title="Ads" />
    <Row Title="Averages" />
    <Row Title="Bindings" />
    <Row Title="Budget" />
    <Row Title="Cars" />
    <Row Title="Categories" />
    <Row Title="Costs" />
    <Row Title="Policy" />
    <Row Title="Politics" />
    <Row Title="Reevaluations" />
    <Row Title="Report" />
  </Rows>
</dsQueryResponse> 
```

**产生想要的结果**：

```
<table>
  <tr>
    <td>A
      <br/>
      <table>
        <tr>
          <td>Agenda</td>
        </tr>
        <tr>
          <td>Accrual</td>
        </tr>
        <tr>
          <td>Ads</td>
        </tr>
        <tr>
          <td>Averages</td>
        </tr>
      </table>
    </td>
    <td>B
      <br/>
      <table>
        <tr>
          <td>Bindings</td>
        </tr>
        <tr>
          <td>Budget</td>
        </tr>
      </table>
    </td>
    <td>C
      <br/>
      <table>
        <tr>
          <td>Cars</td>
        </tr>
        <tr>
          <td>Categories</td>
        </tr>
        <tr>
          <td>Costs</td>
        </tr>
      </table>
    </td>
    <td>P
      <br/>
      <table>
        <tr>
          <td>Policy</td>
        </tr>
        <tr>
          <td>Politics</td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td>R
      <br/>
      <table>
        <tr>
          <td>Reevaluations</td>
        </tr>
        <tr>
          <td>Report</td>
        </tr>
      </table>
    </td>
  </tr>
</table> 
```

**请注意三件事**：

*   我们正在使用 ( [**exslt**](http://exslt.org) ) [**ext:node-set()**](http://exslt.org/exsl/functions/node-set/index.html)扩展函数将中间结果从 RTF（结果树片段）转换为临时树。

*   必须将`<xsl:for-each select="$pDoc">`原始 XML 文档再次变为当前 XML 文档，以便 key() 函数将使用为该文档而不是临时树创建的索引。

*   每个必须开始新行 (4) 个起始字母的起始字母都在一个特殊的模板中进行处理，在该模板中`<tr>`生成 。然后在“复制”模式的主体内处理该行和剩余的 (3) 个起始字母`<tr>`，只创建一个`<td>`each。

**在这里，我们介绍并演示了一些高级 XSLT 技术**：

*   使用[**`mod`**](http://www.w3.org/TR/xpath#numbers)运算符按数量分组。
*   对与当前文档不同的文档使用[**key()函数。**](http://www.w3.org/TR/xslt#function-key)
*   [**模式**](http://www.w3.org/TR/xslt#modes)
*   将[**RTF**](http://www.w3.org/TR/xslt#section-Result-Tree-Fragments)转换为临时树

**享受**:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T03:10:14.180

**这是第二种解决方案，它不需要任何扩展功能**。请注意，**它不是递归的**，并且可能比递归更有效。

**这种转变**：

```
<xsl:stylesheet 版本="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:namespace"
 排除结果前缀=“我的”
 >
 <xsl:输出方法="html"/>

  <我的：阿尔法>
    <l>A</l><l>B</l><l>C</l><l>D</l><l>E</l>
    <l>F</l><l>G</l><l>H</l><l>I</l><l>J</l>
    <l>K</l><l>L</l><l>M</l><l>N</l><l>O</l>
    <l>P</l><l>Q</l><l>R</l><l>S</l><l>T</l>
    <l>U</l><l>V</l><l>W</l><l>X</l><l>Y</l>
    <l>Z</l>
  </my:alpha>
    <xsl:variable name="vDoc" select="/"/>
    <xsl:variable name="vNumCols" select="4"/>
    <xsl:变量名="vLower" select="'abcdefghijklmnopqrstuvwxyz'" />
    <xsl:variable name="vUpper" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'" />

    <xsl:key name="rows-by-FirstLetter" match="Row"
      使用="翻译(子字符串(@Title,1,1),
                     'abcdefghijklmnopqrstuvwxyz',
                     'ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />

  <xsl:variable name="vStartingLetters">
    <xsl:for-每个选择=
        “/*/*/排
           [生成-id()
           =
            生成-id(key('rows-by-FirstLetter',
                             翻译（子字符串（@Title,1,1），
                                                 $v下，
                                                 $vUpper)
                             )[1]
                         )
            ]">
      <xsl:value-of 选择=
         “翻译（子字符串（@Title,1,1），
                    $v下，
                    $vUpper)"/>
    </xsl:for-each>
  </xsl:变量>

  <xsl:variable name="vMyLetters" 选择=
   “文档（''）/*/my:alpha/l[包含（$vStartingLetters,.）]”
   />

    <xsl:template match="行">
        <表格>
          <xsl:for-每个选择=
            "$vMyLetters[position() mod $vNumCols = 1]">
            <xsl:变量名="vPos"
               select="(position()-1)*$vNumCols+1"/>

              <tr>
                 <xsl:应用模板选择=
                  "$vMyLetters[位置() >= $vPos
                              和
                               不是（位置（）> $vPos+$vNumCols -1）
                              ]">
            <xsl:with-param name="pDoc" select="$vDoc"/>
                 </xsl:apply-templates>
              </tr>
             </xsl:for-each>
        </table>
    </xsl:模板>

    <xsl:template match="l">
        <xsl:param name="pDoc"/>

        <xsl:variable name="pThis" select="."/>

        <td>
            <xsl:value-of select="."/>
            <br />
            <表格>
                <xsl:for-each select="$pDoc">
                    <xsl:for-每个选择=
                            "key('rows-by-FirstLetter', $pThis)">
                <tr>
                  <td>

                    <xsl:value-of select="@Title"/>
                  </td>
                </tr>
                    </xsl:for-each>
                </xsl:for-each>
            </table>
        </td>
    </xsl:模板>
</xsl:样式表>

```

应用于以下 XML 文档时：

```
<dsQueryResponse>
    <行>
        <Row Title="议程" />
        <Row Title="策略" />
        <Row Title="策略" />
        <行标题="报告" />
        <行标题="报告" />
        <Row Title="Test2" />
        <Row Title="Test1" />
        <Row Title="嘘" />
        <Row Title="Foo" />
    </行>
</dsQueryResponse>

```

产生想要的结果：

```
<表格>
   <tr>
      <td>A<br><表>
            <tr>
               <td>议程</td>
            </tr>
         </table>
      </td>
      <td>B<br><表>
            <tr>
               <td>嘘</td>
            </tr>
         </table>
      </td>
      <td>F<br><表>
            <tr>
               <td>美食</td>
            </tr>
         </table>
      </td>
      <td>P<br><表>
            <tr>
               <td>政策</td>
            </tr>
            <tr>
               <td>政策</td>
            </tr>
         </table>
      </td>
   </tr>
   <tr>
      <td>R<br><表格>
            <tr>
               <td>报告</td>
            </tr>
            <tr>
               <td>报告</td>
            </tr>
         </table>
      </td>
      <td>T<br><表>
            <tr>
               <td>测试2</td>
            </tr>
            <tr>
               <td>测试1</td>
            </tr>
         </table>
      </td>
   </tr>
</table>

```

**请注意**，我的第一个答案中的大多数解释也适用于此解决方案，唯一的例外是我们不使用模式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-18T09:54:38.317

我对这个问题有点困惑，但我认为你正在寻找的是一个 xsl:if 测试与[position()](http://www.zvon.org/xxl/XSLTreference/Output/function_position.html)和[mod的组合](http://www.zvon.org/xxl/XSL-Ref/Tutorials/Arithmetics/ar6.html)

# asp.net - ASP.NET RadioButton 与名称（组名）混淆

> ID：377393
> 
> 赞同：36
> 
> 时间：2008-12-18T09:50:21.210
> 
> 标签：asp.net, radio-button

我有一个模板化控件（一个中继器），列出了一些文本和其他标记。每个项目都有一个与之关联的单选按钮，使用户可以选择由转发器创建的项目之一。

转发器写入单选按钮，设置其 id 和生成的名称，使用默认的 ASP.NET 命名约定，使每个单选按钮成为一个完整的“组”。这意味着所有单选按钮都是相互独立的，不幸的是，这再次意味着我可以同时选择所有单选按钮。单选按钮具有用于设置通用名称的巧妙属性“组名”，因此它们被组合在一起，因此应该相互依赖（所以我一次只能选择一个）。问题是 - 这不起作用 - 转发器确保 id 和名称（控制分组）是不同的。

由于我使用中继器（可能是列表视图或任何其他模板化数据绑定控件），因此我无法使用 RadioButtonList。那么，这让我何去何从？

我知道我以前遇到过这个问题并解决了它。我知道几乎每个 ASP.NET 程序员都必须拥有它，那么为什么我不能 google 并找到解决问题的可靠方法呢？我遇到了通过 JavaScript 强制分组的解决方案（丑陋！），甚至将单选按钮作为非服务器控件处理，迫使我做一个`Request.Form[name]`来读取状态。我还尝试尝试覆盖`PreRender`事件上的名称属性 - 不幸的是，拥有页面和母版页再次覆盖此名称以反映完整的 ID/名称，所以我最终得到了相同的错误结果。

如果您没有比我发布的更好的解决方案，仍然非常欢迎您发表您的想法 - 至少我会知道我的朋友“杰克”是正确的，关于 ASP.NET 有时是多么混乱；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-01T20:13:03.080

**ASP.NET 提示：在中继器中使用 RadioButton 控件**

这是 JavaScript 函数的代码：

```
function SetUniqueRadioButton(nameregex, current)
{
   re = new RegExp(nameregex);
   for(i = 0; i < document.forms[0].elements.length; i++)
   {
      elm = document.forms[0].elements[i]
      if (elm.type == 'radio')
      {
         if (re.test(elm.name))
         {
            elm.checked = false;
         }
      }
   }
   current.checked = true;
} 
```

代码通过ItemDataBound 事件链接到Repeater。要使其正常工作，您需要知道Repeater 控件的名称，以及您分配给RadioButtons 的GroupName。在这种情况下，我使用 rptPortfolios 作为中继器的名称，并使用 Portfolios 作为组名：

```
protected void rptPortfolios_ItemDataBound(object sender,
                                           RepeaterItemEventArgs e)
{
   if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType
      != ListItemType.AlternatingItem)
      return;

   RadioButton rdo = (RadioButton)e.Item.FindControl("rdoSelected");
   string script =
      "SetUniqueRadioButton('rptPortfolios.*Portfolios',this)";
   rdo.Attributes.Add("onclick", script);

} 
```

参考： http: [//www.codeguru.com/csharp/csharp/cs_controls/custom/article.php/c12371/](http://www.codeguru.com/csharp/csharp/cs_controls/custom/article.php/c12371/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-18T10:20:31.977

Google-fu：[asp.net 单选按钮中继器问题](http://www.google.se/search?q=asp.net+radiobutton+repeater+problem&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)

确实是 id 修改的不幸后果。我的想法是创建一个 - 或从众多可用的 - 自定义控件中选择一个，以在客户端上添加对同名的支持。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-11-01T23:37:41.167

Vladimir Smirnov 已经创建了一个很好的自定义控件来解决这个问题。我们一直在我们的项目中使用[GroupRadioButton](http://www.codeproject.com/KB/webforms/How_group_RButtons.aspx)，它与在中继器内部创建的单选按钮以及在中继器外部创建的其他单选按钮都属于同一组的一部分。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-08-29T10:59:58.400

我使用 jQuery 脚本：

```
<script type="text/javascript">
    function norm_radio_name() {
        $("[type=radio]").each(function (i) {
            var name = $(this).attr("name");
            var splitted = name.split("$");
            $(this).attr("name", splitted[splitted.length - 1]);
        });
    };

    $(document).ready(function () {
        norm_radio_name();
    });

    // for UpdatePannel
    var prm = Sys.WebForms.PageRequestManager.getInstance();

    prm.add_endRequest(function () {
        norm_radio_name();
    });
</script> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-05-04T12:50:47.550

我知道这是一篇旧文章，但这是我最终使用列表视图所做的。我的列表视图绑定在 VB 代码隐藏中，所以我不确定这是否适用于中继器，但我想它可能是相似的。

我所做的是使用取消选择任何其他单选按钮的功能来处理单选按钮的 OnCheckChanged 事件。然后，当我离开页面时，我寻找了选定的单选按钮。

该解决方案避免了 JavaScript 和 jQuery，并且完全忽略了 GroupName 问题。这并不理想，但它的功能与（我）预期的一样。我希望它对其他人有帮助。

标记：

```
<asp:ListView ID="lvw" runat="server">
  <LayoutTemplate>`
    <table>
      <th>Radio</th>
      <tr id="itemPlaceholder"></tr>
    </table>
  </LayoutTemplate>
  <ItemTemplate>
    <tr>
      <td><asp:RadioButton ID="rdbSelect" runat="server" AutoPostBack="true"
           OnCheckedChanged="rdbSelect_Changed"/></td>
    </tr>
  </ItemTemplate>
</asp:ListView> 
```

代码：

```
Protected Sub rdbSelect_Changed(ByVal sender As Object, ByVal e As System.EventArgs)

  Dim rb1 As RadioButton = CType(sender, RadioButton)

  For Each row As ListViewItem In lvw.Items
    Dim rb As RadioButton = row.FindControl("rdbSelect")
      If rb IsNot Nothing AndAlso rb.Checked Then
         rb.Checked = False
      End If
  Next
  rb1.Checked = True
End Sub 
```

然后当点击提交按钮时：

```
Protected Sub btnSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs)  Handles btnSubmit.Click

  For Each row As ListViewItem In lvw.Items
    Dim rb As RadioButton = row.FindControl("rdbSelect")
        Dim lbl As Label
        If rb IsNot Nothing AndAlso rb.Checked = True Then
            lbl = row.FindControl("StudentID")
            Session("StudentID") = lbl.Text
        End If
    Next

    Response.Redirect("~/TransferStudent.aspx")
End Sub 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-05-10T23:42:39.010

这个可能会好一点。。

我有一个用户控件，它本质上是中继器内的一组单选按钮，用户控件的每个实例都有一个名为 FilterTitle 的公共属性，每个实例都是唯一的。

将这两个属性添加到您的单选按钮中，将 FilterTitle 替换为您自己的公共属性名称

```
onclick='<%# "$(\"input[name$=btngroup_" + FilterTitle + "]\").removeAttr(\"checked\"); $(this).attr(\"checked\",\"checked\");" %>' GroupName='<%# "btngroup_" + FilterTitle  %>' 
```

更简单..

```
onclick="$('input[name$=btngroup1]').removeAttr('checked'); $(this).attr('checked','checked');" GroupName="btngroup1" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-12-07T08:46:37.780

为了完整起见，这是一个纯 Javascript 解决方案。

只需将此`onclick`属性添加到您的`RadioButton`元素（将*GroupName*替换为您`RadioButton`的 GroupName）：

```
<asp:RadioButton ... GroupName="GroupName" onclick="SelectRadioButton('GroupName$',this)" ... /> 
```

并在您的页面中包含此 Javascript：

```
<script type="text/javascript">
function SelectRadioButton(regexPattern, selectedRadioButton)
    {
        regex = new RegExp(regexPattern);
        for (i = 0; i < document.forms[0].elements.length; i++)
        {
            element = document.forms[0].elements[i];
            if (element.type == 'radio' && regex.test(element.name))
            {
                element.checked = false;
            }
        }
        selectedRadioButton.checked = true;
    }
</script> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-22T00:13:34.360

创建一个自定义控件并将 UniqueID 覆盖为列表视图 UniqueID + GroupName

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace MYCONTROLS
{

[ToolboxData("<{0}:MYRADIOBUTTON runat=server></{0}:MYRADIOBUTTON >")]
public class MYRADIOBUTTON : RadioButton
{
    public override string UniqueID
    {
        get
        {
            string uid = base.UniqueID;
            //Fix groupname in lisview
            if (this.Parent is ListViewDataItem && GroupName != "")
            {
                uid = this.Parent.UniqueID;
                uid = uid.Remove(uid.LastIndexOf('$'));
                uid += "$" + GroupName;

            }
            return uid;

        }
    }

}
} 
```

它是一个继承自 RadioButton 的自定义控件（公共类 MYRADIOBUTTON : RadioButton）。如果你在课堂上什么都不做，你会得到一个普通的 RadioButton。覆盖 UniqueId 您可以更改名称属性呈现方式的逻辑。为了仍然保持页面上其他控件的名称（列表视图之外）唯一，您可以从 ListView 获取 UniqueId 并将 GroupName 添加到该名称并将其添加到 RadioButton。

这解决了在列表视图的不同行上分组单选按钮的问题。您可能希望使用属性添加更多逻辑来打开/关闭此功能，使其表现得像普通的 RadioButton。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-01T08:59:14.347

我知道这个问题有点老了，但我认为它可能会对某人有所帮助，因此发布我对这个问题的解决方案。

这个问题有2个部分：

1.  防止一次选择多个单选按钮。
2.  要知道在服务器端代码中单击了哪个单选按钮。

我在中继器中的单选按钮有类似的问题。我在这里找到了部分解决方案： [Simple fix for Radio Button controls in an ASP.NET Repeater using jQuery](http://www.ifinity.com.au/Blog/EntryId/87/Simple-fix-for-Radio-Button-controls-in-an-ASP-NET-Repeater-using-jQuery)

请阅读以上文章以了解该问题。我参考了这篇文章，这是很好的帮助。如上所述，这个问题有两个部分，首先是防止一次选择多个单选按钮。其次，要知道在服务器端代码中单击了哪个单选按钮。上述文章中发布的解决方案仅适用于第一部分。但是，那里编写的代码以及那里发布的解决方案更新对我不起作用。所以我不得不对其进行一些修改以使其正常工作。这是我的解决方案。

我想用投票按钮创建投票。我的单选按钮 (ID) 的名称是 PollGroupValue，其中 Groupname 在转发器中设置为 PollGroup。记住 ASP.net 中的 Groupname 属性在生成的 html 中呈现为 name 属性。我的代码如下：

```
<script type="text/javascript">

/*  Step-01: */
$(document).ready(function () {

    /*  Step-02: */
    $("[name*='PollGroup']").each(function () {
        $(this).attr('ci-name', $(this).attr('name'));
    });

    /*  Step-03: */
    $("[name*='PollGroup']").attr("name", $("[name*='PollGroup']").attr("name"));

    $('#Poll1_BtnVote').click(function (e) {

        /* Step - 04:  */
        if ($("[name*='PollGroup']").filter(':checked').length == 0) {
            alert('Please select an option.');
            e.preventDefault();
        }

        /* Step - 05:  */
        $("[name*='PollGroup']").each(function () {
            $(this).attr('name', $(this).attr('ci-name'));
        });
    });
}); 
```

第 1 步：每当在中继器中使用单选按钮时，它的组名都会更改，因为 asp.net 会更改它以使其唯一。因此，每个单选按钮都有不同的组名（客户端生成的标记中的名称属性）。因此，用户可以同时选择所有选项。如后续注释所述，此问题已通过使用 jquery 代码解决。

第 2 步：此代码块创建一个名为 ci-name 的新客户属性，并将 name 属性的原始值复制到这个新的自定义属性中。这个过程对轮询中的每个单选按钮重复。这一步将在后面的步骤中帮助我们。

步骤 3：此代码块将 poll 中所有单选按钮的名称属性值设置为第一个单选按钮的名称属性值。此步骤可防止用户一次选择多个选项。

第 4 步：此代码在投票按钮单击事件的事件处理程序中，检查用户是否至少选中了一个选项。如果他没有，则会显示一条错误消息。

第 5 步：此代码在投票按钮单击事件的事件处理程序中，将所有单选按钮的名称属性值设置为其原始值。这是通过从自定义属性 ci-name 复制值来实现的。这允许 asp.net 服务器端代码知道实际单击了哪个按钮。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-02-03T17:54:58.227

我也对这个错误感到困惑，并决定放弃中继器，转而使用内部控件动态构建一个表。在您的用户控件或页面上，只需添加以下元素：

```
<asp:Table ID="theTable" runat="server">
    <asp:TableHeaderRow runat="server">
        <asp:TableHeaderCell runat="server" Text="Column 1"/>
        <asp:TableHeaderCell runat="server" Text="Column 2"/>
        <asp:TableHeaderCell runat="server" Text="Column 3"/>
    </asp:TableHeaderRow>
</asp:Table> 
```

然后在代码后面添加单选按钮和其他所需控件的数据行。您当然可以对其他元素（如 DIV）执行相同操作：

```
<div runat="server" ID=theDiv">
</div> 
```

但是，让我们仍然希望 ASP.NET 团队能够解决这个与转发器和列表视图有关的不幸问题。我仍然喜欢中继器控件并尽可能使用它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-12-22T03:53:34.380

这是一种使用反射的纯服务器端方法。`RadioButton`控件使用该属性`UniqueGroupName`来确定组名。组名缓存在`_uniqueGroupName`字段内。通过使用反射设置此字段，我们可以覆盖默认组名，并在转发器中的所有单选按钮中使用相同的组名。请注意，此代码必须在“RadioButton”控件的“PreRender”事件中运行，以确保新组名在回发中保持不变。

```
protected void rbOption_PreRender(object sender, EventArgs e)
{
    // Get the radio button.
    RadioButton rbOption = (RadioButton) sender;

    // Set the group name.
    var groupNameField = typeof(RadioButton).GetField("_uniqueGroupName", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
    groupNameField.SetValue(rbOption, "MyGroupName");

    // Set the radio button to checked if it was selected at the last post back.
    var groupValue = Request.Form["MyGroupName"];

    if(rbOption.Attributes["value"] == groupValue)
    {
        rbOption.Checked = true;
    } 
} 
```

`RadioButton`源代码：[http ://reflector.webtropy.com/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/whidbey/netfxsp/ndp/fx/src/xsp/System /Web/UI/WebControls/RadioButton@cs/2/RadioButton@cs](http://reflector.webtropy.com/default.aspx/Net/Net/3@5@50727@3053/DEVDIV/depot/DevDiv/releases/whidbey/netfxsp/ndp/fx/src/xsp/System/Web/UI/WebControls/RadioButton@cs/2/RadioButton@cs)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-03-18T17:28:42.510

这可能不是每个人的理想解决方案，但我使用 jQuery 进行了以下操作。

`<asp:RadioButton ID="rbtnButton1" groupName="Group1" runat="server" />` `<asp:RadioButton ID="rbtnButton2" groupName="Group1" runat="server" />`

`etc...`

然后在您的母版页中包含以下代码。（或您的所有页面）

```
$(function() {
//This is a workaround for Microsoft's GroupName bug.  
//Set the radio button's groupName attribute to make it work.
$('span[groupName] > input').click(function() {
    var element = this;
    var span = $(element).parent();
    if (element.checked) {
        var groupName = $(span).attr('groupName');
        var inputs = $('span[groupName=' + groupName + '] > input')
        inputs.each(function() {
            if (element != this)
                this.checked = false;
        });
    }
}); 
```

});

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-10T18:09:32.770

`HtmlInputControl.RenderAttributes()`通过忽略`RenderedNameAttribute`属性来解决方法的自定义控件/覆盖：

```
/// <summary>
/// HACK:  For Microsoft&apos;s bug whereby they mash-up value of the "name" attribute.
/// </summary>
public class NameFixHtmlInputRadioButton : HtmlInputRadioButton
{
    protected override void RenderAttributes(HtmlTextWriter writer)
    {
        // BUG:  Usage of 'HtmlInputControl.RenderedNameAttribute'
        // writer.WriteAttribute("name", this.RenderedNameAttribute);
        writer.WriteAttribute(@"name", Attributes[@"Name"]);

        Attributes.Remove(@"name");

        var flag = false;
        var type = Type;

        if (! string.IsNullOrEmpty(type))
        {
            writer.WriteAttribute(@"type", type);
            Attributes.Remove(@"type");
            flag = true;
        }

        base.RenderAttributes(writer);

        if (flag && DesignMode)
        {
            Attributes.Add(@"type", type);
        }

        writer.Write(@" /");
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-04T08:23:42.013

我使用相同的技术用 jquery 取消选中其他收音机请在下面找到代码

```
<asp:RadioButton ID="rbSelectShiptoShop" runat="server" onchange="UnCheckRadio(this);" CssClass="radioShop" /> 
```

和下面的脚本

```
function UnCheckRadio(obj) {
           $('.radioShop input[type="radio"]').attr('checked', false);
           $(obj).children().attr('checked', true);
       } 
```

# perl - Catalyst+Mason+Template::Toolkit 是否值得学习而不是固守 LAMP+Axkit？

> ID：377400
> 
> 赞同：7
> 
> 时间：2008-12-18T09:54:49.173
> 
> 标签：perl, exchange-server, web-frameworks, catalyst

目前我正在使用几乎 Unix + Mysql + Perl + Apache 和一些 javascript 来使其更像 ajax。我一直在关注 web 2.0 和 stackoverflow 的网站，并且非常喜欢简单的设计以及页面和操作等的流畅流程。

我正在尝试确定学习催化剂、梅森之类的人是否能够为我提供构建强大而流畅的 web 2.0 网站的能力，而这些网站的工作量更少，并且以后维护的代码更容易、更干净。

截至目前，我不太喜欢我建立的网站，因为它非常陈旧且缓慢。但[我从这里读到](https://stackoverflow.com/questions/105226/is-perl-still-a-viable-language-for-web-development)，如果我想以此建立事业，那么 LAMP 会是更好的选择吗？

只是想知道这三个标准，我最好的一步是什么？

1.  职业发展
2.  轻松构建强大的 web 2.0 网站
3.  Catalyst 在哪些方面实际上比 LAMP 更好？

谢谢。〜史蒂夫

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T12:14:31.403

回答你的问题......

1.  *“职业发展”* ——MVC 是一种很好的编程实践，因此获得它的知识和经验肯定会增强你的职业潜力。

2.  *“轻松构建强大的 web 2.0 网站”* ——Catalyst 确实让这件事变得容易多了，因为已经有人参与并完成了它（即 CPAN 上的模块）。

3.  *“Catalyst 实际上在哪些方面比 LAMP 更好？”* - 真的，他们只是不同。然而，Catalyst 确实强制执行了一个清晰的编程范式 (MVC)，这使得测试、重构、生成可重用代码等等变得更加容易......恕我直言；-)

希望这可以帮助。

PS。Catalyst 是 Perl 上的 Web (MVC) 框架之父，我强烈推荐它。但是请检查替代方案... [在 Perl 中建议一些好的 MVC 框架](https://stackoverflow.com/questions/45470/suggest-some-good-mvc-framework-in-perl)。

聚苯乙烯。可以在[Perl5 Wiki](http://www.perlfoundation.org/perl5/index.cgi?web_frameworks)上找到一个很好的 Web 框架列表（不仅仅是 MVC 框架） 。

购买力平价。Perl 是并将继续是 web (2.0) 开发的好选择（即忽略 FUD）。如果碰巧我错了，那么学习 Catalyst / MVC 之类的东西将为您提供必要的技能，这些技能很容易适应其他地方。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-18T13:23:48.877

LAMP 是 Linux、Apache、Mysql 和 Perl。那只是一个堆栈。如果您使用 Perl Web 框架，那么您仍然在使用 Perl。您并没有真正在 LAMP 和 Catalyst 或 Mason 之间进行选择。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T17:29:47.960

[Catalyst](http://www.catalystframework.org/)似乎是一个非常好的框架，尤其是与[Template Toolkit](http://template-toolkit.org/)结合使用时。如果你想学习 Catalyst，我肯定会通读[Catalyst 教程](http://search.cpan.org/perldoc?Catalyst::Manual::Tutorial)。

[Template Toolkit](http://template-toolkit.org/)在我看来是一个比[Mason](http://search.cpan.org/perldoc?Mason)更强大的模板处理系统。

就个人而言，我认为[Template Toolkit](http://template-toolkit.org/)值得学习，即使您不将它用于 Web。

*[从Template-Toolkit.org](http://template-toolkit.org/about.html)复制的代码*

```
[% FOREACH 人 IN 人 %]
[% IF 循环。第一个 %]
<表格>
  <tr>
    <th>排名</th>
    <th>姓名</th>
    <th>电子邮件</th>
  </tr>
[％ 结尾 ％]
  <tr>
    <td>[% loop.count %]</td>
    <td>[% person.name %]</td>
    <td>[% person.email %]</td>
  </tr>
[% IF 循环.last %]
</table>
[％ 结尾 ％]
[％ 结尾 ％]

```

您甚至可以将[Perl](http://template-toolkit.org/docs/manual/Directives.html#section_PERL)代码直接嵌入到您的模板中。`EVAL_PERL` 必须启用该选项才能评估 Perl 代码。

```
[％ 尝试 ％]
   [% PERL %]
      die "没有什么可活的\n";
   [％ 结尾 ％]
[％ 抓住 ％]
   错误：[% error.info %]
[％ 结尾 ％]

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-01-16T22:41:35.800

我知道这个线程很老，但我会贡献一个想法。恕我直言，学习新东西总是值得的，即使你认为你不会专业地使用它。接触新代码几乎总能带来新的见解。这些见解可能是否定的：“他们为什么要那样做？这没有意义？”。但我认为更多时候你会提出一种看待事物的新方法，或者一种解决常见问题的新方法。

这些见解有助于防止程序员变得陈旧。也许这就是为什么这么多人编写自己的编程语言，或者重新发明轮子等等的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-31T19:52:56.287

我同意 Dave Rolsky 的观点：称 TT 比 Mason“更有能力”是一个糟糕的选择。喜欢 TT 的人似乎喜欢它，因为它应该更“干净”。从 Mason 来到 TT，TT 感觉就像一件相当紧的直筒夹克。假设您很可能在 TT 和 Mason 内部都“拥有 perl 的全部功能”，但是对它的访问被埋没了，事实上，如果它不被埋没，它就会失去它的一个真正卖点：它不会t 看起来“更干净”了。

我自己，我不确定我是否会承认 TT 更“干净”（如果 perl 人停止将反 perl 抹黑运动中的言论内化，并克服这种自卑情结，那就太酷了）。如果这个想法是 web-monkeys 应该在 TT 而不是 Mason 中更好地修改控制结构，我建议这不成立：我希望他们通常需要真正的程序员的帮助在任何情况下。

# yui - 一起使用 YUI 和原型

> ID：377405
> 
> 赞同：3
> 
> 时间：2008-12-18T09:56:53.757
> 
> 标签：yui, prototypejs, scriptaculous, yui-calendar

我想将日历控件添加到已经包含 Prototype 和 Scriptaculous 的页面。对我能找到的任何原型都不满意，我正在考虑使用 YUI 日历小部件。

我这可能会导致什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-19T08:15:24.787

We have worked hard to make sure that YUI is safe to use with any other library. We namespace everything, as HermanD says, under only one required global (YAHOO) and one optional one (YAHOO_config). We don't modify native objects. And even though Protoype does modify native prototypes, we code defensively so that this doesn't break YUI functionality.

If you find any bugs in using the two together, please let us know.

Regards, Eric YUI Team

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T22:19:23.900

我在一个我已经在使用 Prototype 和 Scriptaculous 的应用程序中成功地使用了 YUI 选项卡控件，并且没有任何问题。但是，如果您正在查看一个公开可用的应用程序，那么这一切的重量就有点大了。我不太关心内部应用程序，比如公司，但您可能想考虑一下您让最终用户下载了多少 JavaScript 以及他们必须为页面下载的单独文件的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T10:47:51.750

默认情况下，YUI 中的所有内容都在 YAHOO 命名空间内，因此只要您明智地将命名空间应用于您从 YUI 使用的任何内容，我会认为您应该没问题。

见：http: [//developer.yahoo.com/yui/yahoo/](http://developer.yahoo.com/yui/yahoo/)

# math - MATLAB：使用 ODE 求解器？

> ID：377406
> 
> 赞同：1
> 
> 时间：2008-12-18T09:57:01.480
> 
> 标签：math, matlab, integration, numerical

这是一个非常基本的问题，但这是我第一次使用 MATLAB，我被困住了。我需要使用 3 种不同的数值积分技术来模拟一个简单的系列 RC 网络。我想我了解如何使用 ode 求解器，但我不知道如何输入系统的微分方程。我需要通过 m 文件来完成吗？

它只是一个简单的 RC 电路，形式如下：

```
RC dy(t)/dt + y(t) = u(t) 
```

初始条件为零。我有 R、C、步长和仿真时间的值，但我不知道如何特别好地使用 MATLAB。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T15:56:19.647

您将需要一个函数文件，它将*t*和*y*作为输入并给出*dy*作为输出。它将是具有以下标头的自己的文件。

```
function dy = rigid(t,y) 
```

在 MATLAB 路径上将其另存为rigid.m。

从那里你可以输入你的微分方程。你现在有了一个函数。这是一个简单的：

```
function dy = rigid(t,y)

dy = sin(t); 
```

从命令行或者脚本，需要通过ODE45来驱动这个功能

```
[T,Y] = ode45(@rigid,[0 2*pi],[0]); 
```

这将为您提供从**时间 0**到**时间 2*pi**运行的函数（rigid.m） ，**初始 y 为零**。

绘制这个：

```
plot(T,Y) 
```

![替代文字](https://blogs.mathworks.com/images/videos/Other%20Pics/SO%20ODE.jpg)

更多 MATLAB 文档在这里：

[http://www.mathworks.com/access/helpdesk/help/techdoc/ref/ode23tb.html](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/ode23tb.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T10:04:40.433

[官方的 Matlab 速成课程](http://www4.ncsu.edu/~mahaider/NCSU_RTG_Site/RTM_Matlab_Intro.pdf)（PDF 警告）有一个关于求解 ODE 的部分，以及我在启动 Matlab 时发现的许多其他有用的资源。

# windows - 检测批处理文件的执行方式

> ID：377407
> 
> 赞同：17
> 
> 时间：2008-12-18T09:58:05.813
> 
> 标签：windows, batch-file

假设 Windows，有没有一种方法可以从批处理文件中检测到它是从打开的命令提示符下启动还是通过双击启动的？当且仅当它被双击时，我想在批处理结束时添加一个暂停，这样窗口就不会随着它可能产生的任何有用输出一起消失。

有什么聪明的方法可以做到这一点？我正在寻找我可以依赖的解决方案，以便在或多或少使用默认设置配置的机器上工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-18T14:06:11.803

我刚刚进行了快速测试并注意到以下内容，这可能会对您有所帮助：

*   从打开的命令提示符运行时，%0 变量的路径没有双引号。如果脚本位于当前目录中，则甚至没有给出路径，只给出了批处理文件名。
*   从资源管理器运行时，%0 变量始终用双引号括起来，并包含批处理文件的完整路径。

如果从命令控制台运行此脚本不会暂停，但如果在资源管理器中双击则会暂停：

```
@echo off
setlocal enableextensions

set SCRIPT=%0
set DQUOTE="

@echo do something...

@echo %SCRIPT:~0,1% | findstr /l %DQUOTE% > NUL
if %ERRORLEVEL% EQU 0 set PAUSE_ON_CLOSE=1

:EXIT
if defined PAUSE_ON_CLOSE pause 
```

编辑：从资源管理器运行时还有一些我无法解释的奇怪行为。原来，而不是

```
@echo %SCRIPT:~0,1% | findstr /l %DQUOTE% > NUL
if %ERRORLEVEL% EQU 0 set PAUSE_ON_CLOSE=1 
```

我尝试只使用一个`if`：

```
if %SCRIPT:0,1% == ^" set PAUSE_ON_CLOSE=1 
```

从打开的命令提示符运行时，这将起作用，但从资源管理器运行时，它会抱怨该`if`语句不正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-07T23:37:42.590

是的。Patrick Cuff 的最后一个示例几乎可以工作，但是您需要添加一个额外的转义符 '^'，以使其在所有情况下都有效。这对我很有用：

```
set zero=%0
if [^%zero:~0,1%] == [^"] pause 
```

但是，如果批处理文件的名称包含空格，则无论哪种情况都会被双引号引起来，因此此解决方案将不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T10:03:19.500

不要忽视有两个批处理文件的解决方案：
abatfile.bat 和 abatfile-with-pause.bat
第二个只是调用第一个并添加一个暂停

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-01T15:14:32.923

这是我使用的：

```
rem if double clicked it will pause
for /f "tokens=2" %%# in ("%cmdcmdline%") do if /i "%%#" equ "/c" pause 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T14:19:19.547

当我从脚本运行批处理文件时，我使用参数“自动模式”。

```
set automode=%7 
```

（这里 automode 是给定的第七个参数。）

下面是一些代码，当文件应该暂停时，我这样做：

```
if @%automode%==@ pause 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-27T06:35:50.790

这里描述了一种简单的方法： [http](http://steve-jansen.github.io/guides/windows-batch-scripting/part-10-advanced-tricks.html) : //steve-jansen.github.io/guides/windows-batch-scripting/part-10-advanced-tricks.html 链接中提到的代码中几乎没有错字. 这是正确的代码：

```
@ECHO OFF
SET interactive=0

ECHO %CMDCMDLINE% | FINDSTR /L /I %COMSPEC% >NUL 2>&1
IF %ERRORLEVEL%==0 SET interactive=1

ECHO do work

IF "%interactive%"==1 PAUSE
EXIT /B 0 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T10:28:48.903

与第二个批处理文件类似，如果未给出某个参数（通过单击调用），您也可以暂停。

这意味着只有一个批处理文件，但在`-nopause`从控制台调用时必须指定一个参数或类似的东西。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-18T11:14:56.297

疯狂的想法：使用任务列表并解析它的结果。我在一个测试批处理文件中写道：

任务列表 > test.out

当我双击它时，在任务列表进程之前还有一个额外的“cmd.exe”进程，当脚本从命令行运行时它不存在（但请注意，如果有人打开命令可能还不够line shell 然后双击批处理文件）

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-12-18T10:02:15.960

无论它是如何打开的，都只需添加暂停？如果它是从命令提示符打开的，除了无害的暂停之外不会造成任何伤害。（不是解决方案，只是考虑暂停是否会如此有害/烦人）

# visual-studio - 在 Visual C++ 2008 中设置调试和发布设置

> ID：377417
> 
> 赞同：3
> 
> 时间：2008-12-18T10:02:37.380
> 
> 标签：visual-studio, visual-studio-2008, visual-studio-express

配置编译/链接/等时的常见错误。VC++ 2008 中的设置是在 Release 中设置它们而不是在 Debug 中设置（反之亦然），而不是为“所有配置”设置它们。关于如何避免这种错误的任何建议？

我有一些想法的开始：

*   找到一种方法，让 VC++ 在打开属性页时默认转到“所有配置”设置，而不是活动（发布/调试）设置。

*   有一个可以运行（在 VC++ 内部或外部）的 VB 脚本来检查项目设置并引发检测到的任何不一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T10:25:44.633

vb 或 js 脚本非常适合该任务。只是不要忘记告诉它某些设置应该不同，例如预处理器定义或使用的运行时库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T10:52:59.087

我们最近切换到 Qt 的构建 (qmake) 工具，该工具能够在处理单个项目时生成 makefile（用于批量产品构建）以及项目 (.vcproj) 文件。

关于它的好处是，我们已经为所有可用的构建目标（即我们有*调试*、*发布*和*非优化发布*`all`）强制实施了人们可能希望事先希望的设置，并且从那时起就忘记了操作设置。`once`

 **** * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T10:58:47.797

您可以使用 CMake 或 Scons 或类似的跨平台构建系统生成 .vsproj 文件。

# unit-testing - 单元/集成测试中文件系统依赖的最佳实践

> ID：377423
> 
> 赞同：21
> 
> 时间：2008-12-18T10:07:08.650
> 
> 标签：unit-testing, dependencies, filesystems

我刚开始为很多代码编写测试。有一堆依赖于文件系统的类，即它们读取 CSV 文件、读/写配置文件等等。

目前，测试文件存储在项目的测试目录中（它是一个 Maven2 项目），但由于多种原因，该目录并不总是存在，因此测试失败。

你知道在单元/集成测试中处理文件系统依赖的最佳实践吗？

**编辑：**我不是在寻找我上面描述的那个特定问题的答案。那只是一个例子。我更喜欢一般建议如何处理对文件系统/数据库等的依赖关系。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-12-18T10:30:12.083

第一个应该尽量**让单元测试远离文件系统**- 请参阅这套[单元测试规则](http://www.artima.com/weblogs/viewpost.jsp?thread=126923)。如果可能的话，让您的代码使用 Streams，这些 Streams 将作为单元测试的缓冲区（即在内存中），并在生产代码中使用 FileStream。

如果这不可行，您可以让您的单元测试**生成**他们需要的文件。这使得测试易于阅读，因为所有内容都在一个文件中。这也可以防止权限问题。

您可以在单元测试中**[模拟](http://en.wikipedia.org/wiki/Mock_object)**文件系统/数据库/网络访问。

您可以将依赖数据库或文件系统的单元测试视为集成测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T10:47:45.323

对文件系统的依赖有两种形式：

*   您的测试所依赖的文件；如果您需要文件来运行测试，那么您可以在测试中生成它们并将它们放在一个`/tmp`目录中。
*   您的代码所依赖的文件：配置文件或输入文件。

在第二种情况下，通常可以重新构建代码以删除对文件的依赖（例如 java.io.File 可以替换为`java.io.InputStream`and`java.io.OutputStream`等）。这当然是不可能的。

您可能还需要处理文件系统中的“非确定性”（我曾经在 NFS 上调试过一些东西）。在这种情况下，您可能应该将文件系统包装在一个瘦接口中。

在最简单的情况下，这只是获取 File 并将调用转发到该文件的辅助方法：

```
InputStream getInputStream(File file) throws IOException {
    return new FileInputStream(file);
} 
```

然后，您可以用一个 mock 替换这个，您可以指导它抛出异常，或返回 a`ByteArrayInputStream`或其他任何东西。

URL 和 URI 也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T10:19:44.770

测试需要从文件中读取的代码有两个选项：

1.  将与单元测试相关的文件保存在源代码控制中（例如，在测试数据文件夹中），因此任何获取最新版本并运行测试的人始终将相关文件保存在相对于测试二进制文件的已知文件夹中。这可能是“最佳实践”。

2.  如果有问题的文件很大，您可能不想将它们保留在源代码管理中。在这种情况下，所有开发人员和构建机器都可以访问的网络共享可能是一个合理的折衷方案。

显然，大多数编写良好的类首先不会对文件系统有硬依赖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T09:30:57.790

为 in 和 out 的测试文件指定在结构上与单元测试名称相似的名称。

例如，在 JUnit 中，我会使用：

```
File reportFile = new File("tests/output/" + getClass().getSimpleName() + "/" + getName() + ".report.html"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T10:15:09.773

通常，文件系统测试不是很关键：文件系统易于理解，易于设置并保持稳定。此外，访问通常非常快，因此本身没有理由回避它或模拟测试。

我建议您找出该目录不存在的原因并确保它存在。例如，在 setUp() 中检查文件或目录是否存在，如果检查失败，则复制文件。这只会发生一次，因此对性能的影响很小。

# c - 打印表达式并对其进行评估的宏（使用 __STRING）

> ID：377425
> 
> 赞同：8
> 
> 时间：2008-12-18T10:08:46.947
> 
> 标签：c, expression-evaluation

为了学习和演示，我需要一个宏来打印其参数**并**对其进行评估。我怀疑这是一个非常常见的案例，甚至可能是一个常见问题解答，但我找不到实际的参考资料。

我目前的代码是：

```
#define PRINT(expr) (fprintf(stdout, "%s -> %d\n", __STRING(expr), (expr))) 
```

进而：

```
PRINT(x & 0x01); 
```

它工作正常，但我不确定 __STRING 宏的法律地位，特别是因为它位于私有 __ 命名空间中。

所以，我的问题：

1.  有没有更好的方法来编写这个宏？
2.  __STRING 是标准的/伟大的/邪恶的吗？
3.  如何使用现有的搜索工具查找有关 __STRING 的信息？SO的搜索引擎只搜索包含字符串的任何内容:-(

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-18T10:20:16.457

就像是

```
#define PRINT(expr) (fprintf(stdout, "%s -> %d\n", #expr, (expr))) 
```

可能是你想要的。# 是字符串化操作符。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-18T10:15:54.827

您可以使用 # 预处理器标记，它将后面的参数转换为字符串文字：

```
#include <stdlib.h>
#include <stdio.h>

#define STR(x) #x
#define PRINT(expr) (fprintf(stdout, "%s -> %d\n", STR(expr), (expr)))

int main(void)
{
    int x = 7;

    PRINT(x & 0x01);

    return EXIT_SUCCESS;
} 
```

2.  这绝对不是标准的，这是我第一次遇到它；乍一看，它似乎并没有比上面的 STR() 宏做更多的事情。

3.  [谷歌](http://www.google.com/search?&q=__string&btnG=Search)似乎工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T12:39:21.243

从（至少）版本 1.04 (1992-09-03)开始提供的是**glibc ，可能更早。**`__STRING`

/usr/include/sys/cdefs.h：

```
#define __CONCAT(x,y)   x ## y
#define __STRING(x) #x 
```

当时它们都在 glibc 中使用。目前，`__STRING`没有在 glibc 中使用，但保留在那里供应用程序使用。

在 Linux 上，您可以依赖这些。IIUC，`__STRING`并`__CONCAT`在 NetBSD 1.3 中被采用；Solaris 两者都不提供。其他操作系统可能会有所不同。

# firefox - FF2和FF3在渲染上有什么区别？

> ID：377434
> 
> 赞同：1
> 
> 时间：2008-12-18T10:12:33.100
> 
> 标签：firefox, firefox-3

我注意到 Windows XP 中这些版本之间的 HTML 呈现之间存在细微的间距差异。

盒子模型的解释方式是否略有不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T10:27:03.150

找到这个： http: [//kb.mozillazine.org/Websites_look_wrong](http://kb.mozillazine.org/Websites_look_wrong)

它不是专门关于 FF3 的，但可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T10:44:45.143

不妨在[http://www.quirksmode.org/上查看它](http://www.quirksmode.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T10:13:27.607

您注意到的差异就是您正在寻找的差异。

# python - 如何让我的 Python 程序休眠 50 毫秒？

> ID：377454
> 
> 赞同：700
> 
> 时间：2008-12-18T10:20:24.270
> 
> 标签：python, timer, sleep

如何让我的 Python 程序休眠 50 毫秒？

* * *

## 回答 #1

> 赞同：1069
> 
> 时间：2008-12-18T10:23:50.113

采用[`time.sleep()`](https://docs.python.org/library/time.html#time.sleep)

```
from time import sleep
sleep(0.05) 
```

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2008-12-18T11:16:30.430

请注意，如果您依靠*恰好*50 毫秒的睡眠时间，您将无法做到这一点。它只是关于它。

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2008-12-18T10:23:03.267

使用`time.sleep()`：

```
import time
time.sleep(50 / 1000) 
```

请参阅 Python 文档：[https ://docs.python.org/library/time.html#time.sleep](https://docs.python.org/library/time.html#time.sleep)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2020-07-03T16:55:26.710

有一个名为“时间”的模块可以帮助您。我知道两种方法：

1.  `sleep`

    Sleep（[参考](http://docs.python.org/library/time.html#time.sleep)）要求程序等待，然后执行其余的代码。

    有两种使用睡眠的方法：

    ```
    import time # Import whole time module
    print("0.00 seconds")
    time.sleep(0.05) # 50 milliseconds... make sure you put time. if you import time!
    print("0.05 seconds") 
    ```

    第二种方式不会导入整个模块，而只是休眠。

    ```
    from time import sleep # Just the sleep function from module time
    print("0.00 sec")
    sleep(0.05) # Don't put time. this time, as it will be confused. You did
                # not import the whole module
    print("0.05 sec") 
    ```

2.  使用自[Unix 时间以来的时间](https://en.wikipedia.org/wiki/Unix_time)。

    如果您需要运行循环，这种方式很有用。但是这个稍微复杂一些。

    ```
    time_not_passed = True
    from time import time # You can import the whole module like last time. Just don't forget the time. before to signal it.

    init_time = time() # Or time.time() if whole module imported
    print("0.00 secs")
    while True: # Init loop
        if init_time + 0.05 <= time() and time_not_passed: # Time not passed variable is important as we want this to run once. !!! time.time() if whole module imported :O
            print("0.05 secs")
            time_not_passed = False 
    ```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-12T00:52:13.593

您也可以使用该`Timer()`功能来做到这一点。

代码：

```
from threading import Timer

def hello():
  print("Hello")

t = Timer(0.05, hello)
t.start()  # After 0.05 seconds, "Hello" will be printed 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-06-18T07:09:11.403

您还可以将 pyautogui 用作：

```
import pyautogui
pyautogui._autoPause(0.05, False) 
```

如果第一个参数不是 None，那么它将暂停第一个参数的秒数，在这个例子中：0.05 秒

如果第一个参数是 None，而第二个参数是 True，那么它将为全局暂停设置休眠，该设置设置为：

```
pyautogui.PAUSE = int 
```

如果您想知道原因，请参阅源代码：

```
def _autoPause(pause, _pause):
    """If `pause` is not `None`, then sleep for `pause` seconds.
    If `_pause` is `True`, then sleep for `PAUSE` seconds (the global pause setting).

    This function is called at the end of all of PyAutoGUI's mouse and keyboard functions. Normally, `_pause`
    is set to `True` to add a short sleep so that the user can engage the failsafe. By default, this sleep
    is as long as `PAUSE` settings. However, this can be override by setting `pause`, in which case the sleep
    is as long as `pause` seconds.
    """
    if pause is not None:
        time.sleep(pause)
    elif _pause:
        assert isinstance(PAUSE, int) or isinstance(PAUSE, float)
        time.sleep(PAUSE) 
```

# sharepoint - Sharepoint Web 部件管理

> ID：377457
> 
> 赞同：2
> 
> 时间：2008-12-18T10:22:31.443
> 
> 标签：sharepoint, dependencies, web-parts, bll

我在 Sharepoint 和 Project Server 上开发了一个相当大的项目，设计为多层应用程序。我以编程方式管理某些 Web 部件页面上的 Web 部件。根据用户在其中一个网页中的选择，将适当的网页部件添加到另一个网页部件页面的网页部件集合中。我的问题是我根本不知道在哪里管理 Web 部件，我应该在 BLL 中进行管理，然后让包含业务逻辑的程序集引用 Web 部件所在的 UI 程序集吗？（我需要在将 Web 部件添加到集合时对其进行实例化，因为我不想使用表示 Web 部件 dwp 的硬编码字符串。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-22T18:03:57.917

您能否将 Web 部件打包为一个功能或一组功能，然后通过 Web 部件管理器类简单地管理功能激活/停用？

任何需要在适当的 Web 部件页面上进行的 Web 部件程序化按摩都可以在功能接收器中处理，因此您的经理不需要非常了解 Web 部件 UI。

HTH, jt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-26T17:04:09.563

Web 部件通常最好使用功能/解决方案框架进行管理。您可以将您编写的 webpart 类视为任何其他 web 控件，因此是 ui 层的一部分。我通常将 xml 文件（.webpart 或 .aspx 文件）中的信息保持在最低限度。如果您专门管理它们，则根本不需要使用声明性代码文件。

简短的回答：*webpart 是特定于共享点的 ui，应该不了解业务层。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-29T04:10:35.643

简短的回答可能是“不，你不应该在 BLL 中这样做”。纯粹主义者可能会争辩说，虽然 BLL 可以正确地确定用户可以做什么或不可以做什么，但最终要由 UI 层来确定要显示的适当 Web 部件。

例如，BLL 可能会确定用户的能力并将其公开为角色、权限或具有域相关含义的其他内容（例如时间表批准者角色、批准时间表权限等）。然后这些可能会被 UI 层映射到一组 Web 部件（例如时间表批准 Web 部件）。通过这种方式，BLL 有效地确定了用户的能力，而 UI 层确定了这些能力的 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-29T04:58:03.333

这实际上取决于您为 BLL 和 UI 层使用的模式，以及您希望遵循的严格程度。

如果您正在执行 MVP 模式，那么我建议您`Page`实现一个具有以下一个（或多个）选项的接口：

*   要加载的堆栈`Presenters`被添加到
*   每个 Web 部件的**Load_`WebPartName`**事件，然后应调用该事件以指示需要加载哪些 Web 部件

要成为严格的 MVP，您不应*在*BLL 项目中引用以下程序集：

*   系统.Web
*   微软共享点
*   Microsoft.SharePoint.*

（所有 SharePoint 程序集都在模型或 UI 项目中，BLL 只是连接到适当的飞节）

# oracle - 在oracle中将where子句动态添加到游标

> ID：377464
> 
> 赞同：6
> 
> 时间：2008-12-18T10:24:10.877
> 
> 标签：oracle, plsql, database-cursor

我有接受某些参数的 plsql 程序，例如 v_name、v_country、v_type。

我希望有一个带有这样的选择语句的游标：

```
select column from table1 t1, table2 t2
where t1.name = v_name
and t1.country = v_country
and t1.id = t2.id
and t2.type = v_type 
```

如果某些参数为空，我只能将相关的 where 子句添加到游标吗？还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T11:38:58.323

使用它的最佳方法是使用 DBMS_SQL。

您创建一个代表您的 SQL 语句的字符串。您仍然使用绑定变量。这是痛苦的。

它是这样的（我还没有编译这个，但它应该很接近）：-

```
CREATE OR REPLACE FUNCTION find_country( v_name  t1.country%TYPE,
                                         v_type  t2.type%TYPE)  /* Hmm, column called type? */
DECLARE
  v_SQL         varchar2(2000);
  v_select          INTEGER;   /* "Pointer" to a DBMS_SQL select statement */
  v_execute         INTEGER;

BEGIN
  v_SQL := 'select column from table1 t1, table2 t2 ||
           'where t1.id = t2.id';

  IF v_name IS NOT NULL THEN
    v_SQL := v_SQL || ' AND t1.country = :v_name'
  END IF;

  IF v_type IS NOT NULL THEN
    v_SQL := v_SQL || ' AND t2.type = :v_type';
  END IF;

  /* Setup Cursor */
  v_select := dbms_sql.open_cursor;     
  dbms_sql.parse( v_select, v_SQL, DBMS_SQL.native);

  IF v_name IS NOT NULL THEN
    dbms_sql.bind_variable( v_select, ':v_name', v_name );
  END IF;

  IF v_type IS NOT NULL THEN
    dbms_sql.bind_variable( v_select, ':v_type', v_type );
  END IF;

  DBMS_SQL.DEFINE_COLUMN(v_select, 1, v_column);  /* This is what we have selected */

  /* Return value from EXECUTE is undefined for a SELECT */     
  v_execute := DBMS_SQL.EXECUTE( v_select );

  IF DBMS_SQL.FETCH_ROWS( v_select ) > 0 THEN

    /* A row was found  
    DBMS_SQL.COLUMN_VALUE( v_select, 1, v_column);

    /* Tidy Up */
    DBMS_SQL.CLOSE_CURSOR(v_select);

    RETURN v_ID_address;

  ELSE

     DBMS_SQL.CLOSE_CURSOR(v_select);

     /* No row */
     RETURN NULL;
  END IF;

  EXCEPTION
    WHEN OTHERS THEN
      IF DBMS_SQL.IS_open(v_select) THEN
        DBMS_SQL.CLOSE_CURSOR(v_select);
      END IF;
      RAISE;
END; 
```

与仅编写 SQL 内联相比，这种方法非常痛苦，除非您有大量列，否则有时使用这种语法编写几个不同的版本会更容易：

```
FOR r IN (SELECT blah FROM blah WHERE t1 = v_t1) LOOP
   func( r.blah );
END LOOP; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T11:46:03.303

这不是您要直接问的，但它可能是一个可以接受的解决方案：

```
select column from table1 t1, table2 t2
where
    (v_name is null or t1.name = v_name)
and (v_country is null or t1.country = v_country)
and t1.id = t2.id
and (v_type is null or t2.type = v_type) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T10:42:17.143

一种方法是将查询构建为字符串，然后使用[立即执行](http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14261/executeimmediate_statement.htm)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-02T19:22:16.213

**最好**的方法是使用 Oracle 的应用程序上下文特性，最好的定义是最好的性能和安全性。

**更快**的方法是 hamishmcn 建议的，使用 EXECUTE IMMEDIATE。我**每次**都会选择 WW 对 DBMS_SQL 的建议。

另一种**编写速度最快**但性能不佳的方法是这样的：

```
select column from table1 t1, table2 t2
where t1.name = nvl(v_name, t1.name)
and t1.country = nvl(v_country, t1.country)
and t1.id = t2.id
and t2.type = nvl(v_type, t2.type) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-15T05:48:21.817

您不必使用 dbms_sql 来解决此问题，您仍然可以通过使用 ref 游标来使用普通游标。

样本：

```
DECLARE
  TYPE cursor_ref IS REF CURSOR;
  c1 cursor_ref;
  r1 table1.column%type;
BEGIN
  l_sql := 'select t1.column from table1 t1, table2 t2 where t1.id = t2.id ';
  if v_name is not null then
    l_sql := l_sql||' and t1.name = '||v_name ;
  end if;
  if v_country is not null then
    l_sql := l_sql||' and t1.country = '||v_country';
  end if;
  if v_type is not null then  
    l_sql := l_sql||' and t2.type = '||v_type';
  end if;
  open c1 for l_sql;
  loop
      fetch c1 into r1;
      exit when c1%notfound;
      -- do something
  end loop;
  close c1;
end;
/ 
```

您可以通过使用命令“使用”绑定变量来改善这一点，如下所示：

```
open c1 for l_sql using v_name, v_country; 
```

# workflow - JBPM 工作流补丁生成

> ID：377470
> 
> 赞同：5
> 
> 时间：2008-12-18T10:28:17.250
> 
> 标签：workflow, jbpm

我一直在我的项目中使用 JBPM 工作流，我有一个关于生成数据库补丁或 SQL 语句以应用 JBPM 工作流修改的小问题。

目前，JBPM 工作流提供了一种通过部署最新流程定义来刷新模式中的 JBPM 表的方法。但是，如果我的系统已经使用状态 X 部署的流程定义，现在我已经修改流程定义文件以适应更改 X2，该怎么办？我仍然需要能够在不破坏旧保存数据的实例的情况下部署增量更改。

是否可以只为 JBPM 流程定义修改生成“delta”数据库脚本？还有哪些可以用来更直观地修改流程定义的好工具？

重申一下我的问题，JBPM deploy 会清理那里维护的旧实例的 JBPM 表，然后重新部署最新的文件；如何在不删除旧数据的情况下生成增量？是否有任何用户友好的工具？

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-03-30T09:19:22.220

我不确定是否正确理解了您的问题。当您部署新的流程定义时，JBpm 不会清理旧流程实例的表。

当您部署与现有流程定义同名的新流程定义时，您将获得该流程定义的新版本。

现有流程实例继续使用它们开始时使用的流程定义版本运行，而新流程实例采用最新版本，除非您指定要使用的精确版本。

理论上，也可以使用 API 修改流程定义以运行流程实例。这样做时，您必须注意使这些更改与这些实例的流动相兼容。

# sql - 带有内部连接帮助的 SQL Select 语句

> ID：377474
> 
> 赞同：0
> 
> 时间：2008-12-18T10:30:12.520
> 
> 标签：sql, distinct, inner-join

这是我的 SQL 语句，它没有返回 DISTINCT 线程标题。

```
SELECT DISTINCT TOP 5 tblThread.Title, tblPost.Date 
FROM tblPost 
INNER JOIN tblThread ON tblPost.ThreadID = tblThread.ThreadID 
ORDER BY tblPost.Date DESC 
```

tblThread 和 tblPost 之间的公共字段是 ThreadID。

我想要做的是根据 tblPost 中最新的 5 个帖子返回最新的 5 个不同的线程标题。

示例：如果一个名为 ASP.NET 的线程已被发布两次，并且它们是最近的两个帖子，则该线程 (ASP.NET) 的标题应该只出现一次并且位于列表的顶部。

任何帮助将不胜感激。

斯特凡。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T10:38:26.043

试试这个 ：

```
SELECT DISTINCT TOP 5 tblThread.Title, MAX(tblPost.Date)
FROM tblPost INNER JOIN tblThread ON tblPost.ThreadID = tblThread.ThreadID 
GROUP BY tblThread.Title
ORDER BY MAX(tblPost.Date) DESC 
```

# apache-flex - 分析现有的闪存文件

> ID：377477
> 
> 赞同：1
> 
> 时间：2008-12-18T10:32:39.660
> 
> 标签：apache-flex, profiling, flash

我正在尝试对浏览器中的 flash 对象进行一些研究。例如内存使用等。使用 Adob​​e Flex Builder 3，我试图对 swf 文件进行一些分析，但问题是我只能在调试 swfs 上执行此操作。几乎所有的添加/游戏/视频都是发布版本。有没有办法对这些进行一些测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-29T06:36:38.330

我会说你需要得到源。你可以试试[反编译器](http://theflashblog.com/?p=352)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-10T05:18:54.950

查看[flash.sampler](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/sampler/package.html)。您需要在 Flash*播放器*的调试版本中运行您的内容，但内容本身不需要使用调试符号进行编译。

您可以使用**PreloadSWF**选项来注入可以监控的代理。如果您只想使用内存，那是一个便宜的 API 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T18:37:28.367

有一个类似的[问题](https://stackoverflow.com/questions/357825/flash-actionscript-cpu-profiler)，也在这里发布，因为它在这个线程中同样相关：

重要的是要注意 Flash Player 的实现在每个平台上以及在某种程度上每个浏览器都是不同的，所以预计会有显着的速度差异。因此，如果您正在开发一个资源密集型应用程序，您应该使用特定于您所针对的每个操作系统的分析工具，例如OS X 上的[Instruments](http://developer.apple.com/technology/tools.html)，当然还要测试每个浏览器的性能。

# wpf - WPF 设计器在解析具有覆盖属性的通用控件时存在错误

> ID：377480
> 
> 赞同：3
> 
> 时间：2008-12-18T10:33:21.140
> 
> 标签：wpf, generics, designer

我用虚拟属性创建了一个通用的无外观控件：

```
public abstract class TestControlBase<TValue> : Control
{
    public static readonly DependencyProperty ValueProperty;

    static TestControlBase()
    {
        ValueProperty = DependencyProperty.Register("Value", typeof(TValue),
                                                    typeof(TestControlBase<TValue>));
    }

    protected TestControlBase()
    {
        Focusable = false;
        Value = default(TValue);
    }

    public virtual TValue Value
    {
        get
        {
            return (TValue)GetValue(ValueProperty);
        }
        set
        {
            SetValue(ValueProperty, value);
        }
    }
} 
```

然后我创建了一个从它派生的控件并覆盖了 Value 属性：

```
public class TestControl : TestControlBase<int>
{
    public override int Value
    {
        get
        {
            return base.Value;
        }
        set
        {
            base.Value = value;
        }
    }
} 
```

所以我在 Window XAML 中使用它：

```
 <TestControls:TestControl /> 
```

当我在设计器中打开窗口时一切正常，但是当我将鼠标光标放在这一行或设计器中的这个控件时，我收到异常：

```
Exception has been thrown by the target of an invocation.
   at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Delegate.DynamicInvokeImpl(Object[] args)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Boolean isSingleParameter)
   at System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Boolean isSingleParameter, Delegate catchHandler)

Ambiguous match found.
   at System.RuntimeType.GetPropertyImpl(String name, BindingFlags bindingAttr, Binder binder, Type returnType, Type[] types, ParameterModifier[] modifiers)
   at System.Type.GetProperty(String name)
   at MS.Internal.ComponentModel.DependencyPropertyKind.get_IsDirect()
   at MS.Internal.ComponentModel.DependencyPropertyKind.get_IsAttached()
   at MS.Internal.ComponentModel.APCustomTypeDescriptor.GetProperties(Attribute[] attributes)
   at MS.Internal.ComponentModel.APCustomTypeDescriptor.GetProperties()
   at System.ComponentModel.TypeDescriptor.TypeDescriptionNode.DefaultExtendedTypeDescriptor.System.ComponentModel.ICustomTypeDescriptor.GetProperties()
   at System.ComponentModel.TypeDescriptor.GetPropertiesImpl(Object component, Attribute[] attributes, Boolean noCustomTypeDesc, Boolean noAttributes)
   at System.ComponentModel.TypeDescriptor.GetProperties(Object component)
   at MS.Internal.Model.ModelPropertyCollectionImpl.GetProperties(String propertyNameHint)
   at MS.Internal.Model.ModelPropertyCollectionImpl.<GetEnumerator>d__0.MoveNext()
   at MS.Internal.Designer.PropertyEditing.Model.ModelPropertyMerger.<GetFirstProperties>d__0.MoveNext()
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.UpdateCategories(Selection selection)
   at MS.Internal.Designer.PropertyEditing.PropertyInspector.OnSelectionChangedIdle() 
```

谁知道这个问题？请解释一下 :) 除了 WPF Designer 不喜欢泛型之外，我没有任何想法。如果我全部替换泛型`Object`就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-27T00:54:20.803

伊万，

也许答案对您来说有点晚，但其他人也可以使用它。当我读到这是一个错误时，我遇到了同样的问题并且非常失望。但经过一番谷歌搜索后，我发现了一个[博客](http://jamescrisp.org/2008/05/26/wpf-control-inheritance-with-generics/)，其中展示了一种使用这种继承的方法。似乎问题已解决，包括 xaml 中的一些属性。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-23T20:49:37.550

我认为你无能为力。这只是一个错误。开发 WF 控件时也会发生同样的事情。

我正在开发 Windows 窗体控件的同事制作了不通用的第二个控件。这只是一种解决方法，但它有效。如果您想在设计师中工作，只需注释通用 (<>)，在您的工作完成后，取消注释它。

我希望它会帮助你:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-26T08:50:28.110

这很旧，但我（有点）偶然发现它......
我不确定，但你正在设置一个没有默认值的不可为空的依赖属性。
我看不到确定未设置属性的值的方法。我想这就是问题所在。

# c# - XmlSerialize 具有属性的自定义集合

> ID：377486
> 
> 赞同：19
> 
> 时间：2008-12-18T10:39:43.310
> 
> 标签：c#, .net, xml-serialization

我有一个简单的类，它继承自 Collection 并添加了几个属性。我需要将此类序列化为 XML，但 XMLSerializer 忽略了我的附加属性。

我认为这是因为 XMLSerializer 对 ICollection 和 IEnumerable 对象进行了特殊处理。解决这个问题的最佳方法是什么？

这是一些示例代码：

```
using System.Collections.ObjectModel;
using System.IO;
using System.Xml.Serialization;

namespace SerialiseCollection
{
    class Program
    {
        static void Main(string[] args)
        {
            var c = new MyCollection();
            c.Add("Hello");
            c.Add("Goodbye");

            var serializer = new XmlSerializer(typeof(MyCollection));
            using (var writer = new StreamWriter("test.xml"))
                serializer.Serialize(writer, c);
        }
    }

    [XmlRoot("MyCollection")]
    public class MyCollection : Collection<string>
    {
        [XmlAttribute()]
        public string MyAttribute { get; set; }

        public MyCollection()
        {
            this.MyAttribute = "SerializeThis";
        }
    }
} 
```

这将输出以下 XML（注意 MyCollection 元素中缺少 MyAttribute）：

```
<?xml version="1.0" encoding="utf-8"?>
<MyCollection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <string>Hello</string>
    <string>Goodbye</string>
</MyCollection> 
```

我*想要*的是

```
<MyCollection MyAttribute="SerializeThis" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <string>Hello</string>
    <string>Goodbye</string>
</MyCollection> 
```

有任何想法吗？越简单越好。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-18T10:43:20.560

集合通常不会成为额外属性的好地方。在序列化和数据绑定期间，如果项目看起来像一个集合（ , 等 - 取决于场景），它们将被`IList`忽略`IEnumerable`。

如果是我，我会封装这个集合——即

```
[Serializable]
public class MyCollectionWrapper {
    [XmlAttribute]
    public string SomeProp {get;set;} // custom props etc
    [XmlAttribute]
    public int SomeOtherProp {get;set;} // custom props etc
    public Collection<string> Items {get;set;} // the items
} 
```

另一种选择是实现`IXmlSerializable`（相当多的工作），但这仍然不适用于数据绑定等。基本上，这不是预期的用法。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2010-03-25T19:07:54.793

如果您确实按照 Marc Gravell 的建议进行封装，那么本文开头将解释如何让您的 XML 看起来与您描述的完全一样。

[http://blogs.msdn.com/youssefm/archive/2009/06/12/customizing-the-xml-for-collections-with-xmlserializer-and-datacontractserializer.aspx](http://blogs.msdn.com/youssefm/archive/2009/06/12/customizing-the-xml-for-collections-with-xmlserializer-and-datacontractserializer.aspx)

也就是说，而不是这样：

```
<MyCollection MyAttribute="SerializeThis" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Items>
    <string>Hello</string>
    <string>Goodbye</string>
  <Items>
</MyCollection> 
```

你可以有这个：

```
<MyCollection MyAttribute="SerializeThis" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">      
  <string>Hello</string>
  <string>Goodbye</string>
</MyCollection> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-16T13:39:48.883

正如 Neil Whitaker 所建议的那样，以防他的链接失效。

创建一个内部集合来存储字符串并应用 XmlElement 属性来屏蔽集合名称。生成与从 Collection 继承的 MyCollection 相同的 xml 输出，但还会序列化父元素上的属性。

```
[XmlRoot("MyCollection")]
public class MyCollection 
{
    [XmlAttribute()]
    public string MyAttribute { get; set; }

    [XmlElement("string")]
    public Collection<string> unserializedCollectionName { get; set; }

    public MyCollection()
    {
        this.MyAttribute = "SerializeThis";
        this.unserializedCollectionName = new Collection<string>();
        this.unserializedCollectionName.Add("Hello");
        this.unserializedCollectionName.Add("Goodbye");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-30T14:42:22.357

我一直在与 Romaroo 的相同问题作斗争（想要将属性添加到实现 ICollection 的类的 xml 序列化中）。我还没有找到任何方法来公开集合类中的属性。我什至尝试使用 XmlAttribute 标记并使我的属性显示为根节点的属性，但也没有运气。但是，我能够在我的班级上使用 XmlRoot 标记将其从“ArrayOf ...”重命名。如果您有兴趣，这里有一些参考资料：

*   [MilkCarton.com](http://www.milkcarton.com/blog/2007/09/13/Problems+Serializing+Class+Which+Inherits+From+A+Generic+List.aspx)
*   [微软论坛发帖](http://bytes.com/groups/net-c/267397-xmlrootattribute-issue)
*   [Diranieh - 往下看](http://www.diranieh.com/NETSerialization/XMLSerialization.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-24T22:45:13.980

*有时你只想做你想做的事；该框架该死。*

我在这里发布了一个答案[List<T> Not Deserialized 的属性](https://stackoverflow.com/questions/28130050/property-of-a-listt-not-deserialized/28153603#28153603)

这就是OP想要做的。

# c# - 方法重载行为

> ID：377506
> 
> 赞同：4
> 
> 时间：2008-12-18T10:51:40.933
> 
> 标签：c#, .net, oop, methods

我有以下代码示例：

```
public class Base
{
   public virtual void MyMethod(int param)
    {
        Console.WriteLine("Base:MyMethod - Int {0}", param);
    }
}

public class Derived1 : Base
{
    public override void MyMethod(int param)
    {
        Console.WriteLine("Derived1:MyMethod - Int {0}", param);
    }

    public void MyMethod(double param)
    {
        Console.WriteLine("Derived1:MyMethod - Double {0}", param);
    }
}

class Program
{
    static void Main(string[] args)
    {
        Base objB = new Base();
        objB.MyMethod(5);

        Base objBD = new Derived1();
        objBD.MyMethod(5);

        Derived1 objD = new Derived1();
        objD.MyMethod(5);

        Console.ReadLine();
    }
} 
```

上述代码的输出如下：

> 基数：MyMethod - Int 5
> 
> Derived1:MyMethod - Int 5
> 
> Derived1:MyMethod - 双 5

对于使用'objD'的'MyMethod'的第三次调用，为什么在我实际传递一个INT时使用'DOUBLE'重载。

使用“objBD”的第二次调用似乎表现正确。请建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T11:09:32.003

奇怪的是，前几天晚上我正在和乔恩讨论这个问题！有一个优先级问题——被覆盖的方法是在基类中**定义**的，所以为了“最佳方法”的目的，重载（即使是隐式转换）是更可取的，因为它是在最具体的类型（子类）中定义的）。

如果您重新声明了方法 ( `new`)，那么它将获得优先权，但您不能在同一类型中使用具有相同名称`override`和`new`签名的方法 - 您必须添加额外的继承级别才能实现这一点。

确切的逻辑在 ECMA 334 v4 的 14.5.5 和 14.4.2 中有详细说明。

基本上，要使基本方法可调用，您要么必须转换为基本类型，要么添加 shim 方法：

```
public void MyMethod2(int param) {base.MyMethod(param);} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T10:57:55.037

我猜想在调用 MyMethod(5) 时，5 也可以是 double 或 int，并且 double 具有更高的优先级。您是否尝试过调用 MyMethod((int)5)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T11:14:17.593

我按照建议做了以下更改：

> ```
>  Derived1 objD = new Derived1();
>         objD.MyMethod((int)5); 
> ```

输出不变

> 基数：MyMethod - Int 5
> 
> Derived1:MyMethod - Int 5
> 
> Derived1:MyMethod - 双 5

# email - 是否可以将分页符放入 HTML 电子邮件中？

> ID：377507
> 
> 赞同：5
> 
> 时间：2008-12-18T10:52:13.647
> 
> 标签：email, html-email, page-break

我知道可以使用 CSS 为网页添加分页符，以便在打印时使用。

我也知道 HTML 电子邮件中的 CSS 支持很差。

那么，有没有办法在打印 HTML 电子邮件时生成分页符？或者考虑到电子邮件客户端的多样性，这只是一个愚蠢的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T12:50:52.580

请参阅[这篇](http://www.campaignmonitor.com/css/)关于 HTML 电子邮件中的 CSS 支持的文章，它列出了哪些是可能的，哪些是不可能的。

您也可以在此处验证您的 CSS：http: [//getfractal.com/](http://getfractal.com/)一旦您进行了任何更改，它将通知您哪些客户端是兼容的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T12:10:35.547

我会说用标准的 CSS 方式来做。它适用于一些电子邮件阅读代理。没有**其他**方法可以提示分页符。如果人们可以打印消息真的很重要，那么也许也可以通过网络提供消息并告诉收件人打印那个消息。

# linq-to-sql - 停止 LINQ 查询实体集（和分组）

> ID：377509
> 
> 赞同：0
> 
> 时间：2008-12-18T10:53:03.643
> 
> 标签：linq-to-sql

这是我的数据库的简要描述。您遇到的**问题**有**类别**。我有各种查询，根据各种标准得到问题，但这对问题并不重要。

我希望能够列出我查询过的问题，例如，昨天发生的问题并按类别对它们进行分组。

我有一个方法：

```
public static IEnumerable<Category> GroupIssuesByCategory(IEnumerable<Issue> issues)
{
    return from i in issues
        group i by i.Category into c
        select c.key
} 
```

类别有一个很好的映射，允许它在其中列出问题。这对我想要的很好，但在这种情况下，它将撤回该类别中的**所有**问题，而不是我提供的集合中的问题。我该如何解决这个问题？

我可以解决这个问题吗？

* * *

我弄清楚了为什么我的原始代码没有编译并更新了问题。

唉，我仍然有我的主要问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T11:12:10.580

我不确定问题的第二部分，但您的编译问题是分组的返回类型是`IEnumerable<IGrouping<Category, Issue>>`，我认为这是您希望从您的方法返回的内容。此外，您实际上并不需要该`into c select c`位-仅当您想对分组结果进行一些处理以获得不同的列表时才有用。

`IGrouping<S,T>`有一个 key 属性，它是`Category`value，是`IEnumerable<T>`给你`Issues`in that的列表`Category`。

试试这个作为你的方法：

```
public static IEnumerable<IGrouping<Category, Issue>> GroupIssuesByCategory(IEnumerable<Issue> issues)
{
    return from i in issues
        group i by i.Category;
} 
```

# xml - 使用 JSTL XML taglib 时出错 - 属性 xml 不接受任何表达式

> ID：377513
> 
> 赞同：1
> 
> 时间：2008-12-18T10:55:42.047
> 
> 标签：xml, jstl, xslt, el, taglib

当我尝试使用 JSTL XML 标签库时出现以下错误：

```
/server-side-transform.jsp(51,0) 
According to TLD or attribute directive in tag file,
attribute xml does not accept any expressions 
```

我正在研究 tlds 等，但如果有人知道这是什么可以节省我一些时间，将不胜感激！

如果有帮助，我会在运行示例代码时遇到此错误

```
<c:set var="xml">
  <paragraph>
    This document uses <bold>unusual</bold> markup,
    which we want to replace with <bold>HTML</bold>.
  </paragraph>
</c:set>

<c:set var="xsl">
  <?xml version="1.0"?>
  <xsl:stylesheet
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

    <xsl:template match="paragraph">
      <p><xsl:apply-templates/></p>
    </xsl:template>

    <xsl:template match="bold">
      <b><xsl:value-of select="."/></b>
    </xsl:template>
  </xsl:stylesheet>

</c:set>

<x:transform xml="${xml}" xslt="${xsl}"/> 
```

在我的 /server-side-transform.jsp - 我的 taglib 指令是：

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jstl/xml" prefix="x" %> 
```

我在/WEB-INF/lib 中有standard.jar 和jstl.jar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T11:21:10.030

您的代码选择了 x-1_0.tld 的“不正确”版本，可能是由于类路径问题。例如，我在当前的类路径中看到，我有一个版本的 x-1_0.tld，它允许在此标记中使用运行时表达式 ${syntax}，而另一个版本则不允许。standard.jar 中的那个不允许 EL 表达式，而我在 jetty 中的那个允许。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T11:23:59.167

我发现 Sun 文档将 URI 称为

[http://java.sun.com/jsp/jstl/xml](http://java.sun.com/jsp/jstl/xml)

该标签现在被正确调用，所以这是问题的原因；但是我在 doEndTag() 中收到 NullPointerException ......呵呵

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-05T20:37:30.213

不完全是，你应该使用

`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>`

使用 JSTL 1.1。

不幸的是，standard.jar 文件包含许多版本的 *.tld 标记，例如。

*   c-1_0-rt.tld
*   c-1_0.tld
*   域名
*   fmt-1_0-rt.tld
*   fmt-1_0.tld
*   fmt.tld
*   域名
*   allowedTaglibs.tld
*   scriptfree.tld
*   sql-1_0-rt.tld
*   sql-1_0.tld
*   sql.tld
*   x-1_0-rt.tld
*   x-1_0.tld
*   域名

所以通过使用

`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>`

您告诉 jsp 专门使用 JSTL 1.1，顺便说一句，它修复了上述问题，如果这不起作用，请尝试使用

`<%@ page isELIgnored="false" %>`

这基本上告诉 jsp 评估 EL。

/srm

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-15T11:26:14.140

使用以下代码：

```
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %> 
```

代替：

```
<%@ taglib uri="http://java.sun.com/jstl/core" prefix="c" %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T11:17:09.047

我意识到这个问题是很久以前提出的，但我遇到了同样的问题。就我而言，我遵循的示例指示我使用：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %> 
```

当我应该使用时：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

**在 uri 中的额外jsp**突然出现在我面前之前，我盯着解决方案看了一会儿。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-05T12:47:46.930

更改 <%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %> 不适合我。对于我的项目（web-app version="3.0"）IDE（MyEclipse），我看到了 x.tld 的配置文件。选择的错误是不允许选择外观 ${} 或 <%=%>。所以我有办法在 web.xml 中作弊。

1.  `<jsp-config> <taglib> <taglib-uri>/huang</taglib-uri> <taglib-location>/WEB-INF/x.tld</taglib-location> </taglib> </jsp-config>` 添加到 web.xml

2.  向我的 jsp 文件声明新的 taglib-url 名称“huang”，如下所示：

    `<%@ taglib prefix="x" uri="/huang" %>`

3.  使用`<x:out select="$casexml//案例//${node.name }" />`

    我可以得到正确的结果

# sql - 什么时候应该对 SQL Server 中的日志文件使用自动收缩？

> ID：377522
> 
> 赞同：7
> 
> 时间：2008-12-18T10:59:15.957
> 
> 标签：sql, sql-server, database

我的 SQL Server (2000) 上的日志文件过大时遇到了一些问题。Microsoft 不建议对日志文件使用自动收缩功能，但由于它是一项功能，因此它在某些情况下一定很有用。有谁知道什么时候适合使用自动收缩属性？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-18T14:28:38.467

您的问题不是您需要定期自动收缩，而是您需要定期备份日志文件。（我们每 15 分钟备份一次。）备份数据库本身是不够的，还必须备份日志。如果您不备份事务日志，它将不断增长，直到占用驱动器上的所有空间。如果您备份它，它会释放空间以供重复使用（在第一次备份后您可能仍需要缩小以将日志缩小到更合理的大小）。如果您不需要能够从事务中恢复（除非您的整个数据库包含从另一个源加载并且可以轻松重新加载的表，否则您应该能够做到这一点。），然后将您的日志设置为simlpe 恢复模式。

自动收缩不是一个好主意的一个原因是您将频繁地增加事务日志，这会降低性能。如果你备份日志，你会得到一个相对稳定的大小（备份之间的时间段内事务日志通常使用的空间量），那么如果有异常大的量，日志只会偶尔增长交易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-18T11:10:22.343

我对此的看法是，当您有许多相当小的数据库由于添加的数据而经常变大，然后有很多空白空间时，自动收缩很有用。您也不必介意当文件频繁增长和缩小时，它们会在磁盘上产生碎片。我永远不会在关键数据库或大于 2 GB 的数据库上使用自动收缩，因为您永远不知道收缩操作何时开始，并且在收缩完成之前对数据库的访问将被阻止。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-18T13:57:41.540

您永远不应该打开自动收缩功能。它以多种方式导致性能下降。文件系统和索引变得碎片化并且非常耗费资源。如果您正确管理备份，也没有必要。

[阅读 Paul Randal 关于服务器故障的答案，然后](https://serverfault.com/questions/20909/is-it-safe-to-have-sql-server-auto-shrink-turned-on/20910#20910)**对自动收缩**说不！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T11:04:06.180

当我们有一个巨大数据库的演示版本时，我曾经使用它，它占用了笔记本电脑上的大量空间，所以我们用它来减小大小。

关键是只有在数据基本上被扔掉的时候才使用它。

作为备份策略的一部分，您应该定期截断日志。

# wpf - 将 StackPanel 的宽度限制为最小的子元素

> ID：377523
> 
> 赞同：0
> 
> 时间：2008-12-18T11:01:24.813
> 
> 标签：wpf, layout, stackpanel

如何将垂直 WPF`StackPanel`的宽度限制为它包含的最窄项目。的`StackPanel`宽度不得大于任何其他子元素的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:18:02.303

不幸的是，*IValueConverter*方法并不总是有效；例如，如果将子项静态添加到*StackPanel* ，则子集合在绑定时将为空（所以我发现）。最简单的解决方案是创建一个自定义面板：

```
public class ConstrainedStackPanel : StackPanel
{
    public ConstrainedStackPanel()
    {
    }

    protected override Size MeasureOverride(Size constraint)
    {
        foreach (var item in this.Children)
        {
            // FrameworkElement has the Width property we care about.
            FrameworkElement element = item as FrameworkElement;
            if (element != null)
                constraint.Width = Math.Min(element.Width, constraint.Width);
        }

        return base.MeasureOverride(constraint);
    }

    protected override Size ArrangeOverride(Size arrangeSize)
    {
        foreach (var item in this.Children)
        {
            // FrameworkElement has the Width property we care about.
            FrameworkElement element = item as FrameworkElement;
            if (element != null)
                arrangeSize.Width = Math.Min(element.Width, arrangeSize.Width);
        }

        return base.ArrangeOverride(arrangeSize);
    }
} 
```

您可以使用如下 XAML 所示的面板：

```
<StackPanel Margin="5">
    <TextBlock Text="StackPanel:" FontWeight="Bold" />
    <StackPanel x:Name="panelA">
        <Button Width="100" Content="100" />
        <Button Width="200" Content="200" />
        <Button Width="300" Content="300" />
        <Button Width="400" Content="400" />
    </StackPanel>
    <TextBlock Text="ConstrainedStackPanel:" FontWeight="Bold" Margin="0,10,0,0" />
    <l:ConstrainedStackPanel x:Name="panelB">
        <Button Width="100" Content="100" />
        <Button Width="200" Content="200" />
        <Button Width="300" Content="300" />
        <Button Width="400" Content="400" />
    </l:ConstrainedStackPanel>
</StackPanel> 
```

这将呈现如下内容：

## ![截屏](https://farm4.static.flickr.com/3133/3118591068_b1edcce6c0_m.jpg)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T13:04:11.553

你不能。垂直方向的`StackPanel`总是分配与其子请求一样多的宽度。

你最好写一个自定义面板来实现你想要的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-02T19:33:05.627

我已经尝试绑定到 ActualWidth 属性，甚至创建了一个转换器来抵消该值，这很好用，但有一个例外：当您扩展容器的大小时，宽度会正确更新，但是当使容器更小时，实际内容的宽度变小，但任何滚动查看器的“页面宽度”都不会。我确定有办法解决这个问题，但我还没有找到。

# pointers - 引用与指针的执行速度

> ID：377529
> 
> 赞同：10
> 
> 时间：2008-12-18T11:05:34.507
> 
> 标签：pointers, compiler-construction, reference, jit, vm-implementation

我最近阅读了关于托管语言是否比本地语言（特别是 C# 与 C++）慢（或快）的讨论。一位参与讨论的人说，托管语言的 JIT 编译器将能够对引用进行优化，这在使用指针的语言中是不可能的。

我想知道的是在引用而不是指针上可以进行什么样的优化？

请注意，讨论是关于执行速度，而不是内存使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T11:52:41.120

在 C++ 中，与优化方面相关的引用有两个优点：

1.  引用是常量（在其整个生命周期内引用同一个变量）

    正因为如此，编译器更容易推断出哪些名称引用了相同的底层变量——从而创造了优化机会。不能保证编译器在引用方面会做得更好，但它可能......

2.  假定引用指向某物（没有空引用）

    可以创建“不引用任何内容”（相当于 NULL 指针）的引用，但这不像创建 NULL 指针那么容易。因此，可以省略对 NULL 的引用检查。

但是，这些优势都没有直接延续到托管语言，所以我看不出在您的讨论主题的上下文中的相关性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T11:20:28.487

Wikipedia 中提到了[JIT 编译](http://en.wikipedia.org/wiki/Just-in-time_compilation)的一些好处：

> JIT 代码通常比解释器提供更好的性能。此外，在某些或许多情况下，它可以提供比静态编译更好的性能，因为许多优化仅在运行时可行：
> 
> 1.  编译可以针对目标 CPU 和应用程序运行的操作系统模型进行优化。例如，当 JIT 检测到 CPU 支持它们时，它可以选择 SSE2 CPU 指令。使用静态编译器必须编写两个版本的代码，可能使用内联汇编。
> 2.  系统能够收集有关程序在其所在环境中实际运行情况的统计信息，并且可以重新排列和重新编译以获得最佳性能。但是，一些静态编译器也可以将配置文件信息作为输入。
> 3.  该系统可以进行全局代码优化（例如库函数的内联），而不会失去动态链接的优势，也不会产生静态编译器和链接器固有的开销。具体来说，在进行全局内联替换时，静态编译器必须插入运行时检查，并确保在对象的实际类覆盖内联方法时会发生虚拟调用。
> 4.  尽管这对于静态编译的垃圾收集语言是可能的，但字节码系统可以更轻松地重新排列内存以获得更好的缓存利用率。

我想不出与使用引用而不是指针直接相关的东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T12:39:18.797

一般来说，引用可以从不同的地方引用同一个对象。

“指针”是实现引用的机制的名称。C++、Pascal、C... 有指针，C++ 提供了另一种称为“引用”的机制（略带其他用例），但本质上这些都是通用引用概念的实现。

因此，根据定义，引用没有理由比指针快/慢。

真正的区别在于使用 JIT 或经典的“预先”编译器：JIT 可以将数据考虑在内，这些数据不适用于预先编译器。它与“参考”概念的实现无关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T12:48:15.813

其他答案是对的。

我只想补充一点，任何优化都不会产生任何影响，除非它是在程序计数器实际上花费大量时间的代码中，例如在不包含函数调用的紧密循环中（例如比较字符串）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T22:21:13.217

托管框架中的对象引用与 C++ 中的传递引用非常不同。要了解它们的特殊之处，请想象以下场景将如何在机器级别处理，而无需垃圾收集的对象引用： 方法“Foo”返回一个字符串，该字符串存储到各种集合中并传递给不同的代码片段。一旦不再需要该字符串，就应该可以回收用于存储它的所有内存，但不清楚哪段代码将是最后一个使用该字符串的代码。

在非 GC 系统中，每个集合要么需要拥有自己的字符串副本，要么需要保存包含指向共享对象的指针的内容，该共享对象保存字符串中的字符。在后一种情况下，共享对象需要以某种方式知道指向它的最后一个指针何时被消除。有多种方法可以处理这种情况，但所有这些方法的一个基本共同方面是，当指向共享对象的指针被复制或销毁时，需要通知它们。这样的通知需要工作。

相比之下，在 GC 系统中，程序用元数据装饰，以说明在任何给定时间将使用哪些寄存器或堆栈帧的一部分来保存根对象引用。当垃圾收集周期发生时，垃圾收集器将不得不解析这些数据，识别并保存所有活动对象，并核对其他所有内容。然而，在所有其他时间，处理器可以以它喜欢的任何模式或顺序复制、替换、洗牌或销毁引用，而无需通知任何涉及的对象。请注意，在多处理器系统中使用指针使用通知时，如果不同的线程可能复制或销毁对同一对象的引用，则需要同步代码来使必要的通知线程安全。相比之下，在 GC 系统中，

# entity-framework - Linq to Entities / Entity Framework 跨edmx“加入”

> ID：377530
> 
> 赞同：5
> 
> 时间：2008-12-18T11:06:10.373
> 
> 标签：entity-framework, linq-to-entities

我有两个实体，每个实体来自不同的数据库，因此有不同的 edmx 文件。但是，它们之间存在推断的关系。

`Foo`例如有很多`Bar`s。

用最少的数据库调用在 EntityFramework 中执行此连接的最简单方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T13:48:36.643

您可以通过添加跨模型导航属性来做到这一点。这需要手动编辑 EDMX。[这里](http://blogs.msdn.com/adonet/archive/2008/11/25/working-with-large-models-in-entity-framework-part-2.aspx "在实体框架中使用大型模型")有一个示例，包括 LINQ to Entities 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-22T13:34:19.820

您可以通过使用视图来表示其他数据库中的数据来做到这一点。阅读[EF 中的跨数据库连接](http://www.britishdeveloper.co.uk/2010/06/cross-database-joins-entity-framework4.html)

# c# - 获取使用 C#/ASP.NET 创建的 Scaffold 代码的最快方法

> ID：377538
> 
> 赞同：13
> 
> 时间：2008-12-18T11:12:11.077
> 
> 标签：c#, asp.net, scaffolding, skeleton-code

在任何项目的开始，一旦你有了你的对象模型，就会有一段乏味的时期，因为你需要编写所需的骨架代码。

是否有任何工具可以帮助我完成这项任务（如果可能，包括单元测试框架），有点像 Rails 中的脚手架功能？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-18T11:32:11.023

这实际上取决于您使用的框架堆栈：

*   [Monorail + ActiveRecord 的脚手架](http://www.castleproject.org/monorail/documentation/trunk/integration/arscaffold.html)
*   [ASP.NET MVC + Linq to SQL](http://www.twinforms.com/aspmvc-home.htm)
*   [Web 表单 + 动态数据](http://weblogs.asp.net/scottgu/archive/2007/12/14/new-asp-net-dynamic-data-support.aspx)
*   [ASP.NET MVC + 亚音速](http://blog.wekeroad.com/blog/subsonic-mvc-adding-updated-for-beta-1/)

除此之外，您始终可以使用[CodeSmith](http://www.codesmithtools.com/)或[MyGeneration编写自己的“脚手架”](http://www.mygenerationsoftware.com)

另请参阅[此相关问题](https://stackoverflow.com/questions/317566/creating-web-forms-from-a-database-schema)

# c# - 安装到 GAC 的 DLL 路径

> ID：377551
> 
> 赞同：27
> 
> 时间：2008-12-18T11:18:32.047
> 
> 标签：c#, dll, file, gac

如何获取（可能）在 GAC 中注册的 DLL 的（物理）安装路径？此 DLL 是一个控件，它可以托管在 .Net 应用程序以外的事物中（包括 VS 以外的 IDE...）。

当我使用 System.Reflection.Assembly.GetExecutingAssembly().Location 时，它会在 winnt\system32 中提供 GAC 文件夹的路径 - 或者在 VS 的设计模式下提供 VS IDE 的路径。

我需要获取实际安装物理 dll 的路径 - 或 VS 的 bin/debug 或（发布）文件夹。

原因是我需要在此文件夹中获取一个 XML 文件，其中包含在设计模式和运行时都使用的配置设置。

或者如何最好地处理这种情况？我目前有一个用于设计模式的可疑网络位置...（不要认为 ApplicationData 文件夹会删除它（但有 .Net 版本，因为它是通过 ClickOnce 安装的，并且可以使用 Clickonce 数据文件夹） ）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-19T21:53:01.857

如果将某些内容放入 GAC，它实际上会被复制到 %WINDIR%\assembly 下的某个位置，例如

```
C:\WINDOWS\assembly\GAC_32\System.Data\2.0.0.0__b77a5c561934e089\System.Data.dll 
```

我假设您在检查安装在 GAC 中的相关程序集的位置时会看到类似的内容。这实际上是正确的。（在 .NET 1.1 中，当您查看 GAC 程序集的属性时，会列出一个“代码库”，但这只是在您运行 gacutil 时向您显示原始文件的位置 - 它实际上并未指示将加载什么。 ) 您可以[在此处](http://www.grimes.nildram.co.uk/workshops/fusWSFour.htm)阅读更多相关信息。

长话短说，你可能无法做你想做的事。`Assembly.GetExecutingAssembly()`您可能希望将行为切换为相对于主应用程序程序集 ()，而不是查看与正在加载的某些程序集 () 的关系`Assembly.GetEntryAssembly()`，或者将文件放在某个众所周知的位置，可能基于获取的环境变量放。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T12:45:38.190

您可以选择将资源嵌入到此 DLL 中吗？这样，DLL 在磁盘上的位置并不重要，因为 XML 文件将跟随它。然后，您可以执行以下操作：

```
Stream s = Assembly.GetExecutingAssembly().GetManifestResourceStream("MyProject.MyXmlFile.xml");
XmlDocument d = new XmlDocument();
using (StreamReader r = new StreamReader(s))
{
    d.LoadXml(r.ReadToEnd());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-12-06T17:46:03.233

在程序集被影子复制到全局程序集缓存后，我认为没有任何元数据可以追溯源程序集的位置。

您想通过在 GAC 中部署来实现什么目标？如果只是为了 CLR 来解决问题，那么还有另一种方法可以解决您的问题。

不要 gac 安装 dll，而是在注册表中添加以下键，（在尝试解析程序集时，CLR 会查找此注册表位置）

```
32 bit OS : HKEY_LOCAL_MACHINE\SOFTWARE\\Microsoft\.NETFramework\v4.0.30319\AssemblyFoldersEx\foo

64 bit OS : HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework\v4.0.30319\AssemblyFoldersEx\foo 
```

对于 foo 键（使用您喜欢的名称而不是 foo），您将看到键名称“默认”。双击它并将值设置为您的程序集所在的位置。（首选绝对路径）

现在从 Visual Studio 中，您的客户端应该能够在“添加引用”对话框中看到您的程序集并可以使用它。

现在来到你的实际问题，

`Assembly.GetExecutingAssembly()`将返回存在已安装 dll 的位置的路径。从那里找到 XML 文件。:)

注意：在注册表项中，4.0.30319 是您的应用程序目标的 .NET Framework 版本。改用您的应用程序目标的任何版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-06T18:44:15.233

如果您正在寻找 GACed DLL 在文件系统中保存的物理位置，请尝试以下操作： start-->run-->c:\windows\assembly\gac 如果在那里找不到与 DLL 相关的文件夹，您可以在 Windows 资源管理器中创建一个“向上”文件夹，以将 c:\windows\assembly 中的所有内容显示为文件夹结构。然后，您可以在 GAC_MSIL 或任何其他文件夹下查找您的 DLL....

干杯，斯里

# java - 最佳实践：网络通信

> ID：377556
> 
> 赞同：4
> 
> 时间：2008-12-18T11:22:36.797
> 
> 标签：java, python, networking

我正在使用 Python 服务器和 Java 客户端编写简单的网络聊天。但是我想到了一个问题：

我应该使用哪种“网络协议”进行通信？对我来说有一些可能性：

*   YAML：很好解析，问题：解析的对象包含语言特定的部分
*   XML：易于解析，简单任务的开销很大
*   创建自己的“语言”：转义问题，但最灵活

那么对此的最佳做法是什么？还有其他选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T11:30:18.607

检查 JSON。它兼容多种语言（包括 Python 和 Java），并且是人类可读的。 [http://www.json.org/](http://www.json.org/)

如果您打算进行 Web 开发并打算使用 Javascript，那么 JSON 可能是一个不错的选择，因为它最初是为 Javascript 设计的。此外，与 YAML 相比，在 Python 中使用 JSON 就像编写一样简单：（`import json`它是标准库的一部分）。

您可以查看以下[页面](http://webignition.net/articles/xml-vs-yaml-vs-json-a-study-to-find-answers/)，比较 XML、JSON 和 YAML。似乎它们在编码延迟和使用的内存方面存在差异，这可能会指导您的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T11:33:35.107

对于您的需求，它可能有点重量级，但是您是否考虑过为您的聊天客户端实现[XMPP协议？](http://xmpp.org/)

如果您这样做，那么您的系统可以与 Google Talk、Jabber、iChat 等进行互操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-21T04:12:47.703

如果您希望协议也抽象出方法调用，请查看[XML-RPC](http://en.wikipedia.org/wiki/Xml-rpc)，Java 和 Python（以及几乎所有其他东西）都对它有很好的支持。

对象编组和解组是可靠的，可以处理 unicode、列表和字典，并产生非常易于人类阅读的输出：

```
>>> import xmlrpclib
>>> print xmlrpclib.dumps((1, u"\xdd\xde"), methodname="my_method")
<?xml version='1.0'?>
<methodCall>
<methodName>my_method</methodName>
<params>
<param>
<value><int>1</int></value>
</param>
<param>
<value><string>ÝÞ</string></value>
</param>
</params>
</methodCall> 
```

基本上，它具有 Mapad 提到的关于 JSON 的好处，具有方法调用的额外功能，但代价是（可能是边际的）处理成本和（可能是边际的）编程复杂性。

[Doug Hellman在此处](http://blog.doughellmann.com/2008/07/pymotw-xmlrpclib.html)为 Python XML-RPC 库的客户端和服务器部分提供了很好的教程。

# actionscript-2 - 从另一个项目调用 ActionScript 2.0 事件

> ID：377558
> 
> 赞同：0
> 
> 时间：2008-12-18T11:23:41.430
> 
> 标签：actionscript-2

我有一个包含一个小库的 ActionScript 2.0 文件。这个库解析一个 XML 文件。我在 XML 的 onLoad 函数上分配了一个 onComplete 函数。

例如：

```
------------ mysmalllib.as --------------
r_xml = new XML();
r_xml.onLoad = onComplete;

function onComplete(success:Boolean) {
           // some stuff
           OtherFunction();
        }

------------ mainProgram.fla --------------
import mylib.mysmalllib;

var flashCall = new mylib.mysmalllib;

function toBeCalled() {
        //
}
------------------------------------------------ 
```

我想要的是，每当调用 OtherFunction（存在于 mysmalllib 中）时，我的主程序中的另一个函数就会被通知（toBeCalled）。我想这与调度有关，但我在 AS 方面做得不好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T12:44:35.540

我做了一个快速的谷歌搜索，发现了这个：

[http://flash-creations.com/notes/asclass_eventdispatcher.php](http://flash-creations.com/notes/asclass_eventdispatcher.php)

它似乎涵盖了您需要了解的有关 AS2 中的 EventDispatcher 的内容

# html - 对 Javascript 文件的奇怪路径引用？

> ID：377561
> 
> 赞同：0
> 
> 时间：2008-12-18T11:24:20.133
> 
> 标签：html, path, rewrite

在 HTML 页面中，对 Javascript 文件的引用被重写，最后添加了一个子目录：

/+sfgRmluamFuX1R5cGU9amF2YV9zY3JpcHQmRmluamFuX0xhbmc9dGV4dC9qYXZhc2NyaXB0+。

为什么会这样？它会成为潜在问题的根源吗？

在我们的源代码中，我们有这样的 Javascript 包括：

在开发机器和测试服务器上一切正常。但是，当安装在生产服务器上时，代码会以某种方式发生更改，如下所示：

这适用于每个脚本。由于我们遇到了一些 Javascript 的问题，我想知道这是否是它们的原因。我用谷歌搜索了很长一段时间，并没有找到任何关于此代码添加的好的解释，我发现的唯一一个是这可以由代理服务器生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T11:27:11.000

编辑：代理问题。请参阅 Ivan 对自己问题的解决方案。

*这真的是 HTML 吗？您不会碰巧在 ASP.NET 中，因为它看起来很像无 cookie 会话字符串。您可以通过检查 firebug 的 net 选项卡很容易地测试以确保您的脚本已加载，或者仅`alert('LOADED!')`在其中放入一个失败。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T12:54:32.650

这绝对是代理问题。我们从另一个地方访问它，它工作正常，这些有趣的补充没有出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T11:32:08.587

我们将 Java 和 JSF 与 JBoss 一起使用。

最初的代码是这样的：

```
<script src="/js/tiny_mce/tiny_mce.js" type="text/javascript"><!--

//--></script> 
```

它被重写为这个：

```
<script src="/js/tiny_mce/+sfgRmluamFuX1R5cGU9amF2YV9zY3JpcHQmRmluamFuX0xhbmc9dGV4dC9qYXZhc2NyaXB0+/tiny_mce.js" type="text/javascript"><!--

//--></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T16:57:24.017

这是所有可能遇到相同问题的人的解决方案。这是由于我们的安全政策。我们将该网站添加到我们的受信任区域中，这很好。

# ms-access - 不使用 GroupHeader 访问报告 PageHeader

> ID：377570
> 
> 赞同：0
> 
> 时间：2008-12-18T11:27:09.643
> 
> 标签：ms-access, report

我坚持以下几点：

我有一个 Access2003 报告“rptInvoices”。组级别在 CustomerID 和 PackingListID 上。

我想要实现的是发票的每第二页（或第三页等）都以页面顶部的空白部分（比如 9 厘米）开始。为此，我将使用一个空的 PageHeader 部分。如果报表的属性 PageHeader 具有 NotWithGroupHeaderX 之类的值，这将很容易。

由于没有这样的值：如果该页面上有一个名为 grhCustomerID 的 GroupHeader，我如何隐藏报表上的 PageHeader？

也许我需要一种不同的方法，但我只是看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-03-16T12:45:06.687

在 groupheader中，将页眉`format event`设置`pageheadersection.visible`为`true`组页眉之后的页面打印页眉。在组页脚格式事件中，将页眉设置为`pageheadersection.visible`不`false`打印在具有组页眉的下一页的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T13:00:27.270

您可以在组头的格式事件中设置页眉的可见属性。

```
Private Sub GroupHeader0_Format(Cancel As Integer, FormatCount As Integer)
    Me.PageHeaderSection.Visible = False
End Sub

Private Sub Report_Page()
    Me.PageHeaderSection.Visible = True
End Sub 
```

# mysql - 计算 mySQL 列中某些数据的实例数

> ID：377574
> 
> 赞同：2
> 
> 时间：2008-12-18T11:29:38.810
> 
> 标签：mysql, aggregate-functions

我有一个名为 urltracker 的表，其中包含有关单击特定 URL 的次数的信息。该表结构为 4 列 id、urlclicked、referrer 和时间戳。每次单击 url 时，urltracker 都会在表中创建另一个条目。

我想要做的是显示一个特定的 url 和它被点击的次数，然后用户可以通过点击来深入了解数据，以显示这个 url 被点击的所有特定时间。

我不是 sql 专家，但这听起来我需要首先显示所有不同的 URL，然后是一个子查询，该查询显示这个特定 url 的所有条目。

我的想法是对的还是有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T11:37:21.947

像这样的东西应该可以解决问题：首先：

```
SELECT urlclicked, 
       COUNT(*)
  FROM urltracker
GROUP BY urlclicked 
```

然后当用户点击某个网址时：

```
SELECT id, 
       urlclicked, 
       referrer,
       timestamp
FROM urltracker
WHERE urlclicked = ?clickedUrl 
```

显示详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T11:36:23.727

要考虑的一件事是使用两个表 - 一个包含唯一 url 的表和另一个存储点击信息的表（或者使用唯一的序列号来加入它们，或者使用 url（因为它是唯一的））

但是要回答您的查询问题-是的，我将有一个查询来显示 URL，而第二个查询来获取特定 URL 的数据（仅当/当用户请求该信息时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T11:37:34.850

您应该能够执行以下操作来获取每个 URL 的总数：

```
SELECT urlclicked, COUNT(urlclicked) AS total
FROM urltracker
GROUP BY urlclicked 
```

这就是你所追求的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T11:50:23.917

是的，在某种程度上你是对的：

```
SELECT id, 
       tb1.urlclicked, 
       referrer,
       timestamp, tb2.totaltimesclicked
FROM urltracker as tb1
inner join 
(SELECT urlclicked, 
       COUNT(urlclicked) as totaltimesclicked
  FROM urltracker
GROUP BY urlclicked) as tb2
on tb1.urlclicked = tb2.urlclicked 
```

这将显示所有信息以及每个 url 被点击的次数。

# spring - JSP中的Spring WebFlow处理请求

> ID：377585
> 
> 赞同：1
> 
> 时间：2008-12-18T11:32:43.017
> 
> 标签：spring, spring-webflow-2

我是新手`Spring Webflow`，我正在使用自定义`FlowHandler`

我可以到达相应的控制器，但如果在请求对象中设置一个属性，我不会在 JSP 中得到它，即`View state`.

我该如何进行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-19T09:15:58.130

```
<on-start>      
   <evaluate expression="XXXControllerwsf.firstHit(flowRequestContext)" result="flowScope.res"/>
</on-start>
<decision-state id="urlcheck">
    <if test="flowScope.res.reurl== 'splash' " then="splash" else="change"/>
</decision-state>   
<view-state id="change" view="${flowScope.res.reurl}">       
</view-state>

<view-state id="splash" view="forward:/XXX/jsp1/XXXchange1.jsp">
    <transition on="buy" to="SignInSignUp"/>
</view-state>
</flow> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T14:55:15.963

您不应该在 spring webflow 中为您的请求属性设置任何内容 - 没有必要，除了 webflow 会进行一些内部请求重定向，并且您的属性可能会丢失。

您在流程中创建的所有变量都可以在视图中使用，就好像它们是通过向请求添加属性来设置的一样。您是通过标签创建它们还是通过标签执行一些服务调用来创建它们

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-12-19T09:14:57.710

嘿 Miceuz 感谢您的回复.....

```
<on-start>      
    <evaluate expression="XXXXControllerwsf.firstHit(flowRequestContext)" result="flowScope.res"/>
</on-start>
<decision-state id="urlcheck">
    <if test="flowScope.res.reurl== 'splash' " then="splash" else="change"/>
</decision-state>   
<view-state id="change" view="${flowScope.res.reurl}">       
</view-state>
<view-state id="splash" view="forward:/Jahia/jsp1/XXXXchange1.jsp">
   <transition on="buy" to="SignInSignUp"/>
</view-state>
</flow> 
```

在流程开始时，我正在调用一个扩展 FormAction 的 Contorller

在 firsthit 方法中，我设置了一个请求属性，如下所示

```
request.setAttribute("rajan", "rajanweww");
request.setAttribute("rajan", Object); 
```

如果我尝试在 JSP 中访问，将其设置为 null ...正如您所说的 Webflow 具有内部重定向.. 那么如何访问已在 Controller 中设置的值？

# java - JavaFX 现已出局：Applet 和 Java Desktop 是否正式消亡？

> ID：377593
> 
> 赞同：18
> 
> 时间：2008-12-18T11:36:40.810
> 
> 标签：java, applet, javafx

**JavaFX**现已推出，并且有承诺 Swing 将与 JavaFX 一起改进。丑陋的默认 UI 的日子已经一去不复返了，我们终于可以创建在质量方面与**Flash、Air 和 Silverlight**相媲美的引人入胜的应用程序。

1.  这是否意味着来自 1990 年代的**Java Applet已死且不值得再使用？**

2.  **Java Desktop**也一样：对于我们 Java 开发人员来说，使用它而不是 JavaFX 会吸引什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-18T12:02:54.657

在我看来，Java Applets 已经死了好几年了。我在 90 年代后期写了一些 - 在实习期间的俄罗斯方块游戏，例如在 40MHz ARM Acorn 机顶盒上演示。当然，我敢打赌，有些休闲游戏网站仍然有大量此类网站，因此它仍将受到支持，但积极的开发将会/已经下降。

在我看来，Java Web Start 是一种方便的技术。这仍然适用于 JavaFX，它只是该系统的另一个库。

JavaFX 将为 Java 提供超越技术工具（如 SQL Developer）、内部业务应用程序和服务器应用程序（它擅长的领域）的机会。我认为这是任何 Java 开发人员都值得学习的库之一，如果他们有时间的话。毫无疑问，Java 的用户界面库多年来一直非常缺乏或过于复杂。

然而，那里有很多竞争，而且它非常新（这意味着开发工具支持非常原始，与 Flash 和 Silverlight 相比）。人们也不喜欢下载大量的运行时环境，尽管宽带使许多人比 5 年前少了痛苦！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-19T20:06:42.147

我认为这个讨论有些误导。我也不喜欢applet 技术（而且JavaFX 也让我不知所措）。但是这个线程缺少的一点是，除非我弄错了，**JavaFX 是建立在 applet 技术之上的**。它们不相互竞争或相互排斥。[请在此处](http://www.javaworld.com/javaworld/jw-05-2008/jw-05-newapplet.html)和[此处](http://www.javaworld.com/javaworld/jw-05-2008/jw-05-applets.html)查看这些文章。

这可能是 Sun 有意造成的混淆，因为他们不希望 JavaFX 和 applet 在同一个句子中被提及，因为 Applets 有很多问题。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-11T16:49:57.833

Java Applet 并没有死。

他们的历史很糟糕，有几个原因：

*   大多数平台在整个 90 年代都有糟糕的浏览器插件，一直到 2000 年代，这让 Applets（在一定程度上也包括 Java）以速度慢和下载量大而著称。
*   实际的 Applet 平台为每个 applet 创建了一个新的 VM，这进一步造成了迟缓，尤其是在 Applet 启动时。
*   很多 Applet 开发者没有尽心尽力缩小他们压下的 jar 的大小，甚至进一步造成了呆滞的印象

带来 JavaFX 的改进也带来了 Applet 的改进（它们是一回事）。虚拟机可以共享，缓存比以前更好。此外，更高的平均用户带宽可以帮助即使设计不佳的小程序部署也能快速启动。如果你沿着安装基数和平台能力的轴线来看，在我看来，Applet 仍然相当高，如果不是顶部的话。

JavaFX 很酷，但它需要额外的运行时，而且它的许多部分只是 Applet 平台之上的语法糖。由于这个原因，JavaFX 共享了 Applet 今天几乎所有的问题

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-12-19T20:12:32.417

Java Applet 的消亡不是因为 applet 的概念，而是**因为用于 Web 浏览器的 JRE 插件非常糟糕**。

事实上，Flash 证明了内嵌交互内容的作用。

JavaFX 是一种编程富互联网应用程序的新方法——本质上等同于 Java 小程序或 Flash 内容。新的 JRE 运行时（1.6.0_10，又名“Update 10”）包括许多特性，使在浏览器上下文中运行 Java 更加可口。

**JavaFX != Java 桌面**. 两者完全不同，并且每个都在开发人员的工具箱中占有一席之地。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-01-11T20:42:28.800

实际上，如果 Sun 没有输掉与 Microsoft 的公关和技术战，Java applet 是一种很好的技术，它本来可以像 Flash 一样无处不在。

微软当时正在推动 DirectX 控件，并利用 IE 市场份额来对抗小程序。我记得当时做了一些基准测试：3 MB 的 Java 小程序（很大），从本地磁盘加载（以排除网络加载时间），在 Opera 中启动大约需要 5 秒。不知何故，相同的小程序在 IE 中启动大约需要 2 分钟。

所以，并不是技术很烂。并不是因为小程序太大，所以速度慢；它们很慢，因为当时占主导地位的浏览器故意让它们变慢。:)

我猜 JavaFX 是 Sun 在不同的时间和不同的市场尝试从 applet 中重振许多想法的尝试。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-12-18T12:12:54.013

尽管这最终可能是真的，但目前 JavaFX 缺乏控件、不支持移动设备以及其他使其“尚不存在”的缺陷

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-17T11:38:13.037

1.  这是否意味着来自 1990 年代的 Java Applet 已死且不值得再使用？

JavaFX 和相关的更改是重振小程序空间的一种尝试 - 小程序总是被糟糕的插件实现和 flakeu`y 桥接器所困扰。这已经得到了改进——尽管仍然需要更多的工作——但最终 Sun 已经认识到它需要工作并且已经采取了一些措施。小程序的定位比以往任何时候都好。在你提到的竞争对手中——Flash、Air 和 Silverlight——我认为你错过了关键竞争对手——浏览器/javascript——浏览器制造商也在解决关键平台的弱点——javascript 性能、进行任意绘图的能力（即画布等） . 对于低端要求，我认为纯粹的浏览器方法会胜出——对于高端图形——JavaFX 有机会。

2.  Java Desktop 也是如此：对于我们 Java 开发人员来说，使用它而不是 JavaFX 会吸引什么？

作为 Java 桌面应用程序的大型开发人员，缺少的一件事是一套体面的基本小部件和玩游戏的时间！它需要一个杀手表实现——你可以嵌入摇摆，但这有什么意义。现在我可以自己写了，这并不是我在我的工作中增加价值的地方。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-30T21:57:14.070

**1 - 这是否意味着来自 1990 年代的 Java Applet 已死且不值得再使用？** 随着 Java 插件的更新，所有小程序，而不仅仅是基于 JavaFX 的小程序，都得到了改进的用户体验和性能。话虽如此 - 我认为那里没有很多（如果有的话）杀手小程序。如果有 - 永远不需要 JavaFX。

**2 - 与 Java Desktop 相同：对于我们 Java 开发人员来说，使用它而不是 JavaFX 会吸引什么？** 如果您正在构建 GUI 应用程序并希望在 Java 中运行它 - 特别是跨多个平台（例如桌面、小程序和移动设备）以及更容易与具有实际 Photoshop/GIMP 技能的人一起工作 - JavaFX 是您的最佳选择因为它是专门为这种类型的过程设​​计的。但是，请记住 JavaFX 可以调用 Java 代码，也可以进行远程调用（返回 XML 或 JSON）。我认为最有可能的集成点是使用 JavaFX 进行 UI 和结果缓存，但所有繁重的编码逻辑都将在服务器上。如果您可以让您的汇编程序发出 XML 或 JSON，则可以用 Java 或 .NET 或汇编程序编写它：)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-18T12:55:43.520

我同意其他人的观点，Java Applets 已经死了。JavaFX 可能会填补这一空白。但是，我只是看不到它会很快取代 Java Desktop。这就像说网络应用程序将取代所有桌面应用程序一样。有些人确实相信这一点，我同意网络应用程序会越来越受欢迎，但是，桌面应用程序将继续占有一席之地很长一段时间。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-07-15T15:14:40.817

我们不能轻易写出小程序，因为网络上有太多好的代码。其中很多是由不是软件开发专家但在各种高端领域的专家编写的，他们试图借助当时的顶级技术 Java 小程序来解释和说明。他们可能没有时间学习新语言并重写他们的工作。许多人多年不活跃。

我还认为 Java 小程序更适合基于服务器端构建和代码审查的社区项目。各种花哨的用户友好工具可以使 Web 组件的开发变得快速和容易，但结果要么根本不可读，要么很难审查。

我们最近启动了仍然依赖于 Java 小程序技术的[Ultrastudio.org项目。](http://Ultrastudio.org)我想了很多关于放置更多语言和平台的想法，但最后不得不得出结论，要么不那么安全，要么做起来更复杂。

# wcf - Windows Mobile 开发 - 从哪里开始？

> ID：377604
> 
> 赞同：26
> 
> 时间：2008-12-18T11:39:36.763
> 
> 标签：wcf, architecture, windows-mobile, mobile

好的，我很快就会开始 Windows Mobile 开发的道路。我真的对这个主题一无所知，我正在寻找有经验的人，让我知道你可能知道的任何问题。

现在我什至没有简要说明需要什么，但假设应用程序将只不过是一堆用于更新数据的 CRUD 表单。我拥有的唯一其他要求知识是，当没有可用信号时，应用程序将需要支持离线存储。这反过来显然需要在信号返回时进行某种同步。

我最初的想法是，该应用程序主要是与 Web 服务层交互的前端。我假设 WCF 将成为构建这些服务的合适技术？我还认为 SQL Server CE 将是解决离线存储问题的好方法。

您认为在该领域内有用的任何知识将不胜感激。建议，链接，书籍任何赞赏。

编辑：已经注意到有两种方法可以进行离线同步。要么使用某种形式的消息队列，要么使用 SQL 同步工具。谁能提供一个很好的比较和介绍这些？

编辑 2：经过多一点挖掘，我得到的印象是，我可以在这里使用基本上 3 种不同的方法：

1.  嵌入数据库以查询然后在线同步，如果可以的话
2.  MSMQ 以及 .NET 远程处理
3.  WCF 与使用 Exchange Server 的 ExchangeWebServiceMailTransport 绑定。

现在，在第一个问题上提出了一些很好的观点，我想我在某种程度上理解了我将面临的问题。但我想获得更多关于 MSMQ 实现和使用 WCF 新绑定的信息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-18T12:24:27.360

这里是我迄今为止（大约 9 个月）的 .net Windows Mobile 开发经验中的几句话。

1.  好吧，你偶尔会联系。（或者更有可能偶尔断开连接）。您必须选择是使用队列消息传递（即 WCF/SOAP/XML 或类似的东西）还是数据库同步。我选择了 SQL 同步路由，因此我无法真正评论消息传递。SQL 同步路线并非一帆风顺！

2.  如果你像我一样使用 SQL compact 沿着同步路线走，你基本上有两个选择。SQL Server 合并复制或更新的 ADO.NET 同步服务。如果您选择前者，您需要非常小心您的数据库设计，以确保它可以轻松地在移动订阅者和发布者之间进行分区。您确实需要考虑冲突，并且拆分通常不会在规范化数据库设计中拆分的表是一种方法。您必须考虑设备离线一段时间并且发布者数据库（即主数据库）和/或订阅者更改相同数据的情况。当设备重新联机时会发生什么？即使您已经很好地划分了事物，这也可能意味着解决冲突。这是我被烧死的地方。

3.  滚动你自己的 DAL。不要尝试直接从 UI 代码中使用数据读取器等，也不要使用类型化的数据集。可能有第三方 DAL 可以与 Windows Mobile 一起使用（即我知道 LLBLGEN 可以，可能值得一看），但不支持 Linq-to-SQL，无论如何您需要一些轻量级的东西。DAL 的可能性不会太大，所以你自己滚吧。

4.  如果您使用的是 .net，您可能最终会想要一些未实现的平台功能。我建议使用这个廉价的框架来为您提供您所缺少的（尤其是与连接和电源管理相关的） - [http://www.opennetcf.com/Products/SmartDeviceFramework/tabid/65/Default.aspx](http://www.opennetcf.com/Products/SmartDeviceFramework/tabid/65/Default.aspx)

5.  Windows Mobile 设备在不使用时会部分关闭以节省电量。如果您正在进行轮询式设计，则需要每 x 分钟唤醒一次。普通的.net 计时器类不会这样做。您需要使用可从 OpenNetCF（上图）使用的平台功能。计时器类称为 LargeIntervalTimer，位于 OpenNetCF.WindowsCE 程序集/命名空间中（我认为）。

祝你好运！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T13:48:38.407

SqlCE 只是Windows Mobile 设备上可用于本地数据存储的选项*之一，尽管它是一个出色的数据库，但它也有局限性。*一方面，**SqlCE 在加密下将无法工作（期间）**（换句话说，如果您的用户加密了您的 SDF 文件所在的位置，您将无法再访问数据）。

SqlCE 的第二个（也是最关键的）弱点在于 RDA/Merge Replication 工具。 SqlCE 合并复制在复制期间网络连接可能断开的情况下**不是 100% 可靠的（在 Windows Mobile 设备中显然很常见）。**如果您喜欢尝试向客户解释丢失或损坏的数据，请继续使用 SqlCE 和合并复制。

Oracle Lite 是 SqlCE 的一个很好的替代品，尽管它在加密下也不能正常工作。如果加密是一个潜在的问题，您需要找到一个在加密下工作的数据库引擎（我不知道有一个），或者使用 XML 或其他东西编写您自己的持久性组件。

将 WM 应用程序编写为主要与 Web 服务实时交互的前端只能在始终连接的环境中工作。更好的方法是将应用程序编写为主要与本地数据（SqlCE、Oracle Lite、XML 或其他）交互的前端，然后创建一个单独的同步组件来处理推送和拉取数据。

再一次，SqlCE 合并复制漂亮而优雅地完成了这个推拉——它只是不能一直工作。如果您想要一个可靠地工作的复制机制，您必须自己编写。Oracle Lite 有一个称为快照表的东西，可以很好地用于此目的。Olite 中的快照表跟踪更改（如添加、更新和删除），并允许您单独查询更改并更新中央数据库（通过 Web 服务）以进行匹配。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-18T15:38:23.317

到目前为止，我刚刚在 SO 上发布的这个[帖子已被证明是一个很好的资源。](https://stackoverflow.com/questions/363158/net-compact-framework-tips-tricks-and-gotchas)

此外，[Windows Mobile MSDN WebCast](http://services.community.microsoft.com/feeds/feed/windowsmobilewebcasts)是关于从入门到高级开发的所有信息的丰富信息。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-19T20:25:05.573

我建议将 Sqlite 用于本地存储。从我运行的最后一个基准测试来看，它比 SqlCe 好得多，而且您不必做愚蠢的事情，例如保留打开的连接以提高性能。

权衡是工具集不那么丰富并且与其他 MSSql 产品的集成为零。:(

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-18T11:53:38.047

你可能想参考这个：

[开始使用 Windows 移动开发](https://stackoverflow.com/questions/68985/getting-started-with-windows-mobile-development)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-18T12:06:18.830

您不应该对 Windows Mobile 开发感到害怕。它与桌面开发没有太大区别。我强烈建议您使用 .NET Compact Framework 而不是 C++/MFC 进行开发。

一些有用的链接：

*   [代码项目的移动部分](http://www.codeproject.com/KB/mobile/)。你会发现很多文章，需要一点点挖掘才能找到合适的。
*   [OpenNetCF](http://www.opennetcf.com/)的智能设备框架 为紧凑框架提供了有价值的扩展。
*   安装 Mobile SDK 时，您会在 Community 文件夹下找到 Windows Mobile 和 CF 框架博客的链接。这些也是宝贵的资源。

关于您的应用程序，您对 WCF 和 SQL Server CE 的看法是正确的。这些是处理通信和存储的正确方法。

对来自桌面世界的人们的一些提示：

*   您需要进行某种电源管理。设备可能会自动进入挂起状态。此外，您不应该在不需要时消耗电力。
*   网络连接是一个难题。您可以注册特定网络（Wi-Fi、GPRS）何时可用或不可用的通知。您还可以设置首选的通信方式。
*   使 UI 尽可能简单。用户使用他的拇指和/或笔，他可能正在移动。
*   尽早在真机上进行测试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-18T20:53:24.310

Windows Mobile 团队博客中的“ [24 小时 Windows Mobile 应用程序开发](http://blogs.msdn.com/windowsmobile/archive/2008/12/22/24-hours-of-windows-mobile-application-development.aspx)”有一些很好的资源

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-19T23:11:27.890

如果可以，请尝试从用户用例开始，然后再回到代码上，而不是反过来。花更多的时间在工具上比在业务问题上工作要容易得多。考虑用户需求将帮助您考虑替代策略，因为您从普通 .NET 中了解的许多模式并不适用。

我已经完成了很多您所描述类型的间歇性应用程序开发，并且板载数据库工作得很好。MSMQ/WCF 的东西只是增加了概念上的开销，而没有增加太多的价值。无论如何，您都需要在本地建立一个逻辑数据存储，并且此级别的复制是一个您希望保持简单的简单概念，因此可以轻松监控和调试审计跟踪。MSMQ 和 WCF 倾向于将东西隐藏在不熟悉的地方。

我赞成 SqlLite 建议顺便说一句。对于 CE，MS 的持久性故事还没有稳定下来。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-30T12:20:52.837

对于数据库复制位，我强烈推荐[Sybase Ultralite](http://www.sybase.com/developer/mobile/sqlanywhere/ultralite)。在灵活性和性能方面，它让 SQL CE 脱颖而出

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T12:15:59.483

我不得不这样做一次。使用 Mac 进行开发的奇怪设置，我们都是 Java 程序员。并且期限很短。PowerPC mac 也是如此，所以没有机会安装 Windows 用于 Visual Studio 开发，更不用说这方面的钱永远不会出现。

我们最终使用 Java 编写应用程序，在 IBM J9 虚拟机上运行，​​并使用 SWT 作为用户界面。完全免费的开发堆栈。易于部署。代码可以在我们想要的任何平台上运行，而不仅仅是 PocketPC/WinMob。

无论如何，大部分工作都在服务器端——数据库、Web 服务服务器。逻辑。报告引擎。然而，客户端并不完全简单——将从服务器获取表单模板（因为它们经常更改）、站点详细信息（多站点部署）、从表单模板生成 UI（使用一些 SWT GUI 组件非常适合 PocketPC 开发，例如 ExpandBar），通过点击界面收集数据（尽可能减少键盘输入），然后将其提交回服务器。

对于离线存储，我们在设备本身上使用 XML 文件。足以满足我们的需求，但您的需求可能会有所不同。也许考虑 SQLite？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-19T22:45:50.987

您可以从以下几个链接开始：

1.  [http://developer.windowsmobile.com](http://developer.windowsmobile.com)
2.  [http://msdn.microsoft.com/en-us/windowsmobile/default.aspx](http://msdn.microsoft.com/en-us/windowsmobile/default.aspx)

如果您在开发过程中遇到困难，MSDN 上还有 Windows Mobile 专用聊天，您可以参加并提出您的问题。日历还没有更新，但下一个应该是在一月份。您可以在此处找到时间表：http: [//msdn.microsoft.com/en-us/chats/default.aspx](http://msdn.microsoft.com/en-us/chats/default.aspx)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-20T21:09:05.627

我将在这篇文章中添加一个额外的问题，因为它足够活跃，希望对其他人和我都有帮助。好的，所以在玩了之后，我现在意识到标准类库不能包含在 Windows 移动应用程序中。

现在，这里压倒性的建议似乎是使用嵌入式数据库，尽管我现在确实有用例，而且似乎我需要文档同步以及关系数据。考虑到这一点，服务层交互似乎是不可避免的。所以我的问题是如何在层之间共享公共域对象和接口？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-20T21:34:54.480

“文档同步” - 这是否意味着双向？还是累积只写？我可以想到主要收集和提交共享文档事务的移动架构——如果这是您的要求，那么我们应该离线讨论——这是一个漫长（且有趣）的对话。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-22T15:05:48.337

Owen 您可以从 Compact Framework -> Desktop 共享代码，如果您使用 CF 不支持的某些对象，则只有 Desktop -> Compact Framework 存在兼容性问题。

虽然桌面库不能在 CF 上运行，但 CF 库将在桌面上运行，您也可以在桌面上运行 CF.exes！

只需创建一个 CF 库作为定义您的基础对象/接口等的项目。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-30T12:03:51.597

这本书应该是所有 Windows Mobile 开发人员的必备读物：http: [//www.microsoft.com/learning/en/us/books/10294.aspx](http://www.microsoft.com/learning/en/us/books/10294.aspx)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-04-06T08:25:30.417

要开发[Windows 移动应用程序](http://www.developmobileapp.com/windows-mobile-application-development.html)，您必须拥有 Silverlight、Visual Studio、Windows Phone 模拟器和 sqlite 等基本工具作为数据库存储。

# css - 多个 CSS 悬停弹出窗口可以在单个 div 中占用相同的空间吗？

> ID：377614
> 
> 赞同：0
> 
> 时间：2008-12-18T11:47:50.960
> 
> 标签：css, popup, modalpopups

我正在尝试在菜单（列表项）中的不同行的悬停伪类上弹出文本跨度。如果菜单/列表是水平的，我可以让弹出窗口在 div 中占据相同的空间，但是垂直列表将弹出窗口放置在与“父”列表/菜单项相同的垂直高度。

这是我到目前为止的相关代码：

```
<div id="greenback">
  <div class="serviceframe">
    <div class="serviceslist">
<ul>
<li><a href="">item 1<span>this is popup1.</span></a></li>

<p><li><a href="">item 2<span>This is popup 2's text but I want it to appear in exactly the same place as popup 1's text does.</span></a></li></p>

<p><li><a href="">item 3<span>same here - how can I get all popups positioned in exactly the same place?</span></a></li></p>
</ul>
        </div><!-- closes serviceslist-->
    </div><!-- closes serviceframe -->
</div><!-- closes greenback--> 
```

CSS：

```
ul {
    list-style: disc url(w-arrow.png) outside;
    }

#greenback {
    position: relative ;
        top: 0em ;
    width: 800px ;
    height: 250px ;
    background-color: #7EBB11 ;
    border: 3px solid #112D82 ;
    }

/*********SERVICE LIST MENU**********/
.serviceframe { 
    position: relative ;
    width: 100% ;
    height: 94% ; 
    background-color: #666666 ; 
    top: 3%; bottom: 3%;
    }
/*--serviceframe is now sitting in greenback--*/

.serviceslist {
    position: relative ;
    width: 100% ;
    height: 90%  ;
    top: 1% ;
    background-color: #7EBB11 ;
    font-family: Optima, Calibri, Candara, Century-Gothic, 
    Arial, sans-serif;
    font-size: 100% ;
    color: black ;
    display: table-cell ;
    vertical-align: middle ;
    z-index: 100 ;
}

.serviceslist a 
    {position: relative;
    display: table-cell; text-align: left; height: 100%;  font: 1em sans-serif; 
    text-decoration: none; color: #112D82; 
    background: #7EBB11 ; 
}

/*appearance of the <a> item (but before the <span> tag) on hover*/
.serviceslist a:hover {
    color: white;
    }

/*appearance of the spanned content within <a></a> tags when not hovered*/
.serviceslist a span {display: none;}

/*appearance of spanned content within <a> tags when hovered*/
.serviceslist a:hover span {
    position: absolute;
    display: table-cell;  
    margin-top: 0em; margin-left: -50%; z-index: 100;
    width: 40%; height: auto; color: #FFFFFF;  background-color: #7EBB11;
    font: 14px Verdana, sans-serif; text-align: left;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T14:49:18.300

我的天，对于一个简单的任务来说，这是一大堆 HTML 和 css。我不会试图通读它，但只是给你你的答案

```
<ul>
  <li><a href="">item 1<span>this is popup1.</span></a></li>
  <li><a href="">item 2<span>This is popup 2's text but I want it to appear in exactly the same place as popup 1's text does.</span></a></li>
  <li><a href="">item 3<span>same here - how can I get all popups positioned in exactly the same place?</span></a></li>
</ul>

ul { position: relative; }
ul span { position: absolute; } 
```

您只需要在 ul （或它上面的 div 之一）上具有相对位置，因为这就是您想要使您的跨度绝对的位置。

另外，杀死你的 LI 周围的那些 P 标签。你不应该在 UL 和 LI 之间有任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T14:45:15.720

所以你想让所有不同的跨度出现在同一个地方吗？您在 A 中设置相对位置，这使得跨度显示为“相对”。

使固定：

*   移除锚点中的相对定位。// 不过，由于某种原因，它在 FF 中似乎并不重要
*   将跨度的定位（顶部、左侧等）设置为所需值。

*您的代码片段在 IE6/7 上不起作用，所以我没有打扰其中的错误。

# clr - 签署 .NET 程序集：这真的可以保护我的程序集不被篡改吗？

> ID：377619
> 
> 赞同：14
> 
> 时间：2008-12-18T11:50:37.567
> 
> 标签：clr, piracy-prevention

我正在我的应用程序中实施一个“锁定”系统，以保护我的应用程序不被非法复制和使用。系统检查基于硬件的代码的签名，并期望使用只有我公司拥有的私钥对其进行签名。（该应用程序已获得用于验证签名的公钥。）

我想确保没有人更改我在应用程序中的锁定机制，所以我想签署我的应用程序程序集，我认为这是有道理的。

1.  由于我从未见过 CLR 谈论过程序集的签名无效，因此我想确保该系统确实有效。可以？我应该怎么做才能让它工作？
2.  攻击者能否将精力集中在 CLR 上，使其不关心我的签名？也就是说，如果他不能因为我已经签名而篡改我的代码，他可以篡改CLR吗？
3.  一般来说，我想知道您对此类安全防护和保护技术的经验。任何人都可以提出其他建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-18T12:02:44.300

程序集签名旨在允许应用程序/程序集引用程序集并确保它们获得最初引用的程序集。如果有人愿意，理论上他们可以反编译您的整个应用程序并重新编译而无需签名。（即：他们可以重新编译*引用程序集*，以便它引用被*引用程序集*的未签名版本）。

然后他们将能够根据需要修改代码，因为客户端 (exe) 现在将引用未签名（或“重新签名”）的 dll。

为了使反编译和重新编译过程更加困难，您可以尝试创建一个包含托管代码和本机代码的混合模式 C++/CLI 程序集。但是，是的……最终人们手头有你所有的二进制文件，只要付出足够的努力，你就可以绕过你想到的任何许可系统。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-18T12:29:26.367

对已签名的程序集存在一定程度的误解。正如 mackenir 所指出的，程序集签名并不是一种用于防止程序集被篡改的安全机制。以下关于 codeproject 的文章对该主题进行了很好的处理：

[http://www.codeproject.com/KB/security/StrongNameExplained.aspx](http://www.codeproject.com/KB/security/StrongNameExplained.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-18T12:00:51.057

签署您的代码只允许篡改检测，它不会阻止它。知道自己在做什么的人可以删除您的签名，并在必要时添加自己的签名。

确实，大多数复制保护方案都是浪费时间并且可以被颠覆，而且它们也往往会惹恼您的付费客户。最终，您无法阻止某人在他们控制的硬件上修改和运行您的代码。只是让它变得足够困难，以便更容易去采购部门并获得书面支票，并且很难忘记您没有获得许可副本。那些关心的人最终会付出代价，而那些不关心的人永远不会。

另请注意，即使您认为大多数人不会费心破解您的计划，或者没有这样做的技能，也没关系。因为一旦有人颠覆了您的版权保护方案，他们就可以在洪流网站上将其提供给那些没有技能的人，然后游戏就结束了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-04T09:44:35.547

您可以使用的一种技术是防止篡改，即使用程序集的公钥来加密软件的重要部分，例如应用程序/算法参数。如果公钥已更改，则解密将无法进行，您的应用程序将崩溃。

一些混淆器（例如[Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm) ）将此技术与字符串加密功能一起使用。它使用程序集的公钥来加密所有字符串。如果公钥已更改或删除，解密将失败，您的应用程序甚至无法启动。

# zend-framework - 我可以将 Zend-Framework 支持的 Web 应用程序集成到 wordpress 站点中吗？

> ID：377628
> 
> 赞同：2
> 
> 时间：2008-12-18T11:57:42.467
> 
> 标签：zend-framework, wordpress

我有一个项目，我希望能够在一个页面上调用 wp_list_pages() ，该页面还使用 Zend 框架来支持一些复杂的接口，管理 wordpress 之外的自定义数据。

如果用户尚未使用适当的授权级别登录，此页面还应将用户重定向到 wordpress 登录屏幕。

这将如何在高级别工作，即我是否需要编辑 wordpress 引导文件以根据特定 URL 或其他内容有条件地实现自定义界面，但仍包含某些文件以便能够在该自定义界面上调用 wp_list_pages() ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T16:09:04.537

我开发了几个 WordPress 插件，我发现它很容易扩展。虽然没有与 Zend 合作过。

您应该检查 WordPress 插件 api。主要是关于动作、过滤器和钩子的部分： http: [//codex.wordpress.org/Plugin_API](http://codex.wordpress.org/Plugin_API)

您甚至可以覆盖某些功能（不确定是否可覆盖`wp_list_pages()`）。

它有很好的文档记录，并且在 IRC、论坛等上有一个庞大的开发者社区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T17:59:17.450

谢谢费尔南多。

我刚刚阅读[了这个帖子](https://stackoverflow.com/questions/304323/integrating-external-scripts-with-zend-framework)，它建议您可以在任何脚本中使用 Zend，只需包括：

```
require_once('Zend/Loader.php');
Zend_Loader::registerAutoload(); 
```

因此，鉴于我只需要在一个页面上使用 Zend，我是否可以将该代码包含在我分配给导航中相应页面的自定义模板文件中？如果我使用 javascript 通过 XHR 提交表单，请求的 URL 将采用“/controller/action”形式——但 Zend 不知道控制器目录。

我可以将 Zend 代码放入 wordpress 引导程序中，即上面的代码加上 frontController 配置，然后在任何地方使用 Zend 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-19T00:12:23.967

因此，我在**Wordpress**中创建了一个页面，并为该页面创建了一个自定义模板，其中我放置了以下**Zend Framework**代码：

```
require_once('Zend/Loader.php');
Zend_Loader::registerAutoload();

$db = Zend_Db::factory('Pdo_Mysql', array(
    'host'      => 'localhost',
    'username'  => 'username',
    'password'  => 'password',
    'dbname'    => 'dbname'
));
Zend_Db_Table::setDefaultAdapter($db);

class Users extends Zend_Db_Table_Abstract {
    protected $_name = 'wp_users';
}

$users = new Users();
$users = $users->fetchAll()->toArray();

print_r($users[0]['user_login']); 
```

这一切都很好，因此至少在某种程度上可以将 Zend 与 Wordpress 结合使用。

很明显，**问题在于谁控制 URL 重写**、路由或引导（不确定术语是否正确）。如果我将上述代码的结尾，从 $users = new Users(); 开始，放入控制器中，如下所示：

```
class UsersController extends Zend_Controller_Action {
    function getUserAction() {
        $this->_helper->viewRenderer->setNoRender();

        $users = new Users();
        $users = $users->fetchAll()->toArray();

        echo $users[0]['user_login'];
    }
} 
```

那么我将如何调用该函数？我的意图是通过 XHR 请求从 javascript 调用它以响应页面上的事件，但请求 URL 'index.php/Users/getUser/' 返回 '未选择输入文件'。尝试访问 URL [http://www.domain.com/Users/getUser/](http://www.domain.com/Users/getUser/)会生成一个 Wordpress 404 页面。

有没有解决的办法？当然，它不仅仅适用于 wordpress——我希望它适用于任何通过引导程序重写/路由请求的现有应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-01T09:31:36.767

我想你可以做到这一点，只需将框架导入你需要它的一页。我不知道 Zend 是如何工作的，但请检查放置目录的路径，以便 Zend 找到它们。正如我所说，我猜你可以这样做，只需进行实验并告诉我们它是如何进行的！

注意函数和/或变量的名称冲突，这应该不是来自 WordPress 和 Zend 等流行产品的大问题......（理论上应该编码良好）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T18:32:13.733

我想你可以做到这一点，只需将框架导入你需要它的一页。我不知道 Zend 是如何工作的，但请检查放置目录的路径，以便 Zend 找到它们。正如我所说*，我猜*你可以这样做，只需进行实验并告诉我们它是如何进行的！

注意函数和/或变量的名称冲突，这应该不是来自 WordPress 和 Zend 等流行产品的大问题......（理论上应该编码良好）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-17T00:04:35.563

我已经为 wordpress 构建了一个与您的目标相似的插件，不过更多的是模仿 CodeIgniter。不太了解 Zend，我认为这应该会有所帮助：

使用以下代码在您的插件目录中创建一个名为 routes.php 的文件：

```
add_action( 'init', 'add_custom_urls' );

function add_custom_urls(){
    global $wp, $wp_rewrite;

    $wp_rewrite->add_rule( '(.*)$', 'index.php?&cPath=$matches[1]', 'top' );
    $wp->add_query_var( 'cPath' );
} 
```

请务必在您的管理员中激活这两个插件。这两个文件将允许您在 Wordpress 试图弄清楚如何处理它之前捕获 url。您可以使用正则表达式更好地控制要捕获的页面。在此工作之前，您可能必须删除 _options 数据库表 where `option_name`= 'rewrite_rules' 中的记录。

接下来，使用以下代码制作另一个插件：

```
add_action( 'template_redirect', 'bootstrap' );

function bootstrap(){
    global $cPath;
    echo( "cPath : $cPath" );
    if( $cPath ){
        dosomethingwith( $cPath ); 
    }
} 
```

将所有代码放入 dosomethingwith() 函数中。您需要弄清楚请求的 url 是否可以映射到 zend 控制器等。 [http://www.domain.com/Users/getUser/](http://www.domain.com/Users/getUser/)会给你 $cPath = Users/getUser/ 如果成功，你' ll 也可能想要 die()，所以一旦它完成，Wordpress 将不会尝试再次接管。

# php - Drupal 部署/测试/不怎么称呼它工具

> ID：377629
> 
> 赞同：2
> 
> 时间：2008-12-18T11:58:11.547
> 
> 标签：php, deployment, drupal, continuous-integration

设置如下：Drupal 项目，一个带有 trunk/qa/production-ready 分支的 svn 存储库，每个分支的虚拟主机，将文件从存储库复制到 docroot 的提交后挂钩。

问题如下： Drupal 网站通常不仅依赖源代码，还依赖数据库数据（节点类型、它们的设置等）。

我正在寻找使此更改可版本化的解决方案。但不像“区分”数据库中的所有数据，而是像单元测试中的固定装置。

带有 SQL 数据和内容文件的 Fixture-like 脚本应该是版本化的，并在主要的 post-commit 钩子之后应用。

是否为此目的编写了任何东西，或者可能很容易适应某种构建工具（如 Apache Ant）或单元测试框架。如果这个工具知道drupal，那就太好了，所以在脚本中我可以做类似的事情`variable_set()`，`drupal_execute()`.

有任何想法吗？还是我应该立即开始编码而不是问这个？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T12:09:33.707

听起来您已经在那里编写了一些基础设施。

所以我要开始编码了！目前，我知道没有任何东西对此特别有好处。如果有的话，我想它需要一些努力才能让它与您现有的基础设施一起使用。所以开始编码似乎是要走的路。

我的方法是在文件名的开头使用带有版本号的 sql 补丁文件（包含用于升级 db 模式/数据的 sql 语句的文件）。然后数据库包含一个带有配置信息的表（您可能已经有这个），其中包含有关数据库所在版本的信息。

然后，您可以采取多种方法来自动应用补丁。一个是您从 postcommit 调用的脚本，它检查数据库所在的版本，然后检查您有补丁的最新版本是否比数据库所在的版本新，并应用它/它们（按顺序）如果是这样。

db 补丁应始终通过更新配置表中的上述版本号来完成。

这种方法可以扩展为包括基于完整转储文件设置新数据库的能力，然后对其应用任何必要的补丁以对其进行升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-18T04:07:39.063

在最近的一次会议上对此进行了演示（[幻灯片链接](http://www.slideshare.net/eaton/drupal-deployment-presentation)）-我强烈建议您使用特定于站点的自定义模块，其 .install 文件包含版本化的“更新”功能，这些功能为数据库架构更改和设置/配置更改。

它绝对优于保留 .sql 文件，因为 Drupal 将跟踪哪些文件已运行，并为您提供批处理机制来处理需要对大量数据进行长时间运行的批量操作的任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T12:20:15.463

> 我的方法是在文件名的开头使用带有版本号的 sql 补丁文件（包含用于升级 db 模式/数据的 sql 语句的文件）。

我正在考虑具有所需数据库结构的文件（xml 或其他东西）以及应用必要更改的工具。

是的，经过更多研究，我同意：编写代码比调整其他解决方案更容易。尽管我认为[simpletest](http://drupal.org/project/simpletest) drupal 模块中的一些例程会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T16:02:34.160

您可能想查看[Refactoring Databases](https://rads.stackoverflow.com/amzn/click/com/0321293533)一书。

我从其中一位作者那里听到的建议是有一个脚本可以将数据库从一个版本升级到另一个版本，而不是每次都从头开始构建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T17:31:45.243

以前：[Drupal 源代码控制策略？](https://stackoverflow.com/questions/282858/drupal-source-control-strategy)

# php - 一个受人尊敬的 PHP 日期时间解析器

> ID：377631
> 
> 赞同：3
> 
> 时间：2008-12-18T11:58:22.733
> 
> 标签：php, datetime, datetime-parsing

```
echo date('r',strtotime("16 Dec, 2010")); //Tue, 16 Dec 2008 20:10:00 +0530
echo date('r',strtotime("16 Dec  2010")); //Sat, 16 Jan 2010 00:00:00 +0530 
```

那是错误的......它应该失败或者应该正确解析。你知道 php 中有什么强大的自然语言日期/时间解析器吗？你如何在php中解析自然语言日期时间？

编辑：

```
var_dump(strtotime("16 Dec, abcd")); //bool(false) 
```

“2010 年 12 月 16 日”要么是有效的 GNU 日期输入格式，要么不是。在第一种情况下，它应该返回正确的答案，而在第二种情况下，它应该返回错误。这就是我所说的“错误”。

编辑：

目的是为了接受大量的用户输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T12:51:48.053

如果您知道时间在字符串中以什么格式表示，则可以`strptime()`与适当的格式字符串一起使用来解析它。当它无法按照格式解释字符串时，它至少会报错。

此函数存在于 PHP 5.1.0 及更高版本中。

如果你想接受任意的用户输入，你应该向用户提供清晰明了的反馈，这样她就可以对错误解释的日期做点什么。大多数时候，无论如何都不会有问题，而且你永远无法捕捉到所有有问题的情况（想想美国与欧洲的格式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-09T04:58:56.463

有一个名为 Chronic 的 Ruby 类具有处理方便用户输入所需的灵活性：http: [//chronic.rubyforge.org/](http://chronic.rubyforge.org/)

我相信您可以通过将 Ruby 的 Time 替换为 PHP 的 DateTime 来将其移植到 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:16:05.960

没错，您提供的数据是模棱两可的 - 天壤之别。

模棱两可的数据意味着您可以合理预期的最多是“最佳猜测”。你可能不同意它是如何做出这个最佳猜测的，但这并不是“错误的”，这只是对最有可能的情况的不同看法。在不消除歧义的情况下，您不能期望更多。

*进一步的想法，主要是对 OP 的评论：*

静默失败不是一种选择——决定何时或不静默失败受制于相同的规则，并且会受到相同的模棱两可的影响。

哪个示例字符串是错误的，应该默默地失败？你旁边的那个人呢？他认为同一个是错的吗？如果您通过不并排比较它们来删除上下文怎么办？

这里唯一的“错误”是期望一个函数能够从总是受到歧义的数据中破译出确切的含义......这只是那些例子，我什至还没有得到日期:) ( 1/2/08 是 2 月 1 日？还是 1 月 2 日？1908 年？2008 年？8 日？）

对，就是说，我要写一个名为'is_this_art'的函数......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T12:44:34.993

我不熟悉任何一个，但也许有人可以提供一个已经写好的。同时，我建议您在通过 strtotime 之前通过正则表达式或其他 munging 运行您的日期数据，并对其输出进行一些完整性检查以查看返回的日期是否在可接受的范围内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T12:43:12.547

strtotime 是您可以找到的最佳功能。我怀疑日期的任意字符串表示是否会被 100% 正确解释，因为它至少需要*一些*有关所使用格式的信息。

换句话说：请定义自然语言（正如 php 解释器正确指出的那样，您只是在问题中使用了两个不同的版本）

# php - 使用 PHP 添加、更新和编辑 XML 文件

> ID：377632
> 
> 赞同：2
> 
> 时间：2008-12-18T11:59:25.337
> 
> 标签：php, xml, simplexml

我有一个 xml 文件，我想创建一个表单/表格来使用 PHP 添加、编辑和删除记录。目前我使用 simpleXML 来加载 XML 文件，并在各个页面上显示其内容。

有什么方法可以创建一个显示所有结果的表，并允许我编辑或删除表示 XML 文件中完整记录的表的特定行。

单击编辑时，我希望记录中的详细信息以用户可以更改然后保存的形式出现，从而更新 XML 文件和相应的网页。

我需要在 PHP 中完成此操作，最好使用 SimpleXML，尽管对使用 PHP 执行此操作的其他方法的建议持开放态度。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-25T08:23:09.787

XSLT 是您将 XML 数据库文件转换为您希望在网页上显示的格式的朋友。您创建一个 XSL 模板，其中包含每条记录所需的所有 HTML，然后使用 for-each 语句遍历 XML 文件。我将给出一个粗略的概述，如果需要，我可以提供更多详细信息。

这是我用来通过 AJAX 执行 XSLT（使用 XSL 文件处理 XML 文件）的通用 PHP 文件。这一项设置为使用从浏览器的 GET 调用中传递的必需（如果需要，也是可选的）输入。p#n 和 p#v（请参阅下面代码顶部的注释）是要传递到 XSL 文档中的参数和值对，以防您希望使用某些输入参数来影响输出。在这种情况下，输出会回显到浏览器。下面是运行 XML 数据库的 PHP 和 XSLT 转换，用于为您的 Web 显示（表格或您放入 XSL 文件模板中的任何内容）创建 HTML：

```
<?php
//REQUIRED INPUTS:
// - xml: path to xml document
// - xsl: path to xsl style sheet
// - pCount: number of parameters to be passed to xslt (send zero '0' if none)
//OPTIONAL INPUTS (must have as many as specified in pCount, increment '1' in
//names below up a number for each iteration):
// - p1n: name of first parameter
// - p1v: value of first parameter

//SET Paths 
$xmlPath = $_GET['xml'];
$xslPath = $_GET['xsl'];

// Load the XML source
$xml = new DOMDocument;
$xml->load($xmlPath);

$xsl = new DOMDocument;
$xsl->load($xslPath);

// Configure the transformer
$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl); // attach the xsl rules

//Set Parameter(s), if present
$xslParamCount = $_GET['pCount']; //Check number of xsl parameters specified in GET
for ($i=1; $i<=$xslParamCount; $i++){
   $xslParamName = $_GET['p'.$i.'n'];
   $xslParamValue = $_GET['p'.$i.'v'];
   $proc->setParameter( '', $xslParamName, $xslParamValue);    //Set parameters for XSLTProcessor
}

// TRANSFORM
echo $proc->transformToXML($xml);

// SET Mime Type
$mime = "application/xhtml+xml";
$charset = "iso-8859-1";
header("Content-Type: $mime;charset=$charset");
?> 
```

下面是一个 XSL 文件模板的示例，它采用 XML 数据库文档并将其转换为 HTML 以插入网页。请注意 HTML 跨度标记。所有 xsl 标记都是处理指令，用于确定模板中 HTML 标记及其周围的内容。在这种情况下，我们根据传入 XSL 文件的输入参数过滤结果并选择要显示的适当数据（请参阅顶部附近的 xsl:param 项）：

```
<?xml version='1.0' encoding='UTF-8'?>
<xsl:stylesheet xmlns:xsl='http://www.w3.org/1999/XSL/Transform' version='1.0'>
 <xsl:param name='testId'/>
 <!--Input options for following param: localUse, notLocalUse, nottestId, or '' (all)-->
 <xsl:param name='matchType'/>
 <xsl:template match='/'>
   <xsl:choose>
      <xsl:when test="$matchType='localUse'">
         <xsl:for-each select="//test[@id=$testId and @localUse='yes']">
            <xsl:sort select="../@id"/>
            <div><xsl:if test='../@localPrefTestId=$testId'><xsl:attribute name='class'>preferredTest</xsl:attribute></xsl:if>
               <span class='productStockCode'>
                  <xsl:if test='../@localPrefTestId=$testId'>
                     <xsl:attribute name='title'>Preferred test for this product</xsl:attribute>
                  </xsl:if>
                  <xsl:if test='../@localPrefTestId!=$testId'>
                     <xsl:attribute name='title'>Alternate (not preferred) test for this product - see note to right</xsl:attribute>
                  </xsl:if>
                  <xsl:value-of select='../@id'/>
               </span>
               <span class='productStockName'>
                  <xsl:if test='../@localPrefTestId=$testId'>
                     <xsl:attribute name='title'>Preferred test for this product</xsl:attribute>
                  </xsl:if>
                  <xsl:if test='../@localPrefTestId!=$testId'>
                     <xsl:attribute name='title'>Alternate (not preferred) test for this product - see note to right</xsl:attribute>
                  </xsl:if>
                  <xsl:value-of select='../@name'/>
               </span>
               <span class='producttestNote'>
                  <xsl:value-of select='child::localPrefNote'/>
               </span>
               <span class='productDeleteButton'>
                  <input onClick='remProdLink(this)' title='Click to remove link to this product' type='image' src='button_tiny_X_grey.bmp'></input>
               </span>
            </div>
         </xsl:for-each>
      </xsl:when>
      <xsl:otherwise>
         <p>Server Error: GET must specify matchType parameter value of 'localUse', 'notLocalUse', 'nottestId', or '' (for all)</p>
         <p>matchType received: <xsl:value-of select='$matchType'/></p>
      </xsl:otherwise>
   </xsl:choose>
 </xsl:template>
 <!--Note the output method="html" below is required for this to insert correctly into a web page; without this it may nest improperly if any divs are empty-->
 <xsl:output method="html" omit-xml-declaration="yes"/>
</xsl:stylesheet> 
```

请注意，所有 xsl 测试都是 XPath 表达式。

要删除一行，您可以在该行上有一个按钮，该按钮使用“this”参数调用 JavaScript 函数（参见上面代码中的 onClick='remProdLink(this)'）来引用该行，然后获取该行的唯一标识符在 JavaScript 中的行是这样的：

```
function remProdLink(obj){
   //get unique id via Dom from passed in object reference
   //edit everything after "obj" below to get to the unique id in the record
   var testCode = obj.parentNode.parentNode.firstChild.nextSibling.innerHTML;
   //code to send AJAX POST to server with required information goes here
} 
```

在服务器端，您的 PHP 接收带有唯一标识符的 AJAX POST，将 XML 数据库文件加载到 simpleXml，通过 XPath 找到节点并将其删除，如下所示：

```
<?php
   //Move url encoded post data into variables
   $testCode = $_POST['testCode']; //$testCode should be a unique id for the record

   //load xml file to edit
   $xml = simplexml_load_file('yourDatabase.xml');

   //find target node for removal with XPath
   $targets = $xml->xpath("//testCode[@id=$testCode]");

   //import simpleXml reference into Dom to do removal
   $dom2 = dom_import_simplexml($targets[0]);
   $dom2->parentNode->removeChild($dom2);

   //format xml to save indented tree (rather than one line) and save
   $dom = new DOMDocument('1.0');
   $dom->preserveWhiteSpace = false;
   $dom->formatOutput = true;
   $dom->loadXML($xml->asXML());
   $dom->save('yourDatabase.xml');
?> 
```

至于编辑一个项目，您可以调用另一个类似于上述删除的 JavaScript 函数，在网页上的该项目下创建一个带有保存更改按钮的表单，当按下该按钮时调用另一个 JavaScript 函数AJAX POST 到服务器，同样类似于删除。只有这一次，您的 POST 需要包含记录中可能已编辑的所有信息以及记录的唯一 ID。PHP 文件将找到适当的记录（与删除相同），然后您可以在 PHP 中编辑该记录的部分内容，或者只是删除它并创建并附加新版本的记录。

我不确定你需要多少细节。希望这能给你一个好的开始。如果您需要有关任何部分的更多详细信息，请评论我的回答。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T12:07:29.920

我建议您使用 DomDocument 和 DomXPath，而不是 SimpleXml。然而，一般来说，XML 并不是存储数据的最佳媒介——无论您正在做什么，您都应该使用数据库。如果您需要轻松交换数据，您也许可以使用 SQLite，而不是更常见的 MySql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T05:46:26.980

您可以使用原生 XML 数据库来帮助创建、添加、更新和检索 xml 文档和节点。我过去成功地使用过[BerkeleyDBXML](http://www.oracle.com/database/berkeley-db/xml/index.html)（现在是 Oracle 的一部分）。还有一个 PHP 库可用。

# c# - 如何或从何处获得三星 Omnia 官方 SDK

> ID：377633
> 
> 赞同：1
> 
> 时间：2008-12-18T11:59:47.300
> 
> 标签：c#, windows-mobile

我搜索了高低，找不到三星 Omnia SDK。

我知道它可以使用 .net 框架进行开发，但我想要更多，特别是能够访问运动传感器，也许还有 GPS。

欢迎任何想法或方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T12:10:24.267

您应该能够使用 GPS 中间驱动程序访问 GPS。查看来自 Windows Mobile SDK 的 GPS 示例。

[我不知道在哪里可以找到 Omnia SDK，但是如果您在xda-developers](http://www.xda-developers.com/)中找不到某些内容，则很难找到它。

编辑：一点点搜索，[这里](http://forum.xda-developers.com/showthread.php?p=2737837)是链接到GSensor的[SDK的论坛帖子。](http://www.koushikdutta.com/2008/10/using-samsung-omnia-accelerometergsenso.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-25T20:33:28.597

您可以从这里下载 SDK：[Omnia WM SDK](http://developer.sonyericsson.com/site/global/docstools/windowsmobile/p_windowsmobile.jsp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-02T21:09:25.913

[在这里](http://innovator.samsungmobile.com/down/cnts/category.main.list.do?cateId=147&cateAll=all&platformId=2)您可以找到适用于三星 Omnia 的 SDK 和仿真器，[第二个](http://innovator.samsungmobile.com/down/cnts/detail.view.do?platformId=2&cateId=147&childCateId=All&childCateId2=&cntsId=1641&imgType=&parentCateId=147&cateAll=all&listReturnUrl=http%3A%2F%2Finnovator.samsungmobile.com%3A80%2Fdown%2Fcnts%2Fcategory.main.list.do%3FcateId%3D147%26cateAll%3Dall%26platformId%3D2&previousUrl=http%3A%2F%2Finnovator.samsungmobile.com%3A80%2Fdown%2Fcnts%2Fcategory.main.list.do%3FcateId%3D147%26cateAll%3Dall%26platformId%3D2)链接将引导您访问适用于三星特定 API（如加速度计）的 SDK。

GPS 应该可以通过通用 API [GPS Intermediate Driver Reference](http://msdn.microsoft.com/en-us/library/ms850332.aspx)访问，以便从 .NET 简单使用 pinvoke 访问它

# javascript - 停止动画 jQ

> ID：377636
> 
> 赞同：0
> 
> 时间：2008-12-18T12:00:50.277
> 
> 标签：javascript, jquery

我遇到的问题是我不知道如何用 mouseover 停止我的功能并用 mouseout 重新启动它

首先是我的测试代码：

```
 <script type="text/javascript">

  function fadeEngine(x) {

  var total_divs=3; //setze hier die nummer der gewollten divs

                  var y=x;

                  if(x==total_divs) y=1; else y++;

                  $("#fade"+x).css("display","none");

                  $("#fade"+y).fadeIn("slow");

                  setTimeout('fadeEngine('+y+')',3000); //modifi alle 3000 miliseconds nen neuen div
          }

        fadeEngine(0); //Initialisation des Scripts

  </script>

<script type="text/javascript">
$(document).ready(function(){
/*
    $("#container").hover(function(){
            stop('mouse over');
    },function(){
            alert('mouse out');
    });
*/
/*
$("#container").hover(function()
   {
      $(this).stop().fadeTo("slow", 1.00);
   },
   function()
   {
      $(this).stop().fadeTo("fast", 0.50);
   });
*/

});

</script>
</head>
<body>

<div id="container" style="width:200px;height:200px;background:#afafaf;color:#red;">

    <div id="fade1">Content  one</div>
    <div id="fade2" style="display:none">Content  two</div>
    <div id="fade3" style="display:none">Content three</div>
</div>
    <div class="blocker">&nbsp;</div>
</body>
</html> 
```

如果我越过 contentdiv 并在我移出 div 时启动它，我怎么能这样做来停止我的函数 fadeEngine？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T13:29:03.080

给你所有的`#fade`X 元素一个类（比如 .faders），然后使用：

```
$('.faders').stop(); 
```

或者给容器 div 一个 id `#faderbox`，比如：

```
$('#faderbox div').stop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T13:03:30.963

如果只是将动画附加到鼠标上的情况，请尝试以下操作：

```
$(this).mouseover(function () {

    // stops the hide event if we move from the trigger to the popup element
    if (hideDelayTimer) clearTimeout(hideDelayTimer);

    // don't trigger the animation again if we're being shown, or already visible
    if (beingShown || shown) {
      return;
    } else {
      beingShown = true;

      // (we're using chaining) now animate
      this.animate({
        //some animation stuff
      }, function() {
      // once the animation is complete, set the tracker variables
        beingShown = false;
        shown = true;
      });
    }
}).mouseout(function () {

    // reset the timer if we get fired again - avoids double animations
    if (hideDelayTimer) clearTimeout(hideDelayTimer);

     // store the timer so that it can be cleared in the mouseover if required
    hideDelayTimer = setTimeout(function () {
      hideDelayTimer = null;
      this.animate({
         //some animation stuff
      }, function () {
      // once the animate is complete, set the tracker variables
        shown = false;
         });
      }, hideDelay);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T14:59:39.497

尝试将停止行为应用于需要它的每个元素，例如

```
$('.faders').each(function () {
  $(this).mouseover(function () {
    $(this).stop(); 
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T12:28:46.010

我不确定你想要在你的fadeEngine 中的fadeIn 和fadeOut 效果方面发生什么，但是，我可以给你两条建议：

您可以使用 jQuery 效果`stop()`来停止选定元素上的所有当前 jQuery 动画。例如：

```
$("#fade"+y).stop(); 
```

将停止该元素在其当前状态下的淡入淡出动画。然后，您可以根据需要重置 CSS。

要停止调用您之前排队的函数`setTimeout`，您必须获取返回值并调用`clearTimeout()`。例如：

```
var timeout = setTimeout('fadeEngine('+y+')',3000);
// later...
clearTimeout(timeout); 
```

这将清除挂起的超时事件并防止其发生。

# java - 大型 Java EE 应用程序的 MVC 框架

> ID：377640
> 
> 赞同：3
> 
> 时间：2008-12-18T12:03:09.150
> 
> 标签：java, java-ee-5

哪个 MVC 框架是 Web 应用程序的最佳选择（性能/易于开发），每周将有超过 200 万次访问。

该网站基本上是一个搜索引擎，但也会有大量的 XML 解析和高 db 流量。

我们在 Jboss 4.2.3x 上使用 Java，使用 PG 作为 DB，使用 Solr 进行搜索。

我们正在考虑使用标记库和 Servlet 编写 JSP 代码，但我们感觉会有更好的替代方案，但目前尚不知道，因为我们正从 Java Web 应用程序世界开始。

任何意见和经验分享将不胜感激！
提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T12:08:47.033

我认为您确实需要坐下来考虑这些选项，并评估每个选项（或它们的组合）。

您可能使用的一些可能的框架词（想到的，除了带有 Servlet 的普通旧 JSP 之外）是：

*   支柱和瓷砖
*   春天
*   休眠
*   推出你自己的框架（对于大型项目来说通常是值得的，但前提是你知道你需要什么，如果你以前没有做过 web 应用程序，这是不太可能的）
*   Grails（Groovy on Rails，但它在 JVM 上运行并且可以使用 Java 库）

还有更多我敢肯定...

你想重新发明轮子吗？您还想使用哪些客户端框架？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T14:59:17.147

Spring MVC 可能是你最好的选择。虽然它易于使用并与 Java EE 堆栈的其余部分集成，但它允许进行大量定制，最后但并非最不重要的一点是，它非常快，因为开销很小。我强烈推荐它。

# jquery - jQuery Ajax 错误处理，显示自定义异常消息

> ID：377644
> 
> 赞同：782
> 
> 时间：2008-12-18T12:06:18.597
> 
> 标签：jquery, ajax, custom-exceptions

有什么方法可以在我的 jQuery AJAX 错误消息中显示自定义异常消息作为警报？

例如，如果我想通过[Struts](http://en.wikipedia.org/wiki/Apache_Struts) by在服务器端抛出异常`throw new ApplicationException("User name already exists");`，我想在 jQuery AJAX 错误消息中捕获此消息（'用户名已存在'）。

```
jQuery("#save").click(function () {
  if (jQuery('#form').jVal()) {
    jQuery.ajax({
      type: "POST",
      url: "saveuser.do",
      dataType: "html",
      data: "userId=" + encodeURIComponent(trim(document.forms[0].userId.value)),
      success: function (response) {
        jQuery("#usergrid").trigger("reloadGrid");
        clear();
        alert("Details saved successfully!!!");
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
      }
    });
  }
}); 
```

在第二个警报中，我警告抛出的错误，我得到`undefined`并且状态代码是 500。

我不确定我哪里出错了。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2009-01-16T14:25:15.607

确保设置`Response.StatusCode`为 200 以外的值。使用 编写异常消息`Response.Write`，然后使用...

```
xhr.responseText 
```

..在你的javascript中。

* * *

## 回答 #2

> 赞同：243
> 
> 时间：2010-05-10T07:16:07.117

**控制器：**

```
public class ClientErrorHandler : FilterAttribute, IExceptionFilter
{
    public void OnException(ExceptionContext filterContext)
    {
        var response = filterContext.RequestContext.HttpContext.Response;
        response.Write(filterContext.Exception.Message);
        response.ContentType = MediaTypeNames.Text.Plain;
        filterContext.ExceptionHandled = true;
    }
}

[ClientErrorHandler]
public class SomeController : Controller
{
    [HttpPost]
    public ActionResult SomeAction()
    {
        throw new Exception("Error message");
    }
} 
```

**查看脚本：**

```
$.ajax({
    type: "post", url: "/SomeController/SomeAction",
    success: function (data, text) {
        //...
    },
    error: function (request, status, error) {
        alert(request.responseText);
    }
}); 
```

* * *

## 回答 #3

> 赞同：102
> 
> 时间：2012-02-25T17:09:21.253

**服务器端：**

```
 doPost(HttpServletRequest request, HttpServletResponse response){ 
            try{ //logic
            }catch(ApplicationException exception){ 
               response.setStatus(400);
               response.getWriter().write(exception.getMessage());
               //just added semicolon to end of line

           }
 } 
```

**客户端：**

```
 jQuery.ajax({// just showing error property
           error: function(jqXHR,error, errorThrown) {  
               if(jqXHR.status&&jqXHR.status==400){
                    alert(jqXHR.responseText); 
               }else{
                   alert("Something went wrong");
               }
          }
    }); 
```

**通用 Ajax 错误处理**

如果我需要对所有 ajax 请求进行一些通用错误处理。我将设置 ajaxError 处理程序并在 html 内容顶部名为 errorcontainer 的 div 上显示错误。

```
$("div#errorcontainer")
    .ajaxError(
        function(e, x, settings, exception) {
            var message;
            var statusErrorMap = {
                '400' : "Server understood the request, but request content was invalid.",
                '401' : "Unauthorized access.",
                '403' : "Forbidden resource can't be accessed.",
                '500' : "Internal server error.",
                '503' : "Service unavailable."
            };
            if (x.status) {
                message =statusErrorMap[x.status];
                                if(!message){
                                      message="Unknown Error \n.";
                                  }
            }else if(exception=='parsererror'){
                message="Error.\nParsing JSON Request failed.";
            }else if(exception=='timeout'){
                message="Request Time out.";
            }else if(exception=='abort'){
                message="Request was aborted by the server";
            }else {
                message="Unknown Error \n.";
            }
            $(this).css("display","inline");
            $(this).html(message);
                 }); 
```

* * *

## 回答 #4

> 赞同：85
> 
> 时间：2011-04-13T15:49:25.120

您需要将其转换`responseText`为 JSON。使用 JQuery：

```
jsonValue = jQuery.parseJSON( jqXHR.responseText );
console.log(jsonValue.Message); 
```

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2013-02-13T12:30:12.777

如果调用 asp.net，这将返回错误消息标题：

我自己并没有编写所有的 formatErrorMessage，但我发现它非常有用。

```
function formatErrorMessage(jqXHR, exception) {

    if (jqXHR.status === 0) {
        return ('Not connected.\nPlease verify your network connection.');
    } else if (jqXHR.status == 404) {
        return ('The requested page not found. [404]');
    } else if (jqXHR.status == 500) {
        return ('Internal Server Error [500].');
    } else if (exception === 'parsererror') {
        return ('Requested JSON parse failed.');
    } else if (exception === 'timeout') {
        return ('Time out error.');
    } else if (exception === 'abort') {
        return ('Ajax request aborted.');
    } else {
        return ('Uncaught Error.\n' + jqXHR.responseText);
    }
}

var jqxhr = $.post(addresshere, function() {
  alert("success");
})
.done(function() { alert("second success"); })
.fail(function(xhr, err) { 

    var responseTitle= $(xhr.responseText).filter('title').get(0);
    alert($(responseTitle).text() + "\n" + formatErrorMessage(xhr, err) ); 
}) 
```

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2016-12-13T17:41:33.713

如果有人像 2016 年一样在这里寻求答案，请使用自 jQuery 3.0`.fail()`起已弃用的错误处理`.error()`

```
$.ajax( "example.php" )
  .done(function() {
    alert( "success" );
  })
  .fail(function(jqXHR, textStatus, errorThrown) {
    //handle error here
  }) 
```

*我希望它有帮助*

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2016-05-18T22:23:57.197

这就是我所做的，到目前为止它在 MVC 5 应用程序中有效。

控制器的返回类型是 ContentResult。

```
public ContentResult DoSomething()
{
    if(somethingIsTrue)
    {
        Response.StatusCode = 500 //Anything other than 2XX HTTP status codes should work
        Response.Write("My Message");
        return new ContentResult();
    }

    //Do something in here//
    string json = "whatever json goes here";

    return new ContentResult{Content = json, ContentType = "application/json"};
} 
```

在客户端，这就是 ajax 函数的样子

```
$.ajax({
    type: "POST",
    url: URL,
    data: DATA,
    dataType: "json",
    success: function (json) {
        //Do something with the returned json object.
    },
    error: function (xhr, status, errorThrown) {
        //Here the status code can be retrieved like;
        xhr.status;

        //The message added to Response object in Controller can be retrieved as following.
        xhr.responseText;
    }
}); 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2011-05-05T08:27:10.267

## 通用/可重复使用的解决方案

提供此答案以供所有遇到此问题的人将来参考。解决方案包括两件事：

1.  **`ModelStateException`在服务器上验证失败时引发的**自定义异常（当我们使用数据注释并使用强类型控制器操作参数时，模型状态会报告验证错误）****
***   **自定义控制器操作错误过滤器** `HandleModelStateExceptionAttribute`，可捕获自定义异常并在正文中返回带有模型状态错误的 HTTP 错误状态**

 **这为 jQuery Ajax 调用提供了最佳的基础设施，以充分利用`success`和`error`处理程序的潜力。

## 客户端代码

```
$.ajax({
    type: "POST",
    url: "some/url",
    success: function(data, status, xhr) {
        // handle success
    },
    error: function(xhr, status, error) {
        // handle error
    }
}); 
```

## 服务器端代码

```
[HandleModelStateException]
public ActionResult Create(User user)
{
    if (!this.ModelState.IsValid)
    {
        throw new ModelStateException(this.ModelState);
    }

    // create new user because validation was successful
} 
```

[这篇博客文章](http://erraticdev.blogspot.com/2010/11/handling-validation-errors-on-ajax.html)详细介绍了整个问题，您可以在其中找到在应用程序中运行它的所有代码。

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2018-03-16T03:33:42.007

```
 error:function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
      }
```

如果要显示应用程序的错误消息，请在代码错误 ajax 请求中捕获错误连接客户端到服务器，在成功范围内发送

如

```
success: function(data){
   //   data is object  send  form server 
   //   property of data 
   //   status  type boolean 
   //   msg     type string
   //   result  type string
  if(data.status){ // true  not error 
         $('#api_text').val(data.result);
  }
  else 
  {
      $('#error_text').val(data.msg);
  }

}
```

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2011-12-01T21:33:03.460

我发现这很好，因为我可以解析我从服务器发送的消息并向用户显示友好的消息，而无需堆栈跟踪......

```
error: function (response) {
      var r = jQuery.parseJSON(response.responseText);
      alert("Message: " + r.Message);
      alert("StackTrace: " + r.StackTrace);
      alert("ExceptionType: " + r.ExceptionType);
} 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2018-02-21T13:04:56.280

*这个函数基本上会生成唯一的随机 API 密钥，如果没有，则会出现带有错误消息的弹出对话框*

**在查看页面中：**

```
<div class="form-group required">
    <label class="col-sm-2 control-label" for="input-storename"><?php echo $entry_storename; ?></label>
    <div class="col-sm-6">
        <input type="text" class="apivalue"  id="api_text" readonly name="API" value="<?php echo strtoupper(substr(md5(rand().microtime()), 0, 12)); ?>" class="form-control" />                                                                    
        <button type="button" class="changeKey1" value="Refresh">Re-Generate</button>
    </div>
</div>

<script>
$(document).ready(function(){
    $('.changeKey1').click(function(){
          debugger;
        $.ajax({
                url  :"index.php?route=account/apiaccess/regenerate",
                type :'POST',
                dataType: "json",
                async:false,
                contentType: "application/json; charset=utf-8",
                success: function(data){
                  var result =  data.sync_id.toUpperCase();
                        if(result){
                          $('#api_text').val(result);
                        }
                  debugger;
                  },
                error: function(xhr, ajaxOptions, thrownError) {
                  alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                }

        });
    });
  });
</script> 
```

**从控制器：**

```
public function regenerate(){
    $json = array();
    $api_key = substr(md5(rand(0,100).microtime()), 0, 12);
    $json['sync_id'] = $api_key; 
    $json['message'] = 'Successfully API Generated';
    $this->response->addHeader('Content-Type: application/json');
    $this->response->setOutput(json_encode($json));
} 
```

可选的回调参数指定在 load() 方法完成时运行的回调函数。回调函数可以有不同的参数：

> 类型：函数（jqXHR jqXHR，字符串 textStatus，字符串 errorThrown ）

*请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数（除了 null）的可能值是“timeout”、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和跨域 JSONP 请求不调用此处理程序。*

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2010-08-14T13:01:55.247

这可能是由于 JSON 字段名称没有引号引起的。

更改 JSON 结构：

```
{welcome:"Welcome"} 
```

至：

```
{"welcome":"Welcome"} 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2017-02-23T10:33:39.753

您在 xhr 对象中有一个抛出异常的 JSON 对象。只需使用

```
alert(xhr.responseJSON.Message); 
```

JSON 对象公开了另外两个属性：“ExceptionType”和“StackTrace”

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2008-12-19T14:11:21.443

我相信 Ajax 响应处理程序使用 HTTP 状态代码来检查是否有错误。

因此，如果您只是在服务器端代码上抛出 Java 异常，但 HTTP 响应没有 500 状态代码，jQuery（或者在这种情况下可能是[XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)对象）将假设一切正常。

我这么说是因为我在 ASP.NET 中遇到了类似的问题，我抛出了类似 ArgumentException("Don't know what to do...") 的东西，但错误处理程序没有触发。

然后`Response.StatusCode`，无论我是否有错误，我都将其设置为 500 或 200。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2011-08-11T22:18:36.847

jQuery.parseJSON 对于成功和错误很有用。

```
$.ajax({
    url: "controller/action",
    type: 'POST',
    success: function (data, textStatus, jqXHR) {
        var obj = jQuery.parseJSON(jqXHR.responseText);
        notify(data.toString());
        notify(textStatus.toString());
    },
    error: function (data, textStatus, jqXHR) { notify(textStatus); }
}); 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-03-06T18:07:29.630

```
$("#save").click(function(){
    $("#save").ajaxError(function(event,xhr,settings,error){
        $(this).html{'error: ' (xhr ?xhr.status : '')+ ' ' + (error ? error:'unknown') + 'page: '+settings.url);
    });
}); 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2010-01-18T18:05:30.643

使用以下方法在服务器上引发新异常：

Response.StatusCode = 500

Response.StatusDescription = ex.Message()

我相信 StatusDescription 被返回给 Ajax 调用......

例子：

```
 Try

            Dim file As String = Request.QueryString("file")

            If String.IsNullOrEmpty(file) Then Throw New Exception("File does not exist")

            Dim sTmpFolder As String = "Temp\" & Session.SessionID.ToString()

            sTmpFolder = IO.Path.Combine(Request.PhysicalApplicationPath(), sTmpFolder)

            file = IO.Path.Combine(sTmpFolder, file)

            If IO.File.Exists(file) Then

                IO.File.Delete(file)

            End If

        Catch ex As Exception

            Response.StatusCode = 500

            Response.StatusDescription = ex.Message()

        End Try 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-06-24T02:05:45.150

尽管问这个问题已经很多年了，但我仍然找不到`xhr.responseText`我想要的答案。它以以下格式返回我的字符串：

```
"{"error":true,"message":"The user name or password is incorrect"}" 
```

我绝对不想向用户展示。我正在寻找的是如下内容：

```
alert(xhr.responseJSON.message); 
```

`xhr.responseJSON.message`给我来自 Json 对象的确切消息，可以显示给用户。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-03-09T17:31:42.820

```
$("#fmlogin").submit(function(){
   $("#fmlogin").ajaxError(function(event,xhr,settings,error){
       $("#loading").fadeOut('fast');       
       $("#showdata").fadeIn('slow');   
       $("#showdata").html('Error please, try again later or reload the Page. Reason: ' + xhr.status);
       setTimeout(function() {$("#showdata").fadeOut({"opacity":"0"})} , 5500 + 1000); // delays 1 sec after the previous one
    });
}); 
```

如果有任何表单提交验证

只需使用其余代码

```
$("#fmlogin").validate({... 
```

`... ... });`

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-05-09T08:41:26.390

首先我们需要在 web.config 中设置 <serviceDebug includeExceptionDetailInFaults="True" />：

```
<serviceBehaviors> 
 <behavior name=""> 
  <serviceMetadata httpGetEnabled="true" /> 
    **<serviceDebug includeExceptionDetailInFaults="true" />** 
 </behavior> 
</serviceBehaviors> 
```

除了 jquery 级别的错误部分之外，您还需要解析包含异常的错误响应，例如：

```
.error(function (response, q, t) { 
  var r = jQuery.parseJSON(response.responseText); 
}); 
```

然后使用 r.Message 您可以实际显示异常文本。

检查完整代码： http: [//www.codegateway.com/2012/04/jquery-ajax-handle-exception-throw-by.html](http://www.codegateway.com/2012/04/jquery-ajax-handle-exception-thrown-by.html)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-10-06T05:24:08.017

就我而言，我刚刚从控制器中删除了 HTTP VERB。

```
 **//[HttpPost]**   ---- just removed this verb
    public JsonResult CascadeDpGetProduct(long categoryId)
    {

        List<ProductModel> list = new List<ProductModel>();
        list = dp.DpProductBasedOnCategoryandQty(categoryId);
        return Json(new SelectList(list, "Value", "Text", JsonRequestBehavior.AllowGet));
    } 
```

# c# - 授权后 ASP.NET MVC 保留发布数据

> ID：377647
> 
> 赞同：4
> 
> 时间：2008-12-18T12:07:34.493
> 
> 标签：c#, asp.net-mvc

我有一个处理表单帖子的操作，但我想确保在操作之前对它们进行身份验证。问题是发布数据丢失，因为他们的用户被重定向到登录页面，然后返回。

```
 [AcceptVerbs(HttpVerbs.Post)]
    [Authorize]
    public ActionResult AskQuestion(string question)
    {
       ....
    } 
```

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T12:13:56.943

POST 通常用于添加、更新或删除数据。当用户执行此操作时，如果需要身份验证，您应该已经对其进行了身份验证。因此，我建议您在 POST 之前更改应用程序的流程以进行身份​​验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T19:57:13.170

您需要将表单值和 RedirectUrl 序列化到隐藏字段。

身份验证后，反序列化隐藏字段中的数据并根据 RedirectUrl 的值进行重定向。

您将需要一个自定义 Authorize 类来处理此问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2008-12-21T12:44:46.610

您还可以使用会话来保存信息...

# cocoa-touch - 导航项从 UINavigationBar 消失

> ID：377654
> 
> 赞同：0
> 
> 时间：2008-12-18T12:11:39.040
> 
> 标签：cocoa-touch

我通过创建图像视图并执行`[navigationController.navigationBar addSubview:imageView]`.

背景很好。但是一旦我这样做，我的其他导航项就会开始以一种奇怪的方式表现。有时`navigationItem.title`出现，后退按钮消失。这完全是随机的。知道是什么原因造成的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T12:28:29.410

在视图设置过程中何时添加子视图？您可能会在添加其他导航项目后执行此操作，因此它会覆盖它们。尝试将其添加到您的 -loadView 方法中，或者等到 -viewWillAppear:，然后在添加后使用 -sendSubviewToBack:。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-26T19:21:09.553

作为一个额外的想法，我设法通过覆盖`drawRect:`来实现一个完全自定义的导航栏，让它显示背景图像。从那里，很容易设置我的导航控制器属性的`leftBarButtonItem`、`rightBarButtonItem`和属性来实现自定义按钮和标题。这适用于内置的导航控制器/导航栏/导航项逻辑，因此不存在隐藏或模糊事物（如栏按钮）的风险。`titleView``navigationItem`

在一个`UINavigationBar`类别中：

```
- ( void )drawRect:( CGRect )rect
{
    [ [ UIImage imageNamed:@"background-image.png" ] drawInRect:CGRectMake( 0, 0, 
      self.frame.size.width, self.frame.size.height ) ];
} 
```

在调用之前`pushViewController:animated:`，请执行以下操作：

```
UIButton * leftButton = [ UIButton buttonWithType:UIButtonTypeCustom ];
leftButton.frame = CGRectMake( 0.0, 0.0, 65.0, 32.0 );
[ leftButton setImage:[ UIImage imageNamed:@"left.png" ] forState:UIControlStateNormal ];
[ leftButton addTarget:self action:@selector( leftAction ) forControlEvents:UIControlEventTouchUpInside ];

UIButton * rightButton = [ UIButton buttonWithType:UIButtonTypeCustom ];
rightButton.frame = CGRectMake( 0.0, 0.0, 65.0, 32.0 );
[ rightButton setImage:[ UIImage imageNamed:@"right.png" ] forState:UIControlStateNormal ];
[ rightButton addTarget:self action:@selector( rightAction ) forControlEvents:UIControlEventTouchUpInside ];

UIImageView * titleView = [ [ UIImageView alloc ] initWithImage:[ UIImage imageNamed:@"title.png" ] ];

UIBarButtonItem * leftBarButtonItem = [ [ UIBarButtonItem alloc ] initWithCustomView :leftButton ];
UIBarButtonItem * rightBarButtonItem = [ [ UIBarButtonItem alloc ] initWithCustomView:rightButton ];

nextController.navigationItem.leftBarButtonItem = leftButtonItem;
nextController.navigationItem.rightBarButtonItem = rightButtonItem;
nextController.navigationItem.titleView = titleView; 
```

可能有点忙，但是您可以将所有这些代码抽象为其他地方的方法（或一系列方法）。如果您想完全覆盖导航栏中出现的任何样式，这种方法往往效果很好。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:15:23.497

将 imageView 设置为索引 0 并解决了我的问题。

# soa - SOA 治理解释

> ID：377656
> 
> 赞同：9
> 
> 时间：2008-12-18T12:13:35.713
> 
> 标签：soa, esb, resource-governor, soa-governance

有人知道 SOA 治理的全部内容吗？SOA 治理和 IT 治理之间有什么区别（或相关性）？以及如何使用市场上可用的 SOA 平台来应用它？

建立在 SOA 平台上的项目可以在不应用 SOA 治理的情况下取得成功吗？如何？我这里是从实用的角度讲的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-19T12:23:48.010

最基本的，SOA 治理是关于管理服务的。在最基本的层面上，您可能会考虑以下主题：

*   管理服务的版本 - 目前已部署 Service 1.0，但现在我们已部署 Service 1.1。我们如何将客户从旧服务重定向到新服务？
*   赋予服务生命周期：服务处于“开发”阶段。现在它已经完成并经过 QAed，我们希望将其转换为“生产”。我们需要有一种方法将元数据添加到服务中以表明这一点——如果我们想删除我们的开发服务但保持我们的生产服务运行怎么办？

显然还有其他的——任何环境都没有硬性的治理解决方案。治理的必要程度是一个热门话题。

免责声明：我在 IBM 担任 WebSphere 顾问，因此我的想法受到影响，而 IBM 产品最常被建议作为上述问题的答案，即 WebSphere Service Registry and Repository。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-01-29T09:43:06.997

SOA 治理是 IT 治理的一个子集，您专注于使用 SOA**定义**、**交付**和**实施**IT 治理规则。它也是**组织范围的**，否则它实际上是毫无意义的，除非作为练习。

IT 治理是公司治理的一个子集，至少*应该有一项为公司所做的事情提供商业价值的政策。*

这是一个例子：

1.  提供商业价值（企业政策）
2.  通过提供一致的服务质量（公司政策）
3.  通过为每个过程提供指标（IT 治理）
4.  通过为每个服务操作提供事务时间（SOA 治理）

随着您深入研究，事情变得更加技术化，实际上更容易执行。

SOA/IT/公司治理基本上类似于立法者（**定义**规则的人）、法官/警察（**执行**规则的人）、我们其他人（**遵守**规则的人）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T19:10:55.927

**“了解 SOA 治理的全部内容吗？...”**

Andrew Ferrier 的回答很好地回答了这个问题。与任何其他资产一样（如果您以这种方式看待服务），服务治理就是控制资产。它类似于代码管理，除了在企业级别上并且通常由业务进行。访问控制、版本控制、所有权等……都是这个领域的概念。

**“建立在 SOA 平台上的项目可以在不应用 SOA 治理的情况下取得成功吗？”**

这取决于你对成功的定义。但是，如果您的意思是可以在没有治理的情况下成功地将 SOA 部署到企业中（几乎不考虑服务在生产后将如何管理），那么答案是响亮的“是”。请注意，在未来的某个时候，最终将讨论企业中部署的服务的重用、可访问性和所有权（仅举几例）。这就是治理的用武之地，您必须手动进行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-18T04:17:52.033

首先，让我们弄清楚**什么是治理？**

治理是确保以有助于实现组织目标的方式利用组织资源的过程，并以透明和可衡量的方式完成。资源可以包括人员、流程或其他物理基础设施。治理的核心是控制决策方式的概念。治理有多种不同类型：

*   公司治理
*   IT 治理
*   架构治理
*   SOA 治理
*   SDLC 治理

**为什么治理变得重要？**

过去十年暴露了几起公司丑闻，这些丑闻凸显了在没有透明度和问责制的情况下做出决策时的陷阱。举个例子，在 90 年代后期，公司 IT 部门基于异想天开的想法启动了许多 IT 项目，即始终处于最前沿，而没有明确的动机说明这些项目将如何为业务做出贡献。

**治理的基石是什么？**

*   戒律
*   人们
*   流程
*   指标

**要了解有关什么是 SOA 治理的更多信息，请参阅[这篇文章](http://www.soagovernance.org/2016/08/what-is-soa-governance.html)。**

**参考**

1.  Prentice.Hall.SOA.Governance.Governing.Shared.Services.On-Premise.and.in.the.Cloud.Apr.2011.ebookmf.com

2.  SOA 治理在行动

3.  服务驱动型企业的面向服务架构 (SOA) 治理

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T12:43:51.907

请参阅[面向服务的体系结构](http://en.wikipedia.org/wiki/Service-oriented_architecture)和[SOA 治理](http://en.wikipedia.org/wiki/SOA_Governance)以获取帮助。

> 面向服务的体系结构 (SOA) 治理是一个概念，用于与对 SOA 中的服务进行控制相关的活动。**SOA 治理可以看作是 IT 治理的一个子集，**它本身就是公司治理的一个子集。重点是那些可用于 SOA 为业务提供价值的资源。
> 
> **SOA 需要一个基于标准并包括策略、合同和服务级别协议的坚实基础**。预计该业务将能够使用服务来快速构建和更改组织的业务流程。为此，需要提供一定程度的可用服务粒度。因此，**SOA 增加了对良好治理的需求，** 因为它将帮助分配决策权、角色和职责，并将重点放在成功所需的组织能力上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-17T14:04:33.753

作为一家大型企业的员工，我们的 SOA 治理方法管理内部标准的使用，例如利用通用消息格式，确保生成的所有 WSDL 符合安全标准，例如确保所有属性都附加了正则表达式以进行验证和对齐与我们的战略业务架构。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-06-25T02:34:53.963

SOA 治理也可以是两层的。通常您将时间花在其内部方面，但 SOA 还旨在解决可能处于完全独立的公司/政府“帐篷”下的合作组织之间的这些问题。

内部标准必须屈从于更大的共同体的意志，至少在互连点上是这样。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-02-12T17:17:47.063

从实用的角度...

> 有人知道 SOA 治理的全部内容吗？

它涉及：

*   为服务（例如，SOAP 和 REST 服务）定义设计标准和治理基础设施。治理基础设施主要是服务注册中心。
*   建立有关服务生命周期的角色、职责和流程。示例：服务托管人负责将新服务的描述添加到服务注册中心；模式保管人将强制执行规范模式设计模式。
*   建立 SOA 治理系统，这实际上是一个包含所有治理指令的文档。该文件应由上级管理人员（例如，CIO）批准。

> SOA 治理和 IT 治理之间有什么区别（或相关性）？

IT 治理范围更广，涵盖从采购工作站到培训软件开发人员。SOA 治理侧重于软件服务，例如 SOAP 和 REST 服务。如果组织采用了 SOA，IT 治理应该包含 SOA 治理。

> 如何使用市场上可用的 SOA 平台应用它？

当然，支持“SOA 服务”开发和执行的平台对于创建和运行 SOAP 和 REST 服务是必要的。但是，您正在创建 SOAP 或 REST 服务这一事实并不意味着您遵循服务导向。同样，使用 ESB 或编排服务器并不意味着您正在以正确的方式进行 SOA。成功的 SOA 不仅关乎技术，还关乎治理和架构（理解和应用面向服务的原则和 SOA 设计模式）。

> 建立在 SOA 平台上的项目可以在不应用 SOA 治理的情况下取得成功吗？

是的，它可以！*SOA 治理的主要目标是通过跨*应用程序的服务的重用、互操作性、标准化和其他良好属性来实现长期利益。SOA 治理可帮助您的组织关注企业而不是应用程序。

# sql - Openbase SQL 区分大小写的奇怪之处（'=' vs. LIKE）——移植到 MySQL

> ID：377664
> 
> 赞同：3
> 
> 时间：2008-12-18T12:18:55.327
> 
> 标签：sql, mysql, case-sensitive, case-insensitive, openbase

我们正在将以前使用 Openbase 7 的应用程序移植到现在使用 MySQL 5.0。

OB 7 在区分大小写方面确实有非常糟糕的定义（即未记录的）行为。我们现在只是在使用 MySQL 尝试相同的查询时才发现这一点。

看起来 OB 7 处理使用“=”的查找与使用“LIKE”的查找不同：如果您有两个值“a”和“A”，并使用 WHERE f="a" 进行查询，那么它只会找到“ a”字段，而不是“A”字段。但是，如果您使用 LIKE 而不是“=”，那么它会同时找到两者。

我们对 MySQL 的测试表明，如果我们使用非二进制排序规则（例如 latin1），那么“=”和“LIKE”都会不区分大小写。然而，为了模拟 OB 的行为，我们只需要让“=”区分大小写。

我们现在正试图弄清楚如何在 MySQL 中处理这个问题，而不必为我们所有的查询添加大量的 LOWER() 函数调用（有很多！）。

我们可以完全控制 MySQL 数据库，这意味着我们可以随意选择它的排序模式（幸运的是，我们的表名和唯一索引不受区分大小写问题的影响）。

任何建议如何以最少的代码更改模拟 MySQL 上的 OpenBase 行为？

（我意识到在我们的源代码中添加 LOWER 调用的一些智能正则表达式替换可能会起到作用，但我们宁愿找到不同的方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T18:50:34.717

另一个想法.. MySQL 是否提供类似用户定义函数的功能？然后，您可以编写一个不区分大小写的 UDF 版本（ci_like 左右），并将所有 like 更改为 ci_like。可能比正则表达式调用 lower in 更容易做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T15:17:38.977

这两篇文章讨论了mysql中的区分大小写：

*   [区分大小写的mysql](http://dev.mysql.com/doc/refman/5.1/en/case-sensitivity.html)
*   [mySql 文档“区分大小写”](http://dev.mysql.com/doc/refman/5.1/en/case-sensitivity.html)

两者都是谷歌搜索的早期热门：

*   [区分大小写的mysql](http://www.google.com/search?client=safari&rls=en-us&q=case+sensitive+mysql&ie=UTF-8&oe=UTF-8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-28T07:01:06.243

我知道这不是您要寻找的答案..但是鉴于您想保持这种行为，您不应该明确地对其进行编码（而不是在某处更改一些神奇的“配置”）吗？

这可能是一项相当多的工作，但至少您会*知道*代码的哪些区域受到影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-30T08:16:27.553

快速浏览一下[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)似乎表明这正是 MySQL 的做法：

> 这意味着如果您使用 col_name LIKE 'a%' 进行搜索，您将获得所有以 A 或 a 开头的列值。

# sharepoint - Sharepoint 工作流程未启动

> ID：377665
> 
> 赞同：1
> 
> 时间：2008-12-18T12:18:58.947
> 
> 标签：sharepoint, workflow

在 Sharepoint MOSS 2007 系统上的某个时间点 wokflow 停止运行。它们不启动，它们的状态始终保持在“启动”状态。对于声明性工作流程，问题仍然存在。即使我们尝试手动运行工作流。通过重新启动 owstimer 服务暂时解决了问题，但大约 5 分钟后它再次停止运行。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-22T07:57:20.123

我们解决了这个问题。由于糟糕的设计和意外的无效输入，这是一个陷入无限循环的工作流程。它在 WSS_Content 数据库的 EventCache 和 ScheduledWorkItems 表中生成大量行。因此，带有 SQLServer 的 WSSTimer 正在吃掉所有试图读取大量数据的资源。问题很难在 Sharepoint 本身上定位，它无法诊断单个工作流实例。我们仅在对数据库本身进行分析后才发现问题。

# c# - 使用 Word 2007 作为 CMS 页面编辑器

> ID：377667
> 
> 赞同：3
> 
> 时间：2008-12-18T12:20:23.890
> 
> 标签：c#, content-management-system, ms-word, publishing, extensibility

我已经搜索了几个小时，但我找不到任何关于此的信息...基本上我想为 word 2007 创建一个模板或插件，以允许某人为 CMS 创建新页面。我想到的是类似于博客文章模板的东西。我知道如何创建基本模板，但我找不到使用 Word 中的发布按钮发布创建的文档的方法。

提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T12:37:18.130

我了解您要达到的目标，但**Word 是错误的起点**。我将从一个更基本的文本编辑器开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-18T12:27:36.590

词很可怕，很可怕，很可怕。您的网站将定义清晰的样式，但 Word 会输出与您网站的 CSS 定义不匹配的讨厌的 HTML。

因此，最好的办法是将 Word 文件拖放到站点中，并让代码以编程方式对其进行分析并将其转换为站点有效的 HTML。在 Java 中，您可以使用 Apache POI，但这仍然很原始。在以微软为中心的世界中可能会容易得多。

在我看来，更好的是强迫人们学习 Markdown、BBCode 或 HTML，或者在你的 CMS 中使用 Styled HTML Editor - 剪切并粘贴纯文本，然后使用 CMS 定义的样式设置样式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T14:24:16.337

当您使用 Word 2007 时，您可以将文档导出为 XML，然后使用 XSLT 生成 HTML。

如果您的 CMS 具有 API 或导入工具，您可以将 Word 的输出转换为适合该接口。

您可以编写一个 Word 宏来向 Word 添加一个发布按钮/菜单选项，以生成正确的输出。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-18T15:02:23.313

这不是一个坏主意，因为**这完全是关于最终用户的**。如果 Word 生成错误的 HTML，您应该在将其发布到 CMS 之前使其语义正确。

我从来没有这样做过，但我确信可以通过“Word 2007 Addin”模板（假设 Office 2007）使用 .NET。

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T14:31:46.697

您是否考虑过使用免费提供的 Javascript 所见即所得编辑器之一，例如 TinyMCE [http://tinymce.moxiecode.com/](http://tinymce.moxiecode.com/)？当配置了所有选项时，它具有令人印象深刻的功能，并且界面与 Word 非常相似。我意识到这并不能直接回答您的问题，但正如其他人指出的那样，从 Word 开始会很困难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-02-06T20:12:57.980

也许对您有所帮助，[umbraco CMS](http://umbraco.org/)允许使用 Microsoft Word 进行编辑。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-18T12:56:15.517

如果您使用 SharePoint 2007 作为您的 CMS，您可以做任何您想做的事情。您可以在 SharePoint 2007 上设置博客并从 Word 发布到博客。如果您在客户端使用 Office 2007，那么您将获得一些不错的按钮，例如“发布到我的博客”等。

如果您不能使用 SharePoint 或谈论现有的 CMS，那么您需要克服很多障碍。这是一项重大任务，您无法从 Stack Overflow 中得到简单的答案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-01-13T15:22:07.607

我一直在为自定义 CMS 系统编写 Word 插件的团队中工作。它是用 VB6 编写的，能够获取 Word 文档并将基本格式信息（列表、粗体、斜体甚至表格）转换为 HTML，然后上传到服务器。不过，它并没有在插件中创建新页面或管理站点。

根据我的经验，我绝对会避免选择 Word 作为 CMS 的编辑器。最大的问题是每次您想要更新插件时，您必须将其重新分发给使用它的公司或公司。您可以将其作为 IE 的 active-x 控件来执行，但通过 Javascript 编辑器使用户无法使用一组有限的样式选项要容易得多。

Word 确实有一个强大的 API 来处理您的内容，但是我们需要禁用 Word 中的许多选项以避免不需要的字体等等，它最终更像是 Wordpad 而不是 Word。

如果它是一个新建项目并且您有时间，我实际上会推荐使用 Silverlight 4.0 而不是 Javascript 编辑器。4.0 版内置了丰富的文本框控件，此外还有出色的 Vectorlight 控件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T16:13:15.043

出于某种原因，这是 Excel 喜欢但 Word 不喜欢的功能。Excel 可以在您保存文档时自动发布文档的 HTML 文件版本。
不幸的是，Word 似乎只能在使用 Sharepoint 时才能实现此功能，这很可惜，因为它可能非常有用。

除了创建自己的加载项之外，您可以做的就是在模板中添加一些代码，以便在用户保存文档时创建文档的 HTML 副本。

*   首先，确保您的模板已启用宏（另存为`.dotm`文件）。
*   二、在Word中编辑模板的同时，打开VBA代码编辑器（ALT-F11）
*   在`project`列表中双击您的文档以打开其代码隐藏文件。
*   向其中添加以下代码，将`ActiveDocument.SaveAs`路径修改为更适合您的内容，例如 CMS 公开的共享网络文件夹。

    ```
    Sub FileSave()
        ' First Save the main document
        ActiveDocument.Save
        ' Now we create a new document based on the current one
        Selection.WholeStory
        Selection.Copy
        Documents.Add
        Selection.PasteAndFormat wdPasteDefault
        ' Save it as HTML and close it
        ActiveDocument.SaveAs "c:\temp\mydoc.html", fileformat:=wdFormatHTML
        ActiveDocument.Close
    End Sub 
    ```

这会将原始文件复制到一个空白的新文件中，该文件将保存为 HTML 并在返回原始文件之前关闭。

`Documents.Add`如果您想使用与该模板不同的模板，您可以检查其中的一些选项`normal`。

**安全**

由于此模板包含宏，因此您必须将它与 Word 期望的其他模板一起安装。
否则，您将收到安全警告。
为避免获取它，您可以将模板所在的路径添加到Word 的“选项”>“信任中心”>“信任中心设置”>“受*信任位置”下的“受信任位置”列表中。*

# .net - 当客户端可以位于代理、防火墙或 NAT 之后时，您能否使用 WCF 实现加密的双向通信？

> ID：377686
> 
> 赞同：1
> 
> 时间：2008-12-18T12:31:14.913
> 
> 标签：.net, wcf, wcf-binding

我有一个客户端和一个服务器都是用 .net 3.5 编写的，所以我没有互操作性问题。

服务器可在端口 443 上完全访问（我正在托管它，因此我可以在需要时打开其他端口）

然而，客户端不太容易访问。它通常位于公司防火墙或 NAT 之后，或使用 http/https 代理连接到 Internet。

我需要在客户端和服务器之间建立加密的双向通信。

WCF 中提供的两个双向通道似乎无法解决问题：

*   NetTcpBinding 似乎不支持 http 代理（[来源](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/0900c7f0-948f-45f1-a53e-9434921af5ce)）

*   WSDualHttpBinding 要求客户端有一个为服务提供回调端点的公共 URI，不幸的是这里不是这种情况（[来源](http://msdn.microsoft.com/en-us/library/system.servicemodel.wsdualhttpbinding.aspx)）

WCF 是否可以在不调整客户端的防火墙/代理设置的情况下建立这种加密的双向连接（如果需要，静默使用 https 调谐）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T15:30:18.390

您正在寻找一种名为 Comet 的技术。[Wikipedia entry](http://en.wikipedia.org/wiki/Comet_(programming)) 如果您在 Google 上搜索“comet wcf”，您会发现可以为您指明正确方向的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-17T19:06:31.127

I have a similar need, and I saw this article about the Comet-esque feature that they've provided for Silverlight 2 over WCF: [Silverlight Polling Duplex](http://petermcg.wordpress.com/2008/09/03/silverlight-polling-duplex-part-1-architecture/).

I haven't tried it yet but I'm thinking that the assembly built against the desktop runtime may include the client classes as well, if that's the case then this may be usable outside of Silverlight.

Edit: I checked both assemblies and they both implement the same Bindings and Channels, it looks like the same code just built against the desktop framework; so you should be able to use the "Server" assembly in a desktop application.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-24T12:24:32.373

根据我得到的类似问题的[答案](https://stackoverflow.com/questions/4461591/how-to-establish-2-way-communication-between-a-web-server-and-a-site-server/4461751#4461751)，.NET v4 确实通过带有 WSDualHttpBinding 类的 NAT 工作。你的问题是几年前被问到的，所以那不是你的选择......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:32:56.793

[我在这里](http://blogs.infosupport.com/porint/archive/2007/08/14/Configuring-a-proxy_2D00_server-for-WCF.aspx)发现了一些有趣的信息

基本上，可以像这样编辑 app.config 文件：

```
<system.net>
   <defaultProxy useDefaultCredentials="true">
      <proxy bypassonlocal="False" proxyaddress="http://gateway:8080" />
   </defaultProxy>
</system.net> 
```

我不确定它是否适用于 NetTcpBinding，尽管文章声称它适用于自定义绑定。我会试一试，让你知道发生了什么。

**更新：**它不起作用（defaultproxy 配置仅适用于 http 和 https 请求）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T12:38:41.933

是的。您可以使用 WSDualHttpBinding 或 NetTcpBinding。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T14:08:45.620

一个合理的防火墙应该允许这种行为。由于通信是由客户端发起的，有状态防火墙将允许通信通道保持打开状态，但仅限于两个知名端点之间。

# asp.net - 从 Javascript 调用 ASP.NET 中按钮的服务器事件

> ID：377691
> 
> 赞同：2
> 
> 时间：2008-12-18T12:34:39.740
> 
> 标签：asp.net, javascript, postback

我有一个按钮，我需要在 javascript 中显示一个弹出窗口。所以在它的客户端点击我调用一个 javascript 函数来做到这一点。

如果用户点击“是”，我需要回发并调用按钮服务器端点击事件，这是我在 javascript 函数中所做的

```
__doPostBack(deleteLinkButton, 'Click'); 

' Where deleteLinkButton is a variable that has client Id of the button. 
```

回发发生，但它没有进入该按钮的点击处理程序。

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-12-20T08:51:32.317

可以这样做：

```
document.getElementById('<%= Button.ClientID %>').click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T12:40:18.653

试试这样：

```
__doPostBack('deleteLinkButton', 'Click'); 
```

# c++ - 带有标准输入的 C++ 字符数组

> ID：377695
> 
> 赞同：1
> 
> 时间：2008-12-18T12:37:23.730
> 
> 标签：c++, arrays, string, pointers, sizeof

我正在尝试获取由 stdin 填充的数组的大小：

```
char *myArray;
cin >> myArray
cout << sizeof(myArray); 
```

当我输入一个长度大于 4 的字符串时返回 4，例如“40905898”

我哪里错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T12:46:09.920

`sizeof`运算符静态评估您传递给它的东西的大小。A`char*`是一个指针，取决于机器架构，它具有特定的大小（32 位系统上为 4 字节，64 位机器上为 8 字节）。为了完成你想要做的事情，我建议你使用`string`可以通过添加到源文件中来`#include <string>`使用的类型。`using namespace std;`

```
string line;
cin >> line;
cout << line.length() << endl; 
```

它不易出错且更易于使用。

顺便说一句，你试图做的事情真的很危险。实际上，当您使用 时`cin >> myArray`，您应该已经分配了一些尚未分配的内存`myArray`。这将导致内存损坏，这可能会使您的程序崩溃并可能将其置于缓冲区溢出攻击中。

C++ 中的简单数组不知道它的大小。`sizeof` **仅当数组是静态分配的**并且您在数组本身上使用时才可以使用`sizeof`，而不是另一个指向它的指针，例如，这不会像您期望的那样工作：

```
int x[5];
int *a = &x[0];
// a[i] is now the same as x[i] but:
cout << sizeof(x) << endl; // prints 20, assuming int is 32 bits long
cout << sizeof(a) << endl; // prints 4, assuming a pointer is 32 bits long 
```

请注意，数组的总大小打印在第一行，而不是元素计数。您可以使用它`sizeof(x)/sizeof(*x)`来找出静态数组中的元素计数。这对于使用动态分配的数组是不可能的`new`。事实上，C++ 数组非常容易出错，在使用它们时应该格外小心，并且在大多数情况下最好使用`vector`and 。`string`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T12:39:27.780

sizeof(pointer) 将始终返回 4。您想使用 strlen()。

编辑：IIRC，sizeof 在编译时评估，它只关心类型，而不关心内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T12:40:00.057

这是因为 myArray 是一个占用 4 个字节的指针。如果要获取字符串的长度，请使用 strlen 或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T12:50:40.350

您在这里似乎有很多问题：

myArray 未初始化 - 输入在哪里？

你通常使用：cin >> myArray; （注意人字形和分号的方向）

sizeof(myArray) 将始终返回相同的值（在您的平台上为 4）

试试这个版本：

```
char* myArray= new char[50];
cin >> myArray;
cout << myArray;
cout << strlen(myArray); 
```

它并非没有自己的问题（我应该删除 myArray），所以你应该在这里尝试使用的答案`string myArray`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T12:51:00.050

这是因为您在指针上使用 sizeof()，在 32 位计算机上是 4 个字节：

```
printf("Pointer size: %d\n", sizeof(void*)); 
```

如果您的数组是以 null 结尾的字符串（最后一个元素是零字节或 '\0'），那么您可以使用

```
strlen(myArray) 
```

获取元素的数量（减一）。例如：

```
myArray = "Hello, world!";
printf("Number of characters: %d\n", strlen(myArray)); 
```

您还可以使用静态分配的数组，如下所示：

```
 char array[128];
 printf("sizeof(array) = %d\n", sizeof(array));
 // prints 128 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T12:51:27.930

正如其他人所说， myArray 是一个指针。

但是你为什么不使用`std::string`呢？您不需要自己进行缓冲区分配，这在您的示例中是错误的（指针`myArray`指向任何内容）

```
std::string myValue;
std::cin >> myValue;
std::cout << myValue.length(); 
```

如果需要，您可以使用`string::c_str()`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T12:53:46.193

正如其他人所说`sizeof`，返回传递给它的对象的大小，对于指针，它是指针的大小。`sizeof`不跟随指针来查看*它*指向的对象的大小（它怎么知道它可以指向一个`char`或指向一个数组，没有好方法知道）。

此外，当您读取时，`cin`您必须分配一些必须读取数据的空间，`cin`不会为您分配空间。您可以在堆栈或堆上分配空间：

```
char stack_line[1024]; // This will overflow if more than 1024 chars are needed
char heap_line*  = new char[1024]; // ditto 
```

这里要注意的是，`sizeof(stack_line) == 1024`虽然`sizeof(heap_line) == 4` ^([在 32 位机器上])所以你在使用操作符时必须小心`sizeof`。

在实践中，最好使用`std::string`知道如何分配空间本身的 an。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-25T18:11:18.600

*好吧，*如果你要使用 sizeof(myArray)，你应该使用 sizeof(*myArray); 因为使用指针，没有星号是地址而不是值。像这样：

```
char *myArray;
cin >> *myArray;
cout << *myArray; 
```

# javascript - 格式化表格看起来不像表格/没有表格的 JS 排序？

> ID：377707
> 
> 赞同：0
> 
> 时间：2008-12-18T12:42:43.627
> 
> 标签：javascript, jquery, sorting

我正在设计一个界面来显示数据集。我有兴趣使用 DIV 和 SPAN 以自定义格式组织信息，以确定特定数据的位置（不是在典型的逐行格式表中提供），但仍然可以灵活地对大多数数据进行排序和组织JS 库提供表格。有没有办法在不推出自己的解决方案的情况下获得两全其美？

我想使用 JS 对数据进行动态排序。我不想做疯狂的排序……诸如“按类型分组”、字母排序、日期排序、升序/降序等任务。我知道我可以预先排序并在后端显示，但我想减少服务器负载并希望使不必要的计算远离服务器。如果有办法在客户端进行排序和组织，那将是最好的。我的偏好是在后端使用 PHP，在前端使用 jQuery 库。如果有帮助，我也在使用 mySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T12:47:46.220

好像你想要[TinySort 插件](http://plugins.jquery.com/project/TinySort)。

> TinySort 将根据其文本或属性值或其中一个子节点的值对任何节点类型进行排序。

这是[文档](http://www.sjeiti.com/?page_id=321)。

# sql-server - SQL Server 数据/输入验证

> ID：377709
> 
> 赞同：0
> 
> 时间：2008-12-18T12:43:19.130
> 
> 标签：sql-server, validation

我正在考虑为 MS SQL Server 2005 的一些插入和更新语句添加验证。我希望能够在将插入的值写入表之前检查它 - 在这种特殊情况下，它是一个整数字段，数据必须符合到一个规则。所以一个简单的模式可以是：

```
([id] [int] identity(1,1), [name] [nvarchar], [magicvalue] [int]) 
```

而magicvalue是我要验证的。但是，当索引和外键约束不适合时，这是“最佳实践”的普遍问题。我想我不确定触发器或约束是否是要走的路，或者是否还有其他方法。

一个例子是可选的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T12:47:34.987

为此使用约束

例如

```
CREATE TABLE [dbo].[SalesHistory](
      [SaleID] [int]  NOT NULL,
      [Product] [char](150) NULL,
      [SaleDate] [datetime] NULL,
      [SalePrice] [money] NULL CHECK (SalePrice > 4)

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T18:39:16.947

这取决于验证的复杂程度。如果您可以在通常比触发器更有效的约束中执行此操作。但是，triigers 可以处理约束不能处理的更复杂的验证。

# jquery - 重命名 jQuery 选项卡？

> ID：377711
> 
> 赞同：1
> 
> 时间：2008-12-18T12:44:11.627
> 
> 标签：jquery, user-interface, tabs

是否可以重命名 jQuery UI 选项卡控件中的所有选项卡？我的标签从 1..N 开始编号，并且可以从中删除标签。我想“重命名”其余选项卡，以便在删除第四个选项卡时它们编号为 1、2、3、4、5、6 和 1、2、3、5、6、7。它们最终应该由基于 1 的索引命名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T13:20:39.883

如果您使用的是[Tabs_3](http://docs.jquery.com/UI/Tabs)，那么这很容易。简单地：

```
var n = 1;
$('#example > ul span').each(function() { this.innerHTML=n;n++; }); 
```

# javascript - Javascript 自动 getter/setter (John Resig Book)

> ID：377716
> 
> 赞同：19
> 
> 时间：2008-12-18T12:45:59.860
> 
> 标签：javascript, metaprogramming

我正在阅读 John Resig 的“ [Pro Javascript Techniques](http://jspro.org/) ”，我对一个例子感到困惑。这是代码：

```
// Create a new user object that accepts an object of properties
function User( properties ) {
  // Iterate through the properties of the object, and make sure
  // that it's properly scoped (as discussed previously)
  for ( var i in properties ) { (function(){
  // Create a new getter for the property
  this[ "get" + i ] = function() {
    return properties[i];
  };
  // Create a new setter for the property
  this[ "set" + i ] = function(val) {
    properties[i] = val;
  };
})(); }
}

// Create a new user object instance and pass in an object of
// properties to seed it with
var user = new User({
  name: "Bob",
  age: 44
});

// Just note that the name property does not exist, as it's private
// within the properties object
alert( user.name == null );

// However, we're able to access its value using the new getname()
// method, that was dynamically generated
alert( user.getname() == "Bob" );

// Finally, we can see that it's possible to set and get the age using
// the newly generated functions
user.setage( 22 );
alert( user.getage() == 22 ); 
```

现在在 Firebug 控制台（在 FF3 上）上运行它会抛出 user.getname() 不是一个函数。我试过这样做：

```
var other = User
other()
window.getname() --> this works! 
```

它奏效了！

知道为什么吗？谢谢大家！

PS：强烈推荐这本书。

**编辑：**

正在做：

```
var me = this; 
```

似乎工作得更好一些，但是当执行“getname（）”时，它返回“44”（第二个属性）......

我也觉得奇怪的是它在没有修改的情况下在窗口对象上工作......

第三个问题，PEZ解决方案和原来的有什么区别？（他不使用匿名函数）

感谢大家的反馈！+1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-19T13:57:08.120

**我认为在 JavaScript 中工作时最好不要使用`new`关键字。**

这是因为如果您随后在**不**使用 new 关键字（例如：）的情况`var user = User()`下错误地实例化对象，*会发生非常糟糕的事情......*原因是在函数中（如果在没有`new`关键字的情况下实例化），`this`将引用**全局对象**，即`window`...

因此，我建议一种更好的方法来使用类对象。

考虑以下示例：

```
var user = function (props) {
    var pObject = {};
    for (p in props) {
        (function (pc) {
            pObject['set' + pc] = function (v) {
                props[pc] = v;
                return pObject;
            }
            pObject['get' + pc] = function () {
                return props[pc];
            }
        })(p);
    }
    return pObject;
} 
```

在上面的示例中，我在函数内部创建了一个新对象，然后将 getter 和 setter 附加到这个新创建的对象上。

最后，我将返回这个新创建的对象。*请注意，`this`关键字不在任何地方使用*

然后，要“实例化” a `user`，我会执行以下操作：

```
var john = user({name : 'Andreas', age : 21});
john.getname(); //returns 'Andreas'
john.setage(19).getage(); //returns 19 
```

**避免陷入陷阱的最好方法是首先不创建它们**......在上面的示例中，我正在避免`new`关键字陷阱（*正如我所说，`new`在应该使用关键字时不使用它会导致不好的事情发生*）**完全不使用`new`。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T12:58:40.193

编辑：现在，改编杰森的答案，它的工作原理：

我们需要为这些值做一个闭包。这是一种方法：

```
function bindAccessors(o, property, value) {
  var _value = value;
  o["get" + property] = function() {
    return _value;
  };
  o["set" + property] = function(v) {
    _value = v;
  };
} 
```

然后 User 构造函数如下所示：

```
function User( properties ) {
  for (var i in properties ) {
    bindAccessors(this, i, properties[i]);
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T16:26:43.720

你可能想要这样的东西，它更具可读性：（一旦你得到一些练习，闭包很容易学习）

```
function User( properties ) {
  // helper function to create closures based on passed-in arguments:
  var bindGetterSetter = function(obj,p,properties)
  {
    obj["get"+p]=function() { return properties[p]; }
    obj["set"+p]=function(val) { properties[p]=val; return this; }
  };
  for (var p in properties)
    bindGetterSetter(this, p, properties);
} 
```

我还添加了“return this;” 所以你可以这样做：

```
u=new User({a: 1, b:77, c:48});
u.seta(3).setb(20).setc(400) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-19T13:14:30.403

我开始这篇文章的唯一目的是了解为什么会发生这种情况，我终于做到了。因此，如果有人对这里的“为什么”感兴趣，他们是：

**为什么'this'会在匿名函数内部发生变化？**

一个新函数，即使它是匿名的，在一个对象或另一个函数中声明总是改变范围，在这种情况下返回到全局范围（窗口）

*解决方案：*帖子中的所有内容，我认为更清楚的是使用 .call(this) 执行匿名函数

**为什么 getname() 总是返回年龄？**

虽然匿名函数会立即执行，但 getter/setter 会在它们被调用时第一次执行。在那一刻，**i**的值将始终是最后一个，因为它已经迭代了所有属性......并且将始终返回 properties[i] 这是最后一个值，在这种情况下是年龄。

*解决方案：*将 i 值保存在这样的变量中

```
 for ( i in properties ) { (function(){ 
  var j = i
  //from now on use properties[j] 
```

基本上就是这样，如果我说的有什么错误，请纠正我，因为我正在努力学习这个......

再次感谢。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-18T13:08:57.253

正如 OP`this`中所写的那样，循环中并没有像应有的那样引用 User 对象。如果您在循环外捕获该变量，则可以使其工作：

```
function User( properties ) {
  // Iterate through the properties of the object, and make sure
  // that it's properly scoped (as discussed previously)
 var me = this;
 for ( i in properties ) { (function(){
  // Create a new getter for the property
  me[ "get" + i ] = function() {
    return properties[i];
  };
  // Create a new setter for the property
  me[ "set" + i ] = function(val) {
    properties[i] = val;
  };
 // etc 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-10-31T06:21:26.783

我刚刚修改了代码有点像这样..这个应该可以工作..这与设置 me=this; 相同 但是需要一个闭包来正确设置每个属性的值，否则最后一个值将分配给所有属性。

```
 // Create a new user object that accepts an object of properties
    var User = function( properties ) {
      // Iterate through the properties of the object, and make sure
      // that it's properly scoped (as discussed previously)
      var THIS = this;
      for ( var i in properties ) { (function(i){
      // Create a new getter for the property
      THIS[ "get" + i ] = function() {
        return properties[i];
      };
      // Create a new setter for the property
      THIS[ "set" + i ] = function(val) {
        properties[i] = val;
      };
    })(i); }
    }

    // Create a new user object instance and pass in an object of
    // properties to seed it with
    var user = new User({
      name: "Bob",
      age: 44
    });

// Just note that the name property does not exist, as it's private
// within the properties object
alert( user.name == null );

// However, we're able to access its value using the new getname()
// method, that was dynamically generated
alert( user.getname() == "Bob" );

// Finally, we can see that it's possible to set and get the age using
// the newly generated functions
user.setage( 22 );
alert( user.getage() == 22 ); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-18T15:15:39.323

也许变量**i**被迭代中的最后一个值“封闭”（“年龄”）？然后所有的 getter 和 setter 都将访问 properties["age"]。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T14:12:36.860

我发现了一些似乎是答案的东西，它全都与上下文有关。使用 for 中的匿名函数，更改上下文，使 'this' 引用窗口对象，不是很奇怪吗？

所以：

```
function User( properties ) {

  for ( var i in properties ) { 
     // here this == User Object
    (function(){
     // inside this anonymous function this == window object
    this[ "get" + i ] = function() {
      return properties[i];
    };

    this[ "set" + i ] = function(val) {
      properties[i] = val;
    };
    })(); 
  }
} 
```

我不知道为什么那个函数会改变执行的上下文，我不确定它应该这样做，无论如何你可以测试它在那里运行代码并尝试 window.getname() 并且它神奇地工作！:S

之前所说的解决方案是改变上下文，它可以像 J Cooper 所说的那样完成，传递变量'me'并使函数成为闭包，或者你可以这样做：

```
(function(){
     // inside this anonymous function this == User because we called it with 'call'
    this[ "get" + i ] = function() {
      return properties[i];
    };

    this[ "set" + i ] = function(val) {
      properties[i] = val;
    };
 }).call(this); 
```

无论如何，运行'getname'时我仍然得到44......有什么想法吗？

# permutation - 帮助排列算法的特殊情况（不是通常的）

> ID：377722
> 
> 赞同：2
> 
> 时间：2008-12-18T12:48:04.630
> 
> 标签：permutation

我一直对算法、排序、加密、二叉树、数据压缩、内存操作等感兴趣。

我用 STL 函数 next_perm() 阅读了 Mark Nelson 关于 C++ 中排列的文章，非常有趣和有用，之后我编写了一个类方法来在 Delphi 中获取下一个排列，因为这是我目前使用最多的工具。这个函数适用于字典顺序，我从stackoverflow上另一个主题的答案中得到了算法的想法，但现在我遇到了一个大问题。我正在处理向量中重复元素的排列，并且有很多我不需要的排列。例如，我有 7 个元素的第一个排列（按字典顺序）：

6667778（6 = 连续 3 次，7 = 连续 3 次）

对于我的工作，我认为有效的烫发只有那些最多连续重复 2 个元素的烫发，如下所示：

6676778（6 = 连续 2 次，7 = 连续 2 次）

简而言之，我需要一个函数，该函数根据收到的参数仅返回最多具有 N 个连续重复的排列。

有谁知道是否有一些算法已经这样做了？

很抱歉文本中的任何错误，我仍然不会说英语。

非常感谢，卡洛斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T19:52:41.240

我的方法是递归生成器，它不遵循包含非法序列的分支。

这是python 3代码：

```
def perm_maxlen(elements, prefix = "", maxlen = 2):
    if not elements: 
        yield prefix + elements
        return

    used = set()

    for i in range(len(elements)):
        element = elements[i]
        if element in used:
            #already searched this path
            continue

        used.add(element)

        suffix = prefix[-maxlen:] + element
        if len(suffix) > maxlen and len(set(suffix)) == 1:
            #would exceed maximum run length
            continue

        sub_elements = elements[:i] + elements[i+1:]
        for perm in perm_maxlen(sub_elements, prefix + element, maxlen):
            yield perm

for perm in perm_maxlen("6667778"):
    print(perm) 
```

实现是为了可读性而不是速度而编写的，但是该算法应该比简单地过滤所有排列要快得多。

```
print(len(perm_maxlen("a"*100 + "b"*100, "", 1))) 
```

例如，它以毫秒为单位运行，而朴素的过滤解决方案可能需要数千年的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T13:48:28.297

所以，在家庭作业帮助的方式中，我可以想到两种方法。

计算出包含 3 个或更多连续重复的所有排列（您可以通过将一行中的三个视为一个伪数字并将其提供给正常的排列生成算法来完成）。制作所有这些的查找表。现在生成原始字符串的所有排列，并在将它们添加到结果之前在查找表中查找它们。

使用递归排列生成算法（依次选择第一个数字的每种可能性，递归以生成剩余数字的排列），但在每个递归中，传递到目前为止生成的最后两个数字。那么在递归调用的函数中，如果传入的两个值相同，则不允许第一个数字与那些相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T23:04:27.410

为什么不围绕正常置换函数制作一个包装器来跳过具有 N 个连续重复的值？就像是：

（伪代码）

```
funciton custom_perm(int max_rep)
  do
    p := next_perm()
  while count_max_rerps(p) < max_rep
  return p 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T23:22:00.183

Krusty，我已经在函数结束时这样做了，但没有解决问题，因为需要生成所有排列并检查它们。

```
consecutive := 1;
IsValid := True;
for n := 0 to len - 2 do
begin
    if anyVector[n] = anyVector[n + 1] then
        consecutive := consecutive + 1
    else
        consecutive := 1;
    if consecutive > MaxConsecutiveRepeats then
    begin
        IsValid := False;
        Break;
    end;
end; 
```

由于我确实从字典顺序中的第一个开始，因此最终需要通过这种方式生成许多不必要的烫发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T18:09:38.983

这很容易做到，但很难提高效率。

如果您需要构建仅考虑有效输出的单段代码，因此不必费心遍历整个组合空间，那么您将需要考虑一些事情。

另一方面，如果您可以使用内部生成所有组合的代码，无论是否有效，那么它应该很简单。

创建一个新的枚举器，您可以在其上调用 next_perm 方法，并让它在内部使用另一个枚举器，即生成每个组合的枚举器。

然后简单地让外部枚举器在 while 循环中运行，向内部枚举器询问更多排列，直到找到一个有效的排列，然后产生它。

伪代码：

```
generator1:
    when called, yield the next combination

generator2:
    internally keep a generator1 object
    when called, keep asking generator1 for a new combination
        check the combination
        if valid, then yield it 
```

# ruby - 284 无法在动态链接库 SSLEAY32.dll 中找到

> ID：377724
> 
> 赞同：5
> 
> 时间：2008-12-18T12:49:09.447
> 
> 标签：ruby, postgresql

Postgres 8.3 安装在 Windows 2008 服务器上。安装了 Ruby 1.8-6。宝石安装 ruby​​-postgres。

尝试简单连接时，我得到

## ruby.exe - 未找到序数

## 无法在动态链接库 SSLEAY32.dll 中找到序号 284。

## 好的

postgres 8.3 附带的 ssleay32 和 ruby​​ 1.8-6 之间似乎存在一些冲突

我知道我可以使用 gem postgres-pr 但我更喜欢使用 ruby​​-postgres 因为这是我在所有其他设置中使用的，即使它们中的大多数是在 linux 而不是 windows 下运行的。

所以问题是，有没有人解决这个问题以及如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-15T23:50:39.813

就为 OpenSSL 使用最新的二进制文件而言，任何更好的解决方案是在 ruby​​\bin 文件夹和 posgresql\lib 文件夹中重命名 libeay32.dll 和 ssleay32.dll 并从[http:/安装最新的 OpenSSL /www.slproweb.com/products/Win32OpenSSL.html](http://www.slproweb.com/products/Win32OpenSSL.html)，在撰写本文时它是“Win32 OpenSSL v0.9.8j Light”，将目录放在路径中，然后离开，它对我有用！您会感受到使用最新且最安全的 OpenSSL 库的温暖感觉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T13:35:01.663

迈尔斯·乔治

> 这可能是最好的开始方式，但最终您会希望改用 ruby​​-postgres。使该驱动程序正常工作的技巧是将 2 个 dll 文件从 C:\program files\posgresql\lib 文件夹复制到 c:\ruby\bin 文件夹。我认为这两个文件是 libeay32.dll 和 ssleay32.dll

我认为另一种方法是使用信任而不是来自本地主机的 md5。因为我认为这种对 ssleay 的需求应该与身份验证有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-21T08:12:53.103

在 Windows 下无需做太多事情即可获得最小的东西。

使用： gem install ruby​​-postgres

然后安装 pgadmin 的 windows 版本并从那里使用所有需要的文件（cp 从 pgadmin\bin 到 ruby​​\bin 或通过将 PATH 设置为 pgadmin\bin）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-21T08:21:24.677

我从未接触过 ruby​​ 或 postgres，但您使用的是旧版本的 openssl，而不是它编译的版本。最新版本是 openssl-0.9.8j，因此要构建它：

下载并解压，然后使用visual c++ 2008 express + active perl：

C:\openssl-0.9.8j>perl 配置VC-WIN32

C:\openssl-0.9.8j>ms\do_masm

C:\openssl-0.9.8j>nmake -f ms\ntdll.mak

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T04:34:16.417

只需复制[OpenSSL的最新二进制文件](http://slproweb.com/products/Win32OpenSSL.html)

# sql - 性能 - 单连接选择与多个简单选择

> ID：377729
> 
> 赞同：25
> 
> 时间：2008-12-18T12:50:43.843
> 
> 标签：sql, database, performance

就性能而言，什么更好？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-18T12:53:27.770

只有一种方法可以知道：计时。

总的来说，我认为单个连接可以使数据库进行很多优化，因为它可以看到它需要扫描的所有表，减少开销，并且可以在本地构建结果集。

最近，我在代码中将大约 100 个选择语句更改为 JOIN。通过几个索引，我能够从 1 分钟的运行时间缩短到大约 0.6 秒。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-18T12:58:37.087

单个连接通常会胜过多个单个选择。但是，有太多不同的案例适合您的问题。在一个简单的规则下将它们混为一谈是不明智的。

更重要的是，如果您和下一个程序员在使用 SQL 时“说同一种语言”，那么下一个程序员通常更容易理解和修改单个连接。我说的是元组集的语言。

同样重要的是，数据库物理设计和查询设计需要首先关注会导致十比一速度提升的问题，而不是 10% 的速度提升。如果您要进行数千次简单的选择而不是一次连接，您可能会获得十对一的优势。如果您正在执行三到四次简单的选择，那么无论哪种方式，您都不会看到很大的改进。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-12-18T13:06:29.863

不要尝试将自己的连接循环编写为一堆选择。您的数据库服务器有许多巧妙的连接算法。此外，您的数据库服务器可以使用统计数据和估计的访问成本来动态选择连接算法。

数据库服务器的连接算法——通常——比你可能编造的任何东西都要好。他们更了解物理 I/O、缓存等等。

这使您可以专注于您的问题域。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-18T14:33:10.937

除了已经说过的内容之外要考虑的一件事是，选择将通过网络返回比连接可能会返回的更多数据。如果网络连接已经成为瓶颈，这可能会使情况变得更糟，尤其是如果经常这样做的话。也就是说，在任何表现不佳的情况下，您最好的选择就是测试、测试、测试。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-12-18T13:04:43.160

这完全取决于数据库将如何优化连接以及索引的使用。

我有一个缓慢而复杂的查询，有很多连接。然后我将其细分为 2 或 3 个不太复杂的查询。性能提升是惊人的。

但最后，“这取决于”，你必须知道瓶颈在哪里。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T13:44:42.720

如前所述，没有上下文就没有正确的答案。

对此的答案取决于（从我的脑海中）：

*   加盟金额
*   加入的类型
*   索引
*   对于要连接的任何单独的部分，您可以重复使用的数量
*   要处理的数据量
*   服务器设置
*   等等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T13:10:18.797

如果您使用的是 SQL Server（我不确定这是否适用于其他 RDBMS），我建议您将执行计划与查询结果捆绑在一起。这将使您能够准确查看查询的执行方式以及导致任何瓶颈的原因。

在您知道 SQL Server 实际在做什么之前，我不会冒险猜测哪个查询更好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T13:27:17.590

如果您的数据库有大量数据......并且有多个连接，那么请使用索引以获得更好的性能。

如果在这种情况下存在左/右外连接，则使用多选。

这一切都取决于您的数据库大小、查询、索引（还包括主键和外键）......人们无法对您的问题得出是/否的结论。

# java - Oracle JDBC 欧元字符

> ID：377745
> 
> 赞同：1
> 
> 时间：2008-12-18T12:55:24.927
> 
> 标签：java, database, oracle, jdbc

在使用 Oracle 10.2.0.3 JDBC 驱动程序从 Oracle 10g 保存和检索欧元字符时，我们遇到了问题。该问题仅发生在 Linux 下运行的 JUnit 测试期间。保存后从数据库返回的欧元字符完全搞砸了。Oracle 已配置为使用字符集“WE8MSWIN1252”。会不会是 Linux 不能使用这个字符集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T13:03:58.997

很有可能；代码页 1252 是微软自己对 ISO-8859-1（又名 Latin-1）的扩展，在 Linux 上很少使用，Linux 倾向于使用后者。欧元符号不是 Latin-1 的一部分，这可能是它无法在 Linux 上正确显示的原因。不能使用 UTF-8 吗？双方的工作方式相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-02T16:22:34.267

这不是 Linux 的事情。这是 jdbc 驱动程序的检索代码中的一个已知 Oracle 错误。有一个可用的补丁，但您需要访问 Oracle Metalink 才能下载它。建议的另一种选择是使用 OCI 驱动程序而不是瘦驱动程序。这可能是也可能不是您的选择。

编辑：

此错误存在于 10.2.0.3 驱动程序中，已在 10.2.0.4 jdbc 驱动程序中修复。

# java - 在循环内部或外部声明一个对象？

> ID：377763
> 
> 赞同：58
> 
> 时间：2008-12-18T13:03:12.740
> 
> 标签：java, performance

以下代码片段是否有任何性能损失？

```
for (int i=0; i<someValue; i++)
{
    Object o = someList.get(i);
    o.doSomething;
} 
```

还是这段代码实际上更有意义？

```
Object o;
for (int i=0; i<someValue; i++)
{
    o = someList.get(i);
    o.doSomething;
} 
```

如果在字节码中这两个是完全等价的，那么显然第一种方法在样式方面看起来更好，但我想确保是这种情况。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-12-18T13:07:08.163

在今天的编译器中，没有。我在尽可能小的范围内声明对象，因为它对于下一个人来说更具可读性。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-18T13:50:02.100

[引用可能引用 Hoare 的 Knuth 的话](http://en.wikipedia.org/wiki/Optimization_(computer_science)#When_to_optimize)：

> **过早的优化是万恶之源。**

编译器是否会通过在循环外定义变量来产生稍微快一点的代码是有争议的，我想它不会。我*猜*它会产生相同的字节码。

将此与您可能通过使用循环内声明正确限定变量范围来防止的错误数量进行比较...

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-12-18T13:15:27.770

在循环中声明 Object o 没有性能损失。编译器生成非常相似的字节码并进行正确的优化。

有关类似示例，请参阅文章[神话 - 在循环内定义循环变量对性能不利。](http://livingtao.blogspot.com/2007/05/myth-defining-loop-variables-inside.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-18T13:36:00.913

您可以使用 javap -c 反汇编代码并检查编译器实际发出的内容。在我的设置中（使用 eclipse 编译的 java 1.5/mac），循环的字节码是相同的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-12-18T13:09:06.473

第一个代码更好，因为它将`o`变量的范围限制在`for`块中。从性能的角度来看，它在 Java 中可能没有任何影响，但在较低级别的编译器中可能有。如果您先执行此操作，他们可能会将变量放入寄存器中。

事实上，有些人可能会认为，如果编译器很笨，那么第二个代码段在性能方面会更好。这是大学里某个导师告诉我的，我为这个建议嘲笑他！基本上，编译器在方法开始时（通过调整堆栈指针）只在堆栈上为方法的局部变量分配一次内存，并在方法结束时释放它（再次通过调整堆栈指针，假设它不是 C++或者它没有任何要调用的析构函数）。因此，一个方法中所有基于堆栈的局部变量都是一次分配的，无论它们是在哪里声明的，也不管它们需要多少内存。实际上，如果编译器很笨，在性能方面没有区别，但如果它足够聪明，第一个代码实际上可以更好，因为它' 将帮助编译器了解变量的范围和生命周期！顺便说一句，如果它真的很聪明，那么性能上应该没有绝对差异，因为它推断出实际范围。

当然，使用对象的构造`new`与仅仅声明它是完全不同的。

我认为可读性比性能更重要，从可读性的角度来看，第一个代码肯定更好。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-12-18T13:15:53.277

我得承认我不懂java。但这两个是等价的吗？对象的生命周期是否相同？在第一个示例中，我假设（不知道 java）在循环终止时 o 将有资格进行垃圾收集。

但是在第二个例子中，在外部范围（未显示）退出之前，肯定没有资格进行垃圾收集？

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-12-18T14:29:20.290

不要过早优化。比这两个更好的是：

```
for(Object o : someList) {
    o.doSomething();
} 
```

因为它消除了样板文件并阐明了意图。

除非你在嵌入式系统上工作，在这种情况下，所有的赌注都没有了。否则，不要试图智取 JVM。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-18T13:07:47.863

我一直认为现在大多数编译器都足够聪明，可以选择后一种选择。假设是这种情况，我会说第一个看起来也更好。如果循环变得非常大，则无需四处寻找 o 的声明位置。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-18T13:10:13.227

这些具有不同的语义。哪个更有意义？

出于“性能原因”重用对象通常是错误的。

问题是对象“意味着”什么？你为什么要创造它？它代表什么？对象必须与现实世界的事物平行。事物被创建，经历状态变化，并根据原因报告它们的状态。

这些原因是什么？您的对象模型如何反映这些原因？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-31T22:49:35.477

要了解这个问题的核心...... [请注意，如果 JLS 允许，非 JVM 实现可能会做不同的事情......]

首先，请记住，示例中的局部变量“o”是指针，而不是实际对象。

所有局部变量都分配在运行时堆栈中的 4 字节插槽中。doubles 和 longs 需要两个插槽；其他原语和指针取一个。（即使是布尔值也会占用一个完整的插槽）

必须为每个方法调用创建一个固定的运行时堆栈大小。此大小由方法中任何给定位置所需的最大局部变量“槽”确定。

在上面的示例中，两个版本的代码都要求方法的最大局部变量数相同。

在这两种情况下，都会生成相同的字节码，更新运行时堆栈中的相同插槽。

换句话说，根本没有性能损失。

但是，根据方法中的其余代码，“循环外声明”版本实际上可能需要更大的运行时堆栈分配。例如，比较

```
for (...) { Object o = ... }
for (...) { Object o = ... } 
```

和

```
Object o;
for (...) {  /* loop 1 */ }
for (...) { Object x =...; } 
```

在第一个示例中，两个循环都需要相同的运行时堆栈分配。

在第二个示例中，因为“o”存在于循环之外，“x”需要一个额外的运行时堆栈槽。

希望这会有所帮助，--斯科特

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-18T13:08:01.360

第一个更有意义。它将变量保持在使用它的范围内。并防止在一次迭代中分配的值在以后的迭代中使用，这更具防御性。

前者有时被认为效率更高，但任何合理的编译器都应该能够将其优化为与后者完全相同。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-18T13:49:31.713

在这两种情况下，对象 o 的类型信息都是在编译时确定的。在第二种情况下，o 被视为对 for 循环来说是全局的，而在第一种情况下，聪明的 Java 编译器知道 o 必须可用于只要循环持续，因此将以这样的方式优化代码，即在每次迭代中不会重新指定 o 的类型。因此，在这两种情况下，都会对 o 的类型进行指定一次，这意味着唯一的性能差异将在 o 的范围内。显然，较窄的范围总是可以提高性能，因此回答您的问题：不，第一个代码片段没有性能损失；实际上，这个代码片段比第二个更优化。

在第二个片段中，o 被赋予了不必要的范围，这除了是一个性能问题外，还可能是一个安全问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-21T22:48:34.333

作为维护代码多于编写代码的人。

版本 1 是更受欢迎的 - 保持范围尽可能本地对于理解至关重要。重构这种代码也更容易。

如上所述 - 我怀疑这会对效率产生任何影响。事实上，我会争辩说，如果范围更本地化，编译器可能会用它做更多事情！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-07-29T20:50:15.223

当使用多个线程（如果你做 50+）时，我发现这是处理鬼线程问题的一种非常有效的方法：

```
Object one;
Object two;
Object three;
Object four;
Object five;
try{
for (int i=0; i<someValue; i++)
{
o = someList.get(i);
o.doSomething;
}
}catch(e){
e.printstacktrace
}
finally{
one = null;
two = null;
three = null;
four = null;
five = null;
System.gc();
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2008-12-31T23:02:48.633

答案部分取决于构造函数的作用以及循环后对象会发生什么，因为这在很大程度上决定了代码的优化方式。

如果对象很大或很复杂，绝对要在循环之外声明它。否则，告诉你不要过早优化的人是对的。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2013-04-17T14:27:18.180

我实际上在我面前有一个看起来像这样的代码：

```
for (int i = offset; i < offset + length; i++) {
    char append = (char) (data[i] & 0xFF);
    buffer.append(append);
}
...
for (int i = offset; i < offset + length; i++) {
    char append = (char) (data[i] & 0xFF);
    buffer.append(append);
}
...
for (int i = offset; i < offset + length; i++) {
    char append = (char) (data[i] & 0xFF);
    buffer.append(append);
} 
```

因此，依靠编译器的能力，我可以假设**i**和**append**只有一个堆栈分配。然后一切都会好起来的，除了重复的代码。

附带说明一下，众所周知，Java 应用程序很慢。我从未尝试在 java 中进行分析，但我猜性能损失主要来自内存分配管理。

# ruby - Ruby 中的字符串连接

> ID：377768
> 
> 赞同：390
> 
> 时间：2008-12-18T13:04:21.367
> 
> 标签：ruby, string-concatenation

我正在寻找一种更优雅的方式在 Ruby 中连接字符串。

我有以下行：

```
source = "#{ROOT_DIR}/" << project << "/App.config" 
```

有没有更好的方法来做到这一点？

`<<`就此而言和有什么区别`+`？

* * *

## 回答 #1

> 赞同：606
> 
> 时间：2008-12-18T13:09:06.457

您可以通过以下几种方式做到这一点：

1.  正如你所展示的，`<<`但这不是*通常*的方式
2.  使用字符串插值

    ```
    source = "#{ROOT_DIR}/#{project}/App.config" 
    ```

3.  和`+`

    ```
    source = "#{ROOT_DIR}/" + project + "/App.config" 
    ```

从我所见（虽然没有测量），第二种方法在内存/速度方面似乎更有效。当 ROOT_DIR 为 nil 时，所有三种方法都会抛出未初始化的常量错误。

在处理路径名时，您可能希望使用`File.join`以避免弄乱路径名分隔符。

最后，这是一个品味问题。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2008-12-18T15:50:08.363

运算符是正常的`+`连接选择，并且可能是连接字符串的最快方法。

`+`和之间的区别在于`<<`它`<<`改变了左侧的对象，而`+`没有。

```
irb(main):001:0> s = 'a'
=> "a"
irb(main):002:0> s + 'b'
=> "ab"
irb(main):003:0> s
=> "a"
irb(main):004:0> s << 'b'
=> "ab"
irb(main):005:0> s
=> "ab" 
```

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2008-12-18T13:22:32.373

如果你只是连接路径，你可以使用 Ruby 自己的 File.join 方法。

```
source = File.join(ROOT_DIR, project, 'App.config') 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-02-19T23:22:23.013

来自[http://greyblake.com/blog/2012/09/02/ruby-perfomance-tricks/](http://greyblake.com/blog/2012/09/02/ruby-perfomance-tricks/)

使用`<<`aka`concat`比使用 aka 更有效`+=`，因为后者会创建一个临时对象并用新对象覆盖第一个对象。

```
require 'benchmark'

N = 1000
BASIC_LENGTH = 10

5.times do |factor|
  length = BASIC_LENGTH * (10 ** factor)
  puts "_" * 60 + "\nLENGTH: #{length}"

  Benchmark.bm(10, '+= VS <<') do |x|
    concat_report = x.report("+=")  do
      str1 = ""
      str2 = "s" * length
      N.times { str1 += str2 }
    end

    modify_report = x.report("<<")  do
      str1 = "s"
      str2 = "s" * length
      N.times { str1 << str2 }
    end

    [concat_report / modify_report]
  end
end 
```

输出：

```
____________________________________________________________
LENGTH: 10
                 user     system      total        real
+=           0.000000   0.000000   0.000000 (  0.004671)
<<           0.000000   0.000000   0.000000 (  0.000176)
+= VS <<          NaN        NaN        NaN ( 26.508796)
____________________________________________________________
LENGTH: 100
                 user     system      total        real
+=           0.020000   0.000000   0.020000 (  0.022995)
<<           0.000000   0.000000   0.000000 (  0.000226)
+= VS <<          Inf        NaN        NaN (101.845829)
____________________________________________________________
LENGTH: 1000
                 user     system      total        real
+=           0.270000   0.120000   0.390000 (  0.390888)
<<           0.000000   0.000000   0.000000 (  0.001730)
+= VS <<          Inf        Inf        NaN (225.920077)
____________________________________________________________
LENGTH: 10000
                 user     system      total        real
+=           3.660000   1.570000   5.230000 (  5.233861)
<<           0.000000   0.010000   0.010000 (  0.015099)
+= VS <<          Inf 157.000000        NaN (346.629692)
____________________________________________________________
LENGTH: 100000
                 user     system      total        real
+=          31.270000  16.990000  48.260000 ( 48.328511)
<<           0.050000   0.050000   0.100000 (  0.105993)
+= VS <<   625.400000 339.800000        NaN (455.961373) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-12-18T13:14:23.000

由于这是一条路径，我可能会使用数组并加入：

```
source = [ROOT_DIR, project, 'App.config'] * '/' 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-09-15T09:13:35.390

[这是受此要点](https://gist.github.com/alno/1704455)启发的另一个基准。它比较动态和预定义字符串的串联 ( `+`)、附加 ( `<<`) 和插值 ( `#{}`)。

```
require 'benchmark'

# we will need the CAPTION and FORMAT constants:
include Benchmark

count = 100_000

puts "Dynamic strings"

Benchmark.benchmark(CAPTION, 7, FORMAT) do |bm|
  bm.report("concat") { count.times { 11.to_s +  '/' +  12.to_s } }
  bm.report("append") { count.times { 11.to_s << '/' << 12.to_s } }
  bm.report("interp") { count.times { "#{11}/#{12}" } }
end

puts "\nPredefined strings"

s11 = "11"
s12 = "12"
Benchmark.benchmark(CAPTION, 7, FORMAT) do |bm|
  bm.report("concat") { count.times { s11 +  '/' +  s12 } }
  bm.report("append") { count.times { s11 << '/' << s12 } }
  bm.report("interp") { count.times { "#{s11}/#{s12}"   } }
end 
```

输出：

```
Dynamic strings
              user     system      total        real
concat    0.050000   0.000000   0.050000 (  0.047770)
append    0.040000   0.000000   0.040000 (  0.042724)
interp    0.050000   0.000000   0.050000 (  0.051736)

Predefined strings
              user     system      total        real
concat    0.030000   0.000000   0.030000 (  0.024888)
append    0.020000   0.000000   0.020000 (  0.023373)
interp    3.160000   0.160000   3.320000 (  3.311253) 
```

结论：MRI中的插值很重。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-12-26T06:27:20.067

我更喜欢使用路径名：

```
require 'pathname' # pathname is in stdlib
Pathname(ROOT_DIR) + project + 'App.config' 
```

关于`<<`和`+`来自 ruby​​ 文档：

`+`：返回一个包含连接到 str 的 other_str的**新字符串**

`<<`: 将给定对象连接到 str。如果对象是 0 到 255 之间的 Fixnum，则在连接之前将其转换为字符。

所以区别在于第一个操作数（`<<`进行更改，`+`返回新字符串，因此内存更重）以及如果第一个操作数是 Fixnum 将会是什么（`<<`将添加就好像它是代码等于该数字的字符，`+`将引发错误）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-08-03T20:11:33.363

让我向你展示我在这方面的所有经验。

我有一个返回 32k 记录的查询，对于每条记录，我调用一个方法将该数据库记录格式化为格式化字符串，然后将其连接成一个字符串，在所有这些过程结束时将变成磁盘中的一个文件。

我的问题是，根据记录，在 24k 左右，连接字符串的过程很痛苦。

我正在使用常规的“+”运算符来做到这一点。

当我改为'<<'时就像魔术一样。真的很快。

所以，我想起了我的旧时光——大概是 1998 年——当时我使用 Java 并使用“+”连接字符串并从 String 更改为 StringBuffer（现在我们，Java 开发人员拥有 StringBuilder）。

我相信Ruby世界中+/<<的过程和Java世界中的+/StringBuilder.append是一样的。

第一个在内存中重新分配整个对象，另一个只是指向一个新地址。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-03-06T20:11:41.827

这里有更多方法可以做到这一点：

```
"String1" + "String2"

"#{String1} #{String2}"

String1<<String2 
```

等等 ...

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-06-12T03:48:00.470

你说的串联？那方法呢`#concat`？

```
a = 'foo'
a.object_id #=> some number
a.concat 'bar' #=> foobar
a.object_id #=> same as before -- string a remains the same object 
```

平心而论，`concat`别名为`<<`.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-10-09T05:26:41.017

您可以使用`+`or`<<`运算符，但在 ruby​​ 中，`.concat`函数是最可取的，因为它比其他运算符快得多。你可以像这样使用它。

```
source = "#{ROOT_DIR}/".concat(project.concat("/App.config")) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-02-19T13:56:51.270

您也可以`%`按如下方式使用：

```
source = "#{ROOT_DIR}/%s/App.config" % project 
```

这种方法也适用于`'`（单）引号。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-03-29T01:21:11.290

您可以直接在字符串定义中连接：

```
nombre_apellido = "#{customer['first_name']} #{customer['last_name']} #{order_id}" 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-02-06T07:34:56.177

情况很重要，例如：

```
# this will not work
output = ''

Users.all.each do |user|
  output + "#{user.email}\n"
end
# the output will be ''
puts output

# this will do the job
output = ''

Users.all.each do |user|
  output << "#{user.email}\n"
end
# will get the desired output
puts output 
```

在第一个示例中，与`+`运算符连接不会更新`output`对象，但是在第二个示例中，运算符将在每次迭代`<<`时更新对象。`output`所以，对于上述类型的情况，`<<`是比较好的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-11-27T23:28:37.050

对于您的特定情况，您还可以`Array#join`在构造字符串的文件路径类型时使用：

```
string = [ROOT_DIR, project, 'App.config'].join('/')] 
```

这具有自动将不同类型转换为字符串的令人愉快的副作用：

```
['foo', :bar, 1].join('/')
=>"foo/bar/1" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-03-05T16:13:14.800

对于木偶：

```
$username = 'lala'
notify { "Hello ${username.capitalize}":
    withpath => false,
} 
```

# php - 命名参数、缓存和 PDO

> ID：377776
> 
> 赞同：1
> 
> 时间：2008-12-18T13:07:19.927
> 
> 标签：php, sql, mysql, pdo

如果我有这样的参数化 SQL 语句：

```
SELECT * FROM table WHERE my_field = :field_value 
```

有谁知道 PDO 是否会将此（见下文）识别为相同的 SQL 语句并使用缓存而不是假设它是完全不同的 SQL 语句：

```
SELECT * FROM table WHERE my_field = :new_field_value 
```

所以，我想问题是：如果参数化的选择语句中的参数名称发生了变化，但没有其他任何变化，我仍然可以获得缓存的性能优势吗？还是我必须确保参数名称保持不变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T17:58:20.010

如果您使用的是 PDO_MySQL，它会在服务器看到它们之前自行将准备好的语句重写为原始 SQL，除非您设置`PDO::ATTR_EMULATE_PREPARES`为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T13:40:07.487

它应该被识别为相同的语句，因为缓存是在查询参数被替换为值之后完成的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T17:52:30.817

PDO 没有缓存——MySql 有。是的，它将在查询缓存中缓存“最终”查询。不仅如此，如果你多次使用相同的prepared statements，你将获得额外的速度提升，因为MySql可以缓存该语句的查询执行计划。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-21T05:53:28.687

我不确定 PDO 如何处理命名参数，但如果它使用 MySQL 准备好的语句，那么如果你希望它使用查询缓存，则需要使用 MySQL 5.1.17 或更高版本。

[MySQL 查询缓存](http://dev.mysql.com/doc/refman/5.1/en/query-cache-how.html)

> 在 MySQL 5.1.17 之前，prepared statements 不使用查询缓存。从 5.1.17 开始，prepared statements 在某些条件下使用查询缓存，这取决于准备方法：

# vb6 - 在 VB6 运行时确定给定 LCID 的正确字符集的最佳方法是什么？

> ID：377779
> 
> 赞同：3
> 
> 时间：2008-12-18T13:07:48.723
> 
> 标签：vb6, locale, character-encoding, lcid

我在 VB6 应用程序中显示日语字符，系统区域设置为日本，非 Unicode 程序的语言为日语。对 GetACP() 的调用正确返回日语的 932。当我将日语字符串插入我的控件时，它们显示为“ƒAƒtƒŠƒJ‚Ì—‰¤”而不是“アフリカの女王”。如果我手动将 Font.Charset 设置为 128，那么它们会正确显示。

在 VB6 中确定给定 LCID 的正确字符集的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-25T06:17:48.760

请参阅[http://www.microsoft.com/globaldev/drintl/columns/014/default.mspx#E5B](http://www.microsoft.com/globaldev/drintl/columns/014/default.mspx#E5B)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-02T14:19:09.383

扩展 Bob 的答案，这里有一些代码来获取当前的默认字符集。

```
Private Const LOCALE_SYSTEM_DEFAULT As Long = &H800
Private Const LOCALE_IDEFAULTANSICODEPAGE As Long = &H1004
Private Const TCI_SRCCODEPAGE = 2

Private Type FONTSIGNATURE
    fsUsb(4) As Long
    fsCsb(2) As Long
End Type

Private Type CHARSETINFO
    ciCharset As Long
    ciACP As Long
    fs As FONTSIGNATURE
End Type

Private Declare Function GetLocaleInfo Lib "kernel32" Alias "GetLocaleInfoA" ( _
    ByVal Locale As Long, _
    ByVal LCType As Long, _
    ByVal lpLCData As String, _
    ByVal cchData As Long _
) As Long

Private Declare Function TranslateCharsetInfo Lib "GDI32" ( _
    lpSrc As Long, _
    lpcs As CHARSETINFO, _
    ByVal dwFlags As Long _
) As Long

Public Function GetCharset() As Long
On Error GoTo ErrorHandler

    Dim outlen As Long
    Dim lCodepage As Long
    Dim outBuffer As String
    Dim cs As CHARSETINFO

    outBuffer = String$(10, vbNullChar)
    outlen = GetLocaleInfo(LOCALE_SYSTEM_DEFAULT, LOCALE_IDEFAULTANSICODEPAGE, outBuffer, Len(outBuffer))

    If outlen > 0 Then
        lCodepage = val(Left$(outBuffer, outlen - 1))

        If TranslateCharsetInfo(ByVal lCodepage, cs, TCI_SRCCODEPAGE) Then
            GetCharset = cs.ciCharset
        End If
    End If

    Exit Function

ErrorHandler:
    GetCharset = 0
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:16:54.960

第二种最佳方法是使用字体数据库、font.charsets 和启发式算法，如下所示：

[http://www.example-code.com/vb/vb6-display-unicode.asp](http://www.example-code.com/vb/vb6-display-unicode.asp)

（*最好*的办法是下沉船VB6）

# c# - 在单独的程序集中使用受约束的通用扩展方法会产生参考错误

> ID：377784
> 
> 赞同：5
> 
> 时间：2008-12-18T13:08:33.153
> 
> 标签：c#, .net, .net-3.5, extension-methods

我创建了一个单独的程序集来包含常见的扩展方法，扩展方法使用来自`System.Web.dll`（和其他）的类。

然后，当我创建一个引用包含扩展方法的程序集的新项目（控制台应用程序）时，如果它不使用扩展程序集中任何类`Utilities.dll`的扩展方法，我不需要添加对新项目的引用（例如）。`System.Web.dll``System.Web.dll``System.Web.UI.Control`

当其中一种扩展方法成为通用方法时，一切都会按预期继续工作。但是，一旦我将约束添加到将其约束到程序集中的类的通用方法中，`System.Web.dll`编译器就会抱怨我的新项目（控制台应用程序）需要引用，`System.Web.dll`即使新项目仍然没有使用该程序集中的任何内容.

换句话说，只要我对我的泛型方法没有约束，一切都会编译，但只要我添加约束，编译器就会抱怨。

我的扩展方法 assemble 的一个示例（编译为库`Utilities.dll`):``

 `````
public static class StringExtensions
{
    public static bool IsNullOrEmpty(this string value)
    {
        return string.IsNullOrEmpty(value);
    }
}

public static class ControlExtensions
{
    // If I remove the where clause it compiles
    public static T FildChild<T>(this Control parent, string id)
        where T : Control
    {
        throw new NotImplementedException();
    }
} 
```

And here is a new console application that won't compile (unless I also add a reference to `System.Web.dll`):

```
 static void Main(string[] args)
    {
        bool isEmpty = "Hello World!".IsNullOrEmpty();

        Console.ReadLine();
    } 
```

* * *

**Update:** As Marc pointed out (below) puting the offending method in a separate namespace fixes the problem.``

``But the question still remains why is the constraint a problem while the type Control` was already used as a parameter to the method. and why is the namespace the solution when I already use the using`顶部的指令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T13:10:48.623

嗯，是！为了编译，它需要能够解析公共/受保护 API 中的所有内容。否则它不能强制执行约束。我想它需要识别类型以查看扩展方法是否是方法的候选者。

您可以尝试将扩展方法放在其中包含“Web”的子命名空间中 - 至少它不会溢出到常规代码中。**我已经检查过了**，这解决了这个问题。分离扩展方法的命名空间以允许调用者控制它们何时应该在范围内是一种很好的做法。

为了执行，它还需要能够解析内部使用但未在 API 中公开的任何*内容*。这是标准行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T13:17:05.757

@Marc 告诉你原因。我建议作为一种好的做法，您将任何涉及 Web 类的内容分解为另一个程序集，例如 Com.Company.Extensions.Web 和 Com.Company.Extensions。然后，您可以在 Web 项目中包含两者，也可以在其他项目中仅包含非 Web 扩展。

# iphone - cocos2D for iPhone 和触摸检测的问题

> ID：377785
> 
> 赞同：12
> 
> 时间：2008-12-18T13:08:50.000
> 
> 标签：iphone, cocos2d-iphone, touch, detection

我只是不明白。我使用 cocos2d 在 iPhone/Pod 上开发一个小游戏。该框架很棒，但我在触摸检测方面失败了。我读到您只需要在子类 CocosNode 的类的实现中覆盖正确的函数（例如“touchesBegan”）。但它不起作用。我能做错什么？

功能：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{NSLog(@"tickle, hihi!");} 
```

我完全错了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-19T01:42:42.007

Layer 是唯一接触到的 cocos2d 类。

诀窍是 Layer 的所有实例一个接一个地传递触摸事件，因此您的代码必须处理这个。

我是这样做的：

```
-(BOOL)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [touches anyObject];
CGPoint location = [touch locationInView: [touch view]];
CGPoint cLoc = [[Director sharedDirector] convertCoordinate: location];

float labelX = self.position.x - HALF_WIDTH;
float labelY = self.position.y - HALF_WIDTH;
float labelXWidth = labelX + WIDTH;
float labelYHeight = labelY + WIDTH;

if( labelX < cLoc.x &&
    labelY < cLoc.y &&
    labelXWidth > cLoc.x &&
    labelYHeight > cLoc.y){
        NSLog(@"WE ARE TOUCHED AND I AM A %@", self.labelString);
        return kEventHandled;
    } else {
        return kEventIgnored;
    } 
```

}

请注意，cocos2d 库有一个“ccTouchesEnded”实现，而不是 Apple 标准。它允许您返回一个 BOOL 指示您是否处理了事件。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-09-12T22:01:27.350

您是否已将此添加到您的图层初始化方法中？

```
 // isTouchEnabled is an property of Layer (the super class).
    // When it is YES, then the touches will be enabled
    self.isTouchEnabled = YES;

    // isAccelerometerEnabled is property of Layer (the super class).
    // When it is YES, then the accelerometer will be enabled
    self.isAccelerometerEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T21:03:20.587

为了检测触摸，您需要从 UIResponder 子类化（UIView 也是如此）。我对 cocos2D 不熟悉，但是快速浏览一下文档会发现 CocosNode 不是从 UIResponder 派生的。

经过进一步调查，看起来 Cocos 人创建了一个派生自 CocosNode 的 Layer 类。该类实现了触摸事件处理程序。但是这些都是以cc为前缀的。

见[http://code.google.com/p/cocos2d-iphone/source/browse/trunk/cocos2d/Layer.h](http://code.google.com/p/cocos2d-iphone/source/browse/trunk/cocos2d/Layer.h)

另请参阅 menu.m 代码和以下博客文章以获取更多信息：

[http://blog.sapusmedia.com/2008/12/cocos2d-propagating-touch-events.html](http://blog.sapusmedia.com/2008/12/cocos2d-propagating-touch-events.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-01T19:06:34.943

maw，CGPoint 结构成员 x,y 是浮点数。使用@"% **f** " 格式化 printf/NSLog 的浮点数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-01-27T00:20:26.473

如果你使用 cocos2D 的 0.9 beta，它对 CocosNodes 有一个非常简单的触摸检测。这种新检测的真正美妙之处在于它可以很好地处理多点触摸跟踪。

可以在这里找到一个例子

[http://code.google.com/p/cocos2d-iphone/source/browse/#svn/trunk/tests/TouchesTest](http://code.google.com/p/cocos2d-iphone/source/browse/#svn/trunk/tests/TouchesTest)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-04-27T11:08:35.357

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

        //Add a new body/atlas sprite at the touched location
        CGPoint tapPosition;
        for( UITouch *touch in touches ) {
            CGPoint location = [touch locationInView: [touch view]];

            tapPosition = [self convertToNodeSpace:[[CCDirector sharedDirector] convertToGL:location]];     // get the tapped position

    }
} 
```

认为这可以帮助你....

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-17T14:55:19.177

-使您的场景符合协议-`CCTargetedTouchDelegate` 将此行添加到`init`您的场景中：

```
[[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:NO]; 
```

- 实现这些功能：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
 {
   return  YES;
 }
 -(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
  {
    //here touch is ended
  } 
```

# javascript - jsonp请求在Firefox中不起作用

> ID：377794
> 
> 赞同：1
> 
> 时间：2008-12-18T13:11:44.130
> 
> 标签：javascript, jquery, json

我正在尝试使用 jquery 进行简单的远程 json 调用。我正在尝试使用 reddit api。[http://api.reddit.com](http://api.reddit.com)。这将返回一个有效的 json 对象。

如果我调用本地文件（这是从保存到本地磁盘的网站返回的文件），一切正常。

```
$(document).ready(function() {
    $.getJSON("js/reddit.json", function (json) {
        $.each(json.data.children, function () {
            title = this.data.title;
            url = this.data.url;
            $("#redditbox").append("<div><a href=\"" + url + "\">" + title + "</a><div>");
        });
    });
}); 
```

如果我然后尝试将其转换为远程调用：

```
$(document).ready(function() {
    $.getJSON("http://api.reddit.com", function (json) {
        $.each(json.data.children, function () {
            title = this.data.title;
            url = this.data.url;
            $("#redditbox").append("<div><a href=\"" + url + "\">" + title + "</a><div>");
        });
    });
}); 
```

它可以在 Safari 中正常工作，但不能在 Firefox 中正常工作。这是预期的，因为 Firefox 出于安全或其他原因不会进行远程调用。美好的。

在 jquery 文档中，他们说要这样做（jsonp）：

```
$(document).ready(function() {
    $.getJSON("http://api.reddit.com?jsoncallback=?", function (json) {
        $.each(json.data.children, function () {
            title = this.data.title;
            url = this.data.url;
            $("#redditbox").append("<div><a href=\"" + url + "\">" + title + "</a><div>");
        });
    });
}); 
```

但是它现在停止在 safari 和 firefox 上工作。发出了请求，但从服务器返回的内容似乎被忽略了。

这是我正在编写的代码还是服务器返回的问题？我该如何诊断这个问题？

*编辑*将地址更改为真实地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-31T18:55:15.123

JSONP 是需要在服务器上支持的东西。我找不到文档，但看起来，如果 Reddit 支持 JSONP，那么它与 jsoncallback 查询变量无关。

JSONP 的作用是用 JavaScript 函数调用包装 JSON 文本，这允许 JSON 文本由您已经在代码中定义的任何函数处理。但是，此功能确实需要在全局范围内可用。JQuery getJSON 方法似乎为您生成了一个函数名称，并将其分配给 jsoncallback 查询字符串变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T13:26:50.917

您指向的 URL (www.redit.com...) 没有返回 JSON！不确定来自 reddit 的 JSON 联合来自哪里，但您可能想从[文档](http://docs.jquery.com/Ajax/jQuery.getJSON)中的示例开始：

```
$(document).ready(function() {
  $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?", function (data) {
    $.each(data.items, function(i,item){
        $("<img/>").attr("src", item.media.m).appendTo("#redditbox");
        if ( i == 4 ) return false;
      });

}); 
```

});

（为格式化道歉）

**编辑** 现在我重新阅读了您的帖子，我看到您打算访问 api.reddit.com，不幸的是您没有正确的 json 回调参数名称。您可能需要进一步查阅 reddit 文档以查看它们是否支持 JSONP 以及回调参数的名称应该是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T18:46:05.003

我不确定 reddit.com，但对于不支持 JSONP 习语的网站，您仍然可以创建一个代理技术（在后端），该技术将返回 reddit JSON，然后您只需发出 ajax 请求那个那个。

因此，如果您调用[http://mydomain.com/proxy.php?url=http://api.reddit.com](http://mydomain.com/proxy.php?url=http://api.reddit.com)：

```
<?php
$url = $_GET["url"];
print_r(file_get_contents($url));
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T05:47:59.007

[http://api.reddit.com/](http://api.reddit.com/)返回 JSON，但似乎不是 JSONP 友好的。如果您有 GET，您可以通过以下方式验证这一点

```
% GET http://api.reddit.com/?callback=foo 
```

它在没有 JSONP 包装器的情况下转储 JSON 流。

[http://code.reddit.com/browser/r2/r2/controllers/api.py](http://code.reddit.com/browser/r2/r2/controllers/api.py)（第 84 行）显示了寻找“回调”（而不是“jsoncallback”）的代码。这可能是一个很好的起点，可以深入研究 Reddit 的代码以了解其中的诀窍。

# java - 如何在Java中获得等效的c ++常量指针？

> ID：377795
> 
> 赞同：2
> 
> 时间：2008-12-18T13:12:37.107
> 
> 标签：java, immutability, final, constants

当我将不可变类型对象(String, Integer,..) 作为 final 传递给方法时，我可以实现 C++ 常量指针的字符。但是我怎样才能在可变对象中强制执行这种行为呢？

```
public void someMethod(someType someObject){
 /*
  * code that modifies the someObject's state
  * 
  */
} 
```

我想要的只是防止 someMethod 修改 someObject 的状态而不对 someType 进行任何更改。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T13:20:06.593

在一般情况下，不，这是不可能的。在非常有限的情况下，您可以将 someType 包装在提供相同接口的类中（参见 Collections.unmodifiableList() 示例）。

但是，没有等效于“传递一个 const 指针，编译器将只允许您在其上调用 const 函数”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T13:17:44.133

不，您不能阻止通过其 setXXX() （或类似）方法修改对象。不过，您可以交出一个克隆或副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:19:52.070

不，这是不可能的。您必须传入对象的副本，或者仅依靠了解哪些操作对对象进行状态更改并避免调用它们 - 编译器不会帮助您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T13:27:27.217

不，我不认为这是可能的。通常的方法是为 SomeType 创建一个适配器，其中所有更改状态的方法都会抛出 UnsupportedOperationException。这由例如 java.util.Collections.unmodifiable*-functions 使用。

有几种方法：

*   您可以让 SomeType 成为一个接口，当您需要它是只读的时，只需创建一个包装器，将所有读取方法委托给原始对象并实现所有写入方法以引发异常。
*   或者您可以创建一个覆盖所有写入方法的 SomeType 的子类

这当然只会给你运行时检查，而不是编译时。如果你想要编译时，你可以让 SomeType 是一个没有写方法的接口（或超类），只有读方法。

# ms-access - 使用网络位置访问数据库同步器

> ID：377796
> 
> 赞同：0
> 
> 时间：2008-12-18T13:12:49.757
> 
> 标签：ms-access, compact-framework, sql-server-ce

使用[Access Database Synchronizer](http://www.microsoft.com/downloads/details.aspx?FamilyId=B967347A-5DD0-445C-8A9F-AEA3DB9EC4BC&displaylang=en)是否有人能够与存储在网络位置的 mdb 同步？

如果我将网络驱动器映射到我的本地 c，它甚至不起作用：即 c:\test.mdb 有效，但 z:\test.mdb 无效。

我只是得到一个 System.Data.SqlServerCe.SqlCeException “无法使用给定的连接字符串打开 SQL Server。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-11-16T00:13:14.917

现在的老问题。似乎没有人有答案（甚至没有人听说过）。

使用网络驱动器时，Access Database Synchronizer 将无法工作，这很可能是产品中的错误。

# sql - 字段值必须是唯一的，除非它为 NULL

> ID：377798
> 
> 赞同：10
> 
> 时间：2008-12-18T13:14:22.673
> 
> 标签：sql, sql-server, sql-server-2005, null

我正在使用 SQL Server 2005。

我有一个必须包含唯一值或 NULL 值的字段。我认为我应该使用 a`CHECK CONSTRAINT`或 a来执行此操作`TRIGGER for INSERT, UPDATE`。

在这里使用约束而不是触发器有优势吗（反之亦然）？这样的约束/触发器可能是什么样的？

还是我没有考虑过其他更合适的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T13:46:49.487

我创建了一个带有索引的视图，该索引通过 where 子句忽略了空值……即，如果将空值插入表中，则视图不在乎，但如果插入非空值，则视图将强制执行约束。

```
create view dbo.UniqueAssetTag with schemabinding
as
select asset_tag
from dbo.equipment
where asset_tag is not null

GO

create unique clustered index ix_UniqueAssetTag
on UniqueAssetTag(asset_tag)

GO 
```

所以现在我的设备表有一个asset_tag 列，它允许多个空值，但只允许唯一的非空值。

注意：如果使用 mssql 2000，您需要在对表执行任何插入、更新或删除之前“ [SET ARITHABORT ON ”。](http://support.microsoft.com/kb/305333)很确定这在 mssql 2005 及更高版本上不是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T13:35:02.007

这是使用约束的另一种方法。为了强制执行此约束，您需要一个计算字段值出现次数的函数。在您的约束中，只需确保此最大值为 1。

约束：

```
 field is null or dbo.fn_count_maximum_of_field(field) < 2 
```

**编辑我现在不记得了——也不能检查它——约束检查是在插入/更新之前还是之后完成的。我认为在插入/更新失败后回滚。如果事实证明我错了，上面的 2 应该是 1。**

表函数返回一个 int 并使用以下选择来派生它

```
 declare @retVal int

   select @retVal = max(occurrences)
   from ( 
        select field, count(*) as occurrences
        from dbo.tbl
        where field = @field
        group by field
   ) tmp 
```

如果您的列作为（非唯一）索引，这应该相当快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-11-17T20:54:20.297

您可以通过创建计算列并将唯一索引放在该列上来完成此操作。

```
ALTER TABLE MYTABLE 
ADD COL2 AS (CASE WHEN COL1 IS NULL THEN CAST(ID AS NVARCHAR(255)) ELSE COL1 END)

CREATE UNIQUE INDEX UQ_COL2 ON MYTABLE (COL2) 
```

这是假设 ID 是您的表的 PK 并且 COL1 是“唯一或空”列。

如果您的“唯一”列为空，则计算列 (COL2) 将使用 PK 的值。

在下面的示例中，ID 列和 COL1 之间仍然存在冲突的可能性：

```
ID     COL1    COL2
1     [NULL]    1
2        1      1 
```

为了解决这个问题，我通常创建另一个计算列来存储 COL2 中的值是来自 ID 列还是来自 COL1 列：

```
 ALTER TABLE MYTABLE 
 ADD COL3 AS (CASE WHEN COL1 IS NULL THEN 1 ELSE 0 END) 
```

索引应更改为：

```
CREATE UNIQUE INDEX UQ_COL2 ON MYTABLE (COL2, COL3) 
```

现在索引在计算列 COL2 和 COL3 上，所以没有问题：

```
ID     COL1    COL2   COL3
1     [NULL]    1       1
2        1      1       0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T13:18:27.827

在 Oracle 中，唯一键将允许多个 NULL。

在 SQL Server 2005 中，一个好的方法是通过视图进行插入，并禁用直接插入到表中。

[这是一些示例代码。](http://weblogs.sqlteam.com/mladenp/archive/2007/05/17/60209.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-18T13:21:28.290

此表上是否有主键，可能是标识列？您可以创建一个唯一键，该键是您强制唯一性的字段与主键的组合。

这里有一个关于这类问题的讨论：http: [//blog.sqlauthority.com/2008/09/07/sql-server-explanation-about-usage-of-unique-index-and-unique-constraint/](http://blog.sqlauthority.com/2008/09/07/sql-server-explanation-about-usage-of-unique-index-and-unique-constraint/)

仅供参考 - SQL Server 2008 引入了过滤索引，这将允许您以不同的方式处理此问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T13:22:24.543

通常触发器将允许您提供比检查约束更详细和解释性的消息，因此我使用它们来避免调试中的“哪一列是坏的”游戏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T13:24:58.860

约束远比触发器轻，即使唯一约束实际上是索引。

但是，在唯一约束/索引中只允许有一个 NULL。因此，您必须使用触发器来检测重复项。

MS已[要求忽略 NULLS](http://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=387273)，但 SQL 2008 已过滤索引（如我键入时所述）

# java - 所有编译时常量都内联吗？

> ID：377819
> 
> 赞同：23
> 
> 时间：2008-12-18T13:20:51.257
> 
> 标签：java, inlining, compile-time-constant

假设我有这样的课程：

```
class ApplicationDefs{
public static final String configOption1 = "some option";
public static final String configOption2 = "some other option";
public static final String configOption3 = "yet another option";
} 
```

我的应用程序中的许多其他类都在使用这些选项。现在，我想单独更改其中一个选项并仅部署已编译的类。但是，如果这些字段在消费者类中是内联的，这将变得不可能，对吧？

是否有任何选项可以禁用编译时常量的内联？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2010-02-25T22:14:05.623

您可以使用 String.intern() 来获得所需的效果，但应该注释您的代码，因为没有多少人知道这一点。IE

```
public static final String configOption1 = "some option".intern(); 
```

这将防止编译时内联。由于它指的是编译器将放置在 perm 中的完全相同的字符串，因此您不会创建任何额外的内容。

作为替代方案，您总是可以这样做

```
public static final String configOption1 = "some option".toString(); 
```

但是，这不会使用已编译的实习生字符串，它将在旧版本上创建一个新字符串。没什么大不了的，可能更容易阅读。无论哪种方式，由于这有点奇怪，您应该注释代码以告知维护它的人您在做什么。

**Edit:** Found another SO link that gives references to the JLS, for more information on this. [When to use intern() on String literals](https://stackoverflow.com/questions/1833581/when-to-use-intern)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-18T13:23:03.623

不，恐怕它是 JLS 的一部分。在 Java Puzzlers 中简要地提到了这一点，但我手头没有副本。

我猜你可能会考虑在属性文件中定义这些常量，并让类定期加载它们。

参考：http: [//java.sun.com/docs/books/jls/third_edition/html/expressions.html#5313](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#5313)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-18T13:23:16.757

实际上，如果您**删除`final`关键字**，常量不再是编译时常量，那么您的配置**就会**像您想要的那样工作。

但是，强烈建议如果这确实是您正在尝试执行的某种配置，您应该使用比某些类文件中的常量更易于管理的方式。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-18T13:24:34.150

不，您可以用静态方法调用替换它们，例如：

```
class ApplicationDefs {

    public static String configOption1() { return "some option"; }

} 
```

当然，它并不漂亮，但它会满足您的要求。:)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-18T14:14:35.890

您可以通过使常量非编译时间常量来禁止内联...

例如，`null`不是编译时间常数。任何涉及非编译时常量的表达式都不是编译时常量，尽管 javac 可以在编译单元内进行常量折叠。

```
public static final String configOption1 = null!=null?"": "some option"; 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2008-12-18T13:38:46.493

这里没有说这些值应该被内联。您只是在声明一些`public`成员`static`。那些其他类正在使用这些成员的值。不要求内联。就连`final`关键词

但是出于**性能原因**，一些 JVM 可能会将这些值**内联到其他类中。**这是一个优化。任何优化都不应该改变程序的行为。因此，如果您更改这些成员的定义，JVM 应该**取消内联**以前的值。

这就是为什么无法关闭内联的原因。要么JVM不内联，没有问题，要么内联，JVM保证不内联。

我不确定当您静态导入此类时会发生什么。我认为（不确定）内​​联已执行，可能会导致您提到的麻烦。如果是这种情况，您基本上可以删除静态导入，就可以了。

# xaml - 如何为 WPF 故事板中的静态对象设置动画

> ID：377830
> 
> 赞同：2
> 
> 时间：2008-12-18T13:25:27.160
> 
> 标签：xaml, singleton, storyboard, static-members

我有一个 WPF 程序，我需要添加一个“演示模式”。因为我希望我的设计人员能够修改演示模式，而不必每次都重新编译程序，所以我认为使用来自外部 XAML 文件的情节提要是一个好主意。“演示模式”基本上是一个故事板，为应用程序的一些依赖属性设置动画。

为了公开我的应用程序的 DP，我创建了应用程序类的公共静态成员（单例），以便应用程序的 DP 始终在外部可用。在这种情况下，故事板将访问它们。

在外部 XAML 文件中，我添加了正确引用应用程序的命名空间/程序集的正确 xmlns。所以理论上，我应该能够在 Storyboard 中访问应用程序的 DP。

问题是，当未在 XAML 中声明/命名对象时，我不知道如何在 Storyboard 中为静态对象的 DP 设置动画。声明情节提要动画帧时，情节提要的唯一附加属性是*Storyboard.TargetName*和*Storyboard.TargetProperty*。

如果有人能给我一个提示，让我朝着正确的方向前进，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-22T08:18:10.247

我还没有尝试过，但如果可行，我猜它看起来像这样：

```
<Storyboard ..>
    <DoubleAnimation Storyboard.Target="{x:Static MyNS:MyClass.Singleton}" 
                     Storyboard.TargetProperty="MyProperty" .../>
</Storyboard> 
```

# sql - 如何截断和收缩日志文件？

> ID：377840
> 
> 赞同：2
> 
> 时间：2008-12-18T13:29:11.067
> 
> 标签：sql, sql-server-2005, transaction-log

如何在 SQL Server 2005 中截断和缩小大型日志文件？如何定期应用截断？

截断和收缩之间有什么区别吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T13:38:09.520

使用 DBCC SHRINKFILE 并将其安排为定期运行的作业（最好在非工作时间运行）。

请注意，定期增长和缩小日志文件会影响性能。如果您有空间，您可能希望将文件大小设置为它通常增长到的最大值并保留它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T13:32:54.693

使用`DBCC SHRINKFILE`语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:40:42.400

可靠的收缩是通过以下方式实现的

*   备份（只能截断）
*   检查点
*   收缩

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-14T11:41:34.743

首先，您应该在属性 - > 选项 - > 恢复模式上更改数据库恢复模式并将其更改为简单，然后从右键单击 - > 任务 - > 收缩 - > 文件并选择文件类型“日志”，然后单击确定

# .net - 此绑定的转换器参数应该是什么

> ID：377841
> 
> 赞同：11
> 
> 时间：2008-12-18T13:29:32.830
> 
> 标签：.net, wpf, xaml, converter

我正在尝试实现一个 wpf 用户控件，该控件使用转换器将文本框绑定到双打列表。如何将用户控件的实例设置为转换器参数？

控件的代码如下所示

谢谢

```
<UserControl x:Class="BaySizeControl.BaySizeTextBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"  
    xmlns:local="clr-namespace:BaySizeControl"
    >
    <UserControl.Resources>
        <local:BayListtoStringConverter x:Key="BaySizeConverter"/>
    </UserControl.Resources>
    <Grid>

        <TextBox  Name="Textbox_baysizes" 
                  Text="{Binding RelativeSource={RelativeSource self},
                                Path=Parent.Parent.BaySizeItemsSource, 
                                Converter={StaticResource BaySizeConverter}}"
                  />
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2011-11-16T11:56:33.793

另一种方法是让您的转换器继承自 DependencyObject（或 FrameworkElement）。这允许您声明依赖项属性，从而可以从 XAML（甚至是绑定）设置其值。

示例：用于乘以指定因子的值的转换器，该因子是从自定义控件 (MyControl) 中的属性 (FactorValue) 获得的。

转换器：

```
public class MyConverter : DependencyObject, IValueConverter
{
    // The property used as a parameter
    public double Factor
    {
        get { return (double) GetValue(FactorProperty); }
        set { SetValue(FactorProperty, value); }
    }

    // The dependency property to allow the property to be used from XAML.
    public static readonly DependencyProperty FactorProperty =
        DependencyProperty.Register(
        "Factor",
        typeof(double),
        typeof(MyConverter),
        new PropertyMetadata(1.15d));

    #region IValueConverter Members

    object IValueConverter.Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // Use the property in the Convert method instead of "parameter"
        return (double) value * Factor;
    }

    object IValueConverter.ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

在 XAML 中使用：

```
<MyConverter x:Key="MyConv"
             Factor={Binding ElementName=MyControl, Path=FactorValue}
/> 
```

因此，您现在可以为转换器中需要的每个参数声明一个依赖属性并绑定它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T13:40:29.703

这些参数用于转换器所需的常量。要为您的转换器提供对象实例，您可以使用 MultiBinding。

注意：要使此解决方案起作用，您还需要修改转换器以实现 IMultiValueConverter 而不是 IValueConverter。幸运的是，所涉及的修改相当少。您可以为提供给转换器的值的数量添加验证，在您的情况下为 2。

```
<TextBox Name="Textbox_baysizes">
    <TextBox.Text>
        <MultiBinding Converter="{StaticResource BaySizeConverter}">
            <Binding RelativeSource="{RelativeSource self}" Path="Parent.Parent.BaySizeItemsSource"/>
            <Binding ElementName="Textbox_baysizes"/>
        </MultiBinding>
    </TextBox.Text>
</TextBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T13:47:05.680

我会命名控件，然后使用 ElementName 进行绑定：

```
<UserControl x:Class="BaySizeControl.BaySizeTextBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"  
    xmlns:local="clr-namespace:BaySizeControl"
    Name="Foobar"
    >
    <UserControl.Resources>
        <local:BayListtoStringConverter x:Key="BaySizeConverter"/>
    </UserControl.Resources>
    <Grid>

        <TextBox  Name="Textbox_baysizes" 
                  Text="{Binding RelativeSource={RelativeSource self},
                                Path=Parent.Parent.BaySizeItemsSource, 
                                Converter={StaticResource BaySizeConverter,
                                ConverterParameter={Binding ElementName=Foobar} }}"
                  />
    </Grid>
</UserControl> 
```

不，等等，这不起作用，因为 ConverterParameter 不是 Dependency Property，Binding 也不是 DependencyObject。ReleativeSource 标记扩展应该做你想做的事，虽然我没有使用它嵌套在其他 MarkupExtension 中 - 在这种情况下它可能表现不佳：

```
<TextBox  Name="Textbox_baysizes" 
                      Text="{Binding RelativeSource={RelativeSource self},
                                    Path=Parent.Parent.BaySizeItemsSource, 
                                    Converter={StaticResource BaySizeConverter,
                                    ConverterParameter={RelativeSource self} }}"
                      /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-09-21T21:22:59.487

我有同样的问题，但我不能使用 MultiBindings，因为我需要正确实现 ConvertBack 方法。这是我最终为 CheckBox 的 IsChecked 属性实施的解决方案：

```
<CheckBox>
    <CheckBox.IsChecked>
        <Binding Converter="{StaticResource myConverter}" Path="Value">
            <Binding.ConverterParameter>
                <FrameworkElement DataContext="{TemplateBinding DataContext}" />
            </Binding.ConverterParameter>
        </Binding>
    </CheckBox.IsChecked>
</CheckBox> 
```

我对 TemplateBindings （或任何与此相关的 WPF）都不是很熟悉，所以这可能只是因为我的 CheckBox 在 DataTemplate 中才有效......

# linq-to-sql - 我应该在哪里实例化我的服务类的 SqlDatacontext？

> ID：377843
> 
> 赞同：2
> 
> 时间：2008-12-18T13:32:48.627
> 
> 标签：linq-to-sql

我有几个服务类具有静态方法并为我的程序的其余部分提供服务。这些服务中的大多数都涉及访问 SqlDataContext (linq2sql) 的实例。

首先，我尝试将此连接实例化为每个服务类的静态私有成员。这可行，但它也会产生一堆锁定、延迟和脏对象问题。

现在我使用了一个在方法级别实例化的私有实例。这在锁定和脏对象问题方面效果更好，因为范围更小且更可预测，但这也会在连接握手方面产生大量开销。

你建议如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T13:40:38.283

看看[Rick Strahl 的这篇文章](http://www.west-wind.com/weblog/posts/246222.aspx)- 他解释了这些选项并提供了一个很好的工厂实现来处理每个 Web 上下文/线程创建一个请求（取决于你在做什么。

在我使用 linq-to-sql 的大多数应用程序中都使用了它，这似乎是正确的方法！

# java - 用 Java 编写 GIF 文件

> ID：377846
> 
> 赞同：1
> 
> 时间：2008-12-18T13:33:51.743
> 
> 标签：java, gif

所以我的桌面上有这个 GIF 文件（它是一副 52 张扑克牌）。我一直在研究一个程序，将它分成每张卡的小 acm.graphics.GImages。但是，现在我想将这些 GImage 或像素数组写入一个文件，以便以后可以使用它们。我认为这就像编写 .txt 文件一样简单，但后来谷歌搜索了几次，我比以前更困惑了。

那么我该如何从像素数组或 GImage 中制作 .gif 文件（我有这两者的负载）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T13:49:00.013

这些方面的东西应该可以解决问题（根据需要修改图像类型、尺寸和像素阵列）：

```
BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);

WritableRaster raster = image.getRaster();
for ( i=0; i<width; i++ ) {
    for (  j=0; j<height; j++ ) {
        int[] colorArray = getColorForPixel(pixels[i][j]);
        raster.setPixel(i, j, colorArray);
    }
}

ImageIO.write(image, "gif", new File("CardImage")); 
```

'getColorForPixel' 需要返回一个表示该像素颜色的数组。在这种情况下，使用 RGB，colorArray 将具有三个整数 [red][green][blue]。

相关的 javadoc：[WritableRaster](http://java.sun.com/javase/6/docs/api/java/awt/image/WritableRaster.html)、[BufferedImage](http://java.sun.com/javase/6/docs/api/java/awt/image/BufferedImage.html)和[ImageIO](http://java.sun.com/javase/6/docs/api/javax/imageio/ImageIO.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T16:17:31.397

我不得不为一个大学项目用 Java 图像创建 GIF，我发现了这个。我会推荐 Acme 的开源 GifEncoder 类。好用又好用，两年多后我还记得它。这是链接：[http://www.acme.com/java/software/Acme.JPM.Encoders.GifEncoder.html](http://www.acme.com/java/software/Acme.JPM.Encoders.GifEncoder.html)

这是G-Link：[http://www.google.com/search?hl=en&q=acme+java+gif&btnG=搜索](http://www.google.com/search?hl=en&q=acme+java+gif&btnG=Search)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-12-18T15:52:13.913

[它并没有真正直接回答您的问题，但是使用ImageMagick](http://www.imagemagick.org/script/index.php)不是更容易吗？它有[Java 绑定](http://www.jmagick.org)。

# mysql - 在 MySQL 中的子查询上使用 GROUP_CONCAT

> ID：377850
> 
> 赞同：50
> 
> 时间：2008-12-18T13:35:06.953
> 
> 标签：mysql, sql, group-concat, mysql-error-1242

我有一个 MySQL 查询，我想在其中包含另一个表中的 ID 列表。在网站上，人们可以添加某些项目，然后人们可以将这些项目添加到他们的收藏夹中。我基本上想获得收藏该项目的人的 ID 列表（这有点简化，但这就是归结为）。

基本上，我做这样的事情：

```
SELECT *,
GROUP_CONCAT((SELECT userid FROM favourites WHERE itemid = items.id) SEPARATOR ',') AS idlist
FROM items
WHERE id = $someid 
```

这样，我可以通过稍后在我的代码中将 idlist 拆分为 PHP 中的数组来显示谁最喜欢某个项目，但是我收到以下 MySQL 错误：

> *1242 - 子查询返回多于 1 行*

我认为这是使用`GROUP_CONCAT`而不是，例如，`CONCAT`？我会以错误的方式解决这个问题吗？

* * *

好的，感谢到目前为止的答案，这似乎有效。但是，有一个问题。如果项目是由该用户添加的，则该项目也被视为收藏夹。所以我需要一个额外的检查来检查creator = userid。有人可以帮我想出一个聪明的（希望是有效的）方法来做到这一点吗？

谢谢！

编辑：我只是尝试这样做：

```
SELECT [...] LEFT JOIN favourites ON (userid = itemid OR creator = userid) 
```

idlist是空的**。**请注意，如果我使用`INNER JOIN`而不是`LEFT JOIN`我得到一个空的结果。即使我确定有满足 ON 要求的行。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-03-25T08:30:53.317

OP几乎做对了。`GROUP_CONCAT`应该包装子查询中的列，而不是[完整的子查询](https://stackoverflow.com/a/4455991/838733)（我正在关闭分隔符，因为逗号是默认值）：

```
SELECT i.*,
(SELECT GROUP_CONCAT(userid) FROM favourites f WHERE f.itemid = i.id) AS idlist
FROM items i
WHERE i.id = $someid 
```

这将产生所需的结果，也意味着接受的答案部分错误，因为您可以在子查询中访问外部范围变量。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-18T13:50:54.330

您不能在此类查询中访问外部范围内的变量（不能`items.id`在那里使用）。你应该尝试类似的东西

```
SELECT
    items.name,
    items.color,
    CONCAT(favourites.userid) as idlist
FROM
    items
INNER JOIN favourites ON items.id = favourites.itemid
WHERE
    items.id = $someid
GROUP BY
    items.name,
    items.color; 
```

根据需要展开字段列表（名称、颜色...）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T02:36:40.010

我认为您可能有“userid = itemid”错误，不应该是这样的：

```
SELECT ITEMS.id,GROUP_CONCAT(FAVOURITES.UserId) AS IdList
FROM FAVOURITES 
INNER JOIN ITEMS ON (ITEMS.Id = FAVOURITES.ItemId OR FAVOURITES.UserId = ITEMS.Creator)
WHERE ITEMS.Id = $someid
GROUP BY ITEMS.ID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T14:01:48.927

GROUP_CONCAT 的目的是正确的，但子查询是不必要的并导致问题。试试这个：

```
SELECT ITEMS.id,GROUP_CONCAT(FAVOURITES.UserId)
FROM FAVOURITES INNER JOIN ITEMS ON ITEMS.Id = FAVOURITES.ItemId
WHERE ITEMS.Id = $someid
GROUP BY ITEMS.ID 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-12-15T14:38:09.497

是的，soulmerge 的解决方案还可以。但我需要一个查询，我必须从更多子表中收集数据，例如：

*   主表：**会话**（演示会话）（uid，名称，..）
*   第一个子表：带有 key session_id (uid, session_uid, date, time_start, time_end) 的**事件**
*   第二个子表：**accessories_needed**（笔记本电脑、投影仪、麦克风等），键为 session_id（uid、session_uid、accessory_name）
*   第三个子表：**session_presenters**（演示者），key为session_id（uid，session_uid，presenter_name，address...）

每个 Session 在子表中都有更多行（更多时间表，更多附件）

而且我需要为每个会话收集一个集合以显示在矿石行中（其中一些）：

```
session_id | session_name | date | time_start | time_end | accessories | presenters 
```

我的解决方案（经过数小时的实验）：

```
SELECT sessions.uid, sessions.name,
    ,(SELECT GROUP_CONCAT( `events`.date SEPARATOR '</li><li>') 
            FROM `events` 
            WHERE `events`.session_id = sessions.uid ORDER BY `events`.date) AS date
    ,(SELECT GROUP_CONCAT( `events`.time_start SEPARATOR '</li><li>') 
            FROM `events` 
            WHERE `events`.session_id = sessions.uid ORDER BY `events`.date) AS time_start
    ,(SELECT GROUP_CONCAT( `events`.time_end SEPARATOR '</li><li>') 
            FROM `events` 
            WHERE `events`.session_id = sessions.uid ORDER BY `events`.date) AS time_end
    ,(SELECT GROUP_CONCAT( accessories.name SEPARATOR '</li><li>') 
            FROM accessories 
            WHERE accessories.session_id = sessions.uid ORDER BY accessories.name) AS accessories
    ,(SELECT GROUP_CONCAT( presenters.name SEPARATOR '</li><li>') 
            FROM presenters
            WHERE presenters.session_id = sessions.uid ORDER BY presenters.name) AS presenters

    FROM sessions 
```

所以不需要 JOIN 或 GROUP BY。友好地显示数据的另一件有用的事情（当“回显”它们时）：

*   您可以将 events.date、time_start、time_end 等包装在 "<UL><LI> ... </LI></UL>" 中，以便 "<LI></LI>" 在查询中用作分隔符将列表项中的结果分开。

我希望这可以帮助别人。干杯!

# jquery - Ajax 时 jQuery 返回链接不起作用

> ID：377854
> 
> 赞同：1
> 
> 时间：2008-12-18T13:36:10.240
> 
> 标签：jquery, ajax, hyperlink

jQuery 返回链接不起作用。我使用过 jQuery 和基本的 Ajax 功能。我的 jQuery 从文件返回链接`Links_ajax.php`。

我给出了代码示例。

GetCustomerData.php 有：

```
<html>
    <script type="text/javascript">
    <script src="ajax.js" type="text/javascript">

        $(function() {
            .....

            $.ajax({
                type: 'POST',
                url: 'Links_ajax.php',
                data: 'category='+category  ,
                success: function(data){
                    $("#response").html(data);
                }
            });
        }
        ......
    }

    ...

    <! Links return here
        <div id="response">
        </div>
</html>

<?
  echo "Some Code";

?>

  .... 
```

我的 Links_ajax.php 有以下代码

```
....

echo '<a href="getCustomerData.php?id=10" onclick="requestCustomerInfo();return false;">show me </a>';
echo '<a href="getCustomerData.php?id=11" onclick="requestCustomerInfo();return false;">show me </a>';

.... 
```

现在我来到主页getCustomerData.php。我使用了从 Links_ajax.php 返回链接的 Ajax 功能。

```
 ..... 
```

所以，我的 ajax.js 有以下 Ajax 脚本。

```
var url = "GetCustomerData.php?id="; // The server-side script
function handleHttpResponse() {
    if (http.readyState == 4) {
        if (http.status == 200) {
            var results = http.responseText;
            document.getElementById('divCustomerInfo').innerHTML = results;
        }
    }
}

function requestCustomerInfo(event) {
    if(event &&event.preventDefault) event.preventDefault();
    else if (window.event && window.event.returnValue)
        window.eventReturnValue = false;
        var sId = 10;
        http.open("GET", url + escape(sId), true);
        http.onreadystatechange = handleHttpResponse;
        http.send(null);
    }

    function getHTTPObject() {
        var xmlhttp;

        if (window.XMLHttpRequest){
            xmlhttp = new XMLHttpRequest();
        }
        else if (window.ActiveXObject){
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            if (!xmlhttp){
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            }
        }
        return xmlhttp;
    }

    var http = getHTTPObject(); // We create the HTTP object 
```

……

现在我来解决问题了。当我执行 GetCustomerdata.php 时，我能够从 ajax.JQuery 获取所有链接。单击它后，我需要一个基本的 Ajax 功能，因为加载了相同的`<div>` `</div>`. 但是，即使我完成了，我也无法查看它。我的代码有什么问题吗？还是我必须使用任何其他功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-01T16:50:59.570

首先尝试以下方法：

```
success: function(data){
     //$("#response").html(data);
     alert(data);
   } 
```

这样你就会知道它是否真的在返回数据。

如果这有效，那么您可以更换

```
`$("#response").html(data)` 
```

和

```
 document.getElementById('response').innerHTML = data; 
```

这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-22T21:25:10.663

我强烈建议使用 FireFox + FireBug 来测试它，或者通过 HTTP 代理记录您的流量的其他浏览器。FireBug 将向您显示来自您的页面的所有 Ajax 请求**和响应，并且应该帮助您确定数据是否返回以及返回什么。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-28T07:54:12.033

首先，我想知道为什么在已经拥有 jquery 对象的情况下编写自定义函数 HTTPrequest，实际上您已经在顶部使用了 $.ajax，但后来又创建了 getHTTPObject()。

问题是javascript函数requestCustomerInfo（）从不委托处理ajax响应数据处的链接，您需要将该函数委托为ajax请求的回调

```
$.ajax({
       type:'POST',
       url: 'Links_ajax.php',
       dataType: 'html',
       data:'category='+category,
       success: function(data){
           $("#response").html(data);
           // here add the link click handler
           $("#response a").click(function(){
                // make http get request & custom handler
                $.get('GetCustomerData.php?id=10',function(result){
                    $('#divCustomerInfo').html(result);
                }); return false;
            });
       }
}); 
```

# c++ - WinApi C++，如何打开一个窗口按下一个按钮？

> ID：377862
> 
> 赞同：-2
> 
> 时间：2008-12-18T13:38:53.730
> 
> 标签：c++

我创建了一个带有按钮的“复选框”窗口，当单击该按钮时，它应该打开一个“编辑”窗口，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T14:32:39.660

这完全取决于您使用的窗口系统或图形库。¿ 您在使用 .NET 吗？¿MFC？

在任何情况下，您的按钮对象都可以将函数与其点击事件相关联。只需编写一个满足您需要的函数（在这种情况下，打开“编辑”窗口），将此函数与按钮的单击事件相关联，就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:44:26.473

在资源编辑器中默认隐藏您的编辑窗口，并在单击按钮时使用 ShowWindow(hEditWnd,SW_SHOW) 显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T13:59:45.747

您可以实例化一个新窗口并将其显示在点击事件中

# asp.net - 检测移动支持的语言

> ID：377864
> 
> 赞同：1
> 
> 时间：2008-12-18T13:39:18.643
> 
> 标签：asp.net, mobile-website

是否可以从 MobileCapabilities 对象中检测到设备是否支持阿拉伯语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-18T09:59:02.530

是的，您可以检查阿拉伯语的“ar”的 Accept-Language HTTP 标头。

例如这个真实的样本：

```
Accept-Language: en;q=1.0,fr;q=0.5,ar;q=0.5 
```

说，**en**（英语）以 100% 的质量被接受，但你也可以给**fr**（法语，法国）以 50% 的质量（意思是，这不是我的第一选择，但我可以接受），然后**ar**（阿拉伯语）也很好。

以下是来自大多数移动设备的一些示例接受语言：在此示例集中从最不常见到最常见排序：

```
Accept-Language: *
Accept-Language: English, Chinese
Accept-Language: en, en, fr-fr, pt-pt, en, sw-sw, zu-zu, yo-yo, af-af, ig-ig, st-st, ha-ha
Accept-Language: en-ZA, en;q=0.9
Accept-Language: en-au
Accept-Language: en-gb, en
Accept-Language: en-gb,en
Accept-Language: en-us, en;q=0.5
Accept-Language: en-za,en;q=0.7,af;q=0.3
Accept-Language: en; q=1.0, *; q=0.5
Accept-Language: en; q=1.0, en, *; q=0.5
Accept-Language: en;q=1.0, fr;q=0.5, de;q=0.5, tr;q=0.5, nl;q=0.5
Accept-Language: en;q=1.0, fr;q=0.5, pt;q=0.5
Accept-Language: en;q=1.0, nl;q=0.5, bg;q=0.5, ro;q=0.5
Accept-Language: en;q=1.0,en;q=0.5,vi;q=0.5
Accept-Language: en;q=1.0,fi;q=0.5,sv;q=0.5,no;q=0.5,is;q=0.5,da;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,de;q=0.5,it;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,de;q=0.5,it;q=0.5,es;q=0.5,pt;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,de;q=0.5,nl;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,de;q=0.5,pt;q=0.5,es;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,de;q=0.5,tr;q=0.5,nl;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,pt;q=0.5
Accept-Language: en;q=1.0,zh-cn, zh;q=0.5,en;q=0.5
Accept-Language: nb,en;q=0.9
Accept-Language: en-GB,en-US,en
Accept-Language: en-gb,en;q=0.5
Accept-Language: en-us, en
Accept-Language: en;q=1.0,fr;q=0.5,ar;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,nl;q=0.5,de;q=0.5,it;q=0.5
Accept-Language: en-GB,en;q=0.5
Accept-Language: en-US
Accept-Language: en;q=1.0, fr;q=0.5, de;q=0.5, es;q=0.5, it;q=0.5
Accept-Language: en;q=1.0,fr;q=0.5,de;q=0.5,es;q=0.5,it;q=0.5,pt;q=0.5
Accept-Language: en;q=1.0,nl;q=0.5
Accept-Language: id
Accept-Language: id,en;q=0.9
Accept-Language: en;q=1.0, fr;q=0.5, nl;q=0.5, de;q=0.5, it;q=0.5
Accept-Language: en;q=1.0, fr;q=0.5, pt;q=0.5, de;q=0.5
Accept-Language: en-gb, *; q=0.5
Accept-Language: en;q=1.0,de;q=0.5,it;q=0.5,fr;q=0.5
Accept-Language: zh-tw, zh-cn, en
Accept-Language: en-US,en
Accept-Language: en;q=1.0,de;q=0.5,it;q=0.5,fr;q=0.5,nl;q=0.5
Accept-Language: en-US,en;q=0.9
Accept-Language: en-ZA,en;q=0.9
Accept-Language: en-gb
Accept-Language: en-GB
Accept-Language: en-us
Accept-Language: en,en;q=0.9
Accept-Language: en-za
Accept-Language: en-us,en;q=0.5
Accept-Language: en 
```

这也突出了移动设备实现中的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T14:57:55.947

您可以使用 Accept-Language 标头。它至少适用于某些手机。我从以色列运营商处购买的诺基亚发出：

```
Accept-Language: he-IL 
```

您可以从 Request.Headers 访问它。

希望这会有所帮助，
阿萨夫

# java - 在解组期间从 ElementNSImpl 到自己的类型的间歇性 ClassCastException

> ID：377865
> 
> 赞同：7
> 
> 时间：2008-12-18T13:39:49.313
> 
> 标签：java, exception, jaxb, race-condition, unmarshalling

我们遇到了一个非常难以追踪的问题，我们*有时会*在尝试遍历未编组的对象列表时看到 ClassCastExceptions。重要的是*有时*，重新启动后特定代码可以正常工作。这似乎指向并发/计时/竞争条件的方向。我可以确认 JAXBContext 以及编组器和解组器都没有同时使用。我们已经通过锁定序列化对它们的访问。

但是，由于我们在 OSGi 平台上运行，其中各个包通过 Spring DM 异步初始化，因此可能有 2 个不同的包同时创建它们的 JAXBContext。

在任何情况下，我都会感谢任何指向解释可能导致这些*间歇性*ClassCastExceptions 的原因。间歇性很重要，因为它们表明代码本身正常工作，但某些外部因素似乎会影响行为。

这是异常的一个具体示例（注意我删除了公司特定的东西）：

```
Caused by: java.lang.ClassCastException: com.sun.org.apache.xerces.internal.dom.ElementNSImpl cannot be cast to com.foobar.TunnelType
    at com.foobar.NetMonitorImpl.getVpnStatus(NetMonitorImpl.java:180) 
```

第 180 行的方法是一个 for() 构造，循环遍历未编组对象内部的 TunnelType 对象集合（顺便说一句，解组工作正常）。

鉴于实际的对象解组很顺利，JAXB 是否甚至可以在物理上将 ElementNSImpl 对象留在嵌套集合中？

运行环境：

*   JAXB 2.1
*   操作系统
*   弹簧DM
*   JAXBContext 使用包含要编组/解组的类的包的 ClassLoader 进行初始化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-22T01:49:33.957

仅当我忘记告诉 JAXBContext 它可能正在处理的所有要编组的类型时，我才会收到此异常。

```
JAXBContext.newInstance(MyClass1.class,MyClass2.class, [...]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-10T13:02:34.420

这里建议的两种方法都不适合我。然而这解决了我的问题

```
@XmlAnyElement(lax = true)
public List<Foo> foos; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-21T11:53:21.463

出于绝望，我们转向对`JAXBContext.class`对象进行同步，将其视为某些竞争条件的唯一剩余可能性，至少我们无法再次重现此问题。这是关键代码：

```
synchronized (JAXBContext.class) {
    context = JAXBContext.newInstance(packageList, classLoader);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-22T17:07:46.390

上面的同步子句也为我解决了这个问题，但似乎上下文不应该是局部变量。相反，它应该是实例变量或静态变量。我无法按照我的意愿重构我的代码，所以我将上下文移动到静态初始化程序中，这并不完美，但似乎可以工作：

```
 private static Unmarshaller um;

  static{
    try {
      final JAXBContext ctx = JAXBContext.newInstance(ObjectFactory.class.getPackage().getName());
      um = ctx.createUnmarshaller();
    } catch (final JAXBException e) {
      e.printStackTrace();
    }
  } 
```

# javascript - Javascript：除非元素附加到 document.body，否则事件不会触发

> ID：377872
> 
> 赞同：0
> 
> 时间：2008-12-18T13:42:41.787
> 
> 标签：javascript, events, event-handling

我在 javascript 中动态创建一个元素（div），并在其上注册一个事件侦听器：

```
var tooltip = document.createElement('div');
tooltip.onclick = function() { alert('hello'); } 
```

现在，如果我将此元素附加到文档正文：

```
document.body.appendChild(tooltip); 
```

一切都很好，事件被捕获。但是（出于定位目的）我想将此元素附加到我页面中的（静态）子元素，例如：

```
document.getElementById('id').appendChild(tooltip); 
```

并且元素已正确生成和定位 - 但现在不再捕获 onclick 事件。有什么想法吗？这是 x 浏览器，所以我一定遗漏了一些东西。

谢谢，唐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T14:55:20.393

也许您需要在附加后注册事件处理程序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:00:34.283

您不仅要创建一个，而且要创建许多 div。试试这个（我希望你不介意，但我也修复了 HTML 和 CSS）：

```
<html>
<head>

<script type="text/javascript">

function makeDiv() {
    if(!document.getElementById('tooltipDiv')){
        var tooltip = document.createElement('div');

        tooltip.id = "tooltipDiv";
        // Give our tooltip a size and colour so we can see it
        tooltip.style.height = '200px';
        tooltip.style.position = 'absolute';
        tooltip.style.width = '200px';
        tooltip.style.backgroundColor = '#eee';

        // Register onclick listener
        tooltip.onclick = function() { alert('hello'); }
        //tooltip.addEventListener("click", function(){ alert('hello'); }, false);

        // *** Comment one of these out: ***

        //document.body.appendChild(tooltip);
        document.getElementById('myDiv').appendChild(tooltip);
    }
}

</script>
</head>

<body>

<div id="myDiv" 
     onmouseover="makeDiv();" 
     style="position: relative; top: 100px; left: 100px; border: 1px solid red; width: 200px;">

<span>my div text</span>

</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T17:19:14.947

这是一些删除 onmouseout 工具提示的代码。

在创建工具提示时给它一个 ID：

```
toolTip.setAttribute('id','toolTip'); 
```

然后为 onmouseout

```
function removeDiv(container) {
    var toolTip = document.getElementById('toolTip');
    document.getElementById(container).removeChild(toolTip);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T14:47:41.703

好的，这是我的代码，为延迟道歉。下面发布了一个带有解决方法的版本：

```
<html>
<head>

<script type="text/javascript">

function makeDiv() {
  var tooltip = document.createElement('div');

  // Give our tooltip a size and colour so we can see it
  tooltip.style.height = '200px';
  tooltip.style.position = 'absolute';
  tooltip.style.width = '200px';
  tooltip.style.backgroundColor = '#eee';

  // Register onclick listener
  tooltip.onclick = function() { alert('hello'); }

  // *** Comment one of these out: ***

  //document.body.appendChild(tooltip);
  document.getElementById('myDiv').appendChild(tooltip);
}

</script>
</head>

<body>

<div id="myDiv" 
     onmouseover="makeDiv();" 
     style="position: relative; top: 100px; left; 100px; border: 1px solid red; width: 200px;">

<span>my div text</span>

</div>

</body>
</html> 
```

=================================== 好的 - 所以这有效：

```
<html>
<head>

<script type="text/javascript">

function makeDiv() {
  var tooltip = document.createElement('div');

  // Give our tooltip a size and colour so we can see it
  tooltip.style.height = '200px';
  tooltip.style.position = 'absolute';
  tooltip.style.width = '200px';
  tooltip.style.backgroundColor = '#eee';

  // Register onclick listener
  tooltip.onclick = function() { alert('hello'); }

  // *** Comment one of these out: ***

  //document.body.appendChild(tooltip);
  document.getElementById('container').appendChild(tooltip);
}

</script>
</head>

<body>

<div id="container" style="border: 1px solid blue; float: left; ">
  <div id="myDiv" 
       onmouseover="makeDiv();" 
       style="position: relative; border: 1px solid red; width: 200px;">

       <span>my div text</span>
  </div>
</div>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T13:58:52.490

您的代码在 Firefox 3.0.5 和 IE7 上运行良好。你确定你的例子是正确的吗？

# ms-access - Access vba：如何打开系统消息或提示？

> ID：377878
> 
> 赞同：12
> 
> 时间：2008-12-18T13:46:46.443
> 
> 标签：ms-access

我使用表单在 Access 中的数据库上运行一些代码。在更新或删除期间，Access 会询问您是要更新还是删除。

我想知道是否有任何方法可以关闭这些系统消息，或者让用户选择他是否希望弹出这些消息的偏好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-18T13:48:30.200

不要忘记重新打开这些。

```
DoCmd.SetWarnings false
DoCmd.SetWarnings true

Application.DisplayAlerts = false
Application.DisplayAlerts = true 
```

# mysql - 如何在不执行 MySQL 查询的情况下检查它是否有效？

> ID：377883
> 
> 赞同：12
> 
> 时间：2008-12-18T13:47:18.083
> 
> 标签：mysql, validation

我正在制作一个简单的工具，它将获取一串 MySQL 命令并运行它（在多个数据库服务器上依次）。我相信用户是明智的，但是会发生错误，我正在寻找一种方法来防止基本的拼写错误：

有没有办法在运行时验证（相对简单的）MySQL 查询以查看它们在语法上是否正确？

我不是在寻找语义正确性，例如表名或连接适用性；就像 SQL 查询的拼写检查一样。

换句话说，

```
SELECT * FROM x; 
```

或者

```
INSERT INTO x SET id=1,bar="foo"; 
```

将被标记为有效，而其中任何一个都不会：

```
SELECT FROM x;
SECLET * RFOM x;
ISNETR INTO x SET id=1;
HJBGYGCRYTCY; 
```

对于`SELECT`s，我可以屈服于`EXPLAIN`我的需要 - 运行`EXPLAIN SELECT (...)`并观察错误，但有没有办法检查其他命令？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-06-24T06:44:37.677

为了验证查询，我使用 EXPLAIN 命令。您可以采用任何 SQL 查询并在其前面添加 EXPLAIN 并执行。如果查询错误，将返回错误。

例子：

```
explain select * from users;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
|  1 | SIMPLE      | users | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    1 |   100.00 | NULL  |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+ 
```

和错误的查询

```
explain select * from users2;
ERROR 1146 (42S02): Table 'test.users2' doesn't exist 
```

PS Explain 也适用于插入、更新、删除。不仅选择

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-18T13:52:53.220

不是不了解模式（例如，'x' 是表吗？）并编写 SQL 解析器。您的 MySQL 查询工具应该能够进行这种验证（如果您愿意，可以进行智能感知），但我从第一手经验中知道，大多数（免费）MySQL 工具都很糟糕。

“准备”查询会做你想做的事，但它是运行时检查，而不是编译时检查 - 你似乎正在寻找编译时/离线解决方案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-18T20:17:35.330

根据您的 MySQL 引擎和设置，您可以启动事务，尝试查询，然后执行回滚。假设脏读已关闭，那应该可以。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-18T13:53:42.453

您可以创建一个临时表来规避查询的副作用：

```
CREATE TEMPORARY TABLE users SELECT * FROM users;
INSERT INTO users(name) VALUES('UniqueName');
DROP TABLE users;
SELECT * FROM users WHERE name='UniqueName'; -- Should return 0 results 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-13T21:32:05.723

您可以使用您的代码和唯一名称临时创建一个存储过程。然后你可以立即放下它。事务不能回滚 SP 创建。但要小心，因为它只是语法验证，所以它不会检查一个对象（在你的查询中）是否存在。

# java - 针对数据库的 JAX-WS 身份验证

> ID：377901
> 
> 赞同：5
> 
> 时间：2008-12-18T13:51:39.913
> 
> 标签：java, web-services, security

我正在实现一个将由外部 Java 和 PHP 客户端使用的 JAX-WS Web 服务。

客户端必须使用存储在每个客户端数据库中的用户名和密码进行身份验证。

最好使用哪种身份验证机制来确保其他客户端可以使用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-01-31T08:15:48.083

对于我们的 Web 服务身份验证，我们采用双重方法，以确保具有不同先决条件的客户端能够进行身份验证。

*   使用 HTTP 请求标头中的用户名和密码参数进行身份验证
*   使用 HTTP 基本身份验证进行身份验证。

请注意，我们网络服务的所有流量都通过 SSL 安全连接进行路由。因此，嗅探密码是不可能的。当然，也可以选择带摘要的 HTTP 身份验证 - 请参阅[这个有趣的站点](http://java.boot.by/wcd-guide/ch05s03.html)以获取更多信息。

但回到我们的例子：

```
//First, try authenticating against two predefined parameters in the HTTP 
//Request Header: 'Username' and 'Password'.

public static String authenticate(MessageContext mctx) {

     String s = "Login failed. Please provide a valid 'Username' and 'Password' in the HTTP header.";

    // Get username and password from the HTTP Header
    Map httpHeaders = (Map) mctx.get(MessageContext.HTTP_REQUEST_HEADERS);
    String username = null;
    String password = null;

    List userList = (List) httpHeaders.get("Username");
    List passList = (List) httpHeaders.get("Password");

    // first try our username/password header authentication
    if (CollectionUtils.isNotEmpty(userList)
            && CollectionUtils.isNotEmpty(passList)) {
        username = userList.get(0).toString();
        password = passList.get(0).toString();
    }

    // No username found - try HTTP basic authentication
    if (username == null) {
        List auth = (List) httpHeaders.get("Authorization");
        if (CollectionUtils.isNotEmpty(auth)) {
            String[] authArray = authorizeBasic(auth.get(0).toString());
            if (authArray != null) {
                username = authArray[0];
                password = authArray[1];
            }
        }
    }

    if (username != null && password != null) {

        try {
            // Perform the authentication - e.g. against credentials from a DB, Realm or other
            return authenticate(username, password);
        } catch (Exception e) {
            LOG.error(e);
            return s;
        }

    }
    return s;
}

/**
 * return username and password for basic authentication
 * 
 * @param authorizeString
 * @return
 */
public static String[] authorizeBasic(String authorizeString) {

    if (authorizeString != null) {
        StringTokenizer st = new StringTokenizer(authorizeString);
        if (st.hasMoreTokens()) {
            String basic = st.nextToken();
            if (basic.equalsIgnoreCase("Basic")) {
                String credentials = st.nextToken();
                String userPass = new String(
                        Base64.decodeBase64(credentials.getBytes()));
                String[] userPassArray = userPass.split(":");
                if (userPassArray != null && userPassArray.length == 2) {
                    String userId = userPassArray[0];
                    String userPassword = userPassArray[1];
                    return new String[] { userId, userPassword };
                }

            }
        }
    }

    return null;

} 
```

[使用我们预定义的“用户名”和“密码”参数的第一次身份验证对于使用SOAP-UI](http://www.soapui.org/)的集成测试人员特别有用（尽管我不完全确定是否无法使用 HTTP 基本身份验证来使用 SOAP-UI ）。然后第二次身份验证尝试使用 HTTP 基本身份验证提供的参数。

为了拦截对 Web 服务的每次调用，我们在每个端点上定义了一个处理程序：

```
@HandlerChain(file = "../../../../../handlers.xml")
@SchemaValidation(handler = SchemaValidationErrorHandler.class)
public class DeliveryEndpointImpl implements DeliveryEndpoint { 
```

handler.xml 看起来像：

```
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xsi:schemaLocation="http://java.sun.com/xml/ns/javaee">

     <handler-chain>
        <handler>
            <handler-name>AuthenticationHandler</handler-name>
            <handler-class>mywebservice.handler.AuthenticationHandler</handler-class>
        </handler>
    </handler-chain>
</handler-chains> 
```

如您所见，处理程序指向一个 AuthenticationHandler，它拦截对 Web 服务端点的每次调用。这是身份验证处理程序：

```
public class AuthenticationHandler implements SOAPHandler<SOAPMessageContext> {

    /**
     * Logger
     */
    public static final Log log = LogFactory
            .getLog(AuthenticationHandler.class);

    /**
     * The method is used to handle all incoming messages and to authenticate
     * the user
     * 
     * @param context
     *            The message context which is used to retrieve the username and
     *            the password
     * @return True if the method was successfully handled and if the request
     *         may be forwarded to the respective handling methods. False if the
     *         request may not be further processed.
     */
    @Override
    public boolean handleMessage(SOAPMessageContext context) {

        // Only inbound messages must be authenticated
        boolean isOutbound = (Boolean) context
                .get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

        if (!isOutbound) {
            // Authenticate the call
            String s = EbsUtils.authenticate(context);
            if (s != null) {
                log.info("Call to Web Service operation failed due to wrong user credentials. Error details: "
                        + s);

                // Return a fault with an access denied error code (101)
                generateSOAPErrMessage(
                        context.getMessage(),
                        ServiceErrorCodes.ACCESS_DENIED,
                        ServiceErrorCodes
                                .getErrorCodeDescription(ServiceErrorCodes.ACCESS_DENIED),
                        s);

                return false;
            }

        }

        return true;
    }

    /**
     * Generate a SOAP error message
     * 
     * @param msg
     *            The SOAP message
     * @param code
     *            The error code
     * @param reason
     *            The reason for the error
     */
    private void generateSOAPErrMessage(SOAPMessage msg, String code,
            String reason, String detail) {
        try {
            SOAPBody soapBody = msg.getSOAPPart().getEnvelope().getBody();
            SOAPFault soapFault = soapBody.addFault();
            soapFault.setFaultCode(code);
            soapFault.setFaultString(reason);

            // Manually crate a failure element in order to guarentee that this
            // authentication handler returns the same type of soap fault as the
            // rest
            // of the application
            QName failureElement = new QName(
                    "http://yournamespacehere.com", "Failure", "ns3");
            QName codeElement = new QName("Code");
            QName reasonElement = new QName("Reason");
            QName detailElement = new QName("Detail");

            soapFault.addDetail().addDetailEntry(failureElement)
                    .addChildElement(codeElement).addTextNode(code)
                    .getParentElement().addChildElement(reasonElement)
                    .addTextNode(reason).getParentElement()
                    .addChildElement(detailElement).addTextNode(detail);

            throw new SOAPFaultException(soapFault);
        } catch (SOAPException e) {
        }
    }

    /**
     * Handles faults
     */
    @Override
    public boolean handleFault(SOAPMessageContext context) {
        // do nothing
        return false;
    }

    /**
     * Close - not used
     */
    @Override
    public void close(MessageContext context) {
        // do nothing

    }

    /**
     * Get headers - not used
     */
    @Override
    public Set<QName> getHeaders() {
        return null;
    }

} 
```

在 AuthenticationHandler 中，我们调用了上面进一步定义的 authenticate() 方法。请注意，我们会创建一个名为“Failure”的手动 SOAP 故障，以防身份验证出现问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-19T21:55:10.167

Basic WS-Security 可以与插入 JAAS 以提供数据库后端的 Java 和 PHP 客户端（以及其他客户端）一起使用。如何实现这种取决于您的容器。使用 @RolesAllowed 注释来注释您的 Web 服务方法，以控制调用用户必须具有的角色。所有 J2EE 容器都将提供一些机制来指定应该针对哪些 JAAS 领域用户进行身份验证。例如，在 Glassfish 中，您可以使用管理控制台来管理领域、用户和组。然后在您的 application.xml 中指定领域和组到角色的映射。

[以下](http://docs.sun.com/app/docs/doc/819-3669/bnccv?a=view)是如何在 Glassfish 上实现这一点的一些细节

使用[JBoss 中的 JBoss WS](http://jbossws.jboss.org/mediawiki/index.php?title=Authentication)，它变得更加容易。

您正在使用什么 JAX-WS 实现以及在哪个容器中？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-24T09:28:35.443

有没有办法独立于当前容器？我想定义哪个类负责授权。该类可以调用数据库或在其他地方有密码。

# colors - 如何用颜色表示成功和失败？

> ID：377906
> 
> 赞同：6
> 
> 时间：2008-12-18T13:54:52.187
> 
> 标签：colors, accessibility

我需要制作一个 Java 组件，在进程通过时将背景变为某种颜色，在进程失败时将背景变为另一种颜色。

我的第一个想法是：绿色代表成功，红色代表失败。

但后来我读到 10% 的男性无法区分这两种颜色。什么是更好的颜色组合？

（对于吹毛求疵的人：是的，我知道仅靠颜色是不够的，还可以使用文本、形状和噪音。不过我问的是颜色的适当使用。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-18T14:13:47.093

[![替代文字](https://i.stack.imgur.com/HPxSk.png)](https://i.stack.imgur.com/HPxSk.png) 红色 + x = 失败

[![替代文字](https://i.stack.imgur.com/jMHTo.png)](https://i.stack.imgur.com/jMHTo.png) 绿色 + 复选标记 = 成功

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-18T14:10:01.810

我想你自己已经回答了这个问题。除文本外，还使用绿色/红色。大多数人会理解绿色/红色。如果你把它改成蓝色/黄色，那 90% 看到绿色/红色的人会感到困惑。遵守惯例并添加文字以帮助 10% 看不到绿色/红色的人。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-18T14:27:57.593

请记住，这些“明显”的颜色关联（绿色=好，红色=坏）在[文化上是不同](http://en.wikipedia.org/wiki/Red#Eastern_and_African_traditions)的。因此，不仅仅依赖于颜色是一个非常好的主意。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-18T14:07:53.627

使用颜色和符号。绿色带“+”，红色带“-”，这样看不到颜色的人会明白。

如果是网格线的背景色，为了解决问题，添加一个名为“状态”的列并使用图标 + 或 -。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-18T14:12:34.303

在我看来，最好的方法是混合使用颜色和图标/文本。

例如，当我的表单出现错误时，我会执行以下操作：

*   在表单顶部提供一个文本标题，说明以下内容：“糟糕，您的提交存在一些问题：未填写姓氏，等等。”

*   在每个错误字段上，我突出显示粉色框的背景并修改边框。它不仅改变了颜色，而且还对错误字段进行了微妙但明显的关注。

*   最后，根据我拥有的站点和空间量，我在该字段后附加了一个带有小消息的小“警告”图标。

将所有这 3 个结合在一起，错误表格很容易阅读，并且很难错过所有人的情况。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-18T16:39:39.670

作为一个有红/绿色盲的人，我可以很容易地分辨出两种颜色的“纯”形式的区别。问题是红色往往看起来“褪色”——更多的是棕色和绿色/黄色融合在一起。在 8% 的色盲男性中，我相信很少有人完全无法区分纯红色和纯绿色。问题是我穿的毛衣或秋叶的确切颜色可能很难而且令人困惑。此外，我确实很难使用任何 LED，尤其是交通信号灯。它们可能会让人感到困惑，主要是因为我对相对亮度的依赖比对色调的影响更大，而且一些信号的亮度变化很大。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T14:06:48.137

也许是交通信号灯的视觉表示？在中性状态下，所有三个灯都是灰色的，尽管仍然可以通过颜色辨别。在“绿色”状态下，绿光更亮，背景与光线的对比度增加。红灯状态也一样。

我不得不承认

1.  我不知道英国交通信号灯的红-琥珀-绿配置是否是一个不接受解释的全球标准，并且
2.  开灯和关灯状态之间的对比度是否足以让视障用户区分它们。

只是一个想法...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T14:23:50.893

我们一般是这样实现的：

我们编写了 2 个常用函数，其中我们使用 {0} 格式化字符串以表示错误 fmsg 和绿色表示成功。

因此，您可以使用一个标签并在服务器端代码本身上控制消息及其类型（成功和错误），而不是为错误（红色）和成功（绿色）消息使用 2 个不同的标签。

但是因为，ppl 用于色盲：使用图像 X 表示错误，使用与上述相同的方式来实现，甚至橙色表示错误，蓝色表示成功也是一个不错的选择。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T15:10:32.813

不要使用纯红色和绿色。在交通信号灯等安全装置上，红色实际上是红色和橙色的混合物。如果我没记错的话，绿色还夹杂着一点黄色。

除了颜色之外，使用辅助方法来指示成功/失败仍然是一个好主意。这可以是文本、符号或引起注意的东西，例如红色故障背景是闪烁而不是静态的交替颜色。例如交替使用红色和黄色。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T16:12:15.560

老实说，形状/位置几乎总是比颜色更重要的解决方案。颜色有一些方面，例如人眼对蓝色不敏感，这意味着颜色有助于提高清晰度，您不一定要依赖它来获得合适的颜色。

# c# - 如何抓取父进程标准输出？

> ID：377911
> 
> 赞同：2
> 
> 时间：2008-12-18T13:56:34.083
> 
> 标签：c#, winapi, console

我正在编写一个实用程序（[http://reg2run.sf.net](http://reg2run.sf.net)），如果没有参数的执行可以作为 Windows 应用程序（显示 OpenFileDialog 等），否则 - 作为控制台应用程序。

所以，在第一种情况下，我不想显示控制台窗口，这就是为什么项目是 Windows 应用程序。但在第二个 - 我需要展示它，它是用

```
if (ptrNew == IntPtr.Zero)
{
    ptrNew = GetStdHandle(-11);
}
if (!AllocConsole())
{
    throw new ExternalCallException("AllocConsole");
}
ptrNew = CreateFile("CONOUT$", 0x40000000, 2, IntPtr.Zero, 3, 0, IntPtr.Zero);
if (!SetStdHandle(-11, ptrNew))
{
    throw new ExternalCallException("SetStdHandle");
}
StreamWriter newOut = new StreamWriter(Console.OpenStandardOutput());
newOut.AutoFlush = true;
Console.SetOut(newOut);
Console.SetError(newOut); 
```

我想要的是获取父进程标准输出并使用它（如果存在）（如果通过 cmd.exe 或 Far Manager 执行）。我该怎么做？

我试过

```
static Process GetParentProc()
{
int pidParent = 0;
int pidCurrent = Process.GetCurrentProcess().Id;

IntPtr hSnapshot = CreateToolhelp32Snapshot(2, 0);
if (hSnapshot == IntPtr.Zero)
{
    return null;
}

PROCESSENTRY32 oProcInfo = new PROCESSENTRY32();
oProcInfo.dwSize = (uint)Marshal.SizeOf(typeof(PROCESSENTRY32));

if (!Process32First(hSnapshot, ref oProcInfo))
{
    return null;
}
do
{
    if (pidCurrent == oProcInfo.th32ProcessID)
    {
        pidParent = (int)oProcInfo.th32ParentProcessID;
    }
}
while (pidParent == 0 && Process32Next(hSnapshot, ref oProcInfo));

if (pidParent > 0)
{
    return Process.GetProcessById(pidParent);
}
else
{
    return null;
} 
```

和

```
StreamWriter newOut = GetParentProc().StandardInput; 
```

但得到 InvalidOperationException: StandardIn has not been redirected。因为

```
GetParentProc().StartInfo.RedirectStandardOutput = false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T14:31:02.377

对于需要在 Windows 上根据上下文选择充当控制台应用程序还是 GUI 应用程序的应用程序，有几种方法：

1.  有两个单独的应用程序，一个有条件地启动另一个。
2.  上述策略的一种变体，有两个应用程序，一个名为“app.com”（即只需重命名一个带有 COM 扩展名的控制台 EXE），另一个名为“app.exe”，这样命令行调用就会找到 app.com第一的。由于古老的 DOS 兼容性，.COM 可执行文件位于 .EXE 之前。（这在 Windows 中是可配置的；请参阅 PATHEXT 环境变量。）
3.  rxvt/Cygwin 技术，这是我在其他任何地方都没有真正看到的技术。

让我详细介绍一下 Cygwin 上的 rxvt 是如何工作的。Rxvt 是一个终端仿真器，通常在 X Window 系统上运行。由于 Win32 控制台的限制，Cygwin 将其打包为功能更全面的控制台，支持大量历史记录、动态调整大小、按实例可配置的字体和颜色主题、非应用程序冻结鼠标选择等功能为了在 Windows 上本地运行，Cygwin 附带的 rxvt 包含一个用于 Win32 的小型 X11 包装库。出于与现有本地 Win32 可执行文件的兼容性原因，Windows 上的 Rxvt 实际上是一个控制台应用程序，但大多数时候您从未看到控制台；您只会看到 rxvt 终端仿真器窗口本身。

它的工作方式`rxvt/W11/wrap/wrap.c`在 rxvt 源代码树中，在名为`hideConsole()`. 基本上，它会打开它的控制台（带有`CreateFile("CONOUT$" ...)`），并检查光标位置是否在 (0,0) 处（`GetConsoleScreenBufferInfo()`在控制台句柄上使用）。

如果是，那么它推断它是作为独立应用程序启动的，而不是从控制台父应用程序启动的，因此它知道操作系统已经为该进程创建了一个专用的 Win32 控制台。它继续隐藏这个控制台窗口，但它必须先找到它。它用于`SetConsoleTitle`根据应用程序的名称和当前线程 ID 将控制台窗口的标题设置为唯一值。然后它`FindWindow`用于查找此窗口的句柄（如果需要更改标题，则定期`Sleep`搜索几毫秒，因为控制台窗口实际上是由完全在 Windows 中的不同进程控制的）。当它最终找到窗口句柄时，它用 隐藏它`ShowWindowAsync`，传入`SW_HIDE`。

使用这种方法，您可以编写一个应用程序：

*   如果从控制台父级启动，它可以继续使用这个控制台
*   如果作为应用程序启动，它可以选择是否隐藏控制台

唯一的缺点是在应用程序启动时控制台窗口的短暂闪烁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T17:41:45.270

您始终可以使用以下 P/Invoke 方法：

```
[DllImport("kernel32.dll")]
static extern bool AttachConsole(int dwProcessId);

const int ATTACH_PARENT_PROCESS = -1; 
```

# prolog - Prolog - 输出列表？

> ID：377912
> 
> 赞同：0
> 
> 时间：2008-12-18T13:56:51.090
> 
> 标签：prolog

我有这个功能

```
sublist(_,[_],_) :-
    !.
sublist(X,[Y|T],Z) :-
    R is X - Y,
    sublist(X,T,[R|Z]). 
```

一个示例调用是`sublist(2,[1,2,3],Z)`. 在执行结束时它只给我“是”，但我想看看 Z 的内容。

我知道这很简单，因为我有其他指令可以做类似的事情，但是这个不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-04T12:47:05.247

我还将假设 sublist/3 应该从列表中的所有项目中减去一个数字。

您没有得到 Z 的任何结果的原因是因为您在进入递归的过程中构建了列表。这意味着当停止谓词成功时，Prolog 会退出递归，并且 Z 再次变得未实例化。

```
Z is ?
    |
    Z is [-1]
        |
        Z is [-1, 0]
            |
            Z is [-1, 0, 1]
            |
        Z is [-1, 0]
        |
    Z is [-1]
    |
Z is ? 
```

尝试先进入递归并在退出时构建您的列表。也许是这样的：

```
subtract_list(_, [], []).

subtract_list(Number, [Head|Tail], [Subtracted|Result]):-
    subtract_list(Number, Tail, Result),
    Subtracted is Head - Number. 
```

我们改变的只是递归谓词中规则的顺序和停止条件的条款。现在它递归直到它到达一个空列表，此时它也用一个空列表实例化结果变量。然后它会在这样做的同时将值添加到列表中。

```
?- subtract_list(1,[4,3,2],Z).
Z = [3, 2, 1] 
```

希望这可以帮助。汤姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T19:56:57.897

您并没有真正指定`sublist/3`应该做什么，但也许您的意思是：

```
sublist(_, [], []) :- !.

sublist(X, [Y | T], [R | Z]) :-
    R is X - Y,
    sublist(X, T, Z). 
```

使用示例：

```
?- sublist(2, [1, 2, 3], Z).
Z = [1, 0, -1]. 
```

顺便说一句，如果您不想自己遍历列表，那么您可以使用`maplist/3`SWI-Prolog 提供的列表。首先定义您想要的计算：

```
my_calculation(X, Y, Z) :-
    Z is X - Y. 
```

然后调用`maplist/3`：

```
?- maplist(my_calculation(2), [1, 2, 3], Z).
Z = [1, 0, -1]. 
```

# entity-framework - 使用实体框架，我应该为所有数据库表添加时间戳吗？

> ID：377916
> 
> 赞同：4
> 
> 时间：2008-12-18T13:57:58.060
> 
> 标签：entity-framework, concurrency, timestamp

我计划将 MS 实体框架用于新的 Web 应用程序（使用 EF v2！）。

那么通过将时间戳列添加到现有和未来数据库中的所有实体表来支持并发检查，提前计划是否有意义？有什么理由为什么在每个表中都有一个时间戳列是个*坏主意吗？*

请注意，重点是添加对乐观并发的支持，而不是审计。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T14:06:43.457

多年来，我一直使用时间戳列作为例行公事。另一种选择是行版本，但是你需要更新它等等。我从来没有遇到过时间戳问题。需要注意的一点——如果你曾经选择进入一个临时表/表变量进行处理，你需要在临时表中使用`varbinary(8)`，而不是`timestamp`——否则你的临时表将在更新时获得它自己唯一的时间戳；-p

正如您所承认的，`timestamp`仅有助于并发性。尽管有名字，但它与时间没有*直接*关系，因此对审计没有帮助。

MS db 产品（LINQ-to-SQL / EF / 等）很好地支持它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T14:26:49.437

在以前的项目中，我经常使用时间戳，而且我从未有过不好的体验。此外，我会从该决定中完全排除实体框架，因为这可能会随着时间的推移而改变。

# php - 如何从 CakePHP 的关联模型中排除记录？

> ID：377920
> 
> 赞同：5
> 
> 时间：2008-12-18T13:58:54.143
> 
> 标签：php, cakephp

我正在 CakePHP 中创建一个问答应用程序，并且在某些情况下我想排除我的关联。想象一下：

我使用 $this->Question->findAll(); 在第一页列出所有问题。由于我的模型中有以下关联：

```
public $hasMany = array('Answer' =>
        array('className' => 'Answer',
            'order' => 'Answer.created DESC',
            'foreignKey' => 'post_id',
            'dependent' => true,
            'exclusive' => false,
        )
    ); 
```

所有答案都将在开始页面被选中，这不是最佳的。我该怎么做才能排除这种特定方法中的答案？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T14:20:58.293

我快速浏览一下[CakePHP API](http://api.cakephp.org)，发现您在模型上有一个[unbindModel](http://api.cakephp.org/class_model.html#0b969d5264205cd3a425980dd53e9658)方法。所以在你的例子中你可以这样做：

```
$this->Question->unBindModel(array('hasMany' => array(’Answer’))) 
```

或者，您可以使用[Containable](http://book.cakephp.org/view/474/Containable)行为仅从 MySQL 中选择当前页面视图所需的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T14:39:35.667

如果您使用的是 CakePHP 1.2，您应该考虑 Containable Behaviour。有关详细信息，请参阅[http://cakebaker.42dh.com/2008/05/18/new-core-behavior-containable/](http://cakebaker.42dh.com/2008/05/18/new-core-behavior-containable/)

# java - 按下单独的 JBtton 时如何停止使用 DefaultCellEditor 进行编辑

> ID：377924
> 
> 赞同：5
> 
> 时间：2008-12-18T14:01:26.477
> 
> 标签：java, swing, focus, jtable, tablecelleditor

我得到了一个带有自定义 TableCellEditor（扩展 DefaultCellEditor）的表格，其中 JFormattedTextField 作为编辑器组件。

现在我遇到了问题：当我在编辑时按下一个单独的按钮。按下按钮时，编辑器保持“打开并处于活动状态”，而我希望它停止编辑，以便所做的更改可用于按钮引起的操作。

那么如何在按下不同的按钮时停止编辑。我为 JFormattedTextField 尝试了*setFocusLostBehavior* ( *JFormattedTextField.COMMIT)*但它似乎没有效果。

 *希望有人有一些好主意=）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-18T14:07:03.020

你可以试试

`jtable.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T14:42:45.833

谢谢 asalamon74，效果很好。

Sun Bug 数据库中关于这件事的争论：[Bug 4724980：JTable：添加 API 以控制当表失去焦点时编辑会发生什么。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4724980)（还发现了其他错误条目）。terminateEditOnFocusLost 开启“提交或取消”行为，这可以在 Java 源代码中的*JTable$CellEditorRemover类中看到*

是的，API 等中没有记录它有点奇怪......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-14T10:33:36.700

这些事情还有更多问题，请参阅问题[Java Swing : changed JTree selection while editingstopCellEditing() : how to get stopCellEditing() called before TreeListeners:valueChanged?](https://stackoverflow.com/questions/1276769/java-swing-changing-jtree-selection-while-editingstopcellediting-how-to-get)

# c# - c#控制台，Console.Clear问题

> ID：377927
> 
> 赞同：12
> 
> 时间：2008-12-18T14:02:05.650
> 
> 标签：c#, console-application

我正在用 C# 编写一个控制台程序。

有没有办法可以使用 Console.Clear() 仅清除控制台屏幕上的某些内容？

这是我的问题：

我有一个徽标（我使用 Console.WriteLine() 将它放在屏幕上）和一个 2d 数组，我想保持不变并清除它下面的所有内容。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-12-18T14:41:05.180

您可以使用自定义方法清除部分屏幕...

```
static void Clear(int x, int y, int width, int height)
{
    int curTop = Console.CursorTop;
    int curLeft = Console.CursorLeft;
    for (; height > 0;)
    {
        Console.SetCursorPosition(x, y + --height);
        Console.Write(new string(' ',width));
    }
    Console.SetCursorPosition(curLeft, curTop);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T14:16:27.400

**编辑：**[这里](https://stackoverflow.com/questions/377927/c-console-consoleclear-problem#378036)的答案显示了如何比我意识到的更强大地操纵控制台。我最初写的内容仍然适用，如果您没有可用的这些工具，可能会很有用，也许是不同的语言。

* * *

存储数组的徽标和最初生成的状态，然后在清除控制台时再次写出保存的值，而不是使用相同的生成过程。

正如其他人所说，控制台不是为这种操作而设计的，所以你必须解决它。

另一种选择可能是写入字符串或字符串构建器而不是直接写入控制台，然后每当控制台需要更新时，清除它的输出并将您的“输出”字符串/流写入控制台。这将允许您对输出文本执行字符串操作/正则表达式等，以删除/保留特定内容。

但是，这将涉及大量控制台开销，因为您最终会在每次更新时重新打印整个输出。

一个解决方案可能是保留您写入控制台的并行字符串/流表示，然后当您需要清除时，您可以清除字符串表示，清除控制台，然后再次将字符串写入控制台。这样，您只需在通常的写入操作中添加一个额外的写入操作，而主要的额外工作只有在您清除控制台时才会发生。

无论您做什么，写入控制台都不是一个快速的操作，如果您正在执行大量将内容写入控制台的操作，那么它可能会严重拖累您的应用程序的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T14:06:48.183

可以不清除然后重新编写标志和数组吗？控制台不是为您描述的那样使用而设计的。

# algorithm - 查找子字符串的最大出现次数的算法

> ID：377930
> 
> 赞同：1
> 
> 时间：2008-12-18T14:04:01.947
> 
> 标签：algorithm

给定一个字符串 S，找到重复最大次数的子字符串的最佳算法是什么。

例如，在“assdssfssd”中，重复最大次数为“ss”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T14:09:54.213

我可以看到构建一棵树来解决该特定问题。

有一个名义上的根节点。第一个字符是第一个孩子。在您的情况下，第二个字符是第一个字符 a -> s 的子代。它还开始根节点的新叶子。如果在添加节点时访问现有节点，则增加其计数（初始值为 1）。

完成后，您访问树的每个节点以在最深级别找到计数最高的节点（因为如果“asdf”出现 5 次，那么“a”、“as”和“asd”至少出现 5 次，根据定义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T14:13:39.057

听起来您正在寻找接近压缩算法的东西。压缩通过查找冗余（重复）信息并将其替换为指向第一次出现的指针来工作。以下是一些执行此操作的代码示例：

[http://www.developerfusion.com/code/1642/string-compression/](http://www.developerfusion.com/code/1642/string-compression/)

[http://www.howtodothings.com/computers/a1223-simple-string-compression.html](http://www.howtodothings.com/computers/a1223-simple-string-compression.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T14:10:03.120

重复次数最多的子字符串*将*是单个字母，因此您会找到出现次数最多的字母。这很容易：

```
>>> str = 'Can Berk Güder'
>>> letters = [l for l in str]
>>> uniq_letters = set(letters)
>>> counts = [(letters.count(l), l) for l in uniq_letters]
>>> counts
[(1, 'B'), (1, 'C'), (1, 'G'), (1, 'a'), (1, 'd'), (1, 'k'), (1, 'n'), (1, 'ü'), (2, ' '), (2, 'e'), (2, 'r')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T11:14:29.700

在“N”个长度的字符串中，

```
 No Of "1" character will be "N" which requires comparision of N * (N-1) / 2

   No of "2" characters will be "N-1" which requires comparision of (N-1) * (N-2) / 2

   No of "3" characters will be "N-2"  which requires comparision of (N-2) * (N-3) / 2 
```

......

并且“N”个字符的编号将为“1”，这需要比较 (1 * 0 / 2)

因此，最大子字符串数 = "N" + "N-1" + .... "1" = (N * ( N+1) / 2 ) 所需的比较数是 (N+1) * (N) * ( N-1) / 6

如果您在每个字符数上进行桶放置（而不是排序）到相同的大小，那么

```
 No Of "1" character will be "N" which requires comparision of N -1 with buckets of N

   No of "2" characters will be "N-1" which requires comparision of (N-2) with Buckets of N-1

   No of "3" characters will be "N-2"  which requires comparision of (N-3) with Buckets of N-2 
```

......

并且“N”个字符的编号将为“1”，这需要比较 0 与 Bucket 1

在这里，它将总比较减少到“N * (N-1) / 2”

最后在做完放桶后，拿下最高的那个桶作为你的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T14:11:10.030

```
// C# code, finds one of the most occurred non-empty substrings in O(n), proof by the reader!
int[] x = new int[65536];
foreach (char c in myString)
     x[(int)c]++;
int max = 0;
for (int i = 0; i < x.Length; ++i)
    if (x[max] < x[i])
        max = i;
return ((char)max).ToString(); 
```

不过，这可能不是您想要的。你可能需要看看像霍夫曼编码这样的东西......

# odbc - Windows Server 2003 x64 中的 DBF ODBC 驱动程序

> ID：377932
> 
> 赞同：1
> 
> 时间：2008-12-18T14:05:36.047
> 
> 标签：odbc, 64-bit, dbf

默认情况下，64 位版本的 Windows Server 不附带 ODBC DBF 驱动程序。

有没有办法得到它们？
存在哪些替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T14:19:11.043

我有理由确信 FoxPro 驱动程序可以很好地读取 DBF。我在 Vista 64 位上使用这个驱动程序没有任何问题，所以我怀疑它可以与 Server 2003 x64 一起使用。

[FoxPro 驱动程序](http://msdn.microsoft.com/en-us/vfoxpro/bb190233.aspx)

# apache-flex - 如何警告用户在 Flex/AIR 中启用了 CAPS LOCK？

> ID：377942
> 
> 赞同：8
> 
> 时间：2008-12-18T14:07:54.453
> 
> 标签：apache-flex, air

与 XP 登录屏幕类似，在 Flex 3 中，如何在文本框中向用户显示 CAPS LOCK 键已启用的警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T19:20:58.203

flash.ui.Keyboard.capsLock 不可绑定，因此代码不会真正起作用。

我会在 TextInput 的“keyDown”事件中调用一个函数，然后在该函数中检查 flash.ui.Keyboard.capsLock。然后，您可以在该文本上设置可见/includeInLayout，弹出警报等...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-23T08:45:22.257

试试这个

```
private function addHandler():void{
        //Called from app's creation complete event.
        //Listener to handle any keyboard KEY_DOWN event:
        this.addEventListener(KeyboardEvent.KEY_DOWN,handleKeyDown);
    }

private function handleKeyDown(event:KeyboardEvent):void{
     if (Keyboard.capsLock){
          lblCaps.visible =true;
     } else {
          lblCaps.visible =false;   
     }
} 
```

在创建完成时调用 addHandler

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T14:15:24.267

在动作脚本中：

```
 if(flash.ui.Keyboard.capsLock){
    // caps lock is on...
} 

```

或 MXML：

```
 <mx:Box width="100%" id="capsbox"
    visible="{flash.ui.Keyboard.capsLock}" 
    includeInLayout="{capsbox.visible}">
        <mx:Text text="Caps Lock is on." color="red" />
</mx:Box> 

```

# c++ - 如何在 Windows Mobile 上使用视频预览填充屏幕

> ID：377956
> 
> 赞同：7
> 
> 时间：2008-12-18T14:14:03.207
> 
> 标签：c++, windows-mobile, size

我正在为 Windows Mobile 设备上的视频捕获创建应用程序。在 MainFrame 中，有一个菜单和状态窗口（自定义窗口）。视频大小宽高比为**4:3**，因此在这种情况下，屏幕上还有一些其他元素，视频不会填满整个区域。

这是排列屏幕元素的函数：

```
int CMainFrame::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    ToggleFullScreen(TRUE);
    CScreenOrientation::SetScreenOrientation(270);
    if (CFrameWnd::OnCreate(lpCreateStruct) == -1)
        return -1;

    RECT r;
    GetWindowRect(&r);
    if (!m_wndStatus.Create(NULL, NULL, WS_CHILD | WS_VISIBLE, 
                CRect(0, 0, r.right, TOOLBAR_HEIGHT), this, AFX_IDW_PANE_FIRST + 1, NULL))
    {
        TRACE0("Failed to create status view\n");
        return -1;
    }

    // Create a camera view
    if (!m_wndCameraView.Create(NULL, NULL, AFX_WS_DEFAULT_VIEW,
        CRect(0, 0, 0, 0), this, AFX_IDW_PANE_FIRST, NULL))
    {
        TRACE0("Failed to create camera view\n");
        return -1;
    }
    m_wndCameraView.SetLogDirectory(m_Settings.m_LogDirectory);

    if (!m_wndCommandBar.Create(this) ||
        !m_wndCommandBar.AddAdornments(dwAdornmentFlags) ||
        !m_wndCommandBar.InsertMenuBar(IDR_MAINFRAME))
    {
        TRACE0("Failed to create CommandBar\n");
        return -1;      // fail to create
    }

    m_wndCommandBar.SetBarStyle(m_wndCommandBar.GetBarStyle() | CBRS_SIZE_FIXED);

    m_QueueProgressData.SetHandle(this);

    // Update GUI state
    UpdateGUIState();

    //VideoPreviewShow();

    // TODO: check error
    m_SleepModeTimerID = SetTimer(1, (UINT)1000, (TIMERPROC)CMainFrame::SleepModeTimer);

    PostMessage(WM_CHECK_UPGRADE, 0, 0);

    return 0;
} 
```

有谁知道是否有办法用视频预览填充空白区域（状态窗口和菜单栏未填充的区域）而不改变宽度：高度比（用状态栏和菜单覆盖视频预览的一部分）也许用更改窗口样式标志或任何其他方法？

# vba - 在 VBA 中设置字体颜色

> ID：377960
> 
> 赞同：6
> 
> 时间：2008-12-18T14:15:46.870
> 
> 标签：vba, excel, colors, rgb

我想将单元格的字体颜色设置为特定的 RGB 值。

如果我使用

```
ActiveCell.Color = RGB(255,255,0) 
```

我确实变黄了，但是如果我使用更具异国情调的 RGB 值，例如：

```
ActiveCell.Color = RGB(178, 150, 109) 
```

我只是得到一个灰色的颜色。

为什么我不能只使用任何 RGB 值？你知道任何解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T14:33:31.873

Excel 仅使用调色板中的颜色。当您使用 RGB 值设置单元格时，它会选择调色板中最接近匹配的单元格。你可以用你的颜色更新调色板，然后选择你的颜色，这样就可以了。

这将让您查看调色板中当前的内容：

```
 Public Sub checkPalette()
      Dim i As Integer, iRed As Integer, iGreen As Integer, iBlue As Integer
      Dim lcolor As Long
      For i = 1 To 56
        lcolor = ActiveWorkbook.Colors(i)
        iRed = lcolor Mod &H100  'get red component
        lcolor = lcolor \ &H100  'divide
        iGreen = lcolor Mod &H100 'get green component
        lcolor = lcolor \ &H100  'divide
        iBlue = lcolor Mod &H100 'get blue component
        Debug.Print "Palette " & i & ": R=" & iRed & " B=" & iBlue & " G=" & iGreen
      Next i
    End Sub 
```

这将让您设置调色板

```
Public Sub setPalette(palIdx As Integer, r As Integer, g As Integer, b As Integer)
  ActiveWorkbook.Colors(palIdx) = RGB(r, g, b)
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T16:39:23.037

快速提示：Excel 调色板有两行很少使用的颜色，通常可以设置为自定义值，而不会对其他人的工作表进行可见的更改。

这是创建一组合理的“柔和色调”颜色的代码，这些颜色远没有默认设置那么令人反感：

```
Public Sub SetPalePalette（可选 wbk As Excel.Workbook）
' 这个子例程创建一个自定义的淡色调调色板，您可以将其用于控件、标题和对话
'

' **** 此代码在公共领域 **** 
' Nigel Heffernan    [http://Excellerando.Blogspot.com](http://Excellerando.Blogspot.com)

' Excel 调色板有两个很少使用的隐藏行：
' 第 1 行：颜色 17 到 24
' 第 2 行：颜色 25 到 32 - 本工作簿中的 SetGrayPalette 使用
'

' 捕获现有屏幕更新设置的代码，如有必要，
' 暂时暂停更新，而此过程会产生刺激性
' 在屏幕上闪烁...并在退出时恢复屏幕更新（如果需要）。

Dim bScreenUpdating 为布尔值

bScreenUpdating = Application.ScreenUpdating

如果 bScreenUpdating = True 那么
    Application.ScreenUpdating = False
万一

'如果 Application.ScreenUpdating <> bScreenUpdating Then
' 应用程序.ScreenUpdating = bScreenUpdating
'万一

如果 wbk 什么都不是，那么
    设置 wbk = ThisWorkbook
万一

带 wbk

```
.Colors(17) = &HFFFFD0  ' pale cyan
.Colors(18) = &HD8FFD8  ' pale green.
.Colors(19) = &HD0FFFF  ' pale yellow
.Colors(20) = &HC8E8FF  ' pale orange
.Colors(21) = &HDBDBFF  ' pale pink
.Colors(22) = &HFFE0FF  ' pale magenta
.Colors(23) = &HFFE8E8  ' lavender
.Colors(24) = &HFFF0F0  ' paler lavender 
```

结束于

如果 Application.ScreenUpdating <> bScreenUpdating Then
    Application.ScreenUpdating = bScreenUpdating
万一

结束子

公共子集GreyPalette()
' 这个子例程创建一个自定义的灰色阴影调色板，您可以将其用于控件、标题和对话

' **** 此代码在公共领域 **** 
' Nigel Heffernan    [http://Excellerando.Blogspot.com](http://Excellerando.Blogspot.com)

' Excel 调色板有两个很少使用的隐藏行：
' 第 1 行：颜色 17 到 24 ' - 本工作簿中的 SetPalePalette 使用
' 第 2 行：颜色 25 到 32

' 捕获现有屏幕更新设置的代码，如有必要，
' 暂时暂停更新，而此过程会产生刺激性
' 屏幕上闪烁...记得在退出时恢复屏幕更新！

Dim bScreenUpdating 为布尔值

bScreenUpdating = Application.ScreenUpdating

如果 bScreenUpdating = True 那么
    Application.ScreenUpdating = False
万一

'如果 Application.ScreenUpdating <> bScreenUpdating Then
' 应用程序.ScreenUpdating = bScreenUpdating
'万一

使用本工作簿
    .颜色(25) = &HF0F0F0
    .颜色(26) = &HE8E8E8
    .颜色(27) = &HE0E0E0
    .Colors(28) = &HD8D8D8
    .颜色(29) = &HD0D0D0
    .Colors(30) = &HC8C8C8
    ' &HC0C0C0 ' 跳过 &HC0C0C0 - 这是主调色板中的常规 25% 灰色
    .Colors(31) = &HB8B8B8 ' 注意差距越来越大：人眼更敏感
    .Colors(32) = &HA8A8A8 ' 改变浅灰色，因此这将被视为线性比例
结束于

'Excel 默认调色板的右侧列指定以下灰色：

' 颜色 (56) = &H333333
' 颜色 (16) = &H808080
' 颜色 (48) = &H969696
' Colors(15) = &HC0C0C0 ' 默认 '25% 灰色'

' 这应该被修改以改善颜色“差距”并使颜色易于区分：

使用本工作簿
    .颜色(56) = &H505050
    .颜色(16) = &H707070
    .Colors(48) = &H989898
  ' .Colors(15) = &HC0C0C0
结束于

如果 Application.ScreenUpdating <> bScreenUpdating Then
    Application.ScreenUpdating = bScreenUpdating
万一

结束子

您可以选择为每个工作簿的 Open() 和 BeforeClose() 事件编写一个“CaptureColors”和“ReinstateColors”函数......甚至为每个工作表的激活和停用事件。

我有代码在某处为 3-D 图表创建“热”颜色渐变，让您在 32 个步骤中从“冷”蓝色变为“热”红色。这比您想象的要难：人类视觉系统将感知为“等间隔”的颜色梯度（以强度的对数刻度运行​​，并且红色、绿色和蓝色的非线性权重为“强”颜色) 需要时间来构建 - 您必须使用 VBA 强制 MS Chart 按照您指定的顺序使用您指定的颜色。

            回答 #3

赞同：1

时间：2012-01-12T14:45:07.077

```
Sub color()

bj = CStr(Hex(ActiveCell.Interior.Color))
If Len(bj) < 6 Then
    Do Until Len(bj) = 6
        bj = "0" & bj
    Loop
End If

R = CLng("&H" & Right(bj, 2))
bj = Left(bj, Len(bj) - 2)
G = CLng("&H" & Right(bj, 2))
bj = Left(bj, Len(bj) - 2)
B = CLng("&H" & bj)

End Sub 
```

            回答 #4

赞同：0

时间：2008-12-26T21:54:43.360

也感谢您的回答和评论。

这真的给我带来了很大的麻烦，因为我的客户在 Excel 中安装了其他插件，这些插件也篡改了调色板。

我最终在调色板中替换了一些颜色，然后为我的元素分配了特定的 ColorIndex，但是男孩，它并不漂亮。

        javascript - 高效的 Javascript 字符串替换

ID：377961

赞同：37

时间：2008-12-18T14:16:26.963

标签：javascript, string, performance, replace

嘿，我有一个 HTML 块，我将重复使用（在用户访问期间的不同时间，而不是一次）。我认为实现这一点的最佳方法是创建一个 HTML div，将其隐藏，并在需要时获取其 innerHTML 并对几个关键字执行 replace()。作为示例 HTML 块...

```
<div id='sample'>
  <h4>%TITLE%</h4>
  <p>Text text %KEYWORD% text</p>
  <p>%CONTENT%</p>
  <img src="images/%ID%/1.jpg" />
</div> 
```

用动态数据替换这些关键字的最佳方法是去...

```
template = document.getElementById('sample');
template = template.replace(/%TITLE%/, some_var_with_title);
template = template.replace(/%KEYWORD%/, some_var_with_keyword);
template = template.replace(/%CONTENT%/, some_var_with_content);
template = template.replace(/%ID%/, some_var_with_id); 
```

感觉就像我选择了一种愚蠢的方式来做到这一点。有没有人对如何以任何方式更快、更智能或更好地做到这一点有任何建议？此代码将在用户访问期间相当频繁地执行，有时每 3-4 秒执行一次。

提前致谢。

            回答 #1

赞同：90

时间：2008-12-18T14:30:48.273

看起来您想使用模板。

```
//Updated 28 October 2011: Now allows 0, NaN, false, null and undefined in output. 
function template( templateid, data ){
    return document.getElementById( templateid ).innerHTML
      .replace(
        /%(\w*)%/g, // or /{(\w*)}/g for "{this} instead of %this%"
        function( m, key ){
          return data.hasOwnProperty( key ) ? data[ key ] : "";
        }
      );
} 
```

代码说明：

*   期望`templateid`是现有元素的 id。
*   期望`data`是一个带有数据的对象。
*   使用两个参数 replace 进行替换：
*   第一个是搜索所有`%keys%`（或者`{keys}`如果您使用替代版本）的正则表达式。键可以是 AZ、az、0-9 和下划线 _ 的组合。
*   第二个是一个匿名函数，每次匹配都会被调用。
*   匿名函数在数据对象中搜索正则表达式找到的键。如果在数据中找到键，则返回键的值，该值将替换最终输出中的键。如果未找到密钥，则返回一个空字符串。

模板示例：

```
<div id="mytemplate">
  <p>%test%</p>
  <p>%word%</p>
</div> 
```

调用示例：

```
document.getElementById("my").innerHTML=template("mytemplate",{test:"MYTEST",word:"MYWORD"}); 
```

            回答 #2

赞同：30

时间：2008-12-18T14:30:30.007

您可能可以修改此代码以执行您想要的操作：

```
let user = {
    "firstName": "John",
    "login": "john_doe",
    "password": "test",
};

let template = `Hey {firstName},

    You recently requested your password.
    login: {login}
    password: {password}

    If you did not request your password, please disregard this message.
    `;

template = template.replace(/{([^{}]+)}/g, function(keyExpr, key) {
    return user[key] || "";
}); 
```

您可能还想查看[JavaScriptTemplates](http://code.google.com/p/trimpath/wiki/JavaScriptTemplates)

            回答 #3

赞同：21

时间：2018-05-26T18:09:09.290

[模板替换](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)
一个快速简单的解决方案是使用[String.prototype.replace](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)方法。
它需要第二个参数，可以是值或函数：

```
function replaceMe(template, data) {
  const pattern = /{\s*(\w+?)\s*}/g; // {property}
  return template.replace(pattern, (_, token) => data[token] || '');
} 
```

###*示例*：

```
const html = `
  <div>
    <h4>{title}</h4>
    <p>My name is {name}</p>
    <img src="{url}" />
  </div>
`;

const data = {
  title: 'My Profile',
  name: 'John Smith',
  url: 'http://images/john.jpeg'
}; 
```

并这样称呼它：

```
replaceMe(html, data); 
```

            回答 #4

赞同：14

时间：2008-12-18T14:21:24.457

我怀疑会有什么更有效的。另一种方法是将它分成几部分然后连接，但我认为这不会有多大效率。考虑到每个连接都会产生一个与其操作数大小相同的新字符串，甚至可能更少。

**补充：**这可能是写这个的最优雅的方式。此外——你在担心什么？内存使用情况？它很丰富，而且 Javascript 有一个不错的内存管理器。执行速度？那么你必须有一些巨大的字符串。恕我直言，这很好。

            回答 #5

赞同：2

时间：2008-12-18T19:39:00.260

您的方法是实现穷人模板系统的标准方法，所以很好。

看看一些 JavaScript 模板库，比如[JST](http://code.google.com/p/trimpath/wiki/JavaScriptTemplates)可能是值得的。

            回答 #6

赞同：1

时间：2008-12-18T14:22:25.360

您可以通过链接替换而不是进行所有这些临时分配来提高效率。

IE

```
with(document.getElementById('sample'))
{
  innerHTML = innerHTML.replace(a, A).replace(b, B).replace(c, C); //etc
} 
```

            回答 #7

赞同：1

时间：2008-12-18T18:38:52.657

如果您愿意使用[Prototype 库](http://www.prototypejs.org/api/template)，它们有很好的内置模板功能。

那看起来像：

```
element.innerHTML = (new Template(element.innerHTML)).evaluate({
    title: 'a title',
    keyword: 'some keyword',
    content: 'A bunch of content',
    id: 'id here'
}) 
```

如果您在循环中运行代码，这将特别好，因为创建 JSON 对象/Javascript 对象文字很容易。  

不过，我不希望任何速度增加。

此外，您需要将分隔符样式更改为，`#{keyword}`而不是`%keyword%`

            回答 #8

赞同：1

时间：2017-01-20T00:08:06.417

这种方法生成可以缓存的函数模板：

```
function compileMessage (message) {

  return new Function('obj', 'with(obj){ return \'' +
    message.replace(/\n/g, '\\n').split(/{{([^{}]+)}}/g).map(function (expression, i) {
      return i%2 ? ( '\'+(' + expression.trim() + ')+\'' ) : expression;
    }).join('') + 
  '\'; }');

}

var renderMessage = compileMessage('Hi {{ recipient.first_name }},\n\n' +

'Lorem ipsum dolor sit amet...\n\n' +

'Best Regarts,\n\n' +

'{{ sender.first_name }}');

renderMessage({
  recipient: {
    first_name: 'John'
  },
  sender: {
    first_name: 'William'
  }
}); 
```

返回：

```
"Hi John,

Lorem ipsum dolor sit amet...

Best Regarts,

William" 
```

            回答 #9

赞同：0

时间：2014-02-13T08:54:01.977

Mustachejs 非常适合真正优雅的模板：

```
<div id='sample'>
  <h4>{{TITLE}}</h4>
  <p>Text text {{KEYWORD}} text</p>
  <p>{{CONTENT}}</p>
  <img src="images/{{ID}}/1.jpg" />
</div> 
```

然后，您可以像这样使用模板：

```
var template = document.getElementById(templateid).innerHTML;
var newHtml = Mustache.render(template, {
    TITLE: some_var_with_title,
    KEYWORD: some_var_with_keyword,
    CONTENT: some_var_with_content,
    ID: some_var_with_id
});
document.getElementById('sample').innerHTML = newHtml; 
```

如果您从 Ajax 调用中返回 JSON，这尤其适用 - 您可以直接将其传递给`Mustache.render()`调用。

细微的变化允许在每个浏览器或服务器上运行相同的模板。有关更多详细信息，请参阅[https://github.com/janl/mustache.js](https://github.com/janl/mustache.js)。

            回答 #10

赞同：0

时间：2016-08-04T11:19:49.410

试试这个：http: [//json2html.com/](http://json2html.com/)

它也支持复杂的 JSON 对象。

            回答 #11

赞同：-2

时间：2015-10-15T03:14:15.950

```
var template = "<div id='sample'><h4>%VAR%</h4><p>Text text %VAR% text</p><p>%VAR%</p><img src="images/%VAR%/1.jpg" /></div>";

var replace = function(temp,replace){
temp = temp.split('%VAR%');
for(var i in replace){
          if(typeof temp[i] != 'undefined'){
            temp[i] = temp[i] + replace[i];
          }
        }
   return temp.join('');
}

replace(template,['title','keyword','content','id']) 
```

        .net - 在 Web 应用程序中使用并行扩展

ID：377963

赞同：5

时间：2008-12-18T14:16:31.113

标签：.net, parallel-processing

我想听听一些关于并行计算方法（包括并行扩展（[例如 June CTP](http://www.microsoft.com/downloads/details.aspx?FamilyId=348F73FD-593D-4B3C-B055-694C50D2B0F3&displaylang=en#filelist)）的潜在用途）在 Web 应用程序中的作用（如果有的话）的意见。这种方法适合和/或不适合什么场景？  

我对 IIS 和 Web 浏览器线程任务的确切理解是相当有限的。如果有人对此有很好的理解，我将不胜感激。我更想知道 IIS 和 Web 浏览器的工作方式是否限制了在 Web 应用程序中创建线程和/或异步任务的投资回报率。

提前致谢。

            回答 #1

赞同：3

时间：2008-12-18T14:40:43.823

好吧，Web 服务器提出了一个有趣的挑战，因为它们已经是高度线程化的，为并行请求提供服务。因此，在繁忙的站点上，您不能依靠窃取大量内核来达到目的。当然，如果您只期望流量较少，并且您的网站需要大量处理（数据处理等），那么您可能会节省一些费用。

我希望 Parallel Extensions 在客户端或专用服务应用程序中工作得更好，您可以合理地期望内核可供您 [ab] 使用。

            回答 #2

赞同：0

时间：2009-01-06T22:39:07.483

在显示逻辑的情况下，使用 PE 可能不会有很多好处，因为这些功能对于应用程序来说通常是快速而直接的处理。留给微软在 IIS 中开发并行架构。

但是，如果您可能有长时间运行的报告或业务逻辑需要花费大量时间来执行，那么您会注意到好处。在这些情况下，使用 PE 可以显着加快应用程序的速度，并结合缓存为最终用户提供更强大的用户体验。

一个例子是我们运行复杂的报告，这些报告会遍历大量数据并需要对其进行解析或对其执行某种功能。使用 PE 可能需要 20 分钟，而在 Web 应用程序中运行业务逻辑则需要几分钟。（忽略数据库，因为数据库可能已经线程化）。我们有一个预订功能，告诉我们从供应商那里购买什么，并且在穿线后从 5 小时到 30 分钟，因此穿线/PE 有实实在在的好处。

第二种情况是您可能需要为每个客户解析复杂的数据。虽然应用程序请求可能在不同的线程上执行，但可能还有其他空闲线程可以利用并利用它们的功能。为此目的使用 PE 是有意义的。

            回答 #3

赞同：0

时间：2010-05-07T15:36:07.267

您可以使用 TPL 通过迁移到异步模型来改进 I/O 绑定操作。您还可以通过在低负载情况下更多地利用 Web 服务器上可用的未使用处理器容量来改善请求延迟。您需要仔细考虑这一点，因为在处理器已经 100% 使用的高负载下，增加更多并行性会降低服务器的吞吐量。

这在 Parallel Extensions 团队博客上进行了讨论：

[在 ASP.NET 应用程序中使用 .NET 4 的并行扩展](http://blogs.msdn.com/pfxteam/archive/2010/02/08/9960003.aspx) 

            回答 #4

赞同：0

时间：2008-12-19T06:24:02.283

我不会过多关注基于 Web 的应用程序中的并行扩展。如果您在一个页面中确实有多个远程请求（数据库调用或远程 Web 服务），则可能值得研究。

基于 Web 的应用程序已经是高度并行的。而且您不会从服务器端方法中的并行执行中获得太多收益。一个例外是关于服务器端代码中的多个远程请求（dbms 或 web 服务），您的大部分时间都花在等待远程资源上，也可能让您在多个请求上的等待时间并行运行而不是序列化请求。

例如，我有一个门户页面，我计划在单独的线程中进行所有数据库调用和 web 服务调用，并将结果推送到 httpcontext 的项目集合中，以便在页面生命周期的后期在用户控件中使用。不过，在这里也可以选择使用 ajax 技术。

            回答 #5

赞同：-3

时间：2008-12-18T14:45:00.227

您简陋的 Web 服务器通常最适合提供可以缓存的静态内容。我真的怀疑它是否适合并行处理（除了出于兴趣的纯实验）。

评论后有些清晰：我的原意不是 IIS 不并行处理。我的观点是，“并行处理”实际上不仅仅是为 Web 应用程序提供服务。我对并行处理问题的理解是一个大的计算问题，它被分解成更小的部分，然后在多个处理器上并行执行。

对于此类问题，在同一处理器上执行多个线程实际上比运行单线程效率低。IIS 可以混入并行处理吗？你打赌。它是理想的平台吗？不。

        asp.net - 你如何将http请求转发到https url

ID：377968

赞同：3

时间：2008-12-18T14:20:35.283

标签：asp.net, http, ssl, https

就像问题说的那样，如果我在我的网站上请求这样的页面

[http://somename.something.here/Dada.aspx](http://somename.something.here/Dada.aspx)

像这样

[https://somename.something.here/Dada.aspx](https://somename.something.here/Dada.aspx)

            回答 #1

赞同：11

时间：2008-12-18T14:41:35.383

我更喜欢 (a) 不重定向本地连接（以简化 VS 下的开发），并且 (b) 使用 UriBuilder 而不是 string.Replace，因为它更准确一些。

```
if (!Request.IsLocal && !Request.IsSecureConnection) {
    var ub = new UriBuilder(Request.Url);
    ub.Scheme = Uri.UriSchemeHttps;
    ub.Port = -1; // use default port for scheme
    Response.Redirect(ub.Uri.AbsoluteUri, true);
    return;
} 
```

            回答 #2

赞同：1

时间：2008-12-18T14:27:36.860

您标记了 ASP.NET，所以我假设您使用 IIS。在您网站的 Web Root 中创建一个文件，将其命名为 SSL_Redirect.htm 或类似名称。把这个Javascript放在那里：

```
<Script language="JavaScript"> 
<!-- begin hide 

function goElseWhere() 
{ 

var oldURL = window.location.hostname + window.location.pathname; 

var newURL = "https://" + oldURL; 

query = '' + window.location; 
position = query.indexOf('?'); 
if (position > -1) 
{ 
query = query.substring(position + 1); 
newURL = newURL + "?" + query; 
} 

window.location = newURL; 

} 
goElseWhere(); 

// end hide --> 
</script> 
```

现在，转到您网站的属性。转到客户错误选项卡，查找 403.4 错误并进行编辑。将其更改为使用 /SSL_Redirect.htm 的 URL（或您命名的任何名称）。现在，在 IIS Admin 中，找到该文件 SSL_Redirect.htm，右键单击，转到属性。转到文件安全并取消选中该特定文件的需要 SSL。

你完成了。

            回答 #3

赞同：1

时间：2008-12-18T14:32:50.843

我认为这很简单

```
Response.Redirect("https://somename.something.here/Dada.aspx"); 
```

            回答 #4

赞同：0

时间：2009-02-07T00:11:30.647

我记得不久前处理过同样的问题。我想确保某些页面通过 https，而其余页面则使用 http。我还想确保一旦访问者离开安全页面，访问不需要安全的页面，他们就会返回 http。为此，我探索了两种选择：

第一个选项是我可以使用免费的[.NET URLRewriter](http://www.codeplex.com/urlrewriter)项目来重写配置文件中列出的特定页面：

```
# HTTP REQUIRED PAGES
RewriteCond %{HTTPS} =on
RewriteCond %{REQUEST_URI} !(/login\.aspx|/securepage\.aspx).*$ [NC]
RewriteCond %{HTTP_HOST} (.+)
RewriteRule ^(.*)$ http://%3$1 [R=301,L]

# HTTPS REQUIRED PAGES
RewriteCond %{HTTPS} =off
RewriteCond %{REQUEST_URI} (/login\.aspx|/securepage\.aspx).*$ [NC]
RewriteCond %{HTTP_HOST} (.+)
RewriteRule ^(.*)$ https://%3$1 [R=301,L] 
```

使用此配置，我可以确保只有两个页面是安全的，而其余页面将是不安全的。我用这个选项得到了很好的结果。

第二个选项是在我找到一个专门用于处理这个问题的完整解决方案之后出现的。这家公司是 SanibelLogic，他们有一个名为[SSLRedirect](http://www.sanibellogic.com/SL/Common/Products.aspx?Cat=ASP.NET&PLong=00401)的产品。这个基于 HTTPModule 的解决方案正是我所需要的。它确实要花一点钱，但如果你想要一些简单的实现和管理，这可能符合要求。如果您想编辑有关它的任何内容，他们甚至会提供源代码...

我使用了这两个选项好几个月，但最终还是使用了 SSLRedirect 产品，因为它很简单。  

我希望这有帮助...

            回答 #5

赞同：0

时间：2010-02-12T14:19:20.540

我只是遇到了同样的问题，但我发现使用纯 IIS 配置的不同解决方案。

有两种方法：

(1) 简单的方法是将您的**MyWebApp**重命名为**MyWebAppSSL**例如。为后者启用**SSL 。**然后在您的 IIS 中创建一个新的空文件夹，类似于旧的**MyWebApp**。单击 MyWebApp 的属性，然后在“*目录*”下选择“*重定向到 URL* ”并放在`http://MyServer/MyWebAppSSL`那里。建议为它启用“*永久重定向*”。顺便说一下，您不需要单击**MyWebApp的“***创建 Web 应用程序*”按钮，因为它不是 Web 应用程序，而只是重定向。 (2) 简单的方法当然有缺点，从现在开始，您的应用程序将以新名称运行（本例中以**-SSL**结尾）。如果我们需要保持它以相同的旧名称运行，也可以通过仅配置 IIS 来实现，但我们必须采取一些不同的方式。我们将不得不在运行在不同端口上的 IIS 上设置一个新的 Web 空间。我发现了这个很好的描述：[How to Auto-Redirect to a SSL-secured Site in IIS](http://www.jameskovacs.com/blog/HowToAutoRedirectToASSLsecuredSiteInIIS.aspx "如何在 IIS 中自动重定向到受 SSL 保护的站点")。

* * *

## 回答 #6

> 赞同：-1
> 
>             
> 
> 时间：2008-12-18T14:24:11.907

将重定向标头 (302) 发送到浏览器。

例子：

```
Response.Redirect("WebForm2.aspx") 
```

[关于Server.Transfer 和 Response.Redirect 区别](http://www.developer.com/net/asp/article.php/3299641)的文章

# c++ - 有人对 SSEPlus 有任何经验吗？

> ID：377973
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2008-12-18T14:21:36.733
> 
>         
> 
> 标签：c++, c, performance, optimization, assembly

[SSEPlus](http://sseplus.sourceforge.net)是 AMD 的一个开源库，用于统一处理[SSE](http://en.wikipedia.org/wiki/Streaming_SIMD_Extensions)处理器扩展。

我正在考虑将这个库用于我的下一个小项目，并且想知道是否有人有这方面的经验？我可以在英特尔机器上使用它吗？与直接 SSE 调用相比有任何性能问题吗？64位机器有问题吗？[除了Framewave](http://framewave.sourceforge.net)之外，还有哪些项目使用它？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-12-18T14:26:41.683

是的，您也可以在英特尔机器上使用它。

性能应该没有什么不同，只是它增加了对支持的处理器功能的检查，这可能会花费一点。

# sql - 加入链接服务器还是加入主机服务器？

> ID：377974
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-12-18T14:21:58.403
> 
>         
> 
> 标签：sql, sql-server-2005, oracle, join, linked-server

情况如下：我们需要连接一个 Oracle 数据库以提取一些数据。由于访问上述 Oracle 数据库是一件非常痛苦的事情（主要是官僚障碍，而不是其他任何事情），我们只是计划将其链接到我们的 SQL Server 并使用该链接在需要时访问数据。

对于我们的一个应用程序，我们计划制作一个视图以获取我们需要的数据。现在我们需要的数据来自两个表。如果我们这样做，哪个更可取？

这（如果存在这样的事情，在伪 SQL 中）：

```
 OPENQUERY(Oracle, "SELECT [cols] FROM table1 INNER JOIN table2") 
```

或这个：

```
 SELECT [cols] FROM OPENQUERY(Oracle, "SELECT [cols1] FROM table1")
 INNER JOIN OPENQUERY(Oracle, "SELECT [cols2] from table2") 
```

有什么理由更喜欢其中一个吗？需要记住的一件事：我们限制了查询可以运行多长时间来访问 Oracle 服务器。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-12-18T14:34:55.833

我会选择你的第一个选项，特别是如果你的查询包含一个 where 子句来选择表中的数据子集。

假设 Oracle 服务器中的表上有支持连接操作的索引，那么这两个服务器上的工作量就会减少。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-12-18T14:30:08.213

如果内部连接显着减少了总行数，那么选项 1 将导致更少的网络流量（因为您不会让 table1 中的所有行都必须通过 db 链接

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-12-18T14:44:52.927

hamishmcn 所说的适用。

*此外*，SQL Server 并不真正了解 oracle 服务器保存的索引或统计信息或缓存。因此，oracle 服务器在连接方面可能比 sql 服务器更有效。

# c# - 优雅地确定多个布尔值是否为“真”

> ID：377990
> 
>         
> 
> 赞同：83
> 
>         
> 
> 时间：2008-12-18T14:27:48.390
> 
>         
> 
> 标签：c#, hammingweight

我有一组五个布尔值。如果其中一个以上是真的，我想执行一个特定的功能。你能想到的最优雅的方式是什么，它可以让我在一个 if() 语句中检查这个条件？目标语言是 C#，但我也对其他语言的解决方案感兴趣（只要我们不讨论特定的内置函数）。

一个有趣的选择是将布尔值存储在一个字节中，进行右移并与原始字节进行比较。但是这需要将单独的布尔值转换为字节（通过bitArray `if(myByte && (myByte >> 1))`？），这似乎有点（双关语）笨拙...... *[编辑]对不起，应该是* `if(myByte & (myByte - 1))` *[/编辑]*

注意：这当然非常接近经典的“人口计数”、“横向加法”或“汉明权重”编程问题——但并不完全相同。我不需要知道设置了多少位，只要它不止一个。我希望有一种更简单的方法来实现这一点。

* * *

## 回答 #1

> 赞同：122
> 
>             
> 
> 时间：2008-12-18T15:53:56.407

我本来打算写 Linq 版本的，但有五个左右的人抢了我。但我真的很喜欢 params 方法，以避免手动新建一个数组。所以我认为最好的混合是，基于 rp 的回答，用明显的 Linqness 替换 body：

```
public static int Truth(params bool[] booleans)
{
    return booleans.Count(b => b);
} 
```

阅读和使用都非常清晰：

```
if (Truth(m, n, o, p, q) > 2) 
```

* * *

## 回答 #2

> 赞同：95
> 
>             
> 
> 时间：2008-12-18T14:37:00.743

怎么样

```
 if ((bool1? 1:0) + (bool2? 1:0) + (bool3? 1:0) + 
      (bool4? 1:0) + (bool5? 1:0) > 1)
      // do something 
```

或者一个通用的方法是......

```
 public bool ExceedsThreshold(int threshold, IEnumerable<bool> bools)
    {
       int trueCnt = 0;
       foreach(bool b in bools)
          if (b && (++trueCnt > threshold)) 
              return true;
       return false;          
    } 
```

或按照其他答案的建议使用 LINQ：

```
 public bool ExceedsThreshold(int threshold, IEnumerable<bool> bools)
    { return bools.Count(b => b) > threshold; } 
```

编辑（添加 Joel Coehoorn 建议：（在 .Net 2.x 及更高版本中）

```
 public void ExceedsThreshold<T>(int threshold, 
                      Action<T> action, T parameter, 
                      IEnumerable<bool> bools)
    { if (ExceedsThreshold(threshold, bools)) action(parameter); } 
```

或在 .Net 3.5 及更高版本中：

```
 public void ExceedsThreshold(int threshold, 
            Action action, IEnumerable<bool> bools)
    { if (ExceedsThreshold(threshold, bools)) action(); } 
```

或作为扩展`IEnumerable<bool>`

```
 public static class IEnumerableExtensions
  {
      public static bool ExceedsThreshold<T> 
         (this IEnumerable<bool> bools, int threshold)
      { return bools.Count(b => b) > threshold; }
  } 
```

用法将是：

```
 var bools = new [] {true, true, false, false, false, false, true};
  if (bools.ExceedsThreshold(3))
      // code to execute  ... 
```

* * *

## 回答 #3

> 赞同：22
> 
>             
> 
> 时间：2008-12-18T15:22:19.870

现在是强制性 LINQ 答案的时候了，在这种情况下，它实际上非常简洁。

```
var bools = new[] { true, true, false, false, false };

return bools.Count(b => b == true) > 1; 
```

* * *

## 回答 #4

> 赞同：16
> 
>             
> 
> 时间：2008-12-18T14:34:27.567

我只是将它们转换为整数和总和。

除非您处于超级紧密的内部循环中，否则这样做的好处是易于理解。

* * *

## 回答 #5

> 赞同：7
> 
>             
> 
> 时间：2008-12-18T14:35:39.730

如果你的意思是大于或等于一个布尔等于真，你可以这样做

```
if (bool1 || bool2 || bool3 || bool4 || bool5) 
```

如果您需要多个（2 及以上）布尔值等于 true，您可以尝试

```
int counter = 0;
if (bool1) counter++;
if (bool2) counter++;
if (bool3) counter++;
if (bool4) counter++;
if (bool5) counter++;
if (counter >= 2) //More than 1 boolean is true 
```

* * *

## 回答 #6

> 赞同：6
> 
>             
> 
> 时间：2008-12-18T15:01:28.743

我会编写一个函数来接收任意数量的布尔值。它将返回那些为真的值的数量。检查结果，了解您需要积极做某事的值的数量。

努力说清楚，不聪明！

```
private int CountTrues( params bool[] booleans )
{
    int result = 0;
    foreach ( bool b in booleans )
    {
        if ( b ) result++;
    }

    return result;
} 
```

* * *

## 回答 #7

> 赞同：6
> 
>             
> 
> 时间：2011-05-10T15:45:27.320

如果您的标志被打包成一个单词，那么[Michael Burr 的解决方案](https://stackoverflow.com/questions/377990/elegantly-determine-if-more-than-one-boolean-is-true/379947#379947)将起作用。但是，循环不是必需的：

```
int moreThanOneBitSet( unsigned int v)
{
    return (v & (v - 1)) != 0;
} 
```

例子

```
 v (binary) | v - 1 | v&(v-1) | result
------------+-------+---------+--------
       0000 |  1111 |    0000 |  false
       0001 |  0000 |    0000 |  false
       0010 |  0001 |    0000 |  false
       0011 |  0010 |    0010 |   true
       .... |  .... |    .... |   ....
       1000 |  0111 |    0000 |  false
       1001 |  1000 |    1000 |   true
       1010 |  1001 |    1000 |   true
       1011 |  1010 |    1010 |   true
       1100 |  1011 |    1000 |   true
       1101 |  1100 |    1100 |   true
       1110 |  1101 |    1100 |   true
       1111 |  1110 |    1110 |   true 
```

* * *

## 回答 #8

> 赞同：5
> 
>             
> 
> 时间：2010-06-06T03:21:55.987

如果有数百万而不是只有 5 个，您可以避免 Count() 而是这样做......

```
public static bool MoreThanOne (IEnumerable<bool> booleans)
{
    return booleans.SkipWhile(b => !b).Skip(1).Any(b => b);
} 
```

* * *

## 回答 #9

> 赞同：4
> 
>             
> 
> 时间：2008-12-18T17:43:19.930

比 Vilx-s 版本更短更丑：

```
if (((a||b||c)&&(d||e))||((a||d)&&(b||c||e))||(b&&c)) {} 
```

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2008-12-18T14:36:04.643

从我的脑海中，这个特定示例的快速方法；您可以将 bool 转换为 int（0 或 1）。然后循环遍历它们并将它们相加。如果结果 >= 2 那么你可以执行你的函数。

* * *

## 回答 #11

> 赞同：2
> 
>             
> 
> 时间：2008-12-19T15:08:42.797

虽然我喜欢 LINQ，但其中有一些漏洞，比如这个问题。

进行计数通常很好，但是当您计数的项目需要一段时间来计算/检索时可能会成为一个问题。

如果您只想检查任何内容，则 Any() 扩展方法很好，但如果您想检查至少没有内置函数可以做到这一点并且是懒惰的。

最后，我编写了一个函数，如果列表中至少有一定数量的项目，则返回 true。

```
public static bool AtLeast<T>(this IEnumerable<T> source, int number)
{
    if (source == null)
        throw new ArgumentNullException("source");

    int count = 0;
    using (IEnumerator<T> data = source.GetEnumerator())
        while (count < number && data.MoveNext())
        {
            count++;
        }
    return count == number;
} 
```

要使用：

```
var query = bools.Where(b => b).AtLeast(2); 
```

这样做的好处是不需要在返回结果之前评估所有项目。

[Plug] 我的项目[NExtension](http://www.codeplex.com/nextension)包含 AtLeast、AtMost 和覆盖，允许您将谓词与 AtLeast/Most 检查混合。[/插头]

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2008-12-18T14:43:43.473

转换为整数和求和应该可以，但它有点难看，在某些语言中可能是不可能的。

像这样的东西怎么样

```
int count = (bool1? 1:0) + (bool2? 1:0) + (bool3? 1:0) + (bool4? 1:0) + (bool5? 1:0); 
```

或者，如果您不关心空间，您可以预先计算真值表并将布尔值用作索引：

```
if (morethanone[bool1][bool2][bool3][bool4][bool5]) {
 ... do something ...
} 
```

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2008-12-18T14:48:31.610

我会做这样的事情，使用 params 参数。

```
 public void YourFunction()
        {
            if(AtLeast2AreTrue(b1, b2, b3, b4, b5))
            {
                // do stuff
            }
        }

        private bool AtLeast2AreTrue(params bool[] values)
        {
            int trueCount = 0;
            for(int index = 0; index < values.Length || trueCount >= 2; index++)
            {
                if(values[index])
                    trueCount++;
            }

            return trueCount > 2;

        } 
```

* * *

## 回答 #14

> 赞同：1
> 
>             
> 
> 时间：2008-12-18T14:48:33.777

不完全漂亮......但这是另一种方法：

```
if (
    (a && (b || c || d || e)) ||
    (b && (c || d || e)) ||
    (c && (d || e)) ||
    (d && e)
) 
```

* * *

## 回答 #15

> 赞同：1
> 
>             
> 
> 时间：2008-12-18T15:04:41.000

```
if (NumberOfTrue(new List<bool> { bool1, bool2, bool3, bool4 }) >= 2)
{
    // do stuff
}

int NumberOfTrue(IEnumerable<bool> bools)
{
    return bools.Count(b => b);
} 
```

* * *

## 回答 #16

> 赞同：1
> 
>             
> 
> 时间：2008-12-18T15:34:46.273

我现在有一个好多了，而且很短！

```
bool[] bools = { b1, b2, b3, b4, b5 };
if (bools.Where(x => x).Count() > 1)
{
   //do stuff
} 
```

* * *

## 回答 #17

> 赞同：1
> 
>             
> 
> 时间：2017-06-10T20:30:55.600

我想给出一个 C++11 可变参数模板的答案。

```
template< typename T>
T countBool(T v)
{
    return v;
}

template< typename T, typename... Args>
int countBool(T first, Args... args)
{
    int boolCount = 0;
    if ( first )
        boolCount++;
    boolCount += countBool( args... );
    return boolCount;
} 
```

简单地如下调用它会创建一个相当优雅的计算布尔数的方法。

```
if ( countBool( bool1, bool2, bool3 ) > 1 )
{
  ....
} 
```

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2008-12-18T14:36:09.247

在大多数语言中，true 等价于非零值，而 false 为零。我没有给你确切的语法，但是在伪代码中，怎么样：

```
if ((bool1 * 1) + (bool2 * 1) + (bool3 * 1) > 2)
{
    //statements here
} 
```

* * *

## 回答 #19

> 赞同：0
> 
>             
> 
> 时间：2008-12-18T18:19:36.457

如果（（b1.CompareTo（假）+ b2.CompareTo（假）+ b3.CompareTo（假）+ ...）> 1）

// 多于一个是真的

...

别的

...

* * *

## 回答 #20

> 赞同：0
> 
>             
> 
> 时间：2008-12-18T18:59:56.047

如果您只有五个不同的值，您可以通过将这些位打包成一个短整数或整数并检查它是否是零位或一位答案来轻松进行测试。你能得到的唯一无效数字是..

```
0x 0000 0000
0x 0000 0001
0x 0000 0010
0x 0000 0100
0x 0000 1000
0x 0001 0000

```

这为您提供了六个要搜索的值，将它们放入查找表中，如果它不在那里，您就有了答案。

这给了你一个简单的答案。

```
   公共静态布尔 moreThan1BitSet(int b)
   {
      最终的短 multiBitLookup[] = {
            1, 1, 1, 0, 1, 0, 0, 0,
            1, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0,
            1, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0
      };
      如果（多位查找 [b] == 1）
         返回假；
      返回真；
   }

```

这不能很好地扩展到 8 位，但你只有 5 位。

* * *

## 回答 #21

> 赞同：0
> 
>             
> 
> 时间：2008-12-19T02:20:48.013

你提到

> 一个有趣的选择是将布尔值存储在一个字节中，进行右移并与原始字节进行比较。就像是`if (myByte && (myByte >> 1))`

我认为该表达式不会给您想要的结果（至少使用 C 语义，因为该表达式不是有效的 C#）：

如果`(myByte == 0x08)`，那么即使只设置了一位，表达式也会返回 true。

如果您的意思是“ `if (myByte & (myByte >> 1))`”，那么`(myByte == 0x0a)`即使设置了 2 位，表达式也会返回 false。

但这里有一些计算字中位数的技术：

[Bit Twiddling Hacks - 数位](http://www-graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive)

您可能考虑的一种变体是使用 Kernighan 的计数方法，但请尽早退出，因为您只需要知道是否设置了多个位：

```
int moreThanOneBitSet( unsigned int v)
{
    unsigned int c; // c accumulates the total bits set in v

    for (c = 0; v && (c <= 1); c++)
    {
      v &= v - 1; // clear the least significant bit set
    }

    return (c > 1);
} 
```

当然，使用查找表也不是一个坏选择。

* * *

## 回答 #22

> 赞同：0
> 
>             
> 
> 时间：2022-01-13T14:08:24.993

## 以性能为导向的解决方案

因为以下陈述在 .NET 中是正确的

*   `sizeof(bool) == 1`

*   `*(byte*)&someBool == 1`someBool 在哪里`true`

*   `*(byte*)&someBool == 0`someBool 在哪里`false`

您可以回退到`unsafe`代码和指针转换（因为 C# 不允许简单地转换`bool`为`byte`or `int`）。

您的代码将看起来像这样

```
if (*(byte*)&bool1 + *(byte*)&bool2 + *(byte*)&bool3 > 1)
{
    // do stuff
} 
```

这里的好处是你没有任何额外的分支，这使得这个分支比明显的`myBool ? 1 : 0`. 这里的缺点是使用`unsafe`和指针，这在托管的 .NET 世界中通常不是一个受欢迎的解决方案。此外，可能会受到质疑的假设`sizeof(bool) == 1`并不适用于所有语言，但至少在 C# .NET 中它是正确的。

如果指针的东西对你来说太烦人了，你总是可以将它隐藏在扩展方法中：

```
using System.Runtime.CompilerServices;

// ...

[MethodImpl(MethodImplOptions.AggressiveInlining)]
public static unsafe int ToInt(this bool b) => *(byte*)&b; 
```

然后您的代码将变成更具可读性

```
if (bool1.ToInt() + bool2.ToInt() + bool3.ToInt() > 1)
{
    // do stuff
} 
```

显然，您可以随时将其与 LINQ 结合使用

```
if (myBools.Sum(b => b.ToInt()) > 1)
{
    // do stuff
} 
```

或者如果您重视性能而不是其他任何东西，这可能会更快

```
bool[] myBools = ...

fixed (bool* boolPtr = myBools)
{
    byte* bytePtr = (byte*)boolPtr;
    int numberOfTrueBools = 0;

    // count all true booleans in the array
    for (int i = 0; i < myBools.Length; numberOfTrueBools += bytePtr[i], i++);

    // do something with your numberOfTrueBools ...
} 
```

或者，如果您有一个*巨大*的输入数组，您甚至可以选择硬件加速 SIMD 解决方案......

```
using System.Runtime.CompilerServices;
using System.Runtime.Intrinsics;
using System.Runtime.Intrinsics.X86;

// ...

[MethodImpl(MethodImplOptions.AggressiveOptimization)]
public static unsafe int CountTrueBytesSIMD(this bool[] myBools)
{
    // we need to get a pointer to the bool array to do our magic
    fixed (bool* ptr = myBools)
    {
        // reinterpret all booleans as bytes
        byte* bytePtr = (byte*)ptr;

        // calculate the number of 32 bit integers that would fit into the array
        int dwordLength = myBools.Length >> 2;

        // for SIMD, allocate a result vector
        Vector128<int> result = Vector128<int>.Zero;

        // loop variable
        int i = 0;

        // it could be that SSSE3 isn't supported...
        if (Ssse3.IsSupported)
        {
            // remember: we're assuming little endian!
            // we need this mask to convert the byte vectors to valid int vectors
            Vector128<int> cleanupMask = Vector128.Create(0x000000FF);

            // iterate over the array processing 16 bytes at once
            // TODO: you could even go to 32 byte chunks if AVX-2 is supported...
            for (; i < dwordLength - Vector128<int>.Count; i += Vector128<int>.Count)
            {
                // load 16 bools / bytes from memory
                Vector128<byte> v = Sse2.LoadVector128((byte*)((int*)bytePtr + i));

                // now count the number of "true" bytes in every 32 bit integers
                // 1\. shift
                Vector128<int> v0 = v.As<byte, int>();
                Vector128<int> v1 = Sse2.ShiftRightLogical128BitLane(v, 1).As<byte, int>();
                Vector128<int> v2 = Sse2.ShiftRightLogical128BitLane(v, 2).As<byte, int>();
                Vector128<int> v3 = Sse2.ShiftRightLogical128BitLane(v, 3).As<byte, int>();

                // 2\. cleanup invalid bytes
                v0 = Sse2.And(v0, cleanupMask);
                v1 = Sse2.And(v1, cleanupMask);
                v2 = Sse2.And(v2, cleanupMask);
                v3 = Sse2.And(v3, cleanupMask);

                // 3\. add them together. We now have a vector of ints holding the number
                // of "true" booleans / 0x01 bytes in their 32 bit memory region
                Vector128<int> roundResult = Sse2.Add(Sse2.Add(Sse2.Add(v0, v1), v2), v3);

                // 4 now add everything to the result
                result = Sse2.Add(result, roundResult);
            }

            // reduce the result vector to a scalar by horizontally adding log_2(n) times
            // where n is the number of words in out vector
            result = Ssse3.HorizontalAdd(result, result);
            result = Ssse3.HorizontalAdd(result, result);
        }
        int totalNumberOfTrueBools = result.ToScalar();

        // now add all remaining booleans together 
        // (if the input array wasn't a multiple of 16 bytes or SSSE3 wasn't supported)
        i <<= 2;
        for (; i < myBools.Length; totalNumberOfTrueBools += bytePtr[i], i++);
        return totalNumberOfTrueBools;
    }
} 
```

* * *

## 回答 #23

> 赞同：-1
> 
>             
> 
> 时间：2013-12-24T19:26:15.520

我最近遇到了同样的问题，我有三个布尔值，我需要检查一次只有其中一个是真的。为此，我使用了 xor 运算符，如下所示：

```
bool a = true;
bool b = true;
bool c = false;

if (a || b || c)
{
    if (a ^ b ^ c){
        //Throw Error
    }
} 
```

此代码将引发错误，因为 a 和 b 都为真。

供参考： http: [//www.dotnetperls.com/xor](http://www.dotnetperls.com/xor) 

我刚刚在 C# 中找到了 xor 运算符，如果有人知道这种策略的任何坑，请告诉我。

# xcode - 从命令行构建 Qt Xcode 项目

> ID：377992
> 
>         
> 
> 赞同：44
> 
>         
> 
> 时间：2008-12-18T14:28:07.687
> 
>         
> 
> 标签：xcode, macos, qt, makefile

我已经玩 Qt 几个小时了。我发现 qmake 在 Mac OS X 上生成 Xcode 项目文件，而不是好的 ol' makefile。我不想每次构建“Hello, world”时都启动 Xcode。

我如何让 qmake 生成常规的 makefile，或者，如果这是在 Mac 上无法完成的事情，我如何`.xcodeproj`从命令行编译文件？

我试过了`xcodebuild -project myProject -alltargets`。我得到很多输出，然后是`Abort trap`.

* * *

## 回答 #1

> 赞同：60
> 
>             
> 
> 时间：2008-12-18T15:05:55.787

```
$ man xcodebuild 
```

所以一个典型的命令可能是这样的：

```
$ xcodebuild -project myProject.xcodeproj -alltargets 
```

* * *

## 回答 #2

> 赞同：21
> 
>             
> 
> 时间：2008-12-18T17:43:39.027

Trolltech 为 OS X 提供的开源 Qt 二进制安装程序默认在您运行 qmake 时创建 .xcodeproj 文件。我不使用 XCode 进行编辑，因此打开它来编译项目很痛苦。

要从 Terminal.app 编译您的项目，只需将 QMAKESPEC 的环境变量设置为 macx-g++

如果您只想从终端编译某个项目，请进入该目录并运行

```
qmake -spec macx-g++ 
```

当你运行 qmake 时，这将创建一个 Makefile，你可以通过运行 make 来使用它。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2012-01-17T06:18:50.290

试试下面的方法。它必须工作。

```
xcodebuild -project myProject.xcodeproj -alltargets 
```

我在大部分项目中都使用过这种方法。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-12-18T17:42:29.107

查看回溯的这一部分：

> # 2008-12-18 20:40:52.333 xcodebuild[1070:613] [MT] ASSERTION FAILURE in /SourceCache/DevToolsBase/DevToolsBase-921/pbxcore/FileTypes/PBXCFBundleWrapperFileType.m:174 # 详细信息：路径应该是非空字符串，但它是一个空字符串 # Object: # Method: -subpathForWrapperPart:ofPath:withExtraFileProperties: # Thread: {name = (null), num = 1}

这意味着某些东西，可能是您的配置变量之一，在需要引用文件时是空白的。我想知道的是，如果您的项目中有一个额外的目标不起作用，那么使用 -alltargets 构建是导致您的问题的原因。

我刚才在我的一个项目上测试了没有任何参数的 xcodebuild - 它对我的项目进行了默认构建，没有错误。如果你在没有参数的情况下尝试它会发生什么？

# javascript - JavaScript 存在哪些反模式？

> ID：377999
> 
>         
> 
> 赞同：54
> 
>         
> 
> 时间：2008-12-18T14:30:11.117
> 
>         
> 
> 标签：javascript, anti-patterns

我发现不该做的事情比应该做的事情更难学。

根据我的经验，专家与中级的区别在于能够从各种看似等效的方式中进行选择，以做同样的事情。

那么，当涉及到 JavaScript 时，**哪些事情不应该做，为什么**？

我可以为 Java 找到很多这样的内容，但由于 JavaScript 的典型上下文（在浏览器中）与 Java 非常不同，我很想知道结果如何。

* * *

## 回答 #1

> 赞同：49
> 
>             
> 
> 时间：2008-12-18T14:38:54.420

语：

*   通过在全局上下文中创建大量变量来污染命名空间。

*   以 'foo.onclick = myFunc' 形式绑定事件处理程序（不可扩展，应使用 attachEvent/addEventListener）。

*   在几乎所有非 JSON 上下文中使用 eval

*   几乎每次使用 document.write（使用像 document.createElement 这样的 DOM 方法）

*   针对 Object 对象进行原型设计（BOOM！）

*   一个很小的，但是用'+'做大量的字符串连接（创建一个数组并加入它更有效）

*   参考不存在的`undefined`常数

设计/部署：

*   （通常）不提供 noscript 支持。

*   不将您的代码打包到单个资源中

*   将内联（即正文）脚本放在正文顶部附近（它们会阻止加载）

特定于 Ajax：

*   不向用户指示请求的开始、结束或错误

*   轮询

*   传递和解析 XML 而不是 JSON 或 HTML（在适当的情况下）

其中许多来自 Addy Osmati 的《学习 JavaScript 设计》一书：[https ://www.oreilly.com/library/view/learning-javascript-design/9781449334840/ch06.html](https://www.oreilly.com/library/view/learning-javascript-design/9781449334840/ch06.html)

*编辑：我一直在想更多！*

* * *

## 回答 #2

> 赞同：20
> 
>             
> 
> 时间：2008-12-18T18:54:11.393

除了已经提到的那些...

*   使用`for..in`构造迭代数组

    *（迭代数组方法和索引）*

*   使用类似 Javascript 的内联`<body onload="doThis();">`

    *（不灵活并阻止多个事件侦听器）*

*   使用 'Function()' 构造函数

    *（出于同样的原因`eval()`不好是不好的）*

*   将字符串而不是函数传递给`setTimeout`or `setInterval`

    *（也在`eval()`内部使用）*

*   通过不使用分号来依赖隐式语句

    *（养成的坏习惯，并可能导致意外行为）*

*   使用 /* .. */ 阻止代码行

    *（可能会干扰正则表达式文字，例如`/* /.*/ */`：）*

    <evangelism> 当然，不使用 Prototype ;) </evangelism>

* * *

## 回答 #3

> 赞同：12
> 
>             
> 
> 时间：2008-12-19T12:00:14.330

对我来说最大的问题是不了解 JavaScript 编程语言本身。

*   过度使用对象层次结构并构建非常深的继承链。在 JS 中的大多数情况下，浅层次结构都可以正常工作。

*   不了解基于原型的面向对象，而是构建了大量的脚手架来使 JS 表现得像传统的 OO 语言。

*   当过程/函数式编程可能更加简洁和高效时，不必要地使用 OO 范例。

然后是浏览器运行时的那些：

*   没有使用良好的事件模式，如事件委托或观察者模式（发布/订阅）来优化事件处理。

*   当 DOM 节点可以在内存中并一次性追加时，进行频繁的 DOM 更新（例如循环中的 .appendChild）。（巨大的性能优势）。

*   当可以使用本机方法（getElementById、getElementByTagName 等）时，过度使用库来选择具有复杂选择器的节点。这些天来，这个问题变得越来越小，但值得一提。

*   当您期望第三方脚本与您的脚本在同一页面上时扩展 DOM 对象（您最终会破坏彼此的代码）。

最后是部署问题。

*   不缩小你的文件。

*   Web 服务器配置 - 不压缩文件，不明智地缓存它们。

<plug> 我的博客上有一些[客户端优化技巧](http://piecesofrakesh.blogspot.com/2007/10/client-side-performance-optimization-of.html)，涵盖了我上面提到的一些内容，以及更多内容。</plug>

* * *

## 回答 #4

> 赞同：9
> 
>             
> 
> 时间：2008-12-18T14:50:59.107

*   浏览器检测（而不是测试您要使用的特定方法/字段是否存在）

*   在大多数情况下使用 alert()

另请参阅 Crockford 的[“Javascript: The Good Parts”](http://oreilly.com/catalog/9780596517748/)以了解其他各种要避免的事情。（**编辑：**警告，他的一些建议有点严格，比如使用“===”而不是“==”所以把它们和任何对你有用的盐一起服用）

* * *

## 回答 #5

> 赞同：8
> 
>             
> 
> 时间：2008-12-18T14:37:53.317

有几件事就在我的头上。当我想到更多时，我会编辑这个列表。

*   不要污染全局命名空间。而是在对象中组织事物；

*   不要省略变量的“var”。这会污染全局命名空间，并可能让您在使用其他此类脚本时遇到麻烦。

* * *

## 回答 #6

> 赞同：7
> 
>             
> 
> 时间：2008-12-18T15:09:04.483

任何使用'with'

> > with (document.forms["mainForm"].elements) { 
> > 
> >     input1.value = "junk"; 
> > 
> >     input2.value = "垃圾"; }

* * *

## 回答 #7

> 赞同：5
> 
>             
> 
> 时间：2008-12-18T14:44:27.997

任何参考

```
document.all 
```

在您的代码中，*除非*它在特殊代码中，否则只是为了让 IE 克服 IE 错误。（*咳嗽*文档.getElementById()*咳嗽*）

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2011-03-31T20:51:57.407

## 创建语句时错误地使用大括号定位

由于自动分号插入，您应该始终在语句后放置一个大括号。

例如这个：

```
function()
{
    return
    {
        price: 10
    }
} 
```

与此有很大不同：

```
function(){
    return{
        price: 10
    }
} 
```

因为在第一个例子中，javascript 会为你插入一个分号，实际上给你留下了这个：

```
function()
{
    return;    // oh dear!
    {
        price: 10
    }
} 
```

* * *

## 将 setInterval 用于可能长时间运行的任务。

对于需要重复执行某些操作的情况，您应该使用 setTimeout 而不是 setInterval。

如果您使用 setInterval，但在计时器中执行的函数在计时器下一次滴答时还没有完成，这很糟糕。而是使用以下模式使用 setTimeout

```
function doThisManyTimes(){
    alert("It's happening again!");
}

(function repeat(){
    doThisManyTimes();
    setTimeout(repeat, 500);
})(); 
```

[Paul Irish](http://paulirish.com/)很好地解释了[我从 jQuery 源](http://paulirish.com/2010/10-things-i-learned-from-the-jquery-source/)视频中学到的10 件事

* * *

## 回答 #9

> 赞同：4
> 
>             
> 
> 时间：2008-12-18T15:03:35.993

不使用基于社区的框架来执行重复性任务，例如 DOM 操作、事件处理等。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2011-03-31T20:38:06.773

**很少进行有效的缓存：**

*   [当您可以使用像Google 的 Libraries API](http://code.google.com/apis/libraries/devguide.html)这样的共享 API来加速页面加载时，不要在您的服务器上存储库（jQuery、Prototype、Dojo）的副本

*   将所有脚本[合并并缩小为一个](http://www.webappers.com/2009/01/22/minify-combine-compress-css-or-javascript-files/)

*   使用[mod_expires](http://www.webproworld.com/webmaster-forum/threads/100407-How-To-Set-Up-The-Mod_Expires-On-An-Apache-Server)为您的所有脚本提供无限的缓存寿命（从不重新下载）

*   版本化您的 javascript 文件名，以便客户端无需重新加载/重新启动即可进行新的更新（即 myFile_r231.js 或 myFile.js?r=231） 
```************