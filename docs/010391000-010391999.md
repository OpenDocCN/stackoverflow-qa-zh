# StackOverflow 问答 10391000-10391999

# java - 从 JList 中删除元素不起作用

> ID：10391000
> 
> 赞同：0
> 
> 时间：2012-04-30T21:44:15.443
> 
> 标签：java, swing, arraylist, jlist

我有一个列出arrayList 的JList。当我按下名为 delete 的按钮时，我想从列表中删除选定的元素（最好是数组列表）。目前我有以下代码，但是它不起作用。我的意思是，如果选择了一个元素，它似乎什么都不做，并且当什么都没有选择时它给了我一个 ArrayIndexOutOfBoundsException 。

```
private JList listOrders = new JList(arrayList.toArray());

public void myList() {
    listOrders.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION );
    panelForLists.add(listOrders);
}

public void updateList() {
    listOrders.setListData(arrayList.toArray());
    listOrders.revalidate();
    listOrders.repaint();
}

public void actionPerformed(ActionEvent event) {
    if (event.getSource() == deleteItem) {
         int index = listOrders.getSelectedIndex();
            listOrders.remove(index);
           updateList();
    }
} 
```

我认为这可能是因为我必须在某处添加 ListSelectionListener，但我不知道如何工作。我已经在互联网上搜索了很长时间的答案，这就是我从 JList oracle 演示中得出的结论。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T21:47:59.610

您似乎正在从列表中删除该项目，然后在您调用`updateList()`并且此方法`setListData(...)`在 JList 上调用时再次将其添加回来。我认为你应该摆脱这种方法。ListModel 应该保存数据，更改数据后无需在 JList 上调用`revalidate()`or 。`repaint()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T22:00:31.910

这基本上是 Hovercraft Full Of Eels 已经回答的问题，但有更多的代码指针。

1.  您确实删除并重新添加了元素，这当然没有效果。最简单的是，如果您`ArrayList`可以直接使用 as`ListModel`但这是不可能的（因为`ArrayList`不会触发任何事件）。您可能想改用`JList( Vector )`构造函数，但该构造函数不允许之后修改向量。所以你被困在创建自己的`ListModel`. 该`DefaultListModel`课程可能正是您正在寻找的。
2.  您`actionPerformed`方法中的代码始终假定选择了一个元素。请注意，`getSelectedIndex`当未选择任何内容时，该方法返回 -1。您可以（对用户）做的最好的事情是在未选择任何内容或选择多个元素时禁用删除按钮。这可以通过让按钮后面的动作监听列表的选择模型，并根据选择更新其启用状态（`PropertyChangeEvent`如果需要，不要忘记触发）来实现。如果您不使用`Action`备份按钮，只需根据选择直接切换按钮的启用状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T21:49:32.980

您需要使用`ListModel`for 删除选定的元素。

```
int index = listOrders.getSelectedIndex();
ListModel model = listOrders.getModel(); 
```

`JList`调用时使用 javax.swing.AbstractListModel 构建模型`setListData`。

您需要实现自己的`ListModel`扩展`javax.swing.AbstractListModel`for put CRUD 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T21:56:58.310

您可以创建一个正确更新它的模型

```
class ArrayListModel<T> extends AbstractListModel{

    private final List<T> arr = new ArrayList<T>();
    public int getSize(){
        return arr.size();
    }

    public T getElementAt(int ind){
        return arr.get(ind);
    }

    public void remove(int ind){
        arr.remove();
        fireIntevalRemoved(this,ind,ind);
    }

    public void add(T obj){
        arr.add(obj);
        fireIntevalAdded(this,arr.size(),arr.size());
    }

    public void setData(List<T> list){
        int size=arr.size();
        arr.clear();
        arr.addAll(list);
        fireIntevalChanged(this,0,arr.size()>size?arr.size():size);
    }

} 
```

并使用 setModel 设置列表的模型

# macros - 使用 Clojure + Midje 重新定义宏操作

> ID：10391002
> 
> 赞同：3
> 
> 时间：2012-04-30T21:44:28.763
> 
> 标签：macros, clojure, midje

**背景**

我是 Clojure 的新手，所以请原谅任何明显的错误。我正在尝试测试一些使用[redis-clojure](https://github.com/tavisrudd/redis-clojure)库的 Clojure 数据访问代码。虽然我的集成测试当然会测试整个堆栈，但我不希望我的单元测试依赖于连接到 redis 服务器实例。[使用Midje 模拟](https://github.com/marick/Midje)实际的 Redis 命令似乎相对简单，但是，连接宏更难处理。

**需要的建议**

[通过Midje](https://github.com/marick/Midje)文档似乎无法做或找不到的是模拟redis 连接或重新定义宏的方式。*[core.clj](https://github.com/tavisrudd/redis-clojure/blob/master/src/redis/core.clj#L16-29)*中相关的顶级连接宏是：

```
(defmacro with-server
  "Evaluates body in the context of a connection to Redis server
  specified by server-spec.

  server-spec is a map with any of the following keys:
    :host     (\"127.0.0.1\")
    :port     (6379)
    :db       (0)
    :timeout  (5000)
    :password (nil)"
  ([server-spec & body]
     `(with-connection connection# *pool* ~server-spec
        (binding [redis.vars/*channel* (make-direct-channel connection#)]
          ~@body)))) 
```

（[这里的上下文中的原始代码](https://github.com/tavisrudd/redis-clojure/blob/master/src/redis/core.clj#L16-29)）

我似乎无法在我的测试代码中重新定义宏，并且将宏包装在一个函数中不会让我进一步前进，因为我仍然需要执行主体来产生我的结果。我最想做的是执行传递给连接宏的主体并丢弃宏的其余部分。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:50:59.157

我经常编写绑定包装宏进行测试。这些宏只是将其他东西绑定到无法测试的函数或宏。在这种情况下，我会按照这些思路写一些东西

```
(defmacro my-fake-with-server []
   ....)

(defmacro with-fake-with-server
      (binding [redis.core/with-server my-fake-with-server]
               (insert test here)))

(deftest my-test (with-fake-with-server (function-that-uses-with-server))) 
```

这会在您的测试代码中保留所有模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:49:49.193

我建议在[Midje 邮件列表](http://groups.google.com/group/midje)上提出您的问题（当然，然后在这里发布最终答案）。在不知道您要测试什么的情况下，很难给出建议。也许（在 Freeman 和 Pryce 的*[不断发展的面向对象软件](https://rads.stackoverflow.com/amzn/click/com/0321503627)*之后（这确实适用于 Clojure - 实际上，支持这种风格是我编写 Midje 的原因）），您想将您的问题分成两部分。首先，您要构建一组隔离 Redis 的函数。您可以通过与真实数据库一起使用的缓慢而繁琐的直接测试来测试这些功能是否正常工作。

这些函数将隐藏连接和对包装宏的需求。

然后，您可以使用 Midje 先决条件测试您的代码是否正确调用了隔离函数。

Avdi Grimm 的*[Objects on Rails](http://objectsonrails.com/)*是另一本书，在讨论隔离数据库方面做得不错。

注意：我对 Redis 一无所知，但其他几个 Clojure-> 数据库库省略了具有智能吸引力的包装宏 ( `with-server`)。相反，它们走有状态的路线并有一个保存连接的全局变量，就像（比如说）Ruby 数据库库 ActiveRecord（隐式）和 Sequel（显式）所做的那样。尽管不那么纯粹，但它似乎让生活（包括测试）变得更简单。在 Midje 中，这种联系可以用元常数来表示。

# jquery - 浏览器使用 jQuery 1.4 覆盖警告对话框上的文本

> ID：10391004
> 
> 赞同：1
> 
> 时间：2012-04-30T21:44:36.507
> 
> 标签：jquery

如果用户要离开未保存更改的页面，我正在处理显示警告框的要求。这是代码：

```
$(function() {
    $(':input',document.myForm).change(function() { 
        window.onbeforeunload = function() {
            return "Are you sure you want to leave this page? You have unsaved changes!";
        }
    });

    $('form').submit(function() {
        window.onbeforeunload = function() { };
    });
}); 
```

一切正常，但是，文本和弹出框被浏览器覆盖。我尝试过 IE 和 Firefox，但它们似乎都覆盖了我的文本并使用它们的内置警告弹出窗口。有没有办法解决这个问题来显示一个带有我的文本的弹出窗口和一个我可以配置的 jQuery 对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:45:35.160

AFAIK 无法覆盖`onbeforeunload`外观和感觉 UI 实现。您（作为 Web 开发人员）能做的最好的事情就是返回一个字符串。该字符串呈现给用户的方式完全不受您的控制，并且取决于浏览器。例如，如果您正在编写一个 .NET 桌面应用程序并使用[WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)控件（它是 IE 的包装器），则由[您](https://stackoverflow.com/questions/8883076/how-to-intercept-the-onbeforeunload-event-in-a-webbrowser-control)来实现和处理此方法。

因此，除非您正在编写自定义浏览器扩展，否则您基本上可以忘记 jQuery UI 对话框。

# sql - 如何创建仅获取表中已更新数据的查询

> ID：10391010
> 
> 赞同：7
> 
> 时间：2012-04-30T21:45:24.083
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我不知道从哪里开始或者这将如何工作，我希望有人有一个想法或一个行之有效的方法。

为了展示我正在尝试做的事情的示例，我创建了一个存储过程，它通过从链接表中获取记录来更新或插入本地表中的新记录。存储过程在 SQL Server 中作为作业运行以更新和插入新记录。

我的问题是：有没有办法查询本地表中的数据，所以最初我可以获取所有记录，但只能获取已插入的新记录或更新的旧记录？

我不想连续获取所有记录，只是添加新记录或更新记录。

这可能吗？

这是我创建的存储过程作为更新本地电话数据的示例：

```
CREATE PROCEDURE sp_UPDATE_PHONE_RECORDS
AS 
BEGIN
MERGE dbo.PHONE_REC AS Target
USING (SELECT MEMBER_ID 
      ,HOME_PHONE = dbo.udf_StdPhoneFmt(HOME)
      ,CELL_PHONE = dbo.udf_StdPhoneFmt(CELL)
      ,WORK_PHONE = dbo.udf_StdPhoneFmt(WORK)

FROM PHONE WHERE MEMBER_ID IS NOT NULL) AS SOURCE

ON (Target.MEMBER_ID = SOURCE.MEMBER_ID)

WHEN MATCHED THEN

    UPDATE SET Target.HOME_PHONE = Source.HOME_PHONE,Target.CELL_PHONE = Source.CELL_PHONE,
    Target.WORK_PHONE = Source.WORK_PHONE

WHEN NOT MATCHED BY TARGET THEN
    INSERT (MEMBER_ID, HOME_PHONE, CELL_PHONE ,WORK_PHONE)

    VALUES (Source.MEMBER_ID, Source.HOME_PHONE, Source.CELL_PHONE, Source.WORK_PHONE);
END
GO 
```

这可能吗？

感谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T21:56:13.550

我们通常会在源表中添加两个日期/时间字段，例如 Source.LastModifiedOn 和 Source.CreatedOn。

然后，当作业运行以更新目标表时，您可以说让我获得自上次作业运行以来的所有 Source.LastModifiedOn 和 Source.CreatedOn 行，并根据这些行进行更新/插入。

当然，您需要确保 Source.LastModifiedOn 和 Source.CreatedOn 设置正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T22:27:54.990

我会在列中使用[OUTPUT 子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)`$action`：

```
DECLARE @Target TABLE
(
    Id INT NOT NULL,
    Value VARCHAR(10) NULL
);
INSERT  @Target
VALUES  (1, 'A'),  (2, NULL), (3, NULL);    
DECLARE @Source TABLE
(
    Id INT NOT NULL,
    Value VARCHAR(10) NULL
);
INSERT  @Source
VALUES  (2, 'B'), (4, 'D'), (5, 'E');
DECLARE @AffectedRows TABLE
(
    MergeAction     NVARCHAR(10) NOT NULL,
    Old_Id          INT NULL,
    Old_Value       VARCHAR(10) NULL,
    New_Id          INT NULL,
    New_Value       VARCHAR(10) NULL
);

MERGE   @Target t
USING   @Source s ON t.Id = s.Id
WHEN MATCHED THEN
        UPDATE SET Value = s.Value
WHEN NOT MATCHED THEN
        INSERT (Id, Value) VALUES (s.Id, s.Value)
OUTPUT  $action, deleted.Id, deleted.Value, inserted.Id, inserted.Value 
        INTO @AffectedRows(MergeAction, Old_Id, Old_Value, New_Id, New_Value);

SELECT  * FROM  @Target;
SELECT  * FROM  @AffectedRows; 
```

结果：

```
Id Value
-- -----
1  A
2  B    <-- updated row
3  NULL
4  D    <-- inserted row
5  E    <-- inserted row

MergeAction Old_Id      Old_Value  New_Id      New_Value
----------- ----------- ---------- ----------- ---------
INSERT      NULL        NULL       4           D
INSERT      NULL        NULL       5           E
UPDATE      2           NULL       2           B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:41:42.740

您可以在本地表上编写一个触发器，该触发器将在对其进行更新或插入时触发。作为触发逻辑的一部分，您必须将那些更新或新插入的记录插入到临时表中。这是您可以记录对本地表的更改的最简单方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:58:28.033

时间戳

TimeStamp 在插入或更新时递增。

在 Master 上将其设为 TimeStamp，在 Slave 上将其设为 Binary(8)

```
select [timeStampSlave].* 
from [timeStampSlave] 
join [timeStampMaster] 
on [timeStampSlave].[ID] = [timeStampMaster].ID 
and [timeStampSlave].[timeStamp] < [timeStampMaster].[timestamp] 
```

要跨服务器查询，您可以使用以下语法

```
[MasterSever].[test].[dbo].[timeStampMaster] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T10:30:42.233

这基本上是[RDotLee 答案](https://stackoverflow.com/a/10391116/6884)的变体，但这是我有时在不关心创建记录的实际日期/时间时使用的另一种方法：

我只是添加一个`bit`名为`modified`默认值 1的字段。
如果将新行插入表中，`modified`则自动设置为 1。
如果更新了现有行，我必须确保它`modified`也设置为 1。

这样，作业只需要搜索所有带有`modified = 1`.
无需跟踪上次执行作业的日期/时间。

当作业成功执行时，它做的最后一件事是“重置”`modified`所有行中的字段：

```
update TheTable set modified = 0 
```

IMO，当您只关心自上次作业运行以来修改了行而不是修改它们时，这种方法**的**工作量**较少**。

但它与 RDotLee 的“LastModifiedOn/CreatedOn”方法具有相同的缺点 - 您需要确保表上的每个更新都确实将`modified`列设置为 1，因此您只能在控制所有代码时使用它写入表。

# php - 加载使用 SWIG 制作的 php 扩展时未定义的符号

> ID：10391017
> 
> 赞同：7
> 
> 时间：2012-04-30T21:45:52.733
> 
> 标签：php, c++, swig, libstdc++, shared-libraries

我正在尝试加载使用 SWIG 制作的 PHP 扩展，但在启动 PHP 时出现以下错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/libtg.so' - /usr/lib/php5/20090626/libtg.so: undefined symbol: __gxx_personality_v0 in Unknown on line 0 
```

我尝试加载的扩展名已命名`libtg.so`并使用以下命令编译：

```
g++ -shared libtg_wrap.o -o libtg.so 
```

`libtg_wrap.o`SWIG 生成的包装器代码的目标文件在哪里。

缺少的符号`__gxx_personality_v0`在 中找到`libstdc++.so`，从以下命令可以看出：

```
$ nm -D /usr/lib/libstdc++.so.6 | grep __gxx_personality_v0
00000000000b9990 T __gxx_personality_v0 
```

`libstdc++.so`中引用`libtg.so`，从以下命令可以看出：

```
$ ldd libtg.so
linux-vdso.so.1 =>  (0x00007fff5f932000)
libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x00007f3fc937c000)
libm.so.6 => /lib/libm.so.6 (0x00007f3fc90f9000)
libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007f3fc8ee2000)
libc.so.6 => /lib/libc.so.6 (0x00007f3fc8b5f000)
/lib64/ld-linux-x86-64.so.2 (0x00007f3fc98fc000) 
```

所以我不明白为什么它找不到符号。关于如何进一步调试的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:28:17.630

似乎在您的编译过程中的某个地方，编译器或链接器不知道 c++ 源代码。

当我尝试 swig （也创建一个 php 扩展）时，我创建了以下[Makefile](https://github.com/marcelog/SimplePcap/blob/master/GNUmakefile "生成文件")可能对你的情况很方便，所以你可能想为你的项目定制它并试一试，它非常简单。

看看我是如何为 swig 命令指定“-c++”选项的。此外，请确保您的源文件具有 .cpp 扩展名，并将“-lstdc++”添加到您的链接器标志中。

重要的东西应该是 swig 调用（注意 -c++ 选项）：

```
${OUTPUTDIR}/${NAME}_swig.cpp:
    ${SWIG} -outdir ${OUTPUTDIR} \
        -oh ${OUTPUTDIR}/${NAME}_swig.h \
        -o ${OUTPUTDIR}/${NAME}_swig.cpp \
        -c++ -php \
        ${NAME}.i 
```

和链接器调用（注意 -lstdc 标志）：

```
ld -shared ${OUTPUTDIR}/*.o -o ${OUTPUTDIR}/${NAME}.so -lstdc++ 
```

希望能帮助到你

# algorithm - 寻找一个简单的哈希表实现示例作为参考

> ID：10391021
> 
> 赞同：3
> 
> 时间：2012-04-30T21:46:26.813
> 
> 标签：algorithm, memory-management, vhdl, verilog, fpga

我正在寻找一些在 Verilog 中实现哈希表（插入 + 查找）的示例（VHDL 也可以）。我的情况不是很复杂，因为我知道初始化时间的所有值，因此我几乎可以知道我需要多少内存，知道它的边界等。哈希函数部分并不难，我知道如何将哈希键映射到内存地址，管理冲突等。但是从头开始编写所有这些是资源消耗，并且可能存在我不知道的陷阱。如果我可以使用一些参考设计会有所帮助。所以如果你知道这样的事情 - 请分享。收费/付费都可以，如果它带有我可以用来学习的源代码，我可以购买一个实现此功能的 IP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T08:24:01.767

您可能需要 CAM 或[Content Addressable Memory](https://en.wikipedia.org/wiki/Content-addressable_memory)，但这实际上取决于您要解决的问题。CAM 在逻辑和读取路径的扇出方面往往很昂贵。使用时，它们往往很小。

老实说，这听起来像是您在用软件术语来思考硬件问题。哈希表不是您通常在硬件中看到的东西。

# jsf-2 - JSF 自定义组件标签类被跳过？

> ID：10391023
> 
> 赞同：0
> 
> 时间：2012-04-30T21:46:34.350
> 
> 标签：jsf-2, facelets, el

我已经设法让我的组件与普通字符串一起工作，现在我正在尝试添加解析`ValueExpression`.

为此，我正在编辑我的 EmoticonOutputTextTag 文件，以添加`setProperties()`对表达式的评估。

但我注意到这个方法永远不会被调用。

好像这个类没有使用，我不知道为什么。

事实上，在我的代码中`setProperties()`我已经写了这行 :`eot.setInputText("randomText");`并且我希望我的组件会显示这一点。事实上，我的组件会显示在 JSF 页面中传递的值，所以我猜测这个方法没有被调用。

我应该怎么办？

这是代码：

EmoticonOutputText.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.unilife.emoticonOutputText;

import javax.el.ValueExpression;
import javax.faces.component.UIOutput;

/**
 *
 * @author stefano
 */
public class EmoticonOutputText extends UIOutput {

    private static final String COMP_FAMILY = "javax.faces.Output";

    /**
     * Get the value of COMPONENT_FAMILY
     *
     * @return the value of COMPONENT_FAMILY
     */
    @Override
    public String getFamily() {
        return COMP_FAMILY;
    }
    private static final String RENDERER_TYPE = "EmoticonOutputTextRenderer";

    /**
     * Get the value of RENDERER_TYPE
     *
     * @return the value of RENDERER_TYPE
     */
    @Override
    public String getRendererType() {
        return RENDERER_TYPE;
    }
    private String style;

    /**
     * Get the value of style
     *
     * @return the value of style
     */
    public String getStyle() {
        return style;
    }

    /**
     * Set the value of style
     *
     * @param style new value of style
     */
    public void setStyle(String style) {
        this.style = style;
    }
    private String styleClass;

    /**
     * Get the value of styleClass
     *
     * @return the value of styleClass
     */
    public String getStyleClass() {
        return styleClass;
    }

    /**
     * Set the value of styleClass
     *
     * @param styleClass new value of styleClass
     */
    public void setStyleClass(String styleClass) {
        this.styleClass = styleClass;
    }
    private String inputText;

    /**
     * Get the value of inputText
     *
     * @return the value of inputText
     */
    public String getInputText() {
        return inputText;
    }

    /**
     * Set the value of inputText
     *
     * @param inputText new value of inputText
     */
    public void setInputText(String inputText) {
        this.inputText = inputText;
    }
} 
```

EmoticonOutputTextTag.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.unilife.emoticonOutputText;

import javax.el.ValueExpression;
import javax.faces.component.UIComponent;
import javax.faces.webapp.UIComponentELTag;

/**
 *
 * @author stefano
 */
public class EmoticonOutputTextTag extends UIComponentELTag {

    private static final String COMP_TYPE = "EmoticonOutputTextTag";
    private static final String RENDERER_TYPE = "EmoticonOutputTextRenderer";
    private String style;
    private String styleClass;
    private ValueExpression inputText;

    public void setStyle(String style) {
        this.style = style;
    }

    public void setStyleClass(String styleClass) {
        this.styleClass = styleClass;
    }

    public void setInputText(ValueExpression inputText) {
        this.inputText = inputText;
    }

    @Override
    public String getComponentType() {
        return COMP_TYPE;
    }

    @Override
    public String getRendererType() {
        return RENDERER_TYPE;
    }

    @Override
    protected void setProperties(UIComponent component) {
        super.setProperties(component);
        EmoticonOutputText eot = (EmoticonOutputText)component;        
        if(style != null){
            eot.setStyle(style);
        }
        if(styleClass != null){
            eot.setStyleClass(styleClass);
        }
        if(inputText != null){
//            eot.setInputText(inputText.getExpressionString());
            eot.setInputText("randomText");
        }        
    }    
} 
```

EmoticonOutputTextRenderer.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.unilife.emoticonOutputText;

import java.io.IOException;
import java.util.HashMap;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.context.ResponseWriter;
import javax.faces.render.Renderer;
import javax.servlet.ServletContext;

/**
 *
 * @author stefano
 */
public class EmoticonOutputTextRenderer extends Renderer {

    //Contiene la corrispondenza tra la stringa da sostituire e il nome dell'emoticon
    private static final HashMap<String, String> emoticons = new HashMap<>();
    //Contiene il percorso dei files delle emoticon
    private final String basePath = ((ServletContext) (FacesContext.getCurrentInstance().getExternalContext().getContext())).getContextPath() + "/resources/images/emoticons/";

    public EmoticonOutputTextRenderer() {
        parseEmoticons();
    }

    private void parseEmoticons(){
        //Not needed 
    }

    @Override
    public void encodeBegin(FacesContext context, UIComponent component) throws IOException {
        EmoticonOutputText eot = (EmoticonOutputText) component;
        ResponseWriter writer = context.getResponseWriter();
        //Aggiungiamo l'eventuale stile CSS o direttamente la classe
        writer.startElement("span", null);
        if(eot.getStyle()!=null && !eot.getStyle().isEmpty()){
            writer.writeAttribute("style", eot.getStyle(), null);
        }
        if(eot.getStyleClass()!=null && !eot.getStyleClass().isEmpty()){
            writer.writeAttribute("class", eot.getStyleClass(), null);
        }
        //Andiamo ad effettuare il parse vero e proprio, sostituendo le emoticons come le immagini
        for(String str : eot.getInputText().split(" ")){
            if(emoticons.containsKey(str)){ //Se riconosco l'emoticon allora scrivo l'immagine
                writer.startElement("img", null);
                writer.writeAttribute("src", emoticons.get(str) + ".gif", null);
                writer.endElement("img");
                writer.writeText(" ", null);
            } else { //Altrimenti aggiungo semplicemente la parola
                writer.writeText(str + " ", null);
            }
        }
    }
} 
```

unilife.taglib.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE facelet-taglib PUBLIC
"-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
"http://java.sun.com/dtd/facelet-taglib_1_0.dtd">
<facelet-taglib>
    <namespace>http://unilife.it/tags</namespace>
    <tag>
        <tag-name>EmoticonOutputText</tag-name>
        <description>
            OutputText con la possibilità di mostrare Emoticons
        </description>
        <component>
            <component-type>EmoticonOutputText</component-type>
            <renderer-type>EmoticonOutputTextRenderer</renderer-type>
        </component>
        <attribute>
            <name>style</name>            
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <name>styleClass</name>            
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <name>inputText</name>
            <required>true</required>            
            <type>java.lang.String</type>
        </attribute>
    </tag>
</facelet-taglib> 
```

面孔-config.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="1.2" 
                xmlns="http://java.sun.com/xml/ns/javaee" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
         http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">
    <component>
        <component-type>
            EmoticonOutputText
        </component-type>
        <component-class>
            com.unilife.emoticonOutputText.EmoticonOutputText
        </component-class>
    </component>

    <render-kit>
        <renderer>
            <description>
                OutputText che permette il rendering di emoticons al posto delle combinazioni di tasti
            </description>
            <component-family>
                javax.faces.Output
            </component-family>
            <renderer-type>
                EmoticonOutputTextRenderer
            </renderer-type>
            <renderer-class>
                com.unilife.emoticonOutputText.EmoticonOutputTextRenderer
            </renderer-class>
        </renderer>
    </render-kit>  
</faces-config> 
```

编辑：我在 lu4242 的回答之后编辑了一些东西，但现在我有一个 ClassCastException！

EmoticonOutputTextTag.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.unilife.emoticonOutputText;

import java.io.IOException;
import javax.el.ValueExpression;
import javax.faces.component.UIComponent;
import javax.faces.view.facelets.ComponentConfig;
import javax.faces.view.facelets.FaceletContext;
import javax.faces.view.facelets.TagAttribute;
import javax.faces.view.facelets.TagHandler;

/**
 *
 * @author stefano
 */

public class EmoticonOutputTextTag extends TagHandler {

    private static final String COMP_TYPE = "EmoticonOutputTextTag";
    private static final String RENDERER_TYPE = "EmoticonOutputTextRenderer";
    private String style;
    private String styleClass;
    private ValueExpression inputText;

    public EmoticonOutputTextTag(ComponentConfig config) {
        super(config);
    }

    public void setStyle(String style) {
        this.style = style;
    }

    public void setStyleClass(String styleClass) {
        this.styleClass = styleClass;
    }

    public void setInputText(ValueExpression inputText) {
        this.inputText = inputText;
    }

    @Override
    public void apply(FaceletContext fc, UIComponent uic) throws IOException {
        EmoticonOutputText eot = (EmoticonOutputText) uic;        
        TagAttribute ta = this.getRequiredAttribute("inputText");
        ValueExpression ve = ta.getValueExpression(fc, String.class);
        if(ve.isLiteralText()){
            eot.setInputText(ve.getExpressionString());
        } else {
            eot.setInputText((String)ve.getValue(fc));
        }
    }
} 
```

unilife.taglib.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE facelet-taglib PUBLIC
"-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
"http://java.sun.com/dtd/facelet-taglib_1_0.dtd">
<facelet-taglib>
    <namespace>http://unilife.it/tags</namespace>
    <tag>
        <tag-name>EmoticonOutputText</tag-name>
        <description>
            OutputText con la possibilità di mostrare Emoticons
        </description>
        <component>
            <component-type>EmoticonOutputText</component-type>
            <renderer-type>EmoticonOutputTextRenderer</renderer-type>
            <handler-class>com.unilife.emoticonOutputText.EmoticonOutputTextTag</handler-class>            
        </component>
        <attribute>
            <name>style</name>            
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <name>styleClass</name>            
            <type>java.lang.String</type>
        </attribute>
        <attribute>
            <name>inputText</name>
            <required>true</required>            
            <type>java.lang.String</type>
        </attribute>
    </tag>
</facelet-taglib> 
```

现在的问题是`uic`不能转换为`EmoticonOutputText`..但是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T01:39:57.463

标记类从错误的类扩展。UIComponentELTag 用于 JSP。在 Facelets 中，可以为从 javax.faces.view.facelets.ComponentHandler 扩展的组件提供标签处理程序，并在 .taglib.xml 文件的 <tag><component> 内添加 <handler-class>。

如果您不想处理创建自定义组件的所有配置内容，请查看[MyFaces Builder Plugin Site](http://myfaces.apache.org/build-tools/plugins/myfaces-builder-plugin/index.html)。它使用源代码注释来处理所有元数据并以最小的努力生成所有相关文件。它是用于[Apache MyFaces Core](http://myfaces.apache.org/core21/index.html)、[Apache MyFaces Tomahawk](http://myfaces.apache.org/tomahawk/index.html)和 MyFaces Sandbox 的工具。有一个原型可以帮助使用 maven 设置环境，[请参阅说明](https://cwiki.apache.org/confluence/display/MYFACES/MyFaces+Archetypes+for+Maven)。或者您可以采用“简单的方法”并创建一个 JSF 2.0 复合组件。

# c# - 在 C# 应用程序中接收操作系统级别的按键事件

> ID：10391025
> 
> 赞同：10
> 
> 时间：2012-04-30T21:46:46.207
> 
> 标签：c#, keyboard-shortcuts, media-player, keyboard-hook

我不知道这个问题的更好标题，但我会说明我的问题。

我正在开发类似于 mp3 播放器的应用程序，它使用多媒体键来播放/暂停，停止歌曲，我实际上使它工作但 FormApplication 必须在顶部 [Focused]

```
protected override void WndProc(ref Message msg)
{
    if (msg.Msg == 0x319)   // WM_APPCOMMAND message
    {
        // extract cmd from LPARAM (as GET_APPCOMMAND_LPARAM macro does)
        int cmd = (int)((uint)msg.LParam >> 16 & ~0xf000);
        switch (cmd)
        {
            case 13:  // APPCOMMAND_MEDIA_STOP constant
                MessageBox.Show("Stop");
                break;
            case 14:  // APPCOMMAND_MEDIA_PLAY_PAUSE
                MessageBox.Show("Play/Pause");
                break;
            case 11:  // APPCOMMAND_MEDIA_NEXTTRACK
                MessageBox.Show("Next");
                break;
            case 12:  // APPCOMMAND_MEDIA_PREVIOUSTRACK
                MessageBox.Show("Previous");
                break;
            default:  
                break;
        }
    }
    base.WndProc(ref msg);
}

private void Form1_KeyPress(object sender, KeyPressEventArgs e)
{
    Message m = new Message();
    m.Msg = e.KeyChar;

    WndProc(ref m);
} 
```

所以我需要做的是：让多媒体键工作，即使程序在后台并且不在顶部或焦点上，就像 winamp 和 Windows Media Player 的工作方式一样。

我在互联网上搜索了很多，但其中大多数给了我一种类似于我正在使用的方式。

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-24T11:00:05.687

您需要一个操作系统级别的键盘挂钩。例如`user32.dll` `SetWindowsHookEx`通过`P/Invoke`. 您可以在下面找到一个示例，但您必须根据自己的需要对其进行调整。

注意：`Dispatcher`这里是 WPF 调度程序，因此`RawKeyEventArgs`可以提高。

`KeyboardListener.cs`

```
/// <summary>
    /// Listens keyboard globally.
    /// 
    /// <remarks>Uses WH_KEYBOARD_LL.</remarks>
    /// </summary>
    public class KeyboardListener : IDisposable
    {
        /// <summary>
        /// Creates global keyboard listener.
        /// </summary>
        public KeyboardListener(Dispatcher dispatcher)
        {
            // Dispatcher thread handling the KeyDown/KeyUp events.
            _dispatcher = dispatcher;

            // We have to store the LowLevelKeyboardProc, so that it is not garbage collected runtime
            _hookedLowLevelKeyboardProc = LowLevelKeyboardProc;

            // Set the hook
            _hookId = InterceptKeys.SetHook(_hookedLowLevelKeyboardProc);

            // Assign the asynchronous callback event
            _hookedKeyboardCallbackAsync = new KeyboardCallbackAsync(KeyboardListener_KeyboardCallbackAsync);
        }

        private readonly Dispatcher _dispatcher;

        /// <summary>
        /// Destroys global keyboard listener.
        /// </summary>
        ~KeyboardListener()
        {
            Dispose();
        }

        /// <summary>
        /// Fired when any of the keys is pressed down.
        /// </summary>
        public event EventHandler<RawKeyEventArgs> KeyDown;

        /// <summary>
        /// Fired when any of the keys is released.
        /// </summary>
        public event EventHandler<RawKeyEventArgs> KeyUp;

        #region Inner workings

        /// <summary>
        /// Hook ID
        /// </summary>
        private readonly IntPtr _hookId = IntPtr.Zero;

        /// <summary>
        /// Asynchronous callback hook.
        /// </summary>
        /// <param name="character">Character</param>
        /// <param name="keyEvent">Keyboard event</param>
        /// <param name="vkCode">VKCode</param>
        private delegate void KeyboardCallbackAsync(InterceptKeys.KeyEvent keyEvent, int vkCode, string character);

        /// <summary>
        /// Actual callback hook.
        /// 
        /// <remarks>Calls asynchronously the asyncCallback.</remarks>
        /// </summary>
        /// <param name="nCode"></param>
        /// <param name="wParam"></param>
        /// <param name="lParam"></param>
        /// <returns></returns>
        [MethodImpl(MethodImplOptions.NoInlining)]
        private IntPtr LowLevelKeyboardProc(int nCode, UIntPtr wParam, IntPtr lParam)
        {
            if (nCode >= 0)
                if (wParam.ToUInt32() == (int)InterceptKeys.KeyEvent.WM_KEYDOWN ||
                    wParam.ToUInt32() == (int)InterceptKeys.KeyEvent.WM_KEYUP ||
                    wParam.ToUInt32() == (int)InterceptKeys.KeyEvent.WM_SYSKEYDOWN ||
                    wParam.ToUInt32() == (int)InterceptKeys.KeyEvent.WM_SYSKEYUP)
                {
                    // Captures the character(s) pressed only on WM_KEYDOWN
                    string chars = InterceptKeys.VKCodeToString((uint)Marshal.ReadInt32(lParam),
                                                                (wParam.ToUInt32() == (int)InterceptKeys.KeyEvent.WM_KEYDOWN ||
                                                                 wParam.ToUInt32() == (int)InterceptKeys.KeyEvent.WM_SYSKEYDOWN));

                    _hookedKeyboardCallbackAsync.BeginInvoke((InterceptKeys.KeyEvent)wParam.ToUInt32(), Marshal.ReadInt32(lParam), chars, null, null);
                }

            return InterceptKeys.CallNextHookEx(_hookId, nCode, wParam, lParam);
        }

        /// <summary>
        /// Event to be invoked asynchronously (BeginInvoke) each time key is pressed.
        /// </summary>
        private readonly KeyboardCallbackAsync _hookedKeyboardCallbackAsync;

        /// <summary>
        /// Contains the hooked callback in runtime.
        /// </summary>
        private readonly InterceptKeys.LowLevelKeyboardProc _hookedLowLevelKeyboardProc;

        /// <summary>
        /// HookCallbackAsync procedure that calls accordingly the KeyDown or KeyUp events.
        /// </summary>
        /// <param name="keyEvent">Keyboard event</param>
        /// <param name="vkCode">VKCode</param>
        /// <param name="character">Character as string.</param>
        void KeyboardListener_KeyboardCallbackAsync(InterceptKeys.KeyEvent keyEvent, int vkCode, string character)
        {
            switch (keyEvent)
            {
                // KeyDown events
                case InterceptKeys.KeyEvent.WM_KEYDOWN:
                    if (KeyDown != null)
                        _dispatcher.BeginInvoke(new EventHandler<RawKeyEventArgs>(KeyDown), this, new RawKeyEventArgs(vkCode, false, character));
                    break;
                case InterceptKeys.KeyEvent.WM_SYSKEYDOWN:
                    if (KeyDown != null)
                        _dispatcher.BeginInvoke(new EventHandler<RawKeyEventArgs>(KeyDown), this, new RawKeyEventArgs(vkCode, true, character));
                    break;

                // KeyUp events
                case InterceptKeys.KeyEvent.WM_KEYUP:
                    if (KeyUp != null)
                        _dispatcher.BeginInvoke(new EventHandler<RawKeyEventArgs>(KeyUp), this, new RawKeyEventArgs(vkCode, false, character));
                    break;
                case InterceptKeys.KeyEvent.WM_SYSKEYUP:
                    if (KeyUp != null)
                        _dispatcher.BeginInvoke(new EventHandler<RawKeyEventArgs>(KeyUp), this, new RawKeyEventArgs(vkCode, true, character));
                    break;

                default:
                    break;
            }
        }

        #endregion

        #region IDisposable Members

        /// <summary>
        /// Disposes the hook.
        /// <remarks>This call is required as it calls the UnhookWindowsHookEx.</remarks>
        /// </summary>
        public void Dispose()
        {
            InterceptKeys.UnhookWindowsHookEx(_hookId);
        }

        #endregion
    } 
```

`InterceptKeys.cs`

```
 /// <summary>
    /// Winapi Key interception helper class.
    /// </summary>
    internal static class InterceptKeys
    {
        public delegate IntPtr LowLevelKeyboardProc(int nCode, UIntPtr wParam, IntPtr lParam);

        private const int WH_KEYBOARD_LL = 13;

        /// <summary>
        /// Key event
        /// </summary>
        public enum KeyEvent : int
        {
            /// <summary>
            /// Key down
            /// </summary>
            WM_KEYDOWN = 256,

            /// <summary>
            /// Key up
            /// </summary>
            WM_KEYUP = 257,

            /// <summary>
            /// System key up
            /// </summary>
            WM_SYSKEYUP = 261,

            /// <summary>
            /// System key down
            /// </summary>
            WM_SYSKEYDOWN = 260
        }

        public static IntPtr SetHook(LowLevelKeyboardProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_KEYBOARD_LL, proc, GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook, LowLevelKeyboardProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        internal static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        internal static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode, UIntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);

        #region Convert VKCode to string
        // Note: Sometimes single VKCode represents multiple chars, thus string. 
        // E.g. typing "^1" (notice that when pressing 1 the both characters appear, 
        // because of this behavior, "^" is called dead key)

        [DllImport("user32.dll")]
        private static extern int ToUnicodeEx(uint wVirtKey, uint wScanCode, byte[] lpKeyState, [Out, MarshalAs(UnmanagedType.LPWStr)] System.Text.StringBuilder pwszBuff, int cchBuff, uint wFlags, IntPtr dwhkl);

        [DllImport("user32.dll")]
        private static extern bool GetKeyboardState(byte[] lpKeyState);

        [DllImport("user32.dll")]
        private static extern uint MapVirtualKeyEx(uint uCode, uint uMapType, IntPtr dwhkl);

        [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
        private static extern IntPtr GetKeyboardLayout(uint dwLayout);

        [DllImport("User32.dll")]
        private static extern IntPtr GetForegroundWindow();

        [DllImport("User32.dll")]
        private static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

        [DllImport("user32.dll")]
        private static extern bool AttachThreadInput(uint idAttach, uint idAttachTo, bool fAttach);

        [DllImport("kernel32.dll")]
        private static extern uint GetCurrentThreadId();

        private static uint _lastVKCode = 0;
        private static uint _lastScanCode = 0;
        private static byte[] _lastKeyState = new byte[255];
        private static bool _lastIsDead = false;

        /// <summary>
        /// Convert VKCode to Unicode.
        /// <remarks>isKeyDown is required for because of keyboard state inconsistencies!</remarks>
        /// </summary>
        /// <param name="vkCode">VKCode</param>
        /// <param name="isKeyDown">Is the key down event?</param>
        /// <returns>String representing single unicode character.</returns>
        public static string VKCodeToString(uint vkCode, bool isKeyDown)
        {
            // ToUnicodeEx needs StringBuilder, it populates that during execution.
            var sbString = new System.Text.StringBuilder(5);

            var bKeyState = new byte[255];
            bool bKeyStateStatus;
            bool isDead = false;

            // Gets the current windows window handle, threadID, processID
            IntPtr currentHWnd = GetForegroundWindow();
            uint currentProcessID;
            uint currentWindowThreadID = GetWindowThreadProcessId(currentHWnd, out currentProcessID);

            // This programs Thread ID
            uint thisProgramThreadId = GetCurrentThreadId();

            // Attach to active thread so we can get that keyboard state
            if (AttachThreadInput(thisProgramThreadId, currentWindowThreadID, true))
            {
                // Current state of the modifiers in keyboard
                bKeyStateStatus = GetKeyboardState(bKeyState);

                // Detach
                AttachThreadInput(thisProgramThreadId, currentWindowThreadID, false);
            }
            else
            {
                // Could not attach, perhaps it is this process?
                bKeyStateStatus = GetKeyboardState(bKeyState);
            }

            // On failure we return empty string.
            if (!bKeyStateStatus)
                return "";

            // Gets the layout of keyboard
            IntPtr hkl = GetKeyboardLayout(currentWindowThreadID);

            // Maps the virtual keycode
            uint lScanCode = MapVirtualKeyEx(vkCode, 0, hkl);

            // Keyboard state goes inconsistent if this is not in place. In other words, we need to call above commands in UP events also.
            if (!isKeyDown)
                return "";

            // Converts the VKCode to unicode
            int relevantKeyCountInBuffer = ToUnicodeEx(vkCode, lScanCode, bKeyState, sbString, sbString.Capacity, (uint)0, hkl);

            string ret = "";

            switch (relevantKeyCountInBuffer)
            {
                    // Dead keys (^,`...)
                case -1:
                    isDead = true;

                    // We must clear the buffer because ToUnicodeEx messed it up, see below.
                    ClearKeyboardBuffer(vkCode, lScanCode, hkl);
                    break;

                case 0:
                    break;

                    // Single character in buffer
                case 1:
                    ret = sbString[0].ToString();
                    break;

                    // Two or more (only two of them is relevant)
                case 2:
                default:
                    ret = sbString.ToString().Substring(0, 2);
                    break;
            }

            // We inject the last dead key back, since ToUnicodeEx removed it.
            // More about this peculiar behavior see e.g: 
            //   http://www.experts-exchange.com/Programming/System/Windows__Programming/Q_23453780.html
            //   http://blogs.msdn.com/michkap/archive/2005/01/19/355870.aspx
            //   http://blogs.msdn.com/michkap/archive/2007/10/27/5717859.aspx
            if (_lastVKCode != 0 && _lastIsDead)
            {
                var sbTemp = new System.Text.StringBuilder(5);
                ToUnicodeEx(_lastVKCode, _lastScanCode, _lastKeyState, sbTemp, sbTemp.Capacity, (uint)0, hkl);
                _lastVKCode = 0;

                return ret;
            }

            // Save these
            _lastScanCode = lScanCode;
            _lastVKCode = vkCode;
            _lastIsDead = isDead;
            _lastKeyState = (byte[])bKeyState.Clone();

            return ret;
        }

        private static void ClearKeyboardBuffer(uint vk, uint sc, IntPtr hkl)
        {
            var sb = new System.Text.StringBuilder(10);

            int rc;
            do
            {
                var lpKeyStateNull = new Byte[255];
                rc = ToUnicodeEx(vk, sc, lpKeyStateNull, sb, sb.Capacity, 0, hkl);
            } while (rc < 0);
        }
        #endregion
    } 
```

`RawKeyEventArgs.cs`

```
 /// <summary>
    /// Raw KeyEvent arguments.
    /// </summary>
    public class RawKeyEventArgs : EventArgs
    {
        public bool IsSysKey { get; private set; }

        public Key Key { get; private set; }

        public int VKCode { get; private set; }

        /// <summary>
        /// Convert to string.
        /// </summary>
        /// <returns>Returns string representation of this key, if not possible empty string is returned.</returns>
        public override string ToString()
        {
            if (Character == null)
                return string.Empty;

            return Character;
        }

        public string Character { get; private set; }

        /// <summary>
        /// Create raw keyevent arguments.
        /// </summary>
        /// <param name="vkCode"></param>
        /// <param name="isSysKey"></param>
        /// <param name="character">Character</param>
        public RawKeyEventArgs(int vkCode, bool isSysKey, string character)
        {
            VKCode = vkCode;
            IsSysKey = isSysKey;
            Character = character;
            Key = KeyInterop.KeyFromVirtualKey(vkCode);
        }

    } 
```

# glsl - GLSL 相当于 LINES 的 gl_PointCoord 是什么？

> ID：10391029
> 
> 赞同：6
> 
> 时间：2012-04-30T21:46:57.623
> 
> 标签：glsl, opengl-es-2.0

因此，在 OpenGLES-2 中，片段着色器可以访问**gl_PointCoord**以查看片段在点图元上的位置。

还有**gl_FragCoord**可以查看片段在帧缓冲区中的位置。

但是，**gl_LineCoord**在哪里？它不存在，那么我的片段着色器如何知道片段在线条图元上的位置？

我想知道这一点的原因是我想做一条虚线，虚线在屏幕空间，而不是世界空间。

我目前能想到的唯一方法是使用 fragCoord.x^2 + fragCoord.y^2 的 sqrt，但如果只有 gl_LineCoord 可用，这听起来既昂贵又不必要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T21:54:58.403

没有你想要的等价物。但实际上，这并不难。只需在行的一端传递值 0，在另一端传递 1。让插值告诉你沿着这条线有多远。这将为您提供您想要的等价物。

当然，它不会对您在屏幕空间中绘制虚线有太大帮助，但`gl_PointCoord`也不会帮助您（因为它只像这个值一样从 [0, 1] 开始）。

但是你要求相当于 的行`gl_PointCoord`，我给了你。

# ruby-on-rails - 多次连续访问或操作后的验证码

> ID：10391030
> 
> 赞同：0
> 
> 时间：2012-04-30T21:46:58.873
> 
> 标签：ruby-on-rails, captcha

我有一个 Rails 应用程序，它有一个搜索字段，允许任何访问者搜索数据库。

我对实施验证码犹豫不决，因为我想保持网站清洁和用户友好。

但是，我想让机器人难以通过进行大量连续随机查询来尝试从数据库中获取所有内容。因此，我正在考虑添加一个仅在看起来正在发生这种情况时才出现的验证码（例如，验证码在几次错误搜索后出现）。

关于如何实现这一点的任何建议？我应该尝试使用会话变量还是跟踪 IP 地址？我最好在服务器级别（即使用 htaccess 文件）处理此问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:49:46.890

考虑使用蜜罐。这意味着添加一个用 CSS 隐藏的表单元素。机器人看不到您隐藏了该字段，它们会填写它。普通用户不会填写它。

# c - 在 C 中定义未使用的参数

> ID：10391031
> 
> 赞同：8
> 
> 时间：2012-04-30T21:47:02.557
> 
> 标签：c, gcc, pthreads, posix

我需要使用 pthreat 但我不需要将任何参数传递给函数。因此，我将 NULL 传递给 pthread_create 上的函数。我有 7 个 pthread，所以 gcc 编译器警告我有 7 个未使用的参数。如何将这 7 个参数定义为 C 编程中未使用的参数？如果我不将这些参数定义为未使用，会导致任何问题吗？预先感谢您的回复。

```
void *timer1_function(void * parameter1){
//<statement>
}

int main(int argc,char *argv[]){
  int thread_check1;
  pthread_t timer1;
  thread_check1 = pthread_create( &timer1, NULL, timer1_function,  NULL);
    if(thread_check1 !=0){
        perror("thread creation failed");
        exit(EXIT_FAILURE);
    }
while(1){}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-30T21:52:52.507

您可以将参数转换为`void`：

```
void *timer1_function(void * parameter1) {
  (void) parameter1; // Suppress the warning.
  // <statement>
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-30T21:59:17.307

GCC 有一个“属性”工具，可以用来标记未使用的参数。利用

```
void *timer1_function(__attribute__((unused))void *parameter1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T23:29:51.020

两种常用的技术：

1）省略未使用参数的名称：

```
void *timer1_function(void *) { ... } 
```

2）注释掉参数名：

```
void *timer1_function(void * /*parameter1*/) { ... } 
```

- 克里斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T21:57:34.017

默认情况下，GCC 不会产生这个警告，即使是 -Wall。我认为当您无法控制环境时，可能需要其他问题中显示的解决方法，但如果您这样做，只需删除标志 ( `-Wunused-parameter`)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T21:54:53.010

在函数体中不使用参数是完全可以的。

为避免编译器警告（如果您的实现中有），您可以这样做：

```
void *timer1_function(void * parameter1)
{
    // no operation, will likely be optimized out by the compiler
    parameter1 = parameter1;  
} 
```

# mysql - SQL 外键和引用其他表

> ID：10391034
> 
> 赞同：1
> 
> 时间：2012-04-30T21:47:22.967
> 
> 标签：mysql, foreign-keys, primary-key

我正在尝试使用外键将两个表链接在一起。一个表是用户，另一个是 userInfo。当我删除一个用户时，我也想删除他们的信息。当我从用户表中删除用户时，他们在 usersInfo 中的条目仍然存在。我似乎无法弄清楚我做错了什么。

```
CREATE TABLE users (
userid INT AUTO_INCREMENT PRIMARY KEY,
username VARCHAR(30) NOT NULL,
email VARCHAR(50) NOT NULL,
password VARCHAR(32) NOT NULL,
userlevel INT UNSIGNED NOT NULL,
rating int,
organization int(1),
timestamp varchar(20) NOT NULL,
); 
```

这是我的用户信息表。是的，我知道它可能在同一张桌子上。我这样做只是为了一个简单的例子。

```
CREATE TABLE usersInfo(
userid int  auto_increment NOT NULL,
userlocation varchar(50),
about varchar(300),
userkeywords varchar(150),
FOREIGN KEY(userid) REFERENCES users(userid) ON DELETE CASCADE ON UPDATE CASCADE
); 
```

* * *

编辑 - 问题已解决。感谢所有帮助过的人。

在语句`TYPE = InnoDB`末尾添加。`CREATE TABLE`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:12:00.433

添加`ENGINE=INNODB`到这些`CREATE TABLE`语句以确保它们是 InnoDB 表。低于 5.5.5 的 MySQL 版本将默认使用 MyISAM，它不支持外键关系，但如果您定义外键关系也不会抛出错误。

# eclipse - 如何在 Eclipse 中选择 Composite？

> ID：10391035
> 
> 赞同：0
> 
> 时间：2012-04-30T21:47:52.353
> 
> 标签：eclipse, eclipse-plugin, swt

我有一个编辑器，它由一个表和它下面的一组特定于选择的表单字段组成，因此当我在表中进行选择时，它下面的字段会改变。当编辑器太小时，字段容器会出现滚动条：

![小样](../Images/f35cfc186e9fbb894131ba1edfe3619d.png)

问题是当我在表格中进行选择时，我无法向下滚动字段容器（使用鼠标滚轮），因为焦点仍在表格内。目前，我必须选择其中一个字段才能滚动其容器或手动拖动滚动条本身，但只需单击或悬停在目标容器中的任意位置以将其聚焦以进行鼠标滚轮滚动会更容易。

如何使复合体（在我的情况下为 a [`Form`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2Fforms%2Fwidgets%2FForm.html)）可选择？或者更好的是，有没有办法根据鼠标光标的位置来控制滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:50:42.130

如果要根据鼠标光标所在的位置控制滚动，则必须编写[org.eclipse.swt.events.MouseMoveListener](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/events/MouseMoveListener.html)和[org.eclipse.swt.events.MouseWheelListener](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/events/MouseListener.html)的组合。

组件方法`setFocus()`使组件进入键盘焦点。

我没有尝试过这样做。请务必处理用户的鼠标上没有滚轮的情况。

# magento - Magento - 没有编辑订单地址链接

> ID：10391043
> 
> 赞同：3
> 
> 时间：2012-04-30T21:48:47.363
> 
> 标签：magento

当我在 Magento 1.6.1.0 中查看订单时，我曾经在送货和账单地址上方有一个“编辑”链接，这允许我对地址进行更新。

我今天刚去编辑一个地址，发现链接不再存在。有谁知道这些可能发生了什么或我应该在哪个文件中查找问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:50:36.437

我找出了问题的原因。就是这个扩展： [http ://www.fmeextensions.com/one-step-checkout.html](http://www.fmeextensions.com/one-step-checkout.html)

禁用它后，链接重新出现。

# visual-studio-2010 - VS2010 中的负载测试似乎没有报告结果

> ID：10391044
> 
> 赞同：3
> 
> 时间：2012-04-30T21:48:48.000
> 
> 标签：visual-studio-2010, load-testing

我执行以下操作：

1.  创建 Web 性能测试。在记录器记录步骤的同时浏览 cnn.com。
2.  创建负载测试。完成向导，附加上一步中创建的 Web Perf 测试。
3.  运行负载测试。各种彩色统计数据似乎运行良好，我可以看到通过 TcpView 实用程序发出的请求。运行时屏幕如下所示：

![在此处输入图像描述](../Images/e8eed41681a3910973896f71bb930b0f.png)

完成后，我得到一个没有任何结果的空白屏幕（见下文）。 ![在此处输入图像描述](../Images/be8769057b44b904d587357677a72192.png)

我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T17:41:58.683

负载测试结果需要存储在数据库中。有没有为数据库所在的sql server配置连接字符串`LoadTests2010`？

如果没有，请检查这些链接以了解如何创建数据库和配置连接字符串：

*   [如何：使用 SQL 创建负载测试结果存储库](http://msdn.microsoft.com/en-us/library/ms182600.aspx)
*   [如何：选择负载测试结果存储库](http://msdn.microsoft.com/en-us/library/ms243400.aspx)

# javascript - 如何删除文件名而不是所有文件名？

> ID：10391045
> 
> 赞同：0
> 
> 时间：2012-04-30T21:48:49.297
> 
> 标签：javascript

我在删除文件时遇到问题。我有一个应用程序 [这里][1]。

要使用该应用程序，请单击“添加”按钮，然后会出现一个包含文件输入的表格行。请使用文件输入上传几个小文件，然后单击“上传”按钮。现在您意识到，当您上传文件时，文件的名称会出现在表格行的下方，并且每个文件名都包含它自己的“删除”按钮。

现在的问题是假设您要删除一个文件名，当您单击“删除”按钮时，它会删除所有不正确的文件名。它应该只删除您要删除的文件名。此外，如果您尝试上传另一个文件，删除文件名后，文件名不会出现在下方。

所以我的问题是我应该这样做的正确方法是什么，以便当用户删除文件名时，它只删除它关联的文件名而不是所有文件名？当用户上传另一个文件时删除文件名后，它应该显示该文件的文件名。

下面是附加文件名、删除按钮和水平线的代码：

```
<ul class='listImage' align='left'> 
```

下面是javascript代码：

```
function stopImageUpload(success, imagefilename){

      var result = '';

      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').append(htmlEncode(imagefilename) + '<button type="button" name="deletefileimage" class="deletefileimage">Delete</button><br/><hr/>'); 
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

            $(".deletefileimage").on("click", function(event) {

        $(this).parents("form:first").find(".listImage").replaceWith("");

    });

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:56:35.040

试试这个：

```
 $(".deletefileimage").on("click", function(event) {
        $(this).closest(".listImage").remove();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:59:45.793

您应该做的是将每个文件/删除按钮包装在他们自己的 div 中，并在用户按下删除时删除该 div。

```
$('.listImage').append('<div>' + htmlEncode(imagefilename) + '<button type="button" name="deletefileimage" class="deletefileimage">Delete</button><br/><hr/><div>'); 
```

并且在点击事件中

```
$(this).parent().remove(); 
```

# c# - MVC3远程验证，验证触发，方法被调用但参数为空

> ID：10391048
> 
> 赞同：1
> 
> 时间：2012-04-30T21:49:05.210
> 
> 标签：c#, ajax, asp.net-mvc-3, validation

我有以下代码：

```
 <td colspan="5" align="left" valign="top">
        <div style="position:absolute;" >@Html.TextBoxFor(a => a.Item1.Username, new { @class = "textboxLarge" })
         @Html.ValidationMessageFor(a => a.Item1.Username)</div>
    </td> 
```

和：

```
 public JsonResult IsUserNameAvailable(string Username)
    {
        var users = _userService.GetAll();
        var userNames = (from u in users
                        select u.Username).ToList();
        if (userNames.Contains(Username))
        {
            var referrer = Request.UrlReferrer.AbsolutePath;
            List<string> pagesToValidate = new List<string>() { "Registro" };
            var jsonRequestBehavior = JsonRequestBehavior.DenyGet;
            foreach (string page in pagesToValidate)
            {
                if (referrer.Contains(page))
                    jsonRequestBehavior = JsonRequestBehavior.AllowGet;
            }
            return Json("El nombre de usuario ya existe.", jsonRequestBehavior);
        }
        return Json(true, JsonRequestBehavior.AllowGet);
    } 
```

基本上，用户名字段调用 IsUsernameAvailable 方法。验证触发并调用该方法，但变量“用户名”每次都有一个空值，因此验证始终为真。有任何想法吗？

编辑：这是用户名字段

```
 [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_Username", DbType="NVarChar(50) NOT NULL", CanBeNull=false)]
    [Required(ErrorMessage="El nombre de usuario es requerido.")]
    [Remote("IsUserNameAvailable", "Validation")]
    public string Username
    {
        get
        {
            return this._Username;
        }
        set
        {
            if ((this._Username != value))
            {
                this.OnUsernameChanging(value);
                this.SendPropertyChanging();
                this._Username = value;
                this.SendPropertyChanged("Username");
                this.OnUsernameChanged();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:51:15.347

您是否尝试指定前缀：

```
public ActionResult IsUserNameAvailable([Bind(Prefix="Item1")] string username)
{
    ...
} 
```

# java - 检查输入树的有效路径（字符串）时遇到问题

> ID：10391049
> 
> 赞同：0
> 
> 时间：2012-04-30T21:49:05.737
> 
> 标签：java, recursion, treenode, tree-nodes

我创建了一个 TreeNode 类，它包含一个树节点（命名分支）的 ArrayList，我想通过用户输入的路径将新分支添加到树中。一个示例路径是 /Monkey/King/Bar，其中每个路径理想情况下都是现有分支，最后一个除外（Bar 将是我想添加到 King 的分支）。Temp 是一个全局变量，我用于将新分支添加到树中，并且通过递归，我试图沿着路径向下移动，以验证每个分支是前一个分支的子分支，但我在让它工作时遇到了一些麻烦。这是我到目前为止所拥有的，并且想知道当我重新声明临时 TreeNode 时它是否与不设置父级有关。任何帮助将不胜感激，如果我所说的任何内容过于模糊，请要求澄清。

```
TreeNode tree = root;
boolean valid = false;
String y = x; //User entered path
for (int i = 0; i < x.length(); i++)
{
  if (x.charAt(i) == '/')
  {
      for (int j = 0; j < tree.branch.size(); j++){
        if (tree.branch.get(j).toString().equals(y)){
            System.out.println(temp.value);
            tree = tree.branch.get(j);
            temp = tree;
            valid = true;
        }
        else
          valid = false;
      }
      y = "";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:02:15.807

如果路径存在或类似的东西，您似乎正在尝试遍历树并在末尾添加一个节点（或分支）？

我认为问题主要在于您如何处理字符串，而不是节点。你实际上并没有得到路径的一部分，你正在做整个字符串，然后什么都没有。

首先，以这种方式处理字符串的更好方法是使用 String.split

```
String[] pathparts = String.split("/"); 
```

接下来，您需要知道它是否是字符串的一部分

```
for(int i=0;i<pathparts.length-1;i++){ // we don't want the last string
     // your code with .get(pathparts[i]) 
} 
```

如果我对您所做的事情的评估是正确的，那么您似乎正在正确处理其余代码。

# asp.net - 允许匿名用户浏览样式和图像文件夹

> ID：10391053
> 
> 赞同：3
> 
> 时间：2012-04-30T21:49:24.910
> 
> 标签：asp.net, configuration, web-config, web

我正在编写一个 ASP.NET Web 应用程序。

我有一个登录屏幕，上面有一些 CSS 样式和图像。我遇到了样式和图像未显示的问题。我在网上阅读，它说我需要一个 web.config 在我的 Content 文件夹中。我在 web.config 中添加了以下内容：

```
<configuration>
  <system.web>
    <authorization>
      <allow users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

这似乎在我的本地机器上工作。但是，当我发布到服务器上的 inetpub 时，它不起作用。

这是我的文件夹结构：

Login/Login.aspx - 我的登录屏幕
Content - 这是我的根内容文件夹
Content/Styles - 这是我的 CSS 所在的位置
Content/Images - 这是我的图像存储位置

我也尝试将相同的 web.config 放在 Styles 和 Images 中，但这也不起作用。

任何帮助，将不胜感激。

**更新：**

这是我在主 web.config 中与用户访问相关的内容：

```
<location path="Content">
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location> 
```

**更新 2：** 除了连接字符串信息之外，这是我的根 web.config 中的所有内容：

```
<system.web>
<httpRuntime requestValidationMode="2.0"/>
<compilation debug="true" targetFramework="4.0"/>
<sessionState cookieless="UseCookies"/>
<authentication mode="Forms">
  <forms name="CMS" loginUrl="Login/Login.aspx" timeout="25" slidingExpiration="true"/>
</authentication>
<authorization>
  <deny users="?"/>
</authorization>
<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
  </providers>
</membership>
<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
  </providers>
</profile>
<roleManager enabled="false">
  <providers>
    <clear/>
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/"/>
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/"/>
  </providers>
</roleManager>
</system.web>
<location path="Content" allowOverride="false">
<system.web>
   <authorization>
     <allow users="*" />
   </authorization>
 </system.web>
</location>
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

这里会不会有干扰用户访问的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:12:59.763

在这里查看我的[答案](https://stackoverflow.com/questions/10125220/asp-net-login-looks-different-when-i-debug-and-deploy/10125825#10125825)。有些人会建议将 web.config 文件放在要向公众开放的文件夹中，但我更喜欢从根 web.config 元素监视所有内容。基本上，您将已经拥有的相同片段插入到网站根目录的 web.config 文件中。不要忘记“allowOverried=false”属性。:)

真正棘手的事情是正确的道路。确保你做*对*了！:)

```
<location path="Path to your folder" allowOverride="false">
   <system.web>
      <authorization>
         <allow users="*"/>
      </authorization>
   </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T21:38:17.000

我意识到这是一个老问题，但我遇到了同样的麻烦，希望这对某人有所帮助。

就我而言，我必须更改*IIS 中的身份验证设置*才能使其正常工作。这听起来像是将其移至默认配置可能不同的远程服务器后发生的情况。

我们默认启用了**Windows 身份验证**模式，但是当*web.config*指定**Forms Authentication**时，它实际上会在 IIS 配置中启用它们。

使用你的 web.config，你有这样的东西

```
<system.web>
    <authentication mode="Forms">
        <forms name="CMS" loginUrl="Login/Login.aspx" timeout="25" slidingExpiration="true"/>
    </authentication>
    <authorization>
      <deny users="?"/>
    </authorization>
    <!-- ...etc... -->
</system.web> 
```

如果您移动到的服务器启用了 Windows 身份验证，它在 IIS 中将如下所示

![在此处输入图像描述](../Images/d66cbee5a5ee73cd2791eb4ae832e671.png)

请注意，尽管您的配置仅显示了 Forms，但 Forms 和 Windows 都已启用。这将破坏您在子目录中添加的 web.config 文件。

当您的 Content 文件夹中有以下内容时，它似乎与 Windows vs Forms 有冲突，无论您放什么，它似乎都不符合您的 web.config

```
<configuration>
  <system.web>
    <authorization>
      <allow users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

如果您处于同样的情况，请确保禁用 Windows 身份验证或任何其他未使用的身份验证模式，如下图所示。您还需要确保启用匿名以允许它对所有人开放。

希望这可以帮助某人。

![在此处输入图像描述](../Images/f20a33ebaff3f2b5df0969ada98a9f7f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T21:59:55.247

基本上，您希望允许任何用户访问 Content 文件夹中的文件。

将此添加到您的主 web.config：

```
<location path="Content">
        <system.web>
            <authorization>
                <allow users="*" />
            </authorization>
        </system.web>
    </location> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-22T22:27:26.513

通过记录对我的案例有帮助的方式： [这个讨论很有用](https://stackoverflow.com/questions/10512053/css-images-js-not-loading-in-iis)

*   我有另一个没有问题的应用程序，唯一的区别是IUSR在文件夹中有权限。添加IUSR权限有帮助
*   在浏览器中使用“检查”来显示控制台可以清楚地显示文件何时无法访问（否则本地缓存会掩盖结果）
*   如上所述，我尝试在各个级别使用 web.configs，但这些解决方案对我不起作用。

# sql - sql - 检查 COMPOSITE 键的唯一性

> ID：10391054
> 
> 赞同：6
> 
> 时间：2012-04-30T21:49:29.200
> 
> 标签：sql, primary-key, unique, composite-primary-key

有人可以帮我解决我遇到的这个困难吗？

我想检查一些数据是否有效，所以验证的一小部分包括实体完整性，我检查我的主键是否唯一

```
SELECT order_id, COUNT(order_id)
FROM temp_order
GROUP BY order_id
HAVING ( COUNT(order_id) > 1 ) 
```

在这种情况下，order_id 是主键。此查询工作正常。

问题：

我现在有另一个表 temp_orditem，它有一个由 2 个字段组成的复合主键：order_id、product_id。

如何检查主键是否唯一（即两个字段的组合）？我可以执行以下操作吗？

```
SELECT order_id, product_id, COUNT(order_id), COUNT(product_id)
FROM temp_order
GROUP BY order_id, product_id
HAVING ( COUNT(order_id) > 1 AND COUNT(product_id)>1) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T21:53:50.137

我只想写这个：

```
SELECT order_id, product_id, COUNT(*) AS x
FROM temp_order
GROUP BY order_id, product_id
HAVING x > 1 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-30T21:53:55.333

这是您需要的查询：

```
select order_id, product_id, count(*)
from temp_order
group by order_id, product_id
having count(*) > 1 
```

# iphone - 为什么我的 UINavigationController 在发布配置时崩溃？

> ID：10391063
> 
> 赞同：1
> 
> 时间：2012-04-30T21:50:27.737
> 
> 标签：iphone, ios, uinavigationcontroller

我需要删除堆栈中的前一个视图控制器。我过去成功使用过这种方法，没有任何问题：

```
NSMutableArray *vcs = [NSMutableArray arrayWithArray:self.navigationController.viewControllers];
    BOOL removedFlag = YES;
    while (removedFlag == YES)
    {
        removedFlag = NO;
        for (UIViewController *vc in vcs)
        {
            if( ![vc isKindOfClass:[self class]] && ![vc isKindOfClass:[MenuVC class]] )
            {
                [vcs removeObject:vc];
                removedFlag = YES;
                break;
            }
        }
    }
    [self.navigationController setViewControllers:[NSArray arrayWithArray:vcs]]; 
```

现在我正在更新应用程序，它在发布配置时神秘地崩溃了，而不是在调试时。此外，在调试模式下没有任何警告。我认为 SDK 发生了一些变化。它以前从未这样做过。

我提供了一个示例项目：http: [//dl.dropbox.com/u/7834263/RemoveTest.zip](http://dl.dropbox.com/u/7834263/RemoveTest.zip)

这是一个启用 ARC 的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:00:28.333

第一行实际上应该是：

```
NSMutableArray *vcs = [self.navigationController.viewControllers mutableCopy]; 
```

NSMutableArray 是 NSArray 的子类。`arrayWithArray`是 NSArray 类的一个方法——它创建一个不可变数组。该`mutableCopy`方法创建原始数组的可变副本。你从来没有真正应该能够调用`removeObject`你的 vcs 数组，因为它实际上从来不是一个 NSMutableArray——它是一个 NSArray。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:16:48.123

删除堆栈中前一个 viewController 的简单方法是：

```
 int vcIdx=[self.navigationController.viewControllers indexOfObject:self]-1;
 NSMutableArray *vControllers = [[NSMutableArray alloc] initWithArray:self.navigationController.viewControllers]; 
 [vControllers removeObjectAtIndex:vcIdx]; 
 self.navigationController.viewControllers=vControllers; 
```

# c# - 在 ListView 中显示数据库中的多个列

> ID：10391066
> 
> 赞同：1
> 
> 时间：2012-04-30T21:50:30.103
> 
> 标签：c#, database, listview

我不确定为什么这不起作用。我正在尝试在表单的列表视图框中并排显示数据库中的 2 列。当我使用它时，它不会正确显示任何数据。

```
 ("SELECT Person FROM tblPeople" + " SELECT Occur FROM tblpeople" , conn);  

try
{
    SqlDataReader reader = cmd.ExecuteReader();

    while (reader.Read())
    {
       listView1.Items.Add(reader["People"].ToString());
       listView1.Items.Add(reader["Occur"].ToString()); 
    } 
```

所以我正在寻找我的数据显示如下：

```
 John   3
    James  4
    Frank  1 
```

由于名称来自“人员”列，而数字来自“发生”列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:02:28.257

要获得所需的效果，您应该将视图样式设置为`Details`并将第二列值添加为子项。

基本上，你应该这样做：

```
 listView1.View = View.Details;

  listView1.Columns.Add("People");
  listView1.Columns.Add("Occur");

  while (reader.Read())
  {
      var item = new ListViewItem();
      item.Text = reader["People"].ToString();        // 1st column text
      item.SubItems.Add(reader["Occur"].ToString());  // 2nd column text
      listView1.Items.Add(item);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T21:59:14.157

方法 Add() 每次将新项目添加到集合中。如果您的项目包含来自两个对象的值，最简单的方法可能是创建一个新项目来封装它，这样您就可以轻松地将它绑定到您的控件。

考虑这样的事情：

```
public class MyNewObject
{
    public string People { get;set; }
    public string Occur { get;set; }

    public MyNewObject(string p, string o)
    { 
        People = p;
        Occur = o;
    }
} 
```

然后就

```
while (reader.Read())
{
    listView1.Items.Add(new MyNewObject(reader["People"].ToString(),reader["Occur"].ToString()));
} 
```

# asp.net-mvc - 为什么这个完整的jQuery回调没有执行

> ID：10391068
> 
> 赞同：1
> 
> 时间：2012-04-30T21:50:35.363
> 
> 标签：asp.net-mvc, jquery, jquery-callback

OnCompleteStuff 永远不会被调用，我做错了什么？

```
 <script type="text/javascript">

        function OnBeginStuff() {
            $("#StuffPanel").fadeTo("slow", 0.50);
        }
        function OnCompleteStuff(request, status) { // Never called
            $("#StuffPanel").fadeTo("slow", 1.00);
        }

        $(document).ready(function () {

            $('.mainLink', $('#NavigationPanel')).click(function (e) {
                e.preventDefault();
                $.ajax({
                    url: $(this).attr('href'),
                    beforeSend: OnBeginStuff,
                    complete: OnCompleteStuff,
                    success: function (html) {
                        $('#StuffPanel').html(html);
                    }
                });
            });
        });
    </script>    
</head>
<body>
    <div id="NavigationPanel">
        @Html.ActionLink("1", "Index", "One", null, new { @class = "mainLink" })
        @Html.ActionLink("2", "Index", "Two", null, new { @class = "mainLink"  })
        @Html.ActionLink("3", "Index", "Three", null, new { @class = "mainLink" })    
    </div>
    <div id="StuffPanel">
        @RenderBody()
    </div>
</body>
</html> 
```

# ios - 在情节提要中将 loginView 放在哪里？

> ID：10391076
> 
> 赞同：0
> 
> 时间：2012-04-30T21:51:41.340
> 
> 标签：ios, storyboard, uistoryboard, xcode-storyboard

最新的 Xcode。iPhone 和 iPad 的故事板。生成具有两个选项卡视图的应用程序。我在故事板中看到了他们俩。

现在我想有一种情况，我希望在第一个选项卡之前弹出一个登录屏幕。这是我在故事板中所做的事情吗？还是我应该手动编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:26:34.427

你*可以*用故事板来做。一种方法是让登录视图控制器成为情节提要中的初始场景。另一种方法是安排初始场景中的视图控制器在执行任何其他操作之前以编程方式呈现登录视图控制器。

故事板和 .xib 文件是用于创建您想要的任何用户界面的工具，无论是登录屏幕还是其他。如果它们方便或以其他方式提供一些好处，请使用它们，如果其他东西更适合您，请随意跳过它们。

# qt - 将 QTQuick 与 haskell 一起使用

> ID：10391080
> 
> 赞同：9
> 
> 时间：2012-04-30T21:52:08.967
> 
> 标签：qt, haskell

在我看来，qthaskell 没有被积极开发/被放弃。

它支持 QtQuick 吗？

是否有支持 qt 5 的计划/任何开发？

有没有人将 qt 与 haskell 一起使用，或者 gtk2hs 是当前最喜欢的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T22:03:39.957

QtHaskell 支持 Qt 4.6，因此支持 QtQuick，至少是早期的灯塔构建版本。请注意，这个版本的 QtQuick 与当前的 QtQuick 版本完全不同；大多数元素和属性具有完全不同的名称。

正在积极维护 GTK 对 Haskell 的支持。正如您亲眼所见，Qt 并非如此。主要原因之一是GHC不能自行导入国外的C++代码；您需要生成包装器 C 代码，然后由 GHC 调用，并且没有将 C++ 代码包装为 C 的通用方法，因此在这种情况下必须为 C++ 开发一个新工具。因此，Haskell 中 GUI 库的“当前最爱”是 GTK 和 WxWidgets。

在 Haskell 中使用 Qt 会非常有趣，例如因为 Qt 套接字系统可用于链接到 FRP（功能响应式编程）库，并且因为 Qt 具有非常透明的引用并且支持不可变数据结构的接口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T10:20:53.047

实际上有一个库可以使用 Haskell 的 Qt Quick，尽管我自己（还没有）尝试过：

[http://hackage.haskell.org/package/hsqml-0.1.1](http://hackage.haskell.org/package/hsqml-0.1.1)

[http://www.gekkou.co.uk/software/hsqml/](http://www.gekkou.co.uk/software/hsqml/)

[http://www.haskell.org/pipermail/haskell-cafe/2012-September/103350.html](http://www.haskell.org/pipermail/haskell-cafe/2012-September/103350.html)

目前维护，最新版本在 2012 年 9 月。还有一个演示程序发布在 hackage 上。

该版本尚不支持从 Haskell 代码发出 Qt 信号，但是有一个分支应该提供该功能： [https ://github.com/travitch/hsqml](https://github.com/travitch/hsqml)

但是这个 fork 似乎比原来的包维护得少，而且原来的包的作者表示他打算在未来添加这个功能（并且在 Qt5 可用时也支持它）。

**UPDATE**现在愉快地使用这个库，虽然它没有得到太多的牵引力，但它对我来说非常有用。

# mongodb - 标签搜索的数据存储解决方案

> ID：10391083
> 
> 赞同：5
> 
> 时间：2012-04-30T21:52:49.093
> 
> 标签：mongodb, search, solr, nosql

我有数以百万计的项目按预先计算的分数排序。每个项目都有许多布尔属性。假设总共有大约一万个可能的属性，每个项目都有十几个。

我希望能够**实时**（几毫秒）请求给定的前 n 个项目〜任何属性组合。

你会推荐什么解决方案？我正在寻找极具可扩展性的东西。

---
我们目前正在研究*mongodb*和数组索引，您是否看到任何限制？
- *SolR* 是一种可能的解决方案，但我们不需要文本搜索功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T07:05:57.823

如果您像这样存储对象，Mongodb 可以处理您想要的

```
{ score:2131, attributes: ["attr1", "attr2", "attr3"], ... } 
```

然后下面的查询将匹配所有具有att1和attr2的项目

```
c = db.mycol.find({ attributes: { $all: [ "attr1", "attr2" ] } }) 
```

但这不匹配

```
c = db.mycol.find({ attributes: { $all: [ "attr1", "attr4" ] } }) 
```

查询返回一个游标，如果您希望对该游标进行排序，则只需将排序参数添加到查询中，如下所示

```
c = db.mycol.find({ attributes: { $all: [ "attr1", "attr2" ] }}).sort({score:1}) 
```

查看[高级查询](http://www.mongodb.org/display/DOCS/Advanced+Queries)以了解可能的情况。

适当的索引可以设置如下

```
db.mycol.ensureIndex({attributes:1, score:1}) 
```

您可以使用获取性能信息

```
db.mycol.find({ attributes: { $all: [ "attr1" ] }}).explain() 
```

Mongo 解释了扫描了多少对象、操作花费了多长时间以及其他各种统计数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T03:53:55.637

这正是Mongo可以处理的。您的属性是布尔类型的事实在这里有所帮助。下面列出了一个可能的模式：

```
[
    {
        true_tags:[attr1, attr2, attr3, ...],
        false_tags: [attr4, attr5, attr6, ...]
    },
] 
```

然后我们可以索引**true_tags**和**false_tags**。并且使用 $in, $all, ... 查询运算符进行搜索应该是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T05:52:25.877

Redis 将是一个完美的候选者

*   *“按分数排序的数百万个项目”的“前 n 个项目”*

Redis 有一个内置的数据结构，您可以从它开始：`Sorted Set`=> 排序集的每个成员都与分数相关联。例如，可以使用[ZRANGEBYSCORE](http://redis.io/commands/zrangebyscore)按分数排名：

```
ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count] 
```

我鼓励您查看 Sorted Set[命令](http://redis.io/commands#sorted_set)并了解 Redis，因为您的问题（如前所述）要求它。您当然可以在单个 Set 元素中保留任意数量的属性。

* * *

至于 MongoDB，既然您提到了数百万，除非您可以弯曲增量查询来解决您的问题，否则我*不会*期望亚秒级的响应。

正如@nickdos 提到的，Solr Relevancy 是一个非常强大的功能，但是属性的数量*将*是一个问题，因为它需要将所有这些属性保存在每个项目的内存中。虽然每个人打一打可能没那么糟糕 => 试试看。

# java - 我们如何在博客项目的 Jsf 中做“点赞”系统？

> ID：10391088
> 
> 赞同：0
> 
> 时间：2012-04-30T21:53:05.083
> 
> 标签：java, jsf, button

我在 JSF 中做博客系统。我有一个类似于 Facebook 的“点赞”系统的想法。我想在这个博客中做我自己的这样的系统。由于标签，我遇到了问题。我的意思是，当用户单击“赞”按钮时，页面正在刷新。我该如何解决？这是我的 JSF 代码：

```
<ui:repeat value="#{blogPost.queryPosts}" var="post">
    <div style="border:1px;border-color: #333;" >
        <li><h1>#{post.title}</h1></li>
        <li><h:outputText value="#{post.content}" escape="false" /> </li>
        <li>Like :<h:button value="Like" onclick="#{likePost.like2Post(post.id)}" title="Like" />
        </li>
        <li>reBlog</li>
        <li>Comments:</li>
    </div>
</ui:repeat> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:58:14.810

按钮上的 onclick 属性是调用客户端 javascript 的 DHTML 事件属性。如果您需要进行表单提交。像这样使用：

```
<h:commandButton value="Like" action="#{likePost.like2Post(post.id)}" /> 
```

而要传递一个参数，你需要有 el-api-2.2.jar 和 el-impl-2.2.jar。有关更多选择，请参阅此[答案](https://stackoverflow.com/questions/3599948/jsf2-action-parameter)。

而且

```
<h:button> 
```

用于 GET 请求。

```
<h:commandButton> and <h:commandLink> are used to generate POST requests. 
```

# java - 如何挂钩到内部 Eclipse 浏览器？

> ID：10391090
> 
> 赞同：1
> 
> 时间：2012-04-30T21:53:26.980
> 
> 标签：java, eclipse, eclipse-plugin

对于我的 Eclipse 插件，我想跟踪使用内部（如果可能还有外部）Eclipse 浏览器打开的每个 URL。

到目前为止，我使用

```
org.eclipse.swt.browser.Browser; 
```

和

```
addLocationListener(...) 
```

但我更希望它也适用于内部 Eclipse 浏览器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:24:08.323

Eclipse 内部浏览器的一种可能解决方案是创建一个注册 IStartup 扩展的 Eclipse 插件。在您的 earlyStartup() 方法中，您将在 workbenchPage 上注册一个 IPartListener。然后在创建内部浏览器部件时，您将收到一个回调，其中包含对 WebBrowserEditor（或 WebBrowserView）的引用。由于没有直接的 API，您将不得不稍微修改一下并使用反射来获取内部 SWT 浏览器实例。一旦你有了它，你可以添加你的位置监听器。

有时在早期启动期间还没有活动的 Workbench 窗口，因此您必须遍历所有现有的 Workbench 窗口（通常只有一个）及其每个 Workbench 页面以添加部分侦听器。

这是 earlyStartup() 例程的代码片段。请注意，我在处理窗口/页面期间省略了任何侦听器的清理，因此仍然需要完成。

```
//Add this code to an IStartup.earlyStartup() method
final IPartListener partListener = new IPartListener() {
    @Override
    public void partOpened(IWorkbenchPart part) {
        if (part instanceof WebBrowserEditor)
        {
            WebBrowserEditor editor = (WebBrowserEditor) part;

            try {
                Field webBrowser = editor.getClass().getDeclaredField("webBrowser");
                webBrowser.setAccessible(true);
                BrowserViewer viewer = (BrowserViewer)webBrowser.get(editor);

                Field browser = viewer.getClass().getDeclaredField("browser");
                browser.setAccessible(true);
                Browser swtBrowser = (Browser) browser.get(viewer);

                swtBrowser.addLocationListener(new LocationListener() {
                    @Override
                    public void changed(LocationEvent event) {
                        System.out.println(event.location);
                    }
                });
            } catch (Exception e) {
            }
        }
        else if (part instanceof WebBrowserView)
        {
            WebBrowserView view = (WebBrowserView) part;

            try {
                Field webBrowser = editor.getClass().getDeclaredField("viewer");
                webBrowser.setAccessible(true);
                BrowserViewer viewer = (BrowserViewer)webBrowser.get(view);

                Field browser = viewer.getClass().getDeclaredField("browser");
                browser.setAccessible(true);
                Browser swtBrowser = (Browser) browser.get(viewer);

                swtBrowser.addLocationListener(new LocationListener() {
                    @Override
                    public void changed(LocationEvent event) {
                        System.out.println(event.location);
                    }
                });
            } catch (Exception e) {
            }
        }
    }
    ...
};

final IPageListener pageListener = new IPageListener() {
    @Override
    public void pageOpened(IWorkbenchPage page) {
        page.addPartListener(partListener);
    }
    ...
};

final IWindowListener windowListener = new IWindowListener() {
    @Override
    public void windowOpened(IWorkbenchWindow window) {
        window.addPageListener(pageListener);
    }
    ...
};

IWorkbenchWindow activeWindow = PlatformUI.getWorkbench().getActiveWorkbenchWindow();

if (activeWindow != null)
{
    IWorkbenchPage activePage = activeWindow.getActivePage();

    if (activePage != null)
    {
        activePage.addPartListener(partListener);
    }
    else
    {
        activeWindow.addPageListener(pageListener);
    }
}
else
{
    for (IWorkbenchWindow window : PlatformUI.getWorkbench().getWorkbenchWindows())
    {
        for (IWorkbenchPage page : window.getPages()) {
            page.addPartListener(partListener);
        }
        window.addPageListener(pageListener);
    }

    PlatformUI.getWorkbench().addWindowListener(windowListener);
} 
```

关于此代码片段的最后一个细节是，它需要依赖 org.eclipse.ui.browser 插件才能访问 WebBrowserEditor 类。

# java - 如何针对单/多线程进行调整？

> ID：10391094
> 
> 赞同：2
> 
> 时间：2012-04-30T21:54:02.807
> 
> 标签：java, multithreading

我有一个基本上有两种方法的类，第一种方法采用字符串（文件名）和线程：

```
public static void readFile(String s, Thread t){
    Runnable read = new Runnable() {
      public void run() {
          //SOME CODE

}
        t = new Thread(read);
    t.start();

} 
```

第二种方法是一个主要方法，它要求用户输入，然后使用该输入来设置一些东西（比如线程数是否只有一个，或者它是否等于列表中的对象数）。

```
public static void main(String[] args){
  //SOME CODE

  for(Object x: ListOfObjects){
  //t1 is the same thread each time if one thread requested, otherwise t1 is a different thread each time
  readFromFile(textFileString, t1);
  //SOME CODE
} 
```

如果用户要请求 5 个线程（列表中的 5 个项目），如何修改上述内容？目前，我的 main 方法有一个循环（用于列表中的项目数），然后为循环中的每次迭代调用第一个方法。有没有办法获取用户请求的线程数，并在第一个方法中一次性启动/启动它们，而不是一次一个并调用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:03:18.070

实现 Runnable 接口。我试过这个，它似乎工作：

```
class StringThread implements Runnable
{
    private String str;
    private int num;

    StringThread(String s, int n)
    {
        str  = new String (s);
        num =n; 
    }

    public void run ( )
    {
        for (int i=1; i<=num; i++)
            System.out.print ("THREAD NAMED: " + str+"  I IS: " +
                                               i + "\n"); 
    }
}

//IN the main program:

StringThread t1 = new StringThread ("THR-1",100);
new Thread(t1). start ( );    
StringThread t2 = new StringThread ("THR-2",200);
new Thread(t2). start ( ); 
```

# android - android将自定义背景颜色设置为Theme.Holo.Light主题应用程序的window标题

> ID：10391097
> 
> 赞同：1
> 
> 时间：2012-04-30T21:54:30.587
> 
> 标签：android, light, android-theme

我正在尝试使用以下 xml 将自定义背景颜色设置为 Theme.Holo.Light 应用程序的标题。但它不起作用。

Theme.Holo.Light 以某种方式覆盖@style/WindowTitleBackground

如果我将父级设置为 android:Theme，它工作正常。我想拥有 Halo.Light 主题，但背景不同。我已经看过自定义背景布局示例，但在我学习的过程中，我不想深入讨论。

任何帮助表示赞赏。谢谢

```
<style name="theme" parent="android:Theme.Holo.Light">
    <item name="android:windowNoTitle">false</item>
    <item name="android:windowTitleBackgroundStyle">@style/WindowTitleBackground</item> 
</style>
<style name="WindowTitleBackground">     
    <item name="android:background">#000000</item>                   
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-10T07:01:35.060

使用`android:background`的时候必须是drawable资源，所以直接使用**#ff234562**这样的值是无效的，实际上应该先在**colors.xml**中定义值，然后这样使用

```
<item name="android:background">@color/green</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:05:11.157

似乎 Android 使用位图来表示该值（@null 或 @android:drawable/title_bar）。

尝试创建一个黑色 png 并使用它而不是颜色代码：

```
<style name="WindowTitleBackground">     
    <item name="android:background">@drawable/black</item>                   
</style> 
```

# web-services - Salesforce - Web 服务响应的数据类型

> ID：10391098
> 
> 赞同：0
> 
> 时间：2012-04-30T21:54:42.320
> 
> 标签：web-services, soap, salesforce, apex-code

我试图执行/使用 web 服务，并想知道我是否使用正确的数据类型来返回结果。字符串似乎有效，但我收到一个空字符串。该服务应该返回一个没有 XML 的简单字符串值。下面有一个用 JS 编写的工作版本，我被要求在 Apex 中重新创建它。

JS 版本（工作中） - 单击按钮时执行

```
{!REQUIRESCRIPT("/soap/ajax/24.0/connection.js")}
{!REQUIRESCRIPT("/soap/ajax/24.0/apex.js")}
var xfolder = "TestFolder"
var parentid = "22K22"
var myvar = sforce.apex.execute("myWS","invokeWs", {folderName:xfolder,ObjectID:parentid});
window.alert('LiveLink folder created: ' + myvar); 
```

APEX 版本（不工作）

```
public with sharing class myTest {

    public String getWSXMLResult() {

        String tmpFolderName2 = 'TestFolder';
        String tmpObjectID2 = '22K22';
        String myWSXMLResult = myWS.invokeWs(tmpFolderName2,tmpObjectID2);

        System.debug('XIXWS|' + myWSXMLResult);
        return myWSXMLResult;
    }
} 
```

我在打字时刚刚注意到的一件事。我没有指定 invokeWs 的参数名称，只是值..我需要在调用 WS 时指定这些值吗？如..

```
myWS.invokeWs(folderName=tmpFolderName2,ObjectID=tmpObjectID2); -- this errors out btw 
```

再次感谢大家。

# actionscript-3 - 在 ActionScript 3.0 上强制方法序列

> ID：10391100
> 
> 赞同：0
> 
> 时间：2012-04-30T21:54:51.443
> 
> 标签：actionscript-3, apache-flex, sequence, synchronous

我在 Flex/ActionScript 上遇到异步序列问题。这是一个例子：

```
private function start():void{
    _menu = new MyMenu();
    _screen.addElement(_menu);
    //Here, some Mouse Event Listener to Menu Click
} 
```

现在，让我们假设发生了对菜单的单击。

```
private function menuClick(event:Event):void{
    removeMenu();
    addMenu(event.SomethingPassedByTheClick);
} 
```

现在，忘记事件处理程序的错误，让我们想想过程，好吗？我的问题是有时 addMenu() 在 removeMenu() 之前完成，这会导致错误。上面的脚本只是我的问题的逻辑表示，而不是真正的脚本。为了升起，我需要能够定义方法 addMenu() 必须等待 removeMenu() 在被调用之前完成。有什么想法吗？感谢您的关注。

编辑：

我的问题的一个更准确的例子：

```
private function createComplete():void{
       _screenArray = new Array(
                new Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
                new Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
                new Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0));
       startUp();
}

private function startUp():void{
    //Some mathematical calculations that changes a few 0 to 1's.
    addNewComponent();
}

private function addNewComponent():void{
    removeAllComponents();
    //More calculus on the array in order to create a component in vague space.
    addComponentOnCalculatedArea(x, y);
    //here is my problem: Sometimes, add Method is called before the removeAllComponents, which causes the new added component be removed by the removeAllComponents() method.
} 
```

谢谢大家。我有错误的前提。我的数学计算出了什么问题，而不是调用方法的顺序。我注意到通过在脚本的每个方法中添加 trace() 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:01:30.680

您应该根据组件生命周期来了解何时可用。在触发菜单对象的 creationComplete 事件之前，不要添加鼠标事件。

如果你不依赖于事件，你会遇到很多异步问题。这是异步应用程序的基础！

最重要的是，当事情完成时，您应该设置标志。如果在 addMenu 完成之前永远不允许评估 removeMenu 至关重要，那么您应该执行以下操作：

```
private function start():void{
    _menu = new MyMenu();
    _menu.addEventListener(FlexEvent.CREATION_COMPLETE, eventHandler);
    _screen.addElement(_menu);
}

private function eventHandler(...rest):void{
    _menuCreated = true;
    _menu.removeEventListener(FlexEvent.CREATION_COMPLETE, eventHandler);
}

private function menuClick(event:Event):void{
    if(!_menuCreated){
        return;
    }

    removeMenu();
    addMenu(event.SomethingPassedByTheClick);
} 
```

类似的东西。

您还提到了有关等待 RemoveMenu 的 AddMenu。虽然 as3 是异步的，但它也是单线程的。您不会同时评估多个函数。当 RemoveMenus 运行时，AddMenu 不会。

为了使这一点更清楚，假设我们这样做：

```
 private function doFirst():void{
        trace("first");
    }

    private function doSecond():void{
        trace("second");
    }

    private function doThings():void{
        doFirst();
        doSecond();
    } 
```

`doThings`在此示例中，无论需要多长时间，如果您调用，它总是会打印“first”然后是“second” `doFirst`。如果`doFirst`有一个无限的while循环，没有什么会破坏它的流控制，它会停止整个应用程序。

现在，如果`doFirst()`调度一些事件并且需要异步执行某些事情，那么它调度的事情可能会在函数`doSecond`完成之后发生，但不会发生。`doFirst`如果是这种情况，您应该注册一个事件侦听器，`doSecond`以便在所有工作`doFirst`完成后触发。

就像我还提到的那样，您可以在需要执行的工作的事件处理程序中设置标志，然后您可以使组件的属性无效。这将调用`commitProperties`，您可以在那里执行下一个项目。

检查[http://livedocs.adobe.com/flex/3/html/help.html?content=ascomponents_advanced_3.html](http://livedocs.adobe.com/flex/3/html/help.html?content=ascomponents_advanced_3.html)和[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core /UIComponent.html#commitProperties](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#commitProperties) () 这些链接解释了组件的异步生命周期以及如何处理异步设置属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:16:06.490

我同意 devshorts 的回答，但在最后一个函数中我也会添加一个回调：

```
private function menuClick(event:Event):void{
    if(!_menuCreated){
        return;
    }
    removeMenu.addlistener(someCompleteEvent, menuRemoved);  // Don't add until you are sure.
}

private function menuRemoved (SomethingPassedByTheClick: ClickEvent): void{
    addMenu(event.SomethingPassedByTheClick);
} 
```

这将有助于在添加新菜单之前验证菜单删除是否完成。

# ios - 在 iOS 中缩放 Web 图像

> ID：10391103
> 
> 赞同：1
> 
> 时间：2012-04-30T21:54:57.463
> 
> 标签：ios, image, scaling

我设法将我的应用程序设置为从网络下载图像到其中，但图像被裁剪。有谁知道一种即时缩小规模的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T01:20:12.747

粘贴您的代码以便我们为您提供帮助，至少粘贴 viewController.h 和 viewController.m。

或者从教程站点获取一个工作模型并根据您的需要对其进行修改。试试这个我做的例子，看看它是否对你有帮助[http://iossentials.com/2012/04/29/building-an-ios-app-to-load-an-image-from-internet-and-resize -it-使用-uiimage/](http://iossentials.com/2012/04/29/building-an-ios-app-to-load-an-image-from-internet-and-resize-it-using-uiimage/)

# node.js - 使用步骤（控制流库）和猫鼬的问题

> ID：10391106
> 
> 赞同：0
> 
> 时间：2012-04-30T21:55:08.300
> 
> 标签：node.js, mongoose, control-flow

如果我以正常方式查询集合中的所有文档，我没有问题：[https](https://gist.github.com/2562954) ://gist.github.com/2562954 。这个的输出是

```
found docs [] 
```

但是，如果我介绍 Step (https://github.com/creationix/step)，那么输出的不是文档数组：[https](https://gist.github.com/2562852) ://gist.github.com/2562852 。这个的输出是：

```
found docs { options: { populate: {} },
  safe: undefined,
  _conditions: {},
  op: 'find',
  model: [Function: Model] } 
```

这到底是怎么回事？我真的很想使用带有猫鼬的控制流库，但这让我发疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T01:16:45.683

尝试这个。我有一个类似的 Step 函数在工作。

注意：我不知道这是否是导致问题的原因，但是当您在咖啡脚本中执行此操作时，它会在之前添加“return”`models.Foobar.find({}).run(this);`

```
step(
  function getFoobar() {
    models.Foobar.find({}).run(this);
  }, function (err, docs) {
    console.log('found docs', docs);
    console.log('disconnecting');
    return mongoose.disconnect(this);
  }, function (err) {
    if (err) {
        throw err;
    }
    return console.log('disconnected');
}); 
```

# php - YouTube 没有显示为推荐人？

> ID：10391107
> 
> 赞同：3
> 
> 时间：2012-04-30T21:55:08.827
> 
> 标签：php, youtube, http-headers

我一直在跟踪我网站的引用者并将其存储为会话，以便在他们执行某些操作时在某些报告中使用。

为了获得推荐人，我只是这样做`$_SESSION["s1"] = $_SERVER["HTTP_REFERER"];`

它似乎适用于除 YouTube 之外的所有内容。单击 YouTube 上的链接会生成一个空白引荐来源网址。什么可能导致这种情况？YouTube 会对标题做些什么吗？打开一个新窗口会丢失推荐人信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-19T22:29:06.663

我今天遇到了同样的问题。尽管这个问题已有 5 年历史，但当我搜索原因时，它首先出现在 Google 上；所以我将在这里为其他偶然发现它的人回答它。

这个问题与 YouTube 没有太大关系，实际上是由浏览器引起的。`referer`当流量将协议从 HTTPS 切换到 HTTP 时，某些浏览器会删除标头。要维护`referer`标头，您必须将其链接到使用 HTTPS 作为其协议的 URI。

# c# - 确定是否在 WCF Soap 服务中传递了可选参数

> ID：10391108
> 
> 赞同：0
> 
> 时间：2012-04-30T21:55:13.040
> 
> 标签：c#, wcf, soap

我正在尝试确定是否将可选参数传递给了我的 WCF 服务。例如假设我有一个简单的输入对象，定义如下。

```
[DataContract]
public class TestObject
{
    [DataMember(IsRequired=false)]
    public int OptionalIntegerField { get; set; }
    [DataMember(IsRequired = false)]
    public bool OptionalBooleanField { get; set; }
    [DataMember(IsRequired = false)]
    public string OptionalStringField { get; set; }
} 
```

服务合同定义为

```
[OperationContract(Name = "TestMethod")]
void TestMethod(TestObject obj); 
```

如果我将 TestMethod 定义为

```
 public void TestMethod(TestObject obj)
    {
        Debug.WriteLine(obj.OptionalBooleanField);
        Debug.WriteLine(obj.OptionalIntegerField);
        Debug.WriteLine(obj.OptionalStringField);
    } 
```

我的问题是，如果我在没有指定输入参数的情况下对 TestMethod 进行 SOAP 调用，OptionalIntegerField 和 OptionalBooleanField（作为值类型）将设置为其默认值（0 和 false）。我需要确定是否传入了可选参数。

我的问题是处理这个问题的适当方法是什么？我正在考虑使我的 OptionalIntegerField 和 OptionalBooleanField 可以为空类型，但我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:06:46.890

假设您的引用类型也以相同的方式使用 null 的概念，其中 null 表示值不存在，可为 null 的值类型是指示值类型成员的可能性的完全可接受的方式。

# mysql - MySQL 1329 错误无数据 - 获取零行

> ID：10391109
> 
> 赞同：2
> 
> 时间：2012-04-30T21:55:21.927
> 
> 标签：mysql

我已经搜索过类似的内容，并且我发现了另一个与此类似的帖子，我遵循了我认为的后续内容，但我仍然看到一个问题。

我也一直在筛选 MySQL 手册，我这里的内容看起来是正确的。

```
DELIMITER $$

CREATE DEFINER=`perimUser`@`localhost` PROCEDURE `assignLOBId`()
BEGIN
    declare id, done INT default 0;
    declare name VarChar(45);

    declare lobCursor Cursor for Select idLineOfBusiness as id, name from LineOfBusiness;
    declare continue handler for not found set done = 1;

    OPEN lobCursor;

    my_loop: LOOP 
        FETCH lobCursor INTO id, name;

            IF done = 1 THEN
                CLOSE lobCursor;
                LEAVE my_loop;
            END IF; 

            insert into test values (id, name);
            UPDATE medium set idLOB = id where LOB = name;
            UPDATE low set idLOB = id where LOB = name;

    End LOOP my_loop;

END 
```

我已经运行了我用于游标的查询，它确实返回了 13 行。中表和低表都充满了大约 600 行的数据。每个 LOB 列中的 LOB 匹配值。使用的值创建业务线中的那些是从中低档产生的。

这里的目标是在我对中低数据进行标准化时多次使用这种模式。否则我会走捷径并创建一堆手动更新语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:02:32.480

我不太确定为什么你的光标没有按预期工作（你没有说你的`test`表是否填充了你期望的结果？），但在我看来你的过程只是实现了一个多表`UPDATE`（所以可能可以完全替换为以下内容）：

```
UPDATE LineOfBusiness
  LEFT JOIN medium ON LineOfBusiness.name = medium.LOB
  LEFT JOIN low    ON LineOfBusiness.name =    low.LOB
   SET medium.idLOB = LineOfBusiness.idLineOfBusiness
     ,    low.idLOB = LineOfBusiness.idLineOfBusiness 
```

# xml - USPS api - 使用 curl 和 codeigniter

> ID：10391110
> 
> 赞同：2
> 
> 时间：2012-04-30T21:55:26.160
> 
> 标签：xml, codeigniter, curl, shopping-cart, usps

我正在尝试为我在 codeigniter 中构建的购物车开发一个 USPS 费率计算器。我在从 USPS 测试服务器及其 api 获得成功响应时遇到问题。我已经打电话给我的问题，显然，他们不想为任何试图创建自定义解决方案的人提供任何支持。为了让它更加混乱，他们告诉我，我需要知道的所有内容都可以在他们的[Development Guide v3.pdf](https://www.usps.com/webtools/_pdf/Development-Guide-v3-1a.pdf)中找到，但他们在其中声明：

> ### 第 3 步：从测试服务器运行“预制”测试
> 
> 适用
> 
> 的 API：全部 下一步是测试您的 API 接口。作为注册的 API 用户，您已被授予访问 Shipping API 测试服务器的权限。***重要说明：测试服务器设置为仅接受预定义 XML 事务的子集，并返回本文档中提供的预定义 XML 响应。***
> 
> 如果您已经成功测试了您的 API 并且可以访问生产服务器，请跳过此步骤并继续执行第 5 步：从生产服务器运行“示例”。

这里的问题是它们没有提供任何“预定义 XML 事务的子集”，如所述。他们确实提供了测试样本，但它们似乎是为生产服务器设计的，您只能访问您在测试服务器上成功测试的乳清（在下面的脚本中，我有一个我尝试失败的样本）。因此，我参考了[USPS Rate Calculators v1-5-1.pdf](https://www.usps.com/webtools/_pdf/Rate-Calculators-v1-5.pdf)，它们为您提供了特定的测试交易样本。充其量，我会得到一个错误响应，说明：

```
<Error>
<Number>80040b1a</Number>
<Description>Authorization failure. You are not authorized to connect to this server.    </Description>
<Source>UspsCom:: DoAuth</Source>
</Error> 
```

我知道人们已经解决了这个问题，这里有一些与此类似的封闭问题，但没有一个显示解决方案。我的代码如下：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Usps_curl extends CI_Controller {

    public function index()
    {

        $devurl = "testing.shippingapis.com/ShippingAPITest.dll";
        $puburl = "https://secure.shippingapis.com/ShippingAPITest.dll";

        $service = "RateV4";

//      ALTHOUGH THE USPS DEV GUIDE V3 SAYS 

//      $xml = '<RateV4Request USERID="225XXXXX5943">
//      <Revision>2</Revision>
//      <Package ID="1">
//          <Service>PRIORITY</Service>
//          <Container>FLAT RATE BOX</Container>
//          <ZipOrigination>20012</ZipOrigination>
//          <ZipDestination>20007</ZipDestination>
//          <Pounds>1</Pounds>
//          <Ounces>0.0</Ounces> 
//          <Size>REGULAR</Size> 
//      </Package>
//      </RateV4Request>';

//  THIS IS AN EXACT EXAMPLE PROVIDED IN THE USPS DEV GUIDE V3 - BUT I BELIEVE IT IS ONE OF THE FOUR "CANNED" TEST FOR THE PRODUCTION SERVER

//$xml = '<AddressValidateRequest USERID="225XXXXX5943">
//          <Address ID="0">
//              <Address1></Address1>
//              <Address2>6406 Ivy Lane</Address2>
//              <City>Greenbelt</City>
//              <State>MD</State>
//              <Zip5></Zip5>
//              <Zip4></Zip4>
//              </Address>
//          </AddressValidateRequest>';

//      THIS IS THE SAMPLE CODE FROM USPS RATE CALCULATORS V1-5-1 PDF

        $xml = rawurlencode('<RateV4Request USERID="225XXXXX5943">
        <Revision>2</Revision>
        <Package ID="1ST">
        <Service>FIRST CLASS</Service>
        <FirstClassMailType>LETTER</FirstClassMailType>
        <ZipOrigination>44106</ZipOrigination>
        <ZipDestination>20770</ZipDestination>
        <Pounds>0</Pounds>
        <Ounces>3.5</Ounces>
        <Container/>
        <Size>REGULAR</Size>
        <Machinable>true</Machinable>
        </Package>
        <Package ID="2ND">
        <Service>PRIORITY</Service>
        <ZipOrigination>44106</ZipOrigination>
        <ZipDestination>20770</ZipDestination>
        <Pounds>1</Pounds>
        <Ounces>8</Ounces>
        <Container>NONRECTANGULAR</Container>
        <Size>LARGE</Size>
        <Width>15</Width>
        <Length>30</Length>
        <Height>15</Height>
        <Girth>55</Girth>
        <Value>1000</Value>
        <SpecialServices>
        <SpecialService>1</SpecialService>
        </SpecialServices>
        </Package>
        <Package ID="3RD">
        <Service>ALL</Service>
        <ZipOrigination>90210</ZipOrigination>
        <ZipDestination>96698</ZipDestination>
        <Pounds>8</Pounds>
        <Ounces>32</Ounces>
        <Container/>
        <Size>REGULAR</Size>
        <Machinable>true</Machinable>
        <ShipDate>13-Dec-2010</ShipDate>
        </Package>
        </RateV4Request>');

        $request = $devurl . "?API=" . $service . "&xml=" . $xml;

//      echo "<pre>";
//      print_r($request);
//      die;

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $request);
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_HTTPGET, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        $response = curl_exec($ch);
        curl_close($ch);

//      echo "<pre>";
//      print_r($response);
//      echo "</pre>";

    }
}

/* End of file usps_curl.php */
/* Location: ./application/controllers/usps_curl.php */ 
```

如您所见，我对各种字符串进行了注释和注释。我已经用 rawurlencode、urlencode 和未编码的方式尝试了每一个，但没有一个工作。任何帮助/建议将不胜感激！

我知道我必须接近，因为我有时会收到正确的错误消息，但我一定在这里遗漏了一些东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T18:01:03.933

该错误响应只是说明您未获得该 API 的身份验证。

我认为您需要使用他们提供的测试示例进行测试。一旦这些工作正常，您的 API 就可以工作，您可以访问生产 API。

```
curl_setopt( $ch , CURLOPT_SSL_VERIFYPEER , false );
curl_setopt( $ch , CURLOPT_SSL_VERIFYHOST , false ); 
```

为了忽略证书错误也很重要（USPS 在他们的示例代码中基本上做了同样的事情——他们将 ActiveX 对象设置为忽略证书错误）。

如果客户端不工作，PDF 还说使用您的浏览器。您可以执行此操作以查看您可以期望返回的内容。

我刚刚注册测试这个......似乎至少有一个例子被打破了。但是这个例子适用于我的浏览器：

```
http://testing.shippingapis.com/ShippingAPITest.dll?API=CityStateLookup&XML=<CityStateLookupRequest USERID="xxxxxxx"><ZipCode ID= "0"><Zip5>90210</Zip5></ZipCode></CityStateLookupRequest> 
```

（替换用户名）

```
<CityStateLookupResponse>
<ZipCode ID="0">
<Zip5>90210</Zip5>
<City>BEVERLY HILLS</City>
<State>CA</State>
</ZipCode>
</CityStateLookupResponse> 
```

例子是问题：您必须使用适当的测试服务器，具体取决于它是否是 SSL API。任何带有地址的东西都需要使用 SSL。因此，您必须将示例与 USPS 在注册电子邮件中提供的测试 URL 融合在一起。

无论如何，请查看上面的 URL 并让您的代码与您在浏览器中获得的输出相匹配。一旦这工作，告诉他们你是 LIVE，然后你将可以访问生产 URL 和价格查询 API。

# email - 可以从电子邮件地址确定基础电子邮件提供商吗？

> ID：10391111
> 
> 赞同：1
> 
> 时间：2012-04-30T21:55:30.197
> 
> 标签：email, calendar, email-validation, email-client

我们正在构建一个系统，它实际上是一个电子邮件/日历/联系人客户端。

用户将向我们提供他们的电子邮件地址密码（或其他身份验证，例如 oauth），我们将连接到他们的底层电子邮件系统。

“基础系统”包括：

*   微软交换/Office365
*   邮件
*   雅虎邮箱
*   苹果电子邮件
*   通用 IMAP

这些系统中的每一个在其 API 中都有细微的（而不是那么细微的）差异，尤其是在访问日历和联系人数据方面。因此，我们需要知道用户正在使用哪个提供者。

但我们宁愿不问用户。我们想自动解决（并且至少减少选择）。

我四处寻找已经实现但没有找到任何东西的东西。我知道这很可能是因为 Windows Phone 做得很好（只需输入用户名/密码，它就会做正确的事情）。

在我开始写自己的文章之前，我想确保如果有人已经以出色的方式完成它，我不会浪费我的时间。

知道这样的事情吗？对于这个项目，首选 C#/.NET。

[编辑：添加潜在算法]

## 潜在算法：

*   给定电子邮件地址和密码
    *   从电子邮件地址中提取域名
    *   尝试 Exchange 自动发现。如果成功完成。
    *   使用 DNS MX 记录查找 smtp 主机。
        *   做 SMTP EHLO
        *   Gmail 回复“250-mx.google.com 随时为您服务”
            *   因此，如果我们看到“google.com”，我们就完成了。
        *   雅虎回复 250-mta1257.mail.sk1.yahoo.com
            *   因此，如果我们在响应中看到“yahoo.com”，我们就完成了。
        *   Apple 回复 250-xxxxxx-mac.com
            *   因此，如果我们在响应中看到“mac.com”，我们就完成了。
        *   如果以上都不是
            *   地图？

                *   ...

[编辑：5/18] 我构建了一个原型，它使用不需要身份验证的方法（例如，只是 MX/SMTP sluthing）。试一试：[http ://bit.ly/KLZKxD](http://bit.ly/KLZKxD)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:10:43.353

算法似乎是合理的。您将从未经过滤的服务器运行获得最佳结果（这意味着它具有直接的 SMTP 出站/不通过代理运行）。如果从客户端（移动/平板电脑/桌面）运行，则无法保证，因为某些 ISP 通过代理中继传递 SMTP，因此 EHLO 响应仅用于代理。

您可能希望对服务器进行端口检查以验证预期的协议支持（仅 TCP 连接可能就足够了，但协议握手更好）。此外，最好建立一个经过验证的 SMTP 和 IMAP 服务器映射的数据库，因为可以存在拆分名称（例如 smtp.domain.com 和 mail.domain.com） - 发现 SMTP 很容易，发现出站服务器通常也表示日历/联系人服务器，而不是太多（Exchange 除外，但仅在正确配置自动发现的情况下）。

如果您可以让您的用户批准并假设您有他们的用户名/密码，您可以尝试通过 MX 记录连接到 SMTP 并将电子邮件发送回您自己的地址，然后检查标头以获取有关服务器的有用信息（需要经过身份验证中继）。用户也可以回复您生成的电子邮件以获得相同的服务器信息。

还要确保您执行自己的 DNS 查询并尝试每个 MX 记录或所有主记录 - 如果主体 MX 已关闭或 DNS 配置不当以实现同等权重，您最终可能会遇到智能主机/备份，这可能只是一个愚蠢的 SMTP中继/存储转发，而不是给你正确的回应。

TL; DR：没有快速的解决方案，而是一种级联算法尝试并失败不同的解决方案，直到一个工作/给出预期结果应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:55:01.883

大多数设备可以通过解析整个电子邮件地址来自动检测服务。Xyz@gmail.com 显然是一个 gmail 帐户。因此，对于 Apple、Gmail、Yahoo、Live、Hotmail 等，您可以轻松编程。对于其他域，包括自定义域，您可以试试这个：[http ://www.exclamationsoft.com/exclamationsoft/netmailbot/help/website/HowToFindTheSMTPMailServerForAnEmailAddress.html](http://www.exclamationsoft.com/exclamationsoft/netmailbot/help/website/HowToFindTheSMTPMailServerForAnEmailAddress.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:48:06.617

您可以通过检查域的 MX 记录来检测 Google Apps For Your Domain 帐户。如果主 MX 记录是 ASPMX.L.GOOGLE.com，那么它就是 GMail。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-14T20:46:59.090

我创建了一个已被广泛使用并取得了一些成功的实现：[https ://github.com/tig/Email2Calendar](https://github.com/tig/Email2Calendar)

这由milelogr.com 和freebusy.io 使用。

# sql - SSRS - 将静态 null 添加到参数查询

> ID：10391119
> 
> 赞同：3
> 
> 时间：2012-04-30T21:56:58.000
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services, ssrs-2008

我正在寻找一种将值添加到从简单查询中检索到可用值的参数的方法。我今天才开始搞乱SSRS，我希望我没有做错。

从报告项目中执行以下过程（我知道很乱）：

```
CREATE PROCEDURE RAW_TIME_VAR
        @EMPLID as varchar(6) = NULL
,       @EMPLNAME as varchar(80) = NULL
,       @CHARGENO as int = NULL
,       @TYPE as varchar(8) = NULL
,       @STARTDATE as date = NULL
,       @ENDDATE as date = NULL
AS
Select * from DBO.RAW_TIME
Where   ([EMPL ID] = @EMPLID OR @EMPLID IS NULL)
AND     ([EMPL NAME] = @EMPLNAME OR @EMPLNAME IS NULL)
AND     ([CHARGE NO] = @CHARGENO OR @CHARGENO IS NULL)
AND     ([CHARGE TYPE] = @TYPE OR @TYPE IS NULL)
AND     [CHARGE DATE] Between @STARTDATE AND @ENDDATE 
```

报表项目中有两个数据集（我使用的是 VS2008 Business Intelligence Development Studio）。一个从上述过程生成 (RAW_TIME_DATASET)，另一个从同一视图查询以填充员工 ID 和姓名 (NAMES)：

```
SELECT DISTINCT [EMPL ID], [EMPL NAME]
FROM RAW_TIME
ORDER BY [EMPL ID] 
```

我希望能够`@EMPLNAME`使用 NAMES 数据集中的所有员工姓名填充参数，同时还能够通过`NULL`在参数组合框中选择值“All”来传递。“全部”可以通过使用 查询由查询传递`UNION`，它将它放在组合框中，而不是在视图中，但是我不能将它作为`NULL`. Errr ...我希望这是有道理的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T08:31:20.727

你在正确的轨道上。

如果您检查 report_data 选项卡，您将看到一个参数文件夹。展开它，您应该会看到初始查询中的所有参数。右键单击 EMPLNAME 参数，选择参数属性，转到可用值并执行以下配置：

![在此处输入图像描述](../Images/97df82f83e401242a9fab0776695f910.png)

此外，在常规选项卡上，将参数标记为接受空值

现在，诀窍在于 NAMES 数据集。您必须选择所有名称，以及具有空值的行。有几种方法可以完成它，最简单的方法是在您的查询中添加类似这样的内容：

```
union SELECT null as [EMPL ID], 'NULL' as [EMPL NAME] 
```

如果你不这样做，报告会抱怨参数不能为空。

结果（为简单起见，我只添加了 2 个参数）：

![在此处输入图像描述](../Images/115b0a7366b57b1ec0f8ed4d31c7702e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:12:19.500

编辑：请注意，此答案仅在选择在数据集中时才有效，但在选择在存储过程中时无效。请参阅答案下方的评论。

如果您编辑`@EMPLNAME`参数，您可以将其设置为“允许多个值”（[msdn 示例](http://msdn.microsoft.com/en-us/library/aa337292%28v=sql.100%29.aspx)）。如果这样做，则必须像这样更新其他查询中的 where-clause-bit：

```
AND     ([EMPL NAME] IN (@EMPLNAME) OR @EMPLNAME IS NULL) 
```

我相信SSRS会`(@EMPLNAME)`在执行查询之前用逗号分隔的列表替换该位（您不能在常规（非动态）SQL afaik中使用此“IN @param”语法。因为员工姓名是一个字符串，请注意警告链接的 MSDN 文章，并且仅将其与可用值列表结合起来以防止安全问题。

**编辑**：以上是（希望）您严格要求的内容，但是将`@EMPLID`参数与`@EMPLNAME`参数结合起来不是更有意义吗？您可以将 ID 参数设为多值，并将 ID 用作值，将 NAME 用作标签。这样，您将得到以下主要数据集查询：

```
Where   ([EMPL ID] IN (@EMPLID) OR @EMPLID IS NULL)
-- AND     ([EMPL NAME] = @EMPLNAME OR @EMPLNAME IS NULL) -- not needed anymore 
```

# java - 用于故障转移配置和架构的 Java JAX-WS 多个 Web 服务

> ID：10391121
> 
> 赞同：1
> 
> 时间：2012-04-30T21:56:58.883
> 
> 标签：java, swing, ejb, jax-ws, stateless

我有一个 java Swing 应用程序客户端和多个具有不同名称的 glassfish 服务器，它们运行相同无状态 EJB JAX-WS 的副本以进行故障转移。

首先，这是设置故障转移的正确方法吗？是否有任何资源可以提供帮助？

其次，我这样做的方法是将 Web 服务中的所有方法导入单独的 java 类，然后有一个单独的管理类来调用每个方法。在每个方法调用中，它确定适当的连接（即，如果 Web 服务调用失败，它会递增到下一个 Web 服务）。问题是这是大量难以维护的代码，因为它不是一种有效的方法。

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:46:58.327

> 首先，这是设置故障转移的正确方法吗

我建议使用具有集群功能的应用服务器，例如 GlassFish v3.1

[http://glassfish.java.net/public/clustering31.html](http://glassfish.java.net/public/clustering31.html)

# powerpoint - 以编程方式删除 PowerPoint 中的形状并撤消会导致形状“丢失”

> ID：10391122
> 
> 赞同：2
> 
> 时间：2012-04-30T21:57:02.117
> 
> 标签：powerpoint, undo, shapes

（这似乎主要是 PowerPoint 2007 的特定问题，我无法在 PPT 2010 中轻松重现）

在本地复制的简单方法是：

```
1) Insert a shape into blank slide
2) Run command: ActivePresentation.Slides(1).Shapes(1).Delete in immediate window in Visual Studio. (You can alternatively delete through C#)
3) Undo the deletion in the PowerPoint presentation (do this non-programatically) 
```

由于某种原因，您无法使用以下调用再次访问该形状：

```
ActivePresentation.Slides(1).Shapes(1) //Does not allow any methods/properties to work 
```

我唯一远程获得的是，通过`Selection.ShapeRange`，您可以获得对该项目的引用，但大多数属性/方法在尝试使用该对象时会抛出 ComExceptions。

有谁知道我如何重新获得形状或以某种方式刷新演示文稿以获得一些干净的 Com 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:37:30.093

我可以在 Ppt2007 SP3 中确认。尝试解决方法 .cut 和 .paste。之后我能够访问其他方法/属性。- 干杯，www.MSO-dlx.com

```
ActivePresentation.Slides(1).Shapes(1).Delete
Application.CommandBars.ExecuteMso "Undo" 'or manually Undo
ActiveWindow.Selection.SlideRange(1).Shapes(1).Cut 
ActiveWindow.Selection.SlideRange(1).Shapes.Paste
ActiveWindow.Selection.SlideRange(1).Shapes(1).TextFrame.TextRange.Text = "ABC" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T16:42:44.517

所以，我可以确认这是一个问题；即使在 2010 年，也找到了“更便宜”的替代方案：

```
Public Sub arf()

Dim arf As Slide
Dim shape As shape
Dim shapes As shapes

Set shapes = ActivePresentation.Slides(1).shapes
Set shape = shapes(2)
shape.Select

shape.Delete
Application.CommandBars.ExecuteMso "Undo"
MsgBox ("shape: " & shape.Name & ",Type: " & shape.Type)

Set shapes = ActivePresentation.Slides(1).shapes
Set shape = Nothing
Set shape = shapes(2)

' Cut and paste makes this work, but not required...
'shape.Select
'shape.Cut
'shapes.Paste

'Set shape = Nothing
'Set shape = shapes(2)

Set arf = shape.Parent
MsgBox ("slide: " & arf.Name)

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-24T11:01:27.897

刚才我已经成功解决了这个问题，分享一下帮助很大的网页：[https ://www.add-in-express.com/creating-addins-blog/2014/06/24/exception-hresult-0x800a01a8/](https://www.add-in-express.com/creating-addins-blog/2014/06/24/exception-hresult-0x800a01a8/)

关键点是删除后释放对象，这与Skovly和sharkTwo完全一样。但是，我不知道如何使用C#做到这一点，链接给了我答案。

```
Marshal.ReleaseComObject(titleShape); titleShape = null; 
```

像这样。

# python - 如何运行两个python阻塞函数matplotlib.show()和twisted.reactor.run()？

> ID：10391123
> 
> 赞同：2
> 
> 时间：2012-04-30T21:57:03.563
> 
> 标签：python, multithreading, matplotlib, twisted

我有一个 Python 网络流量的可视化工具。它使用 Twisted 进行联网并调用`run()`它也有 matplotlib 用于绘图和调用`show()`。这些函数似乎都没有返回，但我需要调用它们来启动网络，然后显示情节并最终随着网络上发生的事情更新情节。有什么解决办法吗？我需要线程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:33:28.107

matplotlib 是一些 GUI 工具包之上的一层。哪个 GUI 工具包取决于每个用户的配置、站点范围的配置以及您拥有的 matplotlib 代码的详细信息。

Twisted 对与某些 GUI 工具包的集成具有特定的支持。因此，例如，您可以使用其 Gtk 后端运行 matplotlib 并使用 Twisted 的 Gtk 集成，然后一切都会很好地协同工作。

根据我对集成各种主循环的了解，以及对 matplotlib 源代码的一点检查，我整理了一个 5 分钟的 hack：

```
if __name__ == '__main__':
    from mpl import main
    raise SystemExit(main())

from matplotlib import use
use('GTK')
from matplotlib import pyplot

from matplotlib.backends import backend_gtk

from twisted.internet import gtk2reactor
gtk2reactor.install()

from twisted.internet import reactor, task

class TwistedGtkShow(backend_gtk.Show):
    running = False
    def mainloop(self):
        if not self.running:
            self.running = True
            reactor.run()

def main():
    pyplot.plot([1,2,3,4])
    pyplot.ylabel('some numbers')

    def proof():
        print 'Twisted!'
    task.LoopingCall(proof).start(3)

    TwistedGtkShow()() 
```

注意：

*   这是在一个名为的文件中`mpl.py`（因此`mpl`导入顶部）
*   `use('GTK')`我在导入之前强制 matplotlib 在调用中使用 Gtk`pyplot`
*   `gtk2reactor.install()`在导入之前，我强制 Twisted 在调用中使用 Gtk`reactor`
*   我将调用替换为`pyplot.show()`对我自己的`Show`子类的调用，`mainloop`方法是启动 Gtk 主循环*和*Twisted 主循环（均通过`reactor.run()`）

这个例子似乎工作得很好。我还没有深入研究过，所以如果有问题只有在更高级的用法下才会出现，我不知道。

# c++ - 在构造函数之后直接调用 C++ 类析构函数

> ID：10391125
> 
> 赞同：4
> 
> 时间：2012-04-30T21:57:24.420
> 
> 标签：c++, constructor

这里有一个简单的问题，我的代码中有几个类，但只有一个表现出这个问题，我一生都无法弄清楚为什么。当我创建类的实例时，析构函数被立即调用，但类的实例实际上并没有被删除。

如果在析构函数中没有删除 [] 操作会影响类的实例，也许我可以忍受。

我在某处读到了“三法则”之类的东西，所以试图看看我错过了什么。我已经有一个默认构造函数以及一个用户定义的构造函数。然后我添加了我认为所谓的复制构造函数，如下所示：

```
MyClass::MyClass(const MyClass &duplicate)
{
    variable1 = duplicate.variable1;
    variable2 = duplicate.variable2;
    // etc
} 
```

我在这里缺少什么可能导致此问题？

编辑：请求的代码。我已经重命名了所有内容，以便一切都清楚（此代码仍然与问题一起编译）。首先，头文件，`MyClass.h`：

```
#ifndef MYCLASS_H
#define MYCLASS_H
#ifndef UNICODE
#define UNICODE
#endif
#include <string>

class MyClass
{
public:
    MyClass();
    MyClass::MyClass(const MyClass &);
    MyClass(int, std::wstring inputWord, int);
    ~MyClass();

    int intOne;
    int intTwo;
};
#endif 
```

下一个`MyClass.cpp`：

```
#include "MyClass.h"
#include <Windows.h>

MyClass::MyClass(const MyClass &duplicate)
{
    intOne = duplicate.intOne;
    intTwo = duplicate.intTwo;
}
MyClass::MyClass()
{
}

MyClass::~MyClass()
{
    MessageBox(NULL, TEXT("TEST"), TEXT("TEST"),0);
}

MyClass::MyClass(int intOneInput, std::wstring stringInput, int intTwoInput)
{
    intOne = intOneInput;
    intTwo = intTwoInput;
} 
```

最后是我如何创建我的对象：

`MyClass test(0, TEXT("TEST"), 0);`

[复制自op的评论]

实际上，从我的最后一条评论开始，解构器不会用该特定行调用（直到它超出范围），该行被`words.push_back(MyClass(0, TEXT("TEST"), 0));`声明为`std::vector<MyClass> words`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:05:05.017

当对象被销毁时，应该调用析构函数。如果使用 来创建对象`new`，则在调用对象时将调用析构函数`delete`。否则，当它超出其范围时应该调用它。您可以在其析构函数内设置断点并查看调用堆栈以检查调用析构函数的内容。希望能帮助到你。

[更新] 尝试`printf`为所有 ctor 和 dtor 添加以下内容，以确保您不会与临时创建的对象混淆。

```
printf("ctor %p\n", this); // in constructors

printf("dtor %p\n", this); // in destructor 
```

[更新]

```
words.push_back(MyClass(0, TEXT("TEST"), 0)); 
```

这会创建一个临时对象，因为 stl 容器（如`vector`）总是“复制”要存储的东西。（除非“移动”发生。我不想在这里开始解释“移动”和右值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:05:01.593

一个可能的问题（但我们需要了解更多）是您的复制构造函数执行卷影复制，并且您从临时构造对象复制构造。当临时对象被销毁时，临时对象持有的内存被释放，新对象现在拥有已删除内存的指针。

一种解决方案是：在复制构建时执行深层复制。
[http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/](http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/)

另一个是：使用智能指针而不是原始指针。
[什么是智能指针，我应该什么时候使用它？](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T22:45:37.143

这个：

```
MyClass test(0, TEXT("TEST"), 0); 
```

声明一个自动对象。
对象在超出范围时被销毁。

```
{
   MyClass test(0, TEXT("TEST"), 0);   // constructed here
}                                      // destructed here. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-06T10:29:12.200

我知道这是一个旧线程，但如果它可以在未来帮助某人，我在未定义复制构造函数时看到了相同的问题测试这篇文章中的代码：[https ://www.viva64.com/en/w /v690/](https://www.viva64.com/en/w/v690/)：

```
1 raise                                    0x7ffff4e320e0
2 abort                                    0x7ffff4e336c1
3 __libc_message                           0x7ffff4e75427
4 malloc_printerr                          0x7ffff4e7bc43
5 MyArray::Clear         mainwindow.cpp 50 0x4204a5
6 MyArray::~MyArray      mainwindow.cpp 53 0x4204e2
7 MainWindow::MainWindow mainwindow.cpp 73 0x41416b
8 main                   main.cpp       10 0x40c372 
```

我在您的代码中看到复制构造函数的标题定义为：

```
MyClass::MyClass(const MyClass &); 
```

而不是简单地：

```
MyClass(const MyClass &); 
```

我不确定您的复制构造函数是否正确声明和使用。

无论如何，对于当前的 GCC 版本，这种特殊情况不应该发生，因为它不应该因为“成员 'MyArray [-fpermissive] 上的额外限定 'MyArray::'”错误而通过，但它可以帮助缺少复制构造函数的人。

# java - 获取父类字段值而不是应该覆盖父类的子字段

> ID：10391130
> 
> 赞同：0
> 
> 时间：2012-04-30T21:57:57.387
> 
> 标签：java, oop

在尝试让子类字段获取父字段时。在此示例中，当创建 new 时`DarkRoom`，会将 int 零传递给`DarkRoom`构造函数。它应该将零 int 分配给`thisRoomNumber`字段。下一步 - 创建`Tenant`并传递一个`DarkRoom`我们初始化的对象。出于某种原因，尽管**我们分配了零**`Semaphore`，但类中的`nextRoom`has 字段`thisRoomNumber`继承自`Room`并具有值。什么不见​​了？为什么我不能从中得到设计相当复杂，也许有更简单的解决方案？`96`**`0``nextRoom.thisRoomNumber`**

 **```
public abstract class Room {
public int thisRoomNumber = 96;
} 
```

主要方法：

```
 public class TestCase {
    public static void main(String[] args) {
    Room s[] = new Room[1];
            {    
               s[0] = new DarkRoom(0, s);
                 }
        new Tenant("Joe", s[0], s);
        }
    } 
```

暗室类：

```
public class DarkRoom extends Room {

private Room thisRoomType = this;
public int thisRoomNumber;
private Room[] rooms;   
private  Semaphore semaphore= new Semaphore();
@Override
void leave(Tenant t) {
    semaphore.release(thisRoomType, rooms, t);
}
public int thisRoomNumber;

public DarkRoom(int i, Room[] s) {

        this.thisRoomNumber = i;
        this.rooms = s;
    }
} 
```

信号量类：

```
public class Semaphore {
public synchronized void release( Room thisRoom,  Room[] allRooms, Tenant t) {
Room nextRoom;

        while(j < allRooms.length &&

            allRooms[j].negativeCounter == 0 &&

            thisRoom.getClass().equals(allRooms[j].getClass())){ 

            j++;
        }
nextRoom = allRooms[j];
System.out.println(nextRoom.getClass().getName() +"' "+nextRoom.thisRoomNumber); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:05:36.760

您也`thisRoomNumber`通过在子类中声明该字段来隐藏该字段。删除它在子类 ( `DarkRoom`) 中的声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:06:13.277

Java中的字段不是多态的。只有方法是。做每本像样的书所建议的，永远不要使用公共领域。请改用 getter，并覆盖子类中的 getter。字段不能被覆盖。**

# serialization - 序列化拉链？

> ID：10391134
> 
> 赞同：3
> 
> 时间：2012-04-30T21:58:31.477
> 
> 标签：serialization, clojure, zipper

```
repl> (-> root zip/down zip/right)
[{:answer-keys [5 6], :id 3} {:l [{:id 2, :answer-keys []}], :pnodes [{:answer-keys [2 3 4], :id 1}], :ppath nil, :r ({:answer-keys [7], :id 4})}] 
```

当我打印出 repl 上的拉链时，我看到了这些数据。我在想这可能是我序列化拉链所需的所有数据？是否可以从提供的数据中反序列化拉链？

我正在寻找类似下面想象的 zip/serialize 和 zip/deserialize 函数。

```
(def s (zip/serialize (-> root zip/down zip/right))) ;; s is a string
(def d (zip/deserialize s)) ;; d is a zipper location
;;And I can go on using the deserialized zipper d without any difficulty. 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:14:05.257

zippers 的神奇之处在于它们是一种数据结构，它代表了生成任意修改版本的树结构所需的一切。**zippers 打印和读取都很好**，因为它们是**正确的值**并且不需要任何状态

你可以用它“序列化”它并用它`pr-str`“反序列化”它`read`

做一个拉链：

```
user> (zip/vector-zip [[1 [2]][3][4]])
[[[1 [2]] [3] [4]] nil]
user> (def s (zip/vector-zip [[1 [2]][3][4]]))
#'user/s
user> s
[[[1 [2]] [3] [4]] nil] 
```

将其序列化为字符串：

```
user> (def serialized-s (pr-str (zip/next s)))
#'user/serialized-s
user> serialized-s
"[[1 [2]] {:l [], :pnodes [[[1 [2]] [3] [4]]], :ppath nil, :r ([3] [4])}]" 
```

读回来：

```
user> (def deserialized-s (read-string "[[1 [2]] {:l [], :pnodes [[[1 [2]] [3] [4]]], :ppath nil, :r ([3] [4])}]"))
#'user/deserialized-s 
```

对结果做一些事情：

```
user> (zip/root deserialized-s)
[[1 [2]] [3] [4]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T05:09:02.707

扩展亚瑟的答案：

您可能还需要序列化 ​​clojure.zip 放在其拉链上的元数据，因为这似乎是它跟踪`branch?`//函数的地方`children`。`make-node`所以像

```
(defn serialize [zipper]
  (binding [*print-meta* true]
    (pr-str zipper)))

(def deserialize read-string) 
```

# r - 用R中的漂移函数迭代计算随机游走的漂移系数，编译成列表

> ID：10391135
> 
> 赞同：2
> 
> 时间：2012-04-30T21:58:48.370
> 
> 标签：r, for-loop, forecasting

我的目标是列出具有漂移预测功能的随机游走的漂移系数，应用于一组历史数据（如下）。具体来说，我试图从第一年的漂移模型的随机游走开始收集漂移系数，然后累积到最后一次，每次记录系数，意味着迭代或每隔一年（将其记录到列表中？如果那是合适的）。需要明确的是，每个新的随机游走预测都包括以前的所有年份。

数据是 241 个消耗水平的列表，我试图辨别漂移系数在从 n=1 到 n=241 的迭代过程中将如何变化

例如，带有漂移模型的随机游走是 Y[t] = c + Y[t-1] + Z[t] 其中 Z[t] 是正常误差，c 是我正在寻找的系数。我目前在这方面的尝试涉及一个 for 循环函数并从 R 中的“Forecast”包中的 rwf() 函数中提取 c 系数。

为了提取这个，我正在这样做

`rwf(x, h = 1, drift = TRUE)$model[[1]]`

提取漂移系数。问题是，我在 rwf 调用中对数据进行子集化的尝试失败了，而且我也不相信，通过反复试验和研究，rwf() 支持子集参数，例如 lm 模型。从这个意义上说，我循环函数的尝试也失败了。

这种代码的一个例子是

```
for (i in 1:5){print((rwf(x[1:i], h = 1, drift = TRUE))$model[[1]])} 
```

这给了我以下错误

```
Error in lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) : 
  0 (non-NA) cases
In addition: Warning message:
In is.na(rows) : is.na() applied to non-(list or vector) of type 'NULL' 
```

任何帮助将非常感激。我阅读了很多内容以寻求帮助，但这是我第一次提出问题。

数据如下

```
 PCE
1   1306.7
2   1309.6
3   1335.3
4   1341.8
5   1389.2
6   1405.7
7   1414.2
8   1411.0
9   1401.6
10  1406.7
11  1425.0
12  1444.4
13  1474.7
14  1507.8
15  1536.6
16  1555.6
17  1575.2
18  1577.8
19  1583.0
20  1586.6
21  1608.4
22  1619.5
23  1622.4
24  1635.3
25  1636.1
26  1613.9
27  1627.1
28  1653.8
29  1675.6
30  1706.7
31  1732.9
32  1751.0
33  1752.9
34  1769.7
35  1792.1
36  1785.0
37  1787.4
38  1786.9
39  1813.4
40  1822.2
41  1858.7
42  1878.5
43  1901.6
44  1917.0
45  1944.2
46  1957.3
47  1976.0
48  2002.9
49  2019.6
50  2059.5
51  2095.8
52  2134.3
53  2140.2
54  2187.8
55  2212.0
56  2250.0
57  2313.2
58  2347.4
59  2353.5
60  2380.4
61  2390.3
62  2404.2
63  2437.0
64  2449.5
65  2464.6
66  2523.4
67  2562.1
68  2610.3
69  2622.3
70  2651.7
71  2668.6
72  2681.5
73  2702.9
74  2719.5
75  2731.9
76  2755.9
77  2748.4
78  2800.9
79  2826.6
80  2849.1
81  2896.5
82  2935.2
83  2991.2
84  3037.4
85  3108.6
86  3165.5
87  3163.9
88  3175.3
89  3166.0
90  3138.3
91  3149.2
92  3162.2
93  3115.8
94  3142.0
95  3194.4
96  3239.9
97  3274.2
98  3339.6
99  3370.3
100 3405.9
101 3450.3
102 3489.7
103 3509.0
104 3542.5
105 3595.9
106 3616.9
107 3694.2
108 3709.7
109 3739.6
110 3758.5
111 3756.3
112 3793.2
113 3803.3
114 3796.7
115 3710.5
116 3750.3
117 3800.3
118 3821.1
119 3821.1
120 3836.6
121 3807.6
122 3832.2
123 3845.9
124 3875.4
125 3946.1
126 3984.8
127 4063.9
128 4135.7
129 4201.3
130 4237.3
131 4297.9
132 4331.1
133 4388.1
134 4462.5
135 4503.2
136 4588.7
137 4598.8
138 4637.2
139 4686.6
140 4768.5
141 4797.2
142 4789.9
143 4854.0
144 4908.2
145 4920.0
146 5002.2
147 5038.5
148 5078.3
149 5138.1
150 5156.9
151 5180.0
152 5233.7
153 5259.3
154 5300.9
155 5318.4
156 5338.6
157 5297.0
158 5282.0
159 5322.2
160 5342.6
161 5340.2
162 5432.0
163 5464.2
164 5524.6
165 5592.0
166 5614.7
167 5668.6
168 5730.1
169 5781.1
170 5845.5
171 5888.8
172 5936.0
173 5994.6
174 6001.6
175 6050.8
176 6104.9
177 6147.8
178 6204.0
179 6274.2
180 6311.8
181 6363.2
182 6427.3
183 6453.3
184 6563.0
185 6638.1
186 6704.1
187 6819.5
188 6909.9
189 7015.9
190 7085.1
191 7196.6
192 7283.1
193 7385.8
194 7497.8
195 7568.3
196 7642.4
197 7710.0
198 7740.8
199 7770.0
200 7804.2
201 7926.4
202 7953.7
203 7994.1
204 8048.3
205 8076.9
206 8117.7
207 8198.1
208 8308.5
209 8353.7
210 8427.6
211 8465.1
212 8539.1
213 8631.3
214 8700.1
215 8786.2
216 8852.9
217 8874.9
218 8965.8
219 9019.8
220 9073.9
221 9158.3
222 9209.2
223 9244.5
224 9285.2
225 9312.6
226 9289.1
227 9285.8
228 9196.0
229 9076.0
230 9040.9
231 8998.5
232 9050.3
233 9060.2
234 9121.2
235 9186.9
236 9247.1
237 9328.4
238 9376.7
239 9392.7
240 9433.5
241 9482.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:12:33.470

您至少需要两个点来拟合您的模型。以下是在将您的数据读入名为 data.frame 后的解决方法`x`：

```
library(forecast)
drifts <- sapply(2:nrow(x), function(zz) rwf(x[1:zz,], drift = TRUE)$model$drift) 
```

我不确定这是否是您所期望的，但这是您的漂移值图： ![在此处输入图像描述](../Images/e47f3497bf6cc2ca4013b49990bb218b.png)

# jquery - 如何检测 ckeditor 实例中的更改事件？

> ID：10391136
> 
> 赞同：1
> 
> 时间：2012-04-30T21:58:50.100
> 
> 标签：jquery, events, ckeditor

我想实现“现场”编辑。在 ckeditor 中编辑内容时，相同的内容会同时出现在其他地方（如 div、p 等**）**。

*其他有趣的问题*：当我从附加到ckeditor的文本区域中删除display：none和visibility：hidden时，我看到它是空的。但是，如果我尝试获取 textarea ($('#text_editor').val()) 的值，则会有来自 ckeditor 的内容。什么是魔法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:57:52.323

ckeditor 的开发者之一开发了一个[onchange 插件](http://alfonsoml.blogspot.ca/2011/03/onchange-event-for-ckeditor.html)。

# javascript - 使用javascript匹配id选择器的正则表达式

> ID：10391140
> 
> 赞同：0
> 
> 时间：2012-04-30T21:59:16.517
> 
> 标签：javascript, regex

在我的程序中，我想验证 html 标记的 id。我的函数 id 作为前面带有 #. 的字符串传递。我发现，HTML 中的命名规则和 id 是，

*   必须以字母 AZ 或 az 开头
*   后面可以跟：字母（A-Za-z）、数字（0-9）、连字符（“-”）和下划线（“_”） 所以我写了下面的正则表达式。

    /(^|\s)(#{1})([a-zA-Z])([^a-zA-Z0-9]{0})/g;

但它给了我错误的结果。我的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:43:42.887

```
/#[a-z][\w\d-]*\b/gi 
```

*   `\w`表示来自 az、AZ 和下划线 (_) 的字母
*   `\d`表示 0-9 的整数
*   `\b`表示单词边界
*   `i`标志是捕捉第一个字母，无论大小写

**编辑：**很抱歉忘记了小组开头的边界。

```
var str = '#sss #s23 dd#ww';
// #ww will be omitted because # is not the
// first char in the char group there.
var rx = /(^|\s)(#[a-z][\w\d-]*)\b/gi;
var arr = [];
str.replace(rx, function(){arr.push(arguments[2])});
// this is just to catch the id's.
// it won't modify str.
for (var i = 0; i < arr.length; i++) {
    console.log(arr[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:01:49.460

尝试：

```
/^#[a-z]{1}[a-z0-9_-]*$/i 
```

# django - Django站点地图更改基本网址

> ID：10391151
> 
> 赞同：8
> 
> 时间：2012-04-30T22:00:11.160
> 
> 标签：django, sitemap

我正在使用[https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/?from=olddocs](https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/?from=olddocs)。

我有一个从 api.mydomain.me 为域生成的站点地图：mydomain.com。

我可以使用 django 指定一个基本 url 吗？

现在使用 location() 方法返回：

api.mydomain.me/page/3123 而不是 mydomain.com/page/3123

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T16:24:20.210

解决了，我重新定义了自己的get_urls。有用：

```
class MySitemap(Sitemap):
    changefreq = "never"
    priority = 0.5
    location = ""

    def get_urls(self, site=None, **kwargs):
        site = Site(domain='mydomain.com', name='mydomain.com')
        return super(MySitemap, self).get_urls(site=site, **kwargs)

    def items(self):
        return MyObj.objects.all().order_by('pk')[:1000]

    def lastmod(self, obj):
        return obj.timestamp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-25T10:24:54.867

我不知道如何`Site`使用以前的答案在我的代码中使用，所以我使用了下面的代码：

```
class Site:
    domain = 'my_site.com'

class MySitemap(Sitemap):
    def get_urls(self, site=None, **kwargs):
        site = Site()
        return super(MySitemap, self).get_urls(site=site, **kwargs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:59:06.870

你可以尝试这样的事情：

```
from django.contrib.sites.models import Site, SiteManager

def get_fake_site(self):
    return Site(domain='mydomain.com', name='mydomain.com')

SiteManager.add_to_class('get_current', get_fake_site) 
```

您应该在构建站点地图之前执行此操作，并在之后恢复为默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-04T17:52:05.337

如果您有多个站点地图类，则可以使用混合方法。

Django 1.5.1 的示例。

```
from django.contrib.sitemaps import Sitemap
from django.contrib.sites.models import Site
from django.core.urlresolvers import reverse
from yourapp.models import MyObj

class SiteMapDomainMixin(Sitemap):

    def get_urls(self, page=1, site=None, protocol=None):
        # give a check in https://github.com/django/django/blob/1.5.1/django/contrib/sitemaps/__init__.py
        # There's also a "protocol" argument.
        fake_site = Site(domain='mydomain.com', name='mydomain.com')
        return super(SiteMapDomainMixin, self).get_urls(page, fake_site, protocol=None)

class MySitemap(SiteMapDomainMixin):
    changefreq = "never"
    priority = 0.5

    def items(self):
        return MyObj.objects.all().order_by('pk')[:1000]

    def location(self, item):
        return reverse('url_for_access_myobj', args=(item.slug,))

    def lastmod(self, obj):
        return obj.updated_at

class AnotherSitemap(Sitemap):
    changefreq = "never"
    priority = 0.5

    def items(self):
        return ['url_1', 'url_2', 'url_3',]

    def location(self, item):
        return reverse(item) 
```

urls.py 将类似于...

```
from sitemaps import MySitemap
from sitemaps import AnotherSitemap
from yourapp.views import SomeDetailMyObjView
admin.autodiscover()

sitemaps = {
    'mysitemap': MySitemap,
    'anothersitemap': AnotherSitemap,
}

urlpatterns = patterns('',
    # other urls...
    url(r'^accessing-myobj/(?P<myobj_slug>[-\w]+)$', SomeDetailMyObjView, name='url_for_access_myobj'),
    (r'^sitemap\.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': sitemaps}),
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-25T20:27:06.213

我通过创建自定义模板标签来使用补丁并使用该功能替换 url： [https ://www.fraydit.com/blogs/wagtail-sitemap-in-docker/](https://www.fraydit.com/blogs/wagtail-sitemap-in-docker/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-29T21:02:17.467

几乎所有答案都要求您使用`Site`需要迁移才能工作并将其添加到`INSTALLED_APPS`.

在我的实例中，我只需要显示正确的 URL，因为我使用 Docker 并且基于我的 docker 配置的基本 URL 是`app`.

有了这个，你需要做的就是定义一个自定义`Site()`类，就像我在下面所做的那样，你就可以开始了。

```
 class UserGuideSitemap(sitemaps.Sitemap):
    priority = 1
    changefreq = 'daily'

    def get_urls(self, site=None, protocol=None, **kwargs):
        # we need the url to be site.com
        # SiteToShow() is just a custom class that gives the data needed
        return super().get_urls(site=SiteToShow(), protocol='https', **kwargs)

    def items(self):
        # must import here due to url circular import with urls.py
        from apps.user_guide.urls import urlpatterns as urls
        # get names of urls from base urls
        final_list = list()
        for pattern in urls:
            url_name = pattern.pattern.name
            # there are some urls we do not want
            if url_name not in ['']:
                final_list.append(url_name)

        return final_list

    def location(self, item):
        # return the URL for the sitemap
        return reverse(item) 
```

这是非常简单的`SiteToShow`类：

```
class SiteToShow:

    domain = 'site.com'
    name = 'site.com'

    def __str__(self):
        return self.domain 
```

# bash - 递归复制到相对目标路径

> ID：10391152
> 
> 赞同：8
> 
> 时间：2012-04-30T22:00:13.203
> 
> 标签：bash, shell

我在想像我想要完成的事情可以使用内置的 shell 工具来完成，而不需要更复杂的脚本。

我想找到路径中的所有文件并将它们复制到目标基本路径，保留它们所在的相对路径。

例子：

说我跑了：

```
[~:] find /path/src  \( -name "*.jpg" -o -name "*.gif" \) 
```

然后返回：

```
/path/src/a.jpg
/path/src/dir1/b.jpg
/path/src/dir2/dir3/c.gif 
```

我希望他们最终都在：

```
/path/dest/a.jpg
/path/dest/dir1/b.jpg
/path/dest/dir2/dir3/c.gif 
```

我尝试了一个`-exec cp {} /path/dest \;`标志，`find`但这只是将所有内容都转储到 /path/dest。例如：

```
/path/dest/a.jpg
/path/dest/b.jpg
/path/dest/c.gif 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-15T08:03:50.360

实际上它也适用于 cp，你想要的是 --parents 标志。

```
cp --parents `find /path/src  \( -name "*.jpg" -o -name "*.gif" \)` /path/target 
```

理论上`-P`是 的同义词`--parents`，但这对我来说从来没有用过。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T22:02:06.233

您可以为此使用[rsync](http://linux.die.net/man/1/rsync)，例如

```
$ rsync -avm /path/src/ /path/dest/ --include \*/ --include \*.jpg --include \*.gif --exclude \* 
```

只是为了澄清上述内容：

```
-avm             # recursive, copy attributes etc, verbose, skip empty directories
/path/src/       # source
/path/dest/      # destination (NB: trailing / is important)
--include \*/    # include all directories
--include \*.jpg # include files ending .jpg
--include \*.gif # include files ending .gif
--exclude \*     # exclude all other files 
```

# c++ - 如何在加载时填充上下文菜单？

> ID：10391157
> 
> 赞同：0
> 
> 时间：2012-04-30T22:00:32.813
> 
> 标签：c++, windows, explorer, windows-shell

我有想要进入上下文菜单的项目。问题是这些项目需要一段时间才能生成。因此，如果我必须预先填充上下文菜单，我必须填充所有 1500 个项目，这需要一段时间，即使这些子菜单没有被访问。因此，我正在寻找一种仅在实际打开菜单时才填充菜单的方法。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:33:03.597

[IContextMenu2](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776091(v=vs.85).aspx)接口发送一个[WM_INITMENUPOPUP](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646347(v=vs.85).aspx)消息，允许您在菜单即将弹出之前填写项目。

# vhdl - Xilinx True Dual Ported RAM 在两个端口上具有不同的纵横比

> ID：10391158
> 
> 赞同：1
> 
> 时间：2012-04-30T22:00:36.203
> 
> 标签：vhdl, verilog, ram, fpga, xilinx

我正在尝试使用以下配置在 Verilog 中构建 RAM 块：

*   端口 A：128 位宽，使用 clk_a，将 RAM 块视为 128 位宽乘以 128 行深
*   端口 B：32 位宽，带有 clk_b，将 RAM 块视为 32 位宽乘以 512 行深

不用担心 READ-WRITE 序列化和互斥，我会在上面一层来处理它。

基本上，生成 128 位乘以 128 行的代码如下所示：

```
reg [DATA_WIDTH-1:0]                 mem  [0:2**ADDRESS_WIDTH-1]; 
```

现在，如果我希望它看起来像 32 位乘以 512 深，我如何重构这个内存以看起来不同（有点像 C 中的重铸）？我知道我可以通过 32 位字启用来做到这一点，但我想看看是否有更清洁的方法来实现这一点。

让我知道你的想法 ？

RRS

更正：我指的是 Xilinx BRAM（BRAM 不能深 512）。但这本质上是一个具有链接多个 BRAM 的胶合逻辑的内存块。谢谢指出！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:57:07.703

我是这样解决的：

在 ISE 中，我能够在其中一个包含实际代码示例的菜单中找到“语言模板”。有一个带有“文件 I/O”的，可以完美运行。

您还可以在双端口 RAM 周围构建一个包装器模块，这将改变另一侧的数据宽度。在较小的数据宽度端口（即更多的地址线）上，您可以使用较低的地址位作为字选择系统，允许您写入内存线的一部分。这对我来说是正确的合成（检查你的合成工具）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T04:37:00.950

有关具体如何执行此操作的说明，请参阅赛灵思文档。例如，[http://www.xilinx.com/support/documentation/sw_manuals/xilinx13_2/xst_v6s6.pdf](http://www.xilinx.com/support/documentation/sw_manuals/xilinx13_2/xst_v6s6.pdf)从第 217 页开始提供了明确的 VHDL 和 Verilog 示例，说明如何执行您的要求。

# python - 允许从各种容器中有效删除的通用引用

> ID：10391159
> 
> 赞同：-2
> 
> 时间：2012-04-30T22:00:46.623
> 
> 标签：python, design-patterns, reference, containers, software-design

我正在编写一个自定义容器类。组成对象是独立于容器创建的，可以是无容器的成员，也可以是多个容器的成员。容器的公共 API 应该支持三种操作：

*   迭代所有对象
*   插入新对象
*   移除现有对象

容器做了一些额外的工作，它的精确实现可能会改变。

如何将公共 API 写入此类，以便在更改实现时保持稳定？

如果容器是`list`-like，有效的移除需要知道对象的索引；知道对象本身不好（我不想在整个容器中搜索元素）。

如果容器是`set`类似的，则没有与索引等效的东西，我需要对象本身。

如果容器就像一个单链表，我需要某种对被删除对象之前的对象的引用。

如果容器就像一个双向链表，我需要对对象本身的引用。

我正在考虑让删除方法采用单个参数`reference`，该参数在删除方法之外没有任何意义或用途。迭代将产生一对 ( `object`, `reference`)。

这个设计有问题吗？有我可以查找的示例或设计模式吗？

理想情况下，我宁愿让迭代产生一个复杂的对象，它同时包含原始对象`object`和`reference`，并展示两者的接口。但我不认为这是可行的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:20:09.887

大多数容器类型都有一个可以很好地工作的方向 - 从索引到索引，从当前到下一个等。有些是双向的，但远非全部。

尝试在不使用索引的情况下在 python 列表中查找值几乎是 O(n)。您要么需要接受 O(n)，要么使用不同的类型。

想到这一点的一件事是，如果您需要从大量容器类型中快速删除某些内容，您可以将“ignore_this”属性添加到您的值中。如果您将其设置为 true，那么您的所有容器类型都会开始忽略它，甚至在看到它时将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:20:42.797

只需封装 a `list` *and* a `dict`/ a `list` *and* a `set`, ...

大约使您的内存使用量和操作时间增加一倍，但巧妙的封装通常会使几乎*所有*与问题相关的操作`O(1)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T22:50:38.810

`collections.OrderedDict`如果您使用的是 Python 2.7 及更高版本，可能值得一看：http: [//docs.python.org/library/collections.html#collections.OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T23:28:34.290

除非其他人通过找到更好的解决方案来提供帮助，否则我会这样做：

```
# to get __hash__ and __eq__ return id(self)
class Reference:
  def __init__(self, item):
    self.item = item

class RemovalAPI:
  def add_removal_info(self, item, removal_info):
    try:
      references = item.__reference
    except AttributeError:
      references = item.__reference = {}
    references[Reference(self)] = removal_info

  def get_removal_info(self, item):
    try:
      references = item.__reference
      self_reference = Reference(self)
      return references[self_reference]

class Container(list, RemovalAPI):
  def __iter__(self):
    for i in range(len(self)):
      item = self[i]
      self.add_removal_info(item, i)
      yield item

  def remove(self, item):
    removal_info = self.get_removal_info(item)
    del self[removal_info]

  def insert(self, item):
    self.add_removal_info(item, len(self))
    self.append(item)
    # do whatever post-processing I need
    # ... 
```

如果我决定将实现从`list`其他数据结构更改，公共接口可以保持不变：

```
class Container(orderedset, RemovalAPI):
  # inheriting __iter__, remove from parent
  def insert(self, item):
    self.add(item)
    # do whatever post-processing I need
    # ... 
```

或者...

```
class Container(linkedlist, RemovalAPI):
  def __iter__(self):
    it = super().__iter__()
    last_item = None
    for item in it:
      self.add_removal_info(item, last_item)
      yield item

  def remove(self, item):
    removal_info = self.get_removal_info(item)
    if removal_info is None:
      self.remove_first()
    else:
      self.remove_after(removal_info)

  def insert(self, item):
    self.add_removal_info(item, None)
    self.add_to_front(item)
    # do whatever post-processing I need
    # ... 
```

# php - 仅当值更改时才使用 PHP 更新 MySQL 数据库

> ID：10391162
> 
> 赞同：0
> 
> 时间：2012-04-30T22:01:13.390
> 
> 标签：php, mysql, sql-update, insert-update

我有一个大的 MySQL 数据库，我正在将重要的部分提取到一个较小的 MySQL 数据库中。大数据库中的值是不断变化的。较小的数据库也应该动态变化。

我只能在较小的数据库为空时填充较小的数据库，使用以下代码：

```
$SQL_INSERT="INSERT LOW_PRIORITY IGNORE INTO oddsnavi_baby.calc (one , two, three)
VALUES ('$one', '$two' , '$three')";

mysql_db_query($database_baby, $SQL_INSERT) or die("Failed Query of " . $SQL_INSERT); 
```

我希望更新更改的值。例如，如果 $three 与小型数据库中“three”中的现有值不同，则“three”是该行中唯一更新的值。怎么做？

编辑：我收到以下代码错误。我的语法有什么问题？

```
$SQL_INSERT="INSERT LOW_PRIORITY IGNORE INTO oddsnavi_baby.calc (one , two, three)
VALUES ('$one', '$two' , '$three')
ON DUPLICATE KEY UPDATE oddsnavi_baby.calc SET two = '$two' , three = '$three'
WHERE one = '$one'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:15:40.300

如果两个数据库都托管在相同的物理硬件上，您可能需要考虑在“大”数据库中的多个表之一上实现 UPDATE 触发器，这将更新“小”数据库中的值。

这是一篇简要概述在 MySQL 中使用触发器的文章： [http ://www.roseindia.net/mysql/mysql5/triggers.shtml](http://www.roseindia.net/mysql/mysql5/triggers.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:15:38.090

我可以想到两种方法可以做到这一点：

1.  更改“大”数据库的软件，提醒管理小型数据库的软件，然后管理软件更改相应的字段。

2.  我认为您可以在两个数据库之间创建一个视图，但从未做过类似的事情，即使它可能也不知道，但为什么不呢，您可以在两个（或更多）数据库之间创建外键。

# mysql - Oracle MySQL 和 MySQL 一样吗？

> ID：10391163
> 
> 赞同：0
> 
> 时间：2012-04-30T22:01:22.420
> 
> 标签：mysql, oracle

我的系统上有 MySQL，我正在尝试确定它是 Oracle MySQL 还是 MySQL。Oracle MySQL 之间是否有区别：

[http://www.oracle.com/us/products/mysql/index.html](http://www.oracle.com/us/products/mysql/index.html)

和“常规” MySQL：

[http://www.mysql.com/](http://www.mysql.com/)

还是它们是同一回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T22:04:16.103

它是同一个产品，甲骨文只是在收购 Sun 时重新命名了该产品......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T22:04:53.847

Oracle 收购 SUN 得到 MySQL, [Source1](http://www.linux-mag.com/id/7309/) , [Source2](http://blogs.gnome.org/bolsh/2009/04/20/oracle-buys-mysql-shocker-and-they-get-the-rest-of-sun-too/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T22:05:46.883

至于数据库，是的。当他们买了之前收购过mysql的sun

# php - 运行 bash 脚本以响应 HTTP POST

> ID：10391169
> 
> 赞同：1
> 
> 时间：2012-04-30T22:02:07.260
> 
> 标签：php, bash

我一直在使用以下 PHP 脚本在服务器上触发 bash 脚本：

```
<?php
$output = shell_exec('cat update.sh | ssh -l some_user -i key foo.bar.com');
echo "<pre>$output</pre>";
?> 
```

由于我无法控制的问题，我们更改了服务器，我无法运行 PHP（不要问）。我可以在这里使用另一种语言来完成这项任务吗？显然，我可以使用 HTTP POST 来定位。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:09:22.450

您可以使用老式的 cgi-bin 并直接运行 bash 脚本：

```
#!/bin/bash
x=`cat update.sh | ssh -l some_user -i key foo.bar.com`
echo <<EOL
Content-type: text/html

<pre>$x</pre>
EOL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:07:48.693

您可以直接使用 cgi 运行 bash 脚本。

```
#!/bin/bash

OUTPUT=`cat update.sh | ssh -l some_user -i key foo.bar.com`

# You must add following two lines before
# outputting data to the web browser from shell
# script
echo "Content-type: text/html"
echo ""

echo "<html><head><title>Demo</title></head><body>"
echo "$OUTPUT <br>"
echo "</body></html>" 
```

[来自这里](http://www.cyberciti.biz/faq/run-shell-script-from-web-page/)的一些代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T22:08:36.493

这取决于服务器配置。任务非常简单，因此您可以在您的提供商提供的每种（我猜）技术中完成它；）

如果您可以访问 perl：

```
#!/usr/bin/env perl

++$|;
print '<pre>';
system ('your command 2>&1');
print '</pre>'; 
```

Python 和许多其他的类似。

# java - 将图像序列化为字符串

> ID：10391170
> 
> 赞同：2
> 
> 时间：2012-04-30T22:02:09.433
> 
> 标签：java, android, android-image

论坛的好朋友。

我一直在搜索很多，但我找不到如何序列化图像并将其传递给 android 中的字符串。

可能不是这样，如果有人知道并想通知我，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:40:01.160

Base64 将是在字符串中可靠地传输二进制数据（例如图像）的最有效方式。

但是，由于您要求的东西更小，您可以考虑对图像进行 base64 编码，然后压缩结果字符串，然后进行 base64 编码...

它为您节省了几个字节，但不多。在某些情况下，它甚至可能使结果更大。

如果您同时控制服务器和客户端，则应考虑创建另一个允许您发送字节的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:33:38.290

虽然`java.awt.Image`类不是（不实现）`java.io.Serializable`，`javax.swing.ImageIcon`是。因此，您可以按如下方式对其进行序列化：

```
ImageIcon myImage; // declare somewhere
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(baos);
oos.writeObject(myImage);
byte[] theBytes = baos.toByteArray();
StringBuffer buf = new StringBuffer();
for (byte b : theBytes) {
  buf.append((char) b); // cast to char, then append
}
String theString = b.toString(); 
```

我会让你弄清楚如何扭转它，但这里有一个提示：`OutputStream`使用类而不是`InputStream`类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T22:53:58.890

您可以将图像的字节读取到 a`byte[]`然后`byte[]`使用 Base64进行编码，方法[如下](https://stackoverflow.com/questions/4830711/how-to-convert-a-image-into-base64-string)。

# php - 如何在 MySQL 中高效地 INSERT 大量行？

> ID：10391171
> 
> 赞同：1
> 
> 时间：2012-04-30T22:02:12.920
> 
> 标签：php, mysql

我有 100 个回答过问题的用户。只有大约 10% 的用户会选择正确的答案。

我想创建一个新表，其中 90% 回答错误的每一个人都有一行，其中包含他们的用户名和他们提供的错误答案。

最好的方法是什么？

我是否应该首先创建一个输入错误答案的用户名数组，然后执行一个`foreach`循环，每次迭代都有一个 INSERT MySQL？

或者是否有一种 MySQL 方法可以让方法“适用于所有回答不正确的人”？

非常感谢。问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:04:50.190

进行大量单次插入的最快和最简单的方法是：

```
INSERT DELAYED 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:04:36.150

使用多插入 SQL 查询，如下所示：

```
INSERT INTO table1 (col1, col2) VALUES (1, 2), (6, 9), (7, 8) 
```

这将允许您在单个查询中插入所需的行数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T22:09:36.383

假设您有一个存储所有用户和答案的表，如下所示：

```
Table : all_answers

  user_id  |  answer
    joe         a
    mary        b
    john        c 
```

正确答案是 a `c`，你可以有一个类似的表（相同的模式）叫做`wrong_answers`，然后像这样填充它：

```
 INSERT INTO wrong_answers 
        SELECT user_id, answer FROM all_answers WHERE answer <> `c` 
```

您还可以创建一个触发器来为您执行此操作，或者创建一个视图。

如果您存储了其他值`wrong_answers`（例如主键），则需要指示`wrong_answers`要填充哪些值，如下所示：

```
INSERT INTO wrong_answers (user,answer)
    SELECT user, answer FROM answers
    WHERE answer <> 'c'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T22:04:23.390

```
insert into new_table
select (username from old_table where got_it_wrong = 1 ) 
```

# c# - 查询过去 24 小时内创建的所有计算机对象的 LDAP

> ID：10391174
> 
> 赞同：4
> 
> 时间：2012-04-30T22:02:22.533
> 
> 标签：c#, filter, active-directory, ldap

我正在尝试使用 LDAP 查询来返回过去 24 小时内创建的所有计算机对象。我的代码目前如下所示：

```
//Declare new DirectoryEntry and DirectorySearcher
DirectoryEntry domainRoot = new DirectoryEntry("LDAP://rootDSE");
string rootOfDomain = domainRoot.Properties["rootDomainNamingContext"].Value.ToString();
DirectorySearcher dsSearch = new DirectorySearcher(rootOfDomain);

//Set the properties of the DirectorySearcher
dsSearch.Filter = "(&(objectClass=Computer)(whenCreated>" + dateFilter.ToString() + "))";
dsSearch.PageSize = 2000;
dsSearch.PropertiesToLoad.Add("distinguishedName");
dsSearch.PropertiesToLoad.Add("whenCreated");
dsSearch.PropertiesToLoad.Add("description");
dsSearch.PropertiesToLoad.Add("operatingSystem");
dsSearch.PropertiesToLoad.Add("name");

//Execute the search
SearchResultCollection computersFound = dsSearch.FindAll(); 
```

此代码不返回任何对象，并且我确定在过去 24 小时内创建了帐户。

**编辑：**我用以下代码解决了这个问题：

```
GetCompList(DateTime.Now.AddDays(-1)); //This sets the filter to one day previous

//Declare new DirectoryEntry and DirectorySearcher
DirectoryEntry domainRoot = new DirectoryEntry("LDAP://rootDSE");
string rootOfDomain = domainRoot.Properties["rootDomainNamingContext"].Value.ToString();
DirectorySearcher dsSearch = new DirectorySearcher(rootOfDomain);

//Set the properties of the DirectorySearcher
dsSearch.Filter = "(&(objectClass=Computer)(whenCreated>=" + dateFilter.ToString("yyyyMMddHHmmss.sZ") + "))";
dsSearch.PageSize = 2000;
dsSearch.PropertiesToLoad.Add("distinguishedName");
dsSearch.PropertiesToLoad.Add("whenCreated");
dsSearch.PropertiesToLoad.Add("description");
dsSearch.PropertiesToLoad.Add("operatingSystem");
dsSearch.PropertiesToLoad.Add("name");

//Execute the search
SearchResultCollection computersFound = dsSearch.FindAll(); 
```

秘密是这条线：

```
dsSearch.Filter = "(&(objectClass=Computer)(whenCreated>=" + dateFilter.ToString("yyyyMMddHHmmss.sZ") + "))"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:35:10.350

事实证明，答案在于 whenCreated 过滤器的格式。根据[This](http://blog.scottlowe.org/2006/10/11/finding-recently-created-active-directory-accounts/) blogpost ，whenCreated 的过滤器必须格式化为“yyyyMMddHHmmss.sZ”，其中 Z 是与 UTC 的偏移量。我所做的是创建了一个名为

```
private void GetCompList(DateTime dateFilter) //This overloaded version of GetCompList takes a parameter of type DateTime, and only returns computers that were built after dateFilter
    {
        try
        {
            //Convert the dateFilter to a format appropriate for an LDAP query
            int offset = -8;
            //string strDateFilter = convertToCrazyFormat(dateFilter, offset);

            //string strDateFilter = dateFilter.ToString("yyyyMMddhhmmss");

            //Declare new DirectoryEntry and DirectorySearcher
            DirectoryEntry domainRoot = new DirectoryEntry("LDAP://rootDSE");
            string rootOfDomain = domainRoot.Properties["rootDomainNamingContext"].Value.ToString();
            DirectorySearcher dsSearch = new DirectorySearcher(rootOfDomain);

            //Set the properties of the DirectorySearcher
            dsSearch.Filter = "(&(objectClass=Computer)(whenCreated>=" + dateFilter.ToString("yyyyMMddHHmmss.s" + offset.ToString()) + "))";
            dsSearch.PageSize = 2000;
            dsSearch.PropertiesToLoad.Add("distinguishedName");
            dsSearch.PropertiesToLoad.Add("whenCreated");
            dsSearch.PropertiesToLoad.Add("description");
            dsSearch.PropertiesToLoad.Add("operatingSystem");
            dsSearch.PropertiesToLoad.Add("name"); 
```

然后我调用这样的方法：

```
GetCompList(DateTime.Now.AddDays(-1));//Pass in a negative value that represents the time period you want objects from, in this case the last day 
```

# html - “文本装饰：无”在 Bootstrap 中不起作用

> ID：10391177
> 
> 赞同：7
> 
> 时间：2012-04-30T22:02:30.393
> 
> 标签：html, css, twitter-bootstrap, text-decorations

悬停时，我的文本链接有下划线。这是 Bootstrap 中的默认设置。

我想保留这个，除非链接在某个 div 内。

我尝试过的代码（以及几种变体）不起作用。

的HTML：

```
 <div class="wall-entry span5">
            <a href="">
            <img src="http://www.placehold.it/290x163" />
            <div class="wall-address">
                <p>Burgundy Street</p>
                <p>New Orleans, LA</p>
                <p>USA</p>
            </div>
            </a>
        </div> 
```

我的 CSS：

```
.wall-entry     {
                background-color: @black;
                position: relative;

            img {
                opacity:0.4;
                filter:alpha(opacity=40); /* For IE8 and earlier */
                }

            div {
                position: absolute;
                left: 10px;
                bottom: 10px;
                p   {
                    line-height: 18px;
                    margin: 0;
                    font-family: Neuzit Heavy;
                    font-size: 18px;
                    color: white;
                    text-decoration: none;
                    }
                }
            }

div.wall-entry:hover img    {
                            opacity:1;
                            filter:alpha(opacity=100); /* For IE8 and earlier */                    
                            }

a div.wall-entry {text-decoration: none;} 
```

快速说明：我已经测试过`a {text-decoration: none;}`，这确实有效。但是，我不想改变一切。只是这种特定情况下的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T22:04:26.620

对于涉及多个单词的字体，将 font-family 放在引号中，首先：

`font-family: "Neuzit Heavy", sans-serif;`

然后放在`a`下面`.wall-entry a:hover { text-decoration: none; }`

你有顺序调换。您要定位的项目应该在右侧。例如，

`.wrapper .header a`在英文中的意思是“定位在 .header 内的所有锚链接，在 .wrapper 内”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-30T22:10:12.947

这个问题实际上是由 Twitter Bootstrap 的 CSS 文件引起的，而不是你的代码。

Twitter Bootstrap 的 CSS 文件（bootstrap.min.css 是我项目的罪魁祸首）多次给出链接下划线。当它们悬停在它们上时，当它们被聚焦时，它会给它们一个下划线，甚至使它们变成蓝色。

在我的项目中，我专门为锚标记内的文本分配了我自己的颜色，并且浏览器正确地渲染了它们的颜色，就像我分配它们一样，但是，由于文本被包裹在锚标记中，蓝色下划线来自Twitter Bootstrap 样式表仍然出现在我所有的样式文本下方。

我的解决方案：打开 bootstrap.min.css（或任何你的 Bootstrap 样式表）并搜索术语“下划线”，每当您在锚标记选择器中找到“文本装饰：下划线”时，如下所示：

```
a:hover, a:focus {
  color: #2a6496;
  text-decoration: underline;
} 
```

或这个：

```
 a, a:visited {
    text-decoration: underline;
  } 
```

您应该继续删除颜色和文本装饰规则。

这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T22:07:27.710

这行不通

```
a div.wall-entry {text-decoration: none;} // Inside 'a' div with class wall-entry 
```

但这会起作用。

```
div.wall-entry a{text-decoration: none;} // Inside div with class wall-entry 'a' 
```

因为`a`标签有`text-decoration`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T22:47:07.660

如果您的链接在 div 标签内，那么您可以通过以下方式选择您的链接：

```
div > a:hover {
  text-decoration:none;
} 
```

它工作正常，即使使用了 boostrap。

# javascript - 如何将 JavaScript 代码保存在 localStorage 中并稍后执行？

> ID：10391178
> 
> 赞同：0
> 
> 时间：2012-04-30T22:02:54.917
> 
> 标签：javascript, jquery, local-storage

我想知道是否甚至可以保存一些 js 代码并稍后将其拉起并执行。

我基本上面临两个问题：

*   如何对javascript代码进行字符串化？
*   如何执行字符串化的javascript代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:04:51.017

您应该能够检索文本 blob 并将其动态放入`<script>`标记中。

这适用于 Chrome 和 MSIE 9 控制台 - 我还没有尝试 Firefox：

```
var s = document.createElement('script');
s.appendChild(document.createTextNode('alert("hello")'));
document.head.appendChild(s); 
```

至于对代码进行字符串化，通常可以调用`myFunction.toString()`用户提供的函数。

# c# - ListBox Numbers，获取数字的平均值

> ID：10391179
> 
> 赞同：2
> 
> 时间：2012-04-30T22:03:09.380
> 
> 标签：c#, listbox, streamreader

这是我的问题的问题：

“使用记事本将以下值放在文本文件中：86、97、144、26。为了简化问题，可以将每个值放在单独的行中。编写 C# 程序从文本文件中检索值并打印值的平均值，格式为小数点后两位。

我已经有文本文件在标题为...“lstBoxNumbers”的列表框中显示四个数字的列表

我假设简单的方法是将它过滤到列表框中的数字并使用 foreach 循环来计算平均值。我决定采用单击按钮的方式，在文本框中显示平均值。这就是我到目前为止所拥有的。

```
private void btnAverage_Click(object sender, EventArgs e)
{
    //Shows Average Of Numbers From Text File

    decimal average;

    txtAverage.Text = Convert.ToString(0);

    foreach (string itemInList in lstBoxNumbers.Items)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:05:45.023

试试这个：（你必须自己将类型转换为双精度，因为这是家庭作业）

```
List<double> newNumberList = new List<double>(); // create a new list 

foreach (string itemInList in lstBoxNumbers.Items) // loop round all of your items
{
   newNumberList.Add(itemInList);  // You will have to convert this to a double, since this is homework you can research on how to convert types (Casting)
}   

 double avg = newNumberList.Average(); // Will give you the average you are looking for 
```

请注意，提供的示例使用 LINQ。我假设您的作业将标记在用于计算平均值的算法上。要在不使用 LINQ 的情况下完成此操作，您希望在 foreach 循环中跟踪运行总计，因此对于您添加的每个项目，您应该将其附加到该总计，然后除以列表中的项目数。

例如，如果您的列表中有以下项目：

*   10
*   20
*   300
*   400

您希望平均值为 182.5 (10 + 20 + 300 + 400) / 列表中的 4 个项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:06:56.290

容易，但我有点不好意思为你回答你的作业。将数字转换为数组或列表，然后使用 Linq 的 Average 方法：

[http://msdn.microsoft.com/en-us/library/system.linq.enumerable.average.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.average.aspx)

# objective-c - 方法调用 - Cocoa/Obj-C

> ID：10391181
> 
> 赞同：0
> 
> 时间：2012-04-30T22:03:19.137
> 
> 标签：objective-c, macos, cocoa

我正在学习可可...我尝试了不同的方法来做到这一点，但我仍然处于亏损状态...

我的实现中有这个方法：

```
- (void)closeStream:(NSStream *)theStream {

    [theStream close];
    [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

} 
```

如何从我的@synthetize 中的 IBAction 调用它？

```
 - (IBAction)connect:(id)sender {

        if ([[connectNOK stringValue] isEqualToString:@"Disconnected"]) {

            [connectButton setTitle:@"Disconnect"];   
            NSString * hostFromField = [hostField stringValue];

            CFReadStreamRef readStream;
            CFWriteStreamRef writeStream;
            CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)hostFromField, [portField intValue], &readStream, &writeStream);
            inputStream = (NSInputStream *)readStream;
            outputStream = (NSOutputStream *)writeStream;

            [inputStream setDelegate:self];
            [outputStream setDelegate:self];

            [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

            [inputStream open];
            [outputStream open];

        } else {

            [connectButton setTitle:@"Connect"];

            // I want to call this method here   
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:06:21.813

如果该方法与该方法在**同一个类**`closeStream:`中定义，则必须使用：**`connect:`**

 **```
[ self closeStream: someStream ]; 
```

您需要传递`someStream`的对象在哪里。`NSStream`

**`self`**关键字是指类的当前**实例**。

如果您不知道它或它的含义，我建议您在尝试做/编码任何事情之前先看一下**[Objective-C 语言基础知识](http://developer.apple.com/library/mac/referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/)**[，也许之后看完整的语言参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)。

**编辑：**

我可以在您的代码中看到您的`connect:`方法根据按钮标签的值“切换”连接。

这不是一个很好的设计，你知道，但你会在这里遇到其他问题。

我猜你想在必要时关闭输入和输出流。
问题是，当`connect`第二次调用该方法时，`inputStream`和`outputStream`变量​​不再可访问，因为它们是[**局部**变量](http://en.wikipedia.org/wiki/Local_variable)。

您可能需要将它们存储为[**实例**变量](http://en.wikipedia.org/wiki/Instance_variable)，以便稍后引用它们。

再一次，看起来你真的应该从阅读一些关于编程原则的文档开始，以及一些面向对象的编程原则。
不要试图走得太快。知识是一切的关键，所以从阅读我之前提到的文档开始。**

# ios - 在 iPad 上离线访问 svn diff 信息

> ID：10391183
> 
> 赞同：2
> 
> 时间：2012-04-30T22:03:55.500
> 
> 标签：ios, svn, pdf, offline

我见过几个允许访问 svn 日志的 iOS 应用程序，但没有一个比 iOctocat 更适合 git。看来我可以在网络上使用 iOctocat 来收集所有数据，然后离线查看。我需要为 svn 而不是 git 这样做。

我正在寻找一种在电子阅读器上以离线状态读取 svn 日志提交差异的方法（更喜欢 iPad，但如果需要可以切换到 Kindle Fire。）是否有任何 OSX 软件/脚本可以获得 svn 服务器日志，执行差异，并输出到文件中以便在 iPad 上查看，或者输出到可以在任何地方查看的 PDF？

我正试图在我 1.5 小时的巴士车程中提高工作效率，这可能会有很大帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:11:23.913

Git 是一个 DVCS，它包括在每台“客户端”机器上拥有整个存储库及其整个历史。SVN 是一个集中式 VCS，其中工作副本仅包含每个文件的最新版本。历史仅在服务器上可用。

如果离线工作如此重要，git显然是一个更好的选择，你应该切换到git。我认为任何 SVN 工具都不会让您离线访问以前的版本，因为这不是 SVN 的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:32:15.297

如果您只想查看日志，则可以轻松生成 PDF 文件。命令：

```
svn log | enscript -o log.ps 
```

从日志中为当前工作目录创建一个 PostScript 文件。您可以按照以下方式进行操作：

```
pstopdf log.ps 
```

生成`log.pdf`一个包含您的 Subversion 日志的 PDF 文件。显然，您可以随心所欲地自动化该过程。您甚至可以每隔几个小时运行一次该过程，并将结果发布到易于获取的内部 Web 服务器上。您还可以通过配置使您生成的 PDF 文件`enscript`更加精美，它具有大量选项（字体、边距、列、页眉、页脚等），因此您可以制作一个非常漂亮的文件。

为方便起见，这里有一个版本：

```
svn log -l 10 | enscript -o - | pstopdf -i -o svnlog.pdf 
```

将输出限制为 10 个最近的日志条目的`-l 10`选项`svn log`——根据需要自定义，或使用其他选项自定义输出。

下一步是编写一个 shell 脚本或其他小程序，过滤日志以仅显示最近的更改，为更改的文件生成差异，并将所有内容打包成 PDF 供您查看。正如你从上面看到的，你需要做的工具已经存在——你只需要以正确的顺序把它们放在一起。

# ruby-on-rails - 你如何测试一个依赖于另一个模型的模型？

> ID：10391184
> 
> 赞同：0
> 
> 时间：2012-04-30T22:04:14.840
> 
> 标签：ruby-on-rails, ruby, testing, rspec, associations

我有`User`、`Account`和`Role`模型。用户可以单独存在。帐户必须通过角色绑定到用户。一个帐户必须至少有一个“所有者”类型的角色记录。我不确定如何在 RSpec 和 FactoryGirl 中进行测试。

```
# user_id, account_id, role
Role < ActiveRecord::Base
  belongs_to :user
  belongs_to :account
end

User < ActiveRecord::Base
  has_many :roles
  has_many :accounts, through: roles
  accepts_nested_properties_for :accounts
end

Account < ActiveRecord::Base
  has_many :roles
  has_many :users, through: roles
end 
```

如果用户未登录，Accounts.new 将显示用户和帐户表单。如果用户已登录，则只会显示“帐户”表单。问题是，我不确定在尝试测试关联时 RSpec 中的角色和帐户会是什么样子。

此测试失败（数组返回为空）：

```
describe Account do
  let(:user) { FactoryGirl.create(:user) }
  before { @account = user.accounts.build(title: "ACME Corporation", subdomain: "acme") }
  subject { @account }
  it { should respond_to(:users) }
  its(:users) { should include(user) } 
```

然后是用户登录和未登录时的测试增加了复杂性。对于类似的用例，我可以看到任何参考示例代码吗？我也不确定在 roles_spec 中测试什么，以及哪些属于 accounts_spec/user_spec。

工厂：

```
FactoryGirl.define do
  factory :user do
    name                  "Mickey Mouse"
    email                 "mickey@disney.com"
    password              "m1ckey"
    password_confirmation "m1ckey"
  end
  factory :account do
    title     "ACME Corporation"
    subdomain "acme"
  end
  factory :role do
    user
    account
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:06:34.277

您可以通过使用模拟框架[“模拟”](http://en.wikipedia.org/wiki/Mock_object)其他对象来测试依赖于其他对象的对象。有许多[模拟框架](http://www.ibm.com/developerworks/web/library/wa-mockrails/index.html)允许您执行此操作。

# php - PHP 包含在 select 元素中

> ID：10391206
> 
> 赞同：1
> 
> 时间：2012-04-30T22:05:58.630
> 
> 标签：php, html

在里面`list.php`，我有一个`<option>`正确书写的元素的 huuuuge 列表。在 上`page.php`，我正在尝试在元素`<?php include ('path/to/list.php'); ?>` *内部*使用。`<select>`当页面加载时，选择元素存在，但没有加载任何选项。

完整设置：

```
<select>
    <?php include('php/list.php'); ?>
</select> 
```

然后是list.php：

```
<option>Option 1</option>
<option>Option 2</option>
<option>Option 3</option>
...
<option>Option 150</option> 
```

**我知道**文本元素不会在选择节点内呈现，但是这不应该按预期工作吗？

**编辑** 因此，经过深思熟虑并花了大约一个小时试图弄清楚为什么简单的 PHP 不起作用，答案是：确保输入文件的完整路径。保持这个问题，以便未来的用户可以查看完成此任务的几种不同方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:08:47.257

考虑到您的 list.php 具有 HTML，这是不可能的（HTML 会自动输出而留下 ob_* 函数）。你在其他地方有一些错误..

尝试一下`require`，如果失败，您可以看到致命错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:08:17.053

试试这个

```
<?=file_get_contents('php/list.php')?> 
```

# php - 加速 fsockopen 以进行服务器监控

> ID：10391207
> 
> 赞同：1
> 
> 时间：2012-04-30T22:06:05.513
> 
> 标签：php, fsockopen

我正在开发服务器监控服务，每 5 分钟需要监控大约 10.000 台主机。我尝试使用**fsockopen**连接到端口 80 并测试服务器。它工作正常不幸的是它很慢，因为它默认打开阻塞连接。

我知道有一个可用的**stream_set_blocking**函数，但是如何使用它呢？

另外，我真的想知道在服务器监控服务方面使用 fsockopen 是否是一种好方法。

# git - 如何从我的 git repo 中找到并删除未知的巨型对象？

> ID：10391212
> 
> 赞同：3
> 
> 时间：2012-04-30T22:06:26.693
> 
> 标签：git

在某个地方，一些巨大的文件被添加到我拥有的项目的 git 存储库中。当我在一台新机器上克隆这个项目时，该项目似乎在 37% 上“卡住”了很长一段时间。这个项目应该在几分钟内完成克隆。

我怎样才能找出导致这个冗长克隆时间的对象？

我知道如何“git rm”文件。即使它是一些只存在于历史中的旧对象，那会删除它吗？

我不太清楚，一旦你“git rm”一个文件，它是从存储库中*完全*删除，还是只是继续。

任何帮助都深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T22:44:16.697

[Pro Git](http://progit.org/book/)对如何执行此操作有很好的分步[说明。](http://progit.org/book/ch9-7.html#removing_objects)这需要一些工作，但可以可靠地完成。我不能将以下解释归功于 - 我只是从该网站窃取它（有关更详细的描述，请参阅原始网站）：

1.  打包你的回购：

    ```
    $ git gc 
    ```

2.  在 git 数据库中查找最大的项目。以下命令将列出三个最大的命令，其中最大的一个是输出的最后一行（下面的示例包括您要键入的命令和示例输出）：

    ```
    # In the following command, replace the pack*.idx filename
    # with whatever filename you find in the .git/objects/pack
    # directory:
    $ git verify-pack -v .git/objects/pack/pack-3f8c0...bb.idx | sort -k 3 -n | tail -3
    e3f094f522629ae358806b17daf78246c27c007b blob   1486 734 4667
    05408d195263d853f09dca71d55116663690c27c blob   12908 3478 1189
    7a9eb2fba2b1811321254ac360970fc169ba2330 blob   2056716 2056872 5401 
    ```

3.  询问与最大 blob 关联的文件名：

    ```
    $ git rev-list --objects --all | grep 7a9eb2fb
    7a9eb2fba2b1811321254ac360970fc169ba2330 git.tbz2 
    ```

4.  获取该文件的历史记录：

    ```
    $ git log --pretty=oneline -- git.tbz2
    da3f30d019005479c99eb4c3406225613985a1db oops - removed large tarball
    6df764092f3e7c8f5f94cbe08ee5cf42e92a0289 added git tarball 
    ```

5.  用于`git filter-branch`删除对该文件的所有引用：

    ```
    $ git filter-branch --index-filter \
       'git rm --cached --ignore-unmatch git.tbz2' -- 6df7640^..
    Rewrite 6df764092f3e7c8f5f94cbe08ee5cf42e92a0289 (1/2)rm 'git.tbz2'
    Rewrite da3f30d019005479c99eb4c3406225613985a1db (2/2)
    Ref 'refs/heads/master' was rewritten 
    ```

6.  清理一些对该 blob 的剩余引用，然后`gc`再次重新打包：

    ```
    $ rm -Rf .git/refs/original
    $ rm -Rf .git/logs/
    $ git gc
    Counting objects: 19, done.
    Delta compression using 2 threads.
    Compressing objects: 100% (14/14), done.
    Writing objects: 100% (19/19), done.
    Total 19 (delta 3), reused 16 (delta 1) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:39:09.487

您可以通过以下命令遍历提交树：

```
git ls-tree <first-commit-hash> -r --long > 1.txt 
```

然后对大于 10Mb 的 blob 进行 grep 生成的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T22:12:09.287

```
find / -size +10M -ls 
```

这将找到大于 10MiB（不完全是 10MB）的文件。

这是一个很好的解释，应该对您有所帮助。

[https://askubuntu.com/a/36114](https://askubuntu.com/a/36114)

Github 有[一篇很好的](http://help.github.com/remove-sensitive-data/)文章，关于从存储库的所有提交版本中删除特定文件。

# c# - 在 C# 中使用 PictureBox 上的位图绘图

> ID：10391215
> 
> 赞同：1
> 
> 时间：2012-04-30T22:06:36.287
> 
> 标签：c#, bitmap, drawing, picturebox, graphic

我的第一个问题在这里。而且我确定这很容易，但是我在任何地方都找不到解决方案，我已经阅读了很多书，只是无法理解我需要做什么：

*   我有一个要存储的 *.gif 文件，`System.Drawing.Bitmap`以便我可以访问 GetPixel() 方法
*   我想让我的绘图有一些控制（目前正在尝试`PictureBox`）

到目前为止，我得到了什么：

*   我从文件创建了一个模板`Bitmap`-并且有效（代码中的*map_t*）
*   我创建了一个实际绘制的位图（*map*）
*   我可以将我的 PictureBox 图像设置为位图
    *   我**无法**更改此位图。或者我可以，但结果不显示
    *   我想我必须`Graphic`从那个位图创建，然后改变它。我不知道我错过了什么。

这是代码： MapCanvas 是表单上的 PictureBox，一切都在 MouseMove 中，因为我试图在指针周围画一些圆圈 - 没有用，所以我最终得到了这段代码，它也不起作用。我已经阅读了我能找到的每一个问题，没有任何帮助......这是代码：

```
namespace Projekt_innowacje
{
    public partial class MapForm : Form
    {
        Bitmap map_t;
        Bitmap map;

        public MapForm()
        {
            InitializeComponent();
            map_t = new Bitmap("map.gif", true);
            map = new Bitmap(map_t.Width, map_t.Height);
            MapCanvas.Image = map;
        }

        private void MapCanvas_MouseMove(object sender, MouseEventArgs e)
        {
            Graphics canvas = Graphics.FromImage(map);
            for (int i = 0; i <= map.Width; i++)
                for (int j = 0; j <= map.Height; j++)
                    if (map.GetPixel(i, j) == Color.Red)
                        canvas.DrawLine(new Pen(Color.Blue), i, j, i + 1, j + 1);

                        // map.SetPixel(i, j, map.GetPixel(i, j)); // also doesn't work         

            //MapCanvas.Refresh(); 
            MapCanvas.Invalidate();

            canvas.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:02:24.077

`map`您显示的代码永远不会修改画布/地图图像，除非您对未共享的图像进行其他更改。`map.GetPixel`但是，在您的循环中，您 test`map`会在构造函数中创建为空白图像，因此它的任何像素都不会是`Color.Red`. 您是否打算改为针对您的模板进行测试？

此外，您可能想看看[这个](https://stackoverflow.com/q/7464994/94928)关于比较颜色的问题。它建议对于基本的颜色比较使用`.ToArgb()`颜色结构上的方法，`==`并且`Equals`不仅仅比较颜色值。

# biztalk - biztalk 将处理后的文件放入某个文件夹

> ID：10391219
> 
> 赞同：0
> 
> 时间：2012-04-30T22:07:19.660
> 
> 标签：biztalk

我有一个要求：

如果我得到一个文件，我会将该文件的内容放入数据库中，

如果该文件中有任何错误，我会将其放入错误文件夹中。

我可以做这样的事情吗？假设我有一个“已处理”文件夹和另一个“未处理”文件夹。如果出现错误，结果将进入“未处理”，如果没有错误，则将进入“已处理”。

如果 biztalk 处理了一些文件然后只放入某个文件夹，我不知道如何实现。

我想如果我将过滤选项 BTS.ReceivePortName 它也会将错误文件放入进程文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:29:20.063

***创建一个额外的发送端口来归档所有***输入文件非常容易。如果有错误，您只需找到文件，修复问题，然后重新删除它。创建一个发送端口，设置过滤器以选择您想要的输入（如您已经知道的 BTS.ReceivePortName），使用直通管道，然后将其配置为写入文件。将文件写入备份目录。

如果您只想捕获错误，那么您将不得不进行额外的设置。您必须使用编排。在编排中围绕您的正常处理放置一个范围形状。放置异常以捕获范围形状上的错误。在异常处理程序中，使用发送形状构造原始消息的副本并将其写入发送端口。添加一个表达式以将一些有用的消息写入事件日志，以便您可以调试故障。

# php - PHP 5.3 OOP 需要答案

> ID：10391220
> 
> 赞同：0
> 
> 时间：2012-04-30T22:07:19.837
> 
> 标签：php, oop

请告诉我为什么：

```
class ClassOne {
    protected $a = 10;

    public function changeValue($b) {
        $this->a = $b;
    }
}

class ClassTwo extends ClassOne {
    protected $b = 10;

    public function changeValue($b) {
        $this->b = 10;
        parent::changeValue($this->a + $this->b);
    }

    public function displayValues() {
        print "a: {$this->a}, b: {$this->b}\n";
    }
}

$obj = new ClassTwo();

$obj->changeValue(20);
$obj->changeValue(10);    
$obj->displayValues(); 
```

打印`a: 30`和`b: 10`.

我将不胜感激。谢谢 ：）

附带说明：这实际上是我看过的一个考试问题，但不太明白。谢谢你的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:13:29.323

除了“它正在执行您编写的逻辑”之外，我不知道如何总结此执行。

我在每个调用中添加了注释以显示中间步骤：

```
$obj = new ClassTwo(); // a = 10, b = 10

$obj->changeValue(20); // Sets b = 10, a = 20 (a = 10 + 10 = 20)
$obj->changeValue(10); // Sets b = 10, a = 30 (a = 20 + 10 = 30)
                                                   ^
                                                   Previous value of a
$obj->displayValues(); 
```

你可能会对此感到困惑：

```
public function changeValue($b) {
    $this->b = 10;
    parent::changeValue($this->a + $this->b);
} 
```

因为`$b`从来没有分配给任何东西。所以不管你传递给什么，当你调用两次时`changeValue`，你总是会得到。`30, 10``changeValue`

例如：

```
$obj->changeValue(0); 
$obj->changeValue(0); 
```

还是会输出`a: 30 and b: 10`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T22:15:21.203

传递给的参数`changeValue()`未使用。

对该方法的每次调用都会导致添加`$this->a + $this->b`，但您永远不会在分配`a`或添加时使用传入的值`b`。

基本上每次调用都会`changeValue()`增加 10 到`$this->a`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T22:15:56.697

我不知道您期望什么，但请注意 ClassTwo->changeValue 不使用 $b 参数...（我敢肯定有人会说这不是答案，也不是，但是它应该是一个足够大的提示来找出问题。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T22:15:42.323

```
public function changeValue($b) {
    $this->b = 10;
    parent::changeValue($this->a + $this->b);
  } 
```

$this->b **!=** $b 作为 changeValue 函数的参数 也许这让你感到困惑。

# android - 如何使用 Android 通过 POST 请求发送 JSON 对象

> ID：10391222
> 
> 赞同：1
> 
> 时间：2012-04-30T22:07:38.673
> 
> 标签：android, json, client-server

我正在尝试构建一个小型应用程序，其中应用程序将在 JSON 对象的帮助下与 php 脚本进行通信。我成功地实现了 GET 请求测试应用程序，但是使用带有 post 的 JSON 会产生问题。该代码没有产生错误，但我的 php 脚本回复除了一个空的 Array() 之外什么都没有，这意味着没有通过代码的连接发送任何内容：

```
<?php  print_r($_REQUEST);  ?> 
```

并尝试

```
<?php  print($_REQUEST['json']); ?> 
```

使用未找到 json 变量的错误将 HTML 扔回应用程序。

我已经尝试过这里提到的一些解决方案，包括：[How to send a JSON object over Request with Android?](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android) 以及[如何使用 android 通过 httpclient 请求发送 json 对象，](https://stackoverflow.com/questions/9389842/how-to-send-a-json-object-over-httpclient-request-with-android)所以如果您能指出我的错误并简要描述我到底做错了什么，那就太好了。谢谢。

这是 JSON 对象转换为字符串然后附加到 Post 变量的代码片段。

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppostreq = new HttpPost(wurl);
        StringEntity se = new StringEntity(jsonobj.toString());
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        httppostreq.setEntity(se);
            //httppostreq.setHeader("Accept", "application/json");
        //httppostreq.setHeader("Content-type", "application/json");
        //httppostreq.setHeader("User-Agent", "android");
        HttpResponse httpresponse = httpclient.execute(httppostreq);
        HttpEntity resultentity = httpresponse.getEntity(); 
```

这是通过wireshark收集的TCP Stream Dump，如果它可以提供帮助：

```
POST /testmysql.php?test=true HTTP/1.1
Content-Length: 130
Content-Type: application/json;charset=UTF-8
Content-Type: application/json;charset=UTF-8
Host: 192.168.100.4
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)
{"weburl":"hashincludetechnology.com","header":{"devicemodel":"GT-I9100","deviceVersion":"2.3.6","language":"eng"},"key":"value"}HTTP/1.1 200 OK
Date: Mon, 30 Apr 2012 22:43:10 GMT
Server: Apache/2.2.17 (Win32)
Content-Length: 34
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html
Array
(
    [test] => true
)
Test // echo statement left intentionally. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:30:40.053

您在服务器端使用 PHP，因此您的 HTTP 实体必须是多部分编码的实体。请参阅[此链接](http://zybnet.com/java-http-client-and-post-requests/)。您正在使用字符串实体，但这是不正确的。它必须是 MultipartEntity，它模拟您在网页中提交表单时浏览器所做的事情。MultipartEntity 应该在 httpmime jar 中。

拥有多部分实体后，只需添加一个名为“json”的部分，并将其内容设置为 json 编码对象的字符串表示形式。

请注意，这个答案是因为您在服务器端使用 PHP，因此您必须使用它的“协议”通过 $_REQUEST 读取变量。如果您在服务器端使用自己的请求解析器，那么即使是 StringEntity 也可以。请参阅[HTTP_RAW_POST_DATA](http://www.php.net/manual/en/reserved.variables.httprawpostdata.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:44:10.297

下面应该工作。确保为您的表单帖子在顶部所期望的内容设置适当的键。我还介绍了如何发送图像以及其他各种 json 数据，如果不需要，只需删除这些行。

```
static private String postToServerHelper(
            String action,
            JSONObject jsonData,
            byte[] imageData){

        // keys for sending to server
        /** The key for the data to post to server */
        final String KEY_DATA = "data";
        /** The key for the action to take on server */
        final String KEY_ACTION = "action";
        /** The return code for a successful sync with server */
        final int GOOD_RETURN_CODE = 200;
        /** The key for posting the image data */
        final String KEY_IMAGE = "imageData";
        /** The image type */
        final String FILE_TYPE = "image/jpeg";
        /** The encoding type of form data */
        final Charset ENCODING_TYPE = Charset.forName("UTF-8");

        // the file "name"
        String fileName = "yourFileNameHere";

        // initialize result string
        String result = "";

        // initialize http client and post to correct page
        HttpClient client = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://www.yourdomain.com/yourpage.php");

        // set to not open tcp connection
        httpPost.getParams().setBooleanParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, false);

        // build the values to post, the action and the form data, and file data (if any)
        MultipartEntity multipartEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        try{
            multipartEntity.addPart(KEY_ACTION, new StringBody(action, ENCODING_TYPE));
            multipartEntity.addPart(KEY_DATA, new StringBody(jsonData.toString(), ENCODING_TYPE));
            if (imageData != null){
                multipartEntity.addPart(KEY_IMAGE, new ByteArrayBody(imageData, FILE_TYPE, fileName));
            }
        }catch (Exception e){
            return e.getMessage();
        }

        // set the values to the post
        httpPost.setEntity(multipartEntity);

        int statusCode= -1;

        // send post
        try {
            // actual send
            HttpResponse response = client.execute(httpPost);

            // check what kind of return
            StatusLine statusLine = response.getStatusLine();
            statusCode = statusLine.getStatusCode();

            // good return
            if (statusCode == GOOD_RETURN_CODE) {
                // read return
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                        builder.append(line + "\n");
                }
                content.close();
                result = builder.toString();

                // bad return   
            } else {
                return String.parse(statusCode);
            }

            // different failures   
        } catch (ClientProtocolException e) {
            return e.getMessage();
        } catch (IOException e) {
            return e.getMessage();
        }

        // return the result
        return result;  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:11:20.807

DefaultHttpClient httpClient = new DefaultHttpClient(); HttpPost httpPost = 新的 HttpPost(url);

```
 JSONObject clientList = new JSONObject ();
            clientList.put("name","");
            clientList.put("email","");
            clientList.put("status","");
            clientList.put("page","");

            JSONObject listclient = new JSONObject ();
            listclient.put("mydetail", clientList);

   //--List nameValuePairs = new ArrayList(1);
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("token", tokenid));
            nameValuePairs.add(new BasicNameValuePair("json_data", listclient.toString()));

            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            Log.d("JSON",nameValuePairs.toString());

            //-- Storing Response
            HttpResponse httpResponse = httpClient.execute(httpPost); 
```

# oauth-2.0 - 谷歌访问令牌过期时间

> ID：10391225
> 
> 赞同：163
> 
> 时间：2012-04-30T22:07:55.370
> 
> 标签：oauth-2.0

当我`access_token`从 Google API 获得一个时，它带有一个`expires_in`值。根据文档，该值表示“访问令牌的剩余生命周期”。

这个值的单位是什么？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-10-08T20:00:26.000

规范说秒：

[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-22#section-4.2.2](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-22#section-4.2.2)

```
expires_in
    OPTIONAL.  The lifetime in seconds of the access token.  For
    example, the value "3600" denotes that the access token will
    expire in one hour from the time the response was generated. 
```

我同意 OP 的观点，即谷歌不记录这一点是粗心的。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-04-30T22:22:57.903

看看：[https ://developers.google.com/accounts/docs/OAuth2UserAgent#handlingtheresponse](https://developers.google.com/accounts/docs/OAuth2UserAgent#handlingtheresponse)

它说：

> 响应中包含的其他参数包括`expires_in`和 `token_type`。这些参数以秒为单位描述令牌的生命周期...

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-02-18T12:51:48.730

由于没有公认的答案，我将尝试回答这个问题：

```
[s] - seconds 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-01-23T10:30:30.767

来自[Google OAuth2.0 for Client](https://developers.google.com/identity/protocols/OAuth2UserAgent#validate-access-token)文档，

*   **expires_in** -- 令牌失效前剩余的秒数。

# c# - 模型中的 Mvvm 嵌套属性已更改

> ID：10391226
> 
> 赞同：1
> 
> 时间：2012-04-30T22:07:57.957
> 
> 标签：c#, mvvm, model, nested, inotifypropertychanged

我使用包含模型类 B 列表的模型类 A。每个模型（A 和 B）都实现 INotifyPropertyChanged，并且在属性更改时正确触发事件。模型 A 已从模型 B 订阅了此事件，如果发生此事件，模型 A 会触发另一个更改的属性。

我的问题是我想在应该将更改写入数据库的服务类中侦听模型 A（包括嵌套模型属性）中的更改。但是当模型 A 触发 propertychanged 时，在我的服务类中，我无法知道已更改的属性是属于模型 A 还是属于模型 B 之一。

```
public class Model B : ObservableObject
{
...
  public int Property1
  {
    get{return property1;}
    set{ this.property1 = value;
         OnPropertyChanged("Property1");  
       }
  }
} 

public class ModelA : ObservableObject
{
 ...
 ObservableCollection<ModelB> modelsB;
 ...

 public ObservableCollection<ModelB> ModelsB
 {
   get
   {
     if(modelsB == null)
     {
       this.modelsB = new ObservableCollection<ModelB>();
       this.modelsB.CollectionChanged+= ModelBListChanged;
     }
     return modelsB;
   }
 }

  private int property2;
  public int Property2
  {
    get{return property2;}
    set{ this.property2 = value;
         OnPropertyChanged("Property2");  
       }
  }

 private void ModelBListChanged(object sender, NotifyCollectionChangedEventArgs args)
 {
    if(e.NewItems != null)
      {
        foreach(ObservableObject item in e.NewItems)
        {
          item.PropertyChanged += NotifyPropertyChanged;
        }
      }
      if (e.OldItems != null)
      {
        foreach (ObservableObject item in e.OldItems)
        {
          item.PropertyChanged -= NotifyPropertyChanged;
        }
      }
 }

 ...

}

public class SomeService
{
   ...

  ObservableCollection<ModelA> modelsA;

  public ObservableCollection<ModelA> ModelsA
  {
     get
     {
       if(modelsA == null)
       {
         modelsA = new ObservableCollection<ModelA>();

             //fill with data...
         ....
         foreach(...)
         {
        ModelB mb = new ModelB();
            //fill mb ...
        ...

        mb.PropertyChanged += ModelBChanged;
        modelsA.ModelsB.Add(mb);
         }
         ....
         modelsA.PropertyChanged += ModelsAChanged;
       }
       return modelsA;
     }
  }

  ...

  private void ModelsAChanged(object sender, PropertyChangedEventArgs args)
  {
    // determine the property that has changed and call the correct
    // update function for this property to write the data to database.

var ma = (ModelA) sender;

      switch(args.PropertyName)
      {
     ...
        case ModelA.Property1:
          //update database with function for property 1
          break;
        case ModelA.Property2:
          //update database with function for property 2
          break;
     ...
      }
  }

  private void ModelBChanged(object sender, PropertyChangedEventArgs args)
  {
    // How do I know to which ModelA this ModelB sender belongs?

var mb = (ModelB) sender;
switch(args.PropertyName)
      {
     ...
        case ModelB.Property1:
          //update database with function for property 1 of model B
          break;
       ...
      }
  }
} 
```

这怎么可能解决？

问候，

塔比纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:28:24.690

我不确定您当前的代码是否可以编译？您正在将`CollectionChanged`B 集合中的一个`PropertyChanged`事件转换为 A 类上的一个事件，但是您正在引用`PropertyName`a 中不存在的事件`NotifyCollectionChangedEventArgs`。

即使你可以让它工作，它也没什么意义，因为`CollectionChanged`事件可以引用多个项目，而`PropertyChanged`只能引用一个。

你的 B 集合已经是 A 的公共财产了，为什么不能直接订阅你的服务的变化呢？例如。

```
public class SomeService
{
    ObservableCollection<ModelA> modelsA;

    public ObservableCollection<ModelA> ModelsA
    {
        get
        {
            if(modelsA == null)
            {
               modelsA = new ObservableCollection<ModelA>();
               //fill with data...

               modelsA.CollectionChanged += ModelsAChanged;

               foreach (ModelA A in modelsA)
                   A.ModelsB.CollectionChanged += ModelsBChanged;
            }

            return modelsA;
        }
    }

    private void ModelsAChanged(object sender, NotifyCollectionChangedEventArgs args)
    {
        //remember to subscribe to ModelsB in any new ModelA instance that get added 
        //to the modelsA collection too, and unsubscribe when they get removed.
    }

    private void ModelsBChanged(object sender, NotifyCollectionChangedEventArgs args)
    {

    }
} 
```

# javascript - jQuery 验证方法

> ID：10391227
> 
> 赞同：0
> 
> 时间：2012-04-30T22:08:11.233
> 
> 标签：javascript, jquery, ajax, asp.net-mvc

这是我的 JS 代码：

```
<script type="text/javascript">
  $(document).ready(function () {
      $("#form").validate({
          rules: {
              sub: "required",
              msg: "required"
          }
      });
  }); 
</script> 
```

这是脚本导入：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>     
<script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/validate/jquery.validate.js"></script> 
```

这是我的 MVC 表单：

```
<% using (Html.BeginForm("RepR", "Agence", FormMethod.Post, new { @class = "search_form", @id= "form"})) { %>
  <%: Html.ValidationSummary(true) %>
  <%: Html.Hidden("to", Model.mailc) %>
  <p>
    Sujet : <br />
    <%: Html.TextBox("sub")%> 
    <%: Html.ValidationMessage("sub","Suijet est obligatoire") %>
    <br />
    Message : <br />
    <%: Html.TextArea("msg", new { @cols = "50", @rows = "5" })%> 
  </p>
  <input type="submit" value="Envoyer" class="button"/> 
```

这是 Html 代码源：

```
 <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
  <script src="../../Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>
  <script src="../../Scripts/jquery.ui.core.min.js" type="text/javascript"></script>
  <script src="../../Scripts/jquery.ui.widget.js" type="text/javascript"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
  <script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/validate/jquery.validate.js"></script>
</head>
    <body>
        //html code
        <script type="text/javascript">
            $(document).ready(function () {
                $("form").validate({
                    rules: {
                      sub: "required",
                      msg: "required"
                    }
                });
            }); 
        </script> 

    //html code
    <form action="/Agence/RepR/9" class="search_form" method="post">
        <input id="to" name="to" type="hidden" value="kaouach.ahmed@gmail.com" />
        <p>
            Sujet : <br />
            <input id="sub" name="sub" type="text" value="" /> 
            <span class="field-validation-valid" data-valmsg-for="sub" data-valmsg-replace="false">Suijet est obligatoire</span>
            <br />
             Message : <br />
            <textarea cols="50" id="msg" name="msg" rows="5"></textarea> 
        </p>
        <input type="submit" value="Envoyer" class="button"/>
    </form> 
```

谁能告诉我为什么它不起作用，即不进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:21:45.550

您的验证插件链接返回 404 错误：[http ://bugs.jquery.com/view/trunk/plugins/validate/jquery.validate.js](http://bugs.jquery.com/view/trunk/plugins/validate/jquery.validate.js)

您可以将其用于开发：http: [//jzaefferer.github.com/jquery-validation/jquery.validate.js](http://jzaefferer.github.com/jquery-validation/jquery.validate.js)

# git - 如果 scalaVersions 不同，SBT git 依赖项会产生错误

> ID：10391229
> 
> 赞同：1
> 
> 时间：2012-04-30T22:08:29.457
> 
> 标签：git, scala, sbt, playframework-2.0

所以我在 Scala 中使用 Play 2，设置了一些依赖项，我想我在解决 SBT 中的一个错误。其他人见过这样的吗？

我尝试[按照指示](https://github.com/harrah/xsbt/wiki/Full-Configuration)在 Build.scala中添加[仿冒](https://github.com/tristanjuricek/knockoff)品，因此：

```
val knockoff = RootProject(uri("git://github.com/tristanjuricek/knockoff.git"))

val main =
    PlayProject(appName, appVersion, appDependencies, mainLang = SCALA)
    .dependsOn(knockoff) 
```

然后运行它。出于某种原因，它会寻找源代码和 javadoc jar。（为什么？）

```
[warn]  [NOT FOUND  ] com.tristanhunt#knockoff_2.9.1;0.8.0-16!knockoff_2.9.1.jar(src) (88ms)
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/tristanhunt/knockoff_2.9.1/0.8.0-16/knockoff_2.9.1-0.8.0-16-sources.jar
[warn]  [NOT FOUND  ] com.tristanhunt#knockoff_2.9.1;0.8.0-16!knockoff_2.9.1.jar(doc) (86ms)
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/tristanhunt/knockoff_2.9.1/0.8.0-16/knockoff_2.9.1-0.8.0-16-javadoc.jar
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::              FAILED DOWNLOADS            ::
[warn]  :: ^ see resolution messages for details  ^ ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.tristanhunt#knockoff_2.9.1;0.8.0-16!knockoff_2.9.1.jar(src)
[warn]  :: com.tristanhunt#knockoff_2.9.1;0.8.0-16!knockoff_2.9.1.jar(doc)
[warn]  :::::::::::::::::::::::::::::::::::::::::::::: 
```

这些丢失的罐子不应该是致命的，但它们是：

```
[error] {file:/home/joel/TEST2/bar/}bar/*:update: sbt.ResolveException: download failed: com.tristanhunt#knockoff_2.9.1;0.8.0-16!knockoff_2.9.1.jar(src)
[error] download failed: com.tristanhunt#knockoff_2.9.1;0.8.0-16!knockoff_2.9.1.jar(doc)
[error] java.util.NoSuchElementException: Either.right.value on Left
[error] Use 'last' for the full log. 
```

这是一些堆栈跟踪：

```
[error] download failed: com.tristanhunt#knockoff_2.9.1;0.8.0-16!knockoff_2.9.1.jar(doc)
java.util.NoSuchElementException: Either.right.value on Left
at scala.Either$RightProjection.get(Either.scala:229)
at sbt.PlayCommands$$anonfun$56.apply(PlayCommands.scala:606)
at sbt.PlayCommands$$anonfun$56.apply(PlayCommands.scala:593)
at sbt.Command$$anonfun$sbt$Command$$apply1$1$$anonfun$apply$6.apply(Command.scala:74)
at sbt.Command$.process(Command.scala:92) 
```

作为依赖项的其他项目工作正常，但不是这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:00:52.807

啊。对不起，浪费您的时间，互联网。

问题是“父”和“子”项目指定了不同的 scalaVersions。

父母是 2.9.1，孩子是 2.9.2。将其中一个更改为与另一个相同可以解决此问题。

# c# - MVP，Winforms - EventHandlers 或 Delegates

> ID：10391233
> 
> 赞同：7
> 
> 时间：2012-04-30T22:08:51.003
> 
> 标签：c#, winforms, mvp

我在一些使用被动视图的 WinForms 应用程序中实现了 MVP 模式。我以 Action<T> 和 Func<T> 的形式实现了一个包含属性和委托的接口，以连接具体视图中的 UI 事件并回调给演示者。

我即将开始一个新项目，并对在线模式进行了一些研究，包括这里的许多模式示例，并注意到所有使用 EventHandler 来通知演示者。

我真的不明白为什么在这种情况下会使用事件，因为我认为视图只有一个演示者。

我的问题是，这是为了与 .Net 框架使用事件的方式保持一致，还是出于我没有看到的其他原因？

这是我使用的模式的一个简单示例：

```
public interface IViewAbstraction
{
    public ModelData ModelData { set; }
    public Action<ModelData> ModelDataChangedCallback { set; }
}

public class SomeWinForm : Form, IViewAbstraction
{
    private Action<ModelData> modelDataChanged;
    private ModelData model;

    public ModelData ModelData
    {
        set { /* when this property changes, update UI */ }
    }

    public Action<ModelData> ModelDataChangedCallback
    {
        set { modelDataChanged = value; }
    }

    private void OnSomeWinformsEvent(EventArgs args)
    {
        if (modelDataChanged == null) throw new Exception();

        modelDataChanged(model);
    }
}

public class Presenter
{
    private readonly IViewAbstraction view;
    private readonly IDataLayerAbstraction dataLayer;

    public Presenter(IViewAbstraction view, IDataLayerAbstraction dataLayer)
    {
        this.dataLayer = dataLayer;
        this.view = view;
        this.view.ModelDataChangedCallback = OnModelChanged;
        this.view.ModelData = dataLayer.GetData();
    }

    private void OnModelChanged(ModelData data)
    {
        // validate and save data.
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T06:42:07.663

您的模式与使用事件基本相同，但有一个关键区别。事件不公开底层委托（在您的示例中为 ModelDataChangedCallback）。公开这是不好的做法，因为例如其他代码可以清除调用列表。一个事件将具有一个可以添加到或从中删除的底层委托，但永远不会从类范围之外清除。

我不明白你关于没有多个订阅者的观点——这不是不使用事件的理由。事件只是类说“嘿！这件事发生了”的一种方式，与 Presenter 对象的一对一映射是完全合理和正常的。

您也不会在视图中看到看起来很奇怪的只写属性。

# mysql - SQL 根据列的计数进行分组

> ID：10391235
> 
> 赞同：3
> 
> 时间：2012-04-30T22:09:03.307
> 
> 标签：mysql, sql, oracle, db2

假设表包含以下列：

```
id integer,
name char(6),
status integer 
```

并有以下数据：

```
id    id2     type
---   -----   ----
01    Adam    1
02    Bob     1
03    Adam    2
04    Caymen  1
05    Ahmed   1
06    Basel   1
07    Ahmed   2
08    Bob     2
09    Ahmed   2
10    Mike    1 
```

所以它基本上跟踪不同用户的状态进展。

我想对状态计数进行分组。换句话说，我想知道有多少用户只有 1 个状态，有多少有 2 个状态，有多少有 3 个状态，等等。

预期的输出将是这样的：

```
num_of_statuses    count
---------------    -----
1                  3
2                  2
3                  1 
```

我试过了，但还没有找到解决方案。任何语法都可以。SQL/MySQL/DB2/Oracle。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T22:14:48.273

您需要这样的嵌套查询：

```
select num_of_statuses, count(*)
from (
    select id2, count(*) as num_of_statuses
    from table1
    group by id2
) A
group by num_of_statuses 
```

在 sqlfiddle 上查看：[http ://sqlfiddle.com/#!2/ed95e/1](http://sqlfiddle.com/#!2/ed95e/1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T22:17:20.447

```
WITH summary (fname, num_of_statuses) AS
(    SELECT fname, COUNT(*) num_of_statuses 
     FROM basetablename GROUP BY fname
)
SELECT num_of_statuses, COUNT(*) AS peoplecount
FROM summary
GROUP BY num_of_statuses
; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T08:31:16.050

如果您不想使用嵌套查询，可以这样避免：

```
SELECT DISTINCT
  num_of_statuses = COUNT(*),
  count           = COUNT(*) OVER (PARTITION BY COUNT(*))
FROM atable
GROUP BY id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T07:32:24.623

你可以试试这个

```
 SELECT DISTINCT NO_OF_STATUS, COUNT(NAME)
  FROM (SELECT DISTINCT HT.NAME, COUNT(HT.STATUS) AS NO_OF_STATUS
          FROM SO_HYPO_TABLE HT
         GROUP BY HT.NAME) A
 GROUP BY NO_OF_STATUS
 ORDER BY NO_OF_STATUS 
```

希望这可以帮助

# ruby-on-rails - Rails：如何单独使用 ActionMailer？

> ID：10391236
> 
> 赞同：2
> 
> 时间：2012-04-30T22:09:09.070
> 
> 标签：ruby-on-rails, ruby, actionmailer

我正在创建一个用于发送电子邮件的应用程序。我不需要使用常规邮件和查看模板，因为我只会接收将用于生成电子邮件的数据。但是，我认为使用`ActionMailer`而不是直接交互有一些好处`SMTP`。我在尝试实例化`ActionMailer::Base`. 如何`ActionMailer`在不必定义扩展的新类的情况下单独使用`ActionMailer::Base`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T11:59:41.530

ActionMailer 的底层功能由[mail gem](https://github.com/mikel/mail)提供。这使您可以非常简单地发送邮件，例如：

```
Mail.deliver do
  from     'me@test.lindsaar.net'
  to       'you@test.lindsaar.net'
  subject  'Here is the image you wanted'
  body     File.read('body.txt')
  add_file :filename => 'somefile.png', :content => File.read('/somefile.png')
end 
```

它支持通过 ActionMailer 所做的所有相同方法进行传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T14:18:28.977

啊，我想我现在更好地理解了。基本上，您正在寻找一个类似于 php 的 mail() 的简单单行代码，对吗？

如果是这样，ActionMailer 对您来说没有意义，因为它确实不是这项工作的正确工具。

我认为你的赢家是一个名为 Pony 的红宝石： [https ://github.com/benprew/pony](https://github.com/benprew/pony)

例子：

```
Pony.mail(:to => 'you@example.com', :from => 'me@example.com', :subject => 'hi', :body => 'Hello there.') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T19:39:01.500

这是最基本的解决方案。您必须将 smtp 设置和硬编码值更改为变量等。这样您就不需要使用视图。如果您仍想使用 ERB，我建议您查看[Railscast 206](http://railscasts.com/episodes/206-action-mailer-in-rails-3)。

只需更改此代码，将其放入“test_email.rb”之类的文件中并使用`ruby test_email.rb`

```
require 'action_mailer'

ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "gmail.com",
  :user_name            => "testuser123",
  :password             => "secret",
  :authentication       => "plain",
  :enable_starttls_auto => true
}

class TestMailer < ActionMailer::Base
  default :from => "testuser123@gmail.com"

  # def somemethod()
  #   mail(:to => "John Doe <john@example.com>", :subject => "TEST", :body => "HERE WE GO!!!")
  # end

  def mail(args)
    super
  end
end

# TestMailer.somemethod().deliver
TestMailer.mail(:to => "John Doe <john@example.com>", :subject => "TEST", :body => "HERE WE GO!!!") 
```

# java - 我的java程序一直冻结

> ID：10391242
> 
> 赞同：0
> 
> 时间：2012-04-30T22:09:31.577
> 
> 标签：java, swing, freeze

我试图缩小范围，但我的程序一直在代码中冻结：

```
try {
    MainMenu.start();
} catch (IOException e1) {
    System.out.print(e1.getCause());
} 
```

我在 JTextField 中键入了几行随机行，按回车键，然后程序冻结。

如果您需要，这是整个代码。

```
package Main;

import java.awt.BorderLayout;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.io.IOException;
import javax.swing.JFrame;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class window extends JFrame implements KeyListener {
/**
 * 
 */
private static final long serialVersionUID = 7092006413113558324L;
private static int NewSize;
public static String MainInput;
public static JTextField input = new JTextField(10);
public static JTextArea output = new JTextArea(main.Winx, NewSize);

public window() {
    super("Satine");
    NewSize = main.Winy - 20;
    setLayout(new BorderLayout());
    output.setToolTipText("");
    add(input, BorderLayout.PAGE_END);
    add(output, BorderLayout.CENTER);
    input.addKeyListener(this);
    input.requestFocus();
}

@Override
public void keyPressed(KeyEvent e) {
    int key = e.getKeyCode();
    if (key == KeyEvent.VK_ENTER) {
        String MainInput = input.getText();
        try {
            MainMenu.start();
        } catch (IOException e1) {
            System.out.print(e1.getCause());
        }
        output.append(MainInput + "\n");
        input.setText("");
    }
}

@Override
public void keyReleased(KeyEvent e) {
}

@Override
public void keyTyped(KeyEvent e) {
}
} 
```

感谢您抽出宝贵时间对此进行评估。

我也忘了这里是 MainMenu.java

```
package Main;

import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.io.IOException;
import java.util.StringTokenizer;

public class MainMenu {
public static String InputText = window.MainInput;
public static String CompleteInput, noCaseCompleteInput, A1, A2, A3, A4,
        A5; // Command
// Inputs
public static String Advance = "Y";
public static String Advance2 = "Y";
public String Command;
public static String CorrectP;
public static StringTokenizer st;

public static void start() throws IOException{
    window.output.append("Satine. /InDev-01/ " + "\n");
    do {
        CompleteInput = InputText;
        noCaseCompleteInput = CompleteInput.toLowerCase();
        st = new StringTokenizer(noCaseCompleteInput);
        switch (st.nextToken()) {
        case "help":
            helpData.HelpDefine();
            continue;
        case "end":
            System.exit(0);
        case "newworld":
            newWorldRun.NewWorld();
            break;
        case "save":
            Save.SaveFull();
            continue;
        case "load":
            Save.FileName = st.nextToken();
            Read.ReadFull();
            continue;
        case "profile":
            profileData.profile();
            break;
        case "dp":
            debugPrint.print();
            continue;
        case "move":
            Movement.MoveCommand();
            continue;
        case "equip":
            equip.equip();
            break;
        case "attack":
            MonsterEvents.attackStart();
            break;
        default:
            window.output.append("Please Enter A Valid Command" + "\n");
            System.out.println("Please Enter A Valid Command");
        }
        window.input.setText("");
        } while (Advance.equals("Y"));
    }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:54:20.230

`String MainInput = input.getText();`阴影对象实例变量`MainInput`，因此不用于`MainMenu.start()`. 此外，如果`MainMenu.Advance`未设置为 以外的值`Y`，它将无限循环。

# javascript - 如何编写一个防弹的 Backbone js 管理器？（或在此示例中修复委托事件）

> ID：10391245
> 
> 赞同：0
> 
> 时间：2012-04-30T22:09:52.717
> 
> 标签：javascript, jquery, backbone.js

我正在编写一个应用程序，该应用程序将由具有不同经验的团队扩展，因此我试图限制 Backbone 的灵活性，以便提供一种一致的方式来构建我们的代码。为此，我编写了一个简单的外观，将类和实例隐藏在 get/set 函数后面，因此类/实例不会被无意覆盖，我们使用本地变量和全局变量，我们的代码更漂亮，维护更少.

到目前为止，我的原型代码运行良好，但有一个例外——在子类视图中，“事件”属性不是委托事件。如果你看到什么坏了，我将不胜感激！如果您知道组织代码以达到相同目的的更好方法，我也愿意！

谢谢！

[运行在http://jiggler.media.mit.edu:8008/projects/2147302/?mode=player](http://jiggler.media.mit.edu:8008/projects/2147302/?mode=player)的代码的临时示例，以及在[http://jiggler.media.mit.edu/adam](http://jiggler.media.mit.edu/adam/scratchr2/static/js/project.js)的子类视图[/scratchr2/static/js/project.js](http://jiggler.media.mit.edu/adam/scratchr2/static/js/project.js)。运行代码中有相当多的不相关，所以我在下面提取了相关逻辑。

运行主干 0.9.2、下划线 1.3.3 和 jQuery 1.7.1

```
// Facade factory - creates an interface for working with views
window.scratch={};
scratch.createBackboneManager=function(type,optionsObj){
  if (!type || !Backbone[type]) throw 'type required to add a backbone type (e.g., Model, View) to scratch';
  if(scratch[type]) throw 'scratch.'+type+' already exists';
  scratch[type]=(function(){
    var classes={};
    function create(name,classObj){
      if (classes[name]) throw type+' '+ name + ' already exists.';
      if (name[0].toUpperCase()!==name[0]) throw type+' names must be upper case. "'+name+'" starts lower case.';
      return classes[name]=(function(){
        var instances={},
            Klass = (classes[classObj.extendsClass]||Backbone[type]).extend(classObj);
        function createInstance(name,options){
          if (instances[name]) throw 'Instance '+ name + ' already exists';
          if (name[0].toLowerCase()!==name[0]) throw 'Instance names must be upper case. "'+name+'" starts upper case.';
          return instances[name]=new Klass(options);
        };
        function getInstance(name){
          return instances[name];
        };
        return $.extend(Klass,{getInstance:getInstance,createInstance:createInstance}) // return the Class with simple instance management methods.
      })();
    };
    function get(name){
      return classes[name]||undefined;
    };
    return $.extend({create:create,get:get},optionsObj);
  })();
};

// create managers
scratch.createBackboneManager('View');
scratch.createBackboneManager('Model');

// create a model
scratch.Model.create('Project',{
  defaults: {// current project
    owner: null, // instance of user?
    parentId: null,
    title: 'Untitled',
    isPrivate: false,
  }
}).createInstance('project',{
  owner: 'foo',
  viewing_user:'bar',
  title:'baz',
  id: '12345', 
});

// create a view
scratch.View.create('Global_UI',{
  initialize:function(){
    var self=this;
    $(document).ready(function(){self.render()});
  },
}).createInstance('global_ui');

// subclass the view and add events
scratch.View.create('Showcase',{
  extendsClass:'Global_UI',
  events: {
    "mouseover .see-inside"         : 'alertSee',

  },
  alertSee:function(e){alert(e)},

}).createInstance('showcase',{
  el:document.getElementById('project'),
  model:scratch.Model.get('Project').getInstance('project')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:03:45.963

如果没有 jsfiddle 中的工作示例或类似的东西，这很难诊断，但你确定你不想要这个......

```
Klass = (classes[classObj.extendsClass]||Backbone[type]).extend(classObj); 
```

……变成这样？……

```
Klass = (

  classes[ classObj.extendsClass ] || Backbone[ type ]

).extend( classObj ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T00:33:06.610

不要忘记将您的实例创建放在 $(document).ready() 调用中，否则 getElementById() 调用中的元素将不存在。

嗬！

# php - PHP/MySQL PDO 的奇怪行数返回

> ID：10391247
> 
> 赞同：1
> 
> 时间：2012-04-30T22:09:57.713
> 
> 标签：php, mysql, pdo

我在 phpMyAdmin 中检查了这个，它返回了 1 个结果：

```
 SELECT id, name
      FROM tbl_product_category
INNER JOIN tbl_product_cat_basket AS basket
        ON id = basket.cat_id
     WHERE basket.product_id = 2
     LIMIT 0,1 
```

然后我在 phpMyAdmin 中检查了这个，它返回了 COUNT = 1：

```
 SELECT COUNT(*)
      FROM tbl_product_category
INNER JOIN tbl_product_cat_basket AS basket
        ON id = basket.cat_id
     WHERE basket.product_id = 2
     LIMIT 0,1 
```

现在我不明白为什么这会导致`$rows`返回空字符串或 null：

```
function getProductCategory($product_id) {
    $sql = "SELECT id, name FROM tbl_product_category
        INNER JOIN tbl_product_cat_basket AS basket
                ON id = basket.cat_id
             WHERE basket.product_id = ?
             LIMIT 0,1;";
    $data = array((int)$product_id);
    $rows = dbRowsCount($sql, $data);
logErrors("getProductCategory(".$product_id.") returned rows: ".$rows);
    if ($rows == 1) {
        dbQuery($sql, $data);
        return dbFetch();
    } else {
        return null;
    }
} 
```

该`logErrors`方法给了我这个输出：

> getProductCategory(1) 返回行：
> getProductCategory(2) 返回行：
> getProductCategory(3) 返回行：
> getProductCategory(4) 返回行：
> getProductCategory(5) 返回行：

所以我`null`从方法中返回。

我的`dbRowsCount(...)`方法将 SQL 转换为 a `SELECT COUNT(*)`，然后`dbQuery(...)`执行真正的查询。这很奇怪，因为`dbRowsCount(...)`到目前为止，我的其他查询总是返回正确的行。

无论如何，这里是：

```
function dbRowsCount($sql, $data) {
    global $db, $query;
    $regex = '/^SELECT\s+(?:ALL\s+|DISTINCT\s+)?(?:.*?)\s+FROM\s+(.*)$/i';
    if (preg_match($regex, $sql, $output) > 0) {
        $query = $db->prepare("SELECT COUNT(*) FROM {$output[1]}");
        $query->setFetchMode(PDO::FETCH_NUM);
        if ($data != null)
            $query->execute($data);
        else
            $query->execute();
        if (!$query) {
            echo "Oops! There was an error: PDOStatement returned false.";
            exit;
        }
        return $query->fetchColumn();
    }
    return false;
} 
```

那么出了什么问题呢？

* * *

# 编辑

这是我的程序的一些输出：[原始查询] [正则表达式后查询]

```
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(1) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(2) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(3) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(4) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(5) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(6) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(7) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(8) returned rows: 7
SELECT id, name FROM tbl_product_category INNER JOIN tbl_product_cat_basket AS basket ON id = basket.cat_id WHERE basket.product_id = ? LIMIT 0,1;
SELECT COUNT(*) FROM tbl_product_category

getProductCategory(9) returned rows: 7
SELECT * FROM tbl_store_admin WHERE php_sesskey=?;
SELECT COUNT(*) FROM tbl_store_admin WHERE php_sesskey=?;

SELECT * FROM tbl_menu_cat_basket WHERE menu_id=?;
SELECT COUNT(*) FROM tbl_menu_cat_basket WHERE menu_id=?;

SELECT * FROM tbl_menu_cat_basket WHERE menu_id=?;
SELECT COUNT(*) FROM tbl_menu_cat_basket WHERE menu_id=?;

SELECT * FROM tbl_menu_cat_basket WHERE menu_id=?;
SELECT COUNT(*) FROM tbl_menu_cat_basket WHERE menu_id=?;

SELECT * FROM tbl_menu_cat_basket WHERE menu_id=?;
SELECT COUNT(*) FROM tbl_menu_cat_basket WHERE menu_id=?;

SELECT * FROM tbl_menu_cat_basket WHERE menu_id=?;
SELECT COUNT(*) FROM tbl_menu_cat_basket WHERE menu_id=?;

SELECT * FROM tbl_menu_cat_basket WHERE menu_id=?;
SELECT COUNT(*) FROM tbl_menu_cat_basket WHERE menu_id=?;

SELECT * FROM tbl_menu_cat_basket WHERE menu_id=?;
SELECT COUNT(*) FROM tbl_menu_cat_basket WHERE menu_id=?;

SELECT * FROM tbl_product ORDER BY last_update ASC;
SELECT COUNT(*) FROM tbl_product ORDER BY last_update ASC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:14:11.887

您的 RegeExp 不匹配，它缺少 dot-all 标志（总共 / 是）。

这`.`也会导致匹配字符串中的换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:34:35.420

看来您的正则表达式没有返回正确的结果。由于您只是在寻找第一次出现`FROM`并在此之后返回所有内容，为什么不直接使用[`stristr`](http://php.net/manual/en/function.stristr.php)？

```
$output = stristr($sql, 'FROM');    // $output includes 'FROM'
if ($output !== false)
{
    $query = $db->prepare("SELECT COUNT(*) {$output}");
    // etc. 
```

# spring - Spring EL (SpEL) 可以配置为在方法调用中接受空参数吗？

> ID：10391253
> 
> 赞同：1
> 
> 时间：2012-04-30T22:11:17.270
> 
> 标签：spring, el, spring-el

我有这样的表达：

`obj1.doSomething(obj2, obj3)`

我希望`obj1.doSomething`即使在`obj2`or `obj3`are时也能调用该方法`null`。SPeL 上下文是 Spring MVC 在呈现 JSP 页面时创建的上下文。如果`obj2`（或`obj3`）为空，我得到一个`SpelEvaluationException: Field or property ‘obj2’ cannot be found on null`

注意：我使用的是 Jboss 5.1 和 JSP EL 2.0。我知道 EL 表达式`${obj1.doSomething(obj2, obj3)}`可以满足我的要求，但仅适用于 JSP EL 2.2。

谢谢！

# sencha-touch - Sencha 动态更改 Ext.Panel 标题

> ID：10391256
> 
> 赞同：0
> 
> 时间：2012-04-30T22:11:56.933
> 
> 标签：sencha-touch, extjs, panel, title, sencha-touch-2

如何动态更改列表面板标题？我有一个导航视图，其中 listpanel 是项目。所以导航栏显示我会动态改变的面板标题。

图片： ![http://postimage.org/image/evxdv8fh9/](../Images/8e3069728bd7746c5dd99591eceb7838.png)

谢谢。

```
listpanel = new Ext.Panel({
                       layout: 'fit',   
                       id:'listpanel',
                       title:'change this title dinamically',
                       items: [
                               {
                                   xtype: 'titlebar',
                                   id: 'myTitle',
                                   docked: 'top',
                                   title: 'title1'
                               },
                               { xtype: 'titlebar',
                                   id: 'myMeanConsumption',
                                   docked: 'bottom',
                                   title: 'title2'
                               },
                                   list
                               ]
                   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T02:12:27.227

这样做，

```
Ext.getCmp('myTitle').setTitle('Changed Title'); 
```

* * *

**编辑 ：**

`title``Ext.Panel`属性在组件上不可用。因此，下面的行是多余的。

```
title:'change this title dinamically', 
```

您只需要更改我上面已经提到`title`的那个。`titlebar`

我看不到`listpanel`标题。

![在此处输入图像描述](../Images/fbbac67c8d44b072f6dfa6d93ce8d330.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:08:39.467

在创建列表面板后添加：

```
listpanel.onAfter('painted', function () { 
listpanel.getNavigationBar().setTitle(newTitle); },  listpanel, { delay: 100 }); 
```

# javascript - Firebug 调试器无法正确识别语法错误；需要解决方案或卓越的开发环境

> ID：10391258
> 
> 赞同：-1
> 
> 时间：2012-04-30T22:12:02.517
> 
> 标签：javascript, debugging, firebug, development-environment, syntax-error

从 C#/WPF 到 HTML5/JavaScript 的转变一直困扰着我。我认为具有挑战性的部分将是学习新语言、思考问题的新方法等。但那是容易的部分。真正的障碍是尝试使用称为 Firebug 的荒谬环境来调试任何合理大小的应用程序。我选择 Firebug 是因为 StackOverflow.com 上的大多数人似乎都在使用它。但是伙计..我真的不明白你们是如何使用这个东西的。它充满了令人眼花缭乱的错误。我之前在调试计时器回调时发布了关于 Firebug 的一个主要缺陷。但是今天的 Firebug 体验近乎疯狂。

简短的故事是，在某些未知条件下，如果遇到语法错误，Firebug 将不会报告错误，而是根本无法将整个脚本文件加载到内存中，并且不会显示任何错误信息。今天我处理了一个语法错误，由于逗号放错了。任何体面的调试器都会简单地突出问题并停止执行。不是萤火虫。它迫使您逐个文件调查，一次注释掉一个，因为您试图找出语法错误到底在哪里。这不仅仅是一些“边缘案例”。考虑一下这个故意坏的 JavaScript 片段：

```
var boo;
boo.SelectEntityPopupXXX=(function(){
    var hey={p: 1,z: 2,goob=this};
}()); 
```

有语法错误。'goob' 后面应该有一个冒号，而不是等号。如果你的应用有 50 个不同的 JavaScript 文件，而这个坏片段在其中一个文件中，Firebug 不会告诉你。它只是无法将整个脚本文件加载到内存中。由您来确定五十个文件中的哪个文件没有被加载。然后您必须随机注释/取消注释该文件的内容，直到您缩小该代码片段并意识到那里有一个错误的等号。那是绝对的疯狂！

对于大多数语法错误，Firebug 的行为符合预期。但它偶然发现了它们中的足够多的严重刺激性。这一点，再加上无数其他令人震惊的错误，使得 Firebug 环境对除了最微不足道的 Web 应用程序之外的所有应用程序完全无用。所以问题是：

[1] 是否有某种我缺少的语法错误标志或设置导致了这种疯狂的行为？如果有一个“随机忽略语法错误并混淆它们的位置”复选框，我想取消选中它。

[2] 一定有比 Firebug 更好的 [for Mac] 开发环境……或者至少，我无法想象更糟糕的开发环境。你有什么建议？

谢谢。

更新：

为了那些真正关心调试的人[而不是收集网站金块或这些赞成/反对票所代表的任何东西]，想在这个线程被杀死之前尝试插入评论……我注意到调试环境Safari 和 Chrome 都更加可靠。我可以验证上面讨论的语法错误在 Safari 和 Chrome 中都被正确识别。我在另一篇文章中提到的主要计时器回调错误也是 Firebug 特有的。说够了。再见萤火虫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:35:45.463

I prefer Chrome to develop any web sites/apps in. Chrome has a `debugger` line that sometimes works. The key to JS development is ALERTS. Just alert variable values and element values to you resolve your issue. And @Quentin is correct. Your syntax errors is due to the `=` operator. To set a value in JS objects you must use the `:` operator.

# javascript - 从外部 js 文件返回样式表

> ID：10391265
> 
> 赞同：0
> 
> 时间：2012-04-30T22:12:25.120
> 
> 标签：javascript, html, css

我正在使用下面的 JavaScript 来决定要加载哪个样式表（如果是 12 月，则加载我的圣诞节样式，否则加载我的默认样式）。这导致 XHTML 验证出现问题，我怀疑最好的解决方案是从外部文件加载 js，但我对此还很陌生，而且我一辈子都无法让它工作。

如果可能的话，我想使用相同的代码，但在一个单独的文件中，以实现与直接在 HTML 中执行相同的效果。如果有人可以解释如何做到这一点，将不胜感激！

```
<head>
<script type="text/javascript">
    var i = new Date();
    var m = i.getMonth();
    if (m==11) {
        document.write('<link rel="stylesheet" type="text/css" href="mystyle-christmas.css" />');
    } else {
        document.write('<link rel="stylesheet" type="text/css" href="mystyle-default.css" />');
    }
</script>
</head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:29:16.747

您可能想使用 DOM 函数来创建一个 LINK 节点并将其添加到标题中。

```
var l = document.createElement('LINK');
l.setAttribute('rel','stylesheet');
l.setAttribute('href','mystyle-christmas.css');
l.type = 'text/css';
document.getElementsByTagName('HEAD')[0].appendChild(l); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:51:08.430

```
<link id="stylesheet" rel="stylesheet" type="text/css" href="mystyle-default.css" />

var i = new Date();
var m = i.getMonth();
if (m>=11) {
document.getElementById('stylesheet').href = 'mystyle-christmas.css';
} 
```

默认样式表不需要加载 javascript，您只需在需要的月份内替换样式表。

# ruby-on-rails - 使用连接的 Ruby on Rails ActiveRecord 查询

> ID：10391266
> 
> 赞同：47
> 
> 时间：2012-04-30T22:12:36.177
> 
> 标签：ruby-on-rails, activerecord

我有一个用户模型，用户的关系是 has_many pets。我希望能够编写一个 ActiveRecord 查询，我可以在其中选择所有用户的宠物没有“蓬松”的 pet.name

使用 ActiveRecord 编写这个最有效的方法是什么？使用直接 SQL，它看起来如下所示：

`select id from users INNER JOIN pets ON u.id = pets.user_id WHERE pets.name != "fluffy"`

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-30T22:19:29.543

这应该有效：

```
User.joins(:pets).where("pets.name != 'fluffy'") 
```

此外，您可能还想阅读官方 RoR 指南的[以下部分](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-the-joined-tables)（关于`joins`）。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2015-03-16T14:53:07.273

在 rails 4 中，您可以更清楚地说明这一点：

```
User.joins(:pets).where.not(pets: { name: 'fluffy' }) 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-02-04T21:56:18.963

没有 SQL 注入漏洞的最干净的方法是使用查询参数：

```
User.joins(:pets).where("pets.name != ?", "fluffy") 
```

一些数据库驱动程序将利用上述准备好的语句来重用数据库查询计划。在这种情况下，只有参数值变化时，数据库不必再次分析查询。

# java - JetS3t 填满了我的 /tmp 目录。我应该如何删除旧文件？

> ID：10391267
> 
> 赞同：0
> 
> 时间：2012-04-30T22:12:38.923
> 
> 标签：java, linux, amazon-s3, jets3t

我正在 Linux 上开发一些使用 JetS3t 从 S3 检索文件的 HTTP 服务器软件。这些文件都在 5MB 左右。随着时间的推移，JetS3t 会在 /tmp 目录中创建大量 *.tmp 文件。

但是，由于这一切都在永远不会重新启动的服务器上运行，因此文件永远不会被丢弃。相反，它们最终会填满根分区，从而导致许多问题（如 HTTP 连接断开等）

有没有办法配置 JetS3t，使其自行清理？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:58:15.970

我想出了一个不优雅但有效的解决方案。我只是添加了一个定期运行以下命令的 cron 作业：

`find /tmp/*tmp -amin +10 -exec rm -f {} \;`

基本上，`find`找到至少十分钟前访问过的所有 JetS3t 的 tmp 文件（感谢`-atime +10`），然后删除它们。

这模仿了某些系统的行为`tmpreaper`或`tmpwatch`存在于某些系统上。对于使用这些应用程序的其他人，请注意，因为它们可以促进一些[setuid 漏洞利用。](http://pwet.fr/man/linux/administration_systeme/tmpreaper)我意识到我的方法也可能受到同样的攻击，但现在我别无选择。

# javascript - 谷歌地图地理编码多线点限制

> ID：10391269
> 
> 赞同：0
> 
> 时间：2012-04-30T22:13:03.560
> 
> 标签：javascript, google-maps, geocoding, polyline

在这个伟大的网站的帮助下，我已经能够获得大约 92% 的我需要的东西，但我就是无法克服这个问题。我制作了一张地图，对多个点进行地理编码并在它们之间画一条线，但我无法让它映射最后一个点。我不知道11点是否有限制或什么。我的脚本位于[http://www.maptest.freehosting.com/chi.html](http://www.maptest.freehosting.com/chi.html)。我建立了这个，所以我可以加起来地址 11，但是当我尝试添加 12 时（这恰好是我的最后一点令人沮丧）它不会工作。我是在做一些完全愚蠢的事情还是这是谷歌的限制？我已经尝试了一百次，但无法让它工作。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:40:18.847

看，你是 OVER_QUERY_LIMIT，这意味着短时间内请求太多。[官方定义](https://developers.google.com/maps/documentation/geocoding/)是，但在`indicates that you are over your quota.`其他地方它说`2,500 requests per day`。所以不是直接说快速查询太多次是不行的。

添加 else 语句以匹配 if(status == OK) 并写入`alert(status)`以查看此错误。有时服务器会延迟，有时则不会，因此服务器拒绝请求的点是未知的。

```
 else{ alert(status) } 
```

您需要`setTimeout(function() { }, time)`在请求之间或`sleep`Kiessling 的 Node 初学者的此功能：

```
function sleep(milliSeconds) {
    var startTime = new Date().getTime();
    while (new Date().getTime() < startTime + milliSeconds);
  } 
```

我不能告诉你要等多久，我不知道谷歌服务器考虑太多了。

另外，查找异步库。我不太熟悉它，但它可能允许您在 for 循环中编写请求。它的`forEach`功能看起来最有前途。

# java - iText/BouncyCastle ClassNotFound org.bouncycastle.asn1.DEREncodable 和 org.bouncycastle.tsp.TimeStampTokenInfo

> ID：10391271
> 
> 赞同：22
> 
> 时间：2012-04-30T22:13:31.400
> 
> 标签：java, exception, cryptography, itext, bouncycastle

我正在尝试使用[iText](http://itextpdf.com/) Java。当您运行示例“[如何签名](http://itextpdf.sourceforge.net/howtosign.html#howtosign)”时，会出现以下错误：

```
Caused by: java.lang.ClassNotFoundException: org.bouncycastle.tsp.TimeStampTokenInfo 
```

根据["Getting Started with iText - How to sign a PDF using iText"](http://cfsearching.blogspot.com.br/2007/12/getting-started-with-itext-how-to-sign.html)，我必须使用[BouncyCastle](http://www.bouncycastle.org/latest_releases.html)。

[我从BouncyCastle 下载页面](http://www.bouncycastle.org/latest_releases.html) 下载了文件：bcprov-jdk15on-147.jar 。
并添加到项目中：Java Build Path/Libraries/Add External JARs...

我添加了以下行：

```
Security.addProvider(new BouncyCastleProvider()); 
```

当您运行该示例时，会发生相同的错误。
所以我下载了另一个文件：bcpkix-jdk15on-147.jar，标题为“PKIX/CMS/EAC/PKCS/OCSP/TSP/OPENSSL”
并添加到项目中：Java Build Path/Libraries/Add External JARs...
现在我有了两个罐子。

运行示例时会出现以下错误：

```
Caused by: java.lang.ClassNotFoundException: org.bouncycastle.asn1.DEREncodable 
```

我尝试下载文件“bcprov-ext-jdk15on-147.jar”但没有解决问题。

我在 Windows 7 64 位上使用 iText 5.2.1 和 eclipse。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-31T13:03:45.557

iText 将 bouncycastle 依赖项标记为可选。如果需要它们，则需要在自己的 pom 文件中添加依赖项。

要找出项目中要包含的依赖项，请打开您正在使用的版本的 itextpdf pom.xml 文件（例如 5.3.2，[此处](http://central.maven.org/maven2/com/itextpdf/itextpdf/5.3.2/itextpdf-5.3.2.pom)）并搜索 2 个 bouncycastle 依赖项。

```
 <dependency>
        <groupId>org.bouncycastle</groupId>
        <artifactId>bcprov-jdk15on</artifactId>
        <version>1.47</version>
        <optional>true</optional>
    </dependency>
    <dependency>
        <groupId>org.bouncycastle</groupId>
        <artifactId>bcmail-jdk15on</artifactId>
        <version>1.47</version>
        <optional>true</optional>
    </dependency> 
```

将它们复制到您的 pom 文件中并删除*可选*选项。

```
 <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>itextpdf</artifactId>
        <version>5.3.2</version>
    </dependency>
    <dependency>
        <groupId>org.bouncycastle</groupId>
        <artifactId>bcprov-jdk15on</artifactId>
        <version>1.47</version>
    </dependency>
    <dependency>
        <groupId>org.bouncycastle</groupId>
        <artifactId>bcmail-jdk15on</artifactId>
        <version>1.47</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-30T22:41:35.280

BouncyCastle 库正在经历重大的 API 更改，破坏了与 iText 等其他库的兼容性。

任何一个

*   使用以前版本的 BouncyCastle 库。旧版本可以在[这里](http://repo2.maven.org/maven2/org/bouncycastle/)找到。但是，您必须找到与此特定 BC 版本兼容的正确 iText 版本。

*   自己构建 iText（SVN 主干已修复）。iText 可以使用 Maven 构建（在 SVN 的根目录中有一个简短的[自述文件）。](http://itext.svn.sourceforge.net/viewvc/itext/trunk/itext/readme.txt?revision=4838&view=markup)请注意，风险自负，主干中可能存在错误。

*   等待 iText 的下一个版本。根据我的经验，iText 每隔几个月发布一次，有时更频繁，有时更少。我不是 iText 提交者，所以我不能给你任何 ETA。

更多信息可以[在这个线程中找到](http://sourceforge.net/mailarchive/message.php?msg_id=29107259)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-12-19T23:28:49.360

使用 itextpdf 版本 5.5.4 org.bouncycastle 依赖项被标记为`<optional>true</optional>`. 这意味着您必须在自己的 pom 中包含这些依赖项，否则您可能会遇到 classnotfound 异常。

```
<dependency>
    <groupId>com.itextpdf</groupId>
    <artifactId>itextpdf</artifactId>
    <version>5.5.4</version>
</dependency>

<!-- Bouncycastle dependencies necessary as they are optional = true
    in itextpdf ... but they're not-so-optional in reality -->
<dependency>
    <groupId>org.bouncycastle</groupId>
    <artifactId>bcprov-jdk15on</artifactId>
    <version>1.49</version>
</dependency>
<dependency>
    <groupId>org.bouncycastle</groupId>
    <artifactId>bcpkix-jdk15on</artifactId>
    <version>1.49</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-15T08:32:10.090

从 bcprov-jdk15on-147 版本开始，在 org.bouncycastle.asn1 的路径下不再存在 DEREncodable 类。您可以使用 146 之前的版本（包括 146）来解决这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T22:32:53.877

奇怪的是 bouncycastle.org 上提供的罐子似乎不包含这个类。也许，您可能想使用[本页（链接）](http://www.jarfinder.com/index.php/java/info/org.bouncycastle.asn1.DEREncodable)中列出的位置中的一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T23:39:18.543

我有同样的问题，但是当我下载 libreria 并在 /WEBINF/LIB 上更新这些文件时修复它

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-12T10:14:02.273

幸运的是，现在依赖 jar 与 iText 一起交付。

请检查下面的存储库链接并下载**extrajars.zip**文件

[http://sourceforge.net/projects/itext/files/](http://sourceforge.net/projects/itext/files/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-25T05:06:14.183

对于同样失败的 jruby-ers，我从 jruby-complete-1.6.6.jar 更新到 jruby-complete-9.1.13.0.jar 并且问题似乎解决了...... FWIW......

# internet-explorer-9 - 将鼠标悬停在 IE9 中的内容上时下拉菜单消失

> ID：10391276
> 
> 赞同：0
> 
> 时间：2012-04-30T22:14:04.427
> 
> 标签：internet-explorer-9, drop-down-menu

我正在尝试创建一个带有社交共享链接的下拉菜单，例如 facebook、twitter 等。

我正在使用计数按钮并将它们放在 CSS 下拉菜单中。只要我将鼠标悬停在下拉菜单的背景上就可以了。当我将鼠标悬停在其中一个社交媒体按钮上时，当我在 IE9 中查看它时，整个下拉菜单就会消失。每个其他浏览器都可以正常工作。我不知道如何保持下拉显示，以便他们可以喜欢该页面。

我正在使用带有 :hover 的下拉菜单来显示下拉菜单。我怎样才能让它在EI9中工作？

HTML

```
<div id="wrapper_menu"><!-- BEGIN MENU WRAPPER -->    
   <ul class="menu menu_black"><!-- BEGIN MENU -->        
        <li>Share this Page<!-- Begin Home Item -->                        
            <div class="dropdown_2columns"><!-- Begin 2 columns container -->                          
                <div class="col_2 firstcolumn">
                    <div class="col_left">
                        <g:plusone size="tall"></g:plusone>
                    </div>
                    <div class="col_right">
                        <div class="fb-like" data-send="false" data-layout="box_count" data-width="55" data-show-faces="true">
                    </div>                                   
                </div>                
            </div><!-- End 2 columns container -->
        </li><!-- End Home Item -->
    </ul><!-- END MENU -->
</div><!-- END MENU WRAPPER --> 
```

使用的 CSS

```
#wrapper_menu {width: 100%; margin:0 auto; display:block; position: relative; z-index:9999;}
#wrapper_menu .menu {list-style:none; width:100%; height:45px;} 
.menu li {float:left; text-align:center; position:relative; margin-right:20px; margin-top:6px; border:none; height: 30px;}
.menu li:hover {}

/*  _______________________________________
    02 DROP DOWN MENU
    _____________________________________  */

/* Left & right aligned common styles */  

.menu .dropdown_2columns,   
.menu .dropdown_fullwidth {
    margin: 2px; 
    left:-999em; 
    position:absolute; 
    background:#161616; 
    border: 2px solid #cdccc3; 
    padding: 10px; 
    text-align:left; 
        -moz-border-radius: 5px 5px 5px 5px;
        -webkit-border-radius: 5px 5px 5px 5px;
        -khtml-border-radius: 5px 5px 5px 5px;
        border-radius: 5px 5px 5px 5px;
    background:rgba(255,255,255, 0.8);
} 
/* Drop Downs Sizes */
.menu .dropdown_2columns {width: 160px;}

/* Showing Drop Down on Mouse Hover - Left aligned */
.menu li:hover .dropdown_2columns {left:-7px; top:25px;}

/* Columns Sizes */
.menu .col_2 {width:155px; display:inline; float: left; position: relative; margin-left: 10px;}

.col_left {float: left; width: 49%;}
.col_right {float: right; width: 49%;}

/* IMPORTANT use the firstcolumn class for the items that stick to the left edge of the dropdown */

.menu .firstcolumn {

    margin-left: 0; /* Clearing margin & left */

    clear: left;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:53:57.937

我遇到了同样的问题，并通过更改下拉菜单的高度来解决它，这样它就不会下降到浏览器窗口的底部之外。但不能相信，我很棒的同事（又名代码天才）发现了这一点。

# php - 在子类中重载魔术方法

> ID：10391285
> 
> 赞同：1
> 
> 时间：2012-04-30T22:15:22.827
> 
> 标签：php, debugging, inheritance, overloading, magic-methods

可以肯定的是，这不是重复的……就这样。

我的目标是在调试类中重载多个魔术方法，并让我的主类扩展所述类。我的想法是，这将允许我通过应用程序堆栈进行调试，而不必一个一个地重载每个类中的魔术方法。

到目前为止，代码看起来像这样

```
class magicdbg
{
//data container object
private $data;

public function __construct()
{
    require_once("data.php");
    $this->data = data::defInstance();
}

public function __call($name,$arguments)
{
    echo "overloading call <br />";
    $this->data->dbgmsg("Calling method: " . __METHOD__ . " -- with arguments: (" .implode(',',$arguments) . ")");
}

public function __get($var)
{

}
} 
```

和一个扩展它的类

```
require_once("magicdbg.php");
class salesCtrl extends magicdbg
{
private $data;
public function __construct()
{
    require_once('data.php');
    $this->data = data::defInstance();
    $this->testcall();

}

private function testcall()
{
    echo "test";
}
} 
```

最后是包含 magicdbg 正在调用的方法的类

```
class data
{
//application settings
CONST DEBUG = true;

//application messages
//debug messages
private $dbgmsgs;
private $errormsgs = array();
//application objects

//singleton object instance
private static $instance;

public function __construct()
{
    //if debug is enabled instantiate the debug message array
    if(self::DEBUG)
        $this->dbgmsgs = array();
}

public static function defInstance()
{
    echo "defining instance";
    if(!self::$instance)
        self::$instance = new data();

    echo "<br />instance defined<br />";
    return self::$instance;
}

public function dbgmsg($msg)
{
    echo "calling dbgmsg <br />";
    if(self::DEBUG)
        $this->dbgmsgs[] = $msg;
}

public function outputDbg()
{
    if(!self::DEBUG)
        return false;
    echo "testing dbg output <br />";
    $return = '<div id="debug"><ul>';
    foreach($this->dbgmsgs as $msg)
        $return .= "<li>" . $msg . "</li>";

    $return .= "</ul></div>";
    return $return;
}
} 
```

代码是这样实例化的

```
require_once('sales.ctrl.php');
$ctrl = new salesCtrl(); 
```

最后......我的问题似乎是它甚至没有达到magicdbg类中定义的魔法方法。我认为它不像我预期的那样工作。这可能只是我对魔术方法和重载以及继承缺乏了解。有人可以告诉我到底出了什么问题吗？或者甚至是更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:23:32.113

`_call`仅针对您的类中未定义的方法执行。这就像未定义方法的全部内容。

# java - 字符串 [] 的问题

> ID：10391290
> 
> 赞同：2
> 
> 时间：2012-04-30T22:15:39.763
> 
> 标签：java

我有一个 String[] LinesFromFile ，其中包含从文件加载的大约 100 行，例如

> LinesFromFile[0] 是“Line1”
> 
> LinesFromFile[1] 是“Line2”
> 
> LinesFromFile[2] 是“Line3”
> 
> ...
> 
> LinesFromFile[99] 是“Line100”

我现在想创建一个新的 String[] SomeLinesFromFile 并将 LinesFromFile 中的一些行分配给这个变量。

我原以为它会很简单：

```
String[] SomeLinesFromFile = null;
int offset = 45;

for (i = 0; i < 10, i++)
{
    SomeLinesFromFile[i] = LinesFromFile[offset + i];
} 
```

我会假设这段代码会将 SomeLinesFromFile[0] 设置为 SomeLinesFromFile[9]，并将 LinesFromFile[46] 的值设置为 LinesFromFile[56]。

当我尝试在我的 android 设备上运行它时，它崩溃了。我在这里想念什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T22:18:24.990

```
String[] SomeLinesFromFile = null; 
```

`SomeLinesFromFile`是`null`，所以你不能这样做：

```
SomeLinesFromFile[i] = ... 
```

您需要先创建一个数组，例如：

```
String[] SomeLinesFromFile = new String[10]; 
```

* * *

*顺便说一句，以大写字母开头命名变量被认为是不好的做法。因此，您应该始终使用`someLinesFromFile`而不是`SomeLinesForFile`.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:19:28.007

您的第二个数组为空，使用正确的维度对其进行初始化（在您的情况下，10 应该足够了）：

```
String[] SomeLinesFromFile = new String[10];
int offset = 45;

for (i = 0; i < 10, i++)
{
    SomeLinesFromFile[i] = LinesFromFile[offset + i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T22:20:08.407

改变这个：

```
String[] SomeLinesFromFile = null; 
```

对此：

```
String[] SomeLinesFromFile = new String[10]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T22:20:30.340

您可以改用 ArrayList 来避免固定大小。

[http://www.java-tips.org/java-se-tips/java.lang/use-of-arraylist-class.html](http://www.java-tips.org/java-se-tips/java.lang/use-of-arraylist-class.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T22:21:49.097

您忘记初始化字符串数组：

```
String[] SomeLinesFromFile = new String[10]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-30T22:38:04.993

SomeLinesFromFile[i] 不存在。SomeLinesFromFile 设置为空。你可以尝试这样的事情：

```
String[] SomeLinesFromFile = new String[0];
String[] Temp = null;

int offset = 45;

for (i = 0; i < 10, i++)
{
    Temp = new String[SomeLinesFromFile.length +1];

    if(SomeLinesFromFile.length>0){
        System.arraycopy(SomeLinesFromFile, 0, Temp, 0, SomeLinesFromFile.length;
    }

    Temp[i] = LinesFromFile[offset+i];
    SomeLinesFromFile = new String[Temp.length];
    System.arraycopy(Temp, 0, SomeLinesFromFile, 0, Temp.length);
} 
```

这是一个粗略的草图，所以我可能错过了一些东西，但这就是它的要点。可能有更好或更简单的方法来做到这一点，但这就是我能想到的。如果需要，这里是关于[arraycopy](http://developer.android.com/reference/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)的文档。基本上，您有一个临时数组来拉取新信息。然后它将它存储在另一个数组中，以允许创建一个新的临时数组以获取更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T22:19:51.900

`SomeLinesFromFile`是`null`（您可能可以在日志中看到）。顺便说一下，我建议使用诸如 LinkedList 或 ArrayList 之类的列表。使用该方法完成后，它们也可以转换为数组`toArray()`

# ruby - 通过 Net:SSH 出现“非绝对家”错误

> ID：10391298
> 
> 赞同：8
> 
> 时间：2012-04-30T22:16:23.103
> 
> 标签：ruby, ruby-on-rails-3, ubuntu-11.10, net-ssh

有问题的代码

```
Net::SSH.start('server name', 'user') 
```

这将返回“非绝对的家”。“用户”实际上确实有一个主目录。一种建议的方法是使用 IdentityFile 的完整路径修改 ~/.ssh/config。这并没有解决问题。

最疯狂的部分是，如果通过 irb 或控制台调用，代码可以正常工作。当我们尝试从类方法（使用相同的代码）中调用它时，它会返回“非绝对主页”错误。

“用户”也可以毫无问题地通过命令行 ssh 进入服务器。服务器正在运行 Ubuntu。

**更新**

感谢@Phrogz - 解决此问题的方法是将 ENV['HOME'] 设置为 '/home/deploy'。但是，我还没有弄清楚为什么 $HOME 被设置为“。” 在服务器上。所以，在我或其他人弄明白之前，我会在没有“答案”的情况下留下这个问题。不得不手动设置 HOME 感觉更像是“黑客”而不是正确的解决方案，但它确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T09:22:59.360

我们刚刚遇到了同样的问题，并找到了根本原因。我们将脚本作为服务运行，如果您检查服务手册页，它会在运行脚本之前删除大多数环境变量，包括 HOME。不知道你的场景是不是一样，但是没有设置HOME。

net-ssh 想从用户主文件夹中查找 ssh 配置，所以它曾经强制 ENV['HOME'] 为“。” 如果没有设置。但是当 File.expand_path 尝试扩展“~/.ssh”时，会引发 ArgumentError。

这是两个月前修复的（[https://github.com/net-ssh/net-ssh/pull/98](https://github.com/net-ssh/net-ssh/pull/98)），所以更新你的 net-ssh gem 应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T14:39:24.057

如果未设置，它肯定可以通过设置 HOME env var 来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T21:36:53.740

Linux 根据`/etc/passwd`文件设置此信息。

检查用户存在`/etc/passwd`的内容`deployer`。它应该在列表的底部附近。

项目以冒号分隔。的值`ENV['HOME']`应该是该行中倒数第二个条目。

它是空白的，即有两个冒号吗？

我怀疑您的 HOME 变量不存在于 中，`/etc/passwd`并且被设置在默认点文件之一中，即类似`.bashrc`. 然后，`.bashrc`如果您的应用程序通过不获取您的点文件的 init.d 脚本运行，则会短路。`.bashrc`（如果通过非交互式 shell 执行，许多文件会停止加载剩余的命令）。

希望这会有所帮助，并请回复您的发现。

# iphone - 向导航栏添加 leftBarButtonItem 问题

> ID：10391299
> 
> 赞同：0
> 
> 时间：2012-04-30T22:16:23.890
> 
> 标签：iphone, objective-c, ios, ipad, uinavigationcontroller

我有一个 UINavigationController，我的 AHViewController 作为根视图控制器。

然后我尝试从 AHViewController 的 viewDidLoad 中添加一个左栏按钮项：

```
UIButton * backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton addTarget:self action:@selector(backButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [backButton setImage:[UIImage imageNamed:@"grid.png"] forState:UIControlStateNormal];
    UIBarButtonItem *backButtonBarItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];
    //[self.navigationItem setLeftBarButtonItem:backButtonBarItem];
    [self.navigationController.navigationItem setLeftBarButtonItem:backButtonBarItem];
    [backButtonBarItem release]; 
```

但是，我什么也没看到。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:20:43.340

代替：

```
[self.navigationController.navigationItem setLeftBarButtonItem:backButtonBarItem]; 
```

做这个：

```
[self.navigationItem setLeftBarButtonItem:backButtonBarItem]; 
```

UINavigationController 使用顶部视图控制器的 navigationItem，而不是它的（UINavigationController 的）导航项属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T19:55:28.357

感谢“Simon Golden”回答为我工作。

之前：（这不显示我的按钮）

```
self.navigationItem.LeftBarButtonItem: backButtonItem; 
```

之后：（为我工作，按钮出现）

```
[self.navigationItem setLeftBarButtonItem: backButtonItem]; 
```

如果 StoryBoard 在 ViewController 中没有 LeftBarButtonItem 和 RightBarButtonItem，我们必须设置 Button(setLeft/RightBarButtonItem)。

否则只需简单更改项目的属性（self.navigationItem.Left/RightBarButtonItem）

# phpmyadmin - phpmyadmin 想要杀死一个进程，但它很忙

> ID：10391304
> 
> 赞同：0
> 
> 时间：2012-04-30T22:16:51.500
> 
> 标签：phpmyadmin

我有一个运行在一组用户通过 phpmMyAdmin 访问的大型 MySQL 数据库。

有时他们会启动一个运行时间过长的进程，他们需要终止该进程。理论上，这可以从主页下的进程选项卡下完成，其中用户进程显示为带有终止链接。

这将是完美的，只是原始进程绑定了 mysql。让第二个 phpmyadmin 页面进入进程终止页面挂起等待建立连接。

有没有办法克服这个。一种方法可能是优先考虑 mysql 中的某些进程。另一种方法可能是编写一个 cgi 脚本，该脚本可以通过单独的 Web 服务器（Python 中的两行）杀死 mysql 进程，并赋予更高的“nice”priotory 值。

我宁愿能够通过 phpmyadmin 配置来完成这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:14:33.550

几个选项：

1.  使用其他浏览器
2.  使用 Chrome 的隐身模式
3.  关闭并重新打开您的浏览器
4.  清除您的 cookie

# php - 使用 PHP/MySQL 填充 JavaScript 数组

> ID：10391307
> 
> 赞同：1
> 
> 时间：2012-04-30T22:17:41.847
> 
> 标签：php, javascript, mysql

尽管我不仅在这里而且在其他论坛上看到了多个帖子中解决了这个问题，但我想要一些与我手头的任务有关的更多基本信息，因为每个程序员对这个特定功能的需求略有不同。

现在，我只想从我的数据库中提取 x 数量的数据（这是我的专业领域，因为我已经使用这些语言几年了......我也使用 mysqli 扩展）然后放置JavaScript 数组中的数据。

那时，我将在 JS 数组中显示信息以适应我想到的多种用途。

编写符合标准的代码对我来说很重要，所以我不介意花时间学习完成这些任务的最佳方法。

我见过提到 JSON 和其他技术。我不想在这里寻找任何非常复杂的东西，只是从我的数据库中填充 JS 数组。

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:24:03.847

从 PHP 填充任何 JS 变量通常涉及这种构造：

```
$myvar = array('hello world');

?>
<script type="text/javascript">
var myvar = <?php echo json_encode($myvar); ?>;
</script> 
```

# asp.net-mvc - OnBegin 和 Success 的 jquery 动画被中断并且不再平滑

> ID：10391311
> 
> 赞同：1
> 
> 时间：2012-04-30T22:18:32.370
> 
> 标签：asp.net-mvc, jquery

由于我做了更改：[将 asp.net mvc ajax actionlink 重写为 jquery/ajax 语句](https://stackoverflow.com/questions/10389740/rewrite-an-asp-net-mvc-ajax-actionlink-as-a-jquery-ajax-statement) ，当我单击这三个链接之一时，以下代码不再提供平滑的淡入/淡出动画：为什么会这样？

```
 function OnBeginStuff() {
            $("#StuffPanel").fadeTo("slow", 0.50);
        }
        function OnCompleteStuff() {
            $("#StuffPanel").fadeTo("slow", 1.00);
        }

        $(document).ready(function () {

            $('.mainLink', $('#NavigationPanel')).click(function (e) {
                e.preventDefault();
                $.ajax({
                    url: $(this).attr('href'),
                    beforeSend: OnBeginStuff,
                    complete: OnCompleteStuff,
                    success: function (html) {
                        $('#StuffPanel').html(html);
                    }
                });
            });
        });
    </script>    
</head>
<body>
    <div id="NavigationPanel">
        @Html.ActionLink("1", "Index", "One", null, new { @class = "mainLink" })
        @Html.ActionLink("2", "Index", "Two", null, new { @class = "mainLink"  })
        @Html.ActionLink("3", "Index", "Three", null, new { @class = "mainLink" })    
    </div>
    <div id="StuffPanel">
        @RenderBody()
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:56:59.233

您是否有任何理由同时使用`#NavigationPanel`和`.mainLink`来绑定点击功能。
试试这个

```
$('.mainLink').click(function (e) {
                e.preventDefault();
                $.ajax({
                    url: $(this).attr('href'),
                    beforeSend: OnBeginStuff,
                    complete: OnCompleteStuff,
                    success: function (html) {
                        $('#StuffPanel').html(html);
                    }
                });
            }); 
```

或者，如果您需要同时使用两个选择器，则将此行添加到 click 事件处理程序 `e.stopPropagation();`，`e.preventDefault();`这样事件的冒泡将停止，并且只会发送一次调用`ajax`and`OnBeginStuff`和`OnCompleteStuff`。

# testing - TestNG 万无一失，使用 maven 命令行运行套件

> ID：10391312
> 
> 赞同：9
> 
> 时间：2012-04-30T22:19:02.960
> 
> 标签：testing, selenium-webdriver, maven-2, testng, surefire

是否可以通过 maven 从命令行运行预定义的 xml 套件？

我能够运行一个类或一个特定的测试。但我无法运行套件。

这是我从命令行运行的内容：-->

```
 mvn -Dtest=TestCircle#mytest -Denvironment=test -Dbrowser=firefox -DscreenShotDirectory=/Users/jeremy/temp test 
```

我确实定义了一个套件，它可以很好地通过 intelliJ 运行，但我不确定如何调用 suite.xml 文件。

或者例如，在测试运行后，testng 创建一个 testng-failed 文件，该文件被设置为再次运行所有失败的测试。

使用 mvn，我将如何启动这个测试套件。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-06T17:39:58.553

这个答案给了我我正在寻找的东西，即能够在命令行传递我想要运行的套件的名称：

[http://www.vazzolla.com/2013/03/how-to-select-which-testng-suites-to-run-in-maven-surefire-plugin/](http://www.vazzolla.com/2013/03/how-to-select-which-testng-suites-to-run-in-maven-surefire-plugin/)

简而言之，将以下内容添加到 pom.xml 的 maven-surfire-plugin 节中：

```
<suiteXmlFiles>
    <suiteXmlFile>${suiteXmlFile}</suiteXmlFile>
</suiteXmlFiles> 
```

然后您可以在命令行中指定所需的 testng 套件 xml 文件：

```
mvn clean install test -DsuiteXmlFile=testngSuite.xml 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-12T05:10:07.310

```
<build>
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12</version>
    <configuration>
      <suiteXmlFiles>
        <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
      </suiteXmlFiles>
    </configuration>
  </plugin>
</build> 
```

它对我有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-01T09:30:21.183

通常你不需要与 TestNG 有任何特殊关系。只需使用 maven-surefire-plugin：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12</version>
  </plugin> 
```

并基于此，所有正确注释的测试都应该运行。啊，当然你需要像这样对 TestNG 的依赖：

```
<dependency>
  <groupId>org.testng</groupId>
  <artifactId>testng</artifactId>
  <version>6.5.2</version>
  <scope>test</scope>
</dependency> 
```

通常我不会再创建测试套件了，因为这是你必须维护的一个点，经常错过更新等。只需使用注释。

如果您需要运行特定的测试套件，只需在 src/test/resources 中定义一个 testng.xml 文件并适当地增强[maven-surefire 插件](http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html)的配置。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12</version>
    <configuration>
      <suiteXmlFiles>
        <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
      </suiteXmlFiles>
    </configuration>
  </plugin> 
```

# java - Java中的哈希有或没有盐

> ID：10391314
> 
> 赞同：2
> 
> 时间：2012-04-30T22:19:18.287
> 
> 标签：java, encryption, salt

我正在尝试使用或不使用盐来编码为 SHA(128,256,512) 的方法。不加盐的方法是

```
private static String crypt(String chain, String method) {
    MessageDigest md;
    try {
        md = MessageDigest.getInstance(method);
        md.update(chain.getBytes("UTF-8"));
        byte[] mb = md.digest();
        String out = "";
        for (int i = 0; i < mb.length; i++) {
            byte temp = mb[i];
            String s = Integer.toHexString(new Byte(temp));
            while (s.length() < 2) {
                s = "0" + s;
            }
            s = s.substring(s.length() - 2);
            out += s;
        }
        return out;

    } catch (Exception e) {
        System.out.println("ERROR: " + e.getMessage());
    }
    return null;
} 
```

该方法可以在哪里

```
private final static String MD5="MD5";
private final static String SHA_128="SHA-1";
private final static String SHA_256="SHA-256";
private final static String SHA_384="SHA-384"; 
```

但我也想有一个方法 crypt(String chain,String salt, String method)。我尝试将行更改为：

```
byte[] mb=md.digest(salt.getBytes("UTF-8"); 
```

但它没有返回正确的链（与 php 调用**hash_hmac('sha256','pass','salt')**相比）。我该如何解决这个问题，或者在哪里可以找到这些算法的可选盐的方法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:22:44.783

请参阅[这 2 行 PHP 有何不同？](https://stackoverflow.com/questions/1629415/how-are-these-2-lines-of-php-different)对于 HMAC 和仅与盐连接之间的区别。

# iphone - 子类化 UISegmentedControl 以在每个段上添加彩色 UIView

> ID：10391321
> 
> 赞同：1
> 
> 时间：2012-04-30T22:19:57.307
> 
> 标签：iphone, uiview, uisegmentedcontrol

我想向 UISegmentedControl 添加一个小彩色指示器（只是一个彩色矩形）。我以为我可以继承 UISegmentedControl 并在 initWithFrame 中添加该标志，如下所示：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        UIColor *first = [UIColor blueColor];
        UIColor *second = [UIColor orangeColor];

        UIView *firstView = [[UIView alloc] initWithFrame:CGRectMake(self.bounds.origin.x + 5, self.bounds.origin.y + 5, 10, self.bounds.size.height)];
        firstView.backgroundColor = first;

        [self addSubview:firstView];
    }
    return self;
} 
```

当我实例化一个 CustomSegmentedControl 对象时，我只得到了蓝色矩形，但没有其他原始的 segmentedcontrol 绘图逻辑。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:29:09.103

水晶，

是否可以将图像用于彩色矩形？如果是这样，你可以使用

```
- (void)setImage:(UIImage *)image forSegmentAtIndex:(NSUInteger)segment 
```

添加图像。就像是

```
[segmentedControl setImage:[UIImage imageNamed:@"blueRectangle"] forSegmentAtIndex:0]; 
```

希望这可以帮助！

# php - 使用 php 循环从目录创建缩略图

> ID：10391323
> 
> 赞同：0
> 
> 时间：2012-04-30T22:20:09.693
> 
> 标签：php, mysql, thumbnails

好的，我已经有一段时间了，需要一些帮助。我有一个包含 3000 多张图片的目录，我需要缩略图，但我无法让 php 来做这件事:(

我从来没有用 php 制作缩略图，所以这对我来说是新的，我发现了一些脚本可以在您将图像上传到服务器时创建缩略图，我将从这里开始。

图像位置作为 URL 存储在 mysql 数据库中。我需要它来创建图像的缩略图，当然，还需要使用缩略图 url 更新数据库。

这是我用来整合我的需求的脚本：http:
[//net.tutsplus.com/articles/news/how-to-dynamically-create-thumbnails/](http://net.tutsplus.com/articles/news/how-to-dynamically-create-thumbnails/)
我使用的是完全相同的functions.php & config .php 文件。

这是我得到的：
$row['image'] 是每个图像的位置，例如：[http](http://www.url.com/images/image.jpg)
://www.url.com/images/image.jpg $filename 我正在剥离 url，所以它只提供 image.jpg

```
<?php
    require 'config.php';  
    require 'functions.php';  
    require 'db.php';  
    $sql = mysql_query("SELECT * FROM pics");  
    while($row = mysql_fetch_array($sql, MYSQL_ASSOC)){  

        $filename = preg_replace('['.$url.']', '', $row['image']);              
        $source = $row['image'];

        createThumbnail($filename);

        $thumb_loc = $url . "images/thumbs/" . $filename;
        $id = $row['id'];
        mysql_query("UPDATE pics SET image_thumb = '$thumb_loc' WHERE id = '$id'");
    }
?> 
```

我为 $filename 提供了一个正确的文件名，为 $source 提供了图像源，所以它应该可以工作。
这是 functions.php 中的 createThumbnail 函数：

```
<?
function createThumbnail($filename) {

    require 'config.php';

    if(preg_match('/[.](jpg)$/', $filename)) {
        $im = imagecreatefromjpeg($path_to_image_directory . $filename);
    } else if (preg_match('/[.](gif)$/', $filename)) {
        $im = imagecreatefromgif($path_to_image_directory . $filename);
    } else if (preg_match('/[.](png)$/', $filename)) {
        $im = imagecreatefrompng($path_to_image_directory . $filename);
    }

    $ox = imagesx($im);
    $oy = imagesy($im);

    $nx = $final_width_of_image;
    $ny = $final_height_of_image;

    $nm = imagecreatetruecolor($nx, $ny);

    imagecopyresized($nm, $im, 0,0,0,0,$nx,$ny,$ox,$oy);

    if(!file_exists($path_to_thumbs_directory)) {
      if(!mkdir($path_to_thumbs_directory)) {
           die("There was a problem. Please try again!");
      }
       }

    imagejpeg($nm, $path_to_thumbs_directory . $filename);
    $tn = '<img src="' . $path_to_thumbs_directory . $filename . '" alt="image" />';
    $tn .= '<br />Congratulations. Your file has been successfully uploaded, and a    thumbnail has been created.';
    echo $tn;
}
?> 
```

以下是警告：

```
Warning: imagecreatefromjpeg(images/fullsized/image.jpg) [function.imagecreatefromjpeg]: failed to open stream: No such file or directory in functions.php on line 7

Warning: imagesx(): supplied argument is not a valid Image resource in functions.php on line 14

Warning: imagesy(): supplied argument is not a valid Image resource in functions.php on line 15

Warning: Division by zero in functions.php on line 18

Warning: imagecreatetruecolor() [function.imagecreatetruecolor]: Invalid image dimensions in functions.php on line 20

Warning: imagecopyresized(): supplied argument is not a valid Image resource in functions.php on line 22

Warning: imagejpeg(): supplied argument is not a valid Image resource in functions.php on line 30 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:34:52.117

问题似乎是您为要操作的图像文件指定的路径从脚本的位置无效。

示例中的文件是`images/fullsized/image.jpg`，相关错误是`failed to open stream: No such file or directory in functions.php on line 7`

`imagecreatefromjpeg`在告诉要打开什么文件时，您需要使用绝对路径，例如`$_SERVER['DOCUMENT_ROOT'] . '/images/fullsized/image.jpg'`或`/home/yoursite/public_html/images/fullsized/image.jpg`.

> 完整路径或绝对路径是指向一个文件系统上相同位置的路径，与工作目录或组合路径无关。它通常是参考根目录编写的。

所有其他错误消息只是图像无法打开的副作用。由于路径不正确，没有创建 GD 图像，因此在其上调用的函数将不起作用。

# c# - BLL 中的静态方法与实例方法

> ID：10391326
> 
> 赞同：1
> 
> 时间：2012-04-30T22:20:10.807
> 
> 标签：c#

今天被问到为什么我在 asp.net 应用程序中为我的 bll 类使用这样的代码：

```
public class StudentBll
{
    public static DataTable GetStudents()
    {
        return DBHelper.ExecuteSp("GetStudents");
    }
    public static DataTable GetStudentById(int studentId) 
    {
        return DBHelper.ExecuteSp("GetStudentById", studentId);
    }
} 
```

代替

```
public class StudentBll
{
    public DataTable GetStudents()
    {
        return DBHelper.ExecuteSp("GetStudents");
    }
    public DataTable GetStudentById(int studentId) 
    {
        return DBHelper.ExecuteSp("GetStudentById", studentId);
    }
} 
```

我唯一能想到的就是

A)**性能**略有提高（不确定具体情况）

B）**可读性** `StudentBll.GetStudents();`而不是

```
StudentBll studentBll = new StudentBll();
studentBll.GetStudents(); 
```

然而，我对这些答案并不太自信。有人愿意开导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:25:54.680

关于性能，如果您无法显示增加的内容，则它不支持您的主张。也有人可能会争辩说，静态方法调用与实例方法调用的性能增益相比，往返旅行和数据库时间的性能增益可以忽略不计。

您还锁定了您的实现（或至少迫使消费者做一些更难修改的事情）。如果您丢失了接口的静态方法和代码，不同层的测试人员和开发人员可以构建模拟，这样他们就不会被迫使用您提供的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:26:55.330

当我看到公共静态方法时，可测试性是我首先想到的。还要忘记 oop - 这里没有继承（类和接口），因此您没有类实例。没有继承意味着没有抽象。没有抽象意味着紧密耦合。

# html - 有没有办法让 title= 属性在 Chrome 上工作？

> ID：10391327
> 
> 赞同：19
> 
> 时间：2012-04-30T22:20:14.103
> 
> 标签：html, firefox, google-chrome, title

```
<span title="Hover text">Hello World</span> 
```

在 Firefox 中，这将显示带有“悬停文本”的工具提示，但在 Chrome 中，您什么也得不到。有什么方法可以用 HTML/CSS 解决这个问题，还是需要其他脚本语言？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T22:24:18.970

`title="hover text"`是铬的工作方式。您确定在跨度文本之上没有其他内容（可能是没有内容的 div）吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T22:22:08.220

它只适用于我的标题。

您应该同时使用`alt="Hover text"`和`title="Hover text"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T17:46:01.853

虽然这是一个非常古老的帖子，但我没有看到任何答案。我遇到了同样的问题，对我来说问题是元素在另一个后面。我已经使用 z-index 将它向上移动并解决了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-25T17:04:08.623

我还遇到了在未显示的 div 上定义的“标题”工具提示的问题。在我的情况下，它不是特定于浏览器的东西，但我想我还是会把它贴在这里......

我通过定义更高的 z-index 解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-26T10:46:13.733

如果你从谷歌来这里寻找关于在 Linux 下使用 Chromium 的标题属性中的故障的答案。然后您可能会对这个显然已在最新版本中修复的[错误报告感兴趣](https://bugs.chromium.org/p/chromium/issues/detail?id=442111)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-01T14:36:22.030

```
<!DOCTYPE html>
<html>
  <body>
    <span title="Hover text">Hello World</span>
  </body>
</html> 
```

为我工作

# sitecore - Sitecore DMS 停止记录？

> ID：10391328
> 
> 赞同：1
> 
> 时间：2012-04-30T22:20:21.197
> 
> 标签：sitecore, sitecore-dms

虽然我在 Pages 表中看到了数据，

```
Sitecore.Analytics.Data.DataAccess.DataSets.VisitorDataSet.PagesDataTable pagesDataTable = new VisitorDataSet.PagesDataTable(); 
```

空着回来。而且我看到最近的记录日期是 2012 年 4 月 12 日...考虑到该站点每天都在访问的事实...我试图理解为什么我在 sitecore_analytics 数据库中看不到任何记录？我查看了配置并确保启用了分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:32:05.600

事实证明，我在 httpbeginrequest 上从 sitecore 管道调用的另一段代码存在问题。该代码被炸毁，并且从未让其他管道方法处理。有趣的是，这一切都被隐藏了，而且错误从来没有冒出来知道是什么真正导致了这个问题。

# c++ - 避免通用容器中 begin() 和 end() 函数的重复代码

> ID：10391338
> 
> 赞同：2
> 
> 时间：2012-04-30T22:21:28.387
> 
> 标签：c++, templates, iterator, constants, containers

有几个与此类似的线程[Q1](https://stackoverflow.com/questions/10308049/c-function-code-generalization-using-template)或[Q2](https://stackoverflow.com/questions/856542/elegant-solution-to-duplicate-const-and-non-const-getters)，但不完全是。

问题只是以优雅的方式编写以下代码，没有代码重复：

```
template <typename T, class Container = std::vector<T> >
class container{
    iterator begin(){
        return iterator(data_.begin(), 1);
    }

    const_iterator begin() const{
        return const_iterator(data_.begin(), 1);
    }
    Container data_;
}; 
```

[Q2](https://stackoverflow.com/questions/856542/elegant-solution-to-duplicate-const-and-non-const-getters)有一种优雅的方式来避免具有完全相同签名的 const 和非常量函数的代码重复。然而，这里不是这种情况，因为没有将 const_iterator 转换为迭代器的强制转换。

[Q1](https://stackoverflow.com/questions/10308049/c-function-code-generalization-using-template)提供了一个使用模板的好方法，然而，一旦容器是一个类，`begin_impl`函数就`static`同时变成了 和`friend`。

我想出的最优雅的代码是：

```
template <T>
class container{
        template< typename I, typename C >
        static I begin_impl( C & c ){
            return I(data_.begin(), 1);
        }

        template< typename I, typename C >
        friend I container<T>::begin_impl( C & c );

        iterator begin(){
            return container<T>::template begin_impl< iterator >( *this );
        }

        const_iterator begin() const{
            return container<T>::template begin_impl< const_iterator >( *this );
        }
} 
```

我的问题是这是否是您认为最优雅的方式。如果没有，请建议一些更好的代码。

编辑：我的迭代器实现：

```
class container{
        template <bool isConst>
        class iterator_ {

        public:
            typedef Container container_type;
            typedef typename Container::value_type value_type; 
            typedef typename Container::difference_type difference_type;
            typedef typename Container::size_type size_type;
            typedef typename Container::reference reference;
            typedef typename Container::const_reference const_reference;
            typedef typename Container::pointer pointer; 
            typedef typename Container::const_pointer const_pointer;
            typedef typename std::forward_iterator_tag iterator_category;

            template<bool isCond, typename cref, typename ref>
            struct IS_CONST_REF{
                typedef ref reference_type;
            };
            template<typename cref, typename ref>
            struct IS_CONST_REF<true, cref, ref>{
                typedef cref reference_type;
            };            
            typedef typename IS_CONST_REF<isConst, const_reference, reference>::reference_type ref;

            template<bool isCond, typename citr, typename itr>
            struct IS_CONST_ITR{
                typedef itr iterator_type;
            };
            template<typename citr, typename itr>
            struct IS_CONST_ITR<true, citr, itr>{
                typedef citr iterator_type;
            };            
            typedef typename IS_CONST_ITR<isConst, typename Container::const_iterator, typename Container::iterator>::iterator_type itr; 

            iterator_()
            :data_(), stepSize_(0){
            }

            iterator_(itr data, difference_type stepSize)
            :data_(data), stepSize_(stepSize){
            }

            iterator_(const iterator_<false>& src)
            :data_(src.getData()), stepSize_(src.getStepSize()){
            }

        [some more code ...] 

        protected:
            itr data_;
            difference_type stepSize_;
        };

        typedef iterator_<true> const_iterator;
        typedef iterator_<false> iterator;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:36:48.507

关于什么：

```
class container{
    iterator begin(){
        return iterator(getStuff());
    }

    const_iterator begin() const{
        return const_iterator(getStuff());
    }

    private:
       Stuff getStuff() const  { [some code here] }
}; 
```

如果你有通用代码。
将其移至执行该工作的私有方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T19:53:41.807

好的，显然这仍然是最好的答案：

```
template <T>
class container{
        template< typename I, typename C >
        static I begin_impl( C & c ){
            return I(data_.begin(), 1);
        }

        template< typename I, typename C >
        friend I container<T>::begin_impl( C & c );

        iterator begin(){
            return container<T>::template begin_impl< iterator >( *this );
        }

        const_iterator begin() const{
            return container<T>::template begin_impl< const_iterator >( *this );
        }
} 
```

# java - 计数器应用程序不会停止

> ID：10391339
> 
> 赞同：0
> 
> 时间：2012-04-30T22:21:28.667
> 
> 标签：java, multithreading, interrupt

我制作了一个计数器应用程序，当用户在控制台中输入“停止”时，它使用线程来中断计数。我已经仔细检查了我的代码，但看不到问题所在。我是线程新手，所以任何人都可以看看这个。

```
import java.util.Scanner;

public class CounterInterruptApp 
{

    public static void main(String[] args) 
    {
      new CounterInterruptApp().start();
    }

    public void start()
    {
        Thread counter = new Counter(); //Instantiate the counter thread.
        counter.start(); //Start the counter thread.

        Scanner scanner = new Scanner(System.in);
        String s = "";
        while(!s.equals("stop")); //Wait for the user to enter stop.
        s=scanner.next();
        counter.interrupt(); //Interrupt the counter thread.
    }

}

public class Counter extends Thread //Extend Thread for the use of the Thread Interface.
{
    public void run()//Run method.  This is part of the Thread interface.
    {
        int count = 0;
        while(!isInterrupted())
        {
            System.out.println(this.getName() + "Count: " + count);
            count++;
            try //Try/Catch statement.
            {
              Thread.sleep(1000); //Make the Thread sleep for one second.
            } catch(InterruptedException e) {
              break;
            }
        }
        System.out.println("Counter Interrupted."); //Display the message Counter Interrupted.
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T22:29:08.623

您的 while 循环检查“停止”字符串的格式不正确。它应该是这样的：

```
while(!s.equals("stop"))
{   //Wait for the user to enter stop.
    s=scanner.nextLine();
}
counter.interrupt();  //Interrupt the counter thread. 
```

# javascript - 内联 onclick 处理程序阻止捕获表单的提交

> ID：10391342
> 
> 赞同：1
> 
> 时间：2012-04-30T22:21:56.110
> 
> 标签：javascript, jquery, wordpress, onclick, submit

我有以下无法更改的内联代码是由外国人插件输出的。包含`onclick`触发`submit`事件的处理程序：

```
<input type='button' id='gform_next_button_12_188' 
class='button gform_next_button' value='Next' tabindex='3' 
onclick='jQuery("#gform_target_page_number_12").val("2"); jQuery("#gform_12").trigger("submit",[true]); '/> 
```

我想在提交表单之前运行一些例程，我尝试了这个：

```
$("#gform_12").submit(function(e){

    // this code is not running ...

}); 
```

它失败了，即提交表单时我的代码没有运行。有什么建议吗？

**基于给出的答案的最终解决方案**

```
var inline_onclick_code_on_next = $(".gform_next_button").first().attr("onclick");
$(".gform_next_button").removeAttr("onclick");
$(".gform_next_button").bind("click", function() {
    myClass.autosave_on_click(inline_onclick_code_on_next);
});

myClass = {
    errorMessage : "",
    autosave_on_click: function (inline_onclick_code){
        my_gravity_form_saving_running = 1;
        myClass.saveData(); // this code must put my_gravity_form_saving_running = 0 when all data be saved
        countdown_max_loop = 10; // seconds
        var countdown = window.setInterval(function(){
            if (countdown_max_loop-- == 0 || my_gravity_form_saving_running == 0){
                clearInterval(countdown);
                eval (inline_onclick_code);
            }
        }, 1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:27:53.223

您应该能够取消绑定 click 方法，然后重新绑定您想要执行的操作：

```
$('#gform_next_button_12_188')
   .unbind('click')
   .bind('click', function() {
       // your stuff
       // submit stuff that was there
   }); 
```

**编辑：**试试这个来覆盖 onclick 属性：

```
$('#gform_next_button_12_188')
  .attr('onclick', '')
  .bind('click', function() {
      // your stuff
      // submit stuff that was there
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:29:03.193

尝试从元素中取消绑定单击事件，然后指定您自己的。

```
$('#gform_next_button_12_188').unbind('click').removeAttr('onclick');
$('#gform_next_button_12_188').bind('click', function() {
    // do magic stuff

    // do the rest
    jQuery("#gform_target_page_number_12").val("2");
    jQuery("#gform_12").trigger("submit",[true]); 
}); 
```

编辑：

添加了 removeAttr，谢谢@gdoron

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T23:40:28.720

无需重新输入（甚至不知道）内联内容即可预先添加您的内容会很方便。

以下函数将执行此操作：

```
$(function(){
    function prependHandler(selector, event, fn) {
        try {
            if (event.split(' ').length > 1) {
                event = event.split(' ')[0];
            }
            var $el = $(selector),
                inline_handler = $el.get(0)['on' + event];
            $el.on(event, function() {
                fn.call(this); //invoke your own magic stuff
                inline_handler.call(this); //invoke original inline magic stuff
            }).get(0)['on' + event] = null;
            return true;
        }
        catch (e) {
            return false;
        }
    }

    //call as follows:
    prependHandler("#gform_next_button_12_188", 'click', function() {
        alert('my functionality'); //specify your own magic stuff here
    });
}); 
```

见[小提琴](http://jsfiddle.net/hNcBp/2/)

笔记：

*   在`prependHandler`中，我们用于`.call(this)`确保`this`（对目标元素的引用）`this`在原始处理程序和前置处理程序中可用，以防需要。
*   `prependHandler`返回 true 或 false 以允许您测试它是否成功，以防您需要知道。
*   虽然您可以传入一个选择多个元素的选择器，但使用`.get(0)`内部限制`prependHandler`只能处理第一个选定元素。
*   稍微考虑一下，您可以将框架`prependHandler`作为一个 jQuery 插件来克服上述限制，但它可以正常工作，因为它是在单个元素上。

# html - 在 HTML+CSS 中的活动菜单项下添加箭头

> ID：10391343
> 
> 赞同：4
> 
> 时间：2012-04-30T22:22:04.567
> 
> 标签：html, css

我正在尝试生成如下菜单：

![在此处输入图像描述](../Images/0ce682358fc3aba5433238a59f88cacb.png)

菜单中有几个项目，活动项目后面有一个箭头。菜单项是类似于以下代码的标签：

```
<div class="menuCenter">
     <div class="linksWrapper">
      <a href="#">Home</a>
      <a class="menuCenterLinkLeft" href="#">Plans & Pricing</a>
      <a class="menuCenterLinkLeft" href="#">Sign In</a>
      <a class="menuCenterLinkLeft active" href="#">Sign Up</a>
      <a class="menuCenterLinkLeft" href="#">Contact</a>
     </div>
</div> 
```

我尝试了两个选项： 1- 使用 javascript 绝对定位箭头图像。调整页面大小时遇到​​问题。2- 使用 :after 伪元素，如下所示：

```
.linksWrapper a.active:after
{
    content: url("images/arrowImg.png");
    position: relative;
    left: -40px;
    top: 30px; 
} 
```

这种方法的问题是箭头的水平对齐。它应该在链接的中心下方，我无法做到这一点。我可以使用 HTML5 或 CSS 3。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T22:28:25.080

试试这个：

```
.linksWrapper a.active:after {
    content: url("images/arrowImg.png");
    position: absolute;
    left: 50%;
    top: 30px;
    margin-left: - <width-of-your-image> / 2; /* negative number!*/
} 
```

旁注：我避免`{`换行，因为它可能在 javascript 中产生令人讨厌的影响。

该技巧`left:50%;`与通过通过将其设置回半角来校正位置相结合`margin-left`。

见**[例子](http://jsfiddle.net/u85as/1/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:28:21.323

绝对定位方法应该有效，您需要将箭头放在另一个已`position:relative`定义的 div 内，以便绝对坐标相对于该父 div，而不是相对于 body 元素。

但是，我会改用这种方法：

使箭头成为实际 a.active 项目的背景图像的一部分 - 这样它就会居中`background-position`并且您不需要任何脚本！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T22:33:25.890

我很快就把这个放在一起了..

[http://jsfiddle.net/8Sqwq/1/](http://jsfiddle.net/8Sqwq/1/)

因为我不太确定您的代码有多灵活，所以这是我能想到的最好的。

哪个 href 具有 .active 的类名将继承箭头

// 我更新了小提琴以显示它的实际效果。

# javascript - 优化等距字母的特定正则表达式搜索

> ID：10391349
> 
> 赞同：0
> 
> 时间：2012-04-30T22:22:57.543
> 
> 标签：javascript, regex

我正在使用 Javascript，但我认为这是一个一般的正则表达式问题。

我正在编写一个脚本，它在一个长字符串中搜索字母之间距离相等的子字符串。例如，在文本中，`a11b22c33d44`我们有`abcd`每两个连续字母之间距离为 2 的字符串。

使用 regexp 搜索查找此类字符串很简单：对于上面的示例，我只需要搜索 regexp `/a.{2}b.{2}c.{2}d/`。所以我现在要做的是：给定一个要搜索的单词以及我简单地放在`.{n}`它们之间的连续字母之间的距离（其中 n 是距离），将其编译为正则表达式并让它完成其余的工作。

只要字母之间的距离很小，这在实践中效果很好——比如说，大约 1000。之后它变得很慢。它仍然有效，但我希望有另一种方法可以更有效地执行相同的搜索；我看不出为什么对于较大的间隙它应该显着变慢的明显原因（我们仍然需要只浏览整个文本一次，对吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:24:50.650

问题是点几乎可以匹配任何东西，包括字母。每次找到 a`a`时，它都必须吞噬接下来的*n 个*字符并尝试匹配 a `b`，然后再放弃该匹配。这是很多浪费的努力。

您需要更具体地说明您*不想*匹配的内容。例如，如果您的搜索词始终完全由字母组成，您可以通过`.`将`[^a-z]`

```
/a[^a-z]{1000}b[^a-z]{1000}c[^a-z]{1000}d/i 
```

另一种可能性是匹配除下一个必需字符之外的任何内容：

```
/a[^b]{1000}b[^c]{1000}c[^d]{1000}d/i 
```

两种解决方案都基于所需字符之间的文本不能包含相同字符的假设。

再说一次，如果您只搜索整个单词，并且您知道搜索词的第一个和最后一个字符将始终是单词字符，也许您只需要添加单词边界：

```
/\ba.{1000}b.{1000}c.{1000}d\b/i 
```

# video - 使用 webm 和 ogg 编解码器启用“快速启动”渐进式下载是否有任何特定要求？

> ID：10391353
> 
> 赞同：11
> 
> 时间：2012-04-30T22:23:10.960
> 
> 标签：video, ogg, webm, progressive-download

我知道 ,`mp4`必须`moov atom`放在文件的开头才能启用渐进式下载。这可以通过在创建文件时启用“快速启动”来完成。

我很好奇在处理文件时是否有任何类似的要求`webm`，`ogg`或者默认情况下它们是否“准备好渐进式下载”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T01:40:56.260

由于它们的构造方式，WebM (Matroska) 和 Ogg 文件**没有**任何快速启动 remuxing 要求，使其适合渐进式下载。

# c# - WCF REST - 覆盖传入的请求数据

> ID：10391354
> 
> 赞同：1
> 
> 时间：2012-04-30T22:23:17.547
> 
> 标签：c#, .net, wcf, http, rest

是否可以在 WCF 中更改传入 HTTP 请求的数据？

我已经找到了如何更改 HTTP 方法（使用传入消息的`IDispatchOperationSelector`和）。`HttpRequestMessageProperty`

我正在编写可以使用 GET 请求（方法和数据存储在查询字符串中）发出“POST”请求的行为。我可以覆盖 HTTP 方法，但找不到覆盖数据的解决方案。我需要加载存储在查询字符串中的数据并将它们用作 HTTP 正文。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T03:16:26.717

您需要重新创建传入消息，以便消息正文包含您要传递的信息。正文可能采用 XML 或 JSON 格式（支持开箱即用）。下面的代码显示了如何做到这一点的一个示例。

```
public class StackOverflow_10391354
{
    [ServiceContract]
    public class Service
    {
        [WebInvoke(BodyStyle = WebMessageBodyStyle.WrappedRequest)]
        public int Add(int x, int y)
        {
            return x + y;
        }
    }
    class MyWebHttpBehavior : WebHttpBehavior
    {
        protected override WebHttpDispatchOperationSelector GetOperationSelector(ServiceEndpoint endpoint)
        {
            return new MyOperationSelector();
        }
        public override void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            base.ApplyDispatchBehavior(endpoint, endpointDispatcher);
        }
    }
    class MyOperationSelector : WebHttpDispatchOperationSelector
    {
        protected override string SelectOperation(ref Message message, out bool uriMatched)
        {
            HttpRequestMessageProperty prop = (HttpRequestMessageProperty)message.Properties[HttpRequestMessageProperty.Name];
            if (message.Headers.To.LocalPath.EndsWith("/Add") && prop.Method == "GET")
            {
                prop.Method = "POST";
                uriMatched = true;
                message = CreateBodyMessage(message);
                return "Add";
            }
            else
            {
                return base.SelectOperation(ref message, out uriMatched);
            }
        }

        private Message CreateBodyMessage(Message message)
        {
            HttpRequestMessageProperty prop = message.Properties[HttpRequestMessageProperty.Name] as HttpRequestMessageProperty;
            string queryString = prop.QueryString;
            NameValueCollection nvc = HttpUtility.ParseQueryString(queryString);
            StringBuilder sb = new StringBuilder();
            sb.Append('{');
            bool first = true;
            foreach (string key in nvc.Keys)
            {
                if (first)
                {
                    first = false;
                }
                else
                {
                    sb.Append(',');
                }

                sb.Append('\"');
                sb.Append(key);
                sb.Append("\":\"");
                sb.Append(nvc[key]);
                sb.Append('\"');
            }
            sb.Append('}');
            string json = sb.ToString();
            XmlDictionaryReader jsonReader = JsonReaderWriterFactory.CreateJsonReader(Encoding.UTF8.GetBytes(json), XmlDictionaryReaderQuotas.Max);
            Message result = Message.CreateMessage(MessageVersion.None, null, jsonReader);
            result.Properties.Add(HttpRequestMessageProperty.Name, prop);
            result.Properties.Add(WebBodyFormatMessageProperty.Name, new WebBodyFormatMessageProperty(WebContentFormat.Json));
            result.Headers.To = message.Headers.To;
            return result;
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        ServiceEndpoint endpoint = host.AddServiceEndpoint(typeof(Service), new WebHttpBinding(), "");
        endpoint.Behaviors.Add(new MyWebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/Add?x=66&y=88"));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T02:51:59.633

您可以使用消息检查器：[http ://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx](http://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx)

# asp.net - Linq char.isnumber 检查字符串是否以数字开头

> ID：10391357
> 
> 赞同：0
> 
> 时间：2012-04-30T22:23:33.283
> 
> 标签：asp.net, regex, linq, nhibernate

> **可能重复：**
> [linq to entity 无法识别方法](https://stackoverflow.com/questions/5845993/linq-to-entities-doesnt-recognize-a-method)

我正在尝试检查字符串是否以数字开头

```
var product09 = DataContext.Products.Where(x => Char.IsNumber(x.ProductName,0)); 
```

我也试过

```
var product09 = DataContext.Products.Where(x => Char.IsNumber(x.ProductName[0])); 
```

我收到以下错误：

```
Boolean IsNumber(Char)

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NotSupportedException: Boolean IsNumber(Char) 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:31:23.033

根据您的评论，您正在使用 NHibernate。您应该能够使用以下`CreateCriteria`方法：

```
using (ISession session = sessionFactory.OpenSession())
{
    var result = session.CreateCriteria<Product>()
                        .Add(Restrictions.Like("ProductName", "[0-9]%"))
                        .List<Product>();
} 
```

你也可以使用`.Add(Restrictions.Like("ProductName", "[0-9]", MatchMode.Start))`

另一种选择是使用 HQL：

```
var query = "from Product p where p.ProductName like '[0-9]%'";
var result = session.CreateQuery(query).List<Product>(); 
```

* * *

您可以将该[`SqlMethods.Like`方法](http://msdn.microsoft.com/en-us/library/bb355235.aspx)与 LINQ to SQL 一起使用：

```
var query = dc.Products.Where(x => SqlMethods.Like(x.ProductName, "[0-9]%")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:29:22.400

'怎么样：

```
char[] numbers = new[] { '0', '1', '2' , '3', '4', '5', '6', '7', '8', '9' };
DataContext.Products.Where(x => numbers.Contains(x.Substring(0, 1)); 
```

# node.js - Node.js 构建 ./configure 选项说明

> ID：10391358
> 
> 赞同：1
> 
> 时间：2012-04-30T22:23:45.583
> 
> 标签：node.js

是否有关于`./configure`从源代码构建 Node.js 的各种选项的任何资源（文档）？例如，`./configure --debug`vs`./configure --gdb`可以做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:29:15.190

是的，在[文件本身](https://github.com/joyent/node/blob/master/configure)内部。

# jquery - ajax datepicker jquery ui

> ID：10391365
> 
> 赞同：-2
> 
> 时间：2012-04-30T22:24:56.670
> 
> 标签：jquery, html, ajax, jquery-ui, jquery-ui-datepicker

我有一个表，它应该根据提交的日期返回值。每当日期更改时，我想让 datepicker 向服务器发送一个 ajax 请求。我正在寻找一个示例来实现这一点。提前致谢..

```
<script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
    </script>

<div class="demo">

<p>Date: <input type="text" id="datepicker"></p>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:30:09.077

```
$("#datepicker").datepicker(function() {
  onSelect: 
        function() {
          $.ajax(
            url: "yourURL",
            success: function(data) {
                  // your logic here
          }
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:29:06.403

```
$("#datepicker").datepicker({
  onSelect: function(dateText) {
    // your ajax request
  }
}); 
```

# c# - Visual Studio 类图查看器独立

> ID：10391368
> 
> 赞同：2
> 
> 时间：2012-04-30T22:25:17.157
> 
> 标签：c#, visual-studio-2010, uml, class-diagram

Visual Studio 制作类图，如果我们在文本编辑器程序中打开它，它是一个简单的`XML`. 当然，我们可以在运行时生成它。但问题是，虽然你有 Visual Studio 可以看到`Class Diagram`Generated 但是如果我们想在没有`Visual Studio`Installed 的地方部署应用程序，有什么解决方案？

1.  是否有任何可能或可用的插件或库可以从 XML 生成类图或 UML 图？
2.  我们可以以某种方式使用 Visual Studio 类图在运行时查看它吗？
3.  不确定，但是如果我们在后端生成 xml，然后如果可能的话，使用一些内置插件创建图像（png 或 gif）并显示它怎么办？（我真的不确定这个想法:()

我见过[NClass](http://nclass.sourceforge.net/)非常好，但是有点复杂，不是通过 XML 开发的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T01:47:52.467

我建议使用 PowerToys for Class Designer ( [http://modeling.codeplex.com](http://modeling.codeplex.com) )。它改进了类设计器并允许您将图表导出为 HTML。这种方式很容易分发到任何机器上。

作为替代方案，您可以通过反射采用不同的路径，在这种情况下，您不需要 Visual Studio 类图；这些图表是通过检查请求的类型生成的。我建议阅读 Sacha Barber 的文章（[http://www.codeproject.com/Articles/17823/100-Reflective-Class-Diagram-Creation-Tool](http://www.codeproject.com/Articles/17823/100-Reflective-Class-Diagram-Creation-Tool)和[http://www.codeproject.com/Articles/207280/ 200-Reflective-Class-Diagram-Creation-Tool](http://www.codeproject.com/Articles/207280/200-Reflective-Class-Diagram-Creation-Tool)）。也许你可以定制他的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-24T23:37:18.567

在 Visual Studio Enterprise 2017 中：

1.  如果 Visual Studio 正在运行，请退出它
2.  启动 Visual Studio 安装程序
3.  单击下拉列表“更多”并选择“修改”
4.  在“代码工具”部分，选中“类设计器”选项
5.  点击按钮：修改

结果：现在类图应该从解决方案资源管理器加载为 UML。

# javascript - 为什么 Number.prototype 是一个数字

> ID：10391370
> 
> 赞同：16
> 
> 时间：2012-04-30T22:25:31.537
> 
> 标签：javascript, ecmascript-5

```
({}).toString.call(Number.prototype) === "[object Number]" 
```

> Number 原型对象本身就是一个 Number 对象（它的 [[Class]] 是“Number”），其值为 +0。

### [15.7.4](http://es5.github.com/#x15.7.4)

为什么`Number.prototype`成为一个数字会有用？（对于将 [[Class]] 设置为非对象的所有其他内置原型也是如此）

我之所以选择，`Number.prototype`是因为我可以想象`Array.prototype`和`Date.prototype`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:27:55.970

> Number 原型对象本身就是一个 Number 对象（它的 [[Class]] 是“Number”），其值为 +0

为什么不是`Number.prototype`Number 对象？它`[[Prototype]]`是Object.prototype，所以它仍然继承自Object。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T02:55:41.700

通常，`Constructor.prototype`是由 定义的“类型”的示例`Constructor`。尽管对于不可变的原语来说事情似乎变得很棘手，尤其是当你涉及到拳击的东西时，这个示例概念仍然是有意义的，因为`0`它是`Number`.

# java - 用Java画椭圆

> ID：10391371
> 
> 赞同：0
> 
> 时间：2012-04-30T22:25:32.270
> 
> 标签：java, swing, ellipse

我有一个 java 程序，它在屏幕上显示一个椭圆并通过使用箭头键改变它的方向。我经常使用 while 循环在椭圆上调用 repaint()。

椭圆会移动，但问题是它会在其路径上留下一串椭圆。如何制作它以删除旧椭圆然后重新绘制新椭圆？

代码：

```
public void run(){
        while (animator != null) 
        {
            setBackground(Color.GREEN);
            repaint();
                            // The direction works and the rest works fine.
            player1.move(player1, player1.direction);
            try  
            {  
                Thread.sleep(100);  
            }  
            catch (InterruptedException e)  
            {  
                break;  
            }  
        }
}

// The paintComponent of my player1 is fine.
public void paint(Graphics g){
        Graphics2D g2 = (Graphics2D)g;
        player1.paintComponent(g2, player1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:36:15.310

问题可能是您的`paintComponent(Graphics)`覆盖方法没有调用`super.paintComponent(g)`，它清除了画布，除其他外：

```
// Bad:
@Override
public void paintComponent(Graphics g) {
    // paint the ellipse, etc.
}

// Good:
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    // paint the ellipse, etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:05:10.393

这是一些基本的代码（不使用连续的while循环）：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

@SuppressWarnings("serial")
public class Ellipses extends JFrame {

    public static void main(String[] args){
        //Ensures application is not run on the main thread 
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Ellipses myEllipses = new Ellipses();
                myEllipses.init();
            }
        });
    }

    public Ellipses(){
        //Set up the frame
        this.setTitle("Ellipses Example");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);
        this.setSize(400, 400);
    }

    private Ellipse ellipse1;

    public void init(){
        Container contentPane = this.getContentPane();

        //Create a new ellipse and add to the content pane
        ellipse1 = new Ellipse();
        contentPane.add(ellipse1);

        //Add the keyListener to the contentPane
        contentPane.addKeyListener(new KeyListener() {

            public void keyTyped(KeyEvent e) {}
            public void keyReleased(KeyEvent e) {}
            public void keyPressed(KeyEvent e) {
                if(e.getKeyCode() == KeyEvent.VK_UP){
                    ellipse1.decreaseY();
                }
                if(e.getKeyCode() == KeyEvent.VK_DOWN){
                    ellipse1.increaseY();
                }
                if(e.getKeyCode() == KeyEvent.VK_LEFT){
                    ellipse1.decreaseX();
                }
                if(e.getKeyCode() == KeyEvent.VK_RIGHT){
                    ellipse1.increaseX();
                }

                //Repaint the ellipse

                ellipse1.repaint();
            }
        });

        //Request the focus so key presses can be detected
        contentPane.setFocusable(true);
        contentPane.requestFocus();
    }

    //Create an ellipse which can be drawn to the screen
    public class Ellipse extends JComponent{

        private int x , y; //Coordinates of the oval

        public Ellipse(){
            setCoordinates(100, 100);
        }

        public void setCoordinates(int x, int y){
            this.x = x;
            this.y = y;
        }

        public void increaseY(){
            y+=10;
        }

        public void increaseX(){
            x+=10;
        }

        public void decreaseY(){
            y-=10;
        }

        public void decreaseX(){
            x-=10;
        }

        public void paint(Graphics g){
            //Ensures previous paint is cleared
            super.paintComponents(g);
            g.setColor(Color.RED);
            g.fillOval(x, y, 100, 100); 
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T22:30:13.100

您应该在游戏循环中绘制椭圆之前绘制背景颜色 :) 您也可以调用 repaint() ，它实际上调用 update() 来完成清除屏幕和调用paint() 的脏活。当您使用重绘时，更新方法继承

```
public void update(Graphics g) {
g.setColor(getBackground());
g.fillRect(0, 0, width, height);
g.setColor(getForeground());
paint(g)
} 
```

所以背景恢复到原来的颜色，椭圆的痕迹将被删除

# joomla - 仅显示基于注册登录的 Virtuemart 产品

> ID：10391373
> 
> 赞同：0
> 
> 时间：2012-04-30T22:25:45.533
> 
> 标签：joomla, joomla1.5, virtuemart

我们正在尝试建立一个简单的 BTB 站点来支持我们的零售商（他们可以在其中下载产品文本/图像和企业品牌）。我们正在使用 Joomla 1.5.2 和 Virtuemart 1.1.9

我们希望它是完全安全的（未注册的观众 - 和竞争 - 只需查看简单的介绍页面，然后登录并选择注册）。根本没有任何内容。

而且我们还想使用VM注册来注册新用户。

我使用 Joomla 菜单项设置了类别/产品的安全访问权限，该菜单项指向了 measuremart 类别，并将菜单项访问权限设置为“已注册”。工作完美，用户没有登录，除了启动页面什么都看不到。登录后，所有产品类别都可以通过菜单项获得。

但是我们刚刚意识到这会弄乱用户注册。我们想使用 Virtuemarts 用户注册，因此我们不必收集所有数据（地址信息等）并返回并手动输入。

显然，在将 mercurialmart 菜单项设置为“注册”访问的情况下，用户会被重定向到 joomla 的注册页面（它不会将我们需要的数据收集到 Virtuemart）。我在后端登录文件（com_user 和 mod_user）中可以找到的任何地方都粘贴了一个有效的 VM 注册 url，但没有运气（我认为这行不通，我是初学者）。

任何人都知道是否有解决方法？或者更好的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:34:39.867

我可以肯定地说，如果你想这样做，你需要在 VM 代码中做一个小的调整。障碍是 VM 在整个脚本中使用与默认菜单项 ID 相同的菜单项 ID，因此即使您为注册创建不同的菜单项，它也总是会回退到您拥有的第一个菜单项。

解决这个问题的唯一方法是在 VM 函数中做一个小改动，它总是会迫使这种情况发生。将以下代码放在位于 ps_session.php 中第 459 行附近的函数 getShopItemid()的*最开头。保留所有现有代码，但这需要在此**之前*运行。

```
 /*Hack For multiple VM menu itemids, if there is a page specified, find THAT Itemid */
    global $page;
    if($_REQUEST['Itemid']) {
        $_REQUEST['shopItemid'] = $_REQUEST['Itemid'];
    } elseif($page) {
        $db_hack = new ps_DB;
        $q = "SELECT id FROM #__menu WHERE link='index.php?option=com_virtuemart' AND published=1 AND params like '%page=".$page."%'";
        $db_hack->query( $q );
        if( $db_hack->next_record() ) {
            $_REQUEST['shopItemid'] = $db_hack->f("id");
        }
    } 
```

一旦完成，您将需要一个 Joomla 菜单项，其中至少包括以下内容：

```
option=com_virtuemart&page=shop.registration 
```

使用数据库中的菜单项，上面的代码将找到该页面的菜单项，并使用该菜单项而不是默认的 VM 方法。Joomla 安全将按您的预期触发，因为它具有正确的菜单项。

# ruby-on-rails - 如何使用 Omniauth 延迟请求 Facebook 时间线发布权限，直到需要它？

> ID：10391376
> 
> 赞同：1
> 
> 时间：2012-04-30T22:26:07.377
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, omniauth, koala

对于我的网站，我使用 Omniauth 进行 Facebook 身份验证，并使用 Koala 访问一些杂项。关于用户的数据。

该网站托管用户生成的内容，这些内容非常直观，我以前只是使用 Facebook 的点赞按钮让人们将他们的内容预览分享到 Facebook。但是我意识到，由于内容类型的性质，最好将预览作为照片发布在他们的相册上（这就是用户想要的）。

但是，我不想吓跑那些只想尝试该服务的人，建议他们在注册时获得许可请求，将照片发布到他们的时间线。理想情况下，我希望从没有扩展权限的默认权限开始，但让用户在他们第一次想要共享时选择加入。

我怎样才能做到这一点？我已经阅读了 Omniauth 和 Koala 的文档，但找不到描述这种特殊情况的文档。

# python - 从外部主机文件设置结构主机列表

> ID：10391377
> 
> 赞同：4
> 
> 时间：2012-04-30T22:26:15.063
> 
> 标签：python, fabric

我需要通过打开和读取文件以获取主机来设置其主机列表。以这种方式设置它可以让我拥有大量主机列表，而无需每次都为这些数据编辑我的 fabfile。

我试过这个：

```
def set_hosts():
    env.hosts = [line.split(',') for line in open("host_file")]

def uname():
    run("uname -a") 
```

和

```
def set_hosts():
    env.hosts = open('hosts_file', 'r').readlines

def uname():
    run("uname -a") 
```

每次尝试使用函数 set_hosts 时都会出现以下错误：

```
fab set_hosts uname
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/fabric/main.py", line 712, in main
    *args, **kwargs
  File "/usr/local/lib/python2.7/dist-packages/fabric/tasks.py", line 264, in execute
    my_env['all_hosts'] = task.get_hosts(hosts, roles, exclude_hosts, state.env)
  File "/usr/local/lib/python2.7/dist-packages/fabric/tasks.py", line 74, in get_hosts
    return merge(*env_vars)
  File "/usr/local/lib/python2.7/dist-packages/fabric/task_utils.py", line 57, in merge
    cleaned_hosts = [x.strip() for x in list(hosts) + list(role_hosts)]
AttributeError: 'builtin_function_or_method' object has no attribute 'strip' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T22:38:26.787

您在这里遇到的问题是您将 env.hosts 设置为函数对象，而不是列表或可迭代对象。您需要 readlines 之后的括号，才能实际调用它：

```
def set_hosts():
    env.hosts = open('hosts_file', 'r').readlines() 
```

# facebook - Joomla 1.7-2.5 中的类似 Facebook 的功能

> ID：10391378
> 
> 赞同：0
> 
> 时间：2012-04-30T22:26:24.273
> 
> 标签：facebook, joomla, joomla-extensions, joomla2.5

我正在寻找一个将 facebook-model 排名带到 Joomla 的扩展。准确地说，我希望允许用户在我目前正在开发的网站上内部“喜欢”或“+1”一篇文章，而不是在 fb 或 g+ 上。是否有任何知名的分机或黑客类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:12:44.470

您是否尝试过内置的内容投票系统，您可以通过以下几种方式启用它：

1.  文章管理器 -> 选项 -> 文章 -> 显示投票（全局启用）

2.  每个菜单项 -> 文章选项 -> 显示投票（对于该菜单项下的文章）

3.  每篇文章 -> 文章选项 -> 显示投票（针对该特定文章）

如果这不能满足您的需求，请查看[Joomla！扩展目录 (JED)](http://extensions.joomla.org) - 我将从“[评级和评论](http://extensions.joomla.org/extensions/clients-a-communities/ratings-a-reviews)”部分开始。有一系列选项可以与社交网站或社交扩展（如[JomSocial](http://extensions.joomla.org/extensions/communities-a-groupware/communities/7608)、Community Builder 等）以及独立系统集成。

值得注意的是，像[JomSocial 这样的大型扩展在 JED 上有自己的扩展](http://extensions.joomla.org/extensions/extension-specific/jomsocial-extensions)，可以包括额外的内容“喜欢”和“评级”系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:59:06.130

这可能是您正在寻找的：

[合资公司脸书](http://extensions.joomla.org/extensions/social-web/social-display/facebook-display/14625)

# php - OOP - 没有 GET / SET

> ID：10391380
> 
> 赞同：5
> 
> 时间：2012-04-30T22:27:01.117
> 
> 标签：php, oop

遵循[“告诉，不问”原则](http://pragprog.com/articles/tell-dont-ask)，在 OOP 中不应使用 getter。

但是如何解决（至少我是这么认为的）一个人实际上需要来自一个对象的一些“内部信息”的问题呢？那么如何更改下面的示例，使 create_bill() 函数不需要询问每件商品的价格？

```
class chopping_cart {

    private $itemlist = array();

    function item_add( $name, $price ) {
        $his->itemlist[]=new item( $name, $price );
    }
    private create_bill() {

        foreach $this->itemlist AS $element;
        $sum += $element->get_price();

    }
}

class item {
    private $name;
    private $price;
    function __construcor($name,$price) {...}
    function get_price() {
        return $price;
    }
} 
```

用法：

```
$sc = new shopping_cart()
$sc->item_add( "Bike", 1.00 );
$sc->item_add( "Ship", 2.00 );
$sc->create_bill(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T22:31:06.377

如果您没有使用请求的数据/状态来更改您所指的对象，我认为使用 getter 根本没有任何问题。

原理讲述了这样一个场景：

```
if ($item->get_price() < 5) {
    $item->set_price(5);
} 
```

那应该变成类似的东西`$item->set_minimum_price(5)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T22:49:58.217

您所指的“[告诉，不要问](http://pragprog.com/articles/tell-dont-ask)”文章中有两个项目需要仔细检查：

1.  > [...] 不要向 [对象] 询问他们的状态，做出决定，然后告诉他们该怎么做。

    对于您的特定示例，`chopping_cart`仅查询对象并做出决定。至关重要的是，它并没有继续告诉他们该做什么。
2.  > 根据契约式设计，只要您的方法（查询和命令）可以自由混合，并且这样做不会违反类不变量，那么您就可以了。但是，在您保持类不变的同时，您可能还极大地增加了调用者和被调用者之间的耦合，具体取决于您暴露了多少状态。

    Getter 调用通常可以自由混合，因此不会因需要维护类不变量而导致耦合。

因此，吸气剂不会引起“告诉，不要问”原则应该防止的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T22:51:54.977

在这种情况下，您可以使用[访问者设计模式。](http://en.wikipedia.org/wiki/Visitor_pattern)在您的`Product`类中实现该方法`addToBill`并作为参数传递一个实现您的账单接口的实例，`IBill`. `IBill`支持`addToTotal`将接受项目中所有可用信息的方法；在你的情况下，这是一个价格。例如：

```
interface IBill {
    /* needs to be public because PHP doesn't understand the concept of 
       friendship
     */
    function addToTotal($price);
}

class Bill implements IBill {
    private $total = 0;

    function addToTotal($price) {
        $this->total += $price;
    }
    ...
}

class ShoppingCart {
    private $items = array();

    function addItem($id, $product, $quantity) {
        if (isset($this->items[$id])) {
            $this->items[$id]->addQuantity($quantity);
        } else {
            $this->items[$id] = new LineItem($product, $quantity);
        }
    }

    private createBill() {
        $bill = new Bill;
        foreach ($this->items AS $lineItem) {
            $lineItem->addToBill($bill);
        }
        return ...;
    }
}

class LineItem {
    private $product, $quantity;
    function __constructor($product, $quantity) {...}
    function addToBill(IBill $bill) {
        $this->product->addToBill($bill, $quantity);
    }
    function addQuantity($quantity) {
        $this->quantity += $quantity;
    }
    ...
}

class Product {
    private $name, $description, $price;
    function __constructor(...) {...}
    function addToBill(IBill $bill, $quantity) {
        $bill->addToTotal($this->price * $quantity);
    }
    ...
} 
```

然而，你总是会在摇摇欲坠的地方结束。上面需要一个类似 的方法`addToTotal`，它引入了一个不变量（总数必须与行项目价格和数量的产品总和相匹配），这正是“告诉，不要问”应该避免的事情。您可以尝试不使用`addToTotal`: * 取消`Bill`; `ShoppingCart`跟踪总数。将价格传递`addItem`给产品和数量；`addItem`更新总数。这在某种程度上违背了开设课程的目的，因为您没有使用`LineItem`或`Product`使用太多。这还增加了一个不变量，即传递的价格和创建产品时给出的价格应该匹配，但如果它们不匹配，它不应该引起问题（这会很奇怪）。*`addItem`实例化`Product`和`LineItem`; `addItem`更新总数。添加先前添加的附加项目时，必须有一个附加不变量，即传入的值`$price`必须与先前调用中传递的数量相匹配，或者`addItem`根本不允许添加附加的现有项目。* 将所有物品一起丢弃。`ShoppingCart`存储产品 ID 和数量。每次调用都会`addItem`更新总数。`createBill`使用已经计算的总数。甚至比其他更多，这将[不同的关注点](http://en.wikipedia.org/wiki/Separation_of_concerns)结合在一起。

还有其他潜在的设计，但每个人都会遇到某种问题，通常与关注点分离、引入不变量和增加复杂性有关。总之，直接在计算总价的方法中访问一个行项目的总价不仅是最简单的，而且是最简洁的，并且产生错误的可能性最小。

# javascript - Ext.form.field.Text 上的 extjs 键盘映射

> ID：10391388
> 
> 赞同：0
> 
> 时间：2012-04-30T22:28:21.647
> 
> 标签：javascript, extjs

当用户在文本字段中按下回车键时，我正在尝试捕捉。我尝试过使用 listeners 配置参数，并且尝试过 KeyMap 类。我也不能上班。这是我的键盘映射代码：

```
var bcTextField = Ext.create('Ext.form.Text', {
    xtype: 'textfield',
    emptyText: 'Enter Barcode/Accession Number',
    width: 200,
    margin: '0'
});
var map = new Ext.util.KeyMap({
    target: bcTextField,
    binding: [{
        key: 13,
        fn: function() {
            console.log(arguments);
        }
    }]
}); 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:02:01.333

通常`KeyMap`绑定到 HTML 元素而不是 ExtJs 对象。所以我建议首先替换`target: bcTextField`为`target: bcTextField.getEl()`

# sql - 从访问 ORACLE 中插入选择

> ID：10391389
> 
> 赞同：1
> 
> 时间：2012-04-30T22:28:23.990
> 
> 标签：sql, oracle, ms-access

我在 Access 中有一个名为 TEST_DATE1 的表，其列 TEST_DATE 是一个字符串数据类型，记录看起来像 20080130。yyyymmdd

我在 Oracle 中有一个名为 TEST 的表，其列 TEST_DATE 是 DATE 数据类型，我希望记录看起来像 2008/01/30 yyyy/mm/dd。

我有两个表链接，当我通常更新 Access 和 Oracle 之间的表时，我通常会做一个

```
INSERT INTO TEST
SELECT *
FROM TEST_DATE1; 
```

如何使用 INSERT INTO SELECT 将字符串转换为 DATE

我努力了

```
INSERT INTO TEST
(SELECT TO_DATE(TEST_DATE, 'yyyy/mm/dd'))
FROM TEST_DATE1; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:56:51.110

要将记录移动到 Oracle，将字符串转换为日期：

```
INSERT INTO test (test_date)
SELECT TO_DATE(test_date, 'YYYYMMDD')
FROM test_date1 
```

一旦它在 Oracle 中存储为日期，您可以以您喜欢的任何格式检索它：

```
SELECT TO_CHAR(test_date, 'YYYY/MM/DD') as test_date
FROM test; 
```

# python - Matplotlib 窗口出现在后面？

> ID：10391391
> 
> 赞同：16
> 
> 时间：2012-04-30T22:28:26.840
> 
> 标签：python, macos, plot, matplotlib

每当我调用`show()`matplotlib 时，绘图窗口都会出现在所有其他窗口的后面，我必须最小化所有内容才能看到它。有什么办法可以防止这种情况或以编程方式将其带到前面。在 OSX 狮子上。蟒蛇 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:10:01.190

Matplotlib 开发人员似乎意识到了这个问题。但是查看[https://github.com/matplotlib/matplotlib/issues/596](https://github.com/matplotlib/matplotlib/issues/596)看起来需要一段时间才能找到解决方案，显然是因为有些人觉得 figure.show() “窃取”屏幕空间很烦人.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T02:54:48.927

不完全是您问题的答案，但我使用的是[ipython](http://ipython.org/)而不是默认的 python 控制台。当启动它时，`ipython --pylab`我可以通过键入来绘制

```
>> plot([1,3,2]) 
```

并让情节在前面弹出。它还有一些其他非常好的功能；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-03T16:56:07.477

出色地。这个答案出现在对已接受答案的评论中，但我认为它应该有一个单独的位置，因为它很好地解决了这个问题。除了作者的问题，我还有一个问题是 matplotlib 窗口不在活动窗口的托盘中，所以我无法通过`<Alt>+<Tab>`.

更改 matplotlib 的默认后端`macosx`解决了所有问题。您可以立即在您的代码中尝试，如下所示：

```
import matplotlib
matplotlib.use("Qt5agg") 
```

`Qt5agg`可能不会出现在您的系统中，那么请选择一个。你可以找到它们：

```
import matplotlib.rcsetup as rcsetup
print(rcsetup.all_backends) 
```

如果它有帮助，那么您可能想要更改配置中的后端。为此首先找到它：

```
import matplotlib
matplotlib.matplotlib_fname() 
```

然后更改`backend:`值：

```
backend      : macosx 
```

到您的后端。我最后使用了：

```
backend      : TkAgg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T01:14:02.743

我的设置与 nickponline 相同。对我有用的是：

```
from pylab import get_current_fig_manager()
get_current_fig_manager().window.raise_() 
```

如果您有多个数字，这只会提高当前活动的数字。对于这种情况，我发现以下工作：

```
fig1=figure(1)
cfm1=get_current_fig_manager().window

fig2=figure(2)
cfm2=get_current_fig_manager().window
...
cfm1.activateWindow()
cfm1._raise()
pause(.1)  # or something else that uses up some time
cfm2.activateWindow()
cfm2.raise_() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T01:38:58.057

它可能是特定于操作系统的，但使用交互式绘图（一旦你指示就会绘图）会导致数字在 Ubuntu 上生成后立即出现在*前台*：

```
import pylab as P
P.ion()
P.figure(1)
P.plot([1,2,3],[1,4,9]) 
```

# php - 检查 $_POST 数据

> ID：10391394
> 
> 赞同：3
> 
> 时间：2012-04-30T22:28:32.550
> 
> 标签：php

我正在对表单进行一些垃圾邮件检查。下面的代码在我的本地主机上正常工作（如果为真，则重定向到 google.com），但是，它在生产服务器上时不起作用（执行脚本的其余部分并且不重定向到 Google.com）。

```
 if('POST' == $_SERVER['REQUEST_METHOD']) {
    if ($_POST["bait"]!='' || $_POST["date"] == "12/31/69" || trim($_POST["date"] == "1969-12-31")) {
        header("location: http://www.google.com");
    } else {
       //Process form here 
```

我做了一个`var_dump`，`$_POST`它是`1969-12-31`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T22:31:19.807

您应该`exit;`在发送位置标头后，以防止脚本的其余部分执行。

例如

```
if('POST' == $_SERVER['REQUEST_METHOD']) {
    if ($_POST["bait"]!='' || $_POST["date"] == "12/31/69" || trim($_POST["date"] == "1969-12-31")) {
        header("location: http://www.google.com");
        exit;
    } else {
        // process form here
    }
} 
```

重定向已发送，但您还继续输出请求的其余部分，在这种情况下，行为可能未定义。

# asp.net-mvc-3 - 急切加载不包括我的存储库类中的导航属性

> ID：10391396
> 
> 赞同：0
> 
> 时间：2012-04-30T22:28:53.390
> 
> 标签：asp.net-mvc-3, entity-framework

我的存储库类中有以下方法，用于检索`Session`对象和关联的对象`Medicine object`（通过使用 定义 Eager 加载`.Include`），如下所示：-

```
public Session GetSession(int id)
        {
            return entities.Sessions.Include(d => d.Medicine).FirstOrDefault(d => d.SessionID == id);

        } 
```

我调用上述存储库方法的操作方法如下所示：-

```
[HttpPost]
        public ActionResult Delete(int id)
        {

            try
            {
                //string desc;
                var s = repository.GetSession(id);

                repository.DeleteSession(s);

                repository.Save();
                return Json(new { IsSuccess = "True", id = s.SessionID, description = s.Medicine.Name }, JsonRequestBehavior.AllowGet);
            }
            catch (ArgumentNullException)
//code goes here 
```

我面临的问题是，在使用物理删除对象后 `repository.Save();`，我将无法`Medicine navigation property`从内存中访问，并且将引发以下异常*NullReferenceException 未被用户代码*处理`description = s.Medicine.Name`，而我可以访问`s.SessionID`可用的即使在删除对象之后在内存中，这是否意味着`Session`被删除的对象没有`Include`（没有急切加载）`Medicine`导航属性！！！？BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:42:34.417

如果删除与另一个实体有关系的实体，Entity Framework 将同时删除这些对象之间的关系。您可以通过在删除实体*之前*为 Json 结果创建对象来解决问题：

```
var s = repository.GetSession(id);

var result = new { IsSuccess = "True", id = s.SessionID,
                   description = s.Medicine.Name };

repository.DeleteSession(s);
repository.Save();

return Json(result, JsonRequestBehavior.AllowGet); 
```

如果数据库中没有从会话到 Medicine 的引用，这当然无济于事，因为`Include`不会返回相关对象。您必须单独处理这种情况（只有在不需要关系时才有可能）。

# sql - 对 SQL 数据库中的表执行保留策略的最佳位置？

> ID：10391397
> 
> 赞同：1
> 
> 时间：2012-04-30T22:29:01.863
> 
> 标签：sql, sql-server, database

我有一张记录客户联系人信息的表格。该表仅定义为“最近”联系人，我想删除超过 3 周的联系人的所有记录。

例如，该表是：

```
create table recent_contact {
   recent_contact_id int identity (1,1) primary key,
   contact_text nvarchar(4000),
   created datetime
}

create index createdIndex
on recent_contact (created) 
```

对该表的所有插入都将通过只执行 INSERT 语句的存储过程发生。

我的问题是关于清理的。我想删除所有超过 3 周的项目。到目前为止，我已经想到了两种完成清理的方法。

1.  定期（例如每 5 小时）运行一个后台数据库作业，该作业将扫描上表并删除超过 3 周的任何内容。

2.  在`insert()`存储过程调用中，添加清除旧数据的逻辑。这只会增加恒定的时间开销，因为表是在 [created] 上建立索引的，并且每个项目只插入一次并且只删除一次。所以平均来说这个存储过程会做 1 次插入和 1 次删除。

```
// insert
insert into recent_contacts (contact_text, created)
values (@text, @createDate)

declare @threeWeeksAgo datetime
set @threeWeeksAgo = DATEADD(DAY, -21, GETDATE())

// remove old items
delete from recent_contacts 
where created < @threeWeeksAgo 
```

在这两个选项中，我选择了选项 2)，因为我觉得这是一个更优雅的解决方案，并且不需要单独的清理工作。我的同事告诉我，这是一种不好的做法，保留政策应该始终在一个单独的工作中定期运行。即他认为选项 1) 是更好的选择。

我想知道其他人是怎么想的？一般来说，执行数据保留策略的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:40:58.893

做1）。选项 2) 是一个错误的想法。没有理由回避周期性工作，但是有很多理由可以避免以查找陈旧条目的成本来惩罚每个插入，甚至更惩罚 INSERT 随机达到响应时间的峰值，因为这是不走运的彩票中奖者清理一些参赛作品。另一方面，安排好的工作可以安排在方便的时间。最后但并非最不重要的一点是，考虑到您的“聪明”设计需要插入才能进行维护。

随着时间的推移，您将了解到，由于[索引临界点](http://www.sqlskills.com/BLOGS/KIMBERLY/category/The-Tipping-Point.aspx)问题，数据保留期的清理实际上是一个非常棘手的问题，许多开发人员机构都为此铺平了道路。您还将发现时间序列就像按时间列的聚集索引，尤其是因为过时的数据清理问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T22:41:33.750

我会选择 1) 因为：

*   最好有一个专门的过程来清理旧数据。使用 2)，您将两个进程交织在一个例程中，并且如果（当）一个进程发生更改时，您只需修改该部分代码，而不会弄乱另一部分。
*   类似的，如果它以某种方式破裂会发生什么？通过两个过程，如果出现问题，您可能会加倍必要的故障排除工作。
*   如果出于某种原因（停电、节假日、淡季）没有人插入新行，会发生什么？您的数据超出了保留窗口，但仍保留在系统中。

根据代码库的大小和总数据量（我猜这非常小），这些比其他任何东西都更狡猾（除非数量随着时间的推移显着增长......）即便如此，现在使用“更安全”的策略构建良好的习惯和实践，因此如果有一天您必须使用大容量系统，您更有可能在第一次通过时生成适当健壮的代码。

# solr - Solr 查询中的 NOW/DAY 是如何工作的？

> ID：10391405
> 
> 赞同：4
> 
> 时间：2012-04-30T22:29:17.060
> 
> 标签：solr

我试图弄清楚为什么 Solr 认为文档是过去的。我的查询设置为使用

`published:[* TO NOW/DAY]`

我希望它能找到的文档的发布日期为

```
2012-04-30T04:00:00Z 
```

当前的 Solr 服务器时间是 2012 年 4 月 30 日星期一 18:26:47 EDT。我的理解是该文档现在应该已经找到了，这让我认为现在/DAY 不像我认为的那样工作。有谁知道 NOW/DAY 如何评估日期以及为什么当我添加该规定时 Solr 找不到我的文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T08:49:47.747

`NOW/DAY`表示取实际日期时间并将其四舍五入（省略时间）。当然，如果实际日期是`2012-04-30`，任何时间，结果都是`2012-04-30T00:00:00Z`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:19:25.740

尝试现在使用。我怀疑 NOW/DAY 等于 2012-04-30T00:00:00Z。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-04T14:10:05.907

`NOW/DAY`昨晚四舍五入到午夜。如果您想要当天的午夜更改为`NOW+1DAY/DAY`.

> **日期数学语法**
> 
> 日期数学表达式包括以指定单位添加一定数量的时间，或将当前时间四舍五入指定单位。表达式可以链接并从左到右进行评估。
> 
> 例如：这表示两个月后的时间点：
> 
> 现在+2个月
> 
> 这是一天前的事：
> 
> NOW-1DAY
> 
> 斜线用于表示舍入。这表示当前小时的开始：
> 
> 现在/小时
> 
> 以下示例计算（以毫秒精度）未来六个月零三天的时间点，然后将该时间四舍五入到当天的开始：
> 
> 现在+6个月+3天/天
> 
> 请注意，虽然日期数学相对于 NOW 最常用，但它也可以应用于任何固定的时间点：
> 
> 1972-05-20T17:33:18.772Z+6MONTHS+3DAYS/DAY

引用自[Apache Solr 参考指南 - 使用日期](https://cwiki.apache.org/confluence/display/solr/Working+with+Dates)

# java - Java：避免在嵌套类中检查空值（深度空值检查）

> ID：10391406
> 
> 赞同：51
> 
> 时间：2012-04-30T22:29:17.543
> 
> 标签：java, class, null, ternary

想象一下我有一个班级家庭。它包含一个人员列表。每个（类）Person 包含一个（类）地址。每个（类）地址包含一个（类）邮政编码。任何“中间”类都可以为空。

那么，有没有一种简单的方法可以访问 PostalCode 而无需在每个步骤中检查 null ？即，有没有办法避免以下菊花链代码？我知道没有“本机”Java 解决方案，但希望是否有人知道库或其他东西。（检查了 Commons & Guava 并没有看到任何东西）

```
if(family != null) {
    if(family.getPeople() != null) {
        if(family.people.get(0) != null) {
            if(people.get(0).getAddress() != null) {
                if(people.get(0).getAddress().getPostalCode() != null) {
                    //FINALLY MADE IT TO DO SOMETHING!!!
                }
            }
        }
    }
} 
```

不，不能改变结构。它来自我无法控制的服务。

不，我不能使用 Groovy，它是方便的“Elvis”运算符。

不，我不想等待 Java 8 :D

我不敢相信我是第一个厌倦了编写这样的代码的开发人员，但我一直无法找到解决方案。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2019-01-22T05:55:31.847

您可以用于：

```
product.getLatestVersion().getProductData().getTradeItem().getInformationProviderOfTradeItem().getGln(); 
```

可选等价物：

```
Optional.ofNullable(product).map(
            Product::getLatestVersion
        ).map(
            ProductVersion::getProductData
        ).map(
            ProductData::getTradeItem
        ).map(
            TradeItemType::getInformationProviderOfTradeItem
        ).map(
            PartyInRoleType::getGln
        ).orElse(null); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-30T22:35:53.920

您的代码的行为与

```
if(family != null &&
  family.getPeople() != null &&
  family.people.get(0) != null && 
  family.people.get(0).getAddress() != null &&
  family.people.get(0).getAddress().getPostalCode() != null) { 
       //My Code
} 
```

由于**[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)**，这也是安全的，因为如果第一个条件为假，则不会评估第二个条件，如果第二个条件为假，则不会评估第三个条件，....并且您不会得到 NPE，因为如果它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-30T22:34:48.547

您可以获得的最接近的是利用条件中的快捷规则：

```
if(family != null && family.getPeople() != null && family.people.get(0) != null  && family.people.get(0).getAddress() != null && family.people.get(0).getAddress().getPostalCode() != null) {
                    //FINALLY MADE IT TO DO SOMETHING!!!

} 
```

顺便说一句，捕捉异常而不是提前测试条件是一个可怕的想法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-12T04:19:57.640

If, in case, you are using java8 then you may use;

```
resolve(() -> people.get(0).getAddress().getPostalCode());
    .ifPresent(System.out::println);

:
public static <T> Optional<T> resolve(Supplier<T> resolver) {
    try {
        T result = resolver.get();
        return Optional.ofNullable(result);
    }
    catch (NullPointerException e) {
        return Optional.empty();
    }
} 
```

REF: [avoid null checks](http://winterbe.com/posts/2015/03/15/avoid-null-checks-in-java/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T01:38:28.807

您可以使用“空对象”设计模式的某个版本，而不是使用 null。例如：

```
public class Family {
    private final PersonList people;
    public Family(PersonList people) {
        this.people = people;
    }

    public PersonList getPeople() {
        if (people == null) {
            return PersonList.NULL;
        }
        return people;
    }

    public boolean isNull() {
        return false;
    }

    public static Family NULL = new Family(PersonList.NULL) {
        @Override
        public boolean isNull() {
            return true;
        }
    };
}

import java.util.ArrayList;

public class PersonList extends ArrayList<Person> {
    @Override
    public Person get(int index) {
        Person person = null;
        try {
            person = super.get(index);
        } catch (ArrayIndexOutOfBoundsException e) {
            return Person.NULL;
        }
        if (person == null) {
            return Person.NULL;
        } else {
            return person;
        }
    }
    //... more List methods go here ...

    public boolean isNull() {
        return false;
    }

    public static PersonList NULL = new PersonList() {
        @Override
        public boolean isNull() {
            return true;
        }
    };
}

public class Person {
    private Address address;

    public Person(Address address) {
        this.address = address;
    }

    public Address getAddress() {
        if (address == null) {
            return Address.NULL;
        }
        return address;
    }
    public boolean isNull() {
        return false;
    }

    public static Person NULL = new Person(Address.NULL) {
        @Override
        public boolean isNull() {
            return true;
        }
    };
}

etc etc etc 
```

那么你的 if 语句可以变成：

```
if (!family.getPeople().get(0).getAddress().getPostalCode.isNull()) {...} 
```

这是次优的，因为：

*   你被困在为每个班级制作 NULL 对象，
*   很难使这些对象具有通用性，因此您只能为要使用的每个 List、Map 等创建一个空对象版本，并且
*   子类化和使用哪个 NULL 可能存在一些有趣的问题。

但如果你真的讨厌你`== null`的s，这是一条出路。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-30T07:07:45.337

`NullPointerException`虽然这篇文章已经快 5 年了，但对于如何处理s 的古老问题，我可能有另一种解决方案。

简而言之：

```
end: {
   List<People> people = family.getPeople();            if(people == null || people.isEmpty()) break end;
   People person = people.get(0);                       if(person == null) break end;
   Address address = person.getAddress();               if(address == null) break end;
   PostalCode postalCode = address.getPostalCode();     if(postalCode == null) break end;

   System.out.println("Do stuff");
} 
```

由于仍有大量遗留代码仍在使用中，因此使用 Java 8`Optional`并不总是一种选择。

每当涉及深度嵌套的类（JAXB、SOAP、JSON 等等）并且没有应用[Demeter 法则](https://en.wikipedia.org/wiki/Law_of_Demeter)时，您基本上必须检查所有内容，看看是否有可能的 NPE 潜伏在周围。

我提出的解决方案力求提高可读性，如果不涉及至少 3 个或更多嵌套类，则不应使用（当我说嵌套时，我并不是指正式上下文中的[嵌套类](https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)）。由于代码的阅读量多于编写量，因此快速浏览一下代码的左侧部分将比使用深度嵌套的 if-else 语句更清楚地说明其含义。

如果你需要 else 部分，你可以使用这个模式：

```
boolean prematureEnd = true;

end: {
   List<People> people = family.getPeople();            if(people == null || people.isEmpty()) break end;
   People person = people.get(0);                       if(person == null) break end;
   Address address = person.getAddress();               if(address == null) break end;
   PostalCode postalCode = address.getPostalCode();     if(postalCode == null) break end;

   System.out.println("Do stuff");
   prematureEnd = false;
}

if(prematureEnd) {
    System.out.println("The else part");
} 
```

某些 IDE 会破坏这种格式，除非您指示它们不要这样做（请参阅[此问题](https://stackoverflow.com/questions/352599/how-can-i-make-eclipses-autoformatter-ignore-a-section-of-code)）。

你的条件必须被反转——你告诉代码什么时候应该中断，而不是什么时候应该继续。

还有一件事 - 您的代码仍然容易损坏。您必须将`if(family.getPeople() != null && !family.getPeople().isEmpty())`其用作代码中的第一行，否则空列表将引发 NPE。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T22:33:48.103

不是一个很酷的主意，但是如何捕捉异常：

```
 try 
    {
        PostalCode pc = people.get(0).getAddress().getPostalCode();
    }
    catch(NullPointerException ex)
    {
        System.out.println("Gotcha");
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-26T22:14:26.410

我只是在寻找同样的东西（我的上下文：一堆自动创建的 JAXB 类，不知何故我有这些长的菊花链`.getFoo().getBar()...`。总是偶尔中间的一个调用返回 null，导致 NPE。

我前一阵子开始摆弄的东西是基于反思的。我相信我们可以使这个更漂亮和更高效（一方面缓存反射，还定义“神奇”方法，例如`._all`自动迭代集合的所有元素，如果中间的某个方法返回一个集合）。不漂亮，但也许有人可以告诉我们是否已经有更好的东西了：

```
/**
 * Using {@link java.lang.reflect.Method}, apply the given methods (in daisy-chain fashion)
 * to the array of Objects x.
 * 
 * <p>For example, imagine that you'd like to express:
 * 
 * <pre><code>
 * Fubar[] out = new Fubar[x.length];
 * for (int i=0; {@code i<x.length}; i++) {
 *   out[i] = x[i].getFoo().getBar().getFubar();
 * }
 * </code></pre>
 * 
 * Unfortunately, the correct code that checks for nulls at every level of the
 * daisy-chain becomes a bit convoluted.
 * 
 * <p>So instead, this method does it all (checks included) in one call:
 * <pre><code>
 * Fubar[] out = apply(new Fubar[0], x, "getFoo", "getBar", "getFubar");
 * </code></pre>
 * 
 * <p>The cost, of course, is that it uses Reflection, which is slower than
 * direct calls to the methods.
 * @param type the type of the expected result
 * @param x the array of Objects
 * @param methods the methods to apply
 * @return
 */
@SuppressWarnings("unchecked")
public static <T> T[] apply(T[] type, Object[] x, String...methods) {
    int n = x.length;
    try {
        for (String methodName : methods) {
            Object[] out = new Object[n];
            for (int i=0; i<n; i++) {
                Object o = x[i];
                if (o != null) {
                    Method method = o.getClass().getMethod(methodName);
                    Object sub = method.invoke(o);
                    out[i] = sub;
                }
            }
            x = out;
        }
    T[] result = (T[])Array.newInstance(type.getClass().getComponentType(), n);
    for (int i=0; i<n; i++) {
            result[i] = (T)x[i];
    }
            return result;
    } catch (NoSuchMethodException | IllegalAccessException | IllegalArgumentException | InvocationTargetException e) {
            throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-30T22:37:18.803

如果很少见，您可以忽略`null`检查并依赖`NullPointerException`. 由于可能的性能问题而“稀有”（取决于，通常会填充堆栈跟踪，这可能很昂贵）。

除此之外 1) 一个特定的辅助方法检查 null 以清理该代码或 2) 使用反射和字符串进行通用方法，如：

```
checkNonNull(family, "people[0].address.postalcode") 
```

实施留作练习。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-17T15:15:56.807

如果您可以使用 groovy 进行映射，它将清理语法并且代码看起来更干净。由于 Groovy 与 java 共存，您可以利用 groovy 进行映射。

```
if(family != null) {
    if(family.getPeople() != null) {
        if(family.people.get(0) != null) {
            if(people.get(0).getAddress() != null) {
                if(people.get(0).getAddress().getPostalCode() != null) {
                    //FINALLY MADE IT TO DO SOMETHING!!!
                }
            }
        }
    }
} 
```

相反，您可以这样做

```
if(family?.people?[0]?.address?.postalCode) {
   //do something
} 
```

或者如果您需要将其映射到其他对象

```
somobject.zip = family?.people?[0]?.address?.postalCode 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-10T02:32:08.850

我个人更喜欢类似的东西：

```
nullSafeLogic(() -> family.people.get(0).getAddress().getPostalCode(), x -> doSomethingWithX(x))

public static <T, U> void nullSafeLogic(Supplier<T> supplier, Function<T,U> function) {
    try {
        function.apply(supplier.get());
    } catch (NullPointerException n) {
        return null;
    }
} 
```

或类似的东西

```
nullSafeGetter(() -> family.people.get(0).getAddress().getPostalCode())

public static <T> T nullSafeGetter(Supplier<T> supplier) {
    try {
        return supplier.get();
    } catch (NullPointerException n) {
        return null;
    }
} 
```

最好的部分是静态方法可以与任何功能重用:)

* * *

## 回答 #12

> 赞同：-5
> 
> 时间：2019-03-07T22:14:03.900

和我最喜欢的简单的 try/catch，以避免嵌套的空检查......

```
try {
    if(order.getFulfillmentGroups().get(0).getAddress().getPostalCode() != null) {
        // your code
    } 
} catch(NullPointerException|IndexOutOfBoundsException e) {} 
```

# php - PHP 查询不返回任何结果

> ID：10391408
> 
> 赞同：0
> 
> 时间：2012-04-30T22:29:33.023
> 
> 标签：php, mysql

我可能遗漏了一些明显的东西，但是当我尝试执行这个查询时，它没有返回任何结果。我将它直接插入 MySQL 并尝试用有效的行值替换变量，我得到了正确的输出。当我使用变量时，它没有给我任何结果。有人有什么想法吗？

```
 $query = "SELECT title FROM le7dm_pf_tasks WHERE project = (SELECT id FROM le7dm_pf_projects WHERE title = '".$ws_title."') ORDER BY title DESC LIMIT 1";

    $result_query = mysql_query($query) or die("Error: ".mysql_error());

    while ($row = mysql_fetch_assoc($result_query)) {
        $result_title = $row['title'];
    }

    $result_title = substr($result_title,0,6);
    echo $result_title; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T01:57:52.947

您的 SQL 可以进行一些返工（尽管不是您的问题的原因）。不需要嵌套选择（如果返回 > 1 行也会导致错误）。尝试加入。

```
$sql = "
    SELECT title FROM le7dm_pf_tasks t
        INNER JOIN le7dm_pf_projects p ON t.project = p.id
    WHERE p.title = '{$ws_title}'
    ORDER BY title DESC LIMIT 1
"; 
```

您还使用 while 语句迭代未知数量的行。然后你退出并尝试一个子字符串。你怎么知道在while中迭代的最后一行有一个值。

尝试在 while 循环本身内输出 $result_title 以确认数据。

```
echo $result_title; 
```

如果您真的只有一行，则不需要 while 循环。做就是了

```
$row = mysql_fetch_assoc($result_query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:34:34.743

strip_tags($ws_title); - 是什么做的！标题包含在链接到该特定项目页面的锚标记中。

不过感谢所有好的建议。将来在进行错误测试时，我将使用其中的一些。

# javascript - 当对 $.ajax 的响应是 301 时，我可以通过编程方式获取新 URL 吗？

> ID：10391410
> 
> 赞同：14
> 
> 时间：2012-04-30T22:29:58.280
> 
> 标签：javascript, jquery, xmlhttprequest, jqxhr

当对 xhr 请求的响应为 301 时，有没有办法获取最终重定向到的 URL？

我有一个站点，其中包含来自旧版本的大量旧版 URL，它们返回 301 响应到正确的新 URL。

出于实用目的，我希望能够向旧 URL 发出请求，并能够检索新 URL，即将请求发送到“/oldpage.aspx?foo=someParam”，取回新 URL“/arbitaryNewPageName /someParam”。

我一直在萤火虫控制台玩这个：

```
 $.ajax({
            url: "/oldpage.aspx?foo=someParam", 
            success: function(response, status, jqxhr){
            //poking around, trying to get the new URL, "/arbitraryNewPage/someParam"
                console.log(jqxhr.getAllResponseHeaders());
                console.log(jqxhr);
            },
            beforeSend: function(jqxhr, settings){
                console.log(jqxhr);
                console.log(settings);
            }
        }); 
```

我可以在 firebug 中看到，当这段代码运行时，它对“/oldpage.aspx?foo=someParam”执行一次 GET，并获得 301 响应，然后对“/arbitaryNewPageName/someParam”执行另一个 GET。

对于第一个请求，我在响应标头的 Location 值中看到了重定向的 URL。不幸的是，第二个请求是传递给 $.ajax.success 函数的，它在请求标头的 Referrer 值中只有重定向的 URL。

是否有办法拦截对第一个响应的响应，或者查看第二个请求的请求标头？

**编辑：**感谢大家的回复。我想我需要提供一些背景知识来澄清我到底在寻找什么。

一位业务用户要求我创建一个将旧 URL 与新 URL 相关联的列表。由于我已经实现了一种将旧 URL 重定向到服务器上的新 URL 的方法，我希望能够完成这项工作并创建一个脚本，将请求放置到旧 URL 并获取请求被重定向到的 URL。像这样的东西：

```
for (var i = 0; i < arrayOfLegacyUrls.length; i++)
{
    $.ajax({
            url: arrayOfLegacyUrls[i], 
            success: function(response, status, jqxhr){
                var newUrl = "???"; //do magic to get URL that request was redirected to

                writeToFileForBusinessUser(arrayOfLegacyUrls[i], newUrl);
            }
        });
} 
```

我的问题的症结在于：**我可以从 XHR 获取我的请求重定向到的 URL 吗？**到目前为止，答案似乎是否定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:01:01.573

我从这个答案中找到了一种通过使用实际的 XHR 对象而不是 jquery 的 ajax 方法来做到这一点的方法：[https ://stackoverflow.com/a/7015798/194099](https://stackoverflow.com/a/7015798/194099)

```
var r = new XMLHttpRequest();
r.open("GET", "http://mysite.com/legacyUrl.aspx?bla=bla");
r.overrideMimeType("text/xml");
r.onload = function()
{
  alert(r.responseXML.baseURI); //gets the URL the request was redirected to! huzzah!
}
r.send(null); 
```

有了这个，我可以向我知道将返回 301 的 URL 发出请求，并获取请求被重定向到的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T00:25:17.037

它的目的是透明地工作，至少这是这里建议的：

[Ajax 重定向处理](https://stackoverflow.com/questions/4168784/ajax-redirection-handling)和[防止 Xmlhttprequest 重定向](https://stackoverflow.com/questions/228225/prevent-redirection-of-xmlhttprequest)

您可以做的一件事是将 URL 作为上下文参数传递给 AJAX 调用，然后在成功时将响应 URL 与上下文对象的 URL 属性进行比较。

有关上下文的信息，请参见此处：http: [//api.jquery.com/jQuery.ajax/#jQuery-ajax-settings](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)

**更新：**

真正棘手的是新 URL，`this.url`如果您不覆盖 econtext，我认为您可以通过调用来获取它。

```
for (var i = 0; i < arrayOfLegacyUrls.length; i++)
{
    $.ajax({
        url: arrayOfLegacyUrls[i], 
        success: function(response, status, jqxhr){
            var newUrl = jqxhr.getResponseHeader("X-MYAPP-PATH");
            writeToFileForBusinessUser(arrayOfLegacyUrls[i], newUrl);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-03T00:05:25.830

查看 XMLHttpRequest.responseURL

# asp.net-mvc - 生成视图中的模型值错误

> ID：10391421
> 
> 赞同：5
> 
> 时间：2012-04-30T22:31:06.513
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在这里使用 MVC3 和 razor 遇到了一个非常奇怪的问题。

我正在整理的应用程序显示了一系列面试问题。我有一个问题的视图（问题的内容来自视图模型）。因此，在我从一个问题发回后，我可能会返回相同的问题视图（但使用不同的视图模型实例）。

在视图模型中，我有一个长属性，如下所示：

```
public long QuestionID { get; set; } 
```

我试图使用隐藏的输入字段将值存储在视图中：

```
@Html.HiddenFor(m => m.QuestionID) 
```

我的问题是，当我从一个问题到另一个问题时，隐藏字段在最终生成的 html 中没有改变。在所有其他问题中，它仍然是第一个 questionID 的值。所有其他内容都在正常变化，我还有其他几个可以正常工作的隐藏字段。我已经在生成模型的控制器中验证了正确的值。我可以在 razor 文件中设置断点，我可以看到模型应该是正确的 QuestionID。我也尝试使用@Html.TextBoxFor，但我遇到了同样的问题。当我手动制作如下所示的隐藏字段时，它工作正常，这才是真正困扰我的地方。

```
<input type="hidden" id="QuestionID" name="QuestionID" value="@Model.QuestionID" /> 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T23:21:02.290

在表单发布之后，MVC 会跟踪`ModelState`. 即使您更改模型的值，`HiddenFor`助手也会`ModelState`首先使用该值。这是因为绑定可能失败，或者绑定可能是一个复杂的对象，而其中的字符串值`ModelState`是他们实际输入的值。

您可以通过使用解决此问题

```
ModelState.Remove("QuestionID"); 
```

或者，如果你真的只是想把它当作一个全新的页面，

```
ModelState.Clear(); 
```

# opengl - 尝试使用 VBO 绘制圆柱体时未处理的异常/访问冲突读取位置

> ID：10391427
> 
> 赞同：2
> 
> 时间：2012-04-30T22:31:54.130
> 
> 标签：opengl, vbo

我正在尝试使用 VBO 绘制圆柱体，但我遇到了这种访问冲突。这是代码（为示例格式化）：

```
int N;
float *vertexArray, normalArray;

void fillArrays(float height, float radius, int num) {

N = num;
vertexArray = (float*) malloc(sizeof(float)*36*num);
normalArray = (float*) malloc(sizeof(float)*36*num);
... 
} 
```

上面的函数只是用法线向量和顶点填充数组。

```
void drawCylinder() {
GLuint buffers[2];
glGenBuffers(2, buffers);
glBindBuffer(GL_ARRAY_BUFFER, buffers[0]);
glBufferData(GL_ARRAY_BUFFER, 144*N, vertexArray, GL_STATIC_DRAW);

glBindBuffer(GL_ARRAY_BUFFER,buffers[1]);
glBufferData(GL_ARRAY_BUFFER, 144*N, normalArray, GL_STATIC_DRAW);

glVertexPointer(3,GL_FLOAT,0,vertexArray);
glNormalPointer(GL_FLOAT,0,normalArray);
glDrawArrays(GL_TRIANGLES, 0, 12*N);
} 
```

在 glDrawArrays 调用中抛出异常。我在 GLUT 的显示回调函数 (renderfunc) 中调用 drawCylinder()。主函数如下所示：

```
void main(int argc, char **argv) {

glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DEPTH|GLUT_DOUBLE|GLUT_RGBA);
glutInitWindowPosition(100,100);
glutInitWindowSize(320,320);
glutCreateWindow("Glew - VBOs - Cylinder");

glutDisplayFunc(renderfunc);
glutIdleFunc(renderfunc);

glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_NORMAL_ARRAY);

fillArrays(3,1,20);
glutMainLoop();
} 
```

我的代码可能存在各种问题，我刚刚开始使用 VBO（以及与此相关的 openGL 库）。但是抛出这个异常有明显的原因吗？我正在使用 Visual Studio，正如我所说，调用 glDrawArrays 时显然检测到访问冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:56:33.607

```
glVertexPointer(3,GL_FLOAT,0,vertexArray);
glNormalPointer(GL_FLOAT,0,normalArray); 
```

如果您使用 VBO，则`gl*Pointer()` `pointer`参数应该是缓冲区的偏移量，而不是本机指针。本机指针用于顶点数组。

此外，在每次绘制调用之前重新上传您的顶点数据在某种程度上违背了 VBO 的目的，尤其是在`GL_STATIC_DRAW`提示的情况下。

[这](http://www.songho.ca/opengl/gl_vbo.html)是一个不错的 VBO 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T16:53:12.403

关于 genpfault 的回答：

> 在 GLUT 的显示回调函数中调用 drawCylinder()

在`drawCylinder`您创建/绑定缓冲区的内部？

所以假设你创建了一个键盘交互旋转，每次你按下一个键来旋转对象时，都会绑定一个新的缓冲区。最终，内存将被用完，并可能导致一些堆栈溢出。

您可以创建一个`init()`函数抛出缓冲区初始化代码`init()`并在您之前调用`glutDisplayFunc()`

# java - 基本单选按钮问题 - java

> ID：10391434
> 
> 赞同：0
> 
> 时间：2012-04-30T22:33:13.677
> 
> 标签：java, swing, jbutton, jradiobutton

```
 package pkg411project;

 import javax.swing.ButtonGroup;

 public class CrudMain extends javax.swing.JInternalFrame {

public CrudMain() {
    initComponents();
}

@SuppressWarnings("unchecked")

private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                              
    // TODO add your handling code here:
}                                             

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
   BankRecordFrame bdFrame = new BankRecordFrame(); 
    bdFrame.setVisible(true);
    this.jDesktopPane2.add(bdFrame); 

}                                        

// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JDesktopPane jDesktopPane2;
private javax.swing.JLabel jLabel1;
private javax.swing.JRadioButton jRadioButton1;
private javax.swing.JRadioButton jRadioButton2;
private javax.swing.JRadioButton jRadioButton3;
private javax.swing.JRadioButton jRadioButton4;
private javax.swing.JRadioButton jRadioButton5;
// End of variables declaration                   

//ButtonGroup group = new ButtonGroup();
//group.

} 
```

我认为这是一个简单的问题。我有四个单选按钮和单选按钮下方的常规提交按钮。当用户单击提交按钮时，我试图启动一个 Jframe（此时选择了一个单选按钮） Jframe 根据所选单选按钮启动。您如何将其放入代码中？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:16:13.467

在按钮的动作监听器中，检查哪个单选按钮被选中：

```
private void jButton1ActionPerformed(ActionEvent evt) {                                         
    if (jRadioButton1.isSelected()) {
        // show frame 1
    }
    else if (jRadioButton2.isSelected()) {
        // show frame 2
    }
    else if (jRadioButton3.isSelected()) {
        // show frame 3
    }
    else if (jRadioButton4.isSelected()) {
        // show frame 4
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:25:32.133

您需要使用 ButtonGroup 来控制选择行为（因此一次只能选择一个单选按钮）。将 ActionListener 添加到 JButton，并在侦听器内部，从 ButtonGroup 中检索选定的按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T11:52:02.987

您可以通过多种方式执行此操作。我会尝试在这里发布其中一个。

这不一定是最好的选择，但它可能只适合你。（我没有测试这个）

```
public class CrudMain extends javax.swing.JInternalFrame {

public CrudMain() {
    initRadioButtons();
    initOtherStuff();
}

private JRadioButton[] radioButtons = new JRadioButton[4];
private JRadioButton btn1 = new JRadioButton();
private JRadioButton btn2 = new JRadioButton();
private JRadioButton btn3 = new JRadioButton();
private JRadioButton btn4 = new JRadioButton();
private JButton submitBtn = new JButton("Submit"); 

public void initRadioButtons() {
    radioButtons[0] = btn1;
    radioButtons[1] = btn2;
    radioButtons[2] = btn3;
    radioButtons[3] = btn4;
}

public void initOtherStuff() {
    //add stuff to your frame
    .......
    submitBtn.addActionListener(this)
}

public void actionPerformed(ActionEvent e) {
    for(int i =0; i < radioButtons.length; i++){
        if(radioButtons[i].isSelected()){
            //Open your frame here
            break; //Place break if you only want one radiobutton to be checked.
        } else {
            //This button was not selected
        }
    }
} 
```

那么让我们看一下这段代码。我将所有按钮放在一个数组中，以便您可以轻松地循环浏览内容以检查它们是否已被选中。我在按钮上放了一个 actionListener，当有人点击它时它会触发。当 actionListener 触发时，它将循环遍历数组。在每次迭代中，每个按钮的状态都会被检查。如果已选择一个，它将触发一个动作。

就是这样。如果您需要有关此代码的帮助，请告诉我！

祝你好运！

**编辑 ：**

刚刚注意到，使用这种方法，您不能为每个单选按钮指定一个操作。这是您必须添加的内容:) 祝你好运！

# objective-c - 选择器“defaultStore”没有已知的类方法

> ID：10391436
> 
> 赞同：2
> 
> 时间：2012-04-30T22:33:32.833
> 
> 标签：objective-c, ios

我正在阅读 Big Nerd Ranch iOS Programming 第 3 版，并且遇到了单例选择器“defaultStore”的问题。错误说没有这样的类方法，不知道怎么解决这个问题，已经注释掉了。

我相信这本书的某个部分会切换到 Core Data，但我还没有达到那个部分。

项目视图控制器.m

```
#import "ItemsViewController.h"
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation ItemsViewController
- (id)init 
{
  // Call the superclass's designated initializer
  self = [super initWithStyle:UITableViewStyleGrouped];
  if (self) {
    UINavigationItem *n = [self navigationItem];

    [n setTitle:@"Homepwner"];

    // Create a new bar button item that will send
    // addNewItem: to ItemsViewController
    UIBarButtonItem *bbi = [[UIBarButtonItem alloc] 
                            initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
                            target:self 
                            action:@selector(addNewItem:)];

    // Set this bar button item as the right item in the navigationItem
    [[self navigationItem] setRightBarButtonItem:bbi];

    [[self navigationItem] setLeftBarButtonItem:[self editButtonItem]];
  }
  return self;
}

- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  [[self tableView] reloadData];
}

- (IBAction)addNewItem:(id)sender
{
  // Create a new BNRItem and add it to the store
  BNRItem *newItem = [[BNRItemStore defaultStore] createItem];//No known class method for selector 'defaultStore'
  // Incompatible pointer types initializing 'BNRItem*__strong' with an expression of 'NSArray'

  // Figure out where that item is in the array 
  int lastRow = [[[BNRItemStore defaultStore] allItems] indexOfObject:newItem]; //No known class method for selector 'defaultStore'

  NSIndexPath *ip = [NSIndexPath indexPathForRow:lastRow inSection:0];

  // Insert this new row into the table.
  [[self tableView] insertRowsAtIndexPaths:[NSArray arrayWithObject:ip]
                          withRowAnimation:UITableViewRowAnimationTop];
}  
- (id)initWithStyle:(UITableViewStyle)style
{
  return [self init];
}

- (void)tableView:(UITableView *)tableView 
moveRowAtIndexPath:(NSIndexPath *)fromIndexPath 
      toIndexPath:(NSIndexPath *)toIndexPath 
{
  [[BNRItemStore defaultStore] moveItemAtIndex:[fromIndexPath row] //No known class method for selector 'defaultStore'
                                       toIndex:[toIndexPath row]];
}

- (void)tableView:(UITableView *)aTableView 
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  DetailViewController *detailViewController = [[DetailViewController alloc] init];

  NSArray *items = [[BNRItemStore defaultStore] allItems];//No known class method for selector 'defaultStore'
  BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];

  // Give detail view controller a pointer to the item object in row
  [detailViewController setItem:selectedItem];

  // Push it onto the top of the navigation controller's stack
  [[self navigationController] pushViewController:detailViewController
                                         animated:YES];
}

- (void)tableView:(UITableView *)tableView 
commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath 
{
  // If the table view is asking to commit a delete command...
  if (editingStyle == UITableViewCellEditingStyleDelete)
  {
    BNRItemStore *ps = [BNRItemStore defaultStore];//No known class method for selector 'defaultStore'
    NSArray *items = [ps allItems];
    BNRItem *p = [items objectAtIndex:[indexPath row]];
    [ps removeItem:p];

    // We also remove that row from the table view with an animation
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                     withRowAnimation:UITableViewRowAnimationFade];
  }
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
  return [[[BNRItemStore defaultStore] allItems] count];//No known class method for selector 'defaultStore'
}
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  // Create an instance of UITableViewCell, with default appearance
  // Check for a reusable cell first, use that if it exists
  UITableViewCell *cell =
  [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

  // If there is no reusable cell of this type, create a new one
  if (!cell) {
    cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleDefault
            reuseIdentifier:@"UITableViewCell"];
  }
  // Set the text on the cell with the description of the item
  // that is at the nth index of items, where n = row this cell
  // will appear in on the tableview
  BNRItem *p = [[[BNRItemStore defaultStore] allItems]//No known class method for selector 'defaultStore'
                objectAtIndex:[indexPath row]];
  [[cell textLabel] setText:[p description]];
  return cell;
}
@end 
```

BNRItemStore.h

```
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation BNRItemStore

+ (BNRItemStore *)defaultStore
{
    static BNRItemStore *defaultStore = nil;
    if(!defaultStore)
        defaultStore = [[super allocWithZone:nil] init];

    return defaultStore;
}

+ (id)allocWithZone:(NSZone *)zone
{
    return [self defaultStore];
}

- (id)init 
{
    self = [super init];
    if(self) {
        allItems = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void)removeItem:(BNRItem *)p
{
    [allItems removeObjectIdenticalTo:p];
}

- (NSArray *)allItems
{
    return allItems;
}

- (void)moveItemAtIndex:(int)from
                toIndex:(int)to
{
    if (from == to) {
        return;
    }
    // Get pointer to object being moved so we can re-insert it
    BNRItem *p = [allItems objectAtIndex:from];

    // Remove p from array
    [allItems removeObjectAtIndex:from];

    // Insert p in array at new location
    [allItems insertObject:p atIndex:to];
}

- (BNRItem *)createItem
{
    BNRItem *p = [BNRItem randomItem];

    [allItems addObject:p];

    return p;
} 
```

BNRItemStore.m

```
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation BNRItemStore

+ (BNRItemStore *)defaultStore
{
    static BNRItemStore *defaultStore = nil;
    if(!defaultStore)
        defaultStore = [[super allocWithZone:nil] init];

    return defaultStore;
}

+ (id)allocWithZone:(NSZone *)zone
{
    return [self defaultStore];
}

- (id)init 
{
    self = [super init];
    if(self) {
        allItems = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void)removeItem:(BNRItem *)p
{
    [allItems removeObjectIdenticalTo:p];
}

- (NSArray *)allItems
{
    return allItems;
}

- (void)moveItemAtIndex:(int)from
                toIndex:(int)to
{
    if (from == to) {
        return;
    }
    // Get pointer to object being moved so we can re-insert it
    BNRItem *p = [allItems objectAtIndex:from];

    // Remove p from array
    [allItems removeObjectAtIndex:from];

    // Insert p in array at new location
    [allItems insertObject:p atIndex:to];
}

- (BNRItem *)createItem
{
    BNRItem *p = [BNRItem randomItem];

    [allItems addObject:p];

    return p;
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T23:01:26.510

确保（在 BNRItemStore.h 中）的`@interface`块`BNRItemStore`声明了该方法：

```
@interface BNRItemStore : NSObject

+ (BNRItemStore *)defaultStore;

// etc.

@end 
```

编译器查看接口以了解该类上可用的方法。

# php - Login.php 重定向到 Members.php 不起作用

> ID：10391440
> 
> 赞同：0
> 
> 时间：2012-04-30T22:34:02.347
> 
> 标签：php, redirect

我有一个登录，注册页面。注册页面工作正常，但我的登录页面有问题。当我成功登录时，它应该将我重定向到一个名为 members.php 的页面，但它只是停留在同一个页面上，并且不去任何地方。这是我认为可能出现问题的 login.php 页面的代码：

```
<?php
mysql_connect("localhost", "user", "pass") or die(mysql_error());
mysql_select_db("db_name") or die(mysql_error());
if (isset($_COOKIE['ID_my_site'])) {
    $username = $_COOKIE['ID_my_site'];
    $pass     = $_COOKIE['Key_my_site'];
    $check = mysql_query("SELECT * FROM users WHERE username = '$username'") or die(mysql_error());
    while ($info = mysql_fetch_array($check)) {
        if ($pass != $info['password']) {
        } else {
            header("Location: members.php");
        }
    }
}
if (isset($_POST['submit'])) { // if form has been submitted
    if (!$_POST['username'] | !$_POST['pass']) {
        die('<h1 class="error"></h1><p>You missed something</p>');
    }
    if (!get_magic_quotes_gpc()) {
        $_POST['email'] = addslashes($_POST['email']);
    }
    $check = mysql_query("SELECT * FROM users WHERE username = '" . $_POST['username'] . "'") or die(mysql_error());
    $check2 = mysql_num_rows($check);
    if ($check2 == 0) {
        die('<h1 class="error"></h1><p>That user does not exist in our database</p>');
    }
    while ($info = mysql_fetch_array($check)) {
        $_POST['pass']    = stripslashes($_POST['pass']);
        $info['password'] = stripslashes($info['password']);
        $_POST['pass']    = md5($_POST['pass']);
        if ($_POST['pass'] != $info['password']) {
            die('<h1 class="error"></h1><p>Incorrect password, please try again</p>');
        } else {
            $_POST['username'] = stripslashes($_POST['username']);
            $hour              = time() + 3600;
            setcookie(ID_my_site, $_POST['username'], $hour);
            setcookie(Key_my_site, $_POST['pass'], $hour);
            header("Location: members.php");
        }
    }
} else {
?> 

<h1 class="login"></h1>

<form action="<?php  echo $_SERVER['PHP_SELF']; ?>" method="post"> 

<p>Username</p><input type="text" class="username" name="username">

<p>Password</p><input type="password" class="password" name="pass">

<div><button type="submit" name="submit" value="Login">Log in</button></div>

</form> 

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:52:23.163

问题可能出在这一行：

```
 if ($pass != $info['password']) {
        } 
```

如果密码不匹配，它会告诉脚本什么都不做。尝试在那里发一条消息，例如：

```
 if ($pass != $info['password'])
 {
    die('invalid login');
 } 
```

如果这不起作用，请将 echo 语句放在整个页面中，以便您可以跟踪执行过程中发生的情况。即`echo 'checking login <br />', echo 'login checked..<br />'`等。

另一方面，您绝对应该加密您的密码，不要以纯文本形式存储它，否则如果您的网站被黑客入侵（许多大牌都曾遇到过这种情况），他们将拥有每个人的纯文本密码。

此外，通过在`$username`查询中准确放置它，您可以让您的网站对[sql injection](http://en.wikipedia.org/wiki/SQL_injection)开放，如果您不想被黑客入侵，我建议您阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T15:15:49.583

首先尝试声明自己的变量，而不是重新初始化内置变量，例如 $_POST['pass'] = md5($_POST['pass']); 到 $pass = md5($_POST['pass']);

# unit-testing - Nunit 测试无法在 appharbor 环境中编译

> ID：10391441
> 
> 赞同：2
> 
> 时间：2012-04-30T22:34:15.433
> 
> 标签：unit-testing, build, nunit, appharbor

似乎我可能缺少在我的[AppHarbor](https://appharbor.com/)环境中设置一些环境变量。我的测试文件夹找不到对 nunit 框架的引用。我正在使用 NUnit 2.5.9。

部分构建输出粘贴在下面。任何想法我错过了什么？

```
Primary reference "nunit.framework".
C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9): warning MSB3245: Could not resolve this reference. Could not locate the assembly "nunit.framework". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [D:\temp\oyiirwgf.sjw\input\JeeneeTest\JeeneeTest.csproj]
          For SearchPath "{HintPathFromItem}".
          Considered "..\..\..\..\..\..\..\Program Files (x86)\NUnit 2.5.9\bin\net-2.0\framework\nunit.framework.dll", but it didn't exist.
          For SearchPath "{TargetFrameworkDirectory}".
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\nunit.framework.dll", but it didn't exist.
          Considered "C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\nunit.framework.exe", but it didn't exist.
          For SearchPath "{Registry:Software\Microsoft\.NETFramework,v4.0,AssemblyFoldersEx}". 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T01:19:23.073

我们 (AppHarbor) 建议您使用[NuGet Nunit 包](http://nuget.org/packages/nunit)。您可以将`/packages`文件夹连同您的代码一起提交，或者使用[NuGet 包还原](http://blog.appharbor.com/2012/2/06/use-nuget-package-restore-to-avoid-pushing-packages-to-appharbor)使 NuGet 包作为 AppHarbor 构建的一部分工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:48:11.560

可能您添加了对 NUnit 的引用，它安装在您的开发 PC 上（指向 NUnit 安装文件夹的路径：）`Program Files (x86)\NUnit 2.5.9\bin\net-2.0\framework\nunit.framework.dll`。有两个选项可以解决此问题：

*   在运行测试的 PC 上安装 NUnit
*   `nunit.framework.dll`在您的测试项目中使用对本地的引用

我更喜欢第二个。

# git - 提交到多个 SVN 存储库（也许使用 Git-SVN？）

> ID：10391444
> 
> 赞同：2
> 
> 时间：2012-04-30T22:34:38.273
> 
> 标签：git, svn, git-svn

我需要提交多个（3 个，其中一个是我自己的，我可以更改为 GIT）Subversion 存储库，这样做的最佳方法是什么？Git-SVN 是否适用于此？我已经看到已经有一个[类似的线程](https://stackoverflow.com/questions/2239217/svn-commit-to-multiple-repositories)，但是我找不到适合我需要的答案，就像已经提到的那样，如果这可以简化事情，我使用 Git-SVN 没有问题。我正在使用 Eclipse，如果所有事情都可以在其中完成而无需编写脚本等，那就太好了——但这不是强制性的，我需要的主要是一种提交多个 SVN 存储库的方法。感谢您的任何提示！

# selenium - Firefox 无法运行并打开空白

> ID：10391450
> 
> 赞同：0
> 
> 时间：2012-04-30T22:34:59.857
> 
> 标签：selenium

我正在使用几周前在 Firefox 中创建的脚本。当我加载它时，Firefox 会打开，但会出现空白并且无法运行。

```
selenium = new DefaultSelenium("localhost", 
            4444, 
            "*firefox C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe", 
            "http://www.test.com/");
selenium.Start(); 
```

Firefox 配置文件会妨碍您吗？它每次都会打开一个新的 Firefox 实例，但不会访问测试站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:48:35.680

`"http://www.test.com/"`通过为您的 selenium 实例编写 代码，您只需为您的测试提供*基本 url*。要导航到您的测试站点，您应该使用`selenium.open("/")`命令。要导航到`"http://www.test.com/test.html"`您应该使用`selenium.open("/test.html")`等等。

# json - Titanium - 无法解析本地 JSON 文件

> ID：10391451
> 
> 赞同：1
> 
> 时间：2012-04-30T22:35:05.510
> 
> 标签：json, parsing, titanium, local, titanium-mobile

我正在尝试解析已存储在 applicationDataDirectory 中的本地 JSON 文件。我只需要从这个文件中获取项目。Running V.2 钛合金

JSON 数据结构如下所示

```
{
"object_name": [
    {
        "title": "Burrton",
        "value": "Burrton",
        "homeof": "Chargers",
        "logo": "images/logos/BURRTON.jpg",
        "colors": "#cccccc;#a9a9a9",
        "links": {
            "tsr": "http://www.schurzdigital.com/mfeeds/CollectionFeed.php?site=http%3A%2F%2Fwww.catchitkansas.com&collection=cik_burrton_headlines&title=cik_burrton_headlines&limit=25",
            "sports": "www.schurzdigital.com/mfeeds/CollectionFeed.php?site=http%3A%2F%2Fwww.catchitkansas.com&collection=cik_burden_headlines&title=cik_burden_headlines&limit=25",
            "videos": "http://www.schurzdigital.com/mfeeds/TividFeedConvert.php?site=http%3A%2F%2Fwww.catchitkansas.com&slug=e9c0b075-3230-4a45-803e-7ccb4b7f754e&title=Top%20videos&limit=25",
            "photos": "http://serve.a-feed.com/service/getFeed.kickAction?feedId=1014509&as=8768",
            "stats": {
                "boys": {
                    "football": "http://stats.catchitkansas.com/report_fb-schedule_results.php?sport=15&team=763",
                    "basketball": "http://stats.catchitkansas.com/report_baskb-schedule_results.php?sport=26&team=2946",
                    "cross country": "http://stats.catchitkansas.com/report_cc-schedule_results.php?sport=13&team=764",
                    "golf": "http://stats.catchitkansas.com/report_golf-schedule_results.php?sport=16&team=767",
                    "track": "http://stats.catchitkansas.com/report_trackfield-schedule_results.php?sport=32&team=2948"
                },
                "girls": {
                    "volleyball": "http://stats.catchitkansas.com/report_vb-schedule_results.php?sport=22&team=766",
                    "basketball": "http://stats.catchitkansas.com/report_baskb-schedule_results.php?sport=27&team=2947",
                    "cross country": "http://stats.catchitkansas.com/report_cc-schedule_results.php?sport=13&team=764",
                    "golf": "http://stats.catchitkansas.com/report_golf-schedule_results.php?sport=17&team=768",
                    "track": "http://stats.catchitkansas.com/report_trackfield-schedule_results.php?sport=32&team=2948"
                }
            }
        }
    }
]
} 
```

我用来解析文件的代码。

```
var fileName = 'school_select.json';
var file = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, fileName);

if (file.exists()) {
  var json = file.read();
  var jsonObject = JSON.parse(json);

    one.text = jsonObject.object_name[0].title; 
    two.text = jsonObject.object_name[0].homeof;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:52:55.660

我回答了我自己的问题。我使用了以下代码。

```
var fileName = 'school_select.json'; 
var file = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, fileName);    
var json, object_name, locatie, i, row, title, value, homeof, logo, colors, link; 
var preParseData = (file.read().text); 
var response = JSON.parse(preParseData); 
    Ti.API.info('title = ' + response.object_name[0].title); 
```

# php - 匹配、评估和替换 BBCode 样式标签

> ID：10391454
> 
> 赞同：2
> 
> 时间：2012-04-30T22:35:17.137
> 
> 标签：php, regex, replace, eval, bbcode

所以在我的PHP代码中我有一个这样的字符串；

```
The quick brown {{fox($a);}} jumped over the lazy {{dog($b);}}. 
```

现在听起来可能很奇怪，但我想遍历字符串，并收集所有 BBCode 样式标签。

然后我想要's`eval()`里面的所有函数。`{{}}`所以我会评估`fox($a);`和`dog($b);`.

这两个函数都返回一个字符串。我想用各自的结果替换各自的标签。所以假设`fox()`返回“vulpes vulpes”并`dog()`返回“canis lupus”，我的原始字符串将如下所示；

```
The quick brown vulpes vulpes jumped over the lazy canis lupus. 
```

但是，众所周知，我对正则表达式很糟糕，我不知道该怎么做。

任何的建议都受欢迎！

（是的，我知道happy-go-lucky `eval()`ing的危险。但是，这些字符串完全来自开发人员，没有用户能够评估任何东西。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:45:30.700

如果您想使用正则表达式执行此操作，这里有一个似乎对我有用的解决方案：

```
function fox( $a) { return $a . 'fox!'; }
function dog( $b) { return $b . 'dog!'; }

$a = 'A'; $b = 'B';
$string = 'The quick brown {{fox($a);}} jumped over the lazy {{dog($b);}}.';
$regex  = '/{{([^}]+)+}}/e';
$result = preg_replace( $regex, '$1', $string); 
```

正则表达式非常简单：

```
{{       // Match the opening two curly braces
([^}]+)+ // Match any character that is not a closing brace more than one time in a capturing group
}}       // Match the closing two curly braces 
```

当然，`/e`修饰符会导致替换为`eval`'d，从而产生：

**输出：**

```
var_dump( $result);
// string(49) "The quick brown Afox! jumped over the lazy Bdog!." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:39:44.230

如果您只是在这些标签中插入有效的 php - 您可以执行

```
$string = '.....';

$string = '?>' . $string;
$string = str_replace('{{', '<?php echo ', $string);
$string = str_replace('}}', '?>', $string);

ob_start();
eval($string);
$string = ob_get_clean(); 
```

# encoding - 相同的哈希，不同的行为

> ID：10391455
> 
> 赞同：-1
> 
> 时间：2012-04-30T22:35:39.880
> 
> 标签：encoding, file-io, hexdump

我有两个文件提供相同的哈希，甚至是相同的 hexdump。文件 A 和文件 B 分别在 Linux Box 1 和 Linux Box 2 上启动。然后我将这两个文件复制到 Windows 共享，并从 Windows 机器上读取它们。这些文件似乎仍然与 Windows 实用程序 Fc 逐字节相同（使用 /b 选项 -- 二进制模式）。但是，当我打开两个不同的文件时，它们似乎具有不同的编码（换行符/换行符）。为什么哈希/hexdump/Fc 没有发现这一点？

我在这里俯瞰什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:43:29.767

不要为此使用写字板。实际上，根本不要使用写字板。请注意，Microsoft 通常不遵守标准，并且在很多时候（例如浏览器）只是简单地对文件或流内容进行有根据的猜测，使用标头作为某种魔法。有时它会猜错，有时它不会。

你也可以在 Windows 机器上计算哈希，有很多轻量级的实用程序可以在 Windows 资源管理器中计算安全哈希。您还可以在 Windows 上安装命令行实用程序，例如 OpenSSL（或者更进一步，安装 Cygwin，我一直在我的 Windows 机器上运行它）。

Windows 从来没有关于行尾的真正策略，除了保持它自己的双字符标准。在更高版本的 Windows 中，您可以使用记事本（最终）如果必须的话，它会理解 Unix 换行符（因为这一次它可能会搞砸 UTF-16）。

# sql-server - 从 Windows 64 位连接到 SQL Server 命名实例

> ID：10391468
> 
> 赞同：3
> 
> 时间：2012-04-30T22:37:36.627
> 
> 标签：sql-server, networking, firewall, named-instance

我在使用 Microsoft Windows Server 2003 企业版的应用服务器上运行 java 和 .net 应用程序。这些正在迁移到另一台应用服务器 Windows 2008 64 位机器。

所有应用程序都连接到命名实例上的同一个 SQL Server 2005 数据库。

到目前为止，我已经尝试将应用程序完全按原样移动，而不会更改配置文件，从旧盒子到新盒子。

在新的应用服务器上，java 和 .net 应用程序都没有连接到数据库（命名实例）。

> JDBC 错误消息：“与命名实例的连接失败。错误：java.net.SocketTimeoutException：接收超时。”
> 
> .net 错误消息：“建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到或无法访问服务器。”

如果我将数据库配置更改为*不在*命名实例上的配置，它将在新的应用服务器上运行。

数据库设置正确，因为我们能够连接旧的应用服务器。我可以从新的应用服务器 ping 数据库服务器。

有什么理由这在新的应用服务器上不起作用？

> java 连接字符串：“jdbc:microsoft:sqlserver://[dbservername];SelectMethod=Cursor;instanceName=[dbinstance]”
> 
> .net 连接字符串：“Server=[dbservername]\[dbinstance];Database=Risk_DB;Uid=[user];Pwd=[pwd];”

**更新** 根据答案中的建议，我得到了实例端口号。我还安装了 SQL Server Management Studio，这样我就可以消除我的应用程序作为问题点。在 Management Studio 中，如果我使用 [servername][instancename]，我会收到消息“在建立与 SQL Server 的连接时出现与网络相关或特定于实例的错误...”但是当我使用 [servername] 时它可以工作，[港口]。不确定是否有办法解决这个问题？

**更新 #2**将问题上报给基础设施/服务器/网络团队。他们在新的应用服务器上禁用了 Windows 防火墙。Presto，现在我可以连接到 Management Studio 中的 [dbservername]\[dbinstance]，并且所有应用程序都在使用现有配置文件工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T00:01:29.093

您的命名实例将在不同的端口上运行。端口 1433（默认实例的默认端口）可能已打开，而运行命名实例的端口可能已被阻止。您可以检查命名实例的错误日志中的端口（假设您可以在本地连接，在对象资源管理器中，展开服务器，展开管理，展开 SQL Server 日志，右键单击当前，然后选择“查看 SQL Server 日志”IIRC )，它会在启动时说这样的话：

```
Server is listening on [ 127.0.0.1 <ipv4> 3587 ]. 
```

最后一个数字是需要从远程计算机访问的端口号，以及它必须通过的任何网络设备和服务才能到达那里。如果您没有找到这样的行，则可能没有为命名实例启用 TCP/IP。在该服务器上，转到 SQL Server 配置管理器，展开 SQL Server 网络配置，单击“协议”并确保在右侧窗格中启用了 TCP/IP。如果必须启用此功能，则需要重新启动 SQL Server 才能使其生效。

如果它已经启用（或者一旦启用并重新启动服务），您应该能够刷新此视图并验证正在使用的端口，如果您右键单击 TCP/IP，点击属性，然后移动到 IP地址选项卡。您可以看到当前用于每个 IP 的端口。这里将有多个 IPn 部分和一个 IPAll 部分。对于每个 IP，您可以将“TCP 端口”框更改为您要使用的端口（并将所有“动态 TCP 端口”框中的任何值删除为 0）。点击应用并重新启动服务。这将再次需要重新启动服务，但允许您指定特定端口，以便您可以向防火墙添加排除项（或使用已经存在的排除项，假设此服务器尚未使用该端口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:49:52.600

可能的问题：

*   防火墙可能会阻止连接。
*   实例名称与连接字符串中指定的名称不同。
*   连接字符串指定不同的端口或 SQL Server 在不同的端口上运行，而不是默认的 1433

# python - 如何在 python 中向某些用户发送数据包？

> ID：10391469
> 
> 赞同：0
> 
> 时间：2012-04-30T22:37:49.753
> 
> 标签：python, sockets

我一直在用 python 编写一个套接字服务器。我想向某些用户发送数据（对所有人都没有），但我不知道该怎么做。我可以用 for 循环发送它吗？

例如：

```
some_clients = [client1, client2, client5, client9]

for client in some_clients:
    client.send("data") 
```

这很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:00:09.220

如果这行得通，那就完全没问题了。

如果你想要更具可读性的东西，你可以这样做：

```
for client in filter(shouldrecieve, all_clients):
    client.send(data) 
```

或类似的东西：

```
for client in (client for client in all_clients if client.attrspam == barfoo):
    client.send(data) 
```

# svk - 使用 SVK 时设置存储库的用户名？

> ID：10391472
> 
> 赞同：0
> 
> 时间：2012-04-30T22:38:09.677
> 
> 标签：svk

我想使用将 Subversion 存储库镜像到本地文件夹

```
svk mirror 
```

但是如何指定用于登录存储库的用户名？我已经尝试过[http://user@domain.tld/trunk](http://user@domain.tld/trunk)但这不起作用。镜像参数的 SVK 帮助也没有给出任何提示。任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T07:51:42.827

几天前我遇到了同样的问题，今天我终于找到了答案（解决方法）。您需要使用例如连接到 Internet 存储库`TortoiseSVN`，它会要求您提供正确的凭据并将它们与 SSL 证书一起存储。之后，您可以尝试使用 SVK 设置镜像 - 它将使用以前存储的凭据和 SSL 证书信息。对我来说它工作得很好！

**PS**要删除存储的 SSL 证书，您可以参考*[user]\AppData\Roaming\Subversion\auth\svn.ssl.server*文件夹（Windows 7）

# javascript - 停止网格列被修剪（Ext JS）

> ID：10391473
> 
> 赞同：1
> 
> 时间：2012-04-30T22:38:15.993
> 
> 标签：javascript, extjs

我有一个包含 3 列的网格：标题、内容和创建日期。我最大的专栏内容最多的是`content`专栏。但是，此列可以容纳比网格的一行更多的文本。Ext JS 从某一点开始自动修剪文本。

我可以阻止它自动修剪行中的值并只显示整个内容吗？我会发布我的代码，但它是一个完整的 MVC 模式，它分布在多个文件中，并且需要大量时间来收集它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T01:32:01.043

您需要使用 Preview 或 RowExpander 插件

*   [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.ux.RowExpander](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.ux.RowExpander)
*   [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.ux.PreviewPlugin](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.ux.PreviewPlugin)

这是您可能想要查看的示例页面：http: [//dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/paging.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/grid/paging.html)

基本上想法是拥有自定义模板，它将呈现整个数据，而不是具有相同高度的行。

# java - 读取特定的 .txt 文件？

> ID：10391476
> 
> 赞同：-1
> 
> 时间：2012-04-30T22:38:32.907
> 
> 标签：java, eclipse, hashtable, text-files

我有一个特殊的 .txt 文件要从 Java 中读取，这是其中的一部分：

```
absolute                            mutlak(IBM)(MS)
absolute address                    mutlak adres(IBM)
absolute device                     mutlak aygıt(IBM)
absolute positioned object          mutlak konumlu nesne(MS)
absolute positioned paragraph       mutlak konumlu paragraf(MS)
absolute positioning                mutlak konumlama(IBM)
absolute priority                   mutlak öncelik(IBM)
Absolute reference                  Mutlak referans(MS)
abstract                            soyut(IBM)(MS) 
```

第一列是**原始**的，第二列是**描述**。现在我必须分别阅读**原文**和**描述**并存储在哈希表中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:45:16.783

逐行读取文件。对于每一行，找到`" "`子字符串的索引（两个空格）。提取索引之前的所有内容和之后的所有内容。修剪两个部分。

如果分隔符实际上是一系列制表符，则使用相同的算法`"\t"`代替`" "`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:47:41.827

您可能有此文件的*布局*描述，包括行中的长度和位置。

```
start  end    description
0       10    original
11      50    description 
```

逐行读取，然后在每一行中，按**起始**位置和**结束**位置读取子字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T22:47:52.180

使用正则表达式/模式作为`String.split()`. 类似的东西`\\s{2,}`会在空格字符（空格、制表符等）的任何后续序列（超过 1 个）处拆分字符串。

# objective-c - NSString 返回不起作用

> ID：10391478
> 
> 赞同：-1
> 
> 时间：2012-04-30T22:39:10.053
> 
> 标签：objective-c, xcode

我的代码不起作用，我不知道为什么

**以下作品：**

```
NSString *  words (void) {

    return [NSString stringWithFormat:@"You sent %d words\n", 1];

} 
```

**但这不起作用：**

```
NSString *  words (void) {

    return  [[[NSString alloc] stringWithFormat:@"You have %d words\n", 1] autorelease];

} 
```

有什么问题，当我发布它时，它就不起作用了。请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T22:40:54.730

更改`stringWithFormat:`为`initWithFormat:`。

`stringWithFormat:`是一个*类方法*，所以当`NSString`类本身是接收者时调用它。`initWithString:`是一个*实例方法*，所以当你有一个`NSString` *实例*作为接收者时调用它，就像从`[NSString alloc]`.

# c# - 字符串中某个字符出现的次数

> ID：10391481
> 
> 赞同：102
> 
> 时间：2012-04-30T22:39:26.240
> 
> 标签：c#, regex, linq

我正在尝试获取某个字符的出现次数，例如`&`在以下字符串中。

```
string test = "key1=value1&key2=value2&key3=value3"; 
```

如何确定上述测试字符串变量中有 2 个 & 符号 (&)？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-04-30T22:41:49.283

你可以这样做：

```
int count = test.Split('&').Length - 1; 
```

或者使用 LINQ：

```
test.Count(x => x == '&'); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-30T22:41:39.377

因为`LINQ`什么都能做……：

```
string test = "key1=value1&key2=value2&key3=value3";
var count = test.Where(x => x == '&').Count(); 
```

或者，如果您愿意，可以使用`Count`带有谓词的重载：

```
var count = test.Count(x => x == '&'); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-30T22:48:20.917

最直接、最有效的方法是简单地遍历字符串中的字符：

```
int cnt = 0;
foreach (char c in test) {
  if (c == '&') cnt++;
} 
```

您可以使用 Linq 扩展来制作更简单且几乎同样高效的版本。有更多的开销，但它仍然惊人地接近性能循环：

```
int cnt = test.Count(c => c == '&'); 
```

然后是旧`Replace`技巧，但它更适合循环笨拙（SQL）或慢（VBScript）的语言：

```
int cnt = test.Length - test.Replace("&", "").Length; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-30T22:41:13.930

为什么要使用正则表达式。`String`实现`IEnumerable<char>`，所以你可以只使用 LINQ。

```
test.Count(c => c == '&') 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-04-30T22:51:36.357

您的字符串示例看起来像 GET 的查询字符串部分。如果是这样，请注意 HttpContext 对您有一些帮助

```
int numberOfArgs = HttpContext.Current.QueryString.Count; 
```

有关您可以使用 QueryString 执行的更多操作，请参阅[NameValueCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-30T23:02:34.703

这是在所有答案中获得计数的最低效的方法。但是你会得到一个包含键值对的字典作为奖励。

```
string test = "key1=value1&key2=value2&key3=value3";

var keyValues = Regex.Matches(test, @"([\w\d]+)=([\w\d]+)[&$]*")
                     .Cast<Match>()
                     .ToDictionary(m => m.Groups[1].Value, m => m.Groups[2].Value);

var count = keyValues.Count - 1; 
```

# php - 在全局 php 变量中使用下划线

> ID：10391482
> 
> 赞同：3
> 
> 时间：2012-04-30T22:39:28.303
> 
> 标签：php, naming-conventions

我打算在我的脚本中将一些公共变量公开为全局变量，并且想知道以下命名方案是否会被视为坏主意：

1.  在开头和结尾使用单个下划线，例如：`$_some_var_`
2.  在开头使用三个下划线，例如：`$___some_var`

我知道 php 在超全局变量的开头使用单下划线，对魔术方法使用双下划线，所以不应该有任何冲突。还有什么可能引起麻烦的吗？这样做是否因为任何其他原因被认为是不好的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:44:46.883

它不会引起任何问题。为了便于打字，您可能只想使用单个下划线。

在我的应用程序中，如果我必须引入可以在函数内部和外部的许多脚本中使用的全局变量，我会使用`$GLOBALS` [超全局变量](http://www.php.net/manual/en/reserved.variables.globals.php)，因此很明显被访问的变量是全局变量。

这也节省了`global $somevar;`在函数中的使用。但是根据您使用它们的频率，它的打字量要多得多。

这些值可能是[常量](http://php.net/constants)还是它们实际上是可变的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:44:06.957

如果你真的认为你需要全局状态，那么创建一个静态类怎么样？

```
class myVars {

  static property $var1;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T22:45:07.227

如果要将它们视为常量，请使用：define("CONSTANT_NAME", value)

如果它们是真正的全局变量，那么一个约定是：$mVariableName

# android - 线程化android的疑惑

> ID：10391485
> 
> 赞同：2
> 
> 时间：2012-04-30T22:39:53.183
> 
> 标签：android, multithreading, service, android-asynctask, loader

我正在研究从 Java 到 Android 的人机对话开源系统 JVoiceXML 的可移植性。该系统基于 VoiceXML 2.0 标准，该标准使用 XML 文档来创建人机之间的交互。

这个想法是为 Android 提供一种方法来创建应用程序，这些应用程序使用 TTS 和 SpeechRecognizer android 引擎通过语音与用户交互。

我们试图在屏幕上没有任何视觉效果的情况下这样做，就像系统服务可以工作一样。现在我已经尝试将我们的系统实现为服务，但是我遇到了线程和 Android 杀死我的服务的问题。

问题是，您认为哪种方法最适合我的项目，AsyncTask、服务、Loader？也许是启动 AsyncTask 或 Loader 的服务？

要求是：

1.  我的 VoiceXML 解释器被应用程序 Intent 启动（意图过滤器是我现在拥有的方式）
2.  它从应用程序接收文档。该应用程序还可以停止我的解释器，或者至少停止对该文档的解释。
3.  口译员与 TTS 交互并创建语音识别器引擎。
4.  Interpreter 本身是一个 java 线程，必须从 service、loader 或 asyncTask 启动。
5.  只有一个应用程序可以使用我的解释器（无需并行连接）

如果需要更多信息来理解问题，请告诉我。

提前致谢，

马科斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:51:00.423

如果您的大部分工作已经在另一个线程中完成，我认为不需要 AsyncTask。只需使用您的服务中的口译员即可。无论如何，如果您想提供没有用户界面的东西，您都需要一个服务。

# php - php在mysqli_fetch_array上显示空白和错误

> ID：10391490
> 
> 赞同：1
> 
> 时间：2012-04-30T22:40:52.527
> 
> 标签：php

根据错误，当我尝试连接到 mysql 时，我收到一个空白页。php 不喜欢第三行

```
$link = "SELECT * FROM `Table` WHERE `id`='$id'";
$results = mysqli_query($db,$link);
$qdata = mysqli_fetch_array($results); 
```

这段代码在我的旧服务器上运行，所以`mysqli_fetch_array`看起来是绝对的？还是我错过了我的 php 配置中的其他内容？

谢谢！

这是错误信息 `Fatal error: Call to undefined function mysqli_connect() in /opt/php_script/connect.php on line 14`

第 14 行是

```
$link = "SELECT * FROM `Table` WHERE `id`='$id'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:32:23.010

您的`mysqli`扩展未启用。检查您的`php.ini`，转到扩展部分并启用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T23:32:29.997

这意味着您正在使用的 PHP 版本不`mysqli`支持。您将不得不重新编译支持 mysqli 的 PHP（在 Linux 上）或在 Windows 上将`php_mysqli.dll`扩展名添加到您的`php.ini`文件中。

有关更多信息，请参阅PHP.net 上的[安装 - mysqli 。](http://www.php.net/manual/en/mysqli.installation.php)

# php - MongoDB 查找所有评论

> ID：10391500
> 
> 赞同：0
> 
> 时间：2012-04-30T22:41:58.843
> 
> 标签：php, mongodb, mongodb-php, mongodb-query

如果我有几个使用以下结构的文档：

```
{ 
  "_id" : ObjectId("4f9c6fe033cddec1bea430f2"), 
  "title" : "Product #1",
  "comments" : 
  [
  {
    "comment" : "My comment",  
    "date" : "2012-03-01 00: 00: 00",   
    "name" : "Test Name",   
    "username" : "Test Username"
  },
  {
    "comment" : "My comment",  
    "date" : "2012-03-01 00: 00: 00",   
    "name" : "Test Name 2",   
    "username" : "Test Username 2"
  }
  ]
} 
```

我是否可以找到所有具有 reviews.name 的文档并更新它？例如，假设我想查找所有带有 user.name 的文档：测试名称 2 并将其更改为 Cassie。那可能吗？如果不是，将评论放在不同的集合中会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:47:34.593

对的，这是可能的。您必须使用`comments.username`来找到它，然后`comments.$.username`请注意，由于您要发布到数组，因此您必须使用[$ 位置运算符告诉 mongo 进入那里](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

# encoding - SDL Tridion - 发布的文件不是 UTF-8 编码的

> ID：10391501
> 
> 赞同：8
> 
> 时间：2012-04-30T22:42:04.667
> 
> 标签：encoding, tridion

我已将 SDL Tridion 中的发布目标设置为将文件 (aspx) 推送为 UTF-8。

页面已发布，但在浏览器中呈现时我仍然看到一些奇怪的编码问题。

我可以使用记事本编辑服务器上的文件并将它们保存为 UTF-8，从而解决了这个问题。所以我有点不知道为什么会发生这种情况，令人讨厌的是我以前见过这个但不记得它是如何解决的。

我在发布目标中尝试了一些其他选项，例如“系统默认值”，但我仍然看到同样的问题。

谢谢

约翰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T22:58:20.173

您是否尝试[过这 7 个步骤来解决](http://elenaserghie.blogspot.com/2012/01/7-clues-to-solve-character-encoding.html)Elena 的编码问题？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T01:16:30.660

**在 IIS / .NET 中，将发布目标设置为 UTF-8并**在 web.config 中进行设置后，我从未遇到过问题：

```
<globalization fileEncoding="UTF-8" requestEncoding="UTF-8" 
responseEncoding="UTF-8"/> 
```

如果您使用的是基于 Windows 服务的部署程序，您可能希望将 JVM 编码设置为 UTF-8，如此[处](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_4AFE6D6DFC50425D98F98B83C82E13A4)所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T10:42:42.243

如果这是您从其他人那里继承的系统，请检查以确保代码页未在模板中明确设置。这将覆盖发布目标上的默认设置。

# html - 如何从 JSP 中的提交按钮中获取值？

> ID：10391503
> 
> 赞同：0
> 
> 时间：2012-04-30T22:42:12.080
> 
> 标签：html, jsp

不知道更好的标题，但这是我想要做的。

我有以下表格，其中将显示书籍列表，并且在每个书籍条目之后都有一个删除按钮。该列表可以是任意长度。为了获取我设置的书籍 ID，`name="remove[${cartItem.bookId}]"`但如何在 servlet 中获取此值？`request.getParameter("remove")`并且`request.getParameterValues("remove")`每次都返回 null。

```
 <form method="post" action="removeBookFromCart">
<c:forEach var="cartItem" items="${sessionScope.cart.cartItems}">
        <tr>
          <td><c:out value="${cartItem.title}" /></td>
          <td><input type="submit" name="remove[${cartItem.bookId}]" value="Remove"/></td>
        </tr>  
    </c:forEach>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:55:41.067

有几种解决方案：

1.  使用`<button name="bookToRemove" value="${cartItem.bookId}" type="submit">Remove</button>`. 然而，这并不像 IE6 和 IE7 中所指定的那样工作（至少）。
2.  遍历参数，找到以 开头的参数，`remove[`然后提取ID。您可以使用更简单的名称，例如`remove_${cartItem.bookId}`
3.  每个购物车项目创建一个表单，而不是全局表单，并使用隐藏字段来包含要删除的书。

第三种方法可能是最简单的一种。

您也可以使用一些 JavaScript 在单击按钮时初始化隐藏字段的值，但这并不比上述方法容易，并且需要 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:48:58.787

您必须使用隐藏参数：

```
<input type="hidden" name="remove" value="${cartItem.bookId}"/> 
```

让提交按钮是这样的：

```
<input type="submit" value="Remove"/> 
```

编辑：是的，您必须为每本书创建一个表单元素：

```
<c:forEach var="cartItem" items="${sessionScope.cart.cartItems}">        
        <tr>
          <td><c:out value="${cartItem.title}" /></td>
          <td>
            <form method="post" action="removeBookFromCart">
             <input type="submit" value="Remove"/>
             <input type="hidden" name="remove" value="${cartItem.bookId}"/>
            </form>
          </td>
        </tr>      
   </c:forEach> 
```

# java - 基于用户输入密钥的加密

> ID：10391505
> 
> 赞同：3
> 
> 时间：2012-04-30T22:42:58.767
> 
> 标签：java, encryption, password-protection, password-encryption

**上下文：**多租户应用程序

**功能：**加密敏感数据

**故事：** 作为租户的管理员，我想使用我自己的密码或密码短语加密敏感数据，以便我，并且只有我，可以完全控制所使用的密钥。

**验收标准：**

1.  每个租户的管理员应该能够定义用于加密的密码或密码短语
2.  只有提供原始密码或密码短语的租户管理员才应该知道密钥
3.  租户管理员提供密码或密码短语后，应安全存储

**我的问题**

1.  到目前为止，我们一直在使用对称密钥加密，并在应用程序中硬编码应用程序范围的密钥。如果每个租户都想使用自己的密钥，这将不再有效。我们如何让每个用户定义自己的密钥？
2.  如何以及在哪里存储密钥？
3.  将密码/密码短语存储在证书中是否有效？如果是这样，那么如何保护密钥库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:16:39.083

如果不知道密钥，就不可能加密/解密。否则，使用密钥派生函数 (PBKDF2) 的 PBE 似乎是一个明确的案例。您可以使用非对称加密，但它只会在您的用例中加密期间保护私钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:06:25.487

下面是一段代码，展示了如何在您的应用程序中使用基于密码的加密 (PBE)，取自[教程](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html#PBEEx)：

```
PBEKeySpec pbeKeySpec;
PBEParameterSpec pbeParamSpec;
SecretKeyFactory keyFac;

// Salt
byte[] salt = {
    (byte)0xc7, (byte)0x73, (byte)0x21, (byte)0x8c,
    (byte)0x7e, (byte)0xc8, (byte)0xee, (byte)0x99
};

// Iteration count
int count = 20;

// Create PBE parameter set
pbeParamSpec = new PBEParameterSpec(salt, count);

// Prompt user for encryption password.
// Collect user password as char array (using the
// "readPasswd" method from above), and convert
// it into a SecretKey object, using a PBE key
// factory.
System.out.print("Enter encryption password:  ");
System.out.flush();
pbeKeySpec = new PBEKeySpec(readPasswd(System.in));
keyFac = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);

// Create PBE Cipher
Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");

// Initialize PBE Cipher with key and parameters
pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);

// Our cleartext
byte[] cleartext = "This is another example".getBytes();

// Encrypt the cleartext
byte[] ciphertext = pbeCipher.doFinal(cleartext); 
```

# c++ - 如何在 Solaris 8 SPARC 上启用 _GLIBCXX_USE_C99？

> ID：10391506
> 
> 赞同：5
> 
> 时间：2012-04-30T22:43:00.733
> 
> 标签：c++, boost, g++, solaris

我已经为 Solaris 8 sparc 构建了 gcc 4.6.1。我正在编译一些使用 boost::lexical_cast (boost 1.48) 的代码，我得到了这个错误：

```
boost/math/special_functions/sign.hpp: In function 'int boost::math::detail::signbit_impl(T, const boost::math::detail::native_tag&)'
      error: 'signbit' is not a member of 'std' 
```

（对于 fpclassify、isfinite、isnormal、isinf、isnan 也有类似的错误）

我查看了 cmath 标头，它根据是否定义了 _GLIBCXX_USE_C99_MATH 有条件地定义了 std::signbit。我运行了 cpp -dM ，发现 _GLIBCXX_USE_C99_MATH 没有定义。有没有办法启用 C99 支持？我必须重建 libc 还是这个平台太旧了？我已经脱离了我的元素，所以任何关于让它工作的指导都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-10T16:00:19.433

您的平台 C 库可能太旧，无法支持 C99 FP 库添加。

从[Sun Studio 12 用户指南](https://docs.oracle.com/cd/E18659_01/html/821-1384/bjayy.html)：

> 注 - 尽管编译器默认支持下面列出的 C99 的功能，但 Solaris 软件提供的标准头文件`/usr/include`还不符合 1999 ISO/IEC C 标准。如果遇到错误消息，请尝试使用`-xc99=none`获取这些标头的 1990 ISO/IEC C 标准行为。

# php - Javascript 变量到 PHP 会话变量，然后通过 Ajax 调用它以供多次使用

> ID：10391509
> 
> 赞同：0
> 
> 时间：2012-04-30T22:43:24.460
> 
> 标签：php, javascript, ajax, session-variables, viewport

我正在尝试基于浏览器视口来服务器设备特定的布局和内容。我有一个庞大的网站，由于某些特定原因，主要是页面加载速度，我没有使用媒体查询。我只需要以这种方式完成这项任务。

OK 情况是这样的......

我有 2 个文件`index.php`，并且`viewport.php`都位于一个文件夹中`http://localhost/test/`

为了获取浏览器视口并将值转换为 PHP 变量，我使用以下脚本：

```
<?php
if (isset($_GET['width'])) {
  $layoutType = $_GET['width'];

      if ( $layoutType >= 240 && $layoutType <= 600 ) {
        $layoutType = 'mobile';
      } else if ($layoutType >= 601 && $layoutType <= 900 ) {
          $layoutType = 'tablet';
      } else {
         $layoutType = 'desktop';
      }
} else {
  echo "<script language='javascript'>\n";
  echo "  location.href=\"${_SERVER['SCRIPT_NAME']}?${_SERVER['QUERY_STRING']}"
            . "&width=\" + document.documentElement.clientWidth;\n";
  echo "</script>\n";
  exit();
}
?> 
```

我的问题：

**Q1。**如何存储`$layoutType`为**会话变量**以便可以多次使用？它的正确语法是什么？

**Q2。**如何从中运行文件`viewport.php`并`index.php`仅获取`$layoutType`数据而没有其他数据。这是因为通过使用该`<?php require_once ?>`方法，我得到了这样的 URL `http://localhost/test/index.php?&width=1600`：. 我希望 URL`http://localhost/test/`只显示。我需要在`index.php`文件中使用的正确语法是什么？

**Q3。**跳过 Ajax 部分有没有办法摆脱`index.php?&width=1600`URL？我试过了，`.htaccess`但它给了我一个错误，说*“页面没有正确重定向”*

**请注意：**我不打算使用像 jQuery 和 MooTools 这样的 JavaScript 库，因为这是我整个网站中唯一的 JavaScript 函数，为它加载整个库是没有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:35:10.387

首先，PHP 发生在服务器端，因此一旦页面加载，再次使用 PHP（不加载页面）的唯一方法是进行 ajax 调用，大概是对另一个执行特定功能并返回值的 php 页面。

如果要将值存储为会话变量以便可以连续使用，可以执行以下操作：

1.  当他们第一次登陆您的网站时，有 php 检查会话是否存在，如果它不存在，则调用 Javascript 函数以获取 layoutWidth 并对 php 页面进行 ajax 调用，该页面将其存储为会话变量，然后重新加载页面并包含正确的布局文件。

我可能不会使用这种方法，实际上会寻找使用 JavaScript/JQuery 来实现这一点的方法。但这就是你要求这样做的方式。

对于您的示例，我根本没有使用过 JQuery，但我希望包含的内容只有大约 19kb 左右，它让生活变得如此轻松。

例子：

索引.php

```
<?php
   session_start();
?>
<!DOCTYPE html>
<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <?php 
         if (empty($_SESSION['layoutWidth'])) {
            echo '<script type="text/javascript"> var session=false; var layoutWidth;</script>';
         } else {
            echo '<script type="text/javascript"> var session=true; var layoutWidth=' . $_SESSION['layoutWidth'] . ';</script>';
         }
      ?>
      <script type="text/javascript" src="js/viewport.js"></script>
   </head>
   <body>
         <?php

            if (!empty($_SESSION['layoutWidth'])) {
               $layoutWidth = $_SESSION['layoutWidth'];
               if ( $layoutWidth >= 240 && $layoutWidth <= 900 ) {
                  include('layout1.php');
               } else if ($layoutWidth > 900 && $layoutWidth <= 1200 ) {
                  include('layout2.php');
               } else {
                  include('layout3.php');
               }
            }
         ?>
   </body>
</html> 
```

js/viewport.js

```
// JavaScript Document

window.onload = function() {
    // if there is no session (session = false)
    if (!session) {
        // call function to get the screen size
        getScreenWidth();

        // make ajax call to php page to set the session variable
        setSession();
    }
}

function getScreenWidth() {
    layoutWidth = screen.width;
}

function setSession() {
    var xmlhttp;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        // Reload the page
        window.location.reload();
        }
      }
    xmlhttp.open("POST","set_session.php?layoutWidth=" + layoutWidth,true);
    xmlhttp.send();
} 
```

您的 php 文件来设置会话参数是从您的 ajax 调用传递的：

set_session.php

```
<?php
    session_start();
    // you can check if it is already set if you like otherwise:
    $_SESSION['layoutWidth'] = $_REQUEST['layoutWidth'];
?> 
```

布局1.php

```
<?php
   echo '<div>This is layout1.php</div>';
   echo '<div>Your screen width is: ' . $_SESSION['layoutWidth'] . '</div>';
?> 
```

布局2.php

```
<?php
  echo '<div>This is layout2.php</div>';
  echo '<div>Your screen width is: ' . $_SESSION['layoutWidth'] . '</div>';
?> 
```

布局3.php

```
<?php
   echo '<div>This is layout3.php</div>';
   echo '<div>Your screen width is: ' . $_SESSION['layoutWidth'] . '</div>';
?> 
```

这种方法意味着您不必在 URL 中传递参数。这一切都会被隐藏起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:23:03.560

Q1) $_SESSION['layoutType']=$layoutType;

Q2&Q3 ）我认为你把它弄得太复杂了。最好的方法是结合 cookie 和 session 的力量来实现你想要的限制，你将拥有一个更快、更整洁的代码。所以你可以做的是检查是否设置了会话 layoutType，如果没有，注入一个 javascript 代码，它会为你获取 layoutType 并将其放入一个 cookie 中，下次你在页面中包含 viewport.php 时，它'将检查 cookie 是否已设置并将其传输到会话以供将来使用，因此您可以将 viewport.php 更改为：

```
<?php
  if(isset($_SESSION['layoutType'])){
    //write the code for when session is set here
  }elseif(isset($_COOKIE["layoutType "])){
    $_SESSION['layoutType']=$_COOKIE["layoutType "];
  }else{
      $script = "<script language='javascript'>function SetCookie(cookieName,cookieValue) { var today = new Date(), expire = new Date(), nDays=1;expire.setTime(today.getTime() + 3600000*24*nDays);document.cookie = cookieName+'='+escape(cookieValue)+ ';expires='+expire.toGMTString();SetCookie('layoutType',document.documentElement.clientWidth}";
      echo $script;
  }
?> 
```

# java - Hibernate @Lob 注释不再起作用：不能用几个字符串超过整体 CLOB 长度？

> ID：10391510
> 
> 赞同：0
> 
> 时间：2012-04-30T22:43:35.903
> 
> 标签：java, spring, hibernate, persistence, hibernate-annotations

当我尝试使用 @lob 字符串持久化实体时出现错误。我记得那部分代码运行良好，我根本不记得改变它。我很困惑。这是我的错误：

> 错误 30 04 12 23:50:31 [org.hibernate.util.JDBCExceptionReporter] => 起始位置 [1] 不能超过总 CLOB 长度 [0] com.vaadin.event.ListenerMethod$MethodException 原因：javax.persistence.PersistenceException： org.hibernate.exception.GenericJDBCException：无法插入：[life.domain_model.Post] at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:507) at com.vaadin.event.EventRouter.fireEvent(EventRouter.java :161) 在 com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1154) 在 com.vaadin.ui.Button.fireClick(Button.java:371) 在 com.vaadin.ui.Button.changeVariables(Button. java:193) 在 com.vaadin.terminal.gwt.server.AbstractCommunicationManager 的 com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1094)。doHandleUidlRequest(AbstractCommunicationManager.java:590) 在 com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:266) 在 com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:476)在 org.vaadin.navigator7.NavigableApplicationServlet.service(NavigableApplicationServlet.java:46) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java :290) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 在 org.apache.catalina.core 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)。 StandardContextValve.invoke(StandardContextValve.java:191) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) 在 org.apache.coyote.http11 .Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source) ：javax.persistence.PersistenceException：org.hibernate.exception.GenericJDBCException：无法在org.hibernate.ejb.AbstractEntityManagerImpl插入：[life.domain_model.Post]。convert(AbstractEntityManagerImpl.java:1214) at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1147) at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1153) at org.hibernate.ejb.AbstractEntityManagerImpl .merge(AbstractEntityManagerImpl.java:695) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 在 java.lang。 reflect.Method.invoke(Unknown Source) at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240) at $Proxy29.merge(Unknown Source) at life.dao.ForumDao.merge(ForumDao. java:24) 在 life.dao。ForumDao$$FastClassByCGLIB$$6eb7cb5f.invoke() at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149) at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688) ) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) 在 org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) 在 org.springframework.aop.framework.ReflectiveMethodInvocation。在 life.dao.ForumDao 的 org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621) 继续（ReflectiveMethodInvocation.java:172）在 life.dao$$EnhancerByCGLIB$$8ecdd1fd.merge()。 ForumDaoImpl.mergeDiscussion(ForumDaoImpl.java:29) 在 life.dao.ForumDaoImpl。saveNewPostForDiscussion(ForumDaoImpl.java:50) at life.dao.ForumDaoImpl$$FastClassByCGLIB$$6d37da1f.invoke() at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149) at org.springframework.aop。 framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java: 110) 在 org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621) 在 life.dao.ForumDaoImpl$$ 的 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) EnhancerByCGLIB$66b0b0bd。saveNewPostForDiscussion() at life.ui.layouts.ForumEditorLayout.replyToDiscussion(ForumEditorLayout.java:112) at life.ui.layouts.ForumEditorLayout$3.buttonClick(ForumEditorLayout.java:84) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod .java:487) ... 22 更多原因：org.hibernate.exception.GenericJDBCException：无法插入：[life.domain_model.Post] at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140) at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128) 在 org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66) 在 org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:64) 在 org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java: 2327) 在 org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71) 在 org.hibernate.engine.ActionQueue.execute(ActionQueue) 的 org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2834) .java:273) 在 org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203) 在 org.hibernate.event. def.AbstractSaveEventListener。saveWithGeneratedId(AbstractSaveEventListener.java:129) at org.hibernate.ejb.event.EJB3MergeEventListener.saveWithGeneratedId(EJB3MergeEventListener.java:62) at org.hibernate.event.def.DefaultMergeEventListener.saveTransientEntity(DefaultMergeEventListener.java:415) at org.hibernate .event.def.DefaultMergeEventListener.mergeTransientEntity(DefaultMergeEventListener.java:341) at org.hibernate.event.def.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:303) at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java :258) 在 org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:877) 在 org.hibernate.impl.SessionImpl.merge(SessionImpl.java:859) 在 org.hibernate.engine.CascadingAction$6.cascade(CascadingAction .java:279) 在 org.hibernate.engine。Cascade.cascadeToOne(Cascade.java:392) 在 org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335) 在 org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204) 在 org.hibernate.engine .Cascade.cascadeCollectionElements(Cascade.java:425) 在 org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:362) 在 org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:338) 在 org.hibernate。 engine.Cascade.cascadeProperty(Cascade.java:204) at org.hibernate.engine.Cascade.cascade(Cascade.java:161) at org.hibernate.event.def.DefaultMergeEventListener.cascadeOnMerge(DefaultMergeEventListener.java:630) at org .hibernate.event.def.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:490) 在 org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:255) 在 org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:867) 在 org.hibernate.impl.SessionImpl.merge(SessionImpl) 的 org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:84) .java:851) at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:855) at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:686) ... 54 更多原因：java.sql .SQLException：开始位置 [1] 不能超过 org.hibernate.engine.jdbc.ClobProxy.invoke(ClobProxy.java:146) 处的总 CLOB 长度 [0]，位于 com.mysql.jdbc 的 $Proxy36.getSubString(Unknown Source) .PreparedStatement.setClob(PreparedStatement.java:3553) 在 org.apache.commons.dbcp.DelegatingPreparedStatement.setClob(DelegatingPreparedStatement.java:187) 在 org.apache.commons.dbcp。DelegatingPreparedStatement.setClob(DelegatingPreparedStatement.java:187) at org.hibernate.type.descriptor.sql.ClobTypeDescriptor$1.doBind(ClobTypeDescriptor.java:60) at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java :89) at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:282) at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:277) at org.hibernate.type.AbstractSingleColumnStandardBasicType.nullSafeardBasicTypeStand java:85) 在 org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2143) 在 org.hibernate.persister.entity 的 org.hibernate.persister.entity.AbstractEntityPersister.dehydrate(AbstractEntityPersister.java:2166) .AbstractEntityPersister$4.bindValues(AbstractEntityPersister.java:2321) at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:56) ... 85 更多

这是 Post 实体：

```
@Entity
public class Post {
    @Id @GeneratedValue
    private Long id;
    @ManyToOne @JoinColumn(name = "owner_id")
    private User owner;
    @ManyToOne @JoinColumn(name = "editer_id")
    private User lastEditer;
    private Date creationDate;
    private Date lastEditionDate;
    @Lob
    private String content;
    @ManyToOne @JoinColumn(name = "discussion_id")
    private Discussion discussion;

    public Post(){

    }
    public Post(User owner,String content){
        this.owner = owner;
        this.lastEditer = null;
        Date curent = new Date();
        this.creationDate = curent;
        this.lastEditionDate = curent;
        this.content = content;
        this.discussion = null;
    }

    //G&S
.... 
```

无论字符串内容长度如何，我都会收到错误消息。我仍在使用 hibernate 3.6.0 和 MySql 5.5 ( + spring )。谁能告诉我如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T23:01:56.837

在尝试将空字符串保存到使用 @Lob 注释的字段时，我遇到了同样的问题。发现了这个漏洞：[https ://hibernate.onjira.com/browse/HHH-5704](https://hibernate.onjira.com/browse/HHH-5704)

我的项目隐含包含 Hibernate 核心版本 3.6.0，一旦我更新 POM 以明确包含核心版本 3.6.10，它就开始按预期工作。

票很好地解释了这个问题。

# css - CSS 无冲突样式

> ID：10391512
> 
> 赞同：3
> 
> 时间：2012-04-30T22:44:00.920
> 
> 标签：css

什么是创建 CSS 样式表的无冲突版本的好方法？假设您有一堆代码，其中的类与 Bootstrap 的类重叠。

这是否有效：将 a 添加`class="bootstrap"`到应该应用引导样式的祖先元素，然后更改`bootstrap.css`为每个前缀都`rule {}`带有`.bootstrap rule {}`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:31:15.977

我最近还需要使用引导表单样式来执行此操作以避免冲突，并且我发现您可以将 bootstrap.less（或您自己的自定义版本）中的所有 @imports 包围为：`.bootstrap { ... }`并重建引导程序。现在每个 CSS 选择器都会以`.bootstrap`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:48:19.847

是的。这是一种丑陋的方法，您将陷入 DOM 抨击（性能较慢）。有什么理由不能重构代码并完全分离引导样式？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T22:49:07.563

我没有看到任何不起作用的原因，但这样做可能会对性能产生一些影响——我不确定它们是否足够重要以供考虑。重命名冲突的类可能是一个更好的主意。

这里有几个资源可供查看：

[http://www.vanseodesign.com/css/css-selector-performance/](http://www.vanseodesign.com/css/css-selector-performance/)

[https://developer.mozilla.org/en/Writing_Efficient_CSS](https://developer.mozilla.org/en/Writing_Efficient_CSS)

这来自 Mozilla 的 CSS 效率指南（第二个链接）：“这是显着提高性能的关键。检查给定元素所需的规则越少，样式解析就越快。”

# git - Git“似乎不是 git 存储库”

> ID：10391522
> 
> 赞同：24
> 
> 时间：2012-04-30T22:45:25.853
> 
> 标签：git

我正在尝试在服务器上安装 git，但在尝试执行第一次推送时遇到了一些问题。我在服务器上成功安装了 git，在本地和服务器上创建了存储库，但是当我尝试进行第一次推送时，我收到以下消息：

```
stdin: is not a tty
fatal: '/my_repo.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

我用谷歌搜索并跟踪了我能找到的所有内容，但没有任何效果。有什么问题？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-01T00:45:57.010

我会假设你正在使用 ssh 来克隆你的 repo。

这意味着您需要 ssh 地址中服务器上 repo 的完整路径：

```
git clone ssh://sshuser@serverIP/full/absolute/path/to/my_repo 
```

注意：如果你的 'my_repo' 是一个空的（允许推送），那将是：

```
git clone ssh://sshuser@serverIP/full/absolute/path/to/my_repo.git 
```

`stdin: is not a tty`简单地说，在帐户`.bashrc`中`sshuser`，有一些东西需要输入。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-25T23:12:02.423

可能是您忘记`git --bare init`在远程文件夹上运行那是我的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T00:53:16.843

或者，您可以简单地使用：

```
git clone user@server:/full/path/to/your/directory 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-18T03:18:27.557

未入狱/未 chroot 的 git 用户也可能是问题来源，设置用户的主目录 ( `~/`) 也可能有所帮助。例如，更改：

```
git clone -- 'ssh://user@host:port/dir/repo.git'; 
```

到

```
git clone -- 'ssh://user@host:port/~/dir/repo.git'; 
```

相关：[Git“似乎不是一个git存储库”](https://stackoverflow.com/questions/10391522/git-does-not-appear-to-be-a-git-repository#comment50985463_10392265)（*也可以在路径中使用~当你*...）

# php - 将会话数据存储到 mysql 表和 last_insert_id 函数

> ID：10391531
> 
> 赞同：-1
> 
> 时间：2012-04-30T22:46:47.080
> 
> 标签：php, mysql, session

当护士登录患者系统时，有关她的详细信息将存储在会话变量中——包括她的用户 ID。我创建了一个注册脚本，这样当护士注册一个新病人时，她的 id 就存储在 user 表的 super 列中。这样就可以将患者仅分配给她。

问题是当我运行插入语句时，值 0 存储在超级用户列中，而不是护士的用户 ID。如何解决？

我有一个包含用户配置文件的配置文件表，它链接到用户表。我使用第一个插入语句在用户表中创建记录。我希望第二条语句在配置文件表中创建一条记录，其配置文件 ID 与新创建的 user_id 相同。我正在尝试使用该`LAST_INSERT_ID()`功能，但它也存储 0 而不是最后一个 id。

这是我围绕相关特定部分的代码。如果格式不正确，我很抱歉。我正在使用屏幕阅读器，我无法访问此网站上的格式选项。

我已将 $_post 中的表单数据存储到下面使用的所有变量中。

```
$SuperUser = $_SESSION['SuperUser'];
//insert query for user table
$UserInsert = "insert into user
(User_id,
Username,
Password,
User_level,
SuperUser)
values(null,
'$Username',
'$Password',
'1',
'$SuperUser')";
//run query for inserting data for user table
mysql_query($UserInsert) or die("cannot insert into user");

//Select the last increment id from user table
$LastIdQuery = "Select LAST_INSERT_ID()";
$LastId = mysql_query($LastIdQuery) or die("Cannot select last id");

//insert query for profile table
$ProfileInsert = "insert into profile
(User_id,
FirstName,
LastName,
Dob,
NI_Number,
NHS_Number,
Address1,
Address2,
Town,
Postcode,
Email,
Contact_Number,
Comments)
values('$LastId',
'$FirstName',
'$LastName',
'$DobYear-$DobMonth-$DobDay',
'$NI_Number',
'$NHS_Number',
'$Address1',
'$Address2',
'$Town',
'$Postcode',
'$Email',
'$Contact_Number',
'$Comments')";
//insert into profile
mysql_query($ProfileInsert) or die("Unable to insert in profile");
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:21:45.413

尝试做`$id = mysql_insert_id()`而不是您正在做的 LAST_INSERT_ID 函数。此外，如果您将 mysql 连接存储在变量中，将其传递给`mysql_insert_id()`可以使其更准确。例如连接数据库时：

```
$link = mysql_connect(......); 
```

然后稍后：

```
mysql_query($ProfileInsert) or die("Unable to insert in profile");
$id = mysql_insert_id( $link );
mysql_close( $link ); 
```

# magento - 如何将新页面添加到客户帐户仪表板？

> ID：10391534
> 
> 赞同：2
> 
> 时间：2012-04-30T22:47:04.070
> 
> 标签：magento

我已经编辑了 customer.xml 文件以向仪表板页面添加一个新链接。我添加了以下行

```
<action method="addLink" translate="label" module="customer"><name>newpage</name><path>customer/newpage/</path><label>My New Page</label></action> 
```

我还在 customer.xml 中添加了以下块

```
<customer_newpage_index translate="label">
    <label>Customer My newpage</label>
    <!-- Mage_Customer -->
    <update handle="newpage"/>
    <reference name="my.account.wrapper">
        <block type="customer/newpage" name="newpage" before="-" template="customer/newpage.phtml"/>
    </reference>
</customer_newpage_index> 
```

并在 template/customer/newpage.phtml 添加了一个模板文件

链接显示，但是当我查看 /customer/newpage/ 时我得到一个 404 页面

我在这里想念什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:52:11.320

您需要添加一个名为的控制器`NewpageController.php`，其中有一个名为`indexAction`. 在 Customer 模块中添加这个控制器可能不是一个好主意，因为那是在 中`core`，我们*从不*接触`core`。相反，您可能想要做的是创建自己的模块并将控制器放入其中。它仍然可以像您所做的那样作为侧边栏的链接之一添加，但是从外部添加，这样当您升级 Magento 时，您就不会丢失您的控制器。

# c++ - 将双端队列传递给新的 pthread

> ID：10391536
> 
> 赞同：2
> 
> 时间：2012-04-30T22:47:06.660
> 
> 标签：c++, thread-safety, pthreads, deque

我有一个代码块，我在一个 pthread 中（让我们调用这个线程`a`），我希望生成一个新的 pthread（让我们调用这个线程`b`）。线程`b`需要传递一个双端队列，我有以下代码：

```
void* process_thread_b(void* arg)
{              
  deque<string> *ptr = (deque<string>*)arg;
  cout << "Size -" << ptr->size() << endl;

  deque<string>::iterator it;
  for(it = ptr->begin(); it != ptr->end(); it++)
  {
    cout <<(*it) << endl;
  }
} 
```

上面的代码是线程`b's`代码。它传递了一个双端队列并正确打印出大小。当我尝试打印出它的任何元素时，我得到：

```
terminate called after throwing an instance of 'std::bad_alloc'
 what():  std::bad_alloc
Abort (core dumped) 
```

当我产生 pthread 时，我使用下面的代码......

```
 deque<string> myDeque;

 // Add strings to deque here...

 pthread_t dispatchCommands;
 pthread_create(&dispatchCommands, NULL, &process_thread_b, (void*)&myDeque); 
```

底部代码发生在 thread 中`a`。为什么当我尝试打印出双端队列的一个元素时，我得到一个错误，但我可以得到它的大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T22:54:03.620

`pthread_create`将在您的线程函数开始执行之前很久就返回。你的`deque`意志早就被摧毁了。您需要在堆上创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T22:52:40.330

我认为这是因为您试图将对甲板的引用转换为 void*，试试这个：

```
 deque<string> * myDeque = new deque<string>(); 
```

然后使用 -> 访问其功能。

然后您可以将 myDeque 直接转换为 void 指针，它将保持初始化状态。

IE。：

```
 (void*)myDeque 
```

希望这可以帮助。

# zend-framework - Zend 框架中的表单

> ID：10391537
> 
> 赞同：2
> 
> 时间：2012-04-30T22:47:08.673
> 
> 标签：zend-framework

我是 Zend 框架的新手，我遇到了问题。通常在验证表单中的数据时，我们使用如下 javascript：

```
<html>
<head>
    <script>
        function verify(){
            if( document.form.name.value=="") { alert("Error");  return false}
        }
    </script>
</head>
<body>

    <form onSubmit="verify()" name="form">
        <input name="name" />
        <input type="submit" />
    </form>
</body>
</html> 
```

我正在使用 zend 表单，但我不知道该怎么做。

```
<?php

class Application_Form_Login extends Zend_Form {

    public function init() {
        $login = new Zend_Form_Element_Text('login');

        $password = new Zend_Form_Element_Password('password');

        $submit = new Zend_Form_Element_Submit('submit');
        $submit->setLabel("Login");

        $remember = new Zend_Form_Element_Checkbox('remember');

        $this->addElements(array($login, $password,$remember ,$submit));
    }

}
?> 
```

请提供任何帮助。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:59:23.117

您的操作方式与以前相同，但这里是如何告诉`Zend_Form`您将`onsubmit`事件添加到您的，以便生成的 HTML 代码包含`<form>`标记中的属性。

```
class Application_Form_Login extends Zend_Form {

    public function init() {
        $this->setAttrib('onsubmit', 'return verify()');

        // rest of your form code to add elements
    }
} 
```

这会`onsubmit`为`Zend_Form`对象添加一个属性，这样当呈现表单时，您的`<form>`标签就会包含`onsubmit="return verify()"`在其中。

现在，您只需将实际的 Javascript 代码放入视图脚本本身或您可以在`<script>`标记中引用的外部 javascript 文件中即可验证表单。

# actionscript-3 - AS3 - 检查 BitmapData 是否被其他 BitmapData 完全遮挡

> ID：10391538
> 
> 赞同：1
> 
> 时间：2012-04-30T22:47:22.387
> 
> 标签：actionscript-3, bitmapdata, hittest

我正在检查 BitmapData 对象是否完全被 BitmapData 对象遮挡。是否有类似 hitTest 函数的东西，但它确保每个像素都被覆盖而不是任何像素？

编辑：重要的是在检查对象是否被遮挡时不包括透明像素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T00:08:32.440

毕竟，这实际上是一个非常简单的解决方案！基本上你所做的只是在重叠位图占据的矩形区域中捕获重叠位图的像素值。然后，您遍历该值向量，只要您没有 0（完全透明的像素），那么您就完全覆盖了下面的位图。

这是我在此测试中使用的两个位图：

重叠位图：
![在此处输入图像描述](../Images/2a8b1b54e412726fadf0df63aa9bb478.png)

重叠位图：
![在此处输入图像描述](../Images/e7151e0ed5f8cabd755040fcd948f7e7.png)
代码：

```
import flash.display.BitmapData;
import flash.display.Bitmap;
import flash.events.MouseEvent;
import flash.geom.Point;
import flash.utils.ByteArray;
import flash.geom.Rectangle;

var coveredBitmapData:BitmapData = new CoveredBitmapData();
var coveringBitmapData:BitmapData = new CoveringBitmapData();

var coveringBitmap:Bitmap = new Bitmap(coveringBitmapData, "auto", true);
var coveredBitmap:Bitmap = new Bitmap(coveredBitmapData, "auto", true);

coveredBitmap.x = Math.random() * (stage.stageWidth - coveredBitmap.width);
coveredBitmap.y = Math.random() * (stage.stageHeight - coveredBitmap.height);

stage.addChild(coveredBitmap);
stage.addChild(coveringBitmap);

stage.addEventListener(MouseEvent.MOUSE_MOVE, onMouseMovement);

function onMouseMovement(e:MouseEvent):void
{
    coveringBitmap.x = mouseX - (coveringBitmap.width * .5);
    coveringBitmap.y = mouseY - (coveringBitmap.height * .5);

    checkIfCovering(coveringBitmap, coveredBitmap);
}

function checkIfCovering(bitmapA:Bitmap, bitmapB:Bitmap):Boolean
{
    //bitmapA is the covering bitmap, bitmapB is the bitmap being overlapped

    var overlappedBitmapOrigin:Point = new Point(bitmapB.x, bitmapB.y);

    var localOverlappedBitmapOrigin:Point = bitmapA.globalToLocal(overlappedBitmapOrigin);

    var overlappingPixels:Vector.<uint> = bitmapA.bitmapData.getVector(new Rectangle(localOverlappedBitmapOrigin.x, localOverlappedBitmapOrigin.y, bitmapB.width, bitmapB.height));

    if(overlappingPixels.length == 0) {
        //This means that there is no bitmap data in the rectangle we tried to capture. So we are not at all covering the underlying bitmap.
        return false;
    }

    var i:uint = 0;
    for(i; i < overlappingPixels.length; ++i) {
        if(overlappingPixels[i] == 0) {
            return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T22:54:22.780

所以你想看看是否`object2`完全覆盖`object1`（两个位图）？

```
var left:Boolean = object2.x <= object1.x;
var top:Boolean = object2.y <= object1.y;
var right:Boolean = object2.x + object2.width >= object1.x + object1.width;
var bottom:Boolean = object2.y + object2.height >= object1.y + object1.height;

if(left && right && top && bottom)
{
    // Completely covered.
} 
```

# debugging - 调试节点/Express --- require('express') 创建一个中断

> ID：10391541
> 
> 赞同：10
> 
> 时间：2012-04-30T22:47:39.293
> 
> 标签：debugging, node.js, express

我在 Node 和 Express 方面相当有限的经验并没有帮助，但我在从终端窗口调试应用程序时遇到了麻烦。这是问题：

运行`node debug app.js`返回：

```
< debugger listening on port 5858
connecting... ok
break in server.js:1
    1 var express = require('express'); 
```

这是调试快速应用程序的正确方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-17T02:01:42.953

只是以更明确的方式回应对 Node Inspector 的呼吁。

```
$ sudo npm install -g node-inspector
$ node-debug app.js <arguments to your app>
debugger listening on port 5858
Node Inspector is now available from http://localhost:8080/debug?port=5858
Debugging `app.js` 
```

现在在（基于 webkit 的？）浏览器中转到该地址 - 或者它在远程也可以正常工作，只要端口是打开的。

![在此处输入图像描述](../Images/b317df50b49cb2c6f1849cc5007b2c5a.png)

现在您可以完全访问所有`app`暴露给客户端调试器的服务器端变量（例如对象）。这很神奇。`app.get()`您可以在入口点、服务器初始化或任何地方设置断点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-30T22:56:16.787

有一个流行的 GUI 调试器（利用 WebKit，即 Chrome、Safari..）。

你应该试一试[https://github.com/dannycoates/node-inspector](https://github.com/dannycoates/node-inspector)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T22:57:00.540

就个人而言，我更喜欢结合使用[节点检查](https://github.com/dannycoates/node-inspector)器和老式`console.log`语句来找出发生了什么。（我认为 node-inspector 提到的 v8-profiler 不适用于 Node 0.6.x，但老实说我没有尝试过。）

如果其他人有一个维护得更好的工具来调试 Node.js 应用程序，我也很想知道它，但这是我所知道的最好的。

# asp.net - 单个 AppDomain 中的多个应用程序

> ID：10391549
> 
> 赞同：2
> 
> 时间：2012-04-30T22:48:34.417
> 
> 标签：asp.net, authentication, appdomain

我是一名 Web 开发人员，在一家新商店与来自桌面背景的开发人员一起工作——因此，他们在组织代码时有某些特质/最佳实践——其中一个是将单独的 UI 视图隔离到不同的项目中。

所以，在房子的网页端，我在不同的应用程序域中构建不同的项目时遇到了问题：

1) 我有一个带有 default.aspx 的“门户”项目 在后面的代码中，有一个自定义身份验证方法从 Login_Authenticate 事件内部调用，以登录到桌面应用程序的“业务层”。业务端将会话数据存储在 ASP.NET 会话中。

2) 我有一个带有 default.aspx 的“查看器”项目——它最初在门户项目中为“Viewer.aspx”，它在相同的登录方案下被覆盖并经过良好的身份验证，但我们认为它会很好在它自己的项目上，因为它是一个单独的视图。

我们向两个 web.config 文件添加了相同的机器密钥，因此可以通过单点登录传递 .NET 表单身份验证。

我以两种不同的方式构建了查看器项目：

第一次尝试（它自己的 URL）：

[http://localhost/查看器](http://localhost/Viewer)

第二次尝试（门户 URL 下的子域）：

[http://localhost/Portal/查看器](http://localhost/Portal/Viewer)

我遇到的问题是会话没有在 Portal 项目和 Viewer 项目之间传递。我知道这是因为 IIS 在不同的应用程序域中运行它们。不幸的是，没有来自 Portal 的 ASP.NET 会话，查看器不会登录到业务应用程序。

是否有最佳实践/甚至可以在一个应用程序域中运行多个项目？Viewer 是否应该成为 Portal 应用程序的一部分，因为它需要相同的会话？Viewer 是否应该是一个单独的项目，需要它自己单独登录到业务层？这种情况甚至有最佳实践/指南吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T04:08:44.740

默认情况下，会话不能在不同的应用程序之间共享。

在实践中，大多数项目并不是以这种方式分离的。以我的经验，大多数使用某种 n 层架构。基本上，您在一个 asp.net 项目中拥有所有“查看”代码，在另一个 dll 项目中拥有任何业务逻辑/数据对象，在第三个 dll 项目中拥有您的数据访问权限。然后该网站仅引用其他两个 dll。

要解决您的问题，此答案可能会为您提供所需的内容：[使用 ASP.NET 会话状态服务在应用程序之间共享会话](https://stackoverflow.com/questions/2868316/sharing-sessions-across-applications-using-the-asp-net-session-state-service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:25:36.720

有一种方法可以拥有[多个项目，但只有一个站点](http://weblogs.asp.net/scottgu/archive/2006/08/16/Tip_2F00_Trick_3A00_-Creating-Sub_2D00_Web-Projects-using-the-VS-2005-Web-Application-Project-Option.aspx)。这个例子有点老了，但仍然有效，这就是我们做网站的方式。

# ruby-on-rails-3 - 为什么 Rails 不接受我的自定义邮件递送方式？

> ID：10391552
> 
> 赞同：8
> 
> 时间：2012-04-30T22:48:37.157
> 
> 标签：ruby-on-rails-3

我定义了一个自定义交付方法，并将其加载到初始化程序中：

```
ActionMailer::Base.add_delivery_method :custom, CustomDelivery 
```

然后我添加`config.action_mailer.delivery_method = :custom`到 development.rb 和 production.rb。

但是当我想发送电子邮件时

```
UserMailer.authorize(user).deliver 
```

它因与 SMTP ( `ArgumentError: A sender (Return-Path, Sender or From) required to send a message from /Users/me/.rbenv/versions/1.9.3-p0/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:99:in deliver!'`) 相关的内容而失败——我**不想**使用它。

为什么它不采用自定义交付方式？

更新：当我从控制台尝试时，我注意到以下内容：

```
irb(main):019:0> UserMailer.delivery_method
=> :custom

irb(main):020:0> UserMailer.authorize(user).delivery_method 
=> #<Mail::SMTP:0x00000100bdc738 @settings={:address=>"localhost", :port=>25, :domain=>"localhost.localdomain", :user_name=>nil, :password=>nil, :authentication=>nil, :enable_starttls_auto=>true, :openssl_verify_mode=>nil, :ssl=>nil, :tls=>nil}> 
```

（顺便说一句，我在我的项目中搜索了“SMTP”并且出现了 0 次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-28T13:28:22.707

使用您的自定义交付类配置 action_mailer delivery_method：

```
config.action_mailer.delivery_method = MyCustomDelivery 
```

该类应该实现交付！`Mail`采用gem实例的实例方法。像这样的东西：

```
class MyCustomDelivery
  def deliver!(mail)
    puts "MAIL FROM: #{mail.from}"
    puts "RCPT TO: #{mail.to}"
    puts "DATA: #{mail.to_s}"
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T14:53:22.950

你配置过 SMTP`environment.rb`吗？这是我的样子。

```
ActionMailer::Base.smtp_settings = {
  :domain          => 'gmail.com',
  :address         => 'smtp.gmail.com',
  :port            => 587,
  :tls             => true,
  :authentication  => :plain,
  :charset         => 'utf-8',
  :user_name       => ENV['GMAIL_USERNAME'],
  :password        => ENV['GMAIL_PASSWORD'],
  :enable_starttls_auto => true
} 
```

# ios - 在 Web 上显示 iOS emoji unicode 字符

> ID：10391557
> 
> 赞同：5
> 
> 时间：2012-04-30T22:49:15.643
> 
> 标签：ios, unicode, cross-browser, web, emoji

有很多应用程序接受来自 iOS 设备的输入，而这些设备上的 unicode 字符相当普遍。有谁知道任何允许这些 un​​icode 字符在非 iOS 浏览器上显示为图像的库或资源，或者可能将它们转换为最接近的 ASCII 等价物；例如，笑脸 unicode 字符可能会被转换为 ascii 字符串“:)”。或者是否有可能我可以使用的跨浏览器字体，它忠实地支持用于 iOS 表情符号图标的 unicode 子集。

具体来说，我希望能够忠实地跨浏览器显示以下页面（现代浏览器很好）：[http](http://hasseg.org/stuff/ios-emoji/) ://hasseg.org/stuff/ios-emoji/ 。

编辑：如果在服务器端完成，解决方案最好使用 Python。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T22:54:42.423

您没有指定语言，但这里有一个 PHP 库：[http](http://code.iamcal.com/php/emoji/) ://code.iamcal.com/php/emoji/ 。

# vb.net - 处理 FlowLayoutPanel 内 UserControl 内控件的值更改

> ID：10391558
> 
> 赞同：0
> 
> 时间：2012-04-30T22:49:21.297
> 
> 标签：vb.net, user-controls, event-handling, controls, flowlayoutpanel

我正在制作发票申请。我在 FlowLayoutPanel (pnlEntries) 内的 UserControl (InvoiceEntry) 内有一个标签 (lblCost)。InvoiceEntry 代表发票上的一个行项目，pnlEntries 是发票的“正文”。pnlEntries 可以包含多个 InvoiceEntry 控件。

我正在尝试对每个 InvoiceEntry 控件中的所有 lblCost 值求和以进行小计，并且我希望该小计在成本发生变化时自动更改（例如，订购数量的变化）。当 pnlEntries 中包含的任何 InvoiceEntry 控件的 lblCost.Text 属性发生变化时，是否有办法处理？

发票添加.vb：

```
' Instantiate objects of the various database interaction classes.
Private mCustomer As New Customers
Private mItem As New Items
Private mInvoices As New Invoices
Private mInvoiceItem As New InvoiceItems

' An array of InvoiceEntries for DB processing
Private Entries() As InvoiceEntry
Private numEntries As Integer = 0

Private Sub InvoiceAdd_Load(sender As System.Object, e As System.EventArgs) _
            Handles MyBase.Load

    Me.CustomersTableAdapter.Fill(Me.Bauer_BusinessDataSet.Customers)

    ' Set the DataSource properties of the invEntry control.
    ' NOTE: For some reason, if this is done inside the
    ' control code, the program attempts to look in the
    ' wrong directory for the database. I'm not entirely
    ' sure why this is. Setting these properties in the form code,
    ' rather than in the control code, is a successful workaround.
    With invEntry.cboItem
        .DataSource = mItem.Items
        .DisplayMember = "ItemName"
        .ValueMember = "Id"
    End With
End Sub

Private Sub UpdateTotal() Handles nudTaxRate.TextChanged, _
                                  pnlEntries.GotFocus

    Dim total As Decimal = 0

    If Entries IsNot Nothing Then

        For Each x In Entries
            total += CDec(x.lblTotal.Text)
        Next
        lblSubtotal.Text = total.ToString("C")
        lblTax.Text = (lblSubtotal.Text * (nudTaxRate.Text / 100)).ToString("C")

        Dim subtotal As Decimal = 0
        Dim tax As Decimal = 0
        If Not lblSubtotal.Text = Nothing And Not lblTax.Text = Nothing Then
            Decimal.TryParse(lblSubtotal.Text.Substring(1), subtotal)
            Decimal.TryParse(lblTax.Text.Substring(1), tax)
        End If

        lblGrandTotal.Text = (subtotal + tax).ToString("C")
    End If
End Sub

Public Sub invEntry_ItemSelected() Handles invEntry.ItemSelected

    ' Increment the number of entries to reflect the addition of a new entry.
    numEntries += 1

    ' ReDim the Entries array to compensate for a new item being added.
    ReDim Preserve Entries(numEntries - 1)

    ' Store the line item that was selected in the Entries array.
    Entries(numEntries - 1) = invEntry

    ' Set the selected line item to a new blank line item and
    ' add it to the pnlEntries' Controls Collection.
    invEntry = New InvoiceEntry
    With invEntry
        .Name = "Textbox" & numEntries - 1
        .Location = New Point(10, (numEntries - 1) * (.Height + 30))
        With .cboItem
            .DataSource = mItem.Items
            .DisplayMember = "ItemName"
            .ValueMember = "Id"
        End With
    End With
    pnlEntries.Controls.Add(invEntry)

    ' Enable the remove button on the previous list item, as
    ' it is no longer an empty entry.
    Entries(numEntries - 1).btnRemove.Enabled = True

End Sub

Public Sub pnlEntries_ControlRemoved() Handles pnlEntries.ControlRemoved
    numEntries -= 1
    ReDim Preserve Entries(numEntries - 1)

    ' As the Entries array does not know which control was removed,
    ' repopulate it with the controls from the panel.
    ' NOTE: This intentionally leaves the blank line item (invEntry)
    '       out of the array, as this array will be used to add
    '       the invoice line items to the database.
    For x As Integer = 0 To Entries.Count - 1
        Entries(x) = pnlEntries.Controls(x)
    Next
End Sub 
```

发票入口.vb：

```
' Instantiate an object to interact with the Item table.
Private mItem As New Items

Public Event ItemSelected As EventHandler

Private Sub cboItem_SelectionChangeCommitted(sender As System.Object, _
                    e As System.EventArgs) _
                    Handles cboItem.SelectionChangeCommitted
    RaiseEvent ItemSelected(Me, EventArgs.Empty)
End Sub

Private Sub InvoiceEntry_Load(sender As System.Object, _
                              e As System.EventArgs) _
                              Handles MyBase.Load

    ' Set the various properties of the Item combobox.
    With cboItem
        .SelectedIndex = -1
        .DropDownStyle = ComboBoxStyle.DropDownList
    End With

    ' Set the Remove button to be disabled by default.
    btnRemove.Enabled = False
End Sub

Private Sub cboItem_SelectedIndexChanged(sender As System.Object, _
                    e As System.EventArgs) _
                    Handles cboItem.SelectedIndexChanged

    ' If nothing is selected, clear and disable all relevant controls.
    If cboItem.SelectedIndex = -1 Or cboItem.Text = "" Then
        lblDescription.Text = ""
        lblTotal.Text = ""
        nudQuantity.Enabled = False
        lblPrice.Text = ""
    Else

        ' Else, set the control texts to their respective values.
        lblDescription.Text = _
            cboItem.DataSource.Rows(cboItem.SelectedIndex)("Description")
        lblPrice.Text = cboItem.DataSource.Rows(cboItem.SelectedIndex)("Price")
        lblTotal.Text = (lblPrice.Text * nudQuantity.Value).ToString("C")
        nudQuantity.Enabled = True
    End If
End Sub

Private Sub lblTotal_TextChanged(sender As System.Object, _
                                 e As System.EventArgs) _
                                 Handles lblTotal.TextChanged

    ' This is part of my workaround that I describe in the comments section
    ' of this StackOverflow question.
    Parent.Focus()
End Sub

Private Sub nudQuantity_ValueChanged(sender As System.Object, _
                                     e As System.EventArgs) _
                                     Handles nudQuantity.TextChanged

    ' If the quantity changes, set the total price to reflect this.
    lblTotal.Text = (lblPrice.Text * nudQuantity.Value).ToString("C")
End Sub

Private Sub btnRemove_Click(sender As System.Object, _
                            e As System.EventArgs) _
                            Handles btnRemove.Click

    ' Remove the control from the parent design.
    Me.Parent.Controls.Remove(Me)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:17:05.467

由于您已经在 InvoiceEntry 中获得了 TextChanged 事件处理程序，因此您可以轻松地调用 InvoiceAdd 表单中的 UpdateTotal 函数

发票入口.vb

```
Private Sub lblTotal_TextChanged(sender As System.Object, _
                                 e As System.EventArgs) _
                                 Handles lblTotal.TextChanged

    ' This is part of my workaround that I describe in the comments section
    ' of this StackOverflow question.

    'Parent.Focus()
    'Me.Parent could give you the parent control which is pnlEntry not InvocieAdd form
    'you need to use FindForm here
    Dim MyParentForm As InvoiceAdd = CType(Me.FindForm(), InvoiceAdd)
    MyParentForm.UpdateTotal()
End Sub 
```

发票添加.vb

```
Public Sub UpdateTotal() Handles nudTaxRate.TextChanged, _
                                  pnlEntries.GotFocus

    'Change the function to Public

    Dim total As Decimal = 0

    If Entries IsNot Nothing Then

        For Each x In Entries
            total += CDec(x.lblTotal.Text)
        Next
        lblSubtotal.Text = total.ToString("C")
        lblTax.Text = (lblSubtotal.Text * (nudTaxRate.Text / 100)).ToString("C")

        Dim subtotal As Decimal = 0
        Dim tax As Decimal = 0
        If Not lblSubtotal.Text = Nothing And Not lblTax.Text = Nothing Then
            Decimal.TryParse(lblSubtotal.Text.Substring(1), subtotal)
            Decimal.TryParse(lblTax.Text.Substring(1), tax)
        End If

        lblGrandTotal.Text = (subtotal + tax).ToString("C")
    End If
End Sub 
```

# xcode - 启动图像不更新

> ID：10391559
> 
> 赞同：11
> 
> 时间：2012-04-30T22:49:30.717
> 
> 标签：xcode, image, launch

我正在使用 Xcode 4.3.1。添加启动图像非常简单——只需将图像拖到 Project->Summary->Launch Images 窗口即可。

所以我之前设置了一个启动图像并且它起作用了。但是当我拖动一张不同的图像并再次在我的 iPhone 上运行该应用程序时，启动图像仍然与旧图像相同。即使我从“启动图像”窗口中删除了启动图像，旧图像仍会在启动时显示。

我也尝试过清除构建。没用。

请帮忙。非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-10-12T10:28:32.380

我有同样的问题，但启动故事板。我不得不重命名我用作背景的图像。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T02:25:19.863

从设备中删除对 Xcode 4.5.1 没有帮助。构建过程正在缓存图像。有了[Zorayr](https://stackoverflow.com/users/577878/zorayr)对相关问题“ [Xcode, can't remove “Launch image” from project](https://stackoverflow.com/questions/6560568/xcode-cant-remove-launch-image-from-project)的回答的提示，我决定追踪缓存的图像并将其销毁，这样它就不会继续构建并显示在我的测试应用程序。

最终，我发现 Xcode（至少 4.5）默认在您的主目录的以下路径中构建图像：

~/Library/Developer/Xcode/DerivedData/< *ProjectName* >-< *uniqueID* >/Build/Products/< *Scheme* >-iphone{os,simulator}/< *ProjectName* >.app/

因此*，除了*从设备（或模拟器）中删除旧的应用程序映像之外，您还需要从构建缓存中删除映像文件。但只是做类似的事情

```
rm ~/Library/Developer/Xcode/DerivedData/MyProject-fpwnjlbayydgzxcdlyrwxrwntapr/Build/Products/Debug-iphoneos/MyProject.app/Default*.png 
```

不会**总能**解决你的问题。相反，您可能会在弹出窗口中看到一个奇怪的错误，上面写着“*已签名的产品已移动或删除。* ”（我现在无法重现它以获取确切的文本。）它不会出现在日志文件中，它只是挂起构建过程（在 Xcode 4.5.1 中）。为了解决这个问题，我删除了 < *ProjectName* >.app/ 目录树**和**兄弟目录树 < *ProjectName* >.app.dSYM/下的**所有**文件（看似）并行产品的符号表和签名文件。然后，构建过程将重新创建所有内容，不再抱怨。

 ***** * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-30T19:13:04.807

**什么在 iOS 10.2.1、iPhone 5s 硬件测试设备、Xcode 8.2.1 上对我有用**

我认为这与 Xcode 无关。测试设备似乎正在缓存 LaunchScreen.storyboard 图像。我需要通过按住主页 + 顶部按钮来重启我的设备。然后我重建，低并且看，图像更新了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T22:52:19.253

您应该从设备中删除该应用程序，然后再次启动它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-12T22:59:58.447

退出模拟器，然后再次运行项目。对于设备，如其他答案中所述，从设备中删除该应用程序，然后再次运行该应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-09T21:43:46.383

如果您使用的是资产目录，它还有助于从 Images.xcassets 文件中删除图像，然后在 General>Launch Images 中手动加载它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-19T13:58:20.447

这对我有用

1.  将新图像放入项目文件夹
2.  在设备/模拟器上运行应用程序
3.  以不同的名称将图像放入 xcassets
4.  再次运行应用程序，它可以工作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-07T20:36:13.510

我想我会为任何使用 XCode 10（也可能是 XCode 9）并在修改启动图像后遇到黑屏或白屏的人创建更新。就我而言，我必须为 iPhone XR、iPhone X、iPhone XS 和 iPhone XS Max 创建启动图像。

最初我只有一个示例白色发射图像用于测试。在为 XR 创建正确的图像并替换示例之后，更改将永远不会显示（在 XR 设备上）。我仍然会得到一个白屏。

我尝试了所有这些组合并失败了： - 事先删除应用程序。- 删除 xcode 派生数据并清理构建。-重新启动 Xcode 和设备和计算机。- 删除计算机上任何存在的白色启动图像。- 使用正确的文件名手动编辑新图像资产中的 JSON

XR 设备会持续显示白屏，在干预构建设置并迁移回图像包后，它会变成黑屏。

解决方案：最终它在我也用新的替换白色“XS”启动图像后开始工作。即使该设备是 XR。这是一个奇怪的解决方案，但像这样的解决方案多年来一直帮助发布图像。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-27T00:14:07.160

2020 年对我有用的步骤（xCode 版本 11.4.1）：

*   删除派生数据
*   重新启动 xCode
*   删除设备上的应用
*   重启设备
*   清理重建并运行

除了最后一步，我认为顺序无关紧要。这真的很烦人，我什至不确定它是否总是有效。在苹果方面相当可悲。祝大家好运！

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-09-01T13:20:03.613

对我来说，退出模拟器并重新启动它就可以了——我终于可以看到更新的启动图像了。Emil Korngold 上面的注释促使我尝试这个。****

# python - 文件未在 AWS Elastic Map Reduce 上缓存

> ID：10391565
> 
> 赞同：2
> 
> 时间：2012-04-30T22:49:55.037
> 
> 标签：python, hadoop, amazon-web-services, elastic-map-reduce

我在 AWS Elastic MapReduce 上运行以下 MapReduce：

> ./elastic-mapreduce --create --stream --name CLI_FLOW_LARGE --mapper s3://classify.mysite.com/mapper.py --reducer s3://classify.mysite.com/reducer.py --input s3n://classify.mysite.com/s3_list.txt --output s3://classify.mysite.com/dat_output4/ --cache s3n://classify.mysite.com/classifier.py#classifier.py --缓存存档 s3n://classify.mysite.com/policies.tar.gz#policies --bootstrap-action s3://classify.mysite.com/bootstrap.sh --enable-debugging --master-instance-type m1.large --slave-instance-type m1.large --instance-type m1.large

由于某种原因，cacheFile`classifier.py`似乎没有被缓存。`reducer.py`尝试导入时出现此错误：

```
 File "/mnt/var/lib/hadoop/mapred/taskTracker/hadoop/jobcache/job_201204290242_0001/attempt_201204290242_0001_r_000000_0/work/./reducer.py", line 12, in <module>
    from classifier import text_from_html, train_classifiers
ImportError: No module named classifier 
```

`classifier.py`绝对存在于`s3n://classify.mysite.com/classifier.py`. 对于它的价值，政策档案似乎加载得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T02:57:42.180

我不知道如何在 EC2 中解决这个问题，但我以前在传统的 Hadoop 部署中使用 Python 看到过这个问题。希望这一课能翻译过来。

我们需要做的是将目录添加`reduce.py`到 python 路径中，因为大概`classifier.py`也在那里。无论出于何种原因，这个地方不在 python 路径中，所以它无法找到`classifier`.

```
import sys
import os.path

# add the directory where reducer.py is to the python path
sys.path.append(os.path.dirname(__file__))
# __file__ is the location of reduce.py, along with "reduce.py"
# dirname strips the file name and only gives the directory
# sys.path is the python path where it looks for modules

from classifier import text_from_html, train_classifiers 
```

您的代码可能在本地工作的原因是您运行它的当前工作目录。就当前工作目录而言，Hadoop 可能不会从您所在的同一位置运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T19:27:41.873

从他的评论来看，orangeoctopus 值得称赞。必须附加工作目录系统路径：

`sys.path.append('./')`

此外，我建议任何与我有类似问题的人阅读这篇关于在 AWS 上使用分布式缓存的精彩文章： [https ://forums.aws.amazon.com/message.jspa?messageID=152538](https://forums.aws.amazon.com/message.jspa?messageID=152538)

# php - wordpress 和同位素砌体突然搞砸了

> ID：10391573
> 
> 赞同：0
> 
> 时间：2012-04-30T22:50:54.537
> 
> 标签：php, jquery, wordpress

目前，我的页面遇到了一个非常令人沮丧的问题。我正在使用 jquery isotope 制作一个包含在 div 中的水平图像网格，所有这些都在 wordpress 上运行。它已经完美地工作了很长一段时间。这是一个页面，显示某个类别的每个子类别的第一篇文章中的特色图像。为了使砌体网格正常工作，我一直在使用 php 从每个图像中检索图像大小，并将其作为内联 css 样式放入 div 标记中。正如我所说，它一直在完美地工作。

突然间，我在我的网站上遇到了非常糟糕的加载时间，一旦页面加载，网格就会变得一团糟。一些同位素元素将在其正确的位置，但有些将完全关闭。检查源代码，我可以看出“关闭”元素的尺寸没有打印在内联 css 中——它们应该通过 php 获得的数字。每个页面加载时哪些 div 关闭似乎是完全随机的。有时他们都会在正确的位置。但最近最常见的三点将关闭。

我刚刚升级到 wordpress 3.3.2——问题在升级前后都存在。

我的托管服务拒绝承认这是他们的问题。我很难相信这一点，因为当网站突然开始混乱时，我没有对任何内容进行任何更改。

即使升级到新版本，Wordpress 安装是否会突然出现问题？

这是我用来让整个网格正常工作的代码：

```
$args=array(
  'child_of' => '50',
  'orderby' => 'name',
  'order' => 'DESC'
  );
$categories=get_categories($args);
    foreach($categories as $category) {
      $posts=get_posts('showposts=1&cat='. $category->term_id);
      if ($posts) {
        foreach($posts as $post) {
          setup_postdata($post); 

        ?>
        <a class="thumblink" href="<?php the_permalink();?>">
        <?php
            if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
              $thumbsize = get_post_custom_values("thumbsize"); // retrieve the wished thumb size, designated in the custom field
              if ( $thumbsize[0] >= 1 && $thumbsize[0] <= 6 ) { // if the thumb size is in the 1 to 6...
          $imglink = wp_get_attachment_image_src( get_post_thumbnail_id(), $thumbsize[0] );
          $size = getimagesize($imglink[0]); // get the width and height of the image in order to work properly with masonry
          echo "<div class='thumbdiv masonrythumb hashover' style='width:$size[0]px;height:$size[1]px'>";
          echo "<div class='hoverobject'>"; //superimposes the content of the post on top of the image on hover
          the_content();
          echo "</div>";
            the_post_thumbnail( $thumbsize[0], array('class' => '' , 'title' => '' ) ); // use the designated thumb size
          echo "</div>";
            }
            }
    ?>
    </a>

        } // foreach($posts
      } // if ($posts
    } // foreach($categories 
```

谁能判断脚本是否存在明显问题导致整个页面加载速度过慢？

非常感谢所有可以帮助我的人。我把头发拉出来了；老实说，我不明白一些一直在工作的东西怎么会突然停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:15:56.123

听起来您的 foreach 语句一遍又一遍地运行（因此“加载”时间很慢），因此导致 DOM 输出出现意外结果。将结束括号（您的最后三行代码）放在 PHP 中，然后回显您的最后一个链接。像这样：

```
 echo "</a>";
  } // foreach $posts
 } // if $posts
} // foreach $categories
?> 
```

或者，您可以`<?php`在结束链接标签下方添加。让我知道这个是否奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:33:35.347

对于任何感兴趣的人，我似乎已经自己解决了这个问题。

我不太清楚一开始是什么把页面搞砸了，但我可以说这两个功能似乎`wp_get_attachment_image_src()`相互`getimagesize()`妨碍了。现在，正确阅读文档后，我意识到该`wp_get_attachment_image_src()`函数返回一个包含 img 源和宽度和高度的数组，所以我什至不需要该`getimagesize()`函数。

该站点现在可以快速加载，没有任何 DOM 混乱。

# svn - 源代码管理系统设置

> ID：10391582
> 
> 赞同：-1
> 
> 时间：2012-04-30T22:51:55.937
> 
> 标签：svn, tortoisesvn

我正在寻找一个好的源代码控制系统。我想使用 git，但我需要具有良好用户界面的东西。我知道 Tortoise SVN 有一个不错的用户界面。有没有其他像乌龟 SVN 那样有一个很好的用户界面的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T22:57:08.770

我强烈建议 GIT 优于 SVN，因为 GIT 更适合协作，并且在合并更改时也更好。

这里有一个关于如何设置 git 服务器的很好的教程：http: [//tumblr.intranation.com/post/766290565/how-set-up-your-own-private-git-server-linux](http://tumblr.intranation.com/post/766290565/how-set-up-your-own-private-git-server-linux)

它很简单

它可以在任何操作系统上设置。

麦克风

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T16:26:25.283

我自己使用乌龟，它真的很好，它刚刚进行了一个新的更新，这使得提交管理器更容易和更流畅地使用。绝对推荐大型团体使用 tortoiseSVN，小型团体使用 git。

# javascript - 仅在 Chrome 中出现 JavaScript 错误，在 Safari 中可以正常工作吗？

> ID：10391587
> 
> 赞同：2
> 
> 时间：2012-04-30T22:52:52.507
> 
> 标签：javascript, google-chrome, web-applications, iphone-web-app

当用户启动独立的 Web 应用程序时，我有以下代码在 iDevice 上设置数据库及其表。如果在带有 Safari 的设备上使用该代码可以正常工作，但如果它在 Chrome 中打开，则会引发以下错误

```
Uncaught Error: INVALID_STATE_ERR: DOM Exception 11 
```

除了错误之外，它还阻止其他功能工作，同样仅在 Chrome 中。这是代码，包括创建表的函数。我在 Chrome 指示错误的行的代码中添加了注释。

```
//this sets up the DB name global variable and uses it to open the DB
        var dbName = 'CBNapp',
        db = openDatabase(dbName, '1.0', dbName, 65536);// chrome error = UncaughtError: INVALID_STATE_ERR: DOM Exception 11 (anonymous function) line 43
//            db = openDatabase(dbName, '1.0' /*version*/, dbName, 65536 /*max size*/);
//opens the database when the document is loaded
$(document).ready(openCBNappDB);

function openCBNappDB(){
//this if statement checks to see if device supports offline storage
    if ( !window.openDatabase ) {
        $('add_note').innerHTML = "Browser does not support local storage."
        return;
    }
// create tables in the DB
    function dbTransaction(fn) {
       db.transaction(fn);
    }
    /*create 5 tables*/ //colums in tables are not correct as of apr 25 2012
    dbTransaction(
        function (tx) {
        tx.executeSql('CREATE TABLE CBNapp_Usage (key INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, MemberID TEXT NOT NULL DEFAULT "", NewKnife INTEGER NOT NULL DEFAULT 0, True INTEGER NOT NULL DEFAULT 0, Trivia INTEGER NOT NULL DEFAULT 0, Movies INTEGER NOT NULL DEFAULT 0, Jokes INTEGER NOT NULL DEFAULT 0, Musings INTEGER NOT NULL DEFAULT 0, Stories INTEGER NOT NULL DEFAULT 0);');
    tx.executeSql('CREATE TABLE CBNapp_Members (key INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, MemberID TEXT NOT NULL DEFAULT "", CBNname TEXT NOT NULL DEFAULT "", Community TEXT NOT NULL DEFAULT "", BirthDay TEXT NOT NULL DEFAULT "", BirthMonth TEXT NOT NULL DEFAULT "", Gender TEXT NOT NULL DEFAULT "Male", iOS TEXT NOT NULL DEFAULT "", Device TEXT NOT NULL DEFAULT "");');
    tx.executeSql('CREATE TABLE CBNapp_Scores (key INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, MemberID TEXT NOT NULL DEFAULT "", GameName TEXT NOT NULL DEFAULT "", TimesPlayed INTEGER NOT NULL DEFAULT 0, HiScore INTEGER NOT NULL DEFAULT 0 );');
    tx.executeSql('CREATE TABLE CBNapp_UserPrefs (key INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, MemberID TEXT NOT NULL DEFAULT "", TextSize INTEGER NOT NULL DEFAULT 14, AutoRetrieve INTEGER NOT NULL DEFAULT 0 );');
    tx.executeSql('CREATE TABLE CBNapp_Errors (key INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, MemberID TEXT NOT NULL DEFAULT "", code INTEGER NOT NULL, message TEXT NOT NULL );');
    }
);
} 
```

如果有人可以建议一个特定的解决方案来让它与 Chrome 和 Safari 一起正常工作，我们将不胜感激。

我确信我在脚本中也犯了许多其他错误。如果有人愿意花时间向我展示我应该如何改进它，我将非常感谢任何想法。我对此很陌生，请提出具体建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:28:10.637

好吧，在不知道 HTML 的情况下很难肯定地说，但我猜 chrome 没有分配给它的 window 对象的 openDataBase 方法，并且分支到一些错误的 JQuery：

```
$('add_note').innerHTML = "Browser does not support local storage." 
```

'add_note' 没有意义。`'.add_note'`如果 add_note 是一个类，它应该是`'#add_note'`一个 ID。

此外，由于它是 JQuery，它可能不会有 innerHTML 方法。假设 ID 的最快修复可能是：

```
$('#add_note')[0].innerHTML = "Browser does not support local storage." 
```

但如果它是像文本输入这样的表单元素，那可能会失败。

# nginx - 有什么可以用 nginx 模仿 apache 模块的 mod_suexec 行为吗？

> ID：10391600
> 
> 赞同：0
> 
> 时间：2012-04-30T22:54:58.527
> 
> 标签：nginx

我想让每个虚拟主机作为不同的所有者运行。有人告诉我，在 apache 中，您可以将 mod_suexec 配置为将每个站点文件夹作为文件夹的所有者运行。有什么东西可以做类似的事情，或者对 Nginx 来说更接近的事情吗？

我正在使用 NginX 1.0.15 运行 Arch Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:48:25.880

我将从[nginx FAQ](http://wiki.nginx.org/Faq#What_about_support_for_something_like_mod_suexec.3F)复制答案：

> 对 mod_suexec 之类的支持怎么样？
> 
> mod_suexec 是一个 Nginx 没有的问题的解决方案。在运行诸如 Apache 之类的服务器时，每个实例都会消耗大量 RAM，因此只有一个能够满足所有需求的单体实例变得很重要。使用 Nginx，内存和 CPU 利用率非常低，运行几十个实例都不是问题。
> 
> 与 Apache + mod_suexec 类似的 Nginx 设置是运行一个单独的 Nginx 实例作为 CGI 脚本用户（即在 Apache 下将被指定为 suexec 用户的用户），然后从主 Nginx 实例代理到该用户。
> 
> 或者，PHP 可以简单地通过 FastCGI 执行，它本身将在 CGI 脚本用户帐户下运行。（注意 mod_php - 模块 suexec 通常用于防御 - Nginx 不存在。）

# android - 列表视图的世界

> ID：10391603
> 
> 赞同：0
> 
> 时间：2012-04-30T22:55:21.050
> 
> 标签：android, listview

我是 Android 开发的初学者，我想了解如何创建更复杂的列表视图，就像您在 Google I/O 2010 中看到的那样，所以如果您有任何博客/书籍/网站/示例或任何东西其他可以帮助我了解这个世界的东西，对我有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:58:42.167

如果您使用 SDK 安装了 Eclipse，我建议您从 Android SDK Manager 下载 api 演示。那里有很多 ListView 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:23:00.187

我希望这些链接对您有所帮助：

[HowTo：一个 ListView 中的 ListView、Adapter、getView 和不同列表项的布局](http://android.amberfog.com/?p=296)

[使用自定义 ArrayAdapter 自定义 Android ListView 项](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

# ios - 从一个UITabbar项目更改为另一个时如何更新方向

> ID：10391604
> 
> 赞同：0
> 
> 时间：2012-04-30T22:55:34.190
> 
> 标签：ios, uitabbar

我的问题很简单：

*   我有一个带有 UITabBar 和 4 个 UITabBarItems 的视图，显示 4 个不同的子视图（4 个不同的 UIView 类）。
*   我希望前 3 个视图是纵向的，最后一个是横向或纵向的。
*   为此，我已经设置

    ```
    -(BOOL)shouldAutorotateToInterfaceOrientation(UIInterfaceOrientation)interfaceOrientation{
         if (myTabBar.selectedItem.tag==4){
             return YES;
         } else {
             return ((interfaceOrientation==UIInterfaceOrientationPortrait)|(interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown));
         }
     } 
    ```

...如果我在第四个视图中旋转屏幕，效果很好。

但...：

- 如果，当我在第四个视图横向时，并且我单击前三个 UITabBarItems 中的任何一个，我将移动到正确的视图，但方向仍然是横向，并且不会切换到纵向

注意：我在三个第一个视图类中的每一个中都包含了 -(BOOL)shouldAutorotateToInterfaceOrientation...，但它并没有改变任何事情。

换句话说：我的问题是视图方向在旋转设备后更新，而不是在设备旋转时更新，我点击另一个 UITabBarItem。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:58:08.140

考虑到这一点，我认为解决方案可能是向其他 3 个已加载但尚未收到“shouldAutorotateToInterfaceOrientation”消息的 UITabBar 视图触发 NSNotification 事件。

还有其他想法吗？

# c - 使用 openssl evp api(aes256cbc) 加密文件的问题

> ID：10391610
> 
> 赞同：2
> 
> 时间：2012-04-30T22:56:27.313
> 
> 标签：c, linux, encryption, openssl, aes

在这种情况下，我试图读取一个文件（.txt），并使用 openssl 的 EVP api 使用 AES256CBC 对其进行加密/解密。*(读取(plain.txt)->创建(encrypt.txt)->创建(decrypt.txt))*

```
# include <stdio.h>
# include <stdlib.h>
# include <openssl/evp.h>
# include <openssl/aes.h>
# include <sys/types.h>
# include <sys/stat.h>
# include <fcntl.h>
# include <unistd.h>
# include <string.h>
# include <assert.h>
# include <error.h>
# include "debug.h"
# define SIZE 32

char buf[SIZE];

int aes_init(unsigned char* pwd, unsigned int pwd_len, unsigned char * salt, EVP_CIPHER_CTX *e_ctx, EVP_CIPHER_CTX *d_ctx)
{
    int i, rounds =5;                   /* rounds */
    unsigned char key[32], iv[32];

    i = EVP_BytesToKey(EVP_aes_256_cbc(),EVP_sha1(),salt,pwd,pwd_len,rounds,key,iv);
    if(i != 32)
    {
      printf("\n Error,Incorrect key size generated:%d:\n",i);
      return -1;
    }

    EVP_CIPHER_CTX_init(e_ctx);
    EVP_EncryptInit_ex(e_ctx, EVP_aes_256_cbc(), NULL, key, iv);
    EVP_CIPHER_CTX_init(d_ctx);
    EVP_DecryptInit_ex(d_ctx, EVP_aes_256_cbc(), NULL, key, iv);

    return 0;
}

unsigned char* aes_encrypt(EVP_CIPHER_CTX *e,unsigned char * plain_text, unsigned int * len )    /* this function encryptes the  file:fd is passed as parameter */
{
    int ci_len = (*len) + AES_BLOCK_SIZE;
    int flen =0;
    unsigned char * cipher_text = malloc(ci_len);

    EVP_EncryptInit_ex(e, NULL, NULL, NULL, NULL);              /* allows reusing of e for multiple cipher cycles */
    EVP_EncryptUpdate(e, cipher_text, &ci_len, plain_text, *len);       /* Update cipher text */
    EVP_EncryptFinal_ex(e, cipher_text+ci_len, &flen);          /* updates the remaining bytes */
    *len = ci_len + flen;

    return cipher_text; 
}

unsigned char* aes_decrypt(EVP_CIPHER_CTX *e, unsigned char * c_text, unsigned int * len)
{
    int pi_len = (*len);
    int flen = 0;
    unsigned char * plain_text = malloc(pi_len);

    EVP_DecryptInit_ex(e, NULL, NULL, NULL, NULL);
    EVP_DecryptUpdate(e, plain_text, &pi_len, c_text, *len);
    EVP_DecryptFinal_ex(e, plain_text+pi_len, &flen);

    (*len) = pi_len + flen;
    return plain_text;
}

int main(int argc,char **argv)
{
    if(argc != 2)
    {
      perror("\n Error:\nCorrect Usage: Enter Password to be used");
      exit(-1);
    }

    EVP_CIPHER_CTX en,de;                   /* The EVP structure which keeps track of all crypt operations see evp.h for details */
    int in, out, fd, dec,i =0;                  /* fd for input and output files and random dev*/
    unsigned int pwd_len = strlen((const char *)argv[1]);           /* Length of the pwd supplied by the user */
    unsigned char *pwd =(unsigned char*) argv[1];           /* Pointer to the pwd supplied by the user */
    unsigned int rd= 0;
    unsigned char salt[8];
    unsigned char * encry = NULL, *decry = NULL;
    i =0;
    if((in = open("plain.txt",O_RDONLY)) == -1)          /* Opening a plain text file for encryption */
    {
      perror("\n Error,Opening file for reading::");
      exit(-1);
    }

    if((fd = open("/dev/random", O_RDONLY)) == -1)
    {
      perror("\n Error,Opening /dev/random::");
      exit(-1);
    }
    else
    {
      if(read(fd,salt,8) == -1)
      {
        perror("\n Error,reading from /dev/random::");
        exit(-1);
      }
    }

    if(aes_init(pwd,pwd_len,(unsigned char*) salt,&en,&de))     /* Generating Key and IV and initializing the EVP struct */
    {
      perror("\n Error, Cant initialize key and IV:");
      return -1;
    }

    if((out = open("encrypt.txt",O_RDWR|O_CREAT,0400 | 0200)) == -1)
    {
      dbug_p("ENC%d",out);
      perror("\n Error,Opening the file to be written::");
      exit(-1);
    }

    rd =0;
    while((rd = read(in,buf,SIZE)) >0)
    {
      dbug_p("\nREAD::%s::%d*\n",buf,rd);
      encry =   aes_encrypt(&en,(unsigned char*) buf, &rd);
      if((write(out,encry,rd)) != rd)
      {
        perror("\n Error,Required encrypted bytes not written::");
        exit(-1);
      }     
      free(encry);
    }

    rd =0;
    if((dec = open("dec22.txt",O_RDWR|O_CREAT,0400 | 0200)) == -1)
    {   
      dbug_p("dec%d",dec);
      perror("\n Error,Opening the decrypting o/p file::");
      exit(-1);
    }

    if((lseek(out,0,SEEK_SET)) != 0) perror("\n Error:setting lseek::");
    for(i=0;i<SIZE;i++) buf[i] =0;
    while((rd = read(out,dbuf,SIZE)) >0)
    {
      decry = aes_decrypt(&de,(unsigned char*) dbuf, &rd);
      if((write(dec,decry,rd)) != rd)
      {
        perror("\n Error,Required decrypted bytes not written::");
        exit(-1);
      }
      free(decry);
    }

    close(in);
    close(fd);
    EVP_CIPHER_CTX_cleanup(&en);
    EVP_CIPHER_CTX_cleanup(&de);
    return 0;
} 
```

我的问题是，当我解密一个加密文件时，我得到一个未正确解密的文件（例如，正确的字符串*垃圾*正确的字符串*垃圾*......）

```
abhi@ubuntu:~/mpro/EFF$ cat plain.txt 
Today is tuesday
tomorrow is wednesday
then thursday and friday and saturday
finally sunday 
```

**解密文件**

```
cat dec22.txt 
Today is tuesdayw)Q������O-%�A�8���R��.�O���and saturday
finally sunday 
```

这可能是什么原因。它是否也在阅读其他内容，或者我在某处犯了任何愚蠢的错误。

***编辑***：如果我只是加密一个数组（尝试使用 36char 长），它会正确加密和解​​密而不会打印任何垃圾。

我想我缺少（不处理）一些 *nix 文件结构细节..?? 或者有没有更好的方法对文件进行这种加密。？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T23:14:24.680

我认为你的分析是错误的。这个循环是有问题的：

```
while((rd = read(in,buf,SIZE)) >0)
{
    dbug_p("\nREAD::%s::\n",buf);
    encry = aes_encrypt(&en,(unsigned char*) buf, &rd);
    dbug_p("\n EN::%s::\n",encry);
    decry = aes_decrypt(&de,(unsigned char*) encry,&rd);
    dbug_p("\n DE::%s::\n",decry);

            free(encry);
        free(decry);
} 
```

首先是因为您使用 which 打印`%s`需要一个零终止符。然而，加密/解密数据不是零终止的。相反，您应该`rd`使用循环打印字符`for (i = 0; i < rd; i++) printf("%02x ");`- 这就是您对问题的分析可能存在缺陷的原因。

其次，我假设在您的实际问题中，您`SIZE`一次读取字节并将它们`aes_decrypt()`分别发送。这将失败，因为`EVP_DecryptFinal_ex()`调用得太早（在读取所有加密块之前）。你有两个选择。`EVP_DecryptUpdate()`您可以在每次循环迭代中发送读取的字节，并`EVP_DecryptFinal()`在完成循环后调用（并在循环之前相应地初始化），或者您首先将整个文件读入缓冲区，然后`aes_decrypt()`一次性发送。

或者换句话说，您需要将`aes_encrypt()`稍后产生的整个数据块发送到`aes_decrypt()`. 您不能将它们发送到不同的块中，除非您将功能拆分并在单独的块上使用 EVP“更新”功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T01:38:31.477

```
while((rd = read(in,buf,SIZE)) >0)
{
    dbug_p("\nREAD::%s::%d*\n",buf,rd);
    encry = aes_encrypt(&en,(unsigned char*) buf, &rd); 
```

和，

```
unsigned char* aes_encrypt(EVP_CIPHER_CTX *e,unsigned char * plain_text, unsigned int * len )    /* this function encryptes the  file:fd is passed as parameter */
  {
int ci_len = (*len) + AES_BLOCK_SIZE;
int flen =0;
unsigned char * cipher_text = malloc(ci_len);

EVP_EncryptInit_ex(e, NULL, NULL, NULL, NULL);              /* allows reusing of e for multiple cipher cycles */
EVP_EncryptUpdate(e, cipher_text, &ci_len, plain_text, *len);       /* Update cipher text */
EVP_EncryptFinal_ex(e, cipher_text+ci_len, &flen);          /* updates the remaining bytes */ 
```

您`EVP_EncryptFinal_ex`多次调用。它应该在最后只被调用一次。您如何进行解密也是如此。

这是手册页中有关如何进行加密的简单示例。具有类似的解密功能，它应该可以工作。

```
int do_crypt(char *outfile)
       {
       unsigned char outbuf[1024];
       int outlen, tmplen;
       /* Bogus key and IV: we'd normally set these from
        * another source.
        */
       unsigned char key[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15};
       unsigned char iv[] = {1,2,3,4,5,6,7,8};
       char intext[] = "Some Crypto Text";
       EVP_CIPHER_CTX ctx;
       FILE *out;
       EVP_CIPHER_CTX_init(&ctx);
       EVP_EncryptInit_ex(&ctx, EVP_bf_cbc(), NULL, key, iv);

       if(!EVP_EncryptUpdate(&ctx, outbuf, &outlen, intext, strlen(intext)))
               {
               /* Error */
               return 0;
               }
       /* Buffer passed to EVP_EncryptFinal() must be after data just
        * encrypted to avoid overwriting it.
        */
       if(!EVP_EncryptFinal_ex(&ctx, outbuf + outlen, &tmplen))
               {
               /* Error */
               return 0;
               }
       outlen += tmplen;
       EVP_CIPHER_CTX_cleanup(&ctx);
       /* Need binary mode for fopen because encrypted data is
        * binary data. Also cannot use strlen() on it because
        * it wont be null terminated and may contain embedded
        * nulls.
        */
       out = fopen(outfile, "wb");
       fwrite(outbuf, 1, outlen, out);
       fclose(out);
       return 1;
       } 
```

以下示例正在读取文件作为您的情况。查看如何使用`Update`（多次调用）和`Final`（最后一次）例程。

```
int do_crypt(FILE *in, FILE *out, int do_encrypt)
        {
        /* Allow enough space in output buffer for additional block */
        inbuf[1024], outbuf[1024 + EVP_MAX_BLOCK_LENGTH];
        int inlen, outlen;
        /* Bogus key and IV: we'd normally set these from
         * another source.
         */
        unsigned char key[] = "0123456789";
        unsigned char iv[] = "12345678";
        /* Don't set key or IV because we will modify the parameters */
        EVP_CIPHER_CTX_init(&ctx);
        EVP_CipherInit_ex(&ctx, EVP_rc2(), NULL, NULL, NULL, do_encrypt);
        EVP_CIPHER_CTX_set_key_length(&ctx, 10);
        /* We finished modifying parameters so now we can set key and IV */
        EVP_CipherInit_ex(&ctx, NULL, NULL, key, iv, do_encrypt);
        for(;;)
                {
                inlen = fread(inbuf, 1, 1024, in);
                if(inlen <= 0) break;
                if(!EVP_CipherUpdate(&ctx, outbuf, &outlen, inbuf, inlen))
                        {
                        /* Error */
                        EVP_CIPHER_CTX_cleanup(&ctx);
                        return 0;
                        }
                fwrite(outbuf, 1, outlen, out);
                }
        if(!EVP_CipherFinal_ex(&ctx, outbuf, &outlen))
                {
                /* Error */
                EVP_CIPHER_CTX_cleanup(&ctx);
                return 0;
                }
        fwrite(outbuf, 1, outlen, out);
        EVP_CIPHER_CTX_cleanup(&ctx);
        return 1;
        } 
```

# powershell - 单行 PowerShell 脚本

> ID：10391613
> 
> 赞同：5
> 
> 时间：2012-04-30T22:56:50.507
> 
> 标签：powershell

我创建了这个基本的单行 PowerShell 脚本，如果我运行`ad`AD 的 cmdlet，然后运行其余的查询，就会执行该脚本。但是尝试将它们一起运行，它似乎只加载了 cmdlet，并没有执行 cmd 的其余部分。

```
powershell.exe -command "&{Import-Module ActiveDirectory; Get-AdGroup -Server DC.Mydomain.com -filter 'name -eq "xxxx"'| set-Adgroup -Replace @{wWWHomePage='10.24.218.194'}}" 
```

为什么它不像这样一起运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T18:09:51.137

答案是转义双引号：

```
powershell.exe -noprofile -command "&Import-Module ActiveDirectory; Get-AdGroup -Server server.mydomain.com -filter 'name -eq *\"xxxx\"*'| set-Adgroup -Replace @{wWWHomePage='10.10.10.10'}" 
```

基本上，我从 SQL 运行它来更新 DSADD 无法访问的 ActiveDirectory 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:58:16.240

它看起来像一个引用问题。尝试用大括号替换周围的过滤器引号：

```
-filter {name -eq "xxxx"} 
```

为了避免这种情况，当你有很长的命令要执行时，我建议你把命令放在一个脚本文件中，并将它的路径传递给`-File`参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-26T05:45:29.190

```
# Start-Run, type:
powershell.exe -noprofile -command "[guid]::newguid()|Set-Clipboard" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T22:59:13.343

如果对复杂命令有疑问，您可以尝试使用 Base64 对它们进行编码并使用`-EncodedCommand`. 参见`powershell /?`示例。

当您直接在 PowerShell 中输入该行时，它是否按预期工作？

# php - 不能在 PHP 类中使用“const”和“define”

> ID：10391619
> 
> 赞同：3
> 
> 时间：2012-04-30T22:57:19.893
> 
> 标签：php

我正在把头发拉出来。PHP 很新，但这太基本了，我就是不知道问题出在哪里。以下面的代码片段为例：

```
class LG_Activity_Processor {
// Activity Types
const STATUS_DRAFT = 'draft';
const STATUS_PUBLISH = 'publish';
...
private $STATUS_FUTURE = 'future';
define ("STATUS_PRIVATE" , 'private'); 
```

我最初打算只使用“const”构造，因为变量在运行时之前已经完全定义，我只是认为语法比那个丑陋的“define”更漂亮。问题是虽然**const**的定义没有给出错误，但每当我稍后在类中引用该常量时，我​​都会收到以下错误消息：

> PHP 注意：使用未定义的常量 STATUS_PUBLISH - 假定为 'STATUS_PUBLISH'

嗯？为了清楚起见，这是我用来引用“const”的语法：

```
$core_fields ['post_status'] = STATUS_PUBLISH; 
```

我什至尝试过：

```
$core_fields ['post_status'] = $this->STATUS_PUBLISH; 
```

没爱。然后我进入了绝望的状态，最终尝试了“define”。相同的调用语法，但我将定义语法更改为如上所示的“STATUS_PRIVATE”。这让事情变得很有价值，因为我现在在定义行上有一个致命错误，看起来像这样：

```
PHP Parse error:  syntax error, unexpected T_STRING, expecting T_FUNCTION 
```

我放弃。我最后只是将变量定义为私有变量（如 STATUS_FUTURE 的示例中），然后将其称为：

```
$core_fields ['post_status'] = $this->STATUS_PUBLISH; 
```

这就像你所期望的那样有效，但我不禁觉得我被骗了，没有以正确的方式做这件事。关于如何使我的代码再次完整的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T22:59:23.000

`LG_Activity_Processor::STATUS_DRAFT`访问它时应该这样做。

查看 PHP 手册，它为您提供了清晰的示例。

[http://php.net/manual/en/language.oop5.constants.php](http://php.net/manual/en/language.oop5.constants.php)

# java - JNI 方法帮助。具有目标偏移量的 Memcpy

> ID：10391620
> 
> 赞同：1
> 
> 时间：2012-04-30T22:57:33.140
> 
> 标签：java, android, java-native-interface, buffer, native

我正在为 FloatBuffer.put() 制作 Jni 替换方法，因为在 Android 2.x 及更低版本上，FloatBuffer.put() 方法的实现效率低下，如此[处](http://www.badlogicgames.com/wiki/index.php/Direct_Bulk_FloatBuffer.put_is_slow)所述。但是，我希望能够将给定的 src 浮点数组放置到 dst 浮点缓冲区中的指定偏移量，就像使用 position() 和 put() 一样。考虑到这一点，我实现了这个 JNI 方法。

```
JNIEXPORT void JNICALL Java_com_voidseer_voidengine_mesh_Vertices_PutFloatsJni
(JNIEnv *env, jclass, jfloatArray src, jobject dst, jint numFloats, jint dstOffset )
{
        float* pDst = (float*)env->GetDirectBufferAddress( dst );
        float* pSrc = (float*)env->GetPrimitiveArrayCritical(src, 0);

        memcpy( pDst + (dstOffset << 2), pSrc, numFloats << 2 );

        env->ReleasePrimitiveArrayCritical(src, pSrc, 0);
} 
```

然而，似乎有些不对劲。我的游戏引擎没有像它应该的那样绘制我的实体。有人能发现我在这个函数中做错了什么吗？

谢谢

编辑：

刚刚让它与这个代码一起工作。

```
JNIEXPORT void JNICALL Java_com_voidseer_voidengine_mesh_Vertices_PutFloatsJni
(JNIEnv *env, jclass, jfloatArray src, jobject dst, jint numFloats, jint dstOffset )
{
        float* pDst = (float*)env->GetDirectBufferAddress( dst );
        float* pSrc = (float*)env->GetPrimitiveArrayCritical(src, 0);

        memcpy( &pDst[dstOffset], pSrc, numFloats << 2 );

        env->ReleasePrimitiveArrayCritical(src, pSrc, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:58:51.613

让它与这个代码一起工作。

```
JNIEXPORT void JNICALL Java_com_voidseer_voidengine_mesh_Vertices_PutFloatsJni
(JNIEnv *env, jclass, jfloatArray src, jobject dst, jint numFloats, jint dstOffset )
{
        float* pDst = (float*)env->GetDirectBufferAddress( dst );
        float* pSrc = (float*)env->GetPrimitiveArrayCritical(src, 0);

        //memcpy( pDst + (dstOffset << 2), pSrc, numFloats << 2 );
        memcpy( &pDst[dstOffset], pSrc, sizeof(float) * numFloats );

        env->ReleasePrimitiveArrayCritical(src, pSrc, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:41:42.430

```
memcpy( pDst + (dstOffset << 2), pSrc, numFloats << 2 ); 
```

第一个`<< 2`是不正确的。去掉它。C 编译器将根据 sizeof *pDst 自动调整增量。

编辑：第二班应该是`* sizeof float`.

您链接到的文章的有效性及其非工作代码的基准非常可疑。

# c# - 跟踪 SQL 异常

> ID：10391622
> 
> 赞同：0
> 
> 时间：2012-04-30T22:57:50.260
> 
> 标签：c#, asp.net, sql-server-2005, debugging, iis

我在客户端的生产服务器上发生了一个 SQL 异常（我在其中几乎没有权限）。

我无法在本地复制问题，但是有什么好的方法可以获取并找出正在调用的 sql 异常以及使用哪个 sql？我可以重新部署并有权更改源代码。

我的堆栈跟踪是这样的：

```
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace:
[SqlException (0x80131904):  ]

System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +1950954
System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +4846939
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194
System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2392
System.Data.SqlClient.SqlDataReader.CloseInternal(Boolean closeReader) +169
System.Data.SqlClient.SqlDataReader.Close() +96
System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +292
System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +954
System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32
System.Data.SqlClient.SqlCommand.ExecuteScalar() +139
Output.RunTable(String outputType, String _outputDataType) +1106
Output.ProcessPage() +33
Output.Page_Load(Object sender, EventArgs e) +6466
System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
System.Web.UI.Control.OnLoad(EventArgs e) +99
System.Web.UI.Control.LoadRecursive() +50
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T23:05:08.997

尝试使用以下方法收集有关异常的更多信息（取自 MSDN[文章](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception%28v=VS.100%29.aspx)）：

```
 try
    {
        command.Connection.Open();
        command.ExecuteNonQuery();
    }
    catch (SqlException ex)
    {
        for (int i = 0; i < ex.Errors.Count; i++)
        {
            errorMessages.Append("Index #" + i + "\n" +
                "Message: " + ex.Errors[i].Message + "\n" +
                "LineNumber: " + ex.Errors[i].LineNumber + "\n" +
                "Source: " + ex.Errors[i].Source + "\n" +
                "Procedure: " + ex.Errors[i].Procedure + "\n");
        }
        Console.WriteLine(errorMessages.ToString());
    } 
```

# html - 在文本下放置一个 CSS 按钮

> ID：10391623
> 
> 赞同：0
> 
> 时间：2012-04-30T22:57:55.313
> 
> 标签：html, css

我尝试使用 css 在文本下方放置一个按钮，但我尝试了不同的解决方案（
，空白：pre-wrap;..），但没有任何改变，我在文本附近获得按钮（确定）。

![在此处输入图像描述](../Images/e5092dc88a1a6f01a957f9eacd2f1a2a.png) 这是代码：

CSS：

```
 /* Styles for game Help popup */
    #popupHelp {
font-family: 'Orbitron', serif;
font-size: 20px;
font-weight: 600;     
text-shadow: 0px 1px 2px #fff;

color: #222;

position: absolute;   
width: 100%;
height: 100%;
top: 0;
left: 0;

background: rgba(0,0,0,.5);

display: -webkit-box;
-webkit-box-pack: center;
-webkit-box-align: center;          

-webkit-transition: all .5s ease-in;}

    #popupHelp  h1 {
font-weight: 400;}

    #popup-box {
width: 400px;
height: 400px;
background: #ccc url(../images/popup_bg.jpg);

border-radius: 10px;

position: relative;

-webkit-box-shadow: 0 5px 5px #333;

display: -webkit-box;
-webkit-box-pack: center;
-webkit-box-align: center;

-webkit-transition: all .5s ease-in;}

     #popup-box small {
font-size: .6em;}

     /* the type of OK button */
     #popup-box a.buttonOk {
 background: white;
border-radius: 5px;
display: inline;
font-size: 30px;
margin: 230px auto 0;
padding: 10px;
width: 150px;
border: 3px solid #006438;
color:#006438;
text-decoration:none;}

    #popup-box a.buttonOk:hover {
background: #006438;
color:#fff;
text-decoration:none;} 
```

HTML：

```
<section id="popupHelp"  class="hide">
       <div id="popup-bg"></div>
       <div id="popup-box">

       Cards are laid out in a grid face down,
       and players take turns flipping pairs of cards over.
       On each turn, the player will first turn one card over, 
       then a second. If the two cards match, 
       the player scores one point,
       the two cards are removed from the game, 
       and the player gets another turn. 
       If they do not match, the cards are turned back over.

       <div> <p><a id="ok" class="buttonOk" href="">OK</a></p      
               </div>

       </div>

   </section> 
```

任何想法请提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:08:09.070

快速浏览最简单的选项似乎是简单地将按钮移到弹出框 div 之外。

```
<section id="popupHelp"  class="hide">
       <div id="popup-bg"></div>
       <div id="popup-box">
       Cards are laid out in a grid face down,
       and players take turns flipping pairs of cards over.
       On each turn, the player will first turn one card over,
       then a second. If the two cards match,
       the player scores one point,
       the two cards are removed from the game,
       and the player gets another turn.
       If they do not match, the cards are turned back over.
       </div>
           <div><p><a id="ok" class="buttonOk" href="">OK</a></p>    
       </div>
</section> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:07:56.447

你试过拿出来`<div>`吗？

你也在结尾处缺少一个“>”

```
<p><a id="ok" class="buttonOk" href="">OK</a></p> 
```

# android - android如何定义应用程序的最大堆大小？

> ID：10391625
> 
> 赞同：2
> 
> 时间：2012-04-30T22:58:17.833
> 
> 标签：android

你能告诉我android如何定义应用程序的最大堆大小吗？
我得到这个：

> W/dalvikvm(2306): 58503184 字节分配超过了 50331648 字节最大堆大小

我想知道android如何/在哪里定义最大堆大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:07:11.817

它因设备而异。

[您可以通过运行getMemoryClass()](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)来获取设备的每个应用程序的大致内存类别

# mysql - 我的 SQL 数据库错误

> ID：10391628
> 
> 赞同：0
> 
> 时间：2012-04-30T22:58:30.330
> 
> 标签：mysql, drupal

我正在使用 Mysql（我在 Mac OS X 上）运行一个成功的（drupal）站点，直到我突然开始收到以下错误：“PDOException: SQLSTATE[HY000] [2002] Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) in db_table_exists()"

我不知道这意味着什么或如何解决它，但是当我访问 phpmyadmin 时，我收到以下消息：“#2013 - Lost connection to MySQL server at 'reading initial communication packet', system error: 61”

@Mitch：我使用 acquia drupal dev 桌面堆栈安装了它，尽管我也安装了 MAMP。我尝试使用这些程序重新启动服务器，这是我得到的错误（上图）。您能否提供更详细的说明？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:39:39.230

您可能需要在 my.conf 中注释掉绑定地址。

编辑：不，认真的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:00:22.703

这意味着您的数据库已关闭（或崩溃）。您需要重新启动它。这将根据您安装 MySQL 的方式而有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-12T13:11:31.380

> SQLSTATE[HY000] [2002] 无法通过套接字 ' `/tmp/mysql.sock`'连接到本地 MySQL 服务器

表示无法通过套接字文件连接 MySQL。

检查是否`/tmp/mysql.sock`存在（包括权限），如果不存在，请检查`my.cnf`它在哪里（或运行`mysql_config --socket`）。

因此，您可以创建符号链接，也可以在文件中指定`unix_socket`路径( )。`settings.php``'unix_socket' => '/tmp/mysql.sock',`

# c# - 数组在不相关的对象中发生变化

> ID：10391629
> 
> 赞同：-1
> 
> 时间：2012-04-30T22:58:35.330
> 
> 标签：c#, arrays

对于我的年终项目，我需要开发一个图像处理和人工智能应用程序。

我的图像处理已经完成，所以我正在转向人工智能。但是我这里有一个问题。

我将尝试描述这里的情况。

对于正确的图像处理，我需要一个可以通过跳棋规则验证棋盘的 AI。所以我需要用最后一个已知状态检查比赛场地的当前状态。

因此，为此我创建了一个带有`currentBoard`二维数组的对象，以及一个使用`currentBoard`（= 最后已知状态）验证板的原始输入的方法。

然而，当另一个对象——我的图像处理对象——用他的方法完成时，它会改变`currentBoard`我的 AI 对象中的数组。

这与我在主窗体中创建的新数组相同。我认为这是堆/堆栈的原因。

我希望我的问题清晰易懂。我知道我不是最擅长描述情况的，所以当你不完全理解某个部分时请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T01:03:57.960

数组是引用类型，因此，正如您所发现的，在一个位置更改数组内容将更改任何其他包含对同一对象的引用的代码。

为避免更改数组，您应该获取二维数组的深层副本并使用该副本。请注意，我们必须对数组及其内部数组进行深拷贝：

```
 int[][] original = {new[] {1,2,3}, new[] {4,5,6}};

        int[][] deepCopy = new int[original.Length][];

        for (int index = 0; index < original.Length; index++)
        {
            var row = original[index];
            int[] rowCopy = new int[row.Length];
            row.CopyTo(rowCopy, 0);

            deepCopy[index] = rowCopy;
        } 
```

您还可以使用一些简单的 linq 产生相同的结果：

```
int[][] deepCopyLinq = original.Select(x => x.ToArray()).ToArray(); 
```

# php - PHP 邮件头在正文中发送

> ID：10391632
> 
> 赞同：2
> 
> 时间：2012-04-30T22:58:46.587
> 
> 标签：php, email

```
function sendEmail($address,$subject,$message)
{
    $headers = "Reply-To: miloAds Team <admin@miloads.com>\r";
    $headers .= "Return-Path: miloAds Team <admin@miloads.com>\r";
    $headers .= "From: miloAds Team <admin@miloads.com>\r"; 
    $headers .= "Organization: Milonas Media LLC\r";
    $headers .= "MIME-Version: 1.0\r";
    $headers .= "Content-type: text/plain; charset=iso-8859-1\r";
    $headers .= "X-Priority: 3\r";
    $headers .= "X-Mailer: PHP". phpversion() ."\r";

    mail($address, $subject, $message, $headers); 
} 
```

发送电子邮件时，标题出现在正文中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:03:38.217

尝试将每个`\r`转义更改为`\r\n`，看看是否有帮助。

Quoth [PHP手册](http://www.php.net/manual/en/function.mail.php)：

> **附加标题**（可选）
> 
> ```
> String to be inserted at the end of the email header.
> 
> This is typically used to add extra headers (From, Cc, and Bcc).
> Multiple extra headers should be separated with a CRLF (\r\n). 
> ```

确保*也不*包括最后一个标题的尾随`\r\n`。

还要确保从 中删除任何换行符，`$subject`因为这可能会导致问题。看看这些是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:03:20.210

添加`\n`到`\r`, 即`\r\n`并删除最后一个：

```
function sendEmail($address,$subject,$message)
{
    $headers  = "MIME-Version: 1.0\r\n";
    $headers .= "Content-type: text/plain; charset=iso-8859-1\r\n";
    $headers .= "From: miloAds Team <admin@miloads.com>\r\n"; 
    $headers .= "Reply-To: miloAds Team <admin@miloads.com>\r\n";
    $headers .= "Organization: Milonas Media LLC\r\n";
    $headers .= "X-Priority: 3\r\n";
    $headers .= "X-Mailer: PHP". phpversion();

    mail($address, $subject, $message, $headers); 
} 
```

# c# - 从 NUNIT 项目调用 ConfigurationManager 代码失败

> ID：10391633
> 
> 赞同：0
> 
> 时间：2012-04-30T22:58:50.867
> 
> 标签：c#, tdd, nunit

在我的 C# 类项目中，我有一个助手类，它具有以下属性

```
public class Helper
{
    public string ConnectionString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString;
        }
    }
} 
```

当我从 NUNIT 项目调用 Helper 类并显示错误消息时，我的以下测试失败：Failure: **System.NullReferenceException : Object reference not set to an instance of an object。**

```
 [Test]
    public void connection_string_exists()
    {
        string connection = new Helper().ConnectionString;
        Assert.NotNull(connection);
    } 
```

如果我从 asp.net 项目运行代码**new Helper().ConnectionString行，那么它可以工作。**为什么测试失败？

请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:57:03.227

我怀疑您的 Nunit 测试是不同项目的一部分，当您运行测试时，ConfigurationManager 会查看测试项目的配置文件，但找不到“MyConnectionString”

# python - 正则表达式包含“时间”但不包含“时钟”

> ID：10391635
> 
> 赞同：2
> 
> 时间：2012-04-30T22:59:10.563
> 
> 标签：python, regex

**免责声明：**我知道可以使用“in”和“not in”，但由于技术限制，我需要使用正则表达式。

我有：

```
a = "digital clock time fan. Segments featuring digital 24 hour oclock times. For 11+"
b = "nine times ten is ninety" 
```

我想根据包含“时间”而不是“时钟”进行匹配，所以 a 和 b 通过正则表达式，只有 b 通过

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T23:05:51.083

您可以为此使用[负前瞻：](http://www.regular-expressions.info/lookaround.html)

```
^(?!.*\bo?clock\b).*\btimes\b 
```

解释：

```
^                 # starting at the beginning of the string
(?!               # fail if
   .*\bo?clock\b    # we can match 'clock' or 'oclock' anywhere in the string
)                 # end if
.*\btimes\b       # match 'times' anywhere in the string 
```

is 用于单词边界，因此`\b`您仍然可以匹配类似的字符串，`'clocked times'`但对于类似 . 的字符串会失败`'timeshare'`。`\b`如果您不想要这种行为，您可以删除正则表达式中的所有内容。

例子：

```
>>> re.match(r'^(?!.*\bo?clock\b).*\btimes\b', a)
>>> re.match(r'^(?!.*\bo?clock\b).*\btimes\b', b)
<_sre.SRE_Match object at 0x7fc1f96cc718> 
```

# c# - C# 中的蓝牙支持

> ID：10391642
> 
> 赞同：4
> 
> 时间：2012-04-30T22:59:59.440
> 
> 标签：c#, bluetooth

我正在寻找 C# 的蓝牙堆栈，它允许我将音频从我的手机路由到我的计算机，以及使用我的计算机上的麦克风（Windows 7）作为我手机上的电话呼叫的输入设备。我看过 32Feet.NET，但它似乎不支持音频通道。如果我在这方面错了，请有人纠正我。否则，是否有可用于蓝牙支持的 C# 替代库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:49:31.760

恐怕这可能并不能真正回答您的问题，但可能会增加一些替代观点：您尝试解决的问题似乎受到标准蓝牙音频配置文件的支持。因此，它们有可能由操作系统（或其他供应商）的蓝牙堆栈以透明的方式提供，即作为系统声卡之类的音频设备。

如果没有迫切需要自定义实现这些蓝牙配置文件的原因，您最好寻找 .NET 方法来配置您的代码用于音频输入/输出的音频设备。然后，您将以与访问其他音频设备相同的方式使用蓝牙音频，基本上减少了将音频从一个音频设备（声卡）代理到另一个（蓝牙音频）的代码。

# html - 如何在所有浏览器/打印机上打印完全相同的网页？

> ID：10391645
> 
> 赞同：1
> 
> 时间：2012-04-30T23:00:30.380
> 
> 标签：html, css, printing, cross-browser

好的，所以我很确定这甚至是不可能的，但是我有一个朋友，他的客户基本上是在求他回答这个问题，所以我告诉他我会从 SO 的友好人士那里得到一些意见。

他的客户对跨所有浏览器（IE7+、FF、Chrome 和 Safari）的像素精确用户界面设计非常挑剔。他们在其他国家有一群人，他们什么都不做，只是坐在那里测量以确保一切都符合他们的 UX 风格指南，直到所有浏览器/版本中的像素（字体、一切之间的间距、边距等）。

话虽如此，他们的下一个要求是他们想要打印行车路线，但他们的 UX 要求对于打印同样严格。他们希望所有页面上的边距完全相同，元素之间的间距相同，等等。换句话说，打印输出应该完全相同，直到像素，无论您使用哪个浏览器或打印机打印on（你不高兴这不是你的客户吗）？:)

不，他们不想与 PDF 有任何关系，哈哈。

我的问题是：这甚至可能吗？如果可能的话，您能否指出一些我们可以查看的在线参考资料？每台打印机不会根据默认设置渲染一些不同的东西吗？在打印方面，这里没有开发人员无法控制的事情吗？我和我的同事都没有被要求在不同的浏览器/打印机上创建如此精确的东西，所以我想在这里得到一些输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:08:35.623

将所有内容渲染为图像（因为您说没有 PDF）？

实际上，这是一个不合理的要求。您可以为不同的媒体创建样式，并使用 CSS 重置和 javascript 处理浏览器差异，但您将始终拥有不同的屏幕分辨率或屏幕类型（想到 eInk kindle）以及使用不同墨水或不同类型打印机的打印机。

# cygwin - 未将环境变量传递给 CruiseControl，特别是来自 Cygwin 的“nodosfilewarnings”ENV 变量

> ID：10391647
> 
> 赞同：2
> 
> 时间：2012-04-30T23:00:38.433
> 
> 标签：cygwin, windows-server-2008, cruisecontrol.net

我有一个别人创建的 Perl 程序，我正在调用 CruiseControl。该程序使用 Cygwin 调用 Unix 命令。但是，每次 Perl 程序使用类似 DOS 的地址调用类似 Unix 的命令时，我都会收到众所周知的错误：

```
cygwin warning:
   MS-DOS style path detected: E:\regression
   Preferred POSIX equivalent is: /cygdrive/e/regression
   CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
     http://cygwin.com/cygwin-ug-net/using.html#using-pathnames 
```

我已将用户变量和系统变量都设置`CYGWIN`为`nodosfilewarning`. 当我从命令行运行程序时，这消除了错误，但是当从批处理文件作为自动化进程调用时，CruiseControl 中仍然会出现错误。我已经从桌面和命令行调用了批处理文件并以管理员身份运行。没有什么变化。

其他注意事项

*   出于这个问题的目的，我无权访问 Perl 程序
*   我正在尝试返回 Cygwin 1.5.*，但由于我使用的是 Server 2008，因此遇到了兼容性问题
*   这发生在其中一台分布式服务器上，而不是运行 Webdashboard 的主服务器上。
*   我在某处读到此问题可能源于调用 CruiseControl 的不同用户，但***应***通过将其设置为 ENV 系统变量来解决此问题
*   是否可以修改注册表以设置 ENV 变量？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:06:38.103

如果 CruiseControl 通过 ssh 连接到服务器，请重新安装并在安装期间提示输入环境变量时`sshd`显式包含。`nodosfilewarning``CYGWIN`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:27:46.267

我这样做的方式是这样的

```
printf 'export CYGWIN=nodosfilewarning' >> ~/.bash_profile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T19:28:23.777

使用修改后的环境重新安装将起作用，但如果您不想或无法重新安装，另一种方法是更改​​注册表而不是重新安装服务。

请参阅：[检测到 CYGWIN windows cygrunsrv sshd 服务器和 MS-DOS 样式路径](https://stackoverflow.com/questions/20201490/cygwin-windows-cygrunsrv-sshd-server-and-ms-dos-style-path-detected)

# ruby - 为什么这个 Ruby 代码会返回对象 ID 以及我正在调用的方法？

> ID：10391652
> 
> 赞同：2
> 
> 时间：2012-04-30T23:01:24.553
> 
> 标签：ruby

我目前正在做实用的工作室课程，这是我为其中一个练习编写的一些代码。当我运行代码时，除了我打算调用的方法之外，我还获得了一个对象 ID。该练习创建了一个游戏，您可以在其中使用 blam 或 w00t 方法增加或减少玩家的健康状况。

```
 class Player ##creates a player class
attr_accessor :fname, :lname, :health
def initialize fname, lname, health=100
 @fname, @lname, @health = fname.capitalize, lname.capitalize, health
end

def to_s
   #defines the method to introduce a new player
   #replaces the default to_s method 
  puts "I'm #{@fname} with a health of #{@health}."
end

def blam #the method for a player to get blammed?
  @health -= 10
  puts "#{@fname} got blammed!"
end
def w00t #the method for a player getting wooted
  @health += 15
  puts "#{@fname} got w00ted"
end
end
larry = Player.new("larry","fitzgerald",60)
curly = Player.new("curly","lou",125)
moe = Player.new("moe","blow")
shemp = Player.new("shemp","",90)

puts larry
puts larry.blam
puts larry
puts larry.w00t
puts larry 
```

我的输出如下所示：

```
I'm Larry with a health of 60.
#<Player:0x10e96d6d8>
Larry got blammed!
nil
I'm Larry with a health of 50.
#<Player:0x10e96d6d8>
Larry got w00ted
nil
I'm Larry with a health of 65.
#<Player:0x10e96d6d8> 
```

当我运行代码时，我无法弄清楚为什么对象 ID（或 nil）会打印到控制台。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:06:24.437

因为您的函数应该返回字符串，但它们实际上返回的是`puts "something"`

改为这样做：

```
def w00t
 @health += 15
 "#{@fname} got w00ted"
end 
```

然后当你这样做时`puts obj.w00t`，它将执行操作，并返回字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:10:37.200

只需删除一些`puts`. 您的方法在标准输出上打印所有内容，然后您打印它们的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T23:05:52.283

Ruby 中的每个方法都会返回一个值，因此#blam 方法确实会返回一些东西。在这种情况下，它是最后一个表达式的值：调用 puts 的结果，即 nil。因此，当您`puts larry.blam`将最后一条语句的返回放入 puts 时，因此返回 nil。

# php - 在 textarea 中接受 PHP 可能太危险，试图找到另一种解决方案

> ID：10391655
> 
> 赞同：3
> 
> 时间：2012-04-30T23:01:31.717
> 
> 标签：php, python, arrays, input

我在寻找某种方式来接受下面的数据，并能够在 PHP 或 Python 中将其解析为数组等方面遇到问题。

```
$data = array(
    'full_name' => array('name'=>'Full Name', 'type'=>'textarea'),
    'company' => array('name'=>'Organization', 'required'=>true),
} 
```

该内部数组中有更多字段，并且对于它们的显示方式没有固定的顺序。

我有什么方法可以解析来自 textarea 的用户输入并能够将其用作数组吗？或者关于如何处理它的任何其他想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T23:03:50.317

使用 JSON 作为输入格式怎么样？这可以很容易地解析，并且不会构成安全风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T23:08:20.317

如果我明白你需要什么，

这就是 json 的用途！

看看这个使用您的数据的快速示例[http://codepad.org/17jxHjeY](http://codepad.org/17jxHjeY)

您可以轻松地传递对象和数组。

麦克风

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T23:08:11.283

在 Python 中，您可以使用它`ast.literal_eval`来安全地将字符串解析为字典。

# windows - perlbrew 可以在 Windows 上运行吗？

> ID：10391656
> 
> 赞同：7
> 
> 时间：2012-04-30T23:01:32.960
> 
> 标签：windows, perl, perlbrew

[在Windows XP](http://en.wikipedia.org/wiki/Windows_XP)上使用 ActiveState 5.8.8 ，我想安装更新的 Perl 用于测试/迁移。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T16:23:03.537

总有一天，我们将摆脱我们认为只能使用一台计算机的日子。当我想测试这类东西时，我会制作虚拟机。我保持干净的基础安装，复制这些东西，以多种方式配置它们，然后按照我的喜好将它们炸毁。

如果我做错了什么，我可以轻松地返回基本安装或恢复到快照。我有几个 Windows VM 仅用于此用途（并且它们在我的新 Mac 上作为 VM 运行比我旧的 300 美元 HP 塔上运行得更快）。

这不仅仅是对 ActivePerl 的建议。如果开发人员无法获得或不想要大量硬件，他们应该拥有大量虚拟机。您将 VM 设置为测试机器，而不是使用您的“个人”机器（带有您的所有个性化设置、音乐等）作为测试机器。

至于字面问题：我不在 Windows 上使用 perlbrew，但很容易找到这些：

*   [perlbrew 和 cygwin](http://catlgrep.com/post/14158234011/cygwin-paths-and-perlbrew)
*   [在 Strawberry Perl 中打开第 31 期](https://github.com/gugod/App-perlbrew/issues/31)
*   [berrybrew](http://perltricks.com/article/119/2014/10/10/Hello-berrybrew--the-Strawberry-Perl-version-manager)，适用于 Windows 的 perlbrew。

请注意，您需要一个编译器工具链来将 perl 源代码转换为可执行文件，因为 perlbrew 假定您拥有所有 unixy 东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-21T09:29:22.810

最近，出现了另一种选择：

**[berrybrew](https://github.com/sillymoose/berrybrew)** - Windows [Strawberry](https://en.wikipedia.org/wiki/Strawberry_Perl) Perl 版本管理器

它基本上是使用 Strawberry Perl 的 Windows perlbrew。

# file-upload - 如何安装 NeatUpload？

> ID：10391657
> 
> 赞同：3
> 
> 时间：2012-04-30T23:01:52.023
> 
> 标签：file-upload, asp.net-ajax, neatupload

救命！在寻找优质、免费的 asp.net/ajax 上传控件时，我找到了 NeatUpload。我找不到它的在线演示，但下载包确实带有演示。我需要一些帮助来在我的服务器（Windows Server 2008）上安装它。

我按照[http://mumblestiltskin.blogspot.com/2009/10/using-neatupload-simple-setup.html](http://mumblestiltskin.blogspot.com/2009/10/using-neatupload-simple-setup.html)上的说明进行操作（它们与 NeatUpload 二进制包随附的 manual.htm 中的说明基本相同） .

到目前为止，我有

*   使用 gacutil 成功将 Brettle.Web.NeatUpload.dll 安装到 GAC。
*   在我的 web.config 中添加了参考（带有版本和 guid）
*   将演示文件及其代码复制到我的 Web 应用程序（在 iis7 中注册）

现在，当我浏览到该页面时，我收到一个 asp.net 服务器错误

```
Line 35: protected MultiFile multiFile;
Line 36: protected MultiFile multiFile2;
Line 37: protected InputFile inputFile; 
```

和

```
error CS0246: The type or namespace name 'MultiFile' could not be found (are you missing a using directive or an assembly reference?)
error CS0246: The type or namespace name 'MultiFile' could not be found (are you missing a using directive or an assembly reference?)
error CS0246: The type or namespace name 'InputFile' could not be found (are you missing a using directive or an assembly reference?)
error CS0246: The type or namespace name 'InputFile' could not be found (are you missing a using directive or an assembly reference?)
error CS0246: The type or namespace name 'ProgressBar' could not be found (are you missing a using directive or an assembly reference?)
error CS0246: The type or namespace name 'ProgressBar' could not be found (are you missing a using directive or an assembly reference?) 
```

现在我该怎么做？我是否需要在某处复制另一个 dll 或某些文件？我无法从文档中弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:03:37.743

弄清楚了！我正在将控件部署到共享点 Web 应用程序。（下面，将 SPVD 视为“Sharepoint 应用程序的虚拟目录”。）如果您不部署到 Sharepoint 网站，那么您将使用我使用 Sharepoint 的 Web 应用程序虚拟目录的根目录。以下是我在我的服务器上运行演示页面所遵循的步骤。

首先，如果您使用“web-application”而不是“web-site”，配置会有所不同。我不会在这里讨论差异。但在我的示例中，我正在配置一个简单的“网站”。我不得不：

*   复制`Brettle.Web.NeatUpload.dll`到服务器上的 GAC（似乎在 Windows Server 2008 上，您*不必*使用 gacutil - 只需将 dll 复制到 %windir%\assembly。另请注意，您*必须*在服务器上执行此操作；它不会如果您尝试通过网络共享进行操作，则无法正常工作）。如果您不这样做，NeatUpload Demo 将不会做任何事情。完成此操作后，您必须在 IIS 中重新启动网站。
*   一些指南说您需要更新 web.config 以显示适当的版本和 guid，但我发现我不必这样做（您将在下面看到我的 web.config）-除非您想使用netupload 的部分配置在 web.config 中。所以，最好只是做对，你知道的。
*   指南还说要在 aspx 页面中使用 guid 和版本号，比如`demo.aspx`，所以，替换这个：

    `<%@ Register TagPrefix="Upload" Namespace="Brettle.Web.NeatUpload" Assembly="Brettle.Web.NeatUpload" %>`

    有了这个：

    `<%@ Register TagPrefix="Upload" Namespace="Brettle.Web.NeatUpload" Assembly="Brettle.Web.NeatUpload, Version=1.3.3798.663,Culture=neutral, PublicKeyToken=c95290d92c5893c8" %>`

*   将整个目录复制`NeatUpload-1.3.25\dotnet\app\bin`到`SVPD\bin`. 它包含以下项目：

    *   Brettle.Web.NeatUpload.dll（与您安装到 GAC 的相同）
    *   Brettle.Web.NeatUpload.GreyBoxProgressBar.dll
    *   Brettle.Web.NeatUpload.HashedInputFile.dll
    *   Hitone.Web.SqlServerUploader.dll
    *   一个名为的目录`en-US`（其中包含一个 dll）
    *   另一个名为的目录`fr`（其中包含一个 dll）
    *   几个 .mdb 数据库和 Brettle.Web.NeatUpload.xml
    *   将对 http 模块的引用添加到 web 应用程序的 web.config 文件（参见下面的 web.config 示例）。
*   现在，您需要将目录：复制`NeatUpload-1.3.25\dotnet\app\NeatUpload`到 SPVD，并将其命名为`NeatUpload`，以便您拥有`SVPD\NeatUpload`其所有原始内容。现在，在该文件夹中，您需要编辑两个文件：`Progress.aspx`和`SmoothProgress.aspx`. 在指南中，有人告诉我在 @ 声明中使用 guid 和版本号，例如：

    `<%@ Page language="c#" AutoEventWireup="false" Inherits="Brettle.Web.NeatUpload.ProgressPage,Brettle.Web.NeatUpload,Version=1.3.3519.18793,Culture=neutral,PublicKeyToken=C95290D92C5893C8" %>`

    `<%@ Register TagPrefix="Upload" Namespace="Brettle.Web.NeatUpload" Assembly="Brettle.Web.NeatUpload, Version=1.3.3798.663,Culture=neutral, PublicKeyToken=c95290d92c5893c8" %>`

这是我放在演示页面文件夹中的 web.config。

```
<?xml version="1.0"?>
<configuration>

  <configSections>
    <!--You need this part so that you can have a neatupload configuration section.  You will get .net errors if you try to add the configuration section without this part here.-->
    <section name="neatUpload"
      type="Brettle.Web.NeatUpload.ConfigSectionHandler, Brettle.Web.NeatUpload"
      allowLocation="true"
      />
  </configSections>

  <!--This is where you put your neatupload configuration preferences.-->
  <neatUpload xmlns="http://www.brettle.com/neatupload/config/2008"
      useHttpModule="true"
    />

  <system.web>
    <customErrors mode="Off"/>
    <!-- Always required to use any of NeatUpload's features.  Without it, ProgressBars won't display and MultiFile will look like a regular HtmlInputFile. -->
    <httpModules>
      <add name="UploadHttpModule" type="Brettle.Web.NeatUpload.UploadHttpModule,Brettle.Web.NeatUpload,Version=1.3.3798.663,Culture=neutral,PublicKeyToken=c95290d92c5893c8" />
    </httpModules>

    <!-- Set these next 2 attributes large enough to accomodate the largest and longest running upload you want to support.  Note that browsers and IIS typically don't support uploads larger than 2GB (2097151 KB). -->
    <httpRuntime maxRequestLength="2097151" executionTimeout="999999"/>

    <!-- Not required for NeatUpload but makes it easier to debug in VS. -->
    <compilation debug="true"/>
  </system.web>

  <!-- For IIS7's Integrated Pipeline Mode which is used by the DefaultAppPool. -->
  <system.webServer>
    <security>
      <requestFiltering>
        <!-- Increased maxAllowedContentLength from default of 300MB. -->
        <requestLimits maxAllowedContentLength="2147483648" />
      </requestFiltering>
    </security>
    <modules>
      <add name="UploadHttpModule" type="Brettle.Web.NeatUpload.UploadHttpModule,Brettle.Web.NeatUpload,Version=1.3.3798.663,Culture=neutral,PublicKeyToken=c95290d92c5893c8" preCondition="managedHandler"/>
    </modules>
    <validation validateIntegratedModeConfiguration="false"/>
  </system.webServer>
</configuration> 
```

**关于安装包的一些注意事项** 我使用的安装包位于[http://neatupload.codeplex.com/releases/view/46086](http://neatupload.codeplex.com/releases/view/46086) - 似乎还有一些其他的，例如[http://neatupload 上的“二进制包”。 codeplex.com/releases/view/59339](http://neatupload.codeplex.com/releases/view/59339)，但目录结构不同，说明意义不大。在 CodePlex 的主项目页面上也有一个包：http: [//neatupload.codeplex.com/](http://neatupload.codeplex.com/)，但如果您使用此包，当您将其部署到 GAC 时，您的 dll 将具有不同的版本号和 guid .

**使用说明书** 通过使用说明书的方式，查看：[http](http://mumblestiltskin.blogspot.com/2009/10/using-neatupload-simple-setup.html?showComment=1335835416022#c1846924755786832325) ://mumblestiltskin.blogspot.com/2009/10/using-neatupload-simple-setup.html?showComment=1335835416022#c1846924755786832325 ，还有一个html手册上面的二进制包。在其他软件包中，您必须使用 Open Office 来“构建”手册。然后，当然，你可以参考这篇文章！

**故障排除** 遇到问题？

*   [如何克服这个 NeatUpload 对象引用错误？](https://stackoverflow.com/questions/10402552/how-to-overcome-this-neatupload-object-reference-error)
*   NeatUpload Nabble 论坛： [http ://neatupload-help.688956.n3.nabble.com/](http://neatupload-help.688956.n3.nabble.com/)

现在唯一剩下的就是添加某种处理程序，用于将文件复制到您想要的位置。NeatUpload 只将它们添加到临时文件中，我还没有弄清楚它在哪里......

# php - Joomla：子菜单消失

> ID：10391662
> 
> 赞同：0
> 
> 时间：2012-04-30T23:02:15.203
> 
> 标签：php, joomla, virtuemart

我有一个使用 Virtuemart 作为购物车的 Joomla 安装程序。

当我浏览我的购物车时，我注意到我丢失了子菜单，在我看来，当我最终访问购物车时，这种情况正在发生。

例如，我在此页面上看到子菜单很好

`index.php?option=com_content&view=article&id=11&Itemid=15`但我认为这仍在运行下面的代码。

一旦我单击下拉菜单链接并被带到

```
index.php?option=com_virtuemart&page=shop.browse&category_id=18&Itemid=8 
```

我松开子菜单

**有谁知道我编辑了什么文档以使我能够将子菜单带入 Virtuemart？**

**代码：**

```
<div id="sidebar"> 
        <h2>Products</h2>
                <jdoc:include type="modules" name="leftMenu"/>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:27:06.477

您可能需要使该菜单项出现在 virtumart 菜单项上。VM 在整个购买/结账过程中使用单个菜单 ID。您会注意到 url 中的 Itemid 将始终保持不变，因此您在结帐的任何方面想要的任何菜单项都将从头到尾可见。

# windows - 如何检测 Windows 安装是否为 RTL

> ID：10391669
> 
> 赞同：3
> 
> 时间：2012-04-30T23:03:03.837
> 
> 标签：windows, winapi, right-to-left

（我使用的是 Windows XP，但问题与所有/任何 Windows 版本有关）

Windows 设置有 2 种“风格”：LTR 或 RTL。也就是说，GUI（按钮、窗口控件、菜单等）从左到右或从左到右显示。

这主要与 Windows 的希伯来语和阿拉伯语版本有关。

我的程序需要找出显示其小部件的默认行为。

LOCALE 不是正确的答案！

本地与日期格式、千位分隔符、UI 语言和其他语言/文化特定设置有关，但在 Windows 中，区域设置不会影响 UI 方向。

如何找出（注册表、环境等）操作系统的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:58:41.473

[`BOOL GetProcessDefaultLayout(DWORD *pdwDefaultLayout)`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633511%28v=vs.85%29.aspx) 或者 `DWORD GetLayout(HDC hdc)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T04:01:30.937

检查系统任务栏上的[`WS_EX_LAYOUTRTL`](http://msdn.microsoft.com/en-us/library/ms903932.aspx)with`GetWindowLong`以找出开始菜单的位置，这将为您提供操作系统文本方向：

```
if (GetWindowLong(FindWindow(_T("HHTaskBar"), NULL), GWL_EXSTYLE) != 0)
    //it's RTL 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T23:29:26.157

使用带有 SM_MIDEASTENABLED 的 nIndex 的 GetSystemMetrics 怎么样，如果系统启用了希伯来语和阿拉伯语，它将返回非零值，否则返回 0。

# java - JTextArea 中的不同文本颜色

> ID：10391670
> 
> 赞同：3
> 
> 时间：2012-04-30T23:03:05.573
> 
> 标签：java, swing

文本区域中是否可以有不同颜色的不同行？你有一个例子吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T23:04:51.953

不带`JTextArea`. 但是，您可以使用[`JTextPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextPane.html)允许将属性应用于文本的 a。如果您需要示例，请查看[文本组件教程](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)。

# html - 将 CSS 应用于 TD 内的数据，但不应用于 TD。需要在每个 TD 中增加文本的基线。Maby 文本属性选择器

> ID：10391676
> 
> 赞同：5
> 
> 时间：2012-04-30T23:03:54.503
> 
> 标签：html, css, css-selectors

我需要增加文本，但如果我在 IE、Opera 和 Chrome 中将类应用于 TD 或 TR，则所有单元格都会上升（背景和边框以及单元格中的文本）。请看示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Untitled Document</title>
  <style>
  .myClass  td{
      position:relative;
      top:-8px;
      color:blue;
      }

  .myClass {
      position:relative;
      top:-8px;
      color:blue;
      } 
td { border: red solid 2px ;}   
  </style>
  </head>
<body>
<p>&nbsp;</p>
<table  width="384" height="89" border="2" cellpadding="0" cellspacing="3" bgcolor="#cccccc">
    <tr >
      <td width="109" bgcolor="#FFCC00">&nbsp;</td>
      <td width="255" bgcolor="#00CCFF" class="myClass">this TD have class=&quot;.myClass&quot;</td>
</tr>
<tr  class="myClass">
      <td bgcolor="#999999">&nbsp;</td>
      <td bgcolor="#FFFF00">this TR have class=&quot;.myClass&quot;</td>
    </tr>
    <tr>
      <td bgcolor="#666666">&nbsp;</td>
      <td bgcolor="#FFFFFF"><span class="myClass">this text within span-tags (.myClass)</span></td>
    </tr>
</table>
</body>
</html> 
```

Firefox 不影响是否应用于 tr_or_td，仅影响带有 span-tag 的文本。

如果在行的每个 TD 中放置文本，则每个浏览器都可以正常工作

```
<span class="tdclass"> mytext in span-tag </span> 
```

问题） ：

1.  是否有一些 css 结构仅将样式分配给 TD 内的数据而不是此 TD

    ```
    tr.myclass TD {} 
    ```

在 IE、Opera、Chrome 中适用于所有单元格，在 Firefox 中根本不起作用。

1.  是否有一些 TEXT 的 CSS 选择器 - 我的意思是例如：

    ```
    .myclass > b 
    ```

    将在带有 .myclass 的标签中应用我们有 b-tag

    可能像 EVERY_TEXT 这样的词 - 可能是这样的选择器，例如：

    ```
    .myclass > EVERY_TEXT {} 
    ```

2.  任何人都可以提出另一种可行的方法来增加表格所有单元格中的文本，而不需要每个单元格中的跨度，并且没有.js

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:36:55.700

使用星号选择 DOM 的该部分中的所有元素，例如

```
​&lt;div ​​​​class="one">
    testing <br/>
    <span> Test </div>
</div>​​​​​​​​​​​​​​​​​​

.one * {
    color: red;
} 
```

[Fiddle here，如果你需要检查它](http://jsfiddle.net/8Z7mE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:14:25.057

您可以在 TD 单元格中的内容周围添加一个 span 标签，并将 CSS 应用于 span。

```
<td>
    <span class="styled_cell_content">Content</span>
</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T11:00:34.307

如果您仍在寻找此问题的答案，则需要在 td（和 th）级别专门设置边框 - 在 IE 中，这优先于整个元素上设置的颜色。例如，将此添加到您的 css，现在 IE 将使用它来设置边框样式，并且 td 上设置的颜色不会改变它！

```
td, th {
    border: 1px solid #000;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T00:03:15.897

您是否尝试过负填充？

```
.myClass,
.myClass td {
    color:blue;
    padding-top: -8px;
} 
```

# javascript - Three.js - 释放内存

> ID：10391677
> 
> 赞同：6
> 
> 时间：2012-04-30T23:04:06.017
> 
> 标签：javascript, webgl, three.js

我使用内置的形状挤压功能沿样条线挤压形状。每次移动样条线的节点时，我都会创建一个新网格。但是这样我的 RAM 很快就满了。每次创建新网格时，我都会删除旧网格

```
scene.__removeObject(mesh); 
```

但它不会释放已使用的内存。我测试了 Firefox Nightly 和 Chrome，如果内存已满，它们都会崩溃。

我搜索了一个通用的 WebGL 功能和 Three.js 相关的解决方案，但没有找到任何东西。

也许有更多 WebGL / Three.js 知识的人可以给我一个提示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:25:34.733

确保您没有在其他任何地方引用 javascript 网格对象，以便垃圾收集器可以将其删除。

# c# - ASCII 到 HEX 的 C# 代码问题。需要洞察力

> ID：10391680
> 
> 赞同：0
> 
> 时间：2012-04-30T23:04:27.470
> 
> 标签：c#, visual-studio-2010

我正在做我的大学项目并面临一个大问题。我正在 C# Visual Studio 2010 上开发 UI。我需要打开串行连接并将一些值输入微控制器。基本上我有24位地址（3字节）的节点，例如0x78A26F。

我在文本框中的 GUI 中接受用户的输入。用户应输入此 78A26F，我希望串口发送以下数据 0x6F 0xA2 0x78。

但是用户输入被保存为一个字符串，当我通过串行连接发送它时，ASCII 被发送，例如 0x37 0x38 0x41 0x32 0x36 0x46。我可以在 uC 中进行处理并执行一些检查以在 0x30 和 0x39 之间减去 0x30 或在 0x41 和 0x46 之间减去 0x37。但我不想使用 uC 进行此计算。我想在 GUI c# 中实现一些算法来发送正确的 HEX 值。所以我写了下面的程序。但我收到一个错误。“对于无符号字节，值要么太大要么太小。” 在代码行声明**(data[2 - i] = Convert.ToByte(x*16 + y))**。

我无法弄清楚这个问题并且现在厌倦了，因为无论如何这都不应该发生。如果有人可以在这方面帮助我，无论是使用此代码还是任何其他算法/方法，我都会非常感激。拜托，我宁愿永远不要在 uC 上实现一些算法。

谢谢

马利哈

```
 /***********************************************************************/
    /*The code for opening the serial connection and converting it appropriately*/
    /***********************************************************************/
    byte[] conversion()
    {
        string text = label16.Text.ToUpper(); // if user enters not capital letters
        byte[] data = new byte[3];

        int x, y;
        bool valid;

        for (int i = 2; i >= 0; i--)
        {
            valid = true;
            x = (Convert.ToInt32(Convert.ToChar(text[2 * i + 1]))); 
            y = (Convert.ToInt32(Convert.ToChar(text[2 * i]))); // I want to first send the 0x6F then 0xA2 and finally 0x78\. ToChar is so that i can check for A-F

            if(x >= 48 || x <= 57) // i,e it is already a number
                x = Convert.ToInt32(text[2 * i + 1]);
            else if (x >= 65 || x <= 70) // it is between A-F
                x = x - 55; // in case of A, i get 10
            else // any other value i.e greater than F or any other.
            {
                valid = false;
                break;
            }

            if (y >= 48 || y <= 57) // same for y
                y = Convert.ToInt32(text[2 * i]);
            else if (y >= 65 || y <= 70)
            y = y - 55;
            else
            {
                valid = false;
                break;
            }

            if (valid == true)
               data[2 - i] = Convert.ToByte(x*16 + y); // max will be 15*16 + 15 = 255 which should be OK for convert.ToByte.  
        }
        return data;
    }

    void serial(byte[] text)
    {
        SerialPort serialPort1 = new SerialPort();
        //configuring the serial port
        serialPort1.PortName = "COM1";
        serialPort1.BaudRate = 9600;
        serialPort1.DataBits = 8;
        serialPort1.Parity = Parity.None;
        serialPort1.StopBits = StopBits.One;

        //opening the serial port
        serialPort1.Open();

        //write data to serial port
        serialPort1.Write(text, 0, 3);

        //close the port
        serialPort1.Close();
    }
    /***********************************************************************/

    private void button3_Click(object sender, EventArgs e)
    {
        byte[] data = conversion();
        serial(data);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:11:51.177

您对 Convert.ToInt32() 的调用并没有按照您的想法进行。

以下是 Convert.ToInt32() 不同用法的概述：http: [//msdn.microsoft.com/en-us/library/bb311038.aspx](http://msdn.microsoft.com/en-us/library/bb311038.aspx)

* * *

逻辑存在三个问题：

1.  查看确定 x 和 y 是否在特定数字范围内的 if 语句。考虑一下如果 x = 100 会发生什么。记住 || 意思是“或”。

2.  如果 x 或 y 是使用 Convert.ToInt32() 表示数字的字符，则转换需要采用字符串，而不是字符，才能获得您正在寻找的转换。

3.  一旦你通过了这两个，检查你的转换（）方法的输出。你应该注意到最后一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:27:13.507

你可以使用[内置方法](http://msdn.microsoft.com/en-us/library/c7xhf79k.aspx)吗？

```
byte[] conversion()
{
    string text = label16.Text;
    for (int i = 0; i < text.length - 1; i+=2)  //Make sure to increment by 2, currently ignores a trailing char.
    {
        string hex = text.Substring(i * 2, 2);
        data[i / 2] = Convert.ToByte(hex, 16);
    }
    return data;
} 
```

不是最干净的代码，但你明白了。您应该将该`data[i / 2] = Convert.ToByte(hex, 16);`行包装在 try catch 中，但我不确定您是要为该行执行此操作还是只是在 try catch 中调用该方法。

您的代码的问题似乎出在将 char 直接转换为 int 的行上`x = Convert.ToInt32(text[2 * i + 1]);`。`y = Convert.ToInt32(text[2 * i]);`为了让你的解决方案发挥作用，你应该做类似的事情`x = ((byte)text[2 * i + 1]) - 48;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T23:27:25.880

.NET 框架已经支持转换十六进制字符串。使您的代码如下所示：

```
 uint value;
        if (!uint.TryParse(label16.Text,     // Ought to be a text box
               System.Globalization.NumberStyles.HexNumber, null, out value)) {
            MessageBox.Show("Invalid hex value");
            return;
        }
        serialPort1.Write(BitConverter.GetBytes(value), 0, 3); 
```

# php - 将一个mysql函数的值用于第二个函数

> ID：10391682
> 
> 赞同：0
> 
> 时间：2012-04-30T23:04:51.680
> 
> 标签：php, mysql

我正在尝试查询我的数据库并创建值以供以后在另一个函数中使用。我的第一个函数 (get_users()) 应该查询 requests 数据库并找到为特定 global_id 列出的所有用户 - 此查询始终最多有 4 个用户。然后我想使用第二个函数 (get_results()) 并将从第一个函数 (get_users()) 检索到的值插入到第二个函数中。换句话说，我需要将 users1,2,3,4 放入第二个函数的 get_results($user1, $user2, $user3, $user4) 中。

希望有人能帮忙！这是我的功能：

```
 function get_users($global_id)
    {
        $result = mysql_query("SELECT user_purchased FROM requests WHERE global_id = '$global_id'");
        $row = mysql_fetch_row($result);
        $user1 = $row[0];
        $user2 = $row[0];
        $user3 = $row[0];
        $user4 = $row[0];
    }
    function get_results($user1, $user2, $user3, $user4)
    {
        $result = mysql_query("SELECT * FROM results WHERE username != '$user1'
        AND username != '$user2'
        AND username != '$user3'
        AND username != '$user4'
        ORDER BY distance");
        ...more stuff to do here with the query
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:49:37.760

在第一个函数中调用第二个函数：

```
function get_users($global_id)
    {
        $result = mysql_query("SELECT user_purchased FROM requests WHERE global_id = '$global_id'");
$count = 0;        
while($row = mysql_fetch_array($result))
        {
        $user[$count] = $row;
        $count++;
        }
    get_results($user[0],$user[1],$user[2],$user[3]);
    }

    function get_results($user1, $user2, $user3, $user4)
    {
        $result = mysql_query("SELECT * FROM results WHERE username != '$user1'
        AND username != '$user2'
        AND username != '$user3'
        AND username != '$user4'
        ORDER BY distance");
        ...more stuff to do here with the query
    } 
```

您甚至可以将 get_results 函数简化为将一个变量作为数组而不是 4 个变量

```
function get_results($users)
        {
            $result = mysql_query("SELECT * FROM results WHERE username != '".$users[0]."'
            AND username != '".$users[1]."'
            AND username != '".$users[2]."'
            AND username != '".$users[3]."'
            ORDER BY distance");
            ...more stuff to do here with the query
        } 
```

你应该在第一个函数中这样称呼它

```
get_results($users); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:52:31.830

将值作为参数发送到另一个函数。

```
function get_users($global_id)
{
    $result = mysql_query("SELECT user_purchased FROM requests WHERE global_id = '$global_id'");
    $row = mysql_fetch_row($result);
    $user1 = $row[0];
    $user2 = $row[0];
    $user3 = $row[0];
    $user4 = $row[0];

    //now send
   get_results($user1, $user2, $user3, $user4);
} 
```

# php - PHP if 语句，变量不显示

> ID：10391687
> 
> 赞同：-2
> 
> 时间：2012-04-30T23:05:19.507
> 
> 标签：php, variables, if-statement, field, echo

我有以下代码：

```
<?php if(the_field('required_libraries') ) { echo 'Title' . $required_libraries; } ?> 
```

该字段确实存在并且正确显示。但是，“标题”文本没有。

这适用于没有任何变量的我，所以我不太明白为什么它在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:09:20.347

我不确定我是否理解你的问题。您可能需要在 if 语句中使用 isset。

```
<?php

    if (isset($required_libraries)) {
        echo 'Title' . $required_libraries;
    }

?> 
```

你能发布你的“the_field”功能吗？

更新

根据您提供的文档，您似乎应该在 if 语句中使用 get_field()（而不是 the_field()）。

```
<?php

    if(get_field('required_libraries')) {
        echo 'Title ' . get_field('required_libraries');
    }

?> 
```

看起来 the_field() 会回显字段值，因此您也可以这样做：

```
<?php

    if(get_field('required_libraries')) {
        echo 'Title ';
        the_field('required_libraries');
    }

?> 
```

# facebook - 有没有办法从 Facebook Insights Graph/FQL api 获取每小时数据？

> ID：10391698
> 
> 赞同：3
> 
> 时间：2012-04-30T23:06:48.757
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-insights

Facebook 只发送日、周、月和终生数据。我看到的唯一方法是每小时获取数据，但这不适用于过去的查询。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T13:47:43.360

不可能从 Graph/FQL API 中获得比按天更精细的洞察数据周期细分。只有日、周、月或生命周期数据聚合可用，如[FQL](https://developers.facebook.com/docs/reference/fql/insights/)和[Graph](https://developers.facebook.com/docs/reference/api/insights/) Developer 页面中所指定。即使 FQL 表的 end_time 字段采用以 unix 时间表示的特定小时的时间点，该小时也必须设置为午夜，太平洋夏令时间，从而有效地将每日数据请求作为最小时间段。

有社交插件和页面的实时分析，但它不能作为原始数据访问，必须通过 Facebook 仪表板查看。去年，FB为网站上[的社交插件引入了实时分析](https://developers.facebook.com/blog/post/476/)，例如点赞按钮和评论框。FB 今年最近开始[为 Pages 提供实时数据](http://www.zdnet.com/blog/facebook/facebook-announces-real-time-page-insights/9769)。同样，它只能在主页的洞察部分在线查看。

# java - 具有 postDelayed 的本地处理程序会在调用可运行对象之前收集垃圾吗

> ID：10391705
> 
> 赞同：4
> 
> 时间：2012-04-30T23:08:06.267
> 
> 标签：java, android

以下是安全的事情。它确实很方便，但是 Handler 可以在可运行对象运行之前收集垃圾吗？

```
public void dodelayed()
{
    new Handler().postDelayed(new Runnable() {

        @Override
        public void run()
        {
            //do something
        }
    }, 50);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T23:09:48.100

不，它**不是**GCed。这样做很好。

稍微长一点的解释，以避免混淆：

尽管您不存储对处理程序的引用，但它存储在其他地方。在从内部调用的方法[sendMessageAtTime](http://developer.android.com/reference/android/os/Handler.html#sendMessageAtTime%28android.os.Message,%20long%29)`postDelayed`中，在 Handler 将消息放入消息队列之前，它在消息的`target`字段中赋值，所以仍然有 Handler 的引用，并且没有被 GC：

```
public boolean sendMessageAtTime(Message msg, long uptimeMillis)
{
    //...
    if (queue != null) 
    {
        msg.target = this; // here the reference to the handler is assigned 
        sent = queue.enqueueMessage(msg, uptimeMillis);
    }
    //...
} 
```

# c# - 如何通过单个 WinForm 对话框获取文件夹或文件路径？

> ID：10391709
> 
> 赞同：6
> 
> 时间：2012-04-30T23:08:18.613
> 
> 标签：c#, winforms, file, path, dialog

**更新：**似乎我不清楚我的问题是什么。John Arlen 对我的标题的编辑似乎也引起了更多的误解。标题更改为“如何获取文件夹或文件路径？” 这不是我所追求的。我知道有一个对话框可以处理文件，另一个对话框可以处理文件夹。我知道这些对话框中的每一个都可以返回文件夹或文件的路径。我说我不确切知道如何获取文件路径，但即使我知道如何获取它也没有帮助我。

正如我原来的问题所述：

> “我让用户通过某个对话框选择一个文件夹或文件。我不知道该路径是属于文件夹还是文件。一旦用户点击“打开”按钮，我想要当前选择的目录或要存储在字符串中的文件路径。”

我的意思是我想使用一些可能存在也可能不存在的对话框。我不知道用户是在寻找文件还是文件夹。用户知道这一点，但用户不知道路径。这就是使用对话框的原因。用户将搜索所需的文件或文件夹，然后单击“打开”。为满足我的需要使用单个对话框更有意义。我想看看是否存在这样的对话框，因为我对 .NET Framework 的经验有限。

Jared Kells 的答案几乎正是我想要的。在阅读了他提供的内容后，似乎不存在这样的对话框。我将不得不提供我自己的实现。

由于提出我自己的实现可能既费时又困难，所以我暂时不用。如果有人提供了非常有用的答案，我将等待几天来选择答案。

感谢那些做出贡献的人，即使这不是我所追求的。

**原创内容：**

我正在寻找一种获取文件夹或文件的文件路径的方法。我玩过，`OpenFileDialog`也`FolderBrowserDialog`没有多少成功。我能够使用 FolderBrowserDialog.SelectedPath 获取文件夹路径。使用`OpenFileDialog`该类，我无法弄清楚如何获取文件路径。

即使我能弄清楚这一点，我仍然处于困境中。我让用户通过一些对话框选择一个文件夹或文件。我不知道该路径是属于文件夹还是文件。一旦用户点击“打开”按钮，我希望将当前选择的目录或文件路径存储在一个字符串中。似乎我使用的每个类都被文件或文件夹困住了。

WinForms对话框可以做到这一点吗？我宁愿此时不必编写自己的对话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T23:26:05.203

```
openFileDialog1.ShowDialog();
string filePath = openFileDialog1.FileName; 
```

会给你一个文件的路径。

```
folderBrowserDialog1.ShowDialog();
string folderPath = folderBrowserDialog1.SelectedPath; 
```

对于一个文件夹。

```
string path = ...
if(File.Exists(path))...//is file
if(Directory.Exists(path))...//is folder 
```

检查它是什么。

# linq - LINQ - 按运行时确定的多列对 DataTable 进行分组

> ID：10391716
> 
> 赞同：3
> 
> 时间：2012-04-30T23:09:22.173
> 
> 标签：linq, .net-3.5, datatable, group-by

使用 .NET 3.5，我需要`DataTable`按多个列对 a 进行分组，其中列名包含在`IEnumerable`.

```
// column source
IEnumerable<string> columns;
DataTable table;

IEnumerable<IGrouping<object, DataRow>> groupings = table
    .AsEnumerable()
    .GroupBy(row => ???); 
```

通常是[这里](https://stackoverflow.com/a/1225719/56829)`???`描述的匿名类型，但我需要用作列源。这可能吗？`columns`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T01:54:24.270

最简单的方法是创建一个函数，该函数选择所需的列并创建一个散列以进行比较。我会做这样的事情：

```
Func<DataRow, IEnumerable<string>, string> f = (row, cols) => 
    String.Join("|", cols.Select(col => row[col])); 
```

这是一个采用 a`DataRow`和 an的函数`IEnumerable<string>`。它将`IEnumerable<string>`（列名）投影到相应的列值 ( `cols.Select(col => row[col]))`) 中，然后将这些值与一个`|`字符连接起来。我选择这个字符是因为它不太可能包含在您的字段中，但您可能希望换成另一个分隔符。

然后简单

```
IEnumerable<IGrouping<object, DataRow>> groupings = table
    .AsEnumerable()
    .GroupBy(row => f(row, columns)); 
```

理想情况下，我们会选择更好的类型——而不是用任意分隔符捆绑在一起的字符串。但是我希望选择一个对象会由于引用类型的比较而导致问题，因为即使它们具有相同的属性，两个对象也不相等。

# c# - Kinect 深度和图像帧对齐

> ID：10391719
> 
> 赞同：9
> 
> 时间：2012-04-30T23:09:43.590
> 
> 标签：c#, kinect, color-depth

我正在玩新的 Kinect SDK v1.0.3.190。（stackoverflow 中的其他相关问题在以前的 kinect sdk 上）我从 Kinect 获得深度和颜色流。由于深度和 RGB 流是使用不同的传感器捕获的，因此两帧之间存在不对齐，如下所示。

只有 RGB ![RGB](../Images/0a39b65f2e2e828ad426f33b488595f5.png)

只有深度 ![深度](../Images/5152ad31437ee8ce795193b984d057ad.png)

深度和RGB ![RGB 和深度均匀混合](../Images/a3304999f55126b4b03ff27f8efc7e1d.png)

我需要对齐它们，并且有一个名为 MapDepthToColorImagePoint 的函数正是为此目的。但是，它似乎不起作用。这是一个同样混合（深度和映射颜色）的结果，下面是使用以下代码创建的

```
 Parallel.For(0, this.depthFrameData.Length, i =>
        {
            int depthVal = this.depthFrameData[i] >> 3;
            ColorImagePoint point = this.kinectSensor.MapDepthToColorImagePoint(DepthImageFormat.Resolution640x480Fps30, i / 640, i % 640, (short)depthVal, ColorImageFormat.RgbResolution640x480Fps30);
            int baseIndex = Math.Max(0, Math.Min(this.videoBitmapData.Length - 4, (point.Y * 640 + point.X) * 4));

            this.mappedBitmapData[baseIndex] = (byte)((this.videoBitmapData[baseIndex]));
            this.mappedBitmapData[baseIndex + 1] = (byte)((this.videoBitmapData[baseIndex + 1]));
            this.mappedBitmapData[baseIndex + 2] = (byte)((this.videoBitmapData[baseIndex + 2]));
        }); 
```

在哪里

```
depthFrameData -> raw depth data (short array)

videoBitmapData -> raw image data (byte array)

mappedBitmapData -> expected result data (byte array) 
```

参数的顺序、分辨率、数组大小是否正确（仔细检查）。

代码的结果是： ![深度和 MapDepthToColorImagePoint](../Images/2d7fa6ff16cfae58d65cd1f0ffeb47ca.png)

错位继续！更糟糕的是，使用 MapDepthToColorImagePoint 后的结果图像与原始图像完全相同。

如果有人可以帮助我找出我的错误或至少向我解释 MapDepthToColorImagePoint 的用途（假设我误解了它的功能），我将不胜感激？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T02:50:31.040

这总是会稍微发生，因为两个传感器安装在稍微不同的地方。

试试看：

用你的两只眼睛看某个物体，然后试着只用你的左眼，然后只用你的右眼。事情看起来略有不同，因为你的两只眼睛并不完全相同。

但是：可以纠正一些 API 代码的许多问题。

我使用的是 Windows 1.5 的 Kinect，所以 API 与 1.0 略有不同。

```
short[] depth=new short[320*240];
// fill depth with the kinect data
ColorImagePoint[] colorPoints=new ColorImagePoint[320*240];
// convert mappings
kinect.MapDepthFrameToColorFrame(DepthImageFormat.Resolution320x240Fps30,
            depth, ColorImageFormat.RgbResolution640x480Fps30, colorPoints);
// now do something with it
for(int i=0;i<320*240;i++)
{
  if (we_want_to_display(depth[i]))
  {
    draw_on_image_at(colorPoints[i].X,colorPoints[i].Y);
  }  
} 
```

这就是基础。如果您查看 Kinect Developer Toolkit 1.5 中的绿屏示例，它会很好地使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T18:06:17.983

这是一个非常常见的问题，因为两个摄像头位于两个不同的位置，所以同步两个图像所涉及的数学问题是固有的。有点像获取 3D 相机生成的两个视频源并尝试同步它们。他们总是会稍微偏离。

修正的两个想法：

1.  在计算时手动移动深度图像中的位。
2.  在 Kinect 中添加振动电机以降低噪音： [http](http://www.youtube.com/watch?v=CSBDY0RuhS4) ://www.youtube.com/watch?v=CSBDY0RuhS4 （我发现一个简单的寻呼机电机很有效。）

MapDepthToColorImagePoint 用于在 Skeletal API 中将骨架点映射到深度点，然后映射到图像点，以便您可以在 RGB 图像上显示关节。

希望这可以帮助。

# wordpress - Wordpress 分页链接 rel start prev next

> ID：10391721
> 
> 赞同：0
> 
> 时间：2012-04-30T23:09:53.453
> 
> 标签：wordpress, seo, meta-tags, rel

我正在开发一个轻量级、功能丰富的自定义博客系统，它生成与 wordpress 完全相同的结果，但在一个数据库上只有一个表和几个 php 文件。直到现在一切顺利，我即将完成它。问题是，当我使用 wordpress 查看一些知名博客的源代码时，我发现了以下内容：

1 - 主页面及其后续页面 (2,3,4...) 仅声明 rel="index"

2 - 类别及其后续页面 (2,3,4...) 仅声明 rel="index"

3 - 文章页面及其后续页面 (2,3,4...) 声明 rel="index"、rel="start"、rel="prev" 和 rel="next"（取决于文章位置）

因此，只有主要文章通过链接 rel 元标记链接在一起，形成一个系列。

现在，为什么列表页面（索引及其后续页面）之间没有元链接？

对于我的项目，我已经这样做了，索引及其后续页面被元链接在一起形成一个系列，如 mysite.com、mysite.com/page/2/mysite.com/page/3/

并且同一类别中的页面也属于 mysite.com/cat-1/、mysite.com/cat-1/page/2/、mysite.com/cat-1/page/3/ 等系列

整个博客的文章也是从第一篇到最后一篇的系列文章。

那么为什么这不是 WORDPRESS 的情况呢？这是一个坏习惯吗？或者他们只是不能用 WORDPRESS 来做？？？？？？

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:11:56.997

它可以用 Wordpress 完成，不知道为什么它不是默认的标题钩子，但有些主题确实实现了它。如果他们不这样做，这个插件将为分页页面设置正确的 rel 链接[http://wordpress.org/extend/plugins/pagination-rel-links/](http://wordpress.org/extend/plugins/pagination-rel-links/)

# mule - 方法入口点解析器是否能够将参数转换为基类？

> ID：10391723
> 
> 赞同：1
> 
> 时间：2012-04-30T23:10:14.220
> 
> 标签：mule

我正在尝试获取方法入口点解析器以将有效负载转换为基类，如所请求方法的参数所示。然而，骡子并没有这样做。我可能做错了什么？

也就是说，给定以下配置：

```
<mule ...>
    <spring:bean id="FooBean" class="foo.Foo" />

    <flow name="test">
        <vm:inbound-endpoint name="test.Name" path="test.Path" exchange-pattern="request-response" />

        <component>
            <method-entry-point-resolver>
                <include-entry-point method="bar" />
            </method-entry-point-resolver>
            <spring-object bean="FooBean" />
        </component>        
    </flow>
</mule> 
```

并给出 foo.Foo：

```
package foo;

public class Foo {

    public Foo() {
    }

    public String bar(final Object anObject) {
        return "bar";
    }

} 
```

我希望以下测试能够通过，但事实并非如此。也就是说，我发送到流的有效负载是 an`Integer`并且我希望 Mule 将其作为参数传递给`Foo::bar`：

```
@Test
public void methodEntryPointResolverUpcasts() throws MuleException {
    final MuleClient client = muleContext.getClient();
    final MuleMessage reply = client.send("vm://test.Path", new Integer(1), null, RECEIVE_TIMEOUT);
    assertEquals("bar", reply.getPayload());
} 
```

相反，日志显示错误。这是一个相关的片段：

```
 ...
Message               : Failed to find entry point for component, the following resolvers tried but failed: [
ExplicitMethodEntryPointResolver: Could not find entry point on: "foo.Foo" with arguments: "{class java.lang.Integer}"
]
...
Exception stack is:
1\. Failed to find entry point for component, the following resolvers tried but failed: [
ExplicitMethodEntryPointResolver: Could not find entry point on: "foo.Foo" with arguments: "{class java.lang.Integer}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T17:27:58.990

*Mule 的入口点解析器本身*不执行强制转换：它们寻找可能接受特定有效负载的方法。

这就是说，`method-entry-point-resolver`需要严格的类型匹配才能工作。在幕后，我们在支持它的类 ExplicitMethodEntryPointResolver.java 中找到以下行：

```
if (ClassUtils.compare(parameterTypes, classTypes, false, true)) 
```

那里的`false`意思是：不匹配对象。这就是匹配对您不起作用的原因。不幸的是，这是不可配置的。

当您删除入口点解析器的显式配置时，Mule 使用默认的解析器链，其中包含`reflection-entry-point-resolver`. 这是一个愉快地将 Integer 传递给 Object 参数的方法，因为在 ReflectionEntryPointResolver.java 中：

```
methods = ClassUtils.getSatisfiableMethods(component.getClass(), 
            ClassUtils.getClassTypes(payload), true, true, ignoredMethods); 
```

第二个真正的意思是：匹配对象！

因此，如果您想在配置中指定单个入口点解析器，那`reflection-entry-point-resolver`是您的朋友 :)

# c# - 无法从 UNC 路径中删除文件

> ID：10391728
> 
> 赞同：0
> 
> 时间：2012-04-30T23:11:06.247
> 
> 标签：c#, networking, unc

我想让应用程序从指定的工作中删除目标文件。执行该软件的用户将是目标机器上的管理员，因此我使用以下代码进行测试：

```
string strTarget = @"\\" + textBox1.Text + @"\C$\Temp\temp.txt";

            try
            {
                File.Delete(strTarget);
            }
            catch (Exception ex)
            {
                MessageBox.Show("Failure to delete: " + ex.Message);
            } 
```

然后我在我自己的工作站和另一台测试机器上创建了一个 \Temp\Temp.txt 文件。我是两台机器的管理员，可以通过相关的 UNC 路径手动访问和删除文件。当我运行代码调试器时，没有抛出异常，但文件没有删除。我无法弄清楚我们没有发生什么导致失败。

有什么我可以检查的或我需要添加的任何代码吗？我已经搜索了其他问题，但我还没有找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:17:39.037

如果您在 Vista/7 下运行，则您的程序可能在未升级的权限下运行。确保您以管理员身份显式运行程序，或在项目的清单文件中指定它：

```
 <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
    <!--
      UAC Manifest Options
      If you want to change the Windows User Account Control level replace the 
      requestedExecutionLevel node with one of the following.

    <requestedExecutionLevel  level="asInvoker" uiAccess="false" />
    <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
    <requestedExecutionLevel  level="highestAvailable" uiAccess="false" />

     If you want to utilize File and Registry Virtualization for backward 
     compatibility then delete the requestedExecutionLevel node.
-->
    <requestedExecutionLevel level="highestAvailable" uiAccess="false" />
  </requestedPrivileges> 
```

# javascript - 文本框 - trigger.create 查询

> ID：10391729
> 
> 赞同：0
> 
> 时间：2012-04-30T23:11:34.620
> 
> 标签：javascript, jquery, init

在 Javascript 中初始化查询文本框的代码是什么？我所有的 js 代码都在一个主干文件中。我找不到使用以下 HTML 初始化文本框的正确代码：

```
<input type="text" id="searchquery" name="name" value="Alien"/> 
```

...有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:19:51.387

“文本”输入标签在 HTML DOM 中创建一个“文本”对象。该对象的文本值是“值”属性。

以通常的 JavaScript 方式进行操作。有关更多信息，请参见——

[http://www.w3schools.com/jsref/dom_obj_text.asp](http://www.w3schools.com/jsref/dom_obj_text.asp)

享受！

# java - 打开控制文件时 SQL 加载程序失败

> ID：10391732
> 
> 赞同：2
> 
> 时间：2012-04-30T23:12:18.910
> 
> 标签：java, oracle10g, sql-loader

那么这是一个非常奇怪的行为。

当我执行命令时

`sqlldr userid=usuario/prueba@basedatos control './controlFiles/MyArchivo 2011.csv`（请注意，MyArchivo 和 2011 之间有两个空格）加载程序失败并发送此错误：

```
SQL*Loader: Release 11.2.0.1.0 - Production on Lun Abr 30 18:02:27 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

SQL*Loader-500: Unable to open file (./controlFiles/MyArchivo 2011.ctl)
SQL*Loader-553: file not found
SQL*Loader-509: System error: El sistema no puede encontrar el archivo especificado. 
```

我做了一些实验，当文件名中有**两个**（或更多）连续空格时，就会发生这种情况，有人可以向我解释发生了什么吗？

这与操作系统有关吗？与 SQLLdr？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T00:11:16.380

为什么不只使用文件名而不使用名称和路径中的空格？

# ms-access - 从自定义集合中复制 FormatCondition 对象

> ID：10391739
> 
> 赞同：1
> 
> 时间：2012-04-30T23:13:57.690
> 
> 标签：ms-access, vba

我知道我可能正在尝试做一些不正常的事情。我需要从 Controls FormatConditions 集合中保存（并删除）所有 FormatCondition 对象。然后稍后我需要重新创建/重新将那些相同的 FormatCondition 对象重新应用回同一个控件。

似乎我可以成功复制它们，但是当我尝试从我自己的 Collection 对象中重新应用那些相同的 FormatCondition 对象时出现错误。我怀疑这里发生的事情是我实际上并没有像我想的那样在我的 SaveAndDelete 例程中复制对象。如果是这种情况，我如何才能真正克隆这些对象，以便在我运行 f.Delete 后它们仍然存在？

```
Private SavedFC As New Collection

Private Sub SaveAndDeleteFormatConditions(c as Control)
    Dim f As FormatCondition
    For Each f In c.FormatConditions
        SavedFC.Add f
        f.Delete
    Next
End Sub

Private Sub RecreateFormatConditions(c as control)
    Dim i As Integer
    i = 1
    If SavedFC.Count > 0 Then
        Dim f1 As FormatCondition, f2 As FormatCondition
        For Each f1 In SavedFC

            'Error 2467 occurs here: The expression you entered refers to an object that is closed or doesn't exist
            Set f2 = c.FormatConditions.Add(f1.Type, f1.Operator, f1.Expression1, f1.Expression2)
            With f2
                .BackColor = f1.BackColor
                .FontBold = f1.FontBold
                .FontItalic = f1.FontItalic
                .FontUnderline = f1.FontUnderline
                .ForeColor = f1.ForeColor
            End With
            SavedFC(i).Delete
            i = i + 1
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:54:07.093

此行导致问题：

```
f.Delete 
```

这里发生的事情是您将一个项目添加到集合中（它是一个对象，因此您使用引用进行操作）。然后，您删除对象本身。现在，您有一组指向已删除/不存在的对象的指针。这就是为什么您稍后会收到 2467 错误。

# c# - Castle ActiveRecord 可以选择性地偷懒吗？

> ID：10391744
> 
> 赞同：0
> 
> 时间：2012-04-30T23:14:58.637
> 
> 标签：c#, .net, nhibernate, castle-activerecord

我知道我可以做类似的事情：

```
[BelongsTo("Foo", NotNull = true, Lazy = FetchWhen.Immediate)]
public Foo MyProperty
{

} 
```

并且该字段将通过连接立即填充，而不是在访问 getter 时填充。

但是，是否可以指定在我运行查询时是否立即完成提取，例如这里：

```
MyModel[] foo = MyModel.FindAllByProperty("User", someUser);
//Sometimes I want lazy, sometimes I don't.. 
```

.NET Entity Framework 可以使用 来执行此操作`Include`，例如：

```
var foos = from f in context.FOO.Include("Bar") where f.id == 123 select f; 
```

`:include`而且我相信 Rails 使用语法具有相同的功能。我想知道 Castle ActiveRecord 是否有等价物，或者是否总是在模型级别定义惰性。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:11:33.983

是的，它可以。推荐的方法是默认使用惰性映射，然后急切地获取每种情况所需的内容。

为每个查询定义预取取决于查询 API。例如，HQL 使用 ' [join fetch](http://www.nhforge.org/doc/nh/en/index.html#queryhql-joins) ' 关键字，使用 Criteria API[`SetFetchMode`](http://www.nhforge.org/doc/nh/en/index.html#querycriteria-dynamicfetching)等。

# java - 是否有将字符串标记器转换为数组的功能

> ID：10391745
> 
> 赞同：2
> 
> 时间：2012-04-30T23:15:04.440
> 
> 标签：java, string, casting, stringtokenizer

我正在工作一个多小时来寻找一种将字符串分解为字符串数组的方法。

这种方法对我来说失败了：

```
lineFields = str.split("|");
System.out.print(lineFields.length); 
```

因为它返回一个长度相等的数组给它自己的字符串。

然后我在这里读到字符串标记器可以爆炸一个字符串，但不幸的是我找不到像`lineFields[1]`.

我来自php，在这里做最简单的事情看起来很不寻常，当然我已经搜索了这个论坛上的相关帖子，但仍然没有接近我的需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:16:38.277

*   不要尝试在`split(...)`应该使用的地方使用 StringTokenizer。
*   仅仅因为您尝试使用 split(...) 不起作用并不意味着它是该工作的错误工具。
*   您使用拆分错误。不要忘记逃避你的管道，`|`字符串：`"\\|"`

# apache-camel - 调整 Apache Camel JMS 路由器性能

> ID：10391746
> 
> 赞同：2
> 
> 时间：2012-04-30T23:15:21.233
> 
> 标签：apache-camel

在我执行 routing-to-a-JMS-queue 时，如下所示

```
.inOut("jmsGF:queue:INQueue?replyTo=queue:OUTQueue") 
```

我观察到 Camel 需要大约 900 毫秒才能真正将消息发送到 JMS 队列。有没有办法减少这个过程/配置时间？谢谢。

```
2012-04-30 14:51:22,098 SendProcessor Endpoint[jmsGF://queue:INQueue?replyTo=queue:OUTQueue]
2012-04-30 14:51:22,833 Configuration$CamelJmsTemplate - Executing callback on JMS Session: ConnectionID=7685453259737775872, SessionID=7685453259737832448
2012-04-30 14:51:22,973 JmsConfiguration - Sending JMS message to: Oracle GlassFish(tm) Server MQ Destination 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:30:35.523

如果您使用 Camel 2.9，那么您可以使用排他的 replyTo 队列，这也更快。在 Camel JMS wiki 页面上查看有关通过 JMS 请求/回复的详细信息。它还指出了如何提高旧版本的性能，以及何时不能对队列使用独占回复。 [http://camel.apache.org/jms](http://camel.apache.org/jms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:04:04.637

如您所见，关键是使用某种形式的 JMS 生产者连接的连接池

另外，请注意将 Spring CachingConnectionFactory 用于消费者连接，因为它可能会导致问题（尤其是轮询消费者等）

有关一般信息，请参阅此页面：http: [//camel.apache.org/activemq.html](http://camel.apache.org/activemq.html)

# apache - 从服务器复制的 Subversion 目录中获取原始文件

> ID：10391749
> 
> 赞同：0
> 
> 时间：2012-04-30T23:15:30.597
> 
> 标签：apache, svn, ubuntu

我有一个旧服务器。我复制了项目所有文件所在的文件夹。我想恢复原始文件。

我在目录上尝试了 svn 导出，但没有奏效。它说它不是工作副本。有没有可以在目录上使用的命令来取回文件？

这是我运行的命令：

```
 C:\Users\Dan\Desktop\Server Old>svn export JCS_R3
svn: E155007: 'C:\Users\Dan\Desktop\Server Old\JCS_R3' is not a working copy

C:\Users\Dan\Desktop\Server Old>cd JCS_R3

C:\Users\Dan\Desktop\Server Old\JCS_R3>dir
 Volume in drive C has no label.
 Volume Serial Number is 2A6F-89F3

 Directory of C:\Users\Dan\Desktop\Server Old\JCS_R3

04/30/2012  06:55 PM              .
04/30/2012  06:55 PM              ..
04/30/2012  06:55 PM              conf
04/30/2012  06:55 PM              dav
04/30/2012  06:55 PM              db
02/03/2011  01:35 PM                 2 format
04/30/2012  06:55 PM              hooks
04/30/2012  06:55 PM              locks
02/03/2011  01:35 PM               229 README.txt
               2 File(s)            231 bytes
               7 Dir(s)  218,980,196,352 bytes free 

```

它在使用 Apache 的 Ubuntu 服务器上运行。不确定这是否重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:21:22.910

您在这里得到的是*存储库*的副本，而不是*工作副本*。如果您成功复制了所有内容，那么您的所有文件（以及所有修订历史记录）都应该在其中。你可以尝试这样的事情：

```
svn checkout "file:///C:/Users/Dan/Desktop/Server Old/JCS_R3" 
```

（注意：执行此操作时，您的当前目录应该在其他地方，这样您就不会尝试将工作副本放入存储库中！）

我不知道存储库在 Unix 机器上而你现在在 Windows 上是否会成为问题。如果是这样，如果你把它复制到另一个 Unix 机器上，你可能会更成功。

# java - Primefaces selectbooleancheckbox不在列中工作

> ID：10391752
> 
> 赞同：2
> 
> 时间：2012-04-30T23:15:49.323
> 
> 标签：java, jsf-2, primefaces

我正在开发一个小的单页网络应用程序。在其中，我有一个数据表，其中包含一个布尔值列。我想尝试将其显示为复选框。但是，它在渲染时失败。我猜这是需要渲染对象并且复选框是布尔值并因此失败的事实。虽然这看起来像一个错误，除非我在某处遗漏了标记。Primefaces 3.2.1、GF 3.1.1、JDK 7。

```
<p:column>
     <f:facet name="header">With Login
     </f:facet>
     <p:selectBooleanCheckbox value="#{server.withLogin}" onLabel="Login" offLabel="Without Login"/>
 </p:column> 
```

错误堆栈是这个

```
java.lang.NoSuchMethodError: org.primefaces.util.ComponentUtils.getValueToRender(Ljavax/faces/context/FacesContext;Ljavax/faces/component/UIComponent;)Ljava/lang/String;
at org.primefaces.component.selectbooleancheckbox.SelectBooleanCheckboxRenderer.encodeMarkup(SelectBooleanCheckboxRenderer.java:60)
at org.primefaces.component.selectbooleancheckbox.SelectBooleanCheckboxRenderer.encodeEnd(SelectBooleanCheckboxRenderer.java:53)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1763)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
at org.primefaces.component.datatable.DataTableRenderer.encodeRegularCell(DataTableRenderer.java:571)
at org.primefaces.component.datatable.DataTableRenderer.encodeRow(DataTableRenderer.java:531) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T23:20:03.520

这表明您在单个 web 应用程序中混合了多个 PrimeFaces 版本，其中根本没有提到的方法的旧版本在类加载中具有优先权。

清理你的 webapp 的运行时类路径。您应该只有一个版本的 PrimeFaces。

# ios - 如何更改核心图散点图的颜色？

> ID：10391760
> 
> 赞同：3
> 
> 时间：2012-04-30T23:16:40.197
> 
> 标签：ios, core-plot

我做了一个散点图，并试图改变绘制点的颜色。这是我试图用 CPT 做的模拟

```
// Add line style
CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
lineStyle.lineWidth = 1.0f;
lineStyle.lineColor = [CPTColor greenColor];
dataSourceLinePlot.dataLineStyle = lineStyle; 
```

如何使用 CPTX 散点图执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:06:45.193

设置`plotSymbol`属性以在每个数据点绘制一个符号。Mac 版本的 CPTTestApp 中有一个演示，它显示了所有预定义的形状。如果需要，您可以创建自定义符号形状。

如果您需要为某些数据点绘制不同的符号，请实现以下数据源方法之一：

```
-(NSArray *)symbolsForScatterPlot:(CPTScatterPlot *)plot
                 recordIndexRange:(NSRange)indexRange;
-(CPTPlotSymbol *)symbolForScatterPlot:(CPTScatterPlot *)plot
                           recordIndex:(NSUInteger)index; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T00:05:18.900

`CPTScatterPlot`有一个符号数组。看起来这些符号应该属于类型`CPTPlotSymbol`，而该类又具有您可以自定义的常用属性，例如`lineStyle`.

# jquery - 使用 jQuery .load() 回调和图像

> ID：10391762
> 
> 赞同：1
> 
> 时间：2012-04-30T23:16:41.377
> 
> 标签：jquery, image, events, load

当使用 jQuery 的 .load() 方法动态拉入内容时，回调函数会在请求完成并且 HTML 被拉入当前页面时触发。

当新 HTML 中包含的图像完全加载时，有没有办法解决？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T23:25:55.550

据我所知，这不是直截了当的。有些人可能会建议使用`.load()`事件处理程序，但 Jquery 文档有一些使用它的警告（[文档](http://api.jquery.com/load-event/)）：

> 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些都是：
> 
> *   它不能始终如一地工作，也不能可靠地跨浏览器
> *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> *   它没有正确地冒泡 DOM 树
> *   可以停止对已经存在于浏览器缓存中的图像进行触发

想到的唯一方法是使用 jQuery`img`从返回的 HTML 中提取元素，并使用 javascript`Image`对象加载图像。您*可以*将`.onload`事件处理程序附加到`Image`对象。然后，您必须使用延迟对象或什至简单的计数器之类的东西来跟踪它们何时全部加载。

这是一个演示，它会在加载所有图像时拉出`img`对象并使用`$.Deferred()`带有 a 的对象`$.when()`来触发：

[http://jsfiddle.net/jtbowden/h4AMG/](http://jsfiddle.net/jtbowden/h4AMG/)

在演示中，内容仅在图像加载后才会加载。您将需要更改`$.load()`为`$.ajax()`拥有执行此操作的控制权。

这是一个使用基本计数器来跟踪负载的版本：

[http://jsfiddle.net/jtbowden/gnW3f/](http://jsfiddle.net/jtbowden/gnW3f/)

# java - Android - 大文件下载停止 - 使用 async/progressdialog

> ID：10391764
> 
> 赞同：7
> 
> 时间：2012-04-30T23:16:51.840
> 
> 标签：java, android, asynchronous, download, progressdialog

我有一个简单的代码应该执行一项任务，当单击按钮时下载文件，将其保存到 SD 卡，然后打开它。一切正常，除了在下载期间，对于较大的文件，连接断开并且进度条挂起 - 几乎总是在 20%。我已经搜索和搜索，但无法弄清楚如何保持连接处于活动状态并允许下载完成。**任何想法如何保持连接活动以便下载完成而不是停滞在 20%？**

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.List;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class DownloadTestActivity extends Activity {

   public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
   private Button startBtn;
   private ProgressDialog mProgressDialog;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.main);
           mProgressDialog = new ProgressDialog(DownloadTestActivity.this);
           mProgressDialog.setMessage("Downloading...");
           mProgressDialog.setIndeterminate(false);
           mProgressDialog.setMax(100);
           mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

           startBtn = (Button) findViewById(R.id.startBtn);
           startBtn.setOnClickListener(new OnClickListener() {
                   public void onClick(View v) {
                           startDownload();
                   }
           });
   }

   private void startDownload() {
           DownloadFile downloadFile = new DownloadFile();
           downloadFile
                           .execute("http://www.website.com/file.pdf");

   }

   class DownloadFile extends AsyncTask<String, Integer, String> {

           @Override
           protected void onPreExecute() {
                   super.onPreExecute();
                   mProgressDialog.show();
           }

           @Override
           protected void onProgressUpdate(Integer... progress) {
                   super.onProgressUpdate(progress);
                   mProgressDialog.setProgress(progress[0]);
           }

           @Override
           protected String doInBackground(String... aurl) {
                   try {
                           URL url = new URL(aurl[0]);
                           URLConnection connection = url.openConnection();
                           connection.connect();

                           int fileLength = connection.getContentLength();
                           Log.d("ANDRO_ASYNC", "Lenght of file: " + fileLength);

                           InputStream input = new BufferedInputStream(url.openStream());
                           String path = Environment.getExternalStorageDirectory()
                                           + "/Android/Data/"
                                           + getApplicationContext().getPackageName() + "/files";
                           File file = new File(path);
                           file.mkdirs();
                           File outputFile = new File(file, "test1.doc");
                           OutputStream output = new FileOutputStream(outputFile);

                           byte data[] = new byte[8192];
                           long total = 0;
                           int count;
                           while ((count = input.read(data)) != -1) {
                                   total += count;
                                   publishProgress((int) (total * 100 / fileLength));
                                   output.write(data, 0, count);
                           }

                           output.flush();
                           output.close();
                           input.close();
                           showPdf();

                   } catch (Exception e) {
                   }
                   return null;
           }

           private void showPdf() {
                   // TODO Auto-generated method stub
           if(mProgressDialog != null){
                   mProgressDialog.dismiss();
           }

                   File file = new File(Environment.getExternalStorageDirectory()
                                   + "/Android/Data/"
                                   + getApplicationContext().getPackageName()
                                   + "/files/test1.doc");
                   PackageManager packageManager = getPackageManager();
                   Intent testIntent = new Intent(Intent.ACTION_VIEW);
                   testIntent.setType("application/msword");
                   List list = packageManager.queryIntentActivities(testIntent,
                                   PackageManager.MATCH_DEFAULT_ONLY);
                   Intent intent = new Intent();
                   intent.setAction(Intent.ACTION_VIEW);
                   Uri uri = Uri.fromFile(file);
                   intent.setDataAndType(uri, "application/msword");
                   startActivity(intent);
           }

   }
} 
```

使用 logcat 信息进行编辑：

```
--------- beginning of /dev/log/system
W/InputManagerService(  199): Window already focused, ignoring focus gain of:     com.android.internal.view.IInputMethodClient$Stub$Proxy@4137b898
--------- beginning of /dev/log/main
D/AndroidRuntime(20673): 
D/AndroidRuntime(20673): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
D/AndroidRuntime(20673): CheckJNI is OFF
D/AndroidRuntime(20673): Calling main entry com.android.commands.pm.Pm
D/AndroidRuntime(20673): Shutting down VM
D/dalvikvm(20673): GC_CONCURRENT freed 101K, 82% free 467K/2560K, paused 1ms+0ms
D/dalvikvm(20673): Debugger has detached; object registry had 1 entries
I/AndroidRuntime(20673): NOTE: attach of thread 'Binder Thread #3' failed
D/AndroidRuntime(20687): 
D/AndroidRuntime(20687): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
D/AndroidRuntime(20687): CheckJNI is OFF
D/AndroidRuntime(20687): Calling main entry com.android.commands.am.Am
I/ActivityManager(  199): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.myapp/.Activity} from pid 20687
D/AndroidRuntime(20687): Shutting down VM
D/dalvikvm(20687): GC_CONCURRENT freed 102K, 81% free 489K/2560K, paused 0ms+0ms
D/jdwp    (20687): Got wake-up signal, bailing out of select
D/dalvikvm(20687): Debugger has detached; object registry had 1 entries
I/AndroidRuntime(20687): NOTE: attach of thread 'Binder Thread #3' failed
D/dalvikvm(20698): Late-enabling CheckJNI
I/ActivityManager(  199): Start proc com.myapp for activity     com.myapp/.Activity: pid=20698 uid=10102 gids={1015, 3003}
I/dalvikvm(20698): Turning on JNI app bug workarounds for target SDK version 10...
V/PhoneStatusBar(  271): setLightsOn(true)
D/AudioHardware(   98): AudioHardware pcm playback is going to standby.
D/AudioHardware(   98): closePcmOut_l() mPcmOpenCnt: 1
I/ActivityManager(  199): Displayed com.myapp/.Activity: +197ms
W/InputManagerService(  199): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@4199ed28 (uid=10098 pid=20011)
I/ActivityManager(  199): START {cmp=com.myapp/.Choice} from pid 20698
D/AudioHardware(   98): AudioHardware pcm playback is exiting standby.
D/AudioHardware(   98): openPcmOut_l() mPcmOpenCnt: 0
V/PhoneStatusBar(  271): setLightsOn(true)
I/ActivityManager(  199): Displayed com.myapp/.Choice: +93ms
D/ANDRO_ASYNC(20698): Lenght of file: 736768
D/dalvikvm(20698): GC_CONCURRENT freed 103K, 3% free 9403K/9607K, paused 2ms+3ms
W/NetworkStats(  199): found non-monotonic values; saving to dropbox
D/dalvikvm(  199): JIT code cache reset in 5 ms (1048440 bytes 13/0)
D/dalvikvm(  199): GC_CONCURRENT freed 1472K, 13% free 24697K/28231K, paused 12ms+14ms
D/AudioHardware(   98): AudioHardware pcm playback is going to standby.
D/AudioHardware(   98): closePcmOut_l() mPcmOpenCnt: 1
I/ActivityManager(  199): Force stopping package com.myapp uid=10102
I/ActivityManager(  199): Killing proc 20698:com.myapp/10102: force stop
W/ActivityManager(  199): Force removing ActivityRecord{41eb1ec0 com.myapp/.Choice}: app died, no saved state
I/InputDispatcher(  199): Dropping event because there is no focused window or focused application.
I/ActivityManager(  199):   Force finishing activity ActivityRecord{418450c8 com.myapp/.Activity}
I/InputDispatcher(  199): Dropping event because there is no focused window or focused application.
W/InputDispatcher(  199): channel '417b41f0     com.myapp/com.myapp/.Activity (server)' ~     Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher(  199): channel '417b41f0 com.myapp/com.myapp.Activity (server)' ~ Channel is unrecoverably broken and will be disposed!
W/InputDispatcher(  199): Attempted to unregister already unregistered input channel '417b41f0 com.myapp/com.myapp.Activity (server)'
W/WindowManager(  199): Failed looking up window
W/WindowManager(  199): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@41c7ffc8 does not exist
W/WindowManager(  199): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7176)
W/WindowManager(  199): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7167)
W/WindowManager(  199): at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1545)
W/WindowManager(  199): at android.os.BinderProxy.sendDeathNotice(Binder.java:417)
W/WindowManager(  199): at dalvik.system.NativeStart.run(Native Method)
I/WindowManager(  199): WIN DEATH: null
I/WindowManager(  199): WIN DEATH: Window{4175b280     com.myapp/com.myapp.Choice paused=false}
W/WindowManager(  199): Failed looking up window
W/WindowManager(  199): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@41758028 does not exist
W/WindowManager(  199): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7176)
W/WindowManager(  199): at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:7167)
W/WindowManager(  199): at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1545)
W/WindowManager(  199): at android.os.BinderProxy.sendDeathNotice(Binder.java:417)
W/WindowManager(  199): at dalvik.system.NativeStart.run(Native Method)
I/WindowManager(  199): WIN DEATH: null
W/InputManagerService(  199): Got RemoteException sending setActive(false) notification to pid 20698 uid 10102
D/dalvikvm(20011): GC_CONCURRENT freed 460K, 32% free 9468K/13767K, paused 3ms+4ms
D/AudioHardware(   98): AudioHardware pcm playback is exiting standby.
D/AudioHardware(   98): openPcmOut_l() mPcmOpenCnt: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:14:00.213

我已经尝试下载您的文件几次，看起来下载会在这里和那里停顿几秒钟，这可能会触发您的应用程序超时。尝试在 10-20 秒范围内明确指定超时。

```
private DefaultHttpClient httpclient = new DefaultHttpClient();
private HttpGet get = new HttpGet("your url comes here");

protected String[] doInBackground(Void... v) {
    HttpParams httpParameters = new BasicHttpParams();
    // set the timeout in milliseconds until a connection is established
    // the default value is zero, that means the timeout is not used 
    int timeoutConnection = 3000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
    // set the default socket timeout (SO_TIMEOUT) in milliseconds
    // which is the timeout for waiting for data
    int timeoutSocket = 5000;
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    httpclient.setParams(httpParameters);

    try {
        HttpEntity entity = httpclient.execute( get ).getEntity();
        FileOutputStream output = new FileOutputStream(outputFile);
        entity.writeTo(output);
        output.close();
        // return something, maybe?
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        httpclient.getConnectionManager().shutdown();
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T03:44:26.377

问题似乎是您的 logcat 中的进程 199 似乎是您的活动，但随后它显示：

```
I/ActivityManager(  199): Force stopping package com.viperean.atcassistant uid=10102
I/ActivityManager(  199): Killing proc 20698:com.viperean.atcassistant/10102: force stop
W/ActivityManager(  199): Force removing ActivityRecord{41eb1ec0 com.viperean.atcassistant/.atcChoice}: app died, no saved state 
```

（第二行显示它正在杀死你的异步任务......）。

我认为下载代码本身没有任何问题。我认为你应该更多地关注活动（在那段时间里你在那个异步任务旁边做什么，你在屏幕上显示什么......等等......）。

似乎你的堆空间也很低。

```
D/dalvikvm(20698): GC_CONCURRENT freed 103K, 3% free 9403K/9607K, paused 2ms+3ms
D/dalvikvm(  199): JIT code cache reset in 5 ms (1048440 bytes 13/0)
D/dalvikvm(  199): GC_CONCURRENT freed 1472K, 13% free 24697K/28231K, paused 12ms+14ms 
```

这些来自垃圾收集，并且发生在您的应用程序崩溃之前，也许这也可能是一个问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T11:19:02.497

如果超过五分钟没有响应，Android 中的每个线程都会被系统杀死。也许您应该考虑将下载作为服务或覆盖`onProgress`并让线程保持活力

# iphone - 从 iPhone 通过 udp 发送“Hello World”消息

> ID：10391765
> 
> 赞同：4
> 
> 时间：2012-04-30T23:17:21.740
> 
> 标签：iphone, objective-c, sockets, udp

我是目标 C 的新手，我需要通过 UDP 发送一条简单的消息。服务器部分正在工作，因为它是用 C# 实现的。

C#中的服务器代码是：

```
 var server = new UdpClient(8585);
 var groupEP = new IPEndPoint(IPAddress.Parse("192.168.0.120"),8585);
 byte[] bytes = server.Receive(ref groupEP); 
```

c# 中的客户端部分是：

```
 System.Net.Sockets.UdpClient client;     
client = new System.Net.Sockets.UdpClient("192.168.0.120",8585);    
client.Send(new byte[]{1,2,3,4},4); 
```

如何在目标 c 中执行相同的客户端部分？我知道互联网上有很多教程，例如[这个库](http://code.google.com/p/cocoaasyncsocket/)。当我将该库导入我的项目时，我不知道如何实例化一个新对象。我试过了：

```
 [[GCDAsyncUdpSocket alloc] initWithSocketQueue:... ??? I don't know how to initialize it. 
```

如果有人可以向我展示一个简单的例子，我将不胜感激如何将客户端部分复制到目标 c 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T16:56:00.050

[从这里](http://code.google.com/p/cocoaasyncsocket/)下载 GCDAsyncUdpSocket 。那么您可以将数据包发送为：

```
 GCDAsyncUdpSocket *udpSocket ; // create this first part as a global variable
 udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

 NSData *data = [ 
                   [NSString stringWithFormat:@"%Hello Wold" 
                    dataUsingEncoding:NSUTF8StringEncoding
                ];

[udpSocket sendData:data toHost:@"192.168.10.111" port:550 withTimeout:-1 tag:1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:48:12.437

Apple 提供了一个名为[UDPEcho](http://developer.apple.com/library/mac/#samplecode/UDPEcho/Listings/Read_Me_About_UDPEcho_txt.html)的示例项目。虽然它是一个 Mac 项目，但它主要依赖于 Core Foundation 的课程，这些课程也可以在 iOS 上使用，并且它包含的课程应该同样适用于 iOS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T23:42:02.717

首先，阅读[这篇文章](http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/GS_Networking_iPhone/_index.html#//apple_ref/doc/uid/TP40007301)，它概述了 iOS 中可用的一些基本网络通信类型。

特别是，Apple 有一个使用套接字和`NSStream`类[的](https://developer.apple.com/library/ios/#samplecode/SimpleNetworkStreams/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008979-Intro-DontLinkElementID_2)网络通信示例。

您*可以*使用普通的 BSD 套接字 API，但不鼓励这样做，因为它们不能与某些 iOS 网络功能（如按需 VPN）一起使用。如果这无关紧要，那么您可以[在此处](http://developerweb.net/)查看如何在 C 中使用套接字的示例。

从个人经验来看，它并不像你在 C# 中得到的那么容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T03:54:25.040

我设法使用单点触控解决了这个问题。我只是按照我在 c# 中执行的方式执行此操作：

```
 System.Net.Sockets.UdpClient client;
 client = new System.Net.Sockets.UdpClient("192.168.0.120",550);
 client.Send(new byte[]{1,2,3,4},4); 
```

不过我不想为许可证付费。它将花费 400 美元。如果我在哪里有超过 3 行代码，我可能会想到它。

# c# - 搜索字符串，检索下一行

> ID：10391768
> 
> 赞同：1
> 
> 时间：2012-04-30T23:17:54.290
> 
> 标签：c#, html, parsing, html-parsing

我正在阅读一个巨大的 HTML 字符串，其中包含我需要从中提取的一些信息。我可以设置搜索参数（在哪里解析），但是如何在不保存到临时文件然后使用的情况下实现这一点`StreamReader`？

例子：

```
//Pertinent data starts here:
<!--
   body for the page starts here
-->

    <table border="0" >
      <tr>
        <td class='HeaderTD'><b>User Name</b></td>
        <td class='HeaderTD'><b>Mark TheMan</b></td>
      </tr>
      <tr>
        <td class='DataTD_Black_Bold '>Department</td>
        <td class='DataTD'>Programming</td>
      </tr>
      <tr>
        <td class='DataTD_Black_Bold '>Office Phone</td>
        <td class='DataTD'>555-555-5555</td>
      </tr>
      <tr>
        <td class='DataTD_Black_Bold '>Office Ext</td>
        <td class='DataTD'>x5555</td> 
```

我只需将类中的一些属性设置为各个字段（它们是字符串）：

```
User.UserName = "Mark TheMan";
User.Department = "Programming";
User.OfficePhone = "555-555-5555"; 
```

等等

您会看到我需要搜索包含类似内容的行，`"<b>User Name</b>"`然后返回下一行，以便我可以解析出所需的数据。如果您需要更多信息，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:20:11.440

你应该使用 Html 解析器，[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)非常好。

这是一个小控制台应用程序，向您展示从表中提取数据是多么容易：

```
static void Main(string[] args)
{
  HtmlDocument doc = new HtmlDocument();
  doc.Load("example.html");
  foreach (HtmlNode table in doc.DocumentNode.SelectNodes("//table"))
  {
    foreach (HtmlNode row in table.SelectNodes("tr"))
    {
      foreach (HtmlNode cell in row.SelectNodes("th|td"))
      {
        Console.WriteLine("Cell value : " + cell.InnerText);
      }
    }
  }
} 
```

对于您的示例输出将是：

> ```
> Cell value : User Name
> Cell value : Mark TheMan
> Cell value : Department
> Cell value : Programming
> Cell value : Office Phone
> Cell value : 555-555-5555 
> ```

# user-interface - 在 GUI 程序中的屏幕之间导航的最佳实践

> ID：10391769
> 
> 赞同：1
> 
> 时间：2012-04-30T23:17:58.907
> 
> 标签：user-interface, navigation, window

我正在研究 GUI 编程，并且对于非常简单的 GUI 脚本做得很好，但是由于有机会制作更大、更完整的“现实世界”程序的原型，我有一些疑问。

具体来说，我不知道应该如何处理屏幕之间的导航。例如：

*   我创建一个窗口
*   我创建了窗口的内容（一个有很多小部件的面板小部件）
*   单击其中一个小部件时，“进入另一个屏幕”

这个“其他屏幕”据说是替换当前窗口内容的东西。但是程序实际上应该做什么呢？- 销毁面板小部件？- 隐藏/删除面板小部件，但让它在内存中“活”在屏幕外？

破坏整个窗口并创建另一个窗口很可能不是这样做的方法。

某种形式的导航（回溯）是我计划实现的。

问题的核心是：在大多数程序中，它通常是如何完成的——“通常”、“当前”或“明显”的方式是什么？

感谢您的阅读，如果问题令人困惑和/或含糊不清，我们深表歉意。

（注意：我使用 PyGTK，但我想 que 问题与工具包无关）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:54:45.327

第一个窗口是父窗口，单击或导航上的窗口可以是您的子窗口。您可以有一个大子窗口、大子窗口等。

您无需删除父窗口。子窗口可以在它上面绘制。

# iframe - IE8 对 postMessage 到 IFrame 有任何特定限制吗？

> ID：10391770
> 
> 赞同：0
> 
> 时间：2012-04-30T23:18:45.160
> 
> 标签：iframe, internet-explorer-8, postmessage

我有一个带有 iframe 的 Web 应用程序，需要与其托管页面进行通信。iframe 和主机位于不同的域和协议上（iframe 是 https，主页是 http）。我使用 postMessage 从外部页面获取一小部分状态（用户跟踪）到 iframe。

加载 iframe 时，它​​会向首页发送一条短消息以询问访问者 ID：

```
if ($.w.top != $.w) $.f.postMessage($.w.top, 'Get visitorId'); 
```

（$.f.postMessage(w, m) 只是 postMessage 的一个包装器，如果 typeof w.postMessage === 'undefined' 则什么都不做）。在外部页面上，我们有一个消息监听器：

```
// Set up event listener so that we can respond when any iframes
// inside of us ask for our visitorId
$.f.listen($.w, 'message', giveVisitorId);
function giveVisitorId(event) {
  $.w['zzzzz'] = event.source;
  if (event.data === 'Get visitorId') {
    alert('about to reply from '+window.location.href+' with visitorid, typeof event.source.postMessage is ' + typeof(event.source.postMessage));
    event.source.postMessage('visitorId=' + $.v.visitorId, '*');
  }
} 
```

内部框架有一个为响应注册的侦听器：

```
$.f.listen($.w, 'message', receiveVisitorId);

function receiveVisitorId(event) {
  alert('receiveVisitorId called with: ' + event.data + ' in window '+window.location.href);
  var s = event.data.split('=');
  if (s[0] === 'visitorId' && s.length === 2) {
    $.v.visitorId = s[1];
    $.w.clearTimeout(giveUp);
    rest();
  }
} 
```

这一切都可以在 OSX 上的 chrome 和 firefox 上正常工作（加载 iframe 时，我们会收到两个警报，一个来自 receiveVisitorId，一个来自 giveVisitorId）；但是在 XP 上的 IE8 上，我们只收到第一个警报（来自 giveVisitorId）。

这很奇怪，因为似乎发出的 postMessage 有效，而进入的则无效；真正令人困惑的是，如果我们进入控制台并`zzzzz.postMessage('hi', '*')`在 receiveVisitorId 中运行警报，就会发生预期的结果！（请注意，我们将 event.source 保存在 window.zzzzz 中）。

有谁知道为什么会发生这种情况？

PS：$.w.listen 和 $.w.postMessage 的定义，供参考：

```
listen: function (el, ev, fn) {
  if (typeof $.w.addEventListener !== 'undefined') {
    el.addEventListener(ev, fn, false);
  }
  else if (typeof $.w.attachEvent !== 'undefined') {
    el.attachEvent('on' + ev, fn);
  }
},
postMessage: function(w, m) {
  if (typeof w.postMessage !== 'undefined') {
    w.postMessage(m, "*");
  }
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T19:19:38.233

我们解决了。问题是我们在内部 iframe中调用`$.f.listen`after ；`$.f.postMessage`因此，当外部窗口向内部发送消息时，尚未附加侦听器。我不知道为什么这发生在 IE 而不是 chrome 或 firefox 中，但我们只是将其归结为浏览器之间的时间差异。

# java - Java 方法无法提取文件

> ID：10391772
> 
> 赞同：0
> 
> 时间：2012-04-30T23:19:25.383
> 
> 标签：java, file-io, java.util.scanner

我正在编写一个 Java 程序，该程序具有文件的工作拖放 GUI。在 DnD GUI 中拖动的所有文件都放入包含文件名的字符串数组中。我有一个方法可以遍历数组并剥离路径以仅保留文件名，然后在每个循环结束时将文件名（用于扫描仪）和所需的输出文件名（用于 PrintWriter）发送到此方法：

```
public void fileGenerator(String in, String out) {          
    try {
    String current_directory = System.getProperty("user.dir");
    Scanner input = new Scanner(new FileReader(current_directory+"/"+in));
    PrintWriter output = new PrintWriter(current_directory+"/"+out);
        while(input.hasNext()) {
            String line = input.nextLine();
            output.println(line);
        } output.close(); 
    input.close();
    } catch (FileNotFoundException e) {
        System.out.println(e.getMessage());
    }
} 
```

该代码不起作用，它不会生成输出文件。我收到完整路径的“没有这样的文件或目录”错误...我已经在终端中对其进行了测试，它是正确的路径。任何输入表示赞赏。

我应该注意到所有的 Java 源文件、类和输入文件都在同一个目录中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:24:37.297

我看到的第一个问题是你忽略了异常，所以你不知道它是否成功打开了输入文件。不要忽略异常，即使你不知道如何处理它们，打印它们以便以后分析你的问题。

其次，调试代码，看看它在哪里得到了异常，如果有的话，看看每一步的值是什么。

第三，回答您的问题，假设您使用Eclipse，如果您引用具有相对路径的文件，则工作目录不是源/类文件夹，而是项目文件夹。

# php - 查找字符串中未使用的所有字母

> ID：10391775
> 
> 赞同：5
> 
> 时间：2012-04-30T23:19:26.973
> 
> 标签：php, string

我希望能够做这样的事情：

```
$str="abc";
echo findNot($str); //will echo "defghijklomnopqrstuvwxyz"
$str2="happy birthday";
echo findNot($str2); //will echo "cfgjklmnoqsuvwxz" 
```

基本上，它会找到字符串中未表示的所有字母，并将它们以数组或字符串的形式返回。

我可以用字符数组轻松做到这一点`foreach`，但我想知道是否有人有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T23:26:26.520

这就是我想出的。

```
function findNot($str){
    return array_diff(range('a','z'), array_unique(str_split(strtolower($str))));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T23:23:19.573

这个怎么样

```
$str="abc";
var_dump(findNot($str));

function findNot($string)
{
    $letters = range('a', 'z');
    $presents = array_map(function($i) { return chr($i); }, array_keys(array_filter(count_chars($string))));

    return array_diff($letters, $presents);
} 
```

PS：`implode`如果您需要一串字符而不是数组的结果

PPS：不确定它是否是“更优雅”的解决方案:-)

PPPS：我能想到的另一个解决方案是

```
$str="abc";
var_dump(findNot($str));

function findNot($string)
{
    $letters = range('a', 'z');
    $presents = str_split(count_chars($string, 4));
    return array_intersect($letters, $presents);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T23:27:30.870

你可以这样做：

```
$text = 'abcdefghijklmnop';
$search = array('a','b','c');

$result = str_replace($search, '', $text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T23:25:39.797

Zerk 的解决方案很好。我想出了这个类似的例子，不是那么优雅。

```
<?php

$alphabet = 'abcdefghijklmnopqrstuvwxyz';
$alphabet = preg_split('//', $alphabet, -1, PREG_SPLIT_NO_EMPTY);

$str="abc";
var_dump( findNot($str) ); //will echo "defghijklomnopqrstuvwxyz"
$str2="happy birthday";
var_dump( findNot($str2) ); //will echo "cfgjklmnoqsuvwxz"

function findNot($str)
{
    global $alphabet;

    $str   = str_replace(' ', '', $str);
    $chars = preg_split('//', $str, -1, PREG_SPLIT_NO_EMPTY);
    $chars = array_unique($chars);
    sort($chars);

    $diff = array_diff($alphabet, $chars);

    return $diff;
} 
```

# php - 寻找一个 WordPress 插件作为示例/起点

> ID：10391777
> 
> 赞同：0
> 
> 时间：2012-04-30T23:19:36.837
> 
> 标签：php, wordpress, open-source

我想编写一个 WordPress 插件，它能够维护潜在详细条目的数据库，然后是这些条目的可过滤视图。具体来说，我想维护一个球员名单，每个球员都有一组特定的字段。它将主要包括简单的字段，尽管我预计还需要上传和参考照片。

我认为这其中最难的部分是管理页面，为表提供基本的 CRUD 功能，然后可能是可过滤视图。我还假设这足够具体，以至于没有开箱即用的插件可以满足我的需求。找到一个的尝试是空的，一个[已经失效的](http://wordpress.org/extend/plugins/leaguemanager/)努力，一个比我想开始的[复杂得多的努力。](http://www.wp-swimteam.org/)

所以，任何人都可以指出一个很好的开源插件示例，它可以让我开始，特别是创建自定义表并提供类似 CRUD 的管理页面来维护表的东西。我确信我可以编写独立的 php 脚本来执行此操作，但我想在 WP 的上下文中编写它，并考虑将其发布回社区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T06:26:17.640

对于管理员中的 CRUD 应用程序，我想推荐 WP MVC。WP MVC 是 WordPress 的 MVC 框架，作为插件分发。它不是开箱即用的解决方案，但掌握后，它可以帮助您快速编写此类应用程序。最新的稳定版本 (1.2) 允许您将自定义模型（存储在专用表中）与 WordPress 数据（Posts、PostsMeta、Users/UsersMeta 和 Comments/CommentsMeta）集成。

# java - 从文件创建一个 BufferedImage 并将其设为 TYPE_INT_ARGB

> ID：10391778
> 
> 赞同：39
> 
> 时间：2012-04-30T23:19:44.487
> 
> 标签：java, image, image-manipulation, bufferedimage, argb

我有一个透明的 PNG 文件，它被加载并存储在`BufferedImage`. 我需要`BufferedImage`这个`TYPE_INT_ARGB`。但是，当我使用`getType()`返回值是 0 ( `TYPE_CUSTOM`) 而不是 2 ( `TYPE_INT_ARGB`) 时。

这就是我加载的方式`.png`：

```
public File img = new File("imagen.png");

public BufferedImage buffImg = 
    new BufferedImage(240, 240, BufferedImage.TYPE_INT_ARGB);

try { 
    buffImg = ImageIO.read(img ); 
} 
catch (IOException e) { }

System.out.Println(buffImg.getType()); //Prints 0 instead of 2 
```

如何加载.png，保存`BufferedImage`并制作它`TYPE_INT_ARGB`？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-01T00:03:48.093

```
BufferedImage in = ImageIO.read(img);

BufferedImage newImage = new BufferedImage(
    in.getWidth(), in.getHeight(), BufferedImage.TYPE_INT_ARGB);

Graphics2D g = newImage.createGraphics();
g.drawImage(in, 0, 0, null);
g.dispose(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-10T23:42:41.297

```
try {
    File img = new File("somefile.png");
    BufferedImage image = ImageIO.read(img ); 
    System.out.println(image);
} catch (IOException e) { 
    e.printStackTrace(); 
} 
```

我的图像文件的示例输出：

```
BufferedImage@5d391d: type = 5 ColorModel: #pixelBits = 24 
numComponents = 3 color 
space = java.awt.color.ICC_ColorSpace@50a649 
transparency = 1 
has alpha = false 
isAlphaPre = false 
ByteInterleavedRaster: 
width = 800 
height = 600 
#numDataElements 3 
dataOff[0] = 2 
```

您可以运行 System.out.println(object); 在几乎任何对象上并获取有关它的一些信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-12T22:24:42.247

**从文件创建一个 BufferedImage 并将其设为 TYPE_INT_RGB**

```
import java.io.*;
import java.awt.image.*;
import javax.imageio.*;
public class Main{
    public static void main(String args[]){
        try{
            BufferedImage img = new BufferedImage( 
                500, 500, BufferedImage.TYPE_INT_RGB );
            File f = new File("MyFile.png");
            int r = 5;
            int g = 25; 
            int b = 255;
            int col = (r << 16) | (g << 8) | b;
            for(int x = 0; x < 500; x++){
                for(int y = 20; y < 300; y++){
                    img.setRGB(x, y, col);
                }
            }
            ImageIO.write(img, "PNG", f); 
        }
        catch(Exception e){ 
            e.printStackTrace();
        }
    }
} 
```

这会在顶部画出一条大的蓝色条纹。

**如果你想要它 ARGB，请这样做：**

```
 try{
        BufferedImage img = new BufferedImage( 
            500, 500, BufferedImage.TYPE_INT_ARGB );
        File f = new File("MyFile.png");
        int r = 255;
        int g = 10;
        int b = 57;
        int alpha = 255;
        int col = (alpha << 24) | (r << 16) | (g << 8) | b;
        for(int x = 0; x < 500; x++){
            for(int y = 20; y < 30; y++){
                img.setRGB(x, y, col);
            }
        }
        ImageIO.write(img, "PNG", f);
    }
    catch(Exception e){
        e.printStackTrace();
    } 
```

打开 MyFile.png，它的顶部有一条红色条纹。

# assembly - 如何设置堆栈段

> ID：10391782
> 
> 赞同：0
> 
> 时间：2012-04-30T23:20:08.250
> 
> 标签：assembly

有人可以帮助了解如何为操作系统设置堆栈。

据我了解，SS是由“程序员”设置为1024（1k）并将SP移到它的顶部，对吗？

我在 MikeOS 教程中找到了以下内容，不确定如何将 544 添加到 07c0 将添加 4k 缓冲区

```
bootloader_start:

    mov ax, 07C0h           ; Set up 4K of stack space above buffer

    add ax, 544         ; 8k buffer = 512 paragraphs + 32 paragraphs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:29:02.413

这是我用来设置堆栈段的代码。

```
; NASM syntax
xor ax, ax ; or set ax to whatever segment you wish
mov ss, ax ; IIRC, you can't just go mov ss, 0
mov sp, 0xF000 ; or set sp to whatever you wish 
```

我认为我不必将堆栈放在那里。只要不覆盖系统数据，您就可以将其放在任何您想要的位置。

# mysql - mySQL 在 SELECT 查询中将整数转换为文本

> ID：10391786
> 
> 赞同：0
> 
> 时间：2012-04-30T23:20:43.230
> 
> 标签：mysql

我想在 mySQL 选择查询中将整数转换为文本。这是一张桌子的样子：

```
Languages
--------
1,2,3 
```

我想将每个整数转换为一种语言（例如，1 => 英语、2 => 法语等）

我一直在阅读 mySQL 中的 CONVERT 和 CAST 函数，但它们似乎主要关注将各种数据类型转换为整数。而且我找不到任何处理我存储数据的特定方式（一个字段中有多个数字）的任何内容。

如何在 mySQL 查询中将整数转换为文本？

**更新**

这是我的 mySQL 查询：

```
SELECT u.id, ulp.userid, ulp.languages, ll.id, ll.language_detail
FROM users AS u
JOIN user_language_profile AS ulp ON (ulp.userid = u.id)
JOIN language_detail AS ll ON (ulp.languages = ll.id) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T23:22:57.563

使用任一：

*   MySQL的[`ELT()`](https://dev.mysql.com/doc/en/string-functions.html#function_elt)功能：

    ```
    SELECT
      ELT(Languages
         , 'English' -- 1
         , 'French'  -- 2
         -- etc.
      )
    FROM   table_name 
    ```

*   一个[`CASE`](http://dev.mysql.com/doc/en/control-flow-functions.html#operator_case)表达式：

    ```
    SELECT
      CASE Languages
        WHEN 1 THEN 'English'
        WHEN 2 THEN 'French'
        -- etc.
      END
    FROM table_name 
    ```

虽然，如果可能的话，我会尝试`JOIN`使用查找表（如@Mr.TAMER 所说）或将列的数据类型更改为[`ENUM('English','French',...)`](http://dev.mysql.com/doc/en/enum.html).

* * *

**更新**

从您的评论来看，现在似乎每个字段都包含一组[`SET`](http://dev.mysql.com/doc/en/set.html)语言（甚至可能使用数据类型？），您想用字符串替换数值吗？

首先，阅读[Bill Karwin](https://stackoverflow.com/a/3653574)对“在数据库列中存储分隔列表真的那么糟糕吗？”的出色回答。

在这种情况下，我建议您稍微规范化您的数据库：创建一个新的语言实体表，其中每条记录将现有表中实体的 PK 与*单一*语言相关联。然后，您可以使用`SELECT`带有聚合的查询（加入该新表）[`GROUP_CONCAT`](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)来获取所需的语言名称列表。

如果没有这种规范化，您唯一的选择是进行基于字符串的搜索和替换（这不会特别有效）；例如：

```
SELECT CONCAT_WS(',',
  IF(FIND_IN_SET('1', Languages), 'English', NULL),
  IF(FIND_IN_SET('2', Languages), 'French' , NULL),
  -- etc.
)
FROM table_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:24:41.320

您为什么不制作一个数字语言表，并在`SELECT`ing 时获取与您选择的那个数字相关联的语言。

**如果您想添加一种新语言，**这会更好。您只需将其插入表中，而不是更改代码中的所有查询，而且如果其他人正在使用您的代码也更容易（他们不会乐意调试和编辑所有查询）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T23:54:27.127

从您的其他评论中，您是说语言字段是嵌入逗号的文字字符串吗？

从 SQL 的角度来看，这是一个非常不可行的设计。应将可变数量的语言存储在另一个表中。

但是，如果你坚持现有的东西，你也许可以构建一个正则表达式替换算法，但它看起来非常脆弱，我不推荐它。如果您有超过 9 种语言，以下内容将被破坏，您将需要[Regexp UDF](http://www.mysqludf.org/lib_mysqludf_preg/)，这会带来很多复杂性。

假设简单的情况：

```
SELECT REPLACE(
            REPLACE(
                REPLACE(Languages, '1', 'English'),
                '2', 'French'),
            N, DESCRIPTION) 
```

等等。但我再说一遍：这是一个糟糕的数据设计。如果可以将其修复为：

```
person            person_lang          language
==========        ============         =========
person_id -----<  person_id
...               lang_id      >-----  lang_id
                                       lang_desc 
```

那我*强烈*建议你这样做。

# c# - 数据阅读器显示问题

> ID：10391789
> 
> 赞同：0
> 
> 时间：2012-04-30T23:21:03.693
> 
> 标签：c#, database, winforms, sqldatareader

使用带有 windows 窗体的 c# 从数据库中读取数据。

```
 while (reader.Read())
                {
                    textbox1.Text += reader["Person"] + reader["Occur"].ToString() + "\n";                    
                } 
```

有人可以弄清楚为什么会显示如下：

```
 John
     8 
```

代替：

```
 John 8 
```

编辑：这些只是我的数据库表中的一个例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:33:03.283

我认为有一个回车与数据库中的字符串一起存储。所以你可以很容易地摆脱它。

```
textbox1.Text += reader["Person"].ToString().Trim() + reader["Occur"].ToString(); 
```

# php - 如何获取用户输入的数据并正确插入？

> ID：10391794
> 
> 赞同：0
> 
> 时间：2012-04-30T23:21:53.977
> 
> 标签：php, sql

如何获取用户输入的数据 (SUCID) 并使用 SUCID、SID、CID 正确插入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T02:30:05.880

我认为你需要改变

```
<button type='submit'> 
```

到

```
<input type='submit'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T02:34:24.640

```
$SUCID = clean($_POST['SUCID']); 
```

我想你的函数 clean() 不能正常工作。

# java - 如何在不左移其余元素的情况下从 ArrayList 中删除元素

> ID：10391795
> 
> 赞同：5
> 
> 时间：2012-04-30T23:21:55.457
> 
> 标签：java, arraylist

当您从数组列表 ( `arrayList.remove(int n)`) 中删除一个元素时，它会自动将所有剩余元素向左移动。

我想知道元素是否有可能保持其位置。因此，例如，如果位置 2 的元素被删除，我希望位置 3 的元素保持原位，而不是移动到位置 2。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T23:24:31.227

```
list.set(2, null); 
```

这只是将索引 2 处的元素替换为 null，从而产生所需的结果。

# sockets - Nodejs TCP socket，结束时不包含remoteAddress信息

> ID：10391797
> 
> 赞同：1
> 
> 时间：2012-04-30T23:22:26.253
> 
> 标签：sockets, node.js, tcp

我正在构建一个简单的回显服务器，目的是学习有关使用 node.js 构建 tcp 服务的基础知识并找出可用的信息。

当我创建服务器时，如下所示，我可以访问有关incomingSocket 的信息，例如远程地址。为什么我无法访问有关关闭套接字的信息？以下是我的代码；我的评论表明我收到的输出。

```
var net = require ( 'net' );
var server = net.createServer (
    function ( incomingSocket )
    {
        //'connection' listener
        console.log ( 'Connection from ' + incomingSocket.remoteAddress + ':' + incomingSocket.remotePort + " established." );

        incomingSocket.on (
            'data' ,
            function ( data )
            {
                // The incomingSocket.remoteAddress is defined here
                console.log ( incomingSocket.remoteAddress + ':' + incomingSocket.remotePort + ' -> ' + data.toString () );
            }
        );

        incomingSocket.on (
            'close' ,
            function ()
            {
                // The incomingSocket.remoteAddress is undefined here
                console.log ( 'connection from ' + incomingSocket.remoteAddress + ' closed.' );
            }
        );
        incomingSocket.pipe ( incomingSocket );
    }
);
// listening to a port happens here 
```

我将不胜感激任何回应！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T18:25:34.977

不，因为当它进入套接字关闭事件的事件处理程序时，套接字对象不再存在。如果您需要在套接字关闭时显示客户端的远程地址，只需在客户端初始连接时存储远程地址即可。

```
var clients = new Array();

net.createServer(function(socket) {
   var remoteAddress = socket.remoteAddress;
   var remotePort = socket.remotePort;

   // Add to array of clients
   clients.push(remoteAddress + ':' + remotePort);

   console.log('Connection from ' + remoteAddress  + ':' + remotePort + " established.");

   socket.on('data', function(data) {
      console.log(remoteAddress + ':' + remotePort + ' -> ' + data.toString());
   });

   socket.on('close', function() {
      // Remove from array of clients
      clients.splice(clients.indexOf(remoteAddress + ':' + remotePort), 1);

      console.log('Connection from ' + remoteAddress + ':' + remotePort + ' closed.');
   });

   ... 
```

# javascript - 如何将 postMessage() 与 Google Chrome Frame ActiveX 对象一起使用

> ID：10391798
> 
> 赞同：1
> 
> 时间：2012-04-30T23:22:37.610
> 
> 标签：javascript, jquery, cross-domain, google-chrome-frame

在使用 Google Chrome Frame 的 activeX 对象时，我在让 postMessage() 工作时遇到问题。这是我的场景：

我有一个父页面，由于我现在不会进入的原因，无法**安装**Google Chrome Frame。为了打开使用 GCF 的外部页面，*我*需要通过在父页面中包含 CFInstance.js 文件来使用他们的 activeX 方法。我希望能够使用 postMessage 在父页面和子页面之间进行对话。

此处发布了一个示例：[带有 GCF 的 postMessage()](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/differences-between-chrome-and-chrome-frame)

但是，我并没有完全遵循这个例子，因为它没有很好地解释如何使用 ChromeFrame.postMessage()。有没有人使用这种方法成功过？

这是我的代码：

父页面：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
    <script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js'></script>
    <script type="text/javascript" src='http://infodev-cms/EDWIntegrator/AdamS/CFInstance.js'></script>
    <script src='http://infodev-cms/EDWIntegrator/AdamS/jquery.json-2.3.min.js'></script>
    <script>
      $(document).ready(function() {
        var gcf = new CFInstance({
          src: "http://infodev-cms/EDWIntegrator/AdamS/gcf.html"
        });
        document.body.appendChild(gcf);   

          if (window.attachEvent) {
            window.attachEvent('onmessage', message);                        
          }                       

        function message(event) {
          var messageParams = $.parseJSON(event.data);
          alert(messageParams);
        }                   
      });
    </script>
    <style>
/*-------CSS Reset-------*/
     html, body, div, span, object, h1, h2, h3, h4, h5, h6, p, blockquote, pre,
     a, address, code, img, 
     small, strong, dl, dt, dd, ol, ul, li,
     fieldset, form, label {
         margin: 0;
         padding: 0;
         border: 0;
         outline: 0;
         font-size: 100%;
         vertical-align: baseline;
         background: transparent;
     }  
     html {
      height: 100%;
     }   
     body {
       height: 100%;
       overflow: hidden;
     }
     .chromeFrameDefaultStyle  {
       border: 0 none;
       width: 100%;
       height: 100%;
     }      
    </style>
  </head>
  <body>

  </body>
</html> 
```

嵌套页面：

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <meta http-equiv="CACHE-CONTROL" content="NO-CACHE">
  <head>
    <title></title>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js'></script>
    <script src='http://infodev-cms/EDWIntegrator/AdamS/json2.js'></script>
    <script src='http://infodev-cms/EDWIntegrator/AdamS/jquery.json-2.3.min.js'></script>
    <script type="text/javascript" src='http://infodev-cms/EDWIntegrator/AdamS/CFInstance.js'></script>    

    <script>
     (function() {
       $(document).ready(function() {
         var gcf = new CFInstance;

        $('#submit').on('click', function() {
          var data = {
           name: $('#name').val(),
           email: $('#email').val(),
           message: $('#message').val() 
          };

          window.parent.postMessage($.toJSON(data), '*');

        });

       });       
     })();

    </script>
    <style>
/*-------CSS Reset-------*/

body, div, h1, form, fieldset, input, textarea {
    margin: 0; padding: 0; border: 0; outline: none;
}

html {
    height: 100%;
}

body {
    background: #728eaa;
    background: -moz-linear-gradient(top, #25303C 0%, #728EAA 100%); /* firefox */  
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#25303C), color-stop(100%,#728EAA)); /* webkit */
    font-family: sans-serif; 
}

#contact {
    width: 430px; margin: 60px auto; padding: 60px 30px;
    background: #c9d0de; border: 1px solid #e1e1e1;
    -moz-box-shadow: 0px 0px 8px #444;
    -webkit-box-shadow: 0px 0px 8px #444;
    border-radius: 15px; -moz-border-radius: 15px; -webkit-border-radius: 15px;
}

h1 {
    font-size: 35px; color: #445668; text-transform: uppercase;
    text-align: center; margin: 0 0 35px 0; text-shadow: 0px 1px 0px #f2f2f2;
}

label {
    float: left; clear: left; margin: 11px 20px 0 0; width: 95px;
    text-align: right; font-size: 16px; color: #445668; 
    text-transform: uppercase; text-shadow: 0px 1px 0px #f2f2f2;
}

input {
    width: 260px; height: 35px; padding: 5px 20px 0px 20px; margin: 0 0 20px 0; 
    background: #5E768D;
    background: -moz-linear-gradient(top, #546A7F 0%, #5E768D 20%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#546A7F), color-stop(20%,#5E768D)); /* webkit */
    border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px;
    -moz-box-shadow: 0px 1px 0px #f2f2f2;-webkit-box-shadow: 0px 1px 0px #f2f2f2;
    font-family: sans-serif; font-size: 16px; color: #f2f2f2; text-transform: uppercase; text-shadow: 0px -1px 0px #334f71; 
}
    input::-webkit-input-placeholder  {
        color: #a1b2c3; text-shadow: 0px -1px 0px #38506b;  
    }
    input:-moz-placeholder {
        color: #a1b2c3; text-shadow: 0px -1px 0px #38506b; 
    }

textarea {
    width: 260px; height: 170px; padding: 12px 20px 0px 20px; margin: 0 0 20px 0; 
    background: #5E768D;
    background: -moz-linear-gradient(top, #546A7F 0%, #5E768D 20%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#546A7F), color-stop(20%,#5E768D)); /* webkit */
    border-radius: 5px; -moz-border-radius: 5px; -webkit-border-radius: 5px;
    -moz-box-shadow: 0px 1px 0px #f2f2f2;-webkit-box-shadow: 0px 1px 0px #f2f2f2;
    font-family: sans-serif; font-size: 16px; color: #f2f2f2; text-transform: uppercase; text-shadow: 0px -1px 0px #334f71; 
}
    textarea::-webkit-input-placeholder  {
        color: #a1b2c3; text-shadow: 0px -1px 0px #38506b;  
    }
    textarea:-moz-placeholder {
        color: #a1b2c3; text-shadow: 0px -1px 0px #38506b; 
    }

input:focus, textarea:focus {
    background: #728eaa;
    background: -moz-linear-gradient(top, #668099 0%, #728eaa 20%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#668099), color-stop(20%,#728eaa)); /* webkit */
}

input[type=submit] {
    width: 185px; height: 52px; float: right; padding: 10px 15px; margin: 0 15px 0 0;
    -moz-box-shadow: 0px 0px 5px #999;-webkit-box-shadow: 0px 0px 5px #999;
    border: 1px solid #556f8c;
    background: -moz-linear-gradient(top, #718DA9 0%, #415D79 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#718DA9), color-stop(100%,#415D79)); /* webkit */
    cursor: pointer;
}

    </style>
  </head>
 <body>

  <div id="contact">
    <h1>Send an email</h1>
    <form action="#" method="post">
        <fieldset>
            <label for="name">Name:</label>
            <input type="text" id="name" placeholder="Enter your full name" />

            <label for="email">Email:</label>
            <input type="email" id="email" placeholder="Enter your email address" />

            <label for="message">Message:</label>
            <textarea id="message" placeholder="What's on your mind?"></textarea>

            <input id="submit" type="submit" value="Send message" />

        </fieldset>
    </form>
  </div>

 </body>
</html> 
```

非常感谢您的宝贵时间。另外，请原谅我在这篇文章中可能犯的任何明显的新手错误（代码相关或其他），这是我在 stackoverflow 上的第一个问题。

# objective-c - NSKeyedArchiver 和 NSKeyedUnarchiver 与 NSMutableArray

> ID：10391803
> 
> 赞同：6
> 
> 时间：2012-04-30T23:23:03.213
> 
> 标签：objective-c, cocoa, nsmutablearray, nskeyedarchiver, archiving

我希望这与我在这里使用 Mutable 数组这一事实无关，但这让我感到困惑，所以如果是这样的话，我不会感到惊讶。

背景：

我制作了一个小型数据库，它本质上是一个包含自定义对象的 NSMutableArray，我们可以将其称为 recordObjects。我设置了数组：

```
database = [[NSMutableArray alloc] init]; 
```

我的自定义对象，称为“recordObject”包含以下变量和初始化：

```
NSString *name;
int       anInt;
Bool      aBool; 
```

我还合成了方法，因此我可以进行如下调用：

```
aString = [[database objectAtIndex:someIndex] name]; 
```

并向我的控制器类添加了方法来添加、删除和选择要显示的单个记录。到目前为止，一切都按预期正常工作。

接下来，我设置了我的 recordObject 类（NSObject 的子类）以使用 NSCoder（通过包含在 @interface 指令中，并在实现文件中添加了以下自定义编码器和解码器方法：

```
-(void) encodeWithCoder: (NSCoder *) encoder {
    [encoder encodeObject: name  forKey: @"recordName"];
    [encoder encodeInt:    anInt forKey: @"recordInteger"];
    [encoder encodeBool:   aBool forKey: @"recordBool"];
}

-(id) initWithCoder: (NSCoder *) decoder {
    name    = [decoder decodeObjectForKey: @"recordName"];
    anInt   = [decoder decodeIntForKey:    @"recordInteger"];
    aBool   = [decoder decodeBoolForKey:   @"recordBool"];
} 
```

为了编写文件，我使用了以下内容：

```
[NSKeyedArchiver archiveRootObject:database toFile:myPath]; 
```

当我运行程序时，一切似乎都正常工作。为数组中的每条记录调用编码器方法，并将文件写入磁盘。用 TextEdit 打开文件显示数据在那里（虽然对我来说大多难以理解。）

问题：

这是我遇到障碍的地方。

我添加了以下代码以将文件加载到我的数据库数组中：

```
database = [NSKeyedUnarchiver unarchiveObjectWithFile:myPath]; 
```

当我再次运行程序时，这次加载数据库，它似乎可以正常工作。我的第一个测试是使用 NSMutableArray 计数方法：

```
x = [database count]; 
```

结果是 X 填充了文件中正确数量的记录。如果我保存数据库时有 5 条记录，则在下次执行程序时加载数据库后将 X 设置为 5。

现在，这是一个大问题：

如果我尝试使用我的任何访问器方法，程序就会崩溃。例如，如果我在加载数据库后尝试使用以下内容：

```
aString = [[database objectAtIndex:someIndex] name]; 
```

程序崩溃并在控制台中返回以下错误：

```
Program received signal:  “EXC_BAD_ACCESS”.
sharedlibrary apply-load-rules all 
```

我的解释是，由于某种原因，数据没有正确加载和初始化到数据库数组中，但是对于我的生活，我无法弄清楚我在哪里出错了。

附带说明一下，我实现的所有内容都来自 Stephen G. Kochan 的《Objective-C 编程》一书

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T23:57:16.190

您的代码存在一些问题。

你的`initWithCoder:`方法没有完全实现。您必须调用`[super init]`并返回`self`。您还必须`copy`或`retain`字符串对象，否则它将被自动释放：

```
- (id)initWithCoder:(NSCoder *)decoder 
{
    self = [super init];
    if(self)
    {
         name    = [[decoder decodeObjectForKey: @"recordName"] copy];
         anInt   = [decoder decodeIntForKey:    @"recordInteger"];
         aBool   = [decoder decodeBoolForKey:   @"recordBool"];
    }
    return self;
} 
```

另一个问题是这一行：

```
database = [NSKeyedUnarchiver unarchiveObjectWithFile:myPath]; 
```

这很好，除了两件事：

1.  您没有持有对该对象的引用，因此它将被自动释放。
2.  `NSKeyedArchiver`返回一个不可变对象，在这种情况下是 an`NSArray`而不是 an `NSMutableArray`。

你需要这样做：

```
database = [[NSKeyedUnarchiver unarchiveObjectWithFile:myPath] mutableCopy]; 
```

这将保留对象（因为它是副本）并使对象成为`NSMutableArray`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T23:28:25.830

您似乎没有在 -initWithCoder 中初始化记录对象：

尝试这样的事情：

```
-(id) initWithCoder: (NSCoder *) decoder {

    self = [super init];

    if (self){

       name    = [decoder decodeObjectForKey: @"recordName"] copy];
       anInt   = [decoder decodeIntForKey:    @"recordInteger"];
       aBool   = [decoder decodeBoolForKey:   @"recordBool"];
     }

    return self;
} 
```

存档时数据就在那里，但您没有正确取消存档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T23:26:47.267

对我来说听起来像是内存管理问题。`EXC_BAD_ACCESS`通常意味着您正在尝试访问已被释放的对象。`unarchiveObjectWithFile:`返回一个自动释放的对象，因此如果要保留它，则必须保留它，无论是使用显式`retain`还是通过将其分配给保留属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T19:12:39.030

取消归档自定义对象时我遇到了同样的问题

```
self.calTable = [[NSKeyedUnarchiver unarchiveObjectWithFile:calibrationFile] objectForKey:@"calTable"]; 
```

根据 Rob 的回答，我改为

```
self.calTable = [[[NSKeyedUnarchiver unarchiveObjectWithFile:calibrationFile] mutableCopy] objectForKey:@"calTable"]; 
```

它修复了所有错误。

# php - 带有导航覆盖的简单幻灯片

> ID：10391808
> 
> 赞同：-1
> 
> 时间：2012-04-30T23:24:07.280
> 
> 标签：php, css, navigation, slideshow

我目前正在重新设计我的投资组合网站，并且我想使用最好的非 Flash 方法来创建我的布局中显示的以下幻灯片：

[http://oi49.tinypic.com/xeifeq.jpg](http://oi49.tinypic.com/xeifeq.jpg)

我在节目中只有 3 张幻灯片左右，我想叠加左/右导航按钮，如图所示。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:34:14.850

尽管您可以使用纯 CSS 解决方案，但您可以通过使用 javascript 为幻灯片制作动画来获得更好的浏览器支持。

大约有十亿个 javascript 插件可以为您执行此操作，但这是一个很好的插件 - [http://css-tricks.com/examples/AnythingSlider/](http://css-tricks.com/examples/AnythingSlider/)

您可以调整大多数插件的 CSS 以获得您想要的叠加箭头效果。我将使用的方法是将幻灯片的容器设置为 position:relative 然后将箭头设置为 position:absolute ...例如，现在可以使用 top:50% left:0 定位左箭头

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:35:35.427

有很多选择。使用 jQuery 之类的 javascript 库，可以轻松完成许多需要 flash 一次的动画。

尝试谷歌搜索，jQuery 滑块

# c# - 从查询结果中重新排序单个项目

> ID：10391809
> 
> 赞同：3
> 
> 时间：2012-04-30T23:24:12.513
> 
> 标签：c#, .net, plsql

我正在寻找一个优雅的解决方案来解决我遇到的订购问题。

我有一个数据库查询，它返回按名称排序的结果列表。结果将始终包含一个名为“主要项目”的项目，该项目始终需要首先出现在结果列表中。该项目没有由数据库中的单独字段标记，因此需要按名称标识。

例如，如果结果如下：

```
"A Item"
"B Item"
"Main Item"
"Y Item"
"Z Item" 
```

我需要保留字母顺序，但“主要项目”除外：

```
"Main Item"
"A Item"
"B Item"
"Y Item"
"Z Item" 
```

返回此数据的查询是用 pl/sql 编写的，我可以修改查询或在 .Net 端执行某些操作，其中我有一个 IEnumerable 对象，其中包含结果对象的集合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:27:56.763

您可以堆叠您的订单：

```
query
  .OrderBy(item => item.Title) // alphabetical
  .OrderByDescending(item => item.Title == "Main Item"); // put Main Item first, bool==true 
```

**编辑**

该列表是预先订购的，在`OrderBy`这种情况下只需要第二个

```
query.OrderByDescending(item => item.Title == "Main Item"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:28:04.633

试试这个查询：

```
SELECT * 
FROM MyTable 
ORDER BY 
        CASE 
            WHEN Name = 'Main Item' THEN ' ' 
            ELSE Name 
        END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T00:15:19.520

我喜欢 payo 的答案，但由于它第二次迭代整个集合而不是简单的元素移动逻辑，我认为发布这个答案也是合适的：

```
List<MyClass> items = GetItemsFromDB();

int i = items.FindIndex(x => x.Name == "Main Item");

MyClass mainItem = items[i];
items.RemoveAt(i);
items.Insert(0, mainItem); 
```

# javascript - Node.js 中的 Vows 回调测试生成匿名错误

> ID：10391814
> 
> 赞同：0
> 
> 时间：2012-04-30T23:24:45.253
> 
> 标签：javascript, node.js, asynchronous, bdd, vows

我对 Node.js 应用程序中使用的异步计算的延续传递风格不熟悉，我正在努力掌握一些相当基本的代码。

我正在尝试编写一个库，它将为 imap.gmail.com 创建一个 imap 接口，并且我正在尝试使用“vows”.js 来遵循 BDD（取得了不同程度的成功。我绝对没有遵循完整的红色->code->green cycle，我应该是，但很难以这种方式开始使用一种语言）。

相关的测试用例如下所示：

```
var gmail = require('../lib/gmail.js'),
    vows = require('vows'),
    assert = require('assert'),
    fs = require('fs');

vows.describe('Basic interface tests').addBatch({
  'A GMailInterface object can': {
    topic: function() {
      var gm = Object.create(gmail.GMailInterface);
      var settings_file = 'test/test_settings.json';
      var settings = JSON.parse(fs.readFileSync(settings_file));
      var that = this;
      gm.connect(settings.email,settings.password,function() {
        that.callback(gm); // ERROR BEING GENERATED HERE
      });
    },
     // ACTUAL VOWS OMITTED - the following is just a test of the callback
    'find an email' : {
      topic: function(gm) {
        console.log(">>>",gm);
      },
    }
  }
}).export(module) 
```

如果我在“此处生成错误”行的正上方写了一条 console.log 消息，它将打印出来。如果我在它下面放一条消息，它不会。测试的输出给出以下错误：

```
node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
Error: Uncaught, unspecified 'error' event.
    at EventEmitter.<anonymous> (events.js:50:15)
    at EventEmitter.emit (/Users/eblume/Repositories/my_stuff/gmail/node_modules/vows/lib/vows.js:236:24)
    at /Users/eblume/Repositories/my_stuff/gmail/node_modules/vows/lib/vows/context.js:31:52
    at Object.callback (/Users/eblume/Repositories/my_stuff/gmail/node_modules/vows/lib/vows/context.js:46:29)
    at Array.0 (/Users/eblume/Repositories/my_stuff/gmail/test/gmail_test.js:17:14)
    at EventEmitter._tickCallback (node.js:192:40) 
```

gmail.js 中的代码在此处发布有点过多，但这是我认为相关部分的内容 - 如果您在下面提出问题，我可以发布更多内容。

```
gm.connect = function(username,password,cb) {
  var self = this;
  self.conn = new ImapConnection({
    username: username,
    password: password,
    host: 'imap.gmail.com',
    port: 993,
    secure: true
  });

  async.series([
    function(callback){self.conn.connect(callback); },
    function(callback){self.conn.openBox('[Gmail]/All Mail',true,callback);}
  ],
  function(err,results) {
    if (err) {
      die(err);
    }
    process.nextTick(cb);
  });
}; 
```

我可能哪里出错了？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:55:25.603

我建议阅读“this”的工作原理。如果没有人弄乱它，则 'that'`that.callback`指的是用文字字符串标记为 'A GMailInterface object can' 的父对象。

我怀疑是这个因素绊倒了你。“回调”应该被定义为与“主题”方法相同的对象的方法，就像你设置事物的方式一样，这并不像它的工作方式那样让我感到震惊。

默认情况下，“this”通常指最近的祖先/父对象。它忽略包装函数，除非它们被用作使用“new”关键字的构造函数，在这种情况下它表示对象实例。对于 DOM 中的事件回调（浏览器 JS - 不是 node.js，我对事件并不深入了解），它通常指的是触发了事件的对象。

没有真正的混乱与那个和自我修复。在对象具有聚合对象的情况下，我们只是倾向于使用它们来确定我们正在处理顶级对象。

# tar - tar：这看起来不像 tar 存档

> ID：10391816
> 
> 赞同：1
> 
> 时间：2012-04-30T23:25:21.430
> 
> 标签：tar

我拆分了一个巨大的文件夹：

```
tar cvpf - somedir | split -b 50000m 
```

然后我将拆分文件传输到另一台服务器并合并它：

```
cat x* > somedir.tar.gz 
```

但是当我尝试提取文件时，它显示错误：

```
tar xvf tar xvf somedir.tar.gz tar: This does not look like a tar
archive tar: Skipping to next header tar: Archive contains obsolescent
base-64 headers tar: Error exit delayed from previous errors 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:32:08.243

不保证`x*`将扩展为与文件拆分相同的顺序。假设文件被分成三个块，那么第一个块将具有`tar(1)`标题，因此您必须以相同的方式将它们组装回来。

`ls(1)`与选项一起使用以`-t`按该顺序连接文件。希望有帮助。

# c++ - 如何在 C++ 中执行字节数组

> ID：10391817
> 
> 赞同：1
> 
> 时间：2012-04-30T23:25:26.157
> 
> 标签：c++

假设我有一个加密程序，我用一个解密器打开它，它将字节加载到一个数组中并解密它。

我想知道的是如何在不必创建另一个可执行文件的情况下执行这些字节。

我读到可以使用“分叉”，这是最好的方法。但是我无法成功运行我的代码，并且它不会返回任何错误。这是我得到的样本：

```
 //<main>
    char* lpMemory;
    lpMemory = (char*)malloc (fileSize);
    memset(lpMemory,0,fileSize);
    memcpy (lpMemory, fileBuf, fileSize);
    RunFromMemory(lpMemory, /* What here? */);

    //</main>

void RunFromMemory(char* pImage,char* pPath)
{
DWORD dwWritten = 0;
DWORD dwHeader = 0;
DWORD dwImageSize = 0;
DWORD dwSectionCount = 0;
DWORD dwSectionSize = 0;
DWORD firstSection = 0;
DWORD previousProtection = 0;
DWORD jmpSize = 0;

IMAGE_NT_HEADERS INH;
IMAGE_DOS_HEADER IDH;
IMAGE_SECTION_HEADER Sections[1000];

PROCESS_INFORMATION peProcessInformation;
STARTUPINFO peStartUpInformation;
CONTEXT pContext;

char* pMemory;
char* pFile;
memcpy(&IDH,pImage,sizeof(IDH));
memcpy(&INH,(void*)((DWORD)pImage+IDH.e_lfanew),sizeof(INH));

dwImageSize = INH.OptionalHeader.SizeOfImage;
pMemory = (char*)malloc(dwImageSize);
memset(pMemory,0,dwImageSize);
pFile = pMemory;

dwHeader = INH.OptionalHeader.SizeOfHeaders;
firstSection = (DWORD)(((DWORD)pImage+IDH.e_lfanew) + sizeof(IMAGE_NT_HEADERS));
memcpy(Sections,(char*)(firstSection),sizeof(IMAGE_SECTION_HEADER)*INH.FileHeader.NumberOfSections);

memcpy(pFile,pImage,dwHeader);

if((INH.OptionalHeader.SizeOfHeaders % INH.OptionalHeader.SectionAlignment)==0)
{
    jmpSize = INH.OptionalHeader.SizeOfHeaders;
}
else
{
    jmpSize = INH.OptionalHeader.SizeOfHeaders / INH.OptionalHeader.SectionAlignment;
    jmpSize += 1;
    jmpSize *= INH.OptionalHeader.SectionAlignment;
}

pFile = (char*)((DWORD)pFile + jmpSize);

for(dwSectionCount = 0; dwSectionCount < INH.FileHeader.NumberOfSections; dwSectionCount++)
{
    jmpSize = 0;
    dwSectionSize = Sections[dwSectionCount].SizeOfRawData;
    memcpy(pFile,(char*)(pImage + Sections[dwSectionCount].PointerToRawData),dwSectionSize);

    if((Sections[dwSectionCount].Misc.VirtualSize % INH.OptionalHeader.SectionAlignment)==0)
    {
        jmpSize = Sections[dwSectionCount].Misc.VirtualSize;
    }
    else
    {
        jmpSize = Sections[dwSectionCount].Misc.VirtualSize / INH.OptionalHeader.SectionAlignment;
        jmpSize += 1;
        jmpSize *= INH.OptionalHeader.SectionAlignment;
    }
    pFile = (char*)((DWORD)pFile + jmpSize);
}

memset(&peStartUpInformation,0,sizeof(STARTUPINFO));
memset(&peProcessInformation,0,sizeof(PROCESS_INFORMATION));
memset(&pContext,0,sizeof(CONTEXT));

peStartUpInformation.cb = sizeof(peStartUpInformation);
if(CreateProcess(NULL, pPath, NULL /*&secAttrib*/, NULL,false,CREATE_SUSPENDED, NULL,NULL,&peStartUpInformation,&peProcessInformation))
{
    pContext.ContextFlags = CONTEXT_FULL;
    GetThreadContext(peProcessInformation.hThread,&pContext);
    VirtualProtectEx(peProcessInformation.hProcess,(void*)((DWORD)INH.OptionalHeader.ImageBase),dwImageSize,PAGE_EXECUTE_READWRITE,&previousProtection);
    WriteProcessMemory(peProcessInformation.hProcess,(void*)((DWORD)INH.OptionalHeader.ImageBase),pMemory,dwImageSize,&dwWritten);
    WriteProcessMemory(peProcessInformation.hProcess,(void*)((DWORD)pContext.Ebx + 8),&INH.OptionalHeader.ImageBase,4,&dwWritten);
    pContext.Eax = INH.OptionalHeader.ImageBase + INH.OptionalHeader.AddressOfEntryPoint;
    SetThreadContext(peProcessInformation.hThread,&pContext);
    VirtualProtectEx(peProcessInformation.hProcess,(void*)((DWORD)INH.OptionalHeader.ImageBase),dwImageSize,previousProtection,0);
    ResumeThread(peProcessInformation.hThread);
}
free(pMemory);
} 
```

您可能已经猜到了，“fileSize”是程序的大小，“fileBuf”是字节数组。我确信这两个值都是正确的。

任何可能对我有帮助的资源链接都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:30:01.757

根据数组中的字节实际表示的内容，您可能只需将数组指针类型转换为函数指针，然后像其他任何方法一样调用“函数”。为此，该数组必须驻留在可执行内存中（请参阅 参考资料`VirtualProtect()`），并且只包含汇编指令的字节表示，没有其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:30:14.553

是的，这是可能的：最简单的方法是将字节数组的指针转换为函数指针，然后调用它。第二种方法是使用内联汇编器并对字节数组的地址执行 jmp。分配数组的堆或堆栈可能无法执行，那么您需要使用 VirtualProtect 和相关 api（对于 win32 ）。

# jquery - FF/Chrome/Safari 中的 jQuery .has(":focus")

> ID：10391823
> 
> 赞同：2
> 
> 时间：2012-04-30T23:25:41.977
> 
> 标签：jquery, jquery-selectors

我有一个文本框，当您在其下方键入结果时，该文本框具有过滤器。我有 jQuery 可以检测焦点何时离开文本框，因此它可以隐藏结果 div。但是，如果单击结果，我不想隐藏结果，以便我可以使用该单击重定向到该项目的不同页面。

我`.has(":focus")`用来检查我的结果 div**或其任何孩子**是否有焦点。我的问题是，据我所知，这只适用于 IE。有谁知道为什么？

```
$("#TextBox").blur(function () {
    if ($("#ResultsDIV").has(":focus").length == 0) {  //if you click on anything other than the results
        $("#ResultsDIV").hide();  //hide the results
    }
}); 
```

**更新：**感谢 Climbage 我有这个工作......

```
var resultsSelected = false;
$("#ResultsDIV").hover(
    function () { resultsSelected = true; },
    function () { resultsSelected = false; }
);
$("#TextBox").blur(function () {
    if (!resultsSelected) {  //if you click on anything other than the results
        $("#ResultsDIV").hide();  //hide the results
    }
}); 
```

**工作示例：http:** [//jsfiddle.net/cB2CN/](http://jsfiddle.net/cB2CN/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:35:50.267

问题是 DOM 上的所有非元素实际上都接受焦点，由浏览器决定哪些元素接受焦点。请参阅[哪些 HTML 元素可以接收焦点？](https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus)

也许`hover`你有一个事件，`#ResultsDIV`它设置了一个全局变量来确定当你点击它时元素是否有焦点。

# ruby - 如何两次调用 rake 目标

> ID：10391834
> 
> 赞同：3
> 
> 时间：2012-04-30T23:27:29.840
> 
> 标签：ruby, build, msbuild, rake, target

我通过修改 .csproj 文件以包含额外的编译符号，从我的 .sln 生成两组不同的 DLL 文件。我正在使用 rake 构建解决方案，并具有以下构建任务：

```
#==========================================================
desc "Builds the DPSF.sln in Release mode."
msbuild :Build do |msb|
    puts 'Building the DPSF solution...'
    msb.properties :configuration => :Release
    msb.targets [:Clean, :Rebuild]
    msb.solution = DPSF_SOLUTION_FILE_PATH
    msb.parameters "/nologo", "/maxcpucount", "/fileLogger", "/noconsolelogger"
    msb.verbosity = "quiet" # Use "diagnostic" instead of "quiet" for troubleshooting build problems.

    # Delete the build log file if the build was successful (otherwise the script will puke before this point).
    File.delete('msbuild.log')
end 
```

然后我尝试使用以下方法生成两组 DLL 文件：

```
desc "Builds new regular and AsDrawableGameComponent DLLs."
task :BuildNewDLLs => [:DeleteExistingDLLs, :Build, :UpdateCsprojFilesToBuildAsDrawableGameComponentDLLs, :Build, :RevertCsprojFilesToBuildRegularDLLs] 
```

你可以看到我在这里调用 :Build 两次。问题是只有第一个运行。如果我复制/粘贴我的 :Build 目标并调用它 :Build2 并更改 :BuildNewDLLs 以第二次调用 :Build2 ，那么一切正常。那么如何才能让我可以从 :BuildNewDLLs 目标中多次调用 :Build 目标呢？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-08T21:58:51.157

I know this is an old question, but I just spent 15 minutes figuring this out, so for the sake of documentation, here goes:

You can call `reenable` from within the same task that you wish to reenable. And since the `task` block yields the current task as first argument, you can do:

```
task :thing do |t|
  puts "hello"
  t.reenable
end 
```

And now this works:

```
rake thing thing 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T23:43:56.460

默认情况下，Rake 将确保每个 rake 任务在每个会话中执行一次且仅执行一次。您可以使用以下代码重新启用构建任务。

```
::Rake.application['Build'].reenable 
```

这将允许它在同一个会话中重新执行。

# air - Adobe Air - 您可以使用多点触控事件而不是鼠标事件来拖动本机窗口吗？

> ID：10391836
> 
> 赞同：0
> 
> 时间：2012-04-30T23:27:36.923
> 
> 标签：air, adobe

我希望使用 nativeWindow.startMove() 来拖动 chrome，但使用的是 touchEvent 而不是鼠标事件。经过广泛的谷歌搜索后，我不确定这是否可能。

我还尝试在触发 touchEvent 时调度手动 mouseEvents。

最终，startMove 函数严格来说是仅鼠标驱动的函数，还是我可以通过 touchEvent 强制它发生？

任何输入将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:46:43.557

您可以手动更改 NativeWindow 的 x 和 y 属性以响应 TouchEvents，而不必使用 startMove()。

# asp.net-mvc - C# 中的 IEumerable 列表

> ID：10391844
> 
> 赞同：0
> 
> 时间：2012-04-30T23:28:41.980
> 
> 标签：asp.net-mvc, c#-4.0

我是 C# 新手，但对 OOP 并不陌生，我非常了解 Java。我被扔进了一个项目，那些为我们编写代码的人：

```
public List<IEnumerable<SelectListItem>> generateCriteriaOptions() 
```

我了解 Java 中的泛型，但不能根据此声明。据我了解，泛型列表将是列表，因此它对我来说没有意义，因为您在泛型类型中有泛型类型。有人可以为我解释一下这段代码。

这是完整的方法：

```
 public List<IEnumerable<SelectListItem>> generateCriteriaOptions()
    {
        List<IEnumerable<SelectListItem>> criteriaLists = new List<IEnumerable<SelectListItem>>();
        List<Object> list = new List<Object>();
        Patient p = new Patient();
        list.Add(new {key="",val="All"});
        list.Add(new { key = KEY_ACCOUNT_NUMBER, val = "Account #" });
        list.Add(new { key = KEY_PATIENT_TYPE, val = "Patient Type" });
        list.Add(new { key = KEY_SUBBED_TO, val = "Outsource Company" });
        criteriaLists.Add(new SelectList(list,"key","val"));

        return criteriaLists;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:48:14.387

Java 中的泛型与 .NET 中的泛型非常不同，因为 .NET 中没有*类型擦除*。您可以指定要返回一个 IEmumerable 列表，然后将 List 对象添加到您的列表中。因为 List 实现了 IEmumerable，所以这不是错误。

但是，在您的情况下，添加了 SelectList 类型的对象。我会猜测说 SelectList 实现了 SelectListItem 的 IEnumerable，或者继承了执行它的类。我还猜想除了 SelectList 之外，还有其他类可以作为 SelectListItems 的供应。由于从您的方法返回的 List 将泛型接口的实例而不是类指定为列表元素类型，因此您可以在同一个列表中混合和匹配 IEnumerable 的不同实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:55:36.290

`List<IEnumerable<SelectListItem>>`表示 的列表`IEnumerable<SelectListItem>`。换句话说，列表的每个元素都实现了`IEnumerable<SelectListItem>`. 所以这是一个`SelectListItem`序列列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T23:32:37.387

这意味着返回对象只是某种集合的列表`SelectListItems`（即集合的集合）。和 没有太大区别`SelectListItem[][]`。

# c++ - 如果执行时间过长，我可以中断函数吗？

> ID：10391845
> 
> 赞同：3
> 
> 时间：2012-04-30T23:28:45.233
> 
> 标签：c++, signals

我有我在我的程序中使用的第三方功能。我无法替换它；它在动态库中，所以我也无法编辑它。问题是它有时运行时间过长。

那么，例如，如果它运行超过 10 秒，我可以做些什么来阻止它运行吗？（在这种情况下可以关闭程序。）

PS。我有 Linux，这个程序不必移植到其他任何地方。

我想要的是这样的：

```
#include <stdio.h>
#include <stdlib.h>

void func1 (void) // I can not change contents of this.
{
  int i; // random
  while (i % 2 == 0);
}

int main ()
{
  setTryTime(10000);
  timeTry{
     func1();
  } catchTime {
     puts("function executed too long, aborting..");
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:32:15.927

当然。你会按照你在标题中建议的方式去做：“信号”。

具体来说，一个“警报”信号：

*   [http://linux.die.net/man/2/alarm](http://linux.die.net/man/2/alarm)

*   [http://beej.us/guide/bgipc/output/html/multipage/signals.html](http://beej.us/guide/bgipc/output/html/multipage/signals.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T23:41:40.160

如果您确实必须这样做，您可能希望生成一个进程，该进程除了调用函数并将其结果返回给调用者之外什么都不做。如果运行时间过长，您可以终止该进程。

通过将其放入自己的过程中，您有一个不错的（不是很好，但不错）的机会来清理至少大部分它正在做的事情，所以当它意外死亡时，它*可能*不会把事情弄得一团糟，这会导致到以后的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T01:58:22.130

强制取消正在运行的函数的潜在问题是它可能“拥有”它打算稍后返回的资源。可能出现问题的资源类型包括：

*   堆内存分配（自由存储）
*   共享内存段
*   线程
*   插座
*   文件句柄
*   锁

其中一些资源是在每个进程的基础上管理的，因此让函数在不同的进程中运行（可能使用`fork`）更容易干净地杀死。其他资源可能比进程寿命更长，并且确实必须明确清理。根据您的操作系统，该功能也可能是通过与某些硬件驱动程序或设备交互的部分方式，并且意外终止它可能会使该驱动程序或设备处于奇怪的状态，以至于它直到之后才会工作重新开始。

如果您碰巧知道该函数不使用任何此类资源，那么您可以自信地杀死它。但是，很难保证：在具有许多此类决策的大型系统中 - 编译器无法检查 - 函数中的代码演变`func1()`可能会引入对此类资源的依赖关系。

如果你必须这样做，我建议在不同的进程或线程中运行它，并使用`kill()`for 进程，`pthread_kill`如果 func1() 支持在异步设置标志时终止，或者`pthread_cancel`如果真的没有其他的则不可移植选择。

# matlab - 以与图形窗口相同的大小打印图形

> ID：10391849
> 
> 赞同：2
> 
> 时间：2012-04-30T23:29:30.357
> 
> 标签：matlab, printing, figure

我正在尝试以 PDF 格式保存一个图形，这样我就不会在它周围出现多余的空白，即图形应该与图形窗口的大小相同。

我很确定这样做的方法是

```
figureNames = {'a', 'b', 'c'};
for i = 1:3
    set(figure(i), 'paperpositionmode', 'auto');
    print(figure(i), '-dpdf', figureNames{i})
end 
```

但它不起作用。我得到了和以往一样多的空白。有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:38:37.847

我也有这方面的问题。解决方法是打印`-depsc`（彩色）或者`-deps`如果您只需要灰度图。封装的 postscript 文件几乎没有白边。您可以稍后将 .eps 文件轻松转换为 pdf，如果您在 LaTeX 中工作，则可以按原样使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T20:50:15.817

您可以尝试将数字转换为 pdf 文件的“一体化”解决方案。我使用 mlf2pdf ( [http://www.mathworks.com/matlabcentral/fileexchange/28545](http://www.mathworks.com/matlabcentral/fileexchange/28545) )，它似乎工作得很好。此外，由于所有东西都采用了乳胶排版，因此制作出来的人物的质量要好得多

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T21:03:46.180

似乎设置`PaperPositionMode`为`auto`将消除 EPS 文件的多余空白，但不是 PDF。

为了摆脱 PDF 的空白，我编写了一个小脚本来将纸张调整为图形大小。由于它很短，我将它包含在下面以防其他人需要它。

它的灵感来自[这个文档](http://tipstrickshowtos.blogspot.com/2010/08/how-to-get-rid-of-white-margin-in.html)，以及这个[StackOverflow 问题](https://stackoverflow.com/questions/3801730/get-rid-of-the-white-space-around-matlab-figures-pdf-output)。

我的解决方案通过仅操作纸张大小而不是图形轴来工作，因为操作轴会遇到子图的问题。这也意味着将保留*一些*空白。在 MATLAB 的词汇表中，这些数字是由它`OuterPosition`而不是`TightInset`.

```
function [filename] =  printpdf(fig, name)
% printpdf Prints image in PDF format without tons of white space

% The width and height of the figure are found
% The paper is set to be the same width and height as the figure
% The figure's bottom left corner is lined up with
% the paper's bottom left corner

% Set figure and paper to use the same unit
set(fig, 'Units', 'centimeters')
set(fig, 'PaperUnits','centimeters');

% Position of figure is of form [left bottom width height]
% We only care about width and height
pos = get(fig,'Position');

% Set paper size to be same as figure size
set(fig, 'PaperSize', [pos(3) pos(4)]);

% Set figure to start at bottom left of paper
% This ensures that figure and paper will match up in size
set(fig, 'PaperPositionMode', 'manual');
set(fig, 'PaperPosition', [0 0 pos(3) pos(4)]);

% Print as pdf
print(fig, '-dpdf', name)

% Return full file name
filename = [name, '.pdf'];
end 
```

# php - 防止暴力破解和 DoS 攻击的方法 - PHP 和 Apache

> ID：10391855
> 
> 赞同：5
> 
> 时间：2012-04-30T23:30:29.930
> 
> 标签：php, apache, memcached

在服务器和应用程序级别上防止 DoS 和暴力攻击的解决方案数不胜数——更不用说有点混乱了。我正在采取我的前几个步骤来强化我的一些 php 应用程序，并且想知道防止对用户表单的暴力/字典攻击的最佳实践，例如，请记住我已经使用了验证码:)

服务器级别预防 DoS 攻击的最佳实践是什么？

实验实现欢迎讨论

我的环境是：

*   php 5.2
*   阿帕奇 2x
*   自定义框架

注意：Memcached 即将实施，而 Floodcontrol 是我尚未尝试的一种方法 --- 也欢迎对此进行任何详细说明。

# jquery - jQuery 和 jQuery Mobile 的区别？

> ID：10391856
> 
> 赞同：93
> 
> 时间：2012-04-30T23:30:34.220
> 
> 标签：jquery, jquery-mobile

我是移动 Web 开发的新手，我刚刚使用 PhoneGap 制作了一个移动应用程序，经常使用 jQuery。

但是自然存在一些与我如何格式化事物以及它们在我正在测试的移动设备屏幕上的实际显示方式有关的小故障，在尝试解决这些问题时，我偶然发现了许多建议，通过使用jQuery 移动。

现在这让我很困惑——jQuery 没有格式化。那只是我对移动 CSS 的初学者水平的知识导致了这些问题。

那么jQuery mobile到底是做什么的，和普通的jQuery有什么不同呢？如果我已经了解 jQuery，那么对我来说会有什么新东西？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-05-01T00:15:21.667

**jQuery**纯粹是为了简化和标准化跨浏览器的脚本编写而设计的。它专注于底层的东西：创建元素、操作 DOM、管理属性、执行 HTTP 请求等。

**jQueryUI**是一组建立在 jQuery 之上的用户界面组件和功能（即它需要 jQuery 才能工作）：按钮、对话框、滑块、选项卡、更高级的动画、拖放功能。

jQuery 和 jQueryUI 都被设计为“添加”到您的网站（桌面或移动） - 如果您想添加特定功能，jQuery 或 jQueryUI 可能会提供帮助。

**然而，**jQuery Mobile是一个完整的框架。**它旨在成为您创建移动网站的起点。它需要 jQuery 并利用 jQuery 和 jQueryUI 的特性来提供 UI 组件和 API 特性来构建适合移动设备的网站。你仍然可以随心所欲地使用它，但如果你愿意的话，jQuery Mobile*可以*以一种对移动设备友好的方式控制整个视口。**

 **另一个主要区别是 jQuery 和 jQueryUI 旨在成为 HTML 和 CSS 之上的一个层。您应该能够不理会您的标记并使用 jQuery 对其进行增强。但是，jQuery Mobile 提供了单独使用 HTML 来定义您希望组件出现在何处的方法 - 例如（来自 jQuery Mobile 站点）：

```
<ul data-role="listview" data-inset="true" data-filter="true">
    <li><a href="#">Acura</a></li>
    <li><a href="#">Audi</a></li>
    <li><a href="#">BMW</a></li>
    <li><a href="#">Cadillac</a></li>
    <li><a href="#">Ferrari</a></li>
</ul> 
```

该`data-role`属性告诉 jQuery Mobile 将此列表转换为移动友好的 UI 组件，并且`data-inset`和`data-filter`属性设置该组件的属性 - 无需编写任何 JavaScript 代码。另一方面，jQueryUI 组件通常是通过编写几行 JavaScript 来在 DOM 中实例化组件来创建的。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-01T00:16:15.833

**什么是 jQuery Mobile**

JQM（jQuery mobile）是建立在jQuery之上的手机用户界面系统。JQM 需要 jQuery 才能工作。与其他类似的手机框架不同，JQM 的目标是支持所有主要的手机、平板电脑、电子阅读器和桌面平台，而不仅仅是移动 webkit 浏览器。该框架最显着的特性之一是使用动画页面转换的 Ajax 导航系统（非常酷）。

**什么对你来说可能是新的**

JQM 向新用户投掷曲线球的一件事是 ajax 导航。来自 jquery，您可能习惯于在每个页面中包含您的 javascript，然后使用 dom ready(`$(function(){ ... }`或`$(document).ready(function(){ .... }`) 来启动所有有趣的 javascript 活动。但是因为 JQM 使用 ajax 导航，系统会将其他页面拉到与第一页相同的 dom 中，并且不会加载包含在`<head>`. 当通过 ajax 加载下一页时，您会注意到您的内容在`$(function(){ ...}`第二页上不起作用。解决方案是绑定到 pageinit 事件。以下示例将在您的旅程开始时为您提供帮助：

```
$(document).on('pageinit', function(){ // this fires for each new page

}); 
```

为了定位某个页面，您添加页面的 id：

```
$(document).on('pageinit','#page2', function(){ // this fires for #page2 only 

}); 
```

在开始使用 JQM 时，了解新的页面事件将对您有很大帮助。[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)祝你好运！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-30T23:32:41.690

jQuery 是一个 DOM 操作/遍历和 AJAX JavaScript 框架。它自动抽象出不同浏览器之间的许多复杂性。有无数的 jQuery 插件可以简化许多任务。

jQuery Mobile 是一个面向移动应用程序的 UI 框架，它基于 jQuery 构建。它具有主题和 UI 组件。

总之，它们是免费的。您不必使用 jQuery Mobile 来使用 jQuery。但是要使用 jQuery Mobile，您必须使用 jQuery。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-16T13:21:59.573

上面没有足够的评论点，所以添加到线程来回答安迪的第二个依赖问题。

我相信您正在寻找的东西在这里：[jQuery Mobile Demo](http://demos.jquerymobile.com/1.4.3/pages/)

```
<!DOCTYPE html> 
<html>
<head>
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/[version]/jquery.mobile-    [version].min.css" />
    <script src="http://code.jquery.com/jquery-[version].min.js"></script>
    <script src="http://code.jquery.com/mobile/[version]/jquery.mobile-[version].min.js"></script>
</head>

<body>
    ...content goes here...
</body>
</html> 
```**

# multithreading - 与同一进程关联的线程

> ID：10391857
> 
> 赞同：0
> 
> 时间：2012-04-30T23:30:51.650
> 
> 标签：multithreading, process

大家好，我很难找到这个问题的答案。我认为答案是 C，但想仔细检查我是否正确。谢谢。

以下哪一项陈述是错误的。与同一进程关联的线程能够... 2 (a) 控制它们的关联进程。(b) 并行运行。(c) 阻止自己。(d) 在其他进程中访问数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:37:57.777

我猜他们想要的答案是（d）。其他答案显然是正确的。由于每个进程都有自己的地址空间，一个进程中的线程不能直接访问另一个进程中的数据。要进行此类通信，您通常首先将数据*移出*一个进程，例如将其放入管道或 FIFO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:38:12.257

一种。如果线程不能控制它们关联的进程，谁可以（因为进程中的一切都是线程）？

湾。如果它们不能并行运行，那有什么意义呢？:)

C。如果他们不能阻止自己，他们就不能使用 IPC 原语，如静音和信号量。

d。如果他们可以访问其他进程中的数据，那么与一个进程相关联的线程或与不同进程相关联的线程之间有什么区别？

# python - 在 ssh 登录期间 Python 输出到终端

> ID：10391859
> 
> 赞同：0
> 
> 时间：2012-04-30T23:31:29.683
> 
> 标签：python, ssh, terminal, ipod

我一直在到处寻找这个并没有找到解决方案。我在 Apple iPod 上使用 python 2.5.1，并尝试使用 SSH 连接到主机。首先我从`import os`. 接下来我 `os.system('ssh 192.168.1.13)`。执行此命令后，我接下来尝试`os.system('password')`. 这不起作用，SSH 要求输入密码，在我退出 SSH 会话后，我的会`password`被打印出来。有什么方法可以让我将密码发送到 SSH？我不想向 python 添加任何其他模块。谢谢！

完整文件：

```
import os

os.system('ssh 192.168.1.13')
os.system('password') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:35:08.160

看一下[pexpect](http://pexpect.sourceforge.net/pexpect.html)，它应该以您期望的方式发挥作用。

文档中的示例：

```
child = pexpect.spawn('scp foo myname@host.example.com:.')
child.expect ('Password:')
child.sendline (mypassword) 
```

是的，那是另一个模块..但最干净的方式来完成你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:09:39.000

或者使用无密码、无密码的 ssh：[http ://stromberg.dnsalias.org/~strombrg/ssh-keys.html](http://stromberg.dnsalias.org/~strombrg/ssh-keys.html)

不需要额外的模块。

# c++ - “deque.h”中的 android-ndk-r7c 不合格 ID 错误

> ID：10391860
> 
> 赞同：1
> 
> 时间：2012-04-30T23:31:39.867
> 
> 标签：c++, android-ndk, queue, gnu, deque

我正在使用 ndk r7c 将一些 Windows C++ 移植到 ANSI 以在 Android 4.0.3 上使用。

原始代码设置了一个 UDP 客户端和一个数据包队列，它以设定的时间间隔检查它，以便当程序在其他地方忙时队列填满，因此主程序不会被捆绑轮询传入的数据包。代码相当长，所以我不会在这里发布它。

我不断收到消息：

```
In file included from C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/deque:65,
                 from C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/queue:61,
                 from jni/Tcan.h:5,
                 from jni/caneth_wrap.cpp:215:
C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/bits/stl_deque.h: In member function 'void std::_Deque_base<_Tp, _Alloc>::_M_initialize_map(size_t)':
C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/bits/stl_deque.h:498: error: expected unqualified-id before '(' token
In file included from C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/deque:68,
                 from C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/queue:61,
                 from jni/Tcan.h:5,
                 from jni/caneth_wrap.cpp:215:
C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/bits/deque.tcc: In member function 'void std::deque<_Tp, _Alloc>::_M_reallocate_map(size_t, bool)':
C:/Android/android-ndk-r7c/sources/cxx-stl/gnu-libstdc++/include/bits/deque.tcc:820: error: expected unqualified-id before '(' token 
```

我以前在编码时看到过 unqualified-id 消息，但从未找到导致它的确切答案。我尝试在 Tcan.h 的不同位置重新排列我的包含，但没有帮助。Tcan.h:5 是我拥有的`#include <queue>`. ndk 中是否存在与队列混淆的错误或我错过的内容？或者有谁知道双端队列中这个错误的可能原因？

谢谢

**编辑：**使用 ndk-r7b 没有区别。我不认为它会，但我想我还是会检查一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:55:36.613

可能是一个`max`尚未声明的宏的问题：检查[这里](https://stackoverflow.com/questions/5155621/cant-compile-c-project-macro-max-passed-3-arguments-but-takes-just-2)的第一篇文章（它大约是 3-arg max，但问题似乎是一样的）。作为修复，您还可以尝试从 中删除`std::`前缀`max`，如此处的第一篇文章中[所述](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=16605#c0)。

# wpf - 如何让开发基于 XAML 的 UI 变得可以接受？

> ID：10391861
> 
> 赞同：2
> 
> 时间：2012-04-30T23:31:53.830
> 
> 标签：wpf, silverlight, xaml

我喜欢为 Web 开发，HTML/CSS/JavaScript 易于调试，并查看内置于现代浏览器（如 Chrome/Firefox）和简单事物（如查看源代码）中的工具发生了什么

但是使用 WPF，我经常会遇到一些我认为应该发生某些事情而实际上没有发生的时刻。我花了很多时间沮丧地试图弄清楚为什么一个该死的按钮是某种颜色或文本没有显示等等。

你如何让 WPF 变得可以忍受？我错过了任何工具吗？我知道我可以在 kaxaml 等工具中进行原型制作，但它并不总是能转化为真实的东西。

做 WPF 时我想要一个“检查元素”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:36:38.667

> 做 WPF 时我想要一个“检查元素”！

我建议尝试[Mole 2010](http://www.molosoft.com/)。它包括一个用于 WPF 应用程序的视觉检查器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:06:20.360

Snoop 是您可能会得到的最接近 Firebug 的东西。我不能强调的一件事是在应用程序运行时观看输出窗口 - 它会告诉您何时样式/画笔/任何无法加载的内容。

此外，如果您在一个大型项目中工作并且遇到控件或样式问题，请将其拉​​出到单独的虚拟解决方案中，看看问题是否仍然存在。当涉及到奇怪的继承问题时，XAML 并不像 CSS 那样糟糕，但它确实可以帮助您了解正在发生的事情。

# django - 如何使用 jquery .ajax() 将模型中的 div 值刷新到 django

> ID：10391863
> 
> 赞同：1
> 
> 时间：2012-04-30T23:32:15.343
> 
> 标签：django, jquery, django-views

我有一个返回 3 个模型的链接对象的视图

```
def test(request):
    output=itertools.chain(
        model1.objects.all(),
        model2.objects.all(), 
        model3.objects.all()
    )

    return render_to_response('test.html', {'output':output}) 
```

在 html 中，我添加了一个锚点和一个 jQuery 脚本，它应该将 #output 替换为来自 model1 的新值

```
<html>
<head>...</head>
<body>
<script>
    $(document).ready(function() {

        $("#switch").click(function() {
            $.ajax({
                url: $(this).attr("href"),
                success: function(result) {
                    //whatever I put here is not triggered
                }
             });
        });
    });
</script>

    <a id="switch" href="?model=1">switch to model 1</a>

    <div id="output">
        {% for item in output %}
            <div id="{{item}}">
                {{item}}
            </div>
        {% endfor %}
    </div>
</body>
</html> 
```

我尝试将 div#output 放入单独的模板 output.html 并修改views.py，如下所示：

```
def test(request, template='test.html'):

    if request.GET.get('model'):
        output=model1.objects.all()
    else:
        output=itertools.chain(
           model1.objects.all(),
           model2.objects.all(), 
           model3.objects.all()
        )

    if request.is_ajax(): template='output.html'

    return render_to_response(template, {'output':output}) 
```

但是每次我单击链接时，整个页面都会刷新（使用来自 model1 的新值）。

Opera 只返回 output.html

已经为此苦苦挣扎了 3 天多，我是 Ajax 的新手，这让我感到非常困惑。

我希望有人能解释一下！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:44:20.320

首先，确保您的视图正常工作，并且在直接访问 url 时获得预期的 HTML 输出（您可能还想`if request.is_ajax()`暂时注释掉）。

`jQuery.html()`然后，尝试使用ajax 调用中的方法替换 #output div 的内容。这是一个带有一些动画的示例：

```
$.ajax({

    ...
    success: function( returnedData ) {
        $("#output").css("color", "red").fadeOut(500, function() {
            $("#output").html(returnedData);
            $(this).css("color", "green").fadeIn(500);
        });
    } 
```

此外，尝试使用 Firebug/Chrome 开发人员工具监控您的 ajax 调用 - 这两种工具都可以让您快速确定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:04:16.740

感谢 Daniel Rosman 的提醒，我不得不阻止 a#switch 的默认操作。它现在像黄油一样起作用！

这是最初的问题：[如何在 Django 视图中访问 jQuery.ajax() 获取参数](https://stackoverflow.com/questions/10352434/how-to-access-jquery-ajax-get-parameters-in-django-views/10353615#10353615)

# .net - 在程序中运行外部 C# 文件

> ID：10391866
> 
> 赞同：4
> 
> 时间：2012-04-30T23:32:17.170
> 
> 标签：.net, winforms, c#-4.0, reflection

.NET 框架是否有任何类允许您运行（编译、解释或其他）包含 C# 代码的外部脚本文件？

例如，如果我有一个`Hello.cs`包含以下内容的文件：

```
class Hello
//This program displays Hello World
{
    static public void Main()
    {
        System.Console.WriteLine("Hello World");
    }
} 
```

我如何从winform、应用程序中加载上面的代码并执行它？

我对加载/执行逻辑感兴趣；该程序可以是任何东西，从控制台应用程序到另一个 winform 应用程序。

反射是否允许这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:34:57.673

查看以下文章：[C#：使用动态编译编写可扩展的应用程序](http://blogs.msdn.com/b/abhinaba/archive/2006/02/09/528416.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T23:45:50.757

> .NET 框架是否有任何类允许您运行（编译、解释或其他）包含 C# 代码的外部脚本文件？

是的，您可以使用[CodeDomProvider](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.aspx)类。

> 我如何从winform、应用程序中加载上面的代码并执行它？

那么，使用上述类编译 C# 代码后，您可以使用[`ProcessStartInfo`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)该类并将其作为类[`Start`](http://msdn.microsoft.com/en-us/library/e8zac0ca.aspx)方法的参数传递[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)，然后读取[`StandardOutput`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)流，将其存储在字符串中并根据需要显示`Console.Write()`，`MessageBox.Show()`等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T21:21:26.233

我会检查 Roslyn API。只要您提供有效的 C# 或 VB.NET 代码，您就可以为所欲为。

# entity-framework - 如何使用模型优先生成自动迁移脚本？

> ID：10391873
> 
> 赞同：1
> 
> 时间：2012-04-30T23:32:42.570
> 
> 标签：entity-framework, migration

如何在 Entity Framework 4.3 或 5.0 中使用模型优先生成自动迁移脚本？

我已经看到了很多代码优先的示例，但没有一个可以在我的场景中使用。

我的问题是我有一个登台环境和一个现场环境。在将其全部发布到实时环境之前，我可能会对暂存环境进行许多模型和数据库更改。

当我想要生成从临时数据库到实时数据库的迁移脚本时，这会增加复杂性。

这可能会以某种方式自动发生吗？这可以通过 Entity Framework Power Tools 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:54:51.633

正如您从名称中所期望的那样，Code First 迁移目前仅适用于 Code First 模型。但是，还有其他工具可能对您的场景很有用，例如 SSDT 的[Schema Compare](http://msdn.microsoft.com/en-us/library/hh272690.aspx)实用程序。

# android - 当 Android 设备进入睡眠状态时，CCSpriteFrame 消失了

> ID：10391878
> 
> 赞同：1
> 
> 时间：2012-04-30T23:33:56.037
> 
> 标签：android, cocos2d-x

我正在使用 cocos2d-x，我对使用这些很棒的东西感到满意。

我将 CCSpriteFrameCache 与一些 plist 文件一起使用。但是当我按下我的 Android 设备的睡眠按钮并再次回到游戏时，似乎又加载了所有精灵帧！我注意到因为它需要 3~4 秒才能从睡眠模式回到游戏。如果我不使用 CCSpriteFrameCache，它可以正常工作。当我在 iPhone 上试用时，它肯定很好。

我注意到它一直是 cocos2d-x 论坛上的一个问题。

有什么帮助吗？我不认为人们会理解每次从睡眠模式回到游戏时会有 3~4 秒的延迟。

谢谢。上帝祝福你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:35:37.623

我不确定您是否使用 pvr.ccz 作为纹理文件，以及发生在您身上的事情听起来像是纹理未在 android 设备上缓存。

如果是这种情况，这是一个已知错误，并且该修复已应用于新版本。

有两种方法可以解决问题：

1.  更新你的 cocos2d-x 源并重新编译它（任何高于 0.12.0 的版本）
2.  根据此页面手动应用修复：http: [//www.cocos2d-x.org/boards/10/topics/7670](http://www.cocos2d-x.org/boards/10/topics/7670)

# javascript - javascript网格按数字排序，排序问题

> ID：10391880
> 
> 赞同：1
> 
> 时间：2012-04-30T23:34:22.113
> 
> 标签：javascript, sorting, grid

我有一个 JS 排序脚本，但排序 # 是这样的：

```
1.
10.
11.
2.
3.
4. 
```

我希望它们按值排序，如下所示：

```
1.
2.
3.
4.
10.
11. 
```

我无法弄清楚这一点。我知道有一种方法可以使用 MySQL，但我不熟悉 javascript。这是我到目前为止所拥有的，但它对数字的排序不正确。我很感激你能提供的任何帮助，或者只是给我正确的方向。

**JavaScript：**

```
var Grid = new Class({
    /** define some variables */
    table: false, 
    headers: false, 
    data: false, 

    /**
     * Initialize the object
     */
    initialize: function(table){
        this.table = table;
        this.getHeaders();
    }, 

    /**
     * Get the headers
     */
    getHeaders: function(){
        this.headers = this.table.getElements('thead tr th');
        this.headers.each(function(h, index){
            //h.store('asc', false);
            if (h.hasClass('sort')) h.addEvent('click', function(){
                if(h.hasClass('asc')){
                    h.className = 'sort desc';

                    //h.addClassName('desc');
                }else{
                    h.className = 'sort asc';
                    //h.addClassName('asc');
                }
                //if (h.retrieve('asc')) h.store('asc', false);
                //else h.store('asc', true);
                //this.sort($('tblrank_id'));
                this.sort(index);
            }.bind(this));
        }, this);
    }, 

    /**
     * Get the table data
     */
    getData: function(){
        this.data = this.table.getElements('tbody tr');
    }, 

    /**
     * Sort the data
     * @param int index
     */
    sort: function(index){
        this.getData();
        data = [];
        sortType = this.headers[index].getProperty('axis');

        asc = this.headers[index].hasClass('asc');//this.headers[index].retrieve('asc');
        if (this.data.length > 0) this.data.each(function(row, i){
            cells = row.getElements('td');
            if (cells.length < this.headers.length) return false;
            value = cells[index].innerHTML;

            if(cells[index].childNodes[0].nodeName.toLowerCase() == "a"){
                //alert(cells[index].childNodes[0].innerHTML);
                value = cells[index].childNodes[0].innerHTML;
            }

            if (sortType == 'int' || sortType == 'float'){
                if (value.contains('$') || value.contains(',')) value = value.replace(/\$/g, '').replace(/,/g, '').toFloat();
                else value = value.toFloat();
            } else if (sortType == 'date') value = Date.parse(value);
            data.push({'index': i, 'value': value, 'row': row});
        }, this);

        if (sortType == 'int' || sortType == 'float' || sortType == 'date') data.sort(this.sortNumeric);
        else data.sort(this.sortCaseInsensitive);
        if (!asc) data.reverse();

        this.data = [];
        data.each(function(d, i){
            this.data.push(d.row);
        }, this);

        this.data.each(function(row, i){
            if (row.hasClass('etblraw0')) row.removeClass('etblraw0');
            if (row.hasClass('etblraw1')) row.removeClass('etblraw1');
            this.table.getElement('tbody').adopt(row.addClass((i % 2 == 0 ? 'etblraw0' : 'etblraw1')));

        }, this);
    }, 

    /**
     * Sort Numerica Values
     * @param object a
     * @param object b
     */
    sortNumeric: function(a, b){

        if ($type(a.value) != 'number') a.value = 0;
        if ($type(b.value) != 'number') b.value = 0;
        return a.value - b.value;
    }, 

    sortCaseInsensitive: function(a, b){
        a.value = a.value.toLowerCase();

        b.value = b.value.toLowerCase();
        if (a.value == b.value) return 0;
        if (a.value < b.value) return -1;
        return 1;
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:48:34.930

试试这个：

```
function sortfunc(a,b) {
  return parseInt(a.split(".")[0]) -
         parseInt(b.split(".")[0]);
}

var list = ["1\. first", "2\. second", "10\. tenth"];
list.sort(sortfunc);

console.log(list); // => ["1\. first", "2\. second", "10\. tenth"] 
```

# activerecord - 为多对多关系编写范围

> ID：10391882
> 
> 赞同：0
> 
> 时间：2012-04-30T23:34:40.833
> 
> 标签：activerecord, scopes, scope-chain

我有一个包含 3 个模型的应用程序：租户、部门、标准。

```
# app/models/department.rb

class Department < ActiveRecord::Base
  attr_accessible :name, :abbr

  has_many :renter_departments
  has_many :renters, :through => :renter_departments
end 
```

和

```
# app/models/criterium.rb

class Criterium < ActiveRecord::Base
  attr_accessible :name

  has_many :renter_criteria
  has_many :renters, :through => :renter_criteria
end 
```

我正在尝试在 Renter 模型中创建两个范围，让我可以按部门和标准找到租户。

这是我的代码：

```
# app/models/renter.rb

class Renter < ActiveRecord::Base

  # Relationships
  has_many :renter_departments
  has_many :renter_criteria
  has_many :departments, :through => :renter_departments
  has_many :criteria, :through => :renter_criteria

  # Scopes
  scope :from_department, lambda { |abbr| joins(:departments).where("abbr = ?", abbr) }
  scope :has_criterium, lambda { |criterium| joins(:criteria).where("name = ?", criterium) }

end 
```

使用

```
Renter.from_department("SCS") 
```

或者

```
Renter.has_criterium("Economic considerations") 
```

自行工作。但是，当我尝试将它们链接起来时，

```
Renter.from_department("SCS").has_criterium("Economic considerations") 
```

我收到一条错误消息：

```
 Renter Load (0.3ms)  SELECT "renters".* FROM "renters" INNER JOIN "renter_departments" ON "renter_departments"."renter_id" = "renters"."id" INNER JOIN "departments" ON "departments"."id" = "renter_departments"."department_id" INNER JOIN "renter_criteria" ON "renter_criteria"."renter_id" = "renters"."id" INNER JOIN "criteria" ON "criteria"."id" = "renter_criteria"."criterium_id" WHERE (abbr = 'SCS') AND (name = 'Economic considerations')
SQLite3::SQLException: ambiguous column name: name: SELECT "renters".* FROM "renters" INNER JOIN "renter_departments" ON "renter_departments"."renter_id" = "renters"."id" INNER JOIN "departments" ON "departments"."id" = "renter_departments"."department_id" INNER JOIN "renter_criteria" ON "renter_criteria"."renter_id" = "renters"."id" INNER JOIN "criteria" ON "criteria"."id" = "renter_criteria"."criterium_id" WHERE (abbr = 'SCS') AND (name = 'Economic considerations')
ActiveRecord::StatementInvalid: SQLite3::SQLException: ambiguous column name: name: SELECT "renters".* FROM "renters" INNER JOIN "renter_departments" ON "renter_departments"."renter_id" = "renters"."id" INNER JOIN "departments" ON "departments"."id" = "renter_departments"."department_id" INNER JOIN "renter_criteria" ON "renter_criteria"."renter_id" = "renters"."id" INNER JOIN "criteria" ON "criteria"."id" = "renter_criteria"."criterium_id" WHERE (abbr = 'SCS') AND (name = 'Economic considerations') 
```

此外，

```
>> Renter.from_department("SCS").class
=> ActiveRecord::Relation
>> Renter.has_criterium("Economic considerations").class
=> ActiveRecord::Relation 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:01:39.963

您要加入的表中有多个`name`列。使`WHERE`子句使用`renters.name`or`departments.name`或具有适当`name`列的任何表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T00:10:17.950

您需要在范围内引用表名：

```
scope :from_department, lambda { |abbr| joins(:departments).where("departments.abbr = ?", abbr) }
scope :has_criterium, lambda { |criterium| joins(:criteria).where("criteria.name = ?", criterium) } 
```

# php - Javascript .Append() 和动态隐藏字段？

> ID：10391890
> 
> 赞同：0
> 
> 时间：2012-04-30T23:35:26.923
> 
> 标签：php, javascript, html, textbox, append

我想创建一些你在文本框中输入文本的东西，当你按下回车键或按钮时，它会更改下面的一部分单词以匹配你在文本框中输入的内容......我听说它与标题中的内容，但找不到任何与我需要做的事情相近的东西，而且我能找到的所有教程都没有意义，即使它确实有意义，仍然没有解决我的问题。 .. 谁能帮助我给我一个好的链接或向我展示这样的示例代码？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:25:39.100

```
$("#divid").append($("<div />").text($("#inputid").val())); 
```

# php - 如何将 javascript 变量传递给 php 并重新加载框架

> ID：10391891
> 
> 赞同：2
> 
> 时间：2012-04-30T23:35:33.700
> 
> 标签：php, javascript, codeigniter

好的，这听起来可能有点奇怪，但我拥有的是由 php 和 codeigniter 框架生成的框架集。

在一个框架中，我正在显示数据库查询结果的行，其中链接附加到每条记录的行索引。

我想要发生的是，您单击其中一个链接，它会在右侧框架中显示更详细的记录摘要。

虽然我知道 php 是服务器端等事实，但我试图让链接重新加载右侧框架，并使用左侧的索引值，然后在控制器中我可以使用索引查询数据库并推回包含完整记录的相同摘要页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:38:37.177

听起来您希望左框架中的链接定义是这样的：

```
<a target="otherframe" href="otherframeurl.php?index=2">item 2</a> 
```

其中 otherframe 是右框架的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:40:03.680

您需要使用该变量向服务器发送 AJAX 请求。您可以在 Google 如何向服务器发送 ajax 请求。

然而，这是一个简单的例子，使用 jQuery

```
$.post("/next/page", {
   'variable1' : 'value1'
}, function(data) {
   //on success handler
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T23:40:05.907

我想你的框架有名字。假设正确框架的名称是“right”，您可以使用 JavaScript 像这样（从另一个框架）更改其 href：

```
parent.right.location.href = 'somefile.php?param=' + yourJsVariableHere; 
```

# sql-server - 如何使用 SPN 通过 SSMS 进行连接

> ID：10391893
> 
> 赞同：3
> 
> 时间：2012-04-30T23:35:38.773
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我刚刚使用 SPN 在 AD 中完成了我们的 SQL Server 2008 R2 注册。我可以通过 OLEDB 使用 SQLNCLI10.1 使用以下关键字进行连接：

```
Server SPN=MSSQLSvc/server.domain.local 
```

连接后，以下查询将验证是否正在使用 Kerberos：

```
SELECT auth_scheme FROM sys.dm_exec_connections WHERE session_id = @@spid; 
```

结果：

```
KERBEROS 
```

但是，我无法弄清楚或在互联网上搜索有关使用 SPN 在 SSMS 内连接的信息。将建议的关键字添加到“附加连接参数”只会导致

```
Keyword not supported: 'serverspn'
Keyword not supported: 'server spn' 
```

是否可以使用 SPN 在 SSMS 内连接？如果我在没有指定 SPN 的情况下这样做，则测试查询将返回：

```
NTLM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:30:53.357

您使用什么命令来创建 SPN？

您应该有 2 个用于该服务的 SPN。1 用于 server.domain.local 和 1 用于端口 1433（或您的服务使用的任何端口）。

[以下是来自http://msdn.microsoft.com/en-us/library/ms191153.aspx](http://msdn.microsoft.com/en-us/library/ms191153.aspx)的示例：

```
setspn -A MSSQLSvc/myhost.redmond.microsoft.com:1433 accountname
setspn –A MSSQLSvc/myhost.redmond.microsoft.com accountname 
```

创建 SPN 后，Windows 身份验证应该是获取 Kerberos 所需的全部内容。

要验证创建了哪些 SPN，您可以使用以下命令：

```
setspn -l accountname 
```

此外，如果服务帐户具有写入 servicePrincipalName 和读取 servicePrincipalName 权限，它将在启动时自动注册 SPN。

有关更多信息，请参阅 Clint 的博客：http: [//clintboessen.blogspot.com/2010/02/dynamically-set-spns-for-sql-service.html](http://clintboessen.blogspot.com/2010/02/dynamically-set-spns-for-sql-service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T19:41:09.917

每当您获得 NTLM 时，这意味着 SPN 未正确注册或其中一个帐户不在域中。否则，您应该始终获得 KERBEROS 连接。您需要采取一些措施来确保始终获得 KERBEROS 连接。

*   确保登录名存在于运行 SQL Server**的域中。**
*   确保**登录在 AD 上有足够**的权限，登录用于 SQL 服务。
*   手动创建一个 SPN `setspn -S MSSQLSvc/<domain.com> <login>`。此命令将在添加 SPN 之前检查重复项。
*   以上步骤将确保在您重新启动 SQL Server 时**注册 SPN 。**

验证成功注册：

*   您可以签入 SSMS `Management -> SQL Server Logs -> Current`。
*   您也可以在 CMD 中运行以下命令`setspn -L MSSQLSvc/<domain.com> <login>`

验证服务器 SPN 注册成功后，您可以使用域帐户登录并运行您的测试命令。在此之后，您应该始终获得 KERBEROS。

# node.js - node --nocrankshaft 有什么作用？

> ID：10391898
> 
> 赞同：2
> 
> 时间：2012-04-30T23:36:50.650
> 
> 标签：node.js, v8

运行 Node.JS 的`node --nocrankshaft`实际作用是什么？节点中是否有关于这些类型的 v8 设置选项的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T23:56:28.480

这将禁用 Crankshaft 编译器。

> ...通过使用积极的优化，Crankshaft 显着提高了计算密集型 JavaScript 应用程序的性能 - 通常提高两倍以上！...

看看：[V8 的新曲轴](http://blog.chromium.org/2010/12/new-crankshaft-for-v8.html)

更多细节：[仔细查看曲轴，v8 的优化编译器](http://wingolog.org/archives/2011/08/02/a-closer-look-at-crankshaft-v8s-optimizing-compiler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-12T19:32:06.370

> 节点中是否有关于这些类型的 v8 设置选项的文档？

该`--v8-options`标志可以列出与**V8**相关的所有设置：

```
$ nodejs --v8-options

Options:
  --use_strict (enforce strict mode)
        type: bool  default: false
  --es5_readonly (activate correct semantics for inheriting readonliness)
        type: bool  default: true
  --es52_globals (activate new semantics for global var declarations)
        type: bool  default: true
  ... 
```

该列表包含与 V8 相关的所有标志、每个标志作用的简短描述、类型信息和默认值。

该列表也可在此处在线获取：[https](https://github.com/joyent/node/blob/master/doc/node.1) ://github.com/joyent/node/blob/master/doc/node.1 。此列表的大部分参数对应于[V8 标志](https://github.com/v8/v8/blob/master/src/flag-definitions.h)。

# c# - 值丢失，而调试代码只是跳过

> ID：10391900
> 
> 赞同：0
> 
> 时间：2012-04-30T23:37:16.480
> 
> 标签：c#, asp.net

我很确定这是由于我在代码中犯了一个错误，但看不出是什么错误。我试图在启动时将数据加载到静态列表中，并在一定间隔后刷新此数据。为此，我创建了一个类，我创建了两个实例，一个作为主要实例，一个作为次要实例。

```
public class DataAndPartitions
{
    public DateTime LastUpdated {get;set;}
    public List<AppUser>  LatestUsers {get;set;}
    public Dictionary<int, List<AppUser>> LatestUsersByCategory {get; set;}

    public DataAndParitions()
    {
        this.LastUpdated = DateTime.Now;
        this.LatestUsers = new List<AppUser>();
        this.LatestUsersByCategory = new Dictionary<int,List<AppUser>>();

        this.LatestUsersByCategory = InitLatestUsersByCategory(this.LatestUsersByCategory);
    }

    static Dictionary<int,List<AppUser>> InitLatestUsersByCategory(Dictionary<int,List<AppUser>> toInitDictionary)
    {
        //Code to Initialize the dictionary
    }
} 
```

现在在其他班级

```
public class AppSearch
{
    static List<DataAndPartitions> dataAndPartitions = new List<DataAndPartitions>();

    static void InitDataAndPartitions()
    {
        if (dataAndPartitions.Count == 0)
        {
            dataAndPartitions.Add(new DataAndPartitions());
            Thread.Sleep(100);
            dataAndPartitions.Add(new DataAndPartitions());
        }
    }

    static List<AppUser> RecentAppUsers
    {
        get
        {

            if (dataAndPartitions.Count == 0)
            {
                InitDataAndPartitions();
            }

            //compares the LastUpdated of the two dataAndPartitions and returns mostRecentlyUpdatedIndex
            int mostRecentlyUpdatedIndex = GetMostRecentlyUpdatedIndex();

            return dataAndPartitions[mostRecentlyUpdatedIndex].LatestUsers;                                
        }
    }

    static Dictionary<int, List<AppUser>> UsersPartitionedByCategory
    {
        get 
        {
            if (dataAndPartitions.Count == 0)
            {
                InitDataAndPartitions();
            }

            //compares the LastUpdated of the two dataAndPartitions and returns mostRecentlyUpdatedIndex
            int mostRecentlyUpdatedIndex = GetMostRecentlyUpdatedIndex();

            return dataAndPartitions[mostRecentlyUpdatedIndex].LatestUsersByCategory;               
        }
    } 

    static private void AsyncQueryCallback(IAsyncResult result)
    {
        try
        {
            //To avoid managing locking etc., just add to a new List and change reference
            List<AppUser> users = RecentAppUsers;
            Dictionary<int, List<AppUser>> usersPartition = UsersPartitionedByCategory;

            SqlCommand cmd = (SqlCommand)result.AsyncState;
            SqlDataReader reader = cmd.EndExecuteReader(result);
            while (reader.Read())
            {
                AppUser user = new AppUser();
                user.ReadDetails(reader);
                users.Add(user);
                usersPartition[user.Category.Id].Add(user);
            }

            if (cmd.Connection.State.Equals(ConnectionState.Open))
            {
                listAsyncFinishedLoading = true;
                cmd.Connection.Close();
            }
        }
        catch (Exception ex)
        {
        //Logs Exception
        }
        finally 
        {
                //Even if the async load fails, start the timer to reload at a later time
                InitReloadUsersTimer();
        }
    }
} 
```

异步调用发生在 Global.asax 的 Application_Start 处。我面临的问题是，当 AsyncQueryCallBack 正在执行时，有时它会从读取器读取一行，将用户对象添加到必要的集合中，然后停止执行。它不会抛出异常，只是停止。

我在单步执行 Visual Studio 2008 中的代码时观察到的所有这些情况。为什么会发生这种情况？我的代码有什么问题？

**==编辑==** 这是我进一步注意到的，因此更改了问题标题。

有几次，我收到了来自 Visual Studio 的警报，提示“无法步进。进程未同步”。我面临的实际错误是 Dictionary 中的值丢失或未初始化。我无法判断，因为我无法单步执行代码。

有趣的是，它`List<AppUser> LatestUsers`具有所有值，因为`List<AppUser>`字典中的每个值都`LatestUsersByCategory`具有 count = 0，即使有几次我能够在执行跳过之前几次单步执行 while reader.read 循环，我能够在手表窗口中看到值被添加到`List<AppUser>`字典中。但后来他们迷路了。为什么会这样？

# wpf - ElementHost 的 WPF 表单和网格绑定方法可能存在内存问题？

> ID：10391901
> 
> 赞同：0
> 
> 时间：2012-04-30T23:37:26.910
> 
> 标签：wpf, memory, infragistics, elementhost

当用户单击 WinForms 菜单项时，将执行以下代码：

```
 `// this is an Infragistics XamRibbonWindow
var someWpfInfragisticsWindow = new SomeWpfInfragisticsWindow();
ElementHost.EnableModelessKeyboardInterop(someWpfInfragisticsWindow);
someWpfInfragisticsWindow.Show();` 
```

`显示的窗口是 Infragistics XamRibbonWindow。它还包含一个 Infragistics XamDataGrid，其 DataSource 绑定到视图模型上的 IEnumerable 属性。`

 `该窗口还包含一个“搜索”按钮，该按钮将从数据库中检索新的项目集合，并设置前面提到的视图模型属性。这会导致网格显示新集合。

稍后，用户可以关闭窗口。没有编写代码来处理关闭。

我的问题是：

1.  关闭窗口是否会处理窗口及其控件并使集合绑定到它的 GC 能力（假设不存在对集合的其他引用）？
2.  有没有人看到我所描述的任何潜在的记忆问题？也许随着网格显示的项目的更新方式（或其他任何方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:16:52.053

当窗口关闭时，如果您没有持有对它的引用，它应该可用于垃圾收集。从提供的详细信息中，我没有看到这种方法存在任何内存问题。

请注意，Infragistics 确实有一些静态类，它们会在您关闭窗口后保留。

如果您确实在使用 Infragistics 控件时遇到内存泄漏问题，并且认为这些控件可能是导致您应该联系 Infragistics 以帮助确定泄漏原因的原因。有链接可以在论坛上发布或从[获取帮助页面](http://www.infragistics.com/support/get-help.aspx)提交支持案例。`

# java - 从另一个已发布的应用程序显示 Internet 上的 Intranet 页面

> ID：10391902
> 
> 赞同：1
> 
> 时间：2012-04-30T23:37:30.270
> 
> 标签：java, servlets, intranet

我们有以下情况： 有一个可以在 Apache 和 IIS 上运行的应用程序。在内部，我们将它与 IIS（端口 80）一起使用，在互联网上我们使用 Apache（端口 8443）。

我们开发了一个接口 (ASP.NET) 来将应用程序与供应商集成（一切正常）。该接口只能在内部访问（同一服务器上的端口 88）。这些导致界面仅在用户在我们的内部网络中时工作，但在他们尝试从 Internet 使用它时不能工作，因为浏览器无法访问 ASP.NET 页面。

有没有办法让已发布的应用程序在内部调用 ASP.NET 页面并以某种方式将其显示给用户，而无需将 ASP.NET 页面发布到 Internet？

我们看到已发布的应用程序能够做到这一点，因为它也称其为报告应用程序，它驻留在另一台服务器中且未发布，但不知何故，它使用 Java Servlet 调用报告并显示它们，甚至来自互联网.

举个例子：

AP1：
内网：htp://server.domain/ap1/
Internet：htps://site.com/

接口：
内网：htp://server.domain/int/
Internet：无

报告：
Intranet：htp://server1.domain/rep/
Internet：否

AP1 调用报告：
Intranet：htp://server.domain/ap1/report_url
Internet：htps://site.com/report_url

我们一直在研究是否可以“桥接” ASP.NET 接口并从应用程序调用它，即使应用程序是从 Internet 调用的（比如服务器内部调用接口而不是由客户）。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:58:21.413

如何使用[mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)将 Apache 设置为内部应用程序的代理？

# c# - 获取第一次机会异常的行号

> ID：10391903
> 
> 赞同：9
> 
> 时间：2012-04-30T23:37:40.210
> 
> 标签：c#, debugging, exception, stack-trace

我从某个地方抛出异常，但我从编译器得到的只是“在 mscorlib.dll 中发生'System.ArgumentOutOfRangeException' 类型的第一次机会异常”。这对我来说相当没用，因为那不是我的代码（很确定它是默认库）。我想查看堆栈跟踪或其他内容，以便我知道我的代码中哪里出了问题。这是一个相当大的代码库（其中大部分不是我的），并且有很多多线程和其他东西在进行，所以几乎不可能在不知道从哪里开始查找的情况下尝试单步执行代码。是否有一些设置可以使所有异常触发中断，以便我可以在它们发生时看到调用堆栈，而不是让它们静默失败并在输出中显示完全无用的错误消息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-01T01:28:33.947

你有几个选择。首先，就像 Greg 说的，当发生任何异常时，您可以导致 VS 中断：

![在此处输入图像描述](../Images/ed9f970feccc00f5264ba43812286f92.png)

确保选中这些，然后单击确定：

![在此处输入图像描述](../Images/e2e787197e729bfd2f50b59be4ca856d.png)

这将导致 Visual Studio 在发生异常的地方中断。

另一种方法是捕获异常并仅写入堆栈跟踪，或将异常（使用 ToString()）写入输出窗口：

![在此处输入图像描述](../Images/d1672f0b2bc4778d00f87568cfa695e9.png)

然后检查你的输出窗口：

![在此处输入图像描述](../Images/675b882f3f70bcde50edfd29bb2fe981.png)

# jquery - 如何添加 jquery-fileupload 插件

> ID：10391907
> 
> 赞同：0
> 
> 时间：2012-04-30T23:38:15.387
> 
> 标签：jquery, ajax, ruby-on-rails-3, file-upload

我使用了carrierwave并关注了[链接](https://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6) 但不能让它像jquery-fileupload[链接的演示](http://blueimp.github.com/jQuery-File-Upload/)

谁能指导我将js文件和图像的文件放在哪里以及如何在html中包含javascript。

如果有 Rails 的任何教程或示例，那就太好了……谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:43:55.913

不同的人对可以将文件保存在哪里有不同的看法。一般来说，

1.  Javascript 保存在`js`或`script`
2.  图像保存在`img`or`images`或`media`

在 HTML 中包含 JS 是这样完成的

```
<script type='text/javascript' src='path/to/jsfile.js'></script> 
```

# c# - 如何向 ASP.NET 页面发出回发请求？

> ID：10391908
> 
> 赞同：0
> 
> 时间：2012-04-30T23:38:24.157
> 
> 标签：c#, httpwebrequest, postback

如何向 ASP.NET 页面发出回发请求？我通过 Fiddler 捕获数据并尝试使用 HttpWebRequest 类发出相同的请求，但我收到了错误编码的简短回答。（也尝试了各种编码，没有结果）这是代码的一部分：

```
var req = (HttpWebRequest)WebRequest.Create("http://mySite.aspx?test=test");
req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded; charset=utf-8";
req.Accept="*/*";
req.Headers.Add("Accept-Language", "en-us");
req.Referer="http://mysiterefer.com";
req.Headers.Add("x-microsoftajax", "Delta=true");
req.Headers.Add("Cache-Control", "no-cache");
req.Headers.Add("Accept-Encoding", "gzip, deflate");
req.UserAgent="Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3; AskTbFXTV5/5.15.1.22229)";
req.Headers.Add("Pragma", "no-cache");
req.Headers.Add("Cookie", "ASP.NET_SessionId=blablablaxur445; vehicle=1=2011@#VAZ@#2101@#; s_cc=true; s_p_s_prop8=typed-bookmarked; ev_36_getval=20120501%2000; s_sq=%5B%5BB%5D%5D");
string postData = "__EVENTTARGET=lalalala&__EVENTARGUMENT=&__LASTFOCUS=&__VIEWSTATE=veryLongBase64string&__ASYNCPOST=true&";
byte[] byteArray = Encoding.UTF8.GetBytes(postData);
req.ContentLength = byteArray.Length;
Stream dataStream = req.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();
using (var response = (HttpWebResponse)req.GetResponse())
{
    StreamReader objReader = new StreamReader(response.GetResponseStream());
    string str = objReader.ReadToEnd();
...
} 
```

那么，谁能提供回发请求的示例？

# cakephp - 排序和分页 cakephp

> ID：10391911
> 
> 赞同：1
> 
> 时间：2012-04-30T23:38:33.873
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1

在我的控制器中我有这个

```
public function station_users($id=null){
        $users = $this->User->find('all',array('conditions'=>array('test_id'=>$this->params['named']['test_id'])));

        $this->set('users', $users);
        $this->render("station_users",'ajax');
    } 
```

我正在为某个测试 ID 获取所有用户，但现在我的排序不起作用。如何添加分页。我试过

```
$this->User->recursive = 0;
        $this->set('users', $this->paginate()); 
```

那没用，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:50:09.197

在调用之前`$this->paginate()`，您需要配置分页，如下所示：

```
$this->paginate = array
    (
        'User' => array
        (
            'recursive' => 0,
            'conditions' => array
            (
                'test_id' => $this->params['named']['test_id'],
            ),
        )
    );

$users = $this->paginate('User'); 
```

[Cookbook](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)是您的朋友，请尽可能使用它。

# java - 使用 Java 布局管理器

> ID：10391913
> 
> 赞同：0
> 
> 时间：2012-04-30T23:38:54.237
> 
> 标签：java, layout, gridbaglayout, flowlayout

我创建了一个 JPanel，其中包含任意数量的 JLabel，并使用左对齐的流布局管理器进行布局。让我们称之为 FlowPanel。

每个 FlowPanel 都有一个深度，我想将任意数量的这些 FlowPanel 堆叠在一起，每个都以固定数量 * 深度缩进。最终的目标是在 JScrollPane 中显示这些堆叠的面板，其中包含垂直滚动条（如果需要）但不是水平滚动条。

我尝试将 FlowPanel 与 GridBagLayout 堆叠在一起，虽然让它们垂直堆叠并按我想要的方式缩进很容易，但我不知道如何正确地获得宽度。也就是说，FlowPanel 只是从我的主面板的右侧运行，而不注意显示的宽度。

我试过使用 setPreferredSize、setSize、搞乱 GridBagConstraints ......没有运气。

请帮忙！:)

一些示例代码来演示该问题。此代码有 2 个问题： 1\. 即使只有几行，行也应保持恒定高度。2\. 当FlowPanels 包含太多元素时，行会从屏幕右侧滚动。

```
public class FlowExample {

public static void main(String[] args) throws Exception {
    JFrame frame = new JFrame();

    StackPanel stackPanel = new StackPanel();
    frame.getContentPane().setLayout(new BorderLayout());
    frame.getContentPane().add(
            new JScrollPane(stackPanel, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER),
            BorderLayout.CENTER);

    frame.setLocation(200, 200);
    frame.setSize(300, 300);
    frame.setVisible(true);

    List<FlowPanel> content = new ArrayList<FlowPanel>();
    for (int i = 0; i < 20; i++) {
        FlowPanel flowPanel = new FlowPanel((int) (4 * Math.random()));
        for (int j = 0; j < (int) (20 * Math.random()); j++) {
            flowPanel.add(new JLabel("label " + j));
        }
        content.add(flowPanel);
        stackPanel.layoutGUI(content);
        Thread.sleep(1000);
    }

    System.in.read();
    System.exit(0);
}
}

class StackPanel extends JPanel {

public StackPanel() {
    setLayout(new BorderLayout());
}

public void layoutGUI(final List<FlowPanel> content) {
    if (!SwingUtilities.isEventDispatchThread()) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                layoutGUI(content);
            }
        });
        return;
    }

    JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new GridLayout(content.size(), 1));
    for (FlowPanel flowPanel : content) {
        flowPanel.setBorder(BorderFactory.createEmptyBorder(0, flowPanel.getDepth() * 10, 0, 0));
        mainPanel.add(flowPanel);
    }

    removeAll();
    add(mainPanel, BorderLayout.CENTER);
    revalidate();
}
}

class FlowPanel extends JPanel {

private int depth;

public FlowPanel(int depth) {
    setLayout(new FlowLayout(FlowLayout.LEFT));
    this.depth = depth;
}

public int getDepth() {
    return depth;
}
} 
```

这是一些使用 GridBagLayout 布局主面板的示例代码。这是我得到的最好的结果，但是正如你所看到的，FlowPanels 仍然没有换行......

```
 JPanel mainPanel = new JPanel();
    mainPanel.setLayout(new GridBagLayout());
    GridBagConstraints constraints = new GridBagConstraints();
    constraints.weightx = 1;
    constraints.gridwidth = GridBagConstraints.REMAINDER;
    constraints.anchor = GridBagConstraints.LINE_START;

    for (FlowPanel flowPanel : content) {
        System.out.println("setting border to " + flowPanel.getDepth());
        flowPanel.setBorder(BorderFactory.createEmptyBorder(0, flowPanel.getDepth() * 10, 0, 0));
        mainPanel.add(flowPanel, constraints);
    }

    constraints.weighty = 1;
    mainPanel.add(new JPanel(), constraints);

    removeAll();
    add(mainPanel, BorderLayout.CENTER);
    revalidate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:42:22.430

GridLayout 正在尝试为您调整屏幕上的所有内容，因此通过将列表传递给它，它每次都会重新调整高度。通过从一开始就设置一个大的常数，你告诉它要腾出足够的空间。尝试修改这一行：

```
mainPanel.setLayout(new GridLayout(content.size(), 1)); 
```

到

```
mainPanel.setLayout(new GridLayout(500, 1)); 
```

要从一开始就停止出现滚动条，另一种方法是使用 BoxLayout。

```
JPanel mainPanel = new JPanel();
Box box = Box.createVerticalBox();
mainPanel.add( box );
for (FlowPanel flowPanel : content) {
    flowPanel.setBorder(BorderFactory.createEmptyBorder(0, flowPanel.getDepth() * 10, 0, 0));
    box.add(flowPanel);
}
removeAll();
add(mainPanel, BorderLayout.CENTER);
revalidate(); 
```

包装问题归结为仅尊重 setPreferredSize 的 FlowLayout。您可以使用现有代码设置一种首选大小以适应所有情况，但代价是您的动态调整大小要求。或者，我过去使用过 camickr 的 WrapLayout，效果很好。

[http://tips4java.wordpress.com/2008/11/06/wrap-layout/](http://tips4java.wordpress.com/2008/11/06/wrap-layout/)

照原样，WrapLayout 根据是否需要包装返回不同的首选尺寸，懒惰地通过快速破解 WrapLayout.java 来避免：

1）。添加最小宽度变量

```
private int minWidth = -1; 
```

2）。修改最后一行的'layoutSize'方法：

```
if(minWidth != -1) {
    dim.width = minWidth;
}
return dim; 
```

完成后，对示例代码的唯一更改是在 FlowPanel 构造函数中：

```
public FlowPanel(int depth) {
    WrapLayout layout = new WrapLayout(FlowLayout.LEFT);
    layout.setMinWidth(300);
    setLayout(layout);
    setSize(new Dimension(300, 30));
} 
```

# javascript - Safari 和 Chrome 上的 window.location.href

> ID：10391917
> 
> 赞同：1
> 
> 时间：2012-04-30T23:39:51.593
> 
> 标签：javascript, jquery

这在 Safari 和 Chrome 中不起作用：

```
$(".myButton").click(function(){
    window.location.href('www.blahblahblah.com');
}); 
```

有什么解决办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T23:42:13.980

window.location.href 不是一个函数，因此你不能调用它，但是你可以给它赋值：（同样你应该在重定向到另一个域时使用 http://）

```
$(".myButton").click(function(){
    window.location.href = 'http://www.blahblahblah.com';
}); 
```

编辑：更正了我的第一个声明并添加了关于 http:// 的部分

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T12:54:09.653

有类似的问题。在 chrome 中，返回 false；解决了这个问题。

```
if(confirm('Are you sure you wish to delete this order?'))
{
location.href='delete_order.asp?id=20'; **return false;**} 
else 
{return false;} 
```

以上代码适用于 Chrome 和 IE9

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-24T22:17:10.890

```
window.location.assign('http://www.google.com') 
```

是您正在寻找的功能。

它相当于

```
window.location = 'http://www.google.com'; 
```

# php - Mysql默认current_timestamp不以24小时军事格式存储

> ID：10391920
> 
> 赞同：0
> 
> 时间：2012-04-30T23:40:06.577
> 
> 标签：php, mysql

我有一个像这样的简单表：

```
CREATE TABLE `users` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `username` varchar(16) DEFAULT NULL,
  `password` varchar(16) DEFAULT NULL
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

每当我插入一条记录时，创建的字段应自动填充当前时间戳。但是，由于某种原因，我一直看到以 12 小时格式插入的时间戳。当我做一些`select created from users limit 1;`我会得到的事情时`2012-04-30 11:34:05`

当我做类似的事情时，`select current_timestamp`我会得到 24 小时格式 `2012-04-30 23:34:05`

当我将它转换为 unix_time 并要求 php 将其转换为 PST 时间时，它是正确的。但我希望该列以 24 小时格式显示，无需任何时间操作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T00:10:36.873

正如米奇在上面的评论中所说，这似乎只是在你的`SELECT`. 尝试[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)：

```
SELECT DATE_FORMAT(created, '%Y-%c-%e %H:%i:%s') FROM users 
```

# iphone - 如何获取地址簿中所有联系人的所有带有标签的电话号码？

> ID：10391922
> 
> 赞同：1
> 
> 时间：2012-04-30T23:40:45.807
> 
> 标签：iphone, objective-c, ios, abaddressbook, addressbookui

我想为存储在 iPhone 通讯录中的联系人获取所有带有不同标签的电话号码，例如“iPhone”、“家庭电话”、“手机号码”、“其他号码”等。

我如何得到它？

请帮忙。

提前致谢。

我正在尝试：这是崩溃

```
ABAddressBookRef ab=ABAddressBookCreate();

    CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(ab);
    NSMutableArray *allNumbers = [[NSMutableArray alloc] initWithCapacity:CFArrayGetCount(people)];

    for (CFIndex i = 0; i < CFArrayGetCount(people); i++) {
        ABRecordRef person = CFArrayGetValueAtIndex(people, i);
        ABMultiValueRef numbers = ABRecordCopyValue(person, kABPersonPhoneProperty);

        for (CFIndex j=0; j < ABMultiValueGetCount(numbers); j++) {

            CFStringRef locLabel = ABMultiValueCopyLabelAtIndex(numbers, i);
            NSString *phoneLabel =(NSString*) ABAddressBookCopyLocalizedLabel(locLabel);

            CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(numbers, j);
            CFStringRef locLabel1 = ABMultiValueCopyLabelAtIndex(numbers, j);
            NSString *phoneLabel1 =(NSString*) ABAddressBookCopyLocalizedLabel(locLabel);

             NSLog(@" ####### phone no -> %@ , phone label -> %@  #######)", locLabel1, phoneLabel1);
            //CFRelease(phones);
            NSString *phoneNumber = (NSString *)phoneNumberRef;
            CFRelease(phoneNumberRef);
            CFRelease(locLabel);
            NSLog(@"phone no -> %@ , phone label -> %@)", phoneNumber, phoneLabel);
            [phoneNumber release];
        }
        CFRelease(numbers);
    }

    CFRelease(people); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T23:46:35.993

尝试：

```
ABMultiValueRef *phones = ABRecordCopyValue(ref, kABPersonPhoneProperty);

for(CFIndex j = 0; j < ABMultiValueGetCount(phones); j++)
{
   CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(phones, j);
   CFStringRef locLabel = ABMultiValueCopyLabelAtIndex(phones, j);
   NSString *phoneLabel =(NSString*) ABAddressBookCopyLocalizedLabel(locLabel);

   NSString *phoneNumber = (NSString *)phoneNumberRef;
   CFRelease(phoneNumberRef);
   CFRelease(locLabel);
   NSLog(@"  - %@ (%@)", phoneNumber, phoneLabel);

   [phoneNumber release];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-05T17:49:40.257

这对于 ARC 64 位 iOS8 来说是可靠的：

```
- (NSArray *)phoneNumbersOfContactAsStrings:(ABRecordRef)contactRef {

NSMutableArray *mobilePhones = [NSMutableArray arrayWithCapacity:0];

ABMultiValueRef phones = ABRecordCopyValue(contactRef, kABPersonPhoneProperty);
NSArray *allPhoneNumbers = (NSArray *)CFBridgingRelease(ABMultiValueCopyArrayOfAllValues(phones));

for (NSUInteger i=0; i < [allPhoneNumbers count]; i++) {
    if ([(NSString *)CFBridgingRelease(ABMultiValueCopyLabelAtIndex(phones, (long)i)) isEqualToString:(NSString *)kABPersonPhoneMobileLabel]) {
        [mobilePhones addObject:CFBridgingRelease(ABMultiValueCopyValueAtIndex(phones, (long)i))];
    }
    if ([(NSString *)CFBridgingRelease(ABMultiValueCopyLabelAtIndex(phones, (long)i)) isEqualToString:(NSString *)kABPersonPhoneIPhoneLabel]) {
        [mobilePhones addObject:CFBridgingRelease(ABMultiValueCopyValueAtIndex(phones, (long)i))];
    }
}

CFRelease(phones);
return mobilePhones;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T01:11:03.407

以这种方式解决它：

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef all = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFIndex n = ABAddressBookGetPersonCount(addressBook);

for( int i = 0 ; i < n ; i++ )
{
    ABRecordRef ref = CFArrayGetValueAtIndex(all, i);
    NSString *firstName = (NSString *)ABRecordCopyValue(ref, kABPersonFirstNameProperty);
    NSLog(@"Name %@", firstName);

    ABMultiValueRef phones = ABRecordCopyValue(ref, kABPersonPhoneProperty);
    for(CFIndex j = 0; j < ABMultiValueGetCount(phones); j++)
    {

        CFStringRef locLabel1 = ABMultiValueCopyLabelAtIndex(phones, j);
        NSString *phoneLabel1 =(NSString*) ABAddressBookCopyLocalizedLabel(locLabel1);

          NSLog(@"  ### %@  --- %@ ### )", locLabel1, phoneLabel1);

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T01:55:19.050

还要获取具有特定记录 ID 的电话号码，请执行以下操作：

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef all = ABAddressBookCopyArrayOfAllPeople(addressBook);

        ABRecordRef ref = CFArrayGetValueAtIndex(all, indexPath.row);
        NSString *firstName = (NSString *)ABRecordCopyValue(ref, kABPersonFirstNameProperty);
        NSLog(@"Name %@", firstName);

        NSInteger myID = ABRecordGetRecordID(ref);
        NSLog(@"Record id is > %d", myID);

        ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBook,myID);

        ABMultiValueRef phones = ABRecordCopyValue(person, kABPersonPhoneProperty);

        for(CFIndex j = 0; j < ABMultiValueGetCount(phones); j++)
        {

            NSString* num = (NSString*)ABMultiValueCopyValueAtIndex(phones, j);

            CFStringRef locLabel1 = ABMultiValueCopyLabelAtIndex(phones, j);

            NSString *phoneLabel1 =(NSString*) ABAddressBookCopyLocalizedLabel(locLabel1);

            NSLog(@"%@  --- %@ )", num, phoneLabel1);

        } 
```

# sqlite - 在 Chrome 中获取浏览历史记录可以追溯到多远

> ID：10391926
> 
> 赞同：4
> 
> 时间：2012-04-30T23:41:27.633
> 
> 标签：sqlite, google-chrome, google-chrome-extension, browser-history

谷[歌声称](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95589)`chrome.history`Chrome 中保留了 10 周的浏览历史记录，以便在历史记录选项卡中查看，据推测，这与开发扩展程序时 使用 API 的开发人员可用的数据完全相同。

奇怪的是，我经常注意到 Chrome 仍然将链接样式设置为 :visited，即使对于我确定几个月没有访问过的页面也是如此。

我通过谷歌搜索我知道我大约一年前访问过的页面来测试这一点。果然，在 Google 结果页面中，这些链接出现了紫色。但是，如果我打开历史选项卡并搜索该页面，它不会出现。这意味着 Chrome 的存储历史可以追溯到 10 周之前。

我想知道是否有人也发现了这一点，并且可能知道访问完整历史数据的方法，而不仅仅是 10 周。我感觉可以通过直接访问应用程序的 sqlite 表来实现，但我想扩展不可能做到这一点。

# java - 二叉搜索树，你如何找到最大值？

> ID：10391937
> 
> 赞同：1
> 
> 时间：2012-04-30T23:42:40.760
> 
> 标签：java, binary-search-tree

我在业余时间一直在使用二叉搜索树，我希望能够从树中删除节点。

为了让它工作，我需要找到最大值。你怎么做呢？伪代码或提示将不胜感激。我被卡住了，甚至不确定如何开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T23:46:16.653

二叉搜索树具有以下属性：

> 节点的左子树仅包含键小于节点键的节点。节点的右子树只包含键大于节点键的节点。左右子树也必须是二叉搜索树。

考虑到这个定义，应该很容易找到最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:50:32.203

一个简单的伪代码就是这样。我认为它与二进制搜索无关。

```
int maxi = 0
foreach(array as item) // or any other loop
    if item>maxi then maxi = item 
```

# javascript - javascript不评估输入框中的制表符

> ID：10391949
> 
> 赞同：2
> 
> 时间：2012-04-30T23:46:07.333
> 
> 标签：javascript, html, evaluation

我很抱歉标题不清楚，但我想不出任何其他方式来真正说出来；下面是我尝试过的代码示例：

```
<input type="text" id="hor_delim" value="\t" size="2" /> 
```

```
var split = String(document.getElementById('hor_delim').value);
var field = List[i].split(split); 
```

其中 List 是一个数组，其中每个项目都是来自文本区域的单行。此代码的目标是按制表符分隔行，但由于某种我无法理解或弄清楚的原因（通过研究），它不会将 \t 评估为制表符，而是将 \t 视为文字。我试过使用 eval() 没有成功，所以这里的任何帮助将不胜感激。

* * *

在我开始考虑以下（已接受）解决方案后，我设法解决了这个问题，这就是我想出的。就特异性而言，这有点小技巧，但它确实有效；

```
var split = split.replace("\\t","\t"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T23:51:18.677

使用`&#09;`HTML 实体而不是`\t`：

```
<input type="text" id="hor_delim" value="&#09;" size="2" />​ 
```

[http://jsfiddle.net/A8Mnj/](http://jsfiddle.net/A8Mnj/)

# c++ - 给定数字块中的最大可能数字 C++

> ID：10391952
> 
> 赞同：3
> 
> 时间：2012-04-30T23:46:32.957
> 
> 标签：c++, string, numbers, digits

对于给定的数字块数（块数大于 2 且小于 1000），打印可能的最大数字。

这是一个小例子：

输入：

```
5 // Number of blocks of digits

9 // first block

98 // second

90 // third

5 // fourth

9 // fifth 
```

输出：

```
9998905 // The biggest possible number 
```

我在这个问题上做了一些工作，我找到了算法，它似乎适用于任何组合，但我在用 C++ 编写代码时遇到问题

这是算法：

首先，我将它们作为字符串输入，因为我可以更轻松地使用特定数字。然后我将每个数字的第一个数字与每个数字的第一个数字进行比较。并按升序排列它们。如果第一个数字相同，我正在检查第二个数字，依此类推到最后一个数字。如果两个数字的长度不同，并且较小的数字是另一个数字的子字符串，我将较小的数字放在较大的数字前面。

正如我之前所说，这个算法工作正常，但我需要代码，因为我遇到了问题。

这是我到目前为止的工作：

```
#include <iostream>
#include <string>>
using namespace std;
int main()
{
    int nums, maxsl = 0;
    cin >> nums;
    string s[nums];
    for(int i = 0; i<nums; i++)
    {
        cin >> s[i];
        if(s[i].length() > maxsl)
        {
            maxsl = s[i].length();
        }
    }
    for(int i = 0; i<nums; i++)
    {
        for(int j = 0; j<nums; j++)
        {
            for(int k = 0; k<=maxsl; k++)
            {
                if(k<=s[i].length() && k<= s[j].length())
                {
                    if(s[i][k]>s[j][k])
                    {
                        string t = s[i];
                        s[i] = s[j];
                        s[j] = t;
                    }
                }
                else
                {
                    if(s[i].length() > s[j].length())
                    {
                        string t = s[i];
                        s[i] = s[j];
                        s[j] = t;
                    }
                }

            }
        }

    }

    for(int i = 0; i<nums; i++)
    {
        cout << s[i];
    }
} 
```

但是使用这些代码，它只会按升序打印它们，而不是最大的可能数字。这是上一个示例的输出：9890995

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:18:27.817

您的算法不正确：您不能仅按字典顺序对块进行排序，因为它们的长度不同。9 应该被认为大于 98，但它在字典上更小（与字典中“car”排序在“cartoon”之前的原因相同）。

**编辑 ：**

正如 asaelr 在评论中所建议的那样，比较两个数字块的一种方法是将它们以两种方式粘合在一起（`A+B`和`B+A`;`+`表示*连接*），并且检查顺序会产生更大的数字。如果`A+B`大于`B+A`，保持当前顺序；否则，切换数字。

当一个像这样比较数字的函数被传递给`std::sort`时，会产生正确的结果。

这是这个简单算法的实现：

```
#include <string>
#include <vector>
#include <algorithm>
#include <iterator>
#include <iostream>
using namespace std;

bool ahead_of(string left, string right) {
    // Try gluing the blocks both ways, and return true or false
    // based on which order produced a bigger result.
    string a = left+right;
    string b = right+left;
    return a > b;
}

int main() {
    int n;
    // Read the number of items
    cin >> n;
    vector<string> items;
    // Read the items themselves
    for (int i = 0 ; i != n ; i++) {
        string s;
        cin >> s;
        items.push_back(s);
    }
    // Sort using the custom comparer
    sort(items.begin(), items.end(), ahead_of);
    // Copy the result to the output
    ostream_iterator<string> out_it (cout, "");
    copy( items.begin(), items.end(), out_it );
    return 0;
} 
```

# sorting - 归并排序的运行时间 :: 所有元素都相同

> ID：10391956
> 
> 赞同：1
> 
> 时间：2012-04-30T23:46:48.597
> 
> 标签：sorting, runtime, time-complexity, mergesort

假设我们有一个大小为 n 的数组，其中所有元素都相同。O(n) 会是多少？会是线性的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T18:11:58.120

这取决于算法是如何实现的。

使用合并排序的标准“普通”实现，对数组进行排序所需的时间将始终为 Θ(n log n)，因为每个步骤所需的合并都需要线性时间。

然而，通过适当的优化，它可以在 O(n) 时间内运行。在许多合并排序实现中，输入数组不断修改，以便对越来越大的范围进行排序，并且当发生合并步骤时，该算法使用外部缓冲区来合并两个相邻的排序范围。在这种情况下，您可以做一个漂亮的优化：在进行合并之前，检查第一个范围的最后一个元素是否小于或等于第二个范围的第一个元素。如果是这样，则两个加在一起的范围已经排序，因此不需要进行合并。

假设您执行此优化并尝试对所有元素都已排序的数组进行排序。怎么了？好吧，对 mergesort 的每次调用都会触发另外两个递归调用。在这些返回之后，它可以检查排序范围的端点，并会注意到它们已经按排序顺序，所以没有更多的工作要做。总体而言，每次调用的时间复杂度为 O(1)，因此对于算法的时间复杂度，我们有这个递归关系：

> T(n) = 2T(n/2) + O(1)

这解决了 O(n)，因此只完成了线性工作。

# c# - 如何覆盖 WPF 中 Canvas 类的 Children.Add 方法

> ID：10391957
> 
> 赞同：0
> 
> 时间：2012-04-30T23:47:00.913
> 
> 标签：c#, wpf, canvas, overriding

我已经有一个自定义 Canvas 类，我在其中重写了“OnMoseDown”方法。但现在我也想覆盖 'Children.Add' 方法。但我没有找到任何解决方案。

当孩子被添加到画布时，我想获得 Child.ActualWidth 。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:51:08.073

我自己找到了答案。希望这可以在某一天对某人有所帮助。

刚刚在我的自定义类中添加了一个 Add 方法

```
public void Add(UserControl element)
{
    bool alreadyExist = false;
    element.Uid = element.Name;
    foreach (UIElement child in this.Children)
    {
        if (child.Uid == element.Uid)
        {
            alreadyExist = true;
            this.BringToFront(child);
        }
    }
    if (!alreadyExist)
    {
        this.Children.Add(element);
        this.UpdateLayout();
        double top = (this.ActualHeight - element.ActualHeight) / 2;
        double left = (this.ActualWidth - element.ActualWidth) / 2;
        Canvas.SetLeft(element, left);
        Canvas.SetTop(element, top);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:55:54.040

这可能无法正常工作。一个孩子将在设置之前被添加`ActualWidth`，因为该属性是在布局阶段设置的。

根据您在此处的目标，您可能需要考虑覆盖[`MeasureOverride`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride.aspx)and[`ArrangeOverride`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.arrangeoverride.aspx)并[制作自定义布局面板](http://www.wpftutorial.net/CustomLayoutPanel.html)而不是子类化`Canvas`.

# c# - 如何 XML 序列化对象列表数组？

> ID：10391959
> 
> 赞同：4
> 
> 时间：2012-04-30T23:47:40.467
> 
> 标签：c#, xml, exception, xml-serialization

当我尝试对列表数组进行 XML 序列化时，会出现这些错误。

> 无法生成临时类（结果=1）。错误 CS1026: ) 预期错误 CS1002: ; 预期的......错误CS1525：无效的表达式术语'）'错误CS1002：; 预期的

这是我的代码：

这是触发异常的方法。

```
public static string SerializeToString<T>(T obj)
{
    XmlSerializer serializer = new XmlSerializer(typeof(T));
    using (StringWriter writer = new StringWriter())
    {
        serializer.Serialize(writer, obj);
        return writer.ToString();
    }
} 
```

这是传递给它的 var：

```
List<Transaction>[] allTransactions = new List<Transaction>[20]; 
```

谢谢你的帮助。

[更新]

```
public class TransactionCollection
{
    public List<Transaction>[] transactions;

    public TransactionCollection()
    {
    }

    public void Set(List<Transaction>[] t)
    {
        transactions = t;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:27:15.300

我不确切知道；这个错误有点令人沮丧。

但是，如果您宁愿做某事而不是诊断问题，那么只需将列表转换为数组：

```
 public void Run()
    {
        var allTransactions = new List<Transaction>[20];
        for (int i=0; i < allTransactions.Length; i++)
        {
            allTransactions[i] = new List<Transaction>();
        }
        var a = Array.ConvertAll(allTransactions, x => x.ToArray());
        var s = SerializeToString(a);
        System.Console.WriteLine("{0}", s);
    } 
```

结果：

```
<ArrayOfArrayOfTransaction>
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
  <ArrayOfTransaction />
</ArrayOfArrayOfTransaction> 
```

ps：您不需要将数组“包装”成包含类型来序列化它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T00:23:08.657

这对我有用：

```
[XmlRoot("TransactionCollection")]
public class TransactionCollection
{
    private List<List<Transaction>> _lst = new List<List<Transaction>>();   

    [XmlArrayItem()]
    public List<List<Transaction>> Transactions { get { return _lst; } }

    public TransactionCollection()
    {
    }
}

[XmlRoot("Transaction")]
public class Transaction
{
    [XmlElement("Id")]
    public string Id = String.Empty;
} 
```

测试：

```
void Main()
{
    var transactions1 = new List<Transaction> { new Transaction(), new Transaction() };
    var transactions2 = new List<Transaction> { new Transaction(), new Transaction() };
    var trans = new TransactionCollection();
    trans.Transactions.Add(transactions1);
    trans.Transactions.Add(transactions2);
    SerializeToString(trans);
} 
```

请注意，这是因为`XmlSerializer`能够确定列表应序列化为数组项。您还可以使用双交易数组而不是双列表：

```
[XmlArrayItem()]
public Transaction[][] Transactions { get; set; } 
```

如果您确实需要像原始示例中那样使用 Array 和 List，则需要使 List XML 可序列化：

# python - ValueError：需要超过 1 个值才能解压 python

> ID：10391963
> 
> 赞同：9
> 
> 时间：2012-04-30T23:48:17.303
> 
> 标签：python

我有一个现有的菜单，可以为您提供选项`L`或`D`. `L`应该加载文件的内容并`D`显示它。

```
if option == "l" or option == "L":
    with open("packages.txt") as infp:
        for line in infp:
         line = line.rstrip()
         name,adult,child= line.split(',')

if option == "d" or option == "D":
    print ((name)," - ",(adult)," / ",(child)) 
```

但是，当我尝试运行它时，我得到了错误：

> name,adult,child= line.split(',')
> ValueError: need more than 1 value to unpack

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T23:53:31.830

这意味着其中有一条线`packages.txt`，当您去除空格并以逗号分隔时，不会给出确切的三个部分。事实上，它似乎只给出了 1 件（“需要超过 1 个值才能解包”），这表明有一行根本没有逗号。

也许有空白或注释行`packages.txt`？

您可能需要您的代码更智能地解析文件的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T23:50:44.557

此错误发生在

```
name,adult,child= line.split(',') 
```

当您在左侧分配三个变量时，假设您在右侧有一个 3 元组。在此示例中，它似乎`line`没有逗号，因此导致列表中只有一个字符串，因此出现错误“要解压的值`line.split(',')`超过**1 个”。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T23:52:10.877

`line.split(',')`返回一个元组。然后，您可以通过以下*方式解压缩*该元组：

```
name,adult,child= line.split(',') 
```

如果元组没有恰好三个元素，则解包失败。在您的情况下，错误消息指出您只有一个元素。所以，`line.split(',')`显然是返回一个只有一个元素的元组。这意味着`line`没有逗号。

可能这意味着您的输入数据不是您所期望的。您需要它`line`是一个包含三个逗号分隔值的字符串，但您的输入数据中有一行不符合该要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T02:11:16.660

如果您想在不添加额外行和检查的情况下解决此问题，一种解决方案是将拆分更改为以下内容：

```
name, adult, child, garbage = (line+',,,').split(',', maxsplit=3) 
```

这将默默地忽略缺失值，并且变量将为空。`name`意思是，`adult`和的值`child`如果存在则将被填充，如果原始文件没有它们，则将为空。出于所有意图和目的，请忽略变量`garbage`。

# c++ - Libconfig 编辑配置值

> ID：10391967
> 
> 赞同：0
> 
> 时间：2012-04-30T23:49:03.433
> 
> 标签：c++, configuration, libconfig

我正在使用 libconfig 在我的 C++ 游戏中读取/写入配置文件。

现在我只有一个名为 video.cfg 的配置文件：

```
#Video config file
video:
{
    fps:
    {
      limited = true;
      value = 20;
    };
}; 
```

此配置文件处理游戏的视频设置。

我正在尝试编写一个非常基本的控制台程序，该程序根据用户输入修改此值。但是我不知道该怎么做。我在 libconfig 手册中找不到任何内容，在 Google 上也找不到任何内容。

那么如何在 Libconfig 中编辑值呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T02:56:12.137

```
#include <libconfig.h>

int main() {
   config_t cfg;
   config_setting_t *vid_fps_lim = 0;
   config_setting_t *vid_fps_val = 0;

   config_init(&cfg);

   if (config_read_file(&cfg, "myconfig") == CONFIG_TRUE) {

      /* lookup the settings we want */
      vid_fps_lim = config_lookup(&cfg, "video.fps.limited");
      vid_fps_val = config_lookup(&cfg, "video.fps.value");

      /* print the current settings */
      printf("video.fps.limited = %i\n", config_setting_get_bool(vid_fps_lim));
      printf("video.fps.value = %i\n", config_setting_get_int(vid_fps_val));

      /* modify the settings */
      config_setting_set_bool(vid_fps_lim, 1);
      config_setting_set_int(vid_fps_val, 60);

      /* write the modified config back */
      config_write_file(&cfg, "myconfig");
   }

   config_destroy(&cfg);

   return 0;
} 
```

我将文件命名为“lcex.c”，将配置文件命名为“myconfig”，它使用以下命令在我的 Debian Linux 机器上构建和运行...

```
gcc `pkg-config --cflags libconfig` lcex.c -o lcex `pkg-config --libs libconfig`

./lcex 
```

运行应用程序后打开配置文件，您应该会看到值已更新。

免责声明...省略了错误处理以使其更易于阅读。我没有使用 -Wall 等进行构建。与任何 API 一样，请阅读文档并处理潜在错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-17T22:37:18.613

我在寻找一种让 libconfig 将输出写入字符串而不是文件的方法时遇到了这个问题。我看到这里没有可接受的答案，所以我想我会为后代提供一个，即使这个问题已经超过 3 年了。

```
#include <stdint.h>
#include <string>

#include "libconfig.h++"

int32_t
main (void) {
    libconfig::Config config;
    std::string file = "test.conf";

    try {
        config.readFile(file.c_str());

        libconfig::Setting &limited = config.lookup("video.fps.limited");
        libconfig::Setting &value = config.lookup("video.fps.value");

        limited = false;
        value = 60;

        config.writeFile(file.c_str());
    }
    catch (...) {
        // Do something reasonable with exceptions here.  Do not catch (...)
    }

    return 0;
} 
```

希望对某人有所帮助！

# javascript - 高分辨率图像查看器

> ID：10391969
> 
> 赞同：0
> 
> 时间：2012-04-30T23:49:29.580
> 
> 标签：javascript, iphone, objective-c, html, cordova

Objective-C 中是否有任何库（免费或付费）可用于显示由 512x512 像素图块（不知何故，谷歌地图所做的）完成的巨大图像地图？

或者也许有一个 HTML5/Javascript 库，我可以与 PhoneGap 一起使用来获得此功能。

每个图块都是 jpeg/png 并存储在本地设备或云中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:27:23.460

有一个苹果演示应用程序可以完全满足您的要求：

[http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)

在此演示中，tile-size 为 256x256，但您可以轻松调整代码以满足您的要求。

# playframework - 游戏中的作业调度！框架

> ID：10391974
> 
> 赞同：1
> 
> 时间：2012-04-30T23:50:31.233
> 
> 标签：playframework, job-scheduling, timer-jobs, playframework-1.x

我目前正在开发一个游戏驱动（v. 1.2.4）应用程序，用户可以在其中执行某些任务并获得奖励。这些任务需要一些能量，这些能量会随着时间的推移而补充。基本设置如下：

```
public class User extends Model {
    public Long energy;
    public Long maxenergy;
    public Long cooldown = Long.valueOf(300);
}

public class Task extends Controller {
    public static void perform(Long id) {
        User user = User.findById(id).first();

        // do some complex task here...

        user.energy--;
        user.save();
        Task.list();
    }
} 
```

现在我想在冷却时间（5 分钟）后补充用户的能量。假设用户有 10/10 能量点，我想在使用 5 分钟后重新填充点，我可以轻松地为此使用工作：

```
public class EnergyHealer extends Job {
    public Long id;

    public EnergyHealer(Long id) {
        this.id = id;
    }

    public void doJob() throws Exception {
        User user = User.findById(id);
        user.energy++;
        if (user.energy > user.maxenergy) {
            user.energy = user.maxenergy;
        }
        user.save()
    }
} 
```

...并在任务完成后立即在我的控制器中调用它：

```
new EnergyHealer(user.id).in(user.cooldown); 
```

我的问题是，在这种情况下，作业是同时安排的，因此如果用户在执行前一个任务后 2 秒执行任务，则第一个能量点会在 5 分钟后重新填充，而后续点仅在 2 秒后重新填充。

因此，我需要对作业进行序列化，例如，假设我有 10 个能量点中的 8 个，那么重新填充所有能量点应该需要 10 分钟**。**

相关说明：一旦达到某个阈值，用户就有不同的级别并获得完成任务的经验。他们的等级增加，**所有**能量点都被重新填充，无论之前的等级使用了多少能量点，因此一些工作可能在执行时已经过时。

考虑到几千个用户，工作可能根本不是完美的选择，所以如果有人对如何实现所描述的场景有想法，我很高兴提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:11:51.127

我认为你只是把你的工作安排错了。与其在每次他们执行一个动作时都开始你的工作，你应该简单地拥有一个外观或者只有在用户不存在的情况下才会开始工作的东西。

1.  如果作业尚不存在，则创建它，否则不执行任何操作

2.  那么这应该增加1能量，

3.  检查能量是否已满，如果是，结束

4.  如果没有，请暂停 5 分钟

5.  回到 2

# ruby-on-rails - 如何使我的计数线程安全？

> ID：10391978
> 
> 赞同：0
> 
> 时间：2012-04-30T23:50:59.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个控制器，它的唯一功能是增加模型中的计数（即`foo_count`）并加载视图。

假设我有 2 个 Web 实例正在运行。如果 10 个并发用户同时访问此页面/控制器。我的数会是 10 吗？

会有某种竞争条件吗？由于它们是并发命中，因此两个 Web 请求都将加载 model 的副本`Foobar`，其中`foo_count`via 等于 0 `FoobarController`。

这意味着他们都在自己的副本上运行`Foobar`，不知道其他 Web 实例正在做的更改。这也意味着，计数不太可能是 10。

有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T23:54:15.130

您应该使用[内置的记录锁定](http://guides.rubyonrails.org/active_record_querying.html#locking-records-for-update)来避免竞争条件。

# c++ - 从文件到浮动的文本

> ID：10391981
> 
> 赞同：0
> 
> 时间：2012-04-30T23:51:26.083
> 
> 标签：c++, string, floating-point

我有`std::vector<std::string> WorldData`。它包含我的名为 world.txt 的文件的每一行（有 opengl 3d 协调），它看起来像：

```
-3.0 0.0 -3.0 0.0 6.0
-3.0 0.0 3.0 0.0 0.0
3.0 0.0 3.0 6.0 0.0 etc. 
```

我如何将这些字符串转换为浮点变量？当我尝试时：

```
scanf(WorldData[i].c_str(), "%f %f %f %f %f", &x, &y, &z, &tX, &tY);
or
scanf(WorldData[i].c_str(), "%f %f %f %f %f\n", &x, &y, &z, &tX, &tY); 
```

变量 x, y, z, tX, tY 得到一些奇怪的数字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T00:00:40.293

我不是从文件读取到向量，然后从向量读取到坐标，而是直接从文件中读取坐标：

```
struct coord { 
    double x, y, z, tX, tY;
};

std::istream &operator>>(std::istream &is, coord &c) { 
    return is >> c.x >> c.y >> c.z >> c.tX >> c.tY;
} 
```

然后，您可以使用以下方法创建坐标向量`istream_iterator`：

```
std::ifstream in("world.txt");

// initialize vector of coords from file:
std::vector<coord> coords((std::istream_iterator<coord>(in)),
                           std::istream_iterator<coord>()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T23:54:12.373

使用[sstream](http://www.cplusplus.com/reference/iostream/istringstream/)：

```
std::istringstream iss(WorldData[i]);
iss >> x >> y >> z >> tX >> tY; 
```

# visual-studio - 使用 Visual Studio 2008 签署程序集时出现错误“对象已存在”

> ID：10391982
> 
> 赞同：1
> 
> 时间：2012-04-30T23:51:32.200
> 
> 标签：visual-studio, deployment, clickonce, code-signing

我在几个地方遇到了相同的问题，包括 Stack Overflow 问题*[Visual Studio 报告错误 "PFX - Error Importing Key / Object already exists"](https://stackoverflow.com/questions/888148)*。

大多数人在 Windows Vista 和 Windows 7 上都遇到问题，但就我而言，我在 Windows XP 上以管理用户身份运行。我已经尝试了我找到的所有解决方案，但到目前为止都没有奏效。由于我找到的大部分信息都是几年前的：是否有一些更好/最新的信息，也许有更频繁的修复？

我的代码签名证书来自[Go Daddy](http://en.wikipedia.org/wiki/Go_Daddy)，它可以与[SignTool.exe](http://msdn.microsoft.com/en-us/library/8s9b9yaz.aspx)实用程序一起正常工作。我已经使用 SignTool.exe 签署了很多在 Visual Studio 之外构建的 EXE 文件，它们都验证正确。

我尝试使用 SignTool.exe 以这种方式为我当前的项目签名我的 EXE 文件，但似乎存在一些与我尝试用于该项目的[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)发布相关的额外问题......哈希不匹配，并且 ClickOnce即使 EXE 文件已签名，仍报告为“发布者未知”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:55:56.693

我仍然无法让 IDE 选项工作，但这对我有用，而且还不错：

1.  在 IDE 中启用“签署 ClickOnce 清单”并选择“从商店”（从 PFX 文件中选择会产生相同的“对象已存在”错误）。

2.  不要选中“签署程序集”。

3.  添加构建后事件以运行：

    ```
    c:\signtool.exe sign /f c:\cert.pfx /p password /t http://tsa.starfieldtech.com c:\project\obj\debug\myapp.exe 
    ```

所以基本上使用signtool.exe签名是诀窍，但清单也需要签名（我让IDE做），另一个不明显的部分是你需要从OBJ文件夹中签署EXE文件，而不是 BIN 文件夹。

我比我猜的 IDE 更喜欢这个，因为使用 IDE 我认为您每次都必须输入密码。这样，密码就在构建后事件命令行中。

# objective-c - 为什么用下划线合成不起作用？

> ID：10391983
> 
> 赞同：1
> 
> 时间：2012-04-30T23:52:06.010
> 
> 标签：objective-c, ios

我正在尝试在我的 iPhone 应用程序中合成变量

```
@synthesize samples=_samples; 
```

`samples`声明为

```
@property (strong, nonatomic) NSMutableArray *samples; 
```

但是，我收到一个构建错误，声称 _samples 不存在。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T00:24:38.507

您是否尝试`_samples`从实现文件外部访问？`@synthesize`通过调用的实现之外的任何东西都无法查看通过生成的 ivars `@synthesize`。所以如果你做这样的事情......

```
MyView *myView = [[MyView alloc] init];
myView._sample; 
```

...你会看到一个错误。有关更多详细信息，请参见此处：[https](https://stackoverflow.com/a/8511046/251012) ://stackoverflow.com/a/8511046/251012 。

.

.

.

**编辑：以下所有内容都是错误的。左，这样评论才有意义**

您是否在声明您的 ivar 并且名称拼写是否正确？

当你说类似...

```
@synthesize foo = _foobar; 
```

...您需要确保在界面中设置实例变量，如下所示...

```
@interface MyObject : NSObject
{
    NSString *_foobar;
}
@property(nonatomic,strong) NSString *foo;
@end 
```

需要明确的是，当您说 时`foo=_foobar`，`foo`是自动生成 getter/setter 的基本名称，并且`_foobar`是 ivar 的名称。如果没有声明 ivar，`@property`将自动生成一个同名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:58:57.773

同样的代码在我这边工作。尝试重新启动 xcode 并重建项目。

# database - 如何在 Play 2.0 中为每个环境设置不同的数据库？

> ID：10391987
> 
> 赞同：23
> 
> 时间：2012-04-30T23:52:34.163
> 
> 标签：database, scala, configuration, playframework, playframework-2.0

我希望我的 Play 应用程序将不同的数据库用于测试、本地和生产（生产是 Heroku）环境。

在`application.conf`我有：

```
db.default.driver=org.postgresql.Driver 

%dev.db.default.url="jdbc:postgresql://localhost/foobar" 
%test.db.default.url="jdbc:postgresql://localhost/foobar-test" 
%prod.db.default.url=${DATABASE_URL} 
```

这似乎不起作用。当我运行`play test`or`play run`时，所有数据库访问都失败并显示：

```
 Configuration error [Missing configuration [db.default.url]] (Configuration.scala:258) 
```

我对此有几个问题：

*   一般来说，我对在 Play 中如何配置数据库有点困惑：看起来像是 plain `db`，`db.[DBNAME]`并且`db. [DBNAME].url`不同的教程在其中做出不同的选择。某些看起来应该可以工作的表达式（例如`db.default.url = "jdbc:..."`，在预期对象的位置提供了字符串而失败）。

*   我看到其他人建议我创建单独`prod.conf`的 ,`dev.conf`和`test.conf`文件，每个文件都包含`application.conf`然后包含特定于 DB 的配置。但在这种情况下，我如何指定`test`从 Play 控制台运行时要使用的数据库？

*   `%env`语法应该在 Play 2 中工作吗？

*   指定使用环境的正确方法是`play test`什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-01T02:31:46.000

在 Play 2 中没有不同的配置环境。相反，您只需设置或覆盖`conf/application.conf`文件中的配置参数。一种方法是在`play`命令行上，例如：

```
play -Ddb.default.driver=org.postgresql.Driver -Ddb.default.url=$DATABASE_URL ~run 
```

您还可以告诉 Play 使用不同的配置文件：

```
play -Dconfig.file=conf/prod.conf ~run 
```

有关 Heroku 的 Procfile 示例，请参阅：
[https ://github.com/jamesward/play2bars/blob/scala-anorm/Procfile](https://github.com/jamesward/play2bars/blob/scala-anorm/Procfile)

Play Docs 中的更多详细信息：
[http ://www.playframework.org/documentation/2.0/Configuration](http://www.playframework.org/documentation/2.0/Configuration)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-27T14:11:18.527

至少在 Play 2.1.1 中，如果设置了环境变量，则可能会使用环境变量覆盖配置值。（详情见：[http](http://www.playframework.com/documentation/2.1.1/ProductionConfiguration) ://www.playframework.com/documentation/2.1.1/ProductionConfiguration ）

因此，您可以在 中设置以下内容`conf/application.conf`：

```
db.default.url="jdbc:mysql://localhost:3306/my-db-name"
db.default.url=${?DATABASE_URL_DB} 
```

默认情况下，除非环境变量`DATABASE_URL_DB`为其定义了值，否则它将使用定义的 JDBC-URL。因此，您只需在配置中设置开发数据库，​​并为生产或阶段定义环境变量。

但请注意，如果您将变量引用放在带引号的字符串中，则此替换不起作用：

```
db.default.url="jdbc:${?DATABASE_URL_DB}" 
```

例如，只需取消引用要替换的部分即可。

```
database_host = "localhost"
database_host = ${?ENV_DATABASE_HOST}
db.default.url="jdbc:mysql://"${?database_host}":3306/my-db-name" 
```

`ENV_DATABASE_HOST`在此示例中，如果未设置环境变量，则默认使用 localhost 。（详情见：[https](https://www.playframework.com/documentation/2.5.x/ConfigFile#substitutions) ://www.playframework.com/documentation/2.5.x/ConfigFile#substitutions ）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T01:22:24.513

实际上，您仍然可以使用 Play 1.0 配置值命名方法，在 Play 2 中，如果您在加载配置值时检查 if `Play.isTest`，然后在加载的属性前加上“test.”。这是一个片段：

```
def configPrefix = if (play.api.Play.isTest) "test." else ""

def configStr(path: String) =
  Play.configuration.getString(configPrefix + path) getOrElse
     die(s"Config value missing: $configPrefix$path")

new RelDb(
  server = configStr("pgsql.server"),
  port = configStr("pgsql.port"),
  database = configStr("pgsql.database"),
  user = ...,
  password = ...) 
```

以及相关的配置片段：

```
pgsql.server="192.168.0.123"
pgsql.port="5432"
pgsql.database="prod"
...

test.pgsql.server="192.168.0.123"
test.pgsql.port="5432"
test.pgsql.database="test"
... 
```

现在，您无需记住在运行 e2e 测试套件时设置任何系统属性，也不会意外连接到 prod 数据库。

我想您可以选择将这些`test.`值放在一个单独的文件中，然后将其包含在我认为的主配置文件的末尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T16:28:24.300

还有另一种方法是覆盖 Global / GlobalSettings 方法**onLoadConfig**并从那里您可以使用通用配置和特定环境配置设置应用程序配置，如下所示...

```
conf/application.conf --> configurations common for all environment
conf/dev/application.conf --> configurations for development environment
conf/test/application.conf --> configurations for testing environment

conf/prod/application.conf --> configurations for production environment 
```

您可以查看[http://bit.ly/1AiZvX5](http://bit.ly/1AiZvX5)了解我的示例实现。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-02T00:54:57.940

题外话，但是如果您遵循 12-factor-app ，那么以环境命名的单独配置是不好的：

`Another aspect of config management is grouping. Sometimes apps batch config into named groups (often called “environments”) named after specific deploys, such as the development, test, and production environments in Rails. This method does not scale cleanly: as more deploys of the app are created, new environment names are necessary, such as staging or qa. As the project grows further, developers may add their own special environments like joes-staging, resulting in a combinatorial explosion of config which makes managing deploys of the app very brittle`

来源：http: [//12factor.net/config](http://12factor.net/config)

# spring-mvc - 在 Spring 3.1 中可以 与@Configuration 结合使用

> ID：10391988
> 
> 赞同：5
> 
> 时间：2012-04-30T23:52:41.560
> 
> 标签：spring-mvc, configuration, spring-3, spring-annotations

我从 Spring 3.0.5 迁移到 3.1，因为我需要自定义 RequestMappingHandlerMapping。我在扩展 RequestMappingHandlerMapping 的插件中遇到问题 - 我有现有的 servlet-conetxt.xml 并且我添加了带有 @Configuration 注释的 WebConfig。但是，我总是得到错误模糊映射（因为在 ExtendedRequestMappingHandlerMapping 中定义的新注释没有生效）。

我在 servlet-context.xml 中定义了各种级别的拦截器，我想将它们保留在 XML 配置中。我想用 .

有没有办法使用servlet-context.xml的结合，同时扩展RequestMappingHandlerMapping。如果必须使用 @CONfiguration 来完成 - 我可以同时使用 @CONfiguration 和 servlet-context.xml 吗？任何帮助将不胜感激，因为我已经尝试了很长时间。

```
<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param>

<context-param>
 <param-name>contextConfigLocation</param-name>
 <param-value>com.test.config</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T05:21:14.023

是的，您可以使用它： 示例：

```
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

  @Override
  public void addInterceptors(InterceptorRegistry registry) {
    registry.addInterceptor(new LocalInterceptor());
    registry.addInterceptor(new SecurityInterceptor()).addPathPatterns("/secure/*");
 }

} 
```

只是参考

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-interceptors](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-interceptors) 了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T02:22:19.787

如果使用

```
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {
  @Autowired
  Anything anything;

  @Override
  public void addInterceptors(InterceptorRegistry registry) {
     log.info(anything.toString());//this will exception,how to fix?
    registry.addInterceptor(new LocalInterceptor());
    registry.addInterceptor(new SecurityInterceptor()).addPathPatterns("/secure/*");
 }

} 
```

@service 不能设置为拦截器

# nsdate - NSDate 从 12 小时开始

> ID：10391989
> 
> 赞同：0
> 
> 时间：2012-04-30T23:53:03.810
> 
> 标签：nsdate, nsdateformatter

我正在尝试从 2 个 NSStrings 创建一个 NSDate 对象。

其中一个 NSString 的格式为 ==> mm/dd/yyyy（以下示例中的 g.date）

另一种形式为 ==> hh:mm am/pm（以下示例中的 g.time）

以下代码：

```
for(Game *g in _games) {
    NSDateFormatter *format = [[NSDateFormatter alloc] init];
    [format setDateFormat:@"dd'/'MM'/'yyyy HH':'mm"];
    NSString *dateString = [NSString stringWithFormat:@"%@ %@", g.date, g.time];
    dateString = [dateString substringToIndex:[dateString length]-3];
    NSDate *date = [format dateFromString:dateString];
    NSLog(@"%@ ==> %@", dateString, date);
} 
```

产生不准确和不可预测的输出，如下所示：

```
2012-04-30 19:39:06.923 MLP[27866:fb03] 05/03/2012 8:30 ==> 2012-03-05 13:30:00 +0000
2012-04-30 19:39:06.923 MLP[27866:fb03] 05/03/2012 8:45 ==> 2012-03-05 13:45:00 +0000
2012-04-30 19:39:06.924 MLP[27866:fb03] 03/29/2012 9:30 ==> (null)
2012-04-30 19:39:06.924 MLP[27866:fb03] 03/29/2012 8:15 ==> (null)
2012-04-30 19:39:06.925 MLP[27866:fb03] 03/01/2012 9:15 ==> 2012-01-03 14:15:00 +0000
2012-04-30 19:39:06.925 MLP[27866:fb03] 05/03/2012 9:00 ==> 2012-03-05 14:00:00 +0000
2012-04-30 19:39:06.926 MLP[27866:fb03] 03/29/2012 9:00 ==> (null)
2012-04-30 19:39:06.926 MLP[27866:fb03] 05/03/2012 9:15 ==> 2012-03-05 14:15:00 +0000 
```

我正在切断时间字符串的 AM/PM 部分，因为我不知道如何在 NSDateFormatter 语法中指示它的存在。我怎样才能做到这一点？

帮助表示赞赏，

帕春

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:47:25.177

为将来可能遇到此问题的任何人想通了。这是修复它的原因：

```
// Sort by date
- (NSComparisonResult)compare:(Game *)g {

    // Parse date's strings to an NSDate
    NSDateFormatter *format = [NSDateFormatter new];
    [format setDateFormat:@"MM/dd/yyyy hh:mma"];

    NSString *otherDateString;
    NSString *myDateString;

    if([g.time length]==7)
        otherDateString = [NSString stringWithFormat:@"%@ 0%@", g.date, g.time];
    else otherDateString = [NSString stringWithFormat:@"%@ %@", g.date, g.time];
    if([_time length]==7)
        otherDateString = [NSString stringWithFormat:@"%@ 0%@", _date, _time];
    else otherDateString = [NSString stringWithFormat:@"%@ %@", _date, _time];

    NSDate *otherDate = [format dateFromString:otherDateString];
    NSDate *myDate = [format dateFromString:myDateString];

    return [myDate compare:otherDate];
} 
```

# ruby - 将 0 填充添加到 ruby 中字符串中间的数字

> ID：10391992
> 
> 赞同：1
> 
> 时间：2012-04-30T23:53:35.200
> 
> 标签：ruby

这可能是一个非常简单的正则表达式，但它是已证明很难用谷歌搜索的问题之一。

我收到来自第三方系统的错误代码。它们应该采用以下格式：

> ZZZ##

其中 Z 是 Alpha，# 是数字。他们应该是 0 填充，但我发现有时他们会回来

> ZZZ#

没有 0 填充。

任何人都知道我如何添加 0 填充，以便我可以将字符串用作哈希的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T00:00:38.533

这是我的看法：

```
def pad str
  number = str.scan(/\d+/).first
  str[number] = "%02d" % number.to_i
  str
end

6.times do |n|
  puts pad "ZZZ#{7 + n}"
end

# >> ZZZ07
# >> ZZZ08
# >> ZZZ09
# >> ZZZ10
# >> ZZZ11
# >> ZZZ12 
```

阅读：

*   [字符串#[]=](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D-3D)
*   [Kernel#sprintf 和格式化标志](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-sprintf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T00:04:36.467

```
fixed = str.gsub /([a-z]{3})(\d)(?=\D|\z)/i, '\10\2' 
```

说的是：

*   找到三个字母
    *   …后跟一个数字
    *   …并确保您看到非数字或文件结尾
*   并替换为三个字母 ( `\1`)、一个零 ( `0`)，然后是数字 ( `\2`)

要填充到任意长度，您可以：

```
# Pad to six digits
fixed = str.gsub /([a-z]{3})(\d+)/i do
  "%s%06d" % [ $1, $2.to_i ]
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T01:29:03.367

这是我的：

```
"ZZZ7".gsub(/\d+/){|x| "%02d" % x}
=> "ZZZ07" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T00:55:40.990

可能有一百万种方法可以做到这一点，但这里有另一种看法。

> str.gsub!(/[0-9]+/ , '0\0' ) 如果 str.length < 5

# java - 我有一个关于显示器问题的非常愚蠢的询问

> ID：10391994
> 
> 赞同：0
> 
> 时间：2012-04-30T23:53:49.237
> 
> 标签：java, android, eclipse

```
 package walmart.namespace;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button; 
```

导入 android.widget.EditText；导入 android.widget.TextView；

```
public class WalmartActivity extends Activity {
        /** Called when the activity is first created. */

        EditText name;
        Button search;
    TextView display;

        @Override
        public void onCreate(Bundle savedInstanceState) {
             setContentView(R.layout.main);   
            super.onCreate(savedInstanceState);

                name = (EditText)findViewById(R.id.etName);

                search = (Button) findViewById(R.id.btnSearch);

                display = (TextView) findViewById(R.id.tvdisplay);

                name.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                                name.setText("");
                        }
                });
                search.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                               if (name.equals("Electronics")) {
                                display.setText ('5');
                           } else if (name.equals("candy")) {
                                   display.setText ('1');
                           } else if (name.equals("Tobacco")) {
                               display.setText ("1");
                           } 
        }});
};} 
```

无论我做什么，我的输出中都没有显示任何内容。我对 JAVA 非常非常陌生，所以我似乎无法找出为什么我的显示器上没有显示任何内容。

*编辑*将我的代码编辑为我目前拥有的。还是行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:08:03.927

查看该代码，问题可能与您如何初始化名称和搜索有关。

更改您的代码：

```
name = (EditText) findViewById(getResources().getIdentifier("etName", "id", getPackageName()));
search = (Button) findViewById(getResources().getIdentifier("btnSearch", "id", getPackageName())); 
```

对此：

```
name = (EditText) findViewById(R.id.etName);
search = (Button) findViewById(R.id.btnSearch); 
```

此外，添加一个 TextView 以将您的答案显示到您的`main.xml`文件中，给它一个 id（例如显示）`android:id="@+id/display"`，然后将其添加到您的活动中，以便您可以更改它：

```
display = (TextView) findViewById(R.id.display); 
```

然后你可以通过调用来更新它：

```
display.setText('some text'); 
```

因此，您的文件的开头应如下所示：

```
public class WalmartActivity extends Activity {
    /** Called when the activity is first created. */

    EditText name;
    Button search;
    TextView display;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); 

        name = (EditText) findViewById(R.id.etName);
        search = (Button) findViewById(R.id.btnSearch);
        display = (TextView) findViewById(R.id.display);

        .... 
```

接下来更新您的`if`陈述：

```
if (name.equals("Electronics")) 
```

到：

```
if (name.getText().toString().equals("Electronics")) {
    display.setText("something");
} 
```

一段代码示例：

Demo2Activity.java

```
package com.demo1;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Demo2Activity extends Activity {
    private Button button;
    private EditText editText;
    private TextView textView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        button = (Button) findViewById(R.id.button);
        editText = (EditText) findViewById(R.id.editText);
        textView = (TextView) findViewById(R.id.textText);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (editText.getText().toString().equals("Electronics")) {
                    textView.setText("found");
                }

            }
        });

    }
} 
```

main2.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="main2.xml"
        android:id="@+id/textText" />
    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/editText"/>
    <Button
        android:id="@+id/button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="button" />

</LinearLayout> 
```

# javascript - 如果月份不是当前月份

> ID：10391995
> 
> 赞同：1
> 
> 时间：2012-04-30T23:53:59.193
> 
> 标签：javascript

我们有一个 .NET Web 服务，它返回 JSON，包括如下字符串格式的日期：2012-04-30T00:00:00+12:00。

在javascript中，我想排除月份不是当前月份的日期。因此，对于上述日期，月份是 04（四月），当前月份是五月（无论如何在新西兰）。所以，我想忽略这条记录，例如，在伪代码中：

```
if(vMonth == CurrentMonth){
     dothis();
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T23:57:53.443

编辑：有关适用于所有浏览器的解决方案，请参阅下面的 Rob G 的答案。

```
var dateOne = new Date("2012-04-30T00:00:00+12:00");​​​
var dateTwo = new Date();

if(dateOne.getMonth() == dateTwo.getMonth()) {
    alert("equal");
} 
```

这是 jsfiddle：http: [//jsfiddle.net/Mq5Tf/](http://jsfiddle.net/Mq5Tf/)

有关日期对象的更多信息：MSDN：[https](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date) ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date ES5：[http ://es5.github.com/#x15.9.2](http://es5.github.com/#x15.9.2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T23:59:21.607

```
var date = new Date();
var currentMonth = date.getMonth();
var yourMonth = 4;
if(yourMonth == currentMonth ){
    /* Do this */
    alert('Hello');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T00:48:10.643

不依赖于解析日期字符串的替代方法：

```
function checkMonth(ds) {
  var now = new Date();
  var m = now.getMonth() + 1;
  return !!ds.match(now.getFullYear() + '-' + (m<10?'0':'') + m);
}

// on 2012-05-01
alert( checkMonth('2012-04-30T00:00:00+12:00') ); // false
alert( checkMonth('2012-05-01T00:00:00+12:00') ); // false 
```

### 编辑

请注意，检查月份数字仅适用于应忽略时区偏移或不重要的情况。虽然`2012-04-30T00:00:00+12:00`是在 4 月，但`2012-04-30T14:00:00+12:00`将是当地时间 5 月 1 日凌晨 2 点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T00:02:08.670

```
// Means April 30, months are indexes in JS
var input = new Date(2012, 03, 30);​​​
// or use format new date("2012-04-30T00:00:00+12:00") suggested in other answer

var currentDate = new Date();

if(input.getFullYear() == currentDate.getFullYear() // if you care about year
   && input.getMonth() == currentDate.getMonth()) {

    // act accordingly
} 
```