# StackOverflow 问答 11142000-11142999

# qt - QML 中的 parent.right（例如）到底是什么，它与 parent.anchors.right 有何不同？

> ID：11142000
> 
> 赞同：2
> 
> 时间：2012-06-21T15:54:12.183
> 
> 标签：qt, layout, qml

[http://doc.qt.io/archives/qt-4.7/anchor-layout.html](http://doc.qt.io/archives/qt-4.7/anchor-layout.html)告诉父母是“一条不可见的`anchors.right`锚线”并指向`anchors.right : AnchorLine`,`Item`

但是`parent.right`并且`parent.anchors.right`似乎是不同的事情（并且您通常不能锚定后者，而锚定到前者则可以按预期工作）。

有人给我提示文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:41:03.053

我没有找到任何文档，但查看来源表明这`parent.right`是一个常数，并且`parent.anchors.right`是您可以设置关联的地方。

所以他们不应该是一样的。你可以认为`parent.right`是 a`const int RIGHT=1;`和`parent.anchors.right`as`int rightAnchor;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:39:30.650

两者都是锚线 ( `QDeclarativeAnchorLine`)，如果设置了锚点，甚至可以锚定到`parent.anchors.right`（或任何其他项目的`anchors.right`）。

# file - BoxedApp SDK 有什么替代品吗？

> ID：11142002
> 
> 赞同：12
> 
> 时间：2012-06-21T15:54:14.580
> 
> 标签：file, virtual

BoxedApp [http://www.boxedapp.com/boxedappsdk/](http://www.boxedapp.com/boxedappsdk/)对于编写需要虚拟或假文件的程序很有用。我想知道是否有任何其他库或组件可以免费替代它？我需要这样的东西的原因是，我在内存中有一个流并且需要它来播放。（流是电影）任何免费的选择？（BoxedApp 可以处理。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:11:23.347

我知道 Microsoft Detours 可以替代 BoxedApp。至于另一种选择- 我不知道。祝你好运

# api - 如何通过 API 检索 Salesforce 文件附件限制？

> ID：11142003
> 
> 赞同：1
> 
> 时间：2012-06-21T15:54:15.230
> 
> 标签：api, salesforce

Salesforce 附件文件大小正式限制为 5MB ( [doc](http://na1.salesforce.com/help/doc/en/collab_files_size_limits.htm) )，但如果需要，他们可以在一对一的情况下增加此限制。

我的问题：我可以使用 API 检索这个新允许的文件大小限制吗？

背景：非营利组织正在通过门户网站 (.NET) 申请拨款，所有数据都存储在 Salesforce 中。他们被要求附上文件。我们阅读了他们尝试上传的文件大小，如果超过 5MB，则会发送错误消息，因为 Salesforce 不会接受。这是为了避免让他们等待几分钟上传才被告知文件太大。我们希望更新我们的代码，以便在 Salesforce 允许的情况下允许大于 5MB 的文件。我们可以通过 API 检索这些信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T00:36:32.957

您可以在[SOAP API](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_getuserinfo.htm)`getUserInfo()`中调用该函数，返回的部分数据包括该字段（这似乎从文档中丢失，但在 WSDL 中）`orgAttachmentFileSizeLimit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T21:35:44.853

我会建议离开 Salesforce 来存储文件，如果您希望达到限制，则更多，而且存储组织范围内的空间也有限制，像 Amazon S3 这样的有用服务将非常有用，然后您可以附加S3 url 到您的记录以防万一，它也可用于外部应用程序，而无需加载您组织的 api 消耗。

# facebook - Facebook Feed 对话框，其中包含已上传到 Facebook 的视频

> ID：11142008
> 
> 赞同：0
> 
> 时间：2012-06-21T15:54:20.087
> 
> 标签：facebook, facebook-graph-api, dialog

我正在尝试在 Facebook 中使用已上传到 Facebook 的视频来创建一个提要对话框。

首先，我尝试将视频的 URL 放入“源”参数，并使用 Graph Api 返回的 json 提取它。但是，Facebook 不以这种方式支持他们自己的媒体 URL。

我的意图是在您在 Facebook 个人资料中的任何视频中单击“分享”时显示相同的效果，但我不知道如何参考该视频。

我在 Facebook 的开发人员文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:03:19.787

尝试链接到视频页面本身，例如如果您想分享视频，您如何链接到 YouTube。当你这样做时，Facebook 会在墙上呈现 YouTube 播放器，所以理论上它应该在你分享 Facebook 视频 URL 时做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:28:15.527

我刚刚找到了选项：“嵌入此视频”。在 Facebook 在此选项中提供的代码中，我可以找到视频的 URL (www.facebook.com/v/video_id)，这在提要对话框中运行良好。

问题是 JSON 中给出的 URL。

谢谢

# django - 管理员外部和自定义表单中的 Django 权限

> ID：11142009
> 
> 赞同：0
> 
> 时间：2012-06-21T15:54:21.537
> 
> 标签：django, django-forms

我有一个有 2 个用户级别的应用程序；超级用户和员工。超级用户将登录到这个应用程序并创建一个新用户并为用户分配超级用户或员工权限，但他们没有通过默认的 Django 管理员登录，他们将登录到自定义管理员。如何在我的表单中显示权限复选框以及如何为正在创建的新用户保存它们？它只是一个普通的复选框，还是我需要覆盖一些东西才能完成这个？

这是我现在的 CreateUserForm。

```
class CreateUserForm(forms.Form):
    username = forms.EmailField(max_length=50)
    email = forms.EmailField()
    first_name = forms.CharField(max_length=150)
    last_name = forms.CharField(max_length=150)
    password1 = forms.CharField(max_length=30, widget=forms.PasswordInput(render_value=False), label='Password')
    password2 = forms.CharField(max_length=30, widget=forms.PasswordInput(render_value=False), label='Password Confirmation')
    address_1 = forms.CharField(max_length=50)
    address_2 = forms.CharField(max_length=50)
    city = forms.CharField(max_length=50)
    province = forms.CharField(max_length=2)
    country = forms.CharField(max_length=50)
    postal_code = forms.CharField(max_length=10)
    work_phone = forms.CharField(max_length=20)
    mobile_phone = forms.CharField(max_length=20)
    fax = forms.CharField(max_length=20)
    url = forms.CharField()
    comments = forms.CharField(widget=forms.Textarea)

    def clean_username(self):
        try:
            User.objects.get(username=self.cleaned_data['username'])
        except User.DoesNotExist:
            return self.cleaned_data['username']
        raise forms.ValidationError("Sorry, this username has already been taken. Please choose another.")

    def clean_email(self):
        try:
            User.objects.get(email=self.cleaned_data['email'])
        except User.DoesNotExist:
            return self.cleaned_data['email']
        raise forms.ValidationError("Sorry, this email has already been taken. Please choose another.")

    def clean(self):
        if 'password1' in self.cleaned_data and 'password2' in self.cleaned_data:
            if self.cleaned_data['password1'] != self.cleaned_data['password2']:
                raise forms.ValidationError("You must type the same password each time.")
            if ' ' in self.cleaned_data['username']:
                raise forms.ValidationError("username must not contain spaces")
        return self.cleaned_data

    def save(self):
        new_user = User.objects.create_user(
            username = self.cleaned_data['username'],
            email = self.cleaned_data['email']
        )
        new_user.first_name = self.cleaned_data['first_name']
        new_user.last_name = self.cleaned_data['last_name']
        new_user.set_password(self.cleaned_data['password'])
        new_user.is_active = True
        new_user.save()

    new_profile = UserProfile(
        # TODO:
    ) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:00:43.923

如果您指的是 is_staff 和 is_superuser 的权限复选框，那么您最好使用带有 User 模型的 ModelForm。这将自动为您处理一切。

```
class UserForm(forms.ModelForm):
    class Meta:
        model = User
        exclude = ('last_login', 'date_joined') 
```

**每次 OP 更新编辑：**您可以`forms.BooleanField()`在表单中为 is_superadmin 和 is_staff 添加 2 个字段（或以不同的方式命名它们），就像您已经在 save 方法中所做的一样`new_user.is_staff = self.cleaned_data['is_staff']`。您可以考虑使用一个选择字段，一个带有 3 个条目的下拉列表，“普通用户”、“员工用户”、“管理员用户”，然后根据用户的选择设置 is_staff 和 is_superadmin。

仍然可以在 User 模型上使用 ModelForm 并添加必要的额外字段。这对您来说可能值得，也可能不值得，这取决于您获得的定制程度。

关于您的表单的另一个注意事项 - 在编辑现有用户时，这将无法用于用户名/电子邮件上当前的干净方法。但是，如果您调整这些以从查找中排除当前实例（如果已设置），您将能够使用此表单来编辑现有用户（尽管由于它不是模型表单，您需要手动填充初始数据）。

# facebook - 为什么 FQL 中的 facebook 专辑 ID 为零？

> ID：11142011
> 
> 赞同：0
> 
> 时间：2012-06-21T15:54:22.007
> 
> 标签：facebook, facebook-fql

我正在使用 FQL。我正在使用以下一组查询来获取有关专辑的信息，

```
SELECT aid,src_small from photo where pid='100000244468314_1600187' 
```

我得到以下结果，

```
{
  "data": [
  {
  "aid": "0",
  "src_small": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash3/545289_450190444999100_1364645489_t.jpg"
}
]
} 
```

然后我给出了以下查询来获取专辑名称和所有者，

```
SELECT aid, owner, name, object_id FROM album WHERE aid="0" 
```

但我得到以下信息，

```
{
"data": [
]
} 
```

为什么专辑ID是0？为什么它返回无？请帮忙。我是 FQL 新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:01:06.173

试试这个查询：

```
SELECT aid, owner, name, object_id FROM album 
  WHERE object_id IN 
    (SELECT album_object_id FROM photo where pid='100000244468314_1600187') 
```

看起来`aid`，`pid`字段正在被弃用以换取`object_id`字段。

# jquery - 用于样式下拉选择的 JQuery 脚本

> ID：11142017
> 
> 赞同：0
> 
> 时间：2012-06-21T15:54:44.767
> 
> 标签：jquery, forms, select, drop-down-menu, styles

我发现了一些用于样式选择的不同脚本，但它们中的大多数要么已经过时，要么非常笨拙。对使用好的轻量级脚本有什么建议吗？

# python - 在 Python 中使用“不是”

> ID：11142021
> 
> 赞同：2
> 
> 时间：2012-06-21T15:54:50.563
> 
> 标签：python

我正在尝试从名为 DEV_TYPE 的字段中对访问表中的一些记录进行游标搜索。我想将每条记录与我之前在脚本中构建的已知值列表进行比较：

> (devcat 列表)

我想打印出列表中没有出现的任何值。记录中的某些值也为 Null。我想将我的 if 语句设置为仅打印出列表中未出现的值，但我也不想为 Null 值打印出“无”。我的脚本如下：

```
if field.name == "DEV_TYPE":
for iRow in arcpy.SearchCursor(fc):
      if not iRow.DEV_TYPE is None or iRow.DEV_TYPE not in devcatList:
          print str(iRow.OBJECTID) + " - " + str(iRow.DEV_TYPE) 
```

我玩过' `if not x is None`'到' `if x is not None`'。`or`将 ' '更改为 ' `and`' （即使它是反直觉的），但我的打印输出要么返回所有值，要么不返回值，或者只返回 ' `None`'....基本上所有我不想要的。我确定我在做一些愚蠢的事情。有人能指出我的愚蠢是什么吗？

谢谢，迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:09:14.063

我想你想要`if iRow.DEV_TYPE is not None and iRow.DEV_TYPE not in devcatList:`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:05:36.453

也许是这样的：

```
if field.name == "DEV_TYPE":
    for iRow in arcpy.SearchCursor(fc):
       dev_type = iRow.DEV_TYPE
       if dev_type is not None and dev_type not in devcatList:
           print "{} - {}".format(iRow.OBJECTID, iRow.DEV_TYPE) 
```

`if dev_type is not none`可以更方便地（但不太精确）说明，`if dev_type`因为`None`它相当于`False`在条件上下文中。我还冒昧`print`地以更惯用的方式重写了这句话。

# c# - 如何使用 Blend 将图像绑定到按钮模板？

> ID：11142023
> 
> 赞同：0
> 
> 时间：2012-06-21T15:54:56.780
> 
> 标签：c#, wpf, blend

在 Microsoft Expression Blend 中，我有以下按钮模板：

```
 <ControlTemplate x:Key="ImageBlueButton" TargetType="{x:Type Button}">
        <Grid x:Name="MainGrid" Width="75" Height="50">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="0.5*"/>
            </Grid.RowDefinitions>  
            <ContentPresenter x:Name="TextContent" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Grid.Row="1" d:LayoutOverrides="Width, Height"/>
            <Image x:Name="ButtonImage" Margin="0" Grid.RowSpan="1" HorizontalAlignment="Center" VerticalAlignment="Center" Source="{TemplateBinding Content}"/>
        </Grid>         
    </ControlTemplate> 
```

我手动编辑 XAML 以将 Source={TemplateBinding Content} 属性添加到 Image 标记。我的问题是，如何将图像分配给在 Blend 中使用此模板的按钮对象？

在 Blend 中，我可以看到一个带有 Content 字段的 Common Properties 窗口，但更改它只会更新按钮上的文本。我猜我需要使用自定义表达式来同时设置文本内容和图像内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:57:00.517

看起来无法在模板（文本和图像）内设置多个内容属性。我将不得不创建自己的 UserControl。[这个问题与此处](https://stackoverflow.com/questions/364001/how-can-i-make-a-button-with-multiple-content-values)回答的问题相似。

# javascript - jQuery 条件检查类，如果它包含它执行的类

> ID：11142024
> 
> 赞同：1
> 
> 时间：2012-06-21T15:54:57.417
> 
> 标签：javascript, jquery, wordpress

我正在使用 wordpress，我必须显示一个基于产品类别的菜单，但它是按术语进行的，我无法添加一个类。因此，我将 term-maincat-subcat 作为类，并且 subcat 会根据您所在的位置而变化，但主猫与品牌保持不变。我正在研究 jQuery 通配符，并且有一种方法可以在类中选择具有特定字符串的元素。我将如何运行条件来检查它是否在类中有该字符串。这就是我所拥有的...

```
if($('body').is('body[class~="brand"]')) {
   $('.brand-cat-nav').show();
} 
```

以上似乎不起作用，就像我说的那样，不幸的是，没有办法向它添加一个直接的“品牌”类，以便能够使用 .hasClass() 使这更容易一些。有什么建议么？

PS：它输出到正文的类是“term-maincat-subcat”之类的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:56:34.307

类真的很容易检查：

```
if ($('body').is('.brand')) { ... } 
```

或者：

```
if ($('body').hasClass('brand')) { ... } 
```

*编辑*——如果你的意思是你想知道一个字符串是否是一个类的*一部分*，那么这将需要你去“className”属性并用一个正则表达式检查：

```
if (/brand/.test($('body').prop('className'))) { ... } 
```

如果它并不总是“品牌”，那么您可以从字符串中创建一个正则表达式：

```
function whatever( someClassFragment ) {
  if (new RegExp(someClassFragment).test($('body').prop('className')) { ... } 
```

如果字符串中可能包含非字母字符，那么您必须处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:04:46.693

你可以试试这个：

```
if( $('body').filter("[class^='brand']").length )​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ {
    // body has class starting with 'brand'
} 
```

`body`这使用以“品牌”开头的类名过滤。

如果您想测试是否`body`有一个*包含*“品牌”的类，请改为使用`class*="brand"`过滤器。

# antlr - 构建C目标语法解析器，编译时需要知道如何包含

> ID：11142028
> 
> 赞同：0
> 
> 时间：2012-06-21T15:55:07.617
> 
> 标签：antlr, antlr3, antlrv3ide

我想在 Windows 7 平台上用 antlrIDE 构建一个解析器（用 C 语言）。我完成了语法（组合语法的.g），它会自动为我生成词法分析器和解析器。但是，我不知道如何编译 .c 和 .h 文件。我试过了，但因为头文件包含而出错（antlrIDE 自动`#include "antlr.h"`在解析器点 c 文件中生成头文件）。我已阅读这篇文章[Using ANTLR3 C Target](http://www.antlr.org/wiki/display/ANTLR3/Using+the+ANTLR3+C+Target)

但这对我没有帮助，你们能告诉我怎么做吗？提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:45:00.093

您需要将 ANTLR 运行时添加到您的项目/解决方案中。这是下载运行时库[ANTLR C 运行时](https://fisheye2.atlassian.com/browse/antlr/runtime/C/dist)的链接（来自您在问题中放置链接的文章）。

将运行时添加到您的构建中，并将其他包含目录设置到运行时库的包含文件夹（编译器可以在其中找到 antlr.h 头文件）。

# jquery - jQuery Tabs 高度溢出了我的其他 div

> ID：11142030
> 
> 赞同：0
> 
> 时间：2012-06-21T15:55:12.913
> 
> 标签：jquery, css, jquery-ui, height, overflow

我正在寻找修复我的网站布局。这有点令人困惑，所以我希望我能解释得足够好。

这是我当前的代码。

```
<div class="allContent">
    <div class="contactDetailsRight backgroundTall">
       <div class="backgroundTop">
          <div id="contactTabs">

             <ul class="headTabs">
                 <li><a href="panel.php?a=1" title="Notes">Notes</a></li>
                 <li><a href="panel.php?a=2" title="Map">Map</a></li>              
             </ul>

             <div id="notes"></div>
             <div id="map"></div>

          </div>
       </div>
    </div>
</div> 
```

我的代码的简单分解。父 div (contactDetailsRight) 是绝对定位的。contactTabs 包含动态加载内容的 jQuery UI 选项卡，具有动态高度。

**问题：** .contactDetailsRight (Parent Div)，有背景图片和颜色，但是当标签的内容超出页面时，div 背景/颜色停止。起初我虽然可以用我的'scrollheight'函数改变它，但这不起作用，因为滚动的实际div是（.allContent）

我不明白为什么我似乎无法获得合适的高度值。我已经尝试过这些以获得适当的高度：

```
<script type="text/javascript">
$(document).ready(function(){
   var h1 = $(".contentBoxRight").height();
   var h2 = $(".allContent").height();
   alert(h1 + h2);
});
</script> 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:12:17.383

对于contactDetailsRight，如果有的话，从CSS中删除height属性，并添加一个css属性：overflow:auto

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:38:47.867

页面中没有任何类`contentBoxRight`。将其更改为`contactDetailsRight`以获取其高度

```
 var h1 = $(".contactDetailsRight").height();
   var h2 = $(".allContent").height();
   alert(h1 + ', ' + h2); 
```

[http://jsfiddle.net/cKYbz/](http://jsfiddle.net/cKYbz/)

# ant - Fitnesse SymbolicLink 不适用于 ant 或命令行的外部链接

> ID：11142031
> 
> 赞同：0
> 
> 时间：2012-06-21T15:55:16.957
> 
> 标签：ant, command-line, fitnesse

我们正在尝试在我们的健身套件中创建一个指向外部文件夹的符号链接。它与 URL 完美配合。但不能使用命令行或 ant 脚本。

**以下是 URL（工作）：**

```
http://localhost:8080/root?responder=symlink&linkName=FitNesseSuite&linkPath=file://FitNesseRoot/TestSuite 
```

**命令行（不工作）：**

```
java -jar fitnesse.jar -c "root?responder=symlink&linkName=FitNesseSuite&linkPath=file://FitNesseRoot/TestSuite" 
```

**蚂蚁脚本（不工作）：**

```
<target name="my_fitnesse_tests">
    <java jar="fitnesse.jar" failonerror="true" fork="true">
        <arg value="-c" />
        <arg value="root?responder=symlink&amp;linkName=FitNesseSuite&amp;linkPath=file://FitNesseRoot/TestSuite" />
        <arg value="-p" />
        <arg value="9234" />
    </java>
</target> 
```

**得到以下异常：**

> 线程“主”java.lang.IllegalArgumentException 中的异常：命令规范 [root?responder=symlink&linkName=FitNesseSuite&linkPath=file://FitNesseRoot/TestSuite] 无效。格式应为 /cmd 或 user:pass:/cmd atfitnesse.http.MockRequestBuilder.validate(MockRequestBuilder.java:48)

请帮助我们解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:19:10.170

同样的问题，我用以下命令解决了这个问题： ...&linkPath=file%3A///... ==> 将“:”更改为“%3A”

# string - SHGetSpecialFolderPath to a System::String^

> ID：11142037
> 
> 赞同：1
> 
> 时间：2012-06-21T15:55:41.223
> 
> 标签：string, visual-c++, c++-cli, appdata, tchar

我正在尝试将 a 解析`SHGetSpecialFolderPath`为字符串，`System::String^`准确地说是 a 。
我现在正在使用这段代码：

```
TCHAR appDataPath;
SHGetSpecialFolderPath(0, appDataPath, CSIDL_APPDATA, false); 
```

我已经尝试过这样的事情，但它也不起作用：

```
LPWSTR appDataPath;
SHGetSpecialFolderPath(0, appDataPath, CSIDL_APPDATA, false); 
```

我只想得到`System::String^`这样的：

```
System::String ^ loc_inst = appDataPath + "\\inst\\info.xml"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:11:35.560

我不认为 C++/CLI 可以自动连接 char 数组并将它们分配给字符串句柄。我认为您需要`System::String`像这样实例化一个新对象：

```
System::String^ loc_inst = gcnew System::String(appDataPath);
loc_inst.Append("\\inst\\info.xml"); 
```

或者你可以使用 a `StringBuilder`，但如果你想创建一个新`String`对象，我认为你必须使用`gcnew`一个构造函数。

请记住，这`appDataPath`不是`String`您之前分配的 char 数组。但是，`System::String`允许您在其构造函数之一中传入 char 数组。

# python - python可以访问本地存储在密钥库中的RSA私钥，如seahorse / Apple Keychain

> ID：11142044
> 
> 赞同：1
> 
> 时间：2012-06-21T15:56:15.303
> 
> 标签：python, django, encryption, keystore, keychain

除了不加密之外，我别无选择，只能将 RSA 私钥与非对称加密的数据放在同一系统上。（我的系统无法访问远程服务器等）所以我认为使用 seahorse（ubuntu）或钥匙串访问（apple）可能有用吗？

是否可以从 python 访问存储在其中之一中的私钥？

除了不在本地存储私钥之外，还有其他方法吗？

我需要一个可逆的密码，所以散列不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:03:51.393

是的，它可以有几个解决方案，但到目前为止我发现最好的一个是钥匙圈。

Python 模块[密钥](http://pypi.python.org/pypi/keyring)环支持 OSX、Windows 以及 Gnome 密钥环和 KDE 钱包。刚刚在 OSX 上试用了一下，开箱即用，没有任何问题。非常尊重它的作者 Jason R. Coombs。

源代码也 位于[http://bitbucket.org/kang/python-keyring-lib](http://bitbucket.org/kang/python-keyring-lib)`pip install keyring works`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:21:15.350

在 Mac OS X 上，可以使用`security`程序从 shell 访问钥匙串。您可以使用 搜索特定的私钥`security find-identity -s <search term>`，然后使用将其导出到文件`security export`（有关这些命令的更多信息可以从 获取`security -h <command>`）。我还没有看到 python 绑定，但是在`subprocess.call`调用中包装你需要的功能应该很容易。

# java - 写入图像时的java FileNotFoundExcpetion

> ID：11142055
> 
> 赞同：3
> 
> 时间：2012-06-21T15:56:55.973
> 
> 标签：java, image, filenotfoundexception

我正在尝试使用`Image.IO.Write()`;保存图像 我基本上已经从[这里](http://www.lwjgl.org/wiki/index.php?title=Taking_Screen_Shots)复制了标准代码，用 lwjgl 截屏。我唯一做的就是使用现有目录作为保存路径初始化文件。

当我尝试保存图像时，`FileNotFoundException`会被抛出。

```
 glReadBuffer(GL_FRONT);
    int width  = Display.getDisplayMode().getWidth();
    int height = Display.getDisplayMode().getHeight();
    int bpp = 4; // Assuming a 32-bit display with a byte each for red, green, blue, and alpha.
    ByteBuffer buffer = BufferUtils.createByteBuffer(width * height * bpp);
    glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    File file = new File("res/screenshots/ss_" + Sys.getTime() + ".png"); // The file to save to.
    String format = "PNG"; // Example: "PNG" or "JPG"
    BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);

    for(int x = 0; x < width; x++)
        for(int y = 0; y < height; y++)
        {
            int i = (x + (width * y)) * bpp;
            int r = buffer.get(i) & 0xFF;
            int g = buffer.get(i + 1) & 0xFF;
            int b = buffer.get(i + 2) & 0xFF;
            image.setRGB(x, height - (y + 1), (0xFF << 24) | (r << 16) | (g << 8) | b);
        }

    try {
        ImageIO.write(image, format, file);
    } catch (IOException e) { e.printStackTrace(); } 
```

堆栈跟踪：

```
java.io.FileNotFoundException: res\screenshots\ss_91733792.png (The system cannot find the path specified)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(Unknown Source)
    at javax.imageio.stream.FileImageOutputStream.<init>(Unknown Source)
    at com.sun.imageio.spi.FileImageOutputStreamSpi.createOutputStreamInstance(Unknown Source)
    at javax.imageio.ImageIO.createImageOutputStream(Unknown Source)
    at javax.imageio.ImageIO.write(Unknown Source)
    at com.va.util.Extras.takeScreenShot(Extras.java:46)
    at com.va.core.Engine.start(Engine.java:117)
    at Main.main(Main.java:26)
Exception in thread "main" java.lang.NullPointerException
    at javax.imageio.ImageIO.write(Unknown Source)
    at com.va.util.Extras.takeScreenShot(Extras.java:46)
    at com.va.core.Engine.start(Engine.java:117)
    at Main.main(Main.java:26) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:10:05.937

我假设“/res/screenshots”存在并且是可写的，对吗？

我猜您程序的当前目录可能与您期望的不同。

出于调试目的，请添加以下两行（或等效行）：

```
 String currentDir = new File(".").getAbsolutePath();
  System.out.println ("Current directory: " + currentDir); 
```

如果“res/screenshots”不在“currentDirectory”下，则更改代码中的相对路径。

```
 // EXAMPLE:
  File file = new File("../..res/screenshots/ss_" + Sys.getTime() + ".png"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:00:26.917

您链接到的代码没有显示文件是如何创建的，而是将其留给程序员。

您正在做的可能只是创建一个新`File`对象

```
File img = new File("path/to/file.jpg"); 
```

您的问题是，该`path/to`文件夹不存在，并`ImageIO`抛出`FileNotFoundException`.

要完成这项工作，请使用

```
img.getParent().mkdirs(); 
```

在你通过`img`to之前`ImageIO`。这样可以确保文件的完整路径是可访问的。正如这篇文章的评论中所述，文件本身不必存在，但 id 的路径却存在。

# ios - 如何将操作设置为警报视图按钮（不是那么简单）

> ID：11142057
> 
> 赞同：0
> 
> 时间：2012-06-21T15:57:08.253
> 
> 标签：ios, uinavigationcontroller, push, uialertview

我已经在通过委托方法 clickedButtonAtIndex 尝试它：但是一旦用户按下“确定”，我就需要通过导航控制器推送视图......

我无法在方法内分配视图，Xcode 无法识别代码中视图控制器的名称。知道我错了吗？

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex { 
    switch(buttonIndex) {
        case 0:

             ReminderCompleted *view = [[ReminderCompleted alloc]initWithNibName:@"ReminderCompleted" bundle:nil];

             [view.navigationController pushViewController:view animated:NO];

            break;
        case 1:
            //cancel
            break;
        default:
            break;
    } 
```

我收到一些错误

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-21T16:00:41.630

~~您不能推送视图，只能推送视图控制器。您应该能够以类似的方式构造代码，但要实例化一个视图控制器（也可以使用 nib），然后将其传递给导航控制器的 push 方法。~~

编辑：你的变量名让我很困惑，你确实在使用视图控制器。我的怀疑现在是在一个开关内声明一个新变量，这是 Objective-C 不喜欢的。尝试相同的代码，但在切换之前声明变量（您可以让它未初始化，直到发生正确的情况）。

```
ReminderCompleted *reminderVC;
switch(buttonIndex) {
  case 0:
    reminderVC = [[ReminderCompleted alloc]initWithNibName:@"ReminderCompleted" bundle:nil];
    [view.navigationController pushViewController:view animated:NO];
    break; 
```

# django - Django 获取模型的所有相关值

> ID：11142058
> 
> 赞同：3
> 
> 时间：2012-06-21T15:57:09.943
> 
> 标签：django, django-models, django-queryset

这些是我的模型

```
class Order(models.Model):
    name = ...

class OrderDetail(models.Model)
    order = models.OneToOneField(Order,null=False)
    comment = ...

class LastUpdate(models.Model)
    order = models.OneToOneField(Order,null=False)
    date = ... 
```

当我写 Order.objects.all().values() 它给了我一个只包含`name` 但我需要获取`name,orderdetail__comment,lastupdate__date`值的列表。

我可以通过写作得到它们

```
Order.objects.values('name','orderdetail__comment','lastupdate__date').all() 
```

但是订单中有很多相关的模型，我不想全部写出来。

如何获取相关字段的所有值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T01:50:45.387

首先，您查询

```
orders = Order.objects.select_related('orderdetail__comment', 'lastupdate__date') 
```

然后，通过

```
orders.values('name', 'orderdetail__comment', 'lastupdate__date') 
```

# mongodb - Ubuntu 来宾 VM 上 MongoDB 的高空闲 CPU 使用率

> ID：11142066
> 
> 赞同：3
> 
> 时间：2012-06-21T15:57:35.093
> 
> 标签：mongodb, ubuntu, cpu, virtualbox

我在 OS X 10.7 主机（MacBook Air 13"）上的 VirtualBox 上运行 Ubuntu 12.04 服务器实例。该实例配置有 512mb 内存。磁盘映像设置为 8GB（如果有任何区别，则动态分配）并且是使用 2.6GB。

我刚刚从 10gen 存储库安装了 MongoDB，如下所述：http: [//docs.mongodb.org/manual/tutorial/install-mongodb-on-debian-or-ubuntu-linux/](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian-or-ubuntu-linux/)

我还没有更改任何默认设置。

在我连接任何东西之前，mongod 进程现在一直以 15-20% 的 cpu 运行。我通常不会检查，但它现在导致风扇在 VM 运行时保持打开状态。

重新启动 mongodb 没有任何区别。重新启动 VM 没有任何区别。

日志如下：

```
Thu Jun 21 16:52:14 [initandlisten] MongoDB starting : pid=1737 port=27017 dbpath=/var/lib/mongodb 64-bit host=devbox
Thu Jun 21 16:52:14 [initandlisten] db version v2.0.6, pdfile version 4.5
Thu Jun 21 16:52:14 [initandlisten] git version: e1c0cbc25863f6356aa4e31375add7bb49fb05bc
Thu Jun 21 16:52:14 [initandlisten] build info: Linux ip-10-110-9-236 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_41
Thu Jun 21 16:52:14 [initandlisten] options: { config: "/etc/mongodb.conf", dbpath: "/var/lib/mongodb", logappend: "true", logpath: "/var/log/mongodb/mongodb.log" }
Thu Jun 21 16:52:14 [initandlisten] journal dir=/var/lib/mongodb/journal
Thu Jun 21 16:52:14 [initandlisten] recover : no journal files present, no recovery needed
Thu Jun 21 16:52:14 [initandlisten] waiting for connections on port 27017
Thu Jun 21 16:52:14 [websvr] admin web console waiting for connections on port 28017 
```

我假设空闲时 15-20% 的 CPU 使用率是不正常的，所以我想知道是否有人对尝试修复它有什么建议？

*编辑* 我现在已经将磁盘映像转换为固定大小的 VDI，它没有任何区别，仍然在客户机上 15-20% 的 CPU 使用率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:06:25.593

据我所知，这是 OSX 上的 VirtualBox 中的一个错误，我切换到 Parallels 并且从那以后就没有问题了。

# android - 每次安装时，如何在我的 Android 模拟器上清除我的应用程序的 localStorage？

> ID：11142069
> 
> 赞同：3
> 
> 时间：2012-06-21T15:57:41.723
> 
> 标签：android, eclipse, cordova, adb

每次从 Eclipse 安装应用程序时，我都想为我的应用程序清除 localStorage 以模拟第一次安装应用程序。

我怎样才能做到这一点？

谢谢！

我在这里专门针对 Android 回答了这个问题 - 以[编程方式清除 Android 上的 PhoneGap/Cordova 应用程序缓存以模拟全新安装？](https://stackoverflow.com/questions/11159280/programatically-clear-phonegap-cordova-apps-cache-on-android-to-simulate-a-fres)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T03:08:26.727

Eclipse 中没有钩子，但您可能可以使用 Ant 来执行此操作。`pm clear my.package`您可以在上传应用程序之前添加一个执行清除命令 ( ) 的任务。如果`pm clear`不起作用，您可以编写一个小脚本并在上传应用程序之前在设备上启动它

还有 Android 运行配置的“擦除用户数据”复选框，但它仅适用于模拟器启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T23:48:07.383

我正在使用 Chrome 检查器 (chrome://inspect)，它可以很好地显示连接的 Android 设备。从那里你可以点击 Resources 来访问和修改 localStorage

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:21:38.283

我不确定您是否希望以编程方式或通过 ADB - 无论如何这应该解决它

[如何以编程方式清除应用程序数据](https://stackoverflow.com/questions/4856955/how-to-programatically-clear-application-data)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T17:37:56.620

出于测试目的，您可以删除一个快速的本地存储清除语句：

```
localStorage = "" 
```

确保在发布前将其删除。

# opengl - 如何在 OpenGL 中使用 3ds max 的光照值

> ID：11142070
> 
> 赞同：0
> 
> 时间：2012-06-21T15:57:52.213
> 
> 标签：opengl, lighting, 3dsmax

我正在努力了解我应该如何使用从 3DS Max 获得的材质和照明值来重新创建类似的照明。我从 3DS Max 导出的 Collada 文件中获取材质和照明，并使用它们在 OpenGL 中渲染场景。使用 Blinn-Phong 着色器渲染场景。然而，场景总是以明亮的方式结束。

3DS max 的光照数据对我来说似乎很奇怪。它由两盏灯组成，一个环境灯和一个只有单一颜色的定向灯。因为我不太确定这种单一颜色与什么相关，所以我将它应用于光的漫反射和镜面反射分量。

无论如何，有谁知道 3DS Max/Collada 的材质和光照数据有什么奇怪的地方吗？或者您是否成功使用它而没有任何问题，这意味着我只是做错了什么？

编辑#1

根据要求，这是来自 collada 的材料/照明信息。恐怕我无法发布任何屏幕截图，但是场景非常明亮，例如橙子变成了亮黄色。特别是镜面反射值似乎非常高，但它们似乎在 Max 中运行良好......

科拉达材料：

```
<library_effects>
<effect id="WorldTexture">
  <profile_COMMON>
    <newparam sid="world_texture_png-surface">
      <surface type="2D">
        <init_from>world_texture_png</init_from>
      </surface>
    </newparam>
    <newparam sid="world_texture_png-sampler">
      <sampler2D>
        <source>world_texture_png-surface</source>
      </sampler2D>
    </newparam>
    <technique sid="common">
      <blinn>
        <emission>
          <color>0 0 0 1</color>
        </emission>
        <ambient>
          <color>0.588 0.588 0.588 1</color>
        </ambient>
        <diffuse>
          <texture texture="world_texture_png-sampler" texcoord="CHANNEL1"/>
        </diffuse>
        <specular>
          <color>0.9 0.9 0.9 1</color>
        </specular>
        <shininess>
          <float>10</float>
        </shininess>
        <reflective>
          <color>0 0 0 1</color>
        </reflective>
        <transparent opaque="A_ONE">
          <color>1 1 1 1</color>
        </transparent>
        <transparency>
          <float>1</float>
        </transparency>
      </blinn>
    </technique>
  </profile_COMMON>
  <extra>
    <technique profile="OpenCOLLADA3dsMax">
      <extended_shader>
        <apply_reflection_dimming>0</apply_reflection_dimming>
        <dim_level>0</dim_level>
        <falloff_type>0</falloff_type>
        <index_of_refraction>1.5</index_of_refraction>
        <opacity_type>0</opacity_type>
        <reflection_level>3</reflection_level>
        <wire_size>1</wire_size>
        <wire_units>0</wire_units>
      </extended_shader>
      <shader>
        <ambient_diffuse_lock>1</ambient_diffuse_lock>
        <ambient_diffuse_texture_lock>1</ambient_diffuse_texture_lock>
        <diffuse_specular_lock>0</diffuse_specular_lock>
        <soften>0.1</soften>
        <use_self_illum_color>0</use_self_illum_color>
      </shader>
    </technique>
  </extra>
</effect> 
```

科拉达灯：

```
<library_lights>
<light id="EnvironmentAmbientLight" name="EnvironmentAmbientLight">
  <technique_common>
    <ambient>
      <color>0.6235294 0.6235294 0.6235294</color>
    </ambient>
  </technique_common>
</light>
<light id="FDirect001-light" name="FDirect001">
  <technique_common>
    <directional>
      <color>0.937255 0.7921569 0.5411765</color>
    </directional>
  </technique_common>
  <extra>
    <technique profile="OpenCOLLADA3dsMax">
      <max_light>
        <aspect_ratio>1</aspect_ratio>
        <atmosphere_color_amount>1</atmosphere_color_amount>
        <atmosphere_on>0</atmosphere_on>
        <atmosphere_opacity>1</atmosphere_opacity>
        <attenuation_far_end>100</attenuation_far_end>
        <attenuation_far_start>80</attenuation_far_start>
        <attenuation_near_end>26.8</attenuation_near_end>
        <attenuation_near_start>0</attenuation_near_start>
        <contrast>0</contrast>
        <decay_falloff>40</decay_falloff>
        <decay_type>0</decay_type>
        <diffuse_soften>0</diffuse_soften>
        <falloff>902</falloff>
        <hotspot_beam>900</hotspot_beam>
        <multiplier>0.5</multiplier>
        <overshoot>0</overshoot>
        <shadow_density>1</shadow_density>
        <shadow_map>0</shadow_map>
        <target_distance>440</target_distance>
        <use_far_attenuation>0</use_far_attenuation>
        <use_near_attenuation>0</use_near_attenuation>
      </max_light>
    </technique>
  </extra>
</light>
</library_lights> 
```

# rabbitmq - RabbitMQ——选择性地从队列中检索消息

> ID：11142071
> 
> 赞同：24
> 
> 时间：2012-06-21T15:58:01.260
> 
> 标签：rabbitmq

我是 RabbitMQ 的新手，想知道我正在考虑的这个问题的好方法。我想创建一个订阅队列并且只提取满足特定条件的消息的服务；例如，如果消息中包含特定的主题标头。

我仍在学习 RabbitMQ，并正在寻找有关如何解决此问题的提示。我的问题包括：消费者如何仅从队列中提取特定消息？生产者如何在消息中设置主题标头（如果这甚至是正确的术语？）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-21T16:41:45.037

RabbitMQ 非常适合这种情况。你有很多选择可以做你想做的事。我建议阅读文档以更好地理解。我建议您使用主题或直接交流。主题更灵活。它是这样的。

生产者代码连接到 RabbitMQ 代理并使用特定名称创建和交换。

生产者发布交换。发布的每条消息都将使用路由键发布。

消费者连接到 RabbitMQ 代理。

消费者创建队列

Consumer 将 Queue 绑定到交换器，与生产者中定义的交换器相同。绑定还包括此特定消费者所需的每条消息的路由键。

假设您正在发布日志消息。路由键可能类似于“log.info”、“log.warn”、“log.error”。生产者发布的每条消息都将附加相关的路由密钥。然后，您将有一个消费者发送所有错误消息并通过电子邮件发送，另一个消费者将所有错误消息写入文件。因此，电子邮件发送者将使用路由键“log.error”定义从其队列到交换的绑定。这种方式虽然交换接收所有消息，但为电子邮件发送者定义的队列将只包含错误消息。文件记录器将定义一个新的单独队列绑定到同一个交换并设置不同的路由键。您可以为三个不同的路由键要求进行三个单独的绑定，或者只使用通配符“log.*”

这是一个简单的示例，展示了如何实现您想要做的事情。

[在此处](http://www.rabbitmq.com/getstarted.html)查找代码示例，特别是编号为 5 的教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-03T16:27:44.260

建议充分利用rabbitmq的交换/路由。如果您确实想根据消息内容进行检查，以下代码是一个可行的解决方案。

从队列中检索消息并检查，有选择地确认您感兴趣的消息。

**拉一条消息**

```
GetResponse resp = channel.basicGet(QUEUE_NAME, false); 
```

**确认一条消息**

```
channel.basicAck(resp.getEnvelope().getDeliveryTag(), false); 
```

例子

```
import com.rabbitmq.client.*;

public class ReceiveLogs {
    private final static String QUEUE_NAME = "hello";

    public static void main(String[] argv) throws Exception {
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        try(Connection connection = factory.newConnection();
            Channel channel = connection.createChannel();){

            channel.queueDeclare(QUEUE_NAME, true, false, false, null);

            // pull one message and ack manually and exit
            GetResponse resp = channel.basicGet(QUEUE_NAME, false);
            if( resp != null ){
                String message = new String(resp.getBody(), "UTF-8");
                System.out.println(" [x] Received '" + message + "'");
                channel.basicAck(resp.getEnvelope().getDeliveryTag(), false);
            }
            System.out.println();
        }
    }
} 
```

**依赖**

```
compile group: 'com.rabbitmq', name: 'amqp-client', version: '5.8.0' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-13T14:36:00.350

要从 RabbitMQ 检索消息，我们需要先连接 RabbitMQ 服务器

```
public WebClient GetRabbitMqConnection(string userName, string password)
{
    var client = new WebClient(); 
    client.Credentials = new NetworkCredential(userName, password);
    return client;
} 
```

现在使用以下代码从 RabbitMQ 检索消息。

```
public string GetRabbitMQMessages(string domainName, string port, 
    string queueName, string virtualHost, WebClient client, string methodType)
{
    string messageResult = string.Empty;
    string strUri = "http://" + domainName + ":" + port + 
                    "/api/queues/" + virtualHost + "/";
    var data = client.DownloadString(strUri + queueName + "/");
    var queueInfo = JsonConvert.DeserializeObject<QueueInfo>(data);
    if (queueInfo == null || queueInfo.messages == 0)
               return string.Empty;
    if (methodType == "POST")
    {
        string postbody = "  
        {\"ackmode\":\"ack_requeue_true\",\"count\":
         \"$totalMessageCount\",\"name\":\"${DomainName}\",
         \"requeue\":\"false\",\"encoding\":\"auto\",\"vhost\" :
         \"${QueueName}\"}";
         postbody = postbody
                       .Replace("$totalMessageCount", queueInfo.messages.ToString())
                       .Replace("${DomainName}", domainName)
                       .Replace("${QueueName}", queueName);
         messageResult = client.UploadString(strUri + queueName + 
                          "/get", "POST", postbody);
    }
    return messageResult;
} 
```

我认为这将帮助您实现 RabbitMQ。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-08-01T12:12:51.420

如果您想一次检索单个消息，请在您的检索代码中添加以下属性。

```
Boolean autoAck = false;
model.BasicConsume(Queuename, autoAck);
model.BasicGet("Queuename", false);
model.BasicGet("Queuename", false); 
```

通过添加 RabbitMQ 的此属性，您可以从队列中一一检索消息。与 FIFO 标准相同

# c# - ReflectionOnlyLoad 可以被垃圾回收吗？

> ID：11142073
> 
> 赞同：0
> 
> 时间：2012-06-21T15:58:12.550
> 
> 标签：c#, .net, reflection, dynamic

我想将一些预打包的程序集“热”加载到单独的 AppDomain 中，但是我不知道入口点类的名称，甚至不知道程序集文件。我需要找到这个入口点，这样我才能运行一些初始化例程。

所以我打算做的是在所有文件上运行 ReflectionOnlyLoad 并找到遵循某种约定的文件，即。注释/实现某个接口等。

问题是，如果我一遍又一遍地从主 AppDomain 运行 ReflectionOnlyLoad，我会开始泄漏内存吗？如果这不能从主应用程序域运行，我有什么选择，因为我不知道入口点在哪里。

此外，有关使用 ReflectionOnlyLoad 的细微之处的任何其他信息都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:48:03.693

我推荐`Mono.Cecil`。这是一个可以在 .net 上使用的简单程序集（它不需要 Mono 运行时）。它提供了一个 API 来将程序集作为数据加载，并且运行良好。我发现该 API 易于使用，并且没有遇到我在使用仅反射加载时遇到的任何问题。

您还可以使用[CCI](http://ccimetadata.codeplex.com/)，这是 MS 的一个开源项目，它提供了一个汇编阅读器。

另请参阅：[CCI 与 Mono.Cecil - 优点和缺点](https://stackoverflow.com/questions/6727715/cci-vs-mono-cecil-advantages-and-disadvantages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:36:31.017

ReflectionOnlyLoad 无法解决您的问题，请参阅[文档](http://msdn.microsoft.com/en-us/library/0et80c7k.aspx)

为什么不在新的 AppDomain 中执行用于查找入口点等的代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:58:13.643

无法通过 dll 反映。即使只有反射负载，该类型仍会保留在主 AppDomain 上。

2 解决方案：

1.  将入口点放在某个 xml 中并对其进行解析。
2.  使用 2 级 AppDomain，一个用于反射器，另一个用于实际对象。

我选择（1），因为它是最明智的。

(2) 我必须通过 2 个单独的代理才能向实际的远程对象发出命令，否则我需要比我喜欢的更紧密地耦合接口。更不用说写代码很痛苦了。

# visual-studio-2010 - 如何修复值不能为空参数名称：打开 XAML 文件时的 typeName？

> ID：11142081
> 
> 赞同：5
> 
> 时间：2012-06-21T15:58:35.447
> 
> 标签：visual-studio-2010, silverlight, xaml

我们在 VS2010 中使用 Silverlight 4（我们必须使用它。:p）。AFAIK 我们安装了适当的工具包和 SDK。

当我们尝试打开 XAML 文件时，我们会立即看到一个错误对话框，上面写着：“值不能为空。参数名称：typeName”。设计器不加载。输出窗口中没有输出，也没有构建错误。

我们完全不知道该做什么。

这只会影响我们的一些工作站。我们处于受控环境中，重新安装 VS2010 并不是一个真正的选择。再次：p

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:01:17.700

当我在 xaml 中遇到参考问题但没有确切的文本时，我会弹出类似的对话框。我会验证所有引用都在正确的位置，并且它们是正确的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:46:02.430

这似乎是我们公司环境特有的问题。几天来，MS 支持一直在帮助我们。他们似乎没有比我们更接近解决方案。

祝这里有同样问题的人好运。

# ios - Flash 无法在 OS X / iOS 上运行？

> ID：11142082
> 
> 赞同：0
> 
> 时间：2012-06-21T15:58:35.950
> 
> 标签：ios, macos, flash

我的网站主页上有一个 Flash 文件 (.swf)。当用户加载页面时，文件会循环显示一些图像。当我从 Windows PC 访问该站点时，它按预期工作，但是当我从 Mac 计算机或 iPhone/iPad 访问它时，闪存文件应该是一个空白区域。通常是什么导致这种行为？

编辑：

在我的 Mac 上做了一些更仔细的测试（运行 OS X 版本 10.6.8）。Flash 文件在安装了最新 Flash Player 的最新版本的 Safari**中无法**使用，但在 Firefox**中可以使用。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:01:17.287

Flash 在 iOS 上不工作，iOS 不支持它。至于 OS X，您尝试过哪些浏览器以及 OS X 的版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:01:22.227

iOS (iPhone/iPad) 不支持从网页运行 Flash，可能您的 Mac OSX 没有 Flash Player 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:21:59.770

有趣的是，这个问题的答案与 flash 的代码本身没有任何关系。有问题的文件通过 < embed > 元素放置在页面上。正如我在阅读[这篇相当古老但仍然非常相关的文章](http://www.alistapart.com/articles/flashsatay)中发现的那样，并非所有浏览器都支持 < embed >。显然，它在 Firefox 中受支持，但在 Chrome 或 Safari 中不受支持。遵循该文章中的建议后，Flash 文件在所有支持 Flash 的浏览器中都能正常播放。

# asp.net-mvc-3 - 单元测试因会话而失败

> ID：11142084
> 
> 赞同：2
> 
> 时间：2012-06-21T15:58:37.710
> 
> 标签：asp.net-mvc-3, c#-4.0, asp.net-mvc-2, razor, modelbinders

我已经为我的 MVC3 应用程序编写了[自定义模型绑定器。](http://sweettam.blogspot.co.uk/2012/02/unit-testing-with-sessions-in-aspnet.html?showComment=1340293118143#c1517222478481474633)我决定使用自定义模型绑定器是因为我正在使用会话并且单元测试因此而失败。

现在我的问题是该`About`操作不接受任何参数，但它需要将存储在购物车中的值传递给查看而不使用会话。因为使用会话它将无法通过单元测试。只有当我将购物车作为参数传递给`About`.

如果您有任何想法，请建议我。

非常感谢

**模型粘合剂**

```
public class CartModelBinder : IModelBinder
{
    private const string CartSessionKey = "Cart";

    public object BindModel(ControllerContext controllerContext, ModelBindingContext modelBindingContext)
    {
        Cart cart = null;

        if(IsCartExistInSession(controllerContext))
        {
            cart = GetCartFromSession(controllerContext); 
        }
        else
        {
            cart = new Cart();
            AddCartToSession(controllerContext, cart);
        }
        return cart;
    }

    private static Cart GetCartFromSession(ControllerContext controllerContext)
    {
        return controllerContext.HttpContext.Session[CartSessionKey] as Cart;
    }

    private static void AddCartToSession(ControllerContext controllerContext, Cart cart)
    {
        controllerContext.HttpContext.Session[CartSessionKey] = cart;
    }

    private static bool IsCartExistInSession(ControllerContext controllerContext)
    {
        return controllerContext.HttpContext.Session[CartSessionKey] != null;
    }       
} 
```

**控制器**

```
[HttpPost]
public ActionResult AddToCartfromAbout(Cart cart, int productId = 2)
{
    var product = _productRepository.Products.First(p => p.ProductId == productId);
    cart.AddItem(product, 1);
    return View("About");
}

public ActionResult About()
{ 
    // Need something here to get the value of cart 
    return View(cart);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:16:10.707

此[链接](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)可能会解决您的问题。您需要从上面的链接下载源代码和 DLL，然后您可以将值分配给测试中的会话。

```
[Test]
public void AddSessionStarShouldSaveFormToSession()
{
    // Arrange
    TestControllerBuilder builder = new TestControllerBuilder();
    StarsController controller = new StarsController();
    builder.InitializeController(controller);
    controller.HttpContext.Session["NewStarName"] = "alpha c";

    // Act
    RedirectResult result = controller.Index() as RedirectResult;

    // Assert
    Assert.IsTrue(result.Url.Equals("Index"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:04:55.297

我建议使用 Moq（或任何其他模拟数据的工具）并在控制器构造函数上传递值。（不确定，但如果不是过度工程化，mabe use Dependency Injection 会对此有所帮助）

# excel - 在 Microsoft excel 中将文本附加到日期

> ID：11142087
> 
> 赞同：-1
> 
> 时间：2012-06-21T15:58:40.907
> 
> 标签：excel, excel-formula

我正在尝试将一些文本附加到 excel 单元格。

> 例如，如果单元格 A1 的日期为 17-Jan-12 ，则公式应将文本附加到日期为 "17-Jan-12 today" 。

无论我尝试什么，我都会得到日期的日期值，然后像这样附加文本 - `

> “今天 40912”

我怎么得到这个？

这就是我正在做的

```
=CONCATENATE(A1,"    Today") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:07:12.357

Excel 将日期存储为数字：这就是您看到这种行为的原因。你想要这样的东西（调整格式以适应）：

```
=TEXT(A1,"dd-mmm-yy") & " today" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:09:55.220

该数值是excel存储日期单元格的内部方式。要将其呈现为文本（以便您可以附加其他文本），您必须应用转换：

```
=TEXT(A1, "mm/dd/yyyy")
=CONCATENATE(TEXT(A1, "mm/dd/yyyy"),"          Today") 
```

其中 A1 是您的日期单元格。[在Text 函数文档](http://office.microsoft.com/en-us/excel-help/text-function-HP010062580.aspx)中有更多关于格式化字符串（TEXT() 的第二个参数）的信息。

# css - jQuery UI 的 @imports 导致许多 HTTP 请求，破坏了连接的目的

> ID：11142088
> 
> 赞同：0
> 
> 时间：2012-06-21T15:58:43.367
> 
> 标签：css, ruby-on-rails-3, jquery-ui, asset-pipeline

我正在使用 Rails 的资产管道来连接我所有的 CSS/JS（尽管我认为我使用的特定连接方法可能没有太大区别）。

我遇到的问题是 jQuery UI 具有所有这些`@import`指令，因此我为 jQuery UI 想要导入的每一个 CSS 文件获得了单独的 HTTP 请求，其中很多。这在开发和生产中都在发生。我的其余连接工作正常；它只是 jQuery UI 的东西。

这是我的`application.css`，如果有帮助的话：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require vendor
 *= require scaffold
 *= require main
 *= require clients
 *= require appointments
 *= require marketing
 *= require services
 *= require reports
 *= require calendar
 *= require products
 *= require stylists
 *= require brochure
*/ 
```

我所有的 jQuery UI CSS 都在`vendor`：

```
$ ll vendor/assets/stylesheets/jquery_ui/
total 216
drwxr-xr-x  18 jason  staff    612 Jun 21 11:48 .
drwxr-xr-x   5 jason  staff    170 Jun 21 11:42 ..
-rw-r--r--   1 jason  staff  35010 Mar 12 12:55 jquery-ui.css
-rw-r--r--   1 jason  staff   1064 Jun 21 11:48 jquery.ui.accordion.css
-rw-r--r--   1 jason  staff    290 Jun 21 11:48 jquery.ui.all.css
-rw-r--r--   1 jason  staff   1106 Mar 12 12:55 jquery.ui.autocomplete.css
-rw-r--r--   1 jason  staff    658 Jun 21 11:48 jquery.ui.base.css
-rw-r--r--   1 jason  staff   2470 Jun 21 11:48 jquery.ui.button.css
-rw-r--r--   1 jason  staff   1458 Mar 12 12:55 jquery.ui.core.css
-rw-r--r--   1 jason  staff   4045 Jun 21 11:43 jquery.ui.datepicker.css
-rw-r--r--   1 jason  staff   1357 Mar 12 12:55 jquery.ui.dialog.css
-rw-r--r--   1 jason  staff    356 Jun 21 11:48 jquery.ui.progressbar.css
-rw-r--r--   1 jason  staff   1170 Jun 21 11:48 jquery.ui.resizable.css
-rw-r--r--   1 jason  staff    322 Jun 21 11:48 jquery.ui.selectable.css
-rw-r--r--   1 jason  staff   1139 Jun 21 11:48 jquery.ui.slider.css
-rw-r--r--   1 jason  staff   1382 Mar 12 12:55 jquery.ui.tabs.css
-rw-r--r--   1 jason  staff  19141 Jun 20 22:38 jquery.ui.theme.css
drwxr-xr-x  18 jason  staff    612 Jun 21 11:48 minified 
```

如何让我的所有 jQuery UI 文件像我期望的那样连接起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:31:43.783

[来自http://jqueryui.com](http://jqueryui.com)的 jQuery UI 的默认构建将连接所有文件。确保从`css`文件夹而不是文件夹中获取`development-bundle`文件。

# linux - ./file 与文件

> ID：11142092
> 
> 赞同：0
> 
> 时间：2012-06-21T15:59:15.333
> 
> 标签：linux, ctags

我正在阅读有关如何为多级目录结构设置 Exuberant Ctags 的教程，我看到了以下行，

> 配置你的编辑器首先读取本地标签文件，然后在本地标签文件中找不到时查阅全局标签文件。在 Vim 中，这样做如下： :set tags=./tags,tags,~/project/tags

问题是：（这可能比 Ctags 更通用）为什么 ./tags 和 tags 都被指定为要查看的地方？他们对同一件事的评价不一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:37:16.937

编号来自`:help 'tags'`：

> 当文件名以“./”开头时，“.” 替换为当前文件的路径。但仅当 'cpoptions' 中不包含 'd' 标志时。

所以`./tags`搜索文件，不是在当前目录下，而是在当前文件所在的目录下。

但是，`tags`会在当前目录中搜索文件。

是的，我也希望它能够以相反的方式工作......

# java - 使用 JMX 注册和更新应用程序属性

> ID：11142094
> 
> 赞同：0
> 
> 时间：2012-06-21T15:59:26.243
> 
> 标签：java, properties, jmx

我必须通过 mbean 访问某些应用程序，以便我可以更改其应用程序属性。现在我认为这可以通过两种方式完成：

1.  首先，要么我要求该应用程序的开发人员在我的 mbean 将访问的数组列表中注册所有应用程序属性。

2.  其次，如果有任何其他方式，例如开发人员只需要注册可编辑属性，我的 mbean 仍然可以访问可读/可编辑（r/w）应用程序属性。

现在，由于我不知道这些应用程序属性存储在 JVM 中的什么位置，有没有办法实现我的第二点，以便 mbean 只需要访问该对象并获取所有应用程序属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:48:54.843

似乎您在这里有一些相互矛盾的要求。

1.  您想要更改应用程序中的最少代码。
2.  您希望成为公开所有属性以进行读取和/或写入的原因。
3.  您可能会或可能不会谈论`System.getProperty(...)`. 如果不是，那么我猜您只是在谈论各种对象中的字段。

有（至少）两种方法可以做到这一点。在不知道您现在如何从源代码中导出 mbean 的情况下，我无法根据您的特定配置定制我的答案。我的回答将展示您如何使用我的[SimpleJMX 包](http://256stuff.com/sources/simplejmx/)来公开您的属性。

如果您正在谈论，`System.getProperty(...)`那么您可以编写一个可以查询任何属性并返回值的 JMX mbean：

```
@JmxOperation(description = "Query for property")
public String queryForProperty(String name) {
   return System.getProperty(name);
} 
```

相反，如果您需要从某个对象列表中导出字段，那么您要么必须为要导出的每个字段添加注释，要么必须编写通过委托导出字段的 bean。我看不到简单的方法，而且我知道没有任何软件包可以轻松地为您导出一系列对象，而无需提供有关要导出的内容和方式的某种信息。

使用 SimpleJMX，您可以通过注释字段或 get 方法来导出字段：

```
@JmxAttributeField(description = "Number of hits in the cache")
private int hitCount;
...

// this can also be specified as @JmxAttributeMethod on the getter/setter methods
@JmxAttributeMethod(description = "Number of misses in the cache")
private int getMissCount() {
    return missCount;
} 
```

`@JmxAttributeField`支持一个`isWritable = true`允许由 JMX 设置的值。您还可以使用注释设置器`@JmxAttributeMethod`以使其可写。

如果您不想为每个类添加注释，那么您将不得不编写某种通过委托导出值的 JMX 容器类：

```
 public class JmxPublisher {
     private Class1 object1;
     private Class2 object2;
     ...
     public JmxPublisher(Class1 object1, Class2 object2) {
         this.object1 = object1;
         this.object2 = object2;
         ...
     }

     @JmxAttributeMethod(description = "Number of hits in the cache")
     public int getClass1HitCount() {
        return object1.getHitCount();
     }
     @JmxAttributeMethod(description = "Shutdown the background thread")
     public void setClass2Shutdown(boolean shutdown) {
        return object2.setShutdown(shutdown);
     }
     ...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:11:10.953

我也认为你应该更清楚地表达自己。
据我了解 - 为什么不提供一种查询远程应用程序的方法，并获取有关所有属性的信息，以及它们是只读、只写还是 RW？
这样在客户端应用程序的源代码中就不会提及属性列表——也许你应该让客户端应用程序的用户看到属性列表，让他编辑他可以编辑的属性，并阻止他编辑他不能的属性。

# javascript - 在 div 顶部添加元素

> ID：11142096
> 
> 赞同：0
> 
> 时间：2012-06-21T15:59:31.050
> 
> 标签：javascript, jquery

我想在现有元素之前向容器 div 添加一个元素。我尝试了这三种不同的方式，但不能

方法一

`$('.channel:first',$('#scroll_5')).before(print_nav);`

方法二

`$('.channel:eq(0)',$('#scroll_5')).before(print_nav);`

方法三

```
$('.channel',$('#scroll_5')).each(function () {
    $(this).before(print_nav);
    return false;
}); 
```

容器 div 是`scroll_5`并且具有类的元素`channel`。我想在顶部添加一个新频道。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T16:02:50.013

```
$('#scroll_5').prepend(print_nav); 
```

见[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

或者：

```
$(print_nav).prependTo('#scroll_5'); 
```

见[http://api.jquery.com/prependTo/](http://api.jquery.com/prependTo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:02:39.673

尝试...

```
$("#scroll_5").prepend("<div />"); 
```

# vb.net - 如何将属性数据绑定到 Wpf 中的文本框

> ID：11142102
> 
> 赞同：2
> 
> 时间：2012-06-21T15:59:56.563
> 
> 标签：vb.net, data-binding, inotifypropertychanged

我创建了一个 wpf vb.net 项目，并试图设置一个简单的数据。我不确定如何设置我的 DataContext = this; 在代码绑定中。目前，当我运行程序时，我的标签永远不会更新。我在下面包含了我的代码。我错过了什么？

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Label Content="{Binding person.Name}"/>
    </Grid>
</Window>

Class MainWindow 
    Private Property person As New Person()

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        person.Name = "Poco"
    End Sub
End Class

System.ComponentModel

Public Class Person
    Implements INotifyPropertyChanged

    Private _name As String
    Public Property Name() As String
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value

            OnPropertyChanged(New PropertyChangedEventArgs("Name"))
        End Set
    End Property

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Public Sub OnPropertyChanged(ByVal e As PropertyChangedEventArgs)
        If Not PropertyChangedEvent Is Nothing Then
            RaiseEvent PropertyChanged(Me, e)
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:16:15.590

这很接近 - 您需要在 XAML 中命名您的标签（以便您可以从后面的代码中引用它），然后在绑定对象中指定要绑定的数据的路径。在这种情况下，您将绑定一个具有`Name`您希望将其内容分配给标签文本的属性的对象：

```
<Label Name="MyLabel" Content="{Binding Path = Name}"/> 
```

然后在您的代码中，您需要将`DataContext`标签设置为您希望将其绑定到的对象，在本例`somePerson`中为类的特定实例`Person`：

```
Private somePerson As New Person

Public Sub New()
    InitializeComponent()
    MyLabel.DataContext = somePerson
    somePerson.Name = "Poco"
End Sub 
```

# wpf - 应用样式后绑定不再起作用

> ID：11142104
> 
> 赞同：2
> 
> 时间：2012-06-21T15:59:58.967
> 
> 标签：wpf

我有以下文本框，在我添加样式之前，绑定工作得很好：

```
<TextBox Text="{Binding SelectedGroupPolicyTermSummary.ImportantInfo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
         HorizontalAlignment="Stretch"  AcceptsReturn="True" 
         IsReadOnly="{Binding IsEditable, Converter={StaticResource InvertedBoolConverter}}"
         Foreground="Red" TextWrapping="Wrap">
    <TextBox.Style>
        <Style TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <Trigger Property="TextBox.IsReadOnly" Value="True">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type TextBox}">
                                <TextBox Text="{TemplateBinding Text}" 
                                         VerticalAlignment="Bottom" 
                                         HorizontalAlignment="{TemplateBinding HorizontalAlignment}"                     
                                         Style="{DynamicResource SelectableTextStyle}" 
                                         TextWrapping="{TemplateBinding TextWrapping}" 
                                         Foreground="{TemplateBinding Foreground}"
                                         Width="{TemplateBinding Width}"/>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Width" Value="Auto"/>
                </Trigger>
                <Trigger Property="TextBox.IsReadOnly" Value="False">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type TextBox}" >
                                <TextBox Text="{TemplateBinding Text}" 
                                         VerticalAlignment="Bottom" 
                                         HorizontalAlignment="{TemplateBinding HorizontalAlignment}"                     
                                         Style="{DynamicResource TextBoxStyle}" 
                                         TextWrapping="{TemplateBinding TextWrapping}" 
                                         Foreground="{TemplateBinding Foreground}"
                                         Width="{TemplateBinding Width}" 
                                         AcceptsReturn="{TemplateBinding AcceptsReturn}">
                                </TextBox>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

在我应用样式后，文本框会填充，但任何更改都不会发送回代码。任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:30:19.850

您是否尝试在控件模板上将绑定设置为两种方式？

```
Binding NameOfProperty, Mode=TwoWay 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:35:06.267

TemplateBinding 标记扩展基本上提供了以下绑定：

```
{Binding RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay} 
```

对于诸如背景颜色之类的东西，这会很好。但是，当您想要一直绑定文本之类的内容时，您应该使用长手并更改模式：

```
Text="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" 
```

# javascript - 用户事件上的 Javascript 断点

> ID：11142105
> 
> 赞同：1
> 
> 时间：2012-06-21T15:59:59.973
> 
> 标签：javascript, google-chrome, script-debugging

当我在我的应用程序中单击一个按钮时，会执行一系列 Javascript 代码，在这种特殊情况下，我单击“取消”按钮以关闭当前打开的模式窗口。这个`close`按钮在 HTML 上看起来像这样：

```
<a class="cancel close">Cancel</a> 
```

我需要一种方法来跟踪`<a>`在 Javascript 中单击此元素的操作“触发”了什么，而无需查看 .js 文件以获取对此 DOM 元素的引用（事件绑定到`<a>`元素的位置）。

有没有办法在用户生成事件后在 Javascript 中创建某种断点，但我不知道 Javascript 代码在哪里？为了真正找到该代码的位置。

我正在使用 Google Chrome/开发者工具来调试 Javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:04:50.857

打开开发者控制台；切换到脚本选项卡；单击左边距（在行号上）以设置断点。脚本的执行将在断点处暂停，您可以检查调用堆栈、局部变量等。

或者，您可以在触发事件之前单击“暂停”，脚本执行将在脚本即将执行时立即暂停（如设置全局断点），并向您显示代码。然后您可以恢复、跳过、进入或退出当前函数/表达式。

您可以在 Firebug 和 Safari、Chrome、Opera 和 IE 中的内置控制台中执行此操作。

编辑：我应该补充一点，如果您有 javascript 驱动的动画、ajax 轮询或其他以间隔调用的代码，则暂停按钮不太有用，因为暂停按钮会停止*任何*脚本执行，直到您单击恢复。因此，当调用动画的更新函数时，它会暂停，可能在您有机会触发您感兴趣的代码之前。

但是，在大多数（如果不是全部）开发人员控制台中，还有“异常中断”和“未捕获异常中断”选项。就像暂停按钮一样，它就像有一个全局断点，只是它只有在出现问题时才会停止。因此，如果您尝试查找的代码导致错误或引发异常，您可以将调试器设置为在发生这种情况时暂停脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:02:45.027

Firebug 是 FF 的一个选项。

[http://getfirebug.com/doc/breakpoints/demo.html](http://getfirebug.com/doc/breakpoints/demo.html)

# telerik - 在 TelerikMVC 网格控件上更改高度

> ID：11142108
> 
> 赞同：3
> 
> 时间：2012-06-21T16:00:05.217
> 
> 标签：telerik, telerik-mvc

有人知道改变 MVC Grid 的 Telerik Extensions 高度的方法吗？除了使用手动覆盖样式

```
div#MyGrid .t-grid-content {
    height: 100px !important;
} 
```

我想在网格本身上控制它，而不是在样式表上。Telerik 示例和文档对此只字未提，似乎[不受支持](http://www.telerik.com/community/forums/aspnet-mvc/grid/how-to-style-height-as-a-percentage.aspx)

有没有人遇到过（并解决过）同样的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T16:12:08.977

您可以使用 Scrollable 方法控制网格的高度。

使用表示像素的 int32：

```
.Scrollable(scrolling => scrolling.Height(500)) 
```

使用字符串：

```
.Scrolling(scrolling => scrolling.Height("20em")) 
```

# google-apps-script - 如何使用 Utilities.sleep() 函数

> ID：11142109
> 
> 赞同：43
> 
> 时间：2012-06-21T16:00:11.717
> 
> 标签：google-apps-script

函数的具体用途是 `Utilities.sleep()`什么？我们应该在函数调用或 API 调用之间使用它吗？

我使用`Utilities.sleep(1000)`中间函数调用，对吗？它会减慢执行时间吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-21T16:11:23.313

Utilities.sleep(milliseconds) 在程序执行中创建一个“暂停”，这意味着它在您要求的毫秒数内什么都不做。它肯定会减慢你的整个过程，你不应该在函数调用之间使用它。不过也有一些例外，至少我知道的一个例外：在 SpreadsheetApp 中，当您想要删除许多工作表时，您可以在每次删除之间添加数百毫秒以允许正常的脚本执行（但这是一种解决方法此特定方法的已知问题）。在电子表格中创建许多工作表时，我确实必须使用它，以避免在执行后需要“刷新”浏览器。

这是一个例子：

```
function delsheets(){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var numbofsheet=ss.getNumSheets();// check how many sheets in the spreadsheet
  for (pa=numbofsheet-1;pa>0;--pa){ 
    ss.setActiveSheet(ss.getSheets()[pa]);
    var newSheet = ss.deleteActiveSheet(); // delete sheets begining with the last one
    Utilities.sleep(200);// pause in the loop for 200 milliseconds
  }
  ss.setActiveSheet(ss.getSheets()[0]);// return to first sheet as active sheet (useful in 'list' function)
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-11-17T11:17:52.687

Serge 是对的 - 我的解决方法：

```
function mySleep (sec)
{
  SpreadsheetApp.flush();
  Utilities.sleep(sec*1000);
  SpreadsheetApp.flush();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-05T16:38:48.107

一些谷歌服务不喜欢使用太多。最近我的帐户因为脚本而被锁定，该脚本每秒向同一用户发送两封电子邮件。谷歌将其视为垃圾邮件。所以在这里使用 sleep 也是有道理的，可以防止出现这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-17T15:55:28.063

您还可以使用它来限制每秒的 API 拉取次数。一些网站限制每秒的 API 拉取量，以减少垃圾邮件和服务器压力。

# drupal-6 - 具有ahah属性的Drupal 6文本字段表单元素

> ID：11142110
> 
> 赞同：0
> 
> 时间：2012-06-21T16:00:21.247
> 
> 标签：drupal-6, ahah, form-api

我有一个带有文本字段元素的表单，当用户开始输入时，我想预先填充不同的元素。

我一直在使用 #ahah 属性，该属性在将事件属性设置为“keyup”时效果很好，但是我失去了对 textfield 元素的关注，因为在触发“keyup”事件的那一刻，由于 ahah 的行为，整个表单被重建。

我尝试将事件属性设置为“更改”，并且效果很好但是为了触发“更改”事件，我需要从文本字段中单击 - 所以从 UI 的角度来看，我不能指望用户点击离开字段以显示结果。

我不确定是否可以通过 AHAH 实现我想要的，这很好，但如果可能的话，我想坚持下去。

如果需要，很乐意提供代码，如果不清楚，很抱歉，很难解释。

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:15:47.673

浏览器不应重新呈现整个表单。这正是 AHAH 的想法，您可以只更新表单的一部分。确保将“包装器”属性（#ahah 属性）设置为您希望 Drupal 的 JS 功能异步更新的 DOM 元素的 ID（如：HTML 属性）。

例如：

```
<?php
function MYMODULE_some_ahah_enabled_form(&$form_state) {

  $initial_markup = '<div>' . t('This content will be replaced') . '</div>';

  $form['dynamic_thing'] = array(
    '#type' => 'markup',
    '#prefix' => '<div id="dynamic-thing">', // Set Drupal's AHAH wrapper to this ID
    '#suffix' => '</div>',
    '#value' => $initial_markup,
  );

  $form['field_which_will_trigger_ahah_behavior'] = array(
    '#type' => 'textfield',
    '#ahah' => array(
      'path' => 'MYMODULE/path/to/ahah/callback',
      'wrapper' => 'dynamic-thing',
      'event' => 'keyup',
    ),
    '#default_value' => 'Change me',
  );

  return $form;
}

/**
 * Your menu callback (which is declared in your hook_menu()) which returns only the HTML that will replace the existing markup in $form['dynamic_thing'].
 */
function MYMODULE_ahah_callback() {
  $output = '<div>New content for the dynamic thing</div>';
  drupal_json(array('status' => TRUE, 'data' => $output));
  exit();
} 
```

浏览器中的“field_which_will_trigger_ahah_behavior”DOM 元素不应失去焦点，或以任何方式重新渲染，除非有其他原因导致某些错误。

# windows-7 - 如何在 Windows 7 中关闭之前执行命令（以及在它杀死所有正在运行的程序之前？）

> ID：11142113
> 
> 赞同：0
> 
> 时间：2012-06-21T16:00:31.567
> 
> 标签：windows-7, automation, virtualbox, shutdown, reboot

我有一个批处理文件，它在 windows 启动时启动一个 VirtualBox VM，我想要一个在有人重新启动或关闭机器时自动保存 VM 状态的批处理文件。

我不能使用 GPO，因为它所做的一切都是在 Windows 杀死其他一切之后发生的。

那么有没有办法修改Windows如何处理这个或者可能以某种方式拦截关机/重启信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-21T10:19:37.847

我不久前找到了这个解决方案。它使用 python，所以它不是最轻量级的解决方案，但它对我有用。

> *   在有写入权限的地方下载[vbox-shutdown.py](https://gist.github.com/ionelmc/8245494)（除非您指定不同的路径，否则它将创建一个日志文件）。
> *   与 VirtualBox 具有相同架构的 Python 2.7 - 如果您有 64 位系统，您很可能需要 64 位 Python（我使用了 COM api - 目前它不允许跨拱互操作）。如果有人真的想要这个，这可以通过使用命令行 API 来改变。任何人都可以修复它——它只是一些 Python 代码。
> *   安装 pywin32 - 与上面相同的架构/原因。
> *   安装 vboxapi 包。在 c:\Program Files\Oracle\VirtualBox\sdk\install\ 中运行 python vboxapisetup.py install 对我有用。我想知道为什么他们有这个没有发行版的无用 pypi 包......
> *   现在只需运行 shell:startup 并将文件放在那里。

**所有学分都归 ionelmc** [http://blog.ionelmc.ro/2014/01/04/virtualbox-vm-auto-shutdown/](http://blog.ionelmc.ro/2014/01/04/virtualbox-vm-auto-shutdown/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:20:06.677

好的，我能想出的最好的

以下 python 脚本将等待关机，中止它，调用您的脚本，然后重新启动关机。添加它以在启动时启动。

**编辑需要 pywin32 python 扩展可用[这里](http://starship.python.net/crew/mhammond/win32/Downloads.html)**

1 问题是它不会从开始菜单或电源按钮中止关机。只有软件关闭。[您可以像this](http://www.howtogeek.com/howto/7553/remove-shutdown-and-restart-buttons-in-windows-7/)和[this](http://www.computerhope.com/issues/ch000735.htm)那样禁用它们。如果您仍然希望能够手动关闭您的电脑，请添加一个名为**ANYTHING BUT "SHUTDOWN"**的批处理文件，其中包含以下内容

```
shutdown -f -s 
```

蟒蛇脚本

```
import win32security
import win32api
import sys
import time
from ntsecuritycon import *
import os
import subprocess

Pre_ShutdownScript = "your Script"
Shutdown = True
# Get the process token
flags = TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY
htoken = win32security.OpenProcessToken(win32api.GetCurrentProcess(), flags)

# Get the ID for the system shutdown privilege.
idd = win32security.LookupPrivilegeValue(None, SE_SHUTDOWN_NAME)

while Shutdown:
    try:
        win32security.AdjustTokenPrivileges(htoken, 0, [(idd, SE_PRIVILEGE_ENABLED)])
        win32api.AbortSystemShutdown(None)
        Shutdown = False        
    except:
        win32security.AdjustTokenPrivileges(htoken, 0, [(idd, 0)])
        time.sleep(1)

try:
    subprocess.call([Pre_ShutdownScript])
except:
    pass
os.system("shutdown -r -t 1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T05:40:35.670

5moufl 你说“我不能使用 GPO，因为它所做的一切都是在 Windows 杀死其他一切之后发生的”。您能否详细说明您尝试的本地组策略更改？有没有错误？什么不适合你？当 VM 在随后的重新启动时出现时发生了什么？

这里有关于将关闭操作定义为组策略的详细信息： [http](http://en.kioskea.net/faq/3358-execute-a-script-a-startup-and-shutdown "执行脚本启动和关闭") ://en.kioskea.net/faq/3358-execute-a-script-a-startup-and-shutdown ：

*   开始菜单 > 运行 > 键入 gpedit.msc
*   计算机配置 > Windows
*   设置 > 脚本（启动/关闭）
*   双击关机，弹出属性窗口
*   单击添加 > 浏览以添加关闭脚本
*   关闭 BAT 脚本可能是：“C:\Program Files\Oracle\VirtualBox\VBoxManage.exe” controlvm MyVM savestate

# python - 具有两个输入的 Python 子进程

> ID：11142115
> 
> 赞同：0
> 
> 时间：2012-06-21T16:00:34.693
> 
> 标签：python, subprocess

我正在编写一个需要调用外部程序 hmm3align 的 Python 程序，该程序从命令行操作如下：

```
hmm3align hmm_file fasta_file -o output_file 
```

所以通常，程序需要两个输入文件并将结果写入第三个文件。我的程序实际上有多个调用外部程序的情况，但这是外部程序有两个文件输入的唯一情况。我的意图是避免写入和读取文件以允许这些外部程序相互通信；我希望在会话期间将所有数据存储为 Python 变量，并在需要时将这些变量提供给外部程序。

在 Python 程序中需要调用 hmm3align 的地方，我已经有两个 Python 变量 hmm_model 和 fasta_model，它们分别包含通常分别包含在 hmm_file 和 fasta_file 中的信息。我想要做的是通过标准输入将 hmm_model 和 fasta_model 传递给 hmm3align（因为我认为这是将它们作为输入提供的唯一方法），然后将结果从标准输出捕获到名为 align_results 的第三个 Python 变量中。为此，我创建了一个使用 subprocess 模块的单独函数，如下所示：

```
def hmmalign(hmm_model,fasta):
     args = ["/clusterfs/oha/software/bin/hmm3align",
             "-", "-",
             "-o", "/dev/stdout"]
     process = subprocess.Popen(args, shell=False, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
     return process.communicate(hmm_model,fasta)[0] 
```

如您所见，我正在尝试通过标准输入发送这两个变量。args 列表中的两个“-”用于捕获这两个变量；我已经看到其他示例中使用的“-”，但它们的目的并不明确，我可能会误解一些事情。

果然，我在 Traceback 结束时收到以下错误：

```
TypeError: communicate() takes at most 2 arguments (3 given) 
```

所以我不能通过标准输入将两个单独的变量传递给程序。我应该提到，当一个类似的外部程序只需要一个输入文件时，我已经能够使子进程在该程序上工作。

我该如何进行这项工作？是否可以使用具有多个输入的子流程？我查看了文档并没有看到这个问题得到回答。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:59:15.027

标准输入是单个数据流；在 Unix 上，它是一个连接到单向*管道**输出端的**文件描述符*。按照惯例，从命令行上指定的单个文件读取的程序将被理解为从标准输入读取而不是从文件读取的指令。但是，对于从两个文件读取的程序，没有办法从 stdin 读取两次，因为它是单个数据流。**`-`**

 **还有其他可用于通信的文件描述符（stdin 是 fd 0，stdout 是 fd 1，stderr 是 fd 2）但是没有传统的方法来指定它们而不是文件。

最有可能在这里工作的解决方案是*[命名管道](http://en.wikipedia.org/wiki/Named_pipe)*（FIFO）；在 Python 中，用于`os.mkfifo`创建命名管道并将`os.unlink`其删除。然后，您可以在写入程序（使用 ）时将其名称传递给程序（它将显示为可以读取的文件`open`）。**

# c# - C# GRAPHICS 强制覆盖像素

> ID：11142122
> 
> 赞同：1
> 
> 时间：2012-06-21T16:00:46.137
> 
> 标签：c#, graphics, drawing, 2d

我目前正在使用 C# Bitmaps und Graphics 编写一个简单的图像操纵器。我正在使用服装透明元素，它工作正常。在我的 Draw-Method 中，我通过绘制来更新控件以设置图像：

```
ImageAttributes attr = new ImageAttributes();  
attr.SetColorKey(this.transpKey, this.transpKey);  
Rectangle dstRect = new Rectangle(0, 0, this.image.Width, this.image.Height);  
e.Graphics.DrawImage(this.image, dstRect, 0, 0, this.image.Width, this.image.Height, GraphicsUnit.Pixel, attr);  
e.Graphics.Dispose(); 
```

现在我需要一个函数来擦除一些像素。使用 Form 并在 BackgroindImage 上绘图，我可以使用 TransparencyKey-Prperty “擦除”像素。但是这个属性在我的服装控制中不存在。这就是我使用“attr.SetColorKey(this.transpKey, this.transpKey);”的原因，但是问题就来了。它只是使像素透明，并且下面的像素将可见。
有谁知道如何强制 C# 替换像素而不是离开它们？或者有人知道我的问题的解决方案吗？
非常感谢您的阅读、思考和帮助。

//编辑：好的，现在我发现我可以使用“e.Graphics.CompositingMode = CompositingMode.SourceCopy;” 设置像素将被替换。但在那之后，透明度被破坏了。结果是一样的。什么都没有抹去。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:15:16.510

没有 ERASING，因为控件是一个一个地绘制的，使用 z-order 作为绘制顺序。首先，绘制表单背景，然后是标签，然后是您的控件。没有图层，一旦绘制了一些东西，它就会留下来。

'ERASE' 的唯一方法是找到一种方法，让您控制下的控件将自己重新绘制到您可以使用的某种缓冲区中。

我很久以前就尝试过，并且已经放弃了该方法，因为它实施起来很糟糕并且极易出错。

很抱歉这个坏消息，希望你能从我的经验中得到一些见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:16:03.273

你对“擦除”的定义是什么？对我来说，这意味着将颜色更改为背景的颜色。不要使用透明度来做到这一点，只需以背景颜色渲染该区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:48:16.283

正式提供我的解决方案：我通过使用多层来解决它。不干净但有效。

# java - Selenium 2 StackOverflowError，JSONObject

> ID：11142124
> 
> 赞同：0
> 
> 时间：2012-06-21T16:00:49.530
> 
> 标签：java, selenium-webdriver

我正在使用 Selenium 2.24.1 并收到此错误：

```
Caused an ERROR 
null 
java.lang.StackOverflowError 
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
at org.json.JSONObject.populateMap(JSONObject.java:988) 
at org.json.JSONObject.<init>(JSONObject.java:272) 
at org.json.JSONObject.wrap(JSONObject.java:1587) 
at org.json.JSONObject.populateMap(JSONObject.java:990) 
at org.json.JSONObject.<init>(JSONObject.java:272) 
```

我不确定我错过了什么，我有 json-20080701.jar，所有的 jar 文件都带有 selenium-java-2.24.1 和 selenium-server-2.24.1。

即使仅使用 selenium-server-standalone-2.24.1.jar，我仍然会收到此错误消息。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:05:04.777

我很确定您有一个具有循环依赖关系的对象图。

这是一个例子：

```
public class Parent{
    private List<Child> children;
}

public class Child{
    private Parent parent;
} 
```

如果您尝试将其序列化为 JSON，除非您的算法知道循环依赖关系，否则您还将获得 StackOverflow。

因为对于每个父母，都必须创建一个孩子列表，每个孩子都有一个父母，每个孩子都有一个孩子列表，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:20:24.973

看起来您的项目具有其他/旧版本的 org.json 类，而不是 WebDriver 在其类路径上需要的类。而且您的 json 版本不适用于 WebDriver。

如果你检查你的 selenium-server-standalone-x.xx.x.jar，你会发现 org.json 包含在内。

这意味着该项目在其类路径上有 2 个不同版本的 json jar。

欢迎来到 JAR 地狱。

解决方案：将您的 json 库替换为带有 selenium 的库，该库位于 /Selenium-x.xx/lib/json-20080701.jar

# javascript - CSS-当id链接到使用锚点时突出显示一个div？

> ID：11142125
> 
> 赞同：71
> 
> 时间：2012-06-21T16:00:51.660
> 
> 标签：javascript, css, html, anchor, highlight

我正在尝试做的是突出显示具有某个 id 的 div，当它被另一个页面 IE 上的锚引用时：

用户点击链接`href="qw.html#test"`，页面加载完毕后，带有 的 div`id="test"` 会高亮显示，方便用户看清。

我确信我已经看到了一个 CSS3 示例，其中一个 div 被链接到时会突出显示。还是 JavaScript？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-06-21T16:07:33.933

您需要使用`:target`伪类：

```
:target {
   background-color: #ffa;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NGyVL/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:06:06.997

JavaScript 可用于动态添加/更改 div 的类：

如果你有：

```
<div id="test"></div> 
```

Javascript函数，通过点击锚点执行：

```
document.getElementById("test").className += " highlighted"; 
```

结果：

```
<div id="test" class=" highlighted"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:06:55.813

您可以在 JavaScript 中执行此操作。请参阅[如何使用 jQuery 从 URL 中获取锚点？](https://stackoverflow.com/questions/3552944/how-to-get-the-anchor-from-the-url-using-jquery)关于如何从 URL 获取锚点，然后它可以很简单，比如

```
document.getElementById(hash).style.backgroundColor="Yellow"; 
```

# html - 使用表单生成电子邮件

> ID：11142129
> 
> 赞同：0
> 
> 时间：2012-06-21T16:00:53.867
> 
> 标签：html, forms, email

**我的问题：**如何在电子邮件中使用 html 表单来生成客户端默认电子邮件程序可以使用的电子邮件。

**注意**我意识到您不能直接从 html 发送电子邮件。那不是我的目标。我想创建一个默认电子邮件客户端使用的电子邮件。此表格也在电子邮件中。

我是 html 的初学者，所以这很容易*（而且我对样式提示持开放态度）*。这是我的表格。我想要什么*在评论*中描述。我正在尝试做的事情可能吗？

```
<form action="mailto:@@SELECTED_DESTINATION@@" method="post" enctype="text/plain">
  Select an issue type:<br />
  <select name="destination"> <!-- I want this to be the destination address of the e-mail -->
    <option value="bug@bug.com">Bug</option>
    <option value="enhancement@enhancement.com">Enhancement</option>
    <option value="feature@fature.com">New Feature</option>
  </select><br />
  Enter an e-mail for others to be informed:<br /> <!-- I want this to go into the cc of the e-mail -->
  <input type="text" /><br />
  Enter a summary of your issue:<br /> <!-- I want this to be the subject of the e-mail -->
  <input type="text" /><br />
  Enter a Description:<br />
  <textarea rows="6" cols="60"></textarea><br /> <!-- I want this to be the body of the e-mail -->
  <input type="submit" value="Send">
  <input type="reset" value="Reset">
</form> 
```

当我现在提交报告时，我收到一封电子邮件，其中包含`to`as `@@SELECTED_DEATINATION@@`、 no`cc`或`subject`和 a `body`，如下所示：

```
Destination=bug@bug.com 
cc=cc-email@cc.com 
subject=subject of the e-mail 
body=this is a description 
```

这就是我期望它出现的方式，但我想知道如何使它出现，`to`作为他们选择的任何目标选项的值，`cc`地址作为他们在`cc`文本字段中输入的`subject`任何内容，作为他们输入的任何内容`subject`文本字段，以及他们在文本区域`body`中输入的任何内容。`body`谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T18:47:36.810

由于电子邮件客户端的限制，这无法完成（请参阅问题评论）。所以我想到的解决方案是有一个链接如下：

```
<a href="mailto:destination@example.com?cc=Enter%20Other%20Watchers%20Here&subject=Enter%20Bug%20Summary%20Here&body=Enter%20Bug%20Description%20Here">destination@example.com</a> 
```

这将使用如下所示的撰写电子邮件加载用户的电子邮件客户端：

*   **收件人：** destination@example.com
*   **抄送：**在此处输入其他观察者
*   **主题：**在此处输入错误摘要
*   **正文：**在此处输入错误描述

# web-services - 从 URL 调用 Web 服务

> ID：11142136
> 
> 赞同：1
> 
> 时间：2012-06-21T16:01:18.830
> 
> 标签：web-services, url, tomcat

我需要直接从浏览器从以下 WSDL调用操作***activaFolios ：***

```
http://148.223.59.169:8080/activacionFolios/activacionFolios?wsdl 
```

谁能告诉我这是否可行？如果可能的话，URL应该如何形成？

# javascript - 将某个类添加/删除到任何标签时，如何附加事件？

> ID：11142138
> 
> 赞同：0
> 
> 时间：2012-06-21T16:01:19.987
> 
> 标签：javascript, jquery

假设我有一个名为“foo”的 CSS 类。

我想要两个事件处理程序： - 当“foo”作为一个类添加到任何标签时，第一个事件处理程序将被触发 - 当“foo”作为一个类从任何标签中删除时，第二个事件处理程序将被触发

我怎样才能做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:03:54.603

没有跨浏览器事件可以做到这一点。

*如果您的*代码总是添加/删除该类，只需编写一个包装函数来执行此操作，然后使用它而不是`.addClass`/ `.removeClass`。

或者（我并没有积极建议），你可以换行`.addClass`和`.removeClass`：

```
var realAddClass = jQuery.fn.addClass;
jQuery.fn.addClass = function() {
    // Fire some event here
    return realAddClass.apply(this, arguments);
}; 
```

......但这*真的很*麻烦。

当然，最后两个建议都假设添加/删除类的唯一方法是通过 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:43:23.183

[**这个 jsfiddle**](http://jsfiddle.net/schawaska/HGrSG/)展示了我将如何去做

```
 // create a list of classes that you want to handle add and/or remove actions
    var classesThatIWantToFireAnEventFor = [
        {class: 'foo', add: false, remove: true },
        {class: 'bar', add: true, remove: true }
    ];

    // create the event handlers for each scenario
    var HandlesClassRemoved = function() {
        // implementation goes here
         alert('Running custom "removeClass" handler for css class .foo');
    };

    // create the event handlers for each scenario
    var HandlesClassAdded = function() {
        // implementation goes here
             alert('Running custom "addClass" handler for css class .foo');
    };

    var originalAddClass = jQuery.fn.addClass;
    var originalRemoveClass = jQuery.fn.removeClass;

    // override jquery's add class
    jQuery.fn.addClass = function(){
        // Execute the original method.
        originalAddClass.apply(this, arguments);

        // check in the arguments if the class you want to handle 'add' is added
        for(var i=0;i<=arguments.length;i++) {
            var c = arguments[i];
            $(classesThatIWantToFireAnEventFor).each(function() {
                if((this.class === c) && (this.add)) {
                // if it is and your list has a 'add' flag, call the handler method
                    HandlesClassAdded();
                }
            });
        }
    };

    // override jquery's add class
    jQuery.fn.removeClass = function(){
        // Execute the original method.
        originalRemoveClass.apply(this, arguments);

        // check in the arguments if the class you want to handle 'add' is added
        for(var i=0;i<=arguments.length;i++) {
            var c = arguments[i];
            $(classesThatIWantToFireAnEventFor).each(function() {
                if((this.class === c) && (this.remove)) {
                // if it is and your list has a 'add' flag, call the handler method
                    HandlesClassRemoved();
                }
            });
        }
    };
    ​ 
```

[**在 jsfiddle.net 上查看**](http://jsfiddle.net/schawaska/HGrSG/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:03:23.743

我认为您需要将事件处理程序委托给这些标签，因为在任何项目上切换类`.foo`都将被视为动态元素。

```
$('#parent').on('click', '.foo', function() {
  alert('class is foo');
});

$('#parent').on('mouseover', ':not(.foo)', function() {
  alert('class is foo');
}); 
```

这`#parent`是一个选择器，其中包含元素`.foo`或不没有的元素`.foo`。您可能有其他容器并且需要更改它们。

这里。`:not(.foo)`将应用于所有没有 class 的元素`.foo`，因此最好`class`对这些元素使用其他元素。

# html - 如何在 div 上居中显示文本

> ID：11142140
> 
> 赞同：1
> 
> 时间：2012-06-21T16:01:36.893
> 
> 标签：html, css

我正在尝试水平和垂直对齐文本。使用 de 水平轴，我做了：

```
text-align: center; 
```

它工作得很好。但我也希望文本位于垂直轴的中心。我已经阅读了很多解决方案，但每个人都有不同的解决方案，我有点困惑......

[http://jsfiddle.net/QLPTD/1/](http://jsfiddle.net/QLPTD/1/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:06:09.543

CSS 有一个`vertical-align`属性，但使用它可能有点棘手。

有关更多信息，请参阅[此页面](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)。

我有一个具有`display: table;`属性的外部 div，然后内部表是`display: table-cell;`. 然后我可以`vertical-align: middle;`在内部 div 上做。您的所有样式都应用于外部 div。

**HTML**

```
<div id="outer">
    <div id="menu_secciones" >
            Hello!
    </div>
</div>​ 
```

**CSS**

```
#outer {
    display: table;
    background-color: #dddddd;
    position: absolute;
    left: 0;
    height: 50%;
    width: 100%;
    top: 10%;
}
#menu_secciones
{
    text-align: center;
    display:table-cell;
    vertical-align:middle;
}​ 
```

[演示](http://jsfiddle.net/QLPTD/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:06:44.963

如果要垂直对齐文本，则应使用相同的行高和高度。

[http://jsfiddle.net/QLPTD/7/](http://jsfiddle.net/QLPTD/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T16:03:03.320

那么你可以做的一件事是

```
line-height: 25px; 
```

您不提供高度，而是自动设置高度。你可以试试这个，它对我来说大部分时间都有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:06:10.107

您可以考虑使用填充来发挥您的优势：http: [//jsfiddle.net/QLPTD/15/](http://jsfiddle.net/QLPTD/15/)

只要您的 padding-top 和 padding-bottom 相同并且您相应地设置了显示和高度，您的文本应该看起来是垂直居中的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T18:42:09.530

如果您只有一行文本，行高只是一个很好的解决方案。**sachleen**提到的方法也是另一个可行的选择。另一种方法是使用绝对定位……例如……

```
<div>
   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed eu massa nisi, pharetra elementum felis. Donec iaculis eros eu sapien pharetra tempor</p>
</div>

<style type="text/css">

  div {
    width:300px;
    height:300px;
    border:1px solid red;
}

p {
   display:block;
   width:300px;
   border:1px solid black;
   position:absolute;
   top:28%;
   text-align:center;
}

</style> 
```

最高百分比会因您的内容而异。

[http://jsfiddle.net/krishollenbeck/gHXf7/](http://jsfiddle.net/krishollenbeck/gHXf7/)

# windows-phone-7 - 从 SMS 内容触发 WP7 应用程序

> ID：11142141
> 
> 赞同：0
> 
> 时间：2012-06-21T16:01:41.583
> 
> 标签：windows-phone-7

如果 SMS 消息包含某种链接或命令，我今天收到客户的请求，要求激活我们的 Windows Phone 7 应用程序。如果它是双重的，我一直在寻找任何类型的提示，但到目前为止还没有找到。

任何人都知道如何做到这一点？

因此，您再次收到带有链接的短信 - 您单击链接并启动应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:06:24.957

此功能不适用于 Windows Phone 7。

没有解决方法。
除了通过用户之外，您的应用无法启动：在应用列表中点击它；点击一个活瓷砖；点击为您的应用发送的 toast 消息；或点击您的应用发出的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:19:39.650

您可以做的最接近的方法是通过推送通知服务发送 toast 通知；*虽然不是专门的短信，但如果用户点击通知*，您至少可以从中启动您的应用程序。

# ruby-on-rails - ActiveAdmin 和 AdminUser action_item

> ID：11142146
> 
> 赞同：1
> 
> 时间：2012-06-21T16:01:56.317
> 
> 标签：ruby-on-rails, devise, activeadmin

我正在尝试将 action_item 添加到 AdminUser，在文档中似乎 ruby​​ 将使用 AdminUser 的单一形式，但由于某些原因，没有一个：

admin_user adminUser adminuser

作品

这就是我想要实现的目标

```
action_item :only => :index do
    link_to "Change password", change_password_admin_admin_user(adminUser)                 
end 
```

目前还没有真正的方法来形成一个有效的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:24:20.397

请显示一些日志。确保您有 change_password 方法和有效的路径。显示编辑 admin_user 按钮的工作代码：

```
action_item( only: :show ) { link_to("Edit", edit_admin_admin_user_path(admin_user)) } 
```

# jquery - jQuery .hover 不工作

> ID：11142153
> 
> 赞同：3
> 
> 时间：2012-06-21T16:02:16.893
> 
> 标签：jquery, html, css, jquery-hover

嗨我的代码有什么问题：

当我将鼠标悬停在#open 上时，#pull_down_content 应该从页眉向下移动，当我离开 #open 时，它应该向上移动。但是，当我在页面加载后立即测试代码时，#pull_down_content 会在我将鼠标悬停在它上面之前向下移动屏幕。

```
$(function() {

//Open on hover 
$('#open').hover((function(){
    $('#pull_down_content').animate({'top':'-0px'},1000);
})

//Close when not hovered
(function(){
    $('#pull_down_content').animate({'top':'-340px'},1000);

})
});
); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T16:03:28.133

尝试如下修复您的功能，

```
$(function() {        
    $('#open').hover(function(){ //Open on hover 
        $('#pull_down_content').animate({'top':'-0px'},1000);
    },    
    function(){ //Close when not hovered
        $('#pull_down_content').animate({'top':'-340px'},1000);    
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:05:48.407

只需要一点修复

```
$('yourElement').hover(
   function(){
      // hover code
   }, function(){
      // unhover code 
   }
); 
```

# spring - sessionFactory BeanDefinitionStoreException

> ID：11142159
> 
> 赞同：1
> 
> 时间：2012-06-21T16:02:47.557
> 
> 标签：spring, hibernate

在尝试构建和测试我的 Spring 3 Web 应用程序时，我正在检索以下错误。

```
org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'mySessionFactory' defined in URL [file:war/WEB-INF/datasource-config.xml]: Could not resolve placeholder 'hibernate.config'
    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:209)
    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:220)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:84)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:656)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这是我的 datasource-config.xml 的样子

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
   http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
      ">

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password} " />
    </bean>

    <bean id="mySessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="packagesToScan" value="com.jr.freedom"/>
        <property name="hibernateProperties" value="${hibernate.config}">

        </property>
    </bean>

    <!-- Declare a transaction manager -->
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager"
        p:sessionFactory-ref="mySessionFactory" />

</beans> 
```

休眠配置在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
  "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
  <session-factory>
   <!-- We're using MySQL database so the dialect needs to MySQL as well-->
    <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <!-- Enable this to see the SQL statements in the logs-->
    <property name="show_sql">true</property>
    <!-- This will drop our existing database and re-create a new one.
      Existing data will be deleted! -->
    <property name="hbm2ddl.auto">create</property>
  </session-factory>
</hibernate-configuration> 
```

hibenate config 和 datasource-config 都在 web-inf 文件夹下。

我得到的新错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in URL [file:war/WEB-INF/datasource-config.xml]: Invocation of init method failed; nested exception is java.io.FileNotFoundException: class path resource [hibernate.cfg.xml] cannot be resolved to URL because it does not exist
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.io.FileNotFoundException: class path resource [hibernate.cfg.xml] cannot be resolved to URL because it does not exist
    at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:179)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:249)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 29 more 
```

当我将它用于 mySessionFactory

```
<bean id="mySessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    <property name="packagesToScan" value="com.jr.freedom"/>
    <property name="configLocation" value="hibernate.cfg.xml"/>

</bean> 
```

# sql-server-2008 - Oracle/SQL Server 跨平台加密解决方案

> ID：11142160
> 
> 赞同：1
> 
> 时间：2012-06-21T16:02:49.407
> 
> 标签：sql-server-2008, encryption, oracle10g, tde

我正在寻找一种安全的方法来加密我们系统上的一些数据，这些数据将被来自许多不同来源的许多不同代码库访问。

本质上，我们有一个访问不同数据库的 .NET 应用程序（WPF、ASP.NET 和 WinForms）系统。一些应用程序访问 SQL Server 2008，一些 Oracle 10g。我们还有可以访问 Oracle 10i 的 Java/JSP 应用程序。有一些数据我想保持加密，以便应用程序可以读取/写入数据，但只是在服务器上运行查询的人不能。

我最初的想法来自 SQL Server 2008。使用对称密钥加密列上的数据并使用非对称密钥或证书加密该密钥。问题是，我不知道如何在 Oracle 上实现类似的东西。

我希望的是某种可以在所有平台上工作的解决方案，并且不需要将密钥从服务器复制到服务器或从工作站复制到工作站。如果我可以使用某种证书颁发机构/颁发服务器，那也会很有帮助。

有什么建议么？

# ruby-on-rails - Ziya 将 Bar 链接到 URL

> ID：11142163
> 
> 赞同：0
> 
> 时间：2012-06-21T16:02:53.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, graphing

我正在开发一个使用 Ziya 并更新到 rails 3 的项目，但是，我需要能够使柱形图上的每个栏都链接到另一个 URL。问题是我找不到任何文档。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:18:01.183

[有关此问题的答案，请参见 helpsheets.co](https://www.helpsheets.co/questions/1-how-do-i-create-a-link-on-a-barchart-with-ziya)。

# html - 将字符串添加到 url 的末尾

> ID：11142164
> 
> 赞同：0
> 
> 时间：2012-06-21T16:02:57.613
> 
> 标签：html

这听起来像是一个愚蠢的问题，但只是想在这里学习一些东西。使用**&**或在 url 末尾添加字符串参数有什么区别**？**

```
http://dd.bmpss.com/guide?id=63236
or
http://dd.bmpss.com/guide&id=63236 
```

当我使用 & 时，它会破坏页面的加载，这是另一个问题，但我只是想知道使用任一符号的优点以及任一符号的作用。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:04:26.967

使用`?`over的好处`&`是它可以工作。

`?`将您的查询字符串与 URL 的其余部分`&`分开，并将查询字符串中的参数分开。

或许您应该阅读[更多有关 URL](http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax)的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:04:56.003

`?`如果您必须在页面之间传递一个变量，则使用它，`&`如果您有许多变量要传递，则使用它。

# c# - 不允许 SQL 表参数化？

> ID：11142169
> 
> 赞同：1
> 
> 时间：2012-06-21T16:03:11.657
> 
> 标签：c#, sql, parameters

我正在尝试在我的 sql 查询中使用一些参数，如下所示；

```
 Answer_table = new MySqlParameter("@answerTable", AT);
    MySqlCommand solved_q = new MySqlCommand("SELECT * FROM @answerTable WHERE UserID = @uID", c2.get_con());
    solved_q.Parameters.Add(Answer_table);
    solved_q.Parameters.Add(uID); 
```

但它没有像我预期的那样工作。当我不使用表名参数（@answerTable）时，它适用于 uID，是因为它不允许吗？如果是，还有其他方法可以做到吗？

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:05:41.953

您不能`FROM`使用参数指定子句。

您可以通过构建实际字符串来构建 SQL 语句：

```
new MySqlCommand(String.Format("SELECT * FROM {0} WHERE UserID = @uID"
                 , answertable)
                 , c2.get_con()); 
```

* * *

*`ansertable`注意 - 请务必通过不允许操作变量来防范 SQL 注入攻击。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:07:30.993

这是不允许的，因为它是 DBMS 为准备好的语句编译其执行路径所需的信息的一部分。

在准备之前，您必须在运行时将语句构建为字符串。幸运的是，大多数 DBMS 仍然会缓存您准备好的语句。

重要警告：如果表的名称以任何方式“来自外部”（例如 HTML 请求中的参数），您将必须非常小心以避免 SQL 注入（即：有人可能会传递一些邪恶的东西，例如“table1 ; drop table table1" 而不是你所期望的，这会以意想不到的方式改变你的 SQL 语句的含义）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:57:32.823

听上去你正在做一个 SELECT，所以你没有创建一个新表......话虽如此，查询时数据库中的表是已知的。通过在数据库中查询有效表的列表来利用这一事实。首先填充一个列表，然后验证为您提供的表名是否正确。如果它在有效列表中，则创建一个字符串并针对 db 执行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:06:40.637

尝试

```
MySqlCommand solved_q = new MySqlCommand(
    String.Format("SELECT * FROM {0} WHERE UserID = @uID", AT),
    c2.get_con());
solved_q.Parameters.AddWithValue("@uID", uID); 
```

由于`AT`是通过编程方式确定的（我希望）并且不是由用户输入的，因此您不会在这里遇到 SQL 注入问题。

# html - 重定向域

> ID：11142170
> 
> 赞同：0
> 
> 时间：2012-06-21T16:03:11.590
> 
> 标签：html, redirect, dns, webpage

我有两个域。一个是[www.nucleation.co.in](http://www.nucleation.co.in)，另一个是[www.nucleation.in](http://www.nucleation.in) 如何将每个链接（如[www.nucleation.co.in/2012/06/custom-themes-in-gmail.html](http://www.nucleation.co.in/2012/06/custom-themes-in-gmail.html) ）重定向到[www.nucleation.in /2012/06/custom-themes-in-gmail.html](http://www.nucleation.in/2012/06/custom-themes-in-gmail.html) 两个域都在同一个提供商处注册。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:21:08.573

First, You have to login your www.nucleation.co.in hosting cpanel and creat index.html then under the code copy and past it in the index.html.

```
<html>
<head>
<meta http-equiv="REFRESH" content="0;url=http://www.nucleation.in"></HEAD>
<BODY>
wait a second...
</BODY>
</HTML> 
```

i think it's can help you

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:11:37.277

您的提供商应在对域 www.nucleation.co.in 的任何请求中返回 301 响应代码

为此，您必须联系您的提供商。此外，提供商可能不一定支持此功能，您必须手动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:42:58.480

你真的要重定向吗？我认为您想要“域名停放”。我也做过类似的事情，我的站点有两个域，一个 .com 和一个 .org，我将两个域都指向一个站点。

如果是这种情况，请转到您的主机控制面板，检查域停放，如果您使用的是 cPanel，cPanel 中有一个图标。 [检查cPanel文档](http://etwiki.cpanel.net/twiki/bin/view/AllDocumentation/CpanelDocs/ParkedDomains)

cPanel 中也有一个重定向选项，请检查一下。即使是域管理器也有一个名为“域转发”的选项，请检查该套件是否适合您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T09:52:19.743

我自己找到了办法。我为每个 url 添加了一个重定向脚本，以将其带回新域。

# iphone - 查看透明度和手势处理

> ID：11142176
> 
> 赞同：2
> 
> 时间：2012-06-21T16:03:31.417
> 
> 标签：iphone, objective-c, ios, uiview, uigesturerecognizer

我目前正在尝试创建一个视图来处理我的应用程序上可能发生的所有手势。

我希望这个视图透明，以便将其他视图放在下面并且它们仍然会显示（我不想让它们成为处理视图的子视图）

手势处理工作正常，直到我从那时起将视图颜色设置为“clearColor”，它使视图消失。除非我坚持子视图，否则在这种情况下，手势只会在点击子视图时发生。

因此，我的问题是：我如何设法让 Gesture 事件在透明视图上发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:16:22.483

尝试这样的事情。此代码将两个子视图添加到主视图“bottomView”，它具有红色背景，然后是“testView”，它是透明的“bottomView”顶部的覆盖层，带有点击手势识别器。如果你在“testView”中点击它会打印出 NSLog 消息，希望对你有帮助。

```
-(void)viewDidLoad
{
    [super viewDidLoad];

    UIView *bottomView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    [bottomView setBackgroundColor:[UIColor redColor]];
    [self.view addSubview:bottomView];    
    UIView *testView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 150)];
    [testView setBackgroundColor:[UIColor clearColor]];
    [self.view addSubview:testView];

    UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] 
                                          initWithTarget:self
                                          action:@selector(handleTap:)];
    [tapRecognizer setNumberOfTapsRequired:1];
    [tapRecognizer setDelegate:testView];
    [testView addGestureRecognizer:tapRecognizer];
}

-(void)handleTap:(UITapGestureRecognizer *)sender 
{
     NSLog(@"Tapped Subview");
} 
```

# c# - 在 C# 中传递值

> ID：11142177
> 
> 赞同：15
> 
> 时间：2012-06-21T16:03:35.380
> 
> 标签：c#, pass-by-value

如何通过 Parameter-by-Value 将“MyClass”（C#）的对象传递给方法？例子：

```
MyClass obj = new MyClass();
MyClass.DontModify(obj); //Only use it!
Console.Writeline(obj.SomeIntProperty); 
```

...

```
public static void DontModify(MyClass a)
{
    a.SomeIntProperty+= 100;// Do something more meaningful here
    return;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T16:08:31.010

默认情况下，对象类型在 C# 中按值传递。但是，当您将**对象引用**传递给方法时，对象中的修改将被保留。如果您希望您的对象是不可变的，则需要**克隆**它。

为此，请在您的类中实现[ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)接口。这是一个如何使用 ICloneable 的模拟示例：

```
public class MyClass : ICloneable
{
  private int myValue;

  public MyClass(int val)
  {
     myValue = val;
  }

  public void object Clone()
  {
     return new MyClass(myValue);
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T16:05:39.620

默认情况下，它是按值传递的。但是，您通过值传递*对象引用*，这意味着您仍然可以编辑对象中的值。

为了防止对象完全改变，您需要在将对象传递到您的方法之前实际克隆该对象。这将需要您实现一些方法来创建一个新实例，该实例是原始对象的副本，然后传入副本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-21T16:07:44.007

```
public static void DontModify(MyClass a)
{
    MyClass clone = (MyClass)a.Clone();
    clone.SomeIntProperty+= 100;// Do something more meaningful here
    return;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-21T16:08:10.590

您可以在对象上创建一个 Clone 方法以将返回值传递给您的方法。C# 不能按值传递引用类型，因此这可能是一个不错的选择。

```
public MyClass CreateClone()
{
    return new MyClass() { SomeIntProperty = this.SomeIntProperty };
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T19:03:43.437

```
class Program
{
    static void Main(string[] args)
    {
        Person p1 = new Person()
        {
            Name = "Alsafoo",
            Address = new Address()
            {
                City = "Chicago"
            }
        };

        Person p2 = new Person(p1.Address);
        p2 = p1.GetClone(CloningFlags.Shallow);
        p2.Name = "Ahmed";
        p2.Address = new Address(){City = "Las Vegas"};
        Console.WriteLine("p1 first name: {1} --- p1 city: {2} {0}p2 first name: {3} ---- p2 city: {4}", 
            Environment.NewLine, p1.Name, p1.Address.City, p2.Name, p2.Address.City);
        Console.ReadKey();
    }
}
public class Person
{
    public Person()
    {}
    public Person(Address a)
    {
        Address = a;
    }
    public string Name { get; set; }
    public Address Address { get; set; }        
}

public class Address
{
    public string City { get; set; }
} 
```

下载此扩展 [https://www.nuget.org/packages/CloneExtensions/1.2.0](https://www.nuget.org/packages/CloneExtensions/1.2.0)

# sql-server - 如何在 SQL Server 表中存储 CQRS 读取模型？

> ID：11142179
> 
> 赞同：0
> 
> 时间：2012-06-21T16:03:37.380
> 
> 标签：sql-server, views, cqrs, denormalized

由于遗留系统问题，我正在研究将 CQRS 读取模型存储在 SQL Server 表中（请参阅[此问题](https://stackoverflow.com/q/11102774/97879)的方法 2 和 3 ）。

虽然我想使用 MongoDB 等文档数据库来实现读取模型，但由于目前无法重新设计外部系统，我现在坚持将所有内容都保存在 rdbms 中。

由于我正在研究以适当的非规范化方式存储记录，因此在处理典型的分层数据时实际存储它们的最佳方式是什么，例如典型的 Customer / Order / LineItems /etc，必须全部显示在相同的观点？[编辑：我在想的是，我将查询模型所需的数据放在单独的字段中，但将完整对象放在“对象数据字段”中]

由于我的遗留系统（大部分是我无法控制的），我正在考虑将触发器添加到遗留系统表或进行 sproc 更改以使我的读取模型保持最新，但我应该如何实际存储数据本身？

我考虑将它们作为 JSON 存储在一个字段中，或者将它们存储为 XML，因为两者都可以轻松地从 .net 应用程序进行序列化/反序列化，并且可以通过数据库中其他活动的触发器合理地轻松更新。（当您习惯 Xpath/XQuery 时，它并没有那么糟糕，从这里的[另一个答案](https://stackoverflow.com/a/4187412/97879)，我找到了一个[用于 T-SQL 的 JSON 解析器](http://www.simple-talk.com/sql/t-sql-programming/consuming-json-strings-in-sql-server/)）

有更好的方法吗？如果不是，我应该使用 XML 还是 JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:25:10.907

我会使用 XML，因为它在 SQL Server 中具有内置支持。一般来说，我会避免使用用 T-SQL 编写的任何其他内容，因为维护这可能是一场噩梦。

# c# - 带有 SSL/TLS 的 wsdl.exe

> ID：11142184
> 
> 赞同：6
> 
> 时间：2012-06-21T16:03:52.407
> 
> 标签：c#, service, https, certificate, wsdl.exe

我一直在尝试向提供者提供有关我在尝试使用他的 WS 之一时遇到的错误的更多信息。

他们让我使用 wsdl.exe 执行以下命令：

> wsdl.exe /l:CS /protocol:SOAP /verbose /sharetypes https:example.com/?wsdl

我做到了，得到：错误：处理“ [https://example.oom?wsdl](https://example.oom?wsdl) ”时出错。[- 下载“ https://example.com?wsdl](https://example.com?wsdl) ”时出错。- 请求被中止：无法创建 SSL/TLS 安全通道。

问题是我有一个证书来导航“ [https://example.com?wsdl](https://example.com?wsdl) ”，我认为它已正确安装。当我尝试在 IE 中访问该 URL 时，我只需要从列表中选择证书并授予它一定的权限。然后显示 wsdl。我让我的 WS 提供商告诉我如何告诉命令：“使用 ssl。使用此证书”。他们让我问我的网络团队，但我没有这样的东西，所以我问了谷歌，我发现：1）启用 SSL/TLS（如果这意味着去：IE > Internet 选项 > 高级 > SSL/TLS启用，我做到了）和 2）检查证书是否已安装且可用。我认为是的。

谁能告诉我我能做什么？证书是如何安装的，但命令无法访问它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T16:21:57.827

您是说需要提供*客户端*证书才能导航到该网页吗？如果是这种情况，我不确定您是否可以`wsdl.exe`直接使用该工具连接到它。

但你不需要。在 IE 中加载 WSDL 并将其保存为 XML，然后指向`wsdl.exe`文件的本地副本。输出的唯一区别是嵌入在代理类中的默认端点地址。无论如何，您应该在运行时设置该值，但您始终可以编辑自动生成的 C# 代码并修复它。实际的服务和数据合约以及实现代码将完全相同。

一个警告：如果这个 WSDL 是由 WCF 生成的，那么您还有一些额外的工作要做。WCF 产生一个联合的 WSDL 定义：通常有六个或更多单独的 XSD 文件构成整个 WSDL 定义。通常，与连接相关的信息位于一个文件中，而类型信息则使用如下所示的标签从其他地方提取：

```
<wsdl:types>
  <xsd:schema targetNamespace="foo">
    <xsd:import schemaLocation="https://localhost/Foo.svc?xsd=xsd0" namespace="foo"/>
    <xsd:import schemaLocation="https://localhost/Foo.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
    <xsd:import schemaLocation="https://localhost/Foo.svc?xsd=xsd2" namespace="http://schemas.datacontract.org/2004/07/Foo.Model"/>
    <xsd:import schemaLocation="https://localhost/Foo.svc?xsd=xsd3" namespace="http://schemas.datacontract.org/2004/07/System.Collections.ObjectModel"/>
  </xsd:schema>
</wsdl:types> 
```

如果这是真的，您将需要做两件事来获得所需的 WSDL：

1.  下载所有引用的文件；这些将是在另一个 XML 文件中找到的`<?include>`指令或标记，它们会引入第二个。`<wsdl:import>`您需要检查每个新文件，因为通常有二级和三级导入。把*所有东西都*放在一个文件夹里。
2.  编辑所有这些包括引用以删除 URL 并仅使用本地文件引用。

完成后，`wsdl.exe`应该可以正常运行。（在 .NET 4.5 中内置了对动态展平 WSDL 文件的支持，但在此之前您必须手动进行。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:21:28.327

将 wsdl 下载到浏览器中保存到文件，然后在本地文件上使用 wsdl.exe。

# html - 如何匹配字符串中的第一个无序列表并选择第一个列表项？

> ID：11142187
> 
> 赞同：0
> 
> 时间：2012-06-21T16:04:07.420
> 
> 标签：html, regex, preg-match

我有一个以无序列表开头的内容字符串我想在我的主页上对此内容进行摘要，我需要匹配第一个无序列表并且在预览中只显示 5 个列表项，所以我说匹配整个 ul使用此正则表达式标记：

```
/<\s*ul[^>]*>(.*?)<\s*/\s*ul>/s 
```

它在在线正则表达式测试器中运行良好，但我得到未知修饰符'\'，我不知道是哪一个？同样在获得整个无序列表之后，我如何只选择前 5 个列表项，例如：

```
<ul class="mylist">
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
    <li>Lorem Ipsum Dolor Sit Amet</li>
</ul> 
```

我想只用前 5 个标签创建同一个`<li>`标签，所以我应该在 php 中使用正则表达式还是其他一些方法？

并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:10:27.277

```
/<\s*ul[^>]*>(.*?)<\s*/\s*ul>/s 
```

`/`如果将其用作分隔符，则需要转义。

```
/<\s*ul[^>]*>(.*?)<\s*\/\s*ul>/s 
```

但是，在 PHP 中，您可以使用任何字符作为分隔符：

```
#<\s*ul[^>]*>(.*?)<\s*/\s*ul>#s 
```

* * *

您可以重复一个模式：

```
#<\s*ul[^>]*>(\s*<li>.+?</li>){5}#sm 
```

将匹配 5`<li>`秒。但是，您将无法单独访问它们。您可以展开该重复组，也可以运行第二个表达式来提取`<li>`s。

# c# - 将 .asmx 转换为 WCF

> ID：11142191
> 
> 赞同：0
> 
> 时间：2012-06-21T16:04:14.977
> 
> 标签：c#, wcf, web-services, .net-3.5, asmx

我正在使用 .asmx 页面开发 .NET 3.5 Web 服务，但我不能在 GET 和 POST 请求中使用可选参数的事实让我想到将我的应用程序切换到 WCF。但我没有清楚地了解它是如何工作的。

你能告诉我下面的代码如果转换成 WCF 会怎样吗？

```
[WebService]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
[ScriptService]
public class ws :WebService
{
    #region WebMethods

    //Parameters shoud be optional but it isnt possible in .asmx .NET 3.5
    [WebMethod]
    public XmlNode GetResult(string param1(=null), string param2(= null))
    {
        MyClass myClass = new MyClass();

        //Get a xml string
        string output = myClass.GetXmlString(param1, param2);

        //Load this xml
        XmlDocument xmlDocument = new XmlDocument();
        xmlDocument.LoadXml(output);

        //Return this xml
        return xmlDocument.DocumentElement;
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:13:50.410

WSDL 无法描述可选参数，因此无论您使用的是 ASMX 还是 WCF 合同，使用可选参数的实际语义都是多余的（它们仍然被归类为必需参数 - 即与所有参数一样）。

# android - 安全 GALAXY TAB - 如何在内核权限上禁用蓝牙和/或 WiFi？

> ID：11142195
> 
> 赞同：1
> 
> 时间：2012-06-21T16:04:34.213
> 
> 标签：android, permissions, kernel

请善意地支持我，帮助我保护我们为员工提供的 Galaxy 标签。有没有办法禁用停止访问蓝牙和WiFi的权限...

“禁用蓝牙的最简单方法是删除蓝牙设备中的权限。蓝牙由内核通过设备 /dev/ttyHS0 和 /dev/ttyMSM0 管理，这些设备已设置读写权限 (660) “

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:27:12.183

是的，这可以在启动时执行 - 您需要做的是从设备中提取 boot.img。

然后，您可以解压缩 boot.img，它会为您提供一个 ramdisk 和一个内核映像。Ramdisk 中有一组初始化文件，init.rc 是您要放置代码以设置对该设备的权限*或*引用脚本的位置。

这有帮助吗？

# facebook - Facebook分享按钮问题

> ID：11142196
> 
> 赞同：0
> 
> 时间：2012-06-21T16:04:43.060
> 
> 标签：facebook, button, share

我在电子邮件正文 (.htm) 中添加了 facebook 分享按钮。该按钮的目的是分享用户在其电子邮件中收到的照片。单击该按钮时，将打开一个新选项卡，其中包含“写消息”区域以在 facebook 上共享。问题是，一旦单击“共享链接”按钮，什么都不会发生 - 没有确认，没有重定向，但链接实际上已发布在 Facebook 上（因此最终用户不会知道消息已被共享，除非他们在所有困惑时检查他们的 Facebook ）。这是按钮的代码：

```
<a title="Share this photo" 
href="http://www.facebook.com/sharer.php?
    s=100
&p[url]=%PHOTO_LINK%.jpg (dynamically populated link)
&p[title]=Check out my pic!"
target="_blank">
<img src="someplace.png" 
alt="Share on Facebook" height="50" width="50" />
</a> 
```

我曾尝试使用元标记（标题/描述/url 和主命名空间标记），但在共享时它们不会被拾取（标题/描述是一堆随机字符）。对于此类共享按钮，这种行为是否正常，是错误还是我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:05:17.007

要解决此问题，请放入`target="_blank"`标签`<a>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:16:53.680

您将无法在电子邮件中共享照片，因为这意味着共享电子邮件本身的 URL（用户无权访问）。

相反，您应该将图像放在网站上并使用 OpenGraph 标记为其提供正确的标题、描述和缩略图。然后在 Facebook 上分享这张图片的 URL。您仍然可以在电子邮件中嵌入图像，但共享和图像需要在电子邮件外部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-23T16:30:01.500

自 2012 年以来发生了很多事情。现在用户在 Facebook 上共享时可以选择两种 API：1) 共享器和 2) 共享对话框。

**共享者**：这将需要用户确认发布他们的内容，然后这将为您提供您想要的内容。但是，Sharer现在*只支持该`url`参数。* 基本上没有办法共享任何其他参数。 **[Facebook 官方开发者文档：分享按钮](https://developers.facebook.com/docs/plugins/share-button/)**。并且：**[官方 Facebook 停止了 Sharer Non-URL Args Post](https://developers.facebook.com/support/bugs/357750474364812/)**。

**共享对话框**：您需要使用 Facebook 配置应用程序，进行身份验证，然后为了解决您的问题，您需要设置这些参数之一...

*   `display`：将此设置为`page`（默认）或其他选项之一，以确定您的共享对话框的显示方式。

*   `redirect_uri`：如果您不喜欢 Facebook 决定如何解释您的`display`参数，您可以*在分享后*重定向到您网站上的某个页面，上面写着“发布成功共享！*链接到发布*”或类似的内容。

希望这可以帮助某人。

# php - 文件下载无法正常工作

> ID：11142204
> 
> 赞同：-1
> 
> 时间：2012-06-21T16:05:04.920
> 
> 标签：php, file, download, file-extension

我正在尝试使用 PHP 下载文件。现在文件已下载，但未获得原始格式（缺少扩展名）。使用原始文件扩展名重命名后，我可以使用下载的文件。我正在使用以下代码

```
header("Expires: 0");  
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");  
header("Cache-Control: no-store, no-cache, must-revalidate");  
header("Cache-Control: post-check=0, pre-check=0", false);  
header("Pragma: no-cache");  
header("Content-type: application/".$result['ext']);  
header('Content-length: '.filesize($file));  
header('Content-disposition: attachment; filename='.$result['file_name']); 
readfile($file);  
exit; 
```

在哪里

```
$result['ext']="rar",
$file="file path to the uploaded folder". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:05:58.560

我很确定您必须将文件名中的扩展名作为`Content-disposition`标题的一部分发送到浏览器。

对于您的代码，您必须更改：

```
header('Content-disposition: attachment; filename='.$result['file_name']); 
```

至：

```
$filename = $result['file_name'] . '.' . $result['ext'];
header('Content-disposition: attachment; filename=' . $filename); 
```

# widget - 播放器小部件中的 show_comments=false 禁用声音链接

> ID：11142207
> 
> 赞同：0
> 
> 时间：2012-06-21T16:05:11.653
> 
> 标签：widget, soundcloud

使用以下代码，小部件右下角 Soundcloud 上的声音链接有效（Firefox/OSX）：

```
<iframe id="sc-widget" src="http://w.soundcloud.com/player/?url=http://soundcloud.com/k0s/bcn07" width="100%" height="166" scrolling="no" frameborder="no"></iframe>
<script src="http://w.soundcloud.com/player/api.js" type="text/javascript"></script> 
```

但是当我添加`show_comments=false`为查询参数时它停止工作：

```
<iframe id="sc-widget" src="http://w.soundcloud.com/player/?url=http://soundcloud.com/k0s/bcn07&show_comments=false" width="100%" height="166" scrolling="no" frameborder="no"></iframe>
<script src="http://w.soundcloud.com/player/api.js" type="text/javascript"></script> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:02:11.113

那是小部件中的一个错误——评论的容器仍然被添加到页面中并且它覆盖了链接。我现在已经对其进行了修复，您应该会在几分钟内看到它已修复。

此外，该`url`参数应指向 API 端点：例如：

代替

```
.../player/?url=http://soundclou... 
```

它应该是：

```
.../player/?url=http://api.soundclou... 
```

# objective-c - 如何使用 RubyMotion 将 UISegmentedControl 插入到导航栏？

> ID：11142209
> 
> 赞同：0
> 
> 时间：2012-06-21T16:05:20.943
> 
> 标签：objective-c, ios, uisegmentedcontrol, rubymotion

我已经使用 Xcode 构建了一个 iOS 应用程序，现在将其转换为 RubyMotion。

使用界面生成器，我能够在我的一个视图控制器上的导航栏中添加分段控件。当我尝试在 RubyMotion 中以编程方式重新创建它时，应用程序崩溃而不报告错误是什么。

谁能指出我哪里出错了？另外， init 是声明这个的最佳位置吗？还是视图生命周期回调之一，例如 viewDidLoad？

```
class MyController < UIViewController

  def init
    if super
      image = UIImage.imageNamed('tab_bar_icons/one.png')
      self.tabBarItem = UITabBarItem.alloc.initWithTitle('One', image: image, tag:1)
      self.navigationItem.titleView = searchTypeContol # when commented out, the app doesn't crash!
    end
    self
  end

  def searchTypeControl
    @searchTypeControl ||= begin
      _searchTypeControl = UISegmentedControl.alloc.initWithFrame( CGRectZero)
      _searchTypeControl.segmentedControlStyle = UISegmentedControlStyleBar
      _searchTypeControl.insertSegmentWithTitle('One', atIndex: 0, animated: false)
      _searchTypeControl.insertSegmentWithTitle('Two', atIndex: 0, animated: false)
      _searchTypeControl.insertSegmentWithTitle('Three', atIndex: 0, animated: false)
      _searchTypeControl.sizeToFit
      _searchTypeControl
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:57:52.570

这是一个错字...：/

第 7 行`searchTypeControl`不应该`searchTypeContol`

我希望 RubyMotion 已经向我报告了这个:(

# ruby-on-rails - activeadmin 更改密码按钮

> ID：11142210
> 
> 赞同：1
> 
> 时间：2012-06-21T16:05:26.207
> 
> 标签：ruby-on-rails, activeadmin

我知道如何使用 devise 更改密码，但我不知道如何为当前管理员用户创建指向操作的链接。例如在电子邮件下添加一个链接。

更改密码

这将发送到一个动作调用：

```
send_reset_password_instructions 
```

我真的找不到 ActiveAdmin 的任何好的文档，官方网站公开了一些示例，但没有真正解释。它不清楚事情在哪里以及如何运作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T16:29:01.907

您需要查看 ActiveAdmin[关于自定义控制器操作的文档](http://activeadmin.info/docs/8-custom-actions.html)。我通过创建“member_action”（作用于单个记录的自定义控制器操作）并添加“action_item”来执行它（这些是查看记录时出现在右上角的按钮）来实现这一点。这是我如何使它工作的：

```
# in app/admin/admin_users.rb
action_item do
  # Link to perform the member_action, "reset_password" defined below
  link_to("Reset Password", reset_password_admin_admin_user_path(admin_user))
end

member_action :reset_password do
  # Find the user in question
  admin_user = AdminUser.find(params[:id])

  # Call the method (from Devise) which sends them a password reset email
  admin_user.send_reset_password_instructions

  # Redirect back to the user's page with a confirmation
  redirect_to(admin_admin_user_path(admin_user),
    notice: "Password reset email sent to #{admin_user.email}")
end 
```

# asp.net - 某些客户端的 asp.net gridview selectbutton 不回发

> ID：11142215
> 
> 赞同：0
> 
> 时间：2012-06-21T16:05:39.737
> 
> 标签：asp.net, gridview, postback

我们有一个使用 VB.Net 的 ASP.net 3.5 WebForms 应用程序，它已经运行了很多年。在这个应用程序中有一个 gridview 选择按钮，它不会为某些客户端回发。当我们将 Web 应用程序从 Windows Server 2003 移至 Windows Server 2008R2 上的 IIS 7 时，我们的某些客户端开始出现此问题。

选择按钮在 gridview 中定义`asp:CommandField ShowSelectButton="True"` ，生成代码如下（从 HTML 源代码复制）：

```
a href="javascript:__doPostBack('ctl00$bodyContentPlaceHolder$GridView1','Select$0')" style="color:#333333;">Select</a> 
```

对于一些使用IE（各种版本）的Win XP、Win 7用户，用户点击生成的按钮时不会回发。已检查所有用户以确保启用了 javascript。对于其他使用IE等浏览器的Win XP、Win 7用户来说，效果很好。很多谷歌搜索已经找到了关于 Javascript 回发问题的信息，但似乎没有什么合适的。

其他信息：在 GridView Rowdatabound 事件中使用此代码为回发启用了整个 gridview 行：

```
e.Row.Attributes.Add("onClick", "javascript:__doPostBack('" + Replace(GridView1.ClientID, "_", "$") + "','Select$" + e.Row.RowIndex.ToString + "')") 
```

生成此 HTML：

```
<tr align="center" valign="top" onClick="javascript:__doPostBack('ctl00$bodyContentPlaceHolder$GridView1','Select$0')" 
```

请注意，Javascript 与不起作用的 javascript 读取相同，除了单击行中的其他位置对所有用户都有效。这给我带来了三个可能的问题：

1.  SELECT 按钮是否存在于链接标签中，导致某些用户无法使用？
2.  是否存在可能不同的用户设置？
3.  互联网提供商是否阻止了它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:24:03.863

> 1\. SELECT 按钮在链接标签中是否有某些问题导致某些用户无法使用？

这似乎不太可能，因为页面应该以相同的方式呈现给所有用户（除非您正在执行您没有披露的客户端检测）。

> 2.是否有可能不同的用户设置？

也许。我会寻找的东西包括：

1.  检查兼容性视图设置以找到不同的设置（在开发过程中也可以尝试）。
2.  检查用户是否有可能干扰的加载项（运行`iexplore.exe -extoff`以运行没有加载项的 IE）
3.  强制 IE 忽略缓存页面（我发现使用 IE7 及更高版本执行此操作的最简单方法是按 F12 的开发人员栏，然后在缓存菜单上选择“始终从服务器刷新”）。

> 3\. 是不是互联网供应商屏蔽的东西？

我非常怀疑这一点。

# c++ - 从 C++ 调用 VB DLL

> ID：11142217
> 
> 赞同：1
> 
> 时间：2012-06-21T16:05:41.663
> 
> 标签：c++, vb.net, dll, com

我对如何做到这一点有点困惑。我已按照有关[从 C++ DLL 使用 VB.NET 类库的最佳方式的说明进行操作？](https://stackoverflow.com/questions/389244/best-way-to-use-a-vb-net-class-library-from-a-c-dll)但是对于 VB 来说是新手，我不知道我是否掌握了 VB 部分，更不用说 C++ 了。如果有人可以在这里帮助我，我会为了后代更正下面的代码！

他们是：VB优先；该项目是一个类库，除了在项目属性中打开“注册 COM 互操作”外，所有设置都是默认设置。

```
Public Class Class1
    Public Sub New()
        'do stuff
    End Sub

    Public Sub increment()
        'do stuff
    End Sub
End Class 
```

这是 C++，它是一个控制台应用程序，开启了 CLR 支持：

```
#include <iostream>
#import "..\ClassLibrary1\bin\Debug\ClassLibrary1.tlb" raw_interfaces_only

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    cout << "hello world" << endl;
    HRESULT hr = CoInitialize(NULL);
    long lResult = 0;

    Class1 c1; //compiler fails on this, doesn't know what Class1 is
    c1.increment();

    //wait for console key press then exit
    char x;
    cin >> x;
    CoUninitialize();
    return 0;
} 
```

具体问题：

1.  VB是正确的吗？我需要添加任何类似接口的东西吗？
2.  假设我想通过 COM 而不是 C++/CLI 调用它，我该怎么做。（这似乎是合乎逻辑的选择，因为客户端已经通过 COM 调用了其他东西；但是，我不确定从哪里获取 IDispatch 指针，在我的其他代码中它是由客户端传递给我的）。
3.  如果我走 C++/CLI 路线，当从玩具项目升级到实际实现时，这将意味着将我现有的 C++ 代码从“不支持 clr”更改为“/clr”——这可能会破坏它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:56:04.830

供任何像我写这个问题时一样困惑的人将来参考。我走的是 COM 路线（不是 C++/CLI，因为那会涉及更改现有项目的设置）。正确的代码在这里：

[使用 CoCreateInstance 从 C++ 调用 COMVisible VB.Net dll](https://stackoverflow.com/questions/11154708/calling-comvisible-vb-net-dll-from-c-using-cocreateinstance)

# java - Lucene，索引已经/外部标记化的标记并定义自己的分析过程

> ID：11142221
> 
> 赞同：3
> 
> 时间：2012-06-21T16:05:49.567
> 
> 标签：java, lucene, indexing, tokenize

在使用Lucene的过程中，我有点失望。我没有看到或理解我应该如何继续为任何 Lucene 分析器提供已经可以直接索引的东西。或者我应该如何继续创建我自己的分析器......

例如，如果我有一个`List<MyCustomToken>`，它已经包含许多标记（实际上还有更多关于大写等的信息，我还想将它们作为每个 MyCustomToken 的特征进行索引）

如果我很好地理解了我所读的内容，我需要子类化一个分析器，它将调用我自己的标记器子类化一个 TokenStream，我只需要提供一个`public final boolean incrementToken()`可以插入`TermAttribute`@位置的工作。

顺便说一句，这是我感到困惑的地方 => 这个 TokenStream 是 java.io.Reader 的子类，因此只能分析像文件、字符串这样的流对象......

我怎样才能拥有自己的文档分析器来使用我的列表而不是这个流媒体？

看起来整个 Lucene API 是建立在这样的想法之上的，即它首先开始分析 @ 一个非常低的级别，即“字符”的观点，而我需要稍后开始使用它/插入已经标记化的单词甚至表达式（组词）。

Lucene 使用的典型示例如下（取自[此处](http://www.lucenetutorial.com/lucene-in-5-minutes.html)）：

```
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);

// 1\. create the index
Directory index = new RAMDirectory();

IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);

IndexWriter w = new IndexWriter(index, config);
addDoc(w, "Lucene in Action");   // BUT here i would like to have a addDoc(w, MyOwnObject)
addDoc(w, "Lucene for Dummies");
addDoc(w, "Managing Gigabytes");
addDoc(w, "The Art of Computer Science");
w.close();

[...]   

private static void addDoc(IndexWriter w, String value) throws IOException {
  Document doc = new Document();
  doc.add(new Field("title", value, Field.Store.YES, Field.Index.ANALYZED));
  // SO that i can add here my own analysis base on many fields, with them built from a walk through List or complex structures...
  w.addDocument(doc);
} 
```

ps : (我的 java/lucene 知识仍然很差，所以我可能错过了一些关于 Reader <=> List 模式的明显内容？）

[这个问题和我在 lucene list 上](http://lucene.472066.n3.nabble.com/Apply-custom-tokenization-tt3803765.html#none)的问题几乎一样

**编辑：** @ *Jilles van Gurp* => 是的，你说得很对，这是 ai 想到的另一个问题，但首先希望找到一个更优雅的解决方案。因此，如果继续，我仍然可以进行某种序列化，将此序列化字符串作为文档提供给我自己的分析器，并拥有自己的标记器，然后将反序列化并重新进行一些基本的标记化（实际上，只需遍历已经完成的标记） ...）顺便说一句，它会增加一些我想避免的更慢和愚蠢的额外步骤......

关于这部分 => 是否有人有任何最近（Lucene >3.6）自定义标记器的样本，提供了 Lucene 索引所需的所有基础数​​据？我读过关于像这样发射 Token 的文章：

```
 posIncrement.setPositionIncrement(increment); 
        char[] asCharArray = myAlreadyTokenizedString.toCharArray(); // here is my workaround 
        termAttribute.copyBuffer(asCharArray, 0, asCharArray.length); 
        //termAttribute.setTermBuffer(kept); 
        position++; 
```

对于我为什么在这里的部分，这是因为我使用了一些外部库，对我的文本进行标记，进行一些词性注释和其他分析（可能会想到表达式识别或命名实体识别，也可以包括关于大写等的一些特殊功能，我想在 Lucene 索引中跟踪（我感兴趣的真正部分是**索引**和**查询**，而不是分析的第一步，它几乎来自 Lucene 库，仅用于我的标记化已阅读）。

（另外，我不认为我可以从这些先前/早期的步骤中做一些更聪明的事情，因为我使用了许多不同的工具，并不是所有的工具都是 Java 或者可以很容易地包装成 Java）

所以我认为这有点令人难过，目标@处理文本的 Lucene 与单词/标记（字符序列）如此绑定，而文本不仅仅是单个/孤立的单词/标记的并置......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:51:57.830

你可以在你的类中`addDoc(w, MyOwnObject)`使用`MyOwnObject.toString()`和实现 a ，而不是尝试实现类似的东西吗？`@Override String toString()``MyOwnObject`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:15:00.380

Lucene 旨在索引文本，文本通常以字符序列的形式出现。因此，分析器框架就是分析文本并将其转换为标记。

现在你不知何故得到了一个令牌列表，现在想把它输入到 lucene 中。这不太适合 lucene 优化的用例。最简单的方法是将列表简单地表示为一个字符串（例如逗号分隔），然后实现一个简单的 TokenStream 来分隔您选择的任何分隔符。

现在真正的问题是您如何最终获得列表以及您是否可以在那里做一些更聪明的事情，但我缺乏对您的用例的洞察力来理解这一点。

# jquery - 将 fullcalendar 封装在我自己的插件中

> ID：11142226
> 
> 赞同：1
> 
> 时间：2012-06-21T16:05:59.300
> 
> 标签：jquery, fullcalendar

我实际上正在开发一个使用 FullCalender 的项目，并且我想添加其他功能，例如在事件的获取过程中实现 websocket，使用把手模板引擎进行事件渲染等，而无需修改其源代码。

[这里](https://stackoverflow.com/questions/2050985/best-way-to-extend-a-jquery-plugin)有一篇关于这个主题的帖子，似乎没有合适的解决方案。

我是 JavaScript 世界的新手，如果有人有一些解释如何完成此操作的网站示例，我将不胜感激。

谢谢您的回答 ！

PS：对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:22:02.117

您想要做的所有事情都已经在插件本身中提供了功能...查看[http://arshaw.com/fullcalendar/docs/](http://arshaw.com/fullcalendar/docs/)上的文档查看 eventRender 回调以添加有关事件的更多信息并查看多个源的 eventSources，然后是事件源对象以通过颜色区分它们。至于车把，我不确定那是什么，但可能有一种方法可以包含它。看文档

# qt - 将标题和图标图像添加到 QProgressDialog

> ID：11142227
> 
> 赞同：1
> 
> 时间：2012-06-21T16:06:00.050
> 
> 标签：qt, progressdialog

我正在尝试更改默认的 QProgressDialog 以显示更新状态：

```
 ASSERT( connect( &(updater.GetUpdateInstaller()),  SIGNAL(progressValue(int)),
                                        progressDialog, SLOT(setValue(int)) ) );
 ASSERT( connect( &(updater.GetUpdateInstaller()),  SIGNAL(progressText(QString)),
                                        progressDialog, SLOT(setLabelText(QString)) ) );

 //update the packages using the updater
 updater.UpdatePackages(); 
```

如何更改默认大小、添加图标图像和更改标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T17:27:52.547

您可以通过 更改对话框标题`setWindowTitle()`，设置它的大小和标签。标签可以包含 a`QString`或 a`QPixmap`但不能同时包含两者。

```
 QProgressDialog * dialog = new QProgressDialog(this) ;
     // fix dialog height
     dialog->setMinimumHeight(400);
     dialog->setMaximumHeight(400);
     // set dialog title
     dialog->setWindowTitle("Progress Dialog");
     QLabel * labl  = new QLabel(this);
     labl->setPixmap(QPixmap(":/images/icon.png"));
     labl->setText("text");
     dialog->setLabel(labl); 
```

如果您需要更广泛的灵活性，您应该将 a 子类化并在所有其他必要的小部件（如s 和s）旁边`QDialog`添加 a 。`QProgressBar``QLablel``QButtonGroup`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T17:34:48.483

我认为您可以通过创建自己的 QProgressDialog 子类并添加自己的 SLOTS 来使其工作。像这样的东西：

MyQProgressDialog.h

```
class MyQProgressDialog : public QProgressDialog
{
    Q_OBJECT

    public slots:
    setTitle(QString title);
    setIcon(QIcon icon);
    setSize(int w, int h);
}; 
```

MyQProgressDialog.cpp

```
void MyQProgressDialog::setTitle(QString title)
{
    setWindowTitle(title);
}
void MyQProgressDialog::setIcon(QIcon icon)
{
    setWindowIcon(icon)
}
void MyQProgressDialog::(int w, int h)
{
    setFixedSize(w, h);
} 
```

然后改变你的联系：

```
ASSERT( connect( &(updater.GetUpdateInstaller()), SIGNAL(progressValue(int)), progressDialog, SLOT(setValue(int))));
ASSERT( connect( &(updater.GetUpdateInstaller()), SIGNAL(progressText(QString)), progressDialog, SLOT(setLabelText(QString))));
ASSERT( connect( &(updater.GetUpdateInstaller()), SIGNAL(progressIcon(QIcon)), progressDialog, SLOT(setIcon(QIcon))));
ASSERT( connect( &(updater.GetUpdateInstaller()), SIGNAL(progressSize(int, int)), progressDialog, SLOT(setSize(int, int)));

//update the packages using the updater
updater.UpdatePackages(); 
```

这包括您在更新程序中创建 2 个新信号 progressIcon(QIcon) 和 progressSize(int, int)。

编辑：现在我想到了，如果你这样做的话，创建一个新的插槽来更新所有的东西可能会更容易，就像这样：

```
//MyQProgressDialog.h
class MyQProgressDialog : public QProgressDialog
{
    Q_OBJECT

    public slots:
    updateEverything(Int value, QString text, QString title, QIcon icon, Int w, Int h);
};

//MyQProgressDialog.cpp
void MyQProgressDialog::updateEverything(Int value, QString text, QString title, QIcon icon, Int w, Int h)
{
    setWindowTitle(title);
    setWindowIcon(icon);
    setFixedSize(w, h);
    setValue(value);
    setLabelText(text);
}

//Connection
ASSERT( connect( &(updater.GetUpdateInstaller()), SIGNAL(progress(int, QString, QString, QIcon, Int, Int)), progressDialog, SLOT(updateEverything(progress(int, QString, QString, QIcon, Int, Int))); 
```

但这意味着您不能再单独更新方面了。它可能很有用，具体取决于您在做什么。

# postgresql - 将 bigint 转换为 bytea，但交换字节顺序

> ID：11142235
> 
> 赞同：7
> 
> 时间：2012-06-21T16:06:16.267
> 
> 标签：postgresql, endianness, bytea

我有一个 PostgreSQL 表，我想将一列从一个字节更改为一个`bigint`字节`bytea`以保存更多数据。我正在考虑使用以下顺序：

1.  `alter table mytable add new_column`
2.  `update mytable set new_column = int8send(old_column)`
3.  `alter table drop old_column`
4.  `alter table rename new_column to old_column`

上面的序列有效，唯一的问题是我希望 中的字节序列`bytea`被*反转*。例如，如果一个值`old_column`是`0x1234567890abcdef`，上面的序列会生成`\0224Vx\220\253\315\357`，但我希望它是 `\357\315\253\220xV4\022`。似乎结果`bytea`使用来自 originating 的大端顺序`bigint`。

有没有一种简单的方法可以在不编写程序的情况下做到这一点？我`swap64()`在 PostgreSQL 中寻找一种函数，但没有找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T00:24:31.923

可以在没有 plpgsql 代码的情况下使用正则表达式提取十六进制表示进行字节交换。这是一个交换 bigint 常量的示例，假设`SET standard_conforming_strings to ON`（PG 9.1 的默认设置）

```
select regexp_replace( lpad(to_hex(x'123456789abcd'::bigint),16,'0'),
 '(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)',
 '\8\7\6\5\4\3\2\1'); 
```

它返回`cdab896745230100`。然后申请`decode(value, 'hex')`将其转换为字节。

整个类型转换实际上可以在一条 SQL 语句中完成：

```
ALTER TABLE mytable ALTER COLUMN old_column TYPE bytea
  USING decode(
    regexp_replace( lpad(to_hex(old_column), 16,'0'),
 '(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)(\w\w)',
 '\8\7\6\5\4\3\2\1')
  , 'hex'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-05T11:08:57.447

`bytea`这是我编写的一个纯 SQL 函数，用于反转-type 值的字节顺序：

```
CREATE OR REPLACE FUNCTION reverse_bytes_iter(bytes bytea, length int, midpoint int, index int)
RETURNS bytea AS
$$
  SELECT CASE WHEN index >= midpoint THEN bytes ELSE
    reverse_bytes_iter(
      set_byte(
        set_byte(bytes, index, get_byte(bytes, length-index)),
        length-index, get_byte(bytes, index)
      ),
      length, midpoint, index + 1
    )
  END;
$$ LANGUAGE SQL IMMUTABLE;

CREATE OR REPLACE FUNCTION reverse_bytes(bytes bytea) RETURNS bytea AS
'SELECT reverse_bytes_iter(bytes, octet_length(bytes)-1, octet_length(bytes)/2, 0)'
LANGUAGE SQL IMMUTABLE; 
```

我昨天刚写的，所以它没有经过特别好的测试和优化，但它似乎可以工作，至少在长度不超过 1k 的字节字符串上是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-21T19:24:24.630

我现在正在玩[`pageinspect`模块](http://www.postgresql.org/docs/current/interactive/pageinspect.html)，我也很想知道如何更改现有 bytea 值的字节顺序，这非常符合您的情况。

我想出了以下功能：

```
CREATE OR REPLACE FUNCTION reverse(bytea) RETURNS bytea AS $reverse$
    SELECT string_agg(byte,''::bytea)
      FROM (
        SELECT substr($1,i,1) byte
          FROM generate_series(length($1),1,-1) i) s
$reverse$ LANGUAGE sql; 
```

它非常简单，类似于文本[`reverse()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)函数：

```
WITH v(val) AS (
    VALUES ('\xaabbccdd'::bytea),('\x0123456789abcd'::bytea)
)
SELECT val, reverse(val)
  FROM v; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T18:32:51.523

[此功能](http://postgresql.1045698.n5.nabble.com/integer-to-little-endian-conversion-td1928406.html)虽然不完全是您想要的，但应该可以帮助您上路。

该函数的源代码在下面逐字复制。

```
CREATE OR REPLACE FUNCTION utils.int_littleendian(v_number integer) 
  RETURNS bytea AS 
$BODY$ 
DECLARE 
        v_textresult bytea; 
        v_temp int; 
        v_int int; 
        v_i int = 0; 
BEGIN 
        v_int = v_number; 
        v_textresult = '1234'; 
        WHILE(v_i < 4) LOOP 
                raise notice 'loop %',v_int; 
                v_temp := v_int%256; 
                v_int := v_int - v_temp; 
                v_int := v_int / 256; 
                SELECT set_byte(v_textresult,v_i,v_temp) INTO v_textresult; 
                v_i := v_i + 1; 
        END LOOP; 
        return v_textresult; 
END; 

$BODY$ 
  LANGUAGE 'plpgsql' VOLATILE 
  COST 100; 
```

# asp.net-mvc-3 - Azure 表、PartitionKeys 和 RowKeys 功能

> ID：11142238
> 
> 赞同：0
> 
> 时间：2012-06-21T16:06:25.600
> 
> 标签：asp.net-mvc-3, razor, azure-table-storage

所以刚刚开始使用 Azure 表 - 之前没有玩过它们，所以想看看。

我的理解是，我应该将其视为对象存储，而不是数据库，这很酷。但我在几点上有点困惑......

首先，如果我有一对多的对象关系，那么根对象的 partitionkey 应该是什么样的？例如，假设我有一个 University 对象，它与 Student 对象是一对多的，而 Student 对象与 Classes 是一对多的。对于一个新学生，它的partitionkey应该是'universityId'吗？还是'universityId + studentId'？我在 msdn 文档中读到 RowKey 应该是特定于我要添加的项目的 id，这听起来也像 studentId。

那么新大学的分区键和行键都只是大学ID吗？

我还读到 Azure Tables 不是用于存储列表 - 我认为它不是指存储包含列表的对象......？

任何人都可以使用 asp mvc 3 或 4 以及带有 azure 表的 razor 的代码示例链接吗？这是我的最终目标，看看真正知道自己在做什么的人会很酷:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:58:08.727

Azure Tables 更接近对象存储而不是数据库，这绝对是正确的。您确实具有查询非键列以及在查询中执行逻辑的能力。但是您不应该计划将这些功能用于任何对性能至关重要的事情。

因为只有在您至少指定一个 PartitionKey（最好是 RowKey 或范围或 RowKeys）时，查询才会很快，这会严重影响您的表布局方式。您一开始做出的决定将对以后的性能产生重大影响。作为一个粗略的类比，我喜欢把它们想象成一个主键为 (PartitionKey + RowKey) 的 SQL Server 表，它永远不会有另一个索引。这并不完全准确，但它会让你朝着正确的方向思考。

> 首先，如果我有一对多的对象关系，那么根对象的 partitionkey 应该是什么样的？

我可能会使用 UniversityId 作为 PartitionKey。这通常是一个安全的起点。

> 对于一个新学生，它的partitionkey应该是'universityId'吗？还是'universityId + studentId'？

你打算如何询问学生？如果您总是要拥有他们的 UniversityId 和 StudentId，我可能会将它们分别设为 PartitionKey 和 RowKey。如果您主要基于 StudentId 进行查询，我会使用它作为 PartitionKey。

> 新大学的 partitionkey 和 rowkey 都只是 universityId 吗？

这是一个可行的选择。你也可以为 RowKey 使用一个常数值（例如“UNIVERSITY”），如果你真的没有其他东西可以放在那里。

> 我还读到 Azure Tables 不是用于存储列表 - 我认为它不是指存储包含列表的对象......？

我不完全确定这意味着什么。显然，您可以将对象集合存储在表中，这就是它们的用途。您不能直接将列表存储在实体属性中。因此，如果您的 Student 具有 typee List 的属性，则不能直接存储。但是您可以将其序列化为 XML 或二进制文件，然后将其存储。

不幸的是，我手边没有任何代码示例。这可能是将您的数据逻辑抽象到它自己的层的好时机，而不是把它放在您的 MVC 控制器中。我们发现，一个抽象的数据层可以让你的逻辑单元测试变得非常容易。如果为表创建一些接口，那么只使用 List 和一些 LINQ 就可以很容易地创建模拟对象。

# sql - sql - 使用 DATEdiff 结果的总和不正确的总数

> ID：11142239
> 
> 赞同：1
> 
> 时间：2012-06-21T16:06:33.020
> 
> 标签：sql, sql-server

当我运行`DateDiff(dd, value1, value2)`它返回值列表

`56, 90, 61, 61, 58, 70, 193, 28, 143, 143, 0, 146`总共**1360**（我已经在excel中签入）

但是，当我使用时，`SUM(DateDiff(dd, value1, value2))`我返回值**1459**

我尝试`SUM`在几个不同的列表上运行代码，并比较第一种方法获得的手动总值。有时`SUM`价值更高，有时更低，似乎没有任何关系/比率。

有任何想法吗？谢谢。

# php - 使用 Preg_match 获取正好 2 个字符

> ID：11142258
> 
> 赞同：1
> 
> 时间：2012-06-21T16:07:35.143
> 
> 标签：php, regex, preg-match

我遇到了这个表达式的问题：

```
preg_match('#<file(.*)source-language="(.){2}"(.*)>#Ui', $xliff, $matches); 
```

我正在尝试将“en”去掉（那里可以有 2 个 az 字符）：

```
<file src="index.php" source-language="en" date="2012-10-10"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:09:33.480

您在捕获部分之外有量词。您需要在 () 中移动 {2} 以便两者都被捕获。

```
'#<file(.*)source-language="(.{2})"(.*)>#Ui' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:10:53.617

```
preg_match('#<file(.*)source-language="(..)"(.*)>#Ui', $xliff, $matches); 
```

如果您*知道*这将是两个字符，我认为这是一种更简单的方法。不过，它可能会更多，所以要小心。

您之前没有捕获这两个角色，因为它们`{2}`不在捕获范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:09:41.087

用正则表达式解析 HTML 是个坏主意。请尝试使用[文档对象模型](http://www.php.net/manual/en/book.dom.php)。

# jquery - 如何使用 Orbit 插件创建动态幻灯片

> ID：11142267
> 
> 赞同：0
> 
> 时间：2012-06-21T16:07:52.053
> 
> 标签：jquery, jquery-slider

我想在 Jquery 中创建动态幻灯片我正在写这段代码

```
 var ctx = new DynamicSlideShowEntities();
        var list = ctx.Pictures.ToList();
        string bb = JsonConvert.SerializeObject(list);
        context.Response.Write(bb); 
```

和js代码

```
<script type="text/javascript">
        $(function () {
            $.ajax({
                url: "Handler.ashx",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $.each(data, function (i, b) {
                        var str = '<img src="' + b.PicturePath + '" alt="' + b.PictureText + '"/>';
                        $("#featured").append(str);
                    });
                },
                dataType: "json"

            });

            $('#featured').orbit();
            alert($("#featured img").length);
        });
    </script> 
```

但是当运行项目时没有显示任何图片但是当使用firebug检查代码时显示此代码 ![在此处输入图像描述](../Images/eafd97489a7fac511edd52ba73494530.png)

请帮我。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:53:43.437

写这段代码

```
<script type="text/javascript">
        $(function () {
            $.ajax({
                url: "Handler.ashx",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $.each(data, function (i, b) {
                        var str = '<img src="' + b.PicturePath + '" alt="' + b.PictureText + '"/>';
                        $("#featured").append(str);
                    });

            $('#featured').orbit();
                },
                dataType: "json"

            });

            alert($("#featured img").length);
        });
    </script> 
```

# javascript - Javascript 中的 API 密钥安全性？

> ID：11142271
> 
> 赞同：1
> 
> 时间：2012-06-21T16:07:57.207
> 
> 标签：javascript, security, api, api-key

我正在托管一项需要消费者传递 API 密钥的服务。它可以被服务器端（Ruby、Python 等）和使用 Javascript 的客户端应用程序使用。

是否可以从仅限 Javascript 的应用程序安全地使用 API 密钥？目前我想不出任何方法来实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:16:10.940

如果密钥是敏感数据，则不会。

**用户可以看到所有**Javascript，因此即使是加密的密钥也可以被解密。如果密钥必须保密，则不得在任何客户端代码或内容中使用它。

如果密钥需要完全保密，则密钥的通信必须是服务器到服务器。大量 javascript 的 UI 仍然需要使用服务器作为中介来代理对您的服务的调用。除非客户愿意将他的服务密钥泄露给他的用户，否则一个完整的纯 JavaScript 用户界面不是一种选择。

# c# - 为什么我们需要在对象模型项目中使用 GetHashCode() 函数？

> ID：11142272
> 
> 赞同：2
> 
> 时间：2012-06-21T16:07:59.407
> 
> 标签：c#, .net, class, overriding, gethashcode

> **可能重复：**
> [为什么在 C# 中重写 Equals 方法时重写 GetHashCode 很重要？](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overriden-in-c)

我正在研究我的以下课程，但`Object Model`无法理解添加`GetHashCode()`.`Class`

## 样本类

```
public class SampleClass
{

    public int ID { get; set; }
    public String Name { get; set; }
    public String SSN_Number { get; set; }

    public override bool Equals(Object obj)
    {
        if (obj == null || GetType() != obj.GetType())
            return false;

        SampleClass cls = (SampleClass)obj;
        return (ID == cls.ID) &&
               (Name == cls.Name) &&
               (SSN_Number == cls.SSN_Number);
    }

    public override int GetHashCode()
    {
        return ID.GetHashCode() ^ Name.GetHashCode() ^ SSN_Number.GetHashCode();
    }
} 
```

假设我有一个`Sample Class`对象列表，我想获得一个特定的索引。然后`Equals()`可以帮我拿到那个记录。为什么要使用`GetHashCode()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:12:08.327

您需要同时处理这两个问题，因为 GetHashCode() 被许多集合实现（如 Dictionary）与 Equals 方法一起使用。重要的是，如果您重写 Equals 的实现，那么您必须重写 GetHashCode，使得根据您的新实现相等的任何两个对象也必须返回相同的哈希码。

如果他们不这样做，那么他们将无法在 Dictionary 中正常工作。一般没有那么难。我经常这样做的一种方法是获取我用于相等的对象的属性，并将它们连接到一个 String 对象中，然后返回 String.GetHashCode。

String 有一个很好的 GetHashCode 实现，它为各种值返回范围广泛的整数，从而在稀疏集合中产生良好的传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:13:43.723

`GetHashCode`当您的自定义类覆盖时，有必要提供覆盖`Equals`。如果省略`GetHashCode`，您将收到编译器警告，提示“公共类型覆盖 System.Object.Equals 但不覆盖 System.Object.GetHashCode”。

GetHashCode 基于适合散列算法和数据结构（如散列表）的当前实例返回一个值。相同类型且相等的两个对象必须返回相同的哈希码，以确保实例`System.Collections.HashTable`正确`System.Collections.Generic.Dictionary<TKey, TValue>`工作。

假设没有必要`GetHashCode`在您的自定义类中覆盖，基于哈希的集合将不得不使用基类' `Object.GetHashCode`，这可能不会为您的自定义类的所有实例提供正确的结果。

> 如果您观察您发布的代码，您的`Equals`方法会比较 `ID`，`Name`并且`SSN`对于 2 个实例返回相等结果并且相同的属性被用于您的`GetHashCode`方法中的散列算法 (ID^Name^SSN)。

# javascript - javascript 正则表达式在 IE8 中不起作用

> ID：11142273
> 
> 赞同：-3
> 
> 时间：2012-06-21T16:07:59.977
> 
> 标签：javascript, regex, internet-explorer

尝试在我的 javascript 函数中使用正则表达式替换 td 的内容。我正在用这个...

```
var re = /<td id="idreplaceme">.+?<\/td>/gi;
oldDivContent = oldDivContent.replace(re,'<td id="idreplaceme"></td>'); 
```

这适用于 FF 和 Chrome，但不适用于 IE8。如何在 IE8 中完成这项工作？

编辑： OldDivContent 是一个字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:13:20.460

为什么不`document.getElementById('idreplaceme').innerHTML = ''`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:12:14.280

尝试稍微不同的正则表达式：

```
var re = /<td id="idreplaceme">[^<]+<\/td>/gi;
oldDivContent = oldDivContent.replace(re,'<td id="idreplaceme"></td>'); 
```

或者假设律师不希望您发布 的任何部分`oldDivContent`，这里有一个 JavaScript 函数应该可以代替正则表达式：

```
function removeContentOfIdentifiedTDs(content, id) {
    var d = document.createElement('div'),
        tr = {},
        td = {},
        i = 0;
    d.innerHTML = content; //add content to div
    td = d.getElementsByTagName('td');
    for (i = 0; i < td.length; i += 1) {
        if (td[i].id === id) { //if id matches
            td[i].innerHTML = ''; //remove content
        }
    }
    return d.innerHTML; //return original html minus removed content
}
removeContentOfIdentifiedTDs(oldDivContent, 'idreplaceme'); 
```

# c# - 如何序列化/反序列化 C# WCF DataContract 到 XML

> ID：11142280
> 
> 赞同：13
> 
> 时间：2012-06-21T16:08:28.370
> 
> 标签：c#, wcf, xml-serialization, deserialization, datacontract

我正在开发一个 WCF 服务，它将被多个不同的客户端应用程序使用。为了使一项功能正常工作，服务器需要将 XML 文件读入 C# DataContract，然后将其传递给相关客户端。据我从 MSDN 网站了解，这是可能的，但我找不到任何完整的示例。特别是，该网站谈到了一个我还没有完全理解的“流”参数。

我的数据合同有一个属性字段，它是另一个具有多个简单属性字段的数据合同的列表。

例如

```
 [DataContract]
    public class MyClass1 {
        [DataMember]
        public string name;
        [DataMember]
        public int age;
    }

    [DataContract]
    public class MyClass2 {
        [DataMember]
        public List<MyClass1> myClass1List;
    } 
```

我的课看起来像这样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T16:11:13.300

这是一个例子

```
MyClass1 obj = new MyClass1();
DataContractSerializer dcs = new DataContractSerializer(typeof(MyClass1));

using (Stream stream = new FileStream(@"C:\tmp\file.xml", FileMode.Create, FileAccess.Write))
{
    using (XmlDictionaryWriter writer = 
        XmlDictionaryWriter.CreateTextWriter(stream, Encoding.UTF8))
    {
        writer.WriteStartDocument();
        dcs.WriteObject(writer, obj);
    }
} 
```

* * *

```
Books b = new Books();

DataContractSerializer dcs = new DataContractSerializer(typeof(Books));

try
{
    Stream fs = new FileStream(@"C:\Users\temelm\Desktop\XmlFile.xml", FileMode.Create, FileAccess.Write);

    XmlDictionaryWriter xdw = XmlDictionaryWriter.CreateTextWriter(fs, Encoding.UTF8);
    xdw.WriteStartDocument();
    dcs.WriteObject(xdw, b);
    xdw.Close();
    fs.Flush();
    fs.Close();
}
catch (Exception e)
{
    s += e.Message + "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-07T08:19:44.887

这可能对您有用。当您需要 XElement 时。例如，当您将节点附加到 XDocument 或 replece 此文档的 XElement 时。

```
private XElement objectToXElement(SomeContractType obj)
        {
            DataContractSerializer dcs = new DataContractSerializer(typeof(SomeContractType);

            var ms = new MemoryStream();
            var xw = XmlWriter.Create(ms);
            dcs.WriteObject(xw, obj);
            xw.Flush();
            xw.Close();
            ms.Position = 0;
            XElement xe = XElement.Load(ms);

            return xe;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:14:58.547

NetDataContractSerializer 解决了使用 WCF 时的一大堆问题。

请参阅此处[MSDN NetDataContractSerializer](http://msdn.microsoft.com/de-de/library/system.runtime.serialization.netdatacontractserializer.aspx)

它通常用于包装各种对象并将其传递给 WCF。

您可以使用它将对象包装到 a 中`byte[]`并通过 WCF 传输它，在服务器端，您可以轻松地反序列化对象并对它们做任何您想做的事情。

以下是关于如何正确使用此序列化程序的讨论： [MSDN Social](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/f30ecd17-cac0-4cdc-8142-90b5f411936b/)

那里还提供了代码片段！

# jquery - 将单选按钮值输入 jQuery

> ID：11142281
> 
> 赞同：-1
> 
> 时间：2012-06-21T16:08:28.237
> 
> 标签：jquery, radio-button

我有一个表格，每行有两个单选按钮，这些按钮是批准和拒绝，所以对于每一行它们都有不同的名称。

当我将所选单选按钮的值输入 jquery 时，第一个选择将影响其余的，这意味着如果我选择第一个批准，无论我为其余选择什么，它们的状态都会变为已批准！

以下是代码：

jQuery：

```
var status=$('input:radio[name=status_input_+ID]:checked').val(); 
```

HTML：

```
<input name="status_input_<?php echo $id; ?>" type="radio" value="Approved">
Approve
<input name="status_input_<?php echo $id; ?>" type="radio" value="Rejected">
Reject 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:26:22.007

用这个 ：

```
var status=$('input:radio[name="status_input_'+ID+'"]:checked').val(); 
```

值应该用引号括起来。参考[这个链接](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:39:01.637

您没有在代码中正确放置单选按钮名称，您应该在名称中使用引号。

```
var status=$('input:radio[name="status_input_'+ID+'"]:checked').val(); 
```

我已经编辑了你的[小提琴](http://jsfiddle.net/kdQEN/1/)。核实。

# xml - Actionscript 3 中的 XML？

> ID：11142285
> 
> 赞同：0
> 
> 时间：2012-06-21T16:08:50.023
> 
> 标签：xml, actionscript-3, load, xmllist

我一直在尝试从看起来像这样的 XML 文件中获取曲目

```
<?xml version="1.0"?>
<tracklist>
    <track ID="4" title="Track01" artist="Artist01" url="" length="" coverURL=""/>
    <track ID="1" title="Track02" artist="Artist02" url="" length="" coverURL=""/>
    <track ID="8" title="Track03" artist="Artist03" url="" length="" coverURL=""/>
</tracklist> 
```

到 ActionScript 3 中的数组中。

我想不通。

我试过这样：

```
var myLoader:URLLoader = new URLLoader();
myLoader.load(new URLRequest("http://localhost:8888/Fabse/src/getCommonPlaylist.php"));
myLoader.addEventListener(Event.COMPLETE, processXML);

  function processXML(e:Event):void
  {
    var xml:XML= new XML(e.target.data);
    xml.ignoreWhitespace=true;

    var list:XMLList = XMLList(xml.track);

   } 
```

然后我尝试了十亿种方法将数据从列表或“xml”变量中取出，只有空白痕迹，但没有任何成功。唯一有效的是 trace(xml.track) ，它跟踪所有跟踪对象。

我究竟做错了什么？

先感谢您，

马泰奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:47:08.543

您可以使用 foreach 循环一个 XML 对象并将值分配给您的数组。在您的情况下，您必须调用 xml.tracklist.track[0]、xml.tracklist.track[1] 等...才能获得相应的曲目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:09:22.233

要获得单一内容，请尝试..

```
trace(xml.elements("track").length()); // 3
trace(xml.elements("track")[0].toXMLString()); // <track ID="4" title="Track01" artist="Artist01" url="" length="" coverURL=""/>
trace(xml.name().localName); // tracklist
trace(xml.attributes()[0]); // 4
trace(xml.attributes()[0].name()); // ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:56:54.187

我认为你在做正确的事。请记住，您有空的 XML 节点并且您正在使用属性。

默认情况下，我认为 toString() 使用文本节点值，因此您可能希望在调试时使用[toXMLString() 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html#toXMLString%28%29)

尝试这样的事情：

```
var myLoader:URLLoader = new URLLoader();
myLoader.load(new URLRequest("http://localhost:8888/Fabse/src/getCommonPlaylist.php"));
myLoader.addEventListener(Event.COMPLETE, processXML);

     function processXML(e:Event):void
      {
        var xml:XML= new XML(e.target.data);
        xml.ignoreWhitespace=true;

        var tracks:XMLList = xml.track;
        trace("tracks\n",tracks);
        for each(var track:XML in tracks) trace('track',track,'track.toXMLString()',track.toXMLString());

       } 
```

请注意每个轨道的跟踪，如果我只是这样做`track`，则不会显示任何内容，尽管节点在那里，但是当使用 track.toXMString() 时，节点的所有 xml 内容（不仅仅是文本内容）都会显示出来。

# maven - Maven 将多个战争部署到嵌入式服务器以进行集成测试

> ID：11142287
> 
> 赞同：10
> 
> 时间：2012-06-21T16:08:51.313
> 
> 标签：maven, integration-testing, maven-failsafe-plugin, embedded-server

我在嵌入式服务器上为自己的集成测试运行 maven war 项目没有问题，但现在我需要运行多个 war 并从不同的项目进行测试。

我想设置以下场景...

我的本地工作区中有两个 Maven 战争项目，分别称为 War1 和 War2。我想要第三个 Maven 项目 WarIntegration，它只包含集成测试并执行以下操作：

1.  包战争1
2.  包战争2
3.  启动嵌入式服务器
4.  将两个战争部署到同一个嵌入式服务器
5.  运行包含在 WarIntegration 中的集成测试（这将对 War1 和 War2 进行 http 调用）
6.  停止嵌入式服务器

这可能吗？什么插件设置可以实现这一点？WarIntergration 应该是一个什么样的项目（打包）？War1 和 War2 应该是 WarIntegration 或依赖项中的模块吗？是否可以将所有配置添加到 WarIntegration 项目中，还是必须将其分布在各个项目中？

这类似于这个问题，除了我们必须使用由项目启动和停止的嵌入式服务器（可能在我们运行验证时）并且我们需要一个单独的项目进行集成测试： [我有一个多模块 Maven 2 POM，它有两个 WAR，如何配置它以在运行测试之前部署两个战争？](https://stackoverflow.com/questions/9315904/i-have-a-multi-module-maven-2-pom-that-has-two-wars-how-can-i-configure-it-to-d)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:53:46.020

我能够使用 cargo-maven2-plugin 实现这一点。

以下是感兴趣的任何人的相关 pom 部分...

```
...
<groupId>com.test</groupId>
<artifactId>webapp-integration</artifactId>
<packaging>jar</packaging>
<version>1.0-SNAPSHOT</version>
...
<dependencies>
        ...
        <dependency>
            <artifactId>webapp1</artifactId>
            <groupId>com.test</groupId>
            <version>1.0</version>
            <type>war</type>
        </dependency>
        <dependency>
            <groupId>webapp2</groupId>
            <artifactId>com.test</artifactId>
            <version>1.0-SNAPSHOT</version>
            <type>war</type>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <version>1.2.2</version>
                <configuration>
                    <container>
                        <containerId>jetty6x</containerId>
                        <type>embedded</type>
                    </container>
                    <configuration>
                        <type>standalone</type>
                        <properties>
                            <cargo.servlet.port>8085</cargo.servlet.port>
                        </properties>
                        <deployables>
                            <deployable>
                                <artifactId>webapp1</artifactId>
                                <groupId>com.test</groupId>
                                <type>war</type>
                                <pingURL>http://localhost:8085/testapp/</pingURL>
                                <properties>
                                    <context>testapp</context>
                                </properties>
                            </deployable>
                            <deployable>
                                <artifactId>webapp2</artifactId>
                                <groupId>com.test</groupId>
                                <type>war</type>
                                <pingURL>http://localhost:8085/testapp2/</pingURL>
                                <properties>
                                    <context>testapp2</context>
                                </properties>
                            </deployable>
                        </deployables>
                    </configuration>
                </configuration>
                <executions>
                    <execution>
                        <id>start-server</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>start</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>stop-server</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.12</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.surefire</groupId>
                        <artifactId>surefire-junit47</artifactId>
                        <version>2.12</version>
                    </dependency>
                </dependencies>
                <configuration>
                    <groups>com.test.integration.IntegrationTestMarker</groups>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>integration-test</goal>
                        </goals>
                        <configuration>
                            <includes>
                                <include>**/*.class</include>
                            </includes>
                            <skipTests>false</skipTests>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-30T08:19:14.860

注意，DEPLOYABLES 元素是插件/配置的子元素，而不是插件/配置/配置。

上面的例子应该是：

```
<plugins>
        <plugin>
            <groupId>org.codehaus.cargo</groupId>
            <artifactId>cargo-maven2-plugin</artifactId>
            <version>1.2.2</version>
            <configuration>
                <container>...</container>
                <configuration>
                    <type>standalone</type>
                    <properties>
                        <cargo.servlet.port>8085</cargo.servlet.port>
                    </properties>
                </configuration>
                <deployables>
                     <deployable>
                            <artifactId>webapp1</artifactId>
                            <groupId>com.test</groupId>
                            <type>war</type>
                            <pingURL>http://localhost:8085/testapp/</pingURL>
                            <properties>
                                <context>testapp</context>
                            </properties>
                      </deployable>
                      <deployable>
                            <artifactId>webapp2</artifactId>
                            <groupId>com.test</groupId>
                            <type>war</type>
                            <pingURL>http://localhost:8085/testapp2/</pingURL>
                            <properties>
                                <context>testapp2</context>
                            </properties>
                      </deployable>
                 </deployables>
             </configuration>
        </plugin>
 </plugins> 
```

希望有帮助！

# python - 同时连接linux和windows的路径

> ID：11142288
> 
> 赞同：2
> 
> 时间：2012-06-21T16:08:56.313
> 
> 标签：python, path, concatenation

我有一个脚本（python）应该建立两个路径 - 一个是 Linux 形式（本地），另一个是 Windows 形式（Windows 共享）

如果重要的话，该脚本正在 Linux 下运行。

os.path 对 Windows 路径没有帮助。对于这种情况，python 有帮助吗？

任何消除额外分隔符的智能连接都将有助于...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T16:17:21.803

您可以导入和使用特定于操作系统的路径实现：

```
import ntpath, posixpath

assert ntpath.join("a", "b") == r"a\b"
assert posixpath.join("a", "b") == "a/b" 
```

当您导入 os.path 时，它会检查当前操作系统以决定使用这些模块中的哪一个，但您可以根据需要直接使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:17:23.763

根据您使用的平台，该`os`模块将使用`import ntpath as path`(Windows) 或`import posixpath as path`(*nix)。您可以直接导入这些模块来进行路径操作，就好像您在不同的平台上一样：

```
In [1]: import ntpath

In [2]: ntpath.join('dir', 'file')
Out[2]: 'dir\\file'

In [3]: import posixpath

In [4]: posixpath.join('dir', 'file')
Out[4]: 'dir/file' 
```

# sharepoint - 尝试使用 powershell 修改 sharepoint 中提交的项目

> ID：11142290
> 
> 赞同：2
> 
> 时间：2012-06-21T16:09:09.637
> 
> 标签：sharepoint, powershell

这是我写的一些代码：

```
Add-PSSnapin Microsoft.SharePoint.PowerShell

$webURL = "http://nycs00058260/sites/usitp"
$lists = "OsEM1","OsEM2","OsEM3","OsEM4"
$web = Get-SPWeb -Identity "http://nycs00058260/sites/usitp"
foreach($list in $lists)
   ... ...
   Write-Host $item["Title"]
   #$item["Item"]=$item["Title"] +" ,"+$webURL+"\"+$filename
   $item["Item"]="$tmpValue"+" ,$item[Title]"   
   $item.Update()
  }
}
} 
```

它说：无法索引到 MicroSoft.SharePoint.SPListItem 类型的对象。当我更改 $item["Item"] 值时出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:42:41.377

导致此行为的原因有几个：

*   您的权限与更改项目所需的权限不匹配。如果您拥有 PowerShell 权限，通常情况并非如此。
*   您的列表以某种方式损坏。这可能与网站栏、内容类型、列表本身或视图有关。如果您创建并且没有更新列表架构（定义），它不会让您编辑它。
*   您没有将 SPWeb（站点）对象的 AllowUnsafeUpdates 设置为 on。

所有这三个问题通常都有更好的（匹配的）错误消息，但有时 SharePoint 不会在错误消息中为您提供所需的所有信息。

如果您需要更多详细信息，请询问。

# php - 发布到时间线 - 具有过去的日期

> ID：11142293
> 
> 赞同：3
> 
> 时间：2012-06-21T16:09:21.260
> 
> 标签：php, facebook, facebook-graph-api, post, facebook-opengraph

（菜鸟问题）使用 PHP SDK 附带的 example.php，我可以成功发布到我的时间线。

我希望能够设置日期，所以我补充说：

```
:
:
 'created_time' => "2012-06-21T13:46:10+0000",
 'updated_time' => "2012-02-19T14:46:10+0000",
 'actions' => array(
             array(
                 'name' => 'Get Search',
                 'link' => 'http://www.google.com'
             )
     )
     );

     $result = $facebook->api('/me/feed/', 'post', $attachment);
     ?>
     <?php endif ?> 
```

但是 created_time 被忽略，帖子总是“现在”。我四处寻找解决方案，但一无所获。我做错了什么，是错字，还是不可能这样？

在网上看，我确实找到了有关在过去放置“动作”的文章 - 例如：[如何通过图形 api 将自定义日期添加到 facebook 时间轴](https://stackoverflow.com/questions/7641055/how-can-i-add-a-custom-date-to-the-facebook-timeline-through-graph-api?rq=1)

这是（唯一的？）方法，创建一个“发布”操作，，。与 start_time 等？任何有关如何执行此操作的链接（在 PHP 中？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:14:21.527

您只能使用 API[创建过去的操作，不能创建帖子。](http://developers.facebook.com/docs/opengraph/publish-past-actions/)但是，您可以使用活动日志手动更改帖子的日期 - 看起来这个功能还不能通过 API 使用。

# java - java.util.logging.Logger 使用非常具体的 ResourceBundle 加载行为。为什么？

> ID：11142297
> 
> 赞同：3
> 
> 时间：2012-06-21T16:09:50.777
> 
> 标签：java, classloader, java.util.logging

该类以非常具体的方式`java.util.logging.Logger`定位`ResourceBundle`实例。我有兴趣了解类加载行为。

丢弃缓存等，首先`Logger`该类尝试使用[上下文类加载器](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getContextClassLoader%28%29)（这很好，也是我所期望的）。

如果该类加载器无法加载`ResourceBundle`（使用[`ResourceBundle#getBundle(String, Locale, ClassLoader)`call](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String,%20java.util.Locale,%20java.lang.ClassLoader%29)），则接下来使用系统类加载器。这让我有点困惑；我假设调用者的类加载器将是下一个。这是一种优化，还是为了处理一些特定的用例，或者......？

最后，如果系统类加载器无法加载`ResourceBundle`，则推断调用堆栈（！）被遍历，并且该堆栈中的每个类都被挖掘*为其*类加载器，并依次尝试每个类。

对于我遇到或必须编写的所有各种类加载场景，这个对我来说最没有意义。我怀疑这与`Logger`' 对任何给定系统的潜在中心性有关，但我欢迎任何解释为什么选择这个特定算法。

（另外，一个不值得自己输入的附带问题：在 JVM 中是否存在[上下文类加载器](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getContextClassLoader%28%29)所在的任何情况`null`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:49:22.150

我的猜测是他们正在考虑以一种方式支持[J2EE 类加载器](http://www.objectsource.com/j2eechapters/Ch21-ClassLoaders_and_J2EE.htm)层次结构及其在每个应用程序服务器中的不同实现。

此外，如果我们检查[JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Logger.html)，我们有

> 作为初始实现中的临时转换功能，如果 Logger 无法从 ContextClassLoader 或 SystemClassLoader 中找到 ResourceBundle，Logger 还将向上搜索类堆栈并使用连续调用 ClassLoaders 来尝试定位 ResourceBundle。（**这个调用栈搜索是为了让容器过渡到使用 ContextClassLoaders 并且很可能在未来的版本中被移除。**）

# c++ - typedef 中的 typedef

> ID：11142300
> 
> 赞同：0
> 
> 时间：2012-06-21T16:10:02.870
> 
> 标签：c++

我想在 typedef 中有一个 typedef 并想知道是否可能？

这是我要实现的目标的示例。

```
typedef std::vector<TypeA>*                           pVparticle;
typedef typename std::vector<TypeA>::iterator         VparticleItr;
typedef std::map<pVparticle, Neutrino* >*             pMapPartpNu;

//Compiler Error
typedef NeutrinoFunctor< VparticleItr,  pMapPartpNu > partNuFunctor; 
```

这是我从 gnu gcc 版本 4.1.2 收到的编译器错误

```
ISO C++ forbids declaration of 'NeutrinoFunctor' with no type 
```

看起来我正在尝试的事情是不可能的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:12:43.287

这是不可能的，因为您`NeutrinoFunctor`在 typedef 之前没有声明。

以下代码在 typedefs 中使用 typedefs 是合法的：

```
#include <string>
#include <vector>

template <typename T1, typename T2> struct Foo {};

typedef std::vector<int> IntVector;
typedef std::string String;

typedef Foo<String, IntVector> Bar;

int main() {

  Bar b;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:14:46.230

可能是`typedef`另一个`typedef`（如果这甚至是正确的措辞），因为编译器认为它只是另一个`type`。但是，您的编译器错误是由于它不知道什么是`NeutrinoFunctor`.

# extjs4.1 - ExtJS 4.1 - XTemplate 中的工具提示

> ID：11142304
> 
> 赞同：0
> 
> 时间：2012-06-21T16:10:12.090
> 
> 标签：extjs4.1

我有一个树形网格“模板列”，它根据 XTemplate 中的条件显示图像。

但是，我还希望在鼠标悬停图像时显示 html 格式的工具提示。我已经通过渲染器中的 ext:qtip 元数据属性使用 Ext JS 3.x 完成了此操作，但无法弄清楚如何使用 tpl 在 Ext JS 4.1 中执行此操作，并且在我的搜索中没有找到任何内容。

这是我必须根据记录值显示图像的内容：

```
var myTemplate = new Ext.XTemplate( 
    '<tpl if="p &gt; 0">',
        '<img src="exclamation.gif" height="16" width="16"/>',
    '</tpl>' 
);

var schedTree = Ext.create('Ext.tree.Panel', {
    ...
    columns:[
        { header:' ', dataIndex:'p',  xtype:'templatecolumn', tpl:myTemplate }
    ]
} 
```

有没有人这样做或有任何建议？有一个更好的方法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:36:58.913

这不是使用 XTemplate 的方法，但这个方法对我有用：

```
{
    text : 'Zdj', 
    width: 40, 
    align : 'center', 
    dataIndex : 'Name', 
    sortable : false, 
    resizable: false,
    renderer: function (v, m, r) {
        if(r.get('leaf')==true) {
            m.tdAttr = 'data-qtip="<img src=services/Images.ashx?id='+r.get('id')+' width=60px height=60px>"';
            return '<img src="services/Images.ashx?id='+r.get('id')+'" width="25px" height="25px"/>';
        }
    }
}, 
```

在我的示例中，我在工具提示中显示了更大的图像，但显示 HTML 格式的工具提示没有问题。
您可以向渲染器添加条件，我认为 XTemplate 可以做的更多。

您的小图像应该返回到 m.tdAttr 的行和工具提示内容。

您可以在此处阅读有关渲染器功能的更多信息：http: //docs.sencha.com/ext-js/4-1/#! [/api/Ext.grid.column.Column-cfg-renderer](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)

希望这可以帮助 ：）

# c# - 循环遍历列中的每一行找到一个空值并在数据表中替换 c#

> ID：11142305
> 
> 赞同：0
> 
> 时间：2012-06-21T16:10:24.003
> 
> 标签：c#, .net

我正在尝试编写一个 linq 查询或其他方式来循环遍历数据表中一列中的所有行。

数据列标题在高级中是已知的。当它循环时，我希望能够检查每个单元格中的空值，如果找到，则放入默认值，在下面的情况下是 [dob]。

下面是一个数据表的示例，我希望能够遍历 [dob] 列并查找空值并将其替换为默认值，例如 01/01/1901。

```
[firstName],     [lastname],     [dob]
tester,          testerSurname,  null
tester2,         tester2Surname, 25/04/1876

 foreach (DataColumn column in table.Columns)
 {
      if (table.Rows.OfType<DataRow>().Any(r => r.IsNull(column)))
      {

      } 
```

我已经从上面开始，但找不到获取值并将其分配给另一个值，但可以找到 null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:15:26.213

您不会遍历列中的每一行，您只需遍历行并检查循环中每一行的列：

```
DataTable dt;
string col = "ColumnIAmCheckingForANullValue";
string def = "My Default Value for NULL";

foreach (DataRow row in dt.Rows) {
    if (string.IsNullOrEmpty(row[col].ToString())) {
        row[col] = def;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:17:33.820

如果您希望执行批量数据库更新，Linq 查询并不是最好的方法。您最好编写一个 SQL 查询来执行更新 - [COALESCE 运算符](http://msdn.microsoft.com/en-us/library/ms190349.aspx)将成为您的朋友。

```
UPDATE tablename
SET dob = COALESCE(dob, '1901/01/01') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:22:56.463

如果您使用数据表，那么您还可以循环遍历一行中的列

```
 foreach (DataRow dr in table.Rows)
        {

            foreach (DataColumn clm in table.Columns)
            {
                if (dr[clm] == DBNull.Value)
                {
                    dr[clm] = GetDefaultValueForColumn[clm.ColumnName];
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:29:12.350

如果检查 DBNull，来自[mikeschuld 答案](https://stackoverflow.com/questions/11142305/loop-through-each-row-in-a-column-find-a-null-value-and-replace-in-a-datatable-c/11142387#11142387)的代码应该可以工作：

```
DataTable dt;
string col = "ColumnIAmCheckingForANullValue";
string anotherValue = "My Default Value for NULL";

foreach (DataRow row in dt.Rows) {
    if (row[col] is DBNull) {
        row[col] = anotherValue;
    }
} 
```

您可以使用查询从数据中删除 NULL

```
SELECT ISNULL(col, '') FROM MyTable 
```

# jquery - 带有锚点和相应 div 的鼠标悬停效果

> ID：11142306
> 
> 赞同：0
> 
> 时间：2012-06-21T16:10:26.403
> 
> 标签：jquery, css, jquery-ui

```
$(document).ready(function(){
$("a").mouseover(function(){
var currentId = $(this).attr('id')+"S";
$(".stay:visible").hide("explode",[],200);
$("#" + currentId).show("bounce");
});
});

.stay { 
display:none;
      }
<body>
<div id="parent">
  <a id="aaa"></a>
  <a id="bbb"></a>
  <a id="ccc"></a>
  <div id="holder">
     <div class="stay" style="display:inline"></div><!--Starting Div, leaving on first mouseover-->
     <div class="stay" id="aaaS"></div>
     <div class="stay" id="bbbS"></div>
     <div class="stay" id="cccS"></div>
  </div>
</div>
</body> 
```

我有我的锚点和每个对应的 div 和一个共享的 class="stay"。div 一开始是隐藏的，在鼠标悬停在相应的锚点上时，我希望它们显示在持有者 div 中。div 包含一个图像，当我将其全部单独编写脚本时，快速鼠标将导致所有 div 堆叠在页面下方。尝试 .stop() 和 .clearqueue() 无济于事，所以我想尝试一个捕获所有过程。问题是它没有将锚识别为我要求其 ID 的元素。我真的很了解这一点，因此不胜感激。编辑 - 我现在选择了 div，但是如果我将鼠标悬停在锚点上太快，它们仍然会堆叠页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:43:20.827

最终使用[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html) 对结果非常满意。

# compact-framework - Gray unusable area on CE Winforms form

> ID：11142315
> 
> 赞同：0
> 
> 时间：2012-06-21T16:11:00.757
> 
> 标签：compact-framework, windows-ce

Did test app for Windows CE Winforms App.

Main form has about 30 px gray area between the form header and the actual content.

On the device itself (not emulator). CF 3.5 CE 6.0

What to do?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:14:04.000

Remove the Menu from the Form or add MenuItems to it.

![enter image description here](../Images/a86a0a9eb5c2d4d12d471c2de845518d.png)

# c++ - 如何修复boost安装？

> ID：11142316
> 
> 赞同：0
> 
> 时间：2012-06-21T16:11:05.343
> 
> 标签：c++, ubuntu, boost, build

由于我看到了许多错误，我已经删除了以下路径中的所有头文件

```
/usr/include/boost 
```

以下是我的安装过程...

```
cd boost_1_49_0
./bootstrap.sh --prefix=$SRC_HEAD/third-party/build/boost_1_49_0
./b2 install 
```

成功安装后，我仍然看不到任何包含文件：/usr/include/boost！有人可以请教吗，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:16:57.353

好吧，正如这表明的那样

```
./bootstrap.sh --prefix=$SRC_HEAD/third-party/build/boost_1_49_0 
```

它将安装到`$SRC_HEAD/third-party/build/boost_1_49_0`中，这并不`/usr/include/boost`明显。

但我不建议您手动执行此操作。您使用的是哪个发行版？您应该使用它附带的包管理器来执行此任务（重新安装 boost）。

# sql-server - TSQL - 更好的 INT 转换函数

> ID：11142323
> 
> 赞同：2
> 
> 时间：2012-06-21T16:11:24.563
> 
> 标签：sql-server, tsql, type-conversion

我想知道是否有更好的方法将 Varchar 解析为 TSQL / SQL Server 中的 Int。我说“解析”是因为我需要比 CAST/CONVERT 系统功能更强大的东西；当解析失败时返回 NULL 甚至是“默认”值特别有用。

所以这是我现在使用的函数，最初是从某人的SQL博客中获得的（甚至不记得具体是谁）......

```
更改功能 [dbo].[udf_ToNumber]
(
    @Str varchar(最大值)
)
返回整数
作为
开始
    声明@Result int

    SET @Str = LTRIM(RTRIM(@Str))

    IF (@Str='' 或 @Str 为空
        或 ISNUMERIC(@Str)=0
        或 @Str LIKE '%[^-+ 0-9]%'
        或 @Str IN ('.', '-', '+', '^')
        )
        SET @Result = NULL
    别的
    IF (CAST(@Str AS NUMERIC(38,0)) 不在 -2147483648 和 2147483647 之间。)
        SET @Result = NULL
    别的
        SET @Result = CAST(@Str AS int)

    返回@结果
结尾

```

（并且您可以在末尾添加一行，例如“如果@Result 为空，则设置@Result =”或类似的内容）。

这不是很有效，因为在 JOIN 或 WHERE-IN-SELECT 中使用它——比如 LEFT 列是 INT，RIGHT 是 VARCHAR，我尝试解析 RIGHT——在任何非常大的数据集上，都需要比我先将 LEFT (INT) 列转换为 VARCHAR 然后执行 JOIN 长得多。

无论如何，我“理想地”知道，如果我的表/数据类型被适当地创建和填充，我首先不需要做这种事情，但我们都知道理想世界有时与现实相去甚远，所以幽默我。谢谢！

编辑：SQL Server 2005 和 2008 版；运行 2005 的盒子将很快升级，因此 2008 特定的答案很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:40:57.423

以我的经验，标量 udf 在较大的数据集上表现不佳；作为一种解决方法，您可以尝试以下两个选项之一（我不确定它们中的任何一个是否会特别好）：

1.  将函数的逻辑嵌入到 join 本身中，如下所示：

    ```
    SELECT columnlist
    FROM a JOIN b ON a.INT = (SELECT  CASE WHEN ( b.varchar= ''
                        OR b.varchar IS NULL
                        OR ISNUMERIC(b.varchar) = 0
                        OR b.varchar LIKE '%[^-+ 0-9]%'
                        OR b.varchar IN ( '.', '-', '+', '^' )
                      ) THEN NULL
                 WHEN CAST(b.varchar AS NUMERIC(38, 0)) NOT BETWEEN -2147483648.
                                                   AND         2147483647.
                 THEN NULL
                 ELSE CAST (b.varchar AS INT)
            END) 
    ```

2.  将您的用户定义函数更改为内联表值函数并使用 CROSS APPLY 语法：

    ```
    CREATE FUNCTION udf_ToInt
    (   
        @str VARCHAR(MAX)
    )
    RETURNS TABLE 
    AS
    RETURN 
    (
        SELECT  CASE WHEN ( @Str = ''
                        OR @Str IS NULL
                        OR ISNUMERIC(@Str) = 0
                        OR @Str LIKE '%[^-+ 0-9]%'
                        OR @Str IN ( '.', '-', '+', '^' )
                      ) THEN NULL
                 WHEN CAST(@Str AS NUMERIC(38, 0)) NOT BETWEEN -2147483648.
                                                   AND         2147483647.
                 THEN NULL
                 ELSE CAST (@Str AS INT) as IntVal
            END           

    )
    GO

    SELECT columnlist
    FROM b
    CROSS APPLY udf_ToInt(b.varchar) t
    JOIN a ON t.IntVal = a.Int 
    ```

可能更容易转换为 VARCHAR 并进行比较:)

# c# - 如何从 IP 或 serverName 获取 Directory Server 的 BaseDN

> ID：11142324
> 
> 赞同：0
> 
> 时间：2012-06-21T16:11:33.177
> 
> 标签：c#, .net, active-directory, openldap

我正在研究 LDAP，我已经在我的本地机器上安装了 OpenLDAP，并创建了一个 RootDSE 作为 dc=wave,dc=com。

我正在尝试使用以下代码获取此 baseDN：

```
DirectoryEntry directoryEntry = new DirectoryEntry(string.Format("LDAP://{0}", server), "CN=Manager,dc=wave,dc=com", "secret");
string dnPath;
try
{
    dnPath = directoryEntry.Properties["distinguishedName"].Value.ToString();
}
catch
{
    dnPath = "";
} 
```

但它总是属于例外，为什么我需要为用户名传递整个 dn？

同样的事情，如果我尝试使用 Active Directory 服务器，它可以完美运行，我也不需要为用户名传递整个 dn。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:18:14.140

System.DirectoryServices 命名空间实际上只适用于 Active Directory。在使用任何其他目录时，您应该切换到使用 System.DirectoryServices.Protocols。您可能会发现在使用 AD 时它会更好。

# ruby-on-rails-3 - 通过索引使用 has_many 思考 Sphinx 就好了，但保存项目崩溃

> ID：11142327
> 
> 赞同：0
> 
> 时间：2012-06-21T16:11:36.983
> 
> 标签：ruby-on-rails-3, thinking-sphinx

认为 sphinx 索引很好，并且查找在我的属性上效果很好。但是，我保存模型实例的尝试崩溃了。

```
class Location < ActiveRecord::Base
  has_many :operation_intervals_locations
  has_many :operation_intervals, :through => :operation_intervals_locations

  define_index "location" do
    # indexes here...

    # tried this syntax
    has operation_intervals(:start_int), :type => :integer 
    has operation_intervals(:end_int), :type => :integer
    has operation_intervals(:days_int), :type => :integer

    # and this one
    has operation_intervals.start_int, :type => :integer 
    has operation_intervals.end_int, :type => :integer
    has operation_intervals.days_int, :type => :integer
  end
end

class OperationInterval < ActiveRecord::Base
 attr_accessible :start_int, :end_int, :days_int  
end 
```

每当我执行以下操作时：

```
Location.search("foo") # get the search initialized
l = Location.first
l.name = "bar"
l.save(:validate => false) 
```

我得到以下信息：

```
# joining is working just fine
OperationInterval Load (0.3ms)  SELECT `operation_intervals`.* FROM `operation_intervals` INNER JOIN `operation_intervals_locations` ON `operation_intervals`.`id` = `operation_intervals_locations`.`operation_interval_id` WHERE `operation_intervals_locations`.`location_id` = 1

# here's where I'm getting my crash
NoMethodError: undefined method `end_int' for #<ActiveRecord::Relation:0xe048450>
from /usr/local/rvm/gems/ruby-1.9.3-p194@rails326/gems/activerecord-3.2.6/lib/active_record/relation/delegation.rb:45:in `method_missing' 
```

编辑：我正在使用延迟的增量 - 延迟的工作。我认为问题正在发生，因为thinking_sphinx 正试图将工作推到队列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:24:40.810

好的.. 思考狮身人面像适用于多对多的关系

线

```
has operation_intervals.days_int, :type => :integer 
```

**不**应该有`:type => :integer`，因为一个位置可以有多个 operation_intervals 并且真正的类型是数组！

改用此代码将解决问题：

```
has operation_intervals.days_int 
```

# c# - 如何在 .NET 的打印作业中更改双面打印

> ID：11142329
> 
> 赞同：0
> 
> 时间：2012-06-21T16:11:38.993
> 
> 标签：c#, .net, printing, interop, duplex

我有一个打印多页文档的程序。第一页是预打印纸，因此应打印在第一面，其余页面应双面打印。

我最初的解决方案是在第一页之后打印一张空白纸，但是很多（或可能所有）打印机将使用预打印纸的另一面作为正面（非常糟糕），具体取决于它是否设置为是否双工。

所以我一直试图说服打印机在打印作业中间更改双面打印。我一直在努力解决这个问题，并且使用各种代码示例，理论上这应该可以工作，但事实并非如此。

在每次 EndPage 调用之后，如果双工需要改变，它从打印机获取设备上下文（使用内部类的私有字段上的反射，yuck），它使用 Marshal 填充 DEVMODE 结构上的值，然后调用ResetDC() 与设备上下文和 DEVMODE 指针。

我从指针中检索 DEVMODE 结构仅用于验证目的，我想确保我设置了正确的字段。DEVMODE 被正确填充并发送到 ResetDC() 和 PrinterSettings.SetHdevmode()，但是当我重新检索 PrinterSettings.GetHdevmode() 时，我刚刚所做的更改消失了。打印机保留旧的双面设置。

编辑：我发现我之前发布的代码存在一些问题，例如 OnStartPage 调用 ResetDC 的事实。所以我需要修改 StandardPrintController 持有的 DEVMODE 结构。但它仍然无法处理这些更改：

```
public class PrinterDuplexController : StandardPrintController
{
    public PrinterDuplexController()
    {
    }

    private static FieldInfo dcField = typeof(StandardPrintController)
        .GetField("dc",
        BindingFlags.GetField | BindingFlags.Instance | BindingFlags.NonPublic);
    private static FieldInfo modeHandleField = typeof(StandardPrintController)
        .GetField("modeHandle",
        BindingFlags.GetField | BindingFlags.Instance | BindingFlags.NonPublic);

    protected object dc
    {
        get
        {
            return dcField.GetValue(this);
        }
    }

    protected IntPtr Hdc
    {
        get
        {
            var dc = this.dc;
            return (IntPtr)(dc.GetType().GetProperty("Hdc").GetValue(dc, null));
        }
    }
    protected IntPtr modeHandle
    {
        get
        {
            object result = modeHandleField.GetValue(this);
            var field = result.GetType().GetField("handle", BindingFlags.GetField | BindingFlags.Instance | BindingFlags.NonPublic);
            return (IntPtr)field.GetValue(result);
        }
    }

    public override void OnEndPage(PrintDocument document, PrintPageEventArgs e)
    {
        base.OnEndPage(document, e);
        IntPtr pDEVMODE = GlobalLock(modeHandle);
        try
        {
            int[] flags = new int[1];
            Marshal.Copy(
                new IntPtr(40 + pDEVMODE.ToInt64()),
                flags,
                0,
                1);
            flags[0] |= (int)DM.Duplex;
            Marshal.Copy(
                flags,
                0,
                new IntPtr(40 + pDEVMODE.ToInt64()),
                1);

            Marshal.Copy(
                new short[] { (short)e.PageSettings.PrinterSettings.Duplex },
                0,
                new IntPtr(62 + pDEVMODE.ToInt64()),
                1);

            var debugDevMode = (DEVMODE)Marshal.PtrToStructure(pDEVMODE, typeof(DEVMODE));

            ResetDC(Hdc, pDEVMODE);
        }
        finally
        {
            GlobalUnlock(modeHandle);
        }
    }

    [DllImport("gdi32.dll")]
    //private static extern IntPtr ResetDC(IntPtr hdc, [In] ref DEVMODE lpInitData);
    private static extern int ResetDC(IntPtr hdc, IntPtr DevMode);

    [DllImport("gdi32.dll")]
    public static extern int StartPage(IntPtr hdc);

    [DllImport("gdi32.dll")]
    public static extern int EndPage(IntPtr hdc);

    [DllImport("kernel32.dll", ExactSpelling = true)]
    private static extern IntPtr GlobalFree(IntPtr handle);

    [DllImport("kernel32.dll", ExactSpelling = true)]
    private static extern IntPtr GlobalLock(IntPtr handle);

    [DllImport("kernel32.dll", ExactSpelling = true)]
    private static extern IntPtr GlobalUnlock(IntPtr handle);

    [Flags()]
    internal enum DM : int
    {
        Orientation = 0x1,
        PaperSize = 0x2,
        PaperLength = 0x4,
        PaperWidth = 0x8,
        Scale = 0x10,
        Position = 0x20,
        NUP = 0x40,
        DisplayOrientation = 0x80,
        Copies = 0x100,
        DefaultSource = 0x200,
        PrintQuality = 0x400,
        Color = 0x800,
        Duplex = 0x1000,
        YResolution = 0x2000,
        TTOption = 0x4000,
        Collate = 0x8000,
        FormName = 0x10000,
        LogPixels = 0x20000,
        BitsPerPixel = 0x40000,
        PelsWidth = 0x80000,
        PelsHeight = 0x100000,
        DisplayFlags = 0x200000,
        DisplayFrequency = 0x400000,
        ICMMethod = 0x800000,
        ICMIntent = 0x1000000,
        MediaType = 0x2000000,
        DitherType = 0x4000000,
        PanningWidth = 0x8000000,
        PanningHeight = 0x10000000,
        DisplayFixedOutput = 0x20000000
    }

    internal struct POINTL
    {
        public int x;
        public int y;
    }

    [StructLayout(LayoutKind.Explicit, CharSet = CharSet.Unicode)]
    internal struct DEVMODE
    {
        public const int CCHDEVICENAME = 32;
        public const int CCHFORMNAME = 32;

        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCHDEVICENAME)]
        [FieldOffset(0)]
        public string dmDeviceName;
        [FieldOffset(32)]
        public Int16 dmSpecVersion;
        [FieldOffset(34)]
        public Int16 dmDriverVersion;
        [FieldOffset(36)]
        public Int16 dmSize;
        [FieldOffset(38)]
        public Int16 dmDriverExtra;
        [FieldOffset(40)]
        public DM dmFields;

        [FieldOffset(44)]
        Int16 dmOrientation;
        [FieldOffset(46)]
        Int16 dmPaperSize;
        [FieldOffset(48)]
        Int16 dmPaperLength;
        [FieldOffset(50)]
        Int16 dmPaperWidth;
        [FieldOffset(52)]
        Int16 dmScale;
        [FieldOffset(54)]
        Int16 dmCopies;
        [FieldOffset(56)]
        Int16 dmDefaultSource;
        [FieldOffset(58)]
        Int16 dmPrintQuality;

        [FieldOffset(44)]
        public POINTL dmPosition;
        [FieldOffset(52)]
        public Int32 dmDisplayOrientation;
        [FieldOffset(56)]
        public Int32 dmDisplayFixedOutput;

        [FieldOffset(60)]
        public short dmColor;
        [FieldOffset(62)]
        public short dmDuplex;
        [FieldOffset(64)]
        public short dmYResolution;
        [FieldOffset(66)]
        public short dmTTOption;
        [FieldOffset(68)]
        public short dmCollate;
        [FieldOffset(72)]
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = CCHFORMNAME)]
        public string dmFormName;
        [FieldOffset(102)]
        public Int16 dmLogPixels;
        [FieldOffset(104)]
        public Int32 dmBitsPerPel;
        [FieldOffset(108)]
        public Int32 dmPelsWidth;
        [FieldOffset(112)]
        public Int32 dmPelsHeight;
        [FieldOffset(116)]
        public Int32 dmDisplayFlags;
        [FieldOffset(116)]
        public Int32 dmNup;
        [FieldOffset(120)]
        public Int32 dmDisplayFrequency;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:14:48.043

尝试制作两个打印作业，每个都具有不同的双面设置。摆弄工作的优先级以使它们井井有条，而不是围绕内部领域进行黑客攻击。

# css - 为什么 box-sizing:border-box 仍然显示宽度为 0px 的边框？

> ID：11142330
> 
> 赞同：17
> 
> 时间：2012-06-21T16:11:41.410
> 
> 标签：css, border-box

在 CSS 中使用`box-sizing: border-box`时，我假设元素的总宽度将在其“宽度”值中定义。所以如果我说一个分割的宽度是20px，右边框是10px，我最终会得到一个占据20px空间的盒子，其中一半是右边框。将它推到我将宽度设置为 10px 和右边框的位置，就像这里一样：

```
#box {
  overflow: hidden;
  width: 10px;
  box-sizing: border-box;
  height: 50px;
  background: black;
  border-right: 10px solid red;
}
```

```
<div id="box"></div>
```

该框将仅包含红色边框。当我将宽度设置为 0px 时会发生什么？我以为它会让整个事情消失，但是不，结果和上面的完全一样：

```
#box-1 {
  overflow: hidden;
  width: 10px;
  box-sizing: border-box;
  height: 50px;
  margin-bottom: 10px;
  background: black;
  border-right: 10px solid red;
}

#box-2 {
  overflow: hidden;
  width: 0px;
  box-sizing: border-box;
  height: 50px;
  background: black;
  border-right: 10px solid red;
}
```

```
<div id="box-1"></div>
<div id="box-2"></div>
```

[在 jsFiddle 上查看](http://jsfiddle.net/YVxgK/5/)

我的问题是这是否是预期的行为。对我来说似乎不一致。我想让一个盒子消失，只控制宽度/高度。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-21T16:52:45.843

内容区域是减去边框宽度后剩下的任何内容。

> 内容的宽度和高度是通过从指定的“宽度”和“高度”属性中减去相应边的边框和填充宽度来计算的。

指定宽度 = 10 px
边框宽度 = 10 px
内容宽度 = 指定宽度 (10 px) - 边框宽度 (10 px)
内容宽度 10 - 10 = 0

指定宽度 = 0 px
边框宽度 = 10 px
内容宽度 = 指定宽度 (0 px) - 边框宽度 (10 px)
内容宽度 0 - 10 = -10（这将删除边框使用的 10 px）

但

> 由于内容的宽度和高度不能为负数（[CSS21]，第 10.2 节），因此该计算以 0 为底。

指定宽度 = 0 px
边框宽度 = 10 px
内容宽度 = 指定宽度 (0 px) - 边框宽度 (10 px)
内容宽度 0 - 10 = 0 （不会删除边框使用的 10 px）

如果您不想使用`display:none;`or `visibility:hidden;`，则需要将 the`width:XX;`和 the都设置`border-right:XX;`为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:16:54.450

看看这个截图：

![盒子指标](../Images/979d002d78d143c1dc9de0042b017292.png)

整个盒子`100x100px`如你所料，但实际宽度是`90px`+`10px`右边框。所以当你将宽度设置为0时，宽度仍然是0（不能有负宽度），但你仍然有10px的边框。

# c# - UNC 路径和未处理的异常：C# 中的 System.BadImageFormatException

> ID：11142331
> 
> 赞同：0
> 
> 时间：2012-06-21T16:11:49.023
> 
> 标签：c#

我用 x86 平台目标编译了整个项目。当我将 .exe 和引用 dll 复制到服务器并从服务器 cmd 窗口运行 .exe 时，它​​工作正常。

我们的要求是将exe和dll复制到某个网络路径并使用UNC路径在服务器上执行exe。当我使用 UNC 路径执行时，出现错误：

> 未处理的异常：System.BadImageFormatException：无法加载文件或程序集“XXXX，版本=3.0.10.19399，文化=中性，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。文件名：'XXXX，版本=3.0.10.19399，文化=中性，PublicKeyToken=null'
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:28:14.360

我现在只是猜测，但我可能会责怪路径本身 - 它很可能是“不受信任的”，原因未知。启用程序集绑定日志记录（提示：google :)）以了解发生了什么

# android - 隐藏 Android 市场中的应用程序，仅从链接安装

> ID：11142333
> 
> 赞同：1
> 
> 时间：2012-06-21T16:11:57.287
> 
> 标签：android

我想在市场上发布一个应用程序以使其易于安装，但我们处于早期测试阶段，所以我想防止随机的人偶然发现它并可能给它一个差评，因为他们可以' t 登录（或其他）。理想情况下，它会隐藏应用程序，除非您有直接链接。

有什么办法可以做到这一点？看起来您可以阻止外部广告，但我认为该应用程序将始终出现在市场搜索中。您可以将成熟度设置得非常高，并尝试锁定地理位置，但这听起来是个坏主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:17:29.567

看看[HockeyApp](http://www.hockeyapp.net/)。他们提供托管服务，使您可以让仅受邀的测试人员轻松访问您的构建，从构建脚本自动上传新版本，并且对您的应用程序进行一些小的更改，您可以让它在用户的设备上自动更新.

最重要的是，您会得到很好的错误报告。

我用它来分发我的 beta 版本，与 Google Play 上的生产就绪版本版本分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:18:45.613

您可以以某种方式“隐藏”该应用程序，并将测试版与完整版本解除关联：

*   使用秘密名称，这样应用就不会被“偶然发现”</p>

*   使用单独的市场账户

*   不要填写描述

*   给应用一个有效期

*   为测试版提供与真实应用程序不同的包名称 - 这将确保低评论不会延续到发布测试版

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T20:07:04.730

只是更新 - 大多数人的答案现在将是[Google Play 的 alpha/beta 测试和分阶段推出](https://support.google.com/googleplay/android-developer/answer/3131213?hl=en-GB)。

# api - 图搜索 api 不返回我的公开帖子

> ID：11142342
> 
> 赞同：0
> 
> 时间：2012-06-21T16:12:21.010
> 
> 标签：api, facebook-graph-api, graph

我正在使用图形搜索 api 搜索在我的墙上为我发布的公共帖子。例子：

[https://graph.facebook.com/search?q=awstdw&type=post](https://graph.facebook.com/search?q=awstdw&type=post)

我的帖子包含关键字“awstdw”。

上面的搜索没有返回我的帖子，这是一个公开帖子。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:20:20.637

您可能需要等待 Facebook 在本学期更新缓存。如果您在发布包含该词的内容之前碰巧搜索了该词，它将不会显示任何内容。

如果您尝试：[https](https://graph.facebook.com/search?q=facebook&type=post) ://graph.facebook.com/search?q=facebook&type=post您会发现它确实有效。尝试使用不同的关键字创建新帖子，然后尝试搜索它，例如 [https://graph.facebook.com/search?q=asdasd&type=post](https://graph.facebook.com/search?q=asdasd&type=post)

# perl - 扩展非 Moose 类：访问器处不是 HASH 引用

> ID：11142343
> 
> 赞同：2
> 
> 时间：2012-06-21T16:12:22.933
> 
> 标签：perl, moose

我正在尝试扩展一个非 moose 类，当我调用 moose 为我的扩展类定义的访问器时，我收到以下错误：

```
Not a HASH reference at accessor MyGraph::weight (defined at MyGraph.pm line 8) line 8 
```

这是简化的代码：

```
package MyGraph;

use Moose;
use MooseX::NonMoose;

extends 'Graph';

has 'weight' => (
   is => 'ro',
   isa => 'Num',
);

no Moose;
__PACKAGE__->meta->make_immutable;

package main;
my $g = MyGraph->new;
$g->weight(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:50:43.937

MooseX::NonMoose 不能开箱即用，使您能够对非 hashref 类进行子类化，并且 Graph 对其实例使用 arrayref。文档提到了这一点，并建议使用[MooseX::InsideOut](http://p3rl.org/MooseX%3a%3aInsideOut)来实现与具有其他实例类型的非 moose 类的兼容性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:59:31.997

> 非 Moose 类用作其实例类型的引用必须与 Moose 正在使用的实例类型匹配。Moose 的默认实例类型是 hashref。

`Graph`用作`ARRAYREF`其实例类型。[`MooseX::InsideOut`](http://metacpan.org/module/MooseX%3a%3aInsideOut)是解决方案。

```
package MyGraph;

use Moose;
use MooseX::InsideOut;
use MooseX::NonMoose;

extends 'Graph'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T16:48:55.560

我从来没有这样做过，但这看起来可能是你想要的。[http://metacpan.org/pod/MooseX::NonMoose](http://metacpan.org/pod/MooseX::NonMoose)

# mysql - Mysql 无法正常工作

> ID：11142346
> 
> 赞同：0
> 
> 时间：2012-06-21T16:12:27.593
> 
> 标签：mysql, sql, having

我有两张桌子。（MySQL 数据库）事件：

```
id | title | ... 
```

活动参与：

```
event_id | user_id | confirmed 
```

`confirmed`是 0/1 列。我想查找指定用户参与的活动。我的 SQL 查询是：

```
SELECT *, COALESCE(SUM(ep.confirmed), 0) AS count_members 
FROM event e
LEFT JOIN event_participate ep ON e.id = ep.event_id
GROUP BY ep.event_id
HAVING (
ep.user_id = 6
) 
```

我必须使用有 clasule 因为我想扩展这个查询。我有 5 个事件的结果，但是当我查询时：

```
SELECT * 
FROM  `event_participate` 
WHERE  `user_id` = 6 
```

我有 7 条记录。这怎么可能？

我已经编辑了第二个表的结构（event_participate）——它可以帮助你理解我为什么要使用`having`分句。当我使用时，`WHERE`我将始终在 count_members 中获得 1。

编辑：我的目标是获取特定用户参与的活动，我想知道有多少用户已经参与了这些活动。

例如，用户 id=6 参加一个 id=1 的活动。但是还有 3 个其他用户参与事件 id=1。所以我应该得到一个事件，并且在列 count_members 我应该得到`4`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:15:08.663

您需要将 having 子句更改为 where 子句。have 子句不使用分组列或聚合，因此它正在执行“any(user_id) = 6”。

```
SELECT *
FROM event e LEFT JOIN event_participate ep ON e.id = ep.event_id
WHERE ep.user_id = 6
GROUP BY ep.event_id 
```

根据您的编辑，我认为您想要以下内容：

```
SELECT ep.event_id, COALESCE(SUM(ep.confirmed), 0) AS count_members
FROM event e LEFT JOIN event_participate ep ON e.id = ep.event_id
GROUP BY ep.event_id 
HAVING max(case when ep.user_id = 6 then 1 else 0 end) = 1 
```

您试图将人口限制为至少有一个 user_id = 6 的事件，同时仍计算所有其他成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:19:13.137

尝试从这个开始：

```
SELECT e.*
FROM event e 
INNER JOIN event_participate ep 
    ON e.id = ep.event_id AND ep.user_id = 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:22:42.057

另外，我尝试修复您的查询：

```
SELECT * 
FROM event e
LEFT JOIN event_participate ep ON e.id = ep.event_id
GROUP BY ep.event_id, ep.user_id
HAVING (
ep.user_id = 6
) 
```

注意这个查询中的 GROUP BY 子句是多余的，可以将 HAVING 替换为 WHERE

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:35:52.543

> 我想查找指定用户参与的活动。

```
SELECT e.title 
FROM event e
  JOIN event_participate ep ON e.id = ep.event_id
WHERE
  ep.user_id = 6; 
```

无需使用`GROUP BY`子句。您没有汇总任何数据。

# ruby-on-rails - Rails 3.2：使用单个根元素将 ActiveRecord 对象的集合序列化为 JSON

> ID：11142347
> 
> 赞同：0
> 
> 时间：2012-06-21T16:12:27.403
> 
> 标签：ruby-on-rails, json

如何获取 ActiveRecords 的集合以序列化为具有单个根元素的 JSON 对象，该根元素包含 colletions 元素的数组？

我们刚刚从 Rails 3.0.10 升级到 Rails 3.2，在将 ActiveRecord 对象的集合序列化为 JSON 的方式上遇到了问题。

我已经阅读并知道使用`to_json`我们现在的方式可能是一个坏主意，我们会尽快解决这个问题，但在此期间，我正在寻找可能修复我的代码的最快方法，所以它确实由于这些更改破坏了我们的 API，它之前做了什么。

我们有一个 Form 类型的 ActiveRecord 对象集合，这些对象在“索引”操作中作为 JSON 使用以下代码返回：

```
def index # in our FormsController

  # get our "records" collection from the database

  respond_to do |format|
    yield(format) if block_given?

    # other formats excluded for simplicity

    format.json {
      records = records.call if records.is_a?(Proc)
      render :json => records.to_json(serialize_records_options), :layout => false
    }
  end
end

# These are in ApplicationController

def serialize_options
  (self.class.serialize_options if self.class.respond_to? :serialize_options) || {}
end

def serialize_records_options
  options = serialize_options.clone
  options[:root] = (options[:root].pluralize if options[:root]) || controller_name
  options[:indent] ||= 2
  options
end 
```

问题是这曾经序列化为：

```
{
    "total_entries": 2,
    "total_pages": 1,
    "forms": [{
        "form": {
            ... attributes ...
        }
    },
    {
        "form": {
            ... attributes ...
        }
    }],
    "per_page": 5,
    "current_page": 1
} 
```

现在序列化为：

```
[{
  "forms": { 
    ... attributes of form 1 ... 
  }
},
{
  "forms": { 
    ... attributes of form 2 ... 
  }
},
{
... more forms ...
}] 
```

我们的客户端应用程序甚至无法将该格式识别为有效的 JSON 对象。关于我们如何让它以原始格式输出的任何想法？除了升级 Rails 及其依赖项外，我们没有更改任何序列化代码。我们的包中有以下 JSON gem：

```
$ bundle show | grep json
  * json (1.7.3)
  * jsonpath (0.5.0)
  * multi_json (1.3.5) 
```

提前致谢！这是一个奇怪的问题。

# facebook - facebook 显示推荐计数鼠标悬停

> ID：11142349
> 
> 赞同：2
> 
> 时间：2012-06-21T16:12:35.080
> 
> 标签：facebook, addthis

我正在使用 Addthis 插件。我在页面上有一个“F”图标。我希望它作为推荐功能工作。如果有人点击 F，是否有后续操作，它应该像点击推荐一样工作，并且在移动过这个 F 时，它应该只显示推荐计数

**我们不想显示带有计数的标准推荐框**

**第二个问题**，当我点击任何喜欢的按钮时，它也会显示另一个共享弹出窗口，但即使我取消了这个弹出窗口，我的时间线仍然显示我已经推荐了那个特定页面..那么那个弹出窗口有什么用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:24:35.453

您可以使用[Facebook 对话框 JavaScript](http://developers.facebook.com/docs/reference/dialogs/feed/)为自定义按钮显示共享对话框。或者使用[发送对话框按钮](http://developers.facebook.com/docs/reference/dialogs/send/)创建一个私人共享对话框。

Like 按钮上的“评论框”是可选的，不是必需的。如果您输入评论，它会将其添加到您的时间轴上显示的“赞”帖子中。但是您仍然可以在不输入评论的情况下点赞页面。带有评论的“赞”在用户的时间线上显得更加突出。

# java - 我需要了解 Java 示例中枚举的行为吗？

> ID：11142353
> 
> 赞同：1
> 
> 时间：2012-06-21T16:12:48.493
> 
> 标签：java, enums

第一个是枚举类

```
enum coffeeSize{
    BIG(8), HUGE(10), OVERWHELMING(16);
    private int ounces;
    coffeeSize(int ounces ){
        this.ounces = ounces;
    }
    public int getOunces(){
        return ounces;
    }

} 
```

这是类 CoffeeTest1 和 main

```
 public class CoffeeTest1 {
      coffeeSize size;

      public static void main (String args[]) {
          CoffeeTest1 drink1 = new CoffeeTest1();
          drink1.size = coffeeSize.BIG;

          System.out.println(" " + drink1.size.getOunces());
      }
} 
```

下面是输出

```
8 
```

我的问题：我不明白如何`drink1.size.getounces()`输出 8。我没有给出构造函数`coffeeSize(8)`对象（例如：）`coffeeSize somex = new coffeeSize(BIG)`。我想知道这背后简单微妙的逻辑。有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:17:30.070

一个建议：查找、学习并遵循 Sun Java 编码标准。它将提高您的代码的可读性。

根据您的枚举，它输出 8 因为这是 BIG 咖啡大小的大小（以盎司为单位）。这就是您传递给 BIG 构造函数的值。

`drink1`是类的实例，它有一个`coffeeSize`名为的包可见数据成员`size`。每个`coffeeSize`实例都有一个方法，该方法`getOunces`返回您传递给其构造函数的整数值。

它没有什么微妙之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:21:29.943

> ***我不明白“drink1.size.getounces()”如何输出 8。***
> 
> [...]
> 
> ***我想知道这背后简单微妙的逻辑。***

要了解这背后的逻辑，您可以将 your`enum`视为常规`class`（实际上是它的编译方式），并且

```
BIG(8) 
```

作为此类的一个实例，类似于

```
new coffeesize(8); 
```

现在应该清楚为什么`drink1.size.getOunces()`打印 8:`BIG`只是`coffeesize`枚举的一个实例，`ounces`在构造它时将其设置为 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:18:11.483

您会注意到该`getOunces`方法是在枚举上定义的。在 Java 中，枚举值本身可以具有属性和方法。

暗示`CoffeeTest1`有一个引用枚举值的字段。

`drink1`该类的实例也是如此..该
属性`size`设置为`BIG`枚举的实例..
`Big`有`ounces`8个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:18:34.487

当您指定`BIG(8)`您正在创建它时，将 8 传递给它的构造函数（10 或 16）。当您使用它时，`coffeeSize.BIG.getOunces()`您正在调用它的方法`getOunces`。`BIG`,`HUGE`和`OVERWHELMING`是 a 的可能值`coffeeSize`，每个都有自己的状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-25T11:19:10.383

```
enum Colour {
   Black,White,Red,Green,Yellow,Grey
}

public class EnumExample {

   public static void main(String[] args) {

     Colour colour;

     colour = Colour.Black;

     System.out.println("Selected "+colour+" Colour");

     colour = Colour.Yellow;

     System.out.println("Selected "+colour+" Colour");
  }

} 
```

# apache-flex - 如何处理 mx datagrid 标头渲染器中的资产

> ID：11142354
> 
> 赞同：0
> 
> 时间：2012-06-21T16:12:53.953
> 
> 标签：apache-flex

我有一个使用带有自定义项目渲染器的 mx 数据网格的应用程序。在每次刷新时，都会重建数据网格。我发现应用程序有内存泄漏，经过分析，我发现原因是与资产绑定

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-22T01:02:14.340

DropdownList 是一个火花组件，而您要摆脱的是一个 MX 组合框。请记住，维护具有多个事件依赖项的应用程序并不容易......有时我们会问一个问题，为什么我们真的要创建新的标题渲染并替换旧的？可能尝试重用这些标头渲染器（在更新组合框的数据提供程序或更新排序图像之后）将解决问题，因为我们在 Flex 数据网格上有相同的标头渲染器实例。

# python - 导入 PyQt4.QtCore 时出错

> ID：11142358
> 
> 赞同：0
> 
> 时间：2012-06-21T16:13:09.193
> 
> 标签：python, pyqt4, python-sip

我一直在尝试让一些基于 PyQt 的 GUI 应用程序运行。

PPython 脚本中的某处是以下导入：

`from PyQt4.QtCore import *`

这是我不断遇到的错误。

RuntimeError：sip 模块实现 API v8.0 到 v8.1 但 PyQt4.QtCore 模块需要 API v7.1

为什么会这样？如何让 sip 使用正确的 API？

谢谢

# perl - Perl：使用 <> 构造时如何获取文件名？

> ID：11142364
> 
> 赞同：18
> 
> 时间：2012-06-21T16:13:45.327
> 
> 标签：perl

Perl 提供了这个非常好的特性：

```
while ( <> )
{
    # do something
} 
```

...这允许使用脚本`script.pl <filename>`以及`cat <filename> | script.pl`.

现在，有没有办法确定脚本是否以前一种方式被调用，如果是，文件名是什么？

我知道我曾经知道这一点，我知道我什至使用过这个构造，但我不记得在哪里/如何。事实证明，在网上搜索这个（“perl stdin 文件名”？不......）非常困难。

请帮忙？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-21T16:15:53.223

该变量[`$ARGV`](http://p3rl.org/var#%24ARGV)保存当前正在处理的文件。

```
$ echo hello1 > file1
$ echo hello2 > file2
$ echo hello3 > file3
$ perl -e 'while(<>){s/^/$ARGV:/; print;}' file*
file1:hello1
file2:hello2
file3:hello3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-08T11:44:17.100

的[I/O Operators 部分`perlop`](http://perldoc.perl.org/perlop.html#I/O-Operators)对此提供了非常丰富的信息。

本质上，第一次`<>`执行，如果它开始为空，`-`则添加到。`@ARGV`打开`-`具有克隆`STDIN`文件句柄的效果，并且变量在处理时`$ARGV`设置为当前元素`@ARGV`。

这是完整的剪辑。

> 空文件句柄“<>”很特殊：它可以用来模拟 sed 和 awk 的行为，以及任何其他接受文件名列表的 Unix 过滤程序，对来自所有文件名的每一行输入执行相同的操作。"<>" 的输入来自标准输入，或者来自命令行上列出的每个文件。下面是它的工作原理：第一次评估“<>”时，检查@ARGV 数组，如果它为空，则 $ARGV[0] 设置为“-”，打开时会为您提供标准输入。然后将@ARGV 数组作为文件名列表进行处理。循环
> 
> ```
>  while (<>) {
>        ...                     # code for each line
>    } 
> ```
> 
> 等效于以下类似 Perl 的伪代码：
> 
> ```
>  unshift(@ARGV, '-') unless @ARGV;
>    while ($ARGV = shift) {
>        open(ARGV, $ARGV);
>        while (<ARGV>) {
>            ...         # code for each line
>        }
>    } 
> ```
> 
> 除了说起来不那么麻烦，而且实际上会起作用。它确实移动了@ARGV 数组并将当前文件名放入 $ARGV 变量中。它还在内部使用文件句柄*ARGV*。“<>”只是“<ARGV>”的同义词，很神奇。（上面的伪代码不起作用，因为它将“<ARGV>”视为非魔法。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-08T10:32:48.390

如果您想知道何时`<>`切换到新文件（例如，在我的情况下 - 我想记录新文件名和行号），那么[eof() 函数文档](http://perldoc.perl.org/functions/eof.html)提供了一个技巧：

```
# reset line numbering on each input file
while (<>) {
    next if /^\s*#/;  # skip comments
    print "$.\t$_";
} continue {
    close ARGV if eof;  # Not eof()!
} 
```

# arrays - 填充随机数字数组以在excel vba中求和

> ID：11142368
> 
> 赞同：2
> 
> 时间：2012-06-21T16:13:54.563
> 
> 标签：arrays, excel, vba, random, sampling

我正在尝试创建一个采样工具

我需要在 0 到 3000 之间以 500 的倍数选择随机生成的数字，这样它们的总和就是一个固定数字，比如 12 个插槽中的 10000

除此之外，我需要运行大约 100000 到 1000000 的多次迭代（尚未决定。

我的方法是创建一个二维数组，设置一个约束来验证迭代的总和，并且只有在条件为真时才将其输入到最终数据样本中。

我在以下代码中犯了一些非常可怕的错误，无法弄清楚在哪里......感谢帮助

```
Public Sub Generatenums()
    Dim GRP() As Long, Random() As Long
    Dim RandomTotal As Long, t As Long, w As Long, i As Long, j As Long

    ReDim GRP(1 To 100, 1 To 12)
    ReDim Random(1 To 12)

    For i = 1 To 100
        For j = 1 To 12
            Random(j) = Int(Rnd() * 7) * 500
            RandomTotal = RandomTotal + Random(j)
        Next j

        If RandomTotal = 10000 Then
            For k = 1 To 12
                GRP(i, k) = Random(k)
            Next k
        End If
    Next i

    Range("A1").Select
    For t = 1 To 100
        For w = 1 To 12
            Cells(t, w).Value = GRP(t, w)
        Next w
    Next t
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T18:45:22.640

Fantom，欢迎来到 SO。

评论员是对的：这将需要很长时间才能运行。

与其将其视为要填充为某个总和的数组，不如将其视为弹球盘或[高尔顿棋盘](http://mathworld.wolfram.com/GaltonBoard.html)，其中有 20 个弹跳的球并最终进入底部的垃圾箱。为什么是20？因为您想要以 500 为增量的 10000 的总和，并将 10000/500 = 20 视为一个球。

现在程序可以在线性时间内运行。您不会随机化总和，而是随机化球将落入 12 个插槽中的哪一个。然后将每个插槽中的球数乘以 500，总和将始终为 10000。

其中一个循环如下所示：

```
For i = 1 To 20
  x = Rnd() * 12 + 1
  If x > 12 Then x = 12
  If x < 1 Then x = 1
  bin(x) = bin(x) + 1
Next i 
```

这足以解决您的问题，还是您需要更多？

# wcf - WCF - 如何编写仅发布到特定客户端的发布者\订阅者服务？

> ID：11142373
> 
> 赞同：2
> 
> 时间：2012-06-21T16:14:20.053
> 
> 标签：wcf, publish-subscribe

我正在以发布-订阅模式编写 WCF 服务。

当有人发布事件时，我不想立即将其发送给所有客户。

对于每个客户，我希望能够检查该客户是否需要收到有关该发布的通知。

基本上，这将通过访问数据库来完成，并检查该客户端是否使用这些参数订阅了该特定事件（不能提前完成，只需要针对数据库进行检查）。

目前我正在使用[这个基于列表的发布订阅者](http://msdn.microsoft.com/en-us/library/ms752254.aspx)示例，但它的工作方式是 - 当一个事件被发布时 - 客户端会话被单独触发以发送消息。

所以现在，我正在改变这个：

```
 public void PriceChangeHandler(object sender, PriceChangeEventArgs e)
 {
     _callback.PriceChange(e.Item, e.Price, e.Change);
 } 
```

对此：

```
 public void PriceChangeHandler(object sender, PriceChangeEventArgs e)
 {
     // Perform some database checks using BL if this client needs to be notified about this event

     // Only if answer is YES - call the callback function on that client
     _callback.PriceChange(e.Item, e.Price, e.Change);

     // Also - send the client an EMAIL + SMS
     _emailServer.SendEmail(e.Item);
     _smsServer.SendSMS(e.Item);
 } 
```

**两个问题：**

这是正确的方法吗？我怎么知道“这个”客户是什么？客户是否应该以我将存储的“订阅”方法向我发送凭据？或者我应该实现一个自定义的“UsernameValidator”来存储 Principal 吗？

我不应该有一个所有客户的静态列表，我将发送给我的 BL，而 BL 只会返回我必须发送消息的那些客户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:52:48.487

我认为首先回答这个问题会让生活变得更轻松：

> 我怎么知道“这个”客户是什么？

`OperationContext.Current.GetCallbackChannel<T>`

对于服务接收到的每个调用，都会有一个客户端通道，通过该通道进行调用，这将为您提供仅进行该调用的客户端的回调通道，这是您能够区分客户端的简单方法.

关于整个场景的方法，我将首先按照您自己的建议将列表存储`subscribers`在静态`dictionary`中，但还要保留每个客户端回调实例及其用户名：

`private static Dictionary<IPriceChangeCallback, string> subscribers = new Dictionary<IPriceChangeCallback, string>();`

您的回调合同在哪里`IPriceChangeCallback`，字符串可以是唯一的用户名或任何标识符。因此，您现在具有区分客户的基本能力，例如，假设您要将最后收到的消息发布给除发送者之外的每个客户，您将：

```
 lock (subscribers)
        {
            foreach (var _subscriber in subscribers)
            {
                if (OperationContext.Current.GetCallbackChannel<IPriceChangeNotification>() == _subscriber.Key)
                {
                      //if the person who sent the last message is the current subscriber, there is no need to
                      //publish the message to him, so skip this iteration
                        continue;
                }
                else
                {
                       //GetCurrrentClient is a handy method, you can optionally include this  
                       //in your callbacks just to let your clients know who exactly sent the publication
                        _subscriber.Key.PriceChangeCallback(e.Item, e.Price, e.Change, GetCurrentClient());
                }
             }
         } 
```

或根据用户名区分您的客户，理想情况下您也应该在数据库中拥有这些用户名：

```
 lock (subscribers)
            {
                foreach (var _subscriber in subscribers)
                {
                    if(_subscriber.Value == "Jimmy86"))
                    {
                        //Identify a specific client by their username and don't send the notification to him
                        //here we send the notification to everyone but jimmy86
                        continue;
                    }
                    else
                    {
                        _subscriber.Key.PriceChangeCallback(e.Item, e.Price, e.Change, GetCurrentClient());
                    }
                }
            } 
```

再说一次，每当你想知道是谁调用了服务操作，并告诉你的客户是谁发送了那个特定的消息，使用`GetCurrentClient()`我之前提到的方法：

```
 private string GetCurrentClient()
    {
        return clients[OperationContext.Current.GetCallbackChannel<IPriceChangeNotification>()];
    } 
```

> 这是正确的方法吗？

我不确定上面的方法有多可取，但我以前曾经做过，只要我想保留一个客户列表并在他们身上调用一些方法。

> 客户是否应该以我将存储的“订阅”方法向我发送凭据？

是的，这是一种常见的方法。对您的服务进行`Subscribe()`操作，这将是您的客户在想要加入您的服务时调用的第一个方法：

```
 [OperationContract(IsOneWay = true)]
        public void Subscribe(string username)
        {
            lock (subscribers)
            {
                subscribers.Add(OperationContext.Current.GetCallbackChannel<IPriceChangeNotification>(), username);
            }
        } 
```

几个月前，我正在开发 Pub/Sub Silverlight 服务，我发现[这篇文章](http://tomasz.janczuk.org/2009/07/pubsub-sample-using-http-polling-duplex.html)及其[随附的视频](http://channel9.msdn.com/Shows/SilverlightTV/Duplex-Communication-with-WCF-in-Silverlight-4-Silverlight-TV-34)非常宝贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T07:15:38.807

我想出的答案是实现“自定义用户名密码验证器”，因此每个服务实例现在都知道连接到它的客户端（这样我就不必在订阅中传递任何内容）。

当“发布”事件到达时 - 我会检查它的目标用户（同一用户可能从多台机器连接）。

然后，我将向目标用户提出“PriceChangeEvent”，并且将为所有客户端实例引发“PriceChangeHandler”事件。

然后，在事件内部——我会检查记录的主体是否是目标用户，如果是——我会在客户端机器上调用回调函数。

这省去了保存已连接客户端列表的麻烦，而且我不需要在“订阅”方法中传递任何内容。

# jquery - Highcharts - 如何减少类别之间的空间？

> ID：11142378
> 
> 赞同：3
> 
> 时间：2012-06-21T16:14:54.413
> 
> 标签：jquery, graph, highcharts

![问题示例](../Images/45eb7b7e8a520ed376582be72f93f090.png)

我需要减少那个空间，......我该怎么做？

“Planificación”、“prioridad”和“gerencia”是类别，里面的数字是按人排列的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T16:20:43.390

要做到这一点， [pointPadding](http://www.highcharts.com/ref/#plotOptions-bar--pointPadding)和[pointWidth](http://www.highcharts.com/ref/#plotOptions-bar--pointWidth)是你想要的。

试试[这个](http://jsfiddle.net/wergeld/M85tL/)。重要的位是：

```
plotOptions: {
            series: {
                stacking: 'normal',
                pointWidth: 50,
                pointPadding: 0
            }
        }, 
```

# asp.net-mvc - 在 Umbraco CMS 中创建自定义控制器和视图

> ID：11142381
> 
> 赞同：0
> 
> 时间：2012-06-21T16:15:02.050
> 
> 标签：asp.net-mvc, content-management-system, controller, umbraco

我已经使用 NutGet 包安装了 Umbraco CMS。我需要添加我的控制器和视图，以便它们可以集成到 Umbraco CMS 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:18:12.520

你会想要实现一个叫做[Surface Controllers](http://web-matters.blogspot.co.uk/2011/12/umbraco-5-surface-controller.html)的东西。附带说明一下，请注意，不再支持最新版本的 Umbraco (v5)。有关更多信息，请参阅 Umbraco 的[新闻稿](http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx)。

# java - 将表单数据保存到 MySQL DB - Flex + Java

> ID：11142390
> 
> 赞同：-1
> 
> 时间：2012-06-21T16:15:33.047
> 
> 标签：java, mysql, apache-flex, flex4, flex4.5

我需要将我的 Flex 前端连接到 Java 后端。我需要将一些表单数据保存到 MySQL。

Flex 前端有 2 个表单字段，即姓名和年龄。当用户单击按钮时，我需要将其保存在 MySQL DB 中。

有人能帮我吗。我是 Flex 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:10:44.667

BlazeDS 可能是您正在寻找的。这是一篇不错的“入门”文章： http: [//www.adobe.com/devnet/livecycle/articles/blazeds_gettingstarted.html](http://www.adobe.com/devnet/livecycle/articles/blazeds_gettingstarted.html)

我广泛使用它，直到大约一年前 HTML5 显然要吃掉 Flex 的午餐。很遗憾我离开了它，因为它是好东西——与 JSON 或 XML 相比，数据传输非常有效，并且它很好地集成到 Flashbuilder 或 Flexbuilder 中——无论他们现在如何称呼它。

# javadoc - 带有 Gradle 的 Javadoc：还显示私有成员

> ID：11142392
> 
> 赞同：11
> 
> 时间：2012-06-21T16:15:41.197
> 
> 标签：javadoc, gradle

我正在使用 gradle 从我的项目中生成 Javadoc，并且我想进入 Javadoc 以及私有成员。

在命令行中，运行 javadoc 时，您可以使用 -private 标志来实现。但是，我怎样才能在我的 build.gradle 上做到这一点？

我有下一个任务：

```
task myJavadocs(type: Javadoc) {    
    source = sourceSets.main.allJava
    classpath = configurations.compile
    destinationDir = file("./doc/")
  } 
```

我确信那里有任何“选项”可以做到这一点，但我找不到它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T16:27:14.403

找到了！

必须使用**options.memberLevel**将其设置为[JavadocMemberLevel](http://www.gradle.org/docs/current/javadoc/org/gradle/external/javadoc/JavadocMemberLevel.html)。

 **任务应如下所示：

```
task myJavadocs(type: Javadoc) {    
    source = sourceSets.main.allJava
    options.memberLevel = JavadocMemberLevel.PRIVATE
    classpath = configurations.compile
    destinationDir = file("./doc/")
  } 
```**

# python - 客户端在不阻塞客户端/服务器通信的情况下启动单独进程的最佳方式

> ID：11142395
> 
> 赞同：2
> 
> 时间：2012-06-21T16:15:44.007
> 
> 标签：python, twisted

我试图实现的最终结果是允许服务器在建立连接时将特定任务分配给客户端。一个简化的版本是这样的

1.  客户端连接到服务器
2.  服务器告诉客户端运行一些网络任务
3.  客户端收到任务并启动另一个进程来完成任务
4.  客户端告诉服务器它已经启动
5.  服务器告诉客户端它有另一个任务要做（等等......）

一些笔记

*   客户可以完成的任务数量会有上限
*   客户端需要能够监控任务/进程（运行？死了？）
*   如果客户端可以从进程接收数据并在需要时发送到服务器，那就太好了

起初，我打算尝试线程，但我听说 python 没有正确执行线程（是对还是错？）

然后它被认为从 python 触发系统调用并记录 PID。然后向它发送某些信号以获取状态，停止，（SIGUSR1，SIGUSR2，SIGINT）。但不确定这是否可行，因为我不知道我是否可以从另一个进程中捕获数据。如果可以的话，我不知道如何实现。（标准输出或套接字文件？）

就处理这个问题的最佳方法而言，你们会提出什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T17:46:53.950

使用[spawnProcess](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorProcess.html#spawnProcess)生成一个子进程。如果您已经在使用 Twisted，那么它应该可以无缝集成到您现有的协议逻辑中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:19:55.627

使用[Celery](http://celeryproject.org/)，一个 Python 分布式任务队列。它可能会做你想做的一切，或者可以做你想做的一切，它还会处理你可能还没有考虑过的大量边缘情况（如果服务器崩溃，现有作业会发生什么情况等）

您可以使用 RabbitMQ 等消息队列从您的其他软件与 Celery 进行通信；有关详细信息，请参阅 Celery 教程。

使用 MySQL 或 PostgreSQL 之类的数据库来存储有关任务及其结果的信息可能最方便，但如果您愿意，您可以设计一个不使用数据库的解决方案。

# python - Python 有一个不可变的列表吗？

> ID：11142397
> 
> 赞同：115
> 
> 时间：2012-06-21T16:15:54.423
> 
> 标签：python, list, tuples, immutability

python有不可变的列表吗？

假设我希望有一个有序的元素集合的功能，但我想保证不会改变，这如何实现？列表是有序的，但它们可以改变。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-06-21T16:15:55.063

是的。它被称为`tuple`.

因此，不是`[1,2]`which is a `list`and which can be mutated，`(1,2)`而是 is a `tuple`and cannot。

* * *

*更多信息：*

单元素`tuple`不能通过 write 实例化`(1)`，相反，您需要 write `(1,)`。这是因为解释器对括号有各种其他用途。

您也可以完全取消括号：`1,2`与`(1,2)`

请注意，元组并不*完全*是不可变列表。单击此处阅读有关[列表和元组之间差异的更多信息](https://stackoverflow.com/questions/626759/whats-the-difference-between-list-and-tuples-in-python)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-10T18:23:24.700

这是一个`ImmutableList`实现。基础列表未在任何直接数据成员中公开。不过，可以使用成员函数的**闭包属性访问它。**如果我们遵循不使用上述属性修改闭包内容的约定，则此实现将达到目的。此类的实例`ImmutableList`可以在任何需要正常 python 列表的地方使用。

```
from functools import reduce

__author__ = 'hareesh'

class ImmutableList:
    """
    An unmodifiable List class which uses a closure to wrap the original list.
    Since nothing is truly private in python, even closures can be accessed and
    modified using the __closure__ member of a function. As, long as this is
    not done by the client, this can be considered as an unmodifiable list.

    This is a wrapper around the python list class
    which is passed in the constructor while creating an instance of this class.
    The second optional argument to the constructor 'copy_input_list' specifies
    whether to make a copy of the input list and use it to create the immutable
    list. To make the list truly immutable, this has to be set to True. The
    default value is False, which makes this a mere wrapper around the input
    list. In scenarios where the input list handle is not available to other
    pieces of code, for modification, this approach is fine. (E.g., scenarios
    where the input list is created as a local variable within a function OR
    it is a part of a library for which there is no public API to get a handle
    to the list).

    The instance of this class can be used in almost all scenarios where a
    normal python list can be used. For eg:
    01\. It can be used in a for loop
    02\. It can be used to access elements by index i.e. immList[i]
    03\. It can be clubbed with other python lists and immutable lists. If
        lst is a python list and imm is an immutable list, the following can be
        performed to get a clubbed list:
        ret_list = lst + imm
        ret_list = imm + lst
        ret_list = imm + imm
    04\. It can be multiplied by an integer to increase the size
        (imm * 4 or 4 * imm)
    05\. It can be used in the slicing operator to extract sub lists (imm[3:4] or
        imm[:3] or imm[4:])
    06\. The len method can be used to get the length of the immutable list.
    07\. It can be compared with other immutable and python lists using the
        >, <, ==, <=, >= and != operators.
    08\. Existence of an element can be checked with 'in' clause as in the case
        of normal python lists. (e.g. '2' in imm)
    09\. The copy, count and index methods behave in the same manner as python
        lists.
    10\. The str() method can be used to print a string representation of the
        list similar to the python list.
    """

    @staticmethod
    def _list_append(lst, val):
        """
        Private utility method used to append a value to an existing list and
        return the list itself (so that it can be used in funcutils.reduce
        method for chained invocations.

        @param lst: List to which value is to be appended
        @param val: The value to append to the list
        @return: The input list with an extra element added at the end.

        """
        lst.append(val)
        return lst

    @staticmethod
    def _methods_impl(lst, func_id, *args):
        """
        This static private method is where all the delegate methods are
        implemented. This function should be invoked with reference to the
        input list, the function id and other arguments required to
        invoke the function

        @param list: The list that the Immutable list wraps.

        @param func_id: should be the key of one of the functions listed in the
            'functions' dictionary, within the method.
        @param args: Arguments required to execute the function. Can be empty

        @return: The execution result of the function specified by the func_id
        """

        # returns iterator of the wrapped list, so that for loop and other
        # functions relying on the iterable interface can work.
        _il_iter = lambda: lst.__iter__()
        _il_get_item = lambda: lst[args[0]]  # index access method.
        _il_len = lambda: len(lst)  # length of the list
        _il_str = lambda: lst.__str__()  # string function
        # Following represent the >, < , >=, <=, ==, != operators.
        _il_gt = lambda: lst.__gt__(args[0])
        _il_lt = lambda: lst.__lt__(args[0])
        _il_ge = lambda: lst.__ge__(args[0])
        _il_le = lambda: lst.__le__(args[0])
        _il_eq = lambda: lst.__eq__(args[0])
        _il_ne = lambda: lst.__ne__(args[0])
        # The following is to check for existence of an element with the
        # in clause.
        _il_contains = lambda: lst.__contains__(args[0])
        # * operator with an integer to multiply the list size.
        _il_mul = lambda: lst.__mul__(args[0])
        # + operator to merge with another list and return a new merged
        # python list.
        _il_add = lambda: reduce(
            lambda x, y: ImmutableList._list_append(x, y), args[0], list(lst))
        # Reverse + operator, to have python list as the first operand of the
        # + operator.
        _il_radd = lambda: reduce(
            lambda x, y: ImmutableList._list_append(x, y), lst, list(args[0]))
        # Reverse * operator. (same as the * operator)
        _il_rmul = lambda: lst.__mul__(args[0])
        # Copy, count and index methods.
        _il_copy = lambda: lst.copy()
        _il_count = lambda: lst.count(args[0])
        _il_index = lambda: lst.index(
            args[0], args[1], args[2] if args[2] else len(lst))

        functions = {0: _il_iter, 1: _il_get_item, 2: _il_len, 3: _il_str,
                     4: _il_gt, 5: _il_lt, 6: _il_ge, 7: _il_le, 8: _il_eq,
                     9: _il_ne, 10: _il_contains, 11: _il_add, 12: _il_mul,
                     13: _il_radd, 14: _il_rmul, 15: _il_copy, 16: _il_count,
                     17: _il_index}

        return functions[func_id]()

    def __init__(self, input_lst, copy_input_list=False):
        """
        Constructor of the Immutable list. Creates a dynamic function/closure
        that wraps the input list, which can be later passed to the
        _methods_impl static method defined above. This is
        required to avoid maintaining the input list as a data member, to
        prevent the caller from accessing and modifying it.

        @param input_lst: The input list to be wrapped by the Immutable list.
        @param copy_input_list: specifies whether to clone the input list and
            use the clone in the instance. See class documentation for more
            details.
        @return:
        """

        assert(isinstance(input_lst, list))
        lst = list(input_lst) if copy_input_list else input_lst
        self._delegate_fn = lambda func_id, *args: \
            ImmutableList._methods_impl(lst, func_id, *args)

    # All overridden methods.
    def __iter__(self): return self._delegate_fn(0)

    def __getitem__(self, index): return self._delegate_fn(1, index)

    def __len__(self): return self._delegate_fn(2)

    def __str__(self): return self._delegate_fn(3)

    def __gt__(self, other): return self._delegate_fn(4, other)

    def __lt__(self, other): return self._delegate_fn(5, other)

    def __ge__(self, other): return self._delegate_fn(6, other)

    def __le__(self, other): return self._delegate_fn(7, other)

    def __eq__(self, other): return self._delegate_fn(8, other)

    def __ne__(self, other): return self._delegate_fn(9, other)

    def __contains__(self, item): return self._delegate_fn(10, item)

    def __add__(self, other): return self._delegate_fn(11, other)

    def __mul__(self, other): return self._delegate_fn(12, other)

    def __radd__(self, other): return self._delegate_fn(13, other)

    def __rmul__(self, other): return self._delegate_fn(14, other)

    def copy(self): return self._delegate_fn(15)

    def count(self, value): return self._delegate_fn(16, value)

    def index(self, value, start=0, stop=0):
        return self._delegate_fn(17, value, start, stop)

def main():
    lst1 = ['a', 'b', 'c']
    lst2 = ['p', 'q', 'r', 's']

    imm1 = ImmutableList(lst1)
    imm2 = ImmutableList(lst2)

    print('Imm1 = ' + str(imm1))
    print('Imm2 = ' + str(imm2))

    add_lst1 = lst1 + imm1
    print('Liist + Immutable List: ' + str(add_lst1))
    add_lst2 = imm1 + lst2
    print('Immutable List + List: ' + str(add_lst2))
    add_lst3 = imm1 + imm2
    print('Immutable Liist + Immutable List: ' + str(add_lst3))

    is_in_list = 'a' in lst1
    print("Is 'a' in lst1 ? " + str(is_in_list))

    slice1 = imm1[2:]
    slice2 = imm2[2:4]
    slice3 = imm2[:3]
    print('Slice 1: ' + str(slice1))
    print('Slice 2: ' + str(slice2))
    print('Slice 3: ' + str(slice3))

    imm1_times_3 = imm1 * 3
    print('Imm1 Times 3 = ' + str(imm1_times_3))
    three_times_imm2 = 3 * imm2
    print('3 Times Imm2 = ' + str(three_times_imm2))

    # For loop
    print('Imm1 in For Loop: ', end=' ')
    for x in imm1:
        print(x, end=' ')
    print()

    print("3rd Element in Imm1: '" + imm1[2] + "'")

    # Compare lst1 and imm1
    lst1_eq_imm1 = lst1 == imm1
    print("Are lst1 and imm1 equal? " + str(lst1_eq_imm1))

    imm2_eq_lst1 = imm2 == lst1
    print("Are imm2 and lst1 equal? " + str(imm2_eq_lst1))

    imm2_not_eq_lst1 = imm2 != lst1
    print("Are imm2 and lst1 different? " + str(imm2_not_eq_lst1))

    # Finally print the immutable lists again.
    print("Imm1 = " + str(imm1))
    print("Imm2 = " + str(imm2))

    # The following statemetns will give errors.
    # imm1[3] = 'h'
    # print(imm1)
    # imm1.append('d')
    # print(imm1)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-23T04:59:48.747

您可以使用双元素元组模拟 Lisp 样式的不可变单链表（注意：这与[任何元素元组 answer](https://stackoverflow.com/a/11142398/558592)不同，后者创建的元组灵活性要差得多）：

```
nil = ()
cons = lambda ele, l: (ele, l) 
```

例如对于 list `[1, 2, 3]`，您将拥有以下内容：

```
l = cons(1, cons(2, cons(3, nil))) # (1, (2, (3, ()))) 
```

您的标准`car`和`cdr`功能很简单：

```
car = lambda l: l[0]
cdr = lambda l: l[1] 
```

由于此列表是单链接的，因此附加到前面是 O(1)。由于这个列表是不可变的，如果列表中的底层元素也是不可变的，那么您可以安全地共享任何子列表以在另一个列表中重用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-21T20:44:11.783

但是如果有数组和元组的元组，那么元组里面的数组是可以修改的。

```
>>> a
([1, 2, 3], (4, 5, 6))

>>> a[0][0] = 'one'

>>> a
(['one', 2, 3], (4, 5, 6)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-25T17:27:29.093

List 和 Tuple 在工作方式上有所不同。

在 LIST 中，我们可以在创建后进行更改，但是如果您想要一个有序的序列，将来不能应用任何更改，您可以使用 TUPLE。

更多信息：：

```
 1) the LIST is mutable that means you can make changes in it after its creation
 2) In Tuple, we can not make changes once it created
 3) the List syntax is
           abcd=[1,'avn',3,2.0]
 4) the syntax for Tuple is 
           abcd=(1,'avn',3,2.0) 
      or   abcd= 1,'avn',3,2.0 it is also correct 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-28T08:47:22.447

这个问题值得一个现代的答案，现在类型注释和类型检查通过`mypy`变得越来越流行。

使用类型注释时，用元组替换 a`List[T]`可能不是理想的解决方案。从概念上讲，列表的泛型数量为 1，即，它们有一个泛型参数`T`（当然，这个参数可以是 a`Union[A, B, C, ...]`来解释异构类型的列表）。相反，元组本质上是可变参数泛型`Tuple[A, B, C, ...]`。这使得元组成为一个尴尬的列表替换。

实际上，类型检查提供了另一种可能性：可以通过 using 将变量注释为不可变列表`typing.Sequence`，它对应于不可变接口的类型[`collections.abc.Sequence`](https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence)。例如：

```
from typing import Sequence

def f(immutable_list: Sequence[str]) -> None:
    # We want to prevent mutations like:
    immutable_list.append("something")

mutable_list = ["a", "b", "c"]
f(mutable_list)
print(mutable_list) 
```

当然，就运行时行为而言，这不是一成不变的，也就是说，Python 解释器会很高兴地 mutate `immutable_list`，并且输出会是`["a", "b", "c", "something"]`.

但是，如果您的项目使用类似的类型检查器`mypy`，它将拒绝以下代码：

```
immutable_lists_1.py:6: error: "Sequence[str]" has no attribute "append"
Found 1 error in 1 file (checked 1 source file) 
```

所以在后台你可以继续使用常规列表，但是类型检查器可以有效地防止在类型检查时发生任何突变。

同样，您可以防止修改列表成员，例如在不可变数据类中：

```
@dataclass(frozen=True)
class ImmutableData:
    immutable_list: Sequence[str]

def f(immutable_data: ImmutableData) -> None:
    # mypy will prevent mutations here as well:
    immutable_data.immutable_list.append("something") 
```

相同的原理可以通过`typing.Mapping`.

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-02-01T11:35:18.043

您可以使用frozenset 来代替元组。freezeset 创建一个不可变的集合。您可以使用 list 作为 freezeset 的成员，并使用单个 for 循环访问 freezeset 内列表的每个元素。

# javascript - 转义 html / javascript：使用 jQuery 将 db 字段的内容附加到 DOM

> ID：11142400
> 
> 赞同：1
> 
> 时间：2012-06-21T16:16:02.897
> 
> 标签：javascript, jquery, ruby-on-rails, escaping

我想在 Rails 中执行以下操作。在我的数据库的文本字段中，有以下 html / javascript：

```
<script type="text/javascript">
  document.write('<div id="test"></div>');
</script> 
```

我想将此字段的内容附加到DOM的head-tag中，这样插入的js就会被执行。

在我的 rails erb-view 中，我有以下内容：

```
<script type="text/javascript">
  var code = "<%= @ticket.code %>"; // Content of codesnippet above
  $('head').append(code);
</script> 
```

但是，我得到了一些视图的以下渲染输出：

```
var code = "&lt;script type=&quot;text/javascript&quot;&gt;
  document.write('&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;');
&lt;/script&gt;"; 
```

错误消息： **未终止的字符串文字**

我尝试使用 gsub 换行符和其他转义方式，但我不知道，实际上什么是最好的转义方式。我怎样才能将它正确地转义并插入到 DOM 中？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:21:05.297

我相信 rails 3 带有 JQuery，所以为什么不直接使用：

```
$(document).onload(function()
{ 
    document.write('<div id="test"></div>');
}); 
```

我相信在 var 代码上你应该执行以下操作：

```
var code = "<%= escape_javascript(@ticket.code.html_safe) %>" 
```

# z3 - 从 z3 模型断言定义会产生 unsat

> ID：11142407
> 
> 赞同：1
> 
> 时间：2012-06-21T16:16:31.627
> 
> 标签：z3

我有一组可以满足的断言给 z3。当我调用时`(check-sat)`，z3 返回`sat`。然后我调用`(get-model)`并查看特定变量的定义`%%P2_*_143`。它看起来像这样：

```
(define-fun %%P2_*_143 () JS (NUM 2.0)) 
```

如果我采用这个定义，把它变成断言

```
(assert (= %%P2_*_143 (NUM 2.0))) 
```

再次调用`(check-sat)`，z3 返回`unsat`. 此外，如果我再调用`(get-unsat-core)`， z3 会返回`()`。

我的理解是 z3 生成的模型对所有变量都给出了令人满意的赋值，因此断言赋值也应该是可满足的。这是不正确的，还是我在其他地方有错误？

整个断言集都在这个要点中：[https](https://gist.github.com/2966738) ://gist.github.com/2966738 。添加的断言位于最底部。

我在 Mac OS X 10.7.4 上使用 Z3 版本 3.2。我还能够使用[http://rise4fun.com/z3](http://rise4fun.com/z3)上的在线界面重现此行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:23:23.993

几天前报告了一个类似的错误。线性实数算术包中的模型构造存在错误。该错误已得到修复。Z3 使用无穷小来处理严格的不等式，详细信息在以下论文中进行了描述：[http ://research.microsoft.com/en-us/um/people/leonardo/cav06.pdf](http://research.microsoft.com/en-us/um/people/leonardo/cav06.pdf)

请注意，该错误不会影响求解器的健全性。也就是说，sat/unsat 答案是正确的。但是，模型不是。您示例中的第二个查询未满足，因为模型不正确。如果你需要，我可以提供一个新的二进制文件来解决这个问题。同时，您可以通过在脚本中添加以下命令来解决该错误：

```
(declare-fun delta () Real)
(assert (< 0.0000001 delta))
(assert (< delta 0.0000002)) 
```

# cllocationmanager - 分配给 CLLocationManager 的不兼容指针类型

> ID：11142414
> 
> 赞同：0
> 
> 时间：2012-06-21T16:16:58.930
> 
> 标签：cllocationmanager

所以我开发了一个独立的指南针应用程序（箭头旋转指向固定的纬度/经度点），它作为一个独立的项目完美地工作，但是当我将它合并到更广泛的项目中时，我遇到了一个问题。

最初我收到一个语义警告（不兼容的指针类型从'CLLoccation *__strong'分配给'CLLocationManager *'）：

```
- (void)locationManager:(CLLocationManager *)manager 
didUpdateToLocation:(CLLocation *)newLocation 
       fromLocation:(CLLocation *)oldLocation {

if (newLocation.horizontalAccuracy >= 0) {

    self.recentLocation = newLocation; (WARNING HERE)

CLLocation *POI2location = [[CLLocation alloc]
                                initWithLatitude:kPOI2Latitude 
                                longitude:kPOI2Longitude];
    CLLocationDistance delta = [POI2location 

                                distanceFromLocation:newLocation]; 
```

此外，我收到一个致命错误（在“CLLocationManager”类型的对象上找不到属性“坐标”）：

```
- (void)locationManager:(CLLocationManager *)manager
   didUpdateHeading:(CLHeading *)newHeading {

if (self.recentLocation != nil && newHeading.headingAccuracy >= 0) {
    CLLocation *POI2Location = [[CLLocation alloc]
                                initWithLatitude:kPOI2Latitude
                                longitude:kPOI2Longitude];

    double course = [self headingToLocation:POI2Location.coordinate
                                    current:recentLocation.coordinate]; (WARNING HERE) 
```

出于某种原因，它现在不喜欢“recentLocation”，而之前它都工作得很好。有人可以向我指出我错过了什么。我敢肯定，对于比我更有经验的人来说，这是显而易见的。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:25:13.680

今天早上又开始了，答案正盯着我看！

在 .h 文件中我会放

```
@property (strong, nonatomic) CLLocationManager *recentLocation; 
```

当我应该放

```
@property (strong, nonatomic) CLLocation *recentLocation; 
```

# excel - SUMIFS 和数组内的多个查找

> ID：11142421
> 
> 赞同：2
> 
> 时间：2012-06-21T16:17:38.230
> 
> 标签：excel, excel-2007

当组织者（A - 文本）使用时，我正在尝试使用 SUMPRODUCT 公式从特定周（C - 日期）和房间（E - 文本）中获取钱的总和（O - 数字）。

```
=SUMPRODUCT(--(A2:A3000=S2);--(E2:E3000=R2);--(WEEKNUM(C2:C3000)=3);O2:O3000) 
```

这在一次查找一个组织者时效果很好。

如何修改此公式以同时查找多个组织者？主办单位列于 S2:S10。

我在想类似以下的事情：

```
=SUMPRODUCT(--(A2:A3000=S2 OR S3 etc.);--(E2:E3000=R2);--(WEEKNUM(C2:C3000)=3);O2:O3000) 
```

另外 - 可以使用更快的 SUMIFS 以一种简单而整洁的方式完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:54:13.870

你可以像这样使用 MATCH

`=SUMPRODUCT(--ISNUMBER(MATCH(A2:A3000;S2:S10;0));--(E2:E3000=R2);--(WEEKNUM(C2:C3000+0)=3);O2:O3000)`

对于 SUMIFS，您需要一个辅助列来表示周数......

在 Z 列中使用周数尝试

`=SUMPRODUCT(SUMIFS(O:O;A:A;S2:S10;E:E;R2;Z:Z;3))`

假设在 S2:S10 中没有重复，否则您将重复计算。请注意，SUMPRODUCT 仅对由 SUMIFS 创建的数组（由于 S2:S10 是一个由九个值组成的数组）求和 - 后一个函数完成了艰苦的工作，因此它应该更快

顺便说一句，我不确定您的原始公式是否有效，因为 WEEKNUM 通常不接受范围......但除了数组之外它确实接受，因此我的版本中的 +0 ......

# ocean - 查找与 PropertyDataFilter1D 关联的属性

> ID：11142423
> 
> 赞同：1
> 
> 时间：2012-06-21T16:17:43.613
> 
> 标签：ocean, petrel

我有一个用户输入的 PropertyDataFilter1D。如何确定哪个支柱网格属性与该过滤器相关联？过滤器包含一个 PropertyVersionBase 成员，但我不知道如何用它查找属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:57:57.920

这里有一个问题：Ocean API 允许您从 PropertyVersion 创建 PropertyDataFilter1D，而 Petrel 中的原生过滤器是从属性创建的。而且，Ocean 没有公开对 Petrel 属性的任何引用。换句话说，如果您有两个过滤器用于两个不同的孔隙度属性，但两个属性都基于相同的孔隙度模板，那么从海洋站点来看，这两个过滤器的孔隙度 PropertyVersion（模板）将是相同的。

# c# - 在实体框架 4 中使用复合主键创建两个表之间的关系

> ID：11142426
> 
> 赞同：0
> 
> 时间：2012-06-21T16:17:55.280
> 
> 标签：c#, sql-server, visual-studio-2010, entity-framework-4

我在 SQLServer 2008 中有一个数据库。

我有一个表“Table1”，其中三行作为主键，我需要与另一个表“Table2”创建关系，但我不想在 Table2 中添加 Table1 的三个字段才能创建关系.

因此，我在 Table1 中添加了一个名为 IdRow 且类型为 Int 和 Indentity=yes 的新字段，并为这个新字段创建了一个“唯一键”类型的索引，因此我可以基于这个新字段而不是三个其他。

到目前为止一切顺利，但是当我将这两个表导入实体框架模型中的模型时，它不会将 IdRow 识别为唯一的，因此我无法根据该字段创建与 Table2 的关系。

有人可以帮我弄这个吗？

是否有解决此问题的解决方法，或者我必须在 Table2 中添加 Table1 的三个字段来创建关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:20:11.440

好吧，我会做相反的事情。

你不能把新的 idRow 作为主键，并在你的其他 3 个字段上添加一个 UNIQUE 约束吗？

# python - linux上http服务器的问题

> ID：11142427
> 
> 赞同：0
> 
> 时间：2012-06-21T16:17:58.700
> 
> 标签：python, performance, http

我有这样的问题。我有本地 http 服务器（BottlePy 或 Django），当我使用 http://localhost/ 或 http://127.0.0.1/ - 它会立即加载。但是当我使用我的本地 IP（192.168.1.100）时，它会加载很长时间（几分钟）。可能是什么问题呢？

服务器在 Ubuntu 11 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:33:53.537

你应该看看 [本地主机上的慢速 Python HTTP 服务器，](https://stackoverflow.com/questions/2617615/slow-python-http-server-on-localhost)
类似的问题已经在那里解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:19:30.267

看来您的 DNS 有问题。你能检查一下这个想法`host 192.168.1.100`在主机上运行吗？还请检查是否正在快速处理其他 DNS 查询。检查`/etc/hosts`文件以获取快速而肮脏的解决方案。

# java - HtmlUnit 网页状态码

> ID：11142440
> 
> 赞同：4
> 
> 时间：2012-06-21T16:18:42.477
> 
> 标签：java, http-status-code-404, htmlunit

我正在尝试获取给定页面的网络状态。但是，当它出现 404 错误时，页面不会返回状态代码，而是会抛出错误。

```
int status= webClient.getPage("website").getWebResponse().getStatusCode();
System.out.println( status); 
```

有任何想法吗？

我希望查看站点何时超时，但是出于测试目的，我将所需网站的 url 格式错误，以查看是否可以看到 404。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T16:22:40.587

据此[_](https://stackoverflow.com/questions/5240221/htmlunit-404-error-for-scripts-within-page)

你可以这样做：

```
webclient.setThrowExceptionOnFailingStatusCode(False) 
```

****编辑 ***

这会打印出您的状态码：

```
 WebClient webClient = new WebClient();
 webClient.setThrowExceptionOnFailingStatusCode(false);
 int status = webClient.getPage("http://google.co.uk/ffffff").getWebResponse()
            .getStatusCode();
 System.out.println(status); 
```

打印出 404 - 你的状态码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-02T17:56:12.003

或者，您可以继续允许抛出 FailingHttpStatusCodeException (true)。然后在 catch 子句中获取错误状态代码。

```
...
int status = 0;
Object page = null;
try {
     page = webClient.getPage(webRequest);
     webClient.close();
     if (page instanceof UnexpectedPage) {
         status = ((UnexpectedPage) page).getWebResponse().getStatusCode();
     } else if (page instanceof HtmlPage) {
         status = ((HtmlPage) page).getWebResponse().getStatusCode();
     }
     // do something else ...
} catch (FailingHttpStatusCodeException | IOException e) {
     if (e instanceof FailingHttpStatusCodeException) {
          status = ((FailingHttpStatusCodeException) e).getStatusCode();
     }
     // do something else ...
} 
```

# android - Android上持久移动连接的最佳实践？

> ID：11142443
> 
> 赞同：5
> 
> 时间：2012-06-21T16:18:50.333
> 
> 标签：android, xmpp, websocket, real-time

我正在考虑使用从 Android 应用程序到“云服务”的持久连接。这将一直在后台服务（或类似的服务）中运行。

我正在考虑使用网络插座或 XMPP 来保持连接，基本上是在寻找不会耗尽电池的轻量级连接。我**希望能够将通知实时推送**到此连接，因此不需要定期轮询。*我知道 C2DM 和其他商业解决方案，但我希望推出自己的*. 这就是为什么我正在研究网络套接字（或其他轻量级连接）的原因。所以如果我走这条路，我应该注意哪些最佳实践？

我在想类似的东西：

1.  如何防止电池耗尽，
2.  如何处理IP地址更改等？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T16:32:40.067

这可能不是您正在寻找的答案，但我认为您可能想要重新考虑您的架构。

您可以从移动平台中获得的东西

*   您的 IP 地址随机更改
*   您的物理互联网连接将随机丢失
*   操作系统决定你不做任何有用的事情并杀死你的进程
*   连接类型随机变化（从 WIFI 到 4G 到 3G 到边缘），因此您的 IP 会发生变化

基本上，您的应用程序需要能够处理连接丢失，因为它几乎肯定会发生。

话虽如此，这完全取决于您对实时的定义。如果您愿意不断检查是否仍有可行的连接，则可以将任何延迟控制在分钟范围内。但这会耗尽电池电量，您对此无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T23:58:42.173

有些事情就是不能很好地结合在一起。那就是*“实时推送通知”*和*“防止电池耗尽”*。你肯定要在这里做出妥协。

我只能建议尝试一些使用 XMPP 的 Android 应用程序，以了解它们如何处理持久连接、IP 地址更改和电池消耗。如果它们是开源的，您还可以查看代码并从中学习。Yaxim、Project MAXS 和 Beem 等等。也许你也应该看看[XEP-0286: XMPP on Mobile Devices](http://xmpp.org/extensions/xep-0286.html)

也就是说，当 Google 为您提供 C2DM 时，您确定要重新发明轮子吗？针对此用例进行了优化。我认为它有一些延迟，所以它不是“实时”的。但同样，您最终会得到一个积极尝试建立持久连接并耗尽电池电量的解决方案，或者您将不得不忍受某种延迟（约 0-30 分钟）。

# ruby-on-rails - 如何用假数据填充数据库？

> ID：11142446
> 
> 赞同：1
> 
> 时间：2012-06-21T16:18:55.740
> 
> 标签：ruby-on-rails, ruby, rubygems

我听说过像 faker 或 populator 这样的 gem，但它们有点老了（populator 似乎不能很好地与 Rails 3 配合使用）。

所以我的问题是，你用什么来生成固定装置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T16:55:58.443

如果您对 ruby​​ 的新夹具框架感兴趣，请查看[Fabrication](http://fabricationgem.org/)。它看起来像[FactoryGirl Rails](https://github.com/thoughtbot/factory_girl_rails)，但有更多感兴趣的功能。我们将它与 Faker 一起使用，这很好。我认为这是当今最好的解决方案:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:25:38.450

大多数人使用[FactoryGirl Rails](https://github.com/thoughtbot/factory_girl_rails)，它可以与 Faker 很好地配合使用来执行诸如随机名称之类的操作，以便在测试期间生成测试数据。

如果有时您只想用一些假数据填充您的开发数据库以使您的应用程序正常工作，您仍然可以使用 FactoryGirl Rails 并创建一个 Rake 任务来填充您需要的一些数据。

# jquery - jQuery 使用 .attr() .first() 检测第一段高度不同

> ID：11142450
> 
> 赞同：0
> 
> 时间：2012-06-21T16:19:05.327
> 
> 标签：jquery

我正在尝试获取 div 中的第一段高度并将其存储为属性。

它适用于 class 的第一个 div 中的第一段`.actor-bio`。

在带有类的第二个 div 上，`.actor-bio`它显示第一个 div 段落的属性。

```
 //has to be in an each to get different values of varying paragraph lengths
    $('.actor-bio').each(function(){

        //Gets original height of the content area
        $(this).attr('originalheight', $(this).innerHeight());

        //Gets the first paragraph height
        $('p', this).first().attr('firstpheight', $('p',this).first().innerHeight());

        //Gets the first h3 height
        $('h3', this).first().attr('firstheaderheight', $('h3',this).first().innerHeight());

        //Sets the height of the wrapper to first paragraph height + h3 height
        $(this).css({height : parseFloat($('p', $(this).closest('.actor-bio-wrapper')).first().attr('firstpheight')) + parseFloat($('h3', $(this).closest('.actor-bio-wrapper')).first().attr('firstheaderheight'))});

    }); 
```

有没有人有任何建议？

提前致谢

********编辑 16:44GMT 22/06/2012* ***** *****

 **这是 jsFiddle 链接：http: [//jsfiddle.net/SqzL5/2](http://jsfiddle.net/SqzL5/2)

令人讨厌的是，我的代码可以与 jsFiddle 一起使用，它必须与其他`(this)`地方的另一个“”混淆，从而导致问题。使用 defuz 的方法也适用于 jsFiddle，但不适用于我的网站 grr。[http://jsfiddle.net/SqzL5/1/](http://jsfiddle.net/SqzL5/1/)

********编辑 11:17GMT 26/06/2012* ***** *****

 **是的，我放弃了这种方法，因为代码似乎只获得了 1 段值。无论如何，我这样做了。

```
 // Read more after first paragraph

if($('.read-bio').length>0){

        //has to be in an each to get different values of varying paragraph lengths
        $('.actor-bio').each(function(index, item){

                $('p:not(:first)', item).hide();

        });

        $('.read-bio').click(function(){

                //If class has class 'clicked' animate to first p height + h3 height
                if($(this).hasClass('clicked')){
                        $('.actor-bio p:not(:first)', $(this).closest('.actor-bio-wrapper')).animate({height: 'toggle'});
                        $(this).html('&raquo; <strong>Read</strong> More').removeClass('clicked');
                } 

                //If no 'clicked' class, animate the height to the original height of the text
                else{

                        $('.actor-bio p:not(:first)', $(this).closest('.actor-bio-wrapper')).animate({height: 'toggle'});
                        $(this).html('&raquo; <strong>Read</strong> Less').addClass('clicked');

                }

                //stops the stupid # appearing the address bar
                return false;

        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:30:43.390

我认为你没有`this`正确使用。尝试：

```
//has to be in an each to get different values of varying paragraph lengths
$('.actor-bio').each(function(index, item){

    //Gets original height of the content area
    $(item).attr('originalheight', $(item).innerHeight());

    //Gets the first paragraph height
    $('p', item).first().attr('firstpheight', $('p',item).first().innerHeight());

    //Gets the first h3 height
    $('h3', item).first().attr('firstheaderheight', $('h3',item).first().innerHeight());

    //Sets the height of the wrapper to first paragraph height + h3 height
    $(item).css({height : parseFloat($('p', $(item).closest('.actor-bio-wrapper')).first().attr('firstpheight')) + parseFloat($('h3', $(this).closest('.actor-bio-wrapper')).first().attr('firstheaderheight'))});

}); 
```****

# android - 如何改进 android 中的 SQLite 查询？

> ID：11142455
> 
> 赞同：1
> 
> 时间：2012-06-21T16:19:22.127
> 
> 标签：android, sqlite

我对此有点迷茫。我有一个从具有 439397 条记录 (~32MB) 的静态 SQLite 数据库中读取的应用程序。

我在索引的列上查询数据库，但完成查询需要大约 8-12 秒。我正在使用的当前查询是对 id 列表执行 database.query(tableName, columnHeaders, "some_id=" + id) 。

我尝试使用“WHERE some_id IN (id1, id2, id3)”方法，但耗时是原来的两倍。我有一种感觉，我可能做错了。

查询是在 AsyncTask 中完成的，所以我不知道我还能做些什么来提高性能。

*   更新：

我通过更改应用程序的行为解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:40:08.940

看起来您在该字段上没有索引。请注意，如果您在实际查询中使用它们进行过滤/排序/分组，索引可能需要涵盖多个字段（无法详细说明，因为我还没有看到它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:34:00.510

您可以使用它[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/lang_explain.html)来确认您的索引确实被正确使用。

您可以尝试使用 a`COUNT(*)`而不是真正的列列表运行一次查询，以查看问题是否是从闪存存储中实际读取行数据的行为（如果有很多匹配项和很多大列，则可能） .

您可以尝试运行查询以匹配单个 ID（而不是其中 N 个），以开始尝试处理问题是否是太多比较。

但是，请记住，这`AsyncTask`并不能以某种方式让事情变得神奇地更快。它使事情神奇地不在主应用程序线程上运行。

# mod-rewrite - mod_rewrite：不重写任何子域

> ID：11142456
> 
> 赞同：0
> 
> 时间：2012-06-21T16:19:27.447
> 
> 标签：mod-rewrite, singlepage

有没有办法免除对 mod_rewrite 中子域的任何请求？现在，我有一个将所有内容重定向到 index.html 的单页应用程序。

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !index
  RewriteRule (.*) index.html [L]
</IfModule> 
```

但我想确保对 subdomain.mydomain.com 的调用永久免于重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:41:43.983

您可以使用子域上的条件和`-`替换来停止重写。来自[http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewriterule)

> 有一个名为“-”的特殊替换字符串，这意味着：没有替换！这对于提供仅匹配 URL 但不替换任何内容的重写规则很有用。

尝试

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^subdomain\.mydomain\.com$ [NC]
RewriteRule .* - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !index
RewriteRule (.*) index.html [L] 
```

# r - R 因子值变化

> ID：11142457
> 
> 赞同：0
> 
> 时间：2012-06-21T16:19:33.283
> 
> 标签：r, loops, numeric, na, r-factor

我正在尝试在 R 中进行一些数据操作。我有 2 个数据框，一个是训练数据，另一个是测试数据，所有数据都是分类数据并存储为因子变量。

数据中有一些 NA，我正在尝试将它们转换为“-1”。当我为训练数据做这件事时，一切都很好，但对测试数据却不是。

在我运行的循环中有些东西会改变值，但我不知道是什么。

这是之前的：

```
> class(catTrain1[,"Cat_111"])
[1] "factor"
> class(catTest1[,"Cat_111"])
[1] "factor"

> table(catTrain1[,"Cat_111"])

  1   2 
726  25 
> table(catTest1[,"Cat_111"])

  0   1   2 
  1 503  15 
```

这是循环：

```
> for(i in 1:ncol(catTrain1)){
+ catTrain1[,i] <- as.factor(as.character(ifelse(is.na(catTrain1[,i]), "-1", catTrain1[,i])))
+ }
> for(i in 1:ncol(catTest1)){
+ catTest1[,i]  <- as.factor(as.character(ifelse(is.na(catTest1[,i]), "-1", catTest1[,i])))
+ } 
```

后面是这样的：

```
> table(catTrain1[,"Cat_111"])

  1   2 
726  25 
> table(catTest1[,"Cat_111"])

  1   2   3 
  1 503  15 
```

我已经看到使用字符-> 数字转换时上移了一个，但我无法弄清楚为什么会发生这种情况，尤其是对于其中一个数据帧/循环。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:52:01.520

试试这个。（更像r，矢量化）：

```
levels( catTest1[,"Cat_111"] ) <- c( catTest1[,"Cat_111"], "-1")
catTest1[,"Cat_111"][ is.na(catTest1[,"Cat_111"]) ] <- -1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:41:17.580

您的第一组调用中的列名`table`是因子的级别。在对 的第二组调用中`table`，列名是级别索引。`ifelse`正在拉动指数，而不是水平。在你的循环中，`as.character`在最后的`catTest1[,i]`和周围移动`catTrain1[,i]`。

# ms-access - 在 JOIN 语句中执行 CStr() 表达式

> ID：11142458
> 
> 赞同：5
> 
> 时间：2012-06-21T16:19:36.230
> 
> 标签：ms-access, join, type-conversion

我在不同的链接表中有两个字段，它们的数据相同，但数据类型不同。我无法更改表中的数据类型。我正在尝试基于此数据将两个表连接在一起的查询，但由于类型不同，我需要将数字转换为字符串。我一直在尝试的基本上是这样的：

```
...
FROM Table1 LEFT JOIN Table2 ON CStr([Table1].[Column]) = Table2.Column
... 
```

我只是不断收到错误消息，主要是“不支持连接表达式”。

任何人都可以阐明我可能做错了什么/我可以做得更好吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T04:26:53.473

这是您`FROM`重新格式化的子句：

```
FROM
    Table1.Column
    LEFT JOIN Table2.Column
    ON CStr([Table1].[Column]) = Table2.Column 
```

请注意，它使用`Table1.Column`和`Table2.Column`作为数据源。这些是列（字段），而不是表（真实或虚拟）。

试试这种方式：

```
FROM
    Table1
    LEFT JOIN Table2
    ON CStr([Table1].[Column]) = Table2.Column 
```

Access 的查询设计器无法处理在 ON 表达式中包含函数的 JOIN。尽管我没有看到使您的问题中的问题混淆的证据，但我建议您通过将以下语句粘贴到“立即”窗口并在那里执行来排除这种可能性。

```
Set rs = CurrentDb.OpenRecordset( _
"SELECT Count(*) AS row_count" & vbCrLf & _
"FROM Table1 AS t1" & vbCrLf & _
"LEFT JOIN Table2 AS t2" & vbCrLf & _
"ON CStr(t1.[Column])=t2.[Column];") : _
? rs(0) : _
rs.Close : _
Set rs = Nothing 
```

请注意，这些行继续字符（下划线、“_”）中的每一个都必须以空格开头，并且后面不能有任何字符。

# actionscript-3 - as3中的JPEGencode问题

> ID：11142462
> 
> 赞同：0
> 
> 时间：2012-06-21T16:19:57.380
> 
> 标签：actionscript-3

这是我的代码。我想要实现的是能够从相机捕获图像并将其上传到媒体服务器，但到目前为止我还无法成功对其进行编码。有人可以指出我正确的方向吗？

这是代码

```
 var imagePromise:MediaPromise = event.data;
  imageLoader = new Loader();
  imageLoader.contentLoaderInfo.addEventListener( Event.COMPLETE, asyncImageLoaded );
  imageLoader.addEventListener( IOErrorEvent.IO_ERROR, cameraError );
  imageLoader.loadFilePromise( imagePromise );
  function asyncImageLoaded(event:Event):void
    {

var destination:String = "upload.php";
var now:Date = new Date();
var fileName = "IMG" + now.fullYear + now.month + ".jpg";
var image:Bitmap = Bitmap(imageLoader.content);
var bitmapData:BitmapData = image.bitmapData;
var j = new JPGEncoder(80);
var bytes:ByteArray = j.encode(bitmapData);

      } 
```

这是我尝试对图像进行编码时遇到的错误

TypeError：错误 #1009：无法访问空对象引用的属性或方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:54:50.980

哪条线？1009 表示您正在尝试访问 NULL 的变量。我猜在这种情况下，它可能是这样的：

```
var image:Bitmap = Bitmap(imageLoader.content); 
```

尝试添加这个：

```
if (imageLoader.content is Bitmap) {
    var image:Bitmap = Bitmap(imageLoader.content);
} else {
    throw new Error("What the heck bob?");
} 
```

如果这是一个错误，我敢打赌内容没有正确解码（这可能意味着不是图像/jpg的mime类型）

此外，您可能可以使用本机 jpeg 编码器来提高速度：（我相信 flash 11？）

```
var byteArray:ByteArray = new ByteArray(); 
bitmapData.encode(new Rectangle(0,0,640,480), new flash.display.JPEGEncoderOptions(), byteArray); 
```

[http://help.adobe.com/en_US/as3/dev/WS4768145595f94108-17913eb4136eaab51c7-8000.html](http://help.adobe.com/en_US/as3/dev/WS4768145595f94108-17913eb4136eaab51c7-8000.html)

# php - PDO 和字母数字字符串？

> ID：11142465
> 
> 赞同：0
> 
> 时间：2012-06-21T16:20:04.497
> 
> 标签：php, pdo

从命令行运行时的当前错误是“调用非对象上的成员函数 bindParam()”，我发现这是变量 $orderPO 的问题。有些东西不喜欢非数字字符，这导致我使用了也不起作用的 bindParam PARAM_STR 业务。数据库字段都是 varchar 50。

我的搜索技巧让我失望了。我知道这必须在某个地方发布大约一百万次，但我似乎找不到它。如果有人有更好的主意，我完全愿意以另一种方式这样做。

当前尝试代码：

```
try
{
    $orderNum = '123456';
    $orderPO = '123456-A';

    $dbh = new PDO("mysql:host=localhost;dbname=dbname", 'someuser', 'somepass');
    $stm = $dbh->prepare("insert into some_table (order_number, order_po)");
    $stm->bindParam(':order_number', $orderNum, PDO::PARAM_STR);
    $stm->bindParam(':order_po', $orderPO, PDO::PARAM_STR);
    $stm->execute();
    print_r($stm);
    print_r($dbh);
    $arr = $stm->errorInfo();
    print_r($arr);
    $stm->closeCursor();
    $dbh = null;
}
catch(PDOException $e)
{
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:24:44.177

为了使用 PDO 绑定参数，您需要使用**占位符**，如下所示：

```
$stm = $dbh->prepare("
    INSERT INTO `some_table` SET
        `order_number` = :order_number,
        `order_po` = :order_po
");
$stm->bindParam(':order_number', $orderNum, PDO::PARAM_STR);
$stm->bindParam(':order_po', $orderPO, PDO::PARAM_STR); 
```

`:`请注意在命名占位符之前包含字符。我还在您的查询中添加了列名。

进一步阅读并查看示例：[PDO bindParam](http://php.net/manual/en/pdostatement.bindparam.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:23:53.313

正确的语法是

```
$stm = $dbh->prepare("insert into some_table (order_number, order_po) VALUES (?, ?)");
$stm->bindParam(1,$orderNum);
$stm->bindParam(2,$orderPO); 
```

包括问号，bindParam 调用中的数字是指您将参数绑定到哪个问号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:24:34.400

您正在尝试使用 bindparam，但绑定参数匹配？不是游标:. 您没有包含任何参数或值。

此外，您在查询中缺少 VALUES 语句，这导致查询失败。这就是为什么您会得到*“在非对象上调用成员函数 bindParam()”的原因*

要使用 :value 语法，请使用 bindValue，而不是 bindParam。要使用 bindParam，请将 :value 切换为 ? 在您的查询中并按顺序编号它们是您的执行数组。

```
try
{

    $orderNum = '123456';
    $orderPO = '123456-A';

    $dbh = new PDO("mysql:host=localhost;dbname=dbname", 'someuser', 'somepass');
    $stm = $dbh->prepare("insert into some_table (order_number, order_po) VALUES (:order_number, :order_po)");
    $stm->bindvalue(':order_number', $orderNum, PDO::PARAM_STR);
    $stm->bindvalue(':order_po', $orderPO, PDO::PARAM_STR);
    $stm->execute();
    print_r($stm);
    print_r($dbh);
    $arr = $stm->errorInfo();
    print_r($arr);
    $stm->closeCursor();
    $dbh = null;
}
catch(PDOException $e)
{
    echo $e->getMessage();
} 
```

# java - 请帮助我保持主窗口打开

> ID：11142466
> 
> 赞同：2
> 
> 时间：2012-06-21T16:20:06.313
> 
> 标签：java, swing, jframe

我有一个主窗口，它打开另一个窗口。我想关闭这个窗口并保持主窗口打开，但它也关闭了主窗口。

我尝试了很多方法：setDefaultCloseOperation()、dispose()、setVisible()，但对我没有任何效果。

在主窗口中我有这个代码

```
private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
    AdaugaComanda ac = new AdaugaComanda();
    ac.setVisible(true);
        }   
public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new FereastraPrincipala().setVisible(true);
      }});} 
```

在另一个窗口中（当我关闭它时关闭主窗口）我有以下代码

```
public class AdaugaProdus extends javax.swing.JFrame {

public AdaugaProdus() {
    initComponents();
    initComboBoxes();

}

public static void main(String args[]) {

    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            AdaugaProdus ad = new AdaugaProdus();
            ad.setVisible(true);

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:44:52.740

一个可能的简单解决方案：使辅助窗口成为对话框，例如 JDialog，而不是 JFrame。一个应用程序通常一次只打开一个 JFrame。JDialog 可以像任何 JFrame 一样拥有复杂的 GUI，并且当它关闭时，它永远不会像 JFrame 那样关闭 JVM（正如您所发现的那样）。您还可以根据需要选择是否将对话框设为模态。

话虽如此，请理解虽然新信息可以显示为 JFrame 拥有的对话框，但也可以通过 CardLayout 通过交换 JFrame 上的组件来显示 - 这取决于您的信息类型试图展示。

# performance - RavenDB 中哪个最有效：大量的小文档，还是单个大文档？

> ID：11142475
> 
> 赞同：1
> 
> 时间：2012-06-21T16:20:34.113
> 
> 标签：performance, ravendb, database-performance, processing-efficiency

我需要在 RavenDB 中存储大量（约 50,000 个）小数据。当我读回这些数据时，我每次都会阅读全部内容。写作时，我可以写全部或每篇文章。

数据如下所示：

```
public class Item
{
    public int  Id    { get; set; }
    public long Value { get; set; }
} 
```

我可以轻松地将其存储为单个`Dictionary<int, long>`而不是`Item`对象集合的文档包装器。

这些方法中哪一种在 RavenDB 中更有效？

如果我的数据集增加到〜500,000，效率差异会被夸大（在读取情况下）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:09:15.207

这些数据是什么？它们是如何连接的？你打算多久读一次这个集？你会有多少不同的套装？他们多久会改变一次？您是否总是一口气需要它们？

问题是您在此模型中的事务边界是什么。只要你改变它的一部分，整个事情都会在某种程度上改变，把它放在一个文档中是有意义的。

当您可以将其缓存时，变得太大的文档不是问题 - 查找 Aggressive Caching。

# php - Ajax 帖子显示不充分的消息

> ID：11142477
> 
> 赞同：0
> 
> 时间：2012-06-21T16:20:36.137
> 
> 标签：php, ajax, post

我是 AJAX 方法的新手。我想发布一些由 php 页面处理的信息，称之为 page.php

在我的 html 页面中，我输入了以下代码：

```
<script type="text/javascript" charset="utf-8">
//I have put the function getXMLHttpRequest() on a separate js file
function getXMLHttpRequest() {
    var xhr = null;

    if (window.XMLHttpRequest || window.ActiveXObject) {
        if (window.ActiveXObject) {
            try {
                xhr = new ActiveXObject("Msxml2.XMLHTTP");
            } catch(e) {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
        } else {
            xhr = new XMLHttpRequest(); 
        }
    } else {
        alert("Votre navigateur ne supporte pas l'objet XMLHTTPRequest...");
        return null;
    }

    return xhr;
}

function request(callback) {
    var xhr = getXMLHttpRequest();

    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)) {
            callback(xhr.responseText);
        }
    };

    xhr.open("POST", "page.php", true);
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhr.send("name=proposition");
}

function postData(Data) {

    alert(Data);

}
</script>

<button onclick="request(postData);">...</button> 
```

在page.php中，我有一个方法

```
protected function comment(){
//some code processing the posted infos (that works fine)...

//to debug, I have put a
echo('Hello world');

} 
```

事实是我没有收到任何“Hello world”，而是一条巨大的警报消息，其中显示了我的所有网页代码。

有人有想法吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:24:19.760

您在 page.php 中定义了一个函数，但从不调用它。并删除受保护的关键字，因为它没有意义（你不是在上课）

尝试

```
function comment(){
//some code processing the posted infos (that works fine)...

//to debug, I have put a
echo('Hello world');

}

comment(); 
```

# javascript - 使用prototype js，如何在用户点击链接时打开对话窗口并显示动态内容

> ID：11142479
> 
> 赞同：0
> 
> 时间：2012-06-21T16:20:47.750
> 
> 标签：javascript, prototypejs

我有一张有几行和几列的表。用户点击给定的文本和对话框应该打开动态内容。

例如

```
<tr> 
  <td>
    <strong>item1</strong>
  </td>
</tr>
<tr> 
 <td>
    <strong>item2</strong>
 </td>
</tr> 
```

用户单击 item1 或 item2 并打开一个带有相关文本的 javascript 窗口。

我可以使用prototypejs 和window.js 来做到这一点，这似乎可以工作，但看起来不像干净的javascript。

```
<td>
  <a href='javascript:openModalDialog("<?php echo item1Id?>")'><strong>item1</strong></a>
</td>

<td>
 <a href='javascript:openModalDialog("<?php echo item2Id?>")'><strong>item2</strong></a>
</td> 
```

我想通过事件侦听器使用无障碍 javascript

```
$$('.myClass').invoke('observe', 'click', function(event){
    openModalDialog("dynamic content")  ;   
});

<span class="myClass"><span style="display:none"><?php echo item1Id?></span>item1</span>

<span class="myClass"><span style="display:none"><?php echo item2Id?></span>item2</span> 
```

我不想显示 item1Id，item2Id，当用户点击 item1 或 item2 时，PHP 会将其替换为需要在弹出窗口中显示的动态内容。

我在正确的轨道上吗？

如何在 onclick 中访问 item1Id 或 item2Id 内容并将其传递给 openModalDialog？

* * *

我不太确定在另一个跨度内跨度是最好的方法，但我能想到它工作的唯一方法。

我需要的是如何访问处理程序中的动态内容。

例如

页面加载时

```
<span class="myClass"><span style="display:none"><?php echo item1Id?></span>item1</span>
<span class="myClass"><span style="display:none"><?php echo item2Id?></span>item2</span> 
```

可能会变成类似

```
<span class="myClass"><span style="display:none">This is dynamic content generated by php </span>item1</span>
<span class="myClass"><span style="display:none">some more different content </span>item2</span> 
```

因此，在用户单击 item1 时的处理程序中，我需要内容“这是由 php 生成的动态内容”，因此我可以将其传递给 openModalDialog 函数。我如何访问内容，这对于每一行都是不同的。

有任何想法吗？

当我做 console.log(this) 我得到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:29:44.617

对我来说，您似乎走在正确的轨道上。至于如何访问item1Id或者item2Id，可以看这个demo：http: [//jsfiddle.net/yg7XX/](http://jsfiddle.net/yg7XX/)

我已经很好地评论了它，希望它可能会有所帮助。顺便说一句，我以前从未使用过原型。我的解决方案只是由于使用 jQuery 而产生的猜测，并且猜测成功了！:)

# python - 为什么这个命令适用于 os.system() 而不是 subprocess.Popen()？

> ID：11142485
> 
> 赞同：9
> 
> 时间：2012-06-21T16:21:14.937
> 
> 标签：python, subprocess

我想从 q 中删除一些作业。删除作业的命令是`qdel JOBid`。

最初，我尝试使用 subprocess 模块，但出现错误：#!/usr/bin/env python

```
 import sys, os, subprocess as sp

 lo = sys.argv[1]
 hi = sys.argv[2]

 lo = int(lo)
 hi = int(hi)

for i in range(lo,hi):
    print "i is %d"%i
    p=sp.Popen(['qdel %d'%i],stdout=sp.PIPE)
    #os.system('qdel %d'%i) 
```

所以这没有用。我得到的错误是

```
Traceback (most recent call last):
File "del.py", line 14, in <module>
p=sp.Popen(['qdel %d'%i],stdout=sp.PIPE)
File "/usr/lib64/python2.6/subprocess.py", line 639, in __init__
errread, errwrite)
File "/usr/lib64/python2.6/subprocess.py", line 1228, in _execute_child
raise child_exception
OSError: [Errno 2] No such file or directory 
```

然后我注释掉了 subprocess 行并使用了 os 并且它立即工作。我想我没有完全理解 subprocess 模块

```
#!/usr/bin/env python

import sys, os, subprocess as sp

lo = sys.argv[1]
hi = sys.argv[2]

lo = int(lo)
hi = int(hi)

    for i in range(lo,hi):
         print "i is %d"%i
         #p=sp.Popen(['qdel %d'%i],stdout=sp.PIPE)
         os.system('qdel %d'%i) 
```

上面的代码完美无缺。我只是想知道子流程模块的原因和优势是什么。另外，我使用的是 unix shell

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:25:46.657

您想在 Popen 通话中使用 shell=True 。

```
p=sp.Popen(['qdel %d'%i], shell=True, stdout=sp.PIPE) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:33:56.893

如果你阅读[手册](http://docs.python.org/library/subprocess.html#subprocess.Popen)，你会发现你的调用`Popen`是错误的：你不应该传递一个命令，而应该传递一个参数数组：

```
p=sp.Popen(['qdel', '%d'%i],stdout=sp.PIPE) 
```

或者，正如[sc0tt 的回答](https://stackoverflow.com/a/11142562/929437)指出的那样，您可以使用`shell=True`，但这在更复杂的情况下有一些缺点：您必须手动转义命令中的所有变量数据，以防它包含例如带空格的文件名或更多潜在有害（如`;`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-20T12:21:38.260

我也遇到了同样的问题。使用 shell=True 作为参数之一解决了我的问题。

# prolog - Prolog：用户输入和多个输出

> ID：11142486
> 
> 赞同：0
> 
> 时间：2012-06-21T16:21:18.887
> 
> 标签：prolog, user-input

```
student(foo).
student(bar). 
```

知识库

```
ask(Q) :- ask(Q,A).
ask(Q,A) :- ..... 
```

ask(Q,A) 采用由 getentence(S) 生成的链表形式提出问题。

```
run(A) :-
  write('enter question/statement: '),
  getsentence(S), nl,
  ask(S,A). 

/*
1 ?- ask([who,is,a,student],A).
A = foo ;
A = bar ;
false.

2 ?- run(A).
enter question/statement:who is a student.

A = foo .

*/ 
```

仅显示一个结果而不是多个结果作为输出。我觉得我错过了一些非常简单的东西，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:37:50.940

添加

```
findall(A, ask(S,A), AllAnswers). 
```

代替

```
ask(S,A). 
```

这样，当 ask(S,A) 成功时，AllAnswers 将匹配 A 的所有可能值的列表。

# python - 我可以直接将静态文件的内容作为视图的 Http 响应提供服务吗？

> ID：11142490
> 
> 赞同：1
> 
> 时间：2012-06-21T16:21:22.467
> 
> 标签：python, django

我希望从我的一个视图中将静态文件的内容作为（有时）HttpResponse 返回。

在 Django 中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:25:09.840

如果视图有时会使用模板或任何其他计算进行某些操作，那么最好的方法是在您需要返回静态对象时确定“有时”，然后发出临时重定向到该静态 url - 然后离开为您的静态内容提供服务的服务器负责交付内容。

**更新**

由于我有一段时间没有使用 Django，只是一般地使用 Web 开发等......我被告知 1.3+ 的 Django 包含一个（看起来像）非常简单的重定向机制。（反正比我记得的要简单！）

[https://docs.djangoproject.com/en/dev/topics/class-based-views/](https://docs.djangoproject.com/en/dev/topics/class-based-views/) *由 Tadeck 提供*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:29:27.020

我真的很喜欢 Jon Clement 的想法。虽然如果您需要，这就是您提供文件的方式：

```
def view(request):
    with open(path) as file:
        response = HttpResponse(file.read(), content_type='application/pdf')
        response['Content-Disposition'] = 'attachment; filename=filename.pdf'
        return response 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T16:34:19.580

除了其他人所展示的之外，还有一种方法有时用于返回对以下请求的响应`robots.txt`：

*   在`views.py`：

    ```
    from django.views.generic import TemplateView

    class RobotsTxtView(TemplateView):
        """A class-based view for responding to requests for robots.txt file
        """
        template_name = 'robots.txt'
        def render_to_response(self, context, **kwargs):
            """Overwritten render_to_response for applying text/html mimetype
            """
            return super(RobotsTxtView, self).render_to_response(context,
                content_type='text/plain', **kwargs) 
    ```

*   当您需要视图时（例如，在内部`urls.py`或尝试生成实际视图时），请使用：

    ```
    from myapp.views import RobotsTxtView
    robots_view = RobotsTxtView.as_view() 
    ```

*   在`robots.txt`模板中的文件中，您实际上可以拥有静态内容（或您喜欢的任何内容）。

但总的来说，其他人是对的：如果您提供静态内容，请将其作为静态内容提供，如果不需要，请不要使用 Django 处理此文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:22:42.897

```
 return HttpResponse("any content") 
```

会做伎俩吗？或者我误解了你的问题

# c# - 声明按位枚举（标志）-“DWORD 样式”的最新 c# 语法怪癖？

> ID：11142491
> 
> 赞同：1
> 
> 时间：2012-06-21T16:21:25.103
> 
> 标签：c#, syntax, enums, flags

背景：按位枚举对于“更具可读性”的比较和检查很有用：即`OpenFile(write | append)`.

我已经看到了几种在 C# 中声明按位枚举的方法，但最近其中一种常见模式似乎不再返回唯一值，我想知道我是在声明它错误还是某些地方发生了变化。我说的是“DWORD”（十六进制？）样式（如下所示），在 VS2012 RC 中枚举时给出的值是 1、2、3、4 ......而不是预期的按位加倍。

其他人可以重现这个吗？我将用于验证的代码与控制台输出一起发布；`ComparisonsDword`正如您从“标志枚举，带 DWORD 的显式值”的输出中看到的那样，发生了奇怪的行为。

**没有标志，正常枚举**

```
/// <summary>
/// How to compare filter values; no underlying type declared, not flag
/// </summary>
public enum ComparisonsNotInt {
    [Description("x")]
    None
    ,
    [Description("!=")]
    NotEqual
    ,
    [Description("=")]
    Equal
    ,
    [Description(">")]
    GreaterThan
    ,
    [Description("<")]
    LessThan
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
    /// </summary>
    [Description("<=")]
    LessThanOrEqual = (Equal | LessThan)
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
    /// </summary>
    [Description(">=")]
    GreaterThanOrEqual = (Equal | GreaterThan)
}//--   enum    ComparisonsNotFlag 
```

**没有标志，基础类型 = int**

```
/// <summary>
/// How to compare filter values, not flag but underlying type declared
/// </summary>
public enum ComparisonsNotFlag : int {
    [Description("x")]
    None
    ,
    [Description("!=")]
    NotEqual
    ,
    [Description("=")]
    Equal
    ,
    [Description(">")]
    GreaterThan
    ,
    [Description("<")]
    LessThan
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
    /// </summary>
    [Description("<=")]
    LessThanOrEqual = (Equal | LessThan)
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
    /// </summary>
    [Description(">=")]
    GreaterThanOrEqual = (Equal | GreaterThan)
}//--   enum    ComparisonsNotFlag 
```

**标志，隐含值**

```
/// <summary>
/// How to compare filter values; values default to whatever .NET decides
/// </summary>
[Flags]
public enum ComparisonsImplicit : int {
    [Description("x")]
    None
    ,
    [Description("!=")]
    NotEqual
    ,
    [Description("=")]
    Equal
    ,
    [Description(">")]
    GreaterThan
    ,
    [Description("<")]
    LessThan
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
    /// </summary>
    [Description("<=")]
    LessThanOrEqual = (Equal | LessThan)
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
    /// </summary>
    [Description(">=")]
    GreaterThanOrEqual = (Equal | GreaterThan)
}//--   enum    ComparisonsImplicit 
```

**标志，显式值**

```
/// <summary>
/// How to compare filter values; values explicitly defined with doubled numbers
/// </summary>
[Flags]
public enum ComparisonsExplicit : int {
    [Description("x")]
    None = 0
    ,
    [Description("!=")]
    NotEqual = 1
    ,
    [Description("=")]
    Equal = 2
    ,
    [Description(">")]
    GreaterThan = 4
    ,
    [Description("<")]
    LessThan = 8
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
    /// </summary>
    [Description("<=")]
    LessThanOrEqual = (Equal | LessThan)
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
    /// </summary>
    [Description(">=")]
    GreaterThanOrEqual = (Equal | GreaterThan)
}//--   enum    ComparisonsExplicit 
```

**标志，使用 DWORD 样式的显式值** *注意：这是没有正确提供唯一值的原因，因此像这样的组合`GreaterThanOrEqual`会失败。*

```
/// <summary>
/// How to compare filter values; values explicitly defined with DWORD style
/// </summary>
[Flags]
public enum ComparisonsDword : int {
    [Description("x")]
    None = 0x0
    ,
    [Description("!=")]
    NotEqual = 0x1
    ,
    [Description("=")]
    Equal = 0x2
    ,
    [Description(">")]
    GreaterThan = 0x3
    ,
    [Description("<")]
    LessThan = 0x4
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
    /// </summary>
    [Description("<=")]
    LessThanOrEqual = (Equal | LessThan)
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
    /// </summary>
    [Description(">=")]
    GreaterThanOrEqual = (Equal | GreaterThan)
}//--   enum    ComparisonsDword 
```

**标志，使用 DWORD 样式的显式值** *注意：也是不适当的值，只是检查底层类型是否影响问题。*

```
/// <summary>
/// How to compare filter values; values explicitly defined with DWORD style
/// </summary>
[Flags]
public enum ComparisonsDwordNotInt {
    [Description("x")]
    None = 0x0
    ,
    [Description("!=")]
    NotEqual = 0x1
    ,
    [Description("=")]
    Equal = 0x2
    ,
    [Description(">")]
    GreaterThan = 0x3
    ,
    [Description("<")]
    LessThan = 0x4
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
    /// </summary>
    [Description("<=")]
    LessThanOrEqual = (Equal | LessThan)
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
    /// </summary>
    [Description(">=")]
    GreaterThanOrEqual = (Equal | GreaterThan)
}//--   enum    ComparisonsDword 
```

**标志，使用位移样式的显式值**

```
/// <summary>
/// How to compare filter values; values explicitly set using shorthand of bitwise shifting
/// </summary>
[Flags]
public enum ComparisonsBitshift : int {
    [Description("x")]
    None = 0
    ,
    [Description("!=")]
    NotEqual = 1 << 0
    ,
    [Description("=")]
    Equal = 1 << 1
    ,
    [Description(">")]
    GreaterThan = 1 << 2
    ,
    [Description("<")]
    LessThan = 1 << 3
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
    /// </summary>
    [Description("<=")]
    LessThanOrEqual = (Equal | LessThan)
    ,
    /// <summary>
    /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
    /// </summary>
    [Description(">=")]
    GreaterThanOrEqual = (Equal | GreaterThan)
}//--   enum    ComparisonsBitshift 
```

**枚举输出：**

```
 Plain enum ----
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThan      ,        Descr = >,     Value = 3
    Enum = GreaterThan      ,        Descr = >,     Value = 3   // bad: should be GTE
    Enum = LessThan         ,        Descr = <,     Value = 4
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 6

    Plain enum, underlying int ----
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThan      ,        Descr = >,     Value = 3
    Enum = GreaterThan      ,        Descr = >,     Value = 3   // bad: should be GTE
    Enum = LessThan         ,        Descr = <,     Value = 4
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 6

    Flag enum, implicit values ----
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 3   // bad: should be GT
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 3
    Enum = LessThan         ,        Descr = <,     Value = 4
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 6

    Flag enum, explicit values ----
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThan      ,        Descr = >,     Value = 4
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 6
    Enum = LessThan         ,        Descr = <,     Value = 8
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 10

    Flag enum, explicit values with DWORD ----                  // all of these are weirdly unexpected
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 3
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 3
    Enum = LessThan         ,        Descr = <,     Value = 4
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 6

    Flag enum, explicit values with DWORD, not underlying int ----
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 3
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 3
    Enum = LessThan         ,        Descr = <,     Value = 4
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 6

    Flag enum, explicit values with bitshifting ----
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThan      ,        Descr = >,     Value = 4
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 6
    Enum = LessThan         ,        Descr = <,     Value = 8
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 10 
```

**参考：**

1.  [C# 中的 [Flags] 枚举属性是什么意思？](https://stackoverflow.com/questions/8447/enum-flags-attribute)
2.  [MSDN 枚举类型](http://msdn.microsoft.com/en-us/library/cc138362.aspx)
3.  [MSDN 标志属性](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)
4.  [不期望按位枚举转换返回值](https://stackoverflow.com/questions/1596735/bitwise-enum-cast-return-value-not-expected)

* * *

为了完整起见，我正在用@kirk-woll 的答案中的正确用法修改我原来的问题

**更正了 DWORD 语法**

```
 /// <summary>
    /// How to compare filter values; values explicitly defined with *correct* DWORD style
    /// </summary>
    [Flags]
    public enum ComparisonsDwordCorrectlyDefined {
        [Description("x")]
        None = 0x0
        ,
        [Description("!=")]
        NotEqual = 0x1
        ,
        [Description("=")]
        Equal = 0x2
        ,
        [Description(">")]
        GreaterThan = 0x4
        ,
        [Description("<")]
        LessThan = 0x8
        ,
        /// <summary>
        /// Combination of <see cref="Equal"/> and <see cref="LessThan"/>
        /// </summary>
        [Description("<=")]
        LessThanOrEqual = (Equal | LessThan)
        ,
        /// <summary>
        /// Combination of <see cref="Equal"/> and <see cref="GreaterThan"/>
        /// </summary>
        [Description(">=")]
        GreaterThanOrEqual = (Equal | GreaterThan)
    }//--   enum    ComparisonsDwordCorrectlyDefined 
```

**枚举输出**

```
 Flag enum, explicit values with correct DWORD ----
    Enum = None             ,        Descr = x,     Value = 0
    Enum = NotEqual         ,        Descr = !=,    Value = 1
    Enum = Equal            ,        Descr = =,     Value = 2
    Enum = GreaterThan      ,        Descr = >,     Value = 4
    Enum = GreaterThanOrEqual,       Descr = >=,    Value = 6
    Enum = LessThan         ,        Descr = <,     Value = 8
    Enum = LessThanOrEqual  ,        Descr = <=,    Value = 10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T16:23:13.840

你的 DWORD 十六进制样式是错误的。你是加一而不是加倍：

```
NotEqual = 0x1
Equal = 0x2
GreaterThan = 0x3
LessThan = 0x4 
```

应该：

```
NotEqual = 0x1
Equal = 0x2
GreaterThan = 0x4
LessThan = 0x8 
```

当然，在您开始使用 hex 样式之前，它显然没有用处`8`：

```
LessThan = 0x8
GreaterThanOrEqual = 0x10
LessThanOrEqual = 0x20 
```

在这里它有点方便，因为加倍的进程会导致一个简化的模式，而不是必须在你的脑海中把它加倍。

# firefox-addon - 嵌套弹出窗口，弹出显示事件的问题

> ID：11142494
> 
> 赞同：0
> 
> 时间：2012-06-21T16:21:30.993
> 
> 标签：firefox-addon, dom-events

我正在开发一个 Firefox 扩展，我有一个工具栏按钮，它显示一个覆盖层，我在其中放置了一些 XUL 代码`ToolbarDisplayManager`：

```
<overlay id="custombutton-overlay" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

        <toolbarpalette id="BrowserToolbarPalette">
            <toolbarbutton id="boycottToolbarButton" label="Label" tooltiptext="Label" type="menu" popup="ToolbarPopup" />
        </toolbarpalette>
        <popupset>
            <panel id="ToolbarPopup" position="after_start" onpopupshowing="Refresh();">
                <vbox class="ToolbarBody">
                    <box id="ToolbarDisplayManager" />
                </vbox>
            </panel>
        </popupset>
</overlay> 
```

在“ToolbarDisplayManager”中，我创建了一个带有带有 javascript 的 menupopup 的菜单列表（如“组合框”），其结构如下：

```
<menulist id="combo">
    <menupopup>
        <menuitem>
        <menuitem>
        ...
    </menupopup>
</menulist> 
```

这就是问题所在：当我单击时，我会在事件`ToolbarPopup`中运行“刷新”功能。`popupshowing`但是当显示覆盖时，我点击“组合”来选择一个项目，再次触发`popupshowing`事件。`ToolbarPopup`换句话说：这就像两个“弹出窗口”互相有麻烦。

我需要在显示叠加层之前运行“刷新”功能。我的结构在某处有问题吗？如何处理两个嵌套的弹出窗口及其`popupshowing`事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:59:03.193

事件`popupshowing`冒泡意味着它可以被 DOM 层次结构中比触发事件的元素更高的事件处理程序拦截。因此，您的事件处理程序首先从元素接收`popupshowing`事件，`<panel>`然后从元素接收另一个事件`<menulist>`（因为它位于 内`<panel>`）。[`event.eventPhase`您可以使用以下属性](https://developer.mozilla.org/en/DOM/event.eventPhase)轻松区分这两种情况：

```
<panel ... onpopupshowing="if (event.eventPhase == Event.AT_TARGET) Refresh();"> 
```

这将确保您忽略冒泡`Refresh()`的事件，并且只调用源自`<panel>`自身的事件。另一种选择是查看[`event.target`房产](https://developer.mozilla.org/en/DOM/event.target)。

# c# - 前端的可折叠区域？

> ID：11142496
> 
> 赞同：0
> 
> 时间：2012-06-21T16:21:40.563
> 
> 标签：c#, asp.net

如果我可以在 C# 中使用像 #region 这样的可折叠区域，我有很多前端代码将更具可读性。有没有办法在前端做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:31:12.500

假设您使用的是 Visual Studio，我将向您推荐这篇文章：[如何在 Visual Studio 中的 aspx 文件中添加区域](https://stackoverflow.com/questions/5242879/how-to-add-region-in-visual-studio-in-aspx-files)。观察一些简单提示的答案；不过，Visual Studio 已经提供了在编辑器装订线中折叠 html 元素（默认情况下）的功能。如果您指的是 JavaScript（您的问题含糊不清），那么我会向您推荐这个插件：[JScript Editor Extensions](http://visualstudiogallery.msdn.microsoft.com/872d27ee-38c7-4a97-98dc-0d8a431cc2ed?SRC=VSIDE)

# java - Mac 上的 java 和签名的 jars

> ID：11142497
> 
> 赞同：0
> 
> 时间：2012-06-21T16:21:41.060
> 
> 标签：java, jnlp, signed

我有一个作为 jnlp 启动的厚 Java 客户端。罐子都签名了。

此应用程序适用于除 Mac OSX 10.5.8 之外的所有操作系统。

使用 Safari 或 FireFox，当我启动应用程序时，我收到以下错误：

```
java.lang.NullPointerException
at java.util.jar.JarVerifier.mapSignersToCodeSource(JarVerifier.java:496)
at java.util.jar.JarVerifier.mapSignersToCodeSources(JarVerifier.java:508)
at java.util.jar.JarVerifier.getCodeSources(JarVerifier.java:826)
at java.util.jar.JarFile.getCodeSources(JarFile.java:613)
at java.util.jar.JavaUtilJarAccessImpl.getCodeSources(JavaUtilJarAccessImpl.java:25)
at com.sun.deploy.cache.DeployCacheJarAccessImpl.getCodeSources(DeployCacheJarAccessImpl.java:60)
at com.sun.javaws.security.SigningInfo.getCommonCodeSignersForJar(SigningInfo.java:382)
at com.sun.javaws.security.SigningInfo.check(SigningInfo.java:291)
at com.sun.javaws.LaunchDownload.checkSignedResourcesHelper(LaunchDownload.java:1498)
at com.sun.javaws.LaunchDownload.checkSignedResources(LaunchDownload.java:1268)
at com.sun.javaws.Launcher.prepareResources(Launcher.java:1222)
at com.sun.javaws.Launcher.prepareAllResources(Launcher.java:624)
at com.sun.javaws.Launcher.prepareToLaunch(Launcher.java:332)
at com.sun.javaws.Launcher.prepareToLaunch(Launcher.java:204)
at com.sun.javaws.Launcher.launch(Launcher.java:121)
at com.sun.javaws.Main.launchApp(Main.java:418)
at com.sun.javaws.Main.continueInSecureThread(Main.java:255)
at com.sun.javaws.Main$1.run(Main.java:115)
at java.lang.Thread.run(Thread.java:613) 
```

这是浏览器设置的功能还是这台机器上的 Java 配置？正如我所说，这些 jar 在除此操作系统/机器之外的所有其他操作系统/平台上都经过签名和验证。

对此有任何想法

# jquery - 排序表后不触发 jQuery click() 事件

> ID：11142500
> 
> 赞同：4
> 
> 时间：2012-06-21T16:21:45.350
> 
> 标签：jquery, jquery-plugins, html-table

加载页面时，如果单击一行，它会记录到控制台`clicked`。

但是，如果您对表格进行排序（单击表格标题），`tr`如果您尝试单击行，则不会触发单击事件。

我正在使用这个插件：[tablefixedheader](http://www.tablefixedheader.com/)

***jQuery***

```
$(document).ready(function(){
    $("table.ex").fixheadertable({
        caption        : 'Tarefas Dispon&iacute;veis',
        showhide    : false,
        height        : '265',
        zebra       : true,
        zebraClass  : 'ui-state-default',
        sortable    : true,
        sortedColId : 0,
        dateFormat  : 'Y/m/d',
        pager        : true,
        rowsPerPage    : 25,
        colratio    : [110,150],
        minColWidth : 110,
        resizeCol    : true
    });

    // problem with this click
    // The event isn't triggered:

    $("table.ex tr").click(function(){
        console.log('clicked');
    });

}); 
```

**演示** [http://jsfiddle.net/QpU3c/](http://jsfiddle.net/QpU3c/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T16:24:23.220

您应该使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)，因为插件会更改原始`tr`元素，因此它们会丢失附加的事件处理程序。处理程序应该附加在表本身上，因为它肯定不会改变。

```
$("table.ex").on('click', 'tr', function(){
    console.log('clicked');
}); 
```

[jsFiddle 演示](http://jsfiddle.net/bazmegakapa/QpU3c/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T16:24:20.730

```
$("table.ex").on('click', 'tr', function(){
    console.log('clicked');
}); 
```

**[演示](http://jsfiddle.net/QpU3c/1/)**

* * *

### 笔记

您需要委托事件，因为当您对 s 进行排序时`table`，`.fixheadertable()`会删除`tr`s 并重新将其附加到表中。因此，在排序之后，这些`tr`s 被视为动态元素。

* * *

[`.on()`](http://api.jquery.com/on)委托事件的语法如下：

```
$(container).on(eventName, target, handlerFunction) 
```

# python - 如何将抓取的数据存储到数据库中

> ID：11142502
> 
> 赞同：0
> 
> 时间：2012-06-21T16:21:58.867
> 
> 标签：python, database

我对 python 和我将在这个问题中讨论的所有其他内容相当陌生，但我想开始一个我一直在考虑的项目。基本上我想抓取网页并在网页上实时抓取网址时显示网址。我编写了一个简单的爬虫，它将 URL 存储在一个列表中。我想知道如何将此列表放入数据库并每 x 秒更新一次数据库，以便我可以访问数据库并定期在网页上输出链接列表。

我对实时 Web 开发知之甚少，但这是另一天的话题。不过现在，我更关心如何将列表放入数据库。我目前正在使用很容易相处的 web2py 框架，但是如果你们对我应该在哪里查看，我应该检查哪些框架有任何建议......请在你的答案中也发表评论，谢谢。

简而言之，我不擅长的事情是：Python、数据库、实时网络开发。

这是我的爬虫的代码，如果它有帮助的话:)谢谢

```
from urllib2 import urlopen
def crawler(url,x):
    crawled=[]
    tocrawl=[]
    def crawl(url,x):
        x=x+1
        try:
            page = urlopen(url).read()
            findlink = page.find('<a href=')
            if findlink == -1:
                return None, 0
            while findlink!=-1:
                start = page.find(('"'), findlink)
                end = page.find(('"'), start+1)
                link = page[start+1:end]
                if link:
                    if link!=url:
                        if link[0]=='/':
                            link=url+link
                            link=replace(link)
                        if (link not in tocrawl) and (link!="") and (link not in crawled):
                            tocrawl.append(link)
                findlink = page.find('<a href=', end)
            crawled.append(url)
            while tocrawl:
                crawl(tocrawl[x],x)
        except:
            #keep crawling
            crawl(tocrawl[x],x)
    crawl(url,x)

def replace(link):
    tsp=link.find('//')
    if tsp==-1:
        return link
    link=link[0:tsp]+'/'+link[tsp+2:]
    return link 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:49:00.617

与其将 URL 放入列表中，不如直接将它们写入数据库？使用例如mysql：

```
import MySQLdb
conn = MySQLdb.connect('server','user','pass','db')
curs = conn.cursor()
sql = 'INSERT into your_table VALUES(%s,%s)' %(id,str(link))
rc = curs.execute(sql)
conn.close() 
```

这样您就不必像管道一样管理列表。但如果有必要，这也可以适用于该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:49:28.473

对于具有内置列表结构的[Redis](http://redis.io/)来说，这听起来不错。要将新网址附加到您的列表中，它很简单：

```
from redis import Redis
red = Red()

# Later in your code...
red.lpush('crawler:tocrawl', link) 
```

它还有一个设置类型，可以让你有效地检查你爬过哪些网站，并让你同步多个爬虫。

```
# Check if we're the first one to mark this link
if red.sadd('crawler:crawled', link):
    red.lpush('crawler:tocrawl', link) 
```

要获取下一个要抓取的链接：

```
url = red.lpop('crawler:tocrawl') 
```

要查看哪些 url 排队等待抓取：

```
print red.lrange('crawler:tocrawl', 0, -1) 
```

它只是一种选择，但它非常快速和灵活。[您可以在redis python 驱动程序](https://github.com/andymccurdy/redis-py)页面上找到更多文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T13:16:58.030

要实现这一点，您需要一个 Cron。cron 是类 Unix 计算机的作业调度程序。您可以安排每分钟、每小时、每天等执行一次 cron 作业。

查看本教程[http://newcoder.io/scrape/intro/](http://newcoder.io/scrape/intro/)，它将帮助您在这里实现您想要的。

谢谢。信息是否有效。

# python - 抛出空白的偶数/左页

> ID：11142503
> 
> 赞同：2
> 
> 时间：2012-06-21T16:22:15.197
> 
> 标签：python, pdf-generation, reportlab

我正在尝试使用 ReportLab 和 Python 2.7 排版一个大型文档。

它有许多部分（在 1,000 页的文档中大约有 6 个部分），我希望每个部分都从奇数页/右侧页开始。我不知道前一页是奇数还是偶数，因此需要能够在特定段落样式之前选择性地抛出一个额外的空白页（就像您有时会在手册中看到某些页面“故意留空”）。谁能建议如何做到这一点，因为我能找到的唯一有条件的分页符是基于页面上的文本数量而不是页码。

我还需要确保 PDF 中包含空白页，以便进行双面打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:22:58.087

如果您可以跟踪页码，则只需在适当的时间添加 PageBreak 或 canvas.showPage() 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:08:01.637

如果您在 reportlab 中使用 platypus 引擎，您可以尝试覆盖`BaseDocTemplate`该类并使用`afterPage`and`beforePage`钩子来跟踪页码。然后，您可以在遇到偶数页时使用 showPage()。

例如：

```
from reportlab.platypus import BaseDocTemplate
from reportlab.lib.pagesizes import A4
from reportlab.platypus import PageTemplate

class MyDocTemplate(BaseDocTemplate):
    """Override the BaseDocTemplate class to split even/odd pages"""

    def __init__(self, *args, **kwargs):
        BaseDocTemplate.__init__(self, *args, **kwargs)
        self.__pageNum = 1

    def afterPage(self):
        """Called after all flowables have been drawn on a page"""

        # Increment pageNum since the page has been completed
        self.__pageNum += 1

    def beforePage(self):
        """Called before any flowables are drawn on a page"""

        # If the page number is even, force a page break
        if self.__pageNum % 2 == 0:
            self.canv.showPage()
            # Increment pageNum again since we've added a blank page
            self.__pageNum += 1 
```

然后您可以使用新`MyDocTemplate`类来创建您的文档：

```
if __name__ == "__main__":

    doc = MyDocTemplate(
        'filename.pdf',
        pagesize=A4,
        rightMargin=.3*inch,
        leftMargin=.3*inch,
        topMargin=.3*inch, 
        bottomMargin=.3*inch
    )

    # Your flowables go here
    elements = []

    # Your PageTemplates go here
    doc.addPageTemplates([])

    doc.build(elements) 
```

# sql - 列小数点值

> ID：11142511
> 
> 赞同：0
> 
> 时间：2012-06-21T16:22:42.977
> 
> 标签：sql, sql-server, sql-server-2008, decimal

我运行以下查询.....

```
SELECT SUM(PAPostedTotalCostN) AS Total_Cost 
FROM PA01201
WHERE PA01201.PAcontid = '00900' 
```

返回值`12169298.25000`

让查询将任何数字返回到小数点后两位的最简单方法是什么？

使用相同的返回值作为示例我希望看到数字显示为`12169298.25`

该查询将用于根据“PAcontid”返回许多数字，因此我需要将“PAPostedTotalCostN”的整个列保留到小数点后 2 位

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T16:36:30.763

```
SELECT CONVERT(DECIMAL(10,2),SUM(PAPostedTotalCostN)) AS Total_Cost 
FROM PA01201
WHERE PA01201.PAcontid = '00900' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:27:21.607

你可以试试：

```
CAST(PAPostedTotalCostN AS Numeric(12, 2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T08:46:57.643

```
SELECT u.name, CAST( SUM( e.amount * er.tlkarsiligi ) AS DECIMAL( 10, 2 ) ) from .. 
```

因为它适用于 Mysql

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:34:15.347

[http://msdn.microsoft.com/en-us/library/ms175003.aspx](http://msdn.microsoft.com/en-us/library/ms175003.aspx)

您可以使用 ROUND 功能：

```
ROUND ( numeric_expression , length [ ,function ] ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T16:37:15.943

你可以`CAST`是 2 位的小数：

```
select CAST(PAPostedTotalCostN as decimal(20, 2)) 
```

例子：

```
declare @t as decimal(20, 5)
set @t = 12169298.250000

select cast(@t as decimal(20, 2)) 
```

结果：

```
12169298.25 
```

如果值可以舍入，这将舍入结果，如果您不希望它被舍入：

```
select cast(round(@t, 2, 1) as decimal(20, 2)) 
```

# android - 如何将用于自动完成的字典与内置应用程序 egmessaging、android 中的联系人集成

> ID：11142513
> 
> 赞同：1
> 
> 时间：2012-06-21T16:22:49.863
> 
> 标签：android, android-layout, android-intent, android-widget

我想将字典功能（预测文本）集成到内置应用程序中，例如消息传递、联系人。但我不想使用 android 提供的内置预测文本功能。问题是我无法将内置应用程序与我的字典集成。

# android - 强制应用程序类关闭

> ID：11142515
> 
> 赞同：2
> 
> 时间：2012-06-21T16:23:06.783
> 
> 标签：android, android-lifecycle, android-testing

我有一个扩展应用程序的类。类相当广泛。当应用程序长时间处于后台时，操作系统会杀死该类。重新启动时，事情会横向发展。我需要调试一些数据结构并解决问题。有没有办法强制操作系统复制这种行为，而不是在每次运行应用程序之间等待一两个小时？我知道我可以杀死整个应用程序，但这不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:27:25.970

> 当应用程序长时间处于后台时，操作系统会杀死该类。

不，当应用程序在后台运行一段时间后，操作系统会终止您的进程。

> 有没有办法强制操作系统复制这种行为，而不是在每次运行应用程序之间等待一两个小时？

您可以从 DDMS 终止进程。

> 我知道我可以杀死整个应用程序，但这不是我想要的。

是的，是的，因为没有“杀死班级”的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:26:14.793

是的。您可以使用带有[开发工具应用程序](http://developer.android.com/guide/developing/debugging/debugging-devtools.html)的模拟器来执行此操作（查看**Immediately destroy activities**下），您可以使用 Ice Cream Sandwich 手机执行此操作（设置 -> 开发人员选项，不要保留活动复选框）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T22:45:52.317

以编程方式从其他类关闭您的应用程序，您可以调用此方法：

```
 public static void killApp() {       
                //Notify the system to finalize and collect all objects of the app.
                System.runFinalizersOnExit(true);
                //Force the system to close the app down completely.
                System.exit(0);
      } 
```

# java - 获取 NoSuchElementException

> ID：11142516
> 
> 赞同：0
> 
> 时间：2012-06-21T16:23:07.977
> 
> 标签：java, file-io, bufferedreader

我正在尝试制作一个应用程序，以帮助用户更轻松地制作 Dungeon and Dragons 项目！

我有 3 个不同武器的列表，具有不同的统计信息等。其中 2 个列表很好地添加到了程序中，但其中 1 个抛出了 NoSuchElementException。我真的不明白为什么，因为与我拥有的其他列表相比，我找不到与该列表有任何不同的东西。

列表中的一行如下所示：

```
 Light Melee Weapon,1d4,1d6,x2,10 ft.,Slashing,Axe (Throwing),8 gp, 2lb. 
```

[http://pastebin.com/Fb2db0f1](http://pastebin.com/Fb2db0f1)链接到整个列表，如果您想查看会导致问题。

[http://pastebin.com/9Hg0Rw2a](http://pastebin.com/9Hg0Rw2a)还链接到一个工作正常的列表！

我希望这个方法对你来说不会太长。我真的做了所有我能想到的尝试解决这个问题。而且我很肯定它是导致问题的列表，因为一旦我将它从它读取的目标中删除，程序运行得很好！

它在可以工作的列表上很好地运行了 for 循环，但是第一个列表不起作用._。

```
Exception in thread "main" java.util.NoSuchElementException
at java.util.StringTokenizer.nextToken(StringTokenizer.java:349)
at MainGUI.init(MainGUI.java:60)
at MainGUI.main(MainGUI.java:32)

public HashMap<String,Weapon> init() {
    String path = "base";
    File folder = new File(path);
    File[] listOfFiles = folder.listFiles();
    if(listOfFiles.length == 0) {
        JOptionPane.showMessageDialog(MainGUI.this, "The folder \"base\" was empty"+
                " so no weapons or armor was attempted loaded.", "Warning",
                JOptionPane.WARNING_MESSAGE);
        return new HashMap<>();
    }
    HashMap<String, Weapon> weapons = new HashMap<>();
    BufferedReader r = null;
    for(File f : listOfFiles) {
        if(f.getName().endsWith(".txt")) {
            String line;
            try {
                r = new BufferedReader(new FileReader(f));
                while((line = r.readLine()) != null) {
                    Weapon w;
                    StringTokenizer st = new StringTokenizer(line,",");
                    while(st.hasMoreTokens()) {

                        w = new Weapon(WeaponCategory.fromString(st.nextToken()),
                                st.nextToken(),st.nextToken(),st.nextToken(),
                                st.nextToken(),st.nextToken(),st.nextToken(),
                                st.nextToken(),st.nextToken());
                        weapons.put(w.getName(), w);
                    }
                }
            } catch(FileNotFoundException fnfe) {
                JOptionPane.showMessageDialog(MainGUI.this, "The File "+
                    f.getName() + " was not found.", "Error",
                    JOptionPane.ERROR_MESSAGE);
            } catch(IOException ioe) {
                JOptionPane.showMessageDialog(MainGUI.this, "There was a problem reading "+
                        f.getName() + ".", "Error",
                        JOptionPane.ERROR_MESSAGE);
            }
        }
    }
    try {
        r.close();
    } catch (IOException ex) {
        JOptionPane.showMessageDialog(MainGUI.this, "An error occured while"
                + "closing the File Reader Stream:\n"+ex.getMessage(),
                "Error", JOptionPane.ERROR_MESSAGE);
    }
    return weapons;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T13:05:43.763

尝试简单...

```
 String splitString = "Hi! Amazing! wonderful!"
    for (String token : splitString.split("!")) {
        System.out.println(token.toString());
    } 
```

*   **结果：**

    ```
     Hi!
       Amazing!
       wonderful! 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:31:33.143

Stringtokenizer 现在有点老派了。

如果您确定不会有包含逗号的条目，则可以使用 Scanner 或仅使用逗号拆分。

如果您使用 split ，您可以检查部件中的条目数量是否包含正确数量的元素：

```
 String[] parts = line.split(",")
 if (parts.length != 9){
   throw new RuntimeException("Bad line : " + line);
 }
 ...
 //continue processing 
```

您还可以有一个在每一行上递增的计数器，然后您可以显示哪一行导致异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:29:30.223

像这样的代码

```
 while(st.hasMoreTokens()) {

                    w = new Weapon(WeaponCategory.fromString(st.nextToken()),
                            st.nextToken(),st.nextToken(),st.nextToken(),
                            st.nextToken(),st.nextToken(),st.nextToken(),
                            st.nextToken(),st.nextToken());
                    weapons.put(w.getName(), w);
                } 
```

是不安全的，因为您假设每个输入行中有 9 个项目。您应该检查项目的数量并优雅地处理无效行（例如通过写出行的内容以便更容易识别问题）。

实现此目的的一种简单方法是使用`String.split()`标记线。它返回 a `String[]`，您可以在尝试访问其元素之前轻松检查其大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:41:48.600

NoSuchElementException 是由于某些输入耗尽而发生的，而标准输入不太可能发生这种情况（它将改为阻塞）。不正确的值将产生 InputMismatchException。

如果没有任何数据类型检查，那么不用担心。但是如果你想有不同的数据类型，那么应该在添加到 bean 对象之前检查。

# actionscript-3 - 如何在 ActionScript 3.0 中在运行时更改标签的颜色？

> ID：11142517
> 
> 赞同：5
> 
> 时间：2012-06-21T16:23:12.170
> 
> 标签：actionscript-3, label, mxml

我收到以下错误：

```
1119: Access of possibly undefined property color through a reference with static
type mx.controls:Label. 
```

问题是，在 MXML 中，颜色是标签的一个属性。但如果我试着说类似的话：

```
lblUpgrade.color = "#000000"; 
```

它抛出这个错误。在过去的 45 分钟里，我一直在努力寻找解决方法。如何在运行时设置它？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T16:29:37.740

[Label](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Label.html)没有`color`属性，而是有一个颜色样式，可以这样设置：

```
lblUpgrade.setStyle("color","#000000"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T16:28:59.757

在 as3 中可以这样访问样式

```
lblUpgrade.setStyle("color","#000000"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T16:36:50.527

color 是一种样式而不是属性，您可以使用`setStyle`. 同样使用 as3`0x`代替`#`颜色，但也许这适用于样式。

lblUpgrade.setStyle("颜色", "0x000000");

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-30T10:12:47.010

Wow, I've been struggling for 45 minutes AFTER I found this post. I'm using Adobe CS6 (don't ask why!) and the only way that finally works for me is this:

```
/* Create a new TextFormat object, 
which allows you to set multiple text properties at a time. */ 

var tf:TextFormat = new TextFormat(); 
tf.color = 0xFF0000; 

/* Apply this specific text format (red text) to the Label instance. */ 
a_label.setStyle("textFormat", tf); 
```

Hope this helps someone. Source: [Adobe Help Center](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f49.html)

You can also use TextFormat to change other properties like [Font, Size](https://forums.adobe.com/thread/705517?start=0&tstart=0) etc.

# c - 如何在“C”中使用 GTK/Cairo 中的小部件 Xid 绘制/渲染到小部件

> ID：11142520
> 
> 赞同：1
> 
> 时间：2012-06-21T16:23:14.437
> 
> 标签：c, linux, gtk, x11, cairo

我需要编写一个`GTK`应用程序`C`来执行一些动画，使用`Cairo`它将呈现到`GTK`另一个正在运行的应用程序中存在的小部件中。这个想法是做同样的事情，你可以用`VLC`和做`Mplayer`。例如`Mplayer`有`-wid`选项：

> -wid（另见 -guiwid）（仅限 X11、OpenGL 和 DirectX）这告诉 MPlayer 附加到现有窗口。用于在浏览器中嵌入 MPlayer（例如插件扩展）。此选项完全填充给定窗口，因此 MPlayer 不再处理纵横比缩放、panscan 等，但必须由创建窗口的应用程序管理。

使用此`Mplayer`选项，您可以使用 GTKImage 小部件创建 GTK 应用程序，获取它的 Xid，然后`GTK`使用指定的 Xid 在应用程序中播放电影`Mplayer`。

我正在尝试做同样的事情，除了使用`Cairo`. 有人有建议或更好的小代码示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:31:18.097

看看`GtkSocket`和`GtkPlug`类。

主程序将创建一个`GtkSocket`，`XID`您可以传递给其他程序的将由函数返回`gtk_socket_get_id()`。然后另一个程序将使用它作为函数的参数`gtk_plug_new()`。所有的渲染都将在这个新`GtkPlug`对象的子对象中完成。

**更新**：好吧，如果你想......这是一个最小的例子`GtkSocket/GtkPlug`。你没有说你使用的是 GTK+2 还是 GTK+3，所以我假设是版本 2。

# 服务器.c：

```
#include <gtk/gtk.h>

int main(int argc, char **argv)
{
    gtk_init(&argc, &argv);

    GtkWidget *wnd = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    GtkWidget *sck = gtk_socket_new();
    gtk_container_add(GTK_CONTAINER(wnd), sck);
    gtk_window_set_default_size(GTK_WINDOW(wnd), 400, 300);
    gtk_widget_show_all(wnd);

    GdkNativeWindow nwnd = gtk_socket_get_id(GTK_SOCKET(sck));
    g_print("%lu\n", nwnd);

    gtk_main();
    return 0;
} 
```

# 客户端.c：

```
#include <stdlib.h>
#include <gtk/gtk.h>
#include <cairo/cairo.h>
#include <math.h>

gboolean OnDraw(GtkWidget *w, GdkEvent *ev, gpointer data)
{
    GtkAllocation size;
    gtk_widget_get_allocation(w, &size);

    cairo_t *cr = gdk_cairo_create(gtk_widget_get_window(w));
    cairo_set_source_rgb(cr, 1, 0, 0);
    cairo_arc(cr, size.width/2, size.height/2, size.height/2, 0, 2*M_PI);
    cairo_fill(cr);
    cairo_destroy(cr);
    return TRUE;
}

int main(int argc, char **argv)
{
    gtk_init(&argc, &argv);

    GdkNativeWindow nwnd = strtoul(argv[1], NULL, 10);

    GtkWidget *plug = gtk_plug_new(nwnd);
    GtkWidget *canvas = gtk_drawing_area_new();
    gtk_container_add(GTK_CONTAINER(plug), canvas);
    g_signal_connect(canvas, "expose-event", (GCallback)OnDraw, NULL);
    gtk_widget_show_all(plug);

    gtk_main();
    return 0;
} 
```

要使用的 XID 由 打印，`server`并且必须作为参数复制/粘贴到`client`:

```
$ ./server
60817441
^Z
[1]+  Stopped                 ./server
$ bg
$ ./client 60817441 
```

# android - Android：R.drawable.marker 无法解析或不是字段

> ID：11142521
> 
> 赞同：0
> 
> 时间：2012-06-21T16:23:16.877
> 
> 标签：android

从几个关于如何在 Android 上使用谷歌地图的不同教程中借用这段代码，我遇到了“R.drawable.marker 无法解析或不是字段”的问题

R.java 不是通过 Eclipse 中的已知错误导入的。

```
public void onStart() {
     super.onStart();

         // Create an ItemizedOverlay to display a list of markers
           Drawable defaultMarker = getResources().getDrawable(R.drawable.marker);
           HelloItemizedOverlay placesItemizedOverlay = new HelloItemizedOverlay (defaultMarker, this);
           GeoPoint point =new GeoPoint((int)(41.856451 * 1E6),
                    (int)(-87.604864 * 1E6));
           OverlayItem overlayitem = new OverlayItem(point, "Line 1", "Line 2");
           List<Overlay> mapOverlays = mapView.getOverlays();

           placesItemizedOverlay.addOverlay(overlayitem);
           mapOverlays.add(placesItemizedOverlay);
          // mapView.getOverlays().add(placesItemizedOverlay);

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:24:58.043

您需要在项目的一个或多个目录中有一个`marker.png`（或其他）文件。`marker.jpeg``drawable*`

# iphone - 从主屏幕启动应用程序无法获取远程推送有效负载？但是从通知中心启动有效

> ID：11142523
> 
> 赞同：5
> 
> 时间：2012-06-21T16:23:24.707
> 
> 标签：iphone, ios, push-notification

从主屏幕启动应用程序无法获取远程推送有效负载？但是从通知中心启动是有效的。

起初，应用程序**没有运行**。收到远程推送通知后，用户不会立即启动带有通知的应用程序。然后用户点击通知中心的通知启动应用程序，我可以从以下位置获取推送有效负载`launchOptions`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSDictionary* userInfo = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if(userInfo) {
        //do some works with push payload.
    }
} 
```

但是，如果用户通过点击主屏幕上的应用程序图标来启动应用程序，我无法从中获取推送有效负载`launchOptions`，尽管`application:didFinishLaunchingWithOptions:`被调用。

再次：

1.  应用程序未运行。
2.  用户在收到推送通知时不启动应用程序。
3.  稍后，从通知中心启动应用程序并从 launchOptions 获取推送负载。
4.  从主屏幕启动应用程序无法从 launchOptions 获取推送负载。

这是SDK中的错误吗？如何通过从主屏幕启动应用程序来获取推送有效负载？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:40:18.817

你不能。

您只能在从通知中心启动时获得有效负载，因为这意味着用户对该通知感兴趣。

例如，如果我在 Tweetbot 上收到回复并且想查看它，我会点击通知，但如果我只想查看我的推文，我会正常打开应用程序。

如果有效负载包含用户必须接收的信息，则应用程序应联系您的服务器并检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:03:13.040

是的，如果用户通过点击图标启动应用程序，远程通知的有效负载将丢失。

这并不酷，但它是目前的工作方式。

# c# - 是否有用于 DISM 命令的 ac# api 来获取 Windows 包功能？

> ID：11142527
> 
> 赞同：1
> 
> 时间：2012-06-21T16:23:52.693
> 
> 标签：c#, windows, package

我知道您可以使用以下命令获取所有 Windows 软件包功能的列表，以及它们是否已通过命令行启用：

```
dism /online /get-features /format:table 
```

有谁知道这是否有等效的 c# api？如果没有，这不是什么大不了的事，但不必从我的应用程序中生成 dism 并解析其输出会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:22:35.063

您可以直接使用`[DllImport("DismApi.dll")]`并调用[Dism Api](http://msdn.microsoft.com/en-us/library/windows/desktop/hh824759.aspx)来检索包信息。

```
[DllImport("dismapi.dll")]
public static extern int DismGetPackages(uint Session, out IntPtr PackageBufPtr, out uint PackageCount); 
```

[Windows App Boss](http://windowsappboss.codeplex.com/)这样做是为了添加和删除预配的 Windows 应用商店应用程序，如果您想查看`WindowsAppBoss.Services.Packages.DismPackageManager`类的源代码。在从 dism 请求信息之前，您需要初始化并打开与 Dism 的会话。此外，您需要以管理员身份运行代码。

# c# - 在运行时将实体映射更改为另一个“未知”表

> ID：11142530
> 
> 赞同：5
> 
> 时间：2012-06-21T16:23:56.453
> 
> 标签：c#, sql-server, entity-framework

我必须编写一个与旧应用程序创建和维护的 SQL 服务器数据库一起工作的 C# 应用程序。该应用程序每年都会创建新表，并且“年份属性”位于表名中。它创建的表的数量可能会根据用户在应用程序中创建的“部分”的数量而有所不同。所以，我必须使用像 Cwx_DRyz 这样的表（非常自我解释......），其中“wx”可以是部分，“yz”是年份。一组表的示例可能是：

C01_DR07

C01_DR08

C01_DR09

C02_DR08

C02_DR09

C03_DR06

C04_DR12

所有这些表都可以代表，例如，客户。他们将是来自不同部门和年份的客户，但客户结构相同。

我的问题是：我可以有一个客户端实体来处理所有这些表并在运行时将映射从一个更改为另一个吗？标题说“未知”，因为我不知道运行前的表格。

我发现的最相似的问题是[实体框架将多个表映射到一个实体](https://stackoverflow.com/questions/1772064/entity-framework-map-multiple-tables-to-one-entity)，答案是使用“每个具体类型继承的表”，但这对我的情况没有用。

PS：EF版本4.3.1和VS2010

编辑：这些表没有主键......它们中的大多数都有被认为具有唯一值（整数或字符串）的列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:28:18.460

如果您使用“代码优先”，您可以根据需要创建映射。当您创建的映射与数据库匹配时，这也适用于现有数据库。

因此，无论何时创建上下文，您都可以构建要映射到的字符串（表名）。

“代码优先”的一些代码示例以及如何开始：

数据库上下文：

```
public DbSet<YourEntity> YourEntities { get; set; }
...

// this is called when the db gets created and does the configuration for you => maybe not needed in your case
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    ConfigurationRegistrar configurationRegistrar = modelBuilder.Configurations;

    new GeneralEntitiesConfiguration(configurationRegistrar);
} 
```

GeneralEntitiesConfiguration 是一个用于处理配置的类，只不过是一个看起来像这样的助手：

```
public class GeneralEntitiesConfiguration
{
    public GeneralEntitiesConfiguration(ConfigurationRegistrar configurationRegistrar)
    {
        configurationRegistrar.Add(new YourEntityConfiguration());
        //and additional configurations for each entity, just to splitt it a bit and have it more read and maintenance able
    }
} 
```

YourEntityConfiguration 是一个类，我拥有该实体的所有配置：

```
public class YourEntityConfiguration : EntityTypeConfiguration<YourEntity>
{
    public YourEntityConfiguration ()
    {
        ToTable("WhatEverYouLike"); // here you can do any magic to map this entity to a table, just make sure that your properties are mapped to the correct colums
        Property(entity => entity.Id).HasColumnName("YouColumnName");

        //and here you also have to do the other configurations
    }
} 
```

在应用程序启动时（或在您第一次初始化上下文之前），您必须初始化数据库。因此，您可以使用检查数据库并处理差异的初始化程序。内置诸如“DropCreateDatabaseAlways”或“DropCreateDatabaseIfModelChanges”之类的东西=>您需要创建自己的内容，而忽略任何差异。在我的示例中，我创建了一个仅在模型不同时引发异常的示例（我想在第一次尝试时使用 scipts 处理模型更改）：

```
//before using the context the first time i'm calling, you can ignore the connection string
DbContextInitializer.Init(conString);

public static class DbContextInitializer
{
    public static void Init (string connectionString)
    {
        Database.SetInitializer(new CreateDbThrowExceptionIfModelDiffersInitializer<SMDbContext>());

        using(var dbContenxt = new MyDbContext(connectionString))
        {
            try
            {
                dbContenxt.Database.Initialize(true);
            }
            catch(DatabaseModelDiffersException diffException)
            {
                // some magic...
            }
            catch(Exception ex)
            {
                // TODO: log
                throw;
            }
        }
    }

    public class CreateDbThrowExceptionIfModelDiffersInitializer<TContext> : IDatabaseInitializer<TContext> where TContext : DbContext
    {
        public void InitializeDatabase(TContext context)
        {
            using (new TransactionScope(TransactionScopeOption.Suppress))
            {
                if (!context.Database.Exists())
                    context.Database.Create();
            }

            if (!context.Database.CompatibleWithModel(true))
            {
                throw new DatabaseModelDiffersException("Database Model differs!");
            }
        }

        protected virtual void Seed(TContext context)
        {
            // create data if you like
        }
    }

    // just an exception i'm using for later useage
    public class DatabaseModelDiffersException : Exception
    {
        public DatabaseModelDiffersException(string msg) : base(msg)
        {}
    }
} 
```

希望您对可以使用实体框架处理动态表名有所了解！如果还有更多问题，请提出；）

# wcf - WCF：如何将请求的值复制到 WCF 中的响应中

> ID：11142532
> 
> 赞同：0
> 
> 时间：2012-06-21T16:23:57.483
> 
> 标签：wcf

当我发送请求时，我在其中设置了一些值，并且在响应时它应该包含该值我们如何在 WCF 中实现这一点？有人可以举例解释吗？另一种情况是，如果我的客户发送请求以服务该服务可能会调用另一个服务等等在响应时如何复制响应中的请求信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:26:20.803

如果您在请求和响应中使用 DataContract 类，则只需从请求中读取值并将其添加到响应中。

# python - 从函数对象执行函数

> ID：11142534
> 
> 赞同：0
> 
> 时间：2012-06-21T16:24:00.713
> 
> 标签：python, function

*在所有示例中，`a`是：*

```
>>> def a():
...     print "aaaaaaa" 
```

我从另一段代码中获得了一个函数对象，我需要执行该函数。

当我说“函数对象”时，我指的是这样的对象：

```
>>> type(a)
<type 'function'> 
```

看看这个：

```
>>> def function(f):
...     print "start"
...     f
...     print "end"

>>> function(a)
start
end 
```

如果正在执行它传递的函数，则输出中间`function()`会有一个（从 中返回，这是传递给它的函数）`aaaaaaa``a()`

那么在传递函数对象时如何执行函数呢？

*（对不起，如果这不是很清楚，我也很困惑......）*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T16:25:15.763

只需使用[函数调用运算符](http://docs.python.org/reference/expressions.html#calls) `()`调用它：

```
f() 
```

这就是你`a`在定义它之后的调用方式。全局名称`a`与本地名称指向同一个函数对象`f`，所以你需要做同样的事情来调用它们。

# c# - 如何使用带有多个星号的行过滤器过滤 ac# 数据表？

> ID：11142536
> 
> 赞同：2
> 
> 时间：2012-06-21T16:24:10.393
> 
> 标签：c#, string, datatable, filtering

我有一个使用行过滤器的数据表。这是我需要的匹配类型的示例。我只使用星号。

我正在检查的字符串：“你好，你好吗”

过滤器：“*” - 匹配过滤器：“Hello*” - 匹配过滤器：“Hello” - 无匹配过滤器：“*how*” - 匹配过滤器：“Hello*you” - 匹配过滤器：“H*l*w* r*u" - 匹配

当我尝试使用超过 2 个星号时，我得到一个异常，说“字符串模式无效”。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:32:28.223

行过滤器不能在字符串中间使用 *。我会改用这样的东西。
用法：

```
var rows = dt.AsEnumerable()
           .Where(x => x.Field<string>("Name").Like("H*l*w*r*u")); 
```

喜欢的功能：

```
public static class Extensions
{
    public static bool Like(this string s, string pattern, RegexOptions options = RegexOptions.IgnoreCase)
    {
        return Regex.IsMatch(s, pattern, options);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:29:07.803

尝试 % 代替通配符过滤器：

```
System.Data.DataRow[] y = x.Select("Col2 LIKE 'smith[%]%'");
System.Data.DataRow[] y = x.Select("Col2 = 'smith%'"); 
```

# android - Android：有没有办法从代码中显示 DialogPreference？

> ID：11142537
> 
> 赞同：10
> 
> 时间：2012-06-21T16:24:10.630
> 
> 标签：android, android-preferences, dialog-preference

我想在第一次应用启动时打开一些首选项（通过扩展 DialogPreference 进行）。此外，这些首选项用作通常的首选项。

有没有办法做到这一点？

**编辑：**

我有我的自定义偏好，如下所示：

```
public class CitySelectPreference extends DialogPreference  {
// Some code here
} 
```

作为解决方案，我希望它从代码中显示出来，而不需要用户进入偏好屏幕。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-31T20:08:25.403

只需这样做：

```
CitySelectPreference preference = (CitySelectPreference) findPreference("city_pref_key")

//You have to set a key to yout PreferenceScreen
PreferenceScreen screen = (PreferenceScreen) findPreference("screen_pref_key");

//Retrieve the index of the preference in preferenceScreen
int index = preference.getOrder();

//Perform a click
screen.onItemClick(null, null, index, 0); 
```

# php - PHP Websocket没有监听远程连接

> ID：11142538
> 
> 赞同：0
> 
> 时间：2012-06-21T16:24:18.530
> 
> 标签：php, websocket, phpwebsocket

我正在尝试使用 Websockets 编写一个实时聊天应用程序。我尝试使用两种不同的 PHP 实现来设置 Websockets 服务器。（[https://github.com/lemmingzshadow/php-websocket](https://github.com/lemmingzshadow/php-websocket)和[http://code.google.com/p/php-websocket-server/](http://code.google.com/p/php-websocket-server/)）我使用 xampp shell 运行服务器，当我从同一台电脑。但是，当我尝试使用同一 LAN 中的另一台计算机进行连接时，服务器甚至没有收到握手请求。

是因为同源政策吗？有解决方法吗？

如果这很重要，我正在使用 xampp 1.7.1 和 PHP 5.3.8

# ruby-on-rails - Web 应用程序的理想 README 文件

> ID：11142547
> 
> 赞同：3
> 
> 时间：2012-06-21T16:24:39.620
> 
> 标签：ruby-on-rails, django, documentation, markdown, project-organization

我有点痴迷于我如何记录和组织我的项目。我对自述文件的最佳实践很好奇，并希望了解更多关于其中应该包含的内容。我主要使用导轨。但我相信自述文件不应该对读者做任何假设，并从头开始解释一切。那么，对于 Web 应用程序项目，您理想的描述性永恒自述文件是什么？如果您附上您喜欢的自述文件，这将非常有帮助。

内容？关于应用程序的简短信息？语言，框架？截屏？格式？降价与普通？理想的部署？ETC..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:30:17.307

如果您不对读者做出假设，那么纯文本是最佳选择。任何标记语言都需要解析和转换，这在本地查看自述文件时可能无法实现。诸如 Github 之类的网站支持各种标记格式，这很好，但您仅限于它们支持的内容。

它的内容条款：它应该解释用户可能想要做的一切，例如编译、构建、运行、修改等。

# jquery - 在 javascript 中创建 MVC 操作链接

> ID：11142561
> 
> 赞同：0
> 
> 时间：2012-06-21T16:25:40.443
> 
> 标签：jquery, asp.net-mvc

MVC/jquery 的新手，在动态创建链接时遇到问题。

如果用户在文本框中键入并点击添加按钮，我们将调用以下 javascript：

```
 addItem: function (button) {
        var text = this.$text.val();
        var $newCell = $('<td>');
        $newCell.text(text);
        var $hidden = $('<input type="hidden" />');
        $hidden.attr('name', this.name);
        $hidden.val(text);
        $newCell.append($hidden);
        $newCell.append('</td>');
        var $newLinkCell = $('<td>');
        var $newLink = $('<a href="#" id="newLink">EPA Action Link</a>');
        var $newLinkTarget = '<%: @Html.ActionLink("EPA Action Link", "EPARedirect", new { EPAId = "' + text + '" }, new { target = "_blank" }) %>';
        $newLink.attr("href", $newLinkTarget);
        $newLinkCell.append($newLinkTarget);
        $newLinkCell.append('</td>');
        var $html = $('<tr>');
        $html.append($newCell);
        $html.append($newLinkCell);
        $html.append('</tr>');
        this.$table.append($html);

        this.initItem($newCell);
        this.$text.val('');
    } 
```

所以我正在做的是找到一个表格，并添加一个包含两个单元格的新行：左侧显示数据，右侧显示以该数据作为参数的链接。

对于现有项目，我在 cshtml 文件中有相同的 ActionLink（除了 EPAId 是通过“@item”的 jquery 变量构建的）。

无论如何，我一直试图弄清楚如何在我的 add 函数中动态构建相同类型的链接。我得到的只是 $newLinkTarget 的文字文本。我想这是有道理的，它不是通过服务器的 jquery 渲染来推动的。

我在这里走错了路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:30:08.227

您无法生成链接客户端，因为您需要考虑客户端不可用的路由。您将需要使用 @Url.ActionLink 生成一个基本 Url，并将其存储在 JS 变量中，然后用作客户端的基础，或者拥有一个可以调用的 Ajax 方法，该方法可以为您生成路径。

# excel - 如何指定要在 bash 中使用的 zip 版本？

> ID：11142563
> 
> 赞同：1
> 
> 时间：2012-06-21T16:25:49.520
> 
> 标签：excel, zip, powerpoint, unzip

* * *

## 背景（无需阅读）

我正在修改 MS office 文件以供工作（试图找出最快、最简单的方法来自动生成任意长度的 excel 和 powerpoint 文件）。由于实际的 excel 文件只是在文件名后附加了 .xlsx 的压缩档案，因此我一直在解压缩它们，编辑 xml，重新压缩它们，并查看 OpenOffice 是否仍然可以加载它们。

但是，我已经意识到（谢天谢地，在没有太多这样的测试之后）默认情况下，bash 中的“zip”命令（或者至少在我的 mac 上）正在以只需要 unzip v1 的格式压缩文件.0 进行提取，但普通的 excel 文件以需要 v2.0 提取的方式进行压缩。我通过压缩和解压缩我知道正常加载的 excel 文件，然后尝试加载它来检查这是一个问题。OpenOffice 很不高兴。

所以，我知道我需要完全按照 excel 的方式压缩文件，但我不确定如何做到这一点。我的电脑上有 zip 版本 3，所以希望如果 zip/unzip 发布周期是同步的，它应该是可能的，但我没有在手册页上看到任何立即似乎是解决方案的内容。

编辑：并且 zip -9 （其中 zip -h 有用地说指示 zip 'zip 更好'）仍然只需要 v1.0 来提取。

* * *

## 问题：

如何在 bash 中指定我希望 zip 以需要 unzip v2.0 才能解压缩的方式压缩文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:56:33.793

通常，不同版本生成的压缩文件之间不兼容的原因是使用的压缩算法。如果使用 zip 1.0 中不存在的算法压缩文件，则会导致您看到的不兼容。

查看您的 zip 实用程序的手册页，看看是否有指定要使用的压缩类型的选项。如果有，请查看从 Excel 创建的现有文件，并找出它们使用什么类型的压缩算法进行压缩，然后使用它。

On my Linux system, zip reports "This is Zip 2.31 (March 8th 2005), by Info-ZIP.", and it does not have an option for specifying the compression algorithm. On my Windows system, [7-zip](http://www.7-zip.org/) does have the option, and it looks like they do have a Mac version available, so you could try that if your zip utility doesn't support that option.

# c++ - 来自 char 数组的数据在迭代以逐字节显示时显示良好，但不是其他方式

> ID：11142565
> 
> 赞同：1
> 
> 时间：2012-06-21T16:25:57.773
> 
> 标签：c++, pointers, char, cout

我在 C++ 中有一个我不理解的问题：我得到一个 unsigned char* 作为方法调用的结果。如果我迭代 char* 以显示数据一切都很好，但是当我只打印数据时，显示的值不一样。

这是我的代码示例：

```
unsigned char returning[32];
for(int i=0;i<32;i++){
    returning[i] = result[i];
    std::cout << returning[i];//return the good values
}
std::cout << "\n";
std::cout << returning << "\n";
//the first one are the good values, and then there are wrong 
```

有人可以向我解释这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:33:25.560

tl;博士：

```
unsigned char returning[33];
returning[32] = '\0'; 
```

固定的。

解释：

第一个循环将打印“返回”中的每个值。第二段代码只会返回值，直到它达到一个零值。然后它停止，因为 char 数组中的零被解释为行尾字符。

或者，如果“返回”任何地方都没有零，则第二段代码将继续写入随机值，直到它确实达到零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T18:36:24.343

首先在`returning`数组中，您只是将值分配到第 31 个索引，这是错误的。最后一个字节应该是空终止的`\0`。

`std::cout << returning[i]`该语句将从该特定字符中读取 ASCII 值并打印相应的字符。

`std::cout << returning`但是该语句将继续读取字节，直到达到`\0`. 在您的情况下`returning`，数组未`NULL`终止。所以在这个缓冲区溢出会发生，它会打印前 32 个字节的正确字符，然后它会开始打印一些其他字符（也可能是不可读的正式字符）。如果`\0`永远不会进入更多字节，那么它肯定会尝试超出该段，那时应用程序将崩溃。

# html - 我希望我的正文渐变在我的标题渐变之后开始

> ID：11142566
> 
> 赞同：0
> 
> 时间：2012-06-21T16:26:01.607
> 
> 标签：html, css

我希望正文渐变从标题渐变结束的正下方开始。

这是所有相关[代码](http://codepen.io/Vigrant/pen/2/1)：

CSS：

```
#header
{
    position:absolute;
    top:0;
    left:0;
    background:linear-gradient(#fff,#000); 
    height:50px;
    width:100%;
}
html
{
    height:100%;
}
body
{
    background:linear-gradient(#000,#fff);
} 
```

HTML：

```
<div id = header></div> 
```

我试过弄乱 bottom-margin ，但没有任何运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:30:29.927

您可以使用容器 div 来执行此操作。

[http://codepen.io/**匿名**/pen/4070/1](http://codepen.io/__anon__/pen/4070/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:35:52.653

另一种方法是在标题上添加第三个渐变，以便更平滑地过渡到正文的线性渐变。

例如：`background:linear-gradient(#fff, #000, #232323);`对于您的标题。

# java - 如何选择中间件范式

> ID：11142575
> 
> 赞同：0
> 
> 时间：2012-06-21T16:26:28.010
> 
> 标签：java, osgi, ejb-3.0, apache-camel, middleware

我一直在阅读 Java 中间件解决方案，除非我在这里完全偏离了基础（我可能已经这样做了，**在这种情况下请先纠正我！**），似乎有四个主要的中间件解决方案/您可以为企业应用程序选择的范例：

*   完全兼容的 Java EE (EJB3)；或者
*   Apache Camel 或 Mule 等第 3 方 ESB；或者
*   操作系统吉；或者
*   事件驱动架构

我正在寻找某种规则，或遵循的协议，这将允许我说：

> 鉴于业务需要 xyz，这个应用程序的最佳中间件策略是 xyz。

我想我想知道这四种方法中的每一种都有哪些优点/缺点/优点/注意事项，以及这些属性如何适应这四种途径中的哪一种途径的决策。

有人可以提供现实生活中的用例，说明这四个中的每一个都比替代方案更可取吗？也许我们可以从这些用例中提取出这样的标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T01:05:39.003

一个好的第 3 方 EIS 架构可以包含其他三个选项，因此不推荐它就是失职......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:46:23.827

我认为第 5 个答案是：“第 3 方通信中间件，如 DDS、CORBA 或 JMS”。这些都是用于进程间数据通信的标准化技术。

我个人喜欢 DDS（[数据分发服务](http://portals.omg.org/dds/)），因为它的性能（本地网络上的延迟小于 100 微秒）、灵活性（端点的动态发现意味着没有服务器查找）以及强大的数据存储、呈现和过滤选项。DDS 支持 Java（除了其他语言）并用于多个领域（金融、媒体、DoD 等）的企业应用程序。

# c++ - 需要帮助理解指针算法

> ID：11142576
> 
> 赞同：2
> 
> 时间：2012-06-21T16:26:31.413
> 
> 标签：c++, memory, pointers

我在理解指针算法或如何分配内存时遇到了麻烦。在下面的代码片段中，我试图访问位于“test”之前 8 个字节的“size = 1”的值，但我没有得到 size 的值，并且该值不是随机的。所以我可能对理解字节大小有疑问。如果 void*、long 和 char 是 8 个字节，那么在使用指针算术时是否重要？

```
#include <iostream>
using namespace std;

char arrayOfCrap[100];

void * what(){
    long * size ; 
    size = (long*)&arrayOfCrap[28];
    *size = 1;
    return ((void*) &arrayOfCrap[29]);
}

int main(){

    long * test;
    test =  (long*)what();
    *test = 1221;
    cout << "Value of test: " << *test << endl;
    cout << "Long number before test: " << *(test-1) << endl;
} 
```

当 main 从 what() 的 void* ' 指针向前移动时，代码有效：

```
#include <iostream>
using namespace std;

char arrayOfCrap[100];

void * what(){
    long * size ; 
    size = (long*)&arrayOfCrap[28];
    *size = 1;
    return ((void*) &arrayOfCrap[28]);  //change from above
}

int main(){

    long * test;
    test =  (long*)what();
    test++;                             //change from above
    *test = 1221;
    cout << "Value of test: " << *test << endl;
    cout << "Long number before test: " << *(test-1) << endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:36:33.260

您的代码之前没有找到`*size`八个字节`*test`：

```
size = (long*)&arrayOfCrap[28]; 
```

arrayOfCrap 是`char arrayOfCrap[100]`偏移`arrayOfCrap[28]`量 28`arrayOfCrap[29]`处的字符和偏移量 29 处的字符。

起作用的原因`test++`是 test 是 type `long*`，因此递增它实际上会长时间移动到下一个位置，而递增 a`char*`或使用 char 数组上的索引会为您提供 char 的下一个*位置*。

您也可以执行以下操作之一：

```
void * what(){
    long * size ; 
    size = (long*)&arrayOfCrap[28];
    *size = 1;
    return size+1;
}

void * what(){
    long * size ; 
    size = (long*)&arrayOfCrap[28];
    *size = 1;
    return ((void*) &arrayOfCrap[28 + sizeof(long)];
} 
```

* * *

顺便说一句，将指针指向任何内存位置并将其视为指向另一种类型的指针并不一定安全。某些平台要求某些类型“对齐”，或者让这些类型仅存在于某个值的倍数的地址处。在那些平台上读取或写入未对齐的对象可能会崩溃（总线错误）或具有未定义的行为。此外，某些平台可能不会崩溃或行为不正确，但在读取/写入对齐对象时具有更好的性能。我知道这完全与您的实验无关，但对于真正的代码，您应该知道这一点。下面是一个在实际代码中不应该做什么的例子：

```
int read_int(char *&c) {
  int out = *(int*)c; // c may not be properly aligned!
  c += sizeof(int);

  return out;
} 
```

不幸的是，在一个通用平台 x86 上，非对齐访问通常只是很慢，而不是总是会导致崩溃，因此该平台的用户必须特别小心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:38:29.167

**当你增加一个指针时，它不是按指针大小增加，而是按指针类型的大小增加。一个`char*`指针递增`sizeof(char)`, 一个`long*`指针递增`sizeof(long)`**

`sizeof(char *)`,`sizeof(long *)`应该是相同的大小（通常在 32 位系统上为 4 个字节，在 64 位系统上为 8 个字节）。

但是，`sizeof(char)`和`sizeof(long)`不一样。

您将指针大小与整数大小混淆了。

```
#include <iostream>
using namespace std;

int main()
{
    cout << "\n sizeof(char*)   " << sizeof(char *);
    cout << "\n sizeof(char)    " << sizeof(char);
    cout << "\n sizeof(long*)   " << sizeof(long *);
    cout << "\n sizeof(long)    " << sizeof(long);
} 
```

在此处查看实际操作：http: [//ideone.com/gBcjS](http://ideone.com/gBcjS)

# python - 使用 openpyxl 解析列

> ID：11142577
> 
> 赞同：1
> 
> 时间：2012-06-21T16:26:32.693
> 
> 标签：python, excel, openpyxl

我有以下算法来解析整数值的列：

```
def getddr(ws):
address = []
col_name = 'C'
start_row = 4
end_row = ws.get_highest_row()+1

range_expr = "{col}{start_row}:{col}{end_row}".format(col=col_name, start_row=start_row, end_row=end_row)

for row in ws.iter_rows(range_string=range_expr):
    print row
    raw_input("enter to continue")
    cell = row[0]
    if str(cell.value).isdigit:
        address.append(cell.value)
    else:
        continue

return address 
```

这在说“IndexError：元组索引超出范围”时崩溃`cell = row[0]`，我不知道这是什么意思。我尝试打印行以查看它包含的内容，但它给我的只是一组空括号。有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:46:18.387

说你有什么问题并不容易，因为没有你试图处理的输入数据。

但是我可以解释您遇到错误的原因是什么，以及您必须朝哪个方向发展。该列表`row`包含 0 个元素 ( `row = []`)，因此您不能说`row[0]`- 没有 row[0]。您必须更改的第一件事是检查您的列表有多长，以及何时足够长进行其他操作：

```
for row in ws.iter_rows(range_string=range_expr):
    print row
    raw_input("enter to continue")
    if len(row) > 0:
      cell = row[0]
      if str(cell.value).isdigit:
        address.append(cell.value)
      else:
        continue 
```

无论如何，这是您必须做的第一步。

# asp.net-mvc-3 - 在 EF Code First MVC3 中将实体与多对多关系关联，而不是创建

> ID：11142578
> 
> 赞同：1
> 
> 时间：2012-06-21T16:26:41.933
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0, ef-code-first, dbcontext

在 MVC3 Code First EF 中，如何在不创建新实体（多对多）的情况下将一个实体与另一个实体关联？

所以我在class1和class2之间有一个多对多的关系。我需要 class1 来容纳许多 class2，反之亦然。但是，class2 是独立的；我有一个列表，我想单独编辑它们，然后与新的 class1 关联。

当我将我的 class2List 传递给控制器​​（通过 AJAX 和 JSON）时，我检查了 class2 的所有 Id 对应于 db 中的现有 id，即没有创建新的 class2。

**模型**

```
class
{
   [key]
   public int Id {set; get;} 
}
class1 : class 
{
        private ICollection<class2> _class2s;
        public virtual ICollection<class2> class2s
        {
            get { return _class2s ?? ( _class2s = new HashSet<class2>()); }
            set { _class2s = value; }
        }  
}

class2 : class
{
        private ICollection<class1> _class1s;
        public virtual ICollection<class1> class1s
        {
            get { return _class1s ?? ( _class1s = new HashSet<class1>()); }
            set { _class1s = value; }
        }  
} 
```

**控制器**

```
public ActionResult SaveChanges(List<class2> class2List)
    {
        createNewClass2AndAssociateExistingClass2s(class2List);
        SaveChangesToDb();
        return View("ProductDetail", Model);
    }

createNewClass2AndAssociateExistingClass2s(List<class2> class2List)
{
    var newClass1 = newClass1()
    {
      class2s = class2List;
    }

    ////UnitOfWork allows me to access several DbSets in one transaction
    unitOfWork.Create(newClass1) 

}
SaveChangesToDb()
{
    unitOfWork.Commit();
} 
```

这样做是创建一个新的 class1（应该如此），但不是将现有的 class2 与其关联，而是使用新的 Id 创建新的 class2 并将它们添加到数据库中。

**我的问题：**

这是否与 EF 如何从基类读取我的 Id 属性有关？

我如何能够将几个现有的 class2 作为列表与新的 class1 相关联，而不在数据库中创建新的 class2？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:10:46.530

好的，我从弄清楚这一点中学到了两件事：

*   当我应该实现一个接口时，我是从一个抽象类继承的。如果您有多个具有类似属性（例如“Id”）的实体并且您想要执行类似的操作，这是一个好主意

    `T FindById<T>(int id) where T : IEntity`

*   在 EF 中进行关联时，即使 Id 与现有条目匹配，它也不会更新该条目，除非 EF 在上下文中跟踪该条目，[如此处](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)所述。我需要做的是：

    *   在映射层中添加一个方法，通过 id 从存储库中获取我想要的条目
    *   将新条目的属性复制到该上下文条目中
    *   返回上下文条目

希望这可以帮助某人

# sockets - 在某些 winXP、win7 系统上的网络通信持续 500 毫秒延迟

> ID：11142579
> 
> 赞同：1
> 
> 时间：2012-06-21T16:26:42.613
> 
> 标签：sockets, tcp

我们在一些 WinXP 和 Windows 7 机器上遇到了网络性能问题，但不是全部。

我们将发出一个 send() 调用，然后是 recv() 响应。记录系统记入日志文件，应用程序认为延迟在 recv() 上（几乎正好是 500 毫秒 + 每次 15 毫秒的时间片）。但是，Wireshark 显示从发送数据包实际发出到响应进来的时间完全没有明显延迟。因此，似乎有些东西阻塞了 send() 500 毫秒，或者整个响应在应用程序看到它之前被延迟（最多30K左右，所以很多数据包）。

打开或关闭 Windows 防火墙没有任何作用。此计算机已安装趋势科技试用版，但未激活和禁用。其他有问题的计算机有其他杀毒软件等。

我们已经调查了 Nagle 并延迟了 ACK，但似乎都不是罪魁祸首。我们也在使用 TCP_NODELAY 以防万一。TcpAckFrequency 注册表项也不会更改任何内容。

我们正在执行一个 send() 和一个 recv()。没有什么花哨。

认为这可能是我们使用端口 80 的问题并且我们遇到了一些未知的数据包检查阻塞，我们尝试了不同的端口以达到相同的效果。

有任何想法吗？

**编辑**

我们有一些专家用户声称卸载防病毒软件（甚至是禁用的）可以为他们修复它，但并非总是如此。此外，不同的系统使用不同的防病毒包（这个有禁用的趋势科技，其他的是诺顿等） 这可能是某些东西的弱证据，也许......我想我会提到它。

**编辑 2**

更新以使这个非 Win7 特定，因为我们现在发现了一个行为相同的 WinXP 系统。

# java - Android 亚马逊 mp3 键盘保护控件

> ID：11142580
> 
> 赞同：2
> 
> 时间：2012-06-21T16:26:50.670
> 
> 标签：java, android, lockscreen, keyguard

任何人都知道亚马逊 mp3 应用程序如何在键盘保护内显示播放器控件？我一直在玩一些系统警报和系统覆盖窗口参数，现在很幸运。系统警报将显示在除锁定屏幕之外的所有内容上，系统覆盖将显示在锁定屏幕上，但在 4.0.3 及更高版本中，您无法接收触摸事件。

我还看到了诸如 WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG 之类的选项，但它似乎只适用于活动；我使用它的任何其他东西都会给我一个异常，告诉我我不能在这种类型的窗口中使用该标志。

我注意到的是，播放器控件替换或覆盖键盘锁时钟，播放器控件根据锁的类型（如图案锁或滑动锁）改变大小。我还注意到键盘锁不再显示我的壁纸了......

欢迎任何想法！

# c# - 模型绑定器中的实体未更新

> ID：11142581
> 
> 赞同：1
> 
> 时间：2012-06-21T16:26:58.397
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我有一个模型活页夹来帮助处理多站点网站。每个 StoreObject 都有一组 SiteThemes。

```
public class StoreObject
{
     .......
     public virtual ICollection<SiteTheme> SiteThemes { get; set; }
} 
```

然后，我将调用一个存储库对象，用新主题更新数据库。

```
public void SaveAndSetSiteTheme(SiteTheme t)
{
     context.SiteThemes.Where(f => f.StoreObjectID == t.StoreObjectID).ToList().ForEach(p => p.Active = false);
     if (t.SiteThemeID == 0)
     {
            t.Active = true;
            context.SiteThemes.Add(t);
     }
     context.SaveChanges();

} 
```

完成后，下面的模型绑定器具有正确的数据和 store.SiteThemes 将有 1 个主题。但是，当我再次刷新页面时，此模型活页夹已过时。store.SiteThemes 集合恢复到原始状态并且为空。我不知道到底发生了什么。如果需要更多信息，请帮助或让我知道。

```
public class StoreModelBinder : IModelBinder
{
    private const string sessionKey = "Store";

    private IStoreObjectRepository storeRepository;

    public StoreModelBinder()
    {
        storeRepository = new StoreObjectRepository();
    }

    public object BindModel(ControllerContext controllerContext,
        ModelBindingContext bindingContext)
    {

        Uri url = HttpContext.Current.Request.Url;
        string dom = url.Host;
        StoreObject store = storeRepository.Stores.FirstOrDefault(s => s.MainURL == dom);
        if (store != null)
            HttpContext.Current.Session[sessionKey] = store;

        return store;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:00:32.403

我设法解决了这个问题。虽然，没有一个理想的解决方案。我发现了以下内容：

“MVC 为多个请求重用 ModelBinders。这意味着它们的生命周期比请求范围更长，因此不允许依赖具有较短请求范围生命周期的对象。”

来源：[将依赖项注入自定义模型绑定器并使用 InRequestScope 使用 Ninject](https://stackoverflow.com/questions/9186560/ninject-inject-a-dependency-into-a-custom-model-binder-and-using-inrequestscope)

我只是在我的 BindModel 中添加了 StoreObjectRepository 的新实例，以解决生命周期问题。我认为这是一种黑客行为，并希望在不久的将来更新此代码。

```
public class StoreModelBinder : IModelBinder
{
    private const string sessionKey = "Store";

    private IStoreObjectRepository storeRepository;

    public StoreModelBinder()
    {
        storeRepository = new StoreObjectRepository();
    }

    public object BindModel(ControllerContext controllerContext,
        ModelBindingContext bindingContext)
    {
        storeRepository = new StoreObjectRepository();

        Uri url = HttpContext.Current.Request.Url;
        string dom = url.Host;
        StoreObject store = storeRepository.Stores.FirstOrDefault(s => s.MainURL == dom);
        if (store != null)
            HttpContext.Current.Session[sessionKey] = store;

        return store;
    }
} 
```

# php - PHP表单，当没有输入文本时

> ID：11142588
> 
> 赞同：0
> 
> 时间：2012-06-21T16:21:29.920
> 
> 标签：php, forms

我正在创建一个移动登录页面，并且我还创建了一个表单，通过复制一个托管到模板文件的文件夹，我可以创建更多内容。然后，该脚本会将您带到一个页面，您可以在其中一一输入公司详细信息并按提交。然后创建页面。

我的问题是，当一个字段被遗漏（例如 YouTube）时，按钮被创建并且是空白的。我希望在没有文本时有一个默认文本。我已经尝试了一些事情，并且一直在努力使这项工作好几天！

```
 <?php 
$company = $_POST["company"];
$phone = $_POST["phone"];
$colour = $_POST["colour"];
$email = $_POST["email"];
$website = $_POST["website"];
$video = $_POST["video"];
?>

<div id="contact-area">

<form method="post" action="generate.php"><br>
<input type="text" name="company" placeholder="Company Name" /><br>
<input type="text" name="slogan" placeholder="Slogan" /><br>
<input class="color {required:false}" name="colour" placeholder="Company Colour"><br>
<input type="text" name="phone" placeholder="Phone Number" /><br>
<input type="text" name="email" placeholder="Email Address" /><br>
<input type="text" name="website" placeholder="Full Website - Include http://" /><br>
<input type="text" name="video" placeholder="Video URL" /><br>
<input type="submit" value="Generate QuickLinks" style="background:url(images/submit.png) repeat-x; color:#FFF"/>
</form> 
```

就是这样的形式。它接受变量并将它们发布到下面的文件中。

```
<?php 
 $File = "includes/details.php"; 
 $Handle = fopen($File, 'w');
 ?>

 <?php 
 $File = "includes/details.php";
 $Handle = fopen($File, 'w');
 $Data = "<div id='logo'>
          <h1 style='color:#$_POST[colour]'>$_POST[company]</h1>
          <h2>$_POST[slogan]</h2>
          </div>

<ul data-role='listview' data-inset='true' data-theme='b'>
       <li style='background-color:#$_POST[colour]'><a href='tel:$_POST[phone]'>Phone Us</a></li>
       <li style='background-color:#$_POST[colour]'><a href='mailto:$_POST[email]'>Email Us</a></li>
       <li style='background-color:#$_POST[colour]'><a href='$_POST[website]'>View Full Website</a></li>
       <li style='background-color:#$_POST[colour]'><a href='$_POST[video]'>Watch Us</a></li>
       </ul>

 \n";

 fwrite($Handle, $Data); 
 fclose($Handle); 
 ?> 
```

这就是形式变成的样子。我需要有一个默认链接，以防该字段留空，有时是这样。提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:32:19.433

只需对每个元素使用这样的东西：

```
 $company = trim($_POST["company"]);

    if (!isset($company) || empty($company)) {
        $company = "Not filled in";
    } 
```

我添加了修剪以确保忽略空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:38:28.770

对每个变量使用以下格式：

> $company = (isset($_POST["company"]) && !empty($_POST["company"]))? $_POST["公司"]:"";

末尾的“”可以分配任何默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T20:57:51.527

如果将访问包装在一个函数中，通常更容易使用 post 变量：

```
function post($key, $default = '') {
  if (!isset($_POST[$key])) return $default;

  $value = trim($_POST[$key]);
  if ($value == '')
    return $default;
  else
    return $value;
} 
```

您现在可以像这样分配变量：

```
$company = post('company');
$phone = post('phone', 'Not provided');
$colour = post('colour', 'blue');
... and so on... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T16:31:09.037

您可以简单地将变量定义包装在代码中，例如：

```
if (strlen($_POST["company"]) > 0) {
    $company = $_POST["company"];
} else {
    $company = "default company";
} 
```

这将允许您指定一个默认值，如果有的话，该默认值将被用户数据覆盖。

# c# - 在 C# 中是否有此迭代算法的性能更好的功能版本？

> ID：11142590
> 
> 赞同：2
> 
> 时间：2012-06-21T16:27:35.533
> 
> 标签：c#, functional-programming, iteration

我希望找到一种方法来用扩展函数的函数式编写下面的代码。理想情况下，与迭代/循环版本相比，这种功能风格会表现良好。我猜没有办法。可能是因为许多额外的函数调用和堆栈分配等。

从根本上说，我认为让它变得麻烦的模式是它既计算一个用于 Predicate 的值，然后又需要该计算值作为结果集合的一部分。

```
// This is what is passed to each function.
// Do not assume the array is in order.
var a = (0).To(999999).ToArray().Shuffle();

// Approx times in release mode (on my machine):
// Functional is avg 20ms per call
// Iterative is avg 5ms per call
// Linq is avg 14ms per call

private static List<int> Iterative(int[] a)
{
    var squares = new List<int>(a.Length);

    for (int i = 0; i < a.Length; i++)
    {
        var n = a[i];

        if (n % 2 == 0)
        {
            int square = n * n;

            if (square < 1000000)
            {
                squares.Add(square);
            }
        }
    }

    return squares;
}

private static List<int> Functional(int[] a)
{
    return
    a
        .Where(x => x % 2 == 0 && x * x < 1000000)
        .Select(x => x * x)
        .ToList();
}

private static List<int> Linq(int[] a)
{
    var squares =
        from num in a
        where num % 2 == 0 && num * num < 1000000
        select num * num;

    return squares.ToList();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T16:32:32.093

康拉德建议的替代方案。这避免了双重计算，但也避免了在不需要时甚至计算平方：

```
return a.Where(x => x % 2 == 0)
        .Select(x => x * x)
        .Where(square => square < 1000000)
        .ToList(); 
```

就个人而言，在我看到它在更大范围内的*显着*性之前，我不会担心性能差异。

（顺便说一下，我假设这只是一个例子。通常你可能会计算一次 1000000 的平方根，然后`n`与它进行比较，以减少几毫秒。它确实需要两次比较或一次`Abs`操作不过，当然。）

编辑：请注意，功能更强大的版本将完全避免使用`ToList`。而是返回`IEnumerable<int>`，并让调用者将其转换为 a`List<T>` *如果他们愿意*。如果他们不这样做，他们就不会受到打击。如果他们只想要前 5 个值，他们可以调用`Take(5)`. 取决于上下文，这种懒惰*可能是对原始版本的巨大性能胜利。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:31:11.573

只是解决你的双重计算问题：

```
return (from x in a
        let sq = x * x
        where x % 2 == 0 && sq < 1000000
        select sq).ToList(); 
```

也就是说，我不确定这是否会导致性能大幅提升。功能变体实际上是否比迭代变体快得多？该代码为自动优化提供了很大的潜力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T16:51:00.193

一些并行处理怎么样？或者解决方案是否必须是 LINQ（我认为它很慢）。

```
var squares = new List<int>(a.Length);

Parallel.ForEach(a, n =>
{
  if(n < 1000 && n % 2 == 0) squares.Add(n * n);             
} 
```

Linq 版本将是：

```
return a.AsParallel()
  .Where(n => n < 1000 && n % 2 == 0)  
  .Select(n => n * n)
  .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T16:27:27.913

我不认为有一个功能性解决方案可以与迭代解决方案在性能方面完全相提并论。在我的时间安排中（见下文），来自 OP 的“功能”实现似乎比迭代实现慢两倍左右。

像这样的微基准很容易出现各种问题。处理可变性问题的常用策略是重复调用正在计时的方法并计算每次调用的平均时间 - 如下所示：

```
// from main
Time(Functional, "Functional", a);    
Time(Linq, "Linq", a);    
Time(Iterative, "Iterative", a);
// ...

static int reps = 1000;
private static List<int> Time(Func<int[],List<int>> func, string name, int[] a)
{
    var sw = System.Diagnostics.Stopwatch.StartNew();
    List<int> ret = null;
    for(int i = 0; i < reps; ++i)
    {
        ret = func(a);
    }
    sw.Stop();
    Console.WriteLine(
        "{0} per call timings - {1} ticks, {2} ms",
        name,
        sw.ElapsedTicks/(double)reps,
        sw.ElapsedMilliseconds/(double)reps);
    return ret;
} 
```

以下是一次会议的时间安排：

```
每次通话时间的功能 - 46493.541 滴答，16.945 毫秒
Linq 每次调用时间 - 46526.734 滴答声，16.958 毫秒
每次调用时间迭代 - 21971.274 滴答，8.008 毫秒

```

还有许多其他挑战：定时器使用的频闪效应，即时编译器如何以及何时执行其操作，垃圾收集器运行其收集，竞争算法的运行顺序，类型cpu，操作系统交换其他进程进出等。

我尝试了一些优化。我从测试中删除了平方 (num * num < 1000000) - 将其更改为 (num < 1000) - 这似乎很安全，因为输入中没有负数 - 也就是说，我取了不等式两边的平方根. 令人惊讶的是，与 OP 中的方法相比，我得到了不同的结果——我的优化输出中只有 500 个项目，而 OP 实现中的三个实现有 241,849 个项目。那么为什么会有差异呢？当平方溢出时，大部分输入都溢出了 32 位整数，所以那些额外的 241,349 项来自在平方溢出到负数或小于 100 万的数字时仍然通过我们的均匀性测试的数字。

优化（功能）时序：

```
每次通话时间优化 - 16849.529 滴答声，6.141 毫秒

```

这是按照建议更改的功能实现之一。它按预期输出通过标准的 500 个项目。它看似“更快”只是因为它输出的项目比迭代解决方案少。

我们可以通过在其实现周围添加一个检查块来使原始实现因溢出异常而崩溃。这是添加到“迭代”方法中的选中块：

```
private static List<int> Iterative(int[] a)
{
    checked
    {
        var squares = new List<int>(a.Length);

        // rest of method omitted for brevity...

        return squares;
    }
} 
```

# iphone - 苹果推送通知在一段时间后停止工作

> ID：11142592
> 
> 赞同：2
> 
> 时间：2012-06-21T16:28:00.650
> 
> 标签：iphone, ruby, sockets, apple-push-notifications, eventmachine

**固定的！**

原来这是由我们的防火墙引起的，它会在 1 小时后从其会话列表中删除空闲连接。我们将超时时间增加到 24 小时，并设置了一个 eventmachine 周期性计时器，以每 23 小时重新连接一次连接。这是一种解决方法，直到 eventmachine 1.0.0 达到稳定状态，这将允许我们设置 SO_KEEPALIVE 这应该可以解决我们的问题

**问题是**

我们正在使用基于[eventmachine 的实现](https://gist.github.com/2966768 "基于事件机的实现")将消息推送到苹果 apns。它基本上可以很好地工作，直到它不... :) 我们试图非常繁重地调试它，现在将其缩小到一段时间后在苹果的套接字上发生的一些奇怪的事情。

因此，通常，在您向 apns 服务器发送通知之前，套接字是完全安静的。如果您发送通知，这就是 tcpdump 吐出的内容 ( `sudo tcpdump -vv -i bond0 tcp port 2195`)：

```
18:05:23.672477 IP (tos 0x0, ttl 64, id 47828, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 3894:4331(437) ack 2724 win 91 <nop,nop,timestamp 893114182 2332608880>
18:05:23.776055 IP (tos 0x0, ttl 48, id 33720, offset 0, flags [DF], proto TCP (6), length 52) st11p01st-interface013-bz.push.apple.com.2195 > my-worker-hostname.50669: ., cksum 0x7844 (correct), 2724:2724(0) ack 4331 win 159 <nop,nop,timestamp 2332623235 893114182> 
```

到目前为止，没有什么可疑的。然而，过了一段时间（一段时间是随机的）我们的工作进程开始每隔 1-2 分钟向苹果服务器发送数据包，即使我们没有触发推送通知：

```
17:55:06.009741 IP (tos 0x0, ttl 64, id 51807, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.54853 > st11p01st-interface002-bz.push.apple.com.2195: P 0:437(437) ack 1 win 91 <nop,nop,timestamp 892959766 2935299208>
17:56:25.881823 IP (tos 0x0, ttl 64, id 51808, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.54853 > st11p01st-interface002-bz.push.apple.com.2195: P 0:437(437) ack 1 win 91 <nop,nop,timestamp 892979734 2935299208>
17:58:25.877756 IP (tos 0x0, ttl 64, id 51809, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.54853 > st11p01st-interface002-bz.push.apple.com.2195: P 0:437(437) ack 1 win 91 <nop,nop,timestamp 893009734 2935299208>
17:59:12.030887 IP (tos 0x0, ttl 64, id 20781, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.59335 > st11p01st-interface013-bz.push.apple.com.2195: P 3749093679:3749094116(437) ack 4206642630 win 91 <nop,nop,timestamp 893021272 2330366860>
17:59:12.345740 IP (tos 0x0, ttl 64, id 20782, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.59335 > st11p01st-interface013-bz.push.apple.com.2195: P 0:437(437) ack 1 win 91 <nop,nop,timestamp 893021351 2330366860>
17:59:12.977805 IP (tos 0x0, ttl 64, id 20783, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.59335 > st11p01st-interface013-bz.push.apple.com.2195: P 0:437(437) ack 1 win 91 <nop,nop,timestamp 893021509 2330366860> 
```

一旦开始，推送通知将不再起作用，直到我们重新启动工作程序。我的想法在这里用完了......

**更新：** 在没有发送通知的情况下等待了一段时间，并且套接字上没有发生任何事情，我刚刚启动了另一个推送，这再次导致了所描述的行为：

```
19:10:44.951026 IP (tos 0x0, ttl 64, id 47829, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 4331:4768(437) ack 2724 win 91 <nop,nop,timestamp 894094502 2332623235>
19:10:45.361786 IP (tos 0x0, ttl 64, id 47830, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 4331:4768(437) ack 2724 win 91 <nop,nop,timestamp 894094605 2332623235>
19:10:46.185822 IP (tos 0x0, ttl 64, id 47831, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 4331:4768(437) ack 2724 win 91 <nop,nop,timestamp 894094811 2332623235>
19:10:47.837788 IP (tos 0x0, ttl 64, id 47832, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 4331:4768(437) ack 2724 win 91 <nop,nop,timestamp 894095223 2332623235>
19:10:51.133744 IP (tos 0x0, ttl 64, id 47833, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 4331:4768(437) ack 2724 win 91 <nop,nop,timestamp 894096048 2332623235>
19:10:57.725824 IP (tos 0x0, ttl 64, id 47834, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 4331:4768(437) ack 2724 win 91 <nop,nop,timestamp 894097696 2332623235>
19:11:10.913826 IP (tos 0x0, ttl 64, id 47835, offset 0, flags [DF], proto TCP (6), length 489) my-worker-hostname.50669 > st11p01st-interface013-bz.push.apple.com.2195: P 4331:4768(437) ack 2724 win 91 <nop,nop,timestamp 894100992 2332623235> 
```

# jquery - 大型数据集的 Ajax 数据表滚动

> ID：11142600
> 
> 赞同：1
> 
> 时间：2012-06-21T16:28:21.520
> 
> 标签：jquery, ajax, scroll, jquery-datatables

我有一个非常大的数据集（几百万行），我希望它可以在 HTML 页面上滚动。我一直在使用 jQuery DataTable Scroller 并取得了一些成功，但是在使用新数据更新结果时遇到了一些麻烦（例如，在添加过滤器之后，我在 DataTable 外部执行此操作）。我很好奇人们使用什么其他工具来解决这样的问题。

澄清一下，我不能一次加载整个数据集。使用滚动条，我有这样的设置：

```
var oTable = $('#main_table').dataTable({
"bProcessing":true,
"bServerSide":true,
"bDeferRender":true,
"sScrollX":"100%",
"sScrollY":"500px",
"sAjaxSource":"/list/b",
"oScroller": {
"trace":true},
"fnServerParams": function ( aoData ) {
  aoData.push( {"name": "search", "value": $('#fSearch').val() } );
},
"sDom": '<"clear">rtiS'
} ); 
```

# php - 插入查询 If 语句 PHP

> ID：11142601
> 
> 赞同：0
> 
> 时间：2012-06-21T16:28:25.017
> 
> 标签：php, mysql, email, insert

我创建了一个将来自一个 php 页面的值插入数据库的流程表单。我想使用某种类型的身份验证方法将表单的结果通过电子邮件发送给多个用户。我以为我可以使用 来实现这一点`mysql_query()`，但它会插入数据，但不会发送电子邮件。

```
$sql = insert query
$connection = mysql_connect 
```

我用了：

```
if (!mysql_query($sql,$connection))
 {
     die('Error' . mysql_error());
 } 
```

我试图`mail()`在 if 语句之后插入，但它不起作用。如果我`mail()`在 die 声明之后插入，任何人都可以处理文件并发送电子邮件。我怎样才能让它工作？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:41:15.627

如果没有更多信息，这是我可以就这种情况给出的最佳答案。

```
$query = mysql_query($sql,$connection);
if($query === true){
    //mail code
    mail();
} else {
    //Log some errors here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:48:34.453

每当您执行 mysql_query 函数时，它都会在成功的情况下返回一个资源 id。
所以你可以这样使用：

```
$result = mysql_query($sql,connection);

if($result){
    // mail function
    mail();
}else{
   die(mysql_error());
} 
```

正如您所说，**邮件**函数是在**die () 之后调用的，只有在没有抛出****mysql_error**并且从 if 循环中调用**邮件**函数的情况下才应该这样做。

# java - Glassfish 是企业服务总线 (ESB) 吗？

> ID：11142606
> 
> 赞同：0
> 
> 时间：2012-06-21T16:29:04.887
> 
> 标签：java, glassfish, esb

我正在和一位同事争论 ESB。我提到 Glassfish 是一个 ESB，因为它通过 JMS 管理数据库事务、提供 SOAP 消息和消息传递系统。他不同意并说 Oracle Enterprise Service Bus 是 ESB，而 Glassfish 不是。我问他 ESB 的特点是什么，他无法回答。

**Glassfish 缺少什么会阻止它成为 ESB？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:37:52.140

Glassfish 有一堆 ESB 的组件，但它在编排组件中特别缺乏。编排正在管理各种服务之间的“连接”。GF 具有管理端点的所有能力，但不具备从端点到端点的消息路由和转换。

也就是说，它曾经捆绑了一个 ESB。它曾经在 GF 2.x 中随 OpenESB 一起发布，但已从 GF 3.x 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:33:42.470

Glassfish 是一个应用服务器。您当然可以在其上运行 ESB，但是通常认为 ESB 缺少一些开箱即用的功能。您在这里将苹果与橙子进行比较——应用服务器提供支持 Web 应用程序的结构，而 ESB 的主要目标是帮助将信息分发到可能的多个应用程序或从多个应用程序分发信息。

# opencart - 更改管理菜单样式

> ID：11142609
> 
> 赞同：-3
> 
> 时间：2012-06-21T16:29:14.627
> 
> 标签：opencart

我想将我的管理菜单 Horizo​​ntal 更改为 vertical 。我已经附上了相同的屏幕截图。

请建议我如何做到这一点。

谢谢！ [截屏](http://i.stack.imgur.com/oCHgO.png)

在我的 opencart->admin->view->common->header.tpl

菜单是这样的

```
<div id="container">
<div id="header">
  <div class="div1">
    <div class="div2"><img src="view/image/logo.png" title="<?php echo $heading_title; ?>" onclick="location = '<?php echo $home; ?>'" /></div>
    <?php if ($logged) { ?>
    <div class="div3"><img src="view/image/lock.png" alt="" style="position: relative; top: 3px;" />&nbsp;<?php echo $logged; ?></div>
    <?php } ?>
  </div>
  <?php if ($logged) { ?>
<div id="menu">
    <ul class="left" style="display: none;">
      <li id="dashboard"><a href="<?php echo $home; ?>" class="top"><?php echo $text_dashboard; ?></a></li>
      <li id="catalog"><a class="top"><?php echo $text_catalog; ?></a>
        <ul>
          <li><a href="<?php echo $category; ?>"><?php echo $text_category; ?></a></li>
          <li><a href="<?php echo $product; ?>"><?php echo $text_product; ?></a></li>
          <li><a class="parent"><?php echo $text_attribute; ?></a>
            <ul>
              <li><a href="<?php echo $attribute; ?>"><?php echo $text_attribute; ?></a></li>
              <li><a href="<?php echo $attribute_group; ?>"><?php echo $text_attribute_group; ?></a></li>
            </ul>
          </li>
          <li><a href="<?php echo $option; ?>"><?php echo $text_option; ?></a></li>
          <li><a href="<?php echo $manufacturer; ?>"><?php echo $text_manufacturer; ?></a></li>
          <li><a href="<?php echo $download; ?>"><?php echo $text_download; ?></a></li>
          <li><a href="<?php echo $review; ?>"><?php echo $text_review; ?></a></li>
          <li><a href="<?php echo $information; ?>"><?php echo $text_information; ?></a></li> 
```

我希望这个菜单垂直显示而不是水平显示。

在样式表中，菜单是这样定义的

```
#menu {
    background: url('../image/menu.png') repeat-x;
    position: relative;
    z-index: 1;
    height: 34px;
    clear: both;
    padding: 0px 30px;
    min-width: 900px;
}
#menu > ul.left {
    float: left;
}
#menu > ul.right {
    float: right;
}
#menu > ul {
    position: relative;
    margin: 0;
    padding: 0;
}
#menu > ul ul {
    list-style: none;
    margin: 0;
    padding: 0;
    background: url('../image/transparent.png');
}
#menu > ul a {
    display: block;
    color: #FFFFFF;
    text-decoration: none;
    padding: 5px;
}
#menu > ul > li + li {
    background: url('../image/split.png') center left no-repeat;
}
#menu > ul .top, #menu > ul li li.sfhover {
    padding: 10px 15px 9px 17px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #FFFFFF;
    text-align: center;
}
#menu > ul ul li {
    padding: 2px;
}
#menu > ul .selected .top {
    background: url('../image/selected.png') repeat-x;
    color: #FFFFFF;
}
#menu > ul .selected:hover a.top, #menu > ul .sfhover a.top {
}
#menu > ul .parent {
    background: url('../image/arrow-right.png') 95% center no-repeat;
}
#menu > ul li {
    float: left;
    list-style: none;
}
#menu > ul li ul {
    position: absolute;
}
#menu > ul li li {
    clear: both;
}
#menu > ul li ul a {
    color: #FFFFFF;
    height: 15px;
    width: 145px;
}
#menu > ul li ul ul {
    margin: -27px 0 0 157px;
}
#menu > ul li li:hover, #menu > ul li li.sfhover {
    background: #333;
    color: #000000;
}
#container {
    height: 100%;
} 
```

在这里我不知道如何改变这一点。所以请建议我应该在哪里改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:21:12.927

如果您将图像更改为您选择的图像或背景颜色，然后在每次

```
<ul>
    <li><a href="<?php echo $attribute; ?>"><?php echo $text_attribute; ?></a></li>
    <li><a href="<?php echo $attribute_group; ?>"><?php echo $text_attribute_group; ?></a></li>
</ul><br/> 
```

要更改标题名称，请删除 php 文本并添加您自己的。

```
<li><a href="<?php echo $category; ?>">Add/Edit Category</a></li>
<li><a href="<?php echo $product; ?>">Add/Edit Products</a></li> 
```

如果你想要一个手风琴函数，那么你只需要下载这个[jquery 脚本](http://www.p51labs.com/accordion/)或其他类似的脚本，在这种情况下，你甚至不必担心 CSS 样式的混乱，你可以从头开始编写一个更简单的版本。

***更新**
要创建手风琴导航，请按照[**此处**](http://www.adipalaz.com/experiments/jquery/nested_accordion.html)的教程进行操作。我推荐演示 1 用于您的目的。

如果您需要帮助，我还建议您发布一个新问题。

# sql-server - Lightswitch：它可以创建一个实时的 SQLServer DB 监控应用程序吗？

> ID：11142621
> 
> 赞同：2
> 
> 时间：2012-06-21T16:30:16.623
> 
> 标签：sql-server, visual-studio-lightswitch

Lightswitch 可以用来创建基于 Web 的实时 SQL Server 数据库监控应用程序吗

换句话说，如果我有一个或多个查询，我在 SQL Server Mgt Studio 的查询工具中运行以获取各种信息，我可以使用 Lightswitch 创建一个基于 IE 的版本，它将针对同一个 SQL 数据库执行相同的查询并重新在某个时间值上执行那些，以便我有效地实时监控应用程序或显示我选择的信息的实时报告？

SQL Server Mgt Studio 有一个很棒的工具，叫做 Activity Monitor，它可以在固定的时间间隔（一个可以由用户更改的值）来查询一些系统视图和其他代码，以便为用户提供一个类似于监控的界面，是有效的实时报告。它是实时的，因为它不断地重新查询数据源，而用户无需做任何事情。

很长一段时间以来，我一直在 SSMS 的查询工具中使用预定义的查询来不断检查我定义的数据（与 Microsoft 某人创建的系统视图相反），我希望有一种方法可以做到这一点而无需使用 SSMS 并以某种方式自动执行特定时间间隔的查询，因此我不必连续按 F5。

如果除了 LIghtswitch 之外还有其他解决方案可以做到这一点，那么我很乐意听到它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:07:56.393

您需要将数据库附加到 Lightswitch 并在那里重新创建查询。然后创建一个屏幕来显示相关数据。但是，是的，Lightswitch 可以做你想做的事。您只需要实现一个计时器以在您定义的时间间隔内刷新屏幕。我在我的 Lightswitch 应用程序中做了类似的事情。我遵循了本指南：

[http://lightswitchspecial.blogspot.in/2012/02/autorefresh-lightswitch-screen.html](http://lightswitchspecial.blogspot.in/2012/02/autorefresh-lightswitch-screen.html)

# javascript - 带有 javascript && jQuery 的复选框

> ID：11142622
> 
> 赞同：0
> 
> 时间：2012-06-21T16:30:16.463
> 
> 标签：javascript, jquery, asp.net-mvc-3

当我单击复选框时，我将显示一个视图

我试过这样，但不行，
我需要你的帮助来解决这个问题

**楷模：**

```
public class DisplayData
{
    public bool ID { get; set; }
    public DisplayData(bool ID)
    {
        this.ID = ID;
    }
 }

public class Element
{        
    public string Descripcion { get; set; }
} 
```

**家庭控制器：**

```
 public ActionResult Index()
     {            
        DisplayData Display = new DisplayData(false);
        return View(Display);
     } 
```

**索引.cshtml：**

```
@model AppTwitter.Models.DisplayData

<script src="@Url.Content("~/Scripts/myCheckbox.js")" type="text/javascript"></script>

@Html.CheckBoxFor(
 x => x.ID, 
 new {
    data_url = Url.Action("PartialDemo", "PartialDemo"), 
    id = "mycheckbox" 
  } 
```

**myCheckbox.js：**

```
$(function () {
$('#mycheckbox').change(function () {
    var data = {};
    data[$(this).attr('name')] = $(this).is(':checked');

    $.ajax({
        url: $(this).data('url'),
        type: 'POST',
        data: data,
        success: function (result) {

        }
    });
});
}); 
```

**PartialDemoController.cs**

```
 public ActionResult PartialDemo()
    {                            
            var element = new Element();
            element.Descripcion = "Descripcion";
            return View(element);
    } 
```

**部分演示.cshtml：**

```
 @model AppTwitter.Models.Element

   <div class="editor-label">
        @Html.LabelFor(model => model.Descripcion )
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.Descripcion )

        @Html.ValidationMessageFor(model => model.Descripcion )
    </div> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:26:53.327

@Victor，现在我遇到了问题。您分配给复选框的 id 不起作用，因为您使用的是**@Html.CheckBoxFor(x => x.ID)**。在这种情况下，复选框的 ID 是动态生成的，因此“mycheckbox”不起作用。因此，而是分配一个 id 分配一个类，即

```
@Html.CheckBoxFor(
 x => x.ID, 
 new {
       data_url = Url.Action("PartialDemo", "PartialDemo"), 
       @class = "mycheckbox" 
     }
) 
```

并在下面的javascript中使用：

```
$(function () {
    $('.mycheckbox').click(function () {
      // your existing stuff
   });
}); 
```

希望这能解决问题

# python - 在 CherryPy 中使用映射

> ID：11142625
> 
> 赞同：2
> 
> 时间：2012-06-21T16:30:22.287
> 
> 标签：python, cherrypy

在 CherryPy 文档的[“调度/其他调度程序”](http://docs.cherrypy.org/stable/concepts/dispatching.html#other-dispatchers)部分中，有一个 Django 样式的正则表达式到视图函数映射定义的示例，但没有说明如何将其附加到`cherrypy.tree`.

你应该如何注册这个映射？

**编辑**：基于Google 组中的[“正则表达式 URL 映射”线程](https://groups.google.com/group/cherrypy-users/browse_thread/thread/93374eabe6681a9e?pli=1)`cherrypy-users`，我可以发现要使用正则表达式附加视图，您需要使用[`routes`](http://routes.readthedocs.org/en/latest/index.html)-style 使用`cherrypy.dispatch.RoutesDispatcher`类的映射，如下所示：

```
def hello(name='stranger'):
    """Sample view."""
    return 'Hello, %s!'%name

dispatch = cherrypy.dispatch.RoutesDispatcher()
dispatch.connect('hello-1', '/hello', hello)
dispatch.connect('hello-2', '/hello/{name:([^/]+)}', hello)
cherrypy.tree.mount(None, config={
        '/': {
             'request.dispatch': dispatch,
            }
        }) 
```

请注意`{argument-name:regular-expression}`URL 模式中的语法。

有没有办法使用 CherryPy 文档中所示的 list-of-pairs 语法来指定路由模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:16:16.217

不需要任何额外的步骤。在请求期间，`cherrypy.tree`执行第一个路由阶段，其中传入请求使用其路径到应用程序的映射映射到应用程序。当您`tree.mount(root=None, script_name='/', config=conf)`在启动时调用时，Tree 会在幕后为您创建一个 cherrypy.Application 并将其安装在“/”处。

一旦找到应用程序，它的配置就会接管，并且文档中示例应用程序的“request.dispatch”配置说“对这个应用程序中的所有 URI 使用 RoutesDispatcher”。然后，RoutesDispatcher 实例会将请求的控制权传递给适当的控制器。

*文档中的正则表达式示例甚至没有那么完善。您需要**编写**一个使用它的 Dispatcher。该过程“仅”需要找到处理程序并收集 request.config，但这两个活动可能非常复杂，具体取决于所选的调度样式。请参阅现有调度程序以获取灵感。*

# security - 混淆安全模型是否在密码安全中占有一席之地？

> ID：11142626
> 
> 赞同：5
> 
> 时间：2012-06-21T16:30:22.703
> 
> 标签：security, hash, passwords, password-protection, salt

在密码安全方面，人们同意一些事情，例如存储密码的加盐哈希，这可以针对受损模型和数据提供统计防御。

有些人似乎不同意如何处理盐。您可以采取无数种技术来尝试保护盐，但许多专家会认为它们只是对安全模型的毫无意义的混淆，并且随着时间的推移该模型将被暴露，我发现自己不同意有了这个，但我可能不理解其他观点。

我不明白的是，如果您的模型受到损害，为什么要假设完全妥协而不是部分妥协？如果您的安全模型分布在不同的基础设施中，这些基础设施的安全性并不相同，那么部分妥协甚至可能不是问题。（如果您执行诸如加密盐之类的操作并从不太可能被破坏的更安全的环境中检索加密密钥）

我假设这里的妥协并不总是 100%。我从来没有被黑客入侵过，也从来没有被黑客入侵过，所以我没有完整的画面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:38:24.847

> 如果您的模型受到损害，为什么要假设完全妥协而不是部分妥协？

您应该始终假设安全方面的最坏情况。这是最安全的方法。

> 部分妥协甚至可能不是问题

也许。但是你真的确定吗？
在您的 OP 中，您的分析基于太多假设。也许在一个非常具体的设置中，您认为部分妥协可能不是问题的评估可能是合理的。
但是话又说回来，您假设攻击者不足以找到漏洞。
不要将您的安全模型建立在假设之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:41:22.273

混淆和加密的最大区别在于，混淆的内容可以被澄清*，而不需要混淆信息之外的任何东西*——只要你能弄清楚你正在查看的数据类型，那么你就可以找到一种方法来澄清它.

与此同时，加密只能使用正确的密钥/密码/破解工具解密。没有这些东西的加密数据是非常安全的。

因此，混淆最多只能减缓一个坚定的攻击者，尽管它可能会推迟一个不太坚定的攻击者。围绕系统和服务器的安全性，您可以做许多更容易和更易于维护的事情，以加强它们免受不那么坚定的攻击者的攻击，因此在我看来，为您和您的系统增加额外工作的混淆成本很少是合理的。

假设发生妥协时不是 100% 是一项非常冒险的尝试，因为您实际上假设的是您比攻击者更聪明，更了解您的系统。你可能是对的，但如果你*假设*它并且你错了，那么你确实有非常严重的麻烦。你必须证明它，并且考虑到证明否定的问题，当发生妥协时，就好像你已经完全受到危害一样行事，并设计你的系统，使它们尽可能安全，即使在总妥协已经发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:36:59.143

通过默默无闻的安全，充其量是一场赌博。将盐存放在其他地方是否值得？大概。但是当您开始进入这些多步骤安全设置时，您必须考虑成本与回报。我想说，如果您的应用程序需要它，您会知道的。否则，为了获得超强的安全性而在应用程序中添加更多步骤可能只会在出现问题时让自己头疼。不是每个人都需要 NASA 级别的系统安全性。这并不是说安全不重要。只是您需要根据当前环境对其进行调整。

# linux - 从程序获取和设置 Linux 上的 IO 调度程序

> ID：11142629
> 
> 赞同：2
> 
> 时间：2012-06-21T16:30:26.977
> 
> 标签：linux, io, scheduler, system-calls

我有一个绝对路径（例如“/mnt/target/benchmarkTest/Run1”），我想获取可用 IO 调度程序的列表，并为该路径物理所在的设备设置一个 IO 调度程序。

编程语言无关紧要，可以说它是 c 或 bash 脚本。

我知道您可以使用`/sys/block/sda/queue/scheduler`文件系统上的`sysfs`文件设置 IO 调度程序。

我知道我可以使用 pyhsical devices 块设备

```
readlink -f `df -T -P /mnt/target/benchmarkTest/Run1 | awk 'NR>1 {printf $1}'` 
```

这可能至少返回（列表不完整）

1.  带有分区号的典型块设备，例如。`/dev/sda3`
2.  如果数据直接存储在设备上而没有任何分区（例如 USB 记忆棒），则没有 pration 编号的块设备，例如`/dev/sdd`
3.  如果使用 LVM（或类似），则为设备映射器块设备，例如`/dev/dm-2`

对于这些返回类型中的每一个，我需要检查 IO 调度程序的不同位置：

1.  以某种方式获取实际包含分区的设备。也许通过丢弃所有数字并将其作为设备。
2.  我可以将设备直接带入`sysfs`文件
3.  现在变得很棘手：我需要检查 lvm 卷所在的设备（可能很多），然后为每个设备设置调度程序。请记住：LVM 没有自己的 IO 调度程序。

这个过程可以以某种方式简化吗？是否有这个或另一个简化过程的入口点的内核系统调用？当前的方法似乎很容易出错。

谢谢！

# c++ - 为什么我的编译器找不到我的函数？

> ID：11142636
> 
> 赞同：1
> 
> 时间：2012-06-21T16:30:52.580
> 
> 标签：c++, arrays

我只是在学习如何使用 C/C++ 并试图编写一个程序，其中“otherPerson”（名字，姓氏）从“person”（名字）继承。我被困在人的 compareTo 函数上。它应该按名字的字母顺序对指向人的指针数组进行排序。（不确定我是否正确表达了这个想法）。最终目标是打印数组的排序内容。

我不断得到：

> 错误 LNK2019：函数 _main 1>c:\users\laur\documents\visual studio 2012 中引用的未解析的外部符号“void __cdecl compareTo(class person * * const,int)”(?compareTo@@YAXQAPAVperson@@H@Z) \Projects\Project1\Debug\Project1.exe : 致命错误 LNK1120: 1 unresolved externals

当我尝试构建时。我在互联网上查看了更多信息，但我很确定我的包含语句是正确的。该函数旨在作为成员函数。

测试.cpp：

```
#include "stdio.h"
   #include "otherPerson.h"
   #include<iostream>
   #include <string>
   using namespace std;
      void compareTo(person *array[7], int );
       int main(){
           int length = 7;
           person* epicJourney[6];
          //fill array
           compareTo(epicJourney, length); 
```

人.h：

```
#include <stdio.h>
#include <string>
using namespace std;

class person {
    protected:
        string firstName;
    public: 
        person(string firstName);
        virtual void setFirstName(string firstName);
        virtual string getFirstName();  
        virtual void compareTo (person *array[7], int length);
        virtual string toString();
}; 
```

人.cpp：

```
#include "person.h"
#include <string>
using namespace std;
person::person(string firstName){
    this->firstName = firstName;
}

void person::setFirstName(string aName){
    firstName =aName;
}

string person::getFirstName(){
    return ((*this).firstName);
}

string person::toString(){
    return (this->firstName);
}

void person::compareTo(person *array[], int length){
    int i;
    int j;

    person *current;

    for (i=1; i<length; i++){
        current = array[i];
        for (j=i; j>=1 && (current < array[j-1]); j--){
            array[j] = array[j-1];
            array[j-1] = current;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:35:29.137

您的原型是`void compareTo(... );`，但您的实际实现是`void person::compareTo(...)`. 你必须下定决心：你想要一个类成员函数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:35:57.540

您缺少此独立函数的定义：

```
void compareTo(person *array[7], int ); 
```

您需要在程序中的某处添加定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:36:15.510

你定义了一个函数`person::compareTo`，它**不同于**Test.cpp中声明的函数`compareTo`（因为前者是 的成员函数`person`，而后者是全局函数）。

# javascript - 单击父元素时子元素中的jQuery淡入淡出

> ID：11142637
> 
> 赞同：1
> 
> 时间：2012-06-21T16:30:56.420
> 
> 标签：javascript, jquery, html, dom-traversal

当使用单击父元素时，我试图淡入子元素`jQuery`，但`.children()`似乎没有完成我想要做的事情。

我试图`<h2>`在单击元素时使元素淡入`<h1>`。

**Javascript：**

```
$(document).ready(function() {
    $('h2').hide();
    $('h1').bind('click', function() {
        $(this).children().fadeIn(400);
    });
}); 
```

这是我的代码：

**HTML：**

```
<h1>
Visible Parent
    <h2>
    Hidden Child
    </h2>
</h1> 
```

A`JSFiddle`代码可以在这里找到：http: [//jsfiddle.net/jHkAB/5/](http://jsfiddle.net/jHkAB/5/)

**解决了：**

通过将`<h1>`and`<h2>`元素分开，然后使用`.next()`来选择元素之后的`<h1>`元素，当点击它之前的元素时，下一个元素会淡入。

可以`JSFiddle`在这里找到代码：http: [//jsfiddle.net/bazmegakapa/jHkAB/16/](http://jsfiddle.net/bazmegakapa/jHkAB/16/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:34:01.560

标题元素（`h1`,`h2`等）[不能相互包含](http://dev.w3.org/html5/spec/the-h1-h2-h3-h4-h5-and-h6-elements.html#the-h1-h2-h3-h4-h5-and-h6-elements)，因此您的 HTML 被浏览器规范化并变为：

```
<h1>
Visible Parent
</h1>
    <h2>
    Hidden Child
    </h2> 
```

这就是为什么你的动画不会触发的原因，因为`h2`它不再是一个孩子`h1`。

# opencv - knnMatch 需要 k>1 才能得到好的结果？

> ID：11142643
> 
> 赞同：1
> 
> 时间：2012-06-21T16:31:10.613
> 
> 标签：opencv, sift, surf

我正在使用 SURF，我正在尝试两者

```
FlannBasedMatcher 
```

和

```
BruteForceMatcher 
```

我看到了我需要设置的好匹配

```
matcher.knnMatch(,,2); // with k=2 (At least) 
```

如果我设置`k = 1`，我不会得到该关键点的第一个不太远的匹配。
有什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:00:56.807

knnMatch 将您的数据划分为 k 个组。如果k=1，你会把它放在一个大组中。

对于单个分区，算法很难计算出到第二个分区的距离。所以根本没有距离可以计算。

# drupal - 通过 SQL (term_node) 将分类术语直接添加到节点

> ID：11142646
> 
> 赞同：0
> 
> 时间：2012-06-21T16:31:11.530
> 
> 标签：drupal, drupal-6, drupal-taxonomy, drupal-nodes

如何通过 SQL 将分类术语直接添加到节点？

我用了：

```
db_query("INSERT INTO {term_node} (nid, vid, tid) VALUES ( " . $row['nid'] . "," . $the_term->vid . "," . $row['next_tid'] . ")" ); 
```

值`$row['nid']`,`$the_term->vid`和`$row['next_tid']`是正确的；但节点中仍然没有出现任何术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T18:15:31.820

与其直接写入数据库，不如调用 taxonomy_node_save() 方法：[http ://api.drupal.org/api/drupal/modules!taxonomy!taxonomy.module/function/taxonomy_node_save/6](http://api.drupal.org/api/drupal/modules!taxonomy!taxonomy.module/function/taxonomy_node_save/6)

通过这种方式，您可以确保不会遗漏该函数所做的任何其他步骤（即使小到最后的“刷新术语缓存”。:-)

让我知道这是否可行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:00:27.083

你们在谈论Drupal 7吗？在这种情况下，您应该考虑至少另外两个表。Drupal 7 中的 CCK 为每个字段创建两个表：`field_data_field_<fieldname>`和`e field_revision_field_<fieldname>`

# excel - 试图将一行合并到一个带有日期的单元格中

> ID：11142649
> 
> 赞同：0
> 
> 时间：2012-06-21T16:31:23.850
> 
> 标签：excel, cell

好的，所以我正在尝试创建一个宏，它将获取我设置的单元格并将它们插入到 html 代码中......

我所拥有的是带有我的 html 代码的单元格和带有我需要的值的单元格......首先它是参考。第一个 html J2 并将其放在 B13 旁边的参考。我需要的值并将其放在 C13 中，依此类推...它得到一个基于日期的文件名，所以假设日期是 2012 年 6 月 20 日，它将采用该值并将下一个单元格格式化为拉该日期，但将文本格式化为 20120620.mp3... 当参考。代码采用该单元格，它采用格式...但是当我运行另一个脚本将所有单元格连接在一起时，它会将日期更改为 2012 年 6 月 20 日的原始格式...我想也许它会拉动原始格式但我更改了第一个日期单元格的原始格式，它仍然保持 2012 年 6 月 20 日的格式。

```
<div id="messageDate">6/20/2012</div><audio id="audio" preload="none" controls="controls"><source src="sermons_mp3/mp3/6/20/2012" type="audio/mpeg"></audio> 
```

它应该看起来像这样

```
<div id="messageDate">6/20/2012</div><audio id="audio" preload="none" controls="controls"><source src="sermons_mp3/mp3/20120620.mp3" type="audio/mpeg"></audio> 
```

我使用此代码来组合单元格

```
 Sub JoinText()
myCol = Selection.Columns.Count
For i = 1 To myCol
ActiveCell = ActiveCell.Offset(0, 0) & ActiveCell.Offset(0, i)
ActiveCell.Offset(0, i) = ""
Next i
End Sub 
```

我也试过这个

```
 Function ConcatinateAllCellValuesInRange(sourceRange As Excel.Range) As String
        Dim finalValue As String

        Dim cell As Excel.Range

        For Each cell In sourceRange.Cells
            finalValue = finalValue + CStr(cell.Value)
        Next cell

        ConcatinateAllCellValuesInRange = finalValue
    End Function
    Sub MyMacro()
        Range("b14").Select
        ActiveCe

ll.FormulaR1C1 = ConcatinateAllCellValuesInRange([b13:r13])
End Sub 
```

并且所有结果都相同...我希望这会有所帮助，有人可以在这方面给我一些帮助...我是VBA的新手，不知道我在做什么...我所做的只是我在玩并获得幸运...大声笑

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:40:15.480

如果您从仅包含日期的单元格中连接日期（例如`6/20/2012`，与 相对`sermons_mp3/mp3/6/20/2012`），则可以使用以下公式获取 src 参数：

```
="sermons_mp3/mp3/" & text(date_value, "yyyymmdd") & ".mp3" 
```

# php - PHP删除重复删除特定文本后的行以查找XML

> ID：11142653
> 
> 赞同：0
> 
> 时间：2012-06-21T16:31:33.603
> 
> 标签：php, xml, stomp

我有代码来检索跺脚消息，这很有效。然后我想从 stomp 消息中获取 xml 来做一些事情，我有代码并且它可以工作。

挑战在于从消息中去除杂乱无章的内容并仅获取 xml。

这是 stomp 消息的示例（是的，数据是相同的，但在这里不相关）：

```
MESSAGE
_HQ_ORIG_ADDRESS:jms.queue.edu
timestamp:1339716293764
redelivered:false
_HQ_ORIG_MESSAGE_ID:xxxxxxxx
expires:0
subscription:subscription/jms.queue.edu
priority:4
message-id:xxxxxxxxxx
destination:jms.queue.edu

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><create><sourceMessageId>4454</sourceMessageId><messageId>3038</messageId><course> <batchUid>ASIA.355.921.2012S1.6733</batchUid><title>ASIA355-921-Chinese Cinema</title><startDate>2012-06-18-07:00</startDate><endDate>2012-09- 21-07:00</endDate><mappedNodeBatchUid>9c0bc373-23a0-4e60-b201- efbbc9bb022e</mappedNodeBatchUid><available>false</available></course></create>
MESSAGE
_HQ_ORIG_ADDRESS:jms.queue.edu
timestamp:1339716293764
redelivered:false
_HQ_ORIG_MESSAGE_ID:xxxxxxxx
expires:0
subscription:subscription/jms.queue.edu
priority:4
message-id:xxxxxxxxxx
destination:jms.queue.edu

<?xml version="1.0" encoding="UTF-8" standalone="yes"?><create><sourceMessageId>4454</sourceMessageId><messageId>3038</messageId><course> <batchUid>ASIA.355.921.2012S1.6733</batchUid><title>ASIA355-921-Chinese Cinema</title><startDate>2012-06-18-07:00</startDate><endDate>2012-09- 21-07:00</endDate><mappedNodeBatchUid>9c0bc373-23a0-4e60-b201- efbbc9bb022e</mappedNodeBatchUid><available>false</available></course></create> 
```

我想要做的是删除消息中从“MESSAGE”开始到并包括以xml开头的每一行之前的换行符的所有行。这将为我提供使用 xml 解析器解析所需的结果：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?><create><sourceMessageId>4454</sourceMessageId><messageId>3038</messageId><course> <batchUid>ASIA.355.921.2012S1.6733</batchUid><title>ASIA355-921-Chinese Cinema</title><startDate>2012-06-18-07:00</startDate><endDate>2012-09- 21-07:00</endDate><mappedNodeBatchUid>9c0bc373-23a0-4e60-b201- efbbc9bb022e</mappedNodeBatchUid><available>false</available></course></create>
    <?xml version="1.0" encoding="UTF-8" standalone="yes"?><create><sourceMessageId>4454</sourceMessageId><messageId>3038</messageId><course> <batchUid>ASIA.355.921.2012S1.6733</batchUid><title>ASIA355-921-Chinese Cinema</title><startDate>2012-06-18-07:00</startDate><endDate>2012-09- 21-07:00</endDate><mappedNodeBatchUid>9c0bc373-23a0-4e60-b201- efbbc9bb022e</mappedNodeBatchUid><available>false</available></course></create> 
```

我试过了：

```
$xmlstr = preg_replace("/MESSAGE(.*)jms.queue.edu$/ims",'',$msg);
$xmlstr = trim($xmlstr); 
```

但这会删除第一行第一次出现“MESSAGE”和最后一次出现 xml 之间的所有内容。换句话说，第一个“MESSAGE”和最后一个“xml”之间的所有行都被删除。

有任何想法吗？我尝试过使用各种技巧，包括：正则表达式、内爆/爆炸、写入/读取文件等。但我觉得上面的 preg_replace 代码有效，它只需要能够识别所有事件。我知道这将涉及“while”或“foreach”循环，但我期待一个好的、干净的解决方案。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:34:32.260

`?`后使用`*`。

或者，试试这个：

```
list(,$body) = explode("\r\n\r\n",$msg); // adjust line ending as needed
list($xmlstr) = explode("\r\n",$body); 
```

这将获得包含所有 XML 的行。

# c# - 无法继承形状

> ID：11142654
> 
> 赞同：4
> 
> 时间：2012-06-21T16:31:42.710
> 
> 标签：c#, .net, wpf, inheritance, shape

为什么我不能使用继承类的[`Shapes`类](http://msdn.microsoft.com/en-us/library/ms604615%28v=vs.90%29)？

我需要`Rectangle`用一些方法扩展类，但我想以与使用 a 相同的方式使用此类，我该`Shape`怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T16:34:28.097

您*可以*编写一个派生自`Shape`. 您*不能*编写派生自 的类[`Rectangle`](http://msdn.microsoft.com/en-us/library/system.windows.shapes.rectangle.aspx)，因为它是密封的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T16:38:50.050

正如乔恩指出的那样，矩形是密封的。

根据您要执行的操作，有几个选项是：

1.  您可以使用自己的包含 Rectangle 的类来扩展 Shape，并通过组合来增强功能。这些对象不会被视为“是”检查中的矩形。

2.  您可以为 Rectangle 编写扩展方法，然后您可以在任何 Rectangle 上使用它们。那么这些对象仍将被视为矩形。

例如

```
public static class RectangleExtensions {
    public static bool IsSquare(this Rectangle r) {
        return r.Width == r.Height;
    }
} 
```

# android - Android 如何从 TextView 中为图书阅读器选择文本？

> ID：11142661
> 
> 赞同：0
> 
> 时间：2012-06-21T16:32:20.590
> 
> 标签：android, textview, android-edittext, ebook-reader

我想创建一个图书阅读器，为此我在选择一些文本时遇到了问题，我不知道什么是最好的方法。我阅读了一些帖子，其中他们使用 EditText 进行选择。但这并不是很有用，因为当你长按它显示选择单词/全选并出现键盘时，我想要的只是选择文本的可能性，听选择，然后使用 Spannable/Linkify 编辑那部分文本。

如果使用标准文本光标控制器不容易，我可以创建自定义光标控制器或类似的东西吗？

我读了这篇文章：

[从 TextView 中选择文本？](https://stackoverflow.com/questions/4991201/select-text-from-textview)

[如何允许用户在 TextView 中选择文本范围（类似于 EditText）](https://stackoverflow.com/questions/6309093/how-to-allow-the-user-to-select-a-text-range-in-a-textview-similar-to-edittext)

先感谢您。

更新：

我发现这个类 android.text.Selection 似乎使用光标控制器但我在谷歌上找不到任何关于它的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:36:50.850

在[`android:textIsSelectable="true"`](http://goo.gl/Dfpyf)您的`TextView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T12:21:51.530

通过研究 Android 的源代码，我制作了一个具有选择功能的自定义 TextView。请从另一个问题[Android-How can I show text selection on textview? 中查看我的回答？](https://stackoverflow.com/questions/12346604/android-how-can-i-show-text-selection-on-textview/17137052#17137052)

# arrays - 有没有一种惯用的方法来测试 Coffeescript 中的数组相等性？

> ID：11142666
> 
> 赞同：23
> 
> 时间：2012-06-21T16:32:43.687
> 
> 标签：arrays, coffeescript, equality

表达方式

```
[1, 2, 3] == [1, 2, 3] 
```

`false`在*Coffeescript*中计算结果为，但是否有一种简洁、惯用的方法来测试数组是否相等？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T17:53:40.300

如果您正在处理数字数组，并且您知道数组中没有空值或未定义值，则可以将它们作为字符串进行比较：

```
a = [1, 2, 3]
b = [1, 2, 3]

console.log "#{a}" is "#{b}" # true
console.log '' + a is '' + b # true 
```

但是请注意，一旦您开始比较其他非数字的数组，这将中断：

```
a = [1, 2, 3]
b = ['1,2', 3]

console.log "#{a}" is "#{b}" # true 
```

如果您想要一个更强大的解决方案，您可以使用[`Array#every`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every)：

```
arrayEqual = (a, b) ->
  a.length is b.length and a.every (elem, i) -> elem is b[i]

console.log arrayEqual [1, 2, 3], [1, 2, 3]   # true
console.log arrayEqual [1, 2, 3], [1, 2, '3'] # false
console.log arrayEqual [1, 2, 3], ['1,2', 3]  # false 
```

请注意，它首先比较数组的长度，因此`arrayEqual [1], [1, 2, 3]`不会返回 true。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T16:44:53.427

如果您不介意引入[Underscore.js](http://underscorejs.org)依赖项，您可以使用其中的一些实用程序。它不是非常优雅，但我想不出用普通的咖啡脚本更简单的方法：

```
a = [ 1, 2, 3 ]
b = [ 1, 2, 3 ]
equal = a.length == b.length and _.all( _.zip( a, b ), ([x,y]) -> x is y ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T17:47:26.443

我不认为这是惯用的，但这将是一种无需添加额外库的方式：

```
a = [1, 2, 3, 4]
b = [22, 3, 4]

areEqual = true
maxIndex = Math.max(a.length, b.length)-1
for i in [0..maxIndex]
    testEqual = a[i] is b[i]
    areEqual = areEqual and testEqual

console.log areEqual 
```

更简洁的方法是使用 JavaScript 的[reduce()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)函数。这有点短，但我不确定所有浏览器都支持减少。

```
a = [1, 3, 4, 5]
b = [1, 3, 4, 5]

maxIndex = Math.max(a.length, b.length)-1
areEqual = true
[0..maxIndex].reduce (p, c, i, ar) -> areEqual = areEqual and (a[i] is b[i])

console.log "areEqual=#{areEqual}" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-19T09:44:16.197

以下效果很好，不需要依赖：

```
arrayEqual = (ar1, ar2) ->
  JSON.stringify(ar1) is JSON.stringify(ar2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T07:55:49.047

我是[Sugar.js](http://sugarjs.com/)的忠实粉丝。如果您碰巧正在使用它：

```
a = [1, 2, 3]
b = [1, 2, 3]
Object.equal(a, b) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-10T08:15:23.437

`true`如果数组具有相同的长度并且具有相同索引的所有值具有相同的值，则此函数返回。如果任一参数不是数组，则会引发错误。

```
isArray = Array.isArray || (subject) ->
    toString.call(subject) is '[object Array]'

compareArrays = (a, b) ->
    unless isArray(a) and isArray b
        throw new Error '`arraysAreEqual` called with non-array'

    return false if a.length isnt b.length

    for valueInA, index in a
        return false if b[index] isnt valueInA

    true 
```

# c# - Infragistics UltraGrid：GroupBy 行前景色在单击时发生变化

> ID：11142675
> 
> 赞同：2
> 
> 时间：2012-06-21T16:33:53.500
> 
> 标签：c#, winforms, infragistics, ultrawingrid

在 C# 的 WinForms 中使用 Infragistics UltraGrid：

我有条件地更改网格上某些 GroupByRows 的 ForeColor 的颜色。当用户单击该行时，颜色会变回活动/选定/热跟踪/任何颜色，直到他们单击其他颜色。我希望我有条件着色的行的文本颜色永远不会改变。这是我设置颜色的方法：

Row.Appearance.ForeColor = System.Drawing.Color.Orange;

知道即使单击该行也如何使它保持不变？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:25:08.927

这可以通过绘制过滤器来设置描述的前景色来完成，因为这将始终适用。

一个简单的例子是下面的绘制过滤器，它将使所有具有橙色整数值的行分组：

```
public class GroupByRowDrawFilter:IUIElementDrawFilter
{
    public bool DrawElement(DrawPhase drawPhase, ref UIElementDrawParams drawParams)
    {
        GroupByRowDescriptionUIElement element = (GroupByRowDescriptionUIElement)drawParams.Element;
        if (element.GroupByRow.Value is int)
        {
            int value = (int)element.GroupByRow.Value;
            if (value % 2 == 0)
            {
                drawParams.AppearanceData.ForeColor = Color.Orange;
            }
        }

        return false;
    }

    public DrawPhase GetPhasesToFilter(ref UIElementDrawParams drawParams)
    {
        if (drawParams.Element is GroupByRowDescriptionUIElement)
            return DrawPhase.BeforeDrawElement;
        return DrawPhase.None;
    }
} 
```

要应用绘图过滤器，请使用以下代码行：

```
this.ultraGrid1.DrawFilter = new GroupByRowDrawFilter(); 
```

请注意，此方法要求条件位于绘图过滤器中。如果这对您不起作用，您可以修改您当前设置 ForeColor 的逻辑以设置 GroupByRow 的 Tag 属性，然后检查绘图过滤器中的 Tag 属性以确定是否需要应用您的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:40:13.003

我认为你也应该改变

```
grd.DisplayLayout.Override.SelectedRowAppearance.ForeColor = System.Drawning.Color.Orange; 
```

或更好

```
grd.DisplayLayout.Override.GroupByRowAppearance.ForeColor = System.Drawning.Color.Orange; 
```

抱歉，但我远离可以测试的 PC。

通常这些属性可以在 InitializeLayout 事件中有效地更改，您可以在事件参数中获取 Layout 对象。

```
e.Layout.Override.GroupByRowAppearance.ForeColor = Color.Orange; 
```

编辑：目前我发现的唯一解决方案如下

```
 private void grd_BeforeRowActivate(object sender, RowEventArgs e)
    {
        // You need to add the additional logic required by you to
        // determine which rows need to have the forecolo changed...
        if (e.Row.IsGroupByRow == true)
            grd.DisplayLayout.Override.ActiveRowAppearance.ForeColor = Color.Orange;
        else
            grd.DisplayLayout.Override.ResetActiveRowAppearance();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:25:27.260

基础设施 说：

> “能够为 GroupByRows 提供活动和选择的条件出现”已被确定为一个新的产品理念

# c# - C# - 通过任意数量的制表符和空格分割字符串

> ID：11142676
> 
> 赞同：20
> 
> 时间：2012-06-21T16:33:56.947
> 
> 标签：c#, string, split

> **可能重复：**
> [在 String.Split 操作中指定空格的最佳方法](https://stackoverflow.com/questions/6111298/best-way-to-specify-whitespace-in-a-string-split-operation)

我正在尝试读取包含以下内容的主机文件：

```
127.0.0.1 localhost
ect... 
```

因此，当我逐行阅读时，我需要获取 IP 和主机名，但是如果它们由任意数量的制表符或空格或两者组成，我将如何获取它们。

```
127.0.0.1<tab><space>localhost
127.0.0.1<space>localhost
127.0.0.1<space><space><space><space>localhost 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-21T16:45:27.733

```
var components = host.Split((char[])null, StringSplitOptions.RemoveEmptyEntries); 
```

# ios - 自定义 UIBarButtonItem 图标拉伸

> ID：11142681
> 
> 赞同：1
> 
> 时间：2012-06-21T16:34:12.237
> 
> 标签：ios, ios5, uiimage, retina-display

我有一个视网膜和非视网膜打印机图标。当我只指定'PrinterIcon.png'时，

```
[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"PrinterIcon.png"] style:UIBarButtonItemStyleBordered target:self action:@selector(printCmdTouched:)]; 
```

它只是使用我的 iPad 3（第三代）上的非视网膜图像。如果我特别指定“PrinterIcon@2x.png”（x 小写），我在工具栏中看不到它。如果我指定“PrinterIcon@2X.png”，它会显示在工具栏中，但会水平拉伸。

反正知道为什么吗？

视网膜图像规格为： 图像尺寸：40x40 图像 DPI：299.99 像素/英寸 颜色模型：RGB

非视网膜图像规格为： 图像尺寸：20x20 图像 DPI：72.00 像素/英寸 颜色模型：RGB

我检查了 Pixelmator 中的规格。

附件是图片。

任何人都知道为什么这不起作用？

我正在使用 iOS SDK 5.1 iOS 部署目标 5.0 基础 SDK：最新 iOS (iOS 5.1)

![在此处输入图像描述](../Images/5b1f072172d2b30d41b8dba809969e6d.png)![在此处输入图像描述](../Images/78172ed640a995297ffbd900018e3501.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:28:47.547

我解决了这个问题。在再次调试之前，我清理了构建并从设备中删除了应用程序。现在一切都好。

# c++ - boost::any 是否保存副本或参考/指针？

> ID：11142688
> 
> 赞同：1
> 
> 时间：2012-06-21T16:34:36.233
> 
> 标签：c++, boost, boost-any

下面的代码安全吗？

```
boost::any any_value;

{
    std::string s = "HelloWorld";
    any_value = s;
}

std::string ss = any_cast<std::string>(any_value); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T16:39:11.763

来自[Boost.Any](http://www.boost.org/doc/libs/1_49_0/doc/html/boost/any.html)文档：

```
template<typename ValueType> any & operator=(const ValueType & rhs); 
```

> 制作 rhs 的副本，丢弃以前的内容，以便新的内容在类型和值上都与 rhs 相同。

所以是的，这样做是安全的。存储字符串的副本，而不是对其的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:38:43.453

是的。`boost::any`假设类型满足`Copyable`概念，则通过对其进行复制来获取所有内容。

# php - 实时环境中静态内容的适当缓存持续时间

> ID：11142689
> 
> 赞同：2
> 
> 时间：2012-06-21T16:34:39.027
> 
> 标签：php, javascript, css, caching

我的应用程序即时压缩和组合静态内容，例如 CSS / JavaScript，以减少最终用户的加载时间。然而，这个过程非常需要资源。因此，我实现了一个缓存系统。通常在现场环境中，这种静态内容很少改变。

**将此内容的缓存持续时间设置为一周**甚至更多会是愚蠢的吗？然后为管理员提供一个工具，让他在编辑样式等时手动清除缓存。

*使标签更合适的编辑将不胜感激。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:31:10.473

在服务器端的情况下，我认为缓存失效的持续时间**太简单**了。您可以*知道*文件何时更新以及需要重建缓存。如果编辑是通过某个自定义界面作为应用程序的一部分进行的，那很简单：如果进行了任何编辑，只需删除缓存即可。

但即使您的管理员通过 FTP 更新文件，您也可以查看时间戳。

例子：

```
<?php
$files = array("reset.css", "style.css");

$timestamps = "";
foreach( $files as $file ){
    $timestamps .= filemtime($file);
}
$cache_file = md5($timestamps).".css";

if( !file_exists($cache_file) ){
    // Build minified version into cache file
    // (leaving the implementation out here)
    concat_and_minify($files, $cache_file);
}

echo '<link rel="stylesheet" type="text/css" href="' . $cache_file . '"/>'; ?> 
```

如果任何文件发生更改，这只会重建您的缩小版本。与“愚蠢”的持续时间机制相比，读取每个文件的 mtime 开销很小，但在灵活性方面是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:43:18.303

静态内容的一周缓存似乎很标准。难道你不能让写入这些文件的过程也影响缓存吗？（例如重写 .htaccess 文件）取决于您的缓存方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:56:58.293

您可以向脚本/样式 URL 添加一个版本，例如`http://example.com/generate-styles.php?version=123`. 根据 HTML 的缓存策略，这可以让 CSS/JS 缓存更长寿。MediaWiki 使用了另一种方法，这是 Wikipedia 使用的软件：它包括一个生命周期为 5 分钟的引导脚本，其中包含所有 CSS/JS 的版本，然后使用此信息加载最新版本的文件（使用与 versioned 相同的技巧网址）。

# ruby-on-rails - Rails 3/Paperclip：如何将路径提取为字符串以进行图像处理？（不是 ImageMagick！）

> ID：11142693
> 
> 赞同：0
> 
> 时间：2012-06-21T16:35:00.817
> 
> 标签：ruby-on-rails, ruby, image-processing, paperclip

我正在运行一个 web 应用程序，它通过回形针上传图像，然后在 opencv 支持的 ruby​​ 扩展 gem 中对它们执行图像处理，这需要一个字符串路径才能运行。我一直在使用的代码如下：

```
imageFiles # => Array of ActiveRecord objects with attached paperclip files ('image')
filenames = Array.new()
imageFiles.each{ |imFile|
    filenames.push( imFile.image.path )
}
imgproc = ImageProcessor.new # => extension
imgproc.process( filenames ) 
```

这给了我以下错误：

```
can't convert Paperclip::Attachment into String 
```

如果我推：

```
imFile.image.file_name 
```

相反，我的错误变为：

```
undefined method `file_name' for /xxx/xxx/xxx/000/000/062/original/img.jpg?1340296339:Paperclip::Attachment 
```

我是在正确的道路上，还是我错过了一步？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:40:38.733

我不知道 opencv 支持的工作原理，但您可以尝试仅推送图像对象。

```
filenames.push( imFile.image ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:06:41.260

原来，我之前将图像推送到文件名数组而不是文件本身，这是鸭式语言的危险之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T20:03:44.247

我在尝试发送文件时遇到了同样的错误。就我而言，我只需要将对象转换为字符串。

```
 file = @my_object.my_document
    path = open(file.to_s)
    send_file(path,
       :type => "application/pdf",
       :disposition => 'inline', :filename => "My File") 
```

# java - AppEngine 请求延迟的变化

> ID：11142694
> 
> 赞同：2
> 
> 时间：2012-06-21T16:35:00.703
> 
> 标签：java, google-app-engine

我试图了解 AppEngine 请求延迟的不一致。为什么一个接一个调用的完全相同的请求会有这样的响应时间变化。
以下日志显示来自同一实例的响应时间从 53 毫秒到 706 毫秒不等，并且 servlet 对数据存储 api 进行一次调用，检索单个字段：

```
2012-06-21 11:04:03.673 /admin/q/ListingReport/all 200 706ms 11kb 
2012-06-21 11:04:02.205 /admin/q/ListingReport/all 200 53ms 11kb 
2012-06-21 11:03:02.681 /admin/q/ListingReport/all 200 544ms 11kb 
2012-06-21 11:03:01.161 /admin/q/ListingReport/all 200 697ms 11kb 
2012-06-21 11:02:58.603 /admin/q/ListingReport/all 200 54ms 11kb 
```

此日志显示响应时间从 8 毫秒到 500 毫秒不等，并且是静态内容：

```
2012-06-21 11:22:12.084 /lib/lst/clientMain.js 304 13ms 0kb
2012-06-21 11:22:12.023 /stdlib/js/jscore/Template.js 304 500ms 0kb
2012-06-21 11:22:12.022 /lib/lst/EventBus.js 304 546ms 0kb
2012-06-21 11:22:12.022 /lib/lst/ClientPoster.js 304 575ms 0kb
2012-06-21 11:22:12.022 /lib/lst/pages/ListingsEditPage.js 304 582ms 0kb
2012-06-21 11:22:12.021 /lib/lst/ClientDataStore.js 304 580ms 0kb
2012-06-21 11:22:12.020 /lib/lst/pages/ListingsAddPhotoPage.js 304 587ms 0kb
2012-06-21 11:22:11.435 /lib/lst/pages/ListingsNewPage.js 304 9ms 0kb
2012-06-21 11:22:11.409 /lib/lst/pages/ListingsPage.js 304 8ms 0kb
2012-06-21 11:22:11.401 /lib/lst/pages/DashboardPage.js 304 8ms 0kb 
```

我计划启用 AppStats 以查看数据存储是否导致我的 API 调用延迟变化，但为什么静态文件会如此不同？

# asp.net - 如何在文本字段中嵌入代码并将其与 ASP.NET 中的字符串连接？

> ID：11142696
> 
> 赞同：0
> 
> 时间：2012-06-21T16:35:04.800
> 
> 标签：asp.net, concatenation, ascx

在 ASP.NET 的文本字段中，如何将字符串与变量、方法调用或数据库条目连接起来？

例如：

```
Text="<some string> + MethodCall()"
Text="<some string> + variable" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:35:05.953

要将字符串与转发器中的数据库条目连接：

```
Text='<%# "Entry: " +  ((<class name storing database values>)Container.DataItem).Entry%>'> 
```

要将字符串与中继器外部的数据库条目连接起来：

```
Text='<%# "Entry: " +  <class name storing database values>.<Get Entry Name Method>%>'> 
```

将字符串与方法连接：

```
Text='<%# "Entry: " +  <method name>%>'> 
```

该方法应返回一个字符串。

# iphone - NSNotification 调用，但标签不会更新

> ID：11142701
> 
> 赞同：0
> 
> 时间：2012-06-21T16:35:19.550
> 
> 标签：iphone, ios, xcode, ios5

我有以下用`NSNotification`中心调用的代码，我知道它被调用是因为数组出现在 中`NSLog`，但我的标签`chipCount`没有用新值更新。从数组中提取字符串时，是否有我应用错误的方法？

```
-(NSString *) dataFilePath {
    NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [path objectAtIndex:0];
    return [documentDirectory stringByAppendingPathComponent:@"Chips.plist"];
}

-(void)readPlist {
    [self dataFilePath];
    NSString *filePath = [self dataFilePath];
    if([[NSFileManager defaultManager] fileExistsAtPath:filePath]) {
        chipArray = [[NSArray alloc] initWithContentsOfFile:filePath];
        NSLog(@"%@\n", chipArray);
        NSLog(@"%@\n", filePath);

        NSString *chipcountString = [chipArray objectAtIndex:0];
        chipsFloat = [chipcountString intValue];
        chipCount.text = [NSString stringWithFormat:@"%i", chipsFloat];
        //[arrayForPlist release];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:29:31.517

我认为这是一个多线程问题。更新 UI 必须在主线程中。也许 在另一个线程`readPlist`中执行。

试试下面的代码，也许它可以帮助你：

```
[self performSelectorOnMainThread:@selector(theProcess:) withObject:nil waitUntilDone:YES]; 

- (void) theProcess:(id)sender
{

    ....

    chipCount.text = [NSString stringWithFormat:@"%i", chipsFloat];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T20:24:07.830

假设chipcount是UILabel ..您是否需要告诉它刷新标签？

```
[chipcount setNeedsDisplay]; 
```

只是一个想法。

# c# - 发送 XML 时 AspNet WebApi POST 参数为空

> ID：11142702
> 
> 赞同：25
> 
> 时间：2012-06-21T16:35:22.897
> 
> 标签：c#, asp.net-web-api

我有一个 web api 服务，最初使用 beta 位，我使用发布候选位重建了它，现在我遇到了这个问题。

我有一个将复杂选项作为唯一参数的 POST 操作。当我以 json 格式发送带有正文的请求时，对象按预期反序列化，但如果我发送 XML，则参数为空。

在测试版中，我通过禁用模型绑定来解决这个问题，如 Carlos Figueira 的博客文章[Disabling model binding on ASP.NET Web APIs Beta中所述](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/27/disabling-model-binding-on-asp-net-web-apis-beta.aspx)

然而，在 RC 中，他们删除了此方法正在实施的 IRequestContentReadPolicy。

我的行动：

```
public List<Models.Payload> Post([FromBody]Models.AimiRequest requestValues)
{
  try
  {
    if (requestValues == null)
    {
      var errorResponse = new HttpResponseMessage();
      errorResponse.StatusCode = HttpStatusCode.NotFound;
      errorResponse.Content = new StringContent("parameter 'request' is null");
      throw new HttpResponseException(errorResponse);
    }
    var metadataParams = new List<KeyValuePair<string, string>>();
    foreach (Models.MetadataQueryParameter param in requestValues.Metadata)
    {
      metadataParams.Add(new KeyValuePair<string, string>(param.Name, param.Value));
    }
    List<Core.Data.Payload> data = _payloadService.FindPayloads(metadataParams, requestValues.ContentType, requestValues.RuleTypes);
    var retVal = AutoMapper.Mapper.Map<List<Core.Data.Payload>, List<Models.Payload>>(data);
    return retVal; // new HttpResponseMessage<List<Models.Payload>>(retVal);
  }
  catch (System.Exception ex)
  {
    _logger.RaiseError(ex);
    throw;
  }
} 
```

我的模型：

```
public class AimiRequest
{
  public MetadataQueryParameter[] Metadata { get; set; }
  public string ContentType { get; set; }
  public string RuleTypes { get; set; }
}

public class MetadataQueryParameter
{
  public string Name { get; set; }
  public string Value { get; set; }
} 
```

我正在测试使用 Fiddler 向服务发送请求。

这工作并返回我预期的结果。

```
POST http://localhost:51657/api/search HTTP/1.1
User-Agent: Fiddler
Content-Type: application/json; charset=utf-8
Accept: application/json
Host: localhost:51657
Content-Length: 219

{
  "ContentType":null,
  "RuleTypes":null,
  "Metadata":[
    {
    "Name":"ClientName",
    "Value":"Client One"
    },
    {
    "Name":"ClientName",
    "Value":"Client Two"
    }
  ]
} 
```

这失败了，因为 requestValues 参数为空

```
POST http://localhost:51657/api/search HTTP/1.1
User-Agent: Fiddler
Content-Type: application/xml; charset=utf-8
Accept: application/xml
Host: localhost:51657
Content-Length: 213

<AimiRequest>
  <ContentType />
  <RuleTypes />
  <Metadata>
    <MetadataQueryParameter>
      <Name>ClientName</Name>
      <Value>Client One</Value>
    </MetadataQueryParameter>
    <MetadataQueryParameter>
      <Name>ClientName</Name>
      <Value>Client Two</Value>
    </MetadataQueryParameter>
  </Metadata>
</AimiRequest> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-27T17:38:36.440

通过将以下行添加到 Global.asax.cs 中的 ApplicationStart() 方法，您的原始 XML 请求应该可以工作：

```
var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
xml.UseXmlSerializer = true; 
```

默认情况下，Web API 使用 DataContractSerializer 类，这需要 XML 请求中的额外信息。

XmlSerializer 对我来说似乎工作得更顺利，因为我不必将模型的名称空间添加到每个 XML 请求中。

再一次，我在 Mike Wasson 的文章中找到了我的信息：[http ://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#xml_media_type_formatter](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#xml_media_type_formatter)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T15:31:48.313

我遇到了和你一样的问题，并通过使用 XmlMediaTypeFormatter 序列化对象找到了解决方案，如下所述：[http ://www.asp.net/web-api/overview/formats-and-model-binding/json-和-xml-serialization#testing_object_serialization](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#testing_object_serialization)。我使用了文章底部“测试对象序列化”部分的代码，并将他的 Person 对象替换为我的模型。

当我序列化我的对象时，我注意到以下属性被添加到根节点：

```
xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://schemas.datacontract.org/2004/07/NAMESPACE.OF.YOUR.MODEL" 
```

如果你像这样将这些属性添加到你的 xml 中，你的控制器应该正确地序列化 requestValues 对象：

```
<AimiRequest xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns="http://schemas.datacontract.org/2004/07/NAMESPACE.OF.YOUR.MODEL">
  <ContentType />
  <RuleTypes />
  <Metadata>
    <MetadataQueryParameter>
      <Name>ClientName</Name>
      <Value>Client One</Value>
    </MetadataQueryParameter>
    <MetadataQueryParameter>
      <Name>ClientName</Name>
      <Value>Client Two</Value>
    </MetadataQueryParameter>
  </Metadata>
</AimiRequest> 
```

# vb.net - vb.net程序调试错误

> ID：11142703
> 
> 赞同：-1
> 
> 时间：2012-06-21T16:35:26.427
> 
> 标签：vb.net, visual-studio-2010, debugging

我正在尝试创建一个新库 (.dll) 以在我的 SSIS 项目中使用。我之前没有任何创建此类项目的经验。所以请多多包涵。

当我尝试调试程序时，它会引发以下错误 ![在此处输入图像描述](../Images/2c7e84ab960ef4973666ab6a4a086474.png)

调试以下代码的最佳方法是什么。我知道这可能是错误的，但我正在努力学习这一点。

```
Imports Microsoft.SqlServer.Dts.Runtime
Imports Microsoft.SqlServer.Server
Imports System.IO
Imports System
Imports System.Net

'Imports Microsoft.SqlServer.Dts.Runtime
'Imports System.Net.NetworkInformation
'Imports System.Text.RegularExpressions
'Imports System.IO
'Imports System.Net.Mail
'Imports System.Net

Public Class Logging
    Inherits LogProviderBase

End Class 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:38:56.103

您不能只按 F5 并运行 dll 库。它只能在另一个应用程序中使用。您可以构建项目，它会告诉您是否有任何明显的错误。

大多数人都有一个测试应用程序，在那里练习类库应用程序，让他们知道是否有任何问题。

类似问题：[“不能直接启动输出类型为类库的项目”](https://stackoverflow.com/questions/3363106/c-a-project-with-an-output-type-of-class-library-cannot-be-started-directly)

# java - Hibernate 是否必须驱动数据库设计？

> ID：11142706
> 
> 赞同：6
> 
> 时间：2012-06-21T16:35:36.603
> 
> 标签：java, hibernate

我昨天一整天都在阅读有关 Hibernate 的各种文章/教程，尽管我对它的强大感到*震惊*，但我对它有一个主要关注点。

似乎标准做法是*允许 Hibernate 为您设计/生成您的 DB 模式*，这是一个令我窒息的新的和可怕的概念。从我阅读的教程中，您只需将一个新实体添加到您的`hibernate.cfg.xml`配置文件中，使用 注释任何您想要的 POJO `@Entity`，然后瞧——Hibernate 会为您创建表。虽然这很酷，但它让我想知道一些场景：

*   如果你已经有一个 DB 模式并且 Hibernate 想要为你生成的那个不符合它怎么办？如果您有一个疯狂的 DBA 拒绝在预定义的（非 Hibernate）模式上让步怎么办？
*   如果您有包含数万条记录的引用表（就像世界上所有的城市一样）怎么办？您是否必须实例化`save()`数以万计的唯一 POJO，或者是否有办法配置 Hibernate，以便它尊重而不覆盖表中已经存在的数据？
*   如果你想对你的模式/表进行性能调优怎么办？这包括索引、规范化，超出 Hibernate 自动创建的内容？
*   如果您想向表中添加约束或触发器怎么办？索引？

我想这的根源如下：

**看起来 Hibernate 在您的数据库上创建并强制执行特定的模式/配置。我想知道这个议程将如何与我们的平台标准、我们的 DBA 理念以及我们对与 Hibernate 交互的表进行优化/调整的能力相冲突。**

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T16:38:23.760

我认为您将过多的力量归因于休眠。

Hibernate 确实有一个可能会影响数据库实现的习语。

Hibernate 不会*为*您生成模式，除非您要求它这样做。可以从现有模式开始并使用 Hibernate 将其映射到 Java 对象。但如果模式与 Hibernate 要求冲突，它可能是不可能的或最佳的。

如果 DBA 不让步——他们不应该让步——或者 Hibernate 不能适应你，那么你就有了答案：你不能使用 Hibernate。

您的 DBA 可能会同意，但您的应用程序可能会发现 Hibernate 为您生成的动态 SQL 不是您想要的。

幸运的是，这不是镇上唯一的游戏。

我不认为实现必须是全部或全部。如果使用简单的 JDBC 访问引用数据，有什么危害？

数据库设计考虑应该独立于 Hibernate。约束、触发器、规范化和索引应该由业务需求驱动，而不是您的中间件选择。

如果您没有实体对象模型，或者架构无法容纳它，那么您应该重新考虑 Hibernate。有直接的 JDBC、存储过程、Spring JDBC 和 iBatis 作为替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:39:20.427

Hibernate 提供了一种将对象映射到表的默认方式——就像几个工具/库一样，为了简单起见，它倾向于约定而不是配置。

但是，如果您想以不同的方式将实体映射到数据库表，您可以显式告诉 Hibernate 这些是如何映射的（从简单的属性，例如更改表名，到重新定义相关实体之间的外键关系以及如何持久化） ）。

如果您正确地执行此操作，则不需要实例化和保存现有数据，因为这将毫无意义 - 数据库*已经*以 Hibernate 理解的形式包含有关实体的信息。（考虑一下 - 加载然后立即保存实体应该始终是无操作的，因此可以完全跳过。）

所以你的问题的简短回答是“不”。如果你不关心设计表，你可以让 Hibernate 采用一个合理的默认值。如果你确实想明确地设计你的模式，你可以这样做，然后向 Hibernate 描述那个确切的模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T16:45:56.997

作为长期在企业从事java和hibernate工作的人，我见过很少有项目使用这种能力。你会看到一些构建工具和其他东西可以做到这一点，但对于真正的企业应用程序，我从未见过。

大多数 DBA 不会让应用程序用户创建表。他们依靠特权用户来做这些事情，并且应用程序连接的用户将拥有数据的 r/w privs，而不是架构本身。

因此，您自己编写 SQL，并执行休眠映射以匹配。这并不意味着您的对象设计不会影响您的 SQL，但您仍应始终预先创建模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T16:38:15.900

不可以。您可以使用[休眠工具](http://www.hibernate.org/subprojects/tools.html)从现有数据库生成实体。

使用 Hibernate 有两种方法。如果你有优秀的 DBA 或数据库设计师，那么最好先设计好数据库，然后将其映射到 hibernate。另一方面，如果您没有 DBA 并且有优秀的开发人员，那么让 Hibernate 为您生成数据库。

Hibernate 背后的概念是映射数据库和对象。所以它被称为ORM（对象关系映射）工具。[在这里](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)
阅读对象关系阻抗。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T16:40:08.360

这是快速原型或简单教程的首选方式，但远非任何生产应用程序的首选方式。我更喜欢独立设计数据库，使用脚本生成架构、表、视图、索引等，并将架构映射到实体。

只要映射找到数据库中的表和列，一切都很好。

一旦您的数据库中有数据并且架构必须更改，您无论如何都必须编写迁移脚本。您不能只是放弃所有内容并从头开始。这些教程是为从 Hibernate 开始的开发人员编写的，他们必须尽快发现 Hibernate，而无需处理复杂的 SQL 脚本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T16:42:22.910

*   如果您已经有数据库架构怎么办...

我不知道你从哪里得到这样的印象。Hibernate 可以使用现有的模式。它非常灵活。

*   如果您有参考表怎么办...

使关系 LAZY，它不会自动加载。只有更改的对象将被保存。

*   如果你想进行性能调优怎么办......

只是不要使用生成的模式。这只是一个起点。您可以根据需要进行自定义。

*   如果您想向表中添加约束或触发器怎么办？索引？

有的如上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T16:42:34.537

您可以将休眠与现有的数据库模式一起使用。您可以使用各种注释映射到现有的表和列，例如：

@Table(name = "dbschema.dbTable") - 应该放在你的类文件之前以映射它 @Column(name = "colName") - 映射一个列

只需确保使用此选项配置休眠：hibernate.hbm2ddl.auto=update

如果您将其设置为创建，它将创建架构，因此在您的情况下不要这样做。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-21T16:46:57.263

适当时使用hibernate/jpa。设计应用程序时的一种常见做法是提取草稿并在需要（索引等）后手动更改它。但是，如果您将数据库布局从休眠方式更改为执行操作，这对您来说将是一件痛苦的事情。JPA 的许多优点将丢失。对于需要大量性能调整和完全控制的任务 - 只需使用 reguar jdbc。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-21T18:58:29.777

一些答案：
A. 可以添加索引注释：[见表](http://docs.jboss.org/hibernate/annotations/3.4/api/org/hibernate/annotations/Table.html)注释。

B. 如果您有参考表，您可以选择延迟获取或急切获取（即 - 如果您的表代表一个人和他的书 - 是否加载一个没有书的人，或者加载他的书）

C. Hibernate 可以用于处理现有模式。使用该模式可能并不简单，但正如其他人所说，您应该仅根据业务需求设计 db，而不是根据框架约定

D。我想鼓励您也阅读 hibernate 在“幕后”所做的事情" - 它使用了大量的代理，这会损害性能，您必须清楚地了解会话的范围，以及一级和二级缓存的用法

. E. 遵循我在 D 节中所写的内容 - 使用触发器将导致您的数据库在休眠时“在后台”发生变化。考虑更新记录将在某个归档表中创建（使用触发器）条目的情况，并且假设该表也通过休眠进行注释
- 您的休眠缓存将不知道发生在应用程序范围之外的更改。

F. 声明我并不反对 Hibernate 对我来说很重要，但你不应该将它用于所有解决方案，这是我过去犯的一个错误。我现在使用 Spring-JDBC，我很高兴（对于我们的应用程序需要，很难使用 Hibernate，我假设我们只会在需要支持多个 DB 风格的情况下考虑这一点）。

# sinatra - 载波 sinatra 模型 ID 作为存储目录

> ID：11142716
> 
> 赞同：0
> 
> 时间：2012-06-21T16:36:24.560
> 
> 标签：sinatra, carrierwave

我将如何使用 sinatra 创建 rails 可以为载波提供的以下场景：

```
def store_dir
  "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
end 
```

...能够将头像存储在使用模型 ID 命名的目录下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:50:31.797

应该检查维基：

[https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Make-a-fast-lookup-able-storage-directory-structure](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Make-a-fast-lookup-able-storage-directory-structure)

# android - textMultiLine 和 textLongMessage 的区别

> ID：11142724
> 
> 赞同：7
> 
> 时间：2012-06-21T16:36:37.843
> 
> 标签：android, android-edittext

¿ 在什么情况下我必须使用它们中的哪一个？

在谷歌文档中说：

**textMultiLine** 可以与文本及其变体组合以允许在字段中使用多行文本。如果未设置此标志，则文本字段将被限制为单行。

**textLongMessage**作为长消息内容的文本。

但我希望使用一个多行且包含长消息内容的*EditText 。*

[inputType 谷歌文档](https://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:40:19.250

您可以使用多个标签，例如

```
android:inputType="textMultiLine|textLongMessage" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-12T17:25:30.433

也许这会有所帮助：[https ://stackoverflow.com/a/29220766/5923973](https://stackoverflow.com/a/29220766/5923973)

基于该答案并尝试不同的选择，我可以说：

**textMultiLine**：将使您可以从键盘为文本添加换行符。

**textLongMessage**：将使 TextInputEditText 根据其内容更改其高度。因此，如果文本到达编辑文本的末尾，则以下单词将在下方使编辑文本增加高度。

# javascript - Javascript - 在点击的链接下方打开弹出 div

> ID：11142725
> 
> 赞同：1
> 
> 时间：2012-06-21T16:36:41.417
> 
> 标签：javascript, jquery, css

抱歉标题不清楚，我无法制定更好的简洁解释。

我有一个列表，每个列表项中都有一个链接，该链接`<div>`使用以下 jQuery 打开一个隐藏的 othersiwse：

```
$('a.showreranks').click(function () {
        $('body').append('<div class="overlay"></div>');
        $('#rerank_details').slideToggle(300);
        return false;
      }); 
```

`rerank_details`是 div 的 id 并且`showreranks`是所有链接的类。

这是 div 的 CSS：

```
#rerank_details {
display: none;
background: white;
position: absolute;
border: 1px solid black;
border-radius: 6px;
width: 305px;
padding: 15px;
overflow: hidden;
top: 50%;
left: 50%;
height: 200x;
text-shadow: none;
z-index: 50;
} 
```

所以，你看，打开的 div 在打开时是居中的。然后它会填充与单击的列表项相关的信息，但您无需担心。我需要以下帮助 - 我不希望 div 居中在屏幕上。相反，我希望它位于被点击链接的正下方。请注意，页面上可能有很多链接，一个在另一个之下，垂直距离可能不规则。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T17:21:03.353

我认为这就是你想要做的：http: [//jsfiddle.net/SO_AMK/r7ZDm/](http://jsfiddle.net/SO_AMK/r7ZDm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T17:45:21.313

答案已经被接受，但也许[这是一个更干净的版本](http://jsfiddle.net/jrmiller84/qW8eY/)。动画都是固定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T17:15:33.587

如果它不必在 DOM 的正常流程中，只需使用绝对定位和事件对象。

```
function(event){
  var box = //get a handle to box
  box.style.position = 'aboslute';
  box.style.left = event.page.x; 
  box.style.top = event.page.y;
} 
```

# python - 使用机械化和 Python 提交表单

> ID：11142727
> 
> 赞同：1
> 
> 时间：2012-06-21T16:36:47.547
> 
> 标签：python, screen-scraping, mechanize, www-mechanize

我正在尝试废弃一个需要提交两种表单的网站：第一个用于登录，第二个用于指定我的研究。我正在使用 Python 和 mechanize 包。

第一个没问题，但我只是不知道如何通过第二个。

这是我与上述公司相关的代码部分

```
agemin=18
agemax=25
by='region'
country='France'
region=2
newcustomers=1

browser.select_form(nr=0)
browser['age[min]']=agemin
browser['age[max]']=agemax
browser['country']=country
browser['region']=region
browser['by']=by
browser['new-customers']=newcustomers

response=browser.submit()
content=response.read() 
```

但是当我通过示例提交变量'age [min]'时，我收到以下错误消息：

```
TypeError: object of type 'int' has no len() 
```

给你一些更多的信息，这是我得到的'print br.form'

```
<POST http://www.adopteunmec.com/qsearch/ajax_quick application/x-www-form-urlencoded
  <SelectControl(age[min]=[, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, *30, 31,         32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54,   55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99])>
  <SelectControl(age[max]=[, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, *45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99])>
  <SelectControl(by=[*region, distance])>
  <SelectControl(country=[*fr, be, ch, ca])>
  <SelectControl(region=[*1, 2, 3, 4, 5, 6, 7, 8, 22, 23, 9, 10, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 11])>
  <SelectControl(distance[min]=[*, 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 270, 280, 290, 300, 310, 320, 330, 340, 350, 360, 370, 380, 390, 400, 410, 420, 430, 440, 450, 460, 470, 480, 490, 500, 510, 520, 530, 540, 550, 560, 570, 580, 590, 600, 610, 620, 630, 640, 650, 660, 670, 680, 690, 700, 710, 720, 730, 740, 750, 760, 770, 780, 790, 800, 810, 820, 830, 840, 850, 860, 870, 880, 890, 900, 910, 920, 930, 940, 950, 960, 970, 980, 990, 1000])>
  <SelectControl(distance[max]=[, 0, 10, 20, 30, 40, 50, 60, 70, *80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 270, 280, 290, 300, 310, 320, 330, 340, 350, 360, 370, 380, 390, 400, 410, 420, 430, 440, 450, 460, 470, 480, 490, 500, 510, 520, 530, 540, 550, 560, 570, 580, 590, 600, 610, 620, 630, 640, 650, 660, 670, 680, 690, 700, 710, 720, 730, 740, 750, 760, 770, 780, 790, 800, 810, 820, 830, 840, 850, 860, 870, 880, 890, 900, 910, 920, 930, 940, 950, 960, 970, 980, 990, 1000])>
  <CheckboxControl(new=[*1])>> 
```

我的猜测是表单需要一个包含所有变量的对象（如列表）来接受它；这就是它拒绝一一提交的变量的原因。

预先感谢您的任何帮助 ！

亚历克西斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:35:59.620

`agemin`应该是一个字符串，或强制转换为字符串

此外，表单选择控件的值的设置器需要一个列表。

所以，要么

```
agemin="25" 
```

和

```
browser['age[min]']=[agemin] 
```

要不就

```
agemin=25           #as you did
browser['age[min]']=[str(agemin)] 
```

# c# - 用于选择文本的正则表达式

> ID：11142728
> 
> 赞同：0
> 
> 时间：2012-06-21T16:36:48.370
> 
> 标签：c#, regex, string, text, quotes

我需要选择带有双引号的文本，并且双引号的数量必须可以被 2 或零整除。示例输入：

```
Starting
blahaapvi "Starting + Ending"
asfg "Ending"
Ending 
```

我现在有这个：`Starting(.*)Ending` ......但我不想匹配引号中的文本。任何人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:40:48.697

试试这个找到一个有平衡双引号的文本

```
^Starting([^"]*"(?<txt>[^"]*)"[^"]*)*Ending$ 
```

这是解释

`^Starting` 文本开头的模式。

`[^"]*`         任意数量的字符，不包括双引号。

`"(?<txt>[^"]*)"` 在名为“txt”的捕获中捕获的双引号中包含的文本。

`[^"]*`         同样是任意数量的字符，不包括双引号。

`(...)*`       任意数量的文本重复，可能包含双引号中的文本。

`Ending$`     文本结尾处的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:58:39.530

尝试这个

（编辑以允许文本中的新行）

```
static void Main(string[] args) {

  string l_input1 = "match \"text\" with \r\n even \"quotes\"";
  string l_input2 = "unmatch \"text\" with \r\n uneven quotes\"";

  string l_pattern = @"^(?>([^""]*?((?<QUOTE>"")[^""]*(?<-QUOTE>"")?))*)$(?(QUOTE)(?!))";

  bool l_isMatch1 = Regex.IsMatch( l_input1, l_pattern );
  bool l_isMatch2 = Regex.IsMatch( l_input2, l_pattern );

  Console.WriteLine( l_isMatch1 );
  Console.WriteLine( l_isMatch2 );

  Console.ReadKey( true );

} 
```

解释：

```
^(?>([^"]*?((?<QUOTE>")[^"]*(?<-QUOTE>")?))*)$(?(QUOTE)(?!)) 
```

这将尝试从输入的开头 (^) 到结尾 ($) 进行匹配，以防止它忽略最后一个奇数双引号之后的文本。

基本思想是在 1 匹配和 0 匹配之间切换 QUOTE 命名组堆栈。因此，正则表达式将从匹配 0 个或多个非双引号字符 ([^"]*?) 开始。如果找到双引号，则将其添加到命名组（名为“QUOTE”）堆栈并继续匹配 0或更多非双引号字符。如果找到第二个双引号，则删除添加到“QUOTE”堆栈的最后一个匹配项（因此堆栈将包含 0 个匹配项），然后重复回到开头。

在字符串的末尾，有一个条件分组。条件是，如果已将 1 个或多个匹配项添加到命名组“QUOTES”，则执行零长度负前瞻（这将始终导致正则表达式失败）。这将确保，如果没有找到第二个引号（从而清除“QUOTES”堆栈），那么整个正则表达式都会失败。

编辑：

如果您确实想捕获引用的文本，请使用：

```
static void Main(string[] args) {

  string l_input1 = "match \"text\" with \r\n even \"quotes\"";
  string l_input2 = "unmatch \"text\" with \r\n uneven quotes\"";

  string l_pattern = @"^(?>([^""]*?(?<QUOTED_TEXT>(?<QUOTE>"")[^""]*(?<-QUOTE>"")?))*)$(?(QUOTE)(?!))";

  Match l_match1 = Regex.Match( l_input1, l_pattern );
  Match l_match2 = Regex.Match( l_input2, l_pattern );

  Console.WriteLine( l_match1.Success );
  foreach ( Capture l_quotedText in l_match1.Groups["QUOTED_TEXT"].Captures ) {
    Console.WriteLine( l_quotedText.Value );
  }

  Console.WriteLine( l_match2.Success );

  Console.ReadKey( true );

} 
```

}

# javascript - .submit 只触发一次

> ID：11142733
> 
> 赞同：0
> 
> 时间：2012-06-21T16:36:54.023
> 
> 标签：javascript, jquery, submit, innerhtml

我正在尝试创建一个更新另一个值的函数，并且最初（在第一次提交后它正常工作，我知道这一点，因为我有一个弹出数据的警报。但是，随后会发生一些奇怪的事情。首先是 innerHTML它应该更新的内容几乎立即消失。第二个函数（以及似乎所有的 JavaScript）不再运行。我不知道它为什么会这样。有人有什么建议吗？

提前感谢所有帮助！

```
<script type="text/javascript">
    var INIT_PLANNED_HRS = 5;
    var values = {};
    $(document).ready(function () {
        $('#addCourse').submit(function () {
            var $inputs = $('#addCourse :input');
            $inputs.each(function () {
                values[this.name] = $(this).val();
            });
            INIT_PLANNED_HRS += Number(values['hours']);
            document.getElementById('hrs_planned').innerHTML = 'HOURS =    ' + INIT_PLANNED_HRS + ' GPA = ';
            alert("values[this.name] =  " + values['hours'] + " INIT_PLANNED_HRS    " + INIT_PLANNED_HRS); 
        });
        document.getElementById('hrs_planned').innerHTML = 'HOURS =    ' + INIT_PLANNED_HRS + ' GPA';
    });
</script>

<li><h3>Planned Courses</h3><p id = "hrs_planned"> gpa </p></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:40:40.567

您在*设置*处理程序`hrs_planned`后立即更新元素，而不是在调用它时。检查您的 JS 控制台是否有错误，如果您的脚本中出现致命错误，它可能不再运行。*`onsubmit`*

# c++ - Boost序列化基类

> ID：11142738
> 
> 赞同：2
> 
> 时间：2012-06-21T16:37:06.833
> 
> 标签：c++, boost, boost-serialization

使用 Boost 的序列化库时，可以调用基类的序列化

```
ar & boost::serialization::base_object<> (*this); 
```

根据文档。不过，我想知道如果没有这个是否安全（我的意思是你可以选择*不*序列化基类中的数据吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T16:28:25.987

您可以选择不序列化基类中的数据，但是在基类中序列化的任何成员变量都不会被记录和恢复。

如果您只想序列化正在使用的特定具体类，并且手动归档重建类实例所需的所有变量，这可能没问题。

但你为什么想要？它通常表明继承结构有问题......

# html - “喜欢”按钮未表现出预期行为

> ID：11142739
> 
> 赞同：0
> 
> 时间：2012-06-21T16:37:08.437
> 
> 标签：html, facebook-like

短版：在有测试用户的测试应用中，新实现的“Like”按钮不会变成灰色，并且可以立即再次点击。我是否错误地使用了“Like”按钮以使其表现出这种行为？

我已经在我参与设计的 Facebook 应用程序上实现了 Facebook 的“Like”按钮，当按钮在那里时，可点击，并报告测试用户 喜欢该应用程序，按钮不会变成灰色并且是可点击的再次。现在应用程序本身目前处于沙盒模式，我们正在测试应用程序，只测试用户。“Like”按钮的 og 标记和 iframe 代码包含在画布页面的 html 中。og标签读作：

```
<meta property="og:title" content="GameName Dev" />
<meta property="og:type" content="game" />
<meta property="og:url" content="https://apps.facebook.com/gamenamedev/" />
<meta property="og:image" content="https://image.on/server.jpg" />
<meta property="og:site_name" content="GameName Dev" />
<meta property="fb:app_id" content="MY_APP_ID" /> 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:44:06.133

如果应用程序处于沙盒模式，则 Facebook 的爬虫无法访问该 URL，因为它在注销的上下文中运行，并且由于应用程序“不可见”而无法正常工作 - 将应用程序从沙盒中取出，通过[Facebook 的调试工具](https://developers.facebook.com/tools/debug)清除缓存并提取元标记，应该没问题

顺便说一句，我真的不明白您为什么要在应用程序的画布 URL 上点赞按钮，您将无法联系到喜欢该 URL 的任何人，您也无法获得有关它们的统计信息 - 肯定会创建一个页面该应用程序会更好吗？

# c# - 我的 sql server 上的时间格式

> ID：11142740
> 
> 赞同：0
> 
> 时间：2012-06-21T16:37:08.733
> 
> 标签：c#, sql-server

我的 c# 程序从数据库中选择一个日期时间字段并返回如下数据：

```
21/06/2012 4:11:48 p.m. 
```

它不是以这种方式存储的（它的存储时间类似于 2012/06/21 15:19:10:000）。我的语言环境设置为英语/新西兰

但是当我尝试将其保存回数据库时

`ISDATE()`sql 函数不喜欢这种格式，只返回 NULL 。我有任何选项可以在 sql 或 c# 中设置时间格式吗？在 sql 或 c# 中是什么让它放“pm”？（而不仅仅是“PM”，顺便说一句）

**总结问题**

[查看最新的相关链接](https://stackoverflow.com/q/11144907/139698)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:42:56.207

您根本不应该将它作为文本保存在数据库中 - 您应该使用相关的数据类型，例如`DATETIME`，并`DateTime`使用 SQL 参数将值从 .NET 传递到数据库。如果您使用正确的数据类型，则该值实际上根本不会*存储*为“2012/06/21 15:19:10:000”。这可能是您在 SQL Server Studio 或类似的东西中看到它的方式，但这并不意味着它是原始存储格式。

从逻辑上讲，日期/时间的格式不超过数字十是“10”（十进制）与“A”（十六进制）。尽可能避免字符串转换，你的生活会更轻松。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:50:33.373

注意：请参阅 Jon 关于在数据库中正确保存 DateTime 而不是字符串的回复。

对于 C# 字符串格式：

DateTime 对象可以使用 .ToString() 函数以不同的格式输出。

请查看以下链接

*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)
*   [DateTime.ToString 方法](http://msdn.microsoft.com/en-us/library/k494fzbf.aspx)

因此，例如：

```
DateTime.Now.ToString("dd/MM/yyyy h:mm:ss"); 
```

这将以您在问题中的格式输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T16:44:37.913

我认为您的问题与 sql 中的 Set language 设置有关。

类似于这个问题：[SQL Server ISDATE() 函数 - 有人可以解释一下吗？](https://stackoverflow.com/questions/10331817/sql-server-isdate-function-can-someone-explain-this)

您可以尝试设置您的 sql 语言以匹配您的格式吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T16:52:06.173

大多数 SQL 日期时间格式应该可以被 C# 识别`DateTime.Parse(youSQLDatetimeVariable)`。我觉得你的情况有点奇怪。

就像其他人说的那样，您确实不应该这样做，但这里是如何将 DateTime 转换为各种格式的方法：

```
SELECT Convert(VARCHAR, MyDateTimeField, 112) from MyTable 
```

该数字 (112) 表示将显示为 Varchar 的 DateTime 格式所有格式都可以在这里找到详细信息： http: [//anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in -sql-server-2005/](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

或者在你的 C# 代码中

```
YourDatetimeVariable.ToString("MM-dd-yyyy") 
```

或者在那些引号中您想要的任何格式，其中 MM- 月数，dd - 天数，yyyy - 年。

# html - 如何在边框上放置文本？

> ID：11142748
> 
> 赞同：4
> 
> 时间：2012-06-21T16:37:42.660
> 
> 标签：html, css

我能够让它在白色背景下工作：

![在此处输入图像描述](../Images/bb93dc13f715c38f2e831053d010a273.png)

但是在背景不是白色的情况下，解决方案也不起作用：

![在此处输入图像描述](../Images/7eed1b01688c617edc0021e402317d1a.png)

应该很明显我做了什么为什么它不起作用（负边距+背景设置为背景颜色）。有什么解决方案可以让它总是看起来不错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:07:28.147

一种方法是使用 spacer spans 和一个包装器（在这种情况下`header`），所有元素都带有`display`set ，因此它们显示为`table-cell`s （[示例](http://jsfiddle.net/Q8yGu/1/)）。

## HTML

```
<header>
    <span class="spacer"></span><!-- Place this wherever you want the border -->
    <h1>Title</h1>
    <!-- Spacing is automatically added next to elements (but not on ends) -->
    <span class="spacer"></span>
    <a href="http://www.example.com/">View Blog</a>
</header> 
```

## CSS

```
header {
    display:table-row;
    line-height:1.5em;
    font-size:2em;
    white-space:nowrap; /* Prevent titles from wrapping when more than one word is used */
}
header h1 {
    font-size:inherit; /* Change font-size in header */
    overflow:hidden;
    display:table-cell;
    vertical-align:middle;
}
header span.spacer { /* Makes spacers stretch */
    display:table-cell;
    width:50%;
}
header span.spacer { /* Adds spacing on both sides of spacers */
    padding:0 10px;
}
header span.spacer:first-child { /* Adds spacing only on right side of first spacer */
    padding:0 10px 0 0;
}
header span.spacer:last-child { /* Adds spacing only on left side of last spacer */
    padding:0 0 0 10px;
}
header span.spacer:after { /* Adds border to spacer */
    display:inline-block;
    width:100%;
    content:".";
    font-size:0;
    color:transparent;
    height:2px;
    background:#000;
    vertical-align:middle;
    position:relative;
    top:-1px;
}
header > a { /* Styles links according to example */
    font-size:.4em;
    vertical-align:middle;
    background:#25a2a4;
    color:#fff;
    text-transform:uppercase;
    font-family:monospace;
    border-radius:.5em;
    padding:.3em .5em;
    text-decoration:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:09:28.787

您是否将文本和按钮放在背景设置为白色的 div 中？如果不显示 CSS，就很难知道你在做什么。

如果您使用带背景的 div，为什么不直接删除它呢？或者如果有一些限制，为什么不将背景设置为 rgba(#,#,#,0.0)？

```
background:rgba(255,255,255,0.0); 
```

alpha 属性有助于设置不透明度级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-28T21:03:36.983

您可以使用`<fieldset>`标签来完成此操作。

示例：[https ://jsbin.com/tovuwimezu/edit?html,css,output](https://jsbin.com/tovuwimezu/edit?html,css,output)

**HTML**

```
<form>
    <fieldset>
        <legend class="blogLegend">New Blog Post</legend>

        blog details here
    </fieldset>
</form> 
```

**CSS**

```
.blogLegend {
    font-weight: 600;
    color: rgb(63, 169, 196);
    padding: 10px;
    text-align: center;
} 
```

# python - 在 Python 中填充字典的更惯用的方法

> ID：11142752
> 
> 赞同：2
> 
> 时间：2012-06-21T16:37:54.973
> 
> 标签：python, dictionary, idioms

目前，我正在尝试用 Python 填充字典，但我认为我正在做的事情有点多余。是否有更 Pythonic 的方式来执行以下操作：

```
if not pattern_file_map.get(which_match):
    pattern_file_map[which_match] = [line]
else:
    pattern_file_map[which_match].append(line) 
```

`pattern_file_map`字典在哪里。

我知道在检查字典中是否有键时有一定的习惯用法，比如 [这个问题](https://stackoverflow.com/questions/4512557/python-if-key-in-dict-vs-try-except)，但我只想用一个列表填充这个字典。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T16:39:26.927

你可以使用

```
pattern_file_map.setdefault(which_match, []).append(line) 
```

反而。

其他人可能会建议使用 a`collections.defaultdict(list)`而不是，这是另一种选择，但请注意，这可能会隐藏错误，因为它会默默地创建您访问的所有密钥。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T16:42:52.667

您可以尝试使用[collections.defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:50:01.167

由于您要添加可能存在的值：

```
pattern_file_map.setdefault(which_match, []).append(line) 
```

如果使用`dict.get()`：

```
li = pattern_file_map.get(which_match, [])
li.append(line)
pattern_file_map[which_match] = li 
```

当然，这两种情况都仅限于您的 dict 的值是列表的情况。

# php - 从页面url获取参数

> ID：11142753
> 
> 赞同：1
> 
> 时间：2012-06-21T16:37:58.693
> 
> 标签：php, javascript, url, parameters

所以，这里是主要代码，它检查当前页面的 URL 中的字符串*?a=*然后将变量*ee_roomname*设置为之后的任何值。

```
<script type="text/javascript">
    var ee_roomname = unescape(location.href.substring(location.href.lastIndexOf("?a=")+1))
    if(ee_roomname.indexOf("?") != -1) ee_roomname = "";
</script> 
```

但是，如果我想添加更多变量，也许在这个值之后。例如。这是一个可能的网址：

> [http://abc.de/fg.html?a=hijk](http://abc.de/fg.html?a=hijk)

因此，变量*ee_roomname*将设置为*hijk*
现在如果我们添加更多标签，它将如下所示：

> [http://abc.de/fg.html?a=hijk&b=lmno&c=pqrs](http://abc.de/fg.html?a=hijk&b=lmno&c=pqrs)

现在*ee_roomname*将设置为*hijk&b=lmno&c=pqrs*，这不是我想要的。
我希望代码仅从URL 跟踪变量/参数的值*。*

为了让它发挥作用，需要改变什么，以及如何改变？
也许提供一个我也可以使用的代码。*（不太喜欢“做这个做这个”之类的）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T16:45:33.287

这是一个检索url参数的函数

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

如何在 javascript 中检索 url 参数

```
var first = getUrlVars()["id"];
var second = getUrlVars()["page"];

alert(first);
alert(second); 
```

[查看源代码](http://papermashup.com/read-url-get-variables-withjavascript/)

**对于您的奖励：**如果您在“？”处拆分字符串 并采取前半部分，这将为您提供“纯”绝对网址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:53:50.570

要回答第一个问题，您还可以尝试：

```
<script> 
  var query = window.location.search.substring(1);
  var getv = query.split("&");
  var pair = new Array();
  for (var i=0; i < getv.length; i++) {
    pair[i] = getv[i].split("=");
  }
</script> 
```

pair 是一个包含所有 get 变量和值的数组，例如： [["h", "1"], ["g", "2"]] if ?h=1&g=2

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T16:56:29.330

尝试使用[JavaScript 中的 URL Parsing library](http://www.joezimjs.com/javascript/the-lazy-mans-url-parsing/)解析整个 url 。

# ruby-on-rails - 如何显示子值的差异

> ID：11142762
> 
> 赞同：0
> 
> 时间：2012-06-21T16:38:17.247
> 
> 标签：ruby-on-rails

我是 Rails 新手，在开发我的第一个应用程序时遇到了很多困难。我有一个带有下表（简化）的 rails 3.2.2 应用程序：

```
Vehicle (has_many :checklists)
number:string
license_plate:string

Checklist (belongs_to :vehicle)
vehicle_id:integer
mileage:integer 
```

我需要显示一个表格，列出两个给定日期之间的每辆车和里程差异，如下所示：

```
From: 2012/05/01
To:2012/06/01
Vehicle number    License plate    Mileage difference
000001            LIH576           453
000002            KUL763           158
000003            OSF473           631 
```

我不知道如何得出里程差值。任何帮助将不胜感激。

谢谢！科里克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:54:12.530

好吧，您可以减去里程数`from`和`to`日期。

```
c1 = Checklist.where(:vehicle_id => 1, :check_date => FROM_DATE)
c2 = Checklist.where(:vehicle_id => 1, :check_date => TO_DATE)

difference = c2.mileage - c1.mileage 
```

假设`to`日期是最近的。

# google-chrome-extension - 无法读取属性“onConnet”

> ID：11142771
> 
> 赞同：0
> 
> 时间：2012-06-21T16:38:47.460
> 
> 标签：google-chrome-extension

我正在尝试按照此处的文档将我的后台脚本中的变量传递给我的内容脚本。

[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

显现：

```
{
  "name": "name",
  "description": "desc",
  "version": "1.0",
  "manifest_version": 2,
  "content_scripts": [
    {
      "matches": [ "http://*/*", "https://*/*" ],
      "js": ["content.js"]
    }
  ],
  "background": {
    "scripts": ["background.js"]
  },
  "permissions": [
    "tabs",
    "http://*/*",
    "https://*/*"
      ],
  "options_page": "options.html",
  "browser_action":
  {
    "default_icon": "icon.png",
    "default_title": "Settings",
    "default_popup": "settingspanel.html"
   }
 } 
```

背景.js 文件：

```
chrome.extension.onConnect.addListener(function(port) {
  port.onMessage.addListener(function(msg) {
    port.postMessage({counter: msg.counter+1});
  });
}); 
```

内容.js

```
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    sendResponse({counter: request.counter+1});
  }); 
```

我在后台脚本上收到一条错误消息，显示“无法读取未定义的属性 'onConnect'”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:27:46.447

可能您的问题是[Issue #131623: Reloading extension while developer tools are open 会破坏 chrome object 和 js console](http://code.google.com/p/chromium/issues/detail?id=131623)。

在修复通过之前，您必须在重新加载扩展之前关闭开发人员工具。

# c++ - __FUNCTION__ 和朋友在 Xcode 中的行为很奇怪

> ID：11142779
> 
> 赞同：3
> 
> 时间：2012-06-21T16:39:07.493
> 
> 标签：c++, xcode, function, clang, c-preprocessor

这有效

```
printf("%s body\n",__PRETTY_FUNCTION__); 
```

但这不会（错误`Expected ')'`）：

```
printf(__PRETTY_FUNCTION__" body\n"); 
```

我无法让 IDE 向我展示`__PRETTY_FUNCTION__`评估的内容以确定它为什么不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T16:43:50.250

[`__PRETTY_FUNCTION__`不是宏](http://gcc.gnu.org/onlinedocs/gcc/Function-Names.html)。它的行为类似于在该函数中动态创建的静态变量。

上面链接中的最后一段内容如下：

> 这些标识符不是预处理器宏。在 GCC 3.3 及更早版本中，仅在 C 中，`__FUNCTION__`并被`__PRETTY_FUNCTION__`视为字符串文字；它们可用于初始化 char 数组，并且可以与其他字符串文字连接。GCC 3.4 及更高版本将它们视为变量，例如`__func__`. 在 C++ 中，`__FUNCTION__`一直`__PRETTY_FUNCTION__`都是变量。

# wpf - 保护 ClickOnce 文件，以便只有我的用户可以访问它？

> ID：11142786
> 
> 赞同：0
> 
> 时间：2012-06-21T16:39:22.513
> 
> 标签：wpf, wpf-controls, clickonce, wpftoolkit, lan

我正在尝试将我的 WPF 应用程序部署到我们公司网络之外的一些用户。在我们的 LAN 上一切正常，但是当我打开安全性时，我无法让更新正常工作，因为从未提示用户输入他们的登录详细信息？

有谁知道保护我的 ClickOnce 文件以便只有我的用户可以访问它的方法？我不能在没有安全的情况下安装这个软件。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:30:33.953

在内部，您可以限制对网络服务器上文件的访问。在外部，您可以轻松做到的事情并不多。

我们通过让客户在运行应用程序时登录来处理此问题，并根据后端服务（在 Azure 上运行）验证他们的凭据。因此，除非他们可以登录，否则他们无法运行它。

如果您不想这样做，我将与您分享[这篇文章](http://msdn.microsoft.com/en-us/library/ff699325.aspx)。它展示了如何通过拦截对 Web 服务器的请求并做出响应来从 SQL Server 数据库中提供 ClickOnce 文件。如果您在 Web 应用程序方面比我更聪明（请注意，这不是一个高标准），也许您可​​以弄清楚如何在那时拦截并要求提供身份验证凭据。

这[是来自 CodeProject 的一篇文章](http://www.codeproject.com/KB/web-security/ClickOnceFormsAuth.aspx?display=Print)，他们在其中展示了您正在尝试做的事情的一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:10:04.473

没有办法保护您的文件，因为 ClickOnce 运行时将盲目地返回其部署点，并且永远不会保留用户的原始凭据。我听说过使用各种技术解决这个问题的方法，但它的工作量相当大。

这可能有用[www.clickoncerevolution.com](http://www.clickoncerevolution.com)。

您也可以始终考虑使用 MSI 安装程序，但您不会获得自动更新。

马蒂

# vbscript - Response.Write 和 MsgBox 的区别和优势

> ID：11142787
> 
> 赞同：2
> 
> 时间：2012-06-21T16:39:24.820
> 
> 标签：vbscript

我一直在尝试建立一个实现 VBscript 的网站，我发现这两种方法在页面上显示文本的比例几乎是 50/50。

```
Response.Write("Hello World")
MsgBox("Hello World") 
```

我发现 MSgBox 显示一个 MessageBox 并在用户单击按钮时返回一个值。w3schools 网站给出了该解释。

Response.Write 似乎只是有如何使用它的示例，没有真正的解释。这是否等同于 System.out.println(); 我熟悉Java？

这两者有什么区别，各自的优势是什么？这些中的任何一个都可以用作另一个页面的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:57:51.597

正如您所说，Msgbox 只是向用户显示提示，尽管它仅在某些类型的 msg 提示上返回一个值，例如 Yes/No。

Response.Write 用于将信息直接打印到页面上。

由于两者都用于不同的目的，我不会真正比较它们，因为它们会比另一个提供优势，使用最适合该目的的。

至于链接的使用，它们本身都无法执行此操作，尽管您可以使用 Response.Write 将超链接地址打印到页面上。

# html - 内联图像（在包装器内）之间的两个 BR 标记导致 Firefox 与其他所有浏览器的间距差异。在 JSfiddle 中完成的示例

> ID：11142788
> 
> 赞同：0
> 
> 时间：2012-06-21T16:39:25.557
> 
> 标签：html, css, browser

JS 小提琴链接[http://jsfiddle.net/Xfvpu/1/](http://jsfiddle.net/Xfvpu/1/)

好的，所以我有一个带有 xhtml doctype 的文档，并且我使用了正确的 br / 标签，但是由于某种原因，两个图像之间的差距在 Firefox 中的呈现方式与其他浏览器不同。

该页面可在[http://www.safaviehhome.com/Rugs/Area-Rugs.html找到](http://www.safaviehhome.com/Rugs/Area-Rugs.html)

不幸的是，CSS 都混在一起了，所以我不能明确地发布它，但是这两个图像在一个 DIV 包装器中，并且图像本身不在单独的 div 中。它们都有图像映射，两个图像宽度之间的大小仅相差 20px 左右。

在这两个图像之间是两个 br / 标签，我尝试在 Firebug 中摆弄，但无法弄清楚..在我弄清楚之前我不会高兴..这让我很生气！:)

其他浏览器和 Firefox 之间的差异大约是 10px 差异 .. Firefox 增加了额外的间距 .. 我没有特别寻求任何帮助，只是想看看是否有一些我不知道的渲染问题，所以我可以提出这个问题休息一下。

查看其他浏览器与 Firefox 以了解我的意思.. 我真的很感激一些帮助，我需要以我自己的知识来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:49:56.543

您不能依赖使用`<br/>`垂直间距。您需要使用样式，例如

```
<div style="margin-top:5px">image goes here</div> 
```

甚至：

```
<img style="margin-top:5px" src="yourimg.jpg" /> 
```

根据我的经验，如果您使用这种方法，浏览器就足够一致了。

*编辑添加：*

**但是**（我不能强调这一点）：浏览器*永远不会*完全一致。假设 100% 一致性是可能的设计将会**失败**。（如果这看起来很苛刻，请尝试仅使用智能手机的浏览器度过一天。呸。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:57:10.453

虽然我不知道 Firefox 这样做的确切原因，但我可以提供一个建议。根据我使用 br 标签进行布局的经验，呃，这不是最明智的想法，因为您很容易失去对它创建的确切间距的控制。就像在这种情况下，Firefox 似乎将两个 br 标签解释为两行，而至少 Opera 将第一个标签作为映射后的换行符，而第二个标签创建了这个空白空间。

您没有要求解决方法，但我无法抗拒：[看看 br-less Alternative](http://jsfiddle.net/Xfvpu/8/)。

# jquery - 有多个 TD 和 onmouseover 和 onmouseout 改变 bg 颜色

> ID：11142791
> 
> 赞同：0
> 
> 时间：2012-06-21T16:39:30.377
> 
> 标签：jquery, hover

```
<table border=0 cellPadding=5 cellSpacing=0 width=100%>
            <tr>
                <td colSpan=5 align=center><a href="index.html" title="Home"><img src="theImages/logoAlone.png" /></a></td>
            </tr>
            <tr>
                <td colSpan=5 height=15></td>
            </tr>
            <tr>
                <td width=18% class=fdBBorder id=type1><A href="findDoctors.html">Find A Doctor</a></td>
                <td width=18% class=fdBBorder id=type2><A href="patSvc.html">Patient Services</a></td>
                <td width=18% class=fdBBorder id=type3><A href="mapNDir.html">Maps & Directions</a></td>
                <td width=18% class=fdBBorder id=type4><A href="trainProgs.html">Training Programs</a></td>
                <td width=18% class=fdBBorder id=type5><A href="aboutUs.html">About Us</a></td>
            </tr>
            <tr>
                <td align=left valign=top id=type11>
                    <div class=mainP><img src="theImages/greenArrow.png" align=absmiddle /> <A href="findDoctors.html">Doctor's List</a></div>
                    <div class=mainP><img src="theImages/greenArrow.png" align=absmiddle /> <A href="findDoctors.html">Staff Highlight</a></div>
                </td>
            </tr>
            <tr>
                <td align=left valign=top id=type22>
                    <div class=mainP><img src="theImages/greenArrow.png" align=absmiddle /> <A href="findDoctors.html">Doctor's List</a></div>
                    <div class=mainP><img src="theImages/greenArrow.png" align=absmiddle /> <A href="findDoctors.html">Staff Highlight</a></div>
                </td>
            </tr>
        </table> 
```

我的问题是，如果我将鼠标悬停在 Find a Doctor 上，我希望 TD 更改 bgColor 以及 TD id type22 的 bgColor，当您将鼠标悬停在 type1 上时，几乎会更改多个 TD 背景颜色？我如何为此创建一个jquery？我有这个，但这改变了加载颜色：

```
$(document).ready(function(){
    $("#type1").css("background-color", "red");
    $("#type11").css("background-color", "red");
}); 
```

但我希望它处于悬停状态。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:46:03.033

```
$('tr:eq(2) td[id^=type]').hover(function() {
    var id = this.id.replace(/type/, ''),
        targetId = id.concat(id);
    $('#type' + targetId).andSelf().css('background', 'red');
}, function() {
    var id = this.id.replace(/type/, ''),
        targetId = id.concat(id);
    $('#type' + targetId).andSelf().css('background', 'transparent');
})​; 
```

**[演示](http://jsfiddle.net/2yMt2/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:47:12.750

请看[这个类似的问题](https://stackoverflow.com/questions/1775068/hover-using-jquery)。您的解决方案将类似于：

```
$(document).ready(function(){
   $("#type1").mouseover(function(){
      $("#type1").css("background-color", "red");
      $("#type22").css("background-color", "red");
   }).mouseout(function(){
      $("#type1").css("background-color", "");
      $("#type22").css("background-color", "");
    });
});​ 
```

看看这个[演示](http://jsfiddle.net/MqUyx/)

**更新** 既然您问我如何使用两个不同的 id 来执行相同的鼠标悬停功能。您将需要它作为外部函数。就像是：

```
 $("#type1").mouseover(function(){highlight()});
  $("#type22").mouseover(function(){highlight()});
  function highlight() {
      $("#type1").css("background-color", "red");
      $("#type22").css("background-color", "red");
  } 
```

在此处查看[演示](http://jsfiddle.net/u6jrW/)

# plone - Plone 4：collective.formcriteria 卸载现在无法导入站点

> ID：11142793
> 
> 赞同：1
> 
> 时间：2012-06-21T16:39:39.837
> 
> 标签：plone, python-import, buildout

我在站点上安装了collective.formcriteria，然后将其从Buildout中卸载并删除。

当我导出我的网站时它工作正常，但尝试导入该网站会给我这个错误：

```
Traceback (innermost last):

    Module ZPublisher.Publish, line 127, in publish
    Module ZPublisher.mapply, line 77, in mapply
    Module ZPublisher.Publish, line 47, in call_object
    Module OFS.ObjectManager, line 628, in manage_importObject
    Module OFS.ObjectManager, line 646, in _importObjectFromFile
    Module ZODB.ExportImport, line 92, in importFile
    Module transaction._transaction, line 253, in savepoint
    Module transaction._transaction, line 250, in savepoint
    Module transaction._transaction, line 647, in __init__
    Module ZODB.Connection, line 1128, in savepoint
    Module ZODB.Connection, line 570, in _commit
    Module ZODB.ExportImport, line 175, in _importDuringCommit

ImportError: No module named formcriteria.criteria.relativepath 
```

会再次安装此插件并尝试导入/导出我的网站工作还是有其他修复？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:18:58.423

在导入期间，ZODB 必须重新映射转储的 pickle 中的持久 id，为此它必须“加载”导出文件中的所有条目。

因此，在重新映射过程中，它将尝试导入每个引用的类。您的导出仍然包含对`collective.formcriteria`类的引用，这就是您在导入期间收到错误的原因。

你可以做两件事：

1.  安装`collective.formcriteria`到您的构建中，只是为了让这个导入工作。不需要运行安装代码或任何东西，Zope 进程只需要能够在导入过程中导入类。之后您可以再次删除它。

2.  用空存根填充缺失的导入。这涉及更多，因为您需要创建一个虚拟模块，您将插入该模块`sys.modules`以为此过程加载。

    虚拟模块可能如下所示；我将其命名为“placeholder.py”：

    ```
    from persistent import Persistent

    class PlaceHolderClass(Peristent):
        def __repr__(self):
            return "<Persistent placeholder class for now-removed instances>" 
    ```

    你用以下方法剔除丢失的导入：

    ```
    import sys
    import placeholder

    sys.modules['collective.formcriteria.criteria.relativepath'] = placeholder

    placeholder.FormRelativePathCriterion = placeholder.PlaceHolderClass 
    ```

    [`collective.formcriteria`根据包布局](https://svn.plone.org/svn/collective/collective.formcriteria/trunk/src/collective/formcriteria/)，您很可能需要存根更多此类类。

    使用此技术不会删除损坏的引用；它只会让您将`.zexp`文件导入新实例。

# php - 我可以使用 php 将变量从一个 html 页面传递到另一个 html 页面吗？

> ID：11142797
> 
> 赞同：1
> 
> 时间：2012-06-21T16:40:00.190
> 
> 标签：php, html, variables

以下代码不起作用：

第 1 页的代码：

```
 <form action="phpTutorial.html" method="post">
    Name: <input type="text" name="fname" />
    Age: <input type="text" name="age" />
    <input type="submit" />
</form> 
```

第 2 页的代码：

```
 <br />
    Welcome <?php echo $_Post["fname"]; ?>!<br ?>
    You are <?php echo $_Post["age"]; ?> years old.
    <br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:41:52.920

尝试：

```
echo $_POST["fname"] 
```

内置变量（有更好的名称吗？）都以大写字母引用，PHP 变量名称区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:42:45.503

表单中的操作应该是`action="phpTutorial.php"`而不是`action="phpTutorial.html"`并且`phpTutorial.php`应该有

```
<br />
Welcome <?php echo $_POST["fname"]; ?>!<br ?>
You are <?php echo $_POST["age"]; ?> years old.
<br /> 
```

当您提交表单时，它将在您提供的 from 的 action 属性中启动文件，在这种情况下，您提供 php 文件的名称，它应该是`phpTutorial.php`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T17:00:21.993

由于您在代码中使用 PHP，因此文件名应为**phpTutorial.php**而不是 phpTutorial.html。正确的表单操作名称

并且 phpTutorial.php 应该有以下代码：

```
<br />
Welcome <?php echo $_Post["fname"]; ?>!<br ?>
You are <?php echo $_Post["age"]; ?> years old.
<br /> 
```

**$_Post**应替换为**$_POST**。

# java - MongoDB 与 Java，无法获取 Collection

> ID：11142807
> 
> 赞同：0
> 
> 时间：2012-06-21T16:40:24.710
> 
> 标签：java, exception, mongodb

我正在使用 MongoDB 开始一个项目。我有我的数据库：

```
mongo=null;
    try {
        mongo = new Mongo();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MongoException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    db = mongo.getDB( "mydb" );
    System.out.print(db.getName());//just a test 
```

我想显示特定集合的所有元素（在 scrollPane 中，但这对问题并不重要）。该集合最初不存在，因为数据库“mydb”为空。这是我的代码：

```
 DBCursor cur = db.getCollection("newcollection").find();//collection should be created at this point, if it doesnt exist.

        while(cur.hasNext()) { //<----exception caused here
            //do something with cursor...
        } 
```

即使最初集合是空的，在进一步使用应用程序元素时也会添加，所以我需要从应用程序启动时开始搜索它以填充我的 scrollPane。

这是堆栈跟踪：

```
 java.io.IOException: couldn't connect to [/127.0.0.1:27017] bc:java.net.ConnectException:     Connection refused: connect
at com.mongodb.DBPort._open(DBPort.java:222)
    at com.mongodb.DBPort.go(DBPort.java:111)
at com.mongodb.DBPort.call(DBPort.java:78)
at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:217)
at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:313)
at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:298)
at com.mongodb.DBCursor._check(DBCursor.java:369)
at com.mongodb.DBCursor._hasNext(DBCursor.java:492)
at com.mongodb.DBCursor.hasNext(DBCursor.java:517)
at MainFrame$MyPanel.<init>(MainFrame.java:120)//<----cur.hasNext() 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:54:18.527

My feeling here is that you DB is not running at all. Could you try to connect to the DB from command line using "mongo" and validate it is up and running?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:49:24.760

您可以在打印之前检查该集合是否存在

```
db.collectionExists("coll_name") 
```

如果不是，你可以创建它，或者确保一些索引 - 它会自动创建它我通常在 spring 启动时执行这样的操作（例如 @PostConstruct ）

# c# - 如何从带有参数的 lambda 表达式创建委托？

> ID：11142811
> 
> 赞同：2
> 
> 时间：2012-06-21T16:40:33.493
> 
> 标签：c#, reflection, delegates, lambda, relaycommand

我正在尝试使用动态参数创建 RelayCommand 的实例：

```
public class RelayCommand<T> : ICommand
{
    #region Declarations

    private readonly Predicate<T> _canExecute;
    private readonly Action<T> _execute;

    #endregion

    #region Constructors

    /// <summary>
    /// Initializes a new instance of the <see cref="RelayCommand&lt;T&gt;"/> class and the command can always be executed.
    /// </summary>
    /// <param name="execute">The execution logic.</param>
    public RelayCommand(Action<T> execute)
        : this(execute, null)
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="RelayCommand&lt;T&gt;"/> class.
    /// </summary>
    /// <param name="execute">The execution logic.</param>
    /// <param name="canExecute">The execution status logic.</param>
    public RelayCommand(Action<T> execute, Predicate<T> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");
        _execute = execute;
        _canExecute = canExecute;
    } 
```

我有一个具有多种方法的 ViewModel，现在我只列出：

```
public void MyMethod(object parameter);
public bool CanMyMethod(object parameter); 
```

我想将它们动态连接到 RelayCommand 的实例，如下所示：

```
ICommand command = new RelayCommand<ViewModel>((x)=>myviewmodel.MyMethod(myparameter),(x)=> myviewmodel.CanExecuteMyMethod(myparameter)); 
```

上一行有效，但是，我的方法名称是在运行时传入的，所以我需要动态地实现相同的目标。

**编辑：只是一些澄清：**在我的场景中，我不能直接按名称引用我的方法。我将用于创建 RelayCommand 的方法名称将作为字符串传递。

**解决方案：**

这是我使用@ZafarYousafi 建议的最终解决方案。请注意我如何为 RelayCommand 以及 Action 和 Predicate 使用通用的“对象”类型，因为这是我的方法参数（对象 myparameter）的类型：

```
object myparameter = //Some value gets assigned here.
                Delegate td1 = null, td2 = null;
                MethodInfo method1 = myviewmodel.GetType().GetMethod("MyMethodNameAsString");

                if (tmethod1 != null)
                    td1 = Delegate.CreateDelegate(typeof(Action<object>), myviewmodel, method1);

                MethodInfo tmethod = viewmodel.GetType().GetMethod("Can" + "MyMethodNameAsString");
                if (method2 != null)
                    d2 = Delegate.CreateDelegate(typeof(Predicate<object>), myviewmodel, method2);

                if (d1 != null && d2 != null)
                {
                    item.Command = new RelayCommand<object>(obj => ((Action<object>) td1)(myparameter), obj => ((Predicate<object>)td2)(myparameter));
                } 
```

这应该相当于：

```
item.Command = new RelayCommand<object>(param=>myviewmodel.MyMethod(myparameter),param=>myviewmodel.CanMyMethod(myparameter)); 
```

**重要提示：**正如@DanC 所指出的，由 Josh Smith 创建的 RelayCommand 类不打算在创建时接收参数。在架构良好的 MVVM 解决方案中，RelayCommand 参数将通过 CommandParameter 属性的 XAML 绑定传递。因此，如果您将 button.Command 绑定到 RelayCommand，您还需要绑定 button.CommandParameter，如下所述[：MVVM RelayCommand with parameters](http://www.dominikschmidt.net/2010/12/net-c-mvvm-relaycommand-with-parameters/)

**旧不成功的尝试：** 这是我到目前为止所拥有的：

```
 Delegate d1 = null, d2 = null;
                MethodInfo method1 = myviewmodel.GetType().GetMethod("MyMethodNameAsString");
                if (method1 != null)
                    d1 = Delegate.CreateDelegate(typeof(Action<ViewModel>), myviewmodel, method1);

                MethodInfo method2 = myviewmodel.GetType().GetMethod("Can" + "MyMethodNameAsString");
                if (method2 != null)
                    d2 = Delegate.CreateDelegate(typeof(Predicate<ViewModel>), myviewmodel, method2);

                if (d1 != null && d2 != null)
                {
                    item.Command = new RelayCommand<ViewModel>((Action<ViewModel>)d1, (Predicate<ViewModel>)d2);
                } 
```

运行良好，没有编译或运行时错误，但是我不知道如何通过 RelayComand 构造函数参数传递我的参数。

任何建议将不胜感激，

谢谢

与我[之前的问题有关](https://stackoverflow.com/questions/11127377/how-to-create-instance-of-relaycommand-at-runtime-through-dynamic-reflection)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:57:56.850

根据Josh Smith在[MVVM 文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)中发布的代码。您将使用 lambda 变量 param 来传递参数。在您的示例中，您根本没有使用“x”lambda 变量。这个变量应该是你 Execute 和 CanExecute 方法的参数。

```
RelayCommand _saveCommand;
public ICommand SaveCommand
{
    get
    {
        if (_saveCommand == null)
        {
            _saveCommand = new RelayCommand(param => this.Save(),
                param => this.CanSave );
        }
        return _saveCommand;
    }
} 
```

假设命令是在 ViewModel 中创建的，那么您将按如下方式对其进行初始化。

```
ICommand command = new RelayCommand<MyParameterType>((myparameter)=>this.MyMethod(myparameter),(myparameter)=> this.CanExecuteMyMethod(myparameter)); 
```

由于您无法使用 Lamba 来构造命令，因此您的代码如下所示。

```
Delegate d1 = null, d2 = null;
            MethodInfo method1 = myviewmodel.GetType().GetMethod("MyMethodNameAsString");
            if (method1 != null)
                d1 = Delegate.CreateDelegate(typeof(Action<YourParameterType>), myviewmodel, method1);

            MethodInfo method2 = myviewmodel.GetType().GetMethod("Can" + "MyMethodNameAsString");
            if (method2 != null)
                d2 = Delegate.CreateDelegate(typeof(Predicate<YourParameterType>), myviewmodel, method2);

            if (d1 != null && d2 != null)
            {
                item.Command = new RelayCommand<YourParameterType>((Action<YourParameterType>)d1, (Predicate<YourParameterType>)d2);
            } 
```

现在，在将命令分配给 MenuItem 对象（在本例中为 ICommandSource）之后，它将使用 CommandParameter 调用您的两个委托 (d1,d2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:01:17.833

看来，在`RelayCommand`构造实例的站点上，您已经拥有了从实例的方法传递委托所需的一切`myviemodel`。

```
item.command = new RelayCommand<ViewModel>(
    myviemodel.MyMethod, myviewmodel.CanExecuteMyMethod) 
```

您所描述的场景可能是一项工作，`Delegate.DynamicInvoke`但我认为您的代码段中不需要...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T16:56:51.890

只需在 RelayCommand 类上定义一个方法来执行如下命令：

```
public void Execute(T model)
    {
        if(_canExecute(model))
            _execute(model);
    } 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-21T16:59:38.353

你已经输入了委托，现在你可以完全自由地传递参数`((Action<ViewModel>)d1)(yourparameter)`

# r - wilcoxon p 值为 0

> ID：11142814
> 
> 赞同：0
> 
> 时间：2012-06-21T16:40:40.823
> 
> 标签：r

我正在尝试使用 wilcoxon 测试来比较两个向量，即使它们之间使用如下所示的 summary() 有明显的区别，我得到了一个我不知道如何解释的值 0，它没有如果准确与否，请更改任何内容。

你能否告诉我更多关于它的信息，以及我是否在某处有偏见以及如何纠正它？

谢谢，下面是我的代码。

```
> wilcox.test(F$V14,B1$V14,alternative="g",exact=F)$p.value
Error in exact && !TIES : invalid 'x' type in 'x && y'
> wilcox.test(F$V14,B1$V14,alternative="g")$p.value
[1] 0
> summary(F$V14)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    7.0    64.0   108.0   131.4   169.0   452.0 
> summary(B1$V14)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.000   3.000   7.000   9.781  14.000  61.000 
> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:37:21.853

如果您不知道如何解释 0 p 值，那么您需要参加介绍性统计课程和/或阅读介绍性文本。

基本上 p 值是对原假设和数据之间一致性的度量，较大的值（最大值为 1）表示数据与原假设合理一致，较小的值（接近 0）表示数据和零假设彼此不一致。

p 值为 0 表示您的数据与 2 个样本来自同一总体的原假设不一致（或者当 A 是随机值时 $A>B$ 的概率为 $0.5$ 的限制性较小的假设来自第一个群体，B 是来自第二个群体的随机值）。摘要清楚地表明数据与空值不一致，p值只是形式化了这一点。

# .net-2.0 - 什么 VS2010 安装项目支持 Windows 2000？

> ID：11142818
> 
> 赞同：1
> 
> 时间：2012-06-21T16:40:50.883
> 
> 标签：.net-2.0, windows-installer, windows-2000

由 VS2010 安装/安装项目创建的 msi 文件不会安装在 Windows 2000 上。人们会看到类似以下的消息：“找不到程序入口点 GetNativeSystemInfo” 我可以使用 VS2008 安装项目来解决这个问题。这个问题有什么VS2010解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:44:32.027

[Advanced Installer](http://www.advancedinstaller.com)可以创建一个在 Win2K 上运行的设置，它也有一个免费版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:52:03.097

使用 InstallShield LE，它集成到 VS 中并且是免费的。

# sql-server - 当我将包迁移到另一台服务器时，SSIS 包中的某些任务失败

> ID：11142827
> 
> 赞同：1
> 
> 时间：2012-06-21T16:41:22.957
> 
> 标签：sql-server, ssis

抱歉，我是 SSIS 开发的新手。我给这个问题的标题不太合适——请看下面。

我在本地服务器的 C 驱动器中有一个 SSIS 包，团队中的每个人都可以访问它。如果我使用我的 windows 用户名和密码登录，我可以执行 SSIS 包中的“执行 SQL 任务”，并且它成功完成。该软件包包含 3 个“执行 sql 任务”，所有这些都运行正常。

当我的队友尝试使用他的用户名和密码执行包时，它显示一个错误，在 3 个“执行 SQL 任务”中，只有 1 个成功执行，另外 2 个错误如下：

> 执行 SQL 任务] 错误：执行查询“EXEC usp_ETL_GetRepairHistoryFacts”失败，出现以下错误：“语句已终止。”。可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。

我们无法理解的是我们使用的是相同的 SSIS 包，相同的数据库，唯一的区别是登录名。

有没有人对如何解决这个问题有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:47:44.180

您的 SQL Server 是否使用经过身份验证的 Windows 登录？听起来是这样的。

如果是这样，我会让你的队友登录到 SSMS（SQL Server Management Studio），启动一个新查询并运行“EXEC usp ...”语句。

您可能会看到一条错误消息。我的猜测是存储过程“usp_ETL ...”的权限问题听起来你有执行权限而他/她没有。

# memory-management - Fortran 数组内存管理

> ID：11142828
> 
> 赞同：8
> 
> 时间：2012-06-21T16:41:24.513
> 
> 标签：memory-management, fortran

我正在努力优化用 Fortran 编写的流体流动和传热分析程序。当我尝试运行越来越大的网格模拟时，我遇到了内存限制问题。不过，网格并不是那么大。运行典型的 CFD 代码只需 500,000 个单元和小花生。即使我为我的问题请求 80 GB 内存，它也会由于虚拟内存不足而崩溃。

我对哪些数组占用了所有内存有一些猜测。特别是分配给（28801,345600）。如果我的计算有误，请纠正我，但双精度数组是每个值 8 位。那么这个数组的大小是 28801*345600*8=79.6 GB？

现在，我认为这个数组的大部分最终在整个计算过程中都是零，所以我们不需要存储它们。我想我可以将解决方案算法更改为仅将非零值存储在一个更小的数组中。但是，我想确定我正在查看正确的数组以减小大小。那么首先，我是否正确计算了上面的数组大小？其次，有没有办法让 Fortran 在运行时以 MB 或 GB 为单位显示数组大小？除了打印出内存最密集的数组之外，我还想看看代码的内存需求在运行时是如何变化的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:04:16.003

在具有虚拟内存的系统上，内存使用是一个定义非常模糊的概念。您可以分配大量内存（大*虚拟内存大小*），但实际上只有一小部分被积极使用（小*驻留集大小*- RSS）。

Unix 系统提供`getrusage(2)`系统调用，它返回有关调用线程/进程/进程子进程正在使用的系统资源量的信息。特别是它提供了自进程启动以来所达到的 RSS 的最大值。您可以编写一个简单的 Fortran 可调用辅助 C 函数，该函数将调用`getrusage(2)`并返回结构`ru_maxrss`字段的值`rusage`。

如果您在 Linux 上运行并且不关心可移植性，那么您可能只是打开并从`/proc/self/status`. 这是一个简单的文本伪文件，其中包含几行有关进程虚拟内存使用情况的统计信息：

```
...
VmPeak:     9136 kB
VmSize:     7896 kB
VmLck:         0 kB
VmHWM:      7572 kB
VmRSS:      6316 kB
VmData:     5224 kB
VmStk:        88 kB
VmExe:       572 kB
VmLib:      1708 kB
VmPTE:        20 kB
... 
```

各个领域的解释 -[这里](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)。您最感兴趣的是`VmData`、`VmRSS`和。您可以使用以下命令作为常规文件打开`VmHWM``VmSize``/proc/self/status``OPEN()`打开并完全在 Fortran 代码中进行处理。

另请参阅使用`ulimit -a`和设置的内存限制`ulimit -aH`。您可能超出了硬虚拟内存大小限制。如果您通过分布式资源管理器（例如 SGE/OGE、Torque/PBS、LSF 等）提交作业，请检查您是否为作业请求了足够的内存。

# c# - 仍然需要帮助！'XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint)' 的最佳重载方法匹配有一些无效参数

> ID：11142830
> 
> 赞同：-2
> 
> 时间：2012-06-21T16:41:30.810
> 
> 标签：c#, byte, syntax-error, object-reference, invalid-argument

> **可能重复：**
> [“XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint)”的最佳重载方法匹配有一些无效参数](https://stackoverflow.com/questions/11145636/the-best-overloaded-method-match-for-xdevkit-ixboxdebugtarget-getmemoryuint-u)

不知道为什么这被否决，我只需要帮助。我已经为此苦苦挣扎了几个小时，我快完成了，如果你不喜欢这篇文章，请继续前进，不要投反对票，这样没人能看到它！

好的，我已经用谷歌搜索并永远阅读了这样的答案和问题，但是对于我遇到的这些问题中的任何一个，我都没有找到我能理解的解释，我希望这里有人可以提供帮助！

错误1：“XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint)”的最佳重载方法匹配有一些无效参数

基本代码：

```
XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint) 
```

我有什么**新**的：

```
 uint num1;
        uint num2;
        uint num4;

        num1 = Convert.ToUInt32(textBox2.Text);
        num2 = Convert.ToUInt32(textBox3.Text);
        num4 = Convert.ToUInt32(textBox5.Text);
        byte[] num3;
        num3 = BitConverter.GetBytes(Convert.ToInt32(textBox3.Text));

        IXboxManager xbm = new XboxManager();
        IXboxConsole xbc = xbm.OpenConsole("textBox1.Text"); //Or Console Name in "" 
        IXboxDebugTarget xdt = xbc.DebugTarget;
        xdt.ConnectAsDebugger("XeDevMemPatcher", XboxDebugConnectFlags.Force); // this isn't always needed 
        IXboxDebugTarget.GetMemory(num1, num2, num3[], out num4);

    } 
```

**使用此代码编辑当前错误**

1) 当前上下文中不存在名称“Encoding”

2) 'XDevkit.IXboxDebugTarget.GetMemory(uint, uint, byte[], out uint)' 的最佳重载方法匹配有一些无效的 2222arguments

3) 参数 3：无法从 'byte' 转换为 'byte[]'

好的，所以这显然非常令人困惑，因为我一个人做的任何事情或基于答案都行不通，所以我只想在这里发布整个源代码供大家查看，希望这会有所帮助：抱歉，我无法发布GUI，因为我没有足够的 REP，但希望这应该没问题：

使用系统；使用 System.Windows.Forms；

命名空间 XDevkit { 公共部分类 Form1 : Form { 公共 Form1() { InitializeComponent(); }

```
 private void button1_Click(object sender, EventArgs e)
    {
        IXboxManager xbm = new XboxManager();
        //IXboxConsole xbc = xbm.OpenConsole(xbm.DefaultConsole); // dev 
        IXboxConsole xbc = xbm.OpenConsole("textBox1.Text");
        IXboxDebugTarget xdt = xbc.DebugTarget;
        xdt.ConnectAsDebugger("XeDevMemPatcher", XboxDebugConnectFlags.Force);

    }

    private void button2_Click(object sender, EventArgs e)
    {
    uint num1 = Convert.ToUInt32(textBox2.Text);
    uint num2 = Convert.ToUInt32(textBox3.Text);
    byte[] num3 = Encoding.ASCII.GetBytes(textBox4.Text);
    uint num4 = Convert.ToUInt32(textBox5.Text);
    int num5 = Convert.ToInt32(textBox4.Text);

// ...

    if (num3.Length > 1) 
    {    
        IXboxManager xbm = new XboxManager();
        IXboxConsole xbc = xbm.OpenConsole("textBox1.Text");
        IXboxDebugTarget xdt = xbc.DebugTarget;
        xdt.ConnectAsDebugger("XeDevMemPatcher", XboxDebugConnectFlags.Force);
        IXboxDebugTarget.GetMemory(num1, num2, num3[1], out num4);
}

    private void button3_Click(object sender, EventArgs e)
    {
        string a;
        a = "textBox6.Text";

        IXboxManager xbm = new XboxManager();
        IXboxConsole xbc = xbm.OpenConsole(textBox1.Text);
        IXboxConsole.ScreenShot(a)

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:43:47.980

**错误 1:** `num3`类型为`byte`，没有索引器。

如果您将代码修改为以下内容，该示例可能会起作用：

```
 uint num1 = Convert.ToUInt32(textBox2.Text);
    uint num2 = Convert.ToUInt32(textBox3.Text);
    byte[] num3 = Encoding.ASCII.GetBytes(textBox4.Text);
    uint num4 = Convert.ToUInt32(textBox5.Text);
    int num5 = Convert.ToInt32(textBox4.Text);

    // ...

    if (num3.Length > 1) {    
        IXboxManager xbm = new XboxManager();
        IXboxConsole xbc = xbm.OpenConsole("textBox1.Text");
        IXboxDebugTarget xdt = xbc.DebugTarget;
        xdt.ConnectAsDebugger("XeDevMemPatcher", XboxDebugConnectFlags.Force);
        IXboxDebugTarget.GetMemory(num1, num2, num3[1], out num4);
    } 
```

**错误 2：** `IXboxConsole.ScreenShot`是实例方法而不是类（又名静态）方法。您必须先创建一个实例，然后才能调用实例方法：

```
IXboxManager xbm = new XboxManager();
IXboxConsole xbc = xbm.OpenConsole(textBox1.Text);
xbc.ScreenShot("screenshot"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:47:16.583

从错误消息中可以很清楚地看到。 `num3`不是字节数组，因此您无法使用数组索引访问它。`textbox3.Text`如果您想按需要访问它，则需要将任何内容转换为字节数组。您尚未向我们提供此信息。

编辑：

如果要将文本框中的值转换为字节数组，可以执行以下操作：

```
byte[] num3 = BitConvert.GetBytes(Convert.ToInt32(textBox3.Text)); 
```

然后您可以`num3[1]`根据需要访问（假设数组的长度至少为 1）。

# python - 缩短python中的命名空间

> ID：11142831
> 
> 赞同：2
> 
> 时间：2012-06-21T16:41:33.617
> 
> 标签：python, python-2.7

我想将我的命名空间从说 **sandbox.auto.tools**缩短到**sandbox.tools**。我该如何实现（自动是多余的）？我查看了其他消息，但并没有真正找到与我正在寻找的内容相似的内容。下面是我的目录结构。

```
sandbox\auto\tools\foo.py (contains a function display() as described below)
    def display():
        print "hello"

sandbox\test\bar.py 
    import sandbox.auto.tools as sandbox.tools (Error) 
```

我知道我可以做到以下几点。

```
 sandboox\test\bar.py 
    from sandbox.auto.tools import foo as tools
    tools.display() 
```

有什么建议/指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:57:16.607

允许您指定的确切语法（使用`sandbox.tools`而不是`sandbox_tools`）将需要在导入模块之前或之后更改模块。

便宜的方法：

```
import sandbox.auto.tools
sandbox.tools = sandbox.auto.tools 
```

永久方式（需要能够修改模块源）：

`sandbox/__init__.py`在源中创建或更改说：

```
import auto.tools as tools
__all__ = ['tools', ...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:25:32.530

我的一位同事指出，我们可以将以下行添加到 sandbox/ **init** .py，它应该可以解决这个特定问题。

**路径**.append('沙盒/自动')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:42:37.090

我终于找到了您的建议/帮助的解决方案。但是，我仍然不满意。

沙盒/**初始化**.py

```
import auto.tools as tools
__all__ = ['tools']

import sandbox.auto.tools.foo
sandbox.tools.foo = sandbox.auto.tools.foo 
```

sandbox/test/bar.py - 这似乎工作

```
import sandbox
print dir(sandbox)
foo = sandbox.tools.foo
foo.display() 
```

然而——我不能再说这样的话了

```
from sandbox.tools import foo
or
from sandbox.tools import foo as tools2 
```

看起来我能够处理引用，但我仍然不完全理解 python 中命名空间的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:56:01.663

如果您真的想`sandbox.tools`有空，请将其添加到`sandbox/__init__.py`：

```
from .auto import tools 
```

这将添加`tools`到`sandbox`包的命名空间中，您将能够执行此操作：

```
from sandbox import tools
tools.dispaly() 
```

或者，您要求的是：

```
import sandbox
sandbox.tools.display() 
```

# python - Python Seg Fault 对我来说毫无意义

> ID：11142838
> 
> 赞同：1
> 
> 时间：2012-06-21T16:42:06.973
> 
> 标签：python

我已经阅读了所有关于堆栈溢出和谷歌关于 python 的段错误的内容，我的情况还没有落入我迄今为止所读过的任何内容中。

基本上我已经编写了一个从外部客户端接受 HTTP 的 API。客户端将二进制文件发布到 API，我将在该 API 上运行一些进程并在之后存储。

我正在导入一个用 Python 编码的模块来进行实际的数据处理。

我通过 API 连接到机器，并且能够通过命令行解释器很好地执行这些进程。但是，当我尝试在我的 API 中执行该过程时，我得到一个分段错误。对我来说奇怪的部分是在命令行解释器中复制和粘贴的代码部分完全相同。Seg 错误发生在调用导入模块中的函数的地方。

---------------------这是终端解释器------------ ------------

```
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> postdata = open('binfile').read()
>>> postdata[0:10]
'MZ\x90\x00\x03\x00\x00\x00\x04\x00'
>>> import atklite
>>> metadata = atklite.FileAnalysis(data=postdata).return_analysis()
>>> metadata
{'sha1': '1f0c33a18a417bb09f85add08b2a675c1deda5ca', 'analyzetime': 'Thu Jun 21 12:03:23 2012', 'ftype': 'PE32 executable (GUI) Intel 80386, for MS Windows', 'ttime': 1340294603.405788, 'sha256': '287744fc9d7b4f509fc271cce0af873c2d53fd1aa678d96dfc9afa8d6d1ad7a0', 'ssdeep': '768:HA/gyc4PWUSrxWoG+RUlyesIkJAkV+xQHz3ClxEEAdK88uDC4wOVdfxCO/ysRXA9:g/gyc4PWUSrxWoG+RUlyesIkJAkV+xQc', 'md5': '000038fe4b46c210c37bdde767835007', 'size': 28672} 
```

--------------这是API崩溃的部分------------

```
def POST(self):
                a = web.ctx.env.get("HTTP_X_AUTH_TOKEN", None)
                creds = authenticator(a)
                x = web.input()
                b = x.values()
                written = open('binfile', 'wb')
                for char in b[0]:
                        written.write(char)
                written.close()
                postdata = open('binfile').read()
                print postdata[0:10]
                analysis = atklite.FileAnalysis(data=postdata)  #SEG FAULTS HERE!!!!
                metadata = analysis.return_analysis() 
```

---------------------------------------导入的模块功能-------------------- --------------

```
class FileAnalysis:
  results = {'analyzetime': time.ctime(),'ttime': time.time()}
  hash_libs = ('md5','sha1','sha256')
  if ERROR:
    sys.exit('This function requires dependencies that aren\'t satisfied')
  __ssd = ssdeep()
  __ms = magic.open(magic.MAGIC_NONE)
  __ms.load()
  def __init__(self, data=None, filename=None):
    if filename:
        return(self.analyze_file(filename))
    if data:
        return(self.analyze_data(data))
  def hash_data(self, data):
    for lib in self.hash_libs:
        hl = getattr(hashlib, lib)
        self.results[lib] = hl(data).hexdigest()
  def hash_file(self, filename):
    hlibs = {}
    size = 0
    for lib in self.hash_libs:
        hlibs[lib] = getattr(hashlib, lib)()
    for chunk in read_chunks(open(filename, 'rb')):
        # We do this here so we don't have to read twice
        size += len(chunk)
        for hl in hlibs:
            hlibs[hl].update(chunk)
    self.results['size'] = size
    for hl in hlibs:
        self.results[hl] = hlibs[hl].hexdigest()
  def analyze_data(self, data):
    if not data:
        return False
    self.hash_data(data)
    self.results['size'] = len(data)
    self.results['ftype'] = self.__ms.buffer(data)
    self.results['ssdeep'] = self.__ssd.hash_bytes(data)
  def analyze_file(self, filename):
    if not os.path.isfile(filename):
        raise IOError("File: %s doesn't exist" % filename)
    # Size is done inside the hash bytes function so we don't have to read multiple times
    self.hash_file(filename)
    self.results['ftype'] = self.__ms.file(filename)
    self.results['ssdeep'] = self.__ssd.hash_file(filename)
  def return_analysis(self):
    return (self.results)
  def dump(self):
    res = []
    for result in self.results:
        res.append("%s: %s" % (result, self.results[result]))
    return("\n".join(res)) 
```

使用邓肯的建议可以追溯到这个

```
> /home/spezzino/ProcessingCode/atklite.py(93)analyze_data()
-> self.results['ftype'] = self.__ms.buffer(data)
(Pdb) s
--Call--
> /usr/lib/python2.7/dist-packages/magic.py(126)buffer()
-> def buffer(self, buf):
(Pdb) s
> /usr/lib/python2.7/dist-packages/magic.py(132)buffer()
-> return _buffer(self._magic_t, buf, len(buf))
(Pdb) s
--Return--
> /usr/lib/python2.7/dist-packages/magic.py(132)buffer()->'PE32 executa...or MS Windows'
-> return _buffer(self._magic_t, buf, len(buf))
(Pdb) s
> /home/spezzino/ProcessingCode/atklite.py(94)analyze_data()
-> self.results['ssdeep'] = self.__ssd.hash_bytes(data)
(Pdb) s
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:57:42.960

我没有解释，但四处搜索似乎有一个用于 ssdeep 的替代包装器，称为[pydeep](https://github.com/kbandla/pydeep)，它可能更可靠（似乎您在 osx 上经常使用 segfaults 的包 - 也许这也适用于 linux ）。

它提供了几乎相同的界面（见上面的链接），所以应该很容易交换。

# android - 如何使用 adb 发送长按按键事件？

> ID：11142843
> 
> 赞同：12
> 
> 时间：2012-06-21T16:42:22.797
> 
> 标签：android, adb

我可以使用类似的东西：

```
adb shell input keyevent 4 
```

这将向我的设备发送一个“返回”按钮。如何发送长按？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-12-12T07:25:14.210

你可以试试这个命令：

```
adb shell input touchscreen swipe 170 187 170 187 2000 
```

您在屏幕上的应用位置是 170、187；延迟时间为2000（ms）；

长按HOME键：

```
adb shell sendevent /dev/input/event2 1 172 1
adb shell sendevent /dev/input/event2 0  0 0
timeout 1
adb shell sendevent /dev/input/event2 1 172 0
adb shell sendevent /dev/input/event2 0  0 0 
```

您可以转到**cmd**并键入**adb shell getevent | 找到“事件2”**；长按**HOME**键查看更多。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-12-24T01:00:22.153

由于Android 4.4 中的[此提交](https://android.googlesource.com/platform/frameworks/base.git/+/11744d15364b16a976413599933ed1b1d59e4a6f)，因此可以使用：

```
adb shell input keyevent --longpress KEYCODE_L 
```

[这另一个提交](https://android.googlesource.com/platform/frameworks/base.git/+/9d83b4783c33f1fafc43f367503e129e5a5047fa)进一步改善了行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-06T20:15:19.753

当您想删除某些内容或重复某些事件或只是输入大量数字时，您可以使用如下代码。它将模仿键盘上的**长按：**

```
adb shell input keyevent KEYCODE_FORWARD_DEL KEYCODE_FORWARD_DEL KEYCODE_FORWARD_DEL //delete 3 times

adb shell input keyevent KEYCODE_1 KEYCODE_1 KEYCODE_1 //input value '111' 
```

您可以无限制地重复事件或输入内容，就像长按按键一样。这是同一件事。您现在可以定义自己的 longpass 和时间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T17:18:14.250

[此链接](https://groups.google.com/forum/?fromgroups#!msg/tasker/LJhmfxT2mj8/y92jivjmZNIJ)讨论了一个类似的问题，但有问题的设备（Nexus One 设备）具有菜单/主页/返回/搜索按钮作为触摸屏的一部分，而不是物理键。

[另一个](https://groups.google.com/forum/?fromgroups#!topic/android-developers/ZpPBZMir5TE)似乎更符合注入物理键输入，但需要访问设备驱动程序的 *.kl 文件以确定该特定设备的设备、类型、键代码、值按下和值释放代码设备。

然而，两者之间的共同联系似乎是

```
adb shell sleep n 
```

，*其中 n 是按下持续时间的长度（以秒为单位）。*

希望这可能会有一些用处。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-21T17:06:41.537

好吧，[这个开发者链接](http://developer.android.com/reference/android/view/KeyEvent.html#FLAG_LONG_PRESS)显示密钥代码是 128，我已经测试过了，但没有预期的结果

您可以查看[此](http://thecodeartist.blogspot.com/2011/03/simulating-keyevents-on-android-device.html)链接和[此](http://www.netmite.com/android/mydroid/development/pdk/docs/keymaps_keyboard_input.html)链接。他们展示了如何找到它。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-05-05T05:41:54.873

这可能为时已晚，但肯定会对其他人有所帮助。

请使用下面的cmd来实现长按。

adb shell 输入 keyevent 5 睡眠 5

# php - 在php中验证电话号码

> ID：11142846
> 
> 赞同：-1
> 
> 时间：2012-06-21T16:42:42.457
> 
> 标签：php

> **可能重复：**
> [用于电话号码验证的综合正则表达式](https://stackoverflow.com/questions/123559/a-comprehensive-regex-for-phone-number-validation)

请我为邮件和电话号码验证创建了这个功能，邮件自己的作品，bt 手机自己的不起作用。

```
if(trim($_POST['email']) == '')  {
    $hasError = true;
} else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$",     
         trim($_POST['email']))) {
    $hasError = true;
} else {
    $email = trim($_POST['email']);
}

if(trim($_POST['phonenumber']) == '')  {
    $hasError = true;
} else if (!eregi("/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/$",      
          trim($_POST['phonenumber']))) {
    $hasError = true;
} else {
    $phonenumber= trim($_POST['phonenumber']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:47:20.100

首先，您应该使用`preg_match`而不是`eregi`.

除此之外，人们以多种方式输入电话号码。处理它们的最简单方法是去掉任何不是数字的东西，看看你是否有十个数字：

```
$number = preg_replace("/\D/","",$_POST['phonenumber']);
if( strlen($number) == 10) { /* ok */ }
else { /* error */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:01:52.887

我认为更好的方法是从输入中删除所有非数字字符并检查长度是否在一定范围内。特别是如果您将此数据存储在数据库中，这样您就不会最终存储不必要的数据。

`x`如果您想允许扩展，您可能希望保留字符。这是一个从字符串中删除所有非数字字符的函数（除了`x`）。

```
function removeNonNumeric($string) {
    return preg_replace('/[^\dx]/', '', $string)
} 
```

当您需要输出结果时，您可以根据需要对其进行格式化。

# python - 使用python为图像添加边框

> ID：11142851
> 
> 赞同：45
> 
> 时间：2012-06-21T16:43:09.830
> 
> 标签：python, image, image-processing

我有大量固定尺寸的图像（比如 500*500）。我想编写一个python脚本，将它们调整为固定大小（比如800 * 800），但会将原始图像保持在中心并用固定颜色（比如黑色）填充多余的区域。

我正在使用 PIL。我现在可以使用该`resize`功能调整图像大小，但这会改变纵横比。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-21T16:58:05.133

您可以创建具有所需新尺寸的新图像，并将旧图像粘贴到中心，然后保存。如果你愿意，你可以覆盖原始图像（你确定吗？；o）

```
import Image

old_im = Image.open('someimage.jpg')
old_size = old_im.size

new_size = (800, 800)
new_im = Image.new("RGB", new_size)   ## luckily, this is already black!
new_im.paste(old_im, ((new_size[0]-old_size[0])//2,
                      (new_size[1]-old_size[1])//2))

new_im.show()
# new_im.save('someimage.jpg') 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-06-21T16:50:19.010

就在这里。

做这样的事情：

```
from PIL import Image, ImageOps
ImageOps.expand(Image.open('original-image.png'),border=300,fill='black').save('imaged-with-border.png') 
```

您可以在几行中编写相同的内容：

```
from PIL import Image, ImageOps
img = Image.open('original-image.png')
img_with_border = ImageOps.expand(img,border=300,fill='black')
img_with_border.save('imaged-with-border.png') 
```

你说你有一个图像列表。然后你必须使用一个循环来处理所有这些：

```
from PIL import Image, ImageOps
for i in list-of-images:
  img = Image.open(i)
  img_with_border = ImageOps.expand(img,border=300,fill='black')
  img_with_border.save('bordered-%s' % i) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-09-04T21:29:44.763

或者，如果您使用的是[OpenCV](http://opencv.org/)，它们有一个名为的函数`copyMakeBorder`，允许您向图像的任何一侧添加填充。除了纯色之外，他们还为花哨的边框提供了一些很酷的选项，例如反射或扩展图像。

```
import cv2

img = cv2.imread('image.jpg')

color = [101, 52, 152] # 'cause purple!

# border widths; I set them all to 150
top, bottom, left, right = [150]*4

img_with_border = cv2.copyMakeBorder(img, top, bottom, left, right, cv2.BORDER_CONSTANT, value=color) 
```

[![cv2.copyMakeBorder 函数的示例结果](../Images/b30eb18e75ca1991fc82ba7713863971.png)](https://i.stack.imgur.com/drWrh.jpg)

资料来源：[OpenCV 边框教程](http://docs.opencv.org/2.4/doc/tutorials/imgproc/imgtrans/copyMakeBorder/copyMakeBorder.html)和 [OpenCV 3.1.0 Docs for copyMakeBorder](http://docs.opencv.org/3.1.0/d2/de8/group__core__array.html#ga2ac1049c2c3dd25c2b41bffe17658a36)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-13T00:51:08.950

PIL 的`crop`方法实际上可以通过使用原始图像边界框之外的数字来为您处理这个问题，尽管[文档](http://effbot.org/imagingbook/image.htm#tag-Image.Image.crop)中没有明确说明。left 和 top 的负数将为这些边缘添加黑色像素，而大于 right 和 bottom 的原始宽度和高度的数字将为这些边缘添加黑色像素。

此代码解释了奇数像素大小：

```
from PIL import Image

with Image.open('/path/to/image.gif') as im:
    old_size = im.size
    new_size = (800, 800)

    if new_size > old_size:
        # Set number of pixels to expand to the left, top, right,
        # and bottom, making sure to account for even or odd numbers
        if old_size[0] % 2 == 0:
            add_left = add_right = (new_size[0] - old_size[0]) // 2
        else:
            add_left = (new_size[0] - old_size[0]) // 2
            add_right = ((new_size[0] - old_size[0]) // 2) + 1

        if old_size[1] % 2 == 0:
            add_top = add_bottom = (new_size[1] - old_size[1]) // 2
        else:
            add_top = (new_size[1] - old_size[1]) // 2
            add_bottom = ((new_size[1] - old_size[1]) // 2) + 1

        left = 0 - add_left
        top = 0 - add_top
        right = old_size[0] + add_right
        bottom = old_size[1] + add_bottom

        # By default, the added pixels are black
        im = im.crop((left, top, right, bottom)) 
```

代替 4 元组，您可以改为使用 2 元组在左/右和上/下添加相同数量的像素，或者使用 1 元组向所有侧添加相同数量的像素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-13T23:36:06.950

在这里考虑旧维度、新维度及其区别很重要。如果差异是奇数（不是偶数），则需要为**左、上、右**和**下**边框指定稍有不同的值。

假设旧维度是 ow,oh，新维度是 nw,nh。所以，这将是答案：

```
import Image, ImageOps
img = Image.open('original-image.png')
deltaw=nw-ow
deltah=nh-oh
ltrb_border=(deltaw/2,deltah/2,deltaw-(deltaw/2),deltah-(deltah/2))
img_with_border = ImageOps.expand(img,border=ltrb_border,fill='black')
img_with_border.save('imaged-with-border.png') 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-15T19:41:30.050

您可以将图像加载[`scipy.misc.imread`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.imread.html)为 numpy 数组。然后创建一个具有所需背景的数组，[`numpy.zeros((height, width, channels))`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.zeros.html)并将图像粘贴到所需位置：

```
import numpy as np
import scipy.misc

im = scipy.misc.imread('foo.jpg', mode='RGB')
height, width, channels = im.shape

# make canvas
im_bg = np.zeros((height, width, channels))
im_bg = (im_bg + 1) * 255  # e.g., make it white

# Your work: Compute where it should be
pad_left = ...
pad_top = ...

im_bg[pad_top:pad_top + height,
      pad_left:pad_left + width,
      :] = im
# im_bg is now the image with the background. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-18T01:39:09.317

```
ximg = Image.open(qpath)
xwid,xhgt = func_ResizeImage(ximg)
qpanel_3 = tk.Frame(Body,width=xwid+10,height=xhgt+10,bg='white',bd=5)
ximg = ximg.resize((xwid,xhgt),Image.ANTIALIAS) 
ximg = ImageTk.PhotoImage(ximg) 
panel = tk.Label(qpanel_3,image=ximg)     
panel.image = ximg 
panel.grid(row = 2) 
```

# performance - F# 代码的性能很糟糕

> ID：11142852
> 
> 赞同：4
> 
> 时间：2012-06-21T16:43:11.723
> 
> 标签：performance, recursion, f#, sequences

这是我的第一个 F# 程序。我想我会实施康威的生命游戏作为第一个练习。

请帮助我理解为什么以下代码具有如此糟糕的性能。

```
let GetNeighbours (p : int, w : int, h : int) : seq<int> =
    let (f1, f2, f3, f4) = (p > w, p % w <> 1, p % w <> 0, p < w * (h - 1))
    [
    (p - w - 1, f1 && f2);
    (p - w, f1);
    (p - w + 1, f1 && f3);
    (p - 1, f2);
    (p + 1, f3);
    (p + w - 1, f4 && f2);
    (p + w, f4);
    (p + w + 1, f4 && f3)
    ]
    |> List.filter (fun (s, t) -> t)
    |> List.map (fun (s, t) -> s)
    |> Seq.cast

let rec Evolve (B : seq<int>, S : seq<int>, CC : seq<int>, g : int) : unit =
    let w = 10
    let h = 10
    let OutputStr = (sprintf "Generation %d:  %A" g CC) // LINE_MARKER_1
    printfn "%s" OutputStr
    let CCN = CC |> Seq.map (fun s -> (s, GetNeighbours (s, w, h)))
    let Survivors =
        CCN
        |> Seq.map (fun (s, t) -> (s, t |> Seq.map (fun u -> (CC |> Seq.exists (fun v -> u = v)))))
        |> Seq.map (fun (s, t) -> (s, t |> Seq.filter (fun u -> u)))
        |> Seq.map (fun (s, t) -> (s, Seq.length t))
        |> Seq.filter (fun (s, t) -> (S |> Seq.exists (fun u -> t = u)))
        |> Seq.map (fun (s, t) -> s)
    let NewBorns =
        CCN
        |> Seq.map (fun (s, t) -> t)
        |> Seq.concat
        |> Seq.filter (fun s -> not (CC |> Seq.exists (fun t -> t = s)))
        |> Seq.groupBy (fun s -> s)
        |> Seq.map (fun (s, t) -> (s, Seq.length t))
        |> Seq.filter (fun (s, t) -> B |> Seq.exists (fun u -> u = t))
        |> Seq.map (fun (s, t) -> s)
    let NC = Seq.append Survivors NewBorns
    let SWt = new System.Threading.SpinWait ()
    SWt.SpinOnce ()
    if System.Console.KeyAvailable then
        match (System.Console.ReadKey ()).Key with
        | System.ConsoleKey.Q -> ()
        | _ -> Evolve (B, S, NC, (g + 1))
    else 
        Evolve (B, S, NC, (g + 1))

let B = [3]
let S = [2; 3]
let IC = [4; 13; 14]
let g = 0
Evolve (B, S, IC, g) 
```

前五次迭代，即第 0、1、2、3、4 代，毫无问题地发生。然后，在大约 100 毫秒的短暂暂停后，第 5 代完成。但在那之后，程序挂在标记为“LINE_MARKER_1”的行，正如 Visual Studio 断点所揭示的那样。它永远不会到达这`printfn`条线。

奇怪的是，到了第 2 代，`CC`函数`Evolve`中的序列已经稳定到序列`[4; 13; 14; 3]`，所以我看不出为什么第 6 代不能进化。

我知道粘贴大段代码并在调试时寻求帮助通常被认为是令人反感的，但我不知道如何将其减少到最低限度的工作示例。任何可以帮助我调试的指针都将不胜感激。

在此先感谢您的帮助。

**编辑**

我真的相信任何希望帮助我的人都可能会忽略该`GetNeighbours`功能。我只是为了完整起见才包括它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T18:33:34.970

修复性能的最简单方法是使用`Seq.cache`：

```
let GetNeighbours (p : int, w : int, h : int) : seq<int> =
    let (f1, f2, f3, f4) = (p > w, p % w <> 1, p % w <> 0, p < w * (h - 1))
    [
    (p - w - 1, f1 && f2);
    (p - w, f1);
    (p - w + 1, f1 && f3);
    (p - 1, f2);
    (p + 1, f3);
    (p + w - 1, f4 && f2);
    (p + w, f4);
    (p + w + 1, f4 && f3)
    ]
    |> List.filter (fun (s, t) -> t)
    |> List.map (fun (s, t) -> s)
    :> seq<_> // <<<<<<<<<<<<<<<<<<<<<<<< MINOR EDIT, avoid boxing

let rec Evolve (B : seq<int>, S : seq<int>, CC : seq<int>, g : int) : unit =
    let w = 10
    let h = 10
    let OutputStr = (sprintf "Generation %d:  %A" g CC) // LINE_MARKER_1
    printfn "%s" OutputStr
    let CCN =
        CC
        |> Seq.map (fun s -> (s, GetNeighbours (s, w, h)))
        |> Seq.cache // <<<<<<<<<<<<<<<<<< EDIT
    let Survivors =
        CCN
        |> Seq.map (fun (s, t) -> (s, t |> Seq.map (fun u -> (CC |> Seq.exists (fun v -> u = v)))))
        |> Seq.map (fun (s, t) -> (s, t |> Seq.filter (fun u -> u)))
        |> Seq.map (fun (s, t) -> (s, Seq.length t))
        |> Seq.filter (fun (s, t) -> (S |> Seq.exists (fun u -> t = u)))
        |> Seq.map (fun (s, t) -> s)
    let NewBorns =
        CCN
        |> Seq.map (fun (s, t) -> t)
        |> Seq.concat
        |> Seq.filter (fun s -> not (CC |> Seq.exists (fun t -> t = s)))
        |> Seq.groupBy (fun s -> s)
        |> Seq.map (fun (s, t) -> (s, Seq.length t))
        |> Seq.filter (fun (s, t) -> B |> Seq.exists (fun u -> u = t))
        |> Seq.map (fun (s, t) -> s)
    let NC =
        Seq.append Survivors NewBorns
        |> Seq.cache // <<<<<<<<<<<<<<<<<< EDIT
    let SWt = new System.Threading.SpinWait ()
    SWt.SpinOnce ()
    if System.Console.KeyAvailable then
        match (System.Console.ReadKey ()).Key with
        | System.ConsoleKey.Q -> ()
        | _ -> Evolve (B, S, NC, (g + 1))
    else
        Evolve (B, S, NC, (g + 1))

let B = [3]
let S = [2; 3]
let IC = [4; 13; 14]
let g = 0
Evolve (B, S, IC, g) 
```

最大的问题不是使用`Seq`本身，问题是正确使用它。默认情况下，序列不是惰性的，而是定义了在每次遍历时重新评估的计算。这意味着除非您对它采取一些措施（例如`Seq.cache`），否则重新评估序列可能会破坏程序的算法复杂性。

您的原始程序具有指数复杂性。要看到这一点，请注意，每次迭代都会使遍历的元素数量翻倍。

另请注意，使用您的编程风格，使用`Seq`操作符后跟操作符比使用或操作符`Seq.cache`有一个小的优势：这避免了分配中间数据结构，从而减少了 GC 压力并可能加快速度。`List``Array`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T17:16:25.133

查看评论和所有内容，但这段代码运行起来很糟糕——同时`List.*`还有一些其他较小的优化：

```
let GetNeighbours p w h =
    let (f1, f2, f3, f4) = p > w, p % w <> 1, p % w <> 0, p < w * (h - 1)
    [
        p - w - 1, f1 && f2
        p - w, f1
        p - w + 1, f1 && f3
        p - 1, f2
        p + 1, f3
        p + w - 1, f4 && f2
        p + w, f4
        p + w + 1, f4 && f3
    ]
    |> List.choose (fun (s, t) -> if t then Some s else None)

let rec Evolve B S CC g =
    let w = 10
    let h = 10
    let OutputStr = sprintf "Generation %d:  %A" g CC // LINE_MARKER_1
    printfn "%s" OutputStr
    let CCN = CC |> List.map (fun s -> s, GetNeighbours s w h)
    let Survivors =
        CCN
        |> List.choose (fun (s, t) ->
            let t =
                t
                |> List.filter (fun u -> CC |> List.exists ((=) u))
                |> List.length
            if S |> List.exists ((=) t) then
                Some s
            else None)
    let NewBorns =
        CCN
        |> List.collect snd
        |> List.filter (not << fun s -> CC |> List.exists ((=) s))
        |> Seq.countBy id
        |> List.ofSeq
        |> List.choose (fun (s, t) ->
            if B |> List.exists ((=) t) then
                Some s
            else None)
    let NC = List.append Survivors NewBorns
    let SWt = new System.Threading.SpinWait()
    SWt.SpinOnce()
    if System.Console.KeyAvailable then
        match (System.Console.ReadKey()).Key with
        | System.ConsoleKey.Q -> ()
        | _ -> Evolve B S NC (g + 1)
    else 
        Evolve B S NC (g + 1)

let B = [3]
let S = [2; 3]
let IC = [4; 13; 14]
let g = 0
Evolve B S IC g 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T17:03:01.950

只是想我会添加一个简单的答案，以防像我这样的其他初学者遇到同样的问题。

根据`Ramon Snir`,`ildjarn`及`pad`以上的建议，我将`Seq.X`调用更改为`List.X`. 我不得不添加一个简单的额外转换步骤来解释`List`没有的事实`groupBy`，但是这样做之后，代码现在运行起来就像一个魅力！

非常感谢。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T01:56:26.197

ML 系列语言最令人惊奇的特征之一是短代码通常是快速代码，这也适用于 F#。

[将您的实现与我在此处](http://fsharpnews.blogspot.co.uk/2010/02/john-conways-game-of-life-in-32-lines.html)发布的更快的实现进行比较：

```
let count (a: _ [,]) x y =
  let m, n = a.GetLength 0, a.GetLength 1
  let mutable c = 0
  for x=x-1 to x+1 do
    for y=y-1 to y+1 do
      if x>=0 && x<m && y>=0 && y<n && a.[x, y] then
        c <- c + 1
  if a.[x, y] then c-1 else c

let rule (a: _ [,]) x y =
  match a.[x, y], count a x y with
  | true, (2 | 3) | false, 3 -> true
  | _ -> false 
```

# .htaccess - 表达式引擎 - 完全删除 index.php

> ID：11142853
> 
> 赞同：3
> 
> 时间：2012-06-21T16:43:12.700
> 
> 标签：.htaccess, expressionengine

我已经在我的 .htaccess 文件中使用以下代码一段时间来使 EE URL 工作，而不需要 URL 中的 index.php。我发现虽然我从爬虫工具中得到了一些报告，我得到了重复的内容，因为 /lorem/ipsum/ 也以 /index.php/lorem/ipsum/ 的形式出现在某个地方。

我知道这可能是由于在 URL 中引用 index.php 的杂散链接造成的，但我想通过强制 index.php 退出链接来缩小差距。我环顾四周，但我似乎无法找到如何强制它。

```
RewriteEngine On
RewriteBase /

RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T17:08:23.147

肯定的事。

```
# Enable Rewrite Engine
# ------------------------------
RewriteEngine On
RewriteBase /

# Redirect index.php Requests
# ------------------------------
RewriteCond %{THE_REQUEST} ^[^/]*/index\.php [NC]
RewriteCond %{THE_REQUEST} ^GET
RewriteRule ^index\.php(.+) $1 [R=301,L] 

# Standard ExpressionEngine Rewrite
# ------------------------------
RewriteCond $1 !\.(css|js|gif|jpe?g|png) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# c# - WCF 服务客户端应用程序获取“对象未设置为对象的实例”

> ID：11142854
> 
> 赞同：7
> 
> 时间：2012-06-21T16:43:13.760
> 
> 标签：c#, .net, wcf, exception-handling, wcf-client

刚刚使用 IIS 7.5 在我公司的服务器上部署了我的 WCF 服务，一切似乎都运行良好。但是当我设置我的客户端应用程序并添加对服务器的服务器引用然后使用此代码时。

```
ServerReference.ServiceClient client = new ServerReference.ServiceClient();

var s = client.GetBrand("Audi", false); 
```

我得到一个异常，说“对象引用未设置为对象的实例”。s 对象不应为空（我们在 localhost 上尝试了该服务，我们将其全部放在它工作的同一个项目中）。

您查看了 stackstrace，它看起来像这样。

```
21.6.2012 16:16:29 
```

你调用的对象是空的。

```
Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

有什么建议么 ？？PS 托管 WCF 服务的 CPU 没有视觉工作室，所以我无法通过它进行调试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:54:03.207

正如我在评论中建议的那样，确保您可以使用[WcfTestClient](http://msdn.microsoft.com/en-us/library/bb552364.aspx)获取数据。这既确认了服务正在运行，又几乎对方法调用进行了单元测试，以确保它从客户端的角度工作。

其次，（除非您将其淡化以在 SO 上发布）使用[正确的 WCF 调用方法](http://msdn.microsoft.com/en-us/library/aa355056.aspx)来避免此类问题。一旦你引入了一个依赖，预测失败总是一个好主意（尽管你的服务、客户端的互联网连接或其他）。

在不了解您的项目的任何其他信息的情况下，很难描述如何修复它。诸如旧 WSDL、错误配置的 *.config、服务器上未公开的端点以及其他问题等因素可能是问题的根源，但鉴于您所展示的内容，我不知道它可能是什么。

如果您能提供更多信息，我将很高兴用我可能有的更多建议来更新我的答案。现在，看看在服务器上[启用 WCF 跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)，以便您可以回顾日志并查看服务器端是否有任何问题（除了逐步执行客户端的调用和检查）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:54:16.250

您不必通过它进行调试。只需在 web.config 中添加 WCF 跟踪设置，您就可以获得有关原始错误的信息。请参阅[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T07:20:05.897

我在我的项目中遇到了同样的问题，在我的情况下，我发现异常发生在服务构造函数中，但只有在我调用任何方法时才会触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T18:02:25.150

配置跟踪源以发出跟踪和设置跟踪级别，设置活动跟踪和传播以支持端到端跟踪关联，并设置跟踪侦听器以访问跟踪。

Windows Communication Foundation (WCF) 为诊断跟踪输出以下数据： 跨应用程序所有组件的进程里程碑跟踪，例如操作调用、代码异常、警告和其他重要处理事件。跟踪功能出现故障时的 Windows 错误事件。请参阅[WCF 中的事件日志记录](https://msdn.microsoft.com/en-us/library/ms733738.aspx)。

# java - 单击按钮时在后台通过电子邮件发送文本文件

> ID：11142857
> 
> 赞同：0
> 
> 时间：2012-06-21T16:43:39.447
> 
> 标签：java, android, android-intent, email

我想在按下按钮时附加一个文本文件并在后台自动将其通过电子邮件发送到预定义的电子邮件地址。

我正在创建一个这样的文本文件：

```
 try {
    FileOutputStream fos = openFileOutput("abc.txt",MODE_PRIVATE);
    String s = "Data to be written ok fine cool";fos.write(s.getBytes());
   } catch (Exception e) {
e.printStackTrace();

} 
```

我将如何设置自动发送电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:49:50.510

请参阅[此链接](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)，了解如何在没有意图的情况下发送电子邮件。如教程中所述，您将需要[javamail-android 库](http://code.google.com/p/javamail-android/downloads/list)。

注意类`addAttachment`中的方法`Mail`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:49:03.330

您可以生成一个新线程来为您发送电子邮件......或者更优雅的解决方案是在应用程序开始时生成第二个线程，当有新消息时您的主线程通知第二个线程发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:52:57.257

要在后台发送邮件，您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并使其自动（不使用任何 Intent）[使用 JavaMail api](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:52:52.437

这取决于你想如何发送电子邮件。 [此](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)链接显示如何在不使用默认邮件客户端的情况下发送电子邮件。这让用户选择

```
private void sendEmail() {
        final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.setType("plain/text");
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, String[]{"recipient@example.com"} );
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Subject");
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "content");
        this.startActivity(Intent.createChooser(emailIntent, "Send mail..."));
    } 
```

# php - PHP | 发送大量 Facebook 墙消息

> ID：11142861
> 
> 赞同：0
> 
> 时间：2012-06-21T16:43:55.393
> 
> 标签：php, facebook, facebook-graph-api

我创建了一个 Facebook 应用程序，我喜欢在朋友墙上发布消息。

代码很好并且工作正常。

问题是我尝试运行如下代码：

```
foreach($friends as $friend)
{
    // Post the message here
} 
```

上面的例子太快了，可能 Facebook 屏蔽了我的应用程序，而且应用程序运行速度很慢。

所以，我想问一下，是否有比 foreach 更慢的发布消息的编程方法。

我不知道创建一个php文件是否是一个好的解决方案，每X秒由cron作业运行一次并一次加载Y个朋友帐户的记录。

该问题的最佳解决方案是什么？

亲切的问候梅里亚诺斯尼科斯

# localization - 使用 SSRS 进行本地化

> ID：11142866
> 
> 赞同：0
> 
> 时间：2012-06-21T16:44:27.547
> 
> 标签：localization, ssrs-2008, gac, embedded-resource

我正在尝试本地化 SSRS 报告。我有一个 DLL，它使用 ResourceManager 来访问嵌入在 dll 中的资源文件。我的报告引用了 dll。该 dll 已签名并具有强名称。dll 和资源文件的 dll 被编译并在 MicrosoftVisualStudio9.0/Common7/IDE/PrivateAssemblies 和 Microsoft SQL Server\MSRS10.REPORTSERVER\Reporting Services\ReportServer\bin 中。资源 dll 也使用 gacutil 安装在 GAC 中。

SSRS 有时会正确找到它需要的资源键并显示它。但是，当更改资源文件以添加更多键和值时，我无法让 SSRS 访问新添加的文件。我已经重复了上述所有步骤，甚至卸载并安装了 GAC 中的资源。我仍然无法让它工作。

知道我错过了哪一步吗？显然这个过程是有效的，我只是没有重复我需要做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:31:55.887

对于那些对稍微不同的方法感兴趣的人，您可能想尝试使用不使用标准资源管理而是依赖于简单文件 IO 的本地化程序集。这使得对现有 resx 文件的更改或添加新文件的问题更少。您可以添加或更改 resx 文件，并立即检索用于报告的值。我遵循了这个例子，只做了一些小的调整，并且对结果非常满意：http: [//www.codeproject.com/Articles/294636/Localizing-SQL-Server-Reporting-Services-Reports](http://www.codeproject.com/Articles/294636/Localizing-SQL-Server-Reporting-Services-Reports)

不过需要注意的是，添加新 CodeGroup 时要遵循的步骤有些欠缺，因为如果您将新 CodeGroup 放置在除未命名的 UnionCodeGroup 之后（它是带有 Url="$CodeGen$/*" 的那个）之外的任何地方，您尝试访问您的自定义程序集将失败。

经过大量挖掘后，我能够在其中一个 msdn 页面上找到对此的确认（请参阅“扩展代码组元素的放置”部分）。他们的措辞是“推荐”，但从我的测试来看，我认为这是必需的，至少在直接在报表服务器上进行测试时：http: [//msdn.microsoft.com/en-us/library/ms152828.aspx](http://msdn.microsoft.com/en-us/library/ms152828.aspx)

在 wix 中用于 rssrvpolicy.config 文件中此位置的 xpath 是：

```
//PolicyLevel/CodeGroup/CodeGroup[\[]@class='FirstMatchCodeGroup'[\]]/CodeGroup[\[]@PermissionSetName='ReportLocalization'[\]] 
```

下面是如何使用 util:XmlConfig 扩展在 WiX 中完成此操作的示例：

```
 <DirectoryRef Id="TARGETDIR">
        <Component Id="I18N_RSSRVPOLICY_CONFIG" Guid="some GUID">
            <util:XmlConfig
                Id="RS_i18n_PermissionSet_remove_if_already_exists"
                File="[SQLREPORTINGSERVICESPATH]ReportServer\rssrvpolicy.config"
                Action="delete"
                On="install"
                ElementPath="//NamedPermissionSets"
                VerifyPath="//NamedPermissionSets/PermissionSet[\[]@Name='ReportLocalization'[\]]"
                Node="element"
                Sequence="100">
            </util:XmlConfig>
            <util:XmlConfig
                Id="RS_i18n_PermissionSet_add"
                File="[SQLREPORTINGSERVICESPATH]ReportServer\rssrvpolicy.config"
                Action="create"
                On="install"
                ElementPath="//NamedPermissionSets"
                VerifyPath="//NamedPermissionSets/PermissionSet[\[]@Name='ReportLocalization'[\]]"
                Node="document"
                Sequence="101">
                <![CDATA[
        <PermissionSet class="NamedPermissionSet" version="1" Unrestricted="true" Name="ReportLocalization" Description="A special permission set that allows Execution and Assertion" />
        ]]>
            </util:XmlConfig>
            <util:XmlConfig
                Id="RS_i18n_CodeGroup_remove_if_already_exists"
                File="[SQLREPORTINGSERVICESPATH]ReportServer\rssrvpolicy.config"
                Action="delete"
                On="install"
                ElementPath="//PolicyLevel/CodeGroup/CodeGroup[\[]@class='FirstMatchCodeGroup'[\]]"
                VerifyPath="//PolicyLevel/CodeGroup/CodeGroup[\[]@class='FirstMatchCodeGroup'[\]]/CodeGroup[\[]@PermissionSetName='ReportLocalization'[\]]"
                Node="element"
                Sequence="102">
            </util:XmlConfig>
            <util:XmlConfig
                Id="RS_i18n_CodeGroup_add"
                File="[SQLREPORTINGSERVICESPATH]ReportServer\rssrvpolicy.config"
                Action="create"
                On="install"
                ElementPath="//PolicyLevel/CodeGroup/CodeGroup[\[]@class='FirstMatchCodeGroup'[\]]"
                VerifyPath="//PolicyLevel/CodeGroup/CodeGroup[\[]@class='FirstMatchCodeGroup'[\]]/CodeGroup[\[]@PermissionSetName='ReportLocalization'[\]]"
                Node="document"
                Sequence="103">
                <![CDATA[
          <CodeGroup class="UnionCodeGroup" version="1" PermissionSetName="ReportLocalization" Name="Verint.SSRS.Localization" Description="This grants the Verint.SSRS.Localization.dll ReportLocalization Permissions">
            <IMembershipCondition class="UrlMembershipCondition" version="1" Url="UPDATE_ME"/>
          </CodeGroup>]]>
            </util:XmlConfig>
            <util:XmlConfig
                Id="RS_i18n_CodeGroup_update"
                File="[SQLREPORTINGSERVICESPATH]ReportServer\rssrvpolicy.config"
                Action="create"
                On="install"
                ElementPath="//IMembershipCondition[\[]@Url='UPDATE_ME'[\]]"
                Name="Url"
                Value="[SQLREPORTINGSERVICESPATH]ReportServer\bin\Verint.SSRS.Localization.dll"
                Node="value"
                Sequence="104">
            </util:XmlConfig>
            <util:XmlConfig
                Id="RS_i18n_REDP_CodeGroup_update"
                File="[SQLREPORTINGSERVICESPATH]ReportServer\rssrvpolicy.config"
                Action="create"
                On="install"
                ElementPath="//CodeGroup[\[]@Name='Report_Expressions_Default_Permissions'[\]]"
                Name="PermissionSetName"
                Value="FullTrust"
                Node="value"
                Sequence="105">
            </util:XmlConfig>
        </Component>
    </DirectoryRef> 
```

我建议备份原始配置文件（使用 WiX 或自定义操作）。这可以使卸载更容易，因为您可以替换那些原件，并且还因为您可以一遍又一遍地测试它，直到它做您想要的。祝大家好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:57:00.960

您是否使用每个更新（包括在 GAC 中）重新构建和重新部署所有附属程序集？

如果不是，听起来问题是由于程序集版本控制造成的。有一个[SatelliteContractVersion 属性](http://msdn.microsoft.com/en-us/library/system.resources.satellitecontractversionattribute.aspx)，您可以将其应用于您的主程序集以帮助解决此问题。尽管每次部署更新时重建/重新分配/重新部署所有附属程序集可能会更容易。

# php - 通过抽象函数访问外部对象

> ID：11142869
> 
> 赞同：1
> 
> 时间：2012-06-21T16:44:47.853
> 
> 标签：php, class, static-methods

给定以下类：

```
<?php
class test{
static public function statfunc()
    {
    echo "this is the static function<br/>";
            $api= new object;

    }   
}

class traductor
{

    public function display()
    {
       echo "this is the object function";
}
}

test::statfunc();

$api->display(); 
```

这不显示消息`"this is the static function<br/>"`。

有没有办法通过静态函数实例化并将该对象放在外面？

谢谢...我对对象编程代码缺乏经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:46:53.817

您应该从静态函数返回对象：

```
static public function statfunc()
{
    $api = new traductor;
    return $api;
} 
```

然后将返回的对象存储在您可以使用的变量中。

```
$api = test::statfunc();
$api->display(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:53:35.883

您对声明的使用有点偏离。您的代码导致 2 个致命错误。首先，找不到类对象，你应该替换：

```
$api= new object; 
```

和

```
return new traductor; 
```

作为一个静态类，它们执行一个动作，它们不保存数据，因此是 static 关键字。当您开始使用 $this 等时，请记住这一点。您需要将结果返回给另一个变量。

```
test::statfunc();
$api->display(); 
```

应该变成：

```
$api = test::statfunc();
$api->display(); 
```

有关静态关键字和示例的更多信息，请参阅[http://php.net/manual/en/language.oop5.static.php 。](http://php.net/manual/en/language.oop5.static.php)

# inno-setup - 如何隐藏主面板并在整个页面上显示图像？

> ID：11142870
> 
> 赞同：5
> 
> 时间：2012-06-21T16:44:51.367
> 
> 标签：inno-setup

我创建了一个带有图像的自定义欢迎页面，但顶部的主面板仍有待显示。对于我想要实现的目标，请参见下图：

![在此处输入图像描述](../Images/bdebc09c713d126b238cff695b65a1ee.png)

这是代码：

```
[Code]
procedure InitializeWizard;
var
  BitmapFileName: string;
  BitmapImage: TBitmapImage;
  WelcomePage: TWizardPage;
begin
  WelcomePage := CreateCustomPage(wpWelcome, '', '');    

  BitmapFileName := ExpandConstant('{tmp}\DataNova_Logo.bmp');
  ExtractTemporaryFile(ExtractFileName(BitmapFileName));

  BitmapImage := TBitmapImage.Create(WelcomePage);
  BitmapImage.AutoSize := True;
  BitmapImage.Bitmap.LoadFromFile(BitmapFileName);
  BitmapImage.Cursor := crHand;
  BitmapImage.Left := 10;
  BitmapImage.Top := 10;
  BitmapImage.Parent := WelcomePage.Surface;
end; 
```

如何在隐藏主面板的情况下在整个页面上显示图像？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T12:35:24.663

您需要在切换到欢迎页面时隐藏和组件`Bevel1`，并在离开时再次显示它们。相反，只有在显示欢迎页面时才需要显示图像，因为它覆盖了整个页面区域。所以下面的代码可以解决问题：`MainPanel``InnerNotebook`

```
[Code]
var
  WelcomePageID: Integer;
  BitmapImage: TBitmapImage;

procedure InitializeWizard;
var
  WelcomePage: TWizardPage;  
begin
  WelcomePage := CreateCustomPage(wpWelcome, '', '');
  WelcomePageID := WelcomePage.ID;
  BitmapImage := TBitmapImage.Create(WizardForm);
  BitmapImage.Bitmap.LoadFromFile('C:\Image.bmp');
  BitmapImage.Top := 0;
  BitmapImage.Left := 0;
  BitmapImage.AutoSize := True;
  BitmapImage.Cursor := crHand;
  BitmapImage.Visible := False;
  BitmapImage.Parent := WizardForm.InnerPage;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  BitmapImage.Visible := CurPageID = WelcomePageID;
  WizardForm.Bevel1.Visible := CurPageID <> WelcomePageID;
  WizardForm.MainPanel.Visible := CurPageID <> WelcomePageID;
  WizardForm.InnerNotebook.Visible := CurPageID <> WelcomePageID;
end; 
```

# javascript - 什么是 cookie 和会话，它们是如何相互关联的？

> ID：11142882
> 
> 赞同：99
> 
> 时间：2012-06-21T16:45:35.047
> 
> 标签：javascript, php, session, cookies

我正在尝试专业地理解 cookie 和会话。我知道当浏览器连接到服务器时，服务器“要求”浏览器在客户端浏览器 cookie 文件夹中“粘贴”带有“phpsessid”的 cookie。

现在我们有了“phpsessid”，如果客户端进入服务器，浏览器会向服务器发送“phpsessid”，服务器会查看 tmp 文件夹，如果我们有匹配项，它会加载用户拥有的所有数据这个客户，但我对这个过程有点困惑。

如果有人能帮助我理解创建会话和 cookie 的过程，我将不胜感激——幕后发生了什么。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-06-21T17:11:16.817

让我们来看看这个：

**[Cookie](http://il.php.net/manual/en/features.cookies.php)**和**[会话](http://il.php.net/manual/en/features.sessions.php)**都是在浏览器发出的不同请求之间保留应用程序状态的两种方式。多亏了他们，例如，您无需在每次在**[StackOverflow](http://stackoverflow.com)**上请求页面时都登录。

## 饼干

Cookies 是一小段数据（最大 4KB 长），将数据保存在 key=value 对中：

```
name=value; name2=value2 
```

这些要么由**[JavaScript](https://developer.mozilla.org/en/DOM/document.cookie "MDN - 文档.cookie")**设置，要么通过服务器使用**[HTTP 标头](http://il.php.net/manual/en/function.setcookie.php "PHP 手册 - setcookie()")**设置。

Cookie 有一个到期日期时间集，例如使用 HTTP 标头：

```
Set-Cookie: name2=value2; Expires=Wed, 19 Jun 2021 10:18:14 GMT 
```

这将导致浏览器设置一个名为 的 cookie `name2`，该 cookie`value2`将在大约 9 年后过期。

Cookie 被认为是**高度不安全**的，因为用户可以轻松地操纵其内容。这就是为什么您应该**始终验证 cookie 数据**的原因。不要假设你从 cookie 中得到的必然是你所期望的。

Cookies 通常用于保存登录状态，其中用户名和特殊哈希从浏览器发送，服务器根据数据库检查它们以批准访问。

Cookies 也经常用于**会话**创建。

## 会话

会话略有不同。每个用户都会获得一个**会话 ID ，该 ID 通过****cookie**或**GET 变量**发送回服务器进行验证。

会话通常是短暂的，这使得它们非常适合保存应用程序之间的临时状态。一旦用户关闭浏览器，会话也会过期。

会话被认为比 cookie 更安全，因为变量本身保存在**服务器**上。以下是它的工作原理：

1.  服务器打开一个会话（通过 HTTP 标头设置一个 cookie）
2.  服务器设置会话变量。
3.  客户变更页面
4.  客户端发送所有 cookie 以及步骤 1 中的会话 ID。
5.  服务器从 cookie 中读取会话 ID。
6.  服务器匹配数据库（或内存等）列表中的会话 ID。
7.  服务器找到匹配项，读取现在在`$_SESSION`超全局上可用的变量。

如果 PHP 没有找到匹配项，它将启动一个新会话，并重复 1-7 的步骤。

您可以将敏感信息存储在会话中，因为它保存在服务器上，但请注意，如果用户通过不安全的 WiFi 登录，会话 ID 仍然可能被盗。（攻击者可以嗅探cookie，并将其设置为自己的，他自己不会看到变量，但服务器会将攻击者识别为用户）。

* * *

这就是它的要点。您可以在这两个主题的 PHP 手册中了解更多信息。

# javascript - 获取对象属性中的最小值/最大值的快速方法

> ID：11142884
> 
> 赞同：112
> 
> 时间：2012-06-21T16:45:43.790
> 
> 标签：javascript, jquery

我在javascript中有一个像这样的对象：

```
{ "a":4, "b":0.5 , "c":0.35, "d":5 } 
```

有没有一种快速的方法来获得属性中的最小值和最大值，而不必遍历它们？因为我拥有的对象很大，我需要每两秒获取一次最小值/最大值。（对象的值不断变化）。

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-06-21T16:56:34.493

## 更新：^([[现代版本（ES6+）]])

```
let obj = { a: 4, b: 0.5 , c: 0.35, d: 5 };

let arr = Object.values(obj);
let min = Math.min(...arr);
let max = Math.max(...arr);

console.log( `Min value: ${min}, max value: ${max}` );
```

* * *

## 原答案：

尝试这个：

```
let obj = { a: 4, b: 0.5 , c: 0.35, d: 5 };
var arr = Object.keys( obj ).map(function ( key ) { return obj[key]; }); 
```

接着：

```
var min = Math.min.apply( null, arr );
var max = Math.max.apply( null, arr ); 
```

**现场演示：http:** [//jsfiddle.net/7GCu7/1/](http://jsfiddle.net/7GCu7/1/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-21T16:51:32.817

在一般情况下，如果不遍历所有**n 个**元素，就无法找到最大值/最小值（如果你从 1 到 n-1，你怎么知道元素**n**是否不大于（或小于）当前最大/最小）？

您提到这些值每隔几秒钟就会改变一次。如果您确切知道哪些值发生了变化，您可以从以前的最大值/最小值开始，并且只与新的值进行比较，但即使在这种情况下，如果修改的值之一是您的旧最大值/最小值，您可以需要再次循环它们。

另一种选择——同样，仅当改变的值的数量很小时——将值存储在诸如树或堆之类的结构中，并且当新值到达时，您将适当地插入（或更新）它们。但是根据您的问题，您是否可以做到这一点尚不清楚。

如果您想在遍历所有元素时获取给定列表的最大/最小元素，那么您可以使用下面的代码片段，但如果不遍历所有元素，您将无法做到这一点

```
var list = { "a":4, "b":0.5 , "c":0.35, "d":5 };
var keys = Object.keys(list);
var min = list[keys[0]]; // ignoring case of empty list for conciseness
var max = list[keys[0]];
var i;

for (i = 1; i < keys.length; i++) {
    var value = list[keys[i]];
    if (value < min) min = value;
    if (value > max) max = value;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-02-05T16:34:07.223

你可以试试：

```
const obj = { a: 4, b: 0.5 , c: 0.35, d: 5 };
const max = Math.max.apply(null, Object.values(obj));
console.log(max) // 5 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-21T16:49:08.057

`min`并且`max`无论如何都必须遍历输入数组-否则他们将如何找到最大或最小的元素？

所以只需一个快速`for..in`循环就可以了。

```
var min = Infinity, max = -Infinity, x;
for( x in input) {
    if( input[x] < min) min = input[x];
    if( input[x] > max) max = input[x];
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-11T11:11:01.780

```
// 1\. iterate through object values and get them
// 2\. sort that array of values ascending or descending and take first, 
//    which is min or max accordingly
let obj = { 'a': 4, 'b': 0.5, 'c': 0.35, 'd': 5 }
let min = Object.values(obj).sort((prev, next) => prev - next)[0] // 0.35
let max = Object.values(obj).sort((prev, next) => next - prev)[0] // 5 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-17T18:03:40.673

你也可以试试`Object.values`

```
const points = { Neel: 100, Veer: 89, Shubham: 78, Vikash: 67 };

const vals = Object.values(points);
const max = Math.max(...vals);
const min = Math.min(...vals);
console.log(max);
console.log(min);
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-09T14:49:55.627

使用[lodash 库](https://lodash.com)你可以写得更短

```
_({ "a":4, "b":0.5 , "c":0.35, "d":5 }).values().max(); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-12-07T01:08:08.517

这是一个解决方案，它允许您也返回密钥并且只执行一个循环。它对对象的条目进行排序（按 val），然后返回第一个和最后一个。

此外，它返回可以替换现有对象的排序对象，以便将来的排序会更快，因为它已经是半排序的 = 比 O(n) 更好。*重要的是要注意对象在 ES6 中保持它们的顺序。*

```
const maxMinVal = (obj) => {
  const sortedEntriesByVal = Object.entries(obj).sort(([, v1], [, v2]) => v1 - v2);

  return {
    min: sortedEntriesByVal[0],
    max: sortedEntriesByVal[sortedEntriesByVal.length - 1],
    sortedObjByVal: sortedEntriesByVal.reduce((r, [k, v]) => ({ ...r, [k]: v }), {}),
  };
};

const obj = {
  a: 4, b: 0.5, c: 0.35, d: 5
};

console.log(maxMinVal(obj));
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-01-16T09:53:28.353

```
var newObj = { a: 4, b: 0.5 , c: 0.35, d: 5 };
var maxValue = Math.max(...Object.values(newObj))
var minValue = Math.min(...Object.values(newObj)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-11-17T07:02:50.613

你可以使用一个`reduce()`函数。

例子：

```
let obj = { "a": 4, "b": 0.5, "c": 0.35, "d": 5 }

let max = Object.entries(obj).reduce((max, entry) => entry[1] >= max[1] ? entry : max, [0, -Infinity])
let min = Object.entries(obj).reduce((min, entry) => entry[1] <= min[1] ? entry : min, [0, +Infinity])

console.log(max) // ["d", 5]
console.log(min) // ["c", 0.35] 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-06-25T21:07:19.433

对于不同深度的嵌套结构，即`{node: {leaf: 4}, leaf: 1}`，这将起作用（使用 lodash 或下划线）：

```
function getMaxValue(d){
    if(typeof d === "number") {
        return d;
    } else if(typeof d === "object") {
        return _.max(_.map(_.keys(d), function(key) {
            return getMaxValue(d[key]);
        }));
    } else {
        return false;
    }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-12-22T13:06:01.543

```
// Sorted
let Sorted = Object.entries({ "a":4, "b":0.5 , "c":0.35, "d":5 }).sort((prev, next) => prev[1] - next[1])
>> [ [ 'c', 0.35 ], [ 'b', 0.5 ], [ 'a', 4 ], [ 'd', 5 ] ]

//Min:
Sorted.shift()
>> [ 'c', 0.35 ]

// Max:
Sorted.pop()
>> [ 'd', 5 ] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-26T12:46:25.500

这对我有用：

```
var object = { a: 4, b: 0.5 , c: 0.35, d: 5 };
// Take all value from the object into list
var valueList = $.map(object,function(v){
     return v;
});
var max = valueList.reduce(function(a, b) { return Math.max(a, b); });
var min = valueList.reduce(function(a, b) { return Math.min(a, b); }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-23T08:16:42.350

获取最大值和最小值的密钥

```
var list = { "a":4, "b":0.5 , "c":0.35, "d":5 };
var keys = Object.keys(list);
var min = keys[0]; // ignoring case of empty list for conciseness
var max = keys[0];
var i;

for (i = 1; i < keys.length; i++) {
    var value = keys[i];
    if (list[value] < list[min]) min = value;
    if (list[value] > list[max]) max = value;
}

console.log(min, '-----', max)
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-05T11:01:09.107

```
 obj.prototype.getMaxinObjArr = function (arr,propName) {
        var _arr = arr.map(obj => obj[propName]);
        return Math.max(..._arr);
    } 
```

# java - JSoup 能做到这一点吗？

> ID：11142887
> 
> 赞同：-1
> 
> 时间：2012-06-21T16:46:00.303
> 
> 标签：java, jsoup, web-crawler

我想收集域名（爬取）。我编写了一个简单的 Java 应用程序，它可以读取 HTML 页面并将代码保存在文本文件中。现在，我想解析此文本以收集所有域名而不会重复。但是我需要没有“ [http://www](http://www) .”的域名，只需要 domainname.topleveldmian 或 dmianname.subdomain.topleveldomain 或任何数量的子域（然后，需要以相同的方式提取收集的链接并收集它们内部的链接，直到我达到一定数量的链接，比如 100）。

我在之前的帖子中询问过这个问题[https://stackoverflow.com/questions/11113568/simple-efficient-java-web-crawler-to-extract-hostnames](https://stackoverflow.com/questions/11113568/simple-efficient-java-web-crawler-to-extract-hostnames)并进行了搜索。JSoup 似乎是一个不错的解决方案，但我之前没有使用过 JSoup，所以在深入研究它之前。我只想问：它是否实现了我想做的事情？欢迎任何其他以简单方式实现我的简单爬行的建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-21T16:58:13.157

> jsoup 是一个用于处理真实世界 HTML 的 Java 库。它提供了一个非常方便的 API 用于提取和操作数据，使用最好的 DOM、CSS 和类似 jquery 的方法

所以**是**的，你可以连接到一个网站，提取它的 html 并用 jsoup 解析它。

提取*顶级域*的逻辑是“你的部分”，你需要自己编写代码逻辑。

* * *

查看文档以获取更多选项...

[使用选择器语法查找元素](http://jsoup.org/cookbook/extracting-data/selector-syntax)

[使用 DOM 方法导航文档](http://jsoup.org/cookbook/extracting-data/dom-navigation)

# python - 动态混合单列和多列样式并平衡多列

> ID：11142890
> 
> 赞同：1
> 
> 时间：2012-06-21T16:46:05.793
> 
> 标签：python, pdf-generation, reportlab

我正在使用 ReportLab 和 Python 2.7 排版一个大型文档（>1,000 页）。我计划将它排版为每页两列，并且已经设法或多或少地工作。

```
def frameMargins(doc, nc, id, cs = 5 * mm):
""" Calculates the frame margins for the page-geometry specified in doc
if it is to have nc columns with a column separator of cs between each.
Return value is two lists (odd and even) with nc sets of dimensions in each """

odd =  []
even = []

# First work out the column-width

bo = BINDINGOFFSET
pw = doc.pagesize[0]
ph = doc.pagesize[1]
lm = doc.leftMargin
rm = doc.rightMargin
bm = doc.bottomMargin
tm = doc.topMargin
dh = doc.height

cw = (pw - lm - bo - rm - cs * (nc - 1))/float(nc)

for c in range(nc):
    odd_left =  bo + lm + c * (cw + cs)
    odd_right = cw
    odd.append(Frame(odd_left, bm, odd_right, dh, id="{}-oc-{}".format(id.replace(" ", "").lower(), c)))
    even_left = lm + c * (cw + cs)
    even_right = cw
    even.append(Frame(even_left, bm, even_right, dh, id="{}-ec-{}".format(id.replace(" ", "").lower(), c)))
return odd, even

def WritePDF(files):

story = []
styles = getSampleStyleSheet()

doc = BaseDocTemplate("PolariBible.pdf", pagesize=A4, title = "Polari Bible 5th Edition",
                      leftMargin = 25 * mm, rightMargin = 25 * mm, 
                      topMargin = 25 * mm, bottomMargin = 25 * mm)

colOddFrames, colEvenFrames = frameMargins(doc, COLUMNS, "col")
titleOddFrames, titleEvenFrames = frameMargins(doc, 1, "title")

doc.addPageTemplates([PageTemplate(id='OddTitle',  frames=titleOddFrames,  onPage=oddFooter),
                      PageTemplate(id='EvenTitle', frames=titleEvenFrames, onPage=evenFooter),
                      PageTemplate(id='OddCols',   frames=colOddFrames,    onPage=oddFooter),
                      PageTemplate(id='EvenCols',  frames=colEvenFrames,   onPage=evenFooter)])

Title=CreateStyle("Title", "Times-Roman", 36, 100, 100, TA_CENTER)
Subtitle=CreateStyle("Subtitle", "Times-Italic", 24, 0, 0, TA_CENTER)
H1=CreateStyle("H1", "Times-Roman", 16, 0, 10, TA_CENTER)
H2=CreateStyle("H2", "Times-Roman", 14, 10, 7, TA_LEFT)
H3=CreateStyle("H3", "Times-Roman", 12, 10, 5, TA_LEFT)
Normal=CreateStyle("Normal", "Times-Roman", 10, 0, 1, TA_JUSTIFY)
story.append(Paragraph(" ", Normal))
story.append(Paragraph("The Polari Bible", Title))
story.append(Paragraph("5th Edition", Subtitle))
story.append(NextPageTemplate(['EvenCols','OddCols']))
story.append(PageBreak())
pre = re.compile("<polari><from>.*?</from><to>(.*?)</to></polari>")
for f in files:
    print("Processing {}".format(f))
    try:
        o = open(f, "rb")
    except IOError:
        print("Can't open {} for reading.".format(f))
    else:
        b = pickle.load(o)
        story.append(Spacer(0, 20 * mm))
        story.append(Paragraph(b.title.upper(),H1)) 
        for c in b.chapters:
            story.append(Paragraph("Chapter {}".format(c.index), H2))
            doc.clean_hanging()
            for v in c.verses:
                story.append(Paragraph(v, Normal))

doc.build(story) 
```

但是，我有两个（相关的）问题似乎无法解决。

1.  我想让 H1 标题在页面中居中。所以本质上是动态地插入一个标题，它跨越两列，并让普通文本围绕它流动。
2.  为此，我还需要“平衡” H1 之前的列

所以像：

```
Column 1 Normal      Column 2 Normal
text. Column 1       text. Column 2
normal text.         normal text.
Column 1 Normal      Column 2 Normal
text. Column 1       text. Column 2
normal text.         normal text.

HEADING 1 TEXT WHICH SPANS BOTH COLUMNS

Column 1 Normal      Column 2 Normal
text. Column 1       text. Column 2
normal text.         normal text.
Column 1 Normal      Column 2 Normal
text. Column 1       text. Column 2
normal text.         normal text. 
```

有什么建议么？

# java - 时间复杂度分析

> ID：11142891
> 
> 赞同：-7
> 
> 时间：2012-06-21T16:46:07.400
> 
> 标签：java, performance, time-complexity

抱歉，我没有时间在这里写一篇长篇大论。这是我目前正在做的练习考试中的一个问题，我所有的大学资源都处于离线状态（我知道很棒的大学）。我完全不知道如何开始这个。有人可以带我过去吗？我不是最擅长数学的人。

考虑以下递归方法：

```
public static int triple(int x) {
    if (x == 0) return 0;
    else return add(3, triple(decrement(x)));
} 
```

假设递减方法的最坏情况时间性能是常数，并且加法方法的第二个参数是线性的（即 add(x,y) 的时间可以表示`by+a`为某些常数`b`和`a`），推导出最小`big O`的用 x 来描述三元法的最坏情况时间性能。要导出此方法的复杂性，请确定并扩展前几个方法实例（问题大小）的递归关系，然后推广您的表达式以形成`nth case`. 展示你的作品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:22:33.063

对于特定的 x，`triple`将使用 0、1、2、... x 递归调用。让我们在递归调用中调用这些参数`i`。当参数是`i`时，`add`的第二个参数是`3(i-1)`。这意味着这种`add`调用的成本是线性的`i`。因此，每个递归调用在 的参数中都是线性的`triple`。有`x`这样的调用，所以你得到了算术级数的总和 (0 + 3 + 6 + ...)——这就是 O(n ² ) 时间复杂度。

您可以使用以下代码：

```
public class Test
{
  static int time;
  public static int triple(int x) {
    if (x == 0) return 0;
    else return add(3, triple(decrement(x)));
  }
  private static int add(int i, int j) {
    System.out.println("Spending " + j);
    time += j;
    return i + j;
  }
  private static int decrement(int x) { time++; return x-1; }
  public static void main(String[] args) {
    for (int i = 1; i < 100; i+=10) {
      time = 0;
      System.out.format("triple(%d)=%d; time=%d\n", i, triple(i), time);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:55:44.403

形成一个表格，将 x 的值映射到三元组方法执行的次数。然后形成两者之间的关系。

```
x |  executions |              Executions
-------------------------------------
0  | T(0)                     |  0 A(0)
1  | T(1) + A(3,1) + T(0)     |  3 A(1)
2  | T(2) + + A(3,1) + T(1)   |  6 A(2)
3  | T(3) + A(3,1)            |  9 A(3)

   Time Complexity for T= T(n)+T(n-1)+...+T(n-n)
   Number of add calls is linear O(n)   

   nth term for number of executions
   Un = 3+(n-1)d
      = 3+(n-1)3

   the sum of the an arithmetic series making it O(n^2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T17:01:06.363

首先，计算给定 x 递归调用三元组的频率。像上面建议的那样做一张桌子。这将为您提供广义术语的一部分。

其次，对于三元组的每次执行，您可以拥有的最坏情况时间复杂度是多少？提示，这是由 add() 函数确定的。

然后概括。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T17:25:08.863

好吧，我最终得出它的方式（并感谢所有发布答案的好人让我继续前进）是接受 Jochen 的建议并制定一个快速的复杂性地图，这使一切变得更加简单。

首先，请注意问题规定 add 是 O(n) 时间。

接下来，一个基本的“三重”调用层次结构：

```
n  |  Time complexity:
------------------------------------------
1  | T(1) + (T(0) = 1   )
2  | T(2) + (T(1) = ... )
3  | T(3) + (T(2) = ... ) 
```

显然，一种模式正在出现……

```
n  | Time complexity
-------------------------------------------
n  | T(n) + T(n - 1) 
```

所以看起来 T(n) 的时间复杂度是`n * T`三次`T`调用的时间复杂度。假设调用的增长源来自`add`且`add`的时间复杂度为`O(n)`，则时间复杂度变为`n * n`或`O(n^2)`

谢谢大家，如果我使用了错误的术语或其他什么，请告诉我。

编辑：一些添加已关闭，但仍然是相同的 BigO 表示法。

# amazon-ec2 - 从亚马逊 EC2 EBS 中取消删除文件

> ID：11142896
> 
> 赞同：1
> 
> 时间：2012-06-21T16:46:27.457
> 
> 标签：amazon-ec2

我从附加的亚马逊实例 EBS 卷中意外删除了一堆文件。

*   我关闭了 AMI，
*   分离音量，
*   启动了一个新的 AMI，并将卷附加到新的 AMI
*   使用 extundelete 运行恢复文件。

RECOVERED_FILES 目录中没有恢复任何内容。

我错过了什么吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T20:23:28.267

我要说你搞砸了，除非你最近对 EBS 卷进行了快照。

# ruby-on-rails - 在本地服务器上使用 ActionMailer 时出现 Timeout::Error

> ID：11142897
> 
> 赞同：3
> 
> 时间：2012-06-21T16:46:37.620
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, email, actionmailer

我正在尝试在我的 Rails 应用程序中设置电子邮件操作，并且我想在本地测试邮件功能。我关注[了这个 Railscast](http://railscasts.com/episodes/206-action-mailer-in-rails-3)`Timeout::Error(execution expired)` ，但是每当我尝试发送邮件时，发送邮件都会 引发错误。

**配置/环境/development.rb**

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = true 
```

**配置/初始化程序/setup_mail.rb**

```
ActionMailer::Base.smtp_settings = {
  :address              => 'smtp.gmail.com',
  :port                 => 587,
  :domain               => 'recipes.dev',
  :user_name            => 'myemail@gmail.com',
  :password             => '*******',
  :authentication       => 'plain',
  :enable_starttls_auto => true
} 
```

**邮件程序/user_mailer.rb**

```
class UserMailer < ActionMailer::Base
  default from: "myemail@gmail.com"

  def test_email(user)
    @email = user.email
    @name = user.name
    mail(:to => @email, :subject => 'test e-mail')
  end
end 
```

**控制器/users_controller.rb**

```
UserMailer.test_email(@user).deliver 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T17:25:40.597

尝试将您的 smpt_setting 端 development.rb 设置为：

```
config.action_mailer.smtp_settings = {
  :address              => 'smtp.gmail.com',
  :port                 => 587,
  :domain               => 'recipes.dev',
  :user_name            => 'myemail@gmail.com',
  :password             => '*******',
  :authentication       => 'plain',
  :enable_starttls_auto => true
} 
```

你不需要 setup_mail.rb

请查看[http://guides.rubyonrails.org/action_mailer_basics.html#example-action-mailer-configuration](http://guides.rubyonrails.org/action_mailer_basics.html#example-action-mailer-configuration)

# matlab - 修复 MATLAB 错误——发布时并非所有图表都显示

> ID：11142900
> 
> 赞同：1
> 
> 时间：2012-06-21T16:46:42.987
> 
> 标签：matlab, plot, report, publish

我在 MATLAB 中编写了一些简单的代码，由于某种原因，当我发布它时，它只显示 HTML 和/或 pdf 文件中的最后一个图形。有谁知道如何/为什么会发生这种情况？stackoverflow 不允许我发布我的代码，因此任何有关此错误常见原因的建议将不胜感激。感谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:01:44.717

您在使用 SNAPNOW 吗？[http://www.mathworks.com/help/techdoc/ref/snapnow.html](http://www.mathworks.com/help/techdoc/ref/snapnow.html)

# c# - 带有 CodeContracts 的 MissingFieldException

> ID：11142908
> 
> 赞同：2
> 
> 时间：2012-06-21T16:47:15.560
> 
> 标签：c#, volatile, code-contracts

一旦我为代码合同打开代码重写器，我开始发现以前可以工作的代码存在问题。

我有一个`protected volatile bool`成员字段，它在从我的继承的类中的其他程序集中可见。在我的程序集上启用 ccrewrite 后，对该字段的访问现在会引发 MissingFieldException。

我知道以这种方式公开字段是不好的风格。一旦我更改为公开属性和/或删除易失性标记，问题就会消失。

我目前没有 100% 的代码覆盖率。

我的问题是，我怎样才能仍然依赖代码合同，但让我的代码像以前一样工作？如何找到行为发生变化的所有地方？

代码合同版本 1.4.50327.0

```
Microsoft (R) .NET Contract Rewriter Version 1.4.50327.0 
```

*编辑*代码合同中已经完成了一些工作，但发行说明并不出色。具体来说，目前尚不清楚修复了什么。我引用：

> 发布 1.4.51019.0（2012 年 10 月 19 日）修复了 VS2012 中任务管理器的更多问题。修复了 CCDoc 中的一个错误。其他杂项错误修复。
> 
> 发布 1.4.50910.0（2012 年 9 月 10 日）修复了任务管理器，使其在 VS2012 中正确运行：静态检查器现在在后台运行，绘制曲线，并且合同建议出现在错误列表中。更新了安装程序，以便在安装后不再需要手动运行“devenv /setup”。它现在作为安装的一部分自动完成。（这使得安装需要更长的时间......）修复了*CCDoc*中的几个错误。
> 
> 版本 1.4.50813.1（2012 年 8 月 13 日）错误修复（无处不在！）。性能改进（静态检查器）。精度改进（静态检查器）。修复安装程序和构建文件。
> 
> 发布 1.4.50327.0（2012 年 3 月 27 日）VS2012 支持！（但您需要在安装后手动运行“devenv /setup”！）错误修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:16:41.003

我在内部版本中修复了这个问题。它将出现在 CodeContracts 的下一个版本中。

*编辑* 以下是[代码合同网站](http://research.microsoft.com/en-us/projects/contracts/releasenotes.aspx)的发行说明：

版本 1.5.60502.11（2013 年 5 月 2 日）

*   构建脚本修复以不警告 C/C++ 互操作项目缺少合同参考程序集
*   修复 VB 构造函数提取
*   从合约调用时，正确处理接口合约中的泛型方法。
*   修复非空分析中的拆箱处理（避免空解引用）
*   在静态检查器中更好地处理可空和装箱约束
*   修复在 F12 上显示 setter 合约（转到元数据）
*   更强大的编辑器扩展实现检查
*   减少 ccrewrite 的内存消耗和启动时间
*   在非空分析中处理 MEF 导入属性
*   **保留对重写器中易失性字段的跨程序集访问。**
*   修复构造函数中存在闭包时合同提取器中的错误。
*   修复缩写器方法具有静态通用闭包方法时重写器中的错误。
*   在 4.5 之前的框架版本上支持异步。

# solr - 如何在 Solr 中检测“错误：SCHEMA-INDEX-MISMATCH”？

> ID：11142911
> 
> 赞同：3
> 
> 时间：2012-06-21T16:47:16.817
> 
> 标签：solr

如何在我的索引中找到具有 SCHEMA-INDEX-MISMATCH 的文档？我有很多这样的东西，我通过反复试验找到了它们。我想查询他们。

我得到的结果在一个字段中有“错误：SCHEMA-INDEX-MISMATCH”。一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <result name="response" numFound="1" start="0" maxScore="12.993319">
        <doc>
            <float name="score">12.993319</float>
            <str name="articleId">**ERROR:SCHEMA-INDEX-MISMATCH**,stringValue=555</str>
            <str name="articleType">Knowledge Base</str>
            <str name="description">Moving to another drive Question: How can I ....</str>
            <str name="id">article:555</str>
            <str name="title">Moving to another drive</str>
            <str name="type">article</str>
        </doc>
    </result>
</response> 
```

如果重要的话，我的查询是`http://server/solr/select?q=id:%22article:555%22`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:04:52.733

articleId 的“类型”是什么？

我遇到了日期字段问题，并且由于索引程序的缺陷，我有“错误：SCHEMA-INDEX-MISMATCH”。由于这些值超出了正常日期的范围，因此我能够通过查询找到它们- “不是 myDateFieldType：[0001-01-01T00:00:00Z NOW]”。

如果您能够制作这种类型的查询，根据您的数据类型，您应该能够找到这些值。

# java - 解决 Hibernate 的细微之处

> ID：11142913
> 
> 赞同：2
> 
> 时间：2012-06-21T16:47:22.527
> 
> 标签：java, hibernate

我已经花了几天时间研究 Hibernate，并且有几个关于它的小问题，它们本身并不真正值得混乱 SO，但我认为，总的来说，有助于深入了解 Hibernate 的整体运作方式：

*   `hibernate.cfg.xml`要创建 Hibernate 实体，必须在配置文件**中**添加对它的引用，并将相应的 POJO 注释为`@Entity`. 这感觉非常多余。为什么你可以只使用注解而跳过 XML 条目？
*   Hibernate 似乎对其 API 的参数绑定具有很好的内置支持`Query`，但我看不到`Criteria`API 的此类选项。是否可以使用`Criteria`实例进行参数化：如果可以，如何实现，如果不可以，为什么？
*   我看到许多 L2（2 级）缓存提供程序：EhCache、OSCache、SwarmCache 等。是否可以编写自己的`CacheProvider`，将其放在运行时类路径上并让 Hibernate 使用您自己的本地缓存系统（就像 SLF4J 使用记录器绑定一样） ?

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:55:09.580

1.  因为它会强制 Hibernate 扫描类路径的所有类以发现带注释的类。并且因为您可能在类路径中有一些您不想在应用程序中使用的实体。或者您可能希望在会话工厂中拥有一些实体，而在另一个中拥有一些实体。甚至是两个单独的会话工厂中的同一个实体。

2.  Criteria API 具有直接绑定参数的方法：`Restrictions.eq("someProperty", someValue);`例如。

3.  当然可以编写自己的二级缓存，但您必须配置 Hibernate 才能使用它，就像使用所有其他提供程序一样。删除类路径中的类是不够的。

# ruby-on-rails - Rails 3.2 POST 与 AJAX 创建 MassAssignmentSecurity::Error

> ID：11142920
> 
> 赞同：1
> 
> 时间：2012-06-21T16:47:55.210
> 
> 标签：ruby-on-rails, jquery, ruby-on-rails-3.2

我有点笨，我试图搭载 bokmann 的[rails3_fullcalendar](https://github.com/bokmann/rails3_fullcalendar)在 rails 3.2 中创建一个日历应用程序，但是当我尝试在我的应用程序中创建一个事件时，我收到了这个错误：

```
ActiveModel::MassAssignmentSecurity::Error in EventsController#create

Can't mass-assign protected attributes: title, description, starts_at(1i), starts_at(2i),
starts_at(3i), starts_at(4i), starts_at(5i), ends_at(1i), ends_at(2i), ends_at(3i), ends_at(4i),
ends_at(5i), all_day

{"utf8"=>"✓",
"authenticity_token"=>"bq3ZUXLm4lYbja9FUafbroFF2Zwt8iMw6GWfvoRuPLA=",
"event"=>{"title"=>"sddfsdf",
"description"=>"df",
"starts_at(1i)"=>"2012",
"starts_at(2i)"=>"6",
"commit"=>"Create Event"} 
```

解决方案看起来[应该是这样](https://stackoverflow.com/questions/8857175/doing-ajax-post-in-rails-without-passing-in-the-authenticity-token)，但是将 AUTH_TOKEN 与 AJAX POST（它正在发送）一起传递，但它仍然无法正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:10:13.747

如果你得到这个异常，你应该已经通过了身份验证，所以 Auth_token 不是你的问题。

Rails 从 3.2.3 版本开始默认防止批量分配。您需要在模型中明确允许它们。这就是为什么来自第三方的旧代码会失败。将模型更改为：

```
class Event
  ..
  attr_accessible :title, :description, starts_at ...
end 
```

但是不要将诸如此类的内容包含`user_id`在允许的属性列表中，这样可以防止仅允许更改自己的事件的人重新连接该事件，然后该事件将属于另一个用户。

另请参阅 Rails 指南： [安全指南，质量分配](http://guides.rubyonrails.org/security.html#mass-assignment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:14:56.530

您的具体问题的答案如下，但更好的答案是查看该演示的新版本。由于您正在查看演示，我重新创建了演示，展示了如何在 Rails 3.2 中使用全日历 JavaScript 和 css 作为资产 gem：

[https://github.com/bokmann/fullcalendar_assets](https://github.com/bokmann/fullcalendar_assets)

* * *

最近的某个时候（Rails 3.2？）更改了防止批量分配的默认设置......您现在需要专门允许您想要允许批量分配的属性。

[http://guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

在事件模型中，添加如下所示的一行：

attr_accessible :title, :description, :starts_at, :ends_at, :all_day

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:55:00.033

fullcalendar 应用程序似乎是在`config.active_record.whitelist_attributes = true`成为 rails 默认值之前创建的。

在您的事件模型中，您是否有类似 `attr_accessible :title, :description`等的线？

# xml - RollingFileAppender (Log4net) 不接受 filenamePattern

> ID：11142921
> 
> 赞同：0
> 
> 时间：2012-06-21T16:48:18.837
> 
> 标签：xml, log4net

我希望有 10 个文件，分别称为 Console.1.log、Console.2.log、Console.3.log... 等。

我得到的是：Console.log.1，Console.log.2 ...与我没有设置任何设置时相同...

我试图改变命名空间

```
`<appender name="FileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="${APPDATA}\\product\\Console.log" />
  <appendToFile value="true" />
  <rollingStyle value="Size" />
  <MaxSizeRollBackups value="10" />
  <MaximumFileSize value="1KB" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout" >
      <conversionPattern value="%date{yyyy-MM-dd HH:mm:ss} %-5level %logger %message%newline" />
  </layout>
  <threshold value="DEBUG" />

<rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
    <param name="activeFileName" value="${APPDATA}\\product\\Console.log"/>
    <param name="fileNamePattern" value="${APPDATA}\\product\\Console.${%i}.log"/>
    <param name="maxIndex" value="0"/>
    <param name="minIndex" value="10"/>
</rollingPolicy>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:02:26.583

使用 1.2.11 版本，您可以执行以下操作：

```
<preserveLogFileNameExtension value="true"/> 
```

不过，如果您按日期扮演角色，似乎可能会出现问题（请参阅最后一条评论）： [https ://issues.apache.org/jira/browse/LOG4NET-64](https://issues.apache.org/jira/browse/LOG4NET-64)

# c# - 如何在文本文件中组合 2 个或多个字符串

> ID：11142922
> 
> 赞同：0
> 
> 时间：2012-06-21T16:48:21.313
> 
> 标签：c#, text-files

我一直在尝试找到一种方法来组合单个文本文件中的 2 个字符串。我正在阅读的文本文件具有以下格式：

`String 1
String 2
String 3` ...ETC。示例代码：

```
public static IEnumerable<string> getMeaningfulLines(string filename)
    {
        System.IO.StreamReader file =
          new System.IO.StreamReader(filename);
        while (!file.EndOfStream)
        {

            yield return file.ReadLine();
            yield return file.ReadLine();

            file.ReadLine();
            file.ReadLine();
            file.ReadLine();
            file.ReadLine();
        }
    }

    static void Main(string[] args)
    {

        foreach (string line in getMeaningfulLines(@"C://Log.txt"))
        {

            string teststring = line;

            string[] parts = line.Split(' ', ',', '-', '>', '[', ']');
            StringBuilder builder = new StringBuilder();

            foreach (string h in parts)
            {
                builder.Append(h).Append(" ");

            }

            string result = builder.ToString();
            string cleanedString = System.Text.RegularExpressions.Regex.Replace(result, @"\s+", " ");
            string trimString = cleanedString.Trim();

            trimString = trimString.Remove(trimString.Length - 1);

            //Console.WriteLine(trimString);

            string[] parts2 = trimString.Split(' ');
            string quotedstring = "'" + string.Join("','", parts2) + "'";
            //Console.WriteLine(quotedstring);
            string[] parts3 = quotedstring.Split(' ');
            Console.WriteLine(quotedstring, quotedstring.Length);
            //Console.WriteLine("1) The length of '{0}' is {1}",  quotedstring, quotedstring.Length); 
```

我想将字符串 2 附加到字符串 1 以具有：“String1 String2”。我尝试使用 split 方法并使用字符串生成器附加它们。但是，这不起作用，因为它会按行进行拆分和附加。我也不能用“。” 将它们组合起来，因为它们没有存储在变量中。有谁知道如何实现这个或一个例子？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T16:53:45.890

> 我正在阅读的文本文件具有以下格式：
> String 1
> String 2
> String 3 ...等。我想将字符串 2 附加到字符串 1 以具有：“String1 String2”。

如果您想在文件中附加每一行，并在它们之间添加一个空格，请执行以下操作：

```
string[] lines = File.ReadAllLines("my_file.txt");
string result = string.Join(" ", lines); 
```

如果文件的行有结构，那么你可以定义一个类来保存这个结构，例如：

```
class Company
{
  private string name;
  private int id; 
  private string city;
  private string state;

  public string Name { get { return name; } }
  public int Id  { get { return id; } } 
  public string City { get { return city; } }
  public string State { get { return state; } }

  public Company(string name, int id, string city, string state) 
  {
    this.name = name;
    this.id = id;
    this.city = city;
    this.state = state; 
  }

  public override string ToString() 
  {
    // Create a formatted string from the fields here, for example:
    return name + " " + id + " " + city + " " + state;
  }

  public static Company FromLine(string line)
  {
    // Extract the fields from a line, and post-process the fields here, for example:
    string[] tokens = line.Split(separators);
    string name = tokens[0].Trim();
    int id = Convert.ToInt32(tokens[1]);
    string city = tokens[2];
    string state = tokens[3];
    return new Company(name, id, city, state);
  }
} 
```

此类可用于提取每一行的字段，对其进行格式化，并附加这些格式化的字符串：

```
string[] lines = File.ReadAllLines("my_file.txt");
List<Company> companies = new List<Company>();
foreach (string line in lines)
  companies.Add(Company.FromLine(line));
string result = string.Join(" ", companies); 
```

您甚至可以指定要附加的项目，只需修改最后一行，例如：

```
string result = string.Join(" ", companies.Where(company => company.Id > 10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:54:17.227

以下应该做你想要的，但根据文件的大小等可能不合适，这就是为什么为这类事情提供上下文很重要的原因。这是我能想到的最快的方法。

```
string[] lines = File.ReadAllLines(filePath);
string joinedString = String.Format("{0} {1}", lines[0], lines[1]); 
```

# perl - 如何在 Perl 中停止输入？

> ID：11142923
> 
> 赞同：10
> 
> 时间：2012-06-21T16:48:28.587
> 
> 标签：perl, input

我正在做一个反射游戏。这是输出 -

```
__________________________________________________________________________
Reflex game initiated. Press ENTER to begin the game, and then press ENTER 
after the asterisks are printed to measure your reflexes!.

*************************

Your result: 0.285606 seconds.
logout

[Process completed]
__________________________________________________________________________ 
```

不过有一个小问题 - 在您按下回车键开始游戏之后和打印星星之前有 0-10 秒（基于随机变量）。在此期间，如果玩家按下 ENTER，则会记录为他们的反射时间。所以我需要一种方法来阻止我的代码在打印星星之前读取他们的 ENTER 按钮。编码 -

```
#!/usr/bin/perl

use Time::HiRes qw(sleep);
use Time::HiRes qw(gettimeofday);

#random delay variable
$random_number = rand();

print "Reflex game initiated. Press ENTER to begin the game, and then press ENTER after         the asterisks are printed to measure your reflexes!.\n";

#begin button
$begin = <>;

#waits x milliseconds
sleep(10*$random_number);

#pre-game
$start = [ Time::HiRes::gettimeofday() ];

print "\n****************************\n";

#user presses enter
$stop = <>;

#post game
$elapsed = Time::HiRes::tv_interval($start);

#delay time print
print "Your result: ".$elapsed." seconds.\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T16:55:00.000

重复[CanSpice](https://stackoverflow.com/users/424509/canspice)的[原始答案](https://stackoverflow.com/a/7603502/1440715)：

看起来[Term::ReadKey](http://p3rl.org/Term::ReadKey)可能会有所帮助。

```
#!perl

use strict;
use warnings;
use 5.010;

use Term::ReadKey;

say "I'm starting to sleep...";
ReadMode 2;
sleep(10);
ReadMode 3;
my $key;
while( defined( $key = ReadKey(-1) ) ) {}
ReadMode 0;
say "Enter something:";
chomp( my $input = <STDIN> );
say "You entered '$input'"; 
```

这是发生的事情：

*   `ReadMode 2`表示“将输入模式置于常规模式但关闭回显”。这意味着当您在计算昂贵的代码中时用户所做的任何键盘敲击都不会回显到屏幕上。它仍然会进入`STDIN`'s 缓冲区，所以...
*   `ReadMode 3`变成`STDIN`cbreak 模式，这意味着`STDIN`每次按键后都会刷新。这就是为什么...
*   `while(defined($key = ReadKey(-1))) {}`发生。这将清除用户在计算昂贵的代码期间输入的字符。然后...
*   `ReadMode 0`resets `STDIN`，您可以`STDIN`像用户没有敲击键盘一样阅读。

当我运行此代码并在 期间敲击键盘`sleep(10)`，然后在提示后输入一些其他文本时，它只会打印出我在提示出现后键入的文本。

严格来说，`ReadMode 2`不需要，但我把它放在那里，这样当用户敲击键盘时屏幕不会被文本弄得乱七八糟。

# desktop - 病毒可以通过远程桌面传播吗？

> ID：11142926
> 
> 赞同：1
> 
> 时间：2012-06-21T16:48:41.960
> 
> 标签：desktop, virus

我正在使用 Windows XP 通过远程桌面访问另一个 Windows XP。我怀疑远程的有病毒。病毒会不会影响我的主机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:52:45.890

如果您没有使用具有登录脚本来映射共享驱动器或在两者之间传输文件的帐户，我怀疑您会遇到问题。

# html - 使用 docx4j 将 docx 中的公式/方程式转换为 html

> ID：11142928
> 
> 赞同：0
> 
> 时间：2012-06-21T16:48:52.287
> 
> 标签：html, docx, equation, docx4j

我正在尝试将包含方程式的 docx 转换为 Android 上的。我遇到了很棒的 docx4j，并测试了以下示例（HtmlExporterNonXSTL）： [https://github.com/plutext/docx4j/blob/android/src/main/java/org/docx4j/convert/out/html/HtmlExporterNonXSLT。爪哇](https://github.com/plutext/docx4j/blob/android/src/main/java/org/docx4j/convert/out/html/HtmlExporterNonXSLT.java)

但是我注意到它不能很好地处理方程 - 如果某个符号或数字有一些权力和/或索引，它们的位置总是在中间，例如 `k_{n+1}^2 (latex format)`

显示为：

```
kn+12 (with 'n+12' having correct smaller font but they are both vertically aligned) 
```

有没有办法调整 CSS 来处理权力和指数？（完整的公式转换会更好，但我想这并不容易）。我是 docx4j 的新手，但看起来有点像 `handlePPr()`

`HtmlExporterNonXSLT`在示例中需要修改方法。在我深入研究它之前，我想问是否有可能完成它（任何方式来获得运行的偏移属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T23:29:10.210

**披露：我是 docx4j 项目负责人**

欢迎您修改 HtmlExporterNonXSLT 以修复您的特定示例，但正如您所说，完整的公式转换会更好。

以下是关于该主题的三个先前帖子的链接（最新的优先）：

*   [math-equations-and-docx-to-html-conversion-not-working](http://www.docx4java.org/forums/docx-java-f6/math-equations-and-docx-to-html-conversion-not-working-t966.html)
*   [需要处理乳胶方程](http://www.docx4java.org/forums/docx-java-f6/need-to-handle-latex-equation-t293.html)
*   [数学表达式问题](http://www.docx4java.org/forums/docx-java-f6/math-expression-issue-t229.html)

# javascript - jqGrid - 是否可以在初始化后设置 onSortCol？

> ID：11142933
> 
> 赞同：2
> 
> 时间：2012-06-21T16:49:06.757
> 
> 标签：javascript, jquery, jqgrid

我查看了[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)和其他一些 SO 问题，几乎唯一记录在案的处理方式`onSortCol`是在初始化网格时，即：

```
var myGrid = $("#gridid").jqGrid({
   //...
   onSortCol: function(index, iCol, sortorder) { ... }
}); 
```

在网格已经初始化之后，有没有办法通过引用绑定到`onSortCol`事件？`myGrid`

就像是：

```
myGrid.onSortCol(function (index, iCol, sortorder)
   {
      //...
   }
); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T17:13:46.677

我找到了一种解决方案。这似乎运作良好：

```
 myGrid.setGridParam({
     onSortCol: function(index, iCol, sortorder)
     {
         alert("Hello");
     }
 }); 
```

# android - 计算 LruCache 的最佳大小

> ID：11142939
> 
> 赞同：0
> 
> 时间：2012-06-21T16:49:38.637
> 
> 标签：android

有没有一个公式可以用来计算 a 的大小`LruCache`？我可以根据`Runtime.getRuntime()`.

我正在存储位图文件 - 文件数据，而不是解压缩的位图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T03:30:20.307

[这是缓存位图](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)指南的摘录：

```
// Get memory class of this device, exceeding this amount will throw an
// OutOfMemory exception.
final int memClass = ((ActivityManager) context.getSystemService(
        Context.ACTIVITY_SERVICE)).getMemoryClass();

// Use 1/8th of the available memory for this memory cache.
final int cacheSize = 1024 * 1024 * memClass / 8; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:05:30.953

您正在以错误的方式解决您的问题。与其尝试使缓存适合可用内存，不如让系统在内存下降时从缓存中删除内容。这就是[软引用](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ref/SoftReference.html)的用途。

有一些可用的 Java 实现基于软引用（如 Googles [MapMaker](http://google-collections.googlecode.com/svn/trunk/javadoc/index.html?com/google/common/collect/MapMaker.html) ）的缓存，但我不确定这些库带来了多少足迹，以及您是否更适合在 Android 上自制实现。

# .net - 当 DatePicker/ListView 通过选项卡获得焦点时突出显示关联的标签

> ID：11142942
> 
> 赞同：1
> 
> 时间：2012-06-21T16:49:53.437
> 
> 标签：.net, wpf, xaml, label

当我在 WPF 应用程序中从一个字段切换到另一个字段时，我会突出显示与每个字段关联的标签。这适用于 ComboBox 和 TextBox 项目，但不适用于 ListViews 或 DatePickers。我在标签标签的绑定部分使用了 IsFocused 路径部分（参见下面的代码）。

```
<Label
    Style="{StaticResource styleLabelTextBlockLeft}"
    Target="{Binding ElementName=dpBrthDt}"
    Tag="{Binding ElementName=dpBrthDt, Path=(IsFocused)}"
>
    <TextBlock 
         TextWrapping="Wrap">When were you born?
    </TextBlock>                                  
</Label>
<DatePicker
    x:Name="dpBrthDt"
    HorizontalAlignment="Left"
    SelectedDate="{Binding
        Path=CurrentEntity.BrthDt, 
        Mode=TwoWay, 
        ValidatesOnDataErrors=True, 
        NotifyOnValidationError=True
    }"
    Width="115"
/> 
```

任何想法为什么引用 IsFocused 的标记的绑定部分适用于 TextBoxes/ComboBoxes 而不是 DatePickers/ListViews？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:09:06.947

可能是因为`ListViews`其中`DatePickers`包含多个元素，所以`IsFocused`元素是控件内部的东西，而不是实际的控件本身。

使用该属性`IsKeyboardFocusWithin`而不是`IsFocused`它应该可以工作

# wpf - 如何关闭包含框架、NavigationService 和计时器的窗口

> ID：11142943
> 
> 赞同：0
> 
> 时间：2012-06-21T16:49:53.873
> 
> 标签：wpf, vb.net, window

在我的项目中，我有一个打开第二个窗口的 MainWindow。在第二个窗口内有一个框架，我在框架内启动了一个导航服务。同样在第二个窗口中，我有一个 KeyDown 方法，当用户按下 Escape 键时调用 Me.Close。无论如何，当第二个窗口关闭导航服务中的一个页面内的 System.Windows.Threading.DispatcherTimer() 时，它并没有结束。关于如何关闭第二个窗口并终止导航服务中的 DispatcherTimer 的任何想法？

谢谢迈克

ps 如果有人想看看我有什么，我可以提供源代码...

* * *

（嘿 EkoostikMartin - 这是对您的评论的跟进..）

所以我在这方面取得了一些进展。我已经添加：

```
 AddHandler Me.KeyDown, AddressOf Page_KeyDown
 AddHandler Me.PreviewKeyDown, AddressOf Page_PreviewKeyDown 
```

到有计时器的页面。在页面内部，我定义了两种方法，例如：

```
 Private Sub Page_KeyDown(sender As Object, e As KeyEventArgs)

    If e.Key = Key.Escape Then
        dTimer.Stop()
        MessageBox.Show("Exit Page")
    End If

End Sub

Private Sub Page_PreviewKeyDown(sender As Object, e As KeyEventArgs)

    If e.Key = Key.Escape Then
            dTimer.Stop()
            MessageBox.Show("Exit Page")
        End If
End Sub 
```

第二个窗口有这个：

```
 Private Sub Window_KeyDown(sender As System.Object, e As System.Windows.Input.KeyEventArgs)

    'Escape Key Exits Program
    If e.Key = Key.Escape Then
        Me.Close()
    End If

End Sub 
```

因此，当我在导航服务中并使用计时器导航到页面并按“Esc”时，我收到消息“退出页面”，然后窗口关闭。这很好！

（我认为我不需要 KeyDown 和 PreviewKeyDown。当我按下“Esc”时，我实际上得到了两个“退出页面”弹出窗口）

但是有一个问题：除非我将焦点移动到文本框或组合框，否则页面似乎没有获得 KeyDown 事件，如果我不这样做，按下“Esc”键会调用第二个窗口的 Window_KeyDown 而不是页面的 KeyDown 事件，这意味着页面上的计时器即使在第二个窗口关闭后也不会停止。有谁知道在页面加载时获取页面焦点的方法，以便我可以在不手动将焦点更改为页面上的控件的情况下获取 KeyDown 事件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:27:58.837

好的 - 我终于通过解决方法解决了这种情况。在我的第二个窗口中，我创建了一个 DispatcherTimer 类型的列表：

```
Public clndTimer As New List(Of System.Windows.Threading.DispatcherTimer) 
```

我可以从导航服务内的页面访问此列表。这是页面中的代码：

```
Dim dTimer As New DispatcherTimer()

dTimer.Start()

Dim wSecondWindow As New SecondWindow

wSecondWindow = Window.GetWindow(Me)

If wSecondWindow IsNot Nothing Then
    wSecondWindow.clndTimer.Add(dTimer)
End If 
```

然后我在第二个窗口中捕获关键事件。这是第二个窗口中的方法：

```
 Private Sub Window_KeyDown(sender As System.Object, e As System.Windows.Input.KeyEventArgs)

    'Escape Key Exits Program
    If e.Key = Key.Escape Then

        For Each dt In clndTimer
            dt.Stop()
        Next

        Me.Close()
    End If

End Sub 
```

这样做我不需要 Page_KeyDown 或我的 Page 中的 PreviewKeyDown 方法，这很好，因为它们的行为不可靠。（见上面的答案）

所以你怎么看？我不完全确定获得第二个窗口的方式或如何在页面中检查它是否为空，但否则这似乎是有道理的。

谢谢！

# android - 只需检索 xml 文件的第一个结果

> ID：11142948
> 
> 赞同：0
> 
> 时间：2012-06-21T16:50:08.983
> 
> 标签：android, xml-parsing, sax

我正在尝试检索搜索的第一个结果。搜索返回一个 xml 文件，我正在使用 sax 解析器处理该 xml。事实上，我想解析 xml 文件，并在处理完该搜索的第一个结果后停止。

即：我想解析这个文件： http://musicbrainz.org/ws/2/release?query=barcode: [606949062927](http://musicbrainz.org/ws/2/release?query=barcode:606949062927)并检索第一个结果（来自 Eminem 的专辑）。但是当我使用我的代码时，我存储了我不想要的最后一个结果（Daniel Swain 的专辑）。因此，如果我可以在第一个结果之后停止解析，这会好很多（耗时更少）。

我认为这可以通过设置一个 boolean`firstResult`来实现，并在我完成处理第一个结果时将其设置为 true，但我发现它真的很脏。你认为还有另一种方法吗？

这是我的代码的一部分：

```
public DataMusic parseBarcode(InputStream is) {

    final DataMusic resultAlbum = new DataMusic();

    RootElement root = new RootElement(ATOM_NAMESPACE,"metadata");
    Element releaseList=root.getChild(ATOM_NAMESPACE,"release-list");
    Element release = releaseList.getChild(ATOM_NAMESPACE,"release");
    Element title = release.getChild(ATOM_NAMESPACE,"title");
    Element artistCredit = release.getChild(ATOM_NAMESPACE,"artist-credit");
    Element nameCredit = artistCredit.getChild(ATOM_NAMESPACE,"name-credit");
    Element artist = nameCredit.getChild(ATOM_NAMESPACE,"artist");
    Element artistName = artist.getChild(ATOM_NAMESPACE, "name");
    releaseList.setStartElementListener(new StartElementListener() {
        @Override
        public void start(Attributes attributes) {
            if(attributes.getValue("count").equals(null) || attributes.getValue("count").equals("") || attributes.getValue("count").equals("0")) {
                resultAlbum.setMBId(null);
                resultAlbum.setAlbumName(null);
                resultAlbum.setArtistName(null);
                Log.w(TAG_MB, "Album was not found on MB. count=" + attributes.getValue("count") +".");
            }

        }
    });
    release.setStartElementListener(new StartElementListener() {
        @Override
        public void start(Attributes attributes) {
            resultAlbum.setMBId(attributes.getValue("id"));
            Log.v(TAG_MB, "Album found with id=" + attributes.getValue("id"));
        }

    });
    title.setEndTextElementListener(new EndTextElementListener() {
        @Override
        public void end(String body) {
            Log.v(TAG_MB, "Album name set to " + body);
            resultAlbum.setAlbumName(body);
        }

    });
    artistName.setEndTextElementListener(new EndTextElementListener() {
        @Override
        public void end(String body) {
            Log.v(TAG_MB, "Album artist name set to " + body);
            resultAlbum.setArtistName(body);
        }           
    });
    try {
        Log.v(TAG_MB, "Starting parsing data...");
        Xml.parse(is, Xml.Encoding.UTF_8, root.getContentHandler());
        Log.v(TAG_MB, "Finished parsing. Returning album with MBID=" + resultAlbum.getMBId() + " and name=" + resultAlbum.getAlbumName()) ;
        return resultAlbum; 
    } catch (SAXException e) {
        Log.e(TAG_MB + "_SAXException", "SAXException with MusicBrainz");
        Log.e(LOGCAT_TAG + "_SAXException",e.getMessage());
    } catch (IOException e) {
        Log.w(TAG_MB+ "_IOException", "The HTTP Request wasn't good. Either 403 error, or the album wasn't found on LASTFM");
        Log.w(LOGCAT_TAG+ "_IOException", "" + e.getMessage(), e);
    }
    return null; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:51:03.540

我想唯一比拥有布尔值更好的`firstResult`是拥有一个`DataMusic`对象实例。`DataMusic`您可以在函数顶部对应用程序范围的单个实例对象进行空检查。如果您找到它，`null`您可以确定 XML 的解析是第一次发生，您可以继续初始化并设置对象的值。下次当您检查并发现 的单个实例对象`DataMusic`不为空时，您可能会得出结论，XML 已被解析并已设置值。

希望这个解释有所帮助。

# actionscript-3 - 拖动影片剪辑 as3

> ID：11142949
> 
> 赞同：0
> 
> 时间：2012-06-21T16:50:10.550
> 
> 标签：actionscript-3, flash, actionscript, drag

我有一个 Movieclip，它是另一个 Movieclip 的子级。我将 startDrag() 和 stopDrag() 与第一个（父）影片剪辑一起使用，但嵌套的影片剪辑不移动。为什么？

## 舞台相关代码：

```
var main:rt = new rt(); // rt being a class in my library, which extends MovieClip object.
addChild(main);

stage.addEventListener(MouseEvent.MOUSE_DOWN, stage_mousedownHandler);
stage.addEventListener(MouseEvent.MOUSE_UP, stage_mouseupHandler);

function stage_mousedownHandler(event_object:Event) {
    main.startDrag();       
}

function stage_mouseupHandler(event_object:Event) {
    main.stopDrag();
} 
```

rt的构造函数代码：

```
public function rt() {

   var bmp_bar:Bitmap;
   var br_male:Bar_male; // Bar_male is a Bitmap in my library. (AS Linkage)

   bmp_bar = new Bitmap(br_male);
   this.addChild(bmp_bar);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T17:42:33.133

制作了这个简单的程序进行测试，它在 Flash Develop 中按预期工作，当我在舞台上任何位置拖动主精灵并移动子位图时，都会有一个主精灵和一个子位图。

所以我猜你的 Flash Professional 和链接工作流程中发生了一些事情。确保触发鼠标事件处理程序放置一些断点并进行调试。

```
package  
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.geom.Rectangle;

    public class Test extends Sprite
    {
        private var sp:Sprite = new Sprite();

        public function Test() 
        {
            addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
        }

        private function onAddedToStage(e:Event):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);

            var bmpData:BitmapData = new BitmapData(100, 100,false,0x000000);
            bmpData.fillRect(new Rectangle(0, 0, 100, 100), 0xff0000);

            var bmp:Bitmap = new Bitmap(bmpData);

            sp.addChild(bmp);

            addChild(sp);

            stage.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
            stage.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
        }

        private function onMouseUp(e:MouseEvent):void 
        {
            sp.stopDrag();
        }

        private function onMouseDown(e:MouseEvent):void 
        {
            sp.startDrag();
        }

    }

} 
```

# c++ - 如何保护 linux 中的堆内存？

> ID：11142951
> 
> 赞同：7
> 
> 时间：2012-06-21T16:50:16.733
> 
> 标签：c++, linux, memory-management

我想让一大堆堆内存只读。为此，我已经尝试过`memalign()`使用`mprotect()`。但是从 memalignment 我能得到什么，memalign 将内存分配到进程堆之外。

我想将堆的某些部分设为只读。有什么帮助吗？

`malloc()->mmap()->mprotect()`一个假设的想法，但不确定这是否有帮助......上面有任何示例代码吗？

我需要保护堆内的内存地址。使用 malloc() 我得到大约 0x10012008 的地址，而使用 mmap() 它是 0xf7ec9000。我的目的是使堆内存的一部分只读以捕获任何可能试图穿过该堆的践踏者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T17:06:45.717

是的，mmap 和 mprotect 是正确的功能。我不明白你当前的方法有什么问题，即，你的意思是“为此我已经尝试使用 memalign() 和 mprotect()。但是从 memalignment 我能得到什么，memalign 从进程堆中分配内存。”

下面是一个如何创建写保护内存区域的示例：

```
#include <fcntl.h>  
#include <signal.h>
#include <stdio.h>
#include <string.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

static int alloc_size;
static char* memory;

void segv_handler (int signal_number)  {
 printf ("memory accessed!\n");
 mprotect (memory, alloc_size, PROT_READ | PROT_WRITE);
} 

int main () {
 int fd;
 struct sigaction sa;

 /* Install segv_handler as the handler for SIGSEGV. */
 memset (&sa, 0, sizeof (sa));
  sa.sa_handler = &segv_handler;
 sigaction (SIGSEGV, &sa, NULL);

 /* Allocate one page of memory by mapping /dev/zero. Map the memory
 as write-only, initially. */
  alloc_size = getpagesize ();
 fd = open ("/dev/zero", O_RDONLY);
  memory = mmap (NULL, alloc_size, PROT_WRITE, MAP_PRIVATE, fd, 0);
  close (fd);
  /* Write to the page to obtain a private copy. */
  memory[0] = 0;
 /* Make the memory unwritable. */
  mprotect (memory, alloc_size, PROT_NONE);

 /* Write to the allocated memory region. */
 memory[0] = 1;

  /* All done; unmap the memory. */
 printf ("all done\n");
 munmap (memory, alloc_size);
 return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T17:16:17.533

您应该`mmap()`直接使用并完全丢弃`malloc()`。而且，根据您的需要，您可能根本不需要`mprotect()`：

```
ptr = mmap(NULL, length, PROT_READ, MAP_PRIVATE | MAP_ANONYMOUS, 0, 0); 
```

在最近的内核和 libc 实现中，这将使用指定的保护模式分配请求的内存量 - 在这种情况下，分配的内存区域只能读取，但不能写入。如果您只需要一堆零页，那就可以了。否则，生成的区域将正确对齐，您可以`mprotect()`在短时间内以受控方式取消保护它......

# android - 查询参数是否影响 ContentResolver notifyChange

> ID：11142961
> 
> 赞同：3
> 
> 时间：2012-06-21T16:50:52.493
> 
> 标签：android, cursor, android-contentprovider, android-loadermanager

我正在使用我的查询参数`ContentProvider`，允许我在请求来自同步适配器时通知它，以便它可以执行诸如确保不触发同步到网络之类的事情。我正在使用 a`CursorLoader`将`LoaderManager`a 附加`Cursor`到 a`CursorAdapter`中`ListView`- 基础知识。正在提供的数据库通过 Sync Adapter 进行更新，因此通知将使用 Sync Adapter 使用的 URI（带有附加查询参数的那个）。当我在重置加载程序之前让同步适配器完成时，我会在 中获得适当的数据`ListView`，但是如果我在某些数据仍在同步时尝试重置加载程序，我会得到当时数据库中的内容并且没有通知数据下载完成后重置。

我还没有找到任何关于查询参数是否会影响谁收到通知的答案`ContentResolver.notifyChange(Uri, ContentObserver, boolean)`。所以我正在尝试解决这个问题，但如果有人能在我弄清楚之前回答这个问题，那将不胜感激。需要明确的`ContentProvider`是，`cursor.setNotificationUri(getContext().getContentResolver(), uri)`当请求者不是`ContentProvider.query(...)`. `getContext().getContentResolver().notifyChange(uri, null, false)`当请求者是`ContentProvider.insert/update/delete/bulkInsert(...)`使用触发请求的 URI的同步适配器时，它会调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:03:58.520

答案似乎是“不，查询参数似乎没有包含在哪些 URI 在`notifyChange(...)`调用时得到通知的规范中，或者更确切地说，它`ContentObserver`正在自动注册自身以接收所有后代 URI 通知。”

我的问题似乎是我无意中仍在使用`SimpleCursorLoader`在另一个问题中实现的用于提供`CursorLoader`不依赖于`ContentProvider`. 我现在使用的是`ContentProvider`，所以我更改为默认值`CursorLoader`，这似乎已经解决了这个问题。

# matlab - 从 Matlab 生成的 .set 文件中提取 .bdf

> ID：11142962
> 
> 赞同：0
> 
> 时间：2012-06-21T16:50:53.453
> 
> 标签：matlab, file-format, european-data-format

对不起，如果这更像是一个文件格式转换问题而不是编程，但我找不到任何人可以帮助从这个 .set 文件中提取嵌入式 .bdf （生物信号格式）数据

[http://statigrafix.com/temp/EEG-set/Target_1.set](http://statigrafix.com/temp/EEG-set/Target_1.set)

从标头来看，这似乎是从 MATLAB 5 生成的。

我问过圣地亚哥超级计算中心和 CALIT2 的同事，但还没有运气。世界上某个地方的人能弄清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:44:52.803

这看起来像一个[EEGLAB](http://sccn.ucsd.edu/eeglab/) [数据集](http://sccn.ucsd.edu/eeglab/data/headit.html)文件，它只是一个普通的 MAT 文件，其中存储了一个结构变量。该结构包含有关生物信号的各种信息。

您可以使用 LOAD 功能手动加载数据，或使用[提供的 GUI](http://sccn.ucsd.edu/wiki/Chapter_01%3a_Loading_Data_in_EEGLAB#Opening_an_existing_dataset)打开数据集。

```
>> load Target_1.set -mat
>> EEG
EEG = 
             setname: 'Target_1'
            filename: 'Target_1.set'
            filepath: '/home/julie/FiveBox_JO'
             subject: ''
               group: ''
           condition: ''
             session: []
            comments: [1x803 char]
              nbchan: 238
              trials: 1
                pnts: 99129
               srate: 256
                xmin: 0
                xmax: 387.22
               times: []
                data: [238x99129 single]
              icaact: []
             icawinv: [238x238 double]
           icasphere: [238x238 double]
          icaweights: [238x238 double]
         icachansind: [1x238 double]
            chanlocs: [1x238 struct]
          urchanlocs: []
            chaninfo: [1x1 struct]
                 ref: 'common'
               event: [1x616 struct]
             urevent: [1x18879 struct]
    eventdescription: {''  ''  ''  ''}
               epoch: []
    epochdescription: {}
              reject: [1x1 struct]
               stats: [1x1 struct]
            specdata: []
          specicaact: []
          splinefile: ''
       icasplinefile: ''
              dipfit: [1x1 struct]
             history: [1x1022 char]
               saved: 'yes'
                 etc: [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-31T02:17:29.490

您可以在eeglab中添加一个导入（关于BDF）的插件，然后将您的数据加载到eeglab并导出为.bdf文件。之后，您将获得一个 .bdf 文件。但是这个文件仍然不能使用，你需要将文件扩展名添加为'*.dbf'。最后，可以将bdf加载到另一个软件中进行分析。

# ios - 有没有人设法让 softKeyboardInputAreaOfInterest 工作？

> ID：11142963
> 
> 赞同：1
> 
> 时间：2012-06-21T16:50:58.490
> 
> 标签：ios, apache-flex, air, flex4

我正在使用 Flex 构建一个移动应用程序。

我正在尝试在每个输入上设置 softKeyboardInputAreaOfInterest 以包含下面的按钮。感兴趣的区域小于软键盘留下的剩余屏幕空间，我在viewActivate上设置了，确保传递了正确的尺寸。

但是，我正在 iOS 中进行测试，但它似乎不起作用。设置矩形时正在跟踪正确的尺寸，但平移行为不正确。

我也在其他线程中发现了一两个未答复的帖子。当然，该属性并未创建和记录，但并未实际实施。它似乎完全没有做任何事情。

在这个阶段，我无法找到一种方法来保证输入字段和表单底部的按钮都被平移到视图中。

如果可以的话请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:50:40.063

这是一个错误——softKeyboardAreaOfInterest 在 iOS 上不起作用。在 7 月份的 AIR 预发布期间，我与 Adob​​e AIR 团队取得了联系。他们确认了该错误并在在线 AS3 文档中添加了一句话（“此属性在 iOS 上不可用”）。

我今天刚刚使用最新版本的 AIR（版本 3.5.0.600）再次对其进行了测试，但它仍然无法在 iOS 上运行，但在线 AS3 文档已删除有关 softKeyboardAreaOfInterest 无法在 iOS 上运行的语句。我猜这是一个疏忽。

2012 年 11 月 19 日更新：对于 AIR 3.5，在 AS3 文档中删除“在 iOS 上不可用”原来是一个疏忽，已得到纠正。此属性在带有 AIR 3.5 的 iOS 上仍然不起作用。

2012 年 11 月 20 日更新：今天来自 Adob​​e 的消息是它不是错误，只是在 iOS 上未启用 softKeyboardAreaOfInterest。

# javascript - ajaxSubmit Form Validation with a pop-up "processing" div

> ID：11142965
> 
> 赞同：0
> 
> 时间：2012-06-21T16:51:01.970
> 
> 标签：javascript, jquery, ajax, validation, html

我在我的网络表单上使用 ajaxSubmit。我还需要在用户单击提交时弹出一个显示“正在处理请求”的 div，其背景变暗。

我现在使用的代码是这样的：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#CustomerService").validationEngine({
        ajaxSubmit: true,
        ajaxSubmitFile: "processor.aspx",
        success :  function() {window.location.replace("Thankyou.aspx")},
        failure : function() {}
    })
});
</script>

<script type="text/javascript">
function DimScreen()
{
    document.getElementById("DimBlackScreen").style.visibility = "visible";
}
</script> 
```

我的提交按钮的 HTML 部分：

```
<input type="submit" value="Submit" id="Send" name="Send" style="cursor:pointer;" onclick="DimScreen();" /> 
```

那么这里的问题是：表单是否通过验证，弹出的div总是会出现，这不是我想要的情况。

有没有办法让它检测表单验证是否通过然后显示 div？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:28:05.683

如果您使用的是 jquery 1.4 或更高版本，请尝试以下操作：

```
$(document).ajaxStart(function() {
   $("#DimBlackScreen").show();
}).ajaxStop(function() {
   $("#DimBlackScreen").hide();
}); 
```

或者如果您使用较少版本的 jquery 1.4 试试这个

```
$().ajaxStart(function() {
   $("#DimBlackScreen").show();
}).ajaxStop(function() {
   $("#DimBlackScreen").hide();
}); 
```

记住把所有这些东西放在 document.ready

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:33:43.043

```
$(document).ready(function() {
    $("input#Send").click(function(e){
      e.preventDefault(); //prevent default submit action,, use ajax instead
      $('#DimBlackScreen').show();
      $("#CustomerService").validationEngine({
        ajaxSubmit: true,
        ajaxSubmitFile: "processor.aspx",
        success :  function() {
             $('#DimBlackScreen').hide();
             window.location.replace("Thankyou.aspx"); //or $('body').html('Thank you!');

        },
        failure : function() {}
       });// end validationEngine
 }); //end click

});//end document.ready

<input type="submit" value="Submit" id="Send" name="Send" style="cursor:pointer;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T05:51:38.710

好的，受 alsahin 和 Kundan 的其他两个答案的启发，我自己想通了：

唯一需要改变的是ajax如何处理验证失败。所以我改变了

```
failure : function() {} 
```

到

```
failure : function() {document.getElementById("DimBlackScreen").style.visibility = "hidden";} 
```

因此，每次用户单击提交按钮时，弹出的“处理” div 实际上会显示，但如果表单未通过验证，则会重置为隐藏。

我对我当前的代码很满意，但是如果您有更好的想法，请告诉我。

# xna - XNA 4.0 相当于 RenderTarget2D.GetTexture()？

> ID：11142966
> 
> 赞同：2
> 
> 时间：2012-06-21T16:51:04.433
> 
> 标签：xna, xna-4.0

我目前正在开发一款游戏，并且正在尝试实现颜色键冲突。我遵循[未采用教程的道路](http://www.xnadevelopment.com/tutorials/theroadnottaken/theroadnottaken.shtml)，一直工作到从渲染目标获取纹理，这在 XNA 4 中不可用，我似乎没有找到等价物？任何帮助：D

提前致谢 ！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T18:07:20.487

在 XNA 4.0 中，RenderTarget2D 类继承自 Texture2D，这意味着您可以简单地将渲染目标转换为纹理：

```
Texture2D texture = (Texture2D)renderTarget; 
```

# ios - 有没有地方可以设置 UINavigationBar 的默认颜色？

> ID：11142967
> 
> 赞同：1
> 
> 时间：2012-06-21T16:51:11.750
> 
> 标签：ios, uinavigationbar, uiappearance

我是一名新的 iOS 开发人员，从事一个由前雇员创建的项目。目前所有导航栏都是黑色的，我需要将它们更改为默认的蓝色。到目前为止，我已经弄清楚了这一行：

```
[self.navigationController.navigationBar setTintColor:[[UIColor colorWithHue:0.6 saturation:0.33 brightness: 0.65 alpha:1.0] autorelease]]; 
```

它有效，但我认为这不是正确的方法。我也创建了一个新屏幕，颜色是蓝色的，所以我认为某些地方必须有一个设置。在 xib 文件中，顶部栏是无的，我们在 viewDidLoad 中有这段代码

```
if (self.navigationController.navigationBar.isHidden) {
        [self.navigationController setNavigationBarHidden:NO animated:YES]; 
    }
    else {
        [self.navigationController setNavigationBarHidden:NO animated:NO];
    } 
```

问题是：有没有可以设置默认颜色的地方？或者我必须以编程方式进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:57:28.083

在 iOS 5 中，您可以使用 Appearence 来做到这一点

```
 [[UINavigationBar appearance]setTintColor:[UIColor redColor]]; 
```

例如，您可以在 you 中执行此操作`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`。

在以前的 iOS 版本中，您应该在 NavigationBar 上创建一个 Category，并覆盖它的绘图方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:57:44.827

创建导航控制器时，您可以设置栏的颜色：

```
navigationController = [[UINavigationController alloc] initWithRootViewController: mainView];
self.navigationController.navigationBar.tintColor = [UIColor <whatever color you want>]; 
```

或者，如果您只想要默认的蓝色：

```
self.navigationController.navigationBar.barStyle = UIBarStyleDefault; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T16:57:48.237

你做对了。当使用 pushViewController 时（例如，在 UITableViewController 中显示项目的详细视图时），导航栏可以在多个 ViewController 之间共享。

iOS5 有一个新的 UIAppearance 功能，用于更详细的应用程序范围的主题，您可能想查看 - [http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T20:25:35.727

要设置默认颜色，请使用：

```
[[UINavigationBar appearance]setTintColor:nil]; 
```

要使用渐变设置不同的颜色，请使用：

```
[[UINavigationBar appearance]setTintColor:[UIColor colorWithHue:hue/359.0f
                                                     saturation:saturation/100.0f
                                                     brightness:brightness/100.0f
                                                          alpha:alpha]]; 
```

请注意; 色调、饱和度、亮度和 alpha 属于`float`.

# r - 重新初始化 R 中的变量并让它们全局更新

> ID：11142968
> 
> 赞同：1
> 
> 时间：2012-06-21T16:51:21.117
> 
> 标签：r, variable-assignment

我不确定如何用正确的术语提出这个问题，并且相关问题不是同一件事。我想绘制一个函数，并注意到 R 并没有用我的系数变化来更新绘图。

```
a <- 2
x <- seq(-1, 1, by=0.1)
y <- 1/(1+exp(-a*x))
plot(x,y)

a <- 4
plot(x,y) # no change

y <- 1/(1+exp(-a*x)) # redefine function
plot(x,y) # now it updates 
```

以防万一我不知道自己在做什么，我按照[这个 R 基本绘图教程](http://msenux.redwoods.edu/math/R/simple.php)的语法。唯一的区别是使用 of`=`而不是`<-`for assignment of `y = 1/(1+exp(-a*x))`。结果是一样的。

我实际上从来没有用 R 绘制过一个函数，所以这是我第一次遇到这种情况。这让我想知道如果重新定义的变量没有传播到使用初始值初始化的函数或对象，我是否在其他领域看到了不好的结果。

1）我做错了什么吗？有一种方法可以动态分配变量，以便函数考虑当前值与创建它们时的值？

2）如果没有，R程序员在调整变量分配并确保其他所有内容都正确更新时是否有一种通用的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:59:03.047

实际上，您不是在绘制函数。相反，您正在绘制两个向量。由于在调用下一个图之前您没有更新向量的值，因此您会得到两个相同的图。

要直接绘制函数，您需要使用`curve()`函数：

```
f <- function(x, a)1/(1+exp(-a*x)) 
```

阴谋：

```
curve(f(x, 1), -1, 1, 100) 
```

![在此处输入图像描述](../Images/fd6fac59d44e54357357a48632611b48.png)

```
curve(f(x, 4), -1, 1, 100) 
```

![在此处输入图像描述](../Images/47fdd09d1343e54697c59e88813c30fe.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:56:10.227

R 不是 Excel、MathCAD 或任何其他可能使您相信更改对象的值可能会更新可能在过去某个时间使用过该值的其他向量的应用程序。当你这样做时

```
a <- 4
plot(x,y) # no change 
```

“x”或“y”没有变化。

尝试这个：

```
curve( 1/(1+exp(-a*x))  )
a <- 10
curve( 1/(1+exp(-a*x)) ) 
```

# javascript - 格式化用户输入日期。

> ID：11142969
> 
> 赞同：0
> 
> 时间：2012-06-21T16:51:25.400
> 
> 标签：javascript, jquery, date

有没有更好的方法来格式化用户推算的日期。我有一个输入字段，单击日历时会弹出一个输入字段，您可以选择一个日期，但用户也可以选择输入日期。我希望用户能够输入 1/12 和我的 javascript 以将其格式化为 2012 年 1 月 12 日。有没有一种简单的方法来解决这个问题而不必进行所有类型的检查？如果不是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T17:26:56.773

这个库可以帮助你：[http ://www.datejs.com/](http://www.datejs.com/)

dd/mm/yyyy 是一种有效的格式，例如在西班牙、英国、...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T18:46:04.727

我刚刚试了一下，但不确定它是否正确，但我认为它正在工作（月/日/年）。

```
$('input[name="txt_date"]').on('blur', function(e){
    var dt=$(this).val();
    if(dt!='')
    {
        if(dt.indexOf('/'))
        {
            var da=dt.split('/');
            var l=da.length;
            if(l <= 3)
            {
                var date='';
                for(i=0;i<l;i++)
                {
                   if(i==0)
                   {
                      if(da[i].match(/^\d{1}|d{2}$/) && da[i]>0 && da[i]<=12)
                      {
                          var m=da[i].length==1 ? '0'+da[i] : da[i];
                          date=m;
                      }
                   }
                   if(i==1)
                   {
                       if(da[i].match(/^\d{1}|d{2}$/) && da[i]>0 && da[i]<=31)
                       {
                           var d=da[i].length==1 ? '0'+da[i] : da[i];
                           date+='/'+d;
                       }
                   }
                   if(i==2)
                   {
                       if(da[i].match(/^\d{4}$/))
                       {
                           date+='/'+da[i];
                       }
                       else date+='/'+new Date().getFullYear();
                   }
                }
                if(l<3)
                {
                    date+='/'+new Date().getFullYear();
                }
                if(date.match(/^\d{2}\/\d{2}\/\d{4}$/))
                {
                    $(this).val(date);
                }
                else alert('invalid date!');
            }
        }
    }
}); 
```

[**演示。**](http://jsfiddle.net/heera/JF4WT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T19:59:01.857

这就是我想出的。

```
var checkDate = function(dateVal, input){

            if(dateVal.length == 10){
                return;
            }
            var d = new Date();
            var currentMonth = d.getMonth();
            var year = d.getFullYear();
            var firstIndex = dateVal.indexOf('/');
            var month = parseInt(dateVal.substr(0, firstIndex));
            var day = parseInt(dateVal.substr(firstIndex + 1, 2));

            if(month < 10){
                month = '0' + month;
            }

            if(day < 10){
                day = '0' + day;
            }

            if(month > currentMonth){
                year = year - 1;
            }

            dateVal = month + '/' + day + '/' + year;

            if(isNaN(month)){
                input.val('');
                return;
            }
            input.val(dateVal);

        }; 
```

# silverlight - 如何更改每个项目的列表框样式以允许在 Silverlight 中自动换行？

> ID：11142972
> 
> 赞同：1
> 
> 时间：2012-06-21T16:51:45.340
> 
> 标签：silverlight, silverlight-4.0

我希望列表框中的每一行都可以在其宽度设置为固定宽度并且文本长于宽度时显示带有自动换行的文本。

例如，“这是一个长字符串。” 显示为一行，但“这是一个长字符串。这是一个长字符串。这是一个长字符串。” 可以显示为 3 行，因为它是列表框中的一项。

因此，列表框中每一行的高度可能会根据上下文而有所不同。

如何为这种情况创建一个简单的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:24:16.207

您可以通过修改 ItemsTemplate 来做到这一点

```
 <ListBox ItemsSource="{Binding YourItems}">
      <ListBox.ItemTemplate>
           <DataTemplate>
                 <TextBlock Text="{Binding TextProperty}" TextWrapping="Wrap"/>
           </DataTemplate>
      </ListBox.ItemTemplate>
 </ListBox> 
```

这假设您的视图模型有一个“YourItems”属性，它是一个 IEnumerable，并且 YourObject 上有一个 TextProperty 属性，它是一个字符串

# c# - 如何在可导航的应用程序中支持 ListBox SelectedItems 与 MVVM 的绑定

> ID：11142976
> 
> 赞同：41
> 
> 时间：2012-06-21T16:52:18.070
> 
> 标签：c#, wpf, mvvm, listbox

我正在制作一个可通过自定义“下一步”和“后退”按钮和命令（即不使用`NavigationWindow`）导航的 WPF 应用程序。在一个屏幕上，我有一个`ListBox`必须支持多项选择（使用`Extended`模式）。我有这个屏幕的视图模型并将所选项目存储为属性，因为它们需要维护。

但是，我知道 a 的`SelectedItems`属性`ListBox`是只读的。我一直在尝试使用[这里的解决方案来解决](http://blog.functionalfun.net/2009/02/how-to-databind-to-selecteditems.html)这个问题，但我无法将它应用到我的实现中。我发现我无法区分何时取消选择一个或多个元素以及何时在屏幕之间导航（`NotifyCollectionChangedAction.Remove`在这两种情况下都会引发，因为从技术上讲，当导航离开屏幕时所有选定的项目都被取消选择）。我的导航命令位于一个单独的视图模型中，该模型管理每个屏幕的视图模型，所以我不能在其中放置与视图模型相关的任何实现`ListBox`。

我发现了其他几个不太优雅的解决方案，但这些似乎都没有在视图模型和视图之间强制执行双向绑定。

任何帮助将不胜感激。如果有助于理解我的问题，我可以提供一些源代码。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-21T17:07:18.493

尝试在每个数据项上创建一个`IsSelected`属性并绑定`ListBoxItem.IsSelected`到该属性

```
<Style TargetType="{x:Type ListBoxItem}">
    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
</Style> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-21T15:55:23.813

Rachel 的解决方案效果很好！但是我遇到了一个问题——如果你覆盖 的样式`ListBoxItem`，你会失去应用到它的原始样式（在我的例子中负责突出显示选定的项目等）。您可以通过继承原始样式来避免这种情况：

```
<Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource {x:Type ListBoxItem}}">
    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
</Style> 
```

注意设置`BasedOn`（见[这个答案](https://stackoverflow.com/a/11581547/2032064)）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-01-18T20:49:17.613

我无法让 Rachel 的解决方案按照我想要的方式工作，但我发现[Sandesh 的](https://stackoverflow.com/questions/22868445/wpf-binding-selecteditems-in-mvvm)创建自定义 [依赖属性](https://msdn.microsoft.com/library/ms752914(v=vs.100).aspx)的答案对我来说非常适合。我只需要为 ListBox 编写类似的代码：

```
public class ListBoxCustom : ListBox
{
    public ListBoxCustom()
    {
        SelectionChanged += ListBoxCustom_SelectionChanged;
    }

    void ListBoxCustom_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        SelectedItemsList = SelectedItems;
    }

    public IList SelectedItemsList
    {
        get { return (IList)GetValue(SelectedItemsListProperty); }
        set { SetValue(SelectedItemsListProperty, value); }
    }

    public static readonly DependencyProperty SelectedItemsListProperty =
       DependencyProperty.Register(nameof(SelectedItemsList), typeof(IList), typeof(ListBoxCustom), new PropertyMetadata(null));

} 
```

在我的视图模型中，我只是引用了该属性来获取我选择的列表。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-25T13:38:35.550

我一直在寻找一个简单的解决方案，但没有运气。

如果您已经在 ItemsSource 中的对象上拥有 Selected 属性，那么 Rachel 的解决方案就很好。如果不这样做，则必须为该业务模型创建一个模型。

我走了一条不同的路线。一个快速的，但并不完美。

在您的 ListBox 上为 SelectionChanged 创建一个事件。

```
<ListBox ItemsSource="{Binding SomeItemsSource}"
         SelectionMode="Multiple"
         SelectionChanged="lstBox_OnSelectionChanged" /> 
```

现在在 XAML 页面后面的代码上实现事件。

```
private void lstBox_OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var listSelectedItems = ((ListBox) sender).SelectedItems;
    ViewModel.YourListThatNeedsBinding = listSelectedItems.Cast<ObjectType>().ToList();
} 
```

多田。完毕。

[这是在将 SelectedItemCollection 转换为 List](https://stackoverflow.com/questions/1877949/how-to-cast-a-system-windows-controls-selecteditemcollection)的帮助下完成的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-09T22:39:45.210

这是另一个解决方案。它类似于 Ben 的[answer](https://stackoverflow.com/a/34863815)，但绑定有两种方式。诀窍是`ListBox`在绑定数据项更改时更新 的选定项。

```
public class MultipleSelectionListBox : ListBox
{
    public static readonly DependencyProperty BindableSelectedItemsProperty =
        DependencyProperty.Register("BindableSelectedItems",
            typeof(IEnumerable<string>), typeof(MultipleSelectionListBox),
            new FrameworkPropertyMetadata(default(IEnumerable<string>),
                FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, OnBindableSelectedItemsChanged));

    public IEnumerable<string> BindableSelectedItems
    {
        get => (IEnumerable<string>)GetValue(BindableSelectedItemsProperty);
        set => SetValue(BindableSelectedItemsProperty, value);
    }

    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        base.OnSelectionChanged(e);
        BindableSelectedItems = SelectedItems.Cast<string>();
    }

    private static void OnBindableSelectedItemsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (d is MultipleSelectionListBox listBox)
            listBox.SetSelectedItems(listBox.BindableSelectedItems);
    }
} 
```

不幸的是，我无法`IList`用作 BindableSelectedItems 类型。这样做会发送`null`到我的视图模型的属性，其类型是`IEnumerable<string>`.

这是 XAML：

```
<v:MultipleSelectionListBox
    ItemsSource="{Binding AllMyItems}"
    BindableSelectedItems="{Binding MySelectedItems}"
    SelectionMode="Multiple"
    /> 
```

有一点需要注意。在我的情况下， a`ListBox`可能会从视图中删除。由于某种原因，这会导致`SelectedItems`属性更改为空列表。反过来，这会导致视图模型的属性更改为空列表。根据您的用例，这可能是不可取的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-27T21:52:12.500

使用 Command 和 Interactivities EventTrigger 很容易做到这一点。如果您想要显示更新的计数，ItemsCount 只是用于 XAML 的绑定属性。

XAML：

```
 <ListBox ItemsSource="{Binding SomeItemsSource}"
                 SelectionMode="Multiple">
        <i:Interaction.Triggers>
         <i:EventTrigger EventName="SelectionChanged">
            <i:InvokeCommandAction Command="{Binding SelectionChangedCommand}" 
                                   CommandParameter="{Binding ElementName=MyView, Path=SelectedItems.Count}" />
         </i:EventTrigger>
        </Interaction.Triggers>    
    </ListView>

<Label Content="{Binding ItemsCount}" /> 
```

视图模型：

```
 private int _itemsCount;
    private RelayCommand<int> _selectionChangedCommand;

    public ICommand SelectionChangedCommand
    {
       get {
                return _selectionChangedCommand ?? (_selectionChangedCommand = 
             new RelayCommand<int>((itemsCount) => { ItemsCount = itemsCount; }));
           }
    }

        public int ItemsCount
        {
            get { return _itemsCount; }
            set { 
              _itemsCount = value;
              OnPropertyChanged("ItemsCount");
             }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-13T23:06:08.230

这对我来说是一个主要问题，我看到的一些答案要么太老套，要么需要重置`SelectedItems`属性值，破坏附加到属性 OnCollectionChanged 事件的任何代码。但我设法通过直接修改集合来获得一个可行的解决方案，作为奖励，它甚至支持`SelectedValuePath`对象集合。

```
public class MultipleSelectionListBox : ListBox
{
    internal bool processSelectionChanges = false;

    public static readonly DependencyProperty BindableSelectedItemsProperty =
        DependencyProperty.Register("BindableSelectedItems",
            typeof(object), typeof(MultipleSelectionListBox),
            new FrameworkPropertyMetadata(default(ICollection<object>),
                FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, OnBindableSelectedItemsChanged));

    public dynamic BindableSelectedItems
    {
        get => GetValue(BindableSelectedItemsProperty);
        set => SetValue(BindableSelectedItemsProperty, value);
    }

    protected override void OnSelectionChanged(SelectionChangedEventArgs e)
    {
        base.OnSelectionChanged(e);

        if (BindableSelectedItems == null || !this.IsInitialized) return; //Handle pre initilized calls

        if (e.AddedItems.Count > 0)
            if (!string.IsNullOrWhiteSpace(SelectedValuePath))
            {
                foreach (var item in e.AddedItems)
                    if (!BindableSelectedItems.Contains((dynamic)item.GetType().GetProperty(SelectedValuePath).GetValue(item, null)))
                        BindableSelectedItems.Add((dynamic)item.GetType().GetProperty(SelectedValuePath).GetValue(item, null));
            }
            else
            {
                foreach (var item in e.AddedItems)
                    if (!BindableSelectedItems.Contains((dynamic)item))
                        BindableSelectedItems.Add((dynamic)item);
            }

        if (e.RemovedItems.Count > 0)
            if (!string.IsNullOrWhiteSpace(SelectedValuePath))
            {
                foreach (var item in e.RemovedItems)
                    if (BindableSelectedItems.Contains((dynamic)item.GetType().GetProperty(SelectedValuePath).GetValue(item, null)))
                        BindableSelectedItems.Remove((dynamic)item.GetType().GetProperty(SelectedValuePath).GetValue(item, null));
            }
            else
            {
                foreach (var item in e.RemovedItems)
                    if (BindableSelectedItems.Contains((dynamic)item))
                        BindableSelectedItems.Remove((dynamic)item);
            }
    }

    private static void OnBindableSelectedItemsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (d is MultipleSelectionListBox listBox)
        {
            List<dynamic> newSelection = new List<dynamic>();
            if (!string.IsNullOrWhiteSpace(listBox.SelectedValuePath))
                foreach (var item in listBox.BindableSelectedItems)
                {
                    foreach (var lbItem in listBox.Items)
                    {
                        var lbItemValue = lbItem.GetType().GetProperty(listBox.SelectedValuePath).GetValue(lbItem, null);
                        if ((dynamic)lbItemValue == (dynamic)item)
                            newSelection.Add(lbItem);
                    }
                }
            else
                newSelection = listBox.BindableSelectedItems as List<dynamic>;

            listBox.SetSelectedItems(newSelection);
        }
    }
} 
```

绑定就像您期望 MS 自己完成的那样工作：

```
<uc:MultipleSelectionListBox 
    ItemsSource="{Binding Items}" 
    SelectionMode="Extended" 
    SelectedValuePath="id" 
    BindableSelectedItems="{Binding mySelection}"
/> 
```

它尚未经过彻底测试，但已通过第一眼检查。我试图通过在集合上使用动态类型来保持它的可重用性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-21T17:46:44.633

结果证明将复选框绑定到 IsSelected 属性并将文本块和复选框放在堆栈面板中就可以了！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-26T08:40:44.383

对我试图自己找到的给定答案不满意......好吧，事实证明它更像是一个黑客而不是一个解决方案，但对我来说效果很好。此解决方案以特殊方式使用 MultiBindings。首先，它可能看起来像大量代码，但您可以毫不费力地重用它。

首先我实现了一个'IMultiValueConverter'

```
public class SelectedItemsMerger : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        SelectedItemsContainer sic = values[1] as SelectedItemsContainer;

        if (sic != null)
            sic.SelectedItems = values[0];

        return values[0];
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        return new[] { value };
    }
} 
```

还有一个 SelectedItems 容器/包装器：

```
public class SelectedItemsContainer
{
    /// Nothing special here...
    public object SelectedItems { get; set; }
} 
```

现在我们为 ListBox.SelectedItem（单数）创建绑定。注意：您必须为“转换器”创建一个静态资源。这可以在每个应用程序中完成一次，并被所有需要转换器的 ListBox 重用。

```
<ListBox.SelectedItem>
 <MultiBinding Converter="{StaticResource SelectedItemsMerger}">
  <Binding Mode="OneWay" RelativeSource="{RelativeSource Self}" Path="SelectedItems"/>
  <Binding Path="SelectionContainer"/>
 </MultiBinding>
</ListBox.SelectedItem> 
```

在 ViewModel 中，我创建了可以绑定到的 Container。使用 new() 初始化它以便用值填充它是很重要的。

```
 SelectedItemsContainer selectionContainer = new SelectedItemsContainer();
    public SelectedItemsContainer SelectionContainer
    {
        get { return this.selectionContainer; }
        set
        {
            if (this.selectionContainer != value)
            {
                this.selectionContainer = value;
                this.OnPropertyChanged("SelectionContainer");
            }
        }
    } 
```

就是这样。也许有人看到了一些改进？你怎么看待这件事？

# cakephp - cakephp 分页：如何设置不同的“页面”参数

> ID：11142984
> 
> 赞同：0
> 
> 时间：2012-06-21T16:52:55.687
> 
> 标签：cakephp, pagination

有没有办法为当前页码配置不同的参数？

例如，我有这个分页网址：

```
http://localhost/petproject/posts/index/page:2 
```

我想要这样的网址：

```
http://localhost/petproject/posts/index/my_custom_page_param:2 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:44:31.470

您可以简单地[使用路由器](http://book.cakephp.org/2.0/en/development/routing.html)将 URL 转换为符合您需要的其他内容，方法是为该 URL 添加重写规则。在没有进一步研究的情况下，我认为这是最简单的解决方案。

另一种可能是检查`Controller::beforeFilter()`您的自定义命名 arg 是否已设置并将其复制/设置为`params['named']['page']`.

或者扩展 Paginator 组件并创建它的自定义版本。

# c# - 是否可以获取 Google Drive 文件的所有者？

> ID：11142988
> 
> 赞同：1
> 
> 时间：2012-06-21T16:53:03.600
> 
> 标签：c#, google-drive-api

当我在线查看我的 Google 云端硬盘时，我看到文件的所有者已列出，有时显示为我自己或其他人“共享”。是否可以通过编程方式（使用 C#）获得这个值？

理想情况下，我希望有人与我共享文件，然后我对文件进行一些处理（通过 Windows 服务），然后我重新上传文件及其更改。不过，我需要知道文件的所有者。

这可能吗？不使用 Google Drive API 是否可行？- 我正在考虑使用普通的 .NET/Windows 函数将文件从 Google Drive 本地文件夹中提取出来......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T19:20:36.137

Google Drive API 返回的文件资源包括一个`userPermission`字段，该字段列出了有权访问文档的用户及其角色（所有者、读者或作者）：

[https://developers.google.com/drive/v1/reference/files#resource](https://developers.google.com/drive/v1/reference/files#resource)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T05:25:02.750

我也有类似的需求。我正在考虑开发一个应用程序来处理用户共享的文件并向他们显示一些报告。因此，我的应用程序需要唯一标识所有者，以便只有他和其他人才能查看他的文件的报告。

查看 Claudio 上面给出的答案，我在 Java 中调试以检查“userPermission”字段，但找不到任何帮助。我还检查了文件的其他字段，但除了字符串格式的所有者名称之外什么也没有。

有没有办法可以实现？需要一些帮助。谢谢你。

# java - Java - 避免重复的手动垃圾收集 - mstor 和 javaxmail OutOfMemoryError

> ID：11142989
> 
> 赞同：0
> 
> 时间：2012-06-21T16:53:08.653
> 
> 标签：java, garbage-collection, heap-memory, mstor

我正在使用 mstor 库来解析 mbox 邮件文件。一些文件的大小超过了千兆字节。可以想象，这可能会导致一些堆空间问题。

有一个循环，对于每次迭代，都会检索特定的消息。该`getMessage()`调用是在用完时尝试分配堆空间的方法。如果我在这个循环的顶部添加一个调用`System.gc()`，程序会毫无错误地解析大文件，但我意识到收集垃圾 40,000 次必须减慢程序的速度。

我的第一次尝试是让调用看起来像`if (i % 500 == 0) System.gc()`每 500 条记录发生一次调用。我尝试提高和降低此数字，但结果不一致，通常会返回 OutOfMemory 错误。

我的第二个更聪明的尝试如下所示：

```
try {
    message = inbox.getMessage(i);
} catch (OutOfMemoryError e) {
    if (firstTry) {
        i--;
        firstTry = false;
    } else {
        firstTry = true;
        System.out.println("Message " + i + " skipped.");
    }
    System.gc();
    continue;
} 
```

这个想法是只在抛出 OutOfMemory 错误时调用垃圾收集器，然后减少计数以重试。不幸的是，在解析了数千封电子邮件后，程序才开始输出：

```
 Message 7030 skipped.
 Message 7031 skipped.
 .... 
```

以此类推。

我只是对每次迭代的收集器如何返回与此不同的结果感到困惑。据我了解，垃圾就是垃圾，所有这一切都应该改变的是在给定时间收集了多少。

谁能解释这种奇怪的行为？有没有人推荐其他方式来减少呼叫收集器的频率？我的堆空间已用完。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:01:16.763

你不应该依赖 System.gc() 因为它可以被 VM 忽略。如果你得到 OutOfMemory 这意味着 VM 已经尝试运行 GC。您可以尝试增加堆大小，更改堆中代的大小（假设您的大多数对象最终都在老年代，那么年轻一代不需要太多内存），检查您的代码以确保您没有持有任何引用到你不需要的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:08:31.360

一般来说，打电话`System.gc()`是浪费时间，它不能保证随时做任何事情，充其量只是一个*建议，在大多数情况下被忽略。*在 an 之后调用它`OutOfMemoryException`就更没用了，因为 JVM 在抛出异常之前已经尝试过回收内存。

如果您使用无法控制的第三方代码，您唯一能做的就是将命令行中的 JVM 堆分配增加到您的特定机器可以处理的最大值。

[开始使用 java JVM 内存（堆、堆栈、-xss -xms -xmx -xmn...）](http://avricot.com/blog/index.php?post/2010/05/03/Get-started-with-java-JVM-memory-%28heap%2C-stack%2C-xss-xms-xmx-xmn...%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T17:56:40.783

以下是我的建议：

*   增加堆空间。这可能是最容易做到的事情。您可以使用[`-Xmx`](http://jmol.sourceforge.net/docs/JmolUserGuide/ch02s07.html). 范围。
*   查看加载消息的 API 是否提供“流式传输”选项。也许您不需要一次将整个消息加载到内存中。

调用`System.gc()`对你没有任何好处，因为它不能保证 GC 会被调用。实际上，这是错误代码的明确标志。如果您依赖`System.gc()`代码工作，那么您的代码可能已损坏。在这种情况下，您似乎出于性能考虑而依赖它，这表明您的代码*肯定*被破坏了。

您永远无法确定 JVM 是否会满足您的请求，并且您也无法确定它将如何执行垃圾收集。JVM 可能决定完全忽略您的请求（即，这不是保证）。是否`System.gc()`会做它应该做的，是相当不确定的。由于无法保证其行为，因此最好不要完全使用它。

最后，您可以使用该选项*禁用*显式调用，这再次意味着，不能保证您的调用会运行，因为它可能在已配置为忽略该显式调用的 JVM 上运行。`System.gc()``-XX:DisableExplicitGC``System.gc()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T05:05:03.003

默认情况下，mstor 将从 ehcache 缓存中的文件夹中检索到的消息进行缓存，以便更快地访问。但是，此缓存可能会被禁用，我建议对大文件夹禁用它。

您可以通过在类路径的根目录中创建一个名为“mstor.properties”的文本文件来禁用缓存，其中包含以下内容：

```
mstor.cache.disabled=true 
```

You can also set this value as a system property:

```
java -Dmstor.cache.disabled=true SomeProgram 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T20:42:28.107

mstor 库没有很好地处理消息的缓存。在做了一些研究之后，我发现如果你调用`Folder.close()`（收件箱是我上面的文件夹对象）mstor 和 javaxmail 会释放所有由于该`getMessage()`方法而被缓存的消息。

我使 try/catch 块看起来像这样：

```
try {
    message = inbox.getMessage(i);
    // moved all of my calls to message.getFrom(),
    // message.getAllRecipients(), etc. inside this try/catch.
} catch (OutOfMemoryError e) {
    if (firstTry) {
        i--;
        firstTry = false;
    } else {
        firstTry = true;
        System.out.println("Message " + i + " skipped.");
    }
    inbox.close(false);
    System.gc();
    inbox.open(Folder.READ_ONLY);
    continue;
}
firstTry = true; 
```

每次触发 catch 语句，需要 40-50 毫秒才能手动清除缓存的消息并重新打开文件夹。

通过每次迭代调用垃圾收集器，解析一个 1.6 GB 的文件需要 57 分钟。按照这个逻辑，解析同一个文件只需要 18 分钟。

更新 - 降低 mstor 使用的内存量的另一个重要方面是缓存属性。其他人已经提到将“mstor.cache.disabled”设置为true，这有帮助。今天我发现了另一个重要的属性，它大大减少了更大文件的 OOM 捕获量。

```
 Properties props = new Properties();
    props.setProperty("mstor.mbox.metadataStrategy", "none");
    props.setProperty("mstor.cache.disabled", "true");
    props.setProperty("mstor.mbox.cacheBuffers", "false");   // most important 
```

# sql - SQL：将表 (ID, [Datetime], [INT]) 更改为 (ID, Start_DT, End_DT, [INT])

> ID：11142992
> 
> 赞同：0
> 
> 时间：2012-06-21T16:53:17.090
> 
> 标签：sql

我有一些这种格式的旧数据：

```
ID    DT          NUM 
1     6-1-2012    2
1     6-2-2012    2
1     6-3-2012    4
1     6-4-2012    4
1     6-5-2012    8
1     6-6-2012    8
1     6-7-2012    8
1     6-8-2012    16
1     6-9-2012    2
1     6-10-2012   2 
```

我需要它看起来像这样：

```
ID    START_DT    END_DT      NUM
1     6-1-2012    6-2-2012    2 
1     6-3-2012    6-4-2012    4
1     6-5-2012    6-7-2012    8 
1     6-8-2012    6-8-2012    16
1     6-9-2012    6-10-2012   2 
```

这是我可以快速提出的数据的最佳示例。如果我不小心在其中包含了一些误解，我很想澄清一下。

规则：

*   ID：这确实发生了变化，它最终会被分组，为了让事情变得简单，在我的例子中也是一样的
*   DT：我得到一个原始日期时间，在真实数据中时间部分确实不同
*   START_DT、END_DT：我需要将这些列从原始 DT 中取出
*   NUM：这只是一个可以更改的整数，并且**可以根据 ID 重新出现**

**编辑：这很尴尬.....**（必须有更好的答案）......**我还没有在很多条件下测试过这个，**但从一开始它看起来还不错......并且不得不手动找到并替换所有字段名称（友善）

```
select * from (
    select  *,row_number() over (partition by if_id, [z.num] order by if_id, [y.num]) as rownum

    from (
            select  y.id,
                    y.dt as [y.dt], 
                    z.dt as [z.dt],    
                    y.num

            from    #temp as y 

                    outer apply (select top 1 id, dt, num

                                    from    #temp as x 

                                    where   x.id = y.id and 
                                            x.dt > y.dtand 
                                            x.num <> y.num

                                    order by x.dt asc) as z   ) as x ) as k
where rownum=1
order by [y.dt] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:57:05.260

```
select id,min(dt) as start_date, max(dt) as end_date, num
from whatevertablename_helps_if_you_supply_these_when_asking_for_code
group by 1,4 
```

也可以将其作为获取最小值的子查询和获取最大值的子查询来执行，但不要认为您需要在此处执行此操作。

我的答案是 Postgres ...我认为您需要将 group by 语句更改为 id,num 而不是在 t-sql 中。

添加：

你怎么知道它是

1 2012 年 6 月 1 日 2012 年 6 月 2 日 2

1 2012 年 6 月 9 日 2012 年 6 月 10 日 2

并不是

1 2012 年 6 月 1 日 2012 年 6 月 10 日 2

1 2012 年 6 月 2 日 2012 年 6 月 9 日 2

您需要更多的业务规则来确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T18:38:39.733

```
select id, [y.dt] as start_dt, [z.dt] as end_dt, num from (
        select  *,row_number() over (partition by id, [z.dt] order by id, [y.dt]) as rownum

        from (
                select  y.id,
                        y.dt as [y.dt], 
                        z.dt as [z.dt],    
                        y.num

                from    #temp as y 

                        outer apply (select top 1 id, dt, num

                                        from    #temp as x 

                                        where   x.id = y.id and 
                                                x.dt > y.dt and 
                                                x.num <> y.num

                                        order by x.dt asc) as z   ) as x ) as k
where rownum=1
order by id, [y.dt] 
```

这给了我们......（使用不同的数据）

```
id     start_dt                 end_dt                         num
6      2011-10-01 00:00:00.000  2012-01-18 00:00:00.000        896
6      2012-01-18 00:00:00.000  2012-02-01 00:00:00.000        864
6      2012-02-01 00:00:00.000  NULL                           896 
```

大约一个小时前我把它贴在了顶部，也许......？并说这很尴尬（而且草率）......我想知道是否有人有更好的答案，因为我的很烂。但我不明白为什么人们不断发布他们需要更好的业务规则并且需要知道如何处理某些情况的帖子。这段代码完全符合我的要求，除了 end_dt 是新 num 的日期时间，而不是当前 num 的最后一次出现......但我可以使用它。总比没有好。（对不起，沮丧）。

业务规则：数据已经存在。它应该显示逻辑范围。我需要 num 的 start_dt 和 end_dt...**当 NUM = Y 时，开始日期是 NUM 从 X 变为 Y 的时间，结束日期是 Y 变为 Z 的时间。**我不能给你比我自己拥有的更多这一切……这些规则对我来说已经足够了……？？

好的，相同的数据：

```
 id      start_dt   end_dt       num
 1       6-1-2012   6-3-2012    2
 1       6-3-2012   6-5-2012    4
 1       6-5-2012   6-8-2012    8
 1       6-8-2012   6-9-2012    16
 1       6-9-2012   NULL        2 
```

# python - python闭包局部变量

> ID：11142993
> 
> 赞同：2
> 
> 时间：2012-06-21T16:53:18.120
> 
> 标签：python, singleton, closures

[在这个答案](https://stackoverflow.com/a/674345/380231)中，一个单例装饰器被证明是这样的

```
def singleton(cls):
    instances = {}
    def getinstance():
        print len(instances)
        if cls not in instances:
            instances[cls] = cls()
        return instances[cls]
    return getinstance 
```

但是`instances`对于每个装饰的班级都是“本地的”，所以我试图提高效率并使用

```
def BAD_singleton(cls):
    instances = None
    def getinstance():
        if instances is None:
            instances = cls()
        return instances
    return getinstance

@BAD_singleton
class MyTest(object):
    def __init__(self):
        print 'test' 
```

但是，这给出了一个错误

```
UnboundLocalError: local variable 'instances' referenced before assignment 
```

何时`m = MyTest()`调用

我想我知道这不应该起作用（因为对实例的分配将是本地的并且在调用之间会丢失），但我不明白为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:53:18.760

错误的原因是 python 比我更聪明，并且确定实例是由赋值本地化的，并且不会在范围内找到赋值。正如@GeeTransit 在评论中指出的那样，这在 python3 中是可能的`nonlocal`

```
def nonlocal_singleton(cls):
    instances = None
    def getinstance():
        nonlocal instances
        if instances is None:
            instances = cls()
        return instances
    return getinstance

@nonlocal_singleton
class MyTest(object):
    def __init__(self):
        print('test') 
```

# java - 使用 Tuckey 的 UrlRewriteRule

> ID：11142995
> 
> 赞同：0
> 
> 时间：2012-06-21T16:53:26.717
> 
> 标签：java, web, tuckey-urlrewrite-filter

如何使用 tukey UrlRewrite 小写 url 中的每个字母？这就是我现在所拥有的，但似乎没有用。

`<rule match-type="regex"> <from>(.*)</from> <to type="redirect">${lower:$1}</to> </rule>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:01:32.630

您应该设置检查大写字母的条件。尝试这个

```
<rule>
   <name>Force  URL's that contain upper case letter to lower case</name>
   <condition type="request-uri" casesensitive="true">^.*[A-Z].*$</condition>
   <from>^(.*)$</from>
   <to type="permanent-redirect">${lower:$1}</to>
</rule> 
```