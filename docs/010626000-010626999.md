# StackOverflow 问答 10626000-10626999

# delphi - 我需要在 Delphi 中使用子字符串分隔符从 TStringStream 中解析字符串？

> ID：10626005
> 
> 赞同：4
> 
> 时间：2012-05-16T20:13:28.760
> 
> 标签：delphi, stream, substring, delphi-xe, stringstream

使用 Delphi XE，我需要将 TStringStream 解析为由字符串分隔的字符串。在一种情况下，分隔符字符串是 [eol]。流是使用 indy IdHttp 从网络服务器加载的。

然后我需要从 Stream 中解析出字符串，它们由字符串“[eol]”分隔。例如，StringStream 可以包含：

“12345[eol]这是]某事[eol]和[这没什么[eol]etc[etcetc[[eol]”

应该解析为：

“12345”

“这是]东西”

“而且[这没什么”

“等等[等等[”

我知道的大多数分隔符技术只使用单个字符分隔符，然后我还需要遍历整个 Stream 直到它结束。我不知所措，

问候阿德里安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:55:58.517

由于您已经在使用 Indy，您可以使用它的`SplitColumnsNoTrim()`功能将 a 拆分`String`为`TStrings`使用分隔符字符串，其中可以包含多个字符。顾名思义，`SplitColumnsNoTrim()`不会在分隔的子字符串之间应用任何修剪。如果要修剪，请`SplitColumns()`改用。

```
var
  Strm: TStringStream;
  Strings: TStringList;
begin
  Strings := TStringList.Create;
  try
    Strm := TStringStream.Create;
    try
      IdHTTP.Get('http://...', Strm);
      SplitColumnsNoTrim(Strm.DataString, Strings, '[eol]'); 
    finally
      Strm.Free;
    end;
    // use Strings as needed ...
  finally
    Strings.Free;
  end;
end; 
```

不过，我不建议使用 a`TStringStream`进行这种解析。 `TStringStream`在 D2009+ 中要求您在其构造函数中指定 a `TEncoding`（或让它默认为 OS 默认 Ansi 编码），如果您`TIdHTTP`直接下载到`TStringStream`. 您不会提前知道数据的字符集，除非数据始终是 ASCII。 `TIdHTTP`具有`String`使用数据的实际字符集将下载的数据解码为 a 的逻辑，因此您应该改用该功能，例如：

```
var
  Strings: TStringList;
begin
  Strings := TStringList.Create;
  try
    SplitColumnsNoTrim(IdHTTP.Get('http://...'), Strings, '[eol]'); 
    // use Strings as needed ...
  finally
    Strings.Free;
  end;
end; 
```

# c# - 调用每 5 秒返回一个值的方法

> ID：10626008
> 
> 赞同：3
> 
> 时间：2012-05-16T20:13:41.503
> 
> 标签：c#, c#-2.0

我想调用一个每隔几秒返回一个值的方法。我尝试过使用`Timer`with `elapsedEventandler`，但在这种情况下，该方法的返回类型为 void。我已经使用`TimerTask`该类在 Java 中执行相同的任务。

我希望它在 .NET 2.0 中，因为我正在使用 Visual Studio 2005。

以下是我遇到问题的程序。我尝试使用匿名方法，但`response`这种情况下的值在匿名方法之外不存在：

```
public static string Run(string address)
{                     
    string response = "A";
    Timer t = new Timer();
    t.Elapsed += delegate 
    {                         
        response = callURL(address);
        console.writeln(response);
        // The actual response value is printed here                
    };          
    t.Interval = 3000;
    t.Start();                      
    Console.WriteLine("response string is " + response);
    // response string is A

    return response;
}

public static string callURL(string address)
{
    className sig = new ClassName(); 
    String responseBody = sig.getURL(address);

    return responseBody;
} 
```

如何获取方法`response`中的值`Run`并将其发送给方法的调用者`Run`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T20:18:13.663

您可以让您的调用者给带有计时器的类一个回调委托以传回该值。

```
public class YourClass
{
    public static void Run(string address, Action<string> callback)
    {                     
        Timer t = new Timer();
        t.Elapsed += delegate {                         
            var response = callURL(address);

            callback(response);
        };          
        t.Interval = 3000;
        t.Start();
    }
}

public class OtherClass
{
    public void ProcessResponse(string response)
    {
         // do whatever you want here to handle the response...
         // you can write it out, store in a queue, put in a member, etc.
    }

    public void StartItUp()
    {
         YourClass.Run("http://wwww.somewhere.net", ProcessResponse);
    }
} 
```

**更新**：如果您希望调用者 ( `OtherClass`) 能够取消计时器，您可以简单地从 an 更改`Action<string>`为 a`Func<string, bool>`并让调用者 ( `OtherClass`) 返回一个关于是否停止计时器的布尔值......

```
public class YourClass
{
    public static void Run(string address, Func<string, bool> callback)
    {                     
        Timer t = new Timer();
        t.Elapsed += delegate {                         
            var response = callURL(address);

            // if callback returns false, cancel timer
            if(!callback(response))
            {
                t.Stop();
            }
        };          
        t.Interval = 3000;
        t.Start();
    }
}

public class OtherClass
{
    public bool ProcessResponse(string response)
    {
         // do whatever you want here to handle the response...
         // you can write it out, store in a queue, put in a member, etc.
         // check result to see if it's a certain value...
         // if it should keep going, return true, otherwise return false
    }

    public void StartItUp()
    {
         YourClass.Run("http://wwww.somewhere.net", ProcessResponse);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:16:14.170

创建一个`Thread`并让线程调用你想要的方法，并给线程一个睡眠时间 5 秒：

```
Thread loopThread = new Thread(new ThreadStart(this.MainLoop));
loopThread.Start();

private void MainLoop()
{
     while(true)
     {
         // Do stuff
         Thread.Sleep(5000);
     }
} 
```

# mysql - 唯一键与候选键/超级键（MySQL）

> ID：10626009
> 
> 赞同：2
> 
> 时间：2012-05-16T20:13:42.403
> 
> 标签：mysql, sql

下面的 SQL 代码创建两个表， (A) `__tableA__`， (B) `__tableB__`。两个表都包含 2 个唯一键，分别命名为`k1`和`k2`。

```
SHOW VARIABLES WHERE Variable_name = 'version';    # 5.0.51b

CREATE TABLE __tableA__ (`a` INT, `b` INT,
  UNIQUE KEY `k1`(`a`),
  UNIQUE KEY `k2`(`a`,`b`)
);                                       # Key_name      Column_name
                                         # -------------------------
SHOW KEYS FROM __tableA__;               # k1            a
                                         # k2            a
                                         # k2            b
CREATE TABLE __tableB__ (`a` INT,
  UNIQUE KEY `k1`(`a`),
  UNIQUE KEY `k2`(`a`)
);                                       # Key_name      Column_name
                                         # -------------------------
SHOW KEYS FROM __tableB__;               # k1            a
                                         # k2            a

DROP TABLE __tableA__;     # cleanup
DROP TABLE __tableB__;     # 
```

如命令所示，键的`SHOW KEYS`属性（列）集`k1`和`k2`

*   答：`{a}`和`{a,b}`，分别，
*   B:`{a}`和`{a}`，分别。

这表明，在 MySQL 中，***唯一键*****的概念不对应于*候选键*/*超级键******的任何一个概念：在情况 (A) 中， `k1`并且`k2`不能是候选键，因为`{a} ⊂ {a,b}`（因此属性集`k2`不是最小的）。在情况（B）中，`k1`并且`k2`不能是超级键，因为它们是具有相同属性集的不同键。***

 ***我的**问题**：这个结论正确吗？如果是这样，哪个权威来源明确说明了这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:40:29.830

你说的对。在 SQL 中，唯一性约束中定义的列集不一定是键（最小超键），如果这些列的某些适当子集也具有唯一性约束，则肯定不是。

与标准 SQL 不同，MySQL 语法的一个特点是它使用“KEY”作为“INDEX”的同义词，这似乎表明 MySQL 的作者不知道或不在乎什么是键！***

# javascript - Node.js/express 部署到不同环境

> ID：10626018
> 
> 赞同：0
> 
> 时间：2012-05-16T20:14:29.547
> 
> 标签：javascript, node.js, deployment, express

我正在服务器上使用 express 编写 node.js 应用程序。我还使用把手和预编译模板在客户端上使用。在本地运行应用程序时，我希望保留每个客户端源文件（模型、视图、util 文件）以进行调试，但是当我部署时，我希望编译模板和所有客户端 js 文件合并并缩小以在一个请求中提供服务。在我编写自己的部署脚本来执行此操作之前，是否有任何现有的框架/实用程序可以完成它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:44:35.647

您正在寻找资产经理

[https://github.com/TrevorBurnham/connect-assets](https://github.com/TrevorBurnham/connect-assets)

[https://github.com/mape/connect-assetmanager](https://github.com/mape/connect-assetmanager)

[https://github.com/Cowboy-coder/bundle-up](https://github.com/Cowboy-coder/bundle-up)

[https://github.com/dreamerslab/node.packer](https://github.com/dreamerslab/node.packer)

# svn - 本地签出的存储库在哪里？

> ID：10626022
> 
> 赞同：0
> 
> 时间：2012-05-16T20:14:42.957
> 
> 标签：svn, version-control, repository

我刚刚学会了使用 subversion 和一些命令，例如 checkout 和 add 和 list 等。
到目前为止，我学到的是，签出存储库意味着在本地创建一个工作副本，这样我们就可以修改文件然后提交更改到真正的存储库。
好的，到目前为止一切顺利，我们为此使用 checkout 命令，将 url 传递给存储库。
所以，我的问题可能看起来相当愚蠢，但是......这个工作副本在哪里？签出存储库后，工作副本在哪里创建，如何访问和修改包含的文件？
我对此感到非常困惑。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:18:28.100

结帐命令如下所示：

```
svn checkout REPOSITORY_PATH/project/directory [optional local target directory] 
```

如果您在`svn checkout`没有指定目标本地目录作为第二个参数的情况下执行 a ，则您检出的工作副本最终将位于与您检出时在任何工作目录中检出的项目相同的目录中。

例如，如果您使用以下命令签出`proj1`项目`your/repository/projects/proj1`：

```
svn checkout http://your/repository/projects/proj1 
```

您的工作副本最终会`proj1` *在您运行命令时所在的目录中*。因此，如果您从主目录执行此`/home/you`操作，它将是：`/home/you/proj1`

```
cd /home/you/proj1
svn info 
```

在大多数情况下，您应该指定本地目标目录来签出工作副本：

```
# Place the working copy in /home/you/code/proj1
svn checkout http://your/repository/projects/proj1 /home/you/code/proj1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:17:42.813

你在哪里运行 checkout 命令？除非您指定保存工作副本的位置，否则它将在您运行 svn checkout 命令的目录中检出。

随意放置您运行的结帐命令。如果您使用工具或 IDE，您使用的是什么？

# c# - SQL 浮点数与 C# Doubles 不同，如何处理 Infinity 的值？

> ID：10626026
> 
> 赞同：1
> 
> 时间：2012-05-16T20:14:59.257
> 
> 标签：c#, .net-4.0, types, sql-server-2008-r2, type-conversion

显然，[SQL 浮点数与 C# Doubles 相同](https://stackoverflow.com/a/122536/529618)并不完全正确，因为它们不能保存 Infinity 的值。

我有一个非常简单的数学模型来处理概率和回报期。

什么时候

`Double Probability = 0d`,

然后根据定义：

`Double ReturnPeriod = Double.PositiveInfinity`

当这些属性映射到插入命令的浮点参数时，我在尝试执行该过程时在 DataService 级别收到错误：

> 传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确。参数 134 ("@RETURNPERIOD")：提供的值不是浮点数据类型的有效实例。检查源数据中的无效值。无效值的一个示例是小数位数大于精度的数值类型数据。

我该如何解决这个问题？我不想诉诸于任何荒谬的事情，例如更改架构以存储 ReturnPeriods 的字符串表示，或者为每个浮点添加辅助列以存储它是 +Inf、-Inf 还是 NaN。

[像这样](http://connect.microsoft.com/SQLServer/feedback/details/239674/storing-ieee-754-floats-in-sql-server-2005-nan-infinity)的2006 年旧帖子并没有真正帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:24:12.320

我认为当他们说 SQL 浮点数等同于 Double 时，它​​们的表示是相似的（使用螳螂和指数以及 64 位编码）。

我建议将 Double.MaxValue 用作正无穷，将 Double.MinValue 用作负无穷。我怀疑您是否会在模型中使用这些值。

# php - 使用 PHP 5.2 计算 2 个时间戳之间的月数

> ID：10626028
> 
> 赞同：0
> 
> 时间：2012-05-16T20:15:00.847
> 
> 标签：php, datetime, timestamp

> **可能重复：**
> [在 php 中查找月份差异？](https://stackoverflow.com/questions/2681548/find-month-difference-in-php)

我的服务器托管多个网站，并且使用我正在使用的一些库，升级到 php 5.3 将非常困难。我计划在不久的将来这样做，但目前还没有。

我有两个时间戳，我想计算它们之间有多少个月。PHP 5.3 有 datetime.diff 功能，但由于我在 5.2 上，我目前不能使用它。

我有什么选择？我知道我可以通过减去时间戳来获取秒数，然后通过假设每个月有 30 天来获得月份，但我需要一个准确的结果。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:17:43.460

我个人采用这种方法：

```
$from = explode("-",date("Y-m-d",$fromStamp));
$to = explode("-",date("Y-m-d",$toStamp));
$months = ($to[0]-$from[0])*12+$to[1]-$from[1];
if( $to[1] == $from[1] && $to[2] > $from[2]) $months--; // incomplete month
if( $to[1] == ($from[1]+1)%12 && $to[2] < $from[2]) $months--; // other side
// result in $months 
```

# java - 发送巨大的电子邮件

> ID：10626030
> 
> 赞同：1
> 
> 时间：2012-05-16T20:15:04.860
> 
> 标签：java, jakarta-mail

我正在尝试使用 Java 邮件 API 发送电子邮件。但是我的电子邮件文本太大而无法存储在字符串中。

有没有办法发送带有字符串数组或任何集合之类的电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:20:24.547

您要发送附件吗？如果是这样，而不是自己编写消息，此链接中的附件示例可能很有用：http: [//java.sun.com/developer/onlineTraining/JavaMail/contents.html#SendingAttachments](http://java.sun.com/developer/onlineTraining/JavaMail/contents.html#SendingAttachments)

# facebook-like - Facebook 在 og:url 前添加“Facebook.com”，忽略打开的图形标签

> ID：10626031
> 
> 赞同：1
> 
> 时间：2012-05-16T20:15:04.773
> 
> 标签：facebook-like, facebook-opengraph

我有一个简单的应用程序，其中包含用户可以通过 Facebook 的“喜欢”按钮共享的“游戏”和“文章”页面。没有cookies，没有会话，没有登录。我的打开图形标签在页面上呈现如下：

```
<meta property="og:title" content="Sample title" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://foo.com/articles/article-one-title/" />
<meta property="og:image" content="http://cdn.com/articles/image.jpg" />
<meta property="og:site_name" content="Foo" />
<meta property="og:description" content="Foo description" /> 
```

当我使用 Facebook 的调试工具对页面进行 lint 时，它没有显示任何错误，并且抓取的页面也显示了上述标签。

但是，当我“喜欢”该页面时，出现的 url 是“http://www.facebook.com/articles/article-one-title/”，其余的 og 标签将被忽略。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:24:28.973

听起来您在“赞”按钮中输入了部分 URL。

```
/articles/article-one-title/ 
```

代替

```
http://foo.com/articles/article-one-title/ 
```

您的代码应该类似于`<fb:like href="http://foo.com/articles/article-one-title/" send="true" width="450" show_faces="true"></fb:like>`

不是

`<fb:like href="/articles/article-one-title/" send="true" width="450" show_faces="true"></fb:like>`

# google-docs-api - 谷歌驱动文件预览api

> ID：10626032
> 
> 赞同：6
> 
> 时间：2012-05-16T20:15:07.120
> 
> 标签：google-docs-api, google-drive-api

我想在网页上显示存储在谷歌驱动器上的文件（图像、视频、文档、xl、ppt、pdf）的预览。我应该使用哪个 api 或库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:39:13.070

您可以使用 Documents List API，将缩略图显示为预览。或者您可以下载/导出文件并自己生成预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T19:18:47.670

使用 google drive api，您可以通过 [https://www.googleapis.com/drive/v2/files/YourFileID](https://www.googleapis.com/drive/v2/files/YourFileID) 请求获取文件的元数据。然后解析 JSON 响应并使用文件信息中的 thumbnailLink

# c - Android NDK 是否支持大多数 UNIX 系统调用？

> ID：10626034
> 
> 赞同：4
> 
> 时间：2012-05-16T20:15:11.660
> 
> 标签：c, unix, android-ndk, system-calls

我正在尝试修复并移植一个用 C 编写的旧项目以在 Android 上运行。本项目使用系统调用，如 stat(file, inode) 和 system(command)。

Android NDK 是否完全支持这些功能？还是我最好用 Java 重写整个项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:29:27.377

是的，您可以在 Android NDK 中使用系统调用和 libc 函数。

*   [https://github.com/android/platform_bionic/blob/master/libc/SYSCALLS.TXT](https://github.com/android/platform_bionic/blob/master/libc/SYSCALLS.TXT)
*   系统（） - [https://github.com/android/platform_bionic/blob/master/libc/include/stdlib.h#L99](https://github.com/android/platform_bionic/blob/master/libc/include/stdlib.h#L99)
*   [https://github.com/android/platform_bionic/blob/master/libc/docs/OVERVIEW.TXT](https://github.com/android/platform_bionic/blob/master/libc/docs/OVERVIEW.TXT)
*   [http://mobilepearls.com/labs/native-android-api/](http://mobilepearls.com/labs/native-android-api/)

# ios - iOS 证书和配置文件的关系

> ID：10626035
> 
> 赞同：3
> 
> 时间：2012-05-16T20:15:16.597
> 
> 标签：ios, certificate, provisioning, flash-builder

是的，是的，另一个这样的。我知道所有的一般要点，什么是什么，如何生成等等。

只是有一些让我烦恼的东西。基本上，证书和配置文件的关系是什么？我没有找到正确的答案。我问的原因是我一直认为，因为当我们创建配置文件时，我们将其与开发（用于开发配置）或分发（用于临时和应用商店配置）证书相匹配，这意味着配置文件与证书相关联.

但是最近，在使用 Flash Builder 编译我的 Flex 应用程序时，我注意到不是这种情况，或者中间发生了一些我不明白的事情。基本上，我注意到我可以选择我的开发证书并使用临时配置，并且应用程序编译良好并且运行良好。我一直认为我不能这样做，因为我只能使用带有分发证书的临时配置。如果临时配置与分发证书相关联，这怎么可能？我不认为它真的与 FB 相关，因为最后我通过 iTunes 和 iOS 设备安装了该应用程序，它仍然有效，所以它一定是苹果的东西。

实际上，只要我不为 AppStore 分发，我就可以选择我想要的任何证书/配置文件组合，并且应用程序仍然可以在设备上编译和运行良好，只要 appid 和 udid 都很好. 显然，adhoc 和 appstore 配置禁用了进程附件（调试）并针对不同的服务服务器进行推送等，但除此之外，它很好。为什么在 iOS Provisioning 门户中有这种可见的匹配，即某些配置文件属于证书？

这是否意味着证书只是分离关注点（开发人员与公司/分销商）的方式。在 iOS Provisioning Portal 中，只有团队代理可以创建分发证书和临时配置文件，但是一旦生成，代理似乎可以处理临时配置文件给开发人员，他可以使用他的开发证书对其进行签名。

我在正确绑定所有内容时遇到问题，但仍然有意义。互联网，救命！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T18:59:05.083

很难用几句话回答您的问题，因为这是一个非常繁重的问题，涉及代码签名的多个方面（看起来您也可能遇到缓存问题）但是您的问题归结为两个问题 -

1.  证书/配置文件/密钥在创建 IPA 文件期间扮演什么角色？
2.  执行 IPA 时，设备如何验证 IPA？

让我们假设您正在使用 Xcode 并拥有一个企业 Apple 开发人员帐户，并且正在从头开始使用“钥匙串”实用程序来创建 CSR。在执行 CSR 创建时，会创建两个密钥（一个私钥和一个公钥），它们实际上会添加到您机器的钥匙串中。生成并保存在本地计算机上的 CSR 以加密形式包含您提供的所有信息（包括您的公钥） - 它使用您的私钥加密

{ 您的姓名 + 您的电子邮件 + 您的公钥} => 使用您的私钥加密 => CSR

现在，当您将编码的 CSR 和未加密版本的公钥副本发送给 Apple 时，他们可以确定您的身份，并确保 CSR 是您发送的 - 因为只有您拥有用于编码的私钥他们只能使用您的公钥成功解码的信息。

如果 CSR 验证成功，Apple 会获取您的 CSR 并创建开发者证书并允许您下载它。这基本上是由 Apple 签署的“公证”证书，证明您是经过验证的开发人员。可以将其视为使用 Apple 的私钥签名的文件，您可以使用 Apple 的公钥对其进行解码。此时您的身份和苹果身份已通过身份验证。

接下来，当您创建配置文件时，您必须选择它需要的成分 - udid、开发证书等

（UDIDS + Dev Certificates + App Identifier + Entitlements）=> Provisioning profile

接下来，您下载此配置文件将其添加到 Xcode（使用 Xcode 管理器） 哇，我们完成了！

现在您已经拥有了创建签名 IPA 文件的所有要素（密钥、配置文件、证书），XCode 介入并进行验证/背景检查。Xcode 验证这一点的方式是检查嵌入在所选移动配置文件中的每个单独的开发人员证书。它会检查您的钥匙串中是否有每个嵌入式开发人员证书的私钥/公钥（在配置文件中）。然后，它允许您使用任何具有匹配密钥的证书执行签名过程 - 即在您的钥匙串中具有匹配密钥的开发证书。您现在有一个签名的 IPA。希望能解释在 IPA 创建过程中事物是如何联系在一起的。当签署的 IPA 执行时，它们如何一起发挥作用是故事的第二部分 :)

# sql - SQL Server 过程返回 dbNull 而不是 sum

> ID：10626043
> 
> 赞同：1
> 
> 时间：2012-05-16T20:15:37.823
> 
> 标签：sql, sql-server, stored-procedures

我在 SQL Server 2005 中有以下存储过程：

```
ALTER PROCEDURE dbo.GetBondAmounts
    (
    @Username varchar(20)
    )
AS
    SELECT Bond.ID BondID, Powers.BondAmount + Charges.BondAmount BondAmount,
    BondFee.Amount + Powers.BondPremium + Charges.BondPremium + Forfeiture.CostOfApprehension + Forfeiture.AmountPaid BondTotal,
    BondFee.Amount + Powers.BondPremium + Charges.BondPremium + Forfeiture.CostOfApprehension + Forfeiture.AmountPaid
    - BalanceForgiveness.Amount - Payment.Amount BondBalance
    FROM Bond LEFT OUTER JOIN UserAgency ON Bond.Agency = UserAgency.Agency
    LEFT OUTER JOIN
    (
        SELECT BondID, SUM(AmountForgiven) Amount
        FROM BalanceForgiveness
        GROUP BY BondID
    ) AS BalanceForgiveness ON Bond.ID = BalanceForgiveness.BondID
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(Amount) Amount
        FROM BondFee
        GROUP BY Bond
    ) AS BondFee ON Bond.ID = BondFee.Bond
    LEFT OUTER JOIN
    (
        SELECT Powers.Bond, SUM(Charge.BondAmount) BondAmount,
        SUM(Charge.BondPremium) BondPremium
        FROM Powers INNER JOIN Charge ON Powers.Surety = Charge.PowerSurety
        AND Powers.PowerPrefix = Charge.PowerPrefix AND Powers.PowerNumber = Charge.PowerNumber
        GROUP BY Bond
    ) AS Powers ON Bond.ID = Powers.Bond
    LEFT OUTER JOIN
    (
        SELECT BondID, SUM(BondAmount) BondAmount, SUM(BondPremium) BondPremium
        FROM ChargeWithoutPower
        GROUP BY BondID
    ) AS Charges ON Bond.ID = Charges.BondID
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(CostOfApprehension) CostOfApprehension, SUM(AmountPaid) AmountPaid
        FROM Forfeiture
        GROUP BY Bond
    ) AS Forfeiture ON Bond.ID = Forfeiture.Bond
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(Amount) Amount
        FROM Payment
        GROUP BY Bond
    ) AS Payment ON Bond.ID = Payment.Bond
    WHERE UserAgency.Username = @Username
    OR EXISTS (SELECT * FROM Users WHERE Username = @Username AND Admin = 1) 
```

我得到了 BondAmount、BondTotal 和 BondBalance 的 dbNull 值。有时不会有 Charge 行或 BalanceForgiveness 行等。我认为我遇到的问题是，当有一个表不包含该行的数据时，整个计算变为空......我该如何解决这个问题给我每个债券的正确金额、总额和余额，无论有多少表有数据或没有数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:19:10.400

把你的总和包起来[`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)。

```
ISNULL (SUM(Charge.BondAmount), 0) 
```

如果您希望在没有要求和的元素时总和为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:38:56.500

@Albin：感谢您帮助我找到此解决方案。在 ISNULL 中包装 SUM 实际上什么也没做，但是当我执行以下操作时，它起作用了。感谢您帮助我找到解决方案。

```
ALTER PROCEDURE dbo.GetBondAmounts
    (
    @Username varchar(20)
    )
AS
    SELECT Bond.ID BondID, (ISNULL(Powers.Amount,0) + ISNULL(Charges.Amount,0)) BondAmount,
    (ISNULL(BondFee.Amount,0) + ISNULL(Powers.Premium,0) + ISNULL(Charges.Premium,0)
    + ISNULL(Forfeiture.CostOfApprehension,0) + ISNULL(Forfeiture.AmountPaid,0) + Bond.StateTax) BondTotal,
    (ISNULL(BondFee.Amount,0) + ISNULL(Powers.Premium,0) + ISNULL(Charges.Premium,0)
    + ISNULL(Forfeiture.CostOfApprehension,0) + ISNULL(Forfeiture.AmountPaid,0) + Bond.StateTax
    - ISNULL(BalanceForgiveness.Amount,0) - ISNULL(Payment.Amount,0)) BondBalance
    FROM Bond LEFT OUTER JOIN UserAgency ON Bond.Agency = UserAgency.Agency
    LEFT OUTER JOIN
    (
        SELECT BondID, SUM(AmountForgiven) Amount
        FROM BalanceForgiveness
        GROUP BY BondID
    ) AS BalanceForgiveness ON Bond.ID = BalanceForgiveness.BondID
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(Amount) Amount
        FROM BondFee
        GROUP BY Bond
    ) AS BondFee ON Bond.ID = BondFee.Bond
    LEFT OUTER JOIN
    (
        SELECT Powers.Bond, SUM(Charge.BondAmount) Amount,
        ISNULL(SUM(Charge.BondPremium), 0) Premium
        FROM Powers INNER JOIN Charge ON Powers.Surety = Charge.PowerSurety
        AND Powers.PowerPrefix = Charge.PowerPrefix AND Powers.PowerNumber = Charge.PowerNumber
        GROUP BY Bond
    ) AS Powers ON Bond.ID = Powers.Bond
    LEFT OUTER JOIN
    (
        SELECT BondID, SUM(BondAmount) Amount, SUM(BondPremium) Premium
        FROM ChargeWithoutPower
        GROUP BY BondID
    ) AS Charges ON Bond.ID = Charges.BondID
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(CostOfApprehension) CostOfApprehension, SUM(AmountPaid) AmountPaid
        FROM Forfeiture
        GROUP BY Bond
    ) AS Forfeiture ON Bond.ID = Forfeiture.Bond
    LEFT OUTER JOIN
    (
        SELECT Bond, SUM(Amount) Amount
        FROM Payment
        GROUP BY Bond
    ) AS Payment ON Bond.ID = Payment.Bond
    WHERE UserAgency.Username = @Username
    OR EXISTS (SELECT * FROM Users WHERE Username = @Username AND Admin = 1) 
```

# deployment - 目录中没有服务器登录：日志；netbeans 中的部署错误：服务器 GlassFish 的启动超时

> ID：10626044
> 
> 赞同：0
> 
> 时间：2012-05-16T20:15:39.123
> 
> 标签：deployment, netbeans, glassfish

我用 Netbeans 7.1.2 下载了 glassfish 3.1.2。Glassfish 工作了很多次。但现在它不想开始。这是我在 netbeans 中的内容：

启动 GlassFish Server 3.1.2 启动 GlassFish Server 3.1.2 C:\Users\أبو داود\Documents\NetBeansProjects\HelloWeb\nbproject\build-impl.xml:721：部署错误：服务器 GlassFish Server 3.1.2 的启动已计时 - out 查看服务器日志以获取详细信息。BUILD FAILED（总时间：20 分 0 秒）

我注意到域 1 中的日志不包含任何文件。我尝试从 cmd 启动服务器，我做了以下操作： cd C:\Program Files\glassfish-3.1.2\glassfish\bin C:\Program Files\glassfish-3.1.2\glassfish\bin>asadmin start-域域1

这是我收到的：

```
java.io.IOException: Couldn't get lock for C:\Program Files\glassfish-3.1.2\glas
sfish\domains\domain1\logs\server.log
        at java.util.logging.FileHandler.openFiles(Unknown Source)
        at java.util.logging.FileHandler.<init>(Unknown Source)
        at com.sun.enterprise.admin.launcher.GFLauncherLogger.addLogFileHandler(
GFLauncherLogger.java:100)
        at com.sun.enterprise.admin.launcher.GFLauncher.setup(GFLauncher.java:18
9)
        at com.sun.enterprise.admin.cli.StartDomainCommand.createLauncher(StartD
omainCommand.java:209)
        at com.sun.enterprise.admin.cli.StartDomainCommand.executeCommand(StartD
omainCommand.java:107)
        at com.sun.enterprise.admin.cli.CLICommand.execute(CLICommand.java:264)
        at com.sun.enterprise.admin.cli.AsadminMain.executeCommand(AsadminMain.j
ava:306)
        at com.sun.enterprise.admin.cli.AsadminMain.main(AsadminMain.java:238)
Attente du dلmarrage de domain1 ..Erreur lors du dلmarrage de domain domain1.
Le serveur a quittل le processus prلmaturلment avec le code de sortie 1.
Avant son arrمt, il a gلnلrل la sortie suivante :

Launching GlassFish on Felix platform
ERROR: Unable to create cache directory: C:\Program Files\glassfish-3.1.2\glassf
ish\domains\domain1\osgi-cache\felix
ERROR: Error creating bundle cache. (java.lang.RuntimeException: Unable to creat
e cache directory.)
java.lang.RuntimeException: Unable to create cache directory.
        at org.apache.felix.framework.cache.BundleCache.<init>(BundleCache.java:
131)
        at org.apache.felix.framework.Felix.init(Felix.java:629)
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.r
un(OSGiFrameworkLauncher.java:88)
Exception in thread "Thread-1" java.lang.RuntimeException: org.osgi.framework.Bu
ndleException: Error creating bundle cache.
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.r
un(OSGiFrameworkLauncher.java:90)
Caused by: org.osgi.framework.BundleException: Error creating bundle cache.
        at org.apache.felix.framework.Felix.init(Felix.java:634)
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.r
un(OSGiFrameworkLauncher.java:88)
Caused by: java.lang.RuntimeException: Unable to create cache directory.
        at org.apache.felix.framework.cache.BundleCache.<init>(BundleCache.java:
131)
        at org.apache.felix.framework.Felix.init(Felix.java:629)
        ... 1 more
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain.main(GlassFishMa
in.java:97)
        at com.sun.enterprise.glassfish.bootstrap.ASMain.main(ASMain.java:55)
Caused by: org.glassfish.embeddable.GlassFishException: java.lang.NullPointerExc
eption
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuild
er.build(OSGiGlassFishRuntimeBuilder.java:164)
        at org.glassfish.embeddable.GlassFishRuntime._bootstrap(GlassFishRuntime
.java:157)
        at org.glassfish.embeddable.GlassFishRuntime.bootstrap(GlassFishRuntime.
java:110)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher.launch(
GlassFishMain.java:112)
        ... 6 more
Caused by: java.lang.NullPointerException
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuild
er.newFramework(OSGiGlassFishRuntimeBuilder.java:230)
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuild
er.build(OSGiGlassFishRuntimeBuilder.java:133)
        ... 9 more
Error stopping framework: java.lang.NullPointerException
java.lang.NullPointerException
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher$1.run(G
lassFishMain.java:203) 
```

我应该怎么做才能在 netbeans 上运行 glassfish。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:16:13.360

我在 Windows 7 平台上使用 Glassfish 3.1.2 和 Netbeans 7.2beta 时遇到了同样的问题。

我已在 glassfish 安装目录和子目录的属性设置的安全选项卡中将**用户**权限更改为**完全控制**。

我还更改了Netbeans 安装的**兼容性“以管理员身份运行此程序”**设置，正如 Netbeans 在遇到 glassfish 错误时所建议的那样。

我不完全（或根本）不了解 Windows 7 中的安全性，因此不确定这可能对我的系统产生什么其他影响。似乎即使您是管理员，Windows 也将您视为用户，除非您明确告诉它不这样做。

# c# - 树数据结构 C# 到 JS

> ID：10626050
> 
> 赞同：2
> 
> 时间：2012-05-16T20:16:06.590
> 
> 标签：c#, javascript, tree, jstree

我有将传递给我的 JS 代码的 ac# 树结构，以填充下拉列表的层次结构。

有没有一种有效的方法来使用 JSON 传递 C# 树，然后在 JS 端遍历树（因为我已经有一个 C# 树，所以我没有在两边实现树结构）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:19:50.387

您的 C# 树结构是否可序列化？.NET 有几个 JSON 序列化程序：

[http://json.codeplex.com/](http://json.codeplex.com/)

[http://msdn.microsoft.com/en-us/library/bb410770.aspx](http://msdn.microsoft.com/en-us/library/bb410770.aspx)

[https://github.com/ServiceStack/ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:34:12.070

CIL 到 JavaScript 转换器怎么样？

*   [https://github.com/chrisdunelm/DotNetWebToolkit](https://github.com/chrisdunelm/DotNetWebToolkit)

    > Cil2Js：一个 CIL（.NET 字节码）到 JavaScript 的转换器

# java - RichFaces 4 webapp 的参考架构

> ID：10626053
> 
> 赞同：2
> 
> 时间：2012-05-16T20:16:22.937
> 
> 标签：java, jsf-2, richfaces

我目前正在研究是否应该将 GWT 2.4 或 RichFaces 4 用于我要构建的新 web 应用程序。我知道许多描述 GWT 应用程序体系结构的文档，但我还没有真正找到任何关于 RichFaces 应用程序的广泛描述。

我发现[了一篇关于 JSF with Spring and Hibernate from 2004 的旧文章](http://www.javaworld.com/javaworld/jw-07-2004/jw-0719-jsf.html)，但我正在寻找更新的东西。

我对如何使用 RichFaces 作为 UI 层来构建 webapp 以及如何最好地将托管 bean 连接到底层业务逻辑特别感兴趣。包和类图会派上用场，但文档示例应用程序也可以解决问题。

我宁愿在示例架构中没有 Spring 和 Hibernate，以便我可以更好地将其与纯 GWT webapps 进行比较。

你对我有什么指示吗？有没有类似参考架构的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:50:04.453

[JBoss 在他们的Developer Guide](http://docs.jboss.org/richfaces/latest_4_2_X/Developer_Guide/en-US/html/chap-Developer_Guide-Getting_started_with_RichFaces.html)上有一个关于使用 Maven 为 Richfaces 4 应用程序生成原型的很好的教程。据说，提供的 Maven 原型会生成如下结构：

```
new_project
├── pom.xml
├── readme.txt
└── src
    └── main
        ├── java
        │   └── org
        │       └── docs
        │           └── richfaces
        │               └── RichBean.java
        └── webapp
            ├── index.xhtml
            ├── templates
            │   └── template.xhtml
            └── WEB-INF
                ├── faces-config.xml
                └── web.xml 
```

*（这是给定来源中解释的结构的副本。更多信息：阅读整个指南。）*

这是你要求的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:10:22.553

与此同时，我通过重塑我的问题找到了答案。我没有寻找特定的与 JSF 相关的描述，而是对如何构建 JEE6 体系结构采取了更一般的看法。

对我来说最有用的是[官方的 Oracle JEE6 教程以及对](http://docs.oracle.com/javaee/6/tutorial/doc/index.html)[JBoss AS 7 Kitchensink 示例](https://docs.jboss.org/author/display/AS7/The+kitchensink+example+in+depth)的深入了解。

# java - 使用 javax.sound.sampled 定期“点击”

> ID：10626056
> 
> 赞同：3
> 
> 时间：2012-05-16T20:16:37.137
> 
> 标签：java, scala, audio, javasound

我尝试用 Scala 输出一些声音。我的问题是我每秒都会收到短暂的“噪音”/“点击”。类似的java程序没有这个问题。有人知道出了什么问题吗？

斯卡拉 2.9.2 java 1.6.0_31 OS X 10.7.3

```
import javax.sound.sampled._

object SinSoundMain extends App {
  val SAMPLE_RATE = 44100
  val SAMPLE_SIZE = 16
  val CHANNELS = 1
  val SIGNED = true
  val BIG_ENDIAN = true
  var format = new AudioFormat(SAMPLE_RATE, SAMPLE_SIZE, CHANNELS, SIGNED, BIG_ENDIAN)

  var info = new DataLine.Info(classOf[SourceDataLine], format);

  val auline = (AudioSystem.getLine(info)).asInstanceOf[SourceDataLine]
  auline.open(format)
  auline.start

  val start = System.currentTimeMillis()

  // play 10s
  while(System.currentTimeMillis() < (start + 10000)) {
    var index = 0

    // output blocks of 10000 samples
    var samples = 0.until(10000).map {x =>  math.sin((x+index) * 800.0 / 44100 * math.Pi)}

    // convert samples to Byte Array
    var byteSamples:Array[Byte] = samples.flatMap{ s => 
      val ss = (s * Short.MaxValue).toShort
      List((ss >> 8).toByte, (ss & 0xFF).toByte)
    }.toArray

    auline.write(byteSamples, 0, byteSamples.length)
  }

  // cleanup      
  auline.drain
  auline.close
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:22:35.007

您的代码中的错误`var index = 0`应该是在 while 循环开始之前，并且您应该`index += 10000`在循环结束时（内部）。这样做，听起来不错。

# python - 使用地图中的 eval() 执行 python 代码行

> ID：10626058
> 
> 赞同：3
> 
> 时间：2012-05-16T20:16:46.050
> 
> 标签：python, eval

假设我有一行代码是一个字符串：

```
a="print 'x + y = ', x + y" 
```

现在我想使用 eval() 执行它

因此，如果我事先已经给出了 x & y 值，我知道可以这样写：

```
eval (compile (a,"test.py", "single")) 
```

它会很好用。

但我想从字典中给他们价值。换句话说，如果我有一个字典：

```
b={'x':4,'y':3} 
```

我希望将进入 x 和 y 的值来自 b。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:20:13.803

你检查过[文档`eval()`](http://docs.python.org/library/functions.html#eval)吗？您可以使用更多参数来实现此目的。例如：

```
>>> b = {'x':4,'y':3}
>>> eval("x + y", b)
7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T01:24:41.873

对于语句，您应该使用`exec`：

在 Python 2.x 中：

```
exec "print 'x + y = ', x + y" in {'x':4,'y':3} 
```

在 Python 3.x 中：

```
exec("print('x + y = ', x + y)", {'x':4,'y':3}) 
```

（当然`print`在 Python 3 中不是语句，所以这种情况下不需要）

# php - 使用 gc_maxlifetime 在 PHP 中扩展会话不起作用

> ID：10626061
> 
> 赞同：3
> 
> 时间：2012-05-16T20:17:00.897
> 
> 标签：php, session, php-ini

我有以下代码来扩展我的`$_SESSION[]`变量。它们在大约 2-3 小时后到期。

我试图通过更改延长到 22 小时`session.gc_maxlifetime`，但几个小时后我仍然失去了我的会话。

```
//start sessions
ini_set('session.gc_maxlifetime', 60*60*22); // 22h - one day

//Output just to make sure config was changed.
echo ini_get("session.gc_maxlifetime"); 

session_start(); 
```

如何增加会话的持续时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:21:27.537

是的，它可能是： session.cookie_lifetime 默认为 0，意味着在关闭浏览器时终止。

如果您关闭客户端并再次打开它 session.gc_maxlifetime 无关紧要 - 它仅适用于未终止的会话。

或者，您可能在其他地方更早地调用会话开始，并且 session.gc_maxlifetime 更小。通常框架会设置这一点。重复调用会话开始不会改变会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:26:04.153

尝试在 php.ini 中更改它！由于会话生命周期是文件系统的事情，每个脚本的设置总是有问题的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:21:41.850

[手册页上](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)有关于此的注释；如果另一个使用同一目录存储会话数据的脚本没有设置 maxlifetime，它将使用较短的值。

# python - PIL 说它有“可用支持”但在保存文件时仍然给出 IOError

> ID：10626062
> 
> 赞同：5
> 
> 时间：2012-05-16T20:17:01.973
> 
> 标签：python, ubuntu, python-imaging-library, virtualenv, pip

我正在通过 ubuntu 上的 virtualenv 使用 PIL，通过 pip 安装。我已将 setup.py 文件更改为指向解码器库。安装 PIL 时收到此消息：

`PIL 1.1.7 SETUP SUMMARY`

 ````
version       1.1.7
platform      linux2 2.6.7 (r267:88850, Aug 11 2011, 12:16:10)
              [GCC 4.6.1]

--- TKINTER support available
--- JPEG support available
--- ZLIB (PNG/ZIP) support available
--- FREETYPE2 support available
--- LITTLECMS support available 
````  `但是当我保存文件时，我仍然收到“IOError：decoder jpeg not available”和“IOError：'decoder zip not available'”消息。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:33:53.917

我想我已经遇到了同样的问题。另外，我认为这是 [关于 PIL 错误的副本——IOError：解码器 zip 不可用](https://stackoverflow.com/questions/3544155/need-help-with-a-pil-error-ioerror-decoder-zip-not-available)

1.  下载 PIL 源
2.  下载 zlib
3.  将 PIL 源指向 zlib
4.  重建 PIL`

# c# - 使用 Mutex 同步特定队列中的三个流

> ID：10626067
> 
> 赞同：1
> 
> 时间：2012-05-16T20:17:48.827
> 
> 标签：c#, multithreading, synchronization, mutex

线程有点问题，请告诉我如何解决或者至少在哪个方向寻找，找了很长时间，但到目前为止没有成功......问题是：有3个线程，他们可以以任意顺序运行 (321;213;123...)。在我们不会运行的任何顺序流程中，它们都需要按照 1、2、3 的顺序运行。为此，请使用带有 ONE 互斥锁的线程同步。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:51:45.440

使用互斥锁来保护全局整数 iThread。初始化iThread 1.创建线程，为每个线程传入一个id：1,2,3。

在线程进程中，锁定互斥锁以检查 iThread。如果 iThread != 线程 id，则按条件等待。

if iThread = thread id: 解锁互斥锁，在threadproc中执行工作；在线程 proc 结束时：锁定互斥锁、++iThread 和信号条件，解锁互斥锁。

类似的东西。还有一百万种其他方式。

# ruby - Ruby动态数组：未定义的局部变量或方法's'用于main：Object（NameError）

> ID：10626068
> 
> 赞同：3
> 
> 时间：2012-05-16T20:18:05.793
> 
> 标签：ruby, arrays, dynamic

我还是红宝石的新手。由于某种原因没有看到我的阵列。我在 irb 中测试了我的代码逻辑，它似乎工作正常，但是当我在 if 语句中使用它时，它会因标题中的错误而中断。

```
$s = []

i = 0

File.open("test.log").each do | l |
    if l =~ /(m.)/
        s << [$1]
        i=i+1
    end

    if l =~ /(p.)/
        s[i-1] << $1
    end

end

s.each do |g|
    p g
end 
```

一个示例 test.log：

```
aaaaaaaaaaaaaaaaaa
m1
ggg
p1
p2
p3
p4
oooooooooooooo
m2
p1
p2
p3
p4
p5
gggggggggggggg
m3
p1
kkkkkkkkkkkk
m4
m5
llllllllllllll 
```

我怎样才能像这样得到一个数组？

```
[[m1,p1,p2,p3,p4], [m2,p1,p2,p3,p4,p5], [m3,p1], [m4], [m5]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:24:08.933

您已将数组声明为`$s`，但尝试将其访问为`s`. 就 Ruby 而言，这是两个不同的变量。您应该将其声明为`s = []`或始终访问它`$s`，例如`$s << [$1]`。

编辑：因为评论很受欢迎，我会补充一点，[Ruby 全局变量](http://www.techotopia.com/index.php/Ruby_Variable_Scope#Ruby_Global_Variables)（即那些以 开头的`$`）可能会导致非常难以调试的情况，我会劝阻你不要使用它们。我无法想到在不可能使用更清洁的解决方案的情况下使用全局的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:55:04.500

每次点击`m`一行时，您都应该在主数组中初始化一个新的子数组。如果你打了`p`一行，你追加到同一个索引。

```
index = -1;
array = []
File.open("test.log").each do |line|
  if line =~ /m./
    index = index + 1
    array[index] = []
    array[index] << line
  end

  if line =~ /p./
    array[index] << line
  end
end 
```

# r - 在读取文件时尝试在 R + 中使用过滤器读取具有 cbc.read.table 函数的文件的一些问题

> ID：10626070
> 
> 赞同：0
> 
> 时间：2012-05-16T20:18:10.663
> 
> 标签：r

a）我正在尝试使用R`cbc.read.table`中的`colbycol`包中的函数读取一个相对较大的 .txt 文件。根据我一直在阅读的内容，当我们有大文件（要读取超过 GB 的文件）时，这个包使工作更容易R）并且我们不需要所有的列/变量来进行分析。另外，我读到该函数`cbc.read.table`可以支持相同`read.table`的参数。但是，如果我传递参数`nrows`（为了在 R 中预览我的文件），我会收到以下错误：

```
#My line code. I'm just reading columns 5,6,7,8 out of 27
i.can <- cbc.read.table( "xxx.txt", header = T, sep = "\t",just.read=5:8, nrows=20)
#error message
Error in read.table(file, nrows = 50, sep = sep, header = header, ...) : 
formal argument "nrows" matched by multiple actual arguments 
```

所以，我的问题是：你能告诉我如何解决这个问题吗？

b) 之后，我尝试使用以下代码读取所有实例：

```
i.can.b <- cbc.read.table( "xxx.txt", header = T, sep = "\t",just.read=4:8) #done perfectly
my.df <- as.data.frame(i.can.b) #getting error in this line
Error in readSingleKey(con, map, key) : unable to obtain value for key 'Company' #Company is a string column in my data set 
```

所以，我的问题又是：我该如何解决这个问题？

c）您知道在读取文件时我可以过滤（按实例条件）的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:41:03.467

如果您想要预览，那么只需使用`read.table`nrow=20 和 colClasses 参数集来读取您的列。

# c# - 如何将值传递给以@开头的c#参数

> ID：10626074
> 
> 赞同：1
> 
> 时间：2012-05-16T20:18:21.307
> 
> 标签：c#, asp.net, string, url, parameter-passing

试图传递价值观但没有取得进展。

场景：有一个公共常量字符串，如下所示。

```
public const string ImageFile = @"http://xyz.com/scom/{0}?type={1}&wid={2}"; 
```

然后，我将获得上述所需的 0、1、2 所需的相关值。

问题是如何将我对 0,1,2 的值传递给上面的 const 字符串？

我的最终结果应该是

```
string mySTring = "http://xyz.com/scom/123?type=jpg&wid=200" 
```

请建议。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T20:19:49.667

使用`String.Format`：

```
string ActualImageFile = String.Format(ImageFile, param1, param2, param3); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T20:20:08.217

```
string.Format(@"http://xyz.com/scom/{0}?type={1}&wid={2}", param1, param2, param3); 
```

应该做的伎俩。

# php - Fpdf 和特殊字符

> ID：10626075
> 
> 赞同：1
> 
> 时间：2012-05-16T20:18:22.113
> 
> 标签：php, character-encoding, fpdf

我正在尝试用内置字体写出一些特殊字符，有什么办法吗？

$str = 'ščťžýáíéäúň§ôúőűáéóüöűú'; $str = iconv('UTF-8', 'windows-1252', $str);

结果是一个字母Š，不太好。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-24T13:51:38.530

我知道这是一个旧线程，但我这个周末遇到了这个问题并且花了很长时间谷歌搜索和玩，所以这是一个节省时间的方法。 [http://fpdf.org/en/script/script92.php](http://fpdf.org/en/script/script92.php)是使用变音符号（重音字符）的方法。但是您需要向其中添加一些代码...将其插入第 617 行

```
 /* Modified by Vinod Patidar due to font key does not match in dejavu bold.*/
    if ( $family == 'dejavu' && !empty($style) && ($style == 'B' || $style == 'b') ) {
        $fontkey = $family.' '.strtolower($style);
    } else {
        $fontkey = $family.$style;  
    }
    /* Modified end here*/ 
```

然后改变

```
if($family=='arial')
        $family = 'helvetica'; 
```

到

```
 if($family=='arial'||$family='dejavu')
        $family = 'helvetica'; 
```

然后不要使用示例“DejaVu Sans Condensed”中的字体，因为 Condensed 似乎意味着粗体版本不包含所有字符

您可能还需要从普通 fpdf.php 脚本添加 getPageWidth 和 getPageHeight 方法，因为它比 tfpdf.php 更新！

有了上面的改动

```
$pdflabel->AddFont('DejaVu','','DejaVuSans.ttf',true);  
$pdf->AddFont('DejaVu','B','DejaVuSans-Bold.ttf',true); 
```

与欧洲语言配合得很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:11:05.110

您需要使用 FPDF 的 tFPDF 衍生物。tFPDF 使用 PHP 多字节字符串函数并生成使用 UTF-8 编码的输出。FPDF 没有。您还需要使用支持您要使用的所有 Unicode 字符的字体。最常见的是，我将使用 Arial。

见： http: [//fpdf.org/en/script/script92.php](http://fpdf.org/en/script/script92.php)

# python - 如何在动画粒子时与 mayavi 窗口交互？（在粒子群优化期间）

> ID：10626078
> 
> 赞同：4
> 
> 时间：2012-05-16T20:18:42.847
> 
> 标签：python, mayavi

我正在尝试使用 Python 和 Mayavi2 制作粒子群优化的动画。

动画效果很好，我的问题是在动画动画时无法与情节进行交互。具体来说，我想转动图表并缩放。也许有人有做动画的经验？

我这样做的方式是首先计算粒子的位置，然后存储它们。计算完成后，我使用 point3d() 在第一个时间点绘制粒子的位置，然后使用 set() 方法迭代时间更新数据。

有没有办法可以转动图表？我听说过一些带有线程的东西，禁用了渲染，但我不知道如何在我的代码中做到这一点。除了很多其他的东西，我读过：

[http://code.enthought.com/projects/mayavi//docs/development/html/mayavi/mlab_animating.html](http://code.enthought.com/projects/mayavi//docs/development/html/mayavi/mlab_animating.html)

[http://code.enthought.com/projects/mayavi//docs/development/html/mayavi/tips.html#acceleration-mayavi-scripts](http://code.enthought.com/projects/mayavi//docs/development/html/mayavi/tips.html#acceleration-mayavi-scripts)

但它看不到如何使用它。

有什么建议么？

这是我的代码：

```
#!/usr/bin/env python
'''
    @author rt
'''
import pylab as plt
from numpy import *
from mayavi import mlab
from threading import Thread # making plotting faster?
import ackley as ac

class Swarm(Thread, object):
    '''
        constructor for the swarm
        initializes all instance variables
    '''
    def __init__(self,objective_function):
        Thread.__init__(self)
        # optimization options
        self.omega = 0.9 # inertial constant
        self.c1 = 0.06 # cognitive/private constant
        self.c2 = 0.06 # social constant
        self.objective = objective_function # function object

        self.max_iteration = 100 # maximal number of iterations
        # Swarm stuff
        self.number = 0
        self.best = [] # gbest; the global best position
        self.particles = [] # empty list for particles
        # temporary
        self.min = self.objective.min
        self.max = self.objective.max
        self.best_evolution = []
        # self.dimensions = 2 # dimensions NB! 

    '''
        add particles to the swarm
        find the best position of particle in swarm to set global best
    '''
    def add_particles(self, n):
        for i in range(n):
            particle = Particle(self)
            if i == 0: # initialize self.best
                self.best = particle.position
            if particle.eval() < self._eval(): # check if there is a better and if, set it
                self.best = copy(particle.position) 
            self.particles.append(particle) # append the particle to the swarm    

    def _eval(self):
        return self.objective.evaluate(self.best)

    def plot(self):
        for i in range(self.max_iteration):
            pos_x = []
            pos_y = []
            pos_z = []
            #print pos_x
            for particle in self.particles:
                [x,y,z] = particle.trail[i]
                pos_x.append(x)
                pos_y.append(y)
                pos_z.append(z)
            #print pos_x
            if i ==0:
                g = mlab.points3d(pos_x, pos_y,pos_z, scale_factor=0.5)
                ms =g.mlab_source
                ms.anti_aliasing_frames = 0
            ms.set(x=pos_x, y = pos_y, z = pos_z,scale_factor=0.5)     #updating y value
            #print pos_y
            #ms.set(x=pos_x) # update x values
            #ms.set(y=pos_y)     #updating y value
            #ms.set(z=pos_z)     #updating y value

        #for p in self.particles:
            #p.plot()
    def plot_objective(self):
        delta = 0.1
        v = mgrid[self.min:self.max:delta,self.min:self.max:delta]
        z = self.objective.evaluate(v)
        #mlab.mesh(v[0],v[1],z)
        mlab.surf(v[0],v[1],z) # surf creates a more efficient data structure than mesh
        mlab.xlabel('x-axis', object=None)
        mlab.ylabel('y-axis', object=None)
        mlab.zlabel('z-axis', object=None)

    def _info(self):
        self.plot()
        print '----------------------------'
        print 'The best result is:'
        print 'Coordinates:', self.best
        print 'Value: ', self._eval()
        #print 'with ', nreval, 'evaluations'
        print 'nr of particles: ', len(self.particles)
        print '----------------------------'  

    def run(self):
        self.plot_objective()
        self.best = self.particles[0].get_position()  
        iteration = 0
        while iteration < self.max_iteration:
            #if iteration!= 0: obj.scene.disable_render = True
            #disable_render = True
            for particle in self.particles:
                rnd_c1 = array([random.uniform(0,1),random.uniform(0,1)])
                rnd_c2 = array([random.uniform(0,1),random.uniform(0,1)])
                particle.velocity = self.omega * array(particle.velocity) + \
                                    self.c1 * rnd_c1 * (array(particle.best) - array(particle.position)) + \
                                    self.c2 * rnd_c2 * (array(self.best) - array(particle.position)) # TODO: change so independent rnd for components
                particle.position = array(particle.position) + particle.velocity
                if particle.eval() < particle.best_eval():
                    particle.best = copy(particle.position)
                    if particle.eval() < self._eval():
                        self.best = copy(particle.position)
                particle.update() # add the point to the trail
            iteration +=1
            self.best_evolution.append(self._eval())
            #obj.scene.disable_render = False
        print 'finished: ', iteration
        self._info()

'''
    Class modeling particle
'''
class Particle():
    def __init__(self, swarm):
        self.swarm = swarm
        x_rand = random.uniform(self.swarm.min,self.swarm.max)
        y_rand = random.uniform(self.swarm.min,self.swarm.max)
        self.position = array([x_rand,y_rand])
        v_x_rand = random.uniform(self.swarm.min,self.swarm.max)
        v_y_rand = random.uniform(self.swarm.min,self.swarm.max)
        self.velocity = array([v_x_rand, v_y_rand])
        self.size = 0.5
        self.best = self.position
        # visualization
        self.trail = []

    def plot(self):
        [x,y] = self.position
        z = self.eval()
        mlab.points3d(x,y,z,scale_factor=self.size)
    def eval(self):
        return self.swarm.objective.evaluate(self.position)
    def best_eval(self):
        return self.swarm.objective.evaluate(self.best)
    def get_position(self):
        return self.position
    def update(self):
        [x,y] = self.position
        z = self.eval()
        #print [x,y,z]
        self.trail.append([x,y,z])
    def plot_trail(self,index):
        [x,y,z] = self.trail[index]
        mlab.points3d(x,y,z,scale_factor=self.size)

# Make the animation
mlab.figure(1, bgcolor=(0, 0, 0), size=(1300, 700)) # create a new figure with black background and size 1300x700

objective = ac.Ackley() # make an objective function

swarm = pso.Swarm(objective) # create a swarm
nr_of_particles = 25 # nr of particles in swarm

swarm.add_particles(nr_of_particles)      
swarm.run()
#swarm.start()
mlab.show()

print '------------------------------------------------------'
print 'Particle Swarm Optimization'
#objective.info()
print 'Objective function to minimize has dimension = ', objective.get_dimension()
print '# of iterations = ', 1000
print '# of particles in swarm = ', nr_of_particles
print '------------------------------------------------------' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T21:18:28.740

就我而言，即使我能够做到 Brandon Rhodes 建议的模拟程序（[https://stackoverflow.com/questions/16617814/interacting-with-mlab-scene-while-it-is-being-drawn](https://stackoverflow.com/questions/16617814/interacting-with-mlab-scene-while-it-is-being-drawn) )，我无法转换我已经存在的较大程序。

然后我找到了这个链接：[http ://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)

`wx.Yield()`所以，我只是在我的循环中撒了很多s 。这样我就不需要改变我的程序结构，并且我能够与窗口进行交互。我认为链接中解释了更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T07:35:21.253

您的问题是，`wx`运行 Mayavi GUI 窗口并监听鼠标单击和拖动并通过移动场景进行响应的事件循环在动画期间没有任何时间运行，因为您将 Python 保持在循环中而不会让它`return`控制。

您不需要使用自己的循环来保持对程序的控制，而是需要创建一个`wx.Timer`通过一帧更新来推进场景的类，然后`wx`在再次调度自身后将控制权返回给事件循环。它看起来像这样：

```
import wx

...

class Animator(wx.Timer):

    def Notify(self):
        """When a wx.Timer goes off, it calls its Notify() method."""

        if (...the animation is complete...):
            return

        # Otherwise, update all necessary data to advance one step
        # in the animation; you might need to keep a counter or
        # other state as an instance variable on `self`

        # [DATA UPDATE GOES HERE]

        # Schedule ourselves again, giving the wx event loop time to
        # process any pending mouse motion.

        self.Start(0, oneShot=True)  # "in zero milliseconds, call me again!" 
```

我使用了稍高的值，例如运行 UI`1`的毫秒数`wx`，但无法真正区分这与仅选择`0`并“立即”返回控件之间的区别。

# google-app-engine - AppEngine 数据存储对象上的数据表示问题

> ID：10626083
> 
> 赞同：2
> 
> 时间：2012-05-16T20:19:06.267
> 
> 标签：google-app-engine, google-cloud-datastore

## *数据*结构：

*   列长度​​为 3 的二维字符串数组。

*   > 例如。{["一","二","三"],["一","二","三"],["一","二","三"],...}

## *数据类型*尝试过但不起作用：

*   字符串[][3]
*   数组列表<字符串[3]>

如果不是上述数据类型，如何表示这些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:01:50.997

如果您使用的是 com.google.appengine.api.datastore API，实体属性必须是数据存储区原生类型之一，或者是数据存储区原生类型（或多个类型）的值的集合。单个属性值不能表示没有序列化的二维列表，单个属性名称也不能表示多个值（Collection 情况）。

如果您可以序列化，那么这是一个潜在的答案。如果您对查询数组中的值有索引要求，那么您需要描述这些以找出答案。例如，数组中的条目可以是单独的实体，每个实体都有“第一”、“第二”和“第三”属性；主要实体有一个键列表。

# python - python随机排序相同值的项目

> ID：10626087
> 
> 赞同：10
> 
> 时间：2012-05-16T20:19:27.357
> 
> 标签：python

这有点棘手，我想不出任何简洁的东西。

我有一个按元组项目排序的元组列表。这些项目可能具有相同的值，因此如下所示：

```
a = [(a,1), (b,1), (c, 1), (d,2), (e,2), (f,2)] 
```

我正在寻找的是一种在他们自己的集合中随机化所有 1 和 2 的顺序的方法。这是为了替换一点mysql：

```
ORDER BY num_of_hotdogs DESC, rand() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T20:21:44.730

您可以通过由它们自己组成的元组然后是随机数对项目进行排序。如果`v_1 < v_2`, `(v_1, random.random()) < (v_2, random.random())`; 如果`v_1 == v_2`，它将回退到比较随机数。

```
sorted(a, key=lambda v: (v, random.random())) 
```

# jsf-2 - 如何指定消息是否应显示在 p:growl 或 p:messages 中？

> ID：10626089
> 
> 赞同：5
> 
> 时间：2012-05-16T20:19:40.783
> 
> 标签：jsf-2, primefaces, messages

在我的 Facelets 页面中，我有这个：

```
<p:growl id="msg1" life="1500"/> 
```

和另一个

```
<p:messages id="msg2"/> 
```

我只需要显示以下消息`<p:messages>`。

```
FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("veillez saisir les champs obligatoires (*)", null)); 
```

但它也出现在`<p:growl>`.

如何指定消息的显示位置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T13:30:26.070

摘自 primefaces 手册。第 282 页。

**可定位的消息**

有时您可能需要将一条或多条消息定位到特定消息组件，例如，假设您在同一页面上有咆哮和消息，并且您需要在咆哮和消息中显示一些消息。用于属性将消息与特定组件相关联。

```
<p:messages for="somekey" />
<p:growl for="anotherkey" /> 
```

豆子

```
FacesContext context = FacesContext.getCurrentInstance();
context.addMessage("somekey", facesMessage1);
context.addMessage("somekey", facesMessage2);
context.addMessage("anotherkey", facesMessage3); 
```

在上面的示例中，消息将显示第一条和第二条消息，而咆哮将只显示第三条消息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-16T20:51:29.927

因为`p:messages`只是扩展，`h:messages`实际上`p:growl`是`h:messages`你不能做的事情。您可以做的是`p:growl`在添加消息后不更新`context`（可能您在某些“确认”中这样做`commandButton`）然后它根本不会显示，但您不能指定只显示一些消息。更好的解决方案是不要混合`p:growl`并`p:messages`只使用一种。

您正在寻找的功能将在新的**Primefaces 3.3** [Targetable 消息中提供](http://blog.primefaces.org/?p=1894)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:56:21.357

由于您已经为 and 分配了 2 个不同的 ID `<p:growl>`，`<p:messages>`我认为您可以尝试以下操作：

```
<div id="aDiv">

    ### Use the following button to update only <p:growl id="msg1"> ###
    <p:commandButton actionListener="#{mrBean.doSomething}" update="msg1" />

    ### Use the following button to update only <p:messages id="msg2"> ###
    <p:commandButton actionListener="#{mrBean.doSomethingElse}" update="msg2" />

</div> 
```

关键是你应该只更新一个`msg1`或`msg2`，而不是两个。在上面的示例中，如果您的按钮具有属性`update="aDiv"`，则您的消息将同时显示在`<p:growl>`和上`<p:messages>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T07:40:00.863

您可以使用 p:growl 的“严重性”属性来指定您希望仅在 Growl 中显示的消息类型。

```
<p:growl id="messages" severity="info, warn, error, fatal" showDetail="true" life="5200" autoUpdate="true" /> 
```

现在，如果您不想将 Growl 用于信息消息，那么只需删除“信息”参数，然后您可以使用 p:message 或您自己选择的任何文本并相应地设置样式`<p:outputLabel value="A Validation error occured!" rendered="#{facesContext.validationFailed}" />` 所以这样您就可以根据 Growl 和消息使用到你的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-10T14:32:27.963

很简单，这里是 JSF + PrimeFaces 5.2 中的一个例子

```
<p:messages for ="Message1" showDetail="true" autoUpdate="true" closable="true" />

<p:messages for ="Message2" showDetail="true" autoUpdate="true" closable="true" /> 
```

```
FacesContext.getCurrentInstance().addMessage("Message1", new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error!", "Hello 1"));
FacesContext.getCurrentInstance().addMessage("Message2", new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error!", "Hello 2")); 
```

# asp.net - 解决站点地图限制

> ID：10626094
> 
> 赞同：0
> 
> 时间：2012-05-16T20:20:14.883
> 
> 标签：asp.net, navigation, sitemap

文档很清楚：站点地图中的两个节点不能指向同一个文件。但我需要能够做到这一点（不同的角色运行相同的报告）。这是否意味着我必须放弃站点地图？我讨厌这样做，因为我真的很喜欢它的其他功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:43:45.860

在仍然使用 ASP.Net 站点地图的同时，简单的解决方案是通过添加虚拟查询字符串/锚参数来区分这 2 个 URL。例如。

```
<siteMapNode url="~/Report.aspx?x=1" title="Report 1"  description="Report 1" /> 
<siteMapNode url="~/Report.aspx?x=2" title="Report 2"  description="Report 1 with different name" /> 
```

或者

```
<siteMapNode url="~/Report.aspx#1" title="Report 1"  description="Report 1" /> 
<siteMapNode url="~/Report.aspx#2" title="Report 2"  description="Report 1 with different name" /> 
```

我个人更喜欢查询字符串解决方案

# python - 我的 foo.js 在 Django runserver 中工作，但在 Apache (wsgi) 中我得到 404。为什么？

> ID：10626096
> 
> 赞同：0
> 
> 时间：2012-05-16T20:20:24.560
> 
> 标签：python, django, apache, url, routing

每个 url 在 Apache 和 django runserver 中都可以正常工作，除了 url（指向视图，而不是真实文件），如下所示：

```
foo.js 
```

**网址.py：**

```
url(r'^foo.js$', 'myapp.views.foo', name="foo"), 
```

**视图.py：**

```
def foo(request):
    return HttpResponse("foo") 
```

在**开发服务器**中调用此 url 输出我`foo`

在带有 mod_wsgi 的**Apache**中，我得到的 url 相同`404`

**wsgi conf 文件**（非常基础）：

```
import os
import sys, logging

sys.stdout = sys.stderr

path = '/var/www/vhosts'
if path not in sys.path:
   sys.path.insert(0, path)
   sys.path.insert(0, path + '/myapp')

os.environ['DJANGO_SETTINGS_MODULE'] = 'myapp.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

经典的 url 像`/foo/`预期的那样工作。

问题出在哪里？这是我不知道/不认识的 apache 行为吗？是 Django 路由吗？

**编辑**：

添加 apache conf 后（感谢可能显而易见的提示），我认为 *.js 上的 AliasMatch 是问题所在。我完全忘记了它们！

```
<VirtualHost *:80>
        DocumentRoot "/var/www/vhosts/myapp"
        ServerName www.myapp.local

    Alias /robots.txt  /var/www/vhosts/myapp/public/static/robots.txt
    Alias /favicon.ico /var/www/vhosts/myapp/public/static/favicon.ico

    AliasMatch ^/([^/]*\.css) /var/www/vhosts/myapp/public/static/$1
    AliasMatch ^/([^/]*\.js)  /var/www/vhosts/myapp/public/static/$1

    Alias /media/  /var/www/vhosts/myapp/public/media/
    Alias /static/ /var/www/vhosts/myapp/public/static/

    <Directory /var/www/vhosts/myapp>
                Order allow,deny
                Allow from all
        </Directory>

        WSGIDaemonProcess myapp.djangoserver processes=2 threads=15 display-name=%{GROUP}
        WSGIProcessGroup myapp.djangoserver

        WSGIScriptAlias / /var/www/vhosts/myapp/apache/django.wsgi
LogLevel info
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:28:26.443

您是否将 Apache 设置为分别为设置为`MEDIA_ROOT`和`STATIC_ROOT`at`MEDIA_URL`和的目录提供服务`STATIC_URL`？在开发中，Django 为您提供静态媒体，因此您不需要完整的网络服务器堆栈，但在生产中，由您来提供文件。

**更新**

只需删除`AliasMatch`线条。如果您已经`Alias`为 /media/ 和 /static/ 设置了指令，则它们是不必要的。所有静态资源都将位于这两个目录之一中。

另外，不要忘记运行`python manage.py collectstatic`. 否则，as 指定的目录`STATIC_ROOT`将为空，这显然也会导致 404。

# asp.net - 为 AspxGridView 的列标题显示上下文菜单

> ID：10626102
> 
> 赞同：0
> 
> 时间：2012-05-16T20:20:51.347
> 
> 标签：asp.net, devexpress, contextmenu, aspxgridview

**[我在此处的文档](http://documentation.devexpress.com/#WindowsForms/CustomDocument708)**中阅读了有关弹出菜单的信息。我不清楚这个菜单是否已经提供，我们只需要启用一个特定的属性就可以了？或者它只是一个弹出菜单的示例并且需要创建？我刚刚开始探索 devexpress 网格，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:30:00.683

本主题专门讨论 XtraGrid - Winforms 网格。ASPxGridView 不提供此菜单，您可以尝试自己实现它，如

[ASPxGridView - 如何以类似于 ASPxPivotGrid 的方式实现显示/隐藏列](http://www.devexpress.com/Support/Center/e/E3812.aspx)

例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:01:09.920

```
It is possible we can create context menu on aspxgridview. Find the following example for aspxgridview context menu.

Default.aspx:
=============

<dx:ASPxGridView ID="grvContexMenuExample" runat="server" AutoGenerateColumns="false"
    KeyFieldName="ID" EnableViewState="true" ClientInstanceName="grdtest" Width="100%"
    Settings-GridLines="None" OnHtmlRowPrepared="grvContexMenuExample_HtmlRowPrepared">
    <ClientSideEvents ContextMenu="function(s,e) {
                                                       if(e.objectType == 'header')
                                                        {
                                                               headerContextMenu.ShowAtPos(e.htmlEvent.clientX, e.htmlEvent.clientY);
                                                         }
                                                         else if(e.objectType == 'row')
                                                         {
                                                             headerContextMenu.ShowAtPos(e.htmlEvent.clientX, e.htmlEvent.clientY);
                                                         }
                                                    }" />
    <Columns>

    <%--Your columns goes here--%>
        <columns>
</dx:ASPxGridView>

<!--Start New  Context Menu !-->
<dx:ASPxPopupMenu ID="mnContextMenu" runat="server" ClientInstanceName="headerContextMenu"
    EnableAnimation="false" PopupHorizontalAlign="OutsideRight" PopupVerticalAlign="TopSides"
    PopupAction="RightMouseClick">
    <Items>
        <dx:MenuItem Text="New Context Menu1">
        </dx:MenuItem>
    </Items>
    <ClientSideEvents ItemClick="ContextMenuItemClick" />
</dx:ASPxPopupMenu>
<!--End New   Context Menu !-->

Default.aspx.cs:
================

  protected void grvContexMenuExample_HtmlRowPrepared(object sender, ASPxGridViewTableRowEventArgs e)
        {

            if (e.RowType == GridViewRowType.Data)

                if (e.RowType == GridViewRowType.Header)
                {

                    e.Row.Attributes.Remove("oncontextmenu");
                }

        } 
```

# design-patterns - 开闭原则和建造者模式

> ID：10626104
> 
> 赞同：0
> 
> 时间：2012-05-16T20:20:58.683
> 
> 标签：design-patterns, solid-principles

任何人都可以分享使用Builder模式来确认OCP（Open-Closed Principle）的示例。还有哪些模式与 OCP 相关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:23:10.727

刚读完[Jeremy Miller 的 The Open Closed Principle](http://msdn.microsoft.com/en-us/magazine/cc546578.aspx#id0390046)，它很好地解释了 OCP 和其他相关的 SOLID 原则。它没有提到构建器模式，但它推荐了这种用于 OCP 实现的模式：

*   [责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)
*   [双调度模式](http://en.wikipedia.org/wiki/Double_dispatch)

# javascript - 从网页更新 Facebook 状态

> ID：10626105
> 
> 赞同：-2
> 
> 时间：2012-05-16T20:20:58.793
> 
> 标签：javascript, jquery, facebook, html

我有一个 Web 应用程序，它使用 HTML5、javascript 和 jquery 向人们发送消息。我现在想让从网页更新您的 Facebook 状态成为可能。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:35:29.687

您基本上必须执行以下操作：

1.  创建一个应用程序，代表您的 Facebook 用户进行发布
2.  让 Facebook 用户允许应用程序为用户发帖（publish_stream 权限）。您应该为此获得一个访问令牌
3.  获得具有正确权限的访问令牌后，您需要向**https://graph.facebook.com/[FB UID]/post?access_token=[access token]**发送 Facebook Graph API 请求，并使用 POST 参数定义您的状态更新。您可以在此处查看参数：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)
4.  如果成功，API 调用应该返回一个 POST ID，以便您可以在帖子中查询喜欢、评论等内容。

你可以在这里查看我的 Facebook Graph API 教程：

[http://net.tutsplus.com/tutorials/php/wrangling-with-the-facebook-graph-api/](http://net.tutsplus.com/tutorials/php/wrangling-with-the-facebook-graph-api/)

该教程实际上是您正在寻找的 - 一个使用 Graph API 发布到不同 Facebook 页面/帐户的网站。它有点过时了（例如，Facebook 已经删除了 offline_access 权限），但稍作调整，它应该可以再次完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:25:10.773

您将要研究使用[Facebook Graph API](https://developers.facebook.com/docs/reference/api/)。实际上，更新您的 Facebook 状态是一个相当冗长的过程，无法在此处描述，但他们的文档将帮助您朝着正确的方向开始。

# linq - 使用 LINQ 从 CheckedListBox.CheckedItems 创建字符串集合

> ID：10626107
> 
> 赞同：0
> 
> 时间：2012-05-16T20:21:00.743
> 
> 标签：linq, entity-framework-4, checkedlistbox

我已经使用实体框架来填充一个选中的列表框。我想将检查项目的名称作为字符串集合获取，以便它们可以用作另一个 LINQ 查询的过滤器。

我像这样填充列表框...

```
_eventTypesCheckedList.DataSource = this._dataContext.tblEventTypes.OrderBy(ev => ev.EventTypeName);
_eventTypesCheckedList.DisplayMember = "EventTypeName"; 
```

这就是我无法获得字符串集合的原因......

```
var types = from eType in ((_eventTypesCheckedList.CheckedItems) as IEnumerable< tblEventType > )
            select new string( eType.EventTypeName.ToCharArray() ); 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:26:17.647

使用扩展方法投射您的`CheckItems`收藏：`.Cast<Type>()`

```
_eventTypesCheckedList.CheckedItems.Cast<tblEventType>() 
```

# jquery - jQuery UI Draggable/Sortable - 动态添加的项目不可拖动

> ID：10626108
> 
> 赞同：11
> 
> 时间：2012-05-16T20:21:02.037
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我有一组可拖动/可排序的列表，我正在动态添加项目，但问题是，一旦添加了项目，就无法将它们移动到新列表中。您可以在此处查看功能：http: [//jsfiddle.net/Y4T32/2/](http://jsfiddle.net/Y4T32/2/)

将一个项目从可用列表拖到目标列表之一，您就会明白我的意思。现在添加一个“标注”并尝试将新项目拖到目标列之一。

我在这里找到了另一个我想要的答案，但无法重现他们得到的结果（当然，现在找不到答案）。任何洞察我在这里做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T20:42:02.180

**更新的答案**

您必须调用`.draggable()`每个添加的元素。您在初始化时使用的 jQuery 选择器仅适用于当前存在的元素，而不适用于您将创建的元素。

这是一些应该工作的JS：

```
var draggable_opts = {
            connectToSortable: ".sph-callout-portlet",
            helper: "clone",
            opacity: 0.75,
            revert: 'invalid',
            stop: function(event, ui) {
                //alert(ui)
            }
        };

$(function() {
    $( ".sph-callout-portlet" ).sortable({
        opacity: 0.75,
        placeholder: "ui-state-highlight",
    }).disableSelection();

    $( "#sph-callout-portlet-avail li" ).draggable(draggable_opts);

    $(document).on("click",'#addNewCo',function(e){
        e.preventDefault();
        var newCo = $('<li>New Callout</li>').draggable(draggable_opts);
        $('#sph-callout-portlet-avail').append(newCo);
    });
});​ 
```

[http://jsfiddle.net/SGevw/](http://jsfiddle.net/SGevw/)

# javascript - 如果选择框不为空，则属性更改

> ID：10626110
> 
> 赞同：2
> 
> 时间：2012-05-16T20:21:08.247
> 
> 标签：javascript, jquery, html

我正在尝试检查`select`根据用户选择填充的框的值，一旦用户从中选择选项，此选择将​​被填充`other select boxes`，现在`document.ready()`选择为空，我需要检查此选择是否仍然为空，然后禁用按钮，否则，再次启用它。

这是我尝试过的，它感觉到投递箱是空的，但在它被填充时却不是！

```
if ($('#course-selection').html(null)) {
$('#show-wall-button').attr('disbaled','disabled');
}

else {
$('#show-wall-button').removeAttr('disabled');  
} 
```

当页面加载时，这已经触发了`document.ready`事件！。

我也试过这个，但没有奏效

```
if ($('#course-selection').val(null)) {
    $('#show-wall-button').attr('disbaled','disabled');
    }

    else {
    $('#show-wall-button').removeAttr('disabled');  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:24:11.593

你可以试试这个：

```
$('#show-wall-button').prop('disabled', $('#course-selection').is(':empty')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:37:02.157

```
<select id="course-selection">
   <option value="">null</option>
   <option value="1">option1</option>
</select> 
```

如果您想获得选定的值：

```
if($("#course-selection option:selected").val()=="")
   $('#show-wall-button').attr('disbaled', true);
else
   $('#show-wall-button').removeAttr('disabled'); 
```

如果要获取选定的文本：

```
if($("#course-selection option:selected").text()=="null")
   $('#show-wall-button').attr('disbaled', true);
else
   $('#show-wall-button').removeAttr('disabled'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:24:32.647

检查的内容`<select>`有点混乱。您如何做一些事情，例如添加一个属性`data-populated="false"`并将其设置为`true`当您填充它时。然后你可以在你的条件下检查元素的属性状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:23:51.377

试试看：

```
if ($('#course-selection').val() === '') { 
   $('#show-wall-button').prop('disbaled', true);
}

else {
   $('#show-wall-button').prop('disabled', false);  
} 
```

来自 API：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T20:24:02.077

```
if ($('#course-selection').val(null)) 
```

应该

```
if ($('#course-selection').val() == '') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T20:24:04.823

`$('#course-selection option').length`代替您当前使用的条件呢？无论如何，我觉得可能有更好的方法来做你想做的事，而不必检查选择框内是否有选项标签。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T20:29:37.643

听从@Raminson 的建议

但是在示例`disabled`中拼写错误（`disbaled`）因此它永远不会`disabled`在填充时 removeAttr，因为您分配的属性拼写错误`disbaled`

# java - 在 OnTouch 中更改页面

> ID：10626117
> 
> 赞同：0
> 
> 时间：2012-05-16T20:21:51.627
> 
> 标签：java, android, android-intent, touch-event

我知道怎么做，所以你会在 onClick 上打开一个新页面，但是当我将相同的代码放入 onTouch 时它不起作用？这是我的代码...如果我单击错误，对我有任何帮助我收到一条消息“构造函数 Intent（Tab3，Class）未定义”，它希望我将其设置为“= new Intent”但是这对我没有意义。

```
public boolean onTouch(View v, MotionEvent event) 
    {
        if(rect2.contains((int) event.getX(),(int) event.getY()))
        {
            Intent SectionManager = new Intent (this, SectionManager.class);
            startActivity (SectionManager);
        }
        return true;
    } 
```

编辑有关我的代码的更多信息！

```
public class Tab3 extends View implements OnTouchListener
{
    LinearLayout myLayout;
    int x1, x2, y1, y2, x, y;
    // x, y;
    Rect rect2 = new Rect();

    public Tab3(Context context, AttributeSet attrs)
    {
        super (context, attrs);

        myLayout = (LinearLayout) findViewById(R.id.myLayout);

        x1 = 0;
        x2 = 300;               //1280 by 748
        y1 = 0;
        y2 = 300;

        setFocusable(true);
        setFocusableInTouchMode(true); 
        setOnTouchListener(this);
        requestFocus();
    }

    @Override
    protected void onDraw(Canvas canvas) 
    {
        super.onDraw(canvas);

        Paint blue = new Paint();
        blue.setColor(Color.BLUE);
        canvas.drawRect(rect2, blue);
        rect2.set(x1, y1, x2, y2);

        invalidate();
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        if(rect2.contains((int) event.getX(),(int) event.getY()))
        {
            Intent SectionManager = new Intent (Tab3.this, SectionManager.class);
            startActivity (SectionManager);
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:26:26.453

你的上下文是错误的，你需要在`YourClassName.this`里面使用，而不仅仅是`this`. 当前表示不是上下文`this`的视图`Tab3`

```
public class MyActivity extends Activity{
            .
            all your activity stuff here
            .
            .
public class Tab3 extends View implements OnTouchListener{

LinearLayout myLayout;
int x1, x2, y1, y2, x, y;
// x, y;
Rect rect2 = new Rect();

public Tab3(Context context, AttributeSet attrs)
{
    super (context, attrs);

    myLayout = (LinearLayout) findViewById(R.id.myLayout);

    x1 = 0;
    x2 = 300;               //1280 by 748
    y1 = 0;
    y2 = 300;

    setFocusable(true);
    setFocusableInTouchMode(true); 
    setOnTouchListener(this);
    requestFocus();
}

@Override
protected void onDraw(Canvas canvas) 
{
    super.onDraw(canvas);

    Paint blue = new Paint();
    blue.setColor(Color.BLUE);
    canvas.drawRect(rect2, blue);
    rect2.set(x1, y1, x2, y2);

    invalidate();
}

@Override
public boolean onTouch(View v, MotionEvent event) 
{
    if(rect2.contains((int) event.getX(),(int) event.getY()))
    {
        Intent SectionManager = new Intent (MyActivity.this, SectionManager.class);
        startActivity (SectionManager);
    }
    return true;
}
} //end Tab3 Class
} //end MyActivity 
```

Tab3 现在是 MyActivity 的子类，您应该可以执行 MyActivity.this

# sql-server - 标量值函数中列名的变量

> ID：10626118
> 
> 赞同：0
> 
> 时间：2012-05-16T20:22:01.523
> 
> 标签：sql-server, tsql

如何在标量值函数中为列名使用变量？

```
CREATE FUNCTION [dbo].[GetValue]
(
@ID varchar(36),
@PreprtyName varchar(150)
)
RETURNS varchar(250)
AS
BEGIN

DECLARE @RetVal varchar(MAX)
DECLARE @SQL varchar(MAX)
SET @RetVal =''

SET @SQL = 'SET @RetVal = (Select '+ @PreprtyName + ' FROM TableMedia WHERE ID = '''+ @ID +')'''
exec @SQL

SET @RetVal = @RetVal 

RETURN @RetVal
END 
```

出现错误找不到“找不到存储过程”

这是我要避免的。

```
SELECT     pr.ProductID, tManufacturerImage.Image, tMediaCenter.ManualFileName,tMediaCenter.BrochureFileName, tMediaCenter.AssemblyFileName
FROM         tMediaCenter RIGHT OUTER JOIN
                      tProduct AS pr INNER JOIN
                      tmp_dmi AS dmi ON REPLACE(REPLACE(pr.SKU, 'ACS', ''), 'DMI', '') = RTRIM(LTRIM(dmi.pri_SKU)) ON tMediaCenter.ProductID = pr.ProductID LEFT OUTER JOIN
                      tManufacturer INNER JOIN
                      tManufacturerImage ON tManufacturer.ManufacturerID  =     tManufacturerImage.ManufacturerID ON pr.ManufacturerID = tManufacturer.ManufacturerID 
WHERE     (pr.ManufacturerID = 'f35fc01680-4938-4070-a367-38c31efb01f') AND (dmi.MAP IS     NULL) AND (pr.ParentID <> '') 
```

这对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:16:41.117

你不能。用户定义的函数不支持动态 SQL。您将需要使用存储过程来执行此操作，或者更好地定义您的最终目标，而不是告诉我们您需要在函数中使用动态 SQL 来解决它。

```
CREATE PROCEDURE [dbo].[GetValues]
  @PreprtyName VARCHAR(150)
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(MAX);

  SET @sql = N'SELECT ' + @PreprtyName + ' FROM dbo.Table;';

  EXEC sp_executesql @sql;
END
GO 
```

抱歉，您不会轻松地在查询中内联执行此操作。问题是无法从函数中执行此操作，并且无法在单个查询中为每一行调用存储过程。您可以构建一个循环和其他所有内容，但我认为上述过程符合您的要求，无需额外的工作和开销。

如果您需要将其限制为一组特定的 ID 值，您需要描述您现在是如何尝试这样做的。

# powershell - 如何声明一个无符号的 32 位整数？

> ID：10626119
> 
> 赞同：9
> 
> 时间：2012-05-16T20:22:01.887
> 
> 标签：powershell, 32-bit, unsigned-integer

有没有办法在 PowerShell 中声明一个 32 位无符号整数？

`0xf`我正在尝试添加一个无符号（以ie开头） `0xff000000 + 0xAA`，但结果却是一个负数，而我希望它是`0xff0000AA`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T20:41:37.980

当前接受的答案中的代码导致我的系统出现以下错误：

[![错误信息](../Images/57c4504b6bc168f7e48a587d57fdd7a9.png)](https://i.stack.imgur.com/9IQYD.png)

这是因为 PowerShell 总是首先尝试将十六进制值转换为 int，因此即使您转换为`uint64`，如果数字具有负 int 值，环境也会抱怨。您可以从以下示例中看到这一点：

```
PS C:\> [uint64] (-1)
Cannot convert value "-1" to type "System.UInt64". Error: "Value was either too large or too small for a UInt64."
At line:1 char:26
+ Invoke-Expression $ENUS; [uint64] (-1)
+                          ~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [], RuntimeException
    + FullyQualifiedErrorId : InvalidCastIConvertible 
```

您需要转换数字的字符串表示形式`uint64`以避免这种情况：

```
[uint64]"0xff000000" + [uint64]"0xAA" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T20:26:12.897

0xff00000AA 对于 32 位无符号整数来说太大，使用 uint64

```
PS> [uint64]0xff00000AA
68451041450 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-20T02:58:57.273

最简单的方法是`[uint32]`从`long`文字（带有`L`后缀）转换为。您无需在`[uint64]`字符串中进行数学运算或转换

```
[uint32]0xff000000L + 0xAA 
```

在 PowerShell 6.2中添加[了一系列新后缀](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_numeric_literals?view=powershell-6)，包括`u`后缀 fof `uint32`，因此可以更简单地完成

```
0xff000000u + 0xAA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-22T02:11:39.850

我假设您的意思是`0xff0000AA`，正如其他人提到的那样，`0xff00000AA`是溢出。

最简单的方法是从字符串转换值。您可以使用`System.Convert`：

```
[System.Convert]::ToUInt32('0xff0000AA',16)
[System.Convert]::ToUInt32('ff0000AA',16) 
```

或者只是尝试转换字符串，但在这种情况下，您需要在前面添加`0x`：

```
[uint32]'0xff0000AA' 
```

另一方面，如果您确实*想*知道 64 位数字“0xff00000aa”的 32 位无符号整数部分，那么您可以这样做：

```
[System.Convert]::ToUInt32([System.Convert]::ToString(0xff00000AA -band ([uint32]::MaxValue),16),16) 
```

# unix - 是否可以创建指向目录中最新文件的符号链接？

> ID：10626120
> 
> 赞同：16
> 
> 时间：2012-05-16T20:22:19.497
> 
> 标签：unix

我的 unix 盒子中有一个主目录。我想在其中设置一个数字或快捷方式以指向另一个目录中的最新文件，如果创建了较新的文件，链接将更新。

这可能吗？

到目前为止，我能够获得最新的文件：

```
ls -lrt | tail -n1 
```

谢谢

**[编辑]**

也许我什至可以创建一个 shell 而不是一个软链接，它可以找到最新的文件并返回它，以便我可以打开/grep/delete 等？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T20:28:33.393

在 bash 中，这将链接到“target-directory”中名为“latest”的最新文件或目录：

```
ln -s target-directory/`ls -rt target-directory | tail -n1` latest 
```

这将在返回之前等待“目标目录”的变化：

```
inotifywait -e attrib target-directory 
```

# java - 使用 Spring MVC 的 JAXB 注释

> ID：10626121
> 
> 赞同：1
> 
> 时间：2012-05-16T20:22:22.890
> 
> 标签：java, spring, spring-mvc, annotations, jaxb

我正在尝试检索具有以下格式的 XML：

```
<roles>
 <role>manager</role>
 <role>driver</role>
</roles> 
```

我使用这些类和注释：

```
public class Clazz(){

   private Role roles;

   get/set

}

public class Role (){

   private String role;

   get/set
} 
```

有了这个注释，我只能检索第一个角色，即：

```
 <roles>
   <role>driver</role>
 </roles> 
```

为了扮演另一个角色，我应该改变什么？角色的数量不标准，有时可能是一、二、三。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:08:42.723

尝试这个：

```
@XmlElement
private List<String> role; 
```

请注意，您有多个`<role>`节点，因此显然您需要一个集合来保存所有节点。

# c++ - 从 DWORD 线程在 MainWindow 中显示 QString

> ID：10626122
> 
> 赞同：0
> 
> 时间：2012-05-16T20:22:30.287
> 
> 标签：c++, multithreading, qt, qt4, network-programming

我正在编写一个聊天客户端，我想在 MainWindow 中显示消息，例如 displayTextEdit->append(string); 但我正在使用 DWORD 线程。

这样做的方法是什么？我不知道，如何将此线程与 Mainwindow 连接，有什么想法吗？

```
DWORD WINAPI RECV_MESSAGE(int &s) //&s is a socket, from winsock2
{ 
    gg_header header; // incoming packet type
    gg_recv_msg in;   // text and user

    for(;;)
    {
        ::recv(s,(char*)&header,sizeof(header),0);
        if(header.type==RECV_MSG)
        {
            ::recv(s,(char*)&in,sizeof(in),0);

            QString string(in.message);
        }
    }
    return 0;
} 
```

在 MainWindow 中创建线程：

```
CreateThread(NULL,1024,(LPTHREAD_START_ROUTINE) &RECV_MESSAGE,&s,0,NULL)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:22:04.707

考虑创建一个 QObject 派生类，您的通信线程可以使用它与您的主窗口进行通信。

```
class CommSignaller : public QObject
{
    Q_OBJECT
signals:
    SendMessage(const QString &msg);
public:
    Message(const QString &msg)
    {
        emit SendMessage(msg);
    }
} 
```

将主窗口指针传递给线程函数，然后将 CommSignaller SendMessage 信号连接到主窗口中的插槽。使用 QObject::connect 的默认连接类型，这种通信本质上是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:06:40.380

在您的窗口中声明将 QString 作为参数并对其进行处理的插槽。像这样使用 QMetaObject::invokeMethod：

```
DWORD WINAPI RECV_MESSAGE(int &s) //&s is a socket, from winsock2
{ 
    QObject *ptrToWindowClass;
    gg_header header; // incoming packet type
    gg_recv_msg in;   // text and user

    for(;;)
    {
        ::recv(s,(char*)&header,sizeof(header),0);
        if(header.type==RECV_MSG)
        {
            ::recv(s,(char*)&in,sizeof(in),0);

            QString string(in.message);
            QMetaObject::invokeMethod(ptrToWindowClass, "yourDefinedSlot", Qt::QueuedConnection, Q_ARG(QString, string));
        }
    }
    return 0;
} 
```

这样的调用将在主线程中处理你的插槽，所以一切都会安全地完成

# wpf - ScrollViewer 滚动条始终禁用

> ID：10626123
> 
> 赞同：5
> 
> 时间：2012-05-16T20:22:42.943
> 
> 标签：wpf, xaml

我是 xaml 和 wpf 的新手。
我正在尝试将一些用户控件从代码隐藏中插入到容器中。我在[MSDN](http://blogs.msdn.com/b/marcelolr/archive/2009/06/09/stackpanel-dockpanel-and-scrolling-items.aspx)上阅读了这篇博文。
我尝试了那里使用的所有方法以及其他一些方法，但从未启用滚动条。
我坚持的当前代码是这样的：

```
<DockPanel>
    <ScrollViewer HorizontalAlignment="Left" Margin="252,12,0,0">
        <ItemsControl Name="captchaControls" Width="339" Height="286">

        </ItemsControl>
    </ScrollViewer>
</DockPanel> 
```

有谁知道为什么？

编辑：
让它像这样工作：

```
<DockPanel>
    <ScrollViewer HorizontalAlignment="Left" Margin="252,12,0,0" Width="339" Height="286">
        <ItemsControl Name="captchaControls">

        </ItemsControl>
    </ScrollViewer>
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:32:09.903

`Width="339" Height="286"`从 XAML 中删除。它使 ItemsControl 具有恒定的大小，无论里面有什么。

顺便提一句。您可能应该使用`x:Name`而不是`Name`, google 来解释原因的文章。

# java - 使用 cocos2d-x（iOS 和 Android）的 OpenFeint

> ID：10626124
> 
> 赞同：1
> 
> 时间：2012-05-16T20:22:45.907
> 
> 标签：java, android, c++, openfeint, cocos2d-x

显然[OpenFeint](http://openfeint.com/)同时支持 iOS 和 Android。伟大的。

但是如何将它与 cocos2d-x Android 集成呢？SDK 显然是一个 .jar 等。Cocos2d-x 使用 c++。

我没有得到这个教程：[http ://blog.molioapp.com/2011/11/openfeint-and-admob-integrated-with.html](http://blog.molioapp.com/2011/11/openfeint-and-admob-integrated-with.html)

我复制并粘贴代码并立即出现错误（JavaVM *gJavaVM;？没有以这种方式调用的标识符！）

我错过了那个教程中没有提到的其他步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:28:55.100

是的。为了构建适用于 Android 的 C++ 库，您需要使用 NDK。设置该设置非常复杂，因此我只想将您链接到已经涵盖它的单独教程。

[http://developer.android.com/sdk/ndk/index.html#installing](http://developer.android.com/sdk/ndk/index.html#installing)

那是关于启动和运行的 Google 文档。如果您遇到问题，还有其他资源。

# c# - 解密 TripleDES “坏数据”

> ID：10626126
> 
> 赞同：3
> 
> 时间：2012-05-16T20:22:58.413
> 
> 标签：c#, encryption, encoding, cryptography

我是加密/解密的新手。我正在尝试解密一个加密的输入字符串，输出为 44 个字符。

这是我到目前为止所拥有的，但是当它尝试执行“TransformFinalBlock”函数时，我不断收到“错误数据”。

```
public static String Decrypt(String input)
    {
        try{
            byte[] inputArray = Convert.FromBase64String(input);
            TripleDESCryptoServiceProvider tripleDES = new TripleDESCryptoServiceProvider();
            tripleDES.KeySize = 128;
            tripleDES.Key = UTF8Encoding.UTF8.GetBytes("0123456789ABCDEF");
            tripleDES.IV = UTF8Encoding.UTF8.GetBytes("ABCDEFGH");
            tripleDES.Mode = CipherMode.ECB;
            tripleDES.Padding = PaddingMode.PKCS7;
            ICryptoTransform transform = tripleDES.CreateDecryptor();
            byte[] resultArray = transform.TransformFinalBlock(inputArray, 0, inputArray.Length);
            tripleDES.Clear();

            return UTF8Encoding.UTF8.GetString(resultArray);
        }
        catch(Exception except){
            Debug.WriteLine(except + "\n\n" + except.StackTrace);
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T00:40:07.157

如果您使用 IV，那么您应该使用`CipherMode.CBC`. 欧洲央行不使用任何 IV。

*此外*，您的数据根本没有填充，它正好包含 32 个字节。要测试解密，通常先尝试不进行填充。这样，您可以通过查看生成的明文来确定使用了哪个填充。

[普通数据太老土了，无法在这里打印，所以我不会。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-29T20:35:13.713

我有一个非常相似的问题，我通过将**PaddingMode**更改为**None来修复它**

我的**CipherMode**是**ECB**（电子密码本）。

# java - 在java中，为什么需要将闭包变量声明为final？

> ID：10626132
> 
> 赞同：3
> 
> 时间：2012-05-16T20:23:32.543
> 
> 标签：java, jvm, closures, language-design

```
final Object o;

List l = new ArrayList(){{
    // closure over o, in lexical scope
    this.add(o);
}}; 
```

为什么必须`o`宣布最终？为什么其他具有可变变量的 JVM 语言没有这个要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:25:50.123

这不是 JVM 深度的，这一切都发生在语法糖级别。原因是通过闭包导出非最终 var 使其容易受到数据竞争问题的影响，并且由于 Java 被设计为“蓝领”语言，因此在原本温顺且安全的本地 var 的行为中发生了如此惊人的变化被认为太“先进”了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:35:33.807

不难从逻辑上推断为什么它必须是`final`.

在 Java 中，当一个局部变量被捕获到一个匿名类中时，它是按值复制的。这样做的原因是对象可能比当前函数调用存活得更久（例如，它可能被返回等），但局部变量的存活时间与当前函数调用一样长。所以不可能简单地“引用”该变量，因为那时它可能不存在。某些语言（如 Python、Ruby、JavaScript）确实允许您在范围消失后引用变量，方法是在堆中保留对环境的引用或其他东西。但这在 JVM 上很难做到，因为局部变量是在函数的栈帧上分配的，当函数调用完成时栈帧就会被销毁。

现在，因为它被复制了，所以变量有两个副本（如果有更多的闭包捕获这个变量，则更多）。如果它们是可分配的，那么您可以更改其中一个而不更改另一个。例如，假设：

```
Object o;

Object x = new Object(){
    public String toString() {
        return o.toString();
    }
};
o = somethingElse;
System.out.println(x.toString()); // prints the original object, not the re-assigned one
                                  // even though "o" now refers to the re-assigned one 
```

由于`o`范围内只有一个变量，因此您会期望它们引用同一事物。在上面的示例中，在您分配给 之后`o`，您会期望稍后`o`从对象访问 以引用新值；但事实并非如此。这对程序员来说是令人惊讶和意想不到的，并且违反了使用相同变量引用相同事物的原则。

因此，为了避免这种意外，他们要求您不能在任何地方分配它；即它必须是`final`。

现在，当然，您仍然可以`final`从非变量初始化`final`变量。在闭包内部，您仍然可以将`final`变量分配给其他非`final`.

```
Object a; // non-final
final Object o = a;

Object x = new Object(){
    Object m = o; // non-final
    public String toString() {
        return ,.toString();
    }
}; 
```

但这一切都很好，因为你明确地使用了不同的变量，所以它的作用也就不足为奇了。

# algorithm - sigmoid 的导数

> ID：10626134
> 
> 赞同：24
> 
> 时间：2012-05-16T20:23:43.810
> 
> 标签：algorithm, math, artificial-intelligence, neural-network, calculus

我正在使用反向传播技术创建一个神经网络进行学习。

我知道我们需要找到所使用的激活函数的导数。我正在使用标准的 sigmoid 函数

```
f(x) = 1 / (1 + e^(-x)) 
```

我已经看到它的导数是

```
dy/dx = f(x)' = f(x) * (1 - f(x)) 
```

这可能是一个愚蠢的问题，但这是否意味着我们必须在方程期间将 x 通过 sigmoid 函数两次，所以它会扩展为

```
dy/dx = f(x)' = 1 / (1 + e^(-x)) * (1 - (1 / (1 + e^(-x)))) 
```

或者只是将已经计算出`f(x)`的输出（即神经元的输出）替换为 的问题`f(x)`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-16T20:33:55.427

杜格尔是正确的。做就是了

```
f = 1/(1+exp(-x))
df = f * (1 - f) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T20:25:42.340

这两种方法是等价的（因为数学函数没有副作用并且总是为给定的输出返回相同的输入），所以你不妨用（更快的）第二种方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-24T22:16:41.027

一点代数可以简化这一点，这样你就不必让 df 调用 f。
df = exp(-x)/(1+exp(-x))^2

推导：

```
df = 1/(1+e^-x) * (1 - (1/(1+e^-x)))
df = 1/(1+e^-x) * (1+e^-x - 1)/(1+e^-x)
df = 1/(1+e^-x) * (e^-x)/(1+e^-x)
df = (e^-x)/(1+e^-x)^2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-28T15:33:22.123

您可以使用`sigmoid`函数的输出并将其传递给您的`SigmoidDerivative`函数以用作`f(x)`以下内容：

```
dy/dx = f(x)' = f(x) * (1 - f(x)) 
```

# c# - Process.Start c#进程崩溃

> ID：10626135
> 
> 赞同：1
> 
> 时间：2012-05-16T20:23:45.050
> 
> 标签：c#, asp.net, process

我试图像这样从 asp.net mvc 3 执行 .exe 文件，`Process.Start(@"C:\HLDS\hlds.exe");`但 hlds.exe 打开时立即崩溃。

我自己打开时没有问题（双击）

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:38:25.517

你能试试这个代码吗？
程序可能需要在其工作目录中存在一些数据/文件。
在这种情况下，您可以使用 ProcessStartInfo 类指定 WorkingDirectory

```
ProcessStartInfo pi = new ProcessStartInfo("hlds.exe");
pi.WorkingDirectory = @"C:\HLDS";
Precess.Start(pi); 
```

# arrays - 在bash中循环遍历数组

> ID：10626136
> 
> 赞同：2
> 
> 时间：2012-05-16T20:23:45.877
> 
> 标签：arrays, macos, bash, loops, if-statement

我目前正在尝试创建一个 bash 脚本，该脚本将检查每个用户 /Library/Mail 文件夹内部是否存在名为 V2 的文件夹。该脚本应该创建一个数组，其中数组中的每个项目都是一个用户，然后遍历每个用户，检查他们的主文件夹以获取上述标题内容。这是我到目前为止所拥有的：

```
#!/bin/bash

cd /Users

array=($(ls))

for i in ${array[@]}
do

if [ -d /$i/Library/Mail/V2 ]

then
    echo "$i mail has been upgraded."
else 
    echo "$i FAIL"

fi

done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:25:33.577

`ls`当您的用户名带有空格时，从 的输出中填充您的数组将导致严重的问题。请改用 glob 表达式。此外， using`[ -d $i/... ]`将类似地打破带有空格的名称 - 要么使用`[[ -d $i/... ]]`（`[[ ]]`构造有自己的语法规则并且不需要引用）或`[ -d "$i/..." ]`（使用引号）。

同样，您需要双引号`"${array[@]}"`以避免字符串拆分将名称与空格拆分为两部分，如下所示：

```
cd /Users
array=(*)
for i in "${array[@]}"; do
  if [[ -d $i/Library/Mail/V2 ]]; then
    echo "$i mail has been upgraded."
  else 
    echo "$i FAIL"
  fi
done 
```

也就是说，你根本不需要一个数组：

```
for i in *; do
  ...check for $i/Library/Mail/V2...
done 
```

# jquery - 在 Safari Mobile 上禁用 URL 栏隐藏

> ID：10626138
> 
> 赞同：0
> 
> 时间：2012-05-16T20:23:52.920
> 
> 标签：jquery, jquery-plugins, jquery-mobile, ios-simulator, mobile-safari

我正在使用带有 iScroll 插件的 jQuery Mobile 开发移动网站模板。基本上我想要一个静态页脚和页眉。除了 iScroll.js，我还包括 Kazuhiro Osawa 的 jquery iScroll 脚本，以使其与 JQM 一起工作。在他的脚本中，您可以偏移 Safari Mobile 中 URL 栏的高度。问题在于页面加载后 Safari 的 URL 栏隐藏并在底部创建了一堆填充。在脚本中我可以抵消这一点，但这会杀死 Android UX。有没有人对此有任何想法或解决方案？理想情况下，我想检测设备窗口大小并执行以下操作：[设备窗口大小 - （页眉高度 + 页脚高度）] = 可滚动窗口大小。这样我就不必对特定于设备的工作进行硬编码。谢谢。

```
<div data-role="page" data-iscroll="enable" id="home">

      <div data-role="header">
    <h1>INDEX PAGE</h1>
      </div>

      <div data-role="content">
    <div data-iscroll="scroller">
          <ol data-role="listview">
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
        <li>foo</li>
      </ol>
    </div>
      </div>

      <div data-role="footer" class="ui-bar" style="height:45px">
    I'm a Footer
      </div>

    </div> 
```

这是使用 jQuery Mobile 绑定 iScroll 的脚本

```
(function($) {
$(function() {

var SafariWindowHeightFix = 34; // Here is where you can offset the height of the URL bar:

function fixed(elm) {
    if (elm.data("iscroll-plugin")) {
        return;
    }

    // XXX: fix crumbled css in transition changePage 
    // for jquery mobile 1.0a3 in jquery.mobile.navigation.js changePage
    //  in loadComplete in removeContainerClasses in .removeClass(pageContainerClasses.join(" "));
    elm.css({
        overflow: 'hidden'
    });

    var barHeight = 0;
    var $header = elm.find('[data-role="header"]');
    if ($header.length) {
        $header.css({
            "z-index": 1000,
            padding: 0,
            width: "100%"
        });
        barHeight += $header.height();
    }

    var $footer = elm.find('[data-role="footer"]');
    if ($footer.length) {
        $footer.css({
            "z-index": 1000,
            padding: 0,
            width: "100%"
        });
        barHeight += $footer.height();
    }

    var $wrapper = elm.find('[data-role="content"]');
    if ($wrapper.length) {
        $wrapper.css({
            "z-index": 1
        });
        $wrapper.height($(window).height() - barHeight - SafariWindowHeightFix);
        $wrapper.bind('touchmove', function (e) { e.preventDefault(); });
    }

    var scroller = elm.find('[data-iscroll="scroller"]').get(0);
    if (scroller) {
        var iscroll = new iScroll(scroller, {desktopCompatibility:true});
        elm.data("iscroll-plugin", iscroll);
    }
}
$('[data-role="page"][data-iscroll="enable"]').live("pageshow", function() {
    fixed($(this));
});
if ($.mobile.activePage.data("iscroll") == "enable") {
    fixed($.mobile.activePage);
}

});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:43:31.057

简短的回答是，您不再需要 iScroll 在 Mobile Safari 中拥有固定的页眉和页脚（Android 从来不需要它），因为在 iOS5 中添加了 position:fixed 和 -webkit-overflow-scrolling。Mobile Tuts 写了一篇非常好的文章，详细解释了这里的变化：http: [//mobile.tutsplus.com/tutorials/mobile-web-apps/ios-5-fixed-positioning-and-content-scrolling/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/ios-5-fixed-positioning-and-content-scrolling/)

# java - 用java更新mysql

> ID：10626146
> 
> 赞同：0
> 
> 时间：2012-05-16T20:24:16.947
> 
> 标签：java, mysql, html, jsp

我的数据库由两列用户名和余额组成。username 的值为 Mike，balance 的值为 null。我正在尝试更新余额，但由于某种原因它没有更新。我也没有收到任何错误。有什么建议么

```
 <p>This is the deposit page</p>
    <form action="deposit.jsp" method="POST">
    <label>deposit: </label><input type="text" name="deposit"><br>
    <label>name: </label><input type="text" name="name"><br>
    <input type="submit" value="deposit">

  <%

  String deposit=request.getParameter("deposit");
 String name=request.getParameter("name");
   try{
  Connection conn = null;
  Class.forName("com.mysql.jdbc.Driver").newInstance();
  conn =    DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","root"); 
  Statement st=null;
  st=conn.createStatement();
 st.executeUpdate("update username set balance='"+deposit+"' where username='"+name+"'");

 }
catch(Exception e){
 System.out.println(e);
}
%>
</form>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:28:00.923

在块的末尾添加：conn.commit()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:29:00.710

如果我正确理解这里发生的事情，那么您实际上是在页面加载后立即调用 db insert（而不是在用户点击提交时）...在这种情况下，您的 sql 将寻找用户名 = ''，对? 也许我不明白你在做什么。你需要在整个shebang上调用commit()，但那是在你实际给它一些有用的值之后。

[编辑..]哦，我看到您两次调用同一页面，具体取决于用户是否点击提交...这是处理此类事情的一种非常糟糕的方式...作为测试，看看您是否可以把东西放在你的数据库里没关系，但你真的绝不能像这样构建任何真实的东西。不惜一切代价将您的演示文稿和业务逻辑分开。我知道 JSP（以及 PHP 和所有其他模板引擎）使您能够合并它们，但仅仅因为您“可以”做某事，并不意味着您应该这样做。

[编辑 2] 我们看不到您的数据库，但您真的有一个名为 username 的表，其中有一个名为 username 的列吗？因为这就是你现在正在谈论的。`update [TABLE NAME]`. 我猜这失败了，因为您正在尝试写入不存在的表。

哦，更新后调用提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:43:22.433

如果您创建两个页面以便查询只运行一次，则更好。第一页包括输入字段，例如您的案例名称和余额。因此，在提交表单后，将其转发到下一页，您可以将编写的代码放入 scriptlet 中。还写`System.out.println(e.getmessage())`。所以你可以看到正确的消息。并在 Mysql 浏览器中尝试您的查询，以确认您的查询中没有拼写错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T20:49:05.770

首次加载此页面时会尝试更新以下内容：

```
update username set balance='null' where username='null'; 
```

至少有一个用户有这个信息并且是 type `char`，什么都不会发生。另一方面，`scriptlets`今天使用被认为是不好的做法。我建议您应用[MVC 设计模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

[JSP using MVC and JDBC](https://stackoverflow.com/a/5003701/870248)有一个很好的答案 。

# vb.net - 在现有流程实例上执行方法。网络

> ID：10626147
> 
> 赞同：0
> 
> 时间：2012-05-16T20:24:17.287
> 
> 标签：vb.net, wcf, windows-services

我有一个在 Vb.Net 中编写的 Windows 服务。作为该服务的一部分，它调用一个具有长时间运行进程的类。

当我想通过服务中的 ServerCommands() 类时，我可以对这个进程执行命令，但是我想远程调用这些命令。可能来自网站或单击一次 WPF 应用程序。

为此，我使用了一个简单的 Tcp.Ip WCF 示例，并已验证它工作正常。

这称为 OnStart()

```
Private _serverCommands As ServerCommands

Protected Overrides Sub OnStart(ByVal args() As String)
    ' Add code here to start your service. This method should set things
    ' in motion so your service can do its work.

    Debugger.Launch()

    ' Action a new implementaion of the WCF Service on localhost
    _host.AddServiceEndpoint(GetType(ICommunicationService), New NetTcpBinding(), String.Format("net.tcp://127.0.0.1:{0}", AppSettings.TcpServicePort))
    _host.Open()

    ' Start the server command
    _serverCommands = New ServerCommands()
    _serverCommands.StartServer()

End Sub 
```

但是...当我通过 WCF 调用服务时，它会启动 ServerCommands() 类的新实例，而不是附加到已经运行的线程。

以下调用

```
Public Function DoWork() As String Implements ICommunicationService.DoWork
    Dim command As String = "say hello world"

    Dim service As IMinecraftService = New MinecraftService()
    service.ExecuteServerSideCommand(command)

    Return "Command Executed"
End Function 
```

在主要服务上实现这一点。

```
Public Sub ExecuteServerSideCommand(command As String) Implements IMinecraftService.ExecuteServerSideCommand
    If (_serverCommands IsNot Nothing) Then
        _serverCommands.SendCommand(command)
    End If
End Sub 
```

似乎在调试 _serverCommands 应该运行时是 Nothing 。

我该如何确保我通过 WCF 执行的任何命令与正在运行的实例进行通信，而不是创建一个新的 ServerCommand() 实例？

我以前没有尝试过 WCF，所以我可能会遇到死胡同……但我确信它是可能的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:57:50.007

我发现每次通过 WCF 发送命令时，我都会调用 MinecraftService 的新实例。

正如 Jeff 所说，我没有让对象共享，我只是访问这个类的一个新实例。

我把它从

从

我的主类

```
 Private _serverCommands As ServerCommands 
```

我的 WcfService

```
 Dim command As String = "say hello world"
    MinecraftService.ServerCommands.SendCommand(command) 
```

到

我的主类

```
 Public Shared ServerCommands As ServerCommands 
```

我的 WcfService

```
 MinecraftService.ServerCommands.SendCommand(command) 
```

# resize - 使用 ImageMagick 调整图像大小

> ID：10626149
> 
> 赞同：0
> 
> 时间：2012-05-16T20:24:24.067
> 
> 标签：resize, imagemagick

我想使用以下代码将 img 的大小调整为 90x90，但 img 已上传但未调整大小..

```
 $image = 'the path to the img';
 /*** a new imagick object ***/
        $im = new Imagick();

        /*** ping the image ***/
        $im->pingImage($image);

        /*** read the image into the object ***/
        $im->readImage( $image );

        $im->thumbnailImage( 90, null );

        $im->setImageFormat( "png" );

        /*** write image to disk ***/
        $im->writeImage( "tmp/spork.png" );

        $im->destroy(); 
```

我将代码更改为`$im->cropThumbnailImage(90,90);`但仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:36:54.087

在您发布的代码中，我没有什么特别突出的，但是查看 thumbnailImage 的手册页，很多评论都建议其他方法，这些方法由于各种原因声称更好： [http ://www.php.net /manual/en/imagick.thumbnailimage.php](http://www.php.net/manual/en/imagick.thumbnailimage.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:45:13.120

在您找到代码的网站上，有一种方法可以使用 try 和 catch 显示任何错误；添加这些，看看是否有错误。

保存文件夹真的是tmp吗？是 CHMOD 755 还是 777？

# ruby-on-rails-3 - Rails 3 从单个数据库表生成种子文件

> ID：10626151
> 
> 赞同：3
> 
> 时间：2012-05-16T20:24:27.557
> 
> 标签：ruby-on-rails-3, seeding

我试过搜索强大的谷歌，但似乎找不到我要找的东西（可能是因为我想做的是愚蠢的）

但是，有没有办法从单个数据库表创建种子文件，而不是转储整个数据库内容？

本质上，我有一个 Products 表，我只想从这个表中生成一个种子文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:44:33.187

[使用这个 Rails Gem https://github.com/rhalff/seed_dump](https://github.com/rhalff/seed_dump)找到了我想要的东西

使用此代码：
`rake db:seed:dump MODELS=User`

显然替换`User`为您要使用的模型名称，或逗号分隔的模型列表。

# java - 将数组中的每个元素与另一个元素相加的有效解决方案

> ID：10626159
> 
> 赞同：0
> 
> 时间：2012-05-16T20:25:02.240
> 
> 标签：java, arrays, matrix, addition

这看起来很琐碎，不是家庭作业问题。

```
public void sum(int[] arr){
  for(int i=0;i<arr.length;i++)
  {
    for(int j=0;j<arr.length;j++)
      System.out.println(arr[i]+"+"+arr[j]+"+"+"="+(arr[i]+arr[j]));
  }   
}//end of sum function 
```

这将打印每个元素的所有总和。这是 O(n^2)。

我想知道这是否可以更有效地解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:29:53.680

由于 A + B 等于 B + A，您可以只检查 index 中初始元素之后的元素`i`：

```
public void sum(int[] arr){
  for(int i=0;i<arr.length;i++)
  {
    for(int j=i;j<arr.length;j++) //Note: j = i, not j = 0
      System.out.println(arr[i]+"+"+arr[j]+"+"+"="+(arr[i]+arr[j]));
  }   
}//end of sum function 
```

还是O(n^2)/2，所以复杂度基本上还是二次的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:28:09.590

您是否关心打印结果的顺序？如果你不这样做，也许你可以拆分任务并查看并行减少。

我没有测试过，但是这些行中有一些东西

```
public void sum(int[] arr){
for(int i=0;i<arr.length;i++)
{
   for(int j=0;j<arr.length/2;j=+2)
   System.out.println(arr[i]+"+"+arr[j]+"+"+"="+(arr[i]+arr[j]));
   System.out.println(arr[i+1]+"+"+arr[j+1]+"+"+"="+(arr[i+1]+arr[j+1]));
}   
}//end of sum function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:35:07.483

如果使用[稀疏矩阵，则可以更快地添加矩阵](http://en.wikipedia.org/wiki/Sparse_matrix)。由于 0 + 0 = 0，稀疏矩阵允许您跳过对这些元素执行加法。

否则，正如其他人所说，您也可以很容易地将问题并行化。

# php - 当表单中发生错误时使文本框颜色为红色

> ID：10626160
> 
> 赞同：3
> 
> 时间：2012-05-16T20:25:04.690
> 
> 标签：php, html, css, forms

我需要你的帮助..每当表单出现错误时，我都会尝试使文本框变为红色...

这是我能够做到的。但是当我提交前台时，我在表单中得到一个未定义索引**error_css**

```
 if (isset($_POST['submit'])) { 
 if (empty($_POST['username'])) {
       $error_css='background-color:red';
 } 
```

**形式**

```
<label for="username">Username:</label>
<input id="username" type="text" value="<?php if(isset($_POST['username'])){ echo $_POST['username']; } ?>" name="username" title='Username' /> 
```

谢谢你的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:31:43.400

如果可以，为什么不研究像[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)这样的解决方案呢？这不是一个完整的解决方案，因为您仍然需要某种服务器端验证，但它会让您顺利上路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:32:50.963

形式

```
<label for="username">Username:</label>
<input id="username" type="text" value="<?php echo @$_POST['username']; ?>"
   name="username" title='Username' style="<?php echo @$error_css; ?>"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:34:29.217

您永远不会在 html 标记中设置样式，并且第一个 if{if{}} 语句是多余的。它应该是：

```
<label for="username">Username:</label>
    <input type="text" <?php 
        if(isset($_POST['username'])) { 
            echo 'value="'.$_POST['username'].'"'; 
        } else {
            echo 'style="background-color:red"';
        }
    ?> name="username" title='Username' > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:29:46.337

您的变量`$error_css`为空/不存在。

`$error_css`我认为脚本开头的 2 个 if 案例永远不会达到获取其内容的地步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T20:45:46.507

尝试这样的事情：

```
<?php

$username = "";
$error_css = "";

if (isset($_POST['submit'])) {
    if(isset($_POST['username']))
        $username = $_POST['username'];
    else
        $error_css='background-color:red';
}

?>

<label for="username">Username:</label>
<input id="username" type="text" value="<?php echo $username; ?>" name="username" title='Username' style="<?php echo $error_css; ?>"/> 
```

# git - 如何在 Emacs 缓冲区中进行 git 提交

> ID：10626170
> 
> 赞同：8
> 
> 时间：2012-05-16T20:25:58.350
> 
> 标签：git, emacs, eshell

我工作的正常方式是为我正在处理的代码设置一个小的 eshell 缓冲区和一个更大的缓冲区。我使用 eshell 缓冲区进行编译和简单测试。

如果我想做 git 提交，当我以这种方式运行它时，我总是会打开一个新的 Emacs 窗口。

我如何才能在当前 Emacs 会话中简单地打开一个新缓冲区？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T20:35:31.980

我的猜测是您的环境变量 $EDITOR 被声明为 emacs。由于您没有将 Emacs 作为守护程序运行，因此它会启动它的一个新实例。要解决此问题，您有两种选择：

1.  配置你的 $EDITOR 以使用[Emacsclient](http://www.emacswiki.org/emacs/EmacsClient)

2.  使用[egg](https://github.com/byplayer/egg)或[magit](https://magit.vc/)，Emacs 的 Git 前端。
    Egg 有点手握，因为你可以看到快捷方式，但 Magit 开发得更积极。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T23:43:00.160

我喜欢我的所有编译和 git/magit 消息出现在触发消息的同一帧的同一窗口中。

查看 vars same-window-regexps 和 same-window-buffer-names，因为我认为这就是您可能正在寻找的。

这是我使用的设置：

(setq same-window-regexps (quote ("\*vc\-.+\*" "\*magit.+\*" " *grep* " "\*compilation\*\(\|<[0-9]+ >\)" "\*帮助\*\(\|<[0-9]+>\)" "\*Shell 命令输出\*\(\|<[0-9]+>\)" "\ *dictem.*")))

希望这会有所帮助。

达蒙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:44:46.263

如果你使用 Emacs，你就是香蕉，使用 git，但不要使用 magit。我说香蕉！

# asp.net - 天气预报网络服务

> ID：10626177
> 
> 赞同：0
> 
> 时间：2012-05-16T20:26:50.280
> 
> 标签：asp.net

我想更多地了解如何让第三方 Web 服务工作，在浏览完教程后我设法获得了 QuoteOfTheDay(); Web 服务工作。但我不知道从哪里开始：

[http://www.restfulwebservices.net/wcf/WeatherForecastService.svc?wsdl](http://www.restfulwebservices.net/wcf/WeatherForecastService.svc?wsdl)

任何正确方向的提示都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:40:57.967

您必须添加服务引用（在解决方案资源管理器中右键单击您的项目并选择添加服务引用）。在 url 字段中输入“http://www.restfulwebservices.net/wcf/WeatherForecastService.svc”，然后单击“确定”。Master 将为此 WCF 服务生成一个代理类。

然后，您可以将此 WCF 服务用作任何其他 Web 服务。

正如您在 wsdl 中看到的，该服务提供了两种方法 - GetCitiesByCountry 和 GetForecastByCity。我认为他们的所作所为是显而易见的。

我没有看到有关此 WCF 服务的任何文档。我只找到了 Java 的小样本。它调用 GetCitiesByCountry 方法： [http ://doc.nuxeo.com/display/NXDOC/Building+a+SOAP-based+WebService+client+in+Nuxeo](http://doc.nuxeo.com/display/NXDOC/Building+a+SOAP-based+WebService+client+in+Nuxeo)

# dojo - 是否有可以与 Dojo Charts 一起使用的“渲染完成”事件？

> ID：10626181
> 
> 赞同：0
> 
> 时间：2012-05-16T20:26:59.593
> 
> 标签：dojo, dojox.charting

我想在加载我的 Dojo 图表时显示一个加载图标，然后在图表完成渲染时隐藏它。我找不到定义图表完成渲染时可以添加 dojo.connect 的事件的文档。例如，我正在使用 ArcGIS 映射 API（基于 Dojo 构建）执行类似操作，其中在地图更新时显示加载图标，然后在地图完成更新时使用以下代码行将其隐藏：

```
dojo.connect(map, "onUpdateEnd", hideLoading); 
```

我试过“onUpdateEnd”、“onStartup”、“postCreate”，但没有成功。任何人都知道我是否可以在 Dojo Charts 中使用“渲染完成”事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T08:30:43.553

对于其他任何需要监听几乎任何 dojo 对象的任何方法的完成，请查看 dojo/aspect。 [http://dojotoolkit.org/reference-guide/1.10/dojo/aspect.html](http://dojotoolkit.org/reference-guide/1.10/dojo/aspect.html)

示例代码：

```
aspect.after(this.chart, "render", function () {
    //your code here
    console.log("render completed");
}); 
```

# python - 使用 'in' 关键字在列表中查找元素并返回该元素

> ID：10626185
> 
> 赞同：1
> 
> 时间：2012-05-16T20:27:20.360
> 
> 标签：python, arrays

使用'in'关键字我可以找到一个元素是否在数组中：

```
a=[1,2,3]
if 1 in a:
    print "1 present in a" 
```

有没有办法返回'in'找到那个元素的索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:37:44.193

**一维列表：**

```
 a=[1,2,3]
    def indd(val):
     try:   
       ind=a.index(val)
       return ind,val
     except:
       return 'not found'  

    print(indd(1))  
    print(indd(5))   

    (0,1)
    not found 
```

**对于 3-d 列表，函数 function 将返回 x,y,z 的元组，如果数字在 3d 列表中重复，则它将返回最低索引：**

```
def ind_3d(lis,val):
    ind=[(j,i,k) for j,x in enumerate(lis) for i,y in enumerate(x) for k,z in enumerate(y) if z==val]
    if len(ind)==0:
        return 'not found'
    else:
        return ind[0]

a=[[[1,2,3],[4,5,6],[7,8,9]],[[11,12,13],[14,15,16],[17,18,19]]]

print(ind_3d(a,11))
print(ind_3d(a,5))
print(ind_3d(a,25)) 
```

**输出：**

```
(1, 0, 0)
(0, 1, 1)
not found 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:36:20.900

如果您确定它存在，则使用它`a.index(1)`来获取列表中的位置。`1`否则使用 try/catch 块。

此外，它们在 Python 中被称为“列表”：) 术语越准确，以后就越容易跟踪它们的实现方式以及它们支持的功能。

**编辑**：对于多维列表（即二维列表中的列表），您必须遍历顶层，维数`n-1`在哪里`n`。对于 2-D，假设您正在搜索`1`，这样的东西会起作用：

```
for idx, val in enumerate(a):
    if 1 in val:
        return idx, val.index(1) 
```

# sql - 搜索结果集中的多个搜索（存储过程）

> ID：10626186
> 
> 赞同：0
> 
> 时间：2012-05-16T20:27:21.417
> 
> 标签：sql, stored-procedures

在使用该会话中使用的所有搜索词时，在搜索结果集中进行多次搜索。

例如，我有一个表`User`( `UserId, UserName, UserAddress, UserCity`)

我想做的是，我想搜索表中的所有列，例如使用用户名（这可能会给我一个包含多个结果的结果集）。我希望能够使用新的搜索词再次在结果集中进行搜索（不一定必须在搜索字段中有第一个搜索词），但是这一次，它必须在第一次搜索的结果集中进行搜索。这可能会继续分解结果集，直到找到所需的内容。

对不起，如果我的请求听起来很令人困惑。我已经尝试过，但仍然不知道从哪里开始。我试过谷歌搜索并浏览了这个网站，但找不到我真正想要找到的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:55:14.130

> 我希望能够使用新的搜索词[...]再次在结果集中进行搜索，但是这一次，它必须在第一次搜索的结果集中进行搜索。这可能会继续分解结果集直到找到需要的东西。

在我看来，您似乎还没有理解 SQL 是一种声明性语言，而不是命令性语言。是的，有存储过程，但这些是 SQL 的过程扩展，不会改变 SQL 本质上是声明性的事实。

因此，不要*“分解结果集直到找到所需的内容”*，而是一次指定所有条件，并且最好不要求助于存储过程，直到您了解非过程 SQL。

举个例子，使用多个*谓词*（在子句中指定的有关所需结果的事实`WHERE`）的查询可能如下所示：

```
SELECT UserId FROM User
 WHERE UserName LIKE 'cook%'
   AND UserAddress LIKE 'sesam%'
   AND UserCity = 'Hamburg'; 
```

# android - Android 视图动画

> ID：10626192
> 
> 赞同：3
> 
> 时间：2012-05-16T20:28:03.943
> 
> 标签：android, android-layout, android-animation, android-view

我已经在互联网上搜索了一段时间，但一直无法为我的动画问题找到可行的解决方案。

我有一个列表视图，当您单击其中一个项目时，更多信息会从底部动画化，为您提供几行附加信息。这只是我在用于这些列表项的 XML 文件中的一个线性布局，这里：

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

<LinearLayout
    android:id="@+id/friendActivityList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/friendInfo"
    android:background="@color/grey"
    android:orientation="vertical"
    android:visibility="gone" >

    <RelativeLayout
        android:id="@+id/RelativeLayout04"
        android:layout_width="match_parent"
        android:layout_height="@dimen/freind_activity_list_height" >

        <ImageView
            android:id="@+id/ImageView04"
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:layout_margin="5dp"
            android:src="@drawable/logo_d" />

        <TextView
            android:id="@+id/TextView04"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/ImageView04"
            android:text="TextView"
            android:textColor="@color/black"
            android:textSize="17dp" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/RelativeLayout03"
        android:layout_width="match_parent"
        android:layout_height="@dimen/freind_activity_list_height" >

        <ImageView
            android:id="@+id/ImageView03"
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:layout_margin="5dp"
            android:src="@drawable/logo_d" />

        <TextView
            android:id="@+id/TextView03"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/ImageView03"
            android:text="TextView"
            android:textColor="@color/black"
            android:textSize="17dp" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/RelativeLayout02"
        android:layout_width="match_parent"
        android:layout_height="@dimen/freind_activity_list_height" >

        <ImageView
            android:id="@+id/ImageView02"
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:layout_margin="5dp"
            android:src="@drawable/logo_d" />

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/ImageView02"
            android:text="TextView"
            android:textColor="@color/black"
            android:textSize="17dp" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="@dimen/freind_activity_list_height" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:layout_margin="5dp"
            android:src="@drawable/logo_d" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@id/imageView1"
            android:text="TextView"
            android:textColor="@color/black"
            android:textSize="17dp" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/RelativeLayout01"
        android:layout_width="match_parent"
        android:layout_height="@dimen/freind_activity_list_height">

        <ImageView
            android:id="@+id/ImageView01"
            android:layout_width="wrap_content"
            android:layout_height="25dp"
            android:layout_margin="5dp"
            android:src="@drawable/logo_d" />

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toRightOf="@+id/ImageView01"
            android:text="TextView"
            android:textColor="@color/black"
            android:textSize="17dp" />
            </RelativeLayout>
        </LinearLayout>

        <RelativeLayout
            android:id="@+id/friendInfo"
            android:layout_width="wrap_content"
            android:layout_height="60dp"
            android:background="@drawable/bg_list_item_n" >

    <ImageView android:id="@+id/imgCompany"
        android:layout_marginLeft="5dp" 
        android:layout_centerVertical="true"
        android:layout_width="60dp"
        android:src="@drawable/ic_launcher"
        android:scaleType="centerInside" 
        android:layout_alignParentLeft="true"
        android:layout_height="50dp">
    </ImageView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:layout_toRightOf="@id/imgCompany"
        android:background="@android:color/transparent"
        android:gravity="left|center"
        android:orientation="vertical"
        android:paddingLeft="5dp" >

            <TextView android:id="@+id/lblCompanyName"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/white"
                android:textStyle="bold"
                android:textSize="13dp"
                android:text="Company Name">
            </TextView>

            <TextView android:id="@+id/lblReawrdDesc"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/white"
                android:textSize="13dp"
                android:text="Reawrd Description">
            </TextView>

            <TextView android:id="@+id/lblScores"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/white"
                android:textSize="13dp"
                android:singleLine="true"
                android:text="My Score: 13434 | Top Score: 344425">
            </TextView>

        </LinearLayout>

    </RelativeLayout>

    </RelativeLayout> 
```

其中大部分只是占位符信息，以便我可以让动画正常工作。这是我用于动画的代码：

```
 listviewFriends.setOnItemClickListener(new OnItemClickListener() {//this is the listView that im animating inside of

        public void onItemClick(AdapterView<?> parent, View view,final int pos, long id) {
            Log.v("ListItemClicked", "this position was clicked: "+pos);
            if(friendInfoList != null){
                friendInfoList.clearAnimation();//this is the new view that gets animated and is supposed to push everything below it out of the way
                friendInfoList.setVisibility(View.GONE);
            }
            friendInfoList = (LinearLayout) view.findViewById(R.id.friendActivityList);
            friendInfoList.setVisibility(View.VISIBLE);
            friendInfoList.startAnimation(infoAnim);

        }
    });

    infoAnim = new TranslateAnimation(0,0, -150, 0);//this is the animation im using
    infoAnim.setDuration(1000);
    infoAnim.setFillAfter(true); 
```

不这样做的结果是，当我单击列表视图项时，应该动画视图最后占用的整个空间是白色的，而视图从上到下动画。位置是正确的，但我希望它动画并将其下方的所有内容推开，而是立即将所有内容推开，然后进行动画填充以填充该空间。

知道如何让它在动画期间而不是立即将所有东西都推开吗？甚至有可能达到这种效果吗？任何帮助是极大的赞赏。

另外，我知道如何让它在其他视图之上简单地动画化，但我需要它来真正将所有东西都推开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:33:35.240

这样做的诀窍是创建自己的动画子类。

```
public class ExpandAnimation extends Animation
{
    private int _targetHeight;
    private View _view;
    private boolean _down;

    public ExpandAnimation(View view, int targetHeight)
    {
        _view = view;
        _targetHeight = targetHeight;
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t)
    {
        int newHeight;
        if(_down)
        {
            newHeight = (int) (_targetHeight * interpolatedTime);
        }
        else
        {
            newHeight = (int) (_targetHeight * (1 - interpolatedTime));
        }

        _view.getLayoutParams().height = newHeight;
        _view.requestLayout();
    }

    public ExpandAnimation expand()
    {
        _down = true;
        return this;
    }

    public ExpandAnimation collapse()
    {
        _down = false;
        return this;
    }

    @Override
    public void initialize(int width, int height, int parentWidth, int parentHeight)
    {
        super.initialize(width, height, parentWidth, parentHeight);
    }

    @Override
    public boolean willChangeBounds()
    {
        return true;
    }
} 
```

然后您可以将其应用于应该扩展的视图：

```
public void togglePreview()
{
    if(_expanded) _preview.startAnimation(_animation.collapse());
    else _preview.startAnimation(_animation.expand());

    _expanded = !_expanded;
    getParent().requestLayout();
} 
```

# php - 如何使用 php curl 获取 utma utmz 和类似的 cookie？

> ID：10626196
> 
> 赞同：1
> 
> 时间：2012-05-16T20:28:19.950
> 
> 标签：php, cookies, curl

我注意到我的浏览器保存的 cookie 与我的 curl cookie 文件不同：

```
"__utma=256586655.848991821.1337158982.1337158982.1337179787.2; __utmz=256586655.1337179787.2.2.utmcsr=login.example.com|utmccn=(referral)|utmcmd=referral|utmcct=/company.php; __utmc=256586655; PHPSESSID=8sedo85uc5rfpnluh06bdb0mk4" 
```

这是我基于 curl 的 cookie.txt：

```
# Netscape HTTP Cookie File
# http://www.netscape.com/newsref/std/cookie_spec.html
# This file was generated by libcurl! Edit at your own risk.

login.example.com   FALSE   /   FALSE   0   PHPSESSID   8peqektoc5j3570h08efa6o3n2 
```

那么，如何创建 utma utmz 值以及该值代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:31:05.987

这些是谷歌分析cookies。您可能没有告诉 curl 下载页面引用的第三方脚本。

尝试 wget`--page-requisites`和`--save-cookies`和`--load-cookies`。它将下载页面使用的文件，例如脚本。

不幸的是，如果它使用典型的脚本驱动的异步加载器，它仍然可能无法加载 Analytics，因为 JavaScript 必须实际执行才能使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:42:48.213

这些是谷歌分析cookies。除非您拉取并运行这些脚本（伪造浏览器的 Javascript 运行时环境），否则您将无法获得它们。幸运的是，它们与你真正想做的任何事情都无关。

# c# - 使用 NetTcpBinding 流回客户端回调时出现 WCF 错误

> ID：10626197
> 
> 赞同：0
> 
> 时间：2012-05-16T20:28:20.347
> 
> 标签：c#, wcf, wcf-streaming

我有一个 WCF 服务，使用**NetTcpBinding** TransferMode.Streamed，我正在寻找使用它的回调流回客户端，但我得到了这个异常`host.Open`：

`Contract requires Duplex, but Binding 'NetTcpBinding' doesn't support it or isn't configured properly to support it.`

```
 ServiceHost host;
    public Form1()
    {
        InitializeComponent();
    }   
    private void button1_Click(object sender, EventArgs e)
    {
        Uri baseAddress = new Uri(string.Format("net.tcp://{0}:1991/service", Dns.GetHostName()));
        host = new ServiceHost(typeof(WCF_Server.MainService), baseAddress);
        host.Open();
    } 
```

服务接口：

```
[ServiceContract(CallbackContract = typeof(IScreenCallback))]
public interface IScreenShot
{
    [OperationContract]
    Stream GetStream(int formatIndex);

    [OperationContract]
    void ShowGallery();
    [OperationContract]
    void CloseGallery();

    [OperationContract]
    void AddImage(Stream stream);
}

public interface IScreenCallback
{
    [OperationContract]
    void NextImage();

    [OperationContract]
    void PrevImage();

    [OperationContract]
    void AddImageClient(Stream stream);
} 
```

我如何将流传递给客户端回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:38:04.503

您的 IScreenShot 合同并不完全是单向的。它需要用于双工合同，在一个方向上是单向的，在另一个方向上也是单向的。

也就是说，由于需要缓冲消息的内部机制，流式传输和双工根本不会混合。所以这无论如何都行不通。

为了使这个场景在双工模式下工作，您应该将数据分割成合理大小的 byte[] 块，并以块而不是流的形式传输它们。您可以使该合同看起来很像 Stream 的 Write，甚至可以将合同的实例包装在发送端的 Stream 派生代理包装器中，这样对于填充流的人来说，它看起来几乎相同。

# jquery - 如何让 jQuery 工具验证在一组单选按钮上工作？

> ID：10626198
> 
> 赞同：4
> 
> 时间：2012-05-16T20:28:21.670
> 
> 标签：jquery, validation, jquery-tools

只是想不通......（从一连串的网络搜索来看，我不是唯一一个。）否则我的 jQT 验证工作正常；只是不适用于收音机——我要做的就是确认至少有一个按钮被点击了。我一直在尝试通过 $.tools.validator.fn 设置自定义验证功能，但我找不到适合用于选择器的东西。查看源代码时我运气不佳。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T21:52:15.193

我让它工作。他们没有在 jQueryTools Validator 文档中提供任何单选按钮示例：http: [//jquerytools.org/documentation/validator/index.html](http://jquerytools.org/documentation/validator/index.html)

这是相关的源代码。

在页眉中，包括：

```
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>

<script>
$(document).ready(function() {
  $("#myform").validator();
});
</script>` 
```

在页面正文中：

```
<form id="myform" name="myform" method="post" action="next-page.php">
  <label>Option One</label>
    <input type="radio" required="required" name="RadioGroup1" id="RadioButton_1" />
  <label>Option Two</label>
  <input type="radio" required="required" name="RadioGroup1" id="RadioButton_2" />
    <label>Option Three</label>
  <input type="radio" required="required" name="RadioGroup1" id="RadioButton_3" />

  <input type="submit" name="continue_to_next_page" id="submit" value="Continue" />
</form> 
```

让我们知道它是否适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:13:32.200

我不得不承认这是一个 hack，需要根据您的需要进行调整。这是我想出的，可能有更好的选择。

示例标记：

```
<form action="" id="theForm">
    <fieldset>
    <input type="radio" name="sex" value="male" id="male" class="requiredCheckbox" /> <label for="male">Male</label><br />
    <input type="radio" name="sex" value="female" id="female" /> <label for="female">Female</label><br/>
    <input type="radio" name="sex" value="unknown" id="unknown" /> <label for="unknown">Unknown</label>
    </fieldset>

    <input type="button" id="validate" value="Validate" />
</form>
​ 
```

带有自定义验证方法和一点hacky的Javascript：

```
$.validator.addMethod('requiredCheckbox', function (val, elt) {
    var valid = false;

    $('input[name=' + $(elt).attr('name') + ']:radio').each(function(inx, elt) {
        if (elt.checked === true) {
            valid = true;
            return;
        }
    });

    return valid;
}, 'Select at least one checkbox');

var options = {
    errorPlacement: function(error, elt) {
        $(elt).before(error);
    },
    errorElement: 'div'
};
var validator = $('#theForm').validate(options );

$('#validate').click(function() {
    $('#theForm').valid();
});​ 
```

这是带有工作示例的 JSFiddle：http: [//jsfiddle.net/9DRcz/](http://jsfiddle.net/9DRcz/)

不过要解决的有趣问题:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T00:32:14.223

我在哪里（或最终）：

*   我放弃了尝试让 jQuery 工具中的验证内容与单选按钮一起使用。

*   @MK_Dev 让我走上了使用 jQuery Validation 插件 ( [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) ) 的道路上，非常感谢。但是，不需要他回答中的其他方法——我通过加载验证插件来获得单选按钮验证，为其中一个单选按钮提供“必需”类，并在表单上调用 .validate() 。工作正常。

*   @jason 对[使用 jQuery 验证插件验证单选按钮组](https://stackoverflow.com/questions/277589/validation-of-radio-button-group-using-jquery-validation-plugin)的参考也得到了回报。我对这一切的最后一点困惑是，该页面上有一些关于如何不需要 bassistance 验证插件的讨论——jQuery (1.3.2??) 可以自己进行验证。可能是，但我想不通。

无论如何，我现在有一些工作验证，这比我今天早些时候可以说的要多。谢谢大家！

# python - 组合具有相同键名的 Python 字典

> ID：10626202
> 
> 赞同：3
> 
> 时间：2012-05-16T20:28:42.873
> 
> 标签：python

我有两个单独的 Python 列表，它们在各自的字典中有共同的键名。调用的第二个列表`recordList`有多个具有相同键名的字典，我想附加第一个列表`clientList`。以下是示例列表：

```
clientList = [{'client1': ['c1','f1']}, {'client2': ['c2','f2']}]
recordList = [{'client1': {'rec_1':['t1','s1']}}, {'client1': {'rec_2':['t2','s2']}}] 
```

所以最终结果将是这样的，因此记录现在位于`clientList`.

```
 clientList = [{'client1': [['c1','f1'], [{'rec_1':['t1','s1']},{'rec_2':['t2','s2']}]]}, {'client2': [['c2','f2']]}] 
```

看起来很简单，但我正在努力寻找一种方法来使用变量迭代这两个字典以找到它们匹配的位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:13:03.300

当您确定时，两个字典中的键名相同：

```
 clientlist = dict([(k, [clientList[k], recordlist[k]]) for k in clientList]) 
```

像这儿：

```
 >>> a = {1:1,2:2,3:3}
    >>> b = {1:11,2:12,3:13}
    >>> c = dict([(k,[a[k],b[k]]) for k in a])
    >>> c
    {1: [1, 11], 2: [2, 12], 3: [3, 13]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:32:02.027

这可能有效，但我不确定我是否理解您的数据结构规则。

```
# join all the dicts for better lookup and update
clientDict = {}
for d in clientList:
    for k, v in d.items():
        clientDict[k] = clientDict.get(k, []) + v

recordDict = {}
for d in recordList:
    for k, v in d.items():
        recordDict[k] = recordDict.get(k, []) + [v]

for k, v in recordDict.items():
    clientDict[k] = [clientDict[k]] + v

# I don't know why you need a list of one-key dicts but here it is
clientList = [dict([(k, v)]) for k, v in clientDict.items()] 
```

使用您提供的示例数据，这给出了您想要的结果，希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:44:48.263

假设您想要一个与两个列表中的每个键对应的值列表，请尝试以下操作：

```
from pprint import pprint

clientList = [{'client1': ['c1','f1']}, {'client2': ['c2','f2']}]
recordList = [{'client1': {'rec_1':['t1','s1']}}, {'client1': {'rec_2':['t2','s2']}}]
clientList.extend(recordList)

outputList = {}

for rec in clientList:
    k = rec.keys()[0]
    v = rec.values()[0]
    if k in outputList:
        outputList[k].append(v)
    else:
        outputList[k] = [v,]

pprint(outputList) 
```

它会产生这个：

```
{'client1': [['c1', 'f1'], {'rec_1': ['t1', 's1']}, {'rec_2': ['t2', 's2']}],
 'client2': [['c2', 'f2']]} 
```

# elf - 从 C 读取 Linux 上的 ELF 字符串表

> ID：10626203
> 
> 赞同：3
> 
> 时间：2012-05-16T20:28:45.650
> 
> 标签：elf, ptrace

我想编写一个读取二进制字符串表的程序。二进制文件在 ELF 中运行在 REDHAT linux 32 上。我做了以下 -

1.  阅读精灵标题
2.  阅读所有部分

下面是我的程序的输出。

```
Entry Address of Binary - 0x8048340
Start of Program Header - 52
Start of section header - 3272
Size of header - 52
Number of section headers - 36
Size of each section headers - 40
Number of section headers - 36
Section header Offset - 3272
string tbl index for section[0] is 0
string tbl index for section[1] is 27
string tbl index for section[7] is 35
string tbl index for section[1879048182] is 49
string tbl index for section[11] is 59
string tbl index for section[3] is 67
string tbl index for section[1879048191] is 75
string tbl index for section[1879048190] is 88
string tbl index for section[9] is 103
string tbl index for section[9] is 112
string tbl index for section[1] is 121
string tbl index for section[1] is 116
string tbl index for section[1] is 127
string tbl index for section[1] is 133
string tbl index for section[1] is 139
string tbl index for section[1] is 147
string tbl index for section[1] is 157
string tbl index for section[1] is 164
string tbl index for section[1] is 171
string tbl index for section[6] is 176
string tbl index for section[1] is 185
string tbl index for section[1] is 190
string tbl index for section[1] is 199
string tbl index for section[8] is 205
string tbl index for section[1] is 210
string tbl index for section[1] is 219
string tbl index for section[1] is 234
string tbl index for section[1] is 250
string tbl index for section[1] is 262
string tbl index for section[1] is 276
string tbl index for section[1] is 288
string tbl index for section[1] is 301
string tbl index for section[1] is 312
string tbl index for section[3] is 17
string tbl index for section[2] is 1
string tbl index for section[3] is 9 
```

我知道 Elf32_Shdr 中的 sh_name 基本上是字符串表的索引，它实际上包含一个以 NULL 结尾的字符串。我想显示这个以空字符结尾的字符串。我在这里有一个问题-

1.  在上面的输出中，我们可以看到有多个 sh_type = 3 (SHT_STRTAB) 的 Section Headers 条目。所以我不明白如何将索引（Elf32_Shdr 中的 sh_name）映射到哪个部分？

在为具有 sh_type = 3 的部分打印 Elf32_Shdr 时，我得到以下输出 -

```
Section header Offset - 3272
sh_name - 67
sh_type - 3
sh_flags - 2
sh_addr - 80481e8
sh_offset - 488
sh_size - 94
sh_link - 0
sh_info - 0
sh_addralign - 1
sh_entsize - 0
--------------------------------------------------------------
sh_name - 17
sh_type - 3
sh_flags - 0
sh_addr - 0
sh_offset - 2948
sh_size - 323
sh_link - 0
sh_info - 0
sh_addralign - 1
sh_entsize - 0
--------------------------------------------------------------
sh_name - 9
sh_type - 3
sh_flags - 0
sh_addr - 0
sh_offset - 6008
sh_size - 664
sh_link - 0
sh_info - 0
sh_addralign - 1
sh_entsize - 0
-------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T15:08:34.570

我能够自己找到答案:)。虽然写代码花了很多时间。如果有人想在将来引用它，这是如何完成的 - 每个二进制文件通常包含三个字符串表 -

```
1\. .dynstr
2\. .shstrtab
3\. .strtab 
```

在上述问题中，我们关注 .shstrtab，它在扩展时代表 - Section Header STRing TABle。在读取 ELF 标头后，我们在 ELF 标头中找到以下字段 - e_shstrndx。这是我们可以找到 .shstrtab 的索引。以下公式可用于计算它将如何完成 -

```
offset = ((elfHdr.e_shstrndx)*elfHdr.e_shentsize)+elfHdr.e_shoff 
```

每个参数的含义 -

```
elfHdr.e_shstrndx = index where we can find .shstrtab
elfHdr.e_shentsize = Size of each Section Header
elfHdr.e_shoff = Offset at which section header starts. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:55:06.603

简而言之，`e_shstrndx`ELF Executable Header 的字段包含保存段名的 ELF 字符串表的索引。

“ [libelf by Example](http://sourceforge.net/projects/elftoolchain/files/Documentation/libelf-by-example/20120308/) ”教程有一个更长的解释，以及显示如何使用 ELF(3) API 中的函数检索节名称的示例代码。

# php - 部署时使用 amfphp 进行 Flex 远程处理失败

> ID：10626207
> 
> 赞同：2
> 
> 时间：2012-05-16T20:29:01.230
> 
> 标签：php, apache-flex, deployment, xampp, amfphp

所以我创建了这个使用 amfphp 远程访问数据的 flex 应用程序。channelSet 是在运行时创建的，我认为这没有问题。当我尝试在本地（从我的计算机）运行它时，该应用程序运行良好，我可以通过键入 localhost/app_name.html 或 computerName/app_name.html 来访问它。当我尝试使用路径 computerName/app_name.html 从其他计算机运行它时，远程处理失败，我认为问题不在于 xampp 配置，因为我可以通过 amfphp 服务浏览器从其他计算机使用相同的方法。所以我不知道该怎么做如何修复或调试它，不知道问题可能出在哪里，所以如果有人有任何想法或可以指出我的方向，请帮助。

这是我收到的错误

```
[RPC Fault faultString="Send failed" faultCode="Client.Error.MessageSend" faultDetail="Channel.Security.Error error Error #2048 url: 'http://vfistri1-pc/oracle/moje/Amfphp/'"] 
```

# xslt - XSLT 1.0：使用键对唯一值进行排序，但有例外

> ID：10626209
> 
> 赞同：0
> 
> 时间：2012-05-16T20:29:02.203
> 
> 标签：xslt, xslt-grouping, muenchian-grouping

我有以下简化的 XML 结构：

```
<?xml version="1.0" encoding="UTF-8"?>
<ExportData>
<DataSet>
    <Tables>
        <Table>
            <Rows>
                <R>
                    <transactionQualifierstring>Sales</transactionQualifierstring>
                    <revenueCenterPOSReflongtrue>9991</revenueCenterPOSReflongtrue>
                </R>
                <R>
                    <transactionQualifierstring>Sales</transactionQualifierstring>
                    <revenueCenterPOSReflongtrue>9993</revenueCenterPOSReflongtrue>
                </R>
                <R>
                    <transactionQualifierstring>Sales</transactionQualifierstring>
                    <revenueCenterPOSReflongtrue>9992</revenueCenterPOSReflongtrue>
                </R>
                <R>
                    <transactionQualifierstring>Sales</transactionQualifierstring>
                    <revenueCenterPOSReflongtrue>9994</revenueCenterPOSReflongtrue>
                </R>
                <R>
                    <transactionQualifierstring>Sales</transactionQualifierstring>
                    <revenueCenterPOSReflongtrue>9995</revenueCenterPOSReflongtrue>
                </R>
                <R>
                    <transactionQualifierstring>Sales</transactionQualifierstring>
                    <revenueCenterPOSReflongtrue/>
                </R>
                <R>
                    <transactionQualifierstring>Sales</transactionQualifierstring>
                    <revenueCenterPOSReflongtrue>9993</revenueCenterPOSReflongtrue>
                </R>
            </Rows>
        </Table>
    </Tables>
</DataSet>
</ExportData> 
```

我需要根据“Qualifierstring”和“revenueCenter”对记录集（R）进行分组。我想出了这个完美运行的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="xml" indent="yes"/>
<xsl:template match="text()|@*"/>

<!-- define the key to define unique elements -->
<xsl:key name="keyTranstypeCcRc" match="R" use="concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue)"/>

<!-- define which elements are unique -->
<xsl:template match="ExportData/DataSet/Tables/Table/Rows">
    <xsl:variable name="uniqueTransactions" select="R[generate-id()=generate-id(key('keyTranstypeCcRc',concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue))[1])]"/>
    <ExportData>
        <xsl:apply-templates select="$uniqueTransactions" mode="group"/>
    </ExportData>
</xsl:template>

<!-- create the unique groups -->
<xsl:template match="R" mode="group">
    <transaction>
        <xsl:attribute name="transactionType"><!-- write the 2 key criteria into this attribute -->
            <xsl:value-of select="concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue)"/>
        </xsl:attribute>
        <xsl:apply-templates select="key('keyTranstypeCcRc', concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue))" mode="item"/>
    </transaction>
</xsl:template>

<!-- write the item content into each group -->
<xsl:template match="R" mode="item">
    <R>
        <xsl:copy-of select="child::*"/> 
    </R>
</xsl:template>

</xsl:stylesheet> 
```

我定义一个键并选择唯一的项目，构建组并处理记录集 (R)。

但是现在我如何定义密钥以便将“revenueCenter”9992 和 9993 组合在一起？我必须设置2个不同的键吗？（但我怎么能在我的模板中使用 2 个键）或者我可以用值扩展现有的键吗？

XML 应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<ExportData>
<transaction transactionType="Sales|9991">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9991</revenueCenterPOSReflongtrue>
    </R>
</transaction>
<transaction transactionType="Sales|9993 Sales|9992">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9993</revenueCenterPOSReflongtrue>
    </R>
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9993</revenueCenterPOSReflongtrue>
    </R>
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9992</revenueCenterPOSReflongtrue>
    </R>
</transaction>
<transaction transactionType="Sales|9994">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9994</revenueCenterPOSReflongtrue>
    </R>
</transaction>
<transaction transactionType="Sales|9995">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9995</revenueCenterPOSReflongtrue>
    </R>
</transaction>
<transaction transactionType="Sales|">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue/>
    </R>
</transaction>
</ExportData> 
```

**2012 年 5 月 24 日更新：** 我实际上想出了一个 XSLT，它可以满足我的需求，我使用了两个不同的键：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="xml" indent="yes"/>
<xsl:template match="text()|@*"/>

<!-- define the key to define unique elements -->
<!--<xsl:key name="keyTranstypeCcRc" match="R" use="concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue)"/>-->
<xsl:key name="keyTranstypeCcRc" match="R[not(revenueCenterPOSReflongtrue='9992' or revenueCenterPOSReflongtrue='9993')]" 
    use="concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue)"/>

<xsl:key name="keyTranstypeCcRc99923" match="R[revenueCenterPOSReflongtrue='9992' or revenueCenterPOSReflongtrue='9993']" 
    use="transactionQualifierstring"/>

<!-- define which elements are unique -->
<xsl:template match="ExportData/DataSet/Tables/Table/Rows">
    <xsl:variable name="uniqueTransactions" select="R[not(revenueCenterPOSReflongtrue='9992' or revenueCenterPOSReflongtrue='9993')]
        [generate-id()=generate-id(key('keyTranstypeCcRc',concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue))[1])]"/>
    <xsl:variable name="keyTranstypeCcRc99923" select="R[revenueCenterPOSReflongtrue='9992' or revenueCenterPOSReflongtrue='9993']
        [generate-id()=generate-id(key('keyTranstypeCcRc99923',transactionQualifierstring)[1])]"/>
    <ExportData>
        <xsl:apply-templates select="$uniqueTransactions" mode="group"/>
        <xsl:apply-templates select="$keyTranstypeCcRc99923" mode="group99923"/>
    </ExportData>
</xsl:template>

<!-- create the unique groups -->
<xsl:template match="R" mode="group">
    <transaction>
        <xsl:attribute name="transactionType"><!-- write the 2 key criteria into this attribute -->
            <xsl:value-of select="concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue)"/>
        </xsl:attribute>
        <xsl:apply-templates select="key('keyTranstypeCcRc', concat(transactionQualifierstring,'|',revenueCenterPOSReflongtrue))" mode="item"/>

    </transaction>
</xsl:template>

<!-- create the unique groups -->
<xsl:template match="R" mode="group99923">
    <transaction>
        <xsl:attribute name="transactionType"><!-- write the 2 key criteria into this attribute -->
            <xsl:value-of select="concat(transactionQualifierstring,'|','9992','|','9993')"/>
        </xsl:attribute>
        <xsl:apply-templates select="key('keyTranstypeCcRc99923', transactionQualifierstring)" mode="item"/>

    </transaction>
</xsl:template>

<!-- write the item content into each group -->
<xsl:template match="R" mode="item">
    <R>
        <xsl:copy-of select="child::*"/> 
    </R>
</xsl:template>

</xsl:stylesheet> 
```

应用到源 XML 我得到这个正确的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<ExportData>
<transaction transactionType="Sales|9991">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9991</revenueCenterPOSReflongtrue>
    </R>
</transaction>
<transaction transactionType="Sales|9994">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9994</revenueCenterPOSReflongtrue>
    </R>
</transaction>
<transaction transactionType="Sales|9995">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9995</revenueCenterPOSReflongtrue>
    </R>
</transaction>
<transaction transactionType="Sales|">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue/>
    </R>
</transaction>
<transaction transactionType="Sales|9992|9993">
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9993</revenueCenterPOSReflongtrue>
    </R>
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9992</revenueCenterPOSReflongtrue>
    </R>
    <R>
        <transactionQualifierstring>Sales</transactionQualifierstring>
        <revenueCenterPOSReflongtrue>9993</revenueCenterPOSReflongtrue>
    </R>
</transaction>
</ExportData> 
```

该解决方案有效，因为我知道我需要分别排除和分组哪些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:05:56.290

每当您希望以特定方式对事物进行排序和/或分组时，考虑生成“排序键”会有所帮助。在您生成索引的地方

```
<xsl:key name="keyTranstypeCcRc" match="R" use="makeKey(...)"/> 
```

您需要提供一个从适当的参数生成所需密钥的函数。然后在索引中查找键时使用相同的函数。

在 XSLT 1 中，您可以使用 EXSLT`func:function`以可重用的方式打包逻辑。

如果您熟悉 Java，这有点像定义一个自定义`Comparator`.

# java - MongoDB：如何使用 java 构建算术查询

> ID：10626210
> 
> 赞同：1
> 
> 时间：2012-05-16T20:29:08.327
> 
> 标签：java, json, mongodb, arithmetic-expressions

我正在拼命寻找用 java 构建算术 MongoDB 查询的解决方案。例如，如何构建以下查询：

```
((test.value1 / test.value2) * 100) > 50 
```

我尝试了以下不起作用的查询：

```
{ {"$multiply" : [{"$divide" : ["$test.value1", "$test.value2"]}, "100"]} : {"$gt" : "50"}} 
```

我不确定是否支持上述嵌套算术运算。提前感谢您的任何建议！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:07:06.670

Lycha 的回答是正确的，`$where`可能是进行这种临时查询的唯一方法。但是它很慢并且不能使用索引。

如果您的表达式始终采用相同的形式（`a / b > 50`），我建议在另一个字段中预先计算该除法的结果，对其进行索引，然后直接查询该字段。

如果您需要使用此类表达式执行许多不同的查询，那么有人做出了糟糕的数据库技术选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:32:22.697

您可以尝试[$where 运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D)，它可以让您在 Javascript 中给它条件：

例子：

```
{ $where: "this.value1/this.value2 > 50" } 
```

# mysql - 哪些命令将使用 Powershell 中的现有 .sql 文件填充数据库

> ID：10626212
> 
> 赞同：3
> 
> 时间：2012-05-16T20:29:12.093
> 
> 标签：mysql, powershell, mysqldump

我在 powershell 中编写了一个脚本，该脚本应该连接到 MySQL 服务器，创建一个新数据库，然后对该数据库运行查询命令。我有一个预制的 .sql 文件，其中包含要执行的所有命令，但是我的代码似乎存在问题，它从未真正执行过 .sql 文件。任何帮助，将不胜感激。我的代码如下。

```
[void][system.reflection.Assembly]::LoadWithPartialName("MySql.Data")

#Creates a connection to the server
$connStr ="server=mySql;Persist Security Info=false;user id=" + "username" + ";pwd=" + "pass" + ";"
$conn = New-Object MySql.Data.MySqlClient.MySqlConnection($connStr)

#Open connection
$conn.Open()

#Drops database if it currently exists
$cmd = New-Object MySql.Data.MySqlClient.MySqlCommand
$cmd.Connection  = $conn
$cmd.CommandText = "DROP DATABASE IF EXISTS " + $dbname
$cmd.ExecuteNonQuery()

#Create the new database
$cmd.CommandText = 'CREATE SCHEMA `' + $dbname + '`'
$cmd.ExecuteNonQuery()

#Load the sql file
$sql = (Get-Content C:\"path to sql file") -join "'r'n"
$cmd.CommandText = $sql

#Close connection
$conn.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:34:42.120

你不是错过了 $cmd.ExecuteNonQuery() 调用吗？看起来你正在用文字“'r'n”加入文件行。您需要改用反引号字符（例如“`r`n”）。我会使用 Out-String cmdlet 将文件内容转换为一个字符串：

```
#Load the sql file
$sql = Get-Content C:\"path to sql file" | Out-String
$cmd.CommandText = $sql
$cmd.ExecuteNonQuery() 
```

# android - 如何在没有 startAcitivity(intent) 的情况下调用 android Activity？

> ID：10626214
> 
> 赞同：-1
> 
> 时间：2012-05-16T20:29:13.467
> 
> 标签：android

在我的 android 应用程序的主页中，我添加了 OptionsMenu。What i want is when the option "ContactUs" is selected a new Activity called "ContactUs" should get called.

```
public boolean onOptionsItemSelected(MenuItem item) {
super.onOptionsItemSelected(item);
if (item.getTitle().toString().equals("ContactUs")) {
    ContactUs contact = new ContactUs(Home.this);
}
return true;
} 
```

当 ContactUs 活动打开时，它的布局应该会显示出来：

```
public class ContactUs extends Activity{
private Context CONTEXT;

public CustomEqualizer(Context c){
    this.CONTEXT = c;
    setContentView(R.layout.contactus);
}
} 
```

但问题是在调用 onCreate 方法之前不会显示布局。我的问题是如何在没有 startActivity 的情况下从 Home 调用 ContactUs 选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:45:20.553

`startActivity()`是启动 Activity 的唯一方法。你遇到的问题是你试图调用`setContentView()`构造函数，因为它还没有得到应用程序上下文，所以无论如何它都不起作用。您覆盖该`onCreate()`方法并从那里调用它。

-=更新=-

您可以通过将其添加到 Intent 的捆绑包中来在活动之间传递您想要的任何内容。

# php - 简单工厂模式演示

> ID：10626215
> 
> 赞同：2
> 
> 时间：2012-05-16T20:29:13.290
> 
> 标签：php, oop

我正在尝试在 PHP 中创建一个简单的工厂模式演示。我不确定我的代码是否是最佳实践。似乎我有一些重复的代码，但我不知道如何改进它。基本上，我想创建 3 种类型的帐户（基本、高级和 vip）。请指教。非常感谢。

抽象类

```
abstract class User {

    function __construct() {
        $this->db= new Database('mysql','localhost','mvcdb','root','');
    }

    abstract function checkUser();

    function showAccountCredit(){
        return $this->credits;
    }
    function getUserName(){
        return $this->username;
    }

} 
```

我有 3 种不同的用户帐户类型：

基本账户

```
class BasicUser extends User {

    function __construct($username) {
        parent::__construct();
        $this->username=$username;
        $this->credit='10';
        $this->accountType='Basic Account';

        $data=$this->checkUser();

        if(!empty($data)){
            echo 'The username: '.$this->username.' already exists<br>';
            return false;
        }

        $array=array('username'=>$this->username, 'password'=>'password','credit'=> $this->credit,'accountType'=>$this->accountType);
        $this->db->insert('user',$array);

    }

     function checkUser(){

        $array=array(':username'=>$this->username);
        $results=$this->db->select('SELECT * FROM USER WHERE username=:username',$array);
        if(!empty($results)){
        $this->credit=$results[0]['credit'];
        $this->accountType=$results[0]['accountType'];
        }

        return $results;

    }

    function showAccountCredit() {
        echo 'Username: '.$this->username.'<br>';
        echo 'Account Credit: '.$this->credit.'<br>';
        echo 'Account Type: '.$this->accountType;
    }

} 
```

至尊帐号

```
class PremiumUser extends User {

    function __construct($username) {
        parent::__construct();
        $this->username=$username;
        $this->credit='100';
        $this->accountType='Premium Account';

        $data=$this->checkUser();

        if(!empty($data)){
            echo 'The username: '.$this->username.' already exists<br>';
            return false;
        }

        $array=array('username'=>$this->username, 'password'=>'password','credit'=> $this-                   >credit,'accountType'=>$this->accountType);
        $this->db->insert('user',$array);

    }

     function checkUser(){

        $array=array(':username'=>$this->username);
        $results=$this->db->select('SELECT * FROM USER WHERE username=:username',$array);
        if(!empty($results)){
        $this->credit=$results[0]['credit'];
        $this->accountType=$results[0]['accountType'];
        }

        return $results;

    }

    function showAccountCredit() {
        echo 'Username: '.$this->username.'<br>';
        echo 'Account Credit: '.$this->credit.'<br>';
        echo 'Account Type: '.$this->accountType.'<br>';
    }

} 
```

贵宾账户：

```
class VipUser extends User {

    function __construct($username) {
        parent::__construct();
        $this->username=$username;
        $this->credit='1000';
        $this->accountType='VIP Account';

        $data=$this->checkUser();

        if(!empty($data)){
            echo 'The username: '.$this->username.' already exists<br>';
            return false;
        }

        $array=array('username'=>$this->username, 'password'=>'password','credit'=> $this->credit,'accountType'=>$this->accountType);
        $this->db->insert('user',$array);

    }

     function checkUser(){

        $array=array(':username'=>$this->username);
        $results=$this->db->select('SELECT * FROM USER WHERE username=:username',$array);
        if(!empty($results)){
        $this->credit=$results[0]['credit'];
        $this->accountType=$results[0]['accountType'];
        }

        return $results;

    }

    function showAccountCredit() {
        echo 'Username: '.$this->username.'<br>';
        echo 'Account Credit: '.$this->credit.'<br>';
        echo 'Account Type: '.$this->accountType;
    }

} 
```

用户工厂类

```
class UserFactory {

    static function create($username,$accountType){

        $accountType = strtolower($accountType);

        switch($accountType){
        case 'basic': return new BasicUser($username);
        case 'premium':return new PremiumUser($username);
        case 'vip': return new VipUser($username);
        default :return new BasicUser($username);
        }
    } 
```

索引.php

```
$user1= UserFactory::create('Jerry', 'Vip');
$user1->showAccountCredit();

$user2= UserFactory::create('Bob', 'Basic');
$user2->showAccountCredit();

$user3= UserFactory::create('Betty', 'premium');
$user3->showAccountCredit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:54:25.573

与其拥有 3 种不同的用户实现，不如考虑 3 种不同的“UserType”实现。分离职责并将对象组合在一起。这是另一种行动模式，称为**strategy**。

```
function showAccountCredit(){
  return $this->type->showAccountCredit();
} 
```

新类，UserType 代表特殊行为，然后 User 将包含其余的通用内容，减少您描述的重复（或至少大部分）

**另一方面，**工厂可用于从数据库加载对象：****

 **```
class Loader{
  private $userTypeFactory;

  public function loadUser($id){
    $userRow = $db->loadRow();
    ...

    $userType = $userTypeFactory->$userRow["type"]();
    return new User($userType);
  }
}

class UserTypeFactory{
  public function vip(){
    return new VipUserType();
  }

  public function premium(){
    return new PremiumUser();
  }
} 
```

你可以更进一步，引入 IoC 框架。看看symfony2。哦，请不要使用开关，而是像我一样使用多态性，动态调用。

* * *

**编辑：**

**策略 == 包装行为**。例如，如果您正在检查用户权限以查看优质内容，通常情况如下：

```
class PagesController{
  ...

  public function showPage($id){
    ...
    if ($user->type == "premium" || $user->type == "vip"){
      ...
    }
    else if ($user->type == "credit"){
      $user->credits--;
      updateUser();
    }
    else{
      die("You do not have permissions to see this content...");
    }

    ... //render page
  }
} 
```

以下是使用“策略”的样子：

```
class PagesController{
  ...
  public function showPage($id){
    $page = ...;

    $user->pageRequested($page);

    //render page
  }
}

class User{
  private $userType;

  public function pageRequested($page){
    $this->userType->userRequestedPage($user, $page);
  }
}

class VipUserType{
  public function userRequestedPage($user, $page){
    //do nothing
  }
}

class PremiumUserType{
  public function userRequestedPage($user, $page){
    //do nothing
  }
}

class BasicUserType{
  public function userRequestedPage($user, $page){
    throw new Exception("You cant access this page");
  }
}

class CreditUserType{
  public function userRequestedPage($user, $page){
    $user->credit--;
    $user->save();
  }
} 
```

这样，与 userType 相关的所有内容都是分离的，添加新类型很容易，而不会破坏现有类型。

顺便说一句：**这只不过是普通的旧多态性。**策略只是 OOP 基本要素的另一个闪亮词，就像大多数模式一样。不要浪费时间去思考模式，它们对灵感很有好处，但是你会从真正的 OOP 中获得更多的经验，看看 smalltalk - [http://www.pharo-project.org/home](http://www.pharo-project.org/home)**

# tinyscrollbar - 使用带有 ajax 加载内容的 Tinyscrollbar.js 插件

> ID：10626218
> 
> 赞同：0
> 
> 时间：2012-05-16T20:29:25.913
> 
> 标签：tinyscrollbar

我有一个呈现一些内容的主干视图：

然后，我在内容加载后进行了一个简单的调用 initializeScrollbar()：

```
function initializeScrollbar() {
    $('#technologypartners_text').tinyscrollbar();
} 
```

这就是我所做的一切！对 tinyscrollbar() 的调用会出现以下错误：

但 Chrome 控制台提供： ![镀铬控制台](../Images/439c4703eb52c2fa5f7db2a202b4aa14.png)

Firefox firebug 控制台提供： ![火狐控制台](../Images/48258a92121065410b8ee86930dd8c9d.png)

不确定它们是否相关，但我必须是插件，按照说明只写了 1 行代码！任何人都知道它为什么这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:51:56.587

应更新可滚动元素内的所有 Ajax 内容才能正常工作。尝试这个：

```
function initializeScrollbar() {
    $('#technologypartners_text').tinyscrollbar_update();
} 
```

但是您的情况似乎是您的应用程序和插件之间的“offsetHeight”冲突错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:45:55.583

Do you have al the necessary elements defined? You need to have the following elements defined in your html.

.viewport .overview. .scrollbar .track .thumb

Check baijs.nl/tinyscrollbar for a example.

# clearcase - 当我比较集成流基线时，为什么 Clearcase diffbl 会包含我的开发流中的活动？

> ID：10626222
> 
> 赞同：2
> 
> 时间：2012-05-16T20:29:41.917
> 
> 标签：clearcase, clearcase-ucm

我们使用 Clearcase UCM 并且有一个集成流，每个开发人员都有一个开发流。当我进行基线比较时，有时会包括开发流中的活动。自特定基线以来，是否有任何方法可以获取集成流中的简单活动列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:02:02.610

注意：在集成流中，您将主要获得交付活动，即记录在开发流交付期间完成的合并的活动。

因此，如果您希望在集成流上完成两个基线的活动，一个简单的

```
cleartool diffbl -nmerge -act bl1 bl2 
```

应该足够了。
如果您以某种方式从开发流中看到活动，那应该意味着您正在比较`bl1`集成流与`bl2`开发流或集成与合并（即贡献活动）的两个基线。

因此`–nmerge`

> 比较同一流上的两个基线，并仅报告对该流所做的活动和版本更改。

* * *

为了说明为什么您看到这些活动没有 -nmerge，请参阅“[列出基线或集成活动的更改集中的贡献活动](http://www-01.ibm.com/support/docview.wss?uid=swg21128235)”

集成流中的活动将如下所示：

![整合活动](../Images/09b85d1458fe411eeeec8bdd2f4d212b.png)

> 集成活动跟踪由于交付或变基操作而完成的工作，并以交付或变基为前缀对它们进行相应命名，以帮助将它们与用户创建的活动区分开来。

如果您右键单击活动并选择显示贡献活动，您将看到：

![贡献活动](../Images/4f8593db79a9748245f9ea3eb0eb71da.png)

这与以下内容相同：

```
 cleartool lsactivity -contrib <deliver baseline>@\pvob 
```

或者

```
 cleartool lsact -fmt "%[contrib_acts]p" <deliver baseline>@\pvob 
```

同样，该`-nmerge`选项避免`diffbl`列出那些贡献活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:01:32.653

那是因为来自子流的贡献活动......尝试

> diffbl-nmerge

# php - 如何注释包含 */ 的字符串

> ID：10626229
> 
> 赞同：4
> 
> 时间：2012-05-16T20:29:56.067
> 
> 标签：php, comments, syntax-error

我有一行 PHP 源代码，我想将其作为注释保存在 PHP 文件中，以便在必要时使用。这只是一个调试脚本，因此保持文件清洁不是问题。

不过，我正在尝试使用`/*`and来评论这些行`*/`：

```
/*
$path = FOLDER . "*/*/*/*/*.gif";
$files = glob($path);
*/ 
```

但这会导致解析错误，因为路径`*/*/*/`关闭了注释块。开头`/*`不会被视为字符串内的开头注释，但由于注释代码未被解析，因此`*/`被视为结尾注释。

任何人都可以在不使用的情况下想出一种解决方法`//`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:34:42.603

使用`"*/*/*/*/*.gif"`斜线作为`DIRECTORY_SEPARATOR`常量？

```
$path = FOLDER . '*' . DIRECTORY_SEPARATOR . '*' . DIRECTORY_SEPARATOR  . '.gif'; 
```

您可以制作一个快捷方式，例如`define('DS', DIRECTORY_SEPARATOR);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:34:45.283

`\`只需在正斜杠之前使用反斜杠`/`。它不会影响文件路径，但会使行块可注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:35:07.300

您将不得不使用`//`或建议使用消息或 bluegman991 之类的方法。

> 'C' 风格的注释在遇到的第一个 */ 处结束。^([1](http://www.php.net/manual/en/language.basic-syntax.comments.php))

解释器首先终止注释，`*/`无论它是字符串的一部分还是嵌套注释。

您的 IDE 可能具有切换`//`代码块注释的快捷方式。例如，Eclipse 使用`Ctrl`++`Shift`来`C`切换代码块上的注释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:33:05.703

对于您想在字符串中使用的任何特殊字符，您可以使用 \ 而不会影响该字符串的行为

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-05T13:14:43.573

我个人经常使用：

```
if (false) {  
    ...code to be skipped...  
} 
```

这样你应该避免这个问题，但错过了你的 ide 中的突出显示（除非它是一个非常非常非常聪明的 ide :)）

# timeout - 如何在基于 Twisted UDP 的应用程序中实现重传

> ID：10626232
> 
> 赞同：1
> 
> 时间：2012-05-16T20:30:06.237
> 
> 标签：timeout, udp, twisted

我想编写一个基于 UDP 的应用程序，它需要重新传输未经远程主机确认的数据包。我假设有两种可能的方法：

1.  对我的应用程序发送的每个数据包使用 reactor.callLater() 来调用一个检查是否已收到确认的函数（如果没有收到则重新传输数据包）。

2.  记住一个特殊列表中的每个数据包，并定期调用一个函数来检查该列表中的所有成员是否已收到确认。这个函数也可以通过 reactor.callLater() 调用——超时设置为下一次重传（列表中所有数据包的最短值）。

我的问题是：

1.  第一种方法要简单得多——但是 Twisted 底层实现是否足够高效以使用它？
2.  使用第二种方法时，是否可以中断 reactor.callLater()？例如，如果我安排了一个 20 秒的通话，突然我需要发送一个重传间隔为 5 秒的新数据包？

最好的祝福

马切克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:58:42.547

为了讨论 的行为`callLater`，我将忽略此问题的 UDP 部分并回答您提出的两个具体问题。:)

处理延迟呼叫是有效的。安排一个新的呼叫是 O(log N) 对已经安排的呼叫的数量。总体反应器性能在预定呼叫次数上是恒定的。

就“打断”而言，“打断”对于你想要的东西来说是错误的词。 [可以](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IDelayedCall.html)使用`reset`或重新安排延迟的呼叫`delay`。而且，当然，您可以随时`cancel`拨打现有电话并安排新电话。

# windows - hr 0x800f0203 没有为设备信息集或元素选择驱动程序

> ID：10626238
> 
> 赞同：0
> 
> 时间：2012-05-16T20:31:00.873
> 
> 标签：windows, com, driver, ndis

仍在安装我的 LWF 驱动程序。我想我已经接近了，但我遇到了这个错误：

“hr 0x800f0203 没有为设备信息集或元素选择驱动程序。”

我正在使用 SetupCopyOEMInfA 函数验证我正在复制 INF 和必要的组件。之前设备上有一个锁，之后有一个释放，我省略了发布的长度。在 pncClassSetup->Install 函数中引发错误。这可能是因为我的 componentId 是错误的，但在我发现的一个示例中我看到它与 MAX_PATH 进行了比较，所以我认为它是一个 INF 文件。我一直在研究的例子是：

[http://www.boudrand.net/index.php?option=com_content&view=article&id=5](http://www.boudrand.net/index.php?option=com_content&view=article&id=5) http://stackoverflow.com/questions/10308583/programmatically-installing-ndis-filt er-driver

如果有人有任何见解，我将不胜感激！

```
hr = pnc->QueryNetCfgClass( &GUID_DEVCLASS_NETSERVICE,                     
    IID_INetCfgClassSetup,                      
    (void**)&pncClassSetup);

if (SUCCEEDED(hr))   {

    bool isCopied;
    PCSTR pathToInf =  "C:\\Users\\user\\Desktop\\directory\\i386\\lwf.inf";
    PCSTR pathToBin =  "C:\\Users\\user\\Desktop\\directory\\i386\\";
    PSTR DestinationInfFileName = "lwf.inf";

    isCopied = SetupCopyOEMInfA(pathToInf,                                         
     // path to inf file
        pathToBin,                                                                    
              // dir containing driver binary
        SPOST_PATH,
        0,
        NULL,
        256,
        NULL,
        NULL);

    hr = CoCreateInstance( CLSID_CNetCfg,
        NULL, CLSCTX_INPROC_SERVER,
        IID_INetCfg,
        (void**)&pnc );

    LPCWSTR componentId;
    componentId = L"C:\\Users\\user\\Desktop\\directory\\i386\\lwf.inf";

    hr = pncClassSetup->Install( componentId,
        &OboToken,
        NSF_POSTSYSINSTALL,
        0,
        NULL,
        NULL,
        &pncc);

    if (S_OK == hr){        
        pncc->Release();
        pncClassSetup ->Release();

        if (SUCCEEDED(hr))   
            hr = pnc->Apply();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:28:14.413

原来 componentId 应该是 INF 文件中的 id。在我的情况下 "ms_ndislwf" 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-18T21:53:30.167

为了澄清上述回复，INetCfgClassSetup::Install() 方法的第一个参数必须与 INF 文件的 DDInstall 部分中指示的硬件 ID 匹配。例如：

```
[Manufacturer]
"Company Name" = DDInstallSectionName, architecture

[DDInstallSectionName.architecture]
"Driver Display Name" = Name_Of_Install_Section, HardwareId 
```

用一些数据填充它，我们有：

```
[Manufacturer]
"Taco Distributors Inc" = TacoDriver, NTamd64

[TacoDriver.NTamd64]
"Universal Taco Driver" = Taco_Install, 123TacosADay

[Taco_Install]
AddReg...
CopyFiles...
etc... 
```

在上面的示例中，您需要将“123TacosADay”传递给 InetCfgClassSetup::Install() 方法的第一个参数。

# android - 安卓 GPS 不工作

> ID：10626249
> 
> 赞同：0
> 
> 时间：2012-05-16T20:31:32.480
> 
> 标签：android, gps, nullpointerexception

每次运行代码时都会收到 NullPointerException。我在代码中启用了 Internet 和 GPS 权限（ACCESS_FINE_LOCATION、ACCESS_MOCK_LOCATION 和 ACCESS_COARSE_LOCATION）。我用模拟器和手机都试过了，都失败了。这不是 GPS 或 Internet 不可用的问题，AFAIK。

我的代码片段：-

```
@Override
public void onCreate (Bundle savedInstanceState) 
{
    try {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapView);
    LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
    View zoomView = mapView.getZoomControls(); 

    zoomLayout.addView(zoomView, 
        new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, 
            LayoutParams.WRAP_CONTENT)); 
    mapView.displayZoomControls(true);
    mapView.setStreetView(false);
    mapView.setSatellite(false);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );

    mc = mapView.getController();
    //        String coordinates[] = {"51.708945", "8.745928"};  //THIS WORKS IF ENABLED
    //        double lat = Double.parseDouble(coordinates[0]);
    //        double lng = Double.parseDouble(coordinates[1]);

    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    double lat = location.getLatitude(); //NULLPOINTER EXCEPTION THROWN HERE
    double lng = location.getLongitude();

    p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6)); 

    mc.animateTo(p);
    mc.setZoom(17); 
    //---Add a location marker---
    MapOverlay mapOverlay = new MapOverlay();
    List<Overlay> listOfOverlays = mapView.getOverlays();
    listOfOverlays.clear();
    listOfOverlays.add(mapOverlay);     

    mapView.invalidate();
    } catch (Exception e) {}
} 
```

当我尝试获取纬度或经度时，它会引发 NullPointer 异常。我该如何避免呢？locationManager 对象在创建时不会抛出任何异常（使用 getSystemService 方法），在请求位置更新时也不会抛出任何异常。我可以在使用它之前检查对象是否为空，但我不明白为什么它在这一点上为空......值得睡觉吗？那是正确的编程方式吗？我不明白为什么当我尝试获取经度/纬度时它不起作用。难道我做错了什么？

[此处](https://stackoverflow.com/questions/3486055/android-find-gps-location-once-show-loading-dialog)或[此处](http://supportforums.blackberry.com/t5/Java-Development/NullPointerException-at-getLocation-while-debugging-on-device/td-p/1167293)或[此处](https://stackoverflow.com/questions/6985035/android-mystery-nullpointerexception-getting-last-known-location)解决的问题无法解决我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:42:16.733

我想说最可能的问题是 LocationManager 没有最后一个已知位置，因此它返回 null。在这种情况下，您需要等待位置更新才能获得位置。

-= 更新 =- 只需这样做：

```
public void onLocationChanged(Location location) {
    double lat = location.getLatitude();
    double lng = location.getLongitude();

    p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6)); 

    mc.animateTo(p);
    mc.setZoom(17);
} 
```

由于这是一个内部类，它可以访问您的所有 Activity 成员。

# java - 如何从 Canvas 回到 MIDlet

> ID：10626252
> 
> 赞同：2
> 
> 时间：2012-05-16T20:31:50.797
> 
> 标签：java, java-me, midp, lcdui

我想弄清楚，在 Canvas 的 commandAction 方法中，如何让我的命令按钮带我回到 MIDlet 的开头？（基本上重新开始）。

当钥匙触发时，我让它带我到一个新的列表页面。在那个页面上，我有一个后退按钮，理想情况下我需要它来带我回到 CalandarMidlet 页面。我的逻辑是，在 commandAction 方法中，我只会从那里调用 startApp() 但这不起作用，因为 commandAction 是静态的，而 startApp() 不是。

我已经用尽了所有的可能性，现在我被难住了。任何指导将不胜感激。

在 commandAction 方法内的 CalendarCanvas 页面中，我注释掉了我卡住的地方。我试图让“后退”按钮带我回到应用程序的开头（回到日历）。

```
import java.io.IOException;
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;

/**
 * @author addylesson
 */
public class CalendarMidlet extends MIDlet {
    private Display mydisplay;
    private Command f,e,l;

    public CalendarMidlet(){}

    public void startApp() {
        final Displayable d = new CalendarCanvas(this);

        e = new Command("Back", Command.BACK, 0);
        f = new Command("Exit", Command.EXIT, 1);
        l = new Command("List", Command.SCREEN, 3);
        d.addCommand(f);
        d.addCommand(e);
        d.addCommand(l);
        //mList.addCommand(e);
        d.setCommandListener(new CommandListener()
        {
            public void commandAction(Command c, Displayable s)
            {
                if(c == e)
                    mydisplay.setCurrent(d);
                if(c == l)
                    //mydisplay.setCurrent(mList);
                //else if(c == f)
            notifyDestroyed();
            }
        } );
        /*mList.setCommandListener(new CommandListener()
        {
            public void commandAction(Command c, Displayable s)
            {
                if(c == e)
                    mydisplay.setCurrent(d);
                else if(c == f)
            notifyDestroyed();
            }
        } );*/
        mydisplay = Display.getDisplay(this);
        mydisplay.setCurrent(d);
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
    }

}

import java.io.IOException;
import java.util.Date;

import javax.microedition.lcdui.*;
import javax.microedition.midlet.MIDlet;

public class CalendarCanvas extends Canvas
{
    CalendarWidget calendar = null;
    MIDlet midlet = null;
        private Alert alert;
        private List mList;
        private Command f;
        private Display mydisplay;

        String[] stringElements = { "Celeberity", "Sports", "Zodiac" };
        Image[] imageElements = { loadImage("/airplane.png"),
                              loadImage("/car.png"), loadImage("/hotel.png") };

    public CalendarCanvas(final MIDlet m)
    {

                this.midlet = m;

        calendar = new CalendarWidget(new Date());

        calendar.headerFont = Font.getFont(Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_LARGE);
        calendar.weekdayFont = Font.getFont(Font.FACE_PROPORTIONAL, Font.STYLE_BOLD, Font.SIZE_MEDIUM);
        calendar.weekdayBgColor = 0xccccff;
        calendar.weekdayColor = 0x0000ff;
        calendar.headerColor = 0xffffff;

                alert = new Alert("Listen", "On this day "
                        +calendar.getSelectedDate().toString()+ "stuff happened", null, null);
                alert.setTimeout(Alert.FOREVER);
                mList = new List("Reservation type", List.IMPLICIT,
                stringElements, imageElements);
                f = new Command("Back", Command.BACK, 0);
                mList.addCommand(f);
                mList.setCommandListener(new CommandListener()
                      {
                      public void commandAction(Command c, Displayable s)
                        {
                            if (c == f)
                                //HOW DO I GET BACK TO THE START OF THE MIDLET??

                            if (c == List.SELECT_COMMAND) {
                         int index = mList.getSelectedIndex();
                         Alert alert2 = new Alert("Your selection",
                        "You chose " + mList.getString(index) + ".",
                        null, AlertType.INFO);
                        mydisplay = Display.getDisplay(midlet);
                        mydisplay.setCurrent(alert2);
        }

                        }
                      } );

        calendar.initialize();
    }

    protected void keyPressed(int key)
    {
        int keyCode = getGameAction(key);
        String day = calendar.getSelectedDate().toString();
        if(keyCode == FIRE)
        {
            /*Display.getDisplay(midlet).setCurrent(
                new Alert("Selected date", 
                                calendar.getSelectedDate().toString(), null, 
                                AlertType.CONFIRMATION)
            );*/
                        Display.getDisplay(midlet).setCurrent(mList);
        }
        else
        {
            calendar.keyPressed(keyCode);

            repaint();
        }
    }

    protected void paint(Graphics g)
    {
        g.setColor(0xffffff);
        g.fillRect(0, 0, getWidth(), getHeight());

        calendar.paint(g);
    }
        private Image loadImage(String name) 
        {
        Image image = null;
        try {
        image = Image.createImage(name);
        }
        catch (IOException ioe) {
        System.out.println(ioe);
        }
        return image;
        }

}

import java.util.Calendar;
import java.util.Date;

import javax.microedition.lcdui.*;

public class CalendarWidget
{
    static final String[] MONTH_LABELS = new String[]{
        "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    };
    static final String[] WEEKDAY_LABELS = new String[]{
        "M", "T", "W", "T", "F", "S", "S"
    };
    /* starting week day: 0 for monday, 6 for sunday */
    public int startWeekday = 0;

    /* elements padding */
    public int padding = 2;

    /* cells border properties */
    public int borderWidth = 4;
    public int borderColor = 0x000000;

    /* weekday labels properties */
    public Font weekdayFont = Font.getDefaultFont();
    public int weekdayBgColor = 0x0000ff;
    public int weekdayColor = 0xffffff;

    /* header (month-year label) properties */
    public Font headerFont = Font.getDefaultFont();
    public int headerBgColor = 0x0000ff;
    public int headerColor = 0xffffff;

    /* cells properties */
    public Font font = Font.getDefaultFont();
    public int foreColor = 0x000000;
    public int bgColor = 0x9999ff;
    public int selectedBgColor = 0xffff00;
    public int selectedForeColor = 0xff0000;

    /* internal properties */
    int width = 0;
    int height = 0;
    int headerHeight = 0;
    int weekHeight = 0;
    int cellWidth = 0;
    int cellHeight = 0;

    /* internal time properties */
    long currentTimestamp = 0;
    Calendar calendar = null;
    int weeks = 0;

public CalendarWidget(Date date)
{
    calendar = Calendar.getInstance();

    //we'll see these 2 methods later
    setDate(date);

    initialize();
}
public Date getSelectedDate()
{
    return calendar.getTime();
}
public void setDate(Date d)
{
    currentTimestamp = d.getTime();

    calendar.setTime(d);

    //weeks number can change, depending on week starting day and month total days
    this.weeks = (int)Math.ceil(((double)getStartWeekday() + getMonthDays()) / 7);
}
public void setDate(long timestamp)
{
    setDate(new Date(timestamp));
}
void initialize()
{
    //let's initialize calendar size
    this.cellWidth = font.stringWidth("MM") + 3 * padding;
    this.cellHeight = font.getHeight() + 15 * padding;

    this.headerHeight = headerFont.getHeight() + 2 * padding;
    this.weekHeight = weekdayFont.getHeight() + 2 * padding;

    this.width = 7 * (cellWidth + borderWidth) + borderWidth;
    initHeight();
}
void initHeight()
{
    this.height = 
        headerHeight + weekHeight + 
        this.weeks * (cellHeight + borderWidth) + borderWidth;
}
int getMonthDays()
{
    int month = calendar.get(Calendar.MONTH);

    switch(month)
    {
    case 3:
    case 5:
    case 8:
    case 10:
        return 30;
    case 1:
        return calendar.get(Calendar.YEAR) % 4 == 0 && calendar.get(Calendar.YEAR) % 100 != 0 ? 29 : 28;
    default:
        return 31;
    }
}
int getStartWeekday()
{
    //let's create a new calendar with same month and year, but with day 1
    Calendar c = Calendar.getInstance();

    c.set(Calendar.MONTH, calendar.get(Calendar.MONTH));
    c.set(Calendar.YEAR, calendar.get(Calendar.YEAR));
    c.set(Calendar.DAY_OF_MONTH, 1);

    //we must normalize DAY_OF_WEEK returned value
    return (c.get(Calendar.DAY_OF_WEEK) + 5) % 7;
}
public void keyPressed(int key)
{
    switch(key)
    {
    case Canvas.UP:
        go(-7);
        break;
    case Canvas.DOWN:
        go(7);
        break;
    case Canvas.RIGHT:
        go(1);
        break;
    case Canvas.LEFT:
        go(-1);
        break;
    }
}
void go(int delta)
{
    int prevMonth = calendar.get(Calendar.MONTH);

    setDate(currentTimestamp + 86400000 * delta);

    //we have to check if month has changed
    //if yes, we have to recalculate month height
    //since weeks number could be changed
    if(calendar.get(Calendar.MONTH) != prevMonth)
    {
        initHeight();
    }
}
public void paint(Graphics g)
{
    //painting background
    g.setColor(bgColor);
    g.fillRect(0, 0, width, height);

    //painting header (month-year label)
    g.setFont(headerFont);
    g.setColor(headerColor);
    g.drawString(MONTH_LABELS[calendar.get(Calendar.MONTH)] + " " + calendar.get(Calendar.YEAR), width / 2, padding, Graphics.TOP | Graphics.HCENTER);

    //painting week days labels
    g.translate(0, headerHeight);

    g.setColor(weekdayBgColor);
    g.fillRect(0, 0, width, weekHeight);

    g.setColor(weekdayColor);
    g.setFont(weekdayFont);

    for(int i = 0; i < 7; i++)
    {
        g.drawString(WEEKDAY_LABELS[(i + startWeekday) % 7],
            borderWidth + i * (cellWidth + borderWidth) + cellWidth / 2,
            padding,
            Graphics.TOP | Graphics.HCENTER
        );
    }

    //painting cells borders
    g.translate(0, weekHeight);

    g.setColor(borderColor);

    for(int i = 0; i <= weeks; i++)
    {
        g.fillRect(0, i * (cellHeight + borderWidth), width, borderWidth);
    }
    for(int i = 0; i <= 7; i++)
    {
        g.fillRect(i * (cellWidth + borderWidth), 0, borderWidth, height - headerHeight - weekHeight);
    }

    //painting days
    int days = getMonthDays();
    int dayIndex = (getStartWeekday() - this.startWeekday + 7) % 7;

    g.setColor(foreColor);

    int currentDay = calendar.get(Calendar.DAY_OF_MONTH);

    for(int i = 0; i < days; i++)
    {
        int weekday = (dayIndex + i) % 7;
        int row = (dayIndex + i) / 7;

        int x = borderWidth + weekday * (cellWidth + borderWidth) + cellWidth / 2;
        int y = borderWidth + row * (cellHeight + borderWidth) + padding;

        //if this is the current day, we'll use selected bg and fore colors
        if(i + 1 == currentDay)
        {
            g.setColor(selectedBgColor);
            g.fillRect(
                borderWidth + weekday * (cellWidth + borderWidth), 
                borderWidth + row * (cellHeight + borderWidth), 
                cellWidth, cellHeight);
            g.setColor(selectedForeColor);
        }

        g.drawString("" + (i + 1), x, y, Graphics.TOP | Graphics.HCENTER);

        //if this is the current day, we must restore standard fore color 
        if(i + 1 == currentDay)
        {
            g.setColor(foreColor);
        }
    }
    //let's traslate back!
    g.translate(0, - headerHeight - weekHeight);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:57:53.800

直接（坦率地说有点愚蠢）的方法是`m.startApp()`在你被卡住的地方调用。“愚蠢”的部分是它不是您想要调用的 startApp，但正如您正确所说的“带我回到 CalendarMidlet 页面”。

为了更接近您的意图，我宁愿稍微[重构CalendarMidlet ......](http://en.wikipedia.org/wiki/Refactoring "这是什么？")

```
 // ...
    public void startApp() {
        // extract stuff to start over into dedicated method,
        // keep the rest here
        e = new Command("Back", Command.BACK, 0);
        f = new Command("Exit", Command.EXIT, 1);
        l = new Command("List", Command.SCREEN, 3);
        mydisplay = Display.getDisplay(this);
        startOver();
    }

    public void startOver() {
        // encapsulate stuff to start over here
        final Displayable d = new CalendarCanvas(this);

        d.addCommand(f);
        d.addCommand(e);
        d.addCommand(l);
        d.setCommandListener(new CommandListener()
        {
            public void commandAction(Command c, Displayable s)
            {
                if(c == e)
                    mydisplay.setCurrent(d);
                if(c == l)
                    //mydisplay.setCurrent(mList);
                //else if(c == f)
            notifyDestroyed();
            }
        } );
        mydisplay.setCurrent(d);
    }
    // ... 
```

...然后稍微调整 CalendarCanvas，以使用上面的“更智能”设计...

```
 // ...
    CalendarMidlet midlet = null; // was declared as MIDlet before

    // ...
    public CalendarCanvas(final CalendarMIDlet m) // parameter was MIDlet
    {

                this.midlet = m;
                // ...
    } 
```

...这样`commandAction`我就可以调用一个做我想做的事情的方法，而不仅仅是愚蠢的`startApp`：

```
 if (c == f)
     m.startOver(); // take me back to the CalendarMidlet page 
```

# apache-pig - 是否有可能在猪中使用“foreach n”而不是“foreach”？

> ID：10626253
> 
> 赞同：1
> 
> 时间：2012-05-16T20:32:00.903
> 
> 标签：apache-pig

我有一个 hbase 表，其中我将深度值存储为列之一以及不同列中的几个其他值。我已经使用 HbaseStorage() 获取了所需的数据。现在我必须“一次取 5 个”这些深度值并对与这 5 个深度值对应的字段进行一些分析，并将所有 5 行的最终结果作为一组发出。我不知道如何一次获取 5 个深度值并进行操作。这有点像做“foreach n”而不是“foreach”..需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-29T14:33:56.327

如果您需要对 5 个后续行执行某些操作，可以使用以下方法：

1.  对所有行进行排名
2.  使用四个连接（rank==rank+1）将所有内容组合成一个数据块

当然还应该考虑存储在 5 列而不是 5 行中的可能性，但这可能不切实际。

# string - 哪个更好：代表文件名或 FileName 类的字符串？

> ID：10626256
> 
> 赞同：1
> 
> 时间：2012-05-16T20:32:10.983
> 
> 标签：string, class, language-agnostic

该类的优点是它可以自动过滤分配/构造的错误字符串。它还可以让您绝对确定您正在处理一个文件名，而不仅仅是一个*应该*代表文件名的字符串。

类的问题是，限制在哪里？我们最终会创建大量不必要的类吗？例如，某些字符串只能介于 x 和 y 字符之间。我应该为那些人上课吗？

URL 的类呢？还是仅用于大写字符串的类？在哪里划清界限？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:47:59.977

这取决于上下文。在大多数应用程序中，您不会打扰，因为您给出的原因，也因为您使用的 API 期望文件名无论如何都是字符串（检查有效文件名有什么好处吗？也许您会看到当您尝试使用它时出现一个合适的错误，并且系统库中的代码将适应不同的平台，您可能不知道或正在对其进行测试......）。

但是，我可以想象一个专门的应用程序或库，其中了解目录和文件之间的区别可能很重要（类可以在类型级别标记区别），或者您需要大量与文件相关的信息（类将是收集这个的好地方）或在对文件名执行某些操作时获得高性能（该类可以通过缓存结果来帮助提高性能）等等。

所以最好的设计将取决于你在做什么。您的系统是否只有大写字符串很重要？您正在使用的网络库中没有 URL 吗？上下文就是一切……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:41:42.987

尝试根据对象而不是简单的字符串来思考。字符串代表什么？如果它代表的不仅仅是一个单词或短语，那么一个类可能是有意义的。

与其定义 FileName 类，不如定义一个 File 类来表示实际文件。FileName 只是该类的一个属性（然后您可以将文件名验证放在该类中）。它还将为您提供构建有用的相关属性和方法的机会，例如 Open()、Write()、Close()、Read()、PathName 等。

同样，Urls 类也很有意义，因为您可能希望从字符串中提取其他详细信息。例如：主机名、端口、查询字符串。通过使其成为一个类，您可以将所有这些功能捆绑在一个位置。

# sql - 多对多关系中的中介表真的需要PK吗？

> ID：10626257
> 
> 赞同：2
> 
> 时间：2012-05-16T20:32:19.513
> 
> 标签：sql, linq-to-sql, many-to-many

我有一个简单的经典例子

```
Products -> ProductCategories <- Categories 
```

一方面，一些OR/M（如Linq2SQL）不想在没有PK的“Products”中生成导航属性“ProductCategories”，另一方面，这只是链接表？如果此表包含 PK - 好的，我可以执行所有 CRUD 操作，否则 - 也是正确的（我可以使用复杂的键 ProductsId + CategoriesId 来操作每一行）

PS 我习惯于创建像 ProductCategories.ProductsId + ProductCategories 这样的约束。CategoriesId 是唯一的

那么，从性能的角度来看，哪种方法更有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:35:49.623

我几乎总是建议使用 PK。一方面，它是标准化所必需的。另一方面，聚集索引（在技术上与 PK 不同，但默认情况下，聚集索引是在 PK 上定义的）通常有助于提高性能，但多少很大程度上取决于使用特性。而且，正如您所指出的，许多与 SQL 数据库一起使用的 ORM 和其他框架都期望 PK 用于结构目的。

根据您的情况，简单地在链接表的两列上创建 PK 通常是有意义的，尽管我使用了一个框架，该框架期望每个表都有一个整数 Id 列。

# c# - 棱镜控制 访问模块

> ID：10626260
> 
> 赞同：1
> 
> 时间：2012-05-16T20:32:21.323
> 
> 标签：c#, wpf, prism

我有一个带有一堆不同模块的 WPF Prism 应用程序，并且最终用户定义了不同的角色。我正在寻找一种可以根据用户角色加载模块的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:57:18.653

One approach is to populate the ModuleCatalog based on the UserRoles. One would do this in the Bootstrapper by overriding: protected virtual IModuleCatalog GetModuleCatalog(); Another extensibility point are: protected override void ConfigureContainer();

Dig into the startup sequence of your application and the Bootstrapper, for other ideas can be found there.

# javascript - javascript settimeout 越来越快？

> ID：10626261
> 
> 赞同：1
> 
> 时间：2012-05-16T20:32:35.897
> 
> 标签：javascript

我正在用 JavaScript 制作蛇游戏，所以如果我按下箭头键，“蛇头”应该会继续朝那个方向移动。

我第一次按下一个键时它做得很好，但在那之后头部移动得越来越快。

所以我想要的是每 100 毫秒移动一次头部的东西。如果你不明白我的意思，那么看看这个页面：[http ://www.dbzweb.be/08/braetj08/snake.html](http://www.dbzweb.be/08/braetj08/snake.html)

那么，有人可以告诉我如何更改我的代码以使其保持以相同的速度运行吗？

```
function init_game() {
    if ((event ? event.keyCode : down) == (event ? 40 : 1)) /*down*/
    {
        if ((snakehead + z) < z * z) {
            right = 0;
            left = 0;
            up = 0;
            down = 1;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gamebox";
            snakehead = snakehead + z;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gameboxsnake";
        } else {
            document.write("<h1>game over!</h1> press this button to try again.<br><input     type='button' value='retry'     onclick='window.open(\"http://www.dbzweb.be/08/braetj08/snake.html\",\"_self\")'>");
        }
    }
    if ((event ? event.keyCode : up) == (event ? 38 : 1)) /*up*/
    {
        if ((snakehead - z) > -1) {
            right = 0;
            left = 0;
            up = 1;
            down = 0;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gamebox";
            snakehead = snakehead - z;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gameboxsnake";
        } else {
            document.write("<h1>game over!</h1> press this button to try again.<br><input    type='button' value='retry'    onclick='window.open(\"http://www.dbzweb.be/08/braetj08/snake.html\",\"_self\")'>");
        }
    }
    if ((event ? event.keyCode : right) == (event ? 39 : 1)) /*right*/
    {
        if ((snakehead + 1) % z !== 0) {
            right = 1;
            left = 0;
            up = 0;
            down = 0;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gamebox";
            snakehead = snakehead + 1;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gameboxsnake";
        } else {
            document.write("<h1>game over!</h1> press this button to try again.<br><input     type='button' value='retry'   onclick='window.open(\"http://www.dbzweb.be/08/braetj08/snake.html\",\"_self\")'>");
        }
    }
    if ((event ? event.keyCode : left) == (event ? 37 : 1)) /*left*/
    {
        if (snakehead % z !== 0) {
            right = 0;
            left = 1;
            up = 0;
            down = 0;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gamebox";
            snakehead = snakehead - 1;
            document.getElementsByClassName(snakehead, "div", document)[0].id = "gameboxsnake";
        } else {
            document.write("<h1>game over!</h1> press this button to try again.<br><input   type='button' value='retry' onclick='window.open(\"http://www.dbzweb.be/08/braetj08/snake.html\",\"_self\")'>");
        }
    }
    t = 0;
    t = setTimeout("init_game()", 100);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:51:33.840

```
t = 0;
t = setTimeout("init_game()", 100); 
```

这并不像你认为的那样。这会将变量设置`t`为 0（这*不会*清除超时），然后立即将其设置为`timeoutID`从`setTimeout`.

蛇正在加速，因为每次按下一个键都会`init_game`再次运行，从而增加了再次运行所有调用的超时量`init_game`。

尝试更改`t = 0;`为`clearTimeout(t)`. 不过，您需要`t`在代码之前声明（添加`var t;`到顶部）。

另外，不要将字符串传递给`setTimeout`，它使用`eval`. 传递函数。

```
clearTimeout(t);
t = setTimeout(init_game, 100); 
```

注意：`document.write("<h1>game over!</h1>`你应该添加`return;`停止`init_game`循环（并打印无限的“游戏结束！”消息）。

演示：http: [//jsfiddle.net/T5kPg/1/](http://jsfiddle.net/T5kPg/1/)

# java - 使用 DatagramPacket 欺骗源 IP/端口

> ID：10626262
> 
> 赞同：2
> 
> 时间：2012-05-16T20:32:44.880
> 
> 标签：java, udp, datagram, spoofing

有没有办法`DatagramPacket`在 Java 中欺骗对象的源 IP/端口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:08:52.260

原始套接字是一个有助于您搜索的术语。

你可以看看下面的问题： [Best way to do RAW socket programming involved Java](https://stackoverflow.com/questions/3854961/best-way-to-do-raw-socket-programming-involving-java)

他们推荐一个原始套接字包装器，[rocksaw](http://www.savarese.com/software/rocksaw/)。

# ruby-on-rails - 未找到 Rails @import 指南针

> ID：10626263
> 
> 赞同：3
> 
> 时间：2012-05-16T20:32:47.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, compass-sass

这是我的application.css：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
*/

@import "compass/reset"; 
```

在指南针重置时获得 404：

```
GET http://0.0.0.0:3000/assets/compass/reset 404 (Not Found) 
```

顺便说一句，运行 Rails 3.2.3。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T20:46:51.570

重命名`application.css`为`application.css.scss`.

# html - 银河 s2 的媒体查询

> ID：10626266
> 
> 赞同：5
> 
> 时间：2012-05-16T20:32:52.183
> 
> 标签：html, css, media-queries, responsive-design, galaxy

我为我的网站开发了一个响应式主题，通过在我的 css 文件上使用媒体查询。

它适用于 ipad/iphone 和小型安卓手机。当我到达 Galaxy S2 时，它似乎忽略了我的媒体查询。

这是我用来定位 Galaxy s2 等的媒体查询 - 是否正确？如果是这样，为什么它不起作用？

```
@media only screen and (min-device-width : 480px) and (max-device-width : 800px) 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T20:39:42.773

您的代码应该可以工作。

您是否尝试过添加“方向”，例如：

```
@media only screen 
and (min-device-width : 480px) 
and (max-device-width : 800px) 
and (orientation : landscape) {

}

@media only screen 
and (min-device-width : 480px) 
and (max-device-width : 800px) 
and (orientation : portrait) {

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T17:25:38.843

显示的答案完全错误！三星设备在纵向和横向模式下的分辨率与 Apple 设备不同。另外，为什么要使用“min-device-width”和“max-device-width”？坚持手头的决议！您不希望您的设计以错误的分辨率不恰当地显示！这样做，我保证它有效，因为我一直在使用它：

@media screen and (device-width: 480px) and (device-height: 800px) and (orientation: portrait) { styles } @media screen and (device-width: 800px) and (device-height: 480px) and (orientation : Landscape) { styles } 抛弃“唯一”规则！这不是必需的！仅使用“手持”或“屏幕”值！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-22T13:29:39.343

三星 Galaxy S2 的媒体查询类似于以下代码，您应该使用 1.5 来获取`-webkit-device-pixel-ratio`，仅此而已。

```
/* Samsung Galaxy S2 ----------- */
/* Portrait and Landscape */
@media screen and (device-width: 320px) and (device-height: 533px) and (-webkit-device-pixel-ratio: 1.5){
    /* Styles */
}

/* Landscape */
@media only screen and (min-device-width: 320px) and (max-device-height: 533px) and (orientation : landscape) and (-webkit-device-pixel-ratio: 1.5){
    /* Styles */
}

/* Portrait */
@media only screen and (min-device-width: 320px) and (max-device-height: 533px) and (orientation : portrait) and (-webkit-device-pixel-ratio: 1.5){
    /* Styles */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:33:59.437

这也可能值得一试：`@media all and (device-aspect-ratio: 3/5)`.

信息取自：[http ://cssmediaqueries.com/](http://cssmediaqueries.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T17:54:09.917

Galaxy S2 的设备像素比为 1.5，因此媒体查询必须是：

@media only screen and (min-device-width: 360px) and (max-device-width: 533px)

# sql - 为什么在 Coldfusion 中添加“AND 1=1”会修复 SQL 查询？

> ID：10626267
> 
> 赞同：0
> 
> 时间：2012-05-16T20:32:52.330
> 
> 标签：sql, coldfusion, cfquery

有好几次我创建了一个 cfquery 并且没有充分的理由，它不起作用。例如，我最近有一个这样的查询：

```
<cfquery name="get_projects" datasource="#application.dsn#">
        SELECT *
        FROM   projects
        WHERE  project_id = <cfqueryparam cfsqltype="cf_sql_integer" value="#project_id#">

          <cfif start_date NEQ "">
               AND project_start_date = <cfqueryparam cfsqltype="cf_sql_timestamp" value="#start_date#">
          </cfif>

        ORDER BY project_name
    </cfquery> 
```

我确认 start_date 变量是一个空字符串。但是，我会收到一个指向该行的错误，并说“无法将值转换为请求的类型”，即使它不应该到达该行。

但真正奇怪的是……如果我在 WHERE 子句中添加“AND 1=1”，查询就可以完美运行。

我在一些查询中偶尔会发生这种情况，但我不能说我认识到它的模式。查询总是写得很完美。在某些情况下，查询之前正在工作，然后突然停止，可能是在文件中的其他地方发生更改时。我所要做的就是在 WHERE 子句中添加“AND 1=1”，然后它又可以工作了。其他人遇到这个或有想法如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:14:29.353

它是许多开发人员使用的快捷方式，这是一个示例

```
select * from table where 1 = 1
<cfif x EQ 1>and x = 1</cfif>
<cfif y EQ 1>and y = 1</cfif>
<cfif z EQ 1>and z = 1</cfif> 
```

这总是有效的。在 3 个 if 中有一个条件和。但是如果所有的 ands 都是假的，你最终会得到这样的查询：

```
select * from table where 1=1 
```

即返回所有记录

如果你有一个或多个 ands 为真，而你没有 1=1，你最终会得到：

```
select * from table where and x = 1 
```

..这不起作用。所以它只是一个简单的捷径来确保所有的ands都可以工作，无论你需要0还是全部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:42:42.160

无论如何，我认为查询不正确-子句中没有`AND`或`OR`结合了这两个部分。`WHERE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:09:18.870

我看不到您上面的查询将如何按原样运行。

我在您的 CFIF 语句中添加了 AND。这应该运行（当您修复 cfqueryparams.

```
SELECT *
FROM   projects
WHERE  project_id = <cfqueryparam>
       <cfif start_date NEQ "">
          AND project_start_date = <cfqueryparam>
      </cfif>
ORDER BY project_name 
```

我经常使用这样的“AND 1=1”语句，其中我以 1 = 1 开始 WHERE 子句：

```
SELECT *
FROM   projects
WHERE  1 = 1
       AND project_id = <cfqueryparam>
       <cfif start_date NEQ "">
          AND project_start_date = <cfqueryparam>
      </cfif>
ORDER BY project_name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T21:12:10.850

我已经看到它发生在查询编译不正确并更改其中文本的任何部分（例如添加 1=1）重新编译它的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T20:49:56.940

IIRC， a`Timestamp`与 a 不同`Date`。如果您使用的是 MSSQL Server，请参阅[http://msdn.microsoft.com/en-us/library/ms182776(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms182776(v=sql.90).aspx)

```
<cfqueryparam cfsqltype="cf_sql_timestamp" value="#start_date#"> 
```

应该

```
<cfqueryparam cfsqltype="cf_sql_date" value="#start_date#"> 
```

添加`AND 1=1`可能会导致服务器的查询优化器忽略整个 WHERE 谓词。

# php - MYSQL自动更新第二张表查询

> ID：10626269
> 
> 赞同：0
> 
> 时间：2012-05-16T20:33:02.117
> 
> 标签：php, mysql, sql, primary-key

我有 2 张桌子

> Try1（ID 和 ValueA ）

和

> try2（ID 和值 b）

在表 Try1 ID 是自动增量和主键，我想以某种方式将此 TRY1.ID 链接到 try2.ID 以便当我`insert into try1 (valueA)=XXX`然后自动生成的 ID 也反映在 Try2

（解决方案是否与基于第一个创建外键有关？）

我正在使用 PHPMYADMIN 和 php 插入查询。任何可能的方法都会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:42:45.647

我认为您正在寻找触发器-如下所示：

```
DELIMITER $$
CREATE
    /*[DEFINER = { user | CURRENT_USER }]*/
    TRIGGER `CopyTry1RowToTry2` AFTER INSERT ON `try1` 
    FOR EACH ROW BEGIN
        INSERT INTO `try2` (`id`,`value`) VALUES(NEW.`id`,NEW.`value`)
    END;
$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:41:30.117

在 Try2 中提到 Try1 ID 作为外键。像：

```
CREATE TABLE Try2 (id INT, Try1_id INT, valueb INT,
                    INDEX par_ind (Try1_id),
                    FOREIGN KEY (Try1_id) REFERENCES Try1(id)
                      ON DELETE CASCADE
) ENGINE=INNODB; 
```

有关外键的更多信息，请参阅此

[http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# java - Struts 1：我如何在 DAO 层中获取会话变量

> ID：10626273
> 
> 赞同：0
> 
> 时间：2012-05-16T20:33:23.883
> 
> 标签：java, struts-1, struts1

我正在使用 struts 1（遗留项目的维护任务）。应用程序在 ActionClasses 中分层调用管理器类和管理器类实例化和使用 DAO 层类/

我必须编写条件逻辑，其中基于会话变量，我希望 DAO 层在不同的 DB2 模式之间切换。

如何读取 DAO java 类中的会话？一种明显的方法是重构管理器/dao 类构造函数以通过调用链传递会话变量

在struts 2中，我们使用`ActionContext.getContext().getSession();`

我可以在 struts 1 中做类似的事情吗？

---编辑所有纯粹主义者（包括我）-------------

我正在研究这个代码库，用于对更新的业务逻辑进行原型设计。这是一个继承的代码，早在 2003-2004 年就写了。原型制作完成后，这段代码根本不会被使用，直接进入回收站。

我知道 DAO 不需要访问 HTTP 会话，这就是我在编写代码时遵循的。

但我的问题是，有没有办法在 struts 1 框架中访问 DAO 中的会话（过滤器/黑客？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:22:00.670

最简单的是有一个本地线程，可能设置在过滤器或简单定制的请求处理器中，通过静态方法访问。我觉得脏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:33:33.940

你不这样做。将来你会让自己头疼不已。相反，通过调用链传递值。

# sql-server - 发送传真 SQL Server

> ID：10626275
> 
> 赞同：0
> 
> 时间：2012-05-16T20:33:37.813
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

我尝试通过 SQl server 2008 发送传真。

```
EXECUTE master.sys.xp_sendmail 
@recipients='[FAX:XXXXXXX]', 
@message=' <Message details>’, @subject=’&lt;subject> ' 
EXECUTE master..xp_stopmail 
```

不幸的是，它给了我如下错误

```
Msg 17938, Level 16, State 0, Line 0
SQL Mail does not work with the 64-bit version of SQL Server
Msg 17938, Level 16, State 0, Line 0
SQL Mail does not work with the 64-bit version of SQL Server 
```

我得到谷歌什么是可能的转变，但没有任何与 SQL Server 2008 相关的东西。

任何输入将不胜感激。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:44:12.007

从外部程序（例如 C#）发送传真。比 SQL Server 做得更好，尤其是使用 xp_sendmail，正如您可能从错误消息中收集到的那样，它在 64 位上不起作用，并且 SQL Mail 已经被[弃用了](http://msdn.microsoft.com/en-us/library/ms143729%28SQL.100%29.aspx)很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:47:40.257

xp_sendmail 已过时，不适用于 64 位机器。相反，请使用[数据库邮件](http://msdn.microsoft.com/en-us/library/ms175887%28v=sql.105%29.aspx)。

我还会考虑数据库是否是发送电子邮件和/或传真的正确来源。这在其他地方处理得更好吗——比如在 Web 服务或客户端应用程序中？

# php - 功能：bcmod 不可用

> ID：10626277
> 
> 赞同：5
> 
> 时间：2012-05-16T20:33:48.893
> 
> 标签：php

安装 joomla 组件之一时出现以下错误。

功能：bcmod 不可用。请询问您的主机如何在您的 PHP 安装中启用此功能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T20:58:14.337

您需要使用 bcmath 支持（--enable-bcmath 配置选项）编译您的 PHP。如果您在共享主机上，他们不太可能为您启用它。因此，您可以从此页面尝试 PHP 手册中的解决方案：[http](http://ru.php.net/manual/en/function.bcmod.php) ://ru.php.net/manual/en/function.bcmod.php我没有尝试过，但您可以对其进行测试：

```
/** 
 * my_bcmod - get modulus (substitute for bcmod) 
 * string my_bcmod ( string left_operand, int modulus ) 
 * left_operand can be really big, but be carefull with modulus :( 
 * by Andrius Baranauskas and Laurynas Butkus :) Vilnius, Lithuania 
 **/ 
function my_bcmod( $x, $y ) 
{ 
    // how many numbers to take at once? carefull not to exceed (int) 
    $take = 5;     
    $mod = ''; 

    do 
    { 
        $a = (int)$mod.substr( $x, 0, $take ); 
        $x = substr( $x, $take ); 
        $mod = $a % $y;    
    } 
    while ( strlen($x) ); 

    return (int)$mod; 
} 

// example 
echo my_bcmod( "7044060001970316212900", 150 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-28T14:01:32.717

如果您有专用服务器，请尝试此处给出的解决方案[https://stackoverflow.com/a/25229386/8015825](https://stackoverflow.com/a/25229386/8015825)。

> 在重新编译之前，检查 php.ini 文件并搜索“bcmath”。您可能会发现 bcmath.scale=0。如果是这样，请将 0 更改为 2。

然后重启你的http服务器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-29T06:36:25.900

您可以使用安装程序安装 bcmath 包。我使用的是 CentOS，所以我的命令相对不同。您可以根据您的操作系统使用。

```
yum install php-bcmath 
```

安装软件包后，

如果您使用的是 php-fpm，那么您需要使用以下命令重新启动 php-fpm 服务

```
systemctl restart php-fpm 
```

最后需要重启http服务器

```
systemctl restart nginx 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-22T08:47:45.353

需要在 Debian 10 上安装库，还要在安装 bcmath 之前删除存储库的过期密钥

```
apt-key list 2>/dev/null | grep expired -B 1
apt-key del 95BD4743
apt-key list | grep expired
wget -O /etc/apt/trusted.gpg.d/deb.sury.gpg https://packages.sury.org/php/apt.gpg
apt-get update
apt install php7.2-bcmath
systemctl restart apache2 
```

# android - Android 不会从服务中释放资源？

> ID：10626281
> 
> 赞同：0
> 
> 时间：2012-05-16T20:34:07.113
> 
> 标签：android

正如[这个页面](http://developer.android.com/guide/topics/fundamentals/services.html)所说：

> 一旦启动，服务可以无限期地在后台运行，即使启动它的组件被破坏。

那么，如果服务中存在无限循环，并且系统资源不足，服务会被杀死吗？如果是，那么我不能确定我的服务会运行到最后吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:37:28.877

是的，如果您的服务需要资源，如果您想要始终运行您需要使用的东西，您的服务可以被操作系统杀死，`startForeground`但即使这样也不能保证它不会被杀死的可能性要小得多。

using`startForeground`要求你在通知栏中有一个通知，告诉用户有东西仍在运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:39:24.567

您可以设置服务的优先级，要求它不会被终止，但只有在您真的非常需要它时才应该这样做。您的服务不应该占用太多资源，因为它没有与之关联的 UI，因此它可能不是一个很好的杀死以释放资源的候选者。如果您的 Service 被杀死，它将在您尝试绑定到它时重新启动，因此就您的应用程序而言，您真的不应该看到差异。

# javascript - dojo版本升级问题

> ID：10626282
> 
> 赞同：0
> 
> 时间：2012-05-16T20:34:11.417
> 
> 标签：javascript, dojo

我们目前有 dojo 库版本 1.4.2。由于dojo 1.7 可用，我们想进行版本升级。

我只是用 1.7 版本的文件夹替换了库位置“my-js-files/dojo1.4.2/*”中的所有文件。

大多数根文件夹结构都是相同的（如 dijit、dojo 和 dojox 等）。

但是，我在浏览器（IE8）中一直面临以下错误：

> 'dojox.collections.Dictionary' 为空或不是对象

由于以下行：

```
var myGlobalVariables = new dojox.collections.Dictionary(); 
```

有人遇到过这个问题吗？这在 dojo 1.4.2 中工作得很好，没有任何抱怨。

我已经验证我确实有这样的文件：dojo_1.4.3_v1\dojox\collections\Dictionary.js

dojo 1.4 和 1.7 之间是否存在兼容性问题？任何指针都会有所帮助。

# javascript - Dojo 从非 AMD 项目过渡到 AMD

> ID：10626285
> 
> 赞同：1
> 
> 时间：2012-05-16T20:34:21.737
> 
> 标签：javascript, dojo, js-amd

将非 AMD Dojo 1.7 项目转换为 AMD 结构的最佳方式是什么？

有转换器吗？还是唯一的解决方案是开始为所有新类使用新结构并一一重构旧类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:27:24.867

我合作的团队正在进行 1.6 到 1.7 的迁移。

我不知道任何自动升级的方法。

当混合 AMD 和 1.6 声明时，可以从开发的角度逐步完成工作，但我们很难创建混合两种声明方法的发布版本。期望`async`模式也会暴露您的应用程序中的错误 - 特别是在您幸运地缺少依赖项和加载顺序的情况下。大量工作是替换已弃用的 API 调用。

我的 2 美分：

*   在开始之前针对 1.7 测试您的构建系统（[1.7 构建系统](http://dojotoolkit.org/reference-guide/1.7/build/buildSystem.html)）
*   仔细阅读[发行说明](http://dojotoolkit.org/reference-guide/1.7/releasenotes/1.7.html)
*   在撰写本文时，[livedocs](http://livedocs.dojotoolkit.org/)是除了源代码本身之外最有用的 API 参考
*   在开始之前有良好的[DOH单元测试覆盖率](http://dojotoolkit.org/reference-guide/1.7/util/doh.html)

# php - PHP 使用来自 file_get_contents 的 GD 调整图像大小

> ID：10626286
> 
> 赞同：1
> 
> 时间：2012-05-16T20:34:22.007
> 
> 标签：php, gd

我浏览了有关调整图像大小的各种教程，但没有一个完全符合我的需求。

我有以下代码：

`$raw = file_get_contents($image_url);`

然后这样做：

```
file_put_contents($folder.'test'.time().'.png', $raw); 
```

但我想做的是调整从 URL 中抓取的图像的大小，并为其提供 100 像素或其他的最大宽度。现在通常您可以通过 $_FILES 数组访问 GD 的数据并将其输出到浏览器，但我需要调整大小 + 保存到磁盘。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T20:39:18.670

您可以使用函数[imagecreatefromstring()](http://php.net/imagecreatefromstring)根据使用`file_get_contents()`.

```
$raw = file_get_contents($image_url);
$im  = imagecreatefromstring($raw);

// resize image with GD...

imagepng($im, $folder.'test'.time().'.png'); // save resized image to image.resized.png 
```

希望有帮助。

# multithreading - 终止后提升线程是否可中断？

> ID：10626289
> 
> 赞同：3
> 
> 时间：2012-05-16T20:34:29.077
> 
> 标签：multithreading, boost, join, interrupt

根据[如何可靠地判断 boost 线程是否已退出其运行方法？](https://stackoverflow.com/questions/1667420/how-can-i-tell-reliably-if-a-boost-thread-has-exited-its-run-method)，幸运的是，您可以加入已完成的线程并避免如果您必须仅在运行时有条件地加入线程时出现的竞争条件。

但是呢`thread::interrupt()`？线程退出后可以调用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:43:45.430

是的，调用这个方法是安全的。

从[文档](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/thread_management.html#thread.thread_management.thread.interrupt)中：

> **如果 *this 指的是一个正在执行的线程**，则请求该线程下一次进入启用中断的预定义中断点之一时将被中断，或者如果它当前在调用具有中断的预定义中断点之一时被阻塞启用。

当`boost::thread`对象 ( `*this`) 不是“执行线程”时，即没有运行，**调用此方法不会执行任何操作**。

# android - 图像以不同的比例呈现 - Android 中的 Phonegap

> ID：10626291
> 
> 赞同：3
> 
> 时间：2012-05-16T20:34:30.020
> 
> 标签：android, image, cordova

我正在使用 PhoneGap 开发一个 Android 应用程序，但我很快就发现了一个问题。每当我插入图像（背景或图像标签）时，它都会显示得比应有的大。

我最初认为这是我的模拟器问题，以不同的比例呈现我的应用程序，但事实并非如此！我截图了，我的视口宽度是 540，就像我在 AVD 中定义的那样。

正如您在下面的屏幕截图中看到的，在我的 HTML 中，我确实设置了一个图像标签，强制宽度为 69，高度为 70（我的源图像的实际尺寸）。但它总是渲染得更大！

标签“原始源图像”指向我从它的目录拖到屏幕截图的真实图像，只是为了证明它们非常不同。

[![问题截图](../Images/ef110b393b7e181269765f3f7d5c69b6.png)](https://i.stack.imgur.com/khhss.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:23:05.170

在一个 android 项目中，您可以在不同的文件夹中放置可绘制对象（图像）。这些称为 xdpi hdpi mdpi ldpi。我不知道 PhoneGap 是如何工作的，但你应该能够告诉 phonegap 将图像放在哪个文件夹中。这是在元标记中指定设备 dpi 的人，也许你可以试试这个：[http ://wiki.phonegap.com/w/page/32771298/Android%20High%20Pixel%20Density%20App](http://wiki.phonegap.com/w/page/32771298/Android%20High%20Pixel%20Density%20App)

元标记

```
<meta name="viewport" content="width=device-width; target-densityDpi=device-dpi; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=0" /> 
```

# javascript - 缩放后确定 HTML5 画布上的鼠标位置

> ID：10626292
> 
> 赞同：5
> 
> 时间：2012-05-16T20:34:30.420
> 
> 标签：javascript, html, canvas, drawing, dom-events

我正在开发一些涉及使用画布的 HTML5 软件。有一个画布，我需要能够在其中缩放并允许用户通过鼠标单击在画布上涂鸦。到目前为止，在我找到的一些示例的帮助下，我已经开始使用缩放功能。问题是缩放后，我的绘图工具上的鼠标位置不正常。在任何缩放之前，我可以画得很好。这是缩放的代码：

```
//Zoom
        mainCanvas.onmousewheel = function(event) {
            var mousex = event.clientX - mainCanvas.offsetLeft;
            var mousey = event.clientY - mainCanvas.offsetTop;
            var wheel = event.wheelDelta / 120;
            //n or -n

            var zoom = 0;
            if(wheel < 0) {
                zoom = 1 / 2;
                if(currentzoom == 1)
                    return;
            } else {
                mousex = event.clientX - mainCanvas.offsetLeft;
                mousey = event.clientY - mainCanvas.offsetTop;
                zoom = 2;
                if(currentzoom == 32)
                    return;
            }
            currentzoom *= zoom;
            mainContext.translate(originx, originy);

            mainContext.scale(zoom, zoom);
            mainContext.translate(-(mousex / scale + originx - mousex / (scale * zoom ) ), -(mousey / scale + originy - mousey / (scale * zoom ) ));
            originx = (mousex / scale + originx - mousex / (scale * zoom ) );
            originy = (mousey / scale + originy - mousey / (scale * zoom ) );
            scale *= zoom;
            draw(mainContext, gridArray);
        } 
```

就像我说的，缩放不是真正的问题，只是问题的根源。这是确定绘图工具的鼠标位置的代码：

```
//this function determines the mouse position relative to the canvas element
        function ev_canvas(ev) {
            if(ev.layerX || ev.layerX == 0) {//Firefox, IE
                ev._x = ev.layerX;
                ev._y = ev.layerY;
            } else if(ev.offsetX || ev.offsetX == 0) {//Opera
                ev._x = ev.offsetX;
                ev._y = ev.offsetY;
            }

            var func = tool[ev.type];
            if(func) {
                func(ev);
            }
        } 
```

我确定问题出在后面的代码块中，但我不确定是否要修复它。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:56:03.450

我怀疑这是一段代码，它依赖于一些全局变量，比如`currentzoom`

因此，如果我正确理解了这个问题，那么问题就在于您如何使用画布进行鼠标控制和缩放。我怀疑当您缩放时，DOM 将鼠标光标放置在最初渲染的图片上它所属的位置。因此，如果您放大 200% 并将鼠标放在画布中心左侧 100 像素处，画布将表现得好像鼠标位于中心左侧 200 像素处。

```
currentzoom = 1;
originX = 0;
originY = 0;

function ev_canvas(ev) {
        if(ev.layerX || ev.layerX == 0) {//Firefox, IE
            ev._x = ev.layerX * currentzoom / 1 - originX;
            ev._y = ev.layerY * currentzoom / 1 - originY;
        } else if(ev.offsetX || ev.offsetX == 0) {//Opera
            ev._x = ev.offsetX * currentzoom / 1 - originX;
            ev._y = ev.offsetY * currentzoom / 1 - originY;
        }

        var func = tool[ev.type];
        if(func) {
            func(ev);
        }
    } 
```

`/ 1`如果将来用户想要将非“1”值设置为 ，则会保留`currentzoom`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:22:41.570

我有一个更好的脚本来获取画布上的鼠标位置：

```
function writeMessage(canvas, message) {
        var context = canvas.getContext('2d');
        context.clearRect(0, 0, canvas.width, canvas.height);
        context.font = '18pt Calibri';
        context.fillStyle = 'black';
        context.fillText(message, 10, 25);
      }
      function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect(), root = document.documentElement;

        // return relative mouse position
        var mouseX = evt.clientX - rect.top - root.scrollTop;
        var mouseY = evt.clientY - rect.left - root.scrollLeft;
        return {
          x: mouseX,
          y: mouseY
        };
      }

      window.onload = function() {
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');

        canvas.addEventListener('mousemove', function(evt) {
          var mousePos = getMousePos(canvas, evt);
          var message = "Mouse position: " + mousePos.x + "," + mousePos.y;
          writeMessage(canvas, message);
        }, false);
      }; 
```

试试看，有问题可以评论。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:13:30.187

对于 Joomla 站点，您可以使用 Mouse Over Zoom - 这是一个 Joomla 扩展程序，使您能够从您的 Joomla 网页查看更大版本的缩略图。现在您可以轻松浏览图片库：只需将鼠标光标移到缩略图上即可查看完整尺寸的图片，而无需加载新页面。在此处下载[http://joomlaboat.com/mouse-over-zoom](http://joomlaboat.com/mouse-over-zoom)

如果图片不适合窗​​口，则会自动调整大小。您可以自定义扩展，还有很多附加选项。为了加载透明图像，没有背景，只需使用 .png 图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:08:11.167

试试这个：

```
<!DOCTYPE HTML>
<html>
    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
        <style>
            body {
                margin: 0px;
                padding: 0px;
            }

            #wrapper {
                position: relative;
                border: 1px solid #9C9898;
                width: 578px;
                height: 200px;
            }

            #buttonWrapper {
                position: absolute;
                width: 30px;
                top: 2px;
                right: 2px;
            }

            input[type =
            "button"] {
                padding: 5px;
                width: 30px;
                margin: 0px 0px 2px 0px;
            }
        </style>
        <script>
            function draw(scale, translatePos){
                var canvas = document.getElementById("myCanvas");
                var context = canvas.getContext("2d");

                // clear canvas
                context.clearRect(0, 0, canvas.width, canvas.height);

                context.save();
                context.translate(translatePos.x, translatePos.y);
                context.scale(scale, scale);
                context.beginPath(); // begin custom shape
                context.moveTo(-119, -20);
                context.bezierCurveTo(-159, 0, -159, 50, -59, 50);
                context.bezierCurveTo(-39, 80, 31, 80, 51, 50);
                context.bezierCurveTo(131, 50, 131, 20, 101, 0);
                context.bezierCurveTo(141, -60, 81, -70, 51, -50);
                context.bezierCurveTo(31, -95, -39, -80, -39, -50);
                context.bezierCurveTo(-89, -95, -139, -80, -119, -20);
                context.closePath(); // complete custom shape
                var grd = context.createLinearGradient(-59, -100, 81, 100);
                grd.addColorStop(0, "#8ED6FF"); // light blue
                grd.addColorStop(1, "#004CB3"); // dark blue
                context.fillStyle = grd;
                context.fill();

                context.lineWidth = 5;
                context.strokeStyle = "#0000ff";
                context.stroke();
                context.restore();
            }

            window.onload = function(){
                var canvas = document.getElementById("myCanvas");

                var translatePos = {
                    x: canvas.width / 2,
                    y: canvas.height / 2
                };

                var scale = 1.0;
                var scaleMultiplier = 0.8;
                var startDragOffset = {};
                var mouseDown = false;

                // add button event listeners
                document.getElementById("plus").addEventListener("click", function(){
                    scale /= scaleMultiplier;
                    draw(scale, translatePos);
                }, false);

                document.getElementById("minus").addEventListener("click", function(){
                    scale *= scaleMultiplier;
                    draw(scale, translatePos);
                }, false);

                // add event listeners to handle screen drag
                canvas.addEventListener("mousedown", function(evt){
                    mouseDown = true;
                    startDragOffset.x = evt.clientX - translatePos.x;
                    startDragOffset.y = evt.clientY - translatePos.y;
                });

                canvas.addEventListener("mouseup", function(evt){
                    mouseDown = false;
                });

                canvas.addEventListener("mouseover", function(evt){
                    mouseDown = false;
                });

                canvas.addEventListener("mouseout", function(evt){
                    mouseDown = false;
                });

                canvas.addEventListener("mousemove", function(evt){
                    if (mouseDown) {
                        translatePos.x = evt.clientX - startDragOffset.x;
                        translatePos.y = evt.clientY - startDragOffset.y;
                        draw(scale, translatePos);
                    }
                });

                draw(scale, translatePos);
            };

            jQuery(document).ready(function(){
               $("#wrapper").mouseover(function(e){
                  $('#status').html(e.pageX +', '+ e.pageY);
               }); 
            })  
        </script>
    </head>
    <body onmousedown="return false;">
        <div id="wrapper">
            <canvas id="myCanvas" width="578" height="200">
            </canvas>
            <div id="buttonWrapper">
                <input type="button" id="plus" value="+"><input type="button" id="minus" value="-">
            </div>
        </div>
        <h2 id="status">
        0, 0
        </h2>
    </body>
</html> 
```

非常适合我使用鼠标移动轨迹.. Njoy !!!

# regex - 浏览器对 HTML5 输入 type=url 使用什么正则表达式？

> ID：10626293
> 
> 赞同：6
> 
> 时间：2012-05-16T20:34:35.110
> 
> 标签：regex, html, validation, url, input

我正在研究 HTML5 输入模式 polyfill，并且我正在尝试验证 JavaScript 中的输入 type=url 与浏览器 (Chrome) 完全相同，但找不到关于 JavaScript 或 PERL 兼容正则表达式的任何文档。由于它是一个 polyfill，我并不特别介意它是否完全匹配所有 URL（这是不可能的），而是它模仿浏览器的工作方式。

有人会知道 PERL 语法中的相同模式吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:35:27.550

在 GitHub 上搜索了几个 HTML5 shiv 以查看是否有人遇到过理想的表达方式后，我相信我找到了一些非常接近但并不完美匹配的东西。

Alexander Farkas ( [https://github.com/aFarkas/webshim/blob/master/src/shims/form-shim-extend.js#L285](https://github.com/aFarkas/webshim/blob/master/src/shims/form-shim-extend.js#L285) ) 使用此模式来测试 URL：

```
/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i; 
```

此外，对于通过 Google 偶然发现此问题的任何人，如果您不需要该模式，而只是想通过 JavaScript（可能是 onChange）检查某些内容是否有效，则可以使用 formelement.checkValidity() 方法。显然，这对 polyfill 没有帮助（假定不支持原生 HTML5 验证），但它仍然很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T23:35:50.757

阅读[http://www.w3.org/TR/html5/forms.html#url-state-(type=url)](http://www.w3.org/TR/html5/forms.html#url-state-(type=url))上的相关规范：

您的 polyfill 应该从清理输入开始，即删除换行符和修剪字符串。句子“*用户代理不得允许用户插入“LF”（U+000A）或“CR”（U+000D）字符*”也可能很有趣。

结果应该是[有效](http://www.w3.org/TR/html5/infrastructure.html#valid-url)的[绝对](http://www.w3.org/TR/url/#concept-absolute-url)URL。那里引用的 RFC [3986](https://www.rfc-editor.org/rfc/rfc3986)和[3987](https://www.rfc-editor.org/rfc/rfc3987)将描述 URL 验证，关于[解析 URL](http://www.w3.org/TR/url/#url-parsing)的部分可能也很有趣。

您的 polyfill 不仅可以验证 URI，还可以[解析相对 URI](http://www.w3.org/TR/html5/infrastructure.html#resolving-urls)。至少，使用算法验证 URI 会简单得多，而不是找到合适的正则表达式。然而，即使 RFC在[附录 B中也提到了用于解析](https://www.rfc-editor.org/rfc/rfc3986#appendix-B)*已经验证*的URI的正则表达式。

# drupal - 显示带有空描述的术语

> ID：10626299
> 
> 赞同：0
> 
> 时间：2012-05-16T20:35:00.030
> 
> 标签：drupal, drupal-views

我正在尝试显示具有空白描述的单个词汇表中的术语列表。我正在使用视图，并且尝试将一些正则表达式设置为过滤器。一个简单的： [\w] 返回所有非空白的。但是，当我尝试执行 ((?!. *[\w]).)*之类的应该否定字符串的操作时，我会收到一些 sql 错误。我尝试过滤不包含某些单词（即任何单词），并尝试“短于”1，但似乎真正空的描述字段不会出现在其中任何一个上。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:20:47.983

^[a-zA-Z0-9_]{1,}$ - 至少包含一个字母、数字或 _ 的任何单词（非空字符串）

^[\s]*$ - 真正的空字符串

为我工作。

# ios - 无法在 UITableView 中定义原型单元格

> ID：10626308
> 
> 赞同：7
> 
> 时间：2012-05-16T20:35:52.697
> 
> 标签：ios, xcode, uitableview, ios5

我正在使用 Xcode 中的 tableview。当我尝试设置内容类型设置和原型单元格数量设置时，它们不存在。设置页面应该是这样的：

![设置页面应该是这样的：](../Images/3314efab65f8dab3e730a402a808bf97.png)

但它看起来像：

![在此处输入图像描述](../Images/ed30db08fd9e22eef488bf51149e3452.png)

如您所见，没有内容设置。为什么不？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T21:06:15.060

您正在尝试通过 xib 文件对其进行编辑，该文件没有与情节提要文件相同的选项。

# android - 访问 LocalHost 上的 WebService

> ID：10626314
> 
> 赞同：0
> 
> 时间：2012-05-16T20:36:29.777
> 
> 标签：android, .net, web-services, web

有谁知道如何在本地主机上设置任何类型的 Web 服务并从 android 访问它？任何好的教程。首选 .NET Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:46:46.477

根据环境，似乎将您的开发机器添加到 Wifi 网络的本地 DNS 服务，打开正确的端口，并让 Android 设备连接到该 WiFi 网络，在那里它通过 DHCP 获取 DNS 服务器地址，因此可以解析您的机器地址是使用模拟器/调试器工具链之外的最佳通用本地解决方案模式。

使用 Windows Azure 服务总线中继怎么样？这使您可以将开发盒中的公共 Web 服务公开到公共 Internet，Android 设备甚至可以通过 3G 与其通信。

[这是所有基础知识，](http://msdn.microsoft.com/en-us/library/windowsazure/ee706736)包括如何注册和创建命名空间以及[如何公开 HTTP 服务](http://msdn.microsoft.com/en-us/library/windowsazure/ee706772.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:10:00.597

我在这里列出了帮助我更好地理解如何创建和使用 WS 的站点列表：

[链接1](http://www.itcsolutions.eu/2011/03/03/how-to-consume-web-services-from-android-applications-using-ksoap2/)

[链接2](http://www.youtube.com/watch?v=v9EowBVgwSo)

[链接3](http://jatin4rise.wordpress.com/2010/10/03/webservicecallfromandroid/)

[链接4](https://stackoverflow.com/questions/10598734/webservice-soap-in-android)

我希望这些对你有帮助...

# asp.net - 如何让用户关闭基于Web的CrystalReportViewer参数提示？

> ID：10626316
> 
> 赞同：0
> 
> 时间：2012-05-16T20:36:30.200
> 
> 标签：asp.net, crystal-reports, web

我有一个使用 CrystalReportViewer 设置的 ASP.NET 站点。当用户打开报表时，会出现参数提示。如果他们在报告中遇到问题，则参数提示中没有关闭选项，并且似乎逃脱的唯一方法是使用浏览器的后退按钮退出。

这对我们不起作用，因为出于其他原因，已指示该站点上的用户不要使用后退按钮（此指令超出我的控制范围。）由于参数提示阻止了页面上的任何其他链接，用户不能点击退出。如何打开提示的关闭按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-28T05:15:21.200

如果有人仍然需要解决方案，这是我之前在 SAP 论坛上写的另一个更简单的解决方案，并且不会向页面中注入任何内容。关闭按钮实际上已经存在，他们只是隐藏了它。

[http://scn.sap.com/message/14895166#14895166](http://scn.sap.com/message/14895166#14895166)

> 从你的 $(document).ready 调用这个函数。它会每 1/3 秒自动触发一次，直到参数框的关闭按钮设置为可见。在那之后，它将停止运行。我通过使用 Chrome 的“检查对象”功能找到了这个 div 及其类。
> 
> 祝你好运。

```
window.$my = {    
     dlgCloseBtn: $('div.dlgCloseBtn')    
};

$(document).ready(function() {    
     enableDlgCloseBtn();    
});

/*
** Loops every third of a second until the parameter box's Close button can be made visible.
*/
function enableDlgCloseBtn() {
     if ($my.dlgCloseBtn.css('visibility') === undefined) {
          $my.dlgCloseBtn = $('div.dlgCloseBtn');

     } else if ($my.dlgCloseBtn.css('visibility') !== 'visible') {
          $my.dlgCloseBtn.css('visibility', 'visible');
          return;
     }

     window.setTimeout(enableDlgCloseBtn, 333);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T22:21:22.917

好的，按设计，此功能似乎不存在于适用于 Web 的 Crystal Report Viewer 中。为了解决这个问题，我为我的页面编写了一些 Javascript，在参数提示中注入了一个自制的“退出”按钮：

```
// Forces an exit button into the parameter prompt
function addExitButton() {
    // "ReportViewer" is the name of my CRV, replace with yours
    // Also, you will probably need to adjust the path to the button image URLs
    var okButton = document.getElementById('ReportViewer_submitButton');
    if (okButton != null) {
        var exitLink = '<<URL you want the Exit button to link to here>>';
        var row = okButton.parentNode.parentNode.parentNode;
        if (row != null) {
            var spacer = document.createElement("td");
            spacer.innerHTML = '&nbsp;';
            row.appendChild(spacer);
            var startCell = document.createElement("td");
            startCell.innerHTML = '<img src="../crystalreportviewers13/prompting/images/button_left_normal.gif" />';
            row.appendChild(startCell);
            var cell = document.createElement("td");
            cell.setAttribute("class", "pePromptButton");
            cell.setAttribute("background", "../crystalreportviewers13/prompting/images/button_middle_normal.gif");
            cell.innerHTML = '<div class="pePromptButton"><a href="' + exitLink + '" title="Exit">&nbsp;&nbsp;&nbsp;Exit&nbsp;&nbsp;&nbsp;</a></div>';
            row.appendChild(cell);
            var endCell = document.createElement("td");
            endCell.innerHTML = '<img src="../crystalreportviewers13/prompting/images/button_right_normal.gif" />';
            row.appendChild(endCell);
        }
    }
    else
        setTimeout(addExitButton, 10);
}
addExitButton(); 
```

这已经过测试，似乎工作正常。

# actionscript-3 - QNXApplicationEvent.SWIPE_DOWN 在 AS3 项目中根本没有触发

> ID：10626319
> 
> 赞同：0
> 
> 时间：2012-05-16T20:36:58.250
> 
> 标签：actionscript-3, air, blackberry-playbook, playbook

我已经阅读了一些关于尝试使用 Blackberry AIR SDK 实现 QNXApplicationEvent.SWIPE_DOWN 侦听器以部署在 Playbook 上的博客文章和论坛条目，但不知何故对我来说没有任何作用。

我试过信号：

```
_swipedDown = newNativeSignal(QNXApplication.qnxApplication, QNXApplicationEvent.SWIPE_DOWN, QNXApplicationEvent);
_swipedDown.add(onSwipedDown); 
```

我尝试过使用常规事件处理程序：

```
QNXApplication.qnxApplication.addEventListener(QNXApplicationEvent.SWIPE_DOWN, onSwipedDown); 
```

但是处理程序从不追踪任何东西：

```
private function onSwipedDown(_:QNXApplicationEvent):void
{
    trace("\n", this, "--- onSwipedDown ---");
} 
```

保存此代码的类扩展了一个 Sprite。有什么我应该知道的吗？

我还在黑莓论坛上发布了我的问题：http: [//supportforums.blackberry.com/t5/Adobe-AIR-Development/QNXApplicationEvent-SWIPE-DOWN-not-firing-at-all-in-an-AS3/td- p/1719625](http://supportforums.blackberry.com/t5/Adobe-AIR-Development/QNXApplicationEvent-SWIPE-DOWN-not-firing-at-all-in-an-AS3/td-p/1719625)

# c - 将分数映射到整数的高效算法

> ID：10626320
> 
> 赞同：0
> 
> 时间：2012-05-16T20:37:01.573
> 
> 标签：c, performance, algorithm

我有一个`float`, `f`，在 1 到 0 的范围内，我想映射到一个`int`, `i`。`f`与以下有关`i`：

```
f = 1/(2^i) 
```

所以

```
i = log2(1/f) 
```

我使用以下计算`i`：

```
int i = log2f(floorf(1/f)); 
```

这个表达式涉及 3 个浮点运算，所以我认为它的效率相对较低。

我的问题：

1.  一般来说，这是低效的吗？（我明白由于平台相关的优化，这很难回答）
2.  是否可以创建更有效的算法？鉴于这涉及到我猜想可以使用s 和位移`2^n`来创建更有效的算法。`int`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:48:09.763

假设`f`是正的，`log2(1/f)`相当于`-log2(f)`，这应该让你简化一点：

```
int i=floorf(-log2f(f)); 
```

用否定代替除法可能有助于加快速度。

如果您不介意一些完全不可移植的代码，您应该能够直接提取浮点数的指数部分。不过，一个好的实现`log2f`可能已经这样做了，所以你可能会放弃可移植性而几乎没有回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:49:35.103

您应该了解 float 是如何存储的。在使用 4 个字节存储浮点数的典型机器中，最后 1 个字节用于存储二进制指数。如果你可以访问那部分内存，那么你就差不多完成了。

例如。在 C 中，您可以声明一个联合结构来存储 1 个浮点数或 4 个短无符号整数（1 个字节/短整数）。您所要做的就是分配浮点数并提取存储指数的短整数）。

此答案中提到的实际值在您的机器上可能不正确，但如果您知道正确的数字，则可以使用此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:44:23.700

好吧，让我们假设您的浮点数遵循 IEEE754 标准，并且这些值是正确计算的。（可以将您的值正确表示为`float`，因为`f`始终是 2 的幂。）

查看 IEEE754 标准，您的数字`f`将始终*具有尾数 1.0，因此您真正需要的是提取指数。这可以通过使用 的二进制表示来完成`float`：数字本身是 32 位的，指数 us 位于 24-31 位（从右到左计数）。您需要从该值中减去 127。

例如，请参阅此[在线转换器](http://www.h-schmidt.net/FloatConverter/IEEE754.html)和任何有关 IEEE754 标准的文档以了解更多详细信息。

* * *

*好吧，除了非规范化的情况。非规范化浮点数是一种存储方式不是 like`1*2^-2`而是 like `0.5*2^-1`。为了处理非规范化的浮点数，我建议通过添加 0.0 将它们转换为规范化的浮点数。您可以通过尾数不是 1 在您的情况下轻松检测非规范化浮点数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T20:47:06.303

让我们看看我是否明白这一点。对于 f=0.5，1/f = 2，因此您希望 i 为 1。对于任何大于 0.5 的 f，1/f 将小于 2，因此 i 将为 0，对吗？

```
For 0.5<f<=1     i=0
For 0.25<f<0.5   i=1
For 0.125<f<0.25 i=2
and so on. 
```

所以 i 基本上是尾数前 1 位的从零开始的索引（考虑到指数，应该添加它）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T14:34:17.630

C 有一个用于此目的的函数：frexpf（1999 C 标准第 7.12.6.4 节）。它归一化，因此指数匹配 [1/2, 1) 中的分数，因此您需要从其指数中减去 1（例如，对于 .25f，它给出的指数为 -1，因为 .25f = .5 * 2 ^(-1)，但你想要 -2)：

```
#include <math.h>
#include <stdio.h>

int main(void)
{
    int exponent;
    for (float f = 0x1p-149f; f <= 1; f += f)
    {
        frexpf(f, &exponent);
        printf("The exponent of %a is %d.\n", f, exponent-1);
    }

    return 0;
} 
```

# c# - 正则表达式：html 的多行问题

> ID：10626324
> 
> 赞同：0
> 
> 时间：2012-05-16T20:37:11.557
> 
> 标签：c#, .net, regex

我正在玩 C# 中的网站和正则表达式。我有这种情况：

```
 <a href="path/to/image">
    <img src="thumbnail"></a> 
```

该大纲是我的应用程序如何获取给定网站的内容。每行的制表符和特征线都不相同。

我使用 gskinner 检查正则表达式 (http://gskinner.com/RegExr/)，并创建了这个正则表达式：

```
 (?i)<a([^>]+)>\W.*</a> 
```

标志：多行

Gskinner 表明该模式是正确的。但是当我输入 c# (regEx.Matches(...)) 时，它再也找不到匹配项了。

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:15:38.567

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)和您的示例字符串

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html); 
```

-

```
var href = doc.DocumentNode
    .Descendants("a")
    .Select(n => n.Attributes["href"].Value)
    .FirstOrDefault();

var src = doc.DocumentNode
    .Descendants("img")
    .Select(n => n.Attributes["src"].Value)
    .FirstOrDefault(); 
```

# wpf - XAML 动画移动倒计时

> ID：10626328
> 
> 赞同：0
> 
> 时间：2012-05-16T20:37:22.227
> 
> 标签：wpf, xaml, animation, triggers

我有以下 TextBlock ，它将是一个移动的倒数计时器：

```
 <TextBlock x:Name="countdown">
      <TextBlock.RenderTransform>
          <TranslateTransform x:Name="countdownTransform" />
      </TextBlock.RenderTransform>
 </TextBlock> 
```

以下触发器应移动 TextBlock 并设置倒计时文本：

```
<Grid.Triggers>
    <EventTrigger SourceName="PlayButton" RoutedEvent="Button.Click">
         <BeginStoryboard>
               <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="songProgressBar" 
                                     Storyboard.TargetProperty="Value"
                                     From="0:30:0" To="0" Duration="0:30:0" />
                    <DoubleAnimation Storyboard.TargetName="countdownTransform" 
                                     Storyboard.TargetProperty="X" AutoReverse="True" 
                                     From="0.0" To="{Binding ElementName=countdown, Path=Width}" Duration="0:30:0" />
               </Storyboard>
          </BeginStoryboard>
    </EventTrigger>
</Grid.Triggers> 
```

但是，DoubleAnimation 的 From 属性不接受（显然）TimeSpan 并且对于第二个触发器，To 属性没有绑定到 TextBlock 的 Width。是否有自定义类型的动画在 To 属性中接受 TimeSpan？

我希望能够在 XAML 中做到这一点，我知道这在 c# 代码中是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T07:22:24.113

`Width`TextBlock 的除非`NaN`您明确设置，否则它不是DoubleAnimation 属性的`NaN`有效值。`To`您应该已经在 VS 输出窗口中看到了错误消息：

> System.Windows.Data 错误：5：BindingExpression 生成的值对目标属性无效。；值='NaN' 绑定表达式：路径=宽度；DataItem='TextBlock' (Name='countdown'); 目标元素是'DoubleAnimation'（HashCode=62632450）；目标属性是'To'（类型'Nullable`1'）

您可以改为绑定到`ActualWidth`：

```
<DoubleAnimation ... To="{Binding ElementName=countdown, Path=ActualWidth}" /> 
```

对于另一个动画：如果持续时间是一个常数值，为什么不简单地设置`From="30"`？否则，您还必须有一个 ProgressBar，它需要一个 TimeSpan `Value`，`Minimum`等等`Maximum`。

# javascript - 在Javascript中使用正则表达式形成一个没有前导零的数字

> ID：10626332
> 
> 赞同：5
> 
> 时间：2012-05-16T20:37:41.523
> 
> 标签：javascript, regex, qunit

我无法形成一个可以从表示为字符串的数字中去除前导零的正则表达式。抱歉，parseFloat 不是我想要的，因为我将处理小数点后 30 位以上的数字。

我当前的正则表达式是

```
/(?!-)?(0+)/; 
```

这是我的测试用例。 [http://jsfiddle.net/j9mxd/1/](http://jsfiddle.net/j9mxd/1/)

```
$(function() {
    var r = function(val){
        var re = /(?!-)?(0+)/;
        return val.toString().replace( re, '');
    };
    test("positive", function() {
        equal( r("000.01"), "0.01" );
        equal( r("00.1"), "0.1" );
        equal( r("010.01"), "10.01" );
        equal( r("0010"), "10" );
        equal( r("0010.0"), "10.0" );
        equal( r("10010.0"), "10010.0" );
    });
    test("negative", function() {
        equal( r("-000.01"), "-0.01" );
        equal( r("-00.1"), "-0.1" );
        equal( r("-010.01"), "-10.01" );
        equal( r("-0010"), "-10" );
        equal( r("-0010.0"), "-10.0" );
        equal( r("-10010.0"), "-10010.0" );        
    });
}); 
```

为什么我的测试用例没有通过？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:48:38.987

这完成了你所有的案例

```
var re = /^(-)?0+(?=\d)/;
return val.toString().replace( re, '$1'); 
```

`^`匹配字符串的开头。

`(-)?`匹配一个可选的`-`，这将被重新插入到替换字符串中。

`(0+)(?=\d)`匹配一系列 0 和后面的数字。这`(?=\d)`是一个[前瞻断言](http://www.regular-expressions.info/lookaround.html)，它不匹配但确保一个数字跟在前导零之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:54:50.853

这通过了您的测试，并且相对容易阅读：

```
var r = function(val){
    var re = /^(-?)(0+)(0\.|[1-9])/;
    return val.toString().replace( re, '$1$3');
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:45:19.460

您可以使用以下内容：

```
var r = function(val) {
    var re = /(-)?0*(\d.*)/;
    var matches = val.toString().match(re);
    return (matches[1] || '') + matches[2];
}; 
```

# android - Android 上的数据保护

> ID：10626333
> 
> 赞同：0
> 
> 时间：2012-05-16T20:37:43.447
> 
> 标签：android, encryption, protection, copy-protection, data-protection

我需要保护我的 Android 应用程序上的一些数据。在 iOS 上，我可以启用数据保护并使用加密来保存我的文件。Android有类似的东西吗？

我的应用程序需要读取一些图像和 xml 并将其写入外部 SD。这些图像必须是安全的。用户应该不能从文件浏览器查看这些文件或复制它们。这些文件应该只能由我的应用程序访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T20:55:45.970

外部存储，例如，Android 设备上的 SD 卡具有“全球读取”权限。换句话说，任何应用程序都可以访问任何目录和任何文件。

如果你想加密你自己的文件和目录，你可以这样做。但是，要解密并使用它们，您显然需要在应用程序的 APK 中嵌入解密密钥。

显然，如果有人对您的应用程序进行逆向工程，那么他们就有您的密钥。

决定权在你。SD 卡上没有文件系统安全性，甚至将数据存储到内部存储器（仅对您自己的应用程序可用）也不安全，因为有根设备可以访问内部存储器的所有区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:54:24.963

每当您向 SDCard 写入数据时，用户都可以看到他们在那里。您可以对它们进行加密，并希望没有人足够关心来破解它，但您要抓住机会。此外，你不能指望你放在 SDCard 上的任何东西都可以保留，因为用户可以从那里删除他们想要的任何东西。您也可以选择使用内部存储，但如果您要保存大量数据，这会使您的用户生气，因为这是有限的。除非他们根植设备，否则用户更难访问，但它就像 SDCard 一样简单。

# c# - 如何确保我的密码安全？

> ID：10626335
> 
> 赞同：1
> 
> 时间：2012-05-16T20:37:44.970
> 
> 标签：c#, networking, communication

我现在有一个（客户端/服务器通信）设置，如下所示：

1) 客户向用户询问用户名并通过

2）客户端使用端口 80（通过网络）将其发送到服务器

3）服务器回应说这是否是正确的密码（正确密码/错误密码），如果正确，它将向客户端发送一个加密密钥。

4）客户端向服务器发送一系列命令（所有命令都以服务器给客户端的加密密钥开头）。

5）服务器检查加密密钥以识别客户端并响应命令

我的问题是：

这是保证事情安全的正确方法吗？我不确定来回发送单个加密密钥是否会有任何好处。让客户端生成加密密钥并让服务器验证它会更有帮助吗？

我想做的事情就像 facebook 所做的那样来验证它的应用程序。例如，我可以想象 facebook 做了一些事情来阻止我通过像 wireshark 或 tcp 分析器这样的程序窃取原始密码。

如果这很重要，我的程序是用 c# 编写的，并使用标准 http 来发送/接收数据。

谢谢，

罗希特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:51:25.150

为了使您所做的大部分事情保持不变，您只需将步骤更改为

1.  客户向用户询问用户名并通过

2.  客户端与服务器建立 SSL 连接。

3.  客户端通过 SSL 连接发送用户名和密码。

4.  服务器响应说这是否是正确的密码（正确密码/错误密码）。

5.  客户端向服务器发送一系列命令（所有命令都通过用于发送密码的同一 SSL 连接发送）。

服务器不需要在每条消息中不断地重新验证用户的身份，只要您使用一个连续连接，SSL 层就会在幕后为您完成所有这些工作。

* * *

另一方面，Facebook 与您所描述的完全不同，他们使用[OAuth](http://oauth.net/)。这是 OAuth 工作原理的基本示例（来自 yahoo 的[开发人员页面](http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html)）

![在此处输入图像描述](../Images/ea88cd049dc09e918ff2886a7d8f1c58.png)

因此，您在编写时为每个应用程序执行第 1 步，每个用户完成第 2-4 步以将应用程序与其帐户相关联，然后您只需执行第 5 步，直到第 4 步中收到的令牌过期（可能在任何地方从几小时到几天，取决于站点）。令牌过期后，您只需重复第 4 步（如果失败，请执行第 2-4 步），用户就可以再次使用该程序。

第 3 步是他们输入密码信息的地方，但请注意，他们是在 Yahoo 的网站上输入密码，因此您的程序永远不会触及用户的用户名和密码（这是 OAuth 的全部要点！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T23:45:54.580

几个通用的指针：

正如其他人指出的那样，尽可能使用 SSL。

您*永远不*应该以明文形式存储密码。相反，存储原始密码的哈希并在比较之前重新哈希任何收到的密码。如果您不能使用 SSL，请让客户端在传输之前对密码进行哈希处理（使用 MD5 或类似方法）。

如果客户端是应用程序（不是浏览器中的页面）但您不能使用 SSL，那么客户端和服务器可以共享一个可用于加密传输的密钥。秘密当然不应该被发送，而是在例如 AES 加密中用作密钥。

在您的场景中，您可以使用例如由共享密钥、客户端 IP 地址和当前命令（或其子集）组成的字符串的散列，并将散列与命令一起传输，以便不断验证自己服务器。

但是，如果可能，请使用 SSL。

# jquery - Google Maps v3 - 在拖动时更新标记

> ID：10626340
> 
> 赞同：3
> 
> 时间：2012-05-16T20:38:07.610
> 
> 标签：jquery, google-maps, maps

当我拖动自己位置的标记时，它应该更新其他标记，因为我使用的是半径。因此，如果我拖动我的位置，它应该删除半径之外的标记并在半径内添加标记。它会这样做，但它会不断添加相同的标记大约 8 次，当然没有人想要这样。

```
google.maps.event.addListener(marker, 'drag', function() {
geocoder.geocode({'latLng': marker.getPosition()}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        if (results[0]) 
        {
            $('#address').val(results[0].formatted_address);
            ownlat = marker.getPosition().lat();
            ownlng = marker.getPosition().lng();
            clearOverlays(); //deletes old markers
            getevents(); //adds new markers  
        } 
    }   
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:32:28.597

API 文档指出，在拖动标记时会重复触发“拖动”事件。所以我认为它`getevents()`连续几次快速调用。

您应该改用“dragend”，其缺点是在地理编码器运行时可能会导致标记出现延迟。（如果这成为问题，请尝试将 getevents 留在地理编码器调用之外？）

# android - Android 3.0 和菜单

> ID：10626341
> 
> 赞同：0
> 
> 时间：2012-05-16T20:38:07.373
> 
> 标签：android, android-actionbar, android-menu, android-3.0-honeycomb

我知道对于 Android 3.0，菜单将成为操作栏。

但是，在我的程序中，显示的菜单基于设置的变量/程序正在执行的操作。IE 我希望用户请求菜单，并且显示的菜单基于“menuselect”的值。如果自动创建操作栏，用户将如何选择显示哪个菜单？

如何处理/显示这种菜单：

```
public boolean onCreateOptionsMenu(Menu menu) {

if (menuselect == 1)
{
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.menu, menu);
return true;
}

else {

MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.menu2, menu);
return true;

}

} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:53:02.827

操作栏不是动态的，它只在活动开始时创建一次，之后您无法更改它

# c# - 如何确定配置部分或元素是从 app.config 还是 machine.config 加载的？

> ID：10626345
> 
> 赞同：3
> 
> 时间：2012-05-16T20:38:38.173
> 
> 标签：c#, .net, c#-4.0, .net-4.0, config

我正在像这样从配置中加载绑定部分

```
var bingingsSection = BindingsSection.GetSection(ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None)); 
```

如何确定加载的配置元素是来自本地应用程序配置文件还是来自 machine.config？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:51:04.740

使用属性 bindingsSection.EvaluationContext.IsMachineLevel。

EvaluationContext.IsMachineLevel 也可用于 ConfigurationElements，以便您可以为每个配置值确定它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:31:22.080

我自己找到了正确的答案。

我需要检查`ElementInformation.Source`财产。

给定以下配置：

```
<?xml version="1.0"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding maxReceivedMessageSize="1000000"/>
            </netTcpBinding>
        </bindings>
    </system.serviceModel>
    <startup>
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
</configuration> 
```

以及以下应用程序

```
using System;
using System.Configuration;
using System.ServiceModel.Configuration;

namespace ConsoleApplication49
{
    class Program
    {
        static void Main(string[] args)
        {
            var config          = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
            var bingingsSection = BindingsSection.GetSection(config);

            string netTcpSource    = bingingsSection.NetTcpBinding.ElementInformation.Source;
            string basicHttpSource = bingingsSection.BasicHttpBinding.ElementInformation.Source;

            Console.WriteLine("Net TCP Binding came from \"{0}\"", netTcpSource);
            Console.WriteLine("Basic HTTP Binding came from \"{0}\"", basicHttpSource);
        }
    }
} 
```

产生输出：

```
Net TCP Binding came from "c:\users\Jim\documents\visual studio 2010\Projects\ConsoleApplication49\ConsoleApplication49\bin\Debug\ConsoleApplication49.exe.Config"
Basic HTTP Binding came from ""
Press any key to continue . . . 
```

因此，您可以看到在我的本地可执行文件的 app.config 中定义的元素显示了配置路径，但是，我引用的在我的本地可执行文件的 app.config 中未指定的元素返回了一个空白字符串。大概是因为它是默认值。

# vb.net - Response.Cookies 中不存在新 cookie

> ID：10626346
> 
> 赞同：1
> 
> 时间：2012-05-16T20:38:40.463
> 
> 标签：vb.net, cookies

我有以下在页面响应中创建 cookie 的方法。在我创建 cookie 之后，我立即检查了它的值是什么，它是空白的。这是正常行为吗？添加 cookie 后如何检查响应？

当我监控 HTTP 响应时，cookie 就在那里。当我使用 Firefox Web Developer Toolbar 查看 cookie 时，它​​就在那里。但是，它似乎不存在于 Response.Cookies 集合中。我如何访问它？

```
Dim c As New HttpCookie("prpg")
c.Expires = DateTime.Now.AddYears(10)
c.Value = value
_page.Response.Cookies.Add(c)

_page.Response.Cookies("prpg").Value    'String.Empty 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:19:20.730

您只能写入 Response 而不能从中读取。所以我想也无法读取cookie。

# performance - 快速碰撞检测

> ID：10626351
> 
> 赞同：0
> 
> 时间：2012-05-16T20:38:56.317
> 
> 标签：performance, collision-detection

我目前正在编写一个安卓游戏，并且正在处理快速碰撞检测。我想出了一个解决方案，但我想知道最喜欢的方法。

我的解决方案：如果我们有一个每帧移动 30 个单位的游戏对象，我们可能会直接穿过另一个游戏对象。因此，当我更新时，我将游戏对象迭代 1 个单位并运行碰撞检测，直到达到我想要的速度，然后进行渲染。

这是一个游戏对象，用于检查玩家的激光或玩家本身是否与它发生碰撞。

```
public void update(PlayerDroid[] holderPlayerDroid) {
            // Update the location
            //y = y + velocity;
            //stupidBadDroidPositionShape.setLocation(this.x, this.y);

            // Updates regarding interactions with the enemy out of the StupidBadDroids perspective, which is the PlayeDroid
            for(int numberOfPlayerDroid = 0; numberOfPlayerDroid < holderPlayerDroid.length; numberOfPlayerDroid++) {
                // Check if the StupidBadDroid got hit
                for(int iterations = 0; iterations < velocity; iterations++) {
                    y = y + 1;
                    stupidBadDroidPositionShape.setLocation(this.x, this.y);
                    // Check if StupidBadDroid collides with the enemy (which is the player)
                    if(Physics.shapeInShape(holderPlayerDroid[numberOfPlayerDroid].getPlayerPositionShape(), getPlayerPositionShape())) {
                        isDead = true;
                    }
                    for(int i = 0; i < holderPlayerDroid[numberOfPlayerDroid].amountOfVisibleLasers; i++) {
                        if(holderPlayerDroid[numberOfPlayerDroid].holderLaser[i].isDisposed() == false) {
                            if(Physics.shapeInShape(holderPlayerDroid[numberOfPlayerDroid].holderLaser[i].getLaserPositionShape(), getPlayerPositionShape())) {
                                isDead = true;
                                holderPlayerDroid[numberOfPlayerDroid].holderLaser[i].dispose();
                            }
                        }

                    }
                }

            }

    } 
```

这种方式对 CPU 要求很高。你相信我可以应用更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T12:54:51.003

您正在描述隧道，并正在尝试进行连续的碰撞检测。您的方法是 CPU 密集型的，因为您正试图暴力破解解决方案。

您想要的保真度越高，解决方案的技术含量就越高。如果您不需要太多保真度，您可以假设对象在每一帧中的路径是线性的，并“扩展”您的命中框以覆盖对象在帧期间移动的整个距离。因此，例如，您可以简单地将这些点扩展为一条线段，然后查看它们是否相交，而不是一次将每个点移动一个离散距离。但是，您的 hitboxes 不会是点，因此只需按路径长度“拉伸”它们。这是一个非常低保真度的解决方案 - 如果同一对象发生多次碰撞，您不会总是选择“首先”发生的碰撞。

对于非常复杂的解决方案，请尝试 -

[http://www.bulletphysics.org/mediawiki-1.5.8/index.php/Collision_Detection_and_Physics_FAQ](http://www.bulletphysics.org/mediawiki-1.5.8/index.php/Collision_Detection_and_Physics_FAQ)

# asp.net-mvc - 使用实体框架链接 MVC 3 项目中的两个表？

> ID：10626356
> 
> 赞同：0
> 
> 时间：2012-05-16T20:39:35.913
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4, model

（运行 EntityFramework 4.1）我有一个 ASP .NET MVC 3 项目，该项目有一个带有两个数据库表的数据库。

表达数据库表的模型：

```
public class MyDetails
{
    public int DetailsID {get;set;}
    public string Description {get;set;}
    public int 
    public CarID {get;set;}
    public virtual Cars Cars {get;set;}

    public PreviousCarID {get;set;}

}

public class Cars
{
    public int CarsID {get;set;}
    public string CarsName {get;set;}

} 
```

实体框架将很好地关联 MyDetails.CarsID 和 Cars.CarsID，以便我可以提取 CarsName。问题是我不确定如何将 PreviousCarID 与 Cars 表相关联。

我尝试过的（导致实体框架错误）：

```
public PreviousCarID{get;set;}
[ForeignKey("PreviousCarID")]
public virtual Cars Cars2 {get;set;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:07:11.530

我会将 Cars 重命名为 Car，并将 CarsID 更改为 CarID。然后在您的 DbContext 中将 DbSet 保留为 Car 类型，但命名为 Cars。

其次，解决您的具体问题（使用我上面的建议）

```
public class MyDetails 
{ 
    public int DetailsID {get;set;} 
    public string Description {get;set;} 
    public int CarID {get;set;} 
    public int PreviousCarID {get;set;}

    public virtual Car Car {get;set;} 
    public virtual Car PreviousCar {get;set;} 
} 

public class Car 
{ 
    public int CarID {get;set;} 
    public string CarName {get;set;} 
} 
```

您不会说您使用的是代码优先、模型优先还是数据库优先。我将假设数据库优先。如果是这种情况，那么您需要确保 CarID 和 PreviousCarID 都是 Car 表的外键。

# java - FEST 点击时摆动新框架，无法制作新框架夹具

> ID：10626357
> 
> 赞同：2
> 
> 时间：2012-05-16T20:39:38.207
> 
> 标签：java, swing, fest

我正在尝试编写 Fest Swing 测试，但无法制作/找到框架夹具。我有两个 JFrame，一个在点击时打开另一个，我想：

1.) 找到打开的新 JFrame 的框架夹具

2.）从创建的新 JFrame 对象中制作一个新的框架夹具（我可以从原始 JFrame 对象中获取对象。）

我试过使用

```
 GenericTypeMatcher<secondGUI> matcher = new GenericTypeMatcher<secondGUI>(secondGUI.class) {
        protected boolean isMatching(secondGUI frame) {
            System.out.println("0".equals(frame.getTitle()) && frame.isShowing());
            return "0".equals(frame.getTitle()) && frame.isShowing();
        }
    };
    Robot robot = BasicRobot.robotWithCurrentAwtHierarchy(); 
```

找到框架，但遇到 EdtViolationException。

我也试过

```
 secondGUI secGUI = GuiActionRunner.execute(new GuiQuery<secondGUI>() {
        @Override
        protected secondGUI executeInEDT() throws Throwable {
            return firstGUI.getController().getWindows().get("0");
        }
    });
    FrameFixture secondWindow = new FrameFixture(secGUI); 
```

但最后一行也给出了 EdtViolationException。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:48:52.453

尝试使用框架的标题找到你的框架：

```
Robot robot = BasicRobot.robotWithCurrentAwtHierarchy();
FrameFixture frame = WindowFinder.findFrame("Title of my frame").using(robot); 
```

另外，`secondGUI`应该是`SecondGUI`因为它是一个类名。

顺便说一句，很高兴看到另一个 FEST 用户。

# javascript - 为什么我的 javascript 可以在测试环境中运行，但不能在实时站点上运行？

> ID：10626359
> 
> 赞同：-3
> 
> 时间：2012-05-16T20:39:42.630
> 
> 标签：javascript, jquery

这是网址：

[http://scottpandel.com/](http://scottpandel.com/)

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:40:50.657

我在很多您对脚本的 http 请求中都收到了 404。

*   [http://scottpandel.com/js/libs/modernizr-2.5.3.min.js](http://scottpandel.com/js/libs/modernizr-2.5.3.min.js)
*   [http://scottpandel.com/js/plugins.js](http://scottpandel.com/js/plugins.js)
*   [http://scottpandel.com/js/script.js](http://scottpandel.com/js/script.js)
*   [http://scottpandel.com/js/jquery.js](http://scottpandel.com/js/jquery.js)

确保路径正确且源存在。

# mysql - 日期列的 MySQL 条件 ORDER BY ASC/DESC

> ID：10626363
> 
> 赞同：9
> 
> 时间：2012-05-16T20:39:48.437
> 
> 标签：mysql, sql, sql-order-by

我需要一个日期时间字段的 MySQL 条件 ORDER BY 语句。我有一张桌子，上面有我想按以下方式订购的帖子：所有**未来的帖子**都应该按**ASC**排序，所有**历史帖子都应该按****DESC**排序。例如。：

```
post_status     post_date     post_title
===========     =========     ==========
future          2012-10-01    Title 1
future          2012-12-01    Title 2
publish         2012-05-01    Title 3
publish         2012-01-01    Title 4 
```

我需要类似于以下 SQL 的东西...

```
SELECT post_status, post_date, post_title FROM wp_posts
WHERE post_status IN ('future', 'publish')
ORDER BY post_status ASC,
 CASE post_status 
  WHEN 'future' THEN 'post_date ASC'
  ELSE 'post_date DESC'
 END; 
```

关于如何做到这一点的任何提示？谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-16T20:47:27.397

试试这个：

```
ORDER BY post_status ASC,
CASE post_status WHEN 'future' THEN POST_DATE END ASC,
CASE WHEN post_status <> 'future' THEN post_date END DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T06:51:04.410

试试这个——

```
SELECT
  post_status, post_date, post_title
FROM
  wp_posts
WHERE
  post_status IN ('future', 'publish')
ORDER BY
  IF(post_status = 'future', 0, 1),
  IF(post_status = 'future', TO_DAYS(post_date), TO_DAYS(post_date) * -1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T20:46:44.760

这样的事情怎么样？选择两次并合并结果。

```
Select * from (SELECT post_status, post_date, post_title 
FROM wp_posts WHERE post_status IN ('future') 
ORDER BY post_status ASC  ) alias1  
UNION
Select * from (SELECT post_status, post_date, post_title 
FROM wp_posts WHERE post_status IN ('publish') 
ORDER BY post_status DESC ) alias2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:43:23.240

我会使用一个`union all`, 技巧 in `order by`can't use index 并且速度较慢。

```
SELECT * FROM
((SELECT
  1 AS a, @rownum:=@rownum+1 B, post_status, post_date, post_title
FROM
  wp_posts, (SELECT @rownum:=0) r 
WHERE
  post_status='publish'
ORDER BY
  post_date DESC)
UNION ALL
(SELECT
  2 AS a,  @rownum:=@rownum+1 B, post_status, post_date, post_title
FROM
  wp_posts, (SELECT @rownum:=0) r2
WHERE
  post_status='future'
ORDER BY
  post_date)) ORDER BY A,B; 
```

# com - 如何从 Visual Basic 转储文件中检查 COM 对象？

> ID：10626364
> 
> 赞同：5
> 
> 时间：2012-05-16T20:40:03.210
> 
> 标签：com, vb6, windbg, minidump

**背景**

我们有一个用 C# 编写的 .NET WinForms 应用程序，它通过控制台应用程序连接到手持式商店扫描仪。控制台应用程序是用很好的 VB6 编写的——那里没有托管代码。VB6 应用程序由几个 COM 对象组成。

.NET WinForms 应用程序通过调用具有正确参数的控制台应用程序来刷新扫描仪中的数据。当控制台应用程序启动时，它会弹出一个模态表单，提醒用户将手持设备放入支架中。

**问题**

客户有一个奇怪的情况，启动控制台应用程序的调用在显示提醒表单之前似乎挂起。如果用户按下任何键——即使是像 Shift 或 Alt 这样的无害键——应用程序将解冻，并出现提醒表单。挂起时，控制台应用程序的 CPU 使用率非常高。

我们使用[ProcDump](http://technet.microsoft.com/en-us/sysinternals/dd996900)从命令行应用程序获得了内存转储。我有一些调试托管转储文件的经验，但是这个 VB 6 转储对我来说很奇怪。

我们连续捕获了几个完整的内存转储。在其中一些中，似乎有 COM 胶水堆栈。例如，几个转储文件显示如下调用堆栈：

```
msvbm60!BASIC_DISPINTERFACE_GetTICount
msvbm60!_vbaStrToAnsi
msvbm60!IIDIVbaHost
msvbm60!rtcDoEvents
msvbm60!IIDIVbaHost
msvbm60!BASICCLASS_QueryInterface
[our code which I think is trying to create and invoke a COM object] 
```

我拥有的唯一符号来自我们的代码，这无济于事。Microsoft 符号服务器没有用于 msvbm60.dll 的 PDB 文件（或者至少没有来自其版本 6.0.98.2）。

**问题**

我怀疑可能存在仅在他们的系统上发生的一些 COM 线程问题。

1）如何确定转储文件中每个线程的线程状态？如果这是一个托管转储文件，我会查看`!threads`然后`!threadstate`找出线程状态。没有托管代码，所以我不能使用 sos.dll。我没有看到任何使用`~`and的提示`!teb`。

2) 有没有办法查看在转储文件中创建了哪些 COM 对象？同样，在托管转储中，我可以执行 a`!dumpheap`来获取托管对象的列表。我可以为 COM 对象找到类似的东西吗？

3) 我可以确定转储文件中COM对象的线程模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:50:45.673

您可以使用以下命令转储线程状态：

```
~* 
```

这不会将“背景”显示为状态，您只会看到正在运行、冻结或暂停。

我不确定您如何从 COM 对象获取信息，我从未尝试过，但会调查并回复您，关于线程模型，如果没有在单步执行后对应用程序状态进行痛苦的监控，即使使用那，当你单步执行所有其他线程时，除非你使用`.bpsync 1`which 将所有线程同步到当前线程，否则它将运行，但这可能会导致挂起（例如，gui 线程现在被告知冻结）所以我认为除非你有访问源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:39:15.063

我只能回答问题 1。`!runaway`用于查找消耗 CPU 的线程。要获取所有线程堆栈，请使用`~*kb1000`.

# sql - 在gridview中使用popupcontrolextender创建具有多行的表

> ID：10626367
> 
> 赞同：0
> 
> 时间：2012-05-16T20:40:22.230
> 
> 标签：sql, vb.net

我有以下函数，它只返回第一行数据并将其放在一个漂亮的表中。我在这方面的知识有限，因为我不知道如何创建表以返回多行。你能告诉我如何改变它以返回所有行，不管有多少行？我的 sql 选择语句可能返回 0 行或多行。

谢谢：

```
<System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethodAttribute()> _
    Public Shared Function GetDynamicContent(contextKey As String) As String
        Dim constr As String = "Data Source=my data source"
        Dim query As String = "SELECT * FROM Details WHERE ItemID = " & contextKey

        Dim da As New SqlDataAdapter(query, constr)
        Dim table As New DataTable()

        da.Fill(table)

        Dim b As New StringBuilder()

        b.Append("<table style='background-color:#f3f3f3; border: #336699 3px solid; ")
        b.Append("width:350px; font-size:10pt; font-family:Verdana;' cellspacing='0' cellpadding='3'>")

        b.Append("<tr><td colspan='3' style='background-color:#336699; color:white;'>")
        b.Append("<b>Budget Item Details</b>")
        b.Append("</td></tr>")
        b.Append("<tr><td style='width:80px;'><b>Detail</b></td>")
        b.Append("<td style='width:80px;'><b>Amount</b></td>")
        b.Append("<td><b>Date</b></td></tr>")

        b.Append("<tr>")
        b.Append("<td>$" & table.Rows(0)("Detail").ToString() & "</td>")
        b.Append("<td>" & table.Rows(0)("Amount").ToString() & "</td>")
        b.Append("<td>" & table.Rows(0)("DetailDate").ToString() & "</td>")
        b.Append("</tr>")

        b.Append("</table>")

        Return b.ToString()
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:30:40.440

试试这个。您需要一个`FOR`循环来创建行。

```
Public Shared Function GetDynamicContent(contextKey As String) As String
  Dim constr As String = "Data Source=my data source"
  Dim query As String = "SELECT * FROM Details WHERE ItemID = " & contextKey
  Dim da As New SqlDataAdapter(query, constr)
  Dim table As New DataTable()
  da.Fill(table)
  Dim b As New StringBuilder()
  b.Append("<table style='background-color:#f3f3f3; border: #336699 3px solid; ")
  b.Append("width:350px; font-size:10pt; font-family:Verdana;' cellspacing='0' cellpadding='3'>")
  b.Append("<table style='background-color:#f3f3f3; border: #336699 3px solid; ")
  b.Append("width:350px; font-size:10pt; font-family:Verdana;' cellspacing='0' cellpadding='3'>")
  b.Append("<tr><td colspan='3' style='background-color:#336699; color:white;'>")
  b.Append("<b>Budget Item Details</b>")
  b.Append("</td></tr>")
  b.Append("<tr><td style='width:80px;'><b>Detail</b></td>")
  b.Append("<td style='width:80px;'><b>Amount</b></td>")
  b.Append("<td><b>Date</b></td></tr>")
  For i As Integer = 0 To table.Rows.Count-1
    b.Append("<tr>")
    b.Append("<td>$" & table.Rows(i).Cell("Detail").ToString() & "</td>")
    b.Append("<td>" & table.Rows(i).Cell("Amount").ToString() & "</td>")
    b.Append("<td>" & table.Rows(i).Cell("DetailDate").ToString() & "</td>")
    b.Append("</tr>")
  Next
  b.Append("</table>")
  Return b.ToString()
End Function 
```

# javascript - 在 JavaScript 中模拟单击 GitHub 的新闻源“更多”按钮不起作用

> ID：10626369
> 
> 赞同：1
> 
> 时间：2012-05-16T20:40:30.593
> 
> 标签：javascript, jquery, github, greasemonkey

我正在尝试创建一个 GreaseMonkey 脚本，该脚本会自动扩展 GitHub 新闻源中的警报列表，但这不起作用。

这是我的代码（灵感来自[这篇](https://stackoverflow.com/questions/6379507/clicking-a-link-with-greasemonkey-from-the-content-inside-link)文章）：

```
var moreLink = $("a:contains('More')");
var evt = document.createEvent("MouseEvents");
evt.initEvent("click", true, true);
moreLink[0].dispatchEvent(evt); 
```

但是，它不会像手动单击它时那样扩展警报列表，它只会打开链接指向的页面（`https://github.com/organizations/my_organization?page=2`）

我怎样才能做到这一点？

编辑：这是链接的 HTML 源代码，看起来没有与之关联的 javascript 或 onClick 事件：

```
<a href="/organizations/my_organization?page=2">More</a> 
```

编辑2：这是我完整的greasemonkey脚本：

```
// ==UserScript==
// @name        test
// @namespace   test
// @description test
// @include     https://github.com
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js
// @version     1
// ==/UserScript==

var moreLink = $("#dashboard div.news div.pagination a:contains('More')");
var evt = document.createEvent("MouseEvents");
evt.initEvent("click", true, true);
moreLink[0].dispatchEvent(evt);
//alert($(".alert").length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:29:29.310

您的代码非常适合我——登录后在主页上。虽然我建议您使用更具体的选择器，以避免误报。

例如，使用：

```
var moreLink = $("#dashboard div.news div.pagination a:contains('More')"); 
```

* * *

*   您使用的是哪个版本的 Firefox 和 Greasemonkey？
*   NoScript、Adblock 或类似软件是否正在运行？
*   您说该链接似乎没有 javascript 或 onClick 事件...您是如何检查的？Firebug 在该节点上显示了几个事件侦听器。
*   `Ctl``Shift``J`除了 GitHub 生成的无数 CSS 警告之外，Firefox 的错误控制台 ( ) 中还会出现哪些错误？
*   您的脚本是否对页面做其他事情？特别是添加或删除内容或使用`innerHTML`？如果是这样，请发布或链接到完整的脚本。

* * *

## 更新新信息：

1.  在更多环境的进一步测试中，现在似乎 GitHub 的分页并不总是在 Greasemonkey 脚本触发时初始化。要解决这个问题，请使用[waitForKeyElements() 实用程序](https://gist.github.com/2625891)并在尝试单击链接之前检查分页引擎是否准备就绪。见下文。

2.  Greasemonkey 0.9.19 是错误的，因为所有的退出 - 因此它只活跃了几天。转到[Greasemonkey 版本历史页面](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/versions/)并**安装 0.9.20 或 0.9.18 版本。**

3.  该`@include`指令可能不会在您需要时触发。它至少需要：

    ```
    // @include https://github.com/ 
    ```

    但

    ```
    // @include https://github.com/* 
    ```

    可能会更好，并且选择器足够具体，以至于更广泛的包含应该不会造成伤害。

4.  升级到 jQuery 版本 1.7.2——我们已经广泛使用它，没有任何问题。（1.5.1 可能不是问题，但最好消除该变量。）

将所有这些放在一起，以下脚本适用于我，来自各种（Windows）环境。我留下了大部分调试代码，以防万一......

```
// ==UserScript==
// @name        _GitHub "news" item auto-paging
// @namespace   _pc
// @include     https://github.com/
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require     https://gist.github.com/raw/2625891/waitForKeyElements.js
// ==/UserScript==

if (typeof unsafeWindow.console.clear != 'undefined') {
    unsafeWindow.console.clear ();
}
unsafeWindow.console.log ("Start...");  //-- Does not require Firebug.

waitForKeyElements (
    "#dashboard div.news div.pagination a:contains('More')",
    clickAjaxMoreLink,
    true    //-- Stop on first successful click.
);

function clickAjaxMoreLink (jNode) {
    this.numRuns    = this.numRuns || 1;

    unsafeWindow.console.log (
        "moreLink:", jNode,
        " | Parent classes:", jNode.parent ().attr ("class"),
        " | Run:", this.numRuns
    );
    this.numRuns++;
    /*--- COMMENT THIS NEXT CHECK OUT, if waitForKeyElements is set to
        continually click via clickAjaxMoreLink. (The last param is false.)
    */
    if (this.numRuns > 25) {
        unsafeWindow.console.log ("*** Excessive runcount, abort! ***");
        return false;
    }

    if (jNode.parent ().hasClass ("loading") ) {
        return true;    //-- Cancel the "found" status.
    }
    var unsfJQ_Body = unsafeWindow.$(document.body);
    if (    ! unsfJQ_Body
        ||  ! unsfJQ_Body.length
        ||  document.readyState != "complete"   //-- Order is important here
        ||  (typeof unsfJQ_Body.pageUpdate) != "function"
    ) {
        return true;
    }

    unsafeWindow.console.log ("Num news items, start:", $(".alert").length);

    setTimeout ( function () {
        unsafeWindow.console.log (
            "Num news items, after AJAX delay:", $(".alert").length
        );
    }, 2333);

    var evt = document.createEvent ("MouseEvents");
    evt.initEvent ("click", true, true);
    jNode[0].dispatchEvent (evt);

    return false;
}

unsafeWindow.console.log ("Setup complete..."); 
```

# http - node.js 安装错误 require('http');

> ID：10626370
> 
> 赞同：0
> 
> 时间：2012-05-16T20:40:39.437
> 
> 标签：http, node.js, ubuntu, ubuntu-11.10

我正在按照这些说明在 Ubuntu 上安装 node.js ( [http://nodenode.com/post/1197688151/installing-node-js-on-ubuntu-screencast-tutorial](http://nodenode.com/post/1197688151/installing-node-js-on-ubuntu-screencast-tutorial) )

我在最后一步收到以下错误

我打字`node hello_node.js`

我的终端回复

```
/home/joe/tmp/hello_node/hello_node.js:1
require(‘http’);
    ^

 node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
 SyntaxError: Unexpected token ILLEGAL
     at Module._compile (module.js:427:25)
      at Object..js (module.js:450:10)
  at Module.load (module.js:351:31)
  at Function._load (module.js:310:12)
  at Array.0 (module.js:470:10)
  at EventEmitter._tickCallback (node.js:192:40) 
```

所以，看来我“需要”http。我做错了什么......或者更糟，愚蠢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:42:10.077

您没有使用普通的单引号。你有：

```
require(‘http’); 
```

它应该是：

```
require('http'); 
```

# core-data - 核心数据中的 NSFetchRequest

> ID：10626377
> 
> 赞同：1
> 
> 时间：2012-05-16T20:41:09.523
> 
> 标签：core-data, nsfetchrequest

我很难理解子视图中需要包含哪些内容，以便在使用 Core Data 时执行获取请求并在表格视图中显示结果。我发现的所有示例要么只有一层深（随机日期），要么使用始终有效的根视图控制器，要么使用具有图片和其他属性（食谱）的多个视图控制器，这让我难以理解。

我正在寻找的一个例子是具有三个属性的实体。实体为album，三个属性为albumTitle、albumArtist 和yearRecorded。

现在在我的导航应用程序中，我的根视图控制器有三行可供选择，根本不使用实体或核心数据。三个选项是“标题”、“艺术家”和“年份”。当您单击三行之一时，它将推送一个新的视图控制器并在新的表视图中列出所有适当的属性。

我相信它应该非常简单，不需要太多代码，但我无法掌握它。非常感谢任何解释或示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:29:05.087

您可以只发出一个不带谓词的 fetch 请求，从您的 Core Data 存储中获取所有对象，因此，您将拥有一系列歌曲。

例如，您只需调用`[fetchedSongs valueForKeyPath:@"artist"];`一组艺术家并将其作为源添加到您的 tableview 中。

# asp.net - 限制下载的文件 - IIS

> ID：10626384
> 
> 赞同：0
> 
> 时间：2012-05-16T20:41:53.783
> 
> 标签：asp.net, iis, download

我在本地 IIS 上有自己的网站（在 asp.net 中创建）。从这个网站我下载文件。我只能下载 9 个文件。IIS 设置中是否有限制下载文件数量的选项？也许在 metabase.xml 中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:45:17.130

IIS 对非服务器操作系统实施连接限制。我假设您使用的是 Windows7/Vista。我怀疑你遇到了这个限制。您可以[在此处](http://www.jpelectron.com/sample/WWW%20and%20HTML/IIS-%20OS%20Version%20Limits.htm)查看按操作系统版本划分的连接限制的详细分类。

好消息是，当您部署到真正的服务器操作系统时，您不会遇到这个问题。

# java - Play Framework 2.x 无法识别新创建的 scala.html 视图

> ID：10626393
> 
> 赞同：15
> 
> 时间：2012-05-16T20:42:37.147
> 
> 标签：java, playframework, playframework-2.0

我正在使用 Play Framework 2.0.1。我使用“play new”命令创建了一个 Java 应用程序。默认情况下，会创建两个视图：index.scala.html 和 main.scala.html

我已经完成了一些示例教程应用程序，这些应用程序允许我呈现这些视图。但是，当我添加一个新视图（默认情况下在 app/views/ 中）时，我收到一个无法找到的编译错误：

```
public static Result getAllCars() {
    List<Car> cars = Car.getAllCars();
    return ok(simpleCarView.render(cars));
} 
```

我可以

```
import views.html.index;
import views.html.main; 
```

但不是

```
import views.html.simpleCarView; 
```

控制台错误：

```
cannot find symbol
[error] symbol : variable simpleCarView
[error] location: class controllers.Application 
```

我尝试在文件目录和 eclipse 中添加 scala.html 视图，但由于某种原因找不到它们。我也试过重启默认的 Netty 服务器。

关于造成这种情况的任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-17T01:07:20.713

这些视图不是由 Eclipse 编译的，但只要 target\scala-2.9.1\classes_managed 目录在你的 Eclipse 项目构建路径中，它们就可以在 Play 编译后被 Eclipse 看到。

尝试在命令行上运行“play compile”（或者如果您已经在 play 控制台中，则只需“compile”）然后在 eclipse 中刷新您的项目（选择项目并按 F5）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T09:10:06.233

对于您的 IntelliJ 12 用户：我升级到 Play 2.1，它破坏了我的 Play IntelliJ 支持插件。这导致 IntelliJ 无法识别：

```
import views.html.*; 
```

所以当点击`cmd + o`优化我的进口时，它被删除了。`play clean compile`由于未导入视图，因此在运行时会导致编译错误：

```
[error] symbol  : variable index
[error] location: class controllers.Application
[error]         return ok(index.render());
[error]                   ^
[error] 1 error
[error] (compile:compile) javac returned nonzero exit code
[error] application - 
```

所以我卸载了插件，重新启动了 IntelliJ 和 viola，一切都像魅力一样！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T09:40:28.093

你可以使用

```
~compile 
```

在游戏控制台中，以便更新的模板将在文件更改时重新编译，并且可能 Eclipse 会立即看到更改（IDEA 会这样做）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-12T20:18:57.203

在我复制了整个项目并尝试修改它之后，这发生在我身上。HTML 视图中的更改将被忽略，因为它们没有被编译。

这样做`activator clean compile run`解决了问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T11:07:54.863

我也有过这种行为。原来这是一个典型的复制/粘贴问题。我忘记更新导入语句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T19:15:42.633

我执行与 InPursuit 建议的相同的**play compile**，但是当添加一个全新的视图时，我发现我需要关闭项目并重新打开它，以便 eclipse 重建其“内容辅助”信息。

我只需右键单击项目并选择“关闭项目”，然后右键单击现在为空的项目文件夹并选择“打开项目”。这很烦人，但这是对我有用的唯一方法（没有重新启动 Eclipse）。有时红色波浪线在重新打开后仍然存在，但如果我刷新它们就会消失。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-25T17:46:59.557

就我而言，我刚刚添加了以下导入：

```
import views.html.*; 
```

如果您通过以下方式组织导入，Eclipse IDE 将删除上述行`CTRL + SHIFT + O`

# c# - 如何绕过 FormClosing 事件

> ID：10626396
> 
> 赞同：1
> 
> 时间：2012-05-16T20:42:47.890
> 
> 标签：c#, .net, winforms, formclosing

我有以下代码：

```
private void form1_closing(object sender, FormClosingEventArgs e)
{
    e.Cancel = true;
    this.Hide(); 
} 
```

我想要一个关闭表单的按钮，而不触发此事件。我该怎么做呢？

按钮的代码：

```
private void exitToolStripMenuItem_Click(object sender, EventArgs e)
{
    Application.Exit(); 
} 
```

我希望上面的按钮关闭表单而不是隐藏它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T20:47:39.763

```
//unsubscribe the mean "don't let me close" handler
this.FormClosing -= form1_closing; 
//close form
this.Close(); 
```

另一种选择是创建一个布尔字段“shouldIReallyClose”。默认为假。当您真的想关闭表单时，请将其设置为 true。更改事件处理程序以在取消事件之前检查该布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:51:31.380

```
protected override void OnFormClosing(FormClosingEventArgs e)
{
    if(!boolTrackingButtonPressed)
    {
       base.OnFormClosing(e);
    }
} 
```

# xcode - 两个 NSView 之间的页面卷曲转换

> ID：10626400
> 
> 赞同：1
> 
> 时间：2012-05-16T20:43:22.950
> 
> 标签：xcode, curl, nsview

我正在为 mac osx 开发一种目录类型的应用程序。我希望能够通过书页卷曲动画在多个视图之间进行转换。我会用上一个和下一个按钮来做到这一点。我知道我必须使用 QuartzCore。我已将框架导入到我的项目中，但我不确定从那里去哪里。我的观点可以称为这个论坛的观点 1 和观点 2。谢谢你！

# git - Git命令显示分支的值

> ID：10626401
> 
> 赞同：2
> 
> 时间：2012-05-16T20:43:22.963
> 
> 标签：git

我正在寻找这样的 git 命令：

```
git show-branch-value refs/heads/master
cf574d699a8bd67fc0b851cda3452c4d18c4223540a 
```

我想要它做的是显示所选分支的值。

有这样的命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:55:26.127

您可以使用

```
git rev-parse refs/heads/your-branch 
```

或在远程分支上

```
git rev-parse refs/remotes/origin/some-remote-branch 
```

但是您也可以只 cat 文件（如果尚未打包 - 请参阅下面 Dmitry 的评论）：

```
cat .git/refs/heads/your-branch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:47:16.787

您可以使用：

```
git rev-parse refs/heads/master 
```

这适用于任何东西（分支、标签、SHA）。

# java - 你能帮我创建一个返回整个链接列表和队列数组的方法吗？

> ID：10626403
> 
> 赞同：0
> 
> 时间：2012-05-16T20:43:34.970
> 
> 标签：java, linked-list, queue

到目前为止，这是我的队列方法，

```
public String rQueue()
{
  for(int i = 0; i < queueName.length; i++)
    return queueName[i];
 return

" ";
} 
```

这里的问题是，`i++`因为返回了，所以永远不会到达`queueName[i]`，当我使用这个方法时，只返回第一个，我可以明白为什么。如何修复它以便我可以返回队列的全部内容。

我对链表也很困惑，我有一个`Object()`. 我只想`Object.getMethod();`为每个链接的每个实例返回。所以这就是我所拥有的。我能想到的唯一方法是使用另一个循环并查看每个位置，但我不知道如何返回类似的东西。

```
 public String displayLink()
{
      Link current = first;
      while(current != null)
      {
          current.displayMethod();
          current = current.next;
      }
} 
```

我真的更卡在链表上，而队列只是一个技术问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:49:12.510

如果要返回串联，可以执行以下操作：

```
public String rQueue() {
  String r = "";
  for(int i = 0; i < queueName.length; i++) {
    if (i != 0) {
      r += ", ";
    }
    r += queueName[i];
  }
  return r;
} 
```

对于链表，您可以返回一个集合。如果*displayMethod*返回*string*，您可以执行以下操作：

```
public Collection<String> displayLink() {
      Collection<String> result = new List<String>();
      Link current = first;
      while(current != null) {
          result.add(current.displayMethod());
          current = current.next;
      }
      return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:49:22.123

第一部分，

```
public String[] qQueue { return queueName; } // or defensively copy, if you prefer 
```

然后，您将数组作为队列内容，如果它适合您的其余代码。

第二部分对我来说看起来很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:51:20.403

您对链表所做的实际上是遍历它的唯一方法（假设它是一个简单的链表，其中包含从一个节点到下一个节点的链接）。这也是为什么从链表中检索元素是 O(n) 操作的原因，因为您必须遍历链表才能找到您要查找的对象。
现在就返回值而言，您可以将它们附加到字符串并最终返回此字符串。像这样的东西会起作用：

```
public String rQueue() {
    StringBuffer sb = new StringBuffer();
    for(int i = 0; i < queueName.length; i++)
        sb = sb.append(queueName[i]);
    return sb.toString();
} 
```

请注意，我在上面的代码中使用了 StringBuffer，因为它比连接到 String 的末尾更有效，特别是对于大量连接。

# regex - 正则表达式，不包括一个词

> ID：10626405
> 
> 赞同：1
> 
> 时间：2012-05-16T20:43:43.753
> 
> 标签：regex

```
egrep 'session\.[^0].*' i 
```

将排除

```
session.1.something 
session.2.something 
session.abc.something
session.def.something 
```

您将如何修改正则表达式以排除不 abc？

我原以为这会起作用，但事实并非如此

```
egrep 'session\.^(abc).*' i 
```

我想回来

```
session.1.something 
session.2.something 
session.def.something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:50:44.273

希望这会正常工作

```
egrep 'session\.^(?!abc).*' i 
```

# heroku - 在 Heroku 上安装 VLC？

> ID：10626410
> 
> 赞同：2
> 
> 时间：2012-05-16T20:43:58.207
> 
> 标签：heroku, vlc

我需要能够从 heroku 服务器流式传输媒体。为此，我在我的开发系统上使用 VLC 取得了相当大的成功。现在我“准备好”将它部署到heroku，但不确定如何在heroku上安装VLC。这是可行的吗？如果有，步骤是什么？我将[下载](http://www.videolan.org/vlc/index.html#download)VLC 的哪个操作系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:22:26.293

使用Bindle似乎可以做到这一点：http: [//bindle.me/blog/index.php/405/running-binaries-on-heroku](http://bindle.me/blog/index.php/405/running-binaries-on-heroku)

来自文章：

> 如果它们位于应用程序的 bin/ 目录中，则可以在 heroku 上运行二进制文件。这不受官方支持，因此使用风险自负。Heroku 在 Ubuntu 10.04 LTS 64 位上运行，因此您需要下载它以在 VM 上编译您的程序。正常安装 Ubuntu，然后下载您感兴趣的程序的源代码。

如果程序具有在 Ubuntu 上不标准的依赖项，您需要将它们编译为静态链接，如文章中所述。

# iphone - 在 iPad 上选择图像

> ID：10626411
> 
> 赞同：0
> 
> 时间：2012-05-16T20:44:09.283
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在尝试编写代码以从 iPad 上的照片库中选择图像。我正在使用的代码如下（取自 Apple 的网站），但它一直给我一个错误，说`On iPad, UIImagePickerController must be presented via UIPopoverController`. 我试过改变这一行：`UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];`使用 UIPopoverController，但显然我做错了什么，因为它不起作用。

```
- (BOOL) selectImage: (UIViewController*) controller
       usingDelegate: (id <UIImagePickerControllerDelegate,
                       UINavigationControllerDelegate>) delegate {

    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeSavedPhotosAlbum] == NO)
        || (delegate == nil)
        || (controller == nil))
        return NO;

    UIImagePickerController *mediaUI = [[UIImagePickerController alloc] init];
    mediaUI.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;

    // Displays saved pictures and movies, if both are available, from the
    // Camera Roll album.
    mediaUI.mediaTypes =
    [UIImagePickerController availableMediaTypesForSourceType:
     UIImagePickerControllerSourceTypeSavedPhotosAlbum];

    // Hides the controls for moving & scaling pictures, or for
    // trimming movies. To instead show the controls, use YES.
    mediaUI.allowsEditing = NO;

    mediaUI.delegate = delegate;

    [controller presentModalViewController: mediaUI animated: YES];
    return YES; } 
```

Apple 开发人员页面还说：“在 iPad 上，您可以选择使用弹出框呈现浏览器界面，如 initWithContentViewController: 和 UIPopoverController 类参考中的“呈现和关闭弹出框”中所述。” 我读过它，但我仍然无法让它工作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:45:52.967

像这样的东西应该工作：

```
// create an image picker controller 
UIImagePickerController *imagePickerController = [[[UIImagePickerController alloc] init] autorelease];
imagePickerController.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
imagePickerController.delegate = self;

// present it in a popover
self.popoverController = [[[UIPopoverController alloc] initWithContentViewController:imagePickerController] autorelease];
self.popoverController.delegate = self;
// I was presenting the popover from a button, but you would set the rect to whatever is appropriate for your app
[self.popoverController presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:52:52.220

声明一个 ivar，例如：

```
UIPopoverController *imagePopover; 
```

然后：

```
imagePopover = [[UIPopoverController alloc] initWithContentViewController:mediaUI];
[imagePopover setDelegate:self];

[imagePopover presentPopoverFromRect:someRect
                              inView:someView
            permittedArrowDirections:UIPopoverArrowDirectionAny
                           animated:YES]; 
```

代替

```
[controller presentModal...]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T05:58:49.793

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

imagePicker.delegate = self;

imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];

[popover presentPopoverFromRect:CGRectMake(0.0, 0.0, 400.0, 400.0) 
                         inView:self.view
       permittedArrowDirections:UIPopoverArrowDirectionAny 
                       animated:YES]; 
```

参考下面的链接

[http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_%28Xcode_4%29](http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_%28Xcode_4%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-09T21:09:18.667

我经历了很多痛苦，想出了一个适用于 iPad 和 iPhone 的解决方案，这是最终代码，其中一些来自其他人的评论：代码有一些错误，但它是一个很好的起点： ) 它涵盖了所需的权限以及如何管理 ipad 上弹出的视图控制器。

需要以下进口：

```
#import <AVFoundation/AVFoundation.h>
#import <AssetsLibrary/AssetsLibrary.h> 
```

并添加这个代表：

```
UIActionSheetDelegate, UIImagePickerControllerDelegate 
```

定义：

```
__weak IBOutlet UIButton *attachButton;
UIImage *image; 
```

按钮的作用：

```
 - (IBAction)doAttach:(id)sender {
    UIActionSheet *action = [[UIActionSheet alloc] initWithTitle:@"Select image from" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"From library",@"From camera", nil] ;
    [action showInView:self.view];
  }

#pragma mark - ActionSheet delegates

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if( buttonIndex == 1 ) {
        AVAuthorizationStatus authStatus = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeVideo];
        if(authStatus == AVAuthorizationStatusAuthorized)
        {
            NSLog(@"%@", @"You have camera access");
        }
        else if(authStatus == AVAuthorizationStatusDenied)
        {
            NSLog(@"%@", @"Denied camera access");

            [AVCaptureDevice requestAccessForMediaType:AVMediaTypeVideo completionHandler:^(BOOL granted) {
                if(granted){
                    NSLog(@"Granted access to %@", AVMediaTypeVideo);
                } else {
                    [self.presentedViewController dismissViewControllerAnimated:YES completion:nil];
                    UIAlertController* alert = [UIAlertController alertControllerWithTitle:@“no camera access“
                                                                                   message: @“if you need to use camera in this application go to settings -> appName -> and turn on camera.”
                                                                            preferredStyle:UIAlertControllerStyleAlert];

                    UIAlertAction* defaultAction = [UIAlertAction actionWithTitle:@“ok” style:UIAlertActionStyleDefault
                                                                          handler:^(UIAlertAction * action) {
                                                                          }];
                    [alert addAction:defaultAction];

                    [self presentViewController:alert animated:YES completion:nil];

                    NSLog(@"Not granted access to %@", AVMediaTypeVideo);
                    return ;
                }
            }];
        }
        else if(authStatus == AVAuthorizationStatusRestricted)
        {
            [self.presentedViewController dismissViewControllerAnimated:YES completion:nil];
            UIAlertController* alert = [UIAlertController alertControllerWithTitle:@“no camera access“
                                                                                   message: @“if you need to use camera in this application go to settings -> appName -> and turn on camera.”
                                                                            preferredStyle:UIAlertControllerStyleAlert];

            UIAlertAction* defaultAction = [UIAlertAction actionWithTitle:@“ok” style:UIAlertActionStyleDefault
                                                                  handler:^(UIAlertAction * action) {
                                                                  }];
            [alert addAction:defaultAction];

            [self presentViewController:alert animated:YES completion:nil];

            NSLog(@"%@", @"Restricted, normally won't happen");
        }
        else if(authStatus == AVAuthorizationStatusNotDetermined)
        {
            NSLog(@"%@", @"Camera access not determined. Ask for permission.");

            [AVCaptureDevice requestAccessForMediaType:AVMediaTypeVideo completionHandler:^(BOOL granted) {
                if(granted){
                    NSLog(@"Granted access to %@", AVMediaTypeVideo);
                } else {
                    NSLog(@"Not granted access to %@", AVMediaTypeVideo);
                    return ;
                }
            }];
        }
        else
        {
            [self.presentedViewController dismissViewControllerAnimated:YES completion:nil];
            UIAlertController* alert = [UIAlertController alertControllerWithTitle:@“No camera access“
                                                                           message: @“error accusing camera”
                                                                    preferredStyle:UIAlertControllerStyleAlert];

            UIAlertAction* defaultAction = [UIAlertAction actionWithTitle:@“ok” style:UIAlertActionStyleDefault
                                                                  handler:^(UIAlertAction * action) {
                                                                  }];
            [alert addAction:defaultAction];

            [self presentViewController:alert animated:YES completion:nil];

            return;
            //NSLog(@"%@", @"Camera access unknown error.");
        }

        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {

            UIImagePickerController *pickerView =[[UIImagePickerController alloc]init];
            pickerView.allowsEditing = YES;
            pickerView.delegate = self;
            pickerView.sourceType = UIImagePickerControllerSourceTypeCamera;

            if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

                [ self.presentedViewController dismissViewControllerAnimated:YES completion:nil ];

                pickerView.modalPresentationStyle = UIModalPresentationPopover;
                UIPopoverPresentationController *popPC = pickerView.popoverPresentationController;
                popPC.sourceView = attachButton;
                popPC.permittedArrowDirections = UIPopoverArrowDirectionAny;
                [self presentViewController:pickerView animated:YES completion:nil];
            } else {
                [self presentModalViewController:pickerView animated:YES ];
            }
        }

    }else if( buttonIndex == 0 ) {

        ALAuthorizationStatus status = [ALAssetsLibrary authorizationStatus];
        switch (status) {
            case ALAuthorizationStatusRestricted:
            case ALAuthorizationStatusDenied:
            {
                [self.presentedViewController dismissViewControllerAnimated:YES completion:nil];
                UIAlertController* alert = [UIAlertController alertControllerWithTitle:@“no access to library”
                                                                               message: @“if you wish to access photos in this app go to settings -> appName-> and turn on photos .”
                                                                        preferredStyle:UIAlertControllerStyleAlert];

                UIAlertAction* defaultAction = [UIAlertAction actionWithTitle:@“ok” style:UIAlertActionStyleDefault
                                                                      handler:^(UIAlertAction * action) {
                                                                      }];
                [alert addAction:defaultAction];

                [self presentViewController:alert animated:YES completion:nil];

            }
                break;

            default:
            {
                UIImagePickerController *pickerView = [[UIImagePickerController alloc] init];
                pickerView.allowsEditing = YES;
                pickerView.delegate = self;

                [pickerView setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];

                if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

                    [ self.presentedViewController dismissViewControllerAnimated:YES completion:nil ];

                    pickerView.modalPresentationStyle = UIModalPresentationPopover;
                    UIPopoverPresentationController *popup = pickerView.popoverPresentationController;
                    popup.sourceView = attachButton;
                    popup.permittedArrowDirections = UIPopoverArrowDirectionAny;
                    [self presentViewController:pickerView animated:YES completion:nil];
                } else {
                    [self presentModalViewController:pickerView animated:YES ];
                }
            }
                break;
        }

    }
}

#pragma mark - PickerDelegates

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{

    [self dismissModalViewControllerAnimated:true];

    UIImage * img = [info valueForKey:UIImagePickerControllerEditedImage];
    image = img;

} 
```

# objective-c - CGRectContainsPoint 检查子视图中的视图？

> ID：10626412
> 
> 赞同：0
> 
> 时间：2012-05-16T20:44:09.953
> 
> 标签：objective-c, ios

我正在尝试检查`UIView`主视图中的一个与主`UILabel`视图中另一个视图的子视图的碰撞。

当我使用`CGRectContainsPoint`时，它不会返回 true。当我检查`UILabel's`框架时，它返回相对于它所在的子视图的值，而不是绝对位置。我想这可能是问题所在。

如果是这样，我如何指定我想要`UILabel's`框架的绝对值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:53:07.543

您可以使用以下方法在不同坐标系之间转换坐标`NSView`：

```
- convertRect:(NSRect) fromView:(NSView)
- convertRect:(NSRect) toView:(NSView) 
```

如果第二个参数是`nil`，则坐标从/到窗口基坐标转换。`NSPoint`对于和`NSSize`变量也存在类似的方法。一种解决方案是将所有矩形和点转换为窗口基础坐标并检查这些坐标中的碰撞。

# c++ - 在 C++ 中设计一个不确定的有限自动机（输出不正确）

> ID：10626414
> 
> 赞同：7
> 
> 时间：2012-05-16T20:44:27.370
> 
> 标签：c++, nfa, automaton

正如我在这篇[文章](https://stackoverflow.com/questions/10579348/implementing-a-code-to-simulate-a-finite-automaton-nondeterministic-in-c)中解释的那样，我正在做一个模拟非确定性有限自动机的任务。我从文件中读取了这个输入`tarea4.in`：

```
1
6 8 0 2
2
5
0 0 a
0 1 a
1 1 b
1 2 c
1 3 c
3 4 d
4 4 d
4 5 d
5
aaabcccc
aabbbbcdc
abbcdddcc
acdddddd
abc 
```

输入的第一行是一个整数 T，表示要评估程序的案例数。每个测试用例以 4 个整数开头，第一个是自动机的状态数，接下来是自动机的转换数，第三个数字是初始状态，然后是最终状态数。然后是最终状态（在示例中，最终状态是 2 和 5）。然后是 F 行，每行都有一个整数 E，表示 E 是一个最终状态。

然后是 N 行（N 是转换的数量），每行有 2 个整数和一个字符 I、J 和 C，表示转换的状态，即转换从状态 i 到状态 J，字符 C。在这一行之后是一个整数 S，它将包含要测试的字符串的数量，然后是 S 行与相应的字符串。

预期的输出是：

```
Test Case #2:
aaabcccc Rejected
aabbbbcdc Rejected
abbcdddcc Rejected
acdddddd Accepted
abc Accepted 
```

产生我的代码的输出：

```
Test Case #1:
aaabcccc Rejected
aabbbbcdc Rejected
abbcdddcc Rejected
acdddddd Rejected
abc Rejected 
```

这是我的代码：

```
#include <iostream>
#include <vector>
#include <map>
#include <set>
#include <utility>
#include <vector>    
using namespace std;

typedef map<pair<int, int>, char> transitions;
    transitions trans;

    int  numberFinals;
    vector<int> currentStates;    

int main (){ 

    freopen ("tarea4.in", "r", stdin);
    //freopen ("tarea4.out", "w", stdout);        
    int testCases, i, j,k, cont=1,finalStates,numberInputs,stateOrigin, stateDestination;
    int numberStates, numberTransitions, initialState;
    char transitionCharacter ;

    set<int> current;
    set<int> next;
    set<int>::iterator it;
    set <int> final;
    std::set<int> the_intersection;  // Destination of intersect
    map<pair<int, int>, char>::iterator p;
    string inputString;

    cin>> testCases;
    for (i=0;i< testCases;i++){
        cin>>numberStates>>numberTransitions>>initialState>>numberFinals;
        current.insert (initialState);

        for (j=0;j<numberFinals;j++){
            cin>>finalStates;
            final.insert(finalStates);
        }

        for (j=0; j<numberTransitions;j++){
            cin>> stateOrigin>>stateDestination>>transitionCharacter;
            trans.insert(transitions::value_type(std::make_pair(stateOrigin, stateDestination), transitionCharacter ));
       }

        cin>>numberInputs;

        cout<<"Test Case #"<<cont++<<":"<<endl;    

        for (j=0; j<numberInputs;j++){
             //////////////////the code of the answer /////////////////
            current.insert (initialState);
            cin>> inputString;
            cout<<inputString<<" ";

     for (k=0; k<str.size();k++){
         next.clear();
         for ( it=current.begin() ; it != current.end(); it++ ){
              for (q= trans.begin(); q!= trans.end();q++){
                  if((*it == q->first.first)&&(str[k]==q->second)){
                     next.insert(q->first.second);
                   }
              current=next;
              }
         }
     }

            std::set_intersection(current.begin(), current.end(), final.begin(), final.end(), std::inserter(the_intersection, the_intersection.end()));

            if (the_intersection.size()>0){
                cout<< "Accepted"<<endl;
            }
            else{
                cout<< "Rejected"<<endl;
            }

        }

        printf ("\n");
    }

return 0;
} 
```

我的问题是：为什么我得到不正确的输出？我认为这是因为测试用例中定义的自动机的不确定性，但是我如何正确评估字符串？如何`evaluate_string`以某种方式将调用的函数更改为检查可以使自动机通过非确定性评估字符串的不同路径？

我已经坚持了好几天了，老实说，我有点绝望。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T10:13:37.960

**评估 NFA几乎与评估 DFA*一样容易。***

在 DFA 中，您有一个当前状态，并且在每个步骤中您选择下一个转换。在输入结束时，您检查当前状态是否为接受状态。

好吧，在 NFA 中，您有一*组*当前状态，并且在每个步骤中，您都会遍历所有当前状态，并且为每个状态选择所有有效转换。这些组合集形成了您的新状态集。

最后，检查当前状态和接受状态的交集是否为非空。

在伪代码中，如下所示：

*   *当前*= {*初始*}
*   ***对于输入***中****的每个***字符* ： ****   *下一个*= { }
    *   ****对于***当前***的每个***状态* ： ****   **对于** *transitions* [ *state* ][ *char* ] ∪ *transitions* [ *state* ][ *ϵ ]***中的每个** *转换*： ******   *接下来*。*附加*（*target_of*（*过渡*））********** 
    *******   *当前*=*下一个************ 
*******   **如果** *len* (*交点*(*当前*,*接受*)) > 0:
    *   *打印* `"String accepted"`*   **否则**：
    *   *打印* `"String rejected"`******

 ******这可以*逐行*翻译成 C++ 代码。为方便起见，我建议使用`std::set<int>`for`current`和`next`集合，使用向量 of`std::multimap<char, int>`进行转换。这假设每个状态对应一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:15:38.767

根本问题是，一旦您找到第一个有效转换，您的代码就会跳出转换循环。如果您正在执行 DFA，这会起作用，但 NFA 可能有多个有效路径。

你有两个选择（我相信还有更多）：

1) 实现 NFA 评估器：这涉及跟踪一组当前状态，并针对每个状态评估每个输入字符。一旦字符串被读取，如果任何最终状态都在集合中，则它是完整的。

2) 将 NFA 转换为 DFA，恕我直言，这是一种更难的方法，因为这基本上涉及构建相同的集合逻辑并评估新状态的转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:16:37.013

我认为您应该首先实现将任何 NFA 转换为其相应 DFA 的通用机制。之后，您可以轻松实现自动运行程序，因为 DFA 可以确定地工作。******

# wpf - 为什么多重绑定总是将 DependencyProperty.UnsetValue 传递给第一个值？

> ID：10626420
> 
> 赞同：0
> 
> 时间：2012-05-16T20:44:55.717
> 
> 标签：wpf, data-binding, binding

在我的 WPF 应用程序的一个表单中，我正在构建一个伪条形图。条形图由一个 12 列的网格组成。每列包含一个矩形。我正在使用数据绑定将矩形的高度绑定到我想要绘制的数据。xaml 看起来像这样：

```
<Border BorderBrush="{DynamicResource ControlBorder}"
        BorderThickness="2"
        Grid.Column="1"
        Grid.Row="0"
        Margin="0,5"
        Name="SNRGraphBorder">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Rectangle Fill="{DynamicResource TextForeground}"
                   Grid.Column="0"
                   Margin="1,5,2,0"
                   Name="Data01"
                   VerticalAlignment="Bottom">
            <Rectangle.Height>
                <MultiBinding Converter="{StaticResource ScaleData}">
                    <Binding Source="{StaticResource XmlProvider}"
                             XPath="a:PathToData}" />
                    <Binding Path="RectangleHeight"
                             RelativeSource="{RelativeSource AncestorType={x:Type cs:MyControl}}" />
                </MultiBinding>
            </Rectangle.Height>
        </Rectangle>
        . . .
    </Grid>
</Border> 
```

为简洁起见，我只包括了一个矩形。

这是 MultiBinding 中使用的 IMultiValueConverter 的代码：

```
public class ScaleDataConverter : IMultiValueConverter {

    public object Convert( object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture ) {
        double snr = 0.0;

        if ( values[ 0 ] is string ) {
            snr = double.Parse( values[ 0 ] as string );

        } else if ( values[ 0 ] is int || values[ 0 ] is double || values[ 0 ] is long || values[ 0 ] is float ) {
            snr = (double) values[ 0 ];
        } else {
            return values[ 0 ];
        }

        double ActualHeight = (double) values[ 1 ];
        return snr * ActualHeight / 99.0;
    }

    public object[] ConvertBack( object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture ) {
        throw new NotImplementedException();
    }

} 
```

最后，这里是这个控件的代码：

```
public partial class MyControl : UserControl {

    public XmlDataProvider DataProvider { get; set; }

    public DeviceMonitor DeviceMonitor { get; set; }

    public double RectangleHeight {
        get { return SNRGraphBorder.ActualHeight; }
    }

    public MyControl() {
        InitializeComponent();
        DataProvider = Resources[ "XmlProvider" ] as XmlDataProvider; 
    }

    private void GetDiagnosticsInfo() {
        if ( DeviceMonitor != null ) {
            XmlDocument diagnosticsDoc = new XmlDocument();
            string info = DeviceMonitor.GetDiagnosticInfo();
            diagnosticsDoc.LoadXml( info );
            DataProvider.Document = diagnosticsDoc;
        }
    }

    private void RefreshButton_Click( object sender, RoutedEventArgs e ) {
        GetDiagnosticsInfo();
        e.Handled = true;
    }
} 
```

我已经在转换器中放置了断点`if ( values[ 0 ] is string )`。我看到值数组中的第一个条目始终是 DependencyProperty.UnsetValue。然而，我知道 XML 有其他关于这个属性的数据。我究竟做错了什么？

谢谢

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:57:39.117

我已经能够解决这个问题。如果您仔细查看第一个多重绑定中的 XPath，您会发现它以“}”结尾。该字符实际上不是 XPath 的一部分，当它是使用 {Binding Source={...} XPath=....} 语法的单个绑定时，它是绑定的原始文本的剩余部分。删除它后，我停止获取`DependencyProperty.UnsetValue`values 数组中的第一个值。

我还能够解决第二个值为零的另一个问题。我创建了 RectangleHeight 属性 a`DependencyProperty`并在 Loaded 事件处理程序中添加了代码，以将其设置为等于`Grid`包含所有`Rectangles`. 现在我的代码工作了，我得到了一个可爱的条形图。

谢谢所有看过的人。

# css - 快速移动鼠标时未触发 OnMouseOut 事件（GWT - 所有浏览器）

> ID：10626429
> 
> 赞同：3
> 
> 时间：2012-05-16T20:45:28.793
> 
> 标签：css, events, gwt, onmouseout

我有一个 DIV 代表一个带有文本“HELLO”的蓝色矩形，当用户单击它时，它的颜色将更改为红色，文本“BYE”，当用户将鼠标光标移出时，恢复其原始颜色和文本。这些样式在 CSS 中描述，文本由 GWT 事件控制（参见下面的 Java 代码）。

问题是，当我快速移动鼠标时，任何浏览器都不会触发 ONMOUSEOUT 事件。但是如果我慢慢移动它就可以了。

请问有什么想法吗？谢谢

**我的文件.html**

```
<div id="boxDiv" class="myStyle"></div> 
```

**我的文件.java**

```
final Element boxDiv = DOM.getElementById("boxDiv");
DOM.sinkEvents((com.google.gwt.user.client.Element)boxDiv,Event.ONCLICK | Event.ONMOUSEOUT);
DOM.setEventListener((com.google.gwt.user.client.Element)boxDiv,new EventListener(){
    public void onBrowserEvent(Event e) { 
        Element targetDiv = DOM.eventGetTarget(e);
        switch (DOM.eventGetType(e)) {
      case Event.ONCLICK: onClickHandler(e, targetDiv); break;
          case Event.ONMOUSEOUT: onMouseOutHandler(e, targetDiv); break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:17:25.810

**编辑**

鉴于您修改后的问题和更改文本的额外复杂性，让我们使用 GWT，因为 GWT 非常适合这种事情！

好的，首先我们非常简单的 CSS 样式表：

```
.myStyle {
background-color: blue;
}

.myStyle-clicked {
background-color: red;
} 
```

这是一个非常基本的小部件，它几乎完全按照您的要求（抱歉更改了文本，我对此进行了测试，并且我确信即使在非常快速地移动鼠标时它也能始终工作），并且使用漂亮、简单的 Java (GWT) 代码：

```
private class MyWidget extends Composite {

    private Label label = new Label();
    private static final String originalText = "Hello world!";
    private static final String clickedText = "Goodbye world!";

    public MyWidget() {
        sinkEvents(Event.ONCLICK | Event.ONMOUSEOUT);
        label.setText(originalText);
        initWidget(label);
        setStyleName("myStyle");
    }

    @Override
    public void onBrowserEvent(Event event) {
        super.onBrowserEvent(event);
        switch (event.getTypeInt()) {
        case Event.ONCLICK:
            addStyleDependentName("clicked");
            label.setText(clickedText);
            break;
        case Event.ONMOUSEOUT:
            removeStyleDependentName("clicked");
            label.setText(originalText);
            break;
        }
    }

} 
```

**如果您只是担心 MOUSE_OVER 和 MOUSE_OUT，则旧答案**

这个问题的解决方案是停止以编程方式执行此操作，并使用本机浏览器的事件处理系统来执行此操作，该系统尽可能快。

为此，请使用 CSS**悬停**过滤器。对于点击，您不必担心，您的问题只是移入和移出，正如您发现的那样，您可能无法信任JS很好地处理。我认为目前所有的浏览器都支持这个：

```
<!DOCTYPE html>

<html>
  <head>
   <style>
    .tt {
       background-color: blue;
    }
    .tt:hover {
       background-color: red;
    }
   </style>
  </head>
  <body>
    <div class="tt">
        The content of the body element is displayed in your browser.
    </div>
  </body>
</html> 
```

我对此进行了测试，它适用于 Chrome、FF 和 IE9。[根据 w3schools 文档](http://www.w3schools.com/cssref/sel_hover.asp)，它也适用于 Safari 和 Opera。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:20:23.533

我不在java中，但我只是建议检查您的应用程序中是否有其他脚本会干扰您的代码。

也许尝试隔离代码并在没有其他任何东西的情况下执行它，看看会发生什么？

# node.js - NodeJS undefined var 出错

> ID：10626433
> 
> 赞同：0
> 
> 时间：2012-05-16T20:45:44.067
> 
> 标签：node.js

我希望这是一个非常简单的问题，但我不明白为什么不起作用。

我的问题，我访问了一个无法定义的变量。

这是功能：

```
 app.get('/loc', function (req, res) {

    if (typeof req.user.userId === 'undefined'){
        redirect('/');
    } else {
        var userId = req.user.userId;
        Loc.getP([userId], function(promos) {
           res.render('local/index', {
            title: 'Local'
          });   
        });
    }
  }); 
```

问题出在我正在检查 var 是否未定义的那一行。如果没有，我只想重定向到其他网址。如果已定义，则呈现用户的数据。很简单，但我总是尝试访问 req.user.userId 我得到以下信息：

```
500 TypeError: Cannot read property 'userId' of undefined 
```

我尝试了我在互联网上找到的所有东西，但我认为在 JS 中它必须工作......

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T20:55:11.173

您应该首先检查是否定义了 req.user，然后检查您的用户 ID。

```
if (req.user && typeof req.user.userId === 'undefined'){ 
```

或者，您可以像这样测试它：

```
if (typeof req.user === 'undefined' && typeof req.user.userId === 'undefined'){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-19T18:18:30.593

更短：

```
if (!(req.user || {}).userId){ 
```

还值得一提的是，lodash 有一个功能： [https ://lodash.com/docs/4.17.4#get](https://lodash.com/docs/4.17.4#get)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-30T19:42:31.613

NodeJS 有一个 Util 类，它具有[isNullOrUndefined()](https://nodejs.org/api/util.html#util_util_isnullorundefined_object)方法来检查变量是否为`null`或`undefined`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T07:08:25.850

以下代码更简单：

```
if (!req.user || !req.user.userId){ // redirect 
```

# javascript - jquery动态位置变化

> ID：10626436
> 
> 赞同：0
> 
> 时间：2012-05-16T20:45:52.403
> 
> 标签：javascript, jquery, html, css

我在我的 Web 应用程序中使用这个 jquery 颜色选择器插件[http://www.eyecon.ro/colorpicker/ 。](http://www.eyecon.ro/colorpicker/)我需要做一些设计调整。我将在应用程序上展示一些示例功能。请看这个[http://jsfiddle.net/FSDPH/8/](http://jsfiddle.net/FSDPH/8/)有一个带手风琴的可移动盒子。在颜色部分，我实现了无法在 jsfiddle 中显示的颜色选择器插件。What I need is, when the color picker is selected and if the **box** is moved beyond the (document) section, the **box** and **color picker palette** should dynamically change its position inside the document area. 我已经成功地动态改变了盒子的位置，但我不能让它适用于颜色选择器调色板。

这是 jquery 代码：（用于动态更改框和颜色选择器调色板位置）

```
var dwidth = $(document).width() - 225; // #box_bg width
$("#box_bg").draggable({
stop: function(event, ui) {
      var npos = $("#box_bg").position();
      if ( npos.left > dwidth)
      {
          $(".colorpicker").css("left","-133px!important");
          $("#box_bg").css("left", dwidth+"px");
      }
      } 
}); 
```

在上面的代码中，$("#box_bg") 在框移出文档区域时起作用。但它不适用于 $(".colorpicker")**左边**的属性在 colorpicker.css 文件中没有改变。为什么会这样？

**更新**

在这里我已经更清楚地展示了，请检查一下:)

[http://jsfiddle.net/rkumarnirmal/4GrsD/3/](http://jsfiddle.net/rkumarnirmal/4GrsD/3/)

有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:15:22.730

每次显示时，都会在插件中计算颜色选择器的 left 属性。在您更改插件之前，left 属性将始终动态计算。

这是插件中的代码：

```
show = function (ev) {
    var cal = $('#' + $(this).data('colorpickerId'));
    cal.data('colorpicker').onBeforeShow.apply(this, [cal.get(0)]);
    var pos = $(this).offset();
    var viewPort = getViewport();
    var top = pos.top + this.offsetHeight;
    var left = pos.left;
    if (top + 176 > viewPort.t + viewPort.h) {
        top -= this.offsetHeight + 176;
    }
    if (left + 356 > viewPort.l + viewPort.w) {
        left -= 356;
    }
    cal.css({left: left + 'px', top: top + 'px'});
    if (cal.data('colorpicker').onShow.apply(this, [cal.get(0)]) != false) {
        cal.show();
    }
    $(document).bind('mousedown', {cal: cal}, hide);
    return false;
} 
```

# php - 会话未设置？

> ID：10626437
> 
> 赞同：1
> 
> 时间：2012-05-16T20:45:54.837
> 
> 标签：php, codeigniter, session, login, ldap

我有一个带有登录系统的网站。这对我来说可以。当我登录时，`session->userdata('admin_logged_in')`gets 设置为 true.. 我的同事正在尝试登录该站点，但会话未设置。它最初是设置的，但是当他更改页面时，会话被清除。

我们尝试将自己的会话添加到站点，当页面更改时它们被清除。我们尝试了不同的站点，但会话也没有保存在那里。

所以我的问题是，有谁知道为什么他的电脑，一台华硕笔记本电脑，不允许保存会话。

* * *

## Cookie 已启用 :)

这是它如何工作的代码。

```
 if($this->session->userdata('admin_logged_in')) {
      redirect('/manager/');
 } 
```

在管理器功能中，

```
 if (!$this->session->userdata('admin_logged_in')) {
      redirect('/auth/');
 } 
```

它每次都将我的同事重定向到“auth”。这对我来说可以。

我们尝试了

```
 var_dump($this->session->userdata('admin_logged_in')) 
```

对我来说是 bool(true)，对他来说是 bool(false)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:51:29.077

而不是 echo "admin ..." 你应该做一个调试：

```
var_dump($this->session->userdata('admin_logged_in')); 
```

找出变量/对象中的内容。所以你可以重新设计问题的原因。

# c# - 用于 XAML 的优秀 RAD 工具

> ID：10626440
> 
> 赞同：1
> 
> 时间：2012-05-16T20:46:02.640
> 
> 标签：c#, wpf, xaml, ide

我正在寻找一个很好的工具包来开发 xaml 应用程序。我尝试过 Visual Studio 2010 和 Expression Blend，虽然我可以使用这些工具完成任何我想做的事情，但我经常发现自己在做很多日常任务，我觉得应该由 IDE 更好地处理这些任务，但它们似乎并不成为。

例如，我需要一遍又一遍地实现 INotifyPropertyChanged，将 OnPrepercyChanged 标记为未序列化并将事件调用添加到属性的设置器中，或者将“ValidatesOnExceptions=True, ValidatesOnDataErrors=True, NotifyOnValidationError=True”添加到属性中的绑定，我需要显示错误消息。

市场上是否有任何好的 IDE 或 VS 扩展，可以做到这一点，以及其他对我来说平凡的东西，或者让我加速这样做的过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:55:16.360

有一些工具可以帮助您...

*   Karl Shifflett 的[XAML Power Toys](http://karlshifflett.wordpress.com/xaml-power-toys/)
*   Pete O'Hanlon 的[MoXAML](http://peteohanlon.wordpress.com/moxaml-power-toys/)

两者都有助于自动化 WPF 开发中的重复性任务

# css - 样式底部帖子Wordpress

> ID：10626441
> 
> 赞同：0
> 
> 时间：2012-05-16T20:46:06.490
> 
> 标签：css, wordpress-theming, wordpress

如何在我的 wordpress blogroll 最底部的帖子中添加“底部帖子”类？我需要不同的风格。（我不能使用静态ID，因为帖子和帖子总数在不断变化）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:08:50.370

您可以使用 jQuery 向元素添加类：

```
$(".post:last-child").addClass("bottom-post"); 
```

然后像这样风格：

```
.bottom-post {
    /* Different styling */
} 
```

这种方法的一个好处（与使用纯 css 相比）是这会将类应用于元素并允许在不支持`:last-child`css 选择器的浏览器上进行样式设置。我在 IE6-8 上对此进行了测试，并且在所有这些中都有效。

以下解释了为什么在这种情况下`:last-child`倾向于首选伪选择器：`:last`

[http://api.jquery.com/last-selector/](http://api.jquery.com/last-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:54:55.330

您可以使用 CSS 伪类`:last-child`来选择最后一篇文章。

例如：

> ```
> .post:last-child
> {
>     color: red;
> } 
> ```

将我链接到您的博客，我将能够给出一个工作示例。

# javascript - JavaScript/JQuery Combo 之类的下拉菜单问题

> ID：10626442
> 
> 赞同：1
> 
> 时间：2012-05-16T20:46:08.557
> 
> 标签：javascript, jquery, html, combobox, drop-down-menu

我想知道是否有人可以调整我的代码以获得我正在寻找的功能。我在这里遗漏了一些东西。我快到了。问题是当从列表中选择一个菜单项时，它并没有向上移动而是被复制了。然后，如果我再次单击以下拉此菜单，那么我将在菜单中获得两个相同的项目。理想情况下，我需要将选定的菜单项移动到顶部，并且菜单中没有任何重复的内容。请在[这里](http://jsfiddle.net/vladc77/DAgGP/)查看我在 jsfiddle 上的工作原型：

[演示](http://jsfiddle.net/vladc77/DAgGP/)

我还想知道您是否可以将菜单项内的文本放置在中间亮起，左边距为 10 像素。我试图做到这一点，但这并不像我预期的那样容易。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:58:36.960

这就是你所需要的：

## *[演示小提琴](http://jsfiddle.net/JpQPn/)*

```
$(document).ready(function() {

    var temp = '';

    $('.dropdown dt:eq(0)').on('click',function(){
        $('.dropdown dd ul').toggle();
    });

    $('dl.dropdown li').on('click',function(){
        $thisA = $('a', this);
        temp = $thisA.text();
        $thisA.closest('li').hide().siblings('li').show();
        $('.dropdown span').text(temp);
        $('.dropdown dd ul').hide();
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:55:03.653

尝试这个：

```
$(".dropdown dd ul li a").click(function() {
    $(".dropdown dd ul li a").css("display", "block");
    var text = $(this).html();
    $(this).css("display", "none");
    $(".dropdown dt a span").html(text);
    $(".dropdown dd ul").hide();
    $("#result").html("Selected value is: " + getSelectedValue("sample"));
}); 
```

[http://jsfiddle.net/DAgGP/3/](http://jsfiddle.net/DAgGP/3/)

对于 css 部分，您可以使用文本缩进：

```
.dropdown dd ul li a {
   text-indent: 10px;
} 
```

# ajax - 使用prototype.js 的Django 站点不能在IE8 上运行

> ID：10626443
> 
> 赞同：1
> 
> 时间：2012-05-16T20:46:22.380
> 
> 标签：ajax, django, forms, internet-explorer-8, prototypejs

提到另一个问题，我问[Django using AJAX with Forms, Views](https://stackoverflow.com/questions/10608932/django-using-ajax-with-forms-views)，我让 django 站点与 FF 和 Chrome 一起使用，但它不适用于 IE8。它没有显示任何错误。只是我在第二个下拉列表中的数据消失了，下拉列表没有更新数据。没有错误什么都没有。有没有办法查看其他人是否有这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:34:05.250

决定使用 JQuery lib 而不是原型，一切正常。

# asp.net - 以编程方式检查复选框

> ID：10626444
> 
> 赞同：0
> 
> 时间：2012-05-16T20:46:23.840
> 
> 标签：asp.net, vb.net, checkbox

我正在从数据库中读取值（布尔值），如果为真，我希望它检查一个复选框，如果为假，则保持未选中该复选框。这些行看起来像这样：`cblEnergy.Items.FindByValue(1).Selected = track_usage`

在这种情况下，`track_usage`是一个布尔值。

这种方式实际上并没有像我想要的那样在复选框中创建复选标记。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:14:41.077

如果 cb1Energy 是，`CheckBoxList`那么您将使用：

```
 Dim li_chkbox = cblEnergy.Items.FindByValue("1")
  If (li_chkbox != null) then
     li_chkbox.Selected = track_usage
  End if 
```

# haskell - 递归函数将数字中的所有数字相加

> ID：10626445
> 
> 赞同：0
> 
> 时间：2012-05-16T20:46:25.963
> 
> 标签：haskell

我正在开发一个函数，它将一个数字中的所有数字相加，并继续将数字相加，直到数字减少到一个数字。例如，`99999999999`应该像这样评估数字：

```
99999999999
9+9+9+9+9+9+9+9+9+9+9
99
9+9
18
1+8
9 
```

但是，当我尝试`99999999999`通过我的函数运行数字时，它会返回`7`，即使它应该返回`9`。我已经多次检查了我的代码，但我想不出任何原因。

这是代码：

```
sumdr x
  | x <= 9 = x
  | otherwise = sumdr $ addupnums x

addupnums y = foldl (+) 0 $ map read1 $ show y

read1 :: Char -> Int
read1 '1' = 1
read1 '2' = 2
read1 '3' = 3
read1 '4' = 4
read1 '5' = 5
read1 '6' = 6
read1 '7' = 7
read1 '8' = 8
read1 '9' = 9
read1 '0' = 0
read1 x = error "needs to be a number" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T20:53:04.870

这在 64 位系统上对我来说很好。如果您使用的是 32 位系统，则 99999999999 不适合 Int，因此它会溢出并给您错误的结果。

如果将类型更改为整数，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:19:15.390

**[编辑]**

如果你只对重复申请的结果感兴趣，直到剩下一个数字，当然 Daniel Fischer 是对的，你应该使用他的解决方案。如果不可能有这样的捷径，如何处理这类问题可能仍然具有指导意义，因此我留下了我的旧答案。

**[/编辑]**

你得到了答案，但有两个评论：

*   使用[Hoogle](http://www.haskell.org/hoogle/?hoogle)，您可以在 中找到函数`digitToInt`，`Data.Char`这是您的`read1`
*   将数字转换为字符串只是为了获取数字似乎很浪费，当更多的数学运算也会起作用时，例如

.

```
f 0 = 0
f y = (y `mod` 10) + f (y `div` 10) 
```

或略显神秘的版本：

```
f = sum . map (`mod` 10) . takeWhile (> 0) . iterate (`div` 10) 
```

如果你真的关心速度，你可以使用`divMod`，如果累加器更快，你可以尝试，例如

```
f n = go n 0 where
  go 0 s = s
  go k s = go k' (s+s') where (k',s') = k `divMod` 10 
```

# ruby-on-rails - 让 Xapian 在 Ruby on Rails 应用程序中运行：无法检测到数据库类型

> ID：10626446
> 
> 赞同：0
> 
> 时间：2012-05-16T20:46:28.007
> 
> 标签：ruby-on-rails, ruby, database, xapian

我正在尝试在 Ubuntu 上运行 Ruby on Rails 应用程序。它利用 Xapian 来搜索文档。我已经按照 Gemfile 的指示安装了`xapian-full`Gem 版本，并创建了 Xapian 数据库可能所在的目录。`1.1.3.4``files/default`

```
database = Xapian::Database.new('files/default'); 
```

一旦代码运行到这一行，就会出现错误：

> **SearchController#index 中的 IOError**
> 
> DatabaseOpeningError：无法检测数据库类型

我需要初始化数据库还是什么？我查看了 Xapian Docs 并在互联网上搜索了错误消息，但这些都没有真正帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T01:47:56.937

（用 Xapian 的知识写这个答案，但不是 xapian-full Gem，所以一些细节可能是错误的 - 但错误来自 Xapian，所以我很确定这是正确的。）

错误是因为您创建了目录`files/default`。相反，只需创建`files`目录，并确保运行 Xapian 的进程有权写入该目录。

为什么 Xapian 会在此处引发错误？嗯，这是因为 Xapian 数据库只包含一个包含一组特殊文件的目录。当`Xapian::Database.new`被调用时，它会在创建新数据库之前检查数据库是否已经存在。在默认打开模式下，如果数据库目录已经存在，它假定它不应该用新数据库覆盖那里的任何内容，因此它会尝试打开现有数据库。因为目录只是空的，这会引发您看到的错误。

# css - 制作非常简单的 html 页面跨浏览器兼容 CSS

> ID：10626452
> 
> 赞同：0
> 
> 时间：2012-05-16T20:46:52.287
> 
> 标签：css, html, cross-browser, pre

我有这个“网站”-> [http://www.krlja-ustvari.hr](http://www.krlja-ustvari.hr)

它在 Google Chrome 中“完美”运行。“完美”是指内容始终为 100% 宽度和 100% 高度，溢出的内容被隐藏，换行符不带`<br />`标签。这正是我需要的。
但是，当我在 Firefox 或 Internet Explorer 中查看同一页面时（未检查其他浏览器），我可以看到垂直滚动条。这正是我不想要的。

我的问题很简单：如何让这个页面在所有浏览器中呈现，比如谷歌浏览器？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:56:41.800

我相信如果您将`min-height:100%`#content 上的声明更改为 just `height:100%`，您在其他浏览器中应该没问题。

当我在 Firebug 中为 FF 编辑您的页面时，这很有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:55:09.707

如果您根本不需要正文/文档中的滚动条

```
 <style type="text/css">

   body { overflow:hidden; }
   </style> 
```

# sql - SQL Server Ce 2005 数据转换失败基于表中的数据

> ID：10626453
> 
> 赞同：1
> 
> 时间：2012-05-16T20:46:53.450
> 
> 标签：sql, sql-server

我有一个像这样的查询：

```
 select * from table where varchar_column=Numeric_value 
```

在我运行插入脚本之前，这很好。插入新数据后，我必须使用此查询：

```
 select * from table where varchar_column='Numeric_value' 
```

插入某种数据会导致它不再隐式转换吗？插入脚本后，错误为 Data conversion failed OLEDB Status = 2 并且第二个查询确实有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:57:17.710

我不确定...第一个可能是将 varchar_column 隐式转换为数值。不是反过来。但是，当您将值插入该不再可转换的列时，它会失败。但是，对于第二个，您正在进行 varchar 到 varchar 的比较，并且一切正常。我猜。

# c# - (C#) - 将Split之间的每个单词存储在一个数组中

> ID：10626455
> 
> 赞同：3
> 
> 时间：2012-05-16T20:47:04.897
> 
> 标签：c#, arrays, split

可以说这是文件中的文本。它会删除冒号，并将每个单词放入数组中它自己的字符串中。例如：

```
exampleArray[0] = 'hello' 
exampleArray[1] = 'my'
exampleArray[2] = 'name'
exampleArray[3] = 'is'
exampleArray[4] = 'lavi' 
```

这是我的代码：

```
private void button2_Click(object sender, EventArgs e)
    {
        listBox1.Items.Clear();
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Filter = "Text Files|*.txt";
        DialogResult result = ofd.ShowDialog();

        if(result == DialogResult.OK)
        {
            StreamReader textfile = new StreamReader(ofd.FileName); 

            string s = textfile.ReadToEnd();

            string[] split = s.Split(':', '\n');

            foreach (string word in split)
                textBox1.Text = word[0].ToString();
                //listBox1.Items.Add(word);

            ofd.Dispose();
        } 
```

谢谢！

**编辑：**我的意思是如何制作它，以便将每个单词存储在一个数组中，以便以后可以使用 [0]、[1]、[2] 等访问它？如果拆分自动执行此操作，我如何访问每个单词？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T20:55:14.753

它会自动执行（即 String.split）

```
String str = "hello:my:name:is:lavi";
var words = str.Split(":");
Console.WriteLine(words[1]); //This prints out 'my';
for (int i=0;i<words.Length;i++) {  //This will print out each word on a separate line
    Console.WriteLine(words[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:05:57.790

为了回应“我的意思是我要怎么做才能让每个单词都存储在一个数组中，这样我以后就可以使用 [0]、[1]、[2] 等访问它？如果 Split 自动执行此操作，我如何访问每个单词？”

var myWord = split[0...n]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:08:02.543

只需使用这个：

```
foreach (string word in split) textBox1.Text = word.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-31T05:58:16.260

`string[] exampleArray = str.Split(":");`

# asp.net - DetailsView 不适用于可选择的 GridView

> ID：10626465
> 
> 赞同：0
> 
> 时间：2012-05-16T20:47:34.897
> 
> 标签：asp.net

我的 DetailsView 始终为空白。我已经在 QueryBuilder 中测试了两个数据源，它们都返回值。我怀疑 PoweredEquipDetails 中的参数值分配有问题，它们被设置为 GridView1 中的 SelectedValue，但我不知道为什么它不起作用。

```
<body>
 <form id="form1" runat="server">
  <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataSourceID="PoweredEquipHeader" DataKeyNames="Model,Serial">
    <Columns>
        <asp:CommandField ShowSelectButton="True" />
        <asp:BoundField DataField="Model" HeaderText="Model" ReadOnly="True" 
            SortExpression="Model" />
        <asp:BoundField DataField="Serial" HeaderText="Serial" ReadOnly="True" 
            SortExpression="Serial" />
    </Columns>
    <SelectedRowStyle BackColor="#FF6600" />
  </asp:GridView>
  <asp:SqlDataSource ID="PoweredEquipHeader" runat="server" 
    ConnectionString="<%$ ConnectionStrings:CPECConnectionString %>" 
    SelectCommand="Select t1.Model, t1.Serial From Powered_Equip t1 Where TechID = @TechID And Store = @Store">
    <SelectParameters>
        <asp:QueryStringParameter DefaultValue="TECH01" Name="TechID" 
            QueryStringField="Tech" />
            <asp:QueryStringParameter DefaultValue="0000" Name="Store" 
            QueryStringField="Store" />
    </SelectParameters>
  </asp:SqlDataSource>
  <asp:SqlDataSource ID="PoweredEquipDetail" runat="server" 
    ConnectionString="<%$ ConnectionStrings:CPECConnectionString %>" 
    SelectCommand="SELECT t1.Serial, t1.Model, t1.Status, t1.[Trailer VIN], t2.Tag, t2.State, t2.ExpMonth, t2.ExpYear FROM Powered_Equip AS t1 INNER JOIN Trailers AS t2 ON t1.[Trailer VIN] = t2.VIN WHERE (t1.Serial = @Serial) AND (t1.Model = @Model)">
    <SelectParameters>
        <asp:ControlParameter ControlID="GridView1" Name="Serial" 
            PropertyName="SelectedValue" />
        <asp:ControlParameter ControlID="GridView1" Name="Model" 
            PropertyName="SelectedValue" />
    </SelectParameters>
</asp:SqlDataSource>
<asp:DetailsView ID="DetailsView1" runat="server"
    DataSourceID="PoweredEquipDetail" DataKeyNames="Serial,Model">
    <Fields>
        <asp:BoundField DataField="Serial" HeaderText="Serial" ReadOnly="True" 
            SortExpression="Serial" />
        <asp:BoundField DataField="Model" HeaderText="Model" 
            ReadOnly="True" SortExpression="Model" />
        <asp:BoundField DataField="Status" HeaderText="Status" ReadOnly="True" 
            SortExpression="Status" />
        <asp:BoundField DataField="Trailer VIN" HeaderText="Trailer VIN" ReadOnly="True" 
            SortExpression="Trailer VIN" />
        <asp:BoundField DataField="Tag" HeaderText="Tag" ReadOnly="True" 
            SortExpression="Tag" />
        <asp:BoundField DataField="State" HeaderText="State" ReadOnly="True" 
            SortExpression="State" />
        <asp:BoundField DataField="ExpMonth" HeaderText="ExpMonth" ReadOnly="True" 
            SortExpression="ExpMonth" />
        <asp:BoundField DataField="ExpYear" HeaderText="ExpYear" ReadOnly="True" 
            SortExpression="ExpYear" />
    </Fields>
</asp:DetailsView>
</form> 
```

编辑：所以我相信发生的事情是DetailsView参数分配中GridView的SelectedValue始终是Model，而不是我的DataValueKeys中指定的Model和Serial。如果设备项具有相同值的型号和序列号（即型号 118 序列号 118），则会填充详细信息视图。但是在模型和序列不同的任何情况下（几乎所有其他情况），DetailsView 都是空白的。那么如何获得两个不同的 SelectedValues 来为两个不同的 ControlParameters 赋值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:10:44.153

改变了

```
<SelectParameters>
    <asp:ControlParameter ControlID="GridView1" Name="Serial" 
        PropertyName="SelectedValue" />
    <asp:ControlParameter ControlID="GridView1" Name="Model" 
        PropertyName="SelectedValue" />
</SelectParameters> 
```

到

```
<SelectParameters>
        <asp:ControlParameter ControlID="GridView1" Name="Serial" 
            PropertyName="SelectedDataKey.Values[Serial]" />
        <asp:ControlParameter ControlID="GridView1" Name="Model" 
            PropertyName="SelectedValue" />
    </SelectParameters> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T07:37:25.850

```
int n = int.Parse(GridView1.SelectedValue.ToString());
    TextBox4.Text = n.ToString();

    con = new SqlConnection(@"Data Source=LAB-III-136;Initial Catalog=student;Integrated Security=True");
    con.Open();
    da = new SqlDataAdapter("select * from student1 where id='" + TextBox4.Text  + " '", con);
    ds = new DataSet();
    da.Fill(ds, "temp");

    DetailsView2.DataSource = ds;
    DetailsView2.DataBind(); 
```

# java - JUnit 奇怪的断言“null”问题

> ID：10626468
> 
> 赞同：0
> 
> 时间：2012-05-16T20:47:44.797
> 
> 标签：java, junit

我正在使用以下导入语句：

```
import static org.junit.Assert.fail; 
```

在我的测试方法中：

```
public class WeirdTest {
    @Test
    public void thisIsWeird() {
        System.out.println("1");
        System.out.println("2");
        fail();
        System.out.println("3");
    }
} 
```

在控制台输出中，我看到：

> 1
> 
> 2
> 
> 无效的

我没有看到“3”字样！相反，单元测试*通过*（不打印“3”）！！这里发生了什么？！？我在 Eclipse 中并且在我的类路径上有 JUnit（否则它会给我在 import 语句或`@Test`注释上的错误）。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:01:09.450

也许您正在使用有错误的版本。你用的是什么junit版本？在 4.4 版中它运行良好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:26:28.323

这绝对是 Eclipse 的问题，或者您在类中有一个失败方法。我在 IDEA 中运行了它，但正如预期的那样失败了。由于某种原因，Eclipse 跑步者没有发现失败。什么版本的 Eclipse？

# javascript - 确定字符之间的距离

> ID：10626474
> 
> 赞同：1
> 
> 时间：2012-05-16T20:48:32.747
> 
> 标签：javascript, regex

如果字符 'a' 和 'b' 在字符串中的任何位置被恰好 3 个位置分隔，则返回 true。

你能指出我正确的方向吗，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:53:59.397

对于“*一个字符串包含两个字符，' `a`'和' `b`'，它们之间有3个字符*”，这样可以做到：

```
/a[\S\s]{3}b/.test(str) 
```

where`[\S\s]`真正匹配所有内容，您也可以使用`.`。看到[这个问题](https://stackoverflow.com/q/6168826/1048572)的区别。

如果您想在两个方向上匹配外观，您将使用`/(a.{3}b|b.{3}a)/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:05:42.900

我会使用 JavaScript 的本地`match()`方法，它不仅会告诉您是否找到了模式，还会返回匹配的子字符串。

```
var str = "afoeahooawieb00183b123Axo",
    fnd = false;

if ( fnd = str.match(/a.{3}b|b.{3}a/gi) ) {
  console.log( fnd );
} 
```

哪个输出：

```
["awieb", "b123A"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:52:52.560

我建议以下内容：

```
return (Math.abs(str.indexOf('a') - str.indexOf('b')) == 3) 
```

这是一个实现演示：

```
function distanceBetween(el, a, b, d) {
    if (!el || !a || !b || !d) {
        return false;
    }
    else {
        var str = el.firstChild.nodeValue;
        return (Math.abs(str.indexOf(a) - str.indexOf(b)) == d)
    }
}

var lis = document.getElementsByTagName('li'),
    a = 'a',
    b = 'b',
    d = 3;

for (var i = 0, len = lis.length; i < len; i++) {
    if (distanceBetween(lis[i], a, b, d)) {
        lis[i].style.backgroundColor = '#f90';
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/92Hxp/)。

如前所述，在下面的评论中，如果第一个匹配的字母有多个示例，则此解决方案将失败。请参阅 Jonathan Sampson 提供的演示：http: [//jsfiddle.net/92Hxp/1/](http://jsfiddle.net/92Hxp/1/)（第三个字符串`acdae0rbe`, 应该仍然匹配）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T20:53:11.173

这应该这样做：

```
var string = 'a123b';  // String you're testing.
/a.{3}b/.test(string); 
```

添加您可能需要的任何 RegEx 修饰符（即`i`）。

# actionscript-3 - 多个鼠标事件 as3

> ID：10626475
> 
> 赞同：0
> 
> 时间：2012-05-16T20:48:37.427
> 
> 标签：actionscript-3, mouseevent

我有一个正在监听鼠标悬停和移出事件的 MovieClip。在这个影片剪辑中，我想在鼠标悬停时显示一个按钮。

问题是影片剪辑在移动到按钮区域时会出现鼠标移出事件。我希望他只有在居住在他的矩形区域时才能获得鼠标退出事件。

我找到了一种解决方案：进行鼠标位置计算并将它们与我的电影剪辑位置进行比较，以检测我是否应该处理或忽略该事件。

但是还有更简单、更 Adob​​e 的解决方案吗？

**编辑**：内部按钮也需要接收鼠标事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:55:14.933

ROLL_OVER 和 ROLL_OUT 事件应该可以工作（使用它们而不是 MOUSE_OVER 和 MOUSE_OUT）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:08:05.303

设置`mouseChildren = false`为您`MovieClip`或使用`ROLL_OVER`，[这里](http://www.wastedpotential.com/flash-as3-target-vs-currenttarget/)`ROLL_OUT`有一篇关于这个主题的好文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T20:51:42.003

内部按钮是否也需要接收 MouseEvents？如果没有，只需设置它

```
button.mouseEnabled = false; 
```

或者您可以设置父影片剪辑的

```
movieclip.mouseChildren = false; 
```

# c++ - 加载DLL和调用父类的子dll

> ID：10626477
> 
> 赞同：0
> 
> 时间：2012-05-16T20:48:40.980
> 
> 标签：c++, dll, com, activex, npapi

我有一个加载子 dll（NPAPI 插件）的 ActiveX dll。我的子插件创建了多个线程，它们需要与网页进行通信。在我的 ActiveX（父 dll）中，我有连接点来触发 javascript 事件以提供更新。我遇到的问题是我不知道孩子如何调用父 DLL。

我尝试过的： 1：将函数指针传递给不在类中的函数的子 dll，并使用作为指向 ActiveX 类（this）的指针的全局变量，但使用 E_UNEXPECTED 调用时连接点失败

2：给子dll传递一个指向我的类函数的指针，得到同样的结果。

我还在同时学习 C++ 和 COM，对不起我的无知。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:03:19.903

COM 有一些设置方法，以便您可以从其他线程调用 COM 方法，但最简单的方法是让所有调用返回到主线程上的 activex 控件。一种方法是创建一个消息窗口并向其发布一个窗口消息，其中 LPARAM 是指向包含进行调用所需参数的数据结构的指针；您创建结构并填写它，然后在您的 WINPROC 进行调用后发布消息并释放内存。

FireBreath 使用这种方法并且效果很好。说到这，您是否考虑过将您的 NPAPI 插件实现为[FireBreath](http://www.firebreath.org)插件，以便它可以在 activex 和 npapi 中工作？

以下是一些可能有帮助的代码示例：

*   WinMessageWindow ( [.cpp](https://github.com/firebreath/FireBreath/blob/master/src/PluginCore/Win/WinMessageWindow.cpp) , [.h](https://github.com/firebreath/FireBreath/blob/master/src/PluginCore/Win/WinMessageWindow.h) ) - 这是 FireBreath 用于创建消息窗口的类；特别注意用作异步（通常是跨线程）函数调用的一部分的 DefaultWinProc
*   NpapiBrowserHostAsyncWin ( [.cpp](https://github.com/firebreath/FireBreath/blob/master/src/NpapiCore/Win/NpapiBrowserHostAsyncWin.cpp) , [.h](https://github.com/firebreath/FireBreath/blob/master/src/NpapiCore/Win/NpapiBrowserHostAsyncWin.h) ) - 这是一个在某些浏览器上使用的类，用于 npapi 插件解决 NPN_PluginThreadAsyncCall 不工作的问题。它利用 WinMessageWindow 在 _scheduleAsyncCall 中进行跨线程调用

希望有帮助

# mysql - 简单的 MySQL 查询 - 更改表格式

> ID：10626478
> 
> 赞同：1
> 
> 时间：2012-05-16T20:48:44.460
> 
> 标签：mysql, sql

我很确定这是一个相当简单的答案，但答案完全让我忘记了。

我有一个当前格式如下的数据库表：

```
event_id | elem_id | value
   1          1      Value 1
   1          2      Value 2
   2          1      Value 3
   2          2      Value 4 
```

event_id 和 elem_id 都是未定数，有无限可能。

例如，我将如何根据 event_id 1 查询它以获取要格式化的数据：

```
event_id |    1    |     2
   1       Value 1    Value 2 
```

知道 elem_id 是一个 >= n 的数字，所以可能有 50 个 elem_id 但我仍然需要该格式的数据。

就像我说的那样，我一生都无法弄清楚以这种方式组装它的查询。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:55:37.937

尝试以下操作：

```
SELECT 
    `event_id`, 
    (SELECT t2.`value` FROM table t2 WHERE t2.`event_id` = t1.`event_id` AND t2.`elem_id` = 1), 
    (SELECT t3.`value` FROM table t3 WHERE t3.`event_id` = t1.`event_id` AND t3.`elem_id` = 2) 
FROM `table` t1 GROUP BY `event_id`; 
```

您也可以使用不同的方式，并在两个单元格中以逗号分隔格式获取 elem_ids 和值

```
SELECT `event_id`, GROUP_CONCAT(`elem_id`), GROUP_CONCAT(`value`) FROM `table` GROUP BY `event_id`; 
```

您可以使用以下语法更改分隔符：`GROUP_CONCAT(field SEPARATOR '::')`

# ember.js - 在深度嵌套的视图中获取对根容器视图的引用的简单方法

> ID：10626481
> 
> 赞同：2
> 
> 时间：2012-05-16T20:49:05.280
> 
> 标签：ember.js

有没有一种简单的方法可以从 Ember.ContainerView 中深度嵌套的子视图访问根视图。我想绑定 root 和 subsubchild 的属性：

```
Ember.ContainerView.create {

   childViews: ['child1']

   value: null

   child1: Ember.ContainerView.create {

       childViews: ['subchild1']

       subchild1 : Ember.View.create {

            valueBinding: "parentView.parentView.value"

       }
   }
} 
```

我想将根中的值与 subchild1 中的值绑定，但我发现调用

```
parentView.parentView.parentView.property 
```

不是很优雅。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T22:39:32.413

您可以使用该`nearestWithProperty`方法。请参阅以下示例。

```
Ember.ContainerView.create({
   childViews: ['child1'],
   value: null,
   isRootView: true,

   child1: Ember.ContainerView.extend({
       childViews: ['subchild1'],

       subchild1 : Ember.View.extend({
           rootView: Ember.computed(function() {
               return this.nearestWithProperty('isRootView');
           }).property().cacheable(),
           valueBinding: "rootView.value"
       })
   })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:26:51.010

API 文档中没有`rootView`提到任何属性。如果`value`在 中定义`child1`怎么办？您仍然会遇到同样的问题，即必须引用`parentView.value`. `value`实际上应该在控制器中定义，并且您的 subchild1 valueBinding 应该绑定到控制器中的属性。

# jquery - 带有滚动条的父 div 内相对于 div 的鼠标坐标

> ID：10626486
> 
> 赞同：1
> 
> 时间：2012-05-16T20:49:41.047
> 
> 标签：jquery, css

我在父 Div 中有两个 Div（溢出：自动）这两个 Div 很大，所以我得到父级的滚动，问题是当我向上和向下滚动时，我得到内部 Div 的可变鼠标坐标（onclick 事件）（有时甚至是负值）这是我计算鼠标相对值的方法

```
jQuery(document).ready(function(){
$("#MnDiv").click(function(e){
var clientXRel = e.clientX - this.offsetLeft;
var clientYRel = e.clientY - this.offsetTop;
var clientCoords = "( " + e.clientX + ", " + e.clientY + " )";
var clientCoordsRel = "( " + clientXRel  + ", " + clientYRel  + " )";
$("span:first").text("( e.clientX, e.clientY ) : " + clientCoords);
$("span:last").text("( clientXRel  , clientYRel  ) : " + clientCoordsRel
+      " ( offsetLeft  , offsetTop  ) : " + this.offsetLeft+ ", " this.offsetTop); 
}); 
```

所以问题是无论滚动在哪里，如何获得相对于内部 Div 的正确坐标？完整的示例（jsfiddle）[在这里](http://jsfiddle.net/alamin84/PNLU3/embedded/result/)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:12:58.170

使用 jQuery 事件变量`.pageX`和`.pageY`元素偏移函数`.offset().top`和`.offset().left`

所以它看起来像

```
var clientXRel = e.pageX- $(this).offset().left;
var clientYRel = e.pageY - $(this).offset().top; 
```

[http://jsfiddle.net/PNLU3/3/](http://jsfiddle.net/PNLU3/3/)

# symfony1 - Symfony 中 sfWidgetFormDoctrineChoice 的特殊字符问题

> ID：10626488
> 
> 赞同：0
> 
> 时间：2012-05-16T20:49:52.363
> 
> 标签：symfony1, widget, special-characters, dropdownchoice

我正在使用 sfWidgetFormDoctrineChoice 从 MySql 数据库中获取语言列表。该列表使用西班牙语。所有具有特殊字符的语言，例如 for ex。Árabe 看起来不错（它有波浪号），但我使用小部件得到了错误的表示（A！rabe）。我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:50:42.010

这可能是一个编码问题：验证在您的数据库中注册的语言列表与您显示小部件的页面具有相同的编码。

但是你为什么不使用[sfWidgetFormI18nChoiceLanguage 小部件](http://www.symfony-project.org/api/1_4/sfWidgetFormI18nChoiceLanguage)呢？

# c# - 用于 WebMatrix（网页）的 Linq to SQL

> ID：10626492
> 
> 赞同：2
> 
> 时间：2012-05-16T20:50:17.210
> 
> 标签：c#, linq, linq-to-sql, razor, webmatrix

我想知道是否可以在基于 webmatrix 的站点（C#/Razor 等）中使用 Linq to SQL。我喜欢数据库搜索之类的东西，如果我可以为此使用 Linq to SQL 那就太棒了 - 或者至少返回行，作为数据集或其他东西，然后 linq 在上面。这对于基于 WebMatrix 的网站是否可行？

我在 WebMatrix 的文档中没有看到任何关于 Linq 的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T16:05:33.733

您可以将 Linq To SQL 或实体框架与网页站点一起使用。我建议使用 Visual Studio 2010 SP1 或 Visual Web Developer 2010 SP1，因为它们为 Linq To SQL 和实体框架提供了工具支持。我写了几篇关于 Entity Framework with Web Pages 的文章：

[http://www.mikesdotnetting.com/Article/185/Building-A-Razor-Web-Pages-Site-With-Database-First-And-Entity-Framework](http://www.mikesdotnetting.com/Article/185/Building-A-Razor-Web-Pages-Site-With-Database-First-And-Entity-Framework)

[http://www.mikesdotnetting.com/Article/182/Entity-Framework-Code-First-Development-With-WebMatrix](http://www.mikesdotnetting.com/Article/182/Entity-Framework-Code-First-Development-With-WebMatrix)

Entity Framework 是 Microsoft 的 ORM 工具，受到了所有开发人员的关注。虽然 LINQ to SQL 并没有完全“死”，但它并没有得到那么多的喜爱。在我看来，在这两者中，EF 是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:55:49.630

Webmatrix 提供了它自己的集成数据工具，这些工具不是基于 Linq 的。

据我所知，没有什么能阻止你使用 Linq，但你必须避开内置工具才能这样做。例如，您不会找到使用 L2S 或 EF 的数据设计器。不过，您可以先使用 Code。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T18:50:00.490

只需在顶部添加 linq 即可：

```
@using System.Linq; 
```

之后您的查询：

```
var selectedDates = db.Query("Select CompleteDate, DueDate FROM Records WHERE Id=@0", ID);

var Date = selectedDates.Select(s => s.CompleteDate).ToArray(); 
```

这一切=D享受

# iphone - iOS 4 和 5 兼容性：提示用户更新 iOS

> ID：10626493
> 
> 赞同：1
> 
> 时间：2012-05-16T20:50:33.200
> 
> 标签：iphone, ios, ipad, compatibility

瘦子：我的应用在 iOS 5.x 中运行良好。但是，某些功能在 4.x 中效果不佳。5.x 的更新解决了所有问题。

选项 1 - 优秀的程序员：找出我的应用程序在这些特定功能中做了什么，以及为什么它们在 4.x 中不起作用。

选项 2 - 懒惰的程序员：检测用户正在运行的 iOS 版本（我已经知道不建议这样做）并建议他们升级如果它较旧。更进一步，通过使用 iPhone URL（例如：iossettings://）将他们引导至设置/软件更新。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T20:56:20.913

这个问题可能不太适合 StackOverflow，但我会提供我的想法。支持平台或不支持平台。如果您不支持 iOS 4，则不支持它并将应用程序编译为需要 iOS5。如果您确实支持它，请修复错误。不支持但唠叨用户。就像你说的那样懒惰。

许多应用程序已经迁移到仅适用于 iOS5 的版本。除非你的市场不寻常并且特别有可能拥有 iOS4，否则我会放弃对 iOS4 的支持并继续前进。您浪费在支持它的时间不会转化为足够的销售额来覆盖大多数应用程序 IMO。你在 iOS4 上得到的差评将超过你可能获得的少量额外销售额。选择观众并取悦他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:53:02.140

大多数人都在运行 iOS 4，因为他们的设备不支持 iOS 5。选项 1 更有意义。或者根本不支持 iOS 4。

# rtf - 寻找某种 RTF 查看器

> ID：10626497
> 
> 赞同：0
> 
> 时间：2012-05-16T20:50:44.833
> 
> 标签：rtf

我想对 RTF 规范进行一些调查，看看当我说放一个项目符号列表时会发生什么，当我按下 Enter 时会发生什么等等......所以我想知道是否有一个简单的工具可以在其中的一部分只需开始输入格式化文本和其中的另一部分，它就会向我显示我正在输入的内容的 rtf 版本......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:56:16.463

我认为你可以很容易地用 C# 编写它。只需显示一个带有两个文本框的表单：左侧是常规的[`TextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)（可能[`MultiLine`](http://msdn.microsoft.com/en-us/library/12w624ff.aspx)设置为`true`），右侧是[`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx). 然后，只需处理[`TextChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.textchanged.aspx)任一框中的事件，并使用新编辑的文本更新对面的框。

# c++ - WTL 和 CContainedWindow 导致访问冲突

> ID：10626499
> 
> 赞同：2
> 
> 时间：2012-05-16T20:50:48.553
> 
> 标签：c++, atl, wtl

我正在尝试使用以下代码在对话框中对进度控件进行子类化：

```
ATL::CContainedWindowT<WTL::CProgressBarCtrl> progress;
// ...
progress.SubclassWindow(GetDlgItem(IDC_PROGRESS)); 
```

那里一切都好。现在，如果我尝试这样做：

```
progress.SetRange(0, 100); 
```

`SendMessage`我在一个简单的 WTL`SetRange()`实现中遇到了访问冲突异常。我一直在上下搜索，我所能找到的只是这可能是“[使用旧 ATL 组件的应用程序可能会与 DEP 发生冲突](http://support.microsoft.com/kb/948468)”中提到的一些“thunking”问题，这不应该真正适用于我，因为我使用的是最新的 ATL 和 WTL （Visual Studio 2010 和[WTL 8.1](http://sourceforge.net/projects/wtl/files/WTL%208.1/WTL%208.1.11324/)）。即使我使用 WTL 8.0，我也会遇到同样的问题。

由于 HWND 有效，子类化完成。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:02:14.233

WTL::CProgressBarCtrl m_Progress; <~ 使用它来附加进度条，而不是 CContainedWindow。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:08:56.123

如果您子类化一个窗口，那么您应该为这个子类化控件实现一个消息映射。这包括将您的成员变量连接到构造函数中的消息映射，添加[`ALT_MSG_MAP`](http://msdn.microsoft.com/en-us/library/8d3ws24d%28v=vs.100%29.aspx)到类消息映射。你在做这个吗？我想你没有。

你首先需要这个吗？要仅发送不需要子类化的消息，只需将 real 附加`HWND`到`CProgressBarCtrl`实例：

```
WTL::CProgressBarCtrl m_ProgressBar;
// ...
m_ProgressBar = GetDlgItem(IDC_PROGRESS);
m_ProgressBar.SetRange(... 
```

> 由于 HWND 有效，子类化已完成

不，这不好。你钩住了窗口，但你没有提供你的 WindowProc。因此，问题。

# restkit - RKObjectManager:loadObjectsAtResourcePath 没有活动：

> ID：10626502
> 
> 赞同：0
> 
> 时间：2012-05-16T20:50:59.520
> 
> 标签：restkit

这是我用来从后端加载用户对象的代码：

```
[RKObjectManager managerWithBaseURL:[[NSURL alloc] initWithString:@"http://localhost:8080"]];
RKObjectMapping *userMapping = [RKObjectMapping mappingForClass:[User class]];
[userMapping mapKeyPath:@"id" toAttribute:@"id"];
[userMapping mapKeyPath:@"userName" toAttribute:@"userName"];
[userMapping mapKeyPath:@"firstName" toAttribute:@"firstName"];
[userMapping mapKeyPath:@"lastName" toAttribute:@"lastName"];
[userMapping mapKeyPath:@"email" toAttribute:@"email"];
[userMapping mapKeyPath:@"facebookId" toAttribute:@"facebookId"];
[userMapping mapKeyPath:@"twitterId" toAttribute:@"twitterId"];

[[RKObjectManager sharedManager].mappingProvider setObjectMapping:userMapping forResourcePathPattern:@"/users"];    
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/users" delegate:self]; 
```

此代码运行没有问题，但没有请求到达服务器，也没有在客户端调用委托方法。

难道我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:31:27.177

共享管理器未在您的代码中初始化。将您发布的代码中的第一行替换为：

```
[RKObjectManager setSharedManager:[RKObjectManager managerWithBaseURL:[[NSURL alloc] initWithString:@"http://localhost:8080"]]]; 
```

# javascript - 通过滚动页面上的任意位置来滚动溢出的 div

> ID：10626503
> 
> 赞同：5
> 
> 时间：2012-05-16T20:51:02.453
> 
> 标签：javascript, css, scroll, scrollbar, overflow

我想通过滚动页面上的任何位置来触发具有溢出内容的 div 滚动，而不仅仅是通过移动鼠标并在 div 内单击。另外，我想隐藏 div 的滚动条，以便只有页面的滚动条可见。

该解决方案最好是基于 CSS 的，但也可以使用 JS 解决方案。

这是我的 jsfiddle 演示了这个问题：http: [//jsfiddle.net/trpeters1/RMZsX/8/](http://jsfiddle.net/trpeters1/RMZsX/8/)

我会在这里复制代码，但在那里我放了一堆填充文本来触发滚动条。

不过，供您参考，我想在滚动页面时滚动的内部 div 的名称有一个`id="scrollMeToo"`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:26:08.767

```
var curScroll = 0;

$(window).bind('mousewheel DOMMouseScroll', function(e){
    var evt = window.event || e;
    var delta = evt.detail? evt.detail*(-120) : evt.wheelDelta;
    if(delta < 0) {
        //scroll down
        curScroll += 10;
    }
    else {
        //scroll up
        curScroll -= 10;
    }
    $('#scrollMeToo').scrollTop(curScroll);
    return true;
}); 
```

```
#scrollMeToo {
    height: 200px;
    width:150px;
    overflow: auto;
    position: relative;
    overflow-y: hidden;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
             <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
             <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
             <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
<hr>

<div id="scrollMeToo">
            <h4 id="fat">@fat</h4>
            <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
            <h4 id="mdo">@mdo</h4>
            <p>
            Veniam marfa mustache skateboard, adipisicing fugiat velit pitchfork beard. Freegan beard aliqua cupidatat mcsweeney's vero. Cupidatat four loko nisi, ea helvetica nulla carles. Tattooed cosby sweater food truck, mcsweeney's quis non freegan vinyl. Lo-fi wes anderson +1 sartorial. Carles non aesthetic exercitation quis gentrify. Brooklyn adipisicing craft beer vice keytar deserunt.
            </p>
            <h4 id="one">one</h4>
            <p>
            Occaecat commodo aliqua delectus. Fap craft beer deserunt skateboard ea. Lomo bicycle rights adipisicing banh mi, velit ea sunt next level locavore single-origin coffee in magna veniam. High life id vinyl, echo park consequat quis aliquip banh mi pitchfork. Vero VHS est adipisicing. Consectetur nisi DIY minim messenger bag. Cred ex in, sustainable delectus consectetur fanny pack iphone.
            </p>
            <h4 id="two">two</h4>
            <p>
            In incididunt echo park, officia deserunt mcsweeney's proident master cleanse thundercats sapiente veniam. Excepteur VHS elit, proident shoreditch +1 biodiesel laborum craft beer. Single-origin coffee wayfarers irure four loko, cupidatat terry richardson master cleanse. Assumenda you probably haven't heard of them art party fanny pack, tattooed nulla cardigan tempor ad. Proident wolf nesciunt sartorial keffiyeh eu banh mi sustainable. Elit wolf voluptate, lo-fi ea portland before they sold out four loko. Locavore enim nostrud mlkshk brooklyn nesciunt.
            </p>
            <h4 id="three">three</h4>
            <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
            <p>Keytar twee blog, culpa messenger bag marfa whatever delectus food truck. Sapiente synth id assumenda. Locavore sed helvetica cliche irony, thundercats you probably haven't heard of them consequat hoodie gluten-free lo-fi fap aliquip. Labore elit placeat before they sold out, terry richardson proident brunch nesciunt quis cosby sweater pariatur keffiyeh ut helvetica artisan. Cardigan craft beer seitan readymade velit. VHS chambray laboris tempor veniam. Anim mollit minim commodo ullamco thundercats.
            </p>
</div>
```

这应该可以满足您的需要，如果您不希望文档滚动，只需`return true;`将`return false;`.

非jQuery方法：

```
var curScroll = 0;

function controlScroll (e) {
    var evt = window.event || e;
    var delta = evt.detail? evt.detail*(-120) : evt.wheelDelta;
    if(delta < 0) {
        //scroll down
        curScroll += 10;
    }
    else {
        //scroll up
        curScroll -= 10;
    }
    document.getElementById('scrollMeToo').scrollTop = curScroll;
}; 

if (document.attachEvent) {//if IE (and Opera depending on user setting)
    document.attachEvent("onmousewheel", controlScroll)

}
else if (document.addEventListener) { //WC3 browsers
    document.addEventListener("mousewheel", controlScroll, false)
}
```

```
#scrollMeToo {
    height: 200px;
    width:150px;
    overflow: auto;
    position: relative;
    overflow-y: hidden;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
             <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
             <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
             <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
<hr>

<div id="scrollMeToo">
            <h4 id="fat">@fat</h4>
            <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
            <h4 id="mdo">@mdo</h4>
            <p>
            Veniam marfa mustache skateboard, adipisicing fugiat velit pitchfork beard. Freegan beard aliqua cupidatat mcsweeney's vero. Cupidatat four loko nisi, ea helvetica nulla carles. Tattooed cosby sweater food truck, mcsweeney's quis non freegan vinyl. Lo-fi wes anderson +1 sartorial. Carles non aesthetic exercitation quis gentrify. Brooklyn adipisicing craft beer vice keytar deserunt.
            </p>
            <h4 id="one">one</h4>
            <p>
            Occaecat commodo aliqua delectus. Fap craft beer deserunt skateboard ea. Lomo bicycle rights adipisicing banh mi, velit ea sunt next level locavore single-origin coffee in magna veniam. High life id vinyl, echo park consequat quis aliquip banh mi pitchfork. Vero VHS est adipisicing. Consectetur nisi DIY minim messenger bag. Cred ex in, sustainable delectus consectetur fanny pack iphone.
            </p>
            <h4 id="two">two</h4>
            <p>
            In incididunt echo park, officia deserunt mcsweeney's proident master cleanse thundercats sapiente veniam. Excepteur VHS elit, proident shoreditch +1 biodiesel laborum craft beer. Single-origin coffee wayfarers irure four loko, cupidatat terry richardson master cleanse. Assumenda you probably haven't heard of them art party fanny pack, tattooed nulla cardigan tempor ad. Proident wolf nesciunt sartorial keffiyeh eu banh mi sustainable. Elit wolf voluptate, lo-fi ea portland before they sold out four loko. Locavore enim nostrud mlkshk brooklyn nesciunt.
            </p>
            <h4 id="three">three</h4>
            <p>
            Ad leggings keytar, brunch id art party dolor labore. Pitchfork yr enim lo-fi before they sold out qui. Tumblr farm-to-table bicycle rights whatever. Anim keffiyeh carles cardigan. Velit seitan mcsweeney's photo booth 3 wolf moon irure. Cosby sweater lomo jean shorts, williamsburg hoodie minim qui you probably haven't heard of them et cardigan trust fund culpa biodiesel wes anderson aesthetic. Nihil tattooed accusamus, cred irony biodiesel keffiyeh artisan ullamco consequat.
            </p>
            <p>Keytar twee blog, culpa messenger bag marfa whatever delectus food truck. Sapiente synth id assumenda. Locavore sed helvetica cliche irony, thundercats you probably haven't heard of them consequat hoodie gluten-free lo-fi fap aliquip. Labore elit placeat before they sold out, terry richardson proident brunch nesciunt quis cosby sweater pariatur keffiyeh ut helvetica artisan. Cardigan craft beer seitan readymade velit. VHS chambray laboris tempor veniam. Anim mollit minim commodo ullamco thundercats.
            </p>
</div>
```

为了改变滚动速度，只需修改此块以满足您的需要：

```
if(delta < 0) {
    //scroll down
    curScroll += 10;
}
else {
    //scroll up
    curScroll -= 10;
} 
```

只需将`10`值更改为您需要的任何值。

**更新：**

```
var curScroll = 0;

$(window).on('mousewheel DOMMouseScroll', 'body', function(e){
    var evt = window.event || e;
    var delta = evt.detail? evt.detail*(-120) : evt.wheelDelta;
    var loc = $('#scrollMeToo').scrollTop() + $('#scrollMeToo').innerHeight();
    var height = $('#scrollMeToo')[0].scrollHeight - 10;
    var height2 = $('#scrollMeToo')[0].scrollHeight - $('#scrollMeToo').innerHeight();
    if(delta < 0) {
        //scroll down
        if (curScroll < height2) {
            curScroll += 10;
        }
    }
    else {
        //scroll up
        if (curScroll > 0) {
            curScroll -= 10;
        }
    }
    if (loc >= height && !$('#scrollMeToo').hasClass('appended')) {
        var moreContent ='<a href="google.com">a link</a>';
        $('#scrollMeToo').append(moreContent);
        $('#scrollMeToo').addClass('appended');
        console.log('appended');
    }
    $('#scrollMeToo').scrollTop(curScroll);
    return true;
}); 
```

根据您的描述，此修改应该适合您的需要。我还稍微更改了一些常规修复的功能。

内容将在到达 div 底部之前出现，并且只会出现一次**。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:48:42.777

您可以为 div 设置溢出：隐藏，并将 css 设置为取消选择 div 内容。

```
 var clicking = false;
 var position;
 var scrollpos;
$(window).mousedown(function(e){
    clicking=true;
    position = e.pageY;
});
$(window).mouseup(function(){
      clicking = false;
})
$(window).mousemove(function(e){
      if(clicking == false) 
            return;
      scrollpos=$('#scrollMeToo').scrollTop();
      $('#scrollMeToo').scrollTop(scrollpos + (e.pageY-position)) ;
}) 
```

# eclipse - Eclipse e4 上下文菜单

> ID：10626505
> 
> 赞同：1
> 
> 时间：2012-05-16T20:51:04.677
> 
> 标签：eclipse, eclipse-rcp, e4

我正在尝试使用 Eclipse 4.2 构建 RCP 应用程序。

第一个问题；我有一个`TreeViewer`. 在树查看器中选择一个项目时，我需要`MParts`显示两个堆叠的项目之一。如何在 e4 中激活零件堆栈中的零件？

第二; 我有一个与我的部件之一关联的上下文菜单。我需要仅在右键单击某些复合材料时才出现菜单。我有一个鼠标按下处理程序，它正在将一个包含我需要的所有数据的对象添加到当前上下文（`IEclipseContext`）中，但我不知道如何从 a 访问它`CoreExpression`（这似乎是控制菜单）。鼠标向上时，该对象将从上下文中删除。说我的课是`RightClickData`。如何编写核心表达式来测试`RightClickData`当前上下文中是否存在 的实例？

编辑，我的一部分`Application.e4xmi`：

```
 <children xsi:type="basic:InputPart" xmi:id="_6nSEEJuhEeGpoZf9DvK6pQ" elementId="com.example.MyEditor" contributionURI="bundleclass://MyPlugin/com.example.MyEditor" label="The Editor" tooltip="My Editor">
          <menus xsi:type="menu:PopupMenu" xmi:id="_UdHPEJ4SEeGi0uxvOaa4gw" elementId="MyPlugin.rsmenu" label="Asdf" tooltip="asdf">
            <children xsi:type="menu:HandledMenuItem" xmi:id="_jwOz0J4SEeGi0uxvOaa4gw" label="Add Column" command="_fhTxwJ4REeGi0uxvOaa4gw"/>
            <children xsi:type="menu:HandledMenuItem" xmi:id="_trlpsJ4SEeGi0uxvOaa4gw" label="Delete Column" command="_iAIkoJ4REeGi0uxvOaa4gw"/>
            <children xsi:type="menu:MenuSeparator" xmi:id="_v8f8YJ4SEeGi0uxvOaa4gw"/>
            <children xsi:type="menu:HandledMenuItem" xmi:id="_wR7Z0J4SEeGi0uxvOaa4gw" label="Add Row" command="_bXrp8J4REeGi0uxvOaa4gw"/>
            <children xsi:type="menu:HandledMenuItem" xmi:id="_yf5GMJ4SEeGi0uxvOaa4gw" label="Delete Row" command="_l58HwJ4REeGi0uxvOaa4gw"/>
          </menus>
        </children> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:37:45.897

对于您的第一个问题，您可以使用`org.eclipse.e4.ui.workbench.modeling.EPartService.activate(MPart)`激活您想要的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T13:38:21.487

我让我的部分像这样可见：

```
MPart part = partService.findPart("my.part.id");
if( part != null ){
    if( part.isVisible() == false )
        part.setVisible(true);
    partService.showPart( part, PartState.VISIBLE);
} 
```

# jquery - jQuery 和 Internet Explorer (IE9) 问题

> ID：10626518
> 
> 赞同：5
> 
> 时间：2012-05-16T20:51:56.497
> 
> 标签：jquery, internet-explorer-9

我在这里有一个WTF时刻。

自从我不记得以来，我一直在使用 jQuery。可能是我真的很累，我的大脑不工作了。

几个月以来，我一直在网站上工作，出于某种原因，我没有在 Internet Explorer 上测试它的某些功能。

昨天我开始这样做，但由于某种原因`$(some_element).parent()`无法正常工作。

我确实在我的私人服务器上设置了一个示例页面。

代码是

```
<html>

<header>
    <script type="text/javascript" charset="utf-8" src="jquery.js"></script>
</header>

<body>
    <div id="tester">
        <div id="tester2">
                <div id="tester3">
                    <div id="tester4">
                    </div>
                </div>
        </div>
    </div>
</body>

<script type="text/javascript" charset="utf-8">
    $(function(){

        parent = $("#tester4").parent();
        $(parent).css("width", "800px");
        $(parent).css("height", "800px");           
        $(parent).css("border", "solid 1px red");

        console.log(parent);

    });
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T20:57:17.577

它不喜欢`parent`. 尽量`var parent`将其排除在全局范围之外。

# asp.net - asp.net - 从另一个事件手动运行客户端验证代码

> ID：10626521
> 
> 赞同：5
> 
> 时间：2012-05-16T20:52:08.310
> 
> 标签：asp.net, customvalidator

我想运行任何连接到特定文本输入元素的客户端验证例程。

已使用以下方式设置验证`CustomValidator`：

```
<asp:textbox id="AddEstTime" runat="server" Width="55px"></asp:textbox><br />
<asp:CustomValidator ID="AddEstTimeCustomValidator" ClientValidationFunction="AddEstTimeCustomValidator_ClientValidate" OnServerValidate="AddEstTimeCustomValidator_ServerValidate" ErrorMessage="Please enter a time" ControlToValidate="AddEstTime"  runat="server" Display="Dynamic" ValidateEmptyText="true"/>
<asp:CheckBox ID="AddIsTM" runat="server" Text="T&amp;M" /> 
```

和javascript：

```
function AddEstTimeCustomValidator_ClientValidate(sender, args) {
    var checkbox = $("input[id$='IsTM']");
    args.IsValid = checkbox.is(":checked") || args.Value.match(/^\d+$/);
} 
```

当`CheckBox`“AddIsTM”状态改变时，我想重新验证`textbox`“AddEstTime”，使用它连接的`CustomValidator`“AddEstTimeCustomValidator”。

我知道焦点-> 添加字符重新聚焦-> 删除字符。我正在努力寻找更正确的方法。asp.NET 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T02:04:57.033

在查看了 Microsoft 客户端代码之后，我想出了这个似乎可行的方法：

```
// client-side validation of one user-control.
// pass in jquery object with the validation control
function ValidateOneElement(passedValidator) {
    if (typeof (Page_Validators) == "undefined") {
        return;
    }
    $.each(Page_Validators, function (index, value) {
        if ($(value).attr("id") == passedValidator.attr("id")) {
            ValidatorValidate(value, null, null);
        }
    });
} 
```

这是在检查`Page_ClientValidate`函数之后：

```
function Page_ClientValidate(validationGroup) {
    Page_InvalidControlToBeFocused = null;
    if (typeof(Page_Validators) == "undefined") {
        return true;
    }
    var i;
    for (i = 0; i < Page_Validators.length; i++) {
        ValidatorValidate(Page_Validators[i], validationGroup, null);
    }
    ValidatorUpdateIsValid();
    ValidationSummaryOnSubmit(validationGroup);
    Page_BlockSubmit = !Page_IsValid;
    return Page_IsValid;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-24T18:35:59.403

thx sennett（已投票）

我刚刚运行了最简单的 JS

```
Page_ClientValidate(); 
```

如果您有一个验证组，那么是

```
Page_ClientValidate("validationGroupName") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T22:41:01.253

如果你最终想坚持使用 ASP.NET 验证器，你可以[滥用 Validation Groups](https://stackoverflow.com/questions/1560812/page-clientvalidate-with-multiple-validationgroups-how-to-show-multiple-summ)，但我认为这种方法只会给你带来麻烦。其他选项是在客户端上使用 jQuery（不错的[列表](http://www.antsmagazine.com/web-development/excellent-jquery-plugins-to-enhance-form-validation/)），然后您必须在服务器端重复验证，或者避免从客户端验证调用服务器方法。

# javascript - 页面加载时，如何在 ajax 调用中绑定事件处理程序后触发事件？

> ID：10626523
> 
> 赞同：1
> 
> 时间：2012-05-16T20:52:31.213
> 
> 标签：javascript, ajax, jquery

## 问题：

我有 2 个下拉菜单，它们都由数据库中的信息填充，并且依赖于一些初始信息（在 php 中创建的 json 数组）。第二个下拉菜单也取决于在第一个下拉菜单中选择的内容。选择第二个下拉列表后，用户选择将保存在另一个数据库表中。如果用户离开然后回来，我希望能够将下拉菜单重置为他们之前选择的内容（但仍然让他们更改他们的选择）。

## 语境：

我有一些如下所示的代码：

```
function eventHandler2(event) {
    $.ajax({
        url: "someotherurl.php",
        data: event.data["context"],
        success: function(data) {
            // Do some stuff
        }
    });
}

function eventHandler1(event) {
    event.data["context"][$(event.target).id()] = $(event.target).val();
    $.ajax({
        url: "someurl.php",
        data: event.data["context"],
        success: function(data) {
            $("#element").append(build_input("input2", data));
            $("#element input2").change({"context": event.data["context"]}, eventHandler2);
        }
    });
}

$(document).ready(function() {
    var context = // php generated json array.
    $("#element").append(build_input("input1", context));
    $("#element input1").change({"context": context}, eventHandler1);
}); 
```

`context`包括一些必须在事件处理程序之外初始化并添加到事件期间的数据，并且只返回使用由or`build_input`确定的选项构建的表单输入元素的 html 字符串。有时，包含 eventHandler1（和 eventHandler2）的整个 html 元素将被删除并重新初始化。`data``someData`

我的问题是我想用从数据库中提取的一些默认值初始化两个表单输入（使用 build_input 构建），但是一旦设置了这些值，我不希望任何重新初始化或事件处理来使用这些初始值（使将它们添加到上下文对象变得困难，因为该对象将在绑定事件处理程序时使用）。

我想为输入设置值，然后调用更改事件来模拟用户选择这些值，但是由于输入元素是使用 ajax 数据构建的，因此在 ajax 请求返回和构建之前调用了这些更改事件输入元素。

我可以通过超时来解决这个问题，但是因为 javascript 可能在不同的机器上运行得更慢，而且 ajax 调用可能需要比正常时间更长的时间，所以我不打算这样做。不过，理想情况下，我想要这样的东西：

```
$("#element .input1 option[value='" + initial_value + "']").attr('selected', true);
$("#element .input1").change(); 
```

在页面加载时调用，但仅在构建和绑定元素之后调用。

## 问题：

有没有什么方法可以触发更改事件（模拟用户选择选项），仅在页面首次加载时并且仅在构建 html 输入元素的 ajax 请求返回之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:06:12.997

有什么方法可以触发更改事件（模拟用户选择选项）

> 第一次加载页面

并且只有

> 在ajax请求之后

构建的html输入元素已经返回？

这是两个独立的事件。如果您需要确保两个事件都已被使用`<body onload="loadedBody=true">`并利用 success:`$.ajax`函数的属性，如下所示：

```
function eventHandler1(event) {
    event.data["context"][$(event.target).id()] = $(event.target).val();
    $.ajax({
        url: "someurl.php",
        data: event.data["context"],
        success: function(data) {
            $("#element").append(build_input("input2", data));
            $("#element input2").change({"context": event.data["context"]}, eventHandler2);
            ajaxComplete();
        }
    });
}
var ajaxCompleted;
function ajaxComplete() {
    if((loadedBody == true) && (ajaxCompleted == false)) {
        $("#element .input1 option[value='" + initial_value + "']").attr('selected', true);
        $("#element .input1").change();
    } else {
        setTimeout('ajaxComplete()', 100);
    }
} 
```

不用担心 setTimeout。它很少被使用，因为页面很可能在 AJAX 结果到达之前已经加载。

# sql - Oracle SQL Developer 如何查看 sp 的输出

> ID：10626529
> 
> 赞同：0
> 
> 时间：2012-05-16T20:53:05.650
> 
> 标签：sql, oracle

我已经右键单击 SP 并且右侧有一个包含参数的嵌入式表，但我似乎无法在那里输入参数。我能够在 PL SQL 中做我需要的事情，但我现在如何运行 SP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:42:23.803

您可以通过 plsql 代码块运行。

如果您只想运行，您可以使用以下类型的块 -

```
declare
/*
parameter declaration .. just like your parameter types in SP.
like ..
*/
l_p_input_1 varchar2(980):= '<value you want to give>';
l_p_input_2 number := 33;
l_p_output_1 varchar2(889);
begin

sp_your_sP_name(l_p_input_1,
                l_p_input_2,
                l_p_output_1);
dbms_output.put_line('l_p_output_1 : '||l_p_output_1);
end; 
```

# haskell - Haskell 识别等差数列

> ID：10626531
> 
> 赞同：2
> 
> 时间：2012-05-16T20:53:43.913
> 
> 标签：haskell

我是 Haskell 新手，我有一个小问题。我正在尝试编写一个函数来识别列表是否是算术序列。

我有这个不起作用的代码：

```
isArithmSeq :: [Int] -> Bool
isArithmSeq [] = False;
isArithmSeq [x] = False;
isArithmSeq [x,y] = True;
isArithmSeq (x:y:xs) = (sum (x:y:xs)) == (sum [x,y..(last xs)]) 
```

我不知道如何使它工作。谁能帮我纠正这个？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:08:14.340

试试这个：

```
isArithmSeq :: [Int] -> Bool
isArithmSeq [] = False
isArithmSeq [x] = False
isArithmSeq [x,y] = True
isArithmSeq (x:y:z:xs) = (x - y) == (y - z) && isArithmSeq (y:z:xs) 
```

您已经为递归定义定义了一个很好的基本案例。现在，您只需要检查连续元素之间的差异是否始终相同。原因是

```
isArithmSeq (x:y:xs) = (sum (x:y:xs)) == (sum [x,y..(last xs)]) 
```

没用是因为总和不是等差数列的唯一要求：

```
(sum [2,3,4,0,11,7]) == (sum [2,3,4,5,6,7]) 
```

# r - R - 基于嵌套列表的标题图

> ID：10626532
> 
> 赞同：3
> 
> 时间：2012-05-16T20:53:43.950
> 
> 标签：r, list, nested-lists

我有 2 个列表，每个列表里面还有两个包含数据框的列表（换句话说，嵌套列表）。我想根据主列表和嵌套列表的名称绘制每个数据框并为其命名。

例如，假设我们有：

```
a=list(
  list(a=data.frame(x=rpois(5,1),y=rpois(5,1)),
       b=data.frame(x=rpois(5,1),y=rpois(5,1))),
  list(c=data.frame(x=rpois(5,1),y=rpois(5,1)),
       d=data.frame(x=rpois(5,1),y=rpois(5,1)))) 
```

我们有主要列表的名称：

```
names(a)=c("alpha","bravo") 
```

在两个主要列表`alpha`and`bravo`中，我们还有两个列表`charlie`and `delta`：

```
for(i in 1:length(a)) {
  names(a[[i]])=c("charlie","delta") } 
```

我可以使用`lapply`循环遍历每个列表并绘制数据框，但是我无法让标题组合每个数据框的主列表 ( `alpha`and `bravo`) 和嵌套列表 ( `charlie`and `delta`) 的名称。例如，在这种情况下，我想要四个图，分别称为：`alpha_charlie`、`alpha_delta`、`bravo_charlie`和`bravo_delta`。

```
lapply(a,function(i) {
  lapply(names(i), function(j) { 
    ggplot()+
      geom_point(data=i[[j]],aes(x,y))+
      opts(title=paste(names(i),j,sep="_")) #Here is where I am struggling!
    } ) } ) 
```

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:10:16.170

您可以在索引序列上使用 lapply 而不是名称本身。

```
lapply(seq(a), function(i){
    lapply(seq(a[[i]]), function(j){
        ggplot() +
        geom_point(data = a[[i]][[j]], aes(x, y))+
        opts(title = paste(names(a)[i], names(a[[i]])[j], sep = "_"))
        })}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:48:35.853

我的偏好是在这种情况下坚持使用`for`循环。`grid.arrange`这样做可以很容易地将绘图保存到一个新列表中，然后使用and一次打印它们`do.call`。

```
library(ggplot2)

plot_list = list() # Save plots to list.

for (name_1 in names(a)) {
    for (name_2 in names(a[[name_1]])) {
        title_string = paste(name_1, name_2, sep="_")

        plt = ggplot(data=a[[name_1]][[name_2]], aes(x=x, y=y)) +
              geom_point() +
              opts(title=title_string)

        plot_list[[title_string]] = plt
    }
}

library(gridExtra)
png("plots.png", height=600, width=600)
do.call(grid.arrange,  plot_list)
dev.off() 
```

![在此处输入图像描述](../Images/4f8ae9e75b580a6843f4d31dda9eaf9d.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T21:30:46.570

在你的第一次应用中，你已经丢失了名字，所以这最终很糟糕。达森给了你一个很好的解决方案。

但是，我认为将 data.frames 列表转换为单个 data.frame 会更好！并使用刻面！

```
nested.fun <- function(l) {
  out <- ldply(l, data.frame)
  names(out)[1] <- 'inner.id'
  return(out)
}

one.df <- ldply(a, nested.fun)

ggplot(one.df, aes(x,y))+geom_point()+facet_grid(.id~inner.id) 
```

# sql - 比较多列，但只比较那些具有有效值的列，如果所有列都相等，则创建 y/n 标志

> ID：10626536
> 
> 赞同：7
> 
> 时间：2012-05-16T20:54:02.180
> 
> 标签：sql, sql-server, sql-server-2008

我想创建一个 Y/N 标志，其中 Y 表示给定行中每一列中的每个有效值都相等，否则为 N。我需要排除任何包含空值、空格或全零的列。认为：

```
CREATE TABLE z_test
(ID INT NOT NULL,
D1 VARCHAR(8)NULL,
D2 VARCHAR(8)NULL,
D3 VARCHAR(8)NULL,
D4 VARCHAR(8)NULL,
DFLAG CHAR(1)NULL)

INSERT INTO z_test VALUES (1,NULL,' ','000000','00000000',NULL)
INSERT INTO z_test VALUES (1,'20120101','0000','20120101','00000000',NULL)
INSERT INTO z_test VALUES (2,'20100101','20100101','20100101','20100101',NULL)
INSERT INTO z_test VALUES (2,'00000000','20090101','0','20090101',NULL)
INSERT INTO z_test VALUES (3,'00000000','20090101',NULL,'20120101',NULL)
INSERT INTO z_test VALUES (3,'20100101',' ',NULL,'20100101',NULL) 
```

所需的输出（不包括 D1 到 D4，虽然我不想放弃它们）是：

```
ID       DFLAG
---------------
1        N
1        Y
2        Y
2        Y
3        N
3        Y 
```

速度不是问题，因为此查询不会经常运行，但它位于较大的表上。

任何指示或建议将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:23:51.330

```
SELECT ID, 
       CASE 
         WHEN C = 1 THEN 'Y' 
         ELSE 'N' 
       END AS DFLAG 
FROM   z_test 
       CROSS APPLY (SELECT COUNT(DISTINCT D) C 
                    FROM   (VALUES(D1), 
                                  (D2), 
                                  (D3), 
                                  (D4)) V(D) 
                    WHERE  LEN(D) > 0 /*Excludes blanks and NULLs*/
                         AND D LIKE '%[^0]%'/*Excludes ones with only zero*/) CA 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T20:59:24.743

这有效：

```
select case when
    (D1 is null OR D2 is null OR LEN(REPLACE(D1,'0',''))=0 OR LEN(REPLACE(D2,'0',''))=0 OR D1=D2)
AND (D1 is null OR D3 is null OR LEN(REPLACE(D1,'0',''))=0 OR LEN(REPLACE(D3,'0',''))=0 OR D1=D3)
AND (D1 is null OR D4 is null OR LEN(REPLACE(D1,'0',''))=0 OR LEN(REPLACE(D4,'0',''))=0 OR D1=D4)
AND (D2 is null OR D3 is null OR LEN(REPLACE(D2,'0',''))=0 OR LEN(REPLACE(D3,'0',''))=0 OR D2=D3)
AND (D2 is null OR D4 is null OR LEN(REPLACE(D2,'0',''))=0 OR LEN(REPLACE(D4,'0',''))=0 OR D2=D4)
AND (D3 is null OR D4 is null OR LEN(REPLACE(D3,'0',''))=0 OR LEN(REPLACE(D4,'0',''))=0 OR D3=D4)
AND (LEN(REPLACE(D1,'0','')) > 0
     OR LEN(REPLACE(D2,'0','')) > 0
     OR LEN(REPLACE(D3,'0','')) > 0
     OR LEN(REPLACE(D4,'0','')) > 0)
THEN 'Y' ELSE 'N' END
from z_test 
```

这是sqlfiddle的[链接。](http://sqlfiddle.com/#!3/969ba/19)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:07:13.093

尝试这个：

```
DECLARE @z_test table
(ID INT NOT NULL,
D1 VARCHAR(8)NULL,
D2 VARCHAR(8)NULL,
D3 VARCHAR(8)NULL,
D4 VARCHAR(8)NULL,
DFLAG CHAR(1)NULL)

INSERT INTO @z_test VALUES (1,NULL,' ','000000','00000000',NULL)
INSERT INTO @z_test VALUES (1,'20120101','0000','20120101','00000000',NULL)
INSERT INTO @z_test VALUES (2,'20100101','20100101','20100101','20100101',NULL)
INSERT INTO @z_test VALUES (2,'00000000','20090101','0','20090101',NULL)
INSERT INTO @z_test VALUES (3,'00000000','20090101',NULL,'20120101',NULL)
INSERT INTO @z_test VALUES (3,'20100101',' ',NULL,'20100101',NULL)

;WITH Fixed AS
(SELECT --converts columns with all zeros and any spaces to NULL
     ID
         ,NULLIF(NULLIF(D1,''),0) AS D1
         ,NULLIF(NULLIF(D2,''),0) AS D2
         ,NULLIF(NULLIF(D3,''),0) AS D3
         ,NULLIF(NULLIF(D4,''),0) AS D4
    FROM @z_test
)
SELECT --final result set
    ID,
    CASE 
        WHEN COALESCE(D1,D2,D3,D4) IS NULL THEN 'N' --all columns null
        WHEN (D1 IS NULL OR D1=COALESCE(D1,D2,D3,D4)) --all columns either null or the same
            AND (D2 IS NULL OR D2=COALESCE(D1,D2,D3,D4))
            AND (D3 IS NULL OR D3=COALESCE(D1,D2,D3,D4))
            AND (D4 IS NULL OR D4=COALESCE(D1,D2,D3,D4))
            THEN 'Y'
        ELSE 'N'
    END
    FROM Fixed 
```

输出：

```
ID          
----------- ----
1           N
1           Y
2           Y
2           Y
3           N
3           Y

(6 row(s) affected) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T21:17:03.210

您可以为此创建一个函数。

```
create function fnRowValid(@d1 varchar, @d2 varchar...)
returns bit ------ 1 for true and 0 for false
begin

  declare table @validvalue (val varchar)

  if isdate(d1) = 0 and isdate(d1) = 0 and ...
    return 0

  if isdate(@d1)
    insert into @validvalue (val) values (@d1)
  if isdate(@d2)
    insert into @validvalue (val) values (@d2)
  if isdate(@d3)
    insert into @validvalue (val) values (@d3)
  ...

  if exists (select 1 from @validvalue)
    if (select count(distinct val) from @validvalue) = 1
      return 1

  return 0

end 
```

然后你可以在更新语句中使用它......

```
update z_test
set dflag = dbo.fnRowValid(d1,d2,d3..) 
```

请不要因此而激怒我……我显然没有测试此代码。这是第一个出现在我脑海中的解决方案......不是一个真正的优雅但应该可以工作。我不肯定你也可以在函数中使用表变量。对丑陋的解决方案感到抱歉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T21:52:14.210

```
With RnkSource As
  (
    Select Id, D1, D2, D3, D4, DFlag
      , Row_Number() Over ( Order By Id ) As RowNum
    From z_test
  )
  , Source As
  (
    Select RowNum, Id, 'D1' As Col, D1 As Val
    From RnkSource
    Union All
    Select RowNum, Id, 'D2', D2
    From RnkSource
    Union All
    Select RowNum, Id, 'D3', D3
    From RnkSource
    Union All
    Select RowNum, Id, 'D4', D4
    From RnkSource
  )
Select Id
  , Case When Count(*) = 4 Then 'Y' Else 'N' End As DFLAG
From Source As S
Where Len(Val) > 0
Group By RowNum, Id 
```

[SQL 小提琴版本](http://www.sqlfiddle.com/#!3/969ba/41)

# apache-flex - 在使用摘要的 AdvancedDataGrid 列中将字节灵活格式化为 MB、GB、TB 等

> ID：10626537
> 
> 赞同：0
> 
> 时间：2012-05-16T20:54:04.893
> 
> 标签：apache-flex, format, advanceddatagrid

在任何人回答问题之前，我已经有了从字节转换为 MB、GB、TB 等的代码，如下所示：

```
private var _levels:Array = [ 'bytes','Kb','MB','GB','TB','PB','EB','ZB','YB'];

private function convertSize(bytes:Number):String
{
    var index:uint = Math.floor(Math.log(bytes) / Math.log(1024));
    return (bytes / Math.pow(1024, index)).toFixed(2)+" "+this._levels[index];
} 
```

我有以下 AdvancedDataGrid：

```
<mx:AdvancedDataGrid id="albumTree" width="100%" height="100%" sortExpertMode="true" useHandCursor="true" buttonMode="true">
    <mx:dataProvider>
        <mx:GroupingCollection id="gcQuote" source="{albums}">
            <mx:grouping>
                <mx:Grouping>
                    <mx:GroupingField name="foldername" compareFunction="positionCompareFunction">
                        <mx:summaries>
                            <mx:SummaryRow summaryPlacement="group">
                                <mx:fields>
                                    <mx:SummaryField dataField="totalunpublished" operation="SUM" />
                                </mx:fields>
                            </mx:SummaryRow>
                        </mx:summaries>
                    </mx:GroupingField>
                </mx:Grouping>
            </mx:grouping>
        </mx:GroupingCollection>
    </mx:dataProvider>
    <mx:columns>
        <mx:AdvancedDataGridColumn dataField="name" sortCompareFunction="positionCompareFunction" headerText="Folder/Album" />
        <mx:AdvancedDataGridColumn width="80" dataField="totalunpublished" headerText="Photo Usage" />
    </mx:columns>
</mx:AdvancedDataGrid> 
```

我正在尝试使用 convertSize 函数格式化要格式化的 totalunpublished 列。现在我有一些类似于这些值的东西：

2302869 24901163 1890295725 1120056357856

但希望它们看起来像这样：17.57 MB 189.98 MB 1.76 GB 1.02 TB

任何帮助完成这项工作将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:04:14.083

我认为`labelFunction`会有帮助

```
<mx:AdvancedDataGridColumn width="80" dataField="totalunpublished" headerText="Photo Usage" labelFunction="convertSize"/> 
```

并且功能是（[通过这个](https://stackoverflow.com/a/5806493/842112)）

```
private var _levels:Array = [ 'bytes','Kb','MB','GB','TB','PB','EB','ZB','YB'];
private function convertSize(data:Object, column:AdvancedDataGridColumn):String 
{
     var bytes:Number=data[column.dataField];
    var index:uint = Math.floor(Math.log(bytes) / Math.log(1024));
    return (bytes / Math.pow(1024, index)).toFixed(2)+" "+this._levels[index];
} 
```

# php - 如何使用地址栏将值从 javascript 传递到 php

> ID：10626549
> 
> 赞同：0
> 
> 时间：2012-05-16T20:54:44.613
> 
> 标签：php, javascript, blackberry

我有 .js 和 .php 文件和 html 页面。我在 html 文件中包含 js 文件，在 js 文件中包含 php 文件。

当我转到此页面时，我想使用地址栏将 'cat' 值从 js 文件传递​​到 php 文件；

> /demo/convert.html?cat=volume

但我不知道该怎么做。

顺便说一句，这是一个 blacberry 项目，我不确定是否可以使用地址栏来传递值。欢迎任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:03:35.037

使用如下 URL 测试此示例代码： [http ://sputnick-area.net/test/index.php?foobar=works_as_a_charm](http://sputnick-area.net/test/index.php?foobar=works_as_a_charm)

```
<?php

$var = $_GET['foobar'];

echo <<<EOF
<html>
<head>
<title></title>
</head>
<body>
demo of using PHP GET variable in Javascript :
<script type="text/javascript">
alert("$var");
</script>
</body>
</html>
EOF

?> 
```

**编辑**：

如果您想在 JavaScript 中处理 GET 变量，请考虑以下 HTML + JavaScript 示例：[http ://sputnick-area.net/test/index.html?foobar=works_as_a_charm](http://sputnick-area.net/test/index.html?foobar=works_as_a_charm)

```
<html>
<head>
<title></title>
</head>
<body>
<script type="text/javascript">
var vars = [], hash;
var hashes = window.location.href.slice(
    window.location.href.indexOf('?') + 1
).split('&');

for(var i = 0; i < hashes.length; i++) {
    hash = hashes[i].split('=');
    vars.push(hash[0]);
    vars[hash[0]] = hash[1];
}

alert(vars['foobar']);
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:05:58.437

你当然可以。当您的 JS 函数被调用时，您必须执行以下操作：

```
function someFunction(someParameters) {
    //Do whatever you need to do
    window.location = "/demo/convert.html?variableName=" + variable;
} 
```

这将导致页面重新加载，新变量可通过`$_GET`数组中的 PHP 访问。例如：

```
<?php
$name = $_GET['variableName'];
if(length($name) < 3) {
    echo "That is a short name!";
}
?> 
```

页面重新加载（在此处使用）是向 PHP 发送值所必需的，因为它在服务器端运行。您唯一的其他解决方案是使用 AJAX 并动态加载页面内容。然而，这将是最简单的解决方案。

编辑：

```
function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
}

var urlvariable = getUrlVars()['variableName']; 
```

# java - FindViewById 循环

> ID：10626550
> 
> 赞同：1
> 
> 时间：2012-05-16T20:54:47.383
> 
> 标签：java, android, loops, view

我想尝试将其放入循环中，但我似乎无法使 R.id.imageView 匹配。我试过：string id = "R.id.imageView"+i 在 for 循环中，但它与 findViewById 的参数不匹配。有任何想法吗？非常感谢任何帮助。

```
 buttons[0] = (ImageView) this.findViewById(R.id.imageView1);
   buttons[1] = (ImageView) this.findViewById(R.id.imageView2);
   buttons[2] = (ImageView) this.findViewById(R.id.imageView3);
   buttons[3] = (ImageView) this.findViewById(R.id.imageView4);
   buttons[4] = (ImageView) this.findViewById(R.id.imageView5);
   buttons[5] = (ImageView) this.findViewById(R.id.imageView6);
   buttons[6] = (ImageView) this.findViewById(R.id.imageView7);
   buttons[7] = (ImageView) this.findViewById(R.id.imageView8);
   buttons[8] = (ImageView) this.findViewById(R.id.imageView9);
   buttons[9] = (ImageView) this.findViewById(R.id.imageView10);
   buttons[10] = (ImageView) this.findViewById(R.id.imageView11);
   buttons[11] = (ImageView) this.findViewById(R.id.imageView12); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:59:48.647

使用[`getIdentifier()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法：

```
Resources res = getResources(); //if you are in an activity
for (int i = 1; i < 13; i++) {
   String idName = "imageView" + i;
   buttons[i] = (ImageView) findViewById(res.getIdentifier(idName, "id, getPackageName()));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:00:26.073

为 R.id.imageView1......12 取一个整数数组并传递它的值 Like

```
private Integer[] Imgid = {R.id.imageview1,....,12  }; 
```

并使用数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-13T12:08:02.487

与上面相同，只是错字已修复。似乎比“最佳答案”更好，因为如果您不需要它，您不必定义任何数组。

```
Resources res = getResources(); //if you are in an activity
for (int i = 1; i < 13; i++) {
  String idName = "imageView" + i;
  imageViews[i] = (ImageView) findViewById(res.getIdentifier(idName, "id", getPackageName()));
} 
```

# objective-c - 表视图：didSelectRowAtIndexPath：不一致

> ID：10626556
> 
> 赞同：1
> 
> 时间：2012-05-16T20:54:53.907
> 
> 标签：objective-c, ios, tableview, viewwillappear

我对 Objective-C 和 iOS 应用程序开发还很陌生，所以如果我的问题的答案很简单，我深表歉意。我正在尝试将 GTGift 对象的指针从一个视图控制器发送到另一个。当我输入以下代码时，对象被发送并存储在第二个视图控制器的实例变量中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    GTGift *selectedGift = [[[GTGiftStore sharedStore] allGifts] objectAtIndex:[indexPath row]];
    GTDetailViewController *dvc = [[self storyboard] instantiateViewControllerWithIdentifier:@"detailVC"];
    [dvc setDetailGift:selectedGift];
    [[self navigationController] pushViewController:dvc animated:YES];
} 
```

但是，当我在第一个视图控制器中输入此代码时：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    gift = [[[GTGiftStore sharedStore] allGifts] objectAtIndex:[indexPath row]];
    GTDetailViewController *dvc = [[self storyboard] instantiateViewControllerWithIdentifier:@"detailVC"];
    [[self navigationController] pushViewController:dvc animated:YES];
} 
```

而第二个视图控制器中的这段代码：

```
- (void)viewWillAppear:(BOOL)animated {
    GTGiftsViewController *gvc = [[self storyboard] instantiateViewControllerWithIdentifier:@"giftsVC"];
    detailGift = [gvc gift];
    NSLog(@"%@", detailGift);
} 
```

detailGift 返回空值。

我一生都无法理解为什么，如果我可以使用类似于不起作用的代码段的方法，这对我的应用程序来说会更实用。如果有人能为我照亮这个话题，或者为我指出不同的方向来完成相同的任务，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:02:47.660

你的问题是“实例化”这个词的意思是它所说的。:-)

在`viewWillAppear`您创建一个全新的`GTGiftsViewController`对象时，它对第一个对象中选择的礼物一无所知`GTGiftsViewController`。

（做这种事情的“故事板方式”是`prepareForSegue:sender:`在你的第一个视图控制器中创建一个方法并在那里完成工作。）

# javascript - 我想重复代码但不知道如何使用循环

> ID：10626576
> 
> 赞同：0
> 
> 时间：2012-05-16T20:55:53.793
> 
> 标签：javascript, jquery

我有这个代码：

js：

```
function change_color(color) {
$("body").animate({ backgroundColor:color }, '1000');
}

setTimeout(function () {
    change_color('#4AC900'
    );
}, 500);
setTimeout(function () {
    change_color('#964514'
    );
}, 1500);
setTimeout(function () {
    change_color('#EE0000'
    );
}, 1500);
setTimeout(function () {
    change_color('#FFE303'
    );
}, 1500);
setTimeout(function () {
    change_color('#8E388E'
    );
}, 1500);
setTimeout(function () {
    change_color('#FF00AA'
    );
}, 1500); 
```

我想反复使用它，但把它放在一个while循环中只会让网站崩溃，谁能帮忙？

这是网站...它不是我的小兄弟网站... [http://timothy.techbytbone.com/isaac.php](http://timothy.techbytbone.com/isaac.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:59:34.040

```
var colors = ['#4AC900', '#964514', '#EE0000', '#FFE303', '#8E388E', '#FF00AA'],
    len = colors.length,
    i;

for (i = 0; i < len; i++) {
    (function(i, color) {
        setTimeout(function () {
            change_color(color);
        }, (i + 1) * 500);
    })(i, colors[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:10:54.333

这就是你所需要的：

## *[jsFiddle 演示](http://jsfiddle.net/WQt5q/)*

```
var c = 0;
var colors = ['#4AC900','#964514','#EE0000','#FFE303','#8E388E','#FF00AA'];
(function loop(){         
    $('body').stop().animate({backgroundColor : colors[c++%colors.length] }, 1000, loop);  
})(); 
```

（请注意，您需要使用 jQuery UI 为 CSS`background-color`属性设置动画）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:03:48.167

```
var colors = {'#4AC900': 500,
              '#964514': 1500,
              // etc. Just continue with the color-millisecond combinations
             }

for(key in colors) {
 setTimeout(function () {
    change_color(key);
 }, colors[key]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T21:07:18.513

您的循环正在崩溃，因为您无法在浏览器加载时设置所有必要的超时。这是您应该可以使用的代码版本。

```
var colors = ['#4AC900', '#964514', '#EE0000', '#FFE303', '#8E388E', '#FF00AA'];

var currentColorIndex = 0;
var scheduleChange;
scheduleChange = function() {
    change_color(currentColorIndex);
    currentColorIndex = (currentColorIndex + 1) % colors.length
    setTimeout(scheduleChange, 1000);
};

setTimeout(scheduleChange, 500); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T21:02:30.093

```
function change_color(color) {
  $("body").animate({ backgroundColor:color }, '1000');
}

setTimeout(function() {
  change_color('#4AC900')
}, 500);

colors = ['#964514', '#EE0000', '#FFE303', '#8E388E', '#FF00AA']

interval = setInterval(function() {
  if (! a.length) {
    return clearInterval(interval);
  }
  change_colors(a.shift());
}, 1500); 
```

玩得开心。您应该了解不弄乱 setIntervals 的[闭包。](http://www.javascriptkit.com/javatutors/closures.shtml)有大量的库可以为颜色和其他东西设置动画。我可以推荐[ded 的 morpheus](https://github.com/ded/morpheus)。

# visual-studio - 用于突出显示当前源文件的 Visual Studio 插件

> ID：10626587
> 
> 赞同：0
> 
> 时间：2012-05-16T20:56:25.510
> 
> 标签：visual-studio, visual-studio-2010

是否有任何 Visual Studio 插件可以在解决方案资源管理器中突出显示当前调试器所在的源代码文件？或者这是一个愚蠢的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:47:00.720

它位于工具 -> 选项 -> 项目和解决方案 -> 常规 -> 在解决方案资源管理器中跟踪活动项目。

# shell - 为什么`help format-list` 和`format-list` 不一样 | 帮助`?

> ID：10626590
> 
> 赞同：1
> 
> 时间：2012-05-16T20:56:31.150
> 
> 标签：shell, powershell, powershell-2.0, piping

`help format-list`输出格式列表的帮助。

`format-list | help`输出帮助（get-help）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:01:56.730

该| 或“管道”运算符将一个操作的输出重定向到另一个。因此，在这种情况下，您正在调用格式列表，然后将其输出重定向为帮助参数。help 不知道如何处理该参数，因此它进入默认行为（help for help）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T00:49:56.863

帮助是一个基本上重定向到的功能：

```
Get-Help command | more 
```

如果你看一下这个函数的定义，你会发现它接受一个位置参数，`ValueFromPipelineByPropertyName`用`Name`.

```
PS ~\> Get-Content function:help

<#
.FORWARDHELPTARGETNAME Get-Help
.FORWARDHELPCATEGORY Cmdlet
#>
[CmdletBinding(DefaultParameterSetName='AllUsersView')]
param(
    [Parameter(Position=0, ValueFromPipelineByPropertyName=$true)]
    [System.String]
    ${Name},

    # Other arguments deleted for brevity

    [Switch]
    ${Online})
$outputEncoding=[System.Console]::OutputEncoding

      Get-Help @PSBoundParameters | more 
```

这基本上意味着，如果它看到一个带有名为 的属性的参数`Name`，它会将其绑定为输入参数。所以，当你这样做时：

```
format-list | help 
```

运行 format-list 命令（并且没有返回任何内容），因此帮助函数认为它没有收到任何参数。

当你这样做时：

```
"format-list" | help 
```

您正在传递一个字符串参数。字符串类型没有`Name`属性，因此您会收到一条错误消息，指出它无法绑定参数。但是，如果您尝试：

```
PS ~\> get-command format-list

CommandType     Name                Definition
-----------     ----                ----------
Cmdlet          Format-List         Format-List [[-Property] <Object[]>] [-GroupBy <... 
```

你可以看到命令 format-list 确实有一个 Name 属性，所以如果你尝试过

```
get-command format-list | help 
```

你得到帮助`format-list`。

# android - Webview 与 Native Client

> ID：10626591
> 
> 赞同：0
> 
> 时间：2012-05-16T20:56:37.363
> 
> 标签：android, webview

我试图在一个普通的 WebView 上显示一个 url 的网页，并且一些图像没有显示。但是，模拟器的浏览器中的一切都显示得很好。

通过 WebView 与 Android 2.3 浏览器进行渲染之间有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:02:35.570

Android 浏览器中添加了几项内容。他们添加了一些东西来处理 JavaScript，处理切换到视频的本机功能等。幸运的是，浏览器是开源的，因此您可以获得 Android 代码库并查看它们的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:05:22.663

是的，可能会有所不同。如果您将 web text-plain 直接传递给 webview，它不理解根据本地路径而不是 goblal 路径引用作为引用的图像。

我的意思是，如果你有一个`<img src="/images/image.png" />`here，那么你正在根据你的目录进行引用，并且浏览器会尝试将 image.png 查找到你的根目录中，如果你有，`<img src="http://www.whatever.com/images/image.png" />`那么你就是在全局引用它。所以我认为这是你可以拥有的主要内容。

# c# - 如何在实体框架中检索特定列

> ID：10626592
> 
> 赞同：2
> 
> 时间：2012-05-16T20:56:39.043
> 
> 标签：c#, .net, entity-framework, entity-framework-4

我可以让我的 EF 对象只检索执行的 sql 中的特定列吗？

如果我有一列包含大量确实会减慢查询速度的数据，我怎样才能让我的对象从生成的 sql 中排除该列？

如果我的表有 Id(int)、Name(int)、Data(blob)，我怎样才能让我的查询成为

```
select Id, Name from TableName 
```

代替

```
select Id, Name, Data from TableName 
```

根据下面的建议，我的方法是

```
 public List<T> GetBy<T>(DbContext context,Expression<Func<T, bool>> exp, Expression<Func<T,T>> columns) where T : class
    {

        return dbContext.Set<T>().Where(exp).Select<T,T>(columns).ToList();
    } 
```

我这样称呼它

```
List<CampaignWorkType> list = GetBy<CampaignWorkType>(dbContext, c => c.Active == true, n => new { n.Id, n.Name }); 
```

我收到如下错误。

无法将类型“AnonymousType#1”隐式转换为“Domain.Campaign.CampaignWorkType”

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T22:52:38.533

解决方案是：

首先，定义一个代理类型：

```
public class CampaignWorkTypesSimpleList
{
   public int Id { get; set; }
   public string Name { get; set; }
} 
```

然后像这样更改通用方法：

```
public List<U> GetBy<T,U>(DbContext context,Expression<Func<T, bool>> exp, Expression<Func<T,U>> columns) 
                where T : class
                where U : class
{

  return dbContext.Set<T>().Where(exp).Select<T, U>(columns).ToList();
} 
```

最后，执行它。

```
List<CampaignWorkTypesSimpleList> list = this.GetBy<CampaignWorkType, CampaignWorkTypesSimpleList>(dbContext, c => c.Active == true, n => new CampaignWorkTypesSimpleList { Id = n.Id, Name = n.Name }); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-17T03:24:16.940

假设您使用的是 EF 设计器，请使用实体模型设计图面从实体模型中删除 [Data] 列。

# android - Android 和游戏关卡

> ID：10626594
> 
> 赞同：0
> 
> 时间：2012-05-16T20:56:48.457
> 
> 标签：android

我有一个完整的画布，它实现了创建我的第一个 Android 游戏所需的一切。

我这样称呼它...

```
public class GameScreen extends Activity {
    // CALLED WHEN THE ACTIVITY IS FIRST CREATED
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // SET THE GAME CANVAS TO DISPLAY
        setContentView(new GameCanvas(this));
    }  
} 
```

我遇到的问题是我应该如何将关卡加载到画布中？我还创建了一个菜单，用户可以使用该菜单选择要玩的关卡，但是在选择后，我如何将该特定关卡加载到画布和所有逻辑等上？

我是Android新手，如果问题非常基本，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:12:44.457

这种问题是不可能有效回答的。这将完全取决于你的关卡是如何保存的，你有什么样的关卡加载逻辑，你如何构建你的项目......

# mysql - 将sql文件导入新数据库速度

> ID：10626598
> 
> 赞同：0
> 
> 时间：2012-05-16T20:57:17.673
> 
> 标签：mysql, sql, database

当我需要将我的数据库从一台机器复制到另一台机器时，我通常会执行 mysqldump -u root -ppassword database > backup.sql 然后在另一台机器上执行 mysql -u root -ppassword databsae < backup.sql

但是我现在正在处理一个 1 GB 的 sql 文件，这需要几个小时！还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:48:07.570

不幸的是，问题中缺少太多变量。db datadir 和文件是否在同一个磁盘挂载上？转储是否使用扩展插入？（假设没有）

If a textual dump is the only solution (meaning you don't wanna use xtrabackup or an LVM snapshot) then you want to make you musqldump use extended insert (so one insert for each whole table, faster) and try to have the file on a separate mount from the data directory to reduce disk seeks. For that point on, it's all IO bound and the disk speed is your bottleneck.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:59:45.403

我个人使用 HeidiSQL 来管理我的备份。在工具中设置连接后，您可以非常快速地从 source1 备份到 source2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:03:13.687

如果您使用的是 Windows，则您的数据位于如下路径：

> C:\Program Files\MySQL\MySQL 服务器 5.0\data

在那里，您将拥有包含数据库名称的文件夹，您可以将这些文件夹复制并粘贴到其他计算机上，并且应该可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T21:05:50.380

停止服务器，只需复制存档并压缩 db 目录中的文件，在目标机器上执行相反的操作。您需要为新服务器上的数据库分配权限等。在可行的情况下复制 mysql 数据库可能会让您陷入混乱。

虽然这不是备份，但不要将其用作一个备份，更像是一个图像。

# hibernate - 带有 fetchMode 的 Grails 标准查询具有两个级别

> ID：10626599
> 
> 赞同：5
> 
> 时间：2012-05-16T20:57:24.237
> 
> 标签：hibernate, grails, criteria, eager

在我的 Grails 项目中，我有以下类：

```
class A {
    static hasMany = [cs:C]
}

class B {
    static hasMany = [cs:C]
}

class C {
    static belongsTo = [a:A, b:B]
} 
```

我想查询 A 类并热切地带来 B 和 C 的所有关联。我尝试了以下条件查询，但是当我从 A 遍历 Cs 时，hibernate 使用延迟初始化来查询 B 对象。

```
A.withCriteria() {
    fetchmode "cs", FetchMode.JOIN
    fetchMode "cs.b", FetchMode.JOIN
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T18:34:08.493

解决了。

```
A.withCriteria() {
    cs{
        fetchMode "cs.b", FetchMode.JOIN
    }
} 
```

或者

```
A.withCriteria() {
    cs{
        b{
        }
    }
} 
```

在这两种情况下，Hibernate 都使用两个查询。比我以前的 98 好多了；-)

# java - 在j2me中用字符串替换字符串

> ID：10626606
> 
> 赞同：1
> 
> 时间：2012-05-16T20:58:08.380
> 
> 标签：java, java-me, replace

`cannot find symbol`使用以下代码将字符串替换为字符串时，我在 netbeans 中遇到错误。

```
public String urlEncode(String msg) {

        if (msg != null) {
           msg=msg.replaceAll(" ","%20");
        }
        return msg;
    } 
```

需要帮忙 ！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T02:23:15.547

我创建了以下方法来用另一个字符串替换字符串。

```
private String replace( String str, String pattern, String replace ) 
{
    int s = 0;
    int e = 0;
    StringBuffer result = new StringBuffer();

    while ( (e = str.indexOf( pattern, s ) ) >= 0 ) 
    {
        result.append(str.substring( s, e ) );
        result.append( replace );
        s = e+pattern.length();
    }
    result.append( str.substring( s ) );
    return result.toString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:14:49.543

使用以下代码

```
private String replace(String needle, String replacement, String haystack) {
    String result = "";
    int index = haystack.indexOf(needle);
    if(index==0) {
        result = replacement+haystack.substring(needle.length());
        return replace(needle, replacement, result);
    }else if(index>0) {
        result = haystack.substring(0,index)+ replacement +haystack.substring(index+needle.length());
        return replace(needle, replacement, result);
    }else {
        return haystack;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T00:59:15.360

`URLEncoder`尝试发布在[***code.google.com***](http://code.google.com/p/jibjib/source/browse/trunk/javame/src/com/sugree/utils/URLEncoder.java)[**上JibLib**](http://code.google.com/p/jibjib/)移动客户端项目下的适用于 JavaMe的改编版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T21:07:49.990

您是否需要确定使用自己的方法来处理 URL 编码？只需使用 URLEncoder.encode(String s, String enc)

```
 @param   s  String to be translated.
  @param   enc   The name of a supported
  @return  the translated String. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T21:16:40.290

replaceAll 是在 Java 1.4 中引入的，我认为 J2ME 仅限于 1.3。您必须使用更高版本的 JDK 进行编译，这就是您在运行时收到符号错误的原因。

URLEncoder.encode (String s) 可能是你最好的选择。不幸的是，至强建议的 URLEncoder.encode(String s, String enc) 也是 JDK1.4 API 调用。

# php - 允许所有类型文件的文件上传网站危险吗？

> ID：10626607
> 
> 赞同：0
> 
> 时间：2012-05-16T20:58:12.213
> 
> 标签：php, html

在创建上传共享网站时，用户是否可以上传自己的 php 脚本并让它自动运行，即使他们不知道网站上传者将该脚本文件放在哪里？例如，如果网站上传了您的 php 文件，但将其命名为随机名称并将其放在一个秘密目录中，该脚本是否仍可以通过某些 PHP OnLoad 函数联系另一台服务器？或者脚本是否必须由某人执行才能运行其内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:00:57.997

只需将上传内容放入您网站中无法访问的文件夹中即可。（您可以使用 .htaccess 文件来实现）。

比你只需要一个处理下载的脚本。你现在应该知道，如果有人想上传一个 exe 文件，他也可以重命名它。但是，如果您只想防止上传和访问 php 代码的攻击，则此方法应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:01:11.853

PHP 脚本不能自动运行。我的意思是，它必须由某人或某物执行，因为您计算机上的软件需要由某人或某物执行。

您可以使用 htaccess 保护您的上传目录，以防止浏览器访问/执行。

# orchardcms - Orchard CMS：登录页面不适用于我的自定义布局

> ID：10626615
> 
> 赞同：0
> 
> 时间：2012-05-16T20:58:42.547
> 
> 标签：orchardcms

我对果园很陌生。

我创建了一个基于 Minty 主题的新主题。唯一真正的变化是布局，我从现有的 asp.net 母版页改编了 html，以匹配果园风格的 razor layout.cshtml。我有使用 MVC 和 razor 的经验，所以这方面没有问题......除非我错过了一些重要的事情。

问题是登录页面。单击登录链接会将我带到正确的 url，而不会出现错误，但不会呈现登录表单。我已经通过检查谷歌浏览器中的元素检查了这种情况。

我知道设置小部件等，我可以使内容出现。但是，当请求登录 url 时，我找不到如何插入登录表单。我认为它使用 Orchard.Users 模块，但不确定如何使用。它需要一个特定的区域吗？我不明白为什么，但看看其他的。

结果，我无法解决我的问题...

任何指针？

任何书籍或其他学习媒体？

我的 layout.cshtml 的代码是：

```
@functions {
    // To support the layout classifaction below. Implementing as a razor function because we can, could otherwise be a Func<string[], string, string> in the code block following.
    string CalcuClassify(string[] zoneNames, string classNamePrefix) {
        var zoneCounter = 0;
        var zoneNumsFilled = string.Join("", zoneNames.Select(zoneName => { ++zoneCounter; return Model[zoneName] != null ? zoneCounter.ToString() : "";}).ToArray());
        return HasText(zoneNumsFilled) ? classNamePrefix + zoneNumsFilled : "";
    }
}
@{
    /* Global includes for the theme
    ***************************************************************/

    SetMeta("X-UA-Compatible", "IE=edge,chrome=1");
    Style.Include("http://fonts.googleapis.com/css?family=Handlee");
    Style.Include("http://html5shiv.googlecode.com/svn/trunk/html5.js");
    Style.Include("site.css");
    Script.Require("jQuery").AtHead();
    Script.Require("jQueryUI_Core").AtHead();
    Script.Require("jQueryUI_Tabs").AtHead();
    Script.Include("http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.4/modernizr.min.js").AtHead();
    Style.Include("TagDefaults.css");
    Style.Include("LayoutStructure.css");
    Style.Include("LayoutStyling.css");
    Style.Include("TopMenu.css");
    Style.Include("LeftBlock.css");
    Style.Include("RightBlock.css");
    Style.Include("MenuAdapter.css");
    Style.Include("Content.css");
    Style.Include("FloatedBoxes.css");
    Style.Include("Helen.css");

    /* Some useful shortcuts or settings
    ***************************************************************/

    Func<dynamic, dynamic> Zone = x => Display(x); // Zone as an alias for Display to help make it obvious when we're displaying zones

    /* Layout classification based on filled zones
    ***************************************************************/

    //Add classes to the wrapper div to toggle aside widget zones on and off
    var asideClass = CalcuClassify(new [] {"Sidebar"}, "aside-"); // for aside-1, aside-2 or aside-12 if any of the aside zones are filled
    if (HasText(asideClass)) {
        Model.Classes.Add(asideClass);
    }

    //Add classes to the wrapper div to toggle tripel widget zones on and off
    var tripelClass = CalcuClassify(new [] {"TripelFirst", "TripelSecond", "TripelThird"}, "tripel-"); // for tripel-1, triple-2, etc. if any of the tripel zones are filled
    if (HasText(tripelClass)) {
        Model.Classes.Add(tripelClass);
    }

    //Add classes to the wrapper div to toggle quad widget zones on and off
    var footerQuadClass = CalcuClassify(new [] {"FooterQuadFirst", "FooterQuadSecond", "FooterQuadThird", "FooterQuadFourth"}, "split-"); // for quad-1, quad-2, etc. if any of the quad zones are filled
    if (HasText(footerQuadClass)) {
        Model.Classes.Add(footerQuadClass);
    }

    var slideshowClass = CalcuClassify(new[] {"HomeSlideshow"}, "slideshow-");
    if (HasText(slideshowClass)) {
        Model.Classes.Add(slideshowClass);
    }

    /* Inserting some ad hoc shapes
    ***************************************************************/

    //WorkContext.Layout.Header.Add(New.Branding(), "5"); // Site name and link to the home page
    //WorkContext.Layout.Footer.Add(New.BadgeOfHonor(), "5"); // Powered by Orchard
    WorkContext.Layout.Footer.Add(New.User(), "10"); // Login and dashboard links

    /* Last bit of code to prep the layout wrapper
    ***************************************************************/

    Model.Id = "layout-wrapper";
    var tag = Tag(Model, "div"); // using Tag so the layout div gets the classes, id and other attributes added to the Model
}

@tag.StartElement        
<a name="top"></a>
    <div id="SiteHeader">
        &nbsp;
    </div>
    <div id="PageContainer">
        <div style="position: absolute; Left:-80px; top:-88px;z-index:1000;">
            <img id="bird" title="Pheasant" src="/Themes/TheFarmsBlogs/Styles/Images/PositionedImages/pheasant.gif" />
        </div>

        <div class="SiteMenu"><p>Hello Menu</p></div>
        <div id="Specialized">  
        <div id="PageName">
            <!-- 
                PageName NOT in use!
             -->
        </div>

        @if (Model.RightColumn != null) {
        <div id="RightCol">
            @Zone(Model.RightColumn)
        </div>
        }
        <!-- Page divided into two main columns, of which the left column is subdivided as necessary -->
        <div id="LeftCol">
            <div id="PageBanner">
                <div id="PageBannerLeft">

                    @if (Model.MainImage != null) {
                    <div id="PageBannerImage">
                        @Zone(Model.MainImage)
                    </div>
                    }
                    @if(Model.TheStrip != null) {
                    <div id="TheStrip">
                        @Zone(Model.TheStrip)
                    </div>
                    }                   
                </div>
            </div>            
            <div id="SpecializedContent">
            @if(@Model.content != null)
            {
                @Zone(Model.content)
            }
            </div>
        </div>
        <div id="SpecializedFooter">
            &nbsp;
        </div>
    </div>

    <div id="PageFooter">
        &nbsp;
        @if (Model.FooterPage != null){ 
            @Zone(Model.FooterPage)
        }
    </div>
</div>
<div id="SiteFooter">
    @Display(Model.Footer)
    The Farms Ltd - &copy; 2007
</div>        
@tag.EndElement 
```

PS：品牌和荣誉徽章被注释掉了，因为我只是一点一点地启用以消除错误的根源。它将在实时站点中。

## 附录：

请参阅下面的 Bertrand Le Roy 的回答。Orchard.Users 模块需要一个带有大写 C 的内容区域。这立即解决了问题。

我添加了这一点，因为 Bertrand 的回答是试探性的，我想强调问题在于区域的名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T18:28:01.450

在 Orchard.Users 中，查找 Controllers/AccountController.cs。在那里，有一个 LogOn 操作。它创建一个 LogOn 形状，然后将其放入形状结果中。然后将其解析为 Views/LogOn.cshtml 模板（您可以在主题中覆盖该模板，只需将具有相同名称的文件放入其中，例如您可以调整的原始副本）。LogOn 模板将在主题布局中的内容区域中呈现。这回答了你的问题了吗？

我认为您犯的错误是命名您的内容区域内容（注意大小写）。

# c++ - 在 Windows CE 3 上将 PEM 转换为 DER

> ID：10626617
> 
> 赞同：3
> 
> 时间：2012-05-16T20:59:10.113
> 
> 标签：c++, windows-ce, cryptoapi, pem, der

我有一个 RSA 公钥加密包装器，它在桌面 Windows 和 Windows Embedded/POSReady 中运行良好。我需要将此系统移植到 Windows CE 5 和 Windows CE 3。在此系统的一部分中，我允许开发人员以多种编码导入各种加密对象，例如证书和密钥。最常用的编码是 Base64 编码的 PEM。在大多数版本的 Windows 上，很容易将编码转换为 Windows`CryptDecodeObjectEx`调用所需的二进制 (DER) 格式：

```
bool MyClass::externalToBinary( const DATA_BLOB &in, DATA_BLOB &outDER )
{
    DWORD flags;

    // This call determines the format and how much memory is needed in outDER
    if ( ::CryptStringToBinaryA( reinterpret_cast<char *>(in.pbData), in.cbData, CRYPT_STRING_ANY,     NULL, &outDER.cbData, NULL, &flags ) == false &&
         ::CryptStringToBinaryA( reinterpret_cast<char *>(in.pbData), in.cbData, CRYPT_STRING_HEX_ANY, NULL, &outDER.cbData, NULL, &flags ) == false )
    {
        // Log errors here using ::GetLastError();
        return false;
    }

    if ( ( outDER.pbData = new unsigned char[outDER.cbData] ) == NULL )
    {
        // Log errors here using ::GetLastError();
        return false;
    }
    return ( ::CryptStringToBinaryA( reinterpret_cast<char *>(in.pbData), in.cbData, flags, outDER.pbData, &outDER.cbData, NULL, NULL ) != FALSE );
} // end externalToBinary 
```

不幸的是，`CryptStringToBinary`在 Windows CE 3 的 CryptoAPI 版本中不存在。虽然我可以取消对不太流行的编码（例如十六进制）的支持，但我真的不想在 API 的 CE 3 版本中取消对 PEM 编码的支持。

有没有人可以`CryptStringToBinary`在 Windows CE 3 上运行的替代方案？使用此 API 的开发人员目前没有将 OpenSSL 作为依赖项，因此我不希望仅为此添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T11:04:54.570

好吧 - PEM 只是 base64 编码的 DER。因此，如果这是您唯一需要转换的地方；我只是放弃了 API 的细节；去掉任何空行或以“-”开头的行；和 base64 解码介于两者之间的任何内容。结果就是您所追求的 DER。WindowsCE3 有 Base64 的 Encode/Decodeter 类型；如果由于某种原因您不想/不想使用它 -[如何在 C 中进行 base64 编码（解码）？](https://stackoverflow.com/questions/342409/how-do-i-base64-encode-decode-in-c)或[http://www.adp-gmbh.ch/cpp/common/base64.html](http://www.adp-gmbh.ch/cpp/common/base64.html)是相当简单的“原始”版本。

# spring - 用于继承类的 Spring @Scheduled 注解

> ID：10626618
> 
> 赞同：1
> 
> 时间：2012-05-16T20:59:11.703
> 
> 标签：spring, inheritance, annotations, aop, scheduler

我正在尝试对服务层类使用 @Scheduled 注释。该类还通过 AOP 由日志服务监视。

当我让服务类实现一个接口时，Spring会抛出错误

```
Error creating bean with name 'dummyService' defined in file
......
......
Caused by: java.lang.IllegalStateException: failed to prepare task
    at org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor$1.doWith(ScheduledAnnotationBeanPostProcessor.java:114)
    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:452)
    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:430)
    at org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor.postProcessAfterInitialization(ScheduledAnnotationBeanPostProcessor.java:98)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1426)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 11 more
Caused by: java.lang.NoSuchMethodException: $Proxy23.run()
    at java.lang.Class.getMethod(Class.java:1605)
    at org.springframework.util.MethodInvoker.prepare(MethodInvoker.java:178)
    at org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor$1.doWith(ScheduledAnnotationBeanPostProcessor.java:111)
    ... 17 more 
```

这是服务层类：

```
package com.mydomain.web.myapp.service;
@Service
public class DummyService implements DummyI{
        @Scheduled(cron = "${some.cron.time}")
        public void run() {
        }
} 
```

如果我删除继承，它可以正常工作。这是为什么？

这就是我为日志服务所拥有的：

```
@Component
@Aspect
public class LoggingServiceImpl implements LoggingService {
        private final Logger log = LoggerFactory.getLogger(this.getClass());
        @Around("execution(* com.mydomain.web.myapp..*.*(..))")
        public Object log(ProceedingJoinPoint joinPoint) throws Throwable {
        ..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:16:18.670

您在这里有几个选择：

*   添加`run()`到`DummyI`界面

*   创建另一个只有`run()`方法（或使用[`java.lang.Runnable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)）的接口并实现该接口：

    ```
    public class DummyService implements DummyI, Runnable 
    ```

*   启用基于类 ( [cglib](/questions/tagged/cglib "显示标记为“cglib”的问题") ) 的代理

# java - 在运行时将类从文件系统加载到应用程序

> ID：10626619
> 
> 赞同：1
> 
> 时间：2012-05-16T20:59:11.973
> 
> 标签：java, jdbc, runtime, classpath

我有一个处理 jdbc 的应用程序。它假设可以在任何有 JRE 的 PC 中使用，但它不假设使用将使用 -cp 命令行或更改他/她的类路径变量。所以用户在文件系统的某个地方有我的应用程序、JRE 和一个 jdbc 驱动程序。现在他或她输入一个数据库连接信息，包括jdbc驱动jar的路径，然后发出sql请求。问题是我现在不知道如何使 jdbc 驱动程序类可以在此应用程序中访问。与用户显式将驱动程序添加到类路径的方式相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:23:08.503

我刚刚为您的其他帖子更改了部分[*miks 答案*](https://stackoverflow.com/questions/10624907/loading-jars-at-runtime/10625389#10625389)。

执行以下代码让我成功了。

```
import java.io.File;
import java.lang.reflect.Constructor;
import java.net.URL;
import java.net.URLClassLoader;

public class URLClassLoaderSample {
  public static void main( String [] args ) throws Exception {
    File f = new File( "/home/ravinder/Desktop/mysql-connector-java-5.1.18-bin.jar" );
    URLClassLoader urlCl = new URLClassLoader( new URL[] { f.toURL() }, System.class.getClassLoader() );

    Class mySqlDriver = urlCl.loadClass( "com.mysql.jdbc.Driver" );
    System.out.println( mySqlDriver.newInstance() );
    System.out.println( "Is this interface? = " + mySqlDriver.isInterface() );

    Class interfaces[] = mySqlDriver.getInterfaces();
    int i = 1;
    for( Class _interface : interfaces ) {
        System.out.println( "Implemented Interface Name " + ( i++ ) + " = " + _interface.getName() );
    } // for(...)

    Constructor constructors[] = mySqlDriver.getConstructors();
    for( Constructor constructor : constructors ) {
        System.out.println( "Constructor Name = " + constructor.getName() );
        System.out.println( "Is Constructor Accessible? = " + constructor.isAccessible() );
    } // for(...)
  } // psvm(...)
} // class URLClassLoaderSample 
```

看到的输出如下：

```
com.mysql.jdbc.Driver@60aeb0
Is this interface? = false
Implemented Interface Name 1 = java.sql.Driver
Constructor Name = com.mysql.jdbc.Driver
Is Constructor Accessible? = false 
```

*`And I don't understand what I should with log4jClass variable in my case *(com.mysql.jdbc.Driver)`*
让我希望你现在明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:02:48.663

在这种情况下，最好的解决方案是将所需的驱动程序与您的应用程序一起分发，并包含一个可执行包装器或一个相应地设置所需变量的 shell 脚本。这允许用户开箱即用地使用它，而不必弄乱任何复杂的配置，也不需要他们下载任何额外的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:23:49.907

嗯，jdbc`Class.forName("org.postgresql.Driver");`用来加载驱动。因此，一旦有了 jar 文件，并将其添加到类路径中，这部分就很容易了。只需将驱动程序 fqn 类名的散列保存到 jar 文件名即可。或者您可以扫描 jar 中的 Driver 类。

[这是](https://stackoverflow.com/questions/252893/how-do-you-change-the-classpath-within-java)找到后如何将 jar 文件添加到类路径的便捷答案。

# c++ - 尝试创建共享库时出现 C/C++ 错误。制作库的静态版本时不会出现错误

> ID：10626621
> 
> 赞同：0
> 
> 时间：2012-05-16T20:59:19.133
> 
> 标签：c++, c, g++, shared-libraries, static-libraries

我正在尝试创建[praatlib](http://www.findthatfile.com/search-39453735-hZIP/winrar-winzip-download-praatlib-0.3.tar.gz.htm)的共享库版本。代码本身带有一个生成静态库的 Makefile，但出于我的目的，我需要一个共享库。我已经尝试了两件事。我尝试做的第一件事是编辑 Makefile 以生成一个共享库以及静态库。

这是生成静态库的生成文件的一部分：

```
libpraat.a:
   cd GSL; make
   cd num; make
   cd num/glpk; make
   cd kar; make
   cd audio; make
   cd mp3; make
   cd FLAC; make
   cd stat; make
   cd fon; make
   cd dwsys; make
   cd dwtools; make
   cd LPC; make
   cd FFNet; make
   cd artsynth; make
   cd library; make
   rm -f libpraat.a
   ar r libpraat.a `find num glpk audio stat LPC FFNet dwtools artsynth fon stat dwsys GSL kar FLAC mp3 library -name "*.o"` 
```

这是我为生成共享库而添加的内容。

```
libpraat.so:
   cd GSL; make
   cd num; make
   cd num/glpk; make
   cd kar; make
   cd audio; make
   cd mp3; make
   cd FLAC; make
   cd stat; make
   cd fon; make
   cd dwsys; make
   cd dwtools; make
   cd LPC; make
   cd FFNet; make
   cd artsynth; make
   cd library; make
   rm -f libpraat.so
   $(CC) -shared -Wl,-soname,libpraat.so -o libpraat.so `find num glpk audio stat LPC FFNet dwtools artsynth fon stat dwsys GSL kar FLAC mp3 library -name "*.o"` 
```

静态库的制作没有遇到任何问题，但是当它尝试制作共享库时会出错。

这是错误消息的开头（有很多错误，但它们都与我在下面粘贴的基本相同）。

```
gcc -std=gnu99 -DUNIX -Dlinux -DCONSOLE_APPLICATION -I /usr/local/include -I /usr/X11R6/include -Wimplicit -Wreturn-type -Wunused -Wunused-parameter -Wuninitialized -O -fPIC -Wall -shared -Wl,-soname,libpraat.so -o libpraat.so `find num glpk audio stat LPC FFNet dwtools artsynth fon stat dwsys GSL kar FLAC mp3 library -name "*.o"`
stat/Table.o: In function `Table_getStringValue':
Table.c:(.text+0x246): multiple definition of `Table_getStringValue'
stat/Table.o:Table.c:(.text+0x246): first defined here
stat/Table.o:(.data.rel+0x174): multiple definition of `classTable'
stat/Table.o:(.data.rel+0x174): first defined here
stat/Table.o:(.data.rel+0xb4): multiple definition of `classTableRow'
stat/Table.o:(.data.rel+0xb4): first defined here
stat/Table.o: In function `Table_appendRow':
Table.c:(.text+0x1147): multiple definition of `Table_appendRow'
stat/Table.o:Table.c:(.text+0x1147): first defined here
stat/Table.o: In function `Table_initWithoutColumnNames':
Table.c:(.text+0x11a5): multiple definition of `Table_initWithoutColumnNames'
stat/Table.o:Table.c:(.text+0x11a5): first defined here
stat/Table.o: In function `Table_createWithoutColumnNames':
Table.c:(.text+0x123f): multiple definition of `Table_createWithoutColumnNames'
stat/Table.o:Table.c:(.text+0x123f): first defined here
stat/Table.o: In function `Table_insertColumn':
Table.c:(.text+0x1298): multiple definition of `Table_insertColumn'
stat/Table.o:Table.c:(.text+0x1298): first defined here
stat/Table.o: In function `Table_appendColumn':
Table.c:(.text+0x151e): multiple definition of `Table_appendColumn' 
```

在尝试了很多不同的事情并感到沮丧之后，我尝试使用以下命令将我直接拥有的静态库转换为共享库：

```
g++ -std=c++98 -fpic -g -O1 -shared -o libpraat.so -Wl,--whole-archive libpraat.a 
```

但我收到了与以前类似的错误消息。我在构建大型项目或库方面不是很有经验，所以我不知道如何让它工作。如果有人能解释导致我遇到错误的原因以及如何修复它，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:32:48.817

让我们仔细看看您用于查找目标文件的命令：

```
find num glpk audio stat LPC FFNet dwtools artsynth fon \
        stat dwsys GSL kar FLAC mp3 library -name "*.o" 
```

请注意，它`stat`出现了两次。不要那样做。

# java - MANIFEST.MF 的正确命名约定是什么

> ID：10626622
> 
> 赞同：0
> 
> 时间：2012-05-16T20:59:21.273
> 
> 标签：java, manifest, war

如何设置生成的战争文件的入口点？这是我的清单文件

```
Manifest-Version: 1.0
Main-Class: Test 
```

包名：

```
Manifest-Version: 1.0
Main-Class: com.process.Test 
```

当我部署它并尝试使用以下命令从 cmd 运行它时：java -jar myFile.war

我得到：

```
NoClassDefFoundError: Test 
```

不管我是否用主类指定包名。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:05:02.027

你的班级没有包吗？尝试将其指定为：

```
Main-Class: com.maventest.Test 
```

# php - php邮件功能不起作用

> ID：10626625
> 
> 赞同：-1
> 
> 时间：2012-05-16T20:59:27.213
> 
> 标签：php

```
$to= 'somebody@somedomain.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
'Reply-To: webmaster@example.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers); 
```

我正在使用此代码尝试发送电子邮件。但我已经等了 10 分钟，还没有收到任何电子邮件。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:12:30.680

您的代码没有任何问题：我复制了它并收到了电子邮件。

可能是发到垃圾箱了，也可能是因为邮件服务器的IP被封禁了，邮件都没有到达。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:34:13.853

我认为您正在使用`IIS`服务器，有时它不支持使用发送邮件`PHP`并给出错误。

为了克服这个问题，您可以在用于发送邮件的 PHP 页面中使用以下代码：

```
<?php ini_set("sendmail_form", "info@mydomain.com"); ?> 
```

将代码放在本页的第一行，然后编写其他代码。尝试一下。

我猜你的邮件将从这个页面发送给你的发件人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:09:15.203

您的托管公司可能没有启用 mail() 功能，或者您没有检查邮箱中的“垃圾”文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T21:15:10.087

您可以查看[http://ch.php.net/manual/en/mail.requirements.php](http://ch.php.net/manual/en/mail.requirements.php)页面：

> 要使 Mail 函数可用，**PHP 必须**在编译期间访问系统上的 sendmail 二进制文件。如果您使用其他邮件程序，例如 qmail 或 postfix，请务必使用它们随附的适当的 sendmail 包装程序。PHP 将首先在您的 PATH 中查找 sendmail，然后在以下位置查找：/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib:/usr/lib。强烈建议从您的 PATH 中获取 sendmail。此外，编译 PHP 的用户必须有权访问 sendmail 二进制文件。

# c# - C#中的数字键盘键代码

> ID：10626626
> 
> 赞同：6
> 
> 时间：2012-05-16T20:59:28.957
> 
> 标签：c#, winforms

我使用以下这些代码来处理数字键盘键。

```
if (e.KeyCode == Keys.NumPad0 || e.KeyCode == Keys.D0)
{
   MessageBox.Show("You have pressed numpad0");
}
if (e.KeyCode == Keys.NumPad1 || e.KeyCode == Keys.D1)
{
   MessageBox.Show("You have pressed numpad1");
} 
```

也适用于其他小键盘键。但我想知道如何在小键盘旁边的 "+" 、 "*" 、 "/" 、 " -" 、 " . " 中做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T21:04:14.610

查看整个[`Keys`枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)。你有`Keys.Mutiply`, `Keys.Add`, 等等。

请注意，这*不是*`Keys.D0`数字键盘 0，而是非数字键盘 0。

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T07:33:09.227

对于 "+" ， "*" ， "/" ，我们可以使用 KeyDown 事件，对于 "-" ， "." 我们可以使用 KeyPress 事件。

以下是代码：

```
private void button1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Add)
        {
            MessageBox.Show("You have Pressed '+'");
        }
        else if (e.KeyCode == Keys.Divide)
        {
            MessageBox.Show("You have Pressed '/'");
        }
        else if (e.KeyCode == Keys.Multiply)
        {
            MessageBox.Show("You have Pressed '*'");
        }
    }
private void button1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (e.KeyChar == '.')
        {
            MessageBox.Show("You have pressed '.'");
        }
        else if (e.KeyChar == '-')
        {
            MessageBox.Show("You have pressed '-'");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T02:03:56.787

我曾经`switch`让我的工作。

我正在制作一个计算器，甚至在目标文本框上也创建了一个 KeyDown。然后我用：

```
switch (e.KeyCode)
{
    case Keys.NumPad1:
        tbxDisplay.Text = tbxDisplay.Text + "1";
    break;
    case Keys.NumPad2:
        tbxDisplay.Text = tbxDisplay.Text + "2";
    break;
    case Keys.NumPad3:
        tbxDisplay.Text = tbxDisplay.Text + "3";
    break;
} 
```

等等

要考虑的另一件事是，如果用户随后单击屏幕上的按钮，则焦点将从文本框中丢失，并且键条目将不再起作用。但这很容易通过按钮上的 .focus() 来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-25T20:47:34.997

有一种简单的方法可以在不查看手册的情况下学习所有键码。

创建一个表单，然后转到表单的 KeyDown 事件，然后添加这个

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
   {
      MessageBox.Show(e.KeyCode.ToString());
   } 
```

然后你会得到你在键盘上按下的任何键的名称*

# php - 使用 session_set_save_handler() 声明的会话类

> ID：10626631
> 
> 赞同：0
> 
> 时间：2012-05-16T20:59:36.930
> 
> 标签：php

这是我的课，

```
<?php
class session {
// session-lifetime
var $lifeTime;
// mysql-handle
var $dbHandle;

function open($savePath, $sessName) {
// get session-lifetime
$this->lifeTime = get_cfg_var("session.gc_maxlifetime");
// open database-connection
$dbHandle = @mysql_connect("server","user","pass");
$dbSel = @mysql_select_db("database",$dbHandle);
// return success
if(!$dbHandle || !$dbSel)
return false;
$this->dbHandle = $dbHandle;
return true;
}

function close() {
$this->gc(ini_get('session.gc_maxlifetime'));
// close database-connection
return @mysql_close($this->dbHandle);
}

function read($sessID) {
// fetch session-data
$res = mysql_query("SELECT session_data AS d FROM ws_sessions
WHERE session_id = '$sessID'
AND session_expires >
".time(),$this->dbHandle);
// return data or an empty string at failure
if($row = mysql_fetch_assoc($res))
return $row['d'];
return "";
}

function write($sessID,$sessData) {
// new session-expire-time
$newExp = time() + $this->lifeTime;
// is a session with this id in the database?
$res = mysql_query("SELECT * FROM ws_sessions
WHERE session_id =
'$sessID'",$this->dbHandle);
// if yes,
if(mysql_num_rows($res)) {
// ...update session-data
mysql_query("UPDATE ws_sessions
SET session_expires = '$newExp',
session_data = '$sessData'
WHERE session_id = '$sessID'",$this->dbHandle);
// if something happened, return true
if(mysql_affected_rows($this->dbHandle))
return true;
}
// if no session-data was found,
else {
// create a new row
mysql_query("INSERT INTO ws_sessions (
session_id,
session_expires,
session_data)
VALUES(
'$sessID',
'$newExp',
'$sessData')",$this->dbHandle);
// if row was created, return true
if(mysql_affected_rows($this->dbHandle))
return true;
}
// an unknown error occured
return false;
}

function destroy($sessID) {
// delete session-data
mysql_query("DELETE FROM ws_sessions WHERE session_id =
'$sessID'",$this->dbHandle);
// if session was deleted, return true,
if(mysql_affected_rows($this->dbHandle))
return true;
// ...else return false
return false;
}

function gc($sessMaxLifeTime) {
// delete old sessions
mysql_query("DELETE FROM ws_sessions WHERE session_expires < " .
time(), $this->dbHandle);
// return affected rows
return mysql_affected_rows($this->dbHandle);
}
}
?> 
```

我是从 php 手册中获取的。如果我在脚本中测试这个类，一切都会好起来的。这边走，

```
<?php
require_once 'session/sessionDb.php';

$session = new session();

session_set_save_handler(array(&$session,"open"),
array(&$session,"close"),
array(&$session,"read"),
array(&$session,"write"),
array(&$session,"destroy"),
array(&$session,"gc"));

session_start();
$_SESSION['name'] = "MySession";

if (!isset($_SESSION['initiated']))
{
session_regenerate_id();
$_SESSION['initiated'] = true;
}

echo 'Sesiones.-<br/><br/>';

$session_id = session_id();
echo '<br/>Sesion Id: ' . $session_id . '<br/>';

$return = $session->write($session_id, 'user1');

if($return)
{
$value = $session->read($session_id);
echo '<br/>User en sesion: ' . $value . '<br/>';
}

$return = $session->write($session_id, 'user2');

if($return)
{
$value = $session->read($session_id);
echo '<br/>User en sesion: ' . $value . '<br/>';
}

$session->close();
echo '<br/>Sesion cerrada!!!<br/>';
?> 
```

但是当我在我的网站上尝试它时不起作用。如果我尝试验证用户是否已经登录，我会得到用户已登录，就好像他已经登录而他没有登录一样。这是脚本 login.php，

```
<?php

$cliente = "";

if(isset($_POST["user"]) && isset($_POST["pass"]))
{
if((trim($_POST["user"]) == '') || (trim($_POST["pass"]) == ''))
{
?>
<script type="text/javascript">
alert("Debes logarte correctamente.");
</script>
<?php
}
else
{
$logged = false;

if(trim($session->read($session_id)) ==
trim($_POST["user"]));
{
?>
<script type="text/javascript">
alert('The user is already logged in');
</script>
<?php
$logged = true;
}

if(!$logged)
{
$db = new DBAccess(DB_SERVER, DB_USER, DB_PASS,
DB_DATABASE);
$db->connect();

$sql = "SELECT nombre FROM " . TABLE_CLIENTE .
" WHERE id_usuario IN " .
"(SELECT id_usuario FROM " . TABLE_USUARIO . "
WHERE login = '" . trim($_POST["user"]) . "')";

$cliente = $db->result($sql, 0, 'nombre');

$db->close();
$db = null;

if($session->write($session_id, trim($_POST["user"])))
{
?>
<script type="text/javascript">
alert("User registered in session.");
</script>
<?php
}
else
{
?>
<script type="text/javascript">
alert("This does not work.");
</script>
<?php
}
}
}
}
?> 
```

这里 trim($session->read($session_id)) == trim($_POST["user"]) 为真，这意味着验证始终为真。如果我不验证，我会收到消息：这不起作用。

在我的主页的标题中，

```
require_once 'private/classes/session/sessionDb.php';

$session = new session();
session_set_save_handler(array(&$session,"open"),
array(&$session,"close"),
array(&$session,"read"),
array(&$session,"write"),
array(&$session,"destroy"),
array(&$session,"gc"));

session_start();
$_SESSION['name'] = "MySession";

if (!isset($_SESSION['initiated']))
{
session_regenerate_id();
$_SESSION['initiated'] = true;
}
$session_id = session_id(); 
```

我想我为整个站点设置了 $session 和 $session_id 但他们没有。

出了什么问题？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T11:40:38.777

解决。

这是我在 home.php 文件开头的代码，

```
global $session;
global $session_id;
global $mysession;

session_write_close();
$session = new session();
session_set_save_handler(array(&$session,"open"),
                         array(&$session,"close"),
                         array(&$session,"read"),
                         array(&$session,"write"),
                         array(&$session,"destroy"),
                         array(&$session,"gc"));

if(isset($_COOKIE[session_name()]))
$mysession = $_COOKIE[session_name()];
else {
$mysession = md5(microtime().rand(1,9999999999999999999999999));
$parametros_cookies = session_get_cookie_params();
setcookie(session_name($mysession), $mysession, time()+3600,                       $parametros_cookies['path']);
}

ini_set('session.gc_probability', 100);
ini_set('session.gc_divisor', 100);
session_name($mysession);
session_start();
$old = session_id();
session_regenerate_id(true);
$session_id = session_id();
$rsi = new RegenerateSessionId($old, $session_id);
$rsi->regenerate_id();
unset($rsi);
$rsi = null; 
```

会话启动并创建会话变量，您可以键入 $_SESSION['user'] 就足够了。

要关闭会话，我使用如下 logout.php 脚本，

```
global $session;

if(isset($session) && isset($_POST["logout"]))
{   
if(trim($_POST["logout"]) == 'logOut')
{   
    $session_name = session_name();

    unset($session);
    $session = null;

    session_destroy();

    $parametros_cookies = session_get_cookie_params(); 
    setcookie($session_name,'0',1,$parametros_cookies["path"]);
}
} 
```

问候。

# windows - 运行 1 天后看不到 Matlab 命令窗口

> ID：10626639
> 
> 赞同：2
> 
> 时间：2012-05-16T21:00:11.233
> 
> 标签：windows, matlab

我的程序已经运行了很长时间。我昨天开始运行它。现在我无法通过单击任务栏上的命令窗口和编辑器来查看它们。我也尝试了任务管理器的“切换到”按钮。

该程序在运行时会在命令窗口上显示一些消息。这决定了程序的当前步骤。

如何确定我的程序是否正常运行？或者，我怎样才能找到它是否被困在无限循环中或 MATLAB 已经崩溃。

两个 CPU 内核都很忙。CPU 使用率在 50-70% 之间，MATLAB 占用 1,658,044 K 内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T22:39:49.087

如果长时间打开并运行，Matlab 有崩溃的趋势。它发生在我身上的次数比我记得的要多。如果 Matlab 一天后没有响应，那么我很少能成功地让代码完成。您可能需要重新启动程序。

在处理长时间运行的代码时，我建议您做几件事。

首先，找到一种方法来保存中间结果。由于我的工作通常使用迭代数值算法，因此我在算法的几次迭代后保存了我的工作空间。像`temp.mat`. 这样，如果 Matlab 崩溃，您可以从中间结果重新开始工作。

其次，如果您不需要 Matlab GUI，请不要使用它。在您的情况下，打开 DOS 提示符并在没有桌面的情况下运行 Matlab。执行此操作的命令类似于：

```
start matlab -nosplash -nodesktop -minimize -r matlab_filename_here -logfile c:\temp\logfile 
```

我不是 Windows 用户。该命令可能会启动 GUI，但将其隐藏。它不会在 *NIX 系统上启动，这绝对有助于成功评估长期运行的程序。试试看是否有帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:09:52.850

了解程序是否崩溃的最好方法是打开 Windows 的“资源监视器”。检查您正在运行的 matlab 任务是否具有不同的磁盘和内存访问时间。

# javascript - 进度条 MVC3

> ID：10626640
> 
> 赞同：0
> 
> 时间：2012-05-16T21:00:17.677
> 
> 标签：javascript, jquery, asp.net-mvc-3, jquery-ui

我的应用程序中有上传功能。此函数上传一个 excel 文件并对其进行解析并将数据复制到数据库中。实际的上传并没有那么长，但解析确实如此。我想要一个进度条，这样我就可以给用户一些费用。

我不太确定如何去做。我在网上找到的东西并没有那么有用。

这是我到目前为止所拥有的..

我的观点：

```
<div>
    @using (Html.BeginForm("Upload", "Administrator", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary(true, "File upload was unsuccessful. Please correct the errors and try again.")
        <input type="file" name="FileUpload1" />
        <input type="submit" name="Submit" id="Submit" value="Upload" onclick=" return startUpload();"/>
    }
</div>
<input type="button" value="test" onclick=" return startUpload();"/>
<div id="loadingScreen" title="Loading...">
    <div id="progressbar"></div>
</div> 
```

我的脚本：

```
<script type="text/javascript">

$(document).ready(function() {
    // create the loading window and set autoOpen to false
    $("#loadingScreen").dialog({
        autoOpen: false,    // set this to false so we can manually open it
        dialogClass: "loadingScreenWindow",
        closeOnEscape: false,
        draggable: false,
        minWidth: 30,
        minHeight: 30,
        modal: true,
        buttons: {},
        resizable: false,
        open: function(event, ui) {
            $(".ui-dialog-titlebar-close").hide();
        },
    }); // end of dialog
});
    $(function () {
        //Progressbar initialization
        $("#progressbar").progressbar({ value: 0 });
    });

    function startUpload() {
        if (confirm("Doing this will override any previous data. Are you sure you want to proceed?")) {
            $("#loadingScreen").dialog('open');
            startProgressBar();
            return true;
        } else {
            return false;
        }
    }
    function startProgressBar() {
        //Making sure that progress indicate 0
        $("#progressbar").progressbar('value', 0);
        //Setting the timer
        setTimeout("updateProgressbar()", 500)
    };

    function updateProgressbar() {
        $.get('@Url.Action("UploadProgress")', function (data) {
            alert(data);
            //Updating progress
            $("#progressbar").progressbar('value', data);
            setTimeout("updateProgressbar()", 500)
        });
    };
</script> 
```

它的作用是显示带有进度条的模式对话框，但进度条没有更新。

但是，如果我有以下按钮

```
<input type="button" value="test" onclick=" return startUpload();"/> 
```

这会调出模态框并更新栏。

我可以从中理解的是，由于上传按钮正在发布一个帖子，我无法获得直到完成......？？？

我对 JavaScript 不太满意，所以如果我正在做一些非常可怕的事情，请告诉我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:03:05.717

这可能有点矫枉过正，但您可以使用[SignalR](https://github.com/SignalR/SignalR/wiki/Getting-Started)。这是一个专门用于服务器和客户端之间实时通信的库。

您将使用常规操作上传文件，然后呈现显示解析进度的 SignalR 页面（服务器在解析时向客户端发送定期更新）。

有关进度条的详细介绍，请参阅[本文。](http://msdn.microsoft.com/en-us/magazine/hh852586.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:07:16.400

有漂亮而简单的进度条，它只是 HTML+CSS+JavaScript。您必须调用 JavaScript 函数来刷新滑块。在此处查找描述：[进度条](http://ruwix.com/simple-javascript-html-css-slider-progress-bar/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T10:25:59.963

可能这会对您有所帮助.. 只需在您的提交单击上调用 fadeIn() 方法。

```
$('Submit').click(function () {<br />
    $("#loadingScreen").fadeIn();<br />
}); 
```

# wpf - 将 ListView 的宽度限制为父项以强制子文本换行

> ID：10626648
> 
> 赞同：1
> 
> 时间：2012-05-16T21:01:01.707
> 
> 标签：wpf, layout

我试图获得一个类似于聊天窗口的窗口，其中绘制了一个文本项列表。窗口应该可以调整大小，并且每个文本项如果不适合一行则应该换行。

到目前为止我所拥有的：

`MessageItem`- 一个用户控件，一个边框中的多行文本块

```
<Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
    <Border BorderBrush="Silver" BorderThickness="1" Height="Auto" HorizontalAlignment="Left" Margin="0,10,0,10" Name="messageContainer" VerticalAlignment="Top" Width="Auto">
        <TextBlock Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="messageContent" VerticalAlignment="Stretch" Width="Auto" Text="This is some longer text. Wow that wasn't as long as I thought." TextWrapping="Wrap" Padding="10" />
    </Border>
</Grid> 
```

`MessageBox`- 具有包含 MessageItems 的 ListView 的用户控件

```
<Grid Name="messageGrid" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <!--<StackPanel Height="Auto" HorizontalAlignment="Stretch" Margin="0" Name="messagePanel" VerticalAlignment="Stretch" Width="Auto">

        </StackPanel> -->
        <ListView HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">
            <local:MessageItem></local:MessageItem>
        </ListView>
    </ScrollViewer>
</Grid> 
```

问题：

如果我使用注释掉的 StackPanel 来保存 MessageItem，它将正确缩小 MessageItem（并导致文本换行）。如果我使用 ListView，它不会缩小。

我或多或少地从研究中弄清楚了原因，但我无法弄清楚如何解决它。据我所知，我需要覆盖 MeasureOverride 和/或 ArrangeOverride，但我对 WPF 太陌生了，不知道我在做什么。（边缘）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:33:15.960

我不确定为什么要将 ListView 放在 ScrollViewer 中，因为 ListView 在内部有自己的 ScrollView。

为了让您的 MessageItems 进行包装，您需要关闭任何水平滚动条，否则容器（ListView 或 ScrollViewer）将为 MessageItem 提供所需的空间并显示滚动条。

尝试

```
<ScrollViewer ... ScrollViewer.HorizontalScrollBarVisibility="Disabled"/> 
```

和

```
<ListView ... ScrollViewer.HorizontalScrollBarVisibility="Disabled"/> 
```

虽然我不确定你是否需要 ScrollViewer。

最好使用 ListBox 和 ItemTemplate 而不是 ListView 和用户控件

# xml - 将多个 XML 文档流组合成一个有效文档

> ID：10626651
> 
> 赞同：0
> 
> 时间：2012-05-16T21:01:12.707
> 
> 标签：xml, xslt

我有以下要编辑的 XML 文件。该文件开发不佳，因此在整个文档中包含多个名称空间声明和关闭根标记。有没有办法去掉这些额外的命名空间和结束标签，只留下文件顶部的 1 个命名空间和底部的 1 个结束标签？

以下是该文件的简化版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<p:demographic xmlns:p="http://crown.esrd.net/crown"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://crown.esrd.net/crown crown.xsd">
<patient>
<lastName>JOHNS</lastName>
<firstName>JASON</firstName>
<middleInitial>Y</middleInitial>
</patient>
</p:demographic>
<?xml version="1.0" encoding="UTF-8"?>
<p:demographic xmlns:p="http://crown.esrd.net/crown"xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://crown.esrd.net/crown crown.xsd">
<patient>
<lastName>CALDWELL</lastName>
<firstName>PENNY</firstName>
<middleInitial>Y</middleInitial>
</patient>
</p:demographic> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:17:36.687

好吧，从你发布的内容来看。只需使用文本编辑器删除除第一个 xml 指令之外的所有内容。添加一个根节点开始标记，将命名空间添加到其中撕掉其余部分，然后添加一个结束根标记。

鲍勃是你妈妈的姐姐的弟弟。

如果你有一些代码，编写一些代码来做到这一点，应该不会太难。

# css - 让 CSS3 过渡更改为动态高度

> ID：10626658
> 
> 赞同：0
> 
> 时间：2012-05-16T21:02:08.017
> 
> 标签：css, css-transitions

我有一组 div 框，它们将根据单击的内容在不同时间显示。它需要动画才能滑下。为此，我在某个时间更改每个 div 的高度，然后 CSS3 过渡接管并缓和它。

现在，如果我提供要更改的框的高度，它可以正常工作，但我不能总是提供，因为内容是动态的并且可能很高。但是当我定义`auto`为高度时，过渡将其变为 0，然后将大小变为内容。我怎样才能让它而不是滑动到 0，而是根据内容滑动到 div 的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:09:57.997

可悲的是，经过大量搜索，发现它不可能自动执行，但我的解决方案是找到内部元素（`p`正在更改的元素）并将`clientHeight`添加的元素与任何其他常量一起使用，并将其用作定义的新高度。有点忙，但效果很好。

# asp.net-mvc - ASP.Net MVC 3 字典绑定

> ID：10626659
> 
> 赞同：2
> 
> 时间：2012-05-16T21:02:10.890
> 
> 标签：asp.net-mvc, asp.net-mvc-3

您好，我在 MVC 3 项目中定义了一个模型对象，该对象具有如下 Dictionary 属性：

```
MyObj.ObjDictionary<string,string> 
```

我有两个控制器方法，一个处理返回视图，另一个处理来自视图的 POSTed 表单

```
public ActionResult Scanner(string val_1, string val_2, string val_3)
{
 //Fetch sessionObj from Model
 MyObj sessionObj = getSessionObj(val_1, val_2, val_3);

 //At this point model.ObjDictionary<string,string> contains data
 return View(sessionObj);
}

[HttpParamAction]
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Scanner(MyObj model)
{
  //At this point model.ObjDictionary<string,string> is null
  //i.e. binding is not being properly achieved

  //Validate POSTed data
} 
```

在视图中，我遍历每个键值对 (kvp)。必须以这种方式完成，因为该属性是动态的，而且我无法知道会有多少字典值。

```
@using (Html.BeginForm("Action", "Home")) 
{
    @foreach (var kvp in Model.ObjDictionary)
    {
            <span>@Html.Label("Scan " + @kvp.Key)</span>
            <span>@Html.TextBox(kvp.Key, "", new { @style = "font-size:Medium;width:400px;" })</span>
    }
   <input type="submit" name="Cancel" value="Cancel" />
   <input type="submit" id="Scanner" name="Scanner" value="Scanner" />
} 
```

目标是为用户提供一种输入数据并将数据绑定到特定键值的方法。我的问题是 Model.ObjDictionary 在发布时为空。我不确定我做错了什么，我阅读了[这篇](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)文章，但这假设字典中预先存在值。ModelBinder 有没有办法将用户输入的数据绑定到映射到特定键的字典值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T22:07:35.127

您引用的文章回答了您的问题，您只需要为您的控件提供正确的名称，请尝试：

```
 @using (Html.BeginForm("Action", "Home")) {
    var i = 0;
    foreach (var kvp in Model.ObjDictionary)
    {
        @Html.Hidden("ObjDictionary[" + i + "].Key", kvp.Key)@kvp.Key
        <span>@Html.TextBox("ObjDictionary[" + i + "].Value", kvp.Value, new { @style = "font-size:Medium;width:400px;" })</span>
        i++;
        <br />
    }

    <input type="submit" value="Submit" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T10:30:45.953

对于字典，每个条目应该有一个字段作为键，一个字段作为值。

```
@using (Html.BeginForm("Action", "Home")) 
{
    var index = 0;
    @foreach (var kvp in Model.ObjDictionary)
    {
        <span>@Html.Hidden("ObjDictionary[" + index + "].Key", kvp.Key)
        <span>@Html.Label("Scan " + @kvp.Key)</span>
        <span>@Html.TextBox("ObjDictionary[" + index + "].Value", kvp.Value, new { @style = "font-size:Medium;width:400px;" })</span>
        index++;
    }
   <input type="submit" name="Cancel" value="Cancel" />
   <input type="submit" id="Scanner" name="Scanner" value="Scanner" />
} 
```

顺便说一句，我已经将此功能封装在一个[HTML 帮助器类](https://github.com/ErikSchierboom/aspnetmvcdictionaryserialization/blob/master/AspNetMvcDictionarySerialization/Models/HtmlHelperExtensions.cs)中。你可以在这里找到它和一个工作演示：[https ://github.com/ErikSchierboom/aspnetmvcdictionaryserialization](https://github.com/ErikSchierboom/aspnetmvcdictionaryserialization)

# xml - StandardStyles 中的“”值

> ID：10626663
> 
> 赞同：3
> 
> 时间：2012-05-16T21:02:19.803
> 
> 标签：xml, xaml, windows-8, windows-runtime, winrt-xaml

抱歉标题令人困惑，但我不知道该怎么称呼它们。我说的是这个：

```
<Style x:Key="SkipBackAppBarButtonStyle" TargetType="Button" BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId" Value="SkipBackAppBarButton"/>
    <Setter Property="AutomationProperties.Name" Value="Skip Back"/>
    <Setter Property="Content" Value="&#xE100;"/> <!-- This one -->
</Style> 
```

StandardStyles.xaml 中有几个，但我不知道它是如何工作的，知道吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:12:07.283

这些是 Segoe UI 字体中的 XML/十六进制编码的 Unicode 字符。基本上是字体字形形式的图标。[WinRT XAML 工具包](http://bit.ly/WinRTXamlToolkit)中有一个“样式浏览器”应用程序，它显示了所有图标，包括 Tim Heuer 在他的[博客文章](http://timheuer.com/blog/archive/2012/03/05/visualizing-appbar-command-styles-windows-8.aspx)中分享的全套 150 个图标。

# salesforce - 检查顶点列表是否包含对象

> ID：10626664
> 
> 赞同：11
> 
> 时间：2012-05-16T21:02:19.623
> 
> 标签：salesforce, apex-code

有什么方法可以检查列表是否包含某个元素？我查看了 List 函数，没有看到任何像 Java 或 C# 这样的 contains() 函数，所以我想知道其他人是如何处理这个问题的。

我真的需要使用一个列表，我**不能**像这个例子中那样[使用](http://boards.developerforce.com/t5/Apex-Code-Development/Check-if-a-list-contains-an-object/td-p/98131)一个**地图**

我现在的情况真的很糟糕。。

```
 for  (String s : allContacts)
                    {                      

                      for(String ic:insertedContacts)
                        {                          
                            if (s != ic )
                            {
                                     errorContacts.add(s);
                                     break;
                            }
                            break;
                        }
                 } 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-16T21:15:07.653

A Set 可能是您正在寻找的。

1.  定义一个新集合。`Set<String> mySet = new Set<String>();`
2.  使用该[`Set.addAll()`](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_methods_system_set.htm)方法将所有 List 元素添加到集合中。`mySet.addAll(myList);`.
3.  使用该[`Set.contains()`](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_methods_system_set.htm)方法检查您要查找的元素的 Set。

# ruby - 更新基于实例变量显示的值？

> ID：10626665
> 
> 赞同：0
> 
> 时间：2012-05-16T21:02:24.570
> 
> 标签：ruby, shoes

据我所知，如果我只想在控制台中“放置”，那么我就不必问这个问题了。（然而，最后我还是亲自在 StackOverflow 上向大家提问，尽管我已经访问了多年。）

这是我的问题：

*   我正在尝试创建一个变量，该变量将在用户单击时“设置”为特定值
*   然后我试图在更改后显示该值
*   我可以设置值，但它不会显示

（当然，如果我不使用鞋子，这应该可以工作。）

这是我的代码的相关部分：

```
class Inits
# Declares all global vars used
  def init1
    ...
  end
  def initattrib
    @id = "###"
    @name = "name undef"
    alert("Alert: default attrib set")
  end

  def id
    @id
    #alert("Alert: id call")
  end

  def name
    @name
    #alert("Alert: name call")
  end

  def id=(newid)
    @id = newid
    #alert("Alert: id set")
  end

  def name=(newname)
    @name = newname
    #alert("Alert: name set")
  end
end 
```

然后我试图调用 id 并将其设置为：

```
Shoes.app :width => 800, :height => 600, :resizable => false do
  currclass = Inits.new

  currclass.init1
  currclass.initattrib

  .
  .
  .

  id = "123"
  name = "new name"

  # I declare something to click here
  click { currclass.id = id, currclass.name = name }

  # Then I try to display it as so:
  para currclass.id
  para currclass.name

  # But of course the value is not displayed -- just the default value
end 
```

...顺便说一句，我很确定我应该使用实例变量而不是类变量（@x，而不是@@x）。

有什么方法可以“更新变化”（“时钟上升沿”是一个很好的类比）或其他方式来调用它？

无论如何，提前感谢您对我做得不对的任何建议。或许有误会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:45:29.557

如果我正确理解你想要做什么，你应该这样做：

```
class Cos
attr_accessor :co
def initialize(cos)
@co=cos
end
end
Shoes.app :width => 800, :height => 600, :resizable => false do
 @cosik = Cos.new("ddd")
 @ap=para(@cosik.co)

 button "click" do
  @cosik.co = "oj"
  @ap.text=@cosik.co
 end

end 
```

ķ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:06:25.850

您使用 Shoes 学到的第一件事：这是一个元编程丛林。

Shoes 有默认程序的钩子，我相信它也有一个用于创建类的钩子，因此鞋子可以将自己的魔法添加到指定的那个类中。这意味着在 Shoes.app*之外*定义的类现在可能与*在*Shoes.app 中定义的一样。

尝试将所有内容移到 Shoes.app 块中，我在 Shoes.app 之外放置的代码段遇到了很多问题（通常是范围问题）。

# iphone - 使用控件名称作为字符串强制转换为控件

> ID：10626666
> 
> 赞同：2
> 
> 时间：2012-05-16T21:02:27.163
> 
> 标签：iphone, objective-c, xcode

我的 XIB 中有几个文本字段（和标签），在我的应用程序中的某个时刻，我动态构建了一个包含控件名称（即文本字段之一）的字符串。如何使用我创建的包含文本字段名称的字符串来引用实际的文本字段。

例如，我有 txt1 ， txt2 ， txt3 ， txt4 作为 UITextFields 并且我有一个字符串（str），其中包含名称（str =“txt3”）上面的字段之一，然后我想更改 uitextfield txt3 的内容，因为 str此时有“txt3”。

如何从字符串转换为实际控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:06:47.307

如果`UITextField`s 都有一个支持属性，那么您可以使用 KVC 来获取对控件的引用，然后您就可以正常使用它。

```
NSString *str = @"txt1";
UITextField *myTextField = [self valueForKey:str];
myTextField.text = @"what ever you want to update to"; 
```

## 边注

尽管您没有提到`str`@JefferyThomas 的来源，但提出了一个非常有效的观点，即不信任未经验证的使用输入。

# graphics - 在戴尔 poweredge 中安装 gpu 卡

> ID：10626668
> 
> 赞同：1
> 
> 时间：2012-05-16T21:02:30.630
> 
> 标签：graphics, vmware, virtualization, xen

我试图在他们的视频[http://www.youtube.com/watch?v=6nyg2kZfF5A&noredirect=1](http://www.youtube.com/watch?v=6nyg2kZfF5A&noredirect=1)中完成 nvida 所做的相同的事情，他们可以在其中玩从计算机流式传输的游戏。我不太确定他们是如何做到这一点的，除非他们使用 splashtop（我将使用 vmware 或 xen）。如果有人知道配置会很棒。我将尝试在具有 8gb 内存的戴尔 poweredge r200 四核至强 3.0ghx 上实现这一点。但我想将游戏功能添加到流中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:05:58.860

为什么不直接使用 Splashtop？

这是最好的流式传输您的桌面软件。

您需要在计算机和平板电脑上安装 splashtop 客户端。您可以使用带有 splashtop 的 google 帐户轻松连接您的设备。

我强烈建议不要寻找“另一种”方式，而是选择最好的方式。如果您想了解有关 splashtop 以及如何设置评论的更多信息，我将添加到此答案中。

如果您问需要什么样的桌面才能将游戏流式传输到平板电脑，我需要有关您的桌面的更多详细信息。

# jquery - JQuery UI 可排序 - 不允许重复

> ID：10626669
> 
> 赞同：1
> 
> 时间：2012-05-16T21:02:34.703
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable

我有以下html：

```
<div id="cats-and-links">
    <div class="cat favorites">
        <h2>Favorites</h2>
            <ul class="ui-sortable">
               <li class="place-holder info">To add items to your favorites drag them over to this list from their original list.</li>
            </ul>
    </div>

    <div class="cat">
        <h2>Participants</h2>
        <ul class="ui-sortable">
            <li data-id="1"><a href="/program/2/control-panel/demo1">Demo 1</a></li>
            <li data-id="2"><a href="/program/2/control-panel/demo2">Demo 2</a></li>
            <li data-id="3"><a href="/program/2/control-panel/demo3">Demo 3</a></li>
            <li data-id="4"><a href="/program/2/control-panel/demo4">Demo 4</a></li>
            <li data-id="5"><a href="/program/2/control-panel/demo5">Demo 5</a></li>
        </ul>
    </div>
    <br class="clear">
</div> 
```

我有以下jQuery：

```
$(document).ready(function() {
    var place_holder = $('.place-holder');
    var fav = $('.favorites ul');
    var cat = $(".cat ul");

    cat.sortable({
            connectWith: fav,
            cursor:'move',
            helper:'original',
            placeholder:'ui-state-highlight',
            receive: function(event, ui){
                console.log(ui);
                ui.item.addClass('added');
                if(ui.item.hasClass('added')){
                    fav.sortable('option', 'revert', true);
                    cat.sortable('option', 'revert', true);
                }
                //console.log(ui.item.attr('data-id'));

                //ajax here to get the list item favorited.
            },
            over: function(event, ui){
                place_holder.hide();
            },
            stop: function(event, ui){
                if(fav.children().length == 1){
                    place_holder.show();
                }
            },
            remove: function(event, ui){
                ui.item.clone().appendTo(fav);
                $(this).sortable('cancel');
            }
    }).disableSelection();
}); 
```

我想解决两个问题。我试图通过向原始项目“添加一个类”而不是让它再次添加来解决的问题之一。所以问题：

1.  如果项目已添加到“收藏夹”列表，则不允许将一个列表（“参与者”）中的项目移动到另一个列表（“收藏夹”）。
2.  不允许在（“参与者”）列表中进行拖放排序。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:14:16.873

好的，所以我用下面的 jQuery 解决了我的两个问题。解决方案的文本响应：

1.  我遍历寻找添加的项目，如果“添加”类在元素上，则它是重复的。
2.  使“收藏夹”列表可排序，其他列表“参与者”可拖动。

jQuery：

```
$(document).ready(function() {
    /*$('#cats-and-links').masonry({
          // set columnWidth a fraction of the container width
          columnWidth: function( containerWidth ) {
            return containerWidth / 4;
          },
          gutterWidth:10,
          isFitWidth:true,
          itemSelector:".cat"
    });*/
    var place_holder = $('.place-holder');
    var fav = $('.favorites ul');
    var cat = $(".cat:not(.favorites) ul li");

    cat.draggable({
        connectToSortable: fav,
        helper: "clone",
        revert: "invalid"
    });

    fav.sortable({
            cursor:'move',
            helper:'original',
            placeholder:'ui-state-highlight',
            receive: function(event, ui){
                console.log(ui);
                ui.item.addClass('added');
                if(ui.item.hasClass('added')){
                    $(this).children().each(function(){
                        if($(this).hasClass('added')){
                            $(this).remove();
                        }
                    });
                }
                //console.log(ui.item.attr('data-id'));

                //ajax here to get the list item favorited.
            },
            over: function(event, ui){
                place_holder.hide();
            },
            stop: function(event, ui){
                if(fav.children().length == 1){
                    place_holder.show();
                }
            }
    }).disableSelection();
}); 
```

# jquery - jQuery选择下一个div

> ID：10626671
> 
> 赞同：4
> 
> 时间：2012-05-16T21:02:36.540
> 
> 标签：jquery

所以代码看起来像这样：如何在将鼠标悬停在当前链接 1 时更改 div1 ？

```
<ul>
    <li>
        <a class='link1'></a>
        <a class='link2'>
            <div class='div1'></div>
            <div class='div2'></div>
        </a>
    </li>
    <li>
        <a class='link1'></a>
        <a class='link2'>
            <div class='div1'></div>
            <div class='div2'></div>
        </a>
    </li>
</ul> 
```

我试过这样：

```
$(".link1").hover(
function () {
        $(this).nextAll('.div1').css('display','block');
        ...
    },

    function () {
        ...
    }
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T21:04:54.687

`.next`并且`.nextAll`只搜索“直接兄弟姐妹”。您想要的元素是链接兄弟的子元素。

你可以试试这个：

```
$(this).next('.link2').children('.div1') 
```

或者，您可以遍历父节点并搜索*所有*后代：

```
$(this).parent().find('.div1') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:05:45.287

你可以试试这个：

```
$(".link1").hover(function(){
   $(this).parent().find(".div1").css('display','block');
}, function(){
   //
}) 
```

# java - JSP Servlet 检索（显示）网页

> ID：10626672
> 
> 赞同：0
> 
> 时间：2012-05-16T21:02:38.113
> 
> 标签：java, jsp, servlets

我正在 JSP 页面中编写一个 servlet 来显示请求的网页。我做了相当多的“谷歌搜索”，其中大多数人建议使用 BufferedReader。下面我有从 JSP 页面获取请求的 url 并且 servlet 显示页面的代码。

但是，在运行此程序时，我从 servlet 得到空白。谁能建议我在这段代码中做错了什么？

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        String server = request.getParameter("browsebox");

        URL url = new URL(server);
        URLConnection yc = url.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                yc.getInputStream(), "UTF-8"));
        String inputLine;
        StringBuilder a = new StringBuilder();
        while ((inputLine = in.readLine()) != null)
            a.append(inputLine);
        in.close();

       PrintWriter out = response.getWriter();
        out.println(a);
        // String output= a.toString();
        //System.out.println(output);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:11:01.007

你非常非常接近。但是为什么要在控制台上打印目标网页而不是将其发送回客户端呢？初学者试试这个：

```
response.getWriter().println(a); 
```

一旦你克服了这个问题，想想如何避免先将整个目标网页加载到 a`String`然后再将其发回。如何逐行或逐字节读取目标网页并立即发送？不仅客户端会更早收到部分响应，而且您会节省大量内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:12:49.803

您需要从响应对象中获取 PrintWriter 对象。

```
PrintWriter writer = response.getWriter();
writer.println(<value>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:48:24.867

添加后

```
PrintWriter out=response.getWriter();
out.println(a); 
```

它应该工作。仍然如果它不工作尝试，

```
PrintWriter out=response.getWriter();
out.println(a);`
out.flush(); 
```

# ios - iOS：带有锐利边缘的阴影

> ID：10626676
> 
> 赞同：3
> 
> 时间：2012-05-16T21:02:58.537
> 
> 标签：ios, core-graphics, shadow, dropshadow

我正在尝试为我的一个视图添加一些阴影，而我想要实现的是仅在一侧绘制阴影并让它们具有锐利的边缘。不，我已经尝试了很多方法，但没有任何运气（使用视图的 CALayer + UIBezierPaths 的阴影相关属性）。然而，iOS 总是会像这样渲染一个带有柔和边缘的阴影：

![在此处输入图像描述](../Images/2f95e008640157c0c9822b59bbcc0968.png)

但我真正想要实现的是这样的（**除了一个之外**没有圆角和边缘锋利的边缘）：

![在此处输入图像描述](../Images/0c3737e0d79306d6cf586a8c20172f03.png)

有什么优雅的方法可以做到这一点，还是我必须使用 CoreGraphics 自己绘制阴影？

PS：我忘了提，我的视图实际上应该是一个自定义的 UIButton，所以覆盖 drawRect: 在这里会很痛苦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:12:11.447

我经历了一个从视野中去除阴影的面具......所以也许你可以尝试一下。

```
 CALayer *mask = [[[CALayer alloc] init] autorelease];
    mask.backgroundColor = [UIColor blackColor].CGColor;
    mask.frame = CGRectMake(0.0, 0.0, yellowView.bounds.size.width + shadowWidth, yellowView.bounds.size.height);
    yellowView.layer.mask = mask; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:13:36.327

我认为你想要改变的是 shadowRadius 值 - 将其设置为零，你应该得到你正在寻找的锐利边缘：

```
myView.layer.shadowRadius = 0; 
```

# titanium - 如何在 Appcelerator Titanium 中获取当前目录？

> ID：10626678
> 
> 赞同：1
> 
> 时间：2012-05-16T21:03:08.717
> 
> 标签：titanium, appcelerator, appcelerator-mobile

假设我的 JS 文件在 /libs/qrcode/qrcode.js 并且我在 /libs/qrcode/ 有另一个文件 qrcode.html，是否可以在 qrcode 中获取当前目录/路径（即 /libs/qrcode/） .js？

我想要做的是在 qrcode.js 内的 webview 中加载 qrcode.html，而不用担心 qrcode 文件夹位于 Resource 目录中的哪个位置。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:11:01.307

尝试`Ti.Filesystem.resourcesDirectory`或`Ti.includeAbsolute`

这应该为您提供`Resources`文件夹的路径或查看[Titanium.Filesystem.File](http://developer.appcelerator.com/apidoc/desktop/latest/Titanium.Filesystem.File.parent-method.html)

# asp.net-mvc - 创建像 Helper.BeginForm() 这样的声明性 MVC3 Razor Helper

> ID：10626683
> 
> 赞同：2
> 
> 时间：2012-05-16T21:03:35.463
> 
> 标签：asp.net-mvc, razor

[创建像 Helper.BeginForm() 这样的 MVC3 Razor Helper](https://stackoverflow.com/questions/7196276/creating-mvc3-razor-helper-like-helper-beginform) 表示可以使用扩展方法并实现 IDisposable 来完成。可以通过使用声明性 Razor 助手来完成相同的操作，例如。@helper SomeHelper(){}？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:08:47.907

有点。
Razor 助手返回原始 HTML，而不是`IDisposable`，因此您不能将它与`using`.

但是，您可以在其中创建一个 Razor 助手`App_Code`来呈现内容，然后从普通扩展方法调用它，该方法将内容直接写入页面并返回一个单独的`IDisposable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:06:41.207

否，因为 helper.BeginForm() 需要 IDisposable 方法来写出结束`</form>`标记。由于剃刀助手本质上是一种方法而不是一个类，因此它不能实现 IDisposable。

# jquery - 使用 JQuery 的 .prev( ) 获取 a 的内容 点击链接后

> ID：10626686
> 
> 赞同：0
> 
> 时间：2012-05-16T21:03:41.403
> 
> 标签：jquery

我想在链接之前获取 < p > 的内容：

```
<p class="copiedText">aaa</p>
<a class="copy-btn" href="#">a copy button</a><br /><br />

<p class="copiedText">ccc</p>
<a class="copy-btn" href="#">a copy button</a><br /><br /> 
```

并使用[zClip](http://www.steamdev.com/zclip/)将其复制到剪贴板。

我让它使用这个 JQuery 片段为单个链接工作：

```
$(document).ready(function(){
    $('a.copy-btn').zclip({     
        path:'js/ZeroClipboard.swf',
        copy:$('p.copiedText').text(),
    });
}); 
```

但是当有多个按钮/链接时，所有`<p>`的内容都会被一次复制。我正在尝试这样实现[.prev()](http://api.jquery.com/prev/)运算符：

```
copy:$('p').prev('.copiedText').text() 
```

但无济于事。我已经以很多不同的方式实现 prev() 但没有结果。

我是否误解了 prev 的工作原理？还是我只是搞砸了实施？

（我会链接到它的 jsfiddle，但点击复制功能在那里不起作用）

[编辑：身份证到班级，呜呜呜]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:07:28.917

首先，每个文档的 ID 应该是唯一的。将 id 替换为 class 并选择`.copiedText`而不是`#copiedText`

您要做的第二件事是将点击处理程序附加到 all `.copy-btn`：

```
$(".copy-btn").click(function(){
    $(this).zclip({     
        path:'js/ZeroClipboard.swf',
        copy:$(this).prev('p.copiedText').text(),
    }); 
}) 
```

继承人编辑的HTML：

```
<p class="copiedText">aaa</p>
<a class="copy-btn" href="#">a copy button</a><br /><br />

<p class="copiedText">ccc</p>
<a class="copy-btn" href="#">a copy button</a><br /><br /> 
```

回复：

.click 是一个事件，.zclip 是一个方法。您应该在事件处理程序中实现方法调用：

```
$(".copy-btn").click(function(){
    $(this).zclip({     
        path:'js/ZeroClipboard.swf',
        copy:$(this).prev('p.copiedText').text(),
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:06:22.257

看起来您正在创建重复的 id 尝试使用类。ID 在页面上必须是唯一的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:00:25.413

查看他们的文档，有一个复制功能的回调。这是您应该用来获取动态副本值的方法：

```
$(".copy-btn").zclip({
    path: 'js/ZeroClipboard.swf',
    copy: function(){
        // `this` should be the current a.copy-btn
        return $(this).prev('p.copiedText').text();
    }
}); 
```

Dimitri 的答案可能无法正常工作，因为 zclip 绑定了目标上的事件。因此，在事件回调中绑定其他事件将 a）第一次单击不起作用，并且 b）可能绑定多次。对于这种方法，请使用 a`each`而不是 a `click`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T23:21:31.593

这是你要找的吗？

```
$('.copy-btn').click(function(){
    some_text = $(this).prev('p').text();
    console.log(some_text);
});​ 
```

jsfiddle 示例：http: [//jsfiddle.net/bradleygriffith/KhuAS/](http://jsfiddle.net/bradleygriffith/KhuAS/)

# mysql - 来自 luban.danse.us 的 php 4 / mysql jstree 示例 - 无论如何要将这个功能移植到新版本的 jstree？(v1)

> ID：10626689
> 
> 赞同：0
> 
> 时间：2012-05-16T21:03:58.943
> 
> 标签：mysql, jquery, jstree, php4

尝试在[http://jstree.com/demos](http://jstree.com/demos)使用 php/mysql 的示例后，我意识到我需要额外的功能，并且注意到由于 Firebug 提示输出的一些错误，这仅适用于 PHP 5 . 然后我开始在 jstree 上查找更多文档，并在这里发现有人建议查看下一页上的示例：

```
 http://luban.danse.us/jazzclub/javascripts/jquery/jsTree/reference/_examples/7_full.html 
```

我确实发现它非常接近我个人项目所需的内容，但是该示例针对我在核心依赖项（full/script.js）中看到的一个数据库交互是固定的。我正在尝试将此示例移植到 PHP 5，但目前只想知道是否有可能扩展它以使用新插件，例如“复选框”，尽管这是一个早期版本。

我已经在论坛上发布了这个问题，看看是否有可能使用“上下文菜单”以及面板顶部的选项重新创建 PHP/mySQL 示例，但是因为这显然不受我的支持能够从文档中理解，我想也许有人尝试过类似的东西？

提前致谢，

J.P-

# buddypress - Buddypress 组 URL

> ID：10626692
> 
> 赞同：1
> 
> 时间：2012-05-16T21:04:21.770
> 
> 标签：buddypress

Buddypress 组使用以下 URL 格式： [http ://domain.com/groups/group-name](http://domain.com/groups/group-name)

其中“组名”是组的名称。

我希望能够使用群组 ID 访问群组。

例如： [http](http://domain.com/groups/45) ://domain.com/groups/45或 [http://domain.com/groups/?id=45](http://domain.com/groups/?id=45) 等。

任何帮助/进步将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:44:35.137

我不确定你为什么需要一个 ID 作为 slug，但如果你安装这个插件，你可以将 slug 更改为任何内容：“BuddyPress Edit Group Slug”希望对您有所帮助

# printing - IE8 和字体打印问题

> ID：10626694
> 
> 赞同：0
> 
> 时间：2012-05-16T21:04:40.443
> 
> 标签：printing, internet-explorer-8, font-face

我在使用 IE8 打印网站时遇到了一个奇怪的问题。打印（或打印预览）对话框关闭后会出现问题，即使页面打印正常，网页也会完全空白（白色）。刷新解决了这个问题。

我最近包含了一个带有@font-face 声明的打印样式表。删除 @font-face 声明可以防止问题发生。我的字体声明如下：

```
@font-face {
    font-family: 'FONT';
    font-weight: normal;
    font-style: normal;
    src: url('../fonts/FONT.eot');
    src: url('../fonts/FONT.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('../fonts/FONT.woff') format('woff'), /* Modern Browsers */
         url('../fonts/FONT.ttf') format('truetype'); /* Safari, Android, iOS */
} 
```

我已经在 IE7、IE8、IE9 和最新版本的 Safari、Chrome 和 Firefox 中对此进行了测试。该问题仅发生在 IE8 中。

有没有其他人经历过这个并知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:00:48.173

我和你有同样的问题。很幸运，发现问题是由字体文件的 url 中的相对路径引起的！要在打印或打印预览后修复您的 IE8 页面空白问题，只需将您的相对“../fonts/FONT.eot”路径替换为绝对路径即可。就我而言，我们将字体保存在 /inc/css/fonts 中。所以我会将我的 url 参数更新为类似

```
@font-face {
    font-family: 'FONT';
    font-weight: normal;
    font-style: normal;
    src: url('/inc/css/fonts/FONT.eot');
    src: url('/inc/css/fonts/FONT.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/inc/css/fonts/FONT.woff') format('woff'), /* Modern Browsers */
         url('/inc/css/fonts/FONT.ttf') format('truetype'); /* Safari, Android, iOS */
} 
```

同样，我遇到了与您相同的问题，该问题仅在 IE8 中发生（关闭兼容模式）。这是我们必须解决的问题，因为即使到 2012 年 8 月，我们仍有 40% 的网络用户使用 IE8。希望这可以帮助！

# java - Dbunit 为 onSetup() 抛出 NullPointerException

> ID：10626698
> 
> 赞同：0
> 
> 时间：2012-05-16T21:05:10.297
> 
> 标签：java, junit, junit4, dbunit

我正在尝试使用 dbunit 和 junit。这些测试是不涉及数据库的基本 junit 测试。但是，该课程在到达那里之前就失败了。当调用`onSetup()`from 方法时`IDatabaseTester`，它会抛出 NullPointerException 而不是我所期望的：删除数据库，从`dataset.xml`.

为什么我得到一个空指针异常？

```
 29 public class TestModifyDb
 30 {
 31 
 32   private IDatabaseTester dbtester;
 33 
 34   @Before
 35   public void setUp() throws Exception
 36   {
 37     dbtester = new JdbcDatabaseTester("com.mysql.jdbc.Driver",
 38                                       "jdbc:mysql://localhost/cal",
 39                                       "cal",
 40                                       "cal");
 41 
 42     IDataSet dataSet = new FlatXmlDataSetBuilder().build(
 43         new FileInputStream("src/gps/tasks/task3663/dataset.xml"));
 44 
 45     dbtester.onSetup();
 46   }
 47 
 48   @After
 49   public void tearDown() throws Exception
 50   {
 51     dbtester.onTearDown();
 52   }
 53 
 54   @Test(expected=IndexOutOfBoundsException.class)
 55   public void outOfBounds()
 56   {
 57     new ArrayList<Object>().get(1);
 58   }
 59 
 60   @Test (expected=IndexOutOfBoundsException.class)
 61   public void elementAt()
 62   {
 63     int[] intArray = new int[10];
 64     int i = intArray[20];
 65   }
 66 
 67 } 
```

这是堆栈跟踪：

```
java.lang.NullPointerException
    at org.dbunit.operation.DeleteAllOperation.execute(DeleteAllOperation.java:92)
    at org.dbunit.operation.CompositeOperation.execute(CompositeOperation.java:79)
    at org.dbunit.AbstractDatabaseTester.executeOperation(AbstractDatabaseTester.java:190)
    at org.dbunit.AbstractDatabaseTester.onSetup(AbstractDatabaseTester.java:103)
    at gps.tasks.task3663.TestModifyDb.setUp(TestModifyDb.java:45)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:15:38.357

我怀疑你只是错过了这一行：

```
dbTester.setDataSet(dataSet); 
```

（在初始化之后`dataSet`，但在调用之前`onSetup`。）

目前你`dataSet`在创建它之后什么都没有做......

# jquery-tools - jQuery 工具覆盖屏幕太大，无法访问较低的内容

> ID：10626706
> 
> 赞同：0
> 
> 时间：2012-05-16T21:05:33.720
> 
> 标签：jquery-tools

我一直在使用 jQuery Tools 的叠加层，但是当浏览器窗口不够大而无法容纳叠加层的内容时，我不知道该怎么办。

查看[jQuery Tools 示例页面](http://jquerytools.org/demos/overlay/index.html)，了解我的意思：

1.  单击其中一个图像以显示叠加层
2.  调整窗口大小，使整个叠加层无法容纳

这似乎是一个简单的解决方案（使您的浏览器窗口更大）的简单问题，但我在一个迎合老年人的网站上工作，他们的显示器可能设置为低分辨率。

除了构建自己的 javascript 覆盖实用程序之外，知道我能做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:56:02.423

您可以以 % 为单位指定覆盖 div 的大小，以便它始终适合屏幕。

```
overlay_div {
height: 60%;
overflow-y: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T15:01:55.513

无滚动的最大高度解决方案：

```
overlay_div {
max-height: 95%;
}

overlay_div img {
max-height: 95%;
} 
```

在脚本中：

```
$(document).ready(function() {
$("img[rel]").overlay({
  top: 25
  });
}); 
```

# javascript - HTML、JavaScript：无框窗口

> ID：10626718
> 
> 赞同：-1
> 
> 时间：2012-05-16T21:06:19.093
> 
> 标签：javascript, html, web

请问如何在 HTML5、JavaScript 中生成**无框窗口？**

我在网上搜索，发现主要是使用库的链接。我希望从头开始开发自己的无框窗口，而不使用第三方库。

无框窗口是指没有框架、没有状态栏、没有默认最小化按钮、没有默认关闭按钮、没有滚动条的窗口……它看起来像一个带有绘制关闭按钮的独立图像。

有人会这么好心并为我提供大多数浏览器都会接受的想法或代码吗？

## 例子：

正如你们中很少有人问的那样，我的意思是什么，我在[Rapidshare](https://rapidshare.com/)找到了一个很好的**例子**。屏幕中间有一个**蓝色/橙色的大按钮，上面写着****Upload**。请按一下，就会出现一个无框窗口。

 ****该窗口正是我想要实现的目标。在显示放大图像或提示登录信息等时，我已经看过很多次了。我也喜欢与显示该窗口相关的动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:20:19.120

> 没有框架

这是您在文档中是否使用 (i) 框架的决定

> 没有滚动条

使用 CSS，您可以抑制滚动条，或构建完全调整为窗口大小的布局

> 没有状态栏，没有最小化，没有关闭，没有滚动条......

[在使用window.open](https://developer.mozilla.org/en/DOM/window.open)创建弹出窗口时，使用 chrome-feature 描述符可以做到这一点。但是，您将无法创建不可关闭的窗口，隐藏关闭按钮也[需要一些权限](https://developer.mozilla.org/en/DOM/window.open#Features_requiring_privileges)。

您似乎想要一个全屏应用程序。您是否考虑过使用新的[全屏 API](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:25:37.937

只是为了快速展示这个概念..

直接在body下创建两个div

```
 <div id="backmask"></div>
  <div id="contentwindow"></div>

  <!-- somewhere else in your page -->
  <a href="somepage.html" class="showinwindow">click me</a> 
```

这些的 css （大致）

```
 <style type="text/css">

    #backmask { 
      display:block; 
      width:100%;
      height:100%;  
      background-color:black;
      position:absolute; top:0; left:0;
      z-index:1000;
      display:none;

      opacity:0.7;
      filter:alpha(opacity=70);
     }

    #contentwindow { 
      display:block; 
      width:800px;
      height:600px;  
      background-color:white;
      position:absolute; top:50px; left:50px;
      z-index:1001;
      display:none;
     }

    .bodywithwinOpenClass { overflow:hidden; width:100%; height:100%; }
  </style> 
```

然后（我使用 jquery 进行快速操作）

```
 <script type="text/javascript">

   $(".showinwindow").click( function(e) {

   /* we don't want the visitor to leave, stop the normal action */
   e.preventDefault();

   /* get what to show */
    var contenttoload = $(this).attr.("href");

  /* set the body up */
  $("body").addClass("bodywithwinOpenClass");

   /* show wins and masker */
   $("#backmask").css("display","block");
   $("#contentwindow").css("display","block");

  /* load the content  */
  $("#contentwindow").load(contenttoload);

   });
   </script> 
```

这只是直接输入并没有运行，不包含糖果（用于定位等）希望它解释了所有插件背后的概念等你会发现

*   相反需要“关闭”它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:12:30.727

[http://www.codelifter.com/main/javascript/amazingframelesspopup1.html](http://www.codelifter.com/main/javascript/amazingframelesspopup1.html) <-- 几乎涵盖了你能做的所有事情——你不能从网页启动无铬浏览器窗口。

你想达到什么目的？

这很容易——它不是一个窗口——它实际上是页面上的一个 div，它漂浮在页面内容的其余部分之上——有很多方法可以使用像 jQuery 这样的框架来实现。

[教程](http://www.webstutorial.com/jquery-popup-jquery-slide-popup/jquery)

基本上你所需要的只是一个具有高**z-index的****隐藏**定位 div和一些脚本来显示/隐藏它：

 **```
<div id="popup" style="z-index:1000;display:none;position:absolute;top:100px;left:100px;">Some content</div>

<button onclick="document.getElementById('popup').style.display='block';">Open</button>
<button onclick="document.getElementById('popup').style.display='none';">Close</button> 
```******

# java - Guava CacheBuilder 移除监听器

> ID：10626720
> 
> 赞同：3
> 
> 时间：2012-05-16T21:06:25.773
> 
> 标签：java, caching, guava

请告诉我我在哪里遗漏了一些东西。

我在 DataPool 中有一个由 CacheBuilder 构建的缓存。DataPool 是一个单例对象，其实例各种线程都可以获取并对其进行操作。现在我有一个线程来生成数据并将其添加到所述缓存中。

要显示代码的相关部分：

```
 private InputDataPool(){

    cache=CacheBuilder.newBuilder().expireAfterWrite(1000, TimeUnit.NANOSECONDS).removalListener(
            new RemovalListener(){
                {
                    logger.debug("Removal Listener created");
                }
                                public void onRemoval(RemovalNotification notification) {
                                    System.out.println("Going to remove data from InputDataPool");
                                    logger.info("Following data is being removed:"+notification.getKey());
                                    if(notification.getCause()==RemovalCause.EXPIRED)
                                    {
                                        logger.fatal("This data expired:"+notification.getKey());
                                    }else
                                    {
                                        logger.fatal("This data didn't expired but evacuated intentionally"+notification.getKey());
                                    }

                                }}
                    ).build(new CacheLoader(){

                        @Override
                        public Object load(Object key) throws Exception {
                                logger.info("Following data being loaded"+(Integer)key);
                                Integer uniqueId=(Integer)key;
                                return InputDataPool.getInstance().getAndRemoveDataFromPool(uniqueId);

                        }

                    });
}

public static InputDataPool getInstance(){
        if(clsInputDataPool==null){
            synchronized(InputDataPool.class){
                if(clsInputDataPool==null)
                {
                    clsInputDataPool=new InputDataPool();
                }
            }
        }
    return clsInputDataPool;
} 
```

从上述线程进行的调用很简单

```
 while(true){
 inputDataPool.insertDataIntoPool(inputDataPacket);
     //call some logic which comes with inputDataPacket and sleep for 2 seconds.
} 
```

inputDataPool.insertDataIntoPool 就像

```
inputDataPool.insertDataIntoPool(InputDataPacket inputDataPacket){ 
 cache.get(inputDataPacket.getId());
} 
```

现在的问题是，缓存中的元素应该在 1000 纳秒后过期。所以当第二次调用 inputDataPool.insertDataIntoPool 时，第一次插入的数据将被撤出，因为它必须在调用之后过期插入 2 秒。然后相应地调用 Removal Listener。但这并没有发生。我查看了缓存统计信息，evictionCount 始终为零，无论调用多少时间 cache.get(id) 。

但重要的是，如果我扩展 inputDataPool.insertDataIntoPool

```
 inputDataPool.insertDataIntoPool(InputDataPacket inputDataPacket){ 
 cache.get(inputDataPacket.getId());
    try{
     Thread.sleep(2000);
   }catch(InterruptedException ex){ex.printStackTrace();
     }
cache.get(inputDataPacket.getId())
} 
```

然后驱逐按预期进行，并调用删除侦听器。

现在我非常无知，因为我错过了一些可以期待这种行为的东西。请帮我看看，如果你看到了什么。

PS 请忽略任何拼写错误。也没有进行检查，没有使用泛型，因为这只是在测试 CacheBuilder 功能的阶段。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T22:16:04.793

正如 javadoc 和[用户指南](http://code.google.com/p/guava-libraries/wiki/CachesExplained)中所解释的，没有线程可以确保在延迟过去后立即从缓存中删除条目。相反，在写入操作期间删除条目，如果写入很少，偶尔在读取操作期间删除。这是为了允许高吞吐量和低延迟。当然，每个写操作都不会导致清理：

> 使用 CacheBuilder 构建的缓存不会“自动”执行清理和逐出值，也不会在值过期后立即执行，或任何类似的操作。相反，它在写入操作期间执行少量维护，或者如果写入很少，则在偶尔的读取操作期间执行。
> 
> 原因如下：如果我们想连续进行Cache维护，就需要创建一个线程，它的操作会和用户操作竞争共享锁。此外，某些环境会限制线程的创建，这会使 CacheBuilder 在该环境中无法使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T16:00:16.480

我有同样的问题，我可以在番石榴的 CacheBuilder.removalListener 文档中找到这个

> 警告：调用此方法后，请勿继续使用此缓存构建器引用；而是使用此方法返回的引用。在运行时，它们指向同一个实例，但只有返回的引用具有正确的泛型类型信息，以确保类型安全。为获得最佳结果，请使用上面类文档中说明的标准方法链习语，在单个语句中配置构建器并构建缓存。不注意此建议可能会导致缓存操作在将来某个未定义的时间点抛出 ClassCastException。

因此，通过更改代码以使用添加删除列表后调用的构建器引用，可以解决此问题

```
 CacheBuilder builder=CacheBuilder.newBuilder().expireAfterWrite(1000, TimeUnit.NANOSECONDS).removalListener(
            new RemovalListener(){
                {
                    logger.debug("Removal Listener created");
                }
                                public void onRemoval(RemovalNotification notification) {
                                    System.out.println("Going to remove data from InputDataPool");
                                    logger.info("Following data is being removed:"+notification.getKey());
                                    if(notification.getCause()==RemovalCause.EXPIRED)
                                    {
                                        logger.fatal("This data expired:"+notification.getKey());
                                    }else
                                    {
                                        logger.fatal("This data didn't expired but evacuated intentionally"+notification.getKey());
                                    }

                                }}
                    );
   cache=builder.build(new CacheLoader(){

                        @Override
                        public Object load(Object key) throws Exception {
                                logger.info("Following data being loaded"+(Integer)key);
                                Integer uniqueId=(Integer)key;
                                return InputDataPool.getInstance().getAndRemoveDataFromPool(uniqueId);

                        }

                    }); 
```

这个问题将得到解决。它是有线的，但我想它就是这样:)

# javascript - Google Places JavaScript 自动完成功能：我可以从地名中删除国家吗？

> ID：10626727
> 
> 赞同：13
> 
> 时间：2012-05-16T21:06:57.217
> 
> 标签：javascript, google-maps, google-places-api

我有以下 jQuery 代码，可以很好地获取所选国家/地区的城市列表。

```
var city;   var place;

$('#city').on('focus',function(){
    input = this, options = {
        types: ['(cities)'],
        componentRestrictions: {
            country: $('#country option:selected').val()
            }
    };
    city = new google.maps.places.Autocomplete(input, options);
    google.maps.event.addListener(city, 'place_changed', function() {
        place = city.getPlace();
        $(input).val(place.address_components[0].long_name);
    })
}) 
```

基本上，一旦人选择了地点，它就会将输入框中的值替换为没有国家的“城市”值。

`City, Country`当用户已经选择了一个国家/地区时，在下拉菜单中看起来有点愚蠢，那么如果您定义了一个`componentRestrictions`将结果限制在一个国家/地区的值，是否有人知道是否可以仅显示城市名称？

一旦做出选择，我发现我目前的设置方法有点......真的很垃圾......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-10T13:29:51.760

调用 Google API 时，指定属性“region”：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false&key=your_key&language=fr&region=FR"></script> 
```

然后，当您创建[`Autocomplete`](https://developers.google.com/maps/documentation/javascript/reference#AutocompleteOptions)对象时，在属性中指定国家`componentRestriction`，以便它反映您指定的区域：

```
    新的 google.maps.places.Autocomplete(
        $("#my-input-field").get(0),
        {
            组件限制：{国家：“fr”}，
            类型：[“（地区）”]
        }
    );

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-03T19:18:48.843

您也可以通过 css 帮助自己 - 在自动完成项中隐藏最后一个跨度（=状态）。

```
.pac-item > span:last-child {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T14:03:52.620

简短的回答是： 中的响应内容`Autocomplete`由 Google 控制（您在其中一个评论中提到了这一点）并且`Autocomplete`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#Autocomplete)不提供自定义显示的响应文本的方法，除了**更改占位符文本**[^(开发指南)](https://developers.google.com/maps/documentation/javascript/places#changing_the_placeholder_text)。您使用的解决方案是您拥有的最佳选择（并且有点反应，但我不知道它是否真的“垃圾”）。

除此之外，如果您对这种方法不满意，您总是可以创建自己的输入区域并自己完全控制请求-响应。您可以直接使用 Places Library[^(开发指南)](https://developers.google.com/maps/documentation/javascript/places)并完全控制显示的所有内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-20T03:13:26.713

我等待 100 毫秒，然后将文本框替换为我想要的内容。

除了在我的情况下，我想要一个空白框，但插入一个空格。

# php - php...目标='_blank'

> ID：10626736
> 
> 赞同：0
> 
> 时间：2012-05-16T21:07:49.580
> 
> 标签：php, zen-cart

单击按钮后，我想打开一个新窗口，并尝试在 Zencart 中修改代码。我想我正试图在正确的地方操纵它……但我不知道该怎么做：

（对于任何知道 Zencart 的人，这在 paypalwpp.php 文件中，第 1616-1618 行）

```
// This is where we actually redirect the customer's browser to PayPal. Upon return from PayPal, they go to ec_step2
    header("HTTP/1.1 302 Object Moved");
    zen_redirect($paypal_url . "?cmd=_express-checkout&token=" . $_SESSION['paypal_ec_token'] . $userActionKey); 
```

这是我的业余尝试：

```
zen_redirect( "target='_blank'" . $paypal_url . "?cmd=_express-checkout&token=" . $_SESSION['paypal_ec_token'] . $userActionKey); 
```

当然，我添加了“target='_blank'”，但它不起作用......我怎么能通过修改上面的代码来打开一个新窗口？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:10:35.393

您需要在包含按钮的页面上执行此操作，而不是在按钮提交到的页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:11:57.607

zen_redirect 很可能像普通重定向一样工作。我的意思是在进行重定向时您将无法指定“目标”参数。

“目标”参数是基于浏览器的属性。

大多数情况下，重定向是服务器端的。

我认为您正在寻找其他东西，但我对禅车不熟悉。

# opencv - 流式传输 opencv 视频

> ID：10626738
> 
> 赞同：0
> 
> 时间：2012-05-16T21:07:50.880
> 
> 标签：opencv, streaming, gstreamer

我需要一些关于如何将来自 opencv 的视频源流式传输到网页的想法。我目前有 gStreamer，但我不知道这是否是适合这项工作的工具。任何有关使用 gStreamer 的建议或任何指向教程的超链接都会有所帮助和赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:33:15.220

OpenCV 不提供流式视频接口，这意味着您需要为此使用一些其他技术。

我在几个专业项目中使用过 GStreamer：*这是您正在寻找的机器人*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T01:01:58.033

我没有任何将 OpenCV 输出流式传输到网站的经验。但是我确信使用 gstreamer 可以做到这一点。

使用 gstreamer 流，可以获取数据并将数据转换为 OpenCV 格式。我建议您阅读 GstAppSink 和 GstBuffer。

基本上，如果我没记错的话，您必须在后台线程中运行管道。然后使用 gst_app_sink 中的一些函数，您可以从 sink 获取缓冲区数据。

快速查找该问题，您必须为此使用 GST_BUFFER_DATA

我记得不得不将结果从 yCBCr 转换为 bgr，一位同事遇到了问题，因为 opencv 的转换不足。所以你可能不得不自己写。（这是在 IplImage* 时代）

# sql - SQL 查询（不正确地使用连接？）

> ID：10626742
> 
> 赞同：0
> 
> 时间：2012-05-16T21:08:05.320
> 
> 标签：sql, oracle

我正在尝试编写一个（Oracle）SQL 查询，给定一个“agent_id”，它会给我一个代理在评估期间回答的问题列表，以及代理回答的所有时间的平均分数那些问题。

注意：我尝试将查询设计为支持多个员工（因此我们可以在商店级别进行查询），因此 where 子句中的“IN”条件。

这是我到目前为止所拥有的：

```
select question.question_id as questionId, 
       ((sum(answer.answer) / count(answer.answer)) * 100) as avgScore
  from SPMADMIN.SPM_QC_ASSESSMENT_ANSWER answer
  join SPMADMIN.SPM_QC_QUESTION question 
    on answer.question_id = question.question_id
  join SPMADMIN.SPM_QC_ASSESSMENT assessment 
    on answer.assessment_id = assessment.assessment_id
  join SPMADMIN.SPM_QC_SUB_GROUP_TYPE sub_group 
    on question.sub_group_type_id = sub_group.sub_group_id
  join SPMADMIN.SPM_QC_GROUP_TYPE theGroup 
    on sub_group.group_id = theGroup.group_id
 where question.question_id in (select distinct question2.question_id 
                                  from SPMADMIN.SPM_QC_QUESTION question2
                               )
   and question.bool_yn_active_flag = 'Y'
   and assessment.agent_id in (?)
   and answer.answer is not null
order by theGroup.page_order asc, 
         sub_group.group_order asc, 
         question.sub_group_order asc 
```

基本上我想看看：

```
|questionId|avgScore|
|     1    |   100  |
|     2    |   50   |
|     3    |   75   | 
```

这样，员工曾经回答过的每个问题都在问题索引列表中，并且在他们回答过的所有时间中，他们的平均得分都在列表中。

当我按原样运行它时，我收到“ORA-00937：不是单组功能”错误。我添加的“group by”子句的任何组合都没有任何帮助。

当我运行它删除`question.question_id as questionId,`选择的部分时，它运行良好，但它显示了他们在*所有*问题上的平均分数。我需要按问题分解。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:34:28.373

如果 SELECT 列表中有聚合函数（SUM 和 COUNT 是聚合函数），那么 SELECT 列表中的任何其他列都需要在 GROUP BY 子句中。例如：

```
SELECT fi, COUNT(fo)
  FROM fum
 GROUP BY fi 
```

`COUNT(fo)`表达式是聚合，列`fi`是非聚合。如果要将另一个非聚合添加到 SELECT 列表，它也需要包含在 GROUP BY 中。例如

```
SELECT TRUNC(fee), fi, COUNT(fo)
  FROM fum
 GROUP BY TRUNC(fee), fi 
```

更准确地说，与其说“SELECT 列表中的列”，不如说“SELECT 列表中的所有非聚合表达式”都需要包含在 GROUP BY 子句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:13:45.283

这不是您的加入，而是您对`GROUP BY`.

当您`GROUP BY`在 SQL 中使用 a 时，您`GROUP BY`就是定义组的事物。您拥有的所有其他东西都必须在`SELECT`对组进行操作的聚合中。

您也可以在没有 的情况下对整个集合进行聚合`GROUP BY`，但是每一列都需要在聚合函数中。

# jquery - 使用 jQuery 查找子元素时，页面奇怪地跳跃

> ID：10626743
> 
> 赞同：0
> 
> 时间：2012-05-16T21:08:10.617
> 
> 标签：jquery, html, jquery-ui

我在 Safari 和 Chrome 中遇到了这个问题......我认为 Firefox 正在运行。

我有这个 jQuery 代码：

```
$(".featureSection").hover(function(){ 
$(this).stop(true, true).toggleClass("activeSection", 500);
$(this).find(".para").stop(true, true).fadeToggle("slow");
}); 
```

这是我正在访问的 HTML 部分：

```
<div class="featureSection clearfix">
    <h3>And...</h3>
    <div class="sectionTitle">

        <h1>Holiday Cards</h1>
        <img src="http://crm-newsletter.com/website/images_concierge/gift1.png" alt="" width="229" height="224" />
        <h4 class="para">After closing with your client a beautiful gift and customized thank you card will be sent out as appreciation for their business. </h4>

    </div><!--end sectionTitle -->
</div><!-- end featureSection --> 
```

这是页面：

[有问题的页面](http://www.crm-newsletter.com/website/concierge.html#)

请注意，当您将鼠标悬停在某个部分上时，整个页面会向下跳。这只发生在第一次翻转时，之后一切正常。当我删除`.find`代码时跳转停止，所以我想这是由于某种原因导致了这个问题。有什么解决办法吗？即使它是完全不同但影响相同的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:54:19.463

我终于通过将`<h4>`div 标签包装并设置`.fadeToggle`在这个上解决了这个问题。不知道为什么它确实有效，但它有效。

# regex - (foo|bar|baz) 的对面

> ID：10626744
> 
> 赞同：2
> 
> 时间：2012-05-16T21:08:12.573
> 
> 标签：regex, perl

我想要一个正则表达式来匹配除更广泛表达式中的一些特定选项之外的所有内容。

以下示例将匹配 test_foo.pl 或 test_bar.pl 或 test_baz.pl：

```
/test_(foo|bar|baz)\.pl/ 
```

但我想恰恰相反：

```
match test_.*\.pl except for where .* = (foo|bar|baz) 
```

我对此的选择有点有限，因为这不是直接进入 perl 程序，而是[cloc 的一个参数，一个计算代码行数的程序（恰好是用 perl 编写的）](http://cloc.sourceforge.net/)。所以我正在寻找一个可以在一个正则表达式中完成的答案，而不是多个链接在一起的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T21:11:43.527

您应该能够通过使用负前瞻来完成此操作：

```
/test_(?!foo|bar|baz).*\.pl/ 
```

如果`foo`、`bar`或`baz`紧随其后，这将失败`test_`。

请注意，这仍然可以匹配类似的`test_notfoo.pl`内容，并且会失败`test_fool.pl`，如果您不想要这种行为，请通过添加一些确切应该和不应该匹配的示例来澄清。

如果您想接受类似`test_fool.pl`or`test_bart.pl`的内容，则可以将其更改为以下内容：

```
/test_(?!(foo|bar|baz)\.pl).*\.pl/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:48:07.223

```
(?:(?!STR).)* 
```

是

```
STR 
```

作为

```
[^CHAR] 
```

是

```
CHAR 
```

所以你要

```
if (/^test_(?:(?!foo|bar|baz).)*\.pl\z/s) 
```

更具可读性：

```
my %bad = map { $_ => 1 } qw( foo bar baz );

if (/^test_(.*)\.pl\z/s && !$bad{$1}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:45:42.467

```
#!/usr/bin/env perl

use strict; use warnings;

my $pat = qr/\Atest_.+(?<!foo|bar|baz)[.]pl\z/;

while (my $line = <DATA>) {
    chomp $line;
    printf "%s %s\n", $line, $line =~ $pat ? 'matches' : "doesn't match";
}

__DATA__
test_bar.pl
test_foo.pl
test_baz.pl
test baz.pl
0test_bar.pl
test_me.pl
test_me_too.txt 
```

输出：

```
test_bar.pl 不匹配
test_foo.pl 不匹配
test_baz.pl 不匹配
测试 baz.pl 不匹配
0test_bar.pl 不匹配
test_me.pl 匹配
test_me_too.txt 不匹配
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T21:18:21.870

嗯，我可能误解了你的问题。无论如何，也许这有帮助......

* * *

您将否定匹配运算符。例如：

```
perl -lwe "print for grep ! m/(lwp|archive).*\.pl/, glob q(*.pl)"
# Note you'd use single-quotes on Linux but double-quotes on Windows.
# Nothing to do with Perl, just different shells (bash vs cmd.exe). 
```

`!`否定比赛。以上是以下的简写：

```
perl -lwe "print for grep ! ($_ =~ m/(lwp|archive).*\.pl/), glob q(*.pl)" 
```

也可以使用否定匹配运算符来编写`!~`，如下所示：

```
perl -lwe "print for grep $_ !~ m/(lwp|archive).*\.pl/, glob q(*.pl)" 
```

如果您想知道，[`glob`](http://perldoc.perl.org/functions/glob.html)根据您的示例，它只是用于获取文件名的输入列表。我刚刚替换了另一种匹配模式，该模式适合我在目录中方便使用的文件。

# playframework - 在cygwin下运行playframework

> ID：10626746
> 
> 赞同：1
> 
> 时间：2012-05-16T21:08:16.420
> 
> 标签：playframework

有人试过在cygwin环境下运行playframework吗？我收到此错误：

```
java.lang.IllegalArgumentException: Illegal character in opaque part at index 2: C:\installedSoft\play-2.0.1/framework/sbt/sbt.boot.properties
    at java.net.URI.create(URI.java:859)
    at java.net.URI.resolve(URI.java:1043)
    at xsbt.boot.Configuration$.resolve$1(Configuration.scala:50)
    at xsbt.boot.Configuration$$anonfun$1.apply(Configuration.scala:56)
    at scala.collection.Iterator$$anon$21.hasNext(Iterator.scala:371)
    at xsbt.boot.Configuration$.configurationFromFile(Configuration.scala:57)
    at xsbt.boot.Configuration$.find(Configuration.scala:25)
    at xsbt.boot.Launch$.apply(Launch.scala:14)
    at xsbt.boot.Boot$.runImpl(Boot.scala:25)
    at xsbt.boot.Boot$.main(Boot.scala:15)
    at xsbt.boot.Boot.main(Boot.scala) 
```

原因：java.net.URISyntaxException：索引 2 处不透明部分中的非法字符：C:\installedSoft\play-2.0.1/framework/sbt/sbt.boot.properties at java.net.URI$Parser.fail(URI .java:2829) 在 java.net.URI$Parser.checkChars(URI.java:3002) 在 java.net.URI$Parser.parse(URI.java:3039) 在 java.net.URI.(URI.java :595) at java.net.URI.create(URI.java:857) ... sbt 执行期间还有 10 个错误：java.lang.IllegalArgumentException：索引 2 处不透明部分中的非法字符：C:\installedSoft\play- 2.0.1/framework/sbt/sbt.boot.properties

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:54:44.597

我尝试过使用 Play 1.2.4，只要我使用“play.bat run”而不是“play run”，它就可以工作。

但是，当停止应用程序时，java 进程有时会继续运行并保持 9000 端口，因此无法再次启动应用程序，除非您不从任务管理器中手动杀死它。

如果我使用**play.bat start而不是****play.bat run**然后将日志**play.bat 拖出**并停止应用程序，这将不是问题： **play.bat stop**。

# html - CSS - 对齐标签

> ID：10626747
> 
> 赞同：0
> 
> 时间：2012-05-16T21:08:21.747
> 
> 标签：html, css

我正在使用购物车脚本，并且有包含产品类别的选项卡。

这是标签 css ：

```
 .paypalshop .shop-groups{
 position: absolute;
 top: 0;
 left: 0;
 width: 100%;
 background-color: #ddd;
 border-bottom: 1px solid #ccc;
}

.paypalshop .shop-groups li{
  float: left;
  border: 1px solid #ccc;
 }

.paypalshop .shop-groups a{
 display: block;
 line-height: 20px;
 font-size: 1.1em;
 min-width: 20px;
 padding: 2px 15px;
 text-align: center;
 color: #777; 
 font-weight: bold;
 text-shadow:0 1px 1px #fff;
}

.paypalshop .shop-groups a:hover{
 color: #555;
}

.paypalshop .shop-groups .active-group {
 background-color: #e5e5e5;
}

.paypalshop .shop-groups .active-group a{
 color: #da0000!important;
 } 
```

问题是在我的项目中，我有 9 个类别，并且它包含了其他选项卡。（看看我的意思：http: [//desmond.imageshack.us/Himg607/scaled.php](http://desmond.imageshack.us/Himg607/scaled.php?server=607&filename=screenshot20120516at170.png&res=landing) ?server=607&filename=screenshot20120516at170.png&res=landing ）

如您所见，它看起来不太好......因为选项卡按钮没有填满顶部栏的宽度。

有没有办法“证明”按钮标签？（在上面的 CSS 中，它是 .paypalshop .shop-groups a）

所以它看起来像：[http ://desmond.imageshack.us/Himg27/scaled.php?server=27&filename=toptabs.jpg&res=landing](http://desmond.imageshack.us/Himg27/scaled.php?server=27&filename=toptabs.jpg&res=landing)

知道怎么做吗？需要修改我在此处粘贴的 CSS。

谢谢！

* * *

编辑：这是在我的 HTML 代码中创建 2 个类别的方式：

```
 <!-- group1-->
<ul id="Presentoirs">
<li class="product" name="Geotop" price="20.5"> 
                         <a class="product-image fancybox" href="images/product_big.jpg" title="Picture 4">
                             <img src="images/product_2.png" alt="Preview"/>
                             <div class="text-overlay">
                              <p class="product-heading">Description</p>
                               Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
                               doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore 
                               veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                             </div>
                         </a>
                         <p class="product-heading">Geotop</p>
                         <a href="#" class="product-buy">Ajouter au panier</a>
                         <p class="product-meta">some additional comment</p>
                         <div class="product-price">20.5<span class="product-currency">$</span></div>
                    </li>
</ul>

 <!-- group2-->
<ul id="Bannieres_et_Supports_en_A">
<li class="product" name="Geotop" price="20.5"> 
                         <a class="product-image fancybox" href="images/product_big.jpg" title="Picture 4">
                             <img src="images/product_2.png" alt="Preview"/>
                             <div class="text-overlay">
                              <p class="product-heading">Description</p>
                               Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
                               doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore 
                               veritatis et quasi architecto beatae vitae dicta sunt explicabo.
                             </div>
                         </a>
                         <p class="product-heading">Geotop</p>
                         <a href="#" class="product-buy">Ajouter au panier</a>
                         <p class="product-meta">some additional comment</p>
                         <div class="product-price">20.5<span class="product-currency">$</span></div>
                    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:48:20.210

您可以使用`:nth-child`适当性并`width`为每个选项卡添加特定内容。

[阅读关于 :nth-child](http://css-tricks.com/how-nth-child-works/)

# java - Java ImageIO-ext TIF 文件在读取时损坏

> ID：10626750
> 
> 赞同：1
> 
> 时间：2012-05-16T21:08:46.267
> 
> 标签：java, tiff, javax.imageio, jai

我正在尝试`.tif`使用最少数量的附加库在 Java 中显示：

```
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.WindowConstants;

import javax.media.jai.widget.*;
import it.geosolutions.imageio.utilities.*;
import it.geosolutions.imageioimpl.plugins.tiff.*;
import com.sun.media.imageioimpl.common.*;

public static void main(String[] args) {
    try {
        File f = new File("image.tif");  
        BufferedImage tif = ImageIO.read(f);  
        ImageIcon ic = new ImageIcon(tif);  
        JFrame frame = new JFrame();  
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);  
        JLabel label = new JLabel(ic);  
        frame.add(label);  
        frame.setVisible(true);  
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我正在使用的库是：

```
 jai-core-1.1.3.jar
 jai-imageio-1.1.jar
 imageio-ext-tiff.1.1.3.jar
 imageio-ext-utilities.1.1.3.jar 
```

从这里： http: [//java.net/projects/imageio-ext](http://java.net/projects/imageio-ext)（右侧的下载链接）

但是，显示的图像是： ![损坏的 tif](../Images/407488ca4d4e5ccc2c97376a8700e27d.png) 这绝对**不是**原始图像。我所知道的也没有抛出任何错误。此外，原始图像很好，不会改变。

但是，原始代码很小。我实际上并没有使用`imageio-ext`导入，但是如果没有它们，程序将会失败。我以前也没有用过`imageio-ext`。

请帮忙！我需要能够`.tif`在不安装软件的情况下使用 Java 中的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:22:42.727

如果您已经使用了所有 JAI/ImageIO 库，您可能想尝试以下方法（这对我来说很好）：

```
import com.sun.media.jai.codec.FileSeekableStream;
import com.sun.media.jai.codec.ImageCodec;
import com.sun.media.jai.codec.ImageDecoder;

// This function is minimal, you should add exceptions and error handling
public RenderedImage read(String filename)
    FileSeekableStream fss = new FileSeekableStream(filename);
    ImageDecoder decoder = ImageCodec.createImageDecoder("tiff", fss, null);
    RenderedImage image = decoder.decodeAsRenderedImage()
    fss.close();
    return image;
} 
```

如果您需要 a`BufferedImage`而不是 a `RenderedImage`，我找到的唯一解决方案是使用此功能：

```
public static BufferedImage Rendered2Buffered(RenderedImage image) {
    BufferedImage bi = new BufferedImage(image.getWidth(), image.getHeight(), image.getSampleModel().getDataType());
    bi.setData(image.getData());
    return bi;
} 
```

但要小心，`image.getSampleModel().getDataType()`通常会返回 a `BufferedImage.TYPE_CUSTOM`，这使得无法`BufferedImage`创建 ！就我而言，我必须根据返回的样本大小“猜测”类型`image.getSampleModel().getSampleSize(0)`（因为我知道我正在使用的图像格式）。如果您知道将 a 转换为 a 的更好方法`RenderedImage`，`BufferedImage`请赐教:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:01:41.723

我最终选择了最新版本的[`Apache-Commons Imaging`](https://repository.apache.org/content/groups/snapshots/org/apache/commons/commons-imaging/1.0-SNAPSHOT/)（以前的 Sanselan）。 `Imaging`提供对 TIFF 文件的开箱即用支持（起初我遇到了一点麻烦，但通过从旧的 Sanselan 切换到新的 Commons Imaging 解决了这个问题）。

我必须自己对一些功能进行逆向工程（以指定宽度加载单个 sub-TIFF，同时保持纵横比）：

```
/**
 * Load a scaled sub-TIFF image.  Loads nth sub-image and scales to given width; preserves aspect ratio.
 * 
 * @param fileName String filename
 * @param index Index of sub-TIFF; will throw ArrayIndexOutOfBoundsException if sub-image doesn't exist
 * @param w Desired width of image; height will scale
 * @return Image (BufferedImage)
 * @throws IOException
 * @throws ImageReadException
 */
public static Image loadScaledSubTIFF(String fileName, int index, int w) throws IOException, ImageReadException {
    File imageFile = new File(fileName);
    ByteSourceFile bsf = new ByteSourceFile(imageFile);
    FormatCompliance formatCompliance = FormatCompliance.getDefault();
    TiffReader tiffReader = new TiffReader(true);
    TiffContents contents = tiffReader.readDirectories(bsf, true, formatCompliance);
    TiffDirectory td = contents.directories.get(index);
    Image bi = td.getTiffImage(tiffReader.getByteOrder(), null);
    Object width = td.getFieldValue(new TagInfo("", 256, TiffFieldTypeConstants.FIELD_TYPE_SHORT) {/**/});
    Object height = td.getFieldValue(new TagInfo("", 257, TiffFieldTypeConstants.FIELD_TYPE_SHORT) {/**/});
    int newWidth = w;
    int newHeight = (int) ((newWidth * ((Number)height).doubleValue()) / (((Number)width).doubleValue()));

    bi = bi.getScaledInstance(w, newHeight, java.awt.Image.SCALE_FAST);
    height = null;
    width = null;
    td = null;
    contents = null;
    tiffReader = null;
    formatCompliance = null;
    bsf = null;
    return bi;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T23:09:21.947

您认为您需要 JAI 库来解码和使用 TIFF 文件是正确的，但即使您已导入它们，您实际上并没有使用它们！

[这是一个简短的教程](http://java.sun.com/products/java-media/jai/forDevelopers/jai1_0_1guide-unc/Examples.doc.html "这是一个简短的教程")，展示了如何创建一个 TIFFDecodeParam 对象（来自 JAI 库），然后使用它来解码（和显示）一个 TIFF 图像。

您可能还会发现[JAI API 库](http://docs.oracle.com/cd/E17802_01/products/products/java-media/jai/forDevelopers/jai-apidocs/index.html)也很有用。

# php - PHP 变量传递

> ID：10626753
> 
> 赞同：0
> 
> 时间：2012-05-16T21:09:03.253
> 
> 标签：php, drupal

我正在使用drupal。我有这个页面 something.com/node/13。在里面我有这个脚本

```
 <?php
 $door = $_GET["variable"];
 echo $door;
 ?> 
```

当我打开类似 something.com/node/13?variable=1231 的 URL 时，我收到以下错误：

```
 Error message
  Notice: Undefined index: variable in eval() (line 2 of /var/www/html/modules/php/php.module(74) : eval()'d code). 
```

并且没有输出。有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:26:30.747

这个错误，特别是在 drupal 7 中，仅仅意味着你没有得到 $_GET['variable'] 的任何值。这是因为 url 没有值（someurl?variable=foo）。您可以通过像这样添加 @ 前缀来避免通知：

$door = @$_GET['变量'];

但这不会使变量返回任何数据。从您发布的代码中很不清楚您要完成什么。你可以考虑从那里开始。没有理由不能在 drupal 中使用 $_GET 变量。我一直这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:44:29.520

使用[drupal_get_query_parameters](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_get_query_parameters/7)

因为使用 Drupal 的重写规则，您不会像那样直接干净地获取 $_GET 值。

# mysql - MySQL复制是双向的

> ID：10626756
> 
> 赞同：4
> 
> 时间：2012-05-16T21:09:22.360
> 
> 标签：mysql, database-replication

我们已经成功地设置了 MySQL 文献中描述的主从复制。

但是，我很好奇是否有人设置了双向复制。例如，如果一个人安装了 Drupal 或 Wordpress。第一台（“主”）数据库服务器停机，第二台（“从”）启动。与此同时，用户继续进行编辑，写入新数据。当第一台数据库服务器重新启动时，写入第二台的更改是否可以向上复制到第一台？

那就是：除了Master-Slave，还有其他的复制策略吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:17:03.393

您可以进行主主复制。不幸的是，Drupal 或 Wordpress 都不支持这一点。最好的做法是 Master-Slave 或 Master-Slave-Slave，如果原来的 master 宕机，则让链中的第一个 slave 成为新的 Master。然后将旧 Master 重新配置为从新 Master（或链中的最后一个从属设备）上从属。

你的mysql服务器多久宕机一次？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:32:05.910

Master-Master Replication 有一些缺点。例如，数据不一致很容易发生。

您是否尝试过使用 Galera Cluster for MySQL 进行同步多主复制？

[http://codership.com/](http://codership.com/)

# django - django模型清理问题

> ID：10626760
> 
> 赞同：0
> 
> 时间：2012-05-16T21:09:59.327
> 
> 标签：django, validation, model, many-to-many

我在通过多对多的两种模型工作，这是相关代码：

```
class Curso(models.Model):
    horarios = models.ManyToManyField(Horario, related_name = 'cursos')
    ...
    def clean(self):
       ...
       self.horarios.all()
    def save(self,*args,**kwargs):
        self.full_clean()
        ... 
```

`Horarios`已经定义好了，现在当我尝试在管理界面中创建光标时，我得到一个错误指向`self.horarios.all()`：

```
'Curso' instance needs to have a primary key value before a many-to-many relationship can be used. 
```

这是有道理的，因为它没有被保存，所以我的问题是，我如何访问正在保存`horarios`的当前实例中的值？`Curso`

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T00:08:10.513

这个错误对我来说似乎很简单——你根本不能`ManyToMany`在保存对象之前调用 a 。

您可以重现错误：`Curso().horarios`

显然你不能对不可能存在的关系进行验证，所以只需将你的调用包装在一个`if self.pk`

```
if self.pk:
   self.horarios.all() 
```

# regex - 如何使用 JMeter 中的正则表达式提取器提取某些值？

> ID：10626762
> 
> 赞同：1
> 
> 时间：2012-05-16T21:10:02.763
> 
> 标签：regex, jmeter

如果我有两个相同的标签和相同的属性，唯一的区别是值，我如何提取第二个？

```
<data xsi:type="soapenc:string">0</data>
<data xsi:type="soapenc:string">1</data> 
```

我试过做以下事情。

```
<data xsi:type="soapenc:string">0</data><data xsi:type="soapenc:string">(.+?)</data> 
```

并将值分配给 myID。但是当我在脚本中输入 ${myID} 时，它使用的是字符串 "${myID}" 而不是实际值。是不是提取不起作用？或者我需要使用不同的变量吗？

我有一个不同的采样器，我只有一个标签。例如，

```
<data xsi:type="soapenc:string">0</data> 
```

当我做，

```
<data xsi:type="soapenc:string">(.+?)</data> 
```

并分配给 myAnotherID，我可以使用 ${myAnotherID} 并且该值将在脚本中使用。

那么，为什么 ${myID} 没有返回值呢？

提前致谢， 蒙特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T21:45:49.913

使用单个表达式 - `<data xsi:type="soapenc:string">(.+?)</data>`- 获取所有匹配项。
如果有多个匹配项，jmeter 将根据您尝试提取的变量名称为每个匹配项生成特定变量 - 例如`refName_N`：myAnotherID_1, myAnotherID_2, ..., myAnotherID_N 在您的情况下。
然后您可以通过相应的变量（在您的示例中为 myAnotherID_1）引用所需的值。

*   查看[正则表达式提取器参考](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)以获取匹配编号说明。
*   查看[这篇](https://stackoverflow.com/questions/10582100/jmeter-regex-extractor-foreach-controller)关于使用正则表达式提取器提取和访问一批值的帖子。
*   您还可以使用Debug [Sampler](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler)`JMeter Variables = true`查看在提取一批值时生成的所有变量。
*   查看[这篇文章](http://theworkaholic.blogspot.com/2011/07/looping-through-all-output-of-regexp.html)，以在没有 ForEach 控制器的情况下循环多个 RegExp Extractor 输出值。

希望这可以帮助。

# asp.net - 401，由于凭据无效，访问被拒绝

> ID：10626763
> 
> 赞同：0
> 
> 时间：2012-05-16T21:10:04.507
> 
> 标签：asp.net, forms-authentication, authorization

在 global.aspx：

```
void Application_BeginRequest(object sender, EventArgs e)
{
  if (ConfigurationManager.AppSettings["MaintenanceMode"] == "true")
    if (!Request.IsLocal)
      if (Request.CurrentExecutionFilePathExtension == ".aspx")
        HttpContext.Current.RewritePath("Maintenance.htm");
} 
```

在 web.config：

```
<appSettings>  
  <add key="MaintenanceMode" value="true"/>  
</appSettings>
<location path="Maintenance.htm">  
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</location> 
```

当通过 Visual Studio 在本地运行网站时，一切都很好，
但在网络服务器上，我得到了一个用户名/密码登录窗口，
按下后`Cancel`显示 401 消息。
此外，登录窗口不接受输入正确的用户名和密码。
我正在使用表单身份验证。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T22:37:19.967

我只是想提醒任何搜索此错误的人，它可能是由 web.config 中的各种错误引起的

这个 web.config 是为我解决问题的 web.config 的精髓

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <security>
            <authentication>
                <anonymousAuthentication userName="" />
            </authentication>
        </security>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:40:01.323

`Maintenance.htm`将文件更改为`ASPX`格式解决了这个问题。

# php - FosUserBundle 和自定义用户注册

> ID：10626764
> 
> 赞同：0
> 
> 时间：2012-05-16T21:10:06.067
> 
> 标签：php, symfony, fosuserbundle

我试图弄清楚 FosUserBundle 的注册过程，但一直无法这样做。

我希望能够使用自定义字段手动注册用户，但无法在代码中看到它。

我在 FosUserBundle 中有 registerAction 并且在任何地方关注它都不会显示信息实际存储在数据库中的位置：

```
public function registerAction()
    {
        $form = $this->container->get('fos_user.registration.form');
        $formHandler = $this->container->get('fos_user.registration.form.handler');
        $confirmationEnabled = $this->container->getParameter('fos_user.registration.confirmation.enabled');

        $process = $formHandler->process($confirmationEnabled);
        if ($process) {
            $user = $form->getData();

            if ($confirmationEnabled) {
                $this->container->get('session')->set('fos_user_send_confirmation_email/email', $user->getEmail());
                $route = 'fos_user_registration_check_email';
            } else {
                $this->authenticateUser($user);
                $route = 'fos_user_registration_confirmed';
            }

            $this->setFlash('fos_user_success', 'registration.flash.user_created');
            $url = $this->container->get('router')->generate($route);

            return new RedirectResponse($url);
        }

        return $this->container->get('templating')->renderResponse('FOSUserBundle:Registration:register.html.'.$this->getEngine(), array(
            'form' => $form->createView(),
            'theme' => $this->container->getParameter('fos_user.template.theme'),
        ));
    } 
```

如何手动注册用户？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T09:29:57.637

你在 FOSUserBundle 文档中读过这个吗？

[使用用户管理器](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/user_manager.md)

显然，服务 UserManager 有责任实际保存和更新用户，您可以按照指南创建自己的 UserManager。

编辑：Symfony 已将 FOSUserBundle 的文档合并到他们自己的文档中，因此文档的新链接是： [https ://symfony.com/doc/master/bundles/FOSUserBundle/index.html](https://symfony.com/doc/master/bundles/FOSUserBundle/index.html)

# python - Minimax 解释“傻瓜”

> ID：10626766
> 
> 赞同：11
> 
> 时间：2012-05-16T21:10:07.577
> 
> 标签：python, algorithm

我对算法很陌生，我试图理解极小值，我读了很多文章，但我仍然不知道如何在 python 中将它实现到井字游戏中。你能试着用一些伪代码或一些python代码尽可能简单地向我解释吗？

我只需要了解它是如何工作的。我读了很多关于那的东西，我理解了基本的，但我仍然不知道它是如何返回的。

如果可以，请不要链接我的教程和示例，例如 (http://en.literateprograms.org/Tic_Tac_Toe_(Python))，我知道它们很好，但我只需要一个白痴的解释。

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T15:29:14.783

“极小极大”的概念是在两人游戏中，一个玩家试图最大化某种形式的分数，而另一个玩家试图最小化它。例如，在井字游戏中，X 的胜利可能计为 +1，O 的胜利可能计为 -1。X 将是最大玩家，试图最大化最终得分，而 O 将是最小玩家，试图最小化最终得分。

X 被称为最大玩家，因为当它是 X 的移动时，X 需要选择一个移动后最大化结果的移动。当 O 玩家时，O 需要选择一个使该动作之后的结果最小化的动作。这些规则是递归应用的，因此，例如，如果只有三个棋盘位置可以玩，X 的最佳下法是迫使 O 选择价值尽可能高的最小值移动的那一种。

换句话说，棋盘位置 B 的博弈论极小最大值 V 定义为

```
 V(B) = 1   if X has won in this position
 V(B) = -1  if O has won in this position
 V(B) = 0   if neither player has won and no more moves are possible (draw) 
```

除此以外

```
 V(B) = max(V(B1), ..., V(Bn)) where board positions B1..Bn are
        the positions available for X, and it is X's move
 V(B) = min(V(B1), ..., V(Bn)) where board positions B1..Bn are
        the positions available for O, and it is O's move 
```

X 的最优策略总是从 B 移动到 Bi 使得 V(Bi) 最大，即对应于博弈论值 V(B)，并且类似地，对于 O，选择最小的后继位置。

然而，这在象棋之类的游戏中通常是不可能计算的，因为为了计算博弈论值，需要枚举整个博弈树直到最终位置，而这棵树通常非常大。因此，一种标准方法是创造一个“评估函数”，将棋盘位置映射到希望与博弈论值相关的分数。例如，在国际象棋程序中，评估函数倾向于为物质优势、开放列等给出正分数。极小极大算法使评估函数得分最小化，而不是棋盘位置的实际（不可计算的）博弈论值。

minimax 的一个重要的标准优化是“alpha-beta pruning”。它给出了与极小极大搜索相同的结果，但速度更快。Minimax 也可以用“negamax”来表示，其中分数的符号在每个搜索级别都反转。这只是实现 minimax 的另一种方法，但以统一的方式处理玩家。其他博弈树搜索方法包括迭代深化、证明数搜索等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T22:22:25.490

Minimax 是一种在交替回合的两人游戏中探索潜在移动空间的方法。你想赢，而你的对手想阻止你赢。

一个关键的直觉是，如果现在轮到你了，保证你获胜的两步顺序是没有用的，因为你的对手不会与你合作。你试图做出让你获胜机会最大化的动作，而你的对手做出让你获胜机会最小化的动作。

出于这个原因，从你做出的对你不利的动作或对手做出的对你有益的动作中探索分支并不是很有用。

# c# - 扫描计算机并在列表框中显示文件？

> ID：10626770
> 
> 赞同：0
> 
> 时间：2012-05-16T21:10:28.920
> 
> 标签：c#, visual-c#-express-2010

好的，我有一些代码可以扫描我的计算机并找到 .txt 文件并将它们显示在列表框中：

```
 private void button2_Click(object sender, EventArgs e)
    {
     IEnumerable<string> files = System.IO.Directory.EnumerateFiles(@"C:\", "*.txt*", System.IO.SearchOption.AllDirectories);
        foreach (var f in files)
        {
            listBox1.Items.Add(String.Format("{0}", f)); 
        }
    } 
```

每次运行此程序时都会出现错误。它说我不授权垃圾桶。我不在乎天气它是否扫描垃圾。有什么方法可以将垃圾箱排除在扫描之外？另外，如果您发现任何错误，有人可以帮助我改进我的代码！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:07:44.507

最快的方法是将它们放在 try-catch 块下，因为`EnumerateFiles`由于操作系统权限，函数无法访问受限制的文件。

```
 private void SearchDrives()
  {
     foreach (String drive in Directory.GetLogicalDrives())
     {
        try
        {
           // Search for folders into the drive.
           SearchFolders(drive);
        }
        catch (Exception) { }
     }
  }
  //---------------------------------------------------------------------------

  private void SearchFolders(String prmPath)
  {
     try
     {
        foreach (String folder in Directory.GetDirectories(prmPath))
        {
           // Recursive call for each subdirectory.
           SearchFolders(folder);

           // Create the list of files.
           SearchFiles(folder);
        }
     }
     catch (Exception) { }
  }
  //---------------------------------------------------------------------------

  private void SearchFiles(String prmPath)
  {
     try
     {
        foreach (String file in Directory.GetFiles(prmPath))
        {
           FileInfo info = new FileInfo(file);
           if (info.Extension == ".txt")
           {
              listBox1.Items.Add(info.Name); 
           }
        }
     }
     catch (Exception) { }
  }
  //--------------------------------------------------------------------------- 
```

不只是回收站，它也将无法将多个文件的文件头读入您的系统目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:07:05.147

一般来说，您可以这样做，以便对每个文件夹进行递归调用，然后使用 try/catch 块来查看您可以访问或无法访问的女巫。但正如安德拉斯建议的那样，我也会选择已经存在的东西，这会节省你的时间

[你的例子的另一种方法](http://java2s.com/Tutorial/CSharp/0300__File-Directory-Stream/Traverseallfilesundertheroot.htm)

# php - php 5.3.x ldap_bind() 无法使用自签名证书 ldaps://

> ID：10626771
> 
> 赞同：0
> 
> 时间：2012-05-16T21:10:34.147
> 
> 标签：php, openldap

我正在使用 Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8w 和 PHP/5.3.13 在 RHEL 5.6 (x86_64) 上设置新的 LAMP 服务器。（我也尝试过使用 PHP 5.3.11。）

问题是我无法绑定到使用自签名证书的 SSL LDAP 服务器。

```
TLS certificate verification: Error, self signed certificate in certificate chain 
```

我读过的所有地方都提到将 ldap.conf 修改为“TLS_REQCERT never”，但这不起作用。（这也不是永久解决方案，因为更改会被某些公司子系统覆盖。）

我还尝试将其放入 PHP 代码中：

```
putenv('LDAPTLS_REQCERT=never'); 
```

这也没有奏效。

需要注意的三点：

1) 相同的代码在类似的服务器设置中运行良好，但使用的是 PHP 5.2.x，并且对 ldap.conf 文件没有任何更改。

2）当通过 CLI 而不是通过 Apache 运行相同的 PHP 脚本时，它工作正常

3）如果我删除 ldaps:// 连接并只使用 ldap://，它可以正常工作。

我无法弄清楚为什么对 ldap.conf 的更改无法正常工作以及为什么 CLI 会工作，即使 ldap.conf 没有被修改。

编辑：

我不再认为证书检查是问题，但我仍然在努力让 ldaps:// 在从 Apache 运行时工作。

这是从 CLI 运行时的调试：

```
TLS certificate verification: Error, self signed certificate in certificate chain
TLS trace: SSL_connect:SSLv3 read server certificate A
TLS trace: SSL_connect:SSLv3 read server done A
TLS trace: SSL_connect:SSLv3 write client key exchange A
TLS trace: SSL_connect:SSLv3 write change cipher spec A
TLS trace: SSL_connect:SSLv3 write finished A
TLS trace: SSL_connect:SSLv3 flush data
TLS trace: SSL_connect:SSLv3 read finished A
ldap_open_defconn: successful
ldap_send_server_request 
```

在 Apache 下运行时也是如此：

```
TLS certificate verification: Error, self signed certificate in certificate chain
TLS trace: SSL_connect:SSLv3 read server certificate A
TLS trace: SSL_connect:SSLv3 read server done A
TLS trace: SSL_connect:SSLv3 write client key exchange A
TLS trace: SSL_connect:error in SSLv3 write finished A
TLS trace: SSL_connect:error in SSLv3 write finished A
TLS: can't connect. 
```

因此，这两种情况下的证书错误似乎都很好，但是当作为 Web 模块运行时，我得到 TLS: can't connect 与成功连接。

phpinfo() 和 php -i 在 OpenSSL 和 LDAP 选项方面是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:32:40.667

我终于能够解决这个问题。不幸的是，这更像是一个奇怪的用户错误案例，而不是一些未知的错误。

我记得当我编译 LAMP 堆栈的所有部分时，我最初使用 -fPIC 参数编译 OpenSSL。httpd 与此相关联。

当我编译 php 5.3.11 时，它抱怨 SSL 库应该用“共享”编译，所以我重新编译了 OpenSSL（相同的安装目录）并将 PHP 链接到那个。

显然，由于这个原因，httpd 在使用 OpenSSL 库时遇到了问题，所以我针对新的 OpenSSL 库重新编译了 httpd 并重新安装了它自己。

SSL over LDAP 现在正在运行。

# shell - 在 MakeFile 中监听后台进程的退出代码

> ID：10626773
> 
> 赞同：0
> 
> 时间：2012-05-16T21:10:43.263
> 
> 标签：shell, makefile, background-process, spawn

**解决** 了我需要在 MakeFile 中生成后台进程并考虑它们的退出代码。设想：

*   在后台产生了几个进程。
*   MakeFile 继续评估（并且不想在某个循环中检查生成的进程 PID 等等）
*   某些进程以非零退出代码退出
*   使实用程序以非零退出代码退出

自然地，我考虑使用`command &`在后台生成一个进程。

**问题：**如果指定了命令，`command &`则 make 进程**不会**跟踪它的退出代码。

**样品 1**

```
do:
        @false & \
        echo "all is normal"

%make -f exit_status_test.mk
all is normal 
```

**样品 2**

```
do:
        @false && \
        echo "all is normal"

%make -f exit_status_test.mk
*** Error code 1

Stop in /usr/home/scher/tmp/lock_testing. 
```

示例 1 显示 make 实用程序不考虑后台进程的退出代码。

PS 请不要建议存储生成的进程 PID 并在循环中检查它们，并有一些`sleep`延迟等等。需要继续评估 MakeFile 并以非零代码自动退出。

**解决方案**

```
do:
        @(echo "background command" ; (echo "[HANDLER] Prev command exits with $$?")) & \
        echo "doing something" 
```

所以我们可以创建一系列命令来处理后台进程的退出状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:46:00.503

这似乎是一个错误的尝试来创建一个`Makefile`可以并行运行多个作业的，而实际上 make 通常可以为你做这件事。

您需要做的就是在 make 中给每个作业一个单独的命令：

```
target: job1 job2

job1:
    some_command

job2:
    some_other_command 
```

如果你在你的`Makefile`then run中使用类似的东西`make -j2 target`，那么两者`some_command`和`some_other_command`都将并行运行。

看看你是否能找到一种方法让 make 像这样并行运行你的工作。

# mysql - Magento - 订单保存错误：SQLSTATE [23000]：违反完整性约束

> ID：10626774
> 
> 赞同：0
> 
> 时间：2012-05-16T21:10:49.560
> 
> 标签：mysql, magento

有时，当我们在后端下订单时 - 对于新客户，我们在提交时收到以下错误：

```
Order saving error: SQLSTATE[23000]: Integrity constraint violation: 1452
Cannot add or update a child row: a foreign key constraint fails 
`artizara_artizara/enterprise_reward`, CONSTRAINT `FK_REWARD_CUSTOMER_ID` 
FOREIGN KEY (`customer_id`) REFERENCES customer_entity` (`entity_id`) 
ON DELETE CASCADE ON UPDATE CASCADE) 
```

我查看了错误日志，它显示以下内容：

```
exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint 
violation: 1452 Cannot add or update a child row: a foreign key constraint fails 
(`artizara_artizara/enterprise_reward`, CONSTRAINT `FK_REWARD_CUSTOMER_ID` 
FOREIGN KEY (`customer_id`) REFERENCES `customer_entity` (`entity_id`) ON DELETE 
CASCADE ON UPDATE CASCADE)' in /chroot/home/artizara/artizara.com/html/lib/Zend/Db/Statement/Pdo.php:228 
```

我在 google/Magento 论坛中对此进行了研究，有些人说这与表格不是 InnobDB 有关...

所以我进入 phpMyAdmin 并拉起`enterprise_reward`桌子。打开**操作**选项卡。**在存储引擎**旁边它说 InnoDB 所以我想我已经设置好了......

其他人尝试通过搜索孤立数据来为他们的问题制作 sql 语句。我不太确定这到底在寻找什么，所以我不知道如何将 sql 语句放在一起（无论如何我都比较新）。

有人会帮助解决这个问题（通过搜索孤儿数据等），也许让我知道为什么会发生这种情况？

仅供参考 - 他们无法让我清楚地了解每个新客户是否会发生这种情况（在管理员中下订单时）或只是有时 - 所以我没有那个信息（还）......

***编辑 5/16 @ 2:30p：***

我试过用这个 sql 代码寻找孤儿，但**没有返回结果**......

```
SELECT
  *
FROM
  enterprise_reward
LEFT
  JOIN
    customer_entity
    ON enterprise_reward.customer_id = customer_entity.entity_id
WHERE
  customer_entity.entity_id IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:24:28.907

We are indeed experiencing this same issue on enterprise 1.10.0.1\. This appears to be a known bug that has been filed with Varien. However - I have not found a solution.

Best thing I could find is this thread: [http://www.magentocommerce.com/boards/v/viewthread/234872](http://www.magentocommerce.com/boards/v/viewthread/234872)

The bug report I found is posted below.

BUG ID: 26516 Posted: 2011-09-21 15:22:18

When payment processing fails with an exception, the following error occurs in certain situations:

> Zend_Db_Statement_Exception: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`magento_enterprise`.`enterprise_reward`, CONSTRAINT `FK_REWARD_CUSTOMER_ID` FOREIGN KEY (`customer_id`) REFERENCES `customer_entity` (`entity_id`) ON DELETE CASCADE ON UPDATE CASCADE)

```
./lib/Zend/Db/Statement/Pdo.php:234
./lib/Zend/Db/Statement.php:300
./lib/Zend/Db/Adapter/Abstract.php:479
./lib/Zend/Db/Adapter/Pdo/Abstract.php:238
./lib/Varien/Db/Adapter/Pdo/Mysql.php:333
./lib/Zend/Db/Adapter/Abstract.php:574
./app/code/core/Mage/Core/Model/Mysql4/Abstract.php:414
./app/code/core/Mage/Core/Model/Abstract.php:318
./app/code/core/Enterprise/Reward/Model/Reward.php:202
./app/code/core/Enterprise/Reward/Model/Observer.php:548
./app/code/core/Enterprise/Reward/Model/Observer.php:564
./app/code/core/Mage/Core/Model/App.php:1265
./app/code/core/Mage/Core/Model/App.php:1246
./app/Mage.php:416
./app/code/core/Mage/Sales/Model/Service/Quote.php:187
./app/code/core/Mage/Sales/Model/Service/Quote.php:126
./EnterpriseRewardTest.php:70 
```

Steps to reproduce:

*   use Magento Enterprise with Enterprise Rewards enabled (or another module with a similar code, see below)
*   use a payment module that supports on-line authorization
*   check out an order as a new customer
*   trigger a payment error (e.g. by entering an invalid CC no).

I attached a PHPUnit test case that should reproduce the problem reliably.

The culprit is the code in Mage_Sales_Model_Service_Quote::submitOrder that does the following:

1.  start a transaction
2.  build a new order
3.  create a new customer and fill in the order's customerId field
4.  attempt to process the order, which raises an exception
5.  roll back the transaction
6.  dispatch "quote_submit_failure" event using the order as event data. Note that the order's customerId field now contains an invalid value since the transaction has been rolled back.

Now, if a handler for quote_submit_failure proceeds to use order's customerId, it will necessarily trigger the aforementioned "integrity constraint violation" error.

The problem can be reproduced on following versions: - Magento Enterprise Edition v1.10.0.1 - Magento Community Edition v1.6.0.0 (provided there happens to be a quote_submit_failure handler that expect a valid customerId.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:23:35.560

您还可以在 lib/Zend/Db/Statement/Pdo.php （_execute 方法）中将**$this->_stmt->queryString添加到 Zend_Db_Statement_Exception 以查看引发错误的查询。**

它会像..

> ```
> throw new Zend_Db_Statement_Exception($e->getMessage() . $this->_stmt->queryString, (int) $e->getCode(), $e); 
> ```

**但请记住：不要在 Magento 中提交核心修改。这不酷。**

资料来源：[Aftab Naveed 的博客](http://aftabnaveed.wordpress.com/2011/09/08/magento-display-full-query-in-the-exception/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T18:28:47.910

如果使用 1.10.0.1 或更低版本，`app/code/core/Enterprise/Reward/Model/Observer.php`请通过添加对客户 ID 的检查来修补此文件

```
protected function _revertRewardPointsForOrder(Mage_Sales_Model_Order $order)
{
    // Patch for known 1.10.0.1 bug
    if (!$order->getCustomer()->getId()) {
        return $this;
    }
    // End patch
    Mage::getModel('enterprise_reward/reward')
        ->setCustomerId($order->getCustomerId())
        ->setWebsiteId(Mage::app()->getStore($order->getStoreId())->getWebsiteId())
        ->setPointsDelta($order->getRewardPointsBalance())
        ->setAction(Enterprise_Reward_Model_Reward::REWARD_ACTION_REVERT)
        ->setActionEntity($order)
        ->updateRewardPoints();

    return $this;
} 
```

# javascript - knockout.js - 模式的延迟数据绑定？

> ID：10626780
> 
> 赞同：13
> 
> 时间：2012-05-16T21:11:05.890
> 
> 标签：javascript, dialog, knockout.js, modal-dialog, late-binding

我正在使用 knockout.js 来显示员工列表。我在页面上有一个隐藏的模式标记。当单击单个员工的“详细信息”按钮时，我想将该员工数据绑定到模式弹出窗口。我正在使用 ko.applyBindings(employee, element) 但问题是当页面加载时，它期望模态开始时绑定到某些东西。

所以我想知道，是否有技巧/策略来进行延迟/延迟数据绑定？我查看了虚拟绑定，但文档没有足够的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-17T06:34:30.687

我想提出一种在 MVVVM 中使用模态的不同方法。在 MVVM 中，ViewModel 是 View 的数据，View 负责 UI。如果我们检查这个提议：

```
this.detailedEmployee = ko.observable({}),

var self = this;
this.showDetails = function(employee){
    self.detailedEmployee(employee);
    $("#dialog").dialog("show"); //or however your dialog works
} 
```

我非常同意`this.detailedEmployee = ko.observable({})`，但我非常不同意这条线：`$("#dialog").dialog("show");`。这段代码放在 ViewModel 中并显示模态窗口，实际上它是 View 的责任，所以我们搞砸了 MVVM 方法。我会说这段代码将解决您当前的任务，但将来可能会导致很多问题。

*   关闭弹出窗口时，您应该设置`detailedEmployee`让`undefined`您的主 ViewModel 处于一致状态。
*   关闭弹出窗口时，当您想在应用程序中使用另一个模式的组件时，您可能希望进行验证并放弃关闭操作

对我来说，这些点非常关键，所以我想提出一个不同的方法。如果我们“忘记”您需要在弹出窗口中显示数据，绑定`with`可以解决您的问题。

```
this.detailedEmployee = ko.observable(undefined);
var self = this;
this.showDetails = function(employee){
    self.detailedEmployee(employee);
}

<div data-bind="with: detailedEmployee">
Data to show
</div> 
```

*如您所见，您的 ViewModel 对应如何*显示数据一无所知。它只知道应该显示的*数据。*`with`绑定仅在定义时才会显示内容`detailedEmployee`。接下来，我们应该找到一个类似于`with`但会在弹出窗口中显示内容的绑定。让我们给它起名字`modal`。它的代码是这样的：

```
ko.bindingHandlers['modal'] = {
    init: function(element) {
        $(element).modal('init');
        return ko.bindingHandlers['with'].init.apply(this, arguments);
    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var returnValue = ko.bindingHandlers['with'].update.apply(this, arguments);

        if (value) {
            $(element).modal('show');
        } else {
            $(element).modal('hide');
        }

        return returnValue;
    }
}; 
```

如您所见，它在`with`内部使用插件，并根据传递给绑定的值显示或隐藏弹出窗口。如果已定义 - '显示'。如果不是 - '隐藏'。它的用法如下：

```
<div data-bind="modal: detailedEmployee">
    Data to show
</div> 
```

您唯一需要做的就是使用您最喜欢的模态插件。我准备了一个带有 Twitter Bootstrap 弹出组件的示例：http: [//jsfiddle.net/euvNr/embedded/result/](http://jsfiddle.net/euvNr/embedded/result/)

在这个例子中，自定义绑定更强大一些；您可以订阅 onBeforeClose 事件并在需要时取消此事件。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-05T01:46:36.197

@Romanych 提供的答案中链接的 JSFiddle 似乎不再起作用。

[因此，我使用 Bootstrap 3 和Bootstrap 模态](https://github.com/jschr/bootstrap-modal)库构建了我自己的示例*（基于他[原来的 fiddle](http://jsfiddle.net/euvNr/)）*，它具有完整的 CRUD 支持和基本验证： [https ://jsfiddle.net/BitWiseGuy/4u5egybp/](https://jsfiddle.net/BitWiseGuy/4u5egybp/)

# 自定义绑定处理程序

```
ko.bindingHandlers['modal'] = {
  init: function(element, valueAccessor, allBindingsAccessor) {
    var allBindings = allBindingsAccessor();
    var $element = $(element);
    $element.addClass('hide modal');

    if (allBindings.modalOptions && allBindings.modalOptions.beforeClose) {
      $element.on('hide', function() {
        var value = ko.utils.unwrapObservable(valueAccessor());
        return allBindings.modalOptions.beforeClose(value);
      });
    }
  },
  update: function(element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    if (value) {
      $(element).removeClass('hide').modal('show');
    } else {
      $(element).modal('hide');
    }
  }
}; 
```

# 示例用法

## 风景

```
<div data-bind="modal: UserBeingEdited" class="fade" role="dialog" tabindex="-1">
  <form data-bind="submit: $root.SaveUser">
    <div class="modal-header">
      <a class="close" data-dismiss="modal">×</a>
      <h3>User Details</h3>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label for="NameInput">Name</label>
        <input type="text" class="form-control" id="NameInput" placeholder="User's name"
           data-bind="value: UserBeingEdited() && UserBeingEdited().Name, valueUpdate: 'afterkeydown'">
      </div>
      <div class="form-group">
        <label for="AgeInput">Age</label>
        <input type="text" class="form-control" id="AgeInput" placeholder="User's age"
           data-bind="value: UserBeingEdited() && UserBeingEdited().Age, valueUpdate: 'afterkeydown'">
      </div>
      <!-- ko if: ValidationErrors() && ValidationErrors().length > 0 -->
      <div class="alert alert-danger" style="margin: 20px 0 0">
        Please correct the following errors:
        <ul data-bind="foreach: { data: ValidationErrors, as: 'errorMessage'     }">
          <li data-bind="text: errorMessage"></li>
        </ul>
      </div>
      <!-- /ko -->
    </div>
    <div class="modal-footer">
      <button type="button" data-dismiss="modal" class="btn btn-default">Cancel</button>
      <button type="submit" class="btn btn-primary">Save Changes</button>
    </div>
  </form>
</div> 
```

## 视图模型

```
/* ViewModel for the individual records in our collection. */
var User = function(name, age) {
  var self = this;
  self.Name = ko.observable(ko.utils.unwrapObservable(name));
  self.Age = ko.observable(ko.utils.unwrapObservable(age));
}

/* The page's main ViewModel. */
var ViewModel = function() {
  var self = this;
  self.Users = ko.observableArray();

  self.ValidationErrors = ko.observableArray([]);

  // Logic to ensure that user being edited is in a valid state
  self.ValidateUser = function(user) {
    if (!user) {
      return false;
    }

    var currentUser = ko.utils.unwrapObservable(user);
    var currentName = ko.utils.unwrapObservable(currentUser.Name);
    var currentAge = ko.utils.unwrapObservable(currentUser.Age);

    self.ValidationErrors.removeAll(); // Clear out any previous errors

    if (!currentName)
      self.ValidationErrors.push("The user's name is required.");

    if (!currentAge) {
      self.ValidationErrors.push("Please enter the user's age.");
    } else { // Just some arbitrary checks here...
      if (Number(currentAge) == currentAge && currentAge % 1 === 0) { // is a whole number
        if (currentAge < 2) {
          self.ValidationErrors.push("The user's age must be 2 or greater.");
        } else if (currentAge > 99) {
          self.ValidationErrors.push("The user's age must be 99 or less.");
        }
      } else {
        self.ValidationErrors.push("Please enter a valid whole number for the user's age.");
      }
    }

    return self.ValidationErrors().length <= 0;
  };

  // The instance of the user currently being edited.
  self.UserBeingEdited = ko.observable();

  // Used to keep a reference back to the original user record being edited
  self.OriginalUserInstance = ko.observable();

  self.AddNewUser = function() {
    // Load up a new user instance to be edited
    self.UserBeingEdited(new User());
    self.OriginalUserInstance(undefined);
  };

  self.EditUser = function(user) {
    // Keep a copy of the original instance so we don't modify it's values in the editor
    self.OriginalUserInstance(user);

    // Copy the user data into a new instance for editing
    self.UserBeingEdited(new User(user.Name, user.Age));
  };

  // Save the changes back to the original instance in the collection.
  self.SaveUser = function() {
    var updatedUser = ko.utils.unwrapObservable(self.UserBeingEdited);

    if (!self.ValidateUser(updatedUser)) {
      // Don't allow users to save users that aren't valid
      return false;
    }

    var userName = ko.utils.unwrapObservable(updatedUser.Name);
    var userAge = ko.utils.unwrapObservable(updatedUser.Age);

    if (self.OriginalUserInstance() === undefined) {
      // Adding a new user
      self.Users.push(new User(userName, userAge));
    } else {
      // Updating an existing user
      self.OriginalUserInstance().Name(userName);
      self.OriginalUserInstance().Age(userAge);
    }

    // Clear out any reference to a user being edited
    self.UserBeingEdited(undefined);
    self.OriginalUserInstance(undefined);
  }

  // Remove the selected user from the collection
  self.DeleteUser = function(user) {
    if (!user) {
      return falase;
    }

    var userName = ko.utils.unwrapObservable(ko.utils.unwrapObservable(user).Name);

    // We could use another modal here to display a prettier dialog, but for the
    // sake of simplicity, we're just using the browser's built-in functionality.
    if (confirm('Are you sure that you want to delete ' + userName + '?')) {
      // Find the index of the current user and remove them from the array
      var index = self.Users.indexOf(user);
      if (index > -1) {
        self.Users.splice(index, 1);
      }
    }
  };
} 
```

## 使用 View 和 ViewModel 初始化 Knockout

```
var viewModel = new ViewModel();

// Populate the ViewModel with some dummy data
for (var i = 1; i <= 10; i++) {
  var letter = String.fromCharCode(i + 64);
  var userName = 'User ' + letter;
  var userAge = i * 2;
  viewModel.Users.push(new User(userName, userAge));
}

// Let Knockout do its magic!
ko.applyBindings(viewModel); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:18:32.423

我会创建另一个包裹员工的 observable。

```
this.detailedEmployee = ko.observable({}),

var self = this;
this.showDetails = function(employee){
    self.detailedEmployee(employee);
    $("#dialog").dialog("show"); //or however your dialog works
} 
```

将点击附加到`showDetails`。然后你可以`applyBindings`在页面加载时调用。

# android - Android 使用通知管理器重复响铃

> ID：10626782
> 
> 赞同：0
> 
> 时间：2012-05-16T21:11:23.237
> 
> 标签：android, android-notifications

```
public class test extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

        String extra = "test";

        NotificationManager myNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        Intent intent = new Intent(this, another.class);

        Notification notification = new Notification(R.drawable.ic_launcher, extra, 
                System.currentTimeMillis());
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 
                0,
                intent,
                PendingIntent.FLAG_UPDATE_CURRENT);

        notification.setLatestEventInfo(getApplicationContext(), "title", "text", pendingIntent);

        notification.defaults|= Notification.DEFAULT_SOUND;
        notification.defaults|= Notification.DEFAULT_LIGHTS;
        notification.defaults|= Notification.DEFAULT_VIBRATE;
        notification.flags |= Notification.FLAG_INSISTENT;
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        myNotificationManager.notify(1, notification);
    }
} 
```

这段代码工作正常，问题是，当我运行它时，通知声音会不断响起，直到我在状态栏上检查它。有没有办法让它只响一次，而不是一直响？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:17:37.903

删除标志`Notification.FLAG_INSISTENT`

来自文档：“位被按位或设置到标志字段中，如果设置，音频将重复，直到通知被取消或通知窗口打开。”

# actionscript-3 - 原始动画上的自定义 ActionScript 3 播放/暂停按钮

> ID：10626784
> 
> 赞同：0
> 
> 时间：2012-05-16T21:11:36.867
> 
> 标签：actionscript-3, flash

我试图在谷歌上搜索它，但没有人与我的搜索匹配。无论如何，我想为动画创建一个自定义播放/暂停按钮来控制动画和音频。我对 ActionScript 3 不太熟悉，所以求求我。

这是我的截图，所以你可以明白我的意思。 ![在此处输入图像描述](../Images/6af7858bcdc51454d36b70ae276e728b.png)

感谢并期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:58:11.910

您需要在开始时创建一个具有一个关键帧的图层，并在动画结束之前创建一个正常帧。

在此关键帧中，您将放置播放/暂停控制按钮。

在文档类（或对关键帧本身*叹息*）你会放类似的东西。

```
myPlayPauseButton.addEventListener(MouseEvent.Click, playPauseHandler);

function playPauseHandler(e:Event):void{
    if(e.target.currentFrame == 1)  // button is in the play state 
        this.stop();
    else
        this.play();
} 
```

请注意，处理函数中的“this”引用是指主场景（as2 程序员的 _root）。

另请注意，您可以访问 this.currentFrame 以了解主动画的当前帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T11:59:14.197

```
myPlayPauseButton.addEventListener(MouseEvent.Click, playPauseHandler); 
```

正确的

```
myPlayPauseButton.addEventListener(MouseEvent.CLICK, playPauseHandler); 
```

# iphone - 如何将特定的 TabBarItem 与 UITabBarController 一起使用？

> ID：10626805
> 
> 赞同：0
> 
> 时间：2012-05-16T21:13:12.663
> 
> 标签：iphone, ios, xcode, uitabbarcontroller, uitabbaritem

我创建了一个 TabBarController，但不想要通常的灰色/蓝色图标，所以我创建了另一个继承自 UITabBarItem 的类。所以问题是：如何将这些自定义图标/项目与我的标签栏一起使用（添加它们并将它们链接到一些视图控制器）？当然，以编程方式或使用 IB。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:24:21.853

对于您放入标签栏控制器的每个视图控制器，将您的自定义标签栏项目分配给视图控制器的`tabBarItem`属性

# python - 更正 mt.exe 语法以解决 pyodbc 导入问题

> ID：10626807
> 
> 赞同：4
> 
> 时间：2012-05-16T21:13:25.000
> 
> 标签：python, sql-server, windows, manifest, pyodbc

我第一次在 Windows 上部署 Python 应用程序（Apache & mod_wsgi/Flask/Sqlalchemy）。

我想使用 pyodbc 让 Sqlalchemy 与 mssql 对话。

我能够毫无问题地安装 pyodbc 的二进制版本，并且当我从命令行使用它时它可以工作。但是，mod_wsgi 在遇到导入错误时会记录它`import pyodbc`

[pyodbc 问题跟踪器上的这个线程](http://code.google.com/p/pyodbc/issues/detail?id=214)准确地描述了我的问题，并且似乎与 Windows 清单有关。但是，我不知道如何使用 mt.exe 来解决它。

在 PowerShell 中：

```
C:\my\site-packages> C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\mt.exe 
-inputresource:c:\Windows\SysWOW64\python27.dll;#2 -manifest 
-outputresource:pyodbc.pyd#2'

mt.exe : command line error c10100a9: Some operation on the input manifests must
be specified (even if it is just to pipe the input to the output).
Use the /? option for help on usage and samples.` 
```

在命令中：

```
C:\my\site-packages>"C:\Program Files\Microsoft SDKs"\Windows\v7.1\Bin\mt.exe 
-inputresource:C:\Windows\SysWOW64\python27.dll#2 -outputresource:pyodbc.pyd#2

mt.exe : general error c101008c: Failed to read the manifest from the resource 
of file "C:\Windows\SysWOW64\python27.dll#2". The system cannot find the file 
specified. 
```

我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:34:10.187

我是 pyodbc 问题跟踪器上的线程的作者。

除非我遗漏了一些东西，否则文件“ **C:\Windows\SysWOW64\python27.dll** ”似乎不存在。也许您有 2.7 以外的版本？

否则，请确保您已经安装了适用于 python 的官方 windows 包，并验证该版本是否成功导入 pyodbc。如果是这样，您应该能够从 python 安装根目录或其他位置替换本地 python.dll（例如 python27.dll）的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:27:41.237

嗯，这很尴尬：我似乎遗漏了一些分号。我知道我至少会正确运行该命令几次，所以在注意到语法错误之前，我将列出我更改的其他内容：

*   确保一切都是 32 位的
*   下载了 Visual Studio C++ 2008 Express（之前只是运行 VC++ 2008 可再发行版本，这给了我不同版本的 mt.exe）
*   卸载名称中带有“2010”和“C++”的任何内容
*   在cmd中运行命令；无论出于何种原因，它在 PowerShell 中根本不起作用。

再次感谢 Alfred 在 pyodbc 邮件列表中提供的极其详细和有用的帖子。

# jquery - jPlayer 在 IFRAME 内全屏显示？

> ID：10626813
> 
> 赞同：7
> 
> 时间：2012-05-16T21:13:51.453
> 
> 标签：jquery, iframe, html5-video, fullscreen, jplayer

jPlayer的全屏可以在`IFRAME`标签内工作吗？照原样，“全屏”受 iframe 大小的限制。

编辑：

以下是我在 中插入 jPlayer 的方法`IFRAME`：

```
<div id="movieContainer" >
  <object id="videoTut" name="videoTut" type="text/html" data="/videotutorial/videotut.html">
  </object>
</div> 
```

where`videotut.html`包含一个完整的 HTML 页面，其中包含 jPlayer 并且如果独立加载则可以工作。并且`object`标签是使用类似的代码修改的`document.getElementById('movieContainer').innerHTML = '...`。

*另请参阅：[https ://groups.google.com/forum/#!topic/jplayer/IQxIIYhtAnE](https://groups.google.com/forum/#!topic/jplayer/IQxIIYhtAnE)*

*（PS 如果你想帮助我为 jPlayer 设计多视频，请在这里：[jPlayer 多视频演示代码？](https://stackoverflow.com/questions/10636933/jplayer-multi-video-demo-code)）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T15:01:29.190

把它放在 iframe 中

```
<iframe /* your iframe code */ webkitAllowFullScreen="true" mozallowfullscreen="true" allowFullScreen="true"></iframe> 
```

并将其添加到 js 文件中

```
$("a.jp-full-screen").on('click', function() {
    var docm, rqst;

    docm = document.documentElement;
    rqst = docm.requestFullScreen || docm.webkitRequestFullScreen || docm.mozRequestFullScreen || docm.msRequestFullScreen;

    if(typeof rqst!="undefined" && rqst){
        rqst.call(docm);
    }
});
$("a.jp-restore-screen").on('click', function() {
    var docm, rqst;

    docm = document;
    rqst = docm.cancelFullScreen|| docm.webkitCancelFullScreen || docm.mozCancelFullScreen || docm.msCancelFullScreen || docm.exitFullscreen;
    if(typeof rqst!="undefined" && rqst){
        rqst.call(docm);
    }
}); 
```

我不确定这是否适用于 flash 解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T21:34:10.487

那么，iframe 不能大于分配给它的尺寸。这是根本。因此，除非 iframe 本身占据屏幕高度和宽度的 100%，否则不，我不相信您可以以“全屏”大小播放电影。同样，您不能播放尺寸大于分配给它的尺寸的对象。如果您确实可以控制整个屏幕，那么您可以动态调整 iframe 以及其中包含的对象的高度和宽度——当需要激活或停用媒体时。但是，请注意它，因为这可能是一个滑坡。您可能会发现浏览器之间的行为不一致，并且可能需要花费一些时间来解决特定于浏览器的布局问题。

说了这么多...如果 jPlayer 使用 Flash 而不是 html5 来播放电影，您可以将“allowfullscreen”属性添加到 iframe，这应该允许电影在 iframe 大小之外播放。但 Flash 是 jPlayer 的后备，因此您需要查看是否可以指定格式，否则您可能只想使用 swfobject.js 加载 Flash 电影而不是使用 jPlayer。同样，浏览器可能会出现不一致，因此您需要为此留出时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T06:39:35.317

对我来说，下面的代码有效

```
$(".jp-full-screen").on('click', function () {
        var docm, rqst;

        docm = document;
        rqst = docm.requestFullScreen || docm.webkitRequestFullScreen || docm.mozRequestFullScreen || docm.msRequestFullScreen;

        if (typeof rqst != "undefined" && rqst) {
            rqst.call(docm);
        }
    }); 
```

当我们单击按钮时会激活全屏并禁用再次单击按钮

```
<button class="jp-full-screen" role="button" tabindex="0">full screen</button> 
```

确保在 iframe 上添加了 webkitAllowFullScreen mozallowfullscreen allowFullScreen。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-27T11:29:05.313

我查看了[jplayer 的 API](http://www.jplayer.org/latest/developer-guide)，看来您可以将**jplayer**的大小设置为**全屏，即使在 iframe 页面内**！

他们的文档解释了如何在加载的**iframe 页面中使用**[Set Fullsize](http://www.jplayer.org/latest/developer-guide/#jPlayer-size) Option 。

 **在**Set Fullsize** Option 链接之后显示选项，您感兴趣的 3 个[默认值中的 2 个在此处显示：](http://www.jplayer.org/latest/developer-guide/#jPlayer-option-sizeFull)

```
width
    String : (Default: [Video:"100%"] [Audio:"0px"]) : The width as a CSS rule.
height
    String : (Default: [Video:"100%"] [Audio:"0px"]) : The height as a CSS rule. 
```

借助此[页面上的](http://www.jplayer.org/latest/jPlayer-tester/)**jPlayer 开发测试器**，查看设置该选项的实时示例很容易。

以下是试用说明：

**1.**单击页面顶部标题为解决方案的**蓝色链接：****2.**向下滚动到标题行的第一项并单击它。**3.**最后，通过向下滚动到标题为灰色的突出显示并设置为 来设置全屏大小。`"html, flash"`
**`setMedia(A:{m4v})`
**`sizeFull``360p`**** 

 ****现在点击下面创建的jplayer上的**播放！**然后在播放过程中，单击**全屏按钮**会将**jplayer增加到由****360p**定义的最大尺寸。

对于您的**iframe 页面**要求，**最大尺寸**不是默认设置，因为它是 iframe 容器的 100%。

相反，使用 JavaScript 来指定**客户端的屏幕宽度和高度尺寸的大小**，从而使其在 iframe 页面之外全屏。例子：

```
screen.height;
screen.width; 
```

可以肯定的是，**视频宽度和高度**的值可以是显示的百分比或像素。然后将以下内容括在引号中以作为字符串，如上例所示。

`[Video: "'" + screen.height + "px" + "'"]`
`[Video: "'" + screen.width + "px" + "'"]`

如果 iframe 不在同一个域中，上述方法可能不起作用，但我认为这对您来说不是问题。******

# javascript - 当锚点在 URL 中时，避免页面滚动/跳转

> ID：10626814
> 
> 赞同：16
> 
> 时间：2012-05-16T21:13:53.270
> 
> 标签：javascript, jquery, anchor

> **可能重复：**
> [jquery - 加载页面时禁用锚“跳转”](https://stackoverflow.com/questions/3659072/jquery-disable-anchor-jump-when-loading-a-page)

我根据 URL 中的哈希值显示一个 div，但我想避免页面跳转到具有该特定 ID 的该 div 的位置。

我只有在使用 URL 中的哈希直接导航页面时才会遇到问题，例如，如果有人用书标记了该页面。

所以例如我有 url domain.com/page.html#myitem-1

ID=myitem-1 然后会显示，它会显示，但页面会跳到我不想要的那个 div 的位置。

我试图使用 scrollTop(0) 强制窗口位置回到顶部，但似乎在锚跳转发生之前调用它没有效果

示例代码：

```
 $(document).ready(function() {
    $('.glossary-term').hide();
    $(window.location.hash).show();

    $(window).scrollTop(0);

}); 
```

我能够让这个 scrollTop 工作的唯一方法是将它放在一个持续时间为 1 的 setTimeOut 中，但这似乎有点像 hack。还有其他建议吗？

谢谢

乙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T21:19:10.213

好吧，如果它是您使用锚点仅用于显示 div 的内部机制，您可以随时更改（或删除）“名称”属性，这样浏览器就不会直接找到它，也不会尝试滚动；）

否则尝试[加载页面时如何禁用锚点“跳转”？](https://stackoverflow.com/questions/3659072/jquery-disable-anchor-jump-when-loading-a-page)

# python - 初学者扑克程序：回溯和断言错误

> ID：10626816
> 
> 赞同：1
> 
> 时间：2012-05-16T21:14:00.413
> 
> 标签：python

我正在尝试让这个扑克程序正常工作，这是我的第一个 Python 程序。我无法理解我遇到的两个错误，因为代码对我来说看起来是正确的。

使用 Eclipse/PyDev

```
> Traceback (most recent call last):
  File "C:\Documents and Settings\****\workspace\xfz\src\Unit1.py", line 98, in <module>
    print test()
 File "C:\Documents and Settings\****\workspace\xfz\src\Unit1.py", line 86, in test
    assert card_ranks(sf) == "TC 9C 8C 7C 6C"
AssertionError 
```

编码：

```
def poker(hands):
    "Return the best hand: poker([hand,...]) => hand"
    return allmax(hands, key=hand_rank)

def allmax(iterable, key=None):
    "Return a list of all items equal to the max of the iterable."
    result, maxval = [], None
    key = key or (lambda x: x)
    for x in iterable:
        xval = key(x)
        if not result or xval > maxval:
            result, maxval = [x], xval
        elif xval == maxval:
            result.append(x)
    return result

def hand_rank(hand):
    ranks = card_ranks(hand)
    if straight(ranks) and flush(hand):
        return (8, max(ranks)) 
    elif kind(4, ranks):
        return (7, kind(4, ranks), kind(1, ranks)) # 99993 (7,9,3)
    elif kind(3, ranks) and kind(2, ranks):
        return (6, kind(3, ranks) and kind(2, ranks))
    elif flush(hand):
        return (5, ranks)
    elif straight(hand):
        return (4, ranks)
    elif kind(3, ranks):
        return (3, kind(3, ranks), ranks)
    elif two_pair(ranks):
        return (2, two_pair(ranks), ranks)
    elif kind(2, ranks):
        return (1, kind(2, ranks), ranks)
    else:
        return (0, ranks) 

def card_ranks(hand):
    "Return a list of the ranks, sorted with higher first."
    ranks = ['--23456789TJQKA'.index(r) for r,s in hand]
    ranks.sort(reverse=True)
    return [5, 4, 3, 2, 1] if (ranks == [14, 5, 4, 3, 2]) else ranks

def straight(ranks):
    "Return true if the ordered ranks form a 5 card straight"
    return (max(ranks)-min(ranks) == 4) and len(set(ranks)) == 5

def flush(hand):
    "Return True if all the cards have the same suit"
    suits = [s for r,s in hand]
    return len(set(suits)) == 1

def kind(n, ranks):
    for r in ranks:
        if ranks.count(r) == n: return r
    return None

def two_pair(ranks):
    pair = kind(2, ranks)
    lowpair = kind(2, list(reversed(ranks)))
    if pair and lowpair != pair:
        return (pair, lowpair)
    else:
        return None

def test():
    "Test cases for the functions in poker program"
    sf = "6C 7C 8C 9C TC".split() # Straight Flush
    fk = "9D 9H 9S 9C 7D".split() # Four of a Kind
    fh = "TD TC TH 7C 7D".split() # Full House
    tp = "5S 5D 9H 9C 6S".split()
    fkranks = card_ranks(fk)
    tpranks = card_ranks(tp)
    assert kind(4, fkranks) == 9
    assert kind(3, fkranks) == None
    assert kind(2, fkranks) == None
    assert kind(1, fkranks) == 7
    assert two_pair(fkranks) == None
    assert two_pair(tpranks) == (9, 5)
    assert card_ranks(sf) == "TC 9C 8C 7C 6C"
    assert card_ranks(fk) == "9D 9H 9S 9C 7D"
    assert card_ranks(fh) == "TD TC TH 7C 7D"
    assert poker([sf, fk, fh]) == sf
    assert poker([fk, fh]) == fk
    assert poker([fh, fh]) == fh
    assert poker([sf]) == sf
    assert poker([sf] + 99*[fh]) == sf
    assert hand_rank(sf) == (8, 10)
    assert hand_rank(fk) == (7, 9, 7)
    assert hand_rank(fh) == (6, 10, 7)

print test() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:27:24.337

```
 assert card_ranks(sf) == "TC 9C 8C 7C 6C" 
```

评估为 False 因为

```
 card_ranks(sf) = [10, 9, 8, 7, 6]  != "TC 9C 8C 7C 6C" 

    >>> card_ranks(sf) 
    [10, 9, 8, 7, 6]
    >>> card_ranks(fk) 
    [9, 9, 9, 9, 7]
    >>> card_ranks(fh) 
    [10, 10, 10, 7, 7] 
```

您运行的函数称为 test()，它使用 assert 进行测试以确保测试的语句为 True。如果其中任何一个为 False，则 Assert 会引发 AssertionError 并存在程序。

您的下一行也是 False ：

```
 >>> poker([sf, fk, fh])
    [['6C', '7C', '8C', '9C', 'TC']]
    >>> sf
    ['6C', '7C', '8C', '9C', 'TC']
    >>> poker([sf, fk, fh]) == sf
    False 
```

提示：在你的文件上运行 find/replace 并将 'assert' 替换为 'print'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:33:22.177

改变：

```
assert card_ranks(sf) == "TC 9C 8C 7C 6C"
assert card_ranks(fk) == "9D 9H 9S 9C 7D"
assert card_ranks(fh) == "TD TC TH 7C 7D" 
```

至：

```
assert card_ranks(sf) == [10, 9, 8, 7, 6]
assert card_ranks(fk) == [9, 9, 9, 9, 7]
assert card_ranks(fh) == [10, 10, 10, 7, 7] 
```

因此，检查问题的一种简单方法是放置一些打印语句。从根本上说，看看你在做什么。您的 card_ranks() 函数在评论中说它返回一个列表，但您仍在将其与字符串进行比较。在编写代码之前多考虑一下。节省调试时间。

# java - 将 Curses 用于具有许多功能的详细应用程序

> ID：10626817
> 
> 赞同：2
> 
> 时间：2012-05-16T21:14:02.023
> 
> 标签：java, python, terminal, curses

我需要为大型机服务器制作一个详细的（许多功能）终端应用程序。到目前为止，我已经找到了这些：

*   [JCurses](http://sourceforge.net/projects/javacurses/)最近更新了，但是自 2002 年以来没有更新。也找不到示例。
*   [Charva](http://www.pitman.co.za/projects/charva/)：上次更新 2006 年，在 Java 1.6 中损坏
*   [拉特纳](http://code.google.com/p/lanterna/)：最后一次更新 2012 年 5 月，但不稳定，不断变化，某些功能已损坏
*   [Urwid](http://excess.org/urwid/examples.html) : 看起来不错，不确定是否是最佳选择。

语言对我来说并不重要，但我希望它简单。我不想重新发明轮子，我希望文本框、菜单、单选按钮等组件易于使用。Charva 似乎是最详细的一个，因为它可以替代大多数挥杆组件，但它已经坏了。我不确定如果我使用正确的术语进行搜索，我找不到其他框架。他们是唯一的选择吗？还有其他更好的库吗？

我要构建的类似接口：[example1](http://yast4debian.alioth.debian.org/nfs-curses.png)，[example2](http://sourceforge.net/projects/javacurses/screenshots/259836.jpg)，[example3](http://sourceforge.net/projects/javacurses/screenshots/259834.jpg)，[example4](http://primates.ximian.com/~miguel/pictures/tmp4aa56a5c.tmp.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:41:00.953

我相信[ncurses](http://en.wikipedia.org/wiki/Ncurses)是实现您想要的目标的首选方式。如果你不喜欢 C，甚至还有一个 Python[模块实现。](http://docs.python.org/howto/curses.html#curses-howto)

# mysql - Rails：错误：数据库配置未指定适配器

> ID：10626822
> 
> 赞同：2
> 
> 时间：2012-05-16T21:14:32.410
> 
> 标签：mysql, ruby-on-rails, passenger

我正在开发的 Rails 应用程序在我的本地机器 (MAC) 上运行良好。当我将它上传到服务器（Centos 6.2 Linux，安装了 Rails 3.2.3 和 Passenger）并尝试启动应用程序（通过在我的浏览器中输入 URL）时，我收到以下错误消息：

> 无法启动 Ruby (Rack) 应用程序 似乎存在数据库问题。
> 
> 您的应用程序的数据库配置文件可能写入不正确。请检查并修复任何错误。
> 
> 数据库服务器可能没有运行。请检查它是否正在运行，如果没有，请启动它。
> 
> 错误消息：数据库配置未指定适配器 (ActiveRecord::AdapterNotSpecified) 异常类：ActiveRecord::AdapterNotSpecified

请注意，当我运行`rake db:create`and时`rake db:migrate`，这两个任务都运行良好，并且数据库已正确创建和迁移。

以下是我的 database.yml 文件：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: acme_development
  pool: 5
  username: root
  password: ***********
  socket: /tmp/mysql.sock

test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: acme_test
  pool: 5
  username: root
  password: *****************
  socket: /tmp/mysql.sock 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T11:47:48.917

Phusion Passenger 默认使用“生产”环境，[如文档](http://www.modrails.com/documentation/Users%20guide%20Apache.html#rack_env)所述。看起来你假设“发展”。在这种情况下，设置“RackEnv 开发”。

# c - 如何从 gtktextview/gtksourceview 解析 C 中的文本

> ID：10626825
> 
> 赞同：1
> 
> 时间：2012-05-16T21:14:51.290
> 
> 标签：c, gtk, gtksourceview

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:42:31.637

Here is a simple example how to get lines from a GtkTexBuffer.

```
 GtkTextIter start_iter, next_iter;
  gchar *text;

  gtk_text_buffer_get_iter_at_offset (source_buffer, &start_iter, 0);

  next_iter = start_iter;
  while (gtk_text_iter_forward_line (&next_iter))
    {    
      text = gtk_text_iter_get_text (&start_iter, &next_iter);

      // line processing

      g_free (text);
      start_iter = next_iter;
    } 
```

For more details read the [documentation](http://developer.gnome.org/gtk/2.24/GtkTextIter.html) of GtkTextIter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:29:28.830

You can split the string into an array of strings, one for each line. Use [`g_strsplit()`](http://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-strsplit). However, if you want to relate your data back to the position in the buffer, you're better off using buffer iterators.

# ruby-on-rails - Rspec 不会重新加载更改的密码属性 - 为什么？

> ID：10626831
> 
> 赞同：2
> 
> 时间：2012-05-16T21:15:17.977
> 
> 标签：ruby-on-rails, rspec2

我正在运行 Rails 3.2.1 和 rails-rspec 2.8.1 ....当我运行重置用户密码的测试时，似乎重新加载用户对象不会加载新的密码属性....

这是我的测试代码：

```
 describe "Reset password page" do
    let(:teacher) { FactoryGirl.create(:teacher, :email=>"jane@gmail.com")}
    let(:old_password) { teacher.password }
    before do
      visit reset_password_form_path
      fill_in "Email", with: teacher.email
      click_button "Reset Password"
    end
    it { should have_content('Your new password has been emailed to the address you provided.')}
    specify { Teacher.find_by_email("jane@gmail.com").password.should_not == old_password }
    ## specify { teacher.reload.password.should_not == old_password }  ##THIS FAILS
  end 
```

**指定 {teacher.reload.password.should_not == old_password }**失败但**指定 { Teacher.find_by_email("jane@gmail.com").password.should_not == old_password }** PASSES

所以这告诉我密码被正确保存，但没有被重新加载......有什么想法吗？我正在使用 Rails 3.2.x “has_secure_password” 方法来滚动登录/密码功能。这意味着密码摘要是保存到数据库的内容，密码是虚拟属性（我认为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:52:59.787

刚刚明白：`let`在你召唤它们之前不会加载块。

所以，因为你之前没有`old_password`在任何地方使用过：

```
teacher.reload.password.should_not == old_password 
```

相当于：

```
teacher.reload.password.should_not == teacher.reload.password 
```

这就是为什么它不能失败！

如果您希望它***正确失败***：

```
old_password #because it's triggered, the value is set and won't be set again
teacher.reload.password.should_not == old_password 
```

编辑：

```
describe "Reset password page" do
  let(:teacher) { FactoryGirl.create(:teacher, :email=>"jane@gmail.com")}

  before do
    @old_password = teacher.password
    visit reset_password_form_path
    fill_in "Email", with: teacher.email
    click_button "Reset Password"
  end

  specify { teacher.reload.password.should_not == @old_password }
end 
```

# wordpress - 类别图像仅在最近的特殊帖子上显示一次 (WordPress)

> ID：10626832
> 
> 赞同：1
> 
> 时间：2012-05-16T21:15:21.180
> 
> 标签：wordpress, plugins, shortcode

我正在使用 WordPress 整理一个博客。我正在使用类别图像插件将每个类别的图像放在帖子上方。

主页以大图和每篇文章的摘录布局，当您单击它时，它会将您带到整篇文章（我为此使用了“特别最近的帖子”插件）。我想要每个大图像/摘录上方的类别图像标题。

第一篇文章一切正常，但之后我没有标题。原因是我在标题中的代码正在调用“类别图像” php 函数，该函数有效。然后它调用'Special Recent Posts' php 函数，该函数实际上运行循环以获取前五篇最近的文章。它不会为每篇文章每次都运行类别图像功能，只是第一次。

这是代码：

`<?php get_header(); ?>`

`<?php c2c_the_category_image($image_extensions='png gif jpg', $image_dir='/wp-content/images/', $use_name_if_no_image=true, $start_from='begin', $limit=999); ?>`

`<?php echo do_shortcode("[srp srp_number_post_option='5' srp_thumbnail_option='yes' srp_widget_title_hide_option='yes' srp_post_date_option='no' srp_wdg_excerpt_length='50' srp_wdg_excerpt_length_mode='fullexcerpt']"); ?>`

`<?php get_sidebar(); ?>`

`<?php get_footer(); ?>`

我怎样才能让它为所有最近的帖子运行类别图像功能？谢谢您的帮助。

* * *

编辑：

我试图进入 Special Recent Posts 插件的 PHP，但是当我尝试在其中输入类别图像代码时，它产生了一些严重错误。如果它在那里，我正在寻找最简单的解决方案（我知道这不是一个非常简单的问题）。有什么帮助吗？（我已经放了一个赏金）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T01:32:12.433

你做事的方式非常复杂和令人费解。

被证明有效的最简单方法是拥有与类别 ID 或类别 slug 对应的图像！

[http://baldino.rs/collection](http://baldino.rs/collection)

如您所见，这是一个列出所有类别及其图像和描述的页面。

* * *

如果您愿意，我很难理解：

*   在每个帖子上方都有一个类别图片
*   在每个帖子上方都有一个类别图片**和**帖子图片

我将在下面演示第一个解决方案

以下是我们创建博客页面的顺序：

1.  通过 slug 或 ID 命名类别图像（我推荐 ID）
2.  将图像上传到服务器 - 最好是主题的图像文件夹
3.  创建我们的自定义循环，它将显示我们的类别图像、类别名称、帖子标题和摘录

* * *

所以索引页面（博客页面）应该是这样的

```
<?php get_header();?>

<div id=:content">
    <div id="posts">
    <?php if (have_posts()) : while (have_posts()) : the_post();?>
        <div <?php post_class() ?> id="post-<?php the_ID(); ?>">
            <?php
            $category = get_the_category();?> 
            <img src="<?php bloginfo('template_directory'); ?>/images/<?php echo $category[0]->term_id;?>.jpg"/>
            <h3 class="cat-title"><?php echo $category[0]->cat_name;?></h3>
            <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>
            <div class="entry">
                <?php the_content(); ?>
            </div>
        </div>
    <?php endwhile;endif; ?>    
    </div>

<?php get_sidebar(); ?>
</div>

<?php get_footer(); ?> 
```

* * *

**您应该真正避免使用循环**轻松解决的简单内容的插件

 **我建议您开始阅读 WP codex - [http://codex.wordpress.org](http://codex.wordpress.org)

每个函数、类、引用都有详细的文档记录，非常容易理解。

如果您有更多问题，请随时提问**

# c++ - 在 C++ 上发送/接收 TCP/IP

> ID：10626834
> 
> 赞同：0
> 
> 时间：2012-05-16T21:15:28.747
> 
> 标签：c++, tcp, winsock2

我正在尝试通过 C++ 上的 TCP/IP 协议在两台计算机之间进行通信。我在同一个套接字上发送和接收。但是有一个问题，我没有迹象表明第二台计算机正在尝试向我发送一些东西。

是否有任何标志或指示器告诉我有人正在向我发送某些东西而我必须接收？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:35:40.233

使用 select() 函数等待一个或多个套接字上的事件。使用零超时，您还可以检查是否有任何可用数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:23:51.750

这取决于特定的套接字 API。在最常见的情况下，您只需挂起接收（或使用异步套接字 API 停放回调），一旦有数据就会解除阻塞。一些套接字 API 有方法让您判断是否有数据可供获取，但最简单的方法是简单地异步接收并等待套接字堆栈向您发出回调。

# java - 将 Jersey 与 Spring 一起使用时，@Autowired 不起作用

> ID：10626835
> 
> 赞同：2
> 
> 时间：2012-05-16T21:15:30.197
> 
> 标签：java, spring, jersey, jax-rs

我正在尝试将 Jersey 与 Spring 一起使用。但是对于我的生活，我无法弄清楚为什么我的 Spring 依赖项没有被注入到我的 Rest 类中。

每次我尝试调用自动装配的依赖项时，我都会得到 NULL。谁能建议为什么我的依赖没有被注入？

我的休息课看起来像这样：

```
com.myapp.rest

@Component
@Scope("request") 
@Path("/home")
public class ChartResource {

@Autowired
ChartService chartService;

@GET
@Path("/chart")
@Produces(APPLICATION_JSON)
public Bean getChart() {
        return chartService.retrieveChart();

} 
```

我的 web.xml 文件看起来像这样

```
<servlet>
    <servlet-name>myapp</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>org.codehaus.jackson.jaxrs;com.myapp.rest</param-value>
    </init-param>       
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>org.codehaus.jackson.jaxrs</param-value>
    </init-param>   
    <load-on-startup>1</load-on-startup>
</servlet> 
```

我的 applicationContext.xml 是标准的，并指定了组件扫描的基本包：

```
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<annotation-driven />
<resources mapping="/resources/**" location="/resources/" />

<context:component-scan base-package="com.myapp" />

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:28:24.867

尝试添加

```
<context:annotation-config /> 
```

我不确定您需要什么才能使 Jersey 的注释正常工作，但`@Autowired`它是一个 Spring 注释，因此您需要使用 Spring 版本`<annotation-config>`才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:33:56.380

好的 - 愚蠢的问题。我的 applicationContext 没有被加载，所以它没有拿起我为组件扫描定义的包！

# sql-server - 我可以从视图中动态调用存储过程吗？

> ID：10626836
> 
> 赞同：3
> 
> 时间：2012-05-16T21:15:38.120
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2, dynamic-sql, sql-view

具体来说，我可以从视图中的*当前数据库*调用 proc 。我已经知道[openrowset hack](https://stackoverflow.com/questions/349979/execute-a-sql-stored-proc-from-a-sql-view)，所以这很有效，例如：

```
create view MyView as
    select *
    from openrowset (
        'sqloledb',
        'server=(local);trusted_connection=yes;',
        'exec MyDatabase.dbo.MyStoredProcedure' -- Works fine
    ) 
```

但我希望能够从当前数据库调用 proc，而无需像这样对名称进行硬编码：

```
create view MyView as
    select *
    from openrowset (
        'sqloledb',
        'server=(local);trusted_connection=yes;',
        'exec ' + db_name() + '.dbo.MyStoredProcedure' -- Don't want to hard-code DB name
    ) 
```

不幸的是，这不起作用，因为 openrowset 需要文字字符串，而不是任何类型的变量。

不考虑安全性和性能方面的考虑，是否有解决方法？这将使遗留系统的维护更加容易忍受，因为此视图将调用的 proc 根据环境（开发、测试、产品）连接到不同的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:27:02.877

不，您不能在视图中使用动态 SQL。如果只有三个不同的“环境”，您可以只创建三个视图，和/或根据环境使用同义词。因此，例如，您可以拥有三个视图（伪/修剪）：

```
create view dbo.devMyView as
    select * ... 'exec Dev.dbo.MyStoredProcedure'
go
create view dbo.testMyView as
    select * ... 'exec Test.dbo.MyStoredProcedure'
go
create view dbo.prodMyView as
    select * ... 'exec Prod.dbo.MyStoredProcedure' 
```

然后你可以在你的代码中使用动态 SQL 来指定你想要的视图，或者你可以在你想模拟每个环境时删除并创建一个同义词，例如

```
DROP SYNONYM dbo.MyView;
GO
CREATE SYNONYM dbo.MyView FOR dbo.devMyView; 
```

现在引用 dbo.MyView 的代码最终会调用 dev 数据库中的存储过程。这样做的缺点是在任何给定时间只能激活/重定向一个同义词。

# java - 使用 Jena 的 SPARQL 查询不产生任何结果——但可以在线工作

> ID：10626842
> 
> 赞同：5
> 
> 时间：2012-05-16T21:16:07.297
> 
> 标签：java, sparql, jena, dbpedia

基本上我有以下查询，它可以在所有在线 SPARQL 测试仪中正常工作，但是在使用 Java 和 Jena 2.6.4 时，我从来没有得到任何结果。出于演示目的，我已将值写入查询中。

```
PREFIX  g:    <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX  rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX  onto: <http://dbpedia.org/ontology/>

SELECT  ?subject ?stadium ?lat ?long
WHERE
  { ?subject g:lat ?lat .
    ?subject g:long ?long .
    ?subject <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> onto:Stadium .
    ?subject rdfs:label ?stadium
    FILTER ( ( ( ( ( ?lat >= 52.4814 ) && ( ?lat <= 57.4814 ) ) && ( ?long >= -1.89358 ) ) && ( ?long <= 3.10642 ) ) && ( lang(?stadium) = "en" ) )
  }
LIMIT   5 
```

一些Java，注意我已经尝试过几种不同的方式来访问它，但是我在整个项目中都使用SPARQL并且没有问题。

```
Query query = QueryFactory.create(s2); //s2 = the query above
QueryExecution qExe = QueryExecutionFactory.create(query, model);
ResultSet resultsRes = qExe.execSelect();

try {
  while (resultsRes.hasNext()) {                
    QuerySolution soln = resultsRes.nextSolution();
    //never any results
  }
} catch (Exception ex) {
  System.out.println(ex);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T22:58:17.363

除非您将整个 DBpedia 数据集加载到本地模型中，否则要获得与在 DBpedia SPARQL 表单中运行查询相同的效果，您必须将查询发送到 DBpedia SPARQL 端点。我对您的程序进行了以下修改：

```
package example;

import com.hp.hpl.jena.query.*;

public class AshTest
{
    public static void main( String[] args ) {
        String s2 = "PREFIX  g:    <http://www.w3.org/2003/01/geo/wgs84_pos#>\n" +
                "PREFIX  rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n" +
                "PREFIX  onto: <http://dbpedia.org/ontology/>\n" +
                "\n" +
                "SELECT  ?subject ?stadium ?lat ?long\n" +
                "WHERE\n" +
                "  { ?subject g:lat ?lat .\n" +
                "    ?subject g:long ?long .\n" +
                "    ?subject <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> onto:Stadium .\n" +
                "    ?subject rdfs:label ?stadium\n" +
                "    FILTER ( ( ( ( ( ?lat >= 52.4814 ) && ( ?lat <= 57.4814 ) ) && ( ?long >= -1.89358 ) ) && ( ?long <= 3.10642 ) ) && ( lang(?stadium) = \"en\" ) )\n" +
                "  }\n" +
                "LIMIT   5\n" +
                "";

        Query query = QueryFactory.create(s2); //s2 = the query above
        QueryExecution qExe = QueryExecutionFactory.sparqlService( "http://dbpedia.org/sparql", query );
        ResultSet results = qExe.execSelect();
        ResultSetFormatter.out(System.out, results, query) ;
    }
} 
```

并得到以下结果：

```
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| subject                                                       | stadium                              | lat                                                 | long                                                  |
======================================================================================================================================================================================================================
| <http://dbpedia.org/resource/Welford_Road_Stadium>            | "Welford Road Stadium"@en            | "52.6242"^^<http://www.w3.org/2001/XMLSchema#float> | "-1.13306"^^<http://www.w3.org/2001/XMLSchema#float>  |
| <http://dbpedia.org/resource/Hillsborough_Stadium>            | "Hillsborough Stadium"@en            | "53.4114"^^<http://www.w3.org/2001/XMLSchema#float> | "-1.50056"^^<http://www.w3.org/2001/XMLSchema#float>  |
| <http://dbpedia.org/resource/Gateshead_International_Stadium> | "Gateshead International Stadium"@en | "54.9611"^^<http://www.w3.org/2001/XMLSchema#float> | "-1.57972"^^<http://www.w3.org/2001/XMLSchema#float>  |
| <http://dbpedia.org/resource/Filbert_Street>                  | "Filbert Street"@en                  | "52.6236"^^<http://www.w3.org/2001/XMLSchema#float> | "-1.14056"^^<http://www.w3.org/2001/XMLSchema#float>  |
| <http://dbpedia.org/resource/Craven_Park,_Hull>               | "Craven Park, Hull"@en               | "53.7539"^^<http://www.w3.org/2001/XMLSchema#float> | "-0.264722"^^<http://www.w3.org/2001/XMLSchema#float> |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
```

# c++ - C++ 全局数组分配

> ID：10626844
> 
> 赞同：4
> 
> 时间：2012-05-16T21:16:16.093
> 
> 标签：c++, static, multidimensional-array

我有一个带有静态链接的 C++ 全局多维数组。我假设它将被堆栈分配（我在标准中找不到相关部分）。它是连续分配的吗？

另一个问题：我想将这些静态全局 n-dim 数组转换为在堆上分配。考虑到我想最小化代码更改，最简单的方法是什么？我可以考虑将数组转换为 n-dim 指针并在 main 开始时 malloc'ing 并在退出 main 之前释放。但我不得不担心连续分配。有人看到更好的方法吗？

谢谢，

尼莱什。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:38:11.780

> 我有一个带有静态链接的 C++ 全局多维数组。我假设它将被堆栈分配（我在标准中找不到相关部分）。

它不会在堆栈上；它将在全球范围内。全局对象和静态存储对象拥有自己的内存区域，既不属于堆也不属于堆栈。

此外，堆栈（标准将其称为“自动”存储）对象仅在它们所属的函数调用期间持续存在；全局变量在被调用之前被初始化并在退出`main()`后被销毁。`main()`

> 它是连续分配的吗？

可能是，尽管我怀疑标准是否需要它。（澄清：保证一维数组的连续存储，但不能保证二维数组和向上数组中的行之间没有“间隙”。）如果您需要连续分配，请将全局数组声明为一个-维向量并使用内联函数将多个维度转换为相应的索引。如果保证连续存储，它与编译器生成的内容相同。

> 我想将这些静态全局 n-dim 数组转换为在堆上分配。考虑到我想最小化代码更改，最简单的方法是什么？

将全局声明从数组更改为指针。在这种情况下，强烈建议对存储进行矢量化。（不，我不是在谈论`std::vector`，我是在谈论重塑为一维向量。）

> 我可以考虑将数组转换为 n-dim 指针

没有这样的野兽。关闭事物是指向指针数组的指针，然后指向向量或更多指针的数组，深度由维数决定。使用将 ND 坐标转换为 1-D 索引的函数来设置上述 1-d 矢量情况将是一种负担，而且比上述情况要慢得多。

> 在 main 开始时 malloc'ing，在退出 main 之前 free'ing。

这一点，除非您最后不必这样做，`free`除非您正在使用`valgrind`或类似的方法来查找内存泄漏。操作系统在进程退出时释放所有不是共享内存的分配。

所以你会得到类似的东西：

```
#include <stddef.h>

static const size_t kDimX = 5;
static const size_t kDimY = 20;
static const size_t kDimZ = 4;

inline size_t DimsToVector(size_t x, size_t y, size_t z)
{
    return (x * kDimY + y) * kDimZ + z;
}

float* data = 0;

int main()
{
    data = new float[kDimX * kDimY * kDimZ];

    // Read elements with: data[DimsToVector(x, y, z)]
    // Write v with: data[DimsToVector(x, y, z)] = k;

    delete[] data; // Optional.
} 
```

有一些更好的方法，可能是 Boost 中的一种，它定义类并覆盖`operator []`以隐藏一些丑陋的东西，但这是让你开始的最低限度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:22:54.023

它没有在堆栈上分配。全局变量被“分配”在一个特殊的内存段中。

至于使您的多维数组“连续”，我能想到的最简单的可靠方法是在不与类型系统进行太多斗争的情况下制作`typedef`较低维度的 a 并制作指向该类型的指针。

```
typedef int TenIntegers[10];
TenIntegers* ints;

int main()
{
    ints = new TenIntegers[50];

    // your code here
    ints[0][5] = 3;

    delete[] ints;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:29:23.920

1）全局变量的内存分配在“内存中”的某个地方。它既不在堆栈上，也不在堆上。例如，全局常量通常放在可执行文件的只读部分。严格来说，它依赖于实现。为什么你需要知道这个？

2）记忆将是连续的。

# php - 使用 ffmpeg 转换音频文件并保存专辑封面

> ID：10626845
> 
> 赞同：6
> 
> 时间：2012-05-16T21:16:17.667
> 
> 标签：php, audio, ffmpeg

我想知道是否可以将嵌入了艺术品的音频文件转换为 MP3 并使用 ffmpeg 保留艺术品？我在我的服务器上安装了 ffmpeg，并且转换为 MP3 工作正常，包括除嵌入式艺术品之外的所有元数据。

谢谢，

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:36:44.510

FFmpeg 可以处理嵌入在 mp3 中的艺术作品。来自[mp3 上的文档](http://ffmpeg.org/ffmpeg.html#mp3)：

> 复用器支持写入 ID3v2 附加图片（APIC 帧）。图片以具有单个数据包的视频流的形式提供给复用器。可以有任意数量的流，每个流对应一个 APIC 帧。流元数据标签标题和评论分别映射到 APIC 描述和图片类型。有关允许的图片类型，请参阅[http://id3.org/id3v2.4.0-frames 。](http://id3.org/id3v2.4.0-frames)
> 
> ...
> 
> 将图片附加到 mp3：
> 
> ```
> ffmpeg -i input.mp3 -i cover.png -c copy -metadata:s:v title="Album cover"
> -metadata:s:v comment="Cover (Front)" out.mp3 
> ```

仅仅保留附加的图片应该只是将图片流复制到 mp3 的简单问题，尽管您没有提及要转换的格式，有些可能会以不同的方式存储艺术品。

# c# - 领域模型实体与数据实体，软件架构中的一种或两种

> ID：10626854
> 
> 赞同：3
> 
> 时间：2012-05-16T21:16:44.617
> 
> 标签：c#, java, design-patterns, architecture, domain-driven-design

```
**Update 2** 
```

我有一个具有典型 3 层结构（UI/域/数据层）的项目。在域层和数据实体层中同时拥有域模型实体的优缺点是什么。

更改为不同数据库的可能性很小。仅将数据层中的数据实体作为域模型实体的优点和缺点是什么？如果使用 ORM 有什么区别（使用 ORM (NHibernate) 时同时拥有两个实体是否是一种好习惯）？

请激发你的想法、链接、文章、书籍。

**更新 3**

在什么情况下我们应该同时使用领域实体和数据实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:49:46.293

假设您的问题是关于 DDD。在典型的 DDD 场景中，域实体由数据层“水合”（通常很薄，因为它使用 ORM）。为了水合领域实体，数据层必须对领域有深入的了解。如果您使用 ORM，那么您很可能不需要单独的“数据实体”，ORM 知道如何重构您的域对象。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:23:07.817

将数据实体与域实体一起使用是一件棘手的事情，它会添加另一个不必要的抽象层，而不会增加任何价值。

您应该使用通过 ORM 映射的全功能域模型或“贫血”数据模型（也通过 ORM 映射）。哪一种取决于你的背景、要求和个人喜好。

在数据模型的情况下，您可能会直接将表映射到实体（一对一），而不需要任何复杂的东西，例如继承层次结构映射。没关系。棘手的是映射 1:n 关系。使用数据模型，如果您不代表对象模型中的“多”面，它们往往会很好地工作。为什么？因为如果您不添加自定义代码来处理这些情况，两个关系端很容易不同步。

在域模型的情况下，您可能使用存储库来获取聚合根。

我写的有一个例外。在 CQRS 架构中同时使用数据实体和域实体是合法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:26:05.543

如果您的数据模式未准确映射到您的域实体，则使用数据实体。例如，考虑一个电话号码。在您的域实体中，它可能是一个单一属性，而在数据库中，它可能由一个区号字段和一个电话号码字段组成。

与一些答案所暗示的相反，数据访问层不会对您的域实体进行水合，也不会对它们有深入的了解。相反，您的域层向您的数据访问层询问重建实例所需的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T21:27:35.380

域模型应该存在于尽可能多的地方，以最大化代码重用和理解。使用域模型时的例外情况是在时间、内存或运输成本方面非常昂贵。

假设您有一个零件供应商。该供应商向您提供数千个零件，因此在这种情况下，一对多可能会很大，尤其是考虑到每个零件可能带来的类网络。但是，您需要特定小部件的特定供应商的零件列表。在这种情况下，您只需使用您需要的数据创建一个值对象。

这个值对象可以是供应商对象的副本，只包含您需要的部分，或者它可以是一个全新的类，只表示您需要的数据。

典型的用例可能是在网页上显示数据，然后通过 json 传输数据。

# c++ - 如何拆分元组？

> ID：10626856
> 
> 赞同：20
> 
> 时间：2012-05-16T21:16:46.780
> 
> 标签：c++, c++11

给定一个

```
 template<typename First, typename... Tail>
   struct something
   {
       std::tuple<First, Tail...> t;
   }; 
```

我怎样才能得到一个`std::tuple<Tail...>`包含`t`除第一个元素之外的所有元素的元素？

* * *

我认为总的来说这是一个有趣的问题，但这是我的上下文动机：

我想为元组实现哈希。我以[这个答案](https://stackoverflow.com/a/7111460/140367)为基础。我发现其中有一个错误，即没有调用`operator()`带有值的哈希对象：

```
return left() ^ right(); 
```

应该：

```
return left(std::get<0>(e)) ^ right(???); 
```

这 ？？？将是元组的剩余元素以继续模板的递归实例化。这是包含终止部分的完整代码：

```
#include <functional>
#include <utility>

namespace std
{

template<typename First, typename... Tail>
struct hash<std::tuple<First, Tail...>>
{
    typedef size_t result_type;
    typedef std::tuple<First, Tail...> argument_type;

    result_type operator()(argument_type const& e) const
    {
        std::hash<First> left;
        std::hash<std::tuple<Tail...>> right;
        return left(std::get<0>(e)) ^ right(???);
    }
};

template<>
struct hash<std::tuple<>>
{
    typedef size_t result_type;
    typedef std::tuple<> argument_type;

    result_type operator()(argument_type const& e) const
    {
        return 1;
    }
};

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-04T19:57:17.100

我正在寻找同样的东西，并想出了这个相当直接的 C++14 解决方案：

```
#include <iostream>
#include <tuple>
#include <utility>

template < typename T , typename... Ts >
auto head( std::tuple<T,Ts...> t )
{
   return  std::get<0>(t);
}

template < std::size_t... Ns , typename... Ts >
auto tail_impl( std::index_sequence<Ns...> , std::tuple<Ts...> t )
{
   return  std::make_tuple( std::get<Ns+1u>(t)... );
}

template < typename... Ts >
auto tail( std::tuple<Ts...> t )
{
   return  tail_impl( std::make_index_sequence<sizeof...(Ts) - 1u>() , t );
}

int main()
{
   auto t = std::make_tuple( 2, 3.14 , 'c' );
   std::cout << head(t) << std::endl;
   std::cout << std::get<0>( tail(t) ) << std::endl;
   std::cout << std::get<1>( tail(t) ) << std::endl;
} 
```

因此，head(.) 返回元组的第一个元素，tail(.) 返回仅包含最后 N-1 个元素的新元组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T23:03:15.577

使用“索引元组”解包元组而不使用递归：

```
#include <redi/index_tuple.h>

template<typename T, typename... U, unsigned... I>
  inline std::tuple<U...>
  cdr_impl(const std::tuple<T, U...>& t, redi::index_tuple<I...>)
  { return std::tuple<U...>{ std::get<I+1>(t)... }; }

template<typename T, typename... U>
  inline std::tuple<U...>
  cdr(const std::tuple<T, U...>& t)
  { return cdr_impl(t, redi::to_index_tuple<U...>()); } 
```

请参阅[https://gitlab.com/redistd/redistd/blob/master/include/redi/index_tuple.h](https://gitlab.com/redistd/redistd/blob/master/include/redi/index_tuple.h)了解哪些是使用元组`make_index_tuple`和`index_tuple`类似可变参数类模板的恕我直言必不可少的实用程序。（类似的实用程序`std::index_sequence`在 C++14 中进行了标准化，请参阅[index_seq.h](https://gitlab.com/redistd/redistd/blob/master/include/redi/index_seq.h)以了解独立的 C++11 实现）。

或者，使用非复制版本`std::tie`获取对尾部的*引用*元组，而不是复制每个元素：

```
#include <redi/index_tuple.h>

template<typename T, typename... U, unsigned... I>
  inline std::tuple<const U&...>
  cdr_impl(const std::tuple<T, U...>& t, redi::index_tuple<I...>)
  { return std::tie( std::get<I+1>(t)... ); }

template<typename T, typename... U>
  inline std::tuple<const U&...>
  cdr(const std::tuple<T, U...>& t)
  { return cdr_impl(t, redi::to_index_tuple<U...>()); } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T22:22:58.483

这是我可以敲定的第一次尝试。可能更好的东西：

```
#include <tuple>

template < typename Target, typename Tuple, int N, bool end >
struct builder
{
    template < typename ... Args >
    static Target create(Tuple const& t, Args && ... args)
    {
        return builder<Target,Tuple, N+1, std::tuple_size<Tuple>::value == N+1>::create(t, std::forward<Args>(args)..., std::get<N>(t));
    }
};

template < typename Target, typename Tuple, int N >
struct builder<Target,Tuple,N,true>
{
    template < typename ... Args >
    static Target create(Tuple const& t, Args && ... args) { return Target(std::forward<Args>(args)...); }
};

template < typename Head, typename ... Tail >
std::tuple<Tail...> cdr(std::tuple<Head,Tail...> const& tpl)
{
    return builder<std::tuple<Tail...>, std::tuple<Head,Tail...>, 1, std::tuple_size<std::tuple<Head,Tail...>>::value == 1>::create(tpl);
}

#include <iostream>
int main() {
    std::tuple<int,char,double> t1(42,'e',16.7);
    std::tuple<char,double> t2 = cdr(t1);

    std::cout << std::get<0>(t2) << std::endl;
} 
```

需要注意的一件事是，如果您使用自己的类型而不是 std::tuple ，您可能会好很多。这很难的原因是标准似乎没有指定这个元组是如何工作的，因为它没有从自身继承。boost 版本使用了一个你可以挖掘的缺点。这里有一些可能更符合你想要的东西，这将使上述所有操作变得像演员一样简单：

```
template < typename ... Args > struct my_tuple;

template < typename Head, typename ... Tail >
struct my_tuple<Head,Tail...> : my_tuple<Tail...>
{
    Head val;
    template < typename T, typename ... Args >
    my_tuple(T && t, Args && ... args) 
        : my_tuple<Tail...>(std::forward<Args>(args)...)
        , val(std::forward<T>(t)) 
    {}
};

template < >
struct my_tuple <>
{
}; 
```

这是未经测试的，但它应该足以说明这一点，直到它起作用为止。现在要获得“tail”类型的对象，您只需执行以下操作：

```
template < typename Head, typename ... Tail >
my_tuple<Tail...> cdr(my_tuple<Head,Tail...> const& mtpl) { return mtpl; } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T22:48:07.980

Crazy Eddie 找到了一种解包元组的方法，它确实回答了这个问题。但是，对于您提出的特定问题（即元组散列），为什么不避免所有元组副本，而是使用模板递归来依次散列每个元素呢？

```
#include <utility>
#include <iostream>

template< typename T >
size_t left( T const & ) {
  return 1;
}

template< int N, typename Head, typename... Tail >
struct _hash {
  typedef size_t result_type;
  typedef std::tuple< Head, Tail... > argument_type;

  result_type operator ()( argument_type const &e ) const {
    return left(std::get<N>(e)) ^ _hash<N-1, Head, Tail... >()(e);
  }
}; // end struct _hash

template< typename Head, typename... Tail >
struct _hash< 0, Head, Tail... > {
  typedef size_t result_type;
  typedef std::tuple< Head, Tail... > argument_type;

  result_type operator ()( argument_type const &e ) const {
    return left(std::get<0>(e));
  }
}; // end struct _hash< 0 >

template< typename Head, typename... Tail >
size_t hash( std::tuple< Head, Tail... > const &e ) {
  return _hash< sizeof...(Tail), Head, Tail... >()( e );
}

int main( ) {
  std::tuple< int > l_tuple( 5 );
  std::cout << hash( l_tuple ) << std::endl;
} 
```

这以相反的顺序进行散列，但异或是可交换的，所以没关系。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T21:35:19.813

像这样的东西：

```
#include <tuple>

template <bool, typename T, unsigned int ...N> struct tail_impl;

template <typename T, typename ...Args, unsigned int ...N>
struct tail_impl<false, std::tuple<T, Args...>, N...>
{
    static std::tuple<Args...> go(std::tuple<T, Args...> const & x)
    {
        return tail_impl<sizeof...(N) + 1 == sizeof...(Args), std::tuple<T, Args...>, N..., sizeof...(N)>::go(x);
    }
};

template <typename T, typename ...Args, unsigned int ...N>
struct tail_impl<true, std::tuple<T, Args...>, N...>
{
    static std::tuple<Args...> go(std::tuple<T, Args...> const & x)
    {
        return std::tuple<Args...>(std::get<N>(x)...);
    }
};

template <typename T, typename ...Args>
std::tuple<Args...> tail(std::tuple<T, Args...> const & x)
{
    return tail_impl<sizeof...(Args) == 1, std::tuple<T, Args...>, 0>::go(x);
} 
```

测试：

```
#include <demangle.hpp>
#include <iostream>

typedef std::tuple<int, char, bool> TType;

int main()
{
    std::cout << demangle<TType>() << std::endl;
    std::cout << demangle<decltype(tail(std::declval<TType>()))>() << std::endl;
} 
```

印刷：

```
std::tuple<int, char, bool>
std::tuple<char, bool> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-23T02:20:37.683

使用 kgadek 的答案[获取部分 std::tuple](https://stackoverflow.com/questions/8569567/get-part-of-stdtuple)和 Andre Bergner 的测试代码。这很好很简单，但我不知道它是否便携。

```
// works using gcc 4.6.3
// g++ -std=c++0x -W -Wall -g main.cc -o main
#include <iostream>
#include <tuple>

template < typename T , typename... Ts >
const T& head(std::tuple<T,Ts...> t)
{
   return  std::get<0>(t);
}

template <typename T, typename... Ts>
const std::tuple<Ts...>& tail(const std::tuple<T, Ts...>& t)
{
   return (const std::tuple<Ts...>&)t;
}

int main()
{
   auto t = std::make_tuple( 2, 3.14 , 'c' );
   std::cout << head(t) << std::endl;
   std::cout << std::get<0>( tail(t) ) << std::endl;
   std::cout << std::get<1>( tail(t) ) << std::endl;
} 
```

# java - 将输入从文件重定向到 ubuntu 中的 java JAR

> ID：10626862
> 
> 赞同：2
> 
> 时间：2012-05-16T21:17:20.797
> 
> 标签：java, linux

我有一个 *.jar 文件。它的 *.java 从控制台读取未定义的行数。它`SimpleCharStream entryF = new SimpleCharStream(System.in);`用于从控制台读取。

我的问题是，在不修改原始类的情况下，是否可以从文件中读取这个 *.jar？
我正在使用**ubuntu**，我尝试过使用以下重定向：
`java -jar test.jar < entry.txt`但它显示*“无效或损坏的 jarfile test.jar”*

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:25:01.577

错误消息表明您没有正确构建 jar 文件。

# bitmap - 为什么我的 StartCapture() 方法只触发一次？

> ID：10626863
> 
> 赞同：0
> 
> 时间：2012-05-16T21:17:33.973
> 
> 标签：bitmap, system.drawing, rfid, motorola, handheld

这是我第一次使用 RFID 摩托罗拉手持设备。这个应用程序的重点是能够使用设备拍照并保存每张“触发器”被拉动的照片。出于某种原因，我只能让 StartCapture() 方法触发一次，因此只能保存一张图片，并且该方法不会在应用程序运行时再次触发。任何对 Symbol.Imaging2 类库有经验的人的建议都会很棒。

```
 using System;
using System.Collections;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;
using System.Drawing;
using System.Diagnostics;
using Symbol;
using Symbol.ResourceCoordination;
using Symbol.RFID3;
using Symbol.Imaging2;

namespace TagReaderMobile
{
    public partial class Form1 : Form
    {
       // private RFIDReader _reader = null;
        private Trigger _trigger = null;
        private Imaging2 Imager = new Imaging2(); //initializes available camera
        private int fileNumber = 0;
        //private TabPage _openTagPage = null;

        public Form1()
        {
            InitializeComponent();
        }

        public Trigger Trigger
        {
            get
            {
                if (_trigger == null)
                {
                    _trigger =
                        new Trigger(new TriggerDevice(TriggerID.ALL_TRIGGERS, new ArrayList()));
                }

                return _trigger;
            }
        }

        private void InitializeAllTriggers()
        {
            if (!Trigger.IsStage2InUse)
            {
                Trigger.Stage2Notify += (_trigger_Stage2Notify);
            }
        }

        private void DisconnectTriggers()
        {
            if (_trigger != null)
            {
                _trigger.Dispose();
                _trigger = null;
            }
        }

        private void _trigger_Stage2Notify(object sender, TriggerEventArgs e)
        {
            if (e.NewState == TriggerState.STAGE2)
            {
                UpdateTriggerState(true);
            }
            else
            {
                UpdateTriggerState(false);
            }
        }

        private void UpdateTriggerState(bool triggerPulled)
        {
            var workToDo = new Func<bool, bool>(x =>
            {
                if (x)
                {
                    picTrigger1.Image = Properties.Resources.go;
                    picTrigger2.Image = Properties.Resources.go;
                }
                else
                {
                    picTrigger1.Image = Properties.Resources.stop;
                    picTrigger2.Image = Properties.Resources.stop;
                }
                return true;
            });

            if (InvokeRequired)
            {
                Invoke(workToDo, new object[] { triggerPulled });
            }
            else
            {
                workToDo(triggerPulled);
            }
        }

        private void Form1_Activated(object sender, EventArgs e)
        {
            UpdateTriggerState(false);
            //InitializeAllTriggers();

            ConfigureImager();
        }

        private void Form1_Deactivate(object sender, EventArgs e)
        {
            DisconnectTriggers();

        }

        private void ConfigureImager() // Image Capture Method
        {
            if (Imager != null)
            {
                Imager.Enable();
                Imager.StartAcquisition(pictureBox1);
                Imager.OnStatus += new Imaging2.OnStatusHandler(Image_OnStatus);
                Imager.OnCapture += new Imaging2.OnCaptureHandler(Image_OnCapture);

                StartCapture();

            }
        }

        private void StartCapture()
        {
            Imager.Config.Activators.FreezeTimeout = 3000;
            Imager.Config.Activators.Triggers = new[] { Triggers.ALLTRIGGERS };
            IMGResults result = Imager.CaptureImage();
        }

        void Image_OnCapture(ImageData imageData)
        {
            Imager.Enable();
            Debug.WriteLine("Path=" + Program.AppPath);

            System.Drawing.Image bitmap = imageData.GetBitmap();
            bitmap.Save(@"\My Documents\My Pictures\Image" + fileNumber + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
            try
            {
                bitmap.Save(@"\My Documents\My Pictures\Image" + fileNumber + ".jpg", System.Drawing.Imaging.ImageFormat.Jpeg);
            }
            catch(Exception e)
            {
                Debug.WriteLine(e.Message); 
                Debug.WriteLine(e.StackTrace);
            }
            fileNumber++;
            Debug.WriteLine("OnCapture: " + imageData.Results.ToString());
        }

        private void Image_OnStatus(StatusData statusData)
        {
            Debug.WriteLine("Status: " + statusData.EventType);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:26:45.670

因为当你的触发器被触发时，`ConfigureImager`被调用。第一次，`Imager`对象被创建和`StartCapture`调用。第二次，`Imager`已经存在，所以它没有被创建，但`StartCapture`也没有因为`if`块而被调用。

# c - 数组索引增量的分段错误？

> ID：10626869
> 
> 赞同：0
> 
> 时间：2012-05-16T21:17:52.800
> 
> 标签：c

我正在努力做我的家庭作业

在我可以毫无问题地使用这条线之前，没有分段错误，我不知道为什么在我编译我的代码后它现在不起作用。

这是它从以下位置调用的方式`main()`：

```
rb = ascii(back_data[i], phr); 
```

这是数据在 中的定义方式`main()`：

```
char phr[41];

int ascii(const char back[ ], char data[ ]){
  int l = 0, n = 0, i = 0, co = 0;
  char binary_holder[8], char_set;

  binary_holder[0] = '\0';

  l = strlen(back);

  for (i = 0; i <= l; i++){

    if (back[i] == '0' || back[i] == '1' && co < 8){

        binary_holder[co] = back[i];
        co++;
    }
    if(co == 8){

      binary_holder[8] = '\0';
      co = 0;
    }

    char_set = strtol(binary_holder, NULL, 2);

    if (char_set > 31 && char_set != 127){
        data[n++] = char_set;   
    }

  } 
```

我忘了提到问题就在这里，我仍然不知道为什么

`data[n++] = char_set;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:52:02.223

看起来`ascii(back_data[i], phr);`第一个 arg 是一个 char 而不是指向 char 的指针。这个非指针被传递给`strlen()`——boom。

# java - 使用 parseBase64Binary 解码图像

> ID：10626870
> 
> 赞同：0
> 
> 时间：2012-05-16T21:17:55.490
> 
> 标签：java, base64

我想从以 base 64 编码的字符串中获取图像。

我正在使用这种方法：

```
String image = ABAfXWQAQH11kAEB9dZABAfXWQAQH11kAEB9dZABAfXW ...

public void change(){
 byte [] image = DatatypeConverter.parseBase64Binary(image);
 System.out.println(image+" bytes");
 InputStream in = new ByteArrayInputStream(imagen);
 System.out.println(in+" inStream");
 BufferedImage finalImage= ImageIO.read(in);
 System.out.println(finalImage+" buffer");
} 
```

使用它我得到这个输出

```
[B@ca2dce bytes
java.io.ByteArrayInputStream@18558d2 inStream
null buffer
Exception in thread "main" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at MyCLass.change(MyClass.java:48)
    at MyClass.<init>(MyClass.java:26)
at MyClass.main(MyClass.java:59) 
```

为什么 bufferedImage 为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:21:53.630

从[文档中](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#read%28java.io.InputStream%29)：

> 如果没有注册的 ImageReader 声称能够读取结果流，则返回 null。

所以我的猜测是没有注册的 ImageReader 声称能够阅读它......

假设您的`InputStream`代码没有您在问题中遇到的错字（`imagen`而不是`image`），这留下了我可以轻松想到的三个选项：

*   您的图像数据开始时已损坏
*   您已将其错误地编码为 base64
*   `DatatypeConverter.parseBase64`不太适合您拥有的 base64 格式。（这不是我以前使用过的转换器。base64 有很多选项 - 例如[这个公共域之一](http://iharder.sourceforge.net/current/java/base64/)）
*   数据到达时一切正常`ImageIO.read`，但它不是受支持的图像格式。

您应该弄清楚是哪种情况 - 特别是，如果您完全跳过 base64 编码会发生什么？或者，如果将 base64 编码然后解码的数据与原始数据进行比较会发生什么？（至少是一样的长度吗？）如果你把base64解码的数据写到一个文件中，你能在你喜欢的图像程序中打开它吗？

# c# - 表单身份验证 - 在运行时更改 loginUrl

> ID：10626880
> 
> 赞同：4
> 
> 时间：2012-05-16T21:19:05.283
> 
> 标签：c#, asp.net, web-config, forms-authentication

我的 web.config 中有这样的内容：

```
<authentication mode="Forms">
      <forms loginUrl="MyVirtualDirectory/Login/Login" protection="All" timeout="15" />
</authentication> 
```

但是，我正在尝试实现一些“假”虚拟目录，但似乎无法弄清楚如何在运行时使 loginUrl 的“MyVirtualDirectory”部分动态化。

[阅读此 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.web.configuration.formsauthenticationconfiguration.loginurl.aspx)，我似乎可以设置此属性，但是将其添加到 Application_Start 或 Application_BeginRequest 似乎不起作用。

有什么帮助吗？谢谢！

# objective-c - 没有调用 didReceiveAuthenticationChallenge

> ID：10626881
> 
> 赞同：3
> 
> 时间：2012-05-16T21:19:06.640
> 
> 标签：objective-c, ios, ipad, authentication, uiwebview

我`UIWebView`要去一个有登录按钮的网站。按下登录按钮后（例如在 Safari 中），它会提示登录，然后调用通过 AD 进行身份验证的 Web 服务并将用户登录。我试图让它在我`UIWebView`的 .`didReceiveAuthenticationChallenge`叫。有任何想法吗？

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
{
    NSLog(@"Authed = %d", _authed);

    NSLog(@"Did start loading: %@ auth:%d", [[request URL] absoluteString], _authed);

    NSString *theURL = [[request URL] absoluteString];

    currentURL = [[request URL] absoluteString];

    if (!_authed) {
        _authed = NO;

        [[NSURLConnection alloc] initWithRequest:request delegate:self];
        NSLog(@"shouldStartLoadWithRequest Return NO");
        return NO;
    }

    NSLog(@"shouldStartLoadWithRequest Return YES");
    return YES;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;
{
    NSLog(@"got auth challange");

    NSLog(@"previousFailureCount = %d", [challenge previousFailureCount]);

    ch = challenge;

    [[challenge sender] useCredential:[NSURLCredential credentialWithUser:@"myusername" password:@"mypassword" persistence:NSURLCredentialPersistencePermanent] forAuthenticationChallenge:challenge];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;
{
    NSLog(@"received response via nsurlconnection");

    _authed = YES;

    NSString *urladdress = currentURL;    
    NSURL *url = [NSURL URLWithString:urladdress];

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

    [itemWebView loadRequest:urlRequest];
}

- (BOOL)connectionShouldUseCredentialStorage:(NSURLConnection *)connection;
{
    return NO;
} 
```

有没有办法手动调用该`didReceiveAuthenticationChallenge`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T06:59:44.100

正如其他人所指出的，为什么您没有触发该方法的最可能解释是服务器没有返回[`HTTP 401 Unauthorized`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html). 只有这样 UIWebView 才会发送它的委托`didReceiveAuthenticationChallenge`消息。

特别是因为您将成功案例描述为“ntfs 登录屏幕”——我假设您指的是 Windows 域登录对话框——它不是 HTTP 的一部分，听起来服务器使它看起来像一个登录屏幕，但它不是 HTTP 身份验证。

要考虑/尝试的事情：

*   尝试使用[cURL](http://curl.haxx.se/)访问 URL并确认您确实收到了 401。

*   如果您没有收到 401，那么您在桌面浏览器上看到的对话框要么是 Javascript 提示，要么是构造成看起来像的 HTML 表单。尝试使用诸如 Firebug 或 Chrome 的检查器之类的工具来找出真正的凭据发布到的 URL，并在那里启动你的 UIWebView。

*   如果您*实际上*得到了 401，那么也许要仔细检查您的委托连接？在这种情况下，应该在视图的委托上调用此方法。

最后：您问是否可以`didReceiveAuthenticationChallenge`手动触发：当然您可以将消息发送给您的委托，并包含一个挑战，但这根本不是您想要的：那是*您*挑战委托，而不是服务器通过您的 UIWebView 执行它.

# jquery - flot.js 图例和网格选项

> ID：10626882
> 
> 赞同：14
> 
> 时间：2012-05-16T21:19:07.593
> 
> 标签：jquery, flot

尝试运行一个非常简单的 flot.js 示例，我有以下代码来呈现 flot 图表。（我故意省略了所有非必要的 HTML 和 CSS。）

```
<div id="chartWrapper1">
<div id="placeholder"></div>
<div id="legendholder">Legend Container</div>
</div>

<script type="text/javascript">
$(function () {
var disk1 = [[0, 3], [4, 8], [8, 5], [9, 13]];
    $.plot($("#placeholder"), [{
      legend: { show: true, container: $('#legendholder') },
      label: "Disk 1",
      data: disk1,
      lines: { show: true, fill: true }
    }]);
});
</script> 
```

结果如下所示：

![在此处输入图像描述](../Images/fa03143c49c3e4289cbf697cad693b4c.png)

[http://bit.ly/JTR3Bd](http://bit.ly/JTR3Bd)

（StackExchange 还不允许我发布图片，所以上面的链接可以让你直接看到图表的截图。）

图表旁边的小部分，它写着 Legend，是另一个 div (id="legendholder")，这就是我希望图例出现的地方。

我在网格选项方面遇到了类似的问题，这是我不明白的部分：

当我在 JavaScript 中指定选项时，似乎什么也没发生。图例保留在图表内。然后，我在 jquery.flot.js 中对图例设置进行硬编码，一切正常。显然，这完全是 hack，但是有没有人看到我在这里做错了什么？

是的，我已经阅读了 API 文档，浏览了 flot.js github 页面，但我无法弄清楚是什么导致了我的问题。

任何人？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-16T22:42:12.850

`plot`应该像这样调用flot函数`$.plot(placeholder, data, options);` 图例是选项的一部分，而不是您在代码中所做的数据。试试这个：

```
$(function () {
    var disk1 = [[0, 3], [4, 8], [8, 5], [9, 13]];
    $.plot($("#placeholder"), [{
      label: "Disk 1",
      data: disk1,
      lines: { show: true, fill: true }
    }], 
    {legend: { show: true, container: '#legendholder' }})
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T08:54:05.923

代替

`legend: { show: true, container: $('#legendholder') },`

和

`legend: { show: true, placement: 'outsideGrid', container: $('#legendholder') },`

# asp.net - 货币转换器 Web 服务不起作用

> ID：10626883
> 
> 赞同：0
> 
> 时间：2012-05-16T21:19:08.100
> 
> 标签：asp.net

我想在[http://www.webservicex.com/CurrencyConvertor.asmx?wsdl](http://www.webservicex.com/CurrencyConvertor.asmx?wsdl)使用货币转换器。但它不起作用我在下拉列表菜单中什么都没有。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using com.webservicex.www;

public partial class cc : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        //using web service at http://www.webservicex.com/CurrencyConvertor.asmx?wsdl
        double rate = 0, result = 0;
        Currency curr1, curr2;
        try
        {
            CurrencyConvertor ws = new CurrencyConvertor();
            curr1 = (Currency)Enum.Parse(typeof(Currency), DropDownList1.SelectedItem.Value);
            curr2 = (Currency)Enum.Parse(typeof(Currency), DropDownList2.SelectedItem.Value);
            rate = ws.ConversionRate(curr1, curr2);
            result = System.Convert.ToDouble(TextBox1.Text) * rate;
            Label2.Text = "The exchange rate between" + DropDownList1.SelectedItem.Text + " and " + DropDownList2.SelectedItem.Text + " is " + rate;
            Label3.Text = "Converted " + TextBox1.Text + " to " + result;
        }
        catch
        {
            Label2.Text = "Web service not available please try again later."; 
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:19:07.303

我建议避免在每次要显示下拉菜单时调用 Web 服务。货币的选择不会经常改变。（无论如何，您都需要准备好处理错误。）

相反，预先下载一次可用的数据并将其存储在适合支持下拉列表的 XML 文件中：

```
<Currencies>
     <currency Name="EUR" />
     <currency Name="RUB" /> 
```

然后，有 ASP.NET 代码如下：

```
<asp:XmlDataSource ID="XmlDataSource1" runat="server"
        DataFile="~/Currencies.xml">
</asp:XmlDataSource>
<asp:DropDownList ID="DropDownList1" runat="server"
        DataSourceID="XmlDataSource1" DataTextField="Name" DataValueField="Name">
</asp:DropDownList> 
```

# javascript - 将数据传递给引导模式

> ID：10626885
> 
> 赞同：593
> 
> 时间：2012-05-16T21:19:11.900
> 
> 标签：javascript, jquery, asp.net-mvc, twitter-bootstrap

我有几个超链接，每个链接都有一个 ID。当我单击此链接时，我想打开一个模态（[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)），并将此 ID 传递给模态。我在谷歌上搜索，但我找不到任何可以帮助我的东西。

这是代码：

```
<a data-toggle="modal" data-id="@book.Id" title="Add this item" class="open-AddBookDialog"></a> 
```

哪个应该打开：

```
<div class="modal hide" id="addBookDialog">
    <div class="modal-body">
        <input type="hidden" name="bookId" id="bookId" value=""/>
    </div>
</div> 
```

使用这段代码：

```
$(document).ready(function () {
    $(".open-AddBookDialog").click(function () {
        $('#bookId').val($(this).data('id'));
        $('#addBookDialog').modal('show');
    });
}); 
```

但是，当我单击超链接时，什么也没有发生。当我给出超链接`<a href="#addBookDialog" ...>`时，模式打开得很好，但它不包含任何数据。

我遵循了这个例子：[How to pass values arguments to modal.show() function in Bootstrap](https://stackoverflow.com/questions/10379624/how-to-pass-values-arguments-to-modal-show-function-in-twitter-bootstrat)

（我也试过这个：[How to set the input value in a modal dialog?](https://stackoverflow.com/questions/7845866/how-to-set-the-input-value-in-a-modal-dialogue)）

* * *

## 回答 #1

> 赞同：585
> 
> 时间：2012-05-17T12:20:53.213

我认为您可以使用 jQuery 的[.on](http://api.jquery.com/on/)事件处理程序来完成这项工作。

这是您可以测试的小提琴；只需确保尽可能多地扩展小提琴中的 HTML 框架，以便您可以查看模式。

[http://jsfiddle.net/Au9tc/605/](http://jsfiddle.net/Au9tc/605/)

**HTML**

```
<p>Link 1</p>
<a data-toggle="modal" data-id="ISBN564541" title="Add this item" class="open-AddBookDialog btn btn-primary" href="#addBookDialog">test</a>

<p>&nbsp;</p>

<p>Link 2</p>
<a data-toggle="modal" data-id="ISBN-001122" title="Add this item" class="open-AddBookDialog btn btn-primary" href="#addBookDialog">test</a>

<div class="modal hide" id="addBookDialog">
 <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Modal header</h3>
  </div>
    <div class="modal-body">
        <p>some content</p>
        <input type="text" name="bookId" id="bookId" value=""/>
    </div>
</div> 
```

**JAVASCRIPT**

```
$(document).on("click", ".open-AddBookDialog", function () {
     var myBookId = $(this).data('id');
     $(".modal-body #bookId").val( myBookId );
     // As pointed out in comments, 
     // it is unnecessary to have to manually call the modal.
     // $('#addBookDialog').modal('show');
}); 
```

* * *

## 回答 #2

> 赞同：415
> 
> 时间：2014-07-31T13:28:14.880

如果您使用的是**Bootstrap 3.2.0** ，这是一种更简洁的方法。

链接 HTML

```
<a href="#my_modal" data-toggle="modal" data-book-id="my_id_value">Open Modal</a> 
```

模态 JavaScript

```
//triggered when modal is about to be shown
$('#my_modal').on('show.bs.modal', function(e) {

    //get data-id attribute of the clicked element
    var bookId = $(e.relatedTarget).data('book-id');

    //populate the textbox
    $(e.currentTarget).find('input[name="bookId"]').val(bookId);
}); 
```

[http://jsfiddle.net/k7FC2/](http://jsfiddle.net/k7FC2/)

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-02-14T00:50:24.623

以下是我使用@mg1075 的代码实现它的方法。我想要一些更通用的代码，以便不必为模式触发链接/按钮分配类：

**在 Twitter Bootstrap 3.0.3 中测试。**

**HTML**

```
<a href="#" data-target="#my_modal" data-toggle="modal" data-id="my_id_value">Open Modal</a> 
```

**JAVASCRIPT**

```
$(document).ready(function() {

  $('a[data-toggle=modal], button[data-toggle=modal]').click(function () {

    var data_id = '';

    if (typeof $(this).data('id') !== 'undefined') {

      data_id = $(this).data('id');
    }

    $('#my_element_id').val(data_id);
  })
}); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-04-10T14:35:23.133

**Bootstrap 4.3** - 使用下面的代码片段 - 更多[在这里](https://getbootstrap.com/docs/4.3/components/modal/)

```
$('#exampleModal').on('show.bs.modal', function (event) {
  let bookId = $(event.relatedTarget).data('bookid') 
  $(this).find('.modal-body input').val(bookId)
})
```

```
a.btn.btn-primary.open-AddBookDialog {color: white }
```

```
<!-- Initialize Bootstrap 4 -->

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!-- BUTTON -->

<a 
  class="btn btn-primary open-AddBookDialog" 
  data-toggle="modal" 
  data-target="#exampleModal" 
  data-bookid="@book.Id" 
  title="Add this item"
>Open</a>

<!-- MODAL -->

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-body">
        <input type="hidden" name="bookId" id="bookId" value=""/>
        <input type="text" class="form-control" id="recipient-name">    
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-04-06T15:28:22.950

如果您在 bootstrap 3+ 上，如果使用 Jquery，这可以进一步缩短。

**HTML**

```
<a href="#" data-target="#my_modal" data-toggle="modal" class="identifyingClass" data-id="my_id_value">Open Modal</a>

<div class="modal fade" id="my_modal" tabindex="-1" role="dialog" aria-labelledby="my_modalLabel">
<div class="modal-dialog" role="dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Modal Title</h4>
        </div>
        <div class="modal-body">
            Modal Body
            <input type="hidden" name="hiddenValue" id="hiddenValue" value="" />
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
            <button type="button" class="btn btn-primary">Yes</button>
        </div>
    </div>
</div> 
```

**查询**

```
<script type="text/javascript">
    $(function () {
        $(".identifyingClass").click(function () {
            var my_id_value = $(this).data('id');
            $(".modal-body #hiddenValue").val(my_id_value);
        })
    });
</script> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-06-07T13:21:46.500

您的代码可以使用正确的模态 html 结构。

```
$(function(){
  $(".open-AddBookDialog").click(function(){
     $('#bookId').val($(this).data('id'));
    $("#addBookDialog").modal("show");
  });
});
```

```
<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

<a data-id="@book.Id" title="Add this item" class="open-AddBookDialog">Open Modal</a>

<div id="addBookDialog" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
       <input type="hidden" name="bookId" id="bookId" value=""/>
      </div>

    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
</html>
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-05-03T07:46:27.597

使用 jquery 很容易：

如果以下是您的锚链接：

```
<a data-toggle="modal" data-id="@book.Id" title="Add this item" class="open-AddBookDialog"></a> 
```

在您的模态显示事件中，您可以访问如下所示的锚标记

```
//triggered when modal is shown
$('#modal_id').on('shown.bs.modal', function(event) {

    // The reference tag is your anchor tag here
    var reference_tag = $(event.relatedTarget); 
    var id = reference_tag.data('id')
    // ...
    // ...
}) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-09-03T16:07:17.443

我发现这种方法很有用：

**创建点击事件：**

```
$( button ).on('click', function(e) {
    let id = e.node.data.id;

    $('#myModal').modal('show', {id: id});
}); 
```

**创建 show.bs.modal 事件：**

```
$('#myModal').on('show.bs.modal', function (e) {

     // access parsed information through relatedTarget
     console.log(e.relatedTarget.id);

}); 
```

**额外的：**

在 show.bs.modal 中创建逻辑以检查属性是否被解析，例如：id：`( e.relatedTarget.hasOwnProperty( 'id' ) ? e.relatedTarget.id : null )`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-10-11T06:55:29.457

Bootstrap 4.0 提供了使用 jquery 修改模态数据的选项：[https ://getbootstrap.com/docs/4.0/components/modal/#varying-modal-content](https://getbootstrap.com/docs/4.0/components/modal/#varying-modal-content)

这是文档上的脚本标签：

```
$('#exampleModal').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('.modal-title').text('New message to ' + recipient)
  modal.find('.modal-body input').val(recipient)
}) 
```

它在大多数情况下都有效。仅调用 modal 不起作用。这是对我有用的脚本的修改：

```
$(document).on('show.bs.modal', '#exampleModal',function(event){
... // same as in above script
}) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-05-04T04:12:37.027

试试这个

```
$(function(){
 //when click a button
  $("#miButton").click(function(){
    $(".dynamic-field").remove();
    //pass the data in the modal body adding html elements
    $('#myModal .modal-body').html('<input type="hidden" name="name" value="your value" class="dynamic-field">') ;
    //open the modal
    $('#myModal').modal('show') 
  })
}) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-04T22:11:05.393

这是您可以将 id_data 发送到 modal 的方式：

```
<input
    href="#"
    data-some-id="uid0123456789"
    data-toggle="modal"
    data-target="#my_modal"
    value="SHOW MODAL"
    type="submit"
    class="btn modal-btn"/>

<div class="col-md-5">
  <div class="modal fade" id="my_modal">
   <div class="modal-body modal-content">
     <h2 name="hiddenValue" id="hiddenValue" />
   </div>
   <div class="modal-footer" />
</div> 
```

和 javascript ：

```
 $(function () {
     $(".modal-btn").click(function (){
       var data_var = $(this).data('some-id');
       $(".modal-body h2").text(data_var);
     })
    }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-17T21:27:06.777

发现这对我有用：

在链接中：

```
<button type="button" class="btn btn-success" data-toggle="modal" data-target="#message<?php echo $row['id'];?>">Message</button> 
```

在模态中：

```
<div id="message<?php echo $row['id'];?>" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Modal Header</h4>
      </div>
      <div class="modal-body">
        <p>Some text in the modal.</p>
        <?php echo $row['id'];?>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-07T20:29:03.810

例如，对于更新 href 值，我会执行以下操作：

```
<a href="#myModal" data-toggle="modal" data-url="http://example.com">Show modal</a>

$('#myModal').on('show.bs.modal', function (e) {
    var url = $(e.relatedTarget).data('url');
    $(e.currentTarget).find('.any-class').attr("href", "url");
}) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-21T11:14:45.763

我使用的是引导程序 5，并且由于我无法控制的限制，我自己无法使用脚本显示（）模式，所以我依赖于弹出模式的按钮的属性 data-bs-toggle 和 data-bs-target 。

Bootstrap 暴露了一些事件（[https://getbootstrap.com/docs/5.0/components/modal/](https://getbootstrap.com/docs/5.0/components/modal/)），我们可以像这样挂钩代码：

```
document.getElementById('idModal').addEventListener('show.bs.modal', (e) => {
    console.log(e.relatedTarget);
}); 
```

在relatedTarget 中，我们将在数据集中找到指定的数据属性，例如，如果我们有一个看起来像这样的元素：

```
<button
    class="btn btn-secondary"
    data-id="fk_articles"
    data-bs-toggle="modal"
    data-bs-target="#documentationModal">
        Documentation
</button> 
```

然后我们可以通过以下方式到达 fk_articles：

```
console.log( e.relatedTarget.dataset.id ) 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2018-07-26T07:45:47.600

您可以尝试[simpleBootstrapDialog](https://github.com/ovaqlab/simpleDialog)。在这里您可以传递标题、消息、取消和提交的回调选项等...

要使用此插件，请包含如下所示的 simpleBootstrapDialog.js 文件

```
<script type="text/javascript" src="/simpleDialog.js"></script> 
```

**基本用法**

```
<script type="text/javascript>
$.simpleDialog();
</script> 
```

**自定义标题和描述**

```
$.simpleDialog({
  title:"Alert Dialog",
  message:"Alert Message"
}); 
```

**带回调**

```
<script type="text/javascript>
$.simpleDialog({
    onSuccess:function(){
        alert("You confirmed");
    },
    onCancel:function(){
        alert("You cancelled");
    }
});
</script> 
```

# javascript - on() 和 off(), on() 立即触发，但我希望它像 bind 或 live 一样“行动”，这里有什么问题？

> ID：10626887
> 
> 赞同：0
> 
> 时间：2012-05-16T21:19:19.980
> 
> 标签：javascript, jquery, html

`bind/live`当另一个完成时，我正在尝试单击事件。所以我正在使用`.on()`and `.off()`。假设采取行动的方式是，当

1.  我点击`a.nav-link`一个 div 出现，
2.  当它发生时，我将`click`事件固定到文档中，
3.  它绑定了一个单击事件，当我单击 html 中的任何位置时，它会关闭 div 并关闭（）文档行为

现在它可以正常运行一轮，但是下次我单击`a.nav-link`它时它会立即执行所有任务，所以我在这里疯狂做什么？

**演示：http: [//jsfiddle.net/xHNQ3/1/](http://jsfiddle.net/xHNQ3/1/)**

```
<div id="container">
    <header>
        <div class="nav">
            <a href="#" id="nav-link">click me</a>
        </div>
        <div class="sub-nav"></div>
    </header>
</div>​ 
```

```
 $('#nav-link').on('click', bindOnClick);

     function bindOnClick() {
         $('.nav').addClass('isVisible');
         $('.sub-nav').show(function(){
             $(document).on('click', 'html', function(){
                 alert('done');
                 $('.sub-nav').hide();

                 $(document).off('click', 'html', bindOnClick);
             });
         });
     } 
```

**编辑：**我在这里要做的基本上是，每当我在两个 div 之外单击时，显示的那个`.sub-nav`应该隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:26:21.820

这条线是你的问题，`bindonclick`与链接相关，而不是与文档点击有关。

```
$(document).off('click', 'html', bindOnClick); 
```

[http://jsfiddle.net/xHNQ3/4/](http://jsfiddle.net/xHNQ3/4/)

```
$(document).off('click', 'html'); 
```

如果您想防止单击链接导致双重事件触发，那么也将其关闭/打开。

[http://jsfiddle.net/xHNQ3/9/](http://jsfiddle.net/xHNQ3/9/)

```
$('#nav-link').on('click', bindOnClick);

function bindOnClick(e) {
    $('#nav-link').off('click', bindOnClick);
    $('.nav').addClass('isVisible');
    $('.sub-nav').show(function() {
        $(document).on('click', 'html', function() {
            alert('done');
            $('.sub-nav').hide();

            $(document).off('click', 'html');
            $('#nav-link').on('click', bindOnClick);
        });
    });
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T21:31:28.157

您实际上并没有取消绑定`$(document)`点击处理程序。处理程序现在是一个匿名函数。

您需要传递与`$.fn.on`to绑定的函数`$.fn.off`。见下文。

```
 $('#nav-link').on('click', bindOnClick);

 function bindOnClick() {
     $('.nav').addClass('isVisible');
     $('.sub-nav').show(function(){
         $(document).on('click', 'html', hideAndUnbind); // bind named function
     });
 }

 function hideAndUnbind() {
     alert('done');
     $('.sub-nav').hide();
     $(document).off('click', 'html', hideAndUnbind); // unbind named function
 } 
```

旁注：如果你想捕获文档上的所有点击事件，你可以去掉选择器。`$(document).on('click', hideAndUnbind);`应该以同样的方式工作。

但是，最好不要不断地绑定和解除绑定事件。你可以做这样的事情。[http://jsfiddle.net/xHNQ3/11/](http://jsfiddle.net/xHNQ3/11/)

```
$('#nav-link').on('click', function(){
    $('.nav').addClass('isVisible');
    $('.sub-nav').show();
    return false; // to prevent bubbling up to the document element
});

$(document).on('click', function(){
    if ($('.nav').hasClass('isVisible')) {
        $('.nav').removeClass('isVisible');
        $('.sub-nav').hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T21:22:50.407

在这里`html`应该做什么？第二个参数应该是您的选择器。

```
$(document).on('click', 'html', fn); 
```

这相当于说：

```
$("html").live("click", fn); 
```

# c++ - 为我自己的函数执行通常的算术转换？

> ID：10626889
> 
> 赞同：2
> 
> 时间：2012-05-16T21:19:42.773
> 
> 标签：c++

今天在工作中出现了这个问题，所以我想我会把它扔给社区。

一位同事（或多或少）编写了以下代码：

```
#include <algorithm>

double chop(double x) {
    return std::max(0, x);
} 
```

但这甚至无法编译，因为`std::max`希望它的两个参数具有完全相同的类型。我相信这是因为它可以获取一对引用并返回一个引用，如果您在用户定义的类型上调用它，这很可能是您想要的。很公平。

当然，解决方法是使用`std::max(0.0, x)`.

现在请容忍我一会儿，因为我撒了谎。我的同事实际上写的是这样的：

```
// Included from a very old header file written by someone long gone
template<class T1, class T2>
inline T1 myMax(T1 x, T2 y) {
    return (x < y) ? y : x;
}

double chop(double x) {
    return myMax(0, x);
} 
```

这编译！但是对于 x 等于 0.25，它会产生相当令人惊讶的结果。我不知道他花了多长时间才找到问题，即使找到了，他也不得不问为什么它不起作用。

我的回答是（a）使用 0.0 而不是 0（修复了错误），以及（b）使用`std::max`而不是`myMax`（当你想到它时，它的行为是相当可怕的）。

但他想知道为什么会这样。我的意思是，他可以写`0 + x`or `0 * x`or `0 - x`，那为什么不`myMax(0, x)`呢？

这是我第一次给他他想要的东西：

```
// this is from the .hh file

// template meta-program to compute the "wider" of two types given as argument
template<class T1, class T2>
struct WiderType {
};

// Partial specialization for case where both types are same
template<class T>
struct WiderType<T, T> {
  typedef T type;
};

// Specialization for first type "int" and second type "double"
template<>
struct WiderType<int, double> {
  typedef double type;
};

template<class T1, class T2>
inline typename WiderType<T1,T2>::type
myMax(T1 a, T2 b) {
  return ((a < b) ? b : a);
}

// this is from the .cc file

double chop(double x) {
  return myMax(0, x);
}

// just to show this still works
int chop(int x) {
  return myMax(0, x);
} 
```

现在，我可以`WiderType`为每一对整数类型添加一个特化，再加上一些来做其他通常的算术转换。（我想我可以重命名它`UsualConversions`或类似的东西。）

但是有没有更简单的方法？也就是说，C++ 语言是否为我提供了一种简单的方法来定义我自己的函数，该函数对其参数执行与各种内置算术运算符相同的转换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:32:30.173

除了查尔斯贝利的回答，你也可以这样做：

```
template<typename T1, typename T2>
typename std::common_type<T1, T2>::type max(T1&& a, T2&& b) {
    return a < b ? b : a;
} 
```

`common_type`其中有一个 typedef `type`，它是两种类型都可以隐式转换为的类型，因此，例如，如果是`double`and `int`，它将返回 a `double`，但如果是`int`and `int`，它将返回 an `int`。

如果你根本不能使用 C++11，那么我唯一能想到的就是：

```
template<typename T1, typename T2, typename T3>
void max(const T1& a, const T2& b, T3& dst) {
    dst = a < b ? b : a;
} 
```

并像使用它一样

```
double d;
max(0, 43.12, d); 
```

但是，以这种方式声明变量非常笨拙。如果你觉得它更漂亮，你也可以这样做：

```
template<typename RetType, typename T1, typename T2>
RetType max(const T1& a, const T2& b) {
    return a < b ? b : a;
} 
```

接着

```
return max<double>(0, 43.11); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T21:29:22.383

在 C++11 之前我不知道有什么好方法，但现在你可以做这样的事情。

```
template<class T, class U>
auto myMax(T&& t, U&& u) -> decltype(t + u)
{
    return t < u ? u : t;
} 
```

`decltype(t + u)`只需计算出通用类型`T`和`U`算术表达式中的通用类型，并将其用作模板的返回类型。

# c++ - 连续运行两次后的 scons 行为

> ID：10626891
> 
> 赞同：3
> 
> 时间：2012-05-16T21:20:03.187
> 
> 标签：c++, build, environment, scons

我正在尝试尽可能方便地配置 scons。我的构建脚本工作正常，但我仍然遇到一件事。

使用 make，如果我连续运行两次“make”，第二次将什么也不做，因为它会检测到目标是最新的（因为我刚刚构建了它）。

如何确保 scons 的行为相同？现在，如果我第二次运行 scons ，它认为需要再次构建目标，此外，由于所有剩余 .o 文件的依赖关系冲突（因为没有首先调用 clean ），它无法构建。

我怎样才能让 scons 自己处理这个问题，即检测目标是否过时，如果是，则相应地重建？

另外，我注意到如果我打电话

```
scons
scons -q 
```

构建然后直接提问，退出状态仍然始终为 1。如果我理解正确，它应该是 0，因为目标是最新的。

任何帮助表示赞赏！

编辑：

这是我的 SConstruct 文件。如果我做错了什么，请提请我注意：

```
import os

env = Environment(CXX = "C:/MinGW/bin/g++", CCFLAGS = "-g")
env.Tool("mingw")

sourceList = list('./src/' + x for x in os.listdir("./src"))

pathList = ['./include',
            'C:/boost',
            'C:/frameworks/SFML/include',
            'C:/Python27/include']

libPathList = ['C:/boost/stage/lib', 'C:/frameworks/SFML/lib', 'C:/Python27/libs']
libList = ['boost_thread-mgw45-mt-1_46_1',
           'boost_python-mgw45-mt-1_46_1', 
           'sfml-system',
           'sfml-window',
           'sfml-graphics',
           'python27']

env.Append(CPPPATH=pathList)
env.Append(LIBPATH=libPathList)
env.Append(LIBS=libList)

t = env.Program(target='./bin/build_result.exe', source=sourceList)
Default(t) 
```

是的，我知道我应该添加适当的调试选项，但我可以稍后改进文件。但是，我不知道是否有任何与我遇到的问题有关的问题。此外，此文件完全适用于较小的测试项目：

```
import os

env = Environment(CXX = "C:/MinGW/bin/g++", CCFLAGS = "-g")
env.Tool("mingw")

sourceList = os.listdir('.')
sourceList = list(x for x in sourceList if x[-3:] == 'cpp')

t = env.Program(target='./result.exe', source=sourceList)
Default(t) 
```

“scons -q”也按预期工作。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:52:22.717

在 SCons 中指定要编译的源文件的一种更常见的方法如下：

```
sourceList = Glob('#/src/*.cpp')
t = env.Program(target='#/bin/build_result.exe', source=sourceList) 
```

注意`'#'`路径中的字符。在 SCons 中，这意味着相对于 SConstruct 文件所在的目录。[Glob() 文档](http://www.scons.org/doc/production/HTML/scons-user/x496.html)。[S构造相对路径文档。](http://www.scons.org/doc/production/HTML/scons-user/x3240.html)

此外，您可以在 SConstruct 文件中配置所有内容，然后使用 SConscript() 函数在`src`dir 中加载 SConscript 文件，这将导入在 SConstruct 中创建的 env 并简单地指定要编译的文件和必要的目标。这将是更多的未来证明，可以更容易地添加更多的源目录，每个目录都有自己的 SConscript 文件。这称为[SCons 分层构建](http://www.scons.org/doc/production/HTML/scons-user/c3181.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:04:35.270

啊哈，发现问题了。在此行下方：

```
sourceList = list('./src/' + x for x in os.listdir("./src")) 
```

我应该添加

```
sourceList = list(x for x in sourceList if x[-3:] == 'cpp') 
```

第一个构建，.o 文件是在 ./src 目录中生成的，所以第二次它选择目标文件作为源。问题解决了。

# c# - 使用数组的 SetValue 方法与 [] 索引器

> ID：10626892
> 
> 赞同：14
> 
> 时间：2012-05-16T21:20:04.297
> 
> 标签：c#, arrays, indexer, setvalue

我注意到数组有 SetValue 方法，当您可以只使用索引器时，这似乎有点不合适。SetValue 有什么特殊用途吗？MSDN 文章似乎没有说明 SetValue 的用途，只是说明如何使用它。就速度而言，哪种方法更有效？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T21:23:09.343

有时你所拥有的数组只是它是一个`Array`. 该类`Array`没有索引器，因此在其上设置/获取元素值的最佳方法是通过`GetValue`and`SetValue`方法。例如：

```
private void M(Array array) 
{
    array[0] = 5;         // <-- Compiler error
    array.SetValue(5, 0); // <-- Works
} 
```

# extendscript - Extendscript 当前脚本路径

> ID：10626893
> 
> 赞同：21
> 
> 时间：2012-05-16T21:20:04.823
> 
> 标签：extendscript

我想获取当前正在运行的 Extendscript 的绝对文件夹路径。

即在nodejs`__DIR__`中的php（或）中。`__dirname`在 Extendscript 中等效。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-16T22:30:02.280

自己找的，是`$.fileName`

对于文件夹名称，它是`(new File($.fileName)).parent`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-13T23:03:36.887

[我写了一篇关于这个的文章，你可能会觉得有帮助](http://armand.eu/blog/manage-paths-in-adobe-extend-script/)，:)

本质上：

```
var myPath = (app.activeDocument.fullName.parent.fsName).toString().replace(/\\/g, '/');
var myScriptPath = (File(app.activeScript.fullName).parent.fsName).toString().replace(/\\/g, '/');

alert('Document path is: ' + myPath + ' , and script path is: ' + myScriptPath);
```

咪咪，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-29T19:13:01.763

```
File($.fileName).path; 
```

似乎现在可以完成这项工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-07T12:34:28.187

如果您需要参考与活动文档相关的文件，您可以使用`app.activeDocument.filePath`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-04T10:02:40.097

`app.activeScript.parent`应该可以解决问题 - 请注意，如果您使用 Windows 文件链接，您将获得*实际*的脚本位置，而不是 .lnk 文件的位置。

# asp.net-mvc-3 - 在 html 标签内添加 html 输入

> ID：10626899
> 
> 赞同：14
> 
> 时间：2012-05-16T21:20:23.583
> 
> 标签：asp.net-mvc-3, razor

所以我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html#tables)，我的大多数表单看起来都很棒

```
 <div class="control-group">
            @Html.LabelFor(m => m.Prop)
            <div class="controls">
                @Html.EditorFor(m => m.Prop)
            </div>
            @Html.ValidationMessageFor(model => model.Prop)
        </div> 
```

唯一的问题是单选按钮和复选框。Twitter Bootstrap 调用 HTML5 样式标签，其中包括像这样的标签标签内的单选或复选框输入

```
 <label class="checkbox">
           <input type="checkbox"> Check me out
        </label> 
```

如果我无法使用 @Html 或重载创建这些内容，我至少可以访问 Labelfor 创建的文本吗？

```
 <label class="checkbox">
           @Html.EditorFor(m=> m.Prop)
           @Html.TheVariableThatContainsTheTextThatLabelForUsesFor(m => m.Prop)
        </label> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T22:34:46.887

为什么不能用@Html 创建这些。如果您编写自己的扩展方法（见下文），应该这样做，不是吗？

```
 public static class HtmlHelperExtensions
    {
        public static MvcHtmlString MyCheckBoxFor<TModel>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, bool>> expression, object htmlLabelAttributes = null, object htmlCheckBoxAttributes = null)
        {
            var checkbox = htmlHelper.CheckBoxFor(expression, htmlCheckBoxAttributes);

            var labelTag = new TagBuilder("label");
            labelTag.AddCssClass("checkbox");
            labelTag.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlLabelAttributes));
            labelTag.InnerHtml = checkbox.ToString();

            return new MvcHtmlString(labelTag.ToString());
        }
    } 
```

## 编辑：

这个修订版怎么样。这完全复制了标签的作用。

```
 public static class HtmlHelperExtensions
{
    public static MvcHtmlString MyCheckBoxFor<TModel>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, bool>> expression, object htmlLabelAttributes = null, object htmlCheckBoxAttributes = null)
    {
        var checkbox = htmlHelper.CheckBoxFor(expression, htmlCheckBoxAttributes);

        var labelTag = new TagBuilder("label");
        var checkboxName = ExpressionHelper.GetExpressionText(expression);
        labelTag.AddCssClass("checkbox");
        labelTag.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlLabelAttributes));
        labelTag.InnerHtml = checkbox.ToString() + LabelHelper(ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData), checkboxName);

        return new MvcHtmlString(labelTag.ToString());
    }

    private static MvcHtmlString LabelHelper(ModelMetadata metadata, string fieldName)
    {
        string labelText;
        var displayName = metadata.DisplayName;

        if (displayName == null)
        {
            var propertyName = metadata.PropertyName;

            labelText = propertyName ?? fieldName.Split(new[] { '.' }).Last();
        }
        else
        {
            labelText = displayName;
        }

        if (string.IsNullOrEmpty(labelText))
        {
            return MvcHtmlString.Empty;
        }

        return new MvcHtmlString(labelText);
    }
} 
```

我应该注意到，在 MVC 4 中，有一个 DisplayNameFor Helper，因此可以稍微简化整个标签业务。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-09T19:56:32.920

谈到 Mirko 提到的关于 MVC 4 的内容，这是我在视图中使用的代码（没有自定义帮助程序）。

```
<div class="checkbox">
    <label>
        @Html.CheckBoxFor(m => m.RememberMe) @Html.DisplayNameFor(m => m.RememberMe)
    </label>
</div> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-13T09:12:46.080

我刚刚构建了一个反映表单在 ASP.NET MVC 中的工作方式的解决方案。

```
@using (Html.BeginLabelFor(m => m.CheckMe, new { @class = "checkbox" })) {
    @Html.CheckBoxFor(m => m.CheckMe)
} 
```

这会呈现嵌套结构，同时允许您使用普通的 HTML 帮助器来处理复选框和单选按钮。

```
<label class="checkbox" for="CheckMe">
    <input type="checkbox" name="CheckMe" value="true" /> Hey, Check Me!
</label> 
```

BeginLabel 和 BeginLabelFor 分别支持与 Label 和 LabelFor 相同的签名。

[https://github.com/toddlucas/bootstrap-mvc.net](https://github.com/toddlucas/bootstrap-mvc.net)

我希望其他人觉得这很有用。

**编辑：**

新的 Visual Studio 2013 MVC 模板中使用的另一种替代方法是执行以下操作：

```
<div class="checkbox">
    @Html.CheckBoxFor(m => m.CheckMe)
    @Html.LabelFor(m => m.CheckMe)
</div> 
```

新模板使用 Twitter Bootstrap 3.0，它遵循与 2.x 相同的约定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T21:00:58.733

我的最终解决方案是自定义引导标签助手

```
 public static MvcHtmlString BootstrapCheckBoxFor<TModel>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, bool>> expression, object htmlLabelAttributes = null, object htmlCheckBoxAttributes = null)
    {
        var checkbox = htmlHelper.CheckBoxFor(expression, htmlCheckBoxAttributes);
        var label = htmlHelper.LabelFor(expression, htmlCheckBoxAttributes);
        string text = Regex.Match(label.ToString(), "(?<=^|>)[^><]+?(?=<|$)").Value;

        var labelTag = new TagBuilder("label");
        labelTag.AddCssClass("checkbox");
        labelTag.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlLabelAttributes));
        labelTag.InnerHtml = checkbox.ToString() + text;

        return new MvcHtmlString(labelTag.ToString());
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-06T14:48:36.403

而不是像这样直接渲染 LabelFor 方法的返回值：

```
@Html.LabelFor(m => m.Prop, "Text <a>HTML Tag</a>") 
```

首先将输出设置为 decode 的变量和解码文本的渲染：

```
MvcHtmlString label = Html.LabelFor(m => m.Prop, "Text <a>HTML Tag</a>");
@Html.Raw(HttpUtility.HtmlDecode(label.ToString())) 
```

# c# - C# 监听 TCP 端口

> ID：10626902
> 
> 赞同：3
> 
> 时间：2012-05-16T21:21:02.047
> 
> 标签：c#, tcp, tcplistener

我想监听一个 TCP 端口。场景：

SIP 服务器和客户端程序。SIP 服务器可以使用 5010 端口来监听和建立多个连接。客户端通过端口 5010 从他的电脑连接到服务器。

当在该端口上接收到数据包时，必须在客户端 PC 上触发事件。

任何想法从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T21:23:16.323

假设您在 .NET 中工作，请查看 TcpClient 和 TcpListener。

[这是关于 TcpListener 的 MSDN 文档： https](https://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener(v=vs.110).aspx) ://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener(v= vs.110).aspx

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:24:27.907

从[TcpListener 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener%28v=vs.100%29.aspx)MSDN 主题开始。它甚至包含对您有帮助的示例。

# css - 如何在图像上放置表单并在 CSS 中正确调整大小？

> ID：10626903
> 
> 赞同：0
> 
> 时间：2012-05-16T21:21:23.617
> 
> 标签：css, responsive-design

我正在尝试创建一个自定义小部件，将通过电子邮件表单订阅的 Feedburner 放在响应式主题中的图像（背景）之上。现在我用于背景的图像没有正确显示。小部件现在主要有两个问题。一，图像在小部件本身内没有正确调整大小。第二，当浏览器调整大小时，背景图像的大小调整不正确。

[如果您一直向下滚动到此页面](http://noahsdad.com/)边栏的底部，您可以看到我正在处理的自定义小部件。

这是我用来创建小部件的代码。

```
<form style="border:1px solid #ccc;padding:3px;text-align:center;background: url(http://wpdallas.com/plain/wp-content/uploads/2012/04/noah-side-bar.jpg);" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('http://feedburner.google.com/fb/a/mailverify?uri=noahsdad', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
    <p>
        <input type="text" style="width:200px;height:20px;" name="email" onblur="if (this.value == '') {this.value = 'Enter your email address';}" onfocus="if (this.value == 'Enter your email address') {this.value = '';}" value="Enter your email address"/>
    </p>
    <input type="hidden" value="noahsdad" name="uri"/><input type="hidden" name="loc" value="en_US"/>
    <input type="submit" value="Subscribe" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:44:53.987

您应该为表单尝试这个样式表，并且在每个显示分辨率上都会看起来不错。

```
border: 1px solid #CCC;
padding: 3px;
text-align: center;
background: #f09e30 url(http://wpdallas.com/plain/wp-content/uploads/2012/04/noah-side-bar.jpg) no-repeat left bottom;
padding: 35% 0; 
```

# php - PHP 原子内存缓存

> ID：10626904
> 
> 赞同：4
> 
> 时间：2012-05-16T21:21:36.057
> 
> 标签：php, memcached

我想知道在我的网络应用程序中使我的 Memcache 操作 atmoic 的最佳方法是什么。

考虑以下场景：

```
Client 1 connects and retrieves data from key 1
Client 2 connects a few microsecond after Client 1, requests the same data from key 1
Client 1 saves new data to key 1
Client 2 saves new (different data) to key 1, not taking into account that Client 1 modified the value already 
```

在这种情况下，进程中没有原子性。

我的（潜在的）解决方案是在我的应用程序中设置、获取和释放键上的锁。

因此，在我实施之后，上述过程将像这样工作：

```
Client 1 connects, checks for an active lock on key 1, finds none, and gets the data
Client 2 connects a few microsecond after Client 1, requests the same data from key 1, but finds a lock
Client 2 enters a retry loop until Client 1 releases the lock
Client 1 saves new data to key 1, releases the lock
Client 2 gets the fresh data, sets a lock on key 1, and continues 
```

想法？这种方法会奏效吗？我应该提防任何性能问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:49:05.557

考虑一下您要在这里解决的问题。你：

1.  只是想避免丢失更新问题。（例如，使用递增一的计数器。）
2.  或者您确实*需要确保**当*一个客户端检索到一个项目的值时，没有其他客户端可以使用该值？（这是价值代表有限资源的地方。）

 *大多数时候人们只想要（1）。如果这就是你想要的，你可以使用检查和设置语义[`Memcached::cas()`](http://www.php.net/manual/en/memcached.cas.php)，或者如果你有一个简单的整数值，你可以使用原子[`Memcached::increment()`](http://www.php.net/manual/en/memcached.increment.php)和[`Memcached::decrement()`](http://www.php.net/manual/en/memcached.decrement.php)操作。

但是，如果您需要使用密钥来表示有限资源 (2)，请考虑使用一组不同的语义：

```
$keyname = 'key_with_known_name_representing_finite_resource';

// try to "acquire" the key with add().
// If the key exists already (resource taken), operation will fail
// otherwise, we use it then release it with delete()
// specify a timeout to avoid a deadlock.
// timeout should be <= php's max_execution_time
if ($mcache->add($keyname, '', 60)) {
   // resource acquired
   // ...do stuff....
   // now release
   $mcache->delete($keyname);
} else {
   // try again?
} 
```

如果由于某种原因您无权访问`cas()`，您可以使用两个键和`add()`/`delete`

```
$key = 'lockable_key_name';
$lockkey = $key.'##LOCK';

if ($mcache->add($lockkey, '', 60)) { // acquire
    $storedvalue = $mcache->get($key);
    // do something with $storedvalue
    $mcache->set($key, $newvalue);
    // release
    $mcache->delete($lockkey);
} 
```

与使用检查和设置方法相比，这种方法会导致更多的资源争用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:30:31.110

有一个内置功能可以为您解决这个问题。您正在寻找的是 CAS（检查并设置）。

> “cas”是一个检查和设置操作，意思是“存储这些数据，但前提是自从我上次获取它以来没有其他人更新。” ^([1](http://code.sixapart.com/svn/memcached/trunk/server/doc/protocol.txt))

当您尝试存储先前已由另一个进程更新的数据时，调用`set`将失败，因此您可以决定是否需要重新获取数据、无论如何存储或退出。

有关更多信息，请参阅[Memcached::cas()](http://php.net/manual/en/memcached.cas.php)。

希望有帮助。*

# c# - Linq按名字姓氏分组并从子数组中选择

> ID：10626905
> 
> 赞同：1
> 
> 时间：2012-05-16T21:21:46.217
> 
> 标签：c#, .net, linq

我正在使用实体框架并在数据库上执行查询，该数据库返回一家公司，而该公司又每个公司有很多联系人。

我有两种情况，我想对具有相同名字和姓氏的 MyContacts 进行分组。

虽然我可以遍历存储结果的新对象数组，但我使用的是实体框架，并且必须多次加载数据会很慢，所以如果可能的话，我更愿意在结果集。

计划是我可以遍历结果数组，对 MyContacts 对象进行更改，并将对象更新到 EF 存储库中。

第一种情况是按名称对联系人列表进行分组，但我不确定如何在不创建新类数据集的情况下进行分组。

第二种情况更复杂，我有一个 MyAccounts 列表（每个都有一个 MyContacts 列表），我想返回所有列表的 MyContacts，按名字和姓氏分组，并尽可能返回原始类。

非常感谢，克里斯。

**我已经删除了数据访问，并在下面做了一个简单的例子：**

```
class MyAccount
{
    public string accountName { get; set; }
    public List<MyContact> Contacts { get; set; }
}

class MyContact
{
    public string firstname { get; set; }
    public string lastname  { get; set; }
}

MyContact contactA = new MyContact() { firstname = "Chris", lastname = "b", ID = 100 };
MyContact contactB = new MyContact() { firstname = "Chris", lastname = "b", ID = 101 };
MyContact contactC = new MyContact() { firstname = "Peter", lastname = "Bread", ID = 102 };
MyContact contactD = new MyContact() { firstname = "James", lastname = "apple", ID = 103 };
MyContact contactE = new MyContact() { firstname = "Richard", lastname = "Brian", ID = 104 };
MyContact contactF = new MyContact() { firstname = "James", lastname = "apple", ID = 105 };

List<MyContact> contacts = new List<MyContact>();
contacts.AddRange(new MyContact[] { contactA, contactB, contactC, contactD, contactE, contactF } );
// how do i get a list of items, grouped by same first and lastname?

MyAccount companyA = new MyAccount() { accountName = "CompanyA", Contacts = new List<MyContact>() };
companyA.Contacts.AddRange(new MyContact[] { contactA, contactB, contactC });
MyAccount companyB = new MyAccount() { accountName = "CompanyB", Contacts = new List<MyContact>() };
companyB.Contacts.AddRange(new MyContact[] { contactA, contactB, contactC });
MyAccount companyC = new MyAccount() { accountName = "CompanyB", Contacts = new List<MyContact>() };
companyB.Contacts.AddRange(new MyContact[] { contactA, contactB, contactC, contactD, contactE });
List<MyAccount> companyList = new List<MyAccount>(new MyAccount[] { companyA, companyB, companyC });
// from the companyList, is there any way to get a list of MyContact types grouped by duplicate first and lastname? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:26:49.127

尝试这个...

```
 var result = from c in contacts
                 group c by new { c.firstname, c.lastname } into g
                 select g.ToList();

    var result1 = from c in companyList.SelectMany(company => company.Contacts)
                  group c by new { c.firstname, c.lastname } into g
                  select g.ToList(); 
```

现在你得到了列表的 IEnumerable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:12:52.487

首先，如果您打算拥有大量数据，我强烈建议您使用`HashSet`而不是`List`. 主要区别在于`HashSet`碰撞测试（搜索重复属性）的速度为 O(1)，而如果使用`List`，它使用 O(n) 算法。据我了解，您的最终目的是合并不同地址簿的列表并获得独特的价值。如果要合并两个列表并仅获取唯一值，请使用 linq 的`Union`函数，如果您只想获取两个列表中重复的值，请使用`Instersect`

# asp.net-mvc - 如何将此 aspx 片段转换为剃刀？

> ID：10626910
> 
> 赞同：0
> 
> 时间：2012-05-16T21:22:09.753
> 
> 标签：asp.net-mvc, razor

我对 Aspx 很满意，对剃须刀不太满意。但我正在做一个需要剃刀的项目，我正在为这种转换而苦苦挣扎。有人可以写这个，所以它是剃刀友好的吗？在某些剃刀示例中，您似乎不必声明 lambda 表达式，而其他示例则使用 @`<text>`或 @:。我很混乱。

```
 <%
            Html.Telerik()
                .ListView(productsToShow)
                .Name("AmazonProducts")
                .PrefixUrlParameters(false)
                .BeginLayout(pager =>
                                {%>
                                <table cellpadding="0" cellspacing="0">
                                <%})
                .BeginGroup(() =>
                                {%>
                                <tr>
                                <%})
                .Item(model =>
                                { %>
                                <td>
                                   ...stuff...
                                </td>
                                <%})
                .EmptyItem(() =>{%><%})
                .EndGroup(() =>
                                {%>
                                </tr>
                                <%})
                .EndLayout(pager =>
                                {%>
                                </table>
                                <%})
                                .GroupItemCount(2)
                                .PageSize(productsToShow.Count)
                                .Render();
    %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T23:07:02.800

您所要做的就是替换`<%`with`@{`和`%>`with `}`，这应该可以正常工作。`@text`我同意@Erik 的观点，Stack Overflow 不是代码翻译服务，所以也许下次尝试用不同的方式重新表述您的问题（例如“Razor和Razor之间有什么区别`@:`，以及如何指定代码块？”）。

如果您想很好地介绍 Razor，请尝试 Scott Guthrie 对 Razor 的精彩介绍：

[http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

如果你想了解我为什么 Razor 比 ASPX 更好，以及为什么你应该使用它，你可以阅读我在这里写的关于它的博客文章：

[http://blogs.popart.com/2011/06/razor-is-better/](http://blogs.popart.com/2011/06/razor-is-better/)

# php - mysql，如何查询表的评论？

> ID：10626911
> 
> 赞同：2
> 
> 时间：2012-05-16T21:22:14.320
> 
> 标签：php, mysql, comments

我没有找到任何关于这种情况的信息，这是我的问题。

在数据库中创建字段后，我还可以为该特定字段留下评论，也许是对该字段含义的描述等。

我想在它之后查询。

如果可能的话，有什么想法吗？我可以使用类似的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T21:26:28.337

查询 information_schema 数据库中的 COLUMNS 表。

```
SELECT a.COLUMN_NAME, a.COLUMN_COMMENT
FROM  information_schema.COLUMNS a 
WHERE a.TABLE_NAME = 'YOUR_TABLE_NAME' 
```

您可以对数据库中的任何类型的元素（即表、触发器等）执行类似的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-03T16:05:26.497

我喜欢这样做——既好又简单：

```
SHOW FULL COLUMNS FROM tablename; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:56:08.647

另一种选择是执行`SHOW CREATE TABLE mytable`查询。列注释包含在输出中，以及有关数据类型、最大长度、索引、外键等的各种其他有用信息。

这个解决方案应该适合在 SQL 中使用数据库的人。

例如，如果您打算提取列注释以在应用程序中使用，那么对 information_schema.columns 表的查询（如 garnertb 的答案中所提供）将返回一个更易于以编程方式处理的结果集。我还将在 table_schema 列上指定一个谓词，因为 table_name 可能出现在多个数据库中。

# php - Wordpress 管理员自定义字段

> ID：10626912
> 
> 赞同：2
> 
> 时间：2012-05-16T21:22:15.760
> 
> 标签：php, wordpress

我正在尝试使用文件 user-edit.php 在 wordpress 的管理区域中添加自定义文本区域

我已经在正确的位置添加了 textarea 并且已经尝试在数据库的 wp_usermeta 中添加一个新条目，它成功地回显到我的文本框中。

**此代码有效**

```
<tr>
    <th><label for="user_ad">Ad Code</label></th>
    <td><textarea name="user_ad" id="user_ad" rows="5" cols="30"><?php echo esc_attr($profileuser->user_ad) ?></textarea>
    </td>   
</tr> 
```

但是...提交表单时，我无法更新此新文本区域的 wp_usermeta。

我试过用，

```
update_user_meta( $user_id, 'user_ad', $_POST['user_ad'] ); 
```

但这不起作用，我知道它很接近，因为它用空白覆盖了当前的 meta_value。由于某种原因，$_POST 变量没有被传递，我不知道为什么。我对wordpress没有那种经验，所以我可能会忽略一些东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:35:08.113

这篇博文详细介绍了实现您所追求的一种方法......

[http://justintadlock.com/archives/2009/09/10/adding-and-using-custom-user-profile-fields](http://justintadlock.com/archives/2009/09/10/adding-and-using-custom-user-profile-fields)

我可能误解了你的问题，但听起来很像你修改了 user-edit.php 文件。

您真的不想编辑该页面 - 它是 WordPress 核心的一部分。升级 WordPress 时，您所做的任何更改都将被覆盖。

WordPress 提供了挂钩，因此您不必编辑文件。诚然，钩子在这种情况下并不是特别有用，但它仍然是你应该这样做的方式。这就是上面链接的博客文章的处理方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T21:33:55.363

我怀疑你得到一个空值：

试试这个代码：

```
if($_POST['user_ad'] != '') {
  $userAd = $_POST['user_ad'];
  update_user_meta( $user_id, 'user_ad', $userAd );
} 
```

然后检查您是否仍然让这个空字段在数据库中被覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T00:00:43.573

这不是您问题的直接答案，但您暗示您正在尝试对核心文件进行黑客攻击......如果是这样，您肯定需要一个插件。

我最近发现了这个，它非常适合添加各种自定义用户元：
[Cimy User Extra Fields](http://wordpress.org/extend/plugins/cimy-user-extra-fields/screenshots/)。

如果您确实修改了核心文件，请按照此说明将您的 WordPress 文件恢复到原始状态。 [http://codex.wordpress.org/Updating_WordPress#Manual_Update](http://codex.wordpress.org/Updating_WordPress#Manual_Update)

[否则，在wordpress.stackexchange](https://wordpress.stackexchange.com/search?q=update_user_meta&submit=search)中有很多关于这些问题的答案。

# javascript - Android 4.0.3 Web浏览器是否支持Web SQL数据库

> ID：10626913
> 
> 赞同：0
> 
> 时间：2012-05-16T21:22:18.037
> 
> 标签：javascript, android, web-sql

我有一个在早期版本的 Android 上运行的网络应用程序，但在 Android 4.0.3 (HTC 1x) 上运行时似乎有问题，即 openDatabase javascript 函数是“未定义”，是否支持这个 api？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T01:47:14.223

我认为这个问题的答案是“这取决于设备”。我一直在尝试解决在 iOS 和一些 Android 设备上运行良好但在其他设备上运行良好的网络应用程序的问题，我们已经看到一些 4.0.3、一些 4.0.4 和一些 2.3.x 的问题（到目前为止，我们尝试过的一个 2.2.x 设备运行良好）。我花了数周时间试图提出一个客户端解决方案，但我认为可能没有。奇怪的是，即使您没有对数据库进行版本控制，在某些设备中操作数据库版本似乎也会有所改变，但这并不能解决问题。更改 maxSize 也不会。

WebSQL 已被弃用，谁知道它是否会继续支持跨设备，所以我认为最好的策略是使用某种抽象（如 Lawnchair），或者现在使用 localstorage/sessionstorage，或者将来使用 indexedDB。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T21:54:57.650

是的，当然，我在 Android 2.2 上使用它，所以我认为 4.0.x 也兼容它......

你能发布你的Javascript代码吗？

```
var db = openDatabase(shortName, version, displayName, maxSize); 
```

# html - 如何打开现有的 WebSQL 数据库？

> ID：10626918
> 
> 赞同：2
> 
> 时间：2012-05-16T21:23:02.770
> 
> 标签：html, cordova, web-sql

我正在构建一个 HTML5/Phonegap 移动应用程序，我想通过 WebSQL 使用现有的 SQLite 数据库。通过“现有”数据库，我的意思是我已经在应用程序之外创建了 db.sqlite 文件。我这样做是因为有几个表并且它预先填充了一些数据。我想做的就是把这个 db 文件复制到我的项目中，并能够像这样用 Javascript 打开它：

```
var db = openDatabase('mydb', '1.0', 'my first database', 2 * 1024 * 1024); 
```

似乎此命令仅创建一个新数据库或打开使用此命令创建的现有数据库。如果可以打开在我的应用程序之外创建的数据库，我该如何打开它？如何设置数据库路径、文件名等？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:29:01.217

WebSQL 有这个问题。打开没有版本的数据库，然后进行版本迁移，例如：

```
var db = openDatabase('mydb', '', 'my first database', 2 * 1024 * 1024);

if (db.version != '1.0) {
   ...
} 
```

# php - php/MySQL - 表总是“损坏”的问题

> ID：10626923
> 
> 赞同：0
> 
> 时间：2012-05-16T21:23:20.523
> 
> 标签：php, mysql, optimization, storage-engines

我的服务器有一些问题，我需要改进它。

首先，每 2 小时，我在 MyISAM 表中插入/更新/删除大约 100 万个结果（即所有表），并且在此期间必须可以从我的网站访问该表。

每月大约 1 次，我的网站不显示，并显示消息“无法连接到数据库”。当我重新启动服务器时，我可以看到这个表必须被修复。

有没有办法防止我的桌子“坏”或自动修复它？我应该将引擎更改为 innoDB 吗？为什么？

其次，在此操作期间，我的网站真的很慢，而且不仅是显示此表格结果的页面。

我可以完全访问我的服务器，但我不知道我在寻找什么......该操作是一项 19 的 cron 作业。

无论我在后台做什么，我都希望我的网站以相同的速度运行。我所做的操作大约需要一个小时才能执行，如果需要更多时间也没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:43:24.077

> 该操作是一项 cron 作业，nice 为 19。

以低优先级运行作业没有多大意义。

> 每 2 小时，我插入/更新/删除大约 100 万个结果（这就是所有表格）

这是很多数据。您真正突破了系统功能的极限。至于如何解决这个问题......尝试使用innodb真的需要付出多少努力？恕我直言，不如在这里发帖，等待答案并尝试一下。

您还可以尝试许多其他事情——比如针对表的影子副本运行 cron 作业并将其交换为前端访问的表的位置（但就其本身而言，这并不能解决损坏问题）。

当然，我在对 MyISAM 表执行大量删除操作时遇到了问题。

我怀疑可能有很多方法可以解决这个问题——但你没有给出太多说明为什么你需要如此高的数据周转率；因为我怀疑您的用户正在查看您正在更改的所有记录的详细信息，所以我怀疑最大的收获是在数据到达数据库之前整合数据。

> 它不仅是显示此表格结果的页面。

即使您禁止通过 cron 作业和前端 URL 访问快速流动数据？那是一个完全不同的问题。

# javascript - Using Tooltips with link_to (Ruby on Rails 3.2.3)

> ID：10626924
> 
> 赞同：7
> 
> 时间：2012-05-16T21:23:23.500
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap

I have been successful in creating a tooltip for text using code similar to:

```
<a href="#" rel="tooltip" title="something">text on page</a> 
```

However I would like to do a tooltip for a link defined in a menu using the link_to command. I have included the statement I would like a tooltip to appear for:

```
<li><i class="icon-edit"></i>&nbsp;<%= link_to current_user.first_name+' '+current_user.last_name, edit_user_path(current_user) %></li> 
```

Here is the JS code in bootstrap.js.coffee:

```
$(".tooltip").tooltip()
$("a[rel=tooltip]").tooltip() 
```

I am a student still learning a lot about Rails, Twitter Bootstrap, CSS3, HTML5, etc. I have done many web searches but have not found any examples of this that I understood. Basically there is nothing that says directly that I can do a tooltip within a link_to statement that worked.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-16T21:36:06.527

This way:

```
link_to 'Text', '/link', title: 'some title', rel: 'tooltip' 
```

**update:**

It's ruby 1.9 syntax. For 1.8 it would be

```
link_to 'Text', '/link', :title => 'some title', :rel => 'tooltip' 
```

# sql-server - 通过 SQL Server 发送电子邮件失败

> ID：10626926
> 
> 赞同：4
> 
> 时间：2012-05-16T21:23:29.107
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我正在设置数据库邮件`SQL Server 2008`以将邮件发送到我的 Gmail 帐户。以下是`DBMail`我创建的配置文件的详细信息：

```
email id : xyz@gmail.com
Display Name : xyz
Reply email :
Server name : smtp.gmail.com
port no: 587
Check : This server requires a secure connection
Check : Basic Authentication
username : xyz@gmail.com ( should have gmail.com)
password : <mypassword>
confirm password : <mypassword> 
```

然后我单击下一步并将其设为默认公共配置文件。

然后我使用以下`TSQL`代码来配置和发送`DBMail`：

```
EXEC sp_CONFIGURE 'show advanced', 1
GO
RECONFIGURE
GO
EXEC sp_CONFIGURE 'Database Mail XPs', 1
GO
RECONFIGURE
GO

use msdb
go
EXEC sp_send_dbmail 
@profile_name='XYZ',
@recipients='XYZr@gmail.com',
@subject='Test message',
@body='Message Sent Successfully'

The output appears "Message Queued" 
```

我的消息仍然失败。我觉得我已经正确设置了服务器。任何输入将不胜感激。

```
 SELECT * FROM sysmail_log 
```

正文栏显示

> “由于邮件服务器故障，无法将邮件发送给收件人。（使用帐户 1 发送邮件（2012-05-16T17:05:00）。异常消息：无法连接到邮件服务器。（没有这样的主机是已知）。）”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T21:36:19.407

一些建议的故障排除步骤：

1.  尝试使用与 SQL Server 相同的机器，使用 Outlook 等客户端邮件程序，通过同一 SMTP 服务器发送消息。您可能会收到更有意义的错误消息。

2.  端口可能被阻塞。尝试使用端口 587 将邮件发送到任何其他 SMTP 服务器。

3.  尝试更改为端口 465。

4.  尝试取消选中您个人资料中的“需要安全连接”位。

5.  尝试使用网络中的 SMTP 服务器中继到 GMail。这可能更容易设置和运行。如果您没有可用于处理中继的本地 SMTP 服务器，则需要安装 IIS 和 SMTP 组件。

6.  查看[http://mail.google.com/support/bin/answer.py?hl=en&answer=13287](http://mail.google.com/support/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-03T03:06:53.527

如果您使用的是 GMAIL，请注意以下额外步骤：

*   在数据库邮件中配置电子邮件后，请登录您的 gmail 帐户并转到

    [https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)

打开您不太安全的应用程序以使用您的帐户，这就是数据库邮件可以访问您的 gmail SMTP 帐户的方式。

尝试使用以下代码发送测试邮件：

```
 USE msdb
    GO
    EXEC sp_send_dbmail @profile_name='XXX', -- Your profile name
    @recipients='abc@yahoo.com', -- Recipient's email address
    @subject='Test message',
    @body='This is the body of the test message.' 
```

最后，尝试运行以下查询以查看其是否已发送

```
 SELECT * FROM sysmail_log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-06T01:39:54.250

错误“No such host is known”表示 DNS 问题，您提供给 sysmail_add_account_sp 的 @mailserver_name 无法解析。

我收到此错误是因为我最初使用 @mailserver_name 参数调用 sysmail_add_account_sp 时使用了一个意外有前导空格的字符串。按照下面第 2 项中所述重置服务器名称而不使用前导空格解决了我的问题。

试试这些东西：

1.  使用以下命令仔细检查服务器名称：SELECT servername FROM sysmail_server
2.  尝试使用以下命令重置服务器名称：EXEC dbo.sysmail_update_account_sp @account_name = '(your account name)', @mailserver_name = '(your server name)'
3.  尝试 ping 服务器名称，看名称是否解析为 IP 地址（服务器无需响应 ping，您只需要查看返回的 IP 地址即可）
4.  尝试使用 IP 地址代替服务器名称，看看是否可以解决错误（这将绕过您可能遇到的任何 DNS 问题）

# javascript - Firefox 在子级而不是父级中加载 window.opener 地址

> ID：10626927
> 
> 赞同：0
> 
> 时间：2012-05-16T21:23:47.780
> 
> 标签：javascript, firefox, window.opener

我有一个上传器，它在文件管理器的单独窗口中打开。上传完成后页面重新加载并且上传成功服务器返回html

```
<html>
<body>
    <script>
        window.opener.location.reload(); 
        self.close;
    </script>
</body>
</html> 
```

这是为了刷新文件管理器。它适用于 IE 8 和 9，但在 Firefox 中，子窗口似乎加载父窗口的地址，而不是重新加载父窗口。

# php - 在 Imagemagick 中设置图像质量

> ID：10626939
> 
> 赞同：1
> 
> 时间：2012-05-16T21:24:36.893
> 
> 标签：php, image, imagemagick

我设置了 img 的质量，但它不起作用。

```
 $image = 'the path to the img';
 /*** a new imagick object ***/
        $im = new Imagick();

        /*** ping the image ***/
        $im->pingImage($image);

        /*** read the image into the object ***/
        $im->readImage( $image );

        $im->setImageFormat( "png" );

        $im->setImageCompression(imagick::COMPRESSION_JPEG);
        $im->setImageCompressionQuality(1);
        $im->stripImage();

        $im->cropThumbnailImage(90,90);

        /*** write image to disk ***/
        $im->writeImage( "tmp/spork1.png" );

        $im->destroy(); 
```

我尝试使用 `$im->setCompressionQuality(1);`但效果不佳，然后我用谷歌搜索它，有些人建议使用`$im->setImageCompressionQuality(1);`但没有任何效果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:56:14.140

我不确定您是否可以在 PNG 等无损格式上调整压缩，我相信这是针对 JPEGS 的。

在您的代码中，您将图像类型设置为 png 并将压缩类型设置为 jpeg 我很确定这不会起作用。

也许尝试：

```
$im->setImageCompression(Imagick::COMPRESSION_LZW);

$im->setImageCompressionQuality(3); 
```

您可能希望使用 optipng 或 pngcrush 来减小文件大小...

# java - 无法通过 EditText 接受整数值

> ID：10626940
> 
> 赞同：1
> 
> 时间：2012-05-16T21:24:48.783
> 
> 标签：java, android

我一直在尝试通过 EditText 接受两个值，1) inpval2 和 2) rate。我已经使用了 Integer 类和 parseInt() 方法以及

`android:digits="0123456789." android:inputType="number"` 将接受的值转换为整数的属性。

这是代码：

```
package kk.currency;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class CurrencyActivity extends Activity {
/** Called when the activity is first created. */

EditText inpval1;
EditText inpval2;
EditText rate;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void btnclick(View view)  {

        inpval1 = (EditText)findViewById(R.id.away);
        int v1 = Integer.parseInt(inpval1.getText().toString());

        inpval2 = (EditText)findViewById(R.id.home);
        int v2 = Integer.parseInt(inpval2.getText().toString());

        rate = (EditText)findViewById(R.id.rate);
        int r = Integer.parseInt(rate.getText().toString());  

        v1 = v2 * r;

    }

} 
```

现在的问题是，当我单击按钮 (onClick = "btnclick") 时，应用程序停止工作。

如果我删除

```
int v1 = Integer.parseInt(inpval1.getText().toString());
int v2 = Integer.parseInt(inpval2.getText().toString());
int r = Integer.parseInt(rate.getText().toString()); 
```

单击按钮后应用程序不会崩溃。

以下是 logcat 错误：

```
> 05-17 02:59:04.676: D/gralloc_goldfish(869): Emulator without GPU emulation detected.
05-17 02:59:13.907: D/AndroidRuntime(869): Shutting down VM
05-17 02:59:13.907: W/dalvikvm(869): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-17 02:59:13.946: E/AndroidRuntime(869): FATAL EXCEPTION: main
05-17 02:59:13.946: E/AndroidRuntime(869): java.lang.IllegalStateException: Could not execute method of the activity
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.view.View$1.onClick(View.java:3044)
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.view.View.performClick(View.java:3511)
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.view.View$PerformClick.run(View.java:14105)
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.os.Handler.handleCallback(Handler.java:605)
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.os.Looper.loop(Looper.java:137)
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.reflect.Method.invokeNative(Native Method)
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.reflect.Method.invoke(Method.java:511)
05-17 02:59:13.946: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-17 02:59:13.946: E/AndroidRuntime(869):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-17 02:59:13.946: E/AndroidRuntime(869):  at dalvik.system.NativeStart.main(Native Method)
05-17 02:59:13.946: E/AndroidRuntime(869): Caused by: java.lang.reflect.InvocationTargetException
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.reflect.Method.invokeNative(Native Method)
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.reflect.Method.invoke(Method.java:511)
05-17 02:59:13.946: E/AndroidRuntime(869):  at android.view.View$1.onClick(View.java:3039)
05-17 02:59:13.946: E/AndroidRuntime(869):  ... 11 more
05-17 02:59:13.946: E/AndroidRuntime(869): Caused by: java.lang.NumberFormatException: Invalid int: ""
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.Integer.invalidInt(Integer.java:138)
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.Integer.parseInt(Integer.java:359)
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.Integer.parseInt(Integer.java:332)
05-17 02:59:13.946: E/AndroidRuntime(869):  at kk.currency.CurrencyActivity.btnclick(CurrencyActivity.java:24)
05-17 02:59:13.946: E/AndroidRuntime(869):  ... 14 more 
```

谁能帮我解决这个问题？我是一个初学者，花了很多时间来尝试找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T21:38:20.843

这是你的问题：

```
05-17 02:59:13.946: E/AndroidRuntime(869): Caused by: java.lang.NumberFormatException: Invalid int: "" 
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.Integer.invalidInt(Integer.java:138) 
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.Integer.parseInt(Integer.java:359) 
05-17 02:59:13.946: E/AndroidRuntime(869):  at java.lang.Integer.parseInt(Integer.java:332) 
05-17 02:59:13.946: E/AndroidRuntime(869):  at kk.currency.CurrencyActivity.btnclick(CurrencyActivity.java:24) 
05-17 02:59:13.946: E/AndroidRuntime(869):  ... 14 more 
```

该行`at kk.currency.CurrencyActivity.btnclick(CurrencyActivity.java:24)`告诉您，在 CurrencyActivity.java 文件中的第 24 行，由于 int 无效，即空字符串“”，它抛出了 NumberFormatException。这意味着您单击其中一个字段为空，并且它试图将“”解析为整数并在失败时抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T21:28:16.550

您应该发布 logcat 错误，以便我们为您提供更多帮助。

有两件事可能会导致您的崩溃：

1.）您无法将输入解析为整数（超出范围的值？正在解析的文本？十进制值？）

或者

2.) 您的 findViewById 调用返回 null，当您调用`inpval1.getText().toString()`它时抛出 NullPointerException

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T21:54:40.897

```
String s1 = inpval1.getText().toString();
String s2 = inpval2.getText().toString();
String s3 = rate.getText().toString();

int v1=Integer.parseInt(s1);
int v2=Integer.parseInt(s2);
int r = Integer.parseInt(s3); 
```

# asihttprequest - ASIHttPRequest didReceiveData-如何填充 responseData、responseString？

> ID：10626941
> 
> 赞同：0
> 
> 时间：2012-05-16T21:24:57.937
> 
> 标签：asihttprequest

我正在为一种类型的请求设置委托并实现 didReceiveData，但对于其他类型的请求，我只想能够设置 responseData，就像在常规情况下发生的那样。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:55:54.820

为您的函数使用“didReceiveData”以外的名称，并使用 request.didReceiveDataSelector = @selector(yourSelector); 当您创建需要 didReceiveData 信息的请求时。

# list - Haskell：在列表和元组之间

> ID：10626943
> 
> 赞同：15
> 
> 时间：2012-05-16T21:25:07.577
> 
> 标签：list, math, haskell, functional-programming, tuples

我想要一个`+++`添加两个数学向量的函数。

我可以将向量实现为`[x, y, z]`并使用：

```
(+++) :: (Num a) => [a] -> [a] -> [a]
(+++) = zipWith (+) 
```

因此可以容纳任何*n*维向量（所以这也适用`[x, y]`）。

或者我可以将向量实现为`(x, y, z)`并使用：

```
type Triple a = (a, a, a)

merge :: (a -> b -> c) -> Triple a -> Triple b -> Triple c
merge f (a, b, c) (x, y, z) = (f a x, f b y, f c z)

(+++) :: (Num a) => Triple a -> Triple a -> Triple a
(+++) = merge (+) 
```

当然，这稍微复杂一些，但是当我实现所有其他向量函数时，这是无关紧要的（50 行而不是 40 行）。

列表方法的问题是我可以将 2D 向量与 3D 向量相加。在这种情况下，`zipWith`只需切断 3D 矢量的`z`分量。虽然这可能是有道理的（更有可能它应该将 2D 向量扩展为`[x, y, 0]`），但对于其他功能，我认为无论是静默发生都可能是有问题的。元组方法的问题在于它将向量限制为 3 个分量。

直观地说，我认为将向量表示为 更有意义`(x, y, z)`，因为数学向量具有固定数量的分量，并且将分量添加到向量中并没有真正意义。

另一方面，虽然我不太可能需要除 3D 矢量以外的任何东西，但将其限制在此似乎不太正确。

我想我想要的是具有两个相等长度的列表的函数，或者更好的函数，这些函数对任意大小的元组进行操作。

在实用性、可扩展性、优雅等方面有什么建议*吗？*

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-16T22:19:11.353

您可以使用类型级编程。首先，我们需要使每个自然数成为一个单独的类型。遵循 Peano 对自然数的定义，`Z`is`0`和`S x`is`x + 1`

```
data Z = Z
data S a = S a

class Nat a
instance Nat Z
instance (Nat a) => Nat (S a) 
```

现在我们可以使用一个类型`Vec`来简单地包装一个列表，但是通过使用来跟踪它的大小`Nat`。为此，我们使用[智能构造函数](http://www.haskell.org/haskellwiki/Smart_constructors) `nil`和`<:>`（所以你不应该`Vec`从你的模块中导出数据构造函数）

```
data Vec a = Vec a [Int]

nil = Vec Z []

infixr 5 <:>
x <:> (Vec n xs) = Vec (S n) (x:xs) 
```

现在我们可以定义一个`add`函数，它要求两个向量具有相同的`Nat`：

```
add :: Nat a => Vec a -> Vec a -> Vec a
add (Vec n xs) (Vec _ ys) = Vec n (zipWith (+) xs ys) 
```

现在你有了一个带有长度信息的向量类型：

```
toList (Vec _ xs) = xs
main = print $ toList $ add (3 <:> 4 <:> 2 <:> nil) (10 <:> 12 <:> 0 <:> nil) 
```

当然，这里有不同长度的向量会导致编译错误。

这是易于理解的版本，有更短、更高效和/或更方便的解决方案。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-16T21:58:20.283

最简单的方法是将`+++`运算符放在类型类中，并制作各种元组大小的实例：

```
{-# LANGUAGE FlexibleInstances #-}   -- needed to make tuples type class instances

class Additive v where
  (+++) :: v -> v -> v

instance (Num a) => Additive (a,a) where
  (x,y) +++ (ξ,υ)  =  (x+ξ, y+υ)
instance (Num a) => Additive (a,a,a) where
  (x,y,z) +++ (ξ,υ,ζ)  =  (x+ξ, y+υ, z+ζ)
... 
```

这样，可以添加可变长度元组，但在编译时将确保双方始终具有相同的长度。

* * *

将其概括为在实际类型类中使用类似您的函数`merge`也是可能的：在这种情况下，您需要将类实例指定为类型构造函数（如 list monad）。

```
class Mergable q where
  merge :: (a->b->c) -> q a -> q b -> q c

instance Mergable Triple where
  merge f (x,y,z) (ξ,υ,ζ) = (f x ξ, f y υ, f z ζ) 
```

然后简单地

```
(+++) :: (Mergable q, Num a) => q a -> q b -> q c
+++ = merge (+) 
```

不幸的是，这并不完全有效，因为类型同义词可能不会被部分评估。您需要创建`Triple`一个新类型，例如

```
newtype Triple a = Triple(a,a,a) 
```

进而

```
instance Mergable Triple where
  merge f (Triple(x,y,z)) (Triple((ξ,υ,ζ)) = Triple(f x ξ, f y υ, f z ζ) 
```

这当然不是很好看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T14:07:00.837

由于 OP 想要一种更轻量级的方法，我会使用关联类型。

```
class VecMath a b where
    type Res a b :: *
    (+++) :: a -> b -> Res a b

instance Num a => VecMath (a,a,a) (a,a,a) where
    type Res (a,a,a) (a,a,a) = (a,a,a)
    (x1,y1,z1) +++ (x2,y2,z2) = (x1+x2, y1+y2, z1+z2)

instance Num a => VecMath (a,a) (a,a,a) where
    type Res (a,a) (a,a,a) = (a,a,a)
    (x1,y1) +++ (x2,y2,z) = (x1+x2, y1+y2, z)

instance Num a => VecMath (a,a,a) (a,a) where
    type Res (a,a) (a,a,a) = (a,a,a)
    -- (+++) analog
instance Num a => VecMath (a,a) (a,a) where
    type Res (a,a) (a,a) = (a,a)
    -- ... 
```

`Res`是一个类型函数，这里本质上导致它的参数的“更大”类型。优点是您仍然可以使用普通的旧元组，就好像`VecMath`不存在一样。如果您考虑将新类型添加到`Res`. 有关更多信息，请参阅[此](http://www.haskell.org/haskellwiki/Type_families)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T22:53:20.743

Landei 和 leftaroundabout 的答案很好（感谢你们俩），我想我应该意识到这不会像我希望的那样简单。尝试执行我建议的任何一个选项都会产生复杂的代码，这本身不会成为问题，只是用户代码看起来也不是很漂亮。

我想我决定使用元组并坚持仅使用 3 维向量，仅仅是因为它在语义上似乎比使用列表更正确。不过，我最终要重新实现`map`,和其他三元组。我想坚持简单——我觉得好像我有一个令人信服的论点来将向量视为列表，那么这个解决方案会更好地工作（前提是我确保我不混合维度）......当我实际使用向量时，但是，函数将 3d 向量作为参数，而不是可变维度之一，并且不能强制执行。`zipWith``sum``Num a => [a]`

# git - 如何在私有 gitolite 服务器中镜像官方 Linux 内核树？

> ID：10626946
> 
> 赞同：3
> 
> 时间：2012-05-16T21:25:16.523
> 
> 标签：git, svn, linux-kernel, gitolite

我们使用嵌入式 ARM Linux 系统，并拥有一些基于 SBC 的产品，并由它们控制自定义硬件。因此，我们需要开发自定义内核驱动程序，有时还需要调整现有的驱动程序。自从我们开始使用 Subversion 以来，我们选择的策略是使用“供应商分支”来保留要使用的 vanilla 内核，然后为每个产品创建一个分支，在那里我们将为 SBC 应用所需的补丁并进行我们自己的修改，非常类似于[https://stackoverflow.com/q/2312984/1007502中的建议](https://stackoverflow.com/q/2312984/1007502)

值得庆幸的是，几个月前我们决定将我们的项目迁移到 git，因此我们设置了一个 gitolite 服务器，用于在开发团队之间共享项目，根据需要从 SVN 迁移项目，并且使用 git 变得更加舒适。在 Linux 内核的特殊情况下，我们认为可以选择使用我们的 gitolite 服务器作为远程来开发我们的项目很有趣，但我们希望能够从官方树中获取更新的内核并最终贡献一些东西当它达到允许的状态时返回。

在我自己的机器上，我可以看到如何 git clone 官方内核树并为我们的产品创建私有分支，根据需要将它们重新定位在较新的内核上（如[这里](https://stackoverflow.com/a/2313009/1007502)）；但我有点迷茫，我应该如何将官方内核树导入 gitolite，开发人员可以从它而不是官方内核存储库中推/拉，同时还能够使其与后者保持同步。

这是从我们机器上的官方树中获取更新并将它们推送回我们的私有 gitolite 服务器的问题，还是有更直接的方法？

**编辑：（澄清问题）**
主要问题是：虽然我知道如何初始化一个空存储库以将未跟踪的代码推送到 gitolite，但我不确定如何为我从另一个 git 存储库克隆的东西执行此操作，例如官方内核树。

一旦我在我的机器上克隆了它，将它移动到私有 gitolite 服务器的过程是什么？

那么，如何才能让这个现在“私有”的内核树与官方内核树保持同步呢？

这个想法是开发人员应该只推送到私有树，最终只发送补丁到官方树，如果有的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T22:09:47.207

克隆原始内核源代码：

```
git clone $KERNEL_URL 
```

为您的私人 gitolite 存储库添加一个远程，将其命名为 gitolite：

```
git remote add gitolite $GITOLITE_URL 
```

创建您的私人分支

```
git checkout -b our-branch 
```

将您的私有分支推送到您的私有 gitolite 存储库

```
git push gitolite our-branch 
```

你完成了。

> 这是从我们机器上的官方树中获取更新并将它们推送回我们的私有 gitolite 服务器的问题，还是有更直接的方法？

基本上就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T22:12:44.530

据我了解，您有 2 个感兴趣的遥控器：

*   主内核存储库（比如 Github 中的那个）
*   您的 gitolite 存储库

这其实很简单。您只需要在本地存储库（您可能已经为 gitolite 拥有）中添加两个遥控器，使用`git remote add ...`. 然后，您需要从一个远程获取东西，将它们与您的代码合并，如果您满意，请将其推送到另一个。这个过程与从 ​​vanilla 内核获取更新并应用于您自己的遥控器或其他方式完全相同......

...除了，您不能推送到不属于您的存储库（当然）。因此，当回馈原版内核时，您需要发送拉取请求并说服 Linus 或他的一位仆人接受您的请求。（注：Linus 不接受 github 拉取请求）

# ruby-on-rails - 使用存在优化查询

> ID：10626951
> 
> 赞同：0
> 
> 时间：2012-05-16T21:26:04.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何使用 EXISTS 而不是 IN 函数优化以下 mysql 查询？

```
Subscriber.first(:conditions => ["email IN(SELECT email from submissions WHERE url = ? AND confirmed != 0)", url], :order => "RANDOM()") 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:27:24.133

基于 sql 语法 for exists

```
EXISTS (SELECT email from submissions x WHERE url = ? AND confirmed != 0 AND x.email = email) 
```

# android - 在项目中使用 ActionBarSherlock 的问题

> ID：10626966
> 
> 赞同：1
> 
> 时间：2012-05-16T21:27:13.750
> 
> 标签：android, intellij-idea, actionbarsherlock

出于某种原因，我无法让 ActionBarSherlock 工作。我想我已经正确设置了它，但是当我尝试导入或使用它时，它并没有出现在智能感知中。除了将其作为模块包含之外，我还需要做些什么吗？

图片：

![在此处输入图像描述](../Images/dc722fd91602ec565ce07b1ff0deb24a.png)

![在此处输入图像描述](../Images/3e2af53eeea36b604474b2707e19176f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T23:05:26.550

您需要确保正确设置依赖项，主应用程序模块需要依赖库模块，并且不能对 jars 有重复的依赖项。

我已经使用为此库提供的演示[准备了一个示例项目。](http://www.sendspace.com/file/0g0ryg)解压，`samples/demos`在 IntelliJ IDEA 中打开，确保定义了 Android Platform 4.0，构建。

# c# - 当仅存在 3 个表时，SQL 数据适配器带回 4 个表的计数

> ID：10626971
> 
> 赞同：0
> 
> 时间：2012-05-16T21:27:39.047
> 
> 标签：c#, sql

我正在通过 SQL 数据适配器填充 ComboBox，并且遇到了适配器带回四个表计数的问题。这很奇怪，因为数据库中只有三个表，并且它正在用适当的行填充最终表 (ds.Tables[3]) 而不是初始表 (ds.Tables[0])。

以下代码不会填充 ComboBox（注意 cboCities.DataSource（倒数第二行））：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        // Establishes a connection to the database.
        SqlCeConnection cn = new SqlCeConnection(@"Data Source = C:\Users\user\Desktop\Projects\ParkSurvey WF\ParkSurvey WF\ParkSurvey.sdf; Persist Security Info = False; Password = *");
        cn.Open();
        // Gathering the names of cities from the Cities database to populate cboCities.
        SqlCeCommand cmd = cn.CreateCommand();
        cmd.CommandText = "SELECT CityId, Name FROM Cities ORDER BY Name ASC";
        SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        // Closing the connection and setting the data bindings for cboCities.
        cn.Close();
        cboCities.ValueMember = "CityId";
        cboCities.DisplayMember = "Name";
        cboCities.DataSource = ds.Tables[0];
        cboCities.SelectedIndex = -1;
    } 
```

这确实会适当地填充 ComboBox（再次注意 cboCities.DataSource）：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        // Establishes a connection to the database.
        SqlCeConnection cn = new SqlCeConnection(@"Data Source = C:\Users\user\Desktop\Projects\ParkSurvey WF\ParkSurvey WF\ParkSurvey.sdf; Persist Security Info = False; Password = *");
        cn.Open();
        // Gathering the names of cities from the Cities database to populate cboCities.
        SqlCeCommand cmd = cn.CreateCommand();
        cmd.CommandText = "SELECT CityId, Name FROM Cities ORDER BY Name ASC";
        SqlCeDataAdapter da = new SqlCeDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds);
        // Closing the connection and setting the data bindings for cboCities.
        cn.Close();
        cboCities.ValueMember = "CityId";
        cboCities.DisplayMember = "Name";
        cboCities.DataSource = ds.Tables[3];
        cboCities.SelectedIndex = -1;
    } 
```

是什么导致我的 DataAdapter 带回四个表而不是 JUST **Cities**，为什么它填充第四个表而不是初始表？如果您需要更多代码示例来帮助我解决此问题，请告诉我。非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:01:38.037

如果您填写 a`DataTable`而不是 a它应该可以工作，`DataSet`因为无论如何您只选择一个表格。

除此之外，我必须承认不知道这种行为的原因。

# drupal - Drupal 7 自定义导航菜单

> ID：10626973
> 
> 赞同：0
> 
> 时间：2012-05-16T21:28:03.920
> 
> 标签：drupal, menu, navigation

我们试图让 Drupal 允许我们根据与当前项目的关系将自定义 css 类放在菜单项上。通过这种方式，我们可以使用 CSS 隐藏和设置项目样式，因此菜单不会那么大。

我们希望能够区分： 第一级 - 总是显示不活跃的祖先 trail - 总是隐藏 Active_trail - 显示当前项目 - 显示兄弟姐妹 - 显示孩子 - 显示

规则是：

**一般导航规则**
导航时，您将始终看到“1 级”导航。
您将看到您所在页面的直接后代（面包屑）。您会看到您所在页面的兄弟姐妹。您会看到您所在页面的子项。注意：这不是手风琴导航。只有当您在页面上时，子级别才会可见。

**级别 1** 您只看到主页和导航的顶层。主页链接不显示。

**2 级** 当离开主页时，其链接将与“1 级”导航以及您所在页面的直接子级一起出现。

**第 3 级** 现在您可以看到所有第 1 级、所有第 2 级（兄弟）和您所在页面的子级（第 3 级）。这可以让您很好地了解在深入了解页面后通常会在网站上看到多少导航。

**第 4 级** 您一如既往地看到主页和第 1 级。您还可以看到您所在页面的祖先。因为您在第 3 级，所以您可以看到第 3 级的所有兄弟姐妹以及您所在页面的子级（第 4 级）。

**第 5 级** 您可以看到主页和第 1 级。您还可以看到您所在页面的祖先。因为您在第 4 级，所以您可以看到第 4 级的所有兄弟姐妹以及您所在页面的子级（第 5 级）。

**更新：**

我基本上能够完成我所需要的

```
function USZ_menu_link($variables) {
    $element = $variables['element'];
    $depth = sizeof(menu_get_active_trail()) -1; 
    static $item_id = 0;

    if(!$element['#below'] && !$element['#active_trail'] && $element['#original_link']['depth'] != "1" && $element['#original_link']['depth'] < $depth){
        $element['#attributes']['class'][] = 'hideme';      
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:11:04.020

无法理解您需要的所有内容，但我可以推荐[http://drupal.org/project/menu_position](http://drupal.org/project/menu_position)、[http://drupal.org/project/context](http://drupal.org/project/context)和[http://drupal.org/project/menu_block](http://drupal.org/project/menu_block)。

该模块将通过菜单帮助您完成大部分任务。上下文模块可以为菜单项添加类，菜单块使用自定义设置扩展菜单块（级别，包括树的括号项，也具有上下文集成），菜单位置有助于为不同的条件创建规则，并提供 API 来处理菜单您的自定义模块。

这只是一个意见，我认为知道这些模块可以做什么会有所帮助。

# excel - 删除使用 pdfTk 创建的 pdf 中的多个嵌入字体

> ID：10626977
> 
> 赞同：7
> 
> 时间：2012-05-16T21:28:30.360
> 
> 标签：excel, pdf, ghostscript, embedded-fonts, pdftk

有没有办法从pdf文件中删除多次嵌入的字体？

这是我的场景：

1）一个程序生成几个单页pdf报告（查询数据库，将信息放在excel模板上并将格式化信息导出为pdf）

2) pdftk 将单页 pdf 合并到一个文件中。

一切正常，但生成的 pdf 的大小非常大：事实上，我注意到字体被嵌入了多次（与页数一样多次：所有页面都是从同一个 excel 模板开始生成的，字体嵌入在单个 pdf 文件中，而 pdftk 只是粘合 pdf）。有没有办法只保留每个嵌入字体的一个副本？

我尝试在从 excel->pdf 导出时仅在第一页中嵌入字体：文件的大小显着减小，但其他页面似乎无法访问嵌入的字体。

谢谢，亚历山德罗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:28:32.070

您可以尝试使用 Ghostscript（但使用最新版本，例如 9.05）“修复”您的 pdftk 级联 PDF。在许多情况下，Ghostscript 将能够将许多子集字体合并为更少的字体。

该命令如下所示：

```
gswin32c.exe ^
    -o output.pdf ^
    -sDEVICE=pdfwrite ^
    -dPDFSETTINGS=/prepress ^
     input.pdf 
```

检查与

```
pdffonts.exe  output.pdf
pdffonts.exe  input.pdf 
```

每个文件中有多少个不同字体子集的实例（`pdffonts.exe`在[**此处**](ftp://ftp.foolabs.com/pub/xpdf/xpdfbin-win-3.03.zip)作为[**命令行工具小包的**](http://www.foolabs.com/xpdf/about.html)一部分提供）。

但是不要抱怨这个过程的“速度慢”——Ghostscript 确实会完全解释所有 PDF 输入文件以完成其任务，而 pdftk 文件连接是一个更简单的过程......

* * *

**更新：**

而不是`pdftk`您可以使用 Ghostscript 来合并您的输入 PDF 文件。这可能会避免您在对 pdftk 合并文件进行后验 Ghostscript“修复”时看到的问题。请注意，*这将比 'dumb' pdftk merge 慢得多*。但是，结果可能会让您更满意，尤其是在字体处理和文件大小方面。

这将是一个可能的命令：

```
gswin32c.exe ^
    -o output.pdf ^
    -sDEVICE=pdfwrite ^
    -dPDFSETTINGS=/prepress ^
     input.pdf 
```

您可以向 Ghostscript CLI 添加更多选项，以便对合并和优化过程进行更精细的控制。

最后，您必须在两个极端之间做出决定：

*   '快速'`pdftk`产生大的输出文件，与
*   'Slow' `gswin32c.exe`(Ghostscript) 生成精益输出文件。

如果您为您的许多合并过程发布这两种方法的一些结果（执行时间和生成的文件大小），我会很感兴趣......

* * *

**更新 2：** 对不起，我以前的版本包含一个错字。
不是`-sPDFSETTINGS=...`，但必须是`-dPDFSETTINGS=...`（**d**代替*s*）。

* * *

**更新 3：**

由于您的源文件是由模板制作的 Excel 工作表（通常不会使用很多不同的字体），您可以尝试使用一种技巧来确保 Ghostscript 具有所有将要使用的字体的所有必需字形合并后的 PDF：

*   对于每种字体和字体（标准、斜体、粗体、粗斜体），在打印区域*左上角的模板表中添加一个表格单元格。*
*   使用 ASCII 字母表中的所有可打印字符和标点符号填充此表格单元格：`0123456789`、、、`ABCD...XYZ`等。`abc...xyz``:-_;°%&$§")({}[]`
*   使单元格（和字体大小）尽可能小，以免干扰您的整体布局。使用白色来格式化单元格中的字符（使它们在最终 PDF 中不可见）。

这种方法有望确保您的每个 PDF 将使用相同的字形子集，从而避免您在使用 Ghostscript 合并文件时观察到的问题。（*请注意，如果您使用 fe Arial 和 Arial-Italic，则必须创建 2 个这样的单元格：一个使用标准 Arial 字体格式化，另一个使用斜体字体。*）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T07:25:30.080

创建 PDF 文件时，字体通常是子集，因此它们只包含所需的字形。此外，编码被更改，以便为使用的第一个字形分配字符代码 1，第二个为 2，依此类推。

因此，第一个 PDF 文件可能包含 0x01 = A、0x02 = 空格、0x03 = t、0x04 = e 和 0x05 = s 的字体。第二个文件可能包含一个字体，其中 0x01 = T, 0x02 = e, 0x03 =s, 0x04 = t

为了不混淆，在文档中的字体名称中添加了一个前缀。Acrobat 在显示字体嵌入时会删除此前缀，因此您*似乎*有多个相同字体的实例。然而，它们实际上是不同的字体，不能轻易组合。

假设是这种情况（我需要查看您的文件以确定），“可能”可以避免这种情况。如果您将 PDF 生成软件设置为不对字体进行子集化，那么 pdftk 可能能够在不多次包含相同字体的情况下合并文档。我显然没有对此进行过测试，但它可能会起作用。您的另一个选择是修改您的工作流程，以便首先将报告生成为多页文档。

# javascript - 未捕获的类型错误：对象 [object Object] 没有方法“jqEasyCounter”

> ID：10626978
> 
> 赞同：1
> 
> 时间：2012-05-16T21:28:33.373
> 
> 标签：javascript, jquery, html

所以我已经阅读了其中的几个错误，这显然是因为人们没有正确链接到脚本，但我认为我的链接很好。

这是片段：

在 default.js 中（以减少混乱）我也尝试将它放在带有脚本标签的 HTML 上。

```
//character counters
$(document).ready(function(){
    $('.count1').jqEasyCounter({  //Error here: default.js:147 Uncaught TypeError: Object [object Object] has no method 'jqEasyCounter'
        'maxChars': 500,
        'maxCharsWarning': 50,
        'msgFontSize': '10px',
        'msgFontColor': '#F00',
        'msgFontFamily': 'Arial',
        'msgWarningColor': '#000'
    });
}); 
```

和参考：

```
<script language="javascript" type="text/javascript" src="scripts/jquery.jqEasyCharCounter.js"></script>
<script language="javascript" type="text/javascript" src="scripts/default.js"></script>
<script language="javascript" type="text/javascript" src="scripts/history.js"></script>

<meta http-equiv="CACHE-CONTROL" content="NO-CACHE"/>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/>

<!-- jQuery -->
<script language="javascript" type="text/javascript"
            src="scripts/jquery-1.7.1.min.js"></script>
 <!-- jQuery UI -->
 <script language="javascript" type="text/javascript"
            src="scripts/jquery-ui-1.8.18.custom.min.js"></script>
 <!-- jQuery UI CSS -->
 <link rel="stylesheet" type="text/css" href="styles/smoothness/jquery-ui-1.8.18.custom.css" /> 
```

Firebug/Chrome Inspect Element 正在为其查找应该是`jquery.jqEasyCharCounter.js`和`default.js`.

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T21:31:25.143

```
<script language="javascript" type="text/javascript" src="scripts/jquery-1.7.1.min.js"></script> 
```

应该是第一个加载的脚本，将它移到顶部之前：

```
<script ...src="scripts/jquery.jqEasyCharCounter.js"></script> 
```

# android - Android - 中风在圆角矩形的角处看起来像素化

> ID：10626981
> 
> 赞同：4
> 
> 时间：2012-05-16T21:28:43.447
> 
> 标签：android, stroke

为什么长方形边角的笔画这么难看？如果我在 xml 中绘制形状，它可以正常工作（至少它可以在活动中工作，我无法使用小部件对其进行测试）。

```
Paint strokePaint = new Paint();
strokePaint.setARGB(255, 16, 23, 131);
strokePaint.setStyle(Paint.Style.STROKE);
strokePaint.setStrokeWidth(8); 
```

![在此处输入图像描述](../Images/1fe7a11f7a504c815924b73433c08c4c.png)

我正在测试 hdpi 密度。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T21:43:15.480

尝试：

```
strokePaint.setAntiAlias(true) 
```

# extjs - Extjs4\. 恢复以前的过滤结果

> ID：10626987
> 
> 赞同：0
> 
> 时间：2012-05-16T21:29:18.970
> 
> 标签：extjs, extjs4, filtering, records

我在视口中有一个用于搜索目的的文本字段。我还有一个存储来自搜索查询的数据的商店。当用户进行搜索并且查询有结果时，存储中会填充记录。每次用户进行搜索时，商店都会使用新记录进行更新。有些查询很可能不会返回结果。所以，我想要的是当搜索查询不返回任何结果而不更新商店但保留最后一次成功的查询结果时。我怎样才能做到这一点？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:20:13.357

声明一个全局变量并有条件地更新它。

检查这篇文章[ExtJs:Initializing a global variable](https://stackoverflow.com/questions/10468734/extjsinitializing-a-global-variable)

开始您的编码并提出具体的问题。

# java - 绕过类型检查

> ID：10626990
> 
> 赞同：2
> 
> 时间：2012-05-16T21:29:30.847
> 
> 标签：java, types

这是非常糟糕的 OO，但我并不想将其放入任何类型的代码中，除了编码人员自己之外，任何人都可以使用它——除非编码人员进行测试，否则永远不能调用它。

这是我面临的问题：我有一系列外部定义的类。我不能以任何方式修改它们（当然我可以继承或调用它们）。它们有多种名称，但它们不扩展任何超类（Object 除外）或实现任何接口。然而，我对他们每个人的了解是他们有一个名为“调用”的方法。

为了测试，我正在尝试编写将调用这些类的任何一种调用方法的代码。但是，当然，我不能只说 Object.call()，因为调用不是为每个对象定义的。

本质上，这将起作用：

```
MyClassOne classOne = new MyClassOne();
MyClassOneInput classOneInput = new MyclassOneInput();

classOne.call(classOneInput); 
```

但这不会：

```
Object clazz = getClassFromElsewhere();
Object clazzInput = getClassInputFromElsewhere();

clazz.call(clazzInput). 
```

显然，由于 Java 是一种强类型语言。

但是，为了让在这个系统上工作的每个人的测试速度提高 10 倍，我能否以某种方式解决这个问题，并以某种方式对任何 Class 和任何 ClassInput 使用“调用”方法？如果传递了错误的类，如果它产生异常或完全中断，我没有问题。

请帮助我违反面向对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T21:34:14.157

您可以使用反射来执行此操作。查看[反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)

这是一个简单的例子：

```
MyClassOne classOne = new MyClassOne();
MyClassOneInput classOneInput = new MyClassOneInput();
Method m = classOne.getClass().getMethod("call", MyClassOneInput.class);
m.invoke(classOne, classOneInput); 
```

注意：您可以使用`getDeclaredMethod`获取任何方法，包括私有和受保护的方法，但如果它们是私有/受保护的，则需要对它们调用“m.setAccessible(true)”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T21:33:05.203

这是[Java 反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)的完美使用。这是一个伪代码示例，但它看起来像这样

```
 Object obj = getExternalObject();
 Method meth = obj.getClass().getDeclaredMethod("call");
 meth.invoke(obj); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T21:32:26.310

使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

1.  使用`getClass()`
2.  使用找到“调用”方法`getMethod()`
3.  如果找到，在对象上调用它

例如

```
java.lang.reflect.Method method;
try {
  method = obj.getClass().getMethod(methodName, param1.class, param2.class, ..);
} catch (SecurityException e) {
  // ...
} catch (NoSuchMethodException e) {
  // ...
} 
```

然后

```
try {
  method.invoke(obj, arg1, arg2,...);
} catch (IllegalArgumentException e) {
} catch (IllegalAccessException e) {
} catch (InvocationTargetException e) { 
```

请参阅[将方法名称作为字符串给出时如何调用 Java 方法？](https://stackoverflow.com/questions/160970/how-do-i-invoke-a-java-method-when-given-the-method-name-as-a-string)

我还会考虑研究动态 JVM 语言（JRuby、Jython、Groovy），其中做这样的事情可能看起来不那么“糟糕的 OO”，感觉更自然

# installation - 在 Windows 上运行 Jenkins 时出现异常

> ID：10626991
> 
> 赞同：9
> 
> 时间：2012-05-16T21:29:48.607
> 
> 标签：installation, jenkins

我第一次尝试将 Jenkins-1.464 安装为 Windows 7 64 位和 32 位 Java 上的 Windows 服务。但是，当我运行它时会引发异常。

```
C:\Jenkins>java -jar jenkins.war --httpPort=8082
Running from: C:\Jenkins\jenkins.war
webroot: $user.home/.jenkins
May 16, 2012 4:48:04 PM winstone.Logger logInternal
INFO: Beginning extraction from war file
Jenkins home directory: C:\Users\Andrey\.jenkins found at: $user.home/.jenkins
May 16, 2012 4:48:04 PM winstone.Logger logInternal
INFO: HTTP Listener started: port=8082
May 16, 2012 4:48:04 PM winstone.Logger logInternal
INFO: Winstone shutdown successfully
May 16, 2012 4:48:04 PM winstone.Logger logInternal
SEVERE: Container startup failed
java.io.IOException: Failed to start a listener: winstone.ajp13.Ajp13Listener
        at winstone.Launcher.spawnListener(Launcher.java:229)
        at winstone.Launcher.<init>(Launcher.java:182)
        at winstone.Launcher.main(Launcher.java:384)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at Main._main(Main.java:273)
        at Main.main(Main.java:98)
Caused by: java.io.IOException: Failed to listen on port 8009
        at winstone.ajp13.Ajp13Listener.start(Ajp13Listener.java:89)
        at winstone.Launcher.spawnListener(Launcher.java:220)
        ... 8 more
Caused by: java.net.BindException: Address already in use: JVM_Bind
        at java.net.PlainSocketImpl.socketBind(Native Method)
        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
        at java.net.ServerSocket.bind(ServerSocket.java:328)
        at java.net.ServerSocket.<init>(ServerSocket.java:194)
        at java.net.ServerSocket.<init>(ServerSocket.java:150)
        at winstone.ajp13.Ajp13Listener.start(Ajp13Listener.java:84)
        ... 9 more
May 16, 2012 4:48:04 PM hudson.WebAppMain$2 run
SEVERE: Failed to initialize Jenkins
java.lang.InterruptedException
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:485)
        at org.jvnet.hudson.reactor.Reactor.execute(Reactor.java:244)
        at jenkins.InitReactorRunner.run(InitReactorRunner.java:43)
        at jenkins.model.Jenkins.executeReactor(Jenkins.java:849)
        at jenkins.model.Jenkins.<init>(Jenkins.java:761)
        at hudson.model.Hudson.<init>(Hudson.java:81)
        at hudson.model.Hudson.<init>(Hudson.java:77)
        at hudson.WebAppMain$2.run(WebAppMain.java:217)
Exception in thread "pool-2-thread-2" java.lang.NullPointerException
        at org.jvnet.hudson.reactor.Reactor$1.run(Reactor.java:153)
        at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:94)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Exception in thread "pool-2-thread-1" java.lang.NullPointerException
        at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:191)
        at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:94)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

我已经尝试过：

*   通过 --httpPort 命令行选项更改 HTTP 端口
*   通过 jenkins.xml 中的 --httpPort 参数更改 HTTP 端口
*   关闭 Windows 防火墙

但这并不能解决问题。

我如何解决它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-16T21:38:29.630

通过运行 jenkins 可以解决问题`--ajp13Port=-1`。它将禁用 Apache JServ 协议 v1.3 的侦听器。您还可以将端口更改为未使用的端口。

运行`java -jar jenkins.war --ajp13Port=-1 --httpPort=8082`Jenkins 后成功启动并且可以通过`http://localhost:8082/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T16:22:18.357

我发现最有用的信息是：

```
Caused by: java.io.IOException: Failed to listen on port 8009 
```

您可能知道，这是典型的 Apache JServ 协议 AJP 连接器端口。

运行`netstat -ano`我发现另一个进程正在侦听此端口而不是 Jenkins。就我而言，一位同事已经安装了 YouTrack，并且该服务在 Jenkins 之前就已启动。这让詹金斯很不高兴。

我停止了 YouTrack 服务，启动了 Jenkins，然后重新启动了 YouTrack，每个人都很高兴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T09:14:10.103

将 jenkins.xml 更新为

```
<arguments>-Xrs -Xmx256m -Dhudson.lifecycle=hudson.lifecycle.WindowsServiceLifecycle -jar "%BASE%\jenkins.war"  --ajp13Port=-1 --httpPort=8082</arguments> 
```

# php - 尝试通过使用 html2fpdf 使用 php 生成 pdf 时出现以下错误

> ID：10626993
> 
> 赞同：0
> 
> 时间：2012-05-16T21:29:55.617
> 
> 标签：php, fpdf, html2pdf

```
Warning: include(font/helvetica.php) [function.include]: failed to open stream: No such file or directory in C:\xampp\php\PEAR\fpdf.php on line 541

Warning: include() [function.include]: Failed opening 'font/helvetica.php' for inclusion (include_path='.;C:\xampp\php\PEAR') in C:\xampp\php\PEAR\fpdf.php on line 541
FPDF error: Could not include font metric file 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:37:32.907

您可能需要在其中一个 php 文件中进行配置 - 我记得模糊地遇到了这个问题。有一个带有字体文件夹路径的 CONSTANT 变量。在主 php 文件中检查它。

或者您可以创建该目录并将字体复制到该目录中。

# php - PHP 用 id 更新多行并选择

> ID：10626995
> 
> 赞同：1
> 
> 时间：2012-05-16T21:30:08.443
> 
> 标签：php, mysql

此代码选择正确检查的复选框的 ID，但是它从我的第一个选择中选择下拉选择，而不是我更改的选择下拉列表。有没有办法来解决这个问题？我在用着

```
<select name="status[]"><option value="1">active</option><option value="0">inactive</option></select> 
```

这是我的流程代码。

```
if (isset($_POST['submit'])) {

// find out how many records there are to update

$size = count($_POST['id']);

// start a loop in order to update each record
$i = 0;
while ($i < $size) {
// define each variable
$id = $_POST['id'][$i];
$status= $_POST['status'][$i];

// do the update and print out some info just to provide some visual feedback
$query = "UPDATE users SET status = '$status' WHERE id = '$id' LIMIT 1";
mysql_query($query) or die ("Error in query: $query");
print "$status | $id<br /><br /><em>Updated!</em><br /><br />";
++$i;
}
mysql_close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:44:37.870

我同意这些评论，但是，我只是对这个问题提供一个快速的答案。

为了简单起见，我会在 HTML 中做这样的事情。数组索引可以简单地从 PHP 中的计数器回显，或者如果它不会基于其他任何内容而更改，则可以静态输入。只需为每个项目增加此索引。

```
<input type="checkbox" name="id[0]" value="1"> Some Text
<select name="status[0]">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
</select> 
```

现在为 PHP

```
if (isset($_POST['submit'])) {

    foreach($_POST['id'] as $i=>$value) {
        if($value == 1) {
            // define each variable
            $id = $_POST['id'][$i];
            $status= $_POST['status'][$i];

            // do the update and print out some info just to provide some visual feedback
            $query = "UPDATE users SET status = '$status' WHERE id = '$id' LIMIT 1";
            mysql_query($query) or die ("Error in query: $query");
            print "$status | $id<br /><br /><em>Updated!</em><br /><br />";
        }

    }
    mysql_close();
} 
```

编辑：

我忘了提到您可以将复选框的值设置为您需要的任何值。只需确保`if($value==1)`检查有效结果（例如`>0`，如果您的所有 Id 都是肯定的）。