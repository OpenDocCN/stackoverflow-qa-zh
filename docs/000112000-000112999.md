# StackOverflow 问答 000112000-000112999

# mysql - 如何在 MySql 4 上方安装的 MySql 5 上启用 inno-db 支持？

> ID：112010
> 
> 赞同：2
> 
> 时间：2008-09-21T20:29:08.737
> 
> 标签：mysql, innodb

如何在已安装的 MySql 实例上启用 inno-db 支持？

我已经安装了 mysql-5.0.67-win32。执行“显示引擎”时，“InnoDB”为“禁用”。根据文档，MySql 是在支持 inno-db 的情况下编译的（来自 doc：DISABLED 的值要么是因为服务器是使用禁用引擎的选项启动的，要么是因为未提供启用它所需的所有选项。）

在 my.ini 中，我用“skip-innodb”注释了行。这没有帮助。所有其他与 inno-db 相关的变量保持不变。

在我遇到所描述的情况之前，我已经执行了一些不寻常的操作。我已经安装了 mysql-4.0.17-win。我卸载了它，然后安装了 mysql-5.0.67-win32。在安装向导中，我只选择了 MyISAM 支持（据我所知，我以这种方式禁用了 inno-db 支持。当我尝试在支持 inno-db 的情况下重新安装时，我在使用以前的数据库“mysql”和帐户信息时遇到了问题） .

MySQL 文档说我应该使用 mysqldump 导出数据，然后在升级过程中导入导出的数据。我尝试这样做，但是在导入数据时，我收到了有关语法错误的消息（我认为它与 mysql 的第 4 和第 5 版本的一些不兼容有关）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T20:35:53.743

默认情况下应启用。在某些情况下，MySQL lib 文件夹上的错误权限会导致 InnoDB 吠叫。检查您的 MySQL 错误日志以获取权限错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T20:36:55.363

我在 my.ini 中有以下 innodb 选项。这是一个非常小的配置，所以如果您希望 mysql 具有良好的性能，请不要使用此值。请在更改 my.ini 后重新启动 mysql。

```
#*** INNODB Specific options ***
innodb_data_home_dir="C:/mysqldata/"
#skip-innodb
innodb_additional_mem_pool_size=120M
innodb_flush_log_at_trx_commit=1
innodb_log_buffer_size=16M
innodb_buffer_pool_size=10M
innodb_log_file_size=2M
innodb_thread_concurrency=8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T20:34:17.507

也许您在全局配置文件中禁用了 inno-db。在 Linux 上，这类似于 /etc/mysql/my.cnf - 也许 Windows 有一个类似的全局 conf 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T22:17:37.883

确保您更改的是正确的 my.ini 文件。在 Windows 上，这是从许多位置读取的。顺序是：

1.  WINDIR\my.ini, WINDIR\my.cnf
2.  C:\my.ini, C:\my.cnf
3.  INSTALLDIR\my.ini, INSTALLDIR\my.cnf
4.  默认值-额外文件

键入`mysql --help`命令提示符以查看您计算机上的实际订单，例如：

> 默认选项按给定顺序从以下文件中读取： C:\my.ini C:\my.cnf C:\WINDOWS\my.ini C:\WINDOWS\my.cnf C:\Program Files\MySQL\M ySQL Server 5.0\my.ini C:\Program Files\MySQL\MySQL Server 5.0\my.cnf

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T22:22:33.330

你检查过启动参数吗？也许您用来启动服务器的 shell 脚本或批处理文件会在命令行上禁用引擎。IIRC 命令行标志胜过 .ini 设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-23T17:34:15.973

我已经解决了这个问题。

简而言之：由于导入数据时出现一些奇怪的语法错误，我无法在 MySql4 上转储数据库并在 MySql5 上恢复它。

安装后我尝试用旧数据库覆盖 MySql5 数据库，包括数据库“mysql”。它工作正常，但我无法启用 inno-db 支持。（通过这种方式，我什至可以将函数 PASSWORD 用于旧密码（而不是 OLD_PASSWORD））

由于 'mysql' 的数据库结构在 5 版本中发生了更改，我尝试再次安装 MySql5 并复制了我的旧数据库，但 'mysql' 除外。在此之后，我使用“mysql”导出数据的更正版本更新了“mysql”数据库。以这种方式，我获得了 mysql 5 工作。

毕竟我也执行
`mysqlcheck --all-databases --auto-repair`
了升级我的表。

PS感谢所有答案的作者，这些答案提示我解决问题的正确方法。

# apache-flex - 在 Adob e Flex 中创建一列单选按钮

> ID：112036
> 
> 赞同：0
> 
> 时间：2008-09-21T20:35:21.357
> 
> 标签：apache-flex

我正在使用 AdvancedDataGrid 小部件，我希望两列是单选按钮，其中每一列都是它自己的 RadioButtonGroup。我以为我拥有所有必要的 mxxml，但我遇到了一个奇怪的行为问题。当我上下滚动时，按钮会改变值！选中的按钮变为取消选中状态，未选中的按钮变为选中状态。有人知道这个错误吗？我应该以不同的方式解决这个问题。- 这是我试图做的一个精简的例子。

```
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
  <mx:RadioButtonGroup id="leftAxisGrp" />
  <mx:RadioButtonGroup id="rightAxisGrp">
    <mx:change>
      <![CDATA[
        trace (rightAxisGrp.selection);
        trace (rightAxisGrp.selection.data.name);
      ]]>
    </mx:change>
  </mx:RadioButtonGroup>
  <mx:AdvancedDataGrid
      id="readingsGrid"
      designViewDataType="flat"
      height="150" width="400"
      sortExpertMode="true"
      selectable="false">
    <mx:columns>
      <mx:AdvancedDataGridColumn
          headerText="L" width="25" paddingLeft="6"
          dataField="left" sortable="false">
        <mx:itemRenderer>
          <mx:Component>
            <mx:RadioButton groupName="leftAxisGrp" />
          </mx:Component>
        </mx:itemRenderer>
      </mx:AdvancedDataGridColumn>
      <mx:AdvancedDataGridColumn
          headerText="R" width="25" paddingLeft="6"
          dataField="right" sortable="false">
        <mx:itemRenderer>
          <mx:Component>
            <mx:RadioButton groupName="rightAxisGrp" />
          </mx:Component>
        </mx:itemRenderer>
      </mx:AdvancedDataGridColumn>
      <mx:AdvancedDataGridColumn headerText="" dataField="name" />
    </mx:columns>
    <mx:dataProvider>
      <mx:Array>
        <mx:Object left="false" right="false" name="Reddish-gray Mouse Lemur" />
        <mx:Object left="false" right="false" name="Golden-brown Mouse Lemur" />
        <mx:Object left="false" right="false" name="Northern Rufous Mouse Lemur" />
        <mx:Object left="false" right="false" name="Sambirano Mouse Lemur" />
        <mx:Object left="false" right="false" name="Simmons' Mouse Lemur" />
        <mx:Object left="false" right="false" name="Pygmy Mouse Lemur" />
        <mx:Object left="false" right="false" name="Brown Mouse Lemur" />
        <mx:Object left="false" right="false" name="Madame Berthe's Mouse Lemur" />
        <mx:Object left="false" right="false" name="Goodman's Mouse Lemur" />
        <mx:Object left="false" right="false" name="Jolly's Mouse Lemur" />
        <mx:Object left="false" right="false" name="Mittermeier's Mouse Lemur" />
        <mx:Object left="false" right="false" name="Claire's Mouse Lemur" />
        <mx:Object left="false" right="false" name="Danfoss' Mouse Lemur" />
        <mx:Object left="false" right="false" name="Lokobe Mouse Lemur" />
        <mx:Object left="true" right="true" name="Bongolava Mouse Lemur" />
      </mx:Array>
    </mx:dataProvider>
  </mx:AdvancedDataGrid>
</mx:WindowedApplication> 
```

* * *

*已更新*（感谢比尔！）

好的！去工作吧。我只需要对比尔的建议进行一些更改。主要将 ArrayCollection 与 ObjectProxy 一起使用，因此它既可绑定又动态。一件奇怪的事情 - 如果我在构建时填写数组，我无法选择第一行中的按钮；我不得不推迟到 creationComplete 事件被触发（这很好，因为无论如何我都要从数据库中填充网格）。

```
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
  <mx:Script>
    <![CDATA[
      import mx.utils.ObjectProxy;
      import mx.collections.ArrayCollection;

      [Bindable]
      private var myData:ArrayCollection = new ArrayCollection ();

      private function selectItem (selObject:Object, property:String) : void
      {
        for each (var obj:ObjectProxy in myData) {
          obj[property] = (obj.name === selObject.name);
        }
        readingsGrid.invalidateDisplayList ();
      }
    ]]>
  </mx:Script>
  <mx:RadioButtonGroup id="leftAxisGrp">
    <mx:change>
      <![CDATA[
        selectItem (leftAxisGrp.selectedValue, 'left');
      ]]>
    </mx:change>
  </mx:RadioButtonGroup>
  <mx:RadioButtonGroup id="rightAxisGrp">
    <mx:change>
      <![CDATA[
        selectItem (rightAxisGrp.selectedValue, 'right');
      ]]>
    </mx:change>
  </mx:RadioButtonGroup>
  <mx:AdvancedDataGrid
      id="readingsGrid"
      designViewDataType="flat"
      dataProvider="{myData}"
      sortExpertMode="true"
      height="150" width="400"
      selectable="false">
    <mx:columns>
      <mx:AdvancedDataGridColumn id="leftCol"
          headerText="L" width="25" paddingLeft="6" sortable="false">
        <mx:itemRenderer>
          <mx:Component>
            <mx:RadioButton groupName="leftAxisGrp"
                buttonMode="true" value="{data}" selected="{data.left}" />
          </mx:Component>
        </mx:itemRenderer>
      </mx:AdvancedDataGridColumn>
      <mx:AdvancedDataGridColumn id="rightCol"
          headerText="R" width="25" paddingLeft="6" sortable="false">
        <mx:itemRenderer>
          <mx:Component>
            <mx:RadioButton groupName="rightAxisGrp"
                buttonMode="true" value="{data}" selected="{data.right}" />
          </mx:Component>
        </mx:itemRenderer>
      </mx:AdvancedDataGridColumn>
      <mx:AdvancedDataGridColumn headerText="" dataField="name" />
    </mx:columns>
    <mx:creationComplete>
      <![CDATA[
      myData.addItem(new ObjectProxy ({ left:true, right:true, name:"Golden-brown Mouse Lemur" }));
      myData.addItem(new ObjectProxy ({ left:false, right:false, name:"Reddish-gray Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Northern Rufous Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Sambirano Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Simmons' Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Pygmy Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Brown Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Madame Berthe's Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Goodman's Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Jolly's Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Mittermeier's Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Claire's Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Danfoss' Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Lokobe Mouse Lemur" }));
      myData.addItem(   new ObjectProxy ({ left:false, right:false, name:"Bongolava Mouse Lemur" }));               
      ]]>
    </mx:creationComplete>
  </mx:AdvancedDataGrid>
</mx:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T16:29:40.923

这里发生的是 Flex 只为*可见*列创建 itemRenderer 实例。当您滚动时，这些实例会被回收。因此，如果向下滚动，绘制第一行第一列的 RadioButton 对象现在可能已更改为绘制第七行第一列。每当发生这种情况时，Flex 都会重置 itemRenderer 的“数据”属性。

因此，虽然有 15 行数据，但只有 12 个 RadioButtons（6 个用于“左侧”，6 个用于“右侧”，用于 6 个可见行），而不是您可能期望的 30 个 RadioButtons。如果您只*显示*选择，这不是一个大问题，但当您允许更新时，问题就更大了。

要解决显示问题，您可以将 RadioButton 的“selected”属性绑定到 itemRenderer 的 data.left（或 right）值，而不是在列上设置“dataField”。然后，您需要将 dataProvider 中的项目设置为“可绑定”。

要解决更新问题，由于您将直接绑定到 dataProvider 项值，因此您需要确保更新它们。由于每个项目没有一个 RadioButton，因此您需要另一种方案。在这种情况下，我放入了一个处理程序，该处理程序将每个项目的左/右属性设置为“false”，但“selected”除外，它设置为“true”。

我根据这些想法更新了您的示例代码。尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application  layout="absolute"
    xmlns:my="*"
    xmlns:mx="http://www.adobe.com/2006/mxml">
  <mx:RadioButtonGroup id="leftAxisGrp"
       change="selectItem(leftAxisGrp.selectedValue, 'left');"/>
  <mx:RadioButtonGroup id="rightAxisGrp"
       change="selectItem(rightAxisGrp.selectedValue, 'right');">
  </mx:RadioButtonGroup>
  <mx:AdvancedDataGrid
      id="readingsGrid"
      designViewDataType="flat"
      height="150" width="400"
      sortExpertMode="true"
      selectable="false"
      dataProvider="{adgData.object}">
    <mx:columns>
      <mx:AdvancedDataGridColumn
          headerText="L" width="25" paddingLeft="6"
          sortable="false">
        <mx:itemRenderer>
          <mx:Component>
            <mx:RadioButton groupName="leftAxisGrp" 
                value="{data}" selected="{data.left}"/>
          </mx:Component>
        </mx:itemRenderer>
      </mx:AdvancedDataGridColumn>
      <mx:AdvancedDataGridColumn
          headerText="R" width="25" paddingLeft="6"
          sortable="false">
        <mx:itemRenderer>
          <mx:Component>
            <mx:RadioButton groupName="rightAxisGrp"
                value="{data}" selected="{data.right}"/>
          </mx:Component>
        </mx:itemRenderer>
      </mx:AdvancedDataGridColumn>
      <mx:AdvancedDataGridColumn headerText="" dataField="name" />
    </mx:columns>
  </mx:AdvancedDataGrid>
  <mx:Model id="adgData">
      <root>
        <object left="false" right="false" name="Reddish-gray Mouse Lemur" />
        <object left="false" right="false" name="Golden-brown Mouse Lemur" />
        <object left="false" right="false" name="Northern Rufous Mouse Lemur" />
        <object left="false" right="false" name="Sambirano Mouse Lemur" />
        <object left="false" right="false" name="Simmons' Mouse Lemur" />
        <object left="false" right="false" name="Pygmy Mouse Lemur" />
        <object left="false" right="false" name="Brown Mouse Lemur" />
        <object left="false" right="false" name="Madame Berthe's Mouse Lemur" />
        <object left="false" right="false" name="Goodman's Mouse Lemur" />
        <object left="false" right="false" name="Jolly's Mouse Lemur" />
        <object left="false" right="false" name="Mittermeier's Mouse Lemur" />
        <object left="false" right="false" name="Claire's Mouse Lemur" />
        <object left="false" right="false" name="Danfoss' Mouse Lemur" />
        <object left="false" right="false" name="Lokobe Mouse Lemur" />
        <object left="true" right="true" name="Bongolava Mouse Lemur" />
      </root>
  </mx:Model>
  <mx:Script>
    <![CDATA[
        private function selectItem(selObject:Object, property:String) : void {
            for each(var obj:Object in adgData.object) {
                obj[property] = (obj === selObject);
            }
            readingsGrid.invalidateDisplayList();
        }
    ]]>
  </mx:Script>
</mx:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T01:55:06.300

转载了这个。可能是 ADG 错误，我们在这里遇到了一些。（在 bugs.adobe.com 上没有找到这个，但他们的搜索很糟糕）。

[您可以尝试 Flex 3.0.3，或在此处](http://labs.adobe.com/technologies/flex/sdk/flex3sdk.html)每晚构建（警告，可能已损坏），看看他们是否已修复它，或者您可以尝试实现自定义渲染器，但这很痛苦。

# agile - 如何处理结对编程问题？

> ID：112046
> 
> 赞同：15
> 
> 时间：2008-09-21T20:38:07.670
> 
> 标签：agile, pair-programming

团队中的一些成员在一起编程时遇到了问题。不同的性别，不同的文化，不同的年龄。如何处理这些问题？- 不要将它们配对在一起，或者 - 将它们配对在一起，让它们达到“黄金中间”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-21T20:41:47.520

结对编程是基于两个程序员的交互增加价值的想法。如果这不是真的，改变对......让他们选择。编程应该很有趣！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-21T20:43:24.707

每周或每个 sprint 轮换一对怎么样，这样如果一对夫妇之间出现问题，他们就不会觉得必须永远这样。我认为，如果有一个特定的时间框架，你必须与一个你不相处的人一起工作，它会更容易“接受”，希望你不会以这种方式失去任何优秀的人。

如果在几次轮换之后，您注意到一个没有人喜欢的特定个人，那么可能应该专注于调整个人与团队互动的方式，或者如果它继续永久地将他们从团队中移除。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-23T16:29:12.603

重新评估您的招聘实践，并确保您选择面向团队的员工。

做不到这一点，薄荷糖。

-亚当

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-21T20:42:44.273

他们到底有什么问题？他们不相处，不了解对方吗？他们是否具有不同级别的编程经验？

如果您有一个可以充当某种“调解人”的团队成员，这可能会有所帮助。过去成功完成结对编程并可以帮助两人一起度过最初几次的人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T20:51:19.150

解决冲突的第一步是认识到人们是不同的。即使是最温和的程序员的耐心也可以在结对编程中尝试，它可能会非常有压力。有些人在遇到冲突时会退缩，有些人会变得咄咄逼人。

根据我的经验，进行结对编程的最佳方法是在编写代码之前详细讨论您希望在会话中完成什么。这将使你们俩的思想走上同一条轨道。当你对某件事有不同意见时，停止编码，离开电脑讨论它，尝试找到共同点，最重要的是不要忽视你的伴侣可能有的任何想法。休息一下; 不要连续工作 2 小时，尝试每 45 分钟左右站起来或休息一下。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-23T16:20:42.403

作为一个小组讨论配对问题，并确保小组知道不同的配对不起作用。这样，该小组可以帮助确保您的配对不会互相躲避。如果您将功能失调的一对分开，它们将始终功能失调。

让这对打开通信线路；尝试让双方做新的事情。假设两个人都是真正优秀的开发人员，他们都有很多东西要互相学习。尝试改变他们从老师到学生的态度。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-23T19:54:11.377

我想问 muloh 的第二个问题——他们有什么问题？

以我的经验，这些问题通常（但不总是）表明团队结构/技能/关系存在潜在问题，如果您想从参与其中的每个人中获得最大收益，就需要解决这些问题。

Mary 与 Fred 相处不来是因为 Fred 对正常人如何使用数据库了解不够吗？弗雷德和乔相处不来是因为乔没有像他们应该的那样经常洗澡吗？乔不和玛丽相处是因为玛丽是个粗鲁的人吗？如果是这样，您几乎可以保证 Fred、Jo 和 Mary 也会以类似的方式惹恼团队的其他成员。

仅仅因为一两个人推动问题足以避免配对并不意味着问题就消失了。这很可能也让其他人烦恼——他们可能有其他应对方式。例如寻找替代工作:-)

如果团队不能很好地协同工作，那么它就不是一个团队。

出于好奇——你的配对时间有多长，你多久换一次配对？我发现，如果人们定期换对——一天一到两次，有时处理这类事情会更容易。这样，每个人都可以分享团队中每个人的相对优缺点——这可以帮助每个人专注于解决一些缺点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-25T03:45:27.553

另一种方法是在 scrum 中不断切换你的配对。有一个可以设置为 1/2/3 小时的计时器。当铃声响起时，旋转你的双。这有几个影响：

*   两个人不会长时间结对在一起
*   您的开发人员将轮流浏览您当前的故事，熟悉代码的每个和不同区域
*   如果您的开发人员闻到了其中一种气味，您只需经历一小段臭味！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-12T18:34:43.690

结对是敏捷团队的关键实践。首先，最好确定愿意并能够结对有效工作的开发人员。我知道的一家公司会进行极端的面试。也就是说，他们将成对面试候选人，让他们解决问题。他们对开发人员是否有能力解决问题感兴趣，但对他们的协作技能感兴趣。只考虑那些可以与他人很好地合作的人。

并不要求所有配对都彼此喜欢。重要的是它们是有效的。鉴于对经常轮换（对于每张卡或更频繁），个性不是问题。如果某人没有跨对，并且在被教练后仍然存在问题，则应要求他或她离开团队。

# windows - Windows 批处理文件中的 %~d0 是什么意思？

> ID：112055
> 
> 赞同：388
> 
> 时间：2008-09-21T20:41:19.190
> 
> 标签：windows, batch-file

我正在查看一个定义以下变量的批处理文件：

```
set _SCRIPT_DRIVE=%~d0
set _SCRIPT_PATH=%~p0 
```

*   是什么意思`%~d0`或`%~p0`实际上是什么意思？
*   是否有一组众所周知的值用于当前目录、驱动器、脚本参数等？
*   我可以使用其他类似的快捷方式吗？

* * *

## 回答 #1

> 赞同：594
> 
> 时间：2008-09-21T20:57:34.050

魔术变量`%`*n*包含用于调用文件的参数：`%0`是 bat 文件本身的路径，`%1`是之后的第一个参数，`%2`是第二个参数，依此类推。

由于参数通常是文件路径，因此有一些额外的语法可以提取部分路径。`~d`是驱动器，`~p`是路径（没有驱动器），`~n`是文件名。它们可以组合，`~dp`驱动器+路径也是如此。

`%~dp0`因此在 bat 中非常有用：它是执行 bat 文件所在的文件夹。

您还可以获取有关文件的其他类型的元信息：`~t`是时间戳，`~z`是大小。

[在此处](http://technet.microsoft.com/en-us/library/bb490890.aspx)查找所有命令行命令的参考。波浪号魔术代码在 for 下[进行了](http://technet.microsoft.com/en-us/library/bb490909.aspx)描述。

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2008-09-21T20:55:38.627

它们是增强的变量替换。他们修改批处理文件中使用的 %N 变量。如果您在 Windows 中进行批处理编程，这将非常有用。

```
%~I         - expands %I removing any surrounding quotes ("")
%~fI        - expands %I to a fully qualified path name
%~dI        - expands %I to a drive letter only
%~pI        - expands %I to a path only
%~nI        - expands %I to a file name only
%~xI        - expands %I to a file extension only
%~sI        - expanded path contains short names only
%~aI        - expands %I to file attributes of file
%~tI        - expands %I to date/time of file
%~zI        - expands %I to size of file
%~$PATH:I   - searches the directories listed in the PATH
               environment variable and expands %I to the
               fully qualified name of the first one found.
               If the environment variable name is not
               defined or the file is not found by the
               search, then this modifier expands to the
               empty string 
```

您可以通过运行找到上述内容[`FOR /?`](https://technet.microsoft.com/en-us/library/bb490909.aspx)。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2012-09-18T20:49:21.513

是的，您可以使用下面给出的其他快捷方式。在您的命令中， ~d0 表示第 0 个参数的驱动器号。

```
~ expands the given variable
d gets the drive letter only
0 is the argument you are referencing 
```

由于第 0 个参数是脚本路径，它会为您获取路径的驱动器号。您也可以使用以下快捷方式。

```
%~1         - expands %1 removing any surrounding quotes (")
%~f1        - expands %1 to a fully qualified path name
%~d1        - expands %1 to a drive letter only
%~p1        - expands %1 to a path only
%~n1        - expands %1 to a file name only
%~x1        - expands %1 to a file extension only
%~s1        - expanded path contains short names only
%~a1        - expands %1 to file attributes
%~t1        - expands %1 to date/time of file
%~z1        - expands %1 to size of file
%~$PATH:1   - searches the directories listed in the PATH
               environment variable and expands %1 to the fully
               qualified name of the first one found.  If the
               environment variable name is not defined or the
               file is not found by the search, then this
               modifier expands to the empty string    

%~dp1       - expands %1 to a drive letter and path only
%~nx1       - expands %1 to a file name and extension only
%~dp$PATH:1 - searches the directories listed in the PATH
               environment variable for %1 and expands to the
               drive letter and path of the first one found.
%~ftza1     - expands %1 to a DIR like output line 
```

当您运行 CALL /? 时，这也可以直接在命令提示符中找到。或为/？

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-09-21T20:44:03.507

从*[批处理文件中的文件名解析和更多成语 - Real's How-to](http://www.rgagnon.com/gp/gp-0008.html "批处理文件中的文件名解析和更多成语 - Real's How-to")*：

脚本所在的路径（不含驱动器）：~p0

脚本所在的驱动器：~d0

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-06-23T09:27:06.253

另一个很有帮助的技巧是，将当前目录设置为一个必须首先使用的**不同驱动器****`%~d0`**，然后**`cd %~dp0`**. 这会将目录更改为批处理文件的驱动器，然后更改为其文件夹。

对于#oneLinerLovers，**`cd /d %~dp0`**将同时更改驱动器和目录:)

希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-21T20:44:20.713

`%~d0`为您提供参数 0（脚本名称）的驱动器号，`%~p0`即路径。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-08-11T12:06:34.093

需要注意的一些问题：

如果**双击**批处理文件`%0`将被引号括起来。例如，如果您将此文件另存为`c:\test.bat`：

```
@echo %0
@pause 
```

双击它将打开一个带有输出的新命令提示符：

```
"C:\test.bat" 
```

但是，如果您首先打开命令提示符并直接从该命令提示符调用它，`%0`将引用您**键入**的任何内容。如果您输入`test.bat``Enter`， 的输出`%0`将没有引号，因为您没有输入引号：

```
c:\>test.bat
test.bat 
```

如果您输入`test``Enter`， 的输出也`%0`将没有扩展名，因为您没有输入任何扩展名：

```
c:\>test
test 
```

同样适用于 `tEsT``Enter`：

```
c:\>tEsT
tEsT 
```

如果您键入`"test"``Enter`， 的输出`%0`将有引号（因为您键入了它们）但没有扩展名：

```
c:\>"test"
"test" 
```

最后，如果您键入`"C:\test.bat"`，输出将与您双击它一样：

```
c:\>"C:\test.bat"
"C:\test.bat" 
```

请注意，这些并不是所有可能的值`%0`，因为您可以从其他文件夹调用脚本：

```
c:\some_folder>/../teST.bAt
/../teST.bAt 
```

上面显示的所有示例也会影响`%~0`，因为 的输出`%~0`只是`%0` 减引号（如果有）的输出。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-12T16:13:50.260

这段代码解释了 ~tilde 字符的使用，这对我来说是最令人困惑的事情。一旦我理解了这一点，它就会使事情变得更容易理解：

```
@ECHO off
SET "PATH=%~dp0;%PATH%"
ECHO %PATH%
ECHO.
CALL :testargs "these are days" "when the brave endure"
GOTO :pauseit
:testargs
SET ARGS=%~1;%~2;%1;%2
ECHO %ARGS%
ECHO.
exit /B 0
:pauseit
pause 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-25T18:00:51.480

它显示您当前所在的文件或目录的当前位置。例如；如果您的批处理文件在桌面目录中，则 "%~dp0" 将显示桌面目录。如果您希望它以当前文件名显示当前目录，您可以键入“%~dp0%~n0%~x0”。

# language-agnostic - 什么是不变量？

> ID：112064
> 
> 赞同：173
> 
> 时间：2008-09-21T20:42:21.060
> 
> 标签：language-agnostic, invariants

这个词似乎在许多情况下使用。我能想到的最好的是它们意味着一个无法改变的变量。这不是常量/finals（该死的Java！）的用途吗？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2008-09-21T20:48:21.030

不变量比变量更“概念化”。通常，它是程序状态的属性，始终为真。确保不变量成立的函数或方法被称为保持不变量。

例如，二叉搜索树可能具有这样的不变性：对于每个节点，该节点的左孩子的键小于该节点自己的键。为这棵树正确编写的插入函数将保持该不变量。

如您所知，这不是您可以存储在变量中的那种东西：它更多的是*关于*程序的陈述。通过弄清楚你的程序应该维护什么样的不变量，然后检查你的代码以确保它确实维护了这些不变量，你可以避免代码中的逻辑错误。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-09-21T20:44:13.350

这是您知道在逻辑中的特定位置始终为真的条件，并且可以在调试时检查以找出问题所在。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-09-21T20:45:25.700

维基百科的魔力：[不变量（计算机科学）](http://en.wikipedia.org/wiki/Invariant_(computer_science))

> 在计算机科学中，如果一个谓词为真，它将在整个特定的操作序列中保持为真，被称为该序列的（一个）不变量。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2008-09-21T20:45:19.710

我通常更多地从算法或结构的角度来看待它们。

例如，您可以有一个可以断言的循环不变量——在每次迭代的开始或结束时始终为真。也就是说，如果您的循环应该处理从一个堆栈到另一个堆栈的对象集合，您可以说 |stack1|+|stack2|=c，位于循环的顶部或底部。

如果不变量检查失败，则表明出现了问题。在此示例中，这可能意味着您忘记将已处理的元素推送到最终堆栈等。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2020-01-21T11:01:49.893

这个答案是给我 5 岁的孩子的。不要将不变量视为常数或固定数值。但它可以。然而，它不止于此。

相反，不变量类似于不同实体之间的固定关系。例如，与您的亲生父母相比，您的年龄将永远小于您的年龄。你的年龄和你父母的年龄都会随着时间的推移而变化，但我上面提到的关系是不变的。

不变量也可以是数值常数。例如， 的值`pi`是圆的周长与其直径之间的不变比率。不管圆有多大或多小，这个比例永远是`pi`。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-09-05T12:52:34.867

正如这一行所述：

> 在计算机科学中，如果一个谓词为真，它将在整个特定的操作序列中保持为真，被称为该序列的（一个）不变量。

为了更好地理解这一点，希望这个 C++ 示例有所帮助。

考虑一个场景，您必须获取一些值并在名为 as 的变量中获取它们的总数，`count`然后将它们添加到名为 as 的变量中`sum`

# **不变量**（再次更像是一个概念）：

```
// invariant:
// we have read count grades so far, and
// sum is the sum of the first count grades 
```

上面的代码是这样的，

```
int count=0;
double sum=0,x=0;
while (cin >> x) {
++count;
sum+=x;
} 
```

*上面的代码是做什么的？*

1) 读取输入`cin`并将它们放入`x`

2) 一次成功读取后，递增`count`和`sum = sum + x`

3）重复1-2直到读取停止（即ctrl+D）

# 循环不变量：

不变量必须是 True *ALWAYS*。所以最初你只用这个开始你的代码

```
while(cin>>x){
  } 
```

此循环从标准输入读取数据并存储在 x 中。好和好。但是**不变量变成了假，因为我们的****不变量**的第一部分没有被遵循（或保持为真）。

```
// we have read count grades so far, and 
```

# 如何保持不变量为真？

简单的！递增计数。

所以`++count;`会做得很好！现在我们的代码变成了这样，

```
while(cin>>x){
 ++count; 
 } 
```

# 但

即使现在我们的**不变量（一个必须为真的概念）也是假的，因为现在****我们**没有满足不变量的第二部分。

```
// sum is the sum of the first count grades 
```

那么现在该怎么办呢？

添加`x`并`sum`存储在`sum`( `sum+=x`) 中，下次 `cin>>x`将读取一个新值到 x 中。

现在我们的代码变成了这样，

```
while(cin>>x){
 ++count; 
 sum+=x;
 } 
```

# 让我们检查

# 代码是否匹配我们的不变量

```
// invariant:
// we have read count grades so far, and
// sum is the sum of the first count grades 
```

代码：

```
while(cin>>x){
 ++count; 
 sum+=x;
 } 
```

啊！。现在循环不变量*总是*True并且代码工作正常。

上面的示例*取自*Andrew-koening 和 Barbara-E的《 **Accelerated C++**》一书并对其进行了修改

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-21T21:16:24.567

在代码块中不会改变的东西

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-21T21:01:17.100

从本质上讲，不变量在编写干净的代码时非常有用，因为从概念上了解代码中应该存在哪些不变量可以*让*您轻松决定如何组织代码以实现这些目标。如前所述，它们在调试中也很有用，因为检查不变量是否被维护通常是查看您尝试执行的任何操作是否确实在执行您想要的操作的好方法。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-10T13:40:03.397

它通常是在某些数学运算下不会改变的量。一个**例子**是一个标量，它在旋转下不会改变。例如，在磁共振成像中，通过旋转不变量来表征组织特性是有用的，因为这样它的估计理想地不依赖于身体在扫描仪中的方向。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-09-07T18:29:49.627

这里的所有答案都很好，但我觉得我可以更清楚地说明这个问题：

从语言的角度来看，不变意味着永远不会改变的东西。虽然这个概念实际上来自数学，但它是与归纳法相结合的流行证明技术之一。

下面是一个证明的过程，如果你能找到一个处于初始状态的不变量，并且不管对该状态应用任何 [合法] 变换，这个不变量仍然存在，那么你可以证明如果某个状态没有这个invariant 那么它永远不会发生，无论对初始状态应用什么变换序列。

现在，以前的思维方式（再次与归纳结合）使得预测计算机软件的逻辑成为可能。当执行进入循环时尤其重要，其中不变量可用于证明某个循环将产生某个结果，或者它永远不会以某种方式改变程序的状态。

当不变量用于谓词循环逻辑时，它称为[循环不变量](https://en.wikipedia.org/wiki/Loop_invariant)。它可以在循环之外使用，但对于循环来说它非常重要，因为你经常有很多可能性，或者无限多的可能性。

请注意，我使用“谓词”一词来表示计算机软件的逻辑，而不是证明。这是因为虽然在数学[不变量](https://en.wikipedia.org/wiki/Invariant_(mathematics))中可以用作证明，但它永远不能证明计算机软件在执行时会产生预期的结果，因为软件是在许多抽象之上执行的，这是永远无法证明的他们将产生预期的结果（例如考虑硬件抽象）。

最后，虽然理论上和严格地预测软件逻辑只对医疗和军事等高度关键的应用程序很重要。在调试时，不变量仍然可以用来帮助典型的程序员。它可以用来知道某个位置的位置 程序失败是因为它未能保持某个不变量——我们中的许多人无论如何都在使用它而没有考虑它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-05-23T10:16:17.923

ADT 不变量指定数据字段（实例变量）之间的关系，在执行任何实例方法之前和之后必须始终为真。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-11-11T14:27:42.893

`Class Invariant`是在调用相关函数之前和之后应该始终为真的条件

例如平衡树有一个`Invariant`叫做`isBalanced`。当您通过某些方法（例如 addNode、removeNode...）修改树时 -`isBalanced`在修改树之前和之后应该始终为 true

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-07-09T17:55:20.240

[Java Concurrency in Practice](http://jcip.net/)一书中有一个关于不变量及其重要性的极好示例。

尽管以 Java 为中心，但该示例描述了一些负责计算所提供整数的因数的代码。示例代码尝试缓存提供的最后一个数字，以及为提高性能而计算的因素。在这种情况下，示例代码中没有考虑一个不变量，这使得代码在并发场景中容易受到竞争条件的影响。

[![在此处输入图像描述](https://i.stack.imgur.com/IArAn.png)](https://i.stack.imgur.com/IArAn.png)

# c++ - 这个 C++ 结构初始化技巧安全吗？

> ID：112085
> 
> 赞同：31
> 
> 时间：2008-09-21T20:46:37.947
> 
> 标签：c++, data-structures

不必记住初始化一个简单的“C”结构，我可以从它派生并在构造函数中将其归零，如下所示：

```
struct MY_STRUCT
{
    int n1;
    int n2;
};

class CMyStruct : public MY_STRUCT
{
public:
    CMyStruct()
    {
        memset(this, 0, sizeof(MY_STRUCT));
    }
}; 
```

这个技巧通常用于初始化 Win32 结构，有时可以设置无处不在的**cbSize**成员。

现在，只要没有用于 memset 调用销毁的虚函数表，这是一种安全的做法吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-08-22T03:15:07.087

您可以简单地对基础进行值初始化，并且其所有成员都将被清零。这是有保证的

```
struct MY_STRUCT
{
    int n1;
    int n2;
};

class CMyStruct : public MY_STRUCT
{
public:
    CMyStruct():MY_STRUCT() { }
}; 
```

为此，基类中不应有用户声明的构造函数，就像您的示例中一样。

没有讨厌`memset`的。不能保证`memset`在您的代码中有效，即使它应该在实践中有效。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-09-21T20:51:02.990

## 前言：

虽然我的答案仍然是好的，但我发现[litb 的答案](https://stackoverflow.com/questions/112085/is-this-c-structure-initialization-trick-safe/1315024#1315024)比我的要好，因为：

1.  它教会了我一个我不知道的技巧（litb的答案通常有这个效果，但这是我第一次写下来）
2.  它准确地回答了这个问题（即，将原始结构的部分初始化为零）

所以，请在我之前考虑一下 litb 的回答。事实上，我建议问题的作者将 litb 的答案视为正确的答案。

## 原始答案

将一个真正的对象（即std::string）等放入其中会破坏，因为真正的对象将在memset之前初始化，然后被零覆盖。

使用初始化列表对 g++ 不起作用（我很惊讶......）。而是在 CMyStruct 构造函数主体中对其进行初始化。它将是 C++ 友好的：

```
class CMyStruct : public MY_STRUCT
{
public:
    CMyStruct() { n1 = 0 ; n2 = 0 ; }
}; 
```

PS：当然，我假设您确实**无法**控制 MY_STRUCT。通过控制，您将直接在 MY_STRUCT 中添加构造函数而忘记了继承。请注意，您可以将非虚拟方法添加到类似 C 的结构中，并且仍然让它像结构一样运行。

编辑：在 Lou Franco 的评论之后添加了缺少的括号。谢谢！

编辑 2：我在 g++ 上尝试了代码，由于某种原因，使用初始化列表不起作用。我使用主体构造函数更正了代码。不过，该解决方案仍然有效。

请重新评估我的帖子，因为原始代码已更改（有关更多信息，请参阅更改日志）。

编辑 3：阅读 Rob 的评论后，我想他有一个值得讨论的观点：“同意，但这可能是一个巨大的 Win32 结构，可能会随着新的 SDK 而改变，所以 memset 是未来的证明。”

我不同意：了解微软，它不会因为他们需要完美的向后兼容性而改变。他们将创建一个扩展的 MY_STRUCT **Ex**结构，其初始布局与 MY_STRUCT 相同，末尾有附加成员，并且可以通过“大小”成员变量（如用于 RegisterWindow、IIRC 的结构）来识别。

因此，Rob 的评论中剩下的唯一有效点是“巨大的”结构。在这种情况下，也许 memset 更方便，但您必须使 MY_STRUCT 成为 CMyStruct 的变量成员，而不是从它继承。

我看到另一个 hack，但我想这会因为可能的结构对齐问题而中断。

编辑 4：请查看 Frank Krueger 的解决方案。我不能保证它是可移植的（我猜是），但从技术角度来看它仍然很有趣，因为它展示了一种情况，在 C++ 中，“this”指针“地址”从其基类移动到其继承类.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-21T20:56:34.020

比 memset 好得多，你可以使用这个小技巧：

```
MY_STRUCT foo = { 0 }; 
```

这会将所有成员初始化为 0（或它们的默认值 iirc），无需为每个成员指定值。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-21T20:52:48.647

这会让我感觉更安全，因为即使有一个`vtable`（或者编译器会尖叫）它也应该工作。

```
memset(static_cast<MY_STRUCT*>(this), 0, sizeof(MY_STRUCT)); 
```

我确信您的解决方案会起作用，但我怀疑在混合`memset`和上课时可以做出任何保证。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-21T21:06:43.873

这是将 C 习语移植到 C++ 的完美示例（以及为什么它可能并不总是有效......）

使用 memset 时会遇到的问题是，在 C++ 中，结构和类完全相同，只是默认情况下，结构具有公共可见性，而类具有私有可见性。

因此，如果稍后，一些善意的程序员像这样更改 MY_STRUCT 怎么办：

```
 struct MY_STRUCT
{
    int n1;
    int n2;

   // Provide a default implementation...
   virtual int add() {return n1 + n2;}  
}; 
```

通过添加该单一功能，您的 memset 现在可能会造成严重破坏。[comp.lang.c+](http://groups.google.com/group/comp.lang.c++/browse_thread/thread/43346fe9338fa50b/670fe22433a96c6f?lnk=st&q=memset+class+group%3Acomp.lang.c%2B%2B#670fe22433a96c6f)中有详细的讨论

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-22T09:14:01.877

这些示例具有“未指定的行为”。

对于非 POD，编译器布置对象（所有基类和成员）的顺序是未指定的 (ISO C++ 10/3)。考虑以下：

```
struct A {
  int i;
};

class B : public A {       // 'B' is not a POD
public:
  B ();

private:
  int j;
}; 
```

这可以布置为：

```
[ int i ][ int j ] 
```

或者作为：

```
[ int j ][ int i ] 
```

因此，直接在“this”的地址上使用 memset 是非常不确定的行为。上面的答案之一，乍一看似乎更安全：

```
 memset(static_cast<MY_STRUCT*>(this), 0, sizeof(MY_STRUCT)); 
```

但是，我相信，严格来说，这也会导致未指定的行为。我找不到规范文本，但是 10/5 中的注释说：“基类子对象的布局（3.7）可能与相同类型的最派生对象的布局不同”。

结果，我的编译器可以使用不同的成员执行空间优化：

```
struct A {
  char c1;
};

struct B {
  char c2;
  char c3;
  char c4;
  int i;
};

class C : public A, public B
{
public:
  C () 
  :  c1 (10);
  {
    memset(static_cast<B*>(this), 0, sizeof(B));      
  }
}; 
```

可以布置为：

```
[ char c1 ] [ char c2, char c3, char c4, int i ] 
```

在 32 位系统上，由于“B”的对齐等原因，sizeof(B) 很可能是 8 个字节。但是，如果编译器打包数据成员，sizeof(C) 也可以是“8”字节。因此，对 memset 的调用可能会覆盖赋予“c1”的值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-21T20:50:52.320

C++ 中不能保证类或结构的精确布局，这就是为什么你不应该从外部假设它的大小（这意味着如果你不是编译器）。

可能它可以工作，直到你找到一个它不支持的编译器，或者你将一些 vtable 加入其中。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T20:51:38.043

如果你已经有一个构造函数，为什么不直接用 n1=0 初始化它呢？n2=0；——这当然是更*正常*的方式。

编辑：实际上，正如 paercebal 所示，ctor 初始化更好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-21T20:54:00.283

我的意见是否定的。我也不确定它会得到什么。

随着您对 CMyStruct 的定义发生更改并添加/删除成员，这可能会导致错误。容易地。

为 CMyStruct 创建一个构造函数，它接受一个 MyStruct 有一个参数。

```
CMyStruct::CMyStruct(MyStruct &) 
```

或寻求的东西。然后，您可以初始化公共或私有“MyStruct”成员。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-21T22:14:08.563

从 ISO C++ 的角度来看，有两个问题：

(1) 对象是 POD 吗？首字母缩略词代表普通旧数据，标准列举了您在 POD 中不能拥有的内容（维基百科有一个很好的总结）。如果它不是 POD，则无法对其进行 memset。

(2) 是否存在所有位为零无效的成员？在 Windows 和 Unix 上，NULL 指针全为零；它不需要。浮点 0 在 IEEE754（这很常见）和 x86 中的所有位都为零。

Frank Kruegers 提示通过将 memset 限制为非 POD 类的 POD 基础来解决您的问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-21T22:25:07.163

试试这个 - 重载新的。

*编辑：我应该添加 - 这是安全的，因为在调用任何*构造函数之前内存被清零。大缺陷 - 仅在对象是动态分配的情况下才有效。

```
struct MY_STRUCT
{
    int n1;
    int n2;
};

class CMyStruct : public MY_STRUCT
{
public:
    CMyStruct()
    {
        // whatever
    }
    void* new(size_t size)
    {
        // dangerous
        return memset(malloc(size),0,size);
        // better
        if (void *p = malloc(size))
        {
            return (memset(p, 0, size));
        }
        else
        {
            throw bad_alloc();
        }
    }
    void delete(void *p, size_t size)
    {
        free(p);
    }

}; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-08-21T16:29:15.233

如果 MY_STRUCT 是您的代码，并且您乐于使用 C++ 编译器，则可以将构造函数放在那里而不用包装在类中：

```
struct MY_STRUCT
{
  int n1;
  int n2;
  MY_STRUCT(): n1(0), n2(0) {}
}; 
```

我不确定效率，但我讨厌在你没有证明效率是必要的时候耍花招。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2011-05-31T07:48:31.590

评论[litb 的回答](https://stackoverflow.com/questions/112085/is-this-c-structure-initialization-trick-safe/1315024#1315024)（似乎我还不能直接评论）：

即使使用这个不错的 C++ 风格的解决方案，您也必须非常小心，不要将它天真地应用于包含非 POD 成员的结构。

然后一些编译器不再正确初始化。

请参阅[此对类似问题的回答](https://stackoverflow.com/questions/2816752/can-a-member-struct-be-zero-init-from-the-constructor-initializer-list-without-ca/2816811#2816811)。我个人在 VC2008 上使用额外的 std::string 时体验不佳。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-22T16:23:32.420

这是一些代码，但它是可重用的；包含一次，它应该适用于任何 POD。您可以将此类的实例传递给任何需要 MY_STRUCT 的函数，或者使用 GetPointer 函数将其传递给将修改结构的函数。

```
template <typename STR>
class CStructWrapper
{
private:
    STR MyStruct;

public:
    CStructWrapper() { STR temp = {}; MyStruct = temp;}
    CStructWrapper(const STR &myStruct) : MyStruct(myStruct) {}

    operator STR &() { return MyStruct; }
    operator const STR &() const { return MyStruct; }

    STR *GetPointer() { return &MyStruct; }
};

CStructWrapper<MY_STRUCT> myStruct;
CStructWrapper<ANOTHER_STRUCT> anotherStruct; 
```

这样，您不必担心 NULL 是否全为 0 或浮点表示。只要 STR 是一个简单的聚合类型，一切都会奏效。当 STR 不是简单的聚合类型时，您会收到编译时错误，因此您不必担心意外误用它。此外，如果类型包含更复杂的内容，只要它具有默认构造函数，就可以：

```
struct MY_STRUCT2
{
    int n1;
    std::string s1;
};

CStructWrapper<MY_STRUCT2> myStruct2; // n1 is set to 0, s1 is set to ""; 
```

不利的一面是，由于您要制作额外的临时副本，因此速度较慢，并且编译器会将每个成员单独分配给 0，而不是一个 memset。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-22T19:01:50.670

我所做的是使用聚合初始化，但只为我关心的成员指定初始化器，例如：

```
STARTUPINFO si = {
    sizeof si,      /*cb*/
    0,              /*lpReserved*/
    0,              /*lpDesktop*/
    "my window"     /*lpTitle*/
}; 
```

其余成员将被初始化为适当类型的零（如 Drealmer 的帖子中所示）。在这里，您相信微软不会通过在中间添加新的结构成员来无缘无故地破坏兼容性（一个合理的假设）。这个解决方案给我的印象是最优的——一个语句，没有类，没有 memset，没有关于浮点零或空指针的内部表示的假设。

我认为涉及继承的黑客是可怕的风格。对于大多数读者来说，公共继承意味着 IS-A。另请注意，您从一个并非设计为基础的类继承。由于没有虚拟析构函数，通过指向基的指针删除派生类实例的客户端将调用未定义的行为。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-10-26T05:44:48.630

我假设该结构已提供给您并且无法修改。如果您可以更改结构，那么显而易见的解决方案是添加构造函数。

当您只需要一个简单的宏来初始化您的结构时，不要使用 C++ 包装器过度设计您的代码。

```
#include <stdio.h>

#define MY_STRUCT(x) MY_STRUCT x = {0}

struct MY_STRUCT
{
    int n1;
    int n2;
};

int main(int argc, char *argv[])
{
    MY_STRUCT(s);

    printf("n1(%d),n2(%d)\n", s.n1, s.n2);

    return 0;
} 
```

# css - 背景颜色横跨 ul 的整个宽度

> ID：112093
> 
> 赞同：3
> 
> 时间：2008-09-21T20:49:44.163
> 
> 标签：css

我有一个用于水平菜单的简单列表：

```
<ul>
    <h1>Menu</h1>
    <li>
      <a href="/" class="selected">Home</a>
    </li>
    <li>
      <a href="/Home">Forum</a>
    </li>
</ul> 
```

当我为所选类添加背景颜色时，只有文本获得颜色，我希望它拉伸部分的整个距离。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-21T20:51:51.677

a 元素是一个内联元素，这意味着它只适用于它所包含的文本。如果您希望背景颜色水平延伸，请将所选类应用于块级元素。将类应用于 li 元素应该可以正常工作。

或者，您可以将其添加到所选类的 CSS 中：

```
display: block; 
```

这将使 a 元素像块元素一样显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T21:30:52.503

Everyone is correct that your problem is that anchors are inline elements, but I thought it is also worth mentioning that you have an H1 inside of your list as well. The H1 isn't allowed there and should be pulled out of the UL or placed into an LI tag.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T20:53:10.113

像这样的东西会起作用吗？

```
.selected {
    display: block;
    width: 100%;
    background: #BEBEBE;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T20:53:46.897

将选定的类放在`<li>`而不是`<a>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T21:02:56.627

`<a>` elements are inline by default. This means that they don't establish their own block, they are just part of the text. You want them to establish their own block, so you should use `a { display: block; }` with an appropriate context. This also enables you to add padding to the `<a>` elements rather than the `<li>` elements, making their clickable area larger, and thus easier to use.

# java - 通过外部 Java 程序在网络浏览器上安全登录 Gmail

> ID：112102
> 
> 赞同：2
> 
> 时间：2008-09-21T20:51:12.647
> 
> 标签：java, gmail, browser

是否有从外部 Java 程序在网络浏览器上登录 Gmail 帐户的安全方法？我知道以下工作，但有没有更安全的选择？

```
Desktop.getDesktop().browse(new URI(
        "https://www.google.com/accounts/ServiceLoginAuth?continue=http://mail.google.com/gmail" +
        "&service=mail&Email=LOGIN&Passwd=PASSWORD&null=Sign+in")); 
```

**澄清**：外部 Java 程序是[GmailAssistant](http://gmailassistant.sourceforge.net/)，一个已经使用 JavaMail 的 IMAP 功能的 Gmail 通知程序。我只需要一种允许用户直接在网络浏览器中访问帐户的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T20:57:05.657

根据您想要集成的程度，您可以查看 Google 单点登录 (SSO) api。我正在研究如何使用它以及集成它的最佳方式

[http://code.google.com/apis/apps/sso/saml_reference_implementation.html](http://code.google.com/apis/apps/sso/saml_reference_implementation.html)

胜利者

更新：

作为更好的选择，您还应该检查此链接[http://esoeproject.org/](http://esoeproject.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T21:35:03.210

If you're really wanting to control a browser from Java, you'll have to use a web-connector such as [Selenium](http://selenium-rc.openqa.org/) or [WebDriver](http://code.google.com/p/webdriver/). Both of these let you control a browser directly from within Java and simulate a user typing text, clicking on links and submitting forms. One thing to keep in mind when doing this with Selenium is that it interacts with a complete new profile which is usually independent of your standard Firefox probile.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-21T20:52:17.167

如果您担心该链接在页面中可见，请创建一个向服务器发送 POST 请求的 javascript 文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T20:57:15.597

如果您想以编程方式访问 GMail 帐户的内容，我强烈建议您使用[Google 提供的 IMAP 访问](http://mail.google.com/support/bin/answer.py?hl=en&answer=75725)。

反过来看问题，您可以根据您的 Google 帐户设置[OpenID身份验证方案。](http://openid-provider.appspot.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T20:38:34.733

如果您担心为登录而发送的 URL，请了解：

1.  https:// 以 www.google.com 开头，会在*之前加密会话*
2.  发送登录详细信息（甚至是它要访问的页面

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T14:23:32.600

我使用 google 的 IMAP 访问和 JavaMail API，非常简单。

# javascript - 替换 Python 的 Javascript 解释器

> ID：112112
> 
> 赞同：21
> 
> 时间：2008-09-21T20:52:55.823
> 
> 标签：javascript, shell, scripting

在快速动态类型语言方面，我真的开始喜欢 Javascript，因为我在 Web 项目中经常使用它，特别是因为它使用与 Actionscript (flash) 相同的语法。

这将是一种理想的 shell 脚本语言，可以更轻松地从站点的前端和后端移动代码，并且减少 python 的奇怪语法。

是否有一个易于安装的好的 javascript 解释器（我知道有一个基于 java 的解释器，但这意味着安装所有要使用的 java 东西），

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-21T20:59:07.963

我个人使用 SpiderMonkey，但这里有一个广泛的[ECMAScript shell列表](http://www.discerning.com/burstproject.org/build/doc/shells.html)

在 Ubuntu 上安装和使用示例 spidermonkey：

```
$ sudo apt-get install spidermonkey
$ js myfile.js
output
$ js
js> var f = function(){};
js> f(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-21T20:56:57.000

当然，在 Windows 中，JavaScript 解释器是随操作系统一起提供的。

只需运行`cscript`或`wscript`针对任何 .js 文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-21T20:56:06.377

目前有四个大的 javascript 解释器。V8、松鼠鱼、蜘蛛猴和犀牛。我认为比性能更重要的是它与现有基础设施的集成程度，我猜 Rhino 与 Java 的桥梁在这里获胜。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-21T20:57:10.167

试试[jslibs](http://code.google.com/p/jslibs/)，一个专注于脚本的独立 JS 运行时和一组使用 SpiderMonkey（Gecko JS 引擎）的库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-21T22:47:58.777

在“易于翻译”主题上，还有[Lua](http://www.luausers.org)。

它有点类似于 Javascript，但更“正交”（更接近函数根）。

对“纯”编程理论的重定位使它变得非常小和快。它是最快的脚本语言，JIT 围绕着新出现的 JavaScript JIT 运行。

此外，由于它最初被认为是一种扩展语言，它有一个非常漂亮和干净的 C 接口，可以很容易地创建与您可能想要访问的任何 C 库的绑定。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T20:55:50.857

Google 的[V8](http://code.google.com/apis/v8/build.html)可以用作独立的解释器。配置 with`scons sample=shell`将构建一个名为 的可执行文件`shell`，可以像这样调用它`./shell file.js`：

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-21T20:57:04.237

您将需要一些服务器端 JavaScript 解释器。查看以下[博客文章](http://peter.michaux.ca/article/3001)。诸如[Rhino](http://www.mozilla.org/rhino/)之类的东西可能对您有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-21T20:57:14.520

您可以尝试使用[SquirrelFish](http://trac.webkit.org/wiki/SquirrelFish)或[v8](http://code.google.com/p/v8/)，两者都应该可以在命令行上运行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-21T20:58:52.893

仅供参考，现代 Windows 平台上已经有一个内置的。您需要使用 JScript，但它已经足够接近了。相同的环境也允许使用 VBScript。要运行程序，您可以执行以下操作：

cscript foo.js

如果您期望与基本 JS 对象具有相同的灵活性，Windows 系统 API 会有点奇怪和令人沮丧，但如果您可以处理挖掘 MSDN 页面并查看 VBScript 中的所有示例，它们确实有完整的文档。

不确定在 js shell 方面可用于 Linux/Mac 的内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T09:26:54.093

好吧，出于安全原因，javascript 没有被设计为提供文件访问权限。所以作为一种脚本语言，它有点受限。

但是，如果你真的想，蜘蛛猴是你最好的选择。这是一个教程：

[http://developer.mozilla.org/en/Introduction_to_the_JavaScript_shell](http://developer.mozilla.org/en/Introduction_to_the_JavaScript_shell)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-05T09:26:34.187

节点.JS。这很棒。有很多模块。您可以使用 Node.js 编写所有文件脚本。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2008-09-21T20:55:20.967

在我这些年里，我发现大多数 Javascript 开发人员发现迁移到 PHP 很容易，反之亦然 - 这不是您问题的直接答案，尽管如果您使用 ActionScript 和 JavaScript，那么您最好坚持使用 PHP 之类的东西（如果您不愿意迁移到 Java，并坚持使用 ECMA 基础）

# web-services - 在与 Web 服务通信时，我应该在我的方法前面加上“get”还是“load”？

> ID：112121
> 
> 赞同：1
> 
> 时间：2008-09-21T20:55:38.767
> 
> 标签：web-services, naming-conventions

我正在编写一个与 Web 服务通信的桌面应用程序。您能否将所有获取数据的 Web 服务函数命名为**Load** XXXX，因为它们需要一段时间才能执行。或者你会使用**Get** XXXX，例如当只获取一个对象时。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-21T22:11:48.507

当方法返回 XXXX 时使用 MyObject.GetXXXX()。

当 XXXX 将被加载到 MyObject 中时使用 MyObject.LoadXXXX()，换句话说，当 MyObject 控制 XXXX 时。

我猜这同样适用于网络服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-21T20:59:13.967

如果您希望它花费“文件时间”，我会使用 Load，如果您希望它花费“简单 DB”时间，我会使用 Get。

也就是说，如果调用很昂贵，请使用“加载”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-21T20:57:43.037

**得到**。然后提供一种异步调用它们的方法，以强调它们可能会出去吃午饭一段时间......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T22:23:15.497

做动词暗示的事情。GetXXX 表示正在向调用者返回某些内容，而 LoadXXX 不一定返回某些内容，因为它可能只是将某些内容加载到内存中。

对于 API，使用 GetXXX 让调用者清楚将返回某些内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T21:04:39.120

始终使用 Get，除非在实际加载某些内容时（例如，将文件加载到内存中）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-21T21:05:25.420

当我阅读 LoadXXX 时，我已经在想数据来自某些存储介质。由于网络服务在云端，GetXXX 感觉更自然。

# project-management - 真正做一件事需要多长时间？

> ID：112131
> 
> 赞同：4
> 
> 时间：2008-09-21T20:57:07.407
> 
> 标签：project-management, time-management

我的意思是请说出你做过的一个编程项目以及花了多长时间。老板从来没有抱怨过，但我有时觉得事情太久了。但这可能是因为我也没有耐心。让我知道您的经验以进行比较。

我还注意到，事情似乎总是比原计划花费更长的时间，有时甚至更长。我不知道为什么我们不开始计划它，但我认为这可能是出于激励目的。

瑞安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-21T21:08:00.063

最好简单地给自己计时，记录你的估计并确定你的平均百分比。鉴于此，只要您始终如一，您就可以根据您认为可以完成它的时间来适当地估计实际时间。这不仅仅是确定你在估计方面有多糟糕，而是要考虑到不可避免的干扰的规律性（个人和基于老板/客户的）。

这是基于 Joel Spolsky 的[Evidence Based Scheduling](http://www.joelonsoftware.com/items/2007/10/26.html)，必读，因为他解释说，主要的另一个重要方面是将您的任务分解为一口大小（最多 16 小时）的任务，估计并将它们加在一起以达到您的最终项目全部的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T21:03:15.813

基于直觉的估计伴随着经验，但您确实需要详细说明所涉及的任务才能获得合理的结果。

如果您有规范或至少有一些限制，您可以开始创建任务（设计用户页面、设计标签页面、实现用户页面、实现标签页面、编写标签查询，...）。

完成此操作后，将其加起来并加倍。如果你将不得不与他人协调，那就三倍。

边走边详细记录你的实际时间，这样你就可以评估你在项目完成时的准确程度，并磨练你的估算技能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T21:14:57.317

我完全同意之前的海报......不要忘记你团队的工作量。仅仅因为您估计一个项目需要 3 个月，这并不意味着它会在任何地方完成。

我在一个较小的团队中工作（5 名开发人员，1 名领导），我们中的许多人同时从事多个项目——有些大，有些小。根据项目的优先级、管理层的突发奇想和其他团队的可用性（如果需要），项目的工作会分散在其他团队中。

所以，是的，3 个月的工作可能已经结束，但在 6 个月的时间内可能需要 3 个月的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-21T20:58:54.187

我自己完成了 1 到 6 个月的项目，而且我总是倾向于将我最初的估计增加一倍或四倍。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T21:12:26.917

实际上不可能比较两个编程项目，因为有太多因素意味着仅来自的指标不适用于另一个（例如，使用的特定技术、开发人员的先前经验、不断变化的需求）。除非您要淘汰另一个与您之前构建的系统几乎相同的系统，否则您的估计准确的可能性很小。

需要注意的是，当您与同一个团队构建现有系统的下一个版本时；获得的具体经验确实提高了估计下一批工作的能力。

我在估计方法上看到了太多尝试，但都没有奏效。它们可能具有伪科学的魅力，但它们在实践中根本行不通。

唯一有意义的答案是敏捷倡导者所倡导的相对较短的迭代：选择一个可以在短时间内执行的工作范围，交付它，然后进行下一轮。然后在短期基础上分配预算，利益相关者能够评估他们的资金是否得到有效使用。如果要花很长时间才能到达任何地方，他们可以放弃该项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T22:41:21.663

霍夫斯塔德定律：

“即使考虑到霍夫施塔特定律，它也总是比你预期的要花更长的时间。”

我相信这是因为：

*   工作扩展以填补可用的时间。无论你如何无情地削减不必要的功能，如果最后期限更紧，你会更加残酷。
*   项目过程中出现意想不到的问题。

无论如何，比较轶事确实具有误导性，部分原因是人们有选择性记忆。如果我告诉你有一次我花了两个小时来编写一个完全优化的快速排序，那么我可能忘记了一个事实，即我知道我会提前一周完成这项任务，并且一直在思考想法。也许我忘记了其中有一个错误，一周后我又花了两个小时修复。

我几乎肯定会忽略所有正在进行的非编程工作：会议、架构设计、咨询其他被困在我碰巧知道的事情上的人、管理员。因此，在“坐在那里编码”方面考虑一个看似合理的工作速度，并期望它一直持续下去，这对你自己是不公平的。这是在您“应该更快”之后产生很多感觉的来源。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-21T21:04:39.197

我做的项目从 2 周到 1 年不等。一般来说，我的估计是相当好的，*后验的*。然而，在项目开始时，我通常会因为我的估计被认为太大而受到抨击。

这是因为我考虑了很多人们忘记的事情：

*   错误修复时间
*   部署时间
*   管理/会议/互动时间
*   是时候让需求所有者改变主意了
*   ETC

诀窍是使用基于证据的调度（参见 Joel on Software）。

问题是，如果您计划多花一点时间，如果没有出现问题，您将使用它来改进代码库。如果出现问题，您仍在估计范围内。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-21T21:15:59.077

我相信 Joel 写过一篇文章：你能做的就是让团队中的每个开发人员详细列出他的任务（需要完成的所有步骤是什么）并要求他们估计每个步骤所需的时间. 稍后，当项目完成后，将实时时间与估计时间进行比较，您将了解每个开发人员的偏差。当一个新项目开始时，请他们再次评估时间，并将其与每个开发人员的偏见相乘，以获得接近实际预期的值。

在几个项目之后，你应该有很好的估计。

# java - 在 30GB XML 数据集上搜索正则表达式模式。使用 16GB 内存

> ID：112154
> 
> 赞同：3
> 
> 时间：2008-09-21T21:04:07.357
> 
> 标签：java, xml

我目前有一个 Java SAX 解析器，它从 30GB XML 文件中提取一些信息。

目前是：

*   读取每个 XML 节点
*   将其存储到字符串对象中，
*   在字符串上运行一些正则表达式
*   将结果存储到数据库

对于几百万个元素。我在具有 16GB 内存的计算机上运行它，但内存没有被充分利用。

有没有一种简单的方法可以从输入文件中动态地“缓冲”大约 10gb 的数据？

我怀疑我可以手动获取“生产者”“消费者”多线程版本（在一侧加载对象，使用它们并在另一侧丢弃），但是该死，XML 现在很古老，没有有效的库来处理它们?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T04:06:00.790

1.  只是为了覆盖基础，Java 可以使用你的 16GB 吗？您（显然）需要使用 64 位操作系统，并且需要使用 -d64 -XMx10g 运行 Java（或者您想为其分配多少内存）。

2.  内存极不可能成为您正在做的事情的限制因素，因此您真的不应该看到它被充分利用。您应该受 IO 或 CPU 限制。最有可能的是 IO。如果是，IO，请确保您正在缓冲流，然后您就完成了；你唯一能做的就是买一个更快的硬盘。

3.  如果您确实受 CPU 限制，那么您可能会遇到正则表达式而不是 XML 解析的瓶颈。

    看到[这个](http://mailinator.blogspot.com/2008/01/how-to-search-for-word-pen1s-in-185.html)（引用[这个](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-optimizingregex.html?page=2)）

4.  如果您的瓶颈在 SAX，您可以尝试其他实现。在我的脑海中，我可以想到以下替代方案：

    *   StAX（有多种实现；[Woodstox](http://woodstox.codehaus.org/)是最快的实现之一）
    *   [Javolution](http://javolution.org/api/javolution/xml/stream/XMLStreamReader.html)
    *   [使用JFlex](http://jflex.de/)自己动手
    *   滚动你自己的临时，例如使用正则表达式

    对于最后两个，您的 XML 子集越受限制，您的效率就越高。

5.  这很难说，但正如其他人所提到的，XML 原生数据库可能是您的一个不错的选择。我在这些方面的经验有限，但我知道至少[Berkeley DB XML](http://www.oracle.com/database/berkeley-db/xml/index.html)支持基于 XPath 的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T21:10:51.133

没有 Java 经验，抱歉，但也许您应该更改解析器？SAX 应该按顺序工作，并且不需要缓冲大部分文件......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-21T21:17:29.667

SAX 本质上是“事件驱动的”，因此您应该从一个元素到另一个元素保持的唯一状态是与该元素相关的状态，而不是与整个文档相关的状态。您还保持什么其他状态，为什么？随着每个“完整”节点（或一组节点）的出现，您应该丢弃它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-21T22:28:40.557

首先，试着找出是什么让你慢了下来。

*   从内存中解析时解析器的速度有多快？
*   使用`BufferedInputStream`大尺寸的有帮助吗？

拆分 XML 文件容易吗？通常，洗牌 30 GiB 的任何类型的数据都需要一些时间，因为您必须先从硬盘驱动器加载它，所以您总是受到速度的限制。您可以将负载分配到多台机器上吗，也许可以使用[Hadoop](http://hadoop.apache.org/core/)之类的东西？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-21T21:13:56.897

我真的不明白你想用这么多的 XML 做什么，但我的印象是

*   对于存储的数据，使用 XML 是错误的
*   您正在缓冲超出您应该做的事情（并且您这样做放弃了 SAX 解析的所有优势）

除此之外：XML 并不古老，并且被大量和积极地使用。您认为所有这些交互式网站都使用了哪些交互元素？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-21T21:25:40.020

您是否因对数据库的多次小提交而减慢速度？听起来您几乎会一直从程序中写入数据库，并确保您不经常提交可以提高性能。可能还准备您的报表和其他标准批量处理技巧可能会有所帮助

除了这个早期的评论，我们需要更多的信息——你有没有一个手边的分析器可以找出导致事情运行缓慢的原因

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T00:17:38.797

您可以使用 Jibx 库，并将您的 XML“节点”绑定到表示它们的对象。您甚至可以重载 ArrayList，然后当添加 x 个对象时，一次执行所有正则表达式（可能使用执行此逻辑的对象上的方法），然后在允许“添加”方法之前将它们保存到数据库中再次完成。

Jibx 托管在 SourceForge 上：[Jibx](http://jibx.sourceforge.net)

详细说明：您可以将您的 XML 绑定为这些专用字符串持有者的“集合”。因为您将其定义为一个集合，所以您必须选择要使用的集合类型。然后，您可以指定自己的 ArrayList 实现。

重写 add 方法如下（忘记返回类型，例如假设为 void）：

```
public void add(Object o) {
    super.add(o);
    if(size() > YOUR_DEFINED_THRESHOLD) {
        flushObjects();
    }
}

YOUR_DEFINED_THRESHOLD 
```

是要在数组列表中存储多少对象，直到它必须被刷新到数据库中。冲洗对象（）；只是将执行此逻辑的方法。该方法将阻止从 XML 文件添加对象，直到此过程完成。但是，这没关系，无论如何，数据库的开销可能会比文件读取和解析大得多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-21T21:16:38.340

我建议首先将您的海量 XML 文件导入**本地 XML 数据库**（如果您正在寻找开源的东西，例如[eXist ，从未自己测试过），然后执行](http://exist.sourceforge.net/)**迭代分页查询**以一次处理您的数据小块。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-21T21:37:04.563

您可能想尝试使用[Stax](http://stax.codehaus.org/)而不是 SAX，我听说它更适合那种事情（我自己没有使用过）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T15:56:18.807

如果 XML 中的数据是顺序无关的，您是否可以多线程进程来拆分文件或从文件中的不同位置开始运行多个进程？如果您不受 I/O 限制，那应该有助于加快速度。

# javascript - + 运算符的性能是否低于 StringBuffer.append()

> ID：112158
> 
> 赞同：91
> 
> 时间：2008-09-21T21:04:34.720
> 
> 标签：javascript, string, concatenation

在我的团队中，我们通常像这样进行字符串连接：

```
var url = // some dynamically generated URL
var sb = new StringBuffer();
sb.append("<a href='").append(url).append("'>click here</a>"); 
```

显然，以下内容更具可读性：

```
var url = // some dynamically generated URL
var sb = "<a href='" + url + "'>click here</a>"; 
```

但是 JS 专家声称该`+`运算符的性能不如`StringBuffer.append()`. 这是真的吗？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2008-09-21T21:10:29.587

您的示例不是一个好示例，因为性能不太可能有显着差异。在您的示例中，可读性应该胜过性能，因为一个与另一个的性能增益可以忽略不计。数组 (StringBuffer) 的好处只有在您进行许多连接时才会显现出来。即使那样，您的里程也可能非常取决于您的浏览器。

这是一个详细的性能分析，显示了在许多不同浏览器中使用所有不同 JavaScript 连接方法的性能；[字符串性能分析](http://www.sitepen.com/blog/2008/05/09/string-performance-an-analysis/)

![join() 一次， concat() 一次， join() for， +​​= for， concat() for](https://i.stack.imgur.com/FcI38.jpg)

更多：
[Ajaxian >> IE 中的字符串性能：Array.join vs += 续](http://ajaxian.com/archives/string-performance-in-ie-arrayjoin-vs-continued)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-09-21T22:26:10.077

Internet Explorer 是当今世界上唯一真正受此困扰的浏览器。（版本 5、6 和 7 非常慢。8 没有表现出同样的降级。）更重要的是，IE 变得越来越慢，字符串越长。

如果你有很长的字符串要连接，那么一定要使用 array.join 技术。（或一些围绕它的 StringBuffer 包装器，以提高可读性。）但如果你的字符串很短，请不要打扰。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2008-09-21T21:06:21.547

是的，这是真的，但你不应该在意。选择更容易阅读的那个。如果您必须对您的应用程序进行基准测试，那么请关注瓶颈。

我猜想字符串连接不会成为你的瓶颈。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2008-09-21T21:10:37.920

同意[迈克尔·哈伦](https://stackoverflow.com/questions/112158/javascript-string-concatenation#112164)。

如果性能确实是一个问题，还可以考虑使用数组和连接。

```
var buffer = ["<a href='", url, "'>click here</a>"];
buffer.push("More stuff");
alert(buffer.join("")); 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2008-09-21T21:08:14.790

试试这个：

```
var s = ["<a href='", url, "'>click here</a>"].join(""); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-09-21T21:08:28.547

JavaScript 没有本机 StringBuffer 对象，所以我假设这是来自您正在使用的库，或者是不寻常的主机环境（即不是浏览器）的功能。

我怀疑一个库（用 JS 编写）会更快地产生任何东西，尽管本机 StringBuffer 对象可能会。可以使用分析器找到明确的答案（如果您在浏览器中运行，那么 Firebug 将为您提供 Firefox 中的 JS 引擎的分析器）。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-09-21T21:20:39.377

就像一些用户已经注意到的那样：这与小字符串无关。

Firefox、Safari 或 Google Chrome 中的新 JavaScript 引擎进行了优化

```
"<a href='" + url + "'>click here</a>"; 
```

一样快

```
["<a href='", url, "'>click here</a>"].join(""); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-09-21T21:08:36.987

用 Knuth 的话来说，“过早的优化是万恶之源！” 无论哪种方式的小差异最终很可能不会产生太大影响。我会选择更具可读性的。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-12-03T08:55:29.477

更易于阅读的方法在查看代码时为人们节省了可察觉的时间，而“更快”的方法仅在人们浏览页面时浪费了难以察觉且可能可忽略不计的时间。

我知道这篇文章很蹩脚，但我不小心发布了一些完全不同的东西，以为这是一个不同的主题，我不知道如何删除帖子。我的错...

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-09-21T20:42:40.860

[使用jspref.com](http://jsperf.com/)设置快速基准并检查 Javascript 性能变化非常容易。当这个问题被问到时，它可能并不存在。但是对于遇到这个问题的人来说，他们应该看看这个网站。

[我在http://jsperf.com/string-concat-methods-test](http://jsperf.com/string-concat-methods-test)对各种连接方法进行了快速测试。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-08-07T04:14:27.023

我喜欢使用函数式风格，例如：

```
function href(url,txt) {
  return "<a href='" +url+ "'>" +txt+ "</a>"
}

function li(txt) {
  return "<li>" +txt+ "</li>"
}

function ul(arr) {
  return "<ul>" + arr.map(li).join("") + "</ul>"
}

document.write(
  ul(
    [
      href("http://url1","link1"),
      href("http://url2","link2"),
      href("http://url3","link3")
    ]
  )
) 
```

这种风格看起来可读且透明。它导致了实用程序的创建，从而减少了代码的重复。

这也倾向于自动使用中间字符串。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-21T21:12:35.200

据我所知，每个连接都意味着内存重新分配。所以问题不在于操作者习惯做的事情，解决方法是减少连接的数量。例如，尽可能在迭代结构之外进行连接。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-21T21:10:06.267

是的，根据通常的基准。例如：http : [//mckoss.com/jscript/SpeedTrial.htm](http://mckoss.com/jscript/SpeedTrial.htm)。

但对于小弦来说，这无关紧要。您将只关心非常大的琴弦上的演奏。更重要的是，在大多数 JS 脚本中，瓶颈很少出现在字符串操作上，因为它还不够。

你最好看看 DOM 操作。

# language-agnostic - How do you maintain your program vocabulary?

> ID：112161
> 
> 赞同：5
> 
> 时间：2008-09-21T21:05:17.527
> 
> 标签：language-agnostic, vocabulary

In a not-so-small program, when you have not-so-few entities, in order to maintain code readability, common terms, and otherwise improve mutual understanding between team members, one have to define and maintain **program vocabulary**.

How do you (or your company) deal with this task, what discipline do you have, what arrangements do you introduce?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-21T21:08:34.040

Most projects of reasonable size should have a programming/coding standards document that dictates common conventions and naming guidelines that should be followed.

Another way to help with this is through code reviews. Obviously some coordination among reviewers is required (the document helps with that, too). Code reviews help keep the greener devs and senior devs alike on track and act as an avenue to enforce the coding standards.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-21T22:43:24.047

@Ilya Ryzhenkov，

恐怕大多数公司都没有这样的做法 :) 我曾在一家拥有数百万 LOC 代码库的不那么小的公司工作，他们根本没有任何文档（除了通用编码指南）

在我的一个项目中，我们维护了应用程序领域中常用术语的词库，并在代码审查期间使用它。我不时分析 .NET XML 文档差异，以决定应将哪些实体\术语添加到同义词库中。强制遵守词库的唯一方法是编码指南。

Wiki 方法被证明是不适用的，因为没有人关心定期更新它:)

我想知道您在 JetBrains 使用什么方法？我在 Reflector 中检查了 ReSharper 的代码，对实体的数量和名称感到惊讶 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T21:10:11.977

Divide your packages/modules into logical groups and use descriptive and concise names. Avoid generic names except if they are really counters etc. Create conventions for groups of functions or functionality and stick to them.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-21T21:11:12.427

Domain Driven Design is interesting here, since it encourages programmers to embrace the domain vocabulary. On top of that, there is some design conventions, which allow you to refer parts of your application using well known terms, like services, repositories, factories, etc.

Combining domain vocabulary and using technical conventions above it could be a good solution.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-21T21:11:44.077

My team keeps this kind of information (conventions/vocabulary etc.) on a wiki. This makes it easy to keep up to date and share.

# twitter - 如何让我的 Twitter 提要与博客集成（带有单独的评论线程）？

> ID：112162
> 
> 赞同：1
> 
> 时间：2008-09-21T21:05:21.037
> 
> 标签：twitter, comments, customization, blogs

我想创建一个博客，我的 Twitter 更新基本上是创建带有评论线程的博客帖子。如果现在没有博客软件可以做到这一点（我做了一些搜索，但找不到评论方面），那么最简单的方法是什么并启动博客软件来做到这一点？

一种可能的替代方法是博客界面，它可以使用标题文本自动更新我的 Twitter 提要。

不管是什么解决方案，我都希望它是完全自动化的，这样它基本上不会比目前使用 Twitter Web 界面更新我的 Twitter 提要更多的工作。注意：我也对通过默认博客 Web 管理界面进行“正常”博客发布感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-21T21:11:41.643

您可以使用带有[Disqus](http://disqus.com)评论的[Tumblr](http://tumblr.com)或[Sweetcron 之类的东西。](http://www.sweetcron.com/)您可以自动导入您的 Twitter/Flickr/任何 RSS 提要。您还可以从站点管理员发布文本/音频/视频。您必须手动添加 Disqus 评论，但随后每个帖子或 Twitter 消息都会有自己的线程评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-21T21:24:53.533

如果您想使用 Wordpress，可以使用[Twitter 工具](http://alexking.org/projects/wordpress)插件。

> “将您的推文拉入您的博客，并在博客文章和 WordPress 中创建新的推文。”

每条推文/博客文章都会自动启用评论。

祝你好运，

布赖恩·吉安福卡罗

# .net - 谷歌浏览器破坏了 ShellExecute()？

> ID：112169
> 
> 赞同：2
> 
> 时间：2008-09-21T21:07:57.677
> 
> 标签：.net, google-chrome, shellexecute

多年来，我一直在使用 ShellExecute() API 从我的应用程序中启动默认的 Web 浏览器。像这样：

```
ShellExecute( hwnd, _T("open"), 
    _T("http://www.winability.com/home/"), 
    NULL, NULL, SW_NORMAL ); 
```

它一直运行良好，直到几周前谷歌发布了它的 Chrome 浏览器。现在，如果计算机上安装了 Chrome，ShellExecute API 将不再打开网页。

有没有人想出如何解决这个问题？（没有检测到 Chrome 并显示一条消息告诉用户这是 Chrome 的错？）

编辑：谢尔盖提供的代码似乎有效，所以我接受了它作为“答案”。除了我不喜欢对 WinExec 的调用：MSDN 读到 WinExec 只是为了与 16 位应用程序兼容而提供的。IOW，它可能会停止使用任何服务包。我没有尝试过，但如果它已经停止在 Windows x64 上工作，我不会感到惊讶，因为它根本不支持 16 位应用程序。因此，我将使用 ShellExecute 而不是 WinExec，它的路径与 Sergey 的代码一样从注册表中获取，并将 URL 作为参数。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-21T21:17:31.803

这是适用于所有浏览器的代码。诀窍是在 ShellExecute 失败时调用 WinExec。

```
HINSTANCE GotoURL(LPCTSTR url, int showcmd)
{
    TCHAR key[MAX_PATH + MAX_PATH];

    // First try ShellExecute()
    HINSTANCE result = 0;

    CString strURL = url;

    if ( strURL.Find(".htm") <0 && strURL.Find("http") <0 )
        result = ShellExecute(NULL, _T("open"), url, NULL, NULL, showcmd);

    // If it failed, get the .htm regkey and lookup the program
    if ((UINT)result <= HINSTANCE_ERROR) {

        if (GetRegKey(HKEY_CLASSES_ROOT, _T(".htm"), key) == ERROR_SUCCESS) {
            lstrcat(key, _T("\\shell\\open\\command"));

            if (GetRegKey(HKEY_CLASSES_ROOT,key,key) == ERROR_SUCCESS) {
                TCHAR *pos;
                pos = _tcsstr(key, _T("\"%1\""));
                if (pos == NULL) {                     // No quotes found
                    pos = strstr(key, _T("%1"));       // Check for %1, without quotes
                    if (pos == NULL)                   // No parameter at all...
                        pos = key+lstrlen(key)-1;
                    else
                        *pos = '\0';                   // Remove the parameter
                }
                else
                    *pos = '\0';                       // Remove the parameter

                lstrcat(pos, _T(" \""));
                lstrcat(pos, url);
                lstrcat(pos, _T("\""));
                result = (HINSTANCE) WinExec(key,showcmd);
            }
        }
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:51:55.237

在听到 ShellExecute 在少数系统上失败的报告后，我实现了一个类似于 Sergey Kornilov 给出的示例的功能。这是大约一年前的事了。相同的前提 - 对 .HTM 文件处理程序进行直接 HKCR 查找。

然而，事实证明，有些用户拥有将自己注册到“打开”.htm 文件（而不是“编辑”它们）的编辑器（例如 UltraEdit）。因此，*如果*ShellExecute 失败，则此辅助方法在这些情况下也会失败。它会打开编辑器，正如 shell 协会错误地指示的那样。

**因此，用户应该使用 HTTP 处理程序，或者至少优先使用 HTML 处理程序。**

# php - php.ini & SMTP= - 你如何传递用户名和密码

> ID：112190
> 
> 赞同：70
> 
> 时间：2008-09-21T21:11:35.013
> 
> 标签：php, smtp, email

`My ISP`帐户要求我发送出站`SMTP`邮件的用户名和密码。

执行时如何`PHP`使用它`php.mail()?`该`php.ini`文件仅包含服务器的条目`(SMTP= )`和`From: (sendmail_from= )`.

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-09-21T22:02:10.883

PHP`mail()`命令不支持身份验证。您的选择：

1.  [PHPMailer](http://sourceforge.net/projects/phpmailer) -[教程](http://phpmailer.codeworxtech.com/index.php?pg=tutorial#2)
2.  [梨](http://pear.php.net/package/Mail)-[教程](http://email.about.com/od/emailprogrammingtips/qt/et073006.htm)
3.  自定义函数 - 请参阅注释部分中的各种解决方案：http: [//php.net/manual/en/ref.mail.php](http://php.net/manual/en/ref.mail.php)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-03-13T18:29:36.123

我在 php.ini 文件上应用了以下详细信息。它工作正常。

```
SMTP = smtp.example.com
smtp_port = 25
username = info@example.com
password = yourmailpassord
sendmail_from = info@example.com 
```

这些详细信息与 Outlook 设置相同。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-02-19T20:38:29.277

使用[Fake sendmail for Windows](http://glob.com.au/sendmail/)发送邮件。

1.  创建一个名为 的文件`sendmail`夹`C:\wamp\`。
2.  在文件夹中提取这 4 个文件`sendmail`：`sendmail.exe`、`libeay32.dll`和.`ssleay32.dll``sendmail.ini`
3.  然后配置`C:\wamp\sendmail\sendmail.ini`：

> ```
> smtp_server=smtp.gmail.com
> smtp_port=465
> auth_username=user@gmail.com
> auth_password=your_password 
> ```

4.  以上将适用于 Gmail 帐户。然后配置php.ini：

    > sendmail_path = "C:\wamp\sendmail\sendmail.exe -t"

5.  现在，重新启动 Apache，这基本上就是您需要做的所有事情。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2011-08-04T12:27:46.183

PHP**确实**对邮件命令进行了身份验证！

以下在 WAMPSERVER 上为我工作（windows，php 5.2.17）

php.ini

```
[mail function]
; For Win32 only.
SMTP = mail.yourserver.com
smtp_port = 25
auth_username = smtp-username
auth_password = smtp-password
sendmail_from = you@yourserver.com 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-06-27T01:16:25.683

1.  安装 Postfix（与 Sendmail 兼容）。
2.  编辑`/etc/postfix/main.cf`阅读：

```
#Relay config
relayhost = smtp.server.net
smtp_use_tls=yes
smtp_sasl_auth_enable=yes
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_tls_CAfile = /etc/postfix/cacert.pem
smtp_sasl_security_options = noanonymous 
```

3.  创建`/etc/postfix/sasl_passwd`，输入：

```
smtp.server.net username:password 
```

4.  类型 ＃`/usr/sbin/postmap sasl_passwd`

5.  然后运行：`service postfix reload`

现在 PHP 将像往常一样使用该`sendmail -t -i`命令运行邮件，Postfix 将拦截它并将其中继到您提供的 SMTP 服务器。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-21T21:25:24.530

我更喜欢[PHPMailer](http://phpmailer.codeworxtech.com/)工具，因为它不需要 PEAR。但无论哪种方式，您都有一个误解：您不想要 SMTP 用户和密码的 PHP 服务器范围的设置。这应该是每个应用程序（或每个页面）的设置。如果你想在不同的 PHP 页面中使用相同的帐户，请将其添加到某种 settings.php 文件中。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-03-10T00:42:15.770

经过一整天的努力，我终于找到了解决方案。这是我使用 WAMP 从 Windows XP 发送的方法。

1.  使用 Google 的 SMTP 服务器。您可能需要一个帐户。
2.  下载并安装[Fake Sendmail](http://glob.com.au/sendmail/)。我刚刚下载了它，解压缩并将它放在 WAMP 文件夹中。
3.  创建一个测试 PHP 文件。见下文。

> ```
> <?php
>     $message = "test message body";
>     $result = mail('recipient@some-domain.com', 'message subject', $message);
>     echo "result: $result";
> ?> 
> ```

4.  更新您的 php.ini 文件和 sendmail.ini 文件（sendmail.ini 位于 sendmail 文件夹中）。
5.  如果它不起作用，请检查您刚刚创建的 sendmail 文件夹中的 error.log 文件。

参考：

*   [http://www.geekzone.co.nz/tonyhughes/599](http://www.geekzone.co.nz/tonyhughes/599)
*   [http://www.joshstauffer.com/send-test-emails-with-wampserver/](http://www.joshstauffer.com/send-test-emails-with-wampserver/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-21T23:33:09.960

这些答案已经过时和贬值。最佳实践..

```
composer require phpmailer/phpmailer 
```

sendmail.php 文件中的下一个只需要以下内容

```
# use namespace
use PHPMailer\PHPMailer\PHPMailer;

# require php mailer
require_once "../vendor/autoload.php";

//PHPMailer Object
$mail = new PHPMailer;

//From email address and name
$mail->From = "from@yourdomain.com";
$mail->FromName = "Full Name";

//To address and name
$mail->addAddress("recepient1@example.com", "Recepient Name");
$mail->addAddress("recepient1@example.com"); //Recipient name is optional

//Address to which recipient will reply
$mail->addReplyTo("reply@yourdomain.com", "Reply");

//CC and BCC
$mail->addCC("cc@example.com");
$mail->addBCC("bcc@example.com");

//Send HTML or Plain Text email
$mail->isHTML(true);

$mail->Subject = "Subject Text";
$mail->Body = "<i>Mail body in HTML</i>";
$mail->AltBody = "This is the plain text version of the email content";

if(!$mail->send()) 
{
    echo "Mailer Error: " . $mail->ErrorInfo;
} 
else 
{
    echo "Message has been sent successfully";
} 
```

这可以配置你喜欢的任何方式..

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-21T21:14:51.247

使用 Mail PEAR 包中的 Mail::factory。[例子。](http://email.about.com/od/emailprogrammingtips/qt/et073006.htm)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-01-15T20:04:21.820

1.  安装最新的[hMailServer](https://www.hmailserver.com/download)。最后一步中的“运行 hMailServer Administrator”。
2.  连接到“本地主机”。
3.  “添加域...”
4.  设置“127.0.0.1”。作为“域”，单击“保存”。
5.  “设置”>“协议”>“SMTP”>“电子邮件发送”
6.  将“localhost”设置为“本地主机名”，**在“SMTP Relayer”部分提供您的数据**，然后单击“Save”。
7.  “设置”>“高级”>“IP 范围”>“我的电脑”
8.  禁用“要求 SMTP 身份验证”组中的“外部到外部电子邮件地址”复选框。
9.  如果你修改了 php.ini，重写这 3 个值：

"SMTP = 本地主机",

"smtp_port = 25",

" **;**发送邮件路径 = "。

信用：[如何配置 WAMP（本地主机）使用 Gmail 发送电子邮件？](https://stackoverflow.com/questions/600725/how-to-configure-wamp-localhost-to-send-email-using-gmail/16814318#16814318)

# ruby-on-rails - What is the best way to return multiple tags from a Rails Helper?

> ID：112197
> 
> 赞同：28
> 
> 时间：2008-09-21T21:12:55.697
> 
> 标签：ruby-on-rails, ruby, helper

I want to create a hidden field and create a link in one helper and then output both to my erb.

```
<%= my_cool_helper "something", form %> 
```

Should out put the results of

```
link_to "something", a_path
form.hidden_field "something".tableize, :value => "something" 
```

What would the definition of the helper look like? The details of what link_to and the form.hidden_field don't really matter. What matters is, how do I return the output from two different calls.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-21T21:17:15.813

There are several ways to do this.

Remember that the existing rails helpers like `link_to`, etc, just output strings. You can concatenate the strings together and return that (which is what I do most of the time, if things are simple).

EG:

```
link_to( "something", something_path ) +  #NOTE THE PLUS FOR STRING CONCAT
  form.hidden_field('something'.tableize, :value=>'something') 
```

If you're doing things which are more complicated, you could just put that code in a partial, and have your helper call `render :partial`.

If you're doing more complicated stuff than even that, then you may want to look at errtheblog's [block_to_partial](http://errtheblog.com/posts/11-block-to-partial) helper, which is pretty cool

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-21T21:17:05.970

So far the best I have come up with is:

```
def my_cool_helper(name, form)
  out = capture { link_to name, a_path }
  out << capture { form.hidden_field name.tableize, value => 'something' }
end 
```

Is there a better way?

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-20T05:14:25.723

## Using `safe_join`.

I typically prefer just concatenating with `+`, as shown in [Orion Edwards's Answer](https://stackoverflow.com/a/112211/293280), but here's another option I recently discovered.

```
safe_join( [
  link_to( "something", something_path ),
  form.hidden_field( "something".tableize, value: "something" )
] ) 
```

It has the advantage of explicitly listing all of the elements and the joining of those elements.

I find that with long elements, the `+` symbol can get lost at the end of the line. Additionally, if you're concatenating more than a few elements, I find listing them in an Array like this to be more obvious to the next reader.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-26T10:45:10.453

If you want to buffer other output which apart from string then you can use `concat` instead of `+`. see this - [http://thepugautomatic.com/2013/06/helpers/](http://thepugautomatic.com/2013/06/helpers/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-31T11:57:46.377

```
def output_siblings
  div1 = tag.div 'some content'
  div2 = tag.div 'other content'

  div1 + div2
end 
```

just simplifying some other answers in here.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-25T19:42:17.137

This worked for me.

```
def format_paragraphs(text)
  text.split(/\r?\n/).sum do |paragraph|
    tag.p(paragraph)
  end
end 
```

# c# - 单击 Visual C# 窗口窗体的透明度？

> ID：112224
> 
> 赞同：14
> 
> 时间：2008-09-21T21:21:12.963
> 
> 标签：c#, visual-studio, forms, transparency

我制作了一个面板并将其设置为填充屏幕，现在我可以看到它下面的窗口，但我希望它能够被点击，这意味着他们可以点击一个文件或通过透明度看到另一个对象的工具提示。

> > RE：这可能太明显了，但是您是否尝试通过右键单击并选择“发送到后面”将面板发送到后面？

我的意思是桌面或 Firefox，而不是我项目中的东西。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-09-21T23:54:24.047

创建一个透明的顶级表单非常容易。只需让它填满屏幕或所需区域，并将其定义为具有相同值的 TransparenyKey 颜色和 BackColor。

让它忽略鼠标很简单，您只需要覆盖 WndProc 并告诉 WM_HITTEST 所有鼠标位置都将被视为透明。从而导致鼠标与窗口下方的任何东西进行交互。像这样的东西...

```
 protected override void WndProc(ref Message m)
    {
        if (m.Msg == (int)WM_NCHITTEST)
            m.Result = (IntPtr)HTTRANSPARENT;
        else
            base.WndProc(ref m);
    } 
```

# c# - 跨 Outlook 版本一致地检索“发件人”电子邮件地址

> ID：112227
> 
> 赞同：1
> 
> 时间：2008-09-21T21:25:23.733
> 
> 标签：c#, .net, outlook, ms-office

我正在开发一个独立的 c# 桌面应用程序，它发送文档，然后在发回时从 Outlook 导入它们。该应用程序从指定的文件夹中提取电子邮件并对其进行处理，然后将发件人姓名以及其他内容保存到数据库中。

这适用于具有 SenderEmailAddress 属性的 Outlook 2003 和 2007。但是 Outlook 2000 和 XP 没有此属性，并且不会始终返回 name@domain.com。我正在为这些版本提供支持。

我发现一个名为 Outlook Redemption 的库可以解决这个问题，但我正在使用 .net 进行开发，并且真的希望避免写入客​​户注册表。我还发现 MAPI33 是一个围绕 MAPI 的 .Net 包装器，但论坛尚不清楚它是否仍受支持。

希望有任何关于 Redemption dll 的 .Net 替代方案或能够在 Outlook 版本中一致地检索电子邮件地址的方法的任何指针。

非常感谢

AbsFabs

**结语：** 我最终使用了这篇文章[http://support.microsoft.com/kb/324530](http://support.microsoft.com/kb/324530)中的解决方案。它包括创建一个回复，然后将回复提取到创建的邮件项的地址。它适用于通过 Internet 发送的电子邮件，目前正在通过 Exchange Server 测试。

在我的旅行中也发现了这个[http://anoriginalidea.wordpress.com/2008/01/11/getting-the-smtp-email-address-of-an-exchange-sender-of-a-mailitem-from-outlook-在-vbnet-vsto/](http://anoriginalidea.wordpress.com/2008/01/11/getting-the-smtp-email-address-of-an-exchange-sender-of-a-mailitem-from-outlook-in-vbnet-vsto/)它似乎涉及到触摸。如果我现有的实现无法通过测试，这可能包括我的 B 计划。

感谢您的反馈意见

AbsFabs

我最终结束了使用 Redemption。出色的工作工具。我的问题是在安装我的应用程序时必须注册 dll。由于我的应用程序是用 dotnet 编写的，因此不需要注册任何内容。我能够使用无注册表 COM 解决 dll 注册问题。

非常感谢您的启发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-06T09:28:02.673

我在 C# 生产代码中使用 Outlook Redemption 解决方案。它工作得很好。有了它，您可以获得邮件消息 (IRDOMail) 的 SenderID，然后您可以使用 IRDOSession 对象的 GetAddressEntryFromID() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-06T11:41:34.510

虽然在工作中遇到了类似的问题，但我们决定走 netMAPI 路线，这导致了一些问题。

它的主要问题是 MAPI 管理自己的内存，.NET 也是如此，这意味着偶尔（我们有大约 300 人使用我们的内部软件）它会导致我们的应用程序崩溃，生成 Windows 的“报告错误”对话框而不是我们自己的错误跟踪对话框。这是由于两者覆盖彼此的内存堆造成的。

由于我们必须使用交换服务器，所以我们做了一些研究，发现如果您在 VB6 应用程序中编写 MAPI 代码，它将有自己的内存空间，因此不会覆盖 .NET 堆。

这是一种相当冗长的做事方式，但到目前为止，我们没有遇到任何问题，我们的员工每天都会发送数百封（如果不是数千封）电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T00:48:14.183

好消息是你在正确的轨道上追踪正确的接口。坏消息是 2000 和 XP 在 .NET 中的支持很差，因为它们出现在 .NET 之前，并且只有 2003 才真正努力让 COM 在 .NET 中工作。

您对这些版本 2000 和 XP 的解决方案将包括您跟踪正确的 COM 接口并自己包装它们。对于这些版本的 Outlook，我不得不多次这样做，但它从来都不是很漂亮。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T16:09:30.350

Redemption 无需在注册表中安装即可使用 - 您可以在 C#、VB.Net、Delphi 和 C++中使用[RedemptionLoader 。](http://www.dimastr.com/redemption/security.htm#redemptionloader)

```
//tell the app where the 32 and 64 bit dlls are located
//by default, they are assumed to be in the same folder as the current assembly and be named 
//Redemption.dll and Redemption64.dll.  
//In that case, you do not need to set the two properties below
RedemptionLoader.DllLocation64Bit = @"c:\SourceCode\Redemption\redemption64.dll";
RedemptionLoader.DllLocation32Bit = @"c:\SourceCode\Redemption\redemption.dll";
//Create a Redemption object and use it
RDOSession session =  RedemptionLoader.new_RDOSession();
session.Logon(Missing.Value, Missing.Value,  Missing.Value, Missing.Value, Missing.Value,  Missing.Value); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-21T23:38:50.933

我从未真正使用过这些，但您可以尝试 Outlook[协作数据对象](http://www.microsoft.com/downloads/details.aspx?familyid=2714320d-c997-4de1-986f-24f081725d36&displaylang=en)(CDO)。它们曾经是可以与 Outlook 一起安装的附加组件，但现在它们是单独提供的。

# java - Sorting matched arrays in Java

> ID：112234
> 
> 赞同：24
> 
> 时间：2008-09-21T21:28:51.463
> 
> 标签：java, sorting, list

Let's say that I have two arrays (in Java),

int[] numbers; and int[] colors;

Each ith element of numbers corresponds to its ith element in colors. Ex, numbers = {4,2,1} colors = {0x11, 0x24, 0x01}; Means that number 4 is color 0x11, number 2 is 0x24, etc.

I want to sort the numbers array, but then still have it so each element matches up with its pair in colors.

Ex. numbers = {1,2,4}; colors = {0x01,0x24,0x11};

What's the cleanest, simplest way to do this? The arrays have a few thousand items, so being in place would be best, but not required. Would it make sense to do an Arrays.sort() and a custom comparator? Using library functions as much as possible is preferable.

**Note: I know the "best" solution is to make a class for the two elements and use a custom comparator. This question is meant to ask people for the quickest way to code this. Imagine being at a programming competition, you wouldn't want to be making all these extra classes, anonymous classes for the comparator, etc. Better yet, forget Java; how would you code it in C?**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-21T21:43:49.307

You could use sort() with a custom comparator if you kept a third array with the index, and sorted on that, leaving the data intact.

Java code example:

```
Integer[] idx = new Integer[numbers.length];
for( int i = 0 ; i < idx.length; i++ ) idx[i] = i;              
Arrays.sort(idx, new Comparator<Integer>() {
    public int compare(Integer i1, Integer i2) {                        
        return Double.compare(numbers[i1], numbers[i2]);
    }                   
});

// numbers[idx[i]] is the sorted number at index i
// colors[idx[i]] is the sorted color at index i 
```

Note that you have to use `Integer` instead of `int` or you can't use a custom comparator.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-21T21:40:27.503

It seems like the cleanest thing to do would be to create a custom property class that implements Comparable. For example:

```
class Color implements Comparable {
  private int number;
  private int color;

  // (snip ctor, setters, etc.)

  public int getNumber() {
    return number;
  }
  public int getColor() {
    return color;
  }

  public int compareTo(Color other) {
    if (this.getNumber() == other.getNumber) {
      return 0;
    } else if (this.getNumber() > other.getNumber) {
      return 1;
    } else {
      return -1;
    }
  }
} 
```

Then you can separate your sorting algorithm from the ordering logic (you could use Collections.sort if you use a List instead of an array), and most importantly, you won't have to worry about somehow getting two arrays out of sync.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-21T21:42:15.627

If you'd be willing to allocate some extra space, you could generate another array, call it extra, with elements like this:

```
extra = [0,1,...,numbers.length-1] 
```

Then you could sort this extra array using Arrays.sort() with custom comparator (that, while comparing elements i and j really compares numbers[extra[i]] and numbers[extra[j]]). This way after sorting the extra array, extra[0] would contain the index of the smallest number and, as numbers and colours didn't move, the corresponding colour.
This isn't very nice, but it gets the job done, and I can't really think of an easier way to do it.

As a side note, in the competition I usually find the C++ templated pairs and nice maps indispensable ;)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-21T21:34:02.510

Why not introduce an object to represent a number and a color and implement a comparator function for that?

Also, do you really need an array, why not use something derived from Collection?

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-21T21:58:27.243

我喜欢@tovare 的解决方案。制作一个指针数组：

```
int ptr[] = { 1, 2, 3 }; 
```

然后当您对数字进行排序时，交换 ptr 中的值而不是数字中的值。然后通过ptr数组访问，比如

```
for (int i = 0; i < ptr.length; i++)
{
   printf("%d %d\n", numbers[ptr[i]], colors[ptr[i]]);
} 
```

更新：好的，看来其他人已经打败了我。我没有XP。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-22T23:44:16.137

说明使用第三个索引数组的示例。不确定这是否是最好的实现。

```
 `import java.util.*;

```
public class Sort {

    private static void printTable(String caption, Integer[] numbers, 
                Integer[] colors, Integer[] sortOrder){

        System.out.println(caption+
                "\nNo   Num   Color"+
                "\n----------------");

        for(int i=0;i<sortOrder.length;i++){
            System.out.printf("%x    %d     %d\n", 
                    i,numbers[sortOrder[i]],colors[sortOrder[i]]);

        }
    }

    public static void main(String[] args) {

        final Integer[] numbers = {1,4,3,4,2,6};
        final Integer[] colors  = {0x50,0x34,0x00,0xfe,0xff,0xff};
        Integer[] sortOrder = new Integer[numbers.length];

        // Create index array.
        for(int i=0; i<sortOrder.length; i++){
            sortOrder[i] = i;
        }
        printTable("\nNot sorted",numbers, colors, sortOrder);

        Arrays.sort(sortOrder,new Comparator<Integer>() {   
            public int compare(Integer a, Integer b){
                return numbers[b]-numbers[a];
            }});
        printTable("\nSorted by numbers",numbers, colors, sortOrder);

        Arrays.sort(sortOrder,new Comparator<Integer>() {   
            public int compare(Integer a, Integer b){
                return colors[b]-colors[a];
            }});
        printTable("\nSorted by colors",numbers, colors, sortOrder);
    }
} 
```` 

输出应如下所示：

```
未排序
没有数字颜色
----------------
0 1 80
1 4 52
2 3 0
3 4 254
4 2 255
5 6 255

按数字排序
没有数字颜色
----------------
0 6 255
1 4 52
2 4 254
3 3 0
4 2 255
5 1 80

按颜色排序
没有数字颜色
----------------
0 6 255
1 2 255
2 4 254
3 1 80
4 4 52
5 3 0

```

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T22:24:38.583

一种快速的技巧是将两个数组与位移结合起来。制作一个 long 数组，使最高有效 32 位是数字，最低有效 32 位是颜色。使用排序方法，然后打开包装。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T22:03:41.910

编写自己的排序方法就足够了吗？一个简单的冒泡排序可能会很快编码（并且正确）。不需要额外的类或比较器。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2016-04-18T11:24:39.373

归功于`@tovare`原始的最佳答案。

我在下面的答案从这个答案中删除了（现在）通过 Maven 依赖[{net.mintern : original : 1.2.2}](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22net.mintern%22%20AND%20a%3A%22primitive%22)不必要的自动装箱：[https ://stackoverflow.com/a/27095994/257299](https://stackoverflow.com/a/27095994/257299)

```
int[] idx = new int[numbers.length];
for( int i = 0 ; i < idx.length; i++ ) idx[i] = i;
final boolean isStableSort = false;
Primitive.sort(idx,
               (i1, i2) -> Double.compare(numbers[i1], numbers[i2]),
               isStableSort);

// numbers[idx[i]] is the sorted number at index i
// colors[idx[i]] is the sorted color at index i 
```

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2017-08-04T09:41:11.927

我想您希望在尝试避免使用对象数组（这可能导致痛苦的 GC 事件）的同时进行性能优化。不幸的是，没有通用的解决方案，我想。但是，对于您的特定情况，其中数字彼此不同，可能只需要创建两个数组。

```
/**
 * work only for array of different numbers
 */
private void sortPairArray(int[] numbers, int[] colors) {
    int[] tmpNumbers = Arrays.copyOf(numbers, numbers.length);
    int[] tmpColors = Arrays.copyOf(colors, colors.length);
    Arrays.sort(numbers);
    for (int i = 0; i < tmpNumbers.length; i++) {
        int number = tmpNumbers[i];
        int index = Arrays.binarySearch(numbers, number); // surely this will be found
        colors[index] = tmpColors[i];
    }
} 
```

两个排序的数组可以用[Int2IntOpenHashMap](http://fastutil.di.unimi.it/docs/it/unimi/dsi/fastutil/ints/Int2IntOpenHashMap.html)代替，它运行得更快，但内存使用量可能翻倍。

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T21:32:19.223

You need to sort the colors array by its relative item in the numbers array. Specify a comparator that compares numbers and use that as the comparison for the colors array.

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T00:40:47.460

在 C 中执行此操作的最简单方法是冒泡排序 + 双指针。当然最快的是快速排序+两个指针。当然，第二个指针保持两个数组之间的相关性。

我宁愿将存储在两个数组中的值定义为结构，并在单个数组中使用该结构。然后对它使用快速排序。您可以通过调用比较函数来编写通用版本的排序，然后可以为每个结构编写该函数，但是您已经知道了:)

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2010-09-13T09:44:11.643

使用[树形图](http://download.oracle.com/javase/1.4.2/docs/api/java/util/TreeMap.html)

# crystal-reports - Where can I get a list of what Crystal Reports features conflict?

> ID：112235
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2008-09-21T21:28:54.163
> 
>         
> 
> 标签：crystal-reports

There are certain Crystal Reports features that cannot be combined in the same report, for example SQL command objects and server side grouping. However, as far as I can find, the built-in help doesn't seem to clearly document these conflicts. For example, checking the help page for either of those features doesn't mention that it doesn't work with the other. I want to be able to find out about these conflicts when I decide to use a new feature, not later when I go to use some other feature and the option is greyed out. Is there any place that documents these conflicts?

I am specifically working with Crystal Reports XI. Bonus points if the list of conflicts documents what range of versions each feature is available and conflicting in.

I have now also checked the release notes (release.pdf on install CD), and it does not have any answers to this question.

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T13:47:28.350

我在任何地方都没有找到这些，我的建议是创建一个测试/虚拟报告，制作一些非常简单的东西来运行你一起尝试的东西。

当然，这不能保证一旦您将所有真实数据都放入其中，它就会起作用。但我赞成你的问题，因为我想亲自看看那些文档。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-10-01T10:12:02.230

> 有关此版本已知问题的安装说明和详细信息，请参阅 Crystal Reports CD 上的 release.pdf。

已知问题列表如何？你在那里找到什么了吗？

# search - 构建网络搜索引擎

> ID：112248
> 
>         
> 
> 赞同：38
> 
>         
> 
> 时间：2008-09-21T21:35:49.137
> 
>         
> 
> 标签：search, search-engine

我一直对开发网络搜索引擎很感兴趣。什么是开始的好地方？我听说过 Lucene，但我不是 Java 大佬。还有其他好的资源或开源项目吗？

我知道这是一项艰巨的任务，但这是吸引力的一部分。我不打算创建下一个谷歌，只是我可以用来搜索我可能感兴趣的网站子集。

* * *

## 回答 #1

> 赞同：57
> 
>             
> 
> 时间：2008-09-21T22:24:35.400

搜索引擎有几个部分。从广义上讲，以一种无可救药的一般方式（伙计们，如果您觉得可以添加更好的描述、链接等，请随时**编辑）：**

1.  **爬虫**。这是通过网络、抓取页面并将有关它们的信息存储到某个中央数据存储中的部分。除了文本本身之外，您还需要诸如访问它的时间等信息。爬虫需要足够聪明，以知道访问某些域的频率，遵守 robots.txt 约定等。  

2.  **解析器**。这会读取爬虫获取的数据，对其进行解析，保存它需要的任何元数据，丢弃垃圾，并可能就下次获取的内容向爬虫提出建议。

3.  **索引器**。读取解析器解析的内容，并为网页上找到的术语创建倒排索引。它可以随心所欲地智能——应用 NLP 技术来制作概念索引、交叉链接事物、引入同义词等。

4.  **排名引擎**。给定数千个与“apple”匹配的 URL，您如何确定哪个结果最好？只是索引不会为您提供该信息。您需要分析文本、链接结构以及您想查看的任何其他部分，并创建一些分数。这可以完全即时完成（这真的很难），或者基于一些预先计算的“专家”概念（参见 PageRank 等）。

5.  **前端**。需要接收用户查询、命中中央引擎并做出响应；这需要对缓存结果很聪明，可能会混合来自其他来源的结果等。它有自己的一系列问题。

我的建议——选择你最感兴趣的，下载 Lucene 或 Xapian 或任何其他开源项目，取出完成上述任务之一的位，并尝试替换它。希望有更好的东西:-)。

一些可能有用的链接： 
 [“Agile web-crawler”](http://www.scribd.com/doc/100903/Agile-webcrawler-design-and-implementation)，爱沙尼亚的一篇论文（英文）
 [Sphinx Search engine](http://sphinxsearch.com "狮身人面像搜索引擎")，一个索引和搜索API。专为大型数据库设计，但模块化和开放式。
[“Information Retrieval](http://www-csli.stanford.edu/~hinrich/information-retrieval-book.html)，Manning 等人的一本关于 IR 的教科书。很好地概述了索引是如何构建的，出现的各种问题，以及一些关于爬虫的讨论等。免费在线版本（目前）！

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2008-09-21T21:40:46.333

[Xapian](http://xapian.org/)是您的另一个选择。我听说它比 Lucene 的某些实现具有更好的扩展性。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2008-09-28T23:44:41.817

查看[nutch](http://lucene.apache.org/nutch/)，它是由创建 Lucene 的同一个人 ( [Doug Cutting](http://blog.lucene.com/) ) 编写的。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2008-09-21T21:40:02.997

在我看来，最大的部分是网站的索引。制作机器人来搜索互联网并解析其内容。

我和一个朋友正在谈论谷歌和其他搜索引擎必须在引擎盖下有多么惊人。半秒内获得数百万个结果？疯狂的。我认为他们可能已经为常用搜索项目预设了搜索结果。

编辑：
[这个](http://www.acmqueue.com/modules.php?name=Content&pa=showpage&pid=143)网站看起来很有趣。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T22:01:54.830

我将从一个现有项目开始，例如来自 Wikia 的开源搜索引擎。

[我的理解是维基搜索项目已经结束。但是，我认为参与现有的开源项目是轻松进入这种规模的事业的好方法。]

[http://re.search.wikia.com/about/get_involved.html](http://re.search.wikia.com/about/get_involved.html)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2008-09-29T00:06:10.017

如果您有兴趣了解信息检索背后的理论以及实现搜索引擎背后的一些技术细节，我可以推荐Ian Witten、Alistair Moffat 和 Tim C. Bell所著的《[管理千兆字节》一书。](https://rads.stackoverflow.com/amzn/click/com/1558605703)（披露：Alistair Moffat 是我的大学导师。）虽然现在有点过时了（第一版于 1994 年出版，第二版于 1999 年出版——现在管理千兆字节有什么难的？），基本理论仍然是合理的，而且是对索引和在索引和检索系统中使用压缩的一个很好的介绍。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2010-02-07T09:55:41.137

我也对搜索引擎感兴趣。我推荐了 Apache Hadoop MapReduce 和 Apache Lucene。通过 Hadoop Cluster 获得更快是最好的方法。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T21:37:41.723

有Lucene的端口。Zend 有一个免费提供。看看这个快速教程：[http ://devzone.zend.com/node/view/id/91](http://devzone.zend.com/node/view/id/91)

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2008-09-24T00:47:39.907

如果您对它的编程不太感兴趣，但对结果更感兴趣，这里有一个稍微不同的方法：考虑使用[Google 自定义搜索引擎](http://www.google.com/coop/cse/)API 构建它。

好处：

*   Google 为您完成所有繁重的工作

*   用户熟悉的 UI 和行为

*   可以在几分钟内启动并运行

*   大量的自定义功能

缺点：

*   你不是在写代码，所以那里没有学习机会

*   您要搜索的所有内容都必须是公开的并且已经在 Google 索引中

*   您的结果与 Google 相关联

# sql - Update VERY LARGE PostgreSQL database table efficiently

> ID：112249
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2008-09-21T21:35:53.223
> 
>         
> 
> 标签：sql, database, postgresql, sql-update, mvcc

I have a very large database table in PostgresQL and a column like "copied". Every new row starts uncopied and will later be replicated to another thing by a background programm. There is an partial index on that table "btree(ID) WHERE replicated=0". The background programm does a select for at most 2000 entries (LIMIT 2000), works on them and then commits the changes in one transaction using 2000 prepared sql-commands.

Now the problem ist that I want to give the user an option to reset this replicated-value, make it all zero again.

An update table set replicated=0;

is not possible:

*   It takes very much time

*   It duplicates the size of the tabel because of MVCC

*   It is done in one transaction: It either fails or goes through.

I actually don't need transaction-features for this case: If the system goes down, it shall process only parts of it.

Several other problems:
Doing an 

```
update set replicated=0 where id >10000 and id<20000 
```

is also bad: It does a sequential scan all over the whole table which is too slow.
If it weren't doing that, it would still be slow because it would be too many seeks.

What I really need is a way of going through all rows, changing them and not being bound to a giant transaction.

Strangely, an

```
UPDATE table 
  SET replicated=0 
WHERE ID in (SELECT id from table WHERE replicated= LIMIT 10000) 
```

is also slow, although it should be a good thing: Go through the table in DISK-order...

(Note that in that case there was also an index that covered this)

(An update LIMIT like Mysql is unavailable for PostgresQL)

BTW: The real problem is more complicated and we're talking about an embedded system here that is already deployed, so remote schema changes are difficult, but possible
It's PostgresQL 7.4 unfortunately.

The amount of rows I'm talking about is e.g. 90000000\. The size of the databse can be several dozend gigabytes.

The database itself only contains 5 tables, one is a very large one.
But that is not bad design, because these embedded boxes only operate with one kind of entity, it's not an ERP-system or something like that!

Any ideas?

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2008-09-21T21:44:55.123

How about adding a new table to store this replicated value (and a primary key to link each record to the main table). Then you simply add a record for every replicated item, and delete records to remove the replicated flag. (Or maybe the other way around - a record for every non-replicated record, depending on which is the common case).

That would also simplify the case when you want to set them all back to 0, as you can just truncate the table (which zeroes the table size on disk, you don't even have to vacuum to free up the space)

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T22:07:42.557

如果您尝试重置整个表，而不仅仅是几行，通常更快（在非常大的数据集上 - 而不是在常规表上）简单`CREATE TABLE bar AS SELECT everything, but, copied, 0 FROM foo`，然后交换表并删除旧表。显然，您需要确保在执行此操作时没有任何内容被插入到原始表中。您还需要重新创建该索引。

**编辑**：一个简单的改进，以避免在复制 14 GB 时锁定表：

```
lock ;
create a new table, bar;
swap tables so that all writes go to bar;
unlock;
create table baz as select from foo;
drop foo;
create the index on baz;
lock;
insert into baz from bar;
swap tables;
unlock;
drop bar; 
```

（让您在进行复制时进行写入，并在事后插入它们）。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T18:46:14.543

虽然你不可能解决空间使用问题（它是暂时的，直到真空）你可能真的可以在时钟时间方面加快这个过程。PostgreSQL 使用 MVCC 的事实意味着您应该能够做到这一点，而不会出现与新插入的行相关的任何问题。create table as select 将解决一些性能问题，但不允许继续使用该表，并且占用同样多的空间。只需放弃索引并重建它，然后进行真空处理。

```
drop index replication_flag;
update big_table set replicated=0;
create index replication_flag on big_table btree(ID) WHERE replicated=0;
vacuum full analyze big_table; 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T09:36:56.113

这是伪代码。您将需要 400MB（对于 int）或 800MB（对于 bigints）临时文件（如果有问题，您可以使用 zlib 对其进行压缩）。它需要对一张桌子进行大约 100 次扫描以进行真空吸尘器。但它不会使表膨胀超过 1%（任何时候最多 1000000 个死行）。您还可以用更少的扫描来换取更多的表膨胀。

```
// write all ids to temporary file in disk order                
// no where clause will ensure disk order
$file = tmpfile();
for $id, $replicated in query("select id, replicated from table") {
        if ( $replicated<>0 ) {
                write($file,&$id,sizeof($id));
        }
}

// prepare an update query
query("prepare set_replicated_0(bigint) as
        update table set replicated=0 where id=?");

// reread this file, launch prepared query and every 1000000 updates commit
// and vacuum a table
rewind($file);
$counter = 0;
query("start transaction");
while read($file,&$id,sizeof($id)) {
        query("execute set_replicated_0($id)");
        $counter++;
        if ( $counter % 1000000 == 0 ) {
                query("commit");
                query("vacuum table");
                query("start transaction");
        }
}
query("commit");
query("vacuum table");
close($file); 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2010-08-14T04:16:53.697

我想你需要做的是一个。将 2000 条记录的 PK 值复制到具有相同标准限制等的临时表中。 b. 选择相同的 2000 条记录并按原样在游标中执行必要的操作。C。如果成功，请针对临时表中的记录运行单个更新查询。清除临时表并再次运行步骤 a。d。如果不成功，请清除临时表而不运行更新查询。简单、高效、可靠。问候， KT

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2010-03-03T09:18:32.690

我认为最好将您的 postgres 更改为 8.X 版本。可能原因是 Postgres 的低版本。也试试下面的这个查询。我希望这会有所帮助。

```
UPDATE table1 SET name = table2.value
FROM table2 
WHERE table1.id = table2.id; 
```

# javascript - How to auto-focus RTE editor inside firefox?

> ID：112261
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-21T21:45:01.050
> 
>         
> 
> 标签：javascript, firefox, iframe, focus, editmode

We have a RTE editor based on htmlarea which consists of content with editmode enabled inside an iframe. The question is how to automatically bring the focus into the editor?

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T21:47:29.610

的`id`在哪里：`IFRAME``myRTE`

```
var iframe = document.getElementById("myRTE");
if ( iframe && iframe.contentWindow )
   iframe.contentWindow.focus(); 
```

# python - 如何使用 Tkinter 包几何管理器重叠小部件？

> ID：112263
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-09-21T21:45:05.217
> 
>         
> 
> 标签：python, tkinter, geometry, pack

我想`Canvas`在我的窗口中放置一个带有图像的图像，然后我想在它上面*打包*小部件，所以 Canvas 充当背景。

管理器是否可以有两种状态`pack`：一种用于一组小部件，另一种用于另一组？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T22:19:09.813

您的具体问题的答案是否定的。您不能有两种状态或以其他方式在同一个父级中使用两种不同的方式打包。

但是，我认为您想要完成的事情很简单。使用画布的内置功能创建一个作为画布一部分的图像项，然后将内容打包到画布中，就像它是一个框架一样。

您可以通过创建带有图像的标签小部件来完成类似的事情，然后将其他小部件打包到标签中。

使用画布的一个优点是您可以轻松地平铺图像以使用重复的背景图像填充整个画布，以便随着窗口的增长，图像将继续填充窗口（当然您可以使用足够大的原始图像.. .)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T22:39:05.523

我相信布莱恩的回答可能是最好的通用解决方案。但是，您可能还想查看[位置](http://www.pythonware.com/library/tkinter/introduction/place.htm)几何管理器。**位置**几何管理器可让您指定小部件的确切大小和位置......这可能会很快变得乏味，但会完成工作。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T13:47:28.163

> ...结果是行不通的，因为我想添加标签和更多的画布，但我找不到任何方法让它们的背景透明

如果可以接受加载附加扩展，请查看[Tkzinc](http://www.tkzinc.org/tkzinc/index.php)。从网站上，

> Tkzinc（历史上称为 Zinc）小部件与 Tk Canvas 非常相似，因为它们都支持结构化图形。与 Canvas 一样，Tkzinc 实现了用于显示图形实体的项目。可以对这些项目进行操作，并且可以将绑定与它们关联以实现交互行为。但与 Canvas 不同的是，Tkzinc 可以在层次结构中构建项目，支持缩放和旋转，可以为项目层次结构的子树设置裁剪，支持多轮廓曲线。它还借助 OpenGL 提供高级渲染，例如颜色渐变、抗锯齿、透明度和三角形项目。

我目前正在一个 tcl 项目中使用它，并且对结果非常满意。可以使用 tcl、perl 和 python 的扩展。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T22:48:37.480

不是没有交换小部件树进出，我不认为可以用 Tk 干净地完成。其他工具包可以更优雅地做到这一点。

*   COM/VB/MFC 可以用一个 ActiveX 控件来做到这一点——你可以在同一个区域隐藏/显示多个 ActiveX 控件。任何容器都可以让你通过改变孩子来做到这一点。如果您正在执行特定于 Windows 的程序，则可以通过这种方式完成。

*   QT 也会让你以类似的方式做到这一点。

*   GTK 稍微难一些。

# c# - 目录修改监控

> ID：112276
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2008-09-21T21:50:26.200
> 
>         
> 
> 标签：c#, file, directory, filesystems

我正在构建一个 C# 应用程序，它将监视指定目录的更改和添加，并将信息存储在数据库中。

我想避免检查每个单独的文件是否有修改，但我不确定我是否可以完全信任文件访问时间。

在目录中获取最近修改的文件的最佳方法是什么？

它只会在用户要求时检查修改，它不会是一个持续运行的服务。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2008-09-21T22:11:42.063

使用 FileSystemWatcher 对象。这是一些代码来做你正在寻找的东西。

```
    // 声明 FileSystemWatcher 对象
    FileSystemWatcher watcher = new FileSystemWatcher();

    // 我们必须指定要监控的路径

     watcher.Path = @"\\somefilepath";     

    // 此属性指定要监视的事件
     watcher.NotifyFilter = NotifyFilters.LastAccess |
       NotifyFilters.LastWrite | NotifyFilters.文件名 | notifyFilters.DirectoryName;
    watcher.Filter = "*.*"; // 只看文本文件。

    // 为特定的更改事件添加事件处理程序...

    watcher.Changed += new FileSystemEventHandler(OnChanged);
    watcher.Created += new FileSystemEventHandler(OnChanged);
    watcher.Deleted += new FileSystemEventHandler(OnChanged);
    watcher.Renamed += new RenamedEventHandler(OnRenamed);
    // 开始观看。
    watcher.EnableRaisingEvents = true;

    // 定义事件处理程序。
    私有静态无效 OnChanged（对象源，FileSystemEventArgs e）
    {
    // 指定更改、创建或删除文件时执行的操作。
    }

    私有静态无效 OnRenamed（对象源，RenamedEventArgs e）
    {
    // 指定重命名文件时要执行的操作。
    }

```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T21:58:07.633

我认为您想要的由[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类提供。

本教程描述了如何使用它来监视一个简单的 Windows 服务中的目录更改；[如何在 C# 中实现一个简单的 filewatcher Windows 服务](http://www.codeproject.com/KB/files/C__FileWatcher.aspx)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T21:55:50.167

嗯……有趣的问题。最初，我会将您指向[FileSystemWatcher](http://msdn.microsoft.com/en-GB/library/system.io.filesystemwatcher.aspx)类。但是，如果您要让它在用户请求时工作，那么您可能需要最初存储目录信息，然后在每次用户请求时进行比较。我可能会使用 FileSystemWatcher 并无论如何都存储您的结果。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:56:15.167

如果您只需要它来检查用户何时询问而不是一直检查，请不要使用 FileSystemWatcher。特别是如果它是一个共享资源——你最不想要的就是 50 台客户端机器观看同一个共享目录。

这可能只是一个错字，但您不应该查看文件访问时间，而应该查看文件修改时间以获取更改。即使这样也不可靠。

我要做的是在文件日期和字节大小或其他文件系统属性上实现某种校验和功能。这样我就不会在整个文件中寻找更改 - 只有它的属性，我可以根据要求进行更改，而不是尝试保持与远程资源的连接来监视它。

一个更重的解决方案是反其道而行之，并在托管共享驱动器的机器上安装一项服务，该服务可以监控文件并记录更改。然后你可以查询服务而不是触摸文件——但这可能有点过头了。

# c++ - C++ 模板元编程的最佳介绍？

> ID：112277
> 
>         
> 
> 赞同：116
> 
>         
> 
> 时间：2008-09-21T21:50:36.573
> 
>         
> 
> 标签：c++, templates, metaprogramming

静态元编程（又名“模板元编程”）是一种很棒的 C++ 技术，它允许在编译时执行程序。当我读到这个典型的元编程示例时，我的脑海中突然闪过一个灯泡：

```
#include <iostream>
using namespace std;

template< int n >
struct factorial { enum { ret = factorial< n - 1 >::ret * n }; };

template<>
struct factorial< 0 > { enum { ret = 1 }; };

int main() {
    cout << "7! = " << factorial< 7 >::ret << endl; // 5040
    return 0;
} 
```

如果想了解更多关于 C++ 静态元编程的知识，最好的资源是什么（书籍、网站、在线课件等）？

* * *

## 回答 #1

> 赞同：115
> 
>             
> 
> 时间：2008-09-21T21:59:49.127

*[回答我自己的问题]*

到目前为止，我发现的最好的介绍是第 10 章，“C++ 中的静态元编程”，来自Krzysztof Czarnecki 和 Ulrich W. Eisenecker 的*Generative Programming, Methods, Tools, and Applications*，ISBN-13：9780201309775；*和C++ 模板的*第 17 章“元程序”： David Vandevoorder 和 Nicolai M. Josuttis 的完整指南，ISBN-13：9780201734843。

![替代文字](https://i.stack.imgur.com/q79o3.gif) ![替代文字](https://i.stack.imgur.com/FreHD.gif) ![替代文字](https://i.stack.imgur.com/89bSK.gif) ![替代文字](https://i.stack.imgur.com/oDM2G.gif)

Todd Veldhuizen 在[这里](http://www.cs.rpi.edu/~musser/design/blitz/meta-art.html)有一个很好的教程。

一般而言，C++ 编程的一个很好的资源是Andrei Alexandrescu 的*Modern C++ Design*，ISBN-13：9780201704310。这本书混合了一些元编程和其他模板技术。对于元编程，请参阅第 2.1 节“编译时断言”、第 2.4 节“将积分常量映射到类型”、第 2.6 节“类型选择”、第 2.7 节“在编译时检测可转换性和继承”、第 2.9 节“`NullType`和`EmptyType`”以及第 2.10 节“类型特征” ”。

我发现的最好的中级/高级资源是David Abrahams 和 Aleksey Gurtovoy的*C++ Template Metaprogramming ，ISBN-13：9780321227256*

如果您只喜欢一本书，请获取*C++ 模板：完整指南*，因为它也是一般模板的权威参考。

* * *

## 回答 #2

> 赞同：25
> 
>             
> 
> 时间：2008-09-21T21:56:19.290

Andrei Alexandrescu 的《[现代 C++ 设计](http://erdani.com/index.php/books/modern-c-design/)》一书涵盖了许多用于快速高效的现代 C++ 代码的技巧和其他技巧，并且是[Loki](http://loki-lib.sourceforge.net/)库的基础。

另外值得一提的是[Boost](http://boost.org)库，它大量使用这些技术并且通常具有非常高的学习质量（尽管有些非常密集）。

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2008-09-21T21:56:47.730

[Modern C++ Design](https://rads.stackoverflow.com/amzn/click/com/0201704315)，Alexandrescu 的一本精彩的书籍和设计模式框架。警告一句，读完这本书后，我停止使用 C++，并想“这算什么，我可以选择一种更好的语言并免费获得它”。

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2008-09-21T21:59:23.013

脑海中浮现的两本好书是：

*   现代 C++ 设计 / Andrei Alexandrescu（尽管有这个名字，它实际上已经 7 岁了！）

*   C++ 模板：完整指南 / Vandevoorde & Josuttis

这是一个相当深入的领域，所以绝对推荐像其中一本这样的好书而不是网站。一些更高级的技术将让您研究代码一段时间以弄清楚它们是如何工作的！

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2008-09-21T21:54:51.290

[现代 C++](https://rads.stackoverflow.com/amzn/click/com/0201704315)是我读过的最好的介绍之一。它涵盖了模板元编程的实际有用示例。另请查看配套库[Loki](http://loki-lib.sourceforge.net/)。

* * *

## 回答 #6

> 赞同：5
> 
>             
> 
> 时间：2008-09-21T22:40:25.677

不会有很多书单，因为有很多经验的人的名单是有限的。模板元编程在 2000 年的第一届 C++ 模板编程研讨会中真正开始，到目前为止，许多作者都参加了会议。（IIRC，Andrei 没有。）这些先驱者极大地影响了这个领域，基本上应该写的东西现在都写了。就个人而言，我会建议 Vandevoorde & Josuttis。如果您是该领域的新手，Alexandrescu 的书是一本难读的书。

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T21:53:54.273

google Alexandrescu，现代 C++ 设计：应用的通用编程和设计模式

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T21:56:39.930

Veldhuizen 的原始论文很好。如果您想看一整本书，那么这里有 Vandevoorde 的书“C++ 模板完整指南”。当你准备好学习硕士课程时，试试 Alexandrescu 的 Modern C++ Design。

# performance - SharePoint 2007 性能问题

> ID：112318
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-09-21T22:09:18.433
> 
>         
> 
> 标签：performance, sharepoint

我不希望有一个直接的灵丹妙药答案，但确保 SharePoint 2007 网站的良好性能的最佳做法是什么？

我们的 Intranet 有几个站点，通常认为它运行缓慢。服务器中有大量的内存和处理器能力，但是页面并没有像您期望的在强大的服务器上运行的网站那样“快速”。

我们已经尽我们所能来调整设置，但有什么我们可能遗漏的吗？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T22:36:48.257

一旦 IIS 应用程序池卸载 SharePoint 资源或自行回收，初始请求就会出现一个已知问题，其中新请求的启动速度非常慢。

有关为什么会发生这种情况以及如何解决它的详细信息，请参见此处；[SharePoint 2007 怪癖 - 解决令人痛苦的缓慢启动时间](http://jritmeijer.spaces.live.com/Blog/cns!8A48A27460FB898A!965.entry?wa=wsignin1.0)

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T22:49:07.557

Andrew Connell 的最新著作（专业 SharePoint 2007 Web 内容管理开发）有一整章专门用于提高 SharePoint 网站的性能。

它涵盖的关键主题是缓存、限制页面加载（特别是在不需要时如何删除 CORE.js）、使用一次性对象以及如何使用 SharePoint 查询。

我有 2 个非常好的技巧是使用 CSS Freindly 控制适配器为常见组件（菜单等）生成较小的 HTML 并设置服务器“唤醒”，因此当 IIS 由于不活动而使应用程序池休眠时您可以在有人访问您的网站之前重新唤醒它。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-09-25T20:58:49.083

微软已经就这个问题发布了一份白皮书。

> Microsoft IT 如何提高 SharePoint 网站的可用性并缩短呈现时间 技术白皮书 发布时间：2008 年 9 月

[从这里](http://download.microsoft.com/download/0/E/B/0EBA7263-A555-4279-B9DD-1720F0139A2E/SharePointOptimizationTWP.doc)下载。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2011-09-20T07:54:58.307

SharePoint 有很多限制会导致性能低下的问题，我们可以称之为性能瓶颈。SharePoint 性能问题的出现主要是由于以下原因：

*   BLOB 使 SQL Server 不堪重负

*   列表的数据库访问次数过多

如果您使用以下一些智能技术，您可以显着提高 SharePoint 性能：

*   外部化文档 (BLOB)

*   缓存列表和 BLOB

Microsoft Office SharePoint Server (MOSS) 是一款非常受欢迎的产品，它通过内容管理和企业搜索、共享业务流程和跨边界信息共享来提高组织的效率，从而获得更好的业务洞察力。StorageEdge 是一款非常出色的产品，可增强/改进 SharePoint 性能。通过使用 StorageEdge，SharePoint 的性能可以轻松提高。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T22:27:10.667

只是一些想法...

从服务器或客户端显示页面时是否显示速度很慢？如果客户端速度较慢，请检查您的网络。

你的网页很“重”吗？（意味着，许多元素，Web 部件等？）也许这很正常。

您是否注意到由于您添加了一个特定的 Web 部件，它们的加载速度变慢了？可能该特定 Web 部件存在一些问题（例如，它正在访问包含数千个文档的文档库）。如果是这种情况，请尝试停用该特定 Web 部件并查看性能是否更好。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T22:31:13.827

我注意到 Sharepoint 喜欢添加大量 JavaScript。如果您使用慢速 JavaScript（例如 Internet Explorer）运行浏览器，我注意到它有时不会“感觉”很快。

此外，如果您在其上运行自定义代码：请确保在使用后处理您的 SPWeb，这可能会增加很多！

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:54:58.383

您是在虚拟服务器还是物理服务器上运行？我们发现它在物理服务器上的速度要快得多。此外，检查磁盘性能 - 如果您从 SAN 运行服务器，则可能表明您的 SAN 已被过度使用。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-06-28T04:27:52.037

要调查 SharePoint 性能问题，我会先按以下顺序尝试这些操作：

*   为那些表现不佳的页面运行 SQL 分析器。SharePoint API 擅长隐藏与数据库往返有关的幕后情况。在开发人员不知情的情况下，有单个 API 调用会生成许多往返，这会损害性能。

*   配置为您的 SharePoint 站点服务的 w3wp.exe 进程。这将告诉您相关的 API 使用情况。专注于滴答声，没有时间，并进行自上而下的包容性时间分析，以查看哪些调用占用了大部分时间。有关说明，请参见[此处](http://msdn.microsoft.com/en-us/teamsystem/aa718860.aspx)。

*   运行 Fiddler 或 Microsoft NetMon 以发现潜在的过多客户端往返（即在浏览器和 Web 前端服务器之间）和重定向（301）。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-06-28T04:43:11.137

SharePoint 设置的三个主要组件是 SharePoint Server（运行 WSS/SPS 服务的组件）、SQL Server DB 和 IIS。

您说您的 SharePoint 服务具有不错的功能，我认为 IIS 肯定会在一台好机器上。  

通常 SQL Server 设置会托管与 SP 相关的 DB，这会减慢页面加载速度。我希望你看看你的整个 SQL Server 相关的性能计数器，你可能也想调整这些 DB（包括 OS 服务器/存储过程/网络等）

希望这会增加您想要查看的内容的清单。

# java - Java 中可以进行静态元编程吗？

> ID：112320
> 
>         
> 
> 赞同：39
> 
>         
> 
> 时间：2008-09-21T22:10:41.427
> 
>         
> 
> 标签：java, metaprogramming

我是[C++ 中静态元编程](https://stackoverflow.com/questions/112277/best-intro-to-c-static-metaprogramming)的粉丝。我知道Java现在有泛型。这是否意味着静态元编程（即编译时程序执行）在 Java 中是可能的？如果是这样，任何人都可以推荐任何可以了解更多信息的好资源吗？

* * *

## 回答 #1

> 赞同：24
> 
>             
> 
> 时间：2008-09-21T22:13:22.713

不，这是不可能的。泛型不如模板强大。例如，模板参数可以是用户定义的类型、原始类型或值；但是通用模板参数只能是`Object`或其子类型。

编辑：这是一个旧答案；自 2011 年以来，我们有了 Java 7，它具有[可用于此类诡计的注释](https://stackoverflow.com/a/8387752/409102)。

* * *

## 回答 #2

> 赞同：13
> 
>             
> 
> 时间：2008-09-22T18:39:39.037

看看[Clojure](http://clojure.org)。它是一个带有宏（元编程）的 LISP，在 JVM 上运行，并且与 Java 具有很强的互操作性。

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2019-08-24T12:38:44.560

# 简短的回答

这个问题已经有将近 10 年的历史了，但我仍然缺少一个答案。这是：**是**的，但不是*因为*泛型和注意与 C++ 完全相同。

从 Java 6 开始，我们有了[可插入的注解处理 api](https://javabeat.net/java-6-0-features-part-2-pluggable-annotation-processing-api/)。静态元编程是（正如您在问题中已经说过的）

> 编译时程序执行

如果您了解元编程，那么您也知道这不是真的，但为了简单起见，我们将使用它。如果您想了解有关元编程的更多信息，请查看[此处。](https://stackoverflow.com/questions/514644/what-exactly-is-metaprogramming)

可插入注解处理 api 由编译器在读取 .java 文件之后但在编译器将字节码写入 .class 文件之前调用。（我有一个来源，但我再也找不到了。也许有人可以在这里帮助我？）。

它允许您在编译时使用纯 java 代码执行逻辑。然而，你正在编码的世界是完全不同的。不是特别糟糕或什么，只是不同。您正在分析的类尚不存在，您正在处理这些类的元数据。但是编译器是在JVM中运行的，这意味着你也可以正常创建类和程序。但此外，您可以分析泛型，因为我们的注解处理器是在类型擦除**之前调用的。**

关于 java 中静态元编程的主要要点是，您提供元数据（以注释的形式），处理器将能够找到所有带注释的类来处理它们。（更简单的）示例可以在[Baeldung](https://www.baeldung.com/java-annotation-processing-builder)上找到，其中形成了一个简单的示例。在我看来，这是一个很好的入门资源。如果您了解这一点，请尝试自己google。那里有很多好的资源，这里要列出很多。还可以查看使用注释处理器的[Google AutoService](https://github.com/google/auto/tree/master/service)来消除您创建和维护服务文件的麻烦。如果您想创建类，我建议您查看[JavaPoet](https://github.com/square/javapoet)。

遗憾的是，这个 API 不允许我们操作源代码。但如果你真的想，你应该看看[Project Lombok](https://projectlombok.org/)。他们这样做，但不支持。

* * *

# 为什么这很重要（对你们中感兴趣的人进一步阅读）

**TL;DR：**这让我很困惑，为什么我们不像动态那样使用静态元编程，因为它有很多优点。

大多数开发人员看到“动态和静态”并立即得出动态更好的结论。没有错，静态对开发人员有很多负面含义。但在这种情况下（特别是对于 java），情况恰恰相反。

动态元编程需要反射，这有[一些](http://blog.icodejava.com/tag/drawbacks-of-java-reflections/) [主要](https://medium.com/the-telegraph-engineering/mirror-gazing-a-closer-look-at-the-good-and-bad-sides-of-java-reflection-884f65a4ef20) [缺点](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)。他们有很多。简而言之：性能、安全性和设计。

静态元编程（即注释处理）允许我们与编译器相交，编译器已经完成了我们尝试通过反射完成的大部分事情。我们还可以在这个过程中创建类，这些类再次传递给注释处理器。然后，您可以（例如）生成类，这些类通常必须使用反射来完成。此外，我们可以实现“快速失败”系统，因为我们可以将错误、警告等通知编译器。

尽可能总结和比较：让我们想象一下春天。Spring 尝试在运行时查找所有 Component 注释类（我们可以通过在编译时使用服务文件来简化），然后生成某些代理类（我们已经可以在编译时完成）并解析 bean 依赖项（再次，我们已经可以在编译时完成）。[Jake Whartons 谈到了 Dagger2](https://www.youtube.com/watch?v=plK0zyRLIP8&feature=youtu.be)，他在其中解释了为什么他们转向静态元编程。我仍然不明白为什么像 Spring 这样的大玩家不使用它。

This post is to short to fully explain those differences and why static would be more powerful. If you want, i am currently working on a presentation for this. If you are interested and speak German (sorry about that), you can have a look at [my website](http://meta.thorbenkuck.de). There you find a presentation, which tries to explain the differences in 45 minutes. Only the slides though.

* * *

## 回答 #4

> 赞同：8
> 
>             
> 
> 时间：2010-12-09T14:54:34.330

“静态元编程”到底是什么意思？是的，C++ 模板元编程在 Java 中是不可能的，但它提供了其他方法，比 C++ 中的方法强大得多：

*   反射

*   面向方面的编程（@AspectJ）

*   字节码操作（Javassist、ObjectWeb ASM、Java 代理）

*   代码生成（注释处理工具，模板引擎，如 Velocity）

*   抽象语法树操作（流行 IDE 提供的 API）

*   即使在运行时也可以运行 Java 编译器并使用已编译的代码

没有最好的方法：每种方法都有其优点和缺点。由于 JVM 的灵活性，Java 中的所有这些方法都可以在编译时和运行时使用。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T22:18:05.760

不，更重要的是，泛型类型会被编译器擦除到其上限，因此您无法在运行时创建泛型类型 T 的新实例。

在 Java 中进行元编程的最佳方法是绕过类型擦除并`Class<T>`提交类型 T 的对象。不过，这只是一个 hack。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2010-09-16T05:20:03.287

如果您需要 Java 的强大编译时逻辑，一种方法是使用某种代码生成。因为，正如其他海报所指出的，Java 语言不提供任何适合执行编译时逻辑的功能，这可能是您的最佳选择（如果您确实需要编译时逻辑）。一旦你用尽了其他可能性，并且*确定*要进行代码生成，你可能会对我的开源项目 Rjava 感兴趣，可在以下网址获得：

[http://www.github.com/blak3mill3r](http://www.github.com/blak3mill3r)

它是一个用 Ruby 编写的 Java 代码生成库，我编写它是为了自动为 Ruby on Rails 应用程序生成 Google Web Toolkit 接口。事实证明，它非常方便。

作为警告，调试 Rjava 代码可能非常困难，Rjava 不会做太多检查，它只是假设您知道自己在做什么。无论如何，这几乎就是静态元编程的状态。我会说它比使用 C++ TMP 完成的任何重要操作都容易得多，并且可以将它用于相同类型的事情。

无论如何，如果您正在考虑编写一个输出 Java 源代码的程序，请立即停止并查看 Rjava。它可能还不能满足您的需求，但它已获得 MIT 许可，因此请随时对其进行改进、油炸或卖给您的祖母。我很高兴有其他具有通用编程经验的开发人员对设计发表评论。

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2013-08-12T11:58:02.943

[Lombok](http://projectlombok.org/)提供了一种弱形式的编译时元编程。但是，他们使用的技术是[完全通用](http://notatube.blogspot.ca/2010/12/project-lombok-creating-custom.html)的。

有关相关讨论，请参阅[编译时的 Java 代码转换](https://stackoverflow.com/questions/10483423/java-code-transform-at-compile-time)

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2019-05-20T03:45:36.120

[Manifold 项目](https://github.com/manifold-systems/manifold)为 Java提供类型安全的静态**元**编程。当 Javac 解析类型名称时，您可以使用它在编译时动态构建类型。[JSON Schema 演示](http://manifold.systems/images/json.mp4)根据动态、编译时类型投影（无代码生成构建步骤）演示了静态元编程。

此外，您可以使用 Manifold 添加新功能。查看[结构](http://manifold.systems/images/structural%20typing.mp4)类型、[方法扩展](http://manifold.systems/images/method%20extension.mp4)和[类型安全反射](http://manifold.systems/images/jailbreak.mp4)。.

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2020-11-17T06:58:05.053

You can use a metaprogramming library for Java such as Spoon: [https://github.com/INRIA/spoon/](https://github.com/INRIA/spoon/)

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T22:12:51.733

不，Java 中的泛型纯粹是一种避免对象转换的方法。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2008-09-23T12:06:09.193

在非常简化的意义上，也许？ 
[http://michid.wordpress.com/2008/08/13/type-safe-builder-pattern-in-java/](http://michid.wordpress.com/2008/08/13/type-safe-builder-pattern-in-java/)

# .net - .NET - 你可以通过接口，什么时候不应该接口

> ID：112372
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2008-09-21T22:31:50.297
> 
>         
> 
> 标签：.net, interface

是否可以通过接口？现在在设计系统时，我将从接口开始，逐步编写单元测试以及接口，直到我有一个运行良好的模式。我将继续编写一些具体的类，并针对这些设置单元测试。

现在我是一个喜欢接口的人，当我控制代码时，我通常只会传递/返回原语或接口。到目前为止，我发现这是理想的，您可以轻松地调整和增强系统不影响从属系统。

我显然不需要出售使用接口的原因，但我想知道它是否过度连接所有东西，ps。我**不是**在谈论空白界面，因为有些疯狂，例如：

```
interface IStringCollection : ICollection<string>
{
} 
```

我说的更像是：

```
interface ISomethingProvider
{
  ISomething Provide(ISomethingOptions options);
} 
```

这真的过分了吗？我的理由是，任何类型都可以在某个时候从接口中受益。我遇到的唯一真正问题是我必须学习我认为设计课程的更好方法，因为你没有愚蠢互动和“黑客”正在发生。

如果这是否是一个定时炸弹，以及当您决定接口与否时，希望您能提供反馈。

ps-这实际上并不是关于如何编写接口。

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-09-21T22:59:27.643

简而言之，是的，可以对项目进行过度接口。考虑到当情况确实需要抽象基类和接口时，虽然它们都相似，但使用两者都有明显的优势，[请参见此处](http://www.codeproject.com/KB/cs/abstractsvsinterfaces.aspx). 通常，我注意到人们在真正应该使用抽象基类时使用接口。从 OO 的角度来看，应该使用接口来列出可能跨越不同类的常见行为。例如，您可能有一个带有名为 Move() 的方法的 IMove 接口。现在假设您有一个 Airplane、Car、Person 和 Insect 类。Airplane 和 Car 可能继承自一个抽象的 Vehicle 类，但仍需要使用 IMove，Insect 和 Person 也是如此，但它们都会以不同的方式实现 move。我注意到，包括我自己在内，人们倾向于使用接口将类“分组”在一起，而实际上应该由基类处理。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2008-09-21T22:43:39.210

接口描述行为的契约。如果您需要根据行为模式来处理一组对象，那么接口是有用的，如果您只是描述对象的结构，那么接口就不是很有用了。我认为您需要有充分的理由使用它们，例如使用创建行为相关对象的工厂或为库的一部分建立行为契约。漫无目的地使用接口会使库难以阅读/理解/维护。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T22:39:42.150

与其他任何事情一样 - 在必要时适度使用。问问自己“**你会需要它吗？** ”。

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T23:28:31.317

过度接口是可能的。我工作的规则是，如果您的应用程序中有一个接口，您需要至少有两个实现它的类（或者有一个合理的期望，即您将在不久的将来添加实现类）。

如果您需要创建模拟对象进行测试，那么让模拟类和真实类实现一个公共接口是使用接口的正当理由。

我不建议为应用程序中的所有内容自动使用接口，特别是因为如果需要，通常可以轻松地将单个类重构为接口。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-08-14T10:25:33.503

每当我看到或听到有人这样说

> 接口描述行为契约

我知道我找到了一个不懂接口的人。

接口***无法***做到这一点。是不可能的。接口***不规定、强制或以任何方式约束行为***。

接口描述了一个***接口***的契约，因此得名。他们没有行为。

您可能希望您为接口方法提供的名称对任何实现它的人来说都是一种必需的行为，但并不要求他们这样做。没有行为契约，也不可能存在契约。

如果您需要某种类型的行为，那么您必须使用类来强制执行它（例如，使用模板模式）——这就是所有行为的所在。

接口经常被滥用为一种设计结构，其中一个原因是人们普遍相信这种谬误。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T22:50:02.110

这不仅仅是 .NET 的事情，Java 中也经常出现同样的问题。

除非这是一个完全明显的要求，否则我投票赞成不使用接口，并在需要变得明确时简单地重构。

务实的方法是只做*可能可行的最简单的事情，*不要陷入建筑航天。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:06:27.563

我倾向于不使用太多接口进行测试。我宁愿在构建和测试时将私有值公开和/或解封类和/或临时方法，直到我构建了其他对象和测试，最终将行使我所需要的东西。有时，以这种方式进行更改会很痛苦，但是当您忘记更改某些内容时，您的测试会告诉您。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T22:37:19.007

如果到处都有接口，那么在使用调试器之前计算出最终的调用堆栈可能会很痛苦。我倾向于只在以下情况下更喜欢接口：

1.  您需要团队成员在开始编码之前就谁应该做什么达成一致 - 然后界面会准确记录边界

2.  当您确实需要一个接口来解决问题时，因此至少有两个不相互扩展的实现

3.  您期待案例 2

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T22:37:19.317

我发现界面使设计复杂化，尤其是让其他人共同处理你的东西。不要误会我的意思，接口适用于很多东西，但主要是如果您希望两个或更多类共享一个公共接口。

如果您发现自己突然需要一个接口，那么使用 Resharper 之类的工具进行重构是轻而易举的 :)

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T22:36:35.560

IS瑞士军刀！

咨询这个：

[http://thedailywtf.com/Articles/Classic-WTF-Implements-ISwissArmyKnife.aspx](http://thedailywtf.com/Articles/Classic-WTF-Implements-ISwissArmyKnife.aspx)

# unix - How do I remove the passphrase for the SSH key without having to create a new key?

> ID：112396
> 
>         
> 
> 赞同：1316
> 
>         
> 
> 时间：2008-09-21T22:39:02.527
> 
>         
> 
> 标签：unix, ssh, passwords, openssh, passphrase

I set a passphrase when creating a new SSH key on my laptop. But, as I realise now, this is quite painful when you are trying to commit ([Git](http://en.wikipedia.org/wiki/Git_%28software%29) and [SVN](http://en.wikipedia.org/wiki/Apache_Subversion)) to a remote location over SSH many times in an hour.

One way I can think of is, delete my SSH keys and create new. Is there a way to remove the passphrase, while still keeping the same keys?

* * *

## 回答 #1

> 赞同：2420
> 
>             
> 
> 时间：2008-09-21T22:42:09.353

Short answer:

```
$ ssh-keygen -p 
```

This will then prompt you to enter the keyfile location, the old passphrase, and the new passphrase (which can be left blank to have no passphrase).

* * *

If you would like to do it all on one line without prompts do:

```
$ ssh-keygen -p [-P old_passphrase] [-N new_passphrase] [-f keyfile] 
```

**Important:** Beware that when executing commands they will typically be logged in your `~/.bash_history` file (or similar) in plain text including all arguments provided (i.e. the passphrases in this case). It is, therefore, is recommended that you use the first option unless you have a specific reason to do otherwise.   

Notice though that you can still use `-f keyfile` without having to specify `-P` nor `-N`, and that the keyfile defaults to `~/.ssh/id_rsa`, so in many cases, it's not even needed.

You might want to consider using ssh-agent, which can cache the passphrase for a time. The latest versions of gpg-agent also support the protocol that is used by ssh-agent.

* * *

## 回答 #2

> 赞同：71
> 
>             
> 
> 时间：2018-06-05T15:27:34.720

`$ ssh-keygen -p` worked for me 

Opened git bash. Pasted : `$ ssh-keygen -p`

Hit enter for default location.

Enter old passphrase 

Enter new passphrase - BLANK

Confirm new passphrase - BLANK

BOOM the pain of entering passphrase for git push was gone.

Thanks!

* * *

## 回答 #3

> 赞同：43
> 
>             
> 
> 时间：2008-09-22T00:10:53.353

You might want to add the following to your .bash_profile (or equivalent), which starts ssh-agent on login.

```
if [ -f ~/.agent.env ] ; then
    . ~/.agent.env > /dev/null
    if ! kill -0 $SSH_AGENT_PID > /dev/null 2>&1; then
        echo "Stale agent file found. Spawning new agent… "
        eval `ssh-agent | tee ~/.agent.env`
        ssh-add
    fi 
else
    echo "Starting ssh-agent"
    eval `ssh-agent | tee ~/.agent.env`
    ssh-add
fi 
```

On some Linux distros (Ubuntu, Debian) you can use:

```
ssh-copy-id -i ~/.ssh/id_dsa.pub username@host 
```

This will copy the generated id to a remote machine and add it to the remote keychain.

You can read more [here](http://lambie.org/2004/02/13/ssh-auto-authentication/) and [here](http://lambie.org/2005/08/12/ssh-agent/).

* * *

## 回答 #4

> 赞同：17
> 
>             
> 
> 时间：2019-09-22T18:48:56.180

To change or remove the passphrase, I often find it simplest to pass in only the `p` and `f` flags, then let the system prompt me to supply the passphrases:

`ssh-keygen -p -f <name-of-private-key>`

For instance:

`ssh-keygen -p -f id_rsa`

Enter an empty password if you want to remove the passphrase.

A sample run to remove or change a password looks something like this:

```
ssh-keygen -p -f id_rsa
Enter old passphrase: 
Key has comment 'bcuser@pl1909'
Enter new passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved with the new passphrase. 
```

When adding a passphrase to a key that has no passphrase, the run looks something like this:

```
ssh-keygen -p -f id_rsa
Key has comment 'charlie@elf-path'
Enter new passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved with the new passphrase. 
```

* * *

## 回答 #5

> 赞同：8
> 
>             
> 
> 时间：2019-09-01T21:51:17.840

On the **Mac** you can store the passphrase for your private ssh key in your Keychain, which makes the use of it transparent. If you're logged in, it is available, when you are logged out your root user cannot use it. Removing the passphrase is a bad idea because  anyone with the file can use it.

```
ssh-keygen -K 
```

Add this to `~/.ssh/config`

```
UseKeychain yes 
```

* * *

## 回答 #6

> 赞同：7
> 
>             
> 
> 时间：2019-09-02T21:12:57.963

On windows, you can use PuttyGen to load the private key file, remove the passphrase and then overwrite the existing private key file. 

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2021-01-04T16:38:10.487

In windows for me it kept saying
"id_ed25135: No such file or directory" upon entering above commands. So I went to the folder, copied the path within folder explorer and added "\id_ed25135" at the end.

This is what I ended up typing and worked:

ssh-keygen -p -f C:\Users\john\.ssh\id_ed25135

This worked. Because for some reason, in Cmder the default path was something like this C:\Users\capit/.ssh/id_ed25135 (some were backslashes: "\" and some were forward slashes: "/")

# version-control - 团队基础服务器中的复制如何工作

> ID：112411
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-09-21T22:42:27.730
> 
>         
> 
> 标签：version-control, tfsbuild

我们在不同的州设有两个办事处，并且在使用 WAN 上的集成源控制时存在性能问题。我们正在考虑在 TFS 中使用复制来让两个办公室都拥有快速和强大的连接。我们需要了解网络负载、访问速度以及如何管理冲突。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T22:53:34.317

TFS 有一个代理服务器，应该有助于缓解性能问题。

编辑：虽然我从未亲自使用过它，但文档说明这正是它的用途

# visual-studio - 使用 Visual Studio 2008 汇编、链接、调试和执行 MASM 6.11 汇编代码

> ID：112412
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2008-09-21T22:42:42.923
> 
>         
> 
> 标签：visual-studio, visual-studio-2008, assembly, compilation, masm

我想尽可能地使用 Visual Studio 2008，同时有效地编译/链接/构建/等代码，就好像所有这些构建过程都是由 MASM 6.11 提供的工具完成的一样。MASM 的确切版本无关紧要，只要它在 6.x 范围内，因为这是我的大学用来教授 16 位汇编的版本。

我对该主题进行了一些研究，得出的结论是有几种选择：

1.  重新配置 VS 以使用与 MASM 6.11 本身相同的标志等调用 MASM 6.11 可执行文件。

2.  创建要由 VS 调用的中间批处理文件，然后为 MASM 的链接器等调用正确的命令。

3.  重新配置 VS 的内置构建工具/规则（汇编器、链接器等）以提供与 MASM 6.11 使用的环境相同的环境。

当我意识到 VS 的“外部工具”界面中可用的选项可能不足以正确调用 MASM 的构建工具时，选项 (2) 被提出，因此解释 VS 传递参数的严格方法的批处理文件可能会有所帮助，因为很多我学习如何使这项工作涉及我从命令提示符手动调用 ML.exe、LINK.exe 等。

以下是几个可能有助于回答我的问题的链接。请记住，我已经阅读了所有内容，但没有一个是实际的解决方案。我只能希望我指定的 MASM 6.11 不会阻止任何人提供可能更普遍的答案。

与选项（2）类似的方法，但线程上的用户无法联系：http: 

[//www.codeguru.com/forum/archive/index.php/t-284051.html](http://www.codeguru.com/forum/archive/index.php/t-284051.html)

（另外，我对中间批处理文件的必要性）

对我的问题的过时解释：

[http ://www.cs.fiu.edu/~downeyt/cop3402/masmaul.html](http://www.cs.fiu.edu/~downeyt/cop3402/masmaul.html)

可能是我最接近最终解决方案的东西，但指的是除 MASM 之外的工具套件，还使用批处理文件：

[http ://www.kipirvine.com/asm/gettingStarted/index.htm#16 -少量](http://www.kipirvine.com/asm/gettingStarted/index.htm#16-bit)

如果我在代码的每个步骤中使用的工具的术语 - > exe 进程已关闭，我深表歉意，但由于我试图在完成编写代码和生成可执行文件之间重现所有步骤，所以我不认为这很重要。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2010-03-08T17:16:51.080

有一个 MASM 规则文件位于（32 位系统删除`(x86)`）：

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\VCProjectDefaults\masm.rules 
```

将该文件复制到您的项目目录，并将其添加到您的项目的自定义构建规则中。然后“修改规则文件...”，选择MASM构建规则和“修改构建规则...”。

添加属性：

*   用户属性类型：**字符串**

*   默认值：***.inc**

*   说明：**添加额外的 MASM 文件依赖项。**

*   显示名称：**附加依赖项**

*   只读：**False**

*   名称：**附加依赖项**

*   属性页名称：**General**

*   开关：**[值]**

将 Additional Dependencies 值设置为**[AdditionalDependencies]**。构建现在应该会自动检测对 的更改`*.inc`，并且您可以编辑单个 asm 文件的属性以指定其他文件。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-10-12T09:15:14.913

您可以创建一个 makefile 项目。在 Visual Studio 中，在 File / New / Project 下，选择 Visual C++ / Makefile 项目。

这允许您运行任意命令来构建您的项目。它不必是 C/C++。它甚至不必是传统的 NMake makefile。我用它来编译一个使用批处理文件的驱动程序，并使用一个 NAnt 脚本。

让它运行 MASM 6.x 工具链应该相当容易。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-10-15T18:53:01.720

我建议根据文件扩展名定义自定义构建规则。（Visual Studio 2008，至少在专业版中，可以生成 .rules 文件，可以分发）。在那里，您可以为 asm 文件定义自定义构建工具。通过使用这种方法，您应该能够保持链接器步骤不变。

回想起来，我们使用 MASM32[链接文本](http://www.masm32.com/)作为 IDE 来帮助学生学习汇编。您可以检查他们的批处理文件来组装和链接。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:58:32.447

而不是批处理文件，为什么不使用文件上定义的自定义构建步骤？

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-10-10T16:20:41.640

如果你打算使用 Visual Studio，你不能给他们一个 C/C++ 框架项目，其中包含一个控制台应用程序的入口点，该应用程序调用一个具有空内联汇编块的函数，并让他们在其中填充结果吗？

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-11-15T03:54:10.677

为什么不使用 Irvine 的指南？Irvine 的库很好，如果你愿意，你可以忽略它并直接使用 Windows procs。我一直在寻找这样的指南，尔湾的是最好的解决方案。

# c++ - 我应该使用#define、枚举还是常量？

> ID：112433
> 
>         
> 
> 赞同：126
> 
>         
> 
> 时间：2008-09-21T22:49:05.373
> 
>         
> 
> 标签：c++, enums, bit-manipulation, c-preprocessor

在我正在处理的 C++ 项目中，我有一个*标志*类型的值，它可以有四个值。这四个标志可以组合。标志描述数据库中的记录，可以是：

*   新纪录

*   删除记录

*   修改记录

*   现有记录

现在，对于我希望保留此属性的每条记录，我可以使用枚举：

```
enum { xNew, xDeleted, xModified, xExisting } 
```

但是，在代码的其他地方，我需要选择哪些记录对用户可见，所以我希望能够将其作为单个参数传递，例如：

```
showRecords(xNew | xDeleted); 
```

所以，似乎我有三种可能的方法：

```
#define X_NEW      0x01
#define X_DELETED  0x02
#define X_MODIFIED 0x04
#define X_EXISTING 0x08 
```

或者

```
typedef enum { xNew = 1, xDeleted, xModified = 4, xExisting = 8 } RecordType; 
```

或者

```
namespace RecordType {
    static const uint8 xNew = 1;
    static const uint8 xDeleted = 2;
    static const uint8 xModified = 4;
    static const uint8 xExisting = 8;
} 
```

空间要求很重要（字节与整数），但并不重要。使用定义我失去了类型安全性，并且`enum`我失去了一些空间（整数）并且当我想要进行按位运算时可能不得不强制转换。我`const`认为我也失去了类型安全性，因为随机`uint8`可能会错误地进入。

还有其他更清洁的方法吗？

如果没有，你会用什么，为什么？

PS 其余的代码是相当干净的没有`#define`s 的现代 C++，而且我在少数空间中使用了命名空间和模板，所以这些也不是没有问题的。

* * *

## 回答 #1

> 赞同：90
> 
>             
> 
> 时间：2008-09-22T07:09:14.143

结合策略以减少单一方法的缺点。我在嵌入式系统中工作，因此以下解决方案基于整数和按位运算符速度快、内存低且闪存使用率低的事实。

将枚举放在命名空间中，以防止常量污染全局命名空间。

```
namespace RecordType { 
```

枚举声明并定义了一个编译时检查类型。始终使用编译时类型检查来确保参数和变量的类型正确。C++ 中不需要 typedef。

```
enum TRecordType { xNew = 1, xDeleted = 2, xModified = 4, xExisting = 8, 
```

为无效状态创建另一个成员。这可以用作错误代码；例如，当您想要返回状态但 I/O 操作失败时。它对调试也很有用；在初始化列表和析构函数中使用它来了解是否应该使用变量的值。

```
xInvalid = 16 }; 
```

考虑到这种类型有两个目的。跟踪记录的当前状态并创建掩码以选择处于某些状态的记录。创建一个内联函数来测试该类型的值是否对您的目的有效；作为状态标记与状态掩码。这将捕获错误，因为`typedef`它只是一个`int`和一个值，例如`0xDEADBEEF`可能通过未初始化或错误指向的变量在您的变量中。

```
inline bool IsValidState( TRecordType v) {
    switch(v) { case xNew: case xDeleted: case xModified: case xExisting: return true; }
    return false;
}

 inline bool IsValidMask( TRecordType v) {
    return v >= xNew  && v < xInvalid ;
} 
```

`using`如果您想经常使用该类型，请添加指令。

```
using RecordType ::TRecordType ; 
```

值检查函数在断言中很有用，可以在使用错误值时立即捕获它们。跑的时候越快发现虫子，它造成的伤害就越小。

这里有一些例子可以把它们放在一起。

```
void showRecords(TRecordType mask) {
    assert(RecordType::IsValidMask(mask));
    // do stuff;
}

void wombleRecord(TRecord rec, TRecordType state) {
    assert(RecordType::IsValidState(state));
    if (RecordType ::xNew) {
    // ...
} in runtime

TRecordType updateRecord(TRecord rec, TRecordType newstate) {
    assert(RecordType::IsValidState(newstate));
    //...
    if (! access_was_successful) return RecordType ::xInvalid;
    return newstate;
} 
```

确保正确值安全的唯一方法是使用带有运算符重载的专用类，这留给其他读者作为练习。

* * *

## 回答 #2

> 赞同：57
> 
>             
> 
> 时间：2008-09-21T23:52:53.160

## 忘记定义

他们会污染你的代码。

## 位域？

```
struct RecordFlag {
    unsigned isnew:1, isdeleted:1, ismodified:1, isexisting:1;
}; 
```

**永远不要使用它**。您更关心速度而不是节省 4 个整数。使用位域实际上比访问任何其他类型都慢。

> 然而，结构中的位成员有实际的缺点。首先，内存中位的顺序因编译器而异。此外，**许多流行的编译器生成读取和写入位成员的代码效率低下**，并且由于大多数机器无法操作内存中的任意位集，因此可能存在与位域相关的严重**线程安全问题**（尤其是在多处理器系统上），但必须改为加载和存储整个单词。例如，尽管使用了互斥锁，但以下内容不是线程安全的

来源：[http](http://en.wikipedia.org/wiki/Bit_field) ://en.wikipedia.org/wiki/Bit_field ：

如果您需要更多**不**使用位域的理由，也许[Raymond Chen会在他](http://en.wikipedia.org/wiki/Raymond_Chen)[的 The Old New Thing](http://blogs.msdn.com/oldnewthing)帖子中说服您： [http://blogs.msdn.com/oldnewthing/](http://blogs.msdn.com/oldnewthing/archive/2008/11/26/9143050.aspx)上的布尔集合的**位域的成本效益分析**[存档/2008/11/26/9143050.aspx](http://blogs.msdn.com/oldnewthing/archive/2008/11/26/9143050.aspx)

## 常量整数？

```
namespace RecordType {
    static const uint8 xNew = 1;
    static const uint8 xDeleted = 2;
    static const uint8 xModified = 4;
    static const uint8 xExisting = 8;
} 
```

将它们放在命名空间中很酷。如果它们在您的 CPP 或头文件中声明，它们的值将被内联。您将能够在这些值上使用 switch，但它会稍微增加耦合。

啊，是**的：删除 static 关键字**。在 C++ 中不推荐使用 static ，如果 uint8 是内置类型，则不需要在同一模块的多个源包含的标头中声明它。最后，代码应该是：

```
namespace RecordType {
    const uint8 xNew = 1;
    const uint8 xDeleted = 2;
    const uint8 xModified = 4;
    const uint8 xExisting = 8;
} 
```

这种方法的问题是您的代码知道常量的值，这会稍微增加耦合。

## 枚举

与 const int 相同，具有更强的类型。

```
typedef enum { xNew = 1, xDeleted, xModified = 4, xExisting = 8 } RecordType; 
```

但是，它们仍在污染全局命名空间。顺便说一句...**删除 typedef**。您正在使用 C++ 工作。枚举和结构的那些 typedef 对代码的污染比其他任何东西都多。

结果有点：

```
enum RecordType { xNew = 1, xDeleted, xModified = 4, xExisting = 8 } ;

void doSomething(RecordType p_eMyEnum)
{
   if(p_eMyEnum == xNew)
   {
       // etc.
   }
} 
```

如您所见，您的枚举正在污染全局命名空间。如果你把这个枚举放在一个命名空间中，你会得到类似的东西：

```
namespace RecordType {
   enum Value { xNew = 1, xDeleted, xModified = 4, xExisting = 8 } ;
}

void doSomething(RecordType::Value p_eMyEnum)
{
   if(p_eMyEnum == RecordType::xNew)
   {
       // etc.
   }
} 
```

## 外部常量 int ？

如果您想减少耦合（即能够隐藏常量的值，因此可以根据需要修改它们而无需完全重新编译），您可以在头文件中将 int 声明为 extern，并在 CPP 文件中声明为常量，如下例所示：

```
// Header.hpp
namespace RecordType {
    extern const uint8 xNew ;
    extern const uint8 xDeleted ;
    extern const uint8 xModified ;
    extern const uint8 xExisting ;
} 
```

和：

```
// Source.hpp
namespace RecordType {
    const uint8 xNew = 1;
    const uint8 xDeleted = 2;
    const uint8 xModified = 4;
    const uint8 xExisting = 8;
} 
```

但是，您将无法在这些常量上使用 switch。所以最后，选择你的毒药...... :-p

* * *

## 回答 #3

> 赞同：30
> 
>             
> 
> 时间：2008-09-21T23:06:16.347

你排除了 std::bitset 吗？标志集就是它的用途。做

```
typedef std::bitset<4> RecordType; 
```

然后

```
static const RecordType xNew(1);
static const RecordType xDeleted(2);
static const RecordType xModified(4);
static const RecordType xExisting(8); 
```

因为 bitset 有一堆运算符重载，你现在可以做

```
RecordType rt = whatever;      // unsigned long or RecordType expression
rt |= xNew;                    // set 
rt &= ~xDeleted;               // clear 
if ((rt & xModified) != 0) ... // test 
```

或与此非常相似的东西-由于我尚未对此进行测试，因此我将不胜感激。您也可以按索引引用位，但通常最好只定义一组常量，而 RecordType 常量可能更有用。

假设您已经排除了 bitset，我投票支持**enum**。

我不认为强制枚举是一个严重的缺点 - 好吧，所以它有点吵，并且为枚举分配一个超出范围的值是未定义的行为，所以理论上有可能在一些不寻常的 C++ 上开枪打死自己实施。但是，如果您只在必要时（即从 int 到 enum iirc 时）这样做，那么这是人们以前见过的完全正常的代码。

我也怀疑枚举的任何空间成本。uint8 变量和参数使用的堆栈可能不会比 int 少，因此只有类中的存储很重要。在某些情况下，在结构中打包多个字节会胜出（在这种情况下，您可以在 uint8 存储中输入和输出枚举），但通常填充无论如何都会扼杀好处。

因此，与其他枚举相比，枚举没有任何缺点，并且作为一个优势，可以为您提供一点类型安全性（如果没有显式转换，您无法分配一些随机整数值）和引用所有内容的简洁方式。

顺便说一句，为了偏好，我还将“= 2”放在枚举中。这不是必需的，但“最小惊讶原则”表明所有 4 个定义应该看起来相同。

* * *

## 回答 #4

> 赞同：8
> 
>             
> 
> 时间：2008-09-21T23:01:03.487

以下是关于 const 与宏与枚举的几篇文章：

[符号常量](http://www.embedded.com/electronics-blogs/programming-pointers/4023858/Symbolic-Constants)

[枚举常量与常量对象](http://www.embedded.com/electronics-blogs/programming-pointers/4023879/Enumeration-Constants-vs-Constant-Objects)

我认为您应该避免使用宏，尤其是因为您编写的大部分新代码都是用现代 C++ 编写的。

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T06:30:24.000

如果可能，不要使用宏。当谈到现代 C++ 时，他们并没有受到太多的钦佩。

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T22:57:33.230

枚举会更合适，因为它们提供“标识符的含义”以及类型安全。您可以清楚地看出“xDeleted”属于“RecordType”并且即使在多年之后也代表“记录类型”（哇！）。Consts 需要对此进行注释，他们也需要在代码中上下移动。

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2012-08-07T13:24:37.303

> 有了定义，我失去了类型安全

不必要...

```
// signed defines
#define X_NEW      0x01u
#define X_NEW      (unsigned(0x01))  // if you find this more readable... 
```

> 和枚举我失去了一些空间（整数）

不一定-但您必须在存储点上明确...

```
struct X
{
    RecordType recordType : 4;  // use exactly 4 bits...
    RecordType recordType2 : 4;  // use another 4 bits, typically in the same byte
    // of course, the overall record size may still be padded...
}; 
```

> 当我想做按位运算时可能必须强制转换。

您可以创建运算符来减轻痛苦：

```
RecordType operator|(RecordType lhs, RecordType rhs)
{
    return RecordType((unsigned)lhs | (unsigned)rhs);
} 
```

> 使用 const 我认为我也会失去类型安全性，因为随机 uint8 可能会错误地进入。

这些机制中的任何一种都可能发生同样的情况：范围和值检查通常与类型安全正交（尽管用户定义的类型 - 即您自己的类 - 可以对其数据强制执行“不变量”）。使用枚举，编译器可以自由选择更大的类型来托管值，并且未初始化、损坏或只是未设置的枚举变量最终仍可能将其位模式解释为您不期望的数字 - 比较不等于任何枚举标识符、它们的任意组合和 0。

> 还有其他更清洁的方法吗？/ 如果没有，你会用什么，为什么？

好吧，最终，一旦您在图片中拥有位字段和自定义运算符，经过验证的 C 风格的枚举按位 OR 就可以很好地工作。您可以使用一些自定义验证函数和断言进一步提高您的稳健性，如 mat_geek 的回答；技术通常同样适用于处理字符串、整数、双精度值等。

你可以说这是“更干净”：

```
enum RecordType { New, Deleted, Modified, Existing };

showRecords([](RecordType r) { return r == New || r == Deleted; }); 
```

我无所谓：数据位打包得更紧，但代码显着增长......取决于你有多少对象，而 lamdbas - 尽管它们很漂亮 - 仍然比按位 OR 更混乱，更难正确处理。

顺便说一句/-关于线程安全相当弱的恕我直言的论点-最好作为背景考虑而不是成为主导的决策驱动力而被记住；即使不知道它们的打包，在位域之间共享互斥锁也是一种更有可能的做法（互斥锁是相对庞大的数据成员 - 我必须非常关心性能才能考虑在一个对象的成员上拥有多个互斥锁，我会仔细查看足以注意到它们是位字段）。任何子字长类型都可能有相同的问题（例如 a `uint8_t`）。无论如何，如果您迫切需要更高的并发性，您可以尝试原子比较和交换样式操作。

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T22:54:24.767

即使你必须使用 4 字节来存储一个枚举（我对 C++ 不太熟悉——我知道你可以在 C# 中指定底层类型），它仍然值得——使用枚举。

在当今拥有 GB 内存的服务器时代，应用程序级别的 4 字节与 1 字节内存之类的东西通常无关紧要。当然，如果在您的特定情况下，内存使用非常重要（并且您不能让 C++ 使用字节来支持枚举），那么您可以考虑“静态 const”路线。

归根结底，您必须问自己，使用“静态常量”为您的数据结构节省 3 个字节的内存是否值得维护？

还有一点要记住——IIRC，在 x86 上，数据结构是 4 字节对齐的，所以除非你的“记录”结构中有许多字节宽度的元素，否则它实际上可能并不重要。在权衡性能/空间的可维护性之前进行测试并确保它确实有效。

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T02:05:27.383

如果您想要类的类型安全，以及枚举语法和位检查的便利，请考虑[C++ 中的安全标签](http://www.artima.com/cppsource/safelabels.html)。我和作者合作过，他很聪明。

不过要小心。最后，这个包使用了模板*和*宏！

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T23:15:55.620

您是否真的需要将标志值作为一个概念整体传递，或者您是否会有很多每个标志的代码？无论哪种方式，我认为将其作为 1 位位域的类或结构实际上可能更清楚：

```
struct RecordFlag {
    unsigned isnew:1, isdeleted:1, ismodified:1, isexisting:1;
}; 
```

然后你的记录类可以有一个结构记录标志成员变量，函数可以接受结构记录标志类型的参数，等等。编译器应该将位域打包在一起，节省空间。

* * *

## 回答 #11

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T02:03:37.997

对于可以将值组合在一起的这种事情，我可能不会使用枚举，更典型的是枚举是互斥状态。

但无论您使用哪种方法，为了更清楚地表明这些值是可以组合在一起的位，请使用以下语法代替实际值：

```
#define X_NEW      (1 << 0)
#define X_DELETED  (1 << 1)
#define X_MODIFIED (1 << 2)
#define X_EXISTING (1 << 3) 
```

在那里使用左移有助于表明每个值都是一个位，以后有人做错事的可能性较小，比如添加一个新值并将其分配为 9。

* * *

## 回答 #12

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T05:58:03.517

基于[KISS](http://en.wikipedia.org/wiki/KISS_principle)，[高内聚低耦合](http://en.wikipedia.org/wiki/Coupling_(computer_science))，问这些问题——

*   谁需要知道？我的班级，我的图书馆，其他班级，其他图书馆，第 3 方

*   我需要提供什么级别的抽象？消费者是否了解位操作。

*   我必须从 VB/C# 等接口吗？

有一本很棒的书“ [Large-Scale C++ Software Design](https://rads.stackoverflow.com/amzn/click/com/0201633620) ”，它在外部促进了基本类型，如果你可以避免另一个头文件/接口依赖，你应该尝试。

* * *

## 回答 #13

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T06:26:03.450

如果您使用的是 Qt，则应该查看[QFlags](http://doc.trolltech.com/4.3/qflags.html#details "QFlags")。QFlags 类提供了一种类型安全的方式来存储枚举值的 OR 组合。

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T23:27:00.150

我宁愿和

```
typedef enum { xNew = 1, xDeleted, xModified = 4, xExisting = 8 } RecordType; 
```

仅仅是因为：

1.  它更干净，它使代码可读和可维护。

2.  它在逻辑上对常量进行分组。

3.  程序员的时间更重要，除非你的工作*是*保存这 3 个字节。    

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T12:41:50.300

并不是说我喜欢过度设计一切，但有时在这些情况下，可能值得创建一个（小）类来封装这些信息。如果您创建一个 RecordType 类，那么它可能具有以下功能：

无效 setDeleted();

无效清除删除（）；

布尔 isDeleted();

等等......（或任何适合的公约）

它可以验证组合（在并非所有组合都合法的情况下，例如，如果不能同时设置“新”和“已删除”）。如果您只是使用位掩码等，那么设置状态的代码需要验证，一个类也可以封装该逻辑。  

该类还可以使您能够将有意义的日志记录信息附加到每个状态，您可以添加一个函数来返回当前状态的字符串表示等（或使用流操作符'<<'）。  

尽管如此，如果你担心存储，你仍然可以让这个类只有一个“char”数据成员，所以只需要少量的存储（假设它是非虚拟的）。当然，根据硬件等，您可能会遇到对齐问题。

如果实际位值位于 cpp 文件内的匿名命名空间中，而不是在头文件中，则它们可能对“世界”的其他部分不可见。

如果您发现使用 enum/#define/ 位掩码等的代码有很多“支持”代码来处理无效组合、日志记录等，那么在类中封装可能值得考虑。当然，大多数时候简单的问题最好用简单的解决方案来解决......

# low-level - CPU 仿真和锁定到特定的时钟速度

> ID：112439
> 
>         
> 
> 赞同：27
> 
>         
> 
> 时间：2008-09-21T22:50:44.933
> 
>         
> 
> 标签：low-level, emulation, 6502, clockrates

如果您阅读了我的另一个[问题](https://stackoverflow.com/questions/111700/6502-cpu-emulation)，您就会知道我在这个周末花了一个 6502 CPU 仿真器作为编程练习。

CPU 模拟器大部分是完整的，从我有限的测试来看似乎相当准确，但是它运行得非常快，我想将它降低到机器的实际时钟速度。

我当前的测试循环是这样的：

```
 // Just loop infinitely.
    while (1 == 1)
    {                
        CPU.ClockCyclesBeforeNext--;

        if (CPU.ClockCyclesBeforeNext <= 0)
        {
            // Find out how many clock cycles this instruction will take
            CPU.ClockCyclesBeforeNext = CPU.OpcodeMapper.Map[CPU.Memory[CPU.PC]].CpuCycles;

            // Run the instruction
            CPU.ExecuteInstruction(CPU.Memory[CPU.PC]);

            // Debugging Info
            CPU.DumpDebug();
            Console.WriteLine(CPU.OpcodeMapper.Map[CPU.Memory[CPU.PC]].ArgumentLength);

            // Move to next instruction
            CPU.PC += 1 + CPU.OpcodeMapper.Map[CPU.Memory[CPU.PC]].ArgumentLength;                                        
        }
    } 
```

如您所知，每个操作码都需要特定的时间才能完成，因此在倒计时 CPU 周期时钟之前，我不会运行下一条指令。这提供了操作码之间的适当时间，只是整个事情运行得很快。

目标 CPU 速度是 1.79mhz，但是我想要解决时钟问题的任何解决方案，以将速度保持在 1.79mhz，即使我增加了复杂性，所以我不必调整它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
>             
> 
> 时间：2009-05-06T02:08:23.460

多年前我编写了一个 Z80 仿真器，为了进行周期精确执行，我将时钟速率划分为多个小块，让内核执行那么多时钟周期。就我而言，我将它与我正在模拟的游戏系统的帧速率联系起来。每个操作码都知道执行需要多少个周期，并且内核将继续运行操作码，直到执行了指定的周期数。我有一个外部运行循环，它将运行 cpu 核心，运行模拟系统的其他部分，然后休眠直到下一次迭代的开始时间。

编辑：添加运行循环的示例。

```
int execute_run_loop( int cycles )
{
    int n = 0;
    while( n < cycles )
    {
        /* Returns number of cycles executed */
        n += execute_next_opcode();
    }

    return n;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
>             
> 
> 时间：2008-09-21T23:01:02.910

查看原始的 quicktime 文档以获取灵感。

它是很久以前写的，当显示视频意味着以足够高的速度交换静止帧时，但苹果公司的人决定他们需要一个完整的时间管理框架。最初的设计看起来过度设计，但它让它们能够处理广泛不同的速度要求并保持它们紧密同步。

幸运的是 6502 具有确定的时间行为，每条指令所用的确切时间都有详细记录；但这不是一成不变的。有些指令需要 2 个周期，其他 3 个。就像 QuickTime 中的帧一样，视频没有“每秒帧数”参数，每帧都说明它想在屏幕上显示多长时间。

由于现代 CPU 是如此的不确定，多任务操作系统甚至可以冻结几毫秒（虚拟内存！），如果你落后于计划，或者如果你可以小睡几微秒，你应该保持一个标签。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2009-09-08T11:45:00.377

正如 jfk 所说，最常见的方法是**将 cpu 速度与（模拟）视频输出的垂直刷新联系起来**。

选择每个视频帧运行的周期数。这通常是特定于机器的，但您可以通过以下方式计算它：

```
cycles = clock speed in Hz / required frames-per-second 
```

然后您还可以进行睡眠，直到视频更新被触发，此时您开始接下来的 n 个 CPU 仿真周期。

如果您正在模拟特定的东西，那么您只需要查看 fps 速率和处理器速度即可大致正确。

编辑：如果您没有任何外部时序要求，那么仿真器尽可能快地运行是正常的。有时这是预期的效果，有时不是:)

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T23:00:44.473

我会使用时钟周期来计算时间，然后他们会睡不同的时间。当然，要做到这一点，您需要一个高分辨率时钟。他们这样做的方式会在旋转循环中使 CPU 达到峰值。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2014-02-20T13:46:36.700

是的，正如之前所说的，大多数时候您不需要 CPU 模拟器以与真实事物相同的速度模拟指令。用户感知的是计算的*输出*（即音频和视频输出），因此您只需要与此类输出同步，这并不意味着您必须具有精确的 CPU 仿真速度。

换句话说，如果视频输入的帧速率是 50Hz，那么让 CPU 仿真器尽可能快地运行以绘制屏幕，​​但确保以正确的速率（50Hz）输出屏幕帧。从外部角度来看，您的仿真器正在以正确的速度进行仿真。

在 Windows 或 Linux 等多任务操作系统上，即使在执行时间上尝试精确循环也是毫无意义的，因为仿真器指令时间（对于老式 80 年代 CPU 通常为 1uS）和现代操作系统的调度时隙是可比的。

尝试以 50Hz 的速率输出东西是一项简单得多的任务，您可以在任何现代机器上做得很好

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2012-11-07T05:40:55.563

如果实现了音频仿真，并且音频输出与系统/CPU 时钟相关联，则可以使用另一个选项。特别是我知道 8 位 Apple ][ 计算机就是这种情况。

通常声音是在固定大小（固定时间）的缓冲区中生成的，因此这些缓冲区的操作（生成数据等）可以通过同步原语与 CPU 吞吐量相关联。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2015-08-06T21:27:19.980

我正在制作一些更通用的基于用例的东西，例如将时间转换为估计的指令数量的能力，反之亦然。

项目主页是[@http://net7mma.codeplex.com](http://net7mma.codeplex.com)

代码是这样开始的：（我认为）

```
 #region Copyright
/*
This file came from Managed Media Aggregation, You can always find the latest version @ https://net7mma.codeplex.com/

 Julius.Friedman@gmail.com / (SR. Software Engineer ASTI Transportation Inc. http://www.asti-trans.com)

Permission is hereby granted, free of charge, 
 * to any person obtaining a copy of this software and associated documentation files (the "Software"), 
 * to deal in the Software without restriction, 
 * including without limitation the rights to :
 * use, 
 * copy, 
 * modify, 
 * merge, 
 * publish, 
 * distribute, 
 * sublicense, 
 * and/or sell copies of the Software, 
 * and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * 
 * JuliusFriedman@gmail.com should be contacted for further details.

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
 * 
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, 
 * ARISING FROM, 
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * v//
 */
#endregion
namespace Media.Concepts.Classes
{
    //Windows.Media.Clock has a fairly complex but complete API

    /// <summary>
    /// Provides a clock with a given offset and calendar.
    /// </summary>
    public class Clock : Media.Common.BaseDisposable
    {
        static bool GC = false;

        #region Fields

        /// <summary>
        /// Indicates when the clock was created
        /// </summary>
        public readonly System.DateTimeOffset Created;

        /// <summary>
        /// The calendar system of the clock
        /// </summary>
        public readonly System.Globalization.Calendar Calendar;

        /// <summary>
        /// The amount of ticks which occur per update of the <see cref="System.Environment.TickCount"/> member.
        /// </summary>
        public readonly long TicksPerUpdate;

        /// <summary>
        /// The amount of instructions which occured when synchronizing with the system clock.
        /// </summary>
        public readonly long InstructionsPerClockUpdate;

        #endregion

        #region Properties

        /// <summary>
        /// The TimeZone offset of the clock from UTC
        /// </summary>
        public System.TimeSpan Offset { get { return Created.Offset; } }

        /// <summary>
        /// The average amount of operations per tick.
        /// </summary>
        public long AverageOperationsPerTick { get { return InstructionsPerClockUpdate / TicksPerUpdate; } }

        /// <summary>
        /// The <see cref="System.TimeSpan"/> which represents <see cref="TicksPerUpdate"/> as an amount of time.
        /// </summary>
        public System.TimeSpan SystemClockResolution { get { return System.TimeSpan.FromTicks(TicksPerUpdate); } }

        /// <summary>
        /// Return the current system time in the TimeZone offset of this clock
        /// </summary>
        public System.DateTimeOffset Now { get { return System.DateTimeOffset.Now.ToOffset(Offset).Add(new System.TimeSpan((long)(AverageOperationsPerTick / System.TimeSpan.TicksPerMillisecond))); } }

        /// <summary>
        /// Return the current system time in the TimeZone offset of this clock converter to UniversalTime.
        /// </summary>
        public System.DateTimeOffset UtcNow { get { return Now.ToUniversalTime(); } }

        //public bool IsUtc { get { return Offset == System.TimeSpan.Zero; } }

        //public bool IsDaylightSavingTime { get { return Created.LocalDateTime.IsDaylightSavingTime(); } }

        #endregion

        #region Constructor

        /// <summary>
        /// Creates a clock using the system's current timezone and calendar.
        /// The system clock is profiled to determine it's accuracy
        /// <see cref="System.DateTimeOffset.Now.Offset"/>
        /// <see cref="System.Globalization.CultureInfo.CurrentCulture.Calendar"/>
        /// </summary>
        public Clock(bool shouldDispose = true)
            : this(System.DateTimeOffset.Now.Offset, System.Globalization.CultureInfo.CurrentCulture.Calendar, shouldDispose)
        {
            try { if (false == GC && System.Runtime.GCSettings.LatencyMode != System.Runtime.GCLatencyMode.NoGCRegion) GC = System.GC.TryStartNoGCRegion(0); }
            catch { }
            finally
            {

                System.Threading.Thread.BeginCriticalRegion();

                //Sample the TickCount
                long ticksStart = System.Environment.TickCount,
                    ticksEnd;

                //Continually sample the TickCount. while the value has not changed increment InstructionsPerClockUpdate
                while ((ticksEnd = System.Environment.TickCount) == ticksStart) ++InstructionsPerClockUpdate; //+= 4; Read,Assign,Compare,Increment

                //How many ticks occur per update of TickCount
                TicksPerUpdate = ticksEnd - ticksStart;

                System.Threading.Thread.EndCriticalRegion();
            }
        }

        /// <summary>
        /// Constructs a new clock using the given TimeZone offset and Calendar system
        /// </summary>
        /// <param name="timeZoneOffset"></param>
        /// <param name="calendar"></param>
        /// <param name="shouldDispose">Indicates if the instace should be diposed when Dispose is called.</param>
        public Clock(System.TimeSpan timeZoneOffset, System.Globalization.Calendar calendar, bool shouldDispose = true)
        {
            //Allow disposal
            ShouldDispose = shouldDispose;

            Calendar = System.Globalization.CultureInfo.CurrentCulture.Calendar;

            Created = new System.DateTimeOffset(System.DateTime.Now, timeZoneOffset);
        }

        #endregion

        #region Overrides

        public override void Dispose()
        {

            if (false == ShouldDispose) return;

            base.Dispose();

            try
            {
                if (System.Runtime.GCSettings.LatencyMode == System.Runtime.GCLatencyMode.NoGCRegion)
                {
                    System.GC.EndNoGCRegion();

                    GC = false;
                }
            }
            catch { }
        }

        #endregion

        //Methods or statics for OperationCountToTimeSpan? (Estimate)
        public void NanoSleep(int nanos)
        {
            Clock.NanoSleep((long)nanos);
        }

        public static void NanoSleep(long nanos)
        {
            System.Threading.Thread.BeginCriticalRegion(); 

            NanoSleep(ref nanos); 

            System.Threading.Thread.EndCriticalRegion();
        }

        static void NanoSleep(ref long nanos)
        {
            try
            {
                unchecked
                {
                    while (Common.Binary.Clamp(--nanos, 0, 1) >= 2)
                    { 
                        /* if(--nanos % 2 == 0) */
                            NanoSleep(long.MinValue); //nanos -= 1 + (ops / (ulong)AverageOperationsPerTick);// *10;
                    }
                }
            }
            catch
            {
                return;
            }
        }
    }
} 
```

一旦你有某种类型的外行时钟实现，你就会前进到类似的东西`Timer`

```
/// <summary>
/// Provides a Timer implementation which can be used across all platforms and does not rely on the existing Timer implementation.
/// </summary>
public class Timer : Common.BaseDisposable
{
    readonly System.Threading.Thread m_Counter; // m_Consumer, m_Producer

    internal System.TimeSpan m_Frequency;

    internal ulong m_Ops = 0, m_Ticks = 0;

    bool m_Enabled;

    internal System.DateTimeOffset m_Started;

    public delegate void TickEvent(ref long ticks);

    public event TickEvent Tick;

    public bool Enabled { get { return m_Enabled; } set { m_Enabled = value; } }

    public System.TimeSpan Frequency { get { return m_Frequency; } }

    internal ulong m_Bias;

    //

    //Could just use a single int, 32 bits is more than enough.

    //uint m_Flags;

    //

    readonly internal Clock m_Clock = new Clock();

    readonly internal System.Collections.Generic.Queue<long> Producer;

    void Count()
    {

        System.Threading.Thread Event = new System.Threading.Thread(new System.Threading.ThreadStart(() =>
        {
            System.Threading.Thread.BeginCriticalRegion();
            long sample;
        AfterSample:
            try
            {
            Top:
                System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Highest;

                while (m_Enabled && Producer.Count >= 1)
                {
                    sample = Producer.Dequeue();

                    Tick(ref sample);
                }

                System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Lowest;

                if (false == m_Enabled) return;

                while (m_Enabled && Producer.Count == 0) if(m_Counter.IsAlive) m_Counter.Join(0);  //++m_Ops;

                goto Top;
            }
            catch { if (false == m_Enabled) return; goto AfterSample; }
            finally { System.Threading.Thread.EndCriticalRegion(); }
        }))
        {
            IsBackground = false,
            Priority = System.Threading.ThreadPriority.AboveNormal
        };

        Event.TrySetApartmentState(System.Threading.ApartmentState.MTA);

        Event.Start();

        Approximate:

        ulong approximate = (ulong)Common.Binary.Clamp((m_Clock.AverageOperationsPerTick / (Frequency.Ticks + 1)), 1, ulong.MaxValue);

        try
        {
            m_Started = m_Clock.Now;

            System.Threading.Thread.BeginCriticalRegion();

            unchecked
            {
            Start:

                if (IsDisposed) return;

                switch (++m_Ops)
                {
                    default:
                        {
                            if (m_Bias + ++m_Ops >= approximate)
                            {
                                System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Highest;

                                Producer.Enqueue((long)m_Ticks++);

                                ulong x = ++m_Ops / approximate;

                                while (1 > --x /*&& Producer.Count <= m_Frequency.Ticks*/) Producer.Enqueue((long)++m_Ticks);

                                m_Ops = (++m_Ops * m_Ticks) - (m_Bias = ++m_Ops / approximate);

                                System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Lowest;
                            }

                            if(Event != null) Event.Join(m_Frequency);

                            goto Start;
                        }
                }
            }
        }
        catch (System.Threading.ThreadAbortException) { if (m_Enabled) goto Approximate; System.Threading.Thread.ResetAbort(); }
        catch (System.OutOfMemoryException) { if ((ulong)Producer.Count > approximate) Producer.Clear(); if (m_Enabled) goto Approximate; }
        catch { if (m_Enabled) goto Approximate; }
        finally
        {
            Event = null;

            System.Threading.Thread.EndCriticalRegion();
        }
    }

    public Timer(System.TimeSpan frequency)
    {
        Producer = new System.Collections.Generic.Queue<long>((int)(m_Frequency = frequency).Ticks * 10);

        m_Counter = new System.Threading.Thread(new System.Threading.ThreadStart(Count))
        {
            IsBackground = false,
            Priority = System.Threading.ThreadPriority.AboveNormal
        };

        m_Counter.TrySetApartmentState(System.Threading.ApartmentState.MTA);

        Tick = delegate { m_Ops += 1 + m_Bias; };
    }

    public void Start()
    {
        if (m_Enabled) return;

        m_Enabled = true;

        m_Counter.Start();

        var p = System.Threading.Thread.CurrentThread.Priority;

        System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Lowest;

        while (m_Ops == 0) m_Counter.Join(0); //m_Clock.NanoSleep(0);

        System.Threading.Thread.CurrentThread.Priority = p;

    }

    public void Stop()
    {
        m_Enabled = false;
    }

    void Change(System.TimeSpan interval, System.TimeSpan dueTime)
    {
        m_Enabled = false;

        m_Frequency = interval;

        m_Enabled = true;
    }

    delegate void ElapsedEvent(object sender, object args);

    public override void Dispose()
    {
        if (IsDisposed) return;            

        base.Dispose();

        Stop();

        try { m_Counter.Abort(m_Frequency); }
        catch (System.Threading.ThreadAbortException) { System.Threading.Thread.ResetAbort(); }
        catch { }

        Tick = null;

        //Producer.Clear();
    }

} 
```

然后你可以使用类似的东西真正复制一些逻辑

```
 /// <summary>
/// Provides a completely managed implementation of <see cref="System.Diagnostics.Stopwatch"/> which expresses time in the same units as <see cref="System.TimeSpan"/>.
/// </summary>
public class Stopwatch : Common.BaseDisposable
{
    internal Timer Timer;

    long Units;

    public bool Enabled { get { return Timer != null && Timer.Enabled; } }

    public double ElapsedMicroseconds { get { return Units * Media.Common.Extensions.TimeSpan.TimeSpanExtensions.TotalMicroseconds(Timer.Frequency); } }

    public double ElapsedMilliseconds { get { return Units * Timer.Frequency.TotalMilliseconds; } }

    public double ElapsedSeconds { get { return Units * Timer.Frequency.TotalSeconds; } }

    //public System.TimeSpan Elapsed { get { return System.TimeSpan.FromMilliseconds(ElapsedMilliseconds / System.TimeSpan.TicksPerMillisecond); } }

    public System.TimeSpan Elapsed
    {
        get
        {
            switch (Units)
            {
                case 0: return System.TimeSpan.Zero;
                default:
                    {
                        System.TimeSpan taken = System.DateTime.UtcNow - Timer.m_Started;

                        return taken.Add(new System.TimeSpan(Units * Timer.Frequency.Ticks));

                        //System.TimeSpan additional = new System.TimeSpan(Media.Common.Extensions.Math.MathExtensions.Clamp(Units, 0, Timer.Frequency.Ticks));

                        //return taken.Add(additional);
                    }
            }

            //////The maximum amount of times the timer can elapse in the given frequency
            ////double maxCount = (taken.TotalMilliseconds / Timer.Frequency.TotalMilliseconds) / ElapsedMilliseconds;

            ////if (Units > maxCount)
            ////{
            ////    //How many more times the event was fired than needed
            ////    double overage = (maxCount - Units);

            ////    additional = new System.TimeSpan(System.Convert.ToInt64(Media.Common.Extensions.Math.MathExtensions.Clamp(Units, overage, maxCount)));

            ////    //return taken.Add(new System.TimeSpan((long)Media.Common.Extensions.Math.MathExtensions.Clamp(Units, overage, maxCount)));
            ////}
            //////return taken.Add(new System.TimeSpan(Units));

        }
    }

    public void Start()
    {
        if (Enabled) return;

        Units = 0;

        //Create a Timer that will elapse every OneTick //`OneMicrosecond`
        Timer = new Timer(Media.Common.Extensions.TimeSpan.TimeSpanExtensions.OneTick);

        //Handle the event by incrementing count
        Timer.Tick += Count;

        Timer.Start();
    }

    public void Stop()
    {
        if (false == Enabled) return;

        Timer.Stop();

        Timer.Dispose();           
    }

    void Count(ref long count) { ++Units; }
} 
```

最后，创建一些半有用的东西，例如总线，然后可能是一个虚拟屏幕来向总线发送数据......

```
public abstract class Bus : Common.CommonDisposable
    {
        public readonly Timer Clock = new Timer(Common.Extensions.TimeSpan.TimeSpanExtensions.OneTick);

        public Bus() : base(false) { Clock.Start(); }
    }

    public class ClockedBus : Bus
    {
        long FrequencyHz, Maximum, End;

        readonly Queue<byte[]> Input = new Queue<byte[]>(), Output = new Queue<byte[]>();

        readonly double m_Bias;

        public ClockedBus(long frequencyHz, double bias = 1.5)
        {
            m_Bias = bias;

            cache = Clock.m_Clock.InstructionsPerClockUpdate / 1000;

            SetFrequency(frequencyHz);

            Clock.Tick += Clock_Tick;

            Clock.Start();
        }

        public void SetFrequency(long frequencyHz)
        {
            FrequencyHz = frequencyHz;

            //Clock.m_Frequency = new TimeSpan(Clock.m_Clock.InstructionsPerClockUpdate / 1000); 

            //Maximum = System.TimeSpan.TicksPerSecond / Clock.m_Clock.InstructionsPerClockUpdate;

            //Maximum = Clock.m_Clock.InstructionsPerClockUpdate / System.TimeSpan.TicksPerSecond;

            Maximum = cache / (cache / FrequencyHz);

            Maximum *= System.TimeSpan.TicksPerSecond;

            Maximum = (cache / FrequencyHz);

            End = Maximum * 2;

            Clock.m_Frequency = new TimeSpan(Maximum);

            if (cache < frequencyHz * m_Bias) throw new Exception("Cannot obtain stable clock");

            Clock.Producer.Clear();
        }

        public override void Dispose()
        {
            ShouldDispose = true;

            Clock.Tick -= Clock_Tick;

            Clock.Stop();

            Clock.Dispose();

            base.Dispose();
        }

        ~ClockedBus() { Dispose(); }

        long sample = 0, steps = 0, count = 0, avg = 0, cache = 1;

        void Clock_Tick(ref long ticks)
        {
            if (ShouldDispose == false && false == IsDisposed)
            {
                //Console.WriteLine("@ops=>" + Clock.m_Ops + " @ticks=>" + Clock.m_Ticks + " @Lticks=>" + ticks + "@=>" + Clock.m_Clock.Now.TimeOfDay + "@=>" + (Clock.m_Clock.Now - Clock.m_Clock.Created));

                steps = sample;

                sample = ticks;

                ++count;

                System.ConsoleColor f = System.Console.ForegroundColor;

                if (count <= Maximum)
                {
                    System.Console.BackgroundColor = ConsoleColor.Yellow;

                    System.Console.ForegroundColor = ConsoleColor.Green;

                    Console.WriteLine("count=> " + count + "@=>" + Clock.m_Clock.Now.TimeOfDay + "@=>" + (Clock.m_Clock.Now - Clock.m_Clock.Created) + " - " + DateTime.UtcNow.ToString("MM/dd/yyyy hh:mm:ss.ffffff tt"));

                    avg = Maximum / count;

                    if (Clock.m_Clock.InstructionsPerClockUpdate / count > Maximum)
                    {
                        System.Console.ForegroundColor = ConsoleColor.Red;

                        Console.WriteLine("---- Over InstructionsPerClockUpdate ----" + FrequencyHz);
                    }
                }
                else if (count >= End)
                {
                    System.Console.BackgroundColor = ConsoleColor.Black;

                    System.Console.ForegroundColor = ConsoleColor.Blue;

                    avg = Maximum / count;

                    Console.WriteLine("avg=> " + avg + "@=>" + FrequencyHz);

                    count = 0;
                }
            }
        }

        //Read, Write at Frequency

    }
public class VirtualScreen
    {
        TimeSpan RefreshRate;    
        bool VerticalSync;    
        int Width, Height;            
        Common.MemorySegment DisplayMemory, BackBuffer, DisplayBuffer;
    } 
```

这是我测试的方法`StopWatch`

```
internal class StopWatchTests
    {
        public void TestForOneMicrosecond()
        {
            System.Collections.Generic.List<System.Tuple<bool, System.TimeSpan, System.TimeSpan>> l = new System.Collections.Generic.List<System.Tuple<bool, System.TimeSpan, System.TimeSpan>>();

            //Create a Timer that will elapse every `OneMicrosecond`
            for (int i = 0; i <= 250; ++i) using (Media.Concepts.Classes.Stopwatch sw = new Media.Concepts.Classes.Stopwatch())
            {
                var started = System.DateTime.UtcNow;

                System.Console.WriteLine("Started: " + started.ToString("MM/dd/yyyy hh:mm:ss.ffffff tt"));

                //Define some amount of time
                System.TimeSpan sleepTime = Media.Common.Extensions.TimeSpan.TimeSpanExtensions.OneMicrosecond;

                System.Diagnostics.Stopwatch testSw = new System.Diagnostics.Stopwatch();

                //Start
                testSw.Start();

                //Start
                sw.Start();

                while (testSw.Elapsed.Ticks < sleepTime.Ticks - (Common.Extensions.TimeSpan.TimeSpanExtensions.OneTick + Common.Extensions.TimeSpan.TimeSpanExtensions.OneTick).Ticks)
                    sw.Timer.m_Clock.NanoSleep(0); //System.Threading.Thread.SpinWait(0);

                //Sleep the desired amount
                //System.Threading.Thread.Sleep(sleepTime);

                //Stop
                testSw.Stop();

                //Stop
                sw.Stop();

                var finished = System.DateTime.UtcNow;

                var taken = finished - started;

                var cc = System.Console.ForegroundColor;

                System.Console.WriteLine("Finished: " + finished.ToString("MM/dd/yyyy hh:mm:ss.ffffff tt"));

                System.Console.WriteLine("Sleep Time: " + sleepTime.ToString());

                System.Console.WriteLine("Real Taken Total: " + taken.ToString());

                if (taken > sleepTime) 
                {
                    System.Console.ForegroundColor = System.ConsoleColor.Red;
                    System.Console.WriteLine("Missed by: " + (taken - sleepTime));
                }
                else
                {
                    System.Console.ForegroundColor = System.ConsoleColor.Green;
                    System.Console.WriteLine("Still have: " + (sleepTime - taken));
                }

                System.Console.ForegroundColor = cc;

                System.Console.WriteLine("Real Taken msec Total: " + taken.TotalMilliseconds.ToString());

                System.Console.WriteLine("Real Taken sec Total: " + taken.TotalSeconds.ToString());

                System.Console.WriteLine("Real Taken μs Total: " + Media.Common.Extensions.TimeSpan.TimeSpanExtensions.TotalMicroseconds(taken).ToString());

                System.Console.WriteLine("Managed Taken Total: " + sw.Elapsed.ToString());

                System.Console.WriteLine("Diagnostic Taken Total: " + testSw.Elapsed.ToString());

                System.Console.WriteLine("Diagnostic Elapsed Seconds  Total: " + ((testSw.ElapsedTicks / (double)System.Diagnostics.Stopwatch.Frequency)));

                //Write the rough amount of time taken in  micro seconds
                System.Console.WriteLine("Managed Time Estimated Taken: " + sw.ElapsedMicroseconds + "μs");

                //Write the rough amount of time taken in  micro seconds
                System.Console.WriteLine("Diagnostic Time Estimated Taken: " + Media.Common.Extensions.TimeSpan.TimeSpanExtensions.TotalMicroseconds(testSw.Elapsed) + "μs");

                System.Console.WriteLine("Managed Time Estimated Taken: " + sw.ElapsedMilliseconds);

                System.Console.WriteLine("Diagnostic Time Estimated Taken: " + testSw.ElapsedMilliseconds);

                System.Console.WriteLine("Managed Time Estimated Taken: " + sw.ElapsedSeconds);

                System.Console.WriteLine("Diagnostic Time Estimated Taken: " + testSw.Elapsed.TotalSeconds);

                if (sw.Elapsed < testSw.Elapsed)
                {
                    System.Console.WriteLine("Faster than Diagnostic StopWatch");
                    l.Add(new System.Tuple<bool, System.TimeSpan, System.TimeSpan>(true, sw.Elapsed, testSw.Elapsed));
                }
                else if (sw.Elapsed > testSw.Elapsed)
                {
                    System.Console.WriteLine("Slower than Diagnostic StopWatch");
                    l.Add(new System.Tuple<bool, System.TimeSpan, System.TimeSpan>(false, sw.Elapsed, testSw.Elapsed));
                }
                else
                {
                    System.Console.WriteLine("Equal to Diagnostic StopWatch");
                    l.Add(new System.Tuple<bool, System.TimeSpan, System.TimeSpan>(true, sw.Elapsed, testSw.Elapsed));
                }
            }

            int w = 0, f = 0;

            var cc2 = System.Console.ForegroundColor;

            foreach (var t in l)
            {
                if (t.Item1)
                {
                    System.Console.ForegroundColor = System.ConsoleColor.Green;
                    ++w; System.Console.WriteLine("Faster than Diagnostic StopWatch by: " + (t.Item3 - t.Item2));
                }
                else
                {
                    System.Console.ForegroundColor = System.ConsoleColor.Red;
                    ++f; System.Console.WriteLine("Slower than Diagnostic StopWatch by: " + (t.Item2 - t.Item3));
                }
            }

            System.Console.ForegroundColor = System.ConsoleColor.Green;
            System.Console.WriteLine("Wins = " + w);

            System.Console.ForegroundColor = System.ConsoleColor.Red;
            System.Console.WriteLine("Loss = " + f);

            System.Console.ForegroundColor = cc2;
        }
    } 
```

# javascript - Javascript 错误

> ID：112440
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-21T22:52:49.420
> 
>         
> 
> 标签：javascript

我在显示页面时遇到 JS 错误：没有指定具体内容，但似乎是抛出它的行。查看页面的源代码时，我看到以下脚本中抛出了错误，但我不明白为什么！这只是关于加载图像！

```
 <SCRIPT language=JavaScript>
<!--
function newImage(arg) {
    var rslt = new Image();
    rslt.src = arg;
    return rslt;
}
function changeImages(a, b) {
    a.src = b;
}
newImage("\/_layouts\/images\/icon1.gif");
newImage("\/_layouts\/images\/icon2.gif");
// -->
</SCRIPT> 
```

我得到的错误是单击页面上的下拉上下文菜单时，对于这一行：

```
newImage("\/_layouts\/images\/icon1.gif"); 
```

> 该对象不接受此属性或方法代码：0

我真的不知道会发生什么......关于这里可能发生的事情的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T22:56:59.880

您是否尝试过将脚本加载到 JS 调试器（如[Aptana](http://www.aptana.com/) ）或 Firefox 插件（如[Firebug](https://addons.mozilla.org/en-US/firefox/addon/1843) ）中？

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T22:57:38.737

你为什么要逃避正斜杠。那没有必要。这两行应该是：

```
newImage("/_layouts/images/icon1.gif");
newImage("/_layouts/images/icon2.gif"); 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T04:14:25.793

提供的信息有限，很难回答您的问题：

1.  您没有显示完整的脚本

2.  您从未说过确切的错误消息是什么，甚至没有说出错误的浏览器是什么。

3.  错误应该来自哪个行号？

如果您还没有，我建议您在 firefox 中使用 Firebug 来调试 javascript。IE 倾向于给出虚假的行号。

正如其他人已经说过的那样，脚本标签的语言属性已被弃用。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T22:54:59.463

使用 " 周围属性编写正确的 xml。

```
<script type="text/javascript">
function newImage(arg) {
    var rslt = new Image();
    rslt.src = arg;
    return rslt;
}
function changeImages(a, b) {
    a.src =     b;
}
newImage("/_layouts/images/icon1.gif");
newImage("/_layouts/images/icon2.gif");
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T22:56:09.163

如果您的脚本块不是：

```
<script type="text/javascript"> 
```

?

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T22:56:16.480

对于初学者，开始你的脚本块

```
<script type="text/javascript"> 
```

不是

```
<script language=JavaScript> 
```

这可能不是您问题的根源，但由于我们看不到您的脚本，这就是我们所能提供的全部内容。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T22:57:10.033

您可能需要寻求 Javascript 调试器的帮助。我从来没有弄清楚如何让 IE 的各种调试器工作，所以如果你使用 IE，我无法帮助你。

如果您使用的是 Firefox 或者您可以使用 Firefox，请确保您有一个 Tools / Javascript Debugger 命令。（如果你不这样做，重新安装它并确保启用该选项。）接下来，打开调试器，重新运行问题页面，看看会出现什么。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T01:40:01.173

你怎么称呼changeImages？看起来好像您没有保存对 newImage 返回的图像的引用。您可能希望保存 newImage 的结果并将其传递给 changeImages 例程。然后 changeImages 应该是这样的：

```
function changeImages(a, b) {
    a.src = b.src;
} 
```

您可能还希望在调用 changeImages 之前确保图像已完成加载。

您已经发布了引发错误的例程，但没有发布错误或向我们展示您是如何调用它的。如果发布的答案都没有解决您的问题，那么请发布一些有关您如何调用该方法的详细信息，错误所在的特定行以及错误消息是什么。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-05-24T01:16:20.267

你萤火虫来调试。

[http://www.mozilla.com/en-US/products/download.html?product=firefox-3.0.10&os=win&lang=en-US](http://www.mozilla.com/en-US/products/download.html?product=firefox-3.0.10&os=win&lang=en-US) 

[https://addons.mozilla.org/en-US/firefox/addon /1843](https://addons.mozilla.org/en-US/firefox/addon/1843)

JSLint 也是一个不错的资源。

[http://www.jslint.com/](http://www.jslint.com/)

使用 CDATA 而不是`<!-- // -->`

[http://www.w3schools.com/XML/xml_cdata.asp](http://www.w3schools.com/XML/xml_cdata.asp)

```
<script type="text/javascript">
<![CDATA[
]]>
</script> 
```

# java - 是否可以让一个 appBase 由 Tomcat 中的多个上下文路径提供服务？

> ID：112480
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-21T23:08:06.497
> 
>         
> 
> 标签：java, tomcat

是否可以让一个 appBase 由 Tomcat 中的多个上下文路径提供服务？

我有一个应用程序库，最近替换了第二个应用程序库。我的问题是许多用户仍在访问旧上下文。我想从单个 appBase 提供现在常见的应用程序，但可以通过任一上下文访问。我在低洼的水果上荡秋千，并在“webapps”目录中使用了一个符号链接……将旧的上下文路径指向新的上下文路径；它有效，但感觉“俗气”。而且我不喜欢为这两个上下文创建数据库连接池（我想最小化连接到数据库的资源）。  

无论如何，如果有人知道这样做的“正确”方法，我将不胜感激。我正在使用 Tomcat 6.0.16 - 没有 apache 前端（我想 URL 重写会很好）。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T00:24:47.640

我不确定上面的答案是否会阻止您的 webapp 加载两次（因为您必须将它部署到新的和旧的上下文路径），但我可能弄错了。另一种选择是在旧上下文中保留一个非常简单的 webapp，除了在 web.xml 中声明一个自定义 servlet 过滤器之外什么都不做，它将所有请求重写到新路径（基本上模拟 apache 的重写规则行为）。您必须自己编写过滤器类，但这很简单。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T00:12:48.497

是的，进入 Tomcat Web 应用程序管理器并向下滚动到“部署目录或位于服务器上的 WAR 文件”。对于“上下文路径（可选）：”放入新上下文。对于“WAR 或目录 URL：”，放入与现有应用程序相同的路径。

# html - 脚本标签中的“lang”和“type”属性有什么区别？

> ID：112482
> 
>         
> 
> 赞同：13
> 
>         
> 
> 时间：2008-09-21T23:08:21.067
> 
>         
> 
> 标签：html, scripting

对于HTML 标签，和`<script>`之间的技术区别是什么？`lang=Javascript``type=text/javascript`

我通常同时使用这两种方法，因为我一直认为旧版浏览器需要其中一种。

* * *

## 回答 #1

> 赞同：30
> 
>             
> 
> 时间：2008-09-21T23:22:40.550

根据[HTML 4.01 规范](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.1)：

> **type**：此属性指定元素内容的脚本语言并覆盖默认脚本语言。脚本语言被指定为内容类型（例如，“text/javascript”）。作者必须为此属性提供一个值。此属性没有默认值。
> 
>   
>   
> 
> **语言**：已弃用。此属性指定此元素内容的脚本语言。它的值是语言的标识符，但由于这些标识符不是标准的，因此该属性已被弃用，取而代之的是类型。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T23:20:30.273

`<script language="">`可用于提供 VBScript 和不同版本的 Javascript。

除非您需要特定版本的 Javascript，否则不要使用语言属性，没有它，您的代码仍然可以正常工作。

即使某些部分代码确实需要特定的 Javascript 版本，也请尝试使用 (typeof window.blah.feature != "undefined") 检查来测试该功能是否存在。

以下是语言属性用法的示例：http:
 [//bclary.com/2004/08/27/javascript-version-incompatabilities](http://bclary.com/2004/08/27/javascript-version-incompatibilities)

由于这种松散定义或不确定的行为，不推荐使用语言属性。

type 属性完全不同。它告诉浏览器脚本是什么 mime 类型，并且应该始终在脚本标签中指定。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2015-03-20T06:17:14.043

OP特别说“语言”而不是“语言”。更老的“语言”标签应该是 Javascript 或 VBScript。  

但是**当前**看似有效的***“lang”***标签实际上是英语、西班牙语、日语等*书面语言。*Microsoft 的 Visual Studio 为“lang”的值提供了一个下拉列表，它们都类似于 en-us、fr、ja 等。对于英语美国、法语、日语等......

我想如果你有一个复杂的多语言设置，使用这个标签*可能*有正当的理由——也许有一个内容管理系统可以支持这个，然后提供正确的 javascript 文件——比如 jQuery 控制资源？  

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T23:11:09.563

语言是旧属性，类型是新属性。您必须使用过渡（不是积极的，但相当肯定）文档类型才能合法地使用这两个属性。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T23:11:02.717

类型更笼统，指的是脚本块的 mime 编码。据我所知，您只需要一个，通常该块将在没有 type 或 lag 属性的情况下工作。

我倾向于使用类型。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T23:12:41.587

lang 是脚本的语言，type 是脚本标签内容的 MIME 类型。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-02-25T18:39:33.600

基本上，这两个属性都不是必需的。[使用它们的唯一原因是验证，而这在HTML5](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#script)中已失效。

# python - 有谁知道用于显示美国各州地图的桌面工具包（GTK、Qt、WX）的小部件？

> ID：112483
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-09-21T23:10:42.950
> 
>         
> 
> 标签：python, qt, gtk, desktop

我正在特别寻找一个可以让我显示美国各州的地图，每个州都是它自己的“对象”，因为我可以单独控制每个州的颜色、点击和鼠标悬停。GTK 是我个人的偏好，但在这一点上，我会满足于任何事情。应用程序本身将使用 Python、FWIW 编写。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T23:17:37.753

您可以在 PyQt中使用[QGraphicsView 。](http://doc.trolltech.com/4.4/qgraphicsview.html)每个状态都是一个 new `QGraphicsItem`，它是位图或路径对象。您只需要提供轮廓（或位图）和状态的位置。

如果你有各州的 SVG，你也可以使用它们。

GTK+ 没有普遍接受的画布类。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-28T14:52:49.770

如果你考虑 Qt，也考虑加入 kdelibs 依赖项，那么你将拥有大理石小部件，它以简洁的方式处理地图。

如果你只坚持 Qt，那么 QGraphicsView 是一个框架。

（注意：kdelibs != 运行整个 kde 桌面）

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-11-19T15:38:52.157

> 如果你考虑 Qt，也考虑加入 kdelibs 依赖项，那么你将拥有大理石小部件，它以简洁的方式处理地图。

感谢您为大理石做广告。但你错了：

Marble Widget 根本不依赖 kdelibs。它仅取决于 Qt (>=4.3)。

此外，Marble 也刚刚收到 Python 绑定。

我认为给定的问题可以使用 Marble 来解决。最多只需要几天的工作。如果您对 Marble 有任何疑问，请随时通过我们的邮件列表或 IRC 向我们提问。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-28T15:06:42.030

您可以使用[Quantum GIS](http://qgis.org/)。QGIS 是一个使用 Qt 框架的开源地理信息系统。

QGIS 也可以与 Python 一起使用。您可以使用 Python 编写的插件对其进行扩展，也可以使用[PyGIS Python 绑定](http://wiki.qgis.org/qgiswiki/PythonBindings)来编写您自己的应用程序。

他们有一个[为开发人员提供一些有用信息](http://wiki.qgis.org/qgiswiki/DevelopersCorner)的 Wiki 。

也许 QGIS 对您的目的来说太重了，但无论如何我都在这里添加它以完成。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-09-23T18:08:41.427

快速提示，如果您对每个状态进行不同的着色，您可以确定从鼠标光标下的颜色中选择哪一个，而不是在多边形例程中做一个复杂的点。

# java - 如何从 Java 中的数组中删除对象？

> ID：112503
> 
>         
> 
> 赞同：86
> 
>         
> 
> 时间：2008-09-21T23:16:27.397
> 
>         
> 
> 标签：java, arrays, data-structures, data-manipulation

给定一个包含**n 个**对象的数组，假设它是一个**字符串数组**，它具有以下值：

```
foo[0] = "a";
foo[1] = "cc";
foo[2] = "a";
foo[3] = "dd"; 
```

我该怎么做才能删除/删除数组中等于**“a”的所有字符串/对象？**

* * *

## 回答 #1

> 赞同：114
> 
>             
> 
> 时间：2008-09-21T23:30:33.667

[如果你想要一些现成的代码，请滚动到我的“Edit3”（剪切后）。其余的留给后代。]

充实Dustman[的想法](https://stackoverflow.com/a/112507/13)：

```
List<String> list = new ArrayList<String>(Arrays.asList(array));
list.removeAll(Arrays.asList("a"));
array = list.toArray(array); 
```

编辑：我现在使用`Arrays.asList`而不是`Collections.singleton`: 单例仅限于一个条目，而该`asList`方法允许您添加其他字符串以稍后过滤掉：`Arrays.asList("a", "b", "c")`.

Edit2：上述方法保留相同的数组（因此数组仍然是相同的长度）；最后一个元素设置为null。如果您想要一个大小完全符合要求的*新*数组，请改用：

```
array = list.toArray(new String[0]); 
```

* * *

Edit3：如果您在同一个课程中经常使用此代码，您可能希望考虑将其添加到您的课程中：

```
private static final String[] EMPTY_STRING_ARRAY = new String[0]; 
```

那么函数就变成了：

```
List<String> list = new ArrayList<>();
Collections.addAll(list, array);
list.removeAll(Arrays.asList("a"));
array = list.toArray(EMPTY_STRING_ARRAY); 
```

然后，这将停止在您的堆中乱扔无用的空字符串数组，否则`new`每次调用您的函数时都会被编辑。

愤世嫉俗的人的建议（见评论）也将有助于乱扔垃圾，为了公平起见，我应该提一下：

```
array = list.toArray(new String[list.size()]); 
```

我更喜欢我的方法，因为它可能更容易弄错明确的大小（例如，调用`size()`错误的列表）。

* * *

## 回答 #2

> 赞同：32
> 
>             
> 
> 时间：2014-04-20T23:44:12.827

Java 8 中的替代方案：

```
String[] filteredArray = Arrays.stream(array)
    .filter(e -> !e.equals(foo)).toArray(String[]::new); 
```

* * *

## 回答 #3

> 赞同：20
> 
>             
> 
> 时间：2008-09-21T23:18:06.753

使用`List`，从数组中创建一个`Arrays.asList()`，并调用`remove()`所有适当的元素。然后调用`toArray()`“列表”再次返回数组。

性能不是很好，但如果你正确封装它，你以后总是可以更快地做一些事情。

* * *

## 回答 #4

> 赞同：15
> 
>             
> 
> 时间：2008-09-23T06:55:15.150

你总是可以这样做：

```
int i, j;
for (i = j = 0; j < foo.length; ++j)
  if (!"a".equals(foo[j])) foo[i++] = foo[j];
foo = Arrays.copyOf(foo, i); 
```

* * *

## 回答 #5

> 赞同：7
> 
>             
> 
> 时间：2011-02-04T14:41:12.980

您可以使用外部库：

```
org.apache.commons.lang.ArrayUtils.remove(java.lang.Object[] array, int index) 
```

它在项目 Apache Commons Lang [http://commons.apache.org/lang/](http://commons.apache.org/lang/)

* * *

## 回答 #6

> 赞同：6
> 
>             
> 
> 时间：2014-01-26T20:37:36.540

请参阅下面的代码

```
ArrayList<String> a = new ArrayList<>(Arrays.asList(strings));
a.remove(i);
strings = new String[a.size()];
a.toArray(strings); 
```

* * *

## 回答 #7

> 赞同：5
> 
>             
> 
> 时间：2015-05-10T12:12:32.203

如果您需要从数组中删除多个元素而不将其转换为`List`或创建其他数组，则可以在 O(n) 中执行此操作，而不依赖于要删除的项目数。

这里，`a`是初始数组，`int... r`是要删除的元素的不同有序索引（位置）：

```
public int removeItems(Object[] a, int... r) {
    int shift = 0;                             
    for (int i = 0; i < a.length; i++) {       
        if (shift < r.length && i == r[shift])  // i-th item needs to be removed
            shift++;                            // increment `shift`
        else 
            a[i - shift] = a[i];                // move i-th item `shift` positions left
    }
    for (int i = a.length - shift; i < a.length; i++)
        a[i] = null;                            // replace remaining items by nulls

    return a.length - shift;                    // return new "length"
} 
```

小测试：

```
String[] a = {"0", "1", "2", "3", "4"};
removeItems(a, 0, 3, 4);                     // remove 0-th, 3-rd and 4-th items
System.out.println(Arrays.asList(a));        // [1, 2, null, null, null] 
```

在您的任务中，您可以先扫描数组以收集“a”的位置，然后调用`removeItems()`.  

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2017-05-24T17:10:32.937

这里有很多答案 - 我看到的问题是你没有说为什么你使用数组而不是集合，所以让我提出几个原因以及哪些解决方案将适用（大多数解决方案这里的其他问题已经回答了，所以我不会太详细）：

**原因：您不知道收藏包存在或不信任它**

解决方案：使用集合。  

如果您打算从中间添加/删除，请使用 LinkedList。如果您真的担心大小或经常索引到集合的中间，请使用 ArrayList。这两个都应该有删除操作。

**原因：您关心大小或希望控制内存分配**

解决方案：使用具有特定初始大小的 ArrayList。

ArrayList 只是一个可以扩展自身的数组，但它并不总是需要这样做。添加/删除项目将非常聪明，但是如果您要从中间插入/删除很多，请再次使用 LinkedList。

**原因：你有一个数组进来和一个数组出去——所以你想对一个数组进行操作**

解决方案：将其转换为ArrayList，删除该项目并将其转换回

**原因：你认为如果你自己做，你可以写出更好的代码**

解决方案：你不能，使用数组或链表。

**原因：这是一项课堂作业，您不被允许或由于某种原因您无权访问集合 API**

假设：您需要新数组是正确的“大小”

解决方案：扫描数组以查找匹配项并计数。创建一个正确大小的新数组（原始大小 - 匹配数）。重复使用 System.arraycopy 将您希望保留的每组项目复制到新数组中。如果这是一个类分配并且您不能使用 System.arraycopy，只需在循环中手动一次复制一个，但不要在生产代码中这样做，因为它要慢得多。（这些解决方案在其他答案中都有详细说明）

**原因：你需要运行裸机**

假设：您不得不必要地分配空间或花费太长时间

假设：您正在单独跟踪数组中使用的大小（长度），否则您必须为删除/插入重新分配数组。

您可能想要这样做的一个示例：单个基元数组（假设是 int 值）占用了您的 ram 的很大一部分——比如 50%！ArrayList 会强制将它们放入指向 Integer 对象的指针列表，这些对象将使用该内存量的几倍。

解决方案：遍历您的数组，每当您找到要删除的元素（我们称其为元素 n），使用 System.arraycopy 将数组的尾部复制到“已删除”元素上（源和目标是相同的数组） - 它足够聪明，可以按照正确的方向进行复制，因此内存不会覆盖自身：

```
System.arraycopy(ary, n+1, ary, n, 长度-n)
 长度 - ;

```

如果您一次删除多个元素，您可能希望比这更聪明。您只会移动一个“匹配”和下一个“匹配”之间的区域，而不是整个尾部，并且一如既往，避免移动任何块两次。

在最后一种情况下，您绝对必须自己完成工作，并且使用 System.arraycopy 确实是唯一的方法，因为它将为您的计算机体系结构选择最佳的内存移动方式——它应该快很多倍比你自己可以合理编写的任何代码。

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T12:50:22.027

关于制作它的列表然后删除然后回到数组​​的事情让我觉得是错误的。尚未测试，但我认为以下会表现更好。是的，我可能过度预优化。

```
boolean [] deleteItem = new boolean[arr.length];
int size=0;
for(int i=0;i<arr.length;i==){
   if(arr[i].equals("a")){
      deleteItem[i]=true;
   }
   else{
      deleteItem[i]=false;
      size++;
   }
}
String[] newArr=new String[size];
int index=0;
for(int i=0;i<arr.length;i++){
   if(!deleteItem[i]){
      newArr[index++]=arr[i];
   }
} 
```

* * *

## 回答 #10

> 赞同：3
> 
>             
> 
> 时间：2013-07-05T11:49:34.520

我意识到这是一个非常古老的帖子，但这里的一些答案帮助了我，所以这是我的 tuppence'ha'penny 的价值！

在我认为需要调整我正在写回的数组的大小之前，我努力让它工作了很长一段时间，除非对`ArrayList`列表大小所做的更改保持不变。

如果`ArrayList`您正在修改的最终元素比开始时更多或更少，则该行将`List.toArray()`导致异常，因此您需要类似`List.toArray(new String[] {})`or`List.toArray(new String[0])`的东西来创建具有新（正确）大小的数组。

现在听起来很明显，我知道了。对于一个正在掌握新的和不熟悉的代码结构的 Android/Java 新手来说并不是那么明显，而且从这里的一些早期帖子中也不是很明显，所以只是想让其他人像我一样挠头几个小时来弄清楚这一点！

* * *

## 回答 #11

> 赞同：2
> 
>             
> 
> 时间：2018-11-19T21:47:26.140

初始数组

```
 int[] array = {5,6,51,4,3,2}; 
```

如果要删除索引 2 的 51，请使用以下

```
 for(int i = 2; i < array.length -1; i++){
    array[i] = array[i + 1];
  } 
```

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T20:20:13.740

编辑：

数组中具有空值的点已被清除。对不起我的评论。

原来的：

嗯……线

```
array = list.toArray(array); 
```

**用null**替换已删除元素所在的数组中的所有间隙。这可能很**危险**，因为元素被删除，但数组的长度保持不变！

如果您想避免这种情况，请使用新数组作为 toArray() 的参数。如果您不想使用 removeAll，则可以选择 Set：

```
 String[] array = new String[] { "a", "bc" ,"dc" ,"a", "ef" };

        System.out.println(Arrays.toString(array));

        Set<String> asSet = new HashSet<String>(Arrays.asList(array));
        asSet.remove("a");
        array = asSet.toArray(new String[] {});

        System.out.println(Arrays.toString(array)); 
```

给出：

```
[a, bc, dc, a, ef]
[dc, ef, bc] 
```

作为 Chris Yester Young 输出的当前接受的答案：

```
[a, bc, dc, a, ef]
[bc, dc, ef, null, ef] 
```

用代码

```
 String[] array = new String[] { "a", "bc" ,"dc" ,"a", "ef" };

    System.out.println(Arrays.toString(array));

    List<String> list = new ArrayList<String>(Arrays.asList(array));
    list.removeAll(Arrays.asList("a"));
    array = list.toArray(array);        

    System.out.println(Arrays.toString(array)); 
```

没有留下任何空值。

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2013-11-30T13:52:34.807

我对这个问题的贡献不大。

```
public class DeleteElementFromArray {
public static String foo[] = {"a","cc","a","dd"};
public static String search = "a";

public static void main(String[] args) {
    long stop = 0;
    long time = 0;
    long start = 0;
    System.out.println("Searched value in Array is: "+search);
    System.out.println("foo length before is: "+foo.length);
    for(int i=0;i<foo.length;i++){ System.out.println("foo["+i+"] = "+foo[i]);}
    System.out.println("==============================================================");
    start = System.nanoTime();
    foo = removeElementfromArray(search, foo);
    stop = System.nanoTime();
    time = stop - start;
    System.out.println("Equal search took in nano seconds = "+time);
    System.out.println("==========================================================");
    for(int i=0;i<foo.length;i++){ System.out.println("foo["+i+"] = "+foo[i]);}
}
public static String[] removeElementfromArray( String toSearchfor, String arr[] ){
     int i = 0;
     int t = 0;
     String tmp1[] = new String[arr.length];     
         for(;i<arr.length;i++){
              if(arr[i] == toSearchfor){     
              i++;
              }
             tmp1[t] = arr[i];
             t++;
     }   
     String tmp2[] = new String[arr.length-t];   
     System.arraycopy(tmp1, 0, tmp2, 0, tmp2.length);
     arr = tmp2; tmp1 = null; tmp2 = null;
    return arr;
} 
```

}

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T12:59:37.747

Arrgh，我无法正确显示代码。对不起，我让它工作了。再次抱歉，我认为我没有正确阅读问题。

```
String  foo[] = {"a","cc","a","dd"},
remove = "a";
boolean gaps[] = new boolean[foo.length];
int newlength = 0;

for (int c = 0; c<foo.length; c++)
{
    if (foo[c].equals(remove))
    {
        gaps[c] = true;
        newlength++;
    }
    else 
        gaps[c] = false;

    System.out.println(foo[c]);
}

String newString[] = new String[newlength];

System.out.println("");

for (int c1=0, c2=0; c1<foo.length; c1++)
{
    if (!gaps[c1])
    {
        newString[c2] = foo[c1];
        System.out.println(newString[c2]);
        c2++;
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2008-09-24T21:15:40.847

这取决于您所说的“删除”是什么意思？数组是一个固定大小的结构 - 您不能更改其中的元素数量。因此，您可以 a) 创建一个新的、较短的数组，其中不包含您不想要的元素，或者 b) 将您不想要的条目分配给指示其“空”状态的东西；如果您不使用原语，通常为 null。

在第一种情况下，从数组中创建一个列表，删除元素，然后从列表中创建一个新数组。如果性能很重要，则遍历数组，将不应删除的任何元素分配给列表，然后从列表中创建一个新数组。在第二种情况下，只需通过并将 null 分配给数组条目。

* * *

## 回答 #16

> 赞同：0
> 
>             
> 
> 时间：2016-06-11T19:00:40.007

将复制除索引为 i 的元素之外的所有元素：

```
if(i == 0){
                System.arraycopy(edges, 1, copyEdge, 0, edges.length -1 );
            }else{
                System.arraycopy(edges, 0, copyEdge, 0, i );
                System.arraycopy(edges, i+1, copyEdge, i, edges.length - (i+1) );
            } 
```

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2019-08-06T19:44:22.287

如果元素的顺序无关紧要。您可以在元素 foo[x] 和 foo[0] 之间交换，然后调用 foo.drop(1)。

`foo.drop(n)`从数组中删除 (n) 个第一个元素。

我想这是最简单且资源有效的方法。

**PS**：`indexOf`可以通过多种方式实现，这是我的版本。

```
Integer indexOf(String[] arr, String value){
    for(Integer i = 0 ; i < arr.length; i++ )
        if(arr[i] == value)
            return i;         // return the index of the element
    return -1                 // otherwise -1
}

while (true) {
   Integer i;
   i = indexOf(foo,"a")
   if (i == -1) break;
   foo[i] = foo[0];           // preserve foo[0]
   foo.drop(1);
} 
```

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2021-02-24T08:23:39.983

*仅  *删除**具有 lambda**的几个相等条目中的第一个** 

 **```
boolean[] done = {false};
String[] arr = Arrays.stream( foo ).filter( e ->
  ! (! done[0] && Objects.equals( e, item ) && (done[0] = true) ))
    .toArray(String[]::new); 
```

可以删除`null`条目

* * *

## 回答 #19

> 赞同：-1
> 
>             
> 
> 时间：2019-06-18T15:40:08.107

在一个字符串数组中，如

String name = 'abcdeafbd e' // 可以像 String name = 'aa bb cde aa f bb d e'

我建立了以下课程

```
class clearname{
def parts
def tv
public def str = ''
String name
clearname(String name){
    this.name = name
    this.parts = this.name.split(" ")
    this.tv = this.parts.size()
}
public String cleared(){

        int i
        int k
        int j=0        
    for(i=0;i<tv;i++){
        for(k=0;k<tv;k++){
            if(this.parts[k] == this.parts[i] && k!=i){
               this.parts[k] = '';
                j++
            }
        }
    }
    def str = ''
    for(i=0;i<tv;i++){
        if(this.parts[i]!='')

           this.str += this.parts[i].trim()+' '
    } 
    return this.str    
}}

return new clearname(name).cleared() 
```

得到这个结果

abcdef

希望这段代码对任何人都有帮助

* * *

## 回答 #20

> 赞同：-7
> 
>             
> 
> 时间：2008-09-21T23:19:47.810

将 null 分配给数组位置。

# asp.net - 在打开 UAC 的情况下无法在 Vista 下附加到 w3wp

> ID：112508
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-09-21T23:18:42.977
> 
>         
> 
> 标签：asp.net, visual-studio-2008, windows-vista, uac

我在我的工作机器上运行 Vista（商业 x32），我在其中进行 ASP.NET 开发。因为我使用 IIS 来为我构建的站点提供服务（我做了很多 CMS 集成，所以我需要使用 IIS 而不是内置的 Web 开发服务器）我总是需要附加到 w3wp 进行调试。

问题是 w3wp 需要提升权限才能让我从 VS 2008 连接到进程。但是当我尝试重新启动 VS 以“以管理员身份运行”时出现错误：“该程序已被阻止”“您的管理员已设置阻止该程序的政策”

当我使用我的域帐户（在本地管理员组中）登录我的机器时，我只会遇到这个问题，如果我使用本地管理员，我没有问题。

我是域上唯一有这个问题的人，其他使用Vista的人都可以以管理员身份打开VS，没有戏剧。

为了解决这个问题，我必须关闭 UAC，但它总是会重新打开（每次重启后），所以这非常令人沮丧。

我也无法找到如何将程序添加到“安全”列表中。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:11:15.650

您是否询问过域管理员是否有重新启用 UAC 的组策略？

默认情况下，Vista 可能只有几个地方可以不受限制地运行，如果您在这些区域之外安装了 Visual Studio，它可能会阻止它以提升的权限运行。

检查它的安装位置，并将其位置添加为“软件限制/附加规则”区域中的“不受限制”区域。

为此，请按照下列步骤操作：

1.  打开**secpol.msc**编辑器。

2.  浏览到本地政策/软件限制政策/附加规则。

3.  然后右键单击右侧窗口并选择**新建路径规则...**

4.  浏览到安装 VS 的路径并将**Security Level**设置为**Unrestricted**。

看看这样行不行。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2010-10-23T16:55:31.987

您可以编写一个禁用 UAC 的脚本，然后在每次重新启动计算机时运行该脚本，或者在启动 VS 之前运行该脚本。

修改注册表：

*   [如何在命令提示符中禁用或启用 Vista 用户访问控制](http://www.mydigitallife.info/2007/04/23/how-to-disable-or-enable-vista-user-access-control-in-command-prompt/)

禁用/启用 UAC 的更多选项：

*   [如何在 Windows 7 中禁用和关闭 UAC](http://www.mydigitallife.info/2008/12/30/how-to-disable-and-turn-off-uac-in-windows-7/)

我可以在我的工作计算机上的域帐户（位于本地管理员组中）下使用“以管理员身份运行”打开 VS，所以我怀疑您的计算机有问题。到现在为止，您可能已经对您的 PC 进行了重新映像，所以问题可能已经为您解决了。

# java - 如何为此类枚举构建接口

> ID：112517
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2008-09-21T23:23:30.003
> 
>         
> 
> 标签：java, interface, enums

我有以下枚举：

```
public enum Status implements StringEnum{ 

    ONLINE("on"),OFFLINE("off");

    private String status = null;

    private Status(String status) {
        this.status = status;
    }

    public String toString() {
        return this.status;
    }

    public static Status find(String value) {
        for(Status status : Status.values()) {
            if(status.toString().equals(value)) {
                return status;
            }
        }

        throw new IllegalArgumentException("Unknown value: " + value );

    }
} 
```

是否可以构建 StringEnum 接口以确保每个枚举都有 find()、toString() 和构造函数？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2008-09-21T23:33:56.140

不能在接口中指定构造函数或静态方法。要获得一个好的、简洁的解释，请查看这篇文章：[接口中没有静态方法](http://zoom.z3950.org/bind/java/comment/static.html)

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T02:21:45.503

枚举已经有一个[valueOf()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Enum.html#valueOf(java.lang.Class,%20java.lang.String))（你的 find 方法）方法。而“toString()”是一个 java.lang.Object 方法，所以，每个类都会有它，换句话说，你不能强迫它！我看不到强制构造函数的价值，因为不同的枚举可能有不同的初始化。

亲切的问候

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T23:34:08.807

1.  静态方法不能在接口中定义

2.  构造函数不能在接口中定义

3.  `toString`在 中定义`java.lang.Object`，如果未定义方法，则在接口中要求它永远不会导致编译错误。

你为什么要强制执行构造函数呢？无论如何，您都不能`enum`在运行时创建 s 的新实例（除非可能通过某种反射机制）。

# php - 在 PHP 中计算文本差异

> ID：112523
> 
>         
> 
> 赞同：15
> 
>         
> 
> 时间：2008-09-21T23:25:20.497
> 
>         
> 
> 标签：php, diff

是否有任何库（第三方或内置）`PHP`来计算文本差异？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2008-09-21T23:31:20.497

这完全取决于你的意思和你想做什么，但有

[PEAR Text_Diff](http://pear.php.net/package/Text_Diff) - 用于执行和呈现文本差异的引擎

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2008-09-21T23:33:23.847

什么样的差异？文件差异？有[array_diff()](http://php.net/array_diff)作用于数组。然后还有[xdiff](http://php.net/manual/en/book.xdiff.php)，它“使您能够创建和应用包含不同文件修订版本之间差异的补丁文件。”。后者作用于文件或字符串。

编辑：我应该添加 xdiff 似乎还没有发布。您必须从源代码构建才能使用它。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2010-08-26T13:42:08.337

Github 上有一个漂亮而小巧的[Simplediff 项目，](http://github.com/paulgb/simplediff)它可以创建文本和 HTML 差异。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T04:20:22.270

[它](http://www.holomind.de/phpnet/diff2.php)的输出是 GNU diff 格式。这可能是您正在寻找的东西。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T23:43:59.487

这真的取决于你想要什么结果。如果您只想获取两组文本的 diff 文件，您可能会发现只使用外部 diff 命令更简单（这当然完全取决于您正在开发的环境）。

```
$diff = `diff $file1 $file2`; 
```

如果您想从那里完全使用差异信息，则需要解析，并且此解决方案可能不是您所追求的。在这种情况下，我建议查看上面提到的 PEAR 库或搜索类似的文本解析库。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T00:19:06.607

MediaWiki 的差异引擎是开源的（就像它的其余部分一样）。如果您喜欢 Wikipedia 处理文本差异的方式，它可能是您的解决方案。

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:24:29.057

我真的很喜欢这个基于 JavaScript 的 web 项目。

[jsdifflib](https://github.com/cemerick/jsdifflib)

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2012-12-19T00:25:07.073

不是内置的，但我喜欢它，因为它有一个很好的界面来测试网站上的所有内容，而且在高粒度级别上它似乎比 Text_Diff 快一些。

[http://www.raymondhill.net/finediff/viewdiff-ex.php](http://www.raymondhill.net/finediff/viewdiff-ex.php)

# python - 列出字典中所有以

> ID：112532
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2008-09-21T23:28:06.980
> 
>         
> 
> 标签：python, list, dictionary

如何制作一个用户输入字符串的程序，然后程序会生成一个以该字符串开头的单词列表？

例如：

用户：“abd”

程序：abdicate，腹部，绑架......

谢谢！

* * *

编辑：我正在使用 python，但我认为这是一个相当独立于语言的问题。

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2008-09-21T23:35:48.210

使用[trie](http://en.wikipedia.org/wiki/Trie)。

将您的单词列表添加到 trie 中。从根到叶的每条路径都是一个有效词。从根到中间节点的路径表示前缀，中间节点的子节点是前缀的有效补全。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2008-09-21T23:35:09.600

最好的方法之一是使用有向图来存储您的字典。这需要一些设置，但是一旦完成，就可以很容易地进行您正在谈论的搜索类型。

图中的节点对应于单词中的一个字母，因此每个节点将有一个传入链接和最多 26 个（英文）传出链接。

您还可以使用混合方法，在其中维护包含字典的排序列表，并使用有向图作为字典的索引。然后，您只需在有向图中查找您的前缀，然后转到字典中的那个点并吐出所有符合您的搜索条件的单词。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2008-09-21T23:37:53.133

如果你在 debian[-like] 机器上，

```
#!/bin/bash
echo -n "Enter a word: "
read input
grep "^$input" /usr/share/dict/words 
```

在我的 P200 上占用所有 0.040 秒。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T23:50:59.810

```
egrep `read input && echo ^$input` /usr/share/dict/words 
```

哦，我没有看到 Python 编辑，这在 python 中是一样的

```
my_input = raw_input("Enter beginning of word: ")
my_words = open("/usr/share/dict/words").readlines()
my_found_words = [x for x in my_words if x[0:len(my_input)] == my_input] 
```

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T23:57:05.740

如果您真的想要速度，请使用特里/自动机。但是，考虑到单词列表已排序，这将比简单地扫描整个列表更快：

```
from itertools import takewhile, islice
import bisect

def prefixes(words, pfx):
    return list(
             takewhile(lambda x: x.startswith(pfx), 
                       islice(words, 
                              bisect.bisect_right(words, pfx), 
                              len(words))) 
```

请注意，就字典的大小而言，自动机是 O(1)，而这个算法是 O(log(m))，然后是 O(n)，就实际以前缀开头的字符串数量而言，而全扫描为 O(m)，n << m。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T23:35:07.493

```
def main(script, name):
    for word in open("/usr/share/dict/words"):
        if word.startswith(name):
            print word,

if __name__ == "__main__":
    import sys
    main(*sys.argv) 
```

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2008-09-21T23:36:31.000

如果您真的想提高效率 - 使用后缀树或后缀数组 -[维基百科文章](http://en.wikipedia.org/wiki/Suffix_tree)。

您的问题是后缀树的设计目的是什么。甚至还有 Python 的实现 -[这里](http://hkn.eecs.berkeley.edu/~dyoo/python/suffix_trees/)

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:29:51.063

```
var words = from word in dictionary
            where word.key.StartsWith("bla-bla-bla");
            select word; 
```

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:30:13.777

尝试使用正则表达式搜索您的单词列表，例如 /^word/ 并报告所有匹配项。

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:37:19.033

如果您需要*非常*快，请使用树：

构建一个数组并根据第一个字母将单词分成 26 个集合，然后根据第二个字母将每个项目分成 26 个，然后再一次。

因此，如果您的用户键入“abd”，您将查找 Array[0][1][3] 并获取所有以这样开头的单词的列表。此时，您的列表应该足够小，可以传递给客户端并使用 javascript 进行过滤。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2008-11-21T11:11:41.757

## 大多数 Pythonic 解决方案

```
# set your list of words, whatever the source
words_list = ('cat', 'dog', 'banana')
# get the word from the user inpuit
user_word = raw_input("Enter a word:\n")
# create an generator, so your output is flexible and store almost nothing in memory
word_generator = (word for word in words_list if word.startswith(user_word))

# now you in, you can make anything you want with it 
# here we just list it :

for word in word_generator :
    print word 
```

请记住，生成器只能使用一次，因此将其转换为列表（使用 list(word_generator)）或使用 itertools.tee 函数，如果您希望多次使用它。

## 最好的方法：

将其存储到数据库中并使用 SQL 查找您需要的单词。如果您的字典中有很多单词，它会更快更高效。

Python 有数千个 DB API 来帮助你完成这项工作 ;-)

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2018-12-20T11:50:42.647

您可以使用`str.startswith()`. 录制到官方文档：

## **str.startswith(prefix[, start[, end]])**

如果字符串以前缀开头，则返回 True，否则返回 False。prefix 也可以是要查找的前缀元组。使用可选开始，测试从该位置开始的字符串。使用可选结束，停止在该位置比较字符串。

如下所示：

```
user_input = input('Enter something: ')
for word in dictionary:
    if str.startswith(user_input):
        return word 
```

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:05:02.517

如果您的字典真的很大，我建议使用 python 文本索引进行索引（PyLucene - 请注意，我从未使用过 lucene 的 python 扩展）搜索会很有效，您甚至可以返回搜索“分数”。

此外，如果您的字典是相对静态的，您甚至不会经常重新索引的开销。

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T09:39:15.467

不要用火箭筒杀死苍蝇。使用一些简单的东西，比如 SQLite。每种现代语言都有您需要的所有工具，您可以这样做：

```
"SELECT word FROM dict WHERE word LIKE "user_entry%" 
```

闪电般的速度，一个婴儿可以做到。更重要的是，它便携、持久且易于维护。

Python教程：

[http://www.initd.org/pub/software/pysqlite/doc/usage-guide.html](http://www.initd.org/pub/software/pysqlite/doc/usage-guide.html)

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2008-11-20T19:04:05.080

线性扫描很慢，但前缀树可能是矫枉过正。保持单词排序并使用二进制搜索是一种快速而简单的折衷方案。

```
import bisect
words = sorted(map(str.strip, open('/usr/share/dict/words')))
def lookup(prefix):
    return words[bisect.bisect_left(words, prefix):bisect.bisect_right(words, prefix+'~')]

>>> lookup('abdicat')
['abdicate', 'abdication', 'abdicative', 'abdicator'] 
```

* * *

## 回答 #16

> 赞同：0
> 
>             
> 
> 时间：2018-12-20T08:15:25.103

如果您将单词存储在 .csv 文件中，您可以使用 pandas 相当巧妙地解决此问题，并且在您阅读过一次之后，如果用户应该能够在每个会话中执行多个搜索，则可以重用已加载的数据框.

```
df = pd.read_csv('dictionary.csv')
matching_words = df[0].loc[df[0].str.startswith(user_entry)] 
```

# sql-server - SQL Server 优先顺序

> ID：112551
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2008-09-21T23:32:30.013
> 
>         
> 
> 标签：sql-server, data-structures

我有一个包含任务的表，我想根据任务的优先级给这些任务一个明确的顺序。我能想到的唯一方法是通过一个**唯一的**int 列来索引任务在优先级方面的位置（即 1 是前 1000 是低的）。

问题是说我想更新任务并将其优先级设置为较低的值，我将不得不更新其当前值和新值之间的所有其他行。

**任何人都可以提出更好的实施方式吗？**

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2008-09-21T23:44:39.657

使用实数值作为优先级。您始终可以在两个现有值之间滑动一个值，例如`newPri = task1Pri + (task2Pri - task1Pri)/2`Task1 具有较低优先级的数值（这可能是较高的优先级）。

Corin 指出，对于插入到优先级列表顶部或底部的任务，必须计算最小和最大优先级。

joelhardi 提醒我们，*重新排序*过程是不时清理表格的好主意。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-09-21T23:38:47.017

不要像你说的那样创建一个编号的列，而是创建一个名为 parent 的字段。每行包含其父项的 pk。当您想向下移动一个项目时，只需将其父 pk 更改为新项目以及在其父 pk 中引用它的项目。想想单链表。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:48:41.830

我最喜欢凯文的回答，但如果你想要一个快速而简单的解决方案，只需按照你已经描述的方式进行操作，而不是增加 1，而是增加 10 或 100 ......如果你需要这样的话重新确定优先级，您在任务之间有一些回旋余地。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T23:40:16.857

我将只分配少量值 (1..10)，然后按优先级 DESC、DateCreated ASC 排序。如果您需要为每个任务设置不同的优先级，则需要像您说的那样更新 WHERE Priority > xxx。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-09-21T23:40:42.270

如果没有两个任务可以具有相同的优先级，那么我认为这就是您必须做的。但是您可以有一个 priority 和一个 datemodified 列，如果您允许重复优先级，则只需根据优先级和上次更新对两者进行排序即可。  

# python - 如何使用 genshi.builder 以编程方式构建 HTML 文档？

> ID：112564
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2008-09-21T23:37:58.983
> 
>         
> 
> 标签：python, html, templates, genshi

我最近发现了 genshi.builder 模块。它让我想起了 Divmod Nevow 的 Stan 模块。如何使用 genshi.builder.tag 构建具有特定文档类型的 HTML 文档？或者这甚至是一件好事吗？如果没有，*正确*的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2008-09-22T02:12:07.880

仅使用构建整个页面是不可能的`genshi.builder.tag`——您需要对结果流执行一些手术以插入文档类型。此外，生成的代码看起来很可怕。使用 Genshi 的推荐方法是使用单独的模板文件，从中生成一个流，然后将该流渲染为您想要的输出类型。

`genshi.builder.tag`当您需要从 Python 中生成简单标记时，例如在构建表单或对输出进行某种逻辑繁重的修改时，它最有用。

请参阅以下文档：

*   [创建和使用模板](http://genshi.edgewall.org/wiki/Documentation/0.5.x/templates.html)

*   [基于 XML 的模板语言](http://genshi.edgewall.org/wiki/Documentation/0.5.x/xml-templates.html)

*   [`genshi.builder`API 文档](http://genshi.edgewall.org/wiki/ApiDocs/0.5.x/genshi.builder)

如果你真的想使用 only 生成一个完整的文档`builder.tag`，这个（完全未经测试的）代码可能是一个很好的起点：

```
from itertools import chain
from genshi.core import DOCTYPE, Stream
from genshi.output import DocType
from genshi.builder import tag as t

# Build the page using `genshi.builder.tag`
page = t.html (t.head (t.title ("Hello world!")), t.body (t.div ("Body text")))

# Convert the page element into a stream
stream = page.generate ()

# Chain the page stream with a stream containing only an HTML4 doctype declaration
stream = Stream (chain ([(DOCTYPE, DocType.get ('html4'), None)], stream))

# Convert the stream to text using the "html" renderer (could also be xml, xhtml, text, etc)
text = stream.render ('html') 
```

结果页面中没有空格——它看起来很正常，但是您将很难阅读源代码，因为它将完全在一行上。实施适当的过滤器以添加空格作为练习留给读者。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T00:29:34.727

Genshi.builder 用于“以编程方式生成标记流”[1]。我相信它的目的是作为模板语言的后端。您可能正在寻找用于生成整个页面的模板语言。

但是，您可以执行以下操作：

```
>>> import genshi.output
>>> genshi.output.DocType('html')
('html', '-//W3C//DTD HTML 4.01//EN', 'http://www.w3.org/TR/html4/strict.dtd') 
```

[在此处查看其他文档类型： http](http://genshi.edgewall.org/wiki/ApiDocs/genshi.output#genshi.output:DocType) ://genshi.edgewall.org/wiki/ApiDocs/genshi.output#genshi.output:DocType

```
[1] genshi.builder.__doc__ 
```

# c - C101：从用户输入中填充数组的最佳方式？

> ID：112582
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-09-21T23:49:01.267
> 
>         
> 
> 标签：c, arrays, indexing

我很难理解，因此很难在 C 中手动管理数组和索引。这是我的两种经典方法，但它们似乎不起作用，因为它们在达到条件时会继续循环：

```
#include<stdio.h>
#define MAX 255

int main(){

    int arr[MAX]={0};
    int idx=0;

    /* Approach #1 */

    printf("Enter elements, -1 to finish:\n");
    scanf("%d", &arr[idx]);

    while(arr[idx-1] != -1 && idx < MAX){
        printf("Enter elements, -1 to finish:\n");
        scanf("%d", &arr[idx]);
        idx++;        
    }

    /* Approach #2 */

    do{
        printf("Enter elements, -1 to finish:\n");
        scanf("%d", &arr[idx]);
        idx++;
    }while(arr[idx-1] != -1 && idx < MAX);

    // Main func continues here.

} 
```

任何建议将不胜感激！

**更新：**

现在它起作用了！非常感谢你们**所有人的即时回复。**这绝对是一个很棒的社区，它帮助了我很多。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2008-09-21T23:50:52.497

```
arr[idx] <= MAX 
```

应该

```
idx <= MAX 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T00:07:42.953

```
while(arr[idx] != -1 && idx <= MAX){ // Fixed by sklivvz
    printf("Enter elements, -1 to finish:\n");
    scanf("%d", &arr[idx]);
    idx++;        
} 
```

首先，您应该检查索引变量 idx 是否小于 MAX（不小于或等于）。如果您的索引等于 MAX，您将超出范围。MAX = 10 的数组的索引值为 0 到 9，包括 9，但不是 10。

其次，将第一个元素添加到 arr[0]，将索引从 0 增加到 1，然后跳回 while 条件并检查 arr[1] == -1，它不是。所以检查 arr[idx-1] != -1。但是请注意，第一次进入 while 循环时，您实际上会检查 arr[-1] != -1，这也超出了范围。;) 所以你需要弄清楚如何解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T00:21:21.440

到罗马 M：

首先，问这个问题的人刚开始上编程课程，可能还没有学过指针。其次，您现在同时处理计数器和指针。我不确定我是否看到这样做与使用这样的索引相比有什么好处：

for(idx=0;idx < MAX;++idx) {

```
scanf("%d", &arr[idx]);
if(arr[idx] == -1)
    break; 
```

}

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T03:20:06.843

使用 for 循环可以消除对凌乱的**idx-1**检查代码的需要：

```
/* Approach #3*/
int i;
int value;

for (i = 0; i < MAX; ++i)
{
  printf("Enter elements, -1 to finish:\n");
  scanf("%d", &value);
  if (value == -1) break;
  arr[i] = value;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:54:25.717

C 数组从 0 开始计数。

如果分配一个大小为 MAX 的数组，则访问 MAX 处的元素将是一个错误。将循环更改为；

```
int arr[MAX];
for ( .... && idx < MAX ) 
```

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:54:32.797

```
arr[idx] <= MAX 
```

应该

```
idx < MAX 
```

除非您正在检查项目而不是索引。

您还始终检查 -1 的“下一个”元素 (arr[idx] != -1)，因为您在检查附加值之前增加了 idx。

所以如果你有

```
arr[idx-1] != -1 
```

你会没事的。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2008-09-21T23:57:19.563

在您的第一个 while 循环中，

```
arr[idx] <= MAX 
```

行应该读

```
idx <= MAX 
```

在您的第二个循环中，您在测试之前增加 idx - 它应该以

```
} while ((arr[idx-1] != -1) && (idx-1 <= MAX)); 
```

我也倾向于将所有内部条件括起来，以绝对确定优先级是正确的（因此上面有额外的括号）。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T00:15:27.273

我会选择这样的东西。

您不必担心数组边界和其他令人困惑的情况。

```
int cnt = MAX;        // how many elements in the array, in this case MAX
int * p = &arr[0];    // p is a pointer to an integer and is initialize to the address of the first
                      // element of the array. So now *p is the same as arr[0] and p is same as &arr[0]

// iterate over all elements. stop when cnt == 0
while (cnt) {

    // do somthing
    scanf("%d", *p); // remember  that *p is same as arr[some index]
    if (*p == -1)    // inspect element to see what user entered
        break;

    cnt --;  // loop counter
    p++;     // incrementing p to point to next element in the array
} 
```

# xml - 使用 XPath 在命名空间中选择元素

> ID：112601
> 
>         
> 
> 赞同：12
> 
>         
> 
> 时间：2008-09-21T23:59:47.637
> 
>         
> 
> 标签：xml, xpath, namespaces

我想选择文档中具有给定命名空间（前缀）的最顶层元素。

更具体地说：我有以 /html/body （在 XHTML 命名空间中）或以特定命名空间中的几个元素之一开头的 XML 文档。我实际上想删除 /html/body 并返回正文内容或整个根命名空间元素。

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2008-09-22T03:54:45.997

在 XPath 2.0 和 XQuery 1.0 中，您可以使用谓词中的[in-scope-prefixes()函数针对名称空间前缀进行测试。](http://www.w3.org/TR/xquery-operators/#func-in-scope-prefixes)例如

```
//*[in-scope-prefixes(.)='html'] 
```

如果您不能使用 v2，在 XPath 1.0 中，您可以使用[namespace-uri()](http://www.w3.org/TR/xpath#function-namespace-uri)函数来测试命名空间本身。例如

```
//*[namespace-uri()='http://www.w3c.org/1999/xhtml'] 
```

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T00:00:46.323

我想要的 XPath 表达式是：

```
/html:html/html:body/node()|/foo:* 
```

其中“html”前缀映射到 XHTML 命名空间，而“foo”前缀映射到我的目标命名空间。

# java - 什么是“JNI 全球参考”

> ID：112603
> 
>         
> 
> 赞同：29
> 
>         
> 
> 时间：2008-09-22T00:01:13.547
> 
>         
> 
> 标签：java, swing, jprofiler

我正在使用 jProfiler 来查找 Java swing 应用程序中的内存泄漏。我已经确定了一个不断增长的 JFrame 实例。

此框架打开，然后关闭。

使用 jProfiler 并查看 GC Root 的路径，只有一个参考，“JNI 全局参考”。

这是什么意思？为什么它会挂在框架的每个实例上？

* * *

## 回答 #1

> 赞同：21
> 
>             
> 
> 时间：2008-09-22T00:57:57.200

JNI 全局引用是从“本机”代码到由 Java 垃圾收集器管理的 Java 对象的引用。其目的是防止收集仍被本机代码使用但在 Java 代码中似乎没有任何实时引用的对象。

JFrame 是一个`java.awt.Window`, 并与“本机” Window 对象相关联。当您完全完成一个特定的 JFrame 实例时，您应该调用它的`dispose()`方法来清理。

我不确定是否有任何本机代码正在创建对 JFrame 的全局引用，但似乎很有可能。如果是这样，这将防止 JFrame 被垃圾收集。如果您正在创建许多 Windows（或子类）并看到它们从未被收集，请确保它们已被处置。

* * *

## 回答 #2

> 赞同：16
> 
>             
> 
> 时间：2008-09-22T00:52:29.553

[Wikipedia 对Java Native Interface](http://en.wikipedia.org/wiki/Java_Native_Interface)有很好的概述，本质上它允许 Java 和用其他语言编写的本地操作系统库之间的通信。

JNI 全局引用容易发生内存泄漏，因为它们不会自动进行垃圾回收，程序员必须显式释放它们。如果您自己没有编写任何 JNI 代码，那么您使用的库可能存在内存泄漏。

 **[在此处](http://journals.ecs.soton.ac.uk/java/tutorial/native1.1/implementing/refs.html)**编辑**是有关本地与全局引用的更多信息，以及使用全局引用的原因（以及应如何释放它们）**

 *** * *

## 回答 #3

> 赞同：14
> 
>             
> 
> 时间：2015-05-22T08:53:41.247

在修复 JavaFX 应用程序中的内存泄漏时，我遇到了这个确切的问题。最后问题是我在**调试模式下**运行应用程序并且代码中有几个断点。这似乎导致对象成为“JNI 全局引用”并在没有明显原因的情况下保存在内存中。当我关闭调试模式时，一切正常！

# c++ - （函数）模板的 C++ 非类型参数是否有序？

> ID：112612
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2008-09-22T00:06:37.027
> 
>         
> 
> 标签：c++, templates, overloading

我在当前项目中托管[SpiderMonkey](http://developer.mozilla.org/En/SpiderMonkey/JSAPI_Reference)，并希望模板函数生成一些简单的属性获取/设置方法，例如：

```
template <typename TClassImpl, int32 TClassImpl::*mem>
JSBool JS_DLL_CALLBACK WriteProp(JSContext* cx, JSObject* obj, jsval id, jsval* vp)
{
    if (TClassImpl* pImpl = (TClassImpl*)::JS_GetInstancePrivate(cx, obj, &TClassImpl::s_JsClass, NULL))
        return ::JS_ValueToInt32(cx, *vp, &(pImpl->*mem));
    return JS_FALSE;
} 
```

用过的：

```
::JSPropertySpec Vec2::s_JsProps[] = {
    {"x", 1, JSPROP_PERMANENT, &JsWrap::ReadProp<Vec2, &Vec2::x>, &JsWrap::WriteProp<Vec2, &Vec2::x>},
    {"y", 2, JSPROP_PERMANENT, &JsWrap::ReadProp<Vec2, &Vec2::y>, &JsWrap::WriteProp<Vec2, &Vec2::y>},
    {0}
}; 
```

但是，如果我添加其他成员类型，这可以正常工作：

```
template <typename TClassImpl, JSObject* TClassImpl::*mem>
JSBool JS_DLL_CALLBACK WriteProp(JSContext* cx, JSObject* obj, jsval id, jsval* vp)
{
    if (TClassImpl* pImpl = (TClassImpl*)::JS_GetInstancePrivate(cx, obj, &TClassImpl::s_JsClass, NULL))
        return ::JS_ValueToObject(cx, *vp, &(pImpl->*mem));
    return JS_FALSE;
} 
```

然后 Visual C++ 9 尝试将 JSObject* 包装器用于 int32 成员！

```
1>d:\projects\testing\jswnd\src\main.cpp(93) : error C2440: 'specialization' : cannot convert from 'int32 JsGlobal::Vec2::* ' to 'JSObject *JsGlobal::Vec2::* const '
1>        Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
1>d:\projects\testing\jswnd\src\main.cpp(93) : error C2973: 'JsWrap::ReadProp' : invalid template argument 'int32 JsGlobal::Vec2::* '
1>        d:\projects\testing\jswnd\src\wrap_js.h(64) : see declaration of 'JsWrap::ReadProp'
1>d:\projects\testing\jswnd\src\main.cpp(93) : error C2440: 'initializing' : cannot convert from 'overloaded-function' to 'JSPropertyOp'
1>        None of the functions with this name in scope match the target type 
```

令人惊讶的是，解析 JSObject* 会导致解析错误！（意外的'(')。这可能是一个 VC++ 错误（任何人都可以测试“模板 void foo() {}”在 GCC 中编译吗？）。与“typedef JSObject* PObject; ..., PObject TClassImpl:: *mem>"、void*、struct Undefined* 和 double。由于函数使用完全实例化：“&ReadProp”，因此不应有正常的函数重载语义发挥作用，此时它是一个已定义的函数，优先于模板功能。这里的模板排序似乎失败了。

Vec2 只是：

```
class Vec2
{
public:
    int32 x, y;

    Vec2(JSContext* cx, JSObject* obj, uintN argc, jsval* argv);

    static ::JSClass s_JsClass;
    static ::JSPropertySpec s_JsProps[];
}; 
```

JSPropertySpec 在 OP 中的 JSAPI 链接中进行了描述，取自标题：

```
typedef JSBool
(* JS_DLL_CALLBACK JSPropertyOp)(JSContext *cx, JSObject *obj, jsval id,
                                 jsval *vp);

...

struct JSPropertySpec {
    const char      *name;
    int8            tinyid;
    uint8           flags;
    JSPropertyOp    getter;
    JSPropertyOp    setter;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T01:08:42.260

很确定 VC++ 在这里有“问题”。Comeau 和 g++ 4.2 都对以下程序感到满意：

```
struct X
{
    int i;
    void* p;
};

template<int X::*P>
void foo(X* t)
{
    t->*P = 0;
}

template<void* X::*P>
void foo(X* t)
{
    t->*P = 0;
}

int main()
{
    X x;
    foo<&X::i>(&x);
    foo<&X::p>(&x);
} 
```

然而，VC++ 2008SP1 没有。

我没有时间通读我的标准以找出究竟是什么……但我认为 VC++ 在这里是错误的。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T00:41:29.690

尝试将 JSObject * 更改为另一种指针类型，看看是否会重现错误。JSObject 是在使用时定义的吗？此外，也许 JSObject* 需要放在括号中。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T00:51:24.627

我当然不是模板专家，但这是否可以归结为一个微妙的案例，即纯粹基于返回类型来区分重载？

由于 C++ 不允许基于返回类型重载函数，因此可能同样的事情适用于模板参数。

# git - git instaweb 给出 403 Forbidden - 未找到项目

> ID：112613
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2008-09-22T00:06:38.637
> 
>         
> 
> 标签：git, http-status-code-403, instaweb

在我的存储库中运行`git instaweb`会打开一个页面，上面写着“403 Forbidden - No projects found”。我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
>             
> 
> 时间：2008-09-22T01:15:37.830

看起来 git 的 debian 安装`$projectroot`以一种令人困惑的方式全局设置`instaweb`。我从中删除了该`$projectroot`行，`/etc/gitweb.conf`错误消失了。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T00:11:34.740

我不了解 Git，但您可能缺少在相关目录上执行   **chmod +X** it 的能力。  

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-04-08T12:56:13.413

检查 git-web cgi（perl），查看 projectroot 的目录与您当前的设置相同。有一些设置不在 gitweb.conf  

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2010-08-25T10:46:22.263

两年后..

我通过在 gitweb.cgi 中声明 projectroot 解决了这个问题（这是唯一重要的值）

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2011-10-20T00:44:07.273

又过了一年……

我通过以下方式解决了这个问题（F12，git 1.7.2.3）：

```
vi .git/gitweb/gitweb.cgi   # set DocumentRoot to <root>/.git/gitweb.cgi
GITWEB_CONFIG=.git/gitweb lighttpd -f .git/gitweb/httpd.conf 
```

我没有进一步挖掘来弄清楚为什么我需要这样做......

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2013-03-05T11:21:04.627

两年后……

我通过添加这一行解决了这个问题

```
Options All ExecCGI FollowSymLinks Includes Indexes 
```

到我的 httpd.conf 文件

# .net - == 与 .NET 中的 Object.Equals(object)

> ID：112625
> 
>         
> 
> 赞同：51
> 
>         
> 
> 时间：2008-09-22T00:15:10.627
> 
>         
> 
> 标签：.net

所以，当我是一个相对于我现在的新手的新手时，我曾经认为这两个东西是彼此的语法糖，即使用一个而不是另一个只是个人喜好。随着时间的推移，我发现这两者并不是一回事，即使在默认实现中也是如此（参见[this](http://web.archive.org/web/20081205081158/http://blogs.msdn.com:80/jmstall/archive/2005/03/06/386064.aspx)和[this](http://web.archive.org/web/20090710210823/http://blogs.msdn.com:80/jmstall/archive/2005/03/12/394645.aspx)）。为了进一步混淆这个问题，每个都可以单独覆盖/重载以具有完全不同的含义。

这是一件好事吗，有什么区别，什么时候/为什么应该使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：34
> 
>             
> 
> 时间：2008-09-22T01:31:11.723

```
string x = "hello";
string y = String.Copy(x);
string z = "hello"; 
```

测试是否`x`指向与 相同的对象`y`：

```
(object)x == (object)y  // false
x.ReferenceEquals(y)    // false
x.ReferenceEquals(z)    // true (because x and z are both constants they
                        //       will point to the same location in memory) 
```

测试是否`x`具有与以下相同的字符串值`y`：

```
x == y        // true
x == z        // true
x.Equals(y)   // true
y == "hello"  // true 
```

请注意，这与 Java 不同。在 Java 中，`==`运算符没有重载，因此 Java 中的一个常见错误是：

```
y == "hello"  // false (y is not the same object as "hello") 
```

对于 Java 中的字符串比较，您需要始终使用`.equals()`

```
y.equals("hello")  // true 
```

* * *

## 回答 #2

> 赞同：17
> 
>             
> 
> 时间：2008-09-22T00:23:06.553

MSDN 对这两件事都有清晰而可靠的描述。

[object.Equals 方法](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)

[运算符 ==](http://msdn.microsoft.com/en-us/library/53k8ybth(VS.71).aspx)

[可重载的运算符](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)

[覆盖 Equals() 和运算符 == 的指南](http://msdn.microsoft.com/en-us/library/ms173147.aspx)

> 这是一件好事吗，有什么区别，什么时候/为什么应该使用一个而不是另一个？

怎么可能是“好”或“坏”的事情？一个 - 方法，另一个 - 运算符。如果引用相等性不够，则重载它们，否则保持原样。对于原始类型，它们只是开箱即用。

* * *

## 回答 #3

> 赞同：9
> 
>             
> 
> 时间：2014-05-08T22:30:56.427

微软表示，类实现者应该使`==`行为尽可能类似于`Equals`：

> 请确保 Object.Equals 和相等运算符具有完全相同的语义

来自[http://msdn.microsoft.com/en-us/library/vstudio/7h9bszxx(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/vstudio/7h9bszxx(v=vs.110).aspx)

* * *

如果您想确定您正在获得**IDENTITY**比较（比较参考时），请`ReferenceEquals`改用。

**如果类实现者没有覆盖`==`**，则在编译时在基类中查找静态方法。如果此搜索达到`Object`，则`Object.==`使用。对于类，这与`ReferenceEquals`.

如果类文档不确定给定类（可能来自 Microsoft 以外的供应商）是否实现`==`为`Equals`or `ReferenceEquals`（或者理论上它可能与这两者不同），
**我有时会避免`==`**使用. 相反，我使用可读性较差的`Equals(a, b)`or `ReferenceEquals(a, b)`，这取决于我想要的含义。

OTOH，[ps2goat](https://stackoverflow.com/a/32106633/199364)提出了一个很好的观点，即`==`如果第一个操作数为空（因为`==`是静态运算符），则使用可以避免异常。这是支持使用`==`.

* * *

*删除了有争议的评论`==`*

* * *

**更新**2019 年 2 月检索到的来自 .Net 4.7.2 的最新 Microsoft 文档引用表明，他们*仍然*希望两者表现相似：

[Object.Equals 方法](https://docs.microsoft.com/en-us/dotnet/api/system.object.equals?redirectedfrom=MSDN&view=netframework-4.7.2#System_Object_Equals_System_Object_)

> 某些语言（例如 C# 和 Visual Basic）支持运算符重载。当类型重载相等运算符时，它还必须重写 Equals(Object) 方法以提供相同的功能。这通常通过根据重载的相等运算符编写 Equals(Object) 方法来完成，如下例所示。

* * *

`==`注意：有关作为静态方法与`Equals`作为实例方法的后果的结果，请参阅其他答案。我并不是说行为是相同的；我观察到微软建议使两者尽可能相似。

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2015-08-19T22:23:29.850

我打算将此作为对已接受答案的评论发表，但我认为在确定采取哪条路线时值得考虑这一点。

dotnetfiddle：[https ://dotnetfiddle.net/gESLzO](https://dotnetfiddle.net/gESLzO)

小提琴代码：

```
 Object a = null;
    Object b = new Object();

    // Ex 1
    Console.WriteLine(a == b);
    // Ex 2
    Console.WriteLine(b == a);

    // Ex 3     
    Console.WriteLine(b.Equals(a));
    // Ex 4
    Console.WriteLine(a.Equals(b)); 
```

前 3 个 WriteLine 示例将起作用，但第四个会引发异常。1 和 2 使用`==`，这是一种不需要实例化任何一个对象的静态方法。

示例 3 有效，因为`b`已实例化。

示例 4 失败，因为`a`is `null`，因此无法对空对象调用方法。

因为我尝试尽可能懒惰地编写代码，所以我使用`==`，尤其是在处理任何一个对象（或两者）都可以为空的情况时。如果我没有，我必须先做一个空检查，然后才能调用`.Equals()`.

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T00:18:29.060

我对两者用法的理解是：使用 == 表示概念上的相等（在上下文中，这两个参数是否意味着同一件事？），以及 .Equals 表示具体相等（这两个参数实际上是完全相同的对象吗？ ）。

编辑：Kevin Sheffield 的链接文章在解释价值与参考平等方面做得更好……</p>

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2019-02-26T19:46:28.400

要回答这个问题，我们必须描述四种对象等价：

1.  **Reference Equality, object.ReferenceEquals(a, b)**：这两个变量指向 RAM 中的同一个对象。（如果这是 C，两个变量将具有相同的精确指针。）

2.  **Interchangeability, a == b**：这两个变量指的是完全可以互换的对象。因此，当 a == b 时，Func(a,b) 和 Func(b,a) 做同样的事情。

3.  **Semantic Equality, object.Equals(a, b)**：在这个确切的时刻，这两个对象的含义相同。

4.  **实体相等， a.Id == b.Id**：两个对象引用同一个实体，例如数据库行，但不必具有相同的内容。

作为程序员，在处理已知类型的对象时，您需要了解在您所处的特定代码时刻适合您的业务逻辑的等价类型。

最简单的例子是字符串与 StringBuilder 类型。字符串覆盖 ==，StringBuilder 不会：

```
var aaa1 = "aaa";
var aaa2 = $"{'a'}{'a'}{'a'}";
var bbb = "bbb";

// False because aaa1 and aaa2 are completely different objects with different locations in RAM
Console.WriteLine($"Object.ReferenceEquals(aaa1, aaa2): {Object.ReferenceEquals(aaa1, aaa2)}");

// True because aaa1 and aaa2 are completely interchangable
Console.WriteLine($"aaa1 == aaa2: {aaa1 == aaa2}");             // True
Console.WriteLine($"aaa1.Equals(aaa2): {aaa1.Equals(aaa2)}");   // True
Console.WriteLine($"aaa1 == bbb: {aaa1 == bbb}");               // False
Console.WriteLine($"aaa1.Equals(bbb): {aaa1.Equals(bbb)}");     // False

// Won't compile
// This is why string can override ==, you can not modify a string object once it is allocated
//aaa1[0] = 'd';

// aaaUpdated and aaa1 point to the same exact object in RAM
var aaaUpdated = aaa1;
Console.WriteLine($"Object.ReferenceEquals(aaa1, aaaUpdated): {Object.ReferenceEquals(aaa1, aaaUpdated)}"); // True

// aaaUpdated is a new string, aaa1 is unmodified
aaaUpdated += 'c';
Console.WriteLine($"Object.ReferenceEquals(aaa1, aaaUpdated): {Object.ReferenceEquals(aaa1, aaaUpdated)}"); // False

var aaaBuilder1 = new StringBuilder("aaa");
var aaaBuilder2 = new StringBuilder("aaa");

// False, because both string builders are different objects
Console.WriteLine($"Object.ReferenceEquals(aaaBuider1, aaaBuider2): {Object.ReferenceEquals(aaa1, aaa2)}");

// Even though both string builders have the same contents, they are not interchangable
// Thus, == is false
Console.WriteLine($"aaaBuider1 == aaaBuilder2: {aaaBuilder1 == aaaBuilder2}");

// But, because they both have "aaa" at this exact moment in time, Equals returns true
Console.WriteLine($"aaaBuider1.Equals(aaaBuilder2): {aaaBuilder1.Equals(aaaBuilder2)}");

// Modifying the contents of the string builders changes the strings, and thus
// Equals returns false
aaaBuilder1.Append('e');
aaaBuilder2.Append('f');
Console.WriteLine($"aaaBuider1.Equals(aaaBuilder2): {aaaBuilder1.Equals(aaaBuilder2)}"); 
```

要了解更多细节，我们可以从实体平等开始。在实体相等的情况下，实体的属性可能会随着时间而改变，但实体的主键永远不会改变。这可以用伪代码来证明：

```
// Hold the current user object in a variable
var originalUser = database.GetUser(123);

// Update the user’s name
database.UpdateUserName(123, user.Name + "son");

var updatedUser = database.GetUser(123);

Console.WriteLine(originalUser.Id == updatedUser.Id); // True, both objects refer to the same entity
Console.WriteLine(Object.Equals(originalUser, updatedUser); // False, the name property is different 
```

转向语义平等，示例略有变化：

```
var originalUser = new User() { Name = "George" };
var updatedUser = new User() { Name = "George" };

Console.WriteLine(Object.Equals(originalUser, updatedUser); // True, the objects have the same contents
Console.WriteLine(originalUser == updatedUser); // User doesn’t define ==, False

updatedUser.Name = "Paul";

Console.WriteLine(Object.Equals(originalUser, updatedUser); // False, the name property is different 
```

互换性怎么样？（覆盖==）这更复杂。让我们以上面的例子为基础：

```
var originalUser = new User() { Name = "George" };
var updatedUser = new User() { Name = "George" };
Console.WriteLine(Object.Equals(originalUser, updatedUser); // True, the objects have the same contents

// Does this change updatedUser? We don’t know
DoSomethingWith(updatedUser);

// Are the following equivalent?
// SomeMethod(originalUser, updatedUser);
// SomeMethod(updatedUser, originalUser); 
```

在上面的示例中，DoSomethingWithUser(updatedUser) 可能会更改 updatedUser。因此我们不能再保证 originalUser 和 updatedUser 对象是“相等的”。这就是用户不覆盖 == 的原因。

何时覆盖 == 的一个很好的例子是使用不可变对象。不可变对象是公开可见状态（属性）永不改变的对象。必须在对象的构造函数中设置整个可见状态。（因此，所有属性都是只读的。）

```
var originalImmutableUser = new ImmutableUser(name: "George");
var secondImmutableUser = new ImmutableUser(name: "George");

Console.WriteLine(Object.Equals(originalImmutableUser, secondImmutableUser); // True, the objects have the same contents
Console.WriteLine(originalImmutableUser == secondImmutableUser); // ImmutableUser defines ==, True

// Won’t compile because ImmutableUser has no setters
secondImmutableUser.Name = "Paul";

// But this does compile
var updatedImmutableUser = secondImmutableUser.SetName("Paul"); // Returns a copy of secondImmutableUser with Name changed to Paul.

Console.WriteLine(object.ReferenceEquals(updatedImmutableUser, secondImmutableUser)); // False, because updatedImmutableUser is a different object in a different location in RAM

// These two calls are equivalent because the internal state of an ImmutableUser can never change
DoSomethingWith(originalImmutableUser, secondImmutableUser);
DoSomethingWith(secondImmutableUser, originalImmutableUser); 
```

你应该用可变对象覆盖 == 吗？（也就是说，一个内部状态可以改变的对象？）可能不会。您需要构建一个相当复杂的事件系统来保持可互换性。

通常，我使用大量使用不可变对象的代码，因此我覆盖 ==，因为它比 object.Equals 更具可读性。当我使用可变对象时，我不会覆盖 == 而是依赖 object.Equals。知道他们正在使用的对象是否可变是程序员的责任，因为知道某些东西的状态是否可以改变应该会影响您设计代码的方式。

== 的默认实现是 object.ReferenceEquals，因为对于可变对象，只有当变量指向 RAM 中的相同对象时，才能保证互换性。即使对象在给定时间点具有相同的内容，（Equals 返回 true，）也不能保证对象将继续相等；因此这些对象是不可互换的。因此，当使用不覆盖 == 的可变对象时，== 的默认实现有效，因为如果 a == b，它们是同一个对象，并且 SomeFunc(a, b) 和 SomeFunc(b, a)完全一样。

此外，如果一个类没有定义等价，（例如，考虑一个数据库连接和打开文件句柄等），那么 == 和 Equals 的默认实现回退到引用相等，因为数据库连接类型的两个变量，打开文件句柄等，只有当它们是数据库连接，打开文件句柄等的确切实例时才相等。在需要知道两个不同的数据库连接引用同一个数据库或两个不同的文件句柄引用磁盘上的同一个文件的业务逻辑中，实体相等可能是有意义的。

现在，对于我的肥皂盒时刻。在我看来，C# 以一种令人困惑的方式处理这个话题。== 应该用于语义相等，而不是 Equals 方法。应该有一个不同的运算符，如 ===，用于互换性，可能还有另一个运算符，====，用于引用相等。这样，新手和/或编写 CRUD 应用程序的人只需要了解 ==，而不需要了解可互换性和引用相等性的更细微的细节。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T00:23:07.987

您可能想要使用 .Equals，因为稍后有人可能会出现并为您的课程超载它们。

* * *

## 回答 #8

> 赞同：-1
> 
>             
> 
> 时间：2010-08-26T14:52:18.547

最常用的两种类型**String 和 Int32**将 operator==() 和 Equals() 实现为值相等（而不是引用相等）。我认为可以考虑这两个**定义示例**，因此我的结论是**两者具有相同的含义**。如果微软[另有说明](http://msdn.microsoft.com/en-us/library/ms173147.aspx)，我认为他们是故意造成混乱。

* * *

## 回答 #9

> 赞同：-1
> 
>             
> 
> 时间：2015-05-18T07:39:30.397

当我们比较值而不是引用时，运算符 == 和 Equals() 都是相同的。两者的输出相同，请参见下面的示例。

**例子**

```
 static void Main()
    {
        string x = " hello";
        string y = " hello";
        string z = string.Copy(x);
        if (x == y)
        {
            Console.WriteLine("== Operator");
        }
        if(x.Equals(y))
        {
            Console.WriteLine("Equals() Function Call");
        }
        if (x == z)
        {
            Console.WriteLine("== Operator while coping a string to another.");
        }
        if (x.Equals(y))
        {
            Console.WriteLine("Equals() Function Call while coping a string to another.");
        }
    } 
```

**输出：**

```
 == Operator
  Equals() Function Call
  == Operator while coping a string to another.
  Equals() Function Call while coping a string to another. 
```

# objective-c - 如何在运行时使用 Objective-C 动态创建选择器？

> ID：112643
> 
>         
> 
> 赞同：93
> 
>         
> 
> 时间：2008-09-22T00:22:32.467
> 
>         
> 
> 标签：objective-c, cocoa, dynamic

我知道如何`SEL`在编译时使用`@selector(MyMethodName:)`，但我想做的是从`NSString`. 这甚至可能吗？

我可以做什么：

```
SEL selector = @selector(doWork:);
[myobj respondsToSelector:selector]; 
```

我想做什么：（伪代码，这显然行不通）

```
SEL selector = selectorFromString(@"doWork");
[myobj respondsToSelector:selector]; 
```

我一直在搜索 Apple API 文档，但没有找到不依赖编译时`@selector(myTarget:)`语法的方法。

* * *

## 回答 #1

> 赞同：180
> 
>             
> 
> 时间：2008-09-22T00:34:43.403

我不是一个 Objective-C 程序员，只是一个同情者，但也许[NSSelectorFromString](https://developer.apple.com/documentation/foundation/1395294-nsselectorfromstring?language=objc)是你需要的。在[运行时参考](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/chapter_9_section_3.html)中明确提到您可以使用它将字符串转换为选择器。

* * *

## 回答 #2

> 赞同：40
> 
>             
> 
> 时间：2008-09-22T00:42:32.433

根据 XCode 文档，您的伪代码基本上是正确的。

> 在编译时使用 @selector() 指令为 SEL 变量赋值是最有效的。但是，在某些情况下，程序可能需要在运行时将字符串转换为选择器。这可以通过 NSSelectorFromString 函数来完成：

`setWidthHeight = NSSelectorFromString(aBuffer);`

编辑：无赖，太慢了。:P

* * *

## 回答 #3

> 赞同：13
> 
>             
> 
> 时间：2014-02-01T05:52:10.330

我不得不说它比以前的受访者的答案可能暗示*的要复杂*一些......如果你真的想**创建一个选择器**......而不仅仅是“打电话”你“已经铺设”...... .

您需要创建一个将由您的“新”方法调用的函数指针。所以对于像这样的方法`[self theMethod:(id)methodArg];`，您将编写...

```
void (^impBlock)(id,id) = ^(id _self, id methodArg) { 
     [_self doSomethingWith:methodArg]; 
}; 
```

然后您需要`IMP`动态生成块，这一次，传递“self”、the`SEL`和任何参数......

```
void(*impFunct)(id, SEL, id) = (void*) imp_implementationWithBlock(impBlock); 
```

并将其添加到您的类中，以及整个吸盘的准确方法签名（在这种情况下`"v@:@"`，无效返回，对象调用者，对象参数）

```
 class_addMethod(self.class, @selector(theMethod:), (IMP)impFunct, "v@:@"); 
```

[你可以在我的一个 repos 中](https://github.com/mralexgray/AtoZAutoBox)看到这种[*运行时恶作剧的一些很好的例子，here。*](https://github.com/mralexgray/AtoZAutoBox)

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2014-02-26T05:11:16.633

我知道很久以前就已经回答了这个问题，但我仍然想分享。这也可以使用`sel_registerName`。

问题中的示例代码可以这样重写：

```
SEL selector = sel_registerName("doWork:");
[myobj respondsToSelector:selector]; 
```

# operating-system - 嵌入式操作系统的比较？

> ID：112663
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2008-09-22T00:31:53.550
> 
>         
> 
> 标签：operating-system, embedded, threadx

我参与过一种或另一种风格的嵌入式操作系统，并且通常不得不使用遗留系统所拥有的任何东西。现在我有机会从头开始一个新的嵌入式项目。

对系统的主要约束是：

*   它需要一个基于网络的界面。

*   需要实时处理输入（因此需要真正的 RTOS）。

*   可用内存为 32MB RAM 和 FLASH。

该团队之前使用的操作系统是 VxWorks、ThreadX、uCos、pSOS 和 Windows CE。

有没有人有关于操作系统选择的比较或贸易研究？

还有其他我们应该考虑的操作系统吗？（我们建议使用 eCos 和 RT-Linux）。

**编辑 - 感谢您迄今为止的所有回复。可惜我不能全部标记为“已接受”。**

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T00:52:12.410

多年前我曾与[QNX合作，对此我无话可说。](http://www.qnx.com)即使在那个时候，QNX 4（与 Neutrino 微内核相比确实是厚实的）非常适合低内存情况（尽管 32MB与我们必须使用的*1-2MB*相比是个大问题），虽然我没有明确表示玩任何基于网络的东西，我知道 Apache 是可用的。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T11:02:49.243

这完全取决于为您的团队分配了多少时间来学习“新”RTOS。

您是否有任何理由不想使用人们已经使用过的东西？

我在 vxWorks 方面有丰富的经验，我喜欢它，但在我为 WindRiver 工作时无视我的意见。

uC/OS II 的优点是在 Labrosse 的书中有完整的文档记录（实际上是在源代码中解释的）。虽然不知道网络支持。

我知道 pSos 不再可用。

您还可以查看[此 RTOS 列表](http://en.wikipedia.org/wiki/List_of_real-time_operating_systems)

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2008-10-31T19:06:18.103

我认为仔细评估“RTOS”的含义是明智的。我在一家构建高性能嵌入式系统的大公司工作了多年，他们称它们为“实时”，尽管它们实际上并非如此。它们具有低延迟并具有确定性调度程序，并且十分之九，这就是人们说 RTOS 时真正追求的。

真正的实时需要硬件支持，这可能不是您真正的意思。如果你想要的只是低延迟和确定性调度（同样，我认为这就是人们在 90% 的情况下所说的“实时”的意思），那么任何 Linux 发行版都适合你。您甚至可以使用 Windows（不过我不确定您如何控制 Windows 调度程序......）。

同样，请注意“实时”的含义。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2008-09-23T03:37:25.750

[我从netburner](http://netburner.com)购买了一些开发硬件，
它使用起来非常简单，并且有很好的文档记录。它是一个运行 uCLinux 的 RTOS。这家公司很适合合作。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2008-09-30T11:31:04.717

选择您的团队有经验的操作系统可能是一个明智的决定。但是，我想推广两个好的开源选项：

*   [eCos](http://ecos.sourceware.org)（你提到过吗）

*   [实时监测系统](http://www.rtems.org)

两者都具有适用于各种架构的许多功能和驱动程序。你还没有提到你将使用什么架构。它们提供了 POSIX 层，如果您想尽可能地保持便携性，这是很好的。

此外，eCos 和 RTEMS 的许可证都是 GPL，但有一个例外，因此通过链接内核生成的可执行文件不受 GPL 覆盖。

社区非常活跃，有公司提供商业支持和发展。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2008-10-03T16:21:02.543

我们对 Keil RTX 系统非常满意....轻巧快速，满足我们所有严格的实时限制。它还内置了一些很好的调试功能来监视堆栈溢出等。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T00:34:00.270

我对 Windows CE 非常满意，尽管它“更重”。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-10-31T19:10:57.203

张贴同意 Ben Collins 的观点——您确实需要确定您是否有软实时要求（主要用于人机交互）或硬实时要求（用于与时间敏感设备的接口）。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-04-12T19:48:34.703

柔软也意味着你可以偶尔忍受一些打嗝。

可靠性要求是什么？我对嵌入式 Linux 等更通用操作系统的经验是，由于它们的智能平均情况优化试图避免单个任务的饥饿和类似情况，它们往往会遇到随机打嗝。

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2012-04-22T14:03:02.710

VxWorks 不错：

1.  良好的文档；

2.  友好的开发工具；

3.  低延迟；

4.  确定性调度。

但是，我怀疑 WindRiver 是否会将他们的主要注意力转移到 Linux 上，而 WindRiver Linux 是否会打入 WindRiver VxWorks 的市场。市场少，对工程师的要求少。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2014-01-22T08:42:45.380

这是最新的研究。最后一个是 8 多年前完成的，所以这是最相关的。这些表格可用于添加额外的 RTOS 选项。您会注意到，这种比较主要针对较轻的机器，但同样适用于不需要虚拟内存的较重的机器。  

[http://www.embedded.com/design/operating-systems/4425751/Comparing-microcontroller-real-time-operating-systems](http://www.embedded.com/design/operating-systems/4425751/Comparing-microcontroller-real-time-operating-systems)

# sql-server - 从 cygwin 窗口连接到 SQL Server 超时，从 DOS 提示符有效

> ID：112664
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2008-09-22T00:32:58.947
> 
>         
> 
> 标签：sql-server, cygwin, sqlcmd

我可以从 DOS 命令窗口通过 sqlcmd 连接到我的 SQL Server 数据库，但不能从 Cygwin 窗口连接。从 DOS：

```
F:\Cygnus>sqlcmd -Q "select 'a test'" -S .\SQLEXPRESS 
```

* * *

一个测试

（1 行受影响）

```
F:\Cygnus> 
```

==================================================== ==

来自 Cygwin：

```
$ sqlcmd -Q "select 'a test'" -S .\SQLEXPRESS 
```

> HResult 0x35，级别 16，状态 1
> 命名管道提供程序：无法打开与 SQL Server [53] 的连接。Sqlcmd：错误：Microsoft SQL Native Client：建立与服务器的连接时发生错误。连接到 SQL Server 2005 时，此失败可能是由于在默认设置下 SQL Server 不允许远程连接。 Sqlcmd: Error: Microsoft SQL Native Client : Login timeout expired。

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2008-09-22T22:46:43.170

反斜杠被 cygwin 的 bash shell 吃掉了。尝试加倍：

```
sqlcmd -Q "select 'a test'" -S .\\SQLEXPRESS 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T00:46:03.890

您可能必须为此允许远程连接，并提供完整的服务器名称，即 SERVER\SQLEXPRESS

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2015-04-21T11:32:51.520

如果您使用“-Q”开关，您还可以将查询/指令传递给 db 并在 shell 中接收输出：

```
sqlcmd -Q "select * from nice.dbo.TableName ac ORDER BY 1 DESC" -S server_name\\db_name 
```

# sql-server-2005 - 将 SQL Server 数据库从单个实例还原到集群

> ID：112676
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-22T00:40:27.167
> 
>         
> 
> 标签：sql-server-2005

我需要将数据库从 SQL Server 实例测试服务器传输到集群的生产环境。但是 SQL Server 不允许您使用备份/恢复来从单个实例到集群。我在这里谈论的是 Microsoft CRM 复杂数据库。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T04:08:12.173

查看[Microsoft SQL Server 数据库发布向导](http://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A)：

> SQL Server 数据库发布向导可以将 SQL Server 数据库部署到 SQL Server 2000 或 2005 服务器上的托管环境中。它生成单个 SQL 脚本文件，可用于在共享托管环境中重新创建数据库（模式和数据），其中与服务器的唯一连接是通过带有脚本执行窗口的基于 Web 的控制面板。如果托管服务提供商支持，数据库发布向导还可以直接将数据库上传到位于共享托管服务提供商的服务器。
> 
>   
>   
> 
> 或者，SQL Server 数据库发布向导可以直接集成到 Visual Studio 2005 和/或 Visual Web Developer 2005 中，从而可以在开发环境中轻松发布数据库。

您不必使用服务器端部分；客户端“创建脚本”部分通常就足够了。

# url - 友好的网址方案？

> ID：112695
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-22T00:48:38.283
> 
>         
> 
> 标签：url, friendly-url, semantics

我上周设置的[爬虫服务](https://stackoverflow.com/questions/61553/track-your-reputation)缺少的许多东西之一就是漂亮的 URL。现在，用户参数正在使用*?u=*传递到脚本中，这是一个惰性 hack 的症状（脚本当然是）。但是，我一直在考虑重做它，我想获得一些关于可用选项的反馈。现在有两个页面，更新和图表，为用户提供信息。这是我想出的两种可能性。“1234”是用户ID号。由于技术原因，遗憾的是不能使用用户名：

*   http://<tld>/update/1234

*   http://< tld >/chart/1234

或者

*   http://<tld>/1234/update

*   http://< tld >/1234/chart

从概念上讲，选项 #1 是使用用户 ID 调用更新。选项 #2 提供了一个动词来操作用户 ID。

从一致性的角度来看，哪个更有意义？

* * *

提到的另一个选项是

*   http://<tld>/user/1234/update

*   http://<tld>/user/1234/chart

这为与特定用户无关的页面提供了空间。IE

*   http://< tld >/stats

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2008-09-23T21:28:07.767

如果您采用此方案，则可以很容易地阻止（行为良好的）机器人爬取您的网站：

```
 http://< tld >/update/1234
 http://< tld >/chart/1234 
```

这是因为您可以设置一个 /robots.txt 文件来包含：

```
 Disallow /update/
 Disallow /chart/ 
```

对我来说，这是一个很好的奖励，但经常被忽视。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T00:52:48.493

选项 #1 匹配常见的 ASP.NET MVC 示例。[模型视图控制器](http://www.asp.net/mvc/default.aspx?wwwaspnetrdirset=1 "模型视图控制器信息")模型中的一些示例具有 {controller}/{action}/{id} 的形式。[.NET 3.5 路由快速入门](http://quickstarts.asp.net/3-5-extensions/mvc/ASPNETRouting.aspx ".Net 3.5 路由快速入门")有一个表格显示了一些有效的路由模式：

**路由定义——匹配 URL 示例**

{controller}/{action}/{id} -- /Products/show/beverages

{table}/Details.aspx -- /Products/Details.aspx

博客/{action}/{entry} -- /blog/show/123

{reporttype}/{year}/{month}/{day} -- /sales/2008/1/5

{locale}/{action} 

-- /zh-CN/show

{language}-{country}/{action} 

-- /zh-CN/show

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T00:57:23.350

我会倾向于使用用户标识——选项#2——因为（存在的）目录结构是对用户数据的两个不同功能。这是用户的图表，也是用户的更新。

不过，这是一个很小的问题，不知道是否有计划显着扩展这个东西的功能。  

*   未来的一切都将成为个人用户的附加功能 foo 和 bar 和 baz 吗？如果是这样，由于上述原因，选项 #2 变得更有吸引力——用户 ID 是核心数据，从语义上开始是有意义的。

*   您要添加非用户驱动的功能吗？以标题目录开头可能是有意义的——/user/1234/update、/user/1234/chart、/question/45678/activity、/question/45678/stats 等。

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T00:50:56.797

我个人喜欢这种风格，因为它使用户保持不变，但让您对他们有具体的了解。

*   http://<tld>/1234/update

*   http://< tld >/1234/chart

如果您采用另一种方式，我希望能够看到 /update 或 /chart 下的所有内容，然后按用户缩小范围。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T00:59:15.093

选择后者；URL 意味着是分层的（或者，至少，用户以类似于本地目录路径的方式读取它们）。这里的重点是对特定用户的不同看法，因此“用户”是更笼统的概念，应该首先出现。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2008-09-23T21:18:31.610

我刚刚回答了[“你如何构建你的 URL 路由？”这个问题。](https://stackoverflow.com/questions/119467/how-do-you-structure-your-url-routes#123922)与我关于使 URL 成为 RESTful、可破解和用户友好的意见。我认为链接比在这个问题中写类似的东西更好，因此链接。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T00:55:56.427

我同意从上下文的角度来看，应用程序后面的参数对我来说比项目的代理键和项目的上下文更有意义。最终，我会建议您编程哪个更自然。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T01:12:44.077

约定说对象/动词/ ID，所以它应该是：

http://<tld>/user/update/1234

（我刚刚注意到这与您更新的问题相匹配：）

所以是的，#3 是最好的选择。

这支持您提到的非用户操作（stats/），以及多用户操作：

http://<tld>/user/list/

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2008-09-25T22:14:52.490

如果有一种列出用户的方式，我会介绍一个用户细分：

```
http://< tld >/users/ <--- user list
http://< tld >/users/1234/ <--- user profile, use overloaded POST on this to update.
http://< tld >/users/1234/chart/ <--- user chart 
```

如果您只能看到自己的详细信息，即用户彼此不可见，则不需要用户 ID，因为您可以从会话中推断出来，在这种情况下：

```
http://< tld >/user/ <--- user profile, use overloaded POST on this to update.
http://< tld >/user/chart/ <--- user chart 
```

# python - py2exe - 生成单个可执行文件

> ID：112698
> 
>         
> 
> 赞同：152
> 
>         
> 
> 时间：2008-09-22T00:49:12.153
> 
>         
> 
> 标签：python, packaging, py2exe

我以为我听说[py2exe](http://www.py2exe.org/)能够做到这一点，但我从来没有想通。有没有人成功做到这一点？我可以查看您的 setup.py 文件，以及您使用的命令行选项吗？

基本上我正在考虑它给我一个可执行文件，它可以执行类似将自身解压缩到 /temp 并运行的操作。

* * *

## 回答 #1

> 赞同：178
> 
>             
> 
> 时间：2008-09-22T03:19:08.937

使用 py2exe 的方法是在 setup.py 文件中使用 bundle_files 选项。对于单个文件，您需要设置`bundle_files`为 1、`compressed`True，并将 zipfile 选项设置为 None。这样，它会创建一个压缩文件以便于分发。

[这是直接从py2exe 站点](http://www.py2exe.org/index.cgi/SingleFileExecutable?highlight=(file)|(single))引用的 bundle_file 选项的更完整描述*

> 使用“bundle_files”和“zipfile”
> 
>   
>   
> 
> 创建单文件可执行文件的一种更简单（更好）的方法是将 bundle_files 设置为 1 或 2，并将 zipfile 设置为 None。这种方法不需要将文件提取到临时位置，从而提供更快的程序启动。
> 
>   
>   
> 
> bundle_files 的有效值为：
> 
>   
>   
> 
> *   3（默认）不捆绑
> 
> *   2 捆绑除 Python 解释器之外的所有内容
> 
> *   1 捆绑一切，包括 Python 解释器
> 
>   
>   
> 
> 如果 zipfile 设置为 None，则文件将捆绑在可执行文件中，而不是 library.zip。

这是一个示例 setup.py：

```
from distutils.core import setup
import py2exe, sys, os

sys.argv.append('py2exe')

setup(
    options = {'py2exe': {'bundle_files': 1, 'compressed': True}},
    windows = [{'script': "single.py"}],
    zipfile = None,
) 
```

* * *

## 回答 #2

> 赞同：109
> 
>             
> 
> 时间：2008-09-22T00:55:46.240

[PyInstaller](http://www.pyinstaller.org/)将创建一个没有依赖关系的单个 .exe 文件；使用该`--onefile`选项。它通过将所有需要的共享库打包到可执行文件中来做到这一点，并在运行之前将它们解包，就像您描述的那样（编辑：py2exe 也具有此功能，请参阅[minty 的答案](https://stackoverflow.com/questions/112698/py2exe-generate-single-executable-file#113014)）

我使用来自 svn 的 PyInstaller 版本，因为最新版本 (1.3) 有点过时了。对于依赖于 PyQt、PyQwt、numpy、scipy 等的应用程序来说，它运行得非常好。

* * *

## 回答 #3

> 赞同：15
> 
>             
> 
> 时间：2008-12-02T09:44:45.113

正如另一张海报提到的那样，`py2exe`, 将生成一个可执行文件 + 一些要加载的库。您还可以将一些数据添加到您的程序中。

下一步是使用安装程序，将所有这些打包成一个易于使用的可安装/可卸载程序。

几年来我一直很高兴地使用[InnoSetup](http://www.jrsoftware.org/isinfo.php)并用于商业程序，所以我衷心推荐它。

* * *

## 回答 #4

> 赞同：8
> 
>             
> 
> 时间：2011-07-26T03:20:59.760

我已经能够创建一个将所有资源嵌入到 exe 中的单个 exe 文件。我正在窗户上建造。所以这将解释我正在使用的一些 os.system 调用。

首先，我尝试将所有图像转换为位图，然后将所有数据文件转换为文本字符串。但这导致最终的exe非常大。

在谷歌搜索一周后，我想出了如何更改 py2exe 脚本以满足我的需求。

这是我提交的关于 sourceforge 的补丁链接，请发表评论，以便我们将其包含在下一个发行版中。

[http://sourceforge.net/tracker/index.php?func=detail&aid=3334760&group_id=15583&atid=315583](http://sourceforge.net/tracker/index.php?func=detail&aid=3334760&group_id=15583&atid=315583)

这解释了所做的所有更改，我只是在设置行中添加了一个新选项。这是我的 setup.py。

我会尽力评论它。请知道我的 setup.py 很复杂，因为我通过文件名访问图像。所以我必须存储一个列表来跟踪它们。

这是我试图制作的一个想要的屏幕保护程序。

我使用 exec 在运行时生成我的设置，这样更容易剪切和粘贴。

```
exec "setup(console=[{'script': 'launcher.py', 'icon_resources': [(0, 'ICON.ico')],\
      'file_resources': [%s], 'other_resources': [(u'INDEX', 1, resource_string[:-1])]}],\
      options={'py2exe': py2exe_options},\
      zipfile = None )" % (bitmap_string[:-1]) 
```

分解

script = py script 我想转成 exe

icon_resources = exe的图标

file_resources = 我想嵌入到 exe 中的文件

other_resources = 嵌入到 exe 中的字符串，在本例中为文件列表。

options = py2exe 用于将所有内容创建到一个 exe 文件中的选项

bitmap_strings = 要包含的文件列表

请注意，在您按照上面链接中的说明编辑 py2exe.py 文件之前，file_resources 不是有效选项。     

我第一次尝试在此站点上发布代码，如果我弄错了，请不要激怒我。

```
from distutils.core import setup
import py2exe #@UnusedImport
import os

#delete the old build drive
os.system("rmdir /s /q dist")

#setup my option for single file output
py2exe_options = dict( ascii=True,  # Exclude encodings
                       excludes=['_ssl',  # Exclude _ssl
                                 'pyreadline', 'difflib', 'doctest', 'locale',
                                 'optparse', 'pickle', 'calendar', 'pbd', 'unittest', 'inspect'],  # Exclude standard library
                       dll_excludes=['msvcr71.dll', 'w9xpopen.exe',
                                     'API-MS-Win-Core-LocalRegistry-L1-1-0.dll',
                                     'API-MS-Win-Core-ProcessThreads-L1-1-0.dll',
                                     'API-MS-Win-Security-Base-L1-1-0.dll',
                                     'KERNELBASE.dll',
                                     'POWRPROF.dll',
                                     ],
                       #compressed=None,  # Compress library.zip
                       bundle_files = 1,
                       optimize = 2                        
                       )

#storage for the images
bitmap_string = '' 
resource_string = ''
index = 0

print "compile image list"                          

for image_name in os.listdir('images/'):
    if image_name.endswith('.jpg'):
        bitmap_string += "( " + str(index+1) + "," + "'" + 'images/' + image_name + "'),"
        resource_string += image_name + " "
        index += 1

print "Starting build\n"

exec "setup(console=[{'script': 'launcher.py', 'icon_resources': [(0, 'ICON.ico')],\
      'file_resources': [%s], 'other_resources': [(u'INDEX', 1, resource_string[:-1])]}],\
      options={'py2exe': py2exe_options},\
      zipfile = None )" % (bitmap_string[:-1])

print "Removing Trash"
os.system("rmdir /s /q build")
os.system("del /q *.pyc")
print "Build Complete" 
```

好的，这就是 setup.py 现在访问图像所需的魔法。我在没有考虑 py2exe 的情况下开发了这个应用程序，然后添加了它。所以你会看到这两种情况的访问权限。如果找不到图像文件夹，它会尝试从 exe 资源中提取图像。代码将解释它。这是我的精灵类的一部分，它使用directx。但你可以使用任何你想要的 api 或者只访问原始数据。没关系。

```
def init(self):
    frame = self.env.frame
    use_resource_builtin = True
    if os.path.isdir(SPRITES_FOLDER):
        use_resource_builtin = False
    else:
        image_list = LoadResource(0, u'INDEX', 1).split(' ')

    for (model, file) in SPRITES.items():
        texture = POINTER(IDirect3DTexture9)()
        if use_resource_builtin: 
            data = LoadResource(0, win32con.RT_RCDATA, image_list.index(file)+1) #windll.kernel32.FindResourceW(hmod,typersc,idrsc)               
            d3dxdll.D3DXCreateTextureFromFileInMemory(frame.device,   #Pointer to an IDirect3DDevice9 interface
                                              data,                #Pointer to the file in memory
                                              len(data),           #Size of the file in memory
                                              byref(texture))      #ppTexture
        else:
            d3dxdll.D3DXCreateTextureFromFileA(frame.device, #@UndefinedVariable
                                               SPRITES_FOLDER + file,
                                               byref(texture))            
        self.model_sprites[model] = texture
    #else:
    #    raise Exception("'sprites' folder is not present!") 
```

任何问题都可以自由提问。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2010-09-13T17:40:51.543

如前所述，您应该创建一个安装程序。即使通过将 bundle_files 选项设置为 1 并将 zipfile 关键字参数设置为 None 也可以让 py2exe 将所有内容捆绑到一个可执行文件中，但我不建议将其用于 PyGTK 应用程序。

这是因为 GTK+ 试图从加载它的目录加载它的数据文件（本地、主题等）。因此，您必须确保可执行文件的目录还包含 GTK+ 使用的库以及安装 GTK+ 的目录 lib、share 等。否则，在系统范围内未安装 GTK+ 的机器上运行应用程序时会遇到问题。

有关更多详细信息，请阅读我[的 PyGTK 应用程序 py2exe 指南](http://www.no-ack.org/2010/09/complete-guide-to-py2exe-for-pygtk.html)。它还解释了如何捆绑除 GTK+ 之外的所有内容。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-02-19T04:02:07.390

我被告知[bbfreeze](http://pypi.python.org/pypi/bbfreeze/)将创建一个文件 .EXE，并且比 py2exe 更新。

* * *

## 回答 #7

> 赞同：-2
> 
>             
> 
> 时间：2008-09-22T00:56:28.343

我最近使用 py2exe 创建了一个用于后审的可执行文件，用于将评论发送到 ReviewBoard。

这是我使用的 setup.py

```
from distutils.core import setup
import py2exe

setup(console=['post-review']) 
```

它创建了一个包含 exe 文件和所需库的目录。我认为不可能使用 py2exe 来获取单个 .exe 文件。如果您需要，您将需要首先使用 py2exe，然后使用某种形式的安装程序来制作最终的可执行文件。

需要注意的一件事是，您在应用程序中使用的任何 egg 文件都需要解压缩，否则 py2exe 无法包含它们。这在 py2exe 文档中有介绍。

* * *

## 回答 #8

> 赞同：-2
> 
>             
> 
> 时间：2015-08-04T08:13:18.140

尝试 
[c_x freeze](http://cx-freeze.sourceforge.net/)
它可以创建一个很好的独立

* * *

## 回答 #9

> 赞同：-6
> 
>             
> 
> 时间：2008-09-22T00:53:21.957

不，它不会为您提供一个可执行文件，因为您之后只有一个文件 - 但您有一个目录，其中包含运行程序所需的所有内容，包括一个 exe 文件。

我今天刚写了[这个 setup.py](http://hg.diotavelli.net/sta/master/file/542689f50e63/setup.py)。您只需要调用`python setup.py py2exe`.

# c++ - 与 C++ 相比，使用 Objective-C 有什么优势

> ID：112702
> 
>         
> 
> 赞同：23
> 
>         
> 
> 时间：2008-09-22T00:52:05.017
> 
>         
> 
> 标签：c++, objective-c, programming-languages

我听说过Objective-C，但我自己从未使用过它。我很好奇每个人对它的总体看法以及与 C++ 的关系。是否有任何类型的项目会更有用或更没用？

* * *

## 回答 #1

> 赞同：20
> 
>             
> 
> 时间：2008-09-22T02:04:08.447

像许多其他人一样，由于 iPhone，我刚刚开始关注 Obj-C。我已经做了很多 C++ 和 C#，据我所见，Obj-C 对 OO 有一种基本不同的方法，它向 C 添加了类似 Smalltalk 的消息传递。像 C++ 一样，它基本上仍然是 C 兼容的，但是 OO 扩展让您向任何对象发送任何消息。从这个意义上说，它不像 C++ 和 C# 那样静态类型化，其中对象可以做的事情与它所在的类相关联。在 Obj-C 中，即使对象不支持，您也可以向对象发送消息。如果对象不知道如何处理它，它可以转发它。

真正酷的事情是您可以在运行时添加接口（协议），并且您可以添加自己的处理程序来拦截和隐藏现有类的消息处理程序。

总而言之，在消息处理方面有更大的灵活性，更像是在 Ruby 或 Smalltalk 中所做的。将这种类型的 OO 移植到 C 上是否是一个好主意我还不能确定，在某些方面，C++ 方法与 C 的原始想法更好地结合，但另一方面，Obj-C OO 方法更多OO 纯粹主义者喜欢什么。

* * *

## 回答 #2

> 赞同：16
> 
>             
> 
> 时间：2008-09-22T07:55:35.683

From ["Some nice features of the Objective-C language"](http://pmougin.wordpress.com/2008/03/13/some-nice-features-of-the-objective-c-language/ "Nice features of the Objective-C language"):

*   Classes are objects

*   Dynamic typing and optional static typing

*   Categories

*   Message sending

*   Expressive message syntax

*   Introspection

*   Dynamic run-time

*   Automatic garbage collection

*   C inside

*   C++ fluent

*   Simplicity

*   Access to Apple technologies

* * *

## 回答 #3

> 赞同：13
> 
>             
> 
> 时间：2009-05-23T20:15:35.100

我发现objective-c 的语法比c++ 更简洁，虽然我知道我在这里是少数

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2009-05-23T19:59:02.823

Objective C 的 OO 特性使用动态类型而不是静态（编译时）类型。这是两种语言方法的主要区别——它是否具有优势取决于您对静态与动态类型的看法。

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T01:22:42.027

我的观点是，Objective-C 的语法起初有点“奇怪”，特别是如果你来自 C/C++ 背景（就像我一样）。如果您打算为 Mac 或 iPhone 编写应用程序，Cocoa 开发**是您的最佳选择**。今年春天我有机会在 Mac 上进行了大约一个月的开发，并选择使用 Qt 库在 C++ 中编写它，因为我对这些库非常熟悉，而且时间至关重要。

如果您有 Mac，请试一试！那里有很多信息，并且有一些很好的开发工具。

* * *

## 回答 #6

> 赞同：5
> 
>             
> 
> 时间：2008-09-28T16:11:07.290

使 Objective-C 如此出色的部分原因不是语言（尽管这很*重要**）*，而是与之配套的 Cocoa（或 CocoaTouch）框架（至少对于 99% 的 objc 用户来说；-)

实际上，在过去的“经典”Mac 时代，我曾经是一名 C++ 程序员。切换到 Objective-C、Cocoa 和 Mac OS X 我发现我变得更有效率。很难说到底有多少生产力，但 50% 到 100% 感觉是对的。

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T01:29:07.237

如果你运行的是 Linux，你可以安装 GNUStep，它提供了与 Cocoa 的良好兼容性。这可以让你在没有 Mac 的情况下开始 Objective-C/Cocoa 开发。[在我看来] 学习 Objective-C 的最佳资源来自 Apple。

[http://developer.apple.com/referencelibrary/Cocoa/index.html](http://developer.apple.com/referencelibrary/Cocoa/index.html)

* * *

## 回答 #8

> 赞同：3
> 
>             
> 
> 时间：2009-05-23T19:58:30.970

好吧，如果您正在为某些平台（如 iPhone）编写代码，则需要 Objective-C。Objective-C 还使用动态（运行时）类型，许多人更喜欢静态（编译时）类型。  

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2009-05-23T20:11:41.020

WebKit 最初是一个 C++ 项目（来自 KDE 的 khtml），后来被 Apple 改编为与 Cocoa 环境更兼容，从而获得了 Objective-C 层。

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T13:51:40.117

它比 C++ 更具动态性，并且深受 Smalltalk 的影响。我不觉得它比 C++“更好”——相反，但有些人确实如此。

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T01:01:26.803

对于 Mac 和 iPhone 开发来说，绝对是更好的选择。最新版本有 GC，所以如果你喜欢它，你可能会比 C++ 更喜欢它。

# php - 如何启用多模式 emacs 来编写 PHP 而不会弄乱我的缩进？

> ID：112707
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2008-09-22T00:53:15.840
> 
>         
> 
> 标签：php, emacs

每当我`HTML`在`PHP`模式下缩进时，都会`emacs (22.1.1, basic install on Redaht Linux over Putty-SSH)`弹出一个框架并告诉我获取`MUMODE`或`somesuch`额外的附加组件。我毫不费力地安装了`PHP`模式，但我不知道如何让这种多模式滚动。

* * *

我想知道2件事

```
How to install and configure multi-mode
How to disable pop-ups in Emacs 
```

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T02:39:48.330

如果您正在运行 emacs 22，您应该能够运行：

```
M-x nxhtml-mumamo 
```

编辑 html 文档时。您可能希望将其添加到您的 auto-mode-alist 以使其自动加载 html 文档。请参阅此处了解更多信息：

[http://www.emacswiki.org/cgi-bin/wiki/MuMaMo](http://www.emacswiki.org/cgi-bin/wiki/MuMaMo) 

[http://www.emacswiki.org/cgi-bin/wiki/PhpMode](http://www.emacswiki.org/cgi-bin/wiki/PhpMode)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2012-09-04T21:31:17.817

web-mode.el 可以在[http://web-mode.org](http://web-mode.org)
这个主要模式用于编辑 html php 模板（带有 JS 和 CSS） 将这两行添加到你的`.emacs`

```
(require 'web-mode)
(add-to-list 'auto-mode-alist '("\\.phtml$" . web-mode)) 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-11-02T15:23:23.920

多模式和 html-php-mode 可以在这里找到：[http ://www.loveshack.ukfsn.org/emacs/](http://www.loveshack.ukfsn.org/emacs/)

它可以用以下方式初始化：

```
(require 'html-php)
(add-to-list 'auto-mode-alist '("\\.php\\'" . html-php-mode)) 
```

# javascript - 在 Rails 应用程序中结合 Scriptaculous 和 jQuery

> ID：112721
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2008-09-22T00:58:25.157
> 
>         
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, scriptaculous

我有以下情况

*   一个使用 rjs / Scriptaculous 提供 AJAX 功能的 Rails 应用程序

*   使用 jQuery 编写的许多不错的 javascript（用于单独的应用程序）

我想将两者结合起来并在我的 Rails 应用程序中使用基于 jQuery 的功能，但我担心 jQuery 和 Scriptaculous 冲突（它们都定义了 $() 函数等）。

将两者结合在一起的最简单选择是什么？谢谢！

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2008-09-22T01:11:07.153

```
jQuery.noConflict(); 
```

然后用 jQuery 代替 $ 来引用 jQuery。例如，

```
jQuery('div.foo').doSomething() 
```

如果你需要修改使用 $ 的 jQuery 代码，你可以用这个包围它：

```
(function($) {
...your code here...
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:52:13.577

我相信是`jQuery.noConflict()`。

您可以像这样独立调用它：

```
jQuery.noConflict();

jQuery('div').hide(); 
```

或者您可以将其分配给您选择的另一个变量：

```
var $j = jQuery.noConflict();

$j('div').hide(); 
```

或者你可以在这样的块中继续使用 jQuery 的`$`函数：

```
jQuery.noConflict();

 // Put all your code in your document ready area
 jQuery(document).ready(function($){
   // Do jQuery stuff using $
   $("div").hide();
 });
// Use Prototype with $(...), etc.
$('someid').hide(); 
```

有关更多信息，请参阅jQuery 文档中的[将 jQuery 与其他库一起使用。](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T01:04:56.950

[jRails](http://ennerchi.com/projects/jrails)是使用 jQuery 库的 Rails 中 scriptaculous/prototype 的替代品，它完全符合您的要求。

# optimization - 为未知进行设计时如何避免优化带来的危险？

> ID：112727
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-22T00:59:59.317
> 
>         
> 
> 标签：optimization

两方：

1）假设您正在设计一种新型应用程序，并且您正在提出新的算法来表达概念和内容 - 在那个阶段尝试**主动**不考虑优化技术是否有意义，甚至如果在您的脑海中，您担心它可能会以 O(N!) 超过数百万个元素而告终？

2) 如果是这样，请说避免限制在概念验证运行后您**可能**能够优化的酷功能——您如何阻止自己摆脱这种程序员一生的习惯？我一直在尝试心理练习，纸质笔记，但我长大后基本上是在汇编程序中计算时钟周期，并且我不断发现自己在充分考虑功能价值之前否决了过于浪费的潜在解决方案。

**编辑：**这是关于**设计**一些以前没有做过的事情（未知），当你甚至不确定它是否可以在理论上完成时，更不用说手头有无限的计算能力了。因此，“当然，您必须在拥有原型之前进行优化，**因为**它是一个既定的计算原则”这样的答案并不是特别有用。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2008-09-22T03:09:46.293

我说以下所有内容并不是因为我认为您还不知道，而是在您压制内心批评者的同时提供道德支持:-)

关键是保持理智。

如果你发现自己正在编写一个预期可扩展的 Theta(N!) 算法，那你就疯了。你必须把它扔掉，所以你现在最好开始寻找一个更好的算法，你可能会实际使用它。

如果您发现自己担心每次用户按键精确执行一次的 Pentium 代码是否需要 10 个周期或 10K 个周期，那您就疯了。CPU 95% 空闲。给它一万个微不足道的循环。如果必须，请提出增强票，但要慢慢地远离组装者。

一旦决定该项目是“编写研究原型，然后将其演变成真正的产品”，还是“编写研究原型”。显然期望如果研究成功，将会有另一个相关项目。

在后一种情况下（从评论听起来像你所拥有的），你可以写一些只适用于 N<=7 的东西，甚至会导致从这里到辛辛那提的断电。这仍然是你不确定你能做到的事情。一旦你对问题有了感觉，你就会更好地了解性能问题是什么。

您正在做的事情是在现在浪费时间（考虑到您的研究证明无关紧要）与以后浪费时间（因为您现在没有考虑一些事实证明很重要的事情）之间取得平衡。你的研究风险越大，你就越应该为做某事感到高兴，并担心你以后做了什么。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T01:05:53.203

我的主要答案是[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)。通过预先编写所有测试，你强迫自己只编写足够的代码来实现你正在寻找的行为。如果时间和时钟周期成为要求，那么您可以编写测试来覆盖该场景，然后重构您的代码以满足这些要求。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:07:31.127

优化并不完全是危险。在编写代码时在某种程度上考虑速度是*件好事，因为当更简单、更快的事情可以做到时，它会阻止你实施缓慢而混乱的解决方案。*它还可以让您在脑海中检查某些东西是否实用。

可能发生的最糟糕的事情是你设计了一个显式忽略优化的大程序，结果却发现*你的整个设计完全没有用，因为如果不完全重写它就无法优化*。如果您在编写它时考虑所有事情，这永远不会发生——而“所有事情”的一部分是潜在的性能问题。

“过早优化是万恶之源”是万恶之源。我见过因过度使用这个概念而瘫痪的项目。在我的公司，我们有一个软件程序可以从网络上的磁盘广播传输流。它最初是为了测试目的而创建的（因此我们一次只需要几个流），但在程序的规范要求中始终是它适用于大量流，因此以后可以用于视频点播。

因为是完全无视速度写的，所以一团糟；它有大量的 memcpy，尽管它们永远不是必需的，它的 TS 处理代码非常慢（它实际上多次解析每个 TS 数据包），等等。它一次只处理 40 个流，而不是它应该处理的数千个，当它真正用于 VOD 时，我们不得不返回并花费大量时间清理它并重写大部分它。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:09:53.600

与安全性和可用性一样，性能是从项目开始就必须考虑的事情。因此，您绝对应该在设计时考虑到良好的性能。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:09:55.660

旧的 Knuth 行是“我们应该忘记小的效率，比如说大约 97% 的时间：过早的优化是万恶之源。” O(N!) 到 O(poly(N)) 不是“小效率”！

处理类型 1 的最佳方法是从可能工作的最简单的事情开始（O(N!) 不可能工作，除非你不缩放超过几十个元素！）并将它从应用程序的其余部分封装起来，所以假设会出现性能问题，您可以将其重写为更好的方法。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T14:13:35.400

*“首先，让它跑起来。然后让它跑得快。”*

或者

*“要先完成，首先你必须完成。”*

缓慢的现有应用程序通常比超快的非现有应用程序更好。

* * *

## 回答 #7

> 赞同：2
> 
>             
> 
> 时间：2008-09-30T15:26:53.230

首先，人们声称完成是唯一重要（或几乎）的事情。

但是，如果你完成了一个在其主要算法上具有 O(N!) 复杂度的产品，根据经验，你并没有完成它！对于 99% 的情况，您的产品不完整且不可接受。

合理的性能是工作产品的一部分。一个完美的表现可能不是。如果你完成了一个文本编辑器，需要 6 GB 内存来写一个简短的笔记，那么你根本就没有完成一个产品，你手上只有浪费时间。你必须永远记住，不仅仅是交付代码使产品完整，使其实现满足客户/用户需求的能力。如果你在这方面失败了，那么你已经完成了时间表中的代码编写无关紧要。

因此，所有避免产生无用产品的优化都应在不影响其余设计和实现过程的情况下立即考虑和应用。

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T01:07:02.907

“积极不考虑优化”对我来说听起来很奇怪。通常 80/20 规则效果很好。如果您花费 80% 的时间为不到 20% 的用例优化程序，那么最好不要浪费时间，除非这 20% 的用例真的很重要。

至于完美主义，它没有任何问题，除非它开始让你放慢脚步，让你错过时间框架。计算机编程艺术是在应用程序的美观和功能之间取得平衡的一种行为。帮助自己考虑学习时间管理。当您学习如何拆分和衡量您的工作时，很容易决定是立即优化它，还是创建工作版本。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T01:55:38.030

我认为忘记算法的 O(N!) 最坏情况是很合理的。首先，您需要确定一个给定的过程是否完全*可行*。请记住，摩尔定律仍然有效，因此即使是糟糕的算法也将在 10 或 20 年内花费更少的*时间！*

首先针对设计进行优化——例如首先让它工作:-) 然后针对性能进行优化。这是 Python 程序员天生要做的权衡。通过使用在运行时通常速度较慢但级别更高（例如，与 C/C++ 相比）并因此开发速度更快的语言进行编程，python 程序员能够完成相当多的工作。然后他们专注于优化。

需要注意的是，如果完成所需的时间太长以至于您无法确定您的算法是否正确，那么现在是一个非常好的时机来担心上游的早期优化。我只遇到过几次这种情况——但很高兴能意识到这一点。

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T04:09:30.937

根据[onebyone](https://stackoverflow.com/questions/112727/how-to-avoid-the-dangers-of-optimisation-when-coding-the-unknown#112986)的回答，优化代码和优化算法之间存在很大差异。

是的，在这个阶段优化代码的好处是值得怀疑的。你不知道真正的瓶颈在哪里，你一开始就不知道是否会出现速度问题。

但是，即使在算法/数据结构等开发的这个阶段也要注意扩展问题，这不仅是合理的，而且我怀疑是必不可少的。毕竟，如果粗略的分析表明，在宇宙的热寂发生之前，您将无法运行闪亮的新应用程序直到完成，那么继续进行下去就没有什么意义了。;-)

* * *

## 回答 #11

> 赞同：1
> 
>             
> 
> 时间：2009-11-10T16:37:47.657

我喜欢这个问题，所以我给出了答案，即使其他人已经回答了。

当我在读研究生时，在麻省理工学院人工智能实验室，我们一直面临这种情况，我们试图编写程序来理解语言、视觉、学习、推理等。

我的印象是，那些取得进步的人更感兴趣的是编写能做一些有趣的事情的程序，而不是做一些快速的事情。事实上，花在担心性能上的时间基本上是从构思有趣行为的时间中减去的。

现在我的工作更加平淡无奇，但同样的原则也适用。如果我得到一些工作，我总是可以让它工作得更快。

然而，我要提醒的是，现在教授软件工程的方式强烈鼓励从鼹鼠丘中制造高山。人们被教导创建一个类层次结构，而不是仅仅完成它，他们可以创建尽可能多的抽象层，包括服务、接口规范、插件以及阳光下的一切。他们没有被教导尽可能少用这些*东西*。

结果是极其复杂的软件，更难优化，因为改变起来要复杂得多。

我认为避免这种情况的唯一方法是获得大量进行性能调整的经验，并通过这种方式认识到导致这种过度复杂化的设计方法。（如：过分强调类和数据结构。）

[Here is an example of tuning an application that has been written in the way that is generally taught.](https://stackoverflow.com/questions/926266/performance-optimization-strategies-of-last-resort/927773#927773)

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T01:11:29.103

如果我担心代码处理数据增长的能力，在我走得太远之前，我会尝试以大块增量设置样本数据集，以测试它：

1000 条记录

10000 条记录

100000 条记录

1000000 条记录  

并查看它在哪里损坏或变得无法使用。然后您可以根据实际数据决定是否需要优化或重新设计核心算法。

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:00:18.753

我会讲一个关于发生在我身上的小故事，但不是真正的答案。

我正在为客户端开发一个项目，其中一部分是在服务器上处理非常大的扫描（图像）。当我写它时，我正在寻找功能，但我想到了几种优化代码的方法，这样它更快并且使用更少的内存。

现在出现了一个问题。在向潜在客户演示此软件和 beta 测试期间，在演示单元（独立笔记本电脑）上，由于使用了太多内存而失败。它在具有非常大文件的开发服务器上也会失败。

那么它是一种优化，还是一个已知的未来错误。我现在修复它还是优化它？好吧，这要确定，因为它们也是其他优先事项。

它只是让我希望我确实花时间更早地重新优化代码。

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:15:48.450

考虑操作场景。（ 用例）

假设我们正在制作一个披萨店查找器 Gizmo。

用户打开机器。它必须在有意义的时间内向他展示最近的披萨店。事实证明，我们的用户想要快速了解：在 15 秒内。

所以现在，无论你有什么想法，你都会想：这是否会在不到 15 秒的时间内真正运行，而不是花在做重要事情上的所有其他时间......

或者你是一个交易系统：准确的总和。如果可以，请每笔交易少于一毫秒。（他们可能会接受 10 毫秒），所以，阿吉安：你从相关场景的角度看待每一个想法。

假设它是一个电话应用程序：必须在以下时间开始（多少秒）

向笔记本电脑的客户演示始终是一个场景。我们必须销售产品。

维护，有些人升级的东西总是一个场景。

所以现在，作为一个例子：所有的硬、AI 重、lisp 定制的方法都不合适。或者对于不同的笔画，XML服务器配置文件不够人性化。

看看这有什么帮助。

# cakephp - 如何在 CakePHP 的第三个 n..n (hasAndBelongsToMany) 关系中加入两个表？

> ID：112730
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T01:03:14.303
> 
>         
> 
> 标签：cakephp, has-and-belongs-to-many, model-driven

我有`n...n`两个表的结构，**`makes`**并且**`models`**. 到目前为止没有问题。

在第三个表 ( **`products`**) 中，例如：

```
id
make_id
model_id
... 
```

**`make`**我的问题是为我包含的一个特定产品创建一个视图，`ProductsController`这就是制作模型：

我认为这可以工作：

```
var $uses = array('Make', 'Model');

$this->Make->id = 5; // My Make

$this->Make->find(); // Returns only the make I want with it's Models (HABTM)
$this->Model->find('list'); // Returns ALL models
$this->Make->Model->find('list'); // Returns ALL models 
```

所以，如果我想使用`list`to 传递给我的视图来创建单选按钮，我将不得不`foreach()`在我的**`make`**数组中执行一个来查找所有模型标题并创建一个新数组并通过`$this->set()`.

```
$makeArray = $this->Make->find();
foreach ($makeArray['Model'] as $model) {
    $modelList[] = $model['title'];
}
$this->set('models', $models) 
```

有没有更简单的方法来获取该列表而不会强调**`make`**数组。在我的应用程序中开发此类场景将是一项常见任务。

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:18:32.687

这是我的提示：在尝试使用 Cake 库进行重构之前，尝试用常规 SQL 编写查询。本质上，您正在做很多数据库可以为您做的额外工作。你的方法（只是为了展示 - 不是好的 SQL）：

```
SELECT * FROM makes, models, products WHERE make_id = 5 
```

您没有考虑关系（除非 Cake 自动神奇地理解表的关系）

您可能正在寻找将这些东西连接在一起的东西：

```
SELECT models.title FROM models 
INNER JOIN products 
  ON products.model_id = models.model_id 
  AND products.make_id = 5 
```

希望这是朝着正确方向的推动？

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-10-02T05:24:57.340

从您的评论来看，您要问的是如何从某个模型中获取结果，其中条件位于 HABTM 相关模型中。即，您通常会在原始 SQL 中使用 JOIN 语句来执行此操作。

目前，这是 Cake 为数不多的弱点之一。有不同的策略来处理它。

*   让相关模型 B 返回模型 A 的所有可能候选者的 id，然后对模型 Aie 进行第二次查询：

    ```
    $this->ModelB->find('first', array('conditions' => array('field' => $condition)));
    array(
        ['ModelB'] => array( ... ),
        ['ModelA'] => array(
            [0] => array(
                'id' => 1
            )
    ) 
    ```

    现在，您拥有了一个包含属于 ModelB 且符合您的条件的 ModelA 的所有 id 的数组，您可以使用 Set::extract() 轻松提取这些 id。基本上相当于`SELECT model_a.id FROM model_b JOIN model_a WHERE model_b.field = xxx`. 接下来寻找ModelA：

    ```
     $this->ModelA->find('all', array('conditions' => array('id' => $model_a_ids))); 
    ```

    这将产生`SELECT model_a.* FROM model_a WHERE id IN (1, 2, 3)`，这是执行 JOIN 语句的一种迂回方式。如果您需要多个相关模型的条件，请重复此操作，直到获得 ModelA 的所有 id，SQL 将使用所有 id 的交集 ( `WHERE id IN (1, 2, 3) AND id IN (3, 4, 5)`)。

*   如果您只需要 ModelB 上的一个条件但想检索 ModelA，只需搜索 ModelB。Cake 会自动为您检索相关的 ModelAs（见上文）。您可能需要再次 Set::extract() 它们，但这可能已经足够了。

*   您可以使用上述方法并将其与[Containable 行为](http://book.cakephp.org/view/474/Containable)相结合，以更好地控制结果。

*   如果所有其他方法都失败了，或者上述方法只会产生过多的开销，您仍然可以使用`$this->Model->query()`. 如果您坚持 Cake SQL 标准（使用 正确命名表`FROM model_as AS ModelA`），Cake 仍然会正确地对您的结果进行后处理。

希望这会让您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T07:44:49.080

您所有不同的 Make->find() 和 Model->find() 调用都完全相互独立。甚至 Make->Model->find() 与 Model->find() 相同，Cake 不会以任何方式记住或考虑您在其他模型中已经找到的内容。你正在寻找的是这样的：

```
$this->Product->find('all', array('conditions' => array('make_id' => 5))); 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-09-23T19:40:43.563

查看 Set::extract() 方法，从 $this->Make->find() 的结果中获取模型标题列表

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-02-03T20:00:54.697

该解决方案可以通过`with`在模型上使用 habtm 数组中的操作来实现。

使用`with`您可以定义“中间”表，如：

```
$habtm = " ...
  'with' => 'MakeModel',
   ... "; 
```

在内部，在模型或控制器中，您可以向`find`方法发出条件。

见：[http ://www.cricava.com/blogs/index.php?blog=6&title=modelizing_habtm_join_tables_in_cakephp_&more=1&c=1&tb=1&pb=1](http://www.cricava.com/blogs/index.php?blog=6&title=modelizing_habtm_join_tables_in_cakephp_&more=1&c=1&tb=1&pb=1)

# c++ - 一般来说，boost bind 在幕后是如何工作的？

> ID：112738
> 
>         
> 
> 赞同：33
> 
>         
> 
> 时间：2008-09-22T01:09:15.350
> 
>         
> 
> 标签：c++, boost, boost-bind

在不花很长时间查看 boost 源代码的情况下，有人可以快速了解一下 boost 绑定是如何实现的吗？  

* * *

## 回答 #1

> 赞同：25
> 
>             
> 
> 时间：2008-09-22T04:10:20.280

我喜欢这个`bind`来源：

```
template<class R, class F, class L> class bind_t
{
public:

    typedef bind_t this_type;

    bind_t(F f, L const & l): f_(f), l_(l) {}

#define BOOST_BIND_RETURN return
#include <boost/bind/bind_template.hpp>
#undef BOOST_BIND_RETURN

}; 
```

告诉你几乎所有你需要知道的，真的。

标`bind_template`头扩展为内联`operator()`定义列表。比如最简单的：

```
result_type operator()()
{
    list0 a;
    BOOST_BIND_RETURN l_(type<result_type>(), f_, a, 0);
} 
```

我们可以看到`BOOST_BIND_RETURN`宏在这一点上展开，`return`所以这条线更像`return l_(type...)`.

一个参数版本在这里：

```
template<class A1> result_type operator()(A1 & a1)
{
    list1<A1 &> a(a1);
    BOOST_BIND_RETURN l_(type<result_type>(), f_, a, 0);
} 
```

这很相似。

这些`listN`类是参数列表的包装器。这里有很多深奥的魔法，虽然我不太了解。他们还重载`operator()`了调用神秘`unwrap`函数。忽略一些编译器特定的重载，它不会做很多事情：

```
// unwrap

template<class F> inline F & unwrap(F * f, long)
{
    return *f;
}

template<class F> inline F & unwrap(reference_wrapper<F> * f, int)
{
    return f->get();
}

template<class F> inline F & unwrap(reference_wrapper<F> const * f, int)
{
    return f->get();
} 
```

命名约定似乎是：`F`是函数参数的类型`bind`。`R`是返回类型。`L`往往是参数类型的列表。还有很多复杂性，因为对于不同数量的参数有不少于九个重载。最好不要过多关注。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-12-03T13:10:25.687

顺便说一句，如果`bind_t`通过包含折叠和简化`boost/bind/bind_template.hpp`，它会变得更容易理解，如下所示：

```
template<class R, class F, class L> 
class bind_t
{
    public:

        typedef bind_t this_type;

        bind_t(F f, L const & l): f_(f), l_(l) {}

        typedef typename result_traits<R, F>::type result_type;
        ...
        template<class A1> 
            result_type operator()(A1 & a1)
            {
                list1<A1 &> a(a1);
                return l_(type<result_type>(), f_, a, 0);
            }
    private:
        F f_;
        L l_;

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T01:19:41.533

我认为它是一个模板类，它为要绑定的参数声明一个成员变量，并为其余参数声明重载 ()。

# algorithm - 最短根到叶路径

> ID：112739
> 
>         
> 
> 赞同：13
> 
>         
> 
> 时间：2008-09-22T01:09:26.223
> 
>         
> 
> 标签：algorithm, recursion, binary-tree, breadth-first-search

什么是最简单的方法，最好使用递归，在 BST（二叉搜索树）中找到最短的根到叶路径。首选Java，伪代码还可以。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2008-09-22T01:12:44.577

**一般说明：**

使用[广度优先搜索 (BFS)](http://en.wikipedia.org/wiki/Breadth-first_search)而不是[深度优先搜索 (DFS)](http://en.wikipedia.org/wiki/Depth-first_search)。找到第一个没有子节点的节点。

使用 DFS，您可能会在某些输入树上幸运（但无法知道您是否幸运，因此您仍然需要搜索整个树），但使用 BFS 方法要快得多，您可以在不触及所有输入树的情况下找到解决方案节点。

要找到从根到叶的路径，您可以使用父引用沿着第一个找到的无子节点一直返回到根。如果您没有在每个节点中存储父引用，则可以在向下递归时跟踪父节点。如果您的列表以相反的顺序排列，则可以将其全部压入堆栈，然后将其弹出。

**伪代码：**

问题很简单；这是找到最小长度的伪代码：

1.  将根节点放入队列。

在队列不为空时重复，没有找到结果：

2.  从队列的开头拉出一个节点并检查它是否没有子节点。如果它没有孩子，你就完成了，你找到了最短的路径。

3.  否则将所有孩子（左，右）推入队列。

**查找所有最短路径：**

要查找所有最短路径，您可以将节点的深度与队列中的节点一起存储。然后，您将对队列中具有相同深度的所有节点继续该算法。

**选择：**

如果您决定使用 DFS，则必须搜索整个树以找到最短路径。但这可以通过保持迄今为止最短的值来优化，并且只检查未来节点的深度，直到找到新的最短节点，或者直到达到迄今为止的最短节点。BFS 是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:15:34.367

这是用 C++ 编写的，但它非常简单，您可以轻松转换它。只需将 min 更改为 max 即可获得最大树深度。

```
int TreeDepth(Node* p)
{
    return (p == NULL) ? 0 : min(TreeDepth(p->LeftChild), TreeDepth(p->RightChild)) + 1;
} 
```

只是为了解释这是在做什么，它从叶子节点开始计数（当它找到叶子时它返回 0）并向上计数到根节点。对树的左侧和右侧执行此操作并取最小值将为您提供最短路径。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:24:09.100

就访问的顶点数量而言，广度优先搜索是最佳的。您必须访问在广度优先搜索中访问的每个顶点，以证明您拥有最近的叶子！

但是，如果您有使用递归的授权，那么 Mike Thompson 的方法*几乎*是正确的使用方法——而且稍微简单一些。

```
TD(p) is
  0 if p is NULL (empty tree special case)
  1 if p is a leaf (p->left == NULL and p->right == NULL)
  min(TD(p->left), TD(p->right)) if p is not a leaf 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2017-01-06T10:36:35.163

静态 int findCheapestPathSimple(TreeNode root){

```
if(root==null){
    return 0; 
}

return root.data+Math.min(findCheapestPathSimple(root.left), findCheapestPathSimple(root.right)); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2021-10-01T04:52:34.343

```
shortestPath(X)
if X == NIL
    return 0
else if X.left == NIL and X.right == NIL //X is a leaf
    return 1
else
    if X.left == NIL
        return 1 + shortestPath(X.right)
    else if X.right == NIL
        return 1 + shortestPath(X.left)
    else
        return 1 + min(shortestPath(X.left), shortestPath(X.right)) 
```

# maps - 如何根据这些服务中的一项或全部映射地理位置

> ID：112759
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T01:20:32.513
> 
>         
> 
> 标签：maps, geotagging

我正在寻找一种解决方案，通过 exif、关键字或其他任何方式将以下 Flickr、twitter、vimeo 中的一个或全部映射到谷歌地图。我正在尝试通过更新社交网站来显示我的位置地图。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-10-03T17:02:11.243

如果您想要的每个服务都[支持 GeoRSS](http://georss.org/)，那么您实际上可以用零编码构建这样的地图！这是因为 Google 地图支持直接映射 GeoRSS 提要。您所要做的就是在 Google 地图的框中输入带有 GeoRSS 数据的 RSS 提要的 URL。[这是我的“有什么害处？”](http://maps.google.com/maps?f=q&hl=en&geocode=&q=http:%2F%2Ffeeds.feedburner.com%2FWhatsTheHarm)中的提要示例。在谷歌地图中映射的[网站。](http://maps.google.com/maps?f=q&hl=en&geocode=&q=http:%2F%2Ffeeds.feedburner.com%2FWhatsTheHarm)

现在您在那里提到了几个服务，每个服务都可能有自己的 GeoRSS 提要。您需要做的是在将生成的提要交给谷歌地图之前将提要合并在一起。有多种方法可以做到这一点，一种快速的点击方式是通过[Yahoo Pipes](http://pipes.yahoo.com)。在此处搜索“merge feed”或“merge RSS”，您可以找到许多可以复制和修改的示例。

Yahoo Pipes 还具有*将*GeoRSS 编码添加到还没有它的提要的功能。您可以使用它来引入可能不是 GeoRSS 的博客文章和儿子等数据。在“操作员”下查找“位置提取器”小部件。

至于你提到的网站：

*   Flickr：是的。确保您映射您的照片，并使用标记为“geoFeed”的提要。

*   twitter：有一个叫做[GeoTwitter](http://geotwitter.net)的服务可以为你添加这个。

*   vimeo：他们似乎不支持开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T01:24:10.977

有一个很好的greasemonkey[脚本](http://txfx.net/2005/05/17/flickr-google-maps-geobloggers/)可以简化Flickr 上的地理标记。

# python - 如何使用 urllib、urllib2 和 ClientCookie 通过 Python 脚本登录 phpBB3 论坛？

> ID：112768
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-22T01:28:57.547
> 
>         
> 
> 标签：python, post, urllib

（ClientCookie 是（自动）cookie 处理的模块：[http](http://wwwsearch.sourceforge.net/ClientCookie) ://wwwsearch.sourceforge.net/ClientCookie ）

```
# I encode the data I'll be sending:
data = urllib.urlencode({'username': 'mandark', 'password': 'deedee'})

# And I send it and read the page:
page = ClientCookie.urlopen('http://www.forum.com/ucp.php?mode=login', data)
output = page.read() 
```

该脚本没有登录，而是似乎被重定向回同一个登录页面，要求它输入用户名和密码。我究竟做错了什么？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:54:20.483

您是否尝试过先获取登录页面？

我建议使用[Tamper Data](https://addons.mozilla.org/en-US/firefox/addon/966)来查看在您请求登录页面时发送的确切内容，然后使用 Web 浏览器从新开始正常登录，没有初始 cookie，以便您的脚本可以准确地复制它.

这是我在编写以下内容时使用的方法，从需要登录到 Invision Power Board 论坛的脚本中提取，使用 cookielib 和 urllib2 - 您可能会发现它作为参考很有用。

```
import cookielib
import logging
import sys
import urllib
import urllib2

cookies = cookielib.LWPCookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookies))
urllib2.install_opener(opener)
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows; U; Windows NT 5.0; en-GB; rv:1.8.1.12) Gecko/20080201 Firefox/2.0.0.12',
    'Accept': 'text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5',
    'Accept-Language': 'en-gb,en;q=0.5',
    'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.7',
}

# Fetch the login page to set initial cookies
urllib2.urlopen(urllib2.Request('http://www.rllmukforum.com/index.php?act=Login&CODE=00', None, headers))

# Login so we can access the Off Topic forum
login_headers = headers.copy()
login_headers.update({
    'Referer': 'http://www.rllmukforum.com/index.php?act=Login&CODE=00',
    'Content-Type': 'application/x-www-form-urlencoded',
})
html = urllib2.urlopen(urllib2.Request('http://www.rllmukforum.com/index.php?act=Login&CODE=01',
                                       urllib.urlencode({
                                           'referer': 'http://www.rllmukforum.com/index.php?',
                                           'UserName': RLLMUK_USERNAME,
                                           'PassWord': RLLMUK_PASSWORD,
                                       }),
                                       login_headers)).read()
if 'The following errors were found' in html:
    logging.error('RLLMUK login failed')
    logging.info(html)
    sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:33:43.993

我建议看一下[mechanize](http://wwwsearch.sourceforge.net/mechanize/) library；它专为此类任务而设计。这也比手动操作要容易得多。

# svn - 您如何将颠覆本地副本重新附加到不同的远程？

> ID：112770
> 
>         
> 
> 赞同：16
> 
>         
> 
> 时间：2008-09-22T01:31:03.627
> 
>         
> 
> 标签：svn

我们的 subversion 存储库已移至新主机，并且我们有连接到该主机的旧应用程序。我们不能使用旧名称为新服务器添加别名，我们如何将签出的客户端重新连接到新存储库？

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2008-09-22T08:37:48.127

例子：

```
svn switch --relocate \
    http://svn.example.com/path/to/repository/path/within/repository \
    http://svnnew.example.com/new/repository/path/within/repository 
```

要记住的一件事，假设您检查了项目“path/within/repository”，那么您必须转到**工作副本的根目录**，并执行上述命令。仅使用存储库根目录是不够的（如*svn switch --relocate* **http://svn.example.com/path/to/repository/** *[http://svnnew.example.com/new/repository/](http://svn.example.com/path/to/repository/)* *[）](http://svnnew.example.com/new/repository/)*，因为那行不通。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2008-09-22T01:32:36.680

查找[svn switch](http://svnbook.red-bean.com/en/1.0/re27.html)命令。特别是，该`--relocate`选项是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:05:53.590

SVN 命令行 - 见[svn 开关](http://svnbook.red-bean.com/en/1.5/svn.ref.svn.c.switch.html)

TortoiseSVN - 查看[重定位对话框](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-relocate.html)

# php - 可以使用多个/嵌套的 MySQLi 语句吗？

> ID：112775
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2008-09-22T01:32:47.290
> 
>         
> 
> 标签：php, mysql, mysqli

是否可以在前一个语句`MySQLi prepared statement`的`fetch()`调用中包含一个？如果没有，最好的解决方法是什么？

示例代码：

```
if($stmt = $link->prepare("SELECT item FROM data WHERE id = ?")) {
    $stmt->bind_param("i", $id);
    $stmt->execute();
    $stmt->bind_result($item);
    while( $stmt->fetch() ) {
        /* Other code here */
        $itemSummary = $item + $magic;
        if($stmt2 = $link->prepare("INSERT INTO summaries (itemID, summary) VALUES (?, ?)")) {
            $stmt2->bind_param("is", $itemID, $itemSummary);
            $stmt2->execute();
            $stmt2->close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2012-08-12T14:56:06.270

这是单连接方式：

```
if($stmt = $link->prepare("SELECT item FROM data WHERE id = ?")) {
    $stmt->bind_param("i", $id);
    $stmt->execute();
    $stmt->store_result(); // <-- this
    $stmt->bind_result($item);
    while( $stmt->fetch() ) {
        /* Other code here */
        $itemSummary = $item + $magic;
        if($stmt2 = $link->prepare("INSERT INTO summaries (itemID, summary) VALUES (?, ?)")) {
            $stmt2->bind_param("is", $itemID, $itemSummary);
            $stmt2->execute();
            $stmt2->store_result(); // <-- this
            /*DO WHATEVER WITH STMT2*/
            $stmt2->close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-11-04T17:18:42.130

或使用[`store_result`](http://php.net/manual/en/mysqli.store-result.php).

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T01:47:19.313

您应该能够做到这一点，尽管您必须启动第二个连接。

# database - 数据库设计中的冲突需求，具有两个相似功能的领域

> ID：112780
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T01:37:01.523
> 
>         
> 
> 标签：database, database-design, normalizing, database-relations

好的，所以我现在正在为“Box Items”制作一张表格。

现在，一个盒子项目，取决于它的用途/项目的状态，最终可能与“运输”盒子或“退货”盒子相关。

Box Item 可能有缺陷：如果是，则会在 Box Item 的行中设置一个标志 (IsDefective)，并且 Box Item 将被放入“Returns”框中（与其他物品一起退回给该供应商）。否则，Box Item 最终将被放入“Shipping”盒子（与其他要运送的物品一起）。（请注意，运输和退货箱有自己的表格：所有箱子都没有一个公用表格......尽管如果可能的话，我应该考虑这样做作为第三种可能性？）

也许我今天只是想不清楚，但我开始质疑在这种情况下应该怎么做。

我的直觉告诉我，我应该为每个可能的关系设置一个单独的字段，即使在任何给定时间只能发生其中一个关系，这将使 Box Items 的架构看起来像：

BoxItemID 描述 IsDefective ShippingBoxID ReturnBoxID 等...

这将使关系变得清晰，但似乎很浪费（因为任何时候都只会使用其中一个关系）。所以我想我可以只有一个 BoxID 字段，并根据 IsDefective 字段确定它指的是哪个 BoxID（运输或退货箱 ID）：

BoxItemID 描述 IsDefective BoxID 等...

这似乎不那么浪费，但不适合我。关系不明显。

所以，我把它交给你，Stackoverflow 的数据库专家。在这个情况下，你会怎么做？

编辑：谢谢大家的意见！它给了我很多思考。一方面，下次我开始这样的项目时，我将使用 ORM。=）两个，因为我现在不在，我会咬四个字节并使用两个字段。

再次感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T02:03:56.637

我用的是精神病毒液和马特兰特。

走多态路线（必须根据另一个字段的内容确定外键指向哪个表）将是一件痛苦的事情。编码约束可能很困难（我不确定大多数数据库是否会原生支持，我认为你必须使用触发器）。

物品会在桌子之间移动吗？坚持使用两张具有相同定义的表格，一张用于退货，一张用于运输，这可能是最简单的方法。如果您想坚持您首先提出的定义（使用两个单独的字段）是完全合理的。

“过早的优化是万恶之源”等等。虽然看起来很浪费，但请记住您存储的内容。由于它们是 ID，它们可能只是整数，可能是 4 个字节。每条记录浪费四个字节基本上没什么。事实上，由于填充将东西放在偶数地址或其他类似的东西上，将额外的字段放在那里可能是“免费的”。这完全取决于数据库设计。

除非你有充分的理由走多态路线（比如你在一个内存很小的嵌入式系统上，或者你必须通过一些非常慢的 9600bps 链接进行复制），否则你可能不值得为此头疼. 必须将所有这些特殊情况写入查询中会很烦人。

快速示例：在两个表之间进行连接，如果你想连接是基于 isDefective 标志是否设置将是一个痛苦。至少对我而言，仅能单独使用两列中的一列可能就足够省去麻烦了。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T01:43:29.963

你说的是多态关系。可以引用多个其他表的单个 ID。有几个框架支持这一点，但是，它（可能）对数据库完整性不利（这可能是一个完整的其他讨论，即您的数据库或应用程序是否应该保持引用完整性）。

那这个呢？

```
BoxItem:
BoxItemID, Description, IsDefective

Box:
BoxID, Description

BoxItemMap:
BoxID, BoxItemID, BoxItemType 
```

然后您可以将 BoxItemType 设为枚举或整数，您可以在其中将应用程序中的常量定义为“Return”或“Shipping”作为盒子的类型。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T01:49:37.063

我会考虑为盒子制作一个表格，盒子类型是盒子表的一列。这将简化关系并使查询框类型变得容易。所以盒子项目只有一个boxId的外键。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T08:46:57.153

我会使用 Hibernate 所谓[的 Table-per-subclass](http://www.hibernate.org/hib_docs/reference/en/html/inheritance.html#inheritance-tablepersubclass)，所以我的数据库最终会为 Boxes 提供 3 个表：`Box`、`ShippingBox`和`ReturnBox`. FK in`BoxItem`将指向`Box`。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T01:51:22.067

同意上面关于多态性的讨论，虽然它有可能被用得很差，但它仍然是一个可行的解决方案。

基本上，您有一个名为 box 的基表。然后你有另外两个表，装运箱和退货箱。这两个添加了对他们来说特别的任何额外字段。它们与具有 1:1 fk.Boz 基表的 box 相关，具有所有 box 类型的公共字段。

您将 BoxItem 与 box 表相关联。获得正确框类型的方法是执行基于键将子框与根框连接起来的查询。基盒和子盒中都有的记录属于该类型。

您只需要小心，就像提到的那样，当您创建正确完成的框类型时。但这就是测试的目的。添加它们的代码只需要编写一次。或者使用 ORM。

几乎所有的 ORM 都支持这种策略。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:12:55.850

我可能会选择：

```
BoxTable:
box_id, box_descrip, box_status_id ...
     1, Lovely Box, 1
     2, Borked box, 2
     3, Ugly Box, 3
     4, Flammable Box, 4

       BoxStatus:
       box_status_id, box_status_name, box_type_id, ....
                   1,Shippable, 1
                   2,Return, 2
                   3,Ugly, 2
                   4,Dangerous,3

                BoxType:
                box_type_id, box_type_name, ...
                          1, Shipping box, ...
                          2, Return box, ....
                          3, Hazmat box, ... 
```

这样，Box Status 定义了 box 类型，如果您以后需要扩展到更多的状态级别或 box 类型，它是灵活的。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:18:56.523

我只使用一个 BoxItems 表，其中包含 IsDefective、ShippingBoxID、与运输箱相关的字段、ReturnBoxID 和与退货箱相关的字段。对于每条记录，某些字段将始终为 NULL。

这是一个非常简单且不言而喻的设计，下一个开发人员不太可能被混淆。从理论上讲，这种设计效率低下，因为每行都保证有空字段。在实践中，无论如何，数据库往往对每一行都具有最小所需的存储大小，因此（除非字段数量很大）这种设计无论如何都尽可能高效，并且更容易编码。

# php - PHP性能考虑？

> ID：112786
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-22T01:41:42.183
> 
>         
> 
> 标签：php, performance, scalability

我正在建立一个`PHP`网站，但目前`PHP`我唯一使用的是某些页面上的六个左右。（我最终可能会使用一些数据库查询。）

与 static 相比，简单`include()`语句是否关注速度或缩放`HTML`？什么样的事情往往会导致网站陷入困境？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T01:45:33.903

当然 include() 比静态页面慢。但是，对于现代系统，您不太可能在很长一段时间内将其视为瓶颈——如果有的话。在我看来，使用的好处包括使您网站的公共部分保持最新而不是对性能的微小影响（在一个页面上有不同的导航，因为您忘记更新它会导致糟糕的用户体验，从而对您的网站/公司/任何）。

使用缓存也无济于事 - 缓存代码将比仅包含（）慢。缓存对您有益的唯一时间是，如果您正在执行计算密集型计算（非常罕见，在网页上），或者从数据库中获取数据。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T07:36:47.773

听起来您正在参与一些过早的优化。如果未构建应用程序，虽然需要注意性能问题，但您的主要关注点应该是编写应用程序。

包括是生活中的事实。不用担心数量，担心保持代码井井有条（PEAR 文件夹结构是一个可爱的东西，如果您不知道我在说什么，请查看 Zend Framework 类文件的结构）。

专注于以合理的抽象量编写应用程序。将所有数据库调用分组到一个类（或多个类）中，以便最大限度地减少代码重复（KISS 原则和所有），当需要重构和优化查询时，它们位于中心位置。还要开始进行一些单元测试以防止回归。

一旦应用程序启动并运行，不要问我们什么更快或更好，因为这取决于每个应用程序你的瓶颈是什么。事实证明，即使你有很多包含，你的循环也会占用你的时间，或者其他什么。使用[XDebug](http://www.xdebug.org/)并[在代码](http://devzone.zend.com/article/2899-Profiling-PHP-Applications-With-xdebug)启动并运行后对其进行分析。查找占用过多时间的代码段，然后进行重构。如果你现在过于关注 include 和 include_once 之间的性能影响，那么当同步运行的 curl 请求正在吃你的早餐时，你最终会陷入困境。

尽管与此同时，最好的建议是查看 php.net 手册，并确保是否有内置函数可以做您想做的事情，请使用它！PHP 的基于 C 的扩展总是比您可以编写的任何 PHP 代码更快，并且您会惊讶于您尝试做的很多事情已经完成。

但同样，我不能强调这一点，**过早的优化是不好的！！！**只需以良好的抽象级别启动您的应用程序，对其进行分析，然后修复实际占用您时间的内容，而不是修复您认为可能占用您时间的内容。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T02:01:21.340

严格来说，直接的 HTML 总是比服务器端方法更快，因为服务器不需要对代码进行任何解释。

要回答更大的问题，有**很多**事情会导致您的网站陷入困境；当您的代码与 PHP 相比时，没有具体的阈值。（请记住，雅虎的许多网站都是 PHP 驱动的，所以不要认为 PHP 无法扩展）。

我注意到的一件事是，最慢的 PHP 驱动站点包含的内容超出了显示特定页面所需的内容。OSCommerce (oscommerce.com) 是最受欢迎的 PHP 驱动的购物车之一。但是，它有一个坏习惯，即在每个页面上都包含所有核心功能（以防万一）。因此，即使您不需要显示“信息框”，也会加载该功能。另一方面，有许多 PHP 框架（例如 CakePHP、Symfony 和 CodeIgniter）采用“按需加载”的方法。

我会建议以下几点：

1.  不要包含超出特定页面所需的功能

2.  保持基本功能分开（尽可能使用 MVC 方法）

3.  如果您认为您将嵌套包含，请使用 require_once 而不是 include（例如，页面 A 包含包含文件 C 的文件 B）。这将避免多次包含同一个文件。如果找不到文件，它也会停止该过程；从而帮助您的故障排除过程；）

4.  如果可能，将静态页面缓存为 HTML - 避免在事情没有变化时重新解析

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T01:48:51.433

不包括很好，​​没有什么可担心的。

您可能想考虑在某个时候稍微调整一下您的缓存标头，但除非您获得重大点击，否则应该没问题。假设这都是静态数据，您甚至可以考虑将整个站点转换为静态 HTML（最简单的方法：编写一个脚本，通过网络服务器抓取每个页面并将其转储到匹配的 dir 结构中）

大多数 Web 应用程序都受到其数据库速度的限制（或者无论它们的外部存储是什么，但 9/10 倍将是数据库），应用程序代码很少引起关注，而且听起来不像你重新做任何你需要担心的事情。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:59:18.607

在您对如何为您的网站构建代码做出任何长期决定之前，我建议您阅读一下[模型-视图-控制器](http://en.wikipedia.org/wiki/Model_view_controller)设计模式。虽然还有其他一些，但这个似乎在 Web 开发圈中获得了很大的进展，并且肯定会存在一段时间。在对哪种设计最适合您的需求做出任何最终决定之前，您可能想看看 Martin Fowler 在他[的企业应用程序架构模式中建议的其他一些设计模式。](http://martinfowler.com/books.html#eaa)

根据项目的大小和范围，您可能希望使用现成的 PHP 框架，例如 Zend Framework 或 PHP On Trax，或者您可能决定构建自己的解决方案。

特别是关于 HTML 内容的呈现，我强烈建议您使用某种形式的模板，以使您的业务逻辑与显示逻辑分开。我发现在我的开发过程中，这一简单的规则在需要更改其中一项时为我节省了数小时的工作时间。我使用过 http://www.smarty.net/">Smarty，我知道大多数框架要么有自己的模板系统，要么提供插件架构，让您可以使用自己喜欢的方法。当您查看可能的解决方案时，我建议您寻找一种能够创建缓存版本的解决方案。

最后，如果您担心后端的速度，那么我强烈建议您研究如何最大限度地减少对后端数据存储（无论是数据库还是系统文件）的调用。尽量避免一次加载和呈现过多的内容（例如存储在包含数百条记录的表中的大型报告）。如果可能，请寻找使用户界面一次加载较小数据位的方法。如果您特别关心 html 内容及其 CSS、Javascript 或其他依赖项的实际加载时间，我建议您查看Yahoo! 人员的[这些建议。](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:39:01.637

添加 JayTee 提到的内容 - 在需要时加载功能。如果您没有使用任何自动执行此操作的框架，您可能需要查看 PHP5 中引入的 __autoload() 功能 - 基本上，您自己的逻辑可以在您实例化特定类时调用，如果它还没有加载。这使您有机会包含（）按需定义该类的文件。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T04:33:40.507

加快应用程序速度的最重要的事情是使用 Opcode 缓存，例如[APC](http://php.net/apc)。[维基百科](http://en.wikipedia.org/wiki/PHP_accelerator)上有一个很好的列表和描述。

就简单的包含而言，请注意不要在每个请求中包含太多文件，因为磁盘 I/O 会导致您的应用程序无法很好地扩展。几十个包含应该没问题，但通常最好将最常包含的文件打包到一个脚本中，这样您就只有一个包含。在这里和那里不需要加载一些类的内存成本将比包含数百个较小文件的磁盘 I/O 成本要好。

# objective-c - 如何在 Xcode 调试器中查看 NSDictionary 变量的内容？

> ID：112796
> 
>         
> 
> 赞同：85
> 
>         
> 
> 时间：2008-09-22T01:45:38.663
> 
>         
> 
> 标签：objective-c, cocoa, xcode, debugging

有没有办法通过 Xcode 调试器查看 NSDictionary 变量的键/值对？这是在变量窗口中完全展开时的信息范围：

```
Variable  Value      Summary
jsonDict  0x45c540   4 key/value pairs
 NSObject {...}
  isa     0xa06e0720 
```

我期待它向我展示字典的每个元素（类似于数组变量）。  

* * *

## 回答 #1

> 赞同：140
> 
>             
> 
> 时间：2008-09-22T01:51:12.440

在 gdb 窗口中，您可以使用`po`来检查对象。

给定：

```
NSMutableDictionary* dict = [[NSMutableDictionary alloc] init];
[dict setObject:@"foo" forKey:@"bar"];
[dict setObject:@"fiz" forKey:@"buz"]; 
```

添加对象后设置断点，您可以检查字典中的内容

```
(gdb) po dict
{
  bar = foo;
  buz = fiz;
} 
```

当然，这些都是`NSString`打印效果很好的对象。YMMV 与其他复杂对象。

* * *

## 回答 #2

> 赞同：30
> 
>             
> 
> 时间：2008-09-22T09:55:28.720

您可以右键单击任何对象（ObjC 或 Core Foundation）变量并选择“Print Description to Console”（也在运行->变量视图中）。这将打印对象`-debugDescription`方法的结果，默认情况下调用`-description`. 不幸的是，`NSDictionary`覆盖它以产生一堆您通常不关心的内部数据，因此在这种特定情况下，craigb 的解决方案更好。

显示的键和值也使用`-description`，因此，如果您想要有关集合和其他地方的对象的有用信息，`-description`则必须覆盖。我通常按​​照以下方式实现它，以匹配默认`NSObject`实现的格式：

```
-(NSString *) 描述
{
    return [NSString stringWithFormat:@"<%@ %p>{foo: %@}", [self class], self, [self foo]];
}
```

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2012-06-14T09:07:48.397

您可以使用 CFShow()

```
NSMutableDictionary* dict = [[NSMutableDictionary alloc] init];
[dict setObject:@"foo" forKey:@"bar"];
[dict setObject:@"fiz" forKey:@"buz"];
CFShow(dict); 
```

在输出中你会看到

```
{
  bar = foo;
  buz = fiz;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2013-04-19T22:06:15.173

XCode 4.6 添加了以下可能对您有帮助的功能

```
The elements of NSArray and NSDictionary objects can now be inspected in the Xcode debugger 
```

现在您可以检查这些对象类型，而无需在控制台中打印整个对象。享受！

来源：http: [//developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_6.html](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_6.html)

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2013-11-26T04:48:06.087

单击您的字典，然后单击小“i”图标，它应该可以完成工作:-)
![Xcode5，查看一个dict的值](https://i.stack.imgur.com/CnkOY.png)

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2019-03-19T21:00:36.200

如果您想在现代 XCode 中的断点操作中打印这些（是的，我比原始帖子晚了 10 年！）在“日志消息”操作中使用以下断点表达式：

@myDictionary.description@

下面是我的断点操作的屏幕截图，其中变量 event 是 NSString，变量 contextData 是我正在记录以下内容的 NSDictionary
 [![](https://i.stack.imgur.com/BXtPg.png)](https://i.stack.imgur.com/BXtPg.png)：：

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2012-12-19T13:56:41.453

您也可以使用[NSLog](http://cocoadev.com/wiki/NSLog)。

您也可以进入调试区域或 xcode，然后找出`All Variables, Registers, Globals and Statics`然后选择您的变量。右键单击它。然后选择`Print description of "...."`

希望能帮助到你！

# c - 对 GLib 友好的 MD5 例程？

> ID：112802
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2008-09-22T01:48:27.500
> 
>         
> 
> 标签：c, linux, glib

有谁知道易于与 GLib 一起使用的 MD5/SHA1/etc 例程（即您可以给它一个 GIOChannel 等）？

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2008-09-22T02:26:08.003

除非您有充分*的*理由，否则请使用 glib 的内置 MD5、SHA1 和 SHA256 实现与[`GChecksum`](http://developer.gnome.org/glib/unstable/glib-Data-Checksums.html#GChecksum). 它没有从 IO 流构造校验和的内置函数，但是您可以在 10 行中编写一个简单的，但无论如何您都需要自己编写一个复杂的。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T02:19:17.583

你通常必须自己做图书馆胶水的东西......

```
void get_channel_md5( GIOChannel* channel, unsigned char output[16] )
{
    md5_context ctx;

    gint64 fileSize = <get file size somehow?>;
    gint64 filePos = 0ll;

    gsize bufferSize = g_io_channel_get_buffer_size( channel );
    void* buffer = malloc( bufferSize );

    md5_starts( &ctx );

    // hash buffer at a time: 
    while ( filePos < fileSize )
    {
        gint64 size = fileSize - filePos;
        if ( size > bufferSize )
            size = bufferSize;

        g_io_channel_read( channel, buffer );
        md5_update( &ctx, buffer, (int)size );

        filePos += bufferSize;
    }

    free( buffer );

    md5_finish( &ctx, output );
} 
```

# oracle - 在 Oracle Forms / OC4J 中访问 URL 参数

> ID：112812
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-22T01:52:20.987
> 
>         
> 
> 标签：oracle, forms, url, parameters, oracleforms

如何访问通过 URL 传递到 Oracle 表单的参数。例如给定网址：

> [http://example.com/forms90/f90servlet?config=cust&form=](http://example.com/forms90/f90servlet?config=cust&form=) 'a_form'&p1=something&p2=else

这将使用 'cust' 配置启动 'a_form' 表单，但我无法工作如何（或者即使可能）访问 p1（值为 'something'） p2（值为 'else'）

有谁知道我该怎么做？（或者即使是/不可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T09:35:47.643

在 Forms 中，您可以引用参数 p1 和 p2，如下所示：

*   :参数.p1

*   :参数.p2

例如

```
if :PARAMETER.p1 = 'something' then
   do_something;
end if; 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T23:30:31.880

谢谢托尼

这是问题的一部分。

我最终在 oracle.com 上找到的另一个需要的部分是 url 结构。在所有 forms90 参数（配置等）之后，您需要提供一个“otherparams”参数，将您的参数作为参数提供给它。（由“+”分隔的参数：例如

> [http://server.com/forms90/f90servlet?config=test&otherparams=param1=something+param2=else](http://server.com/forms90/f90servlet?config=test&otherparams=param1=something+param2=else)

谢谢

# asp.net - 从 asp.net 页面查看器 Web 部件显示当前经过身份验证的 Sharepoint 用户

> ID：112818
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2008-09-22T01:54:18.720
> 
>         
> 
> 标签：asp.net, sharepoint, authentication, web-parts

我正在创建一个独立的 asp.net 页面，该页面需要使用页面查看器 Web 部件嵌入到共享点站点中。asp.net 页面发布到不同端口上的同一台服务器，为我提供了要嵌入的 URL。

要求是，在使用 Sharepoint 身份验证对用户进行身份验证后，他们导航到包含 asp.net Web 部件的页面以获取更多选项。  

我需要从这个 asp.net 页面做的是查询 Sharepoint 以获取当前经过身份验证的用户名，然后从 asp.net 代码的页面上显示它。  

当我从 VS 调试应用程序时，这一切都很好，但是当通过 Sharepoint 发布和显示时，我总是得到 NULL 作为用户。  

任何有关使其发挥作用的最佳方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2008-09-22T08:44:49.997

如果要从 SharePoint 上下文中检索当前经过身份验证的用户，则需要保留在 SharePoint 上下文中。这意味着在 SharePoint 中托管您的自定义 Web 应用程序（请参阅[http://msdn.microsoft.com/en-us/library/cc297200.aspx](http://msdn.microsoft.com/en-us/library/cc297200.aspx "在 Windows SharePoint Services 3.0 _layouts 文件夹中部署 ASP.NET Web 应用程序")）。然后从您的自定义应用程序中引用 Microsoft.SharePoint 并使用 SPContext 对象来检索用户名。例如：

```
SPContext.Current.Web.CurrentUser.LoginName 
```

您仍然可以使用页面查看器 Web 部件来引用网站的 URL，现在位于 SharePoint 上下文中。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2008-09-25T05:09:30.987

非常感谢您的回答！

事实证明，只要 asp.net 页面使用与 Sharepoint 站点相同的 URL 和端口，身份验证就可以跨两个站点进行。

解决方案是使用共享点站点内的虚拟目录并在那里安装 asp.net 页面。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T01:59:41.000

当它在调试中工作时，是否在 SharePoint 中使用？

就身份验证而言，您的页面和 Sharepoint 站点也可能位于不同的服务器上——为了获取信息，如果可以的话，您可能需要通过 Web 部件中的 QueryString 传递它——或者您可能需要制作您自己的 webpart 来执行此操作（只需将 IFRAME 放入部分中，并将 src 设置为您的页面，并使用 QueryString 传递用户名）。

但是，如果您将名称用于任何内容，这似乎确实是一个安全问题——如果您只是显示它，那么它可能没问题。

如果您确实需要进行身份验证，您可能需要将身份验证添加到托管您的独立页面的站点的 web.config 中。

编辑：我认为将页面放在与 SharePoint 相同的端口和服务器上会更好。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T04:55:29.017

我怀疑您将很难专门向 SharePoint 查询当前经过身份验证的用户名。我想不出一种方法可以像您描述的那样从单独的 Web 应用程序轻松访问 SharePoint 上下文。

我不知道您使用的是哪种身份验证方案，但您可能需要考虑使用 Kerberos，因为我发现它可以通过允许委派和将凭据从应用程序传递到应用程序来使这些场景变得更容易或服务器到服务器。

# c++ - C++程序崩溃时如何获取堆栈跟踪？（使用 msvc8/2005）

> ID：112831
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2008-09-22T02:01:15.520
> 
>         
> 
> 标签：c++, debugging, visual-studio-2005, stack-trace

有时我的 c++ 程序在调试模式下崩溃，我得到的是一个消息框，说某些内部内存管理例程中的断言失败（访问未分配的内存等）。但我不知道从哪里调用它，因为我没有得到任何堆栈跟踪。如何获取堆栈跟踪或至少查看它在我的代码中失败的位置（而不是库/内置例程）？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2008-09-22T02:02:31.243

如果发生崩溃，无论您有调试版本还是发布版本，都可以获得有关崩溃发生位置的信息。即使您在没有源代码的计算机上，您也可以看到调用堆栈。

为此，您需要使用通过 EXE 构建的 PDB 文件。将 PDB 文件放在与崩溃的 EXE 相同的目录中。注意：即使您有相同的源代码，构建两次并使用第一个 EXE 和第二个 PDB 也不起作用。您需要使用与您的 EXE 一起构建的确切 PDB。

然后将调试器附加到崩溃的进程。示例：windbg 或 VS。

然后只需检查您的调用堆栈，同时打开您的线程窗口。您必须选择崩溃的线程并检查该线程的调用堆栈。每个线程都有不同的调用堆栈。

如果您已经连接了 VS 调试器，它将自动转到导致您崩溃的源代码。

如果崩溃发生在您使用的没有 PDB 的库中。你无能为力。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T02:05:56.523

如果您在带有 VS 的机器上运行调试版本，它应该会提供启动它并让您查看堆栈跟踪。

问题是真正的问题不再在调用堆栈上。如果您两次释放指针，则可能会在与程序无关的其他地方导致此问题（下一次访问堆数据结构时）

我写了这篇博客，介绍了一些让问题出现在调用堆栈中的技巧，这样你就可以弄清楚发生了什么。

[http://www.atalasoft.com/cs/blogs/loufranco/archive/2007/02/06/6-_2200_Pointers_2200_-on-Debugging-Unmanaged-Code.aspx](http://www.atalasoft.com/cs/blogs/loufranco/archive/2007/02/06/6-_2200_Pointers_2200_-on-Debugging-Unmanaged-Code.aspx)

最好的提示是使用 gflags 实用程序使指针问题立即引起问题。  

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T06:31:47.587

您可以通过为未捕获的异常设置处理程序来触发小型转储。这是[一篇](http://www.codeproject.com/KB/debug/postmortemdebug_standalone1.aspx)解释所有关于小型转储的文章

Google actually implemented their own open source crash handler called [BreakPad](http://code.google.com/p/google-breakpad/wiki/ClientDesign), which also mozilla use I think (that's if you want something more serious - a rich and robust crash handler).

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:03:23.643

如果我没记错的话，那个消息框应该有一个按钮，上面写着“重试”。这应该在断言发生的地方中断程序（在调试器中）。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:27:05.880

[CrashFinder](http://www.wintellect.com/CS/blogs/jrobbins/archive/2006/04/19/crashfinder-returns.aspx)可以根据 DLL 和报告的异常地址帮助您定位异常的位置。

您可以使用此代码并将其集成到您的应用程序中，以便在出现未捕获的异常时自动生成堆栈跟踪。这通常使用`__try{} __except{}`或调用[SetUnhandledExceptionFilter](http://msdn.microsoft.com/en-us/library/ms680634.aspx)来执行，它允许您指定对所有未处理异常的回调。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T12:24:38.127

You can also have a post-mortem debugger installed on the client system.  This is a decent, general way to get information when you do not have dump creation built into your application (maybe for an older version for which you must still get information).

Dr. Watson on Windows can be installed by running: `drwtsn32 -i`  Running `drwtsn32` (without any options) will bring up the configuration dialog.  This will allow the creation of crash dump files, which you can later analyze with WinDbg or something similar.

* * *

## 回答 #7

> 赞同：-1
> 
>             
> 
> 时间：2014-10-23T13:14:07.790

You can use [Poppy](https://github.com/orling/Poppy) for this. You just sprinkle some macros across your code and it will gather the stack trace, together with the actual parameter values, local variables, loop counters, etc. It is very lightweight so it can be left in the release build to gather this information from crashes on end-user machines

# git - 如何解决与 git-svn 的冲突？

> ID：112839
> 
>         
> 
> 赞同：54
> 
>         
> 
> 时间：2008-09-22T02:03:55.593
> 
>         
> 
> 标签：git, svn, merge, conflict

执行 a 时解决冲突的最佳方法是什么`git svn rebase`，并且您所在的 git 分支变为“（无分支）”？

* * *

## 回答 #1

> 赞同：90
> 
>             
> 
> 时间：2008-09-22T02:11:01.660

在执行 a`git svn rebase`时，如果您有合并冲突，请记住以下几点：

**1）**如果在执行变基时发生任何不好的事情，你最终会在一个`(no-branch)`分支上。

**2)**如果你运行`git status`，你会`.dotest`在你的工作目录中看到一个文件。这是可以安全忽略的。

**3）**如果要中止变基，请使用以下命令。¹

```
git rebase --abort 
```

**4）**如果您有合并冲突：

1.  手动编辑文件以解决冲突

2.  暂存任何更改`git add [file]`

3.  ^(用2)继续变基`git rebase --continue` ^(*   如果 git 询问：“你忘记打电话了`git add`吗？”，然后编辑将冲突变成了无操作更改³。继续`git rebase --skip`) 

您可能必须重复此过程，直到变基完成。您可以`git rebase --abort`随时取消并放弃变基。

* * *

[1：没有`--abort`选项`git svn rebase`。]

[2：没有`--continue`选项`git svn rebase`。]

[3：这很奇怪，但是文件处于git认为在那个特定补丁之后它们是相同的状态。解决方案是“跳过”变基上的补丁。]

* * *

## 回答 #2

> 赞同：27
> 
>             
> 
> 时间：2008-09-22T02:08:32.320

您可以用`git mergetool`通常的方式查看和编辑冲突。一旦您确定冲突已解决，请`git rebase --continue`继续 rebase，或者如果您不想包含该修订，请执行`git rebase --skip`

# java - Java GUI 编辑器为快速开发和可维护性提供了什么（即 Eclipse/SWT 和 Netbeans/Matisse）？

> ID：112854
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T02:08:35.097
> 
>         
> 
> 标签：java, eclipse, user-interface, netbeans

在 Eclipse/SWT 或 Netbeans/Matisse 之间，Java GUI 编辑器在快速开发和可维护性方面为您提供了什么？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-09-24T15:30:53.640

您实际上是在问两个不同的问题：SWT 与 Swing，以及 Eclipse GUI 编辑器与 Netbeans GUI 编辑器 (Matisse)。

首先，SWT 和 Swing 之间的区别在于它们是两个根本不同的 GUI 库。这类似于询问 Tk 和 Win32 或 Java Swing 与 .NET Forms 之间的区别（并不是说 SWT 是 .NET）。那里有很多讨论 SWT 与 Swing 的讨论——我对 SWT 了解得不够多，无法总结它们的区别。

首先，让我说我的偏见是支持 Netbeans，而且我已经花了 10 年的时间来学习从 Forte 时代开始的 IDE。

就 GUI 编辑器而言，Eclipse 和 Netbeans 具有功能相似的产品，但以非常不同的方式实现代码。

我的观察是，Matisse 的行为、功能和生成的代码让人想起 Visual Studio .NET 代码。某些对象（例如 JTable）有明确的初始化部分和自定义行为。您可以“自定义”一个对象并通过 GUI 编辑器非常轻松地添加您自己的任意代码，用于从初始化到设置单个属性的所有操作。对于事件处理，它默认通过使用匿名内部类并调用独立方法来复制 .NET 中的“委托”。GUI 编辑器本身提供对表单对象模型的详细访问，并具有丰富的自定义设置。您还可以自由地将非 GUI bean 放入表单以供 GUI 组件使用，例如模型（tablemodel、listmodel 等）、JPA 相关对象、Worker 等。过去使用手工编码的 SWING 需要一周时间才能完成，而 Matisse 则需要一天时间（尽管您必须真正学习 Matisse 才能做到这一点）。如果您多年来一直在手动编码摇摆，那么重新学习使用 GUI 编辑器***实际上***，这将是一个漫长而艰难的课程。

代码在 Matisse 内部高度可维护；它不打算在 Matisse 之外进行编辑，但如果需要，代码适合编辑（我认识的许多人使用 Netbeans GUI，然后将源代码复制到 Eclipse 中）。

Eclipse GUI 编辑器是一个非常不同的生物。GUI 编辑器在整体功能方面大致相同，但我发现它们不够完善。布局能力大致相同，尽管有时错误不太宽容。一些自定义要求我转到源文件并直接编辑文件，而不是通过 GUI 访问代码自定义。生成的代码与马蒂斯非常不同。GUI 组件通过“getter”添加和初始化，分散在整个文件中；这很好，因为每个组件都被隔离/分组到一个函数中，但是当您需要诊断组件初始化之间的不良交互时很麻烦。事件处理程序也是如此——与 matisse 非常不同。

Eclipse 也没有为我编辑/破坏/篡改生成的 GUI 文件提供任何保护，因为 Netbeans 的保护几乎令人讨厌。就可维护性而言，Eclipse 代码可能更接近于人类生成 Java 代码的方式……就个人而言，我发现它生成的代码更难维护，但我从第一次开始就一直在研究 Matisse 生成的代码beta 所以我对这个问题的看法并不客观。

Netbeans 还能够使用相同的编辑器来构建 Swing 框架应用程序、Netbeans RCP 等……我不确定 Eclipse 是否也这样做。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:09:26.530

这绝对是主观的——我们同时使用 Eclipse 和 Netbeans。我认为这归结为偏好问题。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:17:38.647

没有人能告诉你哪个更好。这完全取决于每个开发人员。这是“Eclipse vs Netbeans”的谷歌搜索，您可以查看其他人已经倾注了他们的想法的一些优点和缺点。[Eclipse 与 NetBeans](http://www.google.com/search?q=eclipse+vs+netbeans&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:43:33.377

我认为您应该更多地研究您是否希望生成的应用程序是 SWT 或基于 Swing 的。使用哪个 IDE 应该是最不重要的因素。

我个人是 Eclipse 用户，但我听说过有关 Matisse 的好消息，所以如果我必须构建一个 Swing UI，我可能会考虑它。顺便说一句，如果您购买 MyEclipse，它集成了 Matisse。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2008-10-21T03:52:55.107

有些人可能会争辩说，您想要使用的最终产品实际上取决于它的易用性 - 这在问题中有所暗示。

本文建议 Netbeans/Matisse 编辑器更易于使用 - 因此您应该在您的项目中使用它。 
[http://cld.blog-city.com/netbeans_matisse_versus_eclipses_visual_editor__no_contest.htm](http://cld.blog-city.com/netbeans_matisse_versus_eclipses_visual_editor__no_contest.htm)

# c++ - Qt：槽返回值的含义？

> ID：112861
> 
>         
> 
> 赞同：26
> 
>         
> 
> 时间：2008-09-22T02:12:18.943
> 
>         
> 
> 标签：c++, qt, signals-slots

根据文档，插槽的返回值没有任何意义。

然而，在生成的 moc 代码中，我看到如果一个插槽返回一个值，则该值用于某事。知道它有什么作用吗？

* * *

这是我正在谈论的一个例子。这取自 moc 生成的代码。'message' 是一个不返回任何内容的插槽，'selectPart' 被声明为返回 int。

```
case 7: message((*reinterpret_cast< const QString(*)>(_a[1])),(*reinterpret_cast< int(*)>(_a[2]))); break;
case 8: { int _r = selectPart((*reinterpret_cast< AppObject*(*)>(_a[1])),(*reinterpret_cast< int(*)>(_a[2])));
    if (_a[0]) *reinterpret_cast< int*>(_a[0]) = _r; }  break; 
```

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2008-09-30T17:25:34.083

仅当您想将插槽作为普通成员函数调用时，返回值才有用：

```
`class MyClass : public QObject {
    Q_OBJECT
public:
    MyClass(QObject* parent);
    void Something();
public Q_SLOTS:
    int Other();
};

void MyClass::Something() {
    int res = this->Other();
    ...
}` 
```

 `**编辑：**似乎这不是可以使用返回值的唯一方法，QMetaObject::invokeMethod 方法可用于调用插槽并获取返回值。虽然它看起来有点复杂。

* * *

## 回答 #2

> 赞同：12
> 
>             
> 
> 时间：2008-09-22T03:00:37.797

查看 Qt 源代码，似乎当从 QMetaObject::invokeMethod 调用插槽时，可以指定返回类型并获得返回值。（查看 Qt 帮助中的 invokeMethod ）

我找不到很多实际在 Qt 源代码中使用的示例。我发现的一个是

```
bool QAbstractItemDelegate::helpEvent 
```

这是一个具有返回类型的插槽，并从

```
QAbstractItemView::viewportEvent 
```

使用调用方法。

我认为只有在直接调用函数时（当它是普通的 C++ 函数时）或使用 invokeMethod 时，才能使用插槽的返回值。我认为这实际上是用于内部 Qt 功能，而不是用于使用 Qt 的程序中的正常使用。

编辑：对于示例案例：

```
case 8: { int _r = selectPart((*reinterpret_cast< AppObject*(*)>(_a[1])), *reinterpret_cast< int(*)>(_a[2])));
if (_a[0]) *reinterpret_cast< int*>(_a[0]) = _r; }  break; 
```

向量 _a 是传递给 qt_metacall 的参数列表。这是由 QMetaObject::invokeMethod 传递的。因此 moc 生成代码中的返回值被保存并传回给调用者。因此，对于正常的信号槽交互，返回值根本不用于任何事情。但是，存在这种机制，因此如果通过 invokeMethod 调用插槽，则可以访问来自插槽的返回值。

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2010-02-01T14:59:48.427

在处理动态语言如 qtscript JavaScript QtPython 等时非常有用。使用这种语言/绑定，您可以使用 MetaObject 提供的接口动态地使用 C++ QObject。你可能知道，只有信号和槽被 moc 解析并生成 MetaObject 描述。因此，如果您使用来自 javascript 绑定的 C++ QObject，您将能够只调用插槽并且您需要返回值。通常，动态语言的 Qt 绑定为访问普通方法提供了一些便利，但这个过程肯定更加棘手。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2011-01-07T13:31:30.073

所有插槽都暴露在 QMetaObject 中，可以通过反射接口访问对象。

例如，[QMetaObject::invokeMethod()](http://doc.qt.io/qt-4.8/qmetaobject.html#invokeMethod)接受一个`QGenericReturnArgument`参数。所以我相信这不是为了显式使用插槽，而是为了动态调用一般的方法。（除了将方法放入槽之外，还有其他方法可以将方法暴露给 QMetaObject。）

例如，该`invokeMethod`函数被 QML 和 Javascript 等各种动态语言用来调用`QObject:s`. （还有一个名为[PythonQt](http://pythonqt.sourceforge.net/)的 Python-Qt 桥，它使用它。不要与[PyQt](http://wiki.python.org/moin/PyQt4)混淆，它是一个完整的包装器。）

当在 Qt 应用程序中跨线程进行同步调用时使用返回值（通过 invokeMethod 支持并将连接类型设置为`Qt::BlockingQueuedConnection`，它具有以下文档：

> 与 QueuedConnection 相同，除了当前线程阻塞，直到槽返回。这种连接类型应该只用于发射器和接收器在不同线程中的情况。注意：违反此规则可能会导致您的应用程序死锁。

# sql-server - 分层组的数据库架构

> ID：112866
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2008-09-22T02:17:24.983
> 
>         
> 
> 标签：sql-server, database, database-design

我正在为用作更大系统基础的组层次结构进行数据库设计。每个组可以包含其他组，也可以包含“设备”作为叶对象（设备下方没有任何内容）。

正在使用的数据库是 MS SQL 2005。（虽然在 MS SQL 2000 中工作将是一个好处；不幸的是，需要 MS SQL 2008 的解决方案目前不可行）。

有不同类型的组，这些组需要是动态的，并且用户可以在运行时定义。例如，组类型可能是“客户”、“帐户”、“城市”或“建筑物”、“楼层”，并且每种类型将具有一组不同的属性，可由用户定义。还将应用业务规则-例如，“楼层”只能包含在“建筑物”组下，并且再次，这些可以在运行时定义。

许多应用程序功能来自基于这些组运行报告，因此需要一种相对快速的方法来获取某个组（和所有子组）中包含的所有设备的列表。

[使用修改的预排序树遍历](http://www.sitepoint.com/article/hierarchical-data-database/2/)技术存储组的优点是速度快，但缺点是相当复杂和脆弱 - 如果外部用户/应用程序修改数据库，则有可能完全损坏。我们还实现了一个 ORM 层，这种方法似乎在大多数 ORM 库中使用关系变得复杂。

使用[公用表表达式](http://msdn.microsoft.com/en-us/magazine/cc163346.aspx)和“标准”id/parentid 组关系似乎是避免运行多个递归查询的有效方法。这种方法有什么缺点吗？

至于属性，存储它们的最佳方式是什么？一张又长又窄的桌子，与小组有关？是否应该将通用属性（例如“名称”）存储在组表中，而不是属性表中（很多时候，名称将是显示所需的全部内容）？

使用这种方法是否会出现性能问题（假设在合理的硬件上（例如四核 Xeon 2 Ghz、4GB ram）上平均有 2000 个组，每个组平均有 6 个属性，平均有 10 个并发用户，折扣任何其他过程）？

随意提出与我在这里概述的完全不同的架构。我只是想说明我关心的问题。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T02:26:12.963

我建议您实际上构建最容易维护的方式（“标准”父/子设置）并至少在其上运行一些基本基准。

您会惊讶于数据库引擎可以通过正确的索引来做什么，尤其是当您的数据集可以放入内存时。

假设每组 6 个属性、2000 个组和 30 个字节/属性，那么您说的是 360KB*expected items/group——图 400KB。如果您希望每个组有 1000 个项目，那么您只会查看 400MB 的数据——这将毫无问题地放入内存中，并且当所有数据都在内存中时，数据库的连接**速度很快**。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T12:10:37.227

公用表表达式将让您获得具有父子关系的组列表。  [这](https://stackoverflow.com/questions/69923/stored-procedures-reverse-engineering#93967)是一个将 CTE 用于不同应用程序的存储过程示例。它相当有效，但请注意以下警告：

1.  如果一个部件在层次结构中出现多次，它将在每个位置进行报告。您可能需要对结果进行后处理。

2.  CTE 有点迟钝，并且提供有限的范围来过滤查询中的结果 - CTE 可能不会在 select 语句中出现多次。

Oracle 的 CONNECT BY 更加灵活，因为它不像 CTE 那样对查询结构施加几乎那么多的限制，但是如果您使用的是 SQL Server，这将不是一个选项。

如果您需要对中间结果做一些聪明的事情，那么编写一个使用 CTE 将原始查询放入临时表并从那里处理的存储过程。SELECT INTO 将减少由此产生的流量。结果表将在缓存中，因此对它的操作将相当快。

一些可能的物理优化可能会有所帮助：

*   父节点上的聚集索引，以便为父节点取出子节点​​使用更少的 I/O。

*   大量 RAM 和（取决于 BOM 表的大小）具有更多 RAM 的 64 位服务器，以便主 BOM 表可以缓存在核心中。在 32 位操作系统上，/3G 引导开关是您的朋友，对于数据库服务器没有真正的缺点

*   DBCC PINTABLE 可以帮助强制数据库管理器将表保存在高速缓存中。

Parent-Attribute Type-Attribute 编码表不能很好地与 CTE 配合使用，因为如果包含属性表，您的行数将出现组合爆炸。这将排除查询中过滤属性的任何业务逻辑。将属性直接存储在 BOM 表条目上会更好。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T13:10:55.520

Pre-order Tree Traversal 非常方便。您可以通过使用触发器使遍历数保持最新来使其健壮。  

我使用的一种类似技术是保留一个单独的 (ancestor_id, descendant_id) 表，其中列出了所有祖先和后代。这几乎与预购遍历数一样好。  

使用单独的表很方便，因为即使它引入了额外的连接，它确实消除了单独表的复杂性。  

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T17:05:08.967

修改后的预购本质上是 Joe Celko 的 Nested Sets 方法。他的书“树和层次结构...”涵盖了邻接表和 NS，并描述了它们各自的优缺点。通过适当的索引，邻接表的 CTE 可以获得最平衡的性能。如果您主要阅读，那么 NS 会更快。

您似乎在描述的是物料清单处理器。虽然不是 M$，但 Graeme Birchall 有一本免费的 DB2 书籍，其中有一章是关于使用 CTE 进行层次结构处理的（语法几乎相同，IIRC，因为 ANSI 语法采用了 DB2，然后 M$ 采用了）：[http://mysite .verizon.net/Graeme_Birchall/cookbook/DB2V95CK.PDF](http://mysite.verizon.net/Graeme_Birchall/cookbook/DB2V95CK.PDF)

# asp.net - 通过类调用 ASP 页面

> ID：112870
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T02:18:49.580
> 
>         
> 
> 标签：asp.net, load

就像在 Windows 窗体中一样：

将 myForm 调暗为新 AForm（Constr-arg1，Constr-arg2）

myForm.Show

...是否有类似的方法在 ASP.Net 中加载页面。我想重载页面构造器并根据情况实例化正确的页面构造器。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:30:52.110

您能否仅链接到 QueryString 中的页面传递参数（在 URL 中的 ? 之后），然后在构造函数中使用它们（更可能是 PageLoad）

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:39:08.660

我认为 ASP.NET 的最佳方法是编写表示页面内容的用户控件（*.ascx 文件），并使用 Page.LoadControl() 方法根据当前情况加载不同的控件。这个解决方案足够灵活，因为它的名字只引用了控制。而且这种方法比页面构造函数重载更有用，因为您与强类型无关，仅与控件的名称有关。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:40:11.323

这并不是在.Net Web 编程中重定向到页面的真正“正确”方式。

相反，您应该调用[Request.Redirect("~/newpage.aspx")](http://msdn.microsoft.com/en-us/library/a8wa7sdt(vs.80).aspx)或[Server.Transfer("~/newpage.aspx")](http://msdn.microsoft.com/en-us/library/y4k58xk7.aspx)。然后，您应该在新页面的[Page_Load](http://msdn.microsoft.com/en-us/library/system.web.ui.page(VS.80).aspx)处理程序中处理请求。

您可以通过添加到重定向 URL 的查询字符串（即 ~/newpage.aspx?q1=test）或通过将值分配给会话存储（即 Session["q1"] = value）在页面之间传递状态。

# asp.net - 使用 CSS 更改 Asp:CheckBox 的样式/外观

> ID：112883
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2008-09-22T02:24:58.757
> 
>         
> 
> 标签：asp.net, css, checkbox

我想将标准 asp.net 复选框的标准“3D”外观更改为实心 1px。例如，如果我尝试将样式应用于边框，它就会这样做 - 绘制带有边框的标准复选框 - 我猜这是有效的。

无论如何，有没有办法改变实际文本框的样式？

* * *

## 回答 #1

> 赞同：14
> 
>             
> 
> 时间：2008-09-22T03:54:03.330

而不是使用一些非标准的控件，你应该做的是在事后使用不显眼的 javascript 来完成它。有关示例，请参见[http://code.google.com/p/jquery-checkbox/ 。](http://code.google.com/p/jquery-checkbox/)

使用标准的 ASP 复选框可以简化代码的编写。您不必编写自己的用户控件，也不必更新所有现有代码/页面。

更重要的是，它是所有浏览器都能识别的标准 HTML 控件。所有用户都可以访问它，如果他们没有 javascript，也可以使用它。例如，盲人的屏幕阅读器将能够将其理解为复选框控件，而不仅仅是带有链接的图像。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2008-09-22T02:41:23.927

我认为使 CheckBox 看起来真正不同的最佳方法是根本不使用复选框控件。更好地使用您自己的图像在超链接或图像元素的顶部进行选中/未选中状态。干杯。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2010-04-12T14:08:19.367

最简单的最佳方式，使用带有自定义设计的 ASP 复选框控件。

```
 chkOrder.InputAttributes["class"] = "fancyCssClass"; 
```

你可以使用类似的东西..希望有帮助

* * *

## 回答 #4

> 赞同：3
> 
>             
> 
> 时间：2016-05-25T22:48:25.043

在使用 ASP.NET Web 窗体和 Bootstrap 时，上述方法都不能正常工作。

我最终使用了 Paul Sheriff 的[Simple Bootstrap CheckBox for Web Forms](http://weblogs.asp.net/psheriff/a-simple-bootstrap-check-box-for-web-forms)

```
<style>
    .checkbox .btn, .checkbox-inline .btn {
    padding-left: 2em;
    min-width: 8em;
    }
    .checkbox label, .checkbox-inline label {
    text-align: left;
    padding-left: 0.5em;
    }
    .checkbox input[type="checkbox"]{
        float:none;
    }
</style>

<div class="form-group">
    <div class="checkbox">
        <label class="btn btn-default">
            <asp:CheckBox ID="chk1" runat="server" Text="Required" />
        </label>
    </div>
</div> 
```

结果看起来像这样......

[![结果看起来像这样](https://i.stack.imgur.com/R1Rza.jpg)](https://i.stack.imgur.com/R1Rza.jpg)

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2018-02-27T19:14:29.267

将此代码粘贴到您的 CSS 中，它可以让您自定义复选框样式。但是，这不是最好的解决方案，它几乎是在现有的复选框/单选按钮之上显示您的样式。

```
 input[type='checkbox']:after 
{

        width: 9px;
        height: 9px;
        border-radius: 9px;
        top: -2px;
        left: -1px;
        position: relative;
        background-color: #3B8054;
        content: '';
        display: inline-block;
        visibility: visible;
        border: 3px solid #3B8054;
        transition: 0.5s ease;
        cursor: pointer;

}

input[type='checkbox']:checked:after 
    {
        background-color: #9DFF00;
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2010-07-15T15:23:36.507

为什么不使用 Ajax 控件工具包中提供的带有 ToggleButtonExtender 的 Asp.net CheckBox 按钮。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:27:13.103

不确定这真的是一个与 asp.net 相关的问题.. 试一试，这里有很多很好的信息：

[http://www.456bereastreet.com/archive/200409/styling_form_controls/](http://www.456bereastreet.com/archive/200409/styling_form_controls/)

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:34:55.767

请记住，*asp:CheckBox*控件实际上输出的不仅仅是单个复选框输入。

例如，我的代码输出

```
<span class="CheckBoxStyle">
    <input id="ctl00_cphContent_cbCheckBox" 
           name="ctl00$cphContent$cbCheckBox"
           type="checkbox">
</span> 
```

其中*CheckBoxStyle*是应用于控件的 CssClass 属性的值，*cbCheckBox*是控件的 ID。

要设置输入的样式，您需要编写 CSS 来定位

```
span.CheckBox input {
  /* Styles here */
} 
```

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:32:26.007

他们真的依赖于浏览器。

也许你可以做一些类似于[这个](https://stackoverflow.com/questions/108149/what-is-the-best-way-to-replace-the-file-browse-button-in-html#108157)问题中关于更改文件浏览按钮的答案的事情。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2020-11-13T17:43:36.587

好吧，我经历了我能找到的所有解决方案。

Ajax Control Toolkit 可以工作，但它会创建一个奇怪的 html 输出，其中包含各种跨度和其他难以使用的样式。

使用带有`::before`标签的 css 样式来隐藏原始控件的框是可行的，但如果您将其`runat=server`放入元素中以使其可供代码隐藏，则复选框不会更改值，除非您实际单击原始控件。

在某些方法中，如果文本对于查看屏幕来说太长，则标签的整行将在复选框下方结束，或者将在复选框下方结束。

最后，（在此页面中@dimarzionist 的回答中）我使用了 asp.net ImageButton 并使用代码隐藏来更改图像。使用这个解决方案，我可以很好地控制样式，并且可以确定是否从代码隐藏中选中了该框。

[![在此处输入图像描述](https://i.stack.imgur.com/ZUi1D.png)](https://i.stack.imgur.com/ZUi1D.png)

```
<asp:ImageButton ID="mycheckbox" CssClass="checkbox"  runat="server" OnClick="checkbox_Click" ImageUrl="unchecked.png" />
<span class="checkboxlabel">I have read and promise to fulfill the <a href="/index.aspx">rules and obligations</a></span> 
```

在代码隐藏中

```
 protected void checkbox_Click(object sender, ImageClickEventArgs e) {
        if (mycheckbox.ImageUrl == "unchecked.png") {
            mycheckbox.ImageUrl = "checked.png";
            //Do something if user checks the box
        } else {
            mycheckbox.ImageUrl = "unchecked.png";
            //Do something if the user unchecks the box
        }
    } 
```

更重要的是，使用这种方法，`<span>`您用于复选框的文本将与复选框完美包装。

[![在此处输入图像描述](https://i.stack.imgur.com/s60iX.png)](https://i.stack.imgur.com/s60iX.png)

```
.checkboxlabel{
    vertical-align:middle;
    font-weight: bold;
}
.checkbox{
    height: 24px;  /*height of the checkbox image*/
    vertical-align: middle;
} 
```

# sql - 每月生日 SQL 查询

> ID：112892
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-09-22T02:31:10.253
> 
>         
> 
> 标签：sql, mysql

如何在 SQL 中检索给定月份的所有客户的生日？那么 MySQL 呢？我正在考虑将以下内容与 SQL Server 一起使用。

```
select c.name   
from cust c
where  datename(m,c.birthdate) = datename(m,@suppliedDate)
order by c.name 
```

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T02:36:15.390

别忘了2月29日...

```
SELECT c.name
FROM cust c
WHERE (
    MONTH(c.birthdate) = MONTH(@suppliedDate)
    AND DAY(c.birthdate) = DAY(@suppliedDate)
) OR (
    MONTH(c.birthdate) = 2 AND DAY(c.birthdate) = 29
    AND MONTH(@suppliedDate) = 3 AND DAY(@suppliedDate) = 1
    AND (YEAR(@suppliedDate) % 4 = 0) AND ((YEAR(@suppliedDate) % 100 != 0) OR (YEAR(@suppliedDate) % 400 = 0))
) 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T02:33:06.927

就我个人而言，我会使用 DATEPART 而不是 DATENAME，因为 DATENAME 可以根据语言环境进行解释。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T09:27:53.043

如果您要查询给定*月份*的所有生日，则应提供*月份*，而不是*日期*：

```
SELECT c.name
FROM   cust c
WHERE  datepart(m,c.birthdate) = @SuppliedMonth 
```

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:37:19.563

如果您希望客户列表变得非常大，我实际上很想添加一个出生月份列。到目前为止，我看到的查询（包括示例）将需要全表扫描，因为您将数据列传递给函数并进行比较。如果表是任何大小，这可能需要相当长的时间，因为没有索引能够提供帮助。

所以，我会添加birthmonth列（索引），然后（使用可能的MySQLisms）：

```
SELECT name
FROM  cust
WHERE birthmonth = MONTH(NOW())
ORDER BY name; 
```

当然，使用触发器或客户端代码设置birthmonth 列应该很容易。

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2019-11-01T17:10:27.603

```
 SELECT *  FROM tbl_Employee  WHERE DATEADD( Year, DATEPART( Year, GETDATE()) - DATEPART( Year, DOB), DOB)  BETWEEN CONVERT( DATE, GETDATE()) AND CONVERT( DATE, GETDATE() + 30) 
```

这可用于按天获取即将到来的生日

# c++ - 确定大于 4GB 的文件的大小

> ID：112897
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2008-09-22T02:34:09.997
> 
>         
> 
> 标签：c++, c, fseek, fgetpos

代码当前执行此操作，并且 fgetpos 确实处理大于 4GB 的文件，但搜索返回错误，所以知道如何搜索到 a 的末尾`file > 4GB`吗？

```
fpos_t currentpos;

sok=fseek(fp,0,SEEK_END);
assert(sok==0,"Seek error!");

fgetpos(fp,&currentpos);
m_filesize=currentpos; 
```

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2010-08-03T18:16:54.050

忽略所有出现“64”的答案。在 Linux 上，您应该添加`-D_FILE_OFFSET_BITS=64`到您的 CFLAGS 并使用`fseeko`and`ftello`获取/返回`off_t`值的函数，而不是`long`. 这些不是 C 的一部分，而是 POSIX 的一部分。其他（非 Linux）POSIX 系统可能需要不同的选项来确保它`off_t`是 64 位的；检查您的文档。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2008-09-22T03:41:09.510

如果您使用的是 Windows，则需要[GetFileSizeEx (MSDN)](http://msdn.microsoft.com/en-us/library/aa364957(VS.85).aspx)。返回值是一个 64 位的 int。

在 linux [stat64 (manpage)](http://www.manpagez.com/man/2/stat64/)上是正确的。fstat 如果您使用的是 FILE*。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T02:52:46.257

这段代码在 Linux 中对我有用：

```
int64_t bigFileSize(const char *path)
{
    struct stat64 S;

    if(-1 == stat64(path, &S))
    {
        printf("Error!\r\n");
        return -1;
    }

    return S.st_size;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T02:42:44.407

（从 glibc 手册中窃取）

`int fgetpos64 (FILE *stream, fpos64_t *position)`

此函数类似于 fgetpos，但文件位置`fpos64_t`以位置指向的类型变量返回。

如果源代码是`_FILE_OFFSET_BITS == 64`在 32 位机器上编译的，则此功能在名称下可用`fgetpos`，因此可以透明地替换旧接口。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T02:48:14.863

Stat 总是比 fseek 更好地确定文件大小，它会在不是文件的东西上安全失败。64 位文件大小是特定于操作的东西，在 gcc 上，您可以在命令的末尾加上“64”，或者您可以强制它默认将所有标准调用设为 64。有关详细信息，请参阅您的编译器手册。

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:40:33.150

至少在 linux 上，您可以使用 lseek64 代替 fseek。

# visual-studio - 如何更改 Visual Studio IDE 配置文件？

> ID：112926
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2008-09-22T02:48:57.980
> 
>         
> 
> 标签：visual-studio

可以在不清除所有 VS 设置的情况下更改 Visual Studio IDE 配置文件吗？

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2008-09-22T02:59:29.873

Tools -> Import and Export Settings.. -> [X] Import Selected ... -> Save Current -> 选择您想要更改的选项

# linux - 用于 Linux 的图形 DIFF 程序

> ID：112932
> 
>         
> 
> 赞同：232
> 
>         
> 
> 时间：2008-09-22T02:49:44.593
> 
>         
> 
> 标签：linux, user-interface, diff, suse

我真的很喜欢**Araxis** Merge 的 PC 图形 DIFF 程序。不过，我不知道**linux**有什么可用的。我们在 z800 大型机上运行 SUSE linux。如果我能得到一些其他人都喜欢的程序的指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：240
> 
>             
> 
> 时间：2008-09-22T02:52:14.837

我知道两个图形差异程序：[Meld](http://meldmerge.org/)和[KDiff3](http://kdiff3.sourceforge.net/)。我没有使用 KDiff3，但 Meld 对我来说效果很好。

似乎两者都在 openSUSE 11.0 的标准软件包存储库中

* * *

## 回答 #2

> 赞同：45
> 
>             
> 
> 时间：2008-09-22T02:56:33.173

[BeyondCompare](http://www.scootersoftware.com/moreinfo.php)也刚刚发布了 Linux 版本。

不是免费的，但 Windows 版本值得每一分钱——我假设 Linux 版本是一样的。

* * *

## 回答 #3

> 赞同：44
> 
>             
> 
> 时间：2008-09-22T05:38:40.130

If you use Vim, you can use the inbuilt diff functionality. `vim -d file1 file2` takes you right into the diff screen, where you can do all sort of merge and deletes.

* * *

## 回答 #4

> 赞同：29
> 
>             
> 
> 时间：2009-01-07T22:56:47.650

[漫射](http://diffuse.sourceforge.net/)也很不错。它甚至可以让您通过定义匹配点轻松调整线条的匹配方式。

* * *

## 回答 #5

> 赞同：18
> 
>             
> 
> 时间：2010-03-26T10:34:00.590

Emacs 带有[Ediff](http://www.gnu.org/software/emacs/manual/ediff.html)。

这是埃迪夫的样子![Ediff 截图](https://www.emacswiki.org/pics/static/EdiffScreenshot.png)

* * *

## 回答 #6

> 赞同：14
> 
>             
> 
> 时间：2008-09-22T02:52:58.470

[Meld](http://meld.sourceforge.net/)和[KDiff](http://kdiff3.sourceforge.net/)是最受欢迎的两个。

* * *

## 回答 #7

> 赞同：6
> 
>             
> 
> 时间：2008-10-14T13:48:54.550

[xxdiff](http://furius.ca/xxdiff/)是轻量级的，如果那是你所追求的。

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2008-10-14T05:23:33.867

我用过一次Meld，感觉很不错，以后可以多试试。vimdiff 效果很好，如果你对 vim 很了解的话。最后我要提一下，我发现 xxdiff 在快速比较方面做得很合理。有许多差异程序做得很好。

* * *

## 回答 #9

> 赞同：3
> 
>             
> 
> 时间：2008-10-09T20:52:12.617

[Kompare](http://www.caffeinated.me.uk/kompare/)适用于 diff，但我使用[dirdiff](http://freshmeat.net/projects/dirdiff/)。虽然它看起来很丑，但 dirdiff 可以进行 3 路合并 - 您可以在工具内完成所有操作（差异和合并）。

* * *

## 回答 #10

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:55:02.850

[SourceGear](http://www.sourcegear.com/diffmerge/)有DiffMerge 。这个很不错。Araxis Merge 是我错过的 Windows 程序之一。我想知道它是否可以在 Wine 下工作；) 可能必须试一试

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:00:07.890

如果您使用的是 SVN（颠覆）源代码控制，Eclipse 的 Subclipse 有一个出色的图形差异插件。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:49:19.707

我使用[Guiffy](http://guiffy.org/)，效果很好。[（来源：][[guiffy.org](http://guiffy.org/images/CompareReportInFFThumb.jpg)][）]

 [![替代文字](https://i.stack.imgur.com/nSPNF.jpg)](https://i.stack.imgur.com/nSPNF.jpg)

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T04:32:52.753

我通常需要从颠覆存储库中区分代码，到目前为止，eclipse 对我来说工作得非常好......我将 KDiff3 用于其他工作。

# email - HTML 与文本电子邮件使用的统计数据是什么

> ID：112940
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2008-09-22T02:52:26.070
> 
>         
> 
> 标签：email

人们在纯文本模式与 HTML 模式下查看电子邮件的最新数据是什么？

[维基百科](http://en.wikipedia.org/wiki/Html_email)及其[来源](http://www.emaillabs.com/tools/email-marketing-statistics.html)似乎都引用了 2006 年的[这项](http://www.dmnews.com/Outlook-2006-More-Technology-More-Targeting/article/90305/)研究，这在互联网术语中是一个永恒的历史。

考虑到它可能影响的用户数量，将基于 HTML 和基于文本的电子邮件结合起来的问题需要花费不成比例的时间来解决。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2008-09-22T03:19:42.167

与网络浏览器使用统计一样，它完全取决于受众。

我可以访问有关此主题的一些数据，并且似乎纯文本电子邮件的使用率非常低（至少对于非技术受众而言）。<0.1% 至 ~6%，具体取决于人口统计。

*两者都做起来*并不费力（特别是如果你能找到一些东西来帮助你在创建多部分 MIME 容器时完成繁重的工作），你总是可以编写一个脚本来从你的 HTML 或其他东西中生成文本。

# c# - 在 Visual Studio 2005 中创建程序安装程序？

> ID：112941
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2008-09-22T02:52:45.913
> 
>         
> 
> 标签：c#, visual-studio, winforms

我是一个在 VS 2005 中陷入“应用程序世界”的网络用户。我创建了我的 windows 窗体程序，并希望让我的最终用户能够将它（以及它的一些资源）安装到标准程序文件/应用程序目录中位置以及开始菜单/桌面启动器。  

帮助文件没有给出任何说明（我可以找到）。创建安装程序似乎是一项微不足道的任务 - 但它让我望而却步。

任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2008-09-22T02:54:09.527

您正在寻找一个“设置项目”，它应该位于“新项目”对话框中的“其他项目类型”->“设置和部署”类别下。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2008-09-22T04:10:09.050

我建议使用一些 WiX（Windows 安装程序 XML）。它是大多数来自 codeplex 或 OOB 代码滴的产品使用的工具包，而且很容易掌握。

还有（在第 3 版中）一个名为 Votive 的 IDE 插件可以帮助让事情变得“更轻松”。

就我个人而言，我发现使用 WiX 比使用内置的 Visual Studio 安装程序模板更灵活，尽管您的方式可能会有所不同。看看[http://wix.sourceforge.net/](http://wix.sourceforge.net/)还有一个很棒的教程[http://www.tramontana.co.hu/wix/](http://www.tramontana.co.hu/wix/)。

如果开始似乎有点困难，请坚持 - 我做到了，现在我发现它非常适合我的需要。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T03:28:57.667

另一个选择是 Inno Setup，这是一个免费、易于使用且出色的第三方安装程序：

[创新设置](http://www.innosetup.com/isinfo.php)

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2008-12-20T23:06:28.260

我想为“设置项目”添加一个快速入门教程，作为开始使用 VS 构建自己的设置的好地方：http: [//www.codeproject.com/KB/dotnet/Win_App_Setup_Project.aspx](http://www.codeproject.com/KB/dotnet/Win_App_Setup_Project.aspx)

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-06-26T03:25:25.993

该[视频](http://www.youtube.com/watch?v=d0h7CqC3Ltg)展示了如何使用 Visual Studio 2005 设置简单安装程序

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2010-12-14T12:34:21.630

exe 文件实际上只是一个 boostrap 加载程序，它启动 MSI 文件。MSI 文件是实际的安装文件。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T02:54:32.287

将“安装项目”项目添加到您的解决方案中。新项目 > 其他项目类型 > 设置和部署。然后，您可以选择安装的内容和位置。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:02:17.200

安装项目是要走的路。如果您要从网站部署安装程序，我建议创建一个 MSI 文件作为项目输出（而不是 Setup.exe 输出）。我的大多数客户都阻止了 EXE 文件的下载。

# c++ - 通过 Windows 网络访问接近 MAX_PATH 长度的文件

> ID：112946
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2008-09-22T02:53:12.480
> 
>         
> 
> 标签：c++, windows, visual-c++, lan, unc

我正在使用 C++ 并通过网络访问 UNC 路径。此路径略大于 MAX_PATH。所以我无法获得文件句柄。

但是如果我在有问题的计算机上运行程序，路径不会大于 MAX_PATH。所以我可以得到一个文件句柄。如果我重命名文件以减少字符（减去计算机名称的长度），我可以访问该文件。

即使知道 UNC 路径中的计算机名称超过了 MAX_PATH 限制，是否可以通过网络访问此文件？

* * *

## 回答 #1

> 赞同：10
> 
>             
> 
> 时间：2008-09-22T03:01:35.487

我记得有一些功能，比如`\\?\`在路径的开头使用来绕过`MAX_PATH`限制。这是MSDN上的参考：

[http://msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa365247(VS.85).aspx)

对于远程计算机，您将使用路径名，例如：`\\?\unc\server\share\path\file`. 这`\\?\unc\`是特殊前缀，不用作实际文件名的一部分。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T02:59:36.550

如果您在将文件名转换为短 (8.3) 文件名后尝试打开文件，您可能能够获得该文件的句柄。如果失败了，您可以将文件所在的目录映射为驱动器并以这种方式访问​​文件吗？

# ubuntu - 如何在 Ubuntu 中添加另一个运行级别（级别 7）？

> ID：112964
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T03:01:41.663
> 
>         
> 
> 标签：ubuntu, upstart, runlevel

Ubuntu 有 8 个运行级别（0-6 和 S），我想添加运行级别 7。

我做了以下事情：

1.- 创建文件夹**/etc/rc7.d/**，其中包含一些指向**/etc/init.d/的符号链接**

2.- 创建文件**/etc/event.d/rc7**这是它的内容：

```
# rc7 - runlevel 7 compatibility
#
# This task runs the old sysv-rc runlevel 7 ("multi-user") scripts.  It
# is usually started by the telinit compatibility wrapper.

start on runlevel 7

stop on runlevel [!7]

console output
script
    set $(runlevel --set 7 || true)
    if [ "$1" != "unknown" ]; then
        PREVLEVEL=$1
        RUNLEVEL=$2
        export PREVLEVEL RUNLEVEL
    fi

    exec /etc/init.d/rc 7
end script 
```

我认为这就足够了，但是**telinit 7**仍然会抛出这个错误：*telinit: 非法运行级别：7*

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T03:15:10.210

你不能; 运行级别被硬编码到实用程序中。但你为什么需要？运行级别 4 基本上未使用。虽然这不是最好的主意，但您可以根据您是否总是/从不使用 X 来重新调整运行级别 3 或运行级别 5 的用途。

请注意，某些 *nix 系统支持超过 6 个运行级别，但 Linux 不是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:24:12.903

我不确定如何添加它们（从不需要），但我很确定`/etc/inittab`你会在哪里添加运行级别。

尽管我不得不同意 Zathrus 的观点，即其他运行级别可用但未使用。在 Debian 上，真的只使用了 1 和 2。不过，我不确定 Ubuntu 是如何设置的。但是，如果您有特定的目的，应该可以做到。我只是从来没有必要。

# specifications - 学习编写规范有哪些资源？

> ID：112969
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2008-09-22T03:04:00.207
> 
>         
> 
> 标签：specifications

在工作中，我经常负责编写规范，我也是一开始就坚持要获取规范的人。问题是我不确定规范应该是什么样子以及它们应该包含什么。很多时候，当我的老板编写规范时（我们都缺乏经验），他们会输入表名和我认为不属于那里的东西。那么什么是学习编写好的规范的好方法呢？

编辑：功能规范是否应该包括假设我正在指定一个 Web 应用程序、输入类型（文本框、下拉列表等）？

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2008-09-22T03:16:05.653

在我看来，开发文档中最重要的部分是**让正确的人来做。**

*   需求文档 - 用户 + 业务分析师

*   功能规范 - 业务分析师 + 开发人员

*   技术规范（如何实际实现功能） - 高级开发人员/架构师

*   用于调度目的的时间估计 -分配给任务的**特定开发人员**

让除高级开发人员/架构师之外的任何人定义表结构/接口等是徒劳的——因为更有经验的开发人员通常会将大部分内容扔掉。

Wikipedia 实际上是功能规范的一个良好开端，它看起来类似于您的规范 - [http://en.wikipedia.org/wiki/Functional_specification](http://en.wikipedia.org/wiki/Functional_specification)。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T03:24:44.370

Steve McConnell 的[Code Complete](https://rads.stackoverflow.com/amzn/click/com/0735619670)中有一个很棒的章节贯穿规范文档以及它们应该包含的内容。

当我的任务是在一家从未有过的公司建立架构和业务分析团队时，我使用 McConnell 的规范章节来创建技术规范文档的大纲。它随着时间的推移而发展，但从这个框架开始，我确保我们没有遗漏任何东西，结果证明它非常有用。

在编写规范时，我遵循的经验法则是尝试让技术文档始终从一般开始并转向具体——始终重申正在开发技术解决方案的业务问题或目标解决，因此阅读规范的人不需要去其他文档将其置于任何类型的上下文中。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2008-10-23T19:48:34.100

请参阅Joel Spolsky 的[无痛功能规格](http://www.joelonsoftware.com/articles/fog0000000036.html)。

他说每个规格都应该具备的一些东西：

*   免责声明

*   一位作家。一位作者

*   场景

*   非目标

*   概述

*   细节，细节，细节

*   开放式问题

*   旁注

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:14:12.913

重要的是把一些东西写下来，而不是担心格式。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:28:55.357

购买书籍：Ian Sommerville 和 Pete Sawyer 的需求工程 ISBN 0-471-97444-7 或 Karl Wiegers 的软件需求 ISBN 0-7356-0631-5

# python - Python - 何时使用文件与打开

> ID：112970
> 
>         
> 
> 赞同：140
> 
>         
> 
> 时间：2008-09-22T03:04:14.543
> 
>         
> 
> 标签：python, file

`file`Python和Python有什么区别`open`？我什么时候应该使用哪一个？（假设我在 2.5 中）

* * *

## 回答 #1

> 赞同：155
> 
>             
> 
> 时间：2008-09-22T03:07:44.503

您应该始终使用`open()`.

正如[文档](http://docs.python.org/2/library/functions.html#file "内置函数文档")所述：

> 打开文件时，最好使用 open() 而不是直接调用此构造函数。file 更适合类型测试（例如，编写“isinstance(f, file)”）。

此外，自 Python 3.0 以来`file()` [已被删除。](http://docs.python.org/release/3.0/whatsnew/3.0.html#builtins)

* * *

## 回答 #2

> 赞同：33
> 
>             
> 
> 时间：2008-09-22T03:10:16.290

两个原因：“应该有一种方法来做到这一点”的 python 哲学`file`正在消失。

`file`是实际类型（使用 eg`file('myfile.txt')`正在调用其构造函数）。`open`是一个工厂函数，它将返回一个文件对象。

在 python 3.0`file`中，将从内置转变为由`io`库中的多个类实现（有点类似于带有缓冲读取器的 Java 等）

* * *

## 回答 #3

> 赞同：19
> 
>             
> 
> 时间：2008-09-22T03:32:08.860

`file()`是一种类型，如 int 或列表。`open()`是一个打开文件的函数，会返回一个`file`对象。

这是何时应该使用 open 的示例：

```
f = open(filename, 'r')
for line in f:
    process(line)
f.close() 
```

这是何时应该使用文件的示例：

```
class LoggingFile(file):
    def write(self, data):
        sys.stderr.write("Wrote %d bytes\n" % len(data))
        super(LoggingFile, self).write(data) 
```

如您所见，两者存在都有充分的理由，并且两者都有明确的用例。

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2008-09-22T03:08:37.747

功能上，两者是一样的；`open`无论如何都会打电话`file`，所以目前的区别是风格问题。[Python 文档](http://docs.python.org/lib/built-in-funcs.html)建议使用`open`.

> 打开文件时，最好使用 open() 而不是直接调用文件构造函数。

原因是在未来的版本中它们不能保证是相同的（`open`将成为一个工厂函数，它根据打开的路径返回不同类型的对象）。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T03:10:45.183

只使用 open() 打开文件。file() 实际上在 3.0 中已被删除，目前已弃用。他们有一种奇怪的关系，但是 file() 现在正在运行，所以不必再担心了。

以下来自 Python 2.6 文档。[括号的东西]由我添加。

> 打开文件时，最好使用 open() 而不是直接调用此 [file()] 构造函数。file 更适合类型测试（例如，写 isinstance(f, file)

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T03:12:27.097

根据 Van Rossum 先生的说法，尽管 open() 目前是 file() 的别名，但您应该使用 open()，因为这在未来可能会改变。

# c# - Web 配置中的相对路径

> ID：112975
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2008-09-22T03:05:58.157
> 
>         
> 
> 标签：c#, .net, path, web-config, relative-path

如何在 web.config 文件中有相对路径。此值不在连接字符串中，因此我无法使用 |DataDirectory| （我想），那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:08:52.783

相对路径有什么用？

您是在谈论物理目录路径还是 url 路径？

编辑：

我需要为我的一个项目做类似的事情。我需要找到存储在某个文件夹中的配置文件。虽然 web.config 文件本身没有为此提供任何特殊功能，但您可以从 web.config 文件中获取路径并将其转换为应用程序相对路径。

Request.ApplicationPath 为您提供 Web 应用程序的基本目录。您可以将相对路径附加到此并将其提供给任何需要它的东西。

另请参阅[Rick Strahl 的这篇博客文章，](http://www.west-wind.com/weblog/posts/269.aspx)了解其他可能对您有所帮助的有趣目录。

然后，您可以将相关路径附加到

# deployment - 如何将 DLL 文件从 PC 复制到 vs.net 的袖珍 PC 2003 模拟器？

> ID：112976
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T03:06:21.013
> 
>         
> 
> 标签：deployment, simulator

我想将一个DLL文件从PC复制到vs.net的pocket pc 2003模拟器，所以我使用模拟器的共享文件夹，但在模拟器的文件列表中看不到dll文件。

请问怎么做？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:16:21.050

将其添加到项目的主要输出中。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:14:49.633

建议：如果您需要使用外部 DLL 与代码一起复制，请添加对 DLL 的引用，并在 Visual Studio 的属性窗格中确保将 Copy Local 设置为 True。这可能会完成你想要做的事情。

# asp.net - ASP.NET 页面类上的泛型

> ID：112977
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2008-09-22T03:06:51.963
> 
>         
> 
> 标签：asp.net, vb.net, generics

我想在我的页面类中实现泛型，例如：

```
Public Class MyClass(Of TheClass)
Inherits System.Web.UI.Page 
```

但要使其工作，我需要能够实例化类（使用正确的通用类类型）并加载页面，而不是常规的 Response.Redirect。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T03:48:44.717

我不确定完全理解你想要做什么。如果您想要一个通用页面，您可以使用通用 BasePage 并将您的通用方法放入该 BasePage：

```
Partial Public Class MyPage
    Inherits MyGenericBasePage(Of MyType)

End Class

Public Class MyGenericBasePage(Of T As New)
    Inherits System.Web.UI.Page

    Public Function MyGenericMethod() As T
        Return New T()
    End Function

End Class

Public Class MyType

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T04:10:50.513

说从泛型类型派生类型的答案是一个很好的答案。但是，如果您的解决方案涉及基于在运行时确定的类型抓取页面，那么您应该能够处理当前 HttpApplication 上的 PreRequestHandlerExecute 事件。

这个事件在请求被转发到处理程序之前被调用，所以我相信你可以将你的页面注入到 HttpContext.Current.Handler 属性中。然后，您可以根据需要创建页面。

# css - 使用 Divs 显示类似表格的数据

> ID：112983
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2008-09-22T03:08:38.713
> 
>         
> 
> 标签：css

我想显示如下数据：

```
 Title     Subject    Summary    Date 
```

所以我的`HTML`样子：

```
<div class="title"></div>
<div class="subject"></div>
<div class="summary"></div>
<div class="date"></div> 
```

问题是，所有文本都没有出现在一行上。我尝试添加`display="block"`，但这似乎不起作用。

我在这里做错了什么？

**重要提示：**在这种情况下，我不想使用`table`元素但坚持使用`div`标签。

* * *

## 回答 #1

> 赞同：37
> 
>             
> 
> 时间：2008-09-22T03:12:39.170

看起来你想要显示一个表格，对吧？所以继续使用 <table> 标签。

* * *

## 回答 #2

> 赞同：27
> 
>             
> 
> 时间：2008-09-22T03:26:45.160

我会使用以下标记：

```
<table>
  <tr>
    <th>Title</th>
    <th>Subject</th>
    <th>Summary</th>
    <th>Date</th>
  </tr>
  <!-- Data rows -->
</table> 
```

对于所有这些基于 div 和列表的布局，即使是那些指定固定宽度的布局，要记住的另一件事是，如果您有一些比宽度更宽的文本（例如，一个 url），布局将休息。表格数据表的好处在于它们实际上具有列的概念，这是其他 html 构造所没有的。

即使这个网站有一些东西，比如首页，是用 div 实现的，我认为表格数据（比如投票、响应、标题等）应该在一个表中。推送 div 的人倾向于使用语义标记。你追求的是相反的。

* * *

## 回答 #3

> 赞同：22
> 
>             
> 
> 时间：2008-09-22T03:34:49.117

我并不是说听起来很傲慢。如果我这样做了，我误解了你，我很抱歉。

大多数人对桌子皱眉是因为人们出于错误的原因使用它们。通常，人们使用巨大的表格在他们的网站上放置东西。  *这*就是 div 的用途。不是桌子！

但是，如果您想显示*表格数据*，例如足球队、胜利、失败和平局的列表，您绝对应该使用表格。几乎闻所未闻（尽管并非不可能）为此使用 div。

请记住，如果是用于显示数据，您绝对可以使用表格！

* * *

## 回答 #4

> 赞同：10
> 
>             
> 
> 时间：2008-09-22T03:20:31.570

如果有正当理由不使用表格，那么您可以给每个 div 一个宽度，然后将其浮动。IE

```
div.title {
    width: 150 px;
    float: left;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2008-09-22T03:12:48.093

有理由不使用表格吗？如果您要显示表格数据，最好使用表格 - 这就是它们的设计目的。

要回答您的问题，最好的方法可能是为每个元素分配一个固定宽度，并设置 float:left。您需要在末尾有一个具有 clear:both 的虚拟元素，或者您必须将 clear:both 放在每行的第一个元素上。这种方法仍然不是万无一失的，如果一个单元格的内容强制div变宽，它不会调整整列的大小，只会调整那个单元格。您也许可以通过使用溢出：自动或溢出：隐藏来避免调整大小，但这根本不像常规表格那样工作。

* * *

## 回答 #6

> 赞同：4
> 
>             
> 
> 时间：2008-10-11T09:19:13.613

对不起，但是，我要告诉你使用表格。因为这是表格数据。

也许你可以告诉我们你为什么*不想*使用表格？

在我看来，我相信很多其他人，你对“不使用表格”的想法感到困惑。这不是“不要使用表格”，而是“不要使用表格进行页面布局”。

您在这里所做的是布置表格数据，所以它当然应该在表格中。

如果您不清楚“表格数据”的概念，我将其定义为：仅从数据中无法明确含义的数据位，必须通过查看标题来确定。

假设您有火车或巴士时刻表。这将是一个巨大的时代。任何特定时间是什么意思？您无法通过查看时间本身来判断，但参考行或列标题，您会看到它是从某个站点出发的时间。

你有文本字符串。它们是标题、摘要还是日期？人们会从检查列标题中看出这一点。所以这是一张桌子。

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T03:31:56.880

或者确实是这个，它非常直接地使用表格来存储表格数据：
 [https ://stackoverflow.com/badges](https://stackoverflow.com/badges)

* * *

## 回答 #8

> 赞同：4
> 
>             
> 
> 时间：2008-09-22T03:54:04.237

只是为了说明前面的答案的评论，敦促您使用 table 而不是 div*表格*数据：

**[CSS 表格库](http://icant.co.uk/csstablegallery/)**是一种以许多不同视觉样式显示漂亮表格的好方法。

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T03:28:03.410

display:block 保证元素*不会*出现在同一行。布局的浮动是滥用，就像布局的表格是滥用一样（但就目前而言，这是必要的滥用）。保证它们都出现在同一行的唯一方法是使用表格标签。那，或者 display:inline，并且只使用   (Non-Breaking Space) 你的元素和单词之间，而不是一个正常的空间。  将帮助您防止自动换行。

但是，是的，如果没有避免使用表格的正当理由，请将表格用于表格数据。这就是他们的目的。

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T04:03:28.300

在 CSS 框架时代，我真的看不出完全脱离 table 标签的意义。虽然现在可以为`display: table-*`您喜欢的任何元素做任何事情，但 table 仍然是以表格形式格式化数据的首选标签（不要忘记它在语义上更正确）。只需选择一个流行的 CSS 框架来使表格数据看起来不错，而不是破解`<div>`标签的表示来实现它不打算做的任何事情。

* * *

```
display: block 
```

肯定不行，试试

```
display: inline 
```

或将所有内容浮动到左侧然后相应地定位它们

但是如果你有表格数据，那么最好在标签中`<table>`标记

一些参考：[来自sitepoint](http://www.sitepoint.com/blogs/2008/09/09/rowspans-colspans-in-css-tables/)

* * *

## 回答 #11

> 赞同：2
> 
>             
> 
> 时间：2008-09-22T04:52:37.730

如果你想水平堆叠 div，CSS 属性 float 就是你要找的。

这是一个关于花车的好教程：http: [//css.maxdesign.com.au/floatutorial/](http://css.maxdesign.com.au/floatutorial/)

* * *

## 回答 #12

> 赞同：1
> 
>             
> 
> 时间：2008-10-10T20:46:24.600

堆栈溢出问题页面可以使用 DIV 的原因是投票/答案计数器是固定宽度。

* * *

## 回答 #13

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T03:31:52.480

您需要确保所有“单元格”都向左或向右浮动（取决于它们的内部顺序），并且它们还需要固定宽度。

此外，确保它们的“行”具有固定宽度，等于单元格宽度 + 边距 + 填充的总和。

最后确保“表格”级别 div 上有一个固定宽度，即行宽 + 边距 + 填充的总和。

但是如果你想显示表格数据，你真的应该使用表格，一些浏览器（在上一代更常见）处理浮动、填充和边距的方式不同（还记得著名的 IE 6 错误，它使边距加倍吗？）。

这里还有很多关于何时使用和何时不使用表格的其他问题，这可能有助于解释何时何地使用 div 和表格。

* * *

## 回答 #14

> 赞同：1
> 
>             
> 
> 时间：2008-09-22T09:03:53.273

使用此代码：

```
<div class="title">MyTitle</div><div class="subject">MySubject</div><div class="Summary">MySummary</div> 
```

您有 2 个解决方案（根据您的情况调整 css 选择器）：

1 - 使用内联块

```
div 
{
    display: inline;
} 
```

这将导致将块放在同一行但删除您可以对其大小进行的控制。

2 - 使用浮动

```
div 
{
    width: 15%; /* size of each column : adapt */
    float: left; /* this make the block float at the left of the next one */
}

div.last_element /* last_element must be a class of the last div of your line */
{
   clear: right; /* prevent your the next line to jump on the previous one */
} 
```

float 属性对于 CSS 定位非常有用：http: [//www.w3schools.com/css/pr_class_float.asp](http://www.w3schools.com/css/pr_class_float.asp)

* * *

## 回答 #15

> 赞同：1
> 
>             
> 
> 时间：2009-11-20T10:38:05.087

表格数据也可以表示为嵌套列表 - 即列表列表：

```
<ul>
    <li>
        heading 1
        <ul>
            <li>row 1 data</li>
            <li>row 2 data</li>
        <ul>
    </li>
    <li>
        heading 2
        <ul>
            <li>row 1 data</li>
            <li>row 2 data</li>
        <ul>
    </li>
</ul> 
```

您可以像表格一样布局，并且在语义上也是正确的（ish）。

* * *

## 回答 #16

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T03:13:55.267

要使文本出现在单行上，您必须使用 display="inline"

而且，你真的应该使用列表来达到这个效果

```
<ul class="headers">
  <li>Title</li>
  <li>Subject</li>
  <li>Summary</li>
  <li>Date</li>
</ul> 
```

样式如下所示：

.headers{填充：0；边距：0}

.headers li{display:inline; padding:0 10px} /*填充将控制标题中文本两侧的空间*/

* * *

## 回答 #17

> 赞同：0
> 
>             
> 
> 时间：2009-11-20T10:18:28.620

您应该使用跨度：

```
display:inline-block 
```

这将允许您为每个元素设置宽度，同时仍将它们保持在同一行上。请参阅[此处](http://siteroller.net/articles/3-column-no-tables-no-floats/)，特别是[本节](http://siteroller.net/articles/3-column-no-tables-no-floats/pretty-forms-1.php)。

现在，为了安抚反对者——当然表格数据应该放在表格中。但他非常明确地不想要一张桌子。以上就是他的问题的答案！！！

* * *

## 回答 #18

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T06:09:12.710

Preface: I'm a little confused by the responses so far, as doing columns using DIVs and CSS is pretty well documented, but it doesn't look like any of the responses so far covered the way it's normally done.  What you need is four separate DIVS, each one with a greater "left:" attribute.  You add your data for each column into the corresponding DIV (column).  

Here's a website that should help you.  They have many examples of doing columns with CSS/DIV tags:
[http://www.dynamicdrive.com/style/layouts/](http://www.dynamicdrive.com/style/layouts/)

All you have to do is extrapolate from their 2-column examples to your 4-column needs.

* * *

## 回答 #19

> 赞同：0
> 
>             
> 
> 时间：2008-09-22T04:21:37.180

[前段时间我在 HTML 中](https://stackoverflow.com/questions/42169/if-you-were-programming-a-calendar-in-html-would-you-use-table-tags-or-div-tags)问了一个类似的问题，每个人都告诉我也使用表格。

如果您已经制作了 igoogle 主页，只需 yoink 他们的代码。我在一个页面的列中创建了一个列和部分系统。请注意，谷歌不能有无限数量的列，这冒犯了我们作为对象人的敏感性。以下是我的一些发现：

*   您需要知道列的宽度

*   您需要知道列数

*   您需要知道列所在空间的宽度。 

*   您需要确保空格不会溢出 

我制作了一个带有 DIV 标签的日历，因为如果不硬编码一个月中的最大周数，就不可能让 XSL 进行验证，*这非常令人反感*。 

* * *

最大的问题是每个盒子的高度都必须相同，如果您希望任何信息与表格中带有 div 标签的字段相关联，您必须确保`whitespace:scroll`or`whitespace:hidden`在您的 CSS 中。   

* * *

## 回答 #20

> 赞同：0
> 
>             
> 
> 时间：2012-08-22T11:47:25.227

首先`display:block`应该是`display:inline-block`，尽管您可能已经想通了。其次，您还可以使用`display:table`、和其他属性。虽然这些不如使用表。`display:table-cell``display:table-row``**** 
```