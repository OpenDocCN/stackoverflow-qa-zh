# StackOverflow 问答 11334000-11334999

# ruby - CSV::open#<< (NoMethodError) 的 Ruby 未定义方法“map”

> ID：11334005
> 
> 赞同：3
> 
> 时间：2012-07-04T18:33:28.083
> 
> 标签：ruby, csv

这可行，但由于某种原因缺少逗号。`data`被插入为

```
GAURISH SHARMA
97
69
69
975
PASS 
```

每个值都写在新行中。我想知道逗号去哪儿了？还是必须手动插入？

* * *

我正在尝试使用以下代码编写哈希值

```
CSV.open("resultdata.csv", "a") do |csv|    
  h.each do |key, value|
    csv << value
  end
end 
```

这是`h`哈希的内容

```
{:name=>"GAURISH SHARMA",
 :ca=>"97",
 :cb=>"69",
 :ba_lab=>"69",
 :bb_lab=>"69",
 :grand_total=>"975",
 :result=>"PASS"} 
```

此代码看起来正确，但在运行此代码时，会生成以下错误：

```
/home/gaurish/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/csv.rb:1729:in `<<': undefined method `map' for "GAURISH SHARMA":String (NoMethodError)
    from /home/gaurish/Dropbox/code/projects/ra/result.rb:35:in `block (2 levels) in <main>'
    from /home/gaurish/Dropbox/code/projects/ra/result.rb:34:in `each'
    from /home/gaurish/Dropbox/code/projects/ra/result.rb:34:in `block in <main>'
    from /home/gaurish/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/csv.rb:1354:in `open'
    from /home/gaurish/Dropbox/code/projects/ra/result.rb:33:in `<main>' 
```

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T20:21:59.483

When you do `csv << value`, you are writing a string to a file. The CSV library makes it possible to write an array to a file (in a certain form). The best way to get an array with all values from a hash is to use the `values` method btw. So:

```
require 'csv'
h = {:name=>"GAURISH SHARMA",
 :ca=>"97",
 :cb=>"69",
 :ba_lab=>"69",
 :bb_lab=>"69",
 :grand_total=>"975",
 :result=>"PASS"}

CSV.open("resultdata.csv", "a") do |csv|    
  csv << h.values
end 
```

resultdata.csv will look like

```
GAURISH SHARMA,97,69,69,69,975,PASS 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-04T18:42:53.800

放入`value`一个数组中，如下所示：

```
CSV.open("resultdata.csv", "a") do |csv|    
  h.each do |key, value|
    csv << [value]
  end
end 
```

**已编辑**

每次使用`csv << ["foo"]`它都会在新行中插入“foo”。但是如果你这样做`csv << ["foo", "foo", "foo"]`，你会在同一行中得到 3 个“foo”，用逗号分隔。

Knowing this, try to store all the values inside an array first, and after this use the `csv << your_values_array`. This will solve your problem.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T18:43:04.640

What `csv << value` is trying to do is append (`<<`) a new *row* onto the CSV. As such, it's expecting `value` to be an Array, not a String, with each element in the Array corresponding to a column/field of the row being appended. Thus, the following should work:

```
CSV.open("resultdata.csv", "a") do |csv|    
  h.each do |key, value|
    csv << [value]
  end
end 
```

# git - 根据插入/删除的行数限制 git log？

> ID：11334009
> 
> 赞同：0
> 
> 时间：2012-07-04T18:33:54.590
> 
> 标签：git

我没有看到任何明显的方法，但是 git 一次又一次地证明比我想象的更灵活，所以......

我想找到引入大量代码更改的提交，所以我想通过插入或删除的行数（一起或单独）来限制它们。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:56:40.530

`git log --stat`

```
commit e2b97c53727bd66c143713d13399ff4242e4ff06
Author: John Hobbs 
Date:   Thu Nov 4 17:01:14 2010 -0500
    Switched to jQuery Mobile. It's awesome.
 application/classes/controller/item.php    |   77 +++++++++++++---------------
 application/classes/controller/project.php |    4 +-
 application/classes/controller/site.php    |    2 +
 application/classes/controller/user.php    |    5 +-
 application/classes/form.php               |    2 +-
 application/views/item/add.php             |   27 +++-------
 application/views/item/index.php           |   19 ++-----
 application/views/item/view.php            |   11 +++--
 application/views/message/basic.php        |   13 +++++
 application/views/mobile.php               |   64 ++++++++++++++++++-----
 application/views/project/add.php          |    5 +--
 application/views/project/index.php        |   28 ++++------
 application/views/project/view.php         |   19 ++-----
 application/views/user/index.php           |   25 +--------
 application/views/user/login.php           |   14 +++--
 application/views/user/register.php        |   20 ++++---
 16 files changed, 165 insertions(+), 170 deletions(-) 
```

（[此处](http://www.velvetcache.org/2010/11/24/git-log-stat)的示例输出）

然后在视觉上查找长 +/- 符号或使用`--numstat`并将其传递给另一个命令以对其进行过滤。

`man git log`

* * *

如果您需要对其进行过滤而不是在视觉上进行过滤（`--shortstat`按照 Antoine 的建议）：

```
$ git log --pretty=oneline --shortstat 
```

这将为您提供如下输出：

```
$ git log --pretty=oneline --shortstat
19791900f886e7a5f92b7cf3536053c863bec067 fix tab title, system menu, and a focus
 2 files changed, 108 insertions(+), 65 deletions(-)
b52941150046cdb455c38e3f9bc133d6ba8f721f give tab a wndproc, change time to be
 1 files changed, 65 insertions(+), 20 deletions(-)
ae5c18524b4a02b264fe26319ce2c9cf7dbff6b2 Fix window style of parent window
 1 files changed, 1 insertions(+), 1 deletions(-)
8f94ad9bbbb2fec42feccda43374b13eda55c018 Add .gitignore to ignore some MSVC file
 1 files changed, 10 insertions(+), 0 deletions(-) 
```

通过管道将其传输到 awk，搜索 'files changed, '，如果插入次数大于 50，则打印匹配行和上一行：

```
$ git log --pretty=oneline --shortstat | awk '/files changed, / && $4 > 50 {print x; print};{x=$0}'

19791900f886e7a5f92b7cf3536053c863bec067 fix tab title, system menu, and a focus
 2 files changed, 108 insertions(+), 65 deletions(-)
b52941150046cdb455c38e3f9bc133d6ba8f721f give tab a wndproc, change timer
 1 files changed, 65 insertions(+), 20 deletions(-) 
```

一些 awk 参数的来源：http: [//unstableme.blogspot.com/2008/05/print-currentnextprevious-line-using.html](http://unstableme.blogspot.com/2008/05/print-currentnextprevious-line-using.html)

# matlab - 从 2D 重建相机坐标系中的 3D 坐标 - 具有侧面条件的像素

> ID：11334012
> 
> 赞同：5
> 
> 时间：2012-07-04T18:33:57.647
> 
> 标签：matlab, computer-vision, projection, intrinsics, 3d-reconstruction

我正在尝试使用侧面条件（在 MatLab 中）从相机图片中的 2D 像素坐标重建 3D 坐标。我确实有外在和内在的相机参数。

使用齐次变换，我可以将 3D 坐标从初始世界坐标系转换为我的相机坐标系。所以在这里我的变换矩阵 R_world_to_Camera 中有我的外部参数：

```
R_world_to_Camera = [ r_11, r_12, r_13, t1;
r_21, r_22, r_23, t2;
r_31, r_32, r_33, t3;
0, 0, 0, 1]; 
```

对于内在参数，我使用了加州理工学院的“用于 MatLab 的相机校准工具箱”并获得了这些参数：

```
Calibration results (with uncertainties): 

 Focal Length:          fc = [ 1017.21523   1012.54901 ] ± [ NaN   NaN ] 
 Principal point:       cc = [ 319.50000   239.50000 ] ± [ NaN   NaN ] 
 Skew:             alpha_c = [ 0.00000 ] ± [ NaN  ]   => angle of pixel axes = 90.00000 ± NaN degrees 
 Distortion:            kc = [ 0.00000   0.00000   0.00000   0.00000  0.00000 ] ± [ NaN   NaN   NaN   NaN    NaN ] 
 Pixel error:          err = [ 0.11596   0.14469 ] 

 Note: The numerical errors are approximately three times the standard deviations (for reference). 
```

所以我得到了Camera-Calibration-Matrix K (3x3)

```
K = [1.017215234570303e+03, 0, 3.195000000000000e+02; 
0, 1.012549014668498e+03,2.395000000000000e+02; 
0, 0, 1.0000]; 
```

并使用它我可以计算 3D -> 2D - Projection-Matrix P (3x4)：

```
P = K * [eye(3), zeros(3,1)]; 
```

当转换世界坐标 [X, Y, Z]_World 中的点时，我首先将其转换为相机坐标，然后将其投影为 2D：

```
% Transformation
P_world = [X; Y; Z; 1]; % homogenous coordinates in World coordinate System
P_camera = R_world_to_Camera * [X; Y; Z; 1];

% Projection
P_pixels = P * camera;
P_pixels = P_pixels / P_pixels(3); % normalize coordinates 
```

所以我现在的问题是如何扭转这些步骤？作为附带条件，我想将 Z 坐标设置为已知（世界坐标为零）。[我在 Stackoverflow 上](https://stackoverflow.com/questions/7836134/get-3d-coord-from-2d-image-pixel-if-we-know-extrinsic-and-intrinsic-parameters)尝试了这里提出的解决方案，但不知何故我得到了错误的坐标。任何的想法？非常感谢每一个帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T02:39:57.460

一般情况下，您无法反转该步骤：当 3D 点投影到 2D 图像上时，深度和比例信息会丢失。但是，如您所指出的，如果您的所有 3D 点都在 Z=0 平面上，那么从投影中取回它们是微不足道的：计算相机矩阵的逆 Ki = K^-1，并将其应用于图像点在齐次坐标中。

P_camera = Ki * [u, v, 1]'

其中 [u, v] 是图像坐标，撇号表示转置。您想要的 3D 点位于从相机中心到 P_camera 的光线上。用世界坐标表示：

P_world = [R|t]_camera_to_world * [P_camera, 1]'

C_world = [R|t]_camera_to_world * [0, 0, 0, 1]'

其中 [R|t] 是 4x4 坐标变换。现在，每条射线上的点集表示为

P = C_world + λ * P_world；

其中 lambda 是一个标量（沿射线的坐标）。您现在可以施加 P(3) = 0 的条件来找到将您的点放在 Z = 0 平面上的 lambda 值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-06T17:48:27.303

多亏了一些红酒和彻底的阅读，我在（德国）硕士论文中找到了答案：）我的“测试代码”如下：

```
% Clean-Up First 
clear all; 
close all; 
clc; 

% Caamera-Calibration-Matrix
 K = [1.017215234570303e+03, 0, 3.195000000000000e+02, 0; 
0, 1.012549014668498e+03,2.395000000000000e+02, 0; 
0, 0, 1.0000, 0; 
0, 0, 0, 0]; 

% Transforma Matrix from 3D-World-Coordinate System to 3D-Camera-Coordinate System (Origin on CCD-Chip) 
% 
% The Camera is oriented "looking" into positive X-Direction of the World-Coordinate-System. On the picture,
% positive Y-Direction will be to the left, positive Z-Direction to the top. (right hand coordinate system!)
 R_World_to_Cam = [-0.0113242625465167   -0.999822053685344   0.0151163536128891   141.173585444427; 
0.00842007509644635   -0.0152123858102325   -0.999848810645587   1611.96528372161; 
0.999900032304804   -0.0111955728474261   0.00859117128537919   847.090629282911; 
0   0   0   1]; 

% Projection- and Transforma Matrix P 
 P = K * R_World_to_Cam; 

% arbitrary Points X_World in World-Coordinate-System [mm] (homogenous Coordinates) 
% forming a square of size 10m x 4m 
 X_World_1 = [20000; 2000; 0; 1]; 
 X_World_2 = [20000; -2000; 0; 1]; 
 X_World_3 = [10000; 2000; 0; 1]; 
 X_World_4 = [10000; -2000; 0; 1]; 

% Transform and Project from 3D-World -> 2D-Picture 
 X_Pic_1 = P * X_World_1; 
 X_Pic_2 = P * X_World_2; 
 X_Pic_3 = P * X_World_3; 
 X_Pic_4 = P * X_World_4; 

% normalize homogenous Coordinates (3rd Element has to be 1!) 
 X_Pic_1 = X_Pic_1 / X_Pic_1(3); 
 X_Pic_2 = X_Pic_2 / X_Pic_2(3); 
 X_Pic_3 = X_Pic_3 / X_Pic_3(3); 
 X_Pic_4 = X_Pic_4 / X_Pic_4(3); 

% Now for reverse procedure take arbitrary points in Camera-Picture... 
% (for simplicity, take points from above and "go" 30px to the right and 40px down) 
 X_Pic_backtransform_1 = X_Pic_1(1:3) + [30; 40; 0]; 
 X_Pic_backtransform_2 = X_Pic_2(1:3) + [30; 40; 0]; 
 X_Pic_backtransform_3 = X_Pic_3(1:3) + [30; 40; 0]; 
 X_Pic_backtransform_4 = X_Pic_4(1:3) + [30; 40; 0]; 

% ... and transform back following the formula from the Master Thesis (in German):
% Ilker Savas, "Entwicklung eines Systems zur visuellen Positionsbestimmung von Interaktionspartnern" 
 M_Mat = P(1:3,1:3);                 % Matrix M is the "top-front" 3x3 part 
 p_4 = P(1:3,4);                     % Vector p_4 is the "top-rear" 1x3 part 
 C_tilde = - inv( M_Mat ) * p_4;     % calculate C_tilde 

% Invert Projection with Side-Condition ( Z = 0 ) and Transform back to 
% World-Coordinate-System 
 X_Tilde_1 = inv( M_Mat ) * X_Pic_backtransform_1; 
 X_Tilde_2 = inv( M_Mat ) * X_Pic_backtransform_2; 
 X_Tilde_3 = inv( M_Mat ) * X_Pic_backtransform_3; 
 X_Tilde_4 = inv( M_Mat ) * X_Pic_backtransform_4; 

 mue_N_1 = -C_tilde(3) / X_Tilde_1(3); 
 mue_N_2 = -C_tilde(3) / X_Tilde_2(3); 
 mue_N_3 = -C_tilde(3) / X_Tilde_3(3); 
 mue_N_4 = -C_tilde(3) / X_Tilde_4(3); 

% Do the inversion of above steps... 
 X_World_backtransform_1 = mue_N_1 * inv( M_Mat ) * X_Pic_backtransform_1 + C_tilde; 
 X_World_backtransform_2 = mue_N_2 * inv( M_Mat ) * X_Pic_backtransform_2 + C_tilde; 
 X_World_backtransform_3 = mue_N_3 * inv( M_Mat ) * X_Pic_backtransform_3 + C_tilde; 
 X_World_backtransform_4 = mue_N_4 * inv( M_Mat ) * X_Pic_backtransform_4 + C_tilde; 

% Plot everything
figure(1); 
% First Bird Perspective of World-Coordinate System... 
subplot(1,2,1); 
xlabel('Y-World'); 
ylabel('X-World'); 
grid on; 
axis([-3000 3000 0 22000]); 
hold on; 

plot( -X_World_1(2), X_World_1(1), 'bo' ); 
plot( -X_World_2(2), X_World_2(1), 'bo' ); 
plot( -X_World_3(2), X_World_3(1), 'bo' ); 
plot( -X_World_4(2), X_World_4(1), 'bo' ); 
line([-X_World_1(2) -X_World_2(2) -X_World_4(2) -X_World_3(2) -X_World_1(2)], [X_World_1(1) X_World_2(1) X_World_4(1) X_World_3(1) X_World_1(1)], 'Color', 'blue' ); 

plot( -X_World_backtransform_1(2), X_World_backtransform_1(1), 'ro' ); 
plot( -X_World_backtransform_2(2), X_World_backtransform_2(1), 'ro' ); 
plot( -X_World_backtransform_3(2), X_World_backtransform_3(1), 'ro' ); 
plot( -X_World_backtransform_4(2), X_World_backtransform_4(1), 'ro' ); 
line([-X_World_backtransform_1(2) -X_World_backtransform_2(2) -X_World_backtransform_4(2) -X_World_backtransform_3(2) -X_World_backtransform_1(2)], [X_World_backtransform_1(1) X_World_backtransform_2(1) X_World_backtransform_4(1) X_World_backtransform_3(1) X_World_backtransform_1(1)], 'Color', 'red' ); 

hold off; 

% ...then the camera picture (perspective!)
subplot(1,2,2); 
hold on; 
image(ones(480,640).*255); 
colormap(gray(256)); 
axis([0 640 -480 0]); 
line([X_Pic_1(1) X_Pic_2(1) X_Pic_4(1) X_Pic_3(1) X_Pic_1(1)], -1*[X_Pic_1(2) X_Pic_2(2) X_Pic_4(2) X_Pic_3(2) X_Pic_1(2)], 'Color', 'blue' ); 
line([X_Pic_backtransform_1(1) X_Pic_backtransform_2(1) X_Pic_backtransform_4(1) X_Pic_backtransform_3(1) X_Pic_backtransform_1(1)], -1*[X_Pic_backtransform_1(2) X_Pic_backtransform_2(2) X_Pic_backtransform_4(2) X_Pic_backtransform_3(2) X_Pic_backtransform_1(2)], 'Color', 'red' ); 
hold off; 
```

# android - SQL 查询不从数据库中读取数据

> ID：11334015
> 
> 赞同：0
> 
> 时间：2012-07-04T18:34:05.733
> 
> 标签：android, sql

所以我有两个从数据库读取数据并将数据写入字符串的游标，但即使数据库已存储数据，游标也始终为空。我用 SQLite 管理器检查了数据库是否包含存储的数据。日志猫说日志名为：“IF1”和“IF2”被执行。这是我的代码，我希望有人能找出问题所在..

```
String var;
final TextView t = (TextView) findViewById(R.id.textView2);
final TextView t2 = (TextView) findViewById(R.id.textView3);
Intent intent = getIntent();
var = intent.getStringExtra("datum");   

SQLiteDatabase db = openOrCreateDatabase ("MyDB", MODE_PRIVATE, null);

String q =" SELECT COALESCE (znak, '') as znak,COALESCE (sprava, '') as sprava, COALESCE(serija, '') as serija, COALESCE(podatak, '') as podatak, COALESCE(ponavljanja, '') as ponavljanja, vrijeme FROM tablica WHERE vrijeme LIKE '"+ var + "'" ;
Cursor c = db.rawQuery(q, null);      

String xy = "SELECT vrijeme FROM tablica WHERE vrijeme LIKE '"+ var + "'";
Cursor dd = db.rawQuery(xy, null);

if (dd.getCount() < 1) {
    Log.d("LIST.DETAILS", "IF1");
    dd.close();
    db.close();
    Toast.makeText(NapredakActivity.this, "Empty!", Toast.LENGTH_SHORT).show();
    startActivity(new Intent(this, calendar.class));
} else {
    String i = "";

    dd.moveToFirst();
    String st2 = dd.getString(dd.getColumnIndex("vrijeme"));
    i =  "Datum:" +"\t" + st2;
    t2.setText(i);
    dd.close(); 
}

if (c.getCount() < 1) {
    Log.d("LISTA.DETALJI", "IF2");
    c.close();
    db.close();
    Toast.makeText(NapredakActivity.this, "Empty!", Toast.LENGTH_SHORT).show();
    startActivity(new Intent(this, calendar.class));
} else {
    String j = "";

    c.moveToFirst();
    do {
        String cm55 = c.getString(c.getColumnIndex("sprava"));
        String cm = c.getString(c.getColumnIndex("serija"));
        String cm2 = c.getString(c.getColumnIndex("podatak"));
        String cm3 = c.getString(c.getColumnIndex("ponavljanja"));
        String cm_znak = c.getString(c.getColumnIndex("znak"));

        j = j +cm55+ "\n" + cm + "\t"  +cm2 +cm_znak + cm3 ;
    } while (c.moveToNext());

    t.setText(j);
    c.close();
    db.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:38:55.850

我相信您缺少 WHERE 子句中的通配符：

```
"vrijeme LIKE '%"+ var + "%'" 
```

除此以外：

```
"vrijeme LIKE '"+ var + "'" 
```

是相同的：

```
"vrijeme = '"+ var + "'" 
```

另外我猜英语不是你的第一语言，但你的变量名非常神秘。考虑使用更具描述性的名称，它只会有助于代码的可读性。

# php - 如何检查给定的非凸区域是否与给定的矩形完全重叠

> ID：11334016
> 
> 赞同：1
> 
> 时间：2012-07-04T18:34:19.753
> 
> 标签：php, javascript, svg, geometry

是否有任何定义明确的算法来检查给定的*非凸*区域是否与给定的矩形完全重叠？两种形状都由折线定义，所以我们正在做矢量几何。我不想要碰撞检测，只想要完全重叠。

故事如下：我们有一个 SVG 画布，用户可以在上面放置矩形，可能是旋转的。在画布上存在基本的图层系统（每个矩形都在它自己的图层上）。请求是这样的：删除一个被其他矩形重叠的矩形完全遮挡的矩形。因此，除了给定矩形之外的矩形形成非凸区域，也可能是不连续的。

目标编程语言是 PHP，但欢迎使用任何语言的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:51:54.423

您可能想查看一些空间拓扑套件（例如带有各种端口的JTS [http://www.vividsolutions.com/jts/jtshome.htm ）](http://www.vividsolutions.com/jts/jtshome.htm)

您可以对多个几何图形进行联合/相交等操作，在您的情况下，如果您将复杂多边形与矩形联合，则结果应该是原始多边形，否则矩形在某处“窥视”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T18:45:02.147

这并不微妙，但您可以检查对象的任何点是否位于矩形的边界内，如果有，则它不会完全覆盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T19:58:00.337

我不知道旋转矩形时会发生什么..但这是我的第一个，很有可能我已经走了。因为这是针对 SVG 的，所以我使用的是 javascript。如果有用的话，移植到 PHP 上应该比较简单。

```
(function(win) {
    function Rectangle(el) {
       this.element = el;
       this._area = ''
       Rectangle.instances.push(this);
    }
    Rectangle.instances = [];
    Rectangle.largest = function() {
       var areas = Rectangle.collect('area');
       var largest_area = Math.max.apply(Math, areas); 
       return Rectangle.instances[areas.indexOf(largest_area)]
    }
    Rectangle.collect = function(prop) {
       var props = [], m;
       for (var i=0, l = Rectangle.instances.length; i<l; i++) {
          if (m = Rectangle.instances[i][prop]) {
             var val = (typeof m === 'function') ? m.call(Rectangle.instances[i]) : m;
             props.push(val);
          }      
       }
       return props;
    }
    Rectangle.prototype.area = function() {
       if (!this._area) { this._area = this.element.width * this.element.height; }
       return this._area;
    }

    Rectangle.prototype.overlaps = function(r) {
       var origin_inside = r.element.x <= this.element.x && r.element.y <= this.element.y,
           ends_inside_x = r.element.x + r.element.width >= this.element.x + this.element.width,
           ends_inside_y = r.element.y + r.element.height >= this.element.y + this.element.height;

       return origin_inside && ends_inside_x && ends_inside_y

    }

  rect1 = new Rectangle({width:10, height: 20, x:10, y:30});
  rect2 = new Rectangle({width:5, height: 30, x:20, y:40});
  rect3 = new Rectangle({width:5, height: 1, x:12, y:31});

  console.log(rect2.overlaps(rect1)) //false
  console.log(Rectangle.largest().overlaps(rect2)) //false
  console.log(rect2.overlaps(rect2)) //true
  console.log(rect3.overlaps(rect1)) //true

   //to use this with actual SVG elements, 

   var svgCanvas = document.getElementById('svgElementId');
   var ctx = svgCanvas.contentDocument

   svgr1 = new Rectangle(ctx.getElementById('rect1'))
   svgr2 = new Rectangle(ctx.getElementById('rect2'))

   console.log(svgr1.overlaps(svgr2)) //true

})(this); 
```

# javascript - 编辑 Javascript 时不断弹出 Eclipse 错误

> ID：11334026
> 
> 赞同：59
> 
> 时间：2012-07-04T18:35:01.210
> 
> 标签：javascript, eclipse

我正在 Eclipse 中处理相对较小（100-300 行）的 Javascript 文件，并且它会定期对某些代码感到非常不安，并且每次我将光标放在该行上时都会弹出此错误。错误是：

```
'Requesting JavaScript AST from Selection' has encountered a problem. 
An internal error occured during "Requesting JavaScript AST from selection". 
java.lang.NullPointerException 
```

当我转换这个时：

```
if(p){
    // enter code here
} else { return false; } 
```

进入这个：

```
if(p){
    // enter code here
} return false; 
```

错误弹出几次。每次它停止我的打字并要求我单击确定按钮。然后我再输入两个字符，错误再次出现。

任何想法如何防止错误或禁用任何 Javascript AST 是什么？

这是在 Eclipse Java EE，Indigo Service Release 2 上。它几乎是一个平面安装，只安装了两个插件，既不是用于 SVN，也与 Javascript 无关。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-09T19:11:26.160

一个更好的答案（来自 Cliff Ribaudo 链接的错误报告，评论 #10 和其他人）：

关闭 Toggle Mark Occurrences（Alt-Shift-O 或工具栏上的画笔图标，可以方便地显示您当前的状态）。

谢谢克里夫！

编辑：

![通过首选项](../Images/0a8338c4cca82866e849021b309ef177.png)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-08-08T16:35:14.430

起初我认为这只是一个技巧，但它运作良好，我不得不将它作为实际答案发布。

当错误窗口弹出时，不要关闭它。只需将其拖到一边，重新关注主窗口并继续编辑。

当错误再次发生时，Eclipse 不会将焦点更改回错误消息。焦点停留在编辑窗口中，您可以继续编辑文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T18:40:06.353

可能是一个日食错误。看到这个线程：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=359005](https://bugs.eclipse.org/bugs/show_bug.cgi?id=359005)

那里发布了一个补丁，您可以尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T15:23:59.420

具有讽刺意味的是，我的解决方案是安装另一个插件。在我安装[VJET](http://eclipse.org/vjet/)并将我的 JavaScript 项目设置为支持 VJET 的项目后，问题就消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-21T07:50:31.117

只需替换 .project 文件中的 xml（位于 eclipse 工作区的主目录中。

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>your Project Name</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
    </buildSpec>
    <natures>
    </natures>
</projectDescription> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-21T22:27:35.420

我最近一直收到这个错误。我正在编写 Groovy 脚本。我的解决方法是更新 Groovy 插件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-28T06:24:34.587

我在错误**`gc overhead limit exceeded`**的详细信息部分中遇到了与描述相同的错误。为了对其采取行动，我在配置中添加了以下内容并解决了问题。

```
Xms512m
Xmx2048m 
```

参考：[超过 GC 开销限制的问题](https://docs.oseems.com/general/application/eclipse/fix-gc-overhead-limit-exceeded)

简而言之，对我来说这是日食内存问题。

# iphone - 如何创建一个基于输入 xml 生成动画的 iphone 应用程序

> ID：11334036
> 
> 赞同：0
> 
> 时间：2012-07-04T18:37:09.890
> 
> 标签：iphone, ios, xml, ipad, core-animation

我必须创建一个 iphone 应用程序，该应用程序从 xml 获取输入并据此生成动画，类似于 swf 及其 swf 标签，

例如，我会说某个位置和某个尺寸的图像在舞台上停留 3 秒...

基本上我需要一个播放器来播放我所有的 swf 文件，我可以生成这些文件的 xml 表示...

我想知道如何做同样的事情，或者如果有人有这方面的经验，任何帮助将不胜感激

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:30:27.570

如果您的目标是播放 swf 文件，您可能需要查看 Adob​​e Air 产品。这将为您的应用程序提供完整的 Flash 支持，但代价是在您的应用程序中包含 Flash 播放器。

如果您想从 XML 文件中的数据动态创建 Core Animation 动画，您的工作已经完成。这应该是可能的，但设计和实现将是一件相当复杂的事情。你如何去做取决于你的具体要求。

# ios - 我在使用 xcodebuild 在终端中构建 iOS 项目时遇到了麻烦

> ID：11334037
> 
> 赞同：2
> 
> 时间：2012-07-04T18:37:12.053
> 
> 标签：ios, xcode, build, xcodebuild

我有一个 iOS 项目。它也可以在我的 iPhone 和 iPad 上运行。现在我想在终端中使用`xcodebuild`. 但我得到错误，它喜欢这样：

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch armv7 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wmissing-prototypes -Wno-return-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wno-unused-variable -Wunused-value -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -Wprotocol -Wdeprecated-declarations -g -fvisibility=hidden -Wno-conversion -Wno-sign-conversion -mthumb "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -miphoneos-version-min=3.2 -I/Users/zhangyangjing/Desktop/556/Tabster/build/Tabster.build/Release-iphoneos/Tabster.build/Tabster.hmap -I/Users/zhangyangjing/Desktop/556/Tabster/build/Release-iphoneos/include -I/Users/zhangyangjing/Desktop/556/Tabster/build/Tabster.build/Release-iphoneos/Tabster.build/DerivedSources/armv7 -I/Users/zhangyangjing/Desktop/556/Tabster/build/Tabster.build/Release-iphoneos/Tabster.build/DerivedSources -F/Users/zhangyangjing/Desktop/556/Tabster/build/Release-iphoneos --serialize-diagnostics /var/folders/34/1khlf2gx2t5bkm3llcs1mhmr0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/Prefix-dnpnglnqyykokvgarilsbxpvuaap/Prefix.pch.dia -c /Users/zhangyangjing/Desktop/556/Tabster/Prefix.pch -o /var/folders/34/1khlf2gx2t5bkm3llcs1mhmr0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/Prefix-dnpnglnqyykokvgarilsbxpvuaap/Prefix.pch.pth -MMD -MT dependencies -MF /var/folders/34/1khlf2gx2t5bkm3llcs1mhmr0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/Prefix-dnpnglnqyykokvgarilsbxpvuaap/Prefix.pch.d
In file included from /Users/zhangyangjing/Desktop/556/Tabster/Prefix.pch:2:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:6:
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CoreFoundation.h:38:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/Headers/CFBase.h:108:16: fatal error: 'CoreServices/../Frameworks/CarbonCore.framework/Headers/MacTypes.h' file not found
      #include <CoreServices/../Frameworks/CarbonCore.framework/Headers/MacTypes.h>

** BUILD FAILED ** 
```

以下构建命令失败：

```
ProcessPCH /var/folders/34/1khlf2gx2t5bkm3llcs1mhmr0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/Prefix-dnpnglnqyykokvgarilsbxpvuaap/Prefix.pch.pth Prefix.pch normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
(1 failure) 
```

我已经尝试过 Apple 的演示项目，他们也遇到了同样的错误。我疯了，谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:55:06.087

我解决它。做就是了：

```
cd /usr/bin
rm xcodebuild
ln -s /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild xcodebuild 
```

# javascript - 谷歌地图删除控件

> ID：11334042
> 
> 赞同：16
> 
> 时间：2012-07-04T18:37:42.260
> 
> 标签：javascript, html, css, google-maps

我正在尝试创建我公司位置的 Google 地图。我使用了谷歌地图页面上的链接按钮。一切都很好，但是当我将地图缩小到 200 x 200 时，所有地图控件都会接管地图并阻止地图上的视图。有没有办法摆脱它们？我想要的只是图钉和放大和缩小按钮。谢谢你。

```
<iframe width="200" height="200" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"    src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=244+5th+Avenue,+New+York,+NY&amp;aq=t&amp;sll=37.0625,-95.677068&amp;sspn=48.956293,107.138672&amp;ie=UTF8&amp;hq=&amp;hnear=244+5th+Ave,+New+York,+10016&amp;ll=40.744556,-73.987378&amp;spn=0.005763,0.013078&amp;t=m&amp;z=14&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=244+5th+Avenue,+New+York,+NY&amp;aq=t&amp;sll=37.0625,-95.677068&amp;sspn=48.956293,107.138672&amp;ie=UTF8&amp;hq=&amp;hnear=244+5th+Ave,+New+York,+10016&amp;ll=40.744556,-73.987378&amp;spn=0.005763,0.013078&amp;t=m&amp;z=14" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-04T19:03:21.003

要自定义界面，相信您必须深入研究Google Maps API。

使用 Google Maps API，您可以设置`disableDefaultUI`为 true。

HTML 文件：

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="map.js"></script>
</head>
<body>
    <div id="map" style="width:200px; height:200px;" />
</body>
</html> 
```

JavaScript 文件：

```
window.onload = function() {
    var myOptions = {
        center: new google.maps.LatLng(40.744556,-73.987378),
        zoom: 18,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        disableDefaultUI: true
    };

    var map = new google.maps.Map(document.getElementById("map"), myOptions);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-04T18:54:52.470

我不相信嵌入地图时可以隐藏控件。您将需要使用[Google Maps API](https://developers.google.com/maps/)在 javascript 中创建地图- 在以下行中：

```
var mapContainer = document.getElementById('mapContainer');
var mapOptions = {
    panControl: false,
    zoomControl: false,
    scaleControl: false,
};
var map = new google.maps.Map(mapContainer, mapOptions); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-06T12:51:38.130

没有使用 IFRAME 隐藏控件的参数，请查看以下链接以查看可能的参数：

> [http://moz.com/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters](http://moz.com/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)

如果不想使用 API，可以使用 CSS 来隐藏地图的边缘：

CSS：

```
.mapaThumb { position:relative; }
.mapaThumb iframe{ width:200px; height:240px; margin-top:-40px; margin-left:-10px; }
.mapaThumb .mapaItem{ overflow:hidden; height:150px; } 
```

HTML：

```
<div class="mapaThumb">
    <div class="mapaItem">
        <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com.br/maps?f=q&amp;source=s_q&amp;hl=pt-BR&amp;geocode=&amp;q=brazil&amp;aq=&amp;sll=-21.086832,-42.409844&amp;sspn=0.895645,1.674042&amp;ie=UTF8&amp;hq=&amp;hnear=Rep%C3%BAblica+Federativa+do+Brasil&amp;t=m&amp;z=4&amp;ll=-14.235004,-51.92528&amp;output=embed"></iframe>
    </div>
</div> 
```

这不是最正确的，但它有效！中国圣人传授的老把戏。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2015-09-09T20:48:28.070

[只需在此处](http://www.map-embed.com/)设置您的 Google 地图样式，单击“生成代码”并将其嵌入`<body>`您的网站。

# ios - iOS5中的HTTP头用户代理

> ID：11334044
> 
> 赞同：0
> 
> 时间：2012-07-04T18:37:50.550
> 
> 标签：ios

最近我正在开发一个使用 .net Web 服务的 iOS 应用程序。在对 Web 服务方法调用的发布请求中，我不小心将 http 标头中的用户代理指定为

Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.1；WOW64；Trident/5.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；MDDS；. NET4.0C；.NET4.0E；InfoPath.2；MS-RTC LM 8；BRI/2)

Web 服务调用是通过简单的 NSURLConnection 完成的。我还可以通过成功调用该 Web 服务方法在 iOS 设备上运行该应用程序。我的问题是 iOS 会忽略 HTTP 标头中的任何指定用户代理吗？为什么代码可以与这种不兼容的用户代理一起工作[至少在理论上]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:42:22.387

服务器至少以两种方式使用 User-Agent 字符串：

1.  **收集**有关使用哪些 Web 客户端访问服务器的统计信息。这可以帮助运行网站的人做得更好。

2.  **通过根据客户端的功能定制输出来提供更好的用户体验**。例如，许多网站在检测到（通过 User-Agent 值）客户端是手机或小型平板电脑时，会提供为小屏幕定制的页面。

但是，当您调用 Web 服务时，您通常期望 XML 或 JSON 输出实际上不需要为给定的浏览器定制，因为：a) 请求可能不是来自浏览器首先，并且 b) 内容不太可能呈现在显示器上（至少不是直接呈现）。因此，用户代理字符串可能不会对服务器响应您的 Web 服务请求的方式产生任何影响。或者无论如何，当您从 iOS 设备发出 Web 服务请求时，提供一个显示“MSIE”的 User-Agent 字符串可能不会对您返回的内容产生影响。

现在，这并不是说 User-Agent 字符串永远不会产生影响。我不知道这是否是常见的做法，但在您同时控制客户端和服务器的情况下，让客户端提供一个明智的用户代理是很有意义的。让客户端包含其版本将使服务器根据客户端版本提供不同的输出，因此您可以在不破坏现有客户端的情况下更改 API。

# git - 如何在 GitHub.com 中设置默认分支？

> ID：11334045
> 
> 赞同：20
> 
> 时间：2012-07-04T18:37:51.607
> 
> 标签：git, version-control, github, repository

我找到了以下信息，但没有找到去哪里访问它。账户设置里没找到。有回购设置页面吗？你必须是回购所有者吗？

[https://github.com/blog/421-pick-your-default-branch](https://github.com/blog/421-pick-your-default-branch)

浏览提交时如何在**github.com**上设置默认分支。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-04T18:42:37.447

> 你必须是回购所有者吗？

是的你是。

> 浏览提交时如何在 github.com 上设置默认分支。

如果您分叉存储库，您可以通过单击设置按钮（见下文）来更改分叉**的**默认**分支**。

这将允许您选择您最喜欢的分支作为您自己的 fork 的默认分支，但您必须自己使您的分叉存储库与上游存储库保持同步。

![设置](../Images/107ebd8b6e176756445471d63a6a46d5.png)

或者可以直接跳转到下面的url`https://github.com/{:user}/{:repo}/settings`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-27T19:48:47.230

只需登录您的 GitHub 帐户，然后在导航菜单的最右侧选择**Settings**，在**Settings 选项卡**中选择**Default Branch**并返回到存储库的主页。

这是答案的视觉效果：

[![在此处输入图像描述](../Images/8a0fcfb4bfeeb2dcefa09608ebb38c39.png)](https://i.stack.imgur.com/6ijH3.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-02-04T02:51:52.227

## **2021 更新**

当前的 GitHub UI 已经发生了很大的变化——以前是按钮，现在是 repo 主页顶部的选项卡：

[![当前默认分支是 1.8](../Images/4a4c1665fa7ddabc95ac1d5cd6d74228.png)](https://i.stack.imgur.com/2LzLI.png)

单击设置选项卡，然后在左侧单击分支：

[![分支选项](../Images/da03d1b5c3b5855549845255e268c017.png)](https://i.stack.imgur.com/bvTxJ.png)

将鼠标悬停在开关分支图标（右/左箭头，图片右下角）上会弹出一个提示。[或单击铅笔图标为默认分支指定新名称]：

[![将鼠标悬停在开关分支图标上](../Images/838af6453fe34aa7ffa2358c3385059b.png)](https://i.stack.imgur.com/nQana.png)

点击 switch branch 会弹出一个分支列表：

[![分支列表](../Images/abf607854be2ef3d010b7403f5c95d4a.png)](https://i.stack.imgur.com/w2wBS.png)

选择新的默认分支（我选择了 master），单击更新，并确认您知道自己在做什么：

[![确认新的默认值](../Images/7510754e9cc7b4c4a4452e10bd8f7219.png)](https://i.stack.imgur.com/UJqXv.png)

瞧！

[![master 是新的默认分支](../Images/06aba7f003cbbf0d38f17731dc99b26a.png)](https://i.stack.imgur.com/czJRF.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-31T06:44:26.743

最初，我确认“默认分支”是“主”，即使克隆默认为另一个分支“stackato”。这是我尝试过的...

**改变和改变回来**

1.  设置中的主要/顶部选项标题为“选项”，我将“默认分支”从“主”（我想要的）更改为我不想要的第三个分支名称，但与出现的“stackato”不同当我克隆
2.  我从左侧的菜单中选择了“合作者”
3.  我再次从左侧菜单中选择了“选项”，并确认我从 #1 中的选择仍然有效（告诉我它可能已自动保存）
4.  我将“默认分支”改回“主”
5.  我再次从左侧菜单中选择了“协作者”
6.  我最后一次从左侧菜单中选择了“选项”，并确认我的“主人”仍然处于活动状态（告诉我它可能已经自动保存）

**和/或 稍等片刻**

我不能排除我的更改“传播”只是需要一些时间的可能性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-23T11:26:21.640

这从 github 界面非常容易。您只需进入要更改默认分支的存储库，然后单击页面右侧的设置：

![在此处输入图像描述](../Images/bfcab1794473bf1725cc89623389daf4.png)

然后，在里面你只需要根据需要更改分支：

![在此处输入图像描述](../Images/195f0775d4b1c4cef07d2a862a1fe6d6.png)

# javascript - 根据在弹出窗口中单击的按钮返回 true 或 false

> ID：11334047
> 
> 赞同：0
> 
> 时间：2012-07-04T18:38:11.067
> 
> 标签：javascript, callback, form-submit

好的，所以使用 jQuery 我已经截获了表单的 .submit() 并且我想创建一个自定义弹出窗口，向他们显示输入的数据并要求他们确认。如果他们单击确认按钮，则 true 返回到 .submit() 并继续，但如果按下 false，则他们不应继续前进并有机会更改其条目。

我已经使弹出窗口正常显示了表单的内容和显示的按钮。我不知道该怎么做是绑定按钮的单击功能，以便如果单击一个按钮，它将返回 false 到 .submit()，如果单击另一个按钮，则返回 true 到 .submit()

如果您需要我发布我的一些代码，请告诉我。

我不想使用确认对话，因为我希望它是一个自定义弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:40:20.423

您需要使用`confirm()`对话：

```
var submit = confirm('Are you sure?');

if (submit) {
    $(this).submit();
}
else {
    return false;
} 
```

这通过向`"Are you sure?"`用户显示消息的对话框来工作，如果用户单击确认`ok`按钮，则对话框返回`true`变量`submit`，否则返回`false`。

如果`false`返回（用户单击`cancel`），则`if`计算结果为`false`，并`else`执行 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:55:48.573

您需要将 .submit() 作为回调函数传递给对话。这不是单行解决方案，而是您应该熟悉的模式。此[http://www.youtube.com/watch?v=hQVTIJBZook](http://www.youtube.com/watch?v=hQVTIJBZook)可能会对本主题的某些内容以及您可能遇到的其他常见问题有所帮助

例子：

```
function openPopup(form) {
    //
    // Put whatever code you use to open you
    // popup here
    //

    // Bind click handler to submit form if they click confim
    $("#id_of_confim_button").on("click", function() {
        // Get the form that was
        form.submit();
    });

    // Bind click handler for cancel button
    $("#id_of_cancel_button").on("click", function() {
        //
        // Code to close your popup
        //
    });
};

$("#id_of_form_submit_button").on("click", function(event) {
    // Stops the form from submitting
    event.preventDefault();

    // Get the form you want to submit
    var form = $("#form_being_submit");

    // Call your 'open custom popup' function and pass
    // the form that should be submitted as an argument
    openPopup(form);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:32:27.727

仅捕获此表单的提交`click`事件不会处理所有情况（例如，如果有人在非文本区域输入上按 Enter，则表单也会提交）。

如果我想以异步方式处理提交，我曾经`submit`在阻止原始文件并进入`isDirty`状态后手动触发：

```
(function () {
  var isDirty = true;
  $("form#id").on("submit", function ( evt ) {
    if (isDirty) {
      evt.preventDefault();
      popup( "... params ...", function () {
        // this will called, when the popup ensures the form can be submitted
        // ... & it will be called by the popup
        isDirty = false;
        $("form#id").submit();
      } );
    }
  });
})(); 
```

# java - 调试 java web 应用程序

> ID：11334048
> 
> 赞同：0
> 
> 时间：2012-07-04T18:38:11.970
> 
> 标签：java, debugging, jsp, servlets

我有一个第三方应用程序，它有很多 servlet 和 jsp。我想通过在我的本地 jboss 服务器上放置断点来调试它。我怎么知道，对于一个特定的请求，该请求正在由特定的 java 类和 jsp 处理，以便我可以在正确的文件中放置断点？我正在考虑在设置断点之前浏览代码，以了解将它们放在哪里。但我觉得这不是一种有效的方法（因为它是一个非常大的应用程序）。您能否建议是否有更好的方法来做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:43:55.070

web.xml 文件包含`servlet-mapping`指示哪些 servlet 映射到哪些 URL 的元素。因此，如果您知道 URL，您应该很容易找到相应的 servlet。现在您可以阅读 servlet 代码以查看涉及哪些其他类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:57:05.607

我认为调试此类应用程序的最快方法是针对特定用例分析应用程序，通过这种方式您可以了解用于此场景的哪些类，并且在找到类后，您可以调试这些类。

对于分析应用程序，有很多工具。

**商业**：[Yourkit](http://www.yourkit.com/)，[JProfiler](http://www.ej-technologies.com/index.html)，[JProbe](https://support.quest.com/jprobe/9.7)

**开源**：[VisualVM](http://visualvm.java.net/)、[Javacalltracer](http://sourceforge.net/projects/javacalltracer/)（创建运行时序列图）

# android - facebook auth dialog return 找不到您请求的页面，而不是重定向回我的活动？

> ID：11334049
> 
> 赞同：5
> 
> 时间：2012-07-04T18:38:14.040
> 
> 标签：android, facebook

尝试登录过去运行良好的应用程序时，我可以登录，然后`The page you requested was not found`在身份验证对话框中看到，而不是重定向回我的活动。我知道这是 Facebook 的问题。

![在此处输入图像描述](../Images/6414265fd3e30410af2c46a6fb6f5d0e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:48:34.527

我上个月遇到这个问题大约20个小时，然后就解决了。要查看是否是 Facebook 的问题，请转到 developers.facebook.com 上的应用仪表板并尝试编辑设置。如果你在那里遇到错误，你将不得不等到它得到解决。

Facebook 通常会在周二/周三推送更新，因此可能会很快得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T19:07:00.360

我遇到了同样的问题。解决方案最终将传递给`dialog(...)`方法的第二个参数更改为`"feed"`而不是`"publish.stream"`. 像这样：

```
facebook.dialog(StoryActivity.this, "feed", params, new Facebook.DialogListener() {
    // Overridden methods
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-04T04:13:28.633

我遇到了同样的问题。解决方案最终将传递给`dialog(...)`方法的第二个参数更改`"feed"`为`"publish.stream"`：

```
facebook.dialog(StoryActivity.this, "feed", params, new Facebook.DialogListener() {
    // Overridden methods
}); 
```

# ruby - ruby on rails + devise 以及如何确保他们只登录 1 次？

> ID：11334053
> 
> 赞同：0
> 
> 时间：2012-07-04T18:38:37.180
> 
> 标签：ruby, ruby-on-rails-3, authentication, devise, ruby-on-rails-3.2

在带有设计的 ruby​​ on rails 中，如何检查用户是否登录了 1 次？可以使用同一帐户使用多个浏览器登录。

我需要每个用户只能登录一次，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:49:00.473

[正如在这里](https://stackoverflow.com/questions/7332434/devise-restrict-multiple-sessions-for-same-user/11242622#11242622)回答的那样，有一个设计[插件](https://github.com/phatworx/devise_security_extension)。

它与最新版本的设计存在[问题](https://github.com/phatworx/devise_security_extension/issues/33)，但仍然有处理问题的分叉。

# c++ - 使用 termios 和 uint8_t 对串行通信进行符号扩展

> ID：11334061
> 
> 赞同：0
> 
> 时间：2012-07-04T18:38:59.767
> 
> 标签：c++, serial-port, 32-bit, 8-bit, termios

我正在尝试使用 write() Unix 系统调用写入字节，但是我发送的任何以 1 开头的 8 位值都会变成 32 位值。我试图查看是否有任何 termios 标志来解决这个问题，但我似乎找不到任何标志。

```
struct termios config;

if(!isatty(fd)) { std::cout << "Not a TTY" << std::endl; }
if(tcgetattr(fd, &config) < 0) {std::cout << "Termios structure is broken" << std::endl;}

config.c_iflag  = 0;//&= ~(IGNBRK | BRKINT | ICRNL | INLCR | PARMRK | INPCK | ISTRIP | IXON);
config.c_oflag = 0; //&= ~(OCRNL | ONLCR | ONLRET | ONOCR | CSTOPB | ONOEOT| OFILL | OPOST);
config.c_cflag &= ~(CSIZE | PARENB | CSTOPB); // 8bits, no parity, 1 stop
config.c_cflag |= CS8 | CREAD | HUPCL;
config.c_cc[VMIN]  = 0;
config.c_cc[VTIME] = 1;

// Communication speed (simple version, using the predefined constants)
if(cfsetispeed(&config, B9600) < 0 || cfsetospeed(&config, B9600) < 0) {
    std::cout << "Speed is messed up" << std::endl;
}

// Finally, apply the configuration
if(tcsetattr(fd, TCSAFLUSH, &config) < 0) { std::cout << "Applied Configuration is broken" << std::endl;}

// uint8_t c[2] = {'D','A'};
// write(fd,&c,2);
 write(fd,&command[6],2); 
```

输入样本：

> BIN6: 10111110 -------- HEX6:be -------- DEC6: 190 -------- ASCII6: ?
> 
> BIN7: 11101100 -------- HEX7: ec -------- DEC7: 236 -------- ASCII7: ?

输出样本：

> BIN6：000000011111111111111111111111110111110 -------- HEX：FFFFFFBE -------- DEC：-66 -------- ASCII：¾
> 
> BIN7：00000001111111111111111111111111101100 -------- HEX：FFFFFFEC -------- DEC：-20

知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:42:30.380

问题不在于终端设置，而是如何将字符符号扩展为 16 位值。在您的代码片段中，您写入两个字节。如果只想写入一个字节，请将字节数更改为`1`：

```
write (fd, &command[6], 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:21:28.617

这是一个简单而愚蠢的错误——原来我是把它读成 char 而不是 unsigned char。

# objective-c - UIAppearance 删除 UIPopoverController 的自定义导航栏背景

> ID：11334062
> 
> 赞同：6
> 
> 时间：2012-07-04T18:39:04.370
> 
> 标签：objective-c, xcode, ios5, uipopovercontroller, uiappearance

我正在整合 iOS 5 的 UIAppearance 功能，为我的通用应用程序提供一个独特的主题。目前，我已经在我的 App Delegate 中实现了一些代码来为应用提供自定义导航栏：

```
UIImage *navBarImage = [[UIImage imageNamed:@"navigationBar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(7, 7, 7, 7)];
[[UINavigationBar appearance] setBackgroundImage:navBarImage forBarMetrics:UIBarMetricsDefault]; 
```

这很好用，并将所有导航栏从 Apple 的普通样式更改为明亮的渐变。但是，我遇到的问题是它覆盖了一些我也不想要的样式。我的特殊问题是它覆盖了 iPad 的 UIPopoverController 中的导航栏背景，造成了丑陋的用户体验。请告诉我如何解决它。

编辑：请注意，这是一个通用应用程序，我通过 iPad 上的 UIPopoverController 和 iPhone/iPod 上的模式视图打开图像选择器。我只想删除 iPad 弹出框上导航栏的自定义背景，而不是模式视图上的自定义背景。

它目前的样子： ![在此处输入图像描述](../Images/7b11bb1f42cdad8d683da4fec07eab5e.png)

我希望它看起来如何： ![在此处输入图像描述](../Images/7b1ab0d4db2f45475098e5c32f679256.png)

提前感谢您的帮助，古维

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T18:53:45.643

`+appearanceWhenContainedIn:`当导航栏包含在弹出框控制器中时，尝试使用该方法从导航栏中删除背景图像自定义。像这样的东西：

```
[[UINavigationBar appearanceWhenContainedIn:[UIPopoverController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

从文档中不清楚是否设置导航栏的背景图像以`nil`恢复其默认外观 - 如果这不起作用，您可能必须采取相反的方法，并提供您正在使用的非弹出容器视图控制器的列表到`+appearanceWhenContainedIn:`.

# android - Android webview：如何让双标签放大而不是缩小

> ID：11334063
> 
> 赞同：0
> 
> 时间：2012-07-04T18:39:06.887
> 
> 标签：android

我有一个以 100 的缩放级别开始的 web 视图。当我双击时，它会缩小。如何让它在第一次双击时放大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:18:33.007

尝试打电话`setLoadWithOverviewMode(true)`和`setUserWideViewPort(true)`

```
WebSettings webSettings = mWebView.getSettings();
webSettings.setSupportZoom(true);
webSettings.setBuiltInZoomControls(true);
webSettings.setDefaultZoom(WebSettings.ZoomDensity.FAR);
webSettings.setLoadWithOverviewMode(true);
webSettings.setUseWideViewPort(true); 
```

# mysql - 无法访问生产实例上的数据库

> ID：11334068
> 
> 赞同：1
> 
> 时间：2012-07-04T18:39:44.413
> 
> 标签：mysql, codeigniter, database-connection

当我的应用程序在本地服务器上时一切正常，但我无法访问生产实例上的数据库。索引页面加载没有问题（那里不需要数据库访问）。当我单击需要访问数据库的页面时，我会收到一条错误消息：
**致命错误：调用 /home/... 中的非对象上的成员函数 result_array() 第 48 行**。这是失败的代码：

```
47: $query = $this->db->get($table_name);
48: return $query->result_array(); 
```

我故意更改了*database.php*文件，因此我的数据库凭据**不正确**，并且遇到了同样的问题。我几乎可以肯定凭据是正确的。还有其他地方会影响数据库连接吗？喜欢*.htaccess*吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:53:19.613

感谢大家对此的帮助！
我发现了问题。这确实是一个数据库连接问题，但这是一个新手错误。
我认为*$config['hostname']*应该是网站的网址。但相反，它只是**localhost**。希望没有人再犯这个愚蠢的错误。

```
$config['hostname'] = "localhost"; 
```

# window - Quickly + GtkWindow 默认关闭按钮

> ID：11334076
> 
> 赞同：0
> 
> 时间：2012-07-04T18:40:58.623
> 
> 标签：window, gtk, pygtk, tray

我用 Ubuntu 快速工具制作了一个 gtk 应用程序。但是我遇到了一些关闭窗口按钮（窗口左上角的那个）的问题。所以事情是这样的：我希望我的应用程序在系统托盘中关闭，所以我在一个方法中编写代码，在我的窗口上创建一个按钮并将“点击”信号连接到我的方法。一切正常。现在我希望我的窗口关闭按钮做同样的事情。当我查找在快速编写的代码上，我发现了这种方法：

```
 def on_destroy(self, widget, data=None):
    # Clean up code for saving application state should be added here.
    Gtk.main_quit() 
```

因此，我调用了我在窗口上部署的按钮的处理程序，而不是 Gtk.main_quit()。现在的问题是我的应用程序隐藏在系统托盘上，但是当我想取消隐藏它时，没有窗口，虽然我可以看到我的应用程序的进程还活着。我想说的是，当我使用我创建的按钮时，我可以在取消隐藏它时看到我的应用程序，所以很明显，当我按下系统关闭按钮时，会有多个信号。

所以我的问题是当我从系统按钮关闭窗口时会调用哪些其他信号？以及快速实现其他信号处理程序的地方在哪里？

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:51:04.527

你的窗口是`"destroy"`。连接到该信号允许您运行一些代码，但是您的窗口仍然被破坏。如果您没有打破主循环，`Gtk.main_quit()`那么您的应用程序仍在运行。要重新显示窗口，您需要重新创建它。

另一种选择是将回调函数连接到`"delete-event"`窗口。在此信号处理程序中，如果您返回`True`，则窗口*不会*被破坏。换句话说，您可以隐藏窗口并返回`True`，然后再重新显示窗口。如果您`False`从此信号处理程序返回，则窗口将继续被销毁。

# c# - C# 从 BGW 访问 ListViewItem

> ID：11334079
> 
> 赞同：1
> 
> 时间：2012-07-04T18:41:15.567
> 
> 标签：c#, listview, backgroundworker

我正在编写一个处理数据库并将任何更改写入 ListView 以供用户处理它们的程序。之后，应该将所有更改写回 DB，但我不知道如何从 BGW 到达 ListView.ListViewItemCollection。我曾尝试使用 Control.Invoke，但我担心我还不够熟练，无法让它发挥作用。

我收到的错误说我无法从不是在其上创建的线程访问该控件

```
 private delegate void BGOUdate(ListView.ListViewItemCollection lvic);
 BGOU = new BGOUdate(ApplyChanges);
 bgw1.RunWorkerAsync(lvProducts.Items);

 private void bgwSearcher_DoWork(object sender, DoWorkEventArgs e)
    {          
        BGOU(e.Argument as ListView.ListViewItemCollection);                
    }

 private void ApplyChanges(ListView.ListViewItemCollection lvic)
    {
        ...
        foreach (ListViewItem item in lvic)
        {
            ...
        }
        ...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:22:03.457

`Control.Invoke`是正确的步行方式。但是您需要将控制权传递给后台工作人员，而不仅仅是它`ItemCollection`：

```
private void ApplyChanges(ListView lv) 
{ 
    lv.Invoke((Action)delegate
    {
        foreach (ListViewItem item in lv.Items) 
        { 
            ... 
        }
    }); 
    ... 
} 
```

这样，对 ListViewItems 的所有更改都将在创建控件的线程中进行。

`Action`是一个预定义的不带参数的 void 委托。关键字`delegate`将以下块标记为匿名函数并返回一个委托给 this，然后将其强制转换为`Action`可在控件上调用的一个。调用会`Invoke`导致传递的委托在与控件的窗口句柄关联的线程上执行，这几乎每次都是创建者线程。

也许，您应该考虑将 DataBinding 作为一种选项，以使 GUI 元素与您的数据保持同步。

# ruby-on-rails - Rails Catchall Route（应用程序允许 URL 中的用户名）

> ID：11334082
> 
> 赞同：1
> 
> 时间：2012-07-04T18:41:53.157
> 
> 标签：ruby-on-rails

我有一个简单的博客应用程序，其中用户的用户名是 URL 的一部分（即 myapp.com/username）。如何为所有未找到的用户名创建一个包罗万象的路由。目前，无效的用户名会导致：

```
NoMethodError in UsersController#show

undefined method `articles' for nil:NilClass 
```

我希望它重定向到 404 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:54:37.537

试试这个

将以下函数写入您的应用程序控制器

```
def not_found

  raise ActionController::RoutingError.new('Not Found')

结尾

```

然后在您的用户控制器中写下如下内容

User.find_by_username(params[:username]) || 未找到

希望对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:41:53.953

看起来这不是生产中的情况，它确实重定向到 404 以获取无效路由。

# couchdb - 忽略 .couchappignore 中的文件夹

> ID：11334089
> 
> 赞同：1
> 
> 时间：2012-07-04T18:42:36.017
> 
> 标签：couchdb, couchapp

我的 CouchApp 具有以下文件夹结构，其中 app 文件夹内的文件被编译到该`_attachments`文件夹​​中：

```
my_couchapp
├── _attachments/
│   ├── app.js
│   ├── app-tests.js
│   └── index.html
├── app/
│   └── app.js
├── Assetfile
└── views/ 
```

我想排除文件`Assetfile`和`_attachments/app-tests.js`文件夹`app`。

我现在的`.couchappignore`样子是这样的：

```
[
  "app",
  "Assetfile",
  "_attachments/app-tests.js"
] 
```

但这似乎不起作用。`app`所有以文件夹内开头的`_attachments`文件都不会被推送。

如何定义通过 CouchApp 推送时要排除的文件夹和特定文件`couchapp push`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:56:39.733

经过一番实验，我找到了一种方法：`app`可以通过指定排除该文件夹`app$`，所以最终`.couchappignore`现在看起来像这样：

```
[
  "app$",
  "Assetfile",
  "app-tests.js"
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T22:38:46.517

如果您来到这里寻找忽略子文件夹的方法，您就像我一样。这是我的问题：

```
my-couchapp/
├── node_modules/
│   ├── react.js
│   ├── url/
│   ├── browserify/
│   └── coffee-script/
├── app/
│   └── app.js
└── views/ 
```

我想包含`node_modules/react.js`and `node_modules/url/`（以及所有子文件夹），但不想包含`node_modules/browserify/`and `node_modules/coffeescript`。

我在尝试

```
[
  "node_modules/browserify$",
  "node_modules/coffee-script$"
] 
```

但它没有用。

```
[
  "node_modules\/browserify",
  "node_modules\/coffee-script"
] 
```

也没有工作。

唯一有效的是

```
[
  "browserify",
  "coffee-script"
] 
```

我不知道为什么。

# python - 如何取出数据框中的列索引名称

> ID：11334098
> 
> 赞同：3
> 
> 时间：2012-07-04T18:43:10.700
> 
> 标签：python, pandas

```
 Open     High    Low    Close   Volume      Adj Close
Date                        
1990-01-02 00:00:00  35.25   37.50   35.00   37.25   6555600     8.70
1990-01-03 00:00:00  38.00   38.00   37.50   37.50   7444400     8.76
1990-01-04 00:00:00  38.25   38.75   37.25   37.63   7928800     8.79
1990-01-05 00:00:00  37.75   38.25   37.00   37.75   4406400     8.82
1990-01-08 00:00:00  37.50   38.00   37.00   38.00   3643200     8.88 
```

我怎样才能摆脱上面的日期索引名称`dataframe`？它应该与其他列名在同一行，但它不是导致问题的。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T16:39:58.850

尝试使用将`reset_index`DataFrame 的索引移动到列中的方法（我认为这是你想要的）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-04T20:35:02.663

简短的回答：你不能，也不清楚为什么这会“导致问题”。“日期”名称命名 DataFrame 的索引，它与任何列都不同。它专门使用此偏移量打印，因此您不会将其与框架的列混淆。您不会`DataFrame['Date']`按照以下方式划分日期：

```
>>> import numpy as np; import pandas; import datetime

>>> dfrm = pandas.DataFrame(np.random.rand(10,3), 
... columns=['A','B','C'], 
... index = pandas.Index(
... [datetime.date(2012,6,elem) for elem in range(1,11)],
... name="Date"))

>>> dfrm
                   A         B         C
Date                                    
2012-06-01  0.283724  0.863012  0.798891
2012-06-02  0.097231  0.277564  0.872306
2012-06-03  0.821461  0.499485  0.126441
2012-06-04  0.887782  0.389486  0.374118
2012-06-05  0.248065  0.032287  0.850939
2012-06-06  0.101917  0.121171  0.577643
2012-06-07  0.225278  0.161301  0.708996
2012-06-08  0.906042  0.828814  0.247564
2012-06-09  0.733363  0.924076  0.393353
2012-06-10  0.273837  0.318013  0.754807

>>> dfrm['Date']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/frame.py", line 1458, in __getitem__
    return self._get_item_cache(key)
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/generic.py", line 294, in _get_item_cache
    values = self._data.get(item)
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/internals.py", line 625, in get
    _, block = self._find_block(item)
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/internals.py", line 715, in _find_block
    self._check_have(item)
  File "/usr/local/lib/python2.7/dist-packages/pandas/core/internals.py", line 722, in _check_have
    raise KeyError('no item named %s' % str(item))
KeyError: 'no item named Date' 
```

**更长的答案：**

如果您希望以这种方式打印，您*可以通过将索引添加到其自己的列中来更改您的 DataFrame。*例如：

```
>>> dfrm['Date'] = dfrm.index

>>> dfrm
                   A         B         C        Date
Date                                                
2012-06-01  0.283724  0.863012  0.798891  2012-06-01
2012-06-02  0.097231  0.277564  0.872306  2012-06-02
2012-06-03  0.821461  0.499485  0.126441  2012-06-03
2012-06-04  0.887782  0.389486  0.374118  2012-06-04
2012-06-05  0.248065  0.032287  0.850939  2012-06-05
2012-06-06  0.101917  0.121171  0.577643  2012-06-06
2012-06-07  0.225278  0.161301  0.708996  2012-06-07
2012-06-08  0.906042  0.828814  0.247564  2012-06-08
2012-06-09  0.733363  0.924076  0.393353  2012-06-09
2012-06-10  0.273837  0.318013  0.754807  2012-06-10 
```

在此之后，您可以简单地更改索引的名称，以便不打印任何内容：

```
>>> dfrm.reindex(pandas.Series(dfrm.index.values, name=''))
                   A         B         C        Date

2012-06-01  0.283724  0.863012  0.798891  2012-06-01
2012-06-02  0.097231  0.277564  0.872306  2012-06-02
2012-06-03  0.821461  0.499485  0.126441  2012-06-03
2012-06-04  0.887782  0.389486  0.374118  2012-06-04
2012-06-05  0.248065  0.032287  0.850939  2012-06-05
2012-06-06  0.101917  0.121171  0.577643  2012-06-06
2012-06-07  0.225278  0.161301  0.708996  2012-06-07
2012-06-08  0.906042  0.828814  0.247564  2012-06-08
2012-06-09  0.733363  0.924076  0.393353  2012-06-09
2012-06-10  0.273837  0.318013  0.754807  2012-06-10 
```

这似乎有点矫枉过正。另一种选择是在将日期添加为列之后将索引更改为整数或其他内容：

```
>>> dfrm.reset_index() 
```

或者如果您已经手动将索引移动到列中，那么只需

```
>>> dfrm.index = range(len(dfrm))

>>> dfrm
          A         B         C        Date
0  0.283724  0.863012  0.798891  2012-06-01
1  0.097231  0.277564  0.872306  2012-06-02
2  0.821461  0.499485  0.126441  2012-06-03
3  0.887782  0.389486  0.374118  2012-06-04
4  0.248065  0.032287  0.850939  2012-06-05
5  0.101917  0.121171  0.577643  2012-06-06
6  0.225278  0.161301  0.708996  2012-06-07
7  0.906042  0.828814  0.247564  2012-06-08
8  0.733363  0.924076  0.393353  2012-06-09
9  0.273837  0.318013  0.754807  2012-06-10 
```

或者如果您关心列出现的顺序，请执行以下操作：

```
>>> dfrm.ix[:,[-1]+range(len(dfrm.columns)-1)]
         Date         A         B         C
0  2012-06-01  0.283724  0.863012  0.798891
1  2012-06-02  0.097231  0.277564  0.872306
2  2012-06-03  0.821461  0.499485  0.126441
3  2012-06-04  0.887782  0.389486  0.374118
4  2012-06-05  0.248065  0.032287  0.850939
5  2012-06-06  0.101917  0.121171  0.577643
6  2012-06-07  0.225278  0.161301  0.708996
7  2012-06-08  0.906042  0.828814  0.247564
8  2012-06-09  0.733363  0.924076  0.393353
9  2012-06-10  0.273837  0.318013  0.754807 
```

**添加**

这里有一些有用的函数可以包含在 iPython 配置脚本中（以便在启动时加载它们），或者放入在 Python 中工作时可以轻松加载的模块。

```
###########
# Imports #
###########
import pandas
import datetime
import numpy as np
from dateutil import relativedelta
from pandas.io import data as pdata

############################################
# Functions to retrieve Yahoo finance data #
############################################

# Utility to get generic stock symbol data from Yahoo finance.
# Starts two days prior to present (or most recent business day)
# and goes back a specified number of days.
def getStockSymbolData(sym_list, end_date=datetime.date.today()+relativedelta.relativedelta(days=-1), num_dates = 30):

    dReader = pdata.DataReader
    start_date = end_date + relativedelta.relativedelta(days=-num_dates)
    return dict( (sym, dReader(sym, "yahoo", start=start_date, end=end_date)) for sym in sym_list )                     
###

# Utility function to get some AAPL data when needed
# for testing.
def getAAPL(end_date=datetime.date.today()+relativedelta.relativedelta(days=-1), num_dates = 30):

    dReader = pdata.DataReader
    return getStockSymbolData(['AAPL'], end_date=end_date, num_dates=num_dates)
### 
```

我还在下面做了一个类来保存一些普通股的数据：

```
#####
# Define a 'Stock' class that can hold simple info
# about a security, like SEDOL and CUSIP info. This
# is mainly for debugging things and quickly getting
# info for a single security.
class MyStock():

    def __init__(self, ticker='None', sedol='None', country='None'):
        self.ticker = ticker
        self.sedol=sedol
        self.country = country
    ###

    def getData(self, end_date=datetime.date.today()+relativedelta.relativedelta(days=-1), num_dates = 30):
        return pandas.DataFrame(getStockSymbolData([self.ticker], end_date=end_date, num_dates=num_dates)[self.ticker])
    ###

#####
# Make some default stock objects for common stocks.
AAPL = MyStock(ticker='AAPL', sedol='03783310', country='US')
SAP  = MyStock(ticker='SAP',  sedol='484628',   country='DE') 
```

# android - 调用 Activity.finish() 什么都不做

> ID：11334099
> 
> 赞同：0
> 
> 时间：2012-07-04T18:43:12.523
> 
> 标签：android, android-activity

我的游戏应用程序有一个非常奇怪的行为。有两个类 -`GameActivity`和`GameManager`。`GameManager`运行所有逻辑，并且`GameActivity`只托管一个`GameManager`实例。现在里面有一个暂停菜单和一个退出按钮。单击它会调用`finish()`GameManager，后者又会调用实际的`finish()`方法 on `GameActivity`。问题是这个电话什么也没做。我在类似的地方放了一堆日志调用`onPause()`，但都没有被调用。这对我来说似乎很奇怪。将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:07:53.160

根据您的评论： Activity.finish() 可能什么都不做，尝试将 GameActivity 的实际上下文传递给游戏管理器。

```
private Activity gameActivityContext;

//in game activity
onCreate() {
   gameActivityContext = this;
   GameManager mngr = new GameManager(gameActivityContext);
}

//in game manager
....
gameActivityContext.finish();
.... 
```

# javascript - 超大随机拇指顺序

> ID：11334102
> 
> 赞同：1
> 
> 时间：2012-07-04T18:43:32.090
> 
> 标签：javascript, random, supersized

[我在Supersized](http://buildinternet.com/project/supersized/docs.html)中设置了随机的幻灯片顺序，但只有背景图像是随机的，拇指保持相同的顺序。

这是随机图像幻灯片的代码部分（supersized.3.2.7.js）：

```
// Shuffle slide order if needed
if (base.options.random){
    arr = base.options.slides;
    for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x);   // Fisher-Yates shuffle algorithm (jsfromhell.com/array/shuffle)
    base.options.slides = arr;
} 
```

这就是我调用幻灯片图像并设置拇指的方式：

```
jQuery(function($){
    $.supersized({
        random: 1,
        thumb_links: 1,
        slides: [
                    { image: "slide_1.jpg", thumb: "thumb_1.jpg"},
                    { image: "slide_2.jpg", thumb: "thumb_2.jpg"},
                    { image: "slide_3.jpg", thumb: "thumb_3.jpg"},
                    { image: "slide_4.jpg", thumb: "thumb_4.jpg"},
                    { image: "slide_5.jpg", thumb: "thumb_5.jpg"},
                    { image: "slide_6.jpg", thumb: "thumb_6.jpg"}
                ]
    });
}); 
```

如何在背景图像的相同随机顺序上制作拇指？

## 更新

我自己弄清楚了：我没有使用 Supersized 中的 random 选项，而是定义了一个数组并对其进行排序。

```
var slidesArray = [
    { image: "slide_1.jpg", thumb: "thumb_1.jpg"},
    { image: "slide_2.jpg", thumb: "thumb_2.jpg"},
    { image: "slide_3.jpg", thumb: "thumb_3.jpg"},
    { image: "slide_4.jpg", thumb: "thumb_4.jpg"},
    { image: "slide_5.jpg", thumb: "thumb_5.jpg"},
    { image: "slide_6.jpg", thumb: "thumb_6.jpg"}
] 
```

我调用插件：

```
$.supersized({
    random: 0,
    thumb_links: 1,
    slides: slidesArray.sort(function() {return 0.5 - Math.random()})
}); 
```

效果很好，但我不确定这是否是最好的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:34:02.920

我找到了一种方法，有点……</p>

```
var slidesArray = [
    { image: "slide_1.jpg", thumb: "thumb_1.jpg"},
    { image: "slide_2.jpg", thumb: "thumb_2.jpg"},
    { image: "slide_3.jpg", thumb: "thumb_3.jpg"}
] 
```

还有……</p>

```
$.supersized({
    random: 0,
    thumb_links: 1,
    slides: slidesArray.sort(function() {return 0.5 - Math.random()})
}); 
```

我是 javascript 的新手……关于如何使它更好的任何想法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:21:19.303

考虑到文档提到`random`只影响幻灯片，似乎手动随机化列表，或者以其他方式重新排序到几乎任何其他您需要的列表确实是最好的方法。

# java - 在android设备中运行cpu密集型任务

> ID：11334109
> 
> 赞同：1
> 
> 时间：2012-07-04T18:44:01.103
> 
> 标签：java, android

我正在用 android 开发一个应用程序，我需要在其中监控 CPU 使用率与功耗。为了做到这一点，我做了一些奇怪的事情：

我需要运行一些计算量大的任务，它可以使用尽可能多的 CPU。

我不希望该任务使用任何其他组件，如 LCD、音频、wifi 等。只是纯 CPU。

如果你们对这种奇怪的问题有任何答案，请帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:49:01.473

有几个，例如通过蛮力查找素数、阿克曼函数或旅行推销员。

# javascript - 组复选框未显示选中

> ID：11334111
> 
> 赞同：0
> 
> 时间：2012-07-04T18:44:23.937
> 
> 标签：javascript, dojo, checkbox

我有一组复选框和一个切换按钮来选中/取消选中该组中的所有复选框。与按钮关联的函数将与每个复选框关联的值放在另一个表中。单击按钮时，该功能可以正常工作，但即使单击按钮，复选框也不显示复选符号。这是代码：

```
function selRemChecks(aDivId,buttonId){
    var myDiv = dojo.byId(aDivId).getElementsByTagName("tr");
    for (j=0;j<myDiv.length;j++){
        myDiv[j].childNodes[3].childNodes[0].firstChild.checked=dojo.byId(buttonId).checked;
    }
    if (dojo.byId(buttonId).checked==true){
        dijit.byId(buttonId).set("label", "Clear group");
    }
    else if (dojo.byId(buttonId).checked==false){
        dijit.byId(buttonId).set("label", "Select group");
    }
} 
```

请建议我一个解决方案。

我在这里添加了我的 HTML 代码：

```
<div data-dojo-type="dijit.form.Form" id="group1AForm" name="group1AForm">
<div dojoType="dijit.TitlePane" id="group1A" title="Population projection" open="false">
<table id="popIndTableA">
<tr id="testing">
<td id="indCBRA">Crude Birth Rate</td>
<td id="testing2"><input data-dojo-type="dijit.form.CheckBox" class="check1A" id="checkCBRA" name="checkCBRA" /></td>
<td id="infoCBRA"><img id="imgCBRA" src="Images/help_icon2.png"  width="16px" onClick="" /></td>
</tr>
<tr>
<td id="indTestA1">Test 1</td>
<td><input data-dojo-type="dijit.form.CheckBox" class="check1A" id="checkTestA1" name="checkTestA1" /></td>
<td id="infoTestA1"><img id="imgTestA1" src="Images/help_icon2.png"  width="16px" onClick="" /></td>
</tr>
<tr>
<td id="indTestA2">Test 2</td>                
<td><input data-dojo-type="dijit.form.CheckBox" class="check1A" id="checkTestA2" name="checkTestA2" /></td>
<td id="infoTestA2"><img id="imgTestA2" src="Images/help_icon2.png"  width="16px" onClick="" /></td>
</tr>
</table>
</div>
<div dojo-data-type="dijit.form.Form" id="selectGrp1A" name="selectGrp1A">
<button dojoType="dijit.form.ToggleButton" iconClass="dijitCheckBoxIcon" id="selGrp1A" onclick="selRemChecks('group1A',this.id); ">Select group </button>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:08:33.917

我会试试这个： [http ://www.shiningstar.net/articles/articles/javascript/checkboxes.asp](http://www.shiningstar.net/articles/articles/javascript/checkboxes.asp)

# python - 如何判断一个值是 Django 模板中的字符串还是列表？

> ID：11334119
> 
> 赞同：2
> 
> 时间：2012-07-04T18:45:37.700
> 
> 标签：python, django, templates, django-templates

我有一个在 Django 模板（1.4）中迭代的值元组。其中一些值是必须打印出来的字符串，另一些是包含字符串的元组，必须对其自身进行迭代才能打印出它们的值。在模板中，有没有一种方法可以确定给定值在我遍历主元组时是字符串还是列表（元组）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T18:54:14.297

没有内置的方法可以这样做。一种（恕我直言）解决方法是实现自定义“is_string”过滤器，但最好的解决方案是预处理视图中的值以使其成为元组（或列表）的统一列表。

对于过滤器解决方案：

```
@register.filter
def is_string(val):
    return isinstance(val, basestring) 
```

然后在您的模板中：

```
<ul> 
{% for whatever in something %}
  <li>
    {% if whatever|is_string %} 
      {{ whatever }}
    {% else %}
    <ul>
      {{ whatever|unordered_list }}
    </ul>
    {% endif %}
  </li>
{% endfor %}
</ul> 
```

cf 优秀的 Django 文档了解更多关于自定义过滤器和模板标签的信息：

[https://docs.djangoproject.com/en/stable/howto/custom-template-tags/](https://docs.djangoproject.com/en/stable/howto/custom-template-tags/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T18:58:07.190

`isinstance`您可以在视图或辅助模块中创建过滤器：

```
from django.template.defaultfilters import register

@register.filter(name="isinstance")
def isinstance_filter(val, instance_type):
    return isinstance(val, eval(instance_type)) 
```

然后在模板中你可以这样做：

```
{% load isinstance %}
{% if some_value|isinstance:"list" %}
  // iterate over list
{% else %}
  // use string
{% endif %} 
```

# c# - 部署后的 Web 服务需要 Visual Studio 中未使用的依赖项

> ID：11334124
> 
> 赞同：0
> 
> 时间：2012-07-04T18:46:08.263
> 
> 标签：c#, iis-7, reference

我有一个 Web 服务，一旦部署就神秘地需要其他 DLL 才能工作。

我有一个在**C:\inetpub\wwwroot\MyWebsite中运行的网站和在****C:\inetpub\wwwroot\MyWebsite\WebService**中运行的 Web 服务

 **我在 IIS 中的 MyWebsite 网站下创建了一个应用程序（WebService，指向 C:\inetpub\wwwroot\MyWebsite\WebService）

运行 WebService 的 .svc 之一时，我得到：

```
Could not load file or assembly 'Blah.Web' or one of its dependencies. The system     cannot find the file specified. 
Description: An unhandled exception occurred during the execution of the current web    request. Please review the stack trace for more information about the error and where it    originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly   'Blah.Web' or one of its dependencies. The system cannot find the file specified. 
```

Blah.web 是用于 MyWebsite 的 DLL。为什么我的 WebService 突然需要这个 VS 2010 中甚至没有引用的 DLL？

它是 web.config 的东西吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:49:26.233

这是因为您的 Web 服务嵌套在您的网站中，所以当您的网站自动编译时，它正在编译您的主网站和 Web 服务网站中的代码。但是，由于编译器是在主网站的上下文中运行的，所以它在 mywebsite\bin 中查找代码，而不是在 \mywebsite\myservice\bin 中。

就个人而言，我会更改架构并将 Web 服务站点分开，而不是嵌套。它至少应该是它自己的 Web 应用程序（在 IIS 中配置）或单独的网站。**

# c# - 我们如何以及在哪里运行取决于发件人地址的代码

> ID：11334125
> 
> 赞同：1
> 
> 时间：2012-07-04T18:46:36.033
> 
> 标签：c#, outlook, outlook-addin

我正在尝试构建的加载项必须根据发件人的地址更改新邮件的密件抄送字段。

由于我是 Outlook 编程新手，因此我找到了这篇[文章](http://msdn.microsoft.com/en-us/library/cc668191.aspx)并构建了示例加载项。他们使用的事件是[NewInspector](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.inspectorsevents_event.newinspector.aspx)，正如您所读到的，它在新的 Outlook 项目窗口出现之前被触发。但是，如果我们将此代码粘贴到 NewInspector 事件处理程序中：

```
 Outlook.MailItem item = Inspector.CurrentItem as Outlook.MailItem;
        if (item != null)
        {
            if (item.EntryID == null)
            {
                if (item.SenderEmailAddress == "...")
                    item.BCC = "....";
            }
        } 
```

它**不起作用**，因为当窗口刚刚加载时，发件人的地址是空的。

我考虑过使用[Send](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemevents_10_event.send)事件，创建的每封新邮件都会将其 Send 事件处理程序附加到一个方法，该方法又会在发送电子邮件时根据发件人的地址更改密件抄送。

唯一的问题是，由于某种原因，我在 VS 2010 Pro 中看不到 Send 事件。

还有其他方法可以做我需要的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:31:29.427

您需要使用 的**事件接口**( [Outlook.ItemEvents_10_Event](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemevents_10_event_members.aspx) )，[`Outlook.MailItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mailitem)因为它有一个[方法](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.send.aspx)和[事件](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemevents_10_event.send.aspx)绑定到相同的名称 ( *`Send`*)。这只是您在 Outlook 对象模型中必须注意的怪癖之一。这应该适合你：

```
((Outlook.ItemEvents_10_Event)MailItem).Send += new Outlook.ItemEvents_10_SendEventHandler(MailItem_Send); 
```

# android - xml中的Android粗体文本不起作用

> ID：11334129
> 
> 赞同：1
> 
> 时间：2012-07-04T18:46:49.353
> 
> 标签：android, xml, string

我正在制作一个应用程序，在该应用程序中，我想制作一些部分粗体和部分正常的文本，如下所示：

***蛋糕**试试这个用胡萝卜做的美味蛋糕。*

在我的 main.xml 中，我输入了这个：

```
<LinearLayout
        android:id="@+id/itemone"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:padding="3dp" >

        <ImageView
            android:layout_width="110dp"
            android:layout_height="85dp"
            android:src="@drawable/cake" />

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/cake"
            android:textAppearance="?android:attr/textAppearanceSmall" />

    </LinearLayout> 
```

在我的 strings.xml 中，我输入了这个：

```
<string name="cake"><b>Cake</b>\n Try this delicious cake made with carrots.</string> 
```

结果不是我除了。我得到的只是“蛋糕”这个词，而不是粗体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:00:04.120

textAppearanceSmall 搞砸了这件事。

它以此为风格，忽略其他。不要包括它。

还有一些事情搞砸了，标签“<”和“>”应该被替换，因为有特殊的xml字符。搜索 html 转义字符或分数字符，< 应如下所示： & lt ; （一个词）

如果你觉得无聊，你可以在 xml 中搜索 CDATA。有一种方法可以在 xml 中包含纯文本。

无需动态设置 TextView 的文本。

# reporting-services - 在 AX2012 中为子报告添加到 SSRS 的链接

> ID：11334130
> 
> 赞同：2
> 
> 时间：2012-07-04T18:46:54.013
> 
> 标签：reporting-services, axapta, dynamics-ax-2012

假设一家公司中有 4 个人投票给了一名员工。我已经在我的 SSRS 报告中将它显示为 EMP1 -> 4
现在，我希望 4 被超链接，以便当有人点击它时，另一个报告会打开，其中包含这 4 个人的姓名以及他们的评论。在本报告中，我使用查询作为数据集。

请协助我如何处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T06:22:23.627

请参阅从[Dynamics AX BI 视频](http://www.youtube.com/user/dynamicsaxbi)[添加报表钻取操作](http://www.youtube.com/watch?v=AHeJFxdYS6Y)的屏幕截图。

# java - 在 Java 中获取 Cookie

> ID：11334138
> 
> 赞同：0
> 
> 时间：2012-07-04T18:47:39.937
> 
> 标签：java, cookies, session-cookies

我想从 Java 应用程序获取从 Web 浏览器发送的 cookie 值。

cookie 不会在来自 WebServer 的响应标头中发送。我认为 cookie 是作为会话 cookie 发送的——我无法在 Java 应用程序中获取 cookie 值。

我试过这个：

```
 CookieHandler handler = CookieHandler.getDefault();
             if (handler != null)    {
                  Map<String, List<String>> headers = handler.get(url.toURI(), new HashMap<String, List<String>>());
                  List<String> values = headers.get("Cookie");
                  for (Iterator<String> iter=values.iterator(); iter.hasNext();) {
                       String v = iter.next(); 

                       if (cookieValue == null) 
                            cookieValue = v; 
                       else
                            cookieValue = cookieValue + ";" + v; 
                  } 
             } 
```

但我的努力是徒劳的，我无法得到饼干。我尝试简单地在浏览器中输入 URL，我可以在浏览器中看到“Cookie”，但我无法从 java 程序中获取相同的 cookie - 任何帮助都会有很大帮助

* * *

谢谢BalusC，我会解释这个问题。

我实际上是在寻找来自 Google Analytics 的 Cookie，而 Cookie 的格式为“__gads:ID=blah”。

此 Cookie 仅第一次发送给客户，如果它已经存在 - Google Analytics 不会再次发送 Cookie（这些天我都在检查此 Cookie）

现在我的问题是在哪里可以找到这个 Cookie，它应该已经存在于我的系统中。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:51:41.633

这行不通。这[`java.net.CookieHandler`](http://docs.oracle.com/javase/7/docs/api/java/net/CookieHandler.html)与特定于网络浏览器的 cookie 存储完全无关。`CookieHandler`仅在用于使用[`java.net.URLConnection`](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html)Java 语言以编程方式触发 HTTP 请求时使用（另请参阅[此迷你教程](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)）

如果您打算访问特定于 webbrowser 的 cookie 存储，那么您必须使用他们的 Java API（如果由特定 webbrowser make 提供的话），或者在磁盘文件系统和/或在磁盘文件系统中查看/猜测它们的位置特定于平台的注册表，取决于网络浏览器的品牌/版本和使用的平台。

# scala - 为什么一个 to `Any` 转换的 `String` 对象不再被视为 String （而反过来它是）？

> ID：11334141
> 
> 赞同：0
> 
> 时间：2012-07-04T18:48:04.330
> 
> 标签：scala, types

将 String 强制转换为类型`Any`时，将不再自动将其视为`String`- 为什么？请参见以下示例：

```
val str = "foo"
val strAsAny = "bar".asInstanceOf[Any]
def f1(x: String) = println(x.toString)
def f2(x: Any) = println(x.toString)

f1(str) // works, type exactly given
f2(str) // works, subtype of Any given

f1(strAsAny) // works not, but strAsAny.isInstanceOf[String] = true !
f2(strAsAny) // works, type exactly given 
```

这让我有点困惑，因为这两个值仍然具有 type `String`：

```
scala> str.isInstanceOf[String]
res4: Boolean = true

scala> strAsAny.isInstanceOf[String]
res5: Boolean = true 
```

我的猜测是，只有“向上”的 interhitance-chain 的类型转换才会自动完成。它是否正确 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T18:54:51.170

类型指定了您的期望，而不是您实际得到的。您可以将任何满足您期望的东西放入该插槽中。

有了`Any`，您期望的很少，所以任何事情都有效。使用`String`, 你期望`length`,`charAt`等等。所以 a`String`可以满足 an 的要求，`Any`但反之则不行。如果您碰巧将 a`String`放入一个`Any`插槽，那么您现在只承诺做`Any`可以做的事情，因此您不能将该值赋予期望 a 的东西`String`。

这称为[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，是（安全）面向对象设计的基本原则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T21:15:08.090

您将*静态类型*与*动态类型*混为一谈。

静态类型是*编译器知道的*，并且*在编译时*就存在。

也就是说，当你这样做时：

```
val strAsAny = "bar".asInstanceOf[Any] 
```

然后编译器将知道（或认为）`strAsAny`具有 type `Any`。它不会知道里面有`String`存储。

请注意，尽可能避免`asInstanceOf`，因为它的大多数有效用法都可以替换为类型归属 ( `"bar" : Any`) 或模式匹配 ( `case anyAsStr: String => "got a String"`)，两者都是*安全*的。操作符`asInstanceOf`是*不安全*的，因为它告诉编译器忽略它所知道的，并相信你告诉它的，即使它知道它是错误的。

因此，`asInstanceOf`它主要是一个编译时操作符，尽管它也会生成一些代码供 JVM 执行。

现在，编译器认为什么很重要，因为它只让你调用它知道可以调用的方法。因此，即使*在运行时*,`strAsAny`将包含 a `String`，编译器*也不知道*. 你告诉它忘记这`"bar"`是 a `String`，它就这样做了。因此，您不能在其上调用`String`方法。

另一方面，动态类型*在运行时是真实的*。在大多数情况下，对于像 Scala 这样的语言，编译器无法在运行时知道什么是正确的或不正确的。

而编译器是否知道某些东西，`isInstanceOf`是一个*运行时操作*。编译器对将会发生的事情没有任何可说的。

所以，当你这样做时：

```
strAsAny.isInstanceOf[String] 
```

The compiler doesn't care -- it just compiles the code. When you *execute* the code, then the JVM will verify what kind of value is stored inside `strAsAny`, and verify that it is, indeed, a `String`, and then return `true`.

# asp.net - 不存在的 url 路径抛出标准 IIS 404 页面

> ID：11334142
> 
> 赞同：1
> 
> 时间：2012-07-04T18:48:15.427
> 
> 标签：asp.net, web-config

> **可能重复：**
> [iis 7.5 劫持 404](https://stackoverflow.com/questions/11335846/iis-7-5-hijacking-404)

我正在通过 IIS 7.5 运行 .net 4.0 站点。

我已将自定义错误部分添加到我的 webconfig：

```
<system.web>
    <customErrors defaultRedirect="/error" mode="On">
        <error statusCode="404" redirect="/error?code=404"/>
        <error statusCode="500" redirect="/error?code=500"/>
    </customErrors>
</system.web> 
```

自定义错误正在起作用。任何内部服务器错误都将重定向到`/error?code=500`，并且`throw new HttpException(404, "Not found")`当发现缺少参数时，会将任何 重定向到`/error?code=404`。但是任何不存在的 url 路径仍然会抛出标准的 IIS 404 页面，而不是我的自定义 404。

任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:13:30.530

我曾经在 IIS 7 中遇到过这种情况，解决方案是配置 IIS-Application 错误页面：

*   打开 IIS
*   选择您的应用
*   打开 IIS 部分下的错误页面
*   在名为“操作”的右侧面板中，单击“编辑功能设置”
*   测试选择：
    *   自定义错误页面
*   接受更改
*   重新启动 IIS

这在我的情况下起到了作用

## 编辑 1

请记住，该`customErrors`部分**仅适用于由 ASP.Net 处理的**请求，html 页面等静态请求仍将重定向到 IIS 中配置的 404 错误页面

但是，您可以在自己的配置文件中覆盖此行为：

[欲了解更多信息](http://tedgustaf.com/en/blog/2011/5/custom-404-and-error-pages-for-asp-net-and-static-files/)

```
<configuration>
  <system.webServer>
    <httpErrors existingResponse="Replace" errorMode="Custom">
      <remove statusCode="404"/>
      <error statusCode="404" path="GenericError.aspx" responseMode="Redirect"  />
    </httpErrors>
  </system.webServer>
</configuration> 
```

您可能还需要将上述部分标记为*可更新*：

打开文件：

```
C:\Windows\System32\inetsrv\config\applicationHost.config 
```

并改变：

```
<section name="httpErrors" overrideModeDefault="Deny" /> 
```

至：

```
<section name="httpErrors" overrideModeDefault="Allow" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:16:02.283

您可以在 Global.asax 或 IHttpModule 中处理它。

```
Exception currentException = Server.GetLastError();
HttpException httpException = currentException as HttpException;
if (httpException != null && httpException.GetHttpCode() == 404)
{
    // redirect
} 
```

检查[http://learn.iis.net/page.aspx/508/wildcard-script-mapping-and-iis-integrated-pipeline/](http://learn.iis.net/page.aspx/508/wildcard-script-mapping-and-iis-integrated-pipeline/)了解如何设置通配符映射，因此所有请求都由 asp.net 处理。

# excel - 在哪里可以找到使用 Internet Explorer 的 VBA 函数

> ID：11334143
> 
> 赞同：2
> 
> 时间：2012-07-04T18:48:21.113
> 
> 标签：excel, vba, internet-explorer

我正在开发一个 VBA 函数来访问网页、查找单个 HTML 元素并显示其内容。这是我到目前为止所拥有的。

```
Function WebTableToSheet(webpage As String, tag As String, count As Integer) As String

  'Tested using IE7,  Excel 2000 SP1, and Windows XP
  Dim objIE As Object
  Dim varTables, varTable, document
  Dim allTags, tags
  Dim varRows, varRow
  Dim varCells, varCell
  Dim lngRow As Long, lngColumn As Long
  Dim strBuffer As String

  Set objIE = CreateObject("InternetExplorer.Application")

 'Setup
  With objIE
    .AddressBar = False
    .StatusBar = False
    .MenuBar = False
    .Toolbar = 0
    .Visible = True
    .Navigate webpage
  End With

  'Load webpage
  While objIE.Busy
  Wend
  While objIE.document.ReadyState <> "complete"
  Wend

  varTable = objIE.document.All

  allTags = objIE.document.All.tags(tag)

  WebTableToSheet = allTags.Item(count)

  Debug.Print "Testing function"

Cleanup:
    Set varCell = Nothing: Set varCells = Nothing
    Set varRow = Nothing: Set varRows = Nothing
    Set varTable = Nothing: Set varTables = Nothing
    objIE.Quit
    Set objIE = Nothing
End Function 
```

我能够打开 InternetExplorer，进入功能中指定的网页，但是当我尝试搜索特定标签时，它似乎失败了。我在搜索 Microsoft VBA Internet Explorer 文档时遇到了麻烦，并且知道哪些变量和方法可用于此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T00:51:01.173

我建议设置对 shdocvw.dll 和 Microsoft HTML 对象库的引用。在 XP 中，shdocvw.dll 在您的 system32 文件夹中，HTML 对象库应该在您的引用列表中。我目前只能访问 XP，因此您必须搜索您正在使用的任何其他版本的 Windows。然后在您的代码中，您可以执行以下操作：

```
Dim IE as SHDocVw.InternetExplorer
Dim doc as HTMLDocument
Dim el as IHTMLElement
Set IE = new SHDocVw.InternetExplorer

With IE
  .navigate "some.webpage.com"
  .visible = true
End With

Do
  'Nothing
Loop Until IE.readyState = READYSTATE_COMPLETE ' = 4

Set doc = IE.Document
Set el = doc.getElementById("someElementId")
If Not el Is Nothing Then
  MsgBox el.innerText
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-17T09:54:56.283

团队，IE网页完整加载检查使用下面提到的代码

```
Application.Wait (Now + TimeValue("0:00:1"))

Do Until IE.Busy = False
   DoEvents
Loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-11T03:49:00.520

```
ieApp.Navigate "Https://duckduckgo.com/"

'Wait for Internet Explorer to finish loading
Do While ieApp.Busy: DoEvents: Loop
Do While ieApp.Busy And Not ieApp.ReadyState = READYSTATE_COMPLETE: DoEvents: Loop

ieApp.Document.getelementbyid("search_form_input_homepage").Value = "Gajendra Santosh"
ieApp.Document.getelementbyid("search_button_homepage").Click 
```

# sqlite - SQLite 和云应用程序

> ID：11334146
> 
> 赞同：1
> 
> 时间：2012-07-04T18:48:46.540
> 
> 标签：sqlite, azure, cloud, database-programming

我想知道是否有办法为 SQLite 数据库应用程序启用云功能。

我应该每次都将整个数据库保存到云端吗？例如，当我退出应用程序时，是否需要将整个数据库保存到云端。

你有什么建议？

我应该放弃 SQLite 并使用另一个数据库进行云编程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:38:29.203

为了提高效率，您可以管理应用程序修改的对象的更改日志。然后，当需要同步时（例如关闭应用程序时），您可以向云提出操作请求。对于添加和更新，您可以发送整个对象，而对于删除，只需 oid 就足够了。

这是一个非常简单的同步场景。如果您希望将云中发生的更改发送到设备，事情可能会很快变得复杂。这是不同线程的场景。

根据您的问题，您只需从设备同步到云端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:03:30.803

[iCloud 支持 SQLite 数据库](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/_index.html)。

正确设置后，它只会同步更改日志，而不是整个数据库。理论上来说还不错。然而，我还没有使用它的好运气，它似乎有点过于错误，无法在 ios 5 中实际使用，希望它在 6 中会更好。

# serial-port - 无法将 minicom 的输出保存到文件中

> ID：11334150
> 
> 赞同：29
> 
> 时间：2012-07-04T18:49:15.270
> 
> 标签：serial-port, arduino

当我使用 Minicom 从串口捕获数据时，我需要将大数据保存到一个名为`minicom.cap`. 但是，如果我按 Ctrl+A 和 L 来捕获文件，它就会失败。没有创建文件（`minicom.cap`事先不存在）。我的下载目录已正确创建。我的操作系统是 Mint，我从 Arduino nano v3.0 读取数据

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-10T19:21:12.460

您是否尝试将 minicom 启动为

```
minicom -C capturefile 
```

除非我出错了，否则它应该立即开始捕获传入的数据。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-11-15T01:34:46.330

OP在写入后可能会错过“Shift + L”步骤，因此整体过程如下：

1 个（在 minicom 内部）

2 Ctrl A + Z

3 Shift + L

4（等待写入...）

5 Shift + L

6（检查你写的文件，默认是minicom.cap，你可能想找到它`/root/minicom.cap`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-02T18:22:37.383

```
chown root:dialout /etc/minicom/minirc.dfl
chmod 664 /etc/minicom/minirc.dfl 
```

现在拨出组的任何成员都可以写入 minirc.dfl

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-02T01:33:20.327

minicom 需要一个具有 root 权限并存储在**/etc/minicom/**并命名为**minirc.dfl**的配置文件。

通常当你第一次运行 minicom 时，作为 sudo，你可以保存**minirc.dfl**，就像你作为任何其他用户运行它不会保存一样。

那可能是你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-17T23:01:09.723

这比问题要求的范围要多一些，但正如已经回答的那样，我认为有人可能喜欢做一些对*用户友好的*事情。

如果您经常打开与多个设备的串行连接，您可能对此感兴趣。您可以使用桌面快捷方式执行此操作。

我用它来连接交换机和路由器，我有两根不同的控制台电缆，一根 USB 到 mini USB，还有一根带有 USB A 适配器到 rj45 的 db9。

使用这里的快捷方式意味着我不需要在每次想要切换设备时手动重新配置 minicom。快捷方式提供正确的配置文件作为参数（标识符）以及捕获文件（-C）。我需要做的就是确保我的设备通过电缆连接到我的计算机。

如果这是您可以使用的东西，请以普通用户身份从您的终端（而不是 minicom）运行这些命令。配置文件将保存在 minicom 可以找到的主目录中。

创建一个日志文件目录：您可能选择只登录 /var/log 但我想快速访问日志文件。

```
mkdir ~/minicom 
```

查找您的设备：

```
dmesg | grep tty 
```

如果您的电缆使用 RS-232 芯片，例如一些 USB 转迷你 USB 控制台电缆，您的 tty 设备可能在 ttyACM* 而不是 ttyUSB*

使用 nano 创建 minicom 配置文件。调整大写部分以满足您的需要，如果您得到古怪的字符或没有输出，波特率可能设置不正确。您可以根据需要创建任意数量的桌面快捷方式。只需更改标识符。

```
nano ~/.minirc.IDENTIFIER

pu port            /dev/ttyDEVICE
pu baudrate        9600
pu rtscts          No
pu logfname        /home/USER/minicom/IDENTIFIER.log 
```

创建桌面快捷方式。

```
nano ~/Desktop/IDENTIFIER.desktop

[Desktop Entry]
Encoding=UTF-8 
Name=Minicom IDENTIFIER
Comment=Something relevant to your connection/device name maybe
Exec=minicom IDENTIFIER -C/home/USER/minicom/IDENTIFIER.log
Terminal=1
Type=Application 
```

使其可执行

```
chmod +x ~/Desktop/IDENTIFIER.desktop 
```

这就是现在测试连接，双击你的新快捷方式。

关于 IDENTIFIER 部分的注释，它可以是任何东西。路由器或交换机型号、设备名称或类型。做适合您的事情，但可能使用连字符而不是空格，我没有测试过，但我想它们会导致问题，例如仅在第一个空格之前获取名称或更糟，尝试加载多个 minicom.identifier 文件。

创建第一个连接后，打开另一个终端：

```
tail -fn25 ~/minicom/IDENTIFIER.log 
```

因为您已将 minicom 设置为捕获输出，所以通过跟踪日志/捕获文件，如果您正在运行具有冗长输出的东西，您可以根据需要向后滚动，这对于路由器/交换机中的配置文件很有用，例如可以是数千行长。当您在 minicom 中进行更改时，只需滚动到尾部文件中您正在处理的部分以用作参考，尾部终端仍会收集数据，但不会像 minicom 在您星号键入时那样自动跳回新行.

如果有人比我更精通shell，想添加一个shell脚本，它接受设置新连接配置文件、日志等所需的参数，我不会对此感到太沮丧:)

顺便说一句，我想在 minicom 在快捷方式中运行之前添加一个命令，以使用标识符将标题应用到终端窗口，但在发布本文时，我无法在 Ubuntu 20.04 中使用它。

# asp.net - 我应该在另一个控制器中使用 PartialViewResult 还是单独的方法？

> ID：11334153
> 
> 赞同：0
> 
> 时间：2012-07-04T18:49:38.723
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4

我正在使用 ASP MVC 4 框架。例如，我有 2 个控制器：MainPanelController 和 CartController。

MainPanel 控制器定义了用于显示基本主面板功能的方法和视图。例如，购物车控制器定义了标准购物车方法：RemoveFromCart、ClearCart、AddItemToCart 等。

如果我想在主面板索引页面中显示购物车项目列表，我应该在哪里定义 ShowCartItems 方法？我有两个选择：

*   在 CartController 中作为 PartialViewResult 并将其呈现在 MainPanel 控制器的索引视图中
*   在 MainPanelController 中完全定义它

我认为显示购物车项目是 CartController 的任务。或者也许我应该在 MainPanelController 中定义 ShowCartItems 视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:05:52.107

也许您正在寻找的是`RenderAction`方法，它为您提供了一种从其他控制器输出动作的方法：

```
 @{
Html.RenderAction("ShowCartItems","CartController");
} 
```

# c# - 如何仅删除 Windows 窗体中的文件？

> ID：11334155
> 
> 赞同：0
> 
> 时间：2012-07-04T18:49:45.140
> 
> 标签：c#, winforms

我有一个表格，我希望能够在上面放置文件。我有以下代码：

```
private void Form1_DragEnter(object sender, System.Windows.Forms.DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.FileDrop)) 
        e.Effect = DragDropEffects.Copy;
    else
        e.Effect = DragDropEffects.None;
} 
```

我希望光标*仅*在删除文件时更改，而不是在删除目录时更改。上面的代码也为目录更改了它。我究竟做错了什么？文件是否有任何数据格式，或者我应该简单地尝试检查我在 e.Data 中获得的对象以进行扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:56:15.263

您应该使用`File.Exists`? 我认为如果它是一个文件，它会返回 true，如果不是，它会返回 false。

[这是来自MSDN](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)的示例：

```
 if(File.Exists(path)) 
        {
            // This path is a file
            ProcessFile(path); 
        }               
        else if(Directory.Exists(path)) 
        {
            // This path is a directory
            ProcessDirectory(path);
        }
        else 
        {
            Console.WriteLine("{0} is not a valid file or directory.", path);
        } 
```

# javascript - FB.api 名称显示没有按钮？

> ID：11334158
> 
> 赞同：1
> 
> 时间：2012-07-04T18:50:07.183
> 
> 标签：javascript, facebook, api, sdk

我有这段代码来显示我的 facebook 名称，问题是，它正在使用一个按钮，但我希​​望它在页面加载时工作而不调用任何函数。

代码是

```
 <script type="text/javascript">
function postArticle()
  {
FB.api('/me', function(response) {
  alert('Your name is ' + response.name);
});

}
</script>

<form>
    <input type="button" value="Cook" onclick="postArticle()" />
  </form> 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:51:43.463

简单地：

```
window.onload = postArticle; 
```

或将以下代码放在您包含的行下方或标签`all.js`之前：`</body>`

```
<script>
  FB.api('/me', function(response) {
    alert('Your name is ' + response.name);
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:52:04.090

包含后放置此代码`js sdk`

```
<script type="text/javascript">

FB.api('/me', function(response) {
  alert('Your name is ' + response.name);
});

</script> 
```

# css - 如何解决跨浏览器的占位符 CSS 差异？

> ID：11334162
> 
> 赞同：12
> 
> 时间：2012-07-04T18:51:27.747
> 
> 标签：css, twitter-bootstrap, placeholder

我正在使用 Twitter 引导 CSS。您可以在下面看到相同的代码在 FireFox 和 Chrome 中的显示方式不同。

这很奇怪。Firebug 告诉我占位符的 css 设置为浅灰色：

```
:-moz-placeholder {
    color: #999999;
} 
```

这应该会影响所有元素中的所有占位符，因为它在 Chrome 中正确完成。但是在 Firefox 中为什么可以`textareas`正确应用，但`input`不是呢？我怎样才能解决这个问题？

```
<input id="id_referred_by" type="text" maxlength="50" name="referred_by" placeholder="...was referred by?">

<textarea id="id_contacts_interests" name="contacts_interests" cols="40" placeholder="Any particular interests?" rows="4"></textarea> 
```

**铬合金：**

![在此处输入图像描述](../Images/fe815b672eec9d0a0074c21165742623.png)

**火狐：**

![在此处输入图像描述](../Images/7cfd9763ff15a93a76f869ec844d36bc.png)

**更新：**

下面的评论给了我一个想法：

`Input`has 不像条目`textarea`被`color: #9999`划掉，这意味着某些东西正在覆盖它。

```
select, textarea, input[type="text"], input[type="password"], input[type="datetime"], input[type="datetime-local"], input[type="date"], input[type="month"], input[type="time"], input[type="week"], input[type="number"], input[type="email"], input[type="url"], input[type="search"], input[type="tel"], input[type="color"], .uneditable-input {
    color: #555555;
    display: inline-block;
    font-size: 13px;
    height: 18px;
    line-height: 18px;
    margin-bottom: 9px;
    padding: 4px;
} 
```

事实上就是这样`color: #555555;`。当我在萤火虫中禁用它时，一切正常。为什么 Chrome 不关心这个而 Firefox 关心？任何提示如何在两个浏览器中解决此问题？我对 CSS 还是很陌生。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T18:07:09.367

问题是 Firefox 改变了字段的不透明度，并且你认为它是不同的颜色，但它不是......添加“opacity:1;” 它在所有浏览器中的工作方式完全相同

```
input:-moz-placeholder {
    color: #999999;
    opacity: 1;
}

input::-moz-placeholder {
    color: #999999;
    opacity: 1;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T19:23:34.067

由于这个奇怪的伪元素，我前一段时间做了一点小玩意，结果？您不能在选择器之间添加逗号，您必须指定您的规则两次，这很遗憾。

的HTML：

```
<input type="text" id="test-webkit" placeholder="test-webkit" /><br />
<input type="text" id="test-moz" placeholder="test-moz" /><br />
<input type="text" id="test-both" placeholder="test-both" /><br />
<input type="text" class="test-both" placeholder="test-both-separately" />​ 
```

CSS：

```
/* Works on Webkit */
#test-webkit::-webkit-input-placeholder {
    color: red;
}

/* Works on Firefox */    
#test-moz:-moz-placeholder {
    color: red;
}

/* Don't work */
#test-both::-webkit-input-placeholder, #test-both:input:-moz-placeholder {
    color: red;
}

/* Works on both */
.test-both::-webkit-input-placeholder {
    color: red;
}
.test-both:-moz-placeholder {
    color: red;
}​ 
```

[小提琴](http://jsfiddle.net/Calou/NvFCW/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T10:10:27.700

作为您需要使用的占位符完整列表下方的更新。:-moz 在较新的 firefox 版本中已弃用。

您需要多次指定规则，并且不能将它们组合在一行中。这是因为浏览器会将它们解释为单个选择器。它将导致错误，因为 Firefox 不知道 webkit 规则。

```
input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
  color:#bbb;
  font: 12px Verdana, Arial,Tahoma, sans-serif;
}
input:-moz-placeholder, textarea:-moz-placeholder {
  color:#bbb;
  font: 12px Verdana, Arial,Tahoma, sans-serif;
}
input::-moz-placeholder, textarea::-moz-placeholder {
  color:#bbb;
  font-family: 12px Verdana, Arial,Tahoma, sans-serif;
  font: normal;
}
input:-ms-input-placeholder, textarea:-ms-input-placeholder {
  color:#bbb;
  font: 12px Verdana, Arial,Tahoma, sans-serif;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:25:22.800

清除您的 Firefox 缓存（可能就足够了）。

并用萤火虫检查

如果尚未完成，请安装 firebug [https://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

右键单击输入，然后单击 Inspect Element with Firebug。

查看是否存在具有更高优先级的 css 属性。

![在此处输入图像描述](../Images/bb9ce52a908ea744199ec8752e37f7d6.png)

# android - Calendar.setTime() - 空指针异常：Android

> ID：11334163
> 
> 赞同：0
> 
> 时间：2012-07-04T18:51:27.750
> 
> 标签：android, calendar, simpledateformat

我需要以下崩溃报告的帮助。奇怪的是，我测试过的所有设备都不会产生这个错误。但我的崩溃报告在 2 周内显示了其中大约 60 个。很明显，它要么仅限于特定的品牌和设备型号，要么仅限于操作系统版本。我的应用程序在 2.2 以上的所有版本上都处于活动状态，因此我正在修复以确定实际问题。日志报告没有给我足够的信息来研究。**应用程序已上线并运行，安装次数超过 2500 次，其中 75% 处于活动状态**，这表明问题仅限于少数用户。非常感谢任何帮助。

**背景：1）应用程序显示特定事件的倒计时时间，采用静态时间将其转换为本地时区并计算差异。显示“天”、“小时”、“分钟”和“秒”

2) 少数用户在不同的日程安排屏幕上报告了一个非常相似的错误。

> java.lang.RuntimeException：无法在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1997) 上启动活动 ComponentInfo{alfi.programs.olympics2012/alfi.programs.olympics2012.OlympicsMainScreen}：java.lang.NullPointerException。 app.ActivityThread.handleLaunchActivity(ActivityThread.java:2018) 在android.app.ActivityThread.access$500(ActivityThread.java:139) 在android.app.ActivityThread$H.handleMessage(ActivityThread.java:1124) 在android.os。 Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:152) 在 android.app.ActivityThread.main(ActivityThread.java:4636) 在 java.lang.reflect.Method.invokeNative （本机方法）在 java.lang.reflect.Method.invoke(Method.java:491) 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) 在 com.android。internal.os.ZygoteInit.main(ZygoteInit.java:599) at dalvik.system.NativeStart.main(Native Method) 引起：java.lang.NullPointerException at java.util.Calendar.setTime(Calendar.java:1325) at java.text.SimpleDateFormat.formatImpl(SimpleDateFormat.java:536) 在 java.text.SimpleDateFormat.format(SimpleDateFormat.java:818) 在 java.text.DateFormat.format(DateFormat.java:376) 在 alfi.programs.olympics2012 .OlympicsMainScreen.getLocalTimeCountDown(OlympicsMainScreen.java:393) 在 alfi.programs.olympics2012.OlympicsMainScreen.countDownTime(OlympicsMainScreen.java:284) 在 alfi.programs.olympics2012.OlympicsMainScreen.onCreate(OlympicsMainScreen.java:55) 在 android.app。 Activity.performCreate(Activity.java:4521) 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072) 在 android.app.ActivityThread。performLaunchActivity(ActivityThread.java:1961) ... 11 更多

```
 private String getLocalTimeCountDown(Object date, Object time){

        String time1 = time.toString();
        String timeStart = time1.substring(0, 5);

        String fromDateString = date.toString() + " / " + timeStart + " GMT+01:00";

            DateFormat formatter = new SimpleDateFormat("dd MMM / HH:mm zzz");

            Date fromDate = null;
            try {
                fromDate = (Date)formatter.parse(fromDateString);
            } catch (ParseException e) {
                Toast.makeText(getApplicationContext(), "Oops.. there seems to be some problem... Report" +
                        " this immediately using the feedback link from the Main Screen.", 500).show();
            }
            TimeZone central = TimeZone.getDefault();
            formatter.setTimeZone(central);

            return  formatter.format(fromDate);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:27:23.623

好吧，我怀疑问题是有一个`ParseException`- 你已经抓住并*完全忽略*了。将其保留`fromDate`为 null，因此当您调用它时`formatter.format(fromDate)`，您将传递给它一个 null 引用，而您不应该这样做。

你几乎*不*应该有这样的空 catch 块。如果无法正确解析文本，您*想做什么？*

# c# - 将多维字节数组保存到 SQL Server 数据库

> ID：11334172
> 
> 赞同：6
> 
> 时间：2012-07-04T18:52:24.107
> 
> 标签：c#, sql, sql-server, multidimensional-array, bytearray

我想将多维字节数组保存到 SQL Server 数据库。

我知道如何保存将图像转换为数据库的字节数组。为此，我使用的数据类型是`image`. 但是现在我想存储另一个字节数组，它是多维字节数组`byte [,] temp`，它有两个具有 x,y 值的维度。

我在互联网上搜索，在这里，据说使用`VARBINARY`格式。我只想知道如果我将多维数组保存在`VARBINARY`数据类型数据列中，这些值会被改变吗？是否可以再次以多维数组的形式接收数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T18:59:28.577

是的，您将能够恢复原样的多维数组。

**你怎么能这样做？**在 Sql Server 中使用 Varbinary(max) 字段并将序列化的多维字节数组保存到其中。为了取回您的数组，显然，您需要反序列化您存储在数据库中的内容。

以下是如何执行此操作的示例：

```
public void TestSO()
{
    using (SqlConnection conexion = new SqlConnection())
    {
        using (SqlCommand command = new SqlCommand())
        {
            //This is the original multidimensional byte array
            byte[,] byteArray = new byte[2, 2] {{1, 0}, {0,1}};
            ConnectionStringSettings conString = ConfigurationManager.ConnectionStrings["ConnectionString"];
            conexion.ConnectionString = conString.ConnectionString;
            conexion.Open();
            command.Connection = conexion;
            command.CommandType = CommandType.Text;
            command.CommandText = "UPDATE Table SET VarBinaryField = @Content WHERE Id = 73 ";
            command.Parameters.Add(new SqlParameter("@Content", SqlDbType.VarBinary, -1));
            //Serialize the multidimensional byte array to a byte[]
            BinaryFormatter bf = new BinaryFormatter();
            MemoryStream ms = new MemoryStream();
            bf.Serialize(ms, byteArray);
            //Set the serialized original array as the parameter value for the query
            command.Parameters["@Content"].Value = ms.ToArray();
            if (command.ExecuteNonQuery() > 0)
            {
                //This method returns the VarBinaryField from the database (what we just saved)
                byte[] content = GetAttachmentContentsById(73);
                //Deserialize Content to a multidimensional array
                MemoryStream ms2 = new MemoryStream(content);
                byte[,] fetchedByteArray = (byte[,])bf.Deserialize(ms2);
                //At this point, fetchedByteArray is exactly the same as the original byte array
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:17:08.937

据我所知，Microsoft SQL Server 中没有合适的数据类型来存储多维数组。但是，有很多方法可以保存有关数组结构的信息。他们中有一些：

1.  创建几列 BINARY（固定长度）数据类型，并将多维数组的每一行创建到适当的列；在这种情况下，预计数组中的行数是恒定的；

2.  将整个数组作为一维数组存储到 VARBINARY（可变长度）数据类型的单列中，并将多维数组每行中元素的计数存储在 INT 数据类型的单独列中；在这种情况下，预计每行中的元素数是相同的（不是锯齿状的 C# 数组）；读取数组时，您将能够按此长度将元素拆分为单独的多维数组行。

# c++ - C++ 中的 Bencode 解析器

> ID：11334173
> 
> 赞同：0
> 
> 时间：2012-07-04T18:52:31.343
> 
> 标签：c++, parsing, bittorrent

用 C++ 编写 Bencode 解析器的最佳方法是什么。虽然我对外部库的建议持开放态度，这可能会使任务更容易，但我认为如果我编写自己的解析器，我会在 C++ 中学到一些有价值的课程。请记住，我仍然愿意接受这个建议:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:00:26.300

[它相对简单，只需在http://en.m.wikipedia.org/wiki/Bencode#section_1](http://en.m.wikipedia.org/wiki/Bencode#section_1for)上阅读它的工作原理即可。

或者，谷歌发现了这个 C++ 库：[https](https://github.com/kriben/bencode) ://github.com/kriben/bencode 。

您还可以从[http://effbot.org/zone/bencode.htm](http://effbot.org/zone/bencode.htm)获得一些灵感，这是一个简单的 Python 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-27T10:59:30.003

除了再次重新实现轮子之外，一种可能的方法是使用[libbencode](https://github.com/ybubnov/libbencode)库（我是作者）。它提供了基于模板的方法来构建 bencode 数据。

API 非常有限，但它可能会满足您的需求：

```
// Create an associative array of Bencode values.
bencode::dict d;

d["port wine"] = bencode::make_integer(777);
d["green"] = bencode::make_string("elephant");

// Create a new Bencode output stream
bencode::ostream os(std::cout.rdbuf());

// Put the data to the stream
os << d; 
```

# rabbitmq - RabbitMQ - 如果客户端无法处理消息怎么办

> ID：11334176
> 
> 赞同：0
> 
> 时间：2012-07-04T18:52:47.620
> 
> 标签：rabbitmq

我想知道当消费者无法处理它收到的消息时，最佳实践是什么。通知兔子将其放回队列或移动到错误队列的机制是什么？

我使用来自rabbitmq的.net客户端

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:28:11.630

要么丢弃它，要么把它放在错误队列中。如果消息存在问题以至于消费者无法处理它，则不要将其放回队列中，因为消费者只会尝试再次读取它。这是一个例外，因此请照此处理。在异常处理中，您应该提出一条错误消息，说明发生了什么以及您对该消息做了什么。最佳实践是将其放在可以手动处理的错误队列中。

# emacs - TAB 键不适用于 Auctex 中的自动完成

> ID：11334187
> 
> 赞同：1
> 
> 时间：2012-07-04T18:54:06.177
> 
> 标签：emacs, auctex

我在 Windows XP/7 上使用 Emacs 24.1。TAB/RET 键用于在 elisp 模式、 *scratch*甚至 ESS 模式下自动完成。

当我使用 Auctex 编写 tex 文件时，按 TAB 键会跳转到下一行并且不会自动完成输入。Ci 可以自动完成 Auctex 中的输入。但它需要两个键。有什么建议可以解决这个问题吗？

# jquery - Rails 中的 JQuery 分页导致渲染失败

> ID：11334189
> 
> 赞同：1
> 
> 时间：2012-07-04T18:54:17.920
> 
> 标签：jquery, ruby-on-rails, jquery-pagination

我正在使用 JQuery 在我的 rails 应用程序中实现分页，并且遇到了一个问题，当我在浏览器中回击时，rails 有时无法呈现页面内容，而是将原始 Javascript 转储到我的浏览器窗口中。以下是我正在使用的快速浏览：

分页.js：

```
if (history && history.pushState) {
  $(function () {
    $('.pagination a').live("click", function () {
      $.ajax({url: this.href, dataType: "script", cache: true});
      history.pushState(null, document.title, this.href);
      $("html, body").animate({ scrollTop: 0 }, 300);
      return false;
    });

    $(window).bind("popstate", function() {
      $.ajax({url: location.href, dataType: "script", cache: true});
    });
  });
} 
```

在我看来，index.js.erb：

```
$("#products").html("<%= escape_javascript(render("products")) %>"); 
```

它有时会起作用，但通常在点击后退按钮时，JS 会被转储到我的浏览器窗口中，而不会被评估/渲染。它看起来像这样（在我的浏览器中）：

```
$("#products").html("<table class=\"table table-striped\">\n<thead>\n<tr>\n<th>Products 
```

...ETC。我不确定到底是什么失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:39:26.153

浏览器请求的路径如下所示

*   /产品
*   /products?page=1
*   /products?page=2

根据 /products?page=2 是浏览到“手动”还是通过 ajax，您呈现 js 版本或普通版本。当您点击后退按钮时，您可能只会获得浏览器缓存中的内容，这可能是这两个版本中的任何一个，具体取决于您之前的导航历史记录。

为了使其正常工作，您希望浏览器维护两个不同版本的缓存。一种方法是在发出 ajax 请求时添加一个额外的参数：

```
$('.pagination a').live("click", function () {
  $.ajax({url: this.href, dataType: "script", cache: true, data: {'ajax_paginate': true});
  ...
}); 
```

jquery-pjax 已经这样做了，如果您使用 pjax-rails 插件，神奇的缓存分离参数将自动为您剥离。

在尝试之前，您需要清空浏览器缓存 - 您可能已经在缓存中获得了一堆坏数据。

# java - 什么是非矩形和 N 维数组的真实示例？

> ID：11334190
> 
> 赞同：1
> 
> 时间：2012-07-04T18:54:29.923
> 
> 标签：java, arrays, multidimensional-array

什么是非矩形和 N 维数组的真实示例。我知道您可以将 3 维用于游戏，但不确定何时会使用更多，而且我从未见过非矩形数组的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T18:58:19.130

高维数组（3D、4D 等）通常出现在[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)算法的上下文中，在这些算法中，它们用于在更大的计算中存储中间结果，以便可以计算整体结果。例如，[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)在用于计算所有对最短路径时，使用 3 维数组在计算中间值时缓存它们。然后使用生成的 3D 数组来读取图中任意两个节点之间的最短路径。

锯齿状数组有时用于表示矩阵运算（如[QR 分解](http://en.wikipedia.org/wiki/QR_decomposition)或高斯消元）中的[上三角矩阵。](http://en.wikipedia.org/wiki/Upper_triangular_matrix)它们还构成了一些数据结构（如指数数组）的基础。

希望这可以帮助！

# android - 强制关闭应用程序会杀死具有相同共享用户 ID 的另一个应用程序的服务？

> ID：11334196
> 
> 赞同：1
> 
> 时间：2012-07-04T18:54:56.650
> 
> 标签：android, service, forceclose

我在清单 App1 和 App2 中有 2 个具有相同 SharedUserId 值的应用程序。App1 有一个服务组件，它被指定在一个单独的进程中运行（在清单 android:process=":remote" 中）。该服务的主要目的是检查 App2。我希望该服务在 App2 关闭时进行一些清理。

当我强制关闭 App2 时，App1 的服务被杀死，并且它的 onDestroy() 方法没有被调用。当我强制停止 App2 时，如何确保 App1 的服务不会被终止（或至少在调用 onDestroy 时完成）？

编辑：Galaxy Nexus 上的 Android 4.0.1 如果有影响的话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:26:21.570

是的，这是可能的。如果您使用 sharedUserId 想象这两个应用程序在同一个线程中运行，这意味着它们具有相同的应用程序生命周期，这基本上意味着在这些应用程序中的任何一个上“强制关闭”您都会终止它们的线程。

这意味着该线程上的所有内容都被杀死。在应用程序之间使用 sharedUserID 和 sharedProcess 而不是使用内容提供者的负面影响之一。

当您强制关闭应用程序时，我认为没有解决方法。也许你应该以“正常”的方式完成它并让操作系统杀死它。

更新您的评论：

一般来说，我不倾向于干预这些事情。用户可能想要手动关闭应用程序，就像我习惯做的那样，如果您有服务或应用程序一次又一次地运行，那会很烦人。

这就是我的观点。尽管我相信，当触发未处理的异常时，有一个技巧可以在强制关闭后手动重新启动您的应用程序，我猜用户强制关闭的反应是相同的。我猜您可以在服务中添加待处理的意图：[Android：如何在“强制关闭”后自动重启应用程序？](https://stackoverflow.com/questions/2681499/android-how-to-auto-restart-application-after-its-been-force-closed)

# android - smoothScrollToPosition() 仅在 Android ICS 中滚动？

> ID：11334207
> 
> 赞同：6
> 
> 时间：2012-07-04T18:56:06.400
> 
> 标签：android, android-4.0-ice-cream-sandwich

在 Gingerbread 中，我对使用 smoothScrollToPosition() 一次滚动几十个项目没有任何问题。在我的 Nexus S 升级到 Ice Cream Sandwich 之后，我注意到无论我在 smoothScrollToPosition() 中放入什么，它都只会在任一方向滚动大约几百像素，然后停止。

这是 ICS 的已知问题吗？我在 Galaxy Nexus 上也注意到了这一点。我查看了其他一些问题并尝试了一些不同的技巧，例如关闭对 notifyDataSetChanged() 的调用，并将 smoothScrollToPosition() 发布为延迟可运行，但不幸的是，它不想滚动超过一百像素左右才停下来。:(

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T05:24:43.873

似乎是完成动画所需的持续时间的问题，smoothScrollBy(int distance, int duration) 也存在同样的问题，粗略一瞥，smoothScrollToPosition() 是围绕 smoothScrollBy() 的友好包装，它做了很多跑腿。反过来，smoothScrollBy() 正在假装“挥动手势”，就好像用户做出了动作一样。

smoothScrollBy 实际上只是发布了可继续重新发布的可运行文件，直到持续时间用完为止。这意味着它只是根据之前决定移动到的偏移量计算所需的滚动偏移量，因此如果持续时间在它到达目标偏移量之前用完，它会在最后计算的偏移量处停止。（而不是突然跳到目标偏移，这可能更不和谐，因为它不会被动画化）。

Android 人员的困难在于确定每次 run() 调用移动多少才能达到所需的偏移量，因为 ListView 单元格（子项）的高度是完全动态的，所以他们不能只做一个简单的距离计算，因为可见孩子的身高他们不知道。这与 Android 滚动条在您滚动时大小会波动的原因相同，它必须根据当前看到的内容来最好地猜测它应该有多大。

无论如何，这并不能帮助您解决它，但有些人可能会觉得它很有趣:)

但是，如果您知道自己有静态单元格高度，则可以编写自己的方法来计算传递给 smoothScrollBy() 的距离和持续时间，并有固定的时间来移动 X 距离。如果您不这样做，则必须使用发布的解决方案 bigstones 就足够了，由于 1000 毫秒的高 SCROLL_DURATION，这确实有效。您也可以使用 ICS 版本并更改此属性，而不是使用 2.2 版本，这不是根本原因。

您还可以使用自己的自定义算法调整这些可运行文件，调整这些东西应该不会太难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T14:53:25.273

这就是我为解决问题所做的。本质上，我们希望继续调用 smoothscrolling 直到您到达所需的元素（在这种情况下，我只想滚动到顶部，即元素 0）。

```
//There is a known bug where smoothScrollToPosition(..) may not reach the top, 
            //if the list is very large, keep scrolling until you reach the top element
            newsFeed.setOnScrollListener(new OnScrollListener() {
                @Override
                public void onScrollStateChanged(AbsListView view, int scrollState) {

                }

                @Override
                public void onScroll(AbsListView view, int firstVisibleItem,
                        int visibleItemCount, int totalItemCount) {
                    if(firstVisibleItem != 0) {
                        newsFeed.smoothScrollToPosition(0);
                    } 
                    else {
                        //We are done
                        newsFeed.setOnScrollListener(null);
                    }
                }
            });
            newsFeed.smoothScrollToPosition(0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-10T20:36:58.350

如果您的目标是滚动到顶部，请考虑使用`smoothScrollToPositionFromTop(0,0)`. 反而。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T07:36:19.327

因为ListView使用getChildCount()方法获取AbsListView.java源码中的位置计数。但在 ListView 中，getChildCount() 方法无法获得正确的计数。也许你应该使用 setSelection() 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-24T11:24:47.910

我也有关于 ICS 的问题。

我有一个聊天消息列表活动，每次发送消息后，我都需要平滑地将列表视图滚动到底部。所以在我调用 notifyDataSetChanged() 之后，我调用了方法 smoothScrollToPosition()。在其他 android 构建版本上，它运行良好。但是在ICS上，就很奇怪了。如果我的列表视图位于底部，我测试了 3 个案例。如果我将一个新项目附加到列表视图，它将不会滚动。如果我将两个新项目附加到列表视图 - >它将很好地滚动。如果我将列表视图向上滚动几个像素，在我添加一个新项目后，它会很好地滚动。经过大量的谷歌搜索和测试，我对此感到无助。最后，每次我将数据设置为列表视图时，我都会在最后一个位置附加一个空视图（1px），虽然这不是一个好方法，但它对我有用。

# java - MiGLayout 不会向下展开 JPanel

> ID：11334212
> 
> 赞同：2
> 
> 时间：2012-07-04T18:56:22.470
> 
> 标签：java, swing, jpanel, miglayout, jtoolbar

我相信你们中的一些人都知道，我正在尝试为 Tiled 制作一个开源的替代工具。我之前问过我应该使用什么布局，我建议我真正喜欢的 MiGLayout，但根本不理解。我也希望能从中学到一些东西。**我想要有人向我解释我做错了什么，很明显，以及我需要做些什么来纠正这个问题。**

让我首先说明什么在我看来是完美的，但可能不是真的。

*   框架
*   菜单和菜单项

现在让我说明我不喜欢什么并且不屈从于我的意愿。

*   JToolBar（有我不想要的空白，它们用红色圈出来）
*   两个JPanels（它完善的宽度，但它们没有填充到高度）

我的问题是**我能做些什么来解决这个问题**以及**如何调整 miglayout 以便在移动工具栏时不会使布局崩溃？**

这是我的代码：

```
package main;

import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JToolBar;
import javax.swing.KeyStroke;

import net.miginfocom.swing.MigLayout;

public class GUI extends JFrame {

    // Window Vars //
    String title;
    int width;
    int height;

    // Mid Level componets //
    JMenuBar menuBar;
    JMenu file;
    JToolBar toolBar;
    JPanel map;
    JPanel sideBar;

    // Low Level componets //
    JMenuItem exit;

    JButton select;

    public GUI(String title, int width, int height) {
        this.title = title;
        this.width = width;
        this.height = height;
        this.makeInterface();
    }

    public void makeInterface() {
        // Setup JFrame
        this.setTitle(title);
        this.setSize(width, height);
        this.setLocationRelativeTo(null);
        this.setMinimumSize(new Dimension(700, 500));
        this.setVisible(true);

        this.setLayout(new MigLayout(
                "debug, fillx, gap unrel rel",  // Layout
                "[grow, fill][fill]",         // Column
                "[fill][fill]"));       // Row
        this.makeMenu();
        this.addToolBars();
        this.makePanels();
        this.setupActionListeners();
    }

    public void makeMenu() {
        this.menuBar = new JMenuBar();
        this.file = new JMenu("File");
        this.file.setMnemonic(KeyEvent.VK_F);
        this.menuBar.add(file);

        this.exit = new JMenuItem("Exit", KeyEvent.VK_E);
        this.exit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_E, ActionEvent.ALT_MASK));
        this.file.add(exit);

        this.setJMenuBar(this.menuBar);
    }

    public void addToolBars() {
        this.toolBar = new JToolBar("Draggable");
        this.addToolBarButtons();
        this.add(toolBar, "span, height 20:35:50, wrap");
    }

    public void addToolBarButtons() {
        this.select = new JButton("Select");
        this.toolBar.add(select);
    }

    public void makePanels() {
        this.map = new JPanel();
        this.sideBar = new JPanel();

        this.add(map, "width 400:600:, flowy, growy");
        this.add(sideBar, "width 250:300:350, flowy, growy");
    }

    public void setupActionListeners() {
        this.exit.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
    }
} 
```

![当前状态下的程序](../Images/62ba5cdf93054e645b99bf1f6163f73e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:24:38.783

需要使用停靠功能在区域中设置侧边栏和地图区域。

例如我做了如下：

```
this.setLayout(new MigLayout(
    "fill",  // Layout
    "",         // Column
    ""));       // Row
this.add(map, "width 400:600:, dock center, growy");
this.add(sideBar, "width 250:300:350, dock east, growy"); 
```

这消除了差距并根据需要扩展了所有内容。

# c# - 如何使用情节提要获得流畅的动画

> ID：11334213
> 
> 赞同：0
> 
> 时间：2012-07-04T18:56:23.913
> 
> 标签：c#, wpf, xaml, animation, behavior

我在 Behavior 中有一个动画，但它运行不流畅。

这是我的动画代码：

```
DoubleAnimationUsingKeyFrames animation = new DoubleAnimationUsingKeyFrames();

animation.SetValue(Storyboard.TargetPropertyProperty, new PropertyPath("(0).(1)", UIElement.RenderTransformProperty, RotateTransform.AngleProperty));

int keyFrameCount = 16;
double timeOffsetInSeconds = 0.1;
int targetValue = 12;

double totalAnimationLength = keyFrameCount * timeOffsetInSeconds;
double repeatInterval = RepeatInterval;
bool isShaking = IsShaking;

// Can't be less than zero and pointless to be less than total length
if (repeatInterval < totalAnimationLength)
    repeatInterval = totalAnimationLength;

animation.Duration = new Duration(TimeSpan.FromSeconds(repeatInterval));

for (int i = 0; i < keyFrameCount; i++)
{
    animation.KeyFrames.Add(new LinearDoubleKeyFrame(i % 2 == 0 ? targetValue : -targetValue, KeyTime.FromTimeSpan(TimeSpan.FromSeconds(i * timeOffsetInSeconds))));
}

animation.KeyFrames.Add(new LinearDoubleKeyFrame(0, KeyTime.FromTimeSpan(TimeSpan.FromSeconds(totalAnimationLength)))); 
```

**但是，如果我选择**

```
int keyFrameCount = 360; 
```

**和**

```
for (int i = 0; i < keyFrameCount; i++)
{
    animation.KeyFrames.Add(new LinearDoubleKeyFrame(i, keyTime.FromTimeSpan(TimeSpan.FromSeconds(i * timeOffsetInSeconds))));
} 
```

它会旋转一个非常平滑的圆圈。

我怎样才能让动画从 0 度到 30 度，回到 -30 度，然后回到 0（让它稍微抖动一下）并让它看起来流畅。

经过一些尝试，我发现（正常）来回在这里不起作用，它的行为完全不受控制！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:54:04.790

我不太确定你为什么要自己做这么多关键帧，但是为了做

> 我怎样才能让动画从 0 度到 30 度，回到 -30 度，然后回到 0（让它稍微抖动一下）并让它看起来流畅。

您可以将动画更改为类似

```
DoubleAnimationUsingKeyFrames animation = new DoubleAnimationUsingKeyFrames();

animation.SetValue(Storyboard.TargetPropertyProperty, new PropertyPath("(0).(1)", UIElement.RenderTransformProperty, RotateTransform.AngleProperty));

var totalAnimationLength = 1600; // Milliseconds

double repeatInterval = 1600;// Milliseconds

if (repeatInterval < totalAnimationLength) repeatInterval = totalAnimationLength; // Can't be less than zero and pointless to be less than total length 

animation.Duration = new Duration(TimeSpan.FromMilliseconds(repeatInterval));
animation.RepeatBehavior = RepeatBehavior.Forever; // assuming this was intended from having a repeat interval?

animation.KeyFrames.Add(new LinearDoubleKeyFrame(30, KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(totalAnimationLength * 0.25))));
animation.KeyFrames.Add(new LinearDoubleKeyFrame(-30, KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(totalAnimationLength * 0.75))));
animation.KeyFrames.Add(new LinearDoubleKeyFrame(0, KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(totalAnimationLength)))); 
```

# graphics - NSImage（来自icns）慢画

> ID：11334219
> 
> 赞同：0
> 
> 时间：2012-07-04T18:56:56.680
> 
> 标签：graphics, graphics2d, nsimage

从 icns 文件构建 NSImage 然后在 ImageAndTextCell 上绘制它时，速度非常慢。但是，如果我从 png、jpg 等创建 NSImage，它的绘制速度非常快。

如何加快速度？从 icns 创建 jpg（等）？保存创建的 NSImages 的缓存？

感谢您的建议，谢谢

**更新**（来自下面的评论）：

似乎这是在加载 icns 文件时减慢执行速度的代码：

```
NSImage * image = [ [ [ NSImage alloc ] initWithContentsOfFile:
                      filename ] autorelease ];
```

从以下位置调用：-

```
( id ) tableView : ( NSTableView * ) aTableView objectValueForTableColumn :
       ( NSTableColumn * ) aTableColumn row : ( NSInteger ) rowIndex
```

如果我删除它，那么 NSTableView 绘制非常快。当不是icns文件，而是jpg、png等的时候，画图是非常快的。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:34:43.313

解决了！

真正快速使用：

```
NSImage * image = [ [ NSWorkspace sharedWorkspace ] iconForFile: bundleName ]; 
```

使用速度很慢：

```
NSImage * image = [ [ [ NSImage alloc ] initWithContentsOfFile: filename ] autorelease ]; 
```

# iphone - UITableViewRowAnimationFade 不起作用

> ID：11334221
> 
> 赞同：4
> 
> 时间：2012-07-04T18:57:09.407
> 
> 标签：iphone, objective-c, ios, uitableview

所以，这个问题是上[一期的后续问题](https://stackoverflow.com/questions/11330153/)，但我决定发布一个新问题以保持相关性和整洁性。

`UITableViewRowAnimationFade`基本上，当调用以下代码时，和之间没有区别`UITableViewRowAnimationNone`：

```
- (void) setEditing:(BOOL)editing animated:(BOOL)animated
{

    [tvController.tableView beginUpdates];

    if (editing == YES) {
        [tvController.tableView deleteRowsAtIndexPaths:[settingsArray objectAtIndex:0] withRowAnimation:UITableViewRowAnimationFade];

    }else {

        UITableViewRowAnimation animation = animated ? UITableViewRowAnimationFade : UITableViewRowAnimationNone;
        [tvController.tableView reloadRowsAtIndexPaths:[settingsArray objectAtIndex:0] withRowAnimation:animation];

        [tvController.tableView reloadSectionIndexTitles];

        self.navigationItem.hidesBackButton = editing;
    }
    [tvController.tableView endUpdates];
} 
```

非常感谢任何帮助。它仍然进入编辑模式，但没有动画，尽管 YES 被传递给动画。

* * *

编辑：当我使用以下代码实际删除内容时，动画效果很好：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        NSString *stuff = [documentsPath stringByAppendingPathComponent:@"stuff.plist"];
        BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:stuff];

        if (fileExists) {

            NSMutableDictionary *propertyList = [[NSMutableDictionary alloc] initWithContentsOfFile:enteredPlaces];
            [propertyList removeObjectForKey:[[settingsArray objectAtIndex:1] objectAtIndex:indexPath.row]];
            [propertyList writeToFile:stuff atomically:YES];
        }

        [[settingsArray objectAtIndex:1] removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];

    } 
} 
```

当用户按下编辑按钮并且表格进入编辑模式时它不起作用，表格视图只是静态地进入编辑模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:30:36.147

我的应用程序中有相同的场景，我遇到了类似的问题。我想下面的函数会解决你的问题：

```
- (void) setEditing:(BOOL)editing animated:(BOOL)animated
{

    [tvController.tableView setEditing:editing animated:animated]; //this LOC is added 

    [tvController.tableView beginUpdates];

    if (editing == YES) {
        [tvController.tableView deleteRowsAtIndexPaths:[settingsArray objectAtIndex:0] withRowAnimation:UITableViewRowAnimationFade];

}    else {

        UITableViewRowAnimation animation = animated ? UITableViewRowAnimationFade : UITableViewRowAnimationNone;
        [tvController.tableView reloadRowsAtIndexPaths:[settingsArray objectAtIndex:0] withRowAnimation:animation];

        [tvController.tableView reloadSectionIndexTitles];

        self.navigationItem.hidesBackButton = editing;
    }
        [tvController.tableView endUpdates];
}

-(void)deleteRecord:(NSInteger)recordNo:(NSInteger)sectionNo:(BOOL)isEditMode:(BOOL)isAnimate {

if(isEditMode){
    NSIndexPath *indexP=[NSIndexPath indexPathForRow:recordNo inSection:sectionNo];
    [tvController.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexP, nil] withRowAnimation:UITableViewRowAnimationLeft];
}
else {

    if(isAnimate)
        [tvController.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexP, nil] withRowAnimation:UITableViewRowAnimationFade];
    else
        [tvController.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexP, nil] withRowAnimation:UITableViewRowAnimationNone];

    [tvController.tableView reloadSectionIndexTitles];
    self.navigationItem.hidesBackButton = editing;

}

[NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(reload) userInfo:nil repeats:NO];
}

 -(void)reload {
    [table reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:07:13.180

如果您唯一恼火的是删除不会消失的事实，那是因为您正在期待界面不提供的东西。

您提到您知道可以将单个单元格设置为不可编辑，这是执行此操作的标准方法。该机制根本不会预期不使用 UITableViewDataSource 来提供有关显示内容的信息（或者，在您的情况下，只是通过点击编辑/完成按钮来提供正在更改的数据中的内容）。

通过尝试将两者结合起来，您会混淆应该发生的动画。

可能你能做的最好的事情如下（动画持续时间和长度可能为0，因为你在tableView中要求单独的动画），这将导致你的动画在打开编辑的动画之后发生模式。

```
- (void) setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];  // possibly not necessary depending upon your class hierarchy
    [tvController.tableView setEditing:editing animated:animated];
    [UIView animateWithDuration:0.25 delay:0.05 options:UIViewAnimationCurveLinear
                     animations:^{ 
                         [tvController.tableView beginUpdates];

                         if (editing == YES) {
                             [tvController.tableView deleteRowsAtIndexPaths:[settingsArray objectAtIndex:0] withRowAnimation:UITableViewRowAnimationFade];
                         } else {
                             UITableViewRowAnimation animation = animated ? UITableViewRowAnimationFade : UITableViewRowAnimationNone;
                             [tvController.tableView reloadRowsAtIndexPaths:[settingsArray objectAtIndex:0] withRowAnimation:animation];
                             [tvController.tableView reloadSectionIndexTitles];
                             self.navigationItem.hidesBackButton = editing;
                         }
                         [tvController.tableView endUpdates];
                     }
                     completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T07:21:22.523

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [db DeleteData:[NSString stringWithFormat:@"%d",indexPath.row]];
        [data removeObjectAtIndex:indexPath.row];

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation: UITableViewRowAnimationFade];

    }   

} 
```

# opengl - 用一个 glSubBuffer 调用更新多行坐标？

> ID：11334224
> 
> 赞同：1
> 
> 时间：2012-07-04T18:57:27.563
> 
> 标签：opengl

给定坐标，我使用以下代码渲染一条线`data`：

创建和上传数据：

```
nPoints = 3 # let's use three points as an example, in reality this would be 1000
data = [x1y1 x2y2 x3y3]

# upload data
glBufferData(GL_ARRAY_BUFFER, sizeof(data), data, mode) 
```

划清界线：

```
# draw line
stride = 0
offset_to_first_vertex = 0
glVertexPointer(2, GL_FLOAT, stride, offset_to_first_vertex)

offset_to_first_vertex = 0    
glDrawArrays(GL_LINE_STRIP, offset_to_first_vertex, nPoints) 
```

更新第二个点的 y 坐标：

```
offset = 12
glBufferSubData(GL_ARRAY_BUFFER, offset, sizeof(new_data), new_data) 
```

如果我想同时更新多个点的 y 坐标，例如第二点和第三点的 y 坐标，事情会变得更加复杂：

```
offset = 12
glBufferSubData(GL_ARRAY_BUFFER, offset, sizeof(new_data), new_data)
offset = 20
glBufferSubData(GL_ARRAY_BUFFER, offset, sizeof(new_data), new_data) 
```

调用`glBufferSubData`非常昂贵，因此我宁愿进行一次调用并同时覆盖所有值。不幸的是，您不能将`stride`值传递给`glBufferSubData`，这意味着我只能覆盖内存的连续部分。

我在想，也许我需要以不同的方式重新组织内存中的数据：

```
data = [x1x2x3y1y2y3] 
```

这样我可以一次调用覆盖多个值`glBufferSubData`。但是，如果我这样做，那么我就不能再用`glVertexPointer`and渲染这些点`glDrawArrays`了。

**因此我的问题是：** 更新我的线的多个单坐标的最佳方法是什么？我应该如何布局内存中的数据？我怎样才能画线？

**EDIT1：**我可能会跟踪 x 值并通过覆盖相应的 x/y 对来更新多个点。但如果可能的话，我想防止这种情况发生。

**EDIT2：**有没有办法渲染一行两个 VBO？假设一个 VBO 保留 x 值，而另一个 VBO 保留 y 值。这似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:16:51.470

可以使用着色器吗？我想如果你想要你可以将 x 和 y 位置作为单独的属性，然后在着色器中组合它们（你甚至可以将 x 和 y 放在单独的缓冲区中）。

如果在固定管道中，您可以查看 glMapBuffer，它允许您将整个缓冲区映射到本地客户端。然后，您可以以任何您想要的方式更新任何值。我不知道性能对此有何影响。

# c - 在c中找到好的缓冲区库

> ID：11334226
> 
> 赞同：0
> 
> 时间：2012-07-04T18:57:38.277
> 
> 标签：c, buffer

我们正在用 C（仅 C）设计一个软件，其中的某些部分需要缓冲区结构。但是我知道如何选择一个好的吗？实际上我们的程序是开源的，我们需要一个开源且高效的C语言缓冲区和队列库来实现这部分。感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T19:58:25.447

你可以使用这个容器库：

[https://github.com/jacob-navia/ccl](https://github.com/jacob-navia/ccl)

它来自古怪的天才 jacob navia（如果你不是 comp.lang.c 的常客，你将无法理解它）。但问题是图书馆安静高效，而且非常“优秀”的手册。文档肯定会购买 c 编码器。

它具有最常见的数据结构，如列表/队列/双端队列/循环链表等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:27:45.783

考虑使用[libevent](http://libevent.org/)。较新的版本带有一个适用于 libevent 提供的事件框架的缓冲区接口。从他们的网页：

> Libevent 还为缓冲网络 IO 提供了一个复杂的框架，支持套接字、过滤器、速率限制、SSL、零拷贝文件传输和 IOCP。Libevent 包括对几个有用协议的支持，包括 DNS、HTTP 和最小的 RPC 框架。

# c# - 通过 MSI 包执行批处理命令

> ID：11334227
> 
> 赞同：2
> 
> 时间：2012-07-04T18:57:55.810
> 
> 标签：c#, batch-file, windows-installer, wmi

我有一个庞大的 PC 网络，它们都在同一个域（活动目录）中。我想启用**WMI 服务**和**相关端口**，然后在组策略中将域的管理员凭据设置为我整个网络上的**WMI 凭据。**

对于 Work Grouped 网络，我创建了一个批处理文件，它可以执行我想要的操作，但对于我想要做得最好的域，使用活动目录在整个网络上远程执行批处理文件。

我知道活动目录可以让我执行 MSI 包。

问题是：如何创建可以通过批处理命令执行的 MSI 包？

类似于...的东西

```
@Netsh firewall set service RemoteAdmin enable 
```

我宁愿在 C# .NET 4 中执行此操作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:29:21.617

实际上，我认为这不是为您的 PC 进行设置的最佳方法。但我会告诉你如何创建所需的 MSI。使用所需的批处理文件创建 msi，并使用具有 Deferred 和 No Impersonate 执行上下文的自定义操作[类型 34 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368092%28v=vs.85%29.aspx)
CA 的来源：system32 文件夹（但并不重要）
CA 的目标：`cmd.exe /c ""[INSTALLDIR]your-batch-file.bat"" arg1 arg2`

包括 CA 到`InstallExecuteSequence`阶段`InstallInitialize`和`InstallFinalize`阶段。

# asp.net - “~/”在 ASP 中解析为什么：当前文件夹还是网站的根目录？

> ID：11334235
> 
> 赞同：2
> 
> 时间：2012-07-04T18:58:35.870
> 
> 标签：asp.net

在文件路径中使用 ~/ 会解析为当前文件夹或网站的根目录吗？

我有这样的文件结构：

```
\
->Folder
-->Page1.Aspx

->App_Themes
-->Theme1
--->Images
--->StyleSheet.css

->Includes
-->Footer.htm

Default.aspx
Default.master 
```

我将我的 default.master 页面用于 Page1.aspx 和 default.aspx。母版页使用`<!-- #include file="includes/Footer.htm" -->`. 然后在我的 Footer.html 中，我使用图像的路径，例如：~/App_Themes/Theme1/Images/Image1.png"。

该图像将在 default.aspx 中正确显示，但在 Page1.aspx 中找不到。我认为 ~/ 在文件路径中使用时表示网站的根目录？

编辑：

我错了，它在 defaut.aspx 中也不起作用。有效的路径是：/App_Themes/Theme1/Images/Image1.png。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T19:00:25.637

它解析为当前 Web 应用程序的根，它可能是也可能不是整个网站的根。

要了解差异，请参阅[本文](http://learn.iis.net/page.aspx/150/understanding-sites-applications-and-virtual-directories-on-iis/)。

作为一般规则，当您在 Visual Studio 中创建“网站”或“Web 应用程序”时，实际上是在 IIS 中创建“Web 应用程序”。

为了进一步混淆水域，从概念上讲，网站的根目录本身就是一个 IIS“应用程序”，因此您可以将 Visual Studio 网站/Web 应用程序发布到网站的根目录。在这种情况下，~/ 将引用站点的根目录。

但是，如果您有多个应用程序都在一个站点中运行，那么在每个站点中，~/ 将引用该应用程序的根目录。

例如，假设 MySite.com 有不同的应用程序

*   mySite.Com - Visual Studio 中的不同应用程序，具有一般站点内容。
*   mySite.Com/shop 有一个购物车。这是 Visual Studio 中一个独特的应用程序，也是一个独特的 IIS 应用程序。
*   MySite.Com/Support 包含一个单独的、独特的客户支持应用程序。提交票证，与现场接线员聊天等。

在上述所有内容中，mysite.com 是网站。但 /* 表示应用程序。~/ 将指

*   mySite.com/
*   mySite.Com/shop/

和

*   MySite.Com/支持/

分别

# ruby-on-rails - 如何使用祖先 Ruby on Rails 3 创建类别树

> ID：11334236
> 
> 赞同：0
> 
> 时间：2012-07-04T18:59:04.583
> 
> 标签：ruby-on-rails, ruby, tree, categories, ancestry

我正在尝试使用祖先 Ruby on Rails 3 制作类别树。我的 _form.html.erb

```
<%= form_for(@category) do |f| %>
  <% if @category.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@category.errors.count, "error") %> prohibited this category from being saved:</h2>
      <ul>
        <% @category.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :ancestry %><br />
    <%= f.collection_select :ancestry, Category.all(:order => "title"), :id, :title, :include_blank => true %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我的 index.html.erb：

```
<ul id="menu">
  <% for category in @categories %>
    <li><%= link_to h(category.title), category %>
      <%= link_to "subcategory", new_category_path(:parent_id => category) %> |
      <%= link_to "Destroy", category, :confirm => "Are you sure?", :method => :delete %>
      <%= link_to 'Show', category %>
    </li>
  <% end %>
</ul> 
```

我应该如何更改索引以显示所有类别树？我试图将索引更改为：

```
<ul id="menu">
  <% for category in @categories %>
    <li><%= category.subtree.all(:order => :title, :limit => 10) %>
      <%= link_to "subcategory", new_category_path(:parent_id => category) %> |
      <%= link_to "Destroy", category, :confirm => "Are you sure?", :method => :delete %>
      <%= link_to 'Show', category %>
    </li>       
  <% end %>
</ul> 
```

但更改后看不到标题：`#<Category:0xb5fb731c>#<Category:0xb5fb6fc0>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T20:46:55.800

我假设您要显示从树的顶部到底部的所有类别的列表。

然后使用祖先你必须依赖gem 中给出的`roots`和方法。`children`例如：

```
<ul id="menu">
  <% Category.roots.each do |category| %>
     <li> <%= link_to h(category.title), category %>
        # depending on the depth of your tree it is better to rely on an helper
        # to drill into the level of the tree
        <% unless category.children.empty? %>
           <ul id="sub-menu"> 
             <% category.children.each do |subcategory| %>
                <li> link_to h(subcategory.title), subcategory </li>
             <% end %>
           </ul>
        <% end %>
     </li>
  <% end %>
</ul> 
```

您可能会发现以下代码片段对递归方法很有用：http: [//dzone.com/snippets/acts-tree-category-display](http://dzone.com/snippets/acts-tree-category-display)

# python - 使用 urllib2、socks5 代理和 socksipy 超时不起作用

> ID：11334238
> 
> 赞同：2
> 
> 时间：2012-07-04T18:59:38.770
> 
> 标签：python, proxy, urllib2, socks

我在 Python 2.6 中使用带有 urllib2 的 socksipy。一切正常，除了当我点击一个挂起的 URL 时超时。urllib2 函数超时参数或全局套接字默认超时都不起作用。我什至尝试在下面的子类处理程序中以多种不同的方式设置超时，但没有成功。有任何想法吗？

这是一个测试脚本（假设您安装了 socksipy 项目并将其添加到系统路径中）：

```
import os, sys
import httplib
sys.path.append( "/parent/path/to/socksipy/project" )
import socks # import socksipy
import socket
socket.setdefaulttimeout(30.0)
import urllib2

class SocksiPyConnection(httplib.HTTPConnection):
    def __init__(self, proxytype, proxyaddr, proxyport = None, rdns = False, username = None, password = None, *args, **kwargs):
        self.proxyargs = (proxytype, proxyaddr, proxyport, rdns, username, password)
        httplib.HTTPConnection.__init__(self, *args, **kwargs)

    def connect(self):
        self.sock = socks.socksocket()
        self.sock.setproxy(*self.proxyargs) 
        if isinstance(self.timeout, float):
            self.sock.settimeout(self.timeout)
        self.sock.connect((self.host, self.port))

class SocksiPyHandler(urllib2.HTTPHandler):
    def __init__(self, *args, **kwargs):
        self.args = args
        self.kw = kwargs
        urllib2.HTTPHandler.__init__(self)

    def http_open(self, req):
        def build(host, port=None, strict=None, timeout=0):
            conn = SocksiPyConnection(*self.args, host=host, port=port, strict=strict, timeout=timeout, **self.kw)
            return conn
        return self.do_open(build, req)

if __name__ == '__main__':

    #
    # this one works for non-hanging URL
    #
    proxyhost = "responder.w2"
    proxyport = 1050
    socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, proxyhost, int(proxyport))
    socket.socket = socks.socksocket
    resp = urllib2.urlopen("http://www.google.com", timeout=30.0)
    # hang here
    print "returned 1"

    #
    # one way to go about it for a hanging URL
    #
    proxyhost = "responder.w2"
    proxyport = 1050
    socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, proxyhost, int(proxyport))
    socket.socket = socks.socksocket
    resp = urllib2.urlopen("http://erma.orr.noaa.gov/cgi-bin/mapserver/charts?version=1.1.1&service=wms&request=GetCapabilities", timeout=30.0)
    # it hangs here
    print "returned 2"

    #  
    # another way to go about it for hanging URL
    #
    proxyhost = "responder.w2"
    proxyport = 1050
    opener = urllib2.build_opener(SocksiPyHandler(socks.PROXY_TYPE_SOCKS5, proxyhost, int(proxyport)) )
    resp = opener.open("http://erma.orr.noaa.gov/cgi-bin/mapserver/charts?version=1.1.1&service=wms&request=GetCapabilities", timeout=30.0)
    # it hangs here
    print "returned 3" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-01T15:03:12.203

这对我有用：

```
socks.socket.setdefaulttimeout(7) 
```

您应该避免直接编辑 python socks 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:18:04.713

事实证明，我上面提到的“挂起/超时”问题实际上是[sockssipy socks.py](http://sourceforge.net/projects/socksipy/)代码中的“阻塞”问题。如果您访问的端点仍然以 200 响应但不发送数据（0 字节），那么 socks.py 将阻塞，因为这就是它的写入方式。这是创建自己的超时之前和之后：

**socks.py 之前**：

```
def __recvall(self, bytes):
    """__recvall(bytes) -> data
    Receive EXACTLY the number of bytes requested from the socket.
    Blocks until the required number of bytes have been received.
    """
    data = ""
    while len(data) < bytes:
       data = data + self.recv(bytes-len(data))
    return data 
```

**socks.py 后超时**：

```
def __recvall(self, bytes):
    """__recvall(bytes) -> data
    Receive EXACTLY the number of bytes requested from the socket.
    Blocks until the required number of bytes have been received.
    """
    data = self.recv(bytes, socket.MSG_WAITALL)
    if type(data) not in (str, unicode) or len(data) != bytes:
        raise socket.timeout('timeout')
    return data 
```

# php - 这有更聪明的方式来使用 php next/previous_post？

> ID：11334239
> 
> 赞同：0
> 
> 时间：2012-07-04T18:59:48.587
> 
> 标签：php, wordpress, categories, next

我的博客上有一个“下一个/上一个”按钮，当您从主页开始查看并后退（以便通过帖子后退或前进）时，该按钮非常有用。我用这个：

```
<div><h4><span><?php next_post('% &lsaquo;&lsaquo;&lsaquo;',  'Previous', 'no', 'no'); ?></span>
 <span> <div class="right"><?php previous_post('&rsaquo;&rsaquo;&rsaquo;  %', 'Next', 'no', 'no'); ?></span>
 </h4></div> 
```

但是，每个帖子都分为几类，每个类别都有一个菜单……这是我遇到问题的时候。我在 single.php 中使用了上面的代码，但是当您单击其类别中的帖子并单击下一个/上一个...它会转到该特定帖子时发布的下一个或上一个帖子...不是类别。

是否可以执行以下操作：如果用户访问并继续正常浏览 ste（按我发布它们的顺序查看帖子），则下一个/上一个按钮正常工作，但如果用户通过类别浏览，下一个之前的按钮会知道这一点并引导用户浏览其余的帖子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:07:07.667

如果用户来自首页，您可能只需将参数附加到 URL。所以你有：

[http://path.to/blog/article/url/?fromhome=true](http://path.to/blog/article/url/?fromhome=true)

并且可以在调用 previous_post 方法时检查它。如果已设置，您可以修改其参数以显示所有帖子，否则您将仅显示同一类别的帖子。（不要忘记将 fromhome 参数传递给下一个/上一个帖子链接！）

编辑：您可以使用 post_link 过滤器来修改 permalink/next_post 方法中的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:16:52.563

不幸的是，除非您在 category.php 中设置 cookie，否则没有内置方法可以区分用户是否通过类别存档查看了帖子。如果你想看看这样做，请查看 php 函数[setcookie()](http://us.php.net/setcookie)。

[next_post()](http://codex.wordpress.org/Function_Reference/next_post)和[previous_post()](http://codex.wordpress.org/Function_Reference/previous_post)都有一个名为“in_same_cat”的参数，它是您示例中两个函数的最后一个参数，您已将其设置为“否”。只需将它们设置为“是”，链接将指向同一类别中的兄弟帖子。

请注意，这两个功能都已被弃用。它们已被[next_post_link()](http://codex.wordpress.org/Function_Reference/next_post_link)和[previous_post_link()](http://codex.wordpress.org/Function_Reference/previous_post_link)取代。参数略有变化，这里有一个例子：

```
<?php next_post('% &lsaquo;&lsaquo;&lsaquo;',  'Previous', 'no', 'yes'); ?>
<?php previous_post('&rsaquo;&rsaquo;&rsaquo;  %', 'Next', 'no', 'yes); ?> 
```

会成为：

```
<?php next_post_link('% &lsaquo;&lsaquo;&lsaquo;', 'Previous', 'yes'); ?>
<?php previous_post_link('&rsaquo;&rsaquo;&rsaquo;  %', 'Next', 'yes'); ?> 
```

# ios - 将活动指示器添加到 Web 视图

> ID：11334247
> 
> 赞同：2
> 
> 时间：2012-07-04T19:00:09.033
> 
> 标签：ios, webview, uiactivityindicatorview

我想将活动指示器添加到 Web 视图。但我不知道 web 视图何时完成加载。我开始在 viewdidload 中制作动画..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T19:08:19.573

您不应该在 viewDidLoad 中开始制作动画。符合

```
UIWebViewDelegate 
```

协议并使您的 Web 视图的委托成为您的视图控制器，然后使用委托方法：

```
@interface MyVC: UIViewController <UIWebViewDelegate> {
    UIWebView *webView;
    UIActivityIndicatorView *activityIndicator;
}

@end

@implementation MyVC

- (id)init
{
    self = [super init];
    // ...

    activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    activityIndicator.frame = CGRectMake(x, y, w, h);
    [self.view addSubview:activityIndicator];

    webView = [[UIWebView alloc] initWithFrame:CGRectMake(x, y, w, h)];
    webView.delegate = self;
    // ...
    return self;
}

- (BOOL)webView:(UIWebView *)wv shouldStartLoadWithRequest:(NSURLRequest *)rq
{
    [activityIndicator startAnimating];
    return YES;
}

- (void)webViewDidFinishLoading:(UIWebView *)wv
{
    [activityIndicator stopAnimating];
}

- (void)webView:(UIWebView *)wv didFailLoadWithError:(NSError *)error
{
    [activityIndicator stopAnimating];
}

@end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T19:07:11.913

实现`UIWebViewDelegate`协议 这些是您需要在代码中实现的委托：

```
- (void)webViewDidStartLoad:(UIWebView *)webView; //a web view starts loading
- (void)webViewDidFinishLoad:(UIWebView *)webView;//web view finishes loading
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error; //web view failed to load 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T19:02:19.843

您将需要侦听 Web 视图委托回调以正确显示您的活动指示器。

具体来说，您将要收听：

webViewDidStartLoad：（开始你的活动指示器动画）

webViewDidFinishLoad：（结束）

webView:didFailLoadWithError: (结束)

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-22T06:56:52.083

```
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.

self.webViewRef.delegate = self;
NSURL *websiteUrl = [NSURL URLWithString:Constants.API_TERMS_AND_CONDITIONS_URL];
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:websiteUrl];
[self.webViewRef loadRequest:urlRequest];
}

#pragma mark
#pragma  mark -- UIWebViewDelegate
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
[self.activityIndicator startAnimating];
return YES;
}
 - (void)webViewDidStartLoad:(UIWebView *)webView{
[self.activityIndicator startAnimating];
 }
  - (void)webViewDidFinishLoad:(UIWebView *)webView{
[self.activityIndicator stopAnimating];
self.activityIndicator.hidden = YES;
 }
- (void)webView:(UIWebView *)webView didFailLoadWithError:(nullable NSError *)error{
[self.activityIndicator stopAnimating];
self.activityIndicator.hidden = YES;
 } 
```

# wcf - 在我的服务中，该方法被定义为返回一个 MessageContract 但只返回第一个属性

> ID：11334249
> 
> 赞同：0
> 
> 时间：2012-07-04T19:00:16.703
> 
> 标签：wcf

我在服务中有一个方法接收 messageContract 并返回其他不同的 messageContact 结果。第二个 messageContract 有很多 messageHeaders。

在合同中，我定义了返回此结果消息合同的方法，但在客户端 Visual Studio 中告诉我该方法返回 Int64。

为什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:06:40.230

您需要通过右键单击更改服务引用以检查客户端中的允许消息合同选项..然后更新服务引用..您将获得

# android - Qt（必需品）+ SDL + Android

> ID：11334253
> 
> 赞同：1
> 
> 时间：2012-07-04T19:00:27.490
> 
> 标签：android, qt, android-ndk, sdl

我在 Qt 中编写了一个应用程序（[一个开源 ROV 控制器](http://sourceforge.net/p/rov-suite/ "一个开源 ROV 控制器")），它使用 SDL 在 Windows 和 OSX 上支持操纵杆，我想将它移植到 Android。我唯一的问题是我需要在 Android 中获得 USB 游戏杆支持。有人让 SDL**在 Android 上**使用 Qt吗？如果是这样，你是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:27:34.427

我有几个基于 SDL 1.2 库的复杂程序可以在 Android 上运行。代码库在这里 -

[http://github.com/pelya/commandergenius](http://github.com/pelya/commandergenius)

Pelya 的 SDL 1.2 移植到 Android 支持操纵杆控件（它可以在屏幕上模拟，并且您可以扩展）。我已经完成了使用操纵杆的实验性端口，尽管我的版本还没有使用该功能。

就 qt 而言，Android 的 qt lighthouse 项目代号为 necessitas，位于[http://sourceforge.net/p/necessitas/home/necessitas](http://sourceforge.net/p/necessitas/home/necessitas)。我不知道他们的港口有多远，但他们的项目是你最好的选择。

# spring-mvc - Spring MVC 控制器映射——@RequestMapping

> ID：11334254
> 
> 赞同：0
> 
> 时间：2012-07-04T19:00:28.773
> 
> 标签：spring-mvc, controller, spring-annotations

我正在尝试理解 Spring MVC 注释。我看过各种教程，我只是想确保我理解。在这个例子中，

```
@RequestMapping("/welcome") 
```

我是否正确理解欢迎是向控制器发出请求的页面，而不是控制器发送响应的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:16:48.330

如果我正确理解你的措辞，你是对的。注释指定了一个 URL ，`@RequestMapping`控制器将被调用以生成页面内容。`@RequestMapping("/welcome")`意味着当浏览器请求时，`http://yoursite.com/welcome`将调用此控制器。注释没有指定用于呈现页面输出的视图的名称，因此您可以自由地让控制器使用`home.jsp`或`index.jsp`或您想要的任何其他页面构建其响应；您不需要有一个名为“欢迎”的视图。不过，我不确定说控制器“将响应发送到页面”是否真的有意义，因为在 HTTP 中，对请求的响应*是*页面；控制器的基本思想是，给定一个请求，它会生成一个网页作为响应发送回客户端。

# silverlight - 如何在 Silverlight 应用程序中创建通用媒体播放器？

> ID：11334255
> 
> 赞同：0
> 
> 时间：2012-07-04T19:00:46.927
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

我希望媒体播放器可以根据 SL 应用程序中的 url 源播放图像、音频视频。如何在 SL 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:06:45.177

您需要的是[Silverlight 媒体框架](http://smf.codeplex.com/)

它提供开箱即用的完整和强大的媒体播放器体验。

如果您只想播放视频，请使用[MediaElement](http://msdn.microsoft.com/en-us/library/bb980132%28v=vs.95%29.aspx)

# mysql - MySQL 查询顺序（按大多数出现）

> ID：11334258
> 
> 赞同：1
> 
> 时间：2012-07-04T19:01:13.797
> 
> 标签：mysql, sql, select, sql-order-by

我有一个 MySQL 表，设置如下：

```
id  |  game_type | votes  
01  |  aaa       |  2  
02  |  bbb       |  2  
03  |  ccc       |  4  
04  |  aaa       |  7  
05  |  aaa       |  1  
06  |  ccc       |  11 
```

我想返回所有行，所以它们按game_type排序，但游戏类型的出现次数最多按降序排列，然后按投票数量按降序排列，如下所示：

```
04 aaa  7  
01 aaa  2  
05 aaa  1  
06 ccc  11  
03 ccc  4  
02 bbb  2 
```

如果我只是在查询末尾有 ORDER BY，它只是按随机顺序对它们进行分组。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:19:14.400

试试这个：

```
SELECT M.id, M.game_type, M.votes 
FROM MyTable AS M INNER JOIN
    (SELECT game_type, COUNT(game_Type) AS TypeCount
     FROM MyTable
     GROUP BY game_type
     ORDER BY COUNT(game_Type) DESC) AS U
  ON M.game_type=U.game_type
ORDER BY U.TypeCount DESC, M.game_type, M.votes DESC 
```

# jquery - 将 N 项列表中每个内部元素的总和相加

> ID：11334262
> 
> 赞同：0
> 
> 时间：2012-07-04T19:02:09.053
> 
> 标签：jquery, asp.net-mvc

所以我使用 MVC 来解析活动的 XML 文件并在页面上显示每个活动。每个活动都有自己的价格/成人和价格/儿童，用户可以根据他们之前提交的表格选择成人和儿童的数量。每个活动都有自己的总价。例如，跳伞是 5 美元/成人和 1 美元/儿童。假设我选择了 4 位成人和 3 位儿童，活动元素中的总价格将显示为 23 美元。

我遇到的问题是如何使用 jquery 执行此操作，因为我可以接收 N 数量的活动。这是一个活动元素的样子（为了简单起见，我把它说得很清楚）。

**带有 Razor 的 HTML**

```
<li>
<div class="activity" id="@item.ActivityID"> <!--id="ACT001"-->

@Html.DropDownList(item.ActivityID+"-AdultNum", AdultNum, 
new { data_mini="true", data_inline="true" })<br /> <!--id="ACT001-AdultNum-->

Price/Adult C$:@Html.TextBox(item.ActivityID+"-AdultPrice", item.PricePerAdult, 
new { @readonly = "readonly"}) <!--id="ACT001-AdultPrice-->

@Html.DropDownList(item.ActivityID+"-ChildNum", ChildNum, 
new { data_mini="true",  data_inline="true" })<br /> <!--id="ACT001-ChildNum-->

Price/Child C$: @Html.TextBox(item.ActivityID+"-ChildPrice", item.PricePerChild, 
new { @readonly = "readonly"})

<input type="text" readonly="readonly" id="@item.ActivityID-Sum"/><!--id="ACT001-Sum"-->

</div>
</li> 
```

**MVC 生成的 HTML**

```
<li>
<div class="activity" id="ACT001">

<label for="AdultNum">Adults(18+):</label>
<select data-inline="true" data-mini="true" id="ACT001-AdultNum" name="ACT001-AdultNum">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select><br />

Price/Adult C$:<input id="ACT001-AdultPrice" name="ACT001-AdultPrice" 
               readonly="readonly" type="text" value="19.00" />

<label for="ChildNum">Children(0-17):</label>
<select data-inline="true" data-mini="true" id="ACT001-ChildNum" name="ACT001-ChildNum">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select><br /> 

Price/Child C$: <input id="ACT001-ChildPrice" name="ACT001-ChildPrice" 
                readonly="readonly" type="text" value="11.00" /> 

<input type="text" id="ACT001-Sum" readonly="readonly"/>

</div>
</li> 
```

所以基本上我想要 ACT001-Sum = ACT001-AdultNum * ACT001-AdultPrice + ACT001-ChildNum * ACT001-ChildPrice。然而，这只是一项活动，并且有 N 项活动。第二个活动将遵循 ACT002-Sum、ACT002-AdultNum、ACT002-AdultPrice、ACT002-ChildNum 的格式，第三个活动将有 ACT003... 等等。

我想知道如何在 jquery 中有 1 个基本函数来解决这个问题。我对这样的事情有一个粗略的想法，但还没有考虑清楚。我将不胜感激这部分的帮助。

```
<script type="text/javascript">
    $('.activity').each(function() {
         var id = $(this).attr("id"); <!--take the "ACT001" part" -->
         var adultnum = id + "-AdultNum";
         var adultprice = id + "-AdultPrice";
         var childnum = id + "-ChildNum";
         var childprice = id + "-ChildPrice";

         $(#id+"-Sum").val(#adultnum.val() * #adultprice.val() + 
         #childnum.val() * #childprice());
    });
</script> 
```

我很确定我的语法都是错误的，但我基本上想获取每个活动的 ID 并附加 -AdultNum、-AdultPrice、-ChildNum 和 -ChildPrice 并找到总和。如果有更好的解决方案，我很乐意改用它。如果我所做的实际上没有任何意义，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:28:11.617

我建议您首先组织价格与价格适用的群体之间的关系，例如：（`class="numAdults"` `class="adultPrice"`对于儿童的活动和价格也是如此），这表示您最终会得到以下内容：

```
<div class="activity" id="ACT001">

<label for="AdultNum">Adults(18+):</label>
<select data-inline="true" data-mini="true" id="ACT001-AdultNum" name="ACT001-AdultNum" class="numAdults">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select><br />

Price/Adult C$:<input id="ACT001-AdultPrice" name="ACT001-AdultPrice" 
               readonly="readonly" type="text" value="19.00" class="adultPrice" />

<label for="ChildNum">Children(0-17):</label>
<select data-inline="true" data-mini="true" id="ACT001-ChildNum" name="ACT001-ChildNum" class="numChildren">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select><br /> 

Price/Child C$: <input id="ACT001-ChildPrice" name="ACT001-ChildPrice" 
                readonly="readonly" type="text" value="11.00" class="childPrice" /> 

<input type="text" id="ACT001-Sum" readonly="readonly" class="total" />

</div> 
```

有了这个标记，活动的数量就无关紧要了，因为您可以使用它们的类名来定位相关元素，而不必计算出`id`或其他方式；并且，在这种情况下，以下应该有效（尽管目前未经测试）：

```
var pI = parseInt; // lazy way to access parseInt
function sumActivities(){
    $('.activity').each(
        function(){
            var that = $(this),
                numAdults = pI(that.find('.numAdults').val(),10),
                adultPrice = pI(that.find('.adultPrice').val(),10),
                numChildren = pI(that.find('.numChildren').val(),10),
                childPrice = pI(that.find('.childPrice').val(),10),
                total = pI((numAdults * adultPrice) + (numChildren * childPrice),10);
            that.find('.total').val(total);
            console.log(numAdults,adultPrice,numChildren,childPrice);
        });
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NtQdG/)。

[更新了显示第二个活动框的 JS Fiddle](http://jsfiddle.net/davidThomas/NtQdG/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T07:46:54.777

```
<script type="text/javascript">
    $(document).ready(function () {
        //        $("#Heading_FeeAllocation").append("<br/><select id='SelectStatus' width='15%' align=left><option value=Paid>Paid</option><option value=Pending>Pending</option><option value=Extra>Extra</option></select>");       

        $("#submit").bind("click", function () {
            Loader.Show();
        });

        $("#Select_FeeAllocation").live("change", function () {
            var selectedshiftid = $("#Select_FeeAllocation option:selected").val();
            $.each($("#TableStudent tr"), function (index, item) {
                if ($(item).find(".SelectCustom_FeeAllocation").is(":checked")) {
                    $(item).find(".Custom_FeeAllocation").attr('value', selectedshiftid);
                }
            });
        });

    });

    $("input:checkbox").live("click", function () {
            if ($(this).is(":checked")) {
                $(this).attr("value", "True");
            } else {
                $(this).attr("value", "False");
            }
        });
        $("#Add_All_Record").bind("click", function () {
            if ($(this).attr("checked") == "checked") {
                $("input.Select_FeeAllocation").attr("checked", "checked");
                $("input.Select_FeeAllocation").attr("value", "True");
            } else {
                $("input.Select_FeeAllocation").removeAttr("checked");
                $("input.Select_FeeAllocation").attr("value", "False");
            }
        });

        $('.amount').blur(function () {
    var sum = 0;
    $('.amount').each(function() {

        if($(this).val()!="")
         {
            sum += parseFloat($(this).val());
         }

    });
        $("#grosstotal").val(sum);
});​​​​​​​​​

</script>

<div class ="Left">
        <div class="widgetbox">
        <h3>
            <span>Student List</span></h3>
            <div class="content">
            <table cellpadding="0" cellspacing="0" class="sTable3" width="100%">
                <colgroup>
                    <col class="head1" width="5%" />
                    <col class="head0" width="8%" />
                    <col class="head1" width="20%" />
                    <col class="head0" width="10%" />
                    <col class="head1" width="7%" />
                    <col class="head0" width="10%" />
                    <col class="head1" width="10%" />
                    <col class="head0" width="10%" />
                    <col class="head1" width="10%" />
                    <col class="head0" width="10%" />
                </colgroup>

                <tbody>

                    <tr>
                        <th align="center">
                            <input type="checkbox" class="Check_All" id="Add_All_Record" name="Add_All_Record"
                                value="True" checked="checked">
                            Select All
                        </th>

                        @Html.Raw(ViewBag.Captions)

                        @*<th align="center" width="2%">
                            <input type="checkbox" class="Check_All" id="Add_All_Record" name="Add_All_Record"
                                value="True" checked="checked" />
                            Select All
                        </th>*@
                        @*<th align="center" width="5%">
                            Admission No
                        </th>
                        <th align="center" width="10%">
                            Student Name
                        </th>*@
                        <th align="center" width="20%">
                            Academic Year
                        </th>
                        <th align="center" width="20%">
                            Fee Type Name
                        </th>
                        <th align="center" width="20%"> 
                            Period Name
                        </th>
                        <th align="center" width="20%">
                            Fee Category Name
                        </th>
                         <th align="center" width="20%">
                            Amount
                         </th>

                    </tr>

                </tbody>
            </table>
            <form method="post" action="#" class="form_class" novalidate="novalidate" enctype="multipart/form-data">
            <table id="TableStudent" cellspacing="0" cellpadding="0" border="1" class="sTable3"
                width="100%">
                <tbody class="TableData">
                @{
                    var count=0;
                    string Transferprefix = "CUSTOM_STUDENT_FEEALLOCATION_DETAIL[{0}].";
                    string strTransferprefix = "";
                    //string STUDENT_NAME = ViewBag.Name;
                    //string Admission_No = ViewBag.Admission;
                    foreach (var student1 in ViewBag.StudList)
                   {
                       strTransferprefix = String.Format(Transferprefix,count);
                        <tr rownumber="@count" >
                         <td align="center" width="2%">
                        <input type="checkbox" name="@(strTransferprefix + "SELECTED_STUDENT")" id="@("SELECTED_STUDENT-" + count)" class="SelectStudent" value="True" checked="checked" />  
                         <input type="hidden" name="@(strTransferprefix + "Registration_Id")" id="@("Registration_Id-" + count)" value="@student1.Registration_Id" />
                                <input type="hidden" name="@(strTransferprefix + "Admission_No")" id="@("Admission_No-" + count)" value="@student1.Admission_No" />
                         </td>
                         </tr>

                    foreach (var student in ViewBag.FeesDetails)
                   {
                       //var count1 = 0;
                       //string Transferprefix1 = "CUSTOM_STUDENT_FEEALLOCATION_DETAIL[{0}].";
                       //string strTransferprefix1 = "";
                       strTransferprefix = String.Format(Transferprefix, count);
                        <tr rownumber="@count" >
                         <td align="center" width="2%">
                          @*<input type="checkbox" name="@(strTransferprefix + "SELECTED_STUDENT")" id="@("SELECTED_STUDENT-" + count)" class="SelectStudent" value="True" checked="checked" />
                                 <input type="hidden" name="@(strTransferprefix + "Registration_Id")" id="@("Registration_Id-" + count)" value="@student.Registration_Id" />
                                <input type="hidden" name="@(strTransferprefix + "Admission_No")" id="@("Admission_No-" + count)" value="@student.Admission_No" />*@
                                <input type="hidden" name="@(strTransferprefix + "Fee_Master_Id")" id="@("Fee_Master_Id-" + count)" value="@student.Fee_Master_Id" />
                                <input type="hidden" name="@(strTransferprefix + "Class_Id")" id="@("Class_Id-" + count)" value="@student.Class_Id" />
                                <input type="hidden" name="@(strTransferprefix + "Academic_Year_Id")" id="@("Academic_Year_Id-" + count)" value="@student.Academic_Year_Id" />
                                <input type="hidden" name="@(strTransferprefix + "Academic_Year_Name")" id="@("Academic_Year_Name-" + count)" value="@student.Academic_Year_Name" />
                                <input type="hidden" name="@(strTransferprefix + "Fee_Type_Name")" id="@("Fee_Type_Name-" + count)" value="@student.Fee_Type_Name"/>
                                <input type="hidden" name="@(strTransferprefix + "Period_Name")" id="@("Period_Name-" + count)" value="@student.Period_Name" />
                                <input type="hidden" name="@(strTransferprefix + "Fee_Category_Name")" id="@("Fee_Category_Name-" + count)" value="@student.Fee_Category_Name"/>
                                <input type="hidden" name="@(strTransferprefix + "Amount")" id="@("Amount-" + count)" value="@student.Amount" />
                                @*<input type="hidden" name="@(strTransferprefix + "grosstotal")" id="@("grosstotal-" + count)" value="@student.grosstotal" class= "Amount" />*@

                         </td>
                        @*<td align="center" width="5%">
                                @student.Admission_No
                            </td>
                            <td align="left" width="10%">
                                @student.STUDENT_NAME
                            </td>*@
                            <td align="left" width="20%">
                                @student.Academic_Year_Name
                            </td>
                            <td align="left" width="20%">
                                @student.Fee_Type_Name
                            </td>
                            <td align="left" width="20%">
                                @student.Period_Name
                            </td>
                            <td align="left" width="20%">
                                @student.Fee_Category_Name
                            </td>
                            <td align="center" width="20%">
                                @student.Amount
                            </td>

                            @*<td align="left" width="8%">
                              <select name="@(strTransferprefix + "Attendance")" id="@("Attendance-" + count)" class="Custom_FeeAllocation" style = "width:104px;" rownumber = "@count">
                                   <option value="Paid">Paid</option>
                                   <option value="Pending">Pending</option>
                                   <option value="Extra">Extra</option>                                  
                                   </select>
                            </td>*@

                    </tr>
                    }
                   }
                   }

                </tbody>

                </table>

                 <br />
                 <span style="float:right">TOTAL FEES &nbsp &nbsp
                <input type="text" id="grosstotal" name="grosstotal" value="" class="Amount"/></span> 
                <div class="form_default" style="clear: both;">
                <button id="submit" type="submit" value="submit" class="showbutton">
                    SUBMIT
                </button>
                <button id="btnCancel" type="button" class="showbutton">
                    Cancel</button>

                  </div>
                </form> 

              </div>                              

            </div>  

            </div>

i want to sum the amount column, using jquery, i have list of different fees like, Tution fee, transport fee, foe which Amount is given, i want the total for all the fees in grosstotal text. Thanks 
```

# java - jboss没有在带有断点的调试模式下启动

> ID：11334265
> 
> 赞同：0
> 
> 时间：2012-07-04T19:02:17.673
> 
> 标签：java, jakarta-ee, jboss

我的本地 jboss 服务器以正常模式启动，我可以访问我的应用程序。我想调试我的 java web 应用程序，所以我设置了断点并尝试在调试模式下启动服务器。但它无法在调试模式下启动服务器。然后我删除了所有断点，现在我的服务器以调试模式启动。但现在我看不到启用的步进和步进按钮（我认为因为没有设置断点）。我的目标是了解特定请求的流程。如果我做错了什么，任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:11:03.747

你是如何在调试模式下启动它的？

也许是这样的：

```
set JPDA_ADDRESS=8001
set JPDA_TRANSPORT=dt_socket 
```

如果您在 Unix 环境中，可能使用 export 而不是 set。第二部分是从您拥有代码的任何地方监听该端口。蚀？网豆？设置调试配置（在定义的端口中侦听远程 Java 应用程序，以防您使用 Eclipse）并启动调试配置。现在，您的 IDE 将在执行到达断点时向您显示。

# drupal - 仅对自定义表单进行部分主题化

> ID：11334269
> 
> 赞同：2
> 
> 时间：2012-07-04T19:02:22.923
> 
> 标签：drupal, drupal-6

我已经构建了一个自定义模块来创建一个表单。现在我被困在主题上。我已经有一个表单的 CSS 样式表，因为我的公司是政府的一部分，他们有一个预设的品牌。所以我想改变 Drupal 的默认表单主题函数使用的 HTML，从而实现正确的样式。

但只有表单的表单标签被渲染。不呈现字段集和元素。当主题功能被删除时，默认主题会启动并且表单会正常呈现（但当然没有请求的主题）。

到目前为止我已经尝试过：

### 添加了一个 hook_theme 函数来添加主题功能

```
function publicatieaanvraagformulier_theme() {
  return array(
    'publicatieaanvraagformulier_form' => array(
   'arguments' => array("element" => NULL)  
    ),
    'publicatieaanvraagformulier_fieldset' => array(
      'arguments' => array("element" => NULL)
    ),
    'publicatieaanvraagformulier_form_element' => array(
      'arguments' => array(
        "element" => NULL,
        "value" => NULL
      )
    )
  );
} 
```

### 在表单元素、字段集元素和表单元素中添加了 ['#theme']

```
$form['#theme'] = "publicatieaanvraagformulier_form";
$form['groep'] = array(
  '#title' => t("Please fill in your details"),
  '#type' => "fieldset",
  '#theme' => "publicatieaanvraagformulier_fieldset"
);
$form['groep']['organisatie'] = array(
  '#title' => t("Organization"),
  '#type' => "textfield",
  '#attributes' => array("class" => "text"),
  '#theme' => "publicatieaanvraagformulier_form_element"
); 
```

### 在 form.inc 中默认的基础上添加了实际的主题功能

```
function theme_publicatieaanvraagformulier_form($element) {
function theme_publicatieaanvraagformulier_fieldset($element)
function theme_publicatieaanvraagformulier_form_element($element, $value) 
```

我没有包含这些函数的代码，因为即使使用默认的主题函数代码，它们也不起作用。因此，我认为它们不是问题的根源。

### 该表格称为

```
//Get the form
$form = drupal_get_form('publicatieaanvraagformulier');

//Add messages
$errors = form_get_errors();
if (!empty($errors)) {
  $output .= theme("status_messages","error");
} 

//Show form
$output .= $form;
return $output; 
```

我还没有找到类似的主题化表单的“复杂”示例，但我从书籍和在线搜索中将前者拼凑在一起。

希望有人能解决这个问题（指出我犯的错误）。

问候杰伦

# jquery - GWT 设置 SuggestBox 的位置

> ID：11334270
> 
> 赞同：3
> 
> 时间：2012-07-04T19:02:41.363
> 
> 标签：jquery, gwt

我在 GWT 中使用[SuggestBox](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/SuggestBox.html)来创建一个带有很好建议列表的文本框，如下所示：

```
public void onModuleLoad() {
    MultiWordSuggestOracle oracle = new MultiWordSuggestOracle();  
    oracle.add("Cat");
    oracle.add("Dog");
    oracle.add("Horse");
    oracle.add("Canary");
    SuggestBox box = new SuggestBox(oracle);
    RootPanel.get().add(box);
    }
} 
```

问题是我希望建议列表出现在文本框的顶部，而不是底部。

有没有办法做到这一点？

如果没有，GWT 中是否有任何替代 SuggestBox 的方法？（我成功地配置了 jQuery 的[自动完成](http://jqueryui.com/demos/autocomplete/)小部件以显示在文本框的顶部，但将其与 GWT 集成似乎既不优雅也不高效......）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:50:14.380

I don't think that there is any built-in way to do that, but I think it could be done with a little bit of work. `SuggestBox` has a constructor that takes a `SuggestionDisplay` as parameter. So you could subclass `DefaultSuggestionDisplay` and override its `showSuggestions()` method to display the popup where you want.

# c++ - cout：与循环 cout 语句保持一致的间距

> ID：11334271
> 
> 赞同：3
> 
> 时间：2012-07-04T19:02:47.713
> 
> 标签：c++, formatting, cout

我经常遇到想将二维数组打印到屏幕或文件的情况。我的标准做法是这样的：

```
for(int q=0; q<x; q++)
{
    cout << "\n";
    for(int w=0; w<y; w++)
        cout << number[q][w] << "\t";
} 
```

但是，当元素`number`长度不同时，这通常会导致列未正确对齐。如何在每个数字之后（或之前）添加正确数量的空格以使列对齐？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T19:06:37.550

使用[和](http://en.cppreference.com/w/cpp/io/manip/left)。[`std::setw()`](http://en.cppreference.com/w/cpp/io/manip/setw)_[`std::left``std::right`](http://en.cppreference.com/w/cpp/io/manip/left)

```
#include <iostream>
#include <iomanip>

void printNumber(int x) {
    std::cout << "X:" << std::setw(6) << x << ":X\n";
}

void printStuff() {
    printNumber(528);
    printNumber(3);
    printNumber(73826);
    printNumber(37);
}

int main() {
    std::cout << "Left-aligned\n";
    std::cout << std::left;
    printStuff();
    std::cout << "Right-aligned\n";
    std::cout << std::right;
    printStuff();
} 
```

输出：

```
Left-aligned
X:528   :X
X:3     :X
X:73826 :X
X:37    :X
Right-aligned
X:   528:X
X:     3:X
X: 73826:X
X:    37:X 
```

（演示：http: [//ideone.com/6IdIc](http://ideone.com/6IdIc)。）

In this example, I've used 6 as the maximum width expected. If you don't know the maximum, you'll either need to do an initial pass through your data to find out, or just use the maximum possible for the data-type you're using (to make this portable, you could use [`std::numeric_limits<T>::max`](http://en.cppreference.com/w/cpp/types/numeric_limits)).

# iphone - AFNetworking 和网络错误

> ID：11334274
> 
> 赞同：2
> 
> 时间：2012-07-04T19:02:53.127
> 
> 标签：iphone, objective-c, ios, web-services, afnetworking

我正在使用该`AFNetworking`框架发出几个 JSON Web 请求。

在开发过程中，如果我未能提供所需的参数或服务开发人员破坏了某些东西 :-) 我会收到一个`500 error`

的错误块`AFJSONRequestOperation`正确捕获它。但是我看不到页面正文，因为`AfNetworking`一旦收到头部中的错误代码就取消请求。

有什么解决办法。我想将响应正文吐出到日志中。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T20:12:06.093

使用传递到失败块的操作中的`responseData`or属性。`responseString`

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-07-09T13:46:37.463

您需要将 http 代码 500 添加到可接受的状态代码中，并在成功回调中对其进行过滤。在那里你将有一个 responseObject。

# vsto - 如何在当前打开的文件中保存 VSTO 加载项的选项？

> ID：11334278
> 
> 赞同：3
> 
> 时间：2012-07-04T19:03:21.110
> 
> 标签：vsto, add-in, powerpoint, savestate

我正在为 Powerpoint 2010 构建一个 VSTO 加载项，加载项集的选项适用于当前打开的文件，而不是每个用户的配置。我可以将这些选项保存在当前文件中吗（我的意思是，将自定义 XML 添加到 .PPTX 文件中）？如果是这样，怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T20:21:55.297

对于非常简单的数据，自定义属性是可以的（只要您知道打开文件的任何人都可以查看、编辑和删除它们）。请注意，由于 PPT 在链接和文档属性之间共享一个共同的、太小的数据分配，因此添加太多可能会消灭另一个。

我会改用标签。每个形状、幻灯片和演示对象都可以有一个标签集合，其中包含一个或多个名称/值对字符串。

这些对用户是不可见的，并且不会干扰演示文稿中的超链接。

```
' To add a tag
With ActivePresentation
  .Tags.Add "MyTagName", "MyTagValue"
End With

' To use a tag
If ActivePresentation.Tags("MyTagName") = "MyTagValue" Then
   ' Do something or other
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:20:30.247

如果您的选项不太复杂，我会选择文档自定义属性。以下问题说明了如何在[Excel 中使用自定义属性，](https://stackoverflow.com/questions/1137763/accessing-excel-custom-document-properties-programatically) PowerPoint 也支持它们，因此这应该提供一个很好的起点！

# android - 实现自定义启动器文件夹类

> ID：11334284
> 
> 赞同：0
> 
> 时间：2012-07-04T19:04:09.917
> 
> 标签：android, launcher

我试图弄清楚（如果可能的话）覆盖内置 ICS 启动器文件夹的行为。

我想添加一个特定的小改动（只需在顶部添加一个按钮以按字母顺序排序即可）。通过查看 Launcher2 的源代码，添加行为应该很容易，但我似乎无法找到挂钩启动器并覆盖特定位的方法。

我会冒险猜测正确的方法是您必须实现一个完整的自定义启动器（通过更改我有兴趣更改和重新编译 Launcher2 的类）并且我希望做的事情是不可能的。Android/Java 不是我的日常工作，所以我希望可能有一种我没有看到更有经验的开发人员知道的方法。

简而言之是/如何实现 com.android.Launcher2.Folder 的自定义子类并改用它？最好只使用一个应用程序，而不必完全覆盖普通的 ICS 启动器应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:17:00.170

> 我试图弄清楚（如果可能的话）覆盖内置 ICS 启动器文件夹的行为。

不，对不起。

> 我会冒险猜测正确的方法是您必须实现一个完整的自定义启动器（通过更改我有兴趣更改和重新编译 Launcher2 的类）并且我希望做的事情是不可能的。

正确的。除此之外，您不能简单地重用他们的代码，因为包在 Android 设备中必须是唯一的。

> 如何实现 com.android.Launcher2.Folder 的自定义子类并改用它？

完全重建包含修改后的类的固件，然后在您的设备上使用修改后的固件。或者，将整个主屏幕应用程序重构到您自己的包中，将其构建为独立应用程序（这可能并不容易），然后添加您的更改。

更简单的方法是让您制作自己的[应用程序小部件](http://developer.android.com/guide/topics/appwidgets/index.html)来实现某种文件夹结构。这不会“覆盖内置 ICS 启动器文件夹的行为”，但它可以为您提供所需的功能。

# python - Windows Python 如何从网站下载 Dropbox 弹出窗口？

> ID：11334285
> 
> 赞同：0
> 
> 时间：2012-07-04T19:04:18.367
> 
> 标签：python, windows, redirect, download, dropbox

好的，所以问题是我访问了一个网站来下载我想要的文件，但问题是我尝试从中下载文件的网站没有托管实际文件，而是使用保管箱来托管它，所以只要你点击下载您的重定向到一个空白页面，该页面在一个小窗口中弹出下拉框，允许您下载它。需要注意的是，没有登录，所以我可以直接将 python 引导到 dropbox 弹出的链接，但它不会下载文件。

```
import urllib

url = 'https://thewebsitedownload.com' 

filename = 'filetobedownloaded.exe'  
urllib.urlretrieve(url, filename) 
```

这就是我使用的代码，它就像直接下载的魅力，但现在当我尝试将它用于具有下拉框弹出下载的网站时，它最终只是下载了该网站的 html 代码（据我所知) 并且实际上并不下载文件。一般来说，我对 python/ 编码还是比较陌生，但到目前为止我很喜欢它，这只是我遇到的第一堵砖墙，但我没有找到任何类似的解决方案。提前致谢！示例代码帮助很大，这就是我到目前为止的学习方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:28:52.873

使用[Beautifulsoup](http://www.crummy.com/software/BeautifulSoup)解析你得到的 html。然后，您可以获得指向该文件的 href 链接。网上有很多 Beautifulsoup 教程，所以我认为您会发现在您的特定情况下如何获取链接相当容易。

首先，您使用已有的代码下载 html，但没有文件名：

```
import urllib
from bs4 import BeautifulSoup
import re

url = 'https://thewebsitedownload.com' 

text = urllib.urlopen(url).read()

soup = BeautifulSoup(text)
link = soup.find_all(href=re.compile("dropbox"))[0]['href']
print link
filename = 'filetobedownloaded.exe'
urllib.urlretrieve(link, filename) 
```

我是从[docs](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)制作的，但尚未对其进行测试，但我认为您明白了。

# android - Android内容提供者随机顺序

> ID：11334286
> 
> 赞同：1
> 
> 时间：2012-07-04T19:04:22.953
> 
> 标签：android, random, uri, android-contentprovider

有人可以指出我正确的方向吗：

如何以随机顺序提供此查询？

```
musiccursor = getActivity().getContentResolver().query(
MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, 
musicdata, 
selection,
dirs, 
MediaColumns.DATA+ " asc"); 
```

我尝试用各种东西替换“asc”，包括 Random()、RAND....我很难过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:14:34.577

选择 25 条随机记录：

```
musiccursor = getActivity().getContentResolver().query(
MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, 
musicdata, 
selection,
dirs, 
"RANDOM() LIMIT 25"); 
```

这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T21:27:51.683

作为记录，这就是我实施解决方案的方式：

```
if(isShuffle){
// shuffle is on - play a random song
 sortOrder = "RANDOM()";
 } 
else{
sortOrder = MediaColumns.DATA+ " asc";   
}

...

//run the query          
musiccursor = ctx.getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, 
musicdata, 
selection,
dirs,
sortOrder); 
```

通过这样做，我可以将随机排序的光标扔到列表视图中。用户可以看到随机播放列表顺序，而不是像大多数应用程序那样“秘密”随机选择下一首歌曲。

# web-services - 如何使用 Web 服务方法在报表查看器上远程显示 rdl 报表，而不是 URL 和报表路径？

> ID：11334287
> 
> 赞同：0
> 
> 时间：2012-07-04T19:04:30.137
> 
> 标签：web-services, reporting-services, ssrs-2008, report-viewer2010

我需要知道有什么方法可以使用 SSRS Web 服务方法用作报告查看器的 URL？以更好的方式，我在 SSRS Web 服务器上发布了一个 rdl 报告，从客户端我有一个报告查看器，可以从 SSRS Web 服务器获取该报告并将其显示在我的 WinForm 上。报表查看器使用远程处理模式和 Web 服务器的 URL 和 rdl 文件的路径。我想如何使用 Web 服务方法（如果有的话）而不是 URL 和路径来在我的 Winform by Report 查看器上显示我的报告，是否有专家知道如何这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:50:04.800

根据我在报告服务方面的经验，
您可以使用报告服务来获取报告服务器中任何项目的信息，要打开（查看）任何报告，您将需要报告路径。

谢谢，苏菲安

# javascript - 如何使用javascript写入div

> ID：11334289
> 
> 赞同：-1
> 
> 时间：2012-07-04T19:04:39.813
> 
> 标签：javascript, jquery, html

我想在javascript中创建一个例如内容变量，其中将有一个带有某些值的html标签。按下按钮时如何将其放入 div 中。

例如 ：

这是我要使用的内容：

```
var contentString = '<div id="info">'+
'<h2><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Info:</b></h2>'+
'<div id="bodyContent">'+ 
'<div style=width:220px;display:inline-block;>'+
'<p>&nbsp; Name: '+ this.name + '</p>' +
'<p>&nbsp; Last name: '+ this.last+ '</p>' +
'<p>&nbsp; 
'</div>'+
'</div>'+
'</div>'+
'</form>'; 
```

我想把它放进去：`<div id=something"></div>` 在javascript中我可以有类似的东西：

```
$("#button").on('click', function() {
// What to put in here?
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T19:06:08.667

> 按下按钮时如何将其放入 div 中。

像这样：

```
$("#button").on('click', function() {
  $('#something').html(contentString);
}); 
```

更多信息`html()`；

*   [http://api.jquery.com/html/](http://api.jquery.com/html/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:06:20.807

如果我没有误解，那么这将起作用：

```
$("#button").on('click', function() {
    $('#something').html(contentString);
}); 
```

当然，这确实假设你有一个带有`id`of的元素`button`（尽管我假设你有，否则你不会放那个 jQuery）。

[JS 小提琴演示](http://jsfiddle.net/davidThomas/hAEYT/)。

参考：

*   [`html()`](http://api.jquery.com/html/).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T19:06:46.370

它是这样的：

```
$("#button").on('click', function() {
   $("#something").html(contentString);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T19:06:19.963

你应该修正你的标记。你有不平衡的元素，你不能在字符串中有新行而不转义它。试试这个：

```
var contentString = '<div id="info">'+
'<h2><b style="text-indent: 40px">Info:</b></h2>'+
'<div id="bodyContent">'+ 
'<div style="width:220px;display:inline-block;">'+
'<p style="text-indent: 1em">Name: '+ this.name + '</p>' +
'<p style="text-indent: 1em">Last name: '+ this.last+ '</p>' +
'</div>'; 
```

请注意，我跳过了`&nbsp;`并将它们替换为样式属性。不过，您确实应该将这些样式放在样式表中。

```
$("#button").on('click', function() {
 $('#something').html(contentString);
}); 
```

请记住，当按钮上的单击事件触发时，不会计算 contentString 中的变量，这意味着 this.name 和 this.last 不会改变。您是否还需要在点击时更新这些值？

# proxy - mod_rewrite 代理 URL 缺少图像/css

> ID：11334292
> 
> 赞同：0
> 
> 时间：2012-07-04T19:05:11.067
> 
> 标签：proxy, rewrite, proxypass, mod-rewrite

我有以下 mod_rewrite 使用代理标志从一个 URL 文件夹重定向到另一个站点子域，如下所示：

.htaccess 文件放置在[http://www.domain.com/test/](http://www.domain.com/test/)文件夹中：

```
RewriteEngine on
RewriteRule ^($|/.*) http://subsite.site.com/$1 [L,P] 
```

问题、图像、CSS 和链接没有正确显示。链接似乎指向：http://www。域 .com/linkname.html

我试过做 RewriteBase /test/ 和 / 没有运气，但想不出任何其他方法来做到这一点。

我在上面的代码中缺少什么以使其与目标 URL 的相对路径一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:12:31.850

哦，你想改变内部内容？

Mod_rewrite 只更改标题，而不是内容，您肯定需要其他类似 mod_proxy_html 的东西。但是，通过使所有路径合法地相对，通常可以完全避免仅仅为了更改 url 而重写内容（假设您可以控制您的内容）。在这种情况下，内容中的所有路径都应该是：`linkname.html`或`some_path_from_here/linkname.html`而不是`/linkname.html`或`some_path_from_here/linkname.html`

# php - 比较从数据库返回的值与 json 返回的值

> ID：11334294
> 
> 赞同：1
> 
> 时间：2012-07-04T19:05:24.123
> 
> 标签：php, mysql, database, json

所以我有一个包含一千多个网址的数据库。我正在运行一个应用程序，您可以使用它向数据库添加更多值。

应用程序中有一个表单，您可以使用它向数据库添加更多值。一旦您提交表单，它将表单值转换为 json，然后它对这些值执行一些功能，最终它们应该最终存储在数据库中。

现在为了节省空间，我不希望数据库中有任何重复项。有没有一种快速的方法来比较由 from 返回的 json 中的每个值与数据库的 url_column 中的每个值。

注意：您可以在表单中输入多个网址。平均每次提交表单时，它都会返回 10 个以 json 编码的 url。我正在使用 php。但我不在乎语言，只是在寻找有效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:24:45.753

您可以使 url_column 在数据库中唯一，因此任何插入的重复值都将被拒绝

# actionscript-3 - 库中swf的访问时间线

> ID：11334295
> 
> 赞同：0
> 
> 时间：2012-07-04T19:05:28.280
> 
> 标签：actionscript-3, flash, animation, timeline

在谷歌上，我对此有不同的看法：是否可以在我的库中访问 sfw（使用 goto）的时间线，还是我真的必须在运行时加载它？如果是，我该怎么做？我正在使用 flash cs5 和 ActionScript3。

# google-apps-script - 如何获得正确的范围以将值设置为单元格？

> ID：11334296
> 
> 赞同：148
> 
> 时间：2012-07-04T19:05:28.993
> 
> 标签：google-apps-script, google-sheets

我想通过脚本在 Google Sheet 中设置文本或数字。

我想在单元格中设置`Hello`或编号。到目前为止，我发现了这段代码： `9``F2`

```
SpreadsheetApp.getActiveRange().setValue('hello'); 
```

但这并没有指定哪个单元格。

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2012-07-04T19:27:26.937

以下代码执行所需的操作

```
function doTest() {
  SpreadsheetApp.getActiveSheet().getRange('F2').setValue('Hello');
} 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-03-12T23:35:38.253

使用类的[`setValue`](https://developers.google.com/apps-script/reference/spreadsheet/range#setvaluevalue)方法[`Range`](https://developers.google.com/apps-script/reference/spreadsheet/range)来设置特定单元格的值。

```
function storeValue() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  // ss is now the spreadsheet the script is associated with
  var sheet = ss.getSheets()[0]; // sheets are counted starting from 0
  // sheet is the first worksheet in the spreadsheet
  var cell = sheet.getRange("B2"); 
  cell.setValue(100);
} 
```

您还可以使用行号和列号选择单元格。

```
var cell = sheet.getRange(2, 3); // here cell is C2 
```

也可以一次设置多个单元格的值。

```
var values = [
  ["2.000", "1,000,000", "$2.99"]
];

var range = sheet.getRange("B2:D2");
range.setValues(values); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-12-20T08:06:20.073

**解决方案 ：** `SpreadsheetApp.getActiveSheet().getRange('F2').setValue('hello')`

**解释 ：**

*在电子表格中附加脚本的单元格中设置值*

```
SpreadsheetApp.getActiveSpreadsheet().getSheetByName(SHEET_NAME).getRange(RANGE).setValue(VALUE); 
```

*在当前打开且附加脚本的工作表中的单元格中设置值*

```
SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getRange(RANGE).setValue(VALUE); 
```

*在未附加脚本的某些电子表格的单元格中设置值（已知目标表名称）*

```
SpreadsheetApp.openById(SHEET_ID).getSheetByName(SHEET_NAME).getRange(RANGE).setValue(VALUE); 
```

*在未附加脚本的某些电子表格的单元格中设置值（目标表位置已知）*

```
SpreadsheetApp.openById(SHEET_ID).getSheets()[POSITION].getRange(RANGE).setValue(VALUE); 
```

*这些是常量，您必须自己定义它们*

```
SHEET_ID

SHEET_NAME

POSITION

VALUE

RANGE 
```

通过附加到工作表的脚本，我的意思是脚本驻留在该工作表的脚本编辑器中。未附加意味着不驻留在该工作表的脚本编辑器中。它可以在任何其他地方。

# wpf - 在数据绑定流文档中插入分隔符（空白行）

> ID：11334297
> 
> 赞同：2
> 
> 时间：2012-07-04T19:05:33.017
> 
> 标签：wpf, data-binding, mvvm, flowdocument

在我的 MVVM WPF 应用程序中，我使用的是数据绑定流文档。我使用[此处](http://msdn.microsoft.com/en-us/magazine/dd569761.aspx)描述的技术能够将我的数据绑定到流文档。我的流文档绑定到我的视图模型中的公共属性。该属性是自定义类型的可枚举，如下所示：

```
public IEnumerable<Person> Persons
{
    get { return _persons; }
    set { _persons = value; }
} 
```

流文档显示在 FlowDocumentScrollViewer 控件中。该文档如下所示：

```
code    name    lastname
----    -----   ---------
1       john    johnson
1       peter   peterson
2       jane    jane
3       john    doe 
```

绑定工作正常，但是我想在每个不同的代码之后添加一个空行：

```
code    name    lastname
----    -----   ---------
1       john    johnson
1       peter   peterson

2       jane    jane

3       john    doe 
```

我在视图中的 Xaml 是：

```
<FlowDocumentScrollViewer>
  <FlowDocument>
    <flowdoc:ItemsContent ItemsSource="{Binding Path=Persons}">
      <flowdoc:ItemsContent.ItemsPanel>
        <DataTemplate>
          <flowdoc:Fragment>
            <Table BorderThickness="1" BorderBrush="Black">
              <TableRowGroup flowdoc:Attached.IsItemsHost="True">
                <TableRow Background="LightBlue">
                  <TableCell>
                   <Paragraph>ronde</Paragraph>
              </TableCell>
              <TableCell>
                <Paragraph>hal</Paragraph>
              </TableCell>
              <TableCell>
                <Paragraph>datum</Paragraph>
              </TableCell>
            </TableRow>
          </TableRowGroup>
        </Table>
      </flowdoc:Fragment>
    </DataTemplate>
  </flowdoc:ItemsContent.ItemsPanel>
  <flowdoc:ItemsContent.ItemTemplate>
    <DataTemplate>
      <flowdoc:Fragment>
        <TableRow>
          <TableCell>
            <Paragraph>
              <flowdoc:BindableRun BoundText="{Binding Path=Code}" />
            </Paragraph>
          </TableCell>
          <TableCell>
            <Paragraph>
              <flowdoc:BindableRun BoundText="{Binding Path=Name}" />
            </Paragraph>
          </TableCell>
          <TableCell>
            <Paragraph>
              <flowdoc:BindableRun BoundText="{Binding Path=LastName}" />
            </Paragraph>
          </TableCell>
        </TableRow>
      </flowdoc:Fragment>
    </DataTemplate>
  </flowdoc:ItemsContent.ItemTemplate>
</flowdoc:ItemsContent> 
```

关于如何在不违反 MVVM 规则的情况下执行此操作的任何建议？似乎对流文档进行数据绑定的代价是布局不灵活。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:12:13.513

为了对您的数据进行分组，请使用`CollectionViewSource`这样的：

```
<Window.Resources>
    <CollectionViewSource x:Key="groupView" Source="{Binding Path=Persons}">
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="Code"/>
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>
</Window.Resources>
<Grid>
    <FlowDocumentScrollViewer>
        <FlowDocument>
            <flowdoc:ItemsContent ItemsSource="{Binding Source={StaticResource groupView}}">
               ....
            </flowdoc:ItemsContent>
        </FlowDocument>
    </FlowDocumentScrollViewer>
</Grid> 
```

上面的`CollectionViewSource`元素`Persons`按代码对列表进行排序并确定组。

此外，您必须调整`ItemsContent`类，因为 MSDN 文章中的类还不支持分组。这是一个非常简单的示例，您可以如何实现这一目标：

```
private void GenerateContent(DataTemplate itemsPanel, DataTemplate itemTemplate, IEnumerable itemsSource)
{
    Blocks.Clear();
    if (itemTemplate != null && itemsSource != null)
    {
        FrameworkContentElement panel = null;

        if (panel == null)
        {
            if (itemsPanel == null)
            {
                panel = this;
            }
            else
            {
                FrameworkContentElement p = Helpers.LoadDataTemplate(itemsPanel);
                if (!(p is Block))
                {
                    throw new Exception("ItemsPanel must be a block element");
                }
                Blocks.Add((Block)p);
                panel = Attached.GetItemsHost(p);
                if (panel == null)
                {
                    throw new Exception("ItemsHost not found. Did you forget to specify Attached.IsItemsHost?");
                }
            }
        }

        // *** START NEW CODE ***
        ICollectionView view = itemsSource as ICollectionView;
        if (view != null)
        {
            foreach (object group in view.Groups)
            {
                GenerateContentForUngroupedItems(itemsPanel, itemTemplate, ((CollectionViewGroup)group).Items, panel);
                if (panel is TableRowGroup)
                {
                    TableRow row = new TableRow();
                    row.Cells.Add(new TableCell());
                    ((TableRowGroup)panel).Rows.Add(row);
                }
            }
        }
        else
        {
            GenerateContentForUngroupedItems(itemsPanel, itemTemplate, itemsSource, panel);
        }
        // *** END NEW CODE ***
    }
}

private void GenerateContentForUngroupedItems(DataTemplate itemsPanel, DataTemplate itemTemplate,
                                                IEnumerable itemsSource, FrameworkContentElement panel)
{
    foreach (object data in itemsSource)
    {
        FrameworkContentElement element = Helpers.LoadDataTemplate(itemTemplate);
        element.DataContext = data;
        Helpers.UnFixupDataContext(element);
        if (panel is Section)
        {
            ((Section) panel).Blocks.Add(Helpers.ConvertToBlock(data, element));
        }
        else if (panel is TableRowGroup)
        {
            ((TableRowGroup) panel).Rows.Add((TableRow) element);
        }
        else
        {
            throw new Exception(String.Format("Don't know how to add an instance of {0} to an instance of {1}",
                element.GetType(), panel.GetType()));
        }
    }
} 
```

上面的大部分代码来自原始 MSDN 文章；我所做的唯一更改是：

*   将`foreach`循环移至新方法`GenerateContentForUngroupedItems`。
*   将面板创建代码 (" `if (panel==null)`") 移到循环之外。
*   添加了标记的代码`NEW CODE`。

修改后的代码的作用是：如果项目源不是集合视图，它的工作方式与原始 MSDN 代码完全相同。如果项目源是集合视图，则调用两个嵌套循环：

*   外部循环遍历所有组。
*   内部循环遍历当前组中的所有项目。

内部循环实际上与 MSDN 文章中的原始 foreach 循环相同。

在上面添加的代码中，空表行由以下几行添加：

```
TableRow row = new TableRow();
row.Cells.Add(new TableCell());
((TableRowGroup)panel).Rows.Add(row); 
```

当然，这段代码不是很通用。对于通用解决方案，向`ItemsContent`包含数据模板的控件添加新的依赖属性，就像`ItemsPanel`or`ItemTemplate`属性一样。然后，您可以在组的末尾插入任意文本。

结果如下所示：

![分组流文档](../Images/81bf71a8fafeb7048b5edf5260d15121.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:01:54.370

你需要的是分组。它符合 MVVM 规则。

话虽如此，用于对流文档进行分组的快速 google 并没有立即向我显示任何内容。也许看看 flowdocument wpf 分组。

一种解决方案可能是使用数据网格。您绝对可以使用 mvvm 对其进行分组，并使其看起来像您上面描述的布局。

# api - 推特查询

> ID：11334302
> 
> 赞同：0
> 
> 时间：2012-07-04T19:06:06.313
> 
> 标签：api, twitter

我正在尝试为 Twitter 的搜索 API 编写一个 URL。

该页面说您可以搜索爱或恨：

[https://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

```
love OR hate    containing either "love" or "hate" (or both) 
```

但我没有看到这样做的方法。

它应该相当简单：

```
http://search.twitter.com/search.json?q=%40twitterapi 
```

是搜索 twitterapi 的 URL 示例。但是我将如何搜索两个词？在这种情况下 OR 的操作数是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:27:35.500

没关系，似乎 %20OR%20 在这种情况下有效。

# asp.net-mvc - 测试移动网站？

> ID：11334313
> 
> 赞同：1
> 
> 时间：2012-07-04T19:06:47.110
> 
> 标签：asp.net-mvc, media-queries

我有一个 ASP.NET MVC 网站，在大多数桌面浏览器中运行良好，现在我需要为移动设备制作一个版本，我的想法是为此使用 CSS 媒体查询，但我不知道如何在开发过程中测试页面? 有没有可以像移动浏览器一样使用的桌面应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:10:14.127

你可以试试

```
if (Request.Browser.IsMobileDevice == true)
    {
        ....
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:13:11.097

要测试您的网站，您可以使用 Chrome，其中包含一个不错的功能。您可以更改用户代理，然后模拟 Ipad、Iphone 或任何智能手机的分辨率。

测试响应式设计和东西非常有用:)

好吧，另外，要小心它只是“模拟”，它永远不会取代一些真实的测试，但它对概念和预生产过程很有帮助！

以下是有关 chrome 更改用户代理功能的链接：http: [//googlesystem.blogspot.fr/2011/12/chang-user-agent-new-google-chrome.html](http://googlesystem.blogspot.fr/2011/12/changing-user-agent-new-google-chrome.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:38:11.060

我建议 3 个工具可以帮助您：

1.  Adobe Shadow [http://labs.adobe.com/technologies/shadow](http://labs.adobe.com/technologies/shadow)：它可以让您通过 Adob​​e Shadow 应用程序将您在桌面浏览器上查看的网站同步到您的手机，您可以在手机上使用 Chrome 的开发工具通过这种方法建站。
2.  在 Android 上使用 Chrome 进行远程调试[https://developers.google.com/chrome/mobile/docs/debugging](https://developers.google.com/chrome/mobile/docs/debugging)：像 Adob​​e Shadow 一样，您可以通过 chrome 开发工具调试和测试您的网站。但是，您需要一部在 ICS 上运行的 Android 手机。
3.  最后，如果您有 Xcode - 您可以使用 iPhone 模拟器查看您的网站。它非常准确，您不会像前两个那样获得实时调试，但您可以在每次更新后即时测试您的站点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:43:44.387

如果您只想测试在某些视口宽度上触发的媒体查询，只需减小浏览器的宽度即可。您可以观察 UI 的变化，因为不同的媒体查询触发。

您还可以使用浏览器插件来定义和设置视口分辨率。我对 Chrome 使用“调整窗口大小”。

那里有一个 Android 模拟器，您可以下载并在桌面上运行，但这主要用于测试设备特定的功能。

归根结底，测试移动网站的最佳方法是在您定位的设备上。

# meteor - 无法让公用文件夹在流星 0.3.7 中工作

> ID：11334317
> 
> 赞同：6
> 
> 时间：2012-07-04T19:07:13.370
> 
> 标签：meteor

所有，几周前我在[Meteor 的 GitHub 页面](https://github.com/meteor/meteor/issues/196)上发布了这个问题，但没有得到答复。这个问题看起来很简单，也许没有人能相信我。

以下是重现该问题的步骤。我创建了一个名为“foo”的全新香草流星项目，使用：

```
meteor create foo 
```

我在其中创建了一个“公共”文件夹并在其中复制了一张图片（troll.jpg）。

然后我**专门**编辑了 foo.html来显示图片。我从流星的示例中看到，与公共文件夹中的内容对应的 URL 只是 / 。

```
<head>
  <title>foo</title>
</head>

<body>
  <img src="/troll.jpg">
</body> 
```

我删除了我不使用的 foo.js 和 foo.css。

然后我启动流星，页面只显示一个损坏的图像占位符。Web 浏览器的控制台（MacOS 的 Chrome 20.0.1132.47）说：

```
Resource interpreted as Image but transferred with MIME type text/html: "http://localhost:3000/troll.jpg". innerhtml.js:80
_htmlToFragment innerhtml.js:80
Meteor.ui.render liveui.js:33
(anonymous function) template.foo.js:1
ready startup_client.js:9 
```

使用 Safari 我得到了同样的结果。Meteor 在 GitHub 上的示例似乎可以正常工作。我究竟做错了什么？谢谢。

G。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:03:47.517

我遇到了一个类似的问题，我认为它将字体文件作为 text/html mime-type 提供，但结果发现我的字体文件的路径是错误的。修复路线解决了问题。

这很令人困惑，因为服务器应该返回 404 错误而不是 200 OK，但它现在可以工作了。

# php - 在 Apache 服务器上使用 WebSocket

> ID：11334320
> 
> 赞同：39
> 
> 时间：2012-07-04T19:07:36.323
> 
> 标签：php, html, apache, websocket, phpwebsocket

由于围绕 WebSockets 的所有嗡嗡声，很难找到关于如何在 Google 上将它们与 Apache 服务器一起使用的好的演练。

我们正在用 PHP (symfony2) 开发一个插件，它会不时运行一种聊天实例。我们发现在这方面 WebSockets 比 AJAX 更有趣、更标准、更快捷。问题是，我们组中没有太多的系统管理员资源，我们发现很难收集有关以下事项的良好信息：

*   我们可以在传统的 Apache 专用服务器上运行 WebSocket 实例吗？如果可以，您是否有对我们有用的链接？
*   如果我们需要修改服务器，你会推荐什么样的工具，因为我们在系统管理员方面不太熟练，所以我们负担不起在这方面的高维护 b***。

非常感谢你，

ps：我们将链接回您的博客/网站，因为我们将在我们的开发博客上发布有关我们应用程序这一部分的技术/信息帖子。

再次感谢你！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T15:22:42.470

正如@zaf 所说，您更有可能找到一个独立的 PHP 解决方案——而不是在 Apache 中运行的东西。也就是说有一个[apache WebSocket 模块](https://github.com/disconnect/apache-websocket)。

然而，根本问题是 Apache 在构建时并没有考虑到维护许多持久连接。它与 PHP 一起建立在发出请求并快速发回响应的理念之上。这意味着如果您保持请求处于打开状态并且您将需要非常快速地研究水平扩展，资源可能会很快用完。

我个人认为你有两个选择：

1.  使用替代的实时 Web 技术解决方案，并使用队列或短期请求（Web 服务）在您的 Web 应用程序和实时 Web 基础架构之间进行通信。
2.  将持久连接的处理和实时 Web 基础设施的扩展卸载到实时 Web 托管服务。我为[Pusher](http://pusher.com)工作，我们属于这一类。

对于自托管和托管选项，您可以查看我的[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-04T19:19:52.073

一种方法是使用独立安装的 Web 套接字服务器。

对于 PHP，您可以尝试： [http](http://code.google.com/p/phpwebsocket/) ://code.google.com/p/phpwebsocket/或[http://github.com/Devristo/phpws/](http://github.com/Devristo/phpws/)

您也可以尝试其他一些项目。

基本上，您需要上传、解包并开始运行该过程。

在前端，您将使用 javascript 连接到特定端口上的服务器。

大多数 websocket 服务器都有一个演示，它会回显它听到的任何内容，因此这是编写一些测试代码的好地方。你甚至可以找到一个基本的聊天实现。

棘手的部分是监视 Web 套接字服务器并确保它平稳连续地运行。

尝试在尽可能多的浏览器/设备上进行测试，因为这将决定您选择哪个 websocket 服务器实现。您必须注意新旧协议。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-11T12:59:38.687

我介绍了另一个 websocket 服务器：PHP [Ratchet](http://socketo.me) ( [Github](https://github.com/ratchetphp) )。

这是客户端和服务器端代码和浏览器支持的更好和完整的列表。

请检查此[链接](https://stackoverflow.com/a/2700609/1567114)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-09-24T20:42:55.583

另一种途径是使用专用的 websocket 服务器。

在 www.achex.ca[**上**](http://www.achex.ca)试用**Achex Websocket Server**并查看教程。[](http://www.achex.ca)

 **或者

如果您真的想要 Apache，请查看**Apache Camel**。（但你必须设置它，它比 achex 服务器复杂一点） [http://camel.apache.org/websocket.html](http://camel.apache.org/websocket.html)**

# c - 二维数组中的输入

> ID：11334325
> 
> 赞同：0
> 
> 时间：2012-07-04T19:08:13.857
> 
> 标签：c, arrays, multidimensional-array

我试图解决关于二维矩阵的问题，但不幸的是矩阵输入给出了错误。这是代码：

```
int arr[4][4];
int r, c;
scanf("%d", &r);
scanf("%d", &c);
int i, j;
fflush(stdin);
for(i = 0; i < r; i++)
    for(j = 0; j < c; j++)
        scanf("%d", &arr[i][j]); 
```

当我运行它时，它需要额外的输入。
例如： if `r = 2`and `c = 2`> then 它需要 6 个输入然后挂起。该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:17:43.240

我已经复制了您的代码并尝试执行它，我观察到如果我们使**r**和**c**大于它们的限制，它会显示您告诉的行为。所以使用适当的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:11:04.843

如果 r=2 和 c=2，它将执行前 2 个 scanf，然后执行 2D 循环的 2x2 scanf。

这使得 2 + 2x2 = 6。

在最后一个 scanf 之后，如果你的程序完成了，它就会简单地关闭，这很正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:29:10.237

我认为您的代码的问题在于您为数组分配了固定数量的空间，但允许用户通过将循环的边界设为用户提供的变量`r`和`c`变量来提供任意数量的输入。因此，如果用户提供`r=6`and `c=6`，在某些时候您的循环将尝试取消引用`arr[5][5]`，这是无效的，因为您已经定义了`int arr[4][4];`. 如果您希望允许用户创建任意数量的行和列，您应该`arr`使用用户提供的输入进行初始化，如下所示：

```
int r,c;
scanf("%d",&r);
scanf("%d",&c);
int arr[r][c]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-11T06:28:01.080

在您的代码中，您只需运行一个循环，将扫描多少值取决于已执行的循环数。假设你取 r=1,c=1。在这种情况下，对于每个“r”值 c 将执行一次。因此，当您的值将大于数组大小时，它会给您带来异常行为。

如果您首先输入“c”的值，然后输入“r”，它将正常运行。

```
int r, c;
scanf("%d", &r);
scanf("%d", &c);
int arr[r][c]; 
```

# ios - 如何将 [[ivar retain] autorelease] 转换为 ARC？

> ID：11334327
> 
> 赞同：1
> 
> 时间：2012-07-04T19:08:18.193
> 
> 标签：ios, automatic-ref-counting, retain, autorelease

如何将以下代码转换为 ARC？

```
- (NSString *) shardId {
  return [[__shardId retain] autorelease];
} 
```

以下为我编译，但不确定是否存在任何潜在问题。

```
- (NSString *) shardId {
  return __shardId;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T19:10:26.810

该代码是正确的——ARC 将为您处理正确的内存管理。

# css - CSS : p tag : cannot bold or text-size

> ID：11334332
> 
> 赞同：0
> 
> 时间：2012-07-04T19:09:14.893
> 
> 标签：css, html, tags

I create a CSS for a p tag. I don't know why `font:bold` and `font-size=15` doesn't work. It means : font in this class doesn't bold and doesn't change size although I change number of `font-size` property. But some other attributes work well, for example : `color` or `text-decoration`

Here is short piece of my HTML5 page :

1) CSS Page

```
<style>
    .title{
        font: bold;
        font-size: 15;
        color: red;
        text-decoration: underline ;
    }
</style> 
```

2) HTML Page:

```
<div class="question">
     <p class="title">
         Here is my title
     </p>
</div> 
```

Please help me.

Thanks :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:11:29.367

It's `font-weight` and you need to specify a unit for size. Try:

```
font-weight: bold;
font-size: 15px; 
```

**[jsFiddle example](http://jsfiddle.net/j08691/hLHML/)**

* * *

## Font Size:

**xx-small, x-small, small, medium, large, x-large, xx-large**

A set of absolute size keywords based on the user's default font size (which is medium). Similar to presentational HTML's through where the user's default font size is .

**larger, smaller**

Larger or smaller than the parent element's font size, by roughly the ratio used to separate the absolute size keywords above.

**length**

A positive length. When the units are specified in em or ex, the size is defined relative to the size of the font on the parent element of the element in question. For example, 0.5em is half the font size of the parent of the current element.

**percentage**

A positive percentage of the parent element's font size. It is best to avoid using values that are not relative to the user's default font size, such as lengths with units other than em or ex. However, if such values must be used, px are preferred over other units because their meaning does not vary depending on what the operating system thinks (generally incorrectly) the resolution of the monitor is.

## Font Weight:

**normal**

Normal font weight. Same as 400.

**bold**

Bold font weight. Same as 700.

**lighter**

One font weight lighter than the parent element (among the available weights of the font).

**bolder**

One font weight darker than the parent element (among the available weights of the font).

**100, 200, 300, 400, 500, 600, 700, 800, 900**

Numeric font weights for fonts that provide more than just normal and bold. If the exact weight given is unavailable, then 600-900 use the closest available darker weight (or, if there is none, the closest available lighter weight), and 100-500 use the closest available lighter weight (or, if there is none, the closest available darker weight). This means that for fonts that provide only normal and bold, 100-500 are normal, and 600-900 are bold.

Source: [https://developer.mozilla.org/en/CSS/font-size](https://developer.mozilla.org/en/CSS/font-size) and [https://developer.mozilla.org/en/CSS/font-weight](https://developer.mozilla.org/en/CSS/font-weight)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:12:08.697

The property you are looking for is `font-weight` and you text size must have a unit (`em`, `px`, `pt`):

```
font-weight: bold;
text-size: 1.2em; /* em is the preferred unit */ 
```

# javascript - 有什么方法可以用 AngularJS 编写注释，以便在查看源代码时不可见

> ID：11334335
> 
> 赞同：22
> 
> 时间：2012-07-04T19:09:25.573
> 
> 标签：javascript, comments, angularjs

在编写 JSP 时，我总是使用`<%-- --%>`而不是`<!-- -->`写任何注释，因为它不会输出到 HTML。我已经开始使用[AngularJS](http://angularjs.org/)，我想知道是否有任何类似的评论结构可以使用。在 HTML 源代码中不显示注释并不是绝对必要的，但我更希望它们不存在。

由于我对 AngularJS 的了解有限，我不确定他们如何防止它出现在源代码中，但我只是想问问有没有办法。也许AngularJS中的评论也有最佳实践？任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T19:15:25.180

AngularJS 是一个用于 HTML/JS/CSS 页面中的动态特性的库。它不是 JavaServer Pages 之类的模板语言。因此，它没有特殊的注释语法。当然，您仍然可以使用 HTML 样式的注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-31T17:07:09.560

您应该使用预部署处理工具，例如 grunt uglify。它将允许您去除注释并进行更有用的部署预处理，例如缩小代码。

[咕噜咕噜](https://github.com/gruntjs/grunt-contrib-uglify)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-18T03:22:12.140

使用指令：

```
myApp.directive('comment', ['$rootScope', function($rootScope) {

    return {
        restrict: 'AEC',
        link: function($scope, element, attrs){
            $(element).remove();
        }
    };
}]); 
```

例子：

```
<comment>Remove me</comment> 
```

# ruby-on-rails-3.1 - 如何在像主页这样的静态页面上呈现作为用户控制器一部分的视图？

> ID：11334338
> 
> 赞同：0
> 
> 时间：2012-07-04T19:09:54.773
> 
> 标签：ruby-on-rails-3.1

我希望将我正在构建的应用程序的注册表单放在应用程序的主页上，但是我不知道如何在我的主页上呈现视图 app/views/users/new.html.erb。有没有一种方法可以用来实现这一点？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T23:51:34.183

您可以使用 content_for 块，然后在应用程序布局中生成它。使用您的用户/新页面创建一个部分。（用户/_new）。

在你的 homepage.html.erb 文件中添加

```
 <% content_for :homepage do %>
  <%= render users/new %>
 <% end %> 
```

然后在你的 application.html.erb 文件中添加

```
 <%= yield :homepage %> 
```

# ios - OpenGLES2 iOS顶点数组对象导致drawElements访问错误

> ID：11334341
> 
> 赞同：4
> 
> 时间：2012-07-04T19:10:22.857
> 
> 标签：ios, opengl-es, 3d, opengl-es-2.0

今天下午，当我从使用 VBO 转移到 VAO / VBO 时，我一直在努力说服我的 openGLES2.0 代码正确执行。基本上，我正在努力通过苹果关于 openGLES 的“专家”建议，并转向使用顶点数组对象是最重要的......

我在[这里](https://stackoverflow.com/questions/6240863/use-of-vao-around-vbo-in-open-es-iphone-app-causes-exc-bad-access-when-call-to-g?rq=1)查看了类似的问题和回复，但这似乎对我没有帮助，除了再次向我保证其他人遇到类似的问题:(

我的场景是我有大约 500 个矩形纹理在屏幕上移动。没有 VAO，代码一切正常，但是当我定义 USE_VAO（我的常量）时，它在第一次绘制元素调用时崩溃。我显然没有正确理解 VAO ......但我看不到我的方式的错误！

setupBeforeRender 方法在进入渲染循环之前作为我设置的最后一部分被调用。

```
-(void) setupBeforeRender {

glClearColor(0.6, 0.6, 0.6, 1);
glViewport(0, 0, self.frame.size.width, self.frame.size.height);
glEnable(GL_DEPTH_TEST);

glUniform1i(_textureUniform, 0);
glActiveTexture(GL_TEXTURE0); 

glEnableVertexAttribArray(_positionSlot);
glEnableVertexAttribArray(_colorSlot);
glEnableVertexAttribArray(_texCoordSlot);

glGenBuffers(1, &_indexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

} 
```

这是渲染方法

```
- (void)render:(CADisplayLink*)displayLink {

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Model view matrix and projection code removed for clarity

GLsizei stride = sizeof(Vertex);
const GLvoid* colourOffset = (GLvoid *) sizeof(float[3]);
const GLvoid* textureOffset = (GLvoid *) sizeof(float[7]);

 for (my objectToDraw in objectToDrawArray)
 {

    if (objectToDraw.vertexBufferObject == 0)
    {

        #ifdef USE_VAO

        glGenVertexArraysOES(1,&_vao);
        glBindVertexArrayOES(_vao);

        glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, stride, 0);
        glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, stride, colourOffset);
        glVertexAttribPointer(_texCoordSlot, 2, GL_FLOAT, GL_FALSE,stride, textureOffset);    

        objectToDraw.vertexBufferObject = [objectToDraw createAndBindVBO];
        objectToDraw.vertexArrayObject = _vao;
        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glBindVertexArrayOES(0);

        #else

        objectToDraw.vertexBufferObject = [objectToDraw createAndBindVBO];

        #endif
    }

   // Texture binding removed for clarity     

    #ifdef USE_VAO

    // This code crashes with EXC_BAD_ACCESS on the glDrawElements  

    glBindVertexArrayOES(objectToDraw.vertexArrayObject);
    glDrawElements(GL_TRIANGLES, sizeof(Indices) / sizeof(Indices[0]), GL_UNSIGNED_SHORT,0);
    glBindVertexArrayOES(0);                

    #else        

    // This path works fine. So turning VAO off works :(

    glBindBuffer(GL_ARRAY_BUFFER, storyTile.vertexBufferObject);
    glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, stride, 0);
    glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, stride, colourOffset);
    glVertexAttribPointer(_texCoordSlot, 2, GL_FLOAT, GL_FALSE, stride, textureOffset);

    glDrawElements(GL_TRIANGLES, sizeof(Indices) / sizeof(Indices[0]), GL_UNSIGNED_SHORT,0);

    #endif

} // End for each object

[_context presentRenderbuffer:GL_RENDERBUFFER];

} 
```

最后，我的创建和绑定 VBO 方法如下所示；

```
-(GLuint) createAndBindVBO {

const float* rgba = CGColorGetComponents([self.colour CGColor]);

Vertex Vertices[] = {
    {{0, 1, 0}, {1, 0, 1, 1}, {0,1}},
    {{0, 0, 0}, {1, 0, 1, 1}, {0,0}},
    {{1, 1, 0}, {1, 0, 1, 1}, {1,1}},
    {{1, 0, 0}, {1, 0, 1, 1}, {1,0}}

};

// Code removed for clarity - sets up geometry and colours    

GLuint vertexBuffer;
glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

return vertexBuffer;
} 
```

我已经尝试了各种排列，并用 glGetError() 散布了代码，看看这是否有助于指出问题出现的地方。唉，除了 drawElements 调用上的 BAD_ACCESS 崩溃之外，我没有收到任何错误。

**编辑：正如建议的那样，不幸的是，这也不起作用**

```
objectToDraw.vertexBufferObject = [objectToDraw createVBO];

glGenVertexArraysOES(1,&_vao);
glBindVertexArrayOES(_vao);
glBindBuffer(GL_ARRAY_BUFFER, objectToDraw.vertexBufferObject);

glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE, stride, 0);
glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE, stride, colourOffset);
glVertexAttribPointer(_texCoordSlot, 2, GL_FLOAT, GL_FALSE,stride, textureOffset);    

objectToDraw.vertexArrayObject = _vao;
glBindVertexArrayOES(0); 
```

我必须对顶点数组对象做一些愚蠢的事情......但有人能找出问题所在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T20:09:40.610

顶点数组启用标志是 VAO 状态的一部分，因此您需要在绑定 VAO 时使用 glEnableVertexAttribArray 启用顶点属性数组。

来自：[http ://www.khronos.org/registry/gles/extensions/OES/OES_vertex_array_object.txt](http://www.khronos.org/registry/gles/extensions/OES/OES_vertex_array_object.txt)

> 生成的顶点数组对象是一个新的状态向量，包括所有状态值（在表 6.2 中列出，除了 ARRAY_BUFFER_BINDING）：
> 
> *   VERTEX_ATTRIB_ARRAY_ENABLED
> *   VERTEX_ATTRIB_ARRAY_SIZE,
> *   VERTEX_ATTRIB_ARRAY_STRIDE,
> *   VERTEX_ATTRIB_ARRAY_TYPE，
> *   VERTEX_ATTRIB_ARRAY_NORMALIZED,
> *   VERTEX_ATTRIB_ARRAY_POINTER，
> *   ELEMENT_ARRAY_BUFFER_BINDING，
> *   VERTEX_ATTRIB_ARRAY_BUFFER_BINDING。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:18:20.267

您应该在函数调用`glVertexAttribPointer`之后`glBindBuffer`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:32:24.970

我也遇到了类似的问题，不知道是什么原因造成的。

最终结果是我必须在 glDrawArrays 中放入一个 const int 顶点数。sizeof() 做得不对。

# c++ - 基本 C++ 程序，getline()/解析文件

> ID：11334342
> 
> 赞同：-1
> 
> 时间：2012-07-04T19:10:26.347
> 
> 标签：c++, file-io

我的任务是创建一个小程序来解析文本文件并从中获取必要的信息。该文件的布局是这样的

```
Tuesday*Info5051*10:00*11:00*M3039*Info5064*12:00*3:00*G1001; 
```

基本上它应该将每个字符串存储在一个结构中，以便我以后可以检索它，但我无法让我的程序工作（我有学习障碍，所以事情往往会变得困难）。到目前为止，这是我的代码。（我知道这是一个简单的程序，但我倾向于过度思考/搞砸东西。）到目前为止，我遇到的最大问题是它不会打开文件来启动。我已将文件保存到 bin->debug 以及程序的主文件夹中。我确定我使用错误的 getline 方法。

```
struct Course
{
    string _sDay;
    string _sName;
    string _sCode;
    string _iStart;
    string _iDuration;
    string _sRoom;
};

int main()
{
    ifstream fileIn;
    fileIn.open("courseLoad.txt");

    vector<Course> vCourse;
    string str="*";
    string line;

    if (!fileIn)
    {
        cout<<"A error has occured, please contact support.";
    }

    while(!fileIn.eof())
    {
        for(int i=0; i!= fileIn.eof();i++)
        {
            //file.getline(entry.part_num, 6, '-');
            getline(fileIn,line,'*');
            vCourse[i]._sDay =line;
            getline(fileIn,line,'*');
            vCourse[i]._sName =line;
            getline(fileIn,line,'*');
            vCourse[i]._sCode = line;
            getline(fileIn,line,'*');
            vCourse[i]._iStart =line;
            getline(fileIn,line,'*');
            vCourse[i]._iDuration = line;
            getline(fileIn,line,'*');
            vCourse[i]._sRoom =line;

            cout<<vCourse[i];
        }//end for
    }
--output to screen here-- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:34:36.867

这段代码有几个问题：

1) 该代码缺少 return 语句或 else 语句，以防止程序在无法打开文件的情况下继续执行：

```
if (!fileIn)
{
    cout<<"A error has occured, please contact support.";
    return -1;
} 
```

2）您的 getline 都在相同的输入流上运行。您想读一行，然后解析该行。例如：

```
// Read in a line
while (getline(fileIn,line))
{
    string item;
    std::stringstream sstr(line);

    // Read in an item
    while (getline(sstr, item, "*"))
    {
        std::cout << item << std::endl;
    }
} 
```

3) vCourse size为0，所以不能使用[]操作符；但是您可以使用 push_back 来扩大向量的大小并在向量的后面插入一个元素：

```
// Read in a line
while (getline(fileIn,line))
{
    string item;

    // Default course construction
    Course c;

    std::stringstream sstr(line);

    // Read in an item
    getline(sstr,item,'*');
    c._sDay = item;
    getline(sstr,item,'*');
    c._sName = item;
    getline(sstr,item,'*');
    c._sCode = item;
    getline(sstr,item,'*');
    c._iStart = item;
    getline(sstr,item,'*');
    c._iDuration = item;
    getline(sstr,item,'*');
    c._sRoom = item;

    // Save the course into the vector
    vCourse.push_back(c);
} 
```

您还可以在上面添加更多错误检查（以防某些元素从行中丢失）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:16:26.370

一个显而易见的直接问题是，您实际上并没有将任何`Course`结构添加到向量中，而是像分配给它们的元素一样。例如

```
 vCourse[i]._sDay =line; 
```

但是您实际上并没有`Course`在索引 i 处将结构的实例添加到向量中。这意味着您分配给一个不存在且绝不是好消息的实例。在此之前您需要的是

```
 Course newItem;             // make a new Course object instance
    vCourse.push_back(newItem); // This adds the instance to the end of the vector

    // Now assign to the members of vCourse[i];
    vCourse[i]._sDay =line;
    getline(fileIn,line,'*');
    vCourse[i]._sName =line;
    getline(fileIn,line,'*');
    vCourse[i]._sCode = line;
    getline(fileIn,line,'*');
    vCourse[i]._iStart =line;
    getline(fileIn,line,'*');
    vCourse[i]._iDuration = line;
    getline(fileIn,line,'*'); 
```

然后你可以分配给结构。

另外，如果您想这样做

```
 cout<<vCourse[i]; 
```

你需要超载`operator<<`

如果您无法打开您的文件，您需要检查您是否 1) 正确拼写了文件名，以及 2) 该文件与您的可执行文件位于同一位置。无论如何写完整的路径名可能会更安全

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:24:12.923

您也可以尝试将文件内容放入单个字符串并使用[strtok() 函数](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)。

# omnet++ - 程序无响应：OMNet++

> ID：11334344
> 
> 赞同：0
> 
> 时间：2012-07-04T19:10:27.173
> 
> 标签：omnet++

下面是 C++ 和 .ned 文件代码。我有 3 个模块 tic、tac 和 toc。我希望消息只遍历每个模块一次，但是在几个事件之后程序变得无响应？具体来说，当消息经过几次迭代后到达 toc 时！如果还有其他解决方法，请告诉我。对不起，我是新手。

```
 void Txc1::handleMessage(cMessage *msg)
    {
        counter++;
        int n= gateSize("out");
        int k = intuniform(0,gateSize("out")-1);
        cGate *arrivalGate = msg->getArrivalGate();
        cGate *depGate = msg ->getSenderGate();
        if(arrivalGate != NULL)
        {
        int gate = arrivalGate->getIndex();
        int gate_out = depGate ->getIndex();
        EV<<"Arrival Gate: "<<gate<<endl;
        EV<<"Departure Gate: "<<gate_out<<endl;
        if(n >= 2)
        {
        while(gate==k){
        k = gate_out;
        }
        }
        }
        else
        EV << "Forwarding message " << msg << " on port out[" << k << "]\n";
        send(msg, "out", k);
    }

-----.NED-------

simple Txc1
{
    gates:
        input in[];
        output out[];
}

network Tictoc1
{
    submodules:
        tic: Txc1;
        toc: Txc1;
        tac: Txc1;
    connections:
        tic.out++ --> {  delay = 100ms; } --> toc.in++;
        tic.in++ <-- {  delay = 100ms; } <-- toc.out++;
        toc.out++ --> {  delay = 100ms; } --> tac.in++;
        tac.in++ <-- {  delay = 100ms; } <-- toc.out++;
         tac.out++ --> {  delay = 100ms; } --> toc.in++;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:45:55.457

看起来 tic 和 toc 将永远相互交谈：

```
tic.out++ --> {  delay = 100ms; } --> toc.in++;
tic.in++ <-- {  delay = 100ms; } <-- toc.out++; 
```

由于 tic “out” 门向 toc “in” 门发送消息，并且 toc “out” 门向 toc “in” 门发送消息，因此它只会绕圈转。

我不明白您在模块源代码中到底要做什么。我会回到带有最新 OMNeT++ 版本的示例 TicToc 项目，并仔细查看连接如何相互通信。这更多是您想要的连接：

```
tic.out++ --> {  delay = 100ms; } --> toc.in++;
tac.in++ <-- {  delay = 100ms; } <-- toc.out++;
tac.out++ --> { delay = 100ms; } --> tic.in++; 
```

所以它是tic - toc - tac。

# shell - AppleScript：继续，不管错误

> ID：11334345
> 
> 赞同：0
> 
> 时间：2012-07-04T19:10:33.773
> 
> 标签：shell, applescript

我有以下语法的 AppleScript：

```
do shell script "something"
do shell script "something 2"
do shell script "something 3" 
```

让我们说“something 2”给了我们一个错误，并且没有被正确执行。无论“某事 2”的结果是什么，我如何让 AppleScript 继续执行“某事 3”？

希望你明白，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:23:38.870

放一个`try`方块

```
do shell script "something"
try
    do shell script "something 2"
end try
do shell script "something 3" 
```

# iphone - SQLite 选择查询中的 iPhone 内存泄漏问题

> ID：11334352
> 
> 赞同：0
> 
> 时间：2012-07-04T19:11:20.777
> 
> 标签：iphone, sqlite, memory-leaks, nsmutablearray

我正在尝试获取已保存到表格中的 Facebook 提要。从 Sqlite 表中检索数据后，我几乎没有内存泄漏。

我的代码是：-

```
-(void)viewWillAppear:(BOOL)animated
{
    [self loadFBPostsfromDB];
}

//Calling function loadFBPostsfromDB

- (void) loadFBPostsfromDB{
    //m_db = [[SQLHelper alloc] init];
    if (fbPostArray!=nil) {
        [fbPostArray release];
        fbPostArray=nil;
    }
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];
    SQLHelper *sqlHelper= [[SQLHelper alloc] init];
    NSString *dbpath = [sqlHelper getDBPath];
    [sqlHelper release];
    sqlite3_stmt *selectStmt;
    NSString *selectFBQuery=[NSString stringWithFormat:@"SELECT * from SocialFeeds where feedsSource='LondonFB'"];
    NSLog(@"%@",selectFBQuery);
    if(sqlite3_open([dbpath UTF8String], &database) == SQLITE_OK) {
        const char *sql = [selectFBQuery UTF8String];

        if(sqlite3_prepare_v2(database, sql, -1, &selectStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating select statement. '%s'",        
                      sqlite3_errmsg(database));

            self.fbPostArray=[[[NSMutableArray alloc] init] autorelease]; 

            while(sqlite3_step(selectStmt) == SQLITE_ROW)
            {
                FaceBook *fb=[[FaceBook alloc] init];
                fb.postTitle=[[[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(selectStmt, 0)] autorelease];
                fb.postdate=[[[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(selectStmt, 1)] autorelease];
                fb.link=[[[NSString alloc] initWithUTF8String:(char *)sqlite3_column_text(selectStmt, 2)] autorelease];

                [self.fbPostArray addObject:fb];
                [fb release];
            }

            sqlite3_finalize(selectStmt);
        }
    [pool drain];
} 
```

我附上仪器泄漏的屏幕截图 ![泄漏图像](../Images/c7a6d3c4fa4e640302cca2fe32bede8b.png)

# windows - 将批处理文件中带有中文字符的路径转换为短路径（8.3个字符）

> ID：11334354
> 
> 赞同：1
> 
> 时间：2012-07-04T19:11:32.947
> 
> 标签：windows, batch-file, filepath

我有一条路径，例如`C:\Program Files (x86)\My Corporation\例如路徑\測試.txt`.

我想在批处理文件中从上面的长名称中获取短名称（8.3 个字符）并将其存储，以便在我的脚本中的各个位置使用它。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:44:28.000

这似乎有效！只需将 BatchFile 替换为您的路径即可。

```
@echo off
setlocal
set BatchFile=%~f0
set BatchFileDir=%~dp0
for %%x in ("%BatchFile%") do set File83Name=%%~fsx

echo File83Name = %File83Name% 
```

# android - 访问 ListView 上的数据库值

> ID：11334357
> 
> 赞同：0
> 
> 时间：2012-07-04T19:12:00.267
> 
> 标签：android, database

我有一个这样的网页数据库：

```
import android.provider.BaseColumns;
    public interface ThreadDatabase extends BaseColumns {
    String TABLE_NAME = "Threads";
    String TITLE = "Title";
    String DESCRIPTION = "Description";
    String URL = "Url";
    String[] COLUMNS = new String[] { _ID, TITLE, DESCRIPTION, URL };
} 
```

我的 Activity 中的 Listview 带有一个 SimpleCursorAdapter，它在每一行中显示 Title 和 Descripton。

```
Cursor c = dbhelper.getDatabase();
setListAdapter(new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_2, c, new String[] {
                    ThreadDatabase.TITLE, ThreadDatabase.DESCRIPTION },
            new int[] { android.R.id.text1, android.R.id.text2, }) 
```

如何重新定义 onListItemClick 方法，以便在单击项目时打开正确的 url？

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    ???Missing part???
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:19:09.250

您需要对 SimpleCursorAdapter 的引用，因此将其初始化为一个字段。

假设你有一个字段 mAdapter，你可以像这样得到光标：

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    Cursor cursor = (Cursor) mAdapter.getItem(position);    

    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    startActivity(intent);
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:56:39.440

我假设您的活动扩展了 ListActivity。如果是这样，在 onListItemClick() 中，您需要做的就是：

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    Cursor item = (Cursor)getListAdapter().getItem(position);

    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    startActivity(intent);
} 
```

# git - git-strategy 用于主应用程序的演示版

> ID：11334361
> 
> 赞同：2
> 
> 时间：2012-07-04T19:12:10.917
> 
> 标签：git

在 git 中，我有一个 master 分支，我正在那里开发我的应用程序。除了应用程序，我还需要开发它的演示版本。

我考虑为演示创建一个单独的分支，该分支永远不会合并到主控中。主要问题是我希望开发一些对应用程序和演示都通用的功能。

解决这个问题的正确策略是什么？有没有办法在 git 中“共享”提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:15:37.477

如果您的演示版本无法使用配置定义，那么是的，您应该使用分支。

您不会将其合并到 master 中这一事实不会阻止您从 master（或其他分支）合并到您的演示中，因此您可以毫无困难地将您的新功能传播到您的演示分支中。

“共享提交”的方法是

1) 提交到 master 或专用于您的功能的分支

2) 进入您的演示分支 ( `git checkout demo`)

3）使用`git merge master`或`git merge myfeaturebranch`

合并并不意味着您的目标分支之后与源分支相同。

# c++ - 为什么如果我删除指向基类的指针会出现内存泄漏？

> ID：11334363
> 
> 赞同：4
> 
> 时间：2012-07-04T19:12:27.410
> 
> 标签：c++, memory-leaks, polymorphism

我有`base`类和继承类的`base`类：

```
class base
{
};

class derived : public base
{ 
    std::string str;
}; 
```

我需要`derived`使用指向类的指针来管理一个类`base`，但以下代码会导致内存泄漏：

```
base* ptr = new derived();
delete ptr; 
```

我要投`ptr`，还是有更好的选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T19:14:16.990

您需要基类中的虚拟析构函数，以便在运行时找到并调用派生类的析构函数。有关更多详细信息，请参阅[此问题和答案](https://stackoverflow.com/q/461203/1214731)。

# jquery-validate - 更正验证错误时的 jQuery 事件

> ID：11334365
> 
> 赞同：0
> 
> 时间：2012-07-04T19:13:03.073
> 
> 标签：jquery-validate, asp.net-mvc-4

我有触发 jQuery 验证的按钮。如果验证失败，按钮会淡出以帮助将注意力从按钮上转移到验证消息上。

```
$('#prev,#next').click(function (e)
{
    var qform = $('form');
    $.validator.unobtrusive.parse(qform);
    if (qform.valid())
    {
        // Do stuff then submit the form
    }
    else
    {
        $('#prev').fadeTo(500, 0.6);
        $('#next').fadeTo(500, 0.6);
    } 
```

那部分工作正常。

但是，一旦清除了无效条件，我想取消淡化按钮。

是否可以连接到 jQuery Validation 以获取适当的事件（无需用户单击按钮）？如何？

**更新**

根据@Darin 的回答，我使用 jquery-validation 项目打开了以下票证

[https://github.com/jzaefferer/jquery-validation/issues/459](https://github.com/jzaefferer/jquery-validation/issues/459)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:00:27.987

听起来你可能很奇怪，但 jQuery.validate 插件没有全局成功处理程序。它确实有一个成功处理程序，但这个处理程序是按字段调用的。查看[以下线程](http://forum.jquery.com/topic/suggestion-for-validate-plugin)，它允许您修改插件并添加此类处理程序。所以这是插件在修改后的样子：

```
numberOfInvalids: function () {
    /* 
    * Modification starts here...
    * Nirmal R Poudyal aka nicholasnet
    */
    if (this.objectLength(this.invalid) === 0) {
        if (this.validTrack === false) {
            if (this.settings.validHandler) {
                this.settings.validHandler();
            }
            this.validTrack = true;
        } else {
            this.validTrack = false;
        }
    }
    //End of modification 

    return this.objectLength(this.invalid);
}, 
```

现在在您的代码中订阅此事件很简单：

```
$(function () {
    $('form').data('validator').settings.validHandler = function () {
        // the form is valid => do your fade ins here
    };
}); 
```

顺便说一句，我看到您调用的`$.validator.unobtrusive.parse(qform);`方法可能会覆盖`validator`附加到表单的数据并杀死`validHandler`我们订阅的数据。在这种情况下，在调用 .parse 方法后，您可能还需要重新附加`validHandler`（我还没有测试过，但我觉得这可能是必要的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:39:39.447

我遇到了类似的问题。如果您像我一样对更改源犹豫不决，另一种选择是挂钩到 jQuery.fn.addClass 方法。jQuery Validate 使用该方法在元素成功验证时将“有效”类添加到元素中。

```
(function () {
    var originalAddClass = jQuery.fn.addClass;
    jQuery.fn.addClass = function () {        
        var result = originalAddClass.apply(this, arguments);
        if (arguments[0] == "valid") {
            // Check if form is valid, and if it is fade in buttons.
            // this contains the element validated.
        }
        return result;
    };
})(); 
```

我找到了一个更好的解决方案，但我不确定它是否适用于您的场景，因为如果不显眼的变体提供相同的选项，我现在不知道。但这就是我最终使用标准变体的方式。

```
$("#form").validate({
    unhighlight: function (element) {
        // Check if form is valid, and if it is fade in buttons.
    }
}); 
```

# python - 我怎样才能让python附加var而不改变它？

> ID：11334369
> 
> 赞同：0
> 
> 时间：2012-07-04T19:13:43.767
> 
> 标签：python, python-2.7

```
import twitter
import unicodedata
import string

def get_tweets(user):

    resultado=[]
    temp=[]
    api=twitter.Api()#   
    statuses=api.GetUserTimeline(user)
    for tweet in statuses:
        var = unicodedata.normalize('NFKD', tweet.text).encode('utf-8', 'replace')
        print var# Horóscopo when i dont append it 
        resultado.append(var)
        print resultado# Horo\xcc\x81scopo, mie\xcc\x81rcoles i get these when i append them 

get_tweets('HoroscopoDeHoy') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:51:02.170

我认为问题出在打印命令上。Print 在列表上运行字符串转换，在将它们写入标准输出之前转义任何“有趣”字符。如果您想在同一行显示每个项目，我建议您这样做：

```
for item in resultado:
   print item, 
```

这应该绕过列表上的字符串转换。

来源： http: [//docs.python.org/reference/simple_stmts.html#the-print-statement](http://docs.python.org/reference/simple_stmts.html#the-print-statement) [http://docs.python.org/reference/expressions.html#string-conversions](http://docs.python.org/reference/expressions.html#string-conversions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:37:49.450

我假设您想将 unicode 放入列表中：

```
 var = unicodedata.normalize('NFKD', tweet.text)
  resultado.append( var )
  temp.append(var.encode('utf-8', 'ignore')) 
```

# mysql - mysql根据规模聚合

> ID：11334370
> 
> 赞同：0
> 
> 时间：2012-07-04T19:13:52.783
> 
> 标签：mysql, sql, database

我需要从数据库中选择数据，这些数据将根据规模进行汇总。当我有下面的数据时，我想聚合 col1 中从一到三、从四到六等范围内的 col2 列的数据。

```
col1 |  col2
-----+----
1    |  34
2    |  43
3    |  75
4    |  23
5    |  62
6    |  33
...  |  ... 
```

结果将是这样的：

```
| SUM(col2)
+----
  152        - for values from 1 to 3
  118        - for values from 4 to 6
  ...        ... 
```

我不知道如何编写一个可以返回此数据的 SQL 选择。谢谢你的回答，对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:25:02.737

```
CREATE TABLE t (col1 integer, col2 integer);
INSERT INTO t VALUES (1,34),(2,43),(3,75),(4,23),(5,62),(6,33);

SELECT ceil(col1/3) AS grp, min(col1) AS col1_from,
       max(col1) AS col1_till, sum(col2)
  FROM t
 GROUP BY ceil(col1/3); 
```

同样在[SQL Fiddle](http://www.sqlfiddle.com/#!2/19919/1)上。

# c++ - 我们不能包含 .c 文件吗？

> ID：11334371
> 
> 赞同：5
> 
> 时间：2012-07-04T19:14:00.643
> 
> 标签：c++, c, include

今天我在那里接受了一次采访，他们问我可以包含`.c file`到源文件中吗？我说`yes`。因为几年前我在他们包含的一些项目中看到了同样的情况`.c file`。但刚才我也在尝试同样的方法。

**ABC**

```
#include<stdio.h>
void abc()
{ printf("From ABC() \n"); } 
```

**主程序**

```
#include<stdio.h>
#include "abc.c"
int main()
{   void abc();
    return 0;
} 
```

收到错误：

> ``D:\Embedded\...\abc.c :- multiple definition of 'abc'``

它哪里出错了？

我写了一个 abc.h 文件（abc.h 的主体是`{ extern void abc(void); }`），并将该文件包含在`abc.c`（注释掉`#include abc.c`）中。工作得很好。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-04T19:14:50.530

执行以下操作：

`abc.c`：

```
#include <stdio.h>
void abc()
{printf("From ABC() \n");} 
```

`main.c`：

```
#include<stdio.h>
#include "abc.c"
int main()
{   
    abc();
    return 0;
} 
```

（不需要头文件）

然后，要编译，您**只需**编译`main.c`. **不要**试图同时**编译** `abc.c`and `main.c`，因为那样你就会`abc()`定义函数两次。

您需要了解这`#include`基本上是“复制粘贴”，仅此而已。如果你告诉它`#include "abc.c"`，它只会获取 的内容`abc.c`，并将它们“粘贴”到你的`main.c`文件中。因此，使用上面的 for `main.c`，在预处理器处理它之后，你`main.c`会看起来像这样（我忽略了`#include <stdio.h>`s）：

```
#include<stdio.h>
#include <stdio.h>
void abc()
{printf("From ABC() \n");}
int main()
{   
    abc();
    return 0;
} 
```

这是一个有效的程序。

也就是说，您通常不应该这样做；您应该`.c`单独编译所有文件，然后才将它们链接在一起。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T19:17:41.403

包含 C 文件是完全有效的，只要您不尝试自己编译包含的 C 文件，然后将其与包含其他文件的 C 文件中的目标文件链接在一起。

如果这样做，您将在两个文件中定义相同的符号（通常是一个函数），这将导致您发布的错误。

如果您有多个源文件，您通常不包含它们，而是分别编译它们。然后*链接器*将目标文件合并到一个可执行文件（或库）中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T19:23:00.443

您可以包含任何扩展名的文件。

`void abc();`在你的程序中，你已经在 main() 中重新定义了。而是把声明`abc ();`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T06:34:26.627

您可以包含任何您喜欢的内容，预处理器不关心文件扩展名。将头文件命名为“.h”，将源文件命名为“.c”或“.cpp”只是一些传统。

You only have to be sure, that after compiling the whole project you don't run into linker problems (e.g. giving both "abc.c" and "main.c" to the compiler would result in multiple definitions of your function).

# c# - 使用参数在 asp 中传递 SQL 查询时出错

> ID：11334372
> 
> 赞同：-3
> 
> 时间：2012-07-04T19:14:13.980
> 
> 标签：c#, asp.net, .net, sql-server-2008-r2

我正在使用此代码，在运行代码时出现错误。

> where 子句附近的语法不正确。

这是我的 C# 代码：

```
SqlConnection con = new SqlConnection("Data Source=ANURAG-PC;Initial Catalog=dbPortal;Persist Security Info=True;User ID=yyyy;Password=xxxxx");

protected void Page_Load(object sender, EventArgs e) 
{
   if (IsPostBack == false)
   {
       string s = Request.QueryString["cat"];
       string s1 = Request.QueryString["sub"];

       SqlCommand cmd = new SqlCommand("Select * from Architect where where SubCategory1 = @sub1",con);
       cmd.Parameters.AddWithValue("@sub1", s1);

       con.Open();

       using (SqlDataReader reader = cmd.ExecuteReader())
       {
           DataTable dat = new DataTable("tab");
           dat.Load(reader);
           DataGrid1.DataSource = dat;
           DataGrid1.DataBind();
       }
    }
} 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:14:58.173

看看查询 - 你`where where`有。应该只有一个`where`：

```
SqlCommand cmd = 
    new SqlCommand("Select * from Architect where where SubCategory1=@sub1",con); 
```

应该：

```
SqlCommand cmd = 
    new SqlCommand("Select * from Architect where SubCategory1=@sub1",con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:15:22.593

你好正确删除where，你有两个where

```
SqlCommand cmd = new SqlCommand("Select * from Architect where where SubCategory1=@sub1",con);

-> SqlCommand cmd = new SqlCommand("Select * from Architect where SubCategory1=@sub1",con); 
```

# c# - SolrNet - 分面搜索错误结果

> ID：11334378
> 
> 赞同：0
> 
> 时间：2012-07-04T19:14:31.373
> 
> 标签：c#, asp.net, entity-framework, solrnet, faceted-search

我有以下课程：

```
public class Product
{
    public Product()
    {
        Categories = new List<Category>();
    }

    [SolrUniqueKey("id")]
    public int Id { get; set; }

    [SolrField("name")]
    public string Name { get; set; }

    [SolrField("cat")]
    public virtual List<Category> Categories { get; set; }        
} 
```

现在我用 100 种产品填充 solr。产品的名称基于**testitem[i]**其中**i**是产品的编号。(0-99)。

现在这同样适用于类别，它们工作正常。但是当我要求名称中的方面时，我得到以下结果：

```
<int name="testitem">100</int>
<int name="0">1</int>
<int name="1">1</int>
<int name="10">1</int>
<int name="11">1</int>
<int name="12">1</int>
<int name="13">1</int>
<int name="14">1</int>
<int name="15">1</int>
<int name="16">1</int>
etc.. 
```

如您所见，这是不对的。看起来 solr从**字符串中拆分了****数字**。奇怪的是，这不会发生在类别方面。

 **有谁知道出了什么问题/我做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:07:45.500

这很可能是因为您为`name`索引中的字段使用的 Solr 字段类型。如果您仔细查看`fieldType`schema.xml 中的定义`name`，很可能是`text_general`这些字段标记了您输入到其中的值，因此这就是将您的名称值拆分为文本和数字值的原因。在这种情况下，我建议使用单独的字段来存储分面值，并使用[Copy Field](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)指令将名称值移动到这个新字段。

所以你的架构看起来像这样......

```
 <field name="name" type="text_general" stored="true" indexed="true" />
 <field name="name_facet" type="string" stored="true" indexed="true" />

 <copyField source="name" dest="name_facet" /> 
```

然后针对 name_facet 字段运行构面查询，您应该会看到预期的结果。**

# gmaps4rails - 通过javascript向我的gmaps4rails添加标记

> ID：11334380
> 
> 赞同：0
> 
> 时间：2012-07-04T19:14:33.537
> 
> 标签：gmaps4rails

我在使用 gem gmaps4rails 时遇到了一些问题。我正在使用 javascript 和 gmaps4rails 的混合。这是我的代码示例：

```
 function handle_locations(position) {

        alert("Length = " + Gmaps.map.markers.length);
        var yourStartLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

        var marker = new google.maps.Marker({position: yourStartLatLng});
        alert("Ola 2");

        if(document.getElementById("map") != null)
          alert("diff");

        Gmaps.map.markers[0] = marker;

        alert("Ola 333");
        //var map = $document.filter('#map');
        //var map = document.getElementById("map");
        //Gmaps.map.add_marker(marker);  
    }

navigator.geolocation.getCurrentPosition(handle_locations); 
```

handle_locations 函数工作正常，我可以得到我的位置。问题是向使用 gmaps 创建的地图添加标记。如何在此功能中将我的 geolocaton 标记添加到地图中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:46:44.760

我有类似的问题，这对我有用。

```
lat = position.coords.latitude;
lng = position.coords.longitude;

Gmaps.map.callback = function() {
   Gmaps.map.createMarker({
      Lat: lat,
      Lng: lng, 
      rich_marker: null, 
      marker_picture: ""
   });
} 
```

确保仅在请求成功后才使用 position.coords.latitude/longitude `navigator.geolocation.getCurrentPosition(function(position) {` （可能你正在这样做），因为从用户那里获取位置是异步的并且需要一些时间。

您可以检查您是否有正确的纬度和经度

```
alert(lat+" "+lng); 
```

# vb.net - 无法从 VB.NET 打开特定工作表（此代码有什么问题？）

> ID：11334383
> 
> 赞同：0
> 
> 时间：2012-07-04T19:14:35.957
> 
> 标签：vb.net, excel

```
Private Sub Button11_Click()
    Dim oXL4 As New Excel.Application
    Dim oWB4 As Excel.Workbook
    Dim oSheet4 As Excel.Worksheet
If ComboBox10.Text = "abc" Then
    oWB4 = oXL4.Workbooks.Open("D:\blah\blah\Def.xlsx")
    oSheet4 = oWB4.Worksheets(2).Activate
    oXL4.Visible = True
    oXL4.UserControl = True
End If
End Sub 
```

错误/异常：

System.InvalidCastException 未处理消息=无法将“System.Boolean”类型的对象转换为“Microsoft.Office.Interop.Excel.Worksheet”类型。

这段代码有什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:47:03.157

激活不返回工作表（它是一个子表）。

```
 oSheet4 = oWB4.Worksheets(2)
  oSheet4.Activate() 
```

# html - 单词之间的文本间距不一样 标签

> ID：11334384
> 
> 赞同：2
> 
> 时间：2012-07-04T19:14:38.317
> 
> 标签：html, css

我有一个烦人的 HTML/CSS 问题。我`<p>`在它之间有一个带有文本的标签。`<p>`标签很小，基本上是iPhone屏幕的大小。现在，当显示`<p>`带有文本的标签时，一些文本之间有不需要的空格：

```
Example:

My text has    irregular spacing
It     is    kinda annoying for 
me, can anyone please assist me. 
```

注意：我确实尝试过使用

```
text-align: justify; and
word-spacing: 3px; 
```

但这无济于事谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:15:53.117

这是因为

```
text-align: justify; 
```

如果您将其更改为

```
text-align: left; 
```

然后它就会消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:45:52.330

你不能两全其美，因为这`text-align:justify;` **是**造成这种情况的原因。这是游戏的一部分。我知道当你有一个 3 个单词的句子突然在单词之间有更多的空间时可能会很烦人......但这就是让 justify..justify 的原因！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T19:17:27.607

使用 justify 只会给出你得到的结果。你有没有尝试过

```
{text-align:left;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:16:56.353

删除以下CSS：

```
text-align: justify; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T19:38:20.113

删除字间距设置。如果这还不够，请发布一个完整的示例来演示该问题。

# java - 用另一个元素在 XStream 中包装 xml 输出

> ID：11334385
> 
> 赞同：1
> 
> 时间：2012-07-04T19:14:38.383
> 
> 标签：java, xml, serialization, xstream

我有这堂课：

```
Class B {
  private String D;
  private String E;
} 
```

使用 XStream，我想生成这样的 XML，其中元素 A 和 B 在 XML 中生成，即使它们在 java 中不存在。：

```
<A>
        <B>
                <C>
                        <D/>
                        <E/>
                </C>
        </B>
</A> 
```

可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:17:47.963

您可以在 XStream 实例中实现和注册自定义转换器。例如：

```
XStream xstream = new new XStream(...);
xstream.registerConverter(new BConverter());
xstream.toXML(new B(),new BufferedWriter(...)); 
```

转换器实现示例：

```
class BConverter implements com.thoughtworks.xstream.converters.Converter{

@Override
public void marshal(Object o, HierarchicalStreamWriter writer, MarshallingContext mc) {
    B target=(B)o;
    writer.startNode("A");
    writer.startNode("B");
    writer.startNode("C");
    writer.startNode("D");
    writer.setValue(target.getD());
    writer.endNode();//end node D
    writer.startNode("E");
    writer.setValue(target.getE());
    writer.endNode();//end node E
    writer.endNode();//end node C
    writer.endNode();//end node B
    writer.endNode();//end node A
}

@Override
public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext uc) {
    //unmarshalizing logic here
}

@Override
public boolean canConvert(Class type) {
    return type.equals(B.class);
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T09:52:42.207

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

由于您正在寻找基于注释的解决方案，因此您可能对`@XmlPath`MOXy 中的扩展感兴趣。

**乙**

`@XmlPath`注释允许您将映射指定为 XPath 。

```
package forum11334385;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="A")
@XmlAccessorType(XmlAccessType.FIELD)
class B {

    @XmlPath("B/C/D/text()")
    private String D;

    @XmlPath("B/C/E/text()")
    private String E;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum11334385;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(B.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11334385/input.xml");
        B b = (B) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(b, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<A>
   <B>
      <C>
         <D>Foo</D>
         <E>Bar</E>
      </C>
   </B>
</A> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)
*   [http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html](http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html)
*   [http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html](http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html)

# asp-classic - 将 ASP 经典表单保存到 Excel 中的特定列中

> ID：11334390
> 
> 赞同：0
> 
> 时间：2012-07-04T19:15:02.720
> 
> 标签：asp-classic, vb6, vbscript, excel, vba

我想知道提交后是否可以将我的asp经典表单保存到列中的excel文件中？

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:12:52.330

use the Microsoft.Jet.OLEDB Driver to access the excel sheet like so:

```
dim conn : set conn = server.createObject("ADODB.Connection")
dim rs : set rs = server.createObject("adodb.recordset")
dim sql

conn.Open "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" &_
          "myExcelFile.xls;" &_
          "Extended Properties=""Excel 8.0;HDR=YES;""" 
```

then you yould use just sql to insert your data...

the possible connectionstrings for excel are listed [here](http://www.connectionstrings.com/excel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:02:44.033

下面的代码是插入到现有的 Excel 文件中。这就是您所需要的。

```
<%
    Option Explicit 

    ' OPEN DATABASE 
    dim objConn,strConnection,objRS,strQuery

'Set objConn = New ADODB.Connection 
    set objConn = Server.CreateObject("ADODB.Connection") 
    objConn.ConnectionString = "Provider = Microsoft.Jet.OLEDB.4.0;Data Source=" & Server.MapPath("TEST.xls") & "; Extended Properties=Excel 8.0;" 
    objConn.Open strConnection 

'Set objRS = New ADODB.Recordset
    set objRS = Server.CreateObject("ADODB.Recordset") 
    set objRS.ActiveConnection = objConn 

' This is to Select A1:A1 and open the recordset     
    strQuery = "SELECT * FROM A1:A1" 
    objRS.Open strQuery 

' This is to insert into A1:A1 a value that says: testttest     
    strQuery = "insert into [A1:A1] values('testttest')" 

' Close and destroy the Connection object. 
    objConn.Execute strQuery 
    objConn.Close
    Set objRS=Nothing
    Set objConn=Nothing
%> 
```

更新特定列

您可以这样做：请参见此处：[http](http://bytes.com/topic/asp-classic/answers/620074-update-existing-excel-file-using-asp-urgent) ://bytes.com/topic/asp-classic/answers/620074-update-existing-excel-file-using-asp-urgent 以及此处：[更新 Excel 工作表（在经典 ASP 中/Vbscript)](https://stackoverflow.com/questions/9621015/update-excel-sheet-in-classic-asp-vbscript)

# java - Java 多个子类，但类型不同

> ID：11334396
> 
> 赞同：2
> 
> 时间：2012-07-04T19:15:53.797
> 
> 标签：java, oop, inheritance, architecture

假设我有一个基类`Base`，它是子类`SubA`和`SubB`.

```
public class Base(){

    public (static?) Animation anim;

    public Base(Frame[] frames){

        CpuIntensiveAnimationCreation(frames);

        // I need only one 'instance' of Animation Per subclass.
        // Every different TYPE of subclass needs it's own Animation instance.
        // A subclass can share one Animation, among multiple subclass-instances. (static?)

    } 
```

看，我不想为我创建的子类的每个实例初始化一个新的 Animation 实例，因为这需要相当长的时间。但是，我确实需要每个子类都有自己的动画。
我当然可以为每个子类设置一个静态动画而不使用超类，但这需要大量冗余/复制代码。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:21:33.337

不要让它成为类/子类的一部分。拥有一个会容易得多

```
Map<Class<? extends Base>, Animation> 
```

创建一个动画注册表作为它自己的类，并让它包含一个类到它们的动画的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:19:28.060

我的建议是`getAnimation()`在基类中有一个抽象方法。

然后子类可以覆盖此方法以返回每个子类的静态动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T19:19:25.383

因此，您的子类中需要一个静态字段来保存您描述的动画。

现在，您不想重复代码，因此您可以将生成该动画的方法放在 Base 类的静态方法中。

这是否回答你的问题？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T19:19:32.890

怎么样`Base`：

您创建一个构造函数，它获取一个实例，`Subclass`而不是正常构造检查它是否具有动画属性，如果没有调用该函数，则为该类静态初始化它？它可以从抽象方法中继承它`Base`

这颠倒了责任并导致基类再次负责动画在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T19:22:25.330

**1** 、在Base类中创建一个**获取Animation的抽象方法，如getAnim() 。**

**2.** 让**每个子类中的动画都是静态的**，所以**一个单一子类的所有实例都将共享同一个动画实例**。所以通过这样做，每个类都会有自己的动画。

# c# - Rijndael 加密问题

> ID：11334399
> 
> 赞同：0
> 
> 时间：2012-07-04T19:16:17.120
> 
> 标签：c#, encryption, rijndael

我不知道我做错了什么，但我一直试图让这个东西工作大约 4 个小时，但我就是无法让它工作......这只是给我一个错误：“请补充一个正确的密码”当我尝试解密时。加密似乎工作正常。

有什么建议么？:<

```
using System;
using System.Text;
using System.Security.Cryptography;
using System.IO;
using System.Security;
using AesApp.Rijndael;
using System.Linq;

    internal class FileEncryption
        {
            private static string password = pw;

            internal static void Encrypt(string inputfile, string outputfile)
            {
                byte[] encryptedPassword;

                // Create a new instance of the RijndaelManaged
                // class.  This generates a new key and initialization
                // vector (IV).
                using (var algorithm = new RijndaelManaged())
                {
                    algorithm.KeySize = 256;
                    algorithm.BlockSize = 128;

                    // Encrypt the string to an array of bytes.
                    encryptedPassword = Cryptology.EncryptStringToBytes(
                        password, algorithm.Key, algorithm.IV);
                }

                string chars = encryptedPassword.Aggregate(string.Empty, (current, b) => current + b.ToString());
                Cryptology.EncryptFile(@inputfile, @outputfile, chars);
            }

            internal static void Decrypt(string @inputfile, string @outputfile)
            {
                byte[] encryptedPassword;

                // Create a new instance of the RijndaelManaged
                // class.  This generates a new key and initialization
                // vector (IV).
                using (var algorithm = new RijndaelManaged())
                {
                    algorithm.KeySize = 256;
                    algorithm.BlockSize = 128;

                    // Encrypt the string to an array of bytes.
                    encryptedPassword = Cryptology.EncryptStringToBytes(
                        password, algorithm.Key, algorithm.IV);
                }

                string chars = encryptedPassword.Aggregate(string.Empty, (current, b) => current + b.ToString());
                Cryptology.DecryptFile(@inputfile, @outputfile, chars);
            }
        } 
```

Reindael.cs

```
using System;
using System.IO;
using System.Security.Cryptography;
using System.Text;

    namespace AesApp.Rijndael
    {
        internal sealed class Cryptology
        {
            private const string Salt = "d5fg4df5sg4ds5fg45sdfg4";
            private const int SizeOfBuffer = 1024 * 8;

            internal static byte[] EncryptStringToBytes(string plainText, byte[] key, byte[] iv)
            {
                // Check arguments.
                if (plainText == null || plainText.Length <= 0)
                {
                    throw new ArgumentNullException("plainText");
                }
                if (key == null || key.Length <= 0)
                {
                    throw new ArgumentNullException("key");
                }
                if (iv == null || iv.Length <= 0)
                {
                    throw new ArgumentNullException("key");
                }

                byte[] encrypted;
                // Create an RijndaelManaged object
                // with the specified key and IV.
                using (var rijAlg = new RijndaelManaged())
                {
                    rijAlg.Key = key;
                    rijAlg.IV = iv;

                    // Create a decrytor to perform the stream transform.
                    ICryptoTransform encryptor = rijAlg.CreateEncryptor(rijAlg.Key, rijAlg.IV);

                    // Create the streams used for encryption.
                    using (var msEncrypt = new MemoryStream())
                    {
                        using (var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                        {
                            using (var swEncrypt = new StreamWriter(csEncrypt))
                            {
                                //Write all data to the stream.
                                swEncrypt.Write(plainText);
                            }
                            encrypted = msEncrypt.ToArray();
                        }
                    }
                }

                // Return the encrypted bytes from the memory stream.
                return encrypted;

            }

            internal static string DecryptStringFromBytes(byte[] cipherText, byte[] key, byte[] iv)
            {
                // Check arguments.
                if (cipherText == null || cipherText.Length <= 0)
                    throw new ArgumentNullException("cipherText");
                if (key == null || key.Length <= 0)
                    throw new ArgumentNullException("key");
                if (iv == null || iv.Length <= 0)
                    throw new ArgumentNullException("key");

                // Declare the string used to hold
                // the decrypted text.
                string plaintext;

                // Create an RijndaelManaged object
                // with the specified key and IV.
                using (var rijAlg = new RijndaelManaged())
                {
                    rijAlg.Key = key;
                    rijAlg.IV = iv;

                    // Create a decrytor to perform the stream transform.
                    ICryptoTransform decryptor = rijAlg.CreateDecryptor(rijAlg.Key, rijAlg.IV);

                    // Create the streams used for decryption.
                    using (var msDecrypt = new MemoryStream(cipherText))
                    {
                        using (var csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                        {
                            using (var srDecrypt = new StreamReader(csDecrypt))
                            {
                                // Read the decrypted bytes from the decrypting stream
                                // and place them in a string.
                                plaintext = srDecrypt.ReadToEnd();
                            }
                        }
                    }

                }
                return plaintext;
            }

            internal static void EncryptFile(string inputPath, string outputPath, string password)
            {
                var input = new FileStream(inputPath, FileMode.Open, FileAccess.Read);
                var output = new FileStream(outputPath, FileMode.OpenOrCreate, FileAccess.Write);

                // Essentially, if you want to use RijndaelManaged as AES you need to make sure that:
                // 1.The block size is set to 128 bits
                // 2.You are not using CFB mode, or if you are the feedback size is also 128 bits

                var algorithm = new RijndaelManaged { KeySize = 256, BlockSize = 128 };
                var key = new Rfc2898DeriveBytes(password, Encoding.ASCII.GetBytes(Salt));

                algorithm.Key = key.GetBytes(algorithm.KeySize / 8);
                algorithm.IV = key.GetBytes(algorithm.BlockSize / 8);

                using (var encryptedStream = new CryptoStream(output, algorithm.CreateEncryptor(), CryptoStreamMode.Write))
                {
                    CopyStream(input, encryptedStream);
                }
            }

            internal static void DecryptFile(string inputPath, string outputPath, string password)
            {
                var input = new FileStream(inputPath, FileMode.Open, FileAccess.Read);
                var output = new FileStream(outputPath, FileMode.OpenOrCreate, FileAccess.Write);

                // Essentially, if you want to use RijndaelManaged as AES you need to make sure that:
                // 1.The block size is set to 128 bits
                // 2.You are not using CFB mode, or if you are the feedback size is also 128 bits
                var algorithm = new RijndaelManaged { KeySize = 256, BlockSize = 128 };
                var key = new Rfc2898DeriveBytes(password, Encoding.ASCII.GetBytes(Salt));

                algorithm.Key = key.GetBytes(algorithm.KeySize / 8);
                algorithm.IV = key.GetBytes(algorithm.BlockSize / 8);

                try
                {
                    using (var decryptedStream = new CryptoStream(output, algorithm.CreateDecryptor(), CryptoStreamMode.Write))
                    {
                        CopyStream(input, decryptedStream);
                    }
                }
                catch (CryptographicException)
                {
                    throw new InvalidDataException("Please suppy a correct password");
                }
                catch (Exception ex)
                {
                    throw new Exception(ex.Message);
                }
            }

            private static void CopyStream(Stream input, Stream output)
            {
                using (output)
                using (input)
                {
                    byte[] buffer = new byte[SizeOfBuffer];
                    int read;
                    while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        output.Write(buffer, 0, read);
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:18:08.110

不完全确定，但我想我记得有一次连续两次调用加密会给出 2 个不同的结果。因此，您对 EncryptStringToBytes 的两次连续调用可能会给出 2 个不同的密码：一个用于加密，一个用于解密......这会导致失败。

我不确定这些加密是否必要......如果您有硬编码的密码，任何人都可以生成其他不依赖于其他内容的字符串。你应该直接使用这个密码，而不是第一次加密它：

```
 internal static void Encrypt(string inputfile, string outputfile)
 {
     Cryptology.EncryptFile(inputfile, outputfile, password);
 }

 internal static void Decrypt(string inputfile, string outputfile)
 {
     Cryptology.DecryptFile(inputfile, outputfile, password);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:22:43.477

1.  您的 Encrypt 函数似乎与您的解密函数完全相同。
2.  另外，为什么要将所有字节转换为字符串并将它们连接起来？这种转变是不可逆的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:15:16.737

```
string chars = encryptedPassword.Aggregate(string.Empty, (current, b) => current + b.ToString());
            Cryptology.EncryptFile(@inputfile, @outputfile, chars); 
```

Aggregate() 函数是原因。每次运行应用程序时它都会创建不同的值。

# google-app-engine - 在 Google App Engine 项目中基于 WEKA 加载 ARFF 的问题

> ID：11334401
> 
> 赞同：1
> 
> 时间：2012-07-04T19:16:18.543
> 
> 标签：google-app-engine, weka

我正在 Google App Engine（使用 Eclipse）中构建一个应用程序，该应用程序在其中一个部分使用 WEKA [1]。这个应用程序需要加载 ARFF 基地，但这没关系。这些基础所在的目录位于项目的根目录中。以下线路负责装载基地：

```
1\. DataSource source;
2\. source = new DataSource("bases/iris.arff");
3\. Instances trainInstances = source.getDataSet();
4\. trainInstances.setClassIndex(trainInstances.numAttributes() - 1); 
```

上面几行代码是在负责执行应用程序的 servlet 中调用的代码的一部分。Servlet 运行正常，但“源”变量无法读取 arff 文件，因此在第 3 行出现以下异常：

“java.io.IOException：未在 weka.core.converters.ArffLoader.getDataSet(ArffLoader.java:1003) 指定源”

根据[2]，

> 可以从作为应用程序的一部分上传的文件中读取，前提是该文件位于以下位置： war/WEB-INF // 在与 appengine-web.xml 中的模式匹配的位置（默认情况下包括所有内容） )

我已经遵循了这两点，但没有成功。对于第二个，我的配置如下：

```
<resource-files>
    <include path="/bases/**.arff" />
</resource-files> 
```

鉴于这段悠久的历史，我问你：有没有将“bases”目录放在某个地方，或者在 GAE xml 文件或 Eclipse 上配置一些东西，从而可以加载 ARFF 基础？

* * *

参考

[1] www.cs.waikato.ac.nz/ml/weka/

[2] [https://developers.google.com/appengine/kb/java#readfile](https://developers.google.com/appengine/kb/java#readfile)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:02:46.830

您的问题更多是关于在 Web 应用程序环境中加载资源。stackoverflow 中有关在 Web 应用程序环境中[加载资源](https://stackoverflow.com/questions/5856024/in-which-folder-is-fileinputstream-looking)的一些[附加](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream) [资源。](https://stackoverflow.com/questions/3665547/reading-property-file-from-tomcat-webapps-folder)

将您的 arff 文件放在 source-src 目录中。当你编译你的应用程序时，这个目录下的文件被复制到 web-inf/classes 目录下。

看![项目浏览器](../Images/0c54f5acc2c8634290df3fcd48673379.png)

如果你创建一个war文件，你可以看到它们被复制到哪里。看![（出口 - 战争）](../Images/81f83f20c132baafe1b2a7fc35787436.png)

在确保您的 arff 文件包含在您的 Web 存档文件（war 文件）中之后。您可以使用适当的路径。如下所示。您需要使用[InputStream 构造函数](http://weka.sourceforge.net/doc.dev/weka/core/converters/ConverterUtils.DataSource.html#ConverterUtils.DataSource%28java.io.InputStream%29)而不是字符串之一。

```
InputStream stream = getServletContext().getResourceAsStream("WEB-INF/classes/iris.arff");
DataSource source = new DataSource(stream); 
```

我已经用简单的 Web 应用程序项目尝试过这个，它可以工作。我的代码如下。

deneme.jsp

```
<%
InputStream stream = getServletContext().getResourceAsStream("WEB-INF/classes/iris.arff");
String summary = LoadArffFile.loadArffFileAndFindSummary(stream );

out.println(summary);

%> 
```

加载ArffFile.java

```
public static String loadArffFileAndFindSummary( InputStream stream)
{

     DataSource source = new  DataSource(stream);
     String summary = null;
    try {
        summary = source.getStructure().toSummaryString();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     return summary;
} 
```

在tomcat中输出。

```
Relation Name: iris Num Instances: 0 Num Attributes: 5 Name Type Nom Int Real Missing Unique Dist 1 sepallength Num 0% 0% 0% 0 / 0% 0 / 0% 0 2 sepalwidth Num 0% 0% 0% 0 / 0% 0 / 0% 0 3 petallength Num 0% 0% 0% 0 / 0% 0 / 0% 0 4 petalwidth Num 0% 0% 0% 0 / 0% 0 / 0% 0 5 class Nom 0% 0% 0% 0 / 0% 0 / 0% 0 
```

# ios - ios无法识别的选择器

> ID：11334402
> 
> 赞同：0
> 
> 时间：2012-07-04T19:16:18.507
> 
> 标签：ios, selector, sbjson

> **可能重复：**
> [-[__NSCFDictionary JSONRepresentation]：无法识别的选择器发送到实例](https://stackoverflow.com/questions/5537679/nscfdictionary-jsonrepresentation-unrecognized-selector-sent-to-instance)

我在我的两个项目中使用 SBJson ( [http://stig.github.com/json-framework/](http://stig.github.com/json-framework/) )。因此我下载了代码并将其复制到我的第一个项目中，这样我就可以做这样的事情

```
NSMutableDictionary* dict = [[NSMutableDictionary alloc] init];
[dict setValue:email  forKey:@"email"];
[dict setValue:password forKey:@"password"];
NSString* json = [dict JSONRepresentation]; 
```

现在对于我的第二个和新项目，我做了同样的事情。我将 SBJson 中的所有源文件复制到我的新项目中，并使用与上面完全相同的代码。但是现在当程序来到 NSString* json = [dict JSONRepresentation]; 我收到以下错误消息：

> -[__NSCFDictionary JSONRepresentation]：无法识别的选择器发送到实例 0x689c710

我在第二个项目中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:21:35.387

确保所有文件都已添加到目标中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:11:35.120

1.  从 iOS 5 开始，您不需要外部库来使用 JSON，[本教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)可以帮助您。

2.  该错误是因为您告诉 dict（它是 NSMutableDictionary 的一个实例）执行一个名为 JSONRepresentation 的方法。dict 不知道该怎么做。我没有使用那个库，但我猜你需要创建一个 SBJSON 解析器的实例，然后将 dict 作为参数发送。我找到[了这个](http://jasarien.com/?p=428)和[这个](http://mobiledevelopertips.com/cocoa/json-framework-for-iphone-part-2.html)教程，我希望它们可以帮助你。

# installation - Installshield 和 Redistributables

> ID：11334405
> 
> 赞同：0
> 
> 时间：2012-07-04T19:16:38.467
> 
> 标签：installation, installshield, redistributable

我有 .net 3.5 应用程序

我已经制作了基本的 MSI 安装程序，并在选项卡重建`installshield`中添加了 .net 3.5并检查了。和 。但大小相同.net 仅添加在文件夹中`Redistributables``msi``exe``ISSetupPrerequisites`

Installshield没有放入`Redistributables`.msi？

我必须将完整文件夹 (DiskImages) 发送给我的客户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-07T18:45:44.707

他们将可再分发的内容放入 MSI 是没有意义的，因为您无法在 msi 运行时启动另一个 msi。

一个好的做法是压缩 setup.exe 中的所有文件。它更容易随身携带并防止任何人用讨厌的东西替换它们并以管理员的权限启动它们。 [右键单击先决条件并打开属性](https://i.stack.imgur.com/NfpCp.png)

现在专门针对 .net 3.5，因为它是大多数现代操作系统（除了 xp 之外的任何操作系统）上的 Windows 功能，模块的安装将失败。我建议对注册表项的存在进行启动条件验证`HKLM\SOFTWARE\Microsoft\NET Framework Setup\NDP\v3.5|Version`。[像那样](https://i.stack.imgur.com/Ty8Su.png)

它将使您的安装程序更小并且可能更有用，因为您可以自定义错误消息以解释如何激活它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:40:33.140

You can compress everything into the .exe file (select compressed, and "extract from setup.exe" as appropriate), but since Windows Installer does not handle prerequisites, it cannot be just the .msi file.

If you stick to the uncompressed build you described, then yes, you must send the full contents of at least the Disk1 folder (also any other Disk folders if there are any; they're typically only used for multiple-disk media scenarios).

# javascript - 形式.名称.值

> ID：11334412
> 
> 赞同：0
> 
> 时间：2012-07-04T19:16:54.107
> 
> 标签：javascript, html, forms

我正在开发与地址相关的应用程序。

我用这样的硬编码地址测试了我的函数：

```
var address = "India Gate , Rajpath, New Delhi, Delhi"; 
```

它工作正常。

但是现在当我使用该功能通过表单从用户那里获取 adderss 并使用`address=form.address.value`. 然后`alert(address)`显示正确`address`（字符串）。但是函数无法对其工作（对于与硬编码相同的地址）。

基本上我使用的是谷歌地图 API。`form.name.value`那么我应该知道有什么特别之处吗？

```
geocoder = new google.maps.Geocoder();
var address = form.address.value;
alert(address);
//var address = "India Gate , Rajpath, New Delhi, Delhi";

geocoder.geocode({
    'address': address
}, function(results, status) {

    if(status == google.maps.GeocoderStatus.OK) {
        alert("hi");
        var latitude = results[0].geometry.location.lat();
        var longitude = results[0].geometry.location.lng();
        addpin(latitude, longitude);
    }
}); 
```

```
<form>
    Your Name: <input type="text" name="name"/><br/>
    Your Email:<input type="text" name="email"/><br/>
    Company name:<input type="text" name="company"/><br/>
    Street address:<input type="text" name="address"/><br/>
    <input type="submit" value="submit" onclick="getlatlong(this.form)">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:19:17.237

`form.name`反映到元素的`name`属性`form`

```
<form name="form1" /> 
```

* * *

```
console.assert(form.name == "form1"); 
```

你可以使用`form.elements.name`你想要的。但在这种情况下，您无法到达`length`命名元素，因为那是`form.elements`集合的长度。

# java - Android ListView 在点击时抛出 NullPointer 异常

> ID：11334417
> 
> 赞同：0
> 
> 时间：2012-07-04T19:17:13.990
> 
> 标签：java, android, android-listview

我有以下代码正确地将系列名称添加到 aName 并链接到 aLink 以便两个 ArrayLists 都保存值。运行 ListView 时正确显示 aName，但是当单击列表视图中的一项时，应用程序会抛出 NullPointer 异常。

```
 public class MainActivity extends ListActivity {
ArrayAdapter<String> adapter;
ArrayList aName;
ArrayList aLink;
ListView view;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    view = getListView();
    view.setTextFilterEnabled(true);
    //CONNECT CODE//
    Document main = Jsoup.parse("<html> </html>");
    try {
        main = Jsoup.connect("http://www.animeseason.com/anime-list/").get();
    } catch (IOException e) {
        AlertDialog alertDialog;
        alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Connection Error");
        alertDialog.setMessage("Could not Connect.");
        alertDialog.show();
        e.printStackTrace();
    }
    //PARSE HTML CODE//
    aName = new ArrayList();
    aLink = new ArrayList();
    main = Jsoup.parse(main.getElementsByClass("series_col").toString());
    Elements seriesL = main.getElementsByTag("li");
    for(Element anime: seriesL){
        Elements link = anime.getElementsByTag("a");
        aName.add(link.text());
        aLink.add(link.attr("href"));
    }
    //SET VIEW//
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, aName);
    setListAdapter(adapter);
    //ONCLICK
    view.setOnItemClickListener(
        new OnItemClickListener(){
        public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3) {
             Intent myIntent = new Intent(view.getContext(), EpisodeListActivity.class);
             String name = (String) aName.get(position).toString();
             String link = (String) aLink.get(position).toString();
             myIntent.putExtra("Anime", name);
             myIntent.putExtra("Link", link);
             startActivity(myIntent);
        }
    });

} 
```

这是日志-

```
 07-04 15:08:15.382: W/dalvikvm(3489): threadid=1: thread exiting with uncaught                 exception (group=0x40a3c1f8)
    07-04 15:08:15.406: E/AndroidRuntime(3489): FATAL EXCEPTION: main
    07-04 15:08:15.406: E/AndroidRuntime(3489): java.lang.NullPointerException
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.AbsListView.obtainView(AbsListView.java:2035)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.ListView.makeAndAddView(ListView.java:1772)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.ListView.fillDown(ListView.java:672)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.ListView.fillFromTop(ListView.java:732)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.ListView.layoutChildren(ListView.java:1625)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.AbsListView.onLayout(AbsListView.java:1865)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.View.layout(View.java:11278)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.View.layout(View.java:11278)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.View.layout(View.java:11278)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.View.layout(View.java:11278)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.ViewGroup.layout(ViewGroup.java:4224)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.os.Handler.dispatchMessage(Handler.java:99)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.os.Looper.loop(Looper.java:137)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at android.app.ActivityThread.main(ActivityThread.java:4424)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at java.lang.reflect.Method.invokeNative(Native Method)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at java.lang.reflect.Method.invoke(Method.java:511)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
    07-04 15:08:15.406: E/AndroidRuntime(3489):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:19:53.853

您正在扩展 ListActivity，覆盖 Activity 中的 onListItemClick() 方法，而不是您在 onCreate() 中执行的 view.setOnItemClickListener

编辑：

在您的布局 xml 中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
   <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</LinearLayout> 
```

在使用布局的活动中：

上课：公开课`MyActivity extends ListActivity`

获取列表视图：`ListView list = getListView();`

设置列表适配器：`setListAdapter(adapter);`

在 MyActivity 类中覆盖 onListItemClick：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
//do your thing 
} 
```

文档：http: [//developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:29:58.057

您还可以创建一个“普通”活动而不是 ListActivity。

```
public class MainActivity extends Activity {
... 
```

将 xml 布局中的 ListViews id 更改为“@+id/list”。

```
<ListView
    android:id="@+id/list"
... 
```

或者在你的 onCreate 方法中创建你的列表视图：

```
ListView listView = new ListView(this);
setContentView(listView); 
```

获取 ListView，您可以使用 OnItemClickListener。

```
ListView listView = (ListView) findViewById(R.id.list); // only needed if you have a xml layout
listView.setAdapter(adapter);
listView.setOnItemClickListener( ... 
```

# android - 进度条样式/主题 Android

> ID：11334419
> 
> 赞同：0
> 
> 时间：2012-07-04T19:17:24.753
> 
> 标签：android, android-ui

在为我的 Activity 修改主题以显示 ActionBar（准确地说是 ActionBarSherlock）后，我的进度条从：

![在此处输入图像描述](../Images/d344714c63093fd3e199ee55b005f94a.png)

到：

![在此处输入图像描述](../Images/1f3553c59170b475ff21d083ba48c412.png)

（细蓝线）。我需要能够定义进度条的高度，而 Holo 主题无法做到这一点。如何为我的进度条指定一个与我的活动不同的主题，或者解决此问题的其他方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:22:29.260

据我所知，您正在实现 Android 内置进度条，该进度条在不同设备和当时的 android 版本中出现不同。

如果您想为所有设备实现相同的功能，请制作自定义进度条。这对所有人来说都是一样的。

希望它会帮助你。

享受。

:)

# cassandra - 直接无法路由的数据中心之间的多主 Cassandra

> ID：11334422
> 
> 赞同：2
> 
> 时间：2012-07-04T19:17:45.930
> 
> 标签：cassandra, multi-master-replication

我们有三个设施，分别称为 Main、Remote1 和 Remote2，它们都有应用程序的本地用户。用户目前在 Main 中使用 SQL db，我们正在寻求转移到 Cassandra。我们希望所有数据中心的写入都命中本地 Cassandra 节点，而不仅仅是 Main 中的节点。主数据中心的服务器可以与 Remote1 和 Remote2 中的服务器通信，但 Remote1 和 Remote2 之间没有路由或 DNS 可见性。

是否可以设置具有三个数据中心的 Cassandra，其中某些节点无法与其他节点直接通信？是否可以将来自 Remote1 的写入传播到 Main，然后将它们推送到 Remote2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:16:35.393

不，Cassandra 不支持这种情况。

# c# - 如何从用户的访问令牌中获取 Google 日历提要？

> ID：11334426
> 
> 赞同：0
> 
> 时间：2012-07-04T19:18:07.873
> 
> 标签：c#, asp.net, oauth-2.0, google-calendar-api

使用 OAuth 我确实从 Google 获得了访问令牌。谷歌附带的样本，甚至这个样本：

[http://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo=samples](http://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo=samples)

展示如何使用 Tasks API。但是，我想使用日历 API。我想访问用户的日历。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T22:03:34.480

查看示例：
[.NET 客户端库入门](https://developers.google.com/gdata/articles/dotnet_client_lib)
在上面链接的页面右侧有一个屏幕截图，显示了包含在[Google Data API 解决方案](https://code.google.com/p/google-gdata/downloads/detail?name=Google_Data_API_Setup_2.1.0.0.msi&can=2&q=)中的示例项目。事实证明它们非常有用（我用它们来启动我自己的 Google 日历应用程序）。

我建议保持您自己的解决方案和示例解决方案都处于打开状态。这样您就可以在示例和您自己的实现之间切换。

我还建议使用[NuGet](http://nuget.codeplex.com/)包：

*   Google.GData.AccessControl
*   Google.GData.Calendar
*   Google.GData.Client
*   Google.GData.Extensions
*   [和更多 ...](http://nuget.org/packages?q=google.gdata)

这样您就可以轻松掌握最新信息。

* * *

获取用户日历的示例：

```
public void LoadCalendars()
{
    // Prepare service
    CalendarService service = new CalendarService("Your app name");
    service.setUserCredentials("username", "password");

    CalendarQuery query = new CalendarQuery();
    query.Uri = new Uri("https://www.google.com/calendar/feeds/default/allcalendars/full");
    CalendarFeed calendarFeed = (CalendarFeed)service.Query(query);

    Console.WriteLine("Your calendars:\n");
    foreach(CalendarEntry entry in calendarFeed.Entries)
    {
        Console.WriteLine(entry.Title.Text + "\n");
    }
} 
```

# .net - 如何对 .net WinForm 对话框本地化进行故障排除

> ID：11334430
> 
> 赞同：0
> 
> 时间：2012-07-04T19:18:34.913
> 
> 标签：.net, winforms, localization

我在 C#/Winforms 中的 Visual Studio .NET 下创建了一个对话框，该对话框必须支持多种语言。我已将对话框可**本地化**属性设置为 True，然后选择中性**语言**- 法语并在对话框中输入法语文本，以及法语（法国）。我看到了相关的资源文件：

AboutBox.fr-FR.resx
AboutBox.fr.resx
AboutBox.resx

为了测试它，我在主线程中将线程 CurrentCulture 和 CurrentUICulture 设置为 CultureInfo("fr-FR") ，如下所示，然后创建对话框，但只有英文版显示。我验证了线程 CurrentCulture 和 CurrentUICulture 在对话框构造函数期间仍设置为“fr-FR”。

```
 CultureInfo cultureInfo = new CultureInfo("fr-FR");
            Thread.CurrentThread.CurrentCulture = cultureInfo;
            Thread.CurrentThread.CurrentUICulture = cultureInfo; 
```

程序集的整体中性语言是英语-美国。

我在输出窗口中看不到任何有用的消息。追踪 .NET 本地化运行时行为原因的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:38:29.680

事实证明，用英文文本覆盖设计器字段背后有 C# 代码。在完成其余翻译之前，我试图进行快速测试。

# javascript - 对象不会从原型函数返回

> ID：11334434
> 
> 赞同：0
> 
> 时间：2012-07-04T19:19:05.493
> 
> 标签：javascript

我像这样实例化一个对象：（当我说数组时，我的意思是说对象）

```
text_object = new SText( form_elements ); 
```

为了调试，我这样称呼它：

```
console.log('text_array in caller' + ( text_object.getArray().toSource() ) ); 
```

实际功能如下所示：

```
SText.prototype.getArray = function( ) {
    console.log('text_array in getArray' + this.text_array.toSource() );
    return this.text_array;
}; 
```

console.log 在实际函数中显示了数组，但从未返回：这是日志：

```
[15:16:44.160] text_array in getArray({url:"http://a.com", title:"a", tag:"a", domain:"a.com", path:"http://www.google.com/s2/favicons?domain=a.com"})

[15:16:44.162] text_array in Caller({}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:21:47.513

你有没有尝试过

```
console.log('text_array in caller' + text_object.getArray().toSource()); 
```

# vba - 保存 Excel 文件并使用不同的工作表将其导出为 pdf

> ID：11334438
> 
> 赞同：0
> 
> 时间：2012-07-04T19:19:20.707
> 
> 标签：vba, excel

我从未编写过 VBA 代码，但我在互联网上查看了一些信息。

我的愿望如下：我有一个包含 3 张纸的 Excel 文件。在其中一个上，我想添加一个按钮，它可以：

1.  按照以下命名约定保存我的 Excel 文件的全部内容：`[name of a cells of a page]_AP_[date of today].xls`.
2.  将其中一张工作表保存为 .pdf 文件。
3.  在调整内容的同时打印 3 张中的 2 张。

我已经开始做一些事情了，但我真的不擅长编程：

```
Public Sub Savefile_Click() 'copie sauvegarde classeur

' save my file following a name
Dim nom As String
Dim chemin As String
Dim wSheet As Worksheet

    chemin = "C:\Users\aaa\Desktop"
    nom = [Q13].Value & "_" & Day(Date) & "-" & Month(Date) & "-" & Year(Date) _
          & ".xlsm"
   With ActiveWorkbook
    .SaveAs Filename:=chemin & nom
    .Close
    rep = MsgBox("Fichier excell sauvegardé")
    End With

' ... and print my active sheet (where the button will stay)
For Each wSheet In ActiveWorkbook.Worksheets
If wSheet.Visible Then wSheet.PrintOut
Next

'Save my page 'offre' in pdf on my desktop and print it
   Worksheets("OFFRE A ENVOYER").Range("A1:i47").ExportAsFixedFormat _
    Type:=xlTypePDF, _
    Filename:=[Q13].Value & "_Offre de prix", _
    Quality:=xlQualityStandard, _
    IncludeDocProperties:=True, _
    IgnorePrintAreas:=False, _
    OpenAfterPublish:=False

End Sub 
```

之后会有另一个选项和细节，但这确实是基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:13:46.910

1) 另存为 Excel

```
Dim nom As String

nom = ThisWorkbook.Sheets(1).Range("Q13").Value & "AP" & Format(Date, "ddmmyyyy") & ".xls"
thisworkbook.saveas sPath & nom 'Define path first, don't forget the \ at the end. 
```

更好的是从范围“Q13”创建一个命名范围并使用：

```
nom = thisworkbook.names("Something").referstorange.value 
```

为了使链接动态化，以防您插入移动所有范围的列或行。

2) 将工作簿另存为 PDF

```
 ThisWorkbook.ExportAsFixedFormat xlTypePDF, sPath & sFile 'Define here .pdf 
```

3）“通过调整 a 的内容打印 3 张中的 2 张”

我不确定我是否能得到这个...

打印命令由下式给出：

```
Set oSheet= thisworkbook.sheets(2)  

with oSheet.PageSetup
    .PrintArea = "$A1$1:$Q$40"
    ... 
```

'任何其他属性：[http ://www.java2s.com/Code/VBA-Excel-Access-Word/Excel/AllpropertiesofPageSetup.htm](http://www.java2s.com/Code/VBA-Excel-Access-Word/Excel/AllpropertiesofPageSetup.htm)

```
end with
oSheet.printout 
```

无论您想以哪种方式对此进行编程，以检索您需要打印的工作表。您可以使用计数器遍历工作表并放置 if 语句以添加条件。

```
dim oSheet as Excel.worksheet
dim iCnt as integer    

For each oSheet in thisworkbook.sheets
    iCnt = iCnt + 1
    'Include conditions here 
    If ... then 'Whatever condition
        set oSheet = thisworkbook.sheets(iCnt)
        'Print
    end if
next oSheet 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:20:37.603

谢谢...我正在寻找这个。这工作得很好。

Option Explicit Sub SvMe() '将文件名保存为 A1 的值加上当前日期

```
Dim newFile As String, fName As String
 ' Don't use "/" in date, invalid syntax
fName = Range("A1").Value
newFile = fName & " " & Format$(Date, "mm-dd-yyyy")
 ' Change directory to suit
ChDir _
"C:\Users\user\Desktop" 'YOU MUST Change USER NAME to suit
ThisWorkbook.ExportAsFixedFormat xlTypePDF, Filename:=newFile 
```

结束子

这 1\. 以 pdf 格式保存我的文件 2\. 不提示我参加另存为对话框 3\. 使用 A1 中的单元格值和日期戳保存文件

# opencv - 如何在opencv中的相机流上叠加小动画

> ID：11334443
> 
> 赞同：2
> 
> 时间：2012-07-04T19:19:44.787
> 
> 标签：opencv, video, image-processing, overlay, webcam

我正在开发一个使用 opencv 作为我的大学项目的应用程序，它几乎完成了，除了我无法在我的相机流上覆盖动画视频（flash 视频），我想捕捉用户的嘴巴，在检测到嘴巴之后我想覆盖一个烟雾动画视频。请问有人可以帮我处理覆盖部分吗？如果不可能，您能否对任何解决方法有所了解

我正在使用 opencv 2.3.1 和 ubuntu 11.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:40:39.783

基本上，您需要做的就是在视频帧中设置一个**ROI**（感兴趣区域），然后执行将任意图像复制到视频帧中的特定位置的操作。

[我已经在这个线程](https://stackoverflow.com/questions/10881397/setting-roi-with-mouse-from-a-rectangle-on-a-video/10883266#10883266)中演示了如何做类似的事情，用户用鼠标选择 ROI，系统执行该区域的灰度转换。

此外，[该线程](https://stackoverflow.com/a/5493633/176769)还展示了如何使用鼠标在网络摄像头窗口上绘图。

两个线程都使用 OpenCV 的 C 接口，它们展示了如何实现您正在寻找的覆盖效果。

# java - 用户返回活动时 Videoview 未启动

> ID：11334444
> 
> 赞同：1
> 
> 时间：2012-07-04T19:19:49.073
> 
> 标签：java, android, android-activity, android-videoview

我正在启动一个项目，我想在执行应用程序时在主活动中重现视频，当用户按下视频时，它会转到另一个活动。如果用户按下后退按钮，他将再次进入主屏幕并从头开始再现视频。该视频位于原始目录中。

问题是视频视图在第一次创建活动时正在重现视频，但当用户从其他活动（在我的情况下是 MenuSection 活动）返回到它时却没有。代码非常简单，但无论如何我都会粘贴它：

```
 public class MainActivity extends Activity {
   private VideoView mVideoView;
   LinearLayout menuSection;
   @Override

   public void onCreate(Bundle icicle) {
      super.onCreate(icicle);
      setContentView(R.layout.main);
      mVideoView = (VideoView) findViewById(R.id.surface_view);
      mVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.documentariesandyou));
      mVideoView.requestFocus();
      mVideoView.setMediaController(null); //i dont want the controls of the videoview.
      mVideoView.start();
      menuSection = (LinearLayout) findViewById(R.id.menuSection);
      menuSection.setOnClickListener(new menuSectionListener());

   }

class menuSectionListener implements OnClickListener {
    public void onClick(View v) {
        Intent staticActivityIntent = new Intent(MainActivity.this, MenuSection.class);
        startActivity(staticActivityIntent);        
    }
}

} 
```

MenuSection 只是一个显示“Hello world”之类的文本视图的活动，所以我没有粘贴它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:29:01.910

移动`mVideoView.start();`到`onResume()`而不是`onCreate()` ：

```
@Override
    protected void onResume() {
        super.onResume();
        mVideoView.start();
    } 
```

当 Activity 已经运行时，请参阅从您的 Activity 调用[管理 Activity 生命周期](http://developer.android.com/guide/components/activities.html#Lifecycle) `onResume()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:32:59.680

调用您的活动`video.pause()`的`onPause()`覆盖方法并调用您的活动`video.resume()`的`onResume()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:24:55.020

移动`mVideoView.start();`到`onStart()`，而不是`onCreate()`。

有关[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)如何工作的更多信息，请参阅开发者文档中的活动生命周期。

我不确定，但您可能还需要将其`setVideoURI();`移至`onStart()`。

# python - 在python中监控线程同步

> ID：11334447
> 
> 赞同：1
> 
> 时间：2012-07-04T19:20:04.820
> 
> 标签：python, synchronization

有没有办法在python类中使用像java方法同步这样的监控线程同步来确保线程安全并避免竞争条件？

我想要一个类似监视器的同步机制，它只允许在我的类或对象中调用一个方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T19:38:53.247

您可能想看看[python threading interface](http://docs.python.org/library/threading.html)。对于简单的互斥功能，您可以使用`Lock`对象。`with`您可以使用以下语句轻松完成此操作：

```
...
lock = Lock()
...
with (lock):
  # This code will only be executed by one single thread at a time
  # the lock is released when the thread exits the 'with' block
  ... 
```

有关python 中不同线程同步机制的概述，另请参见[此处。](http://effbot.org/zone/thread-synchronization.htm)

Java没有python语言结构`synchronized`（但我想它可以使用装饰器构建）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-11T02:24:14.023

我为它构建了一个简单的原型，这里是 GitHub 存储库的链接，了解所有详细信息：[https ://github.com/ma-rahal/monitor-sync-python](https://github.com/m-a-rahal/monitor-sync-python)

我使用继承而不是装饰器，但也许我稍后会包含该选项
这是“监视器”超类的样子：

```
import threading

class Monitor(object):
   def __init__(self, lock = threading.Lock()):
       ''' initializes the _lock, threading.Lock() is used by default '''
       self._lock = lock

   def Condition(self):
       ''' returns a condition bound to this monitor's lock'''
       return threading.Condition(self._lock)

   init_lock = __init__ 
```

**现在，定义自己的监视器**所需要做的就是从这个类继承：

```
class My_Monitor_Class(Monitor):
    def __init__(self):
        self.init_lock() # just don't forget this line, creates the monitor's _lock
        cond1 = self.Condition()
        cond2 = self.Condition()
        # you can see i defined some 'Condition' objects as well, very simple syntax
        # these conditions are bound to the lock of the monitor 
```

你也可以通过你自己的锁代替

```
class My_Monitor_Class(Monitor):
    def __init__(self, lock):
        self.init_lock(lock) 
```

查看[threading.Condition()](https://docs.python.org/3/library/threading.html#condition-objects)文档

您还需要使用监视器的锁来保护所有“公共”方法，如下所示：

```
class My_Monitor_Class(Monitor):
    def method(self):
        with self._lock:
            # your code here 
```

如果您想使用“私有”方法（在监视器内部调用），您可以**不**使用保护它们`_lock`（否则线程会卡住），或者使用[RLock](https://stackoverflow.com/questions/16567958/when-and-how-to-use-pythons-rlock)代替监视器

# 额外提示

有时监视器由“入口”和“出口”协议组成

```
monitor.enter_protocol()
<critical section>
monitor.exit_protocol() 
```

在这种情况下，您可以利用 python 的酷`with`语句 :3
只需定义`__enter__`和`__exit__`方法，如下所示：

```
class monitor(Monitor):
    def __enter__(self):
        with self._lock:
            # enter_protocol code here

    def __exit__(self, type, value, traceback):
        with self._lock:
            # exit_protocol code here 
```

现在您需要做的就是使用[with 语句](https://preshing.com/20110920/the-python-with-statement-by-example/)调用监视器：

```
with monitor: 
    <critical section> 
```

# c++ - 使用公共命名方法实现非公共赋值运算符？

> ID：11334449
> 
> 赞同：0
> 
> 时间：2012-07-04T19:20:34.337
> 
> 标签：c++, clone, assignment-operator

~~它应该复制一个 AnimatedSprite。我有第二个想法，它具有更改 *this 对象的不幸副作用。~~

~~我将如何在没有副作用的情况下实现此功能？~~

编辑：

基于新的答案，问题应该是：如何实现具有公共命名方法且~~没有副作用~~的非公共赋值运算符？（因此更改了标题）。

```
public:
AnimatedSprite& AnimatedSprite::Clone(const AnimatedSprite& animatedSprite) {
    return (*this = animatedSprite);
}

protected:
AnimatedSprite& AnimatedSprite::operator=(const AnimatedSprite& rhs) {
    if(this == &rhs) return *this;

    destroy_bitmap(this->_frameImage);
    this->_frameImage = create_bitmap(rhs._frameImage->w, rhs._frameImage->h);
    clear_bitmap(this->_frameImage);
    this->_frameDimensions = rhs._frameDimensions;
    this->CalcCenterFrame();
    this->_frameRate = rhs._frameRate;
    if(rhs._animation != nullptr) {
        delete this->_animation;
        this->_animation = new a2de::AnimationHandler(*rhs._animation);
    } else {
        delete this->_animation;
        this->_animation = nullptr;
    }

    return *this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:26:03.560

您可以调用私有赋值运算符：

```
public:
AnimatedSprite& AnimatedSprite::Clone(const AnimatedSprite& animatedSprite) {
    return ( operator=(animatedSprite));
} 
```

`this`如果您尝试进行分配，则无法绕过修改

~~通常，clone 返回指向新实例的指针或智能指针：~~

 ~~```
struct IFoo {
  virtual IFoo* clone() const = 0;
};
struct Foo1 : public virtual IFoo {
  virtual IFoo* clone() { return new Foo1(this);}
};
struct Foo2 : public virtual IFoo {
  virtual IFoo* clone() { return new Foo2(this);}
};

IFoo* foo0 = new Foo1();
...
IFoo* fooClone = foo0.clone(); 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:32:58.857

1.  克隆不应该有参数，因为它应该克隆自己。如果你想改变 *this 你有 operator =。
2.  尝试返回值。如果您作为回报创建临时对象，则编译器可以对其进行优化以在没有临时对象的情况下构造新对象。

    AnimatedSprite AnimatedSprite::Clone() { return AnimatedSprite(*this); }

    AnimatedSprite clone = someObject.Clone(); // 不会导致创建临时对象

// 已编辑

所以你需要这样的东西吗？我也不确定，为什么需要返回参考。

```
public:
AnimatedSprite& AnimatedSprite::CopyTo(AnimatedSprite& animatedSprite) {
    animatedSprite = *this;
    return *this;
}

AnimatedSprite& AnimatedSprite::CopyFrom(AnimatedSprite& animatedSprite) {
    return (*this = animatedSprite);
} 
```~~

# python - Python：使用嵌套推导将字符串列表按长度拆分为字符串列表列表

> ID：11334450
> 
> 赞同：5
> 
> 时间：2012-07-04T19:20:45.127
> 
> 标签：python, nested, list-comprehension

我有一个字符串列表，我正在尝试按字符串长度制作一个字符串列表。

IE

```
['a', 'b', 'ab', 'abc'] 
```

变成

```
[['a', 'b'], ['ab'], ['abc']] 
```

我已经这样做了：

```
lst = ['a', 'b', 'ab', 'abc']
lsts = []
for num in set(len(i) for i in lst):
    lsts.append([w for w in lst if len(w) == num]) 
```

我对那个代码很好，但我正试图把我的脑袋放在理解上。我想使用嵌套推导来做同样的事情，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:25:12.943

```
>>> [[w for w in L if len(w) == num] for num in set(len(i) for i in L)]
[['a', 'b'], ['ab'], ['abc']] 
```

此外，`itertools`可能会更有效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:27:39.807

```
lst = ['a', 'b', 'ab', 'abc']
lst.sort(key=len) # does not make any change on this data,but
                  # all strings of given length must occur together

from itertools import groupby
lst = [list(grp) for i,grp in groupby(lst, key=len)] 
```

结果是

```
[['a', 'b'], ['ab'], ['abc']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:26:12.687

这适用于从 1 到最大值的所有长度（如果列表中没有该长度的字符串，则某些列表将为空`a`）：

```
>>> a = ['a', 'b', 'ab', 'abc']
>>> m = max(len(x) for x in a)
>>> print [[x for x in a if len(x) == i + 1] for i in range(m)]
[['a', 'b'], ['ab'], ['abc']] 
```

但是，如果您只想列出其中的长度，则`a`必须使用`set(len(i) for i in lst)`而不是范围。

```
>>> print [[x for x in a if len(x) == i] for i in set(len(k) for k in a)]
[['a', 'b'], ['ab'], ['abc']] 
```

列表没有区别`['a', 'b', 'ab', 'abc']`。但是如果你稍微改变一下，例如：`[['a', 'b'], ['ab'], ['abcd']]`，你会看到不同之处：

```
>>> a = ['a', 'b', 'ab', 'abcd']
>>> print [[x for x in a if len(x) == i] for i in set(len(k) for k in a)]
[['a', 'b'], ['ab'], ['abcd']]

>>> print [[x for x in a if len(x) == i + 1] for i in range(max(len(x) for x in a))]
[['a', 'b'], ['ab'], [], ['abcd']] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:28:07.417

```
L=['a','b','ab','abc']
result = [ [ w for w in L if len(w) == n] for n in set(len(i) for i in L)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T19:44:43.853

```
from itertools import groupby

mylist = ['a', 'b', 'ab', 'abc']
[list(vals) for key, vals in groupby(mylist, lambda L: len(L))] 
```

*请注意，由于 groupby 仅适用于相邻元素 - 您可能需要使用 key=len 强制对 mylist 进行排序）*

*   返回一个带有键的迭代器（它将是长度）和 vals，它是另一个包含该键组中数据的迭代器。
*   然后将数据的迭代器转换为列表
*   外部列表是从上面构建的

# c# - 如何验证我的数据表是否为空

> ID：11334451
> 
> 赞同：2
> 
> 时间：2012-07-04T19:20:47.120
> 
> 标签：c#, asp.net

你好，你已经使用 1 个按钮填充了我的数据表一个数组，下一个按钮 2 将我的数据表发送到 excel，所以我所做的是使用 C# 和 asp.net：在按钮之外声明我的数据，所以我可以在两个按钮中使用

```
 System.Data.DataTable _myDataTable =new System.Data.DataTable(); 
```

按钮 1 填充数据表：对于这个例子，假设只有 10 列，caract=单元格数

```
for (int k=0; k < 10; k++) 
{
    _myDataTable.Columns.Add();   
}

for (int j=0; j < 10; j++)
    {       
    TableRow r = new TableRow();
    System.Data.DataRow row=_myDataTable.NewRow();
    for (int i = 0; i < caract+1; i++)
    {
        row[i]=(datar[j,i].ToString());
    }
    _myDataTable.Rows.Add(row);
    Table1.Rows.Add(r);
    } 
```

现在按钮 2 允许用户是否要将数据表中的数据保存到 excel 中，但首先我验证数据表是否为空

```
if(_myDataTable !=null || _myDataTable.Rows.Count == 0)
    {

    string name="productos";
    Label2.Text="it has data";
            }
           else{Label2.Text="NO data"; } 
```

不，我写了我有数据 yupi 给我的文本，但是当我按下按钮 2 将数据表发送到 excel 时，它会创建文档但是是空的，所以我想尝试的下一件事是逐个验证单元格是否它有数据应该有，但只是不知道如何从数据表中提取数据并显示在标签中。我很感激任何帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T19:24:38.853

你的`if`情况在几点上看起来不对。

这就是我的编码方式：

```
if(_myDataTable !=null && _myDataTable.Rows.Count > 0) 
```

上面的意思是 - if`_myDataTable`是一个有效的对象**并且**它包含值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:28:59.580

JUAN 你可以在全局范围内定义你的 DataTable。然后您可以在两个按钮事件处理程序中使用它。

例如：

```
namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        private DataTable _myDataTable;
        public DataTable MyDataTable { 
            get 
            {
                return _myDataTable;
            } 
            set
            { 
                _myDataTable = value;
            } 
        }
    protected void Button1_Click(object sender, EventArgs e)
    {
        for (int k=0; k < 10; k++) 
        {
            MyDataTable.Columns.Add();   
        }

        for (int j=0; j < 10; j++)
        {       
            TableRow r = new TableRow();
            System.Data.DataRow row = MyDataTable.NewRow();
            for (int i = 0; i < caract+1; i++)
            {
                row[i]=(datar[j,i].ToString());
            }
                MyDataTable.Rows.Add(row);
                Table1.Rows.Add(r);
        }

    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        if(MyDataTable !=null || MyDataTable.Rows.Count == 0)
        {

            string name="productos";
            Label2.Text="it has data";
        }
        else
        {
            Label2.Text="NO data"; 
        }
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-25T20:17:09.980

我知道这是一个老问题，但现在有一种简单的方法可以解决这个问题，如下所示：

```
if ((dataTableName?.Rows?.Count ?? 0) > 0) 
```

# javascript - Firefox 中的 event.offsetX

> ID：11334452
> 
> 赞同：48
> 
> 时间：2012-07-04T19:20:51.293
> 
> 标签：javascript, html, events, firefox, html5-canvas

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<script language="javascript">
function main(){
    var canvas = document.getElementById("canvas");
    canvas.addEventListener("mousemove", function(e){
        if (!e) e = window.event;
        var ctx = canvas.getContext("2d");

        var x = e.offsetX;
        var y = e.offsetY;

        ctx.fillRect(x, y, 1, 1);
    });
}
</script>
</head>
<body onload="main();">
<div style="width: 800px; height: 600px; -webkit-transform: scale(0.75,0.75); -moz-transform: scale(0.75,0.75)">
    <canvas id="canvas" width="400px" height="400px" style="background-color: #cccccc;"></canvas>
</div>
</body>
</html> 
```

请考虑上面的快速而肮脏的例子。请注意，我的画布包含在应用了缩放变换的 div 中。上面的代码在任何基于 webkit 的浏览器上都能完美运行。移动鼠标时，它会在画布上绘制点。不幸的是，它不在 Firefox 中，因为它的事件模型不支持 offsetX / Y 属性。考虑到画布位置、变换等，如何将鼠标坐标从（可能）event.clientX（Firefox 也支持）转换为画布相对坐标？谢谢，卢卡。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-14T10:02:25.990

从一个[JQuery 错误跟踪页面](http://bugs.jquery.com/ticket/8523#comment:14)- 一个不错的 polyfill 是这样的：

```
var offX  = (e.offsetX || e.pageX - $(e.target).offset().left); 
```

.. 其中 e 是从 jquery 事件返回的事件。显然，只有当您的项目中已经有 Jquery 时，否则将不得不`offset()`手动完成这些工作。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-04T19:32:10.583

试试layerX，layerY

```
var x = (e.offsetX === undefined) ? e.layerX : e.offsetX;
var y = (e.offsetY === undefined) ? e.layerY : e.offsetY; 
```

[小提琴](http://jsfiddle.net/Pnx4D/)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-08-20T07:40:03.493

不幸的是，没有解决方案对我有用。

我在[这里](http://www.jacklmoore.com/notes/mouse-position/)找到了一个很好的实现：

```
var target  = e.target || e.srcElement,
              rect    = target.getBoundingClientRect(),
              offsetX = e.clientX - rect.left,
              offsetY  = e.clientY - rect.top;

e.offsetX   = offsetX;
e.offsetY   = offsetY; 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-02-12T20:23:45.927

不幸的是，offsetX 和 layerX 并不完全相同，因为 offsetX 是当前元素内的偏移量，而 layerX 是页面的偏移量。以下是我目前正在为此使用的修复程序：

```
function fixEvent(e) {
    if (! e.hasOwnProperty('offsetX')) {
        var curleft = curtop = 0;
        if (e.offsetParent) {
           var obj=e;
           do {
              curleft += obj.offsetLeft;
              curtop += obj.offsetTop;
           } while (obj = obj.offsetParent);
        }
        e.offsetX=e.layerX-curleft;
        e.offsetY=e.layerY-curtop;
    }
    return e;
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-07-10T09:39:24.050

Musa 的解决方案中有一个错误：想想如果`e.offsetX === 0`和`e.layerX === undefined`...会发生什么

```
var x = e.offsetX || e.layerX; // x is now undefined! 
```

更健壮的版本如下：

```
var x = e.hasOwnProperty('offsetX') ? e.offsetX : e.layerX;
var y = e.hasOwnProperty('offsetY') ? e.offsetY : e.layerY; 
```

或者，因为我们可以假设 if`offsetX`已定义，`offsetY`所以也会：

```
var hasOffset = e.hasOwnProperty('offsetX'),
    x         = hasOffset ? e.offsetX : e.layerX,
    y         = hasOffset ? e.offsetY : e.layerY; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-05-06T16:43:11.523

`offset`实际上并没有直接翻译成`layer`; 该`offset`属性不考虑元素的边距。下面的代码应该解释这一点。

```
function(e) {
    var x = e.offsetX, y = e.offsetY;
    if(e.hasOwnProperty('layerX')) {
      x = e.layerX - e.currentTarget.offsetLeft;
      y = e.layerY - e.currentTarget.offsetTop;
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-14T13:36:09.777

我发现这里发布的所有答案*除了*EnotionZ 和 laz brannigan 的最后两个答案（以前每个答案都是零票）在 div 中包含多个元素的情况下都是错误的。在我的情况下，我在一个 div 中有几个画布元素，我正在分别收听每个画布。

经过大量的试验和错误，我得出的最终正确答案在 FireFox 和 Chrome 中对我来说完美且相同，如下所示：

```
//inside my mouse events handler:
var anOffsetX = (inEvent.offsetX !== undefined) ? inEvent.offsetX : (inEvent.layerX - inEvent.target.offsetLeft);
var anOffsetY = (inEvent.offsetY !== undefined) ? inEvent.offsetY : (inEvent.layerY - inEvent.target.offsetTop); 
```

据推测，这也适用于利润，例如 EnotionZ 在他的帖子中指出的，但我没有尝试过。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-05-13T11:47:42.517

由于各种原因，没有一个非 jquery 版本可以完全工作。然而，在你的帮助下，我得到了这个工作：

```
if(!event.hasOwnProperty('offsetX')) {
    event.offsetX = event.layerX - event.currentTarget.offsetLeft;
    event.offsetY = event.layerY - event.currentTarget.offsetTop;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-09-21T13:57:04.543

但是，如果没有字段`layerX`，你会怎么做？`layerY`

```
 var xe=e.offsetX,ye=e.offsetY;
  if(!xe){
     xe=e.clientX - $(e.target).offset().left;
  }
  if(!ye){
    ye= e.clientY - $(e.target).offset().top;
  } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-28T13:26:48.837

OffsetX/Y 行为在 FireFox、Chrome/Edge 中有所不同。您可能需要通过添加代码片段来计算值：

```
const offsetX = evt.clientX - this.myRef.current.getBoundingClientRect().left;
const offsetY = evt.clientY - this.myRef.current.getBoundingClientRect().top; 
```

*myRef*是它最近的父元素的引用。所以偏移量将是这个元素（clientX）减去它的父元素之间的距离。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-08-07T19:47:31.990

这个问题需要一个更新的答案。

* * *

首先，正如我在评论中提到的，关于所有使用`layerX`and的旧答案`layerY`：

> “此功能是非标准的，不在标准轨道上。请勿在面向 Web 的生产站点上使用它：它不适用于每个用户。实现之间也可能存在很大的不兼容性，并且行为可能会在未来发生变化。”

（来源：[developer.mozilla.org/en-US/docs/Web/API/UIEvent/layerX](http://developer.mozilla.org/en-US/docs/Web/API/UIEvent/layerX)）

* * *

其次，我发现当你`console.log(event)`在 Firefox中时`offsetX`，`offsetY`显示 0，但当你时`console.log(event.offsetX)`，它不是 0。所以要小心，因为你可能被骗了。

[此处](https://developer.mozilla.org/en-US/docs/Web/API/Console/log#Logging_objects)解释了此行为：

> **记录对象**
> 
> 不使用`console.log(obj)`，使用`console.log(JSON.parse(JSON.stringify(obj)))`。
> 
> 这样您就可以确定您在记录时看到了 obj 的值。否则，**许多浏览器会提供实时视图，该视图会随着值的变化而不断更新**。这可能不是你想要的。

（另请注意，`JSON.stringify()`这里不会做你想做的事......它不会对整个事件对象进行字符串化。）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-30T23:22:11.247

如果有些人仍然需要解决方案，那么这个在 Firefox 中完美运行：

```
var x = e.offsetX || e.originalEvent.layerX;
var y = e.offsetY || e.originalEvent.layerY; 
```

# c - 如何让这个简单的 shellcode c 程序从终端编译？

> ID：11334454
> 
> 赞同：2
> 
> 时间：2012-07-04T19:21:05.403
> 
> 标签：c, security, buffer-overflow, shellcode, execve

我正在尝试使用 ubuntu 12 上的终端进行编译：

```
#include <stdio.h>

#include <stdlib.h>

main()

{
    /*declare argument array*/
    char *args[2];

    args[0] = “/bin/bash”;
    args[1] = NULL;

    execve(args[0], args, NULL);

    exit(0);
} 
```

[我在http://www.securitytube.net/video/235](http://www.securitytube.net/video/235)上找到了这个例子，它也恰好是 Aleph One 在“为了乐趣和利润而粉碎堆栈”中使用的一个。我知道从那以后发生了很大的变化。在我使用的更简单的示例中：

gcc -ggdb -mpreferred-stack-boundary=2 -fno-stack-protector 文件名 filename.c

其他时候我可能会包含静态实用程序。在我尝试编译上面的 C 代码之前，它一直有效。我从终端收到的消息是：

```
ss@ss-laptop:~$ gcc -static -mpreferred-stack-boundary=2 -fno-stack-protector -o shell         shell.c
shell.c: In function ‘main’:
shell.c:9:2: error: stray ‘\342’ in program
shell.c:9:2: error: stray ‘\200’ in program
shell.c:9:2: error: stray ‘\234’ in program
shell.c:9:15: error: expected expression before ‘/’ token
shell.c:9:15: error: stray ‘\342’ in program
shell.c:9:15: error: stray ‘\200’ in program
shell.c:9:15: error: stray ‘\235’ in program
ss@ss-laptop:~$ 
```

我知道这是一个非常简单的示例，并且此错误可能是由 linux 中当前的标准安全措施引起的，但我想绕过它们来练习这个示例以及将来的更多内容。如果有人可以提供帮助，那将是“粉碎”。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:23:35.487

您的字符串文字周围有“智能”引号，

```
“/bin/bash”; 
```

尝试使用普通引号`"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:23:11.683

我认为这与安全无关，而是以下行：

```
args[0] = “/bin/bash”; 
```

您用来分隔字符串的引号字符不是标准的 ASCII 引号字符；相反，它们是用于引号的漂亮 Unicode 字符。

尝试将其重写为

```
args[0] = "/bin/bash"; 
```

通过用新的双引号替换引号字符。

顺便说一句 - 编译器不可能检测到所有可能启动 shellcode 的程序。如果任何标准编译器由于安全漏洞而完全停止编译程序，我会感到震惊。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:53:36.763

感谢大家的快速反应。我学到了一些东西：

1）复制和粘贴是愚蠢的

2）不要复制粘贴

3）无论如何都要检查我的引号

答案是引号。我删除并再次输入它们。*叹。

干杯

我是新手——我是第一个承认这一点的人。

# c# - 如何从 MVC3 控制器调用 SQL Server 数据库函数？

> ID：11334459
> 
> 赞同：-1
> 
> 时间：2012-07-04T19:21:33.453
> 
> 标签：c#, .net, asp.net-mvc-3, sql-server-2008

> **可能重复：**
> [如何在 .NET 中使用 SQL 用户定义函数？](https://stackoverflow.com/questions/1056390/how-to-use-sql-user-defined-functions-in-net)

假设我在我的数据库中创建了一个 SQL Server 函数`function1(int a,int b)`，现在如何在 MVC3 控制器中调用这个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:30:48.970

您将使用[ADO.NET](http://msdn.microsoft.com/en-us/library/h43ks021%28v=vs.71%29.aspx)或许多其他数据库技术中的任何一种。

# git - 共享远程 git repo 将权限设置为“-r--r-----”

> ID：11334460
> 
> 赞同：3
> 
> 时间：2012-07-04T19:21:34.077
> 
> 标签：git, permissions

我有一个共享的 git 存储库，我们遇到了推送导致错误消息“将对象添加到存储库数据库./objects 的权限不足”的问题

我已经在这里阅读了解决方案：[推送到 GitHub 时出错 - 向存储库数据库添加对象的权限不足](https://stackoverflow.com/q/1918524/641481)，这里：[让 git push 尊重权限？](https://stackoverflow.com/q/5264968/641481)并在网上搜索其他解决方案或类似问题，但没有成功。存储库未配置为 sharedRepository = 0660，但现在已配置。我还尝试了“group”、“true”和“all”，但它们也没有解决问题。

当我对远程存储库执行 git push 时，它仍然会创建具有“-r--r-----”访问权限的文件。例如 ls -l 输出的文件 ./objects/0f/87b18a145ebd187cc1e5bed9f6ea90901bc207 ：

```
-r--r----- 1 rcosta project 166 2012-07-04 20:25 87b18a145ebd187cc1e5bed9f6ea90901bc207 
```

git配置是：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = true
    sharedRepository = 0660 
```

我已经使用`chmod -R g+ws *`. 我也为访问该项目的所有其他用户完成了此操作。我不是系统管理员，所以他们每个人都登录并执行了命令。所有用户都属于该`project`组。

我们通过 SSH 访问存储库。通过执行命令行克隆了每个成员的存储库：

```
git clone username@uni-server.de:/path/to/projectname.git 
```

我对如何解决这个问题一无所知。所有文件都应该对“项目”组的所有用户具有读写权限，以便每个人都可以更改和推送任何文件。

谢谢你的帮助！
罗伯特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:58:49.260

我会在远程仓库上运行以下命令：

```
 git config core.filemode false 
```

这应该可以防止 git 识别所有权/权限的更改。我在您提供的配置中看到 filemode 设置为 true，这意味着当文件被推送到远程时，权限也会被推送。

我至少会从那里开始。

# c# - 如何序列化和处理泛型类型中所有事件的订阅？

> ID：11334465
> 
> 赞同：2
> 
> 时间：2012-07-04T19:22:22.843
> 
> 标签：c#, events, serialization, reflection, remoting

上周我问[了这个](https://stackoverflow.com/q/11249796/1489214)关于如何手动序列化对象的问题，此后我一直在尝试制作通用包装器来解决我的问题。（我这样做是因为我被困在第 3 方代码之间。）除了事件之外，我几乎所有的东西都在工作。

由于我在反序列化时在技术上创建了对象的新实例，因此我不再保留我的事件订阅。有没有办法复制订阅，或者将反序列化版本的所有事件转发回原始版本？

这是类似于我目前使用的东西：

```
[Serializable]
public class Wrapper<T> : ISerializable
{
    public T Wrappee { get; set; }

    public Wrapper(T wrappee)
    {
        Wrappee = wrappee;
    }

    protected Wrapper(SerializationInfo info, StreamingContext context)
    {
        Wrappee = (T)FormatterServices.GetUninitializedObject(typeof(T));

        FieldInfo[] fields = typeof(T).GetFields();
        foreach (FieldInfo fieldInfo in fields)
        {
            var value = info.GetValue(fieldInfo.Name, fieldInfo.FieldType);
            fieldInfo.SetValue(Wrappee, value);
        }
    }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        FieldInfo[] fields = typeof(T).GetFields();
        foreach (FieldInfo fieldInfo in fields)
        {
            var value = fieldInfo.GetValue(Wrappee);
            info.AddValue(fieldInfo.Name, value);
        }
    }
} 
```

嗯，这只是它的一般想法。基本上我想知道是否有一种方法可以对事件进行类似于我为字段所做的事情。我知道我可以以同样的方式获得 EventInfo，但我不知道这将如何转化为修复订阅。

任何帮助将不胜感激。

**编辑** 所以我仍在试图找到一种方法来做到这一点，我遇到了[这个问题。](https://stackoverflow.com/a/5457577/1489214)我可以做这样的事情，然后将事件转发回原来的 appdomain 而不必修复订阅吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:58:48.503

这个问题与如何序列化对象图的问题有关。事件包含对对象的引用以及对这些对象的方法的引用。对象图如何序列化？

我会给每个要序列化的对象一个唯一的 ID。如果您不想将此 ID 存储在对象中，可以将它们存储在`Dictionary<TObject, TID>`. 在第一遍中，生成 ID 并将它们添加到字典中。在第二遍中，将对象及其 ID 序列化。序列化您可以在字典中找到的相关对象的 ID，而不是引用其他对象。

对于事件，除了引用对象的 ID 之外，还存储一个方法名称。

反序列化对象时，您将需要一个反向字典：`Dictionary<TID, TObject>`. 在第一遍中，反序列化对象并将它们添加到由它们的 ID 键入的字典中。还将反序列化的对象添加到列表中。在第二遍中，通过列表并修复引用和事件。

我希望这能让您对可能的程序有所了解。

* * *

### 更新

`GetInvocationList`您可以使用方法获取事件信息

```
class ClassWithEvent
{
    public event EventHandler SomeEvent;

    public Delegate[] GetSomeEventInvocationList()
    {
        return SomeEvent.GetInvocationList();
    }
} 
```

我用

```
class Subscriber
{
    public void SomeMethod(object sender, EventArgs e)
    {
    }
}

static class Serialize
{
    public static void Test()
    {
        var objWithEvent = new ClassWithEvent();
        var subscriber1 = new Subscriber();
        var subscriber2 = new Subscriber();

        objWithEvent.SomeEvent += subscriber1.SomeMethod;
        objWithEvent.SomeEvent += subscriber2.SomeMethod;

        Delegate[] eventInfo = objWithEvent.GetSomeEventInvocationList();
        foreach (Delegate d in eventInfo) {
            Console.WriteLine("Target = {0},   Method = {1}", 
                              d.Target, d.Method.Name);
        }
    }
} 
```

`Serialize.Test();`在控制台中调用输出

> 目标 = StackOverflowTests.SerializeEvent.Subscriber，方法 = SomeMethod
> 目标 = StackOverflowTests.SerializeEvent.Subscriber，方法 = SomeMethod

# ruby-on-rails - Rails - 如何使用地理编码器通过 IP 获取当前位置

> ID：11334468
> 
> 赞同：2
> 
> 时间：2012-07-04T19:22:43.040
> 
> 标签：ruby-on-rails, ruby, geocoding, google-geocoder

我使用地理编码通过 IP 获取国家、州和城市，但 Freegeoip 的准确性不高。我将地理编码器配置为使用谷歌。例子：

地理编码器.rb

```
Geocoder.configure do |config|
  config.lookup = :google
  config.api_key = "API_KEY"
  config.timeout = 5
  config.units = :km
end 
```

但是地理编码器使用的是 Freegeoip 而不是谷歌。我不知道我是否可以使用 google 通过 IP 获取国家、州和城市。哪个地理编码器提供商可以使用 GEOIP？

my_controller.rb

```
@result = request.location.to_yaml 
```

看法

```
--- !ruby/object:Geocoder::Result::Freegeoip cache_hit: data: city: Caxias Do Sul region_code: "23" region_name: Rio Grande do Sul metrocode: "" zipcode: "" longitude: "-51.1833" latitude: "-29.1667" country_code: BR ip: 201.22.227.49 country_name: Brazil 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T23:36:44.253

尼尔森，

虽然使用配置的“查找”服务进行地址地理编码非常有用，但不幸的是，**地理编码**器 gem 被硬编码为仅使用 Freegeoip 进行所有 IP 地址查找。我同意你的观点，Freeogeoip 的准确性相当差（对于我的用例来说还不够好）。

来自 geocoder.rb：

```
def lookup(query)
if ip_address?(query)
  get_lookup(ip_lookups.first)
else
  get_lookup(Configuration.lookup || street_lookups.first)
end
end

 ##
 # All IP address lookups, default first.
 #
 def ip_lookups
   [:freegeoip]
end 
```

我认为更好的解决方案是将**geoip** gem ( [http://geoip.rubyforge.org/](http://geoip.rubyforge.org/) ) 与免费的 MaxMind GeoCityLite 数据库一起使用，或者如果您需要更高的准确性，您可以获得高级版本。我使用 GeoCityLite 比 Freegeoip 获得了更高的准确性，即使 Freegeoip 声称来自同一个原始数据库......

我正在使用以下 GeoIP 调用来解析 IP 地址的位置：

```
@geoip_city = GeoIP.new('lib/GeoLiteCity.dat').city(request.remote_ip) 
```

有两件事要记住：

1.  这只会在实时请求上准确工作，因为您的本地网络/环回适配器不会提供适用于 request.remote_ip 调用的 IP。

2.  平面文件查找非常快，但我仍然不确定是否存在内存泄漏或其他可伸缩性问题的可能性。我仍在测试此解决方案，因此如果发现任何重要内容，我将更新响应。

# javascript - 如何设置按钮的图像和图像的悬停效果

> ID：11334474
> 
> 赞同：0
> 
> 时间：2012-07-04T19:23:14.907
> 
> 标签：javascript, css, javascript-events

如何设置按钮图像和上一个和下一个按钮图像的悬停效果，我不知道如何设置按钮图像，以及上一个和下一个按钮图像的悬停效果。我需要图像不透明度 0.1 也禁用图像按钮悬停，禁用启用条件下的条件和图像不透明度 0.5 也悬停效果 0.5。请帮我。见示例代码：http: [//jsfiddle.net/YHXFp/50/](http://jsfiddle.net/YHXFp/50/)

html

```
<div id="prevnexts">
    <button class="navButs" id="prevs">Prev</button>
    <button class="navButs" id="nexts">Next</button>
</div> 
```

javascript

```
$(document).ready(function() {
    var cnt = 1;
    var maxLinkss = 5;
    $("#prevs").attr("disabled","disabled");
    $("#nexts").attr("enabled","enabled");   

    $(".navButs").click(function(){

        if (this.id=="nexts") {
            cnt++;  
            console.log(" + ",cnt);  
        } else {
            cnt--;
            console.log(" - ",cnt);  
        }

        if (cnt<0) cnt=0;

        if (cnt==maxLinkss-1) {
            $("#nexts").attr("disabled","disabled");
        } else {
            $("#nexts").removeAttr("disabled");
        }

        if (cnt==1) {
            $("#prevs").attr("disabled","disabled");
        } else {
            $("#prevs").removeAttr("disabled");
        }
    });  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:38:30.797

```
button#nexts{
    background:url(your_image_url) no-repeat;
    width:50px;
    height:50px;
    cursor:pointer;
}
button#prevs{
    background:url(your_image_url) no-repeat;
    width:50px;
    height:50px;
    cursor:pointer;
}

button#nexts:hover, button#prevs:hover{
    opacity:.5;
    filter:alpha(opacity=50);
} 
```

[**演示。**](http://jsfiddle.net/YHXFp/37/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:30:09.130

放置图像不是一个好方法，因为它会减慢网页的加载速度。CSS 更好。这是 CSS 代码和[工作小提琴](http://jsfiddle.net/YHXFp/36/) （我选择了任意颜色。选择您想要的颜色）。如果是图像，只需替换`background-color`为`background-image:url(www.example.com/myimage.png)`.

```
#prevs{
    background-color:#666;
    color:#000;
}
#prevs:hover{
    background-color:#004534;
}
#prevs:active{
    background-color:red;
}
#nexts{
    background-color:#999;
    color:#000;
}
#nexts:hover{
    background-color:#00fcbe;
}
#nexts:active{
    background-color:blue;
} 
```

# redis - Redis Pub/Sub 有用吗？

> ID：11334483
> 
> 赞同：5
> 
> 时间：2012-07-04T19:24:23.550
> 
> 标签：redis, publish-subscribe

我有一个非常困扰我的问题。Redis 发布/订阅功能实际用于什么？我只能想到通过 TCP（本地或分布式）进行的进程间通信，但其他的不多。

有人可以证明我错了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T00:31:50.687

这是一种插入事件流的简单方法，通常在进程或机器之间。例如，用户创建一个已发布的事件。一个进程处理从事件更新数据库，另一个更新用户统计信息，另一个全局统计信息，另一个更新文本搜索数据库等。它们都通过订阅频道而松散耦合。您可以添加新进程来测试更新和监控系统。它与消息队列有点不同，因为在消息被处理之前没有存储消息，但 Redis 有其他结构用于这些类型的作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-11T17:54:48.460

根据我的经验，一个真实的用例。假设您有一个 Web 应用程序部署在 4 个不同的服务器（节点、虚拟机）上，主要是在您的虚拟私有云上。

Web 应用程序为其静态数据缓存维护一个内存中的 Java 映射，该缓存偶尔会发生变化。

现在，每次数据库中的数据发生变化时，您都需要所有服务器在内存缓存中进行更新，这就是问题所在。

一种方法是在单独的服务器上维护 redis 或任何其他缓存中的所有静态数据，并根据调度程序更新缓存。但是在这里要访问偶尔更改的静态内容，您需要调度程序和单独的缓存服务器，如 redis 或memcached 等，每个服务器都指向这个外部缓存。

**在这里使用redis的pubsub**：所有服务器都订阅redis频道，如果redis在有更新时发布消息，添加，删除数据作为消息发送给所有订阅者。接收消息对象及其更新类型（添加，删除，更新）每个服务器更新其内存静态数据映射。

# c# - Lambda 表达式过滤包括与实体框架相关的数据

> ID：11334484
> 
> 赞同：0
> 
> 时间：2012-07-04T19:24:27.327
> 
> 标签：c#, entity-framework, lambda, filtering

我只需要过滤某个类别中的可见产品，但它不起作用。

```
Category category = db.Categories
            .Include(c => c.Products.Where(p => p.IsVisible))
            .First(c => c.CategoryID == id); 
```

错误：

> 包含路径表达式必须引用在类型上定义的导航属性。对引用导航属性使用虚线路径，对集合导航属性使用 Select 运算符。

更新

```
 var result = (from c in db.Categories
                             where c.CategoryID == id
                             select new
                             {
                                 CategoryID = c.CategoryID,
                                 Description = c.Description,
                                 Products = (from p in db.Products
                                             where p.IsVisible
                                             && p.CategoryID == c.CategoryID
                                             orderby p.DateSent descending
                                             select p)
                             }).FirstOrDefault(); 
```

但现在我需要将匿名类型转换为类别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:34:42.947

如果您愿意，您的查询没有意义：

> 某个类别的可见产品

如果你真的想要可见的产品，试试这个：

```
var visibleProducts = db.Categories
                        .Where(c => c.CategoryID == id)
                        .Select(c => c.Products.Where(p => p.IsVisible)); 
```

注：未经测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:26:29.880

也许是这样的：

```
var category = db.Products.Where(p=>p.IsVisible && p.CategoryID == id).Include("Category").ToList().Select( p=> p.Category).Distinct(); 
```

由于 ToList，它可能并不理想……但我现在看不到其他方法。

也许您可以将 Distinct 更改为 FirstOrDefault()...

```
var category = db.Products.Where(p=>p.IsVisible && p.CategoryID == id).Include("Category").ToList().FirstOrDefault().Category; 
```

也没有测试...

# javascript - 转义 javascript 字符串中的引号

> ID：11334489
> 
> 赞同：1
> 
> 时间：2012-07-04T19:24:58.430
> 
> 标签：javascript, escaping, quote

我试图在javascript中的文本字符串中转义引号（以及撇号和转义字符）：

```
var text = 'Escape " and \' and /.';
var rx = new RegExp('/([\'"])/g');
console.log(text, ' ==> ', text.replace(rx,'//\1'));​​​​​ 
```

我期望输出的是`Escape /" and /' and //.`，但我得到的是`Escape " and ' and /.`.

我似乎无法让它工作，也不知道出了什么问题。

这是一个 JSFiddle：http: [//jsfiddle.net/hvtgf/](http://jsfiddle.net/hvtgf/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:29:00.357

转义意味着使用反斜杠`\`而不是斜杠`/`。

但是，出于您的目的，您可以尝试以下操作：

```
text.replace(/([/'"])/g, "/$1"); 
```

**演示：http:** [//jsfiddle.net/hvtgf/1/](http://jsfiddle.net/hvtgf/1/)

# java - Hibernate Envers：是否可以根据日期截断 Aud 表

> ID：11334493
> 
> 赞同：2
> 
> 时间：2012-07-04T19:25:27.603
> 
> 标签：java, hibernate, hibernate-envers

1) 有没有办法限制 Envers 审计跟踪的范围？

我们需要 1 周的审计跟踪，Envers 非常适合，但我们也有一些关于超出该时间范围的数据保留的合同义务。

1.1) 是否可以配置 envers 以根据修订时间截断其 _AUD 表？

1.2) 如果我使用定时查询直接从数据库中删除数据，hibernate 会崩溃或抱怨吗？或者是否有替代的、API 友好的方式来删除审计历史？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:49:13.343

1.1) 否

1.2) 否；修订表总是有一个时间戳，您可以使用它来删除数据。如果您有 on_delete 级联并且生成的模式有它们（通常应该），那么只需删除旧版本就足够了。应删除所有审计数据（_aud 表中的修订号字段有限制）

# android - 使用edittext从android上的用户获取数据

> ID：11334494
> 
> 赞同：0
> 
> 时间：2012-07-04T19:25:30.043
> 
> 标签：android, android-edittext

我正在尝试使用 editext 对象从用户那里获取名称，现在要从用户那里获取所有三个名称，我应该使用三个 editext 对象还是有一种方法可以拆分 editext 对象以获取三个单独的文本输入？稍后我将数据传递给将打印出来的另一个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:35:49.303

`EditTexts`对于三个不同的输入，最好取 3 。对于名称，我建议在水平方向使用 3 个 EditTexts`LinearLayout`和`weight=1`for`EditTexts`和`weight=3`for parent`LinearLayout`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:30:14.323

1.  取一个 EditText

2.  像这样输入名字 --> Kumar Vivek Mitra

3.  然后将其存储在字符串中。

    `String name = "Kumar Vivek Mitra";`

4.  使用 split() 方法。

    `String[] temp = name.split(" "); // SPLIT ON BASIS OF SPACE`

5.  您将名称的所有 3 部分分开

    `System.out.println("First Name: "+temp[0]);`

    `System.out.println("Middle Name: "+temp[1]);`

    `System.out.println("Last Name: "+temp[2]);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:29:19.443

如果您需要三个不同的编辑文本框，那么您将需要使用三个不同的 EditText 小部件。

您也可以只使用一个 EditText 并稍后拆分字符串，这可能更容易让用户键入而不是从一个框移动到下一个框。

# membership-provider - .NET 4.5、EF 5 和 MembershipProvider

> ID：11334495
> 
> 赞同：4
> 
> 时间：2012-07-04T19:25:32.693
> 
> 标签：membership-provider, .net-4.5, entity-framework-5

有谁知道是否要创建一个默认的 MembershipProvider 以与 EF 5 一起使用（如 SqlMembershipProvider 和 ActiveDirectoryMembershipProvider），还是我们仍然需要创建自定义的（当然是 Code First）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T07:29:41.810

实际上，经过长时间的评论和解释后，EF 将有一个默认的 MembershipProvider 并且 - 猜猜看，猜猜看 - 它被称为 EFMembershipProvider。[这是一个链接。](http://msdn.microsoft.com/en-us/library/system.web.efproviders.efmembershipprovider%28v=vs.110%29.aspx)现在这真的很酷，因为不再需要 MembershipProvider 的第三方实现（或相应的手动实现——对于小型项目来说，这有点大，而且完全过度杀伤）。

**更新** 目前似乎该提供程序不可用。我也不知道它是否会被开发并包含在未来。

由于我们鼓励在使用 EF Code First 时使用 SimpleMembershipProvider 和迁移，这就是我现在正在做的事情。您还可以实现 ExtendedMembershipProvider，这需要更多的努力。

对我来说，目前最好的解决方案是继承 SimpleMembershipProvider 并只修改我需要的东西（我使用的是之前实现 MembershipProvider 的大部分代码），例如使用电子邮件或用户名进行日志记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:45:20.090

我已经使用我的 Silversite CMS ASP.NET 库实现了 CodeFirst MembershipProvider 和角色，可以在 silversite.codeplex.com 上找到它。该库还支持 CodeFirst 数据库的多个 DbContext。据我所知，虽然目前实施已被破坏，我还没有时间修复它。还缺少 Profile 和 Session 提供者。但是我从 MySql 提供者那里得到了不应该太难移植的代码。

# php - Google Charts (Geochart) 在世界和欧洲之间切换区域

> ID：11334496
> 
> 赞同：2
> 
> 时间：2012-07-04T19:25:35.183
> 
> 标签：php, javascript, google-visualization

有没有办法在图表上设置切换选项以在`World`和之间切换区域`Europe`

我疯狂地用谷歌搜索，找不到任何东西。我知道如何设置区域只是不切换它。

谢谢 C

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T19:28:58.133

看看这个：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/geochart](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart)

在中间，您可以看到一个放大意大利和周围环境的示例。这可以帮助你。

在欧洲使用这个：

```
var options = { region: '150' } 
```

只需跳过世界的 Region 参数。

您可以使用 JQuery 中的[切换按钮](http://api.jquery.com/toggle/)来调用该函数。

# android - Achart 1.0.0 示例 android API 15

> ID：11334498
> 
> 赞同：0
> 
> 时间：2012-07-04T19:25:39.880
> 
> 标签：android, dalvik, achartengine

好吧，我已经搞砸了几个小时了，我不知道为什么我会遇到问题。

我一直在关注 [http://xebee.xebia.in/2010/08/31/exploring-android-charting-and-graphs-solutions/中的示例](http://xebee.xebia.in/2010/08/31/exploring-android-charting-and-graphs-solutions/)

而且我已经尝试使用此链接创建修复程序： [Android achartengine simple pie chart](https://stackoverflow.com/questions/6591154/android-achartengine-simple-pie-chart)

并且我尝试使用 achartengine 提供的演示[Here](http://code.google.com/p/achartengine/downloads/detail?name=achartengine-1.0.0-demo-source.zip&can=2&q=)。

但在我的安卓设备上选择图表类型后，该项目立即崩溃。

我是 android 新手，几乎完全遵循了这两个资源，我得到了这个：

```
Conversion to Dalvik format failed with error 1 
```

我的 src 文件都没有出现错误，我已将 AndroidManifest.xml 和 achartengine-1.0.0.jar 中的新活动添加到我的 libs 文件夹中

我正在使用 Android 4.0.3 API 级别 15

我不敢相信我在这样一个看似简单的任务上遇到了这么多麻烦，但我感谢你的帮助。

编辑：

这是我日志中的一个片段：

```
07-04 17:03:58.650: E/AndroidRuntime(21611): FATAL EXCEPTION: main
07-04 17:03:58.650: E/AndroidRuntime(21611): java.lang.RuntimeException: Unable to start activity ComponentInfo{axiodesigns.com.caffeinezone2/axiodesigns.com.caffeinezone2.CzMain}: android.content.ActivityNotFoundException: Unable to find explicit activity class {axiodesigns.com.caffeinezone2/org.achartengine.GraphicalActivity}; have you declared this activity in your AndroidManifest.xml? 
```

我没有名为 GraphicalActivity 的活动，即使我添加了：

```
<activity android:name="GraphicalActivity"></activity> 
```

我收到了完全相同的错误

相当令人头疼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:25:45.167

找到了修复，我的构建路径没有识别出我的 libs 文件夹中有 .jar。

这修复了它：

[应用程序 AChartengine 意外停止。请再试一次](https://stackoverflow.com/questions/10160778/the-application-achartengine-has-stopped-unexpectedly-please-try-again)

感谢大家的帮助

# objective-c - Objective-C 如何读取可见单元数组的文本？

> ID：11334500
> 
> 赞同：0
> 
> 时间：2012-07-04T19:25:51.143
> 
> 标签：objective-c, uitableview, nsarray

我的代码如下：

```
NSArray *vis = [tableView1 visibleCells];
    NSLog (@"vis %@", vis); 
```

我得到：

```
2012-07-04 21:16:44.564 xxx[1933:12e03] vis (
    "<UITableViewCell: 0xb2dcc80; frame = (0 0; 320 80); text = 'xxx1'; autoresize = W; layer = <CALayer: 0xb2dcd60>>",
    "<UITableViewCell: 0x635ea10; frame = (0 80; 320 80); text = 'xxx2'; autoresize = W; layer = <CALayer: 0x6353620>>",
    "<UITableViewCell: 0xb2ddca0; frame = (0 160; 320 80); text = 'xxx3'; autoresize = W; layer = <CALayer: 0xb2ddc70>>",
    "<UITableViewCell: 0x635f7d0; frame = (0 240; 320 80); text = 'xxx4'; autoresize = W; layer = <CALayer: 0x635f650>>" 
```

当我写：

```
NSString *aText = [vis objectAtIndex:0];
NSLog (@"aText %@", aText); 
```

我总是收到警告：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[NSMutableArray objectAtIndex:]: index 0 beyond bounds for empty array' 
```

这是一种多维数组吗？如果是，我怎样才能只提取文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:30:44.700

你应该使用：

```
NSArray *cells = [tableView1 visibleCells];
if ([cells count] > 0) {
    UITableViewCell *cell = [cells objectAtIndex:0];
    NSString *text = cell.textLabel.text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:30:11.953

由返回的数组`visibleCells`包含`UITableViewCell`对象，而不是`NSString`对象。您可以在`NSLog(@"vis %@", vis);`.

要获取字符串，您需要向`UITableViewCell`s 询问它们。

换句话说：

```
NSString *aText = [[[vis objectAtIndex:0] textLabel] text]; 
```

# c# - 文件过长异常

> ID：11334502
> 
> 赞同：3
> 
> 时间：2012-07-04T19:26:07.857
> 
> 标签：c#, file, delete-file

我正在尝试从远程计算机中删除文件，如下所示：

```
fileinfo undelteablefile = new fileinfo(
 @"\\CompName\c$\documents and settings\UserName\local settings\temporary internet files\content.ie5\k9ef0hmj\%d7%a9%d7%a2%a8%20%d7%9c%20%d7%a2%93%d7%9b%d7%95%d7%9f%20%d7%98%d7%9d%a0%d795%d7%9c%d7%d7%95%d7%92%d7%99%20%d7%97%95%d7%93%d7%a9%d7%99 [1] .jpg");

undeleteablefile.delete(); 
```

它给了我一个例外，即文件名或路径太长。

我尝试添加`\\?\`但它没有工作......为什么会发生这种情况以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:46:43.617

我使用了三种方法，但请注意它们需要非托管 P/Invoke 代码。不多，所以如果你不明白它是如何工作的，你可以复制/粘贴。

1.  [使用 8.3 文件名](http://msdn.microsoft.com/en-us/library/aa364989.aspx)（ala DOS 兼容文件名）

2.  使用您提到的 \?\ 语法。但是，我不相信您可以直接从 C# 中使用它——您需要调用本机方法。注意 - 这有安全隐患，因为字符串没有被解析，而是直接传递给文件系统。

3.  使用非托管文件 API。

[这是一系列很好的博客文章，正好解决了这个问题](http://blogs.msdn.com/b/bclteam/archive/2007/02/13/long-paths-in-net-part-1-of-3-kim-hamilton.aspx)。

埃里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:30:25.833

将网络共享映射到更靠近文件的目录之一。尝试使用通配符删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T20:03:04.383

长路径前缀`\\?\`只能用于非 UNC 路径。改为使用`\\?\UNC\`UNC 路径的前缀并调用 Win32 API 函数`DeleteFile`。有关命名文件和路径的详细信息，请参阅以下[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#short_vs._long_names)文章。

这是一个小例子：

```
[DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool DeleteFile(string lpFileName);

static void Main(string[] args)
{
  string yourLongUncPath = @"\\?\UNC\server\path";

  if(DeleteFile(yourLongUncPath))
  {
    Console.Out.WriteLine("Successfully deleted file...");
  }
} 
```

请注意，您必须使用 Unicode 版本`DeleteFile`才能使用长路径前缀`\\?\UNC\`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:37:23.803

查看文件名的末尾，由于名称中的字符模糊，Windows 似乎无法处理它。

我使用[在线工具](http://www.url-encode-decode.com/)对文件名部分进行解码，这在理论上可以解释为什么它无法删除它。

> %d7%a9%d7%a2%a8%20%d7%9c%20%d7%a2%93%d7%9b%d7%95%d7%9f%20%d7%98%d7%9d%a0%d795 %d7%9c%d7%d7%95%d7%92%d7%99%20%d7%97%95%d7%93%d7%a9%d7%99 [1](http://www.url-encode-decode.com/) .jpg

转换后看起来像这样，使用 US-ASCII

> ����������������������95������������������� [1](http://www.url-encode-decode.com/) .jpg

同样对于 UTF-8

> שע� ל ע�כון טם��95ל�וגי ח�דשי [1](http://www.url-encode-decode.com/) .jpg

您是否没有考虑过您可能必须对其进行 url 解码以使其更安全，从而减少文件名本身的长度。

# matlab - 在 lsqcurvefit 中使用选项

> ID：11334506
> 
> 赞同：1
> 
> 时间：2012-07-04T19:26:41.647
> 
> 标签：matlab, curve-fitting, least-squares, levenberg-marquardt

我想在[`lsqcurvefit`](http://www.mathworks.com/help/toolbox/optim/ug/lsqcurvefit.html)命令中使用 Levenberg Marquardt 算法。我做了以下事情：

```
options = optimset('LevenbergMarquardt','on');
x = lsqcurvefit(@myfun,x0,xdata,ydata,options); 
```

我收到以下错误：

> `??? Error using ==> optim\private\lsqncommon
> LSQCURVEFIT only accepts inputs of data type double.` 
> 
> `Error in ==> lsqcurvefit at 149
> [x,Resnorm,FVAL,EXITFLAG,OUTPUT,LAMBDA,JACOB] = ...`

我该如何克服这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:55:11.990

您应该查看该函数的[文档](http://www.mathworks.se/help/toolbox/optim/ug/lsqcurvefit.html)`lsqcurvefit`。您使用的功能错误。要传递结构`options`，您应该使用 7 参数版本并将结构作为最后的第 7 个参数传递：

```
x = lsqcurvefit(@myfun,x0,xdata,ydata,lb,ub,options); 
```

这意味着您还需要将`lb`and定义`ub`为第 5 和第 6 个参数。这些是 中设计变量的下限和上限`x`。

但如果不存在边界，您也可以传递空矩阵：

```
x = lsqcurvefit(@myfun,x0,xdata,ydata,[],[],options); 
```

# css - 运行 JSP 页面时无法显示 CSS

> ID：11334508
> 
> 赞同：0
> 
> 时间：2012-07-04T19:26:57.530
> 
> 标签：css, jsp

我阅读了几乎所有关于这个问题的帖子，到目前为止还没有解决方案。

*   我的 CSS 在 WEB-INF 文件夹之外；
*   我试过“${pageContext.request.contextPath}”但无济于事；
*   我在 web.xml 中尝试了以下 servlet 映射，但它会导致**NoTargetForURIException**：

错误 ：

```
PageNotFound  W org.springframework.web.servlet.DispatcherServlet noHandlerFound No mapping found for HTTP request with URI [/webapp/css/util.css] in DispatcherServlet with name 'cm-dispatcher' 
```

我的 JSP：

```
<link href="${pageContext.request.contextPath}/css/util.css" rel="stylesheet" type="text/css" /> 
```

**帮助！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:29:26.213

尝试给出确切的路径，例如 localhost:8080/css/example.css。那就是用绝对路径引用它。您的问题将得到解决。由于它在 WEB-INF 之外，只能通过这样做来解决。

导入时使用 Css 的绝对路径。

# oop - 层次结构的设计模式

> ID：11334510
> 
> 赞同：2
> 
> 时间：2012-07-04T19:27:21.777
> 
> 标签：oop, design-patterns

有人知道层次结构的一些设计模式吗？例如，管理库存类别、会计科目表、人力资源部门等。

非常感谢您提前

编辑：感谢您的关注。我正在寻找一种更好的方法来处理分层项目，他们应该根据层次结构级别对其应用操作。我一直在研究 Martin Fowler 的模式，例如会计，但我想知道是否还有其他更通用的模式。

问题是应用于项目的操作必须可以在运行时更改，并且可能取决于其他外部变量。我想到了一种策略模式，但想将它与它是分层方案的事实结合起来。

我将不胜感激对分层模式的任何参考，您将深入了解它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T21:13:50.627

[复合图案](http://en.wikipedia.org/wiki/Design_Patterns)立即浮现在脑海中。解释维基百科的定义，该模式允许您将对象组合成树状层次结构（分支和叶子）并统一处理单个实例或整个组合。

我倾向于在我的工作中使用它来表示复杂的视图结构，但想象它可能有助于表示库存类别或人力资源部门。

# android - LinearLayout 图像视图不适合屏幕？

> ID：11334513
> 
> 赞同：0
> 
> 时间：2012-07-04T19:27:32.007
> 
> 标签：android, android-linearlayout

嗨，我有一个线性布局，似乎当我添加第二个容纳两个图像视图的 viewflipper 时，第二个 viewflipper 显示在显示屏上非常小。我如何获得线性布局以允许我添加更多视图，这意味着即使我用完了线性布局空间，我也可以滚动并且线性布局将以正常大小显示。

例如，当您使用手机访问网站时，您可以滚动浏览该网站，直到到达页面末尾。我希望同样的事情适用于我的线性布局。

滚动视图不起作用/它仅适用于一个子视图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:34:16.243

有一个子布局有什么问题？这个怎么样？ScrollView 只有一个孩子，并不关心它的孩子有多少孩子。

```
<ScrollView>
    <LinearLayout> <!-- parent -->
        <LinearLayout></LinearLayout> <!-- child 1 -->
        <LinearLayout></LinearLayout> <!-- child 2 -->
        <RelativeLayout></RelativeLayout> <!-- child 3 -->
    </LinearLayout>  
</ScrollView> 
```

# c# - 文件上传中的路径问题？

> ID：11334518
> 
> 赞同：1
> 
> 时间：2012-07-04T19:27:46.537
> 
> 标签：c#, asp.net-mvc, file-upload

我正在尝试实现一个简单的文件上传，但遇到了一些麻烦。当我对路径进行硬编码时，它工作正常。但是由于某种原因，当我尝试使用文件上传时，控制器名称被附加到路径中

硬编码路径（我想要得到的）：

```
@"C:\Users\Scott\Documents\The Business\MasterSpinSite\MasterSpin\MasterSpin\LOADME.txt" 
```

路径我遇到异常（注意“appz”控制器名称）：

```
C:\Users\Scott\Documents\The Business\MasterSpinSite\MasterSpin\MasterSpin\appz\LOADME.txt' 
```

我的控制器

```
public ActionResult Load(spinnerValidation theData, HttpPostedFileBase file)
    {

        if (file.ContentLength > 0)
        {

            string filePath = Request.MapPath(file.FileName);

            string input = System.IO.File.ReadAllText(filePath);
            string[] lines = Regex.Split(input, "#!#");
           // ...... do stuff

        } 
```

我的观点

```
<form action="" method="post" enctype="multipart/form-data">

  <label for="file">Filename:</label>
  <input type="file" name="file" id="file" />

<input type="submit" value="LOAD ME!">

 </form> 
```

什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:50:47.923

You can save yourself the effort of the streams:

```
string filename = Request.Files["file"].FileName;
string filePath = Path.Combine(Server.MapPath("~/YourUploadDirectory"), filename);

HttpPostedFileBase postedFile = Request.Files["file"] as HttpPostedFileBase;
postedFile.SaveAs(filePath);

string input = File.ReadAllText(filePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:03:54.330

尝试这个：

```
public ActionResult Load(spinnerValidation theData, HttpPostedFileBase file)

    if (file.ContentLength > 0)
    {
        var filePath = System.IO.Path.GetFileName(file.FileName);
        using (System.IO.StreamReader sr = new System.IO.StreamReader(filePath))
        {
            var input = sr.ReadToEnd();
            var lines = Regex.Split(input, "#!#");
        }
    }
} 
```

**(bug)** `System.IO.Path.GetFileName(file.FileName)`返回文件名

**编辑**

改变`System.IO.Path.GetFileName(file.FileName)`为`Server.MapPath(file.FileName)`

```
public ActionResult Load(spinnerValidation theData, HttpPostedFileBase file)

    if (file.ContentLength > 0)
    {
        var filePath = Server.MapPath(file.FileName);
        using (System.IO.StreamReader sr = new System.IO.StreamReader(filePath))
        {
            var input = sr.ReadToEnd();
            var lines = Regex.Split(input, "#!#");
        }
    }
} 
```

**编辑二**

或复制到不同的路径：

```
public ActionResult Load(spinnerValidation theData, HttpPostedFileBase file)

    if (file.ContentLength > 0)
    {
        var fileName = System.IO.Path.GetFileName(file.FileName);
        var fileUpload = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
        file.SaveAs(fileUpload);
        if (System.IO.File.Exists(fileUpload)) 
        {
            using (System.IO.StreamReader sr = new System.IO.StreamReader(fileUpload))
            {
                var input = sr.ReadToEnd();
                var lines = Regex.Split(input, "#!#");
            }
        }
    }
} 
```

# opencv - 如何在 opencv 项目中嵌入 flash (.swf) 文件？

> ID：11334520
> 
> 赞同：-2
> 
> 时间：2012-07-04T19:27:52.740
> 
> 标签：opencv, flash, embed

我有一个 .swf 文件，我想将其嵌入到我的 opencv 中并覆盖在相机流上并将其显示给用户。到目前为止，我还没有通过简单的谷歌搜索找到解决方案。如果有人知道如何解决这个问题，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:49:56.113

**OpenCV doesn't deal with .swf files**, so you need to use some other technology like [FFMPEG](http://ffmpeg.org/) or [GStreamer](http://gstreamer.freedesktop.org/) to retrieve the frames and decode them to BGR to be able to create a valid `IplImage` (or `cv::Mat` if you are insterested in the C++ interface).

GStreamer also provides a simple mechanism to [stream video over the network](http://blog.abourget.net/2009/6/14/gstreamer-rtp-and-live-streaming/).

# mysql - 在 mysql date_format 中使用 php 日期格式

> ID：11334522
> 
> 赞同：-2
> 
> 时间：2012-07-04T19:28:00.807
> 
> 标签：mysql

是否可以在 mysql SELECT 中格式化日期，其中格式基于 php Date 函数。

我有一个 mysql 日期列，我想运行一个查询，它将以 php 日期格式（d/m/y）返回日期？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:35:47.817

尝试使用`DATE_FORMAT`这样的功能：

`DATE_FORMAT(NOW(),'%d/%m/%Y')`

# javascript - Object 作为字典的安全性真的有标准保证吗？

> ID：11334526
> 
> 赞同：1
> 
> 时间：2012-07-04T19:28:17.200
> 
> 标签：javascript, security

```
var x = Object.create(null);
x["hello"] = "world"; 
```

但是我可以允许未经验证的用户输入作为键吗？我想将其用作玩家名称 -> 玩家对象地图。玩家名称将仅受长度 32 的限制。我担心是否有特殊的属性键可以让玩家获得对服务器的控制权。

编辑：我没有制作网络服务器。JavaScript 将通过嵌入游戏服务器的 SpiderMonkey 在服务器端运行。如果有人劫持了在那里运行的 JavaScript，他们可能会毁掉游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:33:50.830

**属性键始终是字符串。**您永远不会遇到任何属性名称的问题，除了可能：

*   [`Object.prototype.hasOwnProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/HasOwnProperty). 例如在：

    ```
    var obj = {hasOwnProperty:'fail'};
    for (var i in obj) {
        if (obj.hasOwnProperty(i)) ; // ...
    } 
    ```

    这可以通过使用`Object.keys(obj).forEach( ... )`或解决：

    ```
    for (var i in obj) {
        if (Object.hasOwnProperty.call(obj, i)) ; // ...
    } 
    ```

*   唯一的危险是由您处理对象的方式引起的。前面的例子不是一个不常见的用法`hasOwnProperty`，但是它*可以*用来破坏你的脚本，因为你不期望键名`hasOwnProperty`。这同样适用于`.toString`或对象的任何其他属性，这些属性可以通过设置新名称来覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:42:38.673

一言以蔽之：不，只记得[Google Docs`__proto__`失败了](http://productforums.google.com/forum/#!topic/docs/0hQWeOvCcHU)

您应该使用`Hash`-like 类，或者至少访问这些前缀为：

```
var hash = {}, key = "something-evil", value = Math.PI;
hash["$" + key] = value;
console.log( hash["$" + key] == value ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:31:01.957

不，一个对象基本上是一张白板，没有特殊的键。最重要的是，即使有人入侵了您的 Javascript，他们也不太可能控制您的服务器，除非您使用*非常*松散的安全策略（例如将 root 密码放入您的 Javascript 中或类似的傻事）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:33:29.937

您无法控制将发送到 Web 服务器的内容。完全没有。曾经。

因此，您需要限制服务器将执行的操作，以响应发送给它的任何内容。其中一部分是验证所有用户输入，即使它是表示由您的代码创建的 JavaScript 对象的 JSON。

# android - Android：画布动画最好有1个大线程，或者多个小线程

> ID：11334529
> 
> 赞同：1
> 
> 时间：2012-07-04T19:28:41.747
> 
> 标签：android, multithreading, memory-management, drawing, android-canvas

我制作了一个应用程序，它会触发不同的小动画，例如坠落的旋转星或类似从下到上浮动的文本，在表面视图上使用画布进行动画处理

一旦被触发，它们都是不变的，所以我计划了 2 种方法，1 是一个处理所有动画的大线程，每个动画 1 后更新 1

或为每种动画（例如流星）设置自己的线程，并且在每个给定点，主要活动都可以在其中一个线程上执行命令，创建他并启动，然后忘记他，让他在后台运行，并且在动画结束时该线程将自行结束。

所以我不必担心存储每个触发的线程等，因为我不知道在给定时间可以启动多少个线程。

那么触发随机的小短线程或有1个大线程来处理这一切会更有效吗？它会更顺利更好地工作吗？

动画只是为了视觉魅力而没有做任何其他事情，它也不会与其他动画交互，它只是开始、循环、结束。

我希望你明白：\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:57:29.393

您可能想要一个[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)用一个线程处理您的所有绘图。每个动画有一个线程似乎过于复杂。您当然可以为每种动画类型设置一个*方法*`renderStars()`，例如,`renderText()`等，只要您的一个动画线程渲染，就会调用这些方法。

推荐阅读：

*   SurfaceView[文档](http://developer.android.com/reference/android/view/SurfaceView.html)
*   [Canvas and Drawables API Guide](http://developer.android.com/guide/topics/graphics/2d-graphics.html#on-surfaceview) - 我已经链接到“ On a SurfaceView”部分，但您可能应该阅读大部分文档。
*   [Lunar Lander 示例应用程序](http://developer.android.com/tools/samples/index.html)- 在 Google 最近修改了他们的开发者网站之后，在线代码目前是 404-ing，但是这个链接显示了在 SDK 管理器中的哪里可以找到代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:39:05.870

在动画期间，您将不得不更新您的 UI，`UI Thread`因为您不能使用不同的线程来运行动画。但是，对于密集动画，您必须使用`Gaming Engine`或编写自己的`Game Thread`，这将首先根据动画公式更新对象的数据，然后在 上绘制它们`UI thread`。

# c# - 通过 C# 登录到站点

> ID：11334540
> 
> 赞同：-4
> 
> 时间：2012-07-04T19:29:13.970
> 
> 标签：c#, login, automation

我在登录网站时遇到问题，这是我的代码（Visual Studio 2010，表单应用程序）（我也是新手）

我应该在表格中添加什么？我试图做到，但我做不到。

```
HttpWebRequest request;
HttpWebResponse response;
CookieContainer cookies;

string url = string.Format("http://extabit.com/login.jsp.login={0}&passwd={1}", cboUserName.Text, txtPassWord.Text);
request = (HttpWebRequest)WebRequest.Create(url);
request.AllowAutoRedirect = false;
request.CookieContainer = new CookieContainer();
response = (HttpWebResponse)request.GetResponse();
if (response.StatusCode != HttpStatusCode.Found)
{
//ToDo: if the page wasn't found raise Exception
//instead of this textmessage
MessageBox.Show("Something Wrong");
response.Close();
request.KeepAlive = false;
return;
}
cookies = request.CookieContainer;
response.Close();
request = (HttpWebRequest)WebRequest.Create(http://extabit.com);
request.AllowAutoRedirect = false;
request.CookieContainer = cookies;
response = (HttpWebResponse)request.GetResponse();
using (Stream s = response.GetResponseStream())
{
StreamReader sr = new StreamReader(s);
string line;
while (!sr.EndOfStream)
{
//todo read the page contents
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:38:15.210

您忘记添加命名空间。

您需要包括`System.IO`和`System.Net`。

在文件顶部添加两个 using 语句

```
using System.IO;
using System.Net; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:40:49.983

这不是一个答案，而是更多的建议 - 我强烈建议您避免通过查询字符串传递用户名和密码。您使用服务器控件中的“.Text”这一事实强烈表明它们甚至没有加密。

# iis-7.5 - 无法连接到 nuget 提要

> ID：11334543
> 
> 赞同：0
> 
> 时间：2012-07-04T19:29:38.050
> 
> 标签：iis-7.5, nuget-server

我尝试使用私人 nuget 提要，所以我已经从指令的第二部分开始：http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds[但是](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds) 当我尝试从 Visual Studio 连接到此提要我收到消息：“无法连接到在 'http://localhost:90/nuget/' 指定的提要。请验证包源（位于包管理器设置中）是否有效并确保您的网络连接。” 任何人都可以遇到熟悉的问题吗？我在 IIS 7.5、Windows 7、nuget.server 版本 2.0.1 中托管它

实验上，我已将目录添加为 nuget 提要位置，并且工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:54:20.210

我找到了解决方案。当我在 Visual Studio 中更新 nuget 包管理器时，一切正常。

# perl - 为什么我需要在使用 eval 之前本地化 $@？

> ID：11334558
> 
> 赞同：6
> 
> 时间：2012-07-04T19:30:37.130
> 
> 标签：perl, exception, eval, die

我知道这`$@`是一个全局变量，但我仍然无法弄清楚为什么我需要在使用[eval](http://perldoc.perl.org/functions/eval.html)之前对其进行本地化：

例如：

```
eval { SOME_FUNC_THAT_MAY_DIE(); };
if ($@) {
  print "An error occured!\n";
} 
```

我能想到的唯一可能的事情是，如果某个信号处理程序会`die`在我尝试读取的同时调用，`$@`我在这里错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T19:50:04.757

`local $@`打电话前说的原因`eval`是为了避免踩到你的来电者的`$@`。子程序更改任何全局变量是不礼貌的（除非这是子程序的既定目的之一）。对于顶级代码（不在任何子例程中），这并不是真正的问题。

此外，在较旧的 Perl 上，除非首先本地化，否则`eval`在对象销毁期间调用的任何调用都会破坏全局（如果由于从块`$@`中抛出异常而导致对象被销毁）。这已[在 5.14.0 中修复](http://perldoc.perl.org/perl5140delta.html#Exception-Handling)，但许多人仍在运行旧版 Perls。`eval``$@`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-04T19:47:04.073

[Try::Tiny](https://metacpan.org/module/Try::Tiny)模块文档给出了基本原理（并提供了替代方案）：

> 当您运行 eval 块并且它成功时，$@ 将被清除，可能会破坏当前正在捕获的错误。这会导致远处的动作，清除调用者可能尚未处理的先前错误。$@ 必须在调用 eval 之前正确本地化以避免此问题。更具体地说，$@ 在 eval 开始时被破坏，这也使得在你死之前无法捕获先前的错误（例如，当使用错误堆栈创建异常对象时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T21:57:44.543

您不需要，但如果您编写这样的代码，本地化 $@ 将使第一个错误保持原样。如果您没有编写这样的代码，则本地 $@ 将无效。更好的是在运行任何额外代码之前处理错误。

```
eval {
    die "error 1\n";
};
foo();
print "processing $@\n";

sub foo {
    #local $@;
    eval {
        die "error 2\n";
    };
} 
```

# c# - 将 Kinect 的彩色相机视频流保存为 .avi 视频

> ID：11334560
> 
> 赞同：5
> 
> 时间：2012-07-04T19:30:44.803
> 
> 标签：c#, wpf, kinect

我想将 Kinect 的彩色相机捕获的视频流保存为 .avi 格式的视频，我尝试了很多方法，但都没有成功。有没有人成功做到这一点？我正在使用 Kinect for Windows SDK 和 WFP 进行应用程序开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:52:55.333

我想最简单的解决方法是使用像[http://camstudio.org/](http://camstudio.org/)这样的屏幕捕捉软件。

她也有同样问题的帖子： [Kinect 在 C# WPF 中录制视频](https://stackoverflow.com/questions/9039027/kinect-recording-a-video-in-c-sharp-wpf)

据我了解，您需要将 kinect 传递的单帧保存到视频文件中。这篇文章应该解释如何做到这一点[如何在 WPF 中从原始帧渲染视频？](https://stackoverflow.com/questions/1232550/how-to-render-video-from-raw-frames-in-wpf).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T20:55:03.150

您可以通过互操作使用 AVIFile Windows API：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd756808 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd756808(v=vs.85).aspx)

或者你可以使用像这样的包装器，由 Corina John [http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library完成](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

# jquery - 编辑器 Js | 所见即所得的jQuery | 火狐上的错误

> ID：11334564
> 
> 赞同：1
> 
> 时间：2012-07-04T19:31:03.683
> 
> 标签：jquery, firefox, wysiwyg

我使用所见即所得的 Redactor js (wysiwyg jquery)，但我遇到了 firefox 的问题。 [http://redactorjs.com/](http://redactorjs.com/) 当我像这样运行插件时

```
$ ('# news_content'). redactor ({focus: true}); 
```

萤火虫给我这个错误：

```
Returned Component failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMHTMLDocument.execCommand]
this.doc.execCommand ("useCSS", false, true); 
```

它在 Chrome、IE、Opera 上运行良好，但在 firefox 上运行良好对我的问题有什么想法吗？非常感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:47:25.770

~~确保您已将该语句包装在一个准备好的处理程序中，如下所示：~~

 ~~```
$(function(){
    $ ('# news_content'). redactor ({focus: true});
}); 
```~~  ~~这是由 Ajax 安全策略引起的。

[组件返回故障码：0x80004005](https://stackoverflow.com/q/5075710/221061)

和

[组件返回故障码：0x80004005](https://stackoverflow.com/q/2743147/221061)

都是描述问题的两个问题。~~

# symfony - 无法从“/app/config/config.yml”导入资源>“app/config/security.yml”

> ID：11334565
> 
> 赞同：0
> 
> 时间：2012-07-04T19:31:05.573
> 
> 标签：symfony

我收到此错误：

> FileLoaderLoadException：无法从“/app/config/config.yml”导入资源“app/config/security.yml”。

文件 security.yml 位于正确的路径上。这是我的 security.yml 文件：

```
jms_sapp/confiapp/config/security.yml
    secure_all_services: false
    exprapp/confiapp/config/security.yml

security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            memory:
                users:
                    user:  { password: userpass, roles: [ 'ROLE_USER' ] } 
                    admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] } 

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/demo/secured/login$
            security: false

        secured_area:
            pattern:    ^/demo/secured/
            form_login:
                check_path: /demo/secured/login_check
                login_path: /demo/secured/login
            logout:
                path:   /demo/secured/logout
                target: /demo/
            #anonymous: ~
            #http_basic:
            #    realm: "Secured Demo Area"

    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal/secure, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:13:49.343

正如@Sgoettschkes 所指出的，这三行显然在这里存在问题。它们不符合 YAML 语法标准。我第二个问题：你想用他们实现什么？尝试删除它们，我 100% 确定这个错误会消失。

我强烈建议您使用一个好的 IDE，它会为您突出显示 YAML 代码，以防您尚未使用 IDE（我个人使用 NetBeans，它可以很好地处理 YAML 文件）。像这样的语法错误很常见，也很容易发现。

# jquery - jQuery将元素存储在变量中

> ID：11334566
> 
> 赞同：0
> 
> 时间：2012-07-04T19:31:13.010
> 
> 标签：jquery

我有下面的代码，当单击列表项时会发生动画。

我遇到的问题是再次单击时使列表项反转动画效果。

我正在尝试将单击的列表项存储在变量中，但由于我的变量从不存储元素详细信息而遇到问题？

可能有更好的方法可以做到这一点，但任何帮助或建议都会很棒？

```
 <ul class="circles">
     <li class="c-1"><div class="c-1-active">Text Link</div></li>
     <li class="c-2"><div class="c-1-active">Text Link</div></li>
     <li class="c-3"><div class="c-1-active">Text Link</div></li>
  </ul>

$('#home ul.circles li').click(function() {
    alert(testing);
    if(testing > "" || testing == $(this).find('div'))
    {
        testing.animate({opacity: 0, top:'180px'}, 1000 );
    }
        $(this).find('div').animate({opacity: 0.8, top:'0'}, 1000 );
        var testing = $(this).find('div');

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:38:50.733

你想要[**切换**](http://api.jquery.com/toggle-event/)功能：

```
$('#home ul.circles li').toggle(function() {
    $(this).find('div').stop().animate({opacity: 0, top:'180px'}, 1000 );
},function() {
    $(this).find('div').stop().animate({opacity: 0.8, top:'0'}, 1000 )
}); 
```

**更新：**根据您的评论，这个解决方案应该更可取：

```
$('#home ul.circles li').click((function(){
    var prevElement = null;
    return function(){            
        //Hiding previously active element
        prevElement && $(prevElement).stop().animate({opacity: 0, top:'180px'}, 1000);

        var curElement = $(this).find('div').get(0);
        $(curElement).stop().animate({opacity: 0.8, top:'0'}, 1000);
        prevElement = curElement;
    };
})()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:39:35.293

问题是为什么永远不会调用该变量，因为您在“点击”事件处理程序的范围内定义了一个新变量。你能做的，是这样的：

将此行添加到~~全局范围~~一个封闭的`closure`像`$.ready()`：

```
var testing = null; 
```

并替换这一行：

```
 var testing = $(this).find('div'); 
```

有了这个：

```
 testing = $(this).find('div'); 
```

但正如评论中所述，您应该使用一个类来为元素提供状态。而且您可以使用**.toggleClass()**之类的函数轻松更改状态。

**编辑**

根据评论中的要求，只有一个人会处于“活动”状态，这将是一个简单的解决方案：

JavaScript：

```
<script>

$(document).ready(function () {

    var circles = $('#home ul.circles li');
    var current = 0;

    circles.click( function(event) {

        var position    = circles.index( $(event.target).parent() );

        if ( current != position ) {

            circles.eq(current).animate( { opacity: 0.5 }, 1000 );  
            current = position;
            circles.eq(current).animate( { opacity: 1 }, 1000 );
        }

        event.preventDefault();

    });

});

</script> 
```

CSS：

```
<style>

    #home ul.circles > li {
        opacity:        0.5;
    }

    #home ul.circles > li.c-1 {
        opacity:        1.0;
    }

</style> 
```

HTML：

```
<div id="home">
    <ul class="circles">
        <li class="c-1"><div class="c-1-active">Text Link</div></li>
        <li class="c-2"><div class="c-1-active">Text Link</div></li>
        <li class="c-3"><div class="c-1-active">Text Link</div></li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:41:27.580

一种方法是添加一个类`clicked`

这应该很好用：

```
$('#home ul.circles li').click(function() {
    alert(testing);
    if($(this).hasClass('clicked')) {
        $(this).find('div').animate({opacity: 0, top:'180px'}, 1000 );
        $(this).removeClass('clicked');
    } else {
        $(this).find('div').animate({opacity: 0.8, top:'0'}, 1000 );
        $('.clicked').removeClass('clicked');
        $(this).addClass('clicked');
    }
}); 
```

# r - 如何从对象的 r 向量中获取值到向量中？

> ID：11334567
> 
> 赞同：0
> 
> 时间：2012-07-04T19:31:23.640
> 
> 标签：r, vector

我想不出如何给这个命名，我所拥有的是由这种形式的函数（特别是 midPci）生成的对象向量：

```
$conf.int
[1] 0.4726 0.6466
attr(,"conf.level")
[1] 0.95

$conf.int
[1] 0.1181 0.2566
attr(,"conf.level")
[1] 0.95 
```

我想要做的是将 的两个值剥离`$conf.int`成向量，给出上置信区间和下置信区间。显然我可以通过循环来做到这一点，但我认为可能有更好的方法来做到这一点？

```
CIs <- structure(list(conf.int = structure(c(0.4696, 0.6501), conf.level = 0.95), 
 conf.int = structure(c(0.5266, 0.7081), conf.level = 0.95), conf.int = structure(c(0.4441, 
 0.6196), conf.level = 0.95), conf.int = structure(c(0.4181, 0.5891), conf.level = 0.95), 
 conf.int = structure(c(0.4726, 0.6466), conf.level = 0.95), conf.int = structure(c(0.1181, 
 0.2566), conf.level = 0.95), conf.int = structure(c(0, 0.000748652688017826), conf.level = 
 0.95)), .Names = c("conf.int", "conf.int", "conf.int", "conf.int", "conf.int", "conf.int", 
 "conf.int" )) 
```

如果不清楚我的意思，我已经这样做了：

```
# Calculate CIs
CIs <- mapply(midPci, k, n, conf.level=0.95) 
```

我可以通过做`CIs[1]$conf.int[1]`等来获得我所追求的个人价值观，但我想一口气把所有的东西都拿出来。我可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:00:18.807

这会产生一个矩阵：

```
do.call(rbind, CIs)

           [,1]         [,2]
conf.int 0.4696 0.6501000000
conf.int 0.5266 0.7081000000
conf.int 0.4441 0.6196000000
conf.int 0.4181 0.5891000000
conf.int 0.4726 0.6466000000
conf.int 0.1181 0.2566000000
conf.int 0.0000 0.0007486527 
```

这也会产生一个矩阵，尽管它是“宽版本”。`c`应用于向量的函数只返回自身，您可以使用`as.vector`or`I`并获得相同的结果。真正起作用`simplify2array(CIs)`的是被调用的函数`sapply`：

```
 sapply(CIs, "c")
     conf.int conf.int conf.int conf.int conf.int conf.int     conf.int
[1,]   0.4696   0.5266   0.4441   0.4181   0.4726   0.1181 0.0000000000
[2,]   0.6501   0.7081   0.6196   0.5891   0.6466   0.2566 0.0007486527 
```

如果我们使用过，`do.call(cbind, CIs)`我们也会得到“宽版本”。

# javascript - 回溯 JavaScript 源代码中的表达式

> ID：11334575
> 
> 赞同：1
> 
> 时间：2012-07-04T19:32:31.120
> 
> 标签：javascript, python, parsing, static-analysis

*抱歉标题，找不到更好的。*

假设我们有那个 JavaScript 代码字符串：

```
var n = Math.floor(Math.random() * 10),
    className;

if (n === 1) {
    className = "a";
} else if (n === 2) {
    className = "b";
} else {
    className = "c";
}

document.querySelector("." + className); 
```

这个想法是我想将所有可能的字符串发送到那个特定的函数（`document.querySelector`）。所以我想得到`['.a', '.b', '.c']`. 还可能涉及多个变量，在代码中修改了多次，因此列表会更长。

现在我如何在 Python 中做到这一点？我看过 PyV8 但没有文档，所以这不是一个选项；对于已经过时的 python-spidermonkey 也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:38:52.710

这不是一个容易的问题。您正在寻找[静态代码分析](https://en.wikipedia.org/wiki/Static_program_analysis)以通过您的函数生成所有可能的路径。考虑以下代码并问自己如何确定警报是否会运行：

```
var n = Math.floor(Math.random() * 10),
if (Math.sqrt(n) > n) {
    alert('a');
} 
```

计算机不“知道”它`Math.sqrt(n)`总是小于`n`. 如果不运行代码，我如何确定警报不会出现？

在简单的情况下，库可能能够做到这一点，但是当您的函数有许多可能的路径并利用许多函数时，您需要进行大量分析才能获得正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:57:52.663

好吧，您可以采用蒙特卡罗方法：记录传递给`document.querySelector`的所有参数并针对各种输入运行代码。

# javascript - 在 Javascript 中使用警报时出错（对象的属性“警报”不是函数）

> ID：11334581
> 
> 赞同：14
> 
> 时间：2012-07-04T19:33:01.233
> 
> 标签：javascript, jquery, alert, typeerror

我只是想使用警报并将一个字符串变量放入警报中并得到一个错误：

```
Uncaught TypeError: Property 'alert' of object [Object Window] is not a function 
```

我的代码是：

```
var shortenurl = msg.d;
alert(shortenurl); 
```

我检查了这个值，它里面有一个字符串，而不是一个对象。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-04T19:34:01.923

在您的代码中某处您覆盖了`alert`. 检查`var alert = ...`或其他类似的声明。还要检查`window.alert`声明。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-24T12:12:18.963

`alert()`由于我的弹出窗口阻止程序阻止，我收到了该错误消息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T23:37:17.447

我正在添加这个作为补充。就我而言，当我遇到类似的问题时，结果不是我自己的代码导致了问题，而是添加到客户端浏览器中的一个编写不佳的扩展。一旦它被禁用，脚本错误就消失了。

如果您没有在任何地方覆盖您自己代码中的方法名称，您可能需要尝试禁用扩展以查看是否有任何扩展无意中干扰了您的脚本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-25T12:54:30.093

如果需要（在 jQuery 之后），请检查您是否有 Bootstrap .js 声明，即

```
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-20T14:27:19.270

**Mozilla 说，**

```
The alert function is not actually a part of JavaScript itself. 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript)

您在这里看不到名为 alert 的函数：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-07T16:06:51.187

添加到克里斯的答案......我在自己的功能中错误地覆盖了警报！

```
 //Don't do this:
    function alertOrConsole(node, alert){
        if(alert){
            alert(node);
        }else{
            console.log(node);
        }
    } 
```

* * *

```
 //----------------------------
   //Fixed:
    function alertOrConsole(node, flag){
        if(flag){
            alert(node);
        }else{
            console.log(node);
        }
    } 
```

# sql - sqlmap太慢了

> ID：11334582
> 
> 赞同：4
> 
> 时间：2012-07-04T19:33:13.280
> 
> 标签：sql, sql-injection, sqlmap

这是一个例子。只是试图列出数据库：

`python sqlmap.py -u "http://somesite.com/?id=1" --dbs`

```
[15:20:32] [INFO] fetching database names
[15:20:32] [INFO] fetching number of databases
[15:20:32] [WARNING] time-based comparison needs larger statistical model. Making a few dummy requests, please wait..
[15:20:39] [WARNING] it is very important not to stress the network adapter's bandwidth during usage of time-based queries
2
[15:20:55] [INFO] adjusting time delay to 2 seconds due to good response times
2
[15:20:58] [INFO] retrieved: 100_MYDB
[15:22:39] [INFO] retrieved: DEV_GC_DATASTORAGE
[15:26:15] [INFO] retrieved: GC_ 
```

您可以在时间戳中看到列出 1 个数据库名称大约需要 3 分钟，它一个字符一个字符地进行，每个字符大约需要 7 秒。我在 youtube 上看到的教程非常快……我能做些什么来加快速度？我试过弄乱 .conf

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:48:24.077

您还可以使用 -o 开关进行一些优化。也试试 --technique=BEUS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T20:38:16.300

somesite.com 的网络延迟是多少？您可以通过简单地执行 ping somesite.com 来检查这一点。如果延迟很高，那么在逐个字符测试时，执行盲注 SQL 会很慢。– rgerganov 7 月 4 日 19:43

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T08:49:34.590

使用更多线程。默认值为 1：

```
 --threads=THREADS
          Max number of concurrent HTTP(s) requests (default 1) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-11T18:39:37.523

您可以像这样使用快速响应。sqlmap -u " [http://somesite.com/?id=1](http://somesite.com/?id=1) " --time-sec 15

# php - 为什么这个正则表达式会导致：“preg_match() ...没有结束分隔符'^'”？

> ID：11334591
> 
> 赞同：0
> 
> 时间：2012-07-04T19:34:33.213
> 
> 标签：php, regex, wamp

我正在编写一个正则表达式来从字符串中提取数字模式。当我曾经运行下面的代码片段时，它显示了一个警告

```
"preg_match() [<a href='function.preg-match'>function.preg-match</a>]: No ending delimiter '^' " 
```

谁能告诉我为什么这个警告以及如何解决它？

```
$temp=0;
$exp=(explode(" ",$message1));
while($temp<sizeof($exp))
{
    if(preg_match("^(+91|0091|0)?[7-9][0-9]{9}$",$exp[$temp]))
    {
    $pat=$exp[$temp];

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:37:26.823

您忘记了正则表达式分隔符，请改用它（`/`在正则表达式的开头和结尾插入）：

```
if(preg_match('/^(+91|0091|0)?[7-9][0-9]{9}$/', $exp[$temp])) 
```

您收到错误的原因是 PHP 允许使用*任何*分隔符。在您的情况下，它使用它，`^`因为这是您的字符串中的第一个字符。但是，这显然不起作用，因为它从未找到另一个插入符号来结束正则表达式。无论如何，使用`^`将是一个坏主意，因为它在正则表达式本身中具有意义。

# sql - SQL删除具有相同属性的多个

> ID：11334593
> 
> 赞同：0
> 
> 时间：2012-07-04T19:34:38.333
> 
> 标签：sql, triggers

嗨，我正在研究一个触发器，当新插入的数据（地址、列表编号、日期、价格）具有类似的元组时，该触发器将不允许插入/更新。

条件 - 一个列表不能在同一天列出两次表 123，1992 年 6 月 19 日 123，1990 年 6 月 20 日插入：123，1990 年 6 月 20 日 - 不能在表中工作

我的代码的唯一问题是当我的列表表没有数据开始时我无法让它工作

```
create or replace TRIGGER same_prop_listed BEFORE INSERT OR UPDATE  ON HasListing
FOR each ROW
DECLARE
    c_date VARCHAR2(20);
BEGIN
    SELECT LISTING_DATE
    INTO c_date
    FROM HasListing
    WHERE PROP_ADDRESS = :NEW.prop_address;
    IF (c_date = :NEW.listing_date) THEN
    RAISE_APPLICATION_ERROR(-20001,'Cannot list same property twice in  one day!');
    END IF;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RAISE_APPLICATION_ERROR(-20003,'No DATA');

END; 
```

这是在甲骨文中。所以我的错误是 - IF (c_date = :NEW.listing_date) 因为 c_date 为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:25:53.173

为什么不放一个多列唯一约束？

> ALTER TABLE YOUR_TABLE 添加约束 UNI_CONSTR UNIQUE (COL1, COL2, COL3);

?

# c - 比较字符串 C 的长度

> ID：11334595
> 
> 赞同：3
> 
> 时间：2012-07-04T19:34:49.100
> 
> 标签：c, string

我在比较 C 中的字符串时遇到了麻烦。首先，我需要从命令行参数中找到每个字符串的长度，然后比较它们并打印最大的字符串。

到目前为止，它只是打印每个输入字符串的长度。我需要根据长度而不是字母顺序来比较它们。

我不明白为什么它现在可以工作以及我应该怎么做才能解决它？谢谢！

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
    int i, length;

    for(i = 0; i<argc; i++)
    {
        length = strlen(argv[i]);
        printf("%s %d\n", argv[i], length);

        if(strlen(argv[i]) < strlen(argv[i+1]))
        {
            printf("%s is the biggest \n", argv[i+1]);
        }
        else
        {
            printf("%s is the biggest \n", argv[i]);
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T19:39:08.200

您的代码存在一些问题。

首先，`argv[i+1]`如果您`i < argc`在`for`. 您需要`i < argc`在`i < argc - 1`.`for`

其次，您可能没有比较您想要的字符串。`argv[0]`是代表程序路径的字符串；传递给程序的第一个参数是`argv[1]`. 因此，您需要将 `i = 0`中的更改`for`为`i = 1`。

最后，如果您**只**想要最大的字符串，则不应在`for`循环中进行任何打印。相反，您应该创建两个变量，例如`max_length`，`max_length_idx`您将在哪里存储迄今为止找到的最大字符串的长度和索引。然后，在`for`循环之后，您的程序将打印出 string `argv[max_length_idx]`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T19:42:53.460

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
   int i, max_length, max_index;

   max_index = 0;
   max_length = strlen(argv[0]);

   for(i = 1; i < argc; i++)
   {
        if(strlen(argv[i]) > max_length)
        {   
            max_length = strlen(argv[i]);
            max_index = i;
        }
    }

   printf("The longest is: %s with length equal: %d\n", argv[max_index], max_length);

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:47:21.037

这不会出现段错误...

```
#include <stdio.h>
#include <string.h>

int main(int argc, char *argv[])
{
    int i, length;

    for(i = 0; i<argc - 1; i++)
    {
       length = strlen(argv[i]);
       printf("%s %d\n", argv[i], length);

    if(strlen(argv[i]) < strlen(argv[i+1]))
    {
       printf("%s is the biggest \n", argv[i+1]);
    }
    else
    {
       printf("%s is the biggest \n", argv[i]);
    }
   }
 return 0;
 } 
```

# c++ - 创建派生类实例时提供基类构造函数参数

> ID：11334598
> 
> 赞同：1
> 
> 时间：2012-07-04T19:35:26.190
> 
> 标签：c++, constructor, polymorphism, new-operator, parent-child

有没有办法在新建派生类实例时为基类提供构造函数参数？（即当基类构造函数对这些参数有默认值时）

例如

```
class Base
{
public:
 Base::Base( string name = "" )
 : m_name( name ) {};

private
 string m_name;
};

class Derived : public Base
{
public:
 Derived::Derived() {};
}; 
```

然后我需要做这样的事情：

```
void main()
{
 Base* instance = new Derived( "Jeff" );
}; 
```

这显然是行不通的。有没有一种方法可以新建派生实例并为其基类提供构造函数参数，而不必在派生类构造函数中提供该参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:37:34.337

> 有没有一种方法可以新建派生实例并为其基类提供构造函数参数，而不必在派生类构造函数中提供该参数。

不。

您的派生类构造函数需要接受参数，并将它们显式传递给基类构造函数。

```
class Derived : public Base
{
public:
 Derived::Derived(string name) : Base(name) {};
}; 
```

无论您是否使用，情况都是`new`如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:58:57.353

如果你想在基类中使用不同的名称，你就不能这样做。但是不同的名称不是标准，您可以使用传递常量文字来做到这一点：

```
class Base
{
public:
 Base::Base( string name = "" )
 : m_name( name ) {};

private
 string m_name;
};

class Derived : public Base
{
public:
 Derived::Derived() : Base ("Jeff")    {};
 Derived::Derived(string &name) : Base (name) {};
}; 
```

或将默认值传递给派生类构造函数。

```
class Derived : public Base
    {
    public:
     Derived::Derived(string name = "Jeff") : Base (name) {};
    }; 
```

# jquery-ui - 使用 JQuery 缓慢上下滚动

> ID：11334600
> 
> 赞同：1
> 
> 时间：2012-07-04T19:35:35.347
> 
> 标签：jquery-ui, jquery

我有在 Html 中上下滚动的代码：

```
<div id="Response" class="comment"></div>
<br>
<br>
<br>
<br>
<div class="but4 , text15"><a id="Resp" href="#rp">Answer</a></div> 
```

和 Jquery 中的这段代码：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $("#Resp").click(function () {
        $("html").animate({ scrollTop: $("#Response").offset().top }, 1200);
    });
</script> 
```

但它不工作..我该如何解决这个问题？我想当我点击 answer 时向上滚动并转到 Response div 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:36:38.160

我建议使用 ScrollTo 插件而不是滚动您自己的解决方案：http: [//flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)

演示在这里：[http ://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

您可以轻松指定持续时间： http: [//demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

**编辑**

我们在聊天中提出的解决方案是这样的（不包括`script`标签）：

```
$(function () { 
    $("#Resp").click(function () { 
        $("body").scrollTo($("#Response"), 1200); 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:36:57.790

这取决于浏览器的实现，但你可以让它在 webkit (safari, chrome) 和 firefox 中使用

```
$('html, body').animate({ scrollTop: $("#Response").offset().top }, 1200); 
```

# facebook - google chrome 扩展在加载页面时执行操作不适用于 google 和 facebook

> ID：11334601
> 
> 赞同：0
> 
> 时间：2012-07-04T19:35:43.180
> 
> 标签：facebook, google-chrome-extension, onload

我正在开发一个 chrome 扩展，它在页面加载时执行一些操作，例如警告欢迎我正在使用 Jquery 来检测文档 **。它适用于所有网站，但 facebook 和 google 我需要它与 FB 一起使用** 这里是 manifest.json 文件

```
 {
  "name": "Me",
  "version": "1.0",
  "manifest_version": 2,
  "description": "ME",
  "browser_action": {
    "default_icon": "icon.png",
     "default_popup": "popup.html"
  },
  "permissions": [
    "http://api.flickr.com/"
  ],
  "content_scripts": [
    {
      "matches": ["http://*/*"],
       "js": ["jquery.js", "popup.js"]

    }
  ]
} 
```

这是pop.js

```
jQuery(document).ready(function () {
    console.log("Welcome");
    alert("Welcome");
}); 
```

甚至我不用Jquery直接用JS方法还是不行

```
 alert("Welcome"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:50:50.737

您可能在 Facebook 和 Google 上启用了 HTTPS，您的内容脚本将仅在 HTTP 站点上运行。将“匹配”字段值更改为“<all_urls>”以包含 HTTPS 站点。

# c++ - MSVC++ 使用基本运算符 = 重载作为左值而不是右值？

> ID：11334605
> 
> 赞同：1
> 
> 时间：2012-07-04T19:36:13.527
> 
> 标签：c++, visual-studio-2010, visual-c++, rvalue-reference, lvalue

这是编译器启动画面（用于版本等）：

```
C:\Program Files\Microsoft Visual Studio 10.0\VC>cl.exe
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

usage: cl [ option... ] filename... [ /link linkoption... ] 
```

我有一个基类（这是一个模板），想象它是：

```
template <typename T>
class Base {

    public:

        Base<T> & operator = (const Base<T> &);
        Base<T> & operator = (Base<T> &&);

}; 
```

然后我有一个派生类，它不会`operator =`以任何方式重新实现。

如果我执行以下操作：

```
Derived<int> derived;
derived=Derived<int>(); 
```

在`operator =`第二行调用接受左值的。

如果我进入定义`Derived<T>`并添加以下内容：

```
template <typename T>
Derived<T> & Derived<T>::operator = (Derived<T> && other) {

    Base<T>::operator=(static_cast<Base<T> &&>(other));

    return *this;

} 
```

`operator =`接受右值的 被调用。

即使我还实现了`operator =`which 采用左值（以几乎相同的方式），这种行为仍然存在。

因为没有更好的短语：什么给了？

我是否误解了 C++ 或者这不是它应该如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:29:43.350

摘要：您只需手动定义所需的移动赋值运算符，直到 VS 更新为更完整的 C++11 支持。

* * *

由于您没有声明复制或移动赋值运算符，编译器可能会为您隐式声明和定义它们。然后这些默认实现使用基类复制和移动赋值运算符来复制或移动基类子对象。

然而，移动赋值运算符的隐式声明在许多情况下被抑制，例如，如果类具有用户声明的 copy-ctor、move-ctor、copy-assignment 运算符或 dtor。如果您的班级有任何这些，那么您不会自动获得移动分配运算符。*[**编辑：** Alexandre C. 指出 VS2010 永远不会隐式声明移动赋值运算符或 ctors。]*

如果没有移动赋值运算符`derived=Derived<int>();`，则调用隐式声明/定义的复制赋值运算符，该运算符为 调用复制赋值运算符`Base<T>`，并且`Base<T>::operator = (Base<T> &&)`不调用。

如果您想要移动赋值运算符的默认定义，即使您还需要执行抑制其隐式声明的事情之一，您可以使用新`= default`语法（尽管标准中存在缺陷，这意味着在某些情况下`= default`不会t 实际上为您提供默认定义，但已解决），但是 VS10 不支持`= default`. 您只需手动定义所需的移动赋值运算符，直到 VS 更新为更完整的 C++11 支持。

我认为有了完整的 C++11 支持，最好不要依赖隐式声明，并且那些可以隐式声明的特殊成员函数应该始终显式声明（就`= delete`好像你不想生成一个一样）。隐式声明最初是为了与 C 向后兼容而完成的。显式声明更容易理解，并且由于 C++11 添加了`= default`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:52:04.883

标准 (3337, 12.8.24)。[标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)
如果我们使用 Base::operator =; Base::operator =(Base&&) 将被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T20:52:34.720

**MSVC 从不生成隐式移动构造/赋值**。请参阅[http://msdn.microsoft.com/en-us/library/dd293668.aspx](http://msdn.microsoft.com/en-us/library/dd293668.aspx)。

原因是隐式移动语义在标准制定过程中发生了很多变化，最终共识在 MSVC10 完成时还没有出现。

底线：您必须明确声明您想手动使用的每个移动构造函数/移动赋值运算符。没有`= default`修饰符可以帮助您。这意味着编写大量`swap`成员函数，或者干脆放弃移动语义，除非您 1) 真的需要它们（不可复制的类）或 2) 已经分析了您的代码并需要摆脱副本。

默认复制分配是隐式生成的，这就是你在这里得到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T20:59:21.600

`Base<int>`在这种情况下，只要`Derived<T>`没有任何用户声明的复制操作、移动操作或用户声明的析构 函数，就应该调用 的移动构造函数。`Derived<T>`有一个隐式声明的移动赋值运算符，它将移动基类子对象，包括它的`Base<T>`基类子对象。

但是，Visual C++（从 Visual C++ 2012 RC 开始）不会隐式生成移动操作，因此您会看到执行的是复制而不是移动。如果要聚合或派生可移动类型，并希望聚合或派生类型可移动，则必须定义自己的移动构造函数和移动赋值运算符。

在标准化的最后两年中，移动操作的规范及其隐含声明的环境发生了数次变化。直到 2010 年 2 月，移动操作的隐式声明才被添加到 C++11 中（即，它在 Visual C++ 2010 完成后发生了变化）。在去年 C++11 完成之前，规范又发生了几次变化，这些变化颇具争议。

Visual C++ 2012 也不会隐式生成移动操作。

# scheme - SICP 练习 1.5

> ID：11334611
> 
> 赞同：7
> 
> 时间：2012-07-04T19:37:18.077
> 
> 标签：scheme, sicp

> **练习 1.5。** Ben Bitdiddle 发明了一种测试来确定他所面对的解释器是使用应用顺序评估还是正常顺序评估。他定义了以下两个程序：
> 
> （定义（p）（p））
> 
> （定义（测试 xy）（如果（= x 0）0 y））
> 
> 然后他评估表达式
> 
> （测试 0（p））
> 
> 对于使用应用顺序评估的解释器，Ben 会观察到什么行为？对于使用正常顺序评估的解释器，他会观察到什么行为？

我理解练习的答案；我的问题在于如何解释 (p) 与 p。例如， (test 0 (p)) 导致解释器挂起（这是预期的），但是具有上述定义的 (test 0 p) 立即计算为 0。为什么？

此外，假设我们将定义更改为 (define (p) p)。根据给定的定义，(test 0 (p)) 和 (test 0 p) 都计算为 0。为什么会发生这种情况？为什么解释器不挂起？我正在使用带有 SICP 包的 Dr. Racket。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-04T19:57:19.283

`p`是一个函数。 `(p)`是对函数的调用。

在您的解释器中评估`p`.

```
p <Return>
==>  P : #function 
```

现在评估`(p)`. 确保你知道如何杀死你的翻译！（Racket 博士中可能有一个“停止”按钮。）

```
(p) 
```

请注意，没有任何反应。或者，至少，什么都看不见。解释器正在旋转，消除尾调用（因此，使用接近 0 的内存），调用`p`.

当评估不同的事物时，您应该期待不同的行为`p`。`(p)`

As to your second question : You are defining `p` to be a function that returns itself. Again, try evaluating `p` and `(p)` with your `(define (p) p)` and see what you get. My guess (I am using a computer on which I cannot install anything and which has no scheme) is that they will evaluate to the same thing. (I might even bet that `(eq? p (p))` will evaluate to `#t`.)

# javascript - 创建 Dojo 网格并从数据模型添加对话框

> ID：11334614
> 
> 赞同：0
> 
> 时间：2012-07-04T19:37:25.930
> 
> 标签：javascript, dojo

我正在开发一个应用程序，用户可以在其中对多个数据模型（又名数据库表）执行 CRUD 操作。我正在使用 Dojo，我对这个`dojox.grid`模块非常满意。但是用户还需要添加记录，所以每个表都必须有一个*添加对话框*。

仅给定模型的数据结构，是否有生成 Dojo 网格和*添加对话框的方法/模块？*有点像 的`structure`参数`dojox.grid`，因此网格和添加对话框都具有相同的数据类型、默认值、约束等。当然我可以编写一个自定义小部件来做到这一点，但我正在寻找这里存在的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:58:48.920

答案是，没有这样的模块。您需要构建一个派生对话框。

让我们看看需要什么；

1.  当前网格
2.  网格布局（单元格类型）
3.  名称和标签（结构）

假设 pr-grid 定义了一个“添加内容”按钮，并且该按钮“知道”所述网格的 ID，则其 onClick 函数应在对话框中启动一个表单。

虽然有 dijit.form 小部件，但还有一系列预定义的`cellTypes`，位于`dojox/grid/cells/_base.js`. 让我们制作一个类型和小部件为 1to1 的地图：

```
 var map = [{
        type: 'dojox.grid.cells.Cell',
        dijit: 'dijit.form.TextBox'},
    {
        type: 'dojox.grid.cells.Bool',
        dijit: 'dijit.form.CheckBox'},
    {
        type: 'dojox.grid.cells.Select',
        dijit: 'dijit.form.Select'},
    {
        type: 'dojox.grid.cells.DateTextBox',
        dijit: 'dijit.form.DateTextBox'}
             ]; 
```

在我们的 addContents 函数中，我们将使用 dojox.grid.DataGrid 中的“可编辑”功能。当我们知道有这样的——当然还有一个函数 pr-cell 来生成 DOM。这是任何 cellType 中都存在的*formatEditing*函数。

```
 // for instance
  dojox.grid.cells.Select.prototype.formatEditing( /* value */ "", /* row */ -1); 
```

唯一需要的是构建应在对话框中显示的内容 - 以下使用上述功能并提供适合 dijit 的标记以在 dijit.Dialog 中呈现。

```
function addContents(gridId) {
    var grid = dijit.byId(gridId);
    var contents = ['<form action="MySubmitUrl" data-dojo-type="dijit.form.Form"><table>'];
    dojo.forEach(grid.layout.cells, function(cell, idx) {
        var szHtml = cell.formatEditing("", -1);
        var dijitType = map.filter(function(e) {
            return e.type == cell.declaredClass;
        })[0].dijit;
        var name = grid.structure[0][idx].field;
        var label = grid.structure[0][idx].name;
        var elementMod = ' data-dojo-type="' + dijitType + '" id="' + name + '" name="' + name + '" ';
        contents.push('<tr><td>');
        contents.push('<label for="' + name + '">' + label + ': </label>');
        contents.push('</td><td>');
        contents.push(szHtml.replace(/^([^\ ]*)/, "$1" + elementMod));
        contents.push('</td></tr>');
    });
    contents.push('</table></form>');
    var dialog = new dijit.Dialog({
        content: contents.join("")
    });
    dialog.show();
} 
```

内容很容易样式化，还应该提供一个提交/取消按钮，但我确定你明白了。[运行示例](http://jsfiddle.net/VjCkc/)

让我知道它是如何运行的（没有测试过组合框/日期时间类型）

# powershell - 在 ant build.xml 上设置 PATH 环境变量适用于 cygwin，但不适用于 cmd 或 PowerShell

> ID：11334622
> 
> 赞同：1
> 
> 时间：2012-07-04T19:38:10.900
> 
> 标签：powershell, ant, cygwin, cmd, environment-variables

我试图通过[这个答案](https://stackoverflow.com/q/5607580/174605)在 ant build.xml 上设置 PATH 环境变量。

它适用于 cygwin，但不适用于 cmd 或 PowerShell。

一些信息：

Apache Ant 1.6.5（我知道有一个更新的版本（1.8.4），但出于内部原因我必须使用这个旧版本）

电源外壳 v2.0

cmd v6.1.7601

赛格温 2.774

Windows 7的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T21:24:57.103

您可能需要`exec`在 Windows/cmd 环境中稍微不同地使用该任务。

让我们以 windows 命令`set`为例。`set`将打印环境变量。`exec`运行命令的正常任务`set`可能如下所示：

```
<exec executable="set" outputproperty="set.output">
    <env key="MY_VAR" value="MY_VAL"/>
    <echo message="${set.output}"/>
</exec> 
```

但是使用这种形式的`exec`任务应该会抛出 IOException: *The system cannont find the file specified*。

在 windows cmd shell 下运行 ant 时，`exec`也可以通过 调用任务`cmd`，如下所示：

```
<exec executable="cmd" outputproperty="set.output">
    <arg line="/c set"/>
    <env key="MY_VAR" value="MY_VAL"/>
    <echo message="${set.output}"/>
</exec> 
```

这是等效的命令；实际执行的命令是`cmd /c set`，它`set`在 cmd 子进程中运行。

这是必要的原因只是有点复杂，并且是由于 Win32 定位命令的方式`::CreateProcess`。[ant exec 文档](http://ant.apache.org/manual/Tasks/exec.html)简要解释了这一点。

**请注意**，我没有使用 PowerShell 尝试过其中任何一个，所以我没有经验，如果有的话，会起作用。

在我自己的 ant 构建脚本中，我通常有两个版本的每个目标，需要对 Windows 平台进行特殊处理，`isWindows`测试如下所示：

```
<target name="check-windows">
    <condition property="isWindows">
        <os family="windows"/>
    </condition>
</target> 
```

然后我可以使用以下命令在同一任务的版本之间切换：

```
<target name="my-target-notwindows" depends="check-windows" unless="isWindows>
    ...
</target>

<target name="my-target-windows" depends="check-windows" if="isWindows>
    ...
</target>

<target name="my-target" depends="my-target-notwindows,my-target-windows">
    ...
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:09:57.333

不幸的是，一个与 1.6.5 版本相关的 ant 错误。我能够更新到 1.8.4 并且一切正常。

# php - 将相同选项标签分配给多个选择标签的更有效方法

> ID：11334625
> 
> 赞同：1
> 
> 时间：2012-07-04T19:38:22.920
> 
> 标签：php, html

目前我有多个选择标签，它们具有几乎相同的选项选择，我现在所做的是使用 file_get_contents 来获取选项标签的值并将它们分配给选择标签。但是我想创建一种更有效的方法来执行此操作，因为当我尝试在文件中为 file_get_contents 添加一个 if 条件以过滤掉一些额外的选项标记时，这些选项标记应该只对某些选择标记可用，但它不起作用。所以我想知道最好的方法是什么？

基本上我使用 file_get_contents 来获取包含基本选项标签的文件并将它们分配给选择标签。

谢谢-魔术师

一些代码：

一些.php

```
<option>1</option>
<option>2</option>
... you get the picture 
```

对于其他文件.php

```
<select>
$hello = file_get_contents("some.php");
echo $hello;
</select> 
```

现在，当我在 some.php 中添加条件时，即

if($right=1) { 这仅适用于本页 }

//这不起作用，而是将其显示给所有选择标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:01:53.820

在我看来，file_get_contents 用于从静态文件（如 txt 文件）中检索数据，将其存储到字符串中并进行进一步处理。

为了实现您想要做的事情，您需要使用该`include`指令，因为您显然希望第一页中的变量可用于`if`第二页中的语句

正如手册所述，“当包含一个文件时，它包含的代码继承了包含发生的行的变量范围。调用文件中该行可用的任何变量都将在被调用文件中可用”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:01:36.370

您需要告诉生成选项的文件您想要哪些选项集，并使用查询字符串来执行此操作。

所以，首先有这个：

```
<!-- basic set of options -->
<select>
 $hello = file_get_contents("some.php?o=basic");
 echo $hello;
</select>

<!-- advanced set of options -->
<select>
 $hello = file_get_contents("some.php?o=advanced");
 echo $hello;
</select>

<!-- ... you get the picture ... --> 
```

然后在 PHP 代码中检查这个查询字符串变量并根据它输出正确的选项：

```
echo "<option>1</option>"
echo "<option>2</option>"
if ($_GET['o']=="advanced")
{
    echo "<option>3</option>"
    echo "<option>4</option>"
    echo "<option>5</option>"
} 
```

# c# - 如何在列表中找到某种类型的最多项目？

> ID：11334632
> 
> 赞同：2
> 
> 时间：2012-07-04T19:39:02.797
> 
> 标签：c#, string, linq, list

给定`List<string>`具有以下元素的 a：`1, 2, 2, 1, 3, 3, 5, ?, , 4, A, 1, 7, 1, 9, 3`

什么是查找出现次数最多的数字（不包括`null`值和非数字）的好方法？LINQ 没问题（我知道它并不总是很有效，但它很有趣。:)）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T19:43:51.020

我会使用这样的东西：

```
var numericPattern = new Regex(@"^-?\d+$");
var result = list.Where(x => x != null && numericPattern.Matches(x))
                 .GroupBy(x => x, (key, group) => new { Value = key, 
                                                        Count = group.Count() } )
                 .OrderByDescending(pair => pair.Count)
                 .First(); 
```

请注意，`OrderByDescending`您可以使用[MoreLINQ](http://morelinq.googlecode.com)的`MaxBy`运算符代替：

```
var result = list.Where(x => x != null && digitsOnly.Matches(x))
                 .GroupBy(x => x, (key, group) => new { Value = key, 
                                                        Count = group.Count() } )
                 .MaxBy(pair => pair.Count); 
```

无论哪种方式，结果都将具有值和它发生的次数。

（另请注意，这将包括太大而无法存储的数字`int`- 如果您想执行实际解析，则应该这样做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:42:55.467

您正在寻找“模式”（最常出现的值）对吗？

[http://msmvps.com/blogs/deborahk/archive/2010/05/07/linq-mean-median-and-mode.aspx](http://msmvps.com/blogs/deborahk/archive/2010/05/07/linq-mean-median-and-mode.aspx)

```
var mode = numbers.GroupBy(n=> n). 
    OrderByDescending(g=> g.Count()). 
    Select(g => g.Key).FirstOrDefault(); 
Debug.WriteLine(("Mode is: " + mode)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T19:44:12.607

```
int mostFrequent = elements.Where(s => s != null)
    .Select(s => {
        int i;
        bool isValid = int.TryParse(s, out i);
        return new { IsValid = isValid, Value = i }
    })
    .Where(v => v.IsValid)
    .GroupBy(i => i.Value)
    .OrderByDescending(grp => grp.Count())
    .First().Key 
```

# wordpress - WordPress 网站的设计或插件建议

> ID：11334634
> 
> 赞同：0
> 
> 时间：2012-07-04T19:39:07.710
> 
> 标签：wordpress, wordpress-theming

我需要创建一个包含多个主题的 WP 网站。每个主题都有多节课，每节课都有标题、描述等元数据。用户将被允许阅读一些课程，并且根据阅读的课程数量，他将被分配一些自定义徽章。

在显示任何课程时，我们应该能够显示已经阅读过该课程的用户列表。

为了在 WP 上完成这项工作，我计划使用一些自定义内容类型插件，我可以使用它来创建主题、课程和用户元来存储用户对任何课程的操作。徽章也可以成为用户元的一部分。

我看到的问题是

1.  我不知道将主题映射到课程的任何方法，即在创建新课程时，我应该能够将其映射到一个主题（就像我们在 Drupal 中进行节点链接一样）
2.  如果用户元表可用于存储多对多信息，例如“XYZ 用户已阅读 25 节课”和“ABC 课程已被 10 名用户阅读”，我不使用

这种应用程序的最佳设计应该是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:09:52.140

你不能用类别解决问题1吗？

如果您将每个“阅读”保存在用户元中，每节课都有一个独特的元。你可以数那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:09:15.930

> 我不知道将主题映射到课程的任何方法，即在创建新课程时，我应该能够将其映射到一个主题（就像我们在 Drupal 中进行节点链接一样）

为什么不将主题设置为类别？然后，当您创建每节课时，您可以将其映射到主题类别。

# c# - 禁用隐藏字段验证

> ID：11334638
> 
> 赞同：3
> 
> 时间：2012-07-04T19:39:47.657
> 
> 标签：c#, asp.net, validation, request

我有一个填充了 HTML 的隐藏字段，用于在页面加载时出现模式弹出框。但是，在回发时，隐藏字段的内容会出现异常：

```
A potentially dangerous Request.Form value was detected from the client (ctl00$MainContentCP$hfContent="<div> 
```

我知道您可以使用以下方法禁用整个页面的验证的方法：

```
validateRequest="false" 
```

但是由于这个页面有一些我想保护免受脚本攻击的文本字段，这可能不是正确的解决方案。

我可以以某种方式仅为隐藏字段禁用验证吗？

导致异常的代码：

```
 <asp:HiddenField ID="hfContent" runat="server" />

  if (!Page.IsPostBack)
  {
        Pages pages = new Pages();
        hfContent.Value = pages.getPageById(14).PageContent; //this
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:44:27.757

如果您创建 4.0 ASP.NET 应用程序，请参阅： [ASP.NET 请求验证部分](http://www.asp.net/whitepapers/aspnet4/breaking-changes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:09:37.990

看起来错误在声明中。尝试以下操作：

```
<asp:HiddenField ID="hfContent" Value="String" runat="server" /> 
```

还要仔细检查分配给隐藏字段的值。在您的代码中，您需要**删除行** `Pages pages = new Pages();`

# assembly - 64 位 ELF 数据段

> ID：11334640
> 
> 赞同：0
> 
> 时间：2012-07-04T19:39:54.137
> 
> 标签：assembly, nasm

我对 OBJDump 提供的以下代码有疑问。我意识到二进制文件中的 .data 段表示静态定义的数据，但是以下代码未按预期显示。

```
0000000000600348 <.data>:
  600348:   48                      rex.W
  600349:   65                      gs
  60034a:   6c                      insb   (%dx),%es:(%rdi)
  60034b:   6c                      insb   (%dx),%es:(%rdi)
  60034c:   6f                      outsl  %ds:(%rsi),(%dx)
  60034d:   20 57 6f                and    %dl,0x6f(%rdi)
  600350:   72 6c                   jb     0x6003be
  600352:   64 21 0a                and    %ecx,%fs:(%rdx) 
```

我最初写的是类似的东西

```
SEGMENT .data
  msg: dw "Hello World!",0xa,0x0
  msg_len: equ msg-$ 
```

这是否只是以不同的方式描绘的相同数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:51:34.277

你应该使用类似“readelf -x .data ./binary”或“objdump -s -j .data ./binary”这样的东西，这将根据你的需要输出。希望这可以帮助

# jsf - ajax 加载的数据表中的命令按钮不会调用它们的操作

> ID：11334641
> 
> 赞同：1
> 
> 时间：2012-07-04T19:39:58.387
> 
> 标签：jsf

我有一个数据表。dataTable 的数据是通过 ajax 填充的。表格中的一行包含了诸如按钮之类的表单元素。datatTable 中的按钮应该引用另一个页面，但如果我点击它们，当前页面会重新加载。

这里有一些代码：

后备豆：

```
@ManagedBean(name="bean")
@SessionScoped
public class Bean {

private List<String> data;

@PostConstruct
public void postConstruct() {
    data = new ArrayList<String>();

}

public void fillTable() {
    data.add("E1");
    data.add("E2");
    data.add("E3");
}

public String outcome(){
    return "/faces/test/edit.jsf";
}

public List<String> getData() {
    return data;
}

public void setData(List<String> data) {
    this.data = data;
}

} 
```

这页纸：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org   /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
  xmlns:h="http://java.sun.com/jsf/html" >
<h:body>
<h:form id="form">
<h:commandButton value="fillTable">
    <f:ajax listener="#{bean.fillTable()}" render="@form"/>
</h:commandButton>
<h:dataTable id="table" var="data" value="#{bean.data}">
    <h:column>
        <h:outputText value="#{data}" />
    </h:column>
    <h:column>
        <h:commandButton value="edit" action="#{bean.outcome}" />
    </h:column>
</h:dataTable>
</h:form>
</h:body>
</html> 
```

我知道这与表单已经在 dom 中并且按钮被延迟加载到页面中有关（如果有人可以更具体，我会非常高兴）。

虽然如果我将支持 bean 的 Scope 更改为 SessionScope 它可以工作。按钮重定向到正确的页面。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:53:36.253

> *虽然如果我将支持 bean 的 Scope 更改为 SessionScope 它可以工作。按钮重定向到正确的页面*

该 bean 应该已放置在视图范围内。会话范围太广，只有在同一会话的多个浏览器窗口/选项卡中打开同一视图时才会出现不直观的行为。

解释如下：提交表单时，JSF 需要识别按下的命令按钮，以便调用关联的操作方法。由于命令按钮被放置在数据表中，JSF 需要首先迭代其数据模型。但如果数据模型已更改或为空，则 JSF 将无法识别命令按钮。因此不会调用该操作。

当 bean 在请求范围内时，它将在响应结束时被丢弃，并在每个新请求期间重新创建，包括 ajax 请求。显然，所有 bean 的属性都会再次获得默认值，`data`您的情况下的属性也是如此。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 特别是第 4 点。
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# r - 在r中的循环内组合多个数据帧

> ID：11334642
> 
> 赞同：2
> 
> 时间：2012-07-04T19:40:17.350
> 
> 标签：r, data-binding, loops

这只是我想做的小例子（不完全是，但类似的问题）：

```
test1 <- data.frame (matrix(sample( c(1,2,3,NA),15, replace = TRUE), 5,3))
 X1 X2 X3
1 NA NA  2
2  1  3  3
3 NA  1 NA
4 NA  2 NA
5  2 NA  3 
```

我想用 1:chr 的 5 个不同的种子循环这个过程。然后我想按列组合生成的数据框：

```
X1  X2  X3 X1.1 X2.1 X3.1  ... so on (r will accept two variables with same name) 

 X1 X2 X3  X1 X2 X3 X1 X2 X3 X1 X2 X3 X1 X2 X3
1 NA NA  2 1 NA NA  2 1 NA NA  2 1 NA NA  2
2  1  3  3 2  1  3  3 2  1  3  3 2  1  3  3
3 NA  1 NA 3 NA  1 NA 3 NA  1 NA  3 NA  1 NA 
4 NA  2 NA 3 NA  1 NA 3 NA  1 NA 3 NA  1 NA 
5  2 NA  33 NA  1 NA 3 NA  1 NA 3 NA  1 NA 
```

这是我的试验：

```
nchr = 1:5
seed <- round(runif(nchr)*1000000)

funct <- function (x){
set.seed <- seed[x]
test1 <- data.frame (matrix(sample( c(1,2,3,NA),15, replace = TRUE), 5,3))
return (test1)
}

sapply(nchr, funct) 
```

我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T19:55:53.350

```
> do.call(cbind, lapply(nchr, funct) )
  X1 X2 X3 X1 X2 X3 X1 X2 X3 X1 X2 X3 X1 X2 X3
1 NA  1  2  2  2  1  2  1  2  3  1 NA NA  1  3
2  1  1  3 NA NA NA  3  2 NA  3  1  1  3  2  1
3  3  3  2  2  2  3  2  2  3  1  1  1  2 NA  2
4  1  2  1  2  1  1 NA  2  3  1  2  1  2  2 NA
5  2  2  1  1  1 NA  1  3  2  3 NA  3  3  2  3 
```

# html - css z-index/div 显示

> ID：11334643
> 
> 赞同：1
> 
> 时间：2012-07-04T19:40:19.377
> 
> 标签：html, css, internet-explorer, z-index

我有一个下拉登录菜单，在 webkit/firefox 中运行良好，但在 Internet Explorer 中不显示。但是，我在 IE 中显示的不同站点上有完全相同的登录菜单！在这里查看非工作版本： [https](https://www.graduationregistration.com/new) ://www.graduationregistration.com/new 和这里查看工作版本： http: [//www.inthestar.com](http://www.inthestar.com)

我已经尝试了 z-indexes 和样式的所有值，但无法让它工作，我真的需要它！任何帮助将不胜感激，在此先感谢！

CSS如下（两个站点相同）：

```
#signin_menu {
-moz-border-radius-topleft:5px;
-moz-border-radius-bottomleft:5px;
-moz-border-radius-bottomright:5px;
-webkit-border-top-left-radius:5px;
-webkit-border-bottom-left-radius:5px;
-webkit-border-bottom-right-radius:5px;
display:none;
background-color:#ddeef6;
position:absolute;
right: -2px;
width:210px;
z-index:10;
border:1px transparent;
text-align:right;
padding:12px;
top: 24.5px; 
margin-top:5px;
color:#789;
font-size:11px;
visibility: visible;
}

#signin_menu input[type=text], #signin_menu input[type=password] {
display:block;
-moz-border-radius:4px;
-webkit-border-radius:4px;
border:1px solid #ACE;
font-size:13px;
margin:0 0 5px;
padding:5px;
width:203px;
z-index:11;
}
#signin_menu p {
margin:0;
}
#signin_menu a {
color:#6AC;
}
#signin_menu label {
font-weight:normal;
}
#signin_menu p.remember {
padding:10px 0;
text-align:right;
}
#signin_menu p.forgot, #signin_menu p.complete {
clear:both;
margin:5px 0;
}
#signin_menu p a {
color:#27B!important;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:46:57.290

删除过滤器：

progid:DXImageTransform.Microsoft.Gradient(StartColorStr='#555555', EndColorStr='#2a2a2a', GradientType=0)

会解决你的问题，但不要问我为什么：D

# web-services - API按演员或导演获取电影列表？

> ID：11334646
> 
> 赞同：19
> 
> 时间：2012-07-04T19:40:27.660
> 
> 标签：web-services, api

当搜索词是演员、女演员或导演时，我正在寻找一个 api 来下载电影列表。

因此，如果演员 =“汤姆克鲁斯”，我会得到他所有电影的列表。如果director = "James Cameron"，我会得到他导演的所有电影的列表。

我检查了使用 iMDB 的 api 的网站，但他们按电影标题或 imdb id 搜索。烂[番茄也是如此](http://developer.rottentomatoes.com/docs)。

我知道[IMDb 的文本文件](http://www.imdb.com/interfaces)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-18T23:11:25.940

[http://www.theimdbapi.org](http://www.theimdbapi.org)通过 RESTful JSON API 提供此信息。

从他们的例子中：

```
http://www.theimdbapi.org/api/find/person?name=jim+carrey 
```

返回有关金凯瑞电影的所有信息。

我不相信它的参数可以像您希望的那样详细，但它肯定可以为您提供所需的大部分信息。

编辑：

我还注意到其他发布的解决方案不再有效。似乎 themoviedb.org 的文档位置现在实际上是在这个位置：

[https://developers.themoviedb.org/3/people](https://developers.themoviedb.org/3/people)

老实说，它似乎更强大一些。

（我在发布这个实际问题有多老后也意识到，但希望它对偶然发现它的人仍然有帮助..）

# timer - 一分钟人，蟒蛇3

> ID：11334648
> 
> 赞同：1
> 
> 时间：2012-07-04T19:40:47.450
> 
> 标签：timer, python-3.x, urllib2

好吧，我有这段代码应该通过首先检查并将html下载到字符串中来检查html是否更改，然后每两秒再次检查一次并打印html是否已更改。问题是脚本说它一直在改变，并不断给我相同的 html 代码。

```
 #!/usr/bin/env python

import time

start = time.time()
from urllib.request import urlopen
data = str
html = str
def firstcheck():
    url = 'http://www.hacker.org/challenge/misc/minuteman.php'
    hogniergay = urlopen(url)
    data = hogniergay.read()
    hogniergay.close()
    html = data

def secondcheck():
    url = 'http://www.hacker.org/challenge/misc/minuteman.php'
    hogniergay = urlopen(url)
    data = hogniergay.read()
    hogniergay.close()
    if not html == data:
        print(data)

while True:
    secondcheck()
    time.sleep(2)

print ("it took", time.time() - start, "seconds.") 
```

提前致谢;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:46:11.953

您需要告诉解释器在`firstcheck()`函数中设置全局 html 变量。

```
def firstcheck():
    url = 'http://www.hacker.org/challenge/misc/minuteman.php'
    hogniergay = urlopen(url)
    data = hogniergay.read()
    hogniergay.close()
    global html
    html = data 
```

现在该`secondcheck()`函数正在检查 html 值“str”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:54:38.857

看起来你根本没有调用 firstcheck，所以 html 总是会是 str。您可以通过将 while True 内的块替换为：

```
while True:
    firstcheck()
    secondcheck() 
```

但是有一个看起来像这样的脚本会更干净

```
while True:
    hogniergay = urlopen(url)
    result = hogniergay.read()
    hogniergay.close()
    if result != current:
        print (result)
        current = result
    time.sleep(2) 
```

# c# - 为什么 TreeViewItem 中的项目会继承父级的事件处理程序？

> ID：11334651
> 
> 赞同：2
> 
> 时间：2012-07-04T19:41:08.283
> 
> 标签：c#, wpf, event-handling, treeviewitem

因此，我创建了一个 TreeViewItem（parentNode），并将 TreeViewItems 添加到 parentNode TreeViewItem 中。然后我将 MouseButtonEventHandler 添加到 parentNode，现在 parentNode 内的所有 TreeViewItems 都有 MouseButtonEventHandler。我已经运行调试器来查看是否有意外编写的添加 MouseButtonHandler 的代码，但没有...

编辑：我做了额外的测试，它甚至下降了两个级别。有没有办法将事件处理程序隔离到仅特定节点而不是其子节点和/或父节点？

```
public newClass() {
    TreeViewItem parent = new TreeViewItem();

    TreeViewItem childOne = new TreeviewItem();
    addExpandClickListener(childOne);

    TreeViewItem childTwo = new TreeviewItem();
    TreeViewItem childThree = new TreeViewItem();

    childTwo.Items.Add(childThree);
    childOne.Items.Add(childTwo);
    parent.Items.Add(childOne);
    TreeViewObject.Items.Add(parent);
}

private void addExpandClickListener(TreeViewItem item) { item.MouseLeftButtonUp += new MouseButtonEventHandler(item_MouseClick); }

private void item_MouseClick(object sender, MouseButtonEventArgs e) {
    // Define click event as handled
    e.Handled = true;
    if(sender != e.Source) return;
    // Handle click event
    TreeViewItem root = (TreeViewItem)sender;
    if(root.IsExpanded == true) CollapseRecursive(root);
    else root.IsExpanded = true;
    //else root.ExpandSubtree();
    ViewTree.Items.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:32:22.077

parentNode 的区域包括子节点的区域。想想重叠的矩形。如果您只想单击以处理文本部分，则必须提供自己的 DataTemplate 或使用可视化树来查找标题并将单击应用于该标题。

# android - 应用程序级错误

> ID：11334652
> 
> 赞同：0
> 
> 时间：2012-07-04T19:41:27.030
> 
> 标签：android, error-handling

有没有办法捕捉所有活动的应用程序错误？例如，在应用程序级别。就像是

```
public class MyApp extends Application { ... catch error ... } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T19:48:32.557

用于`Thread.setDefaultUncaughtExceptionHandler()`注册一个异常处理程序，当您在本地未处理的任何地方发生异常时将触发该异常处理程序。

# ruby-on-rails - 为什么即使我提供了 URL，Campaign Monitor 仍会响应错误“310：需要 HTML 内容 URL”？

> ID：11334661
> 
> 赞同：0
> 
> 时间：2012-07-04T19:42:21.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我正在使用[CreateSend API gem](https://github.com/campaignmonitor/createsend-ruby)，并且在我的**本地开发**环境中，我能够成功地创建一个草稿活动。

在**生产（暂存）中，在 Heroku 上**，完全相同的代码会返回错误：

```
310: HTML Content URL Required 
```

我肯定将 HTML 内容 URL 以及所有其他必需的参数传递给`Campaign.create`（我通过记录变量直观地验证了这一事实）。这是 API 调用：

```
cm_campaign_id = CreateSend::Campaign.create client_id, subject, name, from_name, from_email, reply_to, html_url, text_url, list_ids, segment_ids 
```

此外，在本地开发中，API 调用在不到 3 秒内返回，而在 Heroku 上，它会超时 30 秒并返回该错误。

为什么这会发生在 Heroku 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:42:21.800

简短回答：**[查看@kch 的回答](https://stackoverflow.com/a/12397004/664833)**。

`310: HTML Content URL Required`运行一个网络测功机时出现错误。

以下是相关日志：

```
2012-07-04T19:11:13+00:00 heroku[router]: Error H12 (Request timeout) -> POST my-app-1111.herokuapp.com/campaigns dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-07-04T19:11:13+00:00 app[web.1]: cache: [GET /favicon.ico] miss
2012-07-04T19:11:13+00:00 heroku[router]: GET my-app-1111.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=50ms status=304 bytes=0
2012-07-04T19:11:14+00:00 heroku[router]: Error H12 (Request timeout) -> GET my-app-1111.herokuapp.com/newsletters/1?cm=1 dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-07-04T19:11:14+00:00 app[web.1]: [error] CampaignMonitor error: The CreateSend API responded with the following error - 310: HTML Content URL Required 
```

看到`Request timeout`错误`GET my-app-1111.herokuapp.com/newsletters/1?cm=1`让我想起了 Campaign Monitor 立即为所有时事通讯资产回调我的应用程序。

当我将网络测功机的数量增加到两个时，有时错误会变为`312: Text Content URL Required`并且它会超时`GET my-app-1111.herokuapp.com/newsletters/1.txt`；其他时候（仍然有两个 dynos）API 不会出错（实际上创建了活动草稿），但应用程序在其他资产上超时（并且网站仍然产生股票`Application Error`）。以下是其中一些资产超时：

```
2012-07-04T19:20:21+00:00 heroku[router]: Error H12 (Request timeout) -> POST my-app-1111.herokuapp.com/campaigns dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-07-04T19:20:24+00:00 heroku[router]: Error H12 (Request timeout) -> GET my-app-1111.herokuapp.com/assets/video/play.png dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-07-04T19:20:24+00:00 heroku[router]: Error H12 (Request timeout) -> GET my-app-1111.herokuapp.com/assets/video/pause.png dyno=web.1 queue= wait= service=30000ms status=503 bytes=0 
```

当我将网络测功机的数量增加到三个时，仍然存在资产超时。

使用*四个 web dyno*，整个过程有时会成功完成（即并非总是如此！）——无论如何，即使它总是成功，四个 dyno 仅用于创建 Campaign Monitor 时事通讯就太昂贵了。

* * *

**CDN 上的资产**

由于[asset_sync](https://github.com/rumblelabs/asset_sync)和fog，我已将我的应用程序转换为[使用CDN 资产主机](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)（Amazon S3） ，我又回到了这个问题：使用Heroku 的Campaign Monitor。

由于我的应用程序不再提供资产（它们由 Amazon S3 提供服务），因此它基本上只负责返回 HTML。

就 Campaign Monitor 而言，当您查询他们的 API 以根据您的*时事通讯*创建营销活动*时*，他们会立即给您回电以下载您的时事通讯。这实际上意味着它们发送两个*并行*请求：一个用于新闻通讯的 HTML 版本，一个用于新闻通讯的 TEXT 版本。如果一个 dyno 被最初调用他们的 API 阻塞，并且所有资产都托管在 CDN 上，你会认为第二个 dyno 可以解决问题。事实上，我已经看到一秒钟的测功机处理“并行”请求（用于新闻通讯的 HTML 和 TEXT 版本）。但它是不可靠的，因为仍然存在随机超时（）：**`Error H12 (Request timeout)`**

 **```
2012-08-16T23:00:42+00:00 heroku[router]: Error H12 (Request timeout) -> POST my-app-1111.herokuapp.com/campaigns dyno=web.2 queue= wait= service=30000ms status=503 bytes=0
2012-08-16T23:00:42+00:00 heroku[router]: GET my-app-1111.herokuapp.com/favicon.ico dyno=web.4 queue=0 wait=0ms service=7ms status=304 bytes=0
2012-08-16T23:00:42+00:00 heroku[router]: Error H12 (Request timeout) -> GET my-app-1111.herokuapp.com/newsletters/1?cm=1 dyno=web.2 queue= wait= service=30000ms status=503 bytes=0
2012-08-16T23:00:43+00:00 app[web.2]: [error] CampaignMonitor error: The CreateSend API responded with the following error - 310: HTML Content URL Required 
```

Heroku 的支持说这是因为他们*独立地发送每个请求，期望最终接收的测功机能够处理它。这里发生的情况是，在某些情况下，发出帖子的同一个测功机是接收第二个请求的那个，但它似乎需要第二个请求的结果来完成发布请求，所以它死锁了。*

* * *

**解决方案**

一种可能的*临时*解决方案是`unicorn`为您的应用服务器使用两个 unicorn `worker_processes`。这样即使 Heroku 派发到繁忙的测功机，第二个独角兽监听器也会响应请求。

最终，除了使用`unicorn`with two之外`worker_processes`，正确的解决方案是*异步处理请求*，通过类似的方式`delayed_job`，并用于`workless`根据需要启动 Heroku worker dynos，因此您只需为使用的内容付费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:29:44.913

因为他们的 API 需要在第一个正在进行的请求中间发生对您的应用程序的第二个请求，所以我建议您将逻辑移至工作进程：

1.  对创建活动的应用程序的请求不会与活动监视器对话，而只是在表中创建一个作业，并重定向到检查该作业状态的页面
2.  工作人员 dyno 看到工作并开始工作，发布到 Campaign Monitor API……因为这不是网络 dyno，等待不是问题
3.  然后 CM API 将请求时事通讯页面并回复工作人员测功机
4.  然后工人测功机可以更新工作的状态
5.  一直以来，您在第一步中重定向到的页面可以继续刷新自身以轮询作业的状态，并在发现作业完成后显示最终页面。**

# php - 在php中添加时间

> ID：11334663
> 
> 赞同：1
> 
> 时间：2012-07-04T19:42:34.407
> 
> 标签：php, time

我想在 php 中添加时间，但经过数小时的 google'ing 和尝试后，我仍然无法找到解决方案。

我的价值观是：

```
$newTotal = '00:45:00';
$oldTotal = '00:16:00'; 
```

我想把这两个加起来，组成 01:01:00。

你能举个例子吗，我真的很绝望！:p

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:53:00.533

用于[`strtotime()`](http://php.net/manual/en/function.strtotime.php)将它们转换为 Unix 时间戳，然后将它们添加为整数：

```
$newTotal = '00:45:00';
$oldTotal = '00:16:00';

$total = strtotime($newTotal) + strtotime($oldTotal); 
```

要再次格式化`hh:mm:ss`，请使用`date()`：

```
echo date('H:i:s', $total); 
```

这给出了：

> 01:01:00

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:50:14.460

如果这些值总是这样，你可以用 substr() 分解它们

```
$hours1 = substr($newTotal, 0, 2); 
```

等等。然后简单地把秒加起来，做一个除法和修改，然后冒泡到小时，瞧！

```
$secondstotal = $seconds1+$seconds2; 
$restseconds = $secondstotal % 60;
$minutesfromseconds = floor($restseconds / 60);

$minutestotal = $minutes1+$minutes2+$minutesfromseconds; 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T20:01:13.143

为最小错误保留开始日期。

```
<?php
$origin   = '00:00:00';
$newTotal = '00:45:00';
$oldTotal = '00:16:00';

$added = strtotime($newTotal) + (strtotime($oldTotal) - strtotime($origin));

echo date('H:i:s', $added ); 
```

输出 ：

```
01:01:00 
```

**注意**，如果你添加后的时间超过23:59:59，你会得到错误的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T20:28:38.890

没有时间函数的另一种解决方案：

```
function sumtotal($a,$b) {
    $i = explode(':',$a);
    $j = explode(':',$b); // 0hh:1mm:2ss
    $k = array(0,0,0,0); // 0days:1hours:2minutes:3seconds
    $k[3] = $i[2]+$j[2];
    $k[2] = (int)($k[3]/60)+$i[1]+$j[1];
    $k[1] = (int)($k[2]/60)+$i[0]+$j[0];
    $k[0] = (int)($k[1]/24);
    $k[3] %= 60;
    $k[2] %= 60;
    $k[1] %= 24;
    if ($k[3]<10) $k[3] = '0'.$k[3];
    if ($k[2]<10) $k[2] = '0'.$k[2];
    if ($k[1]<10) $k[1] = '0'.$k[1];
    return $k[0].' days : '.$k[1].' hours : '.$k[2].' minutes : '.$k[3].' seconds';
}

$newTotal = '01:45:21';
$oldTotal = '03:16:56';
echo sumtotal($newTotal,$oldTotal); // result:  0 days : 05 hours : 02 minutes : 17 seconds 
```

# jquery - 用于轮播的 jQuery 插件

> ID：11334665
> 
> 赞同：0
> 
> 时间：2012-07-04T19:42:42.903
> 
> 标签：jquery, jquery-plugins, plugins, carousel

所以我是插件开发的新手，我一直在做一个图像轮播，想把它变成一个插件。我以为我已经弄清楚了，但似乎无法正确解决。init 函数不会调用。这是我的插件代码：

```
// Plugin
(function( $ ){

  $.fn.customSlider = function(options){

    var config = $.extend({ // TODO: add all configuration options needed
      'slideCount': null,
      'delayTime': 1000
    }, options);

    var slideCount  = this.find('div.slide').length,
        rotate      = function(i){ // TODO: make name more descriptive
            setInterval(function() {
                if (i < slideCount -1) {
                    i++;
                } else {
                    i=0;
                }
                slideRotate(i);
            },  delayTime);
        }, 

        slideRotate = function(i){
            var asdf = null;
            $('.slider').children().fadeOut(500);
            $($('.slider div').get(i)).fadeIn(500); // TODO: externalize $('.slider div').get(i) into variable
        },

        gotoSlide = function(i){
            customSlider.rotate(i-1);
        },

        init = function(){
            console.log('init');
            this.find('div:first').show();
            customSlider.rotate(0);
        }, 

        clickzor = function() { // TODO: make selector more specific  
            clearInterval(intervalID); 
            intervalID = null; 
            var num = parseInt($(this).text(),'') - 1; 
            slideRotate(num); 
            gotoSlide(num+1);
        };

        $('a').click(clickzor);

    };

    customSlider.init();

    // init

})( jQuery );

$(function(){
    $('#headSlider').customSlider();
}); 
```

这是我的工作非插件代码：

```
$(function() {
    $('#headSlider div.slide:first').addClass('active').show();
    var slideCount = $('.slider div.slide').length;
    var delayTime = 6000;
    var intervalID;

    function slideRotate(i) {
        $('.slider').children().fadeOut(500);
        $($('.slider div').get(i)).fadeIn(500);     
    }

    function rotate(i) 
    {            
        intervalID = setInterval(function() {
            if(i < slideCount -1)
            {
                i++;
            }
            else
            {
                i=0;
            }
            slideRotate(i);
        }, delayTime);
    }

    function gotoSlide(i)
    {        
        rotate(i-1);
    }

     $('a').click(function() 
    {     
        clearInterval(intervalID); 
        intervalID = null; 
        var num = parseInt($(this).text(),'') - 1; 
        slideRotate(num); 
        gotoSlide(num+1);
    });

    rotate(0);
}); 
```

我只是不知道我做错了什么。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:48:50.360

我相信问题是你应该`init()`在你的扩展定义中调用。

```
$.fn.slider = function(options){
    ...definitions...
    init();
} 
```

# jquery - 不叫行动

> ID：11334673
> 
> 赞同：1
> 
> 时间：2012-07-04T19:43:24.553
> 
> 标签：jquery, drop-down-menu, struts2

我觉得这是一个非常容易解决的问题，但我很难过。我整天都在寻找，但我的代码似乎与工作示例的代码相匹配。我正在使用 Struts+SpringMVC+Hibernate，并且正在用 jQuery 标记替换我所有的 dojo 标记。jQuery 下拉菜单没有调用相关的操作。

以下是相关代码：

**Struts.xml**

```
<action name="getListOfCities" class="cityActions">
        <result type="json">
            <param name="root">cities</param>
        </result>
</action> 
```

**页面.jsp**

```
<s:url id="cityList" action="getListOfCities"/>
     <sj:autocompleter name="cities" href="%{cityList}" list="cities" selectBox="true"/> 
```

**CityAction.java**

```
public class CityActions implements ModelDriven<CityVO> {

CityService cityService;
private Map<String, String> cities = new HashMap<String, String>();
CityVO city = new CityVO();

public void setCityService(CityService cityService) {
    this.cityService = cityService;
}

public CityVO getModel(){
    return city;
}

public String execute() {
    return Action.SUCCESS;
}   

public String addCity(){
    try{
        cityService.addCity(city);
        return "SUCCESS";}
    catch(Exception e){
        return "ERROR";
    }catch(Throwable t){
        return "ERROR";
    }
}

public Map<String, String> getCities() {
    List<CityVO> cityList = cityService.listCities();

    Iterator<CityVO> iterator = cityList.iterator();
    while (iterator.hasNext()) {
        CityVO fac = iterator.next();
        cities.put(fac.getCityName(), Integer.toString(fac.getCityId()));
    }
    return cities;
} 
```

下拉菜单显示但未填充。这是我之前的工作正常：

```
<s:url id="cityList" action="getListOfCities" />
<sx:autocompleter href="%{cityList}" name="cities" keyValue="0" value="---- SELECT ONE-----"/> 
```

有人对此有解决方案吗？我确保添加

```
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%> 
```

和内头：

```
<sj:head jqueryui="true"/> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:16:15.220

（评论太长了。拼凑了类似于您的片段的部分版本。）

主要问题是您的结果设置`root`为`cities`，这意味着返回的 JSON 没有`cities`键，因此自动完成的`list`属性不知道从哪里获取其数据。

也就是说：这个版本的功能*有些*时髦；`selectBox`当我删除该属性时，我会在键入时看到数据，并将其设置为 true，但我什么也得不到。

但是，我没有看到选择过滤，这意味着即使它正确突出显示匹配的字符，不匹配的条目也不会被删除；我相信他们应该是。

Unrelated, but why bother creating a map from the VOs? Unless I had a decent reason (e.g., `CityVO` is too big or contains sensitive info) just use the `listKey` and `listValue` attributes and use what the service already returns.

# sql - 如何选择列值以某个字符串开头的行？

> ID：11334674
> 
> 赞同：41
> 
> 时间：2012-07-04T19:43:42.277
> 
> 标签：sql, sqlite

如何选择列值以某个字符串开头的行？

例如，我想选择“姓名”列以“先生”开头的行。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-04T19:45:52.503

你可以做

```
select * from mytable where name like "Mr.%" 
```

见[http://www.sqlite.org/lang_expr.html](http://www.sqlite.org/lang_expr.html)

# php - 在 PHP 中包含标题时，如何添加内容？

> ID：11334676
> 
> 赞同：4
> 
> 时间：2012-07-04T19:43:46.473
> 
> 标签：php, javascript

我正在构建我的第一个 PHP 网站，并且只是在玩弄它。我将使用 PHP 包含，所以我只需要更改我的元数据一次。目前，我拥有从 doctype 到`</head>`.

一位朋友说我不应该`</head>`在 header.php 中包含 ，而是在每个页面上都包含它，这样我就可以添加页面特定的内容。这是一个好方法吗？

目前，对于标题之类的东西，我正在做

```
<title><?php echo $page_title; ?> 
```

然后在每一页的顶部，我在做

```
<?php $page_title = 'Blah'; ?> 
```

如果这是我这样做的方式，我将如何添加页面特定的 Javascript 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T20:20:55.347

这里发生的事情是你试图将逻辑注入你的模板，这不一定是错误的，但它会产生更多的混乱和难以维护的代码。这个问题不仅与您的`<title>`标签有关，而且随着您的页面变得越来越动态和复杂（动态导航、特定于页面的布局等），它会不断出现。

MVC 方法完美地解决了这个问题。MVC 由模型组成，它们与您的数据源（MySQL、Redis 等）对话并处理您的逻辑；呈现 HTML 的视图；和控制器，它们是模型和视图之间的粘合剂。用户发出的每个请求最终都会路由到控制器，然后是控制器中的操作方法（例如：`/users/login`可能映射到`User`控制器和`login`操作）。

您可以在控制器的 action 方法中设置页面标题（或任何其他元信息），该方法知道请求是什么，但在呈现视图之前会被调用：

```
$request->setTitle('Home page'); 
```

然后在您看来，只需渲染它：

```
<title><?php echo $request->getTitle(); ?></title> 
```

如果您刚刚开始使用 PHP，那么现在是学习 MVC 的好时机，因为它会让您养成一些好习惯，这些习惯不仅会影响您的 PHP 开发，还会影响任何其他开发。

我建议您查看[CodeIgniter](http://codeigniter.com/)的简单性和出色的文档。我使用了一段时间的 CodeIgniter，但最终[编写了自己的框架](http://github.com/jimmysawczuk/scaffolding)来更好地满足我的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T20:30:24.743

我认为你应该先做一些逻辑，然后渲染它。像这样的东西：

```
<?php

$page = array(
    'title' => 'Title',
    'js' => array(
        'jquery.min.js',
    ),
    'copyright' => 'Copyright 2012',
);

if ( $needed ) {
    $page[ 'js' ][] = 'some-other.js';
}

include( 'header.php' );
include( 'content.php' );
include( 'footer.php' );

// header.php
<html>
    <head>
        <title><?= $page[ 'title' ]; ?></title>

        <? foreach ( $page[ 'js' ] as $js ) { ?>
            <script src="<?= $js"></script>
        <? } ?>

    </head> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T19:57:58.060

我不知道，你如何建立你的页面。但是在一个简单的站点上，您可以使用这样的关联数组：

```
$pages = array(
    'home' => array(
        'title' => 'Home',
        'metaDescription' => 'This is the home of my website',
        'metaKeywords' => 'A,B,C',
        'scripts' => '<script src="src/js/com.jquery/1.7/jquery-1.7.min.js"></script>',
        'content' => 'home.phtml'
    ),
    'page_1' => …
); 
```

而且你可以这样回忆：

```
<head>
    […]
    <title><?php print $pages['home']['title']; ?></title>
    […]
    <?php print $pages['home']['scripts']; ?>
    […]
</head>
<body>
    <?php require '/pathToIncludes/' . $pages['home']['content]; ?> 
</body> 
```

但我只会将这个推荐给只有一堆页面的网站。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T20:09:01.827

这是我解决这个问题的方法：

*   `start.php`连接到我的数据库，包括我的类，将我所有的默认元值设置为一个`$page`对象并启动`$_SESSION`
*   `header.php``<head>`根据_`$page`
*   `top.php`包括`start.php`和`header.php`

对于大多数文件，默认值很好。我只包括`top.php`. 对于需要特殊值的特殊情况，我的页面如下所示：

```
<?php 
    include("start.php");
    $page->title = "My special title";
    include("header.php");
    // The rest of my content
?> 
```

这具有额外的优势，即页面可以访问 $_SESSION 和其他自定义类，并使用该信息来修改标头而不会出现“标头已发送”错误。例如，您可以验证某些用户输入并`location('header: foo.php');`根据他们的登录状态使用或更改标题来重定向他们。

对于特定于页面的 javascript 包含，我会创建一个要包含的 url 数组，`$page->javascript`然后放置如下内容：`$page->javascript[] = "http://example.com/js/myScript.js";`介于`start.php`和`header.php`

# objective-c - didFinishLaunchingWithOptions 是否在某些应用程序“退出”后发生？

> ID：11334678
> 
> 赞同：0
> 
> 时间：2012-07-04T19:43:57.347
> 
> 标签：objective-c, ios

didFinishLaunchingWithOptions 是否发生在：

1.  applicationWillResignActive
2.  applicationDidEnterBackground
3.  applicationWillEnterForeground

还是仅在 applicationWillTerminate 之后发生？

当 applicationDidBecomeActive 发生时呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:49:37.400

从文档：

> 在您的应用程序启动并加载其主 nib 文件后调用它。在调用此方法时，您的应用程序处于非活动状态。在此方法返回后的某个时间点，将调用后续委托方法以将您的应用程序移动到活动（前台）状态或后台状态。

它发生在用户打开您的应用程序时。当应用准备好接收用户事件时，紧随其后的是 applicationDidBecomeActive。

当用户按下主页按钮时，将调用以下方法（按此顺序）： - applicationWillResignActive - applicationDidEnterBackground

当用户再次打开您的应用程序时，它处于后台：

*   applicationWillEnterForeground
*   applicationDidBecomeActive

最后，在 iOS 3.x 或更早版本的设备上调用 applicationWillTerminate 而不是 applicationDidEnterBackground。或者使用不支持后台应用程序的设备（如 3G）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:49:53.373

```
application:didFinishLaunchingWithOptions: 
```

只触发一次：当你的程序启动时。您通常应该在此处创建主窗口/视图控制器。

# javascript - 科学怪人图像交换 JavaScript 需要整洁和可能的自动化

> ID：11334679
> 
> 赞同：2
> 
> 时间：2012-07-04T19:44:00.957
> 
> 标签：javascript, image, automation, swap, preload

我正在使用以下 JavaScript。它工作正常，但它是从各种来源拼凑起来的一团糟。

*   我有一系列图像。
*   每个都有一个小版本 (1.gif) 和一个隐藏的、预加载的大版本 (_1.gif)。
*   单击小版本，大版本将替换它。
*   再次单击它会换回来：

    ```
    var lastMove;
    lastMove = new Date();

    function preload(arr) {for (var i=0; i<arr.length; i++) (new Image()).src = arr[i];}

    var index = 0;

    var picsA = ["1.gif", "_1.gif"];
    preload(picsA); picNumberA = 0;
    function showNextPicA() {if (new Date() - lastMove < 200) return false; if (picNumberA == (picsA.length -1)) {picNumberA = 0;} else {picNumberA = picNumberA + 1;}document.getElementById('placeholderA').src = pics1[picNumberA];}

    var picsB = ["2.gif", "_2.gif"];
    preload(picsB); picNumberB = 0;
    function showNextPicB() {if (new Date() - lastMove < 200) return false; if (picNumberB == (picsB.length -1)) {picNumberB = 0;} else {picNumberB = picNumberB + 1;}document.getElementById('placeholderB').src = picsB[picNumberB];} 
    ```

*   等页面上的每个图像是这样的：

    ```
    <img src="1.gif" id="placeholderA" onclick="return showNextPicA();"/> 
    ```

所以，首先：这种混乱是危险的还是不必要的，还是很好？

第二：有没有办法*自动化*，所以任何图像文件都会在单击时切换到具有标准前缀（比如_）的版本，然后在再次单击时再次返回？

呸。谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:49:32.203

If you are able to use sth like jQuery, in the onClick for each image, put

```
showNextPic($(this)) 
```

Then

```
var prefix = "_";
showNextPic(imgelement) {
    var src = imgelement.attr('src');
    if(src.indexOf(prefix) == -1) {
         src = prefix + src;
    }
    else {
         // remove prefix from src
    }
    imgelement.attr('src', src);
} 
```

# c# - 如何从 ViewModel 为在 DataTemplate 中创建的视图设置 DataContext

> ID：11334680
> 
> 赞同：5
> 
> 时间：2012-07-04T19:44:03.890
> 
> 标签：c#, wpf, datatemplate, datacontext

已经有这方面的问题了，但他们没有回答我的问题。例如：

```
 <ContentControl.Resources>
            <DataTemplate DataType="{x:Type Databinding:RedScreenViewModel}" >
                <Databinding:RedScreen DataContext="{Binding}"/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type  Databinding:BlueScreenViewModel}">
                <Databinding:BlueScreen DataContext="{Binding}" />
            </DataTemplate>
 </ContentControl.Resources> 
```

如您所见，我正在尝试为创建的 View 设置 DataContext，希望它会使用用于创建它的 ViewModel。但是当我单步执行后面的代码时...... DataContext 始终为空。我怎样才能达到我想要的？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T19:48:00.673

如果你`DataTemplate`为你的 ViewModel 类定义了一个 View 控件，它会自动`DataContext`设置为 ViewModel。

这应该有效：

```
<ContentControl.Resources>
    <DataTemplate DataType="{x:Type Databinding:RedScreenViewModel}">
        <Databinding:RedScreen />
    </DataTemplate>
    <DataTemplate DataType="{x:Type Databinding:BlueScreenViewModel}">
        <Databinding:BlueScreen />
    </DataTemplate>
</ContentControl.Resources> 
```

# javascript - phantomjs 中的代理

> ID：11334681
> 
> 赞同：20
> 
> 时间：2012-07-04T19:44:06.120
> 
> 标签：javascript, phantomjs

我不明白如何在 phantomjs 中使用代理，我试过了

phantomjs example.js --proxy="ip:port"

phantomjs example.js --proxy=ip:port

phantomjs example.js --proxy=ip:port --proxy-type=http

但我只看到我的 ip=(

没有任何输出，即使代理 ip apriori 无效。

例子.js：

```
var page = require('webpage').create();
page.onConsoleMessage = function(msg) {
    console.log(msg);
};
page.onLoadFinished = function(status){
    if (!status){
        console.log('fail');
        phantom.exit();
    }
    page.render("1.png");
    phantom.exit();
};
page.open("http://whoer.net/"); 
```

我忘记了什么明显的事情？谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-04T23:23:14.300

正如我所说，我忘记了一件显而易见的事情 - phantomjs 的参数必须在命令“phantomjs”之后而不是脚本名称之后。正确的变体：

phantomjs --proxy=ip:port example.js

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-25T11:10:32.160

此代码用于使用*用户名*和*密码*进行身份验证。以及，将结果保存在*sample.txt*中：

```
phantomjs --proxy=Ip:Port --proxy-auth=User:Pass App.js > sample.txt 
```

# javascript - 从当前 URL 获取 #id

> ID：11334684
> 
> 赞同：5
> 
> 时间：2012-07-04T19:44:14.717
> 
> 标签：javascript, jquery, url, uri

我正在寻找一种使用 JavaScript 从当前 URL 中检索 #anchor 部分的方法。例如：

> [http://my-page.com/index.html#contact-us](http://my-page.com/index.html#contact-us)

会回来`contact-us`的。

我最终可以拆分 URI，`#`然后取最后一块，但我正在寻找一个更好、更清晰的建议。本机（jQuery？）函数会很棒，但我想我要求太多了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T19:45:27.033

使用[`location.hash`](https://developer.mozilla.org/en/window.location#Properties)：

```
location.hash.slice(1); 
```

它以 开头`#`，因此`.slice(1)`。给定一个任意字符串，您可以通过创建一个元素来使用内置的 URL 解析功能`<a>`，并设置 href，然后*读取*其他属性，例如`protocol`、`hostname`、`hash`等。 jQuery 示例：

```
$('a').attr('href', url)[0].hash; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:45:41.183

`location.hash.replace(/^#/, "")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T19:45:52.580

如果您使用变量：

```
var url = "http://my-page.com/index.html#contact-us";

var hash = url.substring(url.indexOf("#") + 1); 
```

# jpa - JPA调用存储过程返回错误结果

> ID：11334688
> 
> 赞同：0
> 
> 时间：2012-07-04T19:44:29.903
> 
> 标签：jpa, stored-procedures, eclipselink

我正在使用 JPA 本机查询来调用存储过程并将返回结果映射到一个类

```
createNativeQuery(String sqlString, Class resultClass); 
```

这里 sqlString 是这种格式的存储过程：

```
{call storeProcedureName parameter1, paramter2, parameter3} 
```

我注意到当其中一个参数包含正斜杠（/）时，结果结果将是错误的。有没有人遇到过这个问题以及如何解决？谢谢

我正在使用 EclipseLink 和 glassfish 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:42:59.803

您是将参数内联到 SQL 中，还是在查询中使用参数？您应该在查询中使用参数，将参数内联到 SQL 中是非常糟糕的（可能导致 SQL 注入攻击）。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Native#Parameters](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Native#Parameters)

# javascript - 在 android 上使用 jquery mobile 时，javascript 在第二页上似乎被禁用

> ID：11334692
> 
> 赞同：0
> 
> 时间：2012-07-04T19:45:03.160
> 
> 标签：javascript, android, jquery, mobile

我正在尝试使用 jQuery Mobile 构建一个 Web 应用程序。在我的桌面上进行测试时，一切都按预期工作。在 Android（3.2 和 4.0.3）上，导航到第二页后似乎禁用了 JavaScript。

我的第一页看起来像：

```
<!DOCTYPE html>
<html>
<head>
<title>Hello World</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
  href="script/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.css" />
<script type="text/javascript" src="script/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="script/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body>
  <div data-role="page">
    <div data-role="header">
      <h3>Jetty experiments:</h3>
    </div>
    <div data-role="content">
      <ul data-role="listview">
        <li><a href="HelloWorld" data-ajax="false">Hello World</a></li>
        <li><a href="sample-form.html">Sample Form</a></li>
        <li><a href="test.jsp" data-ajax="false">Test JSP</a></li>
      </ul>
    </div>
    <div data-role="footer">
      <button id="jquery-test">JQuery Test</button>
    </div>
  </div>
</body>
<script type="text/javascript">
    $(document).ready(function() {
        $("#jquery-test").click(function(event) {
            alert("OK");
        });
    });
</script>
</html> 
```

我的第二页（即 sample-form.html）：

```
<!DOCTYPE html>
<html>
<head>
<title>Collects text into a database</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
  href="script/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.css" />
<script type="text/javascript" src="script/jquery-1.7.2.min.js"></script>
<script type="text/javascript"
  src="script/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="script/tempo.min.js"></script>
</head>
<body>
  <div data-role="page">
    <div data-role="header">
      <h3>Enter some text:</h3>
    </div>
    <div data-role="content">
      <form id="searchForm" method="get" action="SampleForm"
        data-ajax="false">
        <input type="text" name="text" /> <input type="submit"
          value="Submit" />
      </form>
      <ul id="names" data-role="listview">
        <li data-template>{{name}}</li> <!-- the template here does not work on Android -->
        <li data-template-fallback>Sorry, JavaScript required!</li>
      </ul>
    </div>
    <div data-role="footer">
      <button id="jquery-test">JQuery Test</button>
    </div>
  </div>
</body>
<script>
    var names;

    $(document).ready(function() {
        $("#jquery-test").click(function(event) {
            alert("OK"); // the alert here does not work on Android :(
        });
        names = Tempo.prepare("names")
    });

    // this binding does not work on Android
    $("#searchForm").submit(function(event) {
        event.preventDefault();

        $.getJSON("SampleForm", function(data) {
            names.render(data);
        });
    });
</script>
</html> 
```

知道我在做什么错吗？BR，阿德里安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:52:05.533

在 jQuery Mobile 中，文档就绪事件被调用一次。链接的页面加载到相同的 DOM 中并触发页面初始化。

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

这是另一个问题：

[jQuery Mobile 委托 vs 实时 vs 绑定](https://stackoverflow.com/questions/10520020/jquery-mobile-delegate-vs-live-vs-bind)

# java - Java swing gui 和 lwjgl

> ID：11334693
> 
> 赞同：2
> 
> 时间：2012-07-04T19:45:04.120
> 
> 标签：java, lwjgl

一个简单的问题：**是否可以在同一个窗口中查看 java Swing 库的 gui 和 lwjgl 3D 场景而不使用任何额外的 gui 库？如何？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T08:03:19.717

您可以使用方法 Display.setParent(java.awt.Canvas) 将 LWJGL 显示放在画布上。然后，您可以将此画布合并到您的 Swing GUI 中。请注意，上述方法可能存在轻微的性能问题。

# scheme - Racket 博士、R5RS 和 SRFI

> ID：11334697
> 
> 赞同：1
> 
> 时间：2012-07-04T19:45:46.783
> 
> 标签：scheme, racket

每当我尝试使用 drracket r5rs 语言中的**fold**和**reduce**等 srfi/1 函数时，我会得到一个空列表？错误。经过一些研究，我发现这是由于函数需要和不可变列表但得到一个可变列表的事实。如何在 r5rs 中创建不可变列表，或者这个 srfi/1 设计时没有考虑到 r5rs？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:48:55.693

这基本上是在重申约翰所说的话，但它*确实*值得一个完整的答案状态。（约翰，如果您逐字复制此答案，我很乐意删除它...）

Racket 的 R5RS 语言的特点是它非常严格地坚持 R5RS 语言，因此除此之外什么都没有。（也可以为 R5RS 可变对实现 SRFI，但没有人想出适应的代码。）

无论如何，这里的底线是 R5RS 基本上只在那些你想给自己造成只使用基本 r5rs 语言编写的痛苦的极少数情况下有用——这意味着你基本上不能做很多有用的事情. 因此，特别是如果你想感受一下这门语言，你可能会想玩各种超出狭窄 r5rs 世界的东西——为此你应该使用`#lang racket`.

它在“只是了解语言”方面也更好，您甚至可以将相同的课程应用到其他 Scheme 实现中，记住它们都带有自己的扩展。如果您使用有限的 r5rs 语言，您可能会体验到这种有限语言带来的挫败感，这很容易压倒您可能拥有的任何积极体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T21:09:50.563

由于“球拍”语言使用不可变的 cons 单元，系统附带的 srfi/1 实现也使用不可变的 cons 单元。

由于 R5RS 中的 cons 单元使用可变的 cons 单元，因此您不能将内置 srfi/1 与 DrRacket 中的 R5RS 语言一起使用。

然而，这是一个小问题。下载[http://srfi.schemers.org/srfi-1/srfi-1-reference.scm](http://srfi.schemers.org/srfi-1/srfi-1-reference.scm)并将其保存在您拥有代码的目录中。

打开它并在第一行插入：

```
(define (check-arg . more) #t) 
```

然后在您自己的代码中，添加以下行：

```
(load "srfi-1-reference.scm") 
```

现在 srfi/1 重新定义了地图（以及其他一些）。重新定义的内置操作通常只在意外情况下完成，因此 DrRacket 中的默认设置是抛出错误。因此单击 DrRacket 左下角的 R5RS 语言。选择“选择语言...”。然后单击“显示详细信息”按钮。通过“不允许重新定义初始绑定”删除勾选。

现在运行以下程序：

```
(load "srfi-1-reference.scm")
(fold + 0 '(1 2 3)) 
```

并按预期产生 6。

# java - 是否可以处理源自本机代码的 SEGFAULT？

> ID：11334701
> 
> 赞同：9
> 
> 时间：2012-07-04T19:46:02.270
> 
> 标签：java, signal-handling

我有一个 Java 1.6 应用程序，它通过作为接口提供的 JNI 类访问第三方本机模块。最近我们注意到原生模块中发生了 SEGFAULT，导致我们的应用程序崩溃。是否有可能捕获并处理此事件，至少在死前正确记录它？

* * *

[我在kjp's answer](https://stackoverflow.com/a/11335490/16487)的文章中尝试了这两种 Java 技术。都没有奏效。尝试在“SEGV”上安装[信号处理程序](http://www.docjar.com/docs/api/sun/misc/SignalHandler.html)会导致异常

> VM 已使用的信号：SEGV

我安装的[关闭处理](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)程序根本无法触发，大概是因为[IBM 文章](http://www.ibm.com/developerworks/java/library/i-signalhandling/)所述：

> 关闭挂钩将不会运行，如果
> 
> 调用 Runtime.halt() 方法来终止 JVM。提供 Runtime.halt() 以允许快速关闭 JVM。
> 指定了 -Xrs JVM 选项。
> **JVM异常退出，例如JVM软件产生的异常情况或强制中止。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:48:02.847

如果您只想记录并通知您可以编写一个运行您的应用程序的脚本。当应用程序死机时，脚本可以检测应用程序是否正常终止，并从包含所有崩溃/SEGV 信息的 hs_errXXXX 文件中检测并将其邮寄给某人（如果需要，可以重新启动应用程序）

* * *

您需要做的是在另一个 JVM 中运行错误的 JNI 代码，并使用 RMI 或 JMS 或套接字与该 JVM 通信。这样，当库死掉时，它不会关闭您的主应用程序，您可以重新启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-08T16:03:51.983

根据当时几周的研究，以及在会议上与 JVM 工程师的对话，这是不可能的。系统不会让您在 SEGV 信号上安装 SignalHandler。

# design-patterns - 设计模式：传递/设置未知类的变量

> ID：11334707
> 
> 赞同：1
> 
> 时间：2012-07-04T19:46:19.363
> 
> 标签：design-patterns, inheritance, methods

我需要一个设计模式来将参数传递给子类，但是参数不同。

1）**无限的instanceof检查：**问题：a）慢b）不可读。

```
Component a ;
if ( a instanceof SimpleComponent)
{
   (SimpleComponent)a.do();
}
else if ( a instanceof UnitComponent)
{
   (UnitComponent)a.do( unit );
}
else if ( a instanceof BuildingComponent)
{
   (BuildingComponent)a.do( building );
} 
```

1a)**使用 Setter：**与上面相同，而不是 do(X)，调用 set(X)，需要无限制的 instanceof 检查。

2）**巨大的switch语句：**问题：a）我们仍然需要转换实例。b) 不可读。

3)**在构造函数上传递变量：**问题：在应用程序的生命周期内无法再次更改该变量，这将需要调用特定的未知 .set(X) 方法。

4）**将所有未关联的变量放入超类：**

```
 Component
   {
     Unit unit;
     Building building;
     String i_can_pass_strings_0;
     String i_can_pass_strings_1;
     String i_can_pass_strings_2;
     int    i_am_allowed_to_pass_a_single_int_now;
   } 
```

这就像使用全局变量在函数之间传递变量一样。您将以具有 200-300 个不相关变量的类结束，垃圾收集问题。此外，您甚至必须想一想，该课程以一个不可读的大垃圾箱结束。

5）上面的Component类重命名为ComponentOptions（它仍然是一个垃圾箱）。

```
interface Component
{
   do ( ComponentOptions );
} 
```

**解决方案**：至少现在我不必考虑如何调用 do(); 它被称为相同的方式。

**问题**：a) 不是调用者决定要传递哪些变量，而是接收者子类必须决定如何读取变量。在这种情况下，我们使用 ComponentOptions 这是我们的垃圾处理箱。

6）**组件模式：**拥有/获取组件。

```
class UnitComponent implement Component
{
   public void do( ComponentOptions componentOptions )
   {
      if ( hasComponent( Unit.class )
      {
         Unit unit = componentOptions.getComponent( Unit.class );
         doStuff( unit ) ;
      }
   }
} 
```

a) 可读

问题：1）是否有另一种设计模式来解决这个问题，或者解决方案 6 是解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:53:01.947

垃圾邮件的已知替代品之一`instanceof`是访客模式 - 看看这里：[http ://www.refactoring.com/catalog/replaceConditionalWithVisitor.html](http://www.refactoring.com/catalog/replaceConditionalWithVisitor.html)

您还可以阅读此问题[Avoiding instanceof in Java](https://stackoverflow.com/questions/2790144/avoiding-instanceof-in-java)

# jquery - JQuery 将子元素与父元素分开

> ID：11334708
> 
> 赞同：0
> 
> 时间：2012-07-04T19:46:33.267
> 
> 标签：jquery, slidetoggle

基本上我有一个元素，单击该元素会导致另一个元素滑动切换。然而我所追求的是另一个元素，比如一个图像，在主父元素内，当它被点击时，它不会触发 slideToggle 事件，并且可以用来触发另一个事件......

我的代码的简化版本在这里：

[http://jsfiddle.net/s3d5D/6/](http://jsfiddle.net/s3d5D/6/)

..蓝色框是图像的替代品。

标记：

```
<div class="holder">
    <div class="section"><div class="image"></div></div>
    <div class="hidden"></div>
</div> 
```

jQuery：

```
$('.hidden').hide();
$(document).on('click', '.section', function(){
    $(this).nextAll('.hidden:first').slideToggle(500);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:48:23.683

您可以在子元素处[停止事件的传播：](http://api.jquery.com/event.stopPropagation/)

```
$(document).on('click', '.image', function (e) {
    e.stopPropagation();
}); 
```

这是一个[工作示例](http://jsfiddle.net/s3d5D/7/)。请注意，我已将您现有的`on`调用与上述链接在一起，因此您不必创建多个 jQuery 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:56:50.983

[我使用了与James](https://stackoverflow.com/a/11334728/82548)或多或少相同的方法，因为我已经使用了`event.stopPropagation()`，但我选择了`click`在方法中评估事件的目标`on()`，而不是链接两个或可能更多的调用`on()`：

```
$(document).on('click', '.section, .image', function() {
    var thisClass = $(this).is('.section') ? 'section' : 'image';
    if (thisClass == 'section') {
        $(this).nextAll('.hidden:first').slideToggle(500);
    }
    else if (thisClass == 'image') {
        e.preventDefault();
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/s3d5D/8/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T19:53:33.823

事件参数对象的`target`属性包含真正被点击的元素。您可以将其与`this`（将包含相关`.section`元素）进行比较，并确定它是`.section`被点击的，还是其他的：

```
$(document).on('click', '.section', function(e){
    if (e.target == this) {
        $(this).nextAll('.hidden:first').slideToggle(500);
    }
}); 
```

我还分叉了你的小提琴来说明这种方法[的实际应用](http://jsfiddle.net/keTU8/)。

# youtube - YouTube 缩略图链接并非在所有情况下都有效

> ID：11334710
> 
> 赞同：14
> 
> 时间：2012-07-04T19:46:52.330
> 
> 标签：youtube

我正在开发的应用程序需要在给定 URL 的情况下获取总部 YouTube 缩略图。[使用这个答案](https://stackoverflow.com/a/2068371/823435)，我尝试使用`maxresdefault.jpg`来获得缩略图的最大分辨率，但在某些视频（看似随机）上，请求 404。

这里有些例子：

*   [http://img.youtube.com/vi/zIez5QVE3NI/maxresdefault.jpg](http://img.youtube.com/vi/zIez5QVE3NI/maxresdefault.jpg)作品
*   [http://img.youtube.com/vi/DaAfe5xTm8w/maxresdefault.jpg](http://img.youtube.com/vi/DaAfe5xTm8w/maxresdefault.jpg)不起作用

使用相同的 URL，使用相同视频键的其他请求确实有效：

*   [http://img.youtube.com/vi/zIez5QVE3NI/default.jpg](http://img.youtube.com/vi/zIez5QVE3NI/default.jpg)有效
*   [http://img.youtube.com/vi/DaAfe5xTm8w/default.jpg](http://img.youtube.com/vi/DaAfe5xTm8w/default.jpg)有效

为什么不能`maxresdefault.jpg`可靠地返回图像？这两个视频都是公开的，可以嵌入。

我会使用`0.jpg`，但它在图像的顶部和底部都有黑条。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-08T22:15:34.410

据我了解，YouTube 只为高分辨率视频生成高分辨率剧照。您链接的第一个以至少 1080p 的分辨率上传，而第二个则低于 720p。

看起来你唯一能做的就是拉视频源，检查是否仍然生成了高分辨率，如果没有，则自己放大较小的。

所有¹ YouTube 剧照均以 4:3 的纵横比呈现，因此如果视频为 16:9，则顶部和底部始终会出现黑条。在 HTML/CSS 中，这很容易通过将图像设置为 div 的背景并将 div 调整为正确的方面来解决。

¹ 除了 mqdefault.jpg 剧照，它们都是 16:9 纵横比 (320x180)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-14T04:30:50.153

2015 年更新：您的“maxresdefault”链接似乎都不起作用

试试这些：

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/0.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/1.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/2.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/3.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-13T04:22:37.187

**2019 年更新**::

```
https://i.ytimg.com/vi/<insert-youtube-video-id-here>/hqdefault.jpg 
```

似乎返回最高可能的图像....

1.jpg、2.jpg、3.jpg 通过剪辑的长度返回预览，这也很方便；）

# jquery - 在下拉列表更改事件上加载部分表单

> ID：11334713
> 
> 赞同：1
> 
> 时间：2012-07-04T19:47:00.263
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3

我有一个车牌下拉列表，其中最后一项是“新车牌”。默认情况下，表单不会显示新的车牌表单字段（新车牌的文本框，以及车牌所在州/省的下拉列表）。

我将如何根据“新车牌”的选择显示表格？

到目前为止，我已经创建了一个局部视图：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Namespace.ViewModels.ProfileMemberViewModel>" %>
<table cellspacing="2" cellpadding="2" width="100%" border="0" align="left">
<tr>
    <td>
        <%=Html.LabelFor(model => model.NewLicensePlate.LicensePlate, new { @class = "inputLabel" })%>
    </td>
    <td>
        <%=Html.TextBoxFor(model => model.NewLicensePlate.LicensePlate, new { @class = "inputField" })%>
    </td>
</tr>
<tr>
    <td>
        <%=Html.LabelFor(model => model.NewLicensePlate.PlateState, new { @class = "inputLabel" })%>
    </td>
    <td>
        <%=Html.DropDownListFor(model => model.NewLicensePlate.PlateState, Model.NewLicensePlate.PlateStates, new { @class = "inputField" })%>
    </td>
</tr> 
```

父表格：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<Paysite.Providers.ViewModels.ProfileMemberViewModel>" %>
<% using (Html.BeginForm("Confirm", "Profile", FormMethod.Post, new { @id = "Profile-form" }))
   {%>
...
<tr>
    <td>
        <%=Html.LabelFor(model => model.Member.LicensePlate, new { @class = "inputLabel" })%>
        <br />
        <br />
        <span class="small">(To add, select "New License Plate")</span>
    </td>
    <td>
        <%=Html.DropDownListFor(model => model.Member.LicensePlate, Model.Member.LicensePlates, new { @class = "inputField" })%>
    </td>
</tr>
</table>
<div id="NewLicensePlate">            
</div>
...
<%
   } %> 
```

父窗体中的 jQuery：

```
$("#Member_LicensePlate").change(function () {
  var selectedPlate = $("#Member_LicensePlate").val();
  if (selectedPlate == "New License Plate") {
    $("#NewLicensePlate").load('<%= Url.Action("NewLicensePlate") %>');
  } else {
    $('#NewLicensePlate').empty();
  }
}); 
```

视图模型：

```
public class ProfileMemberViewModel
{
    public ExistingMemberViewModel Member { get; set; }
    public NewLicensePlateViewModel NewLicensePlate { get; set; }
}

public class NewLicensePlateViewModel
{
    [Display(Name = "License Plate")]
    public string LicensePlate { get; set; }

    [Display(Name = "Province/State")]
    public string PlateState { get; set; }

    public IEnumerable<SelectListItem> PlateStates { get; set; }
} 
```

控制器动作：

```
public ActionResult NewLicensePlate()
{
    var model = new ProfileMemberViewModel();
    model.NewLicensePlate = new NewLicensePlateViewModel();

    DataSet statesDataSet = _statesRepo.GetStates();

    model.NewLicensePlate.PlateStates =
            Enumerable.Select(statesDataSet.Tables[0].AsEnumerable(), x => new SelectListItem
        {
            Text = x.Field<string>("NAME"),
            Value = x.Field<double>("ID").ToString()
        });

    return PartialView("NewLicensePlate", model);
} 
```

当我从父级发布到时`public ActionResult Confirm(ProfileMemberViewModel model)`，`model.NewLicensePlate`没有得到绑定，它是`null`. 我在这里做错了吗？我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:49:24.710

我认为最简单的方法是将所有字段放在相同的（父表单）中。隐藏新印版的控件。使用 javascript，您根据“新车牌”的选择显示它们。发布表单后，如果填写了控件，您将处理新的车牌

# c# - 使用 NEST ElasticSearch 库进行连接池

> ID：11334717
> 
> 赞同：4
> 
> 时间：2012-07-04T19:47:15.253
> 
> 标签：c#, connection-pooling, elasticsearch, nest

我目前正在使用 NEST ElasticSearch C# Library 与 ElasticSearch 进行交互。我的项目是一个 MVC 4 WebAPI 项目，它基本上构建了一个用于访问目录辅助信息的 RESTful Web 服务。

我们才刚刚开始使用 NEST，并且一直因缺乏文档而磕磕绊绊。那里的东西很有用，但它有一些非常大的漏洞。目前，我们需要的一切都可以正常工作，但是，我们遇到了连接有时需要一整秒的问题。我们想做的是使用某种连接池，类似于您与 SQL Server 交互的方式。

这是有关如何使用嵌套连接的文档：http: [//mpdreamz.github.com/NEST/concepts/connecting.html](http://mpdreamz.github.com/NEST/concepts/connecting.html)

以下是我们项目中的相关代码片段：

```
public class EOCategoryProvider : IProvider
{
    public DNList ExecuteQuery(Query query)
    {
        //Configure the elastic client and it's settings
        ConnectionSettings elasticSettings = new ConnectionSettings(Config.server, Config.port).SetDefaultIndex(Config.index);
        ElasticClient client = new ElasticClient(elasticSettings);

        //Connect to Elastic
        ConnectionStatus connectionStatus;
        if (client.TryConnect(out connectionStatus))
        {
            // Elastic Search Code here ...
        } // end if
    } // end ExecuteQuery
} // end EOCategoryProvider 
```

通过查看文档，我看不到连接池的任何规定。我一直在考虑实现我自己的（例如存储 3 或 4 个 ElasticClient 对象，并以循环方式选择它们），但我想知道是否有人有更好的解决方案。如果没有，是否有人对手动实现连接池的最佳方法有建议？有什么文章可以指点？

感谢你们提出的任何建议。

**更新**：这似乎与在每个请求上调用 TryConnect 以及特定的网络设置有关。当使用与 Elastic box 处于同一网络的机器时，问题完全消失；我的开发机器（到 Elastic 盒子平均需要 350 毫秒）有时似乎无法建立 http 连接，这导致 TryConnect 时间过长。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-04T20:39:26.153

您不必`TryConnect()`每次调用 Elasticsearch 时都调用。它基本上是您的应用程序启动时的健全性检查调用。

NEST 是 Elasticsearch 的 C# REST 客户端，默认`IConnection`使用`WebRequest.Create`已经汇集了 TCP 连接。

查看实际实现：[https ://github.com/elastic/elasticsearch-net/blob/master/src/Elasticsearch.Net/Connection/HttpConnection.cs](https://github.com/elastic/elasticsearch-net/blob/master/src/Elasticsearch.Net/Connection/HttpConnection.cs)

Reusing `ElasticClient` won't offer any performance gains since each call already gets its own `HttpWebRequest`. The whole client is built stateless on purpose.

I am however very interested in why calls are taking 1 second for you. Could you post the actual NEST code, how you are are measuring the calls and describe your data.

Disclaimer: I'm the author of NEST.

# actionscript-3 - 使用 AS3 沿 X 轴前后移动 Flash 对象

> ID：11334718
> 
> 赞同：0
> 
> 时间：2012-07-04T19:47:17.303
> 
> 标签：actionscript-3

我正在使用沿 X 轴来回移动的 Flash 对象创建一个 Flash 动画。例如，我想将对象从位置 x=10 移动到位置 x=100，然后在位置 x=100 停留 2 秒，然后以相同的运动特性返回到初始位置。我正在使用 Tween 类，它可以让我改变缓动等等，我也在使用 Tween yoyo 方法。问题是我不知道如何让对象在第二个位置停留几秒钟（在回到初始位置之前），我不知道如何停止 yoyo 事件。我希望对象来回移动，然后保持在初始位置，但是随着悠悠球它不断重复（我想我不应该使用悠悠球方法......）。我附上我到目前为止的代码：

```
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

var myTween = new Tween(rectangle, "x", Strong.easeInOut, 100,300, 1, true);

myTween.addEventListener(TweenEvent.MOTION_FINISH, onFinish);
function onFinish(e:TweenEvent):void {
myTween.yoyo();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:09:55.620

您应该在 onFinish 方法中设置超时。代码应如下所示：

```
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

var myTween = new Tween(rectangle, "x", Strong.easeInOut, 100,300, 1, true);

myTween.addEventListener(TweenEvent.MOTION_FINISH, onFinish);
function onFinish(e:TweenEvent):void {
  var delay:int = 1000;
  setTimeout(delay,reverse_tween); // delay - delay in milliseconds
}
function reverse_tween():void{
  myTween.yoyo();
  myTween.removeEventListener(TweenEvent.MOTION_FINISH, onFinish);
} 
```

希望能帮助到你

# javascript - 检测 Chrome 浏览器窗口宽度和高度以防止元素溢出

> ID：11334721
> 
> 赞同：0
> 
> 时间：2012-07-04T19:47:31.910
> 
> 标签：javascript, html, google-chrome, css

我正在寻找一个代码：

防止元素超出窗口边缘。OR 检测窗口宽度或高度，以便可以以 px 为单位设置元素的宽度/高度。

此代码只需要在 Google Chrome 中运行。

我做了很多研究，一切看起来都很复杂。没有简单的 CSS 解决方案吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:52:25.283

我遇到了 jQuery 为我解决的类似问题，

```
var width = jQuery(window).width(); 
```

还有一个 .height() 方法

# c++ - 有没有更好的方法来搜索文件中的字符串？

> ID：11334739
> 
> 赞同：3
> 
> 时间：2012-07-04T19:49:44.903
> 
> 标签：c++, search

我需要在（非文本）文件中搜索字节序列“9µ}Æ”（或“\x39\xb5\x7d\xc6”）。

在网上搜索了 5 个小时后，这是我能做的最好的。它有效，但我想知道是否有更好的方法：

```
char buffer;

int pos=in.tellg();

// search file for string
while(!in.eof()){
    in.read(&buffer, 1);
    pos=in.tellg();
    if(buffer=='9'){
        in.read(&buffer, 1);
        pos=in.tellg();
        if(buffer=='µ'){
            in.read(&buffer, 1);
            pos=in.tellg();
            if(buffer=='}'){
                in.read(&buffer, 1);
                pos=in.tellg();
                if(buffer=='Æ'){
                    cout << "found";
                }
            }
        }
    }

    in.seekg((streampos) pos); 
```

笔记：

*   我不能用`getline()`。它不是文本文件，因此可能没有很多换行符。
*   在我尝试使用多字符缓冲区，然后将缓冲区复制到 C++ 字符串，然后使用`string::find()`. 这不起作用，因为`'\0'`整个文件中有很多字符，因此缓冲区中的序列在复制到字符串时会被剪得很短。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T20:14:55.943

类似于 bames53 发布的内容；我使用向量作为缓冲区：

```
std::ifstream ifs("file.bin");

ifs.seekg(0, std::ios::end);
std::streamsize f_size = ifs.tellg();
ifs.seekg(0, std::ios::beg);

std::vector<unsigned char> buffer(f_size);
ifs.read(buffer.data(), f_size);

std::vector<unsigned char> seq = {0x39, 0xb5, 0x7d, 0xc6};

bool found = std::search(buffer.begin(), buffer.end(), seq.begin(), seq.end()) != buffer.end(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:29:57.497

因为您说由于字符串中的空终止符字符而无法搜索整个文件，所以这里有一个替代方法，它读取整个文件并使用递归来查找整个文件中第一次出现的字符串。

```
 #include <iostream>
    #include <fstream>
    #include <string>

    using namespace std;

    string readFile (char *fileName) {
      ifstream fi (fileName);
      if (!fi)
        cerr << "ERROR: Cannot open file" << endl;
      else {
        string str ((istreambuf_iterator<char>(fi)), istreambuf_iterator<char>());
        return str;
      }
      return NULL;
    }

    bool findFirstOccurrenceOf_r (string haystack, char *needle, int haystack_pos, int needle_pos, int needle_len) {
      if (needle_pos == needle_len)
        return true;
      if (haystack[haystack_pos] == needle[needle_pos]) 
        return findFirstOccurrenceOf_r (haystack, needle, haystack_pos+1, needle_pos+1, needle_len);
      return false;
    }

    int findFirstOccurrenceOf (string haystack, char *needle, int length) {
      int pos = -1;
      for (int i = 0; i < haystack.length() - length; i++) {
        if (findFirstOccurrenceOf_r (haystack, needle, i, 0, length))
          return i;
      }
      return pos;
    }

    int main () {
      char str_to_find[4] = {0x39, 0xB5, 0x7D, 0xC6};
      string contents = readFile ("input");

      int pos = findFirstOccurrenceOf (contents, str_to_find, 4);

      cout << pos << endl;
    } 
```

如果文件不是太大，您最好的解决方案是将整个文件加载到内存中，这样您就不需要继续从驱动器读取。如果文件太大而无法一次加载，您可能希望一次加载文件的块。但是，如果您确实加载了夹头，请确保检查块的边缘。您的块可能恰好在您正在搜索的字符串的中间分裂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T20:10:01.097

该程序将整个文件加载到内存中，然后`std::search`在其上使用。

```
int main() {
    std::string filedata;
    {
        std::ifstream fin("file.dat");
        std::stringstream ss;
        ss << fin.rdbuf();
        filedata = ss.str();
    }

    std::string key = "\x39\xb5\x7d\xc6";
    auto result = std::search(std::begin(filedata), std::end(filedata),
                              std::begin(key), std::end(key));
    if (std::end(filedata) != result) {
        std::cout << "found\n";
        // result is an iterator pointing at '\x39'
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:56:19.140

如果您不介意将整个文件加载到内存数组中（或使用 mmap() 使其看起来像文件在内存中），那么您可以在内存中搜索您的字符序列，这有点更容易做到：

```
// Works much like strstr(), except it looks for a binary sub-sequence rather than a string sub-sequence
const char * MemMem(const char * lookIn, int numLookInBytes, const char * lookFor, int numLookForBytes)
{
        if (numLookForBytes == 0)              return lookIn;  // hmm, existential questions here
   else if (numLookForBytes == numLookInBytes) return (memcmp(lookIn, lookFor, numLookInBytes) == 0) ? lookIn : NULL;
   else if (numLookForBytes < numLookInBytes)
   {
      const char * startedAt = lookIn;
      int matchCount = 0;
      for (int i=0; i<numLookInBytes; i++)
      {
         if (lookIn[i] == lookFor[matchCount])
         {
            if (matchCount == 0) startedAt = &lookIn[i];
            if (++matchCount == numLookForBytes) return startedAt;
         }
         else matchCount = 0;
      }
   }
   return NULL;
} 
```

....然后您可以在内存数据数组上调用上述函数：

```
char * ret = MemMem(theInMemoryArrayContainingFilesBytes, numBytesInFile, myShortSequence, 4);
if (ret != NULL) printf("Found it at offset %i\n", ret-theInMemoryArrayContainingFilesBytes);
            else printf("It's not there.\n"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T20:14:36.803

```
const char delims[] = { 0x39, 0xb5, 0x7d, 0xc6 };
char buffer[4];
const size_t delim_size = 4;
const size_t last_index = delim_size - 1;

for ( size_t i = 0; i < last_index; ++i )
{
  if ( ! ( is.get( buffer[i] ) ) )
    return false; // stream to short
}

while ( is.get(buffer[last_index]) )
{
  if ( memcmp( buffer, delims, delim_size ) == 0 )
    break; // you are arrived
  memmove( buffer, buffer + 1, last_index );
} 
```

您正在寻找 4 个字节：

```
unsigned int delim = 0xc67db539;
unsigned int uibuffer;
char * buffer = reinterpret_cast<char *>(&uibuffer);

for ( size_t i = 0; i < 3; ++i )
{
  if ( ! ( is.get( buffer[i] ) ) )
    return false; // stream to short
}

while ( is.get(buffer[3]) )
{
  if ( uibuffer == delim )
    break; // you are arrived
  uibuffer >>= 8;
} 
```

# java - 3个表之间连接的休眠查询条件

> ID：11334743
> 
> 赞同：1
> 
> 时间：2012-07-04T19:50:45.590
> 
> 标签：java, hibernate, hibernate-criteria

我有一个 sql 查询：

```
select * from A
INNER JOIN B
ON A.id = B.id
INNER JOIN C
ON B.id = C.id
INNER JOIN D
ON C.id = D.id
where D.name = 'XYZ'
   and D.Sex = 'M' 
```

我一直在尝试为上述 sql 提供休眠查询条件，但是遇到了问题。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T21:01:31.520

```
Criteria c = session.createCriteria(A.class, "a");
                    .createAlias("a.b", "b")
                    .createAlias("b.c", "c")
                    .createAlias("c.d", "d")
                    .add(Restrictions.eq("d.sex", "M"))
                    .add(Restrictions.eq("d.name", "XYZ")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:55:25.023

在您的问题上，您想要执行*笛卡尔 Join*，这不受 Criteria 的支持，尽管您可以使用 HQL 执行此操作，如下所示。[这里](https://stackoverflow.com/questions/720502/hibernate-criteria-joining-table-without-a-mapped-association)有一个类似的问题

使用 HQL 查询，您可以执行以下操作：

```
select a from 
   A a, 
   B b, 
   C c 
where 
   a.id = b.id and 
   c.id = b.id and 
   d.id = c.id and 
   d.name = 'XYZ' and 
   d.sex = 'M' 
```

该查询用于常规休眠查询：

```
Query query = session.createQuery(query); // <-- here you use the query above
List results = query.list(); 
```

# objective-c - viewDidLoad 中的 CoreData performFetch 不起作用

> ID：11334753
> 
> 赞同：3
> 
> 时间：2012-07-04T19:52:32.357
> 
> 标签：objective-c, ios, cocoa-touch, core-data, nsfetchedresultscontroller

当我的主视图控制器被加载并调用时，`viewDidLoad`我正在执行一个获取请求并退出一个数组或我的核心数据对象：

```
+ (NSArray *)getData {

    // Fetch Data
    NSError *error = nil;
    if (![[[AppDelegate instance] fetchedResultsController] performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    NSArray *items = [[AppDelegate instance].fetchedResultsController fetchedObjects];
    return items;

}//end 
```

出于某种原因，从 调用时返回一个空数组`viewDidLoad`。

如果我从中调用相同的方法，`viewDidAppear:`它可以正常工作并返回`NSArray`我的`CoreData`对象​​。

有没有理由为什么这不起作用`viewDidLoad`？

**编辑：**

获取结果控制器方法：

```
/**
 * The controller the gets our results from core data
 *
 * @version $Revision: 0.1
 */
- (NSFetchedResultsController *)fetchedResultsController {

    if (fetchedResultsController != nil) {
        return fetchedResultsController;
    }

    // Create and configure a fetch request
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"SiteConfig" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];
    // Create the sort descriptors array
    NSSortDescriptor *sectionTitle = [[NSSortDescriptor alloc] initWithKey:@"createdDate" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sectionTitle, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    // Create and initialize the fetch results controller
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];
    self.fetchedResultsController = aFetchedResultsController;
    fetchedResultsController.delegate = self;

    // Memory management

    return fetchedResultsController;

}//end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:55:30.733

我的猜测是您的视图控制器是 MainWindow.xib 的一部分，因此在您的应用程序委托准备好核心数据上下文之前调用它的 viewDidLoad。

无论如何，您可能都希望在 viewWillAppear 中运行它，以便在离开屏幕并返回时获得新数据。另一种选择是确保应用程序委托响应 fetchedResultsController 通过准备好核心数据堆栈（如果尚未准备好）。

# preg-match - 需要简单的 preg_match 正则表达式

> ID：11334756
> 
> 赞同：0
> 
> 时间：2012-07-04T19:52:57.047
> 
> 标签：preg-match, php-5.3, strtr

我正在尝试匹配我的字符串中包含的标签，我`@[anyNumbers:anyNumbers:anyLetters]` 希望删除中间的`@[]`所有内容作为我以后可以过滤的字符串。
完成此任务的最简单方法是什么？

```
$str = 'Have you heard of the @[159208207468539:274:One Day without Shoes] (ODWS) campaign?  ODWS is an annual initiative by @[8416861761:274:TOMS] to bring awareness around the impact a pair of shoes can have on a child's life.';
    function gettag($text){
    //
            //$regex = "\@[([a-z0-9-:]*)\]";
            //$match = preg_match("/^$regex$/", $text);
                    //return $match;
                    return preg_replace('/@\[(\d+:\d+:[a-zA-Z]+)\]/', '${1}', $text);

    }
    gettag($str); 
```

返回

> 你听说过@[159208207468539:274:One Day without Shoes] (ODWS) 活动吗？ODWS 是一项由 8416861761:274:TOMS 发起的年度倡议，旨在让人们了解一双鞋可能对孩子的生活产生的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:03:02.270

```
<?php

$string = "@[123:456:abcZ]";
preg_match('/^@\[(([0-9]+:){2}[a-zA-Z]+)\]$/', $string, $matches);

echo $matches[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:01:42.777

使用稍微修改过的模式版本，您可以这样做：

```
function gettag($text) {
    return preg_replace('/@\[([ a-z0-9-:]*)\]/i', '${1}', $text);
} 
```

如果您希望它更具体，我们可以将模式修改为更严格：

```
function gettag($text) {
    return preg_replace('/@\[(\d+:\d+:[a-zA-Z ]+)\]/', '${1}', $text);
} 
```

[**在键盘上查看**](http://codepad.org/zsOSgXwj)

# jpa - @ManyToOne 单向删除

> ID：11334759
> 
> 赞同：1
> 
> 时间：2012-07-04T19:53:14.323
> 
> 标签：jpa, eclipselink, many-to-one

我在人和车之间有一个@ManyToOne 单向关系，这意味着一辆车可以由几个人拥有。问题是当我删除汽车时，汽车 ID 不会从 Person 的实体连接列中删除。有没有办法配置 JPA 在删除汽车后从车主加入列中删除汽车 ID？

**注意：** 使用 orpahRemoval=true 将无济于事，因为我需要将父级的汽车引用更新为 null，并且每个实体（汽车/人）不依赖于另一个实体的存在......

```
 @Entity
    public class Car{
        @Id
        @GeneratedValue
        private long id;
    }

    @Entity
    public class Person {
        @Id
        @GeneratedValue
        private long id;

        @ManyToOne
        @JoinColumn(name="CAR_ID")
        private Car car;  
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:07:08.050

不，您需要执行查询以查找所有拥有给定汽车的人，将他们的汽车设置为空，然后删除汽车：

```
List<Person> persons = em.createQuery("select p from Person p where p.car = :car", Person.class)
                         .setParameter("car", car)
                         .getResultList();
for (Person person : persons) {
    person.setCar(null);
}
em.remove(car); 
```

# java - “表格布局”库（工具包类）中的 Scala 不可满足的循环依赖

> ID：11334763
> 
> 赞同：3
> 
> 时间：2012-07-04T19:53:26.083
> 
> 标签：java, scala, compiler-errors, libgdx, tablelayout

当我尝试使用包含来自[该库](http://code.google.com/p/table-layout/)`sbt`的 a 实例的一些代码进行编译时，我收到此错误：`Table`

```
java.lang.AssertionError: assertion failed: unsatisfiable cyclic dependency in 'class Toolkit' 
```

它似乎适用于 Java，所以我不明白为什么它在 Scala 中失败。

这是工具包类：[http ://code.google.com/p/table-layout/source/browse/branches/v1/tablelayout/src/com/esotericsoftware/tablelayout/Toolkit.java](http://code.google.com/p/table-layout/source/browse/branches/v1/tablelayout/src/com/esotericsoftware/tablelayout/Toolkit.java)

只要我得到这个错误，我就完全停止了我的项目:(。

**编辑：**它适用于每个里程碑的 Scala 2.10.0，**但是**这个版本的 scala 不适用于 Android（或者至少现在还没有...... [或至少不适用于 libgdx ...]）。所以我仍然需要一种方法来解决这个问题，即使它有点拘谨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:14:18.160

如果您强制 scalac 以正确的顺序加载依赖项，它将编译，如下所示：

> classOf[com.esotericsoftware.tablelayout.Toolkit[_,_,_]]
> 
> println(new com.badlogic.gdx.scenes.scene2d.ui.Table toString)

一定是 2.10 中意外修复的错误

# c# - C# 错误：使用“switch”时出现未分配的局部变量错误？

> ID：11334764
> 
> 赞同：4
> 
> 时间：2012-07-04T19:53:31.720
> 
> 标签：c#, visual-studio, compiler-errors

我想要实现的是，显示以给定字符（通过 textbox1）结尾/以（用户通过 comboBox1 选择类型）开头的行数。

尝试编译此代码：

```
string needle=textBox1.Text.Trim(), cboxSelection = comboBox1.Text;
int count;
switch (cboxSelection)
{
    case "Starting with":
        count = File.ReadLines(openFileDialog1.FileName).Count(line => Regex.IsMatch(line, "^" + needle + ".*$"));
        break;
    case "Ending with":
        count = File.ReadLines(openFileDialog1.FileName).Count(line => Regex.IsMatch(line, "^.*" + needle + ".*$"));                    
        break;
}
string strCount = count.ToString(); // error line
label6.Text = "There are " + strCount + " lines " + cboxSelection + " " + needle + " character."; 
```

收到错误消息：`Use of unassigned local variable 'count'`。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T19:54:47.567

您的局部`count`变量在使用时尚未明确分配。要么将其声明为

`int count = 0`;

或在您的案例陈述中添加一个`default`子句：

`default: count = 0;`

您的`switch`语句不能保证输入任何一种情况，因此`count`可以保持未分配状态。如果需要这两种情况之一，您应该在您的情况下抛出异常`default`：

```
default: throw new ArgumentException("Invalid selection"); 
```

您应该始终`default`在 switch 语句中使用 case 来分配默认值或防止出现意外状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:55:08.830

```
you can try with int count = 0;

and add ; not , between two instructions

string needle=textBox1.Text.Trim(); 
cboxSelection = comboBox1.Text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T19:55:08.593

`Count`未在所有代码路径上分配。如果您的交换机没有“开始于”或“结束于”，它将是`null`.

你可以初始化它：

`int count = 0;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T19:56:13.217

这是因为你没有覆盖你的开关中的所有可能性......所以你的代码中有一个“路径”，你`label6.Text`永远不会分配`count`.

您应该 为您的开关分配一个初始值`count`或添加一个`default`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T19:56:29.970

您的 switch 语句并不涵盖所有情况（实际上不能， cboxSelection 是一个字符串），因此在您使用它之前可能没有为 count 分配任何内容。

向开关添加默认情况以修复它。

# c - 在C中将char附加到char *？

> ID：11334773
> 
> 赞同：1
> 
> 时间：2012-07-04T19:54:25.680
> 
> 标签：c, string, char, append

我正在尝试制作一个快速函数，通过其编号获取字符串中的单词/参数：

```
char* arg(char* S, int Num) {
    char* Return = "";
    int Spaces = 0;
    int i = 0;
    for (i; i<strlen(S); i++) {
        if (S[i] == ' ') {
            Spaces++;
        }
        else if (Spaces == Num) {
            //Want to append S[i] to Return here.
        }
        else if (Spaces > Num) {
            return Return;
        }
    }
    printf("%s-\n", Return);
    return Return;
} 
```

我找不到将字符放入`Return`. 我发现了很多建议`strcat()`或技巧的帖子，但每个帖子都有段错误。我也看到有人说`malloc()`应该使用它，但我不确定我是如何在这样的循环中使用它的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:06:26.957

我不会声称理解您正在尝试做什么，但是您的代码有两个问题：

*   您正在将只读字符串分配给`Return`; 该字符串将在您的二进制数据部分中，该部分是只读的，如果您尝试修改它，您将得到一个段错误。
*   你的 for 循环是 O(n^2)，因为`strlen()`是 O(n)

有几种不同的方法可以解决“如何返回字符串”问题。例如，您可以：

*   使用`malloc()`/`calloc()`分配一个新字符串，如已建议的那样
*   使用`asprintf()`，这很相似，但如果需要，可以为您提供格式
*   将输出字符串（及其最大大小）作为参数传递给函数

前两个需要调用函数来`free()`返回值。第三个允许调用者决定如何分配字符串（堆栈或堆），但需要某种关于输出字符串所需的最小大小的协定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:14:44.643

在您的代码中，当函数返回时， then`Return`也将消失，因此此行为未定义。它可能会起作用，但你*永远不*应该依赖它。

通常在 C 中，您希望将“return”字符串作为参数传递，这样您就不必一直使用`free`它。两者都需要调用方的局部变量，但是`malloc`'ing 它需要额外的调用来释放分配的内存，并且比简单地将指针传递给局部变量更昂贵。

至于附加到字符串，只需使用数组表示法（跟踪当前字符/索引）并且不要忘记在末尾添加一个空字符。

例子：

```
int arg(char* ptr, char* S, int Num) {
    int i, Spaces = 0, cur = 0;
    for (i=0; i<strlen(S); i++) {
        if (S[i] == ' ') {
            Spaces++;
        }
        else if (Spaces == Num) {
            ptr[cur++] = S[i]; // append char
        }
        else if (Spaces > Num) {
            ptr[cur] = '\0';   // insert null char
            return 0;          // returns 0 on success
        }
    }

    ptr[cur] = '\0';           // insert null char
    return (cur > 0 ? 0 : -1); // returns 0 on success, -1 on error
} 
```

然后像这样调用它：

```
char myArg[50];
if (arg(myArg, "this is an example", 3) == 0) {
    printf("arg is %s\n", myArg);
} else {
    // arg not found
} 
```

只要确保你没有溢出`ptr`（例如：通过传递它的大小并在函数中添加一个检查）。

有很多方法可以改进你的代码，但让我们从使其符合标准开始。;-)

*`malloc`PS：除非你**需要，**否则不要。在那种情况下，你不会。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:17:22.023

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *arg(const char *S, unsigned int Num) {
    char *Return = "";
    const char *top, *p;
    unsigned int Spaces = 0;
    int i = 0;

    Return=(char*)malloc(sizeof(char));
    *Return = '\0';
    if(S == NULL || *S=='\0') return Return;
    p=top=S;
    while(Spaces != Num){
        if(NULL!=(p=strchr(top, ' '))){
            ++Spaces;
            top=++p;
        } else {
            break;
        }
    }
    if(Spaces < Num) return Return;
    if(NULL!=(p=strchr(top, ' '))){
        int len = p - top;
        Return=(char*)realloc(Return, sizeof(char)*(len+1));
        strncpy(Return, top, len);
        Return[len]='\0';
    } else {
        free(Return);
        Return=strdup(top);
    }
    //printf("%s-\n", Return);
    return Return;
}

int main(){
    char *word;

    word=arg("make a quick function", 2);//quick
    printf("\"%s\"\n", word);

    free(word);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T00:51:49.737

您不能将任何内容分配给字符串文字，例如“”。

您可能希望使用循环来确定要查找的字符串中单词开头的偏移量。然后通过继续遍历字符串找到它的长度，直到遇到结尾或另一个空格。然后，您可以 malloc 一个大小等于 offset+1 大小的字符数组（对于空终止符）。最后，将子字符串复制到这个新缓冲区中并返回它。

此外，如上所述，您可能希望从循环中删除 strlen 调用 - 大多数编译器会对其进行优化，但它确实是数组中每个字符的线性运算，使得循环 O(n**2)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T20:03:07.707

```
char * Return;   //by the way horrible name for a variable.
Return = malloc(<some size>);
......
......
*(Return + index) = *(S+i); 
```

# python - 我究竟做错了什么？加 1 使用输入

> ID：11334774
> 
> 赞同：0
> 
> 时间：2012-07-04T19:54:26.657
> 
> 标签：python

遇到这个问题有些困难。程序应该从用户那里得到一个号码。这将是三角形的数量。第一个三角形应该有两行。每个新三角形将比上一个三角形多出一行。这就是我所拥有的：

```
numTri = input('Please umber of triangles: ')
numTri = eval(numTri)
numRow = 2
x = 0
while j<numTri:
   y = '*'
   z = 0
   while z<numRow:
         print y
         y = y + *
         z  += 1
    x += 1
    numRow += 1 
```

在打印行上出现无效的语法错误。不知道我是否做错了什么。有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T20:18:01.950

假设您使用的是 Python 3，那么您的代码中有很多错误。让我们看看它们：

# 主要问题

**`j`变量_**

您`j`在循环条件中使用了一个变量，该变量未设置，也未在任何地方使用。这将导致错误：

```
while j<numTri: 
```

我相信您想使用该`x`变量：

```
while x<numTri: 
```

**`print()`是一个函数**

在 Python 3 中，您应该将`print()`函数的参数放在括号之间，但情况并非如此：

```
 print y 
```

太容易解决了：

```
 print(y) 
```

请注意，括号在 Python 2 中是可选的。

**`'*'`不带引号的字符：**

您尝试将`'*'`char 附加到字符串 from`y`但不使用引号将 char 括起来：

```
 y = y + * 
```

解释器会将此星号视为乘法运算符，这将产生错误。只需用引号将其括起来（单引号或双引号，都没有关系）：

```
 y = y + '*' 
```

**缩进问题**

您的代码中一个特别有害的问题是，在第二个`while`循环之后，您的代码不会返回到循环的相同缩进级别。我用[打开的盒子](http://www.fileformat.info/info/unicode/char/2423/index.htm)替换了下面的空格，以便我们计算它们：

```
␣␣␣while z<numRow:
␣␣␣␣␣␣␣␣␣print y
␣␣␣␣␣␣␣␣␣y = y + *
␣␣␣␣␣␣␣␣␣z  += 1
␣␣␣␣x += 1
␣␣␣␣numRow += 1 
```

唉，与该行相比，最后两行多了一个空格`while`。你应该删除那些虚假的空间。

结果代码将是：

```
numTri = input('Please umber of triangles: ')
numTri = eval(numTri)
numRow = 2
x = 0
while x<numTri:
   y = '*'
   z = 0
   while z<numRow:
         print(y)
         y = y + '*'
         z  += 1
   x += 1
   numRow += 1 
```

# 小问题

您的代码中还有一些其他细节将被视为*不良做法*。这些对你来说并不重要*，*因为你*真的是*新手，但我们可以探索其中的一些。

**避免`eval()`**

`eval()`是一个强大但有风险的功能，所以我们避免使用它。在您的情况下特别容易做到，因为`int()`会将读取的字符串转换为整数而不会出现问题：

```
numTri = input('Please umber of triangles: ')
numTri = int(numTri) 
```

**非标准压痕**

有时，您将循环内的内容缩进四个空格：

```
␣␣␣y = '*'
␣␣␣z = 0
␣␣␣while z<numRow: 
```

然后有六个空格

```
 ␣␣␣␣␣␣print(y)
   ␣␣␣␣␣␣y = y + '*'
   ␣␣␣␣␣␣z  += 1 
```

甚至有四个空格，这会导致错误：

```
␣␣␣␣x += 1
␣␣␣␣numRow += 1 
```

最好的办法是始终使用相同的缩进尺寸。[PEP 8](http://www.python.org/dev/peps/pep-0008/)（针对所有 Python 程序员的一组建议）建议每个缩进使用四个空格：

```
␣␣␣␣y = '*'
␣␣␣␣z = 0
␣␣␣␣while z<numRow:
    ␣␣␣␣print(y)
    ␣␣␣␣y = y + '*'
    ␣␣␣␣z  += 1
␣␣␣␣x += 1
␣␣␣␣numRow += 1 
```

**`while`代替`for`**

这对新手来说很难，但指出它可能会有所帮助。[`for`](http://docs.python.org/tutorial/controlflow.html#for-statements)如果您对函数使用循环，您的代码会更好[`range()`](http://docs.python.org/release/3.1.5/library/functions.html#range)：

```
for x in range(0, numTri+1):
    y = '*'
    for z in range(0, numRow+1):
        print(y)
        y = y + '*'
    numRow += 1 
```

但是，作为一名学生，我相信您将来会了解此功能，所以请放轻松:)

结果代码：

```
numTri = input('Please umber of triangles: ')
numTri = int(numTri)
numRow = 2
for x in range(0, numTri+1):
    y = '*'
    for z in range(0, numRow+1):
        print(y)
        y = y + '*'
    numRow += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:58:22.090

但我认为语法错误（从而回答您的问题）是因为您使用的是`print`需要圆括号的 Python 3。所以 ：

```
print ( y ) 
```

如果您只想为您的编程任务获得最高成绩：

```
print('\n'.join('*'*y for x in range(int(input('Please umber of triangles: '))) for y in range(1,x+3))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T20:00:01.803

`j``while`在到达循环之前从未定义过。也许你的意思是`while x < numTri:`相反？

此外，该

```
x = 0
while x < numTri:
    # do something
    x += 1 
```

构造不是很Pythonic；尝试

```
for x in range(numTri):
    # do something 
```

反而。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T19:55:16.827

```
numTri = int(raw_input('Please umber of triangles: ')) 
```

或在 python 3.x 上

```
numTri = int(input('Please umber of triangles: ')) 
```

# scroll - ScrollViewer 水平鼠标滚轮滚动

> ID：11334775
> 
> 赞同：3
> 
> 时间：2012-07-04T19:54:31.960
> 
> 标签：scroll, windows-runtime

我正在尝试找到一种在 WimRT 中使用鼠标滚轮滚动水平 ScrollViewer 的方法。我知道在 WPF 中很容易实现，但在 WinRT 中似乎没有这样的解决方法。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T02:30:00.053

从我到目前为止所做的事情来看，您应该能够将 ScollViewer 的样式设置为

```
Style="{StaticResource HorizontalScrollViewerStyle}" 
```

定义在`StandardStyles.xaml`

# django - 如何检查是否需要表单字段？

> ID：11334777
> 
> 赞同：0
> 
> 时间：2012-07-04T19:54:38.213
> 
> 标签：django

在我的模型中，我定义了一个必需的字段类，如下所示：

```
class Contact(models.Model):
    last_name = models.CharField(_(u"Last Name"), max_length=50) 
```

对于表单，我只是使用 ModelForm 来保持简单：

```
class ContactsForm(ModelForm):
   class Meta:
        model = Contact 
```

我知道有第三方模块可以帮助渲染表单，但是现在很简单，看看我什么时候达到了限制，所以我尝试了这个：

```
 <tr>
                <td>
                    {{form.last_name.label}}:
                </td>
                <td>
                    {{form.last_name}}
                    {% if  form.last_name.required %}(*){% endif %}
                </td>
            </tr> 
```

令人惊讶的是，即使**(*)**是必填字段，我也看不到它。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T21:25:44.823

我现在无法对此进行测试，但我很确定您需要`form.last_name.field.required`-`form.last_name`的一个实例`BoundField`，并且它有一个`field`指向原始 的属性，而原始`CharField`又包含该`required`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:38:07.593

我认为 tou 可以覆盖必填字段的默认标签。我的意思是

```
class ContactsForm(ModelForm):
   last_name = CharField(label='Last Name (*)')

   class Meta:
       model = Contact 
```

# java - 用 Java 遍历网页中的所有文件名/url

> ID：11334782
> 
> 赞同：0
> 
> 时间：2012-07-04T19:54:54.940
> 
> 标签：java, regex, parsing, web-crawler

我正在尝试用 Java 抓取网页，我需要在页面中搜索 URL 和文件路径，这可能是相对的，也可能是绝对的。（例如 ../../file.gif 或[http://hostname.com/file.gif](http://hostname.com/file.gif)）。并非所有这些都会有 html 标签`<a href>`，因为某些文件路径可能嵌入在某些 javascript 中。

如果有人能指出我正确的方向，那就太好了。

# java - 在没有上下文的情况下在运行时创建 SQLite DB

> ID：11334787
> 
> 赞同：2
> 
> 时间：2012-07-04T19:55:13.620
> 
> 标签：java, android, sqlite

> **可能重复：**
> [在 Android 库中创建 SQLite DB](https://stackoverflow.com/questions/11333580/create-sqlite-db-in-android-library)

我正在制作一个 Java 库，我需要在运行时打开或创建一个 SQLite 数据库，以便我的库存储数据等...

我见过的所有适用于 Android 的 SQLite API 都需要一个上下文，从一个活动到创建一个数据库，因为我正在做一个库，没有活动等......我怎样才能获得一个 SQLite 数据库？

问题是我的图书馆只有一个公共类，在我的图书馆内部，我需要创建一个供私人使用的 SQLite DB。所以我不能只要求用户在上下文中发送。或者我可以吗？

看看谷歌在他们的图书馆里是如何做到的？在我使用 Android 的分析库时，除了用于分析的应用程序 ID 之外，我不会传递任何其他内容。在他们的文档中，您可以阅读：“页面浏览量、事件和电子商务点击存储在***SQLite 数据库***中，并定期发送到 Google Analytics 服务器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:01:43.083

> 如何获得 SQLite 数据库？

让图书馆的使用者为您提供`Context`.

> 所以我不能只要求用户在上下文中发送。或者我可以吗？

是的你可以。如果您注意到，`android.*`包中的许多类都有将 a`Context`作为参数的方法。您也可以拥有将 a`Context`作为参数的方法。

现在，您将需要记录您的预期用途`Context`以及将接触它的对象的寿命，以便您的库的使用者可以传入一个适当的对象。例如，如果您的库将创建一个包含 a 的静态数据成员`SQLiteOpenHelper`，您将希望库的使用者实际为您提供一个`Application`，而不是`Activity`,`Service`或其他`Context`，这样您就不会遇到垃圾收集问题.

# javascript - Ajax 从另一个网页拉取内容

> ID：11334789
> 
> 赞同：-1
> 
> 时间：2012-07-04T19:55:21.313
> 
> 标签：javascript, ajax

所以我得到了这个从另一个网站提取 rss 提要的代码（我问过他们，他们给了我许可） 我不知道我应该在 TAG1 和 TAG2 中写什么。基本上这只是我的问题：这是 html（它是一个 ajaxed 页面）

```
<!doctype html>
<html lang="hu">
<head>
    <title>Videók</title>
    <meta charset="utf-8"/>
        <script type="text/javascript" src="../js/videok.js"></script>
</head>
<body>
    <h2><a href="#" style="font-size:15pt; color:#ff00e8; text-decoration: none;">Van  egy  jó  videód? Töltsd fel és kikerülhet az oldalra!</a></h2>
        <div id="videok"></div>
</body>        
</html> 
```

这是用于拉动的 Javascript

```
window.onload = initAll;
var xhr = false;
var dataArray = new Array();
var url = "choose url";

function initAll() {

if (window.XMLHttpRequest) {
    xhr = new XMLHttpRequest();
}
else {
    if (window.ActiveXObject) {
        try {
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch (e) { }
    }
}

if (xhr) {
    xhr.onreadystatechange = setDataArray;
    xhr.open("GET", url, true);
    xhr.send(null);
}
else {
    alert("couldn't create XMLHttpRequest");
}
}

function setDataArray() {
var tag1 = "subject1";
var tag2 = "subject2";

if (xhr.readyState == 4) {
    if (xhr.status == 200) {
        if (xhr.responseXML) {

            var allData = xhr.responseXML.getElementsByTagName(tag1);
            for (var i=0; i<allData.length; i++) {
                dataArray[i] = allData[i].getElementsByTagName(tag2)[0].firstChild.nodeValue;
            }
        }
    }
    else {
        alert("the request failed" + xhr.status);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:02:14.580

您将无法使用 javascript 从另一个网页中提取内容，因为 javascript 在浏览器中被沙盒化。沙盒意味着您只能将请求发送到 javascript 最初来自的同一域（也称为“相同的源策略”）。

您可以使用像 php 这样的服务器端语言进行拉取，然后通过 ajax 将其传递给 javascript。

您发布的代码看起来只是进行了一个简单的 ajax 调用，但在尝试从您自己的站点以外的任何地方请求 RSS 时，它应该不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:11:24.637

最好让应用程序的服务器端获取 xml 的数据并按照您的需要格式化数据。

您将让 Ajax 请求到达服务器的端点，然后您的服务器将获取 xml 数据，正确格式化并使用正确格式化的数据响应请求。

# javascript - 为什么这个函数会触发多次？

> ID：11334791
> 
> 赞同：5
> 
> 时间：2012-07-04T19:55:25.253
> 
> 标签：javascript, html

我正在填写此列表：

```
<ul id="FolderList"></ul> 
```

使用 jquery 生成以下 HTML 的文件夹列表：

```
<ul id="FolderList">
    <li id="FolderList0" onclick="return myFunc(0)">Item 1</li>
    <li id="FolderList1" onclick="return myFunc(1)">Item 2</li>
    <li id="FolderList2" onclick="return myFunc(2)">Item 3
        <ul>
            <li id="FolderList2a" onclick="return myFunc(2a)">Sub Item 1</li>
            <li id="FolderList2b" onclick="return myFunc(2b)">Sub Item 2
                <ul>
                    <li id="FolderList2bi" onclick="return myFunc(2bi)">Subsub Item 1</li>
                </ul>
            </li>
        </ul>          
    </li>
</ul> 
```

...

```
function myFunc(id) {
//do something 
```

返回假；};

出于某种原因，如果我单击 1 级 li 项目，函数 myFunc() 会按预期执行。如果我单击“2 级”项目（即：FolderList2a），myFunc 将被调用两次。如果我单击第三级（即：FolderList2bi），它会被调用 3 次 - 依此类推。有谁知道这里发生了什么？！提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T19:58:56.253

单击事件正在[冒泡](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-bubbling)Dom
~~如果要防止冒泡，请`myFunc`返回 false~~

要停止冒泡，您需要访问事件对象，`event.stopPropagation`或者`event.cancelBubble`取决于浏览器。

[http://jsfiddle.net/Jetyc/3/](http://jsfiddle.net/Jetyc/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T19:56:42.047

你应该传递一个字符串作为参数，所以引用它：

```
 .--.-----------------
                                             v  v
<li id="FolderList2a" onclick="return myFunc('2a')">Sub Item 1</li> 
```

并放在`return false`函数的末尾：

```
function myFunc(id) {
    //do something

    return false;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:59:28.010

您应该使用它`.bind()`来避免冒泡 DOM。

```
$("#FolderList li").bind("click", function() {
//do stuff
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T20:00:18.853

该事件会多次触发，因为它会冒泡。您可以阅读有关事件冒泡的更多信息，例如，在这里： [http ://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T20:02:41.207

基本上，您遇到的称为事件冒泡。

当您单击一组嵌套元素时，单击首先发送到层次结构中最深的元素，然后在层次结构中向上移动。

[查看MDN 事件传播](https://developer.mozilla.org/en/Gecko_DOM_Reference/Examples#Example_5%3a_Event_Propagation "MDN event propagation")的示例

# javascript - IE8中的jQuery未定义变量

> ID：11334793
> 
> 赞同：0
> 
> 时间：2012-07-04T19:55:43.957
> 
> 标签：javascript, jquery, undefined

我为滑块创建了一个 jQuery 迷你脚本。它在 Firefox、Chrome、IE9 中完美运行，但当我将鼠标悬停在 IE7、IE8 中时。它显示一个警报错误（未定义的 current_hover_item）。

```
$('.nav-item').hover(function(){
        var current_hover_item = $(this).children().attr('rel');
        $('.show-item').hide();
        $(current_hover_item).fadeIn(1000);
        $(this).animate({"width": "+=10px", opacity: 0.6}, 500, function(){
             $(this).animate({"width": "-=10px", opacity: 1}, 500);
        });
}, function(){
        $(current_hover_item).fadeOut(1000);
        return false;
}); 
```

我尝试删除**（var）**关键字，但是当我悬停时，它不会显示所有内容。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:58:20.740

`current_hover_item`在第二个函数中未定义，因为第一个函数中的定义在一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)中。

您需要`current_hover_item`在这两个函数中声明。或者，由于您只在每个函数中使用该变量一次，因此将其完全删除，如下所示：

```
$('.nav-item').hover(function(){
        $('.show-item').hide();
        $($(this).children().attr('rel')).fadeIn(1000);
        $(this).animate({"width": "+=10px", opacity: 0.6}, 500, function(){
             $(this).animate({"width": "-=10px", opacity: 1}, 500);
        });
}, function(){
        $($(this).children().attr('rel')).fadeOut(1000);
        return false;
}); 
```

或者最好重构您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T19:59:16.030

我今天早些时候遇到了这个问题。我通过在任何 jquery 函数（包括 .ready()）之外声明变量来修复它，然后将它设置在你需要的地方（你当前声明它的地方）。

# django - 用于权限的 Django 装置

> ID：11334799
> 
> 赞同：11
> 
> 时间：2012-07-04T19:56:16.210
> 
> 标签：django, fixtures

我正在为 Django 中的权限创建固定装置。我能够按照需要的方式加载它们。但是，我的问题是......假设我想为 table 加载一个夹具`auth_group_permissions`，我需要指定 a`group_id`和 a `permission_id`，不幸的是，夹具不是处理这个问题的最佳方法。有没有更简单的方法来以编程方式做到这一点？这样我就可以获得`id`特定值并填写它们？这通常是如何完成的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-06-27T14:48:27.597

至少从 Django >=1.7 开始，由于引入了“自然键”作为序列化选项，现在可以在夹具中存储权限。

[您可以在Django 序列化文档](https://docs.djangoproject.com/en/dev/topics/serialization/#natural-keys)中阅读有关自然键的更多信息

该文档明确提到自然键的用例是 when..

> ...对象是 Django 在数据库同步过程中自动创建的，给定关系的主键不容易预测；这将取决于执行迁移的方式和时间。这适用于所有自动生成对象的模型，特别是包括权限、组和用户。

因此，对于您的具体问题，关于`auth_group_permissions`，您将使用以下语法转储您的夹具：

`python manage.py dumpdata auth --natural-foreign --natural-primary -e auth.Permission`

auth_permissions 表必须使用`-e`标志明确排除，因为该表由`migrate`命令填充，并且在加载固定装置之前已经具有数据。

然后，该夹具将以与任何其他夹具相同的方式加载

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-04T20:38:40.990

正确的解决方案是以与框架本身相同的方式创建权限。

您应该连接到模块中的内置[`post_migrate`](https://docs.djangoproject.com/en/dev/ref/signals/#post-syncdb)信号或在`management.py`那里`management/__init__.py`创建权限。文档确实说响应`post_migrate`信号执行的任何工作都不应该执行任何数据库模式更改，但您还应该注意框架本身会创建权限以响应此信号。

所以我建议你看一下应用程序的[管理模块](https://github.com/django/django/blob/master/django/contrib/auth/management/__init__.py#L126)，`django.contrib.auth`看看它应该如何完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-12T19:48:08.450

只是添加到@jonpa 的评论中，如果您使用的是多租户应用程序并且您想直接将固定装置保存到文件中，您可以执行以下操作：

`python manage.py tenant_command dumpdata --schema=<schema_name> --natural-foreign --natural-primary -e auth.Permission --indent 4 > /path/to/fixtures/fixtures.json`

# python - SqlAlchemy - 什么时候应该创建新的会话？

> ID：11334806
> 
> 赞同：2
> 
> 时间：2012-07-04T19:56:51.273
> 
> 标签：python, sqlalchemy, pyramid

作为 SQLAlchemy 的新手，我想知道什么时候 `Session()`应该调用一个视图。它应该被定义为一个全局变量，还是应该为每个请求创建一个新的会话。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T20:14:14.117

我强烈建议您遵循[Pyramid SQLAlchemy 教程](http://pyramid.readthedocs.org/en/lastest/tutorials/wiki2/index.html)。它教你如何在一个简单的 Wiki 应用程序中使用 SQLAlchemy 和 Pyramid。

您会注意到教程`models.py`创建了一个定义`DBSession`项目的模块。这使您可以访问 SQLAlchemy 会话，范围为 Pyramid 线程并绑定到 Pyramid 事务模型，并且在您需要会话时导入：

```
from pyramid.view import view_config

from .models import (
    DBSession,
    MyModel,
    )

@view_config(route_name='home', renderer='templates/mytemplate.pt')
def my_view(request):
    one = DBSession.query(MyModel).filter(MyModel.name=='one').first()
    return {'one':one, 'project':'tutorial'} 
```

在`models.py`DBSession 变量中定义如下：

```
from sqlalchemy.orm import (
    scoped_session,
    sessionmaker,
    )

from zope.sqlalchemy import ZopeTransactionExtension

DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension())) 
```

注意`ZopeTransactionExtension`; Pyramid 自动为每个请求启动一个新事务，在成功响应时提交它，在发生异常时中止它。这使您免除了大多数交易处理职责。`.flush`当您需要查看数据库更新（例如自动递增主键）时，请记住您的会话。

同样，本教程对所有这些以及更多内容进行了扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:49:27.473

实际上，在阅读了更多 sqlalchemy 文档之后，我找到了我的问题的正确答案，每个请求都应该创建一个新的上下文会话。请参阅[http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#lifespan-of-a-contextual-session](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#lifespan-of-a-contextual-session)

# opengl - 通过 SSH 转发加速的 OpenGL GLX

> ID：11334807
> 
> 赞同：2
> 
> 时间：2012-07-04T19:57:08.527
> 
> 标签：opengl, ssh, x11, mesa

我目前正在将开源 OpenGL 游戏移植到 OpenGL ES。目标设备运行 Linux，CPU 相对较弱（ARM11 系列，带 FPU）。它有一个 OpenGL ES 加速器，但没有一个 OpenGL 加速器。

最初，我希望使用另一台 Linux 机器上的加速 OpenGL 实例来运行现有的 OpenGL-GLX-X11 实现 - 例如，带有 Radeon X1650 Pro 的 Athlon X2。这将有助于验证是否存在需要从高级别解决的严重 CPU 瓶颈。

我设法设置了 X11 连接的 SSH 转发。glxinfo 和 glxgears 程序运行，但与本地运行的 glxgears（60fps 和 vsync）相比，后者的性能非常差（8fps）。glxinfo 报告指出正在使用直接渲染，这告诉我正在使用本地（到 ARM 设备）软件渲染器。

我想要发生的是将 OpenGL 命令发送到 Athlon X2 机器并使用 Radeon 加速。我相信我需要为此打开间接渲染。但是，设置 LIBGL_ALWAYS_INDIRECT=1 不会改变任何东西。例如：

```
arm$ LIBGL_ALWAYS_INDIRECT=1 glxinfo | fgrep rendering
direct rendering: Yes
arm$ 
```

ARM 设备正在运行 Gentoo Linux。强迫我想要发生的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:04:32.430

> glxinfo 和 glxgears 程序运行，但与本地运行的 glxgears（60fps 和 vsync）相比，后者的性能非常差（8fps）。glxinfo 报告指出正在使用直接渲染，这告诉我正在使用本地（到 ARM 设备）软件渲染器。

我对此有点困惑。如果您在远程显示器上看到 OpenGL 输出，则这意味着传输的是图片而不是 GLX 命令。然而，这意味着主机设备上的 libGL.so 的输出是 X11 感知的，但不会使用 GLX。

您能否确定哪个软件包在您的 ARM 设备上贡献了 libGL.so。我建议你安装一个单独的 libGL.so，只生成 GLX 命令和 LD_PRELOAD。

Mesa3D 可以配置为构建 GLX 命令流生成器库。

# android - 移动端真实用户监控

> ID：11334809
> 
> 赞同：4
> 
> 时间：2012-07-04T19:57:25.047
> 
> 标签：android, ios, performance, jquery-mobile, monitoring

有许多真实用户监控 (RUM) 库可用于测量网站用户的浏览器性能，例如回旋镖、剧集等。

我们可以对移动网络使用相同的方法，但是对于混合应用程序和原生应用程序，是否有一个类似的开源库可以衡量应用程序的关键性能和速度：

*   加载屏幕的时间
*   下载时间
*   第一个字节的时间
*   画画的时间
*   是时候超越了..
*   prefetch vc 非预取渲染时间..
*   等（移动特定指标）？

此外，您还为真实用户的移动应用程序（Web 和本地应用程序）衡量了哪些其他关键指标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-28T14:35:21.190

我相信移动网络或混合应用程序有两个重要的性能方面

*   API（也称为 AJAX）监控
*   交易监控

### API（也称为 AJAX）监控

大多数移动网络应用程序或混合应用程序都设计有 API 以获得更好的性能。应用程序的性能实际上取决于 API 的工作方式。因此，衡量 API（AJAX）调用很重要。必须在每个 AJAX 调用中测量以下指标

*   响应时间
*   回调时间
*   数据发送
*   收到的数据

### 交易监控

所有应用程序都处理登录、注册结帐、订阅、购买等关键操作。衡量这些关键交易是很有价值的。这些事务涉及一个或多个 API 调用。事务时间可以通过记录事务的开始时间并计算事务结束时的持续时间来衡量。这涉及以下指标

*   成功响应时间
*   故障响应时间

如果您正在寻找具有上述功能的服务，您可以尝试[https://www.atatus.com/](https://www.atatus.com/)

PS：Atatus 的 Web 开发人员。

# php - isset($_COOKIE) 不工作

> ID：11334819
> 
> 赞同：2
> 
> 时间：2012-07-04T19:58:13.500
> 
> 标签：php

我正在使用函数 set cookie 来设置（id）cookie，如下所示：

```
$cookie_id = $insert_userid;
setcookie("id", $cookie_id, time() + 31556926, '/', 'www.example.com'); 
```

上面的代码工作正常。我正在使用 firefox 检查设置，并且那里有正确的 cookie。现在在我网站上的其他页面上，我想检查是否设置了 cookie。如果未设置 cookie，我将使用此代码进行重定向。无论是否设置了cookie，我都会以两种方式重定向。

```
<?php
if(isset($_COOKIE['id'])){
//do something.
}else{
header('Location: login.php');
}
    ?> 
```

我该如何解决这个问题？

var转储结果是：

```
array(4) { ["link"]=> string(43) "http://www.zzz.com/zzz" ["__unam"]=> string(30) "a5caeed-1385397a335-7fca86ad-2" ["PHPSESSID"]=> string(26) "6khzzzzzzzzjd51i6hamm0" ["id"]=> string(10) "zzzzzzzzzz" } 
```

更新：我没有从我创建它的同一页面检查 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:02:24.443

为了帮助找到问题，试试这个：

```
var_dump($_COOKIE['id']); exit; 
```

把它放在前面`if`。理想情况下，您应该看到 cookie 的值。如果您看到`NULL`，则 cookie 没有被传递。

如果它没有被通过，试着`var_dump($_COOKIE); exit;`看看你是否得到了一个数组，如果有，是否有一个`id`键。

确保正在发送 cookie，使用开发者工具或任何与您的浏览器等效的工具进行检查。

# c - 无法关闭使用 popen 打开的文件

> ID：11334831
> 
> 赞同：0
> 
> 时间：2012-07-04T19:58:58.907
> 
> 标签：c, popen, fcntl

我是 C 语言的新手，今天，我在尝试关闭使用 popen 函数创建的“Open Stream”时遇到了一个问题。1\. 这个问题是不是因为我在这个程序中使用了 poll 函数？2.还是因为fcntl功能？如果有人教我这个问题的确切原因，我会很高兴。我附上下面的代码示例，请看一下。

代码示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <poll.h>
#include <fcntl.h>

char line[1024];
FILE *tfd;

int readData(int *fd)
{
     struct pollfd pfd;
     int pollTime = 10000;
     pfd.events = POLLIN;
     pfd.fd = *fd;
     int ret=1;

     ret = poll(&pfd,1,pollTime);
     printf("\nAfter ret=%d\n.",ret);
     if(ret == -1 || ret ==0)
        {
                printf("Couldn't poll returned : %d\n", ret);
                return 0;
        } else {
                if( fgets(line,sizeof(line),tfd) == NULL )
                {
                        printf("\nReturns nothing.");
                        return 0;
                }
                printf("\nRead Some data.");
        }
        return ret;
}

void main(void)
{
        int ret;
        int fd, flags;
        char filepath[] = "/home/TEST/";
        char filename[] = "log.txt";
        char cmd[100];

        sprintf(cmd,"tail -f %s%s",filepath, filename);
        tfd = popen(cmd, "r");
        fd  = fileno(tfd);

        flags = fcntl(fd, F_GETFL, 0);
        flags |= O_NONBLOCK;
        fcntl(fd, F_SETFL, flags);

        if(tfd==NULL)
        {
                printf("\npopen failed, exiting.\n");
                exit(0);
        }
        while( (ret=readData(&fd)) > 0 )
        {
                printf("\nret2=%d.",ret);
                printf("\nLine : %s",line);
        }
        printf("\n**********DONE****************.\n");
        pclose(tfd);
} 
```

输出：

```
[root@localhost TEST]# ./polltail

After ret=1
.
Read Some data.
ret2=1.
Line : 64 bytes from maa03s05-in-f4.1e100.net (74.125.236.68): icmp_req=31 ttl=52 time=38.4 ms

After ret=0
.Couldn't poll returned : 0

**********DONE****************. 
```

在这里，我希望提示出现在执行结束时。但是，它不会到来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:26:12.810

你得到一个超时，因为 tail 在 10 秒内没有产生任何输出。然后你调用 pclose() ，但是，这就是文档中关于 pclose() 的内容。

> pclose() 函数等待相关进程终止并返回由 wait4(2) 返回的命令的退出状态。

tail 命令仍在运行，并且会继续运行，直到有人杀死它，所以 pclose() 将无限期地阻塞。如果您需要您的程序来终止您正在运行的 tail 命令，您将需要另一种方法，而不是使用 popen/pclose。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:31:00.637

-f 选项导致 tail 在到达文件末尾时不停止，而是等待附加数据附加到输入。如果标准输入是管道，则忽略 -f 选项，但如果它是 FIFO，则不会。

pclose() 函数等待关联进程终止；它返回命令的退出状态，由 wait4(2) 返回。

pclose() 函数返回 -1 如果流没有与“弹出”命令关联，如果流已经“pclose”，或者如果 wait4(2) 返回错误。

检查 pclose() 的返回值。

# android - SQLite：大表中的高效子字符串搜索

> ID：11334832
> 
> 赞同：10
> 
> 时间：2012-07-04T19:58:58.983
> 
> 标签：android, sqlite, fts3

我正在开发一个必须在一个大表中执行子字符串搜索的 Android 应用程序（大约 500'000 个带有街道和位置名称的条目，所以每个条目只有几个词）。

```
CREATE TABLE Elements (elementID INTEGER, type INTEGER, name TEXT, data BLOB) 
```

请注意，只有 20% 的条目在“名称”列中包含字符串。

执行以下查询几乎需要 2 分钟：

```
SELECT elementID, name FROM Elements WHERE name LIKE %foo% 
```

我现在尝试使用 FTS3 来加快查询速度。那是相当成功的，查询时间减少到 1 分钟（令人惊讶的是数据库文件大小只增加了 5%，这对我的目的也很好）。

问题是，FTS3 似乎不支持子字符串搜索，即如果我想在“foo bar”和“foobar”中找到“bar”，我只会得到“foo bar”，尽管我需要这两个结果。

所以实际上我有两个问题：

1.  是否可以进一步加快查询速度？我的目标是查询 30 秒，但我不知道这是否现实......

2.  如何使用 FTS3 进行真正的子字符串搜索？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T02:09:26.287

**解决方案 1：** 如果您可以将数据库中的每个字符作为单个单词，则可以使用[短语查询](http://www.sqlite.org/fts3.html#section_3)来搜索子字符串。

例如，假设“my_table”包含单列“person”：

```
person
------
John Doe
Jane Doe 
```

你可以把它改成

```
person
------
J o h n D o e
J a n e D o e 
```

要搜索子字符串“ohn”，请使用短语查询：

```
SELECT * FROM my_table WHERE person MATCH '"o h n"' 
```

请注意，“JohnD”将匹配“John Doe”，这可能是不希望的。要修复它，请将原始字符串中的空格字符更改为其他内容。

例如，您可以将空格字符替换为“$”：

```
person
------
J o h n $ D o e
J a n e $ D o e 
```

**解决方案 2：** 按照解决方案 1 的想法，您可以使用自定义分词器将每个字符作为单个单词，并使用短语查询来查询子字符串。

与解决方案 1 相比的优点是您不必在数据中添加空格，这会不必要地增加数据库的大小。

The disadvantage is that you have to implement the custom tokenizer. Fortunately, I have [one ready for you](https://github.com/haifengkao/SqliteSubstringSearch). The code is in C, so you have to figure out how to integrate it with your Java code.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T20:48:22.950

您应该为数据库上的列添加一个索引`name`，这应该会大大加快查询速度。

我相信 SQLite3 支持这样的子字符串匹配：

```
SELECT * FROM Elements WHERE name MATCH '*foo*'; 
```

[http://www.sqlite.org/fts3.html#section_3](http://www.sqlite.org/fts3.html#section_3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T21:18:25.793

I am facing some thing similar to your problem. Here is my suggestion try creating a translation table that will translate all the words to numbers. Then search numbers instead of words.

Please let me know if this is helping.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T20:06:08.847

由于您使用的是 sqllite，因此不确定是否要加快速度，但是对于子字符串搜索，我做了类似的事情

```
SET @foo_bar = 'foo bar'
SELECT * FROM table WHERE name LIKE '%' + REPLACE(@foo_bar, ' ', '%') + '%' 
```

当然，这只返回在单词“bar”之前有单词“foo”的记录。

# c# - 将 C# 脚本解析为 Java

> ID：11334835
> 
> 赞同：3
> 
> 时间：2012-07-04T19:59:13.977
> 
> 标签：c#, java, database, parsing, file-io

我正在寻找一种方法来轻松读取 C# 文件并将其放入 Java 对象中以进行数据库存储（存储类名、函数、变量等）。

我正在为我正在创建的游戏制作分层状态机 AI 构建工具，并且需要能够导入现有的 C# 文件并将其存储在数据库中以供将来检索。

有谁知道用于解析 C# 文件的任何预先存在的库？类似于[JavaParser](http://code.google.com/p/javaparser/)的东西？

感谢大家！

**编辑**：这需要成为我的 Java 项目的一部分。我将通过我的 Java 应用程序加载 C# 文件并将其保存到我的 db4o 数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:01:20.833

您可以使用 Roslyn，但这需要一些工作：http: [//msdn.microsoft.com/en-US/roslyn](http://msdn.microsoft.com/en-US/roslyn)

顺便说一句，Roslyn 只在预览版中。微软尚未说明实际版本何时发布。

这是一个 C# 库。您将需要使用 Roslyn 使用 C# 程序进行实际解析。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T20:17:48.807

[此页面](http://www.infoq.com/news/grasshopper_2_ctp)讨论了一个名为 Grasshopper 的 IL 到 Java 字节码编译器，但它似乎不再存在。也许你可以这样做并在加载编译后使用反射，如果你也需要的话，不确定代码本身会留在哪里。

# jframe - JPanel 不显示在 JFrame 中

> ID：11334839
> 
> 赞同：0
> 
> 时间：2012-07-04T19:59:37.490
> 
> 标签：jframe, jpanel

我正在制作一个可以从 Internet 加载图片的 JFrame。我有这个工作，但这个 JFrame 的问题是有很多图片，所以它们需要很长时间才能加载。这很好，但我想向用户展示图片正在加载。出于某种原因，我无法让 JPanel 在加载的 JFrame 中显示。我知道这是一个常见错误，我尝试了很多修复，但没有一个有效。这是代码：

```
final JFrame weatherLoadPop=new JFrame("Loading weather...");
weatherLoadPop.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
weatherLoadPop.addWindowListener(new WindowAdapter() {
   public void windowClosing(WindowEvent e) {
      weatherPop.dispose();
   };
});
weatherLoadPop.setResizable(false);
weatherLoadPop.setBounds(100,50,225,100);
JPanel weatherLoadPanel=new JPanel();
weatherLoadPanel.setBackground(Color.RED);

weatherLoadPanel.setPreferredSize(new Dimension(225,100));
JLabel weatherLoadLabel=new JLabel("Loading...0%");
weatherLoadPanel.add(weatherLoadLabel);
weatherLoadPop.add(weatherLoadPanel);
weatherLoadPop.pack();
weatherLoadPop.validate();
weatherLoadPop.setVisible(true); 
```

我不确定我是否正确使用了 pack() 和 validate()。我不经常使用它们。在任何情况下，删除它们都无济于事。对我来说，这个问题最奇怪的部分是加载图片的 JFrame 工作得很好，而更简单的加载 JFrame 却没有。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:05:38.330

它在这里工作正常。也许您应该提供一个我们可以测试的[sscce ？](http://sscce.org/)

我不得不更改您的事件侦听器以处理 weatherLoadPop 而不是 weatherPop 并将您的代码添加到测试类中：

```
package test;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Test {

    public static void main(String[] args) {
        final JFrame weatherLoadPop = new JFrame("Loading weather...");
        weatherLoadPop.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        weatherLoadPop.addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {
                weatherLoadPop.dispose();
            }
        ;
        });
        weatherLoadPop.setResizable(false);
        weatherLoadPop.setBounds(100, 50, 225, 100);
        JPanel weatherLoadPanel = new JPanel();
        weatherLoadPanel.setBackground(Color.RED);

        weatherLoadPanel.setPreferredSize(new Dimension(225, 100));
        JLabel weatherLoadLabel = new JLabel("Loading...0%");
        weatherLoadPanel.add(weatherLoadLabel);
        weatherLoadPop.add(weatherLoadPanel);
        weatherLoadPop.pack();
        weatherLoadPop.validate();
        weatherLoadPop.setVisible(true);
    }
} 
```

我得到：

![加载中......](../Images/ad34b04d311e59d1726014d1952150a1.png)

使用：

```
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b20)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

# php - PDO + 输入项 + mysql

> ID：11334840
> 
> 赞同：1
> 
> 时间：2012-07-04T19:59:52.893
> 
> 标签：php, search, pdo

我正在使用 PDO bindValue 通过我的数据库搜索术语。我的语法全错了吗？我没有得到我应该得到的结果

```
$term = $_GET['s'];
$s_pdo = $dbh->prepare("SELECT * FROM table WHERE value = ':search'");
$s_pdo -> bindValue(':search',"%".$term."%",PDO::PARAM_STR);
$s_pdo -> execute();

while($s_row = $s_pdo->fetchAll(PDO::FETCH_ASSOC)){
    echo $s_row['value'];
} 
```

有人看到这里有什么问题吗？我的mysql中确实有这个价值。我在 mysql 中完全匹配以测试我的搜索功能是否有效。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:39:32.707

尝试从 bindValue 部分中删除 % ..：

```
$s_pdo = $dbh->prepare("SELECT * FROM table WHERE value = :search");
$s_pdo -> bindValue(':search',$term,PDO::PARAM_STR); 
```

或使用 LIKE 以便您可以留下 %:

```
$s_pdo = $dbh->prepare("SELECT * FROM table WHERE value LIKE :search");
$s_pdo -> bindValue(':search',"%".$term."%",PDO::PARAM_STR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:06:05.523

您不需要引用准备好的占位符。此外，在使用 时`%term%`，您应该使用`LIKE`而不是`=`prepare 操作为您完成！

```
$term = $_GET['s'];
$s_pdo = $dbh->prepare("SELECT * FROM table WHERE value LIKE :search");
$s_pdo -> bindValue(':search',"%".$term."%",PDO::PARAM_STR);
$s_pdo -> execute();

while($s_row = $s_pdo->fetchAll(PDO::FETCH_ASSOC)){
    echo $s_row['value'];
} 
```

另外，下次为了更好的调试错误，启用`PDO::ERRMODE_EXCEPTION`using`PDO::setAttribute()`方法。

# regex - 我找不到这个正则表达式的正则表达式

> ID：11334841
> 
> 赞同：-3
> 
> 时间：2012-07-04T20:00:00.763 标签 + jQuery .clone() =?
> 
> 标签：regex

我对正则表达式不是很好，在这里我只是有一个简单的问题。

我有一个这样的链接列表：

```
http://domain.com/andrei/sometext
http://domain2.com/someothertext/sometextyouknow/whoknows
http://domain341.com/text/thisisit/haha 
```

我只想要两个正则表达式，把它拿出来：

```
http://domain.com/andrei/
http://domain2.com/someothertext/
http://domain341.com/text/ 
```

这是我需要的第一个正则表达式，我只需要另一个正则表达式来取出域，但我想我会弄清楚是否有人可以告诉我正则表达式只取出我写的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T20:18:29.647

这是您（最有可能）需要的：

```
[a-z]+://([^/ ]+)(?:/[^/ ]*/?)? 
```

以下是它的工作原理：

1.  `[a-z]+`部分用于协议名称（这意味着“1 个或多个字母” - 它将匹配 http/https/file/ftp/gopher/foo/whatever 协议，但如果您只想匹配“http”，则可以显式编写）
2.  `://`字面意思是它所说的;）
3.  `[^/ ]+`是一个或多个非斜线和非空格字符。它可以是“a”，可以是 fqdn，可以是 IP 地址。任何
4.  `(?:/[^/ ]*/?)?`- 这个比较复杂。`?`到底意味着括号中的整个事情可能存在也可能不存在（它是可选的）。`?:`紧接在括号内的意思*是不要重用这个子模式*（它没有分配一个数字，以后不能被那个数字重用）。`[^/ ]*`表示 0 个或多个非斜杠非空格字符，并且斜杠后面的问号再次表明斜杠是可选的。

总体而言，这确保了以下内容的匹配：

```
http://foo/bar/baz/something -> http://foo/bar/
http://hello.world.example.com/ -> http://hello.world.example.com/
http://foo.net -> http://foo.net
ftp://ftp.mozilla.org/pub -> ftp://ftp.mozilla.org/pub 
```

注意＃1：我没有**故意**对正斜杠使用转义以使表达式更具可读性，因此请确保使用其他字符作为`delimiter`，或者转义所有出现的`/`- 使用`\/`。

注意＃2：`i`如果您希望表达式不区分大小写（`a-z`将不匹配大写字母），请添加修饰符，`g`如果您想在一大块文本中进行多个匹配，请添加修饰符。

在比赛中，子模式 0 将是整个匹配的东西，而子模式 1 - 只有主机名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:27:20.907

这可能是您正在寻找的：

`([a-zA-Z]+://([\w.]*)/(?:.*?/)?)`

您拥有组 1 中的所有匹配项和组 2 中的域。不需要 2 个正则表达式。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T20:05:52.937

为您的第一个任务使用正则表达式`https?:\/\/[^\/]+\/[^\/]+/(.*)`- 替换`$1`为 emtpy string `''`。

将正则表达式`https?:\/\/([^\/]+)`用于您的第二个任务 - 匹配`$1`是域名。

# javascript - 向鼠标移动画布弧

> ID：11334843
> 
> 赞同：3
> 
> 时间：2012-07-04T20:00:05.680
> 
> 标签：javascript, jquery, html, html5-canvas

所以现在我有一个简单的画布元素，它具有创建随机颜色、大小和弧（圆）位置的功能。

生成这些随机圆的随机位置的“for”循环每 100 毫秒执行 1 个圆（这是在单击时完成的）。

**我想知道如何让每个圆圈慢慢靠近光标，然后跟随光标移动到任何地方。**

[http://jsfiddle.net/JXXgx/](http://jsfiddle.net/JXXgx/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:00:19.513

你可以尝试这样的事情：

```
var MAXIMUM_AMOUNT = 1000,
    FPS = 30,
    targetToGo,     //
    shapes = [];    //storage of circles

//Helper class
function CircleModel(x,y,r,color){
    this.x = x;
    this.y = y;
    this.r = r;   
    this.color = color; 
}
function initScene(){
    //Listening for mouse position changes
    $('canvas').mousemove(function(e){
        targetToGo.x = e.pageX;
        targetToGo.y = e.pageY;
    });
    //Circle generation timer
    var intervalID = setInterval(function(){
        if( shapes.length < MAXIMUM_AMOUNT ){
            for(var i = 0; i < 1; i++){
                //Generating random parameters for circle
                var randX = targetToGo.x - 500 + Math.floor(Math.random() * 1000);   //position x
                var randY = targetToGo.y - 300 + Math.floor(Math.random() * 600);    //position y
                var randRadius = Math.floor(Math.random() * 12);       //radius 
                var randColor = "#"+("000000"+(0xFFFFFF*Math.random()).toString(16)).substr(-6); //color
                //Adding circle to scene
                shapes.push( new CircleModel(randX,randY,randRadius,randColor) ); 
            }
        }else{
            clearInterval(intervalID);
        }
    }, 100);
    //Starts rendering timer -  
    //                  '1000' represents 1 second,as FPS represents seconds,not miliseconds
    setInterval(render,1000/FPS);
}
function render(){
    var ctx = $('canvas')[0].getContext("2d");
    var circle;
    //Clearing the scene
    ctx.clearRect(0,0,$('canvas').width(),$('canvas').height());
    //Drawing circles
    for(var i=0; i < shapes.length;++i){
        circle = shapes[i];
        //(animation part)
        //repositioning circle --
        //             (1/circle.r) is a degree of inertion,and the bigger radius,the slower it moves
        circle.x += (targetToGo.x - circle.x)*1/circle.r;   
        circle.y += (targetToGo.y - circle.y)*1/circle.r;
        ////////////////////////////////////////////
        ctx.fillStyle = circle.color;
        ctx.beginPath();
        ctx.arc(circle.x, circle.y, circle.r, 0, Math.PI * 2, true);
        ctx.closePath();
        ctx.fill();
    }
}

$("canvas").click(function(e){    
    targetToGo = {x: e.pageX, y:e.pageY};
    initScene();   
}); 
```

[将此代码放入`$(document).ready`处理程序中。]

# [演示](http://jsfiddle.net/JXXgx/2/)

# c# - 无法在 Team Foundation Server 2010 Web 访问中中断模拟

> ID：11334863
> 
> 赞同：0
> 
> 时间：2012-07-04T20:02:16.710
> 
> 标签：c#, asp.net, tfs-web-access, tfs-events

我正在尝试使用 TFS 事件订阅服务通过 Web 界面动态创建订阅。订阅将转到一个中间帐户。出于我们的目的，我们将这两个帐户称为“非管理员用户”和“订阅存储”。

管理员可以为“订阅存储”帐户创建警报，订阅存储帐户可以为自己创建警报，但非管理员用户无法在存储帐户中创建订阅。我收到以下错误消息：

> 访问被拒绝：{user account name} 需要对资源 $SUBSCRIPTION 的以下权限：才能执行此操作：编辑

我正在使用的代码是：

```
IEventService eventService = (IEventService)this.tfsCollection.GetService(typeof(IEventService));
eventService.SubscribeEvent(userAccountIdentity.Sid, Strings.WorkItemChangedEvent, string.Format(Strings.Condition0, workItem.ToString(CultureInfo.InvariantCulture)), deliveryPreference, string.Format(Strings.AlertTag0, workItem.ToString(CultureInfo.InvariantCulture))); 
```

请相信所有参数都是正确的，并且它们的值与本次讨论无关。:)`tfsCollection`是`TfsTeamProjectCollection`来自页面`Connection.TeamProjectCollection`属性的对象。

我的第一个想法是打破模拟，以便它使用服务帐户（在本例中为 NetworkService），因此我制作了一个扩展方法，它接受`Action`并在不模拟的情况下执行它，如下所示：

```
 public static void WithoutImpersonation(this Action actionToPerform)
    {
        using (var ctx = WindowsIdentity.Impersonate(IntPtr.Zero))
        {
            try
            {
                actionToPerform();
            }
            finally
            {
                ctx.Undo();
            }
        }
    } 
```

这会在持续时间内正确中断模拟`Action`（检查`WindowsIdentity.GetCurrentUser()`返回 NetworkService 帐户而不是用户帐户），但仍然无法创建具有相同错误的事件订阅。的经过身份验证的用户`TfsTeamProjectCollection`也是 NetworkService 帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:52:43.703

我解决了！事实证明我以错误的方式接近它。从实例化我的类的页面中，我必须使用`EnterTfsImpersonationContext`，然后查找存储帐户的标识并为该帐户创建一个新`TfsTeamProjectCollection`帐户。这解决了问题。

# facebook - Facebook 聊天 XMPP 协议

> ID：11334869
> 
> 赞同：1
> 
> 时间：2012-07-04T20:02:42.230
> 
> 标签：facebook, xmpp

我通读了[https://developers.facebook.com/docs/chat/](https://developers.facebook.com/docs/chat/)。现在我想知道是否有人知道可在 facebook xmpp 服务器上使用的 XMPP 协议列表。

另一个问题是是否可以通过 XEP-0013 检索旧的聊天消息？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:37:28.413

您提供的链接包含支持的协议列表。

它不包括 XEP-0013。

# email - 在 php 中使用 imap 创建邮件帐户而不是邮箱

> ID：11334870
> 
> 赞同：7
> 
> 时间：2012-07-04T20:02:48.663
> 
> 标签：email, imap, pop3, mx-record

我们都知道如何使用`imap_open`. 这里的问题是我在这里创建一个邮件系统。我无法找到使用`imap/pop3`in创建邮件帐户`php`。有可能吗？

假设假设我的域是 www.studentmug.com。我想在不使用 cPanel 的情况下为另一个用户创建邮件。例如：- `radhakrishna@studentmug.com`。我在`IMAP`部分中没有找到任何脚本。有人能解决这个问题或解决方案吗？

请分享您的意见和建议 - 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T13:19:41.280

你走错路了，你不能使用[`IMAP`](http://en.wikipedia.org/wiki/Internet_Message_Access_Protocol)或[`POP`](http://en.wikipedia.org/wiki/Post_Office_Protocol)协议命令来创建一个新的用户帐户。`IMAP`或`POP`协议用于从服务器上的现有邮箱访问邮件。

可能您应该检查您的域服务提供商是否提供了任何 CLI 命令库。它提供了任何 CLI 支持，而不是您可以使用这些命令（不使用 cPanel）创建新的电子邮件帐户。

[请注意，您可以使用imap_createmailbox](http://www.php.net//manual/en/function.imap-createmailbox.php)创建新邮箱，但不能添加新用户帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T01:02:47.277

设置 imap 服务器以使用 MySQL 进行身份验证，并使用 PHP 在 MySQL 数据库中创建帐户。Dovecot 是一个不错的电子邮件服务器。

# amazon-swf - 使用 AWS Simple Workflow Service 进行递归

> ID：11334874
> 
> 赞同：1
> 
> 时间：2012-07-04T20:03:07.383
> 
> 标签：amazon-swf

我有一个简单的异步方法：

```
@Asynchronous
public void doSomething(Promise<int> something) {
    if(something == 0) {
        return;
    }

    ActivityHolder.someActivity();
    System.out.println("Current value: " + Integer.toString(something));
    doSomething(something--);
} 
```

这就是我正在做的，看看我的某个要求是否可行。我本质上希望某些操作分批执行，其中每个批次的成员并行运行。我基本上有另一个活动（在另一个班级）：

```
@Activity
public void someActivity() {
    // Some stuff
} 
```

我得到的输出是（我用 100 调用 doSomething）：

```
Current value: 100 
```

之后，工作流执行失败并给我一个错误，指出找不到活动。为什么没有找到？第一次处决时是如何发现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:10:16.187

几件事：

1.  当你传递一个 promise 变量时，你调用`variable.get()`它来提取它的值。

2.  如果您收到未找到活动的错误，您是否检查过此活动是否已实际注册？首先运行您的活动类，看看它们是否从日志中运行。确保您已成功注册活动。

3.  代码应该是这样的（使用`Promise.asPromise()`and `promise.get()`）：

    ```
    @Asynchronous
    public void doSomething(Promise<int> something) {
        if(something.get() == 0) {
            return;
        }

        ActivityHolder.someActivity();
        System.out.println("Current value: " + Integer.toString(something.get()));
        doSomething(Promise.asPromise(something.get()--));
    } 
    ```

4.  这里的 ActivityHolder 是什么？它是包含 someActivity() 的类的客户端实现吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:24:29.810

上面的代码能编译吗？

`Promise<int>`应该`Promise<Integer>`并且`something--`会给出编译错误，你不能从转换`Promise<Integer>`为`int`.

无论如何，使用递归来实现并行活动执行看起来并不正确。您可以在这里轻松地使用 for 循环 -

```
List<Promise<Void>> promiseList = new ArrayList<Promise<Void>>();
for (int i=0; i<100; i++) {
    Promise<Void> promise = ActivityHolder.someActivity();
    promiseList.add(promise);
}

callSomeOtherAsynchronousMethod(arg1, arg2, promiseList); 
```

# url - 使用 URL 关键字设置 Cookie

> ID：11334877
> 
> 赞同：0
> 
> 时间：2012-07-04T20:03:29.923
> 
> 标签：url, cookies, keyword

我有一个 URL，我在其中传递了一个关键字 (http://www.example.com/store?keyword=google)。我想使用该关键字的值设置一个 cookie（cookie 值将是 google）...

这可以做到吗？谁能把我放在正确的轨道上，我知道如何设置 cookie，只是不知道如何从 URL 中提取关键字来做到这一点。

谢谢！

PS我正在使用PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:06:36.587

我猜你没有使用服务器端代码。如果是这种情况，我建议您阅读 w3schools 上关于 Javascript 和 cookie 的简短教程：

[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:10:03.977

由于您没有提到您使用的语言，假设它是 php -

在 php 中设置 cookie 的基本语法是 - setcookie(name, value, expire, path, domain);

因此，对于价值，您可以将其作为

```
 $value = $_GET['keyword']; 
```

或者你也可以使用

```
 $value = $_REQUEST['keyword']; 
```

现在，$value 变量保存 cookie 值（在本例中为“google”），因此您只需将其作为 -

```
<?php
setcookie("user", "$value", time()+3600);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T20:10:49.503

要提取关键字，您可以使用 document.location.search 提取完整的 ?keyword=google 字符串。现在您可以使用正则表达式来查找关键字的值。

代码将如下所示：

```
var keyword = document.location.search.match(/\?keyword=(.*)/i)[1] 
```

然后您可以使用具有该值的 JS 创建一个 cookie。

# sql - 依赖多个条件的 SQL 子查询

> ID：11334879
> 
> 赞同：1
> 
> 时间：2012-07-04T20:03:56.947
> 
> 标签：sql, foxpro

我有这样的表格 VB（名称字符（25），数量数字（6），ret_date 日期）：

> ```
> Name  Amount  Ret_date
> ----  ------  --------
> abc    500    2011-01-21
> def    200    2011-01-20
> ghi   1000    
> xyz    800    2011-01-22
> def    200    
> def    400    2011-02-01
> pqr   2100    2011-02-12  
> abc   3000    
> abc   4100
> xyz    700    2011-01-22 
> ```

我想要的是（基于不同名称的 ret_date 计数：总计数、返回计数、待处理计数）：

```
Name    tc  rc  pc 
abc     3   1   2 
def     3   2   1 
xyz     2   2   0 
ghi     1   0   1 
pqr     1   1   0 
```

我已经尝试了以下查询，没有任何效果！

```
SELECT vb.name, COUNT(*) tc, r.rc, p.pc FROM vb, ;
 (SELECT name, COUNT(*) rc FROM vb WHERE ret_date != {} group BY name) r, ;
 (SELECT name, COUNT(*) pc FROM vb WHERE ret_date = {} group BY name) p ;
 GROUP BY vb.name ORDER BY tc desc
SELECT vb.name, COUNT(*) tc, r.rc, p.pc FROM vb ;
  LEFT JOIN (select name, COUNT(*) rc FROM vb WHERE ret_date != {} group BY name) r ON r.name = vb.name ;
  LEFT JOIN (select name, COUNT(*) pc FROM vb WHERE ret_date = {} group BY name) p ON p.name = vb.name ;
  GROUP BY vb.name
SELECT vb.name, COUNT(*) tc, r.rc, p.pc FROM vb ;
  LEFT JOIN (select r.name, COUNT(*) rc FROM vb r WHERE ret_date != {} group BY name) r ON r.name = vb.name ;
  LEFT JOIN (select p.name, COUNT(*) pc FROM vb p WHERE ret_date = {} group BY name) p ON p.name = vb.name ;
  GROUP BY vb.name 
```

我能够通过 3 个单独的查询获得计数（总计数，ret_date = {} 的计数，ret_date ！= {}），但无法使用单个查询同时获得。请帮助我获得所需的输出。我是 SQL 新手，可以理解基础知识，但连接、子查询之类的东西仍然很难理解！如果您能解释您的查询是做什么的，那将会很有帮助。

注意：我使用的是 MS Visual Foxpro 9.0 (Windows 7)。*{ }*是 Foxpro 中用于表示日期类型为空的符号，*!=*不等于运算符。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:14:30.203

```
SELECT name, COUNT(DISTINCT name) as uc, COUNT(*) as tc, SUM(IF(ret_date IS NULL, 0, 1)) as rc, SUM(IF(ret_date IS NOT NULL, 0, 1)) as pc
FROM vb
GROUP BY name; 
```

我无法访问 Foxpro，但这适用于 MySQL。希望您可以对其进行调整以适合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T22:30:10.693

我没有使用 Foxpro 的经验，但我想`COUNT(*)`会给你的总计数，`COUNT(Ret_Date)`会给你你的待处理计数（因为它不会计算空值）。然后`COUNT(*) - COUNT(Ret_Date)`(tc - rc) 将给出您的待处理计数。这可以消除对子查询的需要（如果 VFP 在计数时表现得像其他 DBMS）。

```
SELECT Name, COUNT(*) tc, COUNT(Ret_Name) rc,  COUNT(*) - COUNT(Ret_Name) pc
FROM VB
GROUP BY Name; 
```

# python - 扩展 Django Flatpages - 注销

> ID：11334887
> 
> 赞同：2
> 
> 时间：2012-07-04T20:04:51.443
> 
> 标签：python, django, django-flatpages

我正在创建一个运行 virtualenv 的简单 Django 应用程序（1.3.1）。它已在 WebFaction 上启动并运行。只需要使用 Flatpages 就足够简单了——我仍然想对 FlatPages 进行一些增强，所以我只是扩展了模型——没什么复杂的。

**模型.py**

```
from django.db import models
from django.contrib.flatpages.models import FlatPage

class ExtendedFlatPage(FlatPage):
    order = models.PositiveIntegerField(unique=True)

    class Meta:
        ordering = ["order"]
        verbose_name = "Page" 
```

问题与注销有关。当我尝试从该站点的入口点注销时，没有问题，即 http://{domainname}/admin/logout/ 但是，当我尝试从管理站点的更远位置注销系统时 - 一个示例位于扩展 FlatPages 列表中 http://{domainname}/admin/basic/extendedflatpage/ 然后注销 (http://{domainname}/admin/basic/extendedflatpage/logout/) 会生成错误，归结为最后的观察

```
ValueError: int() 以 10 为底的无效文字：'logout'
```

条目底部的完整追溯。

**网址.py**

```
from django.conf.urls.defaults import patterns, include, url
from django.views.generic.simple import redirect_to
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    (r'^favicon\.ico$', 'django.views.generic.simple.redirect_to', {'url': '/static/images/favicon.ico'}),
) 
```

在互联网上四处搜寻带回了[以下页面](https://code.djangoproject.com/ticket/10061#comment:21)，并提出了修复建议。问题是，我似乎无法让它工作 - 我试图实现它的方式是调整 urls.py 如下：

```
...
admin.autodiscover()
admin.site.root_path = '/admin/' #should this go here?
urlpatterns = patterns('',
... 
```

**追溯**

```
Traceback (most recent call last):

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/contrib/admin/options.py", line 307, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/utils/decorators.py", line 93, in _wrapped_view
    response = view_func(request, *args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/views/decorators/cache.py", line 79, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/contrib/admin/sites.py", line 197, in inner
    return view(request, *args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/transaction.py", line 217, in inner
    res = func(*args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/reversion/revisions.py", line 279, in do_revision_context
    return func(*args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/reversion/admin.py", line 362, in change_view
    return super(VersionAdmin, self).change_view(*args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/utils/decorators.py", line 28, in _wrapper
    return bound_func(*args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/utils/decorators.py", line 93, in _wrapped_view
    response = view_func(request, *args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/utils/decorators.py", line 24, in bound_func
    return func(self, *args2, **kwargs2)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/transaction.py", line 217, in inner
    res = func(*args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/contrib/admin/options.py", line 947, in change_view
    obj = self.get_object(request, unquote(object_id))

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/contrib/admin/options.py", line 451, in get_object
    return queryset.get(pk=object_id)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/query.py", line 341, in get
    clone = self.filter(*args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/query.py", line 550, in filter
    return self._filter_or_exclude(False, *args, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/query.py", line 568, in _filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1194, in add_q
    can_reuse=used_aliases, force_having=force_having)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1129, in add_filter
    connector)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/sql/where.py", line 67, in add
    value = obj.prepare(lookup_type, value)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/sql/where.py", line 316, in prepare
    return self.field.get_prep_lookup(lookup_type, value)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/fields/related.py", line 136, in get_prep_lookup
    return self._pk_trace(value, 'get_prep_lookup', lookup_type)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/fields/related.py", line 209, in _pk_trace
    v = getattr(field, prep_func)(lookup_type, v, **kwargs)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 292, in get_prep_lookup
    return self.get_prep_value(value)

  File "/home/niceguydave/.virtualenvs/iwama/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 479, in get_prep_value
    return int(value)

ValueError: invalid literal for int() with base 10: 'logout'

<WSGIRequest
GET:<QueryDict: {}>,
POST:<QueryDict: {}>,
COOKIES:{'csrftoken': '7cad0c7ee5b93f897e82934aac3f9224',
 'sessionid': 'b7440ccc530704ca15b315f8f1f9f7ed'},
META:{'CSRF_COOKIE': '7cad0c7ee5b93f897e82934aac3f9224',
 'DOCUMENT_ROOT': '/usr/local/apache2/htdocs',
 'GATEWAY_INTERFACE': 'CGI/1.1',
 'HTTP_ACCEPT': 'application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5',
 'HTTP_ACCEPT_ENCODING': 'gzip, deflate',
 'HTTP_ACCEPT_LANGUAGE': 'en',
 'HTTP_CONNECTION': 'close',
 'HTTP_COOKIE': 'sessionid=b7440ccc530704ca15b315f8f1f9f7ed; csrftoken=7cad0c7ee5b93f897e82934aac3f9224',
 'HTTP_HOST': 'www.iwamaaikidocornwall.com',
 'HTTP_HTTPS': 'off',
 'HTTP_HTTP_X_FORWARDED_PROTO': 'http',
 'HTTP_REFERER': 'http://www.iwamaaikidocornwall.com/admin/basic/extendedflatpage/',
 'HTTP_USER_AGENT': 'Mozilla/5.0 (Macintosh; U; PPC Mac OS X 10_4_11; en) AppleWebKit/533.19.4 (KHTML, like Gecko) Version/4.1.3 Safari/533.19.4',
 'HTTP_X_FORWARDED_FOR': '89.241.106.48',
 'HTTP_X_FORWARDED_HOST': 'www.iwamaaikidocornwall.com',
 'HTTP_X_FORWARDED_PROTO': 'http',
 'HTTP_X_FORWARDED_SERVER': 'www.iwamaaikidocornwall.com',
 'HTTP_X_FORWARDED_SSL': 'off',
 'PATH_INFO': u'/admin/basic/extendedflatpage/logout/',
 'PATH_TRANSLATED': '/home/niceguydave/webapps/iwama/production.wsgi/admin/basic/extendedflatpage/logout/',
 'QUERY_STRING': '',
 'REMOTE_ADDR': '127.0.0.1',
 'REMOTE_PORT': '40468',
 'REQUEST_METHOD': 'GET',
 'REQUEST_URI': '/admin/basic/extendedflatpage/logout/',
 'SCRIPT_FILENAME': '/home/niceguydave/webapps/iwama/production.wsgi',
 'SCRIPT_NAME': u'',
 'SERVER_ADDR': '127.0.0.1',
 'SERVER_ADMIN': '[no address given]',
 'SERVER_NAME': 'www.iwamaaikidocornwall.com',
 'SERVER_PORT': '80',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'SERVER_SIGNATURE': '',
 'SERVER_SOFTWARE': 'Apache/2.2.17 (Unix) mod_wsgi/3.3 Python/2.7.3',
 'mod_wsgi.application_group': 'web318.webfaction.com|',
 'mod_wsgi.callable_object': 'application',
 'mod_wsgi.handler_script': '',
 'mod_wsgi.input_chunked': '0',
 'mod_wsgi.listener_host': '',
 'mod_wsgi.listener_port': '47425',
 'mod_wsgi.process_group': 'iwama',
 'mod_wsgi.request_handler': 'wsgi-script',
 'mod_wsgi.script_reloading': '1',
 'mod_wsgi.version': (3, 3),
 'wsgi.errors': <mod_wsgi.Log object at 0x7f5a450c8f30>,
 'wsgi.file_wrapper': <built-in method file_wrapper of mod_wsgi.Adapter object at 0x7f5a44eb2828>,
 'wsgi.input': <mod_wsgi.Input object at 0x7f5a44e833b0>,
 'wsgi.multiprocess': True,
 'wsgi.multithread': True,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 1)}> 
```

## 2012 年 5 月 7 日更新

我在[此处的帖子](https://stackoverflow.com/questions/3037558/hacking-django-admin-hooks-for-login-logout)中进行了一些观察，并将其应用于应用程序以进行修复，并在我的扩展 Flatpage 应用程序中创建了一个新视图

**视图.py**

```
def logout(request):
    from django.contrib.auth.views import logout
    return logout(request) 
```

然后我将此视图导入 urls.py 并调用它

**网址.py**

```
...
from basic.views import logout as custom_logout
...
urlpatterns = patterns('',
    url(r'/logout/$', custom_logout),
    url(r'^admin/', include(admin.site.urls)),
... 
```

虽然这现在解决了我的问题，但似乎我在某种程度上“修补”了一些东西。

有人可以建议一种更简洁的方法吗？或者我在这里应用的补丁似乎是合理的做法？

# django - Django 聚合：按类别销售

> ID：11334892
> 
> 赞同：0
> 
> 时间：2012-07-04T20:05:23.033
> 
> 标签：django, aggregation

我正在尝试按类别获得总销售额。

我知道有一种方法可以用 python 做到这一点，但我宁愿用查询或聚合来做到这一点。

我的模型：

```
class Item(models.Model):
   category= models.ForeignKey(Category)
   name = models.CharField(max_length=40)

class Category(models.Model):
   name = models.CharField(max_length=40)

class Store(models.Model):
   name=models.CharField(max_length=40)

class Sale(models.Model):
   item=models.ForeignKey(Item)
   store=models.ForeignKey(Store)
   quantity=models.IntegerField()

class Store_Item(models.Model):
   item=models.ForeignKey(Item)
   store=models.ForeignKey(Store)
   price= models.DecimalField(max_digits=10, decimal_places=2) 
```

结果应该是这样的：

```
 sales total
books     100   859.10
audio     200   1894.20

total     300   2753.3 
```

现在我得到每个类别的总量是这样的：

```
p=Sale.objects.all().values('item__category__name').order_by('item__category__name').annotate(total=Sum('quantity')) 
```

我得到：

```
books  100
audio  200 
```

但我被困在价格部分。

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:29:43.907

您可能希望向模型中添加一个函数。像这样的东西应该工作。

```
class Sale(models.Model):
   item=models.ForeignKey(Item)
   store=models.ForeignKey(Store)
   quantity=models.IntegerField()

   def _getTotal(self):
     self.sale.extra(select=("total": "quantity * item_price")
                                ).aggregate(total=Sum("total"))["total"] 
```

# c# - C# 跨不同对象访问变量

> ID：11334893
> 
> 赞同：0
> 
> 时间：2012-07-04T20:05:35.000
> 
> 标签：c#, variables, object

作为 c# 的新手，我不明白变量是如何在对象之间传递的。当我执行这个程序时，我的数组变量“filePaths”返回 null。它是一个基本的窗口窗体。我正在制作一个显示单词并播放声音的程序。

具体错误是“未处理 NullReferenceException。

这是我的特定代码。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Media;

namespace Kindersect
{
public partial class form1 : Form
{
    string[] filePaths;
    string directpath = "C:\\Users\\Optimus Prime\\Documents\\vocabaudio\\";
    int counter = 0;
    int c = 0;
    public form1()
    {
        InitializeComponent();
    }

    public void button1_Click(object sender, EventArgs e)
    {
        timer1.Enabled = true;
        string[] filePaths = Directory.GetFiles(directpath, "*.wav");
        foreach(string k in filePaths)
        {
            c++;
        }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (counter < c)
        {
            label1.Text = filePaths[counter];
            SoundPlayer simpleSound = new SoundPlayer(filePaths[counter]);
            simpleSound.Play();
            counter++;
        }

    }
} 
```

}

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:08:32.670

您正在声明两个不同的变量......在不同的范围内

如果要访问全局声明的文件路径，请从文件路径的第二个声明中删除 string[]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T20:06:46.123

引用变量时丢失@'s。

你也声明`filePaths`了两次。一次在类中（并且从未定义），一次在超出该方法范围的按钮单击事件处理程序中。您只想在类中声明它并在方法中设置它，因此`string[]`从方法中的行中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T20:09:34.067

第一：您不应该在设置变量之前启动计时器。

二：如果在开头定义了变量类型，则不必重新定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T20:10:56.147

我在您的代码中看到的问题是 declare string[] filePaths; 在类级别，然后在 timer1_Tick 事件中使用它，但 string[] filePaths; 永远不要获得分配给它的值，因为您在 button1_Click 行中有一个类似的名称变量： string[] filePaths = Directory.GetFiles(@directpath, "*.wav"); 但此 filePaths 数组的范围仅在 button1_Click 内

```
So to resolve your issue please change

string[] filePaths = Directory.GetFiles(@directpath, "*.wav");

to 

filePaths = Directory.GetFiles(@directpath, "*.wav"); 
```

**我建议您以这种方式使用您的方法，代码更小更清晰，变量更少：**

```
public void button1_Click(object sender, EventArgs e)
{
    timer1.Enabled = true;
}

    private void timer1_Tick(object sender, EventArgs e)
    {
        filePaths = Directory.GetFiles(directpath, "*.wav");
        if (counter < filePaths.Length)
        {
            label1.Text = filePaths[counter];
            SoundPlayer simpleSound = new SoundPlayer(filePaths[counter]);
            simpleSound.Play();
            counter++;
        }

    } 
```

如果您可以通过这种方式在 Form_Load 事件中使用 Directory.GetFiles，它将只被调用一次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T20:14:06.210

看起来您使用的`@`符号不正确。字符串或字符串引用前面的`@`符号旨在禁用反斜杠 ( `\`) 的转义功能。`\\`通常，您必须像当前拥有的 ( )那样使用额外的反斜杠来转义反斜杠。

所以...

```
string directpath = "C:\\Users\\Optimus Prime\\Documents\\vocabaudio\\"; 
```

相当于

```
string directpath = @"C:\Users\Optimus Prime\Documents\vocabaudio\"; 
```

另请参阅：[@(at) 登录文件路径/字符串](https://stackoverflow.com/questions/5179389/at-sign-in-file-path-string)

# java - 上游事件的 ChannelSink 等价物

> ID：11334897
> 
> 赞同：1
> 
> 时间：2012-07-04T20:06:00.123
> 
> 标签：java, netty

我构建了一个上游 Netty 管道，其中管道中的一个早期上游处理程序（我们将其称为 CometDecoder）必须向下游侧相应的 CometEncoder 发送一个空的长轮询请求，当且仅当剩余的上游处理程序不发送通过 CometEncoder 向下游发出实质性请求，以响应接收到的请求。

![在此处输入图像描述](../Images/d980db4c9a11c167fb6cb6f9fdcf9999.png)

原因是这个遗留服务器期望长轮询请求始终处于打开状态，并且并非来自服务器的每个响应都会引发来自客户端的后续请求。

Netty 中似乎有一个 ChannelSink 用作管道中的终端下游处理程序。如果有一个类似的结构允许我们连接到终端 UPSTREAM 处理程序并检查中间上游处理程序之一是否已发送消息的状态，那就太好了。Netty中有这样的东西吗？

那些不得不在 Netty 中处理 Comet 编程的人发现的任何其他方法？

# python - 在 python 中将 np.ndarray 转换为 np.array

> ID：11334906
> 
> 赞同：8
> 
> 时间：2012-07-04T20:06:47.940
> 
> 标签：python, numpy

我有一些数据作为 np.ndarray 加载，需要将其转换为 np.array。

有没有一种简单/快速的方法可以做到这一点，而不必以不同的方式重新加载数据？

我在教程中可以找到的所有信息似乎都是指一种类型的数组或另一种，而不是如何将数据从一种更改为另一种。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T20:10:42.480

它们是相同的：`numpy.array`都是构造类型对象的函数`numpy.ndarray`。

```
>>> import numpy
>>> numpy.ndarray
<type 'numpy.ndarray'>
>>> numpy.array
<built-in function array>
>>> numpy.array([])
array([], dtype=float64)
>>> isinstance(numpy.array([]), numpy.ndarray)
True 
```

# objective-c - 保存列出的对象之一后，NSFetchedResultsController 损坏的排序

> ID：11334907
> 
> 赞同：3
> 
> 时间：2012-07-04T20:06:51.287
> 
> 标签：objective-c, ios, nsfetchedresultscontroller

我有一组用于 CoreData 浏览的通用视图/类，但是在保存对列出对象之一的属性的更改后，我的获取结果控制器的排序顺序有问题。

在`viewWillAppear:`我的表格视图控制器中，我将获取的结果控制器设置为：

```
- (void) setupFetchedResultsController {
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName: self.entityToList];
    request.predicate = self.entitySelectionPredicate; // Typically nil
    request.sortDescriptors = self.entitySortDescriptorList;
    self.fetchedResultsController = [[NSFetchedResultsController alloc]
                 initWithFetchRequest: request 
                 managedObjectContext: self.contextForEntity
                 sectionNameKeyPath: self.keyPathForSections
                 cacheName: nil]; /* Not chacheing */
} 
```

在`didSelectRowAtIndexPath`这个 tableview 控制器中，我推送到一个详细的 table view 控制器，如下所示：

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath {
    id objectInCell = [self.fetchedResultsController objectAtIndexPath: indexPath];
    ManagedObjectDetailTableViewController *dvc = [[ManagedObjectDetailTableViewController alloc]
                    initWithStyle: UITableViewStyleGrouped];
    dvc.detailItem = objectInCell;
    [self.navigationController pushViewController: dvc animated: YES];
} 
```

ManagedObjectDetailTableViewController每个属性和每个关系**都有**一行。如果选择了包含和属性的行，`didSelectRowAtIndexPath`我会推送到**ManagedObjectAttributeEditViewController视图控制器：**

```
- (void) tableView: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath {
    // Section 0 has the attributes for the 'detailItem' object alphabetically by name
    if( indexPath.section == 0 ) {
        ManagedObjectAttributeEditViewController *evc = [[ManagedObjectAttributeEditViewController alloc]
                    initWithNibName: @"ManagedObjectAttributeEditViewController" bundle: nil];
        evc.editedObject = self.detailItem;
        evc.delegate = self;
        // Figure out from the row which attribute was selected
        NSEntityDescription *entity = self.detailItem.entity;
        NSDictionary *attributes = entity.attributesByName;
        NSArray *keys = [attributes allKeys];
        keys = [keys sortedArrayUsingSelector: @selector(compare:)];
        NSString *key = [keys objectAtIndex: indexPath.row];
        evc.editedFieldKey = key;
        [self.navigationController pushViewController: evc animated: YES];
    // The other sections are the relationships for the 'detailItem' object
    } else {
        // Code omitted as not relevant for the error.
    }
} 
```

ManagedObjectAttributeEditViewController**具有**文本字段等，以允许编辑属性的值。当它的保存按钮被触摸时执行：

```
- (IBAction) save {
    id valueFromView;
    NSAttributeType type = [self typeForEditedAttribute];
    switch( type ) {
    case NSDateAttributeType:
        valueFromView = self.datePicker.date;
        break;
    case NSStringAttributeType:
        if( [self.fieldKeyTester shouldUseTextViewForKey: self.editedFieldKey inEntity: self.editedObject.entity.name] ) {
            valueFromView = self.textView.text;
        } else {
            valueFromView = self.textField.text;
        }
        break;
    case NSInteger16AttributeType:
    case NSInteger32AttributeType:
    case NSInteger64AttributeType:
        valueFromView = [NSNumber numberWithInteger: [self.textField.text integerValue]];
        break;
    case NSDecimalAttributeType:
    case NSDoubleAttributeType:
    case NSFloatAttributeType:
        valueFromView = [NSNumber numberWithDouble: [self.textField.text doubleValue]];
        break;
    case NSBooleanAttributeType:
        valueFromView = [NSNumber numberWithBool: self.switchControl.isOn];
        break;
    case NSObjectIDAttributeType:
    case NSTransformableAttributeType:
    case NSBinaryDataAttributeType:
    case NSUndefinedAttributeType:
        NSLog( @"Don't know how to handle attribute type: %d in %s", type, __func__ );
        break;
    default:
        NSLog( @"Unrecognized attribute type: %d in %s", type, __func__ );
        break;
    }
    [self.delegate managedObjectAttributeEditViewController: self
            didSaveValue: valueFromView forKey: self.editedFieldKey];
} 
```

ManagedObjectDetailTableViewController**设置**为委托，`didSaveValue:forKey:`方法为：

```
- (void) managedObjectAttributeEditViewController: (ManagedObjectAttributeEditViewController *) controller didSaveValue: (id) value forKey: (NSString *) key {
    if( value && key ) {
        [self.detailItem setValue: value forKey: key];
        NSError *error;
        if( ![self.detailItem.managedObjectContext save: &error] ) {
            // Update to handle the error appropriately.
            NSLog( @"Unresolved error doing save of attribute %@.\n%@", key, error.localizedDescription );
        } else {
            NSLog( @"-- successfully saved" );
        }
    } else {
        NSLog( @"Got a cancel from edit attribute" );
    }
    // OK, the attribute editing view controller has told us it is done, pop it
    [self.navigationController popViewControllerAnimated: YES];
} 
```

因此，如果我从实体的对象列表开始，并且它们已正确排序。我触摸一行并将其推送到**ManagedObjectDetailTableViewController**。我触摸其中的一个属性行，它会推送到**ManagedObjectAttributeEditViewController**。我更改值并触摸**save**。这会弹出到**ManagedObjectDetailTableViewController**，一切看起来都很好。然后我触摸后退按钮以返回实体的对象列表，但现在它们不再排序（它们似乎总是按相同的顺序，但我不认识该顺序的模式）。

如果我在**保存**后并且在触摸后退按钮之前数到 10，则列表已正确排序。

如果我注释掉`[self.detailItem.managedObjectContext save: &error]`方法调用，`didSaveValue:forKey:`则实体的对象列表保持正确排序，但如果我在自动保存发生之前退出应用程序，我会丢失更改。

这让我认为这与`[self.detailItem.managedObjectContext save: &error]`未完成和获取的结果控制器（使用相同的 NSManagedObjectContext）由于某种原因无法检索排序的数据有关。

我要更改的属性值不涉及排序描述符，因此在我修改值之前和之后显示的顺序应该相同。我的数据库非常大，可能需要几秒钟才能将其写入磁盘。我在模拟器和设备上看到了 iOS 5.1 的问题。

有没有人经历过这样的事情或有什么建议？

抱歉，对于美国的所有 Stackoverflowers 来说，7 月 4 日如此冗长而快乐！

* * *

修改后的**ManagedObjectDetailTableViewController**委托方法`didSaveValue:forKey:`方法为：

```
- (void) managedObjectAttributeEditViewController: (ManagedObjectAttributeEditViewController *) controller
             didSaveValue: (id) value forKey: (NSString *) key {
    if( value && key ) {
        [self.detailItem setValue: value forKey: key];
        NSError *error;
        if( ![self.detailItem.managedObjectContext save: &error] ) {
            // Update to handle the error appropriately.
            NSLog( @"Unresolved error doing save of attribute %@.\n%@", key, error.localizedDescription );
        } else {
            NSLog( @"-- successfully saved" );
            if( [self.detailItem.managedObjectContext.parentContext.hasChanges] ) {
                if( ![self.detailItem.managedObjectContext.parentContext save: &error] ) {
                    NSLog( @"Unresolved error doing save of parent context for attribute %@.\n%@", key, error.localizedDescription );
                } else {
                    NSLog( @"-- successfully saved the parent context too!" );
                }
            }
        }
    } else {
        NSLog( @"Got a cancel from edit attribute" );
    }
    // OK, the attribute editing view controller has told us it is done, pop it
    [self.navigationController popViewControllerAnimated: YES];
} 
```

我现在明白，这种双重保存对于使用最新 iOS 将其更改为永久存储是必要的，因为在父上下文中，保存只会上升一个级别。我不明白为什么不将保存传播到永久商店应该打乱排序顺序。也许我的代码中的某个地方还有其他一些错误，这是掩盖的，或者它只是它的工作方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:37:16.427

好的，根据您的编辑，其中包括新的堆栈跟踪：

您正在使用 UIManagedDocument 来管理您的核心数据堆栈。这意味着第一次保存可能来自 UIDocument 的主线程上下文，第二次保存来自其后台上下文。您能否确认您使用的是 UIManagedDocument 的 managedObjectContext 上下文中的对象（与您自己制作的其他上下文相反）？

另一件事。你能确认`entitySortDescriptorList`你的方法没有以某种方式变成零`setupFetchedResultsController`吗？

最后，作为其他诊断：

*   尝试`save:`从您的顶级视图控制器调用，看看会发生什么。
*   如果你为你的 NSFetchedResultsController 做一个委托会发生什么？您收到更改通知吗？它们看起来合理吗？

# c# - 如何编写类来接受任何...对象？

> ID：11334908
> 
> 赞同：2
> 
> 时间：2012-07-04T20:06:52.970
> 
> 标签：c#, .net

我有一个类，我实例化以保存或加载 xml 数据。

例如：

```
 serilizer = new ObjectSerializer();

    npcEntityData = serilizer.LoadNPCData(fileName); 
```

去：

```
namespace TDIYCSharpLib
{
    public class ObjectSerializer
    {

        NPCBaseInfo NPC;
        MonsterBaseInfo monster;

        public void SaveNPCData(object objGraph, string fileName)
        {
            XmlSerializer xmlFormat = new XmlSerializer(typeof(NPCBaseInfo));

            using(Stream fileStream = new FileStream(fileName, FileMode.Create, FileAccess.Write, FileShare.None))
            {
                xmlFormat.Serialize(fileStream, objGraph);
            }
        }

        public NPCBaseInfo LoadNPCData(string fileName)
        {
            XmlSerializer xmlDeformat = new XmlSerializer(typeof(NPCBaseInfo));

            using (StreamReader fileStream = new StreamReader(fileName))
            {
                NPC = (NPCBaseInfo)xmlDeformat.Deserialize(fileStream);
            }

            return NPC;
        }

    }
} 
```

这就像它所写的那样工作；然而，XmlSerializer 对 typeof(SomeClass) 的需求意味着我必须为这个类提供所有可能需要它的类以及两个特定的方法来操作数据。
喜欢：

```
 public void SaveMonsterData(object objGraph, string fileName)
    {
        XmlSerializer xmlFormat = new XmlSerializer(typeof(MonsterBaseInfo));

        using (Stream fileStream = new FileStream(fileName, FileMode.Create, FileAccess.Write, FileShare.None))
        {
            xmlFormat.Serialize(fileStream, objGraph);
        }   
    } 
```

这是可行的，只是一些简单的复制和粘贴，但似乎是很多不必要的工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T20:08:26.677

您可以使用[通用方法](http://msdn.microsoft.com/en-us/library/twcad0zb%28v=vs.80%29.aspx)，例如

```
public void SaveMonsterData<T>(T objGraph, string fileName)
{
    XmlSerializer xmlFormat = new XmlSerializer(typeof(T));
    using (Stream fileStream = new FileStream(fileName, FileMode.Create, FileAccess.Write, FileShare.None))
    {
        xmlFormat.Serialize(fileStream, objGraph);
    }       
}

public T LoadMonsterData<T>(string fileName)
{
    XmlSerializer xmlDeformat = new XmlSerializer(typeof(T));

    T t;
    using (StreamReader fileStream = new StreamReader(fileName))
    {
        t = (T)xmlDeformat.Deserialize(fileStream);
    }

    return t;
} 
```

如果您有一个名为 Npc 的类，您将使用如下方法：

```
Npc npc;
SaveMonsterData<Npc>(npc, fileName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T20:08:34.430

您可以使用 the[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)而不是`XmlSerializer`- 它将处理任何类型的任何对象图。

这假定您不需要 XML 或可读的序列化格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T20:24:49.727

在将对象作为 objGraph 参数传递之前，您是否对对象进行了任何操作？如果没有，这应该工作：

```
var MyNpcBaseInfoInstance = new NpcBaseInfo();
// ...
SaveAnyObject(MyNpcBaseInfoInstance, "file.xml");

public void SaveAnyObject(object objGraph, string fileName)
{
    XmlSerializer xmlFormat = new XmlSerializer(objGraph.GetType());

    using(Stream fileStream = new FileStream(fileName, FileMode.Create, FileAccess.Write, FileShare.None))
    {
            xmlFormat.Serialize(fileStream, objGraph);
    }
} 
```

# javascript - 手动定义 aloha 的工具栏设置时出现“this.extButton is null”错误

> ID：11334909
> 
> 赞同：1
> 
> 时间：2012-07-04T20:07:02.950
> 
> 标签：javascript, jquery, extjs, aloha-editor

我在 Web 应用程序中使用 aloha。它工作得很好，可以做我需要做的一切。唯一的问题是，只要我尝试添加以下设置来自定义工具栏，

```
Aloha.settings = {
    ...
    toolbar: {
        tabs: {
            Format: []
            Insert: []
        }
    },
    ...
} 
```

我开始在浏览器控制台中收到此错误：

```
this.extButton is null 
```

如果我从设置中删除工具栏部分并使用工具栏的默认设置，一切正常。另外，请注意，此时我根本没有自定义代码，因此没有添加自定义插件或其他代码。

还有其他人遇到过这个问题吗？有什么办法绕过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:09:56.960

听起来您正在覆盖所有设置。`extButton`可能是您在覆盖时未包含的设置`Aloha.settings`。

尝试这个：

```
Aloha.settings = $.extend(true, Aloha.settings, {
    // Your settings here
}); 
```

# silverlight - 如何为不同的 Grid 绑定宽度，以便它们对 SL 应用程序具有相同的宽度？

> ID：11334910
> 
> 赞同：0
> 
> 时间：2012-07-04T20:07:07.417
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

假设我在用户控件中有 2 个网格，并且我希望这 2 个网格具有相同的宽度。所以我所做的是 xaml 之类的：

```
 <Grid x:Name="BasicGrid"  HorizontalAlignment="Left"  />
 <Grid HorizontalAlignment="Left" Width="{Binding ElementName=BasicGrid, Path=Width}" > 
```

但它看起来不工作。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:20:58.053

请在您的用户控件中添加以下代码。

```
<Grid x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid />
    <Grid Grid.Column="1" />
</Grid> 
```

这会将顶部网格划分为具有相同宽度的两列。

让我知道它是否有效。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:10:45.653

你试试看

```
Width="{Binding ElementName=BasicGrid, Path=Width,Mode=TwoWay}" 
```

# c++ - c++数组索引计算问题

> ID：11334911
> 
> 赞同：1
> 
> 时间：2012-07-04T20:07:15.933
> 
> 标签：c++

对不起这个简单的问题，但我无法解决它......

有一个例子：

```
int a[10] = {6, 7.8, 8.0, -6, -5.7, 5, 5.7};

std::cout << a[6 % 8 / 4 + 21 % 9]; 
```

作为回应，我得到**-5**，但我不明白为什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T20:09:15.563

因为你的数组是一个整数数组。

你应该首先使用

```
float a[10] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T20:18:21.370

[http://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence) 运算符有其优先级，因此在这种情况下：6 % 8 / 4 + 21 % 9 = (((6%8)/4)+(21% 9))=(6/4)+(3)=4

```
a[0]=6,
a[1]=(int)7.8 = 7, (correct me if i'm wrong)
a[2] = (int)8.0 = 8,
a[3] = -6,
a[4] = (int)-5.7 = -5,
a[5] = 5,
a[6] = (int)5.7 = 5 
```

所以索引为 4 的元素将 -5.7 转换为整数给出 -5 （其余的只是被切断）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T20:11:20.110

`6 % 8 / 4 => (6%8) / 4 => 6 / 4 => (int)1.5 => 1`（6/4 是 int -- num 和 denom 是 int）
`21 % 9 => 3`
`1 + 3 == 4`

`a[4] == (int)(-5.7) == 5`

`a`是一个`int`数组，所以那里的数字是整数而不是浮点数。
选择索引 4 是因为[C++ 运算符优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)

# gcc - pkg-config：包含 C 和 C++ 的路径

> ID：11334912
> 
> 赞同：2
> 
> 时间：2012-07-04T20:07:21.483
> 
> 标签：gcc, autotools, autoconf, automake, pkg-config

是否可以在 pkg-config 文件 () 中指定 C 和 C++ 的包含路径`mylib.pc.in`？

我知道我有`Cflags`可以传递任何*编译器*标志的字段，但它是通用的，并`autoconf`通过放置我的所有选项来解决它，只要包含路径 in `X_CFLAGS`but not `X_CXXFLAGS`.

因此，如果我有一个包含 C 和 C++ 文件的项目并在以下位置指定`Makefile.am`：

```
mybin_CPPFLAGS = $(X_CPPFLAGS)
mybin_CFLAGS     = $(X_CFLAGS)
mybin_CXXFLAGS = $(X_CXXFLAGS) 
```

我的 C++ 文件看不到包含路径！在下面的示例中，`mylib.pc.in`包含`Cflags: -I/my/iclude/path/`.

编译 C 文件的输出：

```
libtool: compile:  ppc-linux-gcc -DHAVE_CONFIG_H -I. -I./include -I/opt/ELDK/ppc_8xx/usr/include/ -I/my/iclude/path/ -Wall -std=gnu99 -MT libAW3C_IDU_la-aw3c_utility.lo -MD -MP -MF .deps/libAW3C_IDU_la-aw3c_utility.Tpo -c src/aw3c_utility.c  -fPIC -DPIC -o .libs/libAW3C_IDU_la-aw3c_utility.o 
```

编译 C++ 文件的输出（注意缺少`-I/my/iclude/path/`）：

```
libtool: compile:  ppc-linux-g++ -DHAVE_CONFIG_H -I. -I./include -I/opt/ELDK/ppc_8xx/usr/include/ -Wall -MT libAW3C_IDU_la-aw3c_stream.lo -MD -MP -MF .deps/libAW3C_IDU_la-aw3c_stream.Tpo -c src/aw3c_stream.cpp  -fPIC -DPIC -o .libs/libAW3C_IDU_la-aw3c_stream.o 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:18:22.327

`pkg-config`具有`--cflags-only-I`仅在 中产生包含路径的选项`Cflags`。因此，您可以添加如下内容：

```
X_INCFLAGS=`pkg-config mylib --cflags-only-I`
X_CXXFLAGS+="$X_INCFLAGS" 
```

到`configure.ac`. 问：你在使用`PKG_CHECK_MODULES`宏`configure.ac`吗？

# linux - Bash 脚本中的版权和英镑符号

> ID：11334913
> 
> 赞同：0
> 
> 时间：2012-07-04T20:07:26.453
> 
> 标签：linux, bash, debian, nano

`©`将版权符号和英镑符号`£`插入 bash 脚本的正确方法是什么。

我正在使用`nano`我的编辑器并运行 Debian Squeeze。

如果我从 Windows 复制并粘贴符号，它可以工作，但它似乎粘贴了`nano`无法显示的隐藏字符，因此很难在 shell 脚本中编辑代码。

所以例如我希望能够做到这一点： -

```
text="£15.00"
text2="© John Doe" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T21:16:27.683

似乎您使用的语言环境不支持这些符号（在过去，它也可能是一种糟糕的字体）。由于您使用的是 UTF-8 字符（Windows 上的默认字符），因此您还需要在 Linux 上的 UTF-8 感知环境中。您可以使用以下`locale`命令进行检查：

```
$ locale
LANG=en_US.UTF-8
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

所以我的系统很好，但你的系统设置了默认的 ASCII C 语言环境。这些是简单的`bash`变量，因此您可以`export`单独使用它们或将它们全部覆盖（通过设置`LC_ALL`）。但是，这只会影响当前的 shell，所以你需要让它成为 shell 初始化的一部分，以便每次都自动工作。

这通常通过`/etc`全局配置文件脚本来完成，但`.bash_profile`也`.bashrc`可以正常工作。在您的 Debian 版本中，语言环境存储在`/etc/default/locale`其中，您可以使用 获取可用选项列表`locale -a`，例如：

```
$ locale -a
C
en_US
en_US.iso88591
en_US.utf8
POSIX
sl_SI.utf8 
```

选择一个带有 utf8 后缀的。如果您需要其他语言环境（例如日语），可以使用 localedef/locale-gen 生成它们（随附`glibc`或作为单独的包）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T21:36:55.210

如果在 nano 中输入符号时遇到问题，请使用转义语法。您可以使用`iconv`将其转换为与当前语言环境对应的输出编码：

```
text=$'\xa315.00'
text2=$'\xa9 John Doe'
iconv -f latin1 <<< $text
iconv -f latin1 <<< $text2 
```

或在 utf8 中相同：

```
text=$'\xc2\xa315.00'
text2=$'\xc2\xa9 John Doe'
iconv -f utf-8 <<< $text
iconv -f utf-8 <<< $text2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T20:35:08.290

最好将 (C) 用于版权，您希望它在其他语言环境中始终可读，而不是为违规辩护。

显示器看起来像

```
text="1.00"
text2=" ohn Doe" 
```

在我的测试终端中。

# ruby - 无法使用 Netbeans 和 ubuntu 调试 ruby 1.9.3

> ID：11334914
> 
> 赞同：2
> 
> 时间：2012-07-04T20:07:30.770
> 
> 标签：ruby, debugging

我完全是 Ruby 的初学者。今天尝试搭建一个开发环境。因此，我已经安装了 rvm 以及 ruby​​ 和 rails。作为 IDE，我决定使用 Netbeans (7.0)。现在我正在努力（几个小时......）调试一个简单的测试文件，但它不起作用。IDE 让我安装快速调试器，但由于一些错误，这无法完成。（它告诉我它未能构建 gem 原生扩展）如果我尝试使用普通的（= 慢速调试器）什么也不会发生。以下是安装失败的输出：

```
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/bin/ruby
/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- openssl (LoadError)
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/https.rb:22:in `<top (required)>'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/ruby_core_source-0.1.5/lib/contrib/uri_ext.rb:11:in `<top (required)>'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:6:in `<top (required)>'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from extconf.rb:2:in `<main>' 
```

如果您有疑问：我是 ruby​​ 的 DAU ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:20:40.010

Netbeans 7.0 放弃了对 Ruby 的支持 - [http://www.infoq.com/news/2011/01/ruby-dropped-in-netbeans-7](http://www.infoq.com/news/2011/01/ruby-dropped-in-netbeans-7)

嘘Netbeans！！！！我用了6.9一段时间，如果你能得到一个副本，那肯定有用吗？

这些天，我个人将[Sublime Text 2](http://www.sublimetext.com/2)与[保护包](https://github.com/cyphactor/sublime_guard)和/或终端一起使用。很多人也使用 Textmate、Vim 或 Emacs。

# java - 学习 Java 5 与 Java 7？

> ID：11334917
> 
> 赞同：0
> 
> 时间：2012-07-04T20:08:08.893
> 
> 标签：java, java-7, java-5

我打算学习Java，我有其他面向对象语言的编程经验，所以我熟悉OOP概念。目前，我正在考虑两本书来帮助我快速开始 Java 开发。“Head first into Java 2nd edition”或“Java All-in-One For Dummies 3rd edition”。

现在很多人都推荐 Head first into Java 作为这两本书中更好的一本。然而，Head first into Java 于 2005 年发布（除非我不知道他们的最新版本），并使用 Java 5 进行教学。Java All-in-One 于去年 8 月发布，并针对 Java 7 进行了更新。

现在我的问题是我倾向于 Head first into Java（使用 Java5），我会错过 Java 6 和 7 的重要方面吗？这会对我精通 Java 开发人员的能力产生重大影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T20:10:00.503

一句话：没有。

如果您想学习基本概念，Java 5 与 Java 7 一样好。

随着泛型的引入，最大的变化是在 4（更准确地说是 1.4 系列）和 5 之间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T20:09:58.693

刚开始学习Java。当您或多或少精通时，您可以检查最新消息。

根据您开发软件的位置，您无论如何都会被锁定到旧版本。

# c++ - 遍历 QSqlQuery 结果集的最有效方法是什么？

> ID：11334921
> 
> 赞同：6
> 
> 时间：2012-07-04T20:08:36.193
> 
> 标签：c++, sql-server, qt, odbc, qtsql

我正在使用 QODBC 查询远程 MSSQL Server 数据库，并返回了一个结果集，但它看起来好像它为每条记录一个一个地向 SQL Server 发送查询。这对于迭代结果集来说真的很慢。从 Qt 运行查询，大约需要 15 秒才能完成。我在 SQL Server Management Studio 中运行了相同的查询，返回结果需要 1 秒。这是我正在使用的代码：

```
QString connectionTemplate = "DRIVER={SQL SERVER};SERVER=server;DATABASE=db;";
QSqlDatabase db = QSqlDatabase::addDatabase("QODBC3", "db");
db.setDatabaseName(connectionTemplate);
db.setUserName("user");
db.setPassword("password");

if (db.open()) {
    qDebug() << "OK!";
    QSqlQuery * query = new QSqlQuery(db);
    query->exec("SELECT [UserName]"
                "  FROM [dbo].[Users]");

    while(query->next())
    {
        QString userName = query->value(0).toString();
        qDebug() << userName;
    }

    db.close();
}
else {
    qDebug() << db.lastError().text();
} 
```

有没有办法将整个结果集捕获到内存中并在内存中循环遍历它？我宁愿不让应用程序花费这么长时间来遍历结果集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-16T12:46:40.787

我想出了如何提高迭代结果的速度。我忘记了在执行之前我需要先准备好sql，并且[`setForwardOnly`](http://doc.qt.io/qt-4.8/qsqlquery.html#setForwardOnly)必须设置为true。

```
QSqlQuery * query = new QSqlQuery(db);
query->setForwardOnly(true);
query->exec("SELECT [UserName]"
            "  FROM [dbo].[Users]"); 
```

# python - 无法使用方法在python中设置类属性

> ID：11334922
> 
> 赞同：5
> 
> 时间：2012-07-04T20:08:38.010
> 
> 标签：python, class, attributes

初始化 Foo 对象确实会运行 func() 方法，但 self.a 的值无论如何都会设置为 None。

我怎样才能让下面的代码工作？

```
#!/usr/bin/env python

class Foo(object):

    def __init__(self, num):
        self.a = self.func(num)
        print self.a

    def func(self, num):
        self.a = range(num)
        print self.a

    def __str__(self):
        return str(self.a)

def main():
    f = Foo(20)
    print f

if __name__ == "__main__":
    main() 
```

输出是：

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
None
None 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T20:10:38.580

您正在重置`self.a`为函数的返回值。由于该函数不返回任何内容，因此该值设置为`None`。

```
def __init__(self, num):
    self.a = self.func(num)  # return value of function is None
    print self.a             # self.a is now None

def func(self, num):
    self.a = range(num)      # sets self.a to [0..19]
    print self.a             # prints [0..19]
    # implicit "return None" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T20:18:20.140

jterrace 是正确的。发生的事情是 func() 方法首先打印，而不是**init**方法。考虑这个程序：

```
#!/usr/bin/env python

class Foo(object):

    def __init__(self, num):
        self.a = self.func(num)
        print '__init__:', self.a

    def func(self, num):
        self.a = range(num)
        print 'func:', self.a

    def __str__(self):
        return str(self.a)

if __name__ == '__main__':
    f = Foo(20)
    print '__main__:', f 
```

除了我在相应函数的打印语句中添加了`__init__:`,`func:`和之外，它与您的非常相似。`__main__:`运行它，您应该对正在发生的事情有更好的了解。

# memory-leaks - 缺乏释放会导致什么样的问题？

> ID：11334941
> 
> 赞同：2
> 
> 时间：2012-07-04T20:10:01.913
> 
> 标签：memory-leaks, fortran, glibc, memory-management

我目前遇到了一个问题，如果我得到

`*** glibc detected *** ./efit: free(): invalid next size (fast): 0x00000000006127f0 ***`

`glibc`带有通常的内存映射和错误附带的回溯信息。但是，我无法找到此问题的原因。似乎（基本上）我的整个程序在发生这种情况时已经完成。我在网上读到的一件事是，这可能是由于缺乏释放。

现在，我一直在运行程序而没有释放我的一些数组（我的印象是释放会导致内存泄漏，但这只会影响程序运行时的性能和效率）。现在，当我重新启动程序时，我遇到了这个错误。

是否有可能我之前执行的程序没有释放我的数组是“回来困扰我”，因为我试图写入的之前的执行中有未释放的内存？

如果不是，我完全被这个错误弄糊涂了。关于我应该从哪里开始寻找和/或我应该如何调试以找到它的任何线索？

对于它的价值，我正在使用 gfortran 编译

编辑：虽然编译选项一开始并没有直接识别出这个问题，但它帮助我减少了它。我在循环中使用了一个整数变量`iat`，然后几行之后，我认为是在. 我正在引用数组边界之外的数组。当我更正了您的编译选项列出的一些警告时，这个错误变成了对错误更清晰的描述：.`iat=1,natoms``do``iat``1,natoms``Fortran runtime error: Index '7' of dimension 1 of array 'isnormed' above upper bound of 6`

是什么阻止了第一次产生这个错误？我所做的编译警告告诉我的唯一更改是更改`read(fout, '(a)'), line100' to`read(fout, '(a)') line100' （删除逗号）并将旧样式字符描述更改`character*100 line100`为新`character(100) line100`描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:25:11.580

此消息与取消分配失败无关。这是说堆已损坏。发生这种情况的方式有很多，但忘记释放数组不是其中之一。如果这是 Fortran 代码，则很可能是一个错误声明的数组。

`glibc`进行一致性检查时正在生成该消息。因此，消息*何时*发生（运行开始或结束）是不相关的，除非您知道损坏发生在消息出现之前的某个时间（但可能是任何时间）。

损坏的堆意味着您的程序生成的答案可能从完全正确到完全无用。你必须摆脱这个消息。

> （我的印象是释放会导致内存泄漏，但这只会影响程序运行时的性能和效率

这是落后的。*未*完成释放时会发生内存泄漏。

最好的方法是使用`valgrind`旨在详细检测和报告堆问题的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:36:23.940

上一次运行程序的错误不会影响下一次运行。操作系统加载可执行文件的新版本并为其提供内存。只有当您让程序将信息写入文件并在下次运行时将其读入时，它们才能传输信息。

当程序完成时，操作系统会自动释放内存。此外，对于 Fortran >=95，当过程返回时，Fortran 会自动释放过程本地的可分配数组。

很可能您有一个内存使用问题，它破坏了描述程序使用的内存的内部结构。对于 Fortran，这可以通过调用者和被调用者之间的参数不匹配、索引超出数组末尾或使用指针来实现。你在用指针吗？如果没有，前两个在这个时代通常很容易防范。将您的过程放入模块中并“使用”这些模块。这将允许编译器检查参数的一致性。使用下标的运行时检查选项进行编译。这将确定您是否在数组末尾进行索引并存储在其他内存中。

使用 gfortran，尝试以下编译器选项： -O2 -fimplicit-none -Wall -Wline-truncation -Wcharacter-truncation -Wsurprising -Waliasing -Wimplicit-interface -Wunused-parameter -fwhole-file -fcheck=all -std=f2008 -迂腐的-fbacktrace。如果其中一些识别出过多的警告，那么对于这个问题来说重要的是 fcheck=all，或者更窄的 fcheck=bounds。

# android - 在 Android 上使用模块库

> ID：11334942
> 
> 赞同：2
> 
> 时间：2012-07-04T20:10:02.793
> 
> 标签：android

我需要创建一个通用应用程序，它可以使用不同的语言（不是根据设备设置进行本地化）和不同的可绘制对象。开发是使用 IntelliJ 完成的。

我的问题是是否可以在特定模块中创建“通用”应用程序，是否有针对不同语言/drawable 的库模块和可绘制模块。然后，我将使用不同的编译（使用 ANT）来构建不同的应用程序（例如，带有深色样式图像的英语或带有白色样式图像的西班牙语）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:20:11.930

我不太确定这是否会对您有所帮助，或者我是否理解您的问题，但我目前正在开发一个**动态加载单独模块的 android 应用程序。**

因此，我有我的主要 android 应用程序，它从 android jar（模块）中找到的 .class 文件加载方法。我想这会处理“通用应用程序”部分？处理不同的语言——这不是我真正研究过的东西，所以我无法指定如何处理。

**这是我的应用程序的工作方式：**

模块包含告诉我的主应用程序如何运行所需的所有逻辑 - 视图是什么样的，在视图之间切换，接受用户输入，通过我的模块和我的主应用程序之间共享的静态库连接到服务器。

虽然我找到了一种从我的模块动态加载图像的方法，但我仍然没有找到一种动态加载“android布局”的方法，所以我的模块会拉取布局文件并调用充气器以加载视图，或者从头开始创建它们程序上..

我的模块不包含任何“活动”类，因此不需要生成 Android ManifestFile。

因此，我的主应用程序不需要知道要放入其 android 清单文件中的“活动”的数量或名称，因为没有 - 因此我可以拥有任意数量的模块 - 所有模块都具有与主应用程序不同的功能android应用程序不知道。

我找到了你的问题，因为我正在寻找一种方法来构建我的模块，快速而肮脏，而不必每次都使用 eclipse IDE 来创建一个 jar。现在我的模块需要包含以下内容：

.class 文件 从 .class 文件生成的 .dex 文件 自定义清单文件。自定义视图所需的图像

对不起，如果我的回答没有真正帮助到你...

# json - 通过 websocket 发送在 Play 框架中创建的 JSON

> ID：11334944
> 
> 赞同：0
> 
> 时间：2012-07-04T20:10:13.277
> 
> 标签：json, coffeescript, websocket, playframework-2.0

这就是我在*浏览器*控制台中得到的：

```
WS-PARSER: received {"eventPhase":2,"origin":"","bubbles":false,"defaultPrevented":false,"srcElement":{"binaryType":"blob","extensions":"","url":"ws://localhost:9000/map-socket/a@a.com","bufferedAmount":0,"readyState":1,"onerror":null,"onopen":null,"onclose":null,"protocol":"","URL":"ws://localhost:9000/map-socket/a@a.com"},"type":"message","returnValue":true,"target":{"binaryType":"blob","extensions":"","url":"ws://localhost:9000/map-socket/a@a.com","bufferedAmount":0,"readyState":1,"onerror":null,"onopen":null,"onclose":null,"protocol":"","URL":"ws://localhost:9000/map-socket/a@a.com"},"source":null,"cancelable":false,"currentTarget":{"binaryType":"blob","extensions":"","url":"ws://localhost:9000/map-socket/a@a.com","bufferedAmount":0,"readyState":1,"onerror":null,"onopen":null,"onclose":null,"protocol":"","URL":"ws://localhost:9000/map-socket/a@a.com"},"ports":[],"timeStamp":1341430631884,"lastEventId":"","cancelBubble":false,"data":"{\"stars\":[{\"x\":\"0.0\",\"y\":\"0.0\",\"own\":\"-1\",\"id\":\"0\",\"units\":\"0\"},{\"x\":\"0.0\",\"y\":\"0.0\",\"own\":\"-1\",\"id\":\"1\",\"units\":\"0\"},{\"x\":\"0.0\",\"y\":\"0.0\",\"own\":\"0\",\"id\":\"2\",\"units\":\"0\"}]}"} 
```

我有两个问题：

1）为什么消息的第一部分（自动）有那么多标题重复？可以吗，我应该这样保留还是可以以某种方式减少样板的数量？

2）为什么消息的第二部分（我的有效负载）中的所有引号都被转义了？

这是制定 JSON 的代码：

```
val stars = strs.getAll.map(_.asJsValue).toSeq
Json.toJson(
    Map(
        "stars" -> stars
        )
) 
```

`asJsValue`方法：

```
 def asJsValue = {
    Json.toJson(
        Map(
            "id" -> id.toString,
            "x" -> x.toString,
            "y" -> y.toString,
            "units" -> units.toString,
            "own" -> getOwnerID.toString
        )
    )
  } 
```

在客户端：

```
websocket.onmessage = receivedEvent

receiveEvent = (event) ->
  console.log("WS-PARSER: received " + JSON.stringify(event)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:36:27.047

1.  大多数数据是在客户端添加的，只有`data`值是通过网络发送的
2.  JSON 需要双引号，这就是它们被转义的原因

*（免责声明：不是play用户）*

# jquery - IE8 扩展面板溢出其容器，除了

> ID：11334947
> 
> 赞同：0
> 
> 时间：2012-07-04T20:10:31.530
> 
> 标签：jquery, asp.net, internet-explorer-8

我想我会在不添加任何代码和大量细节的情况下发布这个问题，因为解决方案可能（希望）是显而易见的。

我正在使用 jQuery 来展开面板，当我展开具有合理数量的内容的面板时，面板会溢出容器，使页面看起来有点凌乱。但是，如果我随后稍微水平调整浏览器窗口的大小，容器就会神秘地自行修复并按应有的方式覆盖内容。

该问题仅出现在 IE8 中。我正在使用 IE Tester 并没有在 IE8 中正确测试。我将 ASP.NET 与 Ajax 一起使用。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:34:44.103

您可能想尝试在 slideToggle 的回调函数中触发页面元素上的任何 CSS 更改。我最近遇到了一个类似的问题，只是通过切换一个类（该类没有 CSS 属性，只有一个名称）它触发了 IE8 中的布局更改，原因不明。这是我能让 IE8 响应我的内容大小变化的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:21:11.943

我最好的猜测是你可以通过设置**zoom:1;来修复它。**在容器上的 css 中。

# c# - 如何在 db c# 中存储 X509Certificate2

> ID：11334951
> 
> 赞同：3
> 
> 时间：2012-07-04T20:10:42.763
> 
> 标签：c#, xml, ado.net, cryptography, x509certificate

这是场景：

我有几个`.pfx`文件，我需要将它们存储在 MySQL DB 中。

我已经尝试存储 RawData 的东西，但是当我尝试使用重建的证书签署 xml 时，我得到：

> 未加载签名密钥。

好吧，所以我尝试存储私钥，使用该函数`ToXmlString`从私钥生成字符串并`FromXmlString`加载新字符串，但后来我得到：

> 对象仅包含密钥对的公共部分。还必须提供私钥。

关键是，如何正确地将证书及其密钥存储在数据库中，以便我可以重建它并将其用于数字签名文档？

**更新：**

已经尝试过但没有用： [Store an X509Certificate2 in DB](https://stackoverflow.com/questions/2240176/store-an-x509certificate2-in-db)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T21:20:35.173

该证书仅包含公钥，因此仅存储该*公钥*是行不通的。

另一方面，`cert.PrivateKey.ToXmlString(true)`应该工作。您确定您记得使用`includePrivateParameters`设置为 true 的参数调用它并且您将其导入为可导出的吗？

```
X509Certificate2 cert = new X509Certificate2("key.pfx", "password", X509KeyStorageFlags.Exportable);
string xml = cert.PrivateKey.ToXmlString(true); 
```

或者，您可以将整个 pfx 存储在数据库中。

# time - SAS：Ceil 时间格式变量

> ID：11334954
> 
> 赞同：4
> 
> 时间：2012-07-04T20:10:57.217
> 
> 标签：time, sas, ceil

`ceil`是否可以在时间格式变量（例如 09:31:23）上使用该命令？我想使用`ceil`09:32:00。我尝试使用类似于`round(time,'0:01:00'T)`但我想使用的东西，`ceil`因为我不想四舍五入。使用`round`将给我`09:31:00`。我尝试使用`ceil`而不是，`round`但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T22:16:56.383

由于 SAS 时间实际上是自午夜以来的秒数，因此 CEIL 将为您提供下一秒的开始时间。要开始下一分钟，请使用 INTNX 功能。

```
data _null_;
    t='09:31:23.12'T;
    nextsecond=ceil(t);
    nextminute=intnx('minute', t, 1, 'BEGINNING');
    put t= time12.2 nextsecond= time12.2  nextminute= time12.2;
run;

LOG:   t=9:31:23.12 nextsecond=9:31:24.00 nextminute=9:32:00.00 
```

# android - 当我想以编程方式添加元素时，Android 在哪里放置滚动

> ID：11334955
> 
> 赞同：0
> 
> 时间：2012-07-04T20:11:14.090
> 
> 标签：android

我想为用户构建一个屏幕以在比赛中获得他的分数，屏幕将有可能行，每一行用于一场比赛，我应该在哪里放置滚动我的布局以及如何？

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/LL1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dip"
            android:weightSum="2" >

            <TextView
                android:id="@+id/tvMarksCompetitionID"
                android:layout_weight="1"
                android:text="Competition"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvMarksMarks"
                android:layout_weight="1"
                android:text="Marks"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvMarksQuestionsNum"
                android:layout_weight="1"
                android:text="Questions"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>
    </TableLayout>

</FrameLayout> 
```

请你给我一个很好的布局这三个文本视图:) 我是安卓新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:20:44.180

**将TableLayout**封装在**ScrollView**中，使您的布局可滚动

# c# - C#模糊逻辑教程

> ID：11334958
> 
> 赞同：0
> 
> 时间：2012-07-04T20:11:20.903
> 
> 标签：c#, fuzzy-logic

嘿，有人可以建议我可以在 C# 中学习模糊逻辑教程的最佳论坛或网站在哪里。我想了解道路检测、边缘检测和图像处理

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T21:10:39.203

模糊逻辑背后的想法非常简单。我会尝试解释。

因此，在正常逻辑中，您使用诸如“i == 1”或“q > 3 and q < 4”之类的比较。

模糊逻辑，一般来说是基于你可以有部分匹配或部分真相的想法。

因此，如果我正在搜索姓氏为“Hamilton”的人并输入“Hamelton”，正常逻辑会说它不匹配。
模糊逻辑可能会返回如下结果：

汉密尔顿有 8 个字母，8 个字母中有 7 个匹配，因此如果将 7 除以 8，则匹配率为 0.875。

根据我刚刚制定的一些业务规则，任何具有 0.75 或更大的值都将构成匹配。

此外，您可以将匹配“规则”混合在一起，并提出一个标量来确定模糊匹配。

希望有帮助！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T20:14:06.303

试试[AForge.Net——](http://www.aforgenet.com/framework/)他们似乎有你要找的东西。

# java - 单个 InputStream 与独立消费者的并发处理

> ID：11334963
> 
> 赞同：7
> 
> 时间：2012-07-04T20:12:02.467
> 
> 标签：java, concurrency, stream, inputstream

我需要生成 N 个消费者线程，它们同时处理相同的 InputStream，例如 - 以某种方式对其进行转换、计算校验和或数字签名等。这些消费者不相互依赖，并且它们都使用第三方库，这些库接受 InputStream 作为数据来源。

所以我能做的是 - 创建一些 InputStream 的实现，这将

*   从“父”流中读取数据块
*   解锁消费者
*   等到每个消费者都读完整个块
*   读取下一个块

虽然看起来很简单，但它可能会引发各种问题，例如某些消费者死亡时的活锁、实现所有 InputStream 方法、使用屏障/闩锁控制消费者自己的 fork/join 等。

一位哥们告诉我，实施需要半个小时，这让我度过了一个晚上。

我更喜欢使用足够成熟的东西（谷歌搜索没有结果，因此我的 google-fu 不够好？）或者不打扰并将整个“源”流复制到临时文件中并将其用作数据来源。后一种解决方案似乎更可靠，但最终可能会创建千兆字节文件（例如在处理流式音频时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T20:26:04.467

在我看来，您至少应该有某种缓冲，以便不同的消费者可以以不同的速度在流中移动，而不会一直被当前最慢的消费者拖累。这基本上确保了最坏情况下的性能和很少的并发收益。

例如，您可以用迄今为止使用过的消费者标记每个块，然后删除完全用完的消费者。也许这可以通过每个消费者持有对它尚未使用的每个块的引用来实现，这将允许 GC 自动处理已使用的块。生产者可能会`WeakReference`为这些块保留一个 s 列表，以便它可以处理尚未使用的块数量，并以此为基础进行节流。

我也在考虑`InputStream`每个线程有一个单独的实例，它在内部与生产者通信`InputStream`。这样，您就可以轻松解决活锁风险：`try ... finally { is.close(); }`- 垂死的消费者关闭自己的输入流。这将传达给生产者。

我对使用`ArrayBlockingQueue`每个消费者有一些想法。在不让生产者阻塞或忙等待的情况下，确保所有消费者都得到适当的喂食会有一些困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:40:50.970

您是否考虑过使用管道流？您的生产者可以有一个或多个[PipedOuputStream](http://docs.oracle.com/javase/7/docs/api/java/io/PipedOutputStream.html)，它会在其中抛出从文件中读取的任何内容。在管道的另一端，您有不同的使用者线程读取相应的[PipedInputstream](http://docs.oracle.com/javase/7/docs/api/java/io/PipedInputStream.html)（这是一个可以与您的库共享的 InputStream）。

您的生产者线程可以决定应该通过哪个管道发送数据，通过这种方式，为管道另一侧的给定消费者线程读取提供要处理的数据。

如果您需要从消费者线程中取回数据，那么您可以创建另一个管道，以相反的方向将数据发回给您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:35:19.477

您可以尝试一些 Java 消息服务 (JMS) 实现，例如[Apache ActiveMQ](http://activemq.apache.org/)。

在您的情况下，您需要创建一个所谓的*主题*（请参阅[主题与队列](http://activemq.apache.org/how-does-a-queue-compare-to-a-topic.html)）。一个主题由生产者创建，并发布给 N 个消费者，这些消费者可以同时运行，每个消费者接收完全相同的数据。

由于您想使用`InputStream`s ，因此有一章关于如何[发送消息是流](http://activemq.apache.org/jms-streams.html)。

我想，通常情况下，生产者和消费者将是独立的进程，可能在网络上的不同机器上运行。不过，我认为您可以将其配置为完全在单个 JVM 中运行。这将取决于 JMS 的实现。这些也很有名：[JBoss 的 HornetQ](https://www.jboss.org/hornetq)、[RabbitMQ](http://www.rabbitmq.com/)和一大堆其他人。

# android - 更改Android中关键事件的字符

> ID：11334965
> 
> 赞同：0
> 
> 时间：2012-07-04T20:12:03.903
> 
> 标签：android, android-edittext

我有一个 EditText，我想给它附加一个只接受十六进制数字的 KeyListener。问题是我想将字母大写，然后将它们发送给调用者，即从 onKeyDown 返回 false 以获得正常行为（发送的数字没有变化）。KeyEvent 有一些改变动作、标志等的功能，但没有改变键码的功能。如何更改按键事件的按键代码？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:16:27.973

不要控制键盘的按键，而是尝试使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)而不是 EditText 来管理插入的字符

# objective-c - UIPageViewController - 我如何跳转到特定的页码？

> ID：11334967
> 
> 赞同：16
> 
> 时间：2012-07-04T20:12:10.360
> 
> 标签：objective-c, ios, cocoa-touch, uipageviewcontroller

我花了将近 8 个小时来了解如何跳转到 UIPageViewController 中的特定页码……下面是我的项目的样子

我想做一个看起来像 Ibooks 的应用程序---

我从这里提供的代码中获得了帮助 - [http://www.ioslearner.com/tag/uipageviewcontroller-sample-code/](http://www.ioslearner.com/tag/uipageviewcontroller-sample-code/)

我制作了一个 plist 和 UITableView ，我从 TableView 中选择值并在放置在 UIPAgeiewController 上的 webView 上显示相同的值，但问题是只有 web 视图中的页面发生了变化，而不是 UIPageViewController 的实际页码....

如果我缩小我的问题范围，它看起来像---有没有办法在 UIPageViewController 中的页码之间切换......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T12:57:03.637

您必须实例化管理要跳转到的页面的视图控制器，然后调用页面视图控制器的`setViewControllers:direction:animated:completion:`方法，传递新的视图控制器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-18T15:40:08.113

SWIFT代码：

```
func goToPage(index: Int) {
    if index < viewControllers.count {
        pageVC!.setViewControllers([viewControllers[index]], direction: .Forward, animated: true, completion: nil)
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-15T07:31:38.540

这是另一个如何跳转到已解析索引的页面的示例：

```
-(void)gotoPage:(int)index{

    SinglePageViewController *viewController = [self viewControllerAtIndex:index];

    UIPageViewControllerNavigationDirection direction;
    if(_curIndex <= index){
        direction = UIPageViewControllerNavigationDirectionForward;
    }
    else
    {
        direction = UIPageViewControllerNavigationDirectionReverse;
    }

    if(_curIndex < index)
    {
        for (int i = 0; i <= index; i++)
        {
            if (i == index) {
                [self.pageViewController setViewControllers:@[viewController]
                                          direction:direction
                                           animated:YES
                                         completion:nil];
            }
            else
            {
                [self.pageViewController setViewControllers:@[[self viewControllerAtIndex:i]]
                                          direction:direction
                                           animated:NO
                                         completion:nil];

            }
        }
    }
    else
    {
        for (int i = _curIndex; i >= index; i--)
        {
            if (i == index) {
                [self.pageViewController setViewControllers:@[viewController]
                                          direction:direction
                                           animated:YES
                                         completion:nil];
            }
            else
            {
                [self.pageViewController setViewControllers:@[[self viewControllerAtIndex:i]]
                                          direction:direction
                                           animated:NO
                                         completion:nil];

            }
        }
    }

    _curIndex = index;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T09:13:53.580

我使用这个功能（我总是在横向，2页模式）

```
-(void) flipToPage:(NSString * )index {

int x = [index intValue];
LeafletPageContentViewController *theCurrentViewController = [self.pageViewController.viewControllers   objectAtIndex:0];

NSUInteger retreivedIndex = [self indexOfViewController:theCurrentViewController];

LeafletPageContentViewController *firstViewController = [self viewControllerAtIndex:x];
LeafletPageContentViewController *secondViewController = [self viewControllerAtIndex:x+1 ];

NSArray *viewControllers = nil;

viewControllers = [NSArray arrayWithObjects:firstViewController, secondViewController, nil];

if (retreivedIndex < x){

    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

} else {

    if (retreivedIndex > x ){

        [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionReverse animated:YES completion:NULL];
      } 
    }
} 
```

也许你也需要这个

```
- (LeafletPageContentViewController *)viewControllerAtIndex:(NSUInteger)index {   

    if (([self.modelArray count] == 0) || (index >= [self.modelArray count])) {
        return nil;
    }
    LeafletPageContentViewController *dataViewController;
    dataViewController = [[LeafletPageContentViewController alloc]initWithNibName:@"LeafletPageContentViewController" bundle:nil];

    dataViewController.dataObject = [self.modelArray objectAtIndex:index];
    return dataViewController;

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-21T16:30:42.923

@milijan 回答效果很好。这是他回答的快速版本：

```
func jumptoPage(index : Int) {

    let vc = viewControllerAtIndex(index)
    let direction : UIPageViewControllerNavigationDirection!

    if currentIndex < index {
        direction = UIPageViewControllerNavigationDirection.Forward
    }
    else {
        direction = UIPageViewControllerNavigationDirection.Reverse
    }

    if (currentIndex < index) {
        for var i = 0; i <= index; i++ {
            if (i == index) {
                self.newPageViewController.setViewControllers([vc], direction: direction, animated: true, completion: nil)
            }
            else {
                self.newPageViewController.setViewControllers([viewControllerAtIndex(i)], direction: direction, animated: false, completion: nil)
            }
        }
    }
    else {
        for var i = currentIndex; i >= index; i = i - 1 {
            if i == index {
                self.newPageViewController.setViewControllers([vc], direction: direction, animated: true, completion: nil)
            }
            else {
                self.newPageViewController.setViewControllers([viewControllerAtIndex(i)], direction: direction, animated: false, completion: nil)
            }
        }
    }
 currentIndex = index
} 
```

# php - 获取时间范围内 MySQL 的 Top 用户

> ID：11334969
> 
> 赞同：1
> 
> 时间：2012-07-04T20:12:21.297
> 
> 标签：php, mysql

我正在尝试生成用户在特定时间范围内完成的活动的报告。

这是我的表的结构，叫做“注册”，每次用户在网站上执行操作时，它都会在表中记录用户的 ID、用户所做操作的类型和日期，即由 PHP 函数 time() 提供。该表如下所示：

```
iduser | Action | Date
82919  |  0     | 1339081680
89754  |  5     | 1339084560
88135  |  1     | 1339585320
82919  |  0     | 1339083420
26367  |  1     | 1349096510 
```

我使用以下查询来选择时间范围内的记录：

```
SELECT * FROM register WHERE date>='$BeginningDate' AND date<'$EndDate' ORDER BY date DESC 
```

这个查询效果很好，但我现在不知道的是如何编写查询，除了生成属于特定时间范围的记录列表之外，还将计算在该时间段内拥有更多记录的前 10 个用户. 我曾尝试编写子查询，但该主题超出了我目前的技能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T20:21:03.847

```
SELECT COUNT(*), iduser
FROM register 
WHERE date>='$BeginningDate' AND date<'$EndDate'
GROUP BY iduser
ORDER BY COUNT(*) DESC
LIMIT 10 
```

请注意，如果“前 10 名”中的多个用户的计数相同，则只取前 10 个。如果您想要更复杂的内容，则必须考虑进行额外的修改。

# mysql - 你如何通过mysql查询获得帖子的评论数？

> ID：11334971
> 
> 赞同：3
> 
> 时间：2012-07-04T20:12:38.470
> 
> 标签：mysql

我想使用 mysql 获得每个帖子的评论数。

我有两张表，一张是post表，一张是comment表。Post 表有`id`,`title`和`content`字段，而评论有`id`, `post_id`,`author`和`comment`字段。

想要达到的结果就像

```
---------------------------------------------
Title               Comment Count
---------------------------------------------
My fancy post             2
--------------------------------------------- 
```

如果您对我的问题感到困惑，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T20:25:46.180

```
SELECT
    a.title,
    COUNT(b.post_id) AS 'Comment Count'
FROM
    post a
LEFT JOIN
    comment b ON a.id = b.post_id
GROUP BY
    a.id 
```

这将考虑没有任何评论的帖子。

# objective-c - 以编程方式在 iOS 中截屏视频

> ID：11334977
> 
> 赞同：8
> 
> 时间：2012-07-04T20:13:08.690
> 
> 标签：objective-c, xcode, screen-capture, avassetwriter

我正在尝试创建一个 UIView，它允许用户点击 i 中的按钮并录制屏幕（而不是从相机制作视频），然后将其保存到文档文件夹中。我在这里看到了几篇关于 AVAssetWriter 并引用此链接的 SO 文章：[http](http://codethink.no-ip.org/wordpress/archives/673) ://codethink.no-ip.org/wordpress/archives/673 ，但该链接似乎已失效。

但是没有人真正展示过解决方案或提供任何关于如何完成的示例。任何人有任何想法或可以指出我正确的方向吗？这应该比它更简单。

谢谢，道格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:11:26.137

链接没有死。

[http://codethink.no-ip.org/wordpress/archives/673](http://codethink.no-ip.org/wordpress/archives/673)

如果您查看评论，还有一些代码可以混合音频和视频并将其保存为快速电影。

如果您仍然无法访问链接，那么有一个人在 binpress 上出售相同的代码：

[http://www.binpress.com/app/ios-screen-capture-view/1038](http://www.binpress.com/app/ios-screen-capture-view/1038)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T17:08:54.807

另一个有用的项目是 RecordMyScreen，在这里可以找到： [https ://github.com/coolstar/RecordMyScreen](https://github.com/coolstar/RecordMyScreen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-10T15:18:17.377

另一种方法是使用反馈库，例如 BlitFeedback，其中包括轻松的屏幕视频捕获。

# javascript - 在 GMT 中获取当前日期 + 1

> ID：11334979
> 
> 赞同：1
> 
> 时间：2012-07-04T20:13:39.483
> 
> 标签：javascript, date, cookies

我能够获取当前日期，但我不知道如何获取当前日期 + 1 天（格林威治标准时间）

```
var now = new Date();
var newexp = (now + 3);
var show = newexp.getGMTString();

alert(show); 
```

我真正想做的是设置一个 cookie 在 1 天内过期。

```
function SetCookie(name, value, exp) {
 var now = new Date();
 var newexp = (now + exp); // exp being # of days before expiration
 document.cookie= name + "=" + value+ "; expires=" + newexp.getGMTString() + ";"
}

SetCookie('name', 'john', '3'); 
```

显然，这是行不通的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T20:16:11.500

Javascript [Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)对象让您可以非常轻松地操作它存储在其中的日期。

要获得明天的 Date 对象，您需要做的就是......

```
var date = new Date();
date.setDate(date.getDate() + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T20:18:24.443

```
function SetCookie(name, value, exp) {
var now = new Date();
now.setTime(now.getTime()+(exp*24*60*60*1000));
document.cookie= name + "=" + value+ "; expires=" + now.toGMTString() + ";"
}

SetCookie('name', 'john', '3'); 
```

编辑它以 exp 作为因素，它是否。天。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T20:18:53.737

另一种思考方式是回到基本的“自纪元以来的毫秒数”表示：

```
var date = new Date()
date.setTime(date.getTime() + 24 * 60 * 60 * 1000) 
```

或使用两个单独的变量：

```
var now = new Date()
var expiry = new Date(now.getTime() + 24 * 60 * 60 * 1000) 
```

或内联它：

```
var expiry = new Date(new Date().getTime() + 24 * 60 * 60 * 1000) 
```

请注意，这将为您提供*现在 24 小时后*的日期。这*与*“明天同一当地时间”不同，后者可能是 23 或 25 小时（如果 2011 年 12 月在萨摩亚，甚至不存在）。就个人而言，我更喜欢“固定时间长度”但 YMMV 的良好稳定方法。

显然，要使到期天数不同，只需将 24 * 60 * 60 * 1000 常数（即一天中的毫秒数）乘以您想要的天数。

# .net - WCF/MSMQ 和事务处理批处理 - 一次批量获取消息，而不是按顺序获取

> ID：11334980
> 
> 赞同：1
> 
> 时间：2012-07-04T20:13:46.790
> 
> 标签：.net, wcf, transactions, msmq, message-queue

好吧，所以我大约 90% 确定这是不可能的，但我想我还是会问。也许我错过了一些东西。

我正在尝试将[WCF over MSMQ 与事务批处理](http://msdn.microsoft.com/en-us/library/ms788973.aspx)一起使用。长话短说，我有一个队列，一次可能包含 200-300k 条消息，我需要将它们放入数据库中。它们最终会通过 Service Broker，但只有在我在 MSMQ 客户端中进行了一些预处理之后。

这个想法是一次获取尽可能多的消息（并由我的基础架构支持），对它们进行预处理，然后将它们以表变量的形式发送到 SQL Server，它们最终进入 Service Broker 队列。

通过事务处理批处理，我确实在每个事务中获得了 N（100、1000 等）消息，但它们都按顺序进入我的 WCF 客户端。所以服务操作被调用N次，每条消息调用一次。在操作返回最后一条消息后，框架将提交或回滚事务。

我的想法是，将它们全部放在一个集合中并立即开始处理整个集合并将其发送到数据库会更有效。

做某种技巧（比如将它们存储在静态的东西中，一旦我点击 N 开始处理）不是很好，我试图避免。

我没有要发布的代码，因为我还没有写。我以前做过交易批处理，我倾向于认为这是不可能的。

最终，我将把我的 WCF 客户端和[`Receive()`](http://msdn.microsoft.com/en-us/library/y918yfy2.aspx)它放在一个[`MessageQueueTransaction`](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeuetransaction.aspx). 中，当然包裹在一个分布式事务中（下到 SQL Server）。

但是，您是否知道任何支持的方式，通过这些方式我可以获得一个列表，而不是摆弄 WCF 创建的默认分布式事务，也避免在静态集合中保存任何东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:00:29.333

我也不认为这是可能的。如果您直接使用 MSMQ，您会发现只能一条一条地获取消息。

话虽如此，WCF（通过 MSMQ）和 MSMQ 之间存在显着差异。第一个是基于推的，而后者是基于拉的。如果您可以切换到直接 MSMQ，则很容易从中提取`N`消息并批量处理/保存。针对 MSMQ 进行编程比 WCF 容易得多。

# listview - 具有水平项目流的 Windows 8 ListView

> ID：11334981
> 
> 赞同：11
> 
> 时间：2012-07-04T20:13:49.323
> 
> 标签：listview, windows-runtime, winrt-xaml

如何使 Windows 8 ListView 中的 ListItems 水平流动。默认行为是垂直的，但我想以水平流显示列表，以便它可以呈现为全景图。

我尝试了支持水平布局的 GridView，但项目高度有一个限制，它不显示带有大文本的项目的完整项目内容。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-05T13:49:17.320

您可以通过这种方式使用 ListView：

```
<ListView
    Height="500"
    VerticalAlignment="Center"
    ScrollViewer.HorizontalScrollBarVisibility="Auto"
    ScrollViewer.VerticalScrollBarVisibility="Disabled"
    ScrollViewer.HorizontalScrollMode="Enabled"
    ScrollViewer.VerticalScrollMode="Disabled"
    ScrollViewer.ZoomMode="Disabled"
    SelectionMode="None">
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <ItemsStackPanel
                Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel> 
```

-- 这给了它一个水平面板和用于水平滚动的右侧 ScrollBars。

当您获得较大的项目时，ListView 和 GridView 都可能导致问题。我认为默认情况下，项目可能会根据添加的第一个项目的大小来调整大小。您可以手动设置该大小：

```
<ListView.ItemContainerStyle>
    <Style
        TargetType="ListViewItem"><!-- note - for GridView you should specify GridViewItem, for ListBox - ListBoxItem, etc. -->
        <Setter
            Property="Height"
            Value="200" /> <!-- this is where you can specify the size of your ListView items -->
        <Setter
            Property="Width"
            Value="350" />
    </Style>
</ListView.ItemContainerStyle> 
```

-- 请注意，所有项目的大小必须相同。

- 另请注意 - 我已更改此答案以将 a 替换`StackPanel`为`ItemsStackPanel`虚拟化，因此它应该为大型数据集提供更好的性能和更低的内存使用量，但**请**- 不要创建具有大型水平滚动列表的布局。在某些非常有限的情况下，它们可能是一个很好的解决方案，但在大多数情况下，它们会破坏许多良好的 UI 模式并使您的应用程序更难使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-17T13:28:42.277

您还可以使用以下样式封装 Filips 方法：

```
 <Style TargetType="ListView" x:Key="VerticalListView">
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled" />

        <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Enabled" />
        <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled" />

        <Setter Property="ScrollViewer.ZoomMode" Value="Disabled" />
        <Setter Property="SelectionMode" Value="None" />

        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <StackPanel VerticalAlignment="Top" Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>

        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="ListViewItem">
                    <Setter Property="Height" Value="400" />
                </Style>
            </Setter.Value>
        </Setter>
    </Style> 
```

根据需要将其应用于您的 ListViews：

```
<ListView Style="{StaticResource VerticalListView}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T21:05:42.337

我更喜欢样式方法，但您需要小心修改面板方向。在第一个视觉布局通过之前，不会创建项目控制面板，因此无法修改。如果初始方向与 Xaml 的一行不同，则必须找到一种策略来处理设置初始方向。也许也可以通过样式设置器分配 ItemsPanelTemplate。

# java - ImageView 坐标与 Bitmap Pixels 的对应关系 - Android

> ID：11334984
> 
> 赞同：12
> 
> 时间：2012-07-04T20:14:07.877
> 
> 标签：java, android, android-imageview, android-image

在我的应用程序中，我希望用户能够选择包含在`ImageView`.

为了选择内容，我对类进行了子`ImageView`类化，使其实现了`OnTouchListener`在其上绘制一个由用户决定边框的矩形。

这是绘图结果的示例（要了解它的工作原理，您可以将其想象为在桌面上单击鼠标并拖动鼠标时）：

![在此处输入图像描述](../Images/415922cdf82d400a5b942c68401747e6.png)

现在我需要确定图像的哪些**像素**`Bitmap`对应于所选部分。确定哪些点属于矩形很容易`ImageView`，但我不知道如何获得对应的像素，因为`ImageView`它的纵横比与原始图像不同。

我遵循了[这里特别](https://stackoverflow.com/questions/4933612/how-to-convert-coordinates-of-the-image-view-to-the-coordinates-of-the-bitmap)描述的方法，[但也](https://stackoverflow.com/questions/8002298/android-imageview-get-coordinates-of-tap-click-regardless-of-scroll-location)没有完全满意，因为在我看来，像素和点之间的对应关系是 1 对 1 的，`ImageView`并且不会将原始图像上的所有对应像素都提供给所选的区域。

在其中的点上调用`hoveredRect`矩形是：`ImageView`

```
class Point {
    float x, y;
    @Override
    public String toString() {
        return x + ", " + y;
    }
}

Vector<Point> pointsInRect = new Vector<Point>();

for( int x = hoveredRect.left; x <= hoveredRect.right; x++ ){
    for( int y = hoveredRect.top; y <= hoveredRect.bottom; y++ ){

        Point pointInRect = new Point();
        pointInRect.x = x;
        pointInRect.y = y;
        pointsInRect.add(pointInRect);
    }   
} 
```

如何获得`Vector<Pixels> pixelsInImage`包含图像对应像素的a `Bitmap`？

* * *

**附加说明**

我将更好地解释我的问题的背景：

> 我需要对所选部分进行一些图像处理，并希望确保矩形中的所有像素都得到处理。
> 
> 图像处理将在服务器上完成，但它需要确切知道要处理哪些像素。服务器处理具有真实尺寸的图像，android 应用程序只是通过传递包含像素坐标的向量来告诉服务器要处理哪些像素

以及为什么我不喜欢上面链接中提出的解决方案：

> 给出的答案以 1 对 1 的方式变换坐标。这种方法显然对我的任务无效，因为`ImageView`屏幕上某个大小的 50 个点的区域不能对应于真实图像中相同数量像素的区域，但应该考虑不同的纵横比。

例如，如果图像小于`ImageView`应用程序上显示的区域，则应选择以下区域：

![在此处输入图像描述](../Images/5c3c57bbb87b1a985d1142bbaffafd8a.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T20:23:47.067

马特奥，

似乎这更多的是一个问题，即您可以（主观地）容忍您发送到服务器的像素有多少。事实仍然是，对于任何没有得到一个很好的整数的纵横比，您必须决定“推动”选择框的哪个方向。

您链接到的解决方案是非常好的解决方案。您必须问自己：如果我处理的图像与屏幕上显示的选择框相差一个像素，用户会注意到吗？我的猜测可能不是。我无法想象用户在触摸屏上用粗大的手指选择矩形时无论如何都会有那种像素精度：D

既然是这种情况，我只会让`floor()`在转换为整数时发生的 -ing 处理您最终传递给服务器的像素。

让我们看一个例子。

让我们将 ImageView 和 Bitmap 的宽度和高度定义为：

```
ImageViewWidth = 400, ImageViewHeight = 150
BitmapWidth = 176, BitmapHeight = 65 
```

然后，您将用于在它们之间转换选择框的纵横比将是：

```
WidthRatio = BitmapWidth / ImageViewWidth = 175 / 400 = 0.44
HeightRatio = BitmapHeight / ImageViewHeight = 65 / 150 = 0.44 
```

一些漂亮丑陋的数字。我在 ImageView 中的任何像素都将对应于 Bitmap 中的像素，如下所示：

```
BitmapPixelX = ImageViewPixelX * WidthRatio
BitmapPixelY = ImageViewPixelY * HeightRatio 
```

现在，我将这个 Bitmap 放在 ImageView 的屏幕上，供用户选择一个矩形，用户在 ImageView 中选择一个具有左上角和右下角坐标的矩形，如下所示：

```
RectTopLeftX = 271, RectTopLeftY = 19
RectBottomRightX = 313, RectBottomRightY = 42 
```

如何确定这些对应于位图中的哪些像素？简单的。我们之前确定的比率。现在让我们只看左上角的坐标。

```
RectTopLeftX * WidthRatio = 271 * .44 = 119.24
RectTopLeftY * HeightRatio = 19 * .44 = 8.36 
```

对于 RectTopLeftX，我们发现自己的 BitmapPixelX 值为 119，然后进入像素的四分之一左右。好吧，如果我们把`floor()`这个值和对应的BitmapPixelY 值设为8.36，我们就会将像素发送`(119, 8)`到服务器进行处理。如果我们要`ceil()`这些值，我们将把像素 (120, 9) 发送到服务器进行处理。**这完全取决于您。**

您将（几乎）总是落在像素的某个小数部分。无论您发送您登陆的像素，还是它旁边的像素都是您的电话。我想说这将完全不会被您的用户注意到，因此重申一下，只需让`floor()`在转换为整数时发生的 -ing 处理它。

希望有帮助！

## [编辑]

在更慢地再次阅读这个问题后，我想我更好地理解你在问什么/困惑什么。我将用我上面的例子来说明。

您是说位图中有 176 个像素，而 ImageView 中有 400 个像素。因此，从一个到另一个的映射不是 1:1，这在确定要提取哪些像素进行处理时会产生问题。

但事实并非如此！当您将 ImageView 中矩形边界的坐标转换为 Bitmap 中的坐标时，您只是给出了要在 Bitmap中迭代**的像素范围*****。***它不是对 ImageView 中的每个单独像素如何映射到 Bitmap 中相应像素的描述。

我希望这能消除我对你的困惑的困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T21:07:06.183

这可以通过非常简单的数学来解决，您的矩形有 4 个点 p1、p2、p3、p4，坐标为 x、y，相对于 ImageView。

您还知道原始图像的尺寸。

现在，例如，如果 p1.x 为 50，在 200 px 宽的 ImageView 中，您将得到 50 / 200 = 0.25 的关系

如果您的原始图像是 100 像素宽，您的点 p1.x 将位于 100 * 0.25 = 25 像素

可以表示：

> 50 -> 200
> 
> ? -> 100

并计算：

> ? = 100 * 50 / 200

您对每个点、每个维度 x、y 执行此操作，然后您将获得原始图像中矩形的 4 个点。

现在，如果您使用这些计算点进行迭代，您应该得到原始图像中矩形的像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T23:00:00.740

在这里，我假设您在图像视图中放置了一些东西。在 onCreate 中执行此操作：

```
ImageView image=(ImageView) findViewById(R.id.imageView1);
TextView coordinates=(TextView) findViewById(R.id.textView1);
bitmap = ((BitmapDrawable)Map.getDrawable()).getBitmap(); 
```

这在onTouch里面：

```
coordinates.setText("Touch coordinates:"+String.valueOf(event.getX())+"x"+String.valueOf(event.getY()));
int pixel = bitmap.getPixel((int)event.getX(), (int)event.getY()); 
```

现在你有了你想要的特定像素。

# android - 启动 Android 模拟器失败

> ID：11334987
> 
> 赞同：1
> 
> 时间：2012-07-04T20:14:22.993
> 
> 标签：android, eclipse, android-emulator, eclipse-plugin

启动 android 模拟器失败并显示以下消息

```
Starting emulator for AVD 'ENSAN' 
Failed to create Context 0x3005 
emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB
could not get wglGetExtensionsStringARB 
```

可能出了什么问题？有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:11:07.240

我遇到了同样的问题并设法通过安装最新的 Windows 更新来解决它。希望这可能对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T14:55:40.740

我更喜欢使用[Genymotion](http://www.genymotion.com/)。这个虚拟设备比内置的 avd 更好

# ruby-on-rails - Rails 中的 config.action_mailer.smtp_settings 和 ActionMailer::Base.smtp_settings 有什么区别？

> ID：11334990
> 
> 赞同：8
> 
> 时间：2012-07-04T20:14:38.423
> 
> 标签：ruby-on-rails, actionmailer

我在 RoR 应用程序中设置了与 Exchange 兼容的邮件服务器。我在以下设置中使用了`development.rb`：

```
config.action_mailer.smtp_settings = {
  :address              => 'mail.server.com',
  :port                 => 5870,
  :user_name            => 'username',
  :password             => 'password',
  :authentication       => :login
} 
```

这个设置不起作用，我明白了`Net::SMTPAuthenticationError: 504 Unrecognized authentication type.`

但是，如果我在 中应用完全相同的配置`environment.rb`，它会完美运行：

```
ActionMailer::Base.smtp_settings = {
  :address              => 'mail.server.com',
  :port                 => 5870,
  :user_name            => 'username',
  :password             => 'password',
  :authentication       => :login  
} 
```

为什么是这样？不应该`config.action_mailer.smtp_settings`设置相同的设置吗？这是一个错误吗？它有原因吗？

我按照[此处](http://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration-for-gmail)所述使用 Gmail 进行了尝试，并且它**有效**，因此 smtp_settings 确实对邮件程序有影响，但在我看来，并非所有选项都计数/有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T20:54:55.730

`config.action_mailer.smtp_settings`将设置转发到`ActionMailer::Base.smtp_settings`。

但是，主要区别在于前者是特定于环境的设置，而第二个是全局设置。

换句话说，您应该确保`config.action_mailer.smtp_settings`在正确的环境文件中进行设置以应用设置。例如，如果您想在生产中使用这些设置，请在`config/environments/production.rb`文件中添加分配。同样，如果您希望将设置应用于整个项目，请将它们设置为`config/application.rb`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:41:08.170

我有类似的问题，config.action_mailer.smtp_settings 不起作用，但每个配置都是正确的。

最后我发现，Rails 扩展在初始化阶段覆盖了 ActionMailer::Base 设置......所以调查所有代码和所有第 3 方代码（！）、扩展、模块等应该有问题！

# javascript - 压缩存储在会话存储中的字符串

> ID：11334993
> 
> 赞同：0
> 
> 时间：2012-07-04T20:14:46.910
> 
> 标签：javascript, session, storage

我有一个大字符串存储在会话存储中，并在某些时候被发送到服务器。字符串有时会变得很大（超过 2mb）。我可以使用任何压缩算法来减小大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:14:41.093

我能够通过使用[https://github.com/dankogai/js-deflate](https://github.com/dankogai/js-deflate)上的 DEFLATE javascript 库来完成这项工作，并在客户端压缩字符串，然后使用相同的算法在服务器端解压缩。

这个函数在 Firefox 和 chrome 中运行良好，但在 IE 中非常慢。压缩后的字符串是原始字符串的 15%！

看看这个[http://jsfiddle.net/mwolfetech/X2NL6](http://jsfiddle.net/mwolfetech/X2NL6)的例子

# javascript - HTML5/CSS3 - 内部带有谷歌地图的自定义形状 Div

> ID：11334995
> 
> 赞同：16
> 
> 时间：2012-07-04T20:14:53.473
> 
> 标签：javascript, jquery, html, css

我需要制作一个包含“谷歌地图”地图的自定义形状 div。自定义边框很好，我可以使用 png 来处理它，但形状本身，我只有一些关于如何做到这一点的理论，但实际上没有。但我认为有一种方法可以使用 html5 画布在 div 上制作自定义形状并在 css 中使用 overflow:hidden 来隐藏 div 中的内容。

现在我有以下结构：

```
<html>
  <body>
    <div class="Orange_Background"></div>
    <div class="FX_Lines_over_background"></div>
    <div class="GoogleMaps_Container"></div>
  </body>
</html> 
```

所以你可以看到我不能使用背景作为 png 来只显示地图，因为我需要地图是可点击的。

这是我所说的图像。

![图像](../Images/ad76e427680a5e89a72d2d8bafc1aa04.png)

如果有人可以帮助我，我将不胜感激！！

谢谢你们。

PS：也可以用jquery！（如果有人知道这样做的插件。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T21:09:08.023

您需要创建一个具有 4 个不同图层（上/右/左/下）的框架，并使用比地图本身更高的透明 PNG 图像应用 z-index、背景图像。位置需要在这些层上是绝对的或固定的。

正如您在下面看到的，这 4 个图像是黑色突出显示的区域，它们需要单独切片，然后您可以将它们放置在地图图层上。这使中间区域保持开放，没有任何重叠层，因此地图仍然可以使用：

您可以将整个橙色背景保留在地图图层后面，这无关紧要，因为您将首先将其与地图重叠，然后再与 4 帧图层重叠，如果正确切片和定位，它们只会与背景图像重叠。整个背景图像显然是完整的图像，上面没有任何地图，但都是橙色的，带有条纹和渐变。如果您问我，这是一项相当艰巨的任务，费时，但有可能。

![在此处输入图像描述](../Images/7b086d9d939cdbfb608ee844ffcc5d36.png)

注意：透明区域只是您在黑色高光中看到的空白区域，其余部分显然是您的图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T21:33:32.167

RE：*Zee Tee 的*回答：如果你确实走这条路，你可以为包含图像的 div 设置 pointer-events: none （在你的 css 中）。这会将所有鼠标事件发送到它下面的图层。抱歉，我还没有权限评论答案：D

如果您不关心 IE(6-8) 支持，那么您可以使用 CSS 3D 变换直接在地图图层上执行此操作。但是地图看起来会倾斜，如果这是您想要的效果，如果不是以前的答案仍然是最好的方法

另一种解决方案是使用掩码图像。抱歉，浏览器支持很糟糕，但如果你有一个很好的后备，直到他们赶上，你应该没问题

[https://developer.mozilla.org/en/CSS/-webkit-mask-image](https://developer.mozilla.org/en/CSS/-webkit-mask-image)