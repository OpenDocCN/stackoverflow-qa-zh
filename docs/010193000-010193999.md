# StackOverflow 问答 10193000-10193999

# image-processing - tesseract 的最佳图像输入类型是什么？

> ID：10193001
> 
> 赞同：16
> 
> 时间：2012-04-17T14:17:24.140
> 
> 标签：image-processing, ocr, tesseract

我在一个项目中使用 tesseract 并想知道 tesseract 的最佳图像输入类型以提供最佳输出。Binary&TIFF 是最好的输入还是其他？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T17:13:21.670

我过去使用 TIFF 完成类似任务时取得了出色的成绩。当时我使用 OpenCV 进行了一些[预处理](https://stackoverflow.com/a/10233208/176769)并将结果导出到 TIFF 文件，该文件后来被发送到 tesseract。这是相当不错的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-24T09:57:24.863

我发现 TIFF 比 jpg 提供了更好的结果，并且是对所有其他类型最好的。

最初的 Tesseract 程序只能处理 TIFF 文件，这让我相信它是最合适的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-13T16:21:23.093

使用 .tif 的优点是 (1) scantailor 输出 .tif 文件和 (2) 可以使用 tiffcp 将单个 .tif 合并为一个可以馈送到 tesseract 的多页文件。困难在于，如果您让 tesseract 输出 .pdf，那么您无法控制所创建的 .pdf 类型。使用`pdfimages -list`，我发现它以与输入相同的 dpi 输出 .ccitt 和 .jpeg 的组合。然后，尝试使用 imagemagic 将其转换为较低的 dpi 或其他压缩会产生较差的结果。

我发现的替代方法是首先使用 imagemagic 将所有 .tif 转换为 .png。然后将 .png 逐个提供给 tesseract，为每个 .png 生成一个 .pdf。在这种情况下，.pdf 现在包含光栅图像。然后可以将它们与 imagemagic 组合并重新编码。

我可以在这里看到的唯一缺点是，*如果*tesseract 正在学习 OCR 的文档（我不知道它是，但它可能是），那么我们希望一次给它整个文档而不是一页一次。

# javascript - 仅溢出 DIV 中的一个元素

> ID：10193007
> 
> 赞同：11
> 
> 时间：2012-04-17T14:17:47.980
> 
> 标签：javascript, jquery, css, overflow

有没有办法，CSS 或 JavaScript 允许 DIV 中的一个元素溢出，即使它的父元素溢出是隐藏的。

我编写了一个 jQuery 滑块，它使用`overflow: hidden`.

```
<div class="container">
   <img src="image.jpg" />
   <div class="text">
      THIS TEXT IS HIDDEN WHEN POSITIONED OUTSIDE OF .container
   </div>
</div> 
```

CSS：

```
.container{
    overflow:hidden;
    position: relative;
    width: 500px; height: 250px;
} 
```

我需要图像自然溢出。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T14:20:28.243

你应该删除`position: relative;`. 如果将它放在与 相同的元素上`overflow: hidden;`，它将隐藏该元素。`.container`如果您确实需要它，请尝试将其放在（在树中高于具有 的元素）的父级上`overflow: hidden`。

[jsFiddle Demo](http://jsfiddle.net/bazmegakapa/VtSHR/)
[说明文章](http://front-back.com/how-to-make-absolute-positioned-elements-overlap-their-overflow-hidden-parent)

```
#wrap { position: relative; }

.container{
    overflow:hidden;
    width: 300px; height: 200px;
    padding: 10px;
    background-color: cyan;
}

.text {
    position: absolute;
    top: 280px; left: 0;
    border: 1px solid red;
}
```

```
<div id="wrap">
  <div class="container">
    Container
    <div class="text">Not hidden anymore when positioned outside of .container</div>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:06:33.827

通过在 css 中声明 z-index，您可以使用绝对位置来执行此操作。

```
.container{
   z-index:900;
   overflow:hidden;
   width: 500px; 
   height: 250px;
 }

 .container img{
   z-index:920;
   position:absolute;
 } 
```

如果位置不正确，您可以为图像设置边距；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:22:56.750

jQuery 示例

```
$('.text').each(function(){
   var t = $(this);                   // text div
   var c = t.closest('.container');   // container parent 
   var i = c.children('img:first');   // container image
   t.width(c.width());                // set text width = to container width
   c.width(i.width());                // set container width = to text width
}); 
```

*笔记：*

1.  *这不会影响填充/边距/边框，而是您可以使用的基本逻辑。*
2.  *将文本宽度设置为等于容器宽度只会使它看起来应用了溢出（您也可以将 text-div 的宽度设置为 500px）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-04T11:37:18.157

你不能用`position: static`

```
.container{
   z-index:900;
   overflow:hidden;
   width: 500px; 
   height: 250px;
 }

 .container img{
   z-index:920;
   position:static;
 } 
```

# php - 自定义 php 从搜索字符串添加到购物车

> ID：10193010
> 
> 赞同：0
> 
> 时间：2012-04-17T14:18:00.753
> 
> 标签：php, mysql

希望有人可以帮助解决这个问题。

我目前在我的网站上的各个产品页面中有一个“添加到购物车”选项，它将“pid”作为变量发送到购物车页面并且运行良好。我的购物车页面上使用 pid 的代码如下：

```
if (isset($_POST['pid'])) {
$pid = $_POST['pid']; 
```

但是，在不想重新编写新代码时，我只想更改 $pid 的获取方式，因为我知道它在其余代码中都有效，我认为这就是答案：

```
if (isset($_POST['product_code'])) {
$prodAdd = $_POST['product_code'];
$pid = mysql_query("SELECT id FROM products WHERE product_name='$prodAdd' LIMIT 1'"); 
```

任何人都可以看到任何明显的东西吗？如果我强制将 $pid 指定为产品名称，它可以正常工作，并且我可以回显 $prodAdd 所以我只能假设这是我的查询有问题，我终其一生都无法弄清楚我尝试更改的内容几乎所有我能想到的！

哦，如果有人可以提供帮助，我实际上更喜欢 LIKE 而不是 =，但任何工作代码都足够了。

非常感谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:21:14.700

好吧，我假设您`product_code`的未存储在`product_name`列中：

```
$pid = mysql_query("SELECT id FROM products WHERE product_code='$prodAdd' LIMIT 1'"); 
```

我们假设您随后正确地获取了行。（`$pid`只是一个结果资源......）

请保护您的数据库免受 SQL 注入！您的代码在当前形式下极易受到攻击：

```
if (isset($_POST['product_code'])) {
  // At a minimum, escape $prodAdd with mysql_real_escape_string()
  // This is NOT OPTIONAL! YOU MUST DO THIS!
  $prodAdd = mysql_real_escape_string($_POST['product_code']);
  $pid = mysql_query("SELECT id FROM products WHERE product_code='$prodAdd' LIMIT 1'");

  if (!$pid) {
    // query error
    echo mysql_error();
  }
  else {
    // All results into $products (though you limited it to 1)
    $products = array();
    while ($row = mysql_fetch_assoc($pid)) {
      $products[] = $row;
    }

    // If you expect exactly one result, no need for a loop
    // $product = mysql_fetch_assoc($pid);

    // Get the value you need:
    var_dump($products);
  }
} 
```

如果你想把它作为一个`LIKE`，只需连接`%`：

```
$pid = mysql_query("SELECT id FROM products WHERE product_name LIKE '%$prodAdd%' LIMIT 1'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:25:57.747

mysql_query 返回一个结果资源以供以后处理购买其他 mysql 函数，如`mysql_num_rows, mysql_fetch_array`等。尝试将这些行添加到您的代码中：

```
$pid = mysql_fetch_assoc($pid);
$pid = $pid[0]['id']; 
```

如果你的 mysql_query 在语法上是正确的，你应该得到你的 pid。如果它仍然不起作用，请尝试`echo mysql_error();`查看到底出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:27:28.283

除了**sql 注入问题**之外，您遇到的问题是查询不返回 id 而是成功时返回资源。

您可能希望将其更改为类似（并添加错误处理...）：

```
$result = mysql_query("SELECT id FROM products WHERE product_name='$prodAdd' LIMIT 1'");
if ($row = mysql_fetch_assoc($result)) {
    $pid =  $row['id'];
} 
```

# java - Android EditText 值在按钮单击时没有改变

> ID：10193011
> 
> 赞同：0
> 
> 时间：2012-04-17T14:18:08.843
> 
> 标签：java, android

我有以下代码，它应该在`EditText`单击按钮时更改字段的值...

```
public class ConvertActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final Button b1 = (Button) findViewById(R.id.b1);
        b1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                b1.setEnabled(true);

                EditText editText2 = (EditText)findViewById(R.id.editText2);
                String editTextStr2 = editText2.getText().toString();

                editText2.setText("empty");
    }
        });
    }
} 
```

但是，当我单击按钮时，文本不会改变。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:31:13.510

注释掉该行

```
editText2.setText(m.getND()); 
```

并查看它是否将 editText2 设置为“空”-我的猜测是 m.getND() 返回 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:24:11.180

您正在**启用该按钮的 onClick 中的按钮**...这意味着我认为它不起作用..因为之前它没有启用..put

```
b1.setEnabled(true); 
```

在 onCreate 部分.. 不在 onClick..

# c++ - 将二进制文件内容保存在字符串中，以便能够对其进行 md5 处理并稍后与其他文件进行比较

> ID：10193015
> 
> 赞同：0
> 
> 时间：2012-04-17T14:18:25.427
> 
> 标签：c++

我想将图像文件的 md5 保存在数据库中，因此当用户发送另一张图像时，我希望能够比较该图像是否已存在于数据库中，我必须知道其中是否已经存在数据库，我认为最简单的方法是 md5 文件的内容，然后与 md5 输出进行比较，看看它们是否相等。

我怎么能那样做？如果您认为这不是很好，您可以建议在没有原始文件的情况下比较图像的其他方法，这就是我将 md5 保存在数据库中的原因。

我有 md5 函数，但我不知道 md5 是什么，我的 md5 函数接受 std::string 参数并将结果作为 std::string 返回。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:50:57.220

我认为MD5是要走的路。任何用于比较图像的图像处理操作都可能需要比 MD5 计算更长的时间。

现在，您需要**将此操作分解为更小的步骤**：

**1 -**以二进制模式将文件读入`std::string`：

```
string data;
string filename("file.bin");
ifstream input_file( filename.c_str(), ios::binary | ios::in );
if( !input_file)
{
    cout << "!!! Failed to open file";
    // exit/return
}

std::ostringstream ss;
ss << input_file.rdbuf();
data = ss.str();

input_file .close(); 
```

**2 -**检索文件的 MD5：

```
std::string md5_hash = compute_md5(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:26:00.327

如果您需要数据库是持久的，只需使用像 sqlite 这样的数据库 API，并将图像（作为 blob）保存在数据库中，哈希具有它的主键。如果没有，那么只需将哈希存储在 a`std::map`或 a`std::unordered_map`中，这样您就可以使用哈希索引图像。

```
 std::string image=load_image("my_image.jpg");
 std::string db=make_hash(image);
 std::map<std::string, std::string> db;
 db[hash]=image; 
```

或类似的东西，我个人不会存储图像，因为`std::string`它取决于您正在使用的图像类型。但这是我认为的另一个问题。

[http://en.cppreference.com/w/cpp/container/map](http://en.cppreference.com/w/cpp/container/map)

[http://en.cppreference.com/w/cpp/container/unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)

[http://www.sqlite.org/capi3ref.html](http://www.sqlite.org/capi3ref.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:37:58.617

如果您可以/想要使用 Qt/C++，这很容易做到。你甚至可以设计一个简单的 UI 来

*   打开文件对话框以选择图像文件 - 请参阅[QFileDialog](http://qt-project.org/doc/qt-4.8/qfiledialog.html)
*   显示图像 - 见[QLabel](http://qt-project.org/doc/qt-4.8/qlabel.html) , [QPixmap](http://qt-project.org/doc/qt-4.8/qpixmap.html)
*   计算 SHA1 哈希 - 请参阅[QCryptographicHash](http://qt-project.org/doc/qt-4.8/QCryptographicHash.html)

    ```
    QString sha1Hash = QCryptographicHash::hash(bytes, QCryptographicHash::Sha1).toHex(); 
    ```

*   查询数据库*这个哈希是否已经存在？*- 参见：[Qt SQL 模块](http://qt-project.org/doc/qt-4.8/qtsql.html)

    ```
    bool isRegistered(const QString hash){

       QSqlQuery query(QSqlDatabase::database("default"));

       query.prepare("SELECT COUNT(1) FROM pixmap WHERE hash=?");
       query.bindValue(0, sha1Hash);
       query.exec();

       if(query.first()){
           return query.value(0).toInt() > 0;
       }

       return false; // It isn't
    } 
    ```

（我没有尝试过这段代码，它只是一个原始草图）

*   如果图像不存在，则在数据库中注册当前时间戳（？）、哈希、路径和文件名，然后将图像复制到预设目录。

# ios - 如何创建一个包含许多 NSMutableArrays 的 NSMutableDictionary

> ID：10193018
> 
> 赞同：0
> 
> 时间：2012-04-17T14:18:33.833
> 
> 标签：ios, nsmutablearray, nsmutabledictionary

我需要在运行时动态地使用 NSMutableDictionary ...

*   创建（可能数千个）添加到字典中的数组。这将在一个循环内完成，所需的数组数量将是未知的，因为它们是从单词列表中驱动的。*   为每个数组创建（数千个）字符串。同样，数据驱动，字符串的数量只有在运行时才知道。*   使用**键**来表示特定数组的某些字符模式（例如：'mm-' 表示数组包含在第 2 和第 4 位置带有两个 m 的字符串。）*   使用该**值**来表示与模式匹配的字符串的计数（例如：200 个字符串属于 '-mm' 模式），并使用数组来拥有实际的 200 个字符串。

    因此，一旦实现，字典将包含每个模式/**键的计数/****值**以及与该模式匹配的实际字符串。

     **我需要有关创建字典和**动态添加数组**以及**递增计数/值**的正确语法的帮助，并且我想**附加/插入**字符串，但我认为我擅长的那部分。

    相关帖子：[NSMutableArray 或 NSMutableDictionary ：哪种情况最适合这种情况？](https://stackoverflow.com/questions/10182056/nsmutablearray-or-nsmutabledictionary-which-is-best-for-this-scenario)**  *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:55:30.560

> 我需要有关创建字典和动态添加数组以及递增计数/值的正确语法的帮助，

数组是对象，将它们添加到字典中的方式与将任何其他对象添加到字典中的方式相同：

```
[someDictionary setObject:theArray forKey:theKey]; 
```

我不清楚您所说的“增加计数/值”是什么意思。字典知道它包含多少键/值对——不需要增加任何东西。数组也是如此。

所以听起来你的代码会变成这样：

```
NSMutableDictionary *dict;
for (NSString *word in wordlist) {
    @autorelease {
        NSMutableArray *wordStrings = [NSMutableArray array];
        while (/*some condition based on word*/) {
            NSString *newString = [NSString stringWithFormat:...];
            [wordStrings addObject:newString];
        }
        [dict setObject:wordStrings forKey:word];
    }
} 
```

我确定这不太正确——我不知道你真正想要做什么，但上面的代码显示了你如何生成一些数组并将它们添加到字典中。剩下的就看你了。

查看您的编辑，我认为您可能对字典中存储的内容有些困惑。字典*只是*一组键/值对。在这种情况下，值是您添加的数组，键是模式字符串。每个存储计数的键都没有额外的“值”空间。您可以为每个模式使用一些约定，例如*模式*和*pattern_count*，为每个模式创建*两个条目。*不过，没有必要这样做……为每个模式存储的数组可以很容易地告诉你它包含多少个对象：

 *```
NSArray *wordList = [dictionary objectForKey:pattern];
int count = [wordlist count]; 
```***

# xml - XML IDREF 另一个 XML 文档？

> ID：10193019
> 
> 赞同：6
> 
> 时间：2012-04-17T14:18:40.403
> 
> 标签：xml, idref

有没有一种简单的方法可以使用 IDREF 属性来引用不同 XML 文档中的元素？如果没有，关于如何以不同的方式做的任何建议？我要做的是为桌面 RPG 制作数字字符表，并且我希望包含所有字符特定信息的 XML 文档能够引用所有优点的主列表。抱歉，如果这是一个愚蠢的问题，我对使用 XML 甚至任何编程语言都很陌生，并且刚刚发现 XML 可以使事情变得更容易。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T14:45:23.900

IDREF 是一种定义为引用同一文档中的其他元素 ID 的类型。因此，您首先需要使用“XInclude”来引用您的外部文件，然后使用 IDREF，因为这是一个单独的文件。[此处提供了](https://stackoverflow.com/questions/1065026/xml-referencing-other-xml-files)您可能会发现有用的类似问题

# android - 在应用程序产品链接未显示在 android 的 android 开发者页面中？

> ID：10193022
> 
> 赞同：0
> 
> 时间：2012-04-17T14:18:45.277
> 
> 标签：android, in-app-purchase, in-app-billing

我在我的开发者页面下面的应用程序内计费中遇到问题应用程序名称应用程序内产品链接未显示，我怎么能得到它请任何人解决我的问题....

![在此处输入图像描述](../Images/f561722f79b00407bd7dc43ce4e8183a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:56:42.987

我有同样的问题。但现在我的商家帐户和游戏帐户已关联，我可以看到应用内购买产品链接。

猜猜这是谷歌播放的一个错误，他们纠正了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:36:33.897

参考说（[这里](http://developer.android.com/guide/market/billing/billing_admin.html)）：

> 仅当您拥有 Google Checkout 商家帐户且应用程序清单包含 **com.android.vending.BILLING**权限时，才会显示应用内产品链接。

# javascript - Masonry JS 插件 - Chrome / Firefox 问题

> ID：10193023
> 
> 赞同：0
> 
> 时间：2012-04-17T14:18:52.570
> 
> 标签：javascript, jquery, google-chrome, cross-browser, jquery-masonry

我正在尝试使用 Masonry 插件来复制“Pinterst”显示。在 Safari 中一切都显示得很好，但在 Chrome 和 Firefox 中却常常显得一团糟。我不确定如何解决这个问题。下面是用于调用 jQuery Masonry 插件的 JavaScript 代码。

谢谢您的帮助！

```
<script>
  $("#container").imagesLoaded(function(){
    $('#container').masonry({
        itemSelector: '.item',
        columnWidth: 240,
        isFitWidth: true
    });
    $("#container").infinitescroll({
        navSelector: "span.page a",            
        nextSelector: "span.next a",    
        itemSelector: '.item'          
      },
      // trigger Masonry as a callback
      function( newElements ) {
        var $newElems = $( newElements );       
        $("#container").imagesLoaded(function(){
          $("#container").masonry( 'appended', $newElems )
        });
      });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:30:17.200

您正在以嵌套方式绑定 imagesLoaded。这意味着在事件已经触发之前，您不会绑定第二个函数。

# c# - 在 c# 中使用 JavascriptConverter 嵌套 json 自定义转换器

> ID：10193024
> 
> 赞同：1
> 
> 时间：2012-04-17T14:18:59.113
> 
> 标签：c#, json

我有一个使用标准 asp.net 库的 json 自定义转换器。我的转换器如下所示：

```
public class MyObjectToJson : JavaScriptConverter

  public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
  {
     MyObject TheObject = obj as MyObject;
     Dictionary<string, object> OutputJson = new Dictionary<string, object>();

     OutputJson.Add("SomeProperty", TheObject.Property1);

     //line that I'm not figuring out
     //I have a type MyNestedObject nested in the object model of MyObject
     //I added that nested converter in the SupportedTypes method    

     OutputJson.Add("TheNestedObject",....?);

     return OutputJson;
   }

   public override IEnumerable<Type> SupportedTypes
   {
      get { return new Type[] { typeof(MyObject), typeof(MyNestedObject) }; }
   } 
```

基本上，我有另一个名为 MyNestedObjectJson 的 json 自定义转换器，但我想知道在哪里插入它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:43:00.337

好的，我想通了。我正在为那些通过谷歌登陆这个页面的人添加这个答案。真的超级简单：

在调用代码中，您像这样注册嵌套对象的转换器：

```
JavaScriptSerializer TheSerializer = new JavaScriptSerializer();

TheSerializer.RegisterConverters(new JavaScriptConverter[] { 
  new MyObjectToJson(), new MyNestedObjectToJson() 
}); 
```

然后，在父对象的 json 转换器中，您只需编写我遇到问题的行，如下所示：

```
OutputJson.Add("TheNestedObject", TheObject.TheNestedObject); 
```

由于序列化程序已注册两个转换器，因此嵌套对象的转换器将启动。

希望这会有所帮助。

# web-applications - 此应用程序的可靠语言/框架

> ID：10193025
> 
> 赞同：1
> 
> 时间：2012-04-17T14:19:03.257
> 
> 标签：web-applications, database-connection, application-design

我想构建一个基于 Web 的文件归档跟踪应用程序，并希望得到一些关于如何构建它的最佳方式的反馈。

我正在尝试构建基于 Web 的文件归档应用程序（如 Apple Time Machine），它可以监视外部硬盘驱动器，并且在添加文件/文件夹时，它会将文件路径写入数据库，以便以后搜索。因此，如果用户在此日期“04/16/12”将此文件夹“我的文件夹”添加到外部高清“驱动器 1”，并且需要在以后找到该文件夹​​或其内容，他们可以搜索名称、日期或驱动器名称并返回相应的结果。

用户必须选择需要观看的硬盘驱动器，然后应用程序将从那里接管。

• 我可以通过严格的网络应用程序执行此操作，还是需要可以与我的网络应用程序通信的本地应用程序/插件？

我只是在寻找从哪里开始的方向，我的背景几乎是 HTML、CSS、PHP，但我并不反对学习新东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:35:28.480

假设我在阅读您的问题后所想的就是您的意思：

- 每次登录时，您都需要识别用户的存储设备。 - 如果您想持续监控正在添加或删除的内容，您需要获得用户的访问权限。但是，您还需要考虑如果用户离线怎么办？当他离线时，您将如何跟踪变化。

我不认为你可以严格地从网络应用程序中做到这一点，除非你假设用户一直连接到互联网。您需要某种本地应用程序来在他们离线时监控他们的存储设备，并在他们在线时自动更新您的数据库。

对于你必须做的：当用户在线时，PHP 可以很好地实现你所需要的。对于用户机器中的本地应用程序，您可以编写文件跟踪器（当他们离线时）并在他们在线连接后通过 JSON 或其他方式将其发送到服务器。对于创建本地程序，我建议您看一下 python，因为它非常清晰易学。

希望这可以帮助。

# java - jquery .fadeIn .delay .fadeOut - 不淡出

> ID：10193028
> 
> 赞同：0
> 
> 时间：2012-04-17T14:19:15.747
> 
> 标签：java, jquery, delay, fadein, fadeout

不知道我做错了什么，但这些 div 正确淡入但不淡出！

它们旨在与 mp3 及时在结构化时间线上，因此延迟时间很长！

```
<!DOCTYPE html>
<html>
<head>
  <style>
div { position: absolute; width: 60px; height: 60px; float: left; display:none; }
.first { background-color: #3f3; left: 0;}
.second { background-color: #33f; left: 80px;}
.third { background-color: #3f3; left: 120px;}
.fourth { background-color: #33f; left: 300px;}
.fifth { background-color: #3f3; left: 400;}
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script src="http://ui.jquery.com/latest/ui/effects.core.js"></script>
<script src="http://ui.jquery.com/latest/ui/effects.slide.js"></script>
</head>
<body>

<p><button>Run</button></p>
<div class="first"></div>
<div class="second"></div>
<div class="third"></div>
<div class="fourth"></div>
<div class="fifth"></div>

<script>
    $("button").click(function() {
      $("div.first").delay(15060).show("puff", {}, 300).delay(116010).fadeOut(300);
      $("div.second").delay(40230).show("puff", {},300).delay(28990).fadeOut(300);
      $("div.third").delay(46180).show("puff", {},300).delay(27880).fadeOut(300);
      $("div.fourth").delay(71070).show("puff", {},300).delay(42050).fadeOut(300);
      $("div.fifth").delay(110080).show("puff", {},300).delay(17050).fadeOut(300);
    });
</script>

</body>
</html> 
```

数学我尝试了你的建议，但它完全打破了它，有什么想法我可能做错了吗？抱歉，由于我对 Jquery 的了解有限而蒙混过关

脚本已更改但仍无法正常工作？

```
<script>
$("button").click(function() {
  $("div.first").delay(200).show(300, "puff", function() {
 $(this).delay(116010).fadeOut(300);  });
   $("div.first").delay(40230).show(300, "puff", function() {
 $(this).delay(28990).fadeOut(300);  });
   $("div.first").delay(46180).show(300, "puff", function() {
 $(this).delay(27880).fadeOut(300);  });
   $("div.first").delay(71070).show(300, "puff", function() {
 $(this).delay(42050).fadeOut(300);  });
   $("div.first").delay(110080).show(300, "puff", function() {
 $(this).delay(17050).fadeOut(300);  });
});
</script> 
```

感谢 veeTrain，它几乎可以工作，除了我需要他们在特定时间进来以及在特定时间离开，这就是我如何更改代码来尝试做到这一点！在此先感谢，非常感谢！

```
<!DOCTYPE html>
<html>
<head>
  <style>
div { position: absolute; width: 60px; height: 60px; float: left; display:none; }
.first { background-color: #3f3; left: 0;}
.second { background-color: #33f; left: 80px;}
.third { background-color: #3f3; left: 120px;}
.fourth { background-color: #33f; left: 300px;}
.fifth { background-color: #3f3; left: 400;}
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <script src="http://ui.jquery.com/latest/ui/effects.core.js"></script>
<script src="http://ui.jquery.com/latest/ui/effects.slide.js"></script>
</head>
<body>

<p><button>Run</button></p>
<div class="first"></div>
<div class="second"></div>
<div class="third"></div>
<div class="fourth"></div>
<div class="fifth"></div>

<script>
    $("button").click(function() {
        console.log("hi");
      $("div.first").delay(15060).show(300);
      $("div.second").delay(40230).show(300);
      $("div.third").delay(46180).show(300);
      $("div.fourth").delay(71070).show(300);
      $("div.fifth").delay(110080).show(300);
        setTimeout(function() {
            $("div.first").fadeOut(300);
        }, 116010);
        setTimeout(function() {
            $("div.second").fadeOut(300);
        }, 28990);
        setTimeout(function() {
            $("div.third").fadeOut(300);
        }, 27880);
        setTimeout(function() {
            $("div.fourth").fadeOut(300);
        }, 42050);
        setTimeout(function() {
            $("div.fifth").fadeOut(300);
        }, 17050);
    });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:23:00.383

您应该触发`fadeout`作为回调，如下所示：

```
 $("div.first").delay(15060).show(300, "puff", function() {
     $(this).delay(116010).fadeOut(300);
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:37:28.757

您还可以像这样执行 setTimeout 操作：

```
$("div.first").delay(15060).show(300, "puff");
setTimeout(function() {
    $("div.first").fadeOut(300);
}, 116010); 
```

这是一个显示示例的[jsfiddle 。](http://jsfiddle.net/BfHr8/)（注意，不包括您的“粉扑”操作）

这个[jsfiddle](http://jsfiddle.net/BfHr8/1/)显示了你的时间可能是什么。

如果我理解您的意图，您会希望元素在首次显示后排队隐藏 x 秒。这些示例不会执行此操作，但您应该能够自己进行计算，并通过添加初始延迟时间来准确隐藏元素。

例如：`fade in after 5 seconds; fade out after 5 seconds`

可能成为`fade in after 5 seconds and fade out after *10* seconds`

# jquery - jQuery 表单验证，表单输入名称如下 []

> ID：10193030
> 
> 赞同：0
> 
> 时间：2012-04-17T14:19:22.297
> 
> 标签：jquery, html, validation

可以使用 jQuery 来验证这样的表单输入吗？

```
<input type='text' name='amount[]' size='1' />
<input type='text' name='amount[]' size='1' />
<input type='text' name='amount[]' size='1' /> 
```

或者也许有其他选择？

找到了解决方案 - [http://www.codeboss.in/web-funda/2009/05/27/jquery-validation-for-array-of-input-elements/](http://www.codeboss.in/web-funda/2009/05/27/jquery-validation-for-array-of-input-elements/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:23:39.413

尝试这个

```
 <input type='text' name='amount[]' size='1' id="id1" />
    <input type='text' name='amount[]' size='1' id="id2"/>
    <input type='text' name='amount[]' size='1' id="id3"/> 
```

并使用 id 进行验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:32:50.243

尝试：

```
​$("input[name='amount[]']").each(function(i, item){
    // Do your validation here..
    // You can use $(this) to refer to the element
});​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:52:43.803

像这样在 jquery 中使用索引：

```
 $('input').eq(0).bind('change keyup',function(){ ... }); 
```

或对第二个输入框使用以下代码：

```
 $('input').eq(1).bind('change keyup',function(){ ... }); 
```

或者这个用于第三个输入框：

```
 $('input').eq(2).bind('change keyup',function(){ ... }); 
```

# android-widget - Widget XML Android - 在 appwidgetprovider 中需要不同的尺寸

> ID：10193034
> 
> 赞同：0
> 
> 时间：2012-04-17T14:19:36.703
> 
> 标签：android-widget

我有一个设备无法正确显示我的小部件...它将 xml 中的 minWidth 和 minHeight 渲染为 3x2，我需要它为 4x2。如果设备满足特定尺寸，有没有办法以编程方式设置这些尺寸？它是一款分辨率为 1024 x 720、160 DPI 的 MDPI 平板电脑。

这适用于我的 xml 中的所有其他设备（呈现为 4x2）：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="294dp"
    android:minHeight="146dp"
    android:initialLayout="@layout/widget_loading_layout"
    android:previewImage="@drawable/widget_preview"
    android:updatePeriodMillis="1800000"
    android:resizeMode="horizontal|vertical"
    android:configure="com.accuweather.android.tablet.widget.WidgetConfigurationActivity"
    /> 
```

这适用于异常设备（呈现为 4x2）：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="368dp"
    android:minHeight="146dp"
    android:initialLayout="@layout/widget_loading_layout"
    android:previewImage="@drawable/widget_preview"
    android:updatePeriodMillis="1800000"
    android:resizeMode="horizontal|vertical"
    android:configure="com.accuweather.android.tablet.widget.WidgetConfigurationActivity"
    /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:28:32.617

一种解决方案是创建另一个名为“xml-w1280dp”的 xml 文件夹，在其中我有我的“正常”渲染代码 minWidth=294。这是一场噩梦，因为这似乎是特定于设备的问题……设备应该看到我的 xml 并知道它是 4x2 小部件，而不是将其更改为 3x2。OEM需要加入！

# c# - 有人可以向我解释这个简单的代码吗？

> ID：10193039
> 
> 赞同：0
> 
> 时间：2012-04-17T14:19:46.493
> 
> 标签：c#, binary

我只是想理解这段代码。

```
static int convert2binary(int Decimal)
{
    int remainder, final = 0;
    string result = "";
    bool NaN;

    while (Decimal > 0)
    {
        remainder = Decimal % 2;
        Decimal /= 2;
        result = remainder + result;
        NaN = int.TryParse(result, out final);
    }
    return final;
} 
```

它是一个二进制转换器，它是如何工作的？我只是没有得到模数，十进制/ = 2，然后将它们加在一起，那如何给出二进制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:26:51.620

让我们输入一些数据，好吗？

```
convert2binary(10)
-> remainder, final = 0
-> result = ""
-> NaN (= false)

loop:
Decimal > 0, so: remainder = Decimal % 2 (= 0) and Decimal /= 2 ( = 5)
result = remainder + result = 0 + ""
NaN = false
repeat:
Decimal > 0, so: remainder = Decimal % 2 (= 1) and Decimal /= 2 ( = 2)
result = remainder + result = "10"
NaN = false
repeat:
Decimal > 0, so: remainder = Decimal % 2 (= 0) and Decimal /= 2 ( = 1)
result = remainder + result = "010"
NaN = false
repeat:
Decimal > 0, so: remainder = Decimal % 2 (= 1) and Decimal /= 2 ( = 0)
result = remainder + result = "1010"
NaN = false
repeat: WHOOPS: Decimal == 0, so we return the final (int representation) of result. 
```

现在，为什么这行得通？

基本上，在每次迭代中，您从数字右侧拆分出最后一个二进制数字（这是`%2`位）。由于您随后将其余部分除以 2（`/=2`位），因此您可以在循环中执行此操作。

每次迭代都会在数字多项式中为您提供一个连续的位置：

```
decimal(10) == 1 * 2^3 + 0 * 2^2 + 1 * 2^1 + 0 * 2^0 = binary(1010) 
```

您也可以朝另一个方向发展：如果您想编写一个打印数字的十进制变体的方法，您可以用（将数字除以十的余数）`int.ToString()`拆分最后一位数字，这是最正确的 -`% 10`要打印的大多数数字。将其余部分除以 10，以便您可以重复十位、数百位等...

让我们试试这个！

```
int number = 123;
// this is equivalent to: (1 * 10^2) + (2 * 10^1) + (3 * 10^0)
int remainder = number % 10; // remainder = 3
number /= 10 // number = 12 (integer division!!)
result = remainder + ""; // result = "3"
// number is now: (1 * 10^1) + (2 * 10^0), because we divided by 10!
remainder = number % 10; // remainder = 2
number /= 10 // number = 1
result = remainder + result; // result = "23"
// number is now: (1 * 10^0)
remainder = number % 10; // remainder = 1
number /= 10 // number = 0 - we're going to STOP now!
result = remainder + result; // result = "123"
// yay! hurray!! 
```

所以，你看，你的数字系统（无论是二进制、八进制、十进制、十六进制或其他）只是写下你的基数的多项式的简写。最右边的数字总是以 ^ 0 为底，每向左移动一个数字，指数就会增加 1。

如果您弄清楚小数点的作用，则可以加分；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:25:00.703

请参阅此页面上的第二种方法：http: [//www.wikihow.com/Convert-from-Decimal-to-Binary](http://www.wikihow.com/Convert-from-Decimal-to-Binary)

这就是您的算法正在尝试做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:34:30.817

在十进制和二进制之间进行转换时，请记住每个二进制数字都是十进制的 2 的幂。

> 100110 = 1*2^5 + 0*2^4 + 0*2^3 + 1*2^2 + 1*2^1 + 0*2^0 = 38

所以从一个整数构建二进制字符串，从右边开始：

*   取十进制数和 2 的模数（余数除以 2）
*   将结果附加到二进制字符串的左侧
*   将您的数字除以 2
*   重复直到处理完整个数字

最后将该字符串转换为数字。

# ruby - 如何在 Ruby 中 TCPServer 从 http 请求接收数据？

> ID：10193044
> 
> 赞同：4
> 
> 时间：2012-04-17T14:20:17.180
> 
> 标签：ruby, tcpsocket

通过以下方式向客户端发送服务器响应很方便

```
server = TCPServer.open 1234

socket = server.accept

socket.puts 'data from server side' 
```

在客户端，在这种情况下卷曲

```
curl -v localhost:1234

*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 1234 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: localhost:1234
> Accept: */*
> 
data from server side 
```

在这一点上，似乎我仍然可以在 curl 中输入一些东西，所以我假设 tcp 连接是双向的，我输入

```
data from the curl client 
```

之后，如何在当前 TCPSocket 实例中从 curl 客户端接收此消息？

我试过了

```
socket.read 
```

但它不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T14:31:45.247

像这样的东西会读给用户打招呼，然后等待用户输入。这个例子只是在服务器端回显输入。

```
server = TCPServer.open(8000)
socket = server.accept
socket.puts 'Hello!' # Prints Hello! to the client
while line = socket.gets
  puts line # Prints whatever the client enters on the server's output
end 
```

# javascript - 复杂的跨域脚本

> ID：10193045
> 
> 赞同：3
> 
> 时间：2012-04-17T14:20:20.313
> 
> 标签：javascript, cross-domain, jsonp

我有以下场景，domain1.com 上的用户在 domain2.com 上打开一个新窗口。Domain2 包含一个非常复杂的 Web 应用程序，用户可以在其中浏览和选择文档。当用户搜索完正确的文档后，他希望将选择的文档发送回 domain1 并关闭窗口。这有可能吗？我猜 JSONP 不够好，因为响应不是立即的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:24:36.967

使用[消息 API](https://developer.mozilla.org/en/DOM/window.postMessage)在窗口之间进行通信

有一个用于跨浏览器实现[的库。](http://easyxdm.net/wp/)

# shell - 是否可以通过网页启动 shell 命令？我应该使用什么语言？

> ID：10193047
> 
> 赞同：0
> 
> 时间：2012-04-17T14:20:22.757
> 
> 标签：shell

我想为我的服务器制作一个简单的 GUI，其中包含以下选项：sudo shutdown -h now。

我有疑问，因为在考虑这一点时，我意识到 apache 以用户 www 运行，这是非常有限的。因此，通过 apache 提供的 html 页面将具有有限的访问权限……是这样吗？

如果是，像 webmin 这样的应用程序是如何工作的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:26:35.087

您可以使用例如 Python 或 Ruby 建立一个简单的网页，使用`system`调用来运行此类命令，但仅适用于您已经手动和**详尽测试过的静态、准备好的命令，并且前提****是您已经具备良好的安全性**以避免 DOS 攻击和故意破坏。这些点非常重要，因为您*真的*不希望其他人使用您的机器。您可以轻松设置`sudo`以允许来自`wwwrun`with 的静态命令`sudo visudo`。

即便如此，使用实际上为安全远程工作而设计的安全协议~~可能会~~更*安全*，例如**`ssh`**（以及`ssh-copy-id`为了方便和安全）。

# sql - SQL中的级联/条件JOIN

> ID：10193051
> 
> 赞同：1
> 
> 时间：2012-04-17T14:20:26.867
> 
> 标签：sql, oracle

我有两个表，我目前正在三个字段中加入：

```
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1, t2
 WHERE t1.A = t2.A
   AND t1.B = t2.B
   AND t1.C = t2.C 
```

由于我的数据的工作方式，如果 A/B/C 上的连接不匹配，那么我想在 A/B 上连接。如果该联接不匹配，那么我只想加入 A。这种类型的级联联接是否可以在 SQL 查询中进行（我使用的是 Oracle 10g）？还是我必须用代码处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:57:41.750

这对你有用吗？

```
 SELECT DISTINCT 
         t1.A,
         t1.B,
         t1.C,
         t2.D
    FROM t1, t2
   WHERE (t1.A = t2.A
          AND t1.B = t2.B
          AND t1.C = t2.C)
      OR (t1.A = t2.A
          AND t1.B = t2.B)
      OR (t1.A = t2.A); 
```

**编辑：**

如果您想要所有结果但想查看它们是如何匹配的，那么您可以发出以下命令：

```
 SELECT t1.A,
          t1.B,
          t1.C,
          t2.D,
          (CASE 
              WHEN t1.A = t2.A
               AND t1.B = t2.B
               AND t1.C = t2.C
              THEN 'A/B/C'
              WHEN t1.A = t2.A
               AND t1.B = t2.B
              THEN 'A/B'
              WHEN t1.A = t2.A
              THEN 'A'
              ELSE 'None'
           END) AS match_criteria
     FROM t1, t2
    WHERE t1.A = t2.A; 
```

在结果集中，您可以查看行的匹配级别，然后使用那里的数据。也许通过将此查询包装在外部查询中，您可以丢弃您不想要的行或优先处理您想要的行。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T15:11:24.417

您可以通过将三个查询联合在一起并在两个更一般的查询中排除在更具体的查询中返回的行来做到这一点。

您如何确定要从更一般的查询中排除哪些行取决于数据的形状，但您可以尝试以下操作：

```
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1, t2
 WHERE t1.A = t2.A AND t1.B = t2.B AND t1.C = t2.C
UNION 
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1, t2
 WHERE t1.A = t2.A AND t1.B = t2.B 
  AND NOT EXISTS (SELECT * FROM t2 WHERE t2.A = t1.A AND t2.B = t1.B AND t2.C = t1.C)
UNION
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1, t2
 WHERE t1.A = t2.A
  AND NOT EXISTS (SELECT * FROM t2 WHERE t2.A = t1.A AND t2.B = t1.B) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:29:00.513

```
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1
  LEFT JOIN t2
  ON t1.A = t2.A AND t1.B = t2.B AND t1.C = t2.C 
```

试试这个并检查你是否喜欢结果，如果不喜欢，使用这个（psedo.code）：

```
insert into #temptable
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1, t2
  WHERE t1.A = t2.A AND t1.B = t2.B AND t1.C = t2.C

IF select count(*) from #temptable = 0 then
insert into #temptable
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1, t2
  WHERE t1.A = t2.A AND t1.B = t2.B
end if;

IF select count(*) from #temptable = 0 then
insert into #temptable
SELECT t1.A, t1.B, t1.C, t2.D
  FROM t1, t2
  WHERE t1.A = t2.A
end if;

select * from #temptable
drop #temptable 
```

# mysql - SQL 在 SELECT() 中使用 MIN 和 CHAR 内容

> ID：10193052
> 
> 赞同：0
> 
> 时间：2012-04-17T14:20:27.110
> 
> 标签：mysql, database

我有以下数据（字段 varchar(55)）：

```
123,00
212,11
1.212,00 
```

和

```
SELECT MIN(FIELD) FROM XYZ 
```

我得到“1.212,00”。这对我来说是错误的，但对 MySQL 来说并没有错。我需要以下：123,00。

如何在不更改字段类型的情况下做到这一点？

TIA 马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:21:54.293

您应该[将](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html)您的 char 值转换为数值。

```
select min(
              CAST( replace(
                      replace ( FIELD, '.', '' ),
                      ',', '.'
                    )
                   AS DECIMAL(5,2))
           )  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:21:56.337

使用`Cast`或`Convert`：

CONVERT() 和 CAST() 函数采用一种类型的值并产生另一种类型的值。

`SELECT MIN(CAST(Field AS DECIMAL(10,2))) FROM XYZ`

[http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)

# vb.net - 如何在使用 Visual Studio 2010 创建的 Excel 加载项中执行 .Onkey 事件？

> ID：10193055
> 
> 赞同：11
> 
> 时间：2012-04-17T14:20:37.990
> 
> 标签：vb.net, visual-studio, excel, vsto, excel-addins

我正在使用 Visual Studio 2010 创建一个 Excel 加载项。我想在用户单击组合键时运行一些代码。

这是我得到的代码

```
Public Class CC

Private Sub ThisAddIn_Startup() Handles Me.Startup
    EnableShortCut()
End Sub

Sub A1()
    MsgBox "A1"
End Sub

Sub A2()
    MsgBox "A2"
End Sub

Sub A3()
    MsgBox "A3"
End Sub

Public Sub EnableShortCut()
    With Application
        .OnKey "+^{U}", "A1"  'action A1 should be performed when user clicks  Ctrl + Shift + U
        .OnKey "+^{L}", "A2"  'action A2 should be performed when user clicks  Ctrl + Shift + L
        .OnKey "+^{P}", "A3"  'action A3 should be performed when user clicks  Ctrl + Shift + P
    End With
End Sub

End Class 
```

安装的加载项在单击快捷方式时显示错误。它说找不到特定的宏。`Sub EnableShortCut()`当它在 excel vba 模块中时，下面的代码运行良好。将其添加到使用 Visual Studio 创建的 Excel 加载项时，同样不会起作用。有人请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T07:53:13.050

*“我想在用户按下组合键时运行一些代码。”*

**它很棘手，并且要在没有任何外部依赖的情况下使用键盘挂钩来使用 VSTO Excel 插件来实现它：**

```
Imports System
Imports System.Runtime.CompilerServices
Imports System.Runtime.InteropServices
Imports System.Windows.Forms

Friend Class KeyboardHooking
    ' Methods
    <DllImport("user32.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
    Private Shared Function CallNextHookEx(ByVal hhk As IntPtr, ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As IntPtr
    End Function

    <DllImport("kernel32.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
    Private Shared Function GetModuleHandle(ByVal lpModuleName As String) As IntPtr
    End Function

    Private Shared Function HookCallback(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
        If ((nCode >= 0) AndAlso (nCode = 0)) Then
            Dim keyData As Keys = DirectCast(CInt(wParam), Keys)
            If (((BindingFunctions.IsKeyDown(Keys.ControlKey) AndAlso BindingFunctions.IsKeyDown(Keys.ShiftKey)) AndAlso BindingFunctions.IsKeyDown(keyData)) AndAlso (keyData = Keys.D7)) Then
'DO SOMETHING HERE
            End If
            If ((BindingFunctions.IsKeyDown(Keys.ControlKey) AndAlso BindingFunctions.IsKeyDown(keyData)) AndAlso (keyData = Keys.D7)) Then
'DO SOMETHING HERE
            End If
        End If
        Return CInt(KeyboardHooking.CallNextHookEx(KeyboardHooking._hookID, nCode, wParam, lParam))
    End Function

    Public Shared Sub ReleaseHook()
        KeyboardHooking.UnhookWindowsHookEx(KeyboardHooking._hookID)
    End Sub

    Public Shared Sub SetHook()
        KeyboardHooking._hookID = KeyboardHooking.SetWindowsHookEx(2, KeyboardHooking._proc, IntPtr.Zero, Convert.ToUInt32(AppDomain.GetCurrentThreadId))
    End Sub

    <DllImport("user32.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
    Private Shared Function SetWindowsHookEx(ByVal idHook As Integer, ByVal lpfn As LowLevelKeyboardProc, ByVal hMod As IntPtr, ByVal dwThreadId As UInt32) As IntPtr
    End Function

    <DllImport("user32.dll", CharSet:=CharSet.Auto, SetLastError:=True)> _
    Private Shared Function UnhookWindowsHookEx(ByVal hhk As IntPtr) As <MarshalAs(UnmanagedType.Bool)> Boolean
    End Function

    ' Fields
    Private Shared _hookID As IntPtr = IntPtr.Zero
    Private Shared _proc As LowLevelKeyboardProc = New LowLevelKeyboardProc(AddressOf KeyboardHooking.HookCallback)
    Private Const WH_KEYBOARD As Integer = 2
    Private Const WH_KEYBOARD_LL As Integer = 13
    Private Const WM_KEYDOWN As Integer = &H100

    ' Nested Types
    Public Delegate Function LowLevelKeyboardProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
End Class

Public Class BindingFunctions
    ' Methods
    <DllImport("user32.dll")> _
    Private Shared Function GetKeyState(ByVal nVirtKey As Integer) As Short
    End Function

    Public Shared Function IsKeyDown(ByVal keys As Keys) As Boolean
        Return ((BindingFunctions.GetKeyState(CInt(keys)) And &H8000) = &H8000)
    End Function

End Class 
```

> C# 版本 - 上面的 vb.net 代码转换的原始版本 - 但我不得不使用 Reflector 作为 CodeConverter & devfusion 没有正确地做到这一点。

```
class KeyboardHooking
{
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr SetWindowsHookEx(int idHook, LowLevelKeyboardProc lpfn, IntPtr hMod,
    uint dwThreadId);

[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool UnhookWindowsHookEx(IntPtr hhk);

[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode, IntPtr wParam, IntPtr lParam);

[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr GetModuleHandle(string lpModuleName);

public delegate int LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam);
private static LowLevelKeyboardProc _proc = HookCallback;
private static IntPtr _hookID = IntPtr.Zero;

//declare the mouse hook constant.
//For other hook types, you can obtain these values from Winuser.h in the Microsoft SDK.

private const int WH_KEYBOARD = 2; // mouse
private const int HC_ACTION = 0;

private const int WH_KEYBOARD_LL = 13; // keyboard
private const int WM_KEYDOWN = 0x0100;

public static void SetHook()
{
    // Ignore this compiler warning, as SetWindowsHookEx doesn't work with ManagedThreadId
    #pragma warning disable 618
    _hookID = SetWindowsHookEx(WH_KEYBOARD, _proc, IntPtr.Zero, (uint)AppDomain.GetCurrentThreadId());
    #pragma warning restore 618

}

public static void ReleaseHook()
{
    UnhookWindowsHookEx(_hookID);
}

//Note that the custom code goes in this method the rest of the class stays the same.
//It will trap if BOTH keys are pressed down.
private static int HookCallback(int nCode, IntPtr wParam, IntPtr lParam)
{
    if (nCode < 0)
    {
        return (int)CallNextHookEx(_hookID, nCode, wParam, lParam);
    }
    else
    {

        if (nCode == HC_ACTION)
        {
            Keys keyData = (Keys)wParam;

            // CTRL + SHIFT + 7
            if ((BindingFunctions.IsKeyDown(Keys.ControlKey) == true)
                && (BindingFunctions.IsKeyDown(Keys.ShiftKey) == true)
                && (BindingFunctions.IsKeyDown(keyData) == true) && (keyData == Keys.D7))
            {
                // DO SOMETHING HERE
            }

            // CTRL + 7
            if ((BindingFunctions.IsKeyDown(Keys.ControlKey) == true)
                && (BindingFunctions.IsKeyDown(keyData) == true) && (keyData == Keys.D7))
            {
                // DO SOMETHING HERE
            }

        }
        return (int)CallNextHookEx(_hookID, nCode, wParam, lParam);
    }
}
}

public class BindingFunctions
{
[DllImport("user32.dll")]
static extern short GetKeyState(int nVirtKey);

public static bool IsKeyDown(Keys keys)
{
    return (GetKeyState((int)keys) & 0x8000) == 0x8000;
}

} 
```

**您需要将代码放入上述代码中的 HookCallback() 方法中，以在按下组合键时捕获事件，我给您提供了两个示例 Ctrl + Shift + 7 和 Ctrl + 7 来帮助您进行操作。**

然后在您的 Excel AddIn 中将其连接起来：

```
Private Sub ThisAddIn_Startup() Handles Me.Startup

'enable keyboard intercepts
KeyboardHooking.SetHook() 
```

完成后不要忘记禁用它：

```
Private Sub ThisAddIn_Shutdown() Handles Me.Shutdown

'disable keyboard intercepts
KeyboardHooking.ReleaseHook() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T07:00:05.123

使用[**Excel-DNA**](http://exceldna.codeplex.com)（我开发的一个开源 .NET/Excel 集成库），您的 .NET 代码中的方法和用户定义函数通过 C API 注册到 Excel。因此，该行为更接近 VBA 的行为，并且您的带有 Application.OnKey "..." 字符串的代码也可以工作。

Excel-DNA 允许您的代码位于已编译的 .NET .dll 程序集中或直接作为“.dna”文件中的文本，该文件在您加载加载项时进行处理。这是一个这样的文本文件的例子（如果它在一个编译的项目中，代码看起来是一样的）。如其他答案之一所述，我已重命名宏，因此它们的名称不会与单元格名称 A1 等冲突。

制作插件

1.  将代码保存为名为**OnKeyTest.dna**的文本文件，然后
2.  [将其与CodePlex 上发布](http://exceldna.codeplex.com/releases)的 Excel-DNA 宿主库 ExcelDna.xll 的副本相匹配，您只需将其复制并重命名为**OnKeyTest.xll**（匹配的名称是加载 .xll 时如何找到 .dna 文件） .

这两个文件将构成您的完整插件，只需要在机器上运行 .NET 即可。

```
<DnaLibrary Language="VB" RuntimeVersion="v2.0" >
<![CDATA[
Imports ExcelDna.Integration

Public Class MyAddIn
    Implements IExcelAddIn

    Private Sub AutoOpen() Implements IExcelAddIn.AutoOpen
        EnableShortCut()
    End Sub

    Private Sub AutoClose() Implements IExcelAddIn.AutoClose
    End Sub

    Sub EnableShortCut()
        With ExcelDnaUtil.Application
            .OnKey("+^{U}", "MacroA1")  'action A1 should be performed when user clicks  Ctrl + Shift + U
            .OnKey("+^{L}", "MacroA2")  'action A2 should be performed when user clicks  Ctrl + Shift + L
            .OnKey("+^{P}", "MacroA3")  'action A3 should be performed when user clicks  Ctrl + Shift + P
        End With
    End Sub
End Class

Public Module MyMacros
    Sub MacroA1()
        MsgBox("A1")
    End Sub

    Sub MacroA2()
        MsgBox("A2")
    End Sub

    Sub MacroA3()
        MsgBox("A3")
    End Sub
End Module
]]>
</DnaLibrary> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T00:49:36.787

这很难做到，Application.OnKey() 方法非常受限。它只能调用宏，不能传递任何参数。这意味着您必须*提供*一组宏。您不需要特定于工作簿的那些，您需要适用于任何文档的宏。让我们先解决这个问题。

*   启动 Excel 并使用 File + Close 关闭默认工作簿
*   单击录制宏。将“将宏存储在”设置更改为个人宏工作簿
*   确定关闭对话框并单击停止录制
*   单击 Visual Basic。请注意，您现在有一个名为 PERSONAL.XLSB 的 VBA 项目，其中包含 Module1

删除 Macro1 并复制/粘贴此 VBA 代码：

```
Sub MyAddinCommand1()
  Application.COMAddIns("ExcelAddin1").Object.Command 1
End Sub

Sub MyAddinCommand2()
  Application.COMAddIns("ExcelAddin1").Object.Command 2
End Sub

Sub MyAddinCommand3()
  Application.COMAddIns("ExcelAddin1").Object.Command 3
End Sub 
```

根据需要经常重复，您需要为每个要定义的快捷键设置一个。单击保存。您现在在 c:\users\yourname\appdata\roaming\microsoft\excel\xlstart\personal.xlsb 中创建了一个包含宏的文件。任何打算使用您的扩展程序的人也需要拥有此文件，即部署详细信息。

接下来你需要做的是公开你的命令。您在插件中编写的 Sub A1() 不会这样做，这些方法需要作为 COM 可见类的方法公开。向您的项目添加一个新类，并使代码如下所示：

```
Imports System.Runtime.InteropServices

<InterfaceType(Runtime.InteropServices.ComInterfaceType.InterfaceIsIDispatch)> _
<ComVisible(True)> _
Public Interface IMyAddinCommand
    Sub Command(ByVal index As Integer)
End Interface

<ClassInterface(Runtime.InteropServices.ClassInterfaceType.None)> _
<ComVisible(True)> _
Public Class MyAddinCommand
    Implements IMyAddinCommand

    Public Sub Command(index As Integer) Implements IMyAddinCommand.Command
        MsgBox("Command #" + CStr(index))
    End Sub
End Class 
```

只是一个简单的方法，它公开了一个名为 Command() 的方法，它接受一个整数。我只是使用 MsgBox，您需要编写一个 Select 语句来实现基于*index*值的命令。还要注意与全局宏中的代码的匹配。

您还需要做一件事，您必须明确地公开这个类。覆盖插件中的 RequestComAddInAutomationService 函数。我用来测试的那个看起来像这样：

```
Public Class ThisAddIn

    Private Sub ThisAddIn_Startup() Handles Me.Startup
        Application.OnKey("+^{U}", "Personal.xlsb!MyAddinCommand1")  '' Ctrl + Shift + U
    End Sub

    Protected Overrides Function RequestComAddInAutomationService() As Object
        If commands Is Nothing Then commands = New MyAddinCommand
        Return commands
    End Function

    Private commands As MyAddinCommand

End Class 
```

按 F5 编译并启动 Excel。当我按 Ctrl+Shift+UI 得到这个：

![在此处输入图像描述](../Images/92dd0b952b5c7ff1d2bef05b1a143c24.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T16:19:33.627

首先将 A1、A2、A3 视为单元地址。

1.  创建 .xlsm 文件并添加这些 VBA 代码

    ```
    Sub AOne()
    MsgBox "Message from AOne"
    End Sub

    Sub ATwo()
    MsgBox "Message from ATwo"
    End Sub

    Sub AThree()
    MsgBox "Message from AThree"
    End Sub 
    ```

2.  现在在 Visual Studio 中创建一个 Excel 工作簿项目并添加现有文件并选择上面创建的 .xlsm 文件

    ```
    private void ThisWorkbook_Startup(object sender, System.EventArgs e)
    {
        EnableShortCut();
    }

    private void ThisWorkbook_Shutdown(object sender, System.EventArgs e)
    {
    }

    public void EnableShortCut()
    {
        Excel.Application app = Globals.ThisWorkbook.Application;
        app.OnKey("+^{U}", "AOne"); //action A1 should be performed when user clicks  Ctrl + Shift + U
        app.OnKey("+^{L}", "ATwo");//action A2 should be performed when user clicks  Ctrl + Shift + L
        app.OnKey("+^{P}", "AThree"); //action A3 should be performed when user clicks  Ctrl + Shift + P
    } 
    ```

运行您的项目，这应该可以工作，Excel 中的 Application.OnKey 或 Word 中的 Application.Keybindings 将宏名称作为参数。

[在此处](https://stackoverflow.com/questions/2635463/i-have-a-vsto-application-as-an-add-in-to-ms-word-and-i-want-to-set-keyboard-sho/9840871#9840871)查看我在 Word 中使用快捷键的答案

# c# - Visifire - 具有多个绑定的自定义工具提示

> ID：10193056
> 
> 赞同：0
> 
> 时间：2012-04-17T14:20:41.470
> 
> 标签：c#, xaml, graph, visifire

我有用于创建图形的对象列表，在其中，我有一个 X 值、Y 值和一些描述该对象的其他内容（字符串、数字等）。我想创建一个显示它们的自定义工具提示。我已经看到了一些关于绑定 Tag 属性并使用它的内容。但我不确定这是否符合我的需求，因为正如我所说，我需要不止一处房产。我还有其他方法可以做到吗？

顺便说一句，我正在使用 xaml 和 c#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:54:49.610

但是，如果您使用 DataBinding，则可以将 ToolTipText 属性映射到每个单独的 DataPoint。

例子：

数据映射 dm = new DataMapping();

dm.MemberName="工具提示文本";

dm.Path = "自定义工具提示文本；

这里 customToolTipText 是视图模型中的一个属性，它将具有系列中每个 DataPoint 的值。

示例：customToolTipText = "XValue, YValue, otherdetail...";

这样您就可以直接设置 ToolTipText，而无需依赖 ZValue、AxisXLabel 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:15:24.507

只需在 DataSeries 中设置 ToolTipText 属性，即可在 ToolTip 中显示 XValue 和 YValue。

例子：

dataSeries.ToolTipText = "#XValue, #YValue";

如果您需要一个属性来存储 DataPoint 的自定义信息，您可以使用 DataSeries 中的 ZValue 属性。基本上 ZValue 对气泡图很有用，但您可以利用它来存储 DataPoint 的一些信息。最后在 ToolTip 中显示 ZValue。

例子：

dataSeries.ToolTipText = "#XValue, #YValue, #ZValue";

# swing - 像摆动组件一样的取景器

> ID：10193059
> 
> 赞同：0
> 
> 时间：2012-04-17T14:20:51.237
> 
> 标签：swing, user-interface, graphics, paint, jtree

有没有人建议如何在 swing 中实现类似于 mac 的 finder 的小部件？

事情是在 javascript 中完成的，比如[这里](http://christianyates.com/blog/jquery/finder-column-view-hierarchical-lists-jquery)

我只是想知道是否可以通过扩展 JTree 和覆盖绘制方法来实现？

我不需要文件浏览器我在水平扩展菜单之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:32:53.303

看起来更像是一组`JList`彼此相邻的 s，其中`JList`容器 x+1 的内容由容器 x 的选择决定`JList`。我不会打扰`JTree`

# android - 带有 ksoap2 库的 SOAP Web 服务

> ID：10193061
> 
> 赞同：2
> 
> 时间：2012-04-17T14:21:06.010
> 
> 标签：android, soap-client, android-ksoap2

我正在尝试将 .net SOAP Web 服务与 ksoap2 lib 一起使用。[http://www.vimeo.com/9633556](http://www.vimeo.com/9633556)中的示例显示了如何正确执行此操作。在该示例的代码下方。一切都应该正常！但我得到强制关闭错误！

这是我的代码：

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class SoapTest2Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView TV ;
    TV=(TextView)findViewById(R.id.textView1);
    TV.setText("Hi");

    String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
    String METHOD_NAME = "CelsiusToFahrenheit";
    String NAMESPACE = "http://tempuri.org/";
    String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";

    System.setProperty("http.keepAlive", "false");

    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
    Request.addProperty("Celsius", "32");

    SoapSerializationEnvelope soapEnvelope = new                       SoapSerializationEnvelope(SoapEnvelope.VER11);
    soapEnvelope.dotNet = true;
    soapEnvelope.setOutputSoapObject(Request);

    HttpTransportSE httpTransport = new HttpTransportSE(URL);
    try
    {
        httpTransport.call(SOAP_ACTION, soapEnvelope);
        SoapPrimitive resultString = (SoapPrimitive)soapEnvelope.getResponse();
        TV.setText(resultString.toString());
    }
    catch (Exception e) {
        e.printStackTrace();
    }

     }
    } 
```

请帮助 meeeeee

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T21:44:41.443

您的代码是正确的，但只能在 Android 2 中运行。如果您使用 v4 ICS/JB，则必须使用 AsyncTask。

```
package com.example.wscall3;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity {
    private String TAG ="Vik";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AsyncCallWS task = new AsyncCallWS();
        task.execute(); 
    }

    private class AsyncCallWS extends AsyncTask<Void, Void, Void> {
        @Override
        protected Void doInBackground(Void... params) {
            Log.i(TAG, "doInBackground");
            calculate();
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            Log.i(TAG, "onPostExecute");
        }

        @Override
        protected void onPreExecute() {
            Log.i(TAG, "onPreExecute");
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            Log.i(TAG, "onProgressUpdate");
        }

    }

    public void calculate() 
    {
        String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
        String METHOD_NAME = "CelsiusToFahrenheit";
        String NAMESPACE = "http://tempuri.org/";
        String URL = "http://www.w3schools.com/webservices/tempconvert.asmx";

        try { 
            SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
            Request.addProperty("Celsius", "32");

            SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            soapEnvelope.dotNet = true;
            soapEnvelope.setOutputSoapObject(Request);

            HttpTransportSE transport= new HttpTransportSE(URL);

            transport.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive)soapEnvelope.getResponse();

            Log.i(TAG, "Result Celsius: " + resultString);
        }
        catch(Exception ex) {
            Log.e(TAG, "Error: " + ex.getMessage());
        }

        SOAP_ACTION = "http://tempuri.org/FahrenheitToCelsius";
        METHOD_NAME = "FahrenheitToCelsius";
        try { 
            SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
            Request.addProperty("Fahrenheit", "100");

            SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            soapEnvelope.dotNet = true;
            soapEnvelope.setOutputSoapObject(Request);

            HttpTransportSE transport= new HttpTransportSE(URL);

            transport.call(SOAP_ACTION, soapEnvelope);
            SoapPrimitive resultString = (SoapPrimitive)soapEnvelope.getResponse();

            Log.i(TAG, "Result Fahrenheit: " + resultString);
        }
        catch(Exception ex) {
            Log.e(TAG, "Error: " + ex.getMessage());
        }
    }

} 
```

我的 AndroidManifest.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.wscall3"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.wscall3.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:20:10.640

[从 developer.android.com 连接到网络](http://developer.android.com/training/basics/network-ops/connecting.html)：

> 网络操作可能涉及不可预知的延迟。为防止这导致糟糕的用户体验，请始终在与 UI 不同的线程上执行网络操作。AsyncTask 类提供了一种从 UI 线程触发新任务的最简单方法。

如果您不在`httpTransport.call(SOAP_ACTION, soapEnvelope);`单独的线程上执行网络操作（如 ），您将获得 Android 操作系统的强制关闭对话框。

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)、[Service](http://developer.android.com/reference/android/app/Service.html)或[IntentService](http://developer.android.com/reference/android/app/IntentService.html)来执行此操作。编写另一个类来扩展这些类中的一个以进行 Web 服务调用将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:10:04.937

```
public  String SOAP_ACTION;
public  String METHOD_NAME; 
public  final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
public  final String SOAP_ADDRESS =    "http://www.w3schools.com/webservices/tempconvert.asmx";
public  final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    input = (EditText) findViewById(R.id.editText1);
    result = (EditText) findViewById(R.id.editText2);

    cel= (RadioButton) findViewById(R.id.radioButton1);
    fah= (RadioButton) findViewById(R.id.radioButton2);

    rGroup = (RadioGroup) findViewById(R.id.rgTemp);

    open = (Button) findViewById(R.id.button1);

    open.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent openScreen = new Intent("com.loginworks.demo.ANDROIDPLOT");

            startActivity(openScreen);
        }
    });

   rGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener()  {
        public void onCheckedChanged(RadioGroup rGroup, int checkedId)  {

        String in = input.getText().toString();

           if (cel.isChecked()) {
               PROPERTY_NAME = "Fahrenheit";
               METHOD_NAME = "FahrenheitToCelsius";
               SOAP_ACTION  = "http://tempuri.org/FahrenheitToCelsius";                
           }
           else {
               PROPERTY_NAME = "Celsius";
               METHOD_NAME = "CelsiusToFahrenheit";
               SOAP_ACTION  = "http://tempuri.org/CelsiusToFahrenheit";
           }

           Convert(in);

        }            
    });        
}   

public void Convert(String val) {
     SoapObject requestddr = new SoapObject(WSDL_TARGET_NAMESPACE, "Vrati");

     PropertyInfo pi=new PropertyInfo();

        pi.setName(PROPERTY_NAME);
            pi.setValue(val);
            pi.setType(String.class);
            request.addProperty(pi);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);

        HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);

        Object response= null;

        try {

        httpTransport.call(SOAP_ACTION, envelope);
        response = envelope.getResponse();

            }
        catch (Exception exception) {   

            response=exception;                 
            }

        result.setText(response.toString()); 
```

[http://www.loginworks.com/technical-blogs/258-working-with-soap-web-service-through-android](http://www.loginworks.com/technical-blogs/258-working-with-soap-web-service-through-android)

# netbeans - 如何从 CVS 导出 Web 项目？

> ID：10193063
> 
> 赞同：0
> 
> 时间：2012-04-17T14:21:10.350
> 
> 标签：netbeans, cvs

我正在使用 Netbeans 在 Windows 中处理 CVS Web 项目。

有没有将项目导出到目标目录的解决方案，而不需要 Netbeans 和“CVS”目录创建的元数据点文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:43:16.487

检查“cvs export”命令： http: [//www.devdaily.com/blog/post/cvs/export-project-from-cvs-repository](http://www.devdaily.com/blog/post/cvs/export-project-from-cvs-repository)。

# jquery - 使用 jQuery/XML 显示特定信息

> ID：10193065
> 
> 赞同：0
> 
> 时间：2012-04-17T14:21:15.553
> 
> 标签：jquery, xml

我已经使用 jQuery 用 XML 数据填充了一个选择元素，这并不难。我现在正试图找到一种方法，在其自己的单独 div 区域中显示分配给该选择元素中特定元素的信息。到目前为止，这是我的代码示例：

```
 $('.selectspeak').live('change', function() {

                $("#mainOutput").empty();

                $(g_playDOM).find("SPEECH").each(function(){

                    var speaker = $(".selectspeak").val();
                    var line = $(this).find("LINE").text();

                $("#mainOutput").append("<div class='speakerClass'>" + "Speaker: " + speaker + "<br />" + " <div class='speakerClassLine'>" + "<br />" + "Line: " + line + "</div>");

            });

}); 
```

上面的代码本质上是用说话者数据填充选择标签，没问题。但是在选择扬声器时，它只显示正常的数据，而不是分配给扬声器的数据。如何确保在选择扬声器时仅显示指定的信息？

我已经尝试破解这个坚果几个小时了，进展甚微，所以朝着正确的方向轻推会很棒！:-)

谢谢！

更新：我添加了一个指向实时项目的链接。只需在左侧选择一个播放，然后您将能够在右侧看到我正在谈论的选择元素。谢谢。

[http://scmweb.infj.ulst.ac.uk/~B00351504/COM601/assignment_2/siab.html](http://scmweb.infj.ulst.ac.uk/~B00351504/COM601/assignment_2/siab.html)

第二次更新：

根据要求的一些 XML 行：

```
<PLAY>
<TITLE>The Merchant of Venice</TITLE>
<FM>
<P>
ASCII text placed in the public domain by Moby Lexical Tools, 1992.
</P>
<P>SGML markup by Jon Bosak, 1992-1994.</P>
<P>XML version by Jon Bosak, 1996-1999.</P>
<P>
The XML markup in this version is Copyright © 1999 Jon Bosak. This work may freely be distributed on condition that it not be modified or altered in any way.
</P>
</FM>
<PERSONAE>
<TITLE>Dramatis Personae</TITLE>
<PERSONA>The DUKE OF VENICE.</PERSONA>
<PGROUP>
<PERSONA>The PRINCE OF MOROCCO</PERSONA>
<PERSONA>The PRINCE OF ARRAGON</PERSONA>
<GRPDESCR>suitors to Portia.</GRPDESCR>
</PGROUP>
<PERSONA>ANTONIO, a merchant of Venice.</PERSONA>
<PERSONA>BASSANIO, his friend, suitor likewise to Portia.</PERSONA>
<PGROUP>
<PERSONA>SALANIO</PERSONA>
<PERSONA>SALARINO</PERSONA>
<PERSONA>GRATIANO</PERSONA>
<PERSONA>SALERIO</PERSONA>
<GRPDESCR>friends to Antonio and Bassanio.</GRPDESCR>
</PGROUP>
<PERSONA>LORENZO, in love with Jessica.</PERSONA>
<PERSONA>SHYLOCK, a rich Jew.</PERSONA>
<PERSONA>TUBAL, a Jew, his friend.</PERSONA>
<PERSONA>LAUNCELOT GOBBO, the clown, servant to SHYLOCK.</PERSONA>
<PERSONA>OLD GOBBO, father to Launcelot.</PERSONA>
<PERSONA>LEONARDO, servant to BASSANIO.</PERSONA>
<PGROUP>
<PERSONA>BALTHASAR</PERSONA>
<PERSONA>STEPHANO</PERSONA>
<GRPDESCR>servants to PORTIA.</GRPDESCR>
</PGROUP>
<PERSONA>PORTIA, a rich heiress.</PERSONA>
<PERSONA>NERISSA, her waiting-maid.</PERSONA>
<PERSONA>JESSICA, daughter to SHYLOCK.</PERSONA>
<PERSONA>
Magnificoes of Venice, Officers of the Court of Justice, Gaoler, Servants to Portia, and other Attendants.
</PERSONA>
</PERSONAE>
<SCNDESCR>
SCENE Partly at Venice, and partly at Belmont, the seat of PORTIA, on the Continent.
</SCNDESCR>
<PLAYSUBT>THE MERCHANT OF VENICE</PLAYSUBT>
<ACT>
<TITLE>ACT I</TITLE>
<SCENE>
<TITLE>SCENE I. Venice. A street.</TITLE>
<STAGEDIR>Enter ANTONIO, SALARINO, and SALANIO</STAGEDIR>
<SPEECH>
<SPEAKER>ANTONIO</SPEAKER>
<LINE>In sooth, I know not why I am so sad:</LINE>
<LINE>It wearies me; you say it wearies you;</LINE>
<LINE>But how I caught it, found it, or came by it,</LINE>
<LINE>What stuff 'tis made of, whereof it is born,</LINE>
<LINE>I am to learn;</LINE>
<LINE>And such a want-wit sadness makes of me,</LINE>
<LINE>That I have much ado to know myself.</LINE>
</SPEECH> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:54:11.050

我认为您必须过滤选定的“语音”项目。

```
$('.selectspeak').live('change', function() {

                $("#mainOutput").empty();

                $(g_playDOM).find("SPEECH").each(function(){

                    var speaker = $(".selectspeak").val();
                    //I'm checking if this 'SPEECH' is by "SPEAKER"
                    if($(this).find("SPEAKER").text()==speaker){

                    var line = $(this).find("LINE").text();
                    $("#mainOutput").append("<div class='speakerClass'>" + "Speaker: " + speaker + "<br />" + " <div class='speakerClassLine'>" + "<br />" + "Line: " + line + "</div>");
                    }

            });

});​ 
```

在这里，我检查了所选的“SPEECH”项目是否属于“Speaker”。

# c# - 在没有调试器的情况下运行测试时，Visual Studio 单元测试失败

> ID：10193066
> 
> 赞同：3
> 
> 时间：2012-04-17T14:21:16.333
> 
> 标签：c#, .net, unit-testing, c#-4.0, reflection

当他们到达这里时，我的单元测试失败了：

```
var y = AppDomain.CurrentDomain
                 .GetAssemblies()
                 .Where(a => !a.GlobalAssemblyCache)
                 .SelectMany(a => a.GetExportedTypes()
                                   .Where(t => t.IsClass && typeof(ITypeRenderer).IsAssignableFrom(t)))
                 .ToArray(); 
```

但是当我在附加调试器的情况下运行测试时，它并没有失败。

我想它必须与反射权限和所有爵士乐有关，知道吗？

例外是：

> 初始化方法 MyUnitTestProject.UnitTest.Init 抛出异常。System.NotSupportedException：System.NotSupportedException：动态程序集中不支持调用的成员。

异常发生在：

```
System.Reflection.Emit.InternalAssemblyBuilder.GetExportedTypes() 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:46:39.477

好吧，错误消息*确实*说“动态程序集中不支持调用的成员”。显然，当您在调试器之外运行测试时，会导致在与运行测试相同的 AppDomain 中创建动态程序集。

同样（希望）显然，检查[`IsDynamic`](http://msdn.microsoft.com/en-us/library/ee332812.aspx)以排除此类程序集（以与排除 GAC 程序集相同的方式）应该避免错误。

# c# - WinXP 嵌入式上的 ManualResetEvent 问题

> ID：10193070
> 
> 赞同：0
> 
> 时间：2012-04-17T14:21:37.657
> 
> 标签：c#, .net, windows-7, windows-xp-embedded, manualresetevent

我在使用带有超时参数的 ManualResetEvent 类时遇到问题。此问题专门发生在 WinXP 嵌入式平台上。该代码在其他 Windows 平台上完美运行。我正在与 TCP 服务器通信。在我的客户端代码中，我连接到服务器并生成一个新线程，我的工作是持续监控接收套接字的数据。我在主线程中发送数据。代码片段附在下面：

```
internal void initSocket()
{
   .....
   .....
   if (socket.Connected)
   {
      Tracing.info("Connected to server");
      ReceiveThread = new Thread(new    ThreadStart(StartReceiving));
      ReceiveThread.Start();
    }
}

/// <summary>
/// Sends a request to Server and waits for its response.
/// </summary>
/// <param name="msg"></param>
/// <param name="timeout">Timeout time, when </param>
/// <returns></returns>
private CdcMessage sendSync(CdcMessage msg, int timeout)
{
    resultMessage = null;

    // store current messageId...
    resultMessagePackageId = msg.MessageId;

    String msgToSend = msg.serialize();

    Tracing.debug("SEND    : >> " + msgToSend);
    socketWriter.WriteLine(msgToSend);

    // Wait for response from read thread...
    resultReceivedEvent = new  ManualResetEvent(false);
    bool bReponseSent = resultReceivedEvent.WaitOne(timeout);

    if (!bReponseSent)
    {
        resultMessage = null;
    }

    return resultMessage;

}

/// <summary>
/// Thread function which continuously checks for the 
/// data from server. It will read the data only if it
/// is available
/// </summary>
public void StartReceiving()
{
    while (Connected)
    {
        try
        {
            Thread.Sleep(100);

            String response = socketReader.ReadLine();

            Tracing.info("Raw data received = " + response);

            resultMessage = CdcMessage.deserialize(response);

            Tracing.info("Deserialized response =  " + resultMessage);

            if (resultMessage == null)
            {
                continue;
            }
            else if (resultMessage.IsHeartbeat)
            {
                Tracing.debug("Heartbeat");
                socketWriter.WriteLine(response);
            }
            else if (!resultMessage.MessageId.Equals(resultMessagePackageId))
            {
                // not the correct package id...reject...
                Tracing.warn("REJECTED: Package-ID: " + resultMessage.MessageId);
                continue;
            }
            else
            {
                resultReceivedEvent.Set();
                Tracing.info("StartReceiving() : Received data");
                Tracing.debug("RECEIVED: >> " + response);
            }
        }
        catch (NullReferenceException nre)
        {
            Tracing.error("StartReceiving(): Socket doesn't exist!", nre);
            close();
            break;
        }
        catch (ObjectDisposedException ode)
        {
            Tracing.error("StartReceiving(): Socket is disposed!", ode);
            close();
            break;
        }
        catch (IOException ex)
        {
            Tracing.error("StartReceiving(): Socket IO-Exception!", ex);
            close();
            break;
        }
    }
} 
```

我已经强调了代码的重要方面。据观察，WaitOne(timeout) 函数在大多数 Windows 操作系统上都可以正常工作。但是在 XP 嵌入式上，我观察到一个问题。WaitOne 几乎立即返回，没有从接收线程接收到数据。

我所做的是通过将 -1 传递给 WaitOne，将超时设置为 INFINITE。在这种情况下，我可以解决问题。但这会产生其他副作用（例如，如果服务器关闭，那么 WaitOne 永远不会返回！）

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:36:58.077

我不确定我是否正确理解了您的代码，但是这些行

```
socketWriter.WriteLine(msgToSend);
resultReceivedEvent = new  ManualResetEvent(false);
bool bReponseSent = resultReceivedEvent.WaitOne(timeout); 
```

我看起来很奇怪。我认为这会更好：

```
resultReceivedEvent.Reset();
socketWriter.WriteLine(msgToSend);
bool bReponseSent = resultReceivedEvent.WaitOne(timeout); 
```

`ManualResetEvent`如果在创建新的之前设置了旧的，则可能存在潜在的竞争条件。似乎没有理由在`ManualResetEvent`这里创建一个新实例。只需调用`Reset`旧实例，并确保在发送消息之前将其重置。

# ios - 确定最后一行的宽度

> ID：10193073
> 
> 赞同：11
> 
> 时间：2012-04-17T14:21:44.913
> 
> 标签：ios, uilabel

我有一个多行标签，lineBreakMode 设置为 UILineBreakModeWordWrap。如何确定最后一行的宽度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-09-05T17:41:39.627

从 iOS 7.0 开始，您可以使用此功能（也许您需要针对您的情况对文本容器进行更多调整）：

```
public func lastLineMaxX(message: NSAttributedString, labelWidth: CGFloat) -> CGFloat {
    // Create instances of NSLayoutManager, NSTextContainer and NSTextStorage
    let labelSize = CGSize(width: bubbleWidth, height: .infinity)
    let layoutManager = NSLayoutManager()
    let textContainer = NSTextContainer(size: labelSize)
    let textStorage = NSTextStorage(attributedString: message)

    // Configure layoutManager and textStorage
    layoutManager.addTextContainer(textContainer)
    textStorage.addLayoutManager(layoutManager)

    // Configure textContainer
    textContainer.lineFragmentPadding = 0.0
    textContainer.lineBreakMode = .byWordWrapping
    textContainer.maximumNumberOfLines = 0

    let lastGlyphIndex = layoutManager.glyphIndexForCharacter(at: message.length - 1)
    let lastLineFragmentRect = layoutManager.lineFragmentUsedRect(forGlyphAt: lastGlyphIndex,
                                                                  effectiveRange: nil)

    return lastLineFragmentRect.maxX
} 
```

目标-C：

```
- (CGFloat)lastLineMaxXWithMessage:(NSAttributedString *)message labelWidth:(CGFloat)labelWidth
{
    CGSize labelSize = CGSizeMake(labelWidth, CGFLOAT_MAX);
    NSLayoutManager *layoutManager = [[NSLayoutManager alloc] init];
    NSTextContainer *textContainer = [[NSTextContainer alloc] initWithSize:labelSize];
    NSTextStorage *textStorage = [[NSTextStorage alloc] initWithAttributedString:message];
    [layoutManager addTextContainer:textContainer];
    [textStorage addLayoutManager:layoutManager];

    textContainer.lineFragmentPadding = 0;
    textContainer.lineBreakMode = NSLineBreakByWordWrapping;
    textContainer.maximumNumberOfLines = 0;
    NSUInteger lastGlyphIndex = [layoutManager glyphIndexForCharacterAtIndex:[message length] - 1];
    CGRect lastLineFragmentRect = [layoutManager lineFragmentUsedRectForGlyphAtIndex:lastGlyphIndex effectiveRange:nil];
    return CGRectGetMaxX(lastLineFragmentRect);
} 
```

然后您可以决定最后一行是否有足够的位置放置您的日期标签

用法示例：

```
// you definitely have to set at least the font to calculate the result
// maybe for your case you will also have to set other attributes
let attributedText = NSAttributedString(string: label.text, 
                                        attributes: [.font: label.font])
let lastLineMaxX = lastLineMaxX(message: attributedText, 
                                labelWidth: label.bounds.width) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-15T06:55:48.700

这就是我的做法。首先将标签的行放在 NSArray 中，然后检查最后一行的宽度。在 viewDidLoad 中：

```
NSArray* lines = [self getSeparatedLinesFromLbl:srcLabel];
NSString *lastLine=[lines lastObject];
float lastLineWidth=[lastLine sizeWithFont:srcLabel.font constrainedToSize:boundingSize lineBreakMode:NSLineBreakByWordWrapping].width; 
```

并 getSeparatedLinesFromLbl：

```
-(NSArray*)getSeparatedLinesFromLbl:(UILabel*)lbl
{
if ( lbl.lineBreakMode != NSLineBreakByWordWrapping )
{
    return nil;
}

NSMutableArray* lines = [NSMutableArray arrayWithCapacity:10];

NSCharacterSet* wordSeparators = [NSCharacterSet whitespaceAndNewlineCharacterSet];

NSString* currentLine = lbl.text;
int textLength = [lbl.text length];

NSRange rCurrentLine = NSMakeRange(0, textLength);
NSRange rWhitespace = NSMakeRange(0,0);
NSRange rRemainingText = NSMakeRange(0, textLength);
BOOL done = NO;
while ( !done )
{
    // determine the next whitespace word separator position
    rWhitespace.location = rWhitespace.location + rWhitespace.length;
    rWhitespace.length = textLength - rWhitespace.location;
    rWhitespace = [lbl.text rangeOfCharacterFromSet: wordSeparators options: NSCaseInsensitiveSearch range: rWhitespace];
    if ( rWhitespace.location == NSNotFound )
    {
        rWhitespace.location = textLength;
        done = YES;
    }

    NSRange rTest = NSMakeRange(rRemainingText.location, rWhitespace.location-rRemainingText.location);

    NSString* textTest = [lbl.text substringWithRange: rTest];

    CGSize sizeTest = [textTest sizeWithFont: lbl.font forWidth: 1024.0 lineBreakMode: NSLineBreakByWordWrapping];
    if ( sizeTest.width > lbl.bounds.size.width )
    {
        [lines addObject: [currentLine stringByTrimmingCharactersInSet:wordSeparators]];
        rRemainingText.location = rCurrentLine.location + rCurrentLine.length;
        rRemainingText.length = textLength-rRemainingText.location;
        continue;
    }

    rCurrentLine = rTest;
    currentLine = textTest;
}

[lines addObject: [currentLine stringByTrimmingCharactersInSet:wordSeparators]];

return lines;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-31T08:51:54.443

**更新 Swift 4.2 (IOS 12)**

```
extension UILabel {
func getSeparatedLines() -> [Any] {
    if self.lineBreakMode != NSLineBreakMode.byWordWrapping {
        self.lineBreakMode = .byWordWrapping
    }
    var lines = [Any]() /* capacity: 10 */
    let wordSeparators = CharacterSet.whitespacesAndNewlines
    var currentLine: String? = self.text
    let textLength: Int = (self.text?.count ?? 0)
    var rCurrentLine = NSRange(location: 0, length: textLength)
    var rWhitespace = NSRange(location: 0, length: 0)
    var rRemainingText = NSRange(location: 0, length: textLength)
    var done: Bool = false
    while !done {
        // determine the next whitespace word separator position
        rWhitespace.location = rWhitespace.location + rWhitespace.length
        rWhitespace.length = textLength - rWhitespace.location
        rWhitespace = (self.text! as NSString).rangeOfCharacter(from: wordSeparators, options: .caseInsensitive, range: rWhitespace)
        if rWhitespace.location == NSNotFound {
            rWhitespace.location = textLength
            done = true
        }
        let rTest = NSRange(location: rRemainingText.location, length: rWhitespace.location - rRemainingText.location)
        let textTest: String = (self.text! as NSString).substring(with: rTest)
        let fontAttributes: [String: Any]? = [NSAttributedString.Key.font.rawValue: font]
        let maxWidth = (textTest as NSString).size(withAttributes: [NSAttributedString.Key(rawValue: NSAttributedString.Key.font.rawValue): font]).width
        if maxWidth > self.bounds.size.width {
            lines.append(currentLine?.trimmingCharacters(in: wordSeparators) ?? "")
            rRemainingText.location = rCurrentLine.location + rCurrentLine.length
            rRemainingText.length = textLength - rRemainingText.location
            continue
        }
        rCurrentLine = rTest
        currentLine = textTest
    }
    lines.append(currentLine?.trimmingCharacters(in: wordSeparators) ?? "")
    return lines
}

var lastLineWidth: CGFloat {
    let lines: [Any] = self.getSeparatedLines()
    if !lines.isEmpty {
        let lastLine: String = (lines.last as? String)!
        let fontAttributes = [NSAttributedString.Key.font.rawValue: font]
        return (lastLine as NSString).size(withAttributes: [NSAttributedString.Key(rawValue: NSAttributedString.Key.font.rawValue): font]).width
    }
    return 0
}

} 
```

***用法***

```
print(yourLabel.lastLineWidth) 
```

> **斯威夫特 4.2 (IOS 12)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-30T12:02:44.173

我发现 NSLayoutManager 为此提供了 API：

```
// Returns the usage rect for the line fragment in which the given glyph is laid and (optionally) by reference the whole range of glyphs that are in that fragment.  
// This will cause glyph generation and layout for the line fragment containing the specified glyph, or if non-contiguous layout is not enabled, up to and including that line fragment.  
// Line fragment used rects are always in container coordinates.
open func lineFragmentUsedRect(forGlyphAt glyphIndex: Int, effectiveRange effectiveGlyphRange: NSRangePointer?) -> CGRect 
```

所以，我认为我们可以这样做：

```
let lastGlyphIndex = self.text.count - 1
let lastLineWidth = layoutManager.lineFragmentUsedRect(forGlyphAt: lastGlyphIndex, effectiveRange: nil).size.with 
```

# c++ - CScrollBar 拇指跟踪不起作用

> ID：10193077
> 
> 赞同：1
> 
> 时间：2012-04-17T14:21:58.320
> 
> 标签：c++, mfc, scrollbar

我正在尝试使用 CScrollBar 在对话框中导航项目列表。我在对话框中捕获 OnVScroll 消息，滚动条正确响应单击栏顶部和底部的箭头，并单击栏的范围以前进整页。问题是当您尝试拖动拇指时，它根本没有响应，直到您释放鼠标按钮，此时拇指移动到正确的位置。

我使用 spy++ 来查找 WM_VSCROLL 消息，似乎它们仅在您单击拇指并释放它时以 SB_THUMBTRACK 模式发送，但在拖动时不会发送。然而，CScrollBar 上的 msdn 页面说这些消息应该在拖动拇指时连续发送。由于我没有收到这些消息，因此我不知道拇指在哪里，也无法设置当前位置。

我认为这些消息不会在其他任何地方被截获，首先是因为即使我将 spy++ 设置为记录所有消息，spy++ 也没有看到它们，其次是因为该栏在单击和释放时确实会收到两条缩略图消息。

无论我给对话框 WS_VSCROLL 样式还是创建一个 CScrollBar 并将它放在对话框中，我都会遇到这个问题。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:14:55.107

确保您没有将 SB_THUMBTRACK 与 SB_THUMBPOSITION 混淆。前者是您想要的实时滚动，后者仅在用户释放滑块时发送。

您还可以检查性能设置（控制面板 -> 查看高级系统设置 -> 高级选项卡 -> 性能 -> 设置... -> 视觉效果。某些实时效果可能被禁用（如平滑滚动列表框或其他取决于您使用的 Windows 版本）。

# jquery - 使用 jquery 从列表框转换为数组

> ID：10193083
> 
> 赞同：1
> 
> 时间：2012-04-17T14:22:19.813
> 
> 标签：jquery, asp.net-mvc-3

我检查了其他答案，他们似乎没有解决这个问题：

```
 var values = [];
            $('#EnrolledParticipants :selected').each(function (i, option) {
                values[i] = $(option).text();
            }); 
```

这将返回一个数组，其元素数量等于所选选项的数量。

但是，我想做的是返回一个包含列表框中所有内容的数组，而不仅仅是选定的内容。

当我执行此代码时：

```
 var values = [];
            $('#EnrolledParticipants').each(function (i, option) {
                values[i] = $(option).text();
            }); 
```

它返回一个包含一个元素的数组，列表框的每个选项都用空格分隔。知道有什么不同吗？有没有“：任何”或类似的东西我可以尝试？

有关其他信息，我的 ajax 调用如下所示：

```
$.ajax({
                url: '@Url.Action("SaveStudy")',
                type: "POST",
                contentType: 'application/json',
                data: JSON.stringify({
                    Participants: values,
                    StudyName: $("#StudyName").val(),
                    AssessmentID: $("input:radio:checked").val()
                }),
                success: function (result) {

                    $("#notify-container").notify("create", {
                        title: 'Update',
                        text: "Study was saved to database."
                    });

                },
                error: function () {
                    alert("No banks were selected.  Add at least one bank to create an assessment.");
                }
            }); 
```

我的控制器标头如下所示：

```
public ActionResult SaveStudy(string StudyName, string AssessmentID, string[] Participants)
        { 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T14:24:56.703

如果`#EnrolledParticipants`是`select`元素，请尝试简单

```
$('#EnrolledParticipants option').each(function (i, option) {
      values[i] = $(option).text();
}); 
```

# objective-c - 是否有可能拥有一个未启用 ARC 但带有一些 arc 文件的 iOS 应用程序？

> ID：10193084
> 
> 赞同：7
> 
> 时间：2012-04-17T14:22:20.270
> 
> 标签：objective-c, ios, automatic-ref-counting

是否有可能拥有一个未启用 ARC 但带有一些 arc 文件的 iOS 应用程序？

我有一个未启用 ARC 的应用程序，我想在其中引入一些启用 ARC 的文件。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T15:04:05.140

您可以使用该`-fobjc-arc`标志为特定文件启用 ARC。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-05T12:07:43.763

使用该`-fobjc-arc`标志启用`ARC`特定文件可能会导致`'unrecognized command line option for -f-objc-arc`错误，这是因为使用了错误的编译器。

要解决此问题，请转到`Target Settings > Build Settings > Build Options`并将编译器从 更改`LLVM GCC`为`Apple LLVM`。构建并运行，问题应该得到解决。

# javascript - 对 JSONP 请求的工作方式感到困惑

> ID：10193085
> 
> 赞同：27
> 
> 时间：2012-04-17T14:22:36.930
> 
> 标签：javascript, ajax, jsonp

我无法理解 jsonp 请求如何工作的细节。我已经阅读了包括 jsonp 上的 wiki 在内的几个来源，但对于在进行 jsonp 调用时回调如何实际获取从服务器返回的函数时仍然感到非常困惑。例如在wiki中，请求的来源设置为：

```
src="http://server2.example.com/RetrieveUser?UserId=1234&jsonp=parseResponse" 
```

jsonp = parseResponse 到底是做什么/意味着什么？然后他们继续说有效载荷是：

```
parseResponse({"Name": "Foo", "Id" : 1234, "Rank": 7}); 
```

这是如何运作的？我对整个回调功能感到困惑。函数名 parseResponse 被传递给服务器，返回的数据不知何故成为该函数的参数？有人可以清楚地解释如何从 jsonp 请求中检索/使用数据吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-17T14:31:11.817

回调是您在自己的代码中定义的函数。jsonp 服务器将使用与您指定的回调函数名称相同的函数调用来包装其响应。

这是怎么回事：

1) 您的代码创建 JSONP 请求，这会产生一个`<script>`如下所示的新块：

```
<script src="http://server2.example.com/RetrieveUser?UserId=1234&jsonp=parseResponse"></script> 
```

2) 新脚本标签由您的浏览器执行，从而向 JSONP 服务器发出请求。它回应

```
parseResponse({"Name": "Foo", "Id" : 1234, "Rank": 7}); 
```

3）由于这个请求来自一个脚本标签，它几乎和你真正放置的一样

```
<script>
    parseResponse({"Name": "Foo", "Id" : 1234, "Rank": 7});
</script> 
```

进入您的页面。

4) 现在这个新脚本已经从远程服务器加载，它现在将被执行，它唯一会做的就是一个函数调用`parseResponse()`，传递 JSON 数据作为函数调用的唯一参数。

因此，在您的代码中的其他地方，您将拥有：

```
function parseResponse(data) {
     alert(data.Name); // outputs 'Foo'
} 
```

基本上，JSONP 是一种绕过浏览器同源脚本安全策略的方法，通过让第 3 方服务器将函数调用直接注入您的页面。请注意，这是设计上非常不安全的。您依赖于远程服务是光荣的并且没有恶意。没有什么能阻止糟糕的服务返回一些窃取您的银行/facebook/任何凭据的 JS 代码。例如... JSONP 响应可能是

```
 internalUseOnlyFunction('deleteHarddrive'); 
```

而不是 parseReponse(...)。如果远程站点知道您的代码结构，它就可以使用该代码执行任意操作，因为您已经敞开大门，允许该站点做任何它想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:29:07.847

**编辑：正如乔恩所说，**[这里](https://stackoverflow.com/a/2067584/104999)有更好的解释。

JSONP 使用脚本标签来发出跨源请求。由于脚本标签用于包含脚本，因此服务器需要返回有效的 JavaScript。我们将 JavaScript 提供给客户端的方式是通过函数调用。您告诉服务器您希望脚本调用什么函数，然后在本地创建该函数。脚本加载完成后，将使用数据作为参数调用您的函数。

因此，如果您在您提到的 URL 上执行了 JSONP 请求，并且它返回了您提到的有效负载，您将通过执行以下操作获取您的数据：

```
function parseResponse(data) {
    console.log("JSONP request complete", data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:29:19.300

> 函数名 parseResponse 被传递给服务器，返回的数据不知何故成为该函数的参数

看起来你刚刚自己解释了，`jsonp=parseResponse`这个应用程序是如何设置回调函数的，所以它返回一个包含你的 json 数据的函数，看起来像

```
parseResponse({"Name": "Foo", "Id" : 1234, "Rank": 7}); 
```

它在加载时被调用，并由您的 JS 中的函数处理，例如：

```
function parseResponse(data){
    console.log(data);
} 
```

# encoding - Aptana 3.1.1 - 字符编码

> ID：10193091
> 
> 赞同：2
> 
> 时间：2012-04-17T14:22:44.487
> 
> 标签：encoding, character, aptana

我已经更新到 Aptana 3.1.1，现在我用 ISO-8859-1 编写的项目显示一些字符非常错误。有一个解决方法，但是我的 UTF-8 项目得到了错误的字符。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T21:26:46.437

这是这里的错误：[https](https://jira.appcelerator.org/browse/APSTUD-4656) ://jira.appcelerator.org/browse/APSTUD-4656 。基本上现在设置了默认编码类型。

该更改正在恢复，因为它似乎造成的烦恼多于帮助，但与此同时，您可以执行以下操作：

1.  常规 > 内容类型 > 文件类型 > 默认编码并将其设置为您想要的任何内容。
2.  今晚将对 RC 和 beta 流进行更新，并恢复该更改。

# sql - Access数据库中如何获取已更改的记录详细信息

> ID：10193096
> 
> 赞同：3
> 
> 时间：2012-04-17T14:22:59.137
> 
> 标签：sql, database, ms-access, ms-access-2007

我有一个 Access 数据库，其中包含许多表和数千条记录，如果有人更改其中的任何数据、任何行，甚至只有一个单元格，有没有办法知道哪些特定行或单元格已更改Access 数据库，任何属性还是我应该使用任何触发器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:18:39.740

几年前，我在使用 MSSQL DB 时遇到了类似的问题，我似乎记得 ACCESS (MDB) 和 SQL (MDF) 数据库都没有天生支持这一点。如果我没记错的话，您将不得不采用以下原则：

1) 交易数据不应该被修改，只能参考历史记录，新记录包含改变的值。我从三个角度看：

*   我有一个名为 PrecursorRecId 的列，其中包含与更新相关的最新记录的 record_id。
*   保存的另一列和 Context_ID 下，所有相关记录都通过一个公共值链接，该公共值是 AuditTxnContext 表的键 Id 列。
*   记录的 TxnDate（非常合乎逻辑）

2) 主数据记录也没有改变，但每条记录都有一个 EffectiveFromDate 和 EffectiveToDate，其中具有 NULL EffectiveToDate 的记录被认为是最新的。根据表的敏感性，MaterData 记录的创建伴随着审计条目记录。同样，有一个 RecordCreatedDateTime 不会自动匹配 EffectiveFromDate 标记。

这可能会帮助您继续前进，但对您现有的数据没有太多帮助。我也不太清楚你在做什么，所以我的意见相当笼统。我希望它有任何帮助。如果我错了，我会欢迎任何人的意见，这就是我们应对挑战的方式。

如果您仍在处理它，请告诉我更多信息。如果没有，也许关闭你的问题。

干杯

苹果电脑

# ios - 是否有适用于 iOS 的可执行打包程序（如 UPX）？

> ID：10193106
> 
> 赞同：3
> 
> 时间：2012-04-17T14:23:36.613
> 
> 标签：ios, compression, executable, packing, upx

就是想。或者在技术上甚至不可能给我写信，例如因为 iOS 可能会阻止跳转到解压代码所在的区域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:25:11.327

您不能使用它，iOS 不允许您创建可执行页面或从文件运行自定义二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:42:25.173

诸如 UPX 之类的解压器需要将解压后的映像放在某个地方。如果将其放在内存中，CPU 需要开始执行映像中的指令，之前将其视为数据。IIRC，iOS 不允许执行数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:58:03.930

据我所知，编译后的可执行二进制文件无法打包，因为它必须使用 Xcode 和工具进行签名。将签名代码部署到 iOS 设备后，不能以任何方式对其进行修改（只有操作系统可以将其加载到与 RAM 不同的位置）。

您可以尝试打包资源文件并以不同的方式加载它们。

# jsf - 欢迎文件忽略安全约束

> ID：10193112
> 
> 赞同：3
> 
> 时间：2012-04-17T14:23:57.627
> 
> 标签：jsf, servlets, security-constraint, welcome-file

我的**web.xml**：

```
 <context-param>
            <param-name>javax.faces.PROJECT_STAGE</param-name>
            <param-value>Development</param-value>
        </context-param>

        <welcome-file-list>
            <welcome-file>/secured/secure.xhtml</welcome-file>
        </welcome-file-list>

        <servlet>
            <servlet-name>Faces Servlet</servlet-name>
            <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>*.xhtml</url-pattern>
        </servlet-mapping>

        <context-param>
            <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
            <param-value>true</param-value>
        </context-param> 
    <security-constraint>
        <web-resource-collection>
          <web-resource-name>Restricted</web-resource-name>
          <url-pattern>/secured/*</url-pattern>
          <http-method>GET</http-method>
          <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
          <role-name>ADMIN</role-name>
        </auth-constraint>
      </security-constraint>
<login-config>
     <auth-method>FORM</auth-method>
     <realm-name>jdbc-realm</realm-name>
     <form-login-config>
       <form-login-page>/public/login.xhtml</form-login-page>
       <form-error-page>/public/error.xhtml</form-error-page>
     </form-login-config>
   </login-config> 
```

我希望我的网络应用程序将未经授权的用户重定向到登录页面。有趣的是我有这个工作，但我做了一些愚蠢的改变，现在访问`localhost:8080`时我总是看到secure.xhtml，即使没有登录。`localhost:8080/secured/secure.xhtml`重定向很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T14:37:25.293

您没有`<welcome-file>`完全正确使用。它应该代表在请求文件夹时需要提供的文件的唯一文件名，而与请求的文件夹无关（根目录`/`、或`/public/`或`/secured/`等）。

欢迎文件由内部前锋提供，如[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29). 内部转发**不会**触发安全约束。您需要改为发送重定向。

将 更改`<welcome-file>`为更合理的默认值，例如`index.xhtml`.

```
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list> 
```

并在 webapp 的根目录中创建一个，例如`/index.xhtml`. 如果您需要将*每个*请求重定向`/index.xhtml`到`/secured/secure.xhtml`，那么基本上有两种方法：

1.  在方法[`Filter`](https://stackoverflow.com/tags/servlet-filters/info)的 URL 模式上映射 a`/index.xhtml`并调用。例如[`response.sendRedirect("secured/secure.xhtml")`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28%29)`doFilter()`

    ```
    @WebFilter("/index.xhtml")
    public class IndexFilter implements Filter {

        @Override
        public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
            HttpServletResponse response = (HttpServletResponse) res;
            response.sendRedirect("secured/secure.xhtml"));
        }

        // ...
    } 
    ```

2.  将 a 放入`<f:event type="preRenderView">`其中`/index.xhtml`调用一个支持 bean 方法，该方法又执行一个[`externalContext.redirect("secured/secure.xhtml")`](http://docs.oracle.com/javaee/5/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29). 例如

    ```
    <f:event type="preRenderView" listener="#{indexBean.redirect}" /> 
    ```

    和

    ```
    @ManagedBean
    @ApplicationScoped
    public class IndexBean {

        public void redirect() throws IOException {
            FacesContext.getCurrentInstance().getExternalContext().redirect("secured/secure.xhtml");
        }

    } 
    ```

# r - 使用 R 从包含所有事件及其时间戳的数据框中计算每天的总事件

> ID：10193113
> 
> 赞同：3
> 
> 时间：2012-04-17T14:24:06.550
> 
> 标签：r

我有一个`df`包含“消息”的数据框。每一行都是一条消息。每条消息都有一个`df$messagedate`以 POSIXct 格式调用的时间戳`%Y-%m-%d %H:%M:%S`。例子：

```
> head(df)
messageid   user.id    message.date         
123         999       2011-07-17 17:54:27
456         888       2011-07-19 16:56:50 
```

（这是`dput()`上面的 'ed 版本）：

```
df <- structure(list(messageid = c(123L, 456L), user.id = c(999L, 888L), 
      message.date = structure(c(1310950467, 1311119810), class = c("POSIXct", 
      "POSIXt"), tzone = "")), .Names = c("messageid", "user.id", 
      "message.date"), row.names = c(NA, -2L), class = "data.frame") 
```

如何创建包含每天消息总数的数据框？例子：

```
day                   message.count 
2011-07-17             1
2011-07-18             0
2011-07-19             1 
```

而不是不包括没有消息的日期，我想确保`message.count`那些日子的设置为零。

到目前为止我所做的：我通过以下方式提取了日历日部分`message.date`：

```
df$calendar.day<-as.POSIXct(strptime(substr(df$message.date,1,10),"%Y-%m-%d",tz="CST6CDT"))
> head(df$calendar.day)
[1] "2011-07-17 CDT" "2011-07-18 CDT" "2011-07-19 CDT" 
```

从那里我可以生成日期范围内每个日历日期的列表： daterange <- seq(min(df$calendar.day), max(df$calendar.day), by="day")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:58:31.510

这是一个相当简单的解决方案，用于`sapply()`计算日志跨越的每个日期的消息数。

```
countMessages <- function(timeStamps) {
    Dates <- as.Date(strftime(df$message.date, "%Y-%m-%d"))
    allDates <- seq(from = min(Dates), to = max(Dates), by = "day")
    message.count <- sapply(allDates, FUN = function(X) sum(Dates == X))
    data.frame(day = allDates, message.count = message.count)
}

countMessages(df$message.date)
#          day message.count
# 1 2011-07-17             1
# 2 2011-07-18             0
# 3 2011-07-19             1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:02:23.860

您应该能够在 table() 函数上使用 as.data.frame 将表格结果强制转换为数据框。例如：

```
test_data <- data.frame(date=c("March","April","April","May"),messageid=c(1,2,3,4),userid=c(55,33,1,56))
print(as.data.frame(table(test_data[1]))) 
```

结果是：

```
 Var1 Freq
1 April    2
2 March    1
3   May    1 
```

要添加具有零消息的日期，令我震惊的是，您可以生成适用于您的项目的所有日期的向量（例如，如果文件涵盖一整年），然后将该向量与数据框进行比较使用 table 语句创建。您只需将它们合并在一起，然后将 0 分配给那些 NA。

例如：

```
months <- c("January","February","March","April","May","June")
full <- merge(counts,months,by=1,all=TRUE) 
```

显然，在这种情况下，数据框的顺序会很奇怪，但是如果您创建一个 POSIX 向量，这应该不是问题。

# mysql - MYSQL 和规范化：如何处理大量可选字段？

> ID：10193121
> 
> 赞同：4
> 
> 时间：2012-04-17T14:24:52.003
> 
> 标签：mysql, normalization

我有一个个人资料页面，上面有大约 20 个可选字段。为了保持规范化，我必须创建 20 个不同的表，然后在其中进行 20 个查询`JOINS`。这对我来说似乎有点过头了。

这是最好的方法吗？

你建议我保持正常化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:41:48.363

做到这一点的一个好方法（虽然有点混乱，除非你知道发生了什么）是使用相同的设计 wordpress 使用 - 据我所知，它被称为实体属性值（感谢@Matt Fenwick）。[https://stackoverflow.com/tags/eav/info](https://stackoverflow.com/tags/eav/info)

基本的想法是`INNER JOIN`，你有两张桌子，而不是你的 20 张桌子来存储零碎的东西。一个存储您的实体（wordpress 案例中的一个帖子），第二个存储您所有的零碎物品 - 或 WP 所指的元数据。您不必为每个数据点设置一列，而是有一列用于名称，一列用于值，一列用于该属性适用的实体的 ID。

通过这种方式，您可以节省大量 SQL、扩展过程中的麻烦以及开始构建它所需的时间。如果您需要满足另一个属性，您只需将其与其余部分一起放入其中 - 无需破解模式。

关于 WP 数据库布局的更多细节（这里我主要考虑 wp_posts 和 wp_postmeta 表）：[http ://codex.wordpress.org/Database_Description](http://codex.wordpress.org/Database_Description)

所以一个例子可能是（伪代码，对不起）：

```
table: yourEntity
entityID  int, primary key, auto increment
title     varchar

table: yourEntityMeta
entityID  int, non-unique key
name      text
value     text 
```

通过这种方式，您可以为每个实体拥有任意数量的属性，而对未使用的具有`NULL`值的列和需要连接的 18 个表没有任何限制或性能问题。

希望这可以帮助

注意：其中一个问题（@ypercube 在评论中指出）是使用这意味着您不能为每个属性指定数据类型，即日期属性将存储为文本，布尔值或整数也是如此。您也无法使用外键链接到有效值表（感谢@Catcall）。在沿着这条路线走之前，您需要仔细考虑这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:28:48.837

我只会对可选字段使用可为空的列。该表会变得非常大，但是如此多的连接只会降低您的性能，如果这些字段属于一个对象并且将一起更新，我找不到应该规范化这些字段的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:28:39.273

如果选项字段是常量，请考虑使用 ENUM（用于 2-20 个选项），但是这种方法有其自身的缺陷。

如果您主要关心的是数据库规范化，那么即使您有 20 个选项字段，您也应该为每个选项字段提供单独的“查找”表，这样您就不会存储重复数据。

此外，如果您决定在将来更改选项，它会使您的表在将来更容易维护。

JOIN 语句还不错，MySQL 一次查询最多可以支持 61 个表。我已经在我的[这个问题中](https://stackoverflow.com/questions/10154466/mysql-is-there-a-limit-to-innerjoin)探讨了这个话题。

# x-cart - 使用 xcart 是否可以使用谷歌分析跟踪成功购买？

> ID：10193128
> 
> 赞同：0
> 
> 时间：2012-04-17T14:25:05.277
> 
> 标签：x-cart

使用 x-cart，是否可以使用 Google 分析跟踪成功的购买？如果是这样，这是通过管理面板还是通过 php 模板文件完成的？

我需要将谷歌分析目标代码插入到与其他人不同的成功页面中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T10:10:24.133

使用 X-Cart 非常容易。请参阅 [http://help.x-cart.com/index.php?title=X-Cart:Google_Analytics](http://help.x-cart.com/index.php?title=X-Cart:Google_Analytics)

# r - 在模运算之后选择特定值

> ID：10193130
> 
> 赞同：1
> 
> 时间：2012-04-17T14:25:12.077
> 
> 标签：r, mathematical-expressions

我有一个向量`test <- c(1:90)`（在每日时间步长中大约代表 3 个月），我想在模型运行期间仅在每个月的第 10 天到第 20 天之间为变量*赋值*：

```
//model code

if(month-day>10 && month-day<20)
{
    parameter <- 10
} else {
    parameter <- 5
} 
```

通过找到模数`test%%30`（

```
> test%%30
[1] 1 2 3 4 [...] 27 28 29 0 1 2 3 ... 
```

我刚刚遇到了如何获得我想要的值的难题（即在这个简单的例子中，我想要`test[11:19]`,`test[41:49]`和`test[71:79]`，但是必须有一种方法可以使用一些我无法想到的聪明的数学运算符来获取这些值片刻...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:05:07.167

要转换为 1:30 的块，请使用：

```
(test-1)%%30+1 
```

如果您想获得 10:19 的数字（从 10 开始的 10 块），您可以使用：

```
test[(((test-1)%%30+1)%/%10)==1] 
```

但是，当您想要从 11 开始的 9 块时，您需要多考虑模数后的移位：

```
test[(((test-1)%%30-1)%/%9)==1]
 [1] 11 12 13 14 15 16 17 18 19 41 42 43 44 45 46 47 48 49 71 72 73 74 75 76 77
[26] 78 79 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:42:37.130

```
x <- 1:90
param <- rep(5, length(x))
param[x%%30 > 10 & x%%30 < 20] <- 10
#Double check output 
cbind(x, param) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:50:28.873

为了扩展joran的答案，这就是我要做的：

```
test <- c(1:90)
days <- test%%30
positions <- test[days %in% 10:20] 
```

这将返回一个向量，其中`test`每天的位置在 10 到 20 之间。

不过，不完全确定你为什么需要这个职位；你的代码不能只使用：

```
for(x in 1:90) {
    if(days[x]>=10 && days[x]<=20) {
        parameter <-  10
    } else {
        parameter <- 5
    }
} 
```

或者我在这里错过了什么？

编辑添加：哎呀，我应该注意到在这种情况下，参数可能更好地用作向量 - 我只是没有这样编写代码。

# objective-c - 使 UITableView 的第一个单元格与其他所有单元格不同

> ID：10193131
> 
> 赞同：0
> 
> 时间：2012-04-17T14:25:12.363
> 
> 标签：objective-c, ios, uitableview

我有一个表格视图，一切运行良好，但现在我想让第一个单元格成为其余单元格的“解锁”按钮。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [currentPack count] + 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Row is %i", indexPath.row);

    if(indexPath.row == 0)
    {
        SoundCell *cell = [SoundCell dequeOrCreateInTable:soundsTable];
        cell._NameLabel.text = @"Unlock This Pack;
        [cell._startButton setAlpha:0.0];

        return cell
    }
    else
    {
        SoundCell *cell = [SoundCell dequeOrCreateInTable:soundsTable];
        cell._NameLabel.text = [currentPack objectAtIndex:indexPath.row - 1];

        return cell
    }
} 
```

现在它有点工作了，第一个单元格与其他单元格不同，看起来完全一样。我的问题是，由于某种原因，后来的一些单元格使用

```
[cell._startButton setAlpha:0.0]; 
```

即使 indexPath.row 在制作时不为 0 也是如此。它不会发生在每个单元格上，只是间歇性的，偶尔如果我上下滚动表格很多，那么其他单元格也会出现这个问题。在所有其他方面，表格都可以正常工作，选择一个单元格会触发正确的响应等。有谁知道可能导致这种情况的原因？最初实现起来似乎很简单......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:27:04.593

为这两种细胞类型使用不同的重用标识符，以便它们在重用时不会混合。

或者将以下行添加到其余行：

```
[cell._startButton setAlpha:1.0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:29:18.967

您受到单元缓存的影响。如果您要在某些单元格上调用 setAlpha，请将其设置在所有单元格上，这样您就不会得到来自现有单元格的陈旧值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:28:33.490

我建议创建一个单独的 SoundCell 实例并将其存储为 i-var。只需配置一次并返回行索引 0。对于其余行，返回可重复使用的“通常”单元格。

# c++ - 从函数返回多维向量用于main，如何正确使用？

> ID：10193136
> 
> 赞同：2
> 
> 时间：2012-04-17T14:25:30.513
> 
> 标签：c++, function, vector, return

我发现使用向量是实现我需要做的最好的方法，但是我现在需要澄清一下。

我需要在外部 CPP 的函数中生成一个多维数组，然后在 main.xml 中使其可用。

主文件

```
// include vector, using namespace etc.
function(2, 4);

// how to access vector elements here - vectorname[2][4]->classvar;  ? 
```

向量.cpp

```
void function(value1, value2){
// class def
int value1 = value1;
int value2 = value2;
 vector<int>(value1)<vector<Class>(value2) vectorname>; // incorrect syntax? or new * vector ?

return vectorname; // ?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:27:46.800

with 的语法`vector`需要一点时间来适应。一个 2D 向量`int`看起来像这样：

```
vector<vector<int> > myVector; 
```

如果您想设置特定尺寸，请使用具有大小的构造函数：

```
vector<vector<int> > myVector(10, vector<int>(5)); 
```

这会产生一个`10x5`零向量。你可以这样做

```
vector<vector<int> > myVector(10, vector<int>(5, -1)); 
```

为您的元素提供初始值（`-1`在本例中）。

根据经验，您希望向量通过引用传递并按值返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:27:10.570

如果你想要你的类的多维向量，它应该是：

```
vector<vector<Class> > vectorname;
return vectorname; 
```

函数的签名应该是：

```
vector<vector<Class> > function(value1, value2) 
```

以及以下内容：

```
int value1 = value1;
int value2 = value2; 
```

是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:01:49.553

您可以像这样声明一个多维向量：

```
std::vector< std::vector<int> > v; 
```

您还可以使用 typedef 使代码更易于遵循：

```
typedef std::vector<int> int_vector;
typedef std::vector<int_vector> int_matrix; 
```

像第一个示例一样编写时，应避免一个接一个地编写右尖括号，以免编译器将其与`>>`运算符混淆。

您还应该避免从函数返回这样的对象，因为此操作涉及复制整个向量。相反，您可以通过引用传递向量，例如：

```
void process(int_matrix& m)
{
    // m.push_back(...)
}

int main(int argc, char* argv[])
{
    int_matrix m;

    // Initialize m here.
    // ...

    // Call your methods.
    process(m);

    // ...

    return 0;
} 
```

编辑：

您可以像这样构造您的代码：

```
// int_matrix.hpp

#ifndef _INT_MATRIX_HPP
#define _INT_MATRIX_HPP

#include <vector>

typedef std::vector<int> int_vector;
typedef std::vector<int_vector> int_matrix;

extern void process(int_matrix& m);

#endif // ~_INT_MATRIX_HPP 
```

.

```
// int_matrix.cpp

#include "int_matrix.hpp"

void process(int_matrix& m)
{
    m.clear();
    // ...
} 
```

.

```
// main.cpp

#include "int_matrix.hpp"
#include <iostream>

int main(int argc, char* argv[])
{
    int_matrix m1;
    int_matrix m2;

    // ...

    process(m1);
    process(m2);

    // ...

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T14:46:26.363

你可以这样做：

```
 1 #include <iostream>
  2 #include <vector>
  3 using namespace std;
  4 
  5 class Test {
  6 public:
  7     Test()
  8     {
  9         cout << "Test()" << endl;
 10     }
 11     ~Test()
 12     {
 13         cout << "~Test()" << endl;
 14     }
 15 };
 16 typedef Test classvar_t;
 17 typedef vector<classvar_t> d2_t;
 18 typedef vector<d2_t > md_vector_t;
 19 md_vector_t foo(int value1, int value2)
 20 {
 21     return md_vector_t(value1, d2_t(value2));
 22 }
 23 
 24 int main()
 25 {
 26     md_vector_t v = foo(3, 4);
 27     cout << "--------" << endl;
 28     return 0;
 29 } 
```

# xcode - cocoa:设置窗口在屏幕上的位置

> ID：10193138
> 
> 赞同：0
> 
> 时间：2012-04-17T14:25:34.590
> 
> 标签：xcode, macos, cocoa

```
 [self setFrame:CGRectMake(110.0, 0, 100, 100) display:NO]; 
```

写定位没有效果。求助

我想设置窗口位置。 x 和 y 没用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:40:29.270

你试过`[self setFrame:CGRectMake(110.0, 0, 100, 100) display:YES];`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:47:42.400

如果您只想设置窗口的 x 和 y 位置，您需要使用`setFrameOrigin`.

**例如：**

```
- (void)awakeFromNib
{
    [windowOutlet setFrameOrigin:NSMakePoint(0,0)];
} 
```

** 不要忘记**IBOutlet**你的窗口。

# watir - 是否有方法可以在 watir-webdriver 中停止页面加载

> ID：10193140
> 
> 赞同：1
> 
> 时间：2012-04-17T14:25:38.480
> 
> 标签：watir, watir-webdriver

最近，在 watir-webdriver 对我的 Web 应用程序测试的测试中，当单击链接并打开一个新页面时。但是新的会在很长一段时间内不断加载。有没有办法阻止它并让 browser.ready_state = 'complete' 继续跟随它的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:29:05.203

你能提供更多信息吗？如果是超时，则超时类起作用。

```
begin
  Timeout::timeout(10) do
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:56:03.220

查看您的代码会很有帮助，但这里有一个尝试：

```
@browser.my_button.when_present.click 
```

将`when_present`等待异步进程加载元素，然后您可以在加载后立即执行操作。无需等待或睡眠。

我在[这里](http://watirbender.blogspot.com/2012/04/perfidy-of-ajax-and-surprise-attacks.html)做了一个更详细的帖子，你也可以参考[RDoc](http://jarib.github.com/watir-webdriver/doc/Watir/Element.html#when_present-instance_method)了解更多信息。

# vb.net - Google + OAuth 和/或 DotNetOpenAuth 获取联系人列表 - VB.net

> ID：10193146
> 
> 赞同：0
> 
> 时间：2012-04-17T14:26:16.357
> 
> 标签：vb.net, oauth, dotnetopenauth

我可能在这里遗漏了一些非常明显的东西，所以这就是为什么我要问我的问题……希望有人能看到我遗漏的东西。上周我刚刚第一次了解了 OAuth，我正在尝试使用它（在这种情况下）在某人登录并授权后从他们那里提取联系人列表。

这是我首先尝试的，使用 Google .NET 库：

```
 Sub InviteGmailContactsOld()

    Call google_api.GetClientCredentials(Vars.Server_name)
    Dim Input_URL As String = google_api.Token_Request_URL & "?scope=" & OverrideEncode("https://www.google.com/m8/feeds/") & "&oauth_callback=" & OverrideEncode(Vars.Site_Root & "my-profile/manage-connections/invite-connections/google/")
    Dim Input_URI As New Uri(Input_URL)
    Dim Authenticator As OAuth3LeggedAuthenticator = New OAuth3LeggedAuthenticator("Politistream API", google_api.Client_ID, google_api.Client_Secret, String.Empty, String.Empty)
    Dim Auth_Request As WebRequest = Authenticator.CreateHttpWebRequest("GET", Input_URI)
    Dim Final_Request As WebRequest = WebRequest.Create(Input_URI)
    Dim Auth_Headers As String = Auth_Request.Headers.ToString()
    Final_Request.Headers.Add(Auth_Headers)
    Final_Request.Method = "GET"
    Response.Write(Final_Request.Headers.ToString() & " <br />" & Final_Request.RequestUri.ToString & "<br />")
    Dim Auth_Response As String = Common.WebRequestToStringResponse(Final_Request)

End Sub 
```

尝试了几种变体，无论我做什么，我从谷歌得到的只是 400 Bad Request。

然后我尝试了 DotNetOpenAuth：

```
 Sub InviteGmailContacts()
    ' GMail uses openID because OAuth doesn't work properly.

    Dim openId As New OpenIdRelyingParty
    Call google_api.GetClientCredentials(Vars.Server_name)
    Dim New_URL As UriBuilder = New UriBuilder(Request.Url.ToString)
    Dim Auth_Request As IAuthenticationRequest = openId.CreateRequest(google_api.OpenID_Login_URL, New_URL.Uri, New_URL.Uri)
    Auth_Request.RedirectToProvider()

End Sub 
```

这行得通，我能够取回声称的标识符。我不知道的问题是我完全不知道我应该用它做什么，而且我在任何地方都找不到任何我可以遵循的东西，或多或少地自己做。

理想情况下，我正在寻找的是一个不一定完整的代码示例，但至少足够连贯，我可以到达我想去的地方。如果做不到这一点，一个比正常水平低三个阴影的解释就足够了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T22:00:45.787

您将 OAuth（在您的第一个代码片段中与 Google 一起使用）与 OpenID（在您的第二个代码片段中）混淆了。正如您所注意到的，OpenID 为您提供了一个“已声明的标识符”，它不适合下载联系人——它有助于在用户稍后返回时识别用户。OpenID 用于*身份验证*，而 OAuth 用于*授权*。

由于您要访问 Google 通讯录，这是一种*授权*方案，因此您需要 OAuth。DotNetOpenAuth 也执行 OAuth，实际上有一个用于下载联系人的示例（尽管在 C# 中）。

[下载 dotnetopenauth](https://sourceforge.net/projects/dnoa/files/latest/download)并查看 OAuthConsumerWpf 示例。它有一个标签，用于演示下载 Google 通讯录。它使用 DotNetOpenAuth.ApplicationBlock 示例（名为 的类`GoogleConsumer`）中的代码，希望能启发您在应用程序中可以做什么。

# c# - 使用 devexpress gridcontrol 的最佳方式

> ID：10193149
> 
> 赞同：0
> 
> 时间：2012-04-17T14:26:33.343
> 
> 标签：c#, winforms, devexpress

我正在将 devexpress 用于 Windows 窗体项目，我来自 Web 开发（经典的 asp.net 应用程序），我需要知道我所做的是否正确。首先，我使用 de gridcontrol 来制作 CRUD，但存在更好的插入/删除行的方法吗？我正在使用列表，在其上添加/删除行并将数据源更新到网格视图。

对不起英语不好:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:15:46.937

更好的方法很大程度上取决于您的任务。无论如何，您可以从这里开始：

*   [XtraGrid 概念](http://help.devexpress.com/#WindowsForms/CustomDocument3458)
*   [XtraGrid 示例](http://help.devexpress.com/#WindowsForms/CustomDocument3000)

PS 我建议您使用[DevExpress 支持中心](http://devexpress.com/Support/Center/)获得有关使用 DevExpress 产品的官方和有保证的帮助。请注意，在评估期间（30 天），完全支持是免费的

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-07T06:48:15.437

在这种情况下更新数据的最准确方法是使用 GridView.RowUpdated 事件。只需处理此事件并仅更新必要的行。这种方法对您有用吗？我期待着您的回复。

[https://www.devexpress.com/Support/Center/Question/Details/Q478681/best-way-to-update-a-gridview](https://www.devexpress.com/Support/Center/Question/Details/Q478681/best-way-to-update-a-gridview)

# mysql - ALTER TABLE 添加约束

> ID：10193153
> 
> 赞同：34
> 
> 时间：2012-04-17T14:26:45.710
> 
> 标签：mysql, sql, ddl, alter-table

表用户和属性已正确创建

```
CREATE TABLE Properties
(
    ID int AUTO_INCREMENT,
    language int,
    stonecolor int,
    gamefield int,
    UserID int,
    PRIMARY KEY(ID),
    FOREIGN KEY(language) REFERENCES Language(ID),
    FOREIGN KEY(stonecolor) REFERENCES StoneColor(ID),
    FOREIGN KEY(gamefield) REFERENCES GameField(ID)
) ENGINE = INNODB;

CREATE TABLE User
(
    ID int AUTO_INCREMENT,
    vorname varchar(30) NOT NULL,
    name varchar(30) NOT NULL,
    email varchar(40) NOT NULL,
    password varchar(40) NOT NULL,
    nickname varchar(15) NOT NULL,
    score int,
    isadmin int DEFAULT 0,
    gamesPlayed int,
    properties int NOT NULL,
    PRIMARY KEY(ID),
    UNIQUE (email),
    UNIQUE (nickname)

) ENGINE = INNODB; 
```

但`ALTER TABLE User`不起作用。

```
ALTER TABLE User 
(
    ADD CONSTRAINT userPropertie
    FOREIGN KEY(properties)
    REFERENCES Properties(ID)
) 
```

想不通为什么？

我用这个作为参考[http://www.w3schools.com/sql/sql_foreignkey.asp](http://www.w3schools.com/sql/sql_foreignkey.asp)

> 错误 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '( ADD CONSTRAINT userPropertie FOREIGN KEY(properties) REFERENCES Properties(' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-17T14:28:39.290

省略括号：

```
ALTER TABLE User 
    ADD CONSTRAINT userProperties
    FOREIGN KEY(properties)
    REFERENCES Properties(ID) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-03T20:31:24.827

```
ALTER TABLE `User`
ADD CONSTRAINT `user_properties_foreign`
FOREIGN KEY (`properties`)
REFERENCES `Properties` (`ID`)
ON DELETE NO ACTION
ON UPDATE NO ACTION; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-30T05:49:46.083

```
alter table User 
    add constraint userProperties
    foreign key (properties)
    references Properties(ID) 
```

# hibernate - 休眠不一致：会话返回旧值

> ID：10193159
> 
> 赞同：4
> 
> 时间：2012-04-17T14:27:06.390
> 
> 标签：hibernate, jsf, caching, page-refresh

我在 JSF 项目后面使用 Hibernate。

在主页中，我有一个表示对象列表的数据表。

我使用 Hibernate 成功更新了对象的属性（在数据表中找到）。更新后，页面通过使用“xxx?faces-redirect=true”重定向来刷新。我重定向页面以避免“重复表单提交”类问题。

然后，如果我按 F5 几次，更新对象的旧属性值可能会返回到页面。

据我了解，这是一个休眠会话问题。因为如果我在使用它们后立即关闭每个会话，则不会发生此问题。但是，由于延迟获取策略，我无法在交易后关闭会话。

简而言之，休眠可能会带来对象的旧值，尽管它已成功更新。我怎样才能避免这样的问题？

ps：我怀疑Hibernate的缓存机制，我禁用了一级和二级缓存：

```
<property name="hibernate.cache.use_query_cache">false</property>
<property name="hibernate.use_second_level_cache">false</property> 
```

但它也没有用..

更新：@Johanna 回复后，我控制了会话实例的 id，并指出我的 HibernateUtil 类在大多数情况下返回不同的会话或打开一个新会话。这是 getSession() 方法：

```
public static Session getSession(){
    Session se = HibernateUtil.session.get();
    if(se == null)
    {
        se = sessionFactory.openSession();
        HibernateUtil.session.set(se);
    }
    return se;
} 
```

我假设一旦我有一个会话，我就会在那个会话中做所有的事情，比如列表、更新等。因为我在 getSession() 方法中进行了必要的控制。我在哪里犯错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:46:24.180

Neither use_query_cache nor use_second_level_cache can disable the first level cache. The first level cache always is on.

If you really do not want to use the first level cache, then you have to use StatelessSession instead of Session. But StatelessSession has less functionality and some of the methods you need might be missing.

If you only want to remove a few objects from the first level cache, you can use Session.evict().

Nevertheless I wonder why Hibernate presents the old value to you. This should not happen if each database entity only has one instance in the session (i. e. the instance of the object which you update is the same instance as shown in the list). If you use two different instances, then it is normal Hibernate presents the old value (and if you use two Session instances, one for the list and one for the update, then also you get the old value in the list). So perhaps you don't have to evict the object when you fix your application.

EDIT after your update: In your short codelet I can't see why you get errors if you as a single user use the application.

But generally: You use JSF, so it is probably a web project which can be used by many users.

The Hibernate Session object is not thread-save, i. e. it probably won't work if different users use it at the same time. Each user needs its own session object. So you can store the Hibernate session instance in the Http session instance (and even then sometimes you must use 'synchronized' methods (or objects) just for the case the user presses a second time on a button before the answer from the first request arrived).

2nd EDIT: I think you have the same problem as in [this question](https://stackoverflow.com/questions/10216383/dao-hibernate-and-sessions-in-web-projects).

Probably you copied your code from anywhere like the DAO of the cited question. I guess your HibernateUtil class, whose code you copied from anywhere, stores the hibernate session in a ThreadLocal object, i. e. one hibernate session is bound to one thread.

But you're doing a web project. There you should bind one Hibernate session to one user (or browser), i. e. to one Http session. But you do not know in which thread the request from one http session is processed. Thus in your solution the same Http session may get different Hibernate sessions or perhaps different Http sessions may get the same Hibernate session. This depends to your Http server.

Solution: Put the Hibernate session into the Http session (and do *not* use the ThreadLocal object). You get the Http session object with `HttpServletRequest.getSession()` and with `HttpSession.getAttribute()`/`HttpSession.setAttribute()` you can set the Hibernate session and other Http session related data.

# c++ - d3d中动态顶点缓冲区的效率和使用

> ID：10193161
> 
> 赞同：0
> 
> 时间：2012-04-17T14:27:12.903
> 
> 标签：c++, directx

我提交了一个实际上是一堆问题的问题，所以我按照要求将它们分成了自己的单独问题。

我已经阅读并使用了动态顶点缓冲区，并在运行时对其进行了操作等。但是，有人告诉我，将动态顶点缓冲区保持在绝对最小值，因为它们比静态缓冲区更容易降低性能。我还读到过，与其不断锁定和解锁以仅写入几个多边形，不如使用动态缓冲区允许您将大量顶点集中到一个缓冲区中并一次性发送它们，这显然可以提高性能。我可能希望能够不断地操纵场景中的大多数对象（不仅仅是通过旋转或缩放，而是通过单个顶点位置等），所以有什么方法可以让你拥有一个动态缓冲区必须更新或更改时必须更新，否则不必每帧都重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:49:45.067

动态缓冲区不需要每帧都重写，它只是比 GPU 更容易被 CPU 访问，以便于更新。对于不太频繁的更新，您可以使用 GPU 更容易访问的 static 以加快渲染速度，然后使用 UpdateSubResource 根据需要仅编辑一系列顶点。

# facebook - 使用 Facebook“活动插件”代码防止安全警告

> ID：10193162
> 
> 赞同：1
> 
> 时间：2012-04-17T14:27:13.003
> 
> 标签：facebook, security, warnings

我正在尝试解决 Facebook 的“活动插件”问题，当人们点击访问他们看到的有趣链接时，他们首先会收到一条 Facebook 警告，上面写着“警告，离开 Facebook……”，然后是一堆浏览器弹出窗口提醒他们注意不安全的内容或混合内容。

这很重要的原因是（在用户心中！）他们仍然在我的网站上——它是 blahblah.org，他们会“哦！那篇博客文章看起来很有趣”然后点击。当然，现实情况是，当他们点击 FB Activity 链接时，它由 FB 提供服务，而浏览器认为它是 FB ......所以我明白为什么会出现这些消息。我只是想知道我是否可以做些什么来确保它们不会出现，或者至少它们是最小的并且尽可能少地出现。

我发现一些 Facebook Connect 用户有问题，这是由他们的个人资料照片引起的。但我没有看到任何特定于“活动插件”的内容，当然 FB 信息页面也没有任何用处。

我喜欢一些建议或想法。当然，我不是唯一一个注意到这个问题的人！！

谢谢！

# python - CSV 操作

> ID：10193163
> 
> 赞同：0
> 
> 时间：2012-04-17T14:27:16.403
> 
> 标签：python

我有以下 csv 文件：

```
hindex
1
2
2
6
3
3
3
2
2 
```

我正在尝试读取该行并检查其值，但它给出了以下错误：

```
ValueError: invalid literal for int() with base 10: 'hindex' 
```

代码是：

```
cr = csv.reader(open('C:\\Users\\chatterjees\\Desktop\\data\\topic_hindex.csv', "rb"))
for row in cr:
    x=row[0]
    if(int(x)<=10):
        print x 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:28:39.787

您需要跳过第 1 行。它正在尝试将您的列标题从文件解析为 int，但由于它是一个 char 字符串，它会窒息而死。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T14:29:27.987

该代码尝试处理文件中的每一行，包括`hindex`. 您正在尝试将此字符串转换为抛出的 int `ValueError`：

要跳过第一行（包含标题），请尝试：

```
cr = csv.reader(open('C:\\Users\\chatterjees\\Desktop\\data\\topic_hindex.csv', "rb"))
for row in cr[1:]:
    x=row[0]
    if(int(x)<=10):
        print x 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T14:31:56.840

.csv 中的第一行包含无法转换为 int 的内容，因此

```
 if(int(x)<=10): 
```

以 ValueError 失败。（绝对没有必要将表达式括在（）中，顺便说一句。）

您可以跳过 .csv 的第一行，或换行 `int(x)` 到 try/catch 块中，如下所示：

```
for row in cr:
    x=row[0]
    try:
        x=int(x)
    except ValueError: # x cannot be converted to int
        continue       # so we skip this row
    if x<=10:  # no need for parens here
        print x 
```

在此处了解有关异常和处理的更多信息：http: [//docs.python.org/tutorial/errors.html](http://docs.python.org/tutorial/errors.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T14:30:14.937

第一行不能转换为整数。您可以使用块跳过所有行，如第一行`try except`：

```
cr = csv.reader(open('C:\\Users\\chatterjees\\Desktop\\data\\topic_hindex.csv', "rb"))
for row in cr:
  x=row[0]
  try:
    if int(x) <= 10:
      print x
  except ValueError:
    pass 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-06T07:24:22.117

令人惊讶的是没有人提到`csv.DictReader`，因为它确实是跳过标题行*并*以良好的字典格式获取数据的最简单方法：

```
import csv
with open('C:\\Users\\chatterjees\\Desktop\\data\\topic_hindex.csv', "rb") as f:
    cr = csv.DictReader(f)
    for row in cr:
        x = row['hindex']
        if int(x) <= 10:
            print x 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-14T20:26:10.810

这里只是另一种选择。我写了一个包装库，它也可以轻松处理这个任务。假设您已将数据保存在以下脚本所在目录中名为“topic_hindex.csv”的文件中。

```
import pyexcel

r = pyexcel.SeriesReader("topic_hindex.csv")
for row in r.rows():
    x = row[0]
    if x <= 10:
        print x 
```

或者，您可以使用过滤器：

```
import pyexcel

r = pyexcel.SeriesReader("topic_hindex.csv")
eval_func = lambda row: row[0] <= 10
r.filter(pyexcel.RowValueFilter(eval_func))
for row in r.rows():
    print row[0] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-06T07:08:51.080

这是一个仅跳过第一行和第一行的解决方案，`ValueError`如果任何其他行包含非数值，则会失败。它通过使用内置`enumerate()`函数来计算处理的行数。此外，它在使用`with`语句完成时正确关闭输入文件。

```
import csv
with open('C:\\Users\\chatterjees\\Desktop\\data\\topic_hindex.csv', 'rb') as csvFile:
    for rowNumber, row in enumerate(csv.reader(csvFile)):
        if rowNumber > 0:
            x = row[0]
            if int(x) <= 10:
                print x 
```

# css - 将页脚背景拉伸到底部：0；

> ID：10193169
> 
> 赞同：1
> 
> 时间：2012-04-17T14:27:37.950
> 
> 标签：css

我有以下问题。我网站的页脚正确放置在内容的正下方。但是我希望页脚的背景（白色）一直延伸到窗口的底部。请查看此模板：[链接已删除]。我知道如何将页脚粘贴到底部，但我希望它保持原位并移除蓝色背景间隙。

有没有可能？

我也对 javascript 解决方案持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:37:56.570

改变你`CSS` 在你的`.Footer`班级中删除`position: relative;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:42:27.137

我通过以下方式修复了它：

```
.Footer {
    margin-bottom: -182px;
}

body {
   overflow: hidden;
} 
```

# php - 如何获取所有需要访问令牌的 Facebook 数据？

> ID：10193170
> 
> 赞同：1
> 
> 时间：2012-04-17T14:27:38.890
> 
> 标签：php, codeigniter, facebook-graph-api, facebook-authentication

我正在尝试使用 facebook PHP SDK 从 facebook 获取用户数据。（我正在使用 codeigniter 开发网站）。我能够获取所有基本数据。但我无法获取那些需要访问令牌的数据。我通过解析 url 从注销 url 中获取访问令牌参数。但是那个令牌不起作用。它与主要访问令牌不同吗？

这是我的控制器文件

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class UserRegistration2 extends CI_Controller { 
function __construct() {
    parent::__construct(); 
    $this->load->model('test/Facebook_model');
}

function index() {

    $fb_data = $this->Facebook_model->get_data();

    if((!$fb_data['uid']) or (!$fb_data['me'])) {

        echo "<a href='" .$fb_data['loginUrl']. "'>Login</a>";
    }
    else {
        $params = null;
        parse_str($fb_data['logoutUrl'], $params);
        $graph_url = "https://graph.facebook.com/me/music?access_token=" . $params['access_token'];
        //$user = json_decode(file_get_contents($graph_url));

        echo "<pre>";

        print_r($fb_data);

        //print_r($user);
        //print_r($params);
        echo "</pre>";
        echo "<a href='" .$graph_url. "'>Get Music</a>";
        echo "<a href='" .$fb_data['logoutUrl']. "'>Logout</a>";

    }
}
} 
```

这是我的模型文件

```
public function __construct() {
    parent::__construct();

    $config = array(
                    'appId'  => '130090207121542',
                    'secret' => 'xxxxxxxxxxxxxxxxxxxxx',
                    'fileUpload' => true
                    );

    $this->load->library('facebook/Facebook', $config);

}

function get_data() { 
    $user = $this->facebook->getUser();
    $profile = null;
    if($user)
    {
        try {
            $profile = $this->facebook->api('/me');
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }

    $fb_data = array(
                    'me' => $profile,
                    'uid' => $user,
                    'loginUrl' => $this->facebook->getLoginUrl(
                        array(
                            'scope' => 'email,user_interests,user_birthday,publish_stream',
                            'redirect_uri' => 'http://herle.in/flutter/index.php/test/userRegistration2.html'
                        )
                    ),
                    'logoutUrl' => $this->facebook->getLogoutUrl(),
                );

    return $fb_data;
}
} 
```

**编辑：**

找到此问题的链接 [Using Facebook OAuth 2.0 - How do I fetch the access token？](https://stackoverflow.com/questions/2988236/using-facebook-oauth-2-0-how-do-i-fetch-the-access-token)

但不知道它是否会起作用。因为我不知道让 CODE (THE_CODE_YOU_GOT_FROM_THE_SERVER) 将其传递到 url。如果它可以工作，那么我怎样才能得到这个代码？

**2012 年 4 月 18 日更新**

它现在正在工作。在范围内，我没有从用户那里获得“user_likes”的许可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T11:04:45.533

进行了更改。它现在正在工作

这是我的控制器文件

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class UserRegistration2 extends CI_Controller { 
function __construct() {
    parent::__construct(); 
    $this->load->model('test/Facebook_model');
}

function index() {

    $fb_data = $this->Facebook_model->get_data();

    if((!$fb_data['uid']) or (!$fb_data['me'])) {

        echo "<a href='" .$fb_data['loginUrl']. "'>Login</a>";
    }
    else {
        $params = null;
        parse_str($fb_data['logoutUrl'], $params);
        $graph_url = "https://graph.facebook.com/me/music?access_token=" . $params['access_token'];
        //$user = json_decode(file_get_contents($graph_url));

        echo "<pre>";

        print_r($fb_data);

        //print_r($user);
        //print_r($params);
        echo "</pre>";
        echo "<a href='" .$graph_url. "'>Get Music</a>";
        echo "<a href='" .$fb_data['logoutUrl']. "'>Logout</a>";

    }
}
} 
```

这是我的模型文件

```
public function __construct() {
    parent::__construct();

    $config = array(
                    'appId'  => '130090207121542',
                    'secret' => 'xxxxxxxxxxxxxxxxxxxxx',
                    'fileUpload' => true
                    );

    $this->load->library('facebook/Facebook', $config);

}

function get_data() { 
    $user = $this->facebook->getUser();
    $profile = null;
    if($user)
    {
        try {
            $profile = $this->facebook->api('/me');
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }

    $fb_data = array(
                    'me' => $profile,
                    'uid' => $user,
                    'loginUrl' => $this->facebook->getLoginUrl(
                        array(
                            'scope' => 'email,user_interests,user_birthday,publish_stream,user_likes',
                            'redirect_uri' => 'http://herle.in/flutter/index.php/test/userRegistration2.html'
                        )
                    ),
                    'logoutUrl' => $this->facebook->getLogoutUrl(),
                );

    return $fb_data;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:36:05.900

这就是我请求用户和应用程序 access_tokens 的方式。我将在此处编辑所需的任何其他答案。

* * *

```
$access_token = $_SESSION['fb_135669679827333_access_token']; 
// replace app id, gets user token 
```

* * *

```
// gets app access token in the form of access_token=xxxxxxxxxxxxxx
$app_access_token = GetCH();
function GetCH(){
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/oauth/access_token?client_id=135669679827333&client_secret=xxxxxxxxxxxxxxxxxxxx&grant_type=client_credentials");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
//curl_setopt($ch,CURLOPT_CONNECTTIMEOUT_MS,20000);
if(substr($url,0,8)=='https://'){
    // The following ensures SSL always works. A little detail:
    // SSL does two things at once:
    //  1\. it encrypts communication
    //  2\. it ensures the target party is who it claims to be.
    // In short, if the following code is allowed, CURL won't check if the 
    // certificate is known and valid, however, it still encrypts communication.
    curl_setopt($ch,CURLOPT_HTTPAUTH,CURLAUTH_ANY);
    curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);
}
$sendCH = curl_exec($ch);
curl_close($ch);
return $sendCH;
}; 
```

* * *

更多信息：要检索用户令牌，您首先必须至少拥有用户的基本权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:51:37.533

```
 public function __construct() {
        parent::__construct();

        $config = array(
                        'appId'  => '130090207121542',
                        'secret' => 'xxxxxxxxxxxxxxxxxxxxx',
                        'fileUpload' => true
                        );

        $this->load->library('facebook/Facebook', $config);

    }
   $access_token = $_SESSION['fb_130090207121542_access_token'];
    function get_data() { 
        $user = $this->facebook->getUser();
        $profile = null;
        if($user)
        {
            try {
                $profile = $this->facebook->api('/me');

    // replace app id, gets user token 
            } catch (FacebookApiException $e) {
                error_log($e);
                $user = null;
            }
        }

        $fb_data = array(
                        'me' => $profile,
                        'uid' => $user,
                        'loginUrl' => $this->facebook->getLoginUrl(
                            array(
                                'scope' => 'email,user_interests,user_birthday,publish_stream',
                                'redirect_uri' => 'http://herle.in/flutter/index.php/test/userRegistration2.html'
                            )
                        ),
                        'logoutUrl' => $this->facebook->getLogoutUrl(),
                    );

        return $fb_data;
    }

    //
    // gets app access token in the form of access_token=xxxxxxxxxxxxxx
    $app_access_token = GetCH();
    function GetCH(){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/oauth/access_token?client_id=135669679827333&client_secret=xxxxxxxxxxxxxxxxxxxx&grant_type=client_credentials");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    //curl_setopt($ch,CURLOPT_CONNECTTIMEOUT_MS,20000);
    if(substr($url,0,8)=='https://'){
        // The following ensures SSL always works. A little detail:
        // SSL does two things at once:
        //  1\. it encrypts communication
        //  2\. it ensures the target party is who it claims to be.
        // In short, if the following code is allowed, CURL won't check if the 
        // certificate is known and valid, however, it still encrypts communication.
        curl_setopt($ch,CURLOPT_HTTPAUTH,CURLAUTH_ANY);
        curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);
    }
    $sendCH = curl_exec($ch);
    curl_close($ch);
    return $sendCH;
    }; 
```

* * *

```
class UserRegistration2 extends CI_Controller { 
function __construct() {
    parent::__construct(); 
    $this->load->model('test/Facebook_model');
}

function index() {

    $fb_data = $this->Facebook_model->get_data();

    if((!$fb_data['uid']) or (!$fb_data['me'])) {

        echo "<a href='" .$fb_data['loginUrl']. "'>Login</a>";
    }
    else {
        $params = null;
        parse_str($fb_data['logoutUrl'], $params);
        $graph_url = "https://graph.facebook.com/me/music?access_token=" . $access_token;
        //$user = json_decode(file_get_contents($graph_url));

        echo "<pre>";

        print_r($fb_data);

        //print_r($user);
        //print_r($params);
        echo "</pre>";
        echo "<a href='" .$graph_url. "'>Get Music</a>";
        echo "<a href='" .$fb_data['logoutUrl']. "?access_token=" .$access_token. "'>Logout</a>";

    }
}
} 
```

# c# - wpf 中的 ViewModel 是否必要？

> ID：10193171
> 
> 赞同：0
> 
> 时间：2012-04-17T14:27:46.240
> 
> 标签：c#, wpf

这是wpf的新手问题。wpf 中的 ViewModel 有用吗？有一个驱动器，我可以在其中转换所有控件以遵循 MVVM 架构来创建视图模型。我并不真正理解或理解为什么花时间重构代码创建视图模型很有用......所以我问你们是否值得。基本上，这个 mvvm 架构有什么用？

好的，我知道我应该做一个谷歌搜索，但我是 wpf 的初级程序员，所以当我在谷歌上阅读关于 MVVM 的文章时，它让我对为什么这很重要有一个概念性的想法，但恐怕我不完全理解从实际的角度来看，我想这个概念......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:30:23.387

MVVM 不是必需的，但如果您的应用程序变得更复杂并且当您想要在视图和应用程序逻辑之间进行清晰分离时，它会很有帮助。

除非您的应用程序非常简单，否则我建议您使用 MVVM。

# objective-c - iOS ViewController 属性在推送新控制器并在导航控制器中再次返回后消失

> ID：10193173
> 
> 赞同：0
> 
> 时间：2012-04-17T14:27:48.167
> 
> 标签：objective-c, ios

我找不到这个问题的任何线程，所以我在这里问你。

如果有人可以帮助我，我会非常高兴。

我有一个导航控制器，我正在将 TableViewController 推入其中。我的问题是，当我单击“后退”按钮时，我以前的 tableViewcontroller 会出现以前的数据，但是 dataArray 属性（我的表的数据源）是空的。

我的代码：

```
 @interface patientViewControllerSearch : UIViewController <UITableViewDelegate, UITableViewDataSource, ASIHTTPRequestDelegate>
{
    NSMutableArray *dataArray;
    NSMutableArray *letters;

    UITableView *tableView;
    IBOutlet UISearchBar *searchBar;
}

@property (nonatomic, retain) IBOutlet UITableView *tableView;
@property (nonatomic, retain) esTabBarController *esTabBarController;
@property (nonatomic, retain) UISearchBar *searchBar; 
```

在我的 patientViewControllerSearch 中，我在 ViewDidLoad 中执行：

```
dataArray = [[NSMutableArray alloc] init];    
letters = [[NSMutableArray alloc] init]; 
```

通过 HTTP 请求，我填充了我的数组。

那工作正常。

后：

```
[self.navigationController pushViewController:controller                                         animated:YES]; 
```

当我回来时，（viewDidload 没有再次加载，这就是为什么没有新的填充 dataArray 的请求）dataArray，一切都是空的。tableView 显示了我以前的状态，但在刷新后也消失了。

你有什么建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:30:24.173

没有调用“viewDidLoad”的原因是因为它第一次出现在您的应用程序中时已经加载（我假设在启动时）。

您会注意到“viewWillAppear”和“viewDidAppear”总是会在视图出现在您的应用程序之前/之后被调用。

如果您想在向用户显示视图时更新数据，这些将是您使用的适当方法。

# php - PHP preg_match_all：提取逗号分隔列表

> ID：10193176
> 
> 赞同：0
> 
> 时间：2012-04-17T14:27:49.640
> 
> 标签：php, regex

例如，我有以下字符串：

```
{WIDGET_TEST('abc','456')} 
```

我希望能够使用 preg_match_all 返回逗号分隔参数的数组。

有人可以帮我解决我需要的正则表达式吗？

我已经尝试过，以下查询返回`(a,b)`：

```
preg_match_all('/\([a-zA-Z0-9\',]+\)/', '{WIDGET_TEST(a,b)}', $arguments); 
```

但是我一直在努力将这个结果作为一个数组得到，当我引入撇号时，正则表达式会中断吗？

编辑使用以下内容：

```
preg_match_all('/(\'[a-zA-Z0-9,]+\')/', '{WIDGET_TEST('variable1','b')}', $arguments); 
```

我得到：

```
array
  0 => 
    array
      0 => string ''variable1'' (length=11)
      1 => string ''b'' (length=3)
  1 => 
    array
      0 => string ''variable1'' (length=11)
      1 => string ''b'' (length=3) 
```

所以相信我是其中的一部分......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:53:35.803

我认为如果您尝试以下正则表达式，它应该可以满足您的需要：

```
preg_match_all('/([a-zA-Z0-9_]+)/', '{WIDGET_TEST(\'variable1\', \'b\')}', $classname); 
```

它应该从输入字符串返回由“abcdEDFGHJ123”构造的字符串。说白了就是当字符串从这个makup中断开时，它会返回一个新的结果。

# objective-c - 如何通过 segue 将数组传递给 tableviewcontroller

> ID：10193177
> 
> 赞同：0
> 
> 时间：2012-04-17T14:27:50.677
> 
> 标签：objective-c, ios, arrays, segue

这可能是一个基本问题，尽管我找不到明确的答案。（我是 iOS 新手）。

这是我的故事板的快速方案：navigationcontroller -> detailviewcontroller -> tableviewcontroller

我的 detailviewcontroller 有 3 个按钮。单击时，它们会解析来自服务器的 xml 并将元素放入数组（称为文件）中。（直到这里一切正常）。因此，在创建数组时，详细视图会转到 tableviewcontroller。

现在我的问题是：如何传递通过该 segue 创建的数组，以便可以在 tableviewcontroller 类中使用它来将值分配给行？（我知道如何分配它们，但我不知道如何通过 segue 传递数组）

所以假设我有这个代码：

```
if ([segue.identifier isEqualToString:@"pdfSeg"]) {

    NSMutableArray *pdfArray = [[NSMutableArray alloc]initWithArray:xmlParser.files];

    UITableViewController *tvc = [segue destinationViewController];} 
```

如何告诉 segue 发送 pdfArray 以便我可以用 pdf 文件填充行？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:35:32.267

将数组视为控制器的模型。将其作为属性传递。另外，你真的想传递一个可变数组吗？您只是传递信息，还是希望控制器管理对阵列的更改？

所以，你添加一个属性......

在 DestinationViewController 界面中，添加属性...

```
@property (nonatomic, strong) NSMutableArray *pdfArray; 
```

在实现中综合它...

```
@synthesize pdfArray = _pdfArray; 
```

然后，从 prepareForSeque 中提供属性...

```
tvc.pdfArray = pdfArray; 
```

# jquery - jquery position() 在 chrome 中不起作用

> ID：10193183
> 
> 赞同：0
> 
> 时间：2012-04-17T14:28:19.187
> 
> 标签：jquery, css, google-chrome

我尝试了一种解决方法来正确定位具有边框半径的 div 内的一些图像。我需要将图像向左移动 1px，向顶部移动 1px，并且我使用了 jQuery .offset() 函数。它可以在 firefox、opera 和 IE 上正常工作，但不能在 chorme 上工作。

代码如下

```
$(window).load(function(){
    // adjust social icons
    $("div.nuvola.social img").each(function(){
        var tmpOffset = $(this).offset();
        tmpOffset.left -= 1;
        tmpOffset.top -= 1;
        $(this).offset(tmpOffset);  
    });
}); 
```

我在这个测试页面上传了一个例子（右上角的社交图标） [链接](http://nieto.hostingplaza.org/cory/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T02:26:51.600

也许...

[http://nieto.hostingplaza.org/cory/css/style.css](http://nieto.hostingplaza.org/cory/css/style.css)（线路：76-82）

```
div.nuvola.social img {
    position: relative;
    height: 70px;
    width: 70px;
    left: -1px;
    top: -1px;
} 
```

不要忘记添加“px”；

# node.js - node.js 回调中的引用

> ID：10193185
> 
> 赞同：1
> 
> 时间：2012-04-17T14:28:29.727
> 
> 标签：node.js, reference, callback

当一个基本问题出现时，我刚刚编写了一些测试。我写了一个测试框架的骨架。它首先将所有测试（它们的回调）收集在一个数组中，然后在一个单独的循环中执行它们。然而，这

```
//test.js
var testArray = [
    {
    n : 1,
    d : 'text1'
    },
    {
    n : 2,
    d : 'text2'
    }
];

var cbs = [];
function fnWithCallback(d, cb) {
    console.log('d=('+d+')');
    cbs.push(cb);
}

for(var i=0; i < testArray.length; i++) {
    var v = testArray[i];

    fnWithCallback(v.d, function() {
    console.log('v=('+v.n+'), i=('+i+')');
    });
}

for(var j=0; j < cbs.length; j++) {
    cbs[j]();
} 
```

当我运行这个示例时，我得到了这个：

```
> node test.js
d=(text1)
d=(text2)
v=(2), i=(2)
v=(2), i=(2) 
```

这意味着在回调中，“v”已分配给最后一个数组的最后一个元素，而“i”已分配给它的最后一个状态，而不是当回调已“创建”并传递给“fnWithCallback”函数时的状态。但是，由于在回调中打印出“d”，因此在调用“fnWithCallback”时它具有元素的值。

“解开”循环没有帮助。

```
var v = testArray[0];

fnWithCallback(v.d, function() {
    console.log('v=('+v.n+')');
});

v = testArray[1];

fnWithCallback(v.d, function() {
    console.log('v=('+v.n+')');
}); 
```

导致相同的行为。

有人可以解释这一点并提供解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:35:37.507

使用闭包

```
fnWithCallback(v.d, (function(v,i){
    return function() {
        console.log('v=('+v.n+'), i=('+i+')');
    };
})(v,i))); 
```

# android - 如何正确处理异步任务结束？

> ID：10193191
> 
> 赞同：0
> 
> 时间：2012-04-17T14:28:41.473
> 
> 标签：android, json, http, android-asynctask, forceclose

我正在使用 AsyncTask 从服务器获取我的应用程序需要的所有数据。这工作正常。但是，当第二次重新启动应用程序时，应用程序崩溃了。

我收到以下错误日志：

```
04-17 14:22:57.171: E/AndroidRuntime(956): FATAL EXCEPTION: AsyncTask #2
04-17 14:22:57.171: E/AndroidRuntime(956): java.lang.RuntimeException: An error occured while executing doInBackground()
04-17 14:22:57.171: E/AndroidRuntime(956):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.lang.Thread.run(Thread.java:856)
04-17 14:22:57.171: E/AndroidRuntime(956): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=14; index=14
04-17 14:22:57.171: E/AndroidRuntime(956):  at flexform.ro.android.app.FlexFormActivity$getDataClass.doInBackground(FlexFormActivity.java:88) 
04-17 14:22:57.171: E/AndroidRuntime(956):  at flexform.ro.android.app.FlexFormActivity$getDataClass.doInBackground(FlexFormActivity.java:1)
04-17 14:22:57.171: E/AndroidRuntime(956):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-17 14:22:57.171: E/AndroidRuntime(956):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

下面你有我的 asynctask 类：

```
class getDataClass extends AsyncTask<String, Void, String>{
    protected String doInBackground(String...urls){
        String response = "";
        for(String url : urls){
            response = "";
            descriptionArray_Counter++;

            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try{
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(new InputStreamReader(content));

                String s = "";

                while((s = buffer.readLine()) != null){
                    response += s;
                }
            }catch(Exception e){
                e.printStackTrace();
            }
            Resources.descriptionArray[descriptionArray_Counter] = response;
        }
        return response;
    }

    protected void onPostExecute(String result){
        Toast.makeText(getApplicationContext(), "All entres have been loaded!", Toast.LENGTH_SHORT).show();

        JSONArray offersJSON;
        JSONArray newsJSON;

        try{
            newsJSON = new JSONArray(Resources.descriptionArray[9]);

            if(newsJSON.length() > 20)
                Resources.newsLength = 20;
            else
                Resources.newsLength = newsJSON.length();

            for(int i = 0; i < Resources.newsLength; i++){
                JSONObject tempObject = newsJSON.getJSONObject(i);

                Resources.news_id[i] = tempObject.getString("id");
                Resources.news_title[i] = tempObject.getString("title");
                Resources.news_descriptionShort[i] = tempObject.getString("description_short");
                Resources.news_descriptionLong[i] = tempObject.getString("description_long");
                Resources.news_date[i] = tempObject.getString("date");
                Resources.news_urgent[i] = tempObject.getString("urgent");
            }
        }catch(JSONException e){
            e.printStackTrace();
        }
        try {
            offersJSON = new JSONArray(Resources.descriptionArray[10]);

        if(offersJSON.length() > 20)
            Resources.offersLength = 20;
        else
            Resources.offersLength = offersJSON.length();

        for(int i = 0; i < Resources.offersLength; i++){
            JSONObject tempObject = offersJSON.getJSONObject(i);

            Resources.offers_id[i] = tempObject.getString("id");
            Resources.offers_offertant[i] = tempObject.getString("Ofertant");
            Resources.offers_description[i] = tempObject.getString("Descriere");
            Resources.offers_contact[i] = tempObject.getString("Contact");
            Resources.offers_date[i] = tempObject.getString("Data");
            Resources.offers_available[i] = tempObject.getString("Valabil");

        } 
        Intent intent = new Intent(FlexFormActivity.this, MainMenu.class);
        startActivity(intent);

        }catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我希望有更多经验的人能够向我解释解决这个崩溃的正确方法......

干杯并感谢任何花时间回答和帮助我的人......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:33:17.150

我怀疑您永远不会将您的 descriptionArray_Counter 重置为 0。因此，当您执行任务时，请执行以下行

```
Resources.descriptionArray[descriptionArray_Counter] = response; 
```

可能正在评估

```
Resources.descriptionArray[14] = response; 
```

并且您的描述数组的长度仅为 14。您可以在堆栈跟踪中看到它准确地告诉您这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:33:45.997

您收到 arrayIndexOutOfBounds 错误。您对数组的调用之一，特别是在第 88 行，超出了范围。asynchTask 不是问题。

# django - Django，文件对象的get_absolute_url方法

> ID：10193192
> 
> 赞同：20
> 
> 时间：2012-04-17T14:28:42.290
> 
> 标签：django, url, absolute

```
def get_absolute_url(self):
        return "/uploads/%i" % self.id 
```

这不是我想要的，但这是我能想到的。我需要我的文件的链接（如.../ **photo.jpg**）

我刚刚学会了如何从我的 django 网站获取提要。我想要这个 jpeg 的绝对网址。

[http://myDjangoWeb/uploads/goodies_89087_1211864024_1.jpeg](http://myDjangoWeb/uploads/goodies_89087_1211864024_1.jpeg)

我怎样才能得到这个文件的绝对网址.....self.??????

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-17T14:30:32.510

只需使用`.url`文件字段的属性。

请参阅Django 文档中的[“管理文件”](https://docs.djangoproject.com/en/dev/topics/files/)。

# objective-c - 可可中的 NSXML 搜索

> ID：10193193
> 
> 赞同：1
> 
> 时间：2012-04-17T14:28:43.063
> 
> 标签：objective-c, cocoa, nsxml, nsxmldocument

如果我有这个外部 XML 文件：

```
<drivers>
                <folder>
                    <name>Adobe</name>
                    <driver>
                        <name>acrobat distiller 3.0</name>
                        <filename>ADISTILL.PPD</filename>
                    </driver>
                    <driver>
                        <name>adobe laserjet ii cartridge</name>
                    <filename>ALJII523.PPD</filename>
                </driver>
                <driver>
                    <name>generic postscript printer</name>
                    <filename>defprtr2.ppd</filename>
                </driver>
            </folder>
</drivers> 
```

假设我想获取“Adobe”的内容并将它们放在一个数组中，我该怎么做？

我有以下内容，它给了我一个“<name>”数组但是，我不知道下一步是什么。

```
NSString *item_name = [NSString stringWithFormat:@".//drivers/folder/name"];
NSArray *arr = [ads_xml nodesForXPath:item_name error:NULL]; 
```

ads_xml 是一个 NSXMLDocument 类型。

谢谢！

PS 具体我想要 <name> 和 <filename> 在 <driver> 节点下找到.. 干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:57:06.790

我自己找到了解决方案，可以通过多种不同的方式完成。我可以为所有名称创建数组，使用 XPath 和另一个数组作为文件名，并以这种方式将数据存储在数组变量中。

# c++ - 将文件加载到向量中

> ID：10193196
> 
> 赞同：2
> 
> 时间：2012-04-17T14:28:46.763
> 
> 标签：c++, iostream

[这个问题与Loading a file into a vector](https://stackoverflow.com/questions/7241871/loading-a-file-into-a-vectorchar)非常相似；但是，在这种情况下，我想将它加载到一个无符号字符向量中。

使用另一个问题的代码，加载无符号字符向量的最佳方法是什么？

```
std::vector<char> vec;  // Would like this to be std::vector<unsigned char> vec;
std::ifstream file;
file.exceptions(
    std::ifstream::badbit
  | std::ifstream::failbit
  | std::ifstream::eofbit);
file.open("test.txt");
file.seekg(0, std::ios::end);
std::streampos length(file.tellg());
if (length) {
    file.seekg(0, std::ios::beg);
    vec.resize(static_cast<std::size_t>(length));
    file.read(&vec.front(), static_cast<std::size_t>(length));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T14:34:00.193

更改`std::vector<char> vec;`为`std::vector<unsigned char> vec;`

# wix - 如何获得显示其“正常”图标的快捷方式？

> ID：10193199
> 
> 赞同：4
> 
> 时间：2012-04-17T14:28:52.013
> 
> 标签：wix, icons, shortcut

我正在将开始菜单中的快捷方式添加到文档 pdf。我没有指定`Icon`参数。安装后，它会出现一个空白的白色图标。我希望它具有 Windows 通常提供的适当文档图标（我安装了 Adob​​e Reader）。我需要做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-04T14:03:17.940

事实证明，这是表面上看起来很简单，但实际上并非如此的事情之一。帮助 OP 可能为时已晚，但也许它可以为其他人指明正确的方向。

问题是因为宣传了快捷方式（在 WiX 代码中你有属性`Advertise="Yes"`）。因此，Windows 不会将其识别为“pdf”文件，因此不会显示正确的图标。请参阅此[SO 问题](https://stackoverflow.com/questions/5071061/in-wix-can-an-advertised-shortcut-use-the-icon-from-a-systems-file-association)。

有两种方法可以解决这个问题：

*   手动设置图标：我认为我的大多数用户将使用 Adob​​e Reader，所以我刚刚获得了 Adob​​e PDF 图标的副本并设置了使用它的快捷方式。显然，如果他们将不同的程序设置为默认设置，那么它看起来会很奇怪 - 但就个人而言，我仍然认为它比空白图标更好。

*   将您的快捷方式设置为未广告：设置`Advertise="No"`或完全删除 Advertise 属性（[默认值为 No](http://wixtoolset.org/documentation/manual/v3/xsd/wix/shortcut.html)）。不幸的是，这确实会在 Candle 中引起警告，我不明白，但根据这个[WiX Mailing List Post](http://osdir.com/ml/windows.devel.wix.user/2005-04/msg00099.html)，它应该可以解决图标问题。

# asp.net-mvc-3 - 在 MVC 上处理多租户

> ID：10193205
> 
> 赞同：1
> 
> 时间：2012-04-17T14:29:11.163
> 
> 标签：asp.net-mvc-3, multi-tenant

我想就我处理 MultiTenancy 的方式询问您的意见。我正在使用 MVC3（切换到 MVC4）和 EF 作为我的后端。我正在使用单个应用程序，共享模式 MultiTenancy。下面是代码：

```
public abstract class Service<T> where T : Entity
{
    private Repository<T> _repo;
    public Service()
    {
        _repo = new Repository<T>();
    }

    public bool Authenticate(int id)
    {
        //var companyInfo = _authorizationRepository.GetApiKey(apiKey);
        int tenantId = 0; // replaced by companyInfo using repository
        var entity = _repo.GetQuery(tenantId).Where(e => e.Id == id).First();

        if (tenantId != entity.TenantId)
            throw new ArgumentException();

        return true;
    }
}

public class EmployeeService : Service<Employee>
{
    private EmployeeRepository employeeRepository;
    public EmployeeService()
    {
        employeeRepository = new EmployeeRepository();
    }

    public Employee GetEmployeeById(int employeeId)
    {
        this.Authenticate(employeeId);
        return employeeRepository.GetById(employeeId);
    }
}

public class Entity
{
    public int Id { get; set; }
    public int TenantId { get; set; }
} 
```

当然 DI 也会在那里，但为了简单起见，我在这里（暂时）删除了它们。我在服务层上使用了泛型（感觉很脏），因为我无法将 TenantId 与将在类上传递的正确实体进行比较。我正在考虑使用 FilterAttributes 重新编码，但我不知道该怎么做。你们是如何处理多租户的？从长远来看，设计是否存在一些我可能会遇到的关键缺陷？如果您有一些使用 FilterAttributes 的示例，那将是一个很大的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:27:06.863

我们目前正在构建相当大的多租户网络应用程序。嗯，它并不像看起来那么简单，但是一旦你构建了你的架构，它就很简单了。我们正在深入开发，但您可以查看 nanocms.codeplex.com 中的开源部分（我们还没有上传 db jet butt，我们将在几天内上传）

由于这是一个相当广泛的问题，我将尝试总结一些问题和解决方案。

首先，您需要为每个请求识别租户。我们有一个全局操作过滤器，它解析 url 并将其与数据库中的数据进行比较。当然，您必须缓存所有数据，这样就不会调用数据库。您不得将任何内容保存在 cookie 或会话中，因为用户一次可以访问多个租户。我建议您将该数据放在 HttpRequest Items 中，以便您在请求中只执行一次，但始终可以使用该数据。

对于身份验证用户必须是唯一的。您必须考虑是否要授予某些用户对每个租户的不同权限。如果是这样，您必须编写您的身份验证代码甚至属性，以便您可以检查他在当前租户中的角色。在我们的应用程序中，当用户进行身份验证时，我们会创建会话对象。在对象中，我们有检查租户权限的静态方法。

我建议你保持 HttpRequest Items 的强类型。我们有：

```
public static int TenantID {
    get { return System.Web.HttpContext.Current.Items.Contains("TenantID") ? Convert.ToInt32(System.Web.HttpContext.Current.Items["TenantID"]) : -1; }
    set {
        if (!System.Web.HttpContext.Current.Items.Contains("TenantID"))
            System.Web.HttpContext.Current.Items.Add("TenantID", value);
        System.Web.HttpContext.Current.Items["TenantID"] = value;
    }
} 
```

# c# - 在组合框中选择不同项目时如何动态更改复选框

> ID：10193212
> 
> 赞同：0
> 
> 时间：2012-04-17T14:29:32.917
> 
> 标签：c#, user-interface, checkbox, combobox

我正在尝试创建一个 GUI，其中在组合框中选择一个项目会改变每个复选框是否被选中。

GUI 有很多复选框，用户可以选中或取消选中。

例如，用户可以从组合框中选择“项目 1”，然后用户选中他想要检查的任何复选框。然后，当用户选择“item 2”时，从“item 1”选中的复选框将变灰，用户可以选中或取消选中其余的复选框。

组合框中的每个项目基本上都保存了用户在复选框上的选择。

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:49:16.830

例如 4 个复选框，1 个组合框

```
 public Form1()
    {
        InitializeComponent();
        for (int i = 0; i < 3; i++)
            comboBox1.Items.Add(i.ToString());
        comboBox1.Text = comboBox1.Items[0].ToString();
    }
    bool needtoupdate = true;
    public class CheckedItems
    {
        public CheckedItems()
        {
            for (int i = 0; i < b.Length; i++)
            {
                b[i] = false;
            }
        }
        public bool[] b = { false, false, false, false };
    }

    CheckedItems[] allcheckeditems = { new CheckedItems(), new CheckedItems(), new CheckedItems()};

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        needtoupdate = false;
        checkBox1.Checked = allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[0];
        checkBox2.Checked = allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[1];
        checkBox3.Checked = allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[2];
        checkBox4.Checked = allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[3];
        needtoupdate = true;
    }

    void saveallchecked()
    {
        if (!needtoupdate) return;
        allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[0] = checkBox1.Checked;
        allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[1] = checkBox2.Checked;
        allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[2] = checkBox3.Checked;
        allcheckeditems[Convert.ToInt32(comboBox1.Text)].b[3] = checkBox4.Checked;
    }

    private void comboBox1_SelectedValueChanged(object sender, EventArgs e)
    {
    }

    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        saveallchecked();
    }

    private void checkBox2_CheckedChanged(object sender, EventArgs e)
    {
        saveallchecked();
    }

    private void checkBox3_CheckedChanged(object sender, EventArgs e)
    {
        saveallchecked();
    }

    private void checkBox4_CheckedChanged(object sender, EventArgs e)
    {
        saveallchecked();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:07:48.180

我会将您的复选框和组合放在更新面板中，为用户更改组合框时创建一个事件，在这种情况下，您必须循环查看哪些被选中，哪些您设置为启用 false（它们将显示为灰色）。

有用吗？

# ruby-on-rails-3 - Rails：如何使用 RSpec 测试子域

> ID：10193213
> 
> 赞同：8
> 
> 时间：2012-04-17T14:29:43.673
> 
> 标签：ruby-on-rails-3, rspec, subdomain

我正在开发一个严重依赖子域的应用程序。它在应用程序（模块）中嵌入了一个应用程序，该应用程序将成为管理应用程序的后端。让我们将它命名为kong。

我的路由文件中有这段代码：

```
constraints :subdomain => "kong" do
  scope :module => "kong", :as => "kong" do
    resources :clients
  end
end 
```

如何测试这条路线，以便当我编写类似以下内容时，它会从子域中获取并且仅从子域中获取：

```
get :index 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T14:39:25.417

在测试单元中，我使用类似这样的方法将 request.host 设置为来自子域：

```
def get_sub(sub = "one")
  @request.host = "#{sub}.local.me" 
end 
```

我个人会将其放入`spec_helper.rb`文件中，并在您需要时参考。

对你来说，在这些测试中，你设置`sub`为 equal`"kong"`可能就像

```
before :each do
  get_sub("kong")
end 
```

这个小丑也有答案，我[通过谷歌找到的](https://stackoverflow.com/questions/2556627/rails-rspec-set-subdomain)

# model-view-controller - 需要在telerik mvc上传控件中上传文件的完整路径

> ID：10193216
> 
> 赞同：1
> 
> 时间：2012-04-17T14:29:47.793
> 
> 标签：model-view-controller, upload, telerik, filepath

在我的项目中，当我将鼠标悬停在正在上传的文件上时，我需要访问正在上传的文件的完整路径并显示为工具提示。

在下图中，您可以看到仅显示文件名而不显示其完整路径的工具提示。

我无法在客户端或服务器端获取文件路径。是否可以在任何客户端事件中获取文件路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:46:43.550

这可以通过 onSelect 方法完成。

```
function onSelect() {
        var files = arguments[0].files;
        if (files && files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                var src = e.target.result;
                var alt = files[0].name);

                //This is where the magic happens
            };

            reader.readAsDataURL(files[0].rawFile);
        }
    } 
```

此示例代码用于单个文件上传。

src 将是 Base64，可用作 img 标签的 src。

# xslt - XSL：将节点值与另一个节点进行比较

> ID：10193219
> 
> 赞同：0
> 
> 时间：2012-04-17T14:29:59.273
> 
> 标签：xslt

我对 XSLT 有点陌生，所以我为这个基本问题道歉。

我正在尝试创建一个 XSL 样式表，该样式表将从 XML（下方）中提取第三个`<cell>` - 即 CODE1、CODE2 - 每个节点的值并将其放入下拉框中。我还想比较每个节点并取出任何重复的内容，以便它只显示 CODE1 和 CODE2 的一个实例，而不是 CODE1、CODE1、CODE2。

XML:

```
<dvm>
  <description>This is a description</description>
  <columns>
    <column name="lang"/>
    <column name="text"/>
    <column name="code" qualifier="true" order="1"/>
    <column name="comm" qualifier="true" order="2"/>
    <column name="subj"/>
    <column name="copy"/>
    <column name="flag"/>
 </columns>
 <rows>
   <row>
     <cell>English</cell>
     <cell></cell>
     <cell>CODE1</cell>
     <cell>Fixed</cell>
     <cell>Title1</cell>
     <cell/><cell/>
     <cell/><cell/>
  </row>
  <row>
     <cell>English</cell>
     <cell></cell>
     <cell>CODE1</cell>
     <cell>Wired</cell>
     <cell>Title2</cell>
     <cell/><cell/>
     <cell/><cell/>
  </row>
  <row>
     <cell>English</cell>
     <cell></cell>
     <cell>CODE2</cell>
     <cell>Fixed</cell>
     <cell>Title3</cell>
     <cell/><cell/>
     <cell/><cell/>
  </row>
</dvm> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:17:22.457

删除重复项是通常称为“分组”的一类问题的特例。XSLT 2.0 中有几个特性可以帮助解决分组问题，distinct-values() 函数和 xsl:for-each-group 指令。在 XSLT 1.0 中更难：搜索“Muenchian grouping”（或者等待比我在这里解释的时间更多的人......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:36:21.877

当您能够应用 XSLT 2.0 时，请使用以下内容：

```
<xsl:value-of select="distinct-values(dvm/rows/row/cell[3])"/> 
```

在 XSLT 1.0 中，使用 Michael Kay 提到的 Muenchian 分组。一个示范：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:key name="Cells" match="dvm/rows/row/cell[3]" use="."/>
    <xsl:template match="/">
        <root>
            <w>
                <xsl:for-each select="dvm/rows/row/cell[3]">
                    <item>
                        <xsl:value-of select="."/>
                    </item>
                </xsl:for-each>
            </w>
            <z>
                <xsl:for-each select="dvm/rows/row/cell[3]">
                    <xsl:if test="generate-id() = generate-id(key('Cells', .)[1])">
                        <item>
                            <xsl:value-of select="."/>
                        </item>
                    </xsl:if>
                </xsl:for-each>
            </z>
        </root>
    </xsl:template>
</xsl:stylesheet> 
```

这导致以下结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <w>
        <item>CODE1</item>
        <item>CODE1</item>
        <item>CODE2</item>
    </w>
    <z>
        <item>CODE1</item>
        <item>CODE2</item>
    </z>
</root> 
```

说明：
`xsl:key`将键值分配给从`match / use`值构造的每个出现的节点 -`cell[3]`您希望关注的值。然后遍历所有这些`cell[3]`值，检查该值是否有一个唯一的 id（每个节点都有一个唯一的 id，可以通过应用`generate-id()`函数访问）等于节点集中具有相同键值的第一个元素的 id (这个集合是通过使用`key()`函数来选择的）。`Cells`实际上，当将当前节点值作为键值应用时，您正在检查处理的节点是否与键定义的节点集中的第一个节点相同。
实际上索引`[1]`是多余的，因为当它被忽略时，无论如何都会检查集合的第一个元素是否相等，因为`generate-id(..node-set..)`只会自动为节点集中的第一个节点生成一个id，但是添加索引会更整洁一些。
请注意，这会导致只选择一次出现的`CODE1`单元格 [3] 值。
一个实际的应用可能是定义一个`xsl:variable`内容等于`<z>`上面元素的内容（因此，`xsl:for-each`等等），然后使用该变量循环遍历其中的`<item>`元素并在您正在谈论的列表中显示它们。

# sql - 仅返回在子区域的所有国家/地区都有业务的员工类型

> ID：10193220
> 
> 赞同：-1
> 
> 时间：2012-04-17T14:30:01.967
> 
> 标签：sql, sql-server, relational-division

表格1

```
Employee Name,Employee type, Country Present 

Jim Mith , Consulting,England
Jim Mith, Manfacturing, Scotland
Jim Mith, Consulting, Northern Ireland
Mavis Mith, Consulting, France
Jim Mith,Consulting, Wales 
```

表 2

```
County Present , Corresponding SubReegion 

England, UK & I 
Scotland, UK & I 
Northern Ireland, UK& I
Wales, UK & I
France, CEE 
```

我只想要一个子区域的所有国家/地区的员工姓名，而不是 5 个国家/地区的一个国家/地区的员工姓名。对于上述数据，查询应该只返回 Jim Mith。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:33:33.943

从记忆中，您可以执行以下操作：

```
declare @totalCountries int
select @totalCountries = count(distinct CountryPresent) from table2

select EmployeeType
from table1
group by EmployeeType
having count(distinct CountryPresent) = @totalCountries 
```

或仅在一个查询中：

```
select EmployeeType
    from table1
    group by EmployeeType
    having count(distinct CountryPresent) = (select count(distinct CountryPresent) from table2) 
```

# algorithm - 如何在图形中找到三角形？

> ID：10193228
> 
> 赞同：26
> 
> 时间：2012-04-17T14:30:28.773
> 
> 标签：algorithm, data-structures, graph-theory

这是[算法设计手册](http://www.algorist.com/)中的一个练习。

> 考虑确定给定无向图 G = (V, E) 是否包含长度为 3 的三角形或环的问题。
> 
> (a) 给出 O(|V |^3) 来找到一个三角形（如果存在）。
> 
> (b) 改进你的算法以及时运行 O(|V |·|E|)。你可以假设 |V | ≤ |E|。
> 
> 请注意，这些界限使您有时间在 G 的邻接矩阵和邻接列表表示之间进行转换。

这是我的想法：

(a) 如果图是作为邻接表给出的，我可以通过 O(|V|^2) 将列表转换为矩阵。然后我做：

```
for (int i = 0;i < n;i++) 
   for (int j = i+1;j < n;j++) 
   if (matrix[i][j] == 1) 
      for (int k = j+1;k < n;k++) 
         if (matrix[i][k] == 1 && matrix[j][k] == 1)
             return true; 
```

这应该给出一个 O(|V|^3) 来测试三角形。

(b) 我的第一个直觉是，如果图是作为邻接表给出的，那么我会做一个 bfs。每当找到交叉边缘时，例如，`if y-x is a cross edge`，然后我会`check whether parent[y] == parent[x], if true, then a triangle is found`。

谁能告诉我我的想法是否正确？

同样对于这个（b），我不确定它的复杂性。应该是 O(|V| + |E|)，对吧？

我怎样才能在 O(|V|*|E|) 中做到这一点？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-17T14:38:44.517

一个可能的`O(|V||E|)`解决方案是与（a）中的蛮力相同的想法：

```
for each edge (u, v):
  for each vertex w:
     if (v, w) is an edge and (w, u) is an edge:
          return true
return false 
```

**检查所有边**，而**不是**所有顶点对 - 与另一个形成三角形的顶点 - 这是足够的信息来确定边和顶点是否形成可行的解决方案。

**BFS 解决方案的反例：**

```
 A
     / | \
    /  |  \
   B   C   D
   |   |   |
   |   |   |
   F---G---H
   |       |
   ---------
    (F, H) is also an edge 
```

请注意`father[F] != father[G] != father[H]`，因此该算法将返回 false - 但是，(F, G, H) 是一个可行的解决方案！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-07T03:01:06.823

如果你有一个邻接矩阵，你可以通过对矩阵求平方并查看原始矩阵和方阵是否在同一个地方有一个非零条目来找到三角形。

一个简单的矩阵乘法需要时间`O(n^3)`，但是有一些快速的矩阵乘法算法做得更好。最著名的算法之一是及时运行的[Coppersmith-Winograd](http://en.wikipedia.org/wiki/Coppersmith%E2%80%93Winograd_algorithm)`O(n^2.4)`算法。这意味着算法类似于：

*   使用`O(V^2)`时间转换为邻接矩阵。
*   使用`O(V^2.4)`时间计算邻接矩阵的平方。
*   使用`O(V^2)`时间检查矩阵是否符合非零条目。
*   您在（如果有的话）中找到重合的非零条目的行和列的索引告诉您两个相关节点。
*   使用`O(V)`时间来缩小两个已知节点共有的第三个节点。

所以总的来说这需要`O(V^2.4)`时间。更准确地说，它需要很长的矩阵乘法。[您可以在此算法和amit 在其答案中解释](https://stackoverflow.com/a/10193372/52239)的 if-any-edge-end-points-have-a-common-neighbor 算法之间动态切换，以将其改进为`O(V min(V^1.4, E))`.

这是[一篇更深入地研究这个问题](http://i11www.iti.uni-karlsruhe.de/extra/publications/sw-fclt-05_wea.pdf)的论文。

It's kind of neat how dependent-on-theoretical-discoveries this problem is. If conjectures about matrix multiplication actually being quadratic turn out to be true, then you would get a really nice time bound of `O(V^2)` or `O(V^2 log(V))` or something like that. But if quantum computers work out, we'll be able to do [even better than that](http://arxiv.org/abs/quant-ph/0310134) (something like `O(V^1.3)`)!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-10T18:18:49.890

这是我的想法：

如上所述，原始 BFS 解决方案不正确。但是我们可以修改 DFS。当我们访问 DFS 中的每个顶点时，为访问的节点分配编号。现在，如果我们到达一个顶点（在我看到交叉边的问题中，无向图中没有），我们检查它的邻接列表并假设发现了一个顶点（但没有处理，不可能发生），然后我们检查它的数量. 如果差为 2，则有一个长度为 3 的循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T23:49:35.810

我真的很喜欢[这篇博文中讨论的矩阵乘法解决方案](https://stackoverflow.com/questions/10193228/graph-how-to-find-a-triangle-inside-a-graph)。

令 a = 邻接矩阵

*   a*a (a2) 矩阵中的邻接相乘是 2-length 路径的数量
*   a2*a 矩阵中的邻接相乘是 3 长度路径的数量

问题是，矩阵乘法很慢......但是，您可以使用 GPGPU 执行矩阵乘法，并且可以在包括 GPU 的现代架构上获得高性能解决方案。

# asp-classic - COM 对象在 ASP Classic 和 VBscript 中的行为不同

> ID：10193229
> 
> 赞同：1
> 
> 时间：2012-04-17T14:30:29.700
> 
> 标签：asp-classic, vbscript, exchange-server, com+

-----此问题已解决，与主题无关，请参阅底部说明 -----

我已经将一个 C# dll 放在一起作为 COM 对象运行以处理 Exchange Server 处理。它执行的功能之一是创建用户邮箱。我已经设置了一个 COM+ 应用程序，因此它以 Exchange 管理员的身份运行。

当在 VBScript 中 CreateObject 并调用该函数时，它可以工作。当我在 ASP 页面（使用 Server.CreateObject）中做同样的事情时，它什么也不做。

在这种情况下，我应该在 VBscript 和 ASP Classic 之间寻找哪些不同的行为？

正在执行的 DLL 代码：

```
public void CreateMailbox(String database, String dc, String upn)
{
    String retval = String.Empty;
    Dictionary<String, object> args = new Dictionary<string, object>();
    args.Add("Identity", upn);
    args.Add("Database", database);
    args.Add("DomainController", dc);            
    Collection<PSObject> result = ExecuteCmdlet("Enable-Mailbox", args);
    return;
} 
```

并执行Cmdlet

```
private Collection<PSObject> ExecuteCmdlet(String cmdlet, Dictionary<String,object> arguments)
{
    RunspaceConfiguration rsConf = RunspaceConfiguration.Create();
    PSSnapInException psException = null;
    PSSnapInInfo psInfo = rsConf.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.Admin", out psException);
    Runspace rs = RunspaceFactory.CreateRunspace(rsConf);
    rs.Open();
    Pipeline pipe = rs.CreatePipeline();
    Command psCmd = new Command(cmdlet);
    foreach (KeyValuePair<String,object> arg in arguments)
    {
        psCmd.Parameters.Add(arg.Key, arg.Value);
    }
    pipe.Commands.Add(psCmd);
    Collection<PSObject> retVal = pipe.Invoke();
    rs.Close();
    return retVal;
} 
```

编辑：这似乎是我的 ASP 实现的一个问题，这涉及到我试图将它与第 3 方 AD 管理工具联系起来。当我在独立的 ASP 页面中使用代码时，它可以工作。似乎这需要我做更多的研究。

EDIT2：几个小时的研究在 IIS 处理具有以任何方式表明问题的绑定标识的 COM+ 对象的方式上没有产生任何结果。请求的 VBS 如下。这行得通。这个完全相同的代码在 ASP Classic 网页中工作。当我在同一个 vdir 中的不同 Web 应用程序中运行完全相同的代码时，它无法创建邮箱。有问题的应用程序是用 ASP Classic 编写的 Active Directory 的 MVC 前端。

```
Dim exch
Set exch = CreateObject("ExchangeMailboxCreator.ExchangeMailboxBuilder")
exch.CreateMailbox("Mailbox\SG\DB", "domaincontroller.domain.com", "TestUserAccount") 
```

最终编辑：不出所料，这不是上面代码的问题，而是它周围的代码。我正在与之集成的应用程序在定期写回 AD 之前使用 AD LDS 作为暂存目录。这意味着我直接接触 Exchange 的尝试失败了，因为 AD 帐户不存在。我通过添加一个循环休眠直到 Exchange 环境识别出用户存在来绕过它。不是......我最喜欢的解决方案，但我会接受。感谢所有的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:32:18.840

在组件服务的“安全”选项卡上，您需要取消选中“对此应用程序执行访问检查”。

# java - 没有回调接口的 AsyncTask

> ID：10193233
> 
> 赞同：0
> 
> 时间：2012-04-17T14:30:50.660
> 
> 标签：java, android, callback, android-asynctask

我正在尝试解决这个问题：我有一个从 AsyncTask 扩展的类，它执行一些 http 方法，如下所示：

```
 public class RESTManager extends AsyncTask<Object, Object, String>
{
    public RESTManager(String url, MethodTypes myMethod,ICallbackHandler hndl, String     restMethod)
    {
        initialize();
    }

    private String doGET()
    {
    }

    private String doPOST()
    {
    }

    @Override
    protected String doInBackground(Object... params)
    {

    }

    @Override
    protected void onPostExecute(String result)
    {
    }

} 
```

所以，从活动我这样做：

```
RESTManager webService = new WSManager(URL, MethodTypes.REGISTER, params, this, WSManager.GET_METHOD);
webService.execute(); 
```

然后activity在callbak方法中接收响应（因为activity实现了这个接口）：

```
public void response(String response)
{
    // some process
} 
```

这工作正常，但我的问题是我希望答案出现在对某个函数的相同调用中，然后该函数调用 .execute 方法。

```
// This is a new class
public class MyWebServices()
{
    public User getUser(int id)
    {
        User myUser;

        RESTManager webService = new WSManager(URL, MethodTypes.REGISTER, params, this, WSManager.GET_METHOD);
        webService.execute();

        // BUT I WANT TO RETURN FROM HERE THE CALL FROM THE ACTIVITY....LIKE

        return myUser;
    }
} 
```

因此，从活动来看，这将是：

```
MyWebServices myService = new MyWebServices();
User usr = myService.getUser(id); 
```

希望不理解我试图描述的内容，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:37:08.870

你想要什么导致阻塞 UI。Android 不允许您这样做。网络调用应该是异步的，所以方法是错误的。处理`response()`方法。

**UPD**：阻止用户界面会导致“应用程序无响应对话框”，这会惹恼用户。另外，如果网络调用失败怎么办？还是要等半个小时才能完成？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:52:06.260

学会爱回调:)

您不能在不阻塞 UI 线程的情况下应用您提到的模式（在后台执行、等待结果、返回值）。

最简单的事情是`onPostExecute()`在 REST 调用完成后简单地实现调用您想要做的事情的方法。但是，如果您想向系统的其他部分公开一个干净的接口，您可以变得更复杂。

从阅读[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)开始。可以这样想：REST 调用的完成是一个事件，对该事件感兴趣的代码可以注册以在它完成时（异步）得到通知。你可以这样做，我让你的 AsyncTask 实现类似这样的东西，

```
AsyncTask myTask = new AsyncTask<...>() {
    public interface Callback {
        void onComplete();
        void onFailure();
    }

    private Set<Callback> callbacks = new HashSet<Callback>();

    public void addObserver(Callback cb) { callbacks.add(cb); }

    @Override
    protected String doInBackground(Object... params)
    {
        // whatever
    }

    @Override
    protected void onPostExecute(String result)
    {
        if (success) {
            for (Callback cb: callbacks) {
                cb.onComplete();
            }
        } else {
            for (Callback cb: callbacks) {
                cb.onFailure();
            }       
        }
    }
} 
```

现在，这个接口的使用者会做一些类似的事情，

```
MyTask mt = new MyTask();
mt.addObserver(new MyTask.Callback() { 
    @Override
    public void onComplete() {
        // do whatever you want to do when the task completes successfully
    }

    @Override
    public void onFailure() {
        // ...
    }
}

mt.execute(); 
```

# html - 设计这个的最佳方法是什么？浮动还是有更好的方法？附图片

> ID：10193234
> 
> 赞同：-1
> 
> 时间：2012-04-17T14:30:56.550
> 
> 标签：html, css, frameworks

抱歉图像的粗糙度，但每个框都将位于我网站的一个 div 中。我希望它具有响应性，因此可以在不同的屏幕尺寸上正常工作，所以我知道在定义每个 div 的宽度时我必须使用 % ，但是使用浮动是正确的方法吗？有没有比浮动 div 更简单的方法？我也不确定这是否会奏效。

![http://i.stack.imgur.com/zOuYF.jpg](../Images/ce1ad2df1559590a0fb56d98d7e20eae.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:37:24.300

为此，我会使用更多的 div： ![修改后的布局草图](../Images/597b444392b1601d81406dce45f277dc.png)

你最大的 div 会向左浮动；然后用蓝色勾勒出的两个（我的补充）也向左浮动。在这些蓝色 div 中，添加您自己的两个或三个 div，没有浮动。这是我所知道的让这个布局工作的最简单的方法。为获得最佳结果，请将所有样式保存在样式表中，以改进缓存和维护工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:35:18.837

您不一定需要使用使用百分比分配宽度的浮动 div 来设计它。相反，您可以为您希望支持的各种类型的平台设计一个 CSS 类，然后使用 CSS 媒体查询来切换它们。这就是 Twitter Bootstrap 等现代框架完成这项任务的方式。

例如：http: [//twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

# python - 将表转换为分层字典？

> ID：10193235
> 
> 赞同：8
> 
> 时间：2012-04-17T14:31:06.787
> 
> 标签：python, dictionary, nested

我有一张表格：

```
A1, B1, C1, (value)
A1, B1, C1, (value)
A1, B1, C2, (value)
A1, B2, C1, (value)
A1, B2, C1, (value)
A1, B2, C2, (value)
A1, B2, C2, (value)
A2, B1, C1, (value)
A2, B1, C1, (value)
A2, B1, C2, (value)
A2, B1, C2, (value)
A2, B2, C1, (value)
A2, B2, C1, (value)
A2, B2, C2, (value)
A2, B2, C2, (value) 
```

我想在 python 中使用它作为字典，形式为：

```
H = {
    'A1':{
        'B1':{
            'C1':[],'C2':[],'C3':[] },
        'B2':{
            'C1':[],'C2':[],'C3':[] },
        'B3':{
            'C1':[],'C2':[],'C3':[] }
    },
    'A2':{
        'B1':{
            'C1':[],'C2':[],'C3':[] },
        'B2':{
            'C1':[],'C2':[],'C3':[] },
        'B3':{
            'C1':[],'C2':[],'C3':[] }
    }
} 
```

这样就`H[A][B][C]`产生了一个特定的唯一值列表。对于小型字典，我可能只是像上面那样提前定义结构，但我正在寻找一种有效的方法来遍历表并构建字典，而无需提前指定字典键。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T14:35:25.293

```
input = [('A1', 'B1', 'C1', 'Value'), (...)]

from collections import defaultdict

tree = defaultdict(lambda: defaultdict(lambda: defaultdict(list)))
#Alternatively you could use partial() rather than lambda:
#tree = defaultdict(partial(defaultdict, partial(defaultdict, list)))

for x, y, z, value in input:
    tree[x][y][z].append(value) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T14:48:22.197

如果您只访问 H[A][B][C] （也就是说，永远不会单独访问 H[A] oder H[A][B]），我建议使用 IMO 更清洁的解决方案：使用元组作为 defaultdict 索引：

```
from collections import defaultdict
h = defaultdict(list)
for a, b, c, value in input:
    h[a, b, c].append(value) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T14:37:28.250

```
d = {}
for (a, b, c, value) in your_table_of_tuples:
   d.setdefault(a, {}).setdefault(b,{}).setdefault(c,[]).append(value) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-10T07:44:38.693

这适用于任意数量的键：

```
def parse_table_to_tree(table):
    tree = dict()
    for row in table:
        tree = attach_leaf(tree, row[:-1], row[-1])
    return tree

def attach_leaf(tree:dict, keys:list, value):
    d = tree
    for i, key in enumerate(keys):
        if i < len(keys)-1:
            d = d.setdefault(key, {})
        else:
            d[key] = value
    return tree

tree = parse_table_to_tree(
    [
        ['a', 'b', 'c', []],
        ['a', 'b', 'd', []],
        ['a', 'f', 'a', []]
    ]
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-08T11:14:44.700

但是，如果您没有三个级别，而是可能有十个级别怎么办？很确定你可以用一个while循环来做到这一点，但这就是我想出的（警告：对可变性和指针的极端利用）

```
def build_tree(data, categories):
    """Build a dependency tree based on a Pandas DataFrame and an
    ordered list of levels.

    Parameters
    ----------
    data : pandas.core.frame.DataFrame
        A DataFrame containing the table to derive tree from
    categories : array_like
        An ordered, sliceable list of column names to include in tree

    Returns
    -------
    hierarchy : dict
        A standard Python dictionary
        """
    hierarchy = {}
    def expand(data, categories, current_level):
        if len(categories) == 2:
            for value in data[categories[0]].unique():
                current_level[value] = data.loc[data[categories[0]] == value, categories[1]]
        else:
            for value in data[categories[0]].unique():
                current_level[value] = {e: None for e in data.loc[data[categories[0]] == value, categories[1]].unique()}
                expand(data.loc[data[categories[0]] == value, :], categories[1:], current_level[value])
    expand(data, categories, hierarchy)
    return hierarchy 
```

我觉得一些 for 循环可能会更好，但不是总是这样吗？

这也取决于在您的层次结构底部找到的单个键/值对。

# magento - Magento Memcached 已启用并正常工作，但管理网格过滤器丢失

> ID：10193236
> 
> 赞同：0
> 
> 时间：2012-04-17T14:31:06.897
> 
> 标签：magento, memcached

我在我的 Magento 安装中启用了 memcache，如下所示：

```
<cache>
    <prefix>mysiteprefix</prefix>
    <backend>memcached</backend>
    <memcached>
        <servers>
            <server>
                <host><![CDATA[127.0.0.1]]></host>
                <port><![CDATA[11212]]></port>
                <persistent><![CDATA[1]]></persistent>
            </server>
        </servers>
    <compression><![CDATA[0]]></compression>
    <cache_dir><![CDATA[]]></cache_dir>
    <hashed_directory_level><![CDATA[]]></hashed_directory_level>
    <hashed_directory_umask><![CDATA[]]></hashed_directory_umask>
    <file_name_prefix><![CDATA[]]></file_name_prefix>
  </memcached>
</cache> 
```

如您所见，我有 2 个 memcache 实例正在运行（端口 11212 和 11211）。
自从我启用此功能以来，该站点运行良好且速度更快，但是似乎我在管理区域的网格上应用的任何过滤器都不会被记住。
如果我恢复将会话保存在文件中，它就会再次起作用。
除此之外，一切似乎都运行良好。知道可能是什么原因造成的吗？

[编辑] Magento 版本是 1.4.1.1

# javascript - Google Maps API：Gables.com 如何创建自定义 InfoWINdows？

> ID：10193237
> 
> 赞同：2
> 
> 时间：2012-04-17T14:31:10.910
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我真的很喜欢 Gables.com 如何在这里创建他们的自定义谷歌地图信息窗口和标记：

[http://gables.com/find/where?utf8=%E2%9C%93&floorplans=any&group=&query=75254&beds=&baths=&rent_min=&rent_max=&pet_friendly=](http://gables.com/find/where?utf8=%E2%9C%93&floorplans=any&group=&query=75254&beds=&baths=&rent_min=&rent_max=&pet_friendly=)

我特别喜欢 Gables 实现 InfoWindow 和 Map Marker 的一点是：

它本质上结合了地图标记和信息窗格窗口，使其几乎成为一体：当您单击带有缩略图的地图标记时，地图标记会展开，缩略图图像会变大，并且会弹出一个侧面板作为信息窗格窗口，您的信息可以放在其中，您可以单击减号，它将窗口折叠回缩略图标记。如果可以的话，我想添加的唯一更改是当您单击另一个标记时，当前打开的信息窗格会自动关闭。

任何人都知道 Gables.com 如何在 Google Maps API v3 上完成类似于 InfoWindow 的实现，如果有可能实现这一点，当您单击另一个标记时，当前的标记会自动折叠？先感谢您。

-布鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T02:27:48.550

他们可能会使用 InfoBox，这是一个自定义的 InfoWindow ...请参见此处： [http](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries) ://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries 并查找 InfoBox :)祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T02:41:46.173

看看他们的源代码：[http://gables.com/javascripts/map.js](http://gables.com/javascripts/map.js)，他们正在使用 OverlayView：[https](https://developers.google.com/maps/documentation/javascript/reference#OverlayView) ://developers.google.com/maps/documentation/javascript/reference#OverlayView 。

# maven - 使用 Gradle 快照依赖项

> ID：10193240
> 
> 赞同：7
> 
> 时间：2012-04-17T14:31:17.267
> 
> 标签：maven, dependencies, gradle, build.gradle

免责声明：我对 Gradle 还很陌生。

我正在尝试使用来自 Maven 人工制品的快照依赖项来使用 Gradle (1.0-rc1) 构建我的项目。

但是当我尝试使用解决依赖关系时`gradle --info dependencies`，我收到以下错误：

```
FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':dependencies'.
> Could not resolve all dependencies for configuration ':compile'.
   > Could not resolve group:com.l2fprod, module:l2fprod-common-all, version:7.3.
     Required by:
         :test:unspecified > org.valkyriercp:valkyrie-rcp-core:1.1-SNAPSHOT
      > Could not HEAD 'https://raw.github.com/Ekito/maven-repo/master/ \
        snapshots/com/l2fprod/l2fprod-common-all/7.3/l2fprod-common-all-7.3.jar'.
   > Could not resolve group:org.valkyriercp, module:valkyrie-rcp-resources, 
     version:1.1-SNAPSHOT.
     Required by:
         :test:unspecified > org.valkyriercp:valkyrie-rcp-core:1.1-SNAPSHOT
      > Could not resolve group:org.valkyriercp, module:valkyrie-rcp, 
        version:1.1-SNAPSHOT.
         > Could not HEAD 'https://raw.github.com/Ekito/maven-repo/master/ \
           snapshots/org/valkyriercp/valkyrie-rcp/1.1-SNAPSHOT \
           /valkyrie-rcp-1.1-SNAPSHOT.jar'. 
```

但是 Maven artefact`valkyrie-rcp`不是一个 jar，而是一个 pom，它是我尝试下载的 artefact 的父模块。

如果我使用 Maven 来构建项目，效果会很好。

这是一个重现该问题的简单`build.gradle`文件：

```
apply plugin: 'java'

dependencies {
        compile group: 'org.valkyriercp', name:'valkyrie-rcp-core', version:'1.1-SNAPSHOT'
        compile 'org.slf4j:slf4j-log4j12:1.6.4'
}

repositories {
    mavenCentral()
    maven {
        url "https://raw.github.com/Ekito/maven-repo/master/snapshots/"
    }
} 
```

我究竟做错了什么 ？它是具有快照依赖关系的 Gradle 错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:13:06.383

我怀疑 gradle 如何处理快照依赖项是一个错误（快照依赖项对我来说适用于 rc1）。

例外是

您确定所需的工件“com.l2fprod，模块：l2fprod-common-all，版本：7.3”在您的存储库中吗？（valkyrie-rcp-core 的依赖项不应该是“com.l2fprod.common , module:l2fprod- **common** -all, version:7.3”吗？）

# coldfusion - 计算小数赔率

> ID：10193241
> 
> 赞同：0
> 
> 时间：2012-04-17T14:31:18.493
> 
> 标签：coldfusion, coldfusion-9

回顾一些旧代码

```
<!--- RANDOMLY DECIDE IS THIS PERSONS A WINNER 1 IN 8 CHANCE--->
<cfset attributes.random_point = RandRange(1, 8)>

<cfif attributes.random_point eq 5>
  WINNER
<cfelse>
  You got nothing!
</cfif> 
```

如何将其转换为小数赔率？从现在开始，我想用小数赔率来确定得到 x 的变化。例如，我有 1.10 或 1.11 的机会获得 x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:52:24.520

如果我理解正确，那么我会将获胜的百分比定义为小数，然后依赖 Rand()，尽管这仍然感觉不理想

```
<cfscript>
    numChanceToWin = 0.15;  // <= this == winner == 15% chance to win
    numRandom = Rand(); // decimal from 0 to 1

    if (numRandom <= numChanceToWin ) {
        // Winner
    } else {
        // Loser
    }
<cfscript> 
```

也可以通过设置`numChanceToWin = 1/8;`或什至与您的 1/8 定义一起使用`if (numRandom/numChanceToWin <= 1) { // Winner`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:46:36.177

我只需将 attributes.random_point 设为 randrange(1,100)/100

```
<!--- RANDOMLY DECIDE IS THIS PERSONS A WINNER 1 IN 8 CHANCE--->
<cfset attributes.random_point = RandRange(0, 100)/100>

<cfif attributes.random_point lt 0.11>
  WINNER
<cfelse>
  You got nothing!
</cfif> 
```

# .net - 在 C++ .net 控制台应用程序中更改控制台图标的简单方法？

> ID：10193245
> 
> 赞同：0
> 
> 时间：2012-04-17T14:31:36.263
> 
> 标签：.net, windows, console, icons

我有一个 C++ .NET 控制台应用程序，我更改了文件管理器中显示的图标。这是正确的。但我也希望在控制台的顶部栏中和任务栏中更改图标。它仍然让旧的默认图标。

我看到浏览所以 SetConsoleIcon() 存在，但它似乎是一个 Win32 API 调用？？？？我不能用另一种方法来使用 .NET 调用来完成这项工作吗？

如果您对此有任何想法，请告诉我（其他用户）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:35:15.407

使用“纯”.NET 是不可能的，因为从应用程序的角度来看，控制台没有图标。

带有图标窗口的控制台只是一个实现细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:43:40.760

更新（对于 C++ VS2010）

1.  如果您没有任何资源文件（rc）（默认情况下`app.rc`应该存在），请添加资源文件（rc）。
2.  将图标添加到资源
3.  设置图标的 ID 值小于默认图标的 ID 值（默认`app.ico`应该存在）。

# c# - MSHTML HTMLHeadElementClass COM 错误

> ID：10193253
> 
> 赞同：1
> 
> 时间：2012-04-17T14:32:01.800
> 
> 标签：c#, com, mshtml, comobject

我目前正在使用 MS HTML 将 JavaScript 代码插入网站。

我参考了 Microsoft HTML 对象库并键入了此代码。

```
IHTMLDocument2 doc = BrowserHost.Document as HTMLDocumentClass;
IHTMLElement head = (IHTMLElement)
      ((IHTMLElementCollection)doc.all.tags("head")).item(null, 0);
IHTMLScriptElement scriptObject = 
      (IHTMLScriptElement)doc.createElement("script");
scriptObject.type = @"text/javascript";
scriptObject.text = TTS.TTSWebFactory.GetJavascript();
((HTMLHeadElementClass)head).appendChild((IHTMLDOMNode)scriptObject); 
```

我在脚本的最后一行收到错误消息，这是消息。

```
Unable to cast COM object of type 'System._ComObject' to class type 
'mshtml.HTMLHeadElementClass'. COM components that enter the CLR and do not 
support IProvideClassInfo or that do not havae any iterop assembly registered 
will be wrapped in the _ComObject type. Instances of this type cannot be cast 
to any other class; however they can be cast to interfaces as long as the 
underlying COM component supports QueryInterface calls for the IID of the 
interface 
```

我对 COM 没有太多经验，将最后一行保留在他的代码中很重要，任何人都可以帮助我理解这意味着什么以及我如何解决它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T17:26:37.890

从 mshtml.tlb 这样的类型库中获得的互操作类存在一个非常严重的问题。类型库导入器从类型库中的 coclass 定义生成合成 .NET 类。您可以从它们的类型名称中识别它们，它们以“类”结尾并以接口类型的名称开头。它们旨在提供帮助，允许您将 COM coclass 视为 .NET 类。

然而，它们会导致非常严重的版本控制问题。当我使用 oleview.exe 查看我机器上的 mshtml.tlb 时，我看到了 HTMLHeadElement coclass 的这个定义：

```
[
  uuid(3050F493-98B5-11CF-BB82-00AA00BDCE0B),
  noncreatable
]
coclass HTMLHeadElement {
    [default] dispinterface DispHTMLHeadElement;
    [default, source] dispinterface HTMLElementEvents;
    [source] dispinterface HTMLElementEvents2;
    interface IHTMLElement;
    interface IHTMLElement2;
    interface IHTMLElement3;
    interface IHTMLElement4;
    interface IHTMLUniqueName;
    interface IHTMLDOMNode;
    interface IHTMLDOMNode2;
    interface IHTMLElement5;
    interface IHTMLDOMConstructor;
    interface IHTMLHeadElement;
    interface IHTMLHeadElement2;
}; 
```

当我在源代码中右键单击 mshtml.HtmlHeadElementClass 并选择 Go To Definition 时，我会看到：

```
public class HTMLHeadElementClass : DispHTMLHeadElement, HTMLHeadElement, 
   HTMLElementEvents_Event, IHTMLElement, IHTMLElement2, IHTMLElement3, 
   IHTMLElement4, IHTMLUniqueName, IHTMLDOMNode, IHTMLDOMNode2, 
   IHTMLHeadElement, IHTMLElementEvents2_Event {
   // Lots of members
   //...
} 
```

注意两者之间的不匹配。我从 Oleview 得到的那个有*额外的*接口，IHtmlElement5 和 IHtmlHeadElement2。原因很简单，我的机器上安装了IE9。互操作定义来自 mshtml PIA。这是一个*旧*版本，可能可以追溯到 IE7。

可怕的问题是新的 IHtmlElement5 接口被*插入*到继承列表中。这是一个非常严重的错误，至少就 .NET 代码而言。纯 COM 代码根本不重要，它只适用于接口，并通过 QueryInterface 向 coclass 请求接口指针。然而，这对 .NET 包装类来说是**致命**的，所有通过 IHTMLDOMNode2 的方法都有错误的偏移量。因此，如果您调用 IHTMLHeadElement.appendChild 方法，那么您最终会调用**错误**的方法。

这是一个无法解决的问题。您可以卸载 PIA 并生成您自己的 interop.mshtml.dll 互操作库，它将在您的机器上正常工作。但它不会在另一台没有安装 IE9 的机器上正常工作。

但是有一个很好的解决方法，*只是不要使用 XxxClass classes*。仅使用接口类型。这应该类似于（在 Winforms 应用程序中测试）：

```
 var doc = (IHTMLDocument2)webBrowser1.Document.DomDocument;
        var headItems = (IHTMLElementCollection)doc.all.tags("head");
        var scriptObject = (IHTMLScriptElement)doc.createElement("script");
        scriptObject.type = @"text/javascript";
        //scriptObject.text = TTS.TTSWebFactory.GetJavascript();
        var node = (IHTMLDOMNode)headItems.item(null, 0);
        node.appendChild((IHTMLDOMNode)scriptObject); 
```

我故意使用转换为 (IHTMLDOMNode) 而不是 (IHTMLHeadElement) 的地方，因为那个较小的接口已经足以访问*item*元素。

# android - 是否可以将客户注册为 App Store 署名中可见的“开发团队”或“子开发”？

> ID：10193254
> 
> 赞同：3
> 
> 时间：2012-04-17T14:32:07.497
> 
> 标签：android, iphone, app-store, google-play

更普遍：

在 App Store 和 Google Play/Android Market 中显示客户公司名称的策略。

这个问题的基础是支付应用程序开发费用的公司需要让他们的公司被视为应用程序的创始人。将其作为搜索词或在描述中提及是不够的，他们希望在署名中使用它。

我想你们大多数人都知道这个问题，这很奇怪，因为直截了当的解决方案既明显又会导致很多问题：多个帐户。

我们的客户很乐意为单独的 Apple Developer 帐户付费，但随之而来的是不可避免地设置单独的 Apple ID、可下载的证书、像多个设置一样进行相同的 XCode 安装，等等……如果有人已经设法想出了一个让这个过程变得简单和无缝的过程，并认为多个帐户真的很简单，我想学习这个过程。任何多个帐户都将由我们为客户注册、开发和管理。

在市场上，这个过程可能要容易得多，所以我只想调查一下陷阱，如果你有的话。只需注册另一个帐户并使用正确的反向域 ID 上传任何 .apk 即可？

如果你有争论，你曾经用多个账户说服客户，我想知道他们。此外，加强他们在应用程序或应用商店中的品牌推广的技术，以便他们将客户的公司名称明确地链接到应用程序而不是开发人员。

基本上，我只是想找到避免头痛的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:22:05.453

如果它是一家公司，那么您可以在应用商店中仅使用他们的名字进行注册。我记得，他们要求我们将公司的商业登记和其他税务信息传真给他们，这些信息会以卖家的身份显示在应用商店的页面上。据我了解，即使与公司有关，他们也不希望您使用该名称。

# c# - 是否可以从 Windows 窗体中的 SplitContainer 中删除 panel2？

> ID：10193255
> 
> 赞同：6
> 
> 时间：2012-04-17T14:32:07.807
> 
> 标签：c#, .net, winforms

我有一个带有 SplitContainer 的 Windows 窗体。我需要从这个容器中隐藏/删除 panel2 并且我希望 panel1 占据整个表单。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T14:34:52.800

将属性设置[`Panel2Collapsed`](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.panel2collapsed.aspx)为 true：

```
splitContainer.Panel2Collapsed = true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T14:35:03.110

[http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.panel2.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.panel2.aspx)

无法将其删除。

但是，您可以隐藏它：

```
splitContainer1.Panel2.Hide(); 
```

# java - Struts2复选框保存到其他bean

> ID：10193260
> 
> 赞同：1
> 
> 时间：2012-04-17T14:32:47.547
> 
> 标签：java, checkbox, struts2

我在将复选框值保存到某个 bean 时遇到问题。使用文本等其他内容都可以。如果我将复选框值保存到 MyAction 类，我也没有任何问题。只有当我尝试在课堂上使用一些 bean 时才会出现问题。

示例jsp：

```
<s:form>
<s:checkbox name="myBean.flag"/>
<s:submit/>
</s:form> 
```

======

示例java代码：

```
public class MyAction extends Action {
private MyBean myBean;

public MyBean getMyBean(){
     if(myBean == null){myBean = new MyBean();}return myBean;}
}

public void setMyBean(MyBean myBean){this.myBean = myBean;}

} 
```

...

```
public class MyBean {
private boolean flag;

public MyBean isFlag(){return flag;}

public void setFlag(boolean flag){this.flag = flag;}
} 
```

======

PS 似乎我和这个人有更多相同的问题：http: [//www.coderanch.com/t/448207/Struts/Struts-Checkbox-set-value-back](http://www.coderanch.com/t/448207/Struts/Struts-Checkbox-set-value-back)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:45:54.547

正确`aFlag`并`flag`添加`value`以下内容`checkbox`：

```
<s:checkbox name="myBean.aFlag"/> 
```

至：

```
<s:checkbox name="flag" value="flag" label="My CheckBox"/> 
```

但是在您的`MyAction`课程代码中只需编辑：

```
boolean flag;

public boolean isFlag() {
     if(myBean == null) {
         myBean = new MyBean();
     } 
     return myBean.getFlag();
}

public void setFlag(boolean flag) {
      this.myBean.setFlag(flag); 
      this.flag = flag;
} 
```

# asp.net - 对更改 Microsoft ASP.NET 控件呈现 HTML 标记的方式感兴趣

> ID：10193270
> 
> 赞同：-2
> 
> 时间：2012-04-17T14:33:21.470
> 
> 标签：asp.net, html, html-rendering

我正在使用 Microsoft .NET Framework 4.0 SP1Rel 和 Visual STudio 2010 10 SP1Rel。我的团队正在开发的 Web 应用程序使用诸如 `<asp:Login/>`, `<asp:TemplateField/>`, `<asp:GridView/>`tags blah blah blah 之类的标签......

当 microsoft .NET 框架标签呈现 HTML`<table>`标签时，这是非常糟糕的做法。

我怎样才能更好地控制 microsoft .NET 框架如何呈现这些 HTML 标记？我显然想使用 div 而不是表格。能否请我知道关于我希望 Microsoft ASP.NET 控件如何呈现 HTML 标记的更多发言权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:44:56.600

大多数非表格控件都可以选择呈现为`<li>`或`<div>`代替`<table>`.

`<asp:GridView>`是表格的，所以使用表格很有意义，但如果你想更好地控制输出，你可以使用`<asp:Repeater>`。

但是，如果您想完全控制生成的 html 标记，ASP.NET WebForms 不是最佳选择。[ASP.NET MVC](http://asp.net/mvc)在这方面要灵活得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:40:34.090

如果可能，请使用[控制适配器](http://msdn.microsoft.com/en-us/magazine/cc163543.aspx)或更好地切换到 ASP.NET MVC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:35:28.663

如果你真的不喜欢它，你可以用[自定义控件](http://msdn.microsoft.com/en-us/library/zt27tfhy.aspx)自己做。

但在重新发明 .NET 轮子之前，我会三思而后行。

# iphone - 为设备而不是模拟器构建的静态 iOS 库

> ID：10193271
> 
> 赞同：5
> 
> 时间：2012-04-17T14:33:23.800
> 
> 标签：iphone, ios, xcode, linker

出现此错误，尽管该库位于“与二进制库链接”区域中并且还包含头文件。

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_TestLibraryEric", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

为模拟器构建时出现此错误，但不是为设备构建。我以相反的方式看到了这个问题，它是为模拟器构建的，而不是为设备构建的。Build for active architecture only 设置为 NO Any idea?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:50:39.657

该错误意味着`TestLibraryEric`仅为设备构建（为 ARM 架构编译），而不是为模拟器（i386 架构）构建。

如果库是您创建的库，则需要更改构建设置。

在`Supported Platforms`现场，你应该有`iphoneos`.

添加`iphonesimulator`，您的库将为设备和模拟器构建。

做一个干净的，重建图书馆，它应该可以解决问题。

# c# - 代码在 WinXP 但不是 Win7 上工作的问题。为什么？

> ID：10193275
> 
> 赞同：2
> 
> 时间：2012-04-17T14:33:44.633
> 
> 标签：c#, windows-7, datagridview, windows-xp, bindingsource

最近我的代码一直有问题，我似乎无法弄清楚。我第一次编写代码时使用的是运行 WinXP 的计算机。但现在我试图在运行 Win7 的计算机上运行完全相同的代码，但它不起作用。现在当我说它不起作用时，我的意思是特定的代码行不起作用。其余代码运行。

这是有问题的代码：

```
 dataGridView1.DataSource = bindingSource1;
    GetData("SELECT Lastname, Firstname, DOB, SSAN, Minor FROM Children WHERE Children.ParentID = " + id + ""); 
```

上面的代码在我的 Form1_Load 中，应该在程序打开时运行并填充 dataGridView。

这是 GetData() 方法：

```
 private void GetData(string selectCommand)
    {
        try
        {
            string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source = U:/Syndicate II/Syndicate II.accdb;Persist Security Info = False"; //"Provider=Microsoft.ACE.OLEDB.12.0;Data Source = C:/Documents and Settings/David/Desktop/SyndicateII/SyndicateII/Syndicate II.accdb;Persist Security Info = False";

            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(selectCommand, connectionString);

            OleDbCommandBuilder builder = new OleDbCommandBuilder(dataAdapter);

            DataTable table = new DataTable();
            table.Locale = System.Globalization.CultureInfo.InvariantCulture;
            dataAdapter.Fill(table);
            bindingSource1.DataSource = table;

            dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;

        }
        catch(OleDbException)
        {
            MessageBox.Show("didn't work");
        }
    } 
```

这两段代码给我带来了问题。就像我说的，它可以在 WinXP 计算机上运行。但是当我在Win7电脑上运行它时，它不起作用。我尝试通过在代码中放置消息框以查看它们是否运行来测试它。所以看起来代码块只是没有运行，我不知道为什么。为了让事情变得更加混乱，代码曾经可以工作。当我第一次开始使用 Win7 comp 时，代码可以工作。一段时间后它有时会起作用。而现在它只是行不通。

我希望我已经清楚地描述了我的问题。我能得到的任何帮助都将不胜感激。

# fancybox - Fancybox 2.0.5 hideOnContentClick

> ID：10193278
> 
> 赞同：1
> 
> 时间：2012-04-17T14:33:47.653
> 
> 标签：fancybox

如何在 fancybox 2.0.5 中使用 hideOnContentClick？

'hideOnContentClick'：真

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T21:25:23.960

Fancybox v2.x 是新的，与以前的版本不兼容。`hideOnContentClick`已被替换`closeClick`。如果您还想在单击叠加层时阻止关闭花式框，请使用`helpers`=> `overlay`=>`closeClick`选项，例如：

```
$(document).ready(function() {
 $(".fancybox").fancybox({
  closeClick  : false,
  helpers   : { 
   overlay : {closeClick: false}
  }
 });
}); 
```

# c++ - C++派生类中的反射工厂无法访问受保护的方法？

> ID：10193280
> 
> 赞同：1
> 
> 时间：2012-04-17T14:33:54.363
> 
> 标签：c++, templates, inheritance, reflection

受到[Johannes Schaub 回答的](https://stackoverflow.com/a/582456/44232)启发，我尝试实现一个反射工厂。这个想法是，您可以通过将类的名称传递给在堆上创建相关对象并返回指向公共基类的指针的方法来创建对象。如有必要，可以使用 dynamic_cast 和 RTTI 将对象转换回其原始类型。应该可以使用下图的反射工厂：

```
// Base is the base class of all objects to create.
class Factory: public AbstractFactory<Base>
{
public:
    Factory()
    {
        m_map["DerivedA"] = &AbstractFactory::createInstance<DerivedA>;
        m_map["DerivedB"] = &AbstractFactory::createInstance<DerivedB>; 
    }
};

int main()
{
    Factory factory;
Base *a = factory.Create("DerivedA");
DerivedA *aa = dynamic_cast<DerivedA*>(a);

    // etc..
} 
```

到目前为止，我已经完成了这项工作。但是，下面的代码有两个主要问题。它很丑陋，如果我让抽象工厂的方法受到保护，它会抱怨它无法访问该`createInstance()`方法。这是我不明白的。根据定义，派生类应该能够访问基类的受保护方法。我在 VS 2008 中测试了代码。进一步说明：我知道基类并不是真正抽象的，因为它不包含纯虚函数。我知道 std::function 但是到目前为止我还没有使用它。也许我将来会做。

```
#include <iostream>
#include <map>
#include <typeinfo>
#include <string>

struct Base
{
    virtual std::string SayHello() = 0;
};

struct DerivedA: public Base
{

    virtual std::string SayHello() 
    {
        return "Hello from DerivedA";
    }

};

struct DerivedB: public Base
{

    virtual std::string SayHello() 
    {
        return "Hello form DerivedB";
    }

};

/**
 * @brief Reflective Factory class. Creates objects of classes which derive from
 *        a common base class.
 *
 */
template<class BASE_T>
struct AbstractFactory
{

// Macro to call ptrs to member functions as recommended in the C++ FAQ lite.
// http://www.parashift.com/c++-faq-lite/pointers-to-members.html
#define CALL_MEMBER_FN(object, ptrToMember) ((object).*(ptrToMember))

    // Recall funcion ptr syntax for members: ReturnType (class::*) (Arguments)

    // using a typedef makes it easier..
    typedef BASE_T*  (AbstractFactory::*func_ptr_type) ();
    // retType^ ClassName^ AliasName^  Arguments^

    typedef std::map<std::string, func_ptr_type> map_type;

    template<typename DERIVED_T> 
    BASE_T * createInstance() 
    { return new DERIVED_T; }

    map_type m_map;

    /**
     * @brief Creates an object from a class with the name given as string.             
     */
    BASE_T * Create(std::string className)
    {
        // Note the last () at the end.
        return CALL_MEMBER_FN(*this, m_map[className])();
    }

#undef CALL_MEMBER_FN

};

class Factory: public AbstractFactory<Base>
{

public:

    Factory()
    {
        m_map["DerivedA"] = &AbstractFactory::createInstance<DerivedA>;
        m_map["DerivedB"] = &AbstractFactory::createInstance<DerivedB>; 
    }

};

int main()
{
    Factory factory;

    Base *a = factory.Create("DerivedA");

    DerivedA *aa = dynamic_cast<DerivedA*>(a);

    std::cout << typeid(a).name()  << std::endl;
    std::cout << typeid(*a).name()  << std::endl;
    std::cout << typeid(aa).name() << std::endl;

    std::cout << aa->SayHello() << std::endl;

    std::cin.get();

    return 0;
} 
```

**更新**

我使用 VS 2008 得到的确切错误是（在德语中，抱歉不是我的选择..）

```
1>------ Erstellen gestartet: Projekt: ReflectiveFactory, Konfiguration: Debug Win32 ------
1>Kompilieren...
1>main.cpp
1>.\main.cpp(82) : error C2248: "AbstractFactory<BASE_T>::createInstance": Kein Zugriff auf protected Member, dessen Deklaration in der AbstractFactory<BASE_T>-Klasse erfolgte.
1>        with
1>        [
1>            BASE_T=Base
1>        ]
1>        .\main.cpp(55): Siehe Deklaration von 'AbstractFactory<BASE_T>::createInstance'
1>        with
1>        [
1>            BASE_T=Base
1>        ]
1>.\main.cpp(83) : error C2248: "AbstractFactory<BASE_T>::createInstance": Kein Zugriff auf protected Member, dessen Deklaration in der AbstractFactory<BASE_T>-Klasse erfolgte.
1>        with
1>        [
1>            BASE_T=Base
1>        ]
1>        .\main.cpp(55): Siehe Deklaration von 'AbstractFactory<BASE_T>::createInstance'
1>        with
1>        [
1>            BASE_T=Base
1>        ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:56:01.897

该`Create`方法必须可供最终用户访问，这意味着该方法要么`public`在其中，要么`AbstractFactory`已移至`Factory`该处并公开。中的其余代码`AbstractFactory`可以受到保护。

似乎只有 gcc 接受代码（clang++，comeau 拒绝它）并且它可以被正确地拒绝（我必须研究标准）。无论如何，一个简单的解决方法是创建一个帮助函数，为您提供成员函数指针：

```
template <typename B>
template <typename D>
AbstractFactory<B>::func_ptr_type AbstractFactory<B>::getCreateInstancePtr() const {
   return &AbstractFactory<B>::createInstance<D>;
} 
```

模板的这个模板成员方法`AbstractFactory`可以受到保护，因为您在实际中直接在自己的基础上调用它`Factory`：

```
Factory::Factory() {
        m_map["DerivedA"] = getCreateInstancePtr<DerivedA>();
        m_map["DerivedB"] = getCreateInstancePtr<DerivedB>();
} 
```

* * *

与标准核对后：

11.5p1 [class.protected]

> 除非形成指向成员的指针（5.3.1），否则访问必须通过派生类本身（或从该类派生的任何类）的指针、引用或对象（5.2.5）。**如果访问要形成指向成员的指针，则嵌套名称说明符应命名派生类（或从该类派生的任何类）**。

也就是说，表达式`m_map["DerivedA"] = &AbstractFactory::createInstance<DerivedA>;`不正确，而`m_map["DerivedA"] = &Factory::createInstance<DerivedA>;`正确（关于访问说明符，但不是类型，左侧是 an `B* (AbstractFactory<B>::*)( std::string )`，右侧是 a `B* (Factory::*)( std::string )`，因此赋值会失败。

这与其他任何地方的语义都很好，`protected`特别是不能访问除您自己的基本子对象以外的受保护成员：

```
class base {
protected:
   int x;
};
struct derived : base {
   static void f( base& b ) {
      b.x = 5;                 // Error: cannot access base::x from this context
   }
}; 
```

# command-line - 用于复制文件的批处理文件

> ID：10193283
> 
> 赞同：1
> 
> 时间：2012-04-17T14:33:58.823
> 
> 标签：command-line, batch-file, copy, dos, xcopy

我希望在服务器迁移期间进行一些大规模的复制，我需要更好地理解 Windows Server 中的复制命令。我一直在玩弄 xcopy，但我真的很难完全理解它。那里有一些好的文献，或者任何人都可以帮助我吗？我可以使用任何其他软件或命令吗？

我希望对 37 台服务器的完整阵列执行此操作，因此我正在寻找有关创建脚本的指导，我可以将多个目录输入到其中，这样我就可以让它运行只要需要。

到目前为止，这就是我一直在做的事情：

```
xcopy C:\Directory\*.* \\Server\Directory\*.* /S /V 
```

它正在工作，但是当我遇到错误时它会停止......而且我不确定我应该为这个项目启动批处理文件的方向。我应该使用变量吗？我应该提示输入目录吗？什么是“最好”的方式？

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:40:45.747

机械师1264889,

您在这里有几个不同的问题，我将尝试将它们分开并回答。

第一：了解 xCopy 及其所有触发器。首先，在命令提示符本身中有一些很好的文献：

```
> xcopy /? 
```

这将为您提供可以使用的可能触发器列表。

否则，网上有一些很好的文献：[xCopy Wiki](http://en.wikipedia.org/wiki/XCOPY)

在这里，您将找到您正在尝试做的事情的示例。

阅读该信息后，我相信您需要在字符串中包含 /C 以避免在 xCopy 发现错误时停止。

```
xcopy C:\Directory\*.* \\Server\Directory\*.* /S /V /C 
```

即使发现错误也会继续。

另外，您是否尝试过 roboCopy？

```
> robocopy /? 
```

同样，在这里您将获得可能的触发器列表。

以及此链接：[roboCopy Wiki](http://en.wikipedia.org/wiki/Robocopy)

我希望你能在这里找到你要找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:43:14.760

现在开始实际解决您的要求。

我在工作中也遇到了类似的问题。我实际上已经开发了一些代码，可以一次复制 3 个副本（roboCopy 或 xCopy），并将创建脚本供以后使用。

试试这个，让我知道它是否有效！

```
@ECHO OFF
COLOR 0A
TITLE product_X Migration Copy Tool

echo.This script should always be run FROM the Source Machine
echo.
choice /C:RX /N /M "(R)RoboCopy or (X)Xcopy:" 
IF '%ERRORLEVEL%'=='1' set copyMode=Robo
IF '%ERRORLEVEL%'=='2' set copyMode=X

cls
echo.Are you using UNC paths?
choice /C:YN /N /M "(Y)Yes or (N)No"
IF '%ERRORLEVEL%'=='1' set UNC=UNC
IF '%UNC%'=='UNC' GOTO regEdit
IF '%ERRORLEVEL%'=='2'  set UNC=drive
IF '%UNC%'=='drive' GOTO SourceDrive1

:SourceDrive1
cls
IF /I '%source1Error%'=='T' echo.Location does not exist, try again...
IF /I '%source1Error%'=='T' echo.
set source1Error=F
echo._.-*Set your FIRST copy source/destination*-._
echo.
set SourceDrive1=
set /p SourceDrive1=What is the Local folder you want to copy from?: 
IF NOT DEFINED SourceDrive1 set source1Error=T
IF /I '%source1Error%'=='T' GOTO SourceDrive1
echo.

:destDrive1
echo.
echo.What is the %UNC% location you want to copy %sourceDrive1% to?
set dest1Error=F
set destDrive1=
IF '%UNC%'=='UNC' echo.(Make sure you include the '\\' before your location)
set /p destDrive1=: 
IF NOT DEFINED destDrive1 set dest1Error=T
IF /I '%dest1Error%'=='T' echo.Location does not exist, try again...
IF /I '%dest1Error%'=='T' GOTO destDrive1
cls
verify >nul
echo.You will perform a %copyMode%Copy on %SourceDrive1%\*.* to %destDrive1%\*.*
echo.
echo.Is this correct?
echo.(If you choose (Z)Done you will move on to start %copyMode%Copying)
echo.
choice /C:YNXZ /N /M "(Y)Yes, (N)No, (X)Back or (Z)Done:" 
IF '%ERRORLEVEL%'=='1' GOTO SourceDrive2
IF '%ERRORLEVEL%'=='2' GOTO destDrive1
IF '%ERRORLEVEL%'=='3' GOTO SourceDrive1
IF '%ERRORLEVEL%'=='4' set allDone=1
IF '%ERRORLEVEL%'=='4' GOTO finalWarning

:SourceDrive2
cls
IF /I '%source2Error%'=='T' echo.Location does not exist, try again...
IF /I '%source2Error%'=='T' echo.
set source2Error=F
echo._.-*Set your SECOND copy source/destination*-._
echo.
set SourceDrive2=
set /p SourceDrive2=What is the next Local folder you want to copy from?: 
IF NOT DEFINED SourceDrive2 set source2Error=T
IF /I '%source2Error%'=='T' GOTO SourceDrive2
echo.

:destDrive2
echo.
echo.What is the %UNC% location you want to copy %SourceDrive2% to?
set dest2Error=F
set destDrive2=
IF '%UNC%'=='UNC' echo.(Make sure you include the '\\' before your location)
set /p destDrive2=: 
IF NOT DEFINED destDrive2 set dest2Error=T
IF /I '%dest2Error%'=='T' echo.Location does not exist, try again...
IF /I '%dest2Error%'=='T GOTO destDrive2
cls
verify >nul
echo.You will perform a %copyMode%Copy on %SourceDrive2%\*.* to %destDrive2%\*.*
echo.
echo.Is this correct?
echo.(If you choose (Z)Done you will move on to start %copyMode%Copying)
echo.
choice /C:YNXZ /N /M "(Y)Yes, (N)No, (X)Back or (Z)Done:" 
IF '%ERRORLEVEL%'=='1' GOTO SourceDrive3
IF '%ERRORLEVEL%'=='2' GOTO destDrive2
IF '%ERRORLEVEL%'=='3' GOTO SourceDrive1
IF '%ERRORLEVEL%'=='4' set allDone=2
IF '%ERRORLEVEL%'=='4' GOTO finalWarning

:SourceDrive3
cls
IF /I '%source3Error%'=='T' echo.Location does not exist, try again...
IF /I '%source3Error%'=='T' echo.
set source3Error=F
echo._.-*Set your SECOND copy source/destination*-._
echo.
set SourceDrive3=
set /p SourceDrive3=What is the last Local folder you want to copy from?: 
IF NOT DEFINED SourceDrive3 set source3Error=T
IF /I '%source3Error%'=='T' GOTO SourceDrive3
echo.

:destDrive3
echo.
echo.What is the %UNC% location you want to copy %SourceDrive3% to?
set dest3Error=F
set destDrive3=
IF '%UNC%'=='UNC' echo.(Make sure you include the '\\' before your location)
set /p destDrive3=: 
IF NOT DEFINED destDrive3 set dest3Error=T
IF /I '%dest3Error%'=='T' echo.Location does not exist, try again...
IF /I '%dest3Error%'=='T' GOTO destDrive3
cls
verify >nul
echo.You will perform a %copyMode%Copy on %SourceDrive3%\*.* to %destDrive3%\*.*
echo.
echo.Is this correct?
choice /C:YNX /N /M "(Y)Yes, (N)No or (X)Back"
IF '%ERRORLEVEL%'=='1' GOTO finalWarning
IF '%ERRORLEVEL%'=='2' GOTO destDrive3
IF '%ERRORLEVEL%'=='3' GOTO SourceDrive2

:finalWarning
cls
echo.
echo.             * * * WARNING * * *
echo.This will execute with the following variables
echo.
echo.%copyMode%Copy:
echo.%SourceDrive1%\*.* to %destDrive1%\*.*
echo.
IF '%allDone%'=='1' GOTO questionWarning
echo.%SourceDrive2%\*.* to %destDrive2%\*.*
echo.
IF '%allDone%'=='2' GOTO questionWarning
echo.%SourceDrive3%\*.* to %destDrive3%\*.*
echo.

:questionWarning
echo.Do you want to SAVE your config to use later?
echo.
echo.Select Yes to start, No to go to the beginning or Back to go back one step
choice /C:YNX /N /M "(Y)Yes, (N)No or (X)Back"
IF '%ERRORLEVEL%'=='1' set copyConfig=Y
IF '%ERRORLEVEL%'=='2' set copyConfig=N
IF '%ERRORLEVEL%'=='3' GOTO SourceDrive3
cls
IF /I '%copyConfig%'=='Y' goto saveConfig
IF /I '%copyConfig%'=='N' goto SourceDrive1

:preStart
FOR /F %%A IN ('TIME/T') DO SET time=%%A
FOR /F "tokens=1-4 delims=/ " %%B IN ('DATE /t') DO SET date=%%C/%%D/%%E
echo.
echo.Do you want to start %copyMode%Copying?
echo.Select Yes to start, No to go to the beginning or Back to go back one step
choice /C:YNX /N /M "(Y)Yes, (N)No or (X)Back"
IF '%ERRORLEVEL%'=='1' GOTO start
IF '%ERRORLEVEL%'=='2' GOTO SourceDrive1
IF '%ERRORLEVEL%'=='3' GOTO questionWarning

:start
IF NOT EXIST C:\TEMP\product_X\TEMP MD C:\TEMP\product_X\TEMP
echo.%date% -%time% - %copyMode%Copy Started>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
cls
echo.Running...
IF /I '%copyConfig%'=='Y' explorer.exe C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\
IF /I '%copyMode%'=='robo' goto roboCopy
IF /I '%copyMode%'=='X' goto xCopy

:xCopy
REM xcopy Source Destination /TRIGGERS
IF NOT EXIST %destDrive1% MD %destDrive1%
echo.%date% -%time% - %SourceDrive1%\*.* - to - %destDrive1%\*.*>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
xcopy %SourceDrive1%\*.* %destDrive1%\*.* /d /e /c /r /y

IF '%allDone%'=='1' GOTO end
IF NOT EXIST %destDrive2% MD %destDrive2%
echo.%date% -%time% - %SourceDrive2%\*.* - to - %destDrive2%\*.*>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
xcopy %SourceDrive2%\*.* %destDrive2%\*.*  /d /e /c /r /y

IF '%allDone%'=='2' GOTO end
IF NOT EXIST %destDrive3% MD %destDrive3%
echo.%date% -%time% - %SourceDrive3%\*.* - to - %destDrive3%\*.*>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
xcopy %SourceDrive3%\*.* %destDrive3%\*.*  /d /e /c /r /y

:roboCopy
IF NOT EXIST %destDrive1% MD %destDrive1%
IF NOT EXIST %destDrive1%\RoboCopy_Logfile MD %destDrive1%\RoboCopy_Logfile
echo.%date% -%time% - %SourceDrive1%\*.* - to - %destDrive1%\*.*>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
robocopy %SourceDrive1%\*.* %destDrive1%\*.* /R:5 /W:3 /Z /XX /TEE /LOG+:%destDrive1%\RoboCopy_Logfile\%destDrive1%_Log.txt

IF '%allDone%'=='1' GOTO end
IF NOT EXIST %destDrive2% MD %destDrive2%
IF NOT EXIST %destDrive2%\RoboCopy_Logfile MD %destDrive2%\RoboCopy_Logfile
echo.%date% -%time% - %SourceDrive2%\*.* - to - %destDrive2%\*.*>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
robocopy %SourceDrive2%\*.* %destDrive2%\*.* /R:5 /W:3 /Z /XX /TEE /LOG+:%destDrive2%\RoboCopy_Logfile\%destDrive2%_Log.txt

IF '%allDone%'=='2' GOTO end
IF NOT EXIST %destDrive3% MD %destDrive3%
IF NOT EXIST %destDrive3%\RoboCopy_Logfile MD %destDrive3%\RoboCopy_Logfile
echo.%date% -%time% - %SourceDrive3%\*.* - to - %destDrive3%\*.*>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
robocopy %SourceDrive3%\*.* %destDrive3%\*.* /R:5 /W:3 /Z /XX /TEE /LOG+:%destDrive3%\RoboCopy_Logfile\%destDrive3%_Log.txt
GOTO end

:regEdit
IF NOT EXIST C:\TEMP\product_X MD C:\TEMP\product_X
echo.Windows Registry Editor Version 5.00> C:\TEMP\product_X\DisableUNCCheck.reg
echo.;>> C:\TEMP\product_X\DisableUNCCheck.reg
echo.[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Command Processor]>> C:\TEMP\product_X\DisableUNCCheck.reg
echo."DisableUNCCheck"=dword:00000001>> C:\TEMP\product_X\DisableUNCCheck.reg
regedit /s C:\TEMP\product_X\DisableUNCCheck.reg
GOTO SourceDrive1

:end
echo.%copyMode%Copy Completed
echo.%date% -%time% - %copyMode%Copy Ended>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
echo.---------------------------------------------------------------->>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
echo.>>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt
pause
exit

:saveConfig
FOR /F "tokens=1-2 delims=: " %%B IN ('TIME /t') DO SET time=%%B%%C
FOR /F "tokens=1-4 delims=/ " %%B IN ('DATE /t') DO SET date=%%C%%D%%E
IF /I '%copyMode%'=='robo' goto roboCopySave
IF /I '%copyMode%'=='X' goto xCopySave

:xCopySave
IF NOT EXIST C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves MD C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves

echo.IF NOT EXIST %destDrive1% MD %destDrive1%>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.Saving file: C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat

echo.echo.%%date%% - %%time%% - %SourceDrive1%\*.* - to - %destDrive1%\*.*^>^>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.xcopy %SourceDrive1%\*.* %destDrive1%\*.* /d /e /c /r /y>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.echo.>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat

IF '%allDone%'=='1' GOTO preStart
echo.echo.IF NOT EXIST %destDrive2% MD %destDrive2%>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.echo.%%date%% - %%time%% - %SourceDrive2%\*.* - to - %destDrive2%\*.*^>^>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.xcopy %SourceDrive2%\*.* %destDrive2%\*.* /d /e /c /r /y>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.echo.>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat

IF '%allDone%'=='2' GOTO preStart
echo.echo.IF NOT EXIST %destDrive3% MD %destDrive3%>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.echo.%%date%% - %%time%% - %SourceDrive3%\*.* - to - %destDrive3%\*.*^>^>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.xcopy %SourceDrive3%\*.* %destDrive3%\*.* /d /e /c /r /y>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
GOTO preStart

:roboCopySave
IF NOT EXIST C:\TEMP\product_X\%copyMode%Copy_Saves MD C:\TEMP\product_X\%copyMode%Copy_Saves

echo.IF NOT EXIST %destDrive1% MD %destDrive1%>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.Saving file: C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat

echo.IF NOT EXIST %destDrive1%\RoboCopy_Logfile MD %destDrive1%\RoboCopy_Logfile>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.echo.%%date%% - %%time%% - %SourceDrive1%\*.* - to - %destDrive1%\*.*^>^>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.robocopy %SourceDrive1%\*.* %destDrive1%\*.* /R:5 /W:3 /Z /XX /TEE /LOG+:%destDrive1%\RoboCopy_Logfile\%destDrive1%_Log.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat

IF '%allDone%'=='1' GOTO preStart
echo.IF NOT EXIST %destDrive2% MD %destDrive2%>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.IF NOT EXIST %destDrive2%\RoboCopy_Logfile MD %destDrive2%\RoboCopy_Logfile>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.echo.%%date%% - %%time%% - %SourceDrive2%\*.* - to - %destDrive2%\*.*^>^>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.robocopy %SourceDrive2%\*.* %destDrive2%\*.* /R:5 /W:3 /Z /XX /TEE /LOG+:%destDrive2%\RoboCopy_Logfile\%destDrive2%_Log.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat

IF '%allDone%'=='2' GOTO preStart
echo.IF NOT EXIST %destDrive3% MD %destDrive3%>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.IF NOT EXIST %destDrive3%\RoboCopy_Logfile MD %destDrive3%\RoboCopy_Logfile>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.echo.%%date%% - %%time%% - %SourceDrive3%\*.* - to - %destDrive3%\*.*^>^>C:\TEMP\product_X\TEMP\product_X_Migration_%copyMode%Copy.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
echo.robocopy %SourceDrive3%\*.* %destDrive3%\*.* /R:5 /W:3 /Z /XX /TEE /LOG+:%destDrive3%\RoboCopy_Logfile\%destDrive3%_Log.txt>>C:\TEMP\product_X\Data_Migration\%copyMode%Copy_Saves\%date%_%time%_%copyMode%Copy.bat
GOTO preStart

REM product_X Install Batch Script
REM Created by Trevor Giannetti
REM An unpublished work
REM (March 2012) 
```

# c# - “抛出新的 NotImplementedException();”是什么意思？究竟是做什么的？

> ID：10193284
> 
> 赞同：3
> 
> 时间：2012-04-17T14:33:59.963
> 
> 标签：c#, .net

我有一个从类“a”继承的“b”类。在“a”类中有一些代码在事件不为空时执行操作。我需要该代码在应用程序的特定时间在“b”类中触发。所以在'b'中我订阅了一个新的处理程序（事件）。

如果我将自动生成的事件“按原样”保留在“b”类中`throw new NotImplementedException();`，则代码按预期工作/运行。一旦我删除了 thow 异常，应用程序就不再按预期工作。

那么，`throw new NotImplementedException`除了抛出异常还有什么用呢？

我意识到此时我可能正试图以错误的方式解决我的编码问题，我相信我会找到更好的方法来做到这一点（我仍在学习），但我的问题仍然存在。为什么那行会改变代码的结果？

编辑：我意识到我的代码不是很具体。不幸的是，由于严格的政策，我不能。我在“a”类中有一个 if 语句。

```
if (someEvent != null) 
```

当代码“工作”时，if 语句返回 true。当它没有按预期工作时，它会返回“false”。在“b”类中，应用程序“工作”（或 if 语句返回 true）的唯一时间`throw new NotImplementedException();`是当我附加新事件时自动生成的“b”类事件方法中的行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T14:37:22.297

想一想：如果你想用下面的方法添加两个整数怎么办......

```
private int Add(int x, int y)
{

} 
```

...并且内部没有执行此操作的代码（该方法甚至不返回整数）。这就是`NotImplementedException`用途。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-03T22:20:52.660

`NotImplementedException`只是一个例外，当您尝试执行的代码尚未编写时使用。它通常在片段中用作占位符，直到您填写使用实际代码生成的任何内容的主体。

使用 a`NotImplementedException`而不是空代码块是一个很好的做法，因为它会非常清楚地引发错误，提醒您代码部分尚未完成。如果它是空白的，那么该方法可能会运行并且什么都不会发生，有时调试起来很痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T14:35:04.467

这只是一个异常，至于为什么它意味着您的应用程序“工作”完全取决于处理任何异常的代码。

它不是一个“特殊”的例外，而不是一个正常的例外（除了`Exception`像其他例外一样）。您倾向于将其与代码生成一起视为实现它所放入的成员的占位符。这样做比让代码生成尝试理解成员结构以输出编译代码要容易得多。

当您说“不再按预期工作”时，我假设它可以编译。如果删除它会阻止代码编译，那么很有可能您会遇到关于返回值的编译错误。

也许触发事件的代码需要处理程序的特定响应，或者如果没有处理程序或异常发生，它会默认响应并继续。在您的情况下，有一个处理程序并且没有异常，因此它期望得到更好的响应？

完全猜测。

如果`a`您需要使用 in 中的代码`b`，请考虑创建包含代码的方法，`protected`并且`virtual`如果您需要`override`该行为，则可以选择创建。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-14T22:15:58.323

**我相信NotImplementedException**有一点特殊含义：“这段代码仍在开发中，需要更改”。开发人员放置此异常是为了使某些代码可编译，但不可执行（以避免数据损坏）。

有关此异常类型的信息可以在文档中找到，它非常详细地解释了含义：[https ://docs.microsoft.com/en-us/dotnet/api/system.notimplementedexception?view=netcore-3.1](https://docs.microsoft.com/en-us/dotnet/api/system.notimplementedexception?view=netcore-3.1)

一些开发工具，例如 Resharper，会生成内部带有**NotImplementedException**的新成员，从​​而保护您免于执行尚未准备好的代码。同时，他们以与“//todo:”注释相同的方式突出显示此异常

对于其他情况，例如，当您不需要实现接口或虚拟成员时，或者可能，您没有在 switch/case、if/else 等语句中实现某些路径时，您可能会使用 NotSupportedException、OutOfRangeException , ArgumentNullException, InvalidOperationException 等。

最后，考虑这种情况以了解**NotImplementedException**的目的：我们正在编写银行应用程序，并且目前实现汇款功能，我们有：

```
public void Transfer(sourceAccount, destAccount, decimal sum)
{
   sourceAccount.Credit(sum);
   destAccount.Debit(sum);
} 
```

在这里，我们调用了两个尚不存在的方法。我们使用默认的**NotImplementedException**生成两者，并使用第一个（**Credit**）来实现它。可以说，实现需要一些时间，我们已经为它编写了测试，甚至做了几次手动测试。我们完全忘记了第二种方法“**借记**”并将我们的应用程序部署到测试版，甚至部署到生产环境。测试人员或用户开始使用我们的应用程序，他们很快就会使用汇款功能。他们正在尝试调用**Transfer**，这向他们显示了一条一般消息“我们很抱歉，我们遇到了一些错误”，同时我们作为开发团队收到有关**NotImplementedException的通知**堆栈跟踪将我们指向方法“**借记**”发生。现在我们正在实施它，并发布新版本，可以进行汇款。现在想象一下，如果那里没有例外，会发生什么：用户会花费大量资金尝试进行转移，尝试多次，每次都将资金投入到一个洞里。根据应用程序的用途，问题可能更大或更小：可能是计算器上的按钮不起作用，或者可能是科学计算器，我们在计算针对某些攻击性病毒的疫苗代码时错过了一些重要的数学运算。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T14:38:14.877

这`NotImplementedException`是一种声明 an`interface`或 base的特定方法`class`根本没有在您的类型中实现的方式。这是`E_NOTIMPL`错误代码的异常形式。

一般来说，一个实现不应该抛出一个`NotImplementedException`，除非它是该特定的特别支持的场景`interface`。在绝大多数情况下，情况并非如此，类型应该完全实现`interfaces`。

就它在做什么而言。它只是抛出一个异常。除非你给我们更多的信息，否则很难说为什么程序在面对异常时保持功能并且在没有它的情况下中断。

# python - scipy ipython 思考

> ID：10193285
> 
> 赞同：1
> 
> 时间：2012-04-17T14:33:59.863
> 
> 标签：python, scipy, enthought

因为我在我们的 linux 服务器中没有 sudo 权限，所以我需要从源代码编译 scipy 和 numpy。

在几次失败（主要是关于 ATALS）之后，我放弃并安装了 Enthought Python Distribution Free。

但是，每当我使用 ipython 时，我都会收到以下信使。

**Enthought Python Distribution（免费版）——www.enthought.com（输入“升级”或查看 www.enthought.com/epd/upgrade 以获取完整的 EPD）**

这很烦人。我可以设置某个地方不显示信息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T01:14:55.300

如果您有学术隶属关系（或告诉他们您有），他们会向您发送链接以免费获取完整版本。不要滥用这个特权！

# asp.net-mvc - MVC3 - 如何将下拉列表添加到填充有不同实体的表单（帖子）

> ID：10193290
> 
> 赞同：1
> 
> 时间：2012-04-17T14:34:14.693
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

嗨，我正在一个`MVC 3`应用程序中工作。我有一个带有以下代码的创建表单。

```
@model Xrm.Student
@{
ViewBag.Title = "Create Student Record";
 }
@using (Html.BeginForm("Create", "Student", FormMethod.Post))
{
    <div class="editor-label">
         @Html.LabelFor(model => @Model.FirstName)
    </div>
    <div class="editor-field">                                      
         @Html.EditorFor(model => @Model.FirstName)
         @Html.ValidationMessageFor(model => @Model.FirstName)
    </div>
<div>
    <input id="Submit1" type="submit" value="Submit" />
</div>
} 
```

我想在 Firsname 字段下添加一个新的下拉列表，该下拉列表应该填充 pubjects。主题是不同的实体。我可能很容易，但我是 MVC 的新手，所以我就卡在这里了。谁能建议我实现它的方法。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:37:27.453

我会定义一个视图模型：

```
public class MyViewModel
{
    public Student Student { get; set; }

    [DisplayName("Subject")]
    [Required]
    public string SubjectId { get; set; }

    public IEnumerable<Subject> Subjects { get; set; }
} 
```

然后让您的控制器填充并将此视图模型传递给视图：

```
public ActionResult Create()
{
    var model = new MyViewModel();
    model.Student = new Student();
    model.Subjects = db.Subjects;
    return View(model);
} 
```

最后将您的视图强类型化到视图模型中：

```
@model MyViewModel
@{
    ViewBag.Title = "Create Student Record";
}
@using (Html.BeginForm())
{
    <div class="editor-label">
         @Html.LabelFor(x => x.Student.FirstName)
    </div>
    <div class="editor-field">                                      
         @Html.EditorFor(x => x.Student.FirstName)
         @Html.ValidationMessageFor(x => x.Student.FirstName)
    </div>

    <div class="editor-label">
         @Html.LabelFor(x => x.SubjectId)
    </div>
    <div class="editor-field">                                      
         @Html.DropDownListFor(
             x => x.SubjectId, 
             new SelectList(Model.Subjects, "Id", "Name"),
             "-- Subject --"
         )
         @Html.ValidationMessageFor(x => x.SubjectId)
    </div>

    <div>
        <input type="submit" value="Submit" />
    </div>
} 
```

我用于 SelectList的`"Id"`和值显然必须是您想要用作分别绑定下拉列表中每个选项的 id 和文本的类上的现有属性。`"Name"``Subject`

# javascript - 如何判断浏览器是否支持

> ID：10193294
> 
> 赞同：88
> 
> 时间：2012-04-17T14:34:23.493
> 
> 标签：javascript, html

> **可能重复：**
> [HTML5 类型检测和插件初始化](https://stackoverflow.com/questions/4159838/html5-type-detection-and-plugin-initialization)

```
<input type=date> 
```

应该使用（可选）用户代理提供的 datepicker 创建一个输入，但它尚未得到广泛支持，因此我们使用的是 jQuery UI Datepicker。如果浏览器没有这样的东西，我们如何允许浏览器使用他们自己的日期选择器并回退到jQuery UI？

目前我认为只有 Opera 有一个内置的日期选择器，但对 Opera 的测试显然会很糟糕。有没有办法可以检测到这个功能（如果它可以以便携的方式）？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-04-17T21:17:33.667

下面的方法检查大多数浏览器是否支持某些输入类型：

```
function checkInput(type) {
    var input = document.createElement("input");
    input.setAttribute("type", type);
    return input.type == type;
} 
```

但是，正如[simonox](https://stackoverflow.com/users/460309/simonox)在评论中提到的那样，一些浏览器（如 Android 股票浏览器）假装它们支持某种类型（如日期），但它们不提供用于日期输入的 UI。因此[simonox](https://stackoverflow.com/users/460309/simonox)使用在日期字段中设置非法值的技巧改进了实现。如果浏览器清理了这个输入，它也可以提供一个日期选择器！！！

```
function checkDateInput() {
    var input = document.createElement('input');
    input.setAttribute('type','date');

    var notADateValue = 'not-a-date';
    input.setAttribute('value', notADateValue); 

    return (input.value !== notADateValue);
} 
```

# powershell - Powershell：脚本中的错误处理

> ID：10193295
> 
> 赞同：1
> 
> 时间：2012-04-17T14:34:30.817
> 
> 标签：powershell, error-handling

我有一个要在多台本地计算机上运行的脚本，但我没有在其中进行任何错误处理。我根本没有在 powershell 中进行任何错误处理，所以我在这里完全是菜鸟。我读过一些关于它的东西，但老实说，我只是在寻找一个快速简单的答案..

问：有没有类似 try/catch 的东西，尽可能少的代码不让脚本变得很重？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:51:49.933

是的，在 Powershell v2 中可以使用 try/catch/finally：

```
Try{
<main code here>
}
Catch{
write-host $_ #Using the reserved $_ variable which should contain the error string
}
Finally{
<clean up code here - will execute regardless>
} 
```

如果您被限制使用 Powershell v1，那么您将不得不使用陷阱构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:53:36.377

Powershell 2.0 有 try、catch 和 finally。请参阅[http://technet.microsoft.com/en-us/library/dd315350.aspx](http://technet.microsoft.com/en-us/library/dd315350.aspx)您还可以使用此处的错误捕获来执行更多面向命令行的错误处理变体：http: [//www.informit.com/文章/article.aspx?p=729515&seqNum=5](http://www.informit.com/articles/article.aspx?p=729515&seqNum=5)

# php - 将 MySQL 字符串数据清理为纯文本并修剪开始/结束空格的最佳方法？

> ID：10193297
> 
> 赞同：0
> 
> 时间：2012-04-17T14:34:31.800
> 
> 标签：php, mysql, trim

我已经有从网络表中抓取的数据，并且我注意到一些条目中有一些前导空格和 nbsp。我意识到在将数据插入 MySQL 之前，我应该在抓取时清理数据，但那是不久前的事了，如果不需要的话，我不想重复这个过程。我昨晚想出了这个 PHP 脚本（很晚），它一直工作到我尝试更新条目为止。

```
<?php
require_once("login.php");

$db_server = mysql_connect($db_hostname, $db_username, $db_password);
if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());

mysql_select_db($db_database);

$query = "SELECT * FROM ingredients;";

$result = mysql_query($query);
$i = 1;
$e = array();
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    //echo $row[1];
    $str = trim(mysql_real_escape_string($row[1]));
    $e[] = $str;
    $i++;

}

//print_r($e);
/*
$i = 1;
foreach($e as $entry) {
    $query = "UPDATE ingredients
        SET ing_name = $entry
        WHERE ing_id = $i;";
    mysql_query($query);
    $i++;
}*/
?> 
```

几个问题：

1.  有没有办法在不使用 PHP 的情况下在 MySQL 中严格执行此操作？
2.  我应该使用什么函数来剥离字符串以转换为纯文本并删除所有前导、尾随和 nbsp 空格？
3.  PHP 脚本似乎在更新数据之前一直有效，这是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:36:04.253

我认为这将严格使用 SQL 查询为您完成：

```
UPDATE ingredients SET column_with_spaces = TRIM(column_with_spaces) 
```

就未来的抓取而言，[`trim()`](http://us2.php.net/manual/en/function.trim.php)在插入数据库之前使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T14:37:41.037

有大量的[MySQL 字符串函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)可以帮助处理这类事情。

您可能需要`REPLACE`和的组合`TRIM`来清理它：

```
UPDATE table SET column=TRIM(REPLACE(column, '&nbsp;', ' ')) 
```

也尽量不要使用`mysql_query`，而是使用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)代替。直接编写查询会使您面临 SQL 注入问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:40:13.043

如果您正在寻找用于字符串修剪和替换的 mysql 解决方案，您应该查看此处的 mysql 字符串函数：

修剪：[http](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_trim) ://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_trim 替换：[http ://dev.mysql.com/doc/refman/5.5/en/string-functions .html#function_replace](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T12:51:51.227

```
//The PHP keyword <b>strtr()</b> is much easier to understand: <br>
$query = "SELECT * FROM ingredients";<br>
$query= strtr($isql, array('&nbsp~;' => ' ')) ; //without the ~<br>
//Converts all HTML spaces back to white spaces for MySQL to understand.<br>
//Useful when you load data onto textboxes:<br>
//Let's say you have a surname Van Der Merwe with white spaces.<br>
//To edit the surname we need to put it into an input textbox:<br>
 $DBConnect = new mysqli("localhost", "root","Userpassword", "DBName");<br> 
```

**对于关联数组：** 

```
if ($result = mysqli_query($DBConnect, $query)) {<br>
  while ($row = mysqli_fetch_assoc($result)) {<br><br>
echo "<>input type='text' name='Surname' size='45'  value=";<br>
echo <b>strtr</b>($row['Surname'], array(' ' => '&nbs#p;')) ;//remove the # "<br>
echo ">";<br><br> 
```

**对于非关联数组：** 

```
if ($result = $DBConnect->query($SQLstring)) {<br>
    while ($row = $result->fetch_row()) {<br>
echo "<dd><>input type='text' name='Surname' size='45'  value=";<br>
echo <b>strtr</b>($row[2], array(' ' => '&nbsp#;')) ; //remove the #<br>
echo ">";<br> 
```

# visual-studio-2010 - 如何获取 TFS 工作区目录

> ID：10193298
> 
> 赞同：1
> 
> 时间：2012-04-17T14:34:32.500
> 
> 标签：visual-studio-2010, tfs

我正在尝试在我的 csproj 文件中访问本地工作站上的 TFS 工作区目录。我在源代码管理中有 StyleCop 文件，我需要添加绝对路径。我创建了一个环境变量并完成了这项工作。我只是想知道是否有可能获得路径，这样我的其他团队成员就不必进行任何手动配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:18:46.180

由于您可以在本地拥有许多工作区，因此首先要确定您要从哪个工作区获取路径。之后，使用 TFS API，您可以轻松地从您的 csproj 文件的服务器路径中获取本地路径。可以轻松编写创建/更新 sysvar 的工具，但我不知道它是否适合您。

这是您应该在 MSDN 上调用的方法：http: [//msdn.microsoft.com/en-us/library/bb139272.aspx](http://msdn.microsoft.com/en-us/library/bb139272.aspx)

# javascript - 如何将文本链接转换为 Google API 去除的真实链接？

> ID：10193301
> 
> 赞同：1
> 
> 时间：2012-04-17T14:34:50.633
> 
> 标签：javascript, google-api, feedparser

```
google.load("feeds", "1");

function OnLoad() {

    // Create a feed control
    var feedControl = new google.feeds.FeedControl();

    // Add 1 feeds.
    feedControl.addFeed("http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=SteveMartinToGo&count=2");

    // Draw it.
    feedControl.draw(document.getElementById("twitter_content"));

}

google.setOnLoadCallback(OnLoad); 
```

我正在使用 Google FeedControl API 来呈现来自 RSS 的推文。

这可能不是呈现推文的最佳方式，但 Twitter 的 REST API 有一个速率限制，并且在被点击几次后会超时，这很烦人。

这看起来很可靠，它只是一个 RSS 提要解析器，只是 Google API 会去除链接并将它们变成纯文本。如果可能的话，我想将它们转换回链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:44:59.740

我发现这非常有用，没有速率限制问题并且推文看起来不错。

[http://jsfiddle.net/derek/Vjxt2/](http://jsfiddle.net/derek/Vjxt2/)

# javascript - 动态创建的文本字段的不同行为

> ID：10193309
> 
> 赞同：0
> 
> 时间：2012-04-17T14:35:22.677
> 
> 标签：javascript, jquery, css

我有一组文本字段，当我单击时，文本消失并在模糊时返回（经典表单行为），还有一个按钮，当您单击时，您有一个 jQuery 模态窗口。但是，我希望允许用户使用 jQuery 添加更多的文本字段（和按钮）。问题是，我的用户添加的字段与静态字段的行为方式不同。例如，当我单击按钮（用户添加的按钮）时，模式不会出现。这是我的代码，可以让您更好地了解：

```
<form method="post" action="payment.php">
    <div id="formulaire">
        <div class="formelements">
            <input type="text" name="from" value="Ex: English(UK)" style="width:100px;margin-right:0px;"
            class="langfield">
            <div class="droparrow" id="arrow"></div>
            <input type="text" name="from" value="Ex: French(FR)" style="width:100px;margin-right:0px;"
            class="langfield">
            <div class="droparrow"></div>
            <input type="text" name="nopages" id="nopages" value="Ex:4">
            <div class="uploadbtn"></div>
        </div>
    </div>
</form> 
```

这是我改变字段行为的javascript代码：

```
$('.formelements input').each(function () {
    var default_value = this.value;
    $(this).focus(function () {
        if (this.value == default_value) {
            this.value = '';
            $(this).css("font-weight", "bold");
            $(this).css("color", "#323232");
        }
    });
    $(this).blur(function () {
        if (this.value == '') {
            this.value = default_value;
            $(this).css("font-weight", "normal");
            $(this).css("color", "#9e9e9e");
        }
    });
});
/* Modals script start UPDATED AS REQUESTED  */
   $('#formelements').on("click", ".uploadbtn", function () {
    $("#modaldialog").dialog({
    height: 332,
    width: 625,
    modal: true
    });
   }); 
```

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:38:51.817

修复“无模式对话框”问题替换

```
$(".uploadbtn").click(function () {
    $("#modaldialog").dialog({
        height: 332,
        width: 625,
        modal: true
    });
}); 
```

和

```
$('.formelements').on("click", ".uploadbtn", function () {
    $("#modaldialog").dialog({
        height: 332,
        width: 625,
        modal: true
    });
}); 
```

这使用了适用于新创建的 DOM 元素的[.on()函数。](http://api.jquery.com/on/)您可以替换`#formelements`为加载时存在的任何父元素 - 可以在此处使用表单

## 笔记

该`on()`方法至少需要 jQuery 1.7 才能工作......如果你有以前的版本，你可以使用[delegate()](http://api.jquery.com/delegate/)：

```
$('.formelements').delegate(".uploadbtn", "click", function () {
    $("#modaldialog").dialog({
        height: 332,
        width: 625,
        modal: true
    });
}); 
```

# css - 图像反射样式？

> ID：10193321
> 
> 赞同：1
> 
> 时间：2012-04-17T14:35:44.153
> 
> 标签：css

我想对我嵌入在 div 标签中的两个超链接图像产生轻微的反映。我必须使用什么样式？任何好的链接也会很棒谢谢

```
 <div class="paneStyle">
 <asp:Label ID="followUs" runat="server" Text="Follow us on:"  CssClass="followUsStyle"></asp:Label><br style="line-height:30px;"/>

 **<div id="FB" class="IconStyle"><asp:HyperLink ID="facebook" runat="server"   ImageUrl="/_layouts/Facebook.png"  NavigateUrl="http://www.........w"></asp:HyperLink></div>
 <div id="TW" class="IconStyle"><asp:HyperLink ID="twitter" runat="server"  ImageUrl="/_layouts/Twitter.png" NavigateUrl ="http:........"></asp:HyperLink></div>&nbsp**

 </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:38:52.623

你可以在 CSS 中做到这一点：

[http://www.xhtml-lab.com/css/create-reflection-effect-using-css3](http://www.xhtml-lab.com/css/create-reflection-effect-using-css3)

如果它不是你要找的东西，还有 jquery：

[http://www.digitalia.be/software/reflectionjs-for-jquery](http://www.digitalia.be/software/reflectionjs-for-jquery)

# coldfusion - ColdFusion 邮件发送能力

> ID：10193325
> 
> 赞同：1
> 
> 时间：2012-04-17T14:36:01.303
> 
> 标签：coldfusion, coldfusion-9, cfmail

我目前正在开发一个时事通讯应用程序，它需要一次发送大约**2 万封邮件**。我觉得，ColdFusion 的邮件发送能力不适合这个。我没有任何指标来证明这一点。

我在网上搜索了这个，我发现有很多关于这种使用内置 CFMAIL 的批量邮件发送过程的抱怨。他们中很少有人，

*   Java 堆大小错误

*   发送消息时出现 IOException

*   邮件假脱机锁

*   邮件假脱机超时

我们使用的是 Adob **​​e ColdFusion 9 标准**版。

有人按照这个要求工作吗？你有遇到什么问题吗？你是怎么解决的？除了使用常规的 cfmail 标签之外，还有其他替代方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:20:25.647

我们有一个系统每天大约 2 到 3 次发送近 50 万条消息。*如果您分配了足够的资源*，CF 就没有问题——这意味着不错的驱动器和空间、足够的堆空间，以及（尤其是）性能良好的 SMTP 中继。在我们的例子中，我们设置了一个专用的中继服务器，我们可以仔细调整它。

自 ColdFusion 7 以来， CF Mail 没有出现*重大*问题。CF 8 和 CF 9 都表现良好。在某个级别上，我会建议使用不同的系统来确定——其他要求可能意味着 SaaS 会更好地为您服务——但从性能的角度来看，20k 消息相当小，对于企业级服务器来说应该不是问题.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:56:04.887

我认为如果您使用标准版本，您可能会遇到问题，我不确定，但标准版本的假脱机有一些线程限制（我猜是 10），这会延迟电子邮件。假设有 10 个线程用于 spool，每个线程等待 15 秒以进行下一次运行（可以从 CFIDE 进行调整），但发送所有电子邮件仍需要大约 8.333 小时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:18:22.897

如果我记得很清楚，coldfusion标准和企业之间是有区别的。企业版增强了 CFMAIL 吞吐量。至少它曾经在以前的版本中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T15:02:01.017

从第 6 版开始，我们一直使用 ColdFusion 作为网络邮件递送系统。我们的邮件组有 20k 个收件人。

当时我们遇到了一个问题，假脱机程序挂起并开始一遍又一遍地重新传输相同的邮件，使收件人多次收到邮件。

我认为这个问题已在版本 7 中得到解决。

# iphone - 在 Game Center 中重新连接玩家

> ID：10193326
> 
> 赞同：19
> 
> 时间：2012-04-17T14:36:02.007
> 
> 标签：iphone, objective-c, ios, game-center, gamekit

我无法弄清楚如何使用 Game Center 的 GKMatch 类以一种好的方式重新邀请断开连接的玩家。这场比赛是 1 对 1 的比赛。

当我检测到断开连接的玩家时，我会尝试通过以下调用重新邀请该特定玩家参加比赛：

```
[[GKMatchmaker sharedMatchmaker] addPlayersToMatch:theMatch matchRequest:request completionHandler:^(NSError *error) 
```

这按预期工作。当其他玩家建立连接后，他会被重新邀请，比赛可以继续。但这留下了一个我无法解决的问题。场景来了：

*   玩家 1 断开连接。
*   玩家 2 离开比赛，而玩家 1 断开连接。
*   播放器 1 重新连接并检测到他与播放器 2 失去连接并尝试重新连接到播放器 2。
*   玩家 2 正在寻找新的比赛，他正在使用 matchmakerViewController。
*   玩家 2 突然加入了与他离开的玩家 1 的旧比赛。

所以我的问题是 matchmakerViewController 让玩家重新邀请他们加入旧比赛。有没有更好的方法来处理这种重新连接的情况，这样人们就不会被邀请回到旧比赛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:14:18.773

您可以为仍然连接的玩家提供重新邀请或退出的选项。如果其他玩家离开，您还可以删除对离开玩家的匹配请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:56:09.307

如果我检测到玩家 2 使用了退出功能而不是在断开连接时超时，我会继续阻止玩家 1 在同一游戏中重新邀请。

# java - 蛮力数独算法

> ID：10193330
> 
> 赞同：1
> 
> 时间：2012-04-17T14:36:20.587
> 
> 标签：java, algorithm, sudoku, brute-force, backtracking

> **可能重复：**
> [数独算法，蛮力](https://stackoverflow.com/questions/10216800/sudoku-algorithm-brute-force)

几天来，我一直在尝试编写一个蛮力算法来解决数独问题，我的问题是我从来没有真正让算法 100% 工作，有人可以指导我并提供一些帮助吗？

该算法位于 Square 类，递归函数。

```
public abstract class Square {

private Square next;

private Box box;
private Row row;
private Columne columne;

private int value;

Square(int value, Box box, Row row, Columne columne) {
    this.value = value;
    this.box = box;
    this.row = row;
    this.columne = columne;
}

void setNumberMeAndTheRest(Board board) {
    if(getNext() == null) {
        System.out.println("next == null");
        for(int i = 1; i <= board.getDimension(); i++) {
            if(legalValue(i)) {
                setValue(i);
            }
        }
        board.saveSolution();
        return;
    } else {
        if(this instanceof DefinedSquare) {
            getNext().setNumberMeAndTheRest(board);

        } else {
            for(int i = 1; i <= board.getDimension(); i++) {
                if(legalValue(i)) {
                    setValue(i);
                    getNext().setNumberMeAndTheRest(board);
                }
            }
            return;
        }
    }
}

int getValue() {
    return value;
}

void setValue(int value) {
    this.value = value;
}

void setNext(Square next) {
    this.next = next;
}

public Square getNext() {
    return next;
}

/**
 * Checks if value is legal in box, row and column.
 * @param value to check.
 * @return true if value is legal, else false.
 */
boolean legalValue(int value) {
    if(box.legalValue(value) && row.legalValue(value) && columne.legalValue(value)) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:01:01.493

我认为您的问题可能出在此处

```
 for(int i = 1; i <= board.getDimension(); i++) {
        if(legalValue(i)) {
            setValue(i);
            getNext().setNumberMeAndTheRest(board);
        }
    } 
```

如果 legalValue(i)*独立*于 i 的当前状态返回 true，那么你正在回溯，如果不是，你没有回溯

大多数回溯看起来像 htis 之类的东西

```
 for(int i = 1; i <= board.getDimension(); i++) {
        if(legalValue(i)) {
            setValue(i);
                // boolean indicating whether solution was found
            if(getNext().setNumberMeAndTheRest(board))
               return true;
            else
               unsetValue(i)
        }
    } 
```

我们需要更多的代码来知道当已经设置了 square i 时 legalValue 是否返回 false

试试这个看看我是否在正确的轨道上或发布你*所有*的代码

```
 System.out.println("STARTING ITERATION")
    for(int i = 1; i <= board.getDimension(); i++) {

        if(legalValue(i)) {
            System.out.println("GOING " + i)
            setValue(i);
            getNext().setNumberMeAndTheRest(board);
        }
    }
    System.out.println("ENDING ITERATION") 
```

如果它填满了网格然后停止而不回溯，那么您的问题是您调用 setValue(i) 然后调用 legalValue(i+1) 并且它返回 false**因为该值已设置，而不是因为它不合法**。如果是这样，您需要在 reucrsion 之后进行等效的“未设置”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:55:55.050

快速浏览一下您的算法，它看起来好像只在每个方格中尝试了一个可能的值。当它到达一个找不到合法值的方块时，它就放弃了。它需要一些回溯机制，并在其先前填充的方格中尝试替代法律值。

例如，这是一个迷你 4x4 拼图：

```
 1 |    
    | 2  
---------
    |   4
3   | 
```

据我所知，你的算法会走到这一步然后退出：

```
2 1 | 3 X 
    | 2  
---------
    |   4
3   | 
```

而不是退出，它应该返回并更改它已插入的 2 个值中的任何一个。

# c# - 同时从两个应用程序访问文本文件

> ID：10193333
> 
> 赞同：0
> 
> 时间：2012-04-17T14:36:32.960
> 
> 标签：c#, labview

我有一个以随机时间间隔更新 txt 文件的 ac# 程序，以及一个持续检查 txt 文件中的数据并对其进行检查的 labview 程序。

你能指导我避免这些应用程序之间的冲突吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:54:44.290

LabVIEW有一个拒绝访问-vi。因此，您可以在读取时阻止 C# 写入。[http://zone.ni.com/reference/en-XX/help/371361E-01/glang/lock_range/](http://zone.ni.com/reference/en-XX/help/371361E-01/glang/lock_range/) （拒绝访问 - 读取 - 允许访问）

我会在 C# 中使用 try-catch 循环或类似的东西来编写 - 但我不是 C# 专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:40:15.383

一种简单的方法是使用命名/全局互斥锁

[http://msdn.microsoft.com/en-us/library/f55ddskf.aspx](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)

所有进程都将同名的互斥锁视为相同的。您可以使用它们发出信号或锁定。

# ruby-on-rails - 活动管理员和自定义方法

> ID：10193334
> 
> 赞同：5
> 
> 时间：2012-04-17T14:36:36.873
> 
> 标签：ruby-on-rails, ruby, controller, activeadmin

这是我在 Active Admin 中的自定义页面

```
ActiveAdmin.register_page "Settings" do

  action_item do
     link_to('Import projects', 'settings/importprojects')
  end

  content do
    para "Text"
  end

  controller do
    def importprojects
      system "rake dataspider:import_projects_ninja"
      para "OK"
    end
  end

end 
```

我想要做的是，当我单击“导入项目”按钮时，我想在控制器中执行一个 rake 任务。但我无法访问该方法。

可能是什么问题或我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T09:16:01.553

好的，找到了，解决方法如下：

```
 sidebar :actions do
    button_to "Update projects", "/admin/projects/updateprojects", :method => :post, :confirm => "Are you sure?"
  end

  collection_action :updateprojects, :method => :post do
    system "rake dataspider:import_projects_ninja"
    redirect_to admin_projects_path, :notice => "Syncing..."  
  end 
```

我创建了一个按钮，它运行方法“updateprojects”

# cmis - 如何在 Web 浏览器中显示 CMIS 文档

> ID：10193335
> 
> 赞同：0
> 
> 时间：2012-04-17T14:36:40.430
> 
> 标签：cmis

我从 CMIS 获得文件。我得到了文档内容流（ContentStream），但我不知道如何在浏览器中显示这些内容。只有我知道如何保存为文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:49:26.123

如果你的意思是你想要一个能在浏览器上很好地显示内容的 URL，那只能发生在一组有限的 MIME 类型中，即你的浏览器支持渲染的那些类型。

例如，当前`cmis.alfresco.com`有一个 ID`workspace:SpacesStore/i/6873cce7-73b1-4209-8d79-b16b694f02d3`为的节点，`getObject`文档列出了以下内容：

```
<content type="text/plain" src="http://cmis.alfresco.com:80/service/cmis/s/workspace:SpacesStore/i/6873cce7-73b1-4209-8d79-b16b694f02d3/content"/> 
```

因为它被设置为`text/plain`我的浏览器（Chrome），所以在屏幕上很好地显示它。

# floating-point - MIPS中的浮点数加1不会改变数字吗？

> ID：10193348
> 
> 赞同：2
> 
> 时间：2012-04-17T14:37:21.830
> 
> 标签：floating-point, mips, computer-architecture

在我的计算机体系结构 CS 作业中，我遇到了这个有趣的问题。我的教授希望我们找到一个单精度数和一个双精度数，这样当你将其中任何一个加 1 时，这个数字根本不会改变。为什么这是有道理的，我怎样才能找到这些数字？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:50:48.920

请记住，浮点数的精度有限（它们可以跟踪的有效数字的数量）。对于大约 7 位的单精度浮点数，对于大约 16 位的双精度浮点数。

还要记住，浮点数的范围可以超过 3 x 10^38 - 所以显然不是所有的数字都很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:28:41.307

浮点数学基于二进制（以 2 为底）数字系统。这里的许多答案都会谈到十进制系统（以 10 为底）上下文中的精度和值。这导致（例如）不同浮点格式的最小值和最大值呈现奇怪的值。

单精度尾数中的 24（1 隐含 + 23 显式）位转换为 24 位二进制数字的精度。设置最高位的最低 24 位数字是 2^23，它转换为 800000 十六进制或 8388608 十进制（七位有效十进制数字）。设置最高位的最高数字是 2^24-1，它转换为 ffffff 十六进制或 16777215（八位有效十进制数字）。所以现在你知道上面提到的“7-8 位精度”是从哪里来的。我个人认为二进制解释清楚地解释了事情，而十进制解释通常会导致更多问题。

如果您浏览此论坛，您会发现一些帖子显示，对于某些值，“7-8 位精度”声明不正确。如果您的背景知识完全基于十进制，您会想知道是什么击中了您。

指数为零（消除偏差），隐式位（设置）和显式位清除，值将是 1.00000000000000000000000 * 2^0 或 1.0 十进制。如果指数为 1，则该值将为 1.00000000000000000000000 * 2^1 或 2.0 十进制。

设置尾数中的最低位意味着将等于 2^(exponent-23) 的值添加到 1.0 * 2^exponent。-23 来自于尾数中的最低位是隐式位右侧的 23 个位置，即比定义为 2^ 指数的隐式位小 2 的 23 次方。

这应该让您了解如何解决原始问题。

# c# - 具有应用程序级计时器的后台线程-WPF 应用程序

> ID：10193350
> 
> 赞同：3
> 
> 时间：2012-04-17T14:37:23.393
> 
> 标签：c#, wpf, multithreading, timer, scheduler

我有一个 wpf 应用程序（没有 MVVM），这个应用程序需要几个后台线程（以特定时间间隔运行）。

这些线程应该在应用程序级别，即如果用户在任何 WPF 窗口上，这些线程应该是活动的。

基本上这些线程将使用外部资源，因此还需要锁定。

请告诉我最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T16:44:35.643

如果要在 WPF 应用程序中定期执行操作，可以使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)类。

将您的代码作为`Tick`事件的处理程序并将`Interval`属性设置为您需要的任何内容。就像是：

```
DispatcherTimer dt = new DispatcherTimer();
dt.Tick += new EventHandler(timer_Tick);
dt.Interval = new TimeSpan(1, 0, 0); // execute every hour
dt.Start();

// Tick handler    
private void timer_Tick(object sender, EventArgs e)
{
    // code to execute periodically
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:58:01.187

```
 private void InitializeDatabaseConnectionCheckTimer()
    {
        DispatcherTimer _timerNet = new DispatcherTimer();
        _timerNet.Tick += new EventHandler(DatabaseConectionCheckTimer_Tick);
        _timerNet.Interval = new TimeSpan(_batchScheduleInterval);
        _timerNet.Start();
    }
    private void InitializeApplicationSyncTimer()
    {
        DispatcherTimer _timer = new DispatcherTimer();
        _timer.Tick += new EventHandler(AppSyncTimer_Tick);
        _timer.Interval = new TimeSpan(_batchScheduleInterval);
        _timer.Start();
    }

    private void IntializeImageSyncTimer()
    {
        DispatcherTimer _imageTimer = new DispatcherTimer();
        _imageTimer.Tick += delegate
        {
            lock (this)
            {
                ImagesSync.SyncImages();
            }
        };
        _imageTimer.Interval = new TimeSpan(_batchScheduleInterval);
        _imageTimer.Start();
    } 
```

这三个线程在 App_OnStart 上初始化

```
protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        try
        {
            _batchScheduleInterval = Convert.ToInt32(ApplicationConfigurationManager.Properties["BatchScheduleInterval"]);
        }
        catch(InvalidCastException err)
        {
            TextLogger.Log(err.Message);
        }

        Helper.SaveKioskApplicationStatusLog(Constant.APP_START);
        if (SessionManager.Instance.DriverId == null && _batchScheduleInterval!=0)
        {
            InitializeApplicationSyncTimer();
            InitializeDatabaseConnectionCheckTimer();
            IntializeImageSyncTimer();
        }

    } 
```

# xml - 未找到 jsf 命名空间

> ID：10193356
> 
> 赞同：1
> 
> 时间：2012-04-17T14:37:40.757
> 
> 标签：xml, jsf

不确定这个问题是否是旧的，但我找不到命名空间

```
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets" 
```

例如这个命名空间

```
xmlns="http://www.w3.org/1999/xhtml" 
```

对我可用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:47:23.650

您需要确保 JSF JAR 文件位于 webapp 的类路径中。它们即包含必要的`.taglib.xml`文件。

如何做到这一点取决于您的开发环境和您在问题中没有提及的目标服务器。

如果您使用例如 Eclipse 和 Tomcat，那么您需要从供应商的站点手动下载 JSF JAR 文件并将它们放入`/WEB-INF/lib`. 然后 Eclipse 将执行必要的魔法。或者，如果您使用的是已经捆绑了 JSF 的服务器，例如 Glassfish、JBoss AS 等，那么您需要将其集成到 Eclipse 的*Servers*视图中，然后将其设置为Eclipse 项目的*Targeted Runtime*项目的属性。然后 Eclipse 将执行必要的魔法。

# xampp - Xdebug + XAMPP + Netbeans = 失败。无法让调试器在 Netbeans 中工作

> ID：10193361
> 
> 赞同：2
> 
> 时间：2012-04-17T14:37:54.813
> 
> 标签：xampp, xdebug, netbeans-7

我已经阅读了有关此主题的其他问题。列出的解决方案没有奏效。

安装：

> XAMPP 1.7.7
> 
> 网豆 7.1.1
> 
> XDebug 2.1.4

phpinfo() 显示 Xdebug 安装了所有正确的参数：

> zend_extension = C:\xampp\php\ext\php_xdebug-2.1.4-5.3-vc9.dll
> 
> xdebug.remote_enable = on
> 
> xdebug.remote_handler = "dbgp"
> 
> xdebug.remote_host = "本地主机"
> 
> xdebug.remote_port = 9000

但是，当我启动 Netbeans 调试会话时，它会循环一段时间，但没有任何效果。当我停止它时，我收到信息框，通知我“在*nn*秒内未检测到来自 xdebug 的连接。原因可能**是未安装或未正确配置 xdebug。**（他们的重点）。

据我所知，我正确配置了所有内容，重新启动了 Apache 服务器，但它仍然无法正常工作。我完全不知道如何进行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:52:51.303

你相信吗！？在花了几个小时研究这个问题之后，我终于找到了我只能归类为错误的原因。现在，我如何报告错误？那是下一个问题。

这是一个摘要：

> 创建 PHP 项目并将 NetBeans 项目站点根目录设置为子文件夹。（为了不为任何新任务注册 Apache 新测试站点，我将每个新任务放入本地测试域下的子文件夹中，例如 [http://test.my/project3/](http://test.my/project3/)）。在这种情况下，NetBeans 不会自动启动调试会话。您将在下图中看到一条“等待连接”消息。不用担心。保持原样。转到您的浏览器。我使用 FireFox 4。并使用附加参数调用您希望调试的脚本，例如 [http://test.my/project3/index.php?XDEBUG_SESSION_START=netbeans-xdebug](http://test.my/project3/index.php?XDEBUG_SESSION_START=netbeans-xdebug)
> 
> 当您返回 NetBeans 时，您将看到与 xdebug 的连接已成功建立。要停止 XDebug 会话，请使用此参数从同一子目录手动调用任何脚本 ?XDEBUG_SESSION_STOP_NO_EXEC=netbeans-xdebug

完整的解决方案可以在我最新的英雄博客[NetBeans 7.0 for PHP Waiting for Connection to XDebug 中找到](http://www.shinephp.com/netbeans-7-0-php-waiting-for-connection-to-xdebug/)

编辑：知道我刚刚发现了什么吗？我删除了 index.php 作为我的运行配置的索引文件。无需手动插入 url 的 xdebug 部分就可以像魅力一样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-10T07:54:24.910

我刚刚使用 Netbeans 8 遇到了这个问题，虽然你的回答解决了我的问题，但我想我找到了可以永远解决它的解决方案。

项目属性 => 运行配置 => 高级...确保选择以下条目调试 URL：'默认：您的 URL'

我的设置为“请勿打开 Web 浏览器”......现在它可以像几个月前一样工作了 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-30T07:09:10.337

我是一名 .Net 程序员，对 PHP 非常陌生。最近我试图在我的机器（Windows）上托管一个开源 PHP 应用程序。经过 5-6 天的斗争后，我将列出对我有用的步骤。

我卸载了以前安装的所有 XAMPP 和 NetBeans 并继续进行全新安装。

这可能不是每个人的解决方案，但它对我有用，我希望它对某人有所帮助。

安装 XAMPP

为 PHP 安装 netbeans。

打开 IIS 并停止它。它默认在端口 80 上运行。（我在端口 80 上运行 XAMPP，即默认，在其他端口上运行可能需要额外的配置设置）

打开 XAMPP 控制面板并启动 Apache。如果端口 80 空闲，则不会出现问题。

在浏览器中打开 localhost 应该会显示 XAMPP 主页。

打开左侧窗格中的 phpinfo() 链接并复制页面上的所有内容。转到： http: [//xdebug.org/wizard.php](http://xdebug.org/wizard.php)并将所有内容粘贴到 TextBox 中，然后单击分析我的 phpinfo 输出。它将显示适合您配置的 Xdebug 文件。

下载给定的 Xdebug dll 并将其复制到 C:\xampp\php\ext （Xampp 是默认的 Xampp 安装目录）

进入XAMPP控制面板，点击Apache前面的Config按钮，选择php.in，

查找相似或完全相似的行，

;zend_extension = "C:\xampp\php\ext\php_xdebug.dll"

（分号表示已注释）

删除分号并将路径替换为您刚刚复制的 dll 的路径，例如：

zend_extension = "C:\xampp\php\ext\php_xdebug-2.3.2-5.4-vc9.dll"

同样找到行 ;xdebug.remote_enable = 0 ;xdebug.remote_handler = "dbgp"

删除两行前面的分号并使 remote_enable = 1

xdebug.remote_enable = 1 xdebug.remote_handler = "dbgp"

重新启动 Apache 服务器。

将您的网站代码复制到 C:/XAMPP/htdocs/(your_website)/ 下，这意味着您的 index.php 应该位于 C:/XAMPP/htdocs/(your_website)/index.php

打开 Netbeans 选择 New project -> PHP -> PHP project from existing source 并选择您刚刚在 htdocs 文件夹中复制的文件夹。将其设置为在本地 Web 服务器上运行。

在 index.php 的第一行设置断点并调试。

就是这样。

在各种不同的帖子上建议了其他设置，但上述步骤对我来说非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-04T09:04:22.057

我认为您可能缺少的是

```
xdebug.idekey=netbeans-xdebug 
```

这是我在 php.ini 中使用的设置

```
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=127.0.0.1
xdebug.remote_connect_back=1    # Not safe for production servers
xdebug.remote_port=9000
xdebug.idekey=netbeans-xdebug
xdebug.remote_autostart=false 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-24T21:58:05.063

1.  阅读 XAMPP 1.7.7 和 Netbeans 7.1 的安装，并按照建议编辑 php.ini 文件：http: [//netbeans.org/kb/docs/php/configure-php-environment-windows.html](http://netbeans.org/kb/docs/php/configure-php-environment-windows.html)

2.  在本地 XAMPP 目录中创建您的 PHP 项目，`c:\xammp\htdocs\*yourproject*`

3.  调试 index.php，你会看到你的浏览器会以附加参数启动： `http://*yourproject*/index.php?XDEBUG_SESSION_START=netbeans-xdebug`

4.  转到您的 Netbeans，您的调试器将启动。

# c# - 当来自 db 的数据不好时是否应该抛出异常？

> ID：10193362
> 
> 赞同：4
> 
> 时间：2012-04-17T14:37:56.030
> 
> 标签：c#, asp.net, data-access-layer

在这个特定的应用程序中，没有单独的数据层，数据访问代码在实体本身中。例如，考虑一个 Customer 实体，然后在定义了成员和属性的 Customer.cs 文件中，您具有加载 Customer 对象的方法，如下所示

```
public bool TryLoad(int customerID, out Customer customer)
{
    bool success = false
    try
    {
        //code which calls the db and fills a SqlDataReader
        ReadDataFromSqlDataReader(reader);
        success = true;
    }
    catch(Exception ex)  
    {
      LogError();
      success = false;
    }
    return success;
} 
```

现在，在 ReadDataFromSqlDataReader(reader) 中，tryparse 用于将读取器中的数据加载到对象中。例如

```
public void ReadDataFromSqlDataReader(reader)
{
   int.TryParse(reader["CustomerID"].ToString(), out this.CustomerID);
   PhoneNumber.TryParse(reader["PhoneNumber"].ToString(), out this.PhoneNumber);
   ... similar TryParse code for all the other fields..
} 
```

使用 TryParse 从阅读器读取所有属性是一个好习惯吗？一位开发人员告诉我，这样做是因为 TryParse 比 int.Parse 具有更好的性能。但是，当您从数据库读取的值不符合您的代码期望的值时，您不希望抛出异常吗？我的意思是在这种情况下，如果数据库中有错误的电话号码，那么也许根本不应该初始化该对象，而不是加载一个带有空电话号码的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:41:20.330

是的，遵循*快速失败*原则，您可能希望在返回无法转换为预期类型的​​值时抛出异常。

如果其中一个操作失败并且您继续进行，就好像什么都没发生一样，您可能会遇到难以捕捉且难以查明的奇怪错误：对象在本应更新现有行时被添加到数据库中，数据神秘地消失了，狗和猫住在一起......你明白了。

另一方面，如果您立即抛出异常，您就可以准确地知道问题出在哪里，并且可以在问题变得更糟之前捕获并修复它。

`TryParse`将比`Parse`失败的情况更快地工作，这仅仅是因为它不必抛出异常（这可能很昂贵），但是如果您假设事情会成功（此代码通过不使用解析的结果来实现)，您应该使用`Parse`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:46:43.510

将数据插入数据库时​​执行有效验证。这不是一个好的设计，可以在数据库中输入不良数据。如果数据库包含错误的电话号码，如果它是强制性的，则应要求用户再次输入电话号码，如果电话号码不是那么重要，您可以将电话号码初始化为 null 以防数据错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T14:52:25.423

我不会为此使用 TryParse。如果我的数据库中有垃圾，我希望得到解决。如果数据在解析方面不明确（例如，Varchar 带有 int 或 double 作为字符串），我想整理我的模式，TryParse 作为类型检测将是一种快速而简单的技巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T14:42:07.053

当数据被插入和/或更新时，你在做什么类型的验证？

只要您在这里应用某种形式的验证，我个人就不会验证来自数据库的数据，因为您应该确信您只输入了有效数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T14:43:43.420

如果你会处理它，那么是的，你应该抛出一个异常。但是，如果您不关心异常，并且如果您要过滤正确的数据并使用它（在这种情况下为非零），您可以跳过。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T14:45:21.373

如，`TryParse`返回布尔值。所以，我可以`ByPass/Continue`在Value`Upcoming Logic/Any Database`的基础上提出请求。`Boolean`我不会让异常发生在这样的场景中。为此，我将进行日志记录等。

**解析**

> 1.  引发异常。
> 2.  如果您确定该值有效，请使用它

**尝试解析**

> 1.  返回一个布尔值，指示它是否成功
> 2.  它只是在内部尝试/捕获为什么没有例外地实现，所以它很快
> 3.  在值可能为 InValid 的情况下使用它

# xcode - UIPickerController - 想要在加载时显示特定的选择

> ID：10193373
> 
> 赞同：0
> 
> 时间：2012-04-17T14:38:46.123
> 
> 标签：xcode, uipickerview, uiactionsheet

我有一个自定义 UIPickerView，它嵌入到 UIActionsheet 中，调用时会出现半个屏幕。效果很好。问题是我想让桶选择器在它第一次出现时显示“最可能”的结果作为选择（在所有数据都已加载到其中之后）。
在将自定义选择器嵌入到操作表中之前，我将它放在 UIViewController 中，并且只是在 ViewController 的 viewDidLoad 方法中调用“showProbableResults”（我的一个自定义方法），因为那时我知道，UIPickerView 会装载并准备出发。我现在是否有一个等效的地方可以调用此方法，或者我是否需要重新考虑我的整个设计？本质上，我需要的是在 UIPickerView 加载后调用它的地方。

```
 - (void)startWithDelegate:(UIViewController <ImageProcessingDelegate> *)sender

{
self.delegate = sender;
self.showFirstBottle = YES;
[self start]; 
```

}

```
- (void) start {

self.actionSheet = [[UIActionSheet alloc] initWithTitle:@"Choose Something"
                                                         delegate:self
                                                cancelButtonTitle:nil
                                           destructiveButtonTitle:nil
                                                otherButtonTitles:nil];

[self.actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

NSLog(@"1.) About to alloc the picker");

self.vintagePicker = [[UIPickerView alloc] initWithFrame:pickerFrame];
self.vintagePicker.showsSelectionIndicator = YES;
self.vintagePicker.dataSource = self;
self.vintagePicker.delegate = self;

[self.actionSheet addSubview:self.vintagePicker];
[self.vintagePicker release];

UISegmentedControl *nextButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Next"]];
nextButton.momentary = YES; 
nextButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
nextButton.segmentedControlStyle = UISegmentedControlStyleBar;
nextButton.tintColor = [UIColor blackColor];
[nextButton addTarget:self action:@selector(show:) forControlEvents:UIControlEventValueChanged];
[self.actionSheet addSubview:nextButton];
[nextButton release];

UISegmentedControl *backButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Back"]];
backButton.momentary = YES; 
backButton.frame = CGRectMake(10, 7.0f, 50.0f, 30.0f);
backButton.segmentedControlStyle = UISegmentedControlStyleBar;
backButton.tintColor = [UIColor blackColor];
[backButton addTarget:self action:@selector(cancel:) forControlEvents:UIControlEventValueChanged];
[self.actionSheet addSubview:backButton];
[backButton release];

[self.actionSheet showInView:_delegate.parentViewController.tabBarController.view]; // show from our table view (pops up in the middle of the table)
[self.actionSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:34:27.283

一种选择是创建一个可重用的选择器视图，如此处所示[，](https://stackoverflow.com/a/9744133/542400 "UIPicker")然后调用 @optional

```
-(void)setInitialPickerValueToRow:(int)i inComponent:(int)j animated:(BOOL)k{
    [pickerView selectRow:i inComponent:j animated:k];
} 
```

从任何视图控制器或 NSObject（例如您的 UIActionSheetDelegate）。

您的另一个选项是设置标准的预选选择，如下所示：

```
self.vintagePicker = [[UIPickerView alloc] initWithFrame:pickerFrame];
self.vintagePicker.showsSelectionIndicator = YES;
self.vintagePicker.dataSource = self;
self.vintagePicker.delegate = self;
[self.actionSheet addSubview:self.vintagePicker];
[self.vintagePicker selectRow:0 inComponent:0 animated:NO]; 
```

您还可以设置不同的变量，并且可以`selectRow:inComponent:animated:`访问这些变量，而不是预先设置。

```
[self.vintagePicker selectRow:myRow inComponent:0 animated:NO]; 
```

希望这可以帮助！

# css - 我可以“反转” CSS 过渡吗？

> ID：10193378
> 
> 赞同：0
> 
> 时间：2012-04-17T14:39:12.623
> 
> 标签：css, css-transitions

这是我想做的事情：

这是一个测验，有一个问题和几个答案。用户选择 1 个答案，然后显示正确答案是什么。

我希望正确答案按钮基本上“亮起”，然后逐渐恢复正常。

所以我可以给我的元素一个简单的样式，然后添加一个带有白框阴影的类。我可以在两者之间转换。

但我想添加类，然后元素获得全白框阴影，然后淡入正常状态。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:52:02.427

你需要用`@keyframes`纯粹的方式来做`CSS3`

```
@keyframes animation_name{
  0%   {background: color1;}
  50%  {background: color2;}
  100% {background: color1;}
} 
```

以及您想要动画的元素

```
css_selector{
   animation: animation_name 5s;
   animation-iteration-count:infinite;
} 
```

并且不要忘记添加特定于浏览器`-moz`的`-webkit`前缀。

[在w3schools 上](http://www.w3schools.com/css3/css3_animations.asp)查看这个示例[`CSS3 Animation`](http://www.w3schools.com/css3/css3_animations.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:00:51.623

[这](http://jsfiddle.net/QNCmu/)是给你的jsfiddle。应该做你需要的 - 只需点击黑色矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:44:44.223

javascript 将类应用于元素（无 jquery）：

document.getElementById("id").className = "newclass";

# java - 注释“不兼容的类型”编译器错误

> ID：10193383
> 
> 赞同：3
> 
> 时间：2012-04-17T14:39:45.060
> 
> 标签：java, annotations

出于好奇：我关注 SSCCE

```
import javax.ws.rs.Path;

    @Path("/")
       public class T {

        void a() {

            Path p = getClass().getAnnotation(Path.class); //1

            Class z = getClass();
            p = z.getAnnotation(Path.class); //2
        }
} 
```

编译器给出以下错误信息：

```
T.java:12: incompatible types
found   : java.lang.annotation.Annotation
required: javax.ws.rs.Path
        p = z.getAnnotation(Path.class); 
Note: T.java uses unchecked or unsafe operations. 
```

//1 和 //2 行的区别是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:13:48.973

这是原始类型的一个奇怪特征。当您使用泛型类型 ( `Class<T>`) 作为原始类型 ( `Class`) 时，其成员被视为它们的擦除。

[JLS §4.8 原始类型](http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html#4.8)：

> 未从其超类或超接口继承的原始类型 C 的构造函数（第 8.8 节）、实例方法（第 8.8 节、第 9.4 节）或非静态字段（第 8.3 节）M 的类型是其类型的擦除在对应于 C 的泛型声明中。

实际上，使用原始类型会在其成员的声明中禁用所有与泛型相关的东西。

在您的情况下，方法`Class<T>`声明为

```
public <A extends Annotation> A getAnnotation(Class<A> annotationClass) 
```

变成它的擦除

```
public Annotation getAnnotation(Class annotationClass) 
```

`Annotation`你得到一个由to的分配引起的错误`Path`。

为了防止它，您需要在其参数化形式中使用泛型类型。如果您不关心 in 的实际值`T`，请`Class<T>`使用通配符：

```
void b(Class<?> z) {
    Path p = z.getAnnotation(Path.class); 
} 
```

# routing - Backbone.js 路由没有被路由

> ID：10193391
> 
> 赞同：0
> 
> 时间：2012-04-17T14:40:26.990
> 
> 标签：routing, backbone.js

我的 Backbone 项目中有以下代码：

```
App.Controllers.Test = Backbone.Router.extend({
  routes: {
    'test': 'test',
    'help': 'help'
  },

  help: function() {
    console.log('help');
  },

  test: function() {
    console.log('test');
  },

  initialize: function() {
    console.log('init');
  }
});

// ...

new App.Controllers.Test() 
```

但是我在控制台中看到的只是用or`init`调用 url 有人知道缺少什么吗？`#test``#help`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T14:46:59.203

您的初始化函数将始终首先运行，因此您的路由器正在被实例化，但也许您还没有调用历史记录，在您调用路由器之后，您需要一行代码，例如：

```
Backbone.history.start({pushState: true}) 
```

pushState 选项是如果您使用具有历史 API 的较新浏览器，因为您使用哈希调用路由，您可能不需要 pushState。

如果您的路由器分配给可变路由，您的代码可能如下所示：

```
var routes = new Backbone.Router.extend({...});

Backbone.history.start({pushState: true}); 
```

# asp.net-mvc-3 - ASP.Net MVC 3 多个 CheckBoxLists

> ID：10193396
> 
> 赞同：4
> 
> 时间：2012-04-17T14:40:54.270
> 
> 标签：asp.net-mvc-3, viewmodel, checkboxlist, mvc-editor-templates

我正在开发一个 ASP.Net MVC 3 Web 应用程序，我最近发布了一个关于如何显示复选框列表的问题

[ASP.Net MVC 3 检索复选框列表值](https://stackoverflow.com/questions/9973977/asp-net-mvc-3-retrieve-checkbox-list-values)

多亏了 RubbleFord 和 Darin Dimitrov 的帮助，我才得以完成这项工作。

这适用于一个复选框列表，但是，我现在需要能够在同一个视图上显示多个复选框列表，即，请参见附加的图像。

![在此处输入图像描述](../Images/1bd4ed37c90260fbefbb236f3579f51e.png)

我目前用来显示一个列表的 ViewModel 如下；

```
public class ViewModelShiftSubSpecialties
{

    public ListItem specialtyName { get; set; }
    public IEnumerable<ViewModelCheckBox> SubSpecialityList { get; set; }

}

public class ViewModelCheckBox
{
    public string Id { get; set; }
    public string Name { get; set; }
    public bool Checked { get; set; }
} 
```

在我的控制器中，我像这样填充 ViewModelShiftSubSpecialties：

```
var subSpecialties = GetSubSpecialtiesForSpecialty(5);

        ViewModelShiftSubSpecialties viewModel = new ViewModelShiftSubSpecialties();

        var checkBoxList = new List<ViewModelCheckBox>();

        viewModel.specialtyName = _listService.GetListItemByID(5); //Medicine Specialty

        foreach (var item in subSpecialties)
        {
            ViewModelCheckBox chkBox = new ViewModelCheckBox { Id = item.subID.ToString(), Name = item.ListSub.description, Checked = false };
            checkBoxList.Add(chkBox);
        }

        viewModel.SubSpecialityList = checkBoxList; 
```

在我的视图中，我显示列表名称并使用编辑器模板显示复选框列表

```
<h3>@Model.specialtyName.description</h3>
@Html.EditorFor(m => m.SubSpecialityList) 
```

但是，我完全不知道如何让上述代码在一个视图上处理多个复选框列表。这甚至可能吗？

如果有人能帮我解决这个问题，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:01:32.533

看起来你已经完成了所有的工作。您已经有一个可以与 ViewModelCheckBox IEnumerable 一起正常工作的编辑器模板。如果您不能将编辑器模板重用于相同的数据类型，那么编辑器模板将毫无用处。你只需要使用它三次。只需扩展您的 ViewModel

```
public class ViewModelShiftSubSpecialties
{
    public ListItem specialtyName { get; set; } //Might need 3 of these
    public IEnumerable<ViewModelCheckBox> SubSpecialityList1 { get; set; }
    public IEnumerable<ViewModelCheckBox> SubSpecialityList2 { get; set; }
    public IEnumerable<ViewModelCheckBox> SubSpecialityList3 { get; set; }
} 
```

在你的控制器中创建所有三个（并给他们比我更好的名字）。

然后在你的视图中

```
@Html.EditorFor(m => m.SubSpecialityList1)
@Html.EditorFor(m => m.SubSpecialityList2)
@Html.EditorFor(m => m.SubSpecialityList3) 
```

或者，您可以创建一个包含单个专业名称和 的类`IEnumerable ViewModelCheckBox`，并让您的 ViewModel 具有这个新类的 IEnumerable。然后为这个新类创建一个新的编辑器模板。如果您的列表大小是可变的/可能会改变，我认为这是值得的。否则我会使用早期的解决方案进行简单的修复。

```
public class ViewModelShiftSubSpecialties
{
    public class IEnumerable<SubSpecialty> { get; set; }
}

public class SubSpecialty
{
    public ListItem specialtyName { get; set; }
    public IEnumerable<ViewModelCheckBox> SubSpecialityList
} 
```

# java - 设置 JComponents 的对齐方式

> ID：10193398
> 
> 赞同：0
> 
> 时间：2012-04-17T14:40:57.483
> 
> 标签：java, swing, alignment, border-layout

我想要一种使用 Java Swing 在我的 GUI 中表示组件的顺序方式。我目前正在使用 BorderLayout，中间有一个 BOX。

我希望 JFileChooser 在左侧，JButtons 在中间，JList 在垂直框架的右侧。 ![结盟](../Images/ac5d92b8c13b48f76c69dee770e777b1.png)

上图显示了我当前的组件对齐方式。

如果有人能告诉我如何根据我们的需要对齐组件，那对我来说真的很有帮助。

根据m图，JList在顶部，然后是b checkbox，然后是JFileChooser，然后是三个按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:52:38.373

我的答案不是...，但应该更好`BorderLayout`

*   `JList`到`EAST`（或`WEST`）区域

*   `JFileChooser`到中心区域

*   `JPanel`与`JButtons`（`SOUTH`或`NORTH`）区域

也许使用`GridBagLayout`（非常复杂`LayoutManager`）

易于使用是`MigLayout`

编辑

```
I am unable to add JList to EAST or WEST since the frame is not getting 
extended more than the JFileChooser. 
```

问：您不能或是否有一些要求或限制

A：我原来的想法有什么问题

![在此处输入图像描述](../Images/6f70d747a5bb1c0d9b05af2326377943.png)

从代码

```
import java.awt.*;
import javax.swing.*;

public class BorderLayoutWithJComponents {

    public BorderLayoutWithJComponents() {
        String[] subItems1 = {"Red", "Blue", "Green", "Circle", "Square",
        "Triangle", "Apple", "Orange", "Banana"};
        JList list = new JList(subItems1);
        JFileChooser myFileChooser= new JFileChooser();
        JButton one = new JButton("One");
        JButton two = new JButton("Two");
        JButton three = new JButton("Three");
        JPanel panel = new JPanel();
        panel.add(one);
        panel.add( two);
        panel.add(three);
        JFrame f = new JFrame("LayoutTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(list, BorderLayout.WEST);
        f.add(myFileChooser, BorderLayout.CENTER);
        f.add(panel, BorderLayout.SOUTH);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
              new  BorderLayoutWithJComponents();
            }
        });
    }
} 
```

# php - 如何使用 Web 表单中的各种字段数据填充 textarea 字段？

> ID：10193399
> 
> 赞同：0
> 
> 时间：2012-04-17T14:41:06.353
> 
> 标签：php, jquery, codeigniter

我们继承了一个 php/CodeIgniter 应用程序。无需详细说明原因，我需要将值输入到 textarea 字段中，以便我可以将一堆数据组合在一起并将其发送到另一个应用程序/外部供应商的字段中。这是我们第一次遇到这个问题，但我不认为这是最后一次，所以我想为它做准备。

**具体情况：**

带有一堆字段的 Web 表单。它是客户端控制的自生成 php/CodeIgniter 应用程序，因此字段因客户端而异。

某些客户可能需要将其表单中字段的 3、5、7 等的数据发送给外部供应商，该供应商在其端接收一个字段中的所有数据。所以简而言之，使用 jQuery，我想将数据从某些字段发送到 textarea 字段。

例如，我想将 Center Title、Full Name 和 Fruits 发送到 textarea 字段，每个字段的末尾都有一个换行符。当然，如果用户清空一个字段，该行项目将从 textarea 字段中删除。

**[单击此处查看我的 jsFiddle 演示。](http://jsfiddle.net/justmelat/HtKAL/)**

**HTML 示例：**

```
<form method="post">
<br />
<br />
<fieldset name="Group1" style="border: thin; border-color: green">
    <legend>General Information</legend>
    <table style="width: 100%">
        <tr>
            <td style="width: 249px">Center Title:</td>
            <td>
                <select name="centers" id="centers">
                    <option value="Corp 1">Corp 1</option>
                    <option value="Shamrock Gold">Shamrock Gold</option>
                    <option value="Hensin Way">Hensin Way</option>
                </select>
            </td>
        </tr>
        <tr>
            <td style="width: 249px">Full Name:</td>
            <td>
                <input name="fullname" id="fullname" type="text" size="20" />
            </td>
        </tr>
        <tr>
            <td style="width: 249px">Job Title:</td>
            <td>
                <input name="jobtitle" id="jobtitle" type="text" />
            </td>
        </tr>
        <tr>
            <td style="width: 249px">Known Alergies:</td>
            <td>
                <input name="knownAllergies" id="knownAllergies" type="checkbox" value="Yes" />Yes
                <input name="knownAllergies" id="knownAllergies" type="checkbox" value="No" />No
            </td>
        </tr>
        <tr>
            <td style="width: 249px; height: 102px;">How Many?:</td>
            <td style="height: 102px">
                <select multiple="multiple" name="Select2">
                    <option value="one">one</option>
                    <option value="two">two</option>
                    <option value="three">three</option>
                </select>
            </td>
        </tr>
        <tr>
            <td style="width: 249px">Fruits:</td>
            <td>
                <input name="Fruit[]" id="Fruit[]" type="radio" checked="checked" value="Apple" />Apple<br />
                <input name="Fruit[]" id="Fruit[]" type="radio" value="Orange" />Orange<br />
                <input name="Fruit[]" id="Fruit[]" type="radio" value="Fruit" />Fruit
            </td>
        </tr>
    </table>
    <label>Complete Info:</label>
    <textarea name="allVendorInfo" id="allVendorInfo" cols="50" rows="7"></textarea><br />
    <br />
</fieldset>
</form>
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:18:34.623

**编辑：原始小提琴由于某种原因被破坏，已更新链接**

我在想这样的事情：http: [//jsfiddle.net/JRwzz/3/](http://jsfiddle.net/JRwzz/3/)

当然，“触发器”可能不是“运行 JS”按钮，例如，我想它会在提交或其他用户操作时出现。

它首先清除文本区域，然后循环所有输入并选择，具体取决于元素的类型 - 复选框、单选、选择等。它使用稍微不同的方法来获取值（例如，如果它是一个它只想获取的复选框选中的值）

为了让复选框组的值都在一行上以及类似的东西，它需要一点润色，但希望这足以让你明白这一点。

然后在它找到的每一件事上，它都将它附加到 textarea 并在最后放置一个换行符。

添加一个条件来检查另一个属性（例如 data-export="yes"）在将其包含在 textarea 之前进行检查并不难。

需要注意的是，我是这样想的，因为你说所有的表单都是动态的，所以我尽量不需要依赖 ID 或名称，它只适用于任何表单。如果您可以获得生成表单的代码，以在 html 中输出您希望包含在 textarea 中的属性（并且可能是您的客户选择将应用于其管理区域的某些方法），那么那d 当场，将不必为每个客户摆弄 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:58:49.010

您可以使用以下代码访问选择/用户输入

```
 $(document).ready(function(){
    $("input").change(function(e){
        if($(this).is(':checked')){
        }else{                                  
        };
        var old = $('#allVendorInfo').val();
        $('#allVendorInfo').val(old+ "%" + $(this).attr('name') + '|'+$(this).val() + "%");

    });
    $("select").change(function(e){
        var old = $('#allVendorInfo').val();
        $('#allVendorInfo').val(old+ "%" + $(this).attr('name') + '|'+$(this).val() + "%"); 
    });     
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:30:10.097

尝试这样的事情：

```
$("select, input").bind("change keyup", function() {
var form = $("<form>");
var data = new Object();

form.append($(":checked").clone());

$.each($("select"), function(i, item) {
    if ($(item).val() != null) {
        form.append(($(item).clone()));
    }
});

$.each($("input[type='text']"), function(i, item) {
    if ($(item).val().length > 0) form.append(($(item).clone()));
});

$("#allVendorInfo").val(form.serialize());

}).first().trigger("change");​ 
```

# java - IntelliJ 编辑器自定义：javadoc 弹出窗口的行为类似于 NetBeans？

> ID：10193400
> 
> 赞同：2
> 
> 时间：2012-04-17T14:41:08.083
> 
> 标签：java, ide, intellij-idea, javadoc, code-editor

昨天我安装了 IntelliJ IDEA IDE，到目前为止我很喜欢它（我曾经使用我喜欢的 NetBeans 和我避免使用的 Eclipse）。

当谈到代码编辑器时，我想以 2 种方式更改 javadoc 弹出行为：

1.  我将 javadoc 弹出窗口设置为在一秒钟后显示（`Settings`-> `Editor`-> `Code completion`-> `Autopopup documentation in`）。但是，它仅在我按下`Ctrl + Space`代码完成时才有效。当代码完成自动弹出时，javadoc 窗口不显示。我想要它。简单地说，它与此处解决的问题相同：http: [//youtrack.jetbrains.com/issue/IDEABKL-6124](http://youtrack.jetbrains.com/issue/IDEABKL-6124)
2.  javadoc 弹出窗口隐藏当前行（它在代码完成窗口上方弹出）。如果它弹出实际行（带有插入符号）而不隐藏它会更好。

有没有允许这种定制的插件？还是我错过的任何设置？

* * *

**编辑1：**

这是解释情况2的图片：![在此处输入图像描述](../Images/054528aabd7e669619f7ded92f6c08c6.png)

正如您所看到的，由于 javadoc 弹出窗口，我看不到我当前正在编写的内容 - “系统”一词的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:05:37.443

JavaDoc 隐藏代码的问题是由于弹出窗口不能放在右侧时水平分辨率低造成的。通常显示器有足够的水平像素来适应它。无论如何，它仍然是一个可以通过在当前代码行上方显示弹出窗口来修复的错误。

我已[将此错误提交给 YouTrack](http://youtrack.jetbrains.com/issue/IDEA-84828)，请随时投票。

# c# - 使用 XmlTextReader 遍历目录中的 xml 文件时出错

> ID：10193401
> 
> 赞同：0
> 
> 时间：2012-04-17T14:41:11.110
> 
> 标签：c#, loops, xmlreader

我正在使用以下代码遍历目录，查找 xml 文件并将它们读入：

```
XmlReader reader = null;

foreach (string file in files)
{
   try
   {
     System.IO.FileInfo fi = new System.IO.FileInfo(file);

     string fext = fi.Extension;
     if (fext == ".xml")
     {
         Console.WriteLine("Processing file:" + fi.Name);
         reader = XmlReader.Create(fi.Name);
       **//BUT THIS WORKS---> reader = new XmlReader(@"\\10.00.100.11   \Data\Cognos\ReportOutput\Test\Risk Rating Exception Detail (LN-133-D)-en-us_2012-04-14T031017814Z-pdf_desc.xml");**

          while (reader.Read())
          {
              switch (reader.NodeType)
              {
                 case XmlNodeType.Element: // The node is an element.
                      Console.Write("<" + reader.Name);
                      Console.WriteLine(">");
                      break;
                 case XmlNodeType.Text: //Display the text in each element.
                      Console.WriteLine(reader.Value);
                      break;
                 case XmlNodeType.EndElement: //Display the end of the element.
                      Console.Write("</" + reader.Name);
                      Console.WriteLine(">");
                      break;
              }

           }

           reader.Close();

       }

    }
    catch (System.IO.FileNotFoundException e)
    {
     // If file was deleted by a separate application or thread since the call to TraverseTree() then just continue.
         Console.WriteLine(e.Message);
         continue;
    }

} 
```

当我在单个文件上使用 XML.Create 时（请参阅 BUT THIS WORKS），我可以读取该文档中的所有内容。当我将它与 fi.Name 一起使用时，我看到消息“处理文件：”，然后，对于目录中的每个 xml 文件，我看到“找不到文件 'C:\Documents and Settings\\My Documents \Visual Studio 2010\Projects\MoveReportsTest\MoveReportsTest\bin\Debug\。

我尝试移动阅读器实例化，起初，它是为每个文件实例化的，我尝试移动 reader.Close()，认为我不能为每个文件实例化相同的阅读器，但它没有改变任何东西（同样的错误）。'找不到文件消息不是来自任何流行语......我一无所知......请帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:48:25.427

正如您所指的那样， `fi.Name`它只选择文件的*名称*。如果您在路径中仅提供文件名，则*默认*路径将是您的二进制文件所在的文件夹，因此您会在 exception 中看到一个 : `C:\Documents and Settings\\My Documents\Visual Studio 2010\Projects\MoveReportsTest\MoveReportsTest\bin\Debug\`。

*将完整*路径传递给`XML`您要读取的文件 => `fi.FullName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:43:36.740

由于错误，听起来您正在搜索相对位置的文件，但请记住，如果您仅使用它会查找相对位置，如果您不使用相对位置[`fi.Name`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.name.aspx)，我建议[`fi.FullName`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.fullname.aspx)您使用。

```
FileInfo -> C:/Location/File.Ext
FileInfo.Name -> File.Ext
FileInfo.FullName -> C:/Location/File.Ext

reader = XmlReader.Create(fi.FullName); 
```

# sql-server - 为什么 SQL Server 不允许在配置后完全删除分发服务器？

> ID：10193404
> 
> 赞同：10
> 
> 时间：2012-04-17T14:41:23.177
> 
> 标签：sql-server, sql-server-2008, replication, distribution, database-replication

我使用向导和 T-SQL 在 SQL Server 2008 中配置了一个发行版，但之后我想使用向导删除它（右键单击复制并选择“禁用发布和分发...”）或在有和没有的情况下执行以下命令其参数：

```
exec sp_dropdistributor @no_checks = 1 -- no new results with @ignore_distributor = 1 
```

将出现此错误：

> Msq 21122，级别 16，状态 1，过程 sp_dropdistributiondb 第 124 行无法删除分发数据库“lobloblob”，因为它当前正在使用中。

我没有发布任何东西，没有配置任何订阅但给出了这个错误我该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T17:30:27.260

尝试这个：

> SELECT spid FROM sys.sysprocesses WHERE dbid = db_id('distribution')

杀死 spid 并重试。现在它应该可以工作了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T05:34:08.693

我使用了以下脚本：

```
SELECT spid FROM sys.sysprocesses WHERE dbid = db_id('distribution') 
```

并发现当前会话的 session_id（包含分发配置脚本）不允许禁用分发，所以我建议这个脚本杀死正在运行的 spid 以删除分发：

```
use [master]
declare @spid varchar(10)
select @spid=spid from sys.sysprocesses where dbid = DB_ID('distribution')

while @@ROWCOUNTS <> 0
    exec ('KILL ' + @spid)

exec sp_dropdistributor @no_checks = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:40:12.553

我的猜测是分发清理工作导致了这个问题。但是，要检查，准备在 SSMS 的一个窗口中执行 sp_dropdistributor 并记下该窗口的 session_id。一秒钟后，准备运行`select session_id from sys.dm_os_waiting_tasks where blocked_session_id = <spid from window 1>`。返回窗口 1，运行 proc，然后切换回窗口 2 并运行 select。它会告诉您阻止数据库删除的会话的 session_ids。

# java - 如何通过通过结果集检索的套接字接收数据？

> ID：10193407
> 
> 赞同：0
> 
> 时间：2012-04-17T14:41:38.403
> 
> 标签：java, sockets, resultset

```
Statement st=(Statement) sqlcon.createStatement();
ResultSet p=st.executeQuery("SELECT * FROM `chat`.`online_users`"); 
```

我已经通过 ResultSet 的对象从数据库中获取了数据，但是当我通过套接字将它发送到客户端时，它给出了一个错误。它不可序列化。如何跨套接字发送和接收通过 ResultSet 检索到的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:54:13.083

从 中读取数据`ResultSet`，将其推入`List`然后发送您的`List`. 像`ArrayList`已经实现`Serializable`接口的所有实现，您可以阅读[此答案](https://stackoverflow.com/a/1387966/1065197)以了解有关列表序列化的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:46:27.770

好吧，您可以从 ResultSet 继承并在新类中实现 Serializable 接口。我建议更好的方法是在层之间发送 XML，或者如果您想要一个全 Java 解决方案，如何为每一行创建一个对象，将它们填充到集合类或向量中，然后序列化它而不是 ResultSet 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:13:24.247

由于它需要可序列化并通过网络连接发送，因此[CachedRowSet](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sql/rowset/CachedRowSet.html)似乎是您尝试的不错选择。

# java - 从 cmd 启动 Java 应用程序有效，从批处理不

> ID：10193409
> 
> 赞同：4
> 
> 时间：2012-04-17T14:41:43.480
> 
> 标签：java, windows, batch-file, executable-jar

问题如下：我有一个Java应用程序打包在一个“.jar”文件中。

我可以通过任一方式启动应用程序（Swing 应用程序）

*   双击jar文件
*   命令行`java -jar MyApp.jar`

但是，当我将命令行命令放入批处理文件时，它会告诉我

> 无法访问 jarfile MyApp.jar

批处理文件与 jar 位于同一目录中。就在我也从 cmd-line 开始的地方。我试图用管理员权限和管理员外壳调用蝙蝠 - 没有效果。

我正在使用 Windows 7（64 位）机器。任何提示将不胜感激。

编辑

你要求它:) 这是批处理文件：

```
@ECHO OFF
java -jar MyApp.jar
@PAUSE 
```

编辑 2

通过双击和从 cmd 调用批处理具有相同的效果。将命令更改为

```
java -jar "C:\Full\Path\MyApp.jar" 
```

没有效果。

编辑 3

我添加`SET Path=%Path%;C:\Path\To\Jar`到批处理文件中。没有效果。我还尝试使用 Chris 的链接建议并由 Viruzzo 支持的双反斜杠。也没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:47:03.133

双击 .bat 文件时，工作目录*未*设置为 .bat 文件所在的位置，但通常类似于 %AppData%。要使其工作，您需要将文件的完整路径放在 bat 中（即`java -jar C:\path\to\jar\MyApp.jar`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-26T21:11:56.610

我只需要把我的路径放在引号中，即使它没有空格或奇数字符。

`java -jar C:\Users\Jacob\executables\some-file.jar`失败了，但是

`java -jar "C:\Users\JStamm\executables\some-file.jar"`工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:02:59.750

确保您没有在 Windows 中启用隐藏扩展选项。也许您的 jar 的名称以 .jar.jar 结尾？你确定jar的路径是正确的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T07:47:35.527

我还没有弄清楚为什么，但现在它起作用了：

第一个批处理文件是另一个批处理文件的副本，我只是更改了内容以满足我的需要。

**现在我将它重命名为 MyApp.bak 并从头开始编写了一个新的 MyApp.bat。**

一旦我发现有什么区别，我会更新这个答案。

**更新**

另一批又发生了。这一次，我们得到了原因：由于某种原因，批处理文件在复制时没有继承权限。在文件夹中创建一个新文件夹具有正确的权限。所以，最终这确实是一个权利问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-10T09:30:47.163

这不是针对您的特定问题的答案，但这将允许您对问题进行故障排除，以便您找到答案。添加睡眠命令将使命令提示符坐下，因此它不会立即关闭。

```
ping 1.1.1.1 -n 1 -w 10000 
```

（睡10秒）

# dataset - SAS 程序删除和数据集

> ID：10193412
> 
> 赞同：2
> 
> 时间：2012-04-17T14:41:47.363
> 
> 标签：dataset, sas

我只是在学习sas，看到两个有趣的程序。

```
 proc Delete data = table;  run; 
```

和

```
 proc datasets lib=Libr nolist;
        modify table;
           rename __first = second;
  quit;
  run; 
```

以及关于它们的几个问题：

1.  为什么有些程序好像`quit`没有结束`run`？

2.  为什么要和一起`datasets`使用？（这是退出表的声明吗？）`quit``run`

3.  最好推荐`datasets-procedure`用于小任务吗？（当然不是，但是为了什么？或者不使用它？）

4.  而且，哪种方法更快：`proc delete`或者`sql-drop`？（速度更快，需要多少数据）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T15:37:13.483

1.  一些`SAS`过程以 结束`QUIT`，而不是`RUN`因为它们正在运行`Interactive Mode`。例如，在 中`PROC GLM`，您可以指定一个附加模型语句，只要`SAS`窗口顶部显示`PROC GLM`正在运行（如果您使用的是该`Windows`版本）。

2.  一些程序员已经养成了打字`QUIT`和`RUN`在一起的习惯。我认为这实际上并不重要，因为使用该`QUIT`语句的过程在您输入它们后立即开始运行。我只使用其中一种。

3.  `PROC DELETE`是不受支持的旧版功能；它已被`PROC DATASETS`SAS 中用于处理数据集的指定工具正式取代。[邮件列表发布](http://www.listserv.uga.edu/cgi-bin/wa?A2=ind9703e&L=sas-l&P=1322 "PROC DELETE 上的邮件列表发布")。

我通常不会发现自己在`SAS`. 因为`SAS`有效地管理它的内存使用，并且因为现在 RAM 如此丰富，我通常使用临时数据集来完成 90% 的工作，这些临时数据集是在会话开始时按需创建的。

4.  和以前一样，`PROC DELETE`现在不赞成使用`PROC DATASETS`. 就哪个更快而言，不包括非常大的数据，我敢打赌它们之间几乎没有区别。然而，在处理永久性 SAS 数据集时，我喜欢使用`PROC DATASETS`而不是，这仅仅是因为我觉得使用 SAS 设计的方法而不是我认为的实现（不是 100%）`PROC SQL`更好地操作永久性数据集。`SQL`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T19:28:36.113

WRT“运行”与“退出”：

一些 SAS 程序支持称为“运行组处理”的东西，这意味着程序在看到“运行”时执行它被要求执行的任何工作；陈述。该过程继续执行，直到它看到“quit:”statemnet。事实上，一个“退出”；语句会自动插入一个“run;” 声明是否还有工作要做。

PROC DATASETS 是这些过程之一。“退出；” 声明说程序没有更多的工作要做。考虑这个简单的例子：

```
proc datasets;
   change a=new_a;
run;
   delete new_a;
run;
quit; 
```

第一条语句（更改）将现有数据集“a”重命名为“new_a”。第二条语句将删除该数据集。如果您未能包含“运行”；在此示例中的语句（在“更改”之后），该过程将失败，因为它会注意到“new_a”数据集不存在，因此不会执行任何一条语句。

也就是说，我自己很少使用 PROC DATASETS。我更喜欢使用 PROC SQL。

WRT：PROC DELETE 与 DROP TABLE 与 PROC SQL：

尽管 PROC DELETE 已正式“弃用”，但这意味着它将不再更改。从 SAS 库中删除数据对象是一个简单的过程；我用它所有的时间。与 PROC SQL 相比，它有一个特殊的优势。如果您使用 PROC DELETE 尝试删除不存在的数据集，您只会在日志中收到警告消息。但是，如果您尝试从 SQL 中执行 DROP TABLE 语句，您将收到错误并且您的 SQL 步骤将停止。在我的 ETL 脚本中创建加载到 Teradata 和 Oracle 等外部数据库的新表时，我一直使用 PROC DELETE。

啰嗦，我知道，但我希望这会有所帮助。

鲍勃

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T00:33:06.260

关于数据集或 sql 在删除表时是否更快，我[在这里](https://stackoverflow.com/a/802599)调查了这个问题。 `Proc SQL`通常更快，这让我感到惊讶。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T07:02:59.667

我认为以下代码可以删除工作库中的 SAS 数据集；

proc datasets lib=work memtype=data kill；跑;

退出;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-09T19:35:18.847

我相信你会发现它`PROC DELETE`并没有消失，也不会很快消失。`PROC DATASETS ... DELETE`此外，对于某些类型的库，它通常比删除形式更快。根据我的经验，由 SPDS 管理的具有许多数据集的数据库可能会导致`PROC DATASETS`任何类型的性能非常差，因此我将*始终*使用`PROC DELETE`.

# ruby-on-rails - 如何从 Hobo/Rails 中的控制台重置用户密码

> ID：10193415
> 
> 赞同：1
> 
> 时间：2012-04-17T14:41:51.640
> 
> 标签：ruby-on-rails, hobo

Rails 框架 Hobo 非常出色，它会自动将第一个用户创建为管理员用户（除非您要求它不要这样做）。我遇到的问题是在开发中运行 rails 我不记得密码是什么。这应该是微不足道`rails console`的，因为我只是运行，找到用户`admin = User.find :first`并重置密码（尝试）

```
 admin.password = 'Anything1234'
 admin.password_confirmation = admin.password
 admin.save
 >false
 admin.errors
 >{:current_password=>["is not correct"]} 
```

也就是说，在我可以更改现有密码之前，需要正确设置变量 current_password。

恐怕 Hobo 文档在这种情况下没有帮助。有谁知道如何驱动 Hobo 用户模型重置密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:57:19.090

4种可能的解决方案：

1：运行您的应用程序，然后单击忘记密码链接。该消息将出现在您的日志中，因此您不需要设置邮件程序。

2：只需保存而不进行任何验证：

```
admin.save(false) 
```

编辑：在 Rails 3 中，这是

```
admin.save(:validate => false) 
```

3：另一种选择是删除所有用户，以便您返回初始用户输入屏幕。

4：如果你真的想运行验证，你可以触发 request_password_reset 生命周期：

```
admin.lifecycle.request_password_reset!(Guest.new) 
```

然后在开发日志中查找重置密码密钥

```
u.lifecycle.reset_password!(Guest.new, :key => 'a0a2db1035065fa7ad5d46d35669d206aee73668', :password=>"test123", :password_confirmation=>"test123") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:45:21.030

是的，您需要在设置和字段`current_password`之前设置。这是为了阻止用户在不知道密码的情况下更改密码。`password``password_confirmation`

因此，您需要执行以下操作：

```
admin.current_password = 'password'
admin.password = 'Anything1234'
admin.password_confirmation = admin.password
admin.save 
```

# html - 如何在移动 safari / chrome 中播放多种声音之一

> ID：10193417
> 
> 赞同：0
> 
> 时间：2012-04-17T14:42:00.220
> 
> 标签：html, web-applications, mobile-safari

我想预加载两个声音文件并在用户事件中播放它们。

试图做

```
<audio id="ok" src="ok.mp3"></audio>
<audio id="bad" src="bad.mp3"></audio> 
```

然后

```
document.getElementById("ok").play(); 
```

这仅适用于一个文件，而不是两个！？

也试过

```
var au = new Audio('ok.mp3');
au.play(); 
```

没有成功。

我在 windows / chrome 中都是花花公子，但在 iPod 上什么都没有。

感谢您对此事的任何跨浏览器洞察力。(html5)。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:15:22.157

苹果不允许自动播放。您需要侦听一些用户输入，例如在按钮单击事件上并播放文件。

# c# - 域名的正则表达式

> ID：10193419
> 
> 赞同：0
> 
> 时间：2012-04-17T14:42:07.130
> 
> 标签：c#, regex, vb.net

我正在尝试验证域名的 csv 文件（例如，@google.com、@xyz.co.uk、@xyz.edu 等）

我正在使用以下正则表达式：

```
Regex(@"@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,4}$", RegexOptions.Compiled); 
```

以上有没有改进的余地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:18:11.607

熟悉一些专门的[网站](http://regexlib.com/)。

选择不需要持续维护的解决方案。您自己的正则表达式对于您不期望直接攻击的某些应用程序看起来相当不错。

另请参阅@lna 在评论中链接的答案。

# html - Modernizr 和样板

> ID：10193420
> 
> 赞同：4
> 
> 时间：2012-04-17T14:42:12.990
> 
> 标签：html

我正在对 HTMl5 进行研究，然后 This 2 出来了。一个叫 Modernizr，另一个叫 Boilerplate。我想知道：

1.Modernizr和Boilerplate有什么区别？

2.可以一起运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T14:45:57.410

Modernizr 是一个功能检测库：它包含一系列测试，可用于确定客户端是否支持各种 HTML5/CSS3 功能。这使您可以在可用的情况下使用标准功能，并在必要时使用 hacks 或 shims。

Boilerplate 是“最佳实践”的集合：CSS 重置、一些服务器配置等等，所有这些都为 HTML5 开发提供了良好的默认设置。

您可以而且应该在您的 HTML5 项目中使用这两者。

# django-admin - django-admin 创建的项目骨架

> ID：10193423
> 
> 赞同：0
> 
> 时间：2012-04-17T14:42:36.157
> 
> 标签：django-admin

所以，我从 djangobook.com 学习 django，对以下命令创建的项目骨架有点困惑。

```
django-admin.py startproject mysite 
```

这将创建以下树。

mysite - manage.py - mysite - **init** - 设置 - urls - 视图

但是这本书说它应该在下面创建树：

mysite/ **init** .py manage.py settings.py urls.py

我在 Windows 7 pro 64 位上使用 Python 2.7.3。Django 版本是 1.4。本书使用 Django 1.1 版进行教学。我怀疑项目骨架的差异是由于我使用的 django 的较新版本。

是不是因为新版本的缘故？如果是这样，为什么在 django 中进行此更改？TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:33:48.770

对，项目布局从 Django 1.4 开始发生了变化。您将在此页面上获得有关原因的更多信息： [https ://docs.djangoproject.com/en/1.4/releases/1.4/#updated-default-project-layout-and-manage-py](https://docs.djangoproject.com/en/1.4/releases/1.4/#updated-default-project-layout-and-manage-py)

我还建议至少从最新的网站上做官方教程： [https](https://docs.djangoproject.com/en/1.4/intro/tutorial01/) ://docs.djangoproject.com/en/1.4/intro/tutorial01/ 他们解释了项目布局。

# java - 在不扩展 JTree 的情况下，是否在更改树中的对象后强制更新模型？

> ID：10193433
> 
> 赞同：1
> 
> 时间：2012-04-17T14:43:22.007
> 
> 标签：java, swing, user-interface, jtree

我有一个存储“ShipmentItem”的 JTree，它们上的 .toString() 显示数量，然后是 ShipmentItem 的名称。在某些时候，我一次更改了多个项目的数量，但 toString() 在我实际单击该特定树节点之前不会刷新。我不想扩展 JTree 以使用“Property Fired”，我只想能够刷新它以显示更新。

我试过 jtree.setModel(tree.getModel()) 这似乎根本不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:50:42.540

当您更改某些内容时`TreeModel`（通过调整`ShipmentItem`对象来完成），您必须确保`TreeModel`触发正确的事件。这将导致`JTree`重新绘制正确的部分。例如，如果您从 开始`DefaultTreeModel`，您的扩展程序应该[`nodeChanged`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeModel.html#nodeChanged%28javax.swing.tree.TreeNode%29)在节点的对象发生更改时调用。

注意：您不必调整`toString`正确渲染的方法。您正在寻找的概念是[`TreeCellRenderer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeCellRenderer.html)（查看[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)以获取更多信息）

# c# - 将文本框字符串传递给 wpf 中的自定义控件？

> ID：10193438
> 
> 赞同：1
> 
> 时间：2012-04-17T14:43:42.507
> 
> 标签：c#, wpf, xaml, custom-controls

我正在使用 wpf，我想将一些 textbox.text 字符串的参数从我的主窗口单击按钮传递到我的 appPages 文件夹中包含的用户控件，我该如何实现呢？

我想将它发送到的应用程序控件称为 FindCurrentStudent，我不喜欢要求直接代码，但我真的找不到任何东西？

我的想法是这样的：

```
 private void btnGeneral_Click(string _value, object sender, RoutedEventArgs e)
    {
        string value = textBox1.Text;
        AppPages.FindCurrentStudent v1 = new AppPages.FindCurrentStudent(value);
        //does not contain a constructor?
        value = _value; 
```

然后从 customcontrol 我可以这样称呼它：

```
string MainWindowValue = value; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:52:47.017

有多种方法可以实现这一目标。根据您当前的设计，您可以：

*   绑定`Button.Command`到由您公开的命令`UserControl`，并绑定`Button.CommandParameter`到`TextBox.Text`
*   将您公开的属性绑定`UserControl`到`TextBox.Text`
*   绑定到视图模型上的属性

您需要提供有关您当前设计的更多信息，然后我才能帮助您详细说明。

# spring - Spring Insight 需要 tcServer，还是可以与 Eclipse 和 Tomcat 一起使用？

> ID：10193440
> 
> 赞同：3
> 
> 时间：2012-04-17T14:43:46.467
> 
> 标签：spring, tcserver, spring-insight

Spring Insight 需要 tcServer，还是可以与 Eclipse 和 Tomcat 一起使用？我在 Spring Insight 上看到了一些教程，但似乎都使用了 tcServer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T21:53:11.933

从技术上讲，Spring Insight 不需要 tcServer 来完成它的工作。它可以与 JBoss 和其他容器一起使用。然而，VMware 最简单的打包解决方案是将其作为 tc Server 的模板分发。VMware 没有记录 Insight 与其他容器一起运行所需的类路径/JVM 设置/设置。同样，它在技术上是可行的，但目前不支持。我相信该配置将在不久的将来（一个月或 2 个月内）得到支持

既然 tc Server 对开发者是免费的，而且本质上和 Tomcat 一样，那为什么不能和 tc Server 一起使用呢？集成非常好（尤其是使用 STS/Eclipse）

# c# - Cmd 和 C# 删除文件

> ID：10193442
> 
> 赞同：-2
> 
> 时间：2012-04-17T14:43:53.797
> 
> 标签：c#, cmd, delete-file

我正在尝试在 C# 中制作更新程序，并且我想在完成后删除更新程序。
所以我在 C# 中有这段代码：

```
var path = Environment.CurrentDirectory + "\\WindowsFormsApplication1.exe";
Process.Start("cmd.exe /c del " + path); 
```

但我收到此错误消息：

> Win32Exception was unhandled
> 系统找不到指定的文件

但我确定路径拼写正确，所以我认为这不是问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:52:36.237

```
var path = Environment.CurrentDirectory + "\\WindowsFormsApplication1.exe";

Process process = new Process();
process.StartInfo.FileName = "cmd.exe";
process.StartInfo.Arguments = string.Format("/c del \"{0}\"", path);
process.Start(); 
```

或者

```
Process.Start("cmd.exe", string.Format("/c del \"{0}", path)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:49:28.360

这个问题在这里得到了回答：[运行命令提示符命令](https://stackoverflow.com/questions/1469764/run-command-prompt-commands)

另一个解决方案是构建一个 BAT 文件并在其中调用 del。

# python - 无法在 Windows 上的 Apache 下通过 mod_wsgi 导入 pyodbc

> ID：10193445
> 
> 赞同：1
> 
> 时间：2012-04-17T14:44:03.777
> 
> 标签：python, apache, mod-wsgi, pyodbc

版本：

```
Windows 2008 R2 x64
Apache 2.2.19 x86
Python 2.7.3 x86
mod_wsgi-win32-ap22py27-3.3.so
pyodbc-3.0.5.win32-py2.7 
```

我已经验证了 Apache 可以使用 mod_wsgi 调用 Python，并且还验证了我可以从命令行导入 Python 中的 pyodbc。但是，每当我在从 Apache 调用的脚本中导入 pyodbc 时，我都会在 Apache 错误日志中看到这些错误：

```
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1] mod_wsgi (pid=3700): Target WSGI script 'C:/Tenor/web/tcwsgi.py' cannot be loaded as Python module.
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1] mod_wsgi (pid=3700): Exception occurred processing WSGI script 'C:/Tenor/web/tcwsgi.py'.
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1]   File "C:/Tenor/web/tcwsgi.py", line 8, in <module>
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1]     import tcweb
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1]   File "C:\\Tenor\\web\\tcweb.py", line 15, in <module>
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1]     from tc import config, db
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1]   File "C:\\Tenor\\lib\\tc\\db.py", line 6, in <module>
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1]     import pyodbc
[Tue Apr 17 10:26:02 2012] [error] [client 127.0.0.1] ImportError: DLL load failed: The specified module could not be found. 
```

我已经尝试过 Dependency Walker，但它没有显示任何问题（这并不奇怪，因为我*可以*从 Python 命令行导入 pyodbc）。我只安装了一个版本的 Python。我尝试将 Apache 作为服务和从管理员帐户下的控制台运行。

我在另一台机器上有几乎相同的设置，不同之处在于它是 Windows 2003 Server x86。我们正在迁移到 Windows 2008 R2，我想测试生产 Web 设置，但现在卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:36:43.580

请参阅[我的相关帖子](https://stackoverflow.com/questions/10626807/correct-mt-exe-syntax-to-resolve-pyodbc-import-problems/)和[pyodbc 邮件列表上的这篇帖子](http://code.google.com/p/pyodbc/issues/detail?id=214)。

由于（如果我理解正确的话）二进制文件是用不同版本的 C++ 编译器编译的，因此您需要手动将 Python27.dll 中的清单嵌入到 pyodbc.pyd 文件中。

执行此操作的命令是 mt.exe，它随 Visual Studio C++ 2008 Express 一起提供。

# javascript - 如何防止 Javascript 更新整个控件，并刷新内容？

> ID：10193448
> 
> 赞同：0
> 
> 时间：2012-04-17T14:44:10.697
> 
> 标签：javascript, forms, controls, updating

我有这个代码：

```
function addFormControls() {
    var e = document.getElementById("ProductsList");
    var prodid = e.options[e.selectedIndex].value;
    var prodvalue = e.options[e.selectedIndex].text;
    if (num == 0) {
        document.getElementById("ProductsPanel").innerHTML = '<h3>Products added to Variant</h3>';
    }
    if (num < 10) {
        var boolCheck = checkArrayData(prodid);
        if (boolCheck == false) {
            document.getElementById("ProductsPanel").innerHTML = document.getElementById("ProductsPanel").innerHTML + prodvalue + '<input type="text" id="' + prodid + 'product" value="0" width="50px" maxlenght="2" /><input type="button" onclick="updateArrayData(\'' + prodid + '\', document.getElementById(\'' + prodid + 'product\').value);" value="Update Number" /><br />';
            num++;
            prodIdArray.push({
                'key': prodid,
                'value': prodvalue,
                'num': 0
            });
            document.getElementById("productsArray").value = prodIdArray;
        } else {
            alert("Sorry product has already been added!");
        }
    }
} 
```

它很高兴地用新信息更新了一个 div 标签，但是如果你查看它在屏幕上打印一个文本框的部分，第 13 行，这些文本框将由用户更新。

所以简而言之，添加了文本框，并更新了值。

但是，如果有一个值为 5 的文本框，则再次调用此函数以添加另一个文本框，之前文本框的值将被清除干净！

那么，我该如何防止这种情况，我是否必须做一些，for循环遍历div控件获取值，然后在调用此函数后将它们放回去？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:58:45.923

在添加控件之前，我创建了一些 javascript 以将所有值保存在特定输入的值字段中，然后将所有保存的值返回到其受尊重的输入。

```
 function saveValuesOfProducts()
{
    // initialise the array
    numOfProds = new Array();
    // get all the elements which are inputs
    var x=document.getElementsByTagName("input");
    // remove all un necessary inputs
    x = leaveTextInputs(x);
    // loop through the entire list of inputs left saving their value
    for (i=0; i<x.length; i++)
    {
        numOfProds.push(x[i].value);
    }
}
function returnValuesOfProducts()
{
    // get all the elements which are inputs
    var x=document.getElementsByTagName("input");
    // remove all un necessary inputs
    x = leaveTextInputs(x);
    // loop through the entire list of saved values and return them to the input
    for (i=0; i<numOfProds.length; i++)
    {
        x[i].value = numOfProds[i];
    }
}

function leaveTextInputs(value)
{
    // create a new blank array
    var newArr = new Array();
    // loop through all the elements in passed array
    for (i=0; i<value.length; i++)
    {
        // cache the element
        var thevalue = value[i];
        // check if the element is a text input
        if (thevalue.type == "text")
        {
            // check the id consists of product in it!
            var regexteststring = thevalue.id;
            // create the pattern to match
            var patt1 = /product/i;
            if (regexteststring.match(patt1) == "product")
            {
                // as additional check, if it has a size quantity of 2 then its defo out stuff
                if (thevalue.size == 2)
                {
                    newArr.push(thevalue);
                }
            }
        }
    }
    // now return the new array
    return newArr;
} 
```

# django - 如何将 Django 1.4 与 Xeround 一起使用？

> ID：10193449
> 
> 赞同：1
> 
> 时间：2012-04-17T14:44:16.877
> 
> 标签：django, savepoints, xeround

根据[Xeround 的发行说明](http://xeround.com/developers/release-notes/#content)，他们不支持保存点，我不知道如何在 Django 1.4 中关闭对此的支持。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:04:32.287

我有同样的问题。Django 似乎只在决定是否使用保存点时才检查 MySql 的版本。Xeround 可能使用了一些不支持保存点的非标准数据库引擎，即使 MySql 版本足够高。

快速修复（仅用于测试）只是编辑`django/db/backends/mysql/base.py`以覆盖逻辑：

前：

```
self.features.uses_savepoints = self.get_server_version() >= (5, 0, 3) 
```

后：

```
self.features.uses_savepoints = False 
```

我对此进行了测试，它似乎没有引起问题。

**注意：**不建议像这样直接编辑 django 源代码，您可能应该通过子类化或复制 mysql 模块并将其放入项目中来创建自己的 db 后端模块。请记住更新 settings.py 数据库配置以指向您的模块。

# matlab - 并行运行 MEX 文件时的分段错误

> ID：10193451
> 
> 赞同：2
> 
> 时间：2012-04-17T14:44:37.987
> 
> 标签：matlab, segmentation-fault, parallel-processing, mex

我目前正在重复使用 MATLAB 2012a 中的 MEX 文件的实验，偶尔会遇到我无法理解的分段错误。

有关故障的一些信息

*   它们随机发生

*   它们仅在我使用 parfor 循环在 Linux 机器上并行运行多次重复实验时发生。

*   当我使用 parfor 循环在 Mac OSX 10.7 上并行运行多次重复实验时，它们*不会发生。*

*   它们*不会*在我跑步时出现，或者它们在我按顺序运行重复时会出现。

*   当我并行运行 2 个实验时，它们的发生频率似乎要低得多 - 而不是 12 个并行实验。

关于我的 MEX 文件的一些信息：

*   它是用 C 写的

*   它使用 IBM CPLEX 12.4 API（这是线程安全的）

*   它是使用 GCC 4.6.3 编译的

我的想法是在多核中访问 MEX 文件可能存在一些问题。任何人都可以阐明可能发生的事情或提出修复建议吗？我很乐意在必要时提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:09:24.547

我最近向 MATLAB 的人员发送了堆栈跟踪，结果发现罪魁祸首不是我的代码，而是 CPLEX 12.4 API 中的一个函数。事实证明，这个函数使用了 C 中的 putenv() 函数，它不一定是线程安全的。

不幸的是，我必须继续使用这个函数和 API，所以我发布了一个[后续线程，专注于寻找避免这个错误的方法](https://stackoverflow.com/questions/10240387/working-around-segmentation-faults-that-occur-in-parallel-due-to-a-non-thread-sa)。

任何意见，将不胜感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T04:56:22.837

> 我的想法是在多核中访问 MEX 文件可能存在一些问题。

您的 MEX 文件更有可能存在错误。各种错误（在 C 中很容易产生），例如访问悬空内存、加倍`free()`或写入超过分配数组的末尾，将导致间歇性`SIGSEGV`.

最好的办法是在调试器下运行 Matlab，看看它*在哪里*崩溃。

# c# - 如何通过 lambda 表达式传入属性？

> ID：10193453
> 
> 赞同：8
> 
> 时间：2012-04-17T14:44:45.227
> 
> 标签：c#, lambda

我的项目中有一些单元测试，我们希望能够设置一些具有私有设置器的属性。目前我正在通过反射和这种扩展方法来做到这一点：

```
public static void SetPrivateProperty(this object sourceObject, string propertyName, object propertyValue)
{
    sourceObject.GetType().GetProperty(propertyName).SetValue(sourceObject, propertyValue, null);
} 
```

假设我有一个这样的 TestObject：

```
public class TestObject
{
    public int TestProperty{ get; private set; }
} 
```

然后我可以在我的单元测试中调用它，如下所示：

```
myTestObject.SetPrivateProperty("TestProperty", 1); 
```

但是，我想在编译时验证属性名称，因此我希望能够通过表达式传递属性，如下所示：

```
myTestObject.SetPrivateProperty(o => o.TestProperty, 1); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T14:49:42.143

如果 getter 是公开的，那么以下应该可以工作。它将为您提供如下所示的扩展方法：

```
var propertyName = myTestObject.NameOf(o => o.TestProperty); 
```

它需要一个公共吸气剂。我希望，在某个时候，像这样的反射功能会融入到语言中。

```
public static class Name
{
    public static string Of(LambdaExpression selector)
    {
        if (selector == null) throw new ArgumentNullException("selector");

        var mexp = selector.Body as MemberExpression;
        if (mexp == null)
        {
            var uexp = (selector.Body as UnaryExpression);
            if (uexp == null)
                throw new TargetException(
                    "Cannot determine the name of a member using an expression because the expression provided cannot be converted to a '" +
                    typeof(UnaryExpression).Name + "'."
                );
            mexp = uexp.Operand as MemberExpression;
        }

        if (mexp == null) throw new TargetException(
            "Cannot determine the name of a member using an expression because the expression provided cannot be converted to a '" +
            typeof(MemberExpression).Name + "'."
        );
        return mexp.Member.Name;
    }

    public static string Of<TSource>(Expression<Func<TSource, object>> selector)
    {
        return Of<TSource, object>(selector);
    }

    public static string Of<TSource, TResult>(Expression<Func<TSource, TResult>> selector)
    {
        return Of(selector as LambdaExpression);
    }
}

public static class NameExtensions
{
    public static string NameOf<TSource, TResult>(this TSource obj, Expression<Func<TSource, TResult>> selector)
    {
        return Name.Of(selector);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-24T20:53:48.847

C# 6.0 的新手：[nameof](https://msdn.microsoft.com/en-us/library/Dn986596.aspx)（属性）

# c# - 回到之前绑定的列表框

> ID：10193454
> 
> 赞同：0
> 
> 时间：2012-04-17T14:44:46.647
> 
> 标签：c#, windows-phone-7

我很少阅读有关如何在页面之间导航和使用后退按钮的信息。

我实际上尝试做的是在点击事件上实现我的一个按钮以返回到上一个列表框项目。

我的意思是，我在列表框中绑定文件夹。当我单击一个项目时，我会加载子文件夹，因此 itemssource 会发生变化。

当我单击后退按钮时，如何显示列表框的上一个项目源？

我应该使用历史吗？一切都在同一页面上，所以我绝对不能使用这种导航方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:49:23.653

您可以挂钩 OnBackKeyPress 方法并更改 ItemsSource，如果您沿着这条路线走，您需要确保您可以成功退出您的应用程序：-

[http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.onbackkeypress(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationpage.onbackkeypress(v=vs.92).aspx)

# c# - 我需要将命令行脚本从 Windows 服务传递给程序

> ID：10193460
> 
> 赞同：0
> 
> 时间：2012-04-17T14:45:09.027
> 
> 标签：c#, service, command-line, permissions, windows-services

现在，我目前有这个工作，但它是一种解决方法，在未来不会是最佳的。
我目前正在编写一个服务，它必须将一些命令行参数传递给一个程序，然后它会在幕后处理一些我不需要担心的事情。
我遇到的问题是：现在当我安装我的服务时，我需要进入服务的属性，并以我的用户身份登录。如果我使用本地系统（选中与桌面交互），它不起作用。（它实际上也没有失败，这很奇怪，但题外话）。
我想知道是否有一个我可以以编程方式登录的一般用户（如网络服务），这将使它工作。还是可能是权限问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T14:31:40.240

要从 Windows 服务启动外部程序，您需要使用 WinAPI 函数 CreateProcessAsUser。看到[这个帖子](https://stackoverflow.com/questions/16715894/why-wont-my-windows-service-install-another-program-from-a-process/16722367#16722367)。

# c# - 如何以有效的方式同时读取两个 XML 文件

> ID：10193464
> 
> 赞同：0
> 
> 时间：2012-04-17T14:45:19.333
> 
> 标签：c#, .net, performance, linq, linq-to-xml

我有一个复杂的案例：我有三个 XML 文件，我需要同时读取它们并根据匹配获取结果。下面是一个有效的（但假的）示例，与我正在做的几乎相似。

例如，我有两个 xml 文件，两者相似，但在标签和属性方面，但内容（语言）不同。我正在同时阅读两种语言，就像在 C# 文件中的代码中一样：

```
XElement x1 = XElement.Load (@"abc.xml");
XElement x2 = XElement.Load (@"xyz.xml");

var ch = from var1 in x1.Elements("language1") 
         where var1.Attribute("index").Value == "1"
         from var2 in x2.Elements("language2")
         where var2.Attribute("index").Value == var1.Attribute("index").Value
         select dictChapter as new
         {  
             sentenceNumber = var1.Attribute("index").Value,
             SentenceInLanguage1 = var1.Attribute("text").Value,
             SentenceInLanguage2 = var2.Attribute("text").Value,
         };

ListBox.DataContext = ch; 
```

这里的问题是，x1 包含 1000 个句子，所以 x2。上面的逻辑就像一个嵌套循环一样工作，这大大减慢了处理速度。它像

```
x1.1 -> x2.1:1000
x1.2 -> x2.1:1000 
```

或者

```
for i in x1
  for j in x2 
```

有没有更好更有效的方法从 x1 和 x2 中选择句子，其中 x1 的句子 id 等于 x2 的句子 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:01:30.553

据我了解你想要的，

你可以用它`join`来做到这一点。

这是一个很好的示例链接[LINQ to XML：加入 Xml 数据（Wriju 的博客）](http://blogs.msdn.com/b/wriju/archive/2008/03/24/linq-to-xml-join-xml-data.aspx)

...或类似的东西...

```
var root = (from var1 in x1.Elements("language1")
            join var2 in x2.Elements("language2") on (string)var1.Attribute("index") equals (string)var2.Attribute("index")
            select new
            {
                SentenceNumber = (string)var1.Attribute("index"),
                SentenceInLanguage1 = (string)var1.Element("text"),
                SentenceInLanguage2 = (string)var2.Element("text")
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:20:59.280

在 Linq 中，以下语句是等效的，并且将提供相同的结果：

```
from i1 in items1
from i2 in items2
where i1 == i2 
```

和

```
from i1 in items1
join i2 in items2 on i1 equals i2 
```

它们甚至会被翻译成相同的 SQL（使用 Linq to SQL）。`join`对于这两种情况下的 MS SQL，结果 SQL 将包含 join 子句（这就是为什么在查询数据库时不需要使用不太灵活的原因。

然而，对于**Linq to Objects**和**Linq to XML**，两者都将以不同的方式执行。第一个将导致嵌套循环，第二个不会。

因此，您只需要更改您的实现以`join`按照@NSGaga 的建议使用。

另一个优化是添加`.ToList()`：

`ListBox.DataContext = ch;`

我不确定数据绑定，但由于 linq 的延迟性质，您的表达式可能会被多次重新评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:50:32.420

简单的！只需按顺序浏览每个文件。在第一遍：创建一个字典`sentenceNumber > SentenceInlanguage1`。

`SentenceInLanguage1`在您的第二遍中，按照您显示的代码创建您的可枚举，并粘贴来自变量的第一遍的数据。

如果您更愿意同时遍历这两个，只需获取一个枚举器 ( `GetEnumerator`) 并在一个普通的旧循环中遍历它们，然后在循环体的末尾为两个枚举器`while`移动到下一个。`XElement`

# java - 如何在 JTable 中维护用户指定的列宽？

> ID：10193475
> 
> 赞同：7
> 
> 时间：2012-04-17T14:45:55.237
> 
> 标签：java, jtable

所以我正在使用一个`JTable`，它与我自己的自定义数据模型相关联。这一切都是功能性的，但我遇到的问题是，任何时候我对表进行更改（触发 tableDataChanged、tableStructureChanged 等）所有列宽都会自行重置为默认值。我从研究中了解到，这与`TableColumnModel`默认分配的有关。在此重置之外，我对 的功能感到满意`DefaultTableColumnModel`，但如果用户应该调整列的大小（通过拖动列标题的边缘），我只想保留列的宽度。

我知道`setPreferredWidth()`TableColumns，并且我已经能够成功地做到这一点；我想我的问题是我应该听什么样的事件来保存和设置这个首选宽度。我尝试将 a 添加`PropertyChangeListener`到表头，但是每当我尝试调整大小时，我都会得到一个 StackOverflow（我假设它是递归运行的）。我完全可以在数据模型中为列宽添加一个额外的数据成员，并将其存储在那里，但我只是不知道何时/如何设置这些宽度，以免它们被覆盖`fireTableStructureChanged()`，等等. 事件。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-11T12:02:54.457

关于什么

`table.setAutoCreateColumnsFromModel(false);`

我也有这个问题，这对我有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:41:22.917

尝试这样的事情。

```
import javax.swing.JTable;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

public class ColumnResizer {

    public static void setColumnPreferredWidth(JTable table, int column,
            int preferredWidth) {
        TableColumnModel columnModel = table.getColumnModel();
        TableColumn tableColumn = columnModel.getColumn(column);
        tableColumn.setPreferredWidth(preferredWidth);
    }

} 
```

# xslt - xslt 应用模板

> ID：10193478
> 
> 赞同：0
> 
> 时间：2012-04-17T14:46:11.943
> 
> 标签：xslt, xpath, xslt-1.0

无法成功在 xsl (1.0) 中为 传递参数。似乎无法动态修改“选择”的内容。下面是一个不抛出错误但无法识别**$entity**参数的尝试：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output cdata-section-elements="" encoding="UTF-8" indent="yes" method="xml" omit-xml-declaration="yes"/>   
    <xsl:param name="entity">CreditController[]</xsl:param>
        <xsl:template match="/">
            <xsl:element name="variable">
                  <xsl:attribute name="type">NameValuePair[]</xsl:attribute>
                      <xsl:apply-templates select="variable/*[@type='$entity']/item"/>                      
            </xsl:element>
    </xsl:template>

    <xsl:template match="item">                 
            <xsl:element name="item">
            <xsl:attribute name="type">NameValuePair</xsl:attribute>
            <xsl:element name="value">
                <xsl:attribute name="type">String</xsl:attribute>
                <xsl:value-of select="Code"/>
            </xsl:element>
            <xsl:element name="name">
                <xsl:attribute name="type">String</xsl:attribute>
                <xsl:value-of select="Code"/>-<xsl:value-of select="Value"/>
            </xsl:element>
            </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

提前致谢。其他帖子似乎建议使用并设置元素的“模式”属性。这两个我都没有赢。

用字符串文字“CreditController[]”替换实体变量按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:19:53.657

在您的 XPath 中，您`$entity`用引号将您括起来，使其成为字符串文字`$entity`而不是要扩展的变量。

删除引号：

```
<xsl:apply-templates select="variable/*[@type=$entity]/item"/> 
```

# reporting-services - SSRS 订阅失败 - 长时间数据检索值

> ID：10193479
> 
> 赞同：1
> 
> 时间：2012-04-17T14:46:18.970
> 
> 标签：reporting-services, reportingservices-2005

早上好-

我有一个运行 2 个存储过程的 SSRS 报告。这些存储过程中的每一个在通过 Management Studio 运行时都需要 2-4 分钟才能运行。

我有订阅设置，每天使用不同的参数值运行此报告。每天应该生成 5 个该报告的副本，每个副本使用不同的参数值生成。今天 5 个订阅中有 3 个失败。我今天在日志中看到的每次失败的错误是：

```
Microsoft.ReportingServices.ReportProcessing.ReportProcessingException: Cannot read the next data row for the dataset SectionLines. 
```

当我查看报表服务器数据库中的执行日志时，我看到失败报表的 TimeDataRetrieval 值 > 3600000。这很奇怪，因为每个存储过程只需要几分钟的时间来运行，而且绝对不超过 10 分钟.

解决此问题的任何线索？

谢谢！

# linux - 如何使用 gnu make 工具更新档案？

> ID：10193485
> 
> 赞同：1
> 
> 时间：2012-04-17T14:46:36.230
> 
> 标签：linux, makefile, gnu-make

根据手册，您可以使用这样的语法：**libfoo(obj1.o)**，代表将 obj1.o 插入 libfoo，我写了这样的规则：

```
libfoo(obj1.o obj2.o):obj1 obj2 
```

这条规则只将 obj1.o 插入到 libfoo 中，为什么它不能将 obj2.o 插入到 libfoo 中？
libfoo(obj1.o obj2.o) 真正代表什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:56:53.873

从[GNUMake 手册](http://www.gnu.org/software/make/manual/make.html#Archive-Members)：

> 要在同一个存档中指定多个成员，您可以将所有成员名称一起写在括号之间。例如：
> 
> ```
>  foolib(hack.o kludge.o) 
> ```
> 
> 相当于：
> 
> ```
>  foolib(hack.o) foolib(kludge.o) 
> ```

当你时`make`，我猜你没有指定目标，所以 Make 选择第一个目标，在你的 makefile 中是`libfoo(obj1.o)`.

# sql - 在更新语法中使用带有子查询的内连接

> ID：10193487
> 
> 赞同：3
> 
> 时间：2012-04-17T14:46:42.313
> 
> 标签：sql, sql-server

我正在尝试使用带有子查询的更新语句的内部联接...您能帮我解决语法问题吗---以及如何在 sql server 中使用 AS 子句作为别名？？？以下是我想要做的：

```
Update Table1 
inner join table2
set table1.value1 = (select table2.value1 where table1.value 1 ....) 
```

任何的想法？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T15:00:51.080

如果您需要使用子查询来执行更新，您可以这样做：

```
UPDATE t1
SET t1.value = t2.value
FROM Table1 t1
JOIN
(
    SELECT id, value
    FROM table2
) t2
ON t1.id = t2.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T14:48:47.237

一种方法是给表起别名：

```
update t1
set    table1.value1 = t2.value1
from   table1 as t1
join   table2 as t2
on     t1.id = t2.t1_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T14:48:41.713

你应该试试

```
UPDATE table1 SET t1.value1 = t2.value2 
FROM table1 t1
INNER JOIN table2 t2 
    ON t1.field1 = t2.field2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-15T00:41:57.687

```
UPDATE Table1 t1
    INNER JOIN (
        SELECT id, value
        FROM table2
    ) t2 USING(id)
SET t1.value = t2.value 
```

# asp.net - Web.sitemap 在新页面中打开 pdf

> ID：10193493
> 
> 赞同：1
> 
> 时间：2012-04-17T14:46:56.503
> 
> 标签：asp.net

这是我的代码

```
<siteMapNode url="/guide_saisie.pdf" title="?" description="GuideSaisie" target="_blank" /> 
```

没有打开页面，我收到此错误：HTTP verb POST not allowed to accesses to the '/.../guide_saisie.pdf' is not authorized。

但是，如果我将 url 直接放在我的浏览器中，它就可以工作。

如何在新页面的站点地图中打开pdf？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:41:34.220

您是否尝试使用相对网址？

```
<siteMapNode url="~/guide_saisie.pdf" title="?" description="GuideSaisie" target="_blank" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T23:14:24.903

Java 脚本 window.open(url) 在我的情况下运行良好....

# javascript - 将本地函数传递给 setTimeout()

> ID：10193496
> 
> 赞同：3
> 
> 时间：2012-04-17T14:46:59.377
> 
> 标签：javascript, settimeout, local-variables

我写了以下函数。

```
function obj()
{
     this.a;
}
obj.prototype.catch = function()
{
    alert('Catched')
}
obj.prototype.do = function()
{
    alert('called');
} 
```

我需要的是，在调用 obj::do() 之后调用 obj::catch() 并且必须从 obj::do() 内部执行调用 那么如何将 obj 的本地函数传递给 setTimeout

我努力了

```
obj.prototype.do = function()
 { 
     window.setTimeout('"'+this.catch+'()"',1000);
     alert('called');
 } 
```

它不起作用然后我尝试了

```
 obj.prototype.do = function()
 { 
     window.setTimeout('"'+this+'.catch()"',1000);
     alert('called');
 } 
```

这在 Chrome 控制台上给了我以下错误

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

所以我尝试了以下肮脏的方法（真的很脏吗？）

```
 obj.prototype.do = function()
 { 
     this.pid = randomVal(100);
     window['temp'+this.pid] = this;
     window.setTimeout("temp"+this.pid+".catch();",1000);
     alert('called');
 }
 function randomVal(bound)//returns a random number between 0 and <bound>
 {
       return (Math.floor(Math.random()*(bound)));
 } 
```

那行得通。

那么为什么前两种方法不起作用。有没有其他方法可以在没有全局变量的情况下做同样的事情。第二种方法和最后一种方法几乎相似。但是为什么我在第二种方法中得到错误..？工作代码可以在这里找到 [http://jsfiddle.net/jXhAs/](http://jsfiddle.net/jXhAs/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T14:52:02.197

不要将字符串传递给`setTimeout`……曾经。

```
var self = this; // Because the scope will change
setTimeout(function () { self.catch() },1000); 
```

或者，如果您使用的是 JS 1.8.5：

```
setTimeout(this.catch.bind(this),1000); 
```

你可以[阅读更多关于`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T14:51:56.220

您应该将**函数**传递给`setTimeout`（不是字符串）：

例子：

```
var self = this;
setTimeout(function(){
    self.catch();
},1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T14:51:27.140

使用闭包

```
obj.prototype.do = function()
{ 
     window.setTimeout((function(that){
        return function(){
            that.catch();
        };
     })(this),1000);
     alert('called');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T14:55:37.053

为什么要经历所有这些努力，只是传递函数。

```
function obj() {
    this.a;
}
obj.prototype.
catch = function() {
    alert('Catched')
}
obj.prototype.do = function() {
    setTimeout(this.
    catch, 1000);
}

var test = new obj();
test.do();​ 
```

# javascript - MoPub Android - 创建自定义网络时不显示 javascript 代码

> ID：10193497
> 
> 赞同：2
> 
> 时间：2012-04-17T14:47:01.813
> 
> 标签：javascript, android, mopub

我确实将 mopub sdk 集成到我的项目中，运行良好

当我使用简单的 html 代码创建自定义网络时，广告会正确显示：（mopub 示例代码）

```
<style type="text/css">
  body {
    font-size: 12px;font-family:helvetica,arial,sans-serif;
    margin:0;padding:0;text-align:center;background:white}
    .creative_headline {font-size: 18px;}
    .creative_promo {color: green;text-decoration: none;}
</style>
<div>Welcome to mopub!</div>
<div><a href="http://www.shoutem.com">Click here to test ad</a></div>
<div>You can now set up a new campaign to serve other ads.</div> 
```

但是，当我使用 javascript 代码创建横幅时（也是 mopub 示例）

```
<script language="JavaScript"> 
var zflag_nid='1577'; 
var zflag_cid='24'; 
var zflag_sid='1'; 
var zflag_width='320'; 
var zflag_height="50"; 
var zflag_sz='16'; </script>
<script language="JavaScript" src="http://c2.zedo.com/jsc/c2/fo.js"></script> 
```

不显示广告。

Mopub 支持 javascript/html 代码吗？如何创建自定义网络？

任何想法？谢谢

# jquery - 更改被拖动的 jqGrid 行的 CSS

> ID：10193503
> 
> 赞同：2
> 
> 时间：2012-04-17T14:47:30.187
> 
> 标签：jquery, jqgrid, drag-and-drop

我正在使用 jqGrid 的拖放功能，我想知道如何更改被拖动的行的 CSS。

我想我可以在拖动的行中添加一个 CSS 类，但我不是 100% 确定如何。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:40:30.453

您可以使用[onstart](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jquery_ui_methods#options1)回调来修改正在拖动的行的样式。

我为您制作[了以下演示](http://www.ok-soft-gmbh.com/jqGrid/gridDnD-and-sortableRows3.htm)，以演示如何完成：

![在此处输入图像描述](../Images/2d8a8fbc91af0f75b0f020cf9877f923.png)

对应的代码是

```
$("#grid1").jqGrid('gridDnD', {
    connectWith: '#grid2',
    onstart: function (ev, ui) {
        ui.helper.removeClass("ui-state-highlight")
            .addClass("ui-state-error ui-widget")
            .css({
                border: "5px ridge tomato"
            });
    }
}); 
```

在示例中，我`"ui-state-highlight"`默认将 jqGrid 添加的样式删除到拖动行，然后添加`"ui-widget"`以修复拖动行的字体问题。最后，我添加了与我需要的样式相对应的样式： CSS class`"ui-state-error"`和 CSS style `border: 5px ridge tomato`。

另外我使用 CSS 样式

```
.ui-jqgrid .ui-jqgrid-bdiv table.ui-state-active { border-style: none; } 
```

以防止目标网格中的水平滚动条。

**更新**`altRows: true`：我认为在一些网格中的使用没有任何问题。可能你的原因是`sortableRows`在

```
// make rows of grid2 sortable
$("#grid2").jqGrid('sortableRows', {
    update: function () {
        resetAltRows.call(this.parentNode);
    }
}); 
```

[我在这里](https://stackoverflow.com/a/6509495/315935)描述的简单`resetAltRows`功能。您可以尝试[演示](http://www.ok-soft-gmbh.com/jqGrid/gridDnD-and-sortableRows4.htm)以查看一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:59:39.720

好吧，您可以像这样将类添加到您的 div 或行：

这是[小提琴](http://jsfiddle.net/ZgpkS/)

```
$(document).ready(function(){

$('div').click(function(){
$(this).addClass('red');

});

}); 
```

# objective-c - 如何在iOS灰度而不是蓝色中进行切换？

> ID：10193505
> 
> 赞同：0
> 
> 时间：2012-04-17T14:47:35.560
> 
> 标签：objective-c, ios, colors, grayscale

我想让我的开关以黑白模式显示，而不是默认的蓝色。相机应用程序中也存在相同的效果。选项视图中的开关也处于灰度模式。它容易做还是需要子类化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:49:55.737

iOS 5 的外观 API 允许您设置 UIKit 控件的配色方案等。对于开关，您设置`onTintColor`属性：

```
[[UISwitch appearance] setOnTintColor:[UIColor grayColor]]; 
```

但是，如果您需要支持早期版本的 iOS，则必须设计和实现自己的自定义开关控件。

# visual-studio-2010 - Crystal Reports 将插入某些图像，但不会插入其他图像

> ID：10193508
> 
> 赞同：6
> 
> 时间：2012-04-17T14:47:44.040
> 
> 标签：visual-studio-2010, image, crystal-reports

对要插入 CR 的图像是否有特定要求？

我正在尝试将图像插入 Crystal 报表，但在选择文件后没有任何反应。我有一个不同的图像，用于测试插入没有问题，所以我假设它与保存图像时的 JPG 文件设置有关。请注意，这只是页眉的静态徽标——没有动态加载任何内容。

我知道不能使用 GIF，所以我尝试了 JPG 和 PNG，但无济于事。我什至通过 Photoshop 再次保存了我的“工作”图像，它会插入。然后我使用这些设置来保存非工作图像，但该图像不会插入。我过去经常使用 Crystal Reports，这是我第一次遇到这个问题，我的搜索使我找到了用于动态图像包含的各种资源，但对于这个希望简单的问题却毫无用处。

我正在为 Visual Studio 2010 使用 Crystal Reports。

[链接到测试中使用的图像](http://sandbox.gndev.com/crimages.zip "链接到图像")

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-18T15:07:26.783

在把这个问题搞了一天之后，我发现这是 Crystal Reports IDE 中的一个错误。

以下是复制问题的方法：

1.  右键单击您的报告并选择插入>>图片
2.  双击要插入的图像。

根据您的图像以及图像在 Photoshop 中的保存方式，它可能会或可能不会插入到报告中。我的结果好坏参半，显然有些图像有效，有些则无效。我还没有完全弄清楚模式，但我相信它与图像的颜色配置文件有关。我可能不会再浪费时间研究它了，因为以下分辨率每次都对我有用，我可以导入我在 Photoshop 中创建的每张图像，而不管图像是如何保存的以及用于保存图像的设置. （当然，假设它们都是 JPG。）

解析度：

1.  右键单击您的报告并选择插入>>图片
2.  单击要插入的图像以将其选中。
3.  点击“打开”</li>

图像应正确插入报告中。

这是一个微妙的区别，但我希望这可以节省其他人几个小时的调试时间。

戴夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:21:47.750

为我工作了AOK。检查您是否拥有所有最新补丁。我在 Crystal 2011 中附上了屏幕截图并保存了 .rpt 供您尝试在 Visual Studio 2010 中打开： http: [//speedy.sh/RGgfg/crimages.zip](http://speedy.sh/RGgfg/crimages.zip)

![在此处输入图像描述](../Images/a06170ac8fbf22e08a94420c0bdf2909.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:12:27.630

原因是因为不支持该格式，我遇到了完全相同的问题，但是当我将文件保存为 JPG 时，它开始完美运行！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T09:47:34.810

我认为水晶报告不接受某些图像格式，但是当我遇到问题时我所做的是 1\. 使用 coreldraw 打开图像 2\. 复制图像的图像内容并将其粘贴到水晶报告中，而不是使用插入工具在水晶报告上，它起作用了

希望这也会有所帮助。

# vb.net - 我的累加器 For... Next 循环在 VB 中跳过数字；视觉工作室 2010。

> ID：10193511
> 
> 赞同：0
> 
> 时间：2012-04-17T14:47:49.937
> 
> 标签：vb.net, accumulator

我正在尝试编写一个 For... Next 循环，该循环将允许 12 个条目或取消按钮。
不知何故，intEntries 只使用了 1、3、5、7、9 和 11。完成后，计算被除以 13，而不是 12。我不确定我错了什么，但它是显然是什么。非常感谢您能给我的任何帮助！

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        'initialize accumulator
        Dim decEntries As Decimal
        ' For loop to ask for input.
        For decEntries = 1 To 12 Or strMonthlyAvg = " "
            strMonthlyAvg = InputBox("Please Enter the Average for Month # " & decEntries & ":")
            decEntries += 1
            lstTemps.Items.Add(strMonthlyAvg)
            decMontlyAvg = Convert.ToDecimal(strMonthlyAvg)
            ' This will add the montly average to the total Average Temperature for 
            ' calculations
            decTotalTemp += decMontlyAvg

        Next
        ' Calculation to provide the average temp for all entered values
        decAnnualAvg = decTotalTemp / decEntries
        ' convert annual average to string
        strAnnualAvg = Convert.ToString(decAnnualAvg)
        ' Display the results for the user
        lblResults.Text = "The average annual temperature " & vbCrLf &
                            "based on your entries is: " & strAnnualAvg & "."

    End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:51:38.750

您`decEntries`在 For-Next 循环中有作为计数器，每次`Next`达到时都会递增。

但是，您也在循环中间“手动”递增它：

```
decEntries += 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T14:52:13.053

删除`decEntries += 1`for .. 循环自动加一的行！

# android - 将 managedQuery 与注册的 ContentProvider 一起使用时收到“未知 Uri”消息

> ID：10193512
> 
> 赞同：0
> 
> 时间：2012-04-17T14:47:56.847
> 
> 标签：android, google-tv

我正在研究索尼 GTV 和罗技 revue GTV。

我想为 Google 运行 managedQuery `quicksearchbox`。我`dumpstate`在“Registered ContentProviders”部分运行后发现 Content_Uri 是：“com.android.quicksearchbox.google”。

但是当我在查询中使用该 URI 时：

```
Uri uri = Uri.parse("content://com.android.quicksearchbox.google");   
Cursor mCursor = managedQuery(uri, null, null, null, null); 
```

我收到“未知 URI”错误消息。

它适用于 YouTube content_uri：

```
Uri uri = Uri.parse("content://com.google.android.youtube.googletv.SuggestionProvider");  
Cursor mCursor = managedQuery(uri, null, null, null, null); 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:45:28.040

不支持查询 quicksearchbox 提供程序。

# iphone - PhoneGap iOS 低延迟音频

> ID：10193516
> 
> 赞同：0
> 
> 时间：2012-04-17T14:48:04.257
> 
> 标签：iphone, ios, audio, cordova

在 PhoneGap 1.6 发布之前，我一直在使用名为 SoundPlug 的 PG 插件在我的 iOS 应用项目中实现低延迟音频。

在 PhoneGap 1.6 中，SoundPlug 插件不再起作用（至少我似乎也无法得到它）。有人有我可以使用的解决方案吗？

当按下记录音频的按钮时，我正在使用它来播放哔声。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:30:37.043

插件需要更新才能在新重命名的 Cordova 中使用。

.dmg 文件中有一个插件更新指南 pdf 文件，其中包含 iOS 安装程序。

这可能是一个很好的起点……否则，您可能必须等到有人更新插件。当他们这样做时，它可能会进入 iOS 更新插件的新 repo 文件夹（https://github.com/phonegap/phonegap-plugins/tree/master/iOS）。

# sqlalchemy - sqlalchemy - 如何将带有子查询的查询转换为关系

> ID：10193517
> 
> 赞同：1
> 
> 时间：2012-04-17T14:48:09.763
> 
> 标签：sqlalchemy, relationship

在下面的代码中，我想`all_holdings`用一个名为`holdings`返回的属性替换 Account `desired_holdings`（这是代表最新已知数量的持有量，可以随时间变化）。我无法弄清楚如何构建对关系的调用。

此外，我希望对模式的适当性（将历史数据保存在单个表中并使用最大日期子查询获取最新数据）以及更好的替代方案或查询改进提出任何评论。

```
from sqlalchemy import Column, Integer, String, Date, DateTime, REAL, ForeignKey, func
from sqlalchemy.orm import relationship, aliased
from sqlalchemy.sql.operators import and_, eq
from sqlalchemy.ext.declarative import declarative_base
from db import session
import datetime
import string

Base = declarative_base()

class MySQLSettings(object):
    __table_args__ = {'mysql_engine':'InnoDB'}

class Account(MySQLSettings, Base):
    __tablename__ = 'account'
    id = Column(Integer, primary_key=True)
    name = Column(String(64))
    all_holdings = relationship('Holding', backref='account')

    def desired_holdings(self):
        max_date_subq = session.query(Holding.account_id.label('account_id'),
                                      Holding.stock_id.label('stock_id'),
                                      func.max(Holding.as_of).label('max_as_of')). \
                                      group_by(Holding.account_id, Holding.stock_id).subquery()

        desired_query = session.query(Holding).join(Account,
                                                    Account.id==account.id).join(max_date_subq).\
                                                    filter(max_date_subq.c.account_id==account.id).\
                                                    filter(Holding.as_of==max_date_subq.c.max_as_of).\
                                                    filter(Holding.account_id==max_date_subq.c.account_id).\
                                                    filter(Holding.stock_id==max_date_subq.c.stock_id)

        return desired_query.all()

    def __init__(self, name):
        self.name = name

class Stock(MySQLSettings, Base):
    __tablename__ = 'stock'
    id = Column(Integer, primary_key=True)
    name = Column(String(64))

    def __init__(self, name):
        self.name = name

class Holding(MySQLSettings, Base):
    __tablename__ = 'holding'
    id = Column(Integer, primary_key=True)
    account_id = Column(Integer, ForeignKey('account.id'), nullable=False)
    stock_id = Column(Integer, ForeignKey('stock.id'), nullable=False)
    quantity = Column(REAL)
    as_of = Column(Date)

    stock = relationship('Stock')

    def __str__(self):
        return "Holding(%f, '%s' '%s')"%(self.quantity, self.stock.name, str(self.as_of))

    def __init__(self, account, stock, quantity, as_of):
        self.account_id = account.id
        self.stock_id = stock.id
        self.quantity = quantity
        self.as_of = as_of

if __name__ == "__main__":
    ibm = Stock('ibm')
    session.add(ibm)
    account = Account('a')
    session.add(account)
    session.flush()
    session.add_all([ Holding(account, ibm, 100, datetime.date(2001, 1, 1)),
                      Holding(account, ibm, 200, datetime.date(2001, 1, 3)),
                      Holding(account, ibm, 300, datetime.date(2001, 1, 5)) ])
    session.commit()

    print "All holdings by relation:\n\t", \
        string.join([ str(h) for h in account.all_holdings ], "\n\t")

    print "Desired holdings query:\n\t", \
        string.join([ str(h) for h in account.desired_holdings() ], "\n\t") 
```

运行时的结果是：

```
All holdings by relation:
    Holding(100.000000, 'ibm' '2001-01-01')
    Holding(200.000000, 'ibm' '2001-01-03')
    Holding(300.000000, 'ibm' '2001-01-05')
Desired holdings query:
    Holding(300.000000, 'ibm' '2001-01-05') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T18:40:05.787

在我发布到 sqlalchemy google 组后，Michael Bayer 提供了以下答案：

> desired_holdings() 查询非常复杂，我没有看到通过尝试让 relationship() 来实现它的胜利。relationship() 旨在维护两个类之间的持久性，而不是报告技术（其中任何带有 max()/group_by 的东西都是指报告）。
> 
> 我会将@property 放在desired_holdings 之上，使用object_session(self) 进入“会话”，然后完成。

查看有关[启用查询的属性的](http://docs.sqlalchemy.org/en/latest/orm/join_conditions.html#building-query-enabled-properties)更多信息。

# c# - MissileFired.Move 的空引用异常

> ID：10193519
> 
> 赞同：2
> 
> 时间：2012-04-17T14:48:19.327
> 
> 标签：c#, xna

```
namespace SpaceInvader
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class SpaceInvaders : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        Texture2D StarfieldImg;
        Texture2D InvaderImg;
        Texture2D AltInvaderImg;
        Texture2D RocketLauncherImg;
        Texture2D MissileImg;
        int RocketXPos;
        int AlienDirection;
        int AlienSpeed;
        Invader[] Invaders; 
        double Ticks;
        Missile MissileFired;

        public SpaceInvaders()
        {
            graphics = new GraphicsDeviceManager(this);

            graphics.PreferredBackBufferWidth = 1024;
            graphics.PreferredBackBufferHeight = 768;
            graphics.ApplyChanges();

            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            // TODO: Add your initialization logic here
            RocketXPos = 512;

            AlienDirection = -1;
            AlienSpeed = 16;

            Invaders = new Invader[11];

            int XPos = 512;
            for (int Count = 0; Count < 11; Count++)
            {
                Invaders[Count] = new Invader();
                Invaders[Count].SetXPos(XPos);
                Invaders[Count].SetYPos(100);

                XPos = XPos + 32;
            }

            Ticks = 0;

            MissileFired = null;
            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here
            StarfieldImg = Content.Load<Texture2D>("Starfield1024x768");
            InvaderImg = Content.Load<Texture2D>("inv1");
            AltInvaderImg = Content.Load<Texture2D>("inv12");
            RocketLauncherImg = Content.Load<Texture2D>("LaserBase");
            MissileImg = Content.Load<Texture2D>("bullet");

        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here
            MissileFired.Move();

            if (Keyboard.GetState().IsKeyDown(Keys.Space))
            {
                MissileFired = new Missile(RocketXPos, 650);
            }

            if (Keyboard.GetState().IsKeyDown(Keys.Left))
            {
                RocketXPos = RocketXPos - 4;
            }

            if (Keyboard.GetState().IsKeyDown(Keys.Right))
            {
                RocketXPos = RocketXPos + 4;
            }

            if (RocketXPos < 100)
            {
                RocketXPos = 100;
            }

            if (RocketXPos > 924)
            {
                RocketXPos = 924;
            }

            Ticks = Ticks + gameTime.ElapsedGameTime.TotalMilliseconds;

            if (Ticks > 500)
            {
                for (int Count = 0; Count < 11; Count++)
                {
                    Invaders[Count].MoveHorizontal(AlienSpeed * AlienDirection);
                }

                if (Invaders[0].GetXPos() < 96)
                {
                    AlienDirection = +1;

                    int XPos = 96;
                    for (int Count = 0; Count < 11; Count++)
                    {
                        Invaders[Count].MoveVertical(4);
                        Invaders[Count].SetXPos(XPos);
                        XPos = XPos + InvaderImg.Width;
                    }
                }

                if (Invaders[10].GetXPos() > 924)
                {
                    AlienDirection = -1;

                    int XPos = 924 - InvaderImg.Width * 10;
                    for (int Count = 0; Count < 11; Count++)
                    {
                        Invaders[Count].MoveVertical(4);
                        Invaders[Count].SetXPos(XPos);
                        XPos = XPos + InvaderImg.Width;
                    }
                }

                Ticks = 0;
            }

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            spriteBatch.Begin();

            spriteBatch.Draw(StarfieldImg, Vector2.Zero, Color.White);

            spriteBatch.Draw(RocketLauncherImg, new Vector2(RocketXPos, 650), Color.White);

            if (MissileFired != null)
            {
                Vector2 MissilePos = new
                Vector2(MissileFired.GetPosition().X, MissileFired.GetPosition().Y - MissileImg.Height);
            spriteBatch.Draw(MissileImg, MissilePos, Color.White);
            }

            for (int Count = 0; Count < 11; Count++)
            {
                spriteBatch.Draw(InvaderImg, Invaders[Count].GetPos(), Color.White);
            }

            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

尝试运行此游戏时，MissileFired.Move 带有下划线，并带有空引用异常。我认为它可能在 draw 或 update 方法中丢失了一些东西，但我不知道。有关此异常的详细信息指出“对象引用未设置为对象的实例”。帮助会很大，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:51:26.707

对象`MissileFired`为空。当您尝试调用空对象（例如`Move()`）上的成员时，您会得到一个`NullReferenceException`.

从我在您的代码中可以看到，`MissileFired`是通过按键有条件地创建的，因此尝试使用它的代码可能应该首先进行空检查，而不是假设它存在：

```
if (MissileFired != null)
{
    MissileFired.Move();
} 
```

对我来说，这是有道理的，导弹只有在发射时才会存在，但代码需要处理这两种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T14:53:38.300

```
 protected override void Initialize()
    {
        ...
        MissileFired = null;
        ...
    } 
```

这是一个问题 - MissleFired 在游戏开始后为空，因此在您确定已初始化它之前，您不能在 Update() 方法中不检查空值就使用它。

# mysql - 允许 MySQL 查询的可选参数

> ID：10193521
> 
> 赞同：2
> 
> 时间：2012-04-17T14:48:23.053
> 
> 标签：mysql, sql

我有一个搜索页面，其中包含多个用于创建细化搜索的字段。每个字段都是可选的。我正在尝试开始制作我的 sql 查询，以便在给定适当的变量的情况下它可以工作，但我遇到了麻烦。

这是我目前拥有的 SQL 查询：

```
SELECT
  indicator.indid,
  indicator.indicator,
  indtype.indtype,
  provider.provider,
  report.report,
  actor.actor
FROM
  actor,
  indicator,
  indtype,
  report,
  provider
WHERE
  indicator.indtypeid = indtype.indtypeid
  AND indicator.actorid = actor.actorid
  AND indicator.reportid = report.reportid
  AND report.providerid = provider.providerid
  AND indicator.indicator LIKE '%$indicator%'
  AND indicator.indtypeid = $indtypeid; 
```

每当我提供 an`indicator`和 an`indtypeid`时，搜索就可以正常工作。但是，当我将该`indtypeid`字段留空并将变量设置为`*`（作为其默认值）时，查询不会返回任何结果。我已经尝试手动处理查询，但它似乎不喜欢`*`or`%`符号。基本上，如果只指定了一个指标而没有`indtypeid`指定，我想返回 all 的所有指标`indtypeids`。

我确定我遗漏了一些小东西，但我将不胜感激可以提供的任何帮助。我可能一开始就错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T14:56:33.687

试试这个：

```
SELECT i.indid,    i.indicator, it.indtype, 
       p.provider, r.report,    a.actor 
FROM actor a 
INNER JOIN indicator i ON a.actorid    = i.actorid
INNER JOIN indtype  it ON i.indtypeid  =  it.indtypeid
INNER JOIN report   r  ON i.reportid   = r.reportid 
INNER JOIN provider  p ON r.providerid = p.providerid 
WHERE 1 = 1
  AND ($indicator IS NULL OR i.indicator LIKE '%$indicator%')
  AND ($indtypeid IS NULL OR i.indtypeid = $indtypeid); 
```

因此，如果您通过 a `$indicator = NULL`，那么第一个条件`AND ($indicator IS NULL OR i.indicator LIKE '%$indicator%')`将被忽略，因为它将解析为`True`，而第二个条件也是如此。

我已经删除了其他条件并用s`Where`替换它们，并且为了使查询正常工作，以防您传递两个变量和每个变量的值，在这种情况下，它将返回所有结果，因为它始终为真。`JOIN``WHERE 1 = 1``$indicator``$indtypeid``NULL``1 = 1`

# php - Smarty php带索引的双数组

> ID：10193528
> 
> 赞同：0
> 
> 时间：2012-04-17T14:49:10.280
> 
> 标签：php, multidimensional-array, smarty

我有以下 tpl 代码：

```
{foreach from=$data.reviews item=item}
    {$item.user_name},{$item.datestamp}
{/foreach} 
```

在设计此页面时，我正在创建一个 php 文件来模拟一些数据。我应该如何编码数组部分？目前，我有以下内容：

```
$data = array('reviews' => array('user_name' => 'John',
                                 'datestamp' => '24 April 2012',
                                )
             ); 
```

但是，非常奇怪的是显示的数据是 JJ 和 22。如何在 for 循环中显示至少 2 个信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:56:07.500

认为你错过了一个级别。你需要的是这样的：

```
$Smarty->assign( 'data', array(
    'reviews' => array(
        array(
            'user_name' => 'testing',
            'datestamp' => 4534534
        ),
        array(
            'user_name' => 'testing2',
            'datestamp' => 45345343
        ),
    )
) ); 
```

# webforms - 从 Numara 足迹传递凭据

> ID：10193531
> 
> 赞同：0
> 
> 时间：2012-04-17T14:49:20.137
> 
> 标签：webforms

我有一个自定义 WebForms 应用程序，用于我们的帮助台，它在我们的卫星站点及其网络设备的数据库上执行一些 CRUD。

我希望能够将其与 Numara Footprints 集成，因为我们将其用于票务跟踪。

我有一个模板设置和一个按钮控件的工作 URL，但我需要知道如何让我的应用程序检测足迹会话并利用凭据。

我想这是我需要问 Numara 的事情，但我想我会先给你们一个机会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:50:48.360

我已经设置了许多 Web 表单来与 Numara Footprints (BMC) 进行交互。您必须在 Numara 服务器上创建一个 cgi 脚本。然后你要做的就是将该链接用作 HTML 文件中的表单操作。

这是我用过的一个例子：

```
form action="https://your-server.com/cgi-bin/your-service-desk/general/submit.pl" method="post
```

您甚至可以使用隐藏字段来控制重定向的重定向和超时。

```
输入类型=“隐藏”名称=“redirecturl”值=“http://www.your-server.com/new-form.html”
```

您可以在 HTML 中使用这样的表单元素：

```
输入 id="firstname" name="firstname" type="text"
```

我希望这有帮助。

# javascript - Javascript：如何将数据附加到文件

> ID：10193532
> 
> 赞同：0
> 
> 时间：2012-04-17T14:49:20.007
> 
> 标签：javascript, activex

如何使用 javascript 将数据附加到文件中？

我尝试使用此代码，但出现错误：

```
var fso = new ActiveXObject("Scripting.FileSystemOject");
var filepath = fso.GetFile("member.txt");
var fileObject = fso.OpenTextFile(filepath, 8);
file.WriteLine(id + "|" + pass);
fileObject.close(); 
```

错误是 on `var fso = new ActiveXObject("Scripting.FileSystemOject");`，写着：`Error: Automation server can't create object`

有没有其他方法可以使用 javascript 附加文件或解决此问题的方法？谢谢 ：）

**编辑：** 我已经做了上面写的[，](http://windows.microsoft.com/en-US/windows/help/genuine/ie-activex?SignedIn=1)但它仍然无法正常工作：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:54:52.827

我刚刚在您的代码中意识到了这些：

```
var fileObject = fso.OpenTextFile(filepath, 8,true); 
```

`true`如果文件不存在，或者您想覆盖/附加它，您将需要-argument。

```
var filepath = fso.GetFile("member.txt");// This won't work.
var filepath = "your_filePath"; // Use this instead
var fileObject = fso.OpenTextFile(filepath, 8, true); 
```

`OpenTextFile()`需要一个像字符串一样的路径`"D:/test/file.txt"`。`GetFile()`返回一个对象，您可以*将*其视为字符串 ( `D:\test\file.txt`)，但它不是字符串。也使用绝对路径，根据我的经验，相对路径似乎不起作用。

**编辑**

将下面的代码添加到`<head>`html 文件的 - 部分，然后在本地保存为 hta（文件扩展名为`hta`，而不是`htm`或`html`）。

```
<hta:application
  applicationName="MyApp"
  id="myapp"
  singleInstance="yes"
/> 
```

然后运行 ​​hta 文件。如果您仍然收到 ActiveX 错误，则您的操作系统不支持它。如果这可行，则您尚未正确完成所有安全设置。

**编辑二**

在这种情况下，通过 ActiveX 获取路径并不是很有用，无论如何您都需要将其写成文字。而且我不应该做你的功课，但这可以解决问题...

```
var filepath = new String(fso.GetFile("member.txt")).replace(/\\/g,'/'); 
```

不要忘记我上面所说的关于使用绝对路径的内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:58:34.033

抛出错误是因为存在不允许 activex 运行的安全限制。如果您使用 Internet Explorer（我认为您是），请更改您的安全设置以允许使用 activex。这可能很有用[http://windows.microsoft.com/en-US/windows/help/genuine/ie-activex](http://windows.microsoft.com/en-US/windows/help/genuine/ie-activex) 干杯

编辑：我已经做了上面写的，但它仍然无法正常工作：/ * 尝试重新启动浏览器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:00:04.080

`8`函数中的指定`OpenTextFile`要追加到文件中。您的问题来自浏览器的安全限制。要使其工作，您必须降低安全级别，这并不是真正推荐的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-02T15:49:18.373

正如此评论中所指出的

[Javascript：如何将数据附加到文件](https://stackoverflow.com/questions/10193532/javascript-how-to-append-data-to-a-file/10193685#comment35969315_10193532)

错误的原因`Error: Automation server can't create object`是传递给的 progid 中的拼写错误`ActiveXObject`：Oject 而不是 Ob **ject**：

var fso = new ActiveXObject("Scripting.FileSystemOject");

有一个失踪`b`！

# iphone - iOS - 如何将选项卡与情节提要中的特定视图控制器链接？

> ID：10193536
> 
> 赞同：0
> 
> 时间：2012-04-17T14:49:37.090
> 
> 标签：iphone, ios, storyboard, uistoryboard, xcode-storyboard

我是 iOS 故事板新手。我在将特定选项卡与特定 ViewController 链接时遇到问题。我有 3 个选项卡，当我点击第二个时，它转到第三个视图控制器，当我点击第三个时，它转到第二个视图控制器。有没有办法可以确保哪个选项卡显示哪个视图控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T00:00:29.683

我认为您对选项卡的索引并将它们映射到视图控制器有问题。选项卡从索引 0 开始。

所以标签号 3 位于索引 2 处。

# java - 比 JODCONVERTER 更快

> ID：10193540
> 
> 赞同：5
> 
> 时间：2012-04-17T14:49:44.163
> 
> 标签：java, html, servlets, documentation, jodconverter

我一直在改进一个文档管理项目，其中一个要求是在网页中呈现文档（word、pdf 等）。可以使用 iframe、对象或嵌入标签和 servlet 呈现 Pdf。但是word、excel等其他文档无法在网页中呈现。我的解决方案是在渲染时将这些文档转换为 pdf 或 html 并像这样渲染它们。我尝试使用 JODCONVERTER 将它们转换，它确实可以转换，但将一个几乎有 700 页的单词（docx）转换为 pdf 25-30 秒，转换为 html 30-35 秒。太多了。在事件过程中，等待太多对用户不利。文件将存储在我们的服务器上，而不是其他地方。还有其他更快的转换或更好的解决方案吗？

感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T16:39:32.233

您可以将 jodconverter + LibreOffice 3.5.* 或 jodconverter + OpenOffice.org 3.4.1（我最近都尝试过，它们比 LibreOffice 3.6+/4.0+ 快得多）结合惰性/并行转换过程来缩短响应时间.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:10:13.857

您无法一次转换 700 页内容。甚至 Google Docs 也会将您上传到上传文档的云转换队列中。因此，您可以实现这种队列，它会一个一个地懒惰地转换您的文档，并且您可以在转换操作挂起时向用户显示适当的消息。当然，此队列必须将转换后的文件保存到文件系统，以便您可以随时显示它。您必须在这里考虑磁盘空间问题。

一个盲目的解决方案是使用正确的 mimetype 在另一个浏览器选项卡中打开文件，假设浏览器是 ie 并且安装了 microsoft office，希望它会在浏览器中本地打开文件。但是，它不是独立于平台的解决方案。

# cakephp - CakePHP / Croogo 登录问题

> ID：10193542
> 
> 赞同：0
> 
> 时间：2012-04-17T14:49:49.423
> 
> 标签：cakephp, cakephp-1.3

我正在尝试通过简单的登录表单在网站主页上实现用户登录。我为用户创建了一个简单的表单，其中用户名和密码字段使用`/users/login`. `users_controller/login`功能很简单：

```
$this->set('title_for_layout', __('Log in', true));

    if (!empty($this->data)) {  

            if (!$this->Auth->login($this->data)) {
                $this->Session->setFlash(__('Login Invalid.', true));
                $this->redirect("/");
            } else {
                $this->redirect($this->Auth->redirect());
            }
        } 
```

这在使用管理员用户登录时有效。但是，如果我尝试使用注册用户登录，则会失败。我尝试更改`Auth->loginAction`为`/users/promoted`并没有看到任何结果，除了无法访问`/admin/`登录，这很好，因为管理员也可以通过主页登录......在这一点上非常难过，非常感谢帮助！

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:37:58.960

原来这是一个与 Croogo 直接相关的问题。在用户->权限下，由于某种原因，注册角色被设置为不允许用户/登录！

# javascript - Raphael element.animate(...) - 指定在动画的每一步执行的回调

> ID：10193543
> 
> 赞同：2
> 
> 时间：2012-04-17T14:49:52.947
> 
> 标签：javascript, animation, raphael

使用 Raphael，我必须移动一些连接了一些线（边）的圆（节点）。当我更改圆的 (cx,cy) 属性时，我必须刷新连接到该圆的线（使用刷新功能）。

没有动画，一切都很好

```
circle.attr({
  cx : newCx,
  cy : newCy
})
refreshEdges() 
```

现在，如果我想使用动画...

```
circle.animate({
  cx : newCx,
  cy : newCy
},1000) 
```

...圆开始移动并在 1000 毫秒内到达最终位置。但是在动画过程中，连接到那个圆圈的线（边）没有移动，因为没有调用刷新函数。

所以问题是：有一种方法可以为 .animate() 指定一种 Raphael 将在动画的每个步骤中调用的“步骤”回调？

我知道使用 jQuery 可以将步骤回调指定为 .animate() 的参数...我希望 Raphael 也有办法做到这一点:)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:15:36.303

我终于想出了这个解决方案……在具有假 css 属性的假 DIV 元素上使用 jQuery.animate() ！

```
$("<div></div>")
.css({      // set initial animation values using "animX", "animY" fake css props
    'animX': circle.attr("cx"),
    'animY': circle.attr("cy")
})
.animate({  // set final animation values using "animX", "animY" fake css props
    'animX': newCx,
    'animY': newCy
}, {
    duration : 1000,
    step : function(now,fx){
        if (fx.prop == 'animX')
            circle.attr("cx", now )
        if (fx.prop == 'animY')
            circle.attr("cy", now )
        circle.refreshEdges()
    }
}) 
```

有关更多信息，特别是关于 step 功能，请阅读[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

再见！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:52:54.050

您是否尝试过在连接到圆圈的线条上使用[animateWith ？](http://dmitrybaranovskiy.github.io/raphael/reference.html#Element.animateWith)您也许可以使用它来解决您的问题。虽然我不确定您的 refreshEdges() 的代码是什么，但可能无法使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T15:58:21.667

我是 HTML5 和 Raphael 的新手，但通过反复试验设法让回调工作：

```
var rect = r.rect(300, 385, 30, 100, 2).attr({
    fill: '#000',
    transform: t,
    "fill-opacity": .2
}).toFront().click(function () {
    s.animate({ transform: t, stroke: c }, 2000, "bounce", function () {
        //console.log('muhammad s.a.w');
    });
}); 
```

# struts - Liferay 与 Struts2 获得 java.lang.IllegalStateException：事件阶段不允许

> ID：10193545
> 
> 赞同：1
> 
> 时间：2012-04-17T14:49:56.627
> 
> 标签：struts, liferay

这是在 JSP 下：

```
<%!
public PortletURL getActionURL(RenderResponse response, String action) {

    PortletURL portleturl = response.createRenderURL();

    try {
        portleturl.setWindowState(LiferayWindowState.EXCLUSIVE);
        portleturl.setParameter("struts_action", "helloForm");
    } catch (Exception e) {
        e.printStackTrace();
    }

    return portleturl;
}
%>

<%

PortletURL helloFormssss = getActionURL(renderResponse, "helloForm");

System.out.println("The URL is helloFormssss " + helloFormssss);

%> 
```

将此 URL 传递给 jQuery AJAX：

```
function my_button_handler() {
    jQuery.ajax({
        type: "POST",
        url: "helloFormssss",
        success: function(msg){
            alert( "Data Saved: " + msg );
        }
    });
} 
```

这是我的`Action`课

```
public class Struts2Action extends DefaultActionSupport {
    String name = null;

    public String getPOPChartData() throws Exception {
        // Enter business logic here

        HttpServletRequest request = ServletActionContext.getRequest();

        HttpServletResponse response = ServletActionContext.getResponse();
        String name = ParamUtil.getString(request, "namer");

        System.out.println("The name is " + name);

        PrintWriter writer = response.getWriter();
        writer.print("Hi");

        return ActionSupport.SUCCESS;
    }
} 
```

这是在`struts.xm`l 文件中：

```
<action name="helloForm" class="com.robisoft.portlet.struts.action.Struts2Action" method="getPOPChartData">
    <result name="input">/WEB-INF/view/index.jsp</result>
    <result name="success">/WEB-INF/view/result.jsp</result>
</action> 
```

网址是 helloFormssss

```
http://localhost:8086/web/guest/home?p_p_id=HelloStruts_WAR_HelloStrutsportlet_INSTANCE_yip2vomViZSU&p_p_lifecycle=0&p_p_state=exclusive&p_p_mode=view&p_p_col_id=column-1&p_p_col_count=1&_HelloStruts_WAR_HelloStrutsportlet_INSTANCE_yip2vomViZSU_struts_action=helloForm 
```

这是我进入服务器控制台的异常

> 14:31:37,973 错误 [Jsr168Dispatcher:38] 无法执行操作。 java.lang.IllegalStateException：在 com.robisoft.portlet.struts.action.Struts2Action.getPOPChartData(Struts2Action.java ) 的 org.apache.struts2.portlet.servlet.PortletServletResponse.getWriter(PortletServletResponse.java:169)
> 的事件阶段不允许:56) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> 
> 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452) 在com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254) 在 com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java: 176) 在 com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 com.opensymphony.xwork2。com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java: org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68) 98）在com.opensymphony.xwork2.DefaultActionInvocation.invoke（DefaultActionInvocation.java:248）在com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept（ConversionErrorInterceptor.java:133）在com.opensymphony.xwork2.DefaultActionInvocation.invoke（DefaultActionInvocation .java:248) 在 com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207) 在 com.opensymphony.xwork2.interceptor.MethodFilterInterceptor。在 com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207) 在 com.opensymphony.xwork2 的拦截（MethodFilterInterceptor.java:98） .interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190) 在com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75) 在 com.opensymphony.xwork2。DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94) at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) at org.apache .struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100 ) 在 com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141) 在 com.opensymphony 的 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)。xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270) at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)在 com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor .java:171) 在 com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 com.opensymphony。xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java :248) 在 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) 在 org.apache.struts2 的 com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)。org.apache.struts2.portlet.interceptor.PortletStateInterceptor.intercept(PortletStateInterceptor.java: 52) 在 org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52) 在 org.apache.struts2.portlet.dispatcher.Jsr168Dispatcher 的 com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248) .serviceAction(Jsr168Dispatcher.java:451) at org.apache.struts2.portlet.dispatcher.Jsr168Dispatcher.processAction(Jsr168Dispatcher.java:298) at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:70) at com。 liferay.portal.kernel.portlet。PortletFilterUtil.doFilter(PortletFilterUtil.java:48) at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:93) at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

# java - 使用 StyledDocument.insertString 将富文本附加到 JTextPane 不会保留字体

> ID：10193550
> 
> 赞同：3
> 
> 时间：2012-04-17T14:50:27.473
> 
> 标签：java, swing, jtextpane

我不知道我正在尝试做的事情是否可行。

我有控制台，我想在其中附加这样声明的格式化文本：

```
private final JTextPane statusText = new JTextPane(); 
```

我得到了对其样式文档的引用，如下所示：

```
private StyledDocument statusDocument = statusText.getStyledDocument(); 
```

我定义了一些属性：

```
private final SimpleAttributeSet gray;
private final SimpleAttributeSet black;
private final SimpleAttributeSet red; 
```

和一个辅助方法：

```
private void appendStatusText(String text, SimpleAttributeSet attribute) {
        final String finalText = text;
        final SimpleAttributeSet finalAttribute = attribute;
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    statusDocument.insertString(statusDocument.getLength(), finalText, finalAttribute);
                } catch (BadLocationException e) {
                    log.error("Cannot add " + finalText, e);
                }
            }
        });
    } 
```

我想将*appendStatusText*与属性之一（灰色、红色、黑色）和一些文本一起使用，但它显示的都是灰色，我期待多色。

你能帮忙吗？

PS：我从[这里的问题中得到了代码](https://stackoverflow.com/questions/4059198/jtextpane-appending-a-new-string)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:28:31.270

的`initDocument()`方法[`TextComponentDemo`](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html#TextComponentDemo)显示了构建此类文档的一种方法。该[示例](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TextComponentDemoProject/src/components/TextComponentDemo.java)出现在教程文章[*如何使用编辑器窗格和文本窗格中的*](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)[*使用文本窗格和编辑器窗格*](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html#eg)的示例中。[](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:09:21.217

您必须定义您的 SimpleAttributeSet，然后添加所需的属性，如下所示：

```
private SimpleAttributeSet red = new SimpleAttributeSet();      
red.addAttribute(StyleConstants.CharacterConstants.Foreground, Color.red); 
```*

# javascript - 具有多个 UL 的 Jquery UI 嵌套 Sortables

> ID：10193557
> 
> 赞同：2
> 
> 时间：2012-04-17T14:50:49.297
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试使用多个 UL实现[jquery UI 嵌套排序。](http://a.shinynew.me/post/4641524290/jquery-ui-nested-sortables)下面是代码，

```
 <html>
    <head>
    <script type="text/javascript" src="js/jquery-1.5.2.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.16.custom.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){   
    $("#example5 ul").sortable({
                    connectWith: "#example5 ul",
                    placeholder: "ui-state-highlight"
    });

    $("span.item-controls").click(function(){
        //alert($(this).parent().next('div').attr('class'))
        var v = $(this).parent().next('div.panel');
        v.slideToggle("slow");
      });

    });
    </script>
    <style>
    ul { 
        min-height:10px; 
        }
    li {
        margin:5px;
        width:auto;
        border:1px solid #000;
        list-style-type:none;
        cursor:move;
    }

    #example5 {
          display: inline-block;
          float: left;
          position: relative;
          width:900px;
    }
    .fright
    {
          float:right;
    }
    .item-controls {
          cursor: pointer;
          font-size: 12px;
          position: relative;
          right: 20px;
          top: 5px;
          background: url("images/arrows.png") no-repeat scroll transparent;
          xborder: 1px solid #000;    
          background-position:3px 0px;
          width:20px;
          height:15px;
    }.ui-sortable{
    margin:0px;padding:0px;
    }
    .ahead
    {
         margin:0px;
    }
    div.panel
    {
        height:auto;
        display:none;
    }
    div.panel
    {
        margin:0px;
        text-align:center;
        background:#e5eecc;
        border:solid 1px #c3c3c3;
    }
    </style>
    </head>

    <body>
    <div id="example5"><!--UL1-->
        <ul style="width:32%;float:left;" class="navigation">
             <li ><p class="ahead"><span class="heading">Item 1 </span><span class="fright item-controls"></span></p>
                     <div class="panel">
                        <p>This is Item 1</p>
                    </div>
                <ul>
                    <li >
                    <p class="ahead"><span class="heading">Item 1 1</span><span class="fright item-controls"></span></p>
                     <div class="panel">
                        <p>This is Item 1 1</p>              
                    </div>              
                    <ul></ul></li>
                    <li >Item 1 2<ul></ul></li>
                    <li >Item 1 3<ul></ul></li>
                 </ul>

             </li>
             <li >
             <p class="ahead"><span class="heading">Item 2 </span><span class="fright item-controls"></span></p>
                    <div class="panel">
                        <p>This is Item 2</p>       
                    </div>       
             <ul><li >Item 2 1<ul></ul></li></ul>
             </li>
             <li >Item 3<ul></ul></li>
             <li >Item 4<ul></ul></li>
        </ul>
    <!--UL2-->
        <ul style="width:32%;float:left;"  class="navigation2">
             <li ><p class="ahead"><span class="heading">Item 1 </span><span class="fright item-controls"></span></p>
                     <div class="panel">
                        <p>This is Item 1</p>
                    </div>
                <ul>
                    <li >
                    <p class="ahead"><span class="heading">Item 1 1</span><span class="fright item-controls"></span></p>
                     <div class="panel">
                        <p>This is Item 1 1</p>              
                    </div>              
                    <ul></ul></li>
                    <li >Item 1 2<ul></ul></li>
                    <li >Item 1 3<ul></ul></li>
                 </ul>

             </li>
             <li >
             <p class="ahead"><span class="heading">Item 2 </span><span class="fright item-controls"></span></p>
                    <div class="panel">
                        <p>This is Item 2</p>       
                    </div>       
             <ul><li >Item 2 1<ul></ul></li></ul>
             </li>
             <li >Item 3<ul></ul></li>
             <li >Item 4<ul></ul></li>
        </ul>
<!--UL3-->
           <ul style="width:32%;float:left;"  class="navigation3">
             <li ><p class="ahead"><span class="heading">Item 1 </span><span class="fright item-controls"></span></p>
                     <div class="panel">
                        <p>This is Item 1</p>
                    </div>
                <ul>
                    <li >
                    <p class="ahead"><span class="heading">Item 1 1</span><span class="fright item-controls"></span></p>
                     <div class="panel">
                        <p>This is Item 1 1</p>              
                    </div>              
                    <ul></ul></li>
                    <li >Item 1 2<ul></ul></li>
                    <li >Item 1 3<ul></ul></li>
                 </ul>

             </li>
             <li >
             <p class="ahead"><span class="heading">Item 2 </span><span class="fright item-controls"></span></p>
                    <div class="panel">
                        <p>This is Item 2</p>       
                    </div>       
             <ul><li >Item 2 1<ul></ul></li></ul>
             </li>
             <li >Item 3<ul></ul></li>
             <li >Item 4<ul></ul></li>
        </ul>
    </div>
    </body>
    </html> 
```

到目前为止一切顺利，得到了预期的结果。现在我的要求是，From`UL-1`不应该与`UL-2 and UL-3`from`UL-2,UL-3`不应该一起排序。希望你理解这个要求。有没有可能做到这一点。请就此提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:21:10.020

尝试使用这种方式

```
$("#example5 ul").sortable({
    connectWith: "#example5 ul.navigation *",
    placeholder: "ui-state-highlight"
}); 
```

因此，您的目标将始终是您的主要 UL，而剩余部分仅用于可排序元素。

笔记：

我向您的 html 部分添加了不同的类名以使用此解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:29:17.967

您必须设置“容器”，例如：

```
$("#example5 ul").sortable({
                connectWith: "#example5 ul",
                placeholder: "ui-state-highlight",
                containment: "#selector"
}); 
```

有关更多信息，[请检查此。](http://jqueryui.com/demos/sortable/#option-containment)

# ektron - 在 Ektron 日历标题中格式化月/年

> ID：10193558
> 
> 赞同：0
> 
> 时间：2012-04-17T14:50:50.807
> 
> 标签：ektron

版本 8.0.1 SP1

我们的客户希望我们重新格式化日历标题中的月/年。见附图。他们想要“April, 2012”而不是缩写的“Apr, 2012”。这是在哪里指定的？我查看了 webcalendar 对象、css 文件、xslt 文件。

有什么建议么？

![日历标题示例](../Images/62599038db667d4cff6c03d024ef416c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:37:54.593

我没有做出特别的改变，但也面临过类似的要求。你的选择是——

*   使用 Javascript (jQuery) 在客户端重新格式化
*   在工作区中四处寻找格式化代码，尽管通常格式化代码被锁定在 DLL 中。
*   DisplayXslt 或 EkMarkup - 一些控件允许您应用 XSLT 或 EkMarkup（Ektron 标记模板）进行自定义显示。您创建一个 XSLT，并通过控件上的 DisplayXslt 属性应用它。
*   丢弃控件，并使用 API 来驱动您自己的自定义控件。

此外，[此 Ektron 论坛帖子](http://dev.ektron.com/forum.aspx?g=posts&t=34659)建议查看此文件`workarea/webcalendar/xsl/default.xsl` - 如果此文件存在（我目前没有方便的 Ektron 安装），那么您很可能可以使用上述 DisplayXslt 方法。

# macos - OS X Lion 上的 tmux“套接字未连接”错误

> ID：10193561
> 
> 赞同：9
> 
> 时间：2012-04-17T14:51:07.860
> 
> 标签：macos, tmux

在 tmux 中启动新会话时出现以下错误：

```
launch_msg("SetUserEnvironment"): Socket is not connected                                                                                                                         
launch_msg("SetUserEnvironment"): Socket is not connected 
```

我的资料：

*   OS X 1.0.7.3
*   zsh 4.3.11
*   多路复用器 1.6

Tmux 仍在启动，我没有遇到任何大问题，但我希望能深入了解为什么会发生这种情况。我听说安装[tmux-MacOSX-pasteboard](https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard) “修复”了这条消息，但如果我不需要它的功能，我宁愿不安装包装器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T05:25:48.877

# jquery - 这两个ajax脚本有什么区别？

> ID：10193562
> 
> 赞同：0
> 
> 时间：2012-04-17T14:51:11.807
> 
> 标签：jquery, ajax, json, jsonp

我在 JSON 跨域策略问题上遇到了困难。经过一些实验后，我能够让这段代码工作，但我遇到了这样一种情况，我有两段代码，它们看起来应该完全相同，但只有一个有效。

我正在访问的 JSON 在这里

> [http://www.aph.com/files/partners/aphnonstopproducts/json/aphnonstopproductsjson.json](http://www.aph.com/files/partners/aphnonstopproducts/json/aphnonstopproductsjson.json)

这个文件看起来是简单的 JSONP：它不带任何参数，并且 JSON 填充了一个名为 jsonCallBack 的函数调用。它似乎是有效的 JSON。

这是我尝试用来获取此 JSON 数据的第一组代码：

```
$.getJSON("http://www.aph.com/files/partners/aphnonstopproducts/json/aphnonstopproductsjson.json?callback=jsonCallback", function (data) {
                //This will not alert
                alert(data.APHNonStopProducts.Carpark[0].Airport.airportcode);            
            }); 
```

我的理解是，您可以将 替换为`callback=?`函数包装器的名称，以便将该数据传递给匿名函数。此代码在 Chrome 开发工具中显示以下错误：

> XMLHttpRequest 无法加载 [http://www.aph.com/files/partners/aphnonstopproducts/json/aphnonstopproductsjson.json?callback=jsonCallback](http://www.aph.com/files/partners/aphnonstopproducts/json/aphnonstopproductsjson.json?callback=jsonCallback)。Access-Control-Allow-Origin 不允许来源[http://fiddle.jshell.net 。](http://fiddle.jshell.net)

值得注意的是，如果保留 URL`aphnonstopproductsjson.json?callback=?`并在我的代码中存在一个命名函数，那么数据将被正确检索并调用命名函数（尽管匿名函数仍然不是）

这是第二个代码，它有效：

```
$.ajax({
url: "http://www.aph.com/files/partners/aphnonstopproducts/json/aphnonstopproductsjson.json?callback=?",
       dataType: 'json',
       jsonp : "callback",
       jsonpCallback: "jsonCallback",
       success: function(data) {
           //This alert will fire
           alert(data.APHNonStopProducts.Carpark[0].Airport.airportcode);
       }
   });
});​ 
```

在此调用中，我指定参数名称应为回调，函数名称应为 jsonCallback。所以本质上，这和第一个代码不一样吗？如果是这样，为什么第一个代码会失败？

在此处查看两段代码：http: [//jsfiddle.net/3EXca/](http://jsfiddle.net/3EXca/)（您应该收到一条显示“ABZ”的警报）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:00:22.247

问题是服务器不正确支持 JSONP。没有回调参数，就不应该有回调。相反，它已经有一个 jsonCallback。可能有一种方法可以覆盖它，但我无法猜测参数。

为了`$.getJSON`使用 JSONP，服务器必须支持带有一些回调参数名称的 JSONP。

第二个有效，因为您强制 jQuery 使用函数 name `jsonCallback`。这：

```
jsonp: 'callback' 
```

没关系，因为`jsonCallback`无论如何它总是包裹着。

# objective-c - 如何在应用程序中启动应用程序

> ID：10193563
> 
> 赞同：1
> 
> 时间：2012-04-17T14:51:15.723
> 
> 标签：objective-c, c, ipad

我可能会被指责复制[了这个](https://stackoverflow.com/questions/419119/launch-an-app-from-within-another-iphone)或[这个](https://stackoverflow.com/questions/7907901/can-an-iphone-app-hide-launch-other-apps)甚至其中的任何一个，[但](https://www.google.com.tr/search?aq=f&sourceid=chrome&ie=UTF-8&q=launch+app+from+app+ios)实际上没有人回答我的问题。我需要通过单击 UI 上的按钮来启动应用程序，但是我要启动的应用程序没有自定义[URL 方案](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html)，我的噩梦就从这里开始了。我试图调用应用程序（使用 NSBundle-path）等，但我看不到调用该应用程序的方法。在此先感谢您提供任何答案，甚至是想法。

**问题2）** iOS系统上是否有类似注册表的系统？例如，我们可以将原始 apk 的路径添加到注册表中并强制启动吗？我有C背景，如果可以的话我可以自己试试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:54:17.933

有 3 种方法可以在 iOS 上从您的应用打开应用：

*   URL 方案
*   使用 UIDocumentInteractionController 允许用户在另一个应用程序中打开文件
*   使用私有 API

简单的。不，iOS 上没有类似系统的注册表。

# java - java.security.NoSuchAlgorithmException：找不到任何支持 AES/ECB/PKCS7PADDING 的提供程序

> ID：10193567
> 
> 赞同：31
> 
> 时间：2012-04-17T14:51:21.903
> 
> 标签：java, security, encryption, aes, jce

我试图使用 AES 算法加密数据。但是，发生了以下异常。

```
java.security.NoSuchAlgorithmException:
    Cannot find any provider supporting AES/ECB/PKCS7PADDING 
```

有人知道这个问题的解决方案吗？我的JDK版本是1.7。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-17T15:21:23.943

您不想为分组密码使用指定 PKCS#7 填充。您要指定 PKCS#5 填充。PKCS#5 被指定用于分组密码，而 PKCS#7 不是（它用于不同的地方，如在 S/MIME 中）。我会指出 PKCS#5 和 PKCS#7 实际上指定了完全相同的填充类型（它们是相同的！），但在这种情况下使用时它被称为 #5。:)

所以，而不是`"AES/ECB/PKCS7PADDING"`，你想要`"AES/ECB/PKCS5PADDING"`。这是一个密码实现，Java 平台的每个实现都需要支持。有关更多详细信息，请参阅[该类的](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html)[文档。`Cipher`](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-24T22:39:08.220

有关包含 PKCS#5 和 PKCS#7 加密标准文本的问题的非常全面的解释，请查看[此处](https://crypto.stackexchange.com/q/9043/1172)。

* * *

PKCS#5 填充表示填充 1 到 8 个字节。填充字节本身包含编码为字节的填充字节的数量。为 DES 指定了 PKCS#5 填充，但它适用于任何块大小为 8 字节的块密码。

现在，基于密码的加密的 DES 规范甚至 PKCS#5 规范比 Java 早了很长时间。AES 仅在 2002 年标准化，在 Java 甚至 Java 2 被引入很久之后。因此，在 AES 出现之前，（三重）DES 和 PKCS#5 填充已集成到 Java 中。

当 Java（或者更准确地说，Sun JCE 提供程序）获得 AES 功能时，它需要一种用于 16 字节块大小的填充方法。PKCS#7 指定了[与 PKCS#5 padding 相同的](https://crypto.stackexchange.com/q/9043/1172)填充方法，除了它是为 2 到 255 字节的块大小定义的（如果它编码基于零的无符号整数，则为字节的最大值）。但是，填充方法已经存在；它被命名为`"PKCS5Padding"`。因此，与其引入新名称，`"PKCS5Padding"`不如简单地重新使用。

到目前为止，Sun 提供商应该真正支持`"PKCS7Padding"`PKCS#5 填充是不正确的。这不仅仅是 Java 命名问题，对于任何尝试实现加密协议或将其他应用程序移植到 Java 的开发人员来说都是一个问题。但是，现在，您应该使用`"PKCS5Padding"`而不是`"PKCS7Padding"`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-15T09:43:41.003

如果你想使用 AES/ECB/PKCS7Padding 那么充气城堡将支持 ht [tp://www.bouncycastle.org/specifications.html](http://www.bouncycastle.org/specifications.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T10:29:03.563

**如果环境是Android**并且您尝试从文件中读取 PKCS8 格式的**加密私钥或密码保护私钥**，请考虑以下解决方案。

我收到的异常如下：

```
W/System.err: org.bouncycastle.pkcs.PKCSException: unable to read encrypted data: 1.2.840.113549.1.5.13 not available: No provider found for 2.16.840.1.101.3.4.1.42
W/System.err:     at org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo.decryptPrivateKeyInfo(Unknown Source:60)
W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:106)
W/System.err:     at android.os.Looper.loop(Looper.java:223)
W/System.err:     at android.os.HandlerThread.run(HandlerThread.java:67)
W/System.err: Caused by: org.bouncycastle.operator.OperatorCreationException: 1.2.840.113549.1.5.13 not available: No provider found for 2.16.840.1.101.3.4.1.42
W/System.err:     at org.bouncycastle.openssl.jcajce.JceOpenSSLPKCS8DecryptorProviderBuilder$1.get(Unknown Source:322)
W/System.err:     at org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo.decryptPrivateKeyInfo(Unknown Source:6)
W/System.err:   ... 8 more
W/System.err: Caused by: java.security.NoSuchAlgorithmException: No provider found for 2.16.840.1.101.3.4.1.42
W/System.err:     at javax.crypto.Cipher.createCipher(Cipher.java:736)
W/System.err:     at javax.crypto.Cipher.getInstance(Cipher.java:619)
W/System.err:     at org.bouncycastle.jcajce.util.DefaultJcaJceHelper.createCipher(Unknown Source:0)
W/System.err:     at org.bouncycastle.openssl.jcajce.JceOpenSSLPKCS8DecryptorProviderBuilder$1.get(Unknown Source:101)
W/System.err:   ... 9 more 
```

唯一有效的解决方案是将 Provider 设置为 Bouncy Castle，如下所示：

```
InputDecryptorProvider decryptorProvider = new JceOpenSSLPKCS8DecryptorProviderBuilder()
    .setProvider(new BouncyCastleProvider())
    .build(mContext.getResources().getString(R.string.password).toCharArray()); 
```

完整的块代码如下所示：

```
privateKeyString = privateKeyString.replace("-----BEGIN ENCRYPTED PRIVATE KEY-----", "").replaceAll(System.lineSeparator(), "")
                .replace("-----END ENCRYPTED PRIVATE KEY-----", "");
byte[] keyStringBytes = DatatypeConverter.parseBase64Binary(privateKeyString);
ASN1Sequence asn1Sequence = ASN1Sequence.getInstance(keyStringBytes);
PKCS8EncryptedPrivateKeyInfo pkcs8EncryptedPrivateKeyInfo = new PKCS8EncryptedPrivateKeyInfo(
    EncryptedPrivateKeyInfo.getInstance(asn1Sequence));
JcaPEMKeyConverter converter = new JcaPEMKeyConverter();
InputDecryptorProvider decryptorProvider = new JceOpenSSLPKCS8DecryptorProviderBuilder()
    .setProvider(new BouncyCastleProvider())
    .build(mContext.getResources().getString(R.string.password).toCharArray());
PrivateKeyInfo privateKeyInfo = pkcs8EncryptedPrivateKeyInfo.decryptPrivateKeyInfo(decryptorProvider);
mPrivateKey = converter.getPrivateKey(privateKeyInfo); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-20T02:49:54.807

解决方案： Step1：将 bcprov-ext-jdk16-1.46.jar ( [https://mvnrepository.com/artifact/org.bouncycastle/bcprov-ext-jdk16/1.46](https://mvnrepository.com/artifact/org.bouncycastle/bcprov-ext-jdk16/1.46) ) 添加到您的项目中

第二步：添加行“Security.addProvider(new BouncyCastleProvider());” 开始初始化密码通用

然后，运行项目，OK，解密成功。

# c# - 如何从不同的服务器调用 Web 服务功能？

> ID：10193572
> 
> 赞同：0
> 
> 时间：2012-04-17T14:51:27.607
> 
> 标签：c#, web-services

我有一个带有导入功能的 Web 服务，我想从另一台服务器上的 ac# 应用程序调用

我怎么称呼它

我可以去这个 url 来调用它：

[http://site.co.uk/bespoke/WebService.asmx/Import](http://site.co.uk/bespoke/WebService.asmx/Import)

我想在开始时从我的服务中调用它：

```
protected override void OnStart(string[] args)
    {
       //What do i do in here?
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:57:55.453

您应该使用[添加服务参考](http://msdn.microsoft.com/en-us/library/bb386382.aspx)功能。

您的 Web 服务似乎是一个 SOAP 服务。因此，如果您想“手动”调用它（没有任何 SOAP 客户端库），则必须手动实现协议级别的东西（例如基于 XML 的 SOAP 信封）。这是非常不鼓励的。

如果您使用我上面提到的功能，那么 Visual Studio 将为您生成类和对象，因此您将能够通过本地存根类上的方法调用 Web 服务的方法。

# php - codeigniter/php 中的 html 电子邮件

> ID：10193576
> 
> 赞同：0
> 
> 时间：2012-04-17T14:51:39.457
> 
> 标签：php, email, codeigniter, smtp, html-email

这必须很简单，我正在尝试使用 CodeIgniter 将视图文件加载为我的电子邮件消息。关键是要有一个 HTML 而不仅仅是基于文本的消息。

目前，我的电子邮件发送正常，但如果我的代码如下所示，则消息为空：

这是php的相关部分：

```
 $config=array(
    'protocol' => 'smtp',
    'smtp_host' => 'xxx',
    'smtp_user' => 'xxx',
    'smtp_pass' => 'xxx',
    'smtp_port' => 587,
    'mailtype' => 'html',
    'crlf' => "\r\n",
    'newline' => "\r\n"
  );
 $this->email->initialize($config);
 $this->email->subject('testing loading a view file');
 $msg = $this->load->view('reviews/email', '', false);
 $this->email->message($msg); 
```

下面是 reviews/email.php 文件的样子：

```
<html>
<head></head>
    <body> <h1>this should be BIG</h1> this should not
          <a href="http://google.com/<? $php='login'; echo $php?>">Google</a>
    </body>
</html> 
```

感谢您提供的任何建议，

蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:55:25.283

您正在错误地加载视图。第三个参数应该是`TRUE`这样 CodeIgniter 将视图作为字符串返回。

```
$msg = $this->load->view('reviews/email', '', true); 
```

来自[http://codeigniter.com/user_guide/general/views.html](http://codeigniter.com/user_guide/general/views.html)：

> 还有第三个可选参数可让您更改函数的行为，以便它以字符串形式返回数据，而不是将其发送到浏览器。如果您想以某种方式处理数据，这可能很有用。如果将参数设置为 true（布尔值），它将返回数据。默认行为是 false，将其发送到您的浏览器。如果要返回数据，请记住将其分配给变量：

```
$string = $this->load->view('myfile', '', true); 
```

# eclipse - 找不到eclipse路径变量中的批处理文件

> ID：10193590
> 
> 赞同：2
> 
> 时间：2012-04-17T14:52:27.327
> 
> 标签：eclipse, batch-file, run-configuration

我想在我的 Eclipse 中启动一个批处理脚本。（此处的说明：[如何从 eclipse 运行批处理脚本（.bat 文件）](https://stackoverflow.com/questions/1090355/how-to-run-a-batch-script-bat-file-from-eclipse)）

在我的批处理文件中，我需要一些命令，例如`pear`or `phing`。

我将这些命令的路径放入名为 PATH 的环境变量中。（手动使用 cmd 可以正常工作）

启动脚本后，我收到此错误：

```
'pear' is not recognized as an internal or external command,
operable program or batch file. 
```

如果我`pear`手动输入，它也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:29:34.813

更改系统环境后需要重启Eclipse；环境变量更改需要重新启动任何已在运行的进程，以便该应用程序获取更改。

另一种选择可能是将这些命令的完整路径放在`.bat`文件中，以便它不依赖系统环境才能正常工作。

**提示：**确保关闭并重新启动 Eclipse 以使 PATH 变量更改生效。在这里使用菜单中的`Restart`选项`File`可能无济于事。

# ftp - FTP服务器连接模拟

> ID：10193591
> 
> 赞同：0
> 
> 时间：2012-04-17T14:52:28.390
> 
> 标签：ftp, connection, simulation

如何编写脚本或以其他方式模拟大约 100 个用户连接到我自己的 ftp 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:22:54.470

您可以编写一个简单的 Java 代码。

首先，您必须决定这些请求如何到达您的服务器。即，完全随机，每分钟一个，遵循正态分布或更可能是指数分布。

然后，您必须使用具有以下内容的线程：

1.  建立 ftp 连接的方法（例如**ftpCall()**）
2.  获取下一个 FTP 调用的**x毫秒的方法（例如****getTimeToNext()**）

在 FTP 调用之后，该方法必须保持睡眠**x**毫秒才能进行下一次调用。这是Java中的代码大纲

```
public class FTPTest{
  class MyFTPThread{
      private int numberOfCall=100;

      private void ftpCall() {
        //DO CONNECTION
      }

      private long void getTimeToNext() {
        //RETURN A RANDOM TIME OR A FIXED VALUE
      }

      public void run(){
        int counter = 0;
        while(++counter <= numberOfCall){
          ftpCall();
          this.sleep(getTimeToNext());
        }
      }
  }

  public static void main(String [] args){
    MyFTPThread t = new MyFTPThread();
    t.start();
  }
} 
```

# c++ - STL 向量和使用 [] 运算符

> ID：10193605
> 
> 赞同：4
> 
> 时间：2012-04-17T14:53:29.997
> 
> 标签：c++, stl, vector

我正在尝试编译以下行，但我遇到了指针混淆：

```
int test = _s->GetFruitManager()->GetFruits()[2].GetColour();
std::cout << test << std::endl; 
```

其中 _s 是指向 S 的指针，GetFruitManager() 返回指向 FruitManager 对象的指针，GetFruits() 返回 a `std::vector<Fruit>*`，然后我希望能够使用运算符 [] 访问特定的 Fruit 对象并调用 Fruit 的 GetColour( ） 方法。

我认为在某些时候我需要取消引用 GetFruits() 返回的向量*，但我不知道如何。

抱歉，如果这有点令人费解！我对这门语言还是很陌生，但希望能得到一些帮助来解决这个问题。我确实尝试将其分解为更易于理解的步骤，但无论哪种方式都无法使其编译。

实际上我只是决定不使用这个代码片段，但这已经成为一个好奇的问题，所以我仍然会提交这个问题:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T14:55:04.617

你需要这样做：

```
(*(_s->GetFruitManager()->GetFruits()))[2].GetColour(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T14:57:37.837

作为使用`[]`语法的替代方法，您可以调用`.at()`：

```
int test = _s->GetFruitManager()->GetFruits()->at(2).GetColour(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T14:59:01.083

丑陋的版本：

```
int test = _s->GetFruitManager()->GetFruits()->operator[](2).GetColour(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T15:08:21.783

```
FruitManager*        temp_ptr  = _s->GetFruitManager();
std::vector<Fruit>*  ptr_vec   = temp_ptr->GetFruits();
Fruit*               f_obj_ptr = (*ptr_vec)[2];

int test = f_obj_ptr->GetColour(); 
```

即使已经发布了正确的答案，我更喜欢这样的版本，因为它更具可读性。当您 2 天后回来时，您可以更轻松/更快地找到错误/进行修复。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T14:55:01.493

是的，您需要取消引用返回的指针`GetFruits()`：

```
int test = (*_s->GetFruitManager()->GetFruits())[2].GetColour(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T15:18:57.897

由于没有人提到它，还有这个替代方案（我个人喜欢只在 gdb 中使用）：

int test = _s->GetFruitManager()->GetFruits()[0][2].GetColour();

# wireshark - 使用wireshark捕获路由器数据包

> ID：10193607
> 
> 赞同：0
> 
> 时间：2012-04-17T14:53:30.690
> 
> 标签：wireshark

我有两个设备在同一个路由器上无线连接。一个是我的电脑，另一个是智能手机。是否有可能，如果我在 pc 上安装了wireshark 来捕获智能手机正在发送和接收到某个我知道其 IP 的服务器的数据/数据包？我的电脑有 Windows 2007 并且智能手机是 android 设备如果它有任何区别我尝试在 android 设备上安装 root 的 shart 但它无法正常工作，因为我的 android 没有 root，我不会丢失我手机中的所有内容以将其植根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:09:15.533

您可以尝试使用该隐和亚伯。它将捕获从您的智能手机到路由器的数据包。稍微解释一下，C&A 会进行 ARP 中毒——这意味着您的无线网络上的所有设备都会假设您的桌面是新路由器，并且所有传入/传出流量都将通过您的桌面。通过这种方式，您可以在不生根的情况下捕获手机上的流量。我希望这有帮助。

# java - 在数独板上着色框的算法

> ID：10193611
> 
> 赞同：2
> 
> 时间：2012-04-17T14:53:42.397
> 
> 标签：java, algorithm, multidimensional-array, sudoku

我目前正在`Java`使用 Swing/Awt 编写图形数独求解程序。所以我决定我想像这些盒子（用 3x3 和 2x3 盒子）一样遮蔽板上的盒子（用粗线标记）：（[来源：][[zitowolf.net](http://zitowolf.net/sudoku/images/bd6x6.png)][）]
[![](../Images/2228131e24b472096aa44f8ad70215e8.png)](https://i.stack.imgur.com/Rxf9Z.png)

[![](../Images/cfd60074443fdef8830ffb9c71908f01.png)](https://i.stack.imgur.com/lf1E1.png)
[（来源：[zitowolf.net](http://zitowolf.net/sudoku/images/bd8x8.png)）]

一个 6x6 板和一个 8x8 板

程序中的板基本上表示为一个`int[dimension][dimension]`数组，程序接受尺寸为 4x4 -> 16x16 的板。

**问题是要确保在一行或一列中没有相邻的框具有相同的阴影。GUI 着色过程本身不是问题，而是找出一个正方形是否应该作为阴影框的一部分进行着色。**

我已经尝试了几个小时来实现一个简单的算法来解决这个问题，通过双 for 循环遍历数组，但我还没有得到任何合理的模式，而且我没有想法。到目前为止，我的算法是基于这样的假设，即每个其他框都应该从左上角到右下角着色。这不适用于 6x6 变体，因为您有以下顺序：彩色框->白框->白框。

这里有人可以提出算法或其他方法吗？如果需要，我会提供更多信息。非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:04:24.597

```
bool should_shade(x,y,size_x,size_y) 
//sizes are size of small box and position x,y count from 0
{
     return ( (x/size_x + y/size_y ) % 2) == 0; //division is integer division

} 
```

# css - Internet Explorer 9 中图像映射周围的蓝色边框

> ID：10193613
> 
> 赞同：8
> 
> 时间：2012-04-17T14:53:50.540
> 
> 标签：css, internet-explorer, border

我遇到了以下问题 - 我在网站上使用图像地图。在 Internet Explorer 9（IE8 很好）中，当我单击链接（区域标记）时，它周围会出现一个蓝色边框。如何摆脱它？我试过了：

```
map, map area {
border:none !important;
}
img, a img, a:link img, a:visited img {
border:none !important;
} 
```

但这没有帮助。有没有人有这个问题？请查看网站 - [http://www.naturalnie.test.dih.pl/](http://www.naturalnie.test.dih.pl/)。图像地图位于徽标下方，其中链接显示：“Home, Kosmetyki, Lekarstwa, Żywność i supplementy, O Naturalnie.net”。

编辑：

我找到了解决方案。以下代码有效：

```
a, img {outline:none;}
map > area,
map > area:active,
map > area:focus {outline: none; border:0; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T15:05:14.540

为什么不只是

```
a,img { border: none; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-30T16:13:12.810

这对我有用

```
:focus{
  border: none;
  outline-style: none; 
  -moz-outline-style:none;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:00:46.050

我不太确定，但尝试在 html 中设置`<img border="0" />`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T15:11:11.040

由于您说单击链接后会出现边框，因此对我来说这听起来像是“焦点”边框。

尝试`a:focus {border:0 none;}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T07:57:51.480

此解决方案将导致与兼作链接和同时具有边框的内容的图像发生冲突。但是，如果您的图像链接没有现有的边框，它应该可以在 IE 中消除您的轮廓，而不会影响其他任何内容：

```
a img {border: none; } 
```

只需将其添加到您的主 css 样式表...它完美地解决了我的问题。

# php - PHP 与 Javascript 高效 XML 解析器

> ID：10193620
> 
> 赞同：0
> 
> 时间：2012-04-17T14:54:33.003
> 
> 标签：php, javascript, performance

我很好奇，我正在为 wordpress 创建一个 flickr 插件。我注意到我编写的 PHP 比我编写的相同 javascript 慢得多。

我知道 Javascript 是在客户端运行的，因此只要没有大量进程占用处理器，它就会更快。随着 PHP 远程运行，我知道这一切都基于连接以及服务器的运行情况。我想知道一个是否比另一个更好用，如果 DOM 可能不是获取 XML 的最佳方式。在这种情况下，在 PHP 中，我使用 DOM 来获取 XML，然后将其解析出来。使用 Javascript，我使用 SOAP 来解析相同的 XML。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:16:29.037

假设

*   此插件需要 JavaScript。
*   JavaScript 测试只在您的开发机器上完成。

我认为你需要重新考虑你的指标。在您的特定情况下，JavaScript 比 PHP 更快，但我不认为这是全面的情况。我假设你和你的插件的大多数最终用户一样使用共享主机，所以你的 PHP 不会在最快的服务器上。就像罗里上面说的。最好诊断一下您的 PHP 运行缓慢的原因。使用 JavaScript，您必须考虑到平均用户的设备速度，其范围可能从糟糕到惊人。我的猜测是您的 PC 接近高端。

如果没有提供任何代码，很难给出明确的答案。我建议在尽可能多的设备和浏览器上尝试您的 JavaScript 版本的插件。击中iPad和手机之类的东西。

由于 JavaScript 在低端设备上存在潜在的性能缺陷，**我可能会在服务器上执行该任务，** *除非*调查表明，在您的情况下，JavaScript 是全面的高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:19:55.443

您还可以使用 PHP 中的 V8JS 类在服务器端运行 javascript，因为版本 5.3.3+ [http://ar.php.net/manual/en/book.v8js.php](http://ar.php.net/manual/en/book.v8js.php)

# asp-classic - ASP 网站是否有类似 Global.asax 文件？

> ID：10193624
> 
> 赞同：1
> 
> 时间：2012-04-17T14:54:59.303
> 
> 标签：asp-classic, exception-handling, global-asax

我有一个基于 ASP 的大型网站。是否有可能在一个地方处理所有异常？像 ASP.NET 应用程序中的 Global.asax 一样？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:34:12.440

当然，对于您实际提出的问题，您已经有了答案。但是，您对问题内容的要求是“我如何集中处理错误”。

因此，您的问题的解决方案（尽管不是实际提出的问题的答案）是：

在处理状态代码 500.100 的应用程序根文件夹级别使用自定义错误页面。

您可以使用 来确定错误`Server.GetLastError()`，它会返回一个[IASPError](http://www.w3schools.com/asp/asp_ref_error.asp)，您可以从中收集错误详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:00:27.397

是的，有 global.asa 文件，不，它没有像 asp.net 那样的全局 OnException 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T14:57:11.347

我相信您可以在根目录中使用 global.asa 文件来处理站点范围的实例。

有关详细信息，请参阅[“Global.asa 文件”](http://www.w3schools.com/asp/asp_globalasa.asp)。

# sql-server-2008 - 如何从 EDI 交易中找出被拒绝的帐户

> ID：10193627
> 
> 赞同：0
> 
> 时间：2012-04-17T14:55:08.657
> 
> 标签：sql-server-2008, transactions, edi

我对 EDI 交易完全陌生。我试图弄清楚当我们向 ISO 发送新客户的注册请求时，如何确定请求是否被 EDI 交易接受或拒绝。

EDI_TRANSACTION 表中条目中的 EDI 事务。基本上它包含完整的响应，但它没有明确说明请求是被拒绝还是被接受。

根据 EDI 标准，使用缩写代码代替语言。此处为示例 在此处[输入链接描述](http://webcache.googleusercontent.com/search?q=cache:8ph9U2_mZNYJ%3awww.nationalgridus.com/shared_content/ebt/non_html/ma_error_codes.xls%20edi%20codes%20ma&cd=6&hl=en&ct=clnk&gl=us)

对我来说，并非所有注册交易都带有上述代码。事实上，它们中的大多数是空白的，其中一些是 A13、A77 等。

此时我正在数据库级别工作。我需要在报告中提取拒绝（SQL 查询）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:38:01.690

在此处下载 EDI 记事本： [https ://liaison.com/products/integrate/edi/edi-notepad](https://liaison.com/products/integrate/edi/edi-notepad)

使用 EDI 记事本打开原始 EDI，它将显示代码的含义。另外 - 联系您的贸易伙伴，看看您是否无法从他们那里获得一份规范，概述他们在实施指南中使用的代码。使用该工具查看原始 EDI 将对您有所帮助。

# apache - htaccess 将用户重定向到移动站点但仍允许来自移动站点的请求

> ID：10193630
> 
> 赞同：0
> 
> 时间：2012-04-17T14:55:16.640
> 
> 标签：apache, .htaccess, mobile, redirect

我在我的 htaccess 中使用以下代码段：

```
# redirect phones/tablets to mobile site
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{HTTP_HOST} !mobile\.website\.com [NC]
RewriteRule ^(.*)$ http://www.mobile.website.com/$1 [L,R=302] 
```

但是，在我的移动应用程序中，我向 发出 AJAX 请求`www.website.com/mobile`，但它们都失败了。如何发送这些 AJAX 请求并仍然重定向它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:00:55.250

您可以使用：

```
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteCond %{HTTP_HOST} !mobile\.website\.com [NC]
RewriteCond %{REQUEST_URI} !^/mobile [NC]
RewriteRule ^(.*)$ http://www.mobile.website.com/$1 [L,R=302] 
```

它将解锁 /mobile 并且您的 ajax 请求将起作用。

# c# - 用于 XML 属性可能值的正则表达式

> ID：10193634
> 
> 赞同：2
> 
> 时间：2012-04-17T14:55:34.820
> 
> 标签：c#, regex

我有一个 XML 属性，它有两个可能的值：`discardOld`和`discardNew`（不区分大小写）。

我正在尝试提出一个正则表达式来验证该特定属性的输入：

我试过这个：`(?i)(discardnew|discardold)`但它似乎不起作用。

任何帮助将不胜感激！谢谢！

**更新**

这是我用来执行 RegEx 检查的代码：

```
[ConfigurationProperty("mode", IsRequired = true)]
[RegexStringValidator("(?i)(discardnew|discardold)")]
public string Mode
{
    get { return (string)base["mode"]; }
    set { base["mode"] = value; }
} 
```

这是在 XML 中声明属性的方式：

```
<eventQueue mode="discardNew" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:15:44.390

我试过这个，它似乎工作正常（所有以下 IsMatch 都返回 true）：

```
Regex R = new Regex("(?i)(discardnew|discardold)");
bool i1 = R.IsMatch("DiscardOld");
bool i2 = R.IsMatch("discardOld");
bool i3 = R.IsMatch("discardOLD");
bool i4 = R.IsMatch("discardneW");
bool i5 = R.IsMatch("Discardnew");
bool i6 = R.IsMatch("dISCARDnew"); 
```

问题可能出在其他地方。

**更新：** 这对我有用：

```
[ConfigurationProperty("mode", IsRequired = true, DefaultValue = "discardnew")]
[RegexStringValidator("^(?i)(discardnew|discardold)$")]
public string Mode
{
    get { return (string)base["mode"]; }
    set { base["mode"] = value; }
} 
```

我刚刚将 DefaultValue = "discardnew" 添加到 ConfigurationProperty。ASP.NET 总是根据 RegEx 检查 DefaultValue，即使您没有设置它。然后它认为它是空字符串，它不会针对您的正则表达式进行验证，因此它会抛出异常）。还要考虑将 ^ 和 $ 添加到常规模式，否则它不仅会验证discardnew，还会验证discardnew1、1discardnew 等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:17:45.700

(?i) 应该适合您，但您也可以尝试将[RegexOptions.IgnoreCase](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)枚举值传递给 Match() 方法，例如。

# ruby-on-rails - 基本 .ajax 发布到 rails 3.2.2 脚手架，生成“警告：无法验证 CSRF 令牌真实性”

> ID：10193636
> 
> 赞同：1
> 
> 时间：2012-04-17T14:55:38.627
> 
> 标签：ruby-on-rails, jquery

我正在尝试学习如何通过 jquery 使用 $.ajax 将一些数据发布到一个简单的 rails 脚手架项目。有一个标准的脚手架创建控制器 => 图像

```
class ImagesController < ApplicationController
  # GET /images
  # GET /images.json
  def index
    @images = Image.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @images }
    end
  end

  # GET /images/1
  # GET /images/1.json 
  def show
    @image = Image.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/new
  # GET /images/new.json
  def new
    @image = Image.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/1/edit
  def edit
    @image = Image.find(params[:id])
  end

  # POST /images
  # POST /images.json
  def create
    @image = Image.new(params[:image])

    respond_to do |format|
      if @image.save
        format.html { redirect_to @image, notice: 'Image was successfully created.' }
        format.json { render json: @image, status: :created, location: @image }
      else
        format.html { render action: "new" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /images/1
  # PUT /images/1.json
  def update
    @image = Image.find(params[:id])

    respond_to do |format|
      if @image.update_attributes(params[:image])
        format.html { redirect_to @image, notice: 'Image was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /images/1
  # DELETE /images/1.json
  def destroy
    @image = Image.find(params[:id])
    @image.destroy

    respond_to do |format|
      format.html { redirect_to images_url }
      format.json { head :no_content }
    end
  end
end 
```

一条路线=>资源：图像。数据库模式由一个字段 => t.string :name 组成。我最初的测试 html 文件是：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js">    </script>
</head>
<body>
    <script>
    $(document).ready(function(){
        $.ajax({
            type: 'POST', url: "localhost:3000/images",
            data: { name: "johngalt" }
        });
    });
    </script>
</body> 
```

来自 webrick 的结果是：

```
Started POST "/images" for 127.0.0.1 at 2012-04-17 09:50:19 -0500
Processing by ImagesController#create as */*
  Parameters: {"name"=>"johngalt"}
WARNING: Can't verify CSRF token authenticity
   (0.1ms)  begin transaction
   SQL (63.5ms)  INSERT INTO "images" ("created_at", "name", "updated_at") VALUES (?, ?,  ?)  [["created_at", Tue, 17 Apr 2012 14:50:21 UTC +00:00], ["name", nil], ["updated_at",  Tue, 17 Apr 2012 14:50:21 UTC +00:00]]
   (2.0ms)  commit transaction
 Redirected to http://localhost:3000/images/7
 Completed 302 Found in 81ms (ActiveRecord: 65.6ms) 
```

我不确定为什么名称不包含“johngalt”。这是否与“警告：无法验证 CSRF 令牌真实性”有关？

***编辑*** 当我使用 curl 时：

```
curl -d "image[name]=johngalt"  localhost:3000/images.json 
```

记录已创建，名称字段包含“johngalt”。从本质上讲，我试图找出 .ajax 相当于做我在 curl 中能够做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:02:45.290

当您使用 Rails`form_for`助手创建表单时，CSRF 令牌会自动添加到您的帖子表单中，旨在保护用户免受[跨站点请求伪造攻击](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。因此，如果您尝试在 javascript 文件中发布，您将无法访问令牌。

如果您愿意，您可以禁用特定操作的 CSRF 令牌身份验证，只要您了解后果即可。

有几种方法可以做到这一点，这里列出：[在 Rails 3 中关闭 CSRF 令牌](https://stackoverflow.com/questions/5669322/turn-off-csrf-token-in-rails-3)

**编辑**查看您的 CURL 示例，您似乎在 ajax 发布错误的数据。您正在省略“图像”参数命名空间。尝试：

```
<script>
$(document).ready(function(){
    $.ajax({
        type: 'POST', url: "localhost:3000/images",
        data: { image: { name: "johngalt" } }
    });
});
</script> 
```

# php - 在模型（codeigniter）中运行 2 个查询？

> ID：10193637
> 
> 赞同：1
> 
> 时间：2012-04-17T14:55:40.540
> 
> 标签：php, model-view-controller, codeigniter, codeigniter-2

例如，如果我在模型中运行一个查询：

```
public function list_users() { 
       $q = "SELECT user_id, username FROM users";
       return $q->result_array();
} 
```

现在，要列出该用户的帖子，我需要在此函数中引用它的 id：

```
 public function list_posts() { 
           $q = "SELECT post_id, post_title, post_content FROM posts 
                 WHERE user_id = what??";
           return $q->result_array();
   } 
```

好的，这两个功能都在模型中。现在，如何在 list_posts() 中使用 list_users() 的 RESULT。请记住，我需要传递 ID 的数组，并且**仅将它用于 list_users() 中的特定 id，它也返回 ARRAY**

我知道我可以使用连接查询，但这根本不是重点，因为我有很多查询需要拆分

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:04:22.253

### 为什么不使用 JOIN 语句，并将两个查询合二为一？

这将减少数据库负载，减少查询时间，并减少模型中的混乱。

```
SELECT p.post_id, p.post_title, p.post_content, u.user_id, u.username FROM posts p LEFT JOIN users u ON u.user_id = p.user_id 
```

您也可以使用活动记录来执行此操作。这将避免对 SQL 使用完整的查询，以及更多的 CI 方法。

[http://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

```
$this->db->select('p.post_id, p.post_title, p.post_content, u.user_id, u.username');
$this->db->from('posts p');
$this->db->join('users u', 'u.user_id = p.user_id');
$q = $this->db->get();

$q->result(); 
```

* * *

**编辑：** 您可以将值作为对象返回.. IE：`$this->user_id`然后在 posts 函数中引用它。理想情况下，您应该调用 Controller 中的第一个函数，`return $user_id`然后在下一个函数中引用它。***但这绝对不是最好的情况，您应该使用 JOIN，因为它们对数据库的负担较小。***

```
//controller

function test(){
  $users = $this->exampleModel->list_users();
  //manipulate user data if needed
  $posts = $this->exampleModel->list_posts($users);
} 
```

# php - 在实时服务器中设置 zend 项目

> ID：10193640
> 
> 赞同：-5
> 
> 时间：2012-04-17T14:55:49.273
> 
> 标签：php, zend-framework

实际上，我已经在 000webhost.com 免费托管中创建了帐户，我成功上传了系统。但我只能通过此链接 aubergeikaze.netne.net/public/ 运行它。服务器基于 Apache：

```
//////////////////////.htaccess file \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
# Do not remove this line, otherwise mod_rewrite rules will stop working

RewriteBase /
///////////////////////////////////////////////////////////////////// 
```

如何在 Apache 中将 http://aubergeikaze.netne.net/public/ 配置[为](http://aubergeikaze.netne.net/public/)http://aubergeikaze.netne.net/[服务器](http://aubergeikaze.netne.net/)。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:10:48.003

[Zend Framework 在共享主机上](http://akrabat.com/zend-framework/zend-framework-on-a-shared-host/)记录了一种解决方案

本质上，您需要根文件夹中的一个`index.php`和一个文件，因为这是 Apache 提供服务的地方。`.htaccess`

索引.php：

```
<?php 
define('RUNNING_FROM_ROOT', true);
include 'public/index.php'; 
```

.ht 访问：

```
SetEnv APPLICATION_ENV production

RewriteEngine On
RewriteRule .* index.php 
```

您还需要整理出 CSS 和 JS 文件等静态资产的路径。您可以更改要包含的路径，`public/`也可以为您编写一个插件。

此答案的评论中指出的另一个选项（为便于阅读在此处格式化）：

使用以下内容在根文件夹中创建一个 .htaccess 文件：

```
RewriteEngine On 
RewriteRule ^\.htaccess$ - [F] 
RewriteCond %{REQUEST_URI} ="" 
RewriteRule ^.*$ /public/index.php [NC,L] 
RewriteCond %{REQUEST_URI} !^/public/.*$ 
RewriteRule ^(.*)$ /public/$1 
RewriteCond %{REQUEST_FILENAME} -f 
RewriteRule ^.*$ - [NC,L] 
RewriteRule ^public/.*$ /public/index.php 
```

# git - 如何找到因“git merge master -s ours”而丢失的文件

> ID：10193645
> 
> 赞同：1
> 
> 时间：2012-04-17T14:55:58.603
> 
> 标签：git

如果该文件是在分支之后创建的，有没有办法找到从项目中删除文件的合并？重现我的问题的以下步骤应该澄清：

*   混帐初始化
*   触摸文件1
*   git添加文件1
*   git commit file1 -m "在 master 中添加了 file1"
*   git 分支新分支
*   触摸文件2
*   git添加文件2
*   git commit file2 -m "分支后在 master 中添加了 file2"
*   回显“对文件1的主更改”>>文件1
*   git commit file1 -m "master 中的 file1 已更改"
*   git结帐新分支
*   echo "newbranch 更改为 file1" >> file1
*   git commit file1 -m "在新分支中更改了 file1"
*   git merge master -s 我们的
*   触摸文件3
*   git添加文件3
*   git commit file3 -m "在新分支中添加了 file3"
*   git结账大师
*   触摸文件4
*   git添加文件4
*   git commit file4 -m "在master中添加了file4"
*   git 合并新分支

现在，如何找到删除 file2 的提交（合并）（我的意思是在这一行/命令中发生的合并：“git merge master -s ours”）。

编辑：

*   git log --graph --format=oneline

```
* 010a604feef300244386490f9c7c777dc9af6b16 合并分支'newbranch'
|\  
| * 3e7f3f6b53c2c92d137fa5a3bac190aa4c3e641f 在新分支中添加了 file3
| * b07090c2c6dd5cd2783f3db160f5b6f433beb544 将分支“master”合并到 newbranch
| |\  
| * | a0053413ab81869574475c0ce889ee721f5ed254 更改了 newbranch4 中的 file1
* | | 859e813acd24c2090287ef9d83da339c06f1c754 在 master 中添加了 file4
| |/  
|/|   
* | 0004dc5cfe23874208c6a921f9c7434fcffba8f4 更改了 master 中的 file1
* | 172d20a93ba40fb040348acc5ffe2ad45803ec22 在分支后在 master 中添加了 file2
|/  
* 6a59be0a3d4203db84b67c02231c420b518fc349 在 master 中添加了 file1

```

我正在寻找的提交是：**b07090c2c6dd5cd2783f3db160f5b6f433beb544**

*   git log -g --diff-filter=D --file2

返回：提交 6a59be0a3d4203db84b67c02231c420b518fc349

*   git log -g --diff-filter=D --follow --file2

返回：提交 010a604feef300244386490f9c7c777dc9af6b16

奇怪的是，在我发现问题的存储库中，**git log -g --diff-filter=D -- filename**确实给了我正在寻找的正确提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:36:51.340

一种方法是`git log --all --raw --diff-filter=D -m`. 这`--all`是查看所有分支，而不仅仅是您当前所在的分支。我离开了，`-g`因为它只搜索 reflogs，如果一个或多个合并是在另一个 repo 上完成的，你的 reflogs 可能从未访问过你正在寻找的提交。`-m`和显示每次提交时发生的`--raw`情况，包括合并（通常除了冲突之外是隐藏的）。此命令将两个合并标记为`file2`已删除的点，至少对于您发布的场景...

# ios5 - 未找到 Libxl 库

> ID：10193657
> 
> 赞同：0
> 
> 时间：2012-04-17T14:56:34.040
> 
> 标签：ios5

我想将 sqlite 导出到 xls 文件中。如何导出到 xls 文件？任何人都知道，请告诉我.. 如果有人有代码，请插入链接

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:00:55.617

看这里：[https ://github.com/andreac/RSSheet](https://github.com/andreac/RSSheet)

# python - 设计权限系统的最佳实践

> ID：10193659
> 
> 赞同：5
> 
> 时间：2012-04-17T14:56:43.570
> 
> 标签：python, sql, permissions, sqlalchemy, pyramid

我目前正在使用 Pyramid 开发一个小的 Python 网站。
但我不知道如何设计权限系统。
系统应该非常灵活：我必须在许多不同的表之间建立连接。
我没有为每个变体编写一个权限表，而是只创建一个表 - 我称之为 PermissionCollection：

权限集合：

*   permissionCollectionId - PrimaryKey
*   onType = ENUM("USER","TEACHER","GROUP","COURSE"...)
*   onId = 整数

和权限表：

*   permissionId - PrimaryKey
*   钥匙
*   价值
*   permissionCollectionId - ForeignKey

我将为源中硬编码的每个可能的关系定义标准 PermissionCollection，如果用户、课程、教师...具有特殊权限，我将创建一个新的 PermissionCollection 并向其添加权限。

我对网络编程很陌生，不知道这种方法是否有用。或者，如果这样的事情甚至存在。我认为 Pyramid ACL 不是此任务的正确工具，是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T01:49:07.160

不确定您是否已经阅读过它，但金字塔确实带有一个非常好的权限系统。使用 ACL 进行授权。

如何处理它，它真的只取决于你......你可以有一个 ACL 表

（object_id，允许/拒绝，谁？（组，用户 ID），权限，顺序）

*   object_id 是数据库中记录的唯一 ID
*   允许/拒绝是这个 ACE 应该做的事情...允许或拒绝访问
*   谁？可以是组、用户名或您想要的任何内容，例如 system.everyone 是所有人
*   权限是view_config中的权限参数
*   订单是一件很重要的事情 订单确实很重要

例如

```
__acl__ = [
(Deny, Everyone, 'view'),
(Allow, 'group:admin', 'view')
] 
```

此示例即使对于管理员也将始终拒绝查看...一旦金字塔找到可以告诉您是否可以看到记录的内容，它就会自动停止搜索

```
__acl__ = [
(Allow, 'group:admin', 'view'),
(Deny, Everyone, 'view')
] 
```

这将允许每个管理员查看，但不允许其他任何人查看。这就是为什么你必须记住你的 ACE 的顺序。

有趣的部分实际上就在这里。这一切都很好。您已将 acl 映射到数据中的记录。例如，当您加载页面时...您将必须加载 acl 并将它们设置在您的对象中。

```
myobject.__acl__ = load_acls(myobject) 
```

如果你有一个数据树。你甚至可以不设置acls。

例如，您有一个看起来像这样的网站

> ```
> root
>   \--pages with acl
>       +---- page1  without acl
>       \---- page2  with acl 
> ```

当您访问page1时，如果找不到它，它将检查**acl** ，如果**父级有acl，它将检查****父**级，它将检查它的权限，如果没有，它将检查**其父级**，直到您到达根。如果它找不到权限，我不太确定会发生什么。我猜它会给你一个禁止错误或谓词错误。它找不到合适的视图。

也就是说，为了完成这项工作，您必须制作知道其父母的位置感知对象。

但是你为什么要这么做呢？

您可以为任何对象设置 acl，并且可以非常精细地控制谁可以查看或不查看数据库中的每个对象。您也可以将 acl 直接放在您的类对象中，无需数据库。

只要你的acl在属性**acl**金字塔里就可以用它做点什么。你如何得到它并不重要。

看一下这个

[http://pyramid.readthedocs.org/en/1.3-branch/tutorials/wiki/authorization.html](http://pyramid.readthedocs.org/en/1.3-branch/tutorials/wiki/authorization.html)

# jquery - Leaflet 和 jQuery Mobile - 调整大小问题

> ID：10193665
> 
> 赞同：3
> 
> 时间：2012-04-17T14:56:54.483
> 
> 标签：jquery, mobile, jquery-mobile, resize, leaflet

目前在让 jQuery Mobile 和 Leaflet 一起玩时遇到问题。我似乎无法让传单在“pageinit”上调整地图的大小，而是在左上角的一个小框中弹出。

缩放级别也不正确。我已经尝试设置超时和 invaidateSize 方法，但我仍然遇到问题。我也在使用固定的页眉和页脚，控件被它们挡住了视线。这是页面的代码

```
<div data-role="page" data-theme="d" id="eventMap" data-add-back-btn="true">

        <div data-role="header" data-position="fixed" data-id="pageheader">
            <h1>Find Events</h1>
        </div>

        <div data-role="content" class="ui-content">    

            <div id="mapcanvas"></div>

        </div>

        <div data-role="footer" data-position="fixed" data-id="pagefooter">

            <div data-role="navbar">
                <ul>
                    <li><a href="eventmap.php" class="ui-btn-active">Map</a></li>
                    <li><a href="eventlist.php">List</a></li>
                </ul>
            </div>
        </div>

        <script type="text/javascript">

        function resize() {

            var content, contentHeight, footer, header, viewportHeight;
            window.scroll(0, 0);
            header = $(":jqmData(role='header'):visible");
            footer = $(":jqmData(role='footer'):visible");
            content = $(":jqmData(role='content'):visible");
            viewportHeight = $(window).height();
            contentHeight = viewportHeight - header.outerHeight() - footer.outerHeight();
            $(":jqmData(role='content')").first().height(contentHeight);
            return $("#mapcanvas").height(contentHeight);
        };  

        $('#eventmap').live('pageinit orientationchange resize', resize);

        $('#eventMap').live('pageinit', function() {    

            //MAP
            var tiles, map;

            map = new window.L.Map('mapcanvas');

            tiles = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 18, attribution: 'Eventi8'});
            map.addLayer(tiles);
            map.locateAndSetView(16);

            map.on('locationfound', onLocationFound);

            function onLocationFound(e) {

                var circle = new L.Circle(e.latlng, 30);

                map.addLayer(circle);

                var url = 'inc/eventdistancejson.php?lat='+e.latlng.lat+'&long='+e.latlng.lng+'&radius=30';

                $.getJSON(url, function (data) {

                    $.each(data.events, function(i, event){

                        var location = new L.LatLng(event.location.lat, event.location.lng);

                        var marker = new L.Marker(location);

                        marker.bindPopup('<div style="text-align: center; margin-left: auto; margin-right: auto;"><h3>' + event.name + '</h3> <p><a href="event.php?eid='+event.id+'">Event Link</a></p></div>', {maxWidth: '360'});

                        map.addLayer(marker);

                    });

                });

            }

           // Remake Map
            setTimeout(function(){ 
                    map.invalidateSize(); 
            }, 1); 
        });
        </script>

    </div> 
```

谢谢你提供的所有帮助。我也遇到了在错误页面上加载 JSON 并且 pageinit 事件被触发两次的问题，但那是另一个问题！

肖恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T21:30:57.917

问题是在您的传单脚本开始执行之前 DOM 尚未完全加载。将所有地图初始化脚本放在像 initMap() 这样的函数中，并在页面中添加一个 id="mapPage" 并添加一个 pageshow 处理程序来调用该函数。

```
 $("#mapPage").live("pageshow",function(event, ui) {
        initMap();
    } 
```

# macos - 如何在 MacOS 上检索位置信息？

> ID：10193666
> 
> 赞同：1
> 
> 时间：2012-04-17T14:56:59.297
> 
> 标签：macos, geolocation, location, core-location, cllocationmanager

我偶然发现了**CoreLocation框架并实现了 iOS** *[Location Awareness Programming Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)*中描述的基本步骤，因为我找不到适用于 OSX 的框架。

```
// AppDelegate.h

#import <Cocoa/Cocoa.h>
#import <CoreLocation/CoreLocation.h>

@interface AppDelegate : NSObject<NSApplicationDelegate, CLLocationManagerDelegate> {
    CLLocationManager* m_locationManager;
}
@end 
```

实现文件中没有那么多...

```
// AppDelegate.m

- (void)applicationDidFinishLaunching:(NSNotification*)notification {
    m_locationManager = [[CLLocationManager alloc] init];
    m_locationManager.delegate = self;
    m_locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [m_locationManager startUpdatingLocation];
}

#pragma mark - CLLocationManagerDelegate

- (void)locationManager:(CLLocationManager*)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {
    NSLog(@"%@ %@", self.className, NSStringFromSelector(_cmd));
}

- (void)locationManager:(CLLocationManager*)manager didUpdateToLocation:(CLLocation*)newLocation fromLocation:(CLLocation*)oldLocation {
    NSLog(@"%@ %@", self.className, NSStringFromSelector(_cmd));
}

- (void)locationManager:(CLLocationManager*)manager didFailWithError:(NSError*)error {
    NSLog(@"%@ %@", self.className, NSStringFromSelector(_cmd));
} 
```

当我启动应用程序时，我被要求授权位置查找。过了一会儿，同样的问题又出现了。
**问题：**但是，没有一个委托方法被调用。

* * *

顺便说一句：一篇关于[苹果和谷歌地图](http://www.wallstreetjournal.de/article/SB10001424052702303918204577448180303398226.html?mod=WSJDE_latestheadlines)宣布[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)的有趣文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T10:21:07.350

使用此委托

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:45:40.667

我能想到两件事：

1)

您的应用程序会在 MacOS 10.6 及更高版本上运行吗？如果是这样，请确保您的项目的“部署目标”设置为 10.6 或更高版本。

2)

在您的“ `.h`”接口文件中，确保添加`<CLLocationManagerDelegate>`以表明该对象符合协议。看起来您正试图从您的应用程序委托中执行此操作，因此声明可能类似于：

```
@interface AppDelegate : NSObject <NSApplicationDelegate, CLLocationManagerDelegate> 
```

# jquery - 需要帮助将事件绑定到 jQuery 模板按钮

> ID：10193668
> 
> 赞同：1
> 
> 时间：2012-04-17T14:57:04.717
> 
> 标签：jquery, jquery-selectors, jquery-templates

我正在使用 jQuery 模板来创建一个信息表。每行包含一个减号按钮、加号按钮和它们之间的文本框。还有一些文字。当您单击减号或加号按钮时，文本框中的数字会上升或下降。所有这些都是通过模板动态呈现的，那么我的按钮将如何工作？我已经尝试了以下测试，它最终只是在我的所有减号按钮元素上调用了 click 函数：

```
jQuery('#template').tmpl(data).appendTo("#holdingCell");

    jQuery('#holdingCell #minusbutton').click(
        function(){
            alert(this.id);
        }); 
```

这是我的代码的相关部分。有人对我如何使这项工作有建议吗？

```
<script id="template" type="text/x-jquery-tmpl">
    <div style="display:block;margin-bottom:20px;" id="${getNextId()}">
      <div class="adjuster"><button id='minusbutton'>-</button><input id='quantityText' class="enterQuantity" type=text style="width:40px; margin-left:5px;margin-right:5px" /><button id=">+</button></div> 
      <div class="productName" style="width:200px"><div>${productname}</div></div>
      <div class="quantity"><span style="font-weight:bold;">${quantity}</span><span> Remaining</span></div>
    </div> 
```

```
function getNextId(){
return id++;
}

function buildDialog(json){
//Stuff I didn't paste here turns the parameter 'json' into a variable 'data'

 jQuery('#template').tmpl(data).appendTo("#holdingCell");

    jQuery('#holdingCell #minusbutton').click(
        function(){
            alert(this.id);
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:16:35.073

您可以更改模板以将 onclick 添加到每个按钮。然后传入需要发送给函数的参数：

```
<div class="adjuster"><button id='minusbutton' onClick='minusClick(${id});'>-</button>

function minusClick(id) {
    alert(id);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:11:33.247

```
$(function(){ //that means on page load
    $("#minusbutton").click(function(){
        var $item = $(this).parent().$("#quantityText");
        var current_value = $item.val();
        current_value = parseInt(current_value);
        if (current_value - 1 >= 0)
        {
             $item.val(current_value - 1);
        }
    })
}); 
```

这就是减号按钮的逻辑。您使用相同的逻辑对加号进行等效操作。

# node.js - 如果消息包含超过 160 个字符，如何接收整个消息？

> ID：10193669
> 
> 赞同：1
> 
> 时间：2012-04-17T14:57:09.000
> 
> 标签：node.js, serial-port, gsm, modem

我有wavecom GSM（16端口）调制解调器我用节点js操作它当我收到包含超过160个字符的消息时我收到这样的消息

```
+CMT: "+919800000000",,"12/04/17,20:03:27+22"
@o09 @ hello hi ?1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 

+CMT: "+919800000000",,"12/04/17,20:03:34+22"
@o09­@ rest message 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890

+CMT: "+919800000000",,"12/04/17,20:03:40+22"
@o09¨@ rest message ,,,,,... 
```

这里第一条和第二条消息包含 160 个字符（假设它，我手动编写此消息）我在请求消息时收到匿名字符（如：@o09@）我怎样才能在一个块中接收整个消息像这样

```
+CMT: "+919800000000",,"12/04/17,20:03:27+22"
hello hi ?1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890  rest message 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 1234567890 rest message ,,,,,... 
```

信息：我用 115200 波特率初始化我的所有端口。

是否有任何 at 命令可以解决我的问题。？提前致谢....

# php - 更新 MySQL 中的日期/时间字段

> ID：10193672
> 
> 赞同：0
> 
> 时间：2012-04-17T14:57:23.770
> 
> 标签：php, mysql

```
 $query1 = "SELECT * FROM vtiger_crmentity WHERE orderdetailsid=" . $orderdetailsid;
            $query2 = "UPDATE vtiger_crmentity SET createdtime=NOW(),modifiedtime=NOW(),viewedtime=NOW() WHERE orderdetailsid=" . $orderdetailsid;

                $result1 = mysql_query($query1); echo mysql_error();
                $result2 = mysql_query($query2); echo mysql_error(); 
```

似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:19:27.803

1>检查这3个字段的数据库字段类型createdtime,modifiedtime,viewedtime。

2>检查 $orderdetailsid 是否具有适当的值，如果 $orderdetailsid 具有适当的值，则检查该值是否存在数据库中的任何记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:28:04.407

您是否将 orderdetailsid 列添加到 vtiger_crmentity 表中？默认情况下，该表不包含*orderdetailsid*，该表中唯一的 id 是*crmid*。这是你的意思吗？

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-17T15:04:06.027

首先尝试编写正确的mysql查询；如果它仍然不起作用，您可以随时使用 php 插入当前日期/时间。就像是 ：

```
mysql_query("UPDATE `vtiger_crmentity` SET `createdtime` = '" . time() . "' , `modifiedtime` = '" . time() . "', `viewedtime` = '" . time() . "' WHERE `orderdetailsid` = '" . $orderdetailsid ."'"); 
```

# c# - 在 Using 语句中捕获异常

> ID：10193674
> 
> 赞同：24
> 
> 时间：2012-04-17T14:57:26.503
> 
> 标签：c#, using

我知道[Using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)语句会处理正在创建的对象。就像我想做这样的事情：

```
 Using(SqlConnection conn = new SqlConnection(connString))
    {
      //some code
      //How to show the users if conn is not opened up or generated some kind of error?
    } 
```

如果 conn 未打开或产生某种错误，如何向用户显示？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-17T15:00:16.877

编写在块内的代码没有什么特别之处`using`- 只需使用 a`try.catch`来处理异常：

```
using(SqlConnection conn = new SqlConnection(connString))
{
    try
    {
        conn.Open();
        // do more stuff here......

    }
    catch(SqlException sqlEx)
    {
       // log error and possibly show to user in a MessageBox or something else
    }
} 
```

`using(...) { ... }`块本身的设计只是**为了**确保它“封装”的资源/对象在不再需要时被正确处理。您无法对`using`语句本身做任何事情来使其处理错误。

因此，如果您希望仅创建对象可能会失败，那么您必须将整个`using`块放入`try ... catch`块中，或者退回到`try ... catch ... finally`块并确保自己正确处理（正如亚当在他的回答中所建议的那样）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-17T14:59:59.853

`using`不提供任何后门进入`catch`.

只需手动扩展它（在使用 IMO 中使用 try/catch 没有意义）：

```
SqlConnection conn = null;

try
{
    conn = new SqlConnection("");
}
catch ...
{

}
finally
{
    if (conn != null)
        conn.Dispose();
} 
```

在大多数情况下，我更喜欢`using`在 a中包装`try-catch`或嵌入 a以避免代码在编译后以嵌套的形式结束。但是，如果您只需要在.`try-catch``using``try-catch``using`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-17T15:07:06.343

```
class SqlConnection
{
   using(sqlConnection)
   {

   }
}

class Consumer
{
   try
  {

  }
  catch(SqlException)
  {

  }

} 
```

由类的使用者决定如何处理异常。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-17T15:09:19.800

正如其他答案所述，只需添加一个正常的 try/catch 即可。

但是，我要补充一点，这是放置 try/catch的**错误位置，***特别是*如果您的目标是“向用户展示”一条消息。让异常发生在这个级别，并允许它在堆栈中冒泡到处于更好位置以知道如何响应它的代码。

换句话说，让您的代码示例保持原样。不要*在该方法*中添加任何新内容。但也许调用此方法的代码应该考虑如何处理数据库中的异常......任何异常。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-17T15:00:58.633

只是以正常方式：

任何一个

```
try
{
    using(SqlConnection conn = new SqlConnection(connString)) 
    { 
      //some code        
    } 
}
catch (Exception exc)
{
    //handle error
} 
```

或者

```
using(SqlConnection conn = new SqlConnection(connString)) 
{ 
    try
    {
        //some code 
    }
    catch (Exception exc)
    {
        //handle error
    }                
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-17T15:00:30.827

这与没有它的方式相同。

```
using(SqlConnection conn = new SqlConnection(connString))
{
  try{
    //some code
  }
  catch(SqlException e)
    MessageBox.Show(e.Message);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T15:02:24.510

你不要在里面做`using`

```
try
{
    using(SqlConnection conn = new SqlConnection(connString))
    {
        // Some code for when "conn" is succesfully instantiated
    }
}
catch (SomeSpecificConnectionInstantiationException ex)
{
    // Use ex to handle a bizarre instantiation exception?
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-05T20:03:03.443

当你在 try/catch 中嵌入 using() 块时， using() 块确实会保证 Dispose 被调用。但是，如果您 using 块中任何地方的非托管代码抛出异常， using() 只会吃掉它，它不会到达您的捕获。在 using() 块中使用 try/catch，跳过 using() 并执行 try/catch/finally，或者使用带有 catch 块的奇数“using() try”语法（这会留下奇数个括号和可能会混淆后来遇到它的中级程序员。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-12-27T06:50:41.560

如果要捕获 using 块内的代码引发的异常，最好在 using 语句中使用 try{}catch(){}。现在，考虑以下两个示例 - 这解释了为什么在 using 语句中使用 try-catch 块是一个好习惯。

> 示例 1

```
 try{
           using(SomeObject so = new SomeObject){
              // Perform some tasks
           }
       }catch(SomeException objSomeException){
             // Perform some actions, if exception occurs
       } 
```

> 示例 2

```
 using(SomeObject so = new SomeObject){
           try{    
               // Perform some tasks
              }catch(SomeException objSomeException){
                   // Perform some actions, if exception occurs
              }
       } 
```

现在，如果在 using 语句中执行某些任务时发生异常，两个示例将具有相同的结果。简单的答案是否定的，原因？？？

当示例 1 中发生异常时，它会被 catch 块捕获 - 不会到达 using 块的末尾。因此，示例 1 中的 someObject 将无法正确处理。即使 CLR 是慷慨的（你不应该指望它） - 示例 1 中 someObject 使用的内存也不会被回收（或最大值将在第 2 代 GC 收集中结束）。

在示例 2 的情况下，catch 块位于 using 语句内。这意味着执行将到达 using 块的末尾。因此，您的对象将被丢弃，您不必担心内存泄漏（损坏，

# c++ - 从 unsigned Char* 转换为 unsigned int

> ID：10193675
> 
> 赞同：1
> 
> 时间：2012-04-17T14:57:27.217
> 
> 标签：c++, types, compiler-errors

当我执行以下操作时，我收到此错误：

**../src/Sample.cpp:19：错误：从 \u2018UINT8*\u2019 转换为 \u2018UINT8\u2019 失去精度**

```
#include <iostream>
using namespace std;

typedef unsigned char UINT8;
typedef unsigned int UINT32;

#define UNUSED(X) X=X

int main() {
    UINT8 * a = new UINT8[34];
    UINT32 b = reinterpret_cast<UINT8>(a);

    UNUSED(b);

    return 0;
} 
```

我将如何解决这个问题。请记住，我不是试图将字符串转换为无符号长整数，而是将 char*（地址值）转换为 int。

谢谢

解决方案：

事实证明，这个问题与指针大小有关。在 32 位机器上，指针大小是 32 位，而对于 64 位机器，当然是 64。以上不适用于 64 位机器，但适用于 32 位机器。这将适用于 64 位机器。

```
#include <iostream>
#include <stdint.h>

using namespace std;

typedef  uint8_t UINT8;
typedef int64_t UINT32;

#define UNUSED(X) X=X

int main() {
    UINT8 * a = new UINT8[34];
    UINT32 b = reinterpret_cast<UINT32>(a);
    UNUSED(b);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:00:35.770

假设 sizeof(int) == sizeof(void*) 您可以使用此代码进行转换：

```
int b = *reinterpret_cast<int*>(&a); 
```

或其变体。我认为 static_cast 也可以。

当然 a 必须是左值（能够分配给）才能获得它的地址。对于非 l 值，您需要使用一个函数，并且旧的联合技巧将起作用：

```
int Pointer2Int (void* p)
{
    union { void* p; int i; } converter;
    converter.p = p;
    return converter.i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:01:30.033

这不是一个好主意，但该行应为：

```
UINT32 b = reinterpret_cast<UINT32>(a); 
```

`reinterpret_cast`将目标类型的类型作为模板参数。

使用正确的类型 g++ 会*告诉你*这不是一个好主意：

```
error: invalid cast from type ‘char’ to type ‘int’ 
```

有关更正确的方法，请参阅 Cthutu 的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:00:22.073

一种选择是：

诠释*一个；字符 b[64]; 诠释 c;

a = (int*) malloc (sizeof(int));

sprintf(b, "%d", a);

c = atoi(b);

# javascript - 使用 jQuery 确定“显示模块模式”模块的范围

> ID：10193678
> 
> 赞同：3
> 
> 时间：2012-04-17T14:57:39.617
> 
> 标签：javascript, jquery, scope, module-pattern, revealing-module-pattern

假设我有这个模块，我希望它自行初始化并附加到它的范围内。像这样：

```
(function( scope ) {
    var Module = (function() {
      return {
          init: function(){
              console.log('Initialized');
          }
      };
    })();
    var module = scope.Module = Module;
    module.init();
})( self ); 
```

现在，问题是，这**`self`**总是**`window`**. 我不想要那个。我希望它成为 jQuery 调用和加载它的范围`$.getScript()`，如下所示：

```
var Master = (function($) {
    return {
        init: function() { 
            var self = this;
            $.getScript("/js/libs/module.js");
        }
    }
})(jQuery) 
```

**有没有办法破解这个？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:01:24.990

我认为您不能将作用域注入使用 $.getScript 调用的自执行脚本。相反，您必须使用某种导出变量来存储脚本，直到可以注入作用域。

```
(function( exports ) {
   exports.Module = function() {
     return {
        init: function(scope){
           console.log('Initialized', scope);
        }
     };
   };
   var module = exports.Module;
})( exports || window.exports = {} ); 
```

然后：

```
var self = this; // or whatever you want the scope to be
$.getScript("/js/libs/module.js", function(){
    exports.Module().init(self);
}); 
```

老实说，如果您将 jQuery 用于这样的模块模式，请考虑使用更全面的库加载器，例如[require.js](https://github.com/jrburke/requirejs)或[Frame.js](https://github.com/bishopZ/Frame.js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:09:53.450

JavaScript 中的作用域与函数密切相关，而不是对象。JS 中的对象`{}`不会创建它自己的范围。我不熟悉 jQuery 中的“Revealing Module Pattern”，但要获得一个独特的范围，你会做这样的事情：

```
(function( scope ) {
    var Module = (function() {
      return new function() {
          this.init = function(){
              console.log('Initialized');
          }
      };
    })();

    var module = scope.Module = Module;
    module.init();

})(); 
```

或者，也许更简洁：

```
(function( scope ) {
    var Module = new function() {
        this.init = function(){
          console.log('Initialized');
        };
    };

    var module = scope.Module = Module;
    module.init();

})(); 
```

在这种情况下，范围是模块，而不是窗口。

# objective-c - 在 Objective-C 中转换接收器的语法

> ID：10193686
> 
> 赞同：1
> 
> 时间：2012-04-17T14:58:35.750
> 
> 标签：objective-c

我有一个这样声明的类/超类对：

```
@class WSStatement;
@interface WSIfStatement : WSStatement
@property (nonatomic, retain) WSStatement *thenstatement;
@end 
```

我使用Core Data 创建了一个子类的实例并将它分配给一个WSStatement * 指针（即超类）。稍后我想向特定于子类的对象发送一条消息，编译器给我一个警告说“找不到实例方法（返回类型默认为'id'）”

我试过这样铸造....

```
[(WSIfStatement *)statement setThenStatement:aVariableParameter]; 
```

但警告仍然存在。该程序完美执行，但我无法摆脱讨厌的编译器警告。我在任何地方都找不到完整的正式的 Objective-C 语法描述，所以如果答案很明显，我深表歉意！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:08:08.617

如果不是拼写错误，那么问题是您调用了错误的方法。

```
@property (nonatomic, retain) WSStatement *thenstatement;

//Will be called with a lowercase s for statement
[(WSIfStatement *)statement setThenstatement:aVariableParameter]; 
```

此外，您不能只转发声明您继承的类。您将需要包含`WSStatement`. 如果您仍然有错误，请确保您`thenstatement`在实现中进行综合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:04:34.863

属性合成了吗？在您的 .m 文件中使用：

```
@synthesize thenstatement; 
```

这将生成 set 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:01:28.093

尝试添加`#import "WSIfStatement.h"`到您正在拨打电话的 .m 文件中。

# c++ - 逻辑矛盾是否背叛了类设计中的 OOP？

> ID：10193689
> 
> 赞同：0
> 
> 时间：2012-04-17T14:58:52.140
> 
> 标签：c++, oop

我有3节课。他们有所有相似的整数，方法等......

```
class Country{

      int a,b;
public:
      Country();
      void doSomething();
      :
      :
}

class Military : public Country {
public:
      Power();
      void doAnother();
      void doAnother2();
      :
      :
}

class Technology : public Military{
public:
      Technology();
      void doAnother3();
      :
      :
} 
```

假设这种继承适合我的解决方案。但是正如你所看到的，当我从 Country 创建 Military 时，它们之间在逻辑上没有关系。我的意思是，军队不是一个国家。同样对于来自国家的技术，问题也是一样的。技术不是军队，也不是国家。

无论如何，这个解决方案对我来说没问题，它缩短了我的代码，但是如果我这样做，我是否背叛了面向对象的编程哲学？是矛盾的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T15:01:04.303

所有这些继承关系都是错误的。一个国家“有”军队，一个军队“有”技术。因此，他们应该是成员。继承是为了“是一种”关系。

如果您颠覆了语言结构的预期含义，您可能会在以后为此付出代价。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T15:00:55.030

是的，它反对 OOP。你们的关系是`has-a`，不是`is-a`。

为此，您应该使用组合而不是继承。

```
class Country{
      Military m;  //Country has-a military
      int a,b;
public:
      Country();
      void doSomething();
}

class Military{
      Technology t; //Military has-a technology
public:
      Military();
      void doAnother();
      void doAnother2();
}

class Technology{
public:
      Technology();
      void doAnother3();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:02:34.337

这是一个错误的设计
当您继承某个类时，它是一种`is-a`关系。而继承不是[`code reuse`](http://www.parashift.com/c++-faq-lite/smalltalk.html)

`has-a`您可以为与他们共同的行为建立关系。

比如键盘有按钮，我的衬衫也有。但我的衬衫`is not a`键盘。
所以它也应该被设计成`shirt has buttons`这样`keyboards has buttons`。

# visual-studio-2010 - 无法加载文件或程序集“Microsoft.Web.Infrastructure”或其依赖项之一。访问被拒绝

> ID：10193690
> 
> 赞同：7
> 
> 时间：2012-04-17T14:58:53.963
> 
> 标签：visual-studio-2010, asp.net-mvc-3

这是堆栈跟踪：

```
[FileLoadException: Could not load file or assembly 'Microsoft.Web.Infrastructure' or one of its dependencies. Access is denied.]

System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39
System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132
System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +144
System.Reflection.Assembly.Load(String assemblyString) +28
System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +115

[ConfigurationErrorsException: Could not load file or assembly 'Microsoft.Web.Infrastructure' or one of its dependencies. Access is denied.]
System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +1023
System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +346
System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +85
System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +54
System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +274
System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +63
System.Web.Compilation.BuildManager.CallPreStartInitMethods() +235
System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1109

[HttpException (0x80004005): Could not load file or assembly 'Microsoft.Web.Infrastructure' or one of its dependencies. Access is denied.]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +762
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +156
System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +357 
```

一切正常。我从来没有改变我的参考文献中的任何东西。我在我的项目中添加了 Microsoft.Web.Infrastructure.dll，并且 Copy local 设置为 True。

一切都很好，直到我添加了没有母版页的新视图。怎么了？如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:12:01.207

我遇到了同样的问题，原来 Visual Studio 已经锁定了有问题的 .dll。重新启动 Visual Studio 解决了这个问题，但我仍然不知道它**为什么**会发生。

# jquery - jQuery：单击对话框中的按钮时是否可以刷新页面......并保持对话框打开？

> ID：10193695
> 
> 赞同：2
> 
> 时间：2012-04-17T14:59:15.907
> 
> 标签：jquery

我有一个网页，它打开一个包含“保存”按钮的 jQuery UI 对话框。
单击该按钮时，我想重新加载对话框后面的整个页面（因为对话框中的一些修改信息显示在后面的页面中）。

现在，我知道对话框和后面的页面实际上是同一个页面......所以如果我这样做`window.location.reload();`了整个页面被重新加载并且对话框显然会自动消失。

我希望重新加载发生在对话框后面（并保持对话框打开），你认为这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:02:57.583

您可以仅在保存和重新加载 DIV 的内容时使用 AJAX，而不是整个页面。

```
//on save..
$.get('page.php', function(data) {
  $('.mydiv').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:03:59.547

也许用一些 ajax 部分刷新页面的其余部分..

由于对话框本身是 html 的一部分，因此您需要以一种可以刷新所需内容的方式构建页面，不包括对话框的 html...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:02:21.177

你应该使用：

```
window.parent.location.reload(); 
```

# html - 如何在css上对齐图像？

> ID：10193696
> 
> 赞同：3
> 
> 时间：2012-04-17T14:59:21.563
> 
> 标签：html, css

我想在主页的左侧放置一张图片。我知道如何在 html 中做到这一点，但我想在 CSS 类中创建它。我不知道我需要做什么来修复它。我要的图片叫做 Nobullying.jpg HTML：

```
 <html>
  <head>
  <link rel="stylesheet" type="text/css" href="body.css"/>
  </head>
  <body>
  <h1>Bully-Free Zone</h1>
  <h2>"Online harassment has an off-line impact"</h2>
  <!--Menu-->I
  <div id="nav">
  <a href="mainpage.htm" class="nav-link">HOME</a>
  <a href="page1.htm" class="nav-link">ASSISTANCE</a>
  <a href="page2.htm" class="nav-link">CYBER-BULLYING SIGNS</a> 
  <a href="page3.htm" class="nav-link">REPORT</a>
  </div>
  <div id="picture"></div>
  <!--Copyright-->
  <div id="center">
  <td> Copyright © 2012 Bully-FreeZone.com</td>
  </div>

  </body>
  </html> 
```

CSS类：

```
 #picture{background-image:Nobullying.jpg;
   width:40px; height:40px;
   } 
```

这是我想要的图片。（红框） [http://imgur.com/Ef2Au](http://imgur.com/Ef2Au)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T15:01:02.573

```
#picture { 
 background-image:url('no-bullying.jpg');
 height:100px;
 width:50px;
 position: absolute;
 bottom:10px;
 left:10px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:03:33.983

像这样调整你的CSS：

```
#picture{
   background-image:url('/path/to/Nobullying.jpg');
   width:40px; height:40px;
   position: absolute; /* this removes it from document flow */
   left: 5px; /* this places image 5px away from the leftmost area of the container */
              /* you can choose from left/right and top/bottom for positioning */
              /* play around with those and you should get a hang of how it works */
} 
```

请记住：当您使用 css 背景图片时，路径是从 css 文件（而不是包含 css 的 html 文件）的角度来看的。

所以如果你的目录结构像

```
root
--> css    -> styles.css
--> images -> Nobullying.jpg
--> index.html 
```

那么你的路径可能是`url('../images/Nobullying.jpg')``url('/images/Nobullying.jpg');

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T15:04:50.633

或者`fixed`，无论滚动如何，您都可以使用定位将其保持在该位置。

```
#picture{
    background: url(Nobullying.jpg) no-repeat;
    width:40px;
    height:40px;

    position: fixed;
    bottom:10px;
    left:10px; 
```

}

*还使用 url() 和 no-repeat 作为背景图像。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T15:08:44.710

您的`background-image`规则中有语法错误。除此之外，您可以使用`position:absolute`来定位元素

```
#picture{
    background-image: url(Nobullying.jpg);
    width:40px;
    height:40px;
    position:absolute;
    left:10px;
    bottom:10px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T15:02:45.223

```
#picture{
   background-image:url(Nobullying.jpg);
   width:40px; height:40px;
   float:left;
   } 
```

我在这里使用了 ID 而不是类。图像应使用 ID="picture" 标识。

在 CSS 中，当你使用 float 时会变得有点棘手。如果您已经可以在 html 中执行此操作，请使用 html。否则，您将不得不学习一些额外的东西。

*答案已更新*

# switch-statement - 思科 - 链路故障后实现 STP 收敛的最快方法

> ID：10193697
> 
> 赞同：0
> 
> 时间：2012-04-17T14:59:29.050
> 
> 标签：switch-statement, cisco, spanning-tree, stp

我正在配置一对交换机，我们的两个数据中心各一个。我们在站点之间有一对链路，一个是专用的专用光纤，另一个是备用的 100Mbps 连接。出于不值得探讨的原因，我需要在链路上推送多个 VLAN，并且需要使用 STP（或等效的）来管理路径冗余并避免交换循环和相关的崩溃。

目前，我在根主节点和辅助节点的备份链路上设置了 4096 的路径成本，效果很好，交换机选择光纤并阻塞备份链路，直到光纤断开。我还为相关 VLAN 设置了 2 的网络直径，这将收敛时间减少到 14 秒（2 倍转发时间）。

我已经读过，使用 RSTP 可以在一秒钟左右获得收敛，如果这是真的，我会很想知道如何。

这是我到目前为止所拥有的（这个配置或多或少地反映在两个交换机上）：

```
spanning-tree mode rapid-pvst
spanning-tree extend system-id
spanning-tree vlan 102,104-109 priority 24576
spanning-tree vlan 102,104-109 forward-time 7
spanning-tree vlan 102,104-109 max-age 10
!
<snip>
!
interface GigabitEthernet4/0/47
 description Pseduo wire to DC2
 switchport trunk encapsulation dot1q
 switchport trunk allowed vlan 102-108
 switchport mode trunk
 speed 1000
 duplex full
 spanning-tree vlan 102-108 cost 4096
!         
<snip>
!
interface GigabitEthernet4/0/49
 description 1Gbps to DC2
 switchport trunk encapsulation dot1q
 switchport trunk allowed vlan 102-107,109
 switchport mode trunk 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-18T05:42:42.890

我需要在这里指出一些事情......

始终尝试为链路设置**相同的双工模式和速度**，尽管每个接口都会根据另一个端口自动获得它们的速度和双工配置，但最好手动设置。

其次，您不需要指定扩展的系统 ID。这是默认模式。

在 RSTP 中，每个设备都在与它的邻居通话，这就是为什么它很快！收敛需要 2 秒。（在 STP 中，根桥负责发送 TCN（拓扑更改通知）数据包以更新 STP 状态）在 RSTP 中有一种设备相互通信的方法，即以两种方式发送数据包（全双工 - 和RSTP 执行的主要原因是基于同时发送和接收 - 路由器需要知道其邻居端口已启动，如果不是，则必须更改根端口和指定端口以执行另一个收敛...）

对不起，如果我的笔记不是很清楚，我试图解释什么是必须知道的。谢谢。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T06:22:08.390

即使是经过良好调整的 RSTP 拓扑[仍然可能需要几秒钟的时间](http://blog.ine.com/2009/09/07/rstp-and-fast-convergence/)，但一个好的起点是调整 RSTP 的[3 个计时器](https://www.cisco.com/en/US/tech/tk389/tk621/technologies_tech_note09186a0080094954.shtml)：

```
Hello - which defaults to 2 seconds
Forward Delay - which defaults to 15
Max Age - which defaults to 20 (Less important here) 
```

Uplinkfast 不需要配置，因为它是 RSTP 内置的，只需检查您的备份链路是否列为“备用”端口并准备好快速故障转移。

对于一般 RSTP 内务处理，请考虑将所有边缘端口设置为 Portfast，并考虑任何半双工链路对拓扑的影响——如果可能，将所有半双工端口更改为全双工，这将使它们成为使用 802.1w 的候选者（RSTP 将回退到半双工的 STP ......）
**半双工在 RSTP 中非常糟糕**，但有一些解决方法。

还要考虑当链路断开时会发生什么样的故障：

**直接故障**- 交换机知道链路立即关闭（端口关闭）。
故障转移到备用端口的速度非常快，因为交换机会立即意识到问题 - 在这里您可能会实现 <1 秒，具体取决于交换机检测端口关闭所需的时间。

**间接故障**- 流量被黑洞，但交换机认为链路已启动。
检测到 3xHello 数据包的时间要长得多，必须丢弃。如果发生这种情况，请考虑将您的 hello 数据包计时器设置为 1 秒。
（缺少 3 个 hellos 将告诉交换机链接已关闭...... 6 秒与 3 秒）

# c# - 我应该通过 RedirectToAction 还是 TempData 传递值？

> ID：10193709
> 
> 赞同：3
> 
> 时间：2012-04-17T15:00:09.390
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, redirecttoaction, tempdata

我看过一些文章（甚至 MSDN）建议使用 TempData 在 ActionMethods 之间传递数据。但是我在这里看到其他人说应该避免使用 TempData。解决此问题的最佳实践方法是什么？

这是一些代码来显示我的情况。注意：我 100% 确定，我做错了。这就是我在这里的原因。:) 另外，直到最近我一直在做 Webforms。

注2：[这是相关的，但不一样。](https://stackoverflow.com/questions/10126989/can-data-be-updated-through-the-index-view-using-buttons)

看法：

```
<div>
    @using (Html.BeginForm("Previous", "Home", new {month = @month}, FormMethod.Post)) 
    {
        <input id="previous" type="submit" value="Previous" />
    }

    // This fails but that's another situation
    @using (Html.BeginForm("Next", "Home", new {month = @month, year = @year}, FormMethod.Post))
    {
        <input id="next" type="submit" value="Next" />
    }
</div> 
```

控制器方法：

```
[HttpPost]
public ActionResult Previous(HTMLMVCCalendar.Models.MonthModel prevMonth)
{
    Calendar monthEventsCal = new Calendar();

    int month = prevMonth.Month;
    int year = prevMonth.Year;

    var newMonth = monthEventsCal.previousMonth(year, month);

    month = newMonth.Item2;
    year = newMonth.Item1;

    return RedirectToAction("Index", "Home", new { month = month });
}

[HttpPost]
public ActionResult Next(HTMLMVCCalendar.Models.MonthModel nextMonth)
{
    Calendar monthEventsCal = new Calendar();

    int month = nextMonth.Month;
    int year = nextMonth.Year;

    var newMonth = monthEventsCal.nextMonth(year, month);

    month = newMonth.Item2;
    year = newMonth.Item1;

    return RedirectToAction("Index", "Home", new { year = year, month = month });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:46:37.693

听起来您将操作方法​​与最终结果耦合得太紧了。

我会重构一点；你会有这样的索引方法：

```
 public ActionResult Index()
 {
      HTMLMVCCalendar.Models.MonthModel someModel = new HTMLMVCCalendar.Models.MonthModel();

      someModel.DateTime = DateTime.Now; // whatever

      return View(someModel);
 } 
```

然后，当您需要重新计算日历时，您只需发布到相同的 URL，该 URL 将返回具有新视图模型数据的相同视图。

```
 [HttpPost]
 public ActionResult Index(HTMLMVCCalendar.Models.MonthModel previousModel, bool? goForward)
 {
      if(goForward.HasValue && goForward.Value)
            previousModel.DateTime = previousModel.DateTime.AddMonths(1);
      else
            previousModel.DateTime = previousModel.DateTime.AddMonths(-1);

      return View(previousModel);
 } 
```

您停留在相同的 URL 上并呈现相同的视图，但会进行您需要的更改。您不需要为每个操作指定一个特定的端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:48:53.823

我想出了这个。这是坏的，好的，应该改进吗？

剃刀/HTML：

```
<div>
        @using (Html.BeginForm("Previous", "Home", new{ year = @year, month = @month },  FormMethod.Post)) 
        {
            <input id="previous" type="submit" value="Previous" />
        }
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        @using (Html.BeginForm("Next", "Home", new { year = @year, month = @month }, FormMethod.Post))
        {
            <input id="next" type="submit" value="Next" />
        }
    </div> 
```

控制器/动作方法：

```
public ActionResult Index(int? year = 2012 , int? month = 2)
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            Calendar monthEventsCal = new Calendar();

            HTMLMVCCalendar.Models.MonthModel allMonthEvents = monthEventsCal.monthEvents(year.Value, month.Value);
            return View("Index", allMonthEvents);
        }

        [HttpPost]
        public ActionResult Previous(int? year = 2012, int? month = 2)
        {
            Calendar monthEventsCal = new Calendar();

            var newMonth = monthEventsCal.previousMonth(year.Value, month.Value);

            int currMonth = newMonth.Item2;
            int currYear = newMonth.Item1;

            return RedirectToAction("Index", "Home", new { month = currMonth, year = currYear });
        }

        [HttpPost]
        public ActionResult Next(int? year = 2012, int? month = 2)
        {
            Calendar monthEventsCal = new Calendar();

            var newMonth = monthEventsCal.nextMonth(year.Value, month.Value);

            int currMonth = newMonth.Item2;
            int currYear = newMonth.Item1;

            return RedirectToAction("Index", "Home", new { month = currMonth, year = currYear });
        } 
```

全球.asax.cs：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{month}/{year}", // URL with parameters
                new { controller = "Home", action = "Index", month = UrlParameter.Optional, year = UrlParameter.Optional } // Parameter defaults
                //"{controller}/{action}/{id}", // URL with parameters
                //new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            );

        } 
```

# coded-ui-tests - 远程运行 Coded UI 测试

> ID：10193713
> 
> 赞同：10
> 
> 时间：2012-04-17T15:00:20.500
> 
> 标签：coded-ui-tests

我必须在 VM 上远程运行 Coded UI 测试。我正在使用 Mstest.exe 执行测试用例。现在，当我通过 Windows 调度程序运行它时，它失败了，因为它需要“活动桌面”。

我读了几个我们需要使用测试代理的地方。但我不想配置测试代理和测试控制器只是为了设置“活动桌面”，我还能做些什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T13:30:32.977

好吧，设置测试控制器和测试代理并不难，这真的很容易，也是最好的方法。您可以在此处找到安装指南：http: [//msdn.microsoft.com/en-us/library/dd293551.aspx](http://msdn.microsoft.com/en-us/library/dd293551.aspx)

但是，即使您使用控制器，仍然存在一些问题。

测试代理可以在服务或进程模式下运行。对于编码的 ui 测试，您需要在进程模式下运行它（因为它需要在同一个 Windows 会话中）。但是，当您使用远程桌面登录 VM 并将其关闭时，目标计算机的桌面将保持锁定状态，并且无法继续进行测试。除非您登录，否则没有活动会话，测试控制器甚至都不会启动。

我知道有两种方法可以保持活动桌面：

1.  （推荐）从 sysinternals 套件运行 AutoLogOn.exe（可以在[http://live.sysinternals.com/](http://live.sysinternals.com/)找到）。它会在机器启动后自动以指定用户登录，并保持桌面处于活动状态。
2.  **在非最小化**窗口中保持远程桌面处于活动状态。很少有应用程序可以让多个远程桌面保持打开状态，并且保持连接应该可以解决问题。

斯塔斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T12:00:54.687

您需要执行以下操作：

1) 设置自动登录。

2) 禁用屏幕保护程序。

3）禁用所有应该干扰测试的东西，例如：关闭Windows更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T13:44:15.210

在虚拟机上运行 CODEDUI 测试（即使虚拟机处于最小化状态），并在虚拟机和本地机器上同时工作，请执行以下操作。

1) 关闭计算机上打开的所有远程桌面会话。

2) 在您的本地计算机上单击开始并选择运行。在“运行”对话框中，键入 regedit 并按 Enter。注册表编辑器启动。

3) 找到以下任何注册表项：

HKEY_CURRENT_USER -----> 软件 -----> Microsoft-----> 终端服务器客户端（如果您想更改用户帐户的 RDC 设置）

——或者——</p>

HKEY_LOCAL_MACHINE -----> 软件 -----> Microsoft -----> 终端服务器客户端（如果要更改所有帐户的 RDC 设置）

右键单击“终端服务器客户端”并选择“新建”--->“DWORD 值”---> 命名为 ---> RemoteDesktop_SuppressWhenMinimized。----> 右键单击​​此名称并选择“修改” ---> 在弹出窗口中输入“数值数据”为“2”

就这样。现在最小化您计算机上的 RDC 窗口不会影响远程计算机的 GUI，并且 GUI 仍可用于您的自动化 GUI 测试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-19T13:28:09.947

您无法通过正常的 RDP 连接运行 CodedUI 测试 - 您需要登录到控制台会话。假设您要运行测试的机器是 Hyper-V 机器，您可以使用 Hyper-V 虚拟机管理器登录到控制台会话。在某些情况下，使用 /admin 参数运行远程桌面可能会起作用（但对我来说不起作用）：

```
mstsc -v:SERVERIP -admin 
```

# c# - TempData 无限期地保留在一个页面上，而不是另一个页面上

> ID：10193729
> 
> 赞同：0
> 
> 时间：2012-04-17T15:00:58.800
> 
> 标签：c#, asp.net-mvc, .net-4.0

我有一个名为的动作`Messages`，它有两种形式。

第一个表单发布到`SendMessage`，第二个发布到`MessagesDelete`。两个页面都返回`ReturnToAction`Messages 视图，并且都使用 TempData 来返回反馈数据（发送的消息、删除的消息等），表明一个动作已经发生。

`MessagesDelete`工作正常，第一次返回 TempData，然后在以后的请求中将其删除。`SendMessage`另一方面，无休止地保留 TempData。

这是一些简化的代码。

```
 [Authorize]
    public ActionResult Messages(int? id, string message)
    {
        MessagesModel model = new MessagesModel();
        // build model data here
        return View(model);
    }

    [Authorize]
    [HttpPost]
    public ActionResult MessagesDelete(int[] selectedObjects, int? id)
    {
        // delete objects
        TempData["MessagesDeleted"] = selectedObjects.Count() + " deleted";
        return RedirectToAction("Messages", new { id = id });
    }

    [Authorize]
    [HttpPost]
    public ActionResult SendMessage(SendMessageModel model)
    {
        // send my message
        TempData["MessageSent"] = "message sent!";
        return RedirectToAction(model.action, new { id = model.action_id } ); 
    } 
```

我能看到的唯一区别是`MessagesDelete`直接发送 id，而 SendMessage 将其作为模型中的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:15:47.787

看起来您正在尝试根据用户采取的操作向用户实施一次性消息。在这种情况下，我宁愿架构您的解决方案有点不同，而不是承担正在使用的头痛`TempData`和不可靠的问题。

这是我要做的：

1) 为所有希望显示一次性消息的 ViewModel 创建一个基本 ViewModel。

```
public class OneOffMessageViewModelBase
{
    public string Message { get; set; }
} 
```

2）然后，添加一个 OnResultExecutingFilter 以从会话中提取数据以存储在视图模型中（或者，将覆盖添加到您的基本控制器）：

```
public class AllowOneOffMessagingAttribute : ActionFilterAttribute
{
    protected override void OnResultExecuting(ResultExecutingContext filterContext)
    {
         base.OnResultExecuting(filterContext);

         var actionResult = filterContext.Result as ViewResult;

         if(actionResult != null)
         {
              var viewModel = actionResult.ViewData.Model as OneOffMessageViewModelBase;

              if(viewModel != null)
              {
                   if(Session["OneOffMessage"] != null)
                   {
                       viewModel.Message = Session["OneOffMessage"];
                       Session["OneOffMessage"] = null;
                   }
              }
         }
    }
} 
```

3）然后，您只需分配给该会话变量，您就可以放心，下一个视图（而不是部分视图）会将一次性消息分配给视图模型，然后数据将被删除。

# wpf - MenuItem 模板中的弹出窗口给出 IsOpen="False"

> ID：10193735
> 
> 赞同：1
> 
> 时间：2012-04-17T15:01:04.993
> 
> 标签：wpf, popup, menuitem, controltemplate

我通过以下标准过程检索 MenuItem 的 ControlTemplate：

```
var resource = FindResource(new ComponentResourceKey(typeof(MenuItem), "TopLevelHeaderTemplateKey"));
var settings = new XmlWriterSettings() { Indent = true };
var sb = new StringBuilder();
var writer = XmlWriter.Create(sb, settings);
XamlWriter.Save(resource, writer);
MyTextBox.Text = sb.ToString(); 
```

我想知道，为什么我总是在 ControlTemplate 的深处得到：

```
<Popup IsOpen="False" ... 
```

当工作版本是：

```
<Popup IsOpen="{TemplateBinding IsSubmenuOpen}" ... 
```

通过 Reflector ILSpy 找不到任何硬编码问题。那么为什么标准版本的 MenuItem 正在工作呢？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:36:49.910

I haven't checked it but perhaps it's because you're retrieving template at the run time. Data binding has already been applied to it.

I suggest using Expression Blend to get to the templates of your controls in design time. You'll have all the bindings that are defined there. Just right click on the control and find option like 'Template -> Edit Current'.

# java - 从 swing 使用 BasicTableUI 时，rendererPane 变为 null

> ID：10193736
> 
> 赞同：0
> 
> 时间：2012-04-17T15:01:06.317
> 
> 标签：java, swing, debugging, jtable, nullpointerexception

我正在使用 JTable，并且在更新它时随机出现空指针异常。当我将 Eclipse 设置为捕获所有空指针异常时，我很惊讶地看到 BasicTableUI.java（一个 Swing 类）中的 rendererPane 字段为空。以前有人处理过这个吗？我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T13:52:40.303

经典错误，我在 EDT 之外运行 Swing 代码，感谢您提醒我检查一下！

# c# - 通过不同列的代码重用来实现休眠组件映射

> ID：10193737
> 
> 赞同：0
> 
> 时间：2012-04-17T15:01:09.843
> 
> 标签：c#, nhibernate, nhibernate-mapping

我想在几个实体上重用一个 Period 类。它基于列名不一致的遗留模式。由于我想在多个场合重用这个时期类，我想我提供了多个映射及其对应的列名。但是我的计划没有奏效，因为 nhibernate 似乎只适用于每个实体的一个映射，即使它是一个组件。

有没有其他方法可以用不同的底层列名重用这个组件？

```
public class Period
{
    public virtual DateTime From {get;set;}
    public virtual DateTime To {get;set;}
}

public class PeriodMapping
{
    public static Action<IComponentMapper<Period>> ForPolicy()
    {
        return c =>
        {
            c.Property(p => p.From, map => map.Column("CommencementDate"));
            c.Property(p => p.To, map => map.Column("ReasonForEnding"));
        };
    }

    public static Action<IComponentMapper<Period>> ForPasswordOfUser()
    {
        return c =>
        {
            c.Property(p => p.From, map => map.Column("PasswordValidFrom"));
            c.Property(p => p.To, map => map.Column("PasswordValidUntil"));
        };
    }

    // several other mappings
}

public class PolicyMapping : ClassMapping<Policy>
{
    public VertragMapping()
    {
        Component(a => a.Period, PeriodMapping.ForPolicy());
    }
}

public class UserMapping : ClassMapping<User>
{
    public VertragMapping()
    {
        Component(a => a.Period, PeriodMapping.ForPasswordOfUser());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:42:57.377

你可以尝试这样做。

```
public class PeriodMapping
{
    public static Action<ComponentPart<Period>> ForPolicy()
    {
        return c =>
        {
            c.Map(p => p.From, "CommencementDate");
            c.Map(p => p.To, "ReasonForEnding");
        };
    }

    public static Action<ComponentPart<Period>> ForPasswordOfUser()
    {
        return c =>
        {
            c.Map(p => p.From, "PasswordValidFrom");
            c.Map(p => p.To, "PasswordValidUntil");
        };
    }

    // several other mappings
} 
```

# sencha-touch-2 - 在 Sencha touch 2 中使用路由

> ID：10193738
> 
> 赞同：2
> 
> 时间：2012-04-17T15:01:18.870
> 
> 标签：sencha-touch-2

我想在 secha touch 2 应用程序中使用路由。因此，如果任何人都可以就“如何在 sencha touch 2 中使用路线？”提供简单的示例，将会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:52:23.747

`routes`并且`control`，它们都定义了从组件**引用**到其**处理程序的映射**

如果您已经知道，`control`那么路线非常相似，但唯一的区别是它的参考部分。与`control`（使用 with `refs`，基于`Ext.ComponentQuery`选择器）不同，`routes`使用链接模式，例如：

```
routes: {
    'login': 'showLogin',
    'users/:id': 'showUserById'
} 
```

第一个路由将匹配[http://myapp.com/#login](http://myapp.com/#login)并调用 Controller 的`showLogin`函数。第二个路由包含一个通配符 (':id') 并将匹配所有 url，如[http://myapp.com/#users/123](http://myapp.com/#users/123)，以匹配的 ID 作为第一个参数调用该`showUserById`函数。

# image - 带有图像的 Href 在 IE 中不起作用

> ID：10193741
> 
> 赞同：2
> 
> 时间：2012-04-17T15:01:29.983
> 
> 标签：image, html, hyperlink, internet-explorer-9

没有列出类似问题的解决方案：[href 链接中的图像在 ie7 中不起作用](https://stackoverflow.com/q/2665663/1152457)

我的图片链接在 ie9 中无法使用，但在 Firefox 和 Chrome 中可以完美使用。我知道问题在于 ie 对嵌套 div 的处理方式。当我删除它时，链接有效，但我想让它标准化图像所在的框。

```
<a href='http://www.weflect.com/obj_photos.php?obj_name=Christopher+Nolan&obj_id=1000003100634240'>
   <div class='img_m2'>
      <img class='size_m2' alt='Christopher Nolan' src='http://s3.amazonaws.com/weflect-objects/1000003100634240-f741bdae22811aa18cb2b22eb395d404-35323-m2.jpg'/>
   </div>
</a> 
```

现场直播可以查看：[http ://www.weflect.com/object/Christopher+Nolan/1000003100634240//](http://www.weflect.com/object/Christopher+Nolan/1000003100634240//)

此外，通过在 div 中放置“a href”来交换顺序不是一种选择，因为我希望能够将不同的链接位置设置为同一个图像。我可以解决它以将链接 url 传递给 obj_img 函数，但宁愿不这样做。这个问题还有其他答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:53:16.130

```
 <div class='img_m2'>
<a href='http://www.weflect.com/obj_photos.php?obj_name=Christopher+Nolan&obj_id=1000003100634240'>
      <img class='size_m2' alt='Christopher Nolan' src='http://s3.amazonaws.com/weflect-objects/1000003100634240-f741bdae22811aa18cb2b22eb395d404-35323-m2.jpg'/>
</a>
   </div> 
```

# linux - 从 USB 串行设备读取二进制流

> ID：10193746
> 
> 赞同：2
> 
> 时间：2012-04-17T15:01:34.713
> 
> 标签：linux, serial-port, asterisk

我正在为具有单向音频问题的华为 e177 调制解调器开发[chan_dongle补丁。](http://code.google.com/p/asterisk-chan-dongle/)

出于调试目的，我决定编写一个外部测试用例来从调制解调器读取和写入音频，但是在安装调制解调器后我无法在任何串行文件中接收音频流。我使用 minicom 发出命令，我使用相关的 AT 命令接听来电，但没有字节流到达任何文件。我收到的唯一输出来自`/dev/ttyUSB0`.

我正在尝试使用以下方法捕获音频：

```
cat /dev/ttyUSB1 
```

我也尝试修改终端设置然后阅读

```
 stty -F /dev/ttyUSB1 115200 cs8 -cstopb -parenb -cooked min 1 time 0 
```

我在这里缺少任何额外的步骤吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:02:57.150

当使用 ATA 应答来电时，调制解调器需要知道应该将音频流发送到哪里，**AT^DDSETEX=**为我们完成了这项工作。

我错过了那部分。[在这里](http://caruizdiaz.com/?p=294)，我解释了我的问题的背景和解决方案。

谢谢你的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:10:09.537

Asterisk 会锁定 tty，所以你不能同时连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T04:36:13.477

如果您想从 Asterisk 捕获音频流，那么您将需要使用 EAGI 或 JACK。没有其他办法，因为星号需要完全控制“主”设备。否则，它会崩溃和燃烧（嗯，比有时更糟）。

# c# - 使用 DataReader 时，从性能角度来看，执行 SQL 语句还是存储过程更好？

> ID：10193747
> 
> 赞同：1
> 
> 时间：2012-04-17T15:01:44.317
> 
> 标签：c#, sql-server, performance, stored-procedures, ado.net

我需要从表中检索一些与给定匹配的字段`ID`。目前，我建立了一个sql语句

```
SELECT a, b, c 
FROM d 
WHERE id = @id 
```

然后使用`DataReader`.

我还可以编写一个采用`id`as 参数的存储过程。

**我想知道哪个对性能更友好。**

编辑：我正在使用参数化查询，编辑问题以反映这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:05:16.630

他们通常会表现得几乎相同。

请注意，如果非常频繁地调用它，可能会出现差异；每次发送时都必须解析 SQL 代码（但如果语句被识别为被缓存，则不必重新编译），而 SP 是预编译的，但这会导致索引选择不理想，因为统计信息不会重新在每次通话中进行评估。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T15:05:13.610

现代版本的 SQL Server 在性能方面几乎没有差异。动态构建 SQL 通常被认为是一种禁忌——你想使用[参数化 SQL](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)来避免 SQL 注入，但这和存储过程通常会提供相同的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:07:19.737

如果你使用prepared statements而不是通过连接字符串构建的sql语句，那么存储过程和prepared statement之间的性能没有区别。两者都在第一次运行时编译并缓存在 sql server 的查询计划中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T15:05:39.740

运行存储过程会更好，1）因为执行计划是提前编译并缓存的，2）您不会将数据库暴露于 sql 注入攻击。如果没有代码示例，就不可能说出您当前的操作方式，但我想您只是创建一个字符串并要求执行它，这将是一个**坏主意**。

# arrays - perl：计算数组中的唯一元素

> ID：10193750
> 
> 赞同：6
> 
> 时间：2012-04-17T15:01:59.283
> 
> 标签：arrays, perl, counting

我有一个包含名称的简单数组，我希望能够轻松打印出每个名称出现的次数。

我尝试制作大量的 for 循环和差异语句，以首先制作另一个具有唯一值的数组，然后尝试计算 orinal 数组中的值并将它们存储在第三个数组中。这似乎过于复杂，我想看看是否有更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-17T15:06:33.417

使用哈希计算每个名称出现的次数：

```
use warnings;
use strict;
use Data::Dumper;
$Data::Dumper::Sortkeys=1;

my @names = qw(bob mike joe bob);
my %counts;
$counts{$_}++ for @names;
print Dumper(\%counts);

__END__

$VAR1 = {
          'bob' => 2,
          'joe' => 1,
          'mike' => 1
        }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T17:05:10.777

```
my %counts;
++$counts{$_} for @names;
my @unique = keys(%counts); 
```

可以缩短为

```
my %counts;
my @unique = grep !$counts{$_}++, @names; 
```

前者失去了名称的顺序，而后者具有保留顺序的优点。（它保留第一个重复项。）

后者也是获取列表唯一成员的惯用方式。通常，计数只是一个副作用，但在这种情况下，它是一个理想的产品。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T15:07:50.050

最简单的方法是利用哈希。

```
my @names = qw/joe bob sue bob mike sally mike bob sally dale joe/;
my %counts;
$counts{$_}++ for @names; 
```

这会给你一个看起来像这样的哈希：

```
 'dale' => 1,
      'sue' => 1,
      'joe' => 2,
      'mike' => 2,
      'bob' => 3,
      'sally' => 2 
```

# python - 从嵌套函数的封闭范围访问变量

> ID：10193754
> 
> 赞同：1
> 
> 时间：2012-04-17T15:02:06.313
> 
> 标签：python, scope, closures

我`bar()`在另一个函数中嵌套了一个函数定义`foo()`。现在我正在尝试`foo()`从嵌套函数访问位于外部函数中的变量`bar()`。但是，由于范围规则，这不起作用（请参阅下面的错误回溯）。

我正在寻找类似于`global`关键字的东西，但是它只能让我访问*全局*变量，而这是某种*半全局*变量。

这是示例代码：

```
def foo():
    i = 0
    def bar():
        # how can I get access to the variable from enclosing scope?
        i += 1
    bar()

foo() 
```

输出是：

```
$ python test.py
Traceback (most recent call last):
  File "test.py", line 7, in <module>
    foo()
  File "test.py", line 5, in foo
    bar()
  File "test.py", line 4, in bar
    i += 1
UnboundLocalError: local variable 'i' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T15:06:06.650

您需要该`nonlocal`语句而不是`global`.

`i`显然不是全局的，但也不是局部的`foo`。它是本地的`__init__`。因此，为了访问它，声明它`nonlocal`。

不幸的是，`nonlocal`ist python3 而已。您可以通过闭包来模拟它，但这会变得非常难看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:07:47.353

这是您的解决方法：

```
class Test(object):
    def __init__(self):
        i = [0]
        def foo():
            i[0] += 1
        foo()
        print i[0]

t = Test() 
```

这将是`nonlocal`关键字的一个用例，而不是`global`但仅在 Python 3 中可用。

# c++ - 在 IStream 实现中保存 MAPI IMsgStore

> ID：10193757
> 
> 赞同：0
> 
> 时间：2012-04-17T15:02:11.113
> 
> 标签：c++, com, mapi, istorage

我正在尝试使用 IMAPISession 方法创建 pst 味精存储：

```
pses_->OpenMsgStore(0, prows->aRow[0].lpProps[1].Value.bin.cb, (LPENTRYID)prows->aRow[0].lpProps[1].Value.bin.lpb, NULL, MDB_WRITE | MAPI_DEFERRED_ERRORS | MAPI_BEST_ACCESS | MDB_NO_MAIL, &tmpPtr); 
```

它使用 prows 中提供的 PR_PST_PATH 属性。

但现在我需要在内存中打开 pst 文件，即使用 IStream 内存流实现。有人试图做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:32:15.007

你不能这样做。不仅如此，您甚至无法打开设置了只读位或在只读媒体上的 PST 文件。

# api - 如何使大头针与 Google Maps API v3 中形状的坐标相对应

> ID：10193759
> 
> 赞同：2
> 
> 时间：2012-04-17T15:02:21.453
> 
> 标签：api, maps

我想要一些图钉，然后是地图上的一个矩形。所有的引脚都应该在矩形的边界内。我知道大头针的坐标，以及矩形的 SW 和 NE。

我的问题是：图钉仅在真正放大地图时才开始出现在矩形中，而当地图缩小时，图钉就会出现在矩形中。这真的很奇怪，因为坐标不会改变。我究竟做错了什么？

# c# - 如何在 C# 中使用 iTextsharp 5.2.0 版在 pdf 的所有页面中添加页眉和页脚

> ID：10193761
> 
> 赞同：2
> 
> 时间：2012-04-17T15:02:24.377
> 
> 标签：c#, asp.net, pdf-generation, itextsharp

我正在使用 itextsharp 创建一个 pdf 文件。我想为 pdf 文档中的每一页添加页眉和页脚。谁能告诉我我该怎么做？

我正在使用 itext 5.2.0 在此，我无法找到使用 HeadeFooter 类的选项，该类在早期版本中可用。

提前致谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-10T06:06:39.337

请使用此代码。

```
public partial class Footer : PdfPageEventHelper
{
    public override void OnEndPage(PdfWriter writer, Document doc)
    {
       Paragraph footer= new Paragraph("THANK YOU", FontFactory.GetFont(FontFactory.TIMES, 10, iTextSharp.text.Font.NORMAL));
       footer.Alignment = Element.ALIGN_RIGHT;
       PdfPTable footerTbl = new PdfPTable(1);
       footerTbl.TotalWidth = 300;
       footerTbl.HorizontalAlignment = Element.ALIGN_CENTER;

       PdfPCell cell = new PdfPCell(footer);
       cell.Border = 0;
       cell.PaddingLeft = 10;

       footerTbl.AddCell(cell);
       footerTbl.WriteSelectedRows(0, -1, 415, 30, writer.DirectContent);
    }
} 
```

请查看我的博客了解更多详情 [http://gopalkaroli.blogspot.in/2011/11/how-to-add-header-and-footer-on-pdf.html](http://gopalkaroli.blogspot.in/2011/11/how-to-add-header-and-footer-on-pdf.html)

[https://gopalkaroli.wordpress.com/2011/11/12/how-to-add-header-and-footer-on-pdf-file-using-itextsharp-5-1/](https://gopalkaroli.wordpress.com/2011/11/12/how-to-add-header-and-footer-on-pdf-file-using-itextsharp-5-1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T17:17:01.927

对于 iTextSharp 版本 5+，已删除页眉/页脚属性。现在这可以由我们的`PageEventHandler`班级来完成。虽然现在还不是很先进，但好处是现在您可以添加更多内容，而不仅仅是在页眉和页脚中添加计划文本。[请检查此链接](http://www.mazsoft.com/blog/post/2008/04/30/Code-sample-for-using-iTextSharp-PDF-library.aspx)以了解 iTextSharp 中页眉/页脚等的完整锻炼。

# php - PHP JSON 到 JavaScript 数组

> ID：10193770
> 
> 赞同：1
> 
> 时间：2012-04-17T15:02:59.717
> 
> 标签：php, javascript, json

有没有什么好方法可以将 PHP 数组作为 JS 数组传递给我的 JavaScript？

如果有这个 PHP 数组：

```
array('XYZ' => 1, 'ABC' => 2); 
```

我需要在我的javascript中打印出一些图

```
var myData = [['XYZ', 1], ['ABC', 2]]; 
```

**问题：**

如果我做 console.log(); 我得到一个对象而不是数组？

我想我必须在应用程序的 JavaScript 部分解析 JSON，还是？是否有任何 JQuery 插件来转换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:41:19.703

如果您想要一个数组作为 json_encode 的结果，则必须将其呈现为非关联数组。

尝试这样的事情：

```
<?php 
$a=array('XYZ' => 1, 'ABC' => 2);
$r=array();
foreach ($a as $k=>$v)
{
   $r[]=array($k, $v);
}
echo json_encode($r); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:04:49.787

如果你这样做`echo json_encode($myArray);`，它会回显：

```
 {
       "XYZ": "1",
       "ABC": "2"
    } 
```

您可以在 js 中使用：

在您的 php 页面上，您可以执行以下操作：

```
<script>

   var myJson = <?php echo json_encode($myArray) ?>;

   console.log(myJson);

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:05:36.043

您可以`json_encode(array)`在 php 端使用将 php 数组转换为 json。然后你可以直接把它赋值给一个js变量比如var`jsarray = jsonencodedphparray`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T15:06:18.753

Jquery 内置了它。

在 PHP 中 - 以 json 格式回显响应 echo json_encode(arr);

在 javascript - 将 json 解析为一个对象 var obj = $.parseJSON(response)

# actionscript-3 - AS3 文本字段，截断

> ID：10193772
> 
> 赞同：0
> 
> 时间：2012-04-17T15:03:00.257
> 
> 标签：actionscript-3

我有一个文本字段，可以动态调整其宽度以适应屏幕。如果不合适，我希望将文本截断并附加“...”。但是我怎么知道文本值是否比可用的文本字段宽度长？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T00:16:19.610

嘿，简单点怎么样 :-)

```
while ( textfield.numLines > MAX ) 
    textfield.text = textfield.text.slice(0, -4) + "..."; 
```

享受！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T17:53:45.407

我需要这个完全相同的功能，我所做的是每当触发调整大小事件导致`TextField`需要调整对象大小时，我执行一个小循环，如下所示：

```
tfMessage.text = message;

if(tfMessage.width > maximumWidth)
{
    tfMessage.appendText("...");

    while(tfMessage.width > maximumWidth)
    {
        tfMessage.text = tfMessage.text.substr(0, -4) + "...";
    }
} 
```

确保`TextField`对象的`autoSize`属性设置为`TextFieldAutoSize.LEFT`使对象在您更新文本时自动调整大小。`TextFieldAutoSize`您可以在枚举中使用其他值，但`LEFT`最适合我。使用示例：

```
tfMessage.autoSize = TextFieldAutoSize.LEFT; 
```

这可能看起来有点矫枉过正，但它是您最好、最干净的选择。此外，我使用它可以很好地调整数百个`TextField`对象的大小，而不会在普通计算机上降低性能。给 Flash 一些信任哈哈，他们在 AVM2 调整和优化方面做得很好。

无论如何，我希望这会有所帮助，非常适合我。祝你的项目好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T15:18:18.830

`yourTextField.textWidth`为您提供 TextField 文本的长度。只需确保首先设置 TextField 的 autosize 属性，以真正获取文本的宽度，而不是 TextField 的宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T16:39:02.597

好的，经过一番绞尽脑汁，我想如何让字符串在 textField 中裁剪，然后在新的 MC 中简单地添加一个额外的“...”并将其可见性设置为 false。当 textField.textWidth >= textField.width 时，它使“...” MC 可见并将其定位在 textField 的末尾。这可能在文本字段的内部或外部。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T15:21:53.477

可能唯一的方法是如果 textWidth 比宽度长，则逐个字母地循环遍历文本，一次添加或删除一个字母，然后添加省略号并检查宽度，直到它接近填充整个文本域。

# c++ - d3d 11 是否向后兼容 d3d10 和 d3d9？

> ID：10193774
> 
> 赞同：2
> 
> 时间：2012-04-17T15:03:02.963
> 
> 标签：c++, directx, directx-11

我提交了一个实际上是一堆问题的问题，所以我按照要求将它们分成了自己的单独问题。

只是一个关于direct3D 的一般性问题，如果我要使用hlsl 5.0 着色器完全在d3d11 中编写应用程序，这些是否仍仅与支持d3d10 或d3d9 的系统兼容，只是图形效果较差且d3d11 的效率较低？如果是这样，它的效率会降低多少？如果不是，除了使用 d3d9、d3d10 和 d3d11 之外，我是否真的需要制作完全相同的程序的 2 或 3 个不同版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:15:09.010

它在一定程度上向后兼容。但是，有几件事要记住：

*   DX11只能安装在Vista+上，这样就排除了那些出于宗教原因还坐在XP上的人（我个人认为这很愚蠢，但这只是你必须注意的事实）
*   DX11 的杀手级功能（硬件镶嵌）仅在兼容 DX11 的硬件上可用。相信我——你真的很难不使用它，因为它给了你很多可能性。这可以通过使用几何着色器得到一定程度的补偿，但是......请参阅下一点
*   几何着色器仅在 DX10.0 级硬件（或更好）上可用。所以 DX9 级硬件不适合......再次......
*   计算着色器在 DX10.0+ 级硬件上有些可用（尽管非常有限），但在早期硬件上完全不可用。

总而言之，如果您的目标平台是 DX10.0+ 级硬件，则使用 DX11 在某种程度上是有意义的（因为除了硬件细分之外，差异是可以容忍的和/或缺少功能的解决方法）。如果您想支持 DX9 HW，我建议您坚持使用 DX9 SDK，因为这将允许您在 XP 上运行您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T15:43:08.387

我不相信之前的评论是完全准确的。

您可能需要在目标机器上安装 DX11 运行时，但您应该能够在任何与 DX9+ 硬件兼容的卡上创建 D3D11Device。

但这并不能真正让您受益，因为您需要传入您支持的功能级别列表（或 NULL 表示列表），并且该函数有一个输出参数告诉您您获得了什么功能级别。因此，只有 DX9 的卡会返回 D3D_FEATURE_LEVEL_9_1（或 9_2/9_3）。

反过来，功能级别让您知道您可以使用哪些 d3d11 块以及它的行为方式（[http://msdn.microsoft.com/en-us/library/windows/desktop/ff476150(v=vs.85) .aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476150(v=vs.85).aspx)和[http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876(v=vs.85).aspx) )

从这些图表中快速得出的结论是，DX11 可能适用于覆盖 DX10 和 DX11 设备。DX9 /取决于/如果你想要/需要这些功能也可以。

计算着色器主要在 DX10 硬件上工作 (http://msdn.microsoft.com/en-us/library/windows/desktop/ff476873(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:28:08.230

不，它不向后兼容。如果你想在更多平台上运行，支持directX11的显卡肯定支持directx9。所以要么在 DX9 中开发一次，要么在 DX11 和 DX9 中同时开发。

# ocaml - OCamlbuild 和 camlp4.macro

> ID：10193775
> 
> 赞同：2
> 
> 时间：2012-04-17T15:03:08.370
> 
> 标签：ocaml, ocamlbuild, camlp4

我有一个项目，其中几个 OCaml 源文件使用 IFDEF。有没有一种简单的方法告诉 OCamlbuild 这个项目的所有 .ml 文件都应该由 camlp4.macro 预处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:32:40.823

在项目的根目录下，您可以创建一个`_tag`文件，其中包含：

```
true: camlp4of 
```

在这里，`f`后缀的意思是“完整的camlp4”，即`camlp4o`所有标准扩展（解析器、语法、引用、宏和列表理解）。有关详细信息，请参阅[手册](http://brion.inria.fr/gallium/index.php/Using_Camlp4)。

# c - ANSI C - 清除字符串

> ID：10193777
> 
> 赞同：2
> 
> 时间：2012-04-17T15:03:09.383
> 
> 标签：c, ansi

我有一个这样声明的字符串：

```
str=malloc(sizeof(char)*128); 
```

我想完全清除它，以便在我进行`strncat()`操作时，新字符将写入`str`. 我需要清除它的原因是我正在用它本身的简化版本（删除多余的空格）来写它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T15:08:00.237

我建议你简单地这样做：

```
*str = '\0'; 
```

您不需要清除缓冲区的全部内容。您可以将第一个`char`设置为零，然后您将获得空字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T15:05:13.333

使用[`memset`](http://www.cplusplus.com/reference/clibrary/cstring/memset/)：

```
memset(str, 0, sizeof(char)*128); 
```

无论如何，如果您将字符串写入自身，则不应使用`strcat`- 您复制的对象不得重叠：

> [如果复制发生在重叠的对象之间，则行为未定义。](http://pubs.opengroup.org/onlinepubs/007904875/functions/strcat.html)

并且字符串肯定会与自身重叠。

使用一个简单的函数可以轻松地从字符串中删除空格：

```
void remove_space(char* r) {
    char *w = r;
    do { *w = *r++; w += *w && !isspace(*w); } while (*w);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T15:04:55.677

您想使用[calloc](http://www.cplusplus.com/reference/clibrary/cstdlib/calloc/)而不是 plain `malloc`？

就像是

```
calloc(128, sizeof(char)); 
```

**编辑**另外，`strncat`不需要你在目的地有一个空终止的字符串。只需确保目标足够大以容纳连接的结果字符串，包括额外的空字符。

正如[dasblinkenlight 所](https://stackoverflow.com/users/335858/dasblinkenlight)指出的，不要与`strncat`. 考虑使用正常`dst[i++] = src[j++]`的复制方式。

# java - Android post请求转义字符

> ID：10193782
> 
> 赞同：3
> 
> 时间：2012-04-17T15:03:35.367
> 
> 标签：java, android, http, escaping, character

如何转义字符串中的字符“ü”。

我的 json 数据中有这个字符：

```
{"Name": "Hyüsin"} 
```

当我在我的 android 中向 webServer 执行 HttpPost 时。它给了我一个“错误请求”错误作为响应。

HttpPost 代码：

```
 // uploads the data
public class UploadData extends AsyncTask<String, Integer, Boolean> {

        @Override
        protected Boolean doInBackground(String... url) {

            try {

                HttpPost request = new HttpPost(LogInActivity.SERVICE_URI + url[0]);

                request.setHeader("Content-type", "application/json; charset=utf-8");

                //THIS IS  {"Name": "Hyüsin"}               
                JSONObject jsonTaakkaart = taakkaart.serializeToObj();

                StringEntity entity = new StringEntity(jsonTaakkaart .toString());
                request.setEntity(entity);

                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpResponse response = httpClient.execute(request);

                return true;

            } catch (Exception e) {
                e.printStackTrace();
                return false;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:09:04.683

采用：

```
StringEntity entity = new StringEntity(jsonTaakkaart.toString(), "UTF-8"); 
```

指定编码为 UTF-8。

# c# - 由于以下错误，接收检索具有 CLSID {} 的组件的 COM 类工厂失败：80040154。运行测试类清理时

> ID：10193784
> 
> 赞同：3
> 
> 时间：2012-04-17T15:03:42.263
> 
> 标签：c#, unit-testing, sharepoint, sharepoint-2010, code-cleanup

我的测试解决方案有问题。测试运行良好，但是当涉及到在测试运行后进行清理的类和方法时，基本上是删除共享点组、站点和数据库索引条目，因为我正在为 SQL 数据库上的站点和组编制索引。如果我从主程序运行清洁方法，一切都会好起来的。当我从 ClassCleanup 调用方法时，问题就开始了：

```
 [ClassCleanup()]
    public static void MyClassCleanup()
    {
        DelSphere.delGroups(SPHEREID);
        DelSphere.delSites(SPHEREID);
    } 
```

这些方法一直执行到委托：

```
 public static void delGroups(long sphereId)
    {

        using (SupportDB DB = new SupportDB())
        {
            var gruppi = (from grp in DB.Gruppo where grp.Sfera.PK_Sfera == sphereId select grp).ToList();
            var id = (from sphere in DB.Sfera where sphere.PK_Sfera == sphereId select sphere).ToList();

            var SC = GetSCfromSphere(id.First().PK_Sfera);
            try
            {
            Microsoft.SharePoint.SPSecurity.RunWithElevatedPrivileges(delegate()
                {
                    using (SPSite scSite = new SPSite(SC.SiteCollectionUrl))
                    {
                        foreach (var grp in gruppi) ..... 
```

此时我得到一个例外：

```
 Retrieving the COM class factory for component with CLSID {BDEADF26-C265-11D0-BCED-00A0C90AB50F} failed due to the following error: 80040154. 
```

当单独调用该方法时，该方法可以完美运行，唯一的问题是清理方法何时进行调用。

谢谢你。

ps 该项目在带有 SP 2010 的 win 2008 上 cpu 设置为 ANY 的框架 3.5 上运行。

[我按照从http://msdn.microsoft.com/en-us/library/ee782531.aspx](http://msdn.microsoft.com/en-us/library/ee782531.aspx)将 cpu 执行模式更改为 x64 的说明进行操作，但仍然无法运行任何东西。

`Error loading C:\Users\Administrator\Documents\WSTests\WSTests\bin\Debug\WSTests.dll: Unable to load the test container 'C:\Users\Administrator\Documents\WSTests\WSTests\bin\Debug\WSTests.dll' or one of its dependencies. If you build your test project assembly as a 64 bit assembly, it cannot be loaded. When you build your test project assembly, select "Any CPU" for the platform. To run your tests in 64 bit mode on a 64 bit processor, you must change your test settings in the Hosts tab to run your tests in a 32 bit process. Error details: Could not load file or assembly 'file:///C:\Users\Administrator\Documents\WSTests\WSTests\bin\Debug\WSTests.dll' or one of its dependencies. An attempt was made to load a program with an incorrect format.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:52:07.050

将 CPU 设置为 x64，然后重试。

# linux - 更改 crontab 文件后重新启动 cron？

> ID：10193788
> 
> 赞同：524
> 
> 时间：2012-04-17T15:03:57.083
> 
> 标签：linux, unix, cron, cron-task

更改 crontable 文件后是否必须重新启动 cron？

* * *

## 回答 #1

> 赞同：741
> 
> 时间：2012-04-17T15:12:36.620

不。

从[cron 手册页](http://www.manpagez.com/man/8/cron/)：

> ...cron 然后将检查所有 crontab 上的修改时间并重新加载已更改的那些。因此，只要修改了 crontab 文件，就不需要重新启动 cron

但如果你只是想确保它已经完成，

```
sudo service cron reload 
```

或者

```
/etc/init.d/cron reload 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-10-09T11:28:56.870

在带有 cPanel`sudo /etc/init.d/crond reload`的 CentOS 上就可以了。

在 CentOS7 上：`sudo systemctl start crond.service`

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-10-01T15:14:44.450

我在 16.04 VPS Digital Ocean 上遇到了类似的问题。如果要更改 crontabs，请确保运行

```
sudo service cron restart 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-06-10T09:32:29.873

根据分布，使用“cron reload”可能什么都不做。从 init.d/cron 中粘贴一个片段（debian 挤压）：

```
reload|force-reload) log_daemon_msg "Reloading configuration files for periodic command scheduler" "cron"
    # cron reloads automatically
    log_end_msg 0
    ;; 
```

一些开发人员/维护人员依赖它重新加载，但没有，在这种情况下，没有办法强制重新加载。我正在生成我的 crontab 文件作为部署的一部分，除非文件的长度以某种方式发生更改，否则不会重新加载更改。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-02-13T08:15:59.790

在 centos 7 上试试这个：service crond reload

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2021-03-30T05:55:28.133

# 适用于 RHEL/Fedora/CentOS/Scientific Linux 用户的命令

1.  启动cron服务

    *   要启动 cron 服务，请使用：`/etc/init.d/crond start`

    *   或 RHEL/CentOS 5.x/6.x 用户：`service crond start`

    *   或 RHEL/Centos Linux 7.x 用户：`systemctl start crond.service`

2.  停止 cron 服务

    *   要停止 cron 服务，请使用：`/etc/init.d/crond stop`

    *   或 RHEL/CentOS 5.x/6.x 用户：`service crond stop`

    *   或 RHEL/Centos Linux 7.x 用户：`systemctl stop crond.service`

3.  重启cron服务

    *   要重新启动 cron 服务，请使用：`/etc/init.d/crond restart`

    *   或 RHEL/CentOS 5.x/6.x 用户：`service crond restart`

    *   或 RHEL/Centos Linux 7.x 用户：`systemctl restart crond.service`

# 基于 Ubuntu/Mint/Debian 的 Linux 发行版的命令

1.  Debian 启动 cron 服务

    *   要启动 cron 服务，请使用：`/etc/init.d/cron start`

    *   或者`sudo /etc/init.d/cron start`

    *   或者`sudo service cron start`

2.  Debian 停止 cron 服务

    *   要停止 cron 服务，请使用：`/etc/init.d/cron stop`

    *   或者`sudo /etc/init.d/cron stop`

    *   或者`sudo service cron stop`

3.  Debian 重启 cron 服务

    *   要重新启动 cron 服务，请使用：`/etc/init.d/cron restart`

    *   或者`sudo /etc/init.d/cron restart`

    *   或者`sudo service cron restart`

来源：[https ://www.cyberciti.biz/faq/howto-linux-unix-start-restart-cron/](https://www.cyberciti.biz/faq/howto-linux-unix-start-restart-cron/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-10-09T18:41:53.820

试试这个：`sudo cron reload` 它适用于 ubuntu 12.10

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-01-26T12:53:09.203

试试这个：`service crond restart`，因此它`crond`不是`cron`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-26T01:56:27.547

在某些情况下，需要重新启动 cron 才能使启动脚本正常工作。重新启动 cron 没有任何问题。

sudo 服务 cron 重启

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-01-16T19:01:32.083

1) 如果`/var/spool/cron/crontabs/root`通过 SFTP 客户端编辑文件 - 需要`service cron restart`。重新加载服务不起作用。

2) 如果`/var/spool/cron/crontabs/root`通过控制台 linux (nano, mc) 编辑文件 - 不需要重新启动。

3）如果通过编辑cron `crontab -e`- 重新启动不需要。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-27T06:08:30.863

Ubuntu 18.04 * 用法：/etc/init.d/cron {start|stop|status|restart|reload|force-reload}

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-24T08:49:44.597

在 CentOS（我的版本是 6.5）上编辑 crontab 时，您必须关闭编辑器以反映您在 CRON 中的更改。

```
crontab -e 
```

在该命令之后，您可以看到新条目出现在 /var/log/cron

```
Sep 24 10:44:26 ***** crontab[17216]: (*****) BEGIN EDIT (*****) 
```

但是仅在进行一些更改后保存 crontab 编辑器是行不通的。您必须离开编辑器以反映 cron 中的更改。退出后新条目出现在日志中：

```
Sep 24 10:47:58 ***** crontab[17216]: (*****) END EDIT (*****) 
```

从此时起，您所做的更改对 CRON 可见。

# dojo - 将图标添加到 dojo 数据网格

> ID：10193801
> 
> 赞同：0
> 
> 时间：2012-04-17T15:04:36.630
> 
> 标签：dojo, dojox.grid.datagrid

我想在 dojox 数据网格的列中设置一个图标。我可以像在道场树中那样设置类图标吗：`dijit/Tree` `getIconClass`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:22:14.907

也许您应该尝试格式化程序

```
<script>
    function imgFormatter(s) {
        return '<img src="' + s + '"/>';
    }
</script>
 <table data-dojo-type="dojox.grid.DataGrid">
     <thead>
         <tr>
              <th field="col" formatter="imgFormatter"></th>
         </tr>
     </thead>
 </table> 
```

# facebook-graph-api - facebook messgaes 获取发件人姓名

> ID：10193805
> 
> 赞同：0
> 
> 时间：2012-04-17T15:04:59.100
> 
> 标签：facebook-graph-api, facebook-fql, facebook-php-sdk

我正在使用 facebook fql 获取用户邮箱。

以下查询返回所有值。

```
SELECT message_id, thread_id, author_id, body, created_time, attachment, 
viewer_id FROM message WHERE thread_id = <thread_id> 
```

我想获取 auther_name 和 viewer_name。

现在我正在使用这个技巧从 ID 中获取名称，但它非常慢，因为首先我必须获取消息，然后解析响应以获取名称。

```
function getName($id) 
{ 
$facebookUrl = "https://graph.facebook.com/".$id; 
$str = file_get_contents($facebookUrl); 
$result = json_decode($str); 
return $result->name; 
} 
```

请帮助我在使用 FQL 获取消息时如何获取名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:15:46.573

使用 fql 多查询：[https ://developers.facebook.com/docs/reference/rest/fql.multiquery/](https://developers.facebook.com/docs/reference/rest/fql.multiquery/)

```
$queries = array(
    'messages' => 'SELECT message_id, thread_id, author_id, body, created_time, attachment, viewer_id FROM message WHERE thread_id = <thread_id>',
    'users' => 'SELECT name FROM profile WHERE id IN (SELECT author_id FROM #messages)',
);

$param = array(
    'method'   => 'fql.multiquery',
    'queries'  => json_encode($queries),
    'callback' => ''
);

try {
    $fqlresult = $facebook->api($param);
} catch (FacebookApiException $e) {
    echo "EXCEPTION {$e->getMessage()}\n";
} 
```

# iphone - 路径应用程序本机目标c？

> ID：10193809
> 
> 赞同：-2
> 
> 时间：2012-04-17T15:05:13.630
> 
> 标签：iphone, objective-c, ios

对 iphone dev 来说相对较新，但我对应用程序 Path 很感兴趣。它是一个社交网络应用程序，但它的创建非常精美。这是本机目标c吗？还是它使用 js 框架，例如 Cappuccino？UI 感觉很像 html5。

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:08:01.337

从截图来看，在 Objective-C 和 Cocoa Touch 中绝对可以做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:20:57.803

很多人都试图复制外观和感觉，许多人在 github 上创建了开源项目，例如[DDMenuController](https://github.com/devindoty/DDMenuController)。

另外，查看[cocoacontrols.com](http://cocoacontrols.com/)，它是 iOS 开源控件的一个很好的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:12:46.350

估计是原生的 动画和一般的响应对于网络应用来说太流畅了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T15:20:21.457

非常原生，还有一些低级的部分要引导。您无法从 HTML 5 UI 中获得当前那样的性能。

[http://www.quora.com/Was-the-2-0-iOS-version-of-Path-written-entirely-in-native-code](http://www.quora.com/Was-the-2-0-iOS-version-of-Path-written-entirely-in-native-code)

伟大没有捷径。

# html - “在这种情况下，元素侧边栏不允许作为元素主体的子项。”

> ID：10193812
> 
> 赞同：4
> 
> 时间：2012-04-17T15:05:14.693
> 
> 标签：html, validation, sidebar

我不太确定为什么会出现这个问题，或者它是否真的是一个问题。有任何想法吗？ *第 33 行，第 10 列：在此上下文中，元素侧边栏不允许作为元素主体的子项。*

```
<body>
<header>
    <a id="logo" href="#"><img src="img/logo.png"></a>
    <nav>
        <ul>
            <li><a href="#">BLOG</a></li>
            <li><a href="#">WORK</a></li>
            <li><a href="#">ABOUT</a></li>
            <li><a href="#">CONTACT</a></li> 
        </ul>
    </nav>
</header>

<div id="container">
    <div id="headline">
        <h1>Headline</h1>
    </div><!-- end headline -->
    <div id="postinfo">
        <p>by me<br />15 April 2012</p>
    </div><!-- end postinfo -->
    <div id="postentry">
        One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin. He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections. The bedding was hardly able to cover it and seemed ready to slide off any moment. His many legs, pitifully thin compared with the size of the rest of him, waved about helplessly as he looked. "What's happened to me? " he thought. It wasn't a dream.
    </div><!-- end postentry -->
</div><!-- end container -->

<sidebar> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T00:08:03.163

HTML5 中没有元素`<sidebar>`——它在几年前的早期草案中被删除了。考虑`<aside>`改用。

# image-processing - Tesseract 是否忽略扫描文档中的任何非文本区域？

> ID：10193816
> 
> 赞同：2
> 
> 时间：2012-04-17T15:05:31.293
> 
> 标签：image-processing, ocr, tesseract, text-extraction

我正在使用 Tesseract，但我不知道它是否忽略了任何非文本区域并仅针对文本。我是否必须删除任何非文本区域作为预处理步骤以获得更好的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:10:34.713

Tesseract 有一个非常好的算法来检测文本，但它最终会给出误报匹配。

理想情况下，您会在将图像提交给 tesseract 之前对其进行预处理。前段时间我搞了一个类似的任务，所以建议你看看下面的资料：

*   [OpenCV C++/Obj-C：检测一张纸/正方形检测](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection/8863060#8863060)

*   [执行 cv::warpPerspective 以在一组 cv::Point 上进行假偏斜](https://stackoverflow.com/questions/7838487/executing-cvwarpperspective-for-a-fake-deskewing-on-a-set-of-cvpoint)

*   [使用 cv::warpAffine 旋转 cv::Mat 偏移目标图像](https://stackoverflow.com/questions/7813376/rotate-cvmat-using-cvwarpaffine-offsets-destination-image)

*   [仿射变换、简单旋转和缩放或其他完全？](https://stackoverflow.com/questions/7800905/affine-transform-simple-rotation-and-scaling-or-something-else-entirely)

# c# - 如何将 FontFamily 绑定到 Silverlight 中的自定义字体

> ID：10193819
> 
> 赞同：0
> 
> 时间：2012-04-17T15:05:41.243
> 
> 标签：c#, silverlight, data-binding, mvvm, fonts

我正在开发一个将用作图像创建者/编辑器的 Silverlight 4 应用程序。用户会看到一个空白画布，他可以在其中添加图层中的图像和文本（类似于 Photoshop），然后将其全部展平并保存生成的图像。

当用户添加文本时，他需要能够更改字体，例如 Arial、Chiller 等。我创建了一个字体选择器，它由一个组合框组成，其中填充了代表每种 Silverlight 默认字体的 TextBlocks。

```
<ComboBox x:Name="fontBox" ItemsSource="{Binding}" Grid.Row="0">
   <ComboBox.ItemTemplate>
      <DataTemplate>
         <TextBlock Text="{Binding=?}" FontFamily="{Binding=?}" />
      </DataTemplate>
   </ComboBox.ItemTemplate>
</ComboBox> 
```

我的问题是我需要使用自定义字体来填充组合框，并且因为我使用的是 MVVM 设计模式，所以这一切都必须在代码中完成。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:19:35.653

也许你可以使用转换器

FontFamily="{绑定 SomeProperty, Converter={StaticResource FontConverter}}"

然后创建一个将返回 FontFamily 的转换器

# windows-phone-7 - Windows Phone 7.x 上是否有可用的计算机视觉库？

> ID：10193820
> 
> 赞同：1
> 
> 时间：2012-04-17T15:05:42.120
> 
> 标签：windows-phone-7, computer-vision

通常[不允许](http://blogs.msdn.com/b/abhinaba/archive/2010/03/13/windows-phone-7-series-programming-model.aspx)在 Windows Phone 上安装和使用非托管应用程序和/或库。

即使有[针对 ARM 的 OpenCV](http://processors.wiki.ti.com/index.php/Building_OpenCV_for_ARM_Cortex-A8)构建，是否有努力构建一个计算机视觉库以在 Microsoft 提供的托管环境下运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:14:15.603

您可以试用 Silverlight 增强现实工具包：

[http://slartoolkit.codeplex.com/](http://slartoolkit.codeplex.com/)

这适用于 WP7。

# c# - 您如何利用 Browser.Exists？

> ID：10193822
> 
> 赞同：0
> 
> 时间：2012-04-17T15:05:44.817
> 
> 标签：c#, watin

我一直在编写 WatiN 测试，我想开始为我的所有测试使用相同的浏览器实例，但如果需要，我仍然希望能够单独运行一个测试。因此，我想做一个条件语句，基本上说，如果那里已经有一个浏览器实例指向正确的 URl，那么使用它，如果没有创建一个新实例。问题是我似乎无法让 Browser.Exists 正常工作。理想情况下，我想要这样的东西：

```
if(Browser.Exists(Find.ByURL("www.mysite.com")) == true)
{
         var Window = IE.AttachTo<IE>(Find.ByUrl("www.mysite.com"));
}
else
{
         IE Window = new IE("http://svrp00008cde/cas/default.aspx");
} 
```

但是，我无法弄清楚正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:22:06.250

经过大约一个小时的折腾，我终于找到了解决方案。那里有一些答案，包括来自 WatiN 制造商本人的一个答案，似乎让我走错了路。我相信这可能是因为实施已经改变并且答案从未更新。不管怎样，我就是这样做的：

```
public static IE CheckForBrowser()
        {
            IE Window;

            if (Browser.Exists<IE>(Find.ByTitle("My Site!")) == true)
            {
                Window = IE.AttachTo<IE>(Find.ByUrl("http://www.mysite.com"));
            }
            else
            {
                Window = new IE("http://www.mysite.com");
            }

            return Window;
        } 
```

每次初始化 IE 的新实例时，我都会创建一个调用方法。此方法查看是否以我提供的标题打开了一个窗口，如果它是使用该标题而不是打开一个新的浏览器实例。否则，它会打开一个实例并从那里运行我的测试。

# linux - nohup 错误没有这样的文件或目录

> ID：10193824
> 
> 赞同：8
> 
> 时间：2012-04-17T15:05:56.180
> 
> 标签：linux, shell, unix, nohup

我正在尝试运行一串`nohup`命令来获取服务器统计信息。但是我收到一个错误*'No such file or directory'*。请注意，这 3 个`nohup`调用嵌入在通过`cron`作业执行的脚本中。第一个`nohup`有效，但其他两个返回错误。具有讽刺意味的是，当在不同的服务器上运行时，脚本运行良好。

*   命令

    ```
    nohup vmpstat -a -n 60 1000 > myvmstats 
    ```

*   （作品）

    ```
    nohup mpstat -P ALL 1 1000 > mympstats 
    ```

*   （返回：nohup 无法运行命令`mpstat`：没有这样的文件或目录）

    ```
    nohup iostat -t -x 60 1000 >myiostats 
    ```

*   （返回：nohup 无法运行命令`iostat`：没有这样的文件或目录）

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T05:38:22.140

我认为您应该给出程序的相对/绝对路径

例如：

`nohup ./****.sh > /home/user/test.txt`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:50:51.877

从命令行运行而不是在运行时运行的脚本的常见问题`cron`是“环境”。关于 SO 有很多问题可以举例说明，包括：

*   [Perl 脚本有效，但通过 cron 时无效](https://stackoverflow.com/questions/4341324/perl-script-works-but-not-via-cron/4341351#4341351)
*   [为什么我的命令行不能从 cron 运行？](https://stackoverflow.com/questions/780072/why-does-my-command-line-not-run-from-cron/780091#780091)
*   [Bash 脚本未在 cron 中正确执行](https://stackoverflow.com/questions/8812425/bash-script-not-executing-in-cron-correctly/8812493#8812493)
*   [如何设置 crontab 将使用的环境变量？](https://stackoverflow.com/questions/2229825/where-can-i-set-environment-variables-that-crontab-will-use)

出于调试目的，将命令/行添加到 cron-run 脚本中：

```
env > /tmp/cron.job 
```

检查那里的 PATH 是否包含您期望的内容，特别是它是否包含安装三个程序的目录（目录）。并检查您是否从命令行运行了您期望的程序：

```
which vmpstat mpstat iostat 
```

合理的猜测是，当您的脚本由`cron`. 并`cron`为您提供一个极简的环境；在这方面完全不同`at`。

也可以看看：

*   [crontab 和测试要执行的命令](https://stackoverflow.com/questions/6028683/crontab-and-testing-a-command-to-be-executed/6028899#6028899)
*   [如何添加在我的所有 cron 作业之前运行的 pre-hook 和 post-hook 脚本？](https://stackoverflow.com/questions/9548595/how-do-i-add-pre-hook-and-post-hook-scripts-that-run-before-all-of-my-cron-jobs/9656386#9656386)

# android - 无法通过单击列表视图的特定行来获取文本视图的 ID？

> ID：10193825
> 
> 赞同：0
> 
> 时间：2012-04-17T15:05:59.443
> 
> 标签：android

我正在制作通过json解析填充数据的listview，我在getview中使用Customadapter我根据条件将textviews设置到listview中。我的要求是，当我单击listview的行时，我可以检索listview的单击行的项目的id ，但问题是我无法获取项目的 ID。所以请任何人帮助我，我处于危险区域我正在使用此代码 -

```
public View getView(final int position, View convertView,
            ViewGroup parent) {
        // TODO Auto-generated method stub

        final MyVoucherOffer voucherOffer = (MyVoucherOffer) voucherListAdapter
                .get(position); // Remove offer

        LayoutInflater inflater = (LayoutInflater) VoucherActiveScreen.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        getIs_bidding = voucherOffer.getIs_bidding();
        Log.i("==getIs_bidding==", getIs_bidding);

        getResale_price = voucherOffer.getResale_price();
        Log.i("==getResale_price==", getResale_price);
        /*if (listType == 3) {
            convertView = inflater.inflate(R.layout.voucher_inactive_list,
                    null);
        } else if(listType == 1){
            convertView = inflater.inflate(R.layout.voucher_active_list,
                    null);
        }else if(listType == 2){
            convertView = inflater.inflate(R.layout.bidding_list, null);
        }*/

        //Code Added

        if (listType == 3) {
            convertView = inflater.inflate(R.layout.voucher_inactive_list,
                    null);
        } else{
            convertView = inflater.inflate(R.layout.voucher_active_list,
                    null);
        }

        //
        // 1\. offerTitle-
        // 2\. offerPricce
        // 3\. star
        // 4\. offerDiscription
        // 5\. condition
        // 6\. number
        ProgressBar progress = (ProgressBar) convertView
        .findViewById(R.id.progressBar1);

        RelativeLayout mylayout = (RelativeLayout) convertView
                .findViewById(R.id.mylayoutV);
        ImageView dealImage1 = (ImageView) convertView
                .findViewById(R.id.dealImageV);
        ImageView birds = (ImageView) convertView
        .findViewById(R.id.birds);

        int z = position % 2;
        if (z == 1) {
            mylayout.setBackgroundResource(R.drawable.dark_gray);
        }

        ArrayList<String> al = voucherOffer.getImageOffer();
        if (al.size() > 0) {
            String url = al.get(0).toString();
            url = "http://bma.in/ian_watt/application/views/scripts/vendor/uploads/"
                    + url;

            try {

                dealImage1.setTag(url);
                imageloader.DisplayImageLoader(url, VoucherActiveScreen.this,
                        dealImage1,progress);

            } catch (Exception e) {
                // TODO: handle exception
                Log.e("error", e.getMessage().toString());
            }
        } else {
            dealImage1.setImageResource(R.drawable.no_img);
        }
        ImageButton arrow = (ImageButton) convertView
                .findViewById(R.id.list_arrowV);
        TextView offerTitle = (TextView) convertView
                .findViewById(R.id.offerTitleV);
        offerTitle.setText(voucherOffer.getFld_name());
        TextView offerPrice = (TextView) convertView
                .findViewById(R.id.offerPriceV);

        offerTitle.setTypeface(font_bold);

        // offerTitle.setText(localMapOffer.getOffer_price()));number
        Log.v("", voucherOffer.getOffer_price());

        try {
            double op = Double.parseDouble(voucherOffer.getOffer_price());

            double cp = Double
                    .parseDouble(voucherOffer.getCustomer_price());

            if (listType == 3)
            {
                if (voucherOffer.getIs_redeem().toString().equals("1")
                        || voucherOffer.getIs_redeem().toString() == "1") {
                    offerPrice.setTypeface(font_bold);
                    offerPrice.setText("Rate");
                } else {
                    offerPrice.setTypeface(font);
                    offerPrice.setText("View");
                }
            } else {
                if (op - cp == 0.0) {
                    offerPrice.setText("Free");
                } else {
                    offerPrice.setText("$" + voucherOffer.getOffer_price());
                }
            }

        } catch (Exception e) {
            // TODO: handle exception
            Log.e("error", e.getMessage().toString());
        }

        if (listType == 3)
        {
            TextView star = (TextView) convertView
                    .findViewById(R.id.starVText);
            star.setTypeface(font_bold);
            Log.e("!!!!!!!!!! VoucherActive", " V :: "
                    + voucherOffer.getIs_redeem().toString());
            if (voucherOffer.getIs_redeem().toString().equals("1")
                    || voucherOffer.getIs_redeem().toString() == "1") {
                star.setText("Redeemed "
                        + getStringDate(voucherOffer.getModified()
                                .toString()));
            } else if (voucherOffer.getIs_sold().toString().equals("1")
                    || voucherOffer.getIs_sold().toString() == "1") {
                star.setText("Sold "
                        + getStringDate(voucherOffer.getModified()
                                .toString()));
            } else if (voucherOffer.getIs_expired().toString().equals("1")
                    || voucherOffer.getIs_expired().toString() == "1") {
                star.setText("Expired "
                        + getStringDate(voucherOffer.getModified()
                                .toString()));
            }

        } else {

            if(voucherOffer.getIs_bidding().equalsIgnoreCase("1"))
                birds.setVisibility(View.VISIBLE);
            ImageView star = (ImageView) convertView
                    .findViewById(R.id.starV);
            hm = Data.getValue(hm);
            Log.v(",val", voucherOffer.getFld_rating() + "");
            if (hm.containsKey(voucherOffer.getFld_rating())) {
                star.setImageResource(hm.get(voucherOffer.getFld_rating()));

            }
            /*else if(voucherOffer.getIs_bidding().equalsIgnoreCase("0") && voucherOffer.getResale_price().equalsIgnoreCase("0.00")){

            }*/
        }
        TextView offerDiscription = (TextView) convertView
                .findViewById(R.id.discriptionV);
        offerDiscription.setText(voucherOffer.getOffer_title());

        offerDiscription.setTypeface(font);

        TextView dayV = (TextView) convertView.findViewById(R.id.dayV);

        TextView distance = (TextView) convertView
                .findViewById(R.id.distacneV);

        if (listType == 3) {
            if (voucherOffer.getIs_redeem().toString().equals("1")
                    || voucherOffer.getIs_redeem().toString() == "1") {
                distance.setTypeface(font_bold);
                distance.setText("This");
            } else {
                distance.setTypeface(font);
                distance.setText("Voucher");
            }
        } else {
            distance.setTypeface(font);
            if (voucherOffer.getDistance().length() > 5) {
                distance.setText(voucherOffer.getDistance().substring(0, 4)
                        + "m");

            } else {
                distance.setText(voucherOffer.getDistance() + "m");
            }
        }

        try {

            DateFormat df = new SimpleDateFormat("MM/dd/yy");

            Date today = df.parse(voucherOffer.getOffer_enddate());
            Log.v("today", today.toString());
            long endDate = today.getTime();
            Calendar currentDate = Calendar.getInstance();
            long current = currentDate.getTimeInMillis();

            Log.v("current milis", "" + current);
            long cal = endDate - current;

            if (listType == 3) {
                if (voucherOffer.getIs_redeem().toString().equals("1")
                        || voucherOffer.getIs_redeem().toString() == "1") {
                    dayV.setTypeface(font_bold);
                    dayV.setText("Deal");
                } else {
                    dayV.setTypeface(font);
                    dayV.setText("Page");
                }
            } else {
                dayV.setTypeface(font);
                dayV.setText(getDay(cal));
            }

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }

        mylayout.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                try {

                  ---------------------my problem section----------------------------

                    if (listType == 1) {
                        Log.v("active", "On Click " + (position));
                        if(Integer.parseInt(ParsingData.is_bid) == 1 && Integer.parseInt(ParsingData.is_resale) == 0){
                             System.out.println("inside first case");
                            Intent intent = new Intent(
                                    VoucherActiveScreen.this,
                                    MyVoucherDetailPage.class);
                            intent.putExtra("selectedIndex", position);
                            intent.putExtra("listType", listType);
                            intent.putExtra("isPurchasedVoucher ", false);
                            startActivity(intent);
                        }
                        else{
                            System.out.println("inside else case");
                            Intent intent = new Intent(
                                    VoucherActiveScreen.this,
                                    MyVoucherDetailPage.class);
                            intent.putExtra("selectedIndex", position);
                            intent.putExtra("isPurchasedVoucher ", true);
                            intent.putExtra("listType", listType);
                            startActivity(intent);
                ------------------------end----------------------------
                        }
                    }
                    //Code Added
                    /*else if(listType == 2){
                        Log.v("Bidding", "On Click " + (position));
                        Intent intent = new Intent(VoucherActiveScreen.this, 
                                MyVoucherDetailPage.class);
                        intent.putExtra("selectedIndex", position);
                        intent.putExtra("listType", listType);
                        startActivity(intent);
                    }*/else if (listType == 3) {
                        Intent intent = new Intent(
                                VoucherActiveScreen.this,
                                MyVoucherDetailPage.class);
                        intent.putExtra("listType", listType);
                        intent.putExtra("selectedIndex", position);
                        Log.v("inactive", "On Click " + (position));

                        startActivity(intent);
                    }
                } catch (Exception e) {
                    // TODO: handle exception
                }
            }
        });

        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:10:44.713

如果您尝试在用户单击 ListView 的一行时注册一个事件，您应该使用[onItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)而不是 OnClickListener。View 参数是被单击的行。您只需执行 view.getId() 即可找到被点击的行的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:43:40.383

您可以通过在设置文本的位置设置 id 来做到这一点。您可以通过设置您的 id `setId(id)`，然后按照 Bobbake4 所说，您可以使用它来获取它`view.getID()`。

# matlab - 在 matlab 中与 colfit 一起工作

> ID：10193826
> 
> 赞同：1
> 
> 时间：2012-04-17T15:06:03.640
> 
> 标签：matlab, matlab-deployment

我想使用 colfit 计算输入图像的直方图 n 局部直方图均衡化。但是当我运行代码时，我得到以下错误。？？？错误使用 ==> ge 矩阵尺寸必须一致。

==> colfilt 在 135 处出错 if all(block>=size(a)), % 一次处理整个矩阵。

==> localhist 在 10 时出错 z=colfilt(f,[ww],'sliding',@std);

请提供一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:16:50.850

我还没有看到它写在文档上（既不是 on`help colfilt`也不是 on `docs colfilt`），但我认为您只能将`colfilt`, as`nlfilter`与单通道图像一起使用。因此，如果您尝试在`help colfilt`3 通道图像上运行提供的示例代码，请说：

```
I = imread('peppers.png');  % 'peppers.png' is just a demo color image usually provided with matblab
figure, imshow(I)
I2 = uint8(colfilt(I,[5 5],'sliding',@mean));
figure, imshow(I2) 
```

您会收到您发布的那种错误：

> 使用 >= 矩阵维度的错误必须一致。
> 
> 如果 all(block>=size(a)), % 一次处理整个矩阵，则 colfilt 错误（第 135 行）。

如果你改用这个，它只需要第一个通道（或通道的任何其他组合）它就可以工作

```
% which is one of the example images usually provided with matlab
J = imread('peppers.png');
I = J(:,:,1);
figure, imshow(I)
I2 = uint8(colfilt(I,[5 5],'sliding',@mean));
figure, imshow(I2) 
```

我希望这有帮助

# visual-c++ - 使用 MP4 文件在 Platform SDK 上直接展示示例 (AMCap)

> ID：10193827
> 
> 赞同：0
> 
> 时间：2012-04-17T15:06:04.197
> 
> 标签：visual-c++, directshow, mp4, muxer

我想使用 Direct show samples (AMCap) 生成 .mp4 文件。但我不知道如何实现这一点。谁能帮我解决这个问题？

提前致谢， Dhaval Kariya

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:24:17.423

[`AMCap Sample`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373424%28v=vs.85%29.aspx)捕获并显示视频。没有编码和多路复用到文件的选择（仅通过基本过时的帮助程序接口进行基本的捕获/记录）。

> 视频捕获应用程序。
> 
> 此示例应用程序演示了与音频和视频捕获相关的以下任务：
> 
> *   捕获到文件
> *   实时预览
> *   捕获文件的分配
> *   设备属性页的显示
> *   设备枚举
> *   流控制

上面的项目可能会令人困惑，因为它们提到了捕获和文件分配。这是 15 年历史的痕迹，当时文件捕获很重要。用于初始化捕获目标的辅助对象仅 AVI 和 ASF/WMV，您既不能扩展它以支持其他格式，也不需要。

您需要检查如何将视频/音频存储到文件中（见下文），并按照相同的步骤使用 MPEG-4 编码器和多路复用器构建管道。对于文件格式，您需要使用第三方 MPEG-4 多路复用器，`MP4`因为 Windows 不为您提供这种开箱即用的可用组件。

看：

*   [将视频捕获到文件](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318628%28v=vs.85%29.aspx)
*   [免费 DirectShow Mpeg-4 过滤器](http://www.gdcl.co.uk/mpeg4/)

# svn - Doxygen / AppleDoc 和 Jenkins 与 Objective-C：Doxygen / AppleDoc 输出应该放在哪里？

> ID：10193828
> 
> 赞同：2
> 
> 时间：2012-04-17T15:06:04.627
> 
> 标签：svn, continuous-integration, jenkins, doxygen, appledoc

目前，我们的团队正在使用 SVN 存储库来管理我们在服务器 A 上的代码，并且对该存储库的更改通过 Jenkins 触发构建，以便在服务器 B 上启动（因此服务器 B 有一个工作空间来镜像服务器 A 上的存储库）。现在，我们希望使用像 doxygen 或 appledoc 这样的文档生成器，但我不确定生成的文档应该放在哪里。

例如，Jenkins 有一个 doxygen 插件；但由于 jenkins 构建命令只能访问当前工作区，这意味着 jenkins 插件要访问的 doxyfile 必须存在于工作区中，因此处于源代码控制之下（来自存储库）。这很好，但是生成的 doxygen 输出不应该真正受到源代码控制，那么这是否意味着 doxyfile 应该指定要在工作区之外的服务器 B 上某处创建的输出？

此外，总体目标是生成可通过我们各个团队成员的 Xcode 无缝使用的停靠集；但这似乎意味着生成的文档/生成文件等确实需要以某种方式成为工作区的一部分（以便各个团队成员可以通过 SVN 更新接收结果）......但这看起来很笨重，我甚至不确定在不是来自 SVN 存储库的工作空间中创建文件夹/文件是否符合规定（因为工作空间是镜像）。

基本上，我正在寻找一种通过 Jenkins 生成文档/文档集作为构建过程的一部分的方法，并让我们的各个团队成员对生成的文档具有 Xcode 选项单击优点（理想情况下不需要任何手动步骤）。这可能吗？

谢谢你。

# php - 显示隐藏 Div 依赖于 Get ['status']

> ID：10193830
> 
> 赞同：1
> 
> 时间：2012-04-17T15:06:08.967
> 
> 标签：php, jquery, jquery-animate

希望有人会知道如何做到这一点......我希望显示/隐藏取决于单击的图像/图标。

例如，如果单击请求图标，颜色框弹出窗口将显示请求和`Offered`div。而如果单击 Accepted 图标，颜色框弹出窗口将显示 Accepted 和`Offered`Divs 但隐藏`Request`div。

以下是PHP中的一些：

```
 <div <?php if($_GET['status']=="Requested"){ echo "class=iconActive";}else {echo "class=iconInactive";}?>>
        <a href="/index.php/agent-appointment-request-list/?status=Requested">
        <img src="components/com_agent/images/requestedIcon_s1.png" id="requestedIcon" alt="" /></a>
        <div class="iconTitle">Requested</div>
        </div> 
```

这是我拥有的用于显示/隐藏的 jquery：

```
 $(".slidingDivReq").show();
 $("#show_hideReq").show();

 $('#show_hideReq').click(function(){
     $(".slidingDivReq").slideToggle();
 }); 
```

更新：这是将显示/隐藏的内容部分。：

```
<div class="AppointmentTitleFirst">
    <img src="components/com_agent/images/req_appt_title_s1.png" class="ApptIcon"></img>
    <h1>Requested Appointment # <?php echo $this->appointment->id;?>         Status:<?php echo $this->appointment->status_name;?></h1>
    <img src="components/com_agent/images/dropdown_arrow_s1.png" class="ApptDropDownArrow1" id="show_hideReq"></img>
    </div>
    <div class="clearFloat"></div>
    <div id="requestedAppointmentContent" class="slidingDivReq">
 Content here....
 </div> 
```

几乎，我不确定如何`GET['status']`使用它并将其与显示/隐藏一起使用。因此，如果`GET['status'] == Requested`，那么`show_hideReq`将是`.show()`，但我在颜色框中的其他 div 将使用`.hide();`（除非它是一个需要其他一些 div 的页面`.show()`）

希望有人知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:14:49.803

> 我不确定如何使用 GET['status'] 并将其与显示/隐藏一起使用

您可以使用*隐藏*元素作为变量，以便您可以`GET['status']`在 jquery 中进行测试。在您的 php 页面中添加此元素：

```
<input type="hidden" id="StatusId" value="<?php echo GET['status']; ?>"/> 
```

然后你可以这样做：

```
$('#div').click(function(){
   var statusId = $("#StatusId").val();
   If( statusId  === 0){
       //Do something
   }else{
       // Do something elese
   }
}); 
```

您*应该*在重定向到此 php 页面的 url 中发送`status`值，例如从 js 文件中，它看起来像：

```
 var url = "http://localhost/yourcurrentphpfile.php?Status=" + somevalue;
 window.location.href = url; 
```

`<a>`或者您的 php 页面中重定向到此页面的 clicked标记应该具有如下`href`所示的属性`http://localhost/yourcurrentphpfile.php?Status=somevalue`。

`yourcurrentphpfile.php`是包含隐藏输入的 php 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:30:40.413

您最好使用`$(element).css("dissplay","none");`隐藏元素并`$(element).css("dissplay","inherit");`显示它。

同样在您的 PHP 中，您最好使用它`if (isset($_GET['status']) && !empty($_GET['status']))`来确保您具有价值。此外，您需要编辑 ECHO 指令以：

```
echo 'class = "iconActive"'; 
```

和

```
echo 'class = "iconInactive"'; 
```

按照您的代码逻辑，

```
$(function(){ //on page load
     $("div.classActive").load(function(){
         //Do whatever you want when the div is active such as show/hide elements
     })
     $("div.classInactive").load(function(){
         //Do whatever you want when the div is inactive such as show/hide elements
     })
}) 
```

只有 2 个将被执行，因为当页面呈现时，只有其中一个会存在。

# c# - FileInfo - 从一个 FileInfo 中选择一个文件 []

> ID：10193831
> 
> 赞同：0
> 
> 时间：2012-04-17T15:06:09.600
> 
> 标签：c#, compare, fileinfo

我有两个 FileInfo[] 数组，我想比较名称相同的文件的文件大小和上次修改日期。但是如何从具有特定名称的 FileInfo[] 中选择一个文件？

我的代码不起作用，因为我无法使用 FileInfo.Select 来获取新的 FileInfo。有什么线索吗？

```
 foreach (FileInfo origFile in fiArrOri6)
        {
            FileInfo destFile = fiArrNew6.Select(file => file.Name == origFile.Name);
            if (origFile.Length != destFile.Length || origFile.LastWriteTime != destFile.LastWriteTime)
            {
                //do sth.
            }
        } 
```

谢谢你的帮助 ：）

顺便提一句。这个问题的任何其他迷人的解决方案都会很棒。顺便提一句。#2 : 有人有很好的 FileInfo 学习资料吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:12:34.963

您可以使用[带有过滤器的 FirstOrDefault](http://msdn.microsoft.com/en-us/library/bb549039.aspx)

```
FileInfo destFile = fiArrNew6.FirstOrDefault(file => file.Name == origFile.Name); 
```

或者，如果您不想要默认值，则可以使用等效的[First 过滤器](http://msdn.microsoft.com/en-us/library/bb535050.aspx)

```
FileInfo destFile = fiArrNew6.First(file => file.Name == origFile.Name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T15:08:59.580

`destFile`不是 FileInfo，而是 linq 查询。将其名称更改为类似`fileQuery`然后

```
var fileQuery = fiArrNew6.Where(file => file.Name == origFile.Name);
var destFile = fileQuery.FirstOrDefault();
if (destFile != null)
    //... 
```

额外提示：避免使用`fiArrNew6`; 他们很困惑。像这样的描述性名称`newFiles`更易于阅读，它们允许您更改代码而无需重命名变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:09:05.730

将 更改`Select`为`Where`：

```
FileInfo destFile = fiArrNew6.Where(file => file.Name == origFile.Name).First(); 
```

将`Where`返回一个`IEnumerable<FileInfo>`，使用`First`with 将确保使用第一个此类事件（如果没有，它将引发异常）。

# python - 调用python方法

> ID：10193836
> 
> 赞同：0
> 
> 时间：2012-04-17T15:06:23.893
> 
> 标签：python

我有一个文件`notifications.py`和`comments.py`. 通知有一个`GetNotifications`带有函数的类`getNotifs(arg1, arg2)`。我想在我的comments.py中调用这个方法，所以我这样做：

`from notifications import GetNotifications`

然后我创建一个类的实例：

```
getNotifsInstance = GetNotifications() 
```

然后我尝试调用 getNotifs：

```
notifsDictionary = getNotifsInstance.getNotifs(arg1, arg2) 
```

但是，我收到了错误： `TypeError: getNotifs() takes at most 2 arguments (3 given)`

为什么我只给它 2 个参数，却说我给它 3 个参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:08:23.477

你给它三个参数：当你调用一个实例方法时，实例作为第一个参数传递。您应该添加一个参数`self`作为该方法的第一个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:09:00.020

你很可能`self`在声明时忘记了这个论点`getNotifs()`：

```
def getNotifs(self, arg1, arg2):
   ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:09:14.987

> 为什么我只给它 2 个参数，却说我给它 3 个参数？

仅仅因为您将函数`getNotifys`作为 object 的成员函数访问`getNotifsInstance`。任何成员函数的第一个参数是 ( `self`) 对象引用本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T15:22:14.453

在类中，您可以定义**三种方法**：

```
class A(object):
    def instance_method(*args):
        print '%d arguments given' % len(args)
    @classmethod
    def class_method(*args):
        print '%d arguments given' % len(args)
    @staticmethod
    def static_method(*args):
        print '%d arguments given' % len(args) 
```

当您在实例上调用它们时，**您将获得传递给实例方法**（将是实例本身）**和类方法**（将是实例的类）的附加参数：

```
>>> a = A()
>>> a.instance_method('a', 'b')
3 arguments given
>>> a.class_method('a', 'b')
3 arguments given
>>> a.static_method('a', 'b')
2 arguments given 
```

在您的情况下，它可能是`self`（实例本身），尽管如果您使用装饰器装饰您的方法，结果会相似`classmethod`（在这种情况下，您将获得一个作为第一个参数传递的类）。

# jquery - 只读 textarea 和 IE9 滚动条

> ID：10193842
> 
> 赞同：1
> 
> 时间：2012-04-17T15:06:44.763
> 
> 标签：jquery, html, css, textarea

我在使用 textareas 只读属性时遇到问题。我正在使用 JQuery 来设置属性，如下所示：

```
$("#mytextarea").prop("readonly", true); 
```

的CSS：

```
textarea { width: 400px; height: 400px; }
textarea[readonly] { overflow: auto; } 
```

的HTML：

```
<textarea id="mytextarea">Lorem ipsum [...] ament.</textarea> 
```

在 Internet Explorer 9 中，不显示滚动条，因此用户无法阅读溢出内容。所有其他专业浏览器的行为都是正确的：该字段不可编辑，但用户可以在其中自由滚动。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:17:56.537

来自[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

> **可见**溢出没有被剪裁。它呈现在元素的框外。这是默认的
> 
> **hidden**溢出被剪掉，剩下的内容将不可见
> 
> **scroll**溢出被剪掉了，但是增加了一个滚动条来查看剩下的内容
> 
> **auto如果overflow被剪裁，****应该添加**滚动条来查看剩余的内容 inherit 指定overflow属性的值应该从父元素继承

尝试“滚动”作为溢出属性的值，如下所示：

更改：`overflow: auto;`到`overflow: scroll;`

因为它只在 IE9 中做你不想要的，如果你想为其他浏览器保留自动。创建两个 CSS 文件并在 HTML 中使用此代码：

```
<!--[if IE 9]>
    <link rel="stylesheet" type="text/css" href="ie9.css">
<![endif]--> 
```

并放入`overflow: scroll;`ie9.css 和`overflow: auto;`常规 CSS 中。

**编辑：斯科特**建议，我也这样做，尝试阅读此链接[http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/) ...关于如何为每个浏览器合并多个 css . 这是减少HTTP请求的好主意和好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T15:17:03.527

更改`overflow: auto`为`overflow: scroll`。

# c# - Windows 服务托管 TCP WCF 服务

> ID：10193847
> 
> 赞同：4
> 
> 时间：2012-04-17T15:07:11.463
> 
> 标签：c#, wcf, windows-services, wcf-client

我正在尝试在 Windows 2008 R2 服务器上托管 WCF 服务作为 Windows 服务。我按照 msdn 提供的说明进行操作（[在此处找到](http://msdn.microsoft.com/en-us/library/ff649818.aspx)）。只要一切都是视觉工作室中相同解决方案的一部分，一切都可以正常工作。但是，我尝试在不同的解决方案中（在同一台机器上）创建客户端，但找不到该服务。我收到如下所示的“添加服务参考错误”。

![在此处输入图像描述](../Images/46c4deaa8a4c2534b63840547eb42a59.png)

我的目标是能够远程访问 wcf 服务，但我似乎无法在本地访问它，除非客户端是在同一个客户端中创建的。是否有任何指南、教程或有用的提示，任何人都可以给我以使其正常工作？

**更新：** 似乎即使 Windows 服务正在运行，WCF 服务似乎也没有监听任何端口。这表明它没有运行。这也解释了为什么每个人首先认为我没有运行该服务。我假设由于 Windows 服务正在运行并且相同的解决方案客户端工作，WCF 服务也在工作。事实证明，每当我运行相同的解决方案客户端时，Visual Studio 都会启动 WCF 服务。

那么，为什么windows服务不启动WCF服务呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T13:57:45.567

原来是MSDN提供的教程有问题（上面问题中提供）。他们将 Windows 服务和 WCF 服务`Service1`都命名为默认名称。

假设 Windows 服务启动 WCF 服务，但实际上它试图重新启动自己，因为这两个服务具有相同的名称。

```
myServiceHost = new ServiceHost(typeof(Service1)); 
```

要解决此问题，您可以重命名服务之一或在 Windows 服务中引用时完全限定 WCF 服务。

```
myServiceHost = new ServiceHost(typeof(WcfServiceLibrary1.Service1)); 
```

有趣的是，提供的代码看起来仍然可以正常工作，因为 Visual Studio 足够聪明，可以注意到 WCF 服务没有运行并且它在幕后启动了一个实例。

这是一个要修复的简单错误，但由于 Visual Studio 对我隐藏了问题，如果没有 Espen Burud 的帮助，我认为我不会找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:17:15.730

Add Service Reference 有两种方法可以了解服务：

`Discover`按钮：搜索当前解决方案中的项目。
`Go`按钮：连接到地址框中的服务并检索元数据。

在单击 之前，您需要实际运行该服务`Go`。

**编辑**

我刚刚从您的屏幕截图中注意到您正在尝试连接到 net.tcp URL。我认为在 MEX 中使用 http 更为常见。你的 app.config 看起来像：

```
<services>
  <service behaviorConfiguration="WcfServiceLibrary1.Service1Behavior"
    name="WcfServiceLibrary1.Service1">
    <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
      contract="WcfServiceLibrary1.IService1">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
      contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:8523/Service1" />
        <add baseAddress="http://localhost:8524/Service1" />
      </baseAddresses>
    </host>
  </service>
</services> 
```

请注意 http 基地址的不同端口号。然后，您将在“添加服务参考”工具中使用“http://localhost:8524/Service1”。您还应该能够使用您的网络浏览器连接到它。

要允许通过 http GET（例如从浏览器）交换元数据，您还需要通过行为启用它：

```
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="True"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

我不确定添加服务参考工具是否关心这一点。

即使您不想允许 http get 访问 (httpGetEnabled="False")，您仍然需要包含此行为以启用 MEX（除非您以编程方式添加它）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T19:47:45.113

我已经测试了 MSDN 中的文章，它无需修改即可工作。如果在服务器上启用了防火墙，我认为您需要为您的服务添加一些规则。

要验证服务是否正在侦听正确的 tcp 端口，您可以使用命令：`netstat -a`。如果服务正在侦听正确的端口，则此命令将返回：

```
Proto  Local Address          Foreign Address        State
TCP    0.0.0.0:8523           machinename:0          LISTENING 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:05:55.510

我设法弄清楚了这个问题。我的服务不知道端点，因为我没有将 WCF 项目中的 app.config 中的服务配置复制到实际 Windows 服务的 app.config 中。一旦我这样做了，它就会正常运行。

尽管在 WCF app.config 的评论中提到了这一点，但我也关注的原始 MSDN 文章中没有明确说明这一点。

# java - 代码未将数据库写入 SD 卡

> ID：10193850
> 
> 赞同：0
> 
> 时间：2012-04-17T15:07:27.217
> 
> 标签：java, android, sqlite, android-sdcard

我正在使用以下代码将我的数据库副本导出到我的 SD 卡。

```
public class AgUtility extends AgActivity{

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.utility);
    try {
        backupDatabase(getBaseContext());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}        
public static void backupDatabase(Context context) throws IOException {

    // Open your local db as the input stream
    String inFileName = "data/data/com.agmanagement.todaysstudent/databases/todaysstudent.db";
    Toast.makeText(context, "FileName Is "+ inFileName, Toast.LENGTH_LONG).show();
    Log.i("The File In Is ", inFileName);

    File dbFile = new File(inFileName);
    FileInputStream fis = new FileInputStream(dbFile);

    File outputDirectory = new File(
            Environment.getExternalStorageDirectory() + "/student/");
    outputDirectory.mkdir();
    Log.d("MAKE DIR", dbFile.mkdir() + "");
    String backupFileName = "/TodaysStudentTest.db3"; 
    String outFileName = outputDirectory + backupFileName;
    Toast.makeText(context, "Database backup names is " + outFileName , Toast.LENGTH_LONG)
    .show();  

    // Open the empty db as the output stream
    OutputStream output = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = fis.read(buffer)) > 0) {
        output.write(buffer, 0, length);
    }
    // Close the streams
    output.flush();
    output.close();
    fis.close();

    Toast.makeText(context, "Database backup complete", Toast.LENGTH_LONG)
            .show();
}
} 
```

代码似乎工作正常，因为我没有收到任何错误第一个 Toast 显示正确的数据库名称，第二个 Toast 显示输出目录应该是 mnt/sdcard/student，第三个显示最终目标应该是 mnt/ SD卡/学生/TodaysStudentTest.db3

在 Toast 消失之后，什么都没有，最后的 Toast 永远不会出现。

在我的清单中，我有

我在三星平板电脑上而不是在模拟器上测试它，我也在 DroidX 上运行它，结果相同，没有错误，但没有创建文件夹。

关于我做错了什么的任何想法？TIA

我正在使用的权限是

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
 <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
 <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
 <uses-permission android:name="android.permission.INTERNET" /> 
 <uses-permission android:name="android.premission.WRITE_EXTERNAL_STORAGE" />
 <uses-permission android:name="android.permission.SET_DEBUG_APP" />
 <uses-permission android:name="android.permission.CAMERA"/>
 <uses-permission android:name="android.permission.READ_CALENDAR"/>
 <uses-permission android:name="android.permission.WRITE_CALENDAR"/> 
```

在模拟器中运行时，我得到相同的结果 - 使用 DDMS 观看 - Logcat show MAKE DIR 失败。

我已经用这个测试了状态

```
 if (Environment.MEDIA_MOUNTED.equals(state)) {
         // We can read and write the media
         mExternalStorageAvailable = mExternalStorageWriteable = true;
            Toast.makeText(getBaseContext(), "We Can Read And Write To The SDCARD", Toast.LENGTH_LONG).show();
            } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
         // We can only read the media
                mExternalStorageAvailable = true;
                mExternalStorageWriteable = false;
                Toast.makeText(getBaseContext(), "We Can Read The SDCARD", Toast.LENGTH_LONG).show();
            } else {
                // Something else is wrong. It may be one of many other states, but all we need
                //  to know is we can neither read nor write
                mExternalStorageAvailable = mExternalStorageWriteable = false;
                Toast.makeText(getBaseContext(), "We Can't read or write", Toast.LENGTH_LONG).show();
            } 
```

它表明我应该能够读写，所以我的写作方式有问题。我将此添加到文本中

```
 boolean success = false;
        if(!outputDirectory.exists()){
            Toast.makeText(getBaseContext(), "Folder Doesn't Exist ", Toast.LENGTH_LONG)
            .show();  
            success = outputDirectory.mkdirs();
        }
        if (!success){ 
            Toast.makeText(getBaseContext(), "Folder Not Created ", Toast.LENGTH_LONG)
            .show();  
        }
        else{
            Toast.makeText(getBaseContext(), "Folder Created ", Toast.LENGTH_LONG)
            .show();  
        } 
```

结果是文件夹不存在，然后 mkdirs() 失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:06:45.457

**改写**

这是处理数据库文件的另一种方法，无需使用 SQL 本身或循环缓冲区。

注意：这实际上并没有复制到 sdcard，备份存储在原始数据库文件夹中（我喜欢它，因为您**不需要**WRITE_EXTERNAL_STORAGE 权限）。

```
public class FileIO extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DBHelper db = new DBHelper(this);

        try { 
            copyFile();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        } finally {
            Log.i("Main", "Complete");
            db.close();
            finish();
        }
    }

    public void copyFile() throws IOException {
        File data = Environment.getDataDirectory();
        String state = Environment.getExternalStorageState();

        /* Create file first
            FileOutputStream created = openFileOutput("copyFile.db", MODE_WORLD_READABLE);
            created.close();
        */

        String currentDBPath = "/data/<your_path>/databases/data.db";
        String backupDBPath = "/data/<your_path>/databases/copyByFile.db";
        File currentDB = new File(data, currentDBPath);
        File backupDB = new File(data, backupDBPath);

        if (currentDB.exists()) {
            FileChannel src = new FileInputStream(currentDB).getChannel();
            FileChannel dst = new FileOutputStream(backupDB).getChannel();
            dst.transferFrom(src, 0, src.size());
            src.close();
            dst.close();
        }
        else
            Log.i("Main", "Current db does not exist");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:17:13.843

在尝试写入文件之前尝试手动创建文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T16:27:14.283

重要的是要记住检查拼写。uses-permission 被错误拼写为 uses-premission，我已经阅读了很多次代码，我按照我的意愿阅读它。宝贵的教训，走开休息一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:47:35.500

请确保您在使用 mkdir() 时已经创建了名为“student”的文件夹。它将通过抽象路径名创建目录..所以如果文件夹“student”不存在，它不会创建新文件夹..或者尝试改为 mkdirs()。如有必要，它将创建父文件夹。

# javascript - 为什么我们在缩小的 JavaScript 中有换行符？

> ID：10193851
> 
> 赞同：22
> 
> 时间：2012-04-17T15:07:29.807
> 
> 标签：javascript, performance, optimization, minify

我知道一个[类似的问题](https://stackoverflow.com/questions/3118776/when-i-minify-css-or-js-why-isnt-it-all-on-one-line)，但这与我在这里提出的问题有点不同，所以*请**不要*重复`flag`。

当你看到[jQuery 的生产版本时](http://code.jquery.com/jquery-1.7.2.min.js)，为什么过了一会儿会有换行符？我下载了一份副本并删除了所有换行符（除了许可证），它仍然有效。（我针对我在 Mozilla Firefox、Google Chrome 和 Opera 上所做的更改运行了**整个单元测试套件。）**

![问题。 在谷歌浏览器的](../Images/41a49b4fbcfce22ea7bb13cf210d1add.png)

我知道三个换行符（不包括许可证）不会减慢很多速度，但是，每一点都没有帮助吗？

我给自己分配了一个小挑战，从我的 JavaScript 代码中榨取每一点性能。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-17T15:30:38.817

[jQuery 目前使用](https://stackoverflow.com/questions/6608079/which-tools-does-jquery-use-to-compress-its-source-code)UglifyJS 来缩小其源代码。在[他们的构建脚本](https://github.com/jquery/jquery/blob/1.7.2/build/uglify.js)中，他们[专门将](https://github.com/jquery/jquery/blob/1.7.2/build/uglify.js#L19)指令`max_line_length`设置为`32 * 1024`：

[UglifyJS](https://github.com/mishoo/UglifyJS)的文档在`max-line-len`指令中有这样的说法；

> `--max-line-len`（默认 32K 个字符）— 在大约 32K 个字符后添加一个换行符。当所有代码都在大约 670K 的单行上时，我已经看到 FF 和 Chrome 呱呱叫了。传递 –max-line-len 0 以禁用此安全功能。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-17T15:26:23.397

引用[Closure Compiler FAQ](https://developers.google.com/closure/compiler/faq#linefeeds)：

> Closure Compiler 有意每 500 个字符左右添加换行符。防火墙和代理有时会损坏或忽略行很长的大型 JavaScript 文件。每 500 个字符添加换行符可防止此问题。删除换行符对脚本的语义没有影响。对代码大小的影响很小，并且编译器优化了换行符的位置，以便在压缩文件时代码大小损失更小。

这通常与任何缩小程序有关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T15:11:53.730

这些行（不包括许可证）的长度都在 30k 左右。可能是为了避免一些 Javascript 解析器在极长的行中死掉的错误。这可能不会在今天的浏览器上发生，但可能一些较旧或更晦涩的浏览器有这样的限制。

* * *

*（下面的旧答案，也可能适用，只是在这种情况下不适用）*

这可能是因为[JSMin](http://www.crockford.com/javascript/jsmin.html)是一种流行的 Javascript 压缩器，在某些条件下会在输出中保留换行符。这是因为在 Javascript 中，例如，如果您省略分号，则换行*很重要。*文档说：

> 在省略换行方面更为保守，因为换行有时被视为分号。如果换行符位于非 ASCII 字符或 ASCII 字母或数字或以下字符之一之前，则不会省略换行符：
> 
> ```
> \ $ _ { [ ( + - 
> ```
> 
> 如果它跟在非 ASCII 字符或 ASCII 字母或数字或以下字符之一之后：
> 
> ```
> \ $ _ } ] ) + - " ' 
> ```

其他缩小器可能有类似的规则。

因此，这主要是为了防止意外删除语法上可能需要的换行符。你想要的最后一件事是你的缩小 JS 将不再工作，因为缩小器破坏了它的语义。

关于*»我知道三个换行符（不包括许可证）不会减慢很多速度，但仍然不是每一点都有帮助吗？«*：当您的服务器使用 gzip 压缩时，差异可能无论如何都没有实际意义。

# c# - 在实际应用程序中使用 ASPNETDB.mdf。它如何与另一个数据库一起使用？

> ID：10193853
> 
> 赞同：0
> 
> 时间：2012-04-17T15:07:37.533
> 
> 标签：c#, asp.net, visual-studio, createuserwizard, aspnetdb

首先，我是新人。我正在.NET 中创建一个网站，但我对一些事情感到困惑。使用 CreateUserWizard 控件时，会自动创建一个名为 aspnetdb.mdf 的数据库文件。我正在创建一个二十一点游戏，因此需要为每个用户初始化诸如 totalWins、totalGamesPlayed 等值。我的问题是，在 .NET 中这样做的最佳方法是什么？我应该将字段添加到 aspnetdb.mdf 中的用户表还是使用用户表创建一个单独的文件？不管怎样，我如何填充这个表，为每个新用户添加一条新记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:11:13.443

您想使用.NET 内置[的 Profiles 功能。](http://msdn.microsoft.com/en-us/library/2y3fs9xs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:19:22.440

我不会乱用 aspnetdb.mdf 中的 Users 表，因为它包含个人信息，例如用户名等。您应该创建一个名为 User_Score 的单独表并处理该表。您可以使用 user_id（或任何合适的键）为 Users 表创建外键。

就最初填充数据而言，有很多方法可以做到这一点，一种可能是使用触发器，一旦在 User 表中创建记录，就会初始化 User_Score 表中的记录。

一种方法是在 User 表中创建与此类似的触发器：

```
CREATE TRIGGER myTrigger 
   ON User 
   AFTER INSERT
AS BEGIN
   -- INSERT RECORD IN THE User_Score table here
   -- populating the appropriate fields. Example:
  INSERT INTO User_Score (username,columna, columnb, columnc) 
  SELECT username, 0,0,0 from inserted
END 
```

# javascript - Wordpress 内容未出现在 Web 浏览器中

> ID：10193854
> 
> 赞同：-2
> 
> 时间：2012-04-17T15:07:40.243
> 
> 标签：javascript, css, wordpress

我的任何内容似乎都没有显示在网络浏览器中。我在 Wordpress 中创建了网站

我不确定我是否遗漏了一些重要代码，但它似乎显示了徽标和“服务”栏，但我的页面似乎是空的

header.php：

```
</head>

<body class="">

    <div id="wrapper">

        <div id="jump">

            <p><a href="#content">jump to content</a></p>

        </div>

            <div class="hud-content">

        <div id="content-container">

<div id="header">
    <div id="logo">
        <a href="/" title="Wild Lion Media">
            <img src="/wildlion/wp-content/themes/child/images/logo.png" width="95" height="120" alt="Wild Lion Media" title="Wild Lion Media" />
        </a>
    </div>

    <h1>
                    Wild Lion Media             
    </h1>

    <div id="hud-toggler">
        <ul>

            <li><a href="#" class="hud-toggle">Login / Register</a></li>
        </ul>
    </div>
</div><div id="nav">
    <ul>
        <li id="nav-home"><a href="/" title="Return to the Wild Lion Media home page">Home</a></li>
        <li id="nav-dandad"><a class="nav-item" href="/dandad" title="Wild Lion Media">Wild Lion Media</a>
            <div class="subnav">
    <ul class="subnav">
        <li><a href="/dandad/about" title="About">About</a></li>
        <li><a href="/dandad/events" title="Events">Events</a></li>
        <li><a href="/dandad/join" title="Join">Join</a></li>
        <li><a href="/dandad/latest/news" title="Latest News">Latest</a></li>
        <li><a href="/dandad/partnerships" title="Partnerships">Partnerships</a></li>
        <li><a href="/dandad/white-pencil" title="White Pencil">White Pencil</a></li>
        <li class="feature">
            <p class="intro">Get your voice heard</p>
            <p>Wild Lion Media Membership: It&rsquo;s classy, exclusive, well connected &ndash; everything you could ask for from a private member&rsquo;s club. Ok, we don&rsquo;t have a pool on the roof, but just wait till you see the size of our archive.</p>
            <p class="readmore"><a href="/dandad/join" title="read more">Read More</a></p>
            <img src="#" width="167" height="167" alt="Nav Yellow Pencil" class="feature-pic"/>

            <ul class="feature-links">
                <li><a href="/dandad/join/individual-membership" title="Individual Membership">Individual<br />
                    Membership</a></li>
                <li><a href="/dandad/join/d-ad-education-network" title="Education Network">Education<br />
                    Network</a></li>
            </ul>
        </li>
    </ul>
</div>      </li>
        <li id="nav-inspire"><a class="nav-item" href="/inspiration" title="Inspiration">Inspiration</a>
            <div class="subnav">
    <ul class="subnav">
        <li><a href="/inspiration/inspired-by" title="Inspired by&hellip;">Inspired by&hellip;</a></li>
        <li><a href="/inspiration/watch-and-listen" title="Watch &amp; Listen">Watch &amp; Listen</a></li>
        <li><a href="/inspiration/have-your-say" title="Have Your Say">Have Your Say</a></li>
        <li><a href="/inspiration/features-and-opinion" title="Features &amp; opinion">Features &amp; Opinion</a></li>
        <li><a href="/inspiration/profiles" title="Profile">Profiles</a></li>
        <li><a href="/inspiration/archives-and-collections" title="Archives &amp; Collections">Archives &amp; Collections</a></li>
        <li class="feature">
            <p class="intro">Wild Lion Media<br/>President&rsquo;s Lectures</p>
            <p>Chosen by the President of Wild Lion Media speakers represent the best in their creative fields and inspire discussion and debate.<br/></p>
            <p class="readmore"><a href="/dandad/events?series=President%E2%80%99s%20Lectures">Book your tickets</a></p>
            <img src="#" width="167" height="167" alt="President’s Lectures" class="feature-pic"/>
        </li>
    </ul>
</div>      </li>
        <li id="nav-awards"><a class="nav-item" href="/awards" title="Awards">Awards</a>
            <div class="subnav">
    <ul class="subnav award-sections">
        <li>
            <p class="intro">Professional Awards</p>
            <p>Yellow Pencils are recognised the world over as a symbol of true creative achievement. Year on year the Wild Lion Media Annual showcases the very best work and continues to provide an unrivalled source of creative inspiration.</p>
            <ul>
                <li><a href="/awards/professional" title="Professional">Professional</a></li>
                <li class="new"><a href="/awards/professional/2012" title="2012">2012</a></li>
                <li><a href="/awards/professional/2011" title="2011">2011</a></li>
                <li><a href="/awards/professional/2010" title="2010">2010</a></li>
                <li><a href="/awards/professional/archive" title="Archive">Archive</a></li>
            </ul>

        </li>

        <li>
            <p class="intro">Student Awards</p>
            <p>Creatives the world over value the Wild Lion Media Student Awards above any other. Winning a Wild Lion Media Student Award truly marks you out as one of the best. Take your first step in becoming a creative superstar.</p>
            <ul>
                <li><a href="/awards/student" title="Student">Student</a></li>
                <li class="new"><a href="/awards/student/2012" title="2012">2012</a></li>
                <li><a href="/awards/student/2011" title="2011">2011</a></li>
                <li><a href="/awards/student/2010" title="2010">2010</a></li>
                <li><a href="/awards/student/archive" title="Archive">Archive</a></li>
            </ul>

        </li>
    </ul>
</div>      </li>
        <li id="nav-talent"><a class="nav-item" href="/talent" title="Talent">Talent</a>
            <div class="subnav">
    <ul class="subnav">
        <li><a href="/talent/spotlights" title="Spotlights">Spotlights</a></li>
        <li><a href="/talent/portfolios" title="Portfolios">Portfolios</a></li>
        <li><a href="/talent/new-blood" title="New Blood">New Blood</a></li>
<!--    <li><a href="/talent/graduate-placement-scheme" title="Graduate Placement Scheme">Graduate Placement Scheme</a></li>-->
        <li><a href="/talent/graduate-academy" title="Graduate Academy">Graduate Academy</a></li>
<!--        <li><a href="/talent/jobs" title="Jobs">Jobs</a></li>-->
        <li class="feature">
            <a href="/talent/graduate-academy" title="Graduate Academy - Where the creatively brave shine"><img src="#" alt="Graduate Academy - Where the creatively brave shine" class="fullpic" /></a>
        </li>
    </ul>
</div>
        </li>
        <li id="nav-learning"><a class="nav-item" href="/learning" title="Learning">Learning</a>
            <div class="subnav">
    <ul class="subnav">
        <li><a href="/learning/case-studies" title="Case Studies">Case Studies</a></li>
        <li><a href="/learning/commentary" title="Commentary">Commentary</a></li>
        <li><a href="/learning/guides" title="Guides">Guides</a></li>
        <li><a href="/learning/talks" title="Talks">Talks</a></li>
        <li class="new"><a href="/learning/projects" title="Projects">Projects</a></li>
        <li><a href="/learning/workshops" title="Workshops">Workshops</a></li>
        <li><a href="/learning/professional-development" title="Professional Development">Professional Development</a></li>
        <li class="feature">
            <a href="/dandad/join/d-ad-education-network" title="University Network. Behind you all the way."><img src="#" alt="Education Network Membership. One yellow pencil. Lots of benefits." class="fullpic" /></a>

                    </li>
    </ul>
</div>      </li>
        <li id="nav-search">
            <form action="/search" method="get" accept-charset="utf-8">
                <p><label for="search">Search</label><input type="text" name="q" value="Search" id="search" class="tfield" tabindex="5" /></p>
                <p><input type="submit" id="search_submit" value="Go" tabindex="6" /></p>
            </form>
        </li>
    </ul>
</div>      <div id="content">

<div class="panel-10">
    <p class="widget-title">Services</p>
    <ul class="powerlinks pl-feature extended">
    <li class="first">
        <img src="/wildlion/wp-content/themes/child/images/video_production.jpg" width="176" height="104" alt="Video Production" title="" />

        <p>
            <a href="#">
                <span>
                    <strong>Video Production</strong>
                </span>
            </a>
        </p>
        <p class="extended">
            <a href="#">
                <span>
                    Every element of your production can be designed to meet your needs.
                </span>
            </a>
        </p>
            </li>
    <li>
        <img src="/wildlion/wp-content/themes/child/images/talking_heads.jpg" width="176" height="104" alt="Talking Heads" title="" />

        <p>
            <a href="#">
                <span>
                    <strong>Talking Heads</strong><br/>
                </span>
            </a>
        </p>
        <p class="extended">
            <a href="#">
                <span>
                    A simple but effective way of communicating a message and introducing key players.
                </span>
            </a>
        </p>
            </li>
    <li>
        <img src="/wildlion/wp-content/themes/child/images/motion_graphics.jpg" width="176" height="104" alt="Motion Graphics" title="" />

        <p>
            <a href="#">
                <span>
                    <strong>Motion Graphics</strong><br/>
                </span>
            </a>
        </p>
        <p class="extended">
            <a href="#">
                <span>
                    Whether 2D logo design or 3D animation and visual effects, anything is possible.
                </span>
            </a>
        </p>
            </li>
    <li class="last">
        <img src="/wildlion/wp-content/themes/child/images/web_videos.jpg" width="176" height="104" alt="Web Videos" title="" />

        <p>
            <a href="#">
                <span>
                    <strong>Web Videos</strong><br/>
                </span>
            </a>
        </p>
        <p class="extended">
            <a href="#">
                <span>
                    From social networks to blogs and news feeds, get your viral out there.
                </span>
            </a>
        </p>
            </li>
    <li class="first">
        <img src="/wildlion/wp-content/themes/child/images/live_events.jpg" width="176" height="104" alt="Live Events" title="" />

        <p>
            <a href="#">
                <span>
                    <strong>Live Events</strong><br/>
                </span>
            </a>
        </p>
        <p class="extended">
            <a href="#">
                <span>
                    Why limit your audience to the venue capacity? Capture your event in style.
                </span>
            </a>
        </p>
            </li>
</ul>
            </div>

<div class="panel-10">
    <div class="panel-8 alpha">

    <div class="panel-2 alpha">

            </div>
</div>
        </div>

<div class="panel-10" id="footer">
    <div class="panel-2">

        <p>&copy; 2012 Wild Lion Media Limited </p>

    </div>

    <div class="panel-2" id="back-to-top">
        <p><a href="#header">Back to the top</a></p>
    </div>
</div>

<div class="clearing"></div>

        </div>

    </div>

    <div class="overlay"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:12:23.310

在样式表的第 5 行，您有：

```
 #nav, 
    #hud, 
    #hud-toggler, 
    #imagebar, 
    #jump, 
    div #breadcrumb, 
    #quick-jump, 
    #sitemap, 
    #external-links, 
    #back-to-top, 
    ul.powerlinks, 
    ul.article-nav, 
    #sidenav ul, 
    p.return, 
    a.doc-pdf, 
    a.doc-word, 
    div.logo a {
        display: none;
} 
```

这导致一切都被隐藏起来。删除该行，您将看到您的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T15:12:33.580

在您的 style.css（第 5 行）中，您有一条规则：

```
#nav, #hud, #hud-toggler, #imagebar, #jump, div #breadcrumb, #quick-jump, #sitemap, #external-links, #back-to-top, ul.powerlinks, ul.article-nav, #sidenav ul, p.return, a.doc-pdf, a.doc-word, div.logo a {
    display: none;
} 
```

它隐藏了您的所有内容。

# com - outlook 2007 - 有没有办法从 Appointmentitem 获取格式化文本？

> ID：10193855
> 
> 赞同：0
> 
> 时间：2012-04-17T15:07:40.977
> 
> 标签：com, outlook-2007

我正在尝试获取约会项目的格式化文本，我到处搜索，大多数地方都建议获取约会项目的 word 文档：

```
Word.Document wd = (Word.Document) (item as Outlook.AppointmentItem).GetInspector.WordEditor; 
```

所以我这样做了，我得到了word文档。但是，它并没有告诉你一旦得到这个 word 文档，应该如何处理它。我现在如何从word文档中获取格式化文本？

更新：对于将来寻找此答案的任何其他人。我想出了如何在 ol2007 中做到这一点

1）首先必须通过WordEditor变量从指定项中获取word文档。

2）然后您必须使用word文档中的选择和复制功能将RTF文本复制到剪贴板中。

3）制作一个richtextbox并使用richtextboc粘贴功能将剪贴板中的内容粘贴到您的richtextbox中。

4) 现在您可以从richtextbox 访问.Rtf 函数，该函数现在将为您提供约会项的RTF。

根据我的搜索，这种方法是最简单的方法，但您必须接管不理想的剪贴板。我读到的第二种方法是将步骤 1 中的 word 文档保存到计算机上的实际 RTF 文件中，然后读入该 RTF 文件。

我想的第三种方法是使用 Range.FormattedText 函数在步骤 1 中解析出 word 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:52:44.040

更新：对于将来寻找此答案的任何其他人。我想出了如何在 ol2007 中做到这一点

1）首先必须通过WordEditor变量从指定项中获取word文档。

2）然后您必须使用word文档中的选择和复制功能将RTF文本复制到剪贴板中。

3）制作一个richtextbox并使用richtextboc粘贴功能将剪贴板中的内容粘贴到您的richtextbox中。

4) 现在您可以从richtextbox 访问.Rtf 函数，该函数现在将为您提供约会项的RTF。

根据我的搜索，这种方法是最简单的方法，但您必须接管不理想的剪贴板。我读到的第二种方法是将步骤 1 中的 word 文档保存到计算机上的实际 RTF 文件中，然后读入该 RTF 文件。

我想的第三种方法是使用 Range.FormattedText 函数在步骤 1 中解析出 word 文档。

# objective-c - 记录 NSNotifications

> ID：10193858
> 
> 赞同：5
> 
> 时间：2012-04-17T15:07:48.320
> 
> 标签：objective-c, ios, logging, nsnotificationcenter, nsnotification

我想记录在我的应用程序中共享的单个 NSNotificationCenter 发布的任何 NSNotifications。我尝试将 NSNotificationCenter 子类化，以便将日志记录代码添加到三个 post 方法，但它返回 CFNotification center 的实例而不是我的子类。

肯定有监控 NSNotification 发布的方法吗？

编辑/更新

正如下面的两个答案正确指出的那样，我可以收听所有通知并将它们记录在处理程序中，但是处理程序接收这些通知的顺序远不能保证与发送它们的顺序相同。如果我可以确定处理程序将始终是第一个收到通知的处理程序，这将起作用，但我不能：'观察者接收通知的顺序未定义'来自[NSNotification Docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T15:51:25.280

通过使用`- addObserver:selector:name:object:`并传递`nil`the`name`和 the `object`，您将收到有关任何通知的通知。

```
- (id)init
{
    self = [super init];
    if (self != nil)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(log:) name:nil object:nil];
    }
    return self;
}

- (void)log:(NSNotification *)notification
{
    NSLog(@"%@", notification);
} 
```

* * *

**编辑：**如果您想获得发送通知的真实顺序，请尝试子类`NSNotificationCenter`化并覆盖以下方法：

```
– postNotification:
– postNotificationName:object:
– postNotificationName:object:userInfo: 
```

如果子类化不是您的选择，您可以考虑定义一个类别，在`NSNotificationCenter`其中通过调用超级实现来覆盖这些方法。（您需要调配方法以在一个类别中调用 super）。如果您需要帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:45:02.467

您应该能够使用 [addObserver:self 选择器:@selector(whatever:) name:nil object:nil] 并将您的日志记录代码放在whatever: 方法中。这个观察者应该得到你的应用程序发布的所有通知（至少是默认中心发布的所有通知）。

# java - java：使用命令行参数对数字求和

> ID：10193863
> 
> 赞同：0
> 
> 时间：2012-04-17T15:08:05.527
> 
> 标签：java

About 使用命令行参数对数字求和。
例如

```
 java  sum  "1 2 3"    <--"1 2 3" will be args[0]
    the sum is 6 
```

我该如何计算呢？
我想要这个程序的代码。谢谢
此代码只能在我输入
java sum 1 2 3
但我想输入
java sum "1 2 3"时计算

```
public class sum {
public static void main( String args[] ) {
int num=0;
for(int i=0; i<args.length; i++){
   num+= Integer.parseInt(args[i]);
}

  System.out.println("The sum is " + num);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:10:03.497

*   首先创建一个计数器，初始化为零。
*   在空格上拆分“1 2 3”字符串，使用`args[0].split(" ");`并将其分配给新数组。
*   循环遍历新数组的所有元素。
*   使用将每个元素解析为整数`Integer.parseInt(String);`
*   将解析的值添加到计数器。
*   打印结果。

# c# - WCF 是长时间数据导入过程的正确选择吗？

> ID：10193887
> 
> 赞同：6
> 
> 时间：2012-04-17T15:09:20.253
> 
> 标签：c#, wcf, windows-services

我目前正在为我们的业务创建一个流程，该流程从数据库 (A) 中获取一些数据，对数据进行一些处理，然后将其复制到另一个数据库 (B) 中的另一个表中。我们正在处理的数据量很大，我们预计这个过程需要很长时间（几周）。

对于此类任务使用 WCF 是明智的设计选择吗？这样，我认为我可以拥有某种客户端应用程序/Web 前端（业务的其余部分可以使用）来“查询”/显示整个导入过程的进度。我还想让客户能够通过服务启动/暂停/停止导入过程。

这在 WCF 中可行吗？这甚至是正确的选择吗？我想在某些方面这需要像常规的 Windows 服务一样运行（我只是认为通过我可以通过 WCF 公开的一些方法来“查询”导入的进度会更容易？）

另外，如果一位用户尝试同时启动/停止导入过程等，我是否会遇到问题？单例模式是确保每个人都使用相同的单一导入过程的方法吗？

任何想法/想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:14:06.290

**编辑/前言：此答案假定您只想将 WCF*用于用户与进程的交互，*而不是用于整个软件堆栈的通信，并且核心工作由长期运行的服务本身完成。**

是的，这在 WCF 中是可行的，它可能是正确的解决方案。您将拥有一个长时间运行的处理器线程，该线程经常查询/更新某些互操作属性集（例如，它将更新完成的百分比、正在处理的项目，并检查“暂停”标志等.)。这些属性将依次由 WCF 接口方法查询/设置。

单例模式非常适合这一点 - 如果您的线程设置正确，用户将与长时间运行的线程（或多个线程）检查的一些属性进行交互。

从一个非常高级的角度来看，处理器类的核心可能看起来像这样（这只是一个如何完成的模型；不要让它完全像这样，否则我会做噩梦）：

```
// IWcfProcessor is the ServiceContract interface
// Processor runs as a singleton and does (or has a thread that does) the processing work
class Processor : IWcfProcessor
{
    public Processor()
    {
        new Thread(Process).Start();
    }

    public void Process()
    {
        while (Run)
        {
            // Do long-running process stuff, update some tables
            PercentDone += 0.1;
        }
    }

    public decimal PercentDone { get; set; }
    public bool Run { get; set; }

    /// WCF method defined in IWcfProcessor
    public void SetState(bool state)
    {
        Run = state;
    }

    /// WCF method defined in IWcfProcessor
    public decimal GetStatus()
    {
        return PercentDone;
    }
} 
```

`IWcfProcessor`然后，您可以从 Web 或应用程序端点连接到接触点。

> 另外，如果一位用户尝试同时启动/停止导入过程等，我是否会遇到问题？

假设您正确设置了线程互操作，您将不会遇到问题。

> 单例模式是确保每个人都使用相同的单一导入过程的方法吗？

是的，这是完美的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T15:41:40.863

是的。这可以与 WCF 流式处理一起使用。在这里，看看我对另一个类似问题的[回答](https://stackoverflow.com/a/5619567/440502)。

# c++ - 如何知道 sigsetjmp 或 siglongjmp 是否失败？

> ID：10193889
> 
> 赞同：0
> 
> 时间：2012-04-17T15:09:39.503
> 
> 标签：c++, system-calls

这些函数的返回值并不意味着它们是否成功。有没有办法知道呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:19:50.460

`sigsetjmp`不能失败 - 它只是将调用者的上下文存储到提供的缓冲区中。

`siglongjmp`不返回，因此无法通过返回值指示失败。您必须确保缓冲区在调用它之前是有效的。

在 C++ 中，您通常不能使用这些函数；`longjmp`如果调用堆栈上有任何具有非平凡析构函数的自动对象，则调用会给出未定义的行为`setjmp`。

# sql - 如何使用 Inner Join 和 Case 语句更新表

> ID：10193893
> 
> 赞同：2
> 
> 时间：2012-04-17T15:09:58.413
> 
> 标签：sql, sql-server

问题 ：

表格1

```
CatId - -   Type - -    Qty
==============================
8        ||    O   ||   10
8        ||    N   ||   20
8        ||    U   ||   30
30       ||    N   ||   5
30       ||    O   ||   15
30       || NULL   ||   25 
```

* * *

表2

```
catId -- Old -    -New -- Useless -- Other
========================================
8      || 100   || 70   ||  140      || 110
30     || 10    || 20   ||  30       || 50 
```

* * *

结果：用表 1 更新表 2

```
-------------------------------------------------
catId --   Old --   New -- Useless -- Other
8       || 90    || 50  ||  110     || 110
30      ||  5    ||  5  ||  30      || 25 
```

结果应该如何：

表 1 和表 2 有一个共同的列 CatId。

```
Column of table 1 Type is connects with Table2  
    AS  (Old - O / New - N / Useless - U / Other - NULL) 
```

我想减去 Like table2(Respective O/N/U/Other) = table2(Respective O/N/U/Other) - table1(Type) 并且更喜欢没有循环的解决方案

我试过了，但不能正常工作——

```
Update Table2
Set New = New - (CASE Type WHEN 'N' THEN (Table1.qty) Else 0 End),
    Old = Old  - (CASE Type WHEN 'O' THEN (Table1.qty) Else 0 End),
    Old = Old  - (CASE Type WHEN 'O' THEN (Table1.qty) Else 0 End),
    Other= Othere- (CASE Type WHEN is Null THEN (Table1.qty) Else 0 End)
from table1 
inner join table2 
On table1.catId = table2 .catId 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:23:21.207

尝试这个

```
Update t2
Set New = New - (CASE WHEN type='N' THEN (t1.qty) Else 0 End),
    Old = Old  - (CASE WHEN type='O' THEN (t1.qty) Else 0 End),
    Useless = Useless  - (CASE WHEN type='U' THEN (t1.qty) Else 0 End),
    Other= Other - (CASE WHEN type is Null THEN (t1.qty) Else 0 End)
from Table1 t1
inner join Table2 t2
On t1.catId = t2.catId 
```

什么问题：

*   在`Update`with 连接中，使用别名（`t2`在我们的例子中）指定更新表。请参阅[TSQL 更新语句的文档](http://msdn.microsoft.com/en-us/library/ms177523.aspx)
*   该`Old = Old - [...]`行被重复 - 我`Useless = [...]`改为放置该行
*   `CASE`语法错误：（是错误的`CASE <var> WHEN <value> [...]`；`CASE WHEN <condition> THEN <value> [...]`是正确的）请参阅[TSQL CASE 语句的文档](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:36:32.797

你可以这样做。我首先使用 a`PIVOT`来更改 Table1 的设置，然后对 table2 执行 JOIN。这为您提供了您想要的结果。这将向您显示`SELECT`您想要的数据

```
create table #t1
(
    catid int,
    type varchar(5),
    qty int
)
create table #t2
(
    catid int,
    old int,
    new int,
    useless int,
    other int
)

insert into #t1 values(8, 'O', 10)
insert into #t1 values(8, 'N', 20)
insert into #t1 values(8, 'U', 30)
insert into #t1 values(30, 'N', 5)
insert into #t1 values(30, 'O', 15)
insert into #t1 values(30, null, 25)

insert into #t2 values(8, 100, 70, 140, 110)
insert into #t2 values(30, 10, 20, 30, 50)

select t2.catid 
    , t2.Old - t1.old as Old
    , t2.new - t1.new as New
    , t2.Useless - t1.useless as Useless
    , t2.other - t1.other as Other
from #t2 t2
INNER JOIN 
(
    select catid
        , IsNull([O], 0) as Old
        , IsNull([N], 0) as New
        , IsNull([U], 0) as useless
        , IsNull([null], 0) as other
    from
    (
        select catid, type, qty
        from #t1
    ) x
    PIVOT
    (
        max(qty)
        for type in([O], [N], [U], [null])
    ) p
) t1
    on t2.catid = t1.catid 
```

结果：

```
catid   Old   New   Useless   Other
8       90    50    110       110
30      -5    15    30        50 
```

这是一个[sqlfiddle](http://sqlfiddle.com/#!3/9c004/1)及其工作的演示。

然后，如果您想要`UPDATE`table2，您将执行以下操作：

```
UPDATE t2
SET t2.Old = t2.Old - t1.old
    , t2.new  = t2.new - t1.new
    , t2.Useless = t2.Useless - t1.useless
    , t2.other = t2.other - t1.other
from #t2 t2
INNER JOIN 
(
    select catid
        , IsNull([O], 0) as Old
        , IsNull([N], 0) as New
        , IsNull([U], 0) as useless
        , IsNull([null], 0) as other
    from
    (
        select catid, type, qty
        from #t1
    ) x
    PIVOT
    (
        max(qty)
        for type in([O], [N], [U], [null])
    ) p
) t1
    on t2.catid = t1.catid 
```

# c# - 我们如何从 HTTP 处理程序传递执行

> ID：10193896
> 
> 赞同：1
> 
> 时间：2012-04-17T15:10:09.963
> 
> 标签：c#, asp.net, .net, iis, httphandler

我们创建了自己的重定向 httpHandler 来接受所有请求（verb="*", path="*"）：

```
 <system.webServer>        
         <handlers>
            <remove name="Redirect" />
        <add name="staticFileHandler" path="*.html" type="System.Web.StaticFileHandler" verb="GET,HEAD"  />
        <add name="Redirect" path="*" verb="*" type="RedirectModule.RedirectHandler, 
RedirectModule, Version=1.0.0.0, Culture= neutral, publicKeyToken=77c8b6b494e19eeb" resourceType="Unspecified" preCondition="integratedMode" />         
        </handlers>
    </system.webServer> 
```

在 http 处理程序中，我们有代码检查 URL 并在浏览器是移动的情况下重定向。在这种情况下，如果浏览器不是移动浏览器或者我们已经重定向，我们希望继续执行静态文件并显示它们的内容。

我们遇到的问题是，因为我们使用的 http 处理程序接受所有请求，所以 StaticFileHandler 不处理 HTML 文件，我们总是得到一个白屏。

我们如何通过代码或 web.config 将执行从 httphandler 传递到 staticFileHandler。

感谢任何帮助。

奥利特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:15:37.587

处理程序应该只决定*如何*处理文件扩展名（物理的或逻辑的），而不是*何时*。我认为您的意思是创建一个模块。

请参阅Jon Galloway 的[这个答案和](https://stackoverflow.com/a/6449232/151445)[这篇](http://msdn.microsoft.com/en-us/library/bb398986.aspx)关于处理程序和模块的 MSDN 文章。

编辑：另外，查看[ASP.NET/Mobile](http://www.asp.net/mobile)的第一个 How-To。它展示了如何在 Web 窗体和 MVC 中实现这一点。

# camera - 如何从视频流中嵌入的松下 smartHD 摄像头获取人脸检测信息？

> ID：10193898
> 
> 赞同：1
> 
> 时间：2012-04-17T15:10:16.073
> 
> 标签：camera, face-detection

我有一台松下 WV SP-306 数码相机。它具有内置的人脸检测功能，信息可以通过xml通知发送或嵌入到视频流中。我试图弄清楚如何从 mjpeg 流中获取这些信息。

到目前为止我的发现：

我在[这里找到了官方文档和 SDK](http://panasonic.net/pss/security/library/developer.html)

有一个描述 jpeg 标头格式（[Panasonic Camera JPEG Format](http://ssbu-t.psn-web.net/For_developer/IP_camera/English/Panasonic_Camera_JPEG_Format_V1.00.pdf)）的 PDF 文档根据该文档，`FF FE`字节和两个长度字节之后的 jpeg 标头由部分组成。每个部分有 2 个字节的 ID，后跟 2 个字节表示长度。然后是部分的正文。文档中描述了三个部分：ID 为 0010 的部分（与运动检测有关）、`ID 0011`（时间信息）和`ID 0012`（帧信息，它有一些关于帧时间的信息，不确定它的用途）。

当我打开人脸检测功能时，会出现第四部分。它的 ID 为 000F，文档中没有描述。

示例程序和库参考也没有用。我对人脸检测所能做的就是打开或关闭它并设置人脸检测矩形的颜色。我认为流中人脸检测数据的所有处理都是由库完成的。

所以，我的问题是：谁能告诉我如何从流中获取这台相机提供的人脸检测数据？

# machine-learning - 使用哪种算法进行文本识别？

> ID：10193899
> 
> 赞同：-1
> 
> 时间：2012-04-17T15:10:21.220
> 
> 标签：machine-learning

我正在使用朴素贝叶斯来实现文本识别算法。我的数据库中有一个相当大的训练集，算法几乎完成了。但是有一个问题，在测试过程中，将一个文本从只有 2 个类分类到一个类的时间几乎需要 5 秒。如果我有 60 节课，这将需要一分钟多的时间。我猜速度是对的，因为我将文本中的每个单词都扔给我的算法并计算。但是......我想知道除了朴素贝叶斯之外，还有什么更快的算法可以使用吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:51:22.007

问题可能不是算法，而是您的实现。使用分析器查找修复性能瓶颈或重用现有文本分类库（例如 python 中的 nltk 或 java 中的 opennlp）所花费的时间。

# ruby-on-rails - 在 RoR 中查找并显示最近的日期

> ID：10193900
> 
> 赞同：1
> 
> 时间：2012-04-17T15:10:27.850
> 
> 标签：ruby-on-rails

我是 ruby​​ on rails 的新手，我不知道从哪里开始。我有一个用户模型和一个项目模型。用户有很多项目，项目有一个用户。项目表中有一个 end_date 列（以及一个名称列）。

我想要做的是找到最近 end_date 的项目，并在用户的显示页面上显示它的名称和结束日期。

我尝试将此代码放在项目控制器中，但我不知道它是否有效，因为我不知道如何访问它并在视图中显示项目名称。

```
def next_deadline(after = DateTime.now, limit = 1)
   find(:all, :conditions => ['end_date > ?', after], :limit => limit)
end 
```

任何帮助，将不胜感激。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:34:50.197

正如@Dan 提到的，您确实需要该`:order`子句来获取第一个子句，但您应该将其添加到您的查询中而不是替换（否则无论您的论点如何，您`:conditions`都将获得最早的项目）。不过，您定义此方法的方式有点偏离。它应该在您的模型（绝对**不是**控制器）中定义为类方法，或者，我认为更好的方法，作为范围。在 Rails < 3 中（您似乎正在使用它）：`end_date``after``Project`

 **```
class Project < ActiveRecord::Base
  named_scope :next_deadline, Proc.new { |after = DateTime.now, limit = 1| {:conditions => ['end_date > ?', after], :order => "end_date ASC", :limit => limit} }
  ...
end 
```

或者在 Rails >= 3 中：

```
class Project < ActiveRecord::Base
  scope :next_deadline, Proc.new { |after = DateTime.now, limit = 1| where('end_date > ?', after).order("end_date ASC").limit(limit) }
  ...
end 
```

此外，您始终可以使用 Rails 控制台测试此类代码：`script/console`在 Rails < 3 中，`rails c`在 Rails >= 3 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:27:46.203

```
@projects = Project.find_by_sql("SELECT projects.* FROM projects
  JOIN users ON users.id = projects.user_id AND projects.user_id = " + @user.id.to_s + "
  WHERE projects.end_date > now()
  ORDER BY projects.end_date ASC
  LIMIT " + limit) 
```

或者

```
@projects = Project.where(:user_id => @user.id)
                   .where("end_date > ?", DateTime.now)
                   .order("end_date ASC") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:18:56.800

你想使用:order，而不是:conditions。

```
 Model.find(:all , :order => "end_date ASC") 
```

那么第一个结果将是最接近 end_date 的项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T15:25:15.747

正如丹所说，您编写的条件不会获得最近的结束日期，而是大于今天的日期，或者作为参数传入的日期。

在您的用户模型中，您可以编写

```
def next_deadline_project
   self.projects.first
end 
```

只要您给项目一个按 end_date 排序记录的默认范围

为了在视图上显示信息，您必须在用户控制器的 show 方法中将其设置在实例变量中。实例变量被传递给视图，您可以访问它们以显示数据。

```
@project = next_deadline_project 
```

在你的 show.html.erb 你可以使用类似的东西：

```
<%= @project.name %> - <%= @project.end_date %> 
```**

# php - 需要通过 php 文件激活 wordpress 站点的插件

> ID：10193906
> 
> 赞同：1
> 
> 时间：2012-04-17T15:11:02.353
> 
> 标签：php, wordpress, function, plugins

我打算在我的 wordpress 网站上更新电子商务插件（Shopp），它要求我停用它。一旦我这样做了，我就失去了整个网站。我正在尝试通过 php 文件激活插件，但不确定我在做什么并需要一些帮助。有谁知道我如何通过 php 文件在我的网站上激活 Shopp 插件（或任何插件）？

* * *

这是我用来获取字符串的代码：

```
 $unserialized = unserialize('a:14:{i:0;s:19:"akismet/akismet.php";i:1;s:37:"breadcrumbs-plus/breadcrumbs-plus.php";i:2;s:35:"googleanalytics/googleanalytics.php";i:3;s:45:"grunion-contact-form/grunion-contact-form.php";i:4;s:43:"image-caption-links/image-caption-links.php";i:5;s:29:"image-widget/image-widget.php";i:6;s:13:"rate/rate.php";i:7;s:33:"restore-jquery/restore-jquery.php";i:8;s:41:"shopp-cache-helper/shopp-cache-helper.php";i:9;s:47:"shopp-default-breadcrumb-extender-sdbe/sdbe.php";i:10;s:33:"shopp-improved/shopp-improved.php";i:11;s:19:"shuffle/shuffle.php";i:12;s:19:"vslider/vslider.php";i:13;s:41:"wordpress-importer/wordpress-importer.php";}');
array_push($unserialized, 'shopp/shopp.php');
$serialized = serialize($unserialize);
echo $serialized; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:32:35.920

活动插件不存储在 PHP 文件中。它存储在数据库中。打开`wp_options`数据库中的表。查找`option_name`字段值为 的行`active_plugins`。在这一行中，查找 的值`option_value`。您将看到一个包含活动插件信息的序列化字符串。

现在，直接编辑字符串可能会有点混乱，特别是如果您不熟悉序列化字符串的格式。所以，我建议你复制字符串并`unserialize()`在上面使用 PHP 函数，然后返回一个数组。之后，使用`array_push()`添加另一个元素，其中的值是插件文件的路径（例如“akismet/akismet.php”，在您的情况下它可能是“shopp/shopp.php”）。添加另一个元素后，使用`serialize()`并复制返回的字符串并替换数据库中的旧序列化字符串。

```
$unserialized = unserialize('...');
array_push($unserialized, 'shopp/shopp.php');
$serialized = serialize($unserialized);
echo $serialized; // Copy this output back into the database 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T15:34:11.410

[此站点上](http://grinninggecko.com/activating-deactivating-wordpress-plugins-programmatically/)有有关如何以编程方式激活和停用插件的详细信息。这是一个片段：

```
function toggle_plugin() {

    // Full path to WordPress from the root
    $wordpress_path = '/full/path/to/wordpress/';

    // Absolute path to plugins dir
    $plugin_path = $wordpress_path.'wp-content/plugins/';

    // Absolute path to your specific plugin
    $my_plugin = $plugin_path.'my_plugin/my_plugin.php';

    // Check to see if plugin is already active
    if(is_plugin_active($my_plugin)) {

        // Deactivate plugin
        // Note that deactivate_plugins() will also take an
        // array of plugin paths as a parameter instead of
        // just a single string.
        deactivate_plugins($my_plugin);
    }
    else {

        // Activate plugin
        activate_plugin($my_plugin);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-26T10:32:42.040

*对于每个有插件行为怪异的人*

在停用、激活、安装、更新插件后被锁定时重新获得对您网站的访问权限的最简单方法是：

*   转到您的虚拟主机管理面板（Cpanel、DirectAdmin）
*   转到文件（文件管理器）
*   转到 //wp-content/ 并将您的“plugins”文件夹重命名为其他名称，例如“plugins_off”

*   转到您的 WP 管理员。您将可以再次访问，但看不到插件。

*   返回您的虚拟主机管理面板并将“plugins_off”重命名为“plugins”。

现在您的插件都将在 WP-admin 中再次列出，但都已停用。从那里拿走它。

无需添加 PHP 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-08T04:50:58.543

Like RST 写道：无需编码即可恢复停用插件后崩溃的网站。网站崩溃是有充分理由的，因为其他插件依赖于该停用的插件（如 WooCommerce）。

恢复站点并访问 WP 管理员的最简单方法是重命名插件文件夹，刷新页面，返回并将文件夹重命名为“插件”，然后再次点击刷新。所有插件都将像以前一样恢复，只是它们都被停用了。现在您需要做的就是再次激活它们。一个一个地做，以确保没有其他崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-14T12:35:23.380

这是工作代码（只需取消注释“激活”行）：

```
function MY_toggle_plugins() {
    include_once( ABSPATH . 'wp-admin/includes/plugin.php' );
    $temp_files1 = glob(WP_PLUGIN_DIR.'/*'); 
    $activated=array();
    $already_active=array();
    foreach($temp_files1 as $file1){
        if(is_dir($file1)) { 
            $temp_files2 = glob($file1 . '/*');
            foreach($temp_files2 as $file2){
                if(is_file($file2) && stripos(file_get_contents($file2),'Plugin Name:')!==false) { 
                    $plugin_name_full=basename(dirname($file2)).'/'.basename($file2);
                    if(is_plugin_active($plugin_name_full)) {
                        array_push($already_active, $plugin_name_full); 
                        //deactivate_plugins($plugin_name_full);
                    }
                    else{
                        array_push($activated, $plugin_name_full);
                        //activate_plugin($plugin_name_full);
                    }
                }

            }
        }
    }
    echo 'You have activated these plugins:<br/><br/>'.serialize($activated).'<br/><br/>These were already active:<br/><br/>'.serialize($already_active); exit;
} 
//execute
MY_toggle_plugins(); 
```

# php - 将 1 列 mysql 结果添加到另一个 mysql 结果的结果中

> ID：10193907
> 
> 赞同：1
> 
> 时间：2012-04-17T15:11:07.630
> 
> 标签：php, mysql

目前我有2个不同的mysql查询：

查询 1

```
SELECT monthname( calendar.datefield ) AS date,
    year(calendar.datefield) as year, calendar.datefield, COUNT(all_griefs_tbl.actioned_status ) AS total_griefs,
    all_griefs_tbl.actioned_status, all_griefs_tbl.game
FROM all_griefs_tbl 
RIGHT JOIN calendar 
  ON ( DATE(all_griefs_tbl.actioned_date ) = calendar.datefield )
    AND all_griefs_tbl.actioned_status = 'accepted'
WHERE calendar.datefield
  BETWEEN DATE_ADD(CURDATE(), INTERVAL -12 MONTH)  AND CURDATE()
GROUP BY year( calendar.datefield ) DESC , month( calendar.datefield ) DESC 
```

查询 2

```
SELECT monthname( calendar.datefield ) AS date, 
    year(calendar.datefield ) AS year, calendar.datefield,
    COUNT(all_griefs_tbl.actioned_status ) AS total_submitted,
    all_griefs_tbl.actioned_status, all_griefs_tbl.game 
FROM all_griefs_tbl 
RIGHT JOIN calendar 
  ON ( DATE( all_griefs_tbl.date ) = calendar.datefield ) 
WHERE calendar.datefield BETWEEN DATE_ADD( CURDATE( ) , INTERVAL -12 MONTH ) AND CURDATE( ) 
GROUP BY year( calendar.datefield ) DESC , month( calendar.datefield ) DESC 
```

现在这些之间的区别在于查询 1 我正在计算每月接受的悲伤的数量，而在查询 2 中我正在计算每月提交的记录数 - 计算不同的列

我想做的是a）将其放入单个查询中或b）能够将结果合并到1个表中。

我希望输出如下：

```
 Month         Year          Total Griefs  Total Submitted
    ------------  ------------  ------------  ------------  
    April         2012          14            2      
    March         2012          0             8
    February      2012          0             6
    January       2012          0             13
    December      2011          0             7
    November      2011          0             10
    October       2011          0             0
    September     2011          0             0
    August        2011          0             6
    July          2011          0             3
    June          2011          0             2
    May           2011          0             0
    April         2011          0             0 
```

这是可能的，还是我完全找错了树？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:20:47.820

您可以在一个查询中执行此操作：

```
SELECT 
    monthname( calendar.datefield ) AS date,
    year(calendar.datefield) as year, 
    calendar.datefield,
    SUM(IF(all_griefs_tbl.actioned_status = 'accepted', 1, 0)) AS total_griefs,
    COUNT(all_griefs_tbl.actioned_status ) AS total_submitted,
    all_griefs_tbl.actioned_status, 
    all_griefs_tbl.game 
FROM 
    all_griefs_tbl 
RIGHT JOIN 
    calendar ON ( DATE(all_griefs_tbl.actioned_date ) = calendar.datefield ) 
WHERE 
    calendar.datefield BETWEEN DATE_ADD(CURDATE(), INTERVAL -12 MONTH)  AND CURDATE() 
GROUP BY year( calendar.datefield ) DESC , 
    month( calendar.datefield ) DESC 
```

**编辑：**这有点不正统，但它（很可能）会给你你所追求的：

```
SELECT
    month(date_add(curdate(), interval seq.mm months)),
    year(date_add(curdate(), interval seq.mm months)),
    (SELECT count(1)
       FROM all_griefs_tbl
      WHERE actioned_status = 'accepted'
        AND month(action_date) = month(date_add(curdate(), interval seq.mm months))
        AND year(action_date) = year(date_add(curdate(), interval seq.mm months))) as total_griefs
    (SELECT count(1)
       FROM all_griefs_tbl
        AND month(date) = month(date_add(curdate(), interval seq.mm months))
        AND year(date) = year(date_add(curdate(), interval seq.mm months))) as submitted_griefs
FROM
    (SELECT -12 as mm UNION SELECT -11  as mmUNION SELECT -10  as mmUNION SELECT -9  as mm
     UNION SELECT -8 as mm UNION SELECT -7  as mm UNION SELECT -6 as mm UNION SELECT -5 as mm
     UNION SELECT -4 as mm UNION SELECT -3 as mm UNION SELECT -2 as mm UNION SELECT -1 as mm) seq
ORDER BY
    mm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:19:45.077

如果输出与 2 个查询相同，则可以`UNION`与查询一起使用。

所以添加`NULL AS total_griefs,`和`NULL AS total_submitted,`查询，所以输出匹配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:22:14.430

试试这个（我真的无法测试它）

```
SELECT monthname(calendar.datefield) AS date, 
       year(calendar.datefield) as year, 
       calendar.datefield, 
       SUM(CASE all_griefs_tbl.actioned_status 
               WHEN 'accepted' THEN 1 
               ELSE 0 
           END CASE) AS total_griefs,
       COUNT(all_griefs_tbl.actioned_status) AS total_submitted,
       all_griefs_tbl.actioned_status, 
       all_griefs_tbl.game 
FROM all_griefs_tbl RIGHT JOIN calendar 
    ON DATE(all_griefs_tbl.actioned_date) = calendar.datefield 
WHERE calendar.datefield 
    BETWEEN DATE_ADD(CURDATE(), INTERVAL -12 MONTH) AND CURDATE() 
GROUP BY year(calendar.datefield) DESC, 
         month(calendar.datefield) DESC 
```

# ios - 创建具有删除功能的自定义 UIButton 类

> ID：10193908
> 
> 赞同：2
> 
> 时间：2012-04-17T15:11:09.817
> 
> 标签：ios, objective-c, iphone, xcode, uibutton

我有一个 UIButtons 网格。当我点击“编辑”按钮时，我希望在每个按钮上出现一个删除按钮，按下该按钮会删除按钮（和相关数据）。有点像苹果的主屏幕，当你按住一个按钮时，它开始摆动，角落里有一个 X。

根据这篇文章：[Subclass UIButton to add a property](https://stackoverflow.com/questions/5500327/subclass-uibutton-to-add-a-property)我可以使用关联引用为我的每个按钮添加一个属性。我试图添加一个 UIButton 作为我的自定义 UIButton 的属性，但我似乎无法让它出现并且感觉这不是正确的方法。这是我的自定义按钮主要：

```
 #import "UIButton+Property.h"
#import <objc/runtime.h>

@implementation UIButton(Property)

static char UIB_DELETEBUTTON_KEY;

@dynamic deleteButton;

- (void)setDeleteButton:(UIButton *)deleteButton {
    deleteButton = [UIButton buttonWithType:UIButtonTypeInfoDark];
    deleteButton.frame = CGRectMake(100, 100, 50, 50);
    objc_setAssociatedObject(self, &UIB_DELETEBUTTON_KEY, deleteButton, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (UIButton *)deleteButton {
    return (UIButton *)objc_getAssociatedObject(self, &UIB_DELETEBUTTON_KEY);
}

@end 
```

这是我以编程方式添加按钮的地方：

```
//Create a custom button for each custom book doc
for (int i = 0; i < [customBookDocs count]; ++i) {
    BookDoc *customBookDoc = [customBookDocs objectAtIndex:i];
    NSString *bookTitle = customBookDoc.book.title;

    //create a button for each book
    CGRect frame = CGRectMake(xCoord, yCoord, 200, 200);
    UIButton *bookButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    bookButton.bookDoc = customBookDoc;
    [bookButton setFrame:frame];
    [bookButton setTitle:bookTitle forState:UIControlStateNormal];
    [bookButton addTarget:self action:@selector(bookButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    xCoord += 250;

    [self.view addSubview:bookButton];
    [self.view addSubview:bookButton.deleteButton];
} 
```

有没有更简单更明智的方法来做到这一点？还是我走在正确的轨道上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:28:36.127

原始响应开始：

...其他人可能对此有更多话要说，但我不确定您为什么需要在这里使用对象关联。您当然可以使用常规子类化将另一个按钮作为属性添加到您的按钮，这是我将采用的路线。...

以下编辑：

本来以为直接子类化了一个UI控件，结果去找代码的时候才发现自己搞错了。@Joe 在评论中正确地指出直接子类化 UI 控件存在问题。

通过创建一个包装类来保存按钮及其相关的删除按钮，我能够在不使用关联对象的情况下实现类似于您描述的功能。它可以工作，但不是很灵活，所以我通常会推荐@Joe 的方法作为更好的解决方案。

以下是相关代码：

为了简单起见，我将所有代码都放入了 appDelegate 中。我不建议在现实生活中这样做。

AppDelegate.m:

```
@implementation AppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    self.window.backgroundColor = [UIColor whiteColor];

    UIButton *toggleDeleteButtons = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [toggleDeleteButtons setFrame:CGRectMake(20, 45, 280, 45)];
    [toggleDeleteButtons setTitle:@"Toggle Delete" forState:UIControlStateNormal];
    [toggleDeleteButtons addTarget:self action:@selector(toggleDeleteButtonAction) forControlEvents:UIControlEventTouchUpInside];
    [[self window] addSubview:toggleDeleteButtons];

    ButtonWrapper *myButtonWrapper = [[ButtonWrapper alloc] init];
    [[myButtonWrapper button] setFrame:CGRectMake(20, 100, 200, 45)];
    [[myButtonWrapper button] setTitle:@"This is my button" forState:UIControlStateNormal];
    [[myButtonWrapper deleteButton] addTarget:self action:@selector(buttonDeleteRequested:) forControlEvents:UIControlEventTouchUpInside];
    [[myButtonWrapper deleteButton] setTag:0];
    [[self window] addSubview:[myButtonWrapper button]];
    buttonWrapper1 = myButtonWrapper;

    // Added instance called anotherButtonWrapper with tag 1, as above

    // Added instance called stillAnotherButtonWrapper with tag 2, as above

    [self.window makeKeyAndVisible];
    return YES;
}

- (void)toggleDeleteButtonAction {
    static BOOL deleteButtonsShown;

    [buttonWrapper1 showDeleteButton:!deleteButtonsShown];
    [buttonWrapper2 showDeleteButton:!deleteButtonsShown];
    [buttonWrapper3 showDeleteButton:!deleteButtonsShown];
    deleteButtonsShown = !deleteButtonsShown;
}

- (void)buttonDeleteRequested:(UIButton *)deleteButton {
    // delete the specified button here
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Delete" message:[NSString stringWithFormat:@"Delete was pressed on button %i",[deleteButton tag]]delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
} 
```

ButtonWrapper.m：

```
@implementation ButtonWrapper

@synthesize button;
@synthesize deleteButton;

- (ButtonWrapper *)init {
    ButtonWrapper *newWrapper = [ButtonWrapper alloc];

    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [myButton setFrame:CGRectZero];

    UIButton *myDeleteButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [myDeleteButton setFrame:CGRectMake(0, 0, 100, 40)];
    [myDeleteButton setTitle:@"Delete" forState:UIControlStateNormal];
    [myDeleteButton setHidden:TRUE];
    [myButton addSubview:myDeleteButton];

    [newWrapper setButton:myButton];
    [newWrapper setDeleteButton:myDeleteButton];

    return newWrapper;
}

- (void)showDeleteButton:(BOOL)showButton {
    if (showButton) {
        [[self deleteButton] setHidden:FALSE];
        [[self deleteButton] setEnabled:TRUE];    }
    else {
        [[self deleteButton] setHidden:TRUE];
        [[self deleteButton] setEnabled:FALSE];
    }
}
@end 
```

这个解决方案不需要我实现所有的 UI 属性，但它确实需要额外的工作来连接嵌入式委托，这很麻烦。可能有一种方法可以在初始化时将代表传递到包装器中，但我无法使其工作。

# iphone - 使用 NSPredicate 从关系中检索核心数据中的信息

> ID：10193911
> 
> 赞同：3
> 
> 时间：2012-04-17T15:11:15.800
> 
> 标签：iphone, ios, core-data, nspredicate

你好我有这个核心数据：

![在此处输入图像描述](../Images/ebc7234989b06fb3d2bac19e2933e285.png)

然后我这样做：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription 
                           entityForName:@"MyDate"  inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity]; 
```

现在我想使用 NSPredicate 仅将 MyDate 与 Task 用于具有 isView = NO 和 taskDate <= 今天的任务关系，并且每个 MyDate 的所有 Task 的计数> 0 ...有一种方法?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:05:16.957

我没有足够的评论点，所以跳出尼基塔的回答，你需要做的就是以下几点：

`NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY taskes.isView = NO AND ANY taskes.taskDate <= %@", todayDate];`

您可以获得今天日期的一种方法（可能有更好的方法）：

```
NSDate *date = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"dd/MM/yyyy"];
NSString *dateString = [dateFormat stringFromDate:date];
NSDate *todayDate = [dateFormat dateFromString:dateString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:58:21.233

使用`[NSPredicate predicateWithFormat:@"taskes.@count>0 AND (ANY (taskes.isView = NO AND taskes.taskDate<%@)",today]; "` 不确定，但也许它会工作

# wcf - SyncFramework 2.1 更新和删除似乎无法正确应用

> ID：10193915
> 
> 赞同：2
> 
> 时间：2012-04-17T15:11:27.117
> 
> 标签：wcf, microsoft-sync-framework

我正在使用 SyncOrchestrator 或专门使用[http://code.msdn.microsoft.com/windowsdesktop/Database-SyncSQL-Server-e97d1208](http://code.msdn.microsoft.com/windowsdesktop/Database-SyncSQL-Server-e97d1208)将SQL Server 2008 与 ~6 个 SQL Server 2008 Express 客户端（我相信的所有 R2 客户端）同步稍作修改的基础。据我所知，这意味着所有连接都是对等点或节点。

我有 2 个范围。一种是仅下载，另一种是仅上传。仅下载范围充满了身份列，主要是因为我不知道更好，并且仍然无法将Guids作为客户端的PK引入。这并不完全重要，因为所有客户端都应该有大约 8 个左右表的精确副本，并且这些机器不会以任何方式接触这些数据，只会读取它。

仅上传范围使用 Guid，幸运的是我可以控制数据库的那部分，并且所有使用相同身份种子的 10 个客户端都无法正确同步回服务器。两个范围都使用带有批量插入和整个 9 码的默认配置，因此我在配置端不应该做任何事情来搞砸这个。

我最初没有使用 PerformPostRestoreFixup 设置所有内容，并且初始数据库将与来自主机的插入语句手动同步。这似乎很好，但似乎没有应用更新或删除。您可以放心地忽略这一点（仅用于历史准确性并证明我的无能），因为我随后使用 VS2010 数据库项目将数据库重建为仅模式并同步。然后我使用了此处概述的步骤 (http://social.microsoft.com/Forums/br/syncdevdiscussions/thread/9ac6d1a1-1565-4b82-a8d8-3d4a9ff5d07b) （同步、备份、恢复、调用 performpostrestorefixup、在 x 客户端上同步) 在我设置所有这些的开发框中，我可以看到更新和删除就好了。当我将它部署到 x 客户端时，我没有看到我认为应该的数据库镜像。

初始同步会报错并尝试再次同步所有记录。我相信这是意料之中的。在客户端上的 ApplyChangeFailed 事件期间，我将 DbConflictType.ErrorsOccurred 以外的所有内容都设置为 ApplyAction.RetryWithForceWrite。这可能是问题的根源，因为我最初认为应该这样做以强制将更改交给客户端。我希望服务器在这种情况下始终获胜，但在跟踪期间，我总是在批量插入/更新调用期间看到短语“本地获胜”。在重新申请之前我可能会看到错误，但看起来很尴尬。

我似乎遇到的唯一问题是仅下载范围。初始客户端数据库现在大约有一周的历史，如果我使用 performpostrestorefixup 步骤，我看不到任何从现在到那时应用的更新，因为我认为我应该这样做。就好像 SyncFx 几乎更喜欢客户端上的空白数据库来启动初始同步，然后所有更新似乎都可以正常应用，而不会启动任何 ApplyChangesFailed 事件。

如果有人以前见过这个或有线索去哪里，我将不胜感激。我的大脑一直在试图确定这是怎么回事。我最后的努力是将空白​​数据库部署到所有客户端并让它们开始同步。我在开发方面对此没有任何问题，但我只能测试另一个客户端以了解这是否会有所不同。除此之外，除了继续进行手动同步之外，我不知道该怎么做，这将完全破坏这个目的。我认为 PerformPostRestoreFixup 会完全缓解这个问题，但不管有没有它，我似乎都遇到了同样的问题，或者我可能没有考虑我需要做什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:09:34.090

我想用我的发现报告并关闭该条目。

当我部署以前配置的客户端数据库时，我经常会以以下日志的形式收到 ApplyChangeFailed 事件：

“[05:30:41 PM] - ApplyChange 失败：TableName：，阶段：ApplyingInserts，ConflictType：LocalInsertRemoteInsert，操作：RetryWithForceWrite”

这是我认为的预期，因为它试图重新插入已经存在的数据。这应该被更改为 RetryWithForceWrite 期间的更新语句，但我发现数据没有随着发送的内容而更新。

一旦我使用完全空白的数据库启动每个客户端并在本地进行配置，所有这些错误都消失了。就好像每个客户都期望一些只有它设置的唯一 ID。我还使用 x64 构建与 x86 相比，这可能对结果有一些影响或没有影响。我希望我能确定到底发生了什么，但似乎在有疑问时，只要有可能，从绝对零开始并让同步填充数据是您最安全的选择。

# javascript - Android phonegap 访问jarfile

> ID：10193916
> 
> 赞同：2
> 
> 时间：2012-04-17T15:11:31.320
> 
> 标签：javascript, android, cordova

我刚刚开始使用phonegap。我有一些实现的库（jar），我想通过 javascript 访问它们。我一直在寻找一个例子来做到这一点，但我没有找到任何。如果您知道任何链接或教程，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:39:53.103

这是一个[教程](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt3)，展示了如何将条形码扫描仪库与 PhoneGap 应用程序的插件一起使用。（请注意，它是为 PhoneGap 1.4.1 编写的，因此如果您使用更新的 PhoneGap/Cordova 版本，则必须进行适当的命名空间更改。）

# java - 如何通过列表 param generically This is my generic construtor public TreeContainer(Class <t>type, Object parentPID, List childrensPID) throws IllegalArgumentException { super(type); this.paren 问问题 问问题 2012-04-17T15:11:45.950 133 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. This is my generic construtor public TreeContainer(Class <t>type, Object parentPID, List childrensPID) throws IllegalArgumentException { super(type); this.parentPID = parentPID; this.childrensPID = childrensPID; } This is my bean (with getter setter) public class DirectoryBean implements Serializable { private long id; private String name; private DirectoryBean parent; private List <directorybean>childrens; } I create a new Tree Container like this TreeContainer <directorybean>treeContainer = new TreeContainer<directorybean>(DirectoryBean.class,"parent", "childrens" ); But the "childrens" parameter is illegal, how can i pass the list params in this situation Probably would be sufficient to change it to ? extends Object. However, the purpose of using generics here is to limit the range of data types. You'd be better off doing something like: ? extends BeanBaseObject java 4 2 回答 2 This answer is useful 1 Your constructor expects this List childrensPID but you are passing a String "childrens". You can get around it by putting it in a list. List childrens = new ArrayList(); childrens.add("childrens"); new TreeContainer<directorybean>(DirectoryBean.class,"parent", childrens ); 于 2012-04-17T15:16:25.110 回答 This answer is useful 1 可能足以将其更改为? extends Object. 但是，这里使用泛型的目的是限制数据类型的范围。你最好做类似的事情： ? extends BeanBaseObject 于 2012-04-17T15:13:43.730 回答 Related 2 wcf - 端口配置 2 linux - Bash 文件显示“ln: command not found” 1 dart - 为什么这个简单的 Dart 代码编译不出来？ 1 python - 写入具有多个池的文件 3 php - 在数组中取消排序 2 java - 在Java应用程序中交换鼠标按钮 0 wpf - 从 BeginAnimation 获取 DoubleAnimation 参考对象 1 variables - 如何在 onOpen() 之外的电子表格中创建菜单？（Google Apps 脚本） 2 python - 使用 python mjson.tool 在 Bash 中解码 JSON 4 ruby-on-rails - 解析字符串以添加到 URL 编码的 URL Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10193918
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java

This is my generic construtor

```
public TreeContainer(Class<T> type, Object parentPID, List<Object> childrensPID) throws IllegalArgumentException {
    super(type);
    this.parentPID = parentPID;
    this.childrensPID = childrensPID;
} 
```

This is my bean (with getter setter)

```
public class DirectoryBean implements Serializable {
      private long id;
      private String name;
      private DirectoryBean parent;
      private List<DirectoryBean> childrens;    
} 
```

I create a new Tree Container like this

```
TreeContainer<DirectoryBean> treeContainer = new TreeContainer<DirectoryBean>(DirectoryBean.class,"parent", "childrens" ); 
```

But the "childrens" parameter is illegal, how can i pass the list params in this situation

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:16:25.110

Your constructor expects this

```
List<Object> childrensPID 
```

but you are passing a String "childrens". You can get around it by putting it in a list.

```
List<Object> childrens = new ArrayList<Object>();
childrens.add("childrens");
new TreeContainer<DirectoryBean>(DirectoryBean.class,"parent", childrens ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:13:43.730

可能足以将其更改为`? extends Object`. 但是，这里使用泛型的目的是限制数据类型的范围。你最好做类似的事情：

`? extends BeanBaseObject`</directorybean></directorybean></directorybean></directorybean></t></t>

# java - 如何在 Java 中设置 Appengine DataStore 的日志级别

> ID：10193919
> 
> 赞同：4
> 
> 时间：2012-04-17T15:11:53.537
> 
> 标签：java, google-app-engine, datanucleus, java.util.logging

`logging.properties`我的Java AppEngine 项目（使用）中有一个文件，`java.util.logging`如下所示：

```
# Set the default logging level for all loggers to WARNING
.level = INFO

# tighten logging on the DataNucleus Categories
DataNucleus.JDO.level=WARN 
# - All messages general to JDO
DataNucleus.JPA.level=WARN 
#  - All messages general to JPA
DataNucleus.Persistence.level=WARN 
#  - All messages relating to the persistence process
DataNucleus.Query.level=WARN 
#  - All messages relating to queries
DataNucleus.Lifecycle.level=WARN 
#  - All messages relating to object lifecycle changes
DataNucleus.Cache.level=WARN 
#  - All messages relating to the DataNucleus Cache
DataNucleus.ClassLoading.level=WARN 
#  - All exceptions relating to class loading issues
DataNucleus.MetaData.level=WARN 
#  - All messages relating to MetaData
DataNucleus.Management.level=WARN 
#  - All messages relating to Management
DataNucleus.General.level=WARN 
#  - All general operational messages
DataNucleus.Connection.level=WARN 
#  - All messages relating to Connections.
DataNucleus.JCA.level=WARN 
#  - All messages relating to Connector JCA.
DataNucleus.Transaction.level=WARN 
#  - All messages relating to transactions
DataNucleus.Plugin.level=WARN 
#  - All messages relating to DataNucleus plug-ins
DataNucleus.ValueGeneration.level=WARN 
#  - All messages relating to value generation
DataNucleus.Datastore.level=WARN 
#  - All general datastore messages
DataNucleus.Datastore.Schema.level=WARN 
#  - All schema related datastore log messages
DataNucleus.Datastore.Persist.level=WARN 
#  - All datastore persistence messages
DataNucleus.Datastore.Retrieve.level=WARN 
#  - All datastore retrieval messages
DataNucleus.Datastore.Native.level=WARN 
#  - Log of all 'native' statements sent to the datastore
DataNucleus.Enhancer.level=WARN 
#  - All messages from the DataNucleus Enhancer.
DataNucleus.SchemaTool.level=WARN 
#  - All messages from DataNucleus SchemaTool
DataNucleus.IDE.level=WARN 
#  - Messages from the DataNucleus IDE. 
```

可悲的是，现在我收到了日志消息，例如：

```
2012-04-17 16:13:45.112
org.datanucleus.plugin.NonManagedPluginRegistry resolveConstraints: Bundle "org.datanucleus.jpa" has an optional dependency to "org.datanucleus.enhancer" but it cannot be resolved

I 2012-04-17 16:13:45.115    
org.datanucleus.plugin.NonManagedPluginRegistry resolveConstraints: Bundle "org.datanucleus" has an optional dependency to "org.eclipse.equinox.registry" but it cannot be resolved

I 2012-04-17 16:13:45.719
org.datanucleus.PersistenceConfiguration setProperty: Property datanucleus.rdbms.sql.allowAllSQLStatements unknown - will be ignored

I 2012-04-17 16:13:47.806
org.datanucleus.store.appengine.MetaDataValidator validate: Performing appengine-specific metadata validation for in.animeshpathak.nazdeeq.models.Note 
```

有人可以告诉我如何正确配置我的`logging.properties`文件吗？我现在需要通用日志级别才能`INFO`从我的代码中查看调试消息，但想将所有 DataNucleus 日志级别设置为`WARN`.

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T17:13:45.700

实际上，如果您想从代码中查看调试消息，您需要`FINEST`level，而不是`INFO`.

尝试将您的 logging.properties 替换为：

```
# Set the default logging level for all loggers to FINEST
.level=FINEST

# Set the default logging level for ORM, specifically, to WARNING
DataNucleus.JDO.level=WARNING
DataNucleus.Persistence.level=WARNING
DataNucleus.Cache.level=WARNING
DataNucleus.MetaData.level=WARNING
DataNucleus.General.level=WARNING
DataNucleus.Utility.level=WARNING
DataNucleus.Transaction.level=WARNING
DataNucleus.Datastore.level=WARNING
DataNucleus.ClassLoading.level=WARNING
DataNucleus.Plugin.level=WARNING
DataNucleus.ValueGeneration.level=WARNING
DataNucleus.Enhancer.level=WARNING
DataNucleus.SchemaTool.level=WARNING 
```

根据[DataNucleus](https://stackoverflow.com/users/69258/datanucleus)的建议，这要简洁得多：

```
# Set the default logging level for all loggers to FINEST
.level=FINEST

# Set the default logging level for ORM, specifically, to WARNING
DataNucleus.level=WARNING 
```

# ruby - 如何使用两个数组进行迭代

> ID：10193921
> 
> 赞同：0
> 
> 时间：2012-04-17T15:11:56.393
> 
> 标签：ruby, loops, foreach

如何使用 ruby​​ 迭代数组？

```
array1 = [1,2,3]
array2 = ["Birthday", "Anniversary" , "Graduation"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:33:54.027

```
array1.zip(array2).each { |num, word| puts "#{num}: #{word}" }
# Output:
1: Birthday
2: Anniversary
3: Graduation 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T15:40:47.337

你需要的是一个二维数组。

```
Dates = [["1", "Birthday"],["2", "Anniversary"],["2", "Graduation"]]

Dates.each do |number, event|
 @browser.checkbox(:text => number).click
 @browser.link(:text => event).click
end 
```

您将不得不填写空白，但该格式是问题的核心。我还推荐一本 Ruby 和 WATIR 初学者的书。

如上所述，zip 将是组合两个单独数组的好方法，但我想您是手动创建它们，因此您可以手动创建一个二维数组。

# ruby-on-rails - has_many 关系的每个最后一个元素的范围

> ID：10193922
> 
> 赞同：3
> 
> 时间：2012-04-17T15:12:05.620
> 
> 标签：ruby-on-rails, activerecord, scope, has-many

假设我在用户和消息之间有一个 has_many 关系。

我想设置一个范围，以便能够通过在他们发布的**最后**一条消息中包含某些内容的用户来过滤用户。所以只在每个用户的最后一条消息中搜索。

下面我得到了所有消息中的结果......

```
class Contact < ActiveRecord::Base
    has_many :messages

    scope :filter_by_last_messages, lambda { |value|
        joins(:messages).where("messages.content = ?", value)
    }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:27:47.123

不可能在一个范围内一次性完成此操作，但您可以这样做：

```
scope :last_message, joins(:messages)
         .select("contacts.*, messages.content")
         .order("messages.created_at") 
```

在您的控制器中：

```
if @contact.last_message.content == value
  do_something
end 
```

所以可以稍微调整一下范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:57:10.560

我通过在我的 User 类中创建与最后一条消息的 belongs_to 关系来解决这个问题。

```
belongs_to :last_message, :class_name => 'Message' 
```

我在 Message 类的 after_create 中设置了我的最后一条消息。那么我的范围如下：

```
scope :filter_by_last_messages, lambda { |value|
    joins(:last_message).where("content = ?", value)
} 
```

# objective-c - 类别。变量的可见性

> ID：10193923
> 
> 赞同：2
> 
> 时间：2012-04-17T15:12:05.937
> 
> 标签：objective-c, categories

我正在开发一个包含类别的简单objective-c 程序。我的课.h：

```
#import <Foundation/Foundation.h>

@interface Fraction : NSObject

@property int numerator, denominator;

-(void)setNumerator:(int)n andDenominator:(int)d;

@end 
```

在 .m 文件中，我合成了我的`numerator`和`denominator`. 在`main.m`我班级的创建类别中`Fraction`：

```
#import "Fraction.h"    
@interface Fraction (MathOps)
-(Fraction *) add: (Fraction *) f;
@end

@implementation Fraction (MathOps)
-(Fraction *) add: (Fraction *) f
{
    // To add two fractions:
    // a/b + c/d = ((a*d) + (b*c)) / (b * d)
    Fraction *result = [[Fraction alloc] init];
    result.numerator = (numerator * f.denominator) +
    (denominator * f.numerator);
    result.denominator = denominator * f.denominator;
    [result reduce];
    return result;
}
@end 
```

但是我的程序在类别的实现部分中没有看到`numerator`和。`denominator`错误“使用未声明的标识符'分子'（分母相同）。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:15:28.930

使用属性而不是直接使用 ivars：

```
result.numerator = (self.numerator * f.denominator) + (self.denominator * f.numerator);
result.denominator = self.denominator * f.denominator; 
```

实例变量对您的类别不可见，因为它们没有在 Fraction 的接口中声明——它们仅在您在实现中 @synthesize 它们时创建。这导致了另一种可能的解决方案，即在 Fraction 的接口中声明实例变量：

```
@interface Fraction : NSObject {
    int numerator;
    int denominator;
}

@property int numerator, denominator;

-(void)setNumerator:(int)n andDenominator:(int)d;

@end 
```

# doctrine - 在自定义任务中使用原则

> ID：10193925
> 
> 赞同：0
> 
> 时间：2012-04-17T15:12:14.187
> 
> 标签：doctrine, symfony-1.4

我正在 symfony 1.4 项目中创建一个任务，我需要更新一些表。

我写过：

```
<?php
class dataImportTask extends sfBaseTask
{
  public function configure()
  {
    $this->namespace = 'data';
    $this->name      = 'import';

    $this->addOptions(array(
        new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'environment', 'dev'),
    ));
  }

  public function execute($arguments = array(), $options = array())
  {
    $databaseManager = new sfDatabaseManager(sfProjectConfiguration::getApplicationConfiguration('frontend', $options['env'], true));
    $connection = $databaseManager->getDatabase()->getConnection();
  }
} 
```

（按照[symfony-project.org 上](http://www.symfony-project.org/more-with-symfony/1_4/en/13-Leveraging-the-Power-of-the-Command-Line#chapter_13_accessing_the_database)的示例）

但是当我执行任务时，symfony 说：“ `Database "default" does not exist.`”。为什么任务不使用中定义的 dbname `databases.yml`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:28:41.750

这是处理任务时的常见问题。您有 2 个选项：

*   `default`在 database.yml 中命名您的学说连接
*   在 database.yml 中保持相同的名称，并在每个任务上添加一个选项以检索正确的数据库名称。

对于选项 #2，您必须添加一个带有`database.yml`数据库名称（在您的 中定义的）的选项，然后更改工作方式`getDatabase`：

在 database.yml 中：

```
all:
  doctrine:
    class: sfDoctrineDatabase 
```

根据上面的学说名称，在您的任务中添加选项：

```
<?php
class dataImportTask extends sfBaseTask
{
  public function configure()
  {
    $this->namespace = 'data';
    $this->name      = 'import';

    $this->addOptions(array(
        new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'environment', 'dev'),
        new sfCommandOption('connection', null, sfCommandOption::PARAMETER_REQUIRED, 'The connection name', 'doctrine'),
    ));
  }

  public function execute($arguments = array(), $options = array())
  {
    $databaseManager = new sfDatabaseManager(sfProjectConfiguration::getApplicationConfiguration('frontend', $options['env'], true));
    $connection = $databaseManager->getDatabase($options['connection'])->getConnection();
  }
} 
```

# c++ - 如何实现同构工具更新系统？

> ID：10193926
> 
> 赞同：0
> 
> 时间：2012-04-17T15:12:15.190
> 
> 标签：c++, .net, eclipse-rcp, auto-update, p2

我的任务是为大型组织的所有工具定义和实施同质更新系统。
多年来，各种工具不断发展壮大，并以多种不同的技术和语言实现。

对于基于 Eclipse/RCP 的工具，Equinox/p2 机制似乎是完美的并且易于实现。
但是对于例如 .net/C# 工具和 C/C++ 工具该怎么办？p2 似乎是为 RCP 应用程序量身定制的。

我喜欢为所有工具提供一个通用/统一的更新存储库。有什么想法/想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:15:24.773

使用您已有的工具。

eclipse 存储库格式应该很容易生成（例如，通过一些可以集成到 CI 服务器的任务。）

对于 .net 应用程序，clickonce 是一种解决方案。那里有一些框架，比如 googke 的 ohama [http://code.google.com/p/omaha/](http://code.google.com/p/omaha/)用于处理应用程序更新

您可以构建自己的工具，它基本上是文件下载和替换。如果你不得不处理 UAC 的想法，它会变得很糟糕。

只有一个存储库似乎很困难。但是您可以构建一个工具来生成所需的格式（Equinox/p2、clickone 等）

自己构建服务器和更新工具可能会很耗时，除非您有充分的理由这样做，否则请避免这样做。构建服务器、git 存储库顶部的一些脚本（或类似的东西）和开源框架应该可以完成这项工作。

# actionscript-3 - 如何无缝循环 FLV

> ID：10193937
> 
> 赞同：2
> 
> 时间：2012-04-17T15:12:44.137
> 
> 标签：actionscript-3, flash, video, loops, flv

我正在以“标准方式”播放循环 FLV：

```
 netstream.addEventListener(NetStatusEvent.NET_STATUS, onStatus); 
```

...

```
 public function onStatus(item:Object):void {
        if (item.info.code == "NetStream.Play.Stop") {
            if (loop) netstream.seek(0);
        } 
```

当通过 Flash CS 5.5 创作工具（测试影片或调试影片）播放时，视频会无缝循环播放。**但！**在浏览器或独立调试 Flash 播放器（均为 v.11.2.202.233）**中播放时，视频“倒带”前会出现约 1 秒的异常暂停**。

这是最新的 Flash 播放器的错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T08:02:26.677

对于有同样问题的人，请尝试将上述代码更改为：

```
public function onStatus(item:Object):void {
    if (item.info.code == "NetStream.Buffer.Empty") {
        if (loop) netstream.seek(0);
    } 
```

它将摆脱闪烁。如果你听“NetStream.Play.Stop”，它会导致闪烁。

你不需要嵌入任何东西。这在 IOS、Android 和 PC 上运行良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-24T22:45:10.947

这是 Flash Player 11+ 和 AIR 3+ 的已知错误。错误报告在这里，您应该投票赞成 & ：[https ://bugbase.adobe.com/index.cfm?event=bug&id=3349340](https://bugbase.adobe.com/index.cfm?event=bug&id=3349340)

将创建无缝循环的已知解决方法：

1) 将视频嵌入 SWF。不理想，在某些情况下也不可能。

2) 创建双 NetSteam 对象并在它们之间切换。当 ns1（两个 NetStreams 对象中的第一个）到达终点时触发的事件示例：

```
if (e.info.code == "NetStream.Play.Stop"){
 vid.attachNetStream(ns2);
 ns2.resume();
 activeNs = ns2;
 ns1.seek(0);
 ns1.pause();
} 
```

在另一个事件侦听器上将 ns1 替换为 ns2。对象和处理程序的无用重复，但你去了。

3) 使用 AIR 2.x / Flash Player 10.x（根本不是真正的解决方案，Linux 用户除外）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T00:45:25.227

我们在从 Flash 10 过渡到 Flash 11 时注意到了这一点。Flash 10 无缝循环，但是从 NetStream.Play.Stop 调用 seek(0) 时，Flash 11 有大约 1 秒的停顿。

将媒体嵌入 SWF 不是我们的选择。

下面的代码提供了一个更无缝的循环——仍然不完美，但要好得多。

```
var mStream:NetStream;
var mDuration:Number;

...

addEventListener(Event.ENTER_FRAME, onEnterFrame);

...

function onEnterFrame(e:Event):void
{
    if( mStream.time > (mDuration-0.05) )
    { 
        if( mLooping )
        {
            mStream.seek(0);
        }
    }
}

function onMetaData(info:Object)
{
    mDuration = info.duration;
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T19:38:59.247

我似乎已经使用 FLVPlayback 组件和一些技巧实现了这一点。

更重要的是，它可以在台式机、iPhone 4S 和 3GS 上无缝运行！（通过 AIR 应用程序）

```
_videoFLV = new FLVPlayback();
_videoFLV.fullScreenTakeOver = false;
_videoFLV.autoPlay = false;
_videoFLV.autoRewind = true;
_videoFLV.isLive = false;
_videoFLV.skin = null;
_videoFLV.y = 150;
_videoFLV.bufferTime = .1;
_videoFLV.width = 320;
_videoFLV.height = 320;
_videoFLV.addEventListener(MetadataEvent.CUE_POINT, video_cp_listener, false, 0, true);
_videoFLV.source = "includes/10sec.flv"; 
addChild(_videoFLV); 
```

使用侦听器功能...

```
function video_cp_listener(eventObject:MetadataEvent):void {
    if (eventObject.info.name == "endpoint") {
    _videoFLV.seek(0);
    _videoFLV.play();
    }
} 
```

重要的是，我认为您必须设置宽度和高度以匹配您的 flv 文件。即没有任何缩放。

flv 有一个名为“endpoint”的提示点，在文件结尾之前添加了 1 帧（假设您的开始和结束帧相同，这将是必需的）。我使用 Adob​​e Media Encoder 添加了这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T06:11:57.553

无缝循环flv的唯一方法是嵌入到swf中。它被转换为[MovieClip](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html)，然后您使用 play()、stop()、nextFrame()、prevFrame() 等对其进行处理。

在 Flash 创作工具中嵌入时（在舞台上拖动 flv 文件），请确保您选择：

*   “在 SWF 中嵌入 FLV...”
*   符号类型：“电影剪辑”
*   全部选中：“将实例放在舞台上”、“扩展时间线...”、“包括音频”

# php - 构建 X-Sendfile 标头发送方以查看“隐藏”文件

> ID：10193939
> 
> 赞同：0
> 
> 时间：2012-04-17T15:12:47.667
> 
> 标签：php, nginx, x-sendfile

今天我遇到了一个问题，说我应该对公众隐藏一些文件。实际上，这些是一些“特定于用户”的文件，因此所有者以外的其他人应该看不到它们。

如果有其他选项，我不想用**fread或类似的东西读取文件，所以我对这个问题进行了一些研究，并在 SO 上的另一个线程上找到了 X-Sendfile mod for apache。**

它**几乎**可以满足我的需要。除了一件事。这些文件使用 htaccess 隐藏，它们对“世界”不可见，我可以在身份验证后使用 X-Sendfile 标头为它们提供服务。

**但是**如果有人创建了一个 php 脚本和我的一样呢？用户可能会记住文件的 url。这些文件将可供他们使用。那很糟...

您知道我能做些什么来防止所有者以外的其他人在没有权限的情况下访问他们的文件吗？我首先需要一个 nginx 的解决方案。

这些文件位于没有 PHP 的服务器上，它只是一个静态文件服务器。

将文件移动到其他目录是行不通的，它会更痛苦。

谢谢

**更新** 似乎我错过了下载的文件是 0Kb 或类似的东西，因为我无法再次做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:16:25.887

> **但是**如果有人创建了一个 php 脚本和我的一样呢？

你为什么让用户上传任意代码？

> 用户可能会记住文件的 url。

除了使用`X-Sendfile`.

> 您知道我能做些什么来防止所有者以外的其他人在没有权限的情况下访问他们的文件吗？

在使用`X-Sendfile`.

# regex - 这个正则表达式试图匹配什么？

> ID：10193940
> 
> 赞同：1
> 
> 时间：2012-04-17T15:12:48.363
> 
> 标签：regex, tcl

这些天我正在学习[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，但这对我来说似乎有点难。我正在阅读 TCL 中的一些代码，但它想要匹配什么？

```
regexp ".* (\[\\d]\{3\}:\[\\d]\{3\}:\[\\d]\{3\}.\[\\d]\{5\}).\[^\\n]" $input 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T15:42:56.353

如果你取消转义字符，你会得到以下信息：

```
.* ([\d]{3}:[\d]{3}:[\d]{3}.[\d]{5}).[^\n]
```

该术语`[\d]{x}`将匹配`x`连续数字的数量。因此，括号内的部分将匹配某种形式`###:###:###?#####`（其中`#`可以是任何数字，`?`也可以是任何字符）。括号本身不匹配，它们仅用于指定输入的哪一部分“捕获”并返回给调用者。在这个序列之后是一个点`.`，它匹配一个字符（可以是任何字符）。尾随将匹配*除*换行符以外的`[^\n]`任何单个字符（括号表达式开头的 a 会反转匹配）。最开始的术语匹配任意长度（甚至为零）的字符序列，后跟一个空格。*`^``.*`*

 *考虑到所有这些，这个正则表达式似乎从一行的中间提取了一系列数字。给定数字的格式，它可能会在`hours:minutes:seconds.milliseconds`格式中查找时间戳（尽管如果是这种情况，`{1,3}`则应`{1,5}`改为使用）。尾随`.[^\n]`项看起来可能试图排除位于或接近行尾的时间戳。带时间戳的日志通常有一个时间戳，后跟某种定界字符（`:`、`>`、空格等）。像这样的正则表达式可用于从日志中提取时间戳，同时忽略具有时间戳但没有消息的“空白”行。

**更新：** 这是使用 TCL 8.4 的示例：

```
% set re ".* (\[\\d]\{3\}:\[\\d]\{3\}:\[\\d]\{3\}.\[\\d]\{5\}).\[^\\n]"
% regexp $re "TEST: 123:456:789:12345> sample log line"
1
% regexp $re " 111:222:333.44444 foo"
1
% regexp $re "111:222:333.44444 foo"
0
% regexp $re " 111:222:333.44444 "
0
% regexp $re " 10:44:56.12344: "
0
%
% regexp $re "TEST: 123:456:789:12345> sample log line" match data
1
% puts $match
TEST: 123:456:789:12345>
% puts $data
123:456:789:12345 
```

前两个示例与表达式匹配。第三个失败，因为它在第一个数字序列之前缺少空格字符。第四个失败，因为它在尾随空格之后的末尾没有非换行符。第五个失败是因为数字序列没有足够的数字。通过在输入之后传递参数，您可以存储与表达式匹配的输入部分以及使用括号“捕获”的数据。有关该命令的详细信息，请参阅[TCL wiki 。](http://wiki.tcl.tk/986)`regexp`

TCL 的有趣之处在于您必须转义`[`字符而不是`]`，而`{`and都`}`需要转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:32:15.640

```
.* ==> match junk part of the input

 ( ==> start capture

 \[\\d]\{3\}: ==> match 3 digits followed by ':'

 \[\\d]\{3\}: ==> match 3 digits followed by ':'

 \[\\d]\{3\}. ==> match 3 digits followed by any character

\[\\d]\{5\} ==> match 5 digits

). ==> close capture and match any character

\[^\\n] ==> match a character that is not a newline 
```*

# flask - 让 celery 停止消费任务

> ID：10193942
> 
> 赞同：2
> 
> 时间：2012-04-17T15:12:51.333
> 
> 标签：flask, celery

前提条件：有一个小芹菜集群处理一些任务。每个 celery 实例运行的工人很少。一切都在烧瓶下运行。

任务：我需要能够从代码中暂停/恢复使用来自特定节点的任务。即任务可以决定当前的 celery 实例和她的所有工作人员是否应该暂停或恢复任务的消耗。

没有找到任何直接的方法来解决这个问题。有什么建议么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T19:01:53.987

`Control.cancel_consumer(queue, **kwargs)`（[参考](http://docs.celeryproject.org/en/latest/reference/celery.app.control.html#celery.app.control.Control.cancel_consumer)）是您的用例可能需要的全部。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T00:56:16.730

也许更好的策略是将工作分配到多个队列中。

有一个`default`所有任务开始的队列。观察默认队列的工作人员可以根据您的逻辑将子任务添加到其他活动队列中。如果您可以直接从烧瓶将任务添加到活动队列中，您可能不需要这个额外的队列。

这样，每个节点就不必担心它是暂停还是活动的。它只是消耗添加到其队列中的所有内容。除非默认工作人员添加了子任务，否则这些特定于位置的队列将是空的（因此暂停）。

# java - 不可解析的Unix时间戳

> ID：10193945
> 
> 赞同：2
> 
> 时间：2012-04-17T15:13:06.793
> 
> 标签：java, date

Unix 时间戳是 1334672401。

```
long t = Long.parseLong(map.get("timestamp").toString());   
SimpleDateFormat formatter = new SimpleDateFormat("EEE MMM dd, ''yy, hh:mma");
Date time = new Date(t*1000);
Date date = formatter.parse(time.toString()); 
```

我正在尝试将 unix 时间戳转换为 Date 对象，其格式类似于 Thu Apr 17 2012, 16:25 但我不断收到无法解析的日期错误，我不确定到底出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T15:18:07.130

执行此操作时，您已经拥有 Date 对象：

```
Date time = new Date(t*1000); 
```

使用格式化程序来格式化您的字符串输出，如下所示：

```
System.out.println(formatter.format(time)); 
```

# statistics - 寻找一种简单的机器学习方法来从训练集中预测期末考试成绩

> ID：10193950
> 
> 赞同：5
> 
> 时间：2012-04-17T15:13:42.933
> 
> 标签：statistics, machine-learning, data-modeling, data-mining, prediction

我正在尝试根据已知的先前分数来预测测试结果。考试由三门科目组成，每门科目都会影响期末考试成绩。对于所有学生，我都有他们之前在三个科目中的小测验的分数，而且我知道他们的老师是谁。对于一半的学生（训练集），我有他们的最终分数，对于另一半我没有（测试集）。我想预测他们的最终得分。

所以测试集看起来像这样：

```
student teacher subject1score subject2score subject3score finalscore 
```

虽然测试集相同但没有最终分数

```
student teacher subject1score subject2score subject3score 
```

所以我想预测测试集学生的最终成绩。关于使用简单的学习算法或统计技术的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T15:29:30.493

最简单、最合理的尝试方法是线性回归，将老师和三个分数用作预测变量。（这是基于这样的假设，即教师和三个考试成绩各自对期末考试都有一定的预测能力，但它们的贡献可能不同——例如，第三次考试可能最重要）。

您没有提到特定的语言，但假设您将其作为两个数据框加载到 R 中，称为“training.scores `and`test.scores”。拟合模型就像使用[lm](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/lm.html)一样简单：

```
lm.fit = lm(finalscore ~ teacher + subject1score + subject2score + subject3score, training.scores) 
```

然后预测将完成为：

```
predicted.scores = predict(lm.fit, test.scores) 
```

谷歌搜索“R 线性回归”、“R 线性模型”或类似搜索会发现*许多*可以提供帮助的资源。您还可以了解稍微复杂的方法，例如广义线性模型或广义加性模型，它们几乎与上述方法一样容易执行。

ETA：有一些关于解释线性回归主题的书籍——这里有一个简单的示例[指南](http://data.princeton.edu/R/linearModels.html)。一般来说，你会`summary(lm.fit)`打印一堆关于合身的信息。您将在输出中看到如下所示的系数表：

```
 Estimate Std. Error t value Pr(>|t|)    
(Intercept) -14.4511     7.0938  -2.037 0.057516 .  
setting       0.2706     0.1079   2.507 0.022629 *  
effort        0.9677     0.2250   4.301 0.000484 *** 
```

`Pr(>|T|)`估计值将让您了解该变量的影响有多强，而 p 值 ( 它还有很多内容，但我邀请您阅读在线可用的优秀资源。

残差图（残差表示每个预测在您的测试集中偏离的量）也`plot(lm.fit)`将显示，它告诉您可以用来确定模型的假设是否公平。

# c# - C# .NET 生成一次字符串数组，其索引是表中的字符串值

> ID：10193953
> 
> 赞同：1
> 
> 时间：2012-04-17T15:13:45.483
> 
> 标签：c#, .net, sql

我有一个表包含列标题和信息。

我想创建一个数组，它的索引将是标题，并且该索引中数组的实际值是同一行中的信息。

因此，如果我有 3 行这样的：

```
Title      Info

ABC        Hi

DEF        Sup

GHI        Hello 
```

我想问`StringArray["ABC"]`，这将返回“嗨”。

我怎样才能做到这一点？

谢了，兄弟们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:15:35.430

你想要一个`Dictionary<String, String>`，而不是一个字符串数组。

```
var myStrings = new Dictionary<String, String>();
myStrings.Add("ABC", "Hi");
myStrings.Add("DEF", "Sup");
myStrings.Add("GHI", "Hello");

Console.WriteLine(myStrings["ABC"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:16:29.240

数组只能用整数索引。您必须使用`Dictionary<string, string>`, 或其他实现 的类型`IDictionary<string, string>`，或者您可以使用字符串索引器实现您自己的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:17:29.287

请参阅字典

你可以这样做

```
Dictionary<string, string> Book = new Dictionary<string, string>();

Book.Add("ABC","Hi");
Book.Add("DEF","Sup");
Book.Add("GHI","Hello"); 
```

等等等等。

那么当你说

`Book["ABC"]`它会回来`Hi`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T15:18:49.860

您应该使用字典来实现它。

```
var table = new Dictionary<string,string>(
{"ABC", "Hi"},
{"DEF", "Sup"},
{"GHI", "Hello"}
); 
```

现在你可以使用它了

```
var info = table["ABC"]; 
```

你应该小心，如果你使用不存在的密钥会抛出异常

您可以使用 TryGetValue 来避免此异常

```
string info;

if(!table.TryGetValue("ABC", out info))
{
  info = "default value if required";
} 
```

# jquery - cakephp jshelper 链式选择

> ID：10193955
> 
> 赞同：1
> 
> 时间：2012-04-17T15:13:58.833
> 
> 标签：jquery, ajax, cakephp

我已经在这个问题上工作了几天，但没有运气。我正在尝试在 CakePHP 2.0 中实现一个简单的 ajax 调用，它将根据另一个选择列表的选择填充一个选择列表。在我的数据库中，我有汽车品牌和车型。模型有一个 make_id 字段。当用户选择品牌时，我希望模型选择列表仅填充具有先前选择的 make_id 的模型。当我在 Firebug 中查看请求时，无论 make_id 是什么，它都会发回所有模型。我发现这个小教程试图解释如何根据另一个选择填充一个选择，但我仍然没有运气。 [http://bakery.cakephp.org/articles/Calderoy/2011/01/18/how_to_create_an_observefield_equivalent_in_the_new_jshelper](http://bakery.cakephp.org/articles/Calderoy/2011/01/18/how_to_create_an_observefield_equivalent_in_the_new_jshelper)

这是我的 JsHelper 代码，在我的视图文件中找到：

```
$this->Js->get('#CarMakeId')->event(
'change',
$this->Js->request(
    array('controller' => 'CarModels', 'action' => 'get_model'),
        array(
            'async' => true, 
            'update' => '#CarCarModelId',
            'dataExpression' => true, 
            'method' => 'post', 
            'data' => $this->Js->serializeForm(array('isForm' => true, 'inline' => true))
        )
    )
); 
```

这是我的控制器方法：

```
public function get_model() {   
        $models = $this->CarModel->find(
            'all', 
                array('conditions', 
                    array('CarModel.make_id' => $this->data['Car']['make_id'])
                )
            );
        $this->set('car_models', $models);
} 
```

最后，这是我的 get_model 视图文件：

```
if($car_models) {
echo "<option value=''>-- Select --</option>\n";
foreach($car_models as $model) {
echo "<option value=".$model['CarModel']['id'].">".$model['CarModel']['name']."</option>\n";
} 
```

}

这是通过 JsHelper 创建的 javascript：

```
<script type="text/javascript">
//<![CDATA[
$(document).ready(function () {$("#CarMakeId").bind("change", function (event)     {$.ajax({async:true, data:$("#CarMakeId").serialize(), dataType:"html", success:function (data, textStatus) {$("#CarCarModelId").html(data);}, type:"post", url:"\/Dropbox\/CartrackerV3\/CarModels\/get_model"});
return false;});}); 
```

//]]>

我在我的控制器中包含了 RequestHandler 助手。还值得注意的是，我收到了来自 ajax 调用的响应。在我选择了一个 make 之后，models 中的第一个选项从一个空白选项变为 -- Select -- 选项，它来自 get_model 视图文件，但是它仍然列出了数据库中的每个模型，而不仅仅是那些带有正确的make_id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:00:17.103

根据 OP 的评论，这个问题只是一个语法问题 - 逗号在：

```
array('conditions', array('CarModel.make_id 
```

应该是`=>`：

```
array('conditions' => array('CarModel.make_id 
```

# javascript - Cordova/Phonegap 1.6 媒体示例

> ID：10193957
> 
> 赞同：-1
> 
> 时间：2012-04-17T15:14:03.357
> 
> 标签：javascript, ios, xcode, cordova

我不想提及Phonegap最近变得草率......但我正在尝试使用使用Xcode 4.3从他们的网站上获取的[媒体示例。](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#Media)

除了用cordove.js替换phonegap.js之外，呃，我遇到了很多错误：

```
ERROR: Method 'create:withDict:' not defined in Plugin 'Media'
FAILED pluginJSON = {"className":"Media","methodName":"create","arguments":["Media1","9476cdcf-7f6c-5e05-a022-fa488e8bed40","http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3"]}
Will use resource 'http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3' from the Internet.    
ERROR whitelist rejection: url='http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3'
ERROR whitelist rejection: url='http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3'
ERROR whitelist rejection: url='http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3'
Unable to download audio from: http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3
Failed to initialize AVAudioPlayer: (null) 
```

我只是按原样使用他们的例子，我希望它可以工作......

我应该改变什么？那可能是xcode问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:26:53.877

“白名单拒绝”

基本上，您需要将要访问的任何外部 URL 添加到“白名单”（即：Cordova.plist 文件中的 ExternalHosts 键）。

看到这个答案：

[https://stackoverflow.com/a/8045541/878602](https://stackoverflow.com/a/8045541/878602)

...或 iOS 版 PhoneGap Wiki 常见问题解答：

[http://wiki.phonegap.com/w/page/41631150/PhoneGap%20for%20iOS%20FAQ](http://wiki.phonegap.com/w/page/41631150/PhoneGap%20for%20iOS%20FAQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:28:32.130

在我看来，您无法下载 mp3。你能在 iphone 的 safari 中输入那个 url 并下载 mp3 吗？

您是否有自己的网络服务器可以尝试？您可以查看日志并查看它是否到达那里。

顺便说一句，我昨天刚刚在 Android 中使用了相同的示例，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:20:44.467

如果您可以更新科尔多瓦。他们更改了许多函数名称。

例如，如果您在以前的版本中使用 startAudioRecord 函数。目前他们已将其更改为 startRecord。

同样，他们更改了许多内部函数名称。

只需打开您的 cordova.js。检查适当的函数和函数名称是否存在。

# asp.net - Webmethod asp.net 中的断言方法

> ID：10193958
> 
> 赞同：0
> 
> 时间：2012-04-17T15:14:03.490
> 
> 标签：asp.net, pagemethods, webmethod

我有一个使用页面方法调用的网络方法。尽管条件失败，但断言功能在其中不起作用。

**我想测试我的代码在什么情况下失败并像 Assert menthod 一样对其进行调试。**

我应该如何调试那个 web menthod。请建议。

JavaScript 代码

```
function sendingRqstForDealerCard(Argument) {

PageMethods.DealerTurn(OnSuccess);
function OnSuccess(response) {

    Sys.Debug.assert(response!="", "respone is blanck in DealerTurn Function");
} 
```

javascript assert 正在工作，但我必须检查后面代码中的代码。

**代码背后**

```
 [WebMethod]
 public static string DealerTurn()
 {    
 string previousRowHandTotal = BLHand.GetHandTotalField(hand, Convert.ToUInt16(dealerSpotID));

   System.Diagnostics.Debug.Assert(previousRowHandTotal != string.Empty,"previousRowHandTotal is empty in dealerTurn function."); 
} 
```

**还有其他方法可以调试 WebMethod 吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:16:03.840

您需要提供代码以获得更完整的答案，但请记住，如果您正在使用`Debug.Assert`且未在调试模式下运行，那么 Assert 甚至不会编译到代码中。这可能是您的断言没有触发的原因。

[这是一篇关于如何在调试模式下运行的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms243172.aspx)。通常，如果您从 Visual Studio 运行，那么这应该会提示您更改设置，但是

# java - Java 静态初始化器似乎是多余的

> ID：10193961
> 
> 赞同：3
> 
> 时间：2012-04-17T15:14:28.663
> 
> 标签：java, initialization

因此，我确实阅读了从该线程执行静态初始化程序的内容和时间。[Java 中的静态初始化程序](https://stackoverflow.com/questions/335311/static-initializer-in-java)。但是我遇到了一些其他人编写的旧代码，似乎无法理解他为什么会以他的方式使用它。

我的课：

```
public class ClassA extends Thread {
  .... private vars ....

  private static Config config;

  static {
    config = null;
  }

  public ClassA(Config config) {
    ClassA.config = config;
  }
} 
```

他为什么不这样做呢？

```
public class ClassA extends Thread {
  .... private vars ....

  private static Config config = null;

  public ClassA(Config config) {
    ClassA.config = config;
  }
} 
```

我知道静态初始化程序在重新生成类时被调用，因此它设置 config => null，而如果我不使用静态初始化程序，实例变量在构造函数之前和超级之后获取初始化程序。那么这两个班级不会做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:16:50.790

这些类*做*同样的事情，但更复杂的静态初始化器不能总是在一行中完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T15:17:28.143

第一个示例中的静态初始化程序不会对该类的行为产生任何影响。你可以完全删除它，什么都不会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T15:17:34.510

为什么我写`x = x + 1`而不是`x++`？没有什么特别的原因，我就是这样做的。我认为这里是一样的，因为 2 基本上是相同的，这并不重要。另一方面，如果将来某个时候需要更复杂的初始化，也许他不能在那一行代码中做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T15:17:36.243

静态块只会在加载类时初始化一次配置，无论有多少 ClassA 实例。

哪个解决方案都没有关系，这只是一个技术性问题，我见过人们同时使用这两种解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T15:19:18.407

两者都在做完全相同的事情，这是设计选择的问题。

# c# - 水晶报表多表失败

> ID：10193967
> 
> 赞同：0
> 
> 时间：2012-04-17T15:14:57.120
> 
> 标签：c#, crystal-reports-2008, multi-table

我还是 C# 和报表的新手，为了迈出小步，我开始使用一张表的 Crystal Report。

最终我想通了，而且效果很好。

然后我在报告中添加了另一个表格。我没有更改我的代码中的任何内容。将第二个表中的字段添加到报告中会生成一个空白报告。

再次删除该字段（因此报告中没有第二个表中的列），报告再次生成数据。

所以我的印象是问题出在报告方面。但无论如何我已经包含了代码：

```
private void Load_Ord_Rep()
{
    using (MySqlConnection conn = new MySqlConnection(OTW.Properties.Settings.Default.wcdbConnectionString))
    {
        conn.Open();

        String sql = "SELECT * FROM wcdb.order_table, wcdb.mat_table WHERE order_no = '13661' and order_table.mat_code = mat_table.mat_code";

        using (MySqlCommand cmdSel = new MySqlCommand(sql, conn))
        {

            DataSet ds = new DataSet();
            MySqlDataAdapter da = new MySqlDataAdapter(cmdSel);

            da.Fill(ds);

            ReportDocument rpt = new ReportDocument();
            rpt.Load("C:\\Visual Studio 2008\\Projects\\OTW\\OTW\\CrystalReport3.rpt");

            dataView1.Table = ds.Tables[0];
            rpt.SetDataSource(dataView1);

            crystalReportViewer1.ReportSource = rpt;
            crystalReportViewer1.Refresh();
        }
        conn.Close();
    } 
} 
```

通过进一步调查，我得出结论，问题不在于代码或链接，而在于第二个表的加载。我做了一个外部连接，值相等或更大。报告中仅显示第一个表的结果。所以因为第二个表的值没有被读取，所以两个表之间不能建立连接，因此报告中没有数据。现在的问题是：为什么水晶报表没有读取第二个表！？

**更新**

我从主报告中删除了第二个表格，并添加了一个包含数据的子报告。结果和以前一样。sup 报告显示空白。单独运行 sup 报告（作为主报告），它填充正确。我正在使用 MySQL，这可能是数据库问题吗？

**更新**

我创建了一个新应用程序，这次使用 ODBC（而不是 ADO.NET）将报表连接到数据库。而且效果很好。现在要弄清楚为什么 ADO.Net 不起作用....因为我的整个程序都是基于它的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:22:02.143

检查水晶报表中两个表之间的链接。他们是你所期望的吗？

检查它

**Field Explorer> DataBaseFields > (RightClick) DatabaseExpert > (See Tab) Links**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:30:14.213

您不需要对数据集/数据视图执行任何代码。我建议您允许报告“提取”数据（您现在正在将数据“推送”到报告中）。

提取数据只需要以下内容：

```
ReportDocument rpt = new ReportDocument(); 
rpt.Load("C:\\Visual Studio 2008\\Projects\\OTW\\OTW\\CrystalReport3.rpt"); 

rpt.SetDataBaseLogon("userName", "password", "servername", "database"); 

crystalReportViewer1.ReportSource = rpt; 
```

这可以降低您通过传入一个数据视图来混淆报告的风险，该数据视图不知道如何映射到您在设计报告时添加的表。（我 99.999% 肯定现在正在发生。）

如果您需要设置任何参数，则上面的所有代码都缺少参数。看起来您可能正在尝试“推送”数据，因为您想过滤该订单号或其他内容？如果是这种情况，请在报表中添加一个“记录选择公式”，将其作为该公式的“位置”方面基于 Crystal Report 参数，并在我提供的代码中添加一个 rpt.SetParameter(arguments) 行。

不，这不是许可限制，我很确定。

**成功的故障排除路径：**

1) 使用简单代码加载报表： * 没有错误，但报表中没有数据

2）在报告中使用连接选项：* 也导致了一个空白的报告，即使只有一个表 * 担心第二个表不读取数据

3) 通过“记录选择公式”检查记录过滤，这可能会限制/阻止返回行 *在这种情况下，不适用

4）分析连接是如何完成的：[“这可能是你连接的方式。例如：如果你对第二个表进行右外连接并且它没有数据，那么即使第一个表的行也不会回来。 "]

*   将“订单”表中的主 ID 字段 (mat_code) 连接到第二个表“材料”中的同一字段 (mat_code)。这似乎很好。
*   尝试了链接类型为“>=”的左外连接。该报告打印了带有数据的第一个表（订单）。但仍然*没有*第二张表的（材料）数据。
*   做了一个新的报告，这次先添加“第二个”表（材料），然后添加第一个（订单）。这次使用外连接，只有材料表显示数据。换句话说，它似乎只为第一个或主表提取数据，然后停止。

5）尝试通过将第二个表的数据放入子报表中来加载第二个表的数据，并将子报表链接到相同的“mat_code”字段：

（有用的教程：http: [//vb.net-informations.com/crystal-report/vb.net_crystal_report_subreport.htm](http://vb.net-informations.com/crystal-report/vb.net_crystal_report_subreport.htm)）

*   子报告也显示为空白。只有主报告有效。子报表中存在的任何表都不会被填充。
*   使用简单的建议代码仍然看不到数据，他的原始代码仍然显示第一个表的数据

6) 检查表的连接和定义与提交到报告或由报告加载的实际数据结构/内容之间的不匹配。建议进行特定测试，请转到：i) 'Set Database Location'（您在其中管理报表的表）ii) 查看是否使用了 XML/DataSet 而不是 OLEDB iii) 将数据库表位置更改为相同的表，但具有 OLEDB 连接类型（对所有表重复）

*   在上面尝试时，当按下“更新”按钮时，屏幕只是闪烁了一秒钟，但没有显示任何消息。再次测试报告后，行为仍然没有变化。他正在使用 ADO.NET 连接到数据。

7）仍然高度怀疑数据表定义和连接类型。建议进行以下测试： i) 只用简单的测试代码制作一个全新的 1 页应用程序。ii) 从头开始​​使用*OLEDB*制作仅包含“订单”和“材料”表的新报告iii) 仅将主表中的 mat_code 字段添加到报告中 iv) 为链接到 mat_code v 的“材料”添加子报告) 在子报告中仅显示 mat_code vi) 运行应用程序

如果数据显示，问题是：

答案 1：数据库定义（在第一次制作报告时读取，并通过 ADO.NET 连接到表）与稍后加载报告时发现的实际数据表/列定义不匹配（即有人编辑了'材料'表来改变一个列的定义，或者字段的数量等）

答案 2：将 ADO.NET 数据推送到报表所需的 Crystal Reports 和 Windows 驱动程序的特定组合可能存在缺陷。在 OLEDB 上使用拉数据模型可能会解决某些问题。这些问题可以通过最新的 Crystal Reports 和/或 Windows 驱动程序（即修补程序或 Windows 更新、驱动程序包等）得到解决。

*   测试运行良好。即使没有制作子报告。数据就像它应该的那样被拉进来。

# dicom - 重新调整斜率和重新调整截距

> ID：10193971
> 
> 赞同：19
> 
> 时间：2012-04-17T15:15:16.383
> 
> 标签：dicom

我对**CT** **DICOM中的****重新缩放斜率**和**重新缩放截距**几乎没有疑问：

 ****1.  它们是否用于将原始数据从扫描仪传输到**Hounsfield**数据集，其中水为 0，空气为 -1000？
2.  我在图像显示组。如何知道重新缩放斜率和重新缩放截距值？
3.  重新缩放斜率和重新缩放截距的确切含义是什么？它们是如何确定的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-17T19:30:13.223

重新缩放斜率和重新缩放截距允许将像素值转换为 HU 或其他单位，如标记 0028,1054 中指定的那样。

对于 CT 图像，单位应该是 HU（Hounsfield），当标签 0028,1054 不存在时，默认值确实是 HU。然而，标签可能存在并且可能指定不同的单位（OD=光密度，US=未指定）。

重新调整斜率和截距由硬件制造商确定。

如果从原始像素值到 Hounsfield 或光密度的转换不是线性的，则应用 LUT。

查看标准 C.11 的第 3 部分以获取更多详细信息，以及此答案[DICOM 图像的窗口宽度和中心计算](https://stackoverflow.com/questions/8756096/window-width-and-center-calculation-of-dicom-image/8765366#8765366)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-19T20:37:43.923

这是我的实现：

```
def window_ct(dcm, w, c, ymin, ymax):
    """Windows a CT slice.
    http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.11.2.html

    Args:
        dcm (pydicom.dataset.FileDataset):
        w: Window Width parameter.
        c: Window Center parameter.
        ymin: Minimum output value.
        ymax: Maximum output value.

    Returns:
        Windowed slice.
    """
    # convert to HU
    b = dcm.RescaleIntercept
    m = dcm.RescaleSlope
    x = m * dcm.pixel_array + b

    # windowing C.11.2.1.2.1 Default LINEAR Function
    #
    y = np.zeros_like(x)
    y[x <= (c - 0.5 - (w - 1) / 2)] = ymin
    y[x > (c - 0.5 + (w - 1) / 2)] = ymax
    y[(x > (c - 0.5 - (w - 1) / 2)) & (x <= (c - 0.5 + (w - 1) / 2))] = \
        ((x[(x > (c - 0.5 - (w - 1) / 2)) & (x <= (c - 0.5 + (w - 1) / 2))] - (c - 0.5)) / (w - 1) + 0.5) * (
                ymax - ymin) + ymin

    return y 
```****

# java - Java 应用程序中的空字节注入检查或什么是空字节

> ID：10193972
> 
> 赞同：0
> 
> 时间：2012-04-17T15:15:17.383
> 
> 标签：java, security, xss

如何防止空字节注入？见：[https ://security.stackexchange.com/q/378](https://security.stackexchange.com/q/378)

如果请求参数将用作文件名，我们是否应该查看请求参数的每个字节并检查其“字节”值是否为 0 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-21T20:55:45.813

您有 3 个选择：

1**扫描 Java 字符串（首先将其转换为 char 数组）以查找空字节。**

2 清理用户输入（即检查'%00' - 它是一个URL 编码的空字节。）。但要小心！黑客使用不同的编码，所以#1 更安全！

3 升级到 Java 8 或 Java 7u40，您将受到保护。（是的，我测试过！，它有效！）

1013 年 5 月，Oracle 修复了该问题：[http ://bugs.java.com/bugdatabase/view_bug.do?bug_id=8014846](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8014846)

# excel - 如果前两列匹配，如何比较 Excel 中的两列（来自不同的工作表）并从相应列复制值？

> ID：10193978
> 
> 赞同：7
> 
> 时间：2012-04-17T15:15:35.070
> 
> 标签：excel, excel-formula

我正在尝试将工作表 1 中的 a 列与工作表 2 中的 a 列进行比较，然后将 b 列中的相应值从工作表 1 复制到工作表 2 中的 b 列（其中 a 列的值匹配）。我一直在尝试阅读如何做到这一点，但我不确定我是否应该尝试创建一个宏，或者是否有更简单的方法来做到这一点，也许是 VLOOKUP 或 MATCH？我真的不熟悉这些功能是如何工作的。

此外，如果有所不同，表 2 的 b 列中将出现重复值。

表 1

```
12AT8001    1
12AT8002    2
12AT8003    3
12AT8004    4
12AT8005    5
12AT8006    6 
```

表 2

```
12AT8001
12AT8001
12AT8001
12AT8001
12AT8001
12AT8002
12AT8002
12AT8002
12AT8002
12AT8002
12AT8003
12AT8003
12AT8003
12AT8003
12AT8003 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T15:31:47.577

`Vlookup`如果参考值（A 列，第 1 页）按升序排列，则很好。另一个选项是索引和匹配，无论顺序如何都可以使用（只要 a 列中的值，工作表 1 是唯一的）

这就是您将在表 2 的 B 栏中输入的内容

```
=INDEX(Sheet1!A$1:B$6,MATCH(A1,Sheet1!A$1:A$6),2) 
```

设置`Sheet1!A$1:B$6`和`Sheet1!A$1:A$6`命名范围使其更加用户友好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T02:03:16.813

As kmcamara discovered, this is exactly the kind of problem that VLOOKUP is intended to solve, and using vlookup is arguably the simplest of the alternative ways to get the job done.

In addition to the three parameters for lookup_value, table_range to be searched, and the column_index for return values, VLOOKUP takes an optional fourth argument that the Excel documentation calls the "range_lookup".

Expanding on deathApril's explanation, if this argument is set to TRUE (or 1) or omitted, the table range must be sorted in ascending order of the values in the first column of the range for the function to return what would typically be understood to be the "correct" value. Under this default behavior, the function will return a value based upon an exact match, if one is found, or an approximate match if an exact match is not found.

If the match is approximate, the value that is returned by the function will be based on the next largest value that is less than the lookup_value. For example, if "12AT8003" were missing from the table in Sheet 1, the lookup formulas for that value in Sheet 2 would return '2', since "12AT8002" is the largest value in the lookup column of the table range that is less than "12AT8003". (VLOOKUP's default behavior makes perfect sense if, for example, the goal is to look up rates in a tax table.)

However, if the fourth argument is set to FALSE (or 0), VLOOKUP returns a looked-up value only if there is an exact match, and an error value of #N/A if there is not. It is now the usual practice to wrap an exact VLOOKUP in an IFERROR function in order to catch the no-match gracefully. Prior to the introduction of IFERROR, no matches were checked with an IF function using the VLOOKUP formula once to check whether there was a match, and once to return the actual match value.

Though initially harder to master, deusxmach1na's proposed solution is a variation on a powerful set of alternatives to VLOOKUP that can be used to return values for a column or list to the *left* of the lookup column, expanded to handle cases where an exact match on more than one criterion is needed, or modified to incorporate OR as well as AND match conditions among multiple criteria.

Repeating kcamara's chosen solution, the VLOOKUP formula for this problem would be:

```
 =VLOOKUP(A1,Sheet1!A$1:B$600,2,FALSE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:50:00.353

制作一个真值表并使用 SUMPRODUCT 获取值。将其复制到 Sheet2 上的单元格 B1 并根据需要向下复制：
`=SUMPRODUCT(--($A1 = Sheet1!$A:$A), Sheet1!$B:$B)`
创建真值表的部分是：
`--($A1 = Sheet1!$A:$A)`
这将返回一个 0 和 1 的数组。值匹配时为 1，不匹配时为 0。然后之后的逗号基本上会执行我所说的“有趣”矩阵乘法并返回结果。不过，我可能误解了您的问题，Sheet1 的 A 列中是否有重复值？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-06T23:36:07.297

尝试：

```
sheet 2 a1 =vlookup(sheet2a1,sheet1$a$1:$b$6,2) 
```

然后拖下来。

它应该工作。

# javascript - JavaScript 返回码错误？

> ID：10193981
> 
> 赞同：0
> 
> 时间：2012-04-17T15:15:42.550
> 
> 标签：javascript

这是 javascript 代码：即使 pickUptime 小于 20，也将 nightSurcharges 添加到总成本中的代码中存在错误。

```
function TaxiFare() {

    var baseFare = 2;
    var costPerMile = 0.50;
    var nightSurcharge = 0.50; // 8pm to 6am, every night //its flat 0.50 and not per mile
    var milesTravelled = Number(document.getElementById("miles").value) || 0;
    if ((milesTravelled < 1) || (milesTravelled > 200)) {
        alert("You must enter 1 - 200 miles");
        document.getElementById("miles").focus();
        return false;
    }

    var pickupTime = Number(document.getElementById("putime").value) || 0;
    if ((pickupTime == "") || (pickupTime < 0) || (pickupTime > 23)) {
        alert("The time must be 0-23 hours");
        document.getElementById("putime").focus();
        return false;
    }

    var cost = baseFare + (costPerMile * milesTravelled);

    // add the nightSurcharge to the cost if it is after
    // 8pm or before 6am
    if (pickupTime >= 20 || pickupTime < 6) {
        cost += nightSurcharge;
    }
    alert("Your taxi fare is $" + cost.toFixed(2));
} 
```

我希望仅在pickupTime >=20 时才添加nightSurcharge，但这现在不起作用。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:25:02.883

这对我来说似乎很明显。

```
if (pickupTime >= 20 || pickupTime < 6) {
    cost += nightSurcharge;
} 
```

如果大于或等于 20，或小于 6，则此处`nightSurcharge`的代码会增加成本。因此，如果小于 6，则当然会增加成本。`pickupTime`

```
if (pickupTime >= 20) {
    cost += nightSurcharge;
} 
```

现在它只会在大于或等于 20 时添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:25:00.240

你的代码是：

```
if (pickupTime >= 20 || pickupTime < 6) 
```

所以如果pickingTime小于6它也会进入if

[http://jsfiddle.net/7rdzC/](http://jsfiddle.net/7rdzC/)

# php - MySQL：COUNT 和 GROUP BY 缩小搜索结果

> ID：10193984
> 
> 赞同：1
> 
> 时间：2012-04-17T15:15:50.053
> 
> 标签：php, jquery, mysql, count, group-by

为了简化：我有一个搜索结果列表和一个 HTML 表单，用户可以在其中缩小搜索结果的范围（它们使用 jQuery .load 即时更新）。

我想知道如何最好地向用户展示每次更改表单将返回多少搜索结果，例如当用户选中某个复选框时。并想直接在它旁边打印这个数字：

> [x] 参数 1 //这个已经被检查
> [ ] 参数 2 (2465 个结果)
> [ ] 参数 3 (456 个结果)
> [ ] 参数 4 (256 个结果)

每次此列表更新时，数字也应更新并且`ORDER BY number of results DESC`...

该文件`search.php`从数据库中选择参数并打印 HTML 表单。然后 I `.load` `search_update.php`，它读取并返回用户想要看到的实际结果。

我希望它解释得通俗易懂...

问题是，我有多个数据库都加入了执行的查询中`search_updated.php`，我试图在这个查询中使用 COUNT 和 GROUP BY，但我迷路了......

*   我应该在这个“主要”查询中使用它吗？

*   还是应该在打印 HTML 表单的查询中使用它？

*   我应该为每个 HTML 表单创建一个新文件`.load`吗`search_update.php`？

非常感谢您提前提供任何提示！:)

图片：

![在此处输入图像描述](../Images/1f4194b4c41d512dbc89dc663710fbc8.png)

# css - 如何使用 CSS3 制作 Facebook 图像风格的网页设计？

> ID：10193989
> 
> 赞同：-2
> 
> 时间：2012-04-17T15:16:13.750
> 
> 标签：css

对于一个客户，我想用 CSS 进行设计，它看起来像 facebook-image-container，如下所示： http: [//pho.to/bGEg79](http://pho.to/bGEg79)。有谁知道我该怎么做？总体思路是制作一个以页面为中心的盒子，盒子的左半边是图片，右半边包含导航和内容。这对 CSS(3) 可行吗？如果是，我该怎么做？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:38:25.263

这将是基本布局，您可以自定义尺寸：[http ://dabblet.com/gist/2406917](http://dabblet.com/gist/2406917)

# sql-server - WinRT System.Data - 连接到 SQL

> ID：10193999
> 
> 赞同：3
> 
> 时间：2012-04-17T15:16:45.647
> 
> 标签：sql-server, windows-runtime, system.data

只是想确保我没有遗漏任何东西。似乎没有 WinRT System.Data。我正在寻找的是连接到 SQL 的 System.Data.SqlClient。Metro App 可以连接到 SQL 吗？如果是，Metro App 可以以符合 App Store 的方式连接到 SQL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T19:00:07.497

你是对的，System.Data 不存在（当我第一次开始使用 WinRT 时，我也在寻找同样的东西）。您也将无法引用它。如果您想与 SQL 数据库通信，您将需要使用某种其他协议（WebService、SOAP、WCF 等）。

有一些可用的 SQLite 端口似乎正在工作，这将为您提供本地数据库选项，但不是基于服务器的选项，而无需使用某种中间人来访问数据库。

附带说明一下，我个人希望看到一个桌面 Metro 应用程序可以连接到例如 SQL Express 数据库，但如果不跳过箍，它目前还没有实现。