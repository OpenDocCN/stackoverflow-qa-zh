# StackOverflow 问答 11768000-11768999

# android - ICS 中的 Android 日期选择器年份字段已更改

> ID：11768000
> 
> 赞同：0
> 
> 时间：2012-08-01T21:42:22.973
> 
> 标签：android, datepicker, android-4.0-ice-cream-sandwich

我在我的应用程序中使用 DatePicker 组件来选择日/月/年

现在我的手机已更新为 ICS，我发现年份字段已替换为完整的日历。有没有办法回到日/月/年的 3 列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T21:43:41.137

试试`android:calendarViewShown="false"`你`<DatePicker>`的布局。

# php - PHP 正则表达式：匹配 Ands - & 和 &

> ID：11768004
> 
> 赞同：2
> 
> 时间：2012-08-01T21:42:46.007
> 
> 标签：php, regex

我正在尝试匹配来自 html 的字符。有三种类型的and：

```
and, &, &amp; 
```

我正在使用以下代码：

```
(&|&amp;|\band\b) 
```

上面代码的问题是：它也匹配以 & 开头的单词

```
i.e. &copy; &euro; 
```

我也尝试了以下方法，但它与文本中行首和行尾的 & 字符不匹配。

```
(\s&\s|&amp;|\band\b) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:48:46.200

怎么样

```
(&amp;)|&(?!\w)|\band\b 
```

比赛`and`, `&`,`&amp;`

不匹配`&copy;` `&euro;`

中间的匹配一个不带单词字符 ( `[A-Za-z0-9_]`)的 & 号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T21:47:52.817

```
(&|&amp;|\band\b) 
```

是一个好的开始。继续减少结果集，当*不*匹配时，您将不得不指定详细信息。没有神奇的分隔符可以告诉正则表达式你想要什么。所以问题是：你怎么能从那些你不想接受的人中分辨出你想接受的'& *'*？

*如果不*开始一个单词，也许你想接受所有的'&' ？所以：

```
(&[^a-zA-Z]|&amp;|\band\b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:04:39.653

试试这个正则表达式：

```
$regex = '/\b((\&(amp;)?)|(and))\b/i'; 
```

# linux - 在 Fedora 17 中查找用户登录失败的日志条目

> ID：11768011
> 
> 赞同：1
> 
> 时间：2012-08-01T21:43:11.133
> 
> 标签：linux, logging, fedora

我已经能够在 /var/log/messages 中找到我要查找的大部分内容，但我似乎找不到任何用户登录失败的记录。谁能指出我在哪里寻找这样的记录的正确方向？

我听说 /var/log/lastlog 会包含这样的信息，但是 'cat /var/log/lastlog' 只是吐出一堆我无法理解的二进制文件。我是 Linux 新手，但有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:35:23.877

将此命令与 sudo 权限一起使用

```
lastlog 
```

它检索 /var/log/lastlog 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T18:19:23.677

在 sudo priv 中使用 lastb 命令：

```
sudo lastb 
```

# iphone - 目标vc和源vc有什么区别？

> ID：11768015
> 
> 赞同：0
> 
> 时间：2012-08-01T21:43:38.637
> 
> 标签：iphone, ios, xcode, uiviewcontroller

我试图学习如何执行自定义转场，这样我就可以有一个游戏菜单，当我在网上搜索时，似乎你必须制作一个自定义转场类，并覆盖`-(void) perform`，在这种方法中你必须指定一个组成的目的地vc和一个源vc。并确定它的位置和东西。这是我在互联网上看到的代码之一。

```
@implementation FromTopReplaceSegue
-(void)perform{
    UIViewController *dst = [self destinationViewController];
    UIViewController *src = [self sourceViewController];
    [dst viewWillAppear:NO];
    [dst viewDidAppear:NO];

    [src.view addSubview:dst.view];

    CGRect original = dst.view.frame;

    dst.view.frame = CGRectMake(dst.view.frame.origin.x, 0-dst.view.frame.size.height, dst.view.frame.size.width, dst.view.frame.size.height);

    [UIView beginAnimations:nil context:nil];
    dst.view.frame = CGRectMake(original.origin.x, original.origin.y, original.size.height, original.size.width);
    [UIView commitAnimations];

    [self performSelector:@selector(animationDone:) withObject:dst afterDelay:0.2f];
}
- (void)animationDone:(id)vc{
    UIViewController *dst = (UIViewController*)vc;
    UINavigationController *nav = [[self sourceViewController] navigationController];
    [nav popViewControllerAnimated:NO];
    [nav pushViewController:dst animated:NO];

}
@end 
```

我想这应该是一个从顶部向下出现的segue或其他东西。但我有几个问题，比如什么是源和目标 vc，以及代码所说的部分`dst.view.fram=CGRectMake(dst.view.frame.origin.x, 0-dst.view.frame.size.height,`

那里的 0 到底是什么鬼，不应该是这样`dst.view.frame.origin.y`吗？

好吧，不管怎样，我把它连接起来并从一个按钮创建了一个 push segue，但是当我这样做时，segue 只从屏幕顶部向下移动了大约 3/4，而底部的 1/4 显示了我的底部根视图。而且当我在segue之后尝试按下我的新vc上的按钮时，程序崩溃了。

任何信息都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:08:28.730

这是看起来没有完全解释的事情之一。从您的代码来看，看起来“源视图控制器”是根视图控制器（或父视图控制器），而“目标视图控制器”是 DetailViewController（或子视图控制器）。

不知道这是否让你更困惑。无论如何，父/根视图控制器是主视图控制器，它处理子视图控制器的显示。我发现有趣的是，创建者将另一个类的视图子类化而不是呈现它。

现在 0 - self.view.frame.size.height = -320 在 y 轴上。把你的主视图想象成一张纸，把子视图想象成第二张纸。想象一下将两张纸放在另一张上方（而不是在顶部）。屏幕只会显示底部的一张纸，直到您将“上面的纸”动画下来。基本上，他计划从顶部而不是底部制作动画（我想我回答了我自己的好奇心。）

# c++ - VS COM 项目在 32 位编译，但在尝试编译 64 位时抛出错误 C2259

> ID：11768016
> 
> 赞同：5
> 
> 时间：2012-08-01T21:43:39.733
> 
> 标签：c++, visual-studio-2010, contextmenu, atl, shell-extensions

您好，我目前正在运行 Visual Studio 2010，并且有一个上下文菜单外壳扩展，它在 32 位机器上完全以 32 位运行，因此所有方法都存在。这是一个 ATL 项目。在 32 位上没有错误甚至警告。

这是问题所在。当我进入 Visual Studio 下的配置管理器并将活动解决方案平台从 Win32 切换到 x64 并尝试编译时，我收到错误“错误 C2259：'ATL::CCOMObject: 无法实例化抽象类”。

既然这个完全相同的项目确实在 32 位下编译和运行，为什么它会给我带来 x64 的错误？

任何想法或正确方向的观点将不胜感激。
需要和实现的主要方法如下：

```
STDMETHODIMP Initialize(LPCITEMIDLIST, LPDATAOBJECT, HKEY);
STDMETHODIMP GetCommandString(UINT, UINT, UINT*, LPSTR, UINT);
STDMETHODIMP InvokeCommand(LPCMINVOKECOMMANDINFO);
STDMETHODIMP QueryContextMenu(HMENU, UINT, UINT, UINT, UINT); 
```

节省代码空间 创建一个 Atl 项目。创建初始项目后，添加一个新类“TestingContextMenu”其余代码将引用它。

标准文件

```
#include "resource.h"
#include <atlbase.h>
#include <atlcom.h>
#include <atlctl.h>
#include <shlobj.h>
#include <comdef.h>

#include <string>
#include <list>
typedef std::list< std::basic_string<TCHAR> > string_list; 
```

TestingContextMenu.h 仅包含已添加/更改的部分

```
#include "stdafx.h"
using namespace std;
class ATL_NO_VTABLE CTestingContextMenu:
        public CComObjectRootEx<CComSingleThreadModel>,
    public CComCoClass<CTestingContextMenu, &CLSID_TestingContextMenu>,
    public IShellExtInit,
    public IContextMenu
    {
        // Comment out or remove IDispatch
BEGIN_COM_MAP(CMainMagnimbusContextMenu)
    //COM_INTERFACE_ENTRY(ITestingContextMenu)
    //COM_INTERFACE_ENTRY(IDispatch)
    COM_INTERFACE_ENTRY(IShellExtInit)
    COM_INTERFACE_ENTRY(IContextMenu)
END_COM_MAP()

protected:
    TCHAR m_szFile[MAX_PATH];
    list<string> Filenames;
    list<string> FilenamesCopier;
public:
    STDMETHODIMP Initialize(LPCITEMIDLIST, LPDATAOBJECT, HKEY);

    STDMETHODIMP GetCommandString(UINT, UINT, UINT*, LPSTR, UINT);
    STDMETHODIMP InvokeCommand(LPCMINVOKECOMMANDINFO);
    STDMETHODIMP QueryContextMenu(HMENU, UINT, UINT, UINT, UINT);
};  //There is other code within this but it is autogenerated 
```

测试上下文菜单.cpp

```
#include "stdafx.h"
#include "TestingContextMenu"
#include <sstream>
using namespace std;
#pragma comment(lib, "comsuppw")

STDMETHODIMP CMainMagnimbusContextMenu::Initialize ( 
  LPCITEMIDLIST pidlFolder,
  LPDATAOBJECT pDataObj,
  HKEY hProgID )
  {
  FORMATETC fmt = { CF_HDROP, NULL, DVASPECT_CONTENT, -1, TYMED_HGLOBAL };
    STGMEDIUM stg = { TYMED_HGLOBAL };
    HDROP     hDrop;

    if ( FAILED( pDataObj->GetData ( &fmt, &stg ) ))
        return E_INVALIDARG;
    hDrop = (HDROP) GlobalLock ( stg.hGlobal );

    UINT uNumFiles = DragQueryFile ( hDrop, 0xFFFFFFFF, NULL, 0 );
   HRESULT hr = S_OK;

   if ( 0 == uNumFiles )
    {
       GlobalUnlock ( stg.hGlobal );
       ReleaseStgMedium ( &stg );
       return E_INVALIDARG;
    }

   UINT counter = 0;
    // Get the name of the every file and store it in our member variable m_szFile.
   for(counter = 0; counter < uNumFiles; counter++)
   {
        if ( 0 == DragQueryFile ( hDrop, counter, m_szFile, MAX_PATH ) )
        {   
            hr = E_INVALIDARG;
        }
        wchar_t* t = _wcsdup(m_szFile);
        char ch[260];
        char DefChar = ' ';
        WideCharToMultiByte(CP_ACP,0,t,-1, ch,260,&DefChar, NULL);
        string ss(ch);
        Filenames.push_back(ss);
        FilenamesCopier.push_back(ss);
   }

   GlobalUnlock ( stg.hGlobal );
   ReleaseStgMedium ( &stg );

   return hr;
} 
```

其余功能可应要求提供。但是我注意到了一些新的东西。如果您刚刚实现了上述功能和代码，并且配置管理器设置为构建 x64，那么您会得到我遇到的初始错误。这甚至意味着不实现 QueryContextMenu、GetCommandString 或调用命令。您在此设置中遇到的唯一错误是我原来的错误，这是我们所期望的，因为它们没有实现。但是，将该配置管理器切换回 Win32，您会得到预期的错误，例如 3 个未解析的外部，以及命名 GetCommandString、InvokeCommand 和 QueryContextMenu 之后的 3 个错误。如果它们没有被实现，那么再次预期，但是为什么 x64 上的编译器只识别我原来的错误，这是很多人认为的，而不是实现的方法，

上一段只是我注意到的。我确实正确实现了所有 3 种方法，并且在 Win32 中正确编译，但在 x64 中编译不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T05:47:44.033

您的`GetCommandString`参数与接口方法定义的参数不匹配。

您的

```
STDMETHODIMP GetCommandString(UINT, UINT, UINT*, LPSTR, UINT) 
```

需要是

```
STDMETHODIMP GetCommandString(UINT_PTR, UINT, UINT*, LPSTR, UINT) 
```

in`Win32`不匹配并不那么重要（参数类型解析为相同的类型），而 in `x64`is 变得很重要。编译器构建输出应该给你一个提示，包括缺少的方法名称。

# jsf-2 - web.xml 中定义的错误页面嵌入在部分呈现的 JSF 页面中

> ID：11768021
> 
> 赞同：5
> 
> 时间：2012-08-01T21:44:01.147
> 
> 标签：jsf-2

我在 web.xml 中定义了以下内容：

```
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/shared/errors/DefaultErrorPage.xhtml</location>
</error-page>
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/shared/errors/ViewExpired.xhtml</location>
</error-page> 
```

我还在 faces-config.xml 中使用来自 Omnifaces 的 FullAjaxExceptionHandler：

```
<factory>
    <exception-handler-factory>
        org.omnifaces.exceptionhandler.FullAjaxExceptionHandlerFactory
    </exception-handler-factory>
</factory> 
```

FullAjaxExceptionHandler 对于 ajax 调用工作正常，但是当我直接点击一个页面并且出现错误时，它会开始呈现我试图访问的页面，但它没有完成，然后是 web.xml 中定义的错误页面。 xml 被渲染，这导致错误页面在部分渲染页面之后被嵌入。

（我正在使用具有 Mojarra JSF 2.1.3 的 Glassfish 3.1.1）编辑：现在使用 Glassfish 3.1.2.2 和 JSF 2.1.11

编辑：发现以下内容：发生错误的页面正在使用模板（`<ui:composition template="/shared/shared/commonLayout.xhtml">`）如果我更改它以使页面不再使用模板，然后只需添加模板中的所有代码，它就可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T19:36:03.543

当在抛出异常之前响应已经提交时，就会发生这种情况。当以某种方式显式调用 JSF 覆盖的深处时，将提交响应`ServletOutputStream#flush()`，这通常仅在响应缓冲区（在大多数容器中通常默认为 2KB）已溢出时才提交。承诺的响应是不归路的。服务器无法从客户端取回已经发送的字节。服务器基本上有2个选项：

*   保留响应并仅将异常记录到服务器日志中。
*   无论如何尝试将错误页面写入响应。

您的 Glassfish 设置显然选择了第二种方式。它们都不是完美的。客户端仍然会得到一个半生不熟的 HTML 响应，最终用户看起来会是什么样子取决于网络浏览器如何在解释和呈现迄今为止获得的 HTML 方面做到最好。

但是，作为 JSF 开发人员，您可以使用多种方法来*避免*这种情况发生。首先，为什么在呈现响应*期间会抛出异常？*这实际上不是表明您自己的代码中存在错误吗？在呈现响应*之前*，您不是更好地执行对异常敏感的业务工作吗？您可以`<f:event type="preRenderView">`为此使用。

```
<f:event type="preRenderView" listener="#{bean.init}" /> 
```

如果由于某种原因这确实不是一个选项，您可以考虑将响应缓冲区大小增加到最大 HTML 响应的大小以上，以便在发生异常*之前*不会自动刷新响应。您可以通过以下上下文参数来做到这一点，该参数假定每个 HTML 响应都符合 100KB 的限制：

```
<context-param>
    <param-name>javax.faces.FACELETS_BUFFER_SIZE</param-name>
    <param-value>102400</param-value><!-- 100KB -->
</context-param> 
```

# c - 尝试在 C 中传递数组时发生冲突的类型

> ID：11768024
> 
> 赞同：0
> 
> 时间：2012-08-01T21:44:16.457
> 
> 标签：c, arrays

我试图用 C 编写一个程序：

这是一段代码：

```
#include <stdio.h>
int i, left, right, largest = 0, n = 9;
int a[] = {23, 12, 22, 1, 4, 5, 16, 8, 9, 10};
int main()
{
 sort(a);
 //code to print sorted numbers here
 return 0;

}

void sort(int a[])
{
 buildheap(a);
 for(i = n; i < 0; i--)
 {
  exchange(i, 0);
  n = n - 1;
  maxheap(a, 0);
 }
} 
```

它显示如下警告：

```
heapsort.c:16: warning: conflicting types for âsortâ 
```

这是因为我不包括`conio.h`吗？

当我尝试包含 conio.h 时，gcc 编译器会抛出未找到 conio.h 的错误。

有关上述警告及其与 conio.h 的相关性/不相关性的任何链接或详细说明都会有所帮助

# 更新

我很抱歉在这里缺少基础知识。

太感谢了。我的程序现在运行良好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T21:47:09.937

`sort()`这是因为在使用之前没有声明。如果在使用函数之前未声明（或定义）函数，则会生成带有签名的隐式声明（编译器应该发出*隐式声明*`int sort()`警告） 。添加声明或将定义移至 before `main()`。

和可能有同样的问题`buildheap()`：我不认识任何这些功能。`exchange()``maxheap()`

# facebook-javascript-sdk - 强制从 iframe 切换到 SDK 以获取共享按钮

> ID：11768026
> 
> 赞同：0
> 
> 时间：2012-08-01T21:44:25.693
> 
> 标签：facebook-javascript-sdk, share

我正在使用 iframe 共享按钮解决方案来在 facebook 上共享产品或帖子。我使用了这个系统，它在大约 10 个不同的网站上运行良好，但本周，它们都没有工作。

我读到我应该为每个网站获取一个 appId 并使用我所做的异步 SDK，并按照步骤使其工作：

1.  使用 appId 身份验证加载 SDK。
2.  如果需要，加载 jQuery（某些按钮需要它）。
3.  需要添加按钮代码。

我可以看到 SDK 已加载，`<div id="fb-root"></div>`但共享按钮从未出现在页面上，这不是布局问题。我尝试了几个不同的按钮，但它们都接缝永远不会让用户看到。

我读了很多关于这个问题的帖子，但每一个都在 7 月 22 日神奇地解决了……不是我的。我需要帮助来实现第一个按钮，因为之后我需要修复许多网站。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:01:32.113

在重新实现 FB btns 时，我最终去了这里： [https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

迫使 FB 浏览我目前正在处理的页面。事实证明，这有助于立即获得有关事情进展情况的反馈。

# java - Java 容器删除方法无法正常工作

> ID：11768029
> 
> 赞同：2
> 
> 时间：2012-08-01T21:44:31.713
> 
> 标签：java, swing, jframe, jpanel

我已经添加了 1.TextArea 2.TextField 然后我开始在容器上连续添加 JButton...，现在通过使用 JRadioButton 我想使用此代码从容器中删除 JButton

```
i=0;
k=0;
while(!birdButton[i].isSelected()){
    i++;    
}   
System.out.println(i);
k=i+2;
list.removeElementAt(i);
listName.removeElementAt(i);
System.out.println(k);
c.getContentPane().remove(k); 
```

但是当我选择第一个单选按钮时，应该删除第一个 JButton，因为 k=i+2; 而不是删除这个，而是删除 TextArea（第一个）。当我选择第三个单选按钮时，第一个 JButton 被删除。谁能让我知道问题是什么？而且也`System.out.println(i);` `System.out.println(k);`没有打印任何价值....这里是代码

```
public class RadioDemo implements ActionListener {

    String buttonName;
    JPanel radioPanel = new JPanel();
    ButtonGroup group = new ButtonGroup();
    Enumeration enl;
    int result;
    ActionEvent e;
    JRadioButton birdButton[];
    int i, k;

    Vector<String> listName;
    Vector<JComponent> list;
    Container c;

    public RadioDemo(Vector<String> listName,Vector<JComponent> list,Container c) {

        birdButton=new JRadioButton[listName.size()];
        this.listName=listName;
        this.c=c;
        this.list=list;

        i = 0;
        for (String buttonName : listName){
               birdButton[i] = new JRadioButton(buttonName);
               birdButton[i].setActionCommand(buttonName);
               group.add(birdButton[i]);
               birdButton[i].addActionListener(this);
               radioPanel.add(birdButton[i]);
               i++;
         }

        birdButton[0].setSelected(true);
        radioPanel.setLayout(new BoxLayout

        (radioPanel,BoxLayout.Y_AXIS));
                                    //birdButton.setBorder

        (BorderFactory.createEmptyBorder(5,5,5,5));
        result = JOptionPane.showConfirmDialog(null, radioPanel, "Please choose", JOptionPane.OK_CANCEL_OPTION);                
        show();
    }

    /** Listens to the radio buttons. */
    public void actionPerformed(ActionEvent e) {
        this.e = e;
    }

    public void show() {
        if (result == JOptionPane.OK_OPTION) {
            i = 0;
            k = 0;
            while (!birdButton[i].isSelected()) {
                i++;

            }
            System.out.println(i);
            k = i + 2;
            list.removeElementAt(i);
            listName.removeElementAt(i);
            System.out.println(k);
            c.getContentPane().remove(k);
            c.getContentPane().validate();

            // System.out.println(e.getActionCommand());
            // c.getContentPane().rePaint();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T23:46:31.400

默认情况下，返回的 是由`Container`顶级容器管理[的](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)，。尽管“为方便起见，该方法及其变体已被重写以根据需要转发给”，但没有*先验*方法可以了解框架对组件索引的内部使用。`getContentPane()``contentPane``JRootPane``JFrame``add``remove``setLayout``contentPane`

 *![图片](../Images/c25cf03bc153ab3649f78907e3cd5198.png)

相反，您可以自己添加`JComponent`到框架并对其进行操作；`JPanel`是一种常见的选择。

附录：还可以考虑另一种布局，例如`CardLayout`，如图[所示](https://stackoverflow.com/a/5655843/230513)。*

# javascript - 使用 `.match()` 分隔大括号内的数据 {}

> ID：11768030
> 
> 赞同：0
> 
> 时间：2012-08-01T21:44:36.720
> 
> 标签：javascript, regex

我有类似的数据

```
[{somevalue1},{somevalue2}] 
```

我想提取`datawithin`大括号

我用了

```
var data = data.match(/[{][^\"]+[}]/g); 
```

但我收到了`null`价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:52:11.367

你可以使用这个：

```
data = data.match(/\{([\w\s]*)\}/g); 
```

\w 将查找字母数字，\s 查找空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:51:17.570

```
data=data.match(/\{([^}]*)\}/g); 
```

# loops - DOS FOR 循环 - 我可以使用整个单词作为分隔符（多字符分隔符）

> ID：11768035
> 
> 赞同：1
> 
> 时间：2012-08-01T21:45:34.683
> 
> 标签：loops, for-loop, dos, delimiter

我有一个看起来像这样的源文件：

```
Name                SerialNumber          
\\.\PHYSICALDRIVE1  000000002027612  
\\.\PHYSICALDRIVE0  000000002027476 
\\.\PHYSICALDRIVE2  00000000202746E  
\\.\PHYSICALDRIVE3  00000000202760E 
```

在 dos 中使用 FOR 循环我需要能够解析出与每个 PHYSICALDRIVE 条目关联的数字，以便稍后在 bat 文件中使用。例如：1,0,2 和 3)

从我收集到的 delims= 一次只看一个字符。因为我不能说 delims= **PHYSICALDRIVE**并将其视为单个分隔符。谁能举例说明如何仅解析字符串末尾的数字？

以防万一使用延迟扩展。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:28:38.060

我认为任何解决方案都需要首先解析出完整的列值，然后使用 SET 搜索和替换或子字符串来解析出最后的数字。

我假设 Name 列值中永远不能有空格。因此，默认的 FOR /F 分隔符将很容易解析出第一列。

如果驱动器号总是小于 10，那么

```
for /f %%A in (yourFileName.txt) do (
  set "drive=%%A"
  set "drive=!drive:~-1!"
  echo !drive!
) 
```

否则，如果它可以是 10 或更大，那么

```
for /f %%A in (yourFileName.txt) do (
  set "drive=%%~A"
  set "drive=!drive:*physicaldrive=!"
  echo !drive!
) 
```

# java - 如何使我的 java 代码能够与许多数据库和许多操作系统一起使用？

> ID：11768036
> 
> 赞同：0
> 
> 时间：2012-08-01T21:45:38.977
> 
> 标签：java, database, jdbc

我想制作java代码，在3-4个DBMS中创建一个示例数据库，比如安装在任何操作系统上的mysql、oracle sql、sql server等——windows、linux发行版、Mac OS等。

我怎样才能使我的代码：

1.  自动（或在用户的帮助下）在计算机中找到 jdbc 驱动程序。
2.  执行一组固定的 sql 命令，无论使用何种 DBMS，这些命令都将起作用。

请建议我如何做所有这些事情。

编辑：这将是一个后端类型的应用程序。我对 JDBC 有点陌生，所以我正在寻找简单/基本的解决方案。稍后将切换到高级。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:49:31.197

1.  将所有受支持数据库的驱动程序与您的程序捆绑在一起。用户不必处理 JDBC 驱动程序或连接字符串。（提供一个 UI 来编辑后者，这可能因数据库而异。）
2.  使用 ORM（如[Hibernate](http://www.hibernate.org/)）；或者，如果您不需要使用数据填充数据库，则可以使用数据库迁移库（如[Flyway](https://code.google.com/p/flyway/)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:02:35.887

1、看这里...[如何从任意位置使用 JDBC 驱动程序](https://stackoverflow.com/questions/288828/how-to-use-a-jdbc-driver-from-an-arbitrary-location)

2、不同的DBMS使用相似但不相同的语法。您至少有 3 个选项：

*   仅使用您感兴趣的所有 DBMS 支持的 sql 命令；

*   嗅探 DBMS 并相应地修改您的 SQL 语句；

*   使用带有 SQL 抽象层的框架（例如 Java Persistence API 的 JPQL）。我怀疑这对你所追求的来说可能太多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:08:07.063

如果你想让用户找到JDBC驱动，那么你需要处理ClassLoaders和实现自定义的ClassLoaders，这不是一件简单的事情。或者你应该使用一个应用服务器来为你处理这个。

否则，您的类路径中将拥有所有可用的 JDBC 驱动程序。

顺便说一句，JDBC 是与大多数使用 SQL 的 RDBMS 一起工作的适配器，每个数据库提供程序都对其 SQL 进行了供应商特定的定制。例如，您在 Oracle 中有序列，在 MySQL 中有自动编号。或者您可以`limit`在 Oracle 中不可用的 MySQL 查询中使用。这个问题的解决方案是做 Hibernate 所做的事情（使用方言来处理数据库供应商特定的东西。）

# ruby - 回形针：NoMethodError（nil:NilClass 的未定义方法“匹配”）

> ID：11768038
> 
> 赞同：0
> 
> 时间：2012-08-01T21:45:54.657
> 
> 标签：ruby, ruby-on-rails-3, paperclip, nomethoderror

我已经查看了整个互联网，试图找出为什么这个错误发生在我身上。我正在尝试使用 Rails 3.2.7 中的回形针 gem 上传文件并给我这个错误：

```
NoMethodError in ItemsController#create

undefined method `match' for nil:NilClass

Rails.root: C:/Users/AC_37-PC_BH/RubymineProjects/railstutorial-sample_app_2nd_ed-815d98a

app/controllers/items_controller.rb:20:in `new'
app/controllers/items_controller.rb:20:in `create'

Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"oYc/V2xKpJVKXPukjrjzQJAboOxI27YXPI42sfDHYaA=",
 "item"=>{"item_name"=>"",
 "item_pic"=>#<ActionDispatch::Http::UploadedFile:0x3c36678 @original_filename="197623_10150112121221032_1900156_n.jpg",
 @content_type="image/jpeg",
 @headers="Content-Disposition: form-data; name=\"item[item_pic]\"; filename=\"197623_10150112121221032_1900156_n.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @tempfile=#<File:C:/Users/AC_37-~1/AppData/Local/Temp/RackMultipart20120801-6096-q8c9v0>>},
 "commit"=>"Create my account"} 
```

我在项目中包含了一个 github，所以你们可以测试它。并尝试看看出了什么问题。您必须手动访问 localhost:3000/items/new 才能看到该页面

[https://github.com/vinchbr/demo_app](https://github.com/vinchbr/demo_app)

所有帮助将不胜感激 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:22:13.760

您需要放入**Gemfile**：

以下代码：

```
gem 'paperclip', '3.0.4' 
```

# javascript - 如何使用 Javascript 模糊背景图像？

> ID：11768042
> 
> 赞同：3
> 
> 时间：2012-08-01T21:46:13.320
> 
> 标签：javascript, css, image

我的用户上传背景图片。这些图像存储在 Amazon S3 上的 CDN 中（不在同一台服务器上）。

目前，我做背景的方式是这样的。

```
<div id="background"></div> 
```

它的位置是固定的，我使用 javascript 来设置背景图像。

我想在客户端模糊这个背景。我怎样才能做到这一点？

Blur.js 不适用于 Amazon CDN 上的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:55:23.957

您可以使用 css 过滤器来执行此操作，但仅限于超级新浏览器。这和 SVG 过滤器的组合将为您提供一些浏览器。我想你可以回到画布，然后用 excanvas 来获取几乎所有的浏览器。

真的，我只会使用过滤器，一年左右大多数用户都会拥有它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:50:02.180

您可以随时尝试使用 Pixastic 库（只要您不介意使用 HTML5 功能）：

[http://www.pixastic.com/lib/](http://www.pixastic.com/lib/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-22T15:59:05.300

目前，您可以使用 style.filter，请参见下面的示例：

```
var element = document.getElementById("background");

element.style.filter = "blur(0px)"; 
```

在 Chrome 版本 86.0.4240.198 (Official Build) (x86_64) 上测试并且可以正常工作。

# iphone - iOS 上 PhoneGap 2.0 的应用内购买 (IAP) 插件？

> ID：11768045
> 
> 赞同：3
> 
> 时间：2012-08-01T21:46:29.457
> 
> 标签：iphone, ios, cordova, in-app-purchase

当前 PhoneGap 的 IAP 插件似乎只支持最高 1.6.0：[https ://github.com/purplecabbage/phonegap-plugins/tree/master/iOS/InAppPurchaseManager](https://github.com/purplecabbage/phonegap-plugins/tree/master/iOS/InAppPurchaseManager)

iOS 上是否有支持 PhoneGap 2.0 的 IAP 插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:38:31.297

这是一个更好的，我创建了一个更新的版本和示例代码。 [https://github.com/usmart/InAppPurchaseManager-EXAMPLE](https://github.com/usmart/InAppPurchaseManager-EXAMPLE)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T14:21:55.907

在这里你可以找到：

[https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager)

# android - 单击按钮时减少进度条？

> ID：11768047
> 
> 赞同：0
> 
> 时间：2012-08-01T21:47:05.893
> 
> 标签：android

我试图在我的应用程序中包含一个水平进度条。这个想法是，当用户单击一个按钮时，该栏会减少其长度的 1/10。然后，当它“空”时，单击第二个按钮会将其设置回 10/10。

关于如何做到这一点的任何想法？我已经进行了搜索，但大多数教程似乎都处理加载文件等，而不是通过单击按钮来调整栏。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:53:52.647

只需设置一个[`onClick(...)`方法](http://developer.android.com/guide/topics/ui/ui-events.html)并在每次单击时减少栏的进度。用于[`getMax()`](http://developer.android.com/reference/android/widget/ProgressBar.html#getMax%28%29)确定最大值，然后将其除以 10 以获得向下的步长。只要确保它不低于0。

```
int newProgress = yourProgressBar.getProgress() - (yourProgressBar.getMax() / 10);
if (newProgress < 0) {
    newProgress = 0;
}
yourProgressBar.setProgress(newProgress); 
```

然后，在您的第二个按钮中，重置为最大值：

```
yourProgressBar.setProgress(yourProgressBar.getMax()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:55:34.627

只需`setOnClickListener`在按钮上添加一个。使用`getMax()`ProgressBar 获取实际进度的大小和 getProgress()。 `getProgress()`-( `getMax()`\10) 进行下一步。如果你达到 0 设置 0。同样适用于“向上”按钮。

# jquery - 如何在焦点上删除多个输入的默认值

> ID：11768054
> 
> 赞同：0
> 
> 时间：2012-08-01T21:47:33.477
> 
> 标签：jquery, input, focus, default

在这个问题的答案中创建了一个很好的函数[How to remove default value of input on focus](https://stackoverflow.com/questions/3806227/how-to-remove-default-value-of-input-on-focus)，但是如何重新使用它并将其应用于多个输入字段？

像这样的东西，但工作[http://jsfiddle.net/hDCsZ/177/](http://jsfiddle.net/hDCsZ/177/)

基本的我敢肯定。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:55:18.070

您可以使用`defaultValue`属性：

```
$(document).ready(function(){ 
    $("input").focus(function() {
        if(this.value == this.defaultValue) {
             this.value = "";
        }
    }).blur(function(){
        if(this.value.length == 0) {
           this.value = this.defaultValue;
        }
    });
}) 
```

[演示](http://jsfiddle.net/KhDVT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:51:59.793

[http://jsfiddle.net/zSCn3/](http://jsfiddle.net/zSCn3/)

基本上，我们可以使用而不是两次编写函数`.each`并将其应用于所有可用的输入。通过使用`.each`jQuery 循环遍历每个输入并单独应用函数，`default_value = $(this).val()`特定输入的值也是如此。

```
 $(document).ready(function(){

        $('input[type="text"]').each(function(){    
            var default_value = $(this).val();        
            $(this).focus(function() {
                if($(this).val() == default_value)
                {
                     $(this).val("");
                }
            }).blur(function(){
                if($(this).val().length == 0) /*Small update*/
                {
                    $(this).val(default_value);
                }
            });
        });
    })​;​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:52:26.860

[http://jsfiddle.net/mpH6U/](http://jsfiddle.net/mpH6U/)

```
$(document).ready(function(){
    var input = $('input');

    input.each(function(){
       $(this).data('default', $(this).val());
    }).focus(function(){
        if($(this).val() == $(this).data('default')){
            $(this).val("");
        }            
    }).blur(function(){
        if(!$(this).val()){
            $(this).val($(this).data('default'));
        }
    });  
})​ 
```

# google-chrome - Chrome：如何将 1.5GB 的源代码压缩成 50MB 的可执行文件

> ID：11768055
> 
> 赞同：10
> 
> 时间：2012-08-01T21:47:35.147
> 
> 标签：google-chrome, compilation, executable

这简直让我感到困惑。我刚刚下载了 1.5GB 的 Chrome 源代码压缩包。编译的相同代码压缩到大约 50MB。

为什么源代码的大小与可执行文件的大小之间存在如此大的差异？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T21:51:26.750

可能导致这种情况的事情清单。

1.  可执行文件不需要空格、注释或任何漂亮的格式化内容。源代码可能有大量的文档和空白，只是为了使代码可读，所有这些都占用空间。

2.  源代码可能会带来很多其他代码来测试应用程序。但是这个测试代码永远不会进入最终的应用程序。

3.  包含在代码中的文档。根据格式、.doc 或 .docx 文件，文档可能很大。

4.  其他人提到源代码管理注释也可能在代码中。在源代码中包含提交消息也会使文件变大。

5.  我不知道您是如何/何时进行文件比较的，但如果您是在编译时间之后进行的，那么您可能也在计算中包含了编译工件（ *.o 文件）。因此，您可能会认为源代码只有 750 MB（粗略地说），但它是 1.5GB。

6.  根据编译器和它的好坏，它可能会生成更少的汇编代码，从而创建更小的文件。虽然我认为今天的大多数编译器都是合理的，但这不应该考虑太多的大小差异。（但我可能错了，我不是编译器）

7.  如果应用程序正在使用所有库进行静态编译，它会更大，因为现在它必须在其中包含它的依赖项。但是，如果库是动态链接/加载的，则可执行文件本身可能会小得多，因为它只会在运行时链接到库并仅在需要时加载它们。

tarball 是 1.5GB 还是扩展的 tarball 是 1.5GB？

无论如何，这里可能有很多因素在起作用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-11T02:08:24.297

所有源代码文件顶部的版权/许可平均有 1621 字节。Chromium（没有任何 svn/git/object/image 文件）有 73,510 个源文件（为此，我将其保存在*.cc、* .h、*.cpp、* .idl、*.m、* .js、*.c、* .py） .

这只是版权声明的 119159710 字节。

或 116366 KB

**或 133 兆字节。只是。在.. 版权声明..**

更糟糕的是，Chromium 上存在一些开放的错误，表明它们甚至可能违反了他们自己的许可证，因为它们混合了相当多不同风格和版本的开放（以及一些不那么开放）许可证。[1]

*资料来源：*

[1] [https://code.google.com/p/chromium/issues/detail?id=28291](https://code.google.com/p/chromium/issues/detail?id=28291)

[2] 我使用铬源代码：

Trevors-Mac:src trevor$ 查找 . -名称“*.cc”| wc -l

15941

Trevors-Mac:src trevor$ 查找 . -名称“*.h”| wc -l

26125

Trevors-Mac:src trevor$ 查找 . -名称“*.cpp”| wc -l

```
5191 
```

Trevors-Mac:src trevor$ 查找 . -名称“*.idl”| wc -l

```
 881 
```

Trevors-Mac:src trevor$ 查找 . -名称“*.m”| wc -l

```
 258 
```

Trevors-Mac:src trevor$ 查找 . -name "*.js" | wc -l

13528

Trevors-Mac:src trevor$ 查找 . -名称“*.c”| wc -l

```
7856 
```

Trevors-Mac:src trevor$ 查找 . -名称“*.py”| wc -l

```
3988 
```

Trevors-Mac:src 特雷弗$

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T21:50:19.193

好吧，这样说吧：当你编写汇编时，你可能会拼出`MOV 0,eax`（或者其他什么，我实际上并不知道汇编），然后它会被编译成几个字节。

高级语言通常比它们编译下来的机器代码占用更多的空间，因为它们需要被人类阅读。另一个例子： 2147483647 在源代码中拼写时需要 10 个字节，但在编译时只需要 4 个字节。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T21:51:18.587

至少部分答案是源代码中的许多单词和符号只对编译器重要，而不是可执行文件。例如，关键字“public”和“private”告诉编译器很多关于允许哪些代码访问哪些变量或其他代码的信息，但在 CPU 上运行的二进制可执行文件级别，没有这样的事情。CPU 只是访问它被告知要访问的任何内存。

# actionscript-3 - as3 显示不带标签的隐私面板

> ID：11768057
> 
> 赞同：0
> 
> 时间：2012-08-01T21:47:51.113
> 
> 标签：actionscript-3, security, panel, microphone

我们正在开发一个使用麦克风的应用程序。我们想展示隐私设置面板，但没有标签麦克风、摄像头等，只有基本的隐私面板。

这里的图片让一切更清楚：

带标签的设置

[http://www.creativewave.it/settings_tabs.jpg](http://www.creativewave.it/settings_tabs.jpg)

没有选项卡的设置

[http://www.creativewave.it/settings_notabs.jpg](http://www.creativewave.it/settings_notabs.jpg)

我们知道如果我们使用

麦克风：麦克风 = 麦克风.getMicrophone(); mic.setLoopBack(true) 我们可以拥有它。问题是，这样用户在对着麦克风说话时会听到他的声音，这对我们的应用程序来说太可怕了。

如果我们使用： Security.showSettings(SecurityPanel.PRIVACY); 我们得到了隐私面板，但带有标签。

无论如何有没有选项卡面板但不使用 setLoopBack(true) 的设置？

或者，是否有一种真正的方法来使用 setLoopback(true) 但没有自己声音的回声？我们确实为此尝试了很多东西，但确实没有成功。

多谢。保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:13:35.943

我想如果你使用 Security.showSettings("2"); 你会得到你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T23:51:26.983

在调用 Microphone.getMicrophone() 之前尝试将全局音频静音，然后在关闭隐私框后调高音量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:39:14.573

尝试使用 soundTransform 将麦克风的音量设置为 0，然后再增加它...

```
var st:SoundTransform = mic.soundTransform;
st.volume = 0;
mic.soundTransform = st; 
```

# hibernate - 我们什么时候应该选择 nHibernate 而不是其他 ORM？

> ID：11768062
> 
> 赞同：8
> 
> 时间：2012-08-01T21:48:13.620
> 
> 标签：hibernate, nhibernate

我承认，我并没有完全[理解](http://en.wikipedia.org/wiki/Grok)*Hibernate。

既然像[Dapper](http://code.google.com/p/dapper-dot-net/)这样的微型 ORM可以用来解决大多数数据访问需求，那么有哪些场景需要像 nHibernate 这样的大手笔呢？有哪些 nHibernate 大放异彩的例子？需要明确的是，我不认为“在不更改代码的情况下切换数据库的能力”有太多优势。在八年的编程生涯中，我实际上从来没有这样做过，而且这似乎是一个浪费时间的想法。

我愿意接受任何深思熟虑的回应，但这里有一些我有问题的例子：

1.  与 Dapper 之类的东西相比，查询 API 什么时候值得您在映射中投入额外的工作？
2.  您如何以一种限制开发工作并正常工作的方式利用延迟加载？
3.  什么时候值得您花时间弄清楚如何批处理语句？
4.  在什么情况下缓存系统比页面输出缓存更好？这只适用于非分布式环境吗？
5.  像我这样的普通人怎么能理解 nHibernate 在分布式环境中的工作方式？考虑混合缓存、批处理和无状态会话，并考虑负载平衡的 Web 服务器将如何处理所有这些。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T00:02:34.633

哇，大问题。不知道一个凡人能回答这个问题。但我认为您太快忽略“切换数据库的能力”。有很多软件包，无论是商业的还是开源的，都提供了使用不同 RDBMS 作为后备存储的能力。管理用于部署到 2 个以上数据库平台的 SQL 绝对是一场噩梦，因此以可预测的方式构建 SQL（至少与手写相比）是一个巨大的优势。只是扮演魔鬼的拥护者，对于某些数据库平台，我可以看到事务吞吐量的增长使得数据库选择的成本也非常昂贵。大多数ORM'

我认为简短的回答是，当您的数据库对应用程序的需求达到一定程度的复杂性时，满足您的需求的成本就会低于 nhibernate 学习曲线所涉及的成本。我无法提供完整的答案，但会尝试就您的清单项目发表我的想法。

1.  当你做的不仅仅是 CRUD。在多个数据库平台上进行复杂查询的需求可能就是一个很好的例子。在这种类型的应用程序上，您几乎可以最终维护两个独立的代码库（好吧，如果您使用存储的 proc 路线，它们真的会分离）并且将所有代码保存在 .net 中可能很有价值（能够统一例如，使用其余代码测试这些查询）。
2.  除了在中等信任环境中看到的问题之外，我不确定延迟加载现在是否“不起作用”。在我看来，延迟加载的唯一问题是您需要注意它，以避免在获取大量数据时可能出现的一些问题，主要是 N+1 选择问题。
3.  您不需要弄清楚如何批处理语句 - 您只需要设置一个配置值并忘记它。这是 NHibernate 以最小的努力为您所做的一个非常巨大的优化——当它只直接涉及操作和事务控制时，您的代码可以更简洁。
4.  当您为不同的用户以不同的方式呈现页面或在域层中进行任何类型的非平凡处理时，缓存返回的数据可能会很有用。即使在基本场景中，通过页面输出缓存，您最终可能会在缓存中拥有编辑页面、详细信息页面等，而将数据缓存到更靠近源的位置，您只需要缓存一次实体。更靠近源的缓存还可以为您提供更多保护，防止提供过时的数据。面向数据的缓存也可以通过服务或通过将 nHibernate 指向进程外存储（如 memcached 或 redis）在多个应用程序之间共享。这在某些环境中可能非常有价值。
5.  我不确定你需要了解它是如何工作的（很多时候我使用开源库来保护自己不需要了解这种事情的实现细节）。但简短的回答是，除了缓存（并且只有二级缓存）之外，在分布式场景中，这些行为都没有任何不同。只要您使用分布式缓存提供程序（或将所有服务器指向同一个进程外缓存提供程序），您在这方面也应该做得很好。

我只是在谈论 nHibernate，但我想 Hibernate 的故事大致相同。对于更大规模、更复杂的应用程序，可能会带来很多好处，但是为了获得这种好处，您需要承担很多额外的复杂性——它可能仍然没有为所有问题推出自己的解决方案复杂*Hibernate 为您解决。

你似乎也有很多关于缓存的问题。我建议阅读[此链接](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)以了解一级和二级缓存的工作原理。我不会在这里解释，因为听起来你的理解比我能适应这个已经很长的回复更深入:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T08:44:48.893

NHibernate 强大而强大，但您不必了解它的所有内容才能成功使用它。要回答您的问题：

1.  我所知道的所有 .NET micro-ORMS 都没有任何 LINQ 支持，而是依赖于在代码中混合 SQL 字符串。使用 LINQ 构建查询可为您提供类型安全、编译时检查和出色的可重构性。如果所有查询都使用 SQL 字符串，请尝试重构包含数千个查询的代码库……哎呀！通过重构，我的意思是添加新列、新表等简单的事情，这在企业环境中一直在发生。重构字符串是可能的，这就是依赖存储过程的人们仍然需要做的事情，但如果我可以使用类型安全，我肯定不会选择这样做。

2.  对于延迟加载，您唯一需要记住的是创建一个 SELECT N+1 场景。任何时候你有代码在域对象/实体上执行 foreach 循环，确保填充对象的查询使用了 .Fetch() 方法，该方法只是在 SQL 中创建一个 JOIN 并填充任何子对象。否则，当您遍历对象并点到任何子对象时，ORM 将不得不执行另一个 SELECT 语句来“获取”数据。基本上，在 NHibernate 术语中，Eager fetching 是您的朋友。

3.  使用 NHibernate 进行批处理就像馅饼一样简单。在您的 NHibernate 配置中，打开批处理就可以了。之后，如果您确实需要，您可以在运行时为特定查询调整批处理大小。

4.  我自己从来没有使用过二级缓存。我在大型企业环境中工作，我们的应用程序运行速度非常快，无需缓存。NHibernate 中的一级缓存虽然不需要配置，但可以简单地认为是更改跟踪。基本上，NHibernate 在内部保留了一个字典，其中包含它已经从数据库中检索到的对象以及哪些对象等待在数据库中保存/更新。一级缓存是我从来没有真正考虑过的，但我想在初级水平上了解它是如何工作的很好。

5.  同样，我目前在企业环境中工作，我们有各种使用 NHibernate 的应用程序；一些非常基本，而另一些则使用 NHibernate 必须提供的所有强大功能。不过，根据我的经验，我通常看到的是，并非团队中的每个成员都需要成为 NHibernate 专家。通常 1 到 3 名开发人员知识渊博，其他所有人都不会担心，只需创建他们的实体、映射并继续他们的编程。一旦基础设施到位并且您的组织已经整理出它希望使用的模式，一切通常都是轻而易举的。

额外的想法：

NHibernate 真正闪耀的一个地方是它能够映射任何一种你扔给它的疯狂数据库设计。现在我并不是说在 90 年代初期将一些疯狂的数据库设计映射在一起很容易，您必须将存储过程和另一个表连接在一起，但这*是*可能的。我一天中做过一些疯狂的映射。有些我什至认为是不可能的，因为数据库的设计目的并不是我们想要它做的事情，但是每次，通过持久性，我仍然设法利用 NHibernate 在映射好的和坏的数据库设计方面令人难以置信的灵活性来完成它。

使用 Micro-ORMS，您通常会在代码旁边嵌入大量 SQL 字符串。这如何被认为是清洁和高效的。似乎所有人现在都在将他们用来放入存储过程的东西放入他们的代码中。实际上，我确实在我的一些项目中使用了 Micro-ORM，尽管它是有意义的，但通常是当我只在一个表上查询一些简单的数据时——没有复杂的 WHERE 子句。

公平地说，我是那些投入大量时间学习 NHibernate 细节的人之一，但不是因为我需要工作，而是因为我只是想这样做。我和很多人一起工作，他们每天都在使用 NHibernate，但并没有完全理解它。但同样，他们不需要。你只需要知道一些基本的东西就可以了。

希望这可以帮助。

# python - 在 Python 中将 URL 字符串转换为普通字符串（%20 到空格等）

> ID：11768070
> 
> 赞同：41
> 
> 时间：2012-08-01T21:48:46.143
> 
> 标签：python, string

Python中有什么方法可以将其转换`%CE%B1%CE%BB%20`为`αλ`它的真实表示形式吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-01T21:51:39.943

对于蟒蛇 2：

```
>>> import urllib2
>>> print urllib2.unquote("%CE%B1%CE%BB%20")
αλ 
```

对于蟒蛇 3：

```
>>> from urllib.parse import unquote
>>> print(unquote("%CE%B1%CE%BB%20"))
αλ 
```

这是适用于所有版本的代码：

```
try:
    from urllib import unquote
except ImportError:
    from urllib.parse import unquote

print(unquote("%CE%B1%CE%BB%20")) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T21:52:01.677

这里有两种编码。您的字符串首先被编码为[UTF-8](http://en.wikipedia.org/wiki/UTF-8)，然后每个字节都被编码为[percent-encoded](http://en.wikipedia.org/wiki/Percent-encoding)。

要取回原始字符串，您需要先取消引用它，然后对其进行解码：

```
>>> import urllib
>>> s = '%CE%B1%CE%BB%20'
>>> result = urllib.unquote(s).decode('utf8')
>>> print result
αλ 
```

请注意，您需要启用 Unicode 的控制台才能显示该值（如果您在 print 语句中遇到错误，请尝试在[IDLE](http://en.wikipedia.org/wiki/IDLE_%28Python%29)中运行它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-26T19:16:55.567

蟒蛇 3 答案

```
import urllib 
urllib.parse.unquote('/El%20Ni%C3%B1o/')

'/El Niño/' 
```

[来源](https://docs.python.org/3/library/urllib.parse.html)

# asp.net-mvc-4 - SPA 还在为 MVC4 RC 工作吗？

> ID：11768073
> 
> 赞同：0
> 
> 时间：2012-08-01T21:48:58.783
> 
> 标签：asp.net-mvc-4, asp.net-spa

我对这件事有点困惑。我知道 VS 有一个用于 MVC4 beta 但没有用于 MVC4 RC 的 SPA 模板。但是[http://www.asp.net/single-page-application](http://www.asp.net/single-page-application)说我可以在安装 MVC4 RC 后安装带有 nuget 包的 SPA。这是否意味着 SPA 仍在为 MVC4 RC 工作？我之所以这么问，是因为[网上的一些讨论](http://aspnetwebstack.codeplex.com/discussions/358133/)表明了相反的情况。任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:49:53.527

最新的 ASP.NET SPA 版本（Beta）与 ASP.NET MVC4 RC（及更高版本）不兼容，但您可以使用较旧的 NuGet 包或修改当前 ASP.NET SPA 源来构建应用程序以使用 ASP.NET MVC 4钢筋混凝土。在这里，您可以找到这些解决方案的一些操作方法：

*   [使用 ASP.NET MVC4 构建单页应用程序 - 第 5 部分 - 使用 ASP.NET MVC4 RC](http://bartjolling.blogspot.nl/2012/06/building-single-page-apps-with-aspnet.html)
*   [DeliveryTracker 与 ASP.NET MVC 4 RC](http://peterporfy.wordpress.com/2012/06/18/deliverytracker-with-asp-net-mvc-4-rc/)

# javascript - 声明一个var而不是多次使用.find？

> ID：11768079
> 
> 赞同：1
> 
> 时间：2012-08-01T21:49:39.290
> 
> 标签：javascript, jquery

我一直在阅读最佳实践，我遇到了这个：

不要这样做：

`$("#element .child").hide()`

做这个：

`$("#element").find('.child').hide()`

现在我的问题是，如果我想`.child`多次隐藏/显示元素，我应该像这样声明它：

```
var spinner = $("#element").find('.child');
spinner.hide(); 
```

还是我继续打电话`$("#element").find('.child').hide()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:51:49.153

> 我应该这样声明：

```
var spinner = $("#element").find('.child');
spinner.hide(); 
```

是的。您应该这样做，因为它将消除对多个 dom 查询的需要。

但是，一种常见的最佳实践是，您可以轻松地跟踪哪些变量是 jQuery 对象而哪些不是，这是为您的变量添加前缀`$`

```
var $spinner = $("#element").find('.child');
$spinner.hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T21:52:02.257

是的，创建`spinner`变量。这样 jQuery 构造函数/函数就不会每次都执行，您可以重用曾经创建的对象。内存开销可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:58:17.153

这完全取决于您的问题，如果您需要在不同的功能中将相同的元素用于多种用途，最好的选择是将其保存到一个变量中，如果您只需要一次处理事件链，那就更不用说了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T22:17:25.427

是的，您应该始终尽量减少选择，这意味着您应该将每个元素选择保存在一个您需要多次的变量中。

也尽量避免单一的 DOM 操作。让我举个例子：

```
jQuery('#test').addClass('hide');
jQuery('#check').addClass('hide'); 
```

这会将类“hide”添加到 id 为“#test”或“#check”的元素中。您还可以在元素集合上应用许多 jQuery 函数，例如 .addClass，这将减少开销（例如使用 jQuery.each() 迭代数组/集合）。

```
// Select both ids within one query
jQuery('#test, #check').addClass('hide'); 
```

如果您真的在使用 DOM，这可能会带来巨大的性能提升，例如向选择框添加选项。我在 jsfiddle 上设置了一个小基准：http: [//jsfiddle.net/rrgNZ/2/](http://jsfiddle.net/rrgNZ/2/)

# android - Android：在后台加载视频广告的设计模式，同时用户与活动交互

> ID：11768081
> 
> 赞同：1
> 
> 时间：2012-08-01T21:49:53.147
> 
> 标签：android, service, android-asynctask

以下场景：我有一个包含一些活动的应用程序。此应用将使用插页式广告。这些是丰富的内容广告，通常是视频广告，可能需要一分钟或更长时间才能加载，并且通常显示在应用程序的转换点（例如，当用户从一个活动移动到下一个活动时）。

我怎样才能做到这一点？启动应用时启动服务并请求加载视频？相关广告网络 (Greystripe) 的 SDK 提供了一个侦听器类，带有一个在加载视频时调用的事件回调。如何通知当前前台活动，广告已准备好展示？如何从服务中获取前台活动的句柄？

或者我应该使用 AsyncTask 吗？如果我使用 AsyncTask，我在哪里启动 AsyncTask？如果用户切换活动会发生什么？AsyncTask 知道吗？当创建它的活动被破坏时，AsyncTask 不是被破坏了吗？

# python - eval() 总是错误的吗？

> ID：11768087
> 
> 赞同：2
> 
> 时间：2012-08-01T21:50:27.157
> 
> 标签：python, eval

我知道应该避免使用 eval() 和 exec()，但在这种情况下，它似乎是最好的选择：我从 wxPython 中的复选框和文本框中获取值并将它们放入我的配置类中。这是我使用 eval() 的方式：

```
config = wx.Config()
checkBoxes = ['option_1', 'option_2']
for key in checkBoxes:
    config.Write(key, str(eval('self.m_checkBox_'+key+'.GetValue()')) 
```

没有任何安全问题，因为 eval 没有任何用户输入，这对我来说似乎很清楚。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T21:53:54.317

怎么样：

```
config = wx.Config()
checkBoxes = {'option_1': m_checkBox_option_1, 
              'option_2': m_checkBox_option_2}
for checkbox in checkBoxes:
    config.Write(checkbox, str(checkBoxes[checkbox].Value())) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T22:03:33.350

```
config = wx.Config()
checkBoxes = ['option_1', 'option_2']
for key in checkBoxes:
    config.Write(key, str(getattr(self, 'm_checkBox_'+key).Value())) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T22:04:56.180

其他答案在为手头的问题提出替代解决方案方面做得很好，所以我将看看你提出的更大的问题，并将你引向一个更聪明的开发人员的话，他[详细地写了 eval 的问题](http://me.veekun.com/blog/2012/03/24/on-principle/)。

* * *

当我看到`eval`时，一片乌云笼罩着周围的代码，我以怀疑和不信任的眼光注视着整个混乱，直到我确信它的使用是合理的。

[...]

`eval`这是一个坏主意，因为*几乎每次我看到它使用时，都会造成无法预料和不必要的问题。*

重要的部分是“不可预见的”和“不必要的”。不可预见，因为`eval`有*一大堆*与之相关的警告，我什至不经过深思熟虑就无法完整回忆起这份清单。不必要的，因为替代方案`eval`往往不需要更多的工作来实施，而由此引起的问题`eval`是微妙和邪恶的。

[...]

`eval`不好，因为它引入了许多微妙的安全和翻译问题，它破坏了字节码缓存，它隐藏了语法和其他错误直到运行时，它导致了难以遵循的距离，它破坏了语法突出显示。它只会让你的代码*变得更糟。*

* * *

你说你确保不暴露`eval()`给用户输入。伟大的！这是一个很好的第一步 - 但正如引用所提到的，这根本不是你必须考虑的事情列表的结尾`eval()`。带来这个答案和你得到的其他答案`eval()`是一种*虚假的经济。*至少，这是技术债务的产生。像优化一样，“我应该使用`eval()`？”的两个答案。是“你不应该”和“你*还不*应该”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T21:53:31.550

通常有更好的方法来编写它。在这种情况下，它是[`locals()`](http://docs.python.org/library/functions.html#locals)，尽管您可能希望首先拥有一个复选框对象列表而不是它们的名称和多个变量：

```
config = wx.Config()
checkBoxes = ['option_1', 'option_2']
for key in checkBoxes:
    config.Write(key, str(locals()['m_checkBox_' + key].Value())) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-01T21:56:23.380

```
config.Write(key, str(locals()['m_checkBox_%s' % key].Value())) 
```

用于局部变量`locals()`，`globals()`用于全局变量，`getattr(obj, attr_name)`用于通过 attr_name 获取 obj 的属性。

# windows - 如何选择正确的数字证书来对 Windows 下的可执行文件进行代码签名？

> ID：11768089
> 
> 赞同：1
> 
> 时间：2012-08-01T21:50:28.150
> 
> 标签：windows, certificate, code-signing, digital-certificate

我需要获得数字证书才能在 Windows 下签署我的 EXE、DLL、屏保和 MSI 文件。我一直在寻找各种价格的大量证书。

这里只是一些（2012 年 8 月）：

*   [威瑞信](https://www.symantec.com/verisign/code-signing/microsoft-authenticode)每年 499 美元。
*   [解冻](http://www.thawte.com/code-signing/index.html)，每年 299 美元。
*   [GoDaddy](http://www.godaddy.com/ssl/code-signing-certificate.aspx)每年 199 美元。
*   [Comodo](http://www.instantssl.com/code-signing/?key5sk1=d7ea482f69ef0152f4148711dc474fbbe791c754&key5sk2=&key5sk3=1343706861000&key5sk4=&key5sk5=1343706871000&key6sk1=&key6sk2=CH200113247&key6sk3=7&key6sk4=en-us&key6sk5=US&key6sk6=0&key6sk7=Google&key6sk8=113300&key6sk9=16801050&key6sk10=true&key6sk11=2816657e20dca66aeba335cbaa3aa5bc53588794&key6sk12=2032&key7sk1=124&key1sk1=ors&key1sk2=Google) 180 美元/年。

那么有人能解释一下为什么会有这么大的价格差异吗？也许有人真正处理过数字证书——如果你能分享任何可能的陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T21:54:51.177

我们使用 Comodo 进行代码签名，并通过经销商获得证书，这使得它们更便宜。我们已经与他们签署了我们所有的产品，并将它们分发给了许多客户，并且还没有发现任何问题。我看不出有任何理由使用更昂贵的供应商。

* * *

编辑：我刚刚想到的一件事 - 如果您打算注册 Microsoft 的 WinQual 计划，我认为他们对代码签名证书有非常具体的要求，我认为这会限制您对提供商的选择。如果这对您有影响，我会阅读有关该主题的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T05:54:12.643

Verisign 的代码签名证书可用于签署内核模式驱动程序（GlobalSign 是此目标的唯一替代品，价格较低）。从技术角度来看，其余部分是相同的。不同的 CA 使用不同的客户验证技术并需要不同的文档集。如果你是一家公司并且有一个办公室，你应该不会有任何 CA 的问题。如果您只有一个虚拟办公室或者您是单人企业，那么某些 CA 的要求可能比其他不同 CA 的要求更难满足。

# javascript - 我想在最后一张图片上停止我的 jquery 滑块，我该怎么做？

> ID：11768091
> 
> 赞同：-2
> 
> 时间：2012-08-01T21:51:01.803
> 
> 标签：javascript, jquery, html, css

这是链接：[http ://aydinfolio.com/Development_peppermint/](http://aydinfolio.com/Development_peppermint/)

我希望它的滑块停在第一张照片上并且没有播放，所以这意味着没有更多的循环。我可以用 java-script 停止它还是如何停止它。

请让我知道它的紧急情况。

```
$(document).ready(function () {
    setTimeout(function () {
        $("div.mydiv").fadeOut("slow", function () {
            $("div.mydiv").remove();
        });
    }, 2000);
}) 
```

谢谢！

问候， Syed Hassan Ali Dimensionsxpert

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:11:06.613

这是对你真正想要什么的纯粹猜测。我查看了您的网页示例，并查看了名为**jquery.prettyPhoto.js**的 JS 文件。在那里它给出了一些线索，即使它已经被缩小了！

我认为，要确定它是否在最后一张幻灯片上，您需要将这些行添加到该 JS 页面中：

```
if(currentGalleryPage == totalPage) {
  clearInterval(pp_slideshow); // stop slider timer
} 
```

试试看。

在花时间写完这篇文章之后，你去改变了你的问题，这完全改变了一切——谢谢！

**更新**

加载您的**jquery.prettyPhoto.js** Javascript 页面。使用“查找和替换”并找到突出显示的行：

![在此处输入图像描述](../Images/3939d0f5b962d7781a1271a868c75853.png)

然后在突出显示的部分之后立即添加这一行：

```
if(currentGalleryPage==totalPage){clearInterval(pp_slideshow);}; 
```

它不能保证工作。浏览 JS 的缩小版本非常困难，而且非常耗时。那条线实际上可以在脚本中的许多不同位置出现，我试图打驴尾巴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:07:51.633

你可以做这样的事情

```
$( ".selector" ).bind( "slide", function(event, ui) {
    var step = $( ".selector" ).slider( "option", "step" );
    if (step == endSlideNumber){
        $('.selector').trigger('slidestop');
    }
}); 
```

不完全确定它会起作用，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:33:43.967

好的，您声明了错误的插件，但这是一种类似的方法

设置选项

```
changepicturecallback: function(){
   if(currentGalleryPage == totalPage) {
       clearInterval(pp_slideshow); // stop slider timer
   }
} 
```

# git - 为什么 egit 可以选择承诺头部？

> ID：11768094
> 
> 赞同：0
> 
> 时间：2012-08-01T21:51:13.967
> 
> 标签：git, github, egit

当我使用 egit 提交文件时，可以选择“head”的选项是什么。此外，当我选择“head”时，不会提交任何文件。我不应该只致力于掌握吗？

![在此处输入图像描述](../Images/02f3737d795d21f00307ddf34f10caaf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:55:41.070

您显然混淆了提交和推动。您显示的屏幕截图是关于设置用于推送的规范。要了解此对话框的内容，请阅读[`git-push`手册](http://www.kernel.org/pub/software/scm/git/docs/git-push.html)，尤其是处理所谓的“refspecs”的部分，因为该对话框应该为您提供用于构建推送 refspec 的 GUI 界面。

# python - 为什么 map(print, a_list) 不起作用？

> ID：11768095
> 
> 赞同：18
> 
> 时间：2012-08-01T21:51:16.373
> 
> 标签：python, python-2.7, map-function

对于正常功能，`map`效果很好：

```
def increment(n):
    return n+1
l = [1, 2, 3, 4, 5]
l = map(increment, l)
print l
>>> [2, 3, 4, 5, 6] 
```

但是，如果将`print`其放入`map`函数中：

```
l = [1, 2, 3, 4, 5]
l = map(print, l)
print l 
```

蟒蛇会抱怨：

```
l = map(print, l)
            ^
SyntaxError: invalid syntax 
```

有什么`print`特别之处？也不`print(x)`是有效的函数调用吗？以上代码在python 2.7下测试。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-01T21:53:23.533

在 Python 2.x 中，`print`是语句，而不是函数。如果您在 Python 3.x 中尝试此操作，它将起作用。

在 Python 2.x 中，你可以说它`print(x)`不是语法错误，但它实际上不是函数调用。正如 ,和Python 2.x中的一样`1 + (3)`。`1 + 3``print(x)``print x`

在 Python 2.x 中，您可以这样做：

```
def prn(x):
    print x 
```

然后你可以这样做：

```
map(prn, lst) 
```

它会起作用。请注意，您可能不想这样做，`lst = map(prn, lst)`因为`prn()`返回`None`，因此您将使用仅包含相同长度的值列表替换值列表`None`。

编辑：Python 2.x 的另外两个解决方案。

如果你想完全改变 的行为`print`，你可以这样做：

```
from __future__ import print_function

map(print, lst) 
```

这`print`就像在 Python 3.x 中一样成为一个函数，因此它可以与`map()`.

或者，您可以这样做：

```
from pprint import pprint

map(pprint, lst) 
```

`pprint()`是一个打印东西的功能，它可以作为内置的。我不确定它与默认值有何不同`print`（它说它是一个“漂亮的打印”功能，但我不确定它到底有什么不同）。

此外，根据 PEP 8 标准，不建议将其`l`用作变量名，因此我`lst`在示例中使用。

[http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T21:58:49.667

在 2.x 中映射打印的更好方法是

```
from __future__ import print_function 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T21:54:58.180

正如其他人所说，在 Python 2.x`print`中是一个声明。如果你真的想在 Python 2.x 中这样做，你可以使用`pprint`：

```
from pprint import pprint
l = [1, 2, 3, 4, 5]
p = map(pprint, l) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T21:55:23.187

因为`print`不是函数。

但是您当然可以制作打印包装：

```
>>> def p(x):
...   print x
... 
>>> l = [1, 2, 3, 4, 5]
>>> l = map(p, l)
1
2
3
4
5 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T21:54:02.977

从您的行`print l`中，我假设这是 python2，其中`print`不是函数，而是语句**。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-22T18:55:22.607

上面的答案适用于 Python 2，但不适用于 Python 3，同时对 map 和 print 函数进行了更改。

为了在 Python 3中实现我想要做的事情，我得出的解决方案`map(print, lst)`是在 print 调用中解压缩列表。

```
lst = [1, 2, 3]
print(*lst, sep='\n') 
```

输出：

```
1
2
3 
```

您可以在我对[在 lambda 中使用 print](https://stackoverflow.com/a/42399676/149428)的回答中找到更多详细信息。

# c++ - 在 C++/CX 中解析 JSON ISO8601 日期

> ID：11768099
> 
> 赞同：3
> 
> 时间：2012-08-01T21:51:22.520
> 
> 标签：c++, microsoft-metro, windows-runtime, atl, c++-cx

我有一个来自 JSON“2012-08-01T15:42:06Z”的日期字符串，并希望在 Windows 运行时解析它。据我所知，只有**COleDateTime**可以处理这个问题。

当我取出“T”和“Z”字符时，我只能让它正确解析字符串，但这增加了一个额外的解析步骤。

**作品：**

```
COleDateTime dateTime;
dateTime.ParseDateTime(L"2012-08-01 15:42:06", 0UL, 1033UL); 
```

**失败：**

```
COleDateTime dateTime;
dateTime.ParseDateTime(L"2012-08-01T15:42:06Z", 0UL, 1033UL); 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:32:19.263

如果您的日期字符串格式一致，则可以使用`std::get_time`将时间解析为`tm`结构，将相关位复制到 a中，然后`SYSTEMTIME`从那里转换为 a `FILETIME`，然后再转换为`Windows::Foundation::DateTime`。

信息`std::get_time`：[http ://en.cppreference.com/w/cpp/io/manip/get_time](http://en.cppreference.com/w/cpp/io/manip/get_time)

转换为`SYSTEMTIME`的代码`DateTime`：[如何在 Metro (C++/CX) 应用程序中解析日期？](https://stackoverflow.com/questions/11615998/how-do-i-parse-a-date-in-a-metro-c-cx-app)

# opengl - 从 GLSL 版本 1.20 开始允许 GLSL Uniforms 初始化

> ID：11768103
> 
> 赞同：2
> 
> 时间：2012-08-01T21:51:43.943
> 
> 标签：opengl, glsl, intel

我收到以下错误：

```
WARNING: uniforms initializing is allowed from GLSL version 1.20
WARNING: Only GLSL version > 110 allows postfix "F" or "f" for float 
```

虽然我知道如何解决这个问题，但我想知道为什么会发生这种情况，因为发生这种情况的机器有 OpenGL 3.1 和 GLSL 1.4：

```
12:40:58 [INFO] Intel(R) HD Graphics Family
12:40:58 [INFO] OpenGL 3.1.0 - Build 8.15.10.2509 
```

编辑：有问题的着色器是一个片段着色器（没有顶点着色器）：

```
uniform sampler2D sampler;
uniform sampler2D bump;

uniform float imageSize;
uniform float range = 50;

void main() {
    vec2 pos = gl_TexCoord[0].xy;

    float height = texture2D(bump, gl_TexCoord[0].xy).r - 0.5;

    pos.y += height * range / imageSize;

    gl_FragColor = texture2D(sampler, pos);

            //gl_FragColor = texture2D(sampler, pos) *  (1 + (height - 0.3f) * 25);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T22:39:53.233

GLSL 规范规定，如果着色器不提供[`#version`指令](http://www.opengl.org/wiki/GLSL_Core_Language#Version)，则假定为 1.10 版。确保始终`#version`在着色器顶部提供指令。

# eclipse - 清除 Eclipse 工作区元数据

> ID：11768106
> 
> 赞同：38
> 
> 时间：2012-08-01T21:51:49.790
> 
> 标签：eclipse, metadata, configuration-files, workspace, eclipse-metadata

我在 Eclipse 中使用多个工作区。我最近注意到，我的一些工作区中有很多来自我安装然后又删除的软件包的杂物。据我所知，情况是许多包在安装包时为我打开的每个工作区写入内容（有时是很多内容）到 .metadata 文件夹。当我删除一个包时，它似乎清除了我当时碰巧打开的工作区的 .metadata 文件夹，但所有其他工作区都留下了孤立的元数据。有时，此元数据会导致问题——通常是打开工作区时出错，有时还会导致不稳定。

我知道处理这个问题的唯一方法是创建一个新的工作区，从被污染的工作区导入项目，重建我的所有设置（一个主要的痛苦），然后删除旧的工作区。有没有更简单的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-02T06:10:37.300

没有简单的方法可以从现有工作空间中删除“过时”的东西。使用“clean”参数并没有真正的帮助，因为您引用的许多文件都是“自由格式数据”，只有不再可用的插件才知道。

您最好的选择是优化重新导入，我想指出以下几点：

*   创建新工作区时，您已经可以选择将一些设置从当前工作区复制到新工作区。
*   您可以导出当前工作区的首选项（使用“*导出*”菜单）并在新工作区中重新导入它们。
*   Internet 上有很多建议将`${old_workspace}/.metadata/.plugins/org.eclipse.core.runtime/.settings`文件夹从旧工作区复制到新工作区。这无疑是最快的方法，但它可能会导致奇怪的行为，因为您的某些插件可能依赖于这些设置*以及*存储在其他地方的一些提到的“自由格式数据”。（甚至有人将这些文件夹符号链接到多个工作区，但这确实需要在所有工作区上使用相同的插件。）
*   将来，您可能需要考虑使用比工作区首选项更多的项目特定设置。因此，例如，所有 Java 编译器设置都可以在工作区级别或项目级别进行设置。如果在项目级别设置，您可以将它们置于版本控制之下并且独立于工作空间。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T22:12:20.723

您可能想要尝试的一件事是使用该`-clean`选项启动 eclipse。如果您选择让 eclipse 每次都使用相同的工作区，那么之后您无需执行任何其他操作。有了这个选项，工作空间应该被清理干净。

但是，如果您没有选择默认工作区，则在打开 eclipse 时会提示您选择工作区。此时，选择要清理的工作区。

有关详细信息，请参阅**[“如何以干净模式运行 eclipse”](https://stackoverflow.com/questions/2030064/how-to-run-eclipse-in-clean-mode-and-what-happens-if-we-do-so)**和**[“保持 Eclipse 运行干净”](http://www.eclipsezone.com/eclipse/forums/t61566.html)**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-08T09:29:11.547

在我的情况下，eclipse 没有在 $this 上显示父类函数，所以我执行以下提到的点并开始工作：-

我转到我的 /var/www/ 文件夹并检查 .metadata 文件夹（这里检查 .log 文件并显示）资源与文件系统不同步： 1\. 转到 Eclipse --> Project --> Clean 2\. Windows -- 首选项 --> 常规 --> 工作区 --> 并设置为“自动刷新”

在那场繁荣之后 - 事情开始起作用了:)

如果您也想从其他文件加载变量，请执行以下操作：- Eclipse-->Windows-->Preferences-->Php-->Editor-->Content Assist --> 并检查“显示其他文件中的变量”

然后它还会显示元素、变量和其他功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-08T15:05:54.173

> 我知道处理这个问题的唯一方法是创建一个新的工作区，从被污染的工作区导入项目，重建我的所有设置（一个主要的痛苦），然后删除旧的工作区。有没有更简单的方法来处理这个问题？

为了同步或恢复我们所有的设置，我们使用[Workspace Mechanic](https://marketplace.eclipse.org/content/workspace-mechanic)。记录所有设置后，单击一次并恢复所有设置...您还可以设置一个服务器，为所有用户提供这些设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-01T08:23:49.550

在某些情况下，我可以通过删除工作区元数据 (.metadata/.plugins/org.eclipse.core.resources/.snap) 中的 .snap 文件来防止 Eclipse 在启动期间崩溃。

另请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=149121](https://bugs.eclipse.org/bugs/show_bug.cgi?id=149121) （该错误已关闭，但最近发生在我身上）

# javascript - 为 index.html 设置默认状态而不使用#something

> ID：11768108
> 
> 赞同：0
> 
> 时间：2012-08-01T21:51:56.777
> 
> 标签：javascript, ember.js, ember-old-router

我有这个 Ember 路由器：

```
App.Router = Em.Router.extend({
    enableLogging: true,
    location: 'hash',    
    root: Em.Route.extend({
        // EVENTS
        gotoList: Ember.Route.transitionTo('list'),

        // STATES
        list: Em.Route.extend({
            route: '/list',
            connectOutlets: function(router, context) {
                router.get('applicationController').connectOutlet('list');
            }
        })
    })
}); 
```

我希望该路线`'/'`将显示列表出口（与 相同`'/list'`），但我不想复制与列表相同的状态。我可以以某种方式告诉根默认状态是列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:03:52.317

也许你在寻找`redirectsTo('list')`？

```
App.Router = Em.Router.extend({
  enableLogging: true,
  location: 'hash',    
  root: Em.Route.extend({
    // EVENTS

    gotoList: Ember.Route.transitionTo('list'),

    // STATES
    index: Em.Route.extend({
      route: '/',
      redirectsTo: 'list'
    }),

    list: Em.Route.extend({
        route: '/list',
        connectOutlets: function(router, context) {
            router.get('applicationController').connectOutlet('list');
        }
    })
  })
}); 
```

# ruby-on-rails-3 - 连接被拒绝 - connect(2) httparty

> ID：11768111
> 
> 赞同：1
> 
> 时间：2012-08-01T21:52:01.880
> 
> 标签：ruby-on-rails-3

我在使用瘦服务器通过 HttParty 发送帖子时收到此错误“连接被拒绝 - 连接（2）”，在 heroku 中我得到了同样的错误。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:09:58.747

这看起来像一个身份验证问题。检查您的用户名和密码组合或连接前显示的任何其他内容。还要检查该用户是否有权发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T05:18:19.587

另外，请检查您对 http 与 https 的使用情况。就我而言，我使用的网址不正确。我应该一直在使用[http://api.mashery.com](http://api.mashery.com)但正在使用[https://api.mashery.com](https://api.mashery.com)

# annotations - 无法让 Jetty 扫描带注释的类

> ID：11768113
> 
> 赞同：20
> 
> 时间：2012-08-01T21:52:03.067
> 
> 标签：annotations, jetty, embedded-jetty

我有一个带有嵌入式码头服务器的应用程序，我正在像这样启动它（放置在 main() 并使用 eclipse 启动）：

```
Server server = new Server(port);

WebAppContext context = new WebAppContext();
context.setResourceBase("web/");
context.setDescriptor("web/WEB-INF/web.xml");
context.setConfigurations(new Configuration[]{
            new AnnotationConfiguration(), new WebXmlConfiguration(),
            new WebInfConfiguration(), new TagLibConfiguration(),
            new PlusConfiguration(), new MetaInfConfiguration(),
            new FragmentConfiguration(), new EnvConfiguration()});

context.setContextPath("/");
context.setParentLoaderPriority(true);
server.setHandler(context);
server.start();
server.join(); 
```

我的 web.xml 看起来像这样（暂时为空，我不确定是否可以完全删除它）：

```
<web-app 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    metadata-complete="false"
    version="3.0">
</web-app> 
```

我有一个像这样设置的简单类：

```
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(urlPatterns={"/test"})
public class TestServlet extends HttpServlet {

    protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException  {
        request.getRequestDispatcher("/WEB-INF/html/index.html").forward(request,response);
    }
} 
```

当我在 web.xml 中使用传统的 servlet 映射时，我的应用程序运行良好。但是当我删除 web.xml 映射并使用注释时，我只得到 404。它看起来根本不像在扫描注释。控制台如下所示：

```
2012-08-01 17:40:37.021:INFO:oejs.Server:jetty-8.1.5.v20120716
2012-08-01 17:40:37.227:INFO:oejpw.PlusConfiguration:No Transaction manager found - if your webapp requires one, please configure one.
2012-08-01 17:40:37.294:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/Users/me/project/web/}
2012-08-01 17:40:37.547:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/Users/me/project/web/}
2012-08-01 17:40:37.547:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/Users/me/project/web/}
2012-08-01 17:40:37.547:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/Users/me/project/web/}
2012-08-01 17:40:37.641:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080 
```

我已经从我的研究中检查了一些事情：

*   servlet-3.0 jar 在类路径中
*   在 web.xml 中元数据完整设置为 false
*   我确保在 Web 应用程序上下文中包含 AnnotationConfiguration

我已经没有想法了，正要恢复到旧的 web.xml，但这让我很生气，为什么我不能让它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T01:18:12.670

**更新：2021 年 6 月**

示例项目已更新为 Jetty 版本中性。

[https://github.com/jetty-project/embedded-servlet-server](https://github.com/jetty-project/embedded-servlet-server)

它现在有特定版本的 Jetty 的分支。

较旧的示例项目已存档。

**更新：2015 年 6 月**

示例项目已针对 Jetty 9 和 Servlet 3.1 进行了更新

见：[https ://github.com/jetty-project/embedded-servlet-3.1](https://github.com/jetty-project/embedded-servlet-3.1)

**原答案：**

根据您的描述，以及我使用您的代码创建的示例项目，您所做的一切都是正确的。

示例项目：[https ://github.com/jetty-project/embedded-servlet-3.0](https://github.com/jetty-project/embedded-servlet-3.0)

为了使它起作用，您需要以下内容（仅提及这一点，因为您的问题未包含此详细信息）

*   JDK 1.6+
*   来自 Jetty 8.1.x（或更高版本）的 jetty-webapps jar（+ 依赖项）
*   来自 Jetty 8.1.x（或更高版本）的 jetty-annotations jar（+ 依赖项）

仅从这些有限的要求中，您就会看到以下依赖项列表。

```
$ mvn dependency:tree
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building sample-webapp 1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ sample-webapp ---
[INFO] com.company.sample:sample-webapp:war:1-SNAPSHOT
[INFO] +- org.eclipse.jetty.orbit:javax.servlet:jar:3.0.0.v201112011016:provided
[INFO] +- org.eclipse.jetty:jetty-webapp:jar:8.1.5-SNAPSHOT:test
[INFO] |  +- org.eclipse.jetty:jetty-xml:jar:8.1.5-SNAPSHOT:test
[INFO] |  |  \- org.eclipse.jetty:jetty-util:jar:8.1.5-SNAPSHOT:test
[INFO] |  \- org.eclipse.jetty:jetty-servlet:jar:8.1.5-SNAPSHOT:test
[INFO] |     \- org.eclipse.jetty:jetty-security:jar:8.1.5-SNAPSHOT:test
[INFO] |        \- org.eclipse.jetty:jetty-server:jar:8.1.5-SNAPSHOT:test
[INFO] |           +- org.eclipse.jetty:jetty-continuation:jar:8.1.5-SNAPSHOT:test
[INFO] |           \- org.eclipse.jetty:jetty-http:jar:8.1.5-SNAPSHOT:test
[INFO] |              \- org.eclipse.jetty:jetty-io:jar:8.1.5-SNAPSHOT:test
[INFO] \- org.eclipse.jetty:jetty-annotations:jar:8.1.5-SNAPSHOT:test
[INFO]    +- org.eclipse.jetty:jetty-plus:jar:8.1.5-SNAPSHOT:test
[INFO]    |  +- org.eclipse.jetty.orbit:javax.transaction:jar:1.1.1.v201105210645:test
[INFO]    |  \- org.eclipse.jetty:jetty-jndi:jar:8.1.5-SNAPSHOT:test
[INFO]    |     \- org.eclipse.jetty.orbit:javax.mail.glassfish:jar:1.4.1.v201005082020:test
[INFO]    |        \- org.eclipse.jetty.orbit:javax.activation:jar:1.1.0.v201105071233:test
[INFO]    +- org.eclipse.jetty.orbit:javax.annotation:jar:1.1.0.v201108011116:test
[INFO]    \- org.eclipse.jetty.orbit:org.objectweb.asm:jar:3.1.0.v200803061910:test
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.771s
[INFO] Finished at: Fri Aug 10 18:17:46 MST 2012
[INFO] Final Memory: 6M/180M
[INFO] ------------------------------------------------------------------------ 
```

您很可能只是缺少依赖项或 JDK 要求。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-06T16:31:31.150

`AnntationConfiguration``scanForAnnotations(WebAppContext)`类通过其方法扫描注释。在方法`AnnotationConfiguration`类中扫描以下路径。

*   容器罐
*   WEB-INF/类
*   WEB-INF/库

因此，如果您希望`src/main/java`扫描生产代码中的 servlet 类（即目录中的源代码），请将生产代码添加`WebAppContext`到`WEB-INF/classes`.

试试下面的代码，将您的代码添加到`WebAppContext`的元数据中。

```
URL classes = getClass()
        .getProtectionDomain()
        .getCodeSource()
        .getLocation();

WebAppContext context = new WebAppContext();
context.getMetaData()
    .setWebInfClassesDirs(
        Arrays.asList(Resource.newResource(classes))); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-03T00:41:03.620

我有同样的问题，但经过多次阅读后，我得到了解决方案！重要提示：请记住在您的构建路径中包含以下 jar：

jetty-all-9.0.6.v20130930.jar

jetty-annotations-9.0.6.v20130930.jar

org.objectweb.asm-3.1.0.v200803061910.jar

javax.servlet-api-3.0.1.jar

jetty-plus-9.0.6.v20130930.jar

```
public class Main {

   public static void main(String[] args) throws Exception {

       //Create the server
       Server server = new Server(8080);

       ClassList clist = ClassList.setServerDefault(server);

       //clist.addAfter("org.eclipse.jetty.webapp.FragmentConfiguration", "org.eclipse.jetty.plus.webapp.EnvConfiguration",    "org.eclipse.jetty.plus.webapp.PlusConfiguration");
       clist.addBefore(JettyWebXmlConfiguration.class.getName(), AnnotationConfiguration.class.getName());

       //Here is the trick to scan current classpath!
       webapp.setAttribute("org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern", 
            ".*/build/classes/");

       webapp.setContextPath("/");
       webapp.setResourceBase("./WebContent");

       server.setHandler(webapp);

       server.start();
       server.join();

   }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-03T09:41:20.147

基于之前 Joakim 提供的示例，我上传了一个修改后的版本，该版本支持嵌入式码头中的注释，而无需将项目打包到 war 文件中。该项目已准备好部署到 Heroku，正在运行：

```
$java -cp target/classes:"target/dependency/*" com.example.Launcher 
```

如果您对细节感兴趣，重要的几行来自 com.example.Launcher：

```
context.setConfigurations(new Configuration[] {
            new AnnotationConfiguration(), new WebXmlConfiguration(),
            new WebInfConfiguration(),
            new PlusConfiguration(), new MetaInfConfiguration(),
            new FragmentConfiguration(), new EnvConfiguration() });

// Important! make sure Jetty scans all classes under ./classes looking for annotations. 
//'Classes' directory is generated running 'mvn package'
context.setAttribute("org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern",".*/classes/.*"); 
```

您可以根据要扫描注释的类相应地更改 JarPattern。

在这里你有完整的例子：[https ://github.com/pablormier/embedded-jetty-annotations-example](https://github.com/pablormier/embedded-jetty-annotations-example)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-03T12:45:58.510

我提出了一种针对 Jetty & Spring 的不同方法。我没有让 Jetty 扫描类，而是在自定义 Jetty`initializer`的方法中手动调用类。代码如下：`startContext()``ServletContextHandler`

```
public class CustomServletContextHandler extends ServletContextHandler {

   @Override
   protected void startContext() throws Exception {

       SpringServletContainerInitializer initer = new SpringServletContainerInitializer();

        HashSet<Class<?>> classes = new HashSet<>();
        // Add annotated classes here such as
        //classes.add(SpringSecurityInitializer.class);
        //classes.add(SpringWebInitilializer.class);

        try {
            initer.onStartup(classes, this.getServletContext());
        }catch(Exception e)
        {
            e.printStackTrace();
        }

        super.startContext();
    }
} 
```

然后在创建上下文时，使用自定义处理程序：

```
 ServletContextHandler ctx = new CustomServletContextHandler();
 ctx.setContextPath("/");
 ... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T09:41:54.427

在我们的例子中，这些行有助于 Jetty 启动代码：

```
 ClassList cl = Configuration.ClassList.setServerDefault(server);
    cl.addBefore("org.eclipse.jetty.webapp.JettyWebXmlConfiguration", "org.eclipse.jetty.annotations.AnnotationConfiguration"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-01T19:13:49.543

你可以

1.  `EmptyResource.INSTANCE`如果您不需要静态资源，请提供

2.  添加 AnnotationConfiguration 和覆盖 `scanForAnnotations`方法，将类路径资源添加到`WebAppContext`元数据，可能带有根包的路径以进行扫描

    ```
    WebAppContext webapp = new WebAppContext();
        webapp.setContextPath("/");
        webapp.setBaseResource(EmptyResource.INSTANCE);
        webapp.setConfigurations(new Configuration[]{
                new AnnotationConfiguration(){
                    @Override
                    protected void scanForAnnotations(WebAppContext context) throws Exception {
                        Resource classPathResource =    Resource.newResource(EmbeddedServerApp.class.getResource("/my/learn/jetty/servlet").toURI());
                        context.getMetaData().addContainerResource(classPathResource);
                        super.scanForAnnotations(context);
                    }
                },
        });
        server.setHandler(webapp);
        server.start(); 
    ```

# android - Android：使用目标 SDK？

> ID：11768116
> 
> 赞同：2
> 
> 时间：2012-08-01T21:52:12.083
> 
> 标签：android, sdk, compatibility

我了解最低 SDK 定义了您的应用程序运行所需的最低操作系统级别，并且目标 SDK 会告诉设备您使用的功能的最高 API 版本，假设已实现向后兼容性。

但这就是我不明白的。您如何为全新的 API 功能实现向后兼容性？

例如：

在开发当前应用程序期间，我一直在使用旧的通知系统，而不是 Notification.Builder。如果我选择使用 Notification.Builder，操作系统或编译器会自动将其替换为在引入此功能之前的平台兼容代码吗？还是我必须检查操作系统版本并编写单独的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:55:41.693

您必须自己考虑新方法，例如通过使用，

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    // Use methods introduced in API 11\. (i.e. Notification.Builder)
} else {
    // Use old methods to ensure backwards compatibility.
} 
```

放置这些检查的好地方是实用程序类（即`CompatUtils.java`）。例如，您可以创建一个静态方法，该方法接受一个`Context`参数并返回一个新的`Notification`：

```
public static buildNotification(Context ctx) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        // Create and return the Notification using Notification.Builder
    } else {
        // Create and return the Notification using pre-HoneyComb methods
    }
} 
```

然后只需`CompatUtils.buildNotification(this)`在您的内部调用`Activity`以创建新的`Notification`. 抽象出这些细节可以让你保持`Activity`简洁，并且如果你以后需要的话很容易改变。

当然，最好只使用旧方法来创建您的`Notification`.，因为无论如何您都需要实现它们，而`Notification.Builder`. 尽管如此，这绝对是您应该牢记的，以防您以后遇到类似问题！

* * *

## 编辑：

`Notification.Builder`Android支持包中也提供了，所以在这种情况下你应该只使用它......但是，对于兼容性包中*没有*提供的方法，你应该使用上面描述的设计模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:19:33.563

google 有自己的兼容性包（在支持库中），还有其他第三方解决方案（如 actionBarSherlock），当您尝试使用无法使用的太新功能时，Lint 工具会告诉您您设置的 API 范围。

检查 API 的一种方法是使用 android.os.Build.VERSION.SDK_INT 。另一种方法是使用反射，有时谷歌会使用它（但我不确定为什么）。

无论如何，谷歌在其视频中建议始终将 targetSdk 设置为最高的，以改进输出 APK 的优化。

# algorithm - 维数可变时遍历n维数组

> ID：11768120
> 
> 赞同：2
> 
> 时间：2012-08-01T21:52:36.610
> 
> 标签：algorithm, multidimensional-array

我需要遍历一个 n 维数组。该数组是从另一个函数构建和传递的，并且事先不知道维数。这需要使用类似于 VBA 的原始语言来完成。因此，不存在 Python 的优点。

有谁知道如何做到这一点？

样本数组可能类似于 5 x 6 x 1 x 8 数组。所以，它是一个 4 维数组，dimension1=5，dimention2=6，dimension3=1 和dimension4=8。

我需要遍历每个 5*6*1*8= 240 个元素并以某种方式记录我的结果，以便我可以将我的结果与元素联系起来。

编辑：为了更清楚，在遍历结束时，我希望能够说位置 (2,3,1,5) 的元素是 x。所以，我需要记录元素在数组中的位置以及元素本身。

有问题的数组更像这样

`全局多数组作为变体

'\现在，许多其他函数，当找到符合条件的候选人时，将数组添加到这个数组中'\如下所示。

Redim multiarray(len(multiArray)+1) multiArray(len(multiarray))= newElementArray()

` 所以，我最终得到了类似下面的东西。只有尺寸会在运行时发生变化，所以，我需要一个通用的逻辑来遍历它。 ![多锯齿阵列](../Images/731e4fac19a6541f7f3b2ba5b5f45785.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:57:45.547

令 a`coordinate`表示元素在 n 维数组中的位置。例如`(2,1,3,4)`对应位置中的一个元素：`array[2][1][3][4]`.

```
var array = // n-dimensional

function traverse(array, coordinate, dimension);
   for(var i = 0 ; i < array.length ; i++){
      // assuming coordinate is immutable. Append the current iteration's index.
      currentCoordinate = coordinate.add(i); 
      if(dimension == 1){
         doSomething(currentCoordinate, array[i]);
      }else{
         traverse(array[i], currentCoordinate, dimension(array[i]));
      }      
   }
}

coordinate = []; // at first, the top level coordinate is empty.
traverse(array, coordinate, 4); // 4-dimensional 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:35:53.597

正如ggreiner 所示，实现将取决于它是多维数组还是交错数组（数组的数组）。

如果您只需要遍历数组的值，它可以很简单：（C#）

```
int[, ,] arr = new int[1, 3, 2] { { { 1, 2 }, { 3, 4 }, { 5, 6 } } };
foreach(int i in arr)
    Console.WriteLine(i); 
```

# ruby-on-rails - 使用 Mobylette 禁用对 ipad 的移动请求

> ID：11768126
> 
> 赞同：0
> 
> 时间：2012-08-01T21:53:06.747
> 
> 标签：ruby-on-rails

我希望我的移动网络体验排除 iPad 设备。我试过安装这样的前置过滤器：

```
def mobylette_device_override
  if (request_device?(:ipad))
    session[:mobylette_override] = :ignore_mobile
  else
    session[:mobylette_override] = nil
  end
end 
```

这具有错误地呈现正常网站的奇怪行为。我怀疑某些东西仍然与移动代码路径有关。有没有更好的方法来选择性地禁用 Mobylette。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:16:32.283

好吧，您当前的设置方式是，对于 ipad，您将忽略移动设备并为其他所有设备（包括常规浏览器）呈现移动设备。可能更好的解决方案是覆盖 mobilet 配置 (mobylette_config) 的后备

```
mobylette_config do |config|
  config[:fallback_chains] = {
    mobile: [:mobile, :html],
    ipad: [:html],
    ...
  }
end 
```

# mysql - 在 MySQL“INSERT”中使用“LIMIT”？

> ID：11768127
> 
> 赞同：6
> 
> 时间：2012-08-01T21:53:19.770
> 
> 标签：mysql, insert, limit

我可以在 MySQL INSERT 查询上使用 LIMIT 2 吗？例如

```
INSERT INTO MyTable
   (user_name,password)
VALUES
   (john,366543),
   (sam,654654)
LIMIT 2 
```

我试过了，它的说法

```
`#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LIMIT 2' at line 1` 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T21:58:03.543

您可以使用[INSERT ... SELECT 语法](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)执行此操作：

```
INSERT INTO MyTable (user_name, password)
SELECT 'john', '366543'
UNION ALL SELECT 'sam', '654654'
LIMIT 2; 
```

不知道你为什么想要。也许如果你有一个很长的静态值列表，你想通过设置限制来轻松控制？

正如 pst 在现已删除的评论中指出的那样， the`LIMIT`实际上是 的一部分`SELECT`，与自身无关`INSERT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-10T12:36:16.333

大多数情况下，如果我们从另一个表中插入数据，那么我们需要设置限制以插入特定数量的数据

```
 insert into cas_user (cas_name) select cas_name from users limit 1,5; 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-09T08:01:32.760

如果您试图通过使用限制来分批插入大量数据，那么您是在 MySQL 规定的初始约束范围内操作的。

尝试增加约束的值而不是：PFB

变量：**max_allowed_pa** ​​cket 、**bulk_insert_buffer_size**、**key_buffer_size**

要显示和设置的示例查询：

```
show variables like 'max_allowed_packet';
SET GLOBAL max_allowed_packet=524288000; 
```

参考资料： http:
[//forums.mysql.com/read.php?20,161869](http://forums.mysql.com/read.php?20,161869)

[MySQL - 我可以在一个 INSERT 语句中插入多少行？](https://stackoverflow.com/questions/3536103/mysql-how-many-rows-can-i-insert-in-one-single-insert-statement)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T21:55:38.997

LIMIT 2 仅适用于选择无值

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-15T20:24:21.797

我知道这是一篇旧文章，但您可以使用 foreach 循环来限制插入语句。就像是：

```
 $i = '1';   
    foreach($item as $item){
        IF($i <= '2'){
            IF ($stmt = $connection->prepare("INSERT IGNORE INTO `db`.`table`( `item`) VALUES (?)")) {

                /* Bind our params */
                $stmt->bind_param('s' , $item);

                $stmt->execute();

                $stmt->close();
            }
        }
        $i++;
    } 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-04-29T14:15:04.170

不，您不能在插入查询中使用限制

# python - Heroku 找不到 Django 模板

> ID：11768143
> 
> 赞同：3
> 
> 时间：2012-08-01T21:54:24.923
> 
> 标签：python, django, heroku

`TemplateDoesNotExist`Heroku 在查找我的 html 文件时出现错误。这些文件都在开发服务器上同步。该`TEMPLATE_DIRS`设置设置为：

```
TEMPLATE_DIRS = ['/Users/jonathanschen/Python/projects/skeleton/myportfolio/templates',] 
```

但是当尝试加载 herokuapp 页面时，我收到以下错误：我认为这里缺少一些非常基本的东西。

```
TemplateDoesNotExist at /
index.html
Request Method: GET
Request URL:    http://morning-coast-2859.herokuapp.com/
Django Version: 1.4.1
Exception Type: TemplateDoesNotExist
Exception Value:    
index.html
Exception Location: /app/.heroku/venv/lib/python2.7/site-packages/django/template/loader.py in find_template, line 138

Template-loader postmortem

Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
/Users/jonathanschen/Python/projects/skeleton/myportfolio/templates/index.html (File does not exist)
Using loader django.template.loaders.app_directories.Loader:
/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/auth/templates/index.html (File does not exist)
/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/admin/templates/index.html (File does not exist) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T21:57:54.737

您需要更新您的 TEMPLATE_DIRS 设置以指向 Heroku 可以找到的内容 - 您现在设置的路径将在本地工作，但 Heroku 不知道在哪里`/Users/jonathanschen/`（因为它没有那个文件夹）。您可能想尝试让您的 TEMPLATE_DIRS 设置使用相对路径：

```
import os.path
PROJECT_DIR = os.path.dirname(__file__) # this is not Django setting.
TEMPLATE_DIRS = (
    os.path.join(PROJECT_DIR, "templates"),
    # here you can add another templates directory if you wish.
) 
```

（来自[http://www.djangofoo.com/35/template_dirs-project-folder](http://www.djangofoo.com/35/template_dirs-project-folder)）

在 Django 1.8+ 中，改为更改`DIRS`选项`TEMPLATES`：

```
# BASE_DIR should already be in settings
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [os.path.join(BASE_DIR, "templates")],
        ...
    }
] 
```

# php - 在 Facebook 用户的墙上发帖

> ID：11768149
> 
> 赞同：2
> 
> 时间：2012-08-01T21:54:55.217
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk

我的问题非常简单，并且在 Stackoverflow 中已经回答了很多次，但是为了更改 Facebook API，我想确定正在使用我的应用程序的用户是否可以将应用程序自动生成的消息发布到他们的墙上。

如果用户正在我的应用程序中阅读他/她喜欢的评论，我希望他/她可以在他们的墙上发布一条消息，例如“我一直在阅读关于...的非常有趣的评论”，并且我想要该文本在 Facebook 请求允许用户在他们的墙上发帖的窗口中自动出现。

我用“feed”方法尝试了 JS API，但字段消息中的文本被忽略了。我将尝试使用 PHP API，但我认为结果是一样的。

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:16:16.330

## JavaScript SDK

您可以使用 JavaScript SDK 发送以下值：

```
// calling the API ...
var obj = {
  method: 'feed',
  link: 'https://developers.facebook.com/docs/reference/dialogs/',
  picture: 'http://fbrell.com/f8.jpg',
  name: 'Facebook Dialogs',
  caption: 'Reference Documentation',
  description: 'Using Dialogs to interact with users.'
}; 
```

（取自[文档的](https://developers.facebook.com/docs/reference/dialogs/feed/)代码和图像）

我描述了，什么字段是弹出窗口中的什么文本。如果未提供，则名称、图像、标题和描述来自网页，在链接中给出。

![脸书资讯](../Images/de6791a8ab1225444e3e0c267a54f5ca.png)

您*不能*在 JS 弹出窗口中包含默认消息。

## PHP SDK

但是，如果您使用的是 PHP SDK，则可以包含一条消息。

代码示例：

```
try {

    $facebook->api(
        "/{$facebookId}/feed",
        "POST",
        array(
            // this is the important part
            'message' => "This is your message!",

            'link' => $yourLink,
            'name' => "This is your name",
            'caption' => '..',
            'description' => '...',

            'type' => 'link',
            'application' => array(
                'name' => 'Name of your app',
                'id' => $idOfYourApp
            )
        )
    );
}
catch (\FacebookApiException $exception)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:12:10.257

提要中的“消息”字段不再起作用。您必须使用“描述”或“标题”

这是因为 Facebook 提到了“用户应该能够就互联网上的内容说出他们想要什么”的内容。

# html - 固定标题视差滚动

> ID：11768152
> 
> 赞同：0
> 
> 时间：2012-08-01T21:54:59.650
> 
> 标签：html, scroll, parallax

我正在尝试找出如何使用视差滚动制作固定标题。我希望每个部分（文章）都有自己的固定标题，该标题会随着幻灯片的开头向上滑动，但会停在最顶部，直到引入新的部分。

对于每个新部分，尝试在左上角浮动一个单独的标题，直到引入新部分。与 Facebook 的固定标题相同的概念，但仅在每个视差幻灯片中存在。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:15:31.137

我建议你使用 jquery Waypoints 插件。此示例可能是您需要的[http://imakewebthings.com/jquery-waypoints/sticky-elements/](http://imakewebthings.com/jquery-waypoints/sticky-elements/)。您可以在到达或超出视口的部分时创建特定事件。

# jquery - 在 jQuery 中创建 div 作为子容器

> ID：11768153
> 
> 赞同：1
> 
> 时间：2012-08-01T21:54:59.883
> 
> 标签：jquery, dom, html

如何获得这样的html：

```
<div id="generalContainer">
    <div id="subContainer">    
        <div id="content">
        </div>
    </div>
</div> 
```

从像这样的原始html：

```
<div id="generalContainer">         
    <div id="content">
    </div> 
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:56:58.460

```
$("#content").wrap('<div id="subContainer">'); ​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:00:26.843

```
 <div id="generalContainer">         
        <div id="content">blabla</div> 
    </div>  
    <script>
        var ct = $('#generalContainer').html();
        $('#generalContainer').html('<div id="subContainer">'+ct+'</div>');
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T22:01:02.920

看看[**这个**](http://jsfiddle.net/ztPsE/1/)工作的 JSFiddle。

简而言之，这是您需要的代码：

```
$('#content').wrapAll('<div class="newdiv">Child in between</div>'); 
```

另外，看看之前发布的**[这个](https://stackoverflow.com/questions/7700140/how-can-i-insert-a-div-between-an-existing-parent-and-child)**问题。

# c++ - 如何从 C++ 为 libcurl 获取 NTLM/Kerberos 的 Windows 凭据？

> ID：11768154
> 
> 赞同：0
> 
> 时间：2012-08-01T21:55:06.077
> 
> 标签：c++, windows, libcurl

我有一个关于使用 libcurl 的相当基本的问题，我无法从谷歌搜索/stackoverflow 中找到答案。

我想使用 libcurl 对远程 Windows 站点的用户进行身份验证。为此，我需要将 Windows 凭据（域/用户/密码）传递给 libcurl。为此，如何从 Visual C++ 检索当前登录用户的凭据？目标是不必再次提示用户输入他们的 Windows 凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:56:16.830

如果可以的话，你不能这是一个安全漏洞，木马可以窃取用户的凭据。

通常对于身份验证系统，只保存密码的哈希（md5/sha1），而不是密码本身，所以即使一个人可以访问该哈希，他也不能窃取密码。因为他需要密码而不是哈希。我不知道Windows，但我相信它们也是如此。

# git - 使用单独的 git repos 管理 Magento 主题

> ID：11768155
> 
> 赞同：3
> 
> 时间：2012-08-01T21:55:08.090
> 
> 标签：git, magento

我的团队正在考虑将多个电子商务网站转移到一个 Magento 安装中。这有可能在一次安装中增长到数十个站点。因此，我们希望将每个单独的站点主题保留在其自己的 git 存储库中。主题的大小并不是真正的问题，但我们希望能够独立于其他主题开发和部署每个站点主题。

我对 magento 很陌生，但我的理解是主题文件存在于不同位置的至少两个目录中。我的第一个想法是将主题克隆到它自己的文件夹中，并将目录符号链接到正确的位置。有没有做这种事情的最佳实践或这样做的任何可能的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:01:56.130

看看 modman - [https://github.com/colinmollenhour/modman](https://github.com/colinmollenhour/modman)

# visual-studio-2010 - Visual Studio 的 Hg 插件在编辑器“责备”或“注释”中具有？

> ID：11768161
> 
> 赞同：4
> 
> 时间：2012-08-01T21:55:30.867
> 
> 标签：visual-studio-2010, plugins, mercurial, annotate, visualhg

我们在 Visual Studio 2010 中使用 Hg。我希望能够查看谁从编辑器中编辑了代码，而无需启动 VisualHg 或命令提示符。

有谁知道在编辑器边缘显示用户的插件？

甚至我使用 VisualHG 的注释功能也只显示更改集，然后您必须查找谁提交了该更改集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T18:29:33.537

VisualHg 确实显示了提交更改的用户。您可以`Annotate File`通过右键单击文档的选项卡或右键单击解决方案资源管理器中的文档来找到该功能。当您选择此选项时，您会看到 TortoiseHg Annotate 窗口，如下所示：

![注释截图](../Images/8fe7933b928f47a7f4cf800586ce7048.png)

如果您将鼠标悬停在右侧窗口中的一行源代码上，状态栏文本会更改以说明谁进行了更改、变更集的本地修订号、它是多久前提交的以及消息的第一行。您不能将鼠标悬停在行号或修订号装订线列上，鼠标需要悬停在实际源上才能更改状态文本。

这是 TortoiseHg 2.3.1 和 VisualHg 1.1.5。

# c++ - 为什么我的程序在 _fini 中花费了 85% 的 CPU 周期？

> ID：11768165
> 
> 赞同：3
> 
> 时间：2012-08-01T21:55:39.400
> 
> 标签：c++, gcc, destructor, oprofile

使用 oprofile 分析我的程序后，我有点惊讶。

配置文件显示我的程序在以下方面花费了 85% `_fini`：

> CPU：Intel Core/i7，速度 1199 MHz（估计） 计数 CPU_CLK_UNHALTED 事件（未停止时的时钟周期），单位掩码为 0x00（无单位掩码）计数 100000 个样本 % 图像名称符号名称 553519 85.7402 eddic _fini

其他符号看起来不错。

我的程序是用 GCC 4.7 编译的。

据我了解，该符号`_fini`是用于全局破坏的已弃用构造，因此我不明白为什么我的程序会在此符号上花费这么多时间。

这可能是由于 oprofile 或 GCC 的错误配置造成的吗？

我试图分析未优化的代码，但问题不存在。没有没有优化的符号。

有没有办法修复配置文件或避免花这么多时间`_fini`？

我不能粘贴我的粘贴，因为它很长，我没有隔离问题。

感谢您的任何想法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T23:23:57.980

没有看到有问题的代码真的很难指出问题出在哪里，但是 _fini 时间建议使用全局变量（或在程序期间也存在的静态函数变量）的析构函数。我建议-您检查所有全局+静态变量的类并查看它们的析构函数在做什么-注释掉程序中的功能，直到停止发生，以提示您在哪里花费时间-使用 gdb 或另一个调试器来检查 _fini 发生了什么。

# c# - C# 注册表 SetValue 抛出 UnauthorizedAccessException

> ID：11768172
> 
> 赞同：9
> 
> 时间：2012-08-01T21:56:06.700
> 
> 标签：c#, registry, registrykey, unauthorizedaccessexcepti

在您尝试用“快速 Google 搜索”来回答这个问题之前。我想指出我已经这样做了。这是这种情况，我有以下方法尝试修改注册表项值。我遇到的问题是，在执行时，**即使我已将密钥打开为 writeable** ，它也会引发 UnauthorizedAccessException 。我以管理员身份运行 Visual Studio，甚至尝试制作一个带有清单文件的小型 .exe，强制它以管理员身份运行，这将不走运地执行代码。密钥已经存在，它不会尝试进入 CreateKey 方法。这是代码块。

```
Path = "S-1-5-21-1644491937-1078145449-682003330-5490\Software\Microsoft\Windows\CurrentVersion\Policies\System"
Key = "DisableTaskMgr"
NewValue = 1

public OperationResult ModifyKey()
    {
        OperationResult result = new OperationResult();

        if (!Path.IsNullOrEmptyTrim())
        {
            if (!Key.IsNullOrEmptyTrim())
            {
                try
                {
                    var key = Microsoft.Win32.Registry.Users.OpenSubKey(Path, true);

                    if (key != null)
                    {
                        key.SetValue(Key, NewValue);

                        key.Close();
                    }
                    else
                    {
                        result = CreateKey();
                    }
                }
                catch (Exception ex)
                {
                    result.SetFail("Error accessing registry", ex);
                }
            }
            else
            {
                result.SetFail("Registry key was null");
            }
        }
        else
        {
            result.SetFail("Registry path was null");
        }

        return result;
    } 
```

我是否必须手动遍历注册表树，将每个 OpenSubKey 调用设置为可写？我也试过这个，仍然抛出同样的错误......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T22:21:47.053

在您的密钥的 var 中

```
var key = Microsoft.Win32.Registry.Users.OpenSubKey(Path, true); 
```

改成

```
var key = Microsoft.Win32.Registry.Users.OpenSubKey(Path, RegistryKeyPermissionCheck.ReadWriteSubTree); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T22:35:04.797

您是否尝试过设置访问规则和权限？

```
 string user = Environment.UserDomainName + "\\" + Environment.UserName;
 RegistryAccessRule rule = new RegistryAccessRule(user,
        RegistryRights.FullControl,
        AccessControlType.Allow);        
 RegistrySecurity security = new RegistrySecurity();
 security.AddAccessRule(rule);
 var key = Microsoft.Win32.Registry.Users.OpenSubKey(subKeyPath, RegistryKeyPermissionCheck.ReadWriteSubTree, RegistryRights.FullControl);
 key.SetAccessControl(security); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T22:06:04.727

我在您的代码中看到的一个可能问题是该`Path`变量被设置为一个不会转义`\`字符的字符串。怎么样：

```
Path = @"S-1-5-21-1644491937-1078145449-682003330-5490\Software\Microsoft\Windows\CurrentVersion\Policies\System"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T16:24:28.330

作为弄清楚发生了什么的最后努力，我创建了一个简单的服务来测试这个将作为本地系统帐户运行的代码。这是我能想到的尝试运行代码的最高权限。使用这些权限运行代码有效。

特别感谢**0_ *_* ___0**和**Charleh 也**指出了防病毒软件。我检查了日志，结果发现它正在尝试隔离我的更改。我想即使它也不会阻止系统用户进行这些更改。

特别感谢**Sorceri**帮助我研究了这么多。

总之，如果您有间歇性、极其奇怪的行为，请检查您的病毒扫描程序和权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-12T17:04:16.777

我最近遇到了同样的问题。所以我尝试了一些事情，而不是`key.SetValue(Key, NewValue)`简单地调用 create 函数解决了我的问题。那是;

```
Microsoft.Win32.RegistryKey key1 = Microsoft.Win32.Registry.Users.CreateSubKey(Path);
key1.SetValue(Key, NewValue); 
```

CreateSubKey 调用不会删除当前条目，但提供了无异常写入的能力。我希望这会有所帮助。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-03-10T17:07:34.373

只对 dword 设置授权。您必须打开注册表并在最后一个文件夹路径上单击它并设置授予，然后选择所有应用程序并检查总控制。我希望能帮助你。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-10-06T03:23:06.217

只是`Registry.SetValue(sub_key, key, value);`

例子：

```
Registry.SetValue(
            @"HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run",
            "MyApp",
            Application.ExecutablePath); 
```

# encryption - 这是什么类型的哈希（或加密）？

> ID：11768177
> 
> 赞同：0
> 
> 时间：2012-08-01T21:56:14.393
> 
> 标签：encryption, cryptography, hash

我正在对一个不幸的遗留应用程序进行逆向工程。我知道以下内容：

`username`=> 哈希函数（） =>`8BYUW6iFeL9mmSBW7xjzMw~~`

`password`=> 哈希函数（） =>`VszQfe5n0+CooePc7CS9kw~~`

散列的长度似乎总是 22 个字符。该系统是旧版 microsoft .net 应用程序。我有理由相信它们也是可以逆转的（但这可能不是真的）。

两个尾随波浪号让我觉得我应该能够识别这一点。我如何开始弄清楚使用什么类型的散列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T01:52:57.230

假设尾随的 '~' 字符是填充符（这不是通常的情况（通常是 '='）），用户名出来：

```
f0 16 14 5b a8 85 78 bf 66 99 20 56 ef 18 f3 33 
```

密码出来：

```
56 cc d0 7d ee 67 d3 e0 a8 a1 e3 dc ec 24 bd 93 
```

十六进制。这与其他海报的 128 位一致。这听起来像是 AES-128 加密或 MD5 哈希的输出。有了这么小的样本并且不知道来源是什么，这就是我们必须离开的地方。既然你说你认为它们可能是可逆的，那就指向 AES-128。没有更大的样本，也没有输入数据，这就是它所能做的一切。

我尝试对字符串“用户名”和“密码”进行 MD5 哈希处理，它们得出不同的值。如果它是用 AES 加密的，如果没有更多提示，我们就不走运了。

祝你好运，/鲍勃·布莱恩

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:13:18.063

如果“hashFunction”函数是遗留应用程序的一部分，您可以使用像 .net 反射器这样的反射工具来反转代码以查看函数在做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T22:15:21.040

只是一个疯狂的猜测

```
64^21  <  2^128  <=  64^22 
```

128 位哈希的 base-64 编码需要 22 个字符。

如果您将 64 替换为 57 到 68 之间的任何整数，上述参数也将起作用。我认为 Base-67 编码并不常见，但记住这一点并没有什么坏处。

您的样本似乎至少有 63 个字符（26 个大写，26 个小写，10 个数字，加上加号）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T00:52:02.890

这是一个有趣的值：

```
Fj83STvXE+6q57GVjIi9aQ== 
```

我只是碰巧知道它是 PI 到 37 个地方（乘以 1E37）

```
3141592653589793238462643383279502884 
```

并非所有 base64 值都经过散列或加密。如果不了解产生该值的过程，就不可能对随机的 128 位字符串做很多事情。

问候，/鲍勃·布莱恩

# android - 从子视图 Android 处理布局

> ID：11768181
> 
> 赞同：0
> 
> 时间：2012-08-01T21:56:27.030
> 
> 标签：android, android-layout

使其简短。

我正在开发一个安卓笔记程序。这是我想要做的：我有一个自定义类扩展视图，当我的程序启动（onCreate）时，我将此自定义视图（名为 View01）添加到我的主布局中。然后，当我双击当前视图（View01）时，我想添加另一个视图（到我的主布局或其他可能的布局）。我的代码是这样的：（这是 View01 的 onTouchEvent 函数的一部分）

```
public class NotePanel extends View {

private long startTime;
private long endTime;
private DrawPanel drawPanel;
private LinearLayout drawLayout;
final private int pressingTime = 600;
private Context applicationContext;

public NotePanel(Context applicationContext) {
    // TODO Auto-generated constructor stub
    super(applicationContext);
    //this.applicationContext = applicationContext;
    startTime=0;
    endTime=0;
    this.setBackgroundColor(Color.BLUE);
}

@Override
public boolean onTouchEvent(MotionEvent event){
    if(event.getActionMasked() == MotionEvent.ACTION_DOWN){
        startTime = System.currentTimeMillis(); 
        System.out.println("click");
    }

    if(event.getActionMasked() == MotionEvent.ACTION_UP){
        endTime = System.currentTimeMillis();
        System.out.println(endTime-startTime);
        if (endTime-startTime >= pressingTime){

            drawPanel = new DrawPanel(this.applicationContext);
            //drawPanel.setVisibility(GONE);

            drawPanel.setBackgroundColor(Color.RED);
            //drawLayout = new LinearLayout(applicationContext);
            drawLayout.addView(drawPanel);

        }
    }

    return true;
} 
```

问题是我什至无法对 View01 中的 drawLayout 做任何事情，我是 Android 开发的新手，所以我在这里感到困惑。只有扩展“活动”的类才能处理布局吗？

非常感谢大家的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:19:52.087

我认为您想要做的是：

以免说我有两个类：`View01`扩展`view`和`View02`扩展`view`。因此，要将视图添加到布局中，我会这样做：

```
public class NotePanel extends ViewGroup {

private long startTime;
private long endTime;
private DrawPanel drawPanel;
//private LinearLayout drawLayout;
final private int pressingTime = 600;

public NotePanel(Context applicationContext) {
    super(applicationContext);
    startTime=0;
    endTime=0;
    this.setBackgroundColor(Color.BLUE);
    drawPanel = new DrawPanel(applicationContext);
    this.addView(drawPanel);
    //drawLayout = new LinearLayout(applicationContext);
    //drawLayout.addView(drawPanel);
}
public NotePanel(Context applicationContext, AttributeSet attrs){
    super(applicationContext);
    startTime=0;
    endTime=0;
    this.setBackgroundColor(Color.YELLOW);
    drawPanel = new DrawPanel(applicationContext);
    this.addView(drawPanel);
}

@Override 
protected void onLayout(boolean changed, int l, int t, int r,int b){

}

@Override
public boolean onTouchEvent(MotionEvent event){
    if(event.getActionMasked() == MotionEvent.ACTION_DOWN){
        startTime = System.currentTimeMillis(); 
        System.out.println("click");
    }

    if(event.getActionMasked() == MotionEvent.ACTION_UP){
        endTime = System.currentTimeMillis();
        System.out.println(endTime-startTime);
        if (endTime-startTime >= pressingTime){
            drawPanel.setVisibility(VISIBLE);
            drawPanel.setBackgroundColor(Color.GREEN);              
        }
    }

    return true;
} 
```

我希望这会有所帮助。另外我假设您知道如何添加`view01`，如果不告诉我，我可以举个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:11:33.927

尝试将 drawLayout 设置为全局变量并将其设置为 onCreate，而不是 onTouch。应该能够从 onTouch 引用它，并且它是全局的。

每次触摸也会获得许多 onTouch 事件。您可能必须检查手指何时抬起，然后添加...这样您就不会添加一堆并在某个地方遇到另一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:12:30.967

最简洁的方法是在自定义视图中定义自己的事件类型和事件侦听器接口。当检测到适当的用户手势时，视图可以通知任何已注册的事件监听器。然后在您的活动中实现一个自定义事件侦听器，它可以通过更新容器布局的内容来响应事件。

# iphone - 按钮中的 presentPopoverFromRect 超出范围

> ID：11768185
> 
> 赞同：2
> 
> 时间：2012-08-01T21:56:46.170
> 
> 标签：iphone, objective-c, ios, ipad, uipopovercontroller

所以我使用[WEPopover](https://github.com/werner77/WEPopover/)来显示一个自定义视图控制器弹出窗口。我有一个 UIView，其中有另一个 UIView，称为 containerView。在这个 containerView 里面，我有一个 UIButton。这就是我想展示我的popover的地方。所以这就是我所做的：

```
 [self.popoverDialog presentPopoverFromRect:sender.frame inView:self.containerView permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

问题是该按钮显示了箭头和所有内容，但弹出框超出了 self.containerView 边界。如何使弹出框显示在 containerView 范围内？

**编辑：**

一张图值千言万语，所以这里是：浅灰色的是我上面提到的containerView。理论上，弹出框应显示在不会超出的浅灰色范围内。

![在此处输入图像描述](../Images/8bd1380f83df0fb6b76557e9b3a19d9b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:02:21.817

对于包含在弹出框内的视图，转到它的视图控制器并设置它的属性 contentSizeForViewInPopover。在这里您可以设置大小，使其适合您的 containerView 的边界。

OP 希望定位弹出框，使其仅显示在他的容器视图中。我在 WEPopoverController.m 文件中找到了这段代码

```
- (void)repositionPopoverFromRect:(CGRect)rect
                       inView:(UIView *)theView
     permittedArrowDirections:(UIPopoverArrowDirection)arrowDirections {

CGRect displayArea = [self displayAreaForView:theView];
WEPopoverContainerView *containerView = (WEPopoverContainerView *)self.view;
[containerView updatePositionWithAnchorRect:rect
                                displayArea:displayArea
                   permittedArrowDirections:arrowDirections];

popoverArrowDirection = containerView.arrowDirection;
containerView.frame = [theView convertRect:containerView.frame toView:backgroundView]; 
```

}

您可能会调用此方法，它可能会重新定位您的弹出框，以便它现在位于您的容器视图中。

# scheme - 消息传递方案

> ID：11768193
> 
> 赞同：-1
> 
> 时间：2012-08-01T21:57:13.567
> 
> 标签：scheme, message-passing

谁能简单地向我解释一下消息传递是如何在方案中实现的？我认为我对消息传递的整个概念不太了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:05:37.117

看看 SICP。

[http://mitpress.mit.edu/sicp/full-text/book/book-ZH-17.html#%_sec_2.4.1](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-17.html#%_sec_2.4.1)

[http://www.michaelharrison.ws/weblog/?p=50](http://www.michaelharrison.ws/weblog/?p=50)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-13T12:37:25.773

# 闭包上下文中的消息传递

下面的示例定义了一个实现简单计算器的闭包。该函数`make-calculator`类似于面向对象的语言调用构造函数。区别在于：`make-calculator`返回一个函数，而构造函数返回对象值。在面向对象的语言中，对象值是一等值。Scheme 没有这样的值。对象第一类值提供访问对象成员变量和对象方法的功能。在 Scheme 中，这个功能必须通过调度函数的定义来模拟。`make-calculator`返回这样的函数。`make-calculator`定义的主体

*   两个变量`a`和`b`（成员变量）
*   两个变异函数`set-a!`和`set-b!`（访问器）
*   四个评估函数`addition`, `subtraction`,`multiplication`和`division`(方法)

上面的定义是闭包的本地定义`make-calculator`。在面向对象的语言中，它们被称为私有的。分派函数使函数公开并保持变量私有。这是可行的，因为调度函数可以访问`make-calculator`闭包的本地范围。dispatch 函数接受消息并返回匹配的函数。这会将本地函数暴露给调度函数的调用者。

```
(define (make-calculator)

  (define a)
  (define b)

  (define (set-a! value)
    (set! a value))

  (define (set-b! value)
    (set! b value))

  (define (addition)
    (+ a b))

  (define (subtraction)
    (- a b))

  (define (multiplication)
    (* a b))

  (define (division)
    (/ a b))

  (lambda (message)
    (case message
      ((set-a!) set-a!)
      ((set-b!) set-b!)
      ((addition) addition)
      ((subtraction) subtraction)
      ((multiplication) multiplication)
      ((division) division)))) 
```

首先必须调用构造函数来创建一个“对象”。`calc`是 dispatch 函数，它接受不同的消息，这些消息只是符号。

```
(define calc (make-calculator)) 
```

发送消息意味着使用符号参数调用调度函数。下面将消息发送`set-a!`到`calc`，它返回本地函数的值`set-a!`。在这种情况下，消息的名称和本地函数的名称是相同的。这有助于避免混淆，但这不是必需的。

```
(calc 'set-a!)     ;; => #<procedure set-a!> 
```

因为`calc`返回一个函数，所以需要一个额外的应用程序来调用访问器。以下设置`a`为 3 和`b`5。

```
((calc 'set-a!) 3)
((calc 'set-b!) 5) 
```

现在我们可以计算：

```
((calc 'addition))        ;; => 8
((calc 'subtraction))     ;; => -2
((calc 'multiplication))  ;; => 15
((calc 'division))        ;; => 3/15 
```

代码在[Chez Scheme](https://www.scheme.com/)中以这种方式工作。

# c# - `ToArray` 和 `ToList` 等扩展方法是按引用还是按值操作？

> ID：11768194
> 
> 赞同：3
> 
> 时间：2012-08-01T21:57:14.330
> 
> 标签：c#

假设我的课堂上有一本私人词典或一个列表。我想返回一个只读枚举器，以便其他人可以遍历列表，但无权修改项目。

我不想围绕原始创建包装类，而是希望返回原始项目/元素的副本。会`original.ToList<Type>().GetEnumerator()`返回一个包含原始项目引用的列表，还是一个包含原始项目副本的列表？

我应该注意我还需要索引（即通过索引访问项目，仍然无法修改它们）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T21:59:25.853

这些方法创建集合的新实例，但项目引用仍将指向旧项目。换句话说，消费者无法更新您的内部集合，但他们可以自己更新项目。

假设您对修改项目进行了适当的封装，这种方法将起作用，尽管对于较大的列表它有点占用内存，因为您需要为每个新项目引用分配内存。这就是为什么通常首选返回包装器的原因之一：它减少了包装器类的单个实例所需的额外内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T22:09:12.993

`ToList()`两者`Torray()`都*按价值*工作。他们只是将值从原始容器复制`IEnumerable<>`到新容器。

但是被复制的值很可能是引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T22:04:27.907

直接调用

```
original.ToList<MyType>() 
```

将创建一个“浅”副本：列表将是新的，但对象将是相同的。

如果您更喜欢“深”副本，可以使用 LINQ 复制您的项目，然后再将它们添加到列表中：

```
original.Select(item => new MyType(item)).ToList() 
```

假设你的类有一个构造函数，它接受一个自身的实例并生成一个副本，类似于 C++ 的复制构造函数，这将生成你的对象的副本列表。

# r - 有没有更短的方法从字符串中提取日期？

> ID：11768201
> 
> 赞同：9
> 
> 时间：2012-08-01T21:57:57.560
> 
> 标签：r

我编写了代码来从给定的字符串中提取日期。给定

```
 > "Date: 2012-07-29, 12:59AM PDT" 
```

它提取

```
 > "2012-07-29" 
```

问题是我的代码看起来很长而且阅读起来很麻烦。我想知道这样做是否是一种更优雅的方式。

```
 raw_date = "Date: 2012-07-29, 12:59AM PDT"

  #extract the string from raw date
  index = regexpr("[0-9]{4}-[0-9]{2}-[0-9]{2}", raw_date) #returns 'start' and 'end' to be used in substring

  start = index #start represents the character position 's'. start+1 represents '='
  end = attr(index, "match.length")+start-1
  date = substr(raw_date,start,end); date 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T22:03:55.693

您可以使用`strptime()`解析时间对象：

```
R> strptime("Date: 2012-07-29, 11:59AM PDT", "Date: %Y-%m-%d, %I:%M%p", tz="PDT")
[1] "2012-07-29 11:59:00 PDT"
R> 
```

请注意，我移动了您的输入字符串，因为我不确定 12:59AM 是否存在......只是为了证明这一点，移动了三个小时（以秒表示，基本单位）：

```
R> strptime("Date: 2012-07-29, 11:59AM PDT", 
+>          "Date: %Y-%m-%d, %I:%M%p", tz="PDT") + 60*60*3
[1] "2012-07-29 14:59:00 PDT"
R> 
```

哦，如果你只想要日期，当然更简单：

```
R> as.Date(strptime("Date: 2012-07-29, 11:59AM PDT", "Date: %Y-%m-%d"))
[1] "2012-07-29"
R> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T22:05:32.847

类似这样的东西应该可以工作：

```
x <- "Date: 2012-07-29, 12:59AM PDT"
as.Date(substr(x, 7, 16), format="%Y-%m-%d") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T22:10:40.433

与（几乎）一样，您在这里有多种选择。尽管它们都没有真正让您从习惯一些基本的正则表达式语法（或其亲密朋友）中解放出来。

```
raw_date <- "Date: 2012-07-29, 12:59AM PDT" 
```

## 备选方案 1

```
> gsub(",", "", unlist(strsplit(raw_date, split=" "))[2])
[1] "2012-07-29" 
```

## 备选方案 2

```
> temp <- gsub(".*: (?=\\d?)", "", raw_date, perl=TRUE)
> out <- gsub("(?<=\\d),.*", "", temp, perl=TRUE)
> out
[1] "2012-07-29" 
```

## 备选方案 3

```
> require("stringr")
> str_extract(raw_date, "\\d{4}-\\d{2}-\\d{2}")
[1] "2012-07-29" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T22:05:46.283

具有反向引用的正则表达式有效：

```
> sub("^.+([0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]).+$","\\1","Date: 2012-07-29, 12:59AM PDT")
[1] "2012-07-29" 
```

但是@Dirk 是正确的，将其解析为日期是正确的方法。

# matlab - How to index a matrix into segments

> ID：11768210
> 
> 赞同：0
> 
> 时间：2012-08-01T21:58:55.263
> 
> 标签：matlab, matrix, indexing, segment

I have a matrix that is 1 column with 5448 rows with values in each. In reality these 5448 values are divided into 12 taps (being 454 values per tap). I want to index the closest 10% of values closest to tap boundaries (10% of a tap is 45.4 values so lets say 45 values). For the first tap, i will only need the last 10%, and for the last tap (tap 12) i will only need the first 10%. Every other tap (2-11) i will need the beginning 10% and the last 10%. So essentially the first 45 values and the last 45 values of each tap.

currently I'm extracting the value segments like this:

```
A1 = interpolate((817/2+.5):(908/2),:);
B1 = interpolate((909/2+.5):(1000/2),:); 
```

this example includes the last 10% values of tap 1 and the first 10% values from tap 2\. If i only had a few segments to pull this would be okay, but when i have matrices that go up to around 40,000 values, this method gets a little rediculous.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:20:01.497

I'd make a function to get these values, to avoid making silly mistakes (and to make it easier if you change your tap size or percentage):

```
function [A, B] = GetTapBoundaries( arr, tapNum, tapSize )
    sliceSize = floor(tapSize * 0.1);
    boundaryIdx = (tapNum-1) * tapSize;  % last element in previous tap

    leftIdx = boundaryIdx - sliceSize + 1;
    rightIdx = boundaryIdx + sliceSize;

    if leftIdx >= 1 && boundaryIdx <= size(arr,1)
        A = arr( leftIdx:boundaryIdx, : );
    else
        A = [];
    end

    if boundaryIdx >= 0 && rightIdx <= size(arr, 1)
        B = arr( boundaryIdx+1:rightIdx, : );
    else
        B = [];
    end
end 
```

Now call like this:

```
tapSize = 454;
[A1, B1] = GetTapBoundaries( interpolated, 1, tapSize );
[A2, B2] = GetTapBoundaries( interpolated, 2, tapSize );
% etc ...
[A12, B12] = GetTapBoundaries( interpolated, 12, tapSize ); 
```

Or you could use cell arrays:

```
tapSize = 454;
numTaps = floor( size(interpolated,1) / tapSize );
A = cell(numTaps,1);
B = cell(numTaps,1);
for tap = 1:numTaps
    [Ax, Bx] = GetTapBoundaries( interpolated, tap, tapSize );
    A(tap) = Ax;
    B(tap) = Bx;
end 
```

Apologies for any syntactic or logical errors... I just rammed this code into my browser without checking it in MATLAB.

# python - Python：从 FTP 服务器下载文件

> ID：11768214
> 
> 赞同：79
> 
> 时间：2012-08-01T21:59:40.273
> 
> 标签：python, download, ftp, python-requests

我正在尝试下载一些公共数据文件。我截屏以获取文件的链接，它们看起来都像这样：

```
ftp://ftp.cdc.gov/pub/Health_Statistics/NCHS/nhanes/2001-2002/L28POC_B.xpt 
```

[我在请求库网站](http://docs.python-requests.org/en/latest/)上找不到任何文档。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-08-01T22:22:07.270

`requests`库不支持 ftp 链接。

要从 FTP 服务器下载文件，您可以：

```
import urllib 

urllib.urlretrieve('ftp://server/path/to/file', 'file')
# if you need to pass credentials:
#   urllib.urlretrieve('ftp://username:password@server/path/to/file', 'file') 
```

或者：

```
import shutil
import urllib2
from contextlib import closing

with closing(urllib2.urlopen('ftp://server/path/to/file')) as r:
    with open('file', 'wb') as f:
        shutil.copyfileobj(r, f) 
```

Python3：

```
import shutil
import urllib.request as request
from contextlib import closing

with closing(request.urlopen('ftp://server/path/to/file')) as r:
    with open('file', 'wb') as f:
        shutil.copyfileobj(r, f) 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-09-14T12:12:19.837

你可以试试这个

```
import ftplib

path = 'pub/Health_Statistics/NCHS/nhanes/2001-2002/'
filename = 'L28POC_B.xpt'

ftp = ftplib.FTP("Server IP") 
ftp.login("UserName", "Password") 
ftp.cwd(path)
ftp.retrbinary("RETR " + filename, open(filename, 'wb').write)
ftp.quit() 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-01-10T09:10:23.897

尝试使用 python 的 wget 库。[您可以在此处](https://pypi.python.org/pypi/wget)找到它的文档。

```
import wget
link = 'ftp://example.com/foo.txt'
wget.download(link) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-01T22:13:20.010

使用[urllib2](http://docs.python.org/library/urllib2.html)。有关更多详细信息，请查看[doc.python.org 中的此示例](http://docs.python.org/release/2.6/howto/urllib2.html)：

这是教程中的一个片段，可能会有所帮助

```
import urllib2

req = urllib2.Request('ftp://example.com')
response = urllib2.urlopen(req)
the_page = response.read() 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-10-01T18:11:12.967

```
 import os
    import ftplib
    from contextlib import closing

    with closing(ftplib.FTP()) as ftp:
        try:
            ftp.connect(host, port, 30*5) #5 mins timeout
            ftp.login(login, passwd)
            ftp.set_pasv(True)
            with open(local_filename, 'w+b') as f:
                res = ftp.retrbinary('RETR %s' % orig_filename, f.write)

                if not res.startswith('226 Transfer complete'):
                    print('Downloaded of file {0} is not compile.'.format(orig_filename))
                    os.remove(local_filename)
                    return None

            return local_filename

        except:
                print('Error during download from FTP') 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-07T15:30:23.237

正如一些人所指出的，请求不支持 FTP，但 Python 有其他库支持。如果你想继续使用 requests 库，有一个[requests-ftp](https://pypi.python.org/pypi/requests-ftp)包，它为请求添加了 FTP 功能。我已经使用了这个库，它确实有效。不过，文档中充满了关于代码质量的警告。从 0.2.0 开始，文档说“这个库在大约 4 小时的总工作中被牛仔装在一起，没有测试，并且依赖于一些丑陋的黑客”。

```
import requests, requests_ftp
requests_ftp.monkeypatch_session()
response = requests.get('ftp://example.com/foo.txt') 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-03-25T13:08:48.343

如果您想利用最新 Python 版本的异步功能，您可以使用[aioftp](https://aioftp.readthedocs.io/index.html)（与更流行的 aiohttp 库来自同一系列的库和开发人员）。这是从他们的[客户端教程](https://aioftp.readthedocs.io/client_tutorial.html)中获取的代码示例：

```
client = aioftp.Client()
await client.connect("ftp.server.com")
await client.login("user", "pass")
await client.download("tmp/test.py", "foo.py", write_into=True) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-01T22:02:18.757

`urllib2.urlopen`处理 ftp 链接。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-15T03:50:38.670

urlretrieve 对我不起作用，官方[文件](https://docs.python.org/3/library/urllib.request.html#urllib.request.urlretrieve)说它们将来可能会被弃用。

```
import shutil 
from urllib.request import URLopener
opener = URLopener()
url = 'ftp://ftp_domain/path/to/the/file'
store_path = 'path//to//your//local//storage'
with opener.open(url) as remote_file, open(store_path, 'wb') as local_file:
    shutil.copyfileobj(remote_file, local_file) 
```

# firefox - Firefox Websocket 安全问题

> ID：11768221
> 
> 赞同：59
> 
> 时间：2012-08-01T22:00:17.047
> 
> 标签：firefox, websocket

我们在 Linode 盒子上设置了端口 8080 上的 websocket 服务器。Chrome 和 Opera 运行良好。然而，Firefox 抱怨该操作不安全。

“操作不安全：代码 18”

如果我尝试在页面加载之前在 Web 控制台中创建一个新的 WebSocket 对象，那么一切都很好。但是，在页面加载后有些东西很糟糕，然后我就无法再创建对象了。请参阅随附的屏幕截图。![在此处输入图像描述](../Images/e0cfd5982f1dabc2c88e32a31b2e4449.png)

我不知道什么操作是不安全的，甚至不知道如何诊断。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-20T18:13:39.473

正如您在另一个答案中指出的那样，默认情况下，Firefox 不允许使用 `https://`to 。`ws://`

去火狐的`about:config`和切换`network.websocket.allowInsecureFromHTTPS`将摆脱`SecurityError`.

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-08-02T02:11:07.840

我解决了这个问题。应用程序本身在 SSL 下，但正在访问的 websocket 不是。Chrome 和 Opera 不在乎，但 Firefox 不在乎。根据：

[https://bugzilla.mozilla.org/show_bug.cgi?id=303952](https://bugzilla.mozilla.org/show_bug.cgi?id=303952)

这是已知的，不被视为错误。Mozilla 的回应： wontfix

解决方案，将 websocket 服务器放在 SSL 下并使用 wss://

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-12T02:42:54.030

有同样的问题，并试图通过更改其中不起作用来`network.websocket.allowInsecureFromHTTPS`解决`about:config`。

最终找到这篇文章 =>[未处理的拒绝（SecurityError）：操作不安全。在一个新的 create-react-app 项目上](https://stackoverflow.com/questions/58470055/unhandled-rejection-securityerror-the-operation-is-insecure-on-a-fresh-creat)

在 index.js 中更改它最终为我工作

```
serviceWorker.register();
//serviceWorker.unregister(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T22:34:11.473

这是基于有限信息的预感，我可能应该将其放入评论中，但我还没有足够的声誉点来做到这一点。

查看您的日志，似乎从收到`[object Websocket]`(time 17:46:36.683) 到您收到`The connection to ws://.....`(time 17:47:00:952) 错误消息已经过去了 24 秒。长时间的延迟让我相信服务器可能正在超时并关闭 websocket 连接。查看[此答案](https://stackoverflow.com/questions/9056159/websocket-closing-connection-automatically)以获取潜在的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-02T12:52:03.597

在 Firefox 中打开“about:config”网址。搜索 allowInsecureFromHTTPS 并将其设置为 true

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-04T23:27:33.487

除了安全的 ssl 上下文和跨域策略之外，分配一些端口也可以触发错误。

什么是 Firefox 的有效 http 端口？我不确切知道，但必须在`1500`and之间`64000`，否则控制台将显示：

```
SecurityError: The operation is insecure. 
```

http链接会说：

```
This address is restricted

This address uses a network port which is normally used for purposes other than Web browsing.
Firefox has canceled the request for your protection. 
```

[![在此处输入图像描述](../Images/37dd9328b45c1f9e048e2ea95028912e.png)](https://i.stack.imgur.com/19Jlu.png)

# c++ - OPENCV C 和 C++ API 结果不同（边界插值差异）

> ID：11768223
> 
> 赞同：6
> 
> 时间：2012-08-01T22:00:18.327
> 
> 标签：c++, image, image-processing, opencv

我已经执行了关闭形态学操作，并且使用 C 和 C++ API (OpenCV 2.4.2) 得到了不同的结果

输入：

[![输入](../Images/c27a10953f2cd27c63791ca48116a9d5.png)](https://i.stack.imgur.com/WX7Mt.png)

**使用 OpenCV 'C'：**

```
//Set ROI
//Perform Gaussian smoothing
//Perform Canny edge analysis
cvMorphologyEx( src, dst, temp, Mat(), MORPH_CLOSE, 5 ); 
```

结果：http: [//i47.tinypic.com/33e0yfb.png](http://i47.tinypic.com/33e0yfb.png)

**使用 Opencv C++**

```
//Set ROI 
//Perform Gaussian smoothing 
//Perform Canny edge analysis
cv::morphologyEx( src, dst, cv::MORPH_CLOSE, cv::Mat(), cv::Point(-1,-1), 5 ); 
```

结果：http: [//i50.tinypic.com/i5vxjo.png](http://i50.tinypic.com/i5vxjo.png)

如您所见，C++ API 生成带有白色/灰色边框颜色的输出。因此，这两个 API 的结果是不同的。

我用 C++ API 尝试了不同的borderType，但它总是产生相同的结果。

如何在 C++ 中获得与 C API 相同的输出？我需要它，因为它会影响检测到的轮廓

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T00:02:53.000

谢谢大家回答这个问题。我发现了我的错误。我将在下面简要描述它。希望它可以帮助其他人面临这个问题。

1) 我在 ROI 图像上执行了 C 和 C++ 命令。显然，OpenCV 'C' 和 'C++' API 处理 ROI 的方式是不同的。

2) 在“C”中，ROI 被视为完全不同的图像。因此，当您执行 cvSmooth、cvDilate 等需要提及边界像素外推方法的函数时，“C”API 不会针对超出最左/右/顶部/底部像素的像素返回原始图像。它实际上是根据您提到的方法对像素值进行插值。

3）但在'C++'中，我发现它总是引用原始图像的像素超出左/右/顶部/底部最像素。因此，如果您的 ROI 周围的原始图像中有像素，则提到的边界像素外推方法不会影响您的输出。

我认为它将顺序像素外推方法应用于原始图像而不是 ROI，这与“C”API 不同。我不知道这是否是一个错误；我还没有完全阅读 OpenCV 2.4.2 C++ API 文档。（如果我错了请纠正我）

为了获得我的支持，我在下面发布了输入/输出图像：

'C' 和 C++ API 的输出：

输入：

[![输入](../Images/0073af577c7646953a4624c54d72956f.png)](https://i.stack.imgur.com/hwKg9.png) <--- 输入

**OpenCV 'C' API**：

```
IplImage *src = cvLoadImage("input.png", 0);
cvSetImageROI( src, cvRect(33,19,250,110)); 
cvSaveImage( "before_gauss.png", src );
cvSmooth( src, src, CV_GAUSSIAN );  
cvSaveImage("after_gauss.png", src);
IplConvKernel *element = cvCreateStructuringElementEx(3,3,1,1,CV_SHAPE_RECT);
cvCanny( src, src, 140, 40 );
cvSaveImage("after_canny.png", src);
cvDilate( src, src, element, 5);
cvSaveImage("dilate.png", src); 
```

输出：

[![before_gauss](../Images/904b9413f854ea4fff20dcf42220416d.png)](https://i.stack.imgur.com/Qhs72.png)<-- before_gauss

[![after_gauss](../Images/d1777dd07b0a010e2522a6b61979d6b7.png)](https://i.stack.imgur.com/qFvV3.png) <--- after_gauss

[![after_canny](../Images/5c3568934e4f5baef553c0b4250f0d91.png)](https://i.stack.imgur.com/ahJO7.png) <--- after_canny

[![扩张](../Images/8aeff3c97089c13e159891452761f2c2.png)](https://i.stack.imgur.com/XixhA.png) <--- 扩张

**OpenCV 'C++' API**：

```
cv::Mat src = cv::imread("input.png", 0);
cv::Mat src_ROI = src( cv::Rect(33,19,250,110));
cv::imwrite( "before_gauss.png", src_ROI );
cv::GaussianBlur( src_ROI, src_ROI, cv::Size(3,3),0 );
cv::imwrite( "after_gauss.png", src_ROI ); 
cv::Mat element = cv::getStructuringElement( cv::MORPH_RECT, cv::Size(3, 3), cv::Point(1,1));
cv::Canny( src_ROI, src_ROI, 140, 40);
cv::imwrite( "after_canny.png", src_ROI );
cv::dilate( src_ROI, src_ROI, element, cv::Point(1,1), 5);
cv::imwrite( "dilate.png", src_ROI ); 
```

输出：

[![before_gauss](../Images/904b9413f854ea4fff20dcf42220416d.png)](https://i.stack.imgur.com/Qhs72.png)<-- before_gauss

[![after_gauss](../Images/4e773c67f175f25bd41c00cd5cddb4b1.png)](https://i.stack.imgur.com/Onvpv.png)

**^^^^^ after_gauss**（注意：边框不再完全是黑色的，它们是灰色的）

[![after_canny](../Images/5a2083fe84b922a24a88790d2f8ec51f.png)](https://i.stack.imgur.com/6POZf.png)

**^^^^^** after_canny

 **[![扩张](../Images/94c9e2ae250165962f40269f07ae3008.png)](https://i.stack.imgur.com/kLJxI.png)

^^^^^**扩张**

解决方案：

创建单独的 ROI 副本并将其用于进一步分析；

```
src_ROI.copyTo( new_src_ROI ); 
```

使用 new_src_ROI 进行进一步分析。如果有人有更好的解决方案，请在下面发布

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:03:37.670

C 和 C++ 之间的默认值不一样——尤其是结构元素。在 C 中：默认的结构元素是：

`cvCreateStructuringElementEx(3, 3, 1, 1, CV_SHAPE_RECT)`

而在 C++ 中，默认的结构元素是：

`getStructuringElement(MORPH_RECT, Size(1+iterations*2,1+iterations*2));`

如果您想要相同的结果，您应该指定所有字段（包括锚点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T20:14:01.737

从 OpenCV v2.4.2 文档中查看此**[示例代码。](http://docs.opencv.org/2.4.2/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html#code)**您可能还想检查**[此代码](http://docs.opencv.org/2.4.2/doc/tutorials/imgproc/imgtrans/canny_detector/canny_detector.html#code)**以使用 Canny 边缘检测器。这些有望帮助您找出错误:)

另请注意，形态闭合是幂等运算符，因此可以多次应用它而不会改变初始应用之外的结果。**

# jquery - jQuery选择匹配类和属性的元素？

> ID：11768224
> 
> 赞同：3
> 
> 时间：2012-08-01T22:00:19.260
> 
> 标签：jquery

我目前正在选择类 .follow-container 的所有元素，这是代码：

```
$('.follow-container').html('it's this one'); 
```

我如何只选择具有类和属性的元素`onmousedown="alert()"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:01:09.563

```
$('.follow-container[number="3"]') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T22:02:46.230

只是提一下，但您应该真正使用[数据属性](http://ejohn.org/blog/html-5-data-attributes/)而不是不受支持的`number` 属性。

相反呢`data-number="3"`？

然后，您可以使用以下方法选择它：

```
$('.follow-container[data-number="3"]'); 
```

如果您希望使用您的属性，您可以使用：

```
$('.follow-container[number="3"]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:16:38.027

这是片段：

```
 $('.follow-container').each(function(idx, ele)
            {
                if($(ele).attr('onmousedown') == 'alert()')
                {
                    // do stuff to $(ele)
                    // $(ele) is the element you want!
                }
            }); 
```

# java - java API中可用的最佳非对称加密算法？

> ID：11768227
> 
> 赞同：2
> 
> 时间：2012-08-01T22:00:46.070
> 
> 标签：java, rsa, encryption-asymmetric

我正在关注这篇关于[加密/解密](http://www.informit.com/articles/article.aspx?p=170967&seqNum=4)的文章。目前我正在使用 RSA 算法分别使用私钥和公钥进行加密和解密。我不确定 RSA 是否适合非对称加密。

你们能否分享一下 RSA 是否最好的想法。如果 RSA 不是最好的，那么请向我推荐其他可以通过 java API 使用的算法名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:03:01.777

如果它对您的银行来说足够好，那么它（可能）对于您的目的来说已经足够好了。它仍然是安全的（给定正确的实现和足够大的密钥）。很难选择“最佳”算法，但 RSA 无疑是一种值得信赖的安全算法。

# user-interface - 从用户输入扫描整数时使用 char sentinel

> ID：11768229
> 
> 赞同：0
> 
> 时间：2012-08-01T22:00:59.783
> 
> 标签：user-interface, user-input

我有一个菜单驱动程序，其中提示用户输入尽可能多的整数，以构建二叉搜索树——我刚刚开始，一旦他们点击“Q”，就无法阅读他们的整数

```
 switch(inputOption){
        case 1:
            System.out.println("You've selected to create a new binary tree." + "\n");
            Scanner scan = new Scanner(System.in);
            String again;
            String tempInput;
            Boolean repeat = true;
            try{
                System.out.println("Please enter as many integers as you'd like, hit 'Q' when you are finished." + "\n");
                do{

                    tempInput = scan.next();
                    if(tempInput != "Q"){
                        integerInput = Integer.parseInt(tempInput);
                        repeat = true;
                    }
                    else
                        repeat = false;

                }while(repeat);
            }catch(InputMismatchException e){} 
```

关于如何让它识别“Q”的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:06:55.630

利用

```
if(!tempInput.equals("Q")) 
```

而不是

```
if(tempInput != "Q") 
```

Java 字符串不适用于比较运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:06:58.893

尝试添加 (|| "q") 可能会有所帮助。虽然你没有提供太多信息。例如，您是否使用调试器并分析了 tempInput 的实际值以确保它实际上是 "Q" ？如果是这样，那么可以尝试转换为字符，或修剪它可能包含的任何额外的空格或特殊字符。

更多信息会更好:-D

# ruby - 在包含 .each_line 的 ruby 循环中前进行号

> ID：11768232
> 
> 赞同：1
> 
> 时间：2012-08-01T22:01:19.053
> 
> 标签：ruby, loops, iteration

这可能是一个更一般的编程问题，但我想知道 ruby​​ 解决这个问题的最佳实践是什么。我想解析一个具有如下结构的文件：

```
toplevel blah blah 0
  attr0: foo
  attr1: bar
  nextlevel something 0
    child0: baz
    child1: boz
      var1: blah    
  nextlevel something 1
    child0: faz
      abc: yes
    child1: foz 
```

我考虑过使用 split 并解析出块，或者可能迭代文件，`.each_line`然后以某种方式（我不知道如何）进行嵌套迭代

我想，嵌套线看起来像这样：

```
input.each_line do |line|
  #parse attributes 
  if line =~ /nextlevel:\s+(\d)/ then
     #now advance the line count somehow and continue parsing in here
  end 
```

PS 抱歉，如果示例中的名称有点混乱，但我试图想出一个简化的 MWE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:06:17.597

这是您要提取的排序结构吗？

```
def parse(inp, level)
    until inp.eof?
        line = inp.gets
        if line =~ /nextlevel:\s+(\d)/
            parse(inp, $1.to_i)
        else
            puts "got line: '#{line.strip}' at level #{level}"
        end
    end
end

irb(main):070:0> parse(input, -1)
got line: 'toplevel: 0' at level -1
got line: 'attr0: foo' at level -1
got line: 'attr1: bar' at level -1
got line: 'child0: baz' at level 0
got line: 'child1: boz' at level 0
got line: 'child0: faz' at level 1
got line: 'child1: foz' at level 1
=> nil 
```

这使用递归方法来跟踪使用堆栈的深度，但使用变量和迭代方法同样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:17:20.653

看起来像 YAML 格式... ruby​​ 有一个模块可以为您解析[http://corelib.rubyonrails.org/classes/YAML.html](http://corelib.rubyonrails.org/classes/YAML.html)

# javascript - 即使没有执行移动，也会触发 vmousemove

> ID：11768234
> 
> 赞同：0
> 
> 时间：2012-08-01T22:01:21.250
> 
> 标签：javascript, jquery, ipad, jquery-mobile

在 iPad 上，`vmousemove`即使没有执行任何移动，也会触发该事件。为什么？

重现步骤：

1.  打开[http://jsfiddle.net/dcbV7/](http://jsfiddle.net/dcbV7/)
2.  点击 A div 然后 B。只点击它们，但速度很快

结果：你看到`vmousemove`事件被触发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:05:12.330

`vmousemove`模拟鼠标的移动。就好像您单击 A div，将鼠标移到 B，然后单击它。毕竟，没有其他方法可以将鼠标从一个移到另一个。

如果您在带有鼠标的设备上尝试此操作，您会注意到`vmousemove`每次实际移动鼠标时都会触发该操作。他们对无鼠标环境的最佳启发是在短时间内触摸靠近的两个点类似于用鼠标做同样的事情。

# magento - 如何在所有 PayPal 交易中退还费用

> ID：11768243
> 
> 赞同：1
> 
> 时间：2012-08-01T22:02:27.403
> 
> 标签：magento, curl, paypal, nvp

下午好

我正在将贝宝与巴西 Magento 平台集成，我必须获得贝宝退回的费用

```
//---------//routine to recover the fee on database Paypal//--------//
        $nvp = array(

            //'TRANSACTIONID'            => '7W763566L0166562G',
            'TRANSACTIONID'               => $transactionId,
            'METHOD'                => 'GetTransactionDetails',
            'PWD'                    => 'UVAYAK9WMNPP75KA',
            'USER'                    => 'leonardoccleao_api1.gmail.com',
            'SIGNATURE'            => 'AFcWxV21C7fd0v3bYYYRCpSSRl31AYlssmYYHWWmVugX7vy.se0mIMAM',
            'VERSION'                           => '84',

        );

        $curl = curl_init();

        curl_setopt( $curl , CURLOPT_URL , 'https://api-3t.paypal.com/nvp' );
        curl_setopt( $curl , CURLOPT_SSL_VERIFYPEER , false );
        curl_setopt( $curl , CURLOPT_RETURNTRANSFER , 1 );
        curl_setopt( $curl , CURLOPT_POST , 1 );
        curl_setopt( $curl , CURLOPT_POSTFIELDS , http_build_query( $nvp ) );

        $response = urldecode( curl_exec( $curl ) );

        $responseNvp = array();

        if ( preg_match_all( '/(?<name>[^\=]+)\=(?<value>[^&]+)&?/' , $response , $matches ) ) {
            foreach ( $matches[ 'name' ] as $offset => $name ) {
                $responseNvp[ $name ] = $matches[ 'value' ][ $offset ];
            }
        }

        $fee_amount = $responseNvp['FEEAMT'];//fee recovered

        echo $fee_amount;//I get to print the fee
        curl_close( $curl );
        //---------/end routine to recover the fee on database Paypal //--------// 
```

我通过向 PayPal 提供交易 ID (txv_id) 来收取费用，但它仅适用于某些交易。在某些交易中，PayPal 退回费用 = 0。

我制作了一个脚本来用一系列交易填充数据表，但在通过贝宝进行的 40 笔交易中，我只收到了 2 笔费用。交易具有相同的产品和相同的价格，但并不总是相同的费用

我想知道 PayPal 是否有其他方法可以返回此属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:31:20.813

在某些交易中，例如使用您的 PayPal 余额付款时，不收取任何费用。这可能是原因。

贝宝费用：[https ://www.paypal.com/webapps/helpcenter/article/?currentIssueID=11927&topicID=11500006&m=TCI](https://www.paypal.com/webapps/helpcenter/article/?currentIssueID=11927&topicID=11500006&m=TCI)

# c# - 将项目添加到缓存而不删除整个集合

> ID：11768253
> 
> 赞同：1
> 
> 时间：2012-08-01T22:03:31.933
> 
> 标签：c#, caching

所以使用 .NET System.Runtime.Caching.MemoryCache 对象，我应该如何以及更新缓存的最佳方法是什么？

我不想获取字典，将项目添加到字典中，从缓存中删除现有的键/字典，然后读取它。有没有更好更优雅的方式来做到这一点？

所以为了清楚起见，我有一本充满项目的字典（字典）。该字典被添加到 MemoryCache 中，并为其分配了一个键。

然后，我希望能够将一个项目添加到该字典中，该字典会反映回缓存中。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:47:02.260

认为 Dictionary 和 MemoryCache 之间需要有区别。对 MemoryCache 的需求是数据的“过期”以及 .NET Cache 对象本身的一系列不足。您是否通过将 Dictionary 嵌入其中来利用 MemoryCache 的真正好处？

除此之外，没有其他方法可以在不接触对象的情况下添加或更新对象。

# vba - 在 MS Word 中，如何将包含“$1540.38-”的集合字段转换为可以求和的负数

> ID：11768256
> 
> 赞同：0
> 
> 时间：2012-08-01T22:03:51.507
> 
> 标签：vba, ms-word

我有一个 Word 文档，其中包含由我们的主要发布软件设置的字段。该软件不能使用 VBA 代码。

我必须总结的领域是

```
{SET ArrearsBalance "$1,540.38-"}, 
{SET RepossessionCosts "$200.00"},
 and {SET StorageCost "$200.00"} 
```

如果我把它们放在一张桌子上然后使用`{=SUM(A1,A2,A3)}`它，总共可以得到 400 美元

如果我手动删除尾随 - 我可以得到总数，就好像它们都是正数一样。

如果我从数字后面手动删除 - 并将其放在前面，它将正确求和。

有没有办法将 - 符号修剪/移动到 $ 符号的前面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T09:37:29.633

评论合并/增强为答案

首先，请注意：Word 解释货币字符串的方式取决于显示文档的计算机的区域设置。例如，在具有典型美国设置的机器上，“$1,540.38”将被识别为数字，但“£1,540.38”不会。

这方面还有其他潜在的问题，这导致我建议您对要汇总的每个金额执行以下操作：

```
{ SET XArrearsBalance "{ IF "{ ArrearsBalance }" = "*-" "-" }{ ={ ArrearsBalance }-0 }" } 
```

（所有 {} 都需要是特殊的域代码大括号对，您可以使用 ctrl-F9 在 Windows Word 中插入它们。

如果您在单元格 A1 中只有一个格式错误的金额，则不能以相同的方式轻松去除尾随的“-”，因为“=”字段只能用于数字 - 您无法使用它来操作文本。所以你可能需要把整个公式放在单元格 A1 中。

一旦你这样做了，你的公式需要是

```
{ =SUM(XArrearsBalance,XRepossessionCosts,XStorageCost) } 
```

如果您的单元格中确实有文字值，则可以引用这些值的另一种方法是为要引用的每个单元格创建不同的段落样式。假设您创建了一个名为“SArrearsBalance”的样式并将其应用于单元格 A1。然后你应该可以使用

```
{ STYLEREF SArrearsBalance } 
```

获取单元格的值，您可以（可能）使用

```
{ IF "{ STYLEREF SArrearsBalance }" = "*-" "-" }{ ={ STYLEREF SArrearsBalance }-0 }" } 
```

有人说您可以为整个单元格添加书签，并使用 { REF theBookmarkName } 引用它，但我通常发现这会导致计算生成大量不正确的数字。

# javascript - 通过外部锚输入值时的文本区域行数

> ID：11768263
> 
> 赞同：0
> 
> 时间：2012-08-01T22:04:09.723
> 
> 标签：javascript, html, textarea, anchor

一切都完成了，公共汽车对我来说是小事大问题。

工作示例[http://jsfiddle.net/auvi1/QSe4M/3/](http://jsfiddle.net/auvi1/QSe4M/3/)

正如您在示例中看到的那样，单击链接将值传递给 textarea 但是，我无法使用行计数脚本。如果我在文本区域内单击，它会计算行数，但这不是我想要它做的，我想要的是每当一个值输入到文本区域时它会自动增加计数框这有什么意义吗？

```
<script type='text/javascript'>
    window.onload = btnsInit;

    function btnsInit() {
        var i, a = document.getElementById('btns').getElementsByTagName('a');
        for (i = 0; i < a.length; ++i) {
            a[i].onclick = btnClick;
        }
    }

    function btnClick(e) {
        document.getElementById('myTextarea').value += '' + this.firstChild.nodeValue + '\n';
        xPreventDefault(e);
        trim();
        console.log("#myTextarea =", document.getElementById('myTextarea').value);
        return false;
    }

    function xPreventDefault(e) {
        if (e && e.preventDefault) e.preventDefault();
        else if (window.event) window.event.returnValue = false;
    }

    function cuentaRenglones(area) {
        var renglones = area.value.replace((new RegExp(".{" + area.cols + "}", "g")), "\n").split("\n");
        if (renglones[renglones.length - 1] == "") renglones.length--;
        area.form.contador.value = renglones.length;
    }
</script>
<div id='btns'>
    <form>
        <textarea rows="10" id='myTextarea' style="" name=" " onclick="cuentaRenglones(this)"></textarea>
        <br>Lines:
        <input type=text name="contador" size="2" value="0">
    </form>
    <a onclick='return false' href=' '>Link1</a>
    <a onclick='return false' href=' '>Link2</a>
    <a onclick='return false' href=' '>Link3</a>
    <a onclick='return false' href=' '>Link4</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:17:30.877

看这个：

[http://jsfiddle.net/Eb4U7/](http://jsfiddle.net/Eb4U7/)

我已更改为 keyup 事件，但还添加了单击链接后计算行数的命令，否则它只会在您在文本区域中编辑某些内容时更新计数。

```
<script type='text/javascript'>
window.onload=btnsInit;
function btnsInit() {
    var i,a=document.getElementById('btns').getElementsByTagName('a');
    for(i=0;i < a.length;++i) {
        a[i].onclick=btnClick;
    }
}

function btnClick(e) {
    document.getElementById('myTextarea').value += '' + this.firstChild.nodeValue + '\n';
    xPreventDefault(e);
    cuentaRenglones(document.getElementById('myTextarea'));
    trim();
    console.log("#myTextarea =", document.getElementById('myTextarea').value);

    return false;
}

function xPreventDefault(e) {
    if(e && e.preventDefault)e.preventDefault();
    else if(window.event)window.event.returnValue=false;
}

function cuentaRenglones(area){
    var renglones = area.value.replace((new RegExp(".{"+area.cols+"}","g")),"\n").split("\n");
    if(renglones[renglones.length-1]=="") renglones.length--;
        area.form.contador.value = renglones.length;
}
</script>
<div id='btns'>
<form>
<textarea rows="10" id='myTextarea' style="" name=" "  onkeyup="cuentaRenglones(this)"></textarea>
<br>
Lines:
<input type=text name="contador" size="2" value="0">
</form>
<a  onclick='return false'href=' '>Link1</a>
<a  onclick='return false' href=' '>Link2</a>
<a  onclick='return false' href=' '>Link3</a>
<a  onclick='return false' href=' '>Link4</a>
</div>​ 
```

# python - 处理 Django 模型和关系数据的正确/最有效的方法

> ID：11768264
> 
> 赞同：0
> 
> 时间：2012-08-01T22:04:14.887
> 
> 标签：python, mysql, django, django-models, relational-database

我很好奇在 Django 中处理模型的最佳方法是什么。假设您想制作一个处理电视节目列表的应用程序。处理模型的一种方法是

```
class TVShow(models.Model)  
     channel = models.CharField()  
     show_name = models.CharField()  
     season = models.CharField()  
     episode = models.CharField() 
```

其优点是所有东西都被整齐地包装。但是，如果我想显示所有频道或所有节目名称的列表，我将不得不通过 TVSHow 对象并删除重复项

另一方面可以

```
class CommonModel(models.Model)
    name = models.CharField()

    class Meta:
        Abstract = True

class Channel(CommonModel)
    show_name = models.ManyToMany(ShowName)

class ShowName(CommonModel)
    seasons = models.ManyToMany(Seasons)

class Season(CommonModel)
    episodes = models.ManyToMany(Episodes)

class Episode(CommonModel) 
```

这将使显示所有 ShowNames 或所有 Channels 变得容易，而不必担心不相关的数据。但是，除非您也映射回来，否则很难看到节目是什么频道

是否有“pythonic”或 Django 首选方式来执行此操作？在空间、速度等方面有什么优势吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:23:32.477

你最初的尝试看起来不错。也就是说，您可以使用

```
class TVShow(models.Model)  
     channel = models.CharField()  
     show_name = models.CharField()  
     season = models.CharField()  
     episode = models.CharField() 
```

然后你可以使用 django orm 来做你正在寻找的查询。

也就是说，如果您想要所有没有重复的频道，您会说

```
TVShow.objects.distinct('channel') 
```

[distinct()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)的 Django 文档。

就性能而言，这是执行此操作的方法，因为您实际上是让数据库执行此操作。数据库是为这些目的而设计的，并且应该比尝试在代码中对其进行修剪要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:46:59.653

使用规范化数据库结构的首选方法，除非它与性能相关，否则它将使您能够更轻松地在代码中进行更复杂的查询。ForeignKey 和 ManyToManyField 接受 'related_name' 参数。

```
class Channel(models.Model):
    pass

class Show(models.Model):
    # this means you can have same show on different channels
    channels = models.ManyToManyField(Channel, related_name='shows')

class Episode(models.Model):
    # this means that one episode can be related only to one show
    show = models.ForeignKey(Show, related_name='episodes')

Channel.objects.filter(shows__name='Arrested Development')
Channel.objects.get(name='Discovery').shows.all()
Show.objects.get(name='Arrested Development').episodes.all()
#2 db queries, 1 join
Episode.objects.get(name='Arrested Development S01E01',
                    select_related='show').show.channels.all() 
#1 db query, 3 joins
Channel.objects.filter(shows__episode__name='Arrested Development S01E01') 
```

等等...

# qt - QStandardItemModel::removeRows() 在我的用例中不起作用

> ID：11768266
> 
> 赞同：2
> 
> 时间：2012-08-01T22:04:17.267
> 
> 标签：qt, qstandarditemmodel

基本上我想删除模型中的所有行。我更喜欢使用`removeRows(..)`而不是`clear()`，因为我想保留我的标题。

我想我错过了一些东西（[docu here](http://doc.qt.nokia.com/4.7-snapshot/qstandarditemmodel.html#removeRows)），我的代码很简单：

```
int c = MainWindow::_viewDataModel->rowCount();
bool r = MainWindow::_viewDataModel->removeRows(0, c); 
```

`c`eg 是 4，但`r`总是错误的。我已经尝试将 0 和 1 作为第一个索引。使用`clear()`作品。上面的代码完全没有影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:20:42.530

它现在正在工作。经过一些测试我的发现：

*   `RemoveRows`当我指定删除的模型中的行数较少时，它非常敏感。
*   在我的特殊情况下，当模型中只有 4 行时，我确实想删除 5 行。因此`_viewDataModel->removeRows(0, 4);`，如果模型中只有 3 行，则根本不会删除任何内容。
*   与预期不同的是，在这种情况下根本没有删除。
*   我现在的解决方案是在删除之前彻底获取模型大小。

# c# - 是否可以自动创建自动映射器映射？

> ID：11768271
> 
> 赞同：1
> 
> 时间：2012-08-01T22:04:29.933
> 
> 标签：c#, .net, asp.net-mvc-3, automapper

也许这是一个愚蠢的问题，但对我来说真的不明显:(

```
var address = new Address { Id = 1, Name = "John Doe" };

// Configure AutoMapper
Mapper.CreateMap<Address, AddressViewModel>();

// Perform mapping
var viewModel = Mapper.Map<Address, AddressViewModel>(address); 
```

不需要恕我直言`Mapper.CreateMap<Address, AddressViewModel>();`，因为 AutoMapper 会在执行映射之后获取此信息。

那么为什么我必须编写这些配置呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:14:16.757

快速[浏览 source](https://github.com/AutoMapper/AutoMapper/blob/master/src/AutoMapper/MappingEngine.cs)后，它似乎将其映射存储在引擎中，以便随后的任何调用都从引擎加载映射数据。

这可能是因为反射可能很昂贵，并且 AutoMapper 无法知道有人会使用 Mapper.Map 的次数。定义：缓存:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:51:09.817

此外，此模式对于验证您的配置是否正确非常有用（请参阅[https://github.com/AutoMapper/AutoMapper/wiki/Configuration-validation](https://github.com/AutoMapper/AutoMapper/wiki/Configuration-validation)）。一些映射需要相当具体的配置，这可以及早发现任何错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T10:14:32.337

如果没有别的，Automapper 在执行映射时不一定会获得所有这些信息，因为您可能在 CreateMap 表达式中指定了任意数量的 .ForMember / .AfterMap (etc) 链接。您不想在每次映射调用中重复所有这些。

# c++ - 为什么 C++11 不能将不可复制的仿函数移动到 std::function？

> ID：11768273
> 
> 赞同：23
> 
> 时间：2012-08-01T22:04:35.957
> 
> 标签：c++, function, lambda, c++11

```
//------------------------------------------------------------------------------
struct A
{
    A(){}
    A(A&&){}
    A& operator=(A&&){return *this;}
    void operator()(){}

private:
    A(const A&);
    A& operator=(const A&);

    int x;
};

//------------------------------------------------------------------------------
int main()
{
    A a;
    std::function<void()> func(std::move(a));
} 
```

“A::A”：无法访问在“A”类中声明的私有成员

似乎当我通过引用捕获某些东西或者`const`我可以制作一个不可复制的 lambda 时。但是，当我这样做时，它实际上可以将其提供给`std::function`.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T22:21:34.250

简短的回答是 C++11 规范要求您`A`必须`CopyConstructible`与`std::function`.

长答案是存在此要求，因为`std::function`在构造函数中删除了仿函数的类型。为此，`std::function`必须通过虚函数访问仿函数的某些成员。其中包括调用运算符、复制构造函数和析构函数。并且由于这些是通过虚拟调用访问的，因此无论您是否实际使用`std::function`的复制构造函数、析构函数或调用运算符，它们都被“使用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-20T18:03:24.977

`std::function`要求函子是可复制的。

这是一个任意的设计决定。可能的替代方案可能是：

*   允许使用不可复制的仿函数，但尝试复制结果`std::function`会导致崩溃/异常。
*   允许使用不可复制的函子，并且`std::function`s 本身始终是不可复制的。
*   ...

如果结果`std::function`被复制，则不可能只要求可复制性，因为它可以在不同的 TU（翻译单元）中复制。

所以，如果你问我，当前的行为是较小的邪恶。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-01T22:08:06.907

这是 Visual Studio 中的一个错误。它尝试省略一个副本（实际上它应该尝试省略一个移动），这需要一个可访问的复制构造函数。最好的解决方案是简单地声明复制构造函数/赋值运算符并且从不定义它们。该类仍然是不可复制的，但代码将编译，因为 VS 永远不会尝试实际调用复制构造函数。

# java - 包括布局并排除另一个布局

> ID：11768275
> 
> 赞同：0
> 
> 时间：2012-08-01T22:04:42.243
> 
> 标签：java, android, xml

在我的项目中，我有 3 个 xml 文件。

我的主要布局

和 2 个我想包含在我的主布局中的布局

*big_buttons.xml* >包含大尺寸按钮 *small_buttons.xml* >包含与上面相同的按钮（同样的 id），但它们更小

默认情况下，我希望包含 *big_buttons.xml*，但我希望能够“排除” *big_buttons.xml* 并在 onClickListener 之后以编程方式包含 *small_buttons.xml*

有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:08:48.547

默认情况下你可以使用`setContentView(R.layout.big_buttons);`，然后在你的 onClickListener 中你可以做`setContentView(R.layout.small_buttons);`

如果您希望排除特定按钮而不是整个 XML，我认为您需要合并 2 个 XML 文件，默认情况下为“大按钮”赋予属性`android:visibility="visible"`和“小按钮” `android:visibility="gone"`。

然后以编程方式你可以做

```
 Button bigButton = (Button) findViewById(R.id.big_button);
    Button smallButton = (Button) findViewById(R.id.small_button);

    bigButton.setVisibility("View.GONE");
    smallButton.setVisibility("View.VISIBLE"); 
```

您将希望使用 GONE 而不是 INVISIBLE，因为 GONE 不包括高度和宽度等布局功能，其中 INVISIBLE 只是不显示按钮，而是为其保留空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:08:51.163

查看[View.setVisibility](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)。您可以在布局管理器上使用它，这样您就可以使整个控件组在 Java 代码中可见或不可见。

# javascript - 在 Ajax 响应后使用 window.location.replace 不会立即重定向

> ID：11768283
> 
> 赞同：0
> 
> 时间：2012-08-01T22:05:58.617
> 
> 标签：javascript, ajax, redirect

我正在实施 facebook 连接以进行身份​​验证。我还想验证我从 facebook 收到的用户的电子邮件是否与内部数据库（基本上是邀请列表）匹配。所以我使用如下的ajax调用。但是，重定向不会立即发生。用户需要刷新窗口才能获得重定向。任何想法为什么以及如何解决这个问题？谢谢！请注意，这发生在 FB.api 中，而 FB.api 又位于 window.fbAsyncInit 中。

```
 $.ajax({  
                   type: "POST",  
                   url: "verifyLogin.php",  
                   data: ("email=" + myEmail),  
                   success: function(resp){  
                          if (resp == 'success')
                          {
                                window.location.replace('/index.php');
                          }
                   },  
                   error: function(e){  
                     alert('Error: ' + e);  
                   }
                   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:16:01.573

这应该是在请求返回成功后立即发生的，如果您不在 facebook 窗口类中，您是否测试过响应立即发生？

如果您没有从 verifyLogin.php 返回“成功”一词，则也不需要进行相应检查

立即告诉我们您的意思。

# python - 如何修复这个 pysqlite2 AttributeError: X instance has no attribute 'con'？

> ID：11768285
> 
> 赞同：0
> 
> 时间：2012-08-01T22:06:06.770
> 
> 标签：python, sqlite, pysqlite

当我运行下面的整个代码时，这一行：

```
res=self.con.execute( 
```

从这个函数（其中 getfeatures 返回一个字典）：

```
def fcount(self,f,cat):
    res=self.con.execute(
      'select count from fc where feature="%s" and category="%s"'
      %(f,cat)).fetchone()
    if res==None: return 0
    else: return float(res[0]) 
```

产生此错误：

```
AttributeError: naivebayes instance has no attribute 'con' 
```

我已经安装了 pysqlite2，当我运行 pysqlite2 测试时，我得到了确定。

我还尝试使用内置的 sqlite3 而不是 pysqlite2 （执行`import sqlite3`语句并替换`self.con=sqlite.connect(dbfile)`为`self.con=sqlite3.connect(":memory:")`，但它也不起作用。

如何修复此错误？

谢谢你的帮助。

这里是整个代码：

```
from pysqlite2 import dbapi2 as sqlite

import re
import math

def getfeatures(doc):
  splitter=re.compile('\\W*')
  # Split the words by non-alpha characters
  words=[s.lower() for s in splitter.split(doc)
          if len(s)>2 and len(s)<20]
  # Return the unique set of words only
#  return dict([(w,1) for w in words]).iteritems()
  return dict([(w,1) for w in words])

class classifier:
  def __init__(self,getfeatures,filename=None):
    # Counts of feature/category combinations
    self.fc={}
    # Counts of documents in each category
    self.cc={}
    self.getfeatures=getfeatures

  def setdb(self,dbfile):
    self.con=sqlite.connect(dbfile)
    self.con.execute('create table if not exists fc(feature,category,count)')
    self.con.execute('create table if not exists cc(category,count)')

  def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      self.con.execute("insert into fc values ('%s','%s',1)"
                       % (f,cat))
    else:
      self.con.execute(
        "update fc set count=%d where feature='%s' and category='%s'"
        % (count+1,f,cat))

  def fcount(self,f,cat):
    res=self.con.execute(
      'select count from fc where feature="%s" and category="%s"'
      %(f,cat)).fetchone()
    if res==None: return 0
    else: return float(res[0])

  def incc(self,cat):
    count=self.catcount(cat)
    if count==0:
      self.con.execute("insert into cc values ('%s',1)" % (cat))
    else:
      self.con.execute("update cc set count=%d where category='%s'"
                       % (count+1,cat))

  def catcount(self,cat):
    res=self.con.execute('select count from cc where category="%s"'
                         %(cat)).fetchone()
    if res==None: return 0
    else: return float(res[0])

  def categories(self):
    cur=self.con.execute('select category from cc');
    return [d[0] for d in cur]

  def totalcount(self):
    res=self.con.execute('select sum(count) from cc').fetchone();
    if res==None: return 0
    return res[0]

  def train(self,item,cat):
    features=self.getfeatures(item)
    # Increment the count for every feature with this category
    for f in features.keys():
##    for f in features:
      self.incf(f,cat)
    # Increment the count for this category
    self.incc(cat)
    self.con.commit()

  def fprob(self,f,cat):
    if self.catcount(cat)==0: return 0

    # The total number of times this feature appeared in this
    # category divided by the total number of items in this category
    return self.fcount(f,cat)/self.catcount(cat)

  def weightedprob(self,f,cat,prf,weight=1.0,ap=0.5):
    # Calculate current probability
    basicprob=prf(f,cat)

    # Count the number of times this feature has appeared in
    # all categories
    totals=sum([self.fcount(f,c) for c in self.categories()])

    # Calculate the weighted average
    bp=((weight*ap)+(totals*basicprob))/(weight+totals)
    return bp

class naivebayes(classifier):

  def __init__(self,getfeatures):
    classifier.__init__(self,getfeatures)
    self.thresholds={}

  def docprob(self,item,cat):
    features=self.getfeatures(item)

    # Multiply the probabilities of all the features together
    p=1
    for f in features: p*=self.weightedprob(f,cat,self.fprob)
    return p

  def prob(self,item,cat):
    catprob=self.catcount(cat)/self.totalcount()
    docprob=self.docprob(item,cat)
    return docprob*catprob

  def setthreshold(self,cat,t):
    self.thresholds[cat]=t

  def getthreshold(self,cat):
    if cat not in self.thresholds: return 1.0
    return self.thresholds[cat]

  def classify(self,item,default=None):
    probs={}
    # Find the category with the highest probability
    max=0.0
    for cat in self.categories():
      probs[cat]=self.prob(item,cat)
      if probs[cat]>max:
        max=probs[cat]
        best=cat

    # Make sure the probability exceeds threshold*next best
    for cat in probs:
      if cat==best: continue
      if probs[cat]*self.getthreshold(best)>probs[best]: return default
    return best

def sampletrain(cl):
  cl.train('Nobody owns the water.','good')
  cl.train('the quick rabbit jumps fences','good')
  cl.train('buy pharmaceuticals now','bad')
  cl.train('make quick money at the online casino','bad')
  cl.train('the quick brown fox jumps','good')

nb = naivebayes(getfeatures)

sampletrain(nb)

#print ('\nbuy is classified as %s'%nb.classify('buy'))
#print ('\nquick is classified as %s'%nb.classify('quick'))

##print getfeatures('Nobody owns the water.') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:10:48.240

您的代码在 中设置连接`setdb`，但从不调用该方法。也许您可以从`__init__`方法中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:19:57.703

你的代码是一团糟。首先阅读[http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)。从对象继承新类，使用`super()`函数而不是直接调用来调用父方法，是的 -在使用 con 属性之前将`self.set_db()`调用放入方法中。在没有这样的属性时引发，它与 db 根本无关。`__init__``AttributeError: naivebayes instance has no attribute 'con'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-19T03:05:35.700

在第 133 页上的“持久化训练分类器”部分下，它说：“初始化分类器后，您需要使用数据库文件的名称调用 setdb 方法。” 那应该可以解决您的问题。

示例：
cl = docclass.fisherclassifier(docclass.getwords)
cl.setdb('test1.db')

# ios - 使用 RestKit 进行同步 HTTP 调用

> ID：11768287
> 
> 赞同：0
> 
> 时间：2012-08-01T22:06:16.313
> 
> 标签：ios, restkit, objective-c-blocks

将用户登录到我的应用程序时，我需要仅使用用户名从服务器中提取用户对象。这将返回进行其他 API 调用所需的 userId（除其他外）。从那时起，我将使用 userId 进行其他几个 HTTP 调用。如何在发送其他调用之前进行同步调用以完全下拉用户对象？

我已经在我的应用程序委托类中设置了我的对象映射，它运行良好，并且正在使用此代码从服务器中拉出用户对象：

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:[@"/api/users/" stringByAppendingString:[_userNameField text]] delegate:self]; 
```

这就是我尝试过的......正如这里所建议的那样：[使用 RestKit 进行同步调用](https://stackoverflow.com/questions/7325181/making-synchronous-calls-with-restkit)

```
RKObjectLoader* loader = [[RKObjectManager sharedManager] objectLoaderForObject:currentUser method:RKRequestMethodPUT delegate:nil];
RKResponse* response = [loader sendSynchronously]; 
```

但是，此代码 (1) 使用已弃用的方法 objectLoaderForObject 并且 (2) 崩溃说`'Unable to find a routable path for object of type '(null)' for HTTP Method 'POST''`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T21:31:21.140

撇开这是否是 iPhone 应用程序的理想设计这个问题不谈，我能够使用积木完成我希望的事情。

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:[@"/api/users/" stringByAppendingString:[_userNameField text]] usingBlock:^(RKObjectLoader* loader) {

    loader.onDidLoadResponse = ^(RKResponse *response) {

        NSLog(@"Response: \n%@", [response bodyAsString]);
    };

    loader.onDidLoadObjects = ^(NSArray *objects) {

        APIUser *apiUser = [objects objectAtIndex:0];
        NSLog(@"user_id is %i", apiUser.user_id);

    };

    loader.onDidFailWithError = ^(NSError *error) {

            UIAlertView *badLoginAlert = [[UIAlertView alloc]initWithTitle:NSLocalizedString(@"LOGIN_FAILED", nil)
                                                                   message:NSLocalizedString(@"BAD PASSWORD OR USERNAME", nil)
                                                                  delegate:self
                                                         cancelButtonTitle:NSLocalizedString(@"OK", nil)
                                                         otherButtonTitles:nil];
            [badLoginAlert show];           
    };
}]; 
```

希望这可以帮助某人。

# iphone - 上一个控制器的viewWillDisappear和下一个控制器的viewWillAppear的调用顺序

> ID：11768289
> 
> 赞同：1
> 
> 时间：2012-08-01T22:06:17.623
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiviewcontroller

我想知道前一个控制器的 viewWillDisappear 和下一个控制器的 viewWillAppear 的正确方法调用顺序是什么？我看到有时当我们从第一个视图控制器转到第二个时，第二个视图控制器的 viewWillAppear 将首先被调用，然后是第一个视图控制器的 viewWillDisappear。有时它是相反的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:24:37.583

我也有过同样的经历。这在我发现的 ios4.x 和 iOS5.x 中也是不同的。所以我最终假设没有预定义的顺序。

更糟糕的是，当涉及到 AlertView 时......

无论如何，你能解释一下为什么这对你的情况很重要吗？

假设您需要传递某种变量或 textView 内容，您可能会在扩展

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil withMyData:.... 
```

# ember.js - 初始化之前调用根状态的connectOutlets？

> ID：11768294
> 
> 赞同：3
> 
> 时间：2012-08-01T22:06:55.270
> 
> 标签：ember.js

[http://jsfiddle.net/pauldechov/89S5p/](http://jsfiddle.net/pauldechov/89S5p/)

在 root 的 connectOutlets 中，`App`似乎仍然没有`.initialize()`d。connectOutlets 不打算与根状态一起使用吗？（为什么？）

如果每次加载页面时我都需要一些东西（例如在 pangratz 的 NavigationView 中：[https](https://stackoverflow.com/a/11629977/363073) ://stackoverflow.com/a/11629977/363073 ），那么我需要像他一样拥有一个包罗万象的 root.index 状态?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:09:44.563

正如 sly7_7 所指出的，这仍然是一个悬而未决的问题——显然该功能被认为是可取的，但似乎需要不受欢迎的 hack。 [http://github.com/emberjs/ember.js/pull/941](http://github.com/emberjs/ember.js/pull/941)

现在，要么将所有路由放在一个子路由中，例如 root.index，要么手动绑定控制器而不是使用 outlet 助手（例如`{{view App.NavigationView controllerBinding="App.router.navigationController"}}`）。

# amazon-ses - 是否可以获得从 Amazon SES 退回的电子邮件地址的报告？

> ID：11768303
> 
> 赞同：6
> 
> 时间：2012-08-01T22:07:35.567
> 
> 标签：amazon-ses, email-bounces

虽然 SES 仪表板显示了有关通过该服务发送的电子邮件的跳出率的汇总统计数据，但我没有看到一种检索被退回的单个地址的方法。这可能吗？我们的情况是，我们在某些电子邮件中设置的“发件人”地址不正确，并解析为我们（已验证发件人）域上不存在的邮箱，因此 SES 转发到发件人地址的任何内容都可能消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:26:45.623

使用 Amazon SNS（简单通知服务），然后您可以添加您的电子邮件地址 - 或 Amazon SQS 服务来保存所有退回/投诉的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:42:44.067

答案是否定的，他们已经走了。教训：确保你的地址是有效的（显然是好的做法）并进入一个可以解析的邮箱（和/或设置和处理一个 SQS 队列让他们去）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-20T11:11:25.153

我有同样的问题。SES 报告没有显示累积退回错误的足够详细信息。我修改了 sesreport.zip，其中添加了交付、发件人电子邮件/来源电子邮件和主题列并包含在报告中。

你可以在这里找到我的修改： [https ://github.com/Morning-Train/AWS-SES-Report](https://github.com/Morning-Train/AWS-SES-Report)

希望我的回答能帮助你解决你的问题。

# android - 什么错误“无法安装 .apk”后跟“启动取消！”是什么意思？我的代码有问题吗？

> ID：11768310
> 
> 赞同：0
> 
> 时间：2012-08-01T22:08:41.463
> 
> 标签：android, android-layout, android-emulator, android-widget

当我单击模拟器上的应用程序时出现这些错误，然后它会冻结。他们的意思是什么？

```
[2012-08-01 14:49:28 - Tip Calculator] Failed to install Tip Calculator.apk on device 'emulator-5554!
    [2012-08-01 14:49:28 - Tip Calculator] (null)
    [2012-08-01 14:49:28 - Tip Calculator] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:16:02.163

您可能需要更改 ADB 连接超时设置：

[Android 无法在设备上安装 HelloWorld.apk (null) 错误](https://stackoverflow.com/questions/5229906/android-failed-to-install-helloworld-apk-on-device-null-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:16:08.517

这总是发生吗？在尝试安装较新版本之前，您可能必须在模拟器的设置中停止当前应用程序或将其删除。

# android - 是否可以在操作栏中使用下拉和选项卡作为导航？

> ID：11768313
> 
> 赞同：20
> 
> 时间：2012-08-01T22:08:50.060
> 
> 标签：android, android-actionbar, android-tabs

是否可以同时拥有顶部的微调器/下拉菜单和操作栏中正下方的选项卡？我想将操作栏顶部的微调器用作视图切换控制器（即表格视图或图表视图），而下面的选项卡将显示不同的数据列表。

以下屏幕截图准确说明了我想要实现的目标：

![在此处输入图像描述](../Images/301e8921fec22236f409281718509a14.png)

如果在操作栏中无法同时使用这两种模式，我可以在内容视图的顶部放置一个 TabWidget。但是，我有点不确定每个选项卡是否应该有一个片段或一个活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:23:15.700

编辑：

> 是否可以在操作栏中使用下拉和选项卡作为导航？

[不， ActionBarView](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/widget/ActionBarView.java)中的代码（setNavigationMode(int) 调用结束的地方）使用 switch 语句，因此无法组合模式。

操作栏导航模式和我之前的答案的某种组合仍然是一个有效的选项：您可以在操作栏中使用[自定义视图](http://developer.android.com/reference/android/app/ActionBar.html#setCustomView%28int%29)并使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)作为内容。ViewPager 中的每个选项卡都是一个片段，您可以在更改微调器时从父活动手动更新（更改视图类型）。

旁注，有 3rd 方库，例如[ViewPagerExtensions](https://github.com/astuetz/ViewPagerExtensions)，可以提供固定选项卡的外观，而无需使用 ActionBar 选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-20T18:24:07.417

这是可能的。我试图实现与您所展示的相同的 UI，并被卡住了，直到我尝试了一些非常简单但也有点令人困惑的东西。

我所做的是将 Spinner 设置为 ActionBar 的自定义视图，然后：

`ActionBar actionBar = getActionBar(); actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);`

这是我的意思的一个例子。

标签代码：

```
ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

actionBar.addTab(actionBar.newTab().setText("Today").setTabListener(this));
actionBar.addTab(actionBar.newTab().setText("List").setTabListener(this));
actionBar.addTab(actionBar.newTab().setText("Month").setTabListener(this)); 
```

在此活动的父活动中，我这样做了：

```
Context contextTheme = new ContextThemeWrapper(this, R.style.ActionBarSpinner);
Spinner actionBarSpinner = new Spinner(contextTheme);

// Specify a SpinnerAdapter to populate the dropdown list.
actionBarSpinnerAdapter = new ActionBarSpinnerAdapter(actionBar.getThemedContext(), dropdownValues);
actionBarSpinner.setAdapter(actionBarSpinnerAdapter);

// Set up the dropdown list navigation in the action bar.
actionBarSpinner.setOnItemSelectedListener(this);

actionBar.setCustomView(actionBarSpinner); 
```

这有效地为我提供了 ActionBar 的自定义视图，但随后我可以将 navigationMode 设置为选项卡以允许我拥有我想要的选项卡。在每个项目上设置适当的事件侦听器，瞧！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T10:53:42.290

```
Is it possible to use dropdown AND tabs as navigation in the action bar? 
```

在使用 bat 的默认库中不可能，您可以创建自定义操作栏视图并将其设置为可能

试试这个代码

```
action_bar.xml 
```

```
<LinearLayout
    android:id="@+id/actionbar_linearLayout_menu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="2dip"
    android:gravity="right" >

    <ImageView
        android:id="@+id/actionbar_imageView_menu_search"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dip"
        android:padding="8dp"
        android:src="@drawable/button_search_selector" />

    <ImageView
        android:id="@+id/actionbar_imageView_menu_myaccount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dip"
        android:padding="8dp"
        android:src="@drawable/button_myaccount_selector" />

    <ImageView
        android:id="@+id/actionbar_imageView_menu_settings"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="5dip"
        android:padding="8dp"
        android:src="@drawable/button_settings_selector" />
</LinearLayout>

<LinearLayout
    android:id="@+id/actionbar_linearLayout_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/actionbar_linearLayout_menu" >

    <Spinner
        android:id="@+id/actionbar_spi_menu"
        style="@style/MenuSpinnerTextViewItem"
        android:layout_width="80dip"
        android:layout_height="34dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="6dip"
        android:background="@drawable/spinner_bg"
        android:paddingLeft="3dip"
        android:spinnerMode="dropdown"
        android:visibility="gone" />

    <com.smartdeal.util.SmartDealTextView
        android:id="@+id/actionbar_txt_title"
        style="@style/Style_Text_Bold"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginTop="4dip"
        android:gravity="left"
        android:padding="5dip"
        android:text="Smart Deal"
        android:textColor="@android:color/white"
        android:textSize="18dip" />
</LinearLayout>

<LinearLayout
    android:id="@+id/actionbar_linearLayout_search"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/serch_bg"
    android:visibility="gone" >

    <ImageView
        android:id="@+id/actionbar_imageView_searchMenu_search"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/search_icon_selected" />

    <EditText
        android:id="@+id/actionbar_edt_searchMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dip"
        android:layout_weight="1"
        android:background="@null"
        android:singleLine="true"
        android:textColor="@android:color/white"
        android:textSize="18dip" >
    </EditText>

    <ImageView
        android:id="@+id/actionbar_imageView_searchMenu_cancel"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="center_horizontal"
        android:layout_marginLeft="5dip"
        android:src="@drawable/search_cancel" />
</LinearLayout> 
```

BaseActivity.java

```
{
final ActionBar ab = getSupportActionBar();
        ab.setDisplayHomeAsUpEnabled(true);
        final LayoutInflater inflater = (LayoutInflater) getSystemService("layout_inflater");
        ab.setDisplayShowTitleEnabled(false);
        // ab.setTitle("Settings");
        View view = inflater.inflate(R.layout.actionbar_view, null);

        linLayoutMenu = (LinearLayout) view
                .findViewById(R.id.actionbar_linearLayout_menu);
        linLayoutSearch = (LinearLayout) view
                .findViewById(R.id.actionbar_linearLayout_search);
        linLayoutTitle = (LinearLayout) view
                .findViewById(R.id.actionbar_linearLayout_title);

        txtTitle = (TextView) view.findViewById(R.id.actionbar_txt_title);
        spiMenu = (Spinner) view.findViewById(R.id.actionbar_spi_menu);

        menuSearch = (ImageView) view
                .findViewById(R.id.actionbar_imageView_menu_search);
        menuMyaccount = (ImageView) view
                .findViewById(R.id.actionbar_imageView_menu_myaccount);
        menuSettings = (ImageView) view
                .findViewById(R.id.actionbar_imageView_menu_settings);
        menuSearchCancel = (ImageView) view
                .findViewById(R.id.actionbar_imageView_searchMenu_cancel);

        menuSearch.setOnClickListener(this);
        menuMyaccount.setOnClickListener(this);
        menuSettings.setOnClickListener(this);
        menuSearchCancel.setOnClickListener(this);

        if (this instanceof HistoryActivity) {
            txtTitle.setVisibility(View.GONE);
            spiMenu.setVisibility(View.VISIBLE);

            List<String> list = new ArrayList<String>();
            list.add("History");
            list.add("Activity");

            MenuListAdapter menuList = new MenuListAdapter(this, list);
            spiMenu.setAdapter(menuList);

        } else {
            txtTitle.setVisibility(View.VISIBLE);
            spiMenu.setVisibility(View.GONE);
        }

        ab.setCustomView(view);
        ab.setDisplayShowCustomEnabled(true);
} 
```

ViewActivity.java

选项卡监听器 {

```
private ListView historyList;
private ArrayList<String> list;
LinearLayout linLayoutHistory, linLayoutActivity;
private ActionBar actionBar;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.....);

    initComponent();

}

private void initComponent() {
    // setActionBarHomeUpAsEnable(true);

    linLayoutActivity = (LinearLayout) findViewById(R.id.history_activity_linLayout_activity);
    linLayoutHistory = (LinearLayout) findViewById(R.id.history_activity_linLayout_history);

    historyList = (ListView) findViewById(R.id.history_activity_listView);
    list = new ArrayList<String>();

    spiMenu.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub

    actionBar = getSupportActionBar();

    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab month_tab = actionBar.newTab()
            .setText(getResources().getString(R.string.tab_month))
            .setTabListener(this);
    ActionBar.Tab year_tab = actionBar.newTab()
            .setText(getResources().getString(R.string.tab_year))
            .setTabListener(this);
    ActionBar.Tab all_tab = actionBar.newTab()
            .setText(getResources().getString(R.string.tab_all))
            .setTabListener(this);

    actionBar.addTab(month_tab);
    actionBar.addTab(year_tab);
    actionBar.addTab(all_tab);

    return super.onCreateOptionsMenu(menu);

}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T22:03:20.583

您还可以创建自定义操作提供程序以在操作栏中实现微调器。所以没有必要创建一个完整的操作栏。通过这样做并使用标签作为导航模式，您的目标就实现了。

# flash - Actionscript的时间格式是什么？

> ID：11768316
> 
> 赞同：0
> 
> 时间：2012-08-01T22:08:58.623
> 
> 标签：flash, actionscript, actionscript-2

我有从 XML 文档动态加载的提示点。

```
 <cuepoints>
        <one name="bullet1" time="4.000" type="actionscript" said="Konnektivität"></one>
        <two name="bullet2" time="6.500" type="actionscript" said="Internet"></two>
        <three name="bullet3" time="7.500" type="actionscript" said="Bilder und Video"></three>
        <four name="bullet4" time="9.000" type="actionscript" said="Gaming"></four>
        <five name="bullet5" time="10.000" type="actionscript" said="Akkulaufzeit"></five>
    </cuepoints> 
```

这是我的 AS2 代码：

```
import mx.transitions.Tween;
import mx.transitions.easing.*;

//var playback1:mx.video.FLVPlayback;

/*////////////////////////////////////////////////////////////////
Load the video content paths
/////////////////////////////////////////////////////////////////*/
playback1.contentPath = getNodeValue(findNode(videos, "one"));

//turn off the visibilit of the bullet mc
bullet_bg._alpha = 0;
bullet_one._alpha = 0;
bullet_two._alpha = 0;
bullet_three._alpha = 0;
bullet_four._alpha = 0;
bullet_five._alpha = 0;

// Assign the mySeekBar instance to the flvPlayback instance
playback1.playPauseButton = playpause;
playback1.backButton = myrewind;
playback1.seekBar = seekbar_container.myseek;
playback1.bufferingBar = mybuffer; 

/*////////////////////////////////////////////////////////////
Create the Cuepoints for the video
///////////////////////////////////////////////////////////*/
var bullet1:Object = new Object();
bullet1.time = findNode(cuepoints, "one").attributes.time;
bullet1.name = findNode(cuepoints, "one").attributes.name; 
bullet1.type = "actionscript";

var bullet2:Object = new Object();
bullet2.time = findNode(cuepoints, "two").attributes.time;
bullet2.name = findNode(cuepoints, "two").attributes.name; 
bullet2.type = "actionscript";

var bullet3:Object = new Object();
bullet3.time = findNode(cuepoints, "three").attributes.time;
bullet3.name = findNode(cuepoints, "three").attributes.name; 
bullet3.type = "actionscript";

var bullet4:Object = new Object();
bullet4.time = findNode(cuepoints, "four").attributes.time;
bullet4.name = findNode(cuepoints, "four").attributes.name; 
bullet4.type = "actionscript";

var bullet5:Object = new Object();
bullet5.time = findNode(cuepoints, "five").attributes.time;
bullet5.name = findNode(cuepoints, "five").attributes.name; 
bullet5.type = "actionscript";

playback1.addASCuePoint(bullet1);
playback1.addASCuePoint(bullet2);
playback1.addASCuePoint(bullet3);
playback1.addASCuePoint(bullet4);
playback1.addASCuePoint(bullet5);

/*///////////////////////////////////////////////////////////
 CUE POINT LISTENER
///////////////////////////////////////////////////////////*/
var listenerObject:Object = new Object();
listenerObject.cuePoint = function(eventObject:Object) {
    var cuePtName = eventObject.info.name;
    if (cuePtName == "bullet1") {
        var b1:Tween = new Tween(bullet_one, "_alpha", Strong.easeInOut, 0, 100, 1, true);
        var b1x:Tween = new Tween(bullet_one, "_x", Strong.easeInOut, 100, 115, 1, true);
        trace(bullet1.time);
    }
    if (cuePtName == "bullet2") {
        var b2:Tween = new Tween(bullet_two, "_alpha", Strong.easeInOut, 0, 100, 1, true);
        var b2x:Tween = new Tween(bullet_two, "_x", Strong.easeInOut, 100, 115, 1, true);
        trace(bullet2.time);
    }
    if (cuePtName == "bullet3") {
        var b3:Tween = new Tween(bullet_three, "_alpha", Strong.easeInOut, 0, 100, 1, true);
        var b3x:Tween = new Tween(bullet_three, "_x", Strong.easeInOut, 100, 115, 1, true);
        trace(bullet3.time);
    }
    if (cuePtName == "bullet4") {
        var b4:Tween = new Tween(bullet_four, "_alpha", Strong.easeInOut, 0, 100, 1, true);
        var b4x:Tween = new Tween(bullet_four, "_x", Strong.easeInOut, 100, 115, 1, true);
        trace(bullet4.time);
    }
    if (cuePtName == "bullet5") {
        var b5:Tween = new Tween(bullet_five, "_alpha", Strong.easeInOut, 0, 100, 1, true);
        var b5x:Tween = new Tween(bullet_five, "_x", Strong.easeInOut, 100, 115, 1, true);
        trace(bullet5.time);
    }
}

/*/////////////////////////////////////////////
//// LISTENERS for FLVPlayback component
////////////////////////////////////////////*/ 
var alreadyShown:Boolean;

var startObject:Object = new Object();
startObject.playing = function(eventObject:Object): Void {   
    trace("FLV is playing");
    if(alreadyShown != true) {
        var laserFadeIn:Tween = new Tween(bullet_bg, "_alpha", Strong.easeInOut, 0, 100, 3.4, true);
        alreadyShown = true;
    } 
}

playback1.addEventListener("cuePoint", listenerObject);
playback1.addEventListener("playing", startObject); 
```

问题是，由于某种原因，当我有“10.000”秒的时间时，提示点顺序不正常，它们都同时出现。时间格式有问题吗？

**更新：**当我硬编码 10.000 秒时，一切正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:06:36.023

我认为您遇到的问题是因为您将`time`提示点的属性设置为`strings`而不是`numbers`. 尝试将您从 XML 获得的值转换为，`int`然后再将其分配给您的提示点，如下所示：

```
var bullet1:Object = new Object();
bullet1.time = parseInt(findNode(cuepoints, "one").attributes.time);
bullet1.name = findNode(cuepoints, "one").attributes.name; 
bullet1.type = "actionscript"; 
```

# batch-file - xcopy 从同一位置但不同的计算机

> ID：11768319
> 
> 赞同：1
> 
> 时间：2012-08-01T22:09:27.657
> 
> 标签：batch-file, xcopy

我该怎么做呢？复制文件后，我需要将它们重命名为其原始计算机名称。

我有

```
for %%a in (computerlist.txt) do xcopy %%a\C$\file.txt D:\ /C 
```

这行得通吗？不过，我迷失在重命名部分。

似乎 %%a in \%%a\C$\file.txt 不被接受。当我运行它时，它变成了\computerlist.txt\C$\file.txt。与目标路径相同。我什至尝试将 computerlist.txt 的完整路径放在括号内，但仍然无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:22:36.320

在我的脑海中，这应该让你开始：

```
for /f %%a in (computerlist.txt) do xcopy \\%%a\C$\file.txt D:\%%a.txt /C 
```

如果计算机名称中`computerlist.txt`有前导`\\`，请将它们从该`xcopy \\%%a`行的部分中删除。

# objective-c - 从 ObjectiveC 类中引用 UIViewController

> ID：11768322
> 
> 赞同：0
> 
> 时间：2012-08-01T22:10:06.003
> 
> 标签：objective-c, ios, xcode, uiviewcontroller

所以我的问题是：如何从外部 ObjectiveC 类中引用 UIViewController。我有一个 ViewController，上面有一个 UIScrollView，还有一个需要重写一些方法的类，最终返回所说的 UIScrollView。所以，我认为最简单的方法是输入：

```
return destinationViewController.scrollView; 
```

但我不太清楚如何制作destinationViewController 参考。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:12:53.097

您应该能够将其作为参数传递给外部类，否则您应该重新考虑您的类设计。在最坏的情况下，您可以将其存储在 AppDelegate 或一些专门的单例（或在最坏的情况下的公共静态字段（如静态 UIViewController *g_ViewController）中）...

# objective-c - EXC_BAD_ACCESS 试图访问 Box2D 主体 UserData

> ID：11768326
> 
> 赞同：0
> 
> 时间：2012-08-01T22:10:54.333
> 
> 标签：objective-c, cocos2d-iphone, ios-simulator, box2d, kobold2d

正如 Box2D 手册中所建议的，我将 body->userData 设置为与其关联的 CCSprite。但是，当我稍后尝试访问它时——即使在相同的方法或相同的 for 循环中——它不可避免地会抛出 EXC_BAD_ACCESS。

只要出现以下代码结构，就会出现错误：

```
b2BodyDef bodyDef;
b2Body* blockBody;
Block* block;

//...

block = [Block spriteWithFile:spriteName];

//Block configuration
block.position = CGPointMake(x.floatValue * BLOCK_SIZE_PIXELS, y.floatValue * BLOCK_SIZE_PIXELS);        
block.anchorPoint = CGPointZero;
[self addChild:block z:7]; 
[self.blockArray addObject:block];

//Body configuration
bodyDef.type = b2_dynamicBody;
bodyDef.position = toMeters(block.position);
bodyDef.angle = 0.0f;
bodyDef.linearDamping = 1.0f;
bodyDef.angularDamping = 0.0f;
bodyDef.gravityScale = 1.0f;
bodyDef.allowSleep = true;
bodyDef.awake = true;
bodyDef.fixedRotation = true;
bodyDef.userData = &block;

blockBody = world->CreateBody(&bodyDef);

vertices[0] = toMeters(CGPointZero);  
vertices[1] = toMeters(CGPointMake(BLOCK_SIZE_PIXELS, 0));
vertices[2] = toMeters(CGPointMake(BLOCK_SIZE_PIXELS, BLOCK_SIZE_PIXELS));
vertices[3] = toMeters(CGPointMake(0, BLOCK_SIZE_PIXELS));

blockShape.Set(vertices, 4);

fixtureDef.shape = &blockShape;
fixtureDef.density = 1.0f;
blockFixture = blockBody->CreateFixture(&fixtureDef);

block.body = blockBody;

//UPON INVOKING THIS LINE,
//PROGRAM CRASHES WITH EXCEPTION: EXC_BAD_ACCESS
Block* test = (__bridge Block*)blockBody->GetUserData(); 
```

此代码出现在`loadlevel:`继承自 CCLayer 的 GameLayer.m 中。

`Block`继承自`GameSprite`，它定义`.body`并继承自 CCSprite。头文件：

```
//
//  Block.h
//
//  Created by [REDACTED] on 7/20/12.
//  Copyright (c) 2012 [REDACTED]. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "GameSprite.h"
//#import "Constants.h"

@interface Block : GameSprite
{
//    GameSprite* _sprite;
//    int _platformTag;
}

+(Block*) blockWithFile: (NSString*) filename;
+(Block*) blockWithTexture: (CCTexture2D*) texture;
@end

//
//  GameSprite.h
//  LegendaryOiramBrothers
//
//  Created by [REDACTED] on 7/20/12.
//  Copyright (c) 2012 [REDACTED]. All rights reserved.
//

#import "CCSprite.h"
#import "Constants.h"
#import "Box2D.h"

@interface GameSprite : CCSprite
{
    b2Body* body;
}

- (void) update;

- (void) setPosition:(CGPoint)position;
- (b2Vec2) getVelocity;
- (void) setVelocity:(b2Vec2) vel;

@property (nonatomic) b2Body* body;

@end 
```

从我在网上可以找到的内容来看，我的问题似乎是某个地方的自动释放不正确 - 但我看不出该块有机会在哪里解除分配。结果，我比较糊涂。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:19:43.097

你能发现这一行的错误吗？

```
bodyDef.userData = &block; 
```

您正在分配指针的地址，而不是指针本身。这应该解决它：

```
bodyDef.userData = block; 
```

# c# - 由于对象的当前状态，URL 编码的表单数据无效或操作无效

> ID：11768328
> 
> 赞同：1
> 
> 时间：2012-08-01T22:11:04.503
> 
> 标签：c#, asp.net, iis

# 背景

我继承了一个 ASP.NET Web 应用程序项目，该项目在过去 6 到 7 年中被传递。该站点在我的开发机器上的 .NET 2.0 和 IIS 7.5 以及生产服务器上的 IIS 6.0 上运行。另一个问题是我无法将页面更改或重构为更小的片段。通常的办公室政治适用，客户不会为此付费，没有时间去做，资源就这样紧张了。

# 问题

有一个页面有一个 ASP:Table 服务器控件，可以在文本框上生成数百个。

我注意到，当它达到一定数量的行时，会引发 IIS 异常：

**本地开发机器（IIS 7.5、.NET 2.0）**

> HTTP 错误 400.0 - 错误请求
> 
> ASP.NET 在 URL 中检测到无效字符。..ErrorPage.aspx?ErrorMsg=+URL-encoded+form+data+is+not+valid。

**生产（IIS 6.0、.NET 2.0）**

> 由于对象的当前状态，操作无效

我已经搜索了几个小时，并且遇到了几个线程，例如[，由于对象的当前状态，操作无效。当我选择下拉列表时](https://stackoverflow.com/questions/10697194/operation-is-not-valid-due-to-the-current-state-of-the-object-when-i-select-dro)

我已尝试在我的中插入以下 AppSettings（如下所示），`Web.config`但无法解决此问题：

```
<add key="aspnet:MaxHttpCollectionKeys" value="2000" />
<add key="aspnet:MaxJsonDeserializerMembers" value="2000" /> 
```

有谁知道我可以做些什么来解决这个问题或让上述设置生效？

提前致谢。

# javascript - jqGrid不显示分页链接

> ID：11768331
> 
> 赞同：0
> 
> 时间：2012-08-01T22:11:20.477
> 
> 标签：javascript, jquery, jquery-plugins, jqgrid

我这里有一些遗留代码，我正在使用 jqGrid 来对一些 XML 数据进行分页。XML 包含 354 条记录，其中的前 20 条在页面加载后立即显示，但是 jqGrid 不显示链接以浏览其他记录并对其进行分页。

我确信 jqGrid 正在获取完整的 XML，它甚至说`Viewing 1 - 20 of 354`，但并没有真正让我分页。

如果我输入分页编号（例如，第 2 页的“2”）并输入它，它会发出一个 HTTP 请求（返回`200`状态）并且什么都不做！

这是分页的JS代码：

```
$(document).ready(function() {
    erc_id = $('#erc_id').val();

    jQuery("#list4").jqGrid({
        url: "/ercs/" + erc_id + "/exemplares.xml",
        datatype: "xml",
        width: 650,
        pager: "gridPager",
        height: 'auto',
        xmlReader: {
            root: "exemplares",
            row: "exemplar",
            repeatitems: false,
            id: "id"
        },
        colNames: ['Código', 'Referência', 'Num. Controle', 'Dt. Moldagem', 'Traço'],
        colModel: [
            {
            name: 'codigo',
            index: 'codigo',
            width: 60,
            sortable: false},
        {
            name: 'referencia',
            index: 'referencia',
            width: 160,
            sortable: false},
        {
            name: 'numero-controle',
            index: 'numero-controle',
            width: 60,
            sortable: false,
            align: 'center'},
        {
            name: 'data-moldagem',
            index: 'data-moldagem',
            width: 60,
            sortable: false},
        {
            name: 'traco',
            index: 'traco',
            width: 60,
            sortable: false,
            xmlmap: "traco>reference"},
            ],
        viewrecords: true,
        caption: "Exemplares",
        subGrid: true,
        subGridRowExpanded: function(subgrid_id, row_id) {
            var subgrid_table_id = subgrid_id + "_t";
            my_row_id = row_id
            $("#" + subgrid_id).html("<table id='" + subgrid_table_id + "' class='scroll'></table>");
            row_id = row_id.replace("5687", "");
            jQuery("#" + subgrid_table_id).jqGrid({
                url: "/ercs/" + erc_id + "/exemplares/" + row_id + "/cps.xml",
                datatype: "xml",
                height: 'auto',
                width: 550,
                xmlReader: {
                    root: "cps",
                    row: "cp",
                    repeatitems: false,
                    id: "id"
                },
                colNames: ['Número', 'Carga', 'Idade', 'Prensa', 'Retifica', 'Ruptura', 'retifica', 'N cont antigo'],
                colModel: [
                    {
                    name: "numero",
                    index: "numero",
                    width: 60,
                    sortable: false},
                {
                    name: "carga",
                    index: "carga",
                    width: 50,
                    sortable: false,
                    align: 'center'},
                {
                    name: "idade",
                    index: "idade",
                    width: 30,
                    sortable: false,
                    align: 'center'},
                {
                    name: "prensa",
                    index: "carga",
                    width: 30,
                    sortable: false,
                    align: 'center'},
                {
                    name: "carga",
                    index: "carga",
                    width: 50,
                    sortable: false,
                    align: 'center'},
                {
                    name: "ruptura",
                    index: "ruptura",
                    width: 50,
                    sortable: false,
                    align: 'center'},
                {
                    name: "retifica",
                    index: "retifica",
                    width: 50,
                    sortable: false,
                    align: 'center'},
                {
                    name: "numero-controle-antigo",
                    index: "numero-controle-antigo",
                    width: 50,
                    sortable: false,
                    align: 'center'}
                            ]
            });
        },
        ondblClickRow: function(id) {
            id = id.replace("5687", "");
            if (typeof my_row_id !== "undefined") {
                my_row_id = my_row_id.replace("5687", "");
                window.location = "/ercs/" + erc_id + "/exemplares/" + my_row_id + "/cps/" + id + "/edit"
            } else {
                window.location = "/ercs/" + erc_id + "/exemplares/" + id + "/edit"
            }
        },
    });
});​ 
```

如果您知道可能导致此错误的原因，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:28:20.780

我建议`gridComplete`在您的网格定义中添加一个函数，然后您将能够轻松检查一些控制分页的值：

```
gridComplete: function(){
  var r = $(this).getGridParam('records');
  var p = $(this).getGridParam('page');
  var rec = $(this).getGridParam('reccount');
  var row = $(this).getGridParam('rowNum');
} 
```

这是它们都记录在案的地方：

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:pager#properties](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:pager#properties)

# android - 在 ICS 中禁用 WebView VideoPlayer

> ID：11768335
> 
> 赞同：0
> 
> 时间：2012-08-01T22:12:05.757
> 
> 标签：android, html, webview, youtube, android-videoview

在 ICS 中，webview 使用内置的 html5 视频播放器加载 youtube 视频。有没有办法禁用它，而是使用嵌入式 youtube 播放器。

谢谢，

# c++ - Objective-C 到 C++ 字符串转换导致内存泄漏

> ID：11768341
> 
> 赞同：2
> 
> 时间：2012-08-01T22:12:43.003
> 
> 标签：c++, string, memory-leaks, nsstring

我正在调用控制器字符串数据成员并使用该`UTF8String`方法将 NSString 对象转换为 C++ 字符串对象，这导致了内存泄漏。调用是在核心音频`RenderTone`函数内部进行的，如下所示：

```
InstrumentGridViewController *viewController = (InstrumentGridViewController *)inRefCon;
string cppTrackName = [viewController->trackName UTF8String]; 
```

虽然代码位于 for 循环中，但它会导致相当大的内存泄漏。任何想法为什么？我必须进行转换，因为我正在使用`cppTrackName`变量进行 c++ 函数调用。我也试过这个：`string cppTrackName = "synthTrack #1";`这工作正常而不会导致任何泄漏，但显然我真的需要从我的控制器中读取值。

这是控制台中的错误（不断重复）：

```
objc[6352]: Object 0x68c3b60 of class __NSCFData autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:18:37.737

**更新**

现在我看到了消息：

的实现`-[NSString UTF8String]`可以自由地假设在生成消息的线程上存在一个自动释放池。

正在从辅助（渲染）线程调用您的音频回调。显然，在您向字符串发送消息时，此线程上不存在自动释放池，因此会出现“无自动释放池”控制台消息。

在典型情况下，您将显式创建一个自动释放池。**但是**，这是渲染线程。如果它是实时音频线程，则不应锁定（包括堆分配）甚至不使用 objc 消息传递（因为它可以锁定，并且 objc 消息传递不能保证消息发送所需的最长时间）。ObjC API（实际上）在实时音频渲染上下文中没有位置。

# php - 内存缓存故障转移

> ID：11768343
> 
> 赞同：3
> 
> 时间：2012-08-01T22:12:52.367
> 
> 标签：php, caching, memcached, scalability

我正在使用 Memcache (Not memcacheD) 。如果我有 10 个 memcache 服务器并且其中 1 个失败了，它会自动从池中删除吗？我的意思是，当我的应用程序尝试请求缓存时，它会尝试从那台失败的服务器获取关键数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T10:20:36.417

我不认为它会被删除，但是如果您添加了多个节点，则会提供自动故障转移。您可以在此处配置故障转移行为：http: [//php.net/manual/en/memcache.ini.php](http://php.net/manual/en/memcache.ini.php)

这是文档中的引用：

> 故障转移可能发生在任何方法的任何阶段，只要其他服务器可用，用户不会注意到请求。任何类型的套接字或 Memcached 服务器级别错误（内存不足除外）都可能触发故障转移。正常的客户端错误（例如添加现有密钥）不会触发故障转移。

当然，这假设所有数据都在这些节点上进行了镜像，因为您必须在应用程序端实现分片/集群。

# android - 无法弄清楚如何在 Android 中恢复应用内购买交易

> ID：11768347
> 
> 赞同：2
> 
> 时间：2012-08-01T22:13:17.717
> 
> 标签：android, in-app-purchase, in-app-billing

关于 RESTORE_TRANSACTIONS，我对 Android 的应用内计费感到非常困惑。

我有这个片段用于在我的应用程序中进行捐赠：

```
BillingHelper.requestPurchase(mContext, "donation"); 
```

它工作得很好，那里没有问题。问题就在这里，购买完成后我设置了一个布尔值：

```
if (BillingHelper.latestPurchase.isPurchased()) {
          DONATE_VERSION = true;
} 
```

此后，除非用户卸载该应用程序，否则该应用程序将按预期运行。我将 DONATE_VERSION 存储在共享首选项中。将购买信息存储在互联网上的个人数据库中不是一种选择。

当用户重新安装应用程序时，他们可以从捐赠中删除广告的唯一方法是再次捐赠！我不希望出现这种情况。我希望能够向 Google 查询已购买哪些物品（在本例中为“捐赠”物品）的结果。我在 onCreate() 中调用它：

`BillingHelper.restoreTransactionInformation(BillingSecurity.generateNonce());`

但现在呢？如果用户之前购买了“捐赠”的托管应用内购买，我如何查询谷歌以从应用内结算中获取有关已购买哪些物品的信息，以便我可以再次设置我的布尔值？请尽可能清楚，因为我一直在搞砸这个，在 IRC 上聊天，并搜索 API 大约 6 个小时，但我无法弄清楚这一点。

编辑：

我的 onReceive() 方法：

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    Log.i(TAG, "Received action: " + action);
    if (ACTION_PURCHASE_STATE_CHANGED.equals(action)) {
        String signedData = intent.getStringExtra(INAPP_SIGNED_DATA);
        String signature = intent.getStringExtra(INAPP_SIGNATURE);
        purchaseStateChanged(context, signedData, signature);
    } else if (ACTION_NOTIFY.equals(action)) {
        String notifyId = intent.getStringExtra(NOTIFICATION_ID);
        notify(context, notifyId);
    } else if (ACTION_RESPONSE_CODE.equals(action)) {
        long requestId = intent.getLongExtra(INAPP_REQUEST_ID, -1);
        int responseCodeIndex = intent.getIntExtra(INAPP_RESPONSE_CODE, C.ResponseCode.RESULT_ERROR.ordinal());
        checkResponseCode(context, requestId, responseCodeIndex);
    } else {
       Log.e(TAG, "unexpected action: " + action);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:21:59.900

您将在 PURCHASE_STATE_CHANGED 消息中获得交易信息，就像您在成功购买后所做的一样。像往常一样处理并设置您需要的任何标志/首选项。还要确保您只在首次安装时调用它（当所述首选项丢失/为空时），因为经常调用它会使您的应用程序在一段时间内被阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T03:55:17.020

我刚刚在这里回答了一个类似的问题：[https ://stackoverflow.com/a/12187921/455886](https://stackoverflow.com/a/12187921/455886)

恢复事务的典型场景流程如下：

1.  用户安装您的应用程序。

2.  首次加载应用时，您会检查是否需要恢复购买。

3.  如果这样做，请向 Google 发送 RESTORE_TRANSACTION 同步请求。

4.  Google 将对您的 RESTORE_TRANSACTION 请求作出确认响应。（这**只是确认**他们收到了您的请求。）

5.  此时，您应该标记您已经向 Google 发送了恢复请求，并且不需要从应用程序发送进一步的恢复。

6.  现在，对于用户之前购买的每个应用内购买，Google 将开始**异步向您的应用发送“PURCHASE_STATE_CHANGED”事件。**如果用户第一次购买，该调用与 Google 发送的调用**相同。**

7.  由于它是同一个调用，您的应用程序将接收事件并正常处理它，就好像用户刚刚购买了应用程序内产品一样（从而“恢复”购买的功能）。

关于第 2 步和第 5 步，我为我的应用程序所做的是保留一个名为“APP_INITIALISED”的 SharedPreference 值，该值默认为 false。每次我的应用启动时，如果“APP_INITIALISED”为假，我会告诉 Google RESTORE_TRANSACTION（第 2 步），然后我将 APP_INITIALISED 设置为真（第 5 步）。

# git - 自动将 git repo 中的 markdown 文件发布到 webserver

> ID：11768355
> 
> 赞同：1
> 
> 时间：2012-08-01T22:13:45.623
> 
> 标签：git, markdown

我有一个 git 存储库，它有一个`docs`目录，我在其中保存标记文件，这些文件记录了我正在处理的事情（例如，我有一个名为`setup_git_server.mdown`）。我从我自己的运行 gitolite 的网络服务器推送和拉取存储库（和其他）。

我想要发生的是，每当我将提交推送到服务器时，它会自动将降价文件转换为 HTML 并将它们复制到服务器上的一个目录，Apache 可以在该目录中为它们提供服务。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:46:38.357

您需要在托管存储库的服务器上设置一个 git 挂钩。挂钩只会在安装它的机器上运行。钩子本身不是签入代码库的一部分。例如，您在本地计算机上的任何提交后挂钩都不会在服务器上推送或执行。检查我们的代码库的其他人不会得到你的钩子。

如果您希望服务器在收到推送时采取行动，您应该创建一个 post-receive 挂钩。挂钩可以是任何可执行文件。在您的情况下，您可能希望将您的存储库克隆到临时目录，提取降价文件，并将其发布到您的 Web 服务器。

我不确定 gitolite 是否相同，但在 gitosis 中，hooks 目录位于每个托管存储库的顶层。将您的 post-receive 挂钩放在该目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:42:43.120

在您的 .git 目录中查找名为“hooks”的子目录。您会在其中找到响应各种事件的示例 shell 脚本。选择一个，例如**post-commit**并调整它以更新您的文档。

查看[git hooks 以及它们是如何工作](https://stackoverflow.com/questions/1717278/git-hooks-and-how-they-work)的，或者只是谷歌“git hooks”

# android - 需要android和presenter的键码表

> ID：11768356
> 
> 赞同：20
> 
> 时间：2012-08-01T22:13:52.113
> 
> 标签：android, keyboard

有人可以将我指向数字形式的来自 getKeyCode() 的键代码列表，例如，如果我查找 72，我会看到“]”，如果我查找 24，我会看到“vol up”。

我一直在寻找一个小时，答案不是 ASCII 表。那太简单了...

我正在从我的鼠标演示者那里获取关键代码并试图拦截它们。有一个键可以输出 57 和 117，我无法拦截，我想在询问有关它的问题之前对其进行解码，但找不到参考。我认为 117 是班次，但我不知道 57 是什么。即使我拦截了演示者上的那个键，我也会把它带出我的应用程序。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-09T06:11:46.870

关键代码列表：

a - z-> 29 - 54

“0” - “9”-> 7 - 16

返回按钮 - 4，菜单按钮 - 82

上 19、下 20、左 21、右 22

选择（中间）按钮 - 23

空格 - 62，SHIFT - 59，回车 - 66，退格 - 67

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-07-08T00:38:12.320

#完整的关键代码列表

这里的其他一些列表不完整。完整列表可在`KeyEvent` [源代码](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/view/KeyEvent.java)或[文档](https://developer.android.com/reference/android/view/KeyEvent.html)中找到。源代码按整数值排序，所以我将在这里使用它。

*（为了节省篇幅，去掉了重复的文字，所有的关键代码都是`public static final int`。）*

```
/** Unknown key code. */
KEYCODE_UNKNOWN = 0;
/** Soft Left key.
 * Usually situated below the display on phones and used as a multi-function
 * feature key for selecting a software defined function shown on the bottom left
 * of the display. */
KEYCODE_SOFT_LEFT = 1;
/** Soft Right key.
 * Usually situated below the display on phones and used as a multi-function
 * feature key for selecting a software defined function shown on the bottom right
 * of the display. */
KEYCODE_SOFT_RIGHT = 2;
/** Home key.
 * This key is handled by the framework and is never delivered to applications. */
KEYCODE_HOME = 3;
/** Back key. */
KEYCODE_BACK = 4;
/** Call key. */
KEYCODE_CALL = 5;
/** End Call key. */
KEYCODE_ENDCALL = 6;
/** '0' key. */
KEYCODE_0 = 7;
/** '1' key. */
KEYCODE_1 = 8;
/** '2' key. */
KEYCODE_2 = 9;
/** '3' key. */
KEYCODE_3 = 10;
/** '4' key. */
KEYCODE_4 = 11;
/** '5' key. */
KEYCODE_5 = 12;
/** '6' key. */
KEYCODE_6 = 13;
/** '7' key. */
KEYCODE_7 = 14;
/** '8' key. */
KEYCODE_8 = 15;
/** '9' key. */
KEYCODE_9 = 16;
/** '*' key. */
KEYCODE_STAR = 17;
/** '#' key. */
KEYCODE_POUND = 18;
/** Directional Pad Up key.
 * May also be synthesized from trackball motions. */
KEYCODE_DPAD_UP = 19;
/** Directional Pad Down key.
 * May also be synthesized from trackball motions. */
KEYCODE_DPAD_DOWN = 20;
/** Directional Pad Left key.
 * May also be synthesized from trackball motions. */
KEYCODE_DPAD_LEFT = 21;
/** Directional Pad Right key.
 * May also be synthesized from trackball motions. */
KEYCODE_DPAD_RIGHT = 22;
/** Directional Pad Center key.
 * May also be synthesized from trackball motions. */
KEYCODE_DPAD_CENTER = 23;
/** Volume Up key.
 * Adjusts the speaker volume up. */
KEYCODE_VOLUME_UP = 24;
/** Volume Down key.
 * Adjusts the speaker volume down. */
KEYCODE_VOLUME_DOWN = 25;
/** Power key. */
KEYCODE_POWER = 26;
/** Camera key.
 * Used to launch a camera application or take pictures. */
KEYCODE_CAMERA = 27;
/** Clear key. */
KEYCODE_CLEAR = 28;
/** 'A' key. */
KEYCODE_A = 29;
/** 'B' key. */
KEYCODE_B = 30;
/** 'C' key. */
KEYCODE_C = 31;
/** 'D' key. */
KEYCODE_D = 32;
/** 'E' key. */
KEYCODE_E = 33;
/** 'F' key. */
KEYCODE_F = 34;
/** 'G' key. */
KEYCODE_G = 35;
/** 'H' key. */
KEYCODE_H = 36;
/** 'I' key. */
KEYCODE_I = 37;
/** 'J' key. */
KEYCODE_J = 38;
/** 'K' key. */
KEYCODE_K = 39;
/** 'L' key. */
KEYCODE_L = 40;
/** 'M' key. */
KEYCODE_M = 41;
/** 'N' key. */
KEYCODE_N = 42;
/** 'O' key. */
KEYCODE_O = 43;
/** 'P' key. */
KEYCODE_P = 44;
/** 'Q' key. */
KEYCODE_Q = 45;
/** 'R' key. */
KEYCODE_R = 46;
/** 'S' key. */
KEYCODE_S = 47;
/** 'T' key. */
KEYCODE_T = 48;
/** 'U' key. */
KEYCODE_U = 49;
/** 'V' key. */
KEYCODE_V = 50;
/** 'W' key. */
KEYCODE_W = 51;
/** 'X' key. */
KEYCODE_X = 52;
/** 'Y' key. */
KEYCODE_Y = 53;
/** 'Z' key. */
KEYCODE_Z = 54;
/** ',' key. */
KEYCODE_COMMA = 55;
/** '.' key. */
KEYCODE_PERIOD = 56;
/** Left Alt modifier key. */
KEYCODE_ALT_LEFT = 57;
/** Right Alt modifier key. */
KEYCODE_ALT_RIGHT = 58;
/** Left Shift modifier key. */
KEYCODE_SHIFT_LEFT = 59;
/** Right Shift modifier key. */
KEYCODE_SHIFT_RIGHT = 60;
/** Tab key. */
KEYCODE_TAB = 61;
/** Space key. */
KEYCODE_SPACE = 62;
/** Symbol modifier key.
 * Used to enter alternate symbols. */
KEYCODE_SYM = 63;
/** Explorer special function key.
 * Used to launch a browser application. */
KEYCODE_EXPLORER = 64;
/** Envelope special function key.
 * Used to launch a mail application. */
KEYCODE_ENVELOPE = 65;
/** Enter key. */
KEYCODE_ENTER = 66;
/** Backspace key.
 * Deletes characters before the insertion point, unlike {@link #KEYCODE_FORWARD_DEL}. */
KEYCODE_DEL = 67;
/** '`' (backtick) key. */
KEYCODE_GRAVE = 68;
/** '-'. */
KEYCODE_MINUS = 69;
/** '=' key. */
KEYCODE_EQUALS = 70;
/** '[' key. */
KEYCODE_LEFT_BRACKET = 71;
/** ']' key. */
KEYCODE_RIGHT_BRACKET = 72;
/** '\' key. */
KEYCODE_BACKSLASH = 73;
/** ';' key. */
KEYCODE_SEMICOLON = 74;
/** ''' (apostrophe) key. */
KEYCODE_APOSTROPHE = 75;
/** '/' key. */
KEYCODE_SLASH = 76;
/** '@' key. */
KEYCODE_AT = 77;
/** Number modifier key.
 * Used to enter numeric symbols.
 * This key is not Num Lock; it is more like {@link #KEYCODE_ALT_LEFT} and is
 * interpreted as an ALT key by {@link android.text.method.MetaKeyKeyListener}. */
KEYCODE_NUM = 78;
/** Headset Hook key.
 * Used to hang up calls and stop media. */
KEYCODE_HEADSETHOOK = 79;
/** Camera Focus key.
 * Used to focus the camera. */
KEYCODE_FOCUS = 80; // *Camera* focus
/** '+' key. */
KEYCODE_PLUS = 81;
/** Menu key. */
KEYCODE_MENU = 82;
/** Notification key. */
KEYCODE_NOTIFICATION = 83;
/** Search key. */
KEYCODE_SEARCH = 84;
/** Play/Pause media key. */
KEYCODE_MEDIA_PLAY_PAUSE= 85;
/** Stop media key. */
KEYCODE_MEDIA_STOP = 86;
/** Play Next media key. */
KEYCODE_MEDIA_NEXT = 87;
/** Play Previous media key. */
KEYCODE_MEDIA_PREVIOUS = 88;
/** Rewind media key. */
KEYCODE_MEDIA_REWIND = 89;
/** Fast Forward media key. */
KEYCODE_MEDIA_FAST_FORWARD = 90;
/** Mute key.
 * Mutes the microphone, unlike {@link #KEYCODE_VOLUME_MUTE}. */
KEYCODE_MUTE = 91;
/** Page Up key. */
KEYCODE_PAGE_UP = 92;
/** Page Down key. */
KEYCODE_PAGE_DOWN = 93;
/** Picture Symbols modifier key.
 * Used to switch symbol sets (Emoji, Kao-moji). */
KEYCODE_PICTSYMBOLS = 94; // switch symbol-sets (Emoji,Kao-moji)
/** Switch Charset modifier key.
 * Used to switch character sets (Kanji, Katakana). */
KEYCODE_SWITCH_CHARSET = 95; // switch char-sets (Kanji,Katakana)
/** A Button key.
 * On a game controller, the A button should be either the button labeled A
 * or the first button on the bottom row of controller buttons. */
KEYCODE_BUTTON_A = 96;
/** B Button key.
 * On a game controller, the B button should be either the button labeled B
 * or the second button on the bottom row of controller buttons. */
KEYCODE_BUTTON_B = 97;
/** C Button key.
 * On a game controller, the C button should be either the button labeled C
 * or the third button on the bottom row of controller buttons. */
KEYCODE_BUTTON_C = 98;
/** X Button key.
 * On a game controller, the X button should be either the button labeled X
 * or the first button on the upper row of controller buttons. */
KEYCODE_BUTTON_X = 99;
/** Y Button key.
 * On a game controller, the Y button should be either the button labeled Y
 * or the second button on the upper row of controller buttons. */
KEYCODE_BUTTON_Y = 100;
/** Z Button key.
 * On a game controller, the Z button should be either the button labeled Z
 * or the third button on the upper row of controller buttons. */
KEYCODE_BUTTON_Z = 101;
/** L1 Button key.
 * On a game controller, the L1 button should be either the button labeled L1 (or L)
 * or the top left trigger button. */
KEYCODE_BUTTON_L1 = 102;
/** R1 Button key.
 * On a game controller, the R1 button should be either the button labeled R1 (or R)
 * or the top right trigger button. */
KEYCODE_BUTTON_R1 = 103;
/** L2 Button key.
 * On a game controller, the L2 button should be either the button labeled L2
 * or the bottom left trigger button. */
KEYCODE_BUTTON_L2 = 104;
/** R2 Button key.
 * On a game controller, the R2 button should be either the button labeled R2
 * or the bottom right trigger button. */
KEYCODE_BUTTON_R2 = 105;
/** Left Thumb Button key.
 * On a game controller, the left thumb button indicates that the left (or only)
 * joystick is pressed. */
KEYCODE_BUTTON_THUMBL = 106;
/** Right Thumb Button key.
 * On a game controller, the right thumb button indicates that the right
 * joystick is pressed. */
KEYCODE_BUTTON_THUMBR = 107;
/** Start Button key.
 * On a game controller, the button labeled Start. */
KEYCODE_BUTTON_START = 108;
/** Select Button key.
 * On a game controller, the button labeled Select. */
KEYCODE_BUTTON_SELECT = 109;
/** Mode Button key.
 * On a game controller, the button labeled Mode. */
KEYCODE_BUTTON_MODE = 110;
/** Escape key. */
KEYCODE_ESCAPE = 111;
/** Forward Delete key.
 * Deletes characters ahead of the insertion point, unlike {@link #KEYCODE_DEL}. */
KEYCODE_FORWARD_DEL = 112;
/** Left Control modifier key. */
KEYCODE_CTRL_LEFT = 113;
/** Right Control modifier key. */
KEYCODE_CTRL_RIGHT = 114;
/** Caps Lock key. */
KEYCODE_CAPS_LOCK = 115;
/** Scroll Lock key. */
KEYCODE_SCROLL_LOCK = 116;
/** Left Meta modifier key. */
KEYCODE_META_LEFT = 117;
/** Right Meta modifier key. */
KEYCODE_META_RIGHT = 118;
/** Function modifier key. */
KEYCODE_FUNCTION = 119;
/** System Request / Print Screen key. */
KEYCODE_SYSRQ = 120;
/** Break / Pause key. */
KEYCODE_BREAK = 121;
/** Home Movement key.
 * Used for scrolling or moving the cursor around to the start of a line
 * or to the top of a list. */
KEYCODE_MOVE_HOME = 122;
/** End Movement key.
 * Used for scrolling or moving the cursor around to the end of a line
 * or to the bottom of a list. */
KEYCODE_MOVE_END = 123;
/** Insert key.
 * Toggles insert / overwrite edit mode. */
KEYCODE_INSERT = 124;
/** Forward key.
 * Navigates forward in the history stack. Complement of {@link #KEYCODE_BACK}. */
KEYCODE_FORWARD = 125;
/** Play media key. */
KEYCODE_MEDIA_PLAY = 126;
/** Pause media key. */
KEYCODE_MEDIA_PAUSE = 127;
/** Close media key.
 * May be used to close a CD tray, for example. */
KEYCODE_MEDIA_CLOSE = 128;
/** Eject media key.
 * May be used to eject a CD tray, for example. */
KEYCODE_MEDIA_EJECT = 129;
/** Record media key. */
KEYCODE_MEDIA_RECORD = 130;
/** F1 key. */
KEYCODE_F1 = 131;
/** F2 key. */
KEYCODE_F2 = 132;
/** F3 key. */
KEYCODE_F3 = 133;
/** F4 key. */
KEYCODE_F4 = 134;
/** F5 key. */
KEYCODE_F5 = 135;
/** F6 key. */
KEYCODE_F6 = 136;
/** F7 key. */
KEYCODE_F7 = 137;
/** F8 key. */
KEYCODE_F8 = 138;
/** F9 key. */
KEYCODE_F9 = 139;
/** F10 key. */
KEYCODE_F10 = 140;
/** F11 key. */
KEYCODE_F11 = 141;
/** F12 key. */
KEYCODE_F12 = 142;
/** Num Lock key.
 * This is the Num Lock key; it is different from {@link #KEYCODE_NUM}.
 * This key alters the behavior of other keys on the numeric keypad. */
KEYCODE_NUM_LOCK = 143;
/** Numeric keypad '0' key. */
KEYCODE_NUMPAD_0 = 144;
/** Numeric keypad '1' key. */
KEYCODE_NUMPAD_1 = 145;
/** Numeric keypad '2' key. */
KEYCODE_NUMPAD_2 = 146;
/** Numeric keypad '3' key. */
KEYCODE_NUMPAD_3 = 147;
/** Numeric keypad '4' key. */
KEYCODE_NUMPAD_4 = 148;
/** Numeric keypad '5' key. */
KEYCODE_NUMPAD_5 = 149;
/** Numeric keypad '6' key. */
KEYCODE_NUMPAD_6 = 150;
/** Numeric keypad '7' key. */
KEYCODE_NUMPAD_7 = 151;
/** Numeric keypad '8' key. */
KEYCODE_NUMPAD_8 = 152;
/** Numeric keypad '9' key. */
KEYCODE_NUMPAD_9 = 153;
/** Numeric keypad '/' key (for division). */
KEYCODE_NUMPAD_DIVIDE = 154;
/** Numeric keypad '*' key (for multiplication). */
KEYCODE_NUMPAD_MULTIPLY = 155;
/** Numeric keypad '-' key (for subtraction). */
KEYCODE_NUMPAD_SUBTRACT = 156;
/** Numeric keypad '+' key (for addition). */
KEYCODE_NUMPAD_ADD = 157;
/** Numeric keypad '.' key (for decimals or digit grouping). */
KEYCODE_NUMPAD_DOT = 158;
/** Numeric keypad ',' key (for decimals or digit grouping). */
KEYCODE_NUMPAD_COMMA = 159;
/** Numeric keypad Enter key. */
KEYCODE_NUMPAD_ENTER = 160;
/** Numeric keypad '=' key. */
KEYCODE_NUMPAD_EQUALS = 161;
/** Numeric keypad '(' key. */
KEYCODE_NUMPAD_LEFT_PAREN = 162;
/** Numeric keypad ')' key. */
KEYCODE_NUMPAD_RIGHT_PAREN = 163;
/** Volume Mute key.
 * Mutes the speaker, unlike {@link #KEYCODE_MUTE}.
 * This key should normally be implemented as a toggle such that the first press
 * mutes the speaker and the second press restores the original volume. */
KEYCODE_VOLUME_MUTE = 164;
/** Info key.
 * Common on TV remotes to show additional information related to what is
 * currently being viewed. */
KEYCODE_INFO = 165;
/** Channel up key.
 * On TV remotes, increments the television channel. */
KEYCODE_CHANNEL_UP = 166;
/** Channel down key.
 * On TV remotes, decrements the television channel. */
KEYCODE_CHANNEL_DOWN = 167;
/** Zoom in key. */
KEYCODE_ZOOM_IN = 168;
/** Zoom out key. */
KEYCODE_ZOOM_OUT = 169;
/** TV key.
 * On TV remotes, switches to viewing live TV. */
KEYCODE_TV = 170;
/** Window key.
 * On TV remotes, toggles picture-in-picture mode or other windowing functions. */
KEYCODE_WINDOW = 171;
/** Guide key.
 * On TV remotes, shows a programming guide. */
KEYCODE_GUIDE = 172;
/** DVR key.
 * On some TV remotes, switches to a DVR mode for recorded shows. */
KEYCODE_DVR = 173;
/** Bookmark key.
 * On some TV remotes, bookmarks content or web pages. */
KEYCODE_BOOKMARK = 174;
/** Toggle captions key.
 * Switches the mode for closed-captioning text, for example during television shows. */
KEYCODE_CAPTIONS = 175;
/** Settings key.
 * Starts the system settings activity. */
KEYCODE_SETTINGS = 176;
/** TV power key.
 * On TV remotes, toggles the power on a television screen. */
KEYCODE_TV_POWER = 177;
/** TV input key.
 * On TV remotes, switches the input on a television screen. */
KEYCODE_TV_INPUT = 178;
/** Set-top-box power key.
 * On TV remotes, toggles the power on an external Set-top-box. */
KEYCODE_STB_POWER = 179;
/** Set-top-box input key.
 * On TV remotes, switches the input mode on an external Set-top-box. */
KEYCODE_STB_INPUT = 180;
/** A/V Receiver power key.
 * On TV remotes, toggles the power on an external A/V Receiver. */
KEYCODE_AVR_POWER = 181;
/** A/V Receiver input key.
 * On TV remotes, switches the input mode on an external A/V Receiver. */
KEYCODE_AVR_INPUT = 182;
/** Red "programmable" key.
 * On TV remotes, acts as a contextual/programmable key. */
KEYCODE_PROG_RED = 183;
/** Green "programmable" key.
 * On TV remotes, actsas a contextual/programmable key. */
KEYCODE_PROG_GREEN = 184;
/** Yellow "programmable" key.
 * On TV remotes, acts as a contextual/programmable key. */
KEYCODE_PROG_YELLOW = 185;
/** Blue "programmable" key.
 * On TV remotes, acts as a contextual/programmable key. */
KEYCODE_PROG_BLUE = 186;
/** App switch key.
 * Should bring up the application switcher dialog. */
KEYCODE_APP_SWITCH = 187;
/** Generic Game Pad Button #1.*/
KEYCODE_BUTTON_1 = 188;
/** Generic Game Pad Button #2.*/
KEYCODE_BUTTON_2 = 189;
/** Generic Game Pad Button #3.*/
KEYCODE_BUTTON_3 = 190;
/** Generic Game Pad Button #4.*/
KEYCODE_BUTTON_4 = 191;
/** Generic Game Pad Button #5.*/
KEYCODE_BUTTON_5 = 192;
/** Generic Game Pad Button #6.*/
KEYCODE_BUTTON_6 = 193;
/** Generic Game Pad Button #7.*/
KEYCODE_BUTTON_7 = 194;
/** Generic Game Pad Button #8.*/
KEYCODE_BUTTON_8 = 195;
/** Generic Game Pad Button #9.*/
KEYCODE_BUTTON_9 = 196;
/** Generic Game Pad Button #10.*/
KEYCODE_BUTTON_10 = 197;
/** Generic Game Pad Button #11.*/
KEYCODE_BUTTON_11 = 198;
/** Generic Game Pad Button #12.*/
KEYCODE_BUTTON_12 = 199;
/** Generic Game Pad Button #13.*/
KEYCODE_BUTTON_13 = 200;
/** Generic Game Pad Button #14.*/
KEYCODE_BUTTON_14 = 201;
/** Generic Game Pad Button #15.*/
KEYCODE_BUTTON_15 = 202;
/** Generic Game Pad Button #16.*/
KEYCODE_BUTTON_16 = 203;
/** Language Switch key.
 * Toggles the current input language such as switching between English and Japanese on
 * a QWERTY keyboard. On some devices, the same function may be performed by
 * pressing Shift+Spacebar. */
KEYCODE_LANGUAGE_SWITCH = 204;
/** Manner Mode key.
 * Toggles silent or vibrate mode on and off to make the device behave more politely
 * in certain settings such as on a crowded train. On some devices, the key may only
 * operate when long-pressed. */
KEYCODE_MANNER_MODE = 205;
/** 3D Mode key.
 * Toggles the display between 2D and 3D mode. */
KEYCODE_3D_MODE = 206;
/** Contacts special function key.
 * Used to launch an address book application. */
KEYCODE_CONTACTS = 207;
/** Calendar special function key.
 * Used to launch a calendar application. */
KEYCODE_CALENDAR = 208;
/** Music special function key.
 * Used to launch a music player application. */
KEYCODE_MUSIC = 209;
/** Calculator special function key.
 * Used to launch a calculator application. */
KEYCODE_CALCULATOR = 210;
/** Japanese full-width / half-width key. */
KEYCODE_ZENKAKU_HANKAKU = 211;
/** Japanese alphanumeric key. */
KEYCODE_EISU = 212;
/** Japanese non-conversion key. */
KEYCODE_MUHENKAN = 213;
/** Japanese conversion key. */
KEYCODE_HENKAN = 214;
/** Japanese katakana / hiragana key. */
KEYCODE_KATAKANA_HIRAGANA = 215;
/** Japanese Yen key. */
KEYCODE_YEN = 216;
/** Japanese Ro key. */
KEYCODE_RO = 217;
/** Japanese kana key. */
KEYCODE_KANA = 218;
/** Assist key.
 * Launches the global assist activity. Not delivered to applications. */
KEYCODE_ASSIST = 219;
/** Brightness Down key.
 * Adjusts the screen brightness down. */
KEYCODE_BRIGHTNESS_DOWN = 220;
/** Brightness Up key.
 * Adjusts the screen brightness up. */
KEYCODE_BRIGHTNESS_UP = 221;
/** Audio Track key.
 * Switches the audio tracks. */
KEYCODE_MEDIA_AUDIO_TRACK = 222;
/** Sleep key.
 * Puts the device to sleep. Behaves somewhat like {@link #KEYCODE_POWER} but it
 * has no effect if the device is already asleep. */
KEYCODE_SLEEP = 223;
/** Wakeup key.
 * Wakes up the device. Behaves somewhat like {@link #KEYCODE_POWER} but it
 * has no effect if the device is already awake. */
KEYCODE_WAKEUP = 224;
/** Pairing key.
 * Initiates peripheral pairing mode. Useful for pairing remote control
 * devices or game controllers, especially if no other input mode is
 * available. */
KEYCODE_PAIRING = 225;
/** Media Top Menu key.
 * Goes to the top of media menu. */
KEYCODE_MEDIA_TOP_MENU = 226;
/** '11' key. */
KEYCODE_11 = 227;
/** '12' key. */
KEYCODE_12 = 228;
/** Last Channel key.
 * Goes to the last viewed channel. */
KEYCODE_LAST_CHANNEL = 229;
/** TV data service key.
 * Displays data services like weather, sports. */
KEYCODE_TV_DATA_SERVICE = 230;
/** Voice Assist key.
 * Launches the global voice assist activity. Not delivered to applications. */
KEYCODE_VOICE_ASSIST = 231;
/** Radio key.
 * Toggles TV service / Radio service. */
KEYCODE_TV_RADIO_SERVICE = 232;
/** Teletext key.
 * Displays Teletext service. */
KEYCODE_TV_TELETEXT = 233;
/** Number entry key.
 * Initiates to enter multi-digit channel nubmber when each digit key is assigned
 * for selecting separate channel. Corresponds to Number Entry Mode (0x1D) of CEC
 * User Control Code. */
KEYCODE_TV_NUMBER_ENTRY = 234;
/** Analog Terrestrial key.
 * Switches to analog terrestrial broadcast service. */
KEYCODE_TV_TERRESTRIAL_ANALOG = 235;
/** Digital Terrestrial key.
 * Switches to digital terrestrial broadcast service. */
KEYCODE_TV_TERRESTRIAL_DIGITAL = 236;
/** Satellite key.
 * Switches to digital satellite broadcast service. */
KEYCODE_TV_SATELLITE = 237;
/** BS key.
 * Switches to BS digital satellite broadcasting service available in Japan. */
KEYCODE_TV_SATELLITE_BS = 238;
/** CS key.
 * Switches to CS digital satellite broadcasting service available in Japan. */
KEYCODE_TV_SATELLITE_CS = 239;
/** BS/CS key.
 * Toggles between BS and CS digital satellite services. */
KEYCODE_TV_SATELLITE_SERVICE = 240;
/** Toggle Network key.
 * Toggles selecting broacast services. */
KEYCODE_TV_NETWORK = 241;
/** Antenna/Cable key.
 * Toggles broadcast input source between antenna and cable. */
KEYCODE_TV_ANTENNA_CABLE = 242;
/** HDMI #1 key.
 * Switches to HDMI input #1\. */
KEYCODE_TV_INPUT_HDMI_1 = 243;
/** HDMI #2 key.
 * Switches to HDMI input #2\. */
KEYCODE_TV_INPUT_HDMI_2 = 244;
/** HDMI #3 key.
 * Switches to HDMI input #3\. */
KEYCODE_TV_INPUT_HDMI_3 = 245;
/** HDMI #4 key.
 * Switches to HDMI input #4\. */
KEYCODE_TV_INPUT_HDMI_4 = 246;
/** Composite #1 key.
 * Switches to composite video input #1\. */
KEYCODE_TV_INPUT_COMPOSITE_1 = 247;
/** Composite #2 key.
 * Switches to composite video input #2\. */
KEYCODE_TV_INPUT_COMPOSITE_2 = 248;
/** Component #1 key.
 * Switches to component video input #1\. */
KEYCODE_TV_INPUT_COMPONENT_1 = 249;
/** Component #2 key.
 * Switches to component video input #2\. */
KEYCODE_TV_INPUT_COMPONENT_2 = 250;
/** VGA #1 key.
 * Switches to VGA (analog RGB) input #1\. */
KEYCODE_TV_INPUT_VGA_1 = 251;
/** Audio description key.
 * Toggles audio description off / on. */
KEYCODE_TV_AUDIO_DESCRIPTION = 252;
/** Audio description mixing volume up key.
 * Louden audio description volume as compared with normal audio volume. */
KEYCODE_TV_AUDIO_DESCRIPTION_MIX_UP = 253;
/** Audio description mixing volume down key.
 * Lessen audio description volume as compared with normal audio volume. */
KEYCODE_TV_AUDIO_DESCRIPTION_MIX_DOWN = 254;
/** Zoom mode key.
 * Changes Zoom mode (Normal, Full, Zoom, Wide-zoom, etc.) */
KEYCODE_TV_ZOOM_MODE = 255;
/** Contents menu key.
 * Goes to the title list. Corresponds to Contents Menu (0x0B) of CEC User Control
 * Code */
KEYCODE_TV_CONTENTS_MENU = 256;
/** Media context menu key.
 * Goes to the context menu of media contents. Corresponds to Media Context-sensitive
 * Menu (0x11) of CEC User Control Code. */
KEYCODE_TV_MEDIA_CONTEXT_MENU = 257;
/** Timer programming key.
 * Goes to the timer recording menu. Corresponds to Timer Programming (0x54) of
 * CEC User Control Code. */
KEYCODE_TV_TIMER_PROGRAMMING = 258;
/** Help key. */
KEYCODE_HELP = 259;
/** Navigate to previous key.
 * Goes backward by one item in an ordered collection of items. */
KEYCODE_NAVIGATE_PREVIOUS = 260;
/** Navigate to next key.
 * Advances to the next item in an ordered collection of items. */
KEYCODE_NAVIGATE_NEXT = 261;
/** Navigate in key.
 * Activates the item that currently has focus or expands to the next level of a navigation
 * hierarchy. */
KEYCODE_NAVIGATE_IN = 262;
/** Navigate out key.
 * Backs out one level of a navigation hierarchy or collapses the item that currently has
 * focus. */
KEYCODE_NAVIGATE_OUT = 263;
/** Primary stem key for Wear
 * Main power/reset button on watch. */
KEYCODE_STEM_PRIMARY = 264;
/** Generic stem key 1 for Wear */
KEYCODE_STEM_1 = 265;
/** Generic stem key 2 for Wear */
KEYCODE_STEM_2 = 266;
/** Generic stem key 3 for Wear */
KEYCODE_STEM_3 = 267;
/** Directional Pad Up-Left */
KEYCODE_DPAD_UP_LEFT = 268;
/** Directional Pad Down-Left */
KEYCODE_DPAD_DOWN_LEFT = 269;
/** Directional Pad Up-Right */
KEYCODE_DPAD_UP_RIGHT = 270;
/** Directional Pad Down-Right */
KEYCODE_DPAD_DOWN_RIGHT = 271;
/** Skip forward media key. */
KEYCODE_MEDIA_SKIP_FORWARD = 272;
/** Skip backward media key. */
KEYCODE_MEDIA_SKIP_BACKWARD = 273;
/** Step forward media key.
 * Steps media forward, one frame at a time. */
KEYCODE_MEDIA_STEP_FORWARD = 274;
/** Step backward media key.
 * Steps media backward, one frame at a time. */
KEYCODE_MEDIA_STEP_BACKWARD = 275;
/** put device to sleep unless a wakelock is held. */
KEYCODE_SOFT_SLEEP = 276;
/** Cut key. */
KEYCODE_CUT = 277;
/** Copy key. */
KEYCODE_COPY = 278;
/** Paste key. */
KEYCODE_PASTE = 279;
/** Consumed by the system for navigation up */
KEYCODE_SYSTEM_NAVIGATION_UP = 280;
/** Consumed by the system for navigation down */
KEYCODE_SYSTEM_NAVIGATION_DOWN = 281;
/** Consumed by the system for navigation left*/
KEYCODE_SYSTEM_NAVIGATION_LEFT = 282;
/** Consumed by the system for navigation right */
KEYCODE_SYSTEM_NAVIGATION_RIGHT = 283;

  /** Key code constant: Show all apps */
public static final int KEYCODE_ALL_APPS = 284;
/** Key code constant: Refresh key. */
public static final int KEYCODE_REFRESH = 285;
/** Key code constant: Thumbs up key. Apps can use this to let user upvote content. */
public static final int KEYCODE_THUMBS_UP = 286;
/** Key code constant: Thumbs down key. Apps can use this to let user downvote content. */
public static final int KEYCODE_THUMBS_DOWN = 287; 
```

＃＃＃笔记

*   目前最后一个关键代码是`KEYCODE_SYSTEM_NAVIGATION_RIGHT`283（但请检查[源代码](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/view/KeyEvent.java)以确保这仍然是正确的）。所以你可以像这样遍历它们：

    ```
     for (int keyCode = 0; keyCode <= 287; keyCode++) {

      } 
    ```

*   大多数`EditText`来自输入法编辑器 (IME) 的输入（或接受键盘输入的自定义视图）都是使用输入连接完成的，因此在这种情况下根本不会发送许多键代码。看到[这个答案](https://stackoverflow.com/a/44342915/3681880)。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-11-17T07:07:58.683

键盘（BT）命令可以通过命令提示符传递

打开命令提示符并编写“adb shell input keyevent **keycode** ”

例子：-

```
for "enter" write
adb shell input keyevent 23

up
adb shell input keyevent 19

down
adb shell input keyevent 20

left
adb shell input keyevent 21

right
adb shell input keyevent 22 
```

**键码**列表：

```
0 -->  "KEYCODE_0" 
1 -->  "KEYCODE_SOFT_LEFT" 
2 -->  "KEYCODE_SOFT_RIGHT" 
3 -->  "KEYCODE_HOME" 
4 -->  "KEYCODE_BACK" 
5 -->  "KEYCODE_CALL" 
6 -->  "KEYCODE_ENDCALL" 
7 -->  "KEYCODE_0" 
8 -->  "KEYCODE_1" 
9 -->  "KEYCODE_2" 
10 -->  "KEYCODE_3" 
11 -->  "KEYCODE_4" 
12 -->  "KEYCODE_5" 
13 -->  "KEYCODE_6" 
14 -->  "KEYCODE_7" 
15 -->  "KEYCODE_8" 
16 -->  "KEYCODE_9" 
17 -->  "KEYCODE_STAR" 
18 -->  "KEYCODE_POUND" 
19 -->  "KEYCODE_DPAD_UP" 
20 -->  "KEYCODE_DPAD_DOWN" 
21 -->  "KEYCODE_DPAD_LEFT" 
22 -->  "KEYCODE_DPAD_RIGHT" 
23 -->  "KEYCODE_DPAD_CENTER" 
24 -->  "KEYCODE_VOLUME_UP" 
25 -->  "KEYCODE_VOLUME_DOWN" 
26 -->  "KEYCODE_POWER" 
27 -->  "KEYCODE_CAMERA" 
28 -->  "KEYCODE_CLEAR" 
29 -->  "KEYCODE_A" 
30 -->  "KEYCODE_B" 
31 -->  "KEYCODE_C" 
32 -->  "KEYCODE_D" 
33 -->  "KEYCODE_E" 
34 -->  "KEYCODE_F" 
35 -->  "KEYCODE_G" 
36 -->  "KEYCODE_H" 
37 -->  "KEYCODE_I" 
38 -->  "KEYCODE_J" 
39 -->  "KEYCODE_K" 
40 -->  "KEYCODE_L" 
41 -->  "KEYCODE_M" 
42 -->  "KEYCODE_N" 
43 -->  "KEYCODE_O" 
44 -->  "KEYCODE_P" 
45 -->  "KEYCODE_Q" 
46 -->  "KEYCODE_R" 
47 -->  "KEYCODE_S" 
48 -->  "KEYCODE_T" 
49 -->  "KEYCODE_U" 
50 -->  "KEYCODE_V" 
51 -->  "KEYCODE_W" 
52 -->  "KEYCODE_X" 
53 -->  "KEYCODE_Y" 
54 -->  "KEYCODE_Z" 
55 -->  "KEYCODE_COMMA" 
56 -->  "KEYCODE_PERIOD" 
57 -->  "KEYCODE_ALT_LEFT" 
58 -->  "KEYCODE_ALT_RIGHT" 
59 -->  "KEYCODE_SHIFT_LEFT" 
60 -->  "KEYCODE_SHIFT_RIGHT" 
61 -->  "KEYCODE_TAB" 
62 -->  "KEYCODE_SPACE" 
63 -->  "KEYCODE_SYM" 
64 -->  "KEYCODE_EXPLORER" 
65 -->  "KEYCODE_ENVELOPE" 
66 -->  "KEYCODE_ENTER" 
67 -->  "KEYCODE_DEL" 
68 -->  "KEYCODE_GRAVE" 
69 -->  "KEYCODE_MINUS" 
70 -->  "KEYCODE_EQUALS" 
71 -->  "KEYCODE_LEFT_BRACKET" 
72 -->  "KEYCODE_RIGHT_BRACKET" 
73 -->  "KEYCODE_BACKSLASH" 
74 -->  "KEYCODE_SEMICOLON" 
75 -->  "KEYCODE_APOSTROPHE" 
76 -->  "KEYCODE_SLASH" 
77 -->  "KEYCODE_AT" 
78 -->  "KEYCODE_NUM" 
79 -->  "KEYCODE_HEADSETHOOK" 
80 -->  "KEYCODE_FOCUS" 
81 -->  "KEYCODE_PLUS" 
82 -->  "KEYCODE_MENU" 
83 -->  "KEYCODE_NOTIFICATION" 
84 -->  "KEYCODE_SEARCH" 
85 -->  "KEYCODE_MEDIA_PLAY_PAUSE"
86 -->  "KEYCODE_MEDIA_STOP"
87 -->  "KEYCODE_MEDIA_NEXT"
88 -->  "KEYCODE_MEDIA_PREVIOUS"
89 -->  "KEYCODE_MEDIA_REWIND"
90 -->  "KEYCODE_MEDIA_FAST_FORWARD"
91 -->  "KEYCODE_MUTE"
92 -->  "KEYCODE_PAGE_UP"
93 -->  "KEYCODE_PAGE_DOWN"
94 -->  "KEYCODE_PICTSYMBOLS"
...
122 -->  "KEYCODE_MOVE_HOME"
123 -->  "KEYCODE_MOVE_END" 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-05-27T07:08:51.653

向下滚动到“HID 键盘和小键盘页面”

这个页面确实有很多信息

[键盘设备代码表](https://source.android.com/devices/input/keyboard-devices.html#hid-keyboard-and-keypad-page-0x07)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-02T01:29:49.917

好的，我终于找到了。

[按键事件](http://developer.android.com/reference/android/view/KeyEvent.html) 本文档将音量提高为 24。我正在寻找的关键代码是 Alt-Menu，显然它会执行，无论是否拦截了按键。

感谢那些花时间回复的人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-04T14:51:19.543

我必须制作自己的 JSON 文件来循环 Android 设备的关键代码

```
{
    "UNKNOWN": "0",
    "SOFT_LEFT": "1",
    "SOFT_RIGHT": "2",
    "HOME": "3",
    "BACK": "4",
    "CALL": "5",
    "ENDCALL": "6",
    "0": "7",
    "1": "8",
    "2": "9",
    "3": "10",
    "4": "11",
    "5": "12",
    "6": "13",
    "7": "14",
    "8": "15",
    "9": "16",
    "STAR": "17",
    "POUND": "18",
    "DPAD_UP": "19",
    "DPAD_DOWN": "20",
    "DPAD_LEFT": "21",
    "DPAD_RIGHT": "22",
    "DPAD_CENTER": "23",
    "VOLUME_UP": "24",
    "VOLUME_DOWN": "25",
    "POWER": "26",
    "CAMERA": "27",
    "CLEAR": "28",
    "A": "29",
    "B": "30",
    "C": "31",
    "D": "32",
    "E": "33",
    "F": "34",
    "G": "35",
    "H": "36",
    "I": "37",
    "J": "38",
    "K": "39",
    "L": "40",
    "M": "41",
    "N": "42",
    "O": "43",
    "P": "44",
    "Q": "45",
    "R": "46",
    "S": "47",
    "T": "48",
    "U": "49",
    "V": "50",
    "W": "51",
    "X": "52",
    "Y": "53",
    "Z": "54",
    "COMMA": "55",
    "PERIOD": "56",
    "ALT_LEFT": "57",
    "ALT_RIGHT": "58",
    "SHIFT_LEFT": "59",
    "SHIFT_RIGHT": "60",
    "TAB": "61",
    "SPACE": "62",
    "SYM": "63",
    "EXPLORER": "64",
    "ENVELOPE": "65",
    "ENTER": "66",
    "DEL": "67",
    "GRAVE": "68",
    "MINUS": "69",
    "EQUALS": "70",
    "LEFT_BRACKET": "71",
    "RIGHT_BRACKET": "72",
    "BACKSLASH": "73",
    "SEMICOLON": "74",
    "APOSTROPHE": "75",
    "SLASH": "76",
    "AT": "77",
    "NUM": "78",
    "HEADSETHOOK": "79",
    "PLUS": "81",
    "MENU": "82",
    "NOTIFICATION": "83",
    "SEARCH": "84",
    "MEDIA_PLAY_PAUSE": "85",
    "MEDIA_STOP": "86",
    "MEDIA_NEXT": "87",
    "MEDIA_PREVIOUS": "88",
    "MEDIA_REWIND": "89",
    "MEDIA_FAST_FORWARD": "90",
    "MUTE": "91",
    "PAGE_UP": "92",
    "PAGE_DOWN": "93",
    "BUTTON_A": "96",
    "BUTTON_B": "97",
    "BUTTON_C": "98",
    "BUTTON_X": "99",
    "BUTTON_Y": "100",
    "BUTTON_Z": "101",
    "BUTTON_L1": "102",
    "BUTTON_R1": "103",
    "BUTTON_L2": "104",
    "BUTTON_R2": "105",
    "BUTTON_THUMBL": "106",
    "BUTTON_THUMBR": "107",
    "BUTTON_START": "108",
    "BUTTON_SELECT": "109",
    "BUTTON_MODE": "110",
    "ESCAPE": "111",
    "FORWARD_DEL": "112",
    "CTRL_LEFT": "113",
    "CTRL_RIGHT": "114",
    "CAPS_LOCK": "115",
    "SCROLL_LOCK": "116",
    "META_LEFT": "117",
    "META_RIGHT": "118",
    "FUNCTION": "119",
    "SYSRQ": "120",
    "BREAK": "121",
    "MOVE_HOME": "122",
    "MOVE_END": "123",
    "INSERT": "124",
    "FORWARD": "125",
    "MEDIA_PLAY": "126",
    "MEDIA_PAUSE": "127",
    "MEDIA_CLOSE": "128",
    "MEDIA_EJECT": "129",
    "MEDIA_RECORD": "130",
    "F1": "131",
    "F2": "132",
    "F3": "133",
    "F4": "134",
    "F5": "135",
    "F6": "136",
    "F7": "137",
    "F8": "138",
    "F9": "139",
    "F10": "140",
    "F11": "141",
    "F12": "142",
    "NUM_LOCK": "143",
    "NUMPAD_0": "144",
    "NUMPAD_1": "145",
    "NUMPAD_2": "146",
    "NUMPAD_3": "147",
    "NUMPAD_4": "148",
    "NUMPAD_5": "149",
    "NUMPAD_6": "150",
    "NUMPAD_7": "151",
    "NUMPAD_8": "152",
    "NUMPAD_9": "153",
    "NUMPAD_DIVIDE": "154",
    "NUMPAD_MULTIPLY": "155",
    "NUMPAD_SUBTRACT": "156",
    "NUMPAD_ADD": "157",
    "NUMPAD_DOT": "158",
    "NUMPAD_COMMA": "159",
    "NUMPAD_ENTER": "160",
    "NUMPAD_EQUALS": "161",
    "NUMPAD_LEFT_PAREN": "162",
    "NUMPAD_RIGHT_PAREN": "163",
    "VOLUME_MUTE": "164",
    "INFO": "165",
    "CHANNEL_UP": "166",
    "CHANNEL_DOWN": "167",
    "ZOOM_IN": "168",
    "ZOOM_OUT": "169",
    "TV": "170",
    "WINDOW": "171",
    "GUIDE": "172",
    "DVR": "173",
    "BOOKMARK": "174",
    "CAPTIONS": "175",
    "SETTINGS": "176",
    "TV_POWER": "177",
    "TV_INPUT": "178",
    "STB_POWER": "179",
    "STB_INPUT": "180",
    "AVR_POWER": "181",
    "AVR_INPUT": "182",
    "PROG_RED": "183",
    "PROG_GREEN": "184",
    "PROG_YELLOW": "185",
    "PROG_BLUE": "186",
    "APP_SWITCH": "187",
    "BUTTON_1": "188",
    "BUTTON_2": "189",
    "BUTTON_3": "190",
    "BUTTON_4": "191",
    "BUTTON_5": "192",
    "BUTTON_6": "193",
    "BUTTON_7": "194",
    "BUTTON_8": "195",
    "BUTTON_9": "196",
    "BUTTON_10": "197",
    "BUTTON_11": "198",
    "BUTTON_12": "199",
    "BUTTON_13": "200",
    "BUTTON_14": "201",
    "BUTTON_15": "202",
    "BUTTON_16": "203",
    "LANGUAGE_SWITCH": "204",
    "MANNER_MODE": "205",
    "3D_MODE": "206",
    "CONTACTS": "207",
    "CALENDAR": "208",
    "MUSIC": "209",
    "CALCULATOR": "210",
    "ZENKAKU_HANKAKU": "211",
    "EISU": "212",
    "MUHENKAN": "213",
    "HENKAN": "214",
    "KATAKANA_HIRAGANA": "215",
    "YEN": "216",
    "RO": "217",
    "KANA": "218",
    "ASSIST": "219",
    "BRIGHTNESS_DOWN": "220",
    "BRIGHTNESS_UP": "221",
    "MEDIA_AUDIO_TRACK": "222",
    "SLEEP": "223",
    "WAKEUP": "224",
    "PAIRING": "225",
    "MEDIA_TOP_MENU": "226",
    "11": "227",
    "12": "228",
    "LAST_CHANNEL": "229",
    "TV_DATA_SERVICE": "230",
    "VOICE_ASSIST": "231",
    "TV_RADIO_SERVICE": "232",
    "TV_TELETEXT": "233",
    "TV_NUMBER_ENTRY": "234",
    "TV_TERRESTRIAL_ANALOG": "235",
    "TV_TERRESTRIAL_DIGITAL": "236",
    "TV_SATELLITE": "237",
    "TV_SATELLITE_BS": "238",
    "TV_SATELLITE_CS": "239",
    "TV_SATELLITE_SERVICE": "240",
    "TV_NETWORK": "241",
    "TV_ANTENNA_CABLE": "242",
    "TV_INPUT_HDMI_1": "243",
    "TV_INPUT_HDMI_2": "244",
    "TV_INPUT_HDMI_3": "245",
    "TV_INPUT_HDMI_4": "246",
    "TV_INPUT_COMPOSITE_1": "247",
    "TV_INPUT_COMPOSITE_2": "248",
    "TV_INPUT_COMPONENT_1": "249",
    "TV_INPUT_COMPONENT_2": "250",
    "TV_INPUT_VGA_1": "251",
    "TV_AUDIO_DESCRIPTION": "252",
    "TV_AUDIO_DESCRIPTION_MIX_UP": "253",
    "TV_AUDIO_DESCRIPTION_MIX_DOWN": "254",
    "TV_ZOOM_MODE": "255",
    "TV_CONTENTS_MENU": "256",
    "TV_MEDIA_CONTEXT_MENU": "257",
    "TV_TIMER_PROGRAMMING": "258",
    "HELP": "259",
    "NAVIGATE_PREVIOUS": "260",
    "NAVIGATE_NEXT": "261",
    "NAVIGATE_IN": "262",
    "NAVIGATE_OUT": "263",
    "STEM_PRIMARY": "264",
    "STEM_1": "265",
    "STEM_2": "266",
    "STEM_3": "267",
    "DPAD_UP_LEFT": "268",
    "DPAD_DOWN_LEFT": "269",
    "DPAD_UP_RIGHT": "270",
    "DPAD_DOWN_RIGHT": "271",
    "MEDIA_SKIP_FORWARD": "272",
    "MEDIA_SKIP_BACKWARD": "273",
    "MEDIA_STEP_FORWARD": "274",
    "MEDIA_STEP_BACKWARD": "275",
    "SOFT_SLEEP": "276",
    "CUT": "277",
    "COPY": "278",
    "PASTE": "279",
    "SYSTEM_NAVIGATION_UP": "280",
    "SYSTEM_NAVIGATION_DOWN": "281",
    "SYSTEM_NAVIGATION_LEFT": "282",
    "SYSTEM_NAVIGATION_RIGHT": "283",
    "KEYCODE_ALL_APPS": "284",
    "KEYCODE_REFRESH": "285",
    "KEYCODE_THUMBS_UP": "286",
    "KEYCODE_THUMBS_DOWN": "287"
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-01T22:18:21.880

您可以在此处找到完整的关键代码列表和说明：[http ://code.google.com/p/androhid/wiki/Keycodes](http://code.google.com/p/androhid/wiki/Keycodes)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-14T16:16:31.910

这已经过时了，但如果有人用谷歌搜索这个，我有同样的问题并想通了。

如果您使用 KeyEvent Viewer，音量增大的代码为 24，但扫描代码为 115。

现在我的 USB 控制器只有 code=# 并且所有 scanCodes 都是 0。但是我的空中鼠标 (Mele F10) 有所有带有代码和扫描码的键，但是扫描码是你必须放在 .kl 文件中的内容。

希望这可以帮助那里的人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-01T23:21:03.420

实际的标准按键布局可在`/system/usr/keylayout/qwerty.kl`手机上运行的 Android 中找到。它也是一个通用的按键布局。

```
key 115   VOLUME_UP         WAKE
key 114   VOLUME_DOWN       WAKE 
```

从 AOSP 源代码可以在`sdk/emulator/keymaps/qwerty.kl`.

但请记住这一点，当源代码与设备特定的按键布局一起编译时，它将覆盖标准布局，因此里程将根据制造商在您的情况下为音量增大/减小按钮编程到键码中的内容而有所不同！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-07T05:36:53.253

此外，如果您安装了 NDK，您还可以在`${ndk_path}platforms\android-${api}\${architecture}\usr\include\android\keycodes.h`.

我之所以提到它，是因为我发现它比 KeyEvent 类或文档更易于导航和阅读。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-29T08:43:29.450

> 这是我的 JAVA 朋友的数组列表版本，基于 Shari Sharif 的 JSON 答案

> 由于堆栈溢出的 30000 个字符限制，无法完整粘贴

> 完整版：[https ://gist.github.com/omkar-tenkale/822bff6a19ad12a21bc2a2d24f6fc834](https://gist.github.com/omkar-tenkale/822bff6a19ad12a21bc2a2d24f6fc834)

```
public static ArrayList<ArrayList<String>> getKeyEvents() {
        return new ArrayList<ArrayList<String>>() {
            {
                add(new ArrayList<String>() {{
                    add("UNKNOWN");
                    add("0");
                }});
                add(new ArrayList<String>() {{
                    add("SOFT_LEFT");
                    add("1");
                }});
                add(new ArrayList<String>() {{
                    add("SOFT_RIGHT");
                    add("2");
                }});
                add(new ArrayList<String>() {{
                    add("HOME");
                    add("3");
                }});
                add(new ArrayList<String>() {{
                    add("BACK");
                    add("4");
                }});
                add(new ArrayList<String>() {{
                    add("CALL");
                    add("5");
                }});
                add(new ArrayList<String>() {{
                    add("ENDCALL");
                    add("6");
                }});
                add(new ArrayList<String>() {{
                    add("0");
                    add("7");
                }});
                add(new ArrayList<String>() {{
                    add("1");
                    add("8");
                }});
                add(new ArrayList<String>() {{
                    add("2");
                    add("9");
                }});
                add(new ArrayList<String>() {{
                    add("3");
                    add("10");
                }});
                add(new ArrayList<String>() {{
                    add("4");
                    add("11");
                }});
                add(new ArrayList<String>() {{
                    add("5");
                    add("12");
                }});
                add(new ArrayList<String>() {{
                    add("6");
                    add("13");
                }});
                add(new ArrayList<String>() {{
                    add("7");
                    add("14");
                }});
                add(new ArrayList<String>() {{
                    add("8");
                    add("15");
                }});
                add(new ArrayList<String>() {{
                    add("9");
                    add("16");
                }});
                add(new ArrayList<String>() {{
                    add("STAR");
                    add("17");
                }});
                add(new ArrayList<String>() {{
                    add("POUND");
                    add("18");
                }});
                add(new ArrayList<String>() {{
                    add("DPAD_UP");
                    add("19");
                }});
                add(new ArrayList<String>() {{
                    add("DPAD_DOWN");
                    add("20");
                }});
                add(new ArrayList<String>() {{
                    add("DPAD_LEFT");
                    add("21");
                }});
                add(new ArrayList<String>() {{
                    add("DPAD_RIGHT");
                    add("22");
                }});
                add(new ArrayList<String>() {{
                    add("DPAD_CENTER");
                    add("23");
                }});
                add(new ArrayList<String>() {{
                    add("VOLUME_UP");
                    add("24");
                }});
                add(new ArrayList<String>() {{
                    add("VOLUME_DOWN");
                    add("25");
                }});
                add(new ArrayList<String>() {{
                    add("POWER");
                    add("26");
                }});
                add(new ArrayList<String>() {{
                    add("CAMERA");
                    add("27");
                }});
                add(new ArrayList<String>() {{
                    add("CLEAR");
                    add("28");
                }});
                add(new ArrayList<String>() {{
                    add("A");
                    add("29");
                }});
                add(new ArrayList<String>() {{
                    add("B");
                    add("30");
                }});
                add(new ArrayList<String>() {{
                    add("C");
                    add("31");
                }});
                add(new ArrayList<String>() {{
                    add("D");
                    add("32");
                }});
                add(new ArrayList<String>() {{
                    add("E");
                    add("33");
                }});
                add(new ArrayList<String>() {{
                    add("F");
                    add("34");
                }});
                add(new ArrayList<String>() {{
                    add("G");
                    add("35");
                }});
                add(new ArrayList<String>() {{
                    add("H");
                    add("36");
                }});
                add(new ArrayList<String>() {{
                    add("I");
                    add("37");
                }});
                add(new ArrayList<String>() {{
                    add("J");
                    add("38");
                }});
                add(new ArrayList<String>() {{
                    add("K");
                    add("39");
                }});
                add(new ArrayList<String>() {{
                    add("L");
                    add("40");
                }});
                add(new ArrayList<String>() {{
                    add("M");
                    add("41");
                }});
                add(new ArrayList<String>() {{
                    add("N");
                    add("42");
                }});
                add(new ArrayList<String>() {{
                    add("O");
                    add("43");
                }});
                add(new ArrayList<String>() {{
                    add("P");
                    add("44");
                }});
                add(new ArrayList<String>() {{
                    add("Q");
                    add("45");
                }});
                add(new ArrayList<String>() {{
                    add("R");
                    add("46");
                }});
                add(new ArrayList<String>() {{
                    add("S");
                    add("47");
                }});
                add(new ArrayList<String>() {{
                    add("T");
                    add("48");
                }});
                add(new ArrayList<String>() {{
                    add("U");
                    add("49");
                }});
                add(new ArrayList<String>() {{
                    add("V");
                    add("50");
                }});
                add(new ArrayList<String>() {{
                    add("W");
                    add("51");
                }});
                add(new ArrayList<String>() {{
                    add("X");
                    add("52");
                }});
                add(new ArrayList<String>() {{
                    add("Y");
                    add("53");
                }});
                add(new ArrayList<String>() {{
                    add("Z");
                    add("54");
                }});
                add(new ArrayList<String>() {{
                    add("COMMA");
                    add("55");
                }});
                add(new ArrayList<String>() {{
                    add("PERIOD");
                    add("56");
                }});
                add(new ArrayList<String>() {{
                    add("ALT_LEFT");
                    add("57");
                }});
                add(new ArrayList<String>() {{
                    add("ALT_RIGHT");
                    add("58");
                }});
                add(new ArrayList<String>() {{
                    add("SHIFT_LEFT");
                    add("59");
                }});
                add(new ArrayList<String>() {{
                    add("SHIFT_RIGHT");
                    add("60");
                }});
                add(new ArrayList<String>() {{
                    add("TAB");
                    add("61");
                }});
                add(new ArrayList<String>() {{
                    add("SPACE");
                    add("62");
                }});
                add(new ArrayList<String>() {{
                    add("SYM");
                    add("63");
                }});
                add(new ArrayList<String>() {{
                    add("EXPLORER");
                    add("64");
                }});
                add(new ArrayList<String>() {{
                    add("ENVELOPE");
                    add("65");
                }});
                add(new ArrayList<String>() {{
                    add("ENTER");
                    add("66");
                }});
                add(new ArrayList<String>() {{
                    add("DEL");
                    add("67");
                }});
                add(new ArrayList<String>() {{
                    add("GRAVE");
                    add("68");
                }});
                add(new ArrayList<String>() {{
                    add("MINUS");
                    add("69");
                }});
                add(new ArrayList<String>() {{
                    add("EQUALS");
                    add("70");
                }});
                add(new ArrayList<String>() {{
                    add("LEFT_BRACKET");
                    add("71");
                }});
                add(new ArrayList<String>() {{
                    add("RIGHT_BRACKET");
                    add("72");
                }});
                add(new ArrayList<String>() {{
                    add("BACKSLASH");
                    add("73");
                }});
                add(new ArrayList<String>() {{
                    add("SEMICOLON");
                    add("74");
                }});
                add(new ArrayList<String>() {{
                    add("APOSTROPHE");
                    add("75");
                }});
                add(new ArrayList<String>() {{
                    add("SLASH");
                    add("76");
                }});
                add(new ArrayList<String>() {{
                    add("AT");
                    add("77");
                }});
                add(new ArrayList<String>() {{
                    add("NUM");
                    add("78");
                }});
                add(new ArrayList<String>() {{
                    add("HEADSETHOOK");
                    add("79");
                }});
                add(new ArrayList<String>() {{
                    add("PLUS");
                    add("81");
                }});
                add(new ArrayList<String>() {{
                    add("MENU");
                    add("82");
                }});
                add(new ArrayList<String>() {{
                    add("NOTIFICATION");
                    add("83");
                }});
                add(new ArrayList<String>() {{
                    add("SEARCH");
                    add("84");
                }});
                add(new ArrayList<String>() {{
                    add("MEDIA_PLAY_PAUSE");
                    add("85");
                }});
                add(new ArrayList<String>() {{
                    add("MEDIA_STOP");
                    add("86");
                }});
                add(new ArrayList<String>() {{
                    add("MEDIA_NEXT");
                    add("87");
                }});
                add(new ArrayList<String>() {{
                    add("MEDIA_PREVIOUS");
                    add("88");
                }});
                add(new ArrayList<String>() {{
                    add("MEDIA_REWIND");
                    add("89");
                }});
                add(new ArrayList<String>() {{
                    add("MEDIA_FAST_FORWARD");
                    add("90");
                }});
                add(new ArrayList<String>() {{
                    add("MUTE");
                    add("91");
                }});
                add(new ArrayList<String>() {{
                    add("PAGE_UP");
                    add("92");
                }});
                add(new ArrayList<String>() {{
                    add("PAGE_DOWN");
                    add("93");
                }});
                add(new ArrayList<String>() {{
                    add("BUTTON_A");
                    add("96");
                }});
                add(new ArrayList<String>() {{
                    add("BUTTON_B");
                    add("97");
                }});
                add(new ArrayList<String>() {{
                    add("BUTTON_C");
                    add("98");
                }});
                add(new ArrayList<String>() {{
                    add("BUTTON_X");
                    add("99");
                }});
                add(new ArrayList<String>() {{
                    add("BUTTON_Y");
                    add("100");
                }}); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-07-01T11:26:48.973

它们是 ASCII 解码代码。可以在[此处](http://www.theasciicode.com.ar/extended-ascii-code/pound-sign-symbol-pound-sterling-ascii-code-156.html)找到完整的表格。

# lotus-domino - Domino 服务器验证错误 - 奇怪

> ID：11768363
> 
> 赞同：0
> 
> 时间：2012-08-01T22:14:42.560
> 
> 标签：lotus-domino

当人们尝试登录时，我们会收到以下错误消息。

```
nHTTP: TlRMTVNTUAABAAAAB4IIogAAAAAAAAAAAAAAAAAAAAAFASgKAAAADw== [173.164.83.101] authentication failure using internet password 
```

任何想法为什么会发生这种情况以及为什么会阻止适当的登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:35:47.143

原来这是一个单点登录设置问题。我们修复了设置，一切正常。

# css - Safari 中的 SVG 缩放问题

> ID：11768364
> 
> 赞同：8
> 
> 时间：2012-08-01T22:15:13.370
> 
> 标签：css, safari, svg

Safari 中发生的奇怪问题。我将元素的背景设置为 SVG。这个 SVG 是在一个紧密的像素网格上绘制的，并且在大多数其他浏览器中都能完美显示，但由于某种原因，它在 Safari 中的缩放比例不正确。

这是我用来设置背景的 SASS：

```
@include background-size(100% 100%);
background: transparent image-url('icon-laptop.svg') no-repeat 0 0; 
```

...以及创建的CSS：

```
-webkit-background-size: 100% 100%;
-moz-background-size: 100% 100%;
-o-background-size: 100% 100%;
background-size: 100% 100%;
background: transparent url('../images/icon-laptop.svg?1343856741') no-repeat 0 0; 
```

*我尝试将背景大小设置为 99.9%，它有所帮助，但在每个*浏览器中都变得模糊。

以下是 Chrome 和 Safari 中的结果：

![在此处输入图像描述](../Images/4fcae65ded98df150c609ab4f777192a.png)

关于可能发生什么的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T15:04:13.937

好的，所以修复是添加`preserveAspectRatio="xMinYMin none"`到 SVG 元素。

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="35px" height="28px" viewBox="0 0 35 28" enable-background="new 0 0 35 28" xml:space="preserve" preserveAspectRatio="xMinYMin none"> 
```

# c# - 我可以为 System.Object 类型定义自己的构造函数吗？

> ID：11768365
> 
> 赞同：-2
> 
> 时间：2012-08-01T22:15:16.250
> 
> 标签：c#, .net, methods, code-injection

如何为 System.Object 类型定义我自己的构造函数，这样当任何`byref`类型被初始化时，它都会调用我的自定义构造函数？有没有办法做到这一点？

编辑：在我阅读了[http://msdn.microsoft.com/en-us/magazine/cc163791.aspx](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)的一部分之后，可能有办法做到这一点。是否可以只替换方法表中某处的方法指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:27:14.940

不可能覆盖一个类（或每个类）的构造函数。如果它不是密封的，您可以从特定类继承，并向该类的构造函数添加额外的逻辑。您也可以使用工厂方法。您可以查看的另一个选项是使用[Castle](http://www.castleproject.org/)或其他一些代理库。

# objective-c - Cocos2D - CCLabelTTF - 等待运行动作结束

> ID：11768369
> 
> 赞同：0
> 
> 时间：2012-08-01T22:15:42.140
> 
> 标签：objective-c, cocos2d-iphone

简单地说，在我开始新的游戏关卡之前，我会显示倒计时（使用 CCLabelTTF、Cocos2D）。

我有这个代码：

```
centerLevelLabel.string=@"New level";
centerLevelLabel.visible=true;
[centerLevelLabel runAction:[CCFadeOut actionWithDuration:1]];

while (centerLevelLabel.numberOfRunningActions>0) {

}

centerLevelLabel.string=@"3";
while (centerLevelLabel.numberOfRunningActions>0) {

}

centerLevelLabel.string=@"2";
while (centerLevelLabel.numberOfRunningActions>0) {

}

centerLevelLabel.string=@"1";
while (centerLevelLabel.numberOfRunningActions>0) {

} 
```

//下面的一些代码

我想显示这个标签，然后我需要继续下面的代码。问题是，UI 被冻结并且在第一个 while 块运行无限循环。但我不知道为什么，因为当运行动作完成时，numberOfRunningActions 为零。

还有其他方法吗，我怎么能等待运行动作结束然后继续？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:21:48.040

这将永远是一个无限循环：

```
while (centerLevelLabel.numberOfRunningActions > 0) 
{
} 
```

它类似于写作：

```
while (value > 0)
{
} 
```

在 while 循环运行期间，线程被阻塞。因此，不会运行其他代码来更新操作的数量，或者可能会更改 value 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:29:30.497

您可以使用 CCSequence 序列化操作，并添加 CCCallFuncN 以在原始操作完成后执行一些代码。

```
id action1 = [CCFadeOut actionWithDuration:1];
id action2 = [CCCallFuncN actionWithTarget:self selector:@selector(finishedRunning)];
id sequenceActions = [CCSequence actions:action1, action2, nil]];

[centerLevelLabel runAction:sequenceActions]; 
```

……

```
 -(void) finishedRunning {
      // Do stuff after action finishes
   } 
```

# javascript - 带有prev和next的jquery自定义循环插件

> ID：11768373
> 
> 赞同：3
> 
> 时间：2012-08-01T22:15:59.273
> 
> 标签：javascript, jquery

我正在尝试创建一个自定义 jquery 循环插件，它基本上`<li>`在单击时显示元素的内容。html如下：-

```
<ul class="ticker">
    <li>Boo1</li>
    <li>More boo1</li>
    <li>Even more boo</li>

    <a class="prev" href="#">previous</a>
    <a class="next" href="#">next</a>
</ul>​ 
```

所以当用户点击下一个按钮时，下一个`<li>`显示，当他点击上一个按钮时，上一个`<li>`显示。

实现这一点从来都不是一件容易的事:(我对jquery还是很陌生，所以请原谅。任何帮助家伙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:40:29.107

我认为这会解决你的问题，你可以在这里看到它工作[http://jsfiddle.net/KvscH/](http://jsfiddle.net/KvscH/)

```
<ul class="ticker">
    <li>Boo1</li>
    <li>More boo1</li>
    <li>Even more boo</li>
</ul>

<a class="prev" href="#">previous</a> -
<a class="next" href="#">next</a> 
```

JS：

```
var ticker = $('ul.ticker');
ticker.children(':first').show().siblings().hide();

setInterval(function() {
    ticker.find(':visible').fadeOut(function() {
        $(this).appendTo(ticker);
        ticker.children(':first').show();
    });
},50000); 

$('.next').live ('click', function () {
    ticker.find(':visible').fadeOut(function() {
        $(this).appendTo(ticker);
        ticker.children(':first').show();
    });
});

$('.prev').live ('click', function () {
    ticker.find(':visible').fadeOut(function() {
        ticker.find('li:last').insertBefore(ticker.find('li:first'));
        ticker.children(':first').show();
    });
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:47:35.610

在黑暗中猛烈抨击：

[演示](http://jsfiddle.net/9cYJr/1/)（我没有触摸上一个按钮，这取决于你）

代码（请注意，我留了一部分供您完成）：

```
var ticker = $('ul.ticker');
ticker.children(':first').show().siblings().hide();
startTicker();

$('.prev, .next').bind('click', function() {
    if($(this).attr('class') == 'prev') {
        clearInterval(myInterval);
        /// for previous
        /// do it
        /// yourself
    } else {
        clearInterval(myInterval);
        ticker.find(':visible').fadeOut(function() {
            $(this).appendTo(ticker);
            ticker.children(':first').show();
            startTicker();
        });
    }
});

var myInterval;
function startTicker() {
    myInterval = setInterval(function() {
        ticker.find(':visible').fadeOut(function() {
            $(this).appendTo(ticker);
            ticker.children(':first').show();
        });
    },2000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:42:17.660

好的，如果我对您的理解正确，这是一个潜在的解决方案：

首先，setInterval 是一个“后台函数”，因为它可以在您运行其他函数时在后台运行。您首先要做的是将您在 setInterval 方法中执行的操作移到它自己的函数中。然后，您将创建一个单击事件处理程序，在其中调用该函数。之后，您可以调用 setInterval 并且它将在您运行单击事件侦听器的同时运行。

如果您在点击侦听器触发时遇到任何间隔中断的问题，您还可以在点击侦听器中调用该函数后重新初始化间隔。

如果您需要任何进一步的帮助/解释，请告诉我。

祝你好运！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:21:50.113

删除 DOM 操作只是为了跟踪当前可见元素。

我认为它们是不必要的。我的 2 美分。

也使它像某人实际使用的东西。

HTML：

```
<div id='Test'>
    <ul class="ticker">
        <li>Boo1</li>
        <li>More boo1</li>
        <li>Even more boo</li>
    </ul>
    <a class="prev" href="#">previous</a>
    <a class="next" href="#">next</a>
</div> 
```

JS：

```
jQuery.fn.Custom_cycler = function(Options){
    var Options = jQuery.extend({'Next': 'a.next', 'Previous': 'a.prev', 'List': 'ul.ticker'},Options||{});
    var List = jQuery(Options.List, this);
    var Index = 0;
    var Size = List.children().size();

    List.children().hide().first().show();

    var Move = function(Event){
        Event.preventDefault();
        if(Event.data)
        {
            Index++;
        }
        else
        {
            Index--;
        }

        Index=(Index+Size)%Size;

        jQuery(List.children().hide().get(Index)).show();

    };

    jQuery(Options.Next, this).bind('click', true, Move);

    jQuery(Options.Previous, this).bind('click', false, Move);

    return(this);
}; 
```

你像这样使用它：

```
jQuery('div#Test').Custom_cycler(); 
```

编辑：在事件处理程序中使用 data 参数仅对两个事件使用一个函数，这允许我对 Index/Size 使用闭包而不是 jQuery(...).data。

还从闭包中删除了一些不必要的变量。

最后缩小了选择的上下文，以避免在调用函数时错误地操作外部 DOM 标签。它还执行得更快，因为 jQuery 不必查找整个 DOM。

可以通过仅在先前显示的元素而不是所有元素上调用 hide() 来进一步优化（很容易从 Index 的值推断）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T22:54:58.760

看看这个[***jsFiddle***](http://jsfiddle.net/sDAQc/7/)

**HTML**

```
<ul class="ticker">
    <li>Boo1</li>
    <li>More boo1</li>
    <li>Even more boo</li>

</ul>
<a class="prev" href="#">previous</a>
<a class="next" href="#">next</a>
​ 
```

**JS**

```
var ticker = $('ul.ticker');
ticker.children(':first').show().siblings().hide();

function cycleFunc(direction) {
    ticker.find(':visible').fadeOut(function() {
        (direction == 'forward') ? $(this).appendTo(ticker) : $(this).prependTo(ticker);
        ticker.children((direction == 'forward') ? ':first' : ':last').show();
    })
}

var timer = setInterval(function() {
    cycleFunc('forward');
}, 2000);

$('.next, .prev').click(function() {
    clearInterval(timer)
    var direction = ($(this).hasClass('next')) ? 'forward' : 'backward';
    timer = setInterval(function() {
        cycleFunc(direction);
    }, 2000)
});​ 
```

# ruby - Ruby system() 不接受 UTF-8？

> ID：11768374
> 
> 赞同：4
> 
> 时间：2012-08-01T22:16:00.663
> 
> 标签：ruby, unicode, utf-8

我在 Windows 中使用 Ruby 1.9.3 并尝试执行一个操作，我将文件名写入每行一个文件（我们将其称为文件列表），然后读取此文件列表，并调用 system() 运行另一个程序我将从文件列表中传递一个文件名。我用 system() 调用的那个程序将采用我传递给它的文件名并将其转换为二进制格式以在专有系统中使用。

在调用 system() 之前一切正常。我有一个 UTF-8 文件列表，从文件列表中读取文件名给了我正确的结果。但是当我跑步时

```
system("c:\foo.exe -arg #{bar}") 
```

传递的 arg“bar”不是 UTF-8 格式。如果我使用日语、中文或任何文件名手动运行程序，它可以正常工作并正确编码文件，但如果我使用 system() 执行它就不会。我知道 bar 中的变量已正确存储，因为我在其他地方使用它没有问题。

我也试过：

```
system("c:\foo.exe -arg #{bar.encoding("UTF-8")}")
system("c:\foo.exe -arg #{bar.force_encoding("UTF-8")}") 
```

也不工作。我只能假设这里的问题是将 unicode 传递给系统。

其他人可以确认系统是否确实支持或不支持这一点？

这是代码块：

```
 $fname.each do |file|
    flist.write("#{file}\n")  # This is written properly in UTF-8
    system("ia.exe -r \"#{file}\" -q xbfadd") # The file being passed here is not encoding right!
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:13:16.807

`system()`与大多数脚本语言中的函数一样，Ruby 的函数是 C 标准库`system()`调用的外层。MS C 运行时对所有面向字节的 C 标准库函数使用 Win32 ANSI API。

ANSI API 使用 Windows 系统语言环境（又名“ANSI 代码页”）在面向字节的字符串和用于文件名和 shell 命令的 Windows 原生 UTF16LE 字符串之间进行映射。不幸的是，无法将系统语言环境设置为 UTF-8；您可以在特定控制台上将代码页设置为 65001（Windows 相当于 UTF-8），但 MS CRT 在处理代码页 65001 时存在长期存在的错误，这会导致许多应用程序失败。

所以使用标准的跨平台、面向字节的 C 接口意味着你不能支持 Unicode 文件名或 shell 命令，这是相当可悲的。一些脚本语言通过显式调用 Win32 'W' (Unicode) API 而不是 C stdlib 接口来增加对 Unicode 文件名的支持。Ruby 1.9.x 在这方面正在取得进展，但`system()`还没有被关注。

[您可以通过自己调用 Win32 API](http://ruby-doc.org/stdlib-1.9.2/libdoc/dl/rdoc/Win32API.html)来修复它，例如[CreateProcessW](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)，但它并不是特别漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T16:14:36.283

我赞成 bobince 的回答；我相信它是正确的。

我唯一要补充的是，一个额外的解决方法，这是一个 Windows 问题，是将命令行写入批处理文件，然后使用 system() 调用批处理文件。

我使用这种方法成功地解决了这个问题，同时运行 Calibre 的 ebook-convert 命令行工具来处理标题中包含 UTF-8/非英语字符的书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T13:58:04.620

我认为 bobince 的答案是正确的，对我有用的解决方案是：

```
system("c:\foo.exe -arg #{bar.encoding("ISO-8859-1")}") 
```

# unit-testing - 使用 ProcessModuleLoadException 时对 dotnetnuke 模块进行单元测试

> ID：11768378
> 
> 赞同：2
> 
> 时间：2012-08-01T22:16:11.850
> 
> 标签：unit-testing, tdd, dotnetnuke

在 DNN 6.1 中开发模块时，我正在使用 WebFormsMvp、NUnit、NSubstitue 和 FluentAssertions 进行 TDD。

正如许多 DNN 相关资源中所建议的那样，我想将我的演示者代码包装在一个 try/catch 块中，该块调用 DNN 的 ProcessModuleLoadException 方法来记录错误并向用户显示友好的错误消息。

但是，如果我这样做，我将无法在单元测试中测试特定错误（例如，如果在没有某些查询字符串参数的情况下调用模块，我想测试是否会引发（自定义）“ExpectedQueryStringParameterNotPresent”错误），因为特定的我正在测试的异常被包装被测代码的 try/catch 块吞噬。

有没有办法利用 DNN 的全局错误处理，并且仍然对特定异常进行单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:54:17.353

这在 DNN 中与您要进行单元测试的任何其他项目没有什么不同，ProcessModuleLoadException 只是一个 void，它执行一些内部日志记录并显示引发的错误。

如果没有代码示例，听起来您是在 Page_Load 方法中编写所有代码。将单个函数提取到它们自己的方法中，这些方法不处理自己的异常（或抛出您的自定义异常）并对它们进行单元测试。

# neo4j - Neo4j 如何/哪个数据透视表组件工作

> ID：11768380
> 
> 赞同：0
> 
> 时间：2012-08-01T22:16:21.927
> 
> 标签：neo4j, pivot-table

需要关于使用 JavaFX GUI 使用数据透视表来表示 neo4j 数据源的方法/步骤的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:20:47.747

没有人为 JavaFX 编写过数据透视表。你可以自己写一个，但这不是微不足道的。

您可能最好使用现有的数据透视表实现，例如[JideSoft 的 Swing 数据透视表](http://www.jidesoft.com/products/pivot.htm)。

无论您使用哪个 UI 组件，您都可能需要编写自己的适配器来连接 neo4j 和 UI 组件。

如果您使用 JavaFX [TableView](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)作为数据透视表实现的基础，那么您可以为[jfxdata](http://www.javafxdata.org/)项目创建一个 neo4j 数据转换器，它允许您与数据透视表交互。

# javascript - 使用 ember.js 突出显示导航栏中的当前项目

> ID：11768384
> 
> 赞同：0
> 
> 时间：2012-08-01T22:16:35.770
> 
> 标签：javascript, ember.js

我试图在我的导航栏中突出显示当前项目。这是我的路由器：

```
App.Router = Em.Router.extend({
    enableLogging: true,
    location: 'hash',
    root: Em.Route.extend({
        // EVENTS
        gotoList: Ember.Route.transitionTo('list'),
        gotoAbout: Ember.Route.transitionTo('about'),
        // STATES
        list: Em.Route.extend({
            route: '/list',
            connectOutlets: function(router, context) {
                router.get('applicationController').connectOutlet('list');
            },
            enter: function(router) {
                $('.active').removeClass('active');
                $('.nav-pills li.list').addClass('active');
            }
        }),
        about: Em.Route.extend({
            route: '/about',
            connectOutlets: function(router, context) {
                router.get('applicationController').connectOutlet('about');
            },
            enter: function(router) {
                $('.active').removeClass('active');
                $('.nav-pills li.about').addClass('active');
            }
        })
    })
}); 
```

这是行不通的。
也许我使用了不正确的函数（`"enter"`）？
如何防止`"enter"`列表和关于状态的功能重复？

# java - 在 BB 上的位图上绘制位图

> ID：11768386
> 
> 赞同：0
> 
> 时间：2012-08-01T22:16:50.367
> 
> 标签：java, blackberry

我想在位图上绘制位图。我不知道我做错了什么，因为我希望这能起作用。有人可以指出我的错误吗？所以我想在bitmapImage上绘制bitmapImage2。我相信我的错在于 Graphics.create(bitmap)

```
 package mypackage;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.container.MainScreen;

public class BitmapFieldDemo extends UiApplication 
{
    public static void main(String[] args)
    {
        BitmapFieldDemo theApp = new BitmapFieldDemo(); 
        theApp.enterEventDispatcher(); 
    }

    public BitmapFieldDemo() 
    { 
        pushScreen(new BitmapFieldDemoScreen()); 
    } 
}

class BitmapFieldDemoScreen extends MainScreen
{
    Graphics g;
    Bitmap bitmapImage = Bitmap.getBitmapResource("red.png");
    Bitmap bitmapImage2 = Bitmap.getBitmapResource("background.png");

    public BitmapFieldDemoScreen ()
    {

        setTitle("Bitmap Field Demo");
        // image i want to draw on
        Graphics.create( bitmapImage );
        // bitmapfield
        BitmapField fieldDemo = new BitmapField(bitmapImage);             
        add(fieldDemo);

    }

    public void paint(){

        super.paint(g);
        // image that needs to be drawn on the bitmapImage
        g.drawBitmap(50, 50, bitmapImage2.getWidth(), bitmapImage2.getHeight(), bitmapImage2, 0, 0);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:24:24.263

您需要`Graphics`从 a 创建一个对象`Bitmap`，并且需要在您创建`Bitmap`的`Graphics`实例上绘制第二个。试试下面的代码。

```
class BitmapFieldDemoScreen extends MainScreen {    
    Bitmap bitmapRed = Bitmap.getBitmapResource("red.png");
    Bitmap bitmapBG = Bitmap.getBitmapResource("background.png");

    public BitmapFieldDemoScreen () {
        setTitle("Bitmap Field Demo");        

        // draw the bitmapRed on top of bitmapBG        
        Graphics grahpicsBg = Graphics.create(bitmapBG);
        grahpicsBg.drawBitmap(50, 50, bitmapRed.getWidth(), bitmapRed.getHeight(), bitmapRed, 0, 0);

        // now bitmapBg is changed        

        BitmapField fieldDemo = new BitmapField(bitmapBG);             
        add(fieldDemo);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:13:52.867

试试这个代码 -

```
 final Bitmap bitmapImage =Bitmap.getBitmapResource("red.png");
    VerticalFieldManager top = new VerticalFieldManager(Manager.NO_HORIZONTAL_SCROLL | Manager.NO_HORIZONTAL_SCROLLBAR | Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR | Field.USE_ALL_WIDTH){
        public void paint(Graphics graphics) {
            graphics.drawBitmap(0, 0, bitmapImage.getWidth(),
                    bitmapImage.getHeight(), bitmapImage, 0, 0);
            super.paint(graphics);
        }

    };

Bitmap bitmapImage2 = Bitmap.getBitmapResource("background.png");
top .add(new BitmapField(bitmapImage2));
add(top); 
```

# r - 在 for 循环中使用 ggplot2 的多个绘图

> ID：11768387
> 
> 赞同：4
> 
> 时间：2012-08-01T22:16:53.650
> 
> 标签：r, ggplot2

我查看了这些问题[(1)](https://stackoverflow.com/questions/3824412/ggplot2-use-options-for-multiple-plots)和[(2)](https://stackoverflow.com/questions/7452683/multiple-ggplots-in-for-loop)，但是，它们似乎与我的问题无关。

我正在尝试首先创建功能区（在 for 循环之外）并在 for 循环内添加一堆线图和点图。但是，最终图只包含最后一个 for 循环中的线/点，而不是全部。整个代码都在一个函数中，我想从函数中返回 ggplot(p, 在这种情况下) 对象，以便以后可以使用它。

```
hist_points_cols_val<-hist_points_cols(hist_points)
hist_points_labels_val<-hist_points_labels(hist_points)
p <- ggplot()+
geom_ribbon(aes(x = x_labels , ymin = Min , ymax = Max),data=t_out_summary,colour = '#ece9d8',fill = '#ff9999',alpha = 0.4)+
geom_ribbon(aes(x = x_labels , ymin = Qtr1 , ymax = Qtr3),data=t_out_summary,colour = '#ece9d8',fill = '#33ff99',alpha = 0.2)+
scale_x_discrete(name=scale_x, labels=plot_labels)+
scale_y_continuous(name=scale_y, labels = percent_format())+
geom_line(aes(x = x_labels,y = Median,colour="Median"),data=t_out_summary)+
geom_point(aes(x = x_labels,y = Median,colour="Median"),data=t_out_summary,shape=4)

print(hist_points_cols_val)
print(hist_points_labels_val)
for( i in 1: length(hist_points)){
p   <- p + geom_line(aes(x = x_labels,y = t_out_summary[[hist_points_cols_val[i]]],colour=hist_points_labels_val[i]),data=t_out_summary,linetype='dashed')+
    geom_point(aes(x = x_labels,y = t_out_summary[[hist_points_cols_val[i]]],colour=hist_points_labels_val[i]),data=t_out_summary,shape=4)      
}

p<-p+scale_colour_hue(name="Legend") 
```

数据如下所示：

```
`> str(t_out_summary)
'data.frame':   12 obs. of  11 variables:
 $ Min     : num  0.121 0.132 0.145 0.164 0.172 ...
 $ Qtr1    : num  0.154 0.165 0.174 0.191 0.2 ...
 $ Median  : num  0.184 0.195 0.203 0.218 0.225 ...
 $ Qtr3    : num  0.22 0.231 0.238 0.249 0.253 ...
 $ Max     : num  0.398 0.381 0.37 0.351 0.339 ...
 $ p_1D    : num  0.16 0.169 0.176 0.197 0.207 ...
 $ p_2D    : num  0.153 0.163 0.171 0.193 0.204 ...
 $ p_1W    : num  0.168 0.179 0.187 0.204 0.215 ...
 $ p_2W    : num  0.141 0.154 0.163 0.184 0.196 ...
 $ p_1M    : num  0.146 0.157 0.165 0.186 0.201 ...
 $ x_labels: int  1 2 3 4 5 6 7 8 9 10 ...` 
```

我正在使用最小、最大点来创建功能区，然后想添加 p_1D、p_2D 点和线。我不确定您所说的 ggplot2 图形的有利方式是什么意思？我正在使用 for 循环来覆盖不同的图。如果没有 for 循环，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:43:13.797

您没有提供可重现的示例，因此我将尝试解释我将尝试的内容：

将绘图保存到列表中，每个列表元素中的功能区都相同。然后遍历列表并添加不同的线和点。然后将图例名称添加到每个列表元素。

然后您可以从列表中访问这些图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:07:08.247

```
hist_summ<-melt(as.matrix(hist_summary))
geom_line(aes(x=Var2,y=value,colour = Var1,group=Var1),data=hist_summ) 
```

这解决了问题。

# php - 仅 IE 中的 cookie 问题

> ID：11768398
> 
> 赞同：0
> 
> 时间：2012-08-01T22:17:41.520
> 
> 标签：php, internet-explorer, cookies, cross-browser

我有这个用于创建 cookie 的代码

这适用于 firefox 和 crome 浏览器，但在 IE 中它会一次又一次地创建 cookie

```
if (!isset($_COOKIE["cook"])) {
    $expire = time() + 60 * 60 * 24 * 30 * 2;
    $data = array(
        "ip" => $_SERVER['REMOTE_ADDR'],
        "browser" => $_SERVER['HTTP_USER_AGENT'],
        "create_time" => $now
    );
    $result = $db->insert("cookies", $data);
    $cookie_id = $db->lastid;
    $cookie_id = my_encrypt($cookie_id);
    setcookie("cook", $cookie_id, $expire,"/","localhost");
} else {
    $cookie_id = $_COOKIE["cook"];
} 
```

每次我访问页面时，它都会创建新的 cookie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:49:31.330

省略`domain`- 参数`setcookie()`

# php - 使用 JavaScript 进行依赖注入 | 有用还是没用？

> ID：11768407
> 
> 赞同：0
> 
> 时间：2012-08-01T22:18:54.893
> 
> 标签：php, javascript, dependency-injection

我在 PHP 中使用依赖注入（标记为 bc 用作比较），因为这似乎是最佳实践。PHP 有更多面向 OO 编程的结构，但在 JavaScript 中使用 DI 以及解耦代码似乎也是可行的。

在我的实例中，它有点复杂，因为我的对象包含对象属性（函数对象），每个对象都有自己的依赖项。

这是有问题的代码，它具有我在顶级对象中创建的 3 个依赖项，但正在考虑注入。

当它们在单个对象 MC.MATweet 中用于不同的函数对象时，我究竟应该在哪里注入它们？

这 3 个对象是 SText、SMessage 和 SUniversals。

```
/**
 **  MATweet - Text, Universal, Message - Inject?
 */

MC.MATweet = { 
    init: function() {
        var tweet_button = document.getElementById( 'po_but' ),
            tweet_input = document.getElementById( 'po_in' );
        tweet_button.addEventListener( "click", function() {
            MC.Controller( MC.o_p( 'MATweet' ) ); 
        }, false ); 
        tweet_input.addEventListener( "keypress", function( event ) {
            if( event.keyCode === 13 ) {
                MC.Controller( MC.o_p( 'MATweet' ) );  
                event.preventDefault();
            }
        }, false );
        sStyle( [ "po_in","po_lab" ] );
    },
    pre : function( o_p ) {
        var form_elements = document.getElementById( 'fo_po' ).elements,
            text_object = new SText( form_elements ),
            universal_object = new SUniversals();
        if( universal_object.get('load') === '1' )
        {
            if( !text_object.checkEmpty() ) {
                return MC.MATweet.message( 'empty', o_p );
            }
            if( !text_object.checkPattern( 'tweet' ) ) {
                return MC.MATweet.message( 'tweet', o_p );
            }
        }
        o_p.args.hash = localStorage.hash;
        o_p.page = text_object.getArray();
        return o_p;
    },
    post : function( o_p ) {
       if( o_p.server.result === 'true' ) {
            MC.C.resetView( 'po_in' ); 
            vTPane( o_p.server.tweets ); 
        }
    },
    message: function( type, o_p )
    {
        var response_element = document.getElementById( 'i_box_rr' ),
            pane_element = document.getElementById( 'i_box_r_post' ),
            message_object = new SMessage( response_element ),
            cover_element = document.getElementById( 'po_but_cov' );

        o_p.result = 'complete';
        message_object.display( type );
        cover_element.style.display = 'inline';
        MC.MATweet.movePane( pane_element, 30, 'down' );
        return o_p;
    },
    movePane: function( pane_element, pos, dir ) {
        if( ( dir === 'down' ) && ( pos < 70 ) ) {
            pos += 1;
            pane_element.style.top = ( pos ) + 'px';
            setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos, dir ); }, 1 );
        }
        else if( ( dir === 'down' ) && pos === 70 ) { 
            dir = 'up';
            setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos, dir ); }, 2000 );
        }
        else if( ( dir === 'up' ) && ( pos > 30 ) ) {
            pos -= 1;
            pane_element.style.top = ( pos ) + 'px';
            setTimeout( function( ){ MC.MATweet.movePane( pane_element, pos, dir ); }, 1 );
        }
        else if( ( dir === 'up' ) && ( pos === 30 ) ) {
            document.getElementById( 'po_but_cov' ).style.display='none';
        }
    },
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:33:18.830

您是对的，示例代码很脆弱，并且依赖于系统的许多其他部分。

但是这个类不会因为添加依赖注入而变得更简单——它只会更难阅读和修改。问题不在于它命名了它调用的外部功能，而在于它首先调用了如此多的外部代码。

现在，此代码处理用户输入推文、发送到服务器的推文以及显示推文的所有编码和交互。难怪它是一个毛球。将它们分解为单独的类，每个类只负责一件事，并且通过事件而不是相互调用来进行通信。

因此，您的推文输入视图类只负责发出“new_tweet”消息，其中包含带有推文文本的单个字符串。

您的推文显示窗格类侦听推文列表的更改并重绘自身。

创建推文输入视图的控制器代码还为它附加了一个“new_tweet”事件的侦听器，然后将这些新推文发送到服务器上。

通过这种方式，您的代码变得最少交织在一起，从而导致理解、可重用性和美观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:39:01.617

我们发现，在经典意义上，依赖注入在 JavaScript 中很有用。这是我以前关于该主题的一些答案，每个答案都有一些不错的示例代码：

*   [Node.js：将公共变量传递到单独模块的最佳方式](https://stackoverflow.com/questions/10306185/nodejs-best-way-to-pass-common-variables-into-separate-modules/10328308#10328308)
*   [RequireJS 的依赖注入](https://stackoverflow.com/questions/7708194/dependency-injection-with-requirejs/7708475#7708475)

# boolean-logic - 构建门的方法

> ID：11768408
> 
> 赞同：0
> 
> 时间：2012-08-01T22:19:07.777
> 
> 标签：boolean-logic

我正在尝试构建一个多路复用门。它有两个输入和一个选择器。我得到了真值表。

```
A  |  B  |  Sel  | Out
0     0      1      0
0     1      1      0
1     0      1      1
1     1      1      1
0     0      0      0
0     1      0      1
1     0      0      0
1     1      0      1 
```

这就是我的方法失败的地方。我已经构建了更简单的门，例如 AND 和 OR。那些是如此简单，我不需要一个清晰的方法。我去维基百科看看我是否可以得到一个方法。相反，我只发现了构建电路需要哪些门。对于我的目标，这没有抓住重点。对我来说更重要的是得出答案的方法，而不是答案本身。我知道我需要使用 DeMorgan 定律，但在尝试提出具体细节时失败了。任何提示都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:45:30.727

您可以制作一张[卡诺图](http://en.wikipedia.org/wiki/Karnaugh_map)，它将帮助您选择实现功能所需的门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:14:02.123

只是为了详细说明基思的答案，这是您的真值表的卡诺图：

```
 AB
         00 01 11 10
         ___________
sel  0  | 0  1  1  0
     1  | 0  0  1  1 
```

这是通过将 A 和 B 分组，然后为任何给定输入制作输出矩阵来创建的。请注意，列标题不计入二进制，而更像是格雷码，每列之间只有一个转换。

现在完成了，您可以编写一个等式，将涵盖卡诺图中所有 1 的项进行 OR 运算。

在卡诺图上，很容易看到涵盖多个 1 的术语。例如，术语`B.sel'`（B 和 not sel）涵盖了顶行中的两个 1。

与`A.sel`底行中的 1 相结合，得出等式

```
output = B.sel' + A.sel 
```

这适用于 4 个门，包括 NOT。

# wolfram-mathematica - 数学中的函数迭代

> ID：11768410
> 
> 赞同：0
> 
> 时间：2012-08-01T22:19:24.583
> 
> 标签：wolfram-mathematica

我是 Mathematica 编程的初学者。我的代码没有按预期运行。我想知道是否有人可以检查出了什么问题？这是代码的一部分。

```
F[{k_, n_, x_}] =
Which[k == 0, f[a, b, x],
k == 1, g[a, b, n, x],
k == 2, h[c, d, n, x]]

G[x_] = F[{0, 0, x}]

While[Extract[G[x], 1] != 3, G[x_] = F[G[x]]] 
```

函数`f`,`g`和`h`由`Which`原样定义`F`，它们都是向量值，因此迭代是有意义的`F`。我想要实现的是：给定初始值`{0,0,x}`，不断迭代`F`直到`F`变成的第一个组件`3`。上面的代码中是否有任何错误，例如语法错误？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:32:47.047

您需要将`SetDelayed`( `:=`) 用于函数定义，例如：`F[x_]:=x`. 当您使用`Set`( `=`) like`F[x_]=x`时，它​​本质上是相同的，`F[_]=x`因为定义不会延迟到评估，因此无法将左侧的匹配模式转移到右侧的评估中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:35:28.460

正如 jVincent 提到的，我会在定义 F 时使用`:=`而不是。`=`

我也会使用内置[`NestWhile`](http://reference.wolfram.com/mathematica/ref/NestWhile.html)而不是手动迭代。

```
NestWhile[F, {0, 0, x}, Function[e, Extract[e, 1] != 3]] 
```

我不能完全评论如何更正编写的代码，因为我不完全确定如何重新分配`G`工作`While`。

# php - php mysql查询找到最接近的结果

> ID：11768412
> 
> 赞同：0
> 
> 时间：2012-08-01T22:19:27.317
> 
> 标签：php, mysql, algorithm, search

解决这个问题的最佳方法是什么？

*   按名字搜索用户，其中参数是字符串。结果应显示名字最接近搜索字符串的 10 个用户的列表。

显然，有不同的方法可以解决这个问题。是否已经有任何 mysql 功能可以做到这一点？

我应该只查询所有行并运行某种搜索功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:24:50.513

看看[MySQL 全文搜索功能](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)，它会根据相关性自动返回结果，尽管它不适用于 InnoDB。

# java - 有人可以建议简化代码吗？

> ID：11768416
> 
> 赞同：0
> 
> 时间：2012-08-01T22:19:43.977
> 
> 标签：java, refactoring

```
public boolean isPalindrome()
{

    Stack myStack = new Stack();
    for(Node current = head; current!=null; current = current.next)
    {
        if(!myStack.isEmpty())
        {
            if(myStack.peek()==current.data)
            {
                myStack.pop();
            }else if(current.next!=null&&myStack.peek()==current.next.data)
            {
                continue;
            }
            else
            {
                myStack.push(current.data);
            }
        }else
        {

            myStack.push(current.data);
        }   

    }

    return myStack.isEmpty();
} 
```

我在这里做的是使用堆栈来检查链表是否是回文。它按预期工作，唯一的事情是我想摆脱代码重复，其中 else 条件将数据推送到堆栈上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T22:31:25.933

不幸的是，该算法不正确。对于“abbaaa”，它会报告这是一个回文，尽管它不是。在不使用长度的情况下检查回文是很困难的。

```
abbaaa () -> push a
bbaaa (a) -> push b
baaa (ba) -> pop b
aaa (a) -> pop a
aa () -> push a
a (a) -> pop a
() -> palindrome 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:29:08.117

这是一个有点经典的问题。在java中有很多方法可以解决它。最简单的一个是这个：

```
boolean isPalindrome(String s) {
   for (int i=0, len=s.length(); i<len/2; i++) {
      if (s.charAt(i) != s.charAt(len-i-1)) return false;
   }
   return true;
} 
```

（严格来说，这是重写而不是重构；但是，任何保留方法签名的重写都可以被视为重构......而且它肯定更有效）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T22:26:13.333

如果您只想删除两个 else 条件之间的代码重复，则将它们完全删除。

```
public boolean isPalindrome()
{

    Stack myStack = new Stack();
    for(Node current = head; current!=null; current = current.next)
    {
        if(!myStack.isEmpty())
        {
            if(myStack.peek()==current.data)
            {
                myStack.pop();
                continue;
            }else if(current.next!=null&&myStack.peek()==current.next.data)
            {
                continue;
            }
        }                   
        myStack.push(current.data);             
    }

    return myStack.isEmpty();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T22:37:27.543

功能的简化；

```
boolean isPalinDrome(String testString) {
    return new StringBuffer(testString).reverse().toString().equals(testString);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T22:38:13.500

这应该提供相同的功能而无需重复。但是有人指出，您的算法似乎不正确。

```
public boolean isPalindrome()
{

    Stack myStack = new Stack();
    boolean doPush;
    for(Node current = head; current!=null; current = current.next)
    {
        doPush = true;
        if(!myStack.isEmpty())
        {
            if(myStack.peek()==current.data)
            {
                doPush = false;
                myStack.pop();
            }else if(current.next!=null&&myStack.peek()==current.next.data)
            {
                doPush = false;
                continue;
            }
        }   
        if(doPush){                
            myStack.push(current.data);  
        }           
    }

    return myStack.isEmpty();
} 
```

# heroku - 从共享数据库迁移到开发计划时遇到问题

> ID：11768418
> 
> 赞同：0
> 
> 时间：2012-08-01T22:19:45.787
> 
> 标签：heroku

我只是按照步骤将我非常小的共享数据库迁移到 Heroku 的新“开发”计划。一切都很顺利，直到我尝试`$ heroku addons:remove shared-database`

我收到以下错误：

```
 $ heroku addons:remove shared-database
-----> Removing shared-database from [my_app]... failed
 !     Shared databases cannot be removed 
```

我已确认我的 DATABASE_URL 与我的 HEROKU_POSTGRESQL_[COLOR]_URL 匹配，并且我的应用程序运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:31:50.787

我在 Heroku 的数据团队工作。对此我们深表歉意：您观察到的问题是我们这边的临时问题，而不是您的代码问题。请再试一次，这是专门在竹堆上的问题。

顺便说一句，考虑[使用 cedar stack](https://devcenter.heroku.com/articles/maximizing-availability/#cedar)。:)

# php - 使用 PHP 将定义的变量插入 MySQL 数据库/表中，没有数据（显然）被写入数据库？

> ID：11768424
> 
> 赞同：1
> 
> 时间：2012-08-01T22:20:37.547
> 
> 标签：php, mysql, database, insert

谢谢参观：

这是我用来将数据插入表中的 php

```
<?php

session_start();

//sets a variable from a session value
if (isset($_SESSION['sv_01'])) {$sv_01=$_SESSION['sv_01'];} else {$sv_01="";}

//to test that the variable has been set and is not empty
echo $sv_01;

//define database log in stuff
$username="username123";
$password="password123";
$database="database01";
$table="my_table";
$dbaddress="123.123.123.123";

//connect to dbserver
$con=mysql_connect($dbaddress,$username,$password); 

if (!$con) 
{ 
die('Could not connect:' .mysql_error()); 
} 

//select the db
mysql_select_db($database) or die( "Unable to select database"); 

//insert data from variables
mysql_query("INSERT INTO $table 
(
$sv_01
)
VALUES 
(
'$sv_01'
)");

mysql_close($con);

?> 
```

我运行它，然后去检查数据库的内容。使用 MySQL 工作台我打开连接以及有问题的数据库和表，选择所有行并且表中不包含任何数据。

MySQL 信息：排序规则：latin1 - 默认排序规则引擎：MyISAM 数据类型：sv_01 VARCHAR (255) 默认值：NULL

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:25:30.757

我相信该领域的名称`sv_01`不是`$sv_01`

我会尝试：

```
$query = "INSERT INTO $table (sv_01) VALUES ('$sv_01')"; 
```

**更新（献给 tadman）：**
一个小建议：[不要使用 mysql_query](https://stackoverflow.com/questions/1402017/php-pdo-vs-normal-mysql-connect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:27:02.647

在您的 IP 中使用 localhost insted（如果可能），并使您的连接易于阅读：

```
$con=mysql_connect($dbaddress,$username,$password) OR DIE mysql_error(); 
```

而且你还必须给你 mysql_query 一个变量：

```
$mysql = mysql_query("INSERT INTO $table ($sv_01) VALUES ('".$sv_01."');"); 
```

:)

# c# - 上移表格 (TD) 中的数据和控件

> ID：11768431
> 
> 赞同：0
> 
> 时间：2012-08-01T22:21:08.967
> 
> 标签：c#, asp.net, html

我试图弄清楚如何向上移动一些 asp:xxx 控件的单元格（不是整行）。

下面是一个示例布局（使用文本），以显示数据的布局方式以及我希望它出现的内容。这一切都可以在页面加载后的代码中完成，因为条件将设置为显示或隐藏 2 行。

基本上，我需要（有条件地）隐藏单元格 XXX xxx YYY 和 yyy。并将它们向上移动。

![之前和之后](../Images/5214864711b41d7223c5a66ae10ca81c.png)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        .tableNoPad
        {
            padding: 0;
            margin: 0;
            border-style: none;
            width: 100%;
            border-collapse: collapse;
            empty-cells: hide;
        }
        .altrowStandard
        {
            background-color: lightblue;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    Before:
    <div>
        <table class="tableNoPad">
            <tr>
                <td>
                    AAA
                </td>
                <td>
                    aaa
                </td>
                <td>
                    &nbsp;
                </td>
                <td>
                    AAA
                </td>
                <td>
                    aaa
                </td>
            </tr>
            <tr class="altrowStandard">
                <td>
                    BBB
                </td>
                <td>
                    bbb
                </td>
                <td runat="server" id="hide1a">
                    &nbsp;
                </td>
                <td runat="server" id="hide1b">
                    BBB
                </td>
                <td runat="server" id="hide1c">
                    bbb
                </td>
            </tr>
            <tr>
                <td>
                    CCC
                </td>
                <td>
                    ccc
                </td>
                <td id="hide2a" runat="server">
                    &nbsp;
                </td>
                <td runat="server" id="hide2b">
                    XXX
                </td>
                <td runat="server" id="hide2c">
                    xxx
                </td>
            </tr>
            <tr class="altrowStandard">
                <td>
                    DDD
                </td>
                <td>
                    ddd
                </td>
                <td id="hide3a" runat="server">
                    &nbsp;
                </td>
                <td runat="server" id="hide3b">
                    YYY
                </td>
                <td runat="server" id="hide3c">
                    yyy
                </td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                </td>
                <td>
                    &nbsp;
                </td>
                <td>
                    CCC
                </td>
                <td>
                    ccc
                </td>
            </tr>
            <tr class="altrowStandard">
                <td>
                </td>
                <td>
                </td>
                <td>
                    &nbsp;
                </td>
                <td>
                    DDD
                </td>
                <td>
                    ddd
                </td>
            </tr>
        </table>
    </div>
    After:
    <div>
        <table class="tableNoPad">
            <tr>
                <td>
                    AAA
                </td>
                <td>
                    aaa
                </td>
                <td>
                    &nbsp;
                </td>
                <td>
                    AAA
                </td>
                <td>
                    aaa
                </td>
            </tr>
            <tr class="altrowStandard">
                <td>
                    BBB
                </td>
                <td>
                    bbb
                </td>
                <td runat="server" id="Td1">
                    &nbsp;
                </td>
                <td runat="server" id="Td2">
                    BBB
                </td>
                <td runat="server" id="Td3">
                    bbb
                </td>
            </tr>
            <tr>
                <td>
                    CCC
                </td>
                <td>
                    ccc
                </td>
                <td id="Td4" runat="server">
                    &nbsp;
                </td>
                <td runat="server" id="Td5">
                    CCC
                </td>
                <td runat="server" id="Td6">
                    ccc
                </td>
            </tr>
            <tr class="altrowStandard">
                <td>
                    DDD
                </td>
                <td>
                    ddd
                </td>
                <td id="Td7" runat="server">
                    &nbsp;
                </td>
                <td runat="server" id="Td8">
                    DDD
                </td>
                <td runat="server" id="Td9">
                    ddd
                </td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T01:39:17.500

一种选择可能是在您的代码中构建 DataTable，然后将其绑定到 GridView。向页面添加一个 GridView，类似于以下内容：

```
<form id="form1" runat="server">
    <asp:GridView runat="server" ID="ExampleGridView" 
                AutoGenerateColumns="true" ShowHeader="false" />
</form> 
```

然后在页面加载中，您可以根据需要构建 DataTable，例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    DataTable table = new DataTable();
    var condition = false;

    for (int i = 0; i < 4; i++) table.Columns.Add();

    AddArray(table, new string[4] { "AAA", "aaa", "AAA", "aaa" });
    AddArray(table, new string[4] { "BBB", "bbb", "BBB", "bbb" });
    if (condition)
    {
        AddArray(table, new string[4] { "CCC", "ccc", "CCC", "ccc" });
        AddArray(table, new string[4] { "DDD", "ddd", "DDD", "ddd" });
    }
    else
    {
        AddArray(table, new string[4] { "CCC", "ccc", "XXX", "xxx" });
        AddArray(table, new string[4] { "DDD", "ddd", "YYY", "yyy" });
        AddArray(table, new string[4] { "", "", "CCC", "ccc" });
        AddArray(table, new string[4] { "", "", "DDD", "ddd" });
    }
    ExampleGridView.DataSource = table;
    ExampleGridView.DataBind();
}

private void AddArray(DataTable table, string[] items) {
    var row = table.NewRow();
    row.ItemArray = items;
    table.Rows.Add(row);
} 
```

# resharper - 单元测试在 r# 中失败，但在 mstest 中通过

> ID：11768433
> 
> 赞同：1
> 
> 时间：2012-08-01T22:21:29.440
> 
> 标签：resharper, mstest

在 R# 中运行单元测试时出现以下错误，但测试在 Visual Studio MSTest 中按预期通过，任何涉及实体框架的东西都会发生这种情况，其他测试工作没有问题，我认为这是因为dll 未部署，但确保所有 dll 都标记为 deploy local = true，还确保关闭分析，因为我读到这可能会导致 R# 出现问题，异常很奇怪，真的找不到关于为什么会发生这种情况的任何押韵或原因。代码执行也没有问题，所以它真的告诉我 R# 或我的配置有问题。不幸的是，我在 R# 中尝试了 MSTest 屏幕中的所有内容，但没有成功，即使使用“使用 MSTests.exe 运行测试（不推荐）”，但所有测试仍然失败，但仅当他们处理实体框架时。否则他们将毫无问题地工作。这发生在其他同事的系统中，所以它不仅仅是我的系统。

测试方法 Calamos.Ccs.Research.Repository.Test.DatabaseContext.EntityFrameworkContexts.ResearchContext

Test.TestFactorPeriod 抛出异常：System.InvalidOperationException：类型“Calamos.Ccs.Research.Business.Oltp.Geographic.Exchange”的属性“CountryId”上的 ForeignKeyAttribute 无效。在依赖类型“Calamos.Ccs.Research.Business.Oltp.Geographic.Exchange”上找不到导航属性“国家/地区”。Name 值应该是有效的导航属性名称。在 System.Data.Entity.ModelConfiguration.Conventions.ForeignKeyPrimitivePropertyAttributeConvention.ForeignKeyAttributeConventionImpl.ApplyNavigationProperty(PropertyInfo propertyInfo, ModelConfiguration modelConfiguration, ForeignKeyAttribute foreignKeyAttribute) 在 System.Data.Entity.ModelConfiguration.Conventions.ForeignKeyPrimitivePropertyAttributeConvention.ForeignKeyAttributeConventionImpl.Apply(PropertyInfo propertyInfo,`3.System.Data.Entity.ModelConfiguration.Conventions.IConfigurationConvention<TMemberInfo,TConfiguration>.Apply(TMemberInfo memberInfo, Func`1 配置）在 System.Data.Entity.ModelConfiguration.Conventions.ForeignKeyPrimitivePropertyAttributeConvention.System.Data.Entity.ModelConfiguration.Conventions.IConfigurationConvention.Apply(PropertyInfo memberInfo, Func `1 configuration) at System.Data.Entity.ModelConfiguration.Configuration.ConventionsConfiguration.ApplyPropertyConfiguration(PropertyInfo propertyInfo, ModelConfiguration modelConfiguration) at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapStructuralElements(Type type, ICollection`1 annotations, Action 1structureTypeConfiguration `2 propertyMappingAction, Boolean mapDeclaredPropertiesOnly, Func`) 在 System.Data.Entity.ModelConfiguration。 Mappers.TypeMapper.MapEntityType(Type type) 在 System.Data.Entity.ModelConfiguration.Mappers.NavigationPropertyMapper.Map(PropertyInfo propertyInfo, EdmEntityType entityType, Func `1 entityTypeConfiguration, Type sourceType) at System.Data.Entity.ModelConfiguration.Mappers.PropertyMapper.Map(PropertyInfo propertyInfo, EdmEntityType entityType, Func`1 entityTypeConfiguration, Type sourceType) 在 System.Data.Entity.ModelConfiguration.Mappers.TypeMapper。 <>c_ *DisplayClass12.b* _e（PropertyMapper m，PropertyInfo p）在 System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapStructuralElements（类型类型，ICollection`1 annotations, Action`2 propertyMappingAction, Boolean mapDeclaredPropertiesOnly, Func `1 structuralTypeConfiguration) at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapEntityType(Type type) at System.Data.Entity.ModelConfiguration.Mappers.NavigationPropertyMapper.Map(PropertyInfo propertyInfo, EdmEntityType entityType, Func`1 entityTypeConfiguration, Type sourceType) 在 System.Data.Entity.ModelConfiguration.Mappers.PropertyMapper.Map(PropertyInfo propertyInfo, EdmEntityType entityType, Func `1 entityTypeConfiguration, Type sourceType) at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.<>c__DisplayClass12.<MapEntityType>b__e(PropertyMapper m, PropertyInfo p) at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapStructuralElements(Type type, ICollection`1 annotations, Action 1structureTypeConfiguration `2 propertyMappingAction, Boolean mapDeclaredPropertiesOnly, Func`) 在 System.Data.Entity.ModelConfiguration .Mappers.TypeMapper.MapEntityType(Type type) 在 System.Data.Entity.ModelConfiguration.Mappers.NavigationPropertyMapper.Map(PropertyInfo propertyInfo, EdmEntityType entityType, Func `1 entityTypeConfiguration, Type sourceType) at System.Data.Entity.ModelConfiguration.Mappers.PropertyMapper.Map(PropertyInfo propertyInfo, EdmEntityType entityType, Func`1 entityTypeConfiguration, Type sourceType) 在 System.Data.Entity.ModelConfiguration.Mappers.TypeMapper .<>c_ *DisplayClass12.b*System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapStructuralElements（类型类型，ICollection `1 annotations, Action`2 propertyMappingAction，布尔 mapDeclaredPropertiesOnly，Func `1 structuralTypeConfiguration) at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.MapEntityType(Type type) at System.Data.Entity.DbModelBuilder.<>c__DisplayClass7.<MapTypes>b__1(Type type) at System.Linq.Enumerable.WhereListIterator`1.MoveNext() 在 System.Data.Entity.ModelConfiguration.Utilities 处的 _e（PropertyMapper m，PropertyInfo p）。 IEnumerableExtensions.Each(IEnumerable `1 ts, Action`1 action) at System.Data.Entity.DbModelBuilder.MapTypes(EdmModel model) at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo) at System.Data.Entity.DbModelBuilder.Build( DbConnection providerConnection) 在 System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) 在 System.Data.Entity.Internal.RetryLazy `2.GetValue(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeContext() at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() 在 System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() 在 System.Linq.Queryable.FirstOrDefault(IQueryable `1 source, Expression`1 谓词) 在 Calamos.Ccs.Research.Repository.Test.DatabaseContext.EntityFrameworkContexts.ResearchContextTest.TestFactorPeriod() 在 ResearchContextTest.cs: 行290

# php - Google Drive SDK (PHP) Children: list - 如何设置查询参数

> ID：11768437
> 
> 赞同：0
> 
> 时间：2012-08-01T22:21:41.267
> 
> 标签：php, google-drive-api

我按照那里的文档：

[https://developers.google.com/drive/v2/reference/children/list](https://developers.google.com/drive/v2/reference/children/list)

我想在参数中设置一个查询，所以我尝试简单地这样做：

```
$parameters = array();
$parameters['q'] = "My Query";
$children = $service->children->listChildren($folderId, $parameters); 
```

正如文档中所写：

> 带有 children.list 的请求接受 q 参数，这是一个组合一个或多个搜索词的搜索查询

但是 q 无法识别，我收到此错误：

> 发生错误：（列表）未知参数：'q'

什么是正确的语法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:04:41.403

您确定您使用的是最新版本的 PHP 客户端库吗？我刚刚尝试过，`q`列出子项时支持该参数。

此外，请确保参数的值与[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)`q`中解释的搜索查询语法相匹配。

例如，这是一个指定查询参数的有效子列表请求：

```
$parameters = array();
$parameters['q'] = "title contains 'Drive'";
$children = $service->children->listChildren($folderId, $parameters); 
```

# java - 如何检查 Java 进程是否仍在运行？

> ID：11768441
> 
> 赞同：0
> 
> 时间：2012-08-01T22:21:57.520
> 
> 标签：java

我正在为 Serversoftware Bukkit 开发一个插件，它应该重新启动它。所以我添加了检查正确参数然后启动 Bukkit 的主函数。但在它启动 Bukkit 之前，它应该等待 Bukkit 关闭，然后再重新启动它。我知道我可以添加超时，但我希望有更好的方法。那么有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:50:58.477

当您启动多个 java 进程时，它们似乎都具有相同的标识符，这似乎是您的问题。“区分”进程是你的问题，而不是杀死它们。

因此，您可以通过编程方式自己创建进程，从而能够记下用于该进程的 PID。然后杀死它会很简单： [http ://blog.igorminar.com/2007/03/how-java-application-can-discover-its.html](http://blog.igorminar.com/2007/03/how-java-application-can-discover-its.html)

另一个想法是使用 JPS 来获取有关所有 java 进程的信息。这里讨论了一个简单的 sudo 算法：http: [//bluepedia.blogspot.com/2008/11/jps-differentiate-between-multiple-java.html](http://bluepedia.blogspot.com/2008/11/jps-differentiate-between-multiple-java.html)

希望我能有所帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:43:43.580

一种方法是检查操作系统`System.getProperty("os.name");`并针对该特定平台（例如：[Linux](https://stackoverflow.com/questions/8422582/java-how-to-check-whether-another-non-java-process-is-running-on-linux)和[Windows](https://stackoverflow.com/questions/2318220/how-to-programmatically-detect-if-a-process-is-running-with-java-under-windows)）运行 ad hoc 命令。

# c++ - Visual C++ - 启用优化并浏览优化的代码

> ID：11768448
> 
> 赞同：0
> 
> 时间：2012-08-01T22:22:40.637
> 
> 标签：c++, compiler-optimization

如何在打开优化的情况下编译我的项目，并查看我的代码中发生了哪些优化。

例如：

我的原始代码：

```
printf("Test: %d",52);
for (int empty=0;i<100000;i++) {
    //Nothing here
} 
```

现在当我用优化编译我的代码时，我想看看：（我想它会是这样的）

```
printf("Test: 52"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:24:58.050

编译器不~~优化~~修改源代码（您在问题中显示的内容），而是由 asm 指令组成的二进制文件。

如何打开和关闭优化取决于编译器，因此您必须参考其文档。

**在 MSVS**中，您可以从顶部工具栏中选择此选项 - 查找`Debug`（未优化）与`Release`（优化）。您可以通过使用调试器单步执行代码来查看二进制代码，右键单击 -> 显示反汇编。

例如，您的代码会生成：

### 没有优化：

```
 printf("Test: %d",52);
0097171E  mov         esi,esp  
00971720  push        34h  
00971722  push        offset string "Test: %d" (9788C8h)  
00971727  call        dword ptr [__imp__printf (97C3E0h)]  
0097172D  add         esp,8  
00971730  cmp         esi,esp  
00971732  call        @ILT+575(__RTC_CheckEsp) (971244h)  
    for (int i=0;i<100000;i++) {
00971737  mov         dword ptr [i],0  
0097173E  jmp         wmain+49h (971749h)  
00971740  mov         eax,dword ptr [i]  
00971743  add         eax,1  
00971746  mov         dword ptr [i],eax  
00971749  cmp         dword ptr [i],186A0h  
00971750  jge         wmain+54h (971754h)  
        //Nothing here
    }
00971752  jmp         wmain+40h (971740h) 
```

### 通过优化：

```
 printf("Test: %d",52);
013A1000  push        34h  
013A1002  push        offset string "Test: %d" (13A20F4h)  
013A1007  call        dword ptr [__imp__printf (13A209Ch)]  
013A100D  add         esp,8  
    for (int i=0;i<100000;i++) {
        //Nothing here
    } 
```

# c# - 在接口中定义序列化数据成员，然后在实现所述接口的类中使用它

> ID：11768451
> 
> 赞同：4
> 
> 时间：2012-08-01T22:23:16.960
> 
> 标签：c#, .net, json, serialization

基本上，当通过网络返回`string Yoyo`类型的对象时，下面的代码是否应该工作并序列化。`YoyoData`

```
 public interface IHelloV1
    {
        #region Instance Properties

        [DataMember(Name = "Yoyo")]
        string Yoyo { get; set; }

        #endregion
    }

    [DataContract(Name = "YoyoData", Namespace = "http://hello.com/1/IHelloV1")]
    public class YoyoData : IHelloV1
    {
        string Yoyo { get; set; }

        public YoyoData()
        {
            Yoyo = "whatever";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T22:34:25.343

我不认为它会。

该`DataMember`属性不会在派生类中继承。

有关更多详细信息，请参阅类型文档及其`DataMemberAttribute`定义方式：http: [//msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)。此属性指定属性，`Inherited = false`意味着该属性不会传播到派生类。

另请参阅[http://msdn.microsoft.com/en-us/library/84c42s56(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/84c42s56(v=vs.71).aspx)`Inherited`以获取有关属性的更多详细信息。

无论如何，这意味着在您定义的类中`DataContract`，该属性`Yoyo`不会被视为 a`DataMember`所以对我来说它不会按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T22:41:59.897

它似乎**不起作用**：

```
using System.Runtime.Serialization;
using System.IO;
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            IHelloV1 yoyoData = new YoyoData();
            var serializer = new DataContractSerializer(typeof(YoyoData));

            byte[] bytes;
            using (var stream = new MemoryStream())
            {
                serializer.WriteObject(stream, yoyoData);
                stream.Flush();
                bytes = stream.ToArray();
            }

            IHelloV1 deserialized;
            using (var stream = new MemoryStream(bytes))
            {
                deserialized = serializer.ReadObject(stream) as IHelloV1;
            }

            if (deserialized != null && deserialized.Yoyo == yoyoData.Yoyo)
            {
                Console.WriteLine("It works.");
            }
            else
            {
                Console.WriteLine("It doesn't work.");
            }

            Console.ReadKey();
        }
    }

    public interface IHelloV1
    {
        #region Instance Properties

        [DataMember(Name = "Yoyo")]
        string Yoyo { get; set; }

        #endregion
    }

    [DataContract(Name = "YoyoData", Namespace = "http://hello.com/1/IHelloV1")]
    public class YoyoData : IHelloV1
    {
        public string Yoyo { get; set; }

        public YoyoData()
        {
            Yoyo = "whatever";
        }
    }
} 
```

但是，如果您将该属性放在类属性而不是接口属性上，它确实有效。

# php - 获取 FOSUserBundle 组的用户 (Symfony2)

> ID：11768453
> 
> 赞同：1
> 
> 时间：2012-08-01T22:23:20.827
> 
> 标签：php, symfony, fosuserbundle

在过去的几个小时里，我一直在为这个问题而苦苦挣扎，但一无所获。

我已经配置了 FOSUserBundle 并正确激活了组并正常工作。但是，用户组关系在 User 类中定义如下：

```
/**
 * @ORM\ManyToMany(targetEntity="Netlabs\UserBundle\Entity\Group")
 * @ORM\JoinTable(name="fos_user_user_group",
 *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id")}
 * )
 */
protected $groups; 
```

在 Group 类中，我什至没有定义 $user 列表。我尝试了很多“正常”的事情，比如在我的 Group 类中创建一个 $users 变量并定义它与 User 对象的关系，但它与 FOSUserBundle 的关系并不好（每次，它都会创建一个新表来创建关系，当已经有一个时）。例如：

```
/**
 * @ORM\ManyToMany(targetEntity="Netlabs\UserBundle\Entity\Group", inversedBy="groups", cascade={"all"})
 * 
 */
protected $users; 
```

有什么建议么 ？

同样，我的主要目标是：我希望能够做 Group->getUsers()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:30:05.103

在您的 Group 类中，您的 targetEntity 必须是 User 而不是 Group。此外，尝试为 $groups 属性添加一个 inversedBy 规则，并在 $users 的 mappedBy 中修改 inversedBy。

```
/**
 * @ORM\ManyToMany(targetEntity="Netlabs\UserBundle\Entity\Group", inversedBy="users")
 * @ORM\JoinTable(name="fos_user_user_group",
 *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
 *      inverseJoinColumns={@ORM\JoinColumn(name="group_id", referencedColumnName="id")}
 * )
 */
protected $groups; 
```

和

```
/**
 * @ORM\ManyToMany(targetEntity="Netlabs\UserBundle\Entity\User", mappedBy="groups")
 * 
 */
protected $users; 
```

# sql-server - 来自 FileTable msg 22015 的 Sql Server 数据库邮件附件（文件无效）

> ID：11768461
> 
> 赞同：1
> 
> 时间：2012-08-01T22:24:00.703
> 
> 标签：sql-server, database-mail, filetable

我正在将 Web (mvc3) 应用程序中的电子邮件服务从 .Net 转换为 sql 数据库邮件。我们要作为附件发送的一些内容已上传到 sql FileTable。当我使用附件的 UNC 路径 (@file_attachments=) 时，我收到此错误：

```
Msg 22051, Level 16, State 1, Line 0 Attachment file
\\computername\mssqlserver\foldername\foldername\DE107D2C-B945-4F1E-A4B9-4B398C9DE758.jpg)
is invalid. 
```

我可以使用相同的路径直接打开文件，当我将文件复制到本地文件夹时，文件附件很好。我怀疑问题是 FileTable 目录的文件夹权限。但我找不到任何挂钩来设置该文件夹的权限。

我正在使用 Windows 身份验证在 SSMS（本地 sql 实例）中本地运行 EXECUTE msdb.dbo.sp_send_dbmail。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:38:18.417

This behavior was validated in the Microsoft Database Engine forum and I submitted feedback: [https://connect.microsoft.com/SQLServer/feedback/details/756716/sql-server-database-mail-attachments-from-filetable-msg-22051-file-is-invalid](https://connect.microsoft.com/SQLServer/feedback/details/756716/sql-server-database-mail-attachments-from-filetable-msg-22051-file-is-invalid)

Note that the error code I had in this title should be 22051 and not 22015.

In the mean time, I'm using a work around of copying the files using the sql command shell to another local folder, and using that path for the attachment

Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:21:05.683

将您的附件文件夹共享给存在附件文件的网络服务用户。并将 \\ip_addres\filefolder\abc.pdf 之类的附件文件路径提供给 send_dbmail 存储过程。如果文件和 sql 服务器在不同的机器上，这将起作用

# heroku - 类似 Heroku 的 Amazon EC2

> ID：11768465
> 
> 赞同：7
> 
> 时间：2012-08-01T22:24:34.517
> 
> 标签：heroku, amazon-web-services

我可以在 EC2 实例上安装任何类似 AWS Heroku 的东西吗？

例如：

*   heroku 创建应用
*   git 推送

但对于 AWS。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T01:21:14.300

好吧，现在有了！它被称为[AWS Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/)（截至 2013 年 3 月仍处于测试阶段）

运行初始设置后，进一步的部署应该很简单`git aws.push`

**编辑：**[Werner Vogels](http://www.allthingsdistributed.com/2013/02/aws-opsworks.html)（AWS 首席技术官）对 AWS 的部署可能性进行了很好而广泛的概述：

![在此处输入图像描述](../Images/869c7eb625d65fc33781311fb48f5daa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:31:01.237

在彻底回答您的问题之前，我需要谈的话题很少；所以，请多多包涵。

## 一点见解

关于您的两个示例，Heroku 使用了许多不同的技术来实现它作为服务平台提供的简单程度。其中一项技术包括： Heroku 的专有工具带，它提供了一组命令行工具——允许开发人员与他们的应用程序交互——以及与 Heroku 提供的许多工具交互——例如多种不同语言的终端访问. 工具带本身依赖于另外两种技术：Ruby 和 Git；它与安装一起预先打包。

## 简而言之

现在，当您创建 Heroku 应用程序时，您实际上是在 celedon cedar 运行时堆栈上创建了一个 git 存储库（默认情况下）；然后将此存储库添加为远程存储库。这可以让你立即运行`git push heroku master`。幕后还有很多事情发生：例如，当你推送时，你的提交会被一个 git pre-receive 钩子拦截，该钩子通过一个 slug 编译器运行你的应用程序，并将其预先打包以在 dyno 流形上分发；然而，我离题了。有关更多高级主题的更多信息，请查看：[https](https://devcenter.heroku.com/) ://devcenter.heroku.com/ ；这里有大量信息可供阅读。

## 堆栈

现在，让我解释一下雪松堆栈，因为这主要是您的问题所关心的。Celedon 雪松是众多雪松中的一种。但是，这是当前的默认设置（出于多种原因）。这个多语言运行时堆栈目前提供六种 Web 语言（在撰写本文时），在 Ubuntu（11.04 稳定版，我相信）上运行。所有这些技术都在 AWS EC2 计算环境之上运行。

所以最后回答你的问题：你需要安装一个合适的操作系统，比如：Ubuntu；一组语言，例如：Ruby、Python、Node.js 等；Git（用于部署），其余的由您决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T13:05:41.297

如果您有固定数量的实例有意义而不是使用 Elastic Beanstalk 使用自定义 git 部署，如文章中所述：http: [//www.jeffhoefs.com/2012/09/setup-git-deploy-for-aws-ec2 -ubuntu 实例/](http://www.jeffhoefs.com/2012/09/setup-git-deploy-for-aws-ec2-ubuntu-instance/)。

在 EC2 实例上设置 GIT 存储库的主要思想。当您想要部署某些东西时，只需将您的更改推送到安装在 EC2 实例上的远程存储库。

与 Elastic Beanstalk 相比，我认为这种方法具有以下优势：

1.  您无需为存储应用程序版本的 S3 存储桶付费；
2.  您可以完全控制应用程序部署步骤。

# node.js - http.request 可以连接到多个主机（node.js）吗？

> ID：11768474
> 
> 赞同：0
> 
> 时间：2012-08-01T22:25:14.927
> 
> 标签：node.js, httpwebrequest

原来 http.request 只能连接到一台主机。是否有其他方式或其他方法可以指定多个主机来创建http远程请求客户端？

这背后的原因是我连接的远程服务有三台冗余主机，如果一台出现故障，其他主机将继续工作。所以，我正在寻找一种方法来使 http.request 或任何请求客户端指定多个主机，并连接到正在工作的主机。如果第一个失败，则切换到列表中的另一台主机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:48:00.493

听起来您想在三个主机之间进行负载平衡。那是对的吗？如果是这样，那么[这篇文章](https://stackoverflow.com/questions/6586362/node-js-supports-multiple-load-balance-across-servers)可能会有所帮助。基本上，这个想法是您将发送到特定主机（虚拟）上的负载均衡器，然后它将代理（循环）到真实服务器（真实）。对于完全冗余，您需要寻找可以集群的负载均衡器。

编辑：我使用[HAProxy](http://haproxy.1wt.eu/)进行负载平衡，发现它运行良好。它允许您配置绑定到 IP 的虚拟主机。然后从该虚拟 IP 转发到*n*个真实服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:34:19.397

你可以再做一个，直到有东西起作用：

```
var hosts = ["first.com", "second.com", "third.com"];
(function loop(i) {
    var host = hosts[i],
        options = {
            host: host,
            port: 80,
            method: 'GET'
        };
    if (host) {
        var req = http.request(options, function(res) {
            if (res.statusCode !== 200) {
                loop(++i)
            } else {
                console.log("request succeeded");
            }
        });
        req.on("error", function() {
            loop(++i);
        });
        req.end();
    } else {
        console.log("ran out of hosts to try");
    }
})(0); 
```

# ruby-on-rails-3 - Rails 3 应该使用 require_tree 吗？

> ID：11768475
> 
> 赞同：3
> 
> 时间：2012-08-01T22:25:15.883
> 
> 标签：ruby-on-rails-3, asset-pipeline

asset_pipeline[指南](http://guides.rubyonrails.org/asset_pipeline.html) 提到了使用`require_tree`JavaScript 和样式表文件来递归加载相应文件类型的每个文件，但没有提到这样做的任何优点或缺点。`require_tree`例如，在我的 application.js 文件中对我有什么好处？在一种情况下，它使我不必手动为各个页面包含单独的 javascript 文件。另一方面，在很多情况下我忘记了我正在使用该`require_tree`指令并且不小心多次加载库。

为甚至不使用它们的页面加载 javascript/stylesheet 文件时是否涉及任何与性能相关的问题（就像 using 的情况一样`require_tree`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:01:23.623

如果您使用 require_tree，则绝对没有理由手动要求您自己的文件。您不应该这样做，但这样做不会有什么坏处，因为 Rails 足够聪明，不需要两次使用同一个文件。

但是，您应该需要“供应商”或 gem 中的文件。“require_tree”不会自动要求这些文件。它只需要 app/assets/{type} 中的文件。

# ios - 如何将视频转码为 16:9 格式并改变比特率（可能还有 FPS）？

> ID：11768487
> 
> 赞同：4
> 
> 时间：2012-08-01T22:27:19.410
> 
> 标签：ios, video, uiimagepickercontroller, avassetexportsession

假设我使用从照片库访问视频`UIImagePickerController`，然后我想以 16x9 格式（例如 960x540、1280x720、1920x1080）导出它，但我还想控制比特率或每秒帧数或其他任何可以帮助减小导出视频的大小。我需要使用什么 API 来完成这些（至少）两个或三个维度（纵横比、比特率，也许是 FPS）？

我可以使用（我们已经在使用）`AVAssetExportSession`并且我们可以像`AVAssetExportPreset960x540`,`AVAssetExportPreset1280x720`和`AVAssetExportPreset1920x1080`获得 16:9 的纵横比（并且在某种程度上控制大小，因为这些中的每一个都会产生不同大小的导出）。但我认为我不能同时控制比特率和 FPS 之类的东西。我必须使用不同的 API 吗？

在一个相关的问题上，我看到它`AVAssetExportSession`具有布尔属性`shouldOptimizeForNetworkUse`，它“指示电影是否应该针对网络使用进行优化”。这个优化包括什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:51:53.550

您是否曾经尝试过使用 FFMPEG（为此的第三方库）

[http://ffmpeg.org/](http://ffmpeg.org/)

# php - php数组排序和分组

> ID：11768495
> 
> 赞同：0
> 
> 时间：2012-08-01T22:28:31.257
> 
> 标签：php, multidimensional-array, sorting

我有一系列没有任何排序的城镇。我想按省的 [category][3] 排序，然后按地区的 [category][0] 排序，并显示每个分组的省及其地区，然后是其下的城镇。所以下面的数组：

```
Array
(
    [0] => Array
        (
            [name] => Name One
            [id] => 1
            [link] => http://mylink1.com
            [category] => Array
                (
                    [0] => Region 1
                    [1] => Town 7
                    [2] => Country
                    [3] => Province 2
                )    
        )

    [1] => Array
        (
            [name] => Name Two
            [id] => 2
            [link] => http://mylink2.com
            [category] => Array
                (
                    [0] => Region 1
                    [1] => Town
                    [2] => Country
                    [3] => Province 3
                )    
        )

    [2] => Array
        (
            [[name] => Name Three
            [id] => 3
            [link] => http://mylink3.com
            [category] => Array
                (
                    [0] => Region 1
                    [1] => Town 5
                    [2] => Country
                    [3] => Province 2
                )
        )

    [6] => Array
        (
            [name] => Name Four
            [id] => 4
            [link] => http://mylink4.com
            [category] => Array
                (
                    [0] => Region 1
                    [1] => Town 1
                    [2] => Country
                    [3] => Province 1
                )
        )

) 
```

...最终应该看起来像这样：

```
Country (all the same)

Province 1
- Region 1
- - Town 1 name, id, link

Province 2
- Region 1
- - Town 5 name, id, link
- - Town 7 name, id, link

Province 3
- Region 1
- - Town 1 name, id, link 
```

省是主要分组因素，然后按地区排序，城镇没有特别的顺序，但我想按字母顺序是有意义的。

我已经设法使用此引用按类别对数组进行排序：[按值排序多维数组，](https://stackoverflow.com/questions/2699086/php-sort-multidimensional-array-by-value)但无法理解如何在不使用其名称在循环中专门引用该省的情况下进一步排序。IE

```
/// shortened version..
foreach($array as $key=>$value)...
   if($value == "Province 1") : do something here with these matches
     ... etc 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:34:24.313

看一下 uasort() 函数：

[http://www.php.net/manual/en/function.uasort.php](http://www.php.net/manual/en/function.uasort.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:48:51.540

循环遍历数组我为我正在寻找的类别使用了一个开关，然后为每个组构建了另一个数组。从那里我可以按地区排序：

```
foreach($arr as $town){                             
    switch($town['blogcats']){                                  
        case "Province 1" : $province1[] = $town;
        break;
        case...
        etc
    }
} 
```

然后可以输出每个新的分组数组：

```
foreach($province1 as $eachtown) {
    echo $newtown['name'];
    ... and so forth.
} 
```

在第二个循环中，可以对 Region 进行排序。每个省都在我的页面上的列表中手动引用，这也让我可以控制位置。

但是，这个答案也可以改进......但上述工作不需要太多努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:42:45.890

我不认为你可以一步完成。

您可以像这样对您的值进行分组：

```
$grouped = array();

foreach ($data as $group)
{
    $grouped[ $group['category'][3] ][ $group['category'][0] ][ $group['category'][1] ] = array(/* ... */);
} 
```

但是您仍然必须使用`ksort()`.

您应该检查是否可以获得已经预先排序的值。例如，如果您正在使用数据库来检索这些值，那么在数据库中对它们进行排序并在 PHP 代码中将它们放入正确的（分组的）结构中将是非常简单的。

# jquery-mobile - 使用 jquery mobile 覆盖 Phonegap 默认启动画面

> ID：11768502
> 
> 赞同：1
> 
> 时间：2012-08-01T22:29:31.230
> 
> 标签：jquery-mobile, cordova, splash-screen

我使用带有 HTML5 和 CSS3 的 jQuery Mobile。当我将代码上传到 PhoneGap 云构建服务器并将应用程序放在我的 iPhone 上并启动应用程序时，我看到以下启动画面：![在此处输入图像描述](../Images/f2a48bf1ca9400b7accdbd93bc98b86b.png)

现在的问题是：我怎样才能覆盖这个图像？请注意：我没有使用常规的 phonegap 项目（例如在 Visual Studio 中），而只是一个带有 js 和 css 文件的 index.html 文件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:24:35.410

[您可以从这里](https://build.phonegap.com/docs/config-xml "使用 config.xml")获得一些有价值的信息。这是来自官方Phonegap团队。你也可以看看[这个](http://wiki.phonegap.com/w/page/36905973/Icons%20and%20Splash%20Screens "Phonegap 维基帖子")。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T22:34:44.493

Apple 现在需要启动画面。因此，如果您没有在 Phonegap Build 的配置文件中包含一个，那么编译器会为您插入那个丑陋的默认版本。因此，解决方案是确保您使用自己的自定义启动图像，并在配置文件中使用适当的设置指定该自定义图像。在那之后你应该会没事的。

[https://build.phonegap.com/blog/new-apple-app-store-submittal-rules](https://build.phonegap.com/blog/new-apple-app-store-submittal-rules)

> 如果在您的包中未找到初始屏幕，则将使用 PhoneGap 默认图像，因此请确保在设备所需的所有尺寸中包含您的初始屏幕。Apple 在此处提供了有关这些尺寸的便捷指南。

# javascript - 从 excel 中提取 Javascript

> ID：11768503
> 
> 赞同：0
> 
> 时间：2012-08-01T22:29:35.670
> 
> 标签：javascript, excel

我正在制作 Javascript/html 程序（都是本地的，没有服务器端代码），它从 excel 文件的某些行中提取信息。这部分一切正常，直到我想切换到同一文件中的新选项卡。是否有让 javascript 切换 excel 选项卡的命令？还有一种方法可以在我读完一行之后自动关闭excel进程（每次我提取数据时它都会创建一个新进程）？

以下是重要部分的片段：

```
 var Excel;
    Excel = new ActiveXObject("Excel.Application");
    Excel.Visible = false;
    Excel.Workbooks.Open("C:/Users/test.xlsx").ActiveSheet.Cells(row+1,x).Value;
    Excel.Quit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:44:30.153

由于 ActiveXObject 对象没有内在属性或方法，并且使用对象本身固有的方法，您可以尝试：

```
Excel.Sheets("Sheet2").Select; 
```

在使用 sheet 方法之前，您可能还必须使用 workbooks 方法，如下所示：

```
Excel.Workbooks("MyWorkbook").Sheets("Sheet2").Select; 
```

对于 javascript 执行，不确定是否必须`()`在`Select`调用后添加。

# scala - 强制 sbt 重新读取 ~/sbt/plugins

> ID：11768506
> 
> 赞同：1
> 
> 时间：2012-08-01T22:29:55.140
> 
> 标签：scala, sbt

我临时注释掉了`sbt-gpg-plugin`in `~/.sbt/plugin/build.sbt`，因为我在`publish-local`不同的项目中使用了很多，而且对 GPG 密码的查询完全让我紧张。

现在我需要重新**启用**该插件，因为我想推送到 Sonatype。但不知何故 sbt 不会重新检查`~/.sbt/plugin/build.sbt`，所以即使在编辑后，取消注释该行

```
addSbtPlugin( "com.jsuereth" % "xsbt-gpg-plugin" % "0.6" ) 
```

它仍然不要求 GPG 签署工件的密码。我试过`clean`了`reload`，，，，，没有运气`reboot`。`reboot full`我知道我可以重新启动计算机，这通常可以工作。但是必须有一些技巧来迫使 sbt 重新检查`~/.sbt`并识别它们的变化。

问题似乎涉及项目本身具有`project/plugins.sbt`，以某种方式干扰全局插件缓存。**sbt 版本是 0.11.3**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:40:57.743

一个相当愚蠢的解决方案，所以请添加更好的答案：

```
$ mv ~/.sbt/plugins/build.sbt ~/Desktop
$ sbt publish-local 
```

这将尝试重新加载插件，但奇妙地要求它们以 Scala 2.9.2 而不是 Scala 2.9.1 的形式出现。所以最终会出现寻找插件的问题。然后返回：

```
$ mv ~/Desktop/plugins.sbt ~/.sbt/plugins/build.sbt
$ sbt publish-local 
```

重新下载 Scala 2.9.1 的插件，并启用 GPG 插件。瞧。

* * *

**编辑**：**永远不要尝试将文件移动到基​​本目录中`~/.sbt/`——你会[搞砸的](https://stackoverflow.com/questions/11768730/sbt-starts-to-ask-for-plugins-compiled-against-scala-2-9-2)。**

# java - 禁用（灰色）XML 层中的菜单栏项 (Netbeans 7.2)

> ID：11768507
> 
> 赞同：2
> 
> 时间：2012-08-01T22:29:56.953
> 
> 标签：java, xml, menu, netbeans-7

我对 Java 编程和 NetBeans IDE 平台非常陌生。我目前正在开发 NetBeans IDE 7.2 中的 GUI 项目，并尝试自定义菜单栏。我找到了解释如何使用层 XML 文件执行此操作的资源：[https ://sites.google.com/a/geotoolkit.net/intviewer/using-netbeans-swing-components-walkthroughs/adding-a-menu-项目演练](https://sites.google.com/a/geotoolkit.net/intviewer/using-netbeans-swing-components-walkthroughs/adding-a-menu-item-walkthrough)

因此，我使用“自定义 layer.xml 文件”下提供的资源中的指南将整个菜单栏编码为 XML。在我的 GUI 开发的当前阶段，我希望禁用这些菜单栏项（灰显）。有没有办法可以在 layer.xml 文件中做到这一点？

谢谢，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:15:41.947

当然，在花了两天时间试图弄清楚这一点之后，我终于发布了这个问题并在将近一个小时后弄清楚了。如果其他人有兴趣学习如何执行此操作，则在层 XML 文件中，您需要在文件声明中添加以下内容，您希望将其显示为灰色：

```
 <attr name="instanceCreate" methodvalue="org.openide.awt.Actions.context"/>
    <attr name="type" stringvalue="org.netbeans.api.actions.Openable"/>
    <attr name="selectionType" stringvalue="ANY"/> 
```

# xml - 具有图像输出的图形差异工具？

> ID：11768509
> 
> 赞同：1
> 
> 时间：2012-08-01T22:30:18.240
> 
> 标签：xml, diff

是否有适用于 Linux 的图形差异工具可以输出显示差异的图像？我习惯用meld。

我正在尝试区分 XML 并在 XML 不同时产生视觉差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:20:53.987

kdiff3 是我最喜欢的，应该看起来类似于 meld，它也适用于 Windows。但是为什么融合不适合你，它也应该在 linux 中工作。

# objective-c - 初始化一个 NSWindowController 子类

> ID：11768511
> 
> 赞同：1
> 
> 时间：2012-08-01T22:30:27.507
> 
> 标签：objective-c, cocoa

根据 Apple 的[文档](https://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/KeyObjects/KeyObjects.html#//apple_ref/doc/uid/TP40011179-CH3-SW10)，初始化 NSWindowController 子类的推荐方法是调用 init() 而不是 initWithWindowNibName()。文档继续说，由于 NSWindowController 可能只适用于它设计的 nib，然后让子类调用 super initWithWindowNibName，如果任何 initWithWindowNib... 方法是，子类应该记录一个错误叫。

所以这就是我写的：

```
- (id) init
{
    NSLog(@"init()");
    return [super initWithWindowNibName:@"MyDocument"];
}

- (id) initWithWindowNibName:(NSString *)windowNibName
{
    NSLog(@"error...use init() instead");
    return nil;
}

- (id) initWithWindowNibName:(NSString *)windowNibName owner:(id)owner
{
    NSLog(@"error...use init() instead");
    return nil;
}

- (id) initWithWindowNibPath:(NSString *)windowNibPath owner:(id)owner
{
    NSLog(@"error...use init() instead");
    return nil;
} 
```

当它运行时，我看到输出：

```
init()
error...use init() instead 
```

所以……嗯？这是怎么回事？

有一个关于 init() 被调用两次的[stackoverflow 问题](https://stackoverflow.com/questions/4981913/nswindowcontroller-subclass-init-is-called-twice)，解决方法是一个实例是通过代码创建的，另一个是通过 nib 创建的。我的笔尖根本没有控制器对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:08:49.610

问题是这`[super initWithWindowNibName:@"MyDocument"]`只是一种方便的方法。它所做的只是调用`[self initWithWindowNibName:@"MyDocument" owner:self]`. 这当然会引发您的错误消息。您只需将`init`方法更改为：

```
- (id) init
{
    NSLog(@"init()");
    return [super initWithWindowNibName:@"MyDocument" owner:self];
} 
```

# c++ - RapidXML 奇怪的解析

> ID：11768514
> 
> 赞同：2
> 
> 时间：2012-08-01T22:30:38.667
> 
> 标签：c++, linux, rapidxml

我有一个非常烦人的问题，我试图解决它很多小时。我使用 rapidXML 和 C++ 来解析 XML 文件：

```
xml_document<> xmlin;
stringstream input; //initialized somewhere else
xmlin.clear();
xmlin.parse<0>(&(input.str()[0]));

cout << "input:" << input.str() << endl << endl;

xml_node<char> *firstnode = xmlin.first_node();
string s_type = firstnode->first_attribute("type")->value();
cout << "type: " << s_type << endl; 
```

但是我在标准输出上得到了这个：

```
input:<?xml version="1.0" encoding="utf-8"?><testxml command="testfunction" type="exclusive" />

type: exclusive" /> 
```

这可能是什么原因（打印 s_type 变量）？这很烦人，因为我不能很好地处理 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:10:53.837

其实我找到了解决办法。

Stringstream 不喜欢它的内容被修改（rapidXML 进行快速原位解析，这意味着它修改了它获得的数组的内容）。

但是，在文档中，我读到该字符串类也不喜欢它。

从 string::c_str 文档页面：

> 此数组中的值不应在程序中修改

但是当我从流中创建一个字符串时，它按预期工作：

```
xml_document<> xmlin;
stringstream input; //initialized somewhere else
string buffer = input.str()

xmlin.clear();
xmlin.parse<0>(&(buffer[0])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:16:13.567

我个人会推荐这种方法

```
 xml_document<> doc;
 string string_to_parse;                         
 char* buffer = new char[str_to_parse.size() + 1];  
 strcpy (buffer, str_to_parse.c_str());             

 doc.parse<0>(buffer);                    

 delete [] cstr; 
```

`char`从要解析的字符串中创建一个非常量数组。我一直觉得这种方式更安全、更可靠。

我曾经做过一些疯狂的事情

```
 string string_to_parse;  
 doc.parse<0>(const_cast<char*>(string_to_parse.c_str())); 
```

并且它“工作”了很长时间（直到我需要重用原始字符串的那一天它没有）。由于 RapidXML 可以修改它正在解析的 char 数组，并且由于不建议通过更改`str::string`，`c_str()`我一直使用将我的字符串复制到非 const char 数组并将其传递给解析器的方法。它可能不是最佳的并且使用额外的内存，但它是可靠的，迄今为止我从未遇到任何错误或问题。您的数据将被解析，并且可以重复使用原始字符串，而不必担心它已被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:47:23.317

我认为问题出在您未显示的代码中...首先尝试使用文字字符串-这对我来说很好...

```
xml_document<> xmlin;
char *input = "<?xml version=\"1.0\" encoding=\"utf-8\"?><testxml command=\"testfunction\" type=\"exclusive\" />";
xmlin.parse<0>(input);

xml_node<char> *firstnode = xmlin.first_node();
std::string s_type = firstnode->first_attribute("type")->value(); 
```

# c++ - 从文本 C++ 中提取字符串数据

> ID：11768515
> 
> 赞同：3
> 
> 时间：2012-08-01T22:30:49.147
> 
> 标签：c++, visual-c++

我目前正在编写一个需要从文本文件中提取字符串和数字数据的 c++ 程序。数据格式如下；

```
3225 C9+     ELECTR  C8      C        *      1.00E-6  -0.30       0.0 
```

第一个条目是一个整数，接下来的 5 个条目是字符串，最后 3 个是浮点数。任何字符串的长度都不会超过 7 个字符。

我正在逐行读取文件，然后使用提取数据；

```
sscanf(ln.c_str(),"%d  %s  %s  %s  %s  %s  %e  %e  %e",
&rref[numre],&names[numre][0],&names[numre][1],&names[numre][2],&names[numre][3],
&names[numre][4],&nums[numre][0],&nums[numre][1],&nums[numre][2]); 
```

这工作正常，直到我遇到一条线；

```
 3098 SIC2H3+ ELECTR  SIC2H2  H        *      1.50E-7  -0.50       0.0 
```

其中一个条目是完整的 7 个字符。在这种情况下，我得到；

```
names[3097][0] = "SIC2H3+ELECTR" 
```

和，

```
names[3097][1] = "ELECTR" 
```

任何人有任何想法......他们将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T22:36:04.927

最可能的问题在于`names`: 如果您将其声明为包含七个或更少字符，并且忘记为终止零分配空间，您将得到您所描述的结果。

```
char names[MAX][4][7] 
```

将有足够的空间容纳长度为 6 或更少的字符串；对于长度为 7 的字符串，您需要

```
char names[MAX][4][8] 
```

# javascript - jquery文本输入框传递给变量

> ID：11768516
> 
> 赞同：1
> 
> 时间：2012-08-01T22:30:50.783
> 
> 标签：javascript, jquery

这是我第一次使用 jquery，虽然这是一个相当简单的任务，但我已经被困住了。我有一个输入框，里面有一天中的时间。我想创建一个按钮来获取时间并将其发送到变量（setTime），以便我可以在脚本的其他地方使用时间。但是我在传递变量时遇到了麻烦，我添加了一个警报窗口，但我得到的只是空白警报或“未定义”警报。第一行

开始时间.... 工作正常，它的 setTime 东西坏了。

页眉： `setTime = $('#setTime').text();` $('#formTime').timeEntry({show24Hours: true});

页面正文：

```
<p>Start Time <input type="text" size="2" id="formTime" class="spinners" value="" /> </p>

    <input type="button" value="Set Time" onclick="$('#setTime').val('#formTime');" />
    <input type="button" value="Show Date" onclick="alert(setTime);" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:47:34.833

您必须对代码进行一些更改。
例如，通过添加一些 id 来更新您的 Html。

```
<p>
    Start Time <input type="text" size="2" id="formTime" class="spinners" value="" />
</p>

<input id="setTime" type="button" value="Set Time" />
<input id="showTime" type="button" value="Show Date" /> ​ 
```

就我个人而言，我不喜欢将脚本分配给 html 控件中的事件，因为它们变得难以维护并向页面添加混乱。
您可以在脚本标签内的 html 页面底部编写脚本，或者更好的是，使用外部 js 文件。外部 js 文件也将保持您的 Html 干净并且您的脚本不引人注目。

```
var setTime = 0;
var $fromTime = $("#formTime")

$("#setTime").off("click").on("click", function(){
    setTime = $fromTime.val();
});

$("#showTime").off("click").on("click", function(){
    alert(setTime);
}); 
```

查看工作[**演示**](http://jsfiddle.net/FranWahl/fx7C2/)

使用 jQuery 有时会让人感到困惑，但在线[**文档**](http://docs.jquery.com/Main_Page)非常棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:33:04.187

`#setTime`意思是“id 为'setTime'的元素”——你没有那个id的元素，你试图获取值的控件根本没有id。

`timeEntry`不是 jQuery 方法，所以当你尝试调用它时会出错。如果您正在使用您认为应该添加该方法的插件，那么您应该这样说。

`.val('#formTime')`将表单控件的值设置为字符串*#formTime*。如果您想获取该值，请不要向该方法传递参数……并将方法调用的返回值分配给某些东西。

您可能应该通过[对编程和 JavaScript 的介绍来](http://www.w3.org/wiki/Web_Standards_Curriculum#JavaScript_core_skills)工作。

# python - 为什么 multiprocess.Process 不写文件，而 threading.Thread 呢？

> ID：11768520
> 
> 赞同：0
> 
> 时间：2012-08-01T22:31:20.353
> 
> 标签：python, multithreading, concurrency, multiprocessing

dotestsrl 和 dotestmt 函数工作，它们创建并写入文件。dotestmp 函数运行速度很快，但不创建也不写入文件。我该怎么做才能使 dotestmp 执行与 dotestmt 相同的任务但使用 multiprocessing.Process？（这是在运行 Windows 7 和 Python 3.2.3 的双核超线程机器上；如果重要的话）

```
import sys, os, datetime, threading, multiprocessing

def dowrk(fp):
    with open(fp, mode="w") as f:
        for i in range(1000000):
            f.write(str(i))

def dotestsrl():
    fp = "C:\\Users\\user1\\Desktop\\"
    fn = "tst.txt"
    start = datetime.datetime.now()
    for fni in range(1, 5):
        dowrk(fp+str(fni)+fn)
    end = datetime.datetime.now()
    print("***DONE at: ", end - start)

def dotestmt():
    fp = "C:\\Users\\user1\\Desktop\\"
    fn = "tst.txt"
    lst = []
    start = datetime.datetime.now()
    for fni in range(1, 5):
        t = threading.Thread(target=dowrk, args=(fp+str(fni)+fn,))
        lst.append(t)
        t.start()
    for te in lst:
        te.join()
    end = datetime.datetime.now()
    print("***DONE at: ", end - start)

def dotestmp():
    fp = "C:\\Users\\user1\\Desktop\\"
    fn = "tst.txt"
    lsp = []
    start = datetime.datetime.now()
    for fni in range(1, 5):
        p = multiprocessing.Process(target=dowrk, args=(fp+str(fni)+fn,))
        lsp.append(p)
        p.start()
    for pe in lsp:
        pe.join()
    end = datetime.datetime.now()
    print("***DONE at: ", end - start)

dotestsrl() # ***DONE at:  0:00:08.029000
dotestmt() # ***DONE at:  0:00:07.697000
dotestmp() #  ***DONE at:  0:00:00.257000, but doesn't actually write files. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:48:20.820

你可以试试：

```
def dowrk_safe(*args, **kwargs):
    try:
        return dowrk(*args, **kwargs)
    except Exception:
        import sys
        import traceback
        traceback.print_exc(file=sys.stderr) 
```

而不是`dowrk()`函数，看看是否有任何错误。

# android - 在列表视图中加载图像后，列表视图滚动真的很慢

> ID：11768522
> 
> 赞同：2
> 
> 时间：2012-08-01T22:31:46.417
> 
> 标签：android, android-listview, android-image

让我先解释一下我在做什么，然后再进入所有内容

基本上，我给用户一个选项来从 SD 卡中选择图像，将所选图像的 Uri 存储在我的数据库中，并将其作为列表项的头像，但是带有头像的列表项越多，滚动的速度就越慢清单是

我用一个加载列表`Loader`

```
 @Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {

    return new CursorLoader(getActivity(),BowlersDB.CONTENT_URI,
            new String[] {BowlersDB.ID,BowlersDB.FIRST_NAME,BowlersDB.LAST_NAME,BowlersDB.PHOTO_URI},null,null,BowlersDB.LAST_NAME + " COLLATE LOCALIZED ASC");
} 
```

我有一个自定义适配器，可以调整图像大小设置文本视图等。

```
@Override
    public void bindView(final View view,final Context context,final Cursor cursor){
        final int id = cursor.getInt(0);;
        final QuickContactBadge image = (QuickContactBadge)view.findViewById(R.id.quickContactBadge1);
        image.setOnClickListener(new View.OnClickListener(){

            @Override
            public void onClick(View v) {
                if(!fromGame){
                    bowlerID = id;
                    Intent i = new Intent(Intent.ACTION_PICK,android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                    startActivityForResult(i,1);
                }
            }

        });
        String uri = cursor.getString(3);
        if(uri != null){

                    InputStream input=null;
                    try {
                        input = getActivity().getContentResolver().openInputStream(Uri.parse(cursor.getString(3)));
                        BitmapFactory.Options options = new BitmapFactory.Options();
                        options.inJustDecodeBounds = false;
                        Bitmap og = BitmapFactory.decodeStream(input,null,options);
                        int height = options.outHeight;
                        int width = options.outWidth;
                        BitmapFactory.decodeResource(getResources(), R.drawable.ic_contact_picture, options);

                        int imageHeight = options.outHeight;
                        int imageWidth = options.outWidth;
                        try {
                            input.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                        float scaledHeight = ((float)imageHeight)/height;
                        float scaledWidth = ((float)imageWidth)/width;

                        Matrix matrix = new Matrix();
                        matrix.postScale(scaledWidth, scaledHeight);

                        final Bitmap resized = Bitmap.createBitmap(og, 0, 0, width, height, matrix, true);
                        try {
                            input.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                                image.setImageBitmap(resized);

                    } catch (FileNotFoundException e) {
                        e.printStackTrace();
                    }
                }else{
                    image.setImageResource(R.drawable.ic_contact_picture);
                }

        TextView first = (TextView)view.findViewById(R.id.bListTextView);
        TextView last = (TextView)view.findViewById(R.id.bListTextView2);
        first.setText(cursor.getString(1));
        last.setText(cursor.getString(2));
    }

} 
```

现在我知道它可能是图像的大小导致它如此缓慢但是当我把那段代码放在一个单独的线程中并且没有任何效果但我认为`LoaderManager`无论如何都会在后台加载所有内容

这是我的行 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:minHeight="60dp"
android:id="@+id/names_layout"
android:background="@drawable/list_item_state">

<QuickContactBadge
    android:id="@+id/quickContactBadge1"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_contact_picture"
    style="?android:attr/quickContactBadgeStyleWindowLarge" />

<TextView
    android:id="@+id/bListTextView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/quickContactBadge1"
    android:background="@drawable/list_item_state"
    android:paddingLeft="20dp"
    android:paddingTop="2dp"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="20dp"
    android:textColor="?android:attr/textColorPrimary" />

<TextView
    android:id="@+id/bListTextView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/quickContactBadge1"
    android:layout_below="@+id/bListTextView"
    android:paddingLeft="20dp"
    android:background="@drawable/list_item_state"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textSize="15dp"
    android:textColor="?android:attr/textColorSecondary" 
    android:layout_alignBottom="@+id/quickContactBadge1"/>

</RelativeLayout> 
```

`Quick Contact Badge`保存图像，如果没有图像集，我会设置默认图像。

那么我该如何解决这个问题呢？

我正在尝试做的一个例子是谷歌音乐应用程序，其中专辑列表包含所有这些专辑头像并且滚动没有问题，它们似乎根据需要出现，但显然它有点不同，因为图像是可能是从服务器下载的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:27:36.027

您可以延迟加载列表视图的图像。这是一个完整的例子：

[http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:40:15.170

您正在 bindView 线程中流式传输图像，这通常不是一个好主意。我通常在 asyncTask 中下载和构建位图 - 或者更确切地说，在 RoboAsyncTask 中。我将 ImageView 与图像 URL 一起传递，因此图像是在下载或位图创建完成后在 asynctask 的 onSuccess() 中设置的。您在屏幕上看到的是在其他内容之后不久出现的图像。您还可以将占位符资源传递给异步任务，以便在下载完成时显示。

在您的活动或片段中：

```
 mediaManager.setImage(imageUrl, imageView, R.drawable.placeholder_image); 
```

在媒体管理器中：

```
 @Override
public void setImage(String imageUrl, ImageView imageView, int placeholderResource) {
    new SetImageTask(context, imageUrl, imageView, placeholderResource).execute();
}

@Override
public Bitmap getImage(String imageUrl) throws IllegalStateException, IOException, SQLException {

    // put your code to fetch image here....

} 
```

在 SetImageTask（扩展 RoboAsyncTask）中：

```
 @Override
public void onPreExecute() {
    imageView.setImageResource(placeholderResource);
}

@Override
public Bitmap call() throws Exception {
    return mediaManager.getImage(imageUrl);
}

@Override
public void onSuccess(Bitmap bitmap) {
    imageView.setImageBitmap(bitmap);
} 
```

# show-hide - 输入字段未显示在带有单选按钮的隐藏/显示 div 中

> ID：11768526
> 
> 赞同：0
> 
> 时间：2012-08-01T22:32:14.267
> 
> 标签：show-hide

当人们单击某个单选按钮时，我设置了一个非常基本的隐藏/显示 div 功能。在其中一个隐藏的 div 中，我需要创建一个表单，但是当我将输入字段添加到隐藏的 div 时，我的功能停止工作。

```
<div id="tabs">
<div id="nav">
  <input type="radio" name="primary_contact_director" value="Yes" class="div1">Yes</input>
    <input type="radio" name="primary_contact_director" value="No" class="div2">No</input>
</div>

<div id="div1" class="tab">
  <p>this is div 1</p>
</div>

<div id="div2" class="tab">
  <p>this is div 2</p>
</div>
</div>

<script type="text/javascript" charset="utf-8">
(function(){
  var tabs =document.getElementById('tabs');
  var nav = tabs.getElementsByTagName('input');

  /* 
  * Hide all tabs
  */
  function hideTabs(){
    var tab = tabs.getElementsByTagName('div');
    for(var i=0;i<=nav.length;i++){
      if(tab[i].className == 'tab'){
        tab[i].className = tab[i].className + ' hide';
      }
    }
  }

  /*
  * Show the clicked tab
  */
  function showTab(tab){
    document.getElementById(tab).className = 'tab'
  }

  hideTabs(); /* hide tabs on load */

  /* 
  * Add click events
  */
  for(var i=0;i<nav.length;i++){
    nav[i].onclick = function(){
      hideTabs();
      showTab(this.className);
    }
  }
})(); 
```

但是，当我添加时，此代码有效

```
<label class="title">First Name:</label>
    <input type="text" name="first_name" class="form">
<label class="title">Last Name:</label>
    <input type="text" name="last_name" class="form">
<label class="title">Business Address:</label>
    <span class="instructions">Please enter a physical address. P.O. Boxes are not acceptable for filing.<br>
    If your business is run out of your home, please list that address.</span><br>
    <input type="text" name="business_address" class="form">
<label class="title">City:</label>
    <input type="text" name="business_city" class="form">
<label class="title">State</label>
    <select name="business_state">
        <option value="California">California</option>
    </select>
<label class="title">Zip Code:</label>
    <input type="text" name="business_zip" class="form">
<label class="title">Business Phone Number:</label>
    <input type="text" name="business_phone" class="form"><br> 
```

对我的 div2 它停止工作。

希望这是一个清晰的解释。任何帮助都将受到赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:10:11.270

在你的`hideTabs()`函数中，你有两个错别字。

首先，您正在遍历`tab[]`数组，但您正在根据数组的长度检查它`nav[]`。这是有效的，因为您在第一个示例中具有相同数量的元素，但这只是巧合。如果您根据`tab[]`数组的长度对其进行评估，它会更好地工作。您遇到的另一个问题是您的 for 循环以大于或等于长度结束。问题是数组从零开始计数，因此如果长度为 3，则列表中的项目为 tab[0]、tab[1] 和 tab[2]。您的代码试图为不存在的 tab[3] 设置一些东西。

这是工作代码：

```
/* 
* Hide all tabs
*/
function hideTabs(){
  var tab = tabs.getElementsByTagName('div');
  for(var i=0;i<tab.length;i++){
    if(tab[i].className == 'tab'){
      tab[i].className = tab[i].className + ' hide';
    }
  }
} 
```

将来，如果您的脚本停止工作，您应该考虑使用 Chrome（或任何其他浏览器）中的 javascript 控制台检查错误——通常会有一个错误提示您正在发生什么。

# iphone - 在采取行动之前如何知道几个块是否已完成执行？

> ID：11768527
> 
> 赞同：5
> 
> 时间：2012-08-01T22:32:42.693
> 
> 标签：iphone, ios, ios5, uiview, objective-c-blocks

在调用之前，我`animateWithDuration:animations:completion:`用来移动我的用户界面的几个元素（大约 4 个元素） 。`removeFromSuperview:`

我的问题是，我怎么知道所有这些动画在调用之前已经完成`removeFromSuperview:`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T15:14:26.387

好的，回答我自己的问题。

我最终做了这样的事情：

```
 // Create dispatch queue & group
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_group_t group = dispatch_group_create();

    // Two group enters
    dispatch_group_enter(group);
    dispatch_group_enter(group);

    // (notice the group parameter in dispatch_group_leave)
    [UIView animateWithDuration:0.3 animations:^{
        self.pickerView.frame = CGRectMake( self.pickerView.frame.origin.x
                                           , self.view.bounds.size.height + self.pickerView.frame.size.height/2
                                           , self.pickerView.frame.size.width
                                           , self.pickerView.frame.size.height);
    } completion:^(BOOL finished){
        dispatch_group_leave(group);
    }]; 

    [UIView animateWithDuration:0.3 animations:^{
        self.navigationBar.frame = CGRectMake( self.navigationBar.frame.origin.x
                                              , -self.navigationBar.frame.size.height
                                              , self.navigationBar.frame.size.width
                                              , self.navigationBar.frame.size.height);
    } completion:^(BOOL finished){
        dispatch_group_leave(group);
    }];

    // Finishing callback
    dispatch_group_notify(group, queue, ^{
        [self.view removeFromSuperview];
    });

    // Release the group
    dispatch_release(group); 
```

我希望这可以作为其他人的榜样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T01:23:26.593

您还可以使用 CATransaction。它将捕获任何嵌入的动画：

```
 [CATransaction begin];
 [CATransaction setCompletionBlock:^{ // all animations finished here }];
 [UIView animateWithDuration...
 [UIView animateWithDuration...
 ...
 [CATransaction commit]; 
```

这将使您不必自己跟踪动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:42:40.353

创建一个调度队列，根据您正在执行的动画数量暂停它。将一个块添加到从 superview 中删除的队列中。在每个动画的完成块中恢复挂起的队列。当最后一个完成时，排队的块将运行。

# jpa - 使用 eclipselink 查询可嵌入元素的集合

> ID：11768528
> 
> 赞同：1
> 
> 时间：2012-08-01T22:32:45.777
> 
> 标签：jpa, eclipselink

我有以下 JPA (2.0.2) 实体：

员工

```
@Entity
@Table(name = "T_EMPLOYEE")
public class Employee {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @ElementCollection
    @CollectionTable(name = "T_COMPETENCE")
    private Set<Competence> competences;

    // Getter and setters
} 
```

和能力

```
@Embeddable
public class Competence {
    @JoinColumn(nullable = false)
    @ManyToOne
    private Skill skill;

    // Getter and setters
} 
```

（技能实体不应该很重要，因此被省略，各种附加属性也是如此。）

我正在使用 EclipseLink (2.2.0) 通过 DAO 查询我的实体。现在我想使用以下查询：

```
public List<Employee> findBySkill(Skill skill) {
    TypedQuery<Employee> query = getCurrentEntityManager().createQuery(
        "SELECT e FROM Employee e JOIN e.competences c WHERE c.skill = :skill", 
        Employee.class);
    query.setParameter("skill", skill);
    return query.getResultList();
} 
```

但它不断抛出以下异常：

```
Caused by: Exception [EclipseLink-8030] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Error compiling the query [SELECT e FROM Employee e JOIN e.competences c WHERE c.skill = :skill], line 1, column 54: unknown state or association field [skill] of class [com.kaio.model.Competence].
    at org.eclipse.persistence.exceptions.JPQLException.unknownAttribute(JPQLException.java:457)
    at org.eclipse.persistence.internal.jpa.parsing.DotNode.validate(DotNode.java:88)
    at org.eclipse.persistence.internal.jpa.parsing.Node.validate(Node.java:91)
    at org.eclipse.persistence.internal.jpa.parsing.BinaryOperatorNode.validate(BinaryOperatorNode.java:34)
    at org.eclipse.persistence.internal.jpa.parsing.EqualsNode.validate(EqualsNode.java:41)
    at org.eclipse.persistence.internal.jpa.parsing.WhereNode.validate(WhereNode.java:34)
    at org.eclipse.persistence.internal.jpa.parsing.ParseTree.validate(ParseTree.java:207)
    at org.eclipse.persistence.internal.jpa.parsing.ParseTree.validate(ParseTree.java:183)
    at org.eclipse.persistence.internal.jpa.parsing.ParseTree.validate(ParseTree.java:173)
    at org.eclipse.persistence.internal.jpa.parsing.JPQLParseTree.populateReadQueryInternal(JPQLParseTree.java:110)
    at org.eclipse.persistence.internal.jpa.parsing.JPQLParseTree.populateQuery(JPQLParseTree.java:84)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:216)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:187)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:139)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.<init>(EJBQueryImpl.java:123)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.createQuery(EntityManagerImpl.java:1376)
    ... 48 more 
```

消息很清楚：在我的职业能力上找不到属性技能。但在我看来，没有理由这样做。还是我对我的问题有错误的方法？我应该如何在可嵌入对象列表中查询？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:56:14.343

好的，这似乎是一个错误，并且已在更高版本的eclipse链接中解决。我将项目更新到 EclipseLink 2.4，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:05:57.017

您的`Competence`表将有一个 Skill.id 字段，因此请尝试：

```
"SELECT e FROM Employee e JOIN e.competences c WHERE c.skill.id = :skillId"

query.setParameter("skillId", skill.getId()); 
```

# ruby - 为什么来自 Ruby sequel 和 Postgres psql 的时区信息不同？

> ID：11768530
> 
> 赞同：1
> 
> 时间：2012-08-01T22:32:49.693
> 
> 标签：ruby, postgresql, timezone

这是 Postgres 的查询结果：

```
$ psql ... -c 'select the_date from foo where foo_id in (998,999)'
     the_date      
------------------------
 2012-03-07 09:34:47.98
 2012-03-16 11:31:25.336 
```

the_date 是“没有时区的时间戳”。

这是一个 Ruby 程序：

```
#!/usr/bin/env ruby

require 'sequel'

@DB = Sequel.connect({...})
query = "select the_date from foo where foo_id in (998,999)"
@DB[query].each do |row|
  warn row
end 
```

和一些输出：

```
{:the_date=>2012-03-07 09:34:47 -0600}
{:the_date=>2012-03-16 11:31:25 -0500} 
```

-0500 和 -0600 是从哪里来的？那是服务器和客户端机器（美国/中部）的“[奥尔森时区](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)”，但为什么 Ruby 添加它而 psql 没有呢？

我一直在阅读[文档](http://www.postgresql.org/docs/9.0/static/datatype-datetime.html#DATATYPE-TIMEZONES)，我很困惑。

服务器是 Postgres 9.0.4，客户端是 psql 9.1.4，sequel 是 3.33.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:30:22.820

该列的类型为“没有时区的时间戳”。因此，当 Postgres 在此列中显示一个值时，它只显示没有时区的时间戳。但是，Sequel 想要将 Postgres 时间戳转换为 Ruby Time 类的实例，并且 Time 类的实例必须指定一个时区——要么是本地时区的时间，要么是 UTC 的时间。因此，续集必须选择一个。默认情况下，它选择您当地的时区。

您可以在 Sequel 中配置数据库和应用程序时区。请参阅[http://sequel.rubyforge.org/rdoc/classes/Sequel/Timezones.html](http://sequel.rubyforge.org/rdoc/classes/Sequel/Timezones.html)

例如，这是我方便使用的数据库的默认 Sequel 行为：

```
>   c['select * from actors'].each do |row|; puts row[:created_at]; end
Thu Jul 12 20:33:17 -0400 2012 
```

这里假设时间戳在我的本地时区 (EDT) 中。

但是，如果我这样做：

```
> Sequel.database_timezone = :utc
 => :utc 
> c['select * from actors'].each do |row|; puts row[:created_at]; end
Thu Jul 12 20:33:17 UTC 2012 
```

然后假设时间戳为 UTC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:12:23.203

我对红宝石和日期/时间/时间戳进行了一些奇怪的处理。看起来程序正在尝试将结果转换为已知的数据类型并自动转换它，这就是为什么您最后会收到 5 位时区代码。

# r - 在r中将unix时间矩阵转换为实时矩阵

> ID：11768535
> 
> 赞同：1
> 
> 时间：2012-08-01T22:33:19.373
> 
> 标签：r

如何通过在 R 中使用 Unix 时间转换原始矩阵来创建实时矩阵？例如，

```
User          V1                 V2
1000        1300203021       1298302123
1001        ...              ... 
```

下面的答案是在两个值上完成的。这很有帮助。也就是说，对于我的应用程序，我正在使用一个当前有 21 列和 30000 行的数据框，每个单元格都填充有 unix 时间戳数据。我将如何使用上面的操作并同时转换每个单元格，同时保留**原始矩阵结构**（21 列和 30000 行）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:47:36.863

使用`as.POSIXct()`：

```
R> as.POSIXct(c(1300203021, 1298302123), origin="1970-01-01", tz="GMT")
[1] "2011-03-15 15:30:21 GMT" "2011-02-21 15:28:43 GMT"
R> 
```

您通常也想提供一个时区。该函数是矢量化的，因此您可以一次输入整个列。

# php - 编写好友列表功能

> ID：11768536
> 
> 赞同：1
> 
> 时间：2012-08-01T22:33:27.423
> 
> 标签：php, mysql, codeigniter

我想首先指出我还不太擅长高级 MySQL。所以请原谅我。我想要做的是创建一个朋友列表，如下图所示：

![在此处输入图像描述](../Images/8f936976d4258bf60b65067410489873.png)

这是我的数据库结构：

好友表： ![在此处输入图像描述](../Images/3c4b49d9a03ff780a224903929d2491c.png)

用户表： ![在此处输入图像描述](../Images/8b10d8310ff01be5d2679e6d8cb9d803.png)

到目前为止，这是我的代码：

```
<?php  $query3 = $this->db->query("SELECT * FROM friends WHERE node1id = '{$myuserid}'");
        foreach($query3->result() as $row1) {
        echo $row1->node1id."<br>"; } ?> 
```

我知道这段代码在逻辑上不正确。我想要做的是拉入用户表。如果relationType = 朋友，则在朋友列表中显示用户的名字和姓氏。我有两个变量。$selectedId 和 $myuserid。$selectedId 是用户正在查看的配置文件的 ID。$myuserid 是登录用户的 id。我将如何在逻辑上对这种类型的功能进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:40:25.040

```
SELECT username FROM users 
WHERE userid IN 
    (SELECT node2id FROM friends WHERE node1id = '{$myuserid}' 
    AND relationType = 'friends') 
```

和

```
echo $row1->username 
```

对于共同的朋友，你可以这样做

**编辑**：刚刚意识到这个的最后一个版本是不正确的，现在修复（未经测试）

```
SELECT username FROM users 
WHERE userid IN 
    (SELECT node2id FROM (
        (SELECT node2id FROM friends WHERE relationType = 'friends' AND node1id <> '{$myuserid}' AND node1id IN
            (SELECT node2id FROM friends WHERE relationType = 'friends' AND node1id = '{$myuserid}'))) 
         WHERE node2id IN (SELECT node2id FROM friends WHERE relationType = 'friends' AND node1id = '{$myuserid}')) 
```

这首先选择朋友，然后选择与自己不相等（不等于<>）的那些朋友的朋友。然后它只从该列表中选择与您自己的朋友 ID 匹配的朋友 ID。然后它从用户表中选择这些用户的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:41:27.790

您可以在下面的选择中进行选择：

```
SELECT * FROM users WHERE idusers IN (
   SELECT node2id FROM friends WHERE node1id = $myUserId
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:58:42.413

以下是如何获取特定用户的所有朋友 ( `$selectedid`)，并确定他们的每个朋友是否是共同的朋友：

```
SELECT    b.*, 
          c.myfrnd IS NOT NULL AS isMutual
FROM      (
          SELECT IF(node2id = '$selectedid', node1id, node2id) AS usrfrnd
          FROM   friends
          WHERE  '$selectedid' IN (node1id,node2id) AND
                 relationType = 'friends'
          ) a
JOIN      users b ON a.usrfrnd = b.userid
LEFT JOIN (
          SELECT IF(node2id = '$myuserid', node1id, node2id) AS myfrnd
          FROM   friends
          WHERE  '$myuserid' IN (node1id,node2id) AND
                 relationType = 'friends'
          ) c ON b.userid = c.myfrnd
ORDER BY  isMutual DESC 
```

该列`isMutual`将包含`1`朋友是否是共同的朋友，否则将包含`0`。共同的朋友首先出现在结果集中。

您必须考虑的是用户可能在列`node1id`或`node2id`中，因此为了获得一致的联接，我们使用子选择来强制参数 userids (`$selectedid`和`$myuserid`) 的朋友在同一列中。

让我知道这是如何工作的。

# php - 如何将空 XML 节点转换为空字符串而不是 SimpleXMLElement

> ID：11768539
> 
> 赞同：4
> 
> 时间：2012-08-01T22:33:44.750
> 
> 标签：php, simplexml

我有一个有时有空节点的 XML 字符串。当使用 simplexml_load_string 解析它时，解析器将任何空节点（示例`<node></node>`）解释为空的 SimpleXMLElement。我实际上更希望这些作为空字符串出现，或者完全省略。

我试过使用 LIBXML_NOBLANKS 如下所示，但它似乎没有效果。这是一些演示这种情况的代码。节点“p2”为空：

```
$xml = "<xml><p1>1</p1><p2></p2><p3>3</p3></xml>";

$obj = simplexml_load_string($xml, 'SimpleXMLElement', LIBXML_NOBLANKS);

header("Content-type: text/plain");

echo "STRING\n-----\n" . $xml;
echo "\n\nOBJ\n---\n" . print_r($obj,1);
echo "\n\nJSON\n----\n" . json_encode($obj); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-12T18:28:05.513

这是空节点的工作示例：

```
 $nodes = $rootNode->xpath("//*[text()='']");
    foreach ($nodes as $node) {
        unset($node->{0});
    } 
```

`unset($node->{0})`- 是一种破坏该节点并将其从父节点中删除的技巧。

# objective-c - iphone开发中初始化类的问题

> ID：11768546
> 
> 赞同：-1
> 
> 时间：2012-08-01T22:34:33.117
> 
> 标签：objective-c, cocos2d-iphone, initialization

嘿伙计们对这个菜鸟问题感到抱歉，但我很难为我已经开始制作的 iphone 游戏初始化我自己创建的类。在我开始实际开发我的游戏之前，我进行了一次快速测试，看看我已经完成的内容是否可以工作，并且我正在测试的类不会初始化。这是我所拥有的：

```
 @implementation Game
    SceneController *sceneController;

    +(id)scene {...} // just the default scene method created by cocos2d

    -(id)init{
        if((self=[super init])){
            [[sceneController performSelector:@selector(alloc)]performSelector:@selector(init)];
            CGSize size = [[CCDirector sharedDirector] winSize];
            CCLabelTTF *label=[CCLabelTTF labelWithString:[NSString stringWithFormat:@"%i",[sceneController performSelector:@selector(xxx)]] fontName:@"Marker Felt" fontSize:64];
            [self addChild: label];
        }
        return self;
    }

    // IN ANOTHER CLASS
    @implementation SceneController
    int xxx; // not a real variable just used for the test

    -(id)init{
        if((self=[super init])){
            xxx=432;
        }
        return self;
    }

    -(int)xxx{
        return xxx;
    } 
```

我的问题是，它应该只是说 0，而不是像它一样读取 432 的标签。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:42:50.270

```
[[sceneController performSelector:@selector(alloc)] performSelector:@selector(init)]; 
```

哇。这就像从后备箱进入汽车一样。有趣的是，这仍然有效。或者也许它没有，这就是你得到错误的原因。

无论如何，要初始化一个类（任何 Objective-C 教程都会教你）你这样做：

```
sceneController = [[SceneController alloc] init]; 
```

您还应该在 init 方法中添加一个断点以测试它是否实际运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:43:24.880

看起来你没有`SceneController`正确地构造你的对象。

在您`init`的 Game 方法中，您需要进行如下调用：

`sceneController = [[SceneController alloc] init];`

而不是这个：

`[[sceneController performSelector:@selector(alloc)]performSelector:@selector(init)];`

然后您的`sceneController`实例变量被正确初始化并且您的`init`方法将被调用。

# javascript - 使用 javascript SDK 的 Facebook 用户电子邮件 ID

> ID：11768547
> 
> 赞同：1
> 
> 时间：2012-08-01T22:34:54.937
> 
> 标签：javascript, facebook, facebook-graph-api, google-chrome, facebook-javascript-sdk

我目前正在使用以下代码来获取使用我的应用程序的用户的电子邮件 ID

```
function get_id(cb){
    FB.init({
        appId  : .......,
        status : true, // check login status
        cookie : true, // enable cookies to allow the server to access the session
        xfbml  : true // parse XFBML
    });

    FB.login(function(response) {
        if (response.authResponse) {
            var token = response.authResponse.accessToken;
            alert(token);
            accessToken = token;
            FB.api('/me?access_token=' + token + '', function (response) {

                cb(response.email);

            });

        }

     },{scope: 'email'});

    (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
    }(document));

}; // ending of get_id()

get_id(function (email) {
    userID=email;
    alert(email);
}); 
```

当前代码在一个单独的 javascript 文件中，当按下按钮时调用此函数，我也包含`<script src="http://connect.facebook.net/en_US/all.js"></script>`在 HTML 文件中。我的浏览器（谷歌浏览器）每次尝试访问它时都会出现以下错误“未捕获的 ReferenceError：FB 未定义”

我对开发 Facebook 应用程序相对较新，所以我所拥有的所有参考资料都是 facebook 上的开发人员页面，我确信这是一个小错误，但我无法理解它，如果有人能指出我可以在哪里，我将不胜感激会出错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T15:33:17.143

您的代码将无法正确加载。这部分：

```
(function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
}(document)); 
```

不应该在任何函数内部，把它放在一个脚本标签中，在正文打开之后。它不能在单独的文件中。这只会异步加载 all.js，即 Facebook 的 JS SDK。如果您使用异步加载，则不应放入`<script src="http://connect.facebook.net/en_US/all.js"></script>`文档，因为这将执行同步加载。

您的代码的另一部分：

```
FB.init({
    appId  : .......,
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true // parse XFBML
}); 
```

也不应该在函数里面。这个fragment负责在你的页面中启动FB JS SDK，使用你的app信息，每个页面只需要调用一次，否则你会多次启动引擎，它会有一个混乱的行为。“FB”对象只会在 FB JS SDK 加载后创建。由于异步负载，您不知道它何时会发生。因此，您必须将 FB.init 分配给此窗口事件：

```
window.fbAsyncInit = function() {
    FB.init({
        appId  : .......,
        status : true, // check login status
        cookie : true, // enable cookies to allow the server to access the session
        xfbml  : true // parse XFBML
    });
}; 
```

您想创建一个使用 Facebook 信息的 get_id 函数。你必须小心。您确定在完全加载 FB JS SDK 后会调用此函数，您可以在页面的任何部分创建它。但我认为最安全的方法是在 window.fbAsyncInit 中创建它。不用担心令牌，SDK 会为您完成：

```
window.fbAsyncInit = function() {
    FB.init({
        appId  : .......,
        status : true, // check login status
        cookie : true, // enable cookies to allow the server to access the session
        xfbml  : true // parse XFBML
    });

    function get_id(cb){
        FB.login(function(response) {
            if (response.authResponse) {
                FB.api('/me', function (response) {
                    cb(response.email);
                });
            }
        },{scope: 'email'});
    }

}; 
```

但是当你这样做时，你将不确定你的函数是否已经创建。因此，当您调用它时，您必须测试它是否存在：

```
if(get_id && typeof get_id == 'function') { 
    // It's safe to call your function, go ahead
    get_id(function (email) {
        userID=email;
        alert(email);
    });
} else {
    // Your function does not exists yet, do other stuff
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:40:57.190

你需要把：

```
(function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
}(document)); 
```

功能失效`get_id`。所以它在你按下按钮之前被调用

PS：您不需要`?access_token=`手动传递 - FB JS SDK 为您完成

# jira - 如何在 JIRA 中查看或查询问题的原始到期日期？

> ID：11768550
> 
> 赞同：2
> 
> 时间：2012-08-01T22:35:12.580
> 
> 标签：jira

在 JIRA 中，到期日期可以随着项目里程碑的变化而定期更新。虽然这是有用的功能，但有时能够将最初输入的到期日期与问题的当前到期日期进行比较会很有用。

此信息保留在[Change History 数据库表中](https://developer.atlassian.com/display/JIRADEV/Database+Schema#DatabaseSchema-ChangeHistory)，但是当我尝试使用[JIRA 5.0 中提供](https://confluence.atlassian.com/display/JIRA/JIRA+5.0+Release+Notes#JIRA5.0ReleaseNotes-enhancementstojql)的 JQL 历史查询功能时，JIRA 返回错误消息“历史搜索不支持 'duedate' 字段。”

在这一点上，我感觉卡住了。有什么方法（除了编写自定义插件或手动解析数据库）来提取这些有用的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:58:01.607

您可以使用[JIRA 行为插件](https://studio.plugins.atlassian.com/wiki/display/JBHV/JIRA+Behaviours+Plugin)将原始日期保存在自定义字段中，使用类似：

```
FormField due_date = getFieldByName("Due Date")
FormField orig_due_date= getFieldByName("Original Due Date")

if (orig_due_date.getFormValue() == '') {
 orig_due_date.setFormValue(due_date)
} 
```

通过将日期保存到自定义字段，您将能够使用 JQL 根据原始到期日期查找和排序问题。

# ios - 用于 iOS 和 OS X 开发的共享代码库

> ID：11768553
> 
> 赞同：14
> 
> 时间：2012-08-01T22:35:36.853
> 
> 标签：ios, xcode, macos, multiplatform, code-sharing

我们有一个相当丰富的电子学习应用程序，主要使用 cocos2d 构建。目前我们处于 alpha 阶段，希望设置我们的项目结构，以便我们还可以构建一个 Mac 版本以针对 Mac App Store。它大约是 cocos2d 的 80%，在 UIKit 中有一些初始屏幕，必须移植到 Mac（重写）。

从单个代码库同时针对 Mac 和 iOS 应用商店的推荐设置是什么？我假设选择是：

1.  在同一个应用程序源代码根文件夹中创建 2 个 xCode 项目，并使用每个项目构建一个目标。这将是：Project.xcodeproj 和 ProjectMac.xcodeproj
2.  将新的 Mac 目标添加到我们现有的 iPad 应用程序项目中，然后调整目标成员资格以获得所需的结果。这只是：Project.xcodeproj

使情况更加复杂的是，我们目前使用 cocos2d 作为 iOS 应用程序的静态库。我们还有一个名为 CoreInfrastructure 的库，其中包含我们在所有项目中使用的大量代码。最近我发现我可以创建一个项目，从同一代码库同时构建一个针对 Mac 的框架和一个针对 iOS 的库。这是通过从一个框架项目开始并添加一个目标来为 iOS 构建一个静态库来完成的。

所以只是想得到大家的意见和见解。任何人都知道在上述选择中需要注意的任何警告？任何同时为 Mac 和 iOS 应用商店构建的人愿意分享他们的结构吗？在我们的库代码上添加一个目标......这也是应用程序的方式吗？

为这两种选择进行归档和分发构建是否有任何问题？

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-07-20T10:55:16.637

WWDC 会议**“在 iOS 和 OS X 之间共享代码”**回答了本主题中的所有基本问题。*iWork*团队展示了他们如何通过共享代码库为 iOS 和 OS X 创建 Pages、Keynote 和 Numbers。

他们项目的关键是使用：

*   用于 iOS 和 OS X 的单独 Xcode 目标
*   *.framework*形式的共享代码的单独项目
**   从上面的角度来看，目标对框架的依赖*

 *我鼓励观看视频或阅读本次会议的成绩单：

[WWDC 2014 在 iOS 和 OS X 之间共享代码](https://developer.apple.com/videos/wwdc/2014/#233)

[ASCIIWWDC 成绩单](http://asciiwwdc.com/2014/sessions/233)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T16:29:23.830

I recently used [kstenerud's iOS Universal Framework](https://github.com/kstenerud/iOS-Universal-Framework) to build a shared framework codebase that works for both iOS and Mac apps. I just needed to manually add a target for a Cocoa framework after I had created a project for an iOS framework. That way I can develop the sharable code once in the framework and link it in both the iOS and Mac apps. You can even make the framework contain UIKit-specific code for your iOS app and AppKit-specific code for your Mac apps. I wrote about it in my [blog](http://rayvinly.com/how-to-build-a-truly-universal-framework-for-ios-and-mac-with-just-a-single-codebase/) if you are interested.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T22:49:40.830

我只是为共享源使用多平台静态库目标。但是，您需要将其扩展到依赖项。如果您有平台相关的实现，您可能需要为这些符号创建补充导出库。

因此，您的结构可能采用以下形式：

*   **CoreInfrastructure** - 跨平台静态库。
*   **PlatShared** - 跨平台静态库。
*   **PlatSpecific-OS X** - OS X 静态库（或框架）。
*   **PlatSpecific-iOS** - iOS 静态库。

OS X 应用程序链接到 CoreInfrastructure、PlatShared、PlatSpecific-OSX、Cocos for OS X 和系统库。

iOS 应用程序链接到 CoreInfrastructure、PlatShared、PlatSpecific-iOS、Cocos for iOS 和 sys 库。

问题（我发现）是，有很多人在 Xcode 中开发和维护复杂的项目结构没有太多/任何经验。设置重复目标并在它们增长时正确维护它们是一种痛苦（IMO）——即使它们都引用相同的源文件。这就是为什么我更喜欢最小的目标和适当的依赖结构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T22:56:29.973

对于应用程序，请使用两个单独的项目。如果它们共享一个库或框架，那么在一个项目中为 iOS 和 Mac 使用多个目标非常有用。但是，在您的顶级应用程序中，几乎没有共享任何内容。UIKit 代码需要完全重写才能使用 AppKit，依赖项会有所不同，甚至大多数项目设置也会有所不同。

当然，如果您真的想一次查看所有内容，您可以将特定于平台的应用程序项目和所有共享的依赖库/框架项目放在一个工作区中。这更多是工作方式的问题。如果您想经常在两者之间来回切换，这是最有意义的。如果您想简化您正在查看的内容，您可以将它们放在共享许多相同项目的单独工作区中。单独的工作空间的缺点是一次只能在一个工作空间中打开一个项目，因此您一次只能有效地处理一个。*

# phpmyadmin - phpmyadmin 显示 ?????? 保存语言字段时

> ID：11768555
> 
> 赞同：0
> 
> 时间：2012-08-01T22:35:48.430
> 
> 标签：phpmyadmin

大家好，我目前正在使用**phpmyadmin**来构建表格，但我遇到了几个问题。

这些是我当前的设置：

```
Server: localhost via TCP/IP
Server version: 5.5.16
Protocol version: 10
User: root@localhost
MySQL charset: UTF-8 Unicode (utf8)
Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4
Perl/v5.10.1
MySQL client version: mysqlnd 5.0.8-dev - 20102224 - $Revision: 310735 $
PHP extension: mysql 
```

我正在尝试填充我的语言列的 native_name 列。

它必须看起来像这样：

```
Language ID  Language Code  Language name   Native name   Active
-----------  -------------  -------------   ------------  ------
1            afr            Afrikaans       Afrikaans     0
2            sqi            Albanian        gjuha shqipe  1
3            ara            Arabic          العربية
4            spa            Spanish         Espanol       1
5            eng            English         English       1 
```

但我得到的是：

```
Language ID  Language Code  Language name   Native name   Active
-----------  -------------  -------------   ------------  ------
1            afr            Afrikaans       Afrikaans     0
2            sqi            Albanian        gjuha shqipe  1
3            ara            Arabic          ?????????
4            spa            Spanish         Espanol       1
5            eng            English         English       1 
```

![在此处输入图像描述](../Images/a167ed8ba73d5346a678f424a2b1fada.png)

好的，故事就是这样进行的。正如您从上面的示例中知道的那样；本机名称列必须包含一大堆奇怪的字符。我拿到 ？？？？？？？在通过 SQL 进行插入时输入，所以我决定也许内联编辑可以解决问题。

保存我的在线编辑后，我粘贴的阿拉伯语文本恢复为??????? ？？？在页面刷新。

![在此处输入图像描述](../Images/dc00bcb7ba07c6f182db9036392dd838.png)

关于如何解决这个问题的任何想法？如您所见，它发生在表中的所有字符（即日文、中文等）上！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:42:12.533

基本上，根据您的评论，您的表/列上有无效的字符集和排序规则，因此您需要执行字符集转换并可能重新填充表本身......

`ALTER TABLE [table] MODIFY [column] [type] CHARACTER SET utf8 COLLATE utf8_general_ci;` `ALTER TABLE [table] DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci`

检查这些链接：

*   [http://dev.mysql.com/doc/refman/5.0/en/charset-conversion.html](http://dev.mysql.com/doc/refman/5.0/en/charset-conversion.html)
*   [http://dev.mysql.com/doc/refman/5.0/en/charset-table.html](http://dev.mysql.com/doc/refman/5.0/en/charset-table.html)

# jpa - 调用 utx.begin() 时 UserTransaction 失败抛出“java.lang.IllegalStateException：不允许操作”

> ID：11768556
> 
> 赞同：0
> 
> 时间：2012-08-01T22:35:52.707
> 
> 标签：jpa, controller, ejb, eclipselink, stateless-session-bean

我想使用 ejb 和 jpa 控制器，在 netbeans 中自动生成控制器...我尝试从类 (UniversidadServiceEJB) 调用 jpa 控制器，这是一个无状态的会话 bean，我调试了项目并成功创建了 UserTransaction 和 EntityManagerFactory但是当在 jpa 控制器（UniversityJpaController）中调用方法 utx.begin 时会抛出这个异常：

java.lang.IllegalStateException：不允许操作。

在 com.sun.enterprise.transaction.UserTransactionImpl.checkUserTransactionMethodAccess(UserTransactionImpl.java:146) 在 com.sun.enterprise.transaction.UserTransactionImpl.begin(UserTransactionImpl.java:162) 在 controller.UniversidadJpaController.create(UniversidadJpaController.java:47) ) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052) 在 org.glassfish.ejb .security.application.EJBSecurityManager。在 com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619) 在 com.sun.ejb 在 com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388) 调用(EJBSecurityManager.java:1124) .containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800) at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571) at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:49 ) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect。 Method.invoke(Method.java:601) 在 com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861) 在 com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571) 在 com.sun.ejb.containers 的 com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800) .interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162) 在 com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect .NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ... ... ...container.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162) 在 com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun。反射.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ... ... ...container.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162) 在 com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun。反射.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ... ... ...调用(DelegatingMethodAccessorImpl.java:43) ... ... ...调用(DelegatingMethodAccessorImpl.java:43) ... ... ...

会话 Bean 类是：

```
@Stateless(name="UniversidadJpa")
@Remote(IGestionUniversidad.class)
public class UniversidadServiceEJB {

    @Resource
    private UserTransaction utx;
    @PersistenceUnit(unitName="ApplicationEJBPU")
    EntityManagerFactory emf;

    public void create(Universidad universidad)  throws Exception {        
        try {
            UniversidadJpaController universidadController = new UniversidadJpaController(utx,emf);
            universidadController.create(universidad);
        } catch (RollbackFailureException ex) {
            Logger.getLogger(UniversidadServiceEJB.class.getName()).log(Level.SEVERE, null, ex);
        } catch (Exception ex) {
            Logger.getLogger(UniversidadServiceEJB.class.getName()).log(Level.SEVERE, null, ex);
        } 

    } 

} 
```

jpacontroller 类是：

```
public class UniversidadJpaController implements Serializable {

    public UniversidadJpaController(UserTransaction utx, EntityManagerFactory emf) {
        this.utx = utx;
        this.emf = emf;
    }
    private UserTransaction utx = null;
    private EntityManagerFactory emf = null;

    public EntityManager getEntityManager() {
        return emf.createEntityManager();
    }

    public void create(Universidad universidad) throws RollbackFailureException, Exception {
        if (universidad.getEstudiantes() == null) {
            universidad.setEstudiantes(new ArrayList<Estudiante>());
        }
        EntityManager em = null;
        try {
            utx.begin();
            em = getEntityManager();
            List<Estudiante> attachedEstudiantes = new ArrayList<Estudiante>();
            for (Estudiante estudiantesEstudianteToAttach : universidad.getEstudiantes()) {
                estudiantesEstudianteToAttach = em.getReference(estudiantesEstudianteToAttach.getClass(), estudiantesEstudianteToAttach.getId());
                attachedEstudiantes.add(estudiantesEstudianteToAttach);
            }
            universidad.setEstudiantes(attachedEstudiantes);
            em.persist(universidad);
            for (Estudiante estudiantesEstudiante : universidad.getEstudiantes()) {
                Universidad oldUniversidadOfEstudiantesEstudiante = estudiantesEstudiante.getUniversidad();
                estudiantesEstudiante.setUniversidad(universidad);
                estudiantesEstudiante = em.merge(estudiantesEstudiante);
                if (oldUniversidadOfEstudiantesEstudiante != null) {
                    oldUniversidadOfEstudiantesEstudiante.getEstudiantes().remove(estudiantesEstudiante);
                    oldUniversidadOfEstudiantesEstudiante = em.merge(oldUniversidadOfEstudiantesEstudiante);
                }
            }
            utx.commit();
        } catch (Exception ex) {
//            try {
//                utx.rollback();
//            } catch (Exception re) {
//                throw new RollbackFailureException("An error occurred attempting to roll back the transaction.", re);
//            }
            throw ex;
        } finally {
            if (em != null) {
                em.close();
            }
        }
    }
} 
```

持久性单位是：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="ApplicationEJBPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>sqlServer</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

请问是什么问题？..非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:48:10.527

通常在 EJB 环境中，事务由容器管理。它将 Bean 方法包装在事务中，并在发生异常时自动回滚。这也意味着不允许手动启动/提交/回滚事务并抛出 IllegalStateException。

参考：http: [//java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction3.html](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T16:10:48.450

如上所述，在容器管理事务 (CMT) 下，如果您使用 API，您将获得 getStatus() 异常。

[https://issues.jboss.org/browse/JBSEAM-456](https://issues.jboss.org/browse/JBSEAM-456)

但是您可以作为替代使用：@Resource TransactionSynchronizationRegistry

[如何判断事务在 Java EE 6 拦截器中是否处于活动状态？](https://stackoverflow.com/questions/14004504/how-to-tell-if-a-transaction-is-active-in-a-java-ee-6-interceptor)

顺便说一句 - getStatus() api 在 glassfish 上爆炸，但在 weblogic 12.1.2 上没有爆炸。Weblogic 实际上应该在 get status api 上抛出异常。

@Resource TransactionSynchronizationRegistry

在两个容器上都可以正常工作。

# c - PCRE 二进制文件？

> ID：11768560
> 
> 赞同：1
> 
> 时间：2012-08-01T22:36:18.337
> 
> 标签：c, pcre, binaryfiles

我想用 PCRE 解析二进制文件。到目前为止，我的策略是使用`fgets`读取文件的一行，然后使用`pcre_exec`.

这对我现在不起作用，因为“行”以空字节而不是换行符结尾。我没有看到`fgets`在空字节而不是换行符处停止的方法。

## 编辑

该功能类似于运行`grep -az PATTERN FILE`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:15:08.970

在这种情况下，运气不好，您需要**逐字节**读取二进制文件并检查`'\0'`. 然后，您可以将此字节存储在缓冲区中，并且：

*   与您的 PATTERN 进行一些比较

或者

*   如果要保留数据以供以后处理，例如可以将此缓冲区存储在链表中（如果您没有大文件）。

希望这有帮助。

问候。

# python - 在 Python 中使用“替换”函数

> ID：11768562
> 
> 赞同：2
> 
> 时间：2012-08-01T22:36:26.637
> 
> 标签：python

我有一个以度分秒为单位的坐标值的访问表，它们的格式如下：

90-12-28.15

我想像这样重新格式化它：

90° 12' 28.15"

本质上用度分和秒字符替换破折号，度和分之间有一个空格，分和秒之间有另一个空格。

我正在考虑使用“替换”功能，但我不确定如何用度数字符 (°) 和空格替换破折号的第一个实例，然后检测破折号的第二个实例并放置分钟字符和一个空格，然后最后在末尾添加秒字符。

任何帮助表示赞赏。

麦克风

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:49:27.887

虽然正则表达式和`split()`是很好的解决方案，但这样做`replace()`相当容易。

```
lat = "90-12-28.15"

lat = lat.replace("-", "° ", 1)
lat = lat.replace("-", "' ", 1)
lat = lat + '"' 
```

或者您可以在一行上完成所有操作：

```
lat = lat.replace("-", "° ", 1).replace("-", "' ", 1) + '"' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:44:40.873

我只想拆分你的第一个字符串：

```
# -*- coding: utf-8 -*-

str = '90-12-28.15'

arr = str.split('-')   
str2 = arr[0] +'° ' + arr[1] + '\'' +arr[2] +'"'

print str2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T22:40:15.450

您可能想要使用 Python 的正则表达式模块`re`，尤其是`re.sub()`. [在此处](http://docs.python.org/library/re.html)查看 Python 文档以获取更多信息。

如果您不熟悉正则表达式，请在[此处](http://docs.python.org/py3k/howto/regex.html)查看本教程，同样来自 Python 文档。

```
import re

text = 'replace "-" in 90-12-28.15'
print(re.sub(r'(\d\d)-(\d\d)-(\d\d)\.(\d\d)', r'''\1° \2' \3.\4"''', text))
# use \d{1,2} instead of \d\d if single digits are allowed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T22:50:50.727

python“替换”字符串方法应该很容易使用。[您可以在此处](http://docs.python.org/library/string.html#string.replace)找到文档。

在您的情况下，您可以执行以下操作：

```
my_str = "90-12-28.15"
my_str = my_str.replace("-","°",1)# 1 means you are going to replace the first ocurrence only
my_str = my_str.replace("-","'",1)
my_str = my_str + "\"" 
```

# html - 从父选择器获取属性是 CSS 使用 content:attr();

> ID：11768567
> 
> 赞同：17
> 
> 时间：2012-08-01T22:37:10.457
> 
> 标签：html, css

嘿，我正在尝试将 <section> 标记的“标题”属性放在 <h3> 标记内，该标记位于 <section> 标记的正下方和内部。以下工作

```
 <section title="General Information">
       <h3>General Information</h3>
       ....
   </section> 
```

我想做的不是在 <h3> 标记内重复“一般信息”，而是使用 CSS 内容和 attr() 来获取 <section> 标记中的标题属性内的信息并将其放在 <h3 > 标签。

```
 <section title="General Information">
       <h3></h3>
       ....
   </section>

   section h3:after 
   {
       content:attr(title);
   } 
```

正如预期的那样，在 <h3> 标记而不是 <section> 标记内查找“title”属性。有什么方法可以实现我想要实现的目标吗？我正在努力完成正确的做事方式吗？我知道我可以完全跳过 <h3> 标记并格式化 <section> 标记以显示 'title' 属性中的任何文本，就像 <h3> 标记一样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T23:58:23.793

该`attr()`函数只能从生成内容的元素中获取属性。您将无法获取`section`元素`title`，因为它不是生成内容的元素。

正如 ScottS 所提到的，你真的应该避免有一个空的标题元素，因为那时根本没有任何意义。您最好的选择是要么省略该`title`属性（真的需要它吗？），要么保留重复的内容。

# google-maps-api-3 - 为巴士路线的特定街道添加样式

> ID：11768571
> 
> 赞同：0
> 
> 时间：2012-08-01T22:37:41.317
> 
> 标签：google-maps-api-3

我喜欢 APIv3 中的街道和特色颜色样式。
有没有办法为特定的街道着色，即。公交路线？折线掩盖了街道名称，并且在视觉上没有吸引力。如果没有简单的方法，是否可以在地图中创建子地图（可能是叠加层）来设置子区域的样式？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:22:38.763

我认为这只能着色：高速公路、本地和主干道路线，但您可以为兴趣点和公交车站着色，特定街道只能使用折线和方向服务着色，并降低线路的不透明度。=/

试试看[这个网站](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)，它是地图的可视化编辑，易于使用[样式化地图](https://developers.google.com/maps/documentation/javascript/styling)的所有可能性，它会自动生成您在地图上使用的样式脚本。

欲了解更多信息：[Gmap3.net](http://gmap3.net/api/set-styled-map.html)

# sql - 从表变量更新表中的多行

> ID：11768572
> 
> 赞同：1
> 
> 时间：2012-08-01T22:37:47.103
> 
> 标签：sql, sql-server-2008

我正在编写一个存储过程来根据表变量参数更新多条记录。

现有表是：**Tb_Project_Image**与相关列：

```
id PK (identity 1,1) 
cat_ord decimal(4,2) 
```

该过程将接收一个临时表变量（如下面的代码所示），其中包含 id as和as`PI_ID`的新值。是包含 1...n 的每一行的简单标识，其中 n 是 的行数。`cat_ord``newCatOrd``idx``@tempTable`

对于 中的每一行`@tempTable`，我想将`Tb_Project_Image`where更新`id = PI_ID`为相应的值。

```
 DECLARE @tempTable table (
    idx smallint Primary Key IDENTITY(1,1),
    PI_ID bigint, 
    newCatOrd decimal(4, 2) not null )

    INSERT INTO @tempTable values (3, 7.01)
    INSERT INTO @tempTable values (4, 7.02)
    INSERT INTO @tempTable values (5, 7.03)
    --etc...
    DECLARE @error int
    DECLARE @update int
    DECLARE @iter int
    SET @iter = 1

    BEGIN TRAN
WHILE @iter <= (select COUNT(*) from @tempTable)
    BEGIN
        UPDATE Tb_Project_Image
        SET cat_ord = (SELECT newCatOrd FROM @tempTable 
                        WHERE idx = @iter)
        WHERE id = (SELECT PI_ID FROM @tempTable
                        WHERE idx = @iter)  
        --error checking            
        set @error = @@ERROR
        set @update = @@ROWCOUNT
        IF ((@error = 0) AND (@update = 1))
            BEGIN
            SET @iter = @iter + 1
            CONTINUE
            END
        ELSE
            BREAK
    END

IF ((@error = 0) AND (@update = 1)) 
    COMMIT TRAN
ELSE
    ROLLBACK TRAN
GO 
```

现在，错误检查是因为为了确保完整性，临时表中的每一行都必须进行 1 次更新。（为节省空间而省略了解释）如果 while 循环的单次迭代引发错误，或者没有准确影响 1 行，我想中断循环并回滚事务

我遇到的问题是这个错误检查不起作用。我目前正在运行它，其中有 14 行，`@tempTable`第 11 行使用表`PI_ID`中未找到的`Project_Image`。因此，`@update = 0...`但它继续循环并提交数据。

如果有人有一种只使用单个更新语句的方法，我会倍加高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:54:05.987

你不能这样做，因为即使是 SET 也会重置 @@ERROR 和 @@ROWNUMBER 变量的状态。在这种情况下，@@ROWCOUNT 在之后设置为 1 `set @error = @@ERROR`。如果您不将值分配给局部变量，您的代码将起作用：

```
IF ((@@error = 0) AND (@@rowcount = 1)) 
```

但是您可能更愿意尝试[尝试...捕获错误处理](http://msdn.microsoft.com/en-us/library/ms175976.aspx)并在更新后单独测试@@rowcount。

**更新：**在单个更新中进行：

```
UPDATE t
   SET cat_ord = tt.newCatOrd
  FROM Tb_Project_Image t
 INNER JOIN @tempTable tt
    ON t.id = tt.PI_ID
-- If there was PI_ID not found in Tb_Project_Image
-- But I think that this should have been dealt with
-- During the initial loading of temporary table
IF @@ROWCOUNT <> (select count (*) from @tempTable)
BEGIN
   -- Error reporting here
   ROLLBACK TRANSACTION
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:41:39.310

除了更新然后回滚之外，您还可以使用 CTE 来确定是否应该在执行更新之前更新任何记录。像这样的东西应该工作：

```
WITH NON_SINGLETON AS (
    -- Find any records in @tempTable that don't match
    -- exactly one record in Tb_Project_Image
    SELECT t.PI_ID, COUNT(pi.id) C
    FROM @tempTable t
    LEFT JOIN Tb_Project_Image pi ON t.PI_ID = pi.id
    GROUP BY t.PI_ID
    HAVING COUNT(pi.id) != 1
)
UPDATE Tb_Project_Image
SET cat_ord = t.newCatOrd
FROM Tb_Project_Image pi
JOIN @tempTable t ON pi.id = t.PI_ID
-- If any invalid records were found in the CTE,
-- then this condition will fail for all rows
-- and nothing will be updated
WHERE NOT EXISTS(SELECT 1 FROM NON_SINGLETON) 
```

如果可能`@tempTable`有相同的重复条目`PI_ID`，那么这也将处理这些情况。而且由于它是一条语句，因此您不必在 proc 中显式管理事务（如果它是唯一需要包含在事务中的事物）。

# ruby-on-rails - 一个索引页面中的多个模型

> ID：11768574
> 
> 赞同：2
> 
> 时间：2012-08-01T22:37:55.310
> 
> 标签：ruby-on-rails, indexing

有什么方法可以在一个索引页面中列出多个模型？

就像我有 4 个模型：用户、机构、授权人员和导师，我想在一个索引页面中列出它们。

有没有我可以遵循的具体流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:04:55.973

红宝石用户，

是的，这是完全正常的行为。在您的控制器中，每当您使用 @myvariable 指定变量时，它都是在控制器和视图范围内可用的实例变量。没有@ 的变量是仅在该方法中可用的局部变量。

所以当你这样做时，在你的控制器中：

```
class Foos < ApplicationController
    def index
        @foos = Foo.all
        @bars = Bar.all
    end  
 end 
```

然后，您可以在视图中引用 @foos 和 @bars。

```
<h1>My foos and bars</h1>
<table>
 <thead>
   <th>foo</th>
 </thead>
 <tbody>
   <% @foos.each do |f| %>
   <tr>
    <td>f.name</td>
   </tr>
   <% end %>
 </tbody>
</table>

<table>
 <thead>
   <th>bar</th>
 </thead>
 <tbody>
   <% @bars.each do |b| %>
   <tr>
    <td>b.name</td>
   </tr>
   <% end %>
 </tbody>
</table> 
```

现在，为了让事情更干净，您可能需要考虑使用部分。创建一个名为**_bars_index.html.erb**的文件并复制包含条码的表格。

将其替换为

```
<%= render "bars_index" %> 
```

现在你的代码很好，很整洁，很容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:50:27.777

您可以在该控制器的索引操作中查询所有这些：

```
class MyController < ApplicationController
  def index
    @users = User.all
    @agencies = Agency.all
    @authorized_people = AuthorizedPerson.all
    @mentors = Mentor.all

    respond_to do |format|
      format.html
    end
  end

  # ...
end 
```

并在您的视图中正常引用它们：

```
<% @agencies.each do |agency| %>
  <!-- do stuff -->
<% end %>

<% @users.each do |user| %>
  <!-- do more stuff -->
<% end %>

<!-- etc. --> 
```

# python - 如何在 Python 中中断命令执行？

> ID：11768579
> 
> 赞同：2
> 
> 时间：2012-08-01T22:38:38.460
> 
> 标签：python, windows, python-idle, pyserial

我输入时使用的是 PySerial

```
serialObject.read() 
```

并且执行挂起等待一些串行数据。如何中止这个命令？我想输入新命令并忽略这个。我在 Windows 上使用 IDLE 并且 Ctrl+C 似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:36:28.807

如果在时间限制之前没有收到数据，则将 PySerial 配置为超时。如果您没有超时，那么您唯一的选择是要求操作系统终止该进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:01:37.533

您是否尝试过向 CTRL-C 发送垃圾邮件？不知道为什么，但有时我必须反复按 CTRL+C 才能让该死的 prgram 退出。

您也可以尝试使用以下方式劫持 CTRL-C：

```
import signal
import sys
def signal_handler(signal, frame):
        print 'You pressed Ctrl+C!'
        sys.exit(0)
signal.signal(signal.SIGINT, signal_handler) 
```

但如果正常的 CTRL+C 不起作用，我不确定这是否真的有帮助。

# java - Lucene 索引文档编号：在现有索引中查找和存储文档编号

> ID：11768582
> 
> 赞同：0
> 
> 时间：2012-08-01T22:39:04.467
> 
> 标签：java, search, lucene

我有一个 Lucene 索引，其中每个文档都没有唯一的可搜索字段。更改索引是不可能的。我正在迭代这个索引，每次我遇到一个通过一些测试的文档时，我想将该文档的引用添加到任意数据结构中。

是否有一种本地方式来存储文档编号，以便将来快速可靠地查找？例如，我遇到第 5 个文档，我想存储 '5' 并且将来能够查找文档 5。

谢谢！

# cuda - cuda：由多个线程写入相同的全局内存位置

> ID：11768583
> 
> 赞同：1
> 
> 时间：2012-08-01T22:39:05.717
> 
> 标签：cuda

我有一个内核，其中多个线程将写入位于全局内存中的同一个数组位置，比如说数组 [i]。SO中的其他相关问题给出了使用原子和其他事物的答案。但没有答案显示实际的 cuda 代码。任何人都可以显示一个cuda代码数组[i]，即数组在索引i处的位置，将如何由多个线程原子地写入。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:19:04.697

CUDA 为原子操作提供编译器内在函数。有关每种计算能力可用的原子操作的更多详细信息，请参阅 CUDA C 编程指南。counters 是一个指向大小为 gridDim.x 的整数数组的指针。每个线程都会增加由它的 blockIdx.x 索引的数组值。

```
__global__ void CountThreadsInBlock(int* counters)
{
    int i = blockIdx.x;
    atomicAdd(&counters[i], 1);
}

// NOTE: Assume 1D launch. 
```

# php - 如何为我的 Facebook 应用程序验证用户身份，然后为他们发布到他们的墙上？

> ID：11768586
> 
> 赞同：0
> 
> 时间：2012-08-01T22:39:20.143
> 
> 标签：php, facebook

我在我的公司 facebook 帐户下创建了一个 facebook 应用程序。我们有一个拥有很多客户的网站，我希望他们能够授权我们的应用程序在他们自己的墙上发布。

我怎样才能在 PHP 中做到这一点？我已经翻遍了，但找不到一个好的编码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:41:41.940

在 google 上搜索具有**publish_stream**权限的示例。

# sql-server - ON 是语法的一部分

> ID：11768587
> 
> 赞同：4
> 
> 时间：2012-08-01T22:39:35.483
> 
> 标签：sql-server, tsql

是否可以在不指定条件的情况下编写内部联接或外部联接？是`ON condition`连接条件语法的一部分吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T22:50:27.450

使用`ANSI SQL-92`语法时，`ON`关键字是连接的一部分，除了 the，`cross join`因为您没有关系的条件。

前任。

**内部联接**

```
SELECT *
FROM tableA INNER JOIN tableB
       on tableA.ID = tableB.ID 
```

**交叉连接**

```
SELECT *
FROM tableA CROSS JOIN tableB 
```

`ON`应该在连接表之后（如***INNER 和 OUTER***连接），这样你就不会出现语法错误。但如果您使用`ANSI SQL-89`语法，`ON`则省略关键字，但您必须在`where clause`

前任。

**内部联接**

```
SELECT *
FROM tableA, tableB
WHERE tableA.ID = tableB.ID 
```

**交叉连接**

```
SELECT *
FROM tableA, tableB 
```

它很容易出错，因为如果您忘记了条件，它不会产生语法错误并且可能会`cross join`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T22:44:47.057

不，您不必指定`ON`，您可以在 a 中这样做`WHERE`：

```
SELECT *
FROM tableA, tableB
WHERE tableA.Id = tableB.Id 
```

但这很容易出错（容易以`CROSS JOIN`s 结尾）并且通常不受欢迎。有关反对它的论点，请参见[此处](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)。

**编辑**：更准确地说，您可以`JOIN`使用上面显示的旧样式语法，它不需要`ON`，但如果您明确加入 using`INNER | LEFT | FULL`等，那么yes*是*`ON`语法的一部分。 具有精确语法要求的[MSDN页面。](http://msdn.microsoft.com/en-us/library/ms177634.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T22:44:18.600

您可以在不使用 join-on 语法的情况下进行隐式连接：

```
select a.fred, b.joe from tableApple as a, tableBread as b
where a.key1 = b.key1 
```

但我很确定显式连接需要 on 。您将收到不正确的语法错误。显式连接含义：

```
select a.fred, b.joe 
from tableApple as a
left join tableBread as b
on a.key1 = b.key1
where a.key1 = 'sally' 
```

# java - Apache 代理 - 更新 IP 地址？

> ID：11768590
> 
> 赞同：0
> 
> 时间：2012-08-01T22:39:50.273
> 
> 标签：java, apache, proxy, application-server

如何（动态）更新其 ip 更改且 dns/dyndns 无法引用的服务器的 ip 地址？

例如：

```
 ProxyPass /myapp/ myapp.domain.com 
```

/etc/主机：

```
254.153.12.2\. myapp.domain.com 
```

如果 /myapp/ 从外部调用，则始终应重新映射到 myapp.domain.com。但这不是一个对外暴露的领域。它仅通过主机文件在服务器内部使用。在hosts里面，可以找到真实的ip。

现在我正在寻找一种方法：a）通过 Web 界面更新主机中的 ip b）任何其他可以在主机文件旁边工作的方法

你的专业人士有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:32:16.260

解析器是操作系统的一部分——你没有说它运行在什么操作系统上。

主机文件无法指示到期时间，因此您可能必须为此实现本地 DNS 服务器 - 但我看到您提到 Java - 我过去遇到过很多问题，Java 不处理DNS 以应有的方式记录 - 因此即使这样也可能无法正常工作。

# cakephp - 对于在 CakePHP 中具有用户管理功能的最灵活和模块化的 CMS，这是正确的数据库设计吗？

> ID：11768591
> 
> 赞同：0
> 
> 时间：2012-08-01T22:39:51.660
> 
> 标签：cakephp, database-design, content-management-system, user-management

我想问你们是否可以审查[我的数据库设计](http://i.stack.imgur.com/ykvhY.png)。我认为这是不言自明的，但要绝对清楚：

我的目标是制作一个应用程序，它具有超级灵活的用户管理（这就是为什么组是树形的并且组和用户具有 habtm 关系）和构建页面的超级模块化方式（这就是为什么页面包含小部件块）。

我将用户和配置文件分开的原因是因为用户表不会更改，并且仅用于身份验证和授权。但是，配置文件表将根据客户的意愿进行更改。所以它可能没有签名，而是一个头像字段。或者它可能完全是空的/根本不存在。

小部件可以是任何东西，可以是投票，可以是一段内容，可以是导航，也可以是评论集合，等等。

我选择将子域、区域设置和布局分开表而不是仅仅将名称放入页面的原因是因为我想限制客户端可用的选项。仅仅因为我的布局文件夹中有一个三列.ctp 并不一定意味着我希望客户能够选择它。

小部件也是如此。除了限制选择之外，并不是我的插件文件夹中的每个插件、控制器和操作都是小部件，所以我需要一个表格来说明哪些是小部件。

块是页面上的小部件，它位于由索引决定的特定位置的容器（例如，3 列布局中的右列）（较低的索引意味着较高）。

这就是我的解释，你们怎么看？这是最好的吗？或者您是否有 (a) 建议以使其更加灵活和模块化。

[编辑] 哦，要清楚一点，小部件当然会有自己的表格来存储他们需要存储的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:20:38.423

好吧，我认为除了“个人资料”之外，一切都很好。

当您尝试从登录用户获取数据时：

```
$this->Auth->user(); 
```

我认为您不会获得有关“个人资料”的数据，因此您必须通过 $this->Auth->user('id') 等查找个人资料。我认为您应该合并“个人资料”和“用户”表转换为“用户”表。

所以当你想保存时，比如说“签名”，你应该把它放在 $this->request->data; 并调用 $this->User->save($this->request->data); 并且签名将被更新。

编辑：

您可以保持原样，但是要获取用户以外的其他数据，您必须输入：

```
$id = $this->Auth->user('id');
$current_user = $this->User->findById($id); 
```

# php - “您的 SQL 语法有错误”出现 8777 次中的 70 次

> ID：11768594
> 
> 赞同：-1
> 
> 时间：2012-08-01T22:40:08.463
> 
> 标签：php, mysql, mysql-error-1064

所以我有这个脚本，它需要一堆 json 文件并将它们发送到我的数据库。该脚本适用于 8777 个文件，但对于 70 个文件，我收到以下 mysql 语法错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Shea', '', '190', '1981-4-30', 'Right', '106', '13', '25', '65', '39', '64', '61' at line 1 
```

这是我正在使用的循环，对于冗长的查询，我深表歉意：

```
For($id=1; $id<=205600; $id++)
{
if (file_exists('data/players/'.$id.'.json'))
    {
        //read json file
        $json_file = file_get_contents('data/players/'.$id.'.json');
        $file_data = json_decode($json_file, true);

        //my super long query
        $query =  'INSERT INTO `db`.`table` (`id`, `first_name`, `last_name`, `common_name`, `height`, `dob`, `foot`, `club_id`, `league_id`, `nation_id`, `attribute1`, `attribute2`, `attribute3`, `attribute4`, `attribute5`, `attribute6`, `rare`, `rating`, `type`) VALUES (\''.$id.'\', \''.$file_data['Player']['FirstName'].'\', \''.$file_data['Player']['LastName'].'\', \''.$file_data['Player']['CommonName'].'\', \''.$file_data['Player']['Height'].'\', \''.$dob.'\', \''.$file_data['Player']['PreferredFoot'].'\', \''.$file_data['Player']['ClubId'].'\', \''.$file_data['Player']['LeagueId'].'\', \''.$file_data['Player']['NationId'].'\', \''.$file_data['Player']['Attribute1'].'\', \''.$file_data['Player']['Attribute2'].'\', \''.$file_data['Player']['Attribute3'].'\', \''.$file_data['Player']['Attribute4'].'\', \''.$file_data['Player']['Attribute5'].'\', \''.$file_data['Player']['Attribute6'].'\', \''.$file_data['Player']['Rare'].'\', \''.$file_data['Player']['Rating'].'\', \''.$file_data['Player']['ItemType'].'\');';
        mysql_query($query);

        //record loop status
        if (mysql_error())
        {
            $error = mysql_error();
            echo $error.'<br/>';
            $errors ++;
        }
        else
        {
            $entries ++;
        }
    }
} 
```

那么我该如何解决这个错误呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:42:27.013

[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)在将变量添加到查询之前使用它们：

```
$commonName = mysql_real_escape($file_data['Player']['CommonName']); 
```

然后`$commonName`在您的查询中使用。

虽然你真的应该使用[`PDO`](http://www.php.net/manual/en/ref.pdo-mysql.php). 有关介绍，请参阅[PDO 的第一步](http://wezfurlong.org/blog/2004/may/first-steps-with-pdo/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T22:42:58.837

[转义你的 SQL](http://bobby-tables.com/php)将大大有助于解决这个问题。

如果你在生产中使用它，你很幸运你有这么多成功的交易。

一个固定的例子看起来更像这样：

```
$dbh = new PDO(...);

$stmt = $dbh->prepare('INSERT INTO `db`.`table` (`id`, `first_name`, `last_name`, ...)
  VALUES (:id, :Player_FirstName, :Player_LastName, ...)');
$stmt->bindParam(':id', $id);
$stmt->bindParam(':Player_FirstName', $file_data['Player']['FirstName']);
$stmt->bindParam(':Player_LastName', $file_data['Player']['LastName']);
// ... Etc...

// insert one row
$stmt->execute(); 
```

# javascript - 在 JavaScript 中更改数组原型

> ID：11768595
> 
> 赞同：0
> 
> 时间：2012-08-01T22:40:08.503
> 
> 标签：javascript, arrays, javascript-objects

我正在尝试更改数组原型并访问列，就好像它们是行一样，因此可以进行自定义矩阵转置。我想确保对每一列的访问不需要重新分配和创建一个全新的对象来访问特定的列。

例如...

```
var mcol = new column([[0,1,2],[3,4,5],[6,7,8]]);
alert(mcol[1]); 
```

我正在寻找的是读取列，就好像它是一行......（对矩阵进行 90 度变换）

```
mcol[1] = [1,4,7]; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:47:47.060

您可以使用此构造函数：

```
function column() {
    var arr = Array.prototype.slice.call(arguments);

    return arr;
} 
```

让你做你想做的事。

```
var mcol = new column([0,1,2], [3,4,5], [6,7,8]);
alert(mcol[1]); // alerts [3, 4, 5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:54:33.210

我建议你用一个方法创建一个`Matrix`构造函数：`column`

```
function Matrix() {
  this._rows = Array.prototype.slice.call(arguments);
}
Matrix.prototype.column = function (i) {
  // See (1)
  return this._rows.map(function (row) {
    return row[i];
  });
};

var m = new Matrix([0,1,2],[3,4,5],[6,7,8]);
console.log(m.column(1)); // [1,4,7] 
```

(1) [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T19:07:09.867

我的解决方案是一种解决方法，涉及将数组复制到我不喜欢的新数组中。它确实覆盖了 Array 原型。

```
 Array.prototype.rotate = function () {
      var rotated = [];
      var columns = 1; 
      for(var col = 0; col < columns; col++) {
        var myrow = [];
        for(var row = 0; row < this.length; row++){ // this.length is the longest column
          if(this[row].length > columns){
            columns = this[row].length;
          }
          if(this[row].length > col){
            myrow.push(this[row][col]);
          } else {
            myrow.push(null);
          }
        }
        rotated.push(myrow);
      }
      return rotated;
    }

var mcol = [[0,1,2], [3,4,5], [6,7,8]];
mcol = mcol.rotate();
alert(mcol[1]); 
```

警报 [1,4,7]

有谁知道不需要某人将整个数组复制到新数组的解决方案？

# c# - 是否应该在构造函数签名中列出可选参数？

> ID：11768601
> 
> 赞同：1
> 
> 时间：2012-08-01T22:40:30.600
> 
> 标签：c#, design-patterns

考虑到最佳实践，将可选参数添加到构造函数签名的可取方法是什么？您是否应该只列出核心参数并依赖于非可选属性的初始化程序？在我看来，这是最明智的做法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:45:48.433

特别是能够使用对象初始化器分配属性值，构造函数的多个重载远不如以前有用。在过去，它们主要用于为代码紧凑性设置可变属性。

现在可以写了

```
MyClass my = new MyClass() { PropA = 1, PropB = 2 }; 
```

几乎一样紧凑

```
MyClass my = new MyClass(1, 2); 
```

同时更具表现力。

但是，有时对象的性质决定了重载将为对象使用者提供有意义的契约。例如，为接受长度和宽度的*Rectangle*类提供重载并非不合理（我不会在代码审查中使用它）。就我个人而言，我仍然不会提供重载，因为对象初始化器语法更具表现力，避免了诸如“是 Rectangle(int length, int width) 还是 Rectangle(int width, int length)？”之类的问题。在阅读代码时（我知道，智能感知在编写代码时会有所帮助）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:43:35.633

我相信这是一个很好的方法。通常人们将属性用于可选参数；但这使对象可变。使用可选的构造函数参数/ctor 重载是保持对象不可变的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T22:49:40.213

根据经验，我只向构造函数添加创建有效工作对象*所需的参数。*随着对象初始化器语法的出现，客户端可以更容易地配置他想要的任何其他参数。

但是，我认为这条规则*应该*有很多例外：很多时候，您可能希望提供一个重载，使开发人员更容易和更清楚地了解他期望能够对对象进行哪些更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:38:59.137

考虑子类化而不是多个构造函数。

原因：通常两个不同的构造函数表示需要两种不同的行为。不同的nehaviors应该由不同的类来实现。

然后，子类将具有一个名称，表明它是基类的专用版本，以及一个确保只能在有效状态下创建此类对象的构造函数。

# ruby - Ruby - 将带有管道分隔值的数组转换为哈希数组

> ID：11768602
> 
> 赞同：1
> 
> 时间：2012-08-01T22:40:35.613
> 
> 标签：ruby

我该怎么做：

```
["ford|white", "honda|blue"] 
```

进入这个：

```
[{'make'=>'ford', 'color'=>'white'}, {'make'=>'honda', 'color'=>'blue'}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:01:57.127

```
input = ["ford|white", "honda|blue"]
input.map do |car|
  Hash[ %w(make color).zip car.split('|') ]
end
=> [{"make"=>"ford", "color"=>"white"}, {"make"=>"honda", "color"=>"blue"}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:54:26.733

不假思索：

```
 > l = ["ford|white", "honda|blue"]
 > m = l.collect { |m| make, color = m.split('|'); { make: make, color: color } }
=> [{:make=>"ford", :color=>"white"}, {:make=>"honda", :color=>"blue"}] 
```

（通常建议使用 IMO 的键符号。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T22:54:36.307

```
["ford|white", "honda|blue"].collect do |str|
  ary = str.split('|')
  { 'make' => ary[0], 'color' => ary[1] }
end 
```

给我

```
[{"color"=>"white", "make"=>"ford"}, {"color"=>"blue", "make"=>"honda"}] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:00:10.497

这应该这样做

```
yourarray = ["ford|white", "honda|blue"]
yourhash = yourarray.map­ {|x| y = x.spl­it('|'); {"mak­e" => y[0],­ "colo­r" => y[1]}­} 
```

# csv - 将分类数据从 CSV 导入 scikit-learn

> ID：11768603
> 
> 赞同：4
> 
> 时间：2012-08-01T22:40:54.043
> 
> 标签：csv, scikit-learn

我想从 CSV 文件中导入数据以在 scikit-learn 中使用。它混合了数字数据分类数据，例如

```
someValue,color,someOtherValue
1.2,red,55.6
1.9,blue,20.5
3.2,red,16.5 
```

我需要将此表示转换为纯数字表示，其中分类数据点被转换为多个二进制列，例如

```
someValue,colorIsRed,colorIsBlue,someOtherValue
1.2,1,0,55.6
1.9,0,1,20.5
3.2,1,0,16.5 
```

是否有任何实用程序可以为我执行此操作，或者有一种简单的方法来遍历数据并获取此表示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:40:11.303

据我所知，scikit-learn 不提供数据加载功能，但它确实更喜欢 Numpy 数组作为输入。Numpy 的[loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)函数及其`converters`参数可用于加载您的 csv 并指定每列的类型。但它不会对您的第二列进行二值化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T01:46:41.380

在这个答案中，我假设您正在尝试将 CSV 转换为[LibSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)、[LIBLINEAR](http://www.csie.ntu.edu.tw/~cjlin/liblinear/)或[`scikit-learn`](http://scikit-learn.org/)可以加载的文件。

您可以使用`csv2libsvm`作为 Ruby gem 的一部分提供的[`vector_embed`](https://github.com/seamusabshere/vector_embed)：

```
$ gem install vector_embed
Successfully installed vector_embed-0.1.0
1 gem installed 
```

你需要 Ruby 1.9+...

```
$ ruby -v
ruby 1.9.3p374 (2013-01-15 revision 38858) [x86_64-darwin12.2.0] 
```

如果您没有 Ruby 1.9，使用 安装很容易，[`rvm`](https://rvm.io/rvm/install/)不需要（或推荐使用）root：

```
$ curl -#L https://get.rvm.io | bash -s stable
$ rvm install 1.9.3 
```

成功运行`gem install vector_embed`后，请确保您的第一列名为“label”：

```
$ cat example.csv 
label,color,someOtherValue
1.2,red,55.6
1.9,blue,20.5
3.2,red,16.5

$ csv2libsvm example.csv > example.libsvm

$ cat example.libsvm
1.2 1139043:55.6 1997960:1
1.9 1089740:1 1139043:20.5
3.2 1139043:16.5 1997960:1 
```

请注意，它同时处理分类数据和连续数据，并且它使用[MurmurHash](http://en.wikipedia.org/wiki/MurmurHash)版本 3 来生成特征名称（“colorIsBlue”对应于 1089740，“colorIsRed”对应于 1997960……尽管 Ruby 代码实际上是在散列类似“color\ 0红色”）。

如果您使用的是支持向量机，请务必按照他们在[“支持向量机分类的实用指南”](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)中的建议来扩展您的数据。

最后，假设您正在使用[`scikit-learn`svmlight/libsvm 加载程序](http://scikit-learn.org/dev/datasets/index.html#datasets-in-svmlight-libsvm-format)：

```
>>> from sklearn.datasets import load_svmlight_file
>>> X_train, y_train = load_svmlight_file("/path/to/example.libsvm") 
```

# php - 执行多行更新时，除了复选框，我如何访问其他表单元素值？

> ID：11768613
> 
> 赞同：0
> 
> 时间：2012-08-01T22:41:29.870
> 
> 标签：php, mysql, html

我写了一段代码来根据勾选的复选框进行多行删除。现在我需要修改它以进行多行更新。我一直无法访问每一行的文本框值。

一般来说，这是我的代码。

```
<?php
if (isset($_POST["SaveComments"])  && isset($_POST["SaveEachComment"]))
{
    while(list($key, $val) = each($_POST["SaveEachComment"]))
    {
        if($val == 'commentbox')
        {

            // do the update here. $val contains the ID
        }
    }
}
?>

<form id="form1" name="form1" method="post" action="test.php">
    <input type="checkbox" <?php echo 'name="SaveEachComment['.$row["comment"].']" ';?> value="commentbox" id="commentbox" />
    <input type="text" name="rowcomment" size="55" value="<?php echo $comment;?>" />
    <input type="submit"   name="SaveComments" value="submit"  />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:08:09.090

我刚刚添加了一个`for`循环来打印多个表单字段。显然，您的迭代将与行数一样多，因此您可以更改该部分代码。但是试试这个：

```
<?php
if (isset($_POST["SaveComments"])  && isset($_POST["SaveEachComment"]))
{
    while(list($key, $val) = each($_POST["SaveEachComment"]))
    {
        if($val == 'commentbox')
        {
                echo $_POST['rowcomment'][$key] . "<br />\n";

            // do the update here. $val contains the ID
        }
    }
}
?>

<form id="form1" name="form1" method="post" action="test.php">
<?php for ($i=0; $i<11; $i++) { ?>
    <input type="checkbox" <?php echo 'name="SaveEachComment['.$i.']" ';?> value="commentbox" id="commentbox" />
    <input type="text" name="rowcomment[<? echo $i?>]" size="55" value="<?php echo $comment;?>" />
        <br />
<?php } ?>
    <input type="submit"   name="SaveComments" value="submit"  />
</form> 
```

# java - JVM 内存使用失控

> ID：11768615
> 
> 赞同：10
> 
> 时间：2012-08-01T22:41:46.683
> 
> 标签：java, jvm, visualvm

我有一个 Tomcat webapp，它代表客户端执行一些漂亮的内存和 CPU 密集型任务。这是正常的，是所需的功能。但是，当我运行 Tomcat 时，内存使用量会随着时间的推移飙升至 4.0GB 以上，此时我通常会终止该进程，因为它会扰乱我的开发机器上运行的所有其他东西：

![在此处输入图像描述](../Images/fb30d54e1966105b47a7a84b6dadef86.png)

我以为我无意中在代码中引入了内存泄漏，但在使用 VisualVM 检查后，我看到了一个不同的故事：

![在此处输入图像描述](../Images/270d38a61d24e1e89421874b8154233b.png)

VisualVM 显示堆占用了大约 GB 的 RAM，这是我设置的`CATALINA_OPTS="-Xms256m -Xmx1024"`。

为什么我的系统认为这个进程占用了大量内存，而根据 VisualVM，它几乎没有占用任何内存？

* * *

在进一步嗅探之后，我注意到如果多个作业同时在应用程序中运行，内存不会被释放。但是，如果我等待每个作业完成，然后再将另一个作业提交给我的`BlockingQueue`服务`ExecutorService`，那么内存将被有效地回收。我该如何调试呢？为什么垃圾收集/内存重用会有所不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T00:40:21.493

**您无法控制要控制**的内容，`-Xmx`仅控制 Java Heap，它不控制JVM 对*本机内存*的消耗，根据实现的不同，其消耗完全不同。VisualVM 仅向您显示堆正在消耗的内容，它没有显示整个 JVM 作为*本机内存*消耗的 OS 进程。您必须使用操作系统级别的工具才能看到这一点，它们会报告完全不同的数字，通常比 VisualVM 报告的任何数据都要大得多，因为 JVM 以完全不同的方式使用*本机内存*。

来自以下文章[感谢内存（了解 JVM 如何在 Windows 和 Linux 上使用本机内存）](https://web.archive.org/web/20210314194158/http://www.ibm.com/developerworks/java/library/j-nativememory-linux/)

维护堆和垃圾收集器使用您无法控制的本机内存。

> 需要更多的本机内存来维护维护 Java 堆的内存管理系统的状态。收集垃圾时，必须分配数据结构来跟踪空闲存储和记录进度。这些数据结构的确切大小和性质因实现而异，但许多与堆的大小成正比。

`javac`并且 JIT 编译器像使用本机内存一样

> 字节码编译使用本机内存（与 gcc 等静态编译器需要内存才能运行的方式相同），但 JIT 的输入（字节码）和输出（可执行代码）也必须存储在本机内存中。包含许多 JIT 编译方法的 Java 应用程序比较小的应用程序使用更多的本机内存。

然后你有使用本机内存的类加载器

> Java 应用程序由定义对象结构和方法逻辑的类组成。它们还使用 Java 运行时类库中的类（例如 java.lang.String），并且可能使用第三方库。只要使用这些类，就需要将它们存储在内存中。类的存储方式因实现而异。

我什至不会开始引用有关线程的部分，我认为您的想法是， `-Xmx`它无法控制您认为它控制的内容，它控制 JVM 堆，并非所有内容都进入 JVM 堆，并且堆占用更多您指定用于管理和簿记的本机内存。

[简单明了，JVM 使用的内存比`-Xms`和`-Xmx`和其他命令行参数中提供的更多。](https://stackoverflow.com/a/9146775/177800)

这是[一篇关于 JVM 如何分配和管理内存的非常详细的文章](https://web.archive.org/web/20210314194158/http://www.ibm.com/developerworks/java/library/j-nativememory-linux/)，它并不像您在问题中的假设所期望的那么简单，值得全面阅读。

许多实现中的 ThreadStack 大小都有最小限制，这些限制因操作系统和有时 JVM 版本而异；如果您将限制设置为低于 JVM 或操作系统的本机操作系统限制（有时必须设置 *nix 上的 ulimit），则会忽略线程堆栈设置。其他命令行选项的工作方式相同，当提供的值太小时，默认为更高的值。不要假设传入的所有值都代表实际使用的值。

类加载器和 Tomcat 不止一个，它们会占用大量不易记录的内存。JIT 会占用大量内存，以空间换时间，这在大多数情况下是一个很好的权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:46:41.777

您还应该检查 CPU 使用率和垃圾收集器。[垃圾收集](http://java.dzone.com/articles/how-tame-java-gc-pauses)
可能会暂停并且 CPU gc 消耗会进一步减慢您的机器。

# php - php监控进程

> ID：11768617
> 
> 赞同：1
> 
> 时间：2012-08-01T22:42:04.080
> 
> 标签：php, javascript, html

我敢肯定，类似的问题已经被一遍又一遍地回答了。如果是，那么我在错误的方向上搜索并为此道歉。

我的问题：我正在编写一个在后台运行的进程的网页。我正在谈论的过程是一个 R 脚本，运行时间很长，可能需要几天。当进度开始时，它就这样开始了。

``exec(sprintf("%s > %s 2>&1 & echo $! >> %s", $cmd, $outputfile, $pidfile));``

我想跟踪进程是否仍在运行。这样，当用户检查时，他会收到有关它已完成或未完成的消息。当用户在再次登录或在页面上执行其他操作之后选择他上传到服务器的输入文件时，跟踪开始和停止。我还希望它在进程完成时更新页面，以便页面发生变化，以防他只是看着它。

我有两种可能。我可以通过进程 ID 或是否生成输出文件来检查它。

我试过了

``while(is_process_running($ps)){ ob_flush(); flush(); sleep(1);` }`

这有点像，除了页面上的所有其他功能冻结。那是我的 is_process_running($ps) 函数。

``function is_process_running($PID){ exec("ps $PID", $ProcessState); return(count($ProcessState) >= 2); }``

我真正需要的是在后台运行的另一个进程检查第一个进程是否仍在运行，如果没有，则在第一个进程完成时刷新页面。你会怎么做？如果您需要更多信息，请告诉我。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:36:14.343

通过 symcbean 的回答，我能够解决它。我的 javascript 代码在下面，可能对面临同样问题的人有用。我也愿意改进。我仍然认为自己是初学者。

 `````
function loadXMLDoc(){
    var xmlhttp;
    if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }else{// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    return xmlhttp;
}
function start(file,time){
    var xmlhttp = loadXMLDoc();
    if(lines == 0){
        timer = setInterval(function(){sendRequest(xmlhttp,file)},time);
    }
}
function sendRequest(xmlhttp,file){
    xmlhttp.open("POST",file,true);
    xmlhttp.send()
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200 && xmlhttp.responseText != ""){
            var text = xmlhttp.responseText;
            var splitted = text.split("\n");
            var length = splitted.length
            if(splitted[length-2]=="finished"){
                refresh_page();
                clearInterval(timer);
                lines = 0;
            }                   
        }
    }
} 
```` 

`使用文件路径和应该检查更改的时间间隔调用 start 方法。请注意我没有发布的刷新页面方法，但这只是您想要在页面上刷新的任何内容。当文件中的最后一行显示完成时，页面会刷新。我包含了 line 变量来检查进程是否已经启动。我还没有完全测试代码，但到目前为止它正在做我想做的事情。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:59:18.770

首先，您启动进程的方式存在许多问题 - 它确实需要位于与启动它[的 PHP 不同的进程组中。](http://symcbean.blogspot.co.uk/2010/02/php-and-long-running-processes.html)

至于检查它的状态，你不希望 PHP 的东西在 http 连接结束时停留很长时间。此外，让网络服务器按需将内容刷新到浏览器并让浏览器逐步呈现它是非常困难的——而且很脆弱。即使你让它在一个浏览器/网络服务器组合上工作，它也不太可能在另一个上工作。

使用 Ajax 轮询一个简单的脚本，该脚本报告进程状态/进度。``

# iphone - 如何从 UITableViewCell 获取对 UITextField 的引用？

> ID：11768618
> 
> 赞同：1
> 
> 时间：2012-08-01T22:42:06.900
> 
> 标签：iphone, objective-c, cocoa-touch

我已经使用情节提要创建了一个静态 UITableView。表格视图中的每一行都包含一个文本字段，并且我为每一行指定了一个标识符。其中一个文本字段用于输入日期。我想在选择此文本字段时显示 UIDatePicker。我正在尝试将文本字段的 inputview 设置为 UIDatePicker 来完成此操作。我正在努力获取这个特定 UITableViewCell 上的 UITextField。所以这是我要去的方向：

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    const NSString *birthDateCellIdentifier = @"BirthDateCell";
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString * cellIdentifier = [cell reuseIdentifier];
    if(cellIdentifier isEqualToString:birthDateCellIdentifier){
        /*this is the cell we're after so get pointer to cell's textfield*/
        //set textfield's inputview to UIDatePicker

    }

} 
```

这是正确的方法吗？如果是这样，我如何在此单元格上找到文本字段？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:52:34.533

您可以使用`indexPath`用于设置as的`inputView`属性，`UITextField``UIDatePicker`

此代码段可能会帮助您...

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *identifier = @"Identifier";
    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:identifier];
    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
    }

    UITextField *textField = [[[UITextField alloc] initWithFrame:CGRectMake(10, 10, 200, 20)] autorelease];
    textField.textColor = [UIColor darkTextColor];
    textField.tag = indexPath.row;
    textField.delegate = self;
    [cell.contentView addSubview:textField];

    if (indexPath.row ==0) {
        // Setting Datepicker as a inputView to the textfield on first ell
        UIDatePicker *datePicker = [[[UIDatePicker alloc] init] autorelease];
        [datePicker addTarget:self action:@selector(dateChanged:) forControlEvents:UIControlEventValueChanged];
        textField.inputView = datePicker;
    }else if(indexPath.row == 1) { // Set the Number pad for the textfield on second cell
        textField.keyboardType = UIKeyboardTypeNumberPad;
    }

    return cell;
}

// DatePicker selector
-(void)dateChanged:(id)sender
{
    UIDatePicker *picker = (UIDatePicker *)sender;
    NSDate *date =picker.date;
    NSLog(@"selected date: %@", date);
}

// TextField Delegate methods
-(void)textFieldDidBeginEditing:(UITextField *)textField
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:48:41.947

不，不是。如果您为每个单元格使用不同的重用标识符，则表 wiev 将无法重新排列单元格，因此您将浪费内存。改为使用该`tag`属性。

如果您找到了该单元格，则必须将文本字段作为属性添加到其中，这是访问它的最简洁方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:11:32.093

您知道 Apple 制作的名为**DateCell**的示例代码吗？

![图像0](../Images/bb07b199d65efe6be29976d990a8feda.png)

![图像1](../Images/b9b76767f066696d1600b03e459c66ed.png)

![图2](../Images/ebd27d75d8bca44b43045a98f563d9ac.png)

代码在这里，你可以运行它：

[http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:52:53.400

您是否考虑过 UITableView 对于这个特定问题是一个糟糕的选择的可能性？

想一想 - 这些“单元”中的每一个似乎看起来和行为都不同，并且实现不同的目的，并且它们中有固定数量的不需要动态数据绑定。

如果我是你，我只会为每个输入字段制作自定义视图，然后将整个内容放在 UIScrollView 中。

即使您坚定地采用这种方法，也存在问题。UITableViewCells 没有 UITextField 属性，因此您将无法访问它们。只需像这样创建一个类：

```
@interface DatePickerView : UIView <UITextFieldDelegate>

@property (nonatomic, retain) UITextField *textField;
@property (nonatomic, retain) UIDatePicker *datePicker;

@end 
```

现在所有逻辑都包含在 DatePickerView 类中。您可以实现 UITextFieldDelegate 方法来处理输入，而不必担心您选择了哪个文本字段。在 DatePickerView 的实现中，你可以这样做：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    // Show the UIDatePicker.
} 
```

这将为您提供更清洁和更好的包含设计。

# ruby-on-rails - Rails SQLite Dev 和 Test 数据库是一样的。为什么？

> ID：11768622
> 
> 赞同：1
> 
> 时间：2012-08-01T22:42:20.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite

我继承了一个 Rails 项目，其中（SQLite）开发和测试数据库是相同的，如 database.yml 文件。

这有什么好处吗？为什么会有人这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:54:06.340

测试数据库通常会被测试覆盖（除非您使用事务性固定装置）。如果测试和开发数据库相同，则每次运行测试套件时都会删除您的数据。开发数据可能会干扰测试套件并使其不可靠。

我会清楚地认为这是一个设计错误。没有理由，你应该这样做。甚至`database.yml`在新创建的 Rails 应用程序中也指出：

```
# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:00:20.280

这没有任何优势。有缺点。测试和开发或生产数据库应该是不同的。很多人将测试和开发设置保持不变，这并不是什么大问题，因为最重要的是生产数据库。这就是我能想到的原因，这就是之前的开发者。在项目上这样做。但它不应该是这样的。

# git - GIT，在正确的分支中进行更改

> ID：11768624
> 
> 赞同：3
> 
> 时间：2012-08-01T22:42:29.140
> 
> 标签：git

假设您维护 2 个分支，`dev`并且`release`.

除了纪律之外，您如何强迫自己不进行更改`release`和结帐`dev`？

**Q1：**如果您忘记这样做并在 中进行了更改`release`，有没有办法将它们提交给`dev`并中止`release`？

**Q2：**人们有没有什么常用的技巧来避免在分支中进行大量不是为它设计的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:58:13.107

**Q1**：是的，这很简单。如果你意识到你提交了错误的分支：

```
git checkout dev
git cherry-pick release # you may need to cherry-pick several commits
git checkout release && git reset --hard HEAD^ # or reset to wherever you want 
```

**Q2**：我严重依赖 git-completion：

[https://github.com/git/git/blob/master/contrib/completion/git-completion.bash](https://github.com/git/git/blob/master/contrib/completion/git-completion.bash)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:54:12.393

这并不像您正在寻找的那样复杂的答案，但是将您当前的 git 分支放在您的提示符中可以让您获得很大的成功。你可以在那里找到很多食谱，但是[这个](https://gist.github.com/31631)看起来很合理，有一些花里胡哨的东西。

你也可以看看[我是怎么做](https://github.com/craigcitro/craigcitro-dotfiles/blob/master/bashrc#L378)的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T22:56:04.513

我在我的 shell 中添加了一个小脚本，它总是向我显示我在哪个分支上。我使用[oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh/)，其中大多数主题都包含此功能，但也有一些较轻的选项，例如[此处](http://vvv.tobiassjosten.net/git/add-current-git-branch-to-your-bash-prompt)描述的选项。

这样我就可以知道我在哪个分支上工作并且通常不会搞砸。

如果您已经提交到分支，您可以使用`git rebase`and`git cherry-pick`重写历史并将它们放在其他分支上

# c - 这个值是如何计算的？

> ID：11768625
> 
> 赞同：0
> 
> 时间：2012-08-01T22:42:30.633
> 
> 标签：c, struct

这是大学过去的一篇论文。

有一个`struct`初始化：

```
struct double {int value; struct * double pred; struct * double succ;}; 
```

然后在主函数中：

```
main(...)
{
    struct double * d1, * d2, * d3;
    d1 = newDouble(33);
    d2 = newDouble(55);
    d3 = newDouble(77);
    d1 -> succ = d2;
    d2 -> pred = d1;
    d2 -> succ = d3;
    d3 -> pred = d2;

    printf("%d/n", d1->succ->succ->pred->value); // ??
} 
```

我不明白的是`->`in的作用`printf`。我无法弄清楚实际价值是多少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:47:30.683

`->`正在取消引用访问字段的指针：`d1->succ`是`(*d1).succ`.

有了这个复杂的结构: `d1->succ->succ->pred->value`，你最终会得到 的值`d2`，大概是`55`：

*   `d1->succ`是`d2`。
*   So`d1->succ->succ`等价于`d2->succ`，即`d3`。
*   So`d1->succ->succ->pred`等价于`d3->pred`，即`d2`。
*   所以`d1->succ->succ->pred->value`等价于`d2->value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:47:27.343

`a->b`在 C 中等于`(*a).b`。

这意味着，您将取消引用指针`a`，并获取`b`它指向的结构的成员。

在此示例中，`d1->succ`是`d2`，因此`d1->succ->succ`等于`d2->succ`，即`d3`。继续，`d1->succ->succ->pred`是`d2->succ->prev`哪个是`d3->prev`哪个`d2`。最后，`d1->succ->succ->pred->value`是`d2->value`，就是`55`。

# arrays - 确定一个点是否在网格上“被困”（封闭）

> ID：11768626
> 
> 赞同：3
> 
> 时间：2012-08-01T22:42:34.820
> 
> 标签：arrays, path-finding

我有一个包含外墙（标记为 W）、环境块（E）、开放空间（o）和活动点（A）的网格（下面的示例）。目前，该网格存储在 [,] 中，所有数据都与给定点相关联。我试图确定一个活动点是否被封闭（定义为无法到达网格的顶部，因为它被环境块阻挡），但我很难找到解决这个问题的简单方法。我知道我可以实现 A* 并且使用所有示例代码或多或少会很容易，但我认为对于这样一个看似微不足道的操作来说，性能损失真的是必要的或值得的。

```
W--Top Of Grid--W
W---------------W
W-EEAEE-----EEE-W
WEEEEEEE-EEEEAEEW
WEEEEEEE--EEEEEEW
WEEEEEEEE-AEEEEEW
WWWWWWWWWWWWWWWWW 
```

向下第三行的 A 可以绘制到网格顶部的路径，最后一行的 A 也可以，但是向下第四行的 A 不能。我不关心实际路径，我只需要确定对象是否被困。这个项目的最佳解决方案是什么？

对于它的价值，它是一个用于回合制网格游戏的 C# 项目，如果有帮助的话。

预先感谢您提供的任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:48:29.233

我认为顶部网格的洪水填充将解决所有问题。从顶部泛滥，然后检查哪个“A”被泛滥:)

该算法保证在整个过程中只访问每个节点一次，在最坏的情况下不能更快。而且用任何语言都可以很容易地实现。

这是来自[维基百科](http://en.wikipedia.org/wiki/Flood_fill)的算法：

```
 Flood-fill (node, target-color, replacement-color):
 1\. If the color of node is not equal to target-color, return.
 2\. Set the color of node to replacement-color.
 3\. Perform Flood-fill (one step to the west of node, target-color, replacement-color).
    Perform Flood-fill (one step to the east of node, target-color, replacement-color).
    Perform Flood-fill (one step to the north of node, target-color, replacement-color).
    Perform Flood-fill (one step to the south of node, target-color, replacement-color).
 4\. Return. 
```

...它看起来像：（来自维基）

![洪水填充](../Images/a23575f01fc96fbcca0ec4ea6231073f.png)

简而言之：

1.  从顶部网格泛滥，“W”和“E”阻挡泛洪（就像图片中的黑色单元格）
2.  洪水过后，检查有多少包含“A”的地方被洪水淹没。

# php - PHP 安全和 XSS 攻击 - 出现错误拒绝执行 JavaScript 脚本。在请求中找到的脚本源代码

> ID：11768633
> 
> 赞同：3
> 
> 时间：2012-08-01T22:43:03.643
> 
> 标签：php, security, xss, code-injection

我正在浏览我的网站并进行安全审核。我只是接受了我需要清理所有用户输入的事实，但我从未真正停下来尝试过真正发生的事情。我现在开始做实验。

我在 PHP 页面上有一个典型的联系表。是`_POST`数据。`$_POST["first_name"];`等等

我这样做是`$firstName = htmlspecialchars($_POST["first_name"]);`为了清理并显示如下所示的消息。

```
echo $firstName . ', thank you for your interest. We'll be in touch soon!' 
```

我开始玩这个，如果我`<script>alert('hello')</script>`在名字字段中输入一些东西，`htmlspecialchars`它会起作用并隐藏标签。

当我删除`htmlspecialchars`脚本时，它没有被转换并且它在源中显示为`<script>alert('hello')</script>`BUT，它不会执行。

我的问题是，为什么这不执行？这基本上不是 XSS 攻击会做的事情吗？我是不是误会了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:49:09.167

当我在 Chrome 中尝试此操作时，我在控制台中看到了一个错误：

> 拒绝执行 JavaScript 脚本。在请求中找到的脚本源代码。

因此，现代浏览器可能会执行此检查以防止它发生。无论如何，您都应该继续清理您的输入，但请检查您的控制台，您可能会看到这一点。

# asp.net - 针对 AD 使用 UPN、legacyUsername 和 Shortname 验证时出现意外结果

> ID：11768643
> 
> 赞同：1
> 
> 时间：2012-08-01T22:43:49.407
> 
> 标签：asp.net, active-directory, asp.net-membership, membership-provider

我正在使用 AD 成员资格提供程序来验证用户名，并且在让 user@upnDomain.com 以外的任何内容正常工作时遇到问题。

是否可以让其他用户名格式工作？

**代码**

```
 MembershipProvider domainProvider;
        domainProvider = Membership.Providers["MyADMembershipProvider"];

        if (domainProvider.ValidateUser("zzTest123", "pass"))
        {

        }
        if (domainProvider.ValidateUser(@"PARTNERSGROUP\zzTest123", "pass"))
        {

        }
        if (domainProvider.ValidateUser("zzTest123@company.com", "pass"))
        {

        }
        if (domainProvider.ValidateUser("zzTest123@testfirm.com", "pass"))
        {
          // this is the UPN and the only one that works.
        } 
```

**网页配置**

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" name=".ADAuthCookie"  timeout="10" />
</authentication>

<membership>
  <providers>
    <add  name="MyADMembershipProvider"   type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=2.0.0.0,  Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"  connectionStringName="TestDomain1ConnectionString"       />
  </providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:12:34.853

根据我的测试，会员资格提供程序仅适用于 UPN。要实现对其他类型的支持，请覆盖 ActiveDirectoryMembershipProvider 的 ValidateUser 函数并添加以下一些变体：

```
// 
// Will validate UPN, shortname only, or domain prefixed (domain\user)
public bool IsAuthenticated( string usr, string pwd)
{
    bool authenticated = false;
    DirectorySearcher dseSearcher=null;
    DirectoryEntry entry = null;
    try
    {
          dseSearcher = new DirectorySearcher();
        string rootDSE = dseSearcher.SearchRoot.Path;
          entry = new DirectoryEntry(rootDSE, usr, pwd);
        object nativeObject = entry.NativeObject;
        authenticated = true;
    }
    catch (DirectoryServicesCOMException cex)
    {
        //not authenticated; reason why is in cex
    }
    catch (Exception ex)
    {
        //not authenticated due to some other exception [this is optional]
    }
    finally 
    {
        dseSearcher.Dispose();
        entry.Dispose();
    }
    return authenticated;
} 
```

请注意，System.DirectoryServices.AccountManagement 命名空间只会验证短名称 UPN，但似乎不会验证 DOMAIN\Username 帐户。

如果以 DOMAIN\Username 格式传递用户名，以下代码将引发异常

> “LdapException：发生本地错误。”

```
 var ctx = new PrincipalContext(ContextType.Domain);
    if (ctx.ValidateCredentials(username,password , ContextOptions.Negotiate))
    {

    } 
```

# android - LogCat 是压倒性的，我不知道该怎么办... 应用程序在打开时关闭？

> ID：11768645
> 
> 赞同：2
> 
> 时间：2012-08-01T22:44:17.137
> 
> 标签：android, android-emulator, android-2.2-froyo

这是java文件，唯一使用的...如果我知道错误意味着我可以自己做

```
package tip.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.view.View;
import android.widget.Button;

public class TipCalculator extends Activity 
{

private Button enter;
EditText myEditField = (EditText) findViewById(R.id.percentText);
final EditText myEditField2 = (EditText) findViewById(R.id.billText);

float percentage = 0;
float percentageInp = 0;
float billAmount = 0;
double output = 0; 
String output1 = "";
Button clearButton = (Button) findViewById(R.id.clearButton);

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myEditField = (EditText) findViewById(R.id.percentText);
    enter = (Button)findViewById(R.id.button1);

    enter.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
             TextView textView;
             TextView errors;
             textView = (TextView) findViewById(R.id.textView1);
             errors = (TextView) findViewById(R.id.errorText);             
             for(;;){

             if(myEditField == null){
                 break;
             }

             if(myEditField2 == null){
                 break;
             }

             }

            percentageInp = Float.parseFloat(myEditField.getText().toString());
            billAmount = Float.parseFloat(myEditField2.getText().toString());

            percentage = ((float)percentageInp /100);

            output = (double)(billAmount * percentage);

            double result = output * 100;
            result = Math.round(result);
            result = result / 100;

            output1 = Double.toString(result);

            textView.setText(output1 + " $");

        }
    });

    clearButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            percentage = 0;
            output = 0;
            output1 = "";
             TextView textView;

             textView = (TextView) findViewById(R.id.textView1);

            textView.setText("");

            percentageInp = 0;
            billAmount = 0;

            myEditField.setText("");
            myEditField2.setText("");

        }

    });
}
} 
```

这是 logcat，我不知道错误是什么意思或如何处理它们...注意：这些仅在应用程序打开时产生，然后崩溃

```
08-01 15:37:43.934: E/Trace(671): error opening trace file: No such file or directory (2)
08-01 15:37:44.704: E/AndroidRuntime(671): FATAL EXCEPTION: main
08-01 15:37:44.704: E/AndroidRuntime(671): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{tip.calculator/tip.calculator.TipCalculator}: java.lang.NullPointerException
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.os.Looper.loop(Looper.java:137)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-01 15:37:44.704: E/AndroidRuntime(671):  at java.lang.reflect.Method.invokeNative(Native Method)
08-01 15:37:44.704: E/AndroidRuntime(671):  at java.lang.reflect.Method.invoke(Method.java:511)
08-01 15:37:44.704: E/AndroidRuntime(671):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-01 15:37:44.704: E/AndroidRuntime(671):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-01 15:37:44.704: E/AndroidRuntime(671):  at dalvik.system.NativeStart.main(Native Method)
08-01 15:37:44.704: E/AndroidRuntime(671): Caused by: java.lang.NullPointerException
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.Activity.findViewById(Activity.java:1825)
08-01 15:37:44.704: E/AndroidRuntime(671):  at tip.calculator.TipCalculator.<init>(TipCalculator.java:19)
08-01 15:37:44.704: E/AndroidRuntime(671):  at java.lang.Class.newInstanceImpl(Native Method)
08-01 15:37:44.704: E/AndroidRuntime(671):  at java.lang.Class.newInstance(Class.java:1319)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-01 15:37:44.704: E/AndroidRuntime(671):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-01 15:37:44.704: E/AndroidRuntime(671):  ... 11 more
08-01 15:38:44.993: E/Trace(741): error opening trace file: No such file or directory (2)
08-01 15:38:45.123: E/AndroidRuntime(741): FATAL EXCEPTION: main
08-01 15:38:45.123: E/AndroidRuntime(741): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{tip.calculator/tip.calculator.TipCalculator}: java.lang.NullPointerException
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.os.Looper.loop(Looper.java:137)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-01 15:38:45.123: E/AndroidRuntime(741):  at java.lang.reflect.Method.invokeNative(Native Method)
08-01 15:38:45.123: E/AndroidRuntime(741):  at java.lang.reflect.Method.invoke(Method.java:511)
08-01 15:38:45.123: E/AndroidRuntime(741):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-01 15:38:45.123: E/AndroidRuntime(741):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-01 15:38:45.123: E/AndroidRuntime(741):  at dalvik.system.NativeStart.main(Native Method)
08-01 15:38:45.123: E/AndroidRuntime(741): Caused by: java.lang.NullPointerException
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.Activity.findViewById(Activity.java:1825)
08-01 15:38:45.123: E/AndroidRuntime(741):  at tip.calculator.TipCalculator.<init>(TipCalculator.java:19)
08-01 15:38:45.123: E/AndroidRuntime(741):  at java.lang.Class.newInstanceImpl(Native Method)
08-01 15:38:45.123: E/AndroidRuntime(741):  at java.lang.Class.newInstance(Class.java:1319)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
08-01 15:38:45.123: E/AndroidRuntime(741):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
08-01 15:38:45.123: E/AndroidRuntime(741):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T22:47:46.280

问题是您用于初始化`TipCalculator`类的成员字段的这些行：

```
EditText myEditField = (EditText) findViewById(R.id.percentText);
final EditText myEditField2 = (EditText) findViewById(R.id.billText);
Button clearButton = (Button) findViewById(R.id.clearButton); 
```

`findViewById`在调用 之前不能使用`setContentView`。将以上内容替换为：

```
EditText myEditField;
EditText myEditField2;
Button clearButton; 
```

然后在调用后将其添加到`onCreate`某处`setContentView`：

```
myEditField = (EditText) findViewById(R.id.percentText);
myEditField2 = (EditText) findViewById(R.id.billText);
clearButton = (Button) findViewById(R.id.clearButton); 
```

PS 解释 logcat 输出的方法是查找最后一个“Caused by:”行并读取该堆栈跟踪。之前的所有这些都与这种诊断任务无关。

# c++ - 地图结构也支持排序？

> ID：11768647
> 
> 赞同：1
> 
> 时间：2012-08-01T22:44:33.077
> 
> 标签：c++, data-structures

我在我的程序中使用地图结构。该结构的关键是时间戳。值不断随机变化。我使用 map 的主要目的是确保所有值及其时间戳的表示应该按降序排列，就像最新的事件应该排在最前面一样。然而，这并没有发生。这些值不是所需的（降序）顺序。

我已经声明了地图结构，例如

```
map<time_t, events> eventR;
map<time_t, events>::iterator iterator;

if the events are there {
then iterator=eventR.begin();
for(iterator = eventR.begin(); iterator!=eventR.end(); ++iterator)
{
//Display
}
} 
```

可能是我对地图结构的理解有误，好像它不一定排序，但我想如果我使用时间戳，那么数据将根据最新事件显示。我在这里做错了吗？我是否必须使用不同的数据结构才能获得所需的结果？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T22:47:19.140

将您的地图声明为：`std::map<time_t, events, std::greater<time_t>>`. （使用 a`typedef`以便更容易声明迭代器。）

`rbegin()`或者，使用and反向迭代您的地图`rend()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:48:28.777

C++ std::map 确实保证了一定的排序顺序：

来自：[http ://www.cplusplus.com/reference/stl/map/](http://www.cplusplus.com/reference/stl/map/)

> 在内部，map 中的元素按照构造时设置的特定严格的弱排序标准从低到高的键值排序。

# c# - C#rdlc报错LocalProcessingException

> ID：11768650
> 
> 赞同：0
> 
> 时间：2012-08-01T22:44:39.987
> 
> 标签：c#, asp.net, .net, rdlc

我花了很长时间才弄清楚这一点。我以正确的方式传递参数（按照网络上的一些教程）。.rdlc 也有我的参数的正确符号（表达式）（=Parameters！myparam1.Value）使用报告窗口贴花。

计划是在我单击一个按钮后加载报告。但是当它试图设置参数时，错误就发生了。这是代码：

```
private void button4_Click(object sender, EventArgs e)
{
  ReportViewer reportViewer1 = new ReportViewer();
  reportViewer1.LocalReport.ReportPath = "AddressLabelReport.rdlc";
  reportViewer1.ProcessingMode = ProcessingMode.Local;
  reportViewer1.LocalReport.SetParameters(new ReportParameter[] { new ReportParameter  ("myparam1", "my value1", false), new ReportParameter("myparam2", "my value2", false) }); 
  reportViewer1.RefreshReport();
} 
```

这是 StackTrace ：

```
Microsoft.Reporting.WinForms.LocalProcessingException was unhandled
  Message="An error occurred during local report processing."
  Source="Microsoft.ReportViewer.WinForms"
  StackTrace:
       at Microsoft.Reporting.WinForms.LocalReport.CompileReport()
       at Microsoft.Reporting.WinForms.LocalReport.SetParameters(IEnumerable`1 parameters)
       at TextBookLabelForm.Form1.button4_Click(Object sender, EventArgs e) in C:\Projects\TextBookLabelForm\TextBookLabelForm\Form1.cs:line 204
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at TextBookLabelForm.Program.Main() in C:\Projects\TextBookLabelForm\TextBookLabelForm\Program.cs:line 17
       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart() 
```

任何帮助都会得到帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-07-08T11:15:40.703

除了程序员错误之外，最可能的问题是reportviewer 版本的向后兼容性。每次使用 GUI 编辑报告时，通常都需要解决方法。

1.  通过右键单击解决方案资源管理器中的文件来打开报告 (.rdlc) 文件。然后选择“打开方式...”选择 XML（文本）编辑器。（报告作为 XML 文档打开。

2.  找到标签并确保它指向旧版本的命名空间。（通常，您必须在此处更改命名空间定义中的年份。我将我的更改为 2008。我认为这就是 VS2010 到 VS2015 使用的。）

3.  接下来，找到 ReportSection 及其相应的子 ReportSection 标记。删除这些元素（标签）及其相应的结束标签，即 /ReportSections、/ReportSection

4.  然后找到 ReportParametersLayout 并删除它及其内部内容。

5.  保存更新并再次运行程序。报告应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T20:05:15.837

尝试检查报告中的参数名称。如果您使用不同的名称添加它们，它将引发该异常。当您的报告无效时，它也会引发此异常，尽管我怀疑是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T13:00:22.833

Yoy可以使用like this来使用这个参数。试试这个绝对能帮到你

```
ReportParameter[] parms = new ReportParameter[n];
parms[0] = new ReportParameter("myparam1", "my value1");
parms[1] = new ReportParameter("myparam2", "my value2");
this.reportViewer1.LocalReport.SetParameters(parms);
this.reportViewer1.RefreshReport(); 
```

# c++ - 我的代码在尝试创建 BMP 文件时失败

> ID：11768652
> 
> 赞同：0
> 
> 时间：2012-08-01T22:44:46.440
> 
> 标签：c++

我正在尝试创建一个 .bmp 文件，但无法识别该文件。我究竟做错了什么？

```
#define ImageWidgh  1920
#define ImageHeight 1080
#define fileSize ImageWidgh*ImageHeight*3+54

struct BMPH
{
    short Signature;
    long int FileSize,reserved,DataOffest;
}BMPH;
struct BMPIH
{
    long int Size,Width,Height;
    short Planes,BitCount;
    long int Compression,ImageSize,XpixelsPerM,YpixelsPerM,ColorsUsed,ColorImportant;
}BMPIH;
struct BMPCT
{
    unsigned char Red,Green,Blue;
}BMPCT;
BMPH  *getBMPH()
{
    BMPH New;
    New.Signature='BM';
    New.FileSize=fileSize;
    New.reserved=0;
    New.DataOffest=54;
    return &New;
}
BMPIH *getBMPIH()
{
    BMPIH New;
    New.Size=40;
    New.Width=ImageWidgh;
    New.Height=ImageHeight;
    New.Planes=1;
    New.BitCount=24;
    New.Compression=0;
    New.ImageSize=0;
    New.XpixelsPerM=0;
    New.YpixelsPerM=0;
    New.ColorsUsed=0;
    New.ColorImportant=0;
    return &New;
}
BMPCT Pixels [ImageWidgh][ImageHeight];
void writeFile()
{
    FILE *file;
    file=fopen("D://test.bmp","wb");
    fwrite(getBMPH() ,sizeof(BMPH) ,1,file);
    fwrite(getBMPIH(),sizeof(BMPIH),1,file);
    fwrite(&Pixels   ,ImageWidgh*ImageHeight*3,1,file);
    fclose(file);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:48:55.017

一个典型的错误：你返回了一个指向局部变量的指针，一旦你离开函数，它就会被销毁。指针最终指向乱码或更糟。

让函数返回完整结构而不是指针，或者将指针传递给函数而不是在其中创建变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:02:03.787

这对我来说看起来不正确：

```
New.Signature='BM'; 
```

你当然想要：

```
New.Signature = *(short*)"BM"; 
```

# performance - Haskell中合理有效的纯功能矩阵产品？

> ID：11768656
> 
> 赞同：20
> 
> 时间：2012-08-01T22:45:19.790
> 
> 标签：performance, haskell, functional-programming

我对 Haskell 有点了解，我想知道是否可以在 Haskell 中编写类似矩阵矩阵乘积的东西，如下所示：

1.  **纯功能**：在其类型签名中没有`IO`或`State`单子（我不关心函数体中发生了什么。*也就是说，我不关心函数体是否使用单子，只要整个函数是纯的*）。我可能想在纯函数中使用这个矩阵矩阵乘积。
2.  **内存安全：没有 malloc 或指针**。我知道可以在 Haskell 中“编写 C”，但是您会失去内存安全性。实际上，用 C 语言编写此代码并将其与 Haskell 接口也会失去内存安全性。
3.  **与 Java 一样高效。**具体而言，假设我在谈论一个简单的三重循环、单精度、连续的列优先布局（`float[]`、 not `float[][]`）和大小为 1000x1000 的矩阵以及单核 CPU。（如果您每个周期进行 0.5-2 次浮点运算，那么您可能就在球场上。）

（我不希望这听起来像是一个挑战，但请注意，Java 可以轻松满足上述**所有**要求。）

我已经知道了

1.  **三重循环实现并不是最有效的**。这是相当缓存无视的。在这种特殊情况下，最好使用编写良好的[BLAS实现。](https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)然而，人们不能总是指望 C 库可用于尝试做的事情。我想知道是否可以用普通的 Haskell 编写相当有效的代码。
2.  **有些人写了整个研究论文来证明#3**。但是，我不是计算机科学研究人员。我想知道是否有可能在 Haskell 中保持简单的事情。
3.  **Haskell 简介有一个矩阵乘积实现**。但它不能满足上述要求。

解决意见：

> 我有三个原因：首先，“没有 malloc 或指针”的要求还没有明确定义（我挑战你编写任何不使用指针的 Haskell 代码）；

我看到很多 Haskell 程序没有使用`Ptr`. 也许它指的是在机器指令级别将使用指针这一事实？那并非我的本意。我指的是 Haskell 源代码的抽象级别。

> 其次，对 CS 研究的攻击是不合适的（而且我无法想象比使用别人已经为你编写的代码更简单的事情了）；第三，Hackage上有很多矩阵包（问这个问题的准备工作应该包括review和reject每一个）。

看来您的 #2 和 #3 是相同的（“使用现有库”）。我对矩阵产品感兴趣，因为它可以简单地测试 Haskell 自己可以做什么，以及它是否允许您“让简单的事情保持简单”。我可以很容易地想出一个没有任何现成库的数值问题，但是我必须解释这个问题，而每个人都已经知道什么是矩阵乘积。

> Java怎么可能满足1.？任何 Java 方法本质上都是 `:: IORef Arg -> ... -> IORef This -> IO Ret`

这实际上是我问题的根源（+1）。虽然 Java 没有声称可以跟踪纯度，但 Haskell 确实如此。在 Java 中，函数是否为纯函数在注释中指明。我可以声称矩阵乘积是纯的，即使我在函数体中进行了突变。**问题是 Haskell 的方法（在类型系统中编码的纯度）是否与效率、内存安全和简单性兼容。**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T12:01:55.950

> 与 Java 一样高效。具体而言，假设我正在谈论一个简单的三重循环、单精度、连续列主要布局（float[]，而不是 float[][]）和大小为 1000x1000 的矩阵，以及一个单核 CPU。（如果您每个周期进行 0.5-2 次浮点运算，那么您可能就在球场上）

所以像

```
public class MatrixProd {
    static float[] matProd(float[] a, int ra, int ca, float[] b, int rb, int cb) {
        if (ca != rb) {
            throw new IllegalArgumentException("Matrices not fitting");
        }
        float[] c = new float[ra*cb];
        for(int i = 0; i < ra; ++i) {
            for(int j = 0; j < cb; ++j) {
                float sum = 0;
                for(int k = 0; k < ca; ++k) {
                    sum += a[i*ca+k]*b[k*cb+j];
                }
                c[i*cb+j] = sum;
            }
        }
        return c;
    }

    static float[] mkMat(int rs, int cs, float x, float d) {
        float[] arr = new float[rs*cs];
        for(int i = 0; i < rs; ++i) {
            for(int j = 0; j < cs; ++j) {
                arr[i*cs+j] = x;
                x += d;
            }
        }
        return arr;
    }

    public static void main(String[] args) {
        int sz = 100;
        float strt = -32, del = 0.0625f;
        if (args.length > 0) {
            sz = Integer.parseInt(args[0]);
        }
        if (args.length > 1) {
            strt = Float.parseFloat(args[1]);
        }
        if (args.length > 2) {
            del = Float.parseFloat(args[2]);
        }
        float[] a = mkMat(sz,sz,strt,del);
        float[] b = mkMat(sz,sz,strt-16,del);
        System.out.println(a[sz*sz-1]);
        System.out.println(b[sz*sz-1]);
        long t0 = System.currentTimeMillis();
        float[] c = matProd(a,sz,sz,b,sz,sz);
        System.out.println(c[sz*sz-1]);
        long t1 = System.currentTimeMillis();
        double dur = (t1-t0)*1e-3;
        System.out.println(dur);
    }
} 
```

我想？（我在编码之前没有正确阅读规范，所以布局是行主要的，但由于访问模式是相同的，这不会像混合布局那样产生影响，所以我假设没关系。）

我没有花任何时间思考一个聪明的算法或低级优化技巧（无论如何*我*在 Java 中不会有太多收获）。我只是写了简单的循环，因为

> 我不希望这听起来像是一个挑战，**但请注意，Java 可以轻松满足上述所有要求**

这就是 Java**轻松**提供的东西，所以我会接受它。

> （如果您每个周期进行 0.5-2 次浮点运算，那么您可能就在球场上）

恐怕在 Java 和 Haskell 中都没有。通过简单的三重循环，太多的缓存未命中无法达到该吞吐量。

在 Haskell 中做同样的事情，再次没有考虑聪明，一个简单直接的三重循环：

```
{-# LANGUAGE BangPatterns #-}
module MatProd where

import Data.Array.ST
import Data.Array.Unboxed

matProd :: UArray Int Float -> Int -> Int -> UArray Int Float -> Int -> Int -> UArray Int Float
matProd a ra ca b rb cb =
    let (al,ah)     = bounds a
        (bl,bh)     = bounds b
        {-# INLINE getA #-}
        getA i j    = a!(i*ca + j)
        {-# INLINE getB #-}
        getB i j    = b!(i*cb + j)
        {-# INLINE idx #-}
        idx i j     = i*cb + j
    in if al /= 0 || ah+1 /= ra*ca || bl /= 0 || bh+1 /= rb*cb || ca /= rb
         then error $ "Matrices not fitting: " ++ show (ra,ca,al,ah,rb,cb,bl,bh)
         else runSTUArray $ do
            arr <- newArray (0,ra*cb-1) 0
            let outer i j
                    | ra <= i   = return arr
                    | cb <= j   = outer (i+1) 0
                    | otherwise = do
                        !x <- inner i j 0 0
                        writeArray arr (idx i j) x
                        outer i (j+1)
                inner i j k !y
                    | ca <= k   = return y
                    | otherwise = inner i j (k+1) (y + getA i k * getB k j)
            outer 0 0

mkMat :: Int -> Int -> Float -> Float -> UArray Int Float
mkMat rs cs x d = runSTUArray $ do
    let !r = rs - 1
        !c = cs - 1
        {-# INLINE idx #-}
        idx i j = cs*i + j
    arr <- newArray (0,rs*cs-1) 0
    let outer i j y
            | r < i     = return arr
            | c < j     = outer (i+1) 0 y
            | otherwise = do
                writeArray arr (idx i j) y
                outer i (j+1) (y + d)
    outer 0 0 x 
```

和调用模块

```
module Main (main) where

import System.Environment (getArgs)
import Data.Array.Unboxed

import System.CPUTime
import Text.Printf

import MatProd

main :: IO ()
main = do
    args <- getArgs
    let (sz, strt, del) = case args of
                            (a:b:c:_) -> (read a, read b, read c)
                            (a:b:_)   -> (read a, read b, 0.0625)
                            (a:_)     -> (read a, -32, 0.0625)
                            _         -> (100, -32, 0.0625)
        a = mkMat sz sz strt del
        b = mkMat sz sz (strt - 16) del
    print (a!(sz*sz-1))
    print (b!(sz*sz-1))
    t0 <- getCPUTime
    let c = matProd a sz sz b sz sz
    print $ c!(sz*sz-1)
    t1 <- getCPUTime
    printf "%.6f\n" (fromInteger (t1-t0)*1e-12 :: Double) 
```

所以我们用两种语言做几乎完全相同的事情。用 编译 Haskell `-O2`，用 javac 编译 Java

```
$ java MatrixProd 1000 "-13.7" 0.013
12915.623
12899.999
8.3592897E10
8.193
$ ./vmmult 1000 "-13.7" 0.013
12915.623
12899.999
8.35929e10
8.558699 
```

结果时间非常接近。

如果我们将 Java 代码编译为本机，使用`gcj -O3 -Wall -Wextra --main=MatrixProd -fno-bounds-check -fno-store-check -o jmatProd MatrixProd.java`,

```
$ ./jmatProd 1000 "-13.7" 0.013
12915.623
12899.999
8.3592896512E10
8.215 
```

仍然没有太大的区别。

作为特殊奖励，C 中的相同算法（gcc -O3）：

```
$ ./cmatProd 1000 "-13.7" 0.013
12915.623047
12899.999023
8.35929e+10
8.079759 
```

因此，当涉及使用浮点数的计算密集型任务时，这表明简单的 Java 和简单的 Haskell 之间没有根本区别（在处理中到大数的整数运算时，GHC 对 GMP 的使用使得 Haskell 的性能大大优于 Java 的 BigInteger对于许多任务，但这当然是库问题，而不是语言问题），并且使用这种算法，两者都接近 C。

不过，平心而论，这是因为访问模式每隔纳秒就会导致一次缓存未命中，所以在所有三种语言中，这种计算都是受内存限制的。

如果我们通过将行优先矩阵与列优先矩阵相乘来改进访问模式，一切都会变得更快，gcc 编译的 C 完成它 1.18 秒，java 需要 1.23 秒，ghc 编译的 Haskell 大约需要 5.8 秒，这可以通过使用 llvm 后端减少到 3 秒。

在这里，数组库的范围检查真的很痛苦。使用未经检查的数组访问（应该在检查错误之后，因为检查已经在控制循环的代码中完成），GHC 的本机后端在 2.4 秒内完成，通过 llvm 后端让计算在 1.55 秒内完成，这是不错的，虽然比 C 和 Java 慢得多。使用原语`GHC.Prim`而不是[数组](http://hackage.haskell.org/package/array)库，llvm 后端生成的代码可以在 1.16 秒内运行（同样，每次访问都没有边界检查，但是在这种情况下，之前可以很容易地证明在计算过程中只生成有效的索引，所以在这里，没有牺牲内存安全¹；检查每次访问使时间达到 1.96 秒，仍然明显优于[数组的边界检查](http://hackage.haskell.org/package/array)图书馆）。

底线：GHC 需要（更多）更快的边界检查分支，优化器还有改进的空间，但原则上，“Haskell 的方法（在类型系统中编码的纯度）与效率、内存安全和简单性兼容“，我们只是还没到那里。就目前而言，必须决定自己愿意牺牲多少。

* * *

¹ 是的，这是一种特殊情况，通常省略边界检查确实会牺牲内存安全，或者至少很难证明它没有。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-02T03:36:29.727

有两个角度来解决这个问题。

1.  **沿着这些方向进行的研究**正在进行中。现在，有很多 Haskell 程序员比我聪明；我经常被提醒和谦卑的事实。其中一个可能会过来纠正我，但我不知道有任何简单的方法可以将安全的 Haskell 原语组合成顶级矩阵乘法例程。你谈论的那些论文听起来像是一个好的开始。

    > 但是，我不是计算机科学研究人员。我想知道是否有可能在 Haskell 中保持简单的事情。

    如果你引用那些论文，也许我们可以帮助破译它们。

2.  **沿着这些思路，**软件工程是容易理解的、直接的，甚至是容易的。**精明的 Haskell 编码器会在 BLAS 周围使用薄包装器，或者在 Hackage 中寻找这样的包装器。**

 **破译尖端研究是一个持续的过程，它将知识从研究人员转移到工程师。计算机科学研究人员 CAR Hoare 率先发现了快速排序并发表了一篇关于它的论文。今天，很少有计算机科学专业的毕业生不能亲自从记忆中实现快速排序（至少，那些最近毕业的人）。

## 一点历史

几乎这个确切的问题在历史上已经被问过几次了。

1.  是否可以在 Fortran 中编写与汇编一样快的矩阵算术？

2.  是否可以在 C 中编写与 Fortran 一样快的矩阵算术？

3.  是否可以用 Java 编写与 C 一样快的矩阵算术？

4.  是否可以在 Haskell 中编写与 Java 一样快的矩阵算术？

到目前为止，答案一直是“还没有”，其次是“足够接近”。使这成为可能的进步来自编写代码的改进、编译器的改进以及编程语言本身的改进。

作为一个具体的例子，直到 C99 编译器在过去十年中变得普遍，C 在许多实际应用程序中都无法超越 Fortran。在 Fortran 中，假定不同的数组具有彼此不同的存储空间，而在 C 中通常不是这种情况。因此，允许 Fortran 编译器进行 C 编译器无法进行的优化。好吧，直到 C99 出现并且您可以将`restrict`限定符添加到您的代码中。

Fortran 编译器等待着。最终，处理器变得足够复杂，以至于编写好的汇编代码变得更加困难，而编译器变得足够复杂，以至于 Fortran 速度很快。

然后 C 程序员一直等到 2000 年代才有能力编写与 Fortran 匹配的代码。在那之前，他们使用的是用 Fortran 或汇编程序（或两者兼有）编写的库，或者忍受降低的速度。

同样，Java 程序员必须等待 JIT 编译器，并且必须等待特定的优化出现。JIT 编译器最初是一个深奥的研究概念，直到它们成为日常生活的一部分。边界检查优化也是必要的，以避免对每个数组访问进行测试和分支。

## 回到哈斯克尔

因此，很明显 Haskell 程序员正在“等待”，就像他们之前的 Java、C 和 Fortran 程序员一样。我们还在等什么？

*   也许我们只是在等待有人编写代码，并向我们展示它是如何完成的。

*   也许我们正在等待编译器变得更好。

*   也许我们正在等待 Haskell 语言本身的更新。

也许我们正在等待上述的某种组合。

## 关于纯度

纯度和单子在 Haskell 中经常混为一谈。这样做的原因是因为在 Haskell 中，不纯函数总是使用`IO`monad。例如，`State`monad 是 100% 纯的。因此，当您说“纯”和“类型签名不使用`State`monad”时，它们实际上是完全独立且独立的要求。

*但是，*你也可以`IO`在纯函数的实现中使用 monad，事实上，这很容易：

```
addSix :: Int -> Int
addSix n = unsafePerformIO $ return (n + 6) 
```

好的，是的，这是一个愚蠢的功能，但它是纯粹的。它甚至显然是纯粹的。纯度测试是双重的：

1.  对于相同的输入，它是否给出相同的结果？是的。

2.  它会产生任何语义上显着的副作用吗？不。

我们喜欢纯函数的原因是纯函数比不纯函数更容易组合和操作。它们如何实施并不重要。我不知道你是否意识到这一点，但是`Integer`两者`ByteString`基本上都是不纯 C 函数的包装器，即使接口是纯的。（有一个新的实现工作`Integer`，我不知道它有多远。）

## 最终答案

> 问题是 Haskell 的方法（在类型系统中编码的纯度）是否与效率、内存安全和简单性兼容。

这部分的答案是“是”，因为我们可以从 BLAS 中获取简单的函数并将它们放入一个纯粹的、类型安全的包装器中。包装器的类型编码了函数的安全性，即使 Haskell 编译器无法证明函数的实现是纯的。我们`unsafePerformIO`在它的实现中使用它既是对我们已经证明了函数的纯度的承认，也是对我们无法在 Haskell 的类型系统中表达该证明的一种让步。

但答案也是“还没有”，因为我不知道如何完全在 Haskell 中实现该功能。

这方面的研究正在进行中。人们正在关注像[Coq这样的证明系统和像](https://en.wikipedia.org/wiki/Coq)[Agda](https://en.wikipedia.org/wiki/Agda_%28programming_language%29)这样的新语言，以及 GHC 本身的发展。为了了解什么样的类型系统，我们需要证明可以安全使用高性能 BLAS 例程。这些工具也可以与 Java 等其他语言一起使用。例如，您可以在 Coq 中编写证明您的 Java 实现是纯的。

我为“是和否”的答案道歉，但没有其他答案会承认工程师（关心“是”）和研究人员（关心“还没有”）的贡献。

**PS**请引用论文。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-02T04:47:33.283

与 Java 一样，Haskell 并不是编写数字代码的最佳语言。

Haskell 的大量数字代码生成是……平均的。它没有像英特尔和 GCC 那样的多年研究。

相反，Haskell 为您提供的是一种将您的“快速”代码与应用程序的其余部分干净地接口的方法。请记住，3% 的代码负责 97% 的应用程序运行时间。[1](http://en.wikipedia.org/wiki/Domain-specific_language)

使用 Haskell，您可以调用这些高度优化的函数，并与您的其余代码完美地交互：通过非常好的 C 外部函数接口。事实上，如果您愿意，您可以使用架构的汇编语言编写数字代码并获得更高的性能！为应用程序的性能要求高的部分使用 C 并不是一个错误——它是一个特性。

但我离题了。

通过隔离这些高度优化的函数，并使用与您的其余 Haskell 代码类似的接口，您可以使用 Haskell 非常强大的重写规则执行高级优化，它允许您编写规则，例如`reverse . reverse == id`在编译时自动减少复杂表达式[2](https://en.wikipedia.org/wiki/FLOPS) . 这导致了速度极快、功能纯正且易于使用的库，例如 Data.Text [3](https://en.wikipedia.org/wiki/Intel_Fortran_Compiler)和 Data.Vector [4]。

通过结合高低级别的优化，我们最终得到了一个更加优化的实现，每一半（“C/asm”和“Haskell”）都相对容易阅读。低级优化是用它的母语（C 或汇编）完成的，高级优化有一个特殊的[DSL](http://en.wikipedia.org/wiki/Domain-specific_language)（Haskell 重写规则），其余的代码完全没有注意到它。

总之，是的，Haskell 可以比 Java 更快。但它通过 C 获取原始[FLOPS](https://en.wikipedia.org/wiki/FLOPS)来作弊。这在 Java 中要困难得多（而且 Java 的 FFI 开销要高得多），因此可以避免。在 Haskell 中，这是很自然的。如果您的应用程序花费大量时间进行数值计算，那么您可能不考虑使用 Haskell 或 Java，而是使用 Fortran 来满足您的需求。如果您的应用程序将大部分时间花在一小部分性能敏感代码上，那么 Haskell FFI 是您最好的选择。如果您的应用程序不花任何时间在数字代码上......然后使用您喜欢的任何东西。=)

Haskell（也不是 Java，就此而言）不是 Fortran。

[1](http://en.wikipedia.org/wiki/Domain-specific_language)这些数字是虚构的，但你明白我的意思。

[2](https://en.wikipedia.org/wiki/FLOPS) [http://www.cse.unsw.edu.au/~dons/papers/CLS07.html](http://www.cse.unsw.edu.au/~dons/papers/CLS07.html)

[3](https://en.wikipedia.org/wiki/Intel_Fortran_Compiler) [http://hackage.haskell.org/package/text](http://hackage.haskell.org/package/text)

[4] [http://hackage.haskell.org/package/vector](http://hackage.haskell.org/package/vector)

* * *

现在已经不碍事了，回答你的实际问题：

不，目前在 Haskell 中编写矩阵乘法并不明智。目前，REPA 是执行此操作的规范方法 [5]。该实现部分破坏了内存安全（他们使用 unsafeSlice），但“破坏内存安全”与该函数隔离，实际上非常安全（但不容易被编译器验证），并且如果出现问题很容易删除（替换“ unsafeSlice”与“切片”）。

但这是哈斯克尔！很少会孤立地考虑函数的性能特征。这可能是一件坏事（在空间泄漏的情况下），或者是一件非常非常好的事情。

尽管使用的矩阵乘法算法很幼稚，但它在原始基准测试中的表现会更差。但我们的代码很少看起来像基准测试。

如果您是一名拥有数百万数据点的科学家并想要乘以巨大的矩阵怎么办？[7]

对于这些人，我们有 mmultP [6]。这会执行矩阵乘法，但是是数据并行的，并且受 REPA 的嵌套数据并行性约束。另请注意，代码与顺序版本基本没有变化。

对于那些不乘以大矩阵而是乘以许多小矩阵的人来说，往往会有其他代码与所述矩阵交互。可能将其切割成列向量并找到它们的点积，也许找到它的特征值，也许完全是别的东西。与 C 不同，Haskell 知道，尽管您喜欢孤立地解决问题，但通常在那里找不到最有效的解决方案。

与 ByteString、Text 和 Vector 一样，REPA 数组也需要融合。[2](https://en.wikipedia.org/wiki/FLOPS)顺便说一句，您实际上应该阅读[2](https://en.wikipedia.org/wiki/FLOPS) - 这是一篇写得很好的论文。这与相关代码的积极内联和 REPA 的高度并行性相结合，使我们能够在幕后通过非常先进的高级优化来表达这些高级数学概念。

虽然目前尚不知道用纯函数式语言编写有效的矩阵乘法的方法，但我们可以稍微接近（没有自动矢量化，一些过度取消引用以获取实际数据等），但与[IFORT](https://en.wikipedia.org/wiki/Intel_Fortran_Compiler)或海合会可以。但是程序并不存在于一个岛上，并且在 Haskell 中使整个岛表现良好比 Java 容易得多。

[5] [http://hackage.haskell.org/packages/archive/repa-algorithms/3.2.1.1/doc/html/src/Data-Array-Repa-Algorithms-Matrix.html#mmultS](http://hackage.haskell.org/packages/archive/repa-algorithms/3.2.1.1/doc/html/src/Data-Array-Repa-Algorithms-Matrix.html#mmultS)

[6] [http://hackage.haskell.org/packages/archive/repa-algorithms/3.2.1.1/doc/html/src/Data-Array-Repa-Algorithms-Matrix.html#mmultP](http://hackage.haskell.org/packages/archive/repa-algorithms/3.2.1.1/doc/html/src/Data-Array-Repa-Algorithms-Matrix.html#mmultP)

[7] 实际上，最好的方法是使用 GPU。Haskell 有一些 GPU DSL 可用，这使得它可以在本地完成。他们真的很整洁！**

# java - Java - KeyPairGenerator.Initialize(int,SecureRandom) NullPointerException

> ID：11768659
> 
> 赞同：0
> 
> 时间：2012-08-01T22:45:29.197
> 
> 标签：java, cryptography, nullpointerexception, key-generator

我正在用 Java 创建一个加密安全的 IM 应用程序。第一步（建立连接后）是交换公钥（RSA-4096），以便对方可以创建对称密钥（AES-256），用对方的公钥加密，通过连接发送，原始方可以使用他们的私钥解密对称密钥，然后双方可以交换使用 256 位密钥加密的消息。

我的问题是在初始化时出现`KeyPairGenerator`，每次我调用`kpg.initialize(4096,sr)`where`kpg`是`KeyPairGenerator`变量的名称，并且`sr`是`SecureRandom`我创建的，程序崩溃并返回 NullPointerException，这是完整的代码：

CryptoBox.java：

```
 package crypto;

    import java.security.*;

    public class CryptoBox {
       private static SecureRandom sr = new SecureRandom();
       private static KeyPairGenerator kpg;
       private static KeyPair kp;

       private static Key PubKey;
       private static Key PrivKey;

       @SuppressWarnings("static-access")
       public void init(int keySize){
          try {
               sr.getInstance("SHA1PRNG");
               kpg.getInstance("RSA");
          } catch (NoSuchAlgorithmException e1) {
               // TODO Auto-generated catch block
               e1.printStackTrace();
          }
          try {
               kpg.initialize(keySize,sr); // <-- NullPointerException  
          }catch(Exception e){
               e.printStackTrace();
        return;
          }

          kp = kpg.genKeyPair();
          PubKey = kp.getPublic();
          PrivKey = kp.getPrivate();
       }

    } 
```

主.java：

```
package main;

import crypto.CryptoBox;

public class Main {

/**
 * @param args
 */
public static void main(String[] args){
    // TODO Auto-generated method stub
    CryptoBox cb = new CryptoBox();
    cb.init(4096); // <-- NullPointerException
}

} 
```

完整的错误信息是：

```
java.lang.NullPointerException
at crypto.CryptoBox.init(CryptoBox.java:23)
at main.Main.main(Main.java:15) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:57:15.720

更改`sr.getInstance("SHA1PRNG");`为`sr = KeyPairGenerator.getInstance("SHA1PRNG");`

编译器可能已经告诉您您的错误，但您选择忽略它。帮自己一个忙并删除`@SuppressWarnings("static-access")`，这也是编译器错误的好处；D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T17:49:03.477

对消息流量的每个方向都有单独的密钥是密码学上的首选模式。因此，不要共享单个对称密钥 - 而是让每一方生成自己的对称密钥，使用对方的公钥对其进行加密并将其作为第一条传出消息发送，然后使用他们生成的密钥来加密他们发送的消息和他们发送的消息收到来解密他们收到的每条传入消息。

# jquery - PrettyPhoto 已链接按钮

> ID：11768661
> 
> 赞同：0
> 
> 时间：2012-08-01T22:45:30.643
> 
> 标签：jquery, linkedin, prettyphoto

我正在使用 Jquery PrettyPhoto 插件。(http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

我添加了 facebook like 、 twitter share、 链接到 share ve google plus 按钮。

所有按钮都可以正常工作，但在按钮中链接的三张照片序列中，仅在第一帧中可见。然后它消失了。

您可以在以下链接中看到它：http://www.1o1e.com/proje/lazzoni-mobilya-showroomlari?item=0#prettyPhoto[gallery1]/0/

我怎样才能让它正常工作？

提前致谢

# javascript - Google 可视化 API：柱形图 %

> ID：11768665
> 
> 赞同：0
> 
> 时间：2012-08-01T22:45:57.487
> 
> 标签：javascript, google-visualization

如何在悬停时将数据显示为百分比？我可以让网格线显示百分比，但悬停总是显示未格式化的数据：`1`vs `100%`。

![图表](../Images/0cf48e0a31e3ca75cbdd32ff38271257.png)

```
var data = google.visualization.arrayToDataTable([
        ['Who', 'Percentage'],
        ['Unlike Me', 0],
        ['Like Me', 1]
    ]);
var options = {
      vAxis: { format:'#%'}, // Makes gridlines have percentages (correct)
      format: '#%' // Does nothing
};

var div = $('#graph').get([0]);
var chart = new google.visualization.ColumnChart(div);
chart.draw(data, options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:58:32.967

想通了：你必须使用[工具提示“数据角色”](https://developers.google.com/chart/interactive/docs/roles#tooltiprole)：

```
data.addColumn('string', 'Who'); // Implicit domain column.
data.addColumn('number', 'Percentage'); // Implicit data column.
data.addColumn({type:'string', role:'tooltip'}); // Tooltip with percentages 
data.addRows([
    ['Like Me', 0, 0 * 100 + '%'],
    ['Unlike Me', 1, 1 * 100 + '%']
]); 
```

# c++ - 如何使用预处理器从源文件中获取文本行？

> ID：11768668
> 
> 赞同：3
> 
> 时间：2012-08-01T22:46:11.570
> 
> 标签：c++, boost, c-preprocessor, boost-preprocessor

我们有一个文件和一行（`__file__`, `__line__`），我们想打印它的内容。这样的事情可以通过预处理器实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:03:51.050

也许是这样的？

```
#include <stdio.h>

#define DBG(X) printf(__FILE__":%d DBG("#X")\n", __LINE__)

int main ()
{
    DBG(this is a test);
} 
```

这将产生输出：

```
test.cc:7 DBG(this is a test) 
```

**编辑：**您要么必须访问源文件，要么存储源文件。存储文件后，打印正确的行是微不足道的。单程：

```
#define PROGRAM_PRINT_INIT(X) \
    static ProgramPrint pp = ProgramPrint(X)
#define DBG(X) std::cerr << "[" << pp.name << ":" << X << "]" \
                         << pp.file[X] << std::endl

struct ProgramPrint {
    std::string name;
    std::vector<std::string> file;
    ProgramPrint (const char *filename) : name(filename) {
        std::ifstream in(filename);
        std::string line;
        while (getline(in, line)) file.push_back(line);
    }
}; 
```

请注意，`vector`索引从零开始，因此请`DBG()`相应地使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:33:23.907

是的，C/C++ 不是为此而生的。但如果你真的想看看你能把东西弯曲多远，这是一个建议。

假设你想编译 test.cpp 来测试。在编译之前，我们需要将源代码行的 cstring 数组添加到源代码文件中。我们将在单独的文件 test_temp.cpp 中执行此操作，我们将调用数组 TEST_CODE。

将以下内容放入文件中：code.awk（这将使其更易于重用）。

```
BEGIN {
    for (i = 0; i < 128; i++) {
        table = sprintf("%s%c", table, i);
    }
    print("= {\"\"")
}
{
    printf(",\"")
    for(j=1; j<=length($1); j++) {
        c = substr($1,j,1)
        printf("\\x%x", index(table, c) - 1)
    }
    printf("\"\n")
}
END {
    printf("};\n")
} 
```

通过引用 ASCII 字符的“表”，这将使用每个字符的（十六进制）ASCII 值（例如 '\x41' 表示 'A'），以防制表符等可能在您的源代码中但应该在 C/C++ 字符串文字中转义。

要编译，在命令行（或你的 makefile）中，输入

```
echo "char* TEST_CODE[]" > test_temp.cpp
awk -f code.awk test.cpp >> test_temp.cpp
cat test.cpp >> test_temp.cpp
g++ -o test test_temp.cpp
rm test_temp.cpp 
```

如果你想获取源代码文件的第 80 行（基于 1），你会写

```
TEST_CODE[80] 
```

注意这发生在预处理器命令之前。这可以通过在每种情况下从 TEST_CODE 更改数组名称来使用多个文件和头文件来完成。

这确实有漏洞，但它会在常见情况下工作。

注意：由于 char* / string 文字转换，g++ 可能会发出很多编译器警告，但您可以使用 -w 标志关闭这些警告。

# content-management-system - 您如何避免与 CMS 绑定？

> ID：11768672
> 
> 赞同：0
> 
> 时间：2012-08-01T22:46:49.073
> 
> 标签：content-management-system

我想使用 Joomla 之类的 CMS，或者其他任何我需要的东西。我担心我会永远与那个 CMS 联系在一起。

如果我现在设计一个 PHP 并检索我的数据库结果，我会将它们放在我想要的位置。如何在不失去自由的情况下创建我想要的东西并让它与给定的 CMS 一起工作？

如果我只添加少量要继承的类，我并不介意。我可以稍后删除它们（更容易说，用很多 pag 完成）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:23:00.927

在开始之前考虑锁定是明智的。我已经实现了一些基于 CMS 的系统，并为一些糟糕的选择而苦苦挣扎。您选择的任何工具都有成本和收益，但是如果不进行一些重要的需求分析，就无法知道哪个系统是正确的。Joomla 是一个功能强大的系统，但与 Drupal、Alfresco 或 Plone 具有非常不同的特性。

在某种程度上，一旦您的用户开始将他们的内容放入您选择的系统中，您将不得不非常努力地避免永远与该系统绑定。如果你做得很好，你的用户就不会*想要*迁移到另一个系统。

在您的分析中需要考虑以下几点：

*   注意定制语言，特别是考虑到上线后必须支持该工具的团队的技能。例如，对于 python 商店来说，Alfresco (java) 可能是一个糟糕的选择。
*   确保您了解该工具如何管理二进制数据。您可以将 Plone 配置为将附件作为文件系统中的 blob 而非 ZODB 进行管理，但默认设置并非对每个组织都正确。
*   密切关注工具集处理安全性、身份验证和授权的方式，以及它为您提供的连接到当前（或计划中的）用户数据库的选择。允许您轻松外部化身份验证的工具可能是可扩展性和支持噩梦之间的区别。
*   索引和搜索很重要，好的工具让生活更轻松。糟糕的工具很糟糕。
*   一个好的工具应该具有有用的导出功能。提取元数据和内容的工作越努力，工具就越差。

# java - 覆盖 hashCode() 和 equals() 以在 hashMap 中存储对象无法正常工作

> ID：11768673
> 
> 赞同：4
> 
> 时间：2012-08-01T22:46:55.657
> 
> 标签：java, hashmap, scjp

我在一个类（Dog）中覆盖了 hashCode() 和 equals()，以便从 hashMap 中存储和检索它的实例，代码如下：

```
class Dog {

public Dog(String n) {
    name = n;
}
public String name;

public boolean equals(Object o) {
    if ((o instanceof Dog)
            && (((Dog) o).name == name)) {
       return true;
    } else {
       return false;
    }
}

public int hashCode() {
    return name.length();
   }
} 
```

hashMap代码如下：

```
public class MapTest {

public static void main(String[] args) {
    Map<Object, Object> m = new HashMap<Object, Object>();
    m.put("k1", new Dog("aiko"));
    Dog d1 = new Dog("clover");
    m.put(d1, "Dog key");    // #1
    System.out.println(m.get("k1"));
    String k2 = "k2";
    d1.name = "arthur";     // #2
    System.out.println(m.get(d1)); #3 
    System.out.println(m.size()); 
  }
} 
```

问题是，在 2 时，我将存储在 hashMap 中的狗对象的名称更改为 1，3 处的预期输出为 NULL，但实际是 Dog Key！我希望它在 equals() 方法中像 clover!=arthur 一样失败，但它成功了！！我注意到，当 hashCode 成功（即 lengh==6）时，即使 equals() 方法失败，也会检索存储在地图中的值，我更改了 == 并改用了 equals() 但没有发生任何更改，问题仍然存在.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:48:29.470

您想使用 .equals() 而不是 == 比较字符串，它比较引用。

```
public boolean equals(Object o) {
    if ((o instanceof Dog)
            && (((Dog) o).name.equals(name))) {
       return true;
    } else {
       return false;
    }
} 
```

同样，equals 方法也有点偏离。如果名称为空怎么办？你会得到一个空指针异常。您需要为该特殊情况添加另一个检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T23:08:34.367

### 为什么`equals`“永不失败”？

根据汤姆的评论：

> .. 如果您修改映射中的对象但保持键不变，那么您仍然可以使用相同的键实例获取值。**dog.equals(dog) 将始终适用**于您的代码（除非有并发修改）

也就是说，这一行：

```
d1.name = "arthur"; 
```

正在**改变 HashMap**中已经存在的对象。比较（其中`t`“打印”真或假）：

```
Dog d1 = new Dog("clover");
// what "put" is effectively doing: there is *no* Copy/Clone
Dog inMap = d1;
t(inMap == d1);                 // true: same object, reference equality!
d1.name = "arthur";
t(inMap.name.equals("arthur")); // true: same object! "name" member was *mutated*
t(d1.equals(inMap));            // true: same object! 
```

所以`equals`永远不会失败，因为它正在将对象与自身进行比较:)

起初我也错过了它：记住 Java 有[*Call By Object-Sharing*](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_sharing)语义。也就是说，传递给方法的对象***没有****隐式的复制/克隆/复制。*

 **那么，如何让它失败：

```
Dog d1 = new Dog("clover");
Dog d2 = new Dog("clover");
t(d1 == d2);                   // false: different objects!
m.put(d1, "Dog key");          // put in with D1 object
System.out.println(m.get(d1)); // "Dog key"   -okay, equals
System.out.println(m.get(d2)); // "Dog key"   -okay, equals
d2.name = "arthur";            // *mutate* D2 object
t(d1.equals(d2));              // false: no longer equal
System.out.println(m.get(d1)); // "Dog key"   -okay, always equals, as per above
System.out.println(m.get(d2)); // ""          -no good, no longer equals 
```

* * *

### 以及如何`hashCode`适应？

哈希码用于*确定将键（和值对）放入的[哈希表](http://en.wikipedia.org/wiki/Hash_table)桶*。在执行查找（或设置）时，*首先**通过哈希码*查找桶，然后每个键已经映射到桶用 进行检查`equals`。如果桶中没有键，则永远不会调用 equals。

这解释了为什么`name`在原始帖子中将 更改为长度为 8 的字符串会导致查找失败：最初选择了一个*不同*的存储桶（例如，一个空的存储桶），因此永远不会*在其他存储桶*`equals`中存在的现有密钥上调用. 相同的对象键*可能*已经存在，但从未看过！

 **那么，如何使用不同的哈希码使其失败：

```
Dog d1 = new Dog("clover");
m.put(d1, "Dog key");          // put in with D1 object, hashCode = 6
System.out.println(m.get(d1)); // "Dog key" -okay, hashCode = 6, equals
d1.name = "Magnolia";          // change value such that it changes hash code
System.out.println(m.get(d1)); // ""        -fail, hashCode = 8, equals
// ^-- attaching a debugger will show d1.equals is not called 
```

因此，要在哈希表（例如 HashMap）中找到一个键，它必须是这样的：

```
k.hashCode() == inMap.hashCode() && k.equals(inMap); 
```

可能有许多哈希码映射到同一个桶。但是，以上是查找成功*的唯一保证。*

* * *

当然，请参阅其他回复以了解一般比较字符串的正确方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T23:00:20.417

除了将字符串与 比较的问题之外，`==`发生的事情是您更改了狗的名字

```
Dog d1 = new Dog("clover");
m.put(d1, "Dog key");    // #1
System.out.println(m.get("k1"));
String k2 = "k2";
d1.name = "arthur";     // #2 
```

到一个长度相同的。因此，地图中的查找在同一个 hashbucket 中查找，当然它在那里找到了狗。

如果您将名称更改为具有不同长度的名称，它将（通常）在不同的存储桶中查找，然后找不到狗。****

# php - PHP - 是否有一个函数只保留字符串中的前 X 个字母？

> ID：11768676
> 
> 赞同：0
> 
> 时间：2012-08-01T22:47:04.443
> 
> 标签：php, string

如果我有`$word = "big words";`

我怎么能只保留前6个字母，所以它变成：

`$word = "big wo";`

（在 PHP 中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:48:19.603

[`substr`](http://php.net/substr)，它实际上在几乎所有有字符串的语言中都有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T22:47:57.743

子字符串函数是您需要的：

`substr($word, 0, 6);`

*   [`substr`](http://php.net/substr)@php.net

# ruby - 你如何在 Heroku 中安装 filemagic (libmagic)？

> ID：11768678
> 
> 赞同：5
> 
> 时间：2012-08-01T22:47:13.163
> 
> 标签：ruby, heroku, gem

通常是 brew install libmagic

我需要它，因为 Ruby Gem ruby​​-filemagic' 需要它。

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2012-08-02T14:12:28.023

尝试 `brew install magic`

如果您的系统中没有 libmagic.1.dylib 文件，则需要使用 port 命令安装它

```
 sudo port install file 
```

# mongodb - 当我对现有集合进行分片时，我会丢失数据吗？

> ID：11768679
> 
> 赞同：1
> 
> 时间：2012-08-01T22:47:13.667
> 
> 标签：mongodb, sharding

我有一个集合，其中包含数百万个对象，仅在一台服务器中。我设置了一个配置服务器和 2 个分片节点，其中一个拥有该集合文档。在我将集合添加为分片后，一切看起来都很好。但是发生了一些奇怪的事情，如果我一直询问集合的大小，mongod 正在分片该集合：`db.activity_items.count()`数量正在减少。为什么？我在某处丢失任何数据吗？

这是一些控制台输出，只是为了说明问题：

```
mongos> db.activity_items.count()
19107620
mongos> db.activity_items.count()
19107223
mongos> db.activity_items.count()
19106939
mongos> db.activity_items.count()
19106922
mongos> db.activity_items.count()
19027118 
```

**编辑**

如果我运行`db.activity_items.stats();` [http://pastebin.com/85RqZmQM](http://pastebin.com/85RqZmQM)。它表明第一个分片节点正在减少计数器，而第二个分片节点没有增加它的计数器。这让我觉得我的数据陷入了困境.?。

**编辑 2**

我停止了平衡器。它停止丢失数据，但是我的旧数据没有回来..

```
mongos> db.activity_items.count()
15736936 
```

**编辑 3**

我填写了一个关于它的错误：[https ://jira.mongodb.org/browse/SERVER-6696](https://jira.mongodb.org/browse/SERVER-6696)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:11:34.323

首先让我说我不认为你在这里丢失数据。问题很可能在于 count() 命令在分片环境中的工作方式。存在具有相反行为的错误，例如：

[https://jira.mongodb.org/browse/SERVER-3645](https://jira.mongodb.org/browse/SERVER-3645)

我认为这里发生的事情是计数实际上只是在原始分片上正确执行，而不是在新分片上返回（或返回零）。如果您直接连接到分片初选并在那里运行计数会发生什么？

此外，运行 sh.status() 以便您可以跟踪迁移。

作为一个实验，看看这是否是暂时的并且是由正在进行的迁移引起的，请尝试暂时禁用平衡器：

```
// connect to mongos
> use config
> db.settings.update( { _id: "balancer" }, { $set : { stopped: true } } , true ); 
```

飞行中迁移完成后，再次尝试计数，看看它们是否有意义。由于您添加了一个新的分片，因此它们都将不断地添加/删除文档。在它们平衡并且迁移停止之前，很难说出计数偏差的直接原因是什么，但这会尽早告诉您一旦平衡完成它们是否会再次看起来很正常。

编辑：根据评论 - 让您的版本和操作系统查看这是否可重现，如果可以，请提交错误以修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:47:04.867

请参阅[https://jira.mongodb.org/browse/SERVER-6696](https://jira.mongodb.org/browse/SERVER-6696) - 我相信这个问题“按设计工作”

# asp-classic - 在经典的 ASP 应用程序中，使用 session 或 cookie 进行跨页数据持久化哪个更好？

> ID：11768698
> 
> 赞同：1
> 
> 时间：2012-08-01T22:48:29.027
> 
> 标签：asp-classic, session-variables, client-side-data

我继承了对经典 ASP 应用程序的修复，我们希望在该应用程序中存储一些用户会话特定的数据以在页面加载/他们的会话中持续存在，并且需要一些复习。

在过去，我只是简单地使用了 Session 变量——即。`Session("SomeVar") = SomeVal`.

在生产框中的 IIS 上，我注意到 ASP/Session Properties/Enable Session State = false。将此设置为 True 使我能够成功开始使用会话变量。

我不想在服务器上消耗比必要更多的资源。过去，我相信我误以为经典 ASP 中的会话变量存储在客户端。现在重新审视这个 - 数据保留在服务器端。

我保存的字符串是一个 GUID，用于大约 3000 个连接的客户端。

如果我实现这一点，我会看到什么样的服务器影响，并且使用客户端 cookie 会是更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:25:40.567

让我们稍微分析一下，GUID 需要大约 40 个字符作为字符串，因此在 Unicode 中是 80 个字节，我们称之为 100 个字节。100 * 3000 = 300KB。服务器可以为此腾出300K吗？如果答案是否定的，我认为服务器已经有麻烦了。

但是，启用会话状态还有其他影响。当会话启用时，ASP 将它自己的 cookie 添加到客户端，它在大小上可能等同于您将 GUID 存储为 cookie 而不是会话中所需的那个。值得注意的是，存储在 cookie 中的会话 ID 使用了一种算法，有人说这种算法更可预测（我自己没有任何证据）。因此，如果您使用 GUID 作为某种形式的授权，那么直接将 GUID 存储为 cookie 可能会更好。

启用会话状态时会发生进一步的重大变化。来自客户端的 ASP 请求必须串行处理，服务器不会并行处理来自同一客户端的多个请求。这是因为 Session 对象是单线程的，并且由于来自客户端的每个请求都需要访问它，因此无法同时处理请求。

最后一点可能会对客户端看到的现有行为和性能产生重大影响，尤其是在使用 AJAX 技术、多个 IFrame 或其他导致同时向服务器发送 ASP 请求的技术时。

因此，对于您的要求，我的选择是将 GUID 存储在 cookie 中并关闭会话状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:05:40.610

多个服务器/服务器场？如果是这样，如果您的负载均衡器未设置为“粘性”并且每次都将您发送到同一台服务器，您可能会在使用 Session 时遇到麻烦。能不能把我调试得这么小心翼翼。

# jquery - jquery：单独为跨度内的文本设置动画

> ID：11768699
> 
> 赞同：0
> 
> 时间：2012-08-01T22:48:38.997
> 
> 标签：jquery, jquery-selectors

我正在尝试创建文本动画；这个想法是一些文本将从右侧移动到左侧并在五秒钟后消失。

我已经开发了以下代码，它工作正常。[jsfiddle](http://jsfiddle.net/SHaHK/)但问题是当我有多个`spans`文本时，我不知道如何单独显示它们。

HTML

```
<span class="magic" >Magic1</span> 
```

jQuery

```
<script>

var left = $('.magic').offset().left;
$(".magic").css({left:left}).animate({"left":"0px"}, 2000);
$(".magic").fadeOut(3000); 

</script> 
```

CSS

```
<style>
.magic {
width: 50px;
height: 50px;
position: absolute;
top: 0;
right: 0;

}
</style> 
```

我有多个文本，如下所示，你能告诉我如何一个一个地显示/动画它们，并在动画结束时从头开始动画吗？

```
<span class="magic" >Magic1</span>
<span class="magic" >magic2</span>
<span class="magic" >magic3</span>
// unlimited 
```

提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:01:47.303

您的标记中有错误，但除此之外，您可以使用递归和回调模式：

更新 2（归功于@Madbreaks）:: [http://jsfiddle.net/JZzdp/6/](http://jsfiddle.net/JZzdp/6/)

```
var magic = $('.magic'),
i = 0,
len = magic.length,
left = $('.container').width(); //SET THIS TO WHATEVER PARENT CONTAINER YOU ARE SLIDING INSIDE

var slide = function(){
  magic.each( function( i ){
    $( this ).delay( i*5000 ).fadeIn().animate({"right":"+="+left},2000, function(){
      $( this ).fadeOut(3000).animate({ "right":"-="+left }, 0, function(){
        if( i === len - 1 ){ slide(); }
      });
    });
  });
}
slide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:56:11.727

首先，我希望您使用 class="magic" 而不是 id="magic" 但超出此范围，我想您将只使用“each”迭代器，例如：

$('span.magic').each(function(intIndex) {

$(this).animate({ ... yada yada yada

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:09:09.763

试试这个：[jsfiddle](http://jsfiddle.net/8AVgS/)

```
var left = $('.magic:first').offset().left;

$(".magic").each(function(i){
    $(this)
        .css({left:left})
        .delay(i * 5000)
        .animate({"left":"0px"}, 2000, function(){
            $(this).fadeOut(3000);
        });
});​ 
```

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:10:21.940

我创建了一个 jsFiddle，希望它是你想要的。我使用`.delay()`jQuery 的功能进行转换。你可以调整时间。

[jsFiddle](http://jsfiddle.net/jcoc611/5eNyJ/5/)

```
var mLength = $(".magic").length;

for(var i = 1; i < mLength+1; i++){
    var $magic = $("#magic"+i);
    var offset = $magic.offset().left;
    $magic.css({left:offset}).hide();
    $magic.delay(7000*(i-1));
    $magic.fadeIn(500);
    $magic.animate({"left":"0px"}, 5000); 
    $magic.fadeOut(3000); 
}​ 
```

# mysql - MySQL - 在 select 语句中包含过程的结果

> ID：11768702
> 
> 赞同：0
> 
> 时间：2012-08-01T22:48:55.787
> 
> 标签：mysql, sql, median

我有一个名为 gcrunarrays 的表，其中包含 {run_id、time_id、co2} 列。我有数千次具有不同 run_id 的运行，每次运行都有 58 个与时间相关的 co2 值。我有一个程序可以在给定时间获得所有运行的二氧化碳中位数。现在，我需要一个 select 语句来获取每次的中位数。到目前为止，我有

```
select DISTINCT A.time_id, M.co2 from gcrunarrays A, call getMedian(1, A.time_id) M
GO 
```

这会出现语法错误。我是 SQL 的新手，我在 MYSQL 工作。我已经尝试了十几种不同的方式来表达这个声明，但现在我觉得我做了一些天生错误的事情。我认为如果中位数是一个函数可能会更好，但我什至不确定如何在不使用 select 语句的情况下获得中位数。非常感谢任何建议。

为了进一步澄清：

表 gcrunarrays

```
run_id | time_id | co2
1      | 1       | 
1      | 2       | 
...
1      | 58      | 
2      | 1       | 
...    
2      | 58      | 
3 ... 
```

中间程序

```
CREATE PROCEDURE getMedian (IN e INT, t INT)
BEGIN
SELECT count(*), x.co2
FROM (SELECT B.exp_id, A.* FROM gcRunArrays A JOIN gcRuns B ON A.run_id=B.run_id WHERE B.exp_id=e and A.time_id=t) x, 
     (SELECT B.exp_id, A.* FROM gcRunArrays A JOIN gcRuns B ON A.run_id=B.run_id WHERE B.exp_id=e and A.time_id=t) y
GROUP BY x.co2
HAVING SUM(SIGN(1-SIGN(y.co2-x.co2))) = CEILING((COUNT(*)+1)/2);
END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:54:10.873

使用临时表可以轻松解决问题。并且不能直接将程序结果用作表格。

[存储过程/函数可以返回表吗？](https://stackoverflow.com/questions/1637288/mysql-can-a-stored-procedure-function-return-a-table)

# objective-c - 谷歌搜索结果为 NSArray 或类似的东西

> ID：11768704
> 
> 赞同：0
> 
> 时间：2012-08-01T22:49:08.837
> 
> 标签：objective-c, web-services, cocoa-touch

我的老板要求我对 Google 搜索结果做一些事情。

基本上，我有一个设置了搜索栏的表格视图。

我的目标是让搜索栏将请求推送给谷歌，谷歌以我可以用来填充表格视图的形式返回它的结果，并且可以点击一个单元格进入该网页。

我坚持的部分是推送请求/将请求作为“数组”返回？

现在，这一切都意味着长期用作 Web 服务应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:40:51.663

这可以很容易地完成。[只需对来自 Google ( https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview) )的 JSON 编码搜索结果发出 RESTful API 请求，然后将结果解析为可以轻松绑定的 Objective-C 数据结构使用诸如 SBJSON ( [http://stig.github.com/json-framework/](http://stig.github.com/json-framework/) ) 之类的库的 UI 元素。

# windows-phone-7 - 主页而不是 UserControl 上的事件 Fire 的代码

> ID：11768711
> 
> 赞同：0
> 
> 时间：2012-08-01T22:49:39.183
> 
> 标签：windows-phone-7

我有一个具有列表框的用户控件。我将此 UserControl 放在 Mainpage.xaml 上。我想处理 Mainpage.xaml.cs 而不是 usercontrol.xaml.cs 上的选定和按钮单击事件，因为我将使用此 UserControl 到另一个页面并且响应会有所不同。我该怎么做？你能提供给我的例子或链接吗？提前致谢。

有我的用户控件：

```
<UserControl x:Class="CMSPhoneApp.QueueListControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480"
xmlns:local="clr-namespace:CMSPhoneApp"  >

<UserControl.Resources>
    <Style x:Key="ScrollViewerStyle1" TargetType="ScrollViewer">
        <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="HorizontalScrollBarVisibility" Value="Disabled"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollViewer">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="ScrollStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition GeneratedDuration="00:00:00.5"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Scrolling">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="VerticalScrollBar"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HorizontalScrollBar"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="NotScrolling"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid Margin="{TemplateBinding Padding}">
                            <ScrollContentPresenter x:Name="ScrollContentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}"/>
                            <ScrollBar x:Name="VerticalScrollBar" HorizontalAlignment="Right" Height="Auto" IsHitTestVisible="False" IsTabStop="False" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Opacity="0" Orientation="Vertical" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{TemplateBinding VerticalOffset}" ViewportSize="{TemplateBinding ViewportHeight}" VerticalAlignment="Stretch" Width="5" BorderBrush="#FF2022BC"/>
                            <ScrollBar x:Name="HorizontalScrollBar" HorizontalAlignment="Stretch" Height="5" IsHitTestVisible="False" IsTabStop="False" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0" Opacity="0" Orientation="Horizontal" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Value="{TemplateBinding HorizontalOffset}" ViewportSize="{TemplateBinding ViewportWidth}" VerticalAlignment="Bottom" Width="Auto"/>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <local:VisibilityConverter x:Key="VisibilityConverter"/>
    <local:ColumSpanConverter x:Key="ColumSpanConverter"/>
</UserControl.Resources>

<Grid x:Name="LayoutRoot"  Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">

        <ScrollViewer Style="{StaticResource ScrollViewerStyle1}" Background="#00E23162">
            <ListBox x:Name="lstCall" HorizontalAlignment="Left" Margin="6,6,0,0"   VerticalAlignment="Top" Width="400" SelectionChanged="lstCall_SelectionChanged"    >
                <ListBox.ItemTemplate>
                    <DataTemplate>

                        <Grid  x:Name="grdQueue" Background="Transparent">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="70"/>                                   
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="35" />                                        
                                <ColumnDefinition Width="100*"/>
                                <ColumnDefinition Width="125" />
                            </Grid.ColumnDefinitions>
                            <Image Source="{Binding Type}" Grid.Row="0" Grid.Column="0"/>
                            <TextBlock  Grid.Row="0" Grid.Column="1"  Grid.ColumnSpan= "{Binding isSpan, Converter={StaticResource ColumSpanConverter}}" Text="{Binding summary}" TextWrapping="Wrap"
                                             Style="{StaticResource PhoneTextAccentStyle}"  />
                            <Button Grid.Row="0" Grid.Column="3" ClickMode="Press" Click="Action_Click" Style="{StaticResource ButtonStyle1}"
                                            Visibility="{Binding isVisibility, Converter={StaticResource VisibilityConverter}}">
                                <Button.Content>
                                    <TextBlock Width="85" Height="70" Text="{Binding ActionCaption}" 
                                                       Style="{StaticResource LabelStyle_20}"     />
                                </Button.Content>
                            </Button>

                        </Grid>

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </ScrollViewer>
    </Grid>
</Grid>
</UserControl> 
```

有在 Mainpage.xaml 上添加 UserControl 的代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel>
            <my:QueueListControl />
            </StackPanel>
    </Grid>
</Grid> 
```

我可以通过以下代码在 MainPage.xaml.cs 上的 lst 上绑定数据：

```
MyQueue = new List<QueueItem>();
        MyQueue.Add(new QueueItem { summary = "Test1tqeewwewew332233 3233322323 wdqwqwqwqwq", status = "Open", callNumber = "1" });
        MyQueue.Add(new QueueItem { summary = "Test1tqeewwewew332233 3233322323 wdqwqwqwqwq", status = "Responded", callNumber = "2" });
        MyQueue.Add(new QueueItem { summary = "Test1tqeewwewew332233 3233322323 wdqwqwqwqwq", status = "Resolved", callNumber = "3" });
        MyQueue.Add(new QueueItem { summary = "Test1tqeewwewew332233 3233322323 wdqwqwqwqwq", status = "transfer", callNumber = "4" });
        MyQueue.Add(new QueueItem { summary = "Test1tqeewwewew332233 3233322323 wdqwqwqwqwq", status = "Complete", callNumber = "5" });
        test.lst.ItemsSource = MyQueue; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:31:03.233

一种解决方案是使用诸如[MVVM Light 之](https://mvvmlight.codeplex.com/)类的库；它有一个 Messenger 类（[教程](http://chriskoenig.net/2010/07/05/mvvm-light-messaging/)），您可以使用它从后面的 UserControl 代码发送消息。

在 MainPage 的`OnNavigatedTo`方法中注册 UserControl 的消息，并在“OnNavigatedFrom”方法中取消注册以收听消息。您可以在要使用此 UserControl 的其他页面中执行相同操作。

UserControl 触发的消息必须包含任一类对其做出适当反应所需的所有相关信息。因此，您可以将控件的代码隐藏与用户交互逻辑分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:53:43.710

您需要`UserControl`通过公开其状态和事件来提高您的可重用性，以便这些可以由托管您的控件实例的控件更新/处理。有关详细信息，请参阅本教程：

[在 WPF / Silverlight 中创建可重用用户控件的简单模式](http://www.scottlogic.co.uk/blog/colin/2012/02/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight/)

# html - 使用 CSS 和 PHP 将鼠标悬停在下拉菜单上

> ID：11768718
> 
> 赞同：0
> 
> 时间：2012-08-01T22:50:50.057
> 
> 标签：html, css

我正在尝试创建一个具有鼠标悬停下拉菜单以选择子菜单项的菜单。我目前可以使用通用菜单，但我无法找出让子菜单显示在相应类别下方的最佳方法。

菜单当前将表格拉伸到扭曲的比例。我希望当前表保持其大小，并且只下降到类别标题下方，而不影响类别的标题表。我应该创建另一个表来显示它还是什么？我不熟悉网络编程。

我的第二个问题可能是一个非常简单的问题。我只是不确定答案是什么。我在 Google 上试了试运气，但无济于事。我应该设置什么“onMouseOut”显示等于以保持菜单的填充。当我尝试单击其中一个子链接时，子菜单当前消失。

```
<td>
<STYLE TYPE="text/css">
    #menu1 { display : none }
    #menu2 { display : none }
    #menu3 { display : none }
    A:link {color:blue; text-decoration:none}
    A:hover {color:blue; text-decoration:underline}
</STYLE>
    <div id="menu">
        <table border="0" cellspacing="0" cellpadding="2" align="center">
            <tbody>
                <tr>
                    <td style="cursor: pointer; background-color: rgb(204, 238, 255); " onmouseover="this.style.backgroundColor='#E5F6FF';" onmouseout="this.style.backgroundColor='#CCEEFF'" valign="top" align="top-center" onclick="window.location.href='index2.php?page=files'"> <a href="index2.php?page=files">Files</a></td>

                <td style="cursor: pointer; background-color: rgb(204, 238, 255); " onmouseover="this.style.backgroundColor='#E5F6FF';" onmouseout="this.style.backgroundColor='#CCEEFF'" valign="top" align="center">

                        <SPAN onMouseOver="document.all.menu2.style.display = 'block'"onMouseOut="document.all.menu2.style.display = 'none'">

                            Configuration<BR>

                        </SPAN>
                        <SPAN ID="menu2" onClick="document.all.menu1.style.display = 'none'">
                            <a href="index2.php?page=SysConfig">System Configuration</a><BR>
                            <a href="index2.php?page=FileConfig">File Configuration</a><BR>
                            <a href="index2.php?page=NetworkConfig">Network Configuration</a><BR>

                        </SPAN>
                        <td style="cursor: pointer; background-color: rgb(204, 238, 255); " onmouseover="this.style.backgroundColor='#E5F6FF';" onmouseout="this.style.backgroundColor='#CCEEFF'" valign="top" align="center" onclick="window.location.href='index2.php?page=Maintenance'"> <a href="index2.php?page=Maintenance">Maintenance Mode</a></td>

                        <td style="cursor: pointer; background-color: rgb(204, 238, 255); " onmouseover="this.style.backgroundColor='#E5F6FF';" onmouseout="this.style.backgroundColor='#CCEEFF'" valign="top" align="center" onclick="window.location.href='index2.php?page=IETM'"> <a href="index2.php?page=IETM">IETM</a></td>
                        <td style="cursor: pointer; background-color: rgb(204, 238, 255); " onmouseover="this.style.backgroundColor='#E5F6FF';"onmouseout="this.style.backgroundColor='#CCEEFF'" valign="top" align="center"> 

                            <SPAN onMouseOver="document.all.menu3.style.display = 'block'"onMouseOut="document.all.menu3.style.display = 'none'">

                                Power Options<BR>
                            </SPAN>

                            <SPAN ID="menu3" onClick="document.all.menu1.style.display = 'none'">

                                <A href="index2.php?page=Shutdown">Shutdown</A><BR>
                                <A href="index2.php?page=Reboot">Reboot</A><BR>                 
                            </SPAN>
                        </td>
                    </td>                   
                </tr>
            </tbody>
        </table>
    </div>  
</TABLE> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:22:35.883

首先不要使用表格，它们在很多方面限制了您的选择。您可以使用 div 代替，或者在您的特定示例（对于菜单）中，您可以使用 html 列表。

关于您的协调问题的另一件事是，如果您可以使用 javaScript（为了简化一些事情）然后您可以说：

```
<ul id="menu">
    <li id="link1">Link 1
        <ul class="dropdown">
            <li id="sl1">Sublink 1</li>
            <li id="sl2">Sublink 2</li>
            <li id="sl3">Sublink 3</li>                                
        </ul>
    </li>
<li id="link2">Link 2</li>
        ...
<li id="link3">Link 3</li>        
        ...
</ul> 
```

当然，使用适当的 css，并在此使用 javaScript 来广告显示/隐藏功能：

```
$(document).ready(function() {

$("#menu li").mouseenter(function(){
    $(this).find(".dropdown").show();
});

$("#menu li").mouseleave(function(){
    $(this).find(".dropdown").hide();
}); 
```

});

# c# - 在 C# 中播放动态创建的简单声音，无需外部库

> ID：11768721
> 
> 赞同：7
> 
> 时间：2012-08-01T22:50:57.340
> 
> 标签：c#, audio, dynamic

我需要能够使用 C# 动态生成波形并播放它，无需任何外部库，也无需将声音文件存储在硬盘上。延迟不是问题；声音会在应用程序需要它们之前生成。

实际上 Console.Beep() 方法可能会满足我的需求，如果不是因为 Microsoft 表示它在 64 位版本的 Windows 中不受支持。

如果我动态地生成自己的声音，我可以获得比简单的哔声更花哨的声音。例如，我可以从频率从 2 KHz 增加到 4 KHz 的三角波制作波形，同时音量衰减。我不需要花哨的 16 位立体声，只需 8 位单声道就可以了。我不需要对音量和音高进行动态控制，只需基本上在内存中生成一个声音文件并播放它而不存储它。

上一次我需要生成声音是在很多年前，在 Apple II、HP 工作站和我的旧 Amiga 电脑上。从那以后就不需要这样做了，似乎我描述的一些简单的事情变得更加复杂了。我很难相信如此简单的事情似乎如此困难。我看到的大多数答案都是指 NAudio 或类似的库，这不是这个项目的选择（除了拉入整个库只是为了播放音调似乎是一种浪费）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T23:00:02.697

根据我收到的答案中的一个链接，以及我发现的有关 .wav 标头格式的其他一些页面，这是我的一个生成 8 位“叮当”的小类的工作代码！具有用户指定的频率和持续时间的声音。它基本上是一种哔声，在指定的持续时间内振幅线性衰减到零。

```
public class AlertDing {
    private SoundPlayer player = null;
    private BinaryWriter writer = null;

    /// <summary>
    /// Dynamically generate a "ding" sound and save it to a memory stream
    /// </summary>
    /// <param name="freq">Frequency in Hertz, e.g. 880</param>
    /// <param name="tenthseconds">Duration in multiple of 1/10 second</param>
    public AlertDing(double freq, uint tenthseconds) {

        string header_GroupID = "RIFF";  // RIFF
        uint header_FileLength = 0;      // total file length minus 8, which is taken up by RIFF
        string header_RiffType = "WAVE"; // always WAVE

        string fmt_ChunkID = "fmt "; // Four bytes: "fmt "
        uint fmt_ChunkSize = 16;     // Length of header in bytes
        ushort fmt_FormatTag = 1;        // 1 for PCM
        ushort fmt_Channels = 1;         // Number of channels, 2=stereo
        uint fmt_SamplesPerSec = 14000;  // sample rate, e.g. CD=44100
        ushort fmt_BitsPerSample = 8;   // bits per sample
        ushort fmt_BlockAlign =
            (ushort)(fmt_Channels * (fmt_BitsPerSample / 8)); // sample frame size, in bytes
        uint fmt_AvgBytesPerSec =
            fmt_SamplesPerSec * fmt_BlockAlign; // for estimating RAM allocation

        string data_ChunkID = "data";  // "data"
        uint data_ChunkSize;           // Length of header in bytes
        byte [] data_ByteArray;

        // Fill the data array with sample data

        // Number of samples = sample rate * channels * bytes per sample * duration in seconds
        uint numSamples = fmt_SamplesPerSec * fmt_Channels * tenthseconds / 10;
        data_ByteArray = new byte[numSamples];

        //int amplitude = 32760, offset=0; // for 16-bit audio
        int amplitude = 127, offset = 128; // for 8-audio
        double period = (2.0*Math.PI*freq) / (fmt_SamplesPerSec * fmt_Channels);
        double amp;
        for (uint i = 0; i < numSamples - 1; i += fmt_Channels) {
            amp = amplitude * (double)(numSamples - i) / numSamples; // amplitude decay
            // Fill with a waveform on each channel with amplitude decay
            for (int channel = 0; channel < fmt_Channels; channel++) {
                data_ByteArray[i+channel] = Convert.ToByte(amp * Math.Sin(i*period) + offset);
            }
        }

        // Calculate file and data chunk size in bytes
        data_ChunkSize = (uint)(data_ByteArray.Length * (fmt_BitsPerSample / 8));
        header_FileLength = 4 + (8 + fmt_ChunkSize) + (8 + data_ChunkSize);

        // write data to a MemoryStream with BinaryWriter
        MemoryStream audioStream = new MemoryStream();
        BinaryWriter writer = new BinaryWriter(audioStream);

        // Write the header
        writer.Write(header_GroupID.ToCharArray());
        writer.Write(header_FileLength);
        writer.Write(header_RiffType.ToCharArray());

        // Write the format chunk
        writer.Write(fmt_ChunkID.ToCharArray());
        writer.Write(fmt_ChunkSize);
        writer.Write(fmt_FormatTag);
        writer.Write(fmt_Channels);
        writer.Write(fmt_SamplesPerSec);
        writer.Write(fmt_AvgBytesPerSec);
        writer.Write(fmt_BlockAlign);
        writer.Write(fmt_BitsPerSample);

        // Write the data chunk
        writer.Write(data_ChunkID.ToCharArray());
        writer.Write(data_ChunkSize);
        foreach (byte dataPoint in data_ByteArray) {
            writer.Write(dataPoint);
        }
        player = new SoundPlayer(audioStream);
    }

    /// <summary>
    /// Call this to clean up when program is done using this sound
    /// </summary>
    public void Dispose() {
        if (writer != null) writer.Close();
        if (player != null) player.Dispose();
        writer = null;
        player = null;
    }

    /// <summary>
    /// Play "ding" sound
    /// </summary>
    public void Play() {
        if (player != null) {
            player.Stream.Seek(0, SeekOrigin.Begin); // rewind stream
            player.Play();
        }
    }
} 
```

希望这应该可以帮助其他试图动态产生简单警报声音而不需要声音文件的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T23:10:45.467

这可能会有所帮助： [http ://channel9.msdn.com/coding4fun/articles/Generating-Sound-Waves-with-C-Wave-Oscillators](http://channel9.msdn.com/coding4fun/articles/Generating-Sound-Waves-with-C-Wave-Oscillators)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:01:09.187

下面的文章解释了如何使用 SoundPlayer 生成和播放 *.wav 文件。请注意，SoundPlayer 可以将流作为参数，因此您可以在 MemoryStream 中生成 wav 文件内容并避免保存到文件中。

[http://blogs.msdn.com/b/dawate/archive/2009/06/24/intro-to-audio-programming-part-3-synthesizing-simple-wave-audio-using-c.aspx](http://blogs.msdn.com/b/dawate/archive/2009/06/24/intro-to-audio-programming-part-3-synthesizing-simple-wave-audio-using-c.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-09T09:27:51.037

我尝试了从**Anachronist (2012-10)**中截取的代码——它对我有用。

对我来说最大的障碍：摆脱“AlertDing”wav 结尾系统性的“咔哒声”。

这是由代码片段中的“软错误”引起的：

`for (uint i = 0; i < numSamples - 1; i += fmt_Channels)`

需要更改为

`for (uint i = 0; i < numSamples; i += fmt_Channels)`

如果不改变，每次“播放”结束时都会产生一个系统的“零”，从而产生尖锐的咔**哒声**。（= 幅度跳跃 0->min->0）

原来的问题当然暗示“没有点击噪音”:)

# python - heroku [路由器]：错误 H14（没有运行 Web 进程）-> GET .herokuapp.com/ dyno= queue= wait= service= status=503 bytes=

> ID：11768722
> 
> 赞同：0
> 
> 时间：2012-08-01T22:51:01.943
> 
> 标签：python, django, heroku

我将应用程序推送到heroku，运行时`heroku open`出现应用程序错误

我检查了我的日志，这是错误打印之一：

> （2012-08-01T22:20:28+00:00 heroku[路由器]：错误 H14（没有运行 Web 进程）-> GET wawacom-troapp.herokuapp.com/dyno= queue=wait= service= status=503 bytes )

该应用程序是使用 sqlite3 设计的 django 应用程序。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:58:40.293

[https://devcenter.heroku.com/articles/error-codes#h14-no-web-processes-running](https://devcenter.heroku.com/articles/error-codes#h14-no-web-processes-running)

看起来您需要扩展您的网络流程；

heroku ps：规模网络= 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:41:41.960

这应该会有所帮助。按照 Heroku 的指南进行操作。[https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django)

# .net - 使用 InstallShield 2012 安装 ASP .Net MVC 应用程序

> ID：11768723
> 
> 赞同：0
> 
> 时间：2012-08-01T22:51:08.480
> 
> 标签：.net, asp.net-mvc, iis, installshield

InstallShield 2012 是否具有安装 Web 应用程序的内置功能？这将包括配置 IIS、应用程序池帐户等。有谁知道任何教程可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:05:07.727

是的，只需使用 IIS 视图（设计器）它看起来很像 IIS 管理工具，您只需去定义所有 IIS 对象和属性。InstallShield 负责其余的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:54:45.100

限量版（免费）版无法管理 IIS 应用程序池、Web 服务扩展等。付费版可以。切换到 WiX 的另一个原因。

# android - 为安卓平板定制系统组合栏/导航栏（下）

> ID：11768727
> 
> 赞同：0
> 
> 时间：2012-08-01T22:52:03.830
> 
> 标签：android, android-actionbar, navigationbar

我想在平板电脑上的系统导航栏上覆盖（添加更多按钮，这些按钮将带我进入多个活动/片段）（根据这个[android ui-overview](http://developer.android.com/design/get-started/ui-overview.html)它是一个“组合栏”（对于平板电脑）有没有办法去做这个？

我在 android.app 包中找不到 Navigation 类，例如 ActionBar。

如果无法向组合/导航栏添加按钮，我认为有几个选项，但我想先探索一下： - 使用顶部的操作栏 - 在导航栏上方添加一个底部栏（不是真的很好，因为它会在组合栏的顶部），就像他们在这里展示的那样： [动作栏](http://developer.android.com/design/patterns/actionbar.html)

非常感谢，
克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:58:52.227

> 有没有办法做到这一点？

不可以。您可以添加到系统栏的唯一内容是`Notifications`，它们不适用于此类导航。

> 如果无法向组合/导航栏添加按钮，我认为有几个选项，但我想先探索一下： - 使用顶部的操作栏 - 在导航栏上方添加一个底部栏（不是真的很好，因为它会在组合栏的顶部），就像他们在这里展示的那样：动作栏

如果您指的是标题为“拆分操作栏的布局注意事项”的部分，这被称为“拆分操作栏”，并且可以在`<activity>`via上启用`android:uiOptions="splitActionBarWhenNarrow"`。但是，这只对纵向的`-small`/屏幕生效。`-normal`在其他情况下，您的按钮将自动放置在屏幕顶部的操作栏中。

# python - Django：检测客户端浏览器对 HTML5 的支持

> ID：11768728
> 
> 赞同：2
> 
> 时间：2012-08-01T22:52:07.390
> 
> 标签：python, django, html

我的 Django 站点是否可以使用任何模块来判断客户端浏览器是否支持 HTML5 以及支持哪些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T22:55:21.260

可悲的是没有。这是您需要 JavaScript 客户端执行的操作。特别是像[http://modernizr.com/](http://modernizr.com/)

一种方法是运行modernizr并将结果发送到后端。

如果你真的很乐观，你可以建立一个用户代理列表并做出决定。但是祝你好运，让哪些东西在哪个版本的 Chrome 和 Firefox 中有效。

# android - Android列表视图行边距

> ID：11768729
> 
> 赞同：0
> 
> 时间：2012-08-01T22:52:24.323
> 
> 标签：android, android-layout, android-listview

我试图创建一个简单的列表视图，每行都有一些填充。

我以非常简单的方式完成了它，但我不确定这是否是正确的™ 方式。

这就是我得到的（代码如下）。正如您在点击一行时所看到的那样，它完全突出显示，我希望（如果可能）仅突出显示其中的视图（具有灰色背景的视图，即 TextView）

![例子](../Images/0fe6c20c82af5cca3b289057b4384620.png)

这是活动布局的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="@null"
        android:dividerHeight="0dp" />

    <TextView
        android:id="@android:id/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/no_events" />

</LinearLayout> 
```

这是列表项布局的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:padding="10dp">

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:background="#ccc"
        android:text="placeholder" />

</FrameLayout> 
```

感谢您的回复！

PS。我没有上传Activity，它是一个简单的ListActivity。

**更新**

已解决（感谢 Jorge Aguilar）。新代码是这样的：

项目清单：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:padding="10dp">

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:background="@drawable/event_focused"
        android:text="placeholder" />

</FrameLayout> 
```

以事件为中心的文件（位于可绘制目录中）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@android:color/black" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@android:color/darker_gray" /> <!-- focused -->
    <item android:state_hovered="true"
          android:drawable="@android:color/darker_gray" /> <!-- hovered -->
    <item android:drawable="@android:color/darker_gray" /> <!-- default -->
</selector> 
```

我还添加了这个：

```
android:listSelector="@android:color/transparent" 
```

到我的 ListView :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:01:18.757

好吧，您可以在 onitemselected 方法上添加一些代码，以通过 id 或类似的方式查找 textview，然后更改背景颜色。或者你想要什么不同的东西？

**更新：**

如果您需要从 xml 文件中更改它，也许这篇**[文章](https://groups.google.com/forum/?fromgroups#!topic/android-developers/Qk_cWEzxmuo)**可以帮助您实现它。直接跳到最后一篇文章，希望你能在那里找到答案。

# scala - 如何通知 SBT 使用插件的特定 scala 版本？

> ID：11768730
> 
> 赞同：15
> 
> 时间：2012-08-01T22:52:27.897
> 
> 标签：scala, sbt

现在我不知何故弄乱了我的全局 sbt 插件（`~/.sbt/plugins/build.sbt`）。Scala 2.9.1 似乎是 sbt 0.11.3 想要的版本，并且所有插件（sbt-gpg-plugin、sbt-idea-plugin）都是针对 2.9.1 发布的。

现在无论我做什么，它都会不断尝试找到它们是针对 2.9.2 构建的：

```
[warn]  Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]      com.github.mpeltonen:sbt-idea:1.0.0 (sbtVersion=0.11.3, scalaVersion=2.9.2)
[warn]      com.jsuereth:xsbt-gpg-plugin:0.6 (sbtVersion=0.11.3, scalaVersion=2.9.2)
...
[error] {file:...}default-50be6e/*:update: sbt.ResolveException: unresolved dependency: com.github.mpeltonen#sbt-idea;1.0.0: not found 
```

我该如何解决这个问题，以便 sbt 像以前一样检索 Scala 2.9.1 的插件？

* * *

为了完整起见，这是我的文件如何处理建议：

```
// project-home/build.sbt
scalaVersion := "2.9.2"
... 
```

```
// project-home/project/plugins.sbt
resolvers += "less is" at "http://repo.lessis.me"

addSbtPlugin( "me.lessis" % "ls-sbt" % "0.1.1" )

scalaVersion := "2.9.1"  // "just in case it helps" 
```

```
// ~/.sbt/plugins/build.sbt
scalaVersion := "2.9.1"  // "just in case it helps"

resolvers += "sbt-idea-repo" at "http://mpeltonen.github.com/maven/"

resolvers += Resolver.url( "sbt-plugin-releases", url( "http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases" ))( Resolver.ivyStylePatterns )

addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.0.0")

addSbtPlugin( "com.jsuereth" % "xsbt-gpg-plugin" % "0.6" ) 
```

* * *

更糟糕的是，即使我**删除了** `~/.sbt/plugins/build.sbt`. 所以没有更多对 sbt-idea 或 xsbt-gpg-plugin 的引用（至少对我可见）。我仍然无法编译任何项目，因为 sbt 仍然试图找到这两个插件。史诗般的失败。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T00:20:27.330

您可以提供 Scala 版本的插件。我没有使用 ~/.sbt/，但我认为它也可以。

以下是我使用 Scala 2.9.2 作为我的项目编译器的项目配置，并使用了一些从 Scala 2.9.1 编译的插件。由于 Scala 2.9.1 和 Scala 2.9.2 是二进制兼容的，所以我还没有遇到任何问题。

```
// MyProject/build.sbt

name := "MyProject"            

version := "0.1"            

scalaVersion := "2.9.2" 
```

以下是插件配置：

```
// File: MyProject/project/plugins.sbt

import sbt._

import Defaults._

resolvers += Resolver.url("sbt-plugin-releases",
  new URL("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/"))(
    Resolver.ivyStylePatterns)

// Resolved to: 
//
//  http://..../com.untyped/sbt-less/scala_2.9.1/sbt_0.11.3/0.4/jars/sbt-less.jar 
//
libraryDependencies += sbtPluginExtra(
    m = "com.untyped" % "sbt-less" % "0.4", // Plugin module name and version
    sbtV = "0.11.3",    // SBT version
    scalaV = "2.9.1"    // Scala version compiled the plugin
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T23:35:22.043

一些参考资料：

[SBT 插件版本化为它们构建时使用的 scala 版本](https://groups.google.com/forum/#!topic/simple-build-tool/ZYcA-A5qVgY)。

[你不是唯一的一个......](https://groups.google.com/forum/?fromgroups#!topic/simple-build-tool/tVNhyrxv8gc) 再一次，没有答案。

[而另一个案例研究，这可能有答案](https://github.com/mpeltonen/sbt-idea/issues/119)。

可能相关的报价？" 记得同时删除 project/plugins 目录，因为如果该目录存在，project/plugins.sbt 将被忽略。"

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-24T03:27:53.393

您还可以指定`sbtVersion`和`scalaVersion`。有一个重载`addSbtPlugin`-

```
addSbtPlugin(dependency : sbt.ModuleID, sbtVersion : scala.Predef.String, scalaVersion : scala.Predef.String) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:50:12.697

好的，我回到了所有可能导致这种情况的事件。而且因为我发现其他项目仍在构建中，我开始理解这个特定项目的问题`B`在于，这两个插件似乎是它所依赖的项目的*常规依赖*`A`项。

当 sbt 拒绝承认我在 中取消注释的 GPG 插件的存在时`~/.sbt/plugins/build.sbt`，我*将该文件重命名*为`~/.sbt/plugins.sbt`，然后再次返回。这个中间位置不知何故意味着插件不再是插件（尽管被添加为），而是当我发布它时`addSbtPlugin`项目的常规依赖项。`A`

我试图在所有已知的 Ivy2 缓存目录中找到混乱的`A`'s 。`ivy.xml`不可能找到 sbt 明显看到的那个。

长话短说：我不得不`A`人为地修改版本，以摆脱`ivy.xml`隐藏在某个地方的错误缓存。这迫使 sbt 重新找到`A`正确的`ivy.xml`（不再依赖于插件）。

现在我只是担心如果我将全局插件设置到位会发生什么:-#

* * *

未来建议：**永远不要将任何东西放入`~/.sbt/plugins.sbt`. 如果您需要 sbt 来了解您的更改`~/.sbt/plugins/build.sbt`：重新启动计算机。不要碰任何文件。**

# facebook - FB C# SDK Get 方法的问题，它适用于静态字符串，但不适用于由变量形成的字符串

> ID：11768732
> 
> 赞同：1
> 
> 时间：2012-08-01T22:52:38.557
> 
> 标签：facebook, string, facebook-c#-sdk

我正在使用 FB C# SDK。可能我的问题是非常基本的，但我已经尝试了很多选项，但我无法解决我的问题。

我正在使用 get 方法从 facebook 检索信息，它与相册完美配合，所以它不是 access_token 或初始化的问题。

这是我使用的代码行，它返回包含专辑信息的对象，对于任何用户来说，它总是相同的，因为应用程序要求他的所有专辑。它工作正常：

```
 dynamic fotos = client.Get("me/albums"); 
```

当我要求照片时，问题就来了，因为它不是像相册一样的静态值，它是基于用户选择的值，所以，我使用了一个变量：

```
 public ActionResult Photos(string albumstring)
           { 
           ... more code asking for token, etc. 

    dynamic fotos = client.Get(albumstring); 
```

它失败了，它返回一个空对象。Albumstring 中的字符串文本正是需要的：“10150240194251714/photos”，但它不起作用。

我像这样静态测试了它，它可以工作！：

```
 public ActionResult Photos(string albumstring)
           { 
           ... more code asking for token, etc. 

    albumstring2 = "10150240194251714/photos"; 

    dynamic fotos = client.Get(albumstring2); 
```

但它只有在它是一个静态值时才有效，将它与变量混合会使其失败，就像在这个例子中一样：

```
 public ActionResult Photos(string albumId)
           { 
           ... more code asking for token, etc. 

    albumstring = albumId + "/photos"; 

    dynamic fotos = client.Get(albumstring); 
```

我尝试了很多不同的方法来构造像 StringBuilders 这样的字符串，添加转义字符 \，从视图中构造它并将其完整带到控制器等。但似乎如果不是直接写入字符串，它就赢了不行。

可能这是来自 fb c#sdk 的错误，但我需要解决它而且我没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T16:23:34.800

这是我使用的方法，它可以很好地检索一些专辑照片，其中 AlbumPhoto 类只是用于捕获数据的 DTO。我希望它有帮助

```
public static List<AlbumPhoto> GetAlbumPhotos(string userAccessToken, string albumId)
    {
        var list = new List<AlbumPhoto>();
        var client = new FacebookClient(userAccessToken);

        dynamic photos = client.Get(String.Format("/{0}/photos", albumId));
        foreach (var photo in photos.data)
        {
            lista.Add(new AlbumPhoto
            {
                FacebookId = photo.id,
                Name = photo.name,
                ImageUrl = photo.source,
                Height = (int)photo.height,
                Width = (int)photo.width
            });
        }
        return list;
    } 
```

# java - 如何在 AS400 JDE 上创建 Web 服务并在 Netbeans Java 中使用它们

> ID：11768735
> 
> 赞同：0
> 
> 时间：2012-08-01T22:53:04.360
> 
> 标签：java, web-services, stored-procedures, netbeans, jde

我的问题是我不知道如何从我的 java 应用程序访问数据。我正在使用 netbeans 6.9.1，并且已经使用 jdbc:as400://DBase... 创建了与 AS400 的连接... 我尝试创建存储过程或创建 Web 服务以从我的 java 应用程序中使用它们，但我做不到。另外，我尝试从数据库创建实体类，但 AS400 数据库没有主键。知道如何在我的 java 应用程序中使用这个数据库吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:54:02.483

嗨 @hetch 在 AS/400 数据库和 WSDL 文件上创建 WEB SERVICES 的那些步骤。:)

1.  创建数据源

    ```
    public DataSource getDataSource(String bd) throws Exception {
         DataSource ds = null;
         try {
            if(bd.trim().equals("as400")) {
                 ds = (DataSource) ic.lookup("jdbc/your_name_jndi");
            }
            return ds;
         } catch(NamingException n) {
                throw new Exception("Err getDataSource NamingException - " + n.getMessage());
         }
    } 
    ```

2.  创建你的 Bean

3.  创建一个到数据库 **更新**的连接—— 这个类你可以连接到任何数据库，即（ORACLE、MYSQL、SQL-SERVER 等）。——

    ```
    public class DataBases {
         public static Connection con = null;
         static public ServiceLocator locator;

         public DataBases() throws Exception {
                super();
         }

         public Connection getConexionAS400() {
               try {
                  con = locator.getDataSource("AS/400").getConnection();
                  System.out.println("CONECCTED AS/400 DB. " + con);
               } catch(Exception e) {
                      e.printStackTrace();
               }
               return con;
         }
    }

     public final class ServiceLocator {
          private static ServiceLocator pcf;
          private static InitialContext ic;

          /**.
           * Context initialize.
           * @throws Exception
           */
           private ServiceLocator() throws Exception {
                 try {
                    ic = new InitialContext();
                 } catch (NamingException n) {
                        throw new Exception(
                        "Err InitialContext (ServiceLocator) NamingException - "
                        + n.getMessage());
                 }
            }

            /**.
             * Generate instance servicelocator
             * @return service locator
             * @throws Exception
             */
             public static ServiceLocator getInstance() throws Exception {
                  if(pcf == null) {
                        synchronized (ServiceLocator.class) {           
                                pcf = new ServiceLocator();              
                        }
                  }
                  return pcf;
             }

             /**.
              *
              * @param dsName Nombre del jdbc
              * @return DataSource
              * @throws Exception
              */
              public DataSource getDataSource(String bd) throws Exception {
                    DataSource ds = null;
                    try {   
                    if(bd.trim().equals("as400")) {
                             ds = (DataSource) ic.lookup("jdbc/tiempoaire1");
                        }
                        return ds;
                     } catch(NamingException n) {
                            throw new Exception(
                            "Err getDataSource (ServiceLocator) NamingException - "
                            + n.getMessage());
                     }
              }
      } 
    ```

4.  创建类到 CRUD 到数据库，在这一步中，您将了解 CRUD 上的 ID 表的工作原理。

而已 ！！！

**我希望能帮助你。**:)

# jquery - 带有 :hover 的 jQuery .mousemove()

> ID：11768737
> 
> 赞同：1
> 
> 时间：2012-08-01T22:53:20.393
> 
> 标签：jquery, css, hover, mousemove

我正在尝试编写一个简单的悬停预览效果。我正在使用 CSS :hover 伪类来显示更大的图像，并使用 jQuery .mousemove() 来跟踪鼠标光标的位置。较大的图像应该出现在悬停并跟随鼠标光标。

问题是当鼠标不再“悬停”时，较大的图像不会消失。它会在整个页面上跟随鼠标几秒钟，然后最终消失。它似乎在 IE8 中工作得更好，但在任何其他浏览器中都没有（IE8 也给我定位问题，但这是一个不同的问题）。

任何帮助，将不胜感激。

[这是代码](http://jsfiddle.net/nP8zh/17/)：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:03:45.193

只需在偏移量中多加一点填充，这样鼠标就不会悬停在大图像上。看看这个[***jsFiddle***](http://jsfiddle.net/YKq4F/)

```
 var relX = pageX - parentOffset.left +20;
 var relY = pageY - parentOffset.top+20; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:04:23.883

似乎悬停效果跟不上鼠标移动的速度不够快。您`:hover`可能需要做的不是`.mouseout`纯粹依靠image -- 带有回调的图像）。`.mouseover``.data`

我没有深入研究你的代码，但这里有一些伪代码来解释我的意思

```
$(".big-img-that-follows-mouse").mouseout(function () {
   var $this = $(this);
   //You can also .hide() or whatever instead of .remove()
   $this.data('timeout', setTimeout(function () { $this.remove(); }), 500));
})
.mouseover(function () {
   if ($(this).data('timer') {
      clearTimeout($(this).data('timer'));
      $(this).removeData('timer');
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:02:58.420

我会看看这个人在这里做了什么：

示例：[http](http://cssglobe.com/lab/tooltip/03/) ://cssglobe.com/lab/tooltip/03/ 代码：[http ://cssglobe.com/lab/tooltip/03/main.js](http://cssglobe.com/lab/tooltip/03/main.js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:05:22.777

如果您对 HTML 进行格式化而不是将其以一个长字符串形式转储到 jsfiddle 中，那就太好了。

无论如何，您的问题是您的大图像嵌套在列表中，因此当您将其悬停时，您也仍然悬停在原始项目上。

# regex - 如何在正则表达式中使用变量（TCL/Expect）

> ID：11768739
> 
> 赞同：4
> 
> 时间：2012-08-01T22:53:28.043
> 
> 标签：regex, tcl, expect

我试图弄清楚如何在正则表达式匹配中使用字符串。我已经在谷歌上搜索了一个小时，我想我会问专家。

这有效：

```
#!/usr/bin/expect

set MYSTR "value"

if [ regexp -nocase "$MYSTR" $outcome matchresult ] then {
...
} 
```

这不起作用：

```
#!/usr/bin/expect

set MYSTR "value"

if [ regexp -nocase {something here:\s+$MYSTR} $outcome matchresult ] then {
...
} 
```

我确定这是一个简单的语法问题。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T23:04:49.973

对。您有 2 个选项：用 将模式括起来`"`，但是您必须防止`\`被 Tcl 而不是 regxp 解析。或者你可以使用`regexp -nocase [subst -nocommands -nobackslashes {something here:\s+$MYSTR}]`.

PS：总是放在[表达式](http://wiki.tcl.tk/10225)`{}` [周围](http://tclhelp.net/unb/194) ：

```
if {[regexp -nocase [subst -nocommands -nobackslashes {something here:\s+$MYSTR}]} then {
...
} 
```

# c# - 美化 Windows 窗体应用程序

> ID：11768747
> 
> 赞同：20
> 
> 时间：2012-08-01T22:54:23.613
> 
> 标签：c#, .net, winforms, c#-4.0

我将为我的 C# 项目创建一个小型数据库驱动的[Windows 窗体应用程序。](http://en.wikipedia.org/wiki/Windows_Forms)[我想像我们在使用CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)的网站上一样美化它。是否有任何资源或网站可以帮助我美化我的应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-07T15:32:27.510

你可以试试我前段时间建的一个库。

[http://www.codeproject.com/Articles/33716/Fancy-Windows-Forms](http://www.codeproject.com/Articles/33716/Fancy-Windows-Forms)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T22:59:53.743

“美化”和“Windows 窗体”并不经常用在同一个句子中。WPF 允许显着更好的设计机会。

一些框架允许您对 WinForms 应用程序进行皮肤处理，这允许您通过配置而不是代码来驱动查看。

[如何为我的 Windows 窗体应用程序设置皮肤？](https://stackoverflow.com/questions/6329632/how-do-i-skin-my-winform-application)

还有一个提供skinner的CodeProject项目，虽然我没有亲自使用过

[http://catalog.codeproject.com/Articles/415102/WinForms-Form-Skin](http://catalog.codeproject.com/Articles/415102/WinForms-Form-Skin)

当我过去编写小型 WinForms 实用程序而无法访问框架时，我会将每个主要控件子类化，并在该子类中应用一种样式。对子类的一项更改会影响整个应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T23:02:10.607

在 Windows 窗体中，类似 CSS 的样式很困难，因为该框架并没有真正考虑到它。如果样式对您很重要，那么使用 WPF 可能会更轻松。

我知道一个旨在帮助对 WinForms 应用程序进行皮肤设计的第三方库[DevExpress WinForms Skins](http://www.devexpress.com/products/NET/Controls/WinForms/Skins/)。不过，我没有真正的经验，所以我不能对此发表任何评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T23:12:17.500

如果您在 Google 上搜索“.NET 自定义主题”，那么您可以获得许多免费样式以在您的项目中使用。

这是一些用户在 hackforums 上列出的他的样式和自定义控件的列表，我认为这有助于使您的表单“自定义”和“不错”： http: [//pastebin.com/1nvZ08kx](http://pastebin.com/1nvZ08kx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-01T23:45:38.323

您不能使用 CSS 来设置 WinForms 应用程序的样式，但我不认为这就是您的意思。

就“美化”您的应用程序而言，有许多可用的第三方工具。最受欢迎的是（排名不分先后）：

*   泰勒里克
*   开发快递
*   基础设施
*   组件一
*   很多很多其他的

人们倾向于对他们的第 3 方设计工具充满信心，并且大量的墨水已经洒在 SO 上，以了解每个第 3 方设计工具的好处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T10:45:45.830

如果您对用于设计 Windows 窗体应用程序的第三方工具感兴趣，您还可以查看 Infragistic 的 - AppStylist for Windows Forms 控件。[该工具的运行时版本](http://www.infragistics.com/products/windows-forms/appstylist/videos/appstylistruntime-getting-started)有一个简短的视频。

另一个有用的入门页面是*[应用程序样式框架](http://www.infragistics.com/help/topic/8CBDEFA7-3CFC-4EF1-8656-E7F646085126)*。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-18T12:53:05.680

我之前使用过 WebBrowser 控件来创建界面。有了它，您可以使用 HTML 和 CSS 创建一个漂亮的“表单”。它需要更多的编码，但它可以工作。用户需要安装 IE 才能使用该控件。这里有一个 VB.Net 示例： [Using VB .Net WebBrowser Control To Build WinForm User Interface](http://gugiaji.wordpress.com/2012/01/30/using-vb-net-webbrowser-control-to-build-winform-user-interface/)

无论如何，这是另一种选择。

# python - staticmethod 和 classmethod 装饰器可以用纯 Python 实现吗？

> ID：11768752
> 
> 赞同：10
> 
> 时间：2012-08-01T22:54:49.350
> 
> 标签：python, decorator, static-methods, class-method

这是一个学术问题，而不是一个实际问题。我正在尝试深入研究 Python 的基础，我想知道：如果我愿意，我可以在纯 Python 中实现`staticmethod`和装饰器吗？`classmethod`

因为`staticmethod`也许我可以保留对原始函数的引用并将其称为省略第一个参数？

因为`classmethod`也许我可以保留对原始函数的引用并调用它传递第一个参数的类型，而不是参数本身？（我将如何处理在课堂上直接调用它？）

同样，我并不是想在我的程序中实际实现它。我想了解语言是如何工作的。如果有可能，我将非常感谢代码示例。如果没有，我会很感激解释为什么理论上不能做到。谢谢！

**编辑：**感谢您的回答和对描述符协议的参考！为了进一步扩展我对 Python 的理解，我想再问两件事：

*   这是否可以在没有描述符协议的情况下完成，例如通过在我们的类中实现 __ call __ 特殊方法？

*   描述符协议在 Python 2.7 和 Python 3.x 中的工作方式是否相同？

再次感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T22:57:36.767

[文档](http://docs.python.org/howto/descriptor.html#static-methods-and-class-methods)中有示例：

```
class StaticMethod(object):
    "Emulate PyStaticMethod_Type() in Objects/funcobject.c"

    def __init__(self, f):
        self.f = f

    def __get__(self, obj, objtype=None):
        return self.f 
```

和：

```
class ClassMethod(object):
    "Emulate PyClassMethod_Type() in Objects/funcobject.c"

    def __init__(self, f):
        self.f = f

    def __get__(self, obj, klass=None):
        if klass is None:
            klass = type(obj)
        def newfunc(*args):
            return self.f(klass, *args)
        return newfunc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:43:02.597

您应该接受 JF Sebastian 的回答，因为它直接回答了您的问题，但是提出这个问题意味着您想了解可以在[此处](http://docs.python.org/howto/descriptor.html)阅读的描述符协议，这是用于实现这些和其他重要 Python 内部的东西（并且可以谨慎使用时在您自己的代码中很有用）。`property`, 和常规的 ol' 绑定方法是使用描述符协议编写的其他东西。

您应该检查一下，当您第一次阅读它时，它并不那么简单，但它会点击。

# java - 递归方法中的泛型

> ID：11768756
> 
> 赞同：2
> 
> 时间：2012-08-01T22:55:20.083
> 
> 标签：java, generics, types, recursion

我的体系结构有一些类 XMLElement （定义为其子类的类型内部类型）

为什么不编译这个？

```
private static <T extends XMLElement<U>, U extends XMLElement<?>> T recursiveFilter(T root){
        T filteredRoot = root;
        //Some filtering stuff
        for (U child : root.getSubElements()){
            U cleanChild = recursiveFilter(child); //Here comes the problem, it says reursiveFilter can only accept T but now we are sending U != T
        }
        return filteredRoot;
    }
} 
```

我正在将 U（T 的子级）发送到当前迭代的函数，但 U 在下一次迭代中变为 T，然后它将 U，它的子级，发送到下一个，等等......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:02:08.907

你不能使用：

```
private static <T extends XMLElement<T>> T recursiveFilter(T root) {
    T filteredRoot = root;
    //Some filtering stuff
    for (T child : root.getSubElements()) {
        T cleanChild = recursiveFilter(child);
    }
    return filteredRoot;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:10:30.113

你的定义是：

```
T extends XMLElement<U>, U extends XMLElement<?> 
```

因此`T`是类型`XMLElement`或其子类型之一。并且`U`是类型`XMLElement`或其子类型之一。

总之，`T`和`U`是相同的类型，据我所知，您应该能够将定义简化为

```
private static <T extends XMLElement<T>> T recursiveFilter(T root) {
  //...
} 
```

至少我知道这对我来说很好：

```
static <T extends XMLElement<T>> T recursiveFilter(T root){
    T filteredRoot = root;
    for(T child: root.getSubElements()){
        T cleanChild = recursiveFilter(child);
    }
    return filteredRoot;
}

interface XMLElement<T> {
    List<T> getSubElements();
} 
```

# url - ModX：更改为友好别名 URL，但现在 Wayfinder 不工作

> ID：11768758
> 
> 赞同：0
> 
> 时间：2012-08-01T22:56:01.347
> 
> 标签：url, modx, modx-revolution

我在模板中使用了 Wayfinder，例如：

```
[[Wayfinder? &startId=`8` ]] 
```

在我打开友好网址之前它工作正常（通过：系统>>系统设置>>用户友好网址）

现在我的链接都不起作用。最重要的是，如果我从资源页面单击“查看”按钮或在浏览器中输入完整的 url，我会收到 404 错误。

我在这个过程中遗漏了什么吗？

（ps 我使用 Revo 2.1.3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:43:36.770

您是否配置了 .htaccess 文件？它是友好网址所必需的。当您安装 MODX 时，它被命名为`ht.access`，因此您需要将其重命名为`.htaccess`.

如果您在子文件夹中安装了 MODX，您还需要在此处进行设置：

```
RewriteBase /folder-name 
```

正如 Sean 建议的那样，您还需要清除缓存以重建 Wayfinder 菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:29:59.393

它可能是您的缓存 - 只需清除它就可以了。

# python - 如何在航拍图像中检测白雪背景上的黑色湖泊？

> ID：11768763
> 
> 赞同：2
> 
> 时间：2012-08-01T22:57:04.817
> 
> 标签：python, opencv, computer-vision, simplecv

这是一个示例航拍图像：！[一些未结冰湖泊的航拍图像][1]

如何从图像中自动检测和提取黑色未冻结湖的参数？我主要使用 Python。

编辑：见下面我的回答；我想我已经找到了解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:27:04.373

这是一个图像分割问题，通常有很多不同的方法可以解决。这里最简单的方法似乎是区域增长：

*   找到灰度值低于您选择的将黑色与白色分开的某个阈值的每个像素 - 这些像素是您的“种子”。
*   从它们中溢出，使用仅溢出到灰度值也低于某个阈值的像素的增长条件（可能与以前相同，但可能不同）。当您无法进一步扩大您拥有的区域时终止。在洪水过程中，将彼此可以到达的种子组合到同一区域。这个过程会产生一些连接的区域。您可以在泛洪过程中跟踪这些区域的大小。
*   删除任何小于特定大小的区域（或者，如果您只对最大的湖泊感兴趣，请选择您拥有的最大区域）。
*   从湖的一部分的像素中计算您想要的参数。例如，湖泊的平均灰度值将是湖泊中像素灰度值的平均值等。不同的参数将需要不同的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T19:53:46.500

我已经使用以下方法获得了它：

```
###Credits:
###http://stackoverflow.com/questions/9525313/rectangular-bounding-box-around-blobs-in-a-monochrome-image-using-python
###http://stackoverflow.com/questions/4087919/how-can-i-improve-my-paw-detection

import numpy as np
import scipy.ndimage as ndimage
import scipy.spatial as spatial
import scipy.misc as misc
import matplotlib.pyplot as plt
import matplotlib.patches as patches

class BBox(object):
    def __init__(self, x1, y1, x2, y2):
        '''
        (x1, y1) is the upper left corner,
        (x2, y2) is the lower right corner,
        with (0, 0) being in the upper left corner.
        '''
        if x1 > x2: x1, x2 = x2, x1
        if y1 > y2: y1, y2 = y2, y1
        self.x1 = x1
        self.y1 = y1
        self.x2 = x2
        self.y2 = y2
    def taxicab_diagonal(self):
        '''
        Return the taxicab distance from (x1,y1) to (x2,y2)
        '''
        return self.x2 - self.x1 + self.y2 - self.y1
    def overlaps(self, other):
        '''
        Return True iff self and other overlap.
        '''
        return not ((self.x1 > other.x2)
                    or (self.x2 < other.x1)
                    or (self.y1 > other.y2)
                    or (self.y2 < other.y1))
    def __eq__(self, other):
        return (self.x1 == other.x1
                and self.y1 == other.y1
                and self.x2 == other.x2
                and self.y2 == other.y2)

def find_paws(data, smooth_radius = 5, threshold = 0.0001):
    # http://stackoverflow.com/questions/4087919/how-can-i-improve-my-paw-detection
    """Detects and isolates contiguous regions in the input array"""
    # Blur the input data a bit so the paws have a continous footprint 
    data = ndimage.uniform_filter(data, smooth_radius)
    # Threshold the blurred data (this needs to be a bit > 0 due to the blur)
    thresh = data > threshold
    # Fill any interior holes in the paws to get cleaner regions...
    filled = ndimage.morphology.binary_fill_holes(thresh)
    # Label each contiguous paw
    coded_paws, num_paws = ndimage.label(filled)
    # Isolate the extent of each paw
    # find_objects returns a list of 2-tuples: (slice(...), slice(...))
    # which represents a rectangular box around the object
    data_slices = ndimage.find_objects(coded_paws)
    return data_slices

def slice_to_bbox(slices):
    for s in slices:
        dy, dx = s[:2]
        yield BBox(dx.start, dy.start, dx.stop+1, dy.stop+1)

def remove_overlaps(bboxes):
    '''
    Return a set of BBoxes which contain the given BBoxes.
    When two BBoxes overlap, replace both with the minimal BBox that contains both.
    '''
    # list upper left and lower right corners of the Bboxes
    corners = []

    # list upper left corners of the Bboxes
    ulcorners = []

    # dict mapping corners to Bboxes.
    bbox_map = {}

    for bbox in bboxes:
        ul = (bbox.x1, bbox.y1)
        lr = (bbox.x2, bbox.y2)
        bbox_map[ul] = bbox
        bbox_map[lr] = bbox
        ulcorners.append(ul)
        corners.append(ul)
        corners.append(lr)        

    # Use a KDTree so we can find corners that are nearby efficiently.
    tree = spatial.KDTree(corners)
    new_corners = []
    for corner in ulcorners:
        bbox = bbox_map[corner]
        # Find all points which are within a taxicab distance of corner
        indices = tree.query_ball_point(
            corner, bbox_map[corner].taxicab_diagonal(), p = 1)
        for near_corner in tree.data[indices]:
            near_bbox = bbox_map[tuple(near_corner)]
            if bbox != near_bbox and bbox.overlaps(near_bbox):
                # Expand both bboxes.
                # Since we mutate the bbox, all references to this bbox in
                # bbox_map are updated simultaneously.
                bbox.x1 = near_bbox.x1 = min(bbox.x1, near_bbox.x1)
                bbox.y1 = near_bbox.y1 = min(bbox.y1, near_bbox.y1) 
                bbox.x2 = near_bbox.x2 = max(bbox.x2, near_bbox.x2)
                bbox.y2 = near_bbox.y2 = max(bbox.y2, near_bbox.y2) 
    return set(bbox_map.values())

if __name__ == '__main__':
    fig = plt.figure()
    ax = fig.add_subplot(111)

    data = misc.imread('sampleKiteLakeImage.jpg')
    im = ax.imshow(data)    
    data_slices = find_paws(255-data, smooth_radius = 2, threshold = 200)

    bboxes = slice_to_bbox(data_slices) #remove_overlaps(slice_to_bbox(data_slices))
    for bbox in bboxes:
        xwidth = bbox.x2 - bbox.x1
        ywidth = bbox.y2 - bbox.y1
        p = patches.Rectangle((bbox.x1, bbox.y1), xwidth, ywidth,
                              fc = 'none', ec = 'red')
        ax.add_patch(p)

    plt.show() 
```

这是带有重叠框的最终图像。 ![方框勾勒出没有重叠的湖泊](../Images/69cd0ad94d0ba088e8f4b2257fb18664.png)

制作

```
bboxes = slice_to_bbox(data_slices) #remove_overlaps(slice_to_bbox(data_slices)) 
```

进入

```
bboxes = remove_overlaps(slice_to_bbox(data_slices)) 
```

摆脱重叠： ![方框勾勒出重叠的湖泊](../Images/6a16111fa5d7ffe8d3c1582a563ac33c.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T20:57:45.917

这是在 SimpleCV 中的快速方法：

```
from SimpleCV import *

lakeimg = Image('http://i.stack.imgur.com/ku8F8.jpg') #load this image from web, or could be locally if you wanted.
invimg = lakeimg.invert() #we invert because blobs looks for white blobs, not black
lakes = invimg.findBlobs() # you can always change parameters to find different sized blobs
if lakes: lakes.draw() #if it finds blobs then draw around them
invimg.show() #display the image 
```

如果您愿意，您可以随时使用参数，如果您希望它相当健壮，我们通常会使用图像大小的比率。Features 类中还有很多选项可以在一些 blob 上绘制边界框等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:11:24.213

据我所知，您可以创建亮度低于阈值的区域数组（[0,1] 数组）。有一些方法可以计算形状的数量/大小等，例如递归删除。

# django - 使用 django ModelForm 显示错误

> ID：11768767
> 
> 赞同：3
> 
> 时间：2012-08-01T22:57:24.040
> 
> 标签：django, validation, modelform

我无法弄清楚如何控制 ModelForms 的字段验证。

这是我的模型表格：

```
class UserForm(ModelForm):
    class Meta:
        model = User
        fields = ('email', 'password') 
```

这是我在模板中呈现表单的方式：

```
<form method="post" action="">
    {% csrf_token %}
    {{ userform.as_p }}
    <input type="submit" value="Submit" />
</form> 
```

这是我的看法：

```
def login_page(request):
    if request.method == 'POST':
        userform = UserForm(request.POST)
        if userform.is_valid():
            email = request.POST['email']
            password = request.POST['password']
            user = authenticate(username=email, password=password)
            if user is not None:
                login(request, user)
                return redirect('/dashboard/')
            else:
                # How can I give the user feedback about authentication failute here. Right now it just reloads the form without any messages.
                return render(request, "login.html", {"userform": userform}) 
        else:
            # Because .is_valid() is called, The userform will validate for email addresses and that a password input is present here.
            return render(request, "login.html", {"userform": userform}) 
    else:
        userform = UserForm()
        return render(request, "login.html", {"userform": userform}) 
```

从阅读文档来看，这似乎应该像向我的表单传递一些自定义属性一样简单；但由于我正在使用 ModelForm，我不确定这是否以相同的方式实现。

谁能提供有关如何最好地控制 ModelForm 字段错误的示例或提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:07:00.713

如果您想将错误或警告消息返回给用户（即使经过验证的表单中没有错误），您可以使用[消息传递框架](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)，也可以[将自定义错误消息插入表单](https://stackoverflow.com/questions/188886/inject-errors-into-already-validated-form)。

我认为消息传递框架是您最好的选择——我认为将错误注入表单不是一个好主意。如果有人输入了错误的用户名和密码，这不是验证错误，因此不应这样对待。只有在字段中输入了错误类型的数据而不是不正确的值时，才应引发验证错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:18:26.267

Django[身份验证应用程序](https://docs.djangoproject.com/en/dev/topics/auth/)`AuthenticationForm`具有您使用的内置功能。如果您查看[源代码](https://github.com/django/django/blob/1.4.1/django/contrib/auth/forms.py#L134)，您可以看到他们的方法是检查`clean`方法内部的用户名和密码。这样，如果用户名和密码组合无效，则会引发验证错误，并且表单将显示错误。

您可以`AuthenticationForm`通过以下导入导入并在登录视图中使用它：

```
from django.contrib.auth.forms import Authentication 
```

您也可以使用内置[`login`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.login)视图。这意味着您可以利用添加的功能，例如在用户未启用 cookie 时显示消息。它还降低了您创建安全漏洞的机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:38:25.813

很简单，你有多种方式来显示错误信息：

**第一：**

1-覆盖表单/模型表单中的 clean 方法：

```
def clean(self):
    # To keep the main validation and error messages
    super(your_form_name, self).clean()

    # Now it's time to add your custom validation
    if len(self.cleaned_data['password']) < 10:
         self._errors['password']='your password\'s length is too short'
         # you may also use the below line to custom your error message, but it doesn't work with me for some reason
         raise forms.ValidationError('Your password is too short') 
```

**第二个**

通过使用 django 内置的验证器。

您可以使用模型中的验证器和您想要的自定义错误消息，如下所示：

```
RE = re.compile('^[0-9]{10}$')

field_name = models.CharField('Name', default='your_name',validators=[RegexValidator(regex=RE, message="Inapproperiate Name!")],) 
```

验证器可以利用您可以验证的多个内置验证规则。

[请参考这个 django 文档](https://docs.djangoproject.com/en/dev/ref/validators/)

您也可以在表单定义中使用验证器，但是在出现错误时，验证器中的错误消息将无法像模型那样工作，自定义错误消息使用下面的第三种方法。

**第三种方法：**

```
skill = forms.CharField(
    label = 'SSkill', 
    min_length = 2,
    max_length = 12, 
    # message kwarg is only usable in models, yet,
    #it doesn't spawn error here.
    #validators=[RegexValidator(regex=NME, message="In-approperiate number!")], 
    required = True,
    #Errors dictionary 
    error_messages={'required': 'Please enter your skill','min_length':'very short entry','invalid':'Improper format'}, 
    #Similar to default you pass in model
    initial = 'Extreme Coder'
) 
```

其中，requied、min_length、max_length 以及其他参数都是 fomr kw 参数，只有当上面几行的验证器与您在验证器中选择的标准不匹配时，才会选择无效参数。

**第四种方法**

在此方法中，您将像这样覆盖模型表单的定义：

```
def __init__(self, *args, **kwargs):
    super(Your_Form, self).__init__(*args, **kwargs)
    self.fields['password'].error_messages['required'] = 'I require that you fill out this field' 
```

**第五种方法：**

我在这样的stackoverflow帖子之一中看到了一些自定义错误的好方法：

```
class Meta:
    model = Customer 
    exclude = ('user',)
    fields = ['birthday','name'] 
    field_args = {
        "name" : {
            "error_messages" : {
                "required" : "Please let us know what to call you!"
                "max_length" : "Too short!!!"
            }           
        }
    } 
```

## 参考第五种方法是：[Brendel's Blog](http://blog.brendel.com/2012/01/django-modelforms-setting-any-field.html)

可能有其他/更好的做事方式，但这些是最常见的，至少对我来说:-)

我希望这篇文章有帮助。

# visual-studio-2010 - VS2010 与 GLew/ Glee/ 非官方 OpenGL SDK 的链接错误

> ID：11768770
> 
> 赞同：2
> 
> 时间：2012-08-01T22:57:36.830
> 
> 标签：visual-studio-2010, opengl

我在 Windows 7 64 位笔记本电脑（HP Pavilion g6）上运行 Visual Studio 2010 Professional

非官方 OpenGL SDK： http: [//glsdk.sourceforge.net/docs/html/index.html](http://glsdk.sourceforge.net/docs/html/index.html)

非官方的 OpenGL SDK、GLew 和 GLee 都是最新的，在适当的地方有匹配的驱动程序、库和头文件

设置：

```
Preprocessor either over the entire project OR over the main.c file: GLEW_STATIC

Additional Include Directories:
C:/glsdk_0.4.2/glload/include;C:/glsdk_0.4.2/glimg/include;C:/glsdk_0.4.2/glutil/include;C:/glsdk_0.4.2/glmesh/include;C:/glsdk_0.4.2/glm;C:/glsdk_0.4.2/glfw/include;C:/glsdk_0.4.2/freeglut/include;

Additional Library Directories:
C:/glsdk_0.4.2/glload/lib;C:/glsdk_0.4.2/glimg/lib;C:/glsdk_0.4.2/glutil/lib;C:/glsdk_0.4.2/glmesh/lib;C:/glsdk_0.4.2/glfw/library;C:/glsdk_0.4.2/freeglut/lib;

Also tried adding C:/Program Files (x86)/Microsoft SDKs/Windows/v7.0A/Lib/glew32s.lib (or glew32, glew32mx & glew32mxs);C:/Program Files (x86)/Microsoft SDKs/Windows/v7.0A/Lib/OpenGL32.lib; in Linker -> Input -> Additional Dependancies

Path Inputs (Changed through Environment Variables. Excluding irrelevant entries):
C:\glsdk_0.4.2\glutil\lib;C:\glsdk_0.4.2\freeglut\lib;C:\glsdk_0.4.2\glfw\library;C:\glsdk_0.4.2\glload\lib;C:\glsdk_0.4.2\glimg\lib;

GLew & GLee lib files are located in:
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib
Also tried with them located at:
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib

GLew & GLee header files are located in:
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\GL
Also tried with them located at:
C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include\GL 
```

从“OpenGL Distilled”复制的代码（标题除外），ISBN10 - 0-321-33679-8：

```
 #include <stdio.h>
    #include <math.h>

    // Uncomment for GLee ( Also comment out glutInit(&argc, argv); )
    //#include <GL\GLee.h>

    // Uncomment for GLew
    /*#include <GL\glew.h>
    #include <GL\wglew.h>
    #include <GL\glut.h>
    #include <GL\glext.h> */

    // Uncomment for all headers in the "Unofficial OpenGL SDK"
    /*#include <glload\gl_all.h>
    #include <GL\glut.h>
    #include <glload\gll.h>
    #include <glimg\glimg.h>
    #include <glutil\glutil.h>
    #include <glmesh\glmesh.h>
    #include <GL\glfw.h>
    #define FREEGLUT_STATIC
    #define _LIB
    #define FREEGLUT_LIB_PRAGMAS 0
    #include <GL\freeglut.h> */

    int main(int argc, char* argv[])
    {
        glutInit(&argc, argv);

        // Obtain a buffer identifier from OpenGL
        GLuint bufferID = 0;
        glGenBuffers( 1, &bufferID );

        // Bind the buffer object, OpenGL initially creates it empty.
        glBindBuffer( GL_ARRAY_BUFFER, bufferID );

        // Define three vertices to draw a right angle triangle.
        const GLfloat vertices[] = [
            0.f, 0.f, 0.f,
            1.f, 0.f, 0.f,
            0.f, 1.f, 0.f };

        // Tell OpenGL to copy data from the 'vertices' pointer into
        // the buffer object
        glBufferData(GL_ARRAY_BUFFER, 3*3*sizeof(GLfloat), vertices, GL_STATIC_DRAW );
        return 0;
    } 
```

错误：

```
With GLee:
1>gl_crap3.obj : error LNK2001: unresolved external symbol _GLeeFuncPtr_glBufferData
1>gl_crap3.obj : error LNK2001: unresolved external symbol _GLeeFuncPtr_glBindBuffer
1>gl_crap3.obj : error LNK2001: unresolved external symbol _GLeeFuncPtr_glGenBuffers

With the Unofficial OpenGL SDK:
1>gl_crap3.obj : error LNK2001: unresolved external symbol ___gleBufferData
1>gl_crap3.obj : error LNK2001: unresolved external symbol ___gleBindBuffer
1>gl_crap3.obj : error LNK2001: unresolved external symbol ___gleGenBuffers

With GLew:
1>gl_crap3.obj : error LNK2001: unresolved external symbol ___glewBufferData
1>gl_crap3.obj : error LNK2001: unresolved external symbol ___glewBindBuffer
1>gl_crap3.obj : error LNK2001: unresolved external symbol ___glewGenBuffers 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:39:51.657

对于 SDK，您的 Visual Studio 项目应具有以下设置（`sdkbase`您解压缩和编译 SDK 的目录的路径在哪里）。

`C/C++->General->Additional Include Directories`：

```
sdkbase\glload\include;sdkbase\glimg\include;sdkbase\glutil\include;sdkbase\glmesh\include;sdkbase\glm;sdkbase\freeglut\include;sdkbase\glfw\include 
```

`Linker->General->Additional Library Directories`：

```
sdkbase\glload\lib;sdkbase\glimg\lib;sdkbase\glutil\lib;sdkbase\glmesh\lib;sdkbase\freeglut\lib;sdkbase\glfw\library 
```

`Linker->Input/Additional Dependencies`, 对于调试版本：

```
glloadD.lib glimgD.lib glutilD.lib glmeshD.lib freeglutD.lib glfwD.lib glu32.lib opengl32.lib gdi32.lib winmm.lib user32.lib 
```

对于发布版本：

```
glload.lib glimg.lib glutil.lib glmesh.lib freeglut.lib glfw.lib glu32.lib opengl32.lib gdi32.lib winmm.lib user32.lib 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:07:07.917

对于不使用非官方 OpenGL SDK 的人，我刚刚遇到了这个问题，感谢 Nicol Bolas 的回答，我意识到我需要 GLEW 的调试库。

对于 Visual Studio，我通过将`glew32.lib`项目的调试配置 - at `linker->input/Additional Dependencies`- 替换为`glew32s.lib`（注意**`s`**末尾的）来解决此问题。

在我这样做之后，一切正常。

* * *

**笔记**

虽然您可以在没有此修复的情况下初始化 GLEW 并使用**GLEW 特定功能**，但一旦您开始调用 OpenGL，您可能会在使用调试符号构建时遇到错误。

# objective-c - 如何在知道其名称和标签的情况下修改按钮的属性？（目标 c）

> ID：11768772
> 
> 赞同：0
> 
> 时间：2012-08-01T22:58:03.243
> 
> 标签：objective-c, xcode, button, properties, tags

知道按钮的名称和标签来修改按钮（以编程方式创建）的属性的代码是什么。（创建的按钮数量并不总是相同，这就是我为创建的按钮分配标签的原因）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:17:11.010

你可以使用`viewWithTag:`

```
UIButton *btn = (UIButton*)[self.view viewWithTag:1];
//then change the properties
[btn setTitle:@"Press Me" forState:UIControlState];
//etc etc 
```

这样做的好处是，如果您有多个具有相同更改的按钮，您可以轻松地循环浏览不同的按钮

```
for (int i=0; i<numberOfButtons; i++) {
     UIButton *btn = (UIButton*)[self.view viewWithTag:i+1];
     [btn setTitle:@"Press Me" forState:UIControlState];
     //etc etc
} 
```

这假设您的标签从 1 开始并递增。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:02:36.100

您真正需要识别按钮的只是它的标签。代码看起来像：

```
if (button.tag == 2) {
    button.titleLabel.text = @"New text";
    button.enabled = NO;
    // etc...
} 
```

只需将其放入您想要更改按钮的任何功能中。

# windows-runtime - Metro App mailto 协议不接受 HTML？

> ID：11768773
> 
> 赞同：0
> 
> 时间：2012-08-01T22:58:09.620
> 
> 标签：windows-runtime, windows-store-apps, mailto

我正在尝试制作一个涉及用户向朋友发送邀请电子邮件的 Metro 应用程序。为此，我使用了 mailto:// 协议。但是，如果我尝试在正文部分包含 HTML 标记，邮件应用程序会逐字读取它们并向用户显示原始 HTML。有没有办法解决这个问题？

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:01:36.333

我目前正在寻找类似问题的答案，只是在我的情况下，我还想在电子邮件正文中嵌入图像。我没有深入研究代码，但似乎邮件应用程序无法处理将附加文件附加到 html 正文所需的所有协议。不过，对于简单的情况 - 您应该能够共享您的 html 作为共享源并调用共享魅力。您并没有限制用户将其他应用程序用作您的 html 的共享目标，并且您可能无法定义主题或收件人，但这是我能找到的最好的。

您可以在此处查看示例：“[共享内容源应用示例](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84)”。

# c# - 如何找到计算机所属的组织单位？（活动目录 C#）

> ID：11768775
> 
> 赞同：8
> 
> 时间：2012-08-01T22:58:25.353
> 
> 标签：c#, active-directory, ou, directorysearcher

我想在 C# 中找到我的计算机所属的最具体的 OU。我的代码可以获取我需要的信息，但感觉不够健壮，需要复杂的解析。有更好的选择吗？想法？任何帮助表示赞赏！

我真正想要的是命令提示符命令的等价物：

```
dsquery computer -name COMP-HERE 
```

但是我在 C# 中需要它，这被证明是有问题的。

```
DirectorySearcher d = new DirectorySearcher("CN=COMP-HERE");
d.PropertiesToLoad.Add("adspath");
SearchResultCollection results = d.FindAll();
foreach (SearchResult searchResult in results) {
    foreach (string propertyKey in searchResult.Properties.PropertyNames) {
        ResultPropertyValueCollection valueCollection = searchResult.Properties[propertyKey];
        foreach (Object propertyValue in valueCollection) {
            Console.WriteLine(
            "{0}:{1}",
            propertyKey,
            propertyValue.ToString());
        }
    }
}
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:20:01.807

这是在命名空间中使用`PrincipalContext`and的解决方案`ComputerPrincipal``System.DirectoryServices.AccountManagement`

```
string machineOU;
using (var context = new PrincipalContext(ContextType.Domain))
using (var comp = ComputerPrincipal.FindByIdentity(context, Environment.MachineName))
{
    machineOU = String.Join(",", comp.DistinguishedName.Split(',')
                                                       .SkipWhile(s => !s.StartsWith("OU="))
                                                       .ToArray());
} 
```

机器的专有名称的 Linq 处理将其拆分为它的组件元素，跳过第一个元素之前的任何元素`OU=...`，然后重新组合其余部分。留下包含 OU 的专有名称。

**更多信息**

命名空间中的类`System.DirectoryServices.AccountManagement`为各种类型的安全主体（帐户）提供了相当高级的抽象。

`PrincipalContext`基本上是帐户存储库的抽象。它可以引用计算机的帐户数据库 ( `PrincipalType.Machine`)、Active Directory 域或全局目录 ( `PrincipalType.Domain`) 或 Active Directory 应用程序分区 ( `PrincipalType.ApplicationDirectory`)。

`new PrincipalContext(ContextType.Domain)`创建一个`PrincipalContext`表示本地 Active Directory 域。

一旦我们有了这个上下文，我们就可以使用`FindBy...()`各种主体类型（可以是`UserPrincipal`，`ComputerPrincipal`或`GroupPrincipal`）的静态方法来找到我们正在寻找的 AD 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:07:57.403

我在谷歌上做了一个简单的搜索，发现了很多这方面的信息。我认为您的方向很好，也许可以将您的代码与这些链接进行比较：

[如何在 Active Directory](http://bytes.com/topic/c-sharp/answers/606403-how-get-list-organizational-unit-active-directory) 或此处获取[堆栈溢出的组织单位列表](https://stackoverflow.com/questions/5347096/how-can-i-get-a-list-of-organizational-units-from-active-directory)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:51:31.443

这对我有用

```
IEnumerable<string> machineOU;
using (var context = new PrincipalContext(ContextType.Domain))
using (var comp = ComputerPrincipal.FindByIdentity(context, Environment.MachineName))
{
  machineOU = comp.DistinguishedName.Split(',').Where(s => s.StartsWith("OU="));
} 
```

# java - 使用 Java 线程和 jQuery 禁用 HTML 按钮

> ID：11768777
> 
> 赞同：-1
> 
> 时间：2012-08-01T22:58:32.047
> 
> 标签：java, jquery, html, multithreading

我有一个带有提交按钮和 jQuery 的表单，我想通过使用 jQuery 和 java 线程禁用提交按钮来防止用户双击提交按钮。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:05:07.653

提交表单后，您可以使用 jQuery 禁用提交按钮：

```
$("form").on(
    "submit",
    function ()
    {
        // disables <input type="submit" /> and <button type="submit"></button>
        $(this).find("[type='submit']").prop("disabled", true);
    }
); 
```

您可能必须调整 jQuery 调用的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:03:32.583

abu taha9,

```
<input type="submit" value="submit" onclick="$(this).attr('disabled','disabled');"></button> 
```

这里的工作示例 [http://jsfiddle.net/9EecZ/](http://jsfiddle.net/9EecZ/)

# android - Android - 滚动时GridView重复最后一项

> ID：11768784
> 
> 赞同：1
> 
> 时间：2012-08-01T22:59:22.873
> 
> 标签：android, gridview, repeat

我的应用程序上有一个，在你出现在屏幕上`GridView`之前效果很好。`scroll`当您执行此操作时，向上的项目继续更改，而有下一个项目。当最后一个物品`gridview`来临时，所有物品都转换为他。（对不起我的英语不好）

我有一个项目列表`sqlite`，我`ImageAdapter`是这个（`Image + text`来自 layout.xml）

```
public class ImageAdapter extends BaseAdapter{

    private Context mContext;
    private int nSonidos;
    private Cursor sonidoscursor;
    private int sonidoactual;

    public ImageAdapter(Context c){
        mContext = c;
        sonidoscursor = dbr.rawQuery(" SELECT id FROM sonidos order by nombre", null);
        if(sonidoscursor.getCount()>0){
            nSonidos = sonidoscursor.getCount();
        }else{
            nSonidos = 0;
        }
        if (sonidoscursor.moveToFirst()) {
            sonidoactual = sonidoscursor.getInt(0);
            sonidoscursor.moveToNext();
        }

    }

    @Override
    public int getCount() {return nSonidos;}

    @Override
    public Object getItem(int arg0) {return null;}

    @Override
    public long getItemId(int arg0) {return 0;}

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v;
        if(convertView==null){
            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.icon, null);

        }else{
            v = convertView;
        }
        TextView tv = (TextView)v.findViewById(R.id.icon_text);
            tv.setText(getNombre(sonidoactual, "sonidos"));
            try{
                sonidoactual = sonidoscursor.getInt(0);
                sonidoscursor.moveToNext();
            }catch(CursorIndexOutOfBoundsException e){
                e.printStackTrace();
            }

            ImageView iv = (ImageView)v.findViewById(R.id.icon_image);
            iv.setImageResource(R.drawable.ic_launcher);
        return v;
    }
} 
```

对于桌子上的每个项目，我都有一个`getView`项目，但问题是当我滚动它时。我阅读了更多 5 个问题，但没有一个对我有用。:S

我的 get nombre 方法：

```
public String getNombre(int indice, String tipo){
    Cursor c = dbr.rawQuery(" SELECT nombre FROM "+tipo+" WHERE id="+indice, null);
    String nombre = "";
    if (c.moveToFirst()) {
        nombre=c.getString(0);
    }
    return nombre;  
} 
```

`Gridview`很简单：

```
<GridView
    android:id="@+id/gridtodos"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:horizontalSpacing="10sp"
    android:numColumns="3"
    android:verticalSpacing="10sp" >    
</GridView> 
```

我真的需要一些帮助，我尝试了很多选择，但一无所获。谢谢 ：）

# javascript - 调整背景图像大小的替代方法

> ID：11768786
> 
> 赞同：4
> 
> 时间：2012-08-01T22:59:47.710
> 
> 标签：javascript, html, css, image

我正在创建一个具有这种结构的网站：

其中红色框代表用户的浏览器窗口。当用户单击主页（底部）上的按钮时，它会向上滑动到新场景（例如平流层）。每个场景都是一个完整的图像。现在的问题是，我需要考虑使用不同屏幕尺寸的用户以及他们何时调整窗口大小。我已经查找了使用 CSS 或 JavaScript 调整背景图像大小的方法，但这对我来说效果不佳。我需要找到一些方法让它们都适合使用不同屏幕尺寸的每个人。我有一个想法-我知道这听起来很笨拙，但是编写一个将图像大小调整为 JS 给出的尺寸的 PHP 脚本是否可行？JS 找到浏览器窗口的大小，交给 PHP，PHP 返回 JS 需要的图像。当用户调整浏览器窗口大小时也会发生这种情况......

我怎样才能做到这一点？

更新：

我尝试了 SVG，它运行良好。但现在我想知道如何让其他元素符合 SVG？

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>untitled</title>
    <meta name="generator" content="TextMate http://macromates.com/">
    <!-- Date: 2012-08-01 -->
    <style type="text/css" media="screen">

     body { margin: 0px; }
     .area { border: 3px solid red; background: green; margin-bottom: 0px; background: url(http://www.alistapart.com/d/using-svg-for-flexible-scalable-and-fun-backgrounds-part-ii/beetle.svg) no-repeat; }

    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8">
     $(document).ready(function() {

       function scroll_to(id, speed, margin) {
         $('html, body').animate({
           scrollTop: $('#' + id).offset().top - margin
         }, speed);
       }

      var slide = 'a3'

       $(".area").height($(window).height());

       $(window).resize(function() {
         $(".area").height($(window).height());
         $(".area").width($(window).width());
         scroll_to(slide, 1, 0);
       }); 

       scroll_to('a2', 'slow', 0);

     });
    </script>
</head>
<body>

  <div class="area" id="a3">
    <h1>scene 3</h1>
  </div>
  <div class="area" id="a2">
    <h1>scene 2</h1>
    <div style="height: 100px; border: 1px solid black;" id="text">
     hi 
    </div>
  </div>
  <div class="area" id="a1">
    <h1>scene 1</h1>
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:35:21.170

为什么不使用 SVG 作为背景图像？你的场景看起来很简单。

除 IE ≤ 8 以外的所有浏览器都可以理解`background: url(some.svg)`：[http ://caniuse.com/svg-css](http://caniuse.com/svg-css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:10:45.880

使用一个大`background-image`的 . 用这样的东西设置它：

```
html, body {
    margin: 0;
    padding: 0;
    width: 100%
}
body {
    position: absolute;
    bottom: 0;
    height: 2000px;
    background-image: url('background.png')
} 
```

然后使用 JavaScript 将 的`bottom`属性设置为`body`上移，如下所示：

```
window.addEventListener('keydown', keypressed, false);
function keypressed(e) {
    if(String.fromCharCode(e.charCode) == ' ') {
            document.body.style.bottom += parseInt(document.body.style.bottom) + 10 + 'px';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:08:55.643

恐怕重新调整背景图像的大小将是您最好的选择。您为什么不发布您已经为此类解决方案尝试过的代码，其他人可以从这个角度为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:25:44.030

您绝对应该将图像拆分为多个图像，每个选项卡一个。

我会这样做：http: [//jsfiddle.net/4CwdX/3/](http://jsfiddle.net/4CwdX/3/)

您无需调整图像大小。浏览器可以自动为您拉伸它`background-size: 100%`。

# java - 需要使十六进制 0xff****** 字符串更暗（* = 任何十六进制字符）

> ID：11768788
> 
> 赞同：0
> 
> 时间：2012-08-01T23:00:01.623
> 
> 标签：java, colors, rgb

我正在尝试获取用户输入的十六进制整数并使其变暗。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:26:22.033

只需进行二进制减法：

```
int red = 0xff0000;
int darkerRed = (0xff0000 - 0x110000);
int programmaticallyDarkerRed; 
```

您甚至可以使用循环使其更暗：

```
for(int i = 1; i < 15; i++)
{
    programmaticallyDarkerRed = (0xff0000 - (i * 0x110000));
} 
```

它越接近`0x000000`或变黑，它就会越暗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:22:58.053

我会用[`Color.darker`](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#darker%28%29).

`Color c = Color.decode(hex).darker();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:10:37.850

您可以将十六进制值转换为 a`Color`然后使`Color`对象变暗

```
// Convert the hex to an color (or use what ever method you want)
Color color = Color.decode(hex);

// The fraction of darkness you want to apply
float fraction = 0.1f;

// Break the color up
int red = color.getRed();
int blue = color.getBlue();
int green = color.getGreen();
int alpha = color.getAlpha();

// Convert to hsb
float[] hsb = Color.RGBtoHSB(red, green, blue, null);
// Decrease the brightness
hsb[2] = Math.min(1f, hsb[2] * (1f - fraction));
// Re-assemble the color
Color hSBColor = Color.getHSBColor(hsb[0], hsb[1], hsb[2]);

// If you need it, you will need to reapply the alpha your self 
```

**更新**

要将其恢复为十六进制，您可以尝试类似

```
int r = color.getRed();
int g = color.getGreen();
int b = color.getBlue();

String rHex = Integer.toString(r, 16);
String gHex = Integer.toString(g, 16);
String bHex = Integer.toString(b, 16);

String hexValue = (rHex.length() == 2 ? "" + rHex : "0" + rHex)
                + (gHex.length() == 2 ? "" + gHex : "0" + gHex)
                + (bHex.length() == 2 ? "" + bHex : "0" + bHex);

int intValue = Integer.parseInt(hex, 16); 
```

现在，如果那不太正确，我会看看是否有任何 SO 或 Google 的答案

# css - 强制浮动元素在屏幕外运行

> ID：11768808
> 
> 赞同：1
> 
> 时间：2012-08-01T23:02:20.440
> 
> 标签：css

我在一个 DIV 中浮动了元素，它包裹到下一行。而不是包装，我希望这些元素简单地跑出屏幕。我试过使用`white-space:nowrap`没有成功。

**CSS**

```
img {
    float: left;
}
div {
    overflow: hidden;
} 
```

**HTML**

```
<body>
    <div>
        <img ... >
        <img ... >
        <img ... >
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:07:27.083

使用这个 CSS：

```
img
{
    float: left;
}
div
{
    width: 300%;
}
body
{
    overflow: hidden;
} 
```

# php - 散列函数的随机性，例如 SHA1

> ID：11768809
> 
> 赞同：2
> 
> 时间：2012-08-01T23:02:25.503
> 
> 标签：php, random, sha

我正在尝试根据用户 ID 生成随机数的均匀分布。也就是说，我希望每个用户的随机数在用户请求随机数时保持不变（但用户不需要存储该数字）。对于给定的大量用户 ID，我当前的算法（在 PHP 中）计算分布`$arr`是：

```
$range = 100;
$results = array_fill(0, $range, 0);

foreach ($arr as $userID) {
    $hash = sha1($userID,TRUE);
    $data = unpack('L*', $hash);
    $seed = 0;
    foreach ($data as $integer) {
        $seed ^= $integer;
    }
    srand($seed);
    ++$results[rand(0, $range-1)];
} 
```

人们希望这会产生近似均匀的分布。但事实并非如此！我已经检查以确保其中的每个值`$arr`都是唯一的，但列表中的一个条目总是比其他所有条目获得更多的活动。有没有更好的方法来生成一个字符串的哈希值，它会给出一个近似均匀的分布？显然 SHA 不能胜任这项工作。我也试过 MD5 和一个简单的 crc32，结果都一样！？

我疯了吗？实际上，我没有验证的唯一解释是每个条目`$arr`都是唯一的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:52:10.433

sha1 哈希数分布非常均匀。执行此操作后：

```
<?php

$n = '';
$salt = 'this is the salt';

for ($i=0; $i<100000; $i++) {
    $n .= implode('', unpack('L*', sha1($i . $salt)));
}   

$count = count_chars($n, 1);
$sum = array_sum($count);

foreach ($count as $k => $v) {
    echo chr($k)." => ".($v/$sum)."\n";
} 

?> 
```

你得到这个结果。每个数字的概率：

```
0 => 0.083696057956298
1 => 0.12138983759522
2 => 0.094558704004335
3 => 0.07301783188663
4 => 0.092124978934097
5 => 0.088623772577848
6 => 0.11390989553446
7 => 0.092570936094051
8 => 0.12348330833868
9 => 0.11662467707838 
```

您可以使用 sha1 作为基于用户 ID 的简单随机数生成器。

在十六进制中，分布接近完美：

```
//  $n .= sha1($i . $salt, false);

0 => 0.06245515
1 => 0.06245665
2 => 0.06258855
3 => 0.0624244
4 => 0.06247255
5 => 0.0625422
6 => 0.0625246
7 => 0.0624716
8 => 0.06257355
9 => 0.0625005
a => 0.0625068
b => 0.0625086
c => 0.0624463
d => 0.06250535
e => 0.06250895
f => 0.06251425 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:39:01.480

`mt_rand()`在请求的范围内应该有一个非常均匀的分布。创建用户时，为该用户创建一个随机种子，`mt_rand()`然后始终为该用户使用`mt_srand()`该种子。

要获得从 0 到 99 的均匀分布，例如，只需`mt_rand(0,$range-1)`. 使用 sha1、md5 或其他一些散列算法进行技巧不会真正为您提供比直接随机更均匀的分布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T00:38:32.427

如果您发布的结果导致您得出结论认为您没有获得适当的分布，那将会很有帮助，但这里可能发生了以下三件事之一：

1.  您只是在查看太小的样本，和/或您错误地解释了您的数据。正如其他人所评论的那样，均匀分布没有完全均匀的输出是完全合理的。

2.  如果您使用[`mt_rand`](http://www.php.net/manual/en/function.mt-rand.php)而不是`rand`.

3.  （我个人认为这是最有可能的）你过度优化你的种子生成，并且丢失数据/鸽子洞/否则会损害你生成随机数的能力。阅读您的代码，我认为您正在执行以下操作：

    1.  生成未知值的统一随机散列
    2.  将散列拆分为长整数并将它们按位异或在一起
    3.  设置`rand`的种子，并从该种子中生成一个随机数

    但你为什么要做第 2 步？你认为你从中得到了什么好处？尝试走出这一步，只使用从哈希中提取的第一个值作为种子，看看这是否不会给你带来更好的结果。具有随机性的良好经验法则 - 不要试图智取实现算法的人，这是无法做到的 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T14:16:04.687

虽然这里的所有答案都很好，但我会提供对我来说正确的答案，那就是我确实是疯了。显然，该`uniq`命令实际上并没有像我预期的那样工作（需要首先对数据进行排序）。所以解释确实是其中的值`$arr`不是唯一的。

# visual-studio-2010 - VS2010中控制台项目命令行参数中的项目路径或其他宏

> ID：11768812
> 
> 赞同：9
> 
> 时间：2012-08-01T23:02:36.613
> 
> 标签：visual-studio-2010, console-application, projects-and-solutions

VS2010 中控制台应用程序的项目属性的调试选项卡允许我设置命令行参数以在调试时传递给项目。

我想设置一个路径参数，该路径特定于每个开发人员/机器，因为它是位于解决方案文件夹中的路径并且每个环境都不同。

对于构建前和构建后的事件，我可以使用诸如 之类的宏`$(ProjectDir)`，但我找不到对命令行参数执行此操作的方法 - 有没有办法？只要不是太糟糕，黑客就可以了！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:31:44.783

我还没有找到`$(ProjectDir)`在命令行参数中使用的方法，但是您可以通过以下方式访问项目中包含的文件：

*   通过更改其“复制到输出目录”属性，告诉 Visual Studio 将特定文件复制到输出目录。
*   将命令行参数从 更改`$(ProjectDir)/FileNeededDuringRuntime`为`FileNeededDuringRuntime`。

这更像是一种 hack，因为它可能不涵盖使用变量的所有情况，但如果您只是引用几个文件，它可能会让您通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T13:09:06.220

宏可用于 C++ 项目的命令行参数，请参阅：

[如何在命令行参数中将解决方案文件夹作为参数传递（用于调试）？](https://stackoverflow.com/questions/2544199/how-to-pass-solution-folder-as-parameter-in-command-line-arguments-for-debug)

您可以有一个空的 C++ 项目“设置为启动项目”并将其“配置属性 -> 调试 -> 命令”从“$(TargetPath)”（新项目的默认值）更改为“$(ProjectDir)..\OtherProjectRelativeDebugFolder\其他项目输出文件名.exe”。

由于 OtherProjectRelativeDebugFolder 和 OtherProjectsOutputFileName 是相对的，因此与位置无关，您应该可以接受。

你说：

> 只要不是太糟糕，黑客就可以了！

产生空 dll 的空项目（除非您找到阻止它的方法，例如在构建后删除）是否太糟糕了？

顺便提一句。C# 的“调试-> 命令行参数”中也没有解析环境变量。我将尝试设置一个环境变量，传递它的名称（因为它没有被解析）并在程序中读取它。传递名称旨在显示环境变量的来源，即项目设置。

**编辑：** 我希望找到一种方法将环境变量设置为宏的值，例如在构建事件中。一个简单的 shell“设置”命令不是持久的，所以它没有成功。相反，我能够使用相对路径作为工作文件夹来为我工作。我还找到了一种使用文件进行持久存储的解决方法： [VS2010 - Project Macro Variables in Start Options Command Line Arguments](https://stackoverflow.com/questions/4046575/vs2010-project-macro-variables-in-start-options-command-line-arguments?rq=1)

# php - ajax 不保留 PHP 会话变量

> ID：11768816
> 
> 赞同：14
> 
> 时间：2012-08-01T23:03:01.383
> 
> 标签：php, ajax, session-variables

我有一个使用 AJAX 加载新 php 文件并更新显示的单页网站。

我在主页上启动我的 php 会话，但是当我使用 ajax 更新内部 html 时，我需要这些会话变量来加载新的 php 文件。

这篇文章与这篇文章类似：[PHP Session Variables Not Preserved](https://stackoverflow.com/q/663442/933756)。但我检查了一下，我的 php.ini 有`session.use_cookies = 1`

主页 PHP：

```
<?php 
session_start();
if(isset($_SESSION['views']))
{$_SESSION['views']=$_SESSION['views']+1;}
else
{$_SESSION['views']=1;}
?> 
```

用户输入后，我使用 ajax 调用 php 文件并加载页面的一个子部分：

```
<?php    
if(isset($_SESSION['views']))
    { echo "Views: " . $_SESSION['views'];} 
    else 
    { echo "Views: NOT SET";}
?> 
```

有人可以告诉我我错过了什么重要的步骤吗？谢谢你。

**更新：**将 session_id() 调用添加到主页面和子页面后，我看到两个页面都具有相同的 Session_ID。但是，它仍然无法提取会话变量，如果我确实为它分配了一个值，那么两个同名的会话变量将保持相互独立。

**回答这个问题产生的问题：** 我发现我必须在我的 php.ini 文件中设置一个静态 session_save 路径。对于大多数付费虚拟主机服务，它们只有一个默认的会话容器，但它会受到负载平衡的影响。多么放松。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-01T23:06:18.763

我认为您在`session_start()`Ajax 调用的页面上丢失了。

你需要：

```
<?php
session_start();
if(isset($_SESSION['views']))
    { echo "Views: " . $_SESSION['views'];} 
    else 
    { echo "Views: NOT SET";}
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T23:06:58.303

您还需要`session_start()`在另一个 PHP 文件中启动会话，即您通过 AJAX 调用的那个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-05T23:14:31.970

我今天在 IIS Server 2012 上运行 PHP 7 时遇到了我认为相同的问题。

我补充说：

```
if(!isset($_SESSION)) 
{ 
    session_start(); 
} 
```

到每个 AJAX 文件的开头，但不断收到以下 PHP 通知：

```
PHP Notice: A session had already been started - ignoring session_start() 
```

一些搜索使我找到了这个线程，它为我指出了解决我遇到的问题的正确方向。希望以下信息将帮助其他遇到相同问题的人。

在检查 session.save_path 值设置后，在我的情况下是 C:\Windows\Temp，我认为最好检查文件夹权限是否与我运行 IIS 的用户帐户的权限相匹配。

在我的例子中，我为会话存储指定的目录（在 php.ini 中）没有分配给它与运行 IIS 站点的用户（安全权限）相同的用户（安全权限）。

有趣的是，在我添加新用户权限之前不使用 AJAX 请求时会话工作正常。但是，直到我纠正了权限问题，AJAX 才开始进行会话。添加运行 IIS 的同一用户帐户可立即解决此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T17:13:59.330

在使用付费网络托管服务的情况下，默认会话保存路径会自动设置如下：

```
http://php.net/session.save-path
session.save_path = "/tmp/" 
```

您需要将根文件夹的静态路径放在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-27T06:03:00.677

在尝试通过 ajax 调用登录之前需要初始化会话。

```
session_start(); 
```

在您开始登录 ajax 调用的页面顶部进行初始化。

这样 SESSIONID 将被创建并存储在浏览器 cookie 中。并在 ajax 调用期间与请求标头一起发送，如果您对同一域执行 ajax 请求

对于连续的 ajax 调用，浏览器将使用最初创建并存储在浏览器 cookie 中的 SESSIONID，除非我们清除浏览器 cookie 或注销（或设置另一个 cookie）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-01T21:58:05.730

您正在尝试在 ajax 调用中使用应用程序中的现有会话数据。为此，请更改您调用 session_start 的方式，如下所示：

```
// With ajax calls
if (session_status()==1) {
    session_start(); 
} 
```

在对需要现有会话数据的 php 脚本进行 ajax 调用时，请在 session_status 之后使用 session_start。

[http://php.net/session_status](http://php.net/session_status)

# php - 修改WordPress登录页面的问题

> ID：11768817
> 
> 赞同：6
> 
> 时间：2012-08-01T23:03:11.407
> 
> 标签：php, jquery, wordpress

所以我正在再次修改我的登录页面......我遇到了另一个问题。这是场景......我有一个由两个组件组成的插件：一个重写登录/注册表单上的用户名字段的脚本，以及一个在注册时覆盖验证处理程序的函数。

以下是有问题的文件...

*验证器.php*

```
<?php
// Rewrite registration form
function mpm_registration_form() {
    wp_enqueue_script('login_form', plugin_dir_url(__FILE__).'js/usernamerewrite.js', array('jquery'), false, false);
}
add_action('login_head', 'mpm_registration_form');

// Register actions
add_action('register_post', 'mpm_validator_verify_account', 10, 3);

// Check username against minecraft.net database
function mpm_validator_verify_account($login, $email, $errors) {
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_URL, 'http://www.minecraft.net/haspaid.jsp?user='.rawurlencode($login));
    $mcacct = curl_exec($curl);
    curl_close($curl);

    if($mcacct != 'true') {
        if($mcacct == 'false') {
            $errors->add('mc_error', __('<strong>Error:</strong> Minecraft account is invalid.'));
            return $errors;
        } else {
            $errors->add('mc_error', __('<strong>Error:</strong> Unable to contact minecraft.net.'));
            return $errors;
        }
        add_filter('registration_errors', 'mpm_validator_verify_account', 10, 3);
    }
} 
```

*js/用户名rewrite.js*

```
jQuery(document).ready(function ($) {
    'use strict';
    /*global document: false */
    /*global $, jQuery */
    var username, reset;
    if ($('body').hasClass('login')) {
        username = document.createElement("input");
        username.type = 'text';
        username.name = 'log';
        username.id = 'user_login';
        username.className = 'input';
        username.size = '20';
        username.tabIndex = '10';
        reset = document.createElement("input");
        reset.type = 'text';
        reset.name = 'user_login';
        reset.id = 'user_login';
        reset.className = 'input';
        reset.size = '20';
        reset.tabIndex = '10';
        $('label').each(
            function () {
                if ($(this).text().trim() === 'Username') {
                    $(this).html('Minecraft Username<br/>');
                    $(this).append(username);
                } else if ($(this).text().trim() === 'Username or E-mail:') {
                    $(this).html('Minecraft Username or E-mail:<br/>');
                    $(this).append(reset);
                }
            }
        );
    }
}); 
```

问题是，如果我按当前的方式编写 wp_enqueue_script 行（脚本加载到标题中），则操作函数会得到正确处理，但重写永远不会发生。相反，如果我将其更改为将脚本加载到页脚中，则会发生重写，但不再正确处理该操作（用户名字段在提交之前被重置）。我完全不知所措。

第二个（次要）烦恼：页面加载和重写发生之间总是有轻微的延迟。任何关于如何使其更加透明的想法将不胜感激。

编辑：如果你要否决这个问题，你至少可以说明为什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T20:49:48.167

终于想通了！我这样做的方式太可怕了……我真的需要重新学习我的 JS/jQuery。这就是我最终得到的结果，它在我所有的测试用例中都能很好地工作，并且不仅重写了字段标签，还重写了消息......

```
jQuery(document).ready(function ($) {
'use strict';
/*global document: false */
/*global $, jQuery */
    $('label').each(
        function () {
            $(this).html($(this).html().replace('Username', 'Minecraft Username'));
        }
    );
    $('.message').each(
        function () {
            $(this).html($(this).html().replace('username', 'Minecraft username'));
        }
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:39:48.357

您能否将您的功能包装在：

```
jQuery( document ).ready
(
   function( $ )
   {
        // your js here
   }
); 
```

无需将 (jQuery) 放在您的函数后面。

如果在页面加载之前运行 DOM 修改，它就无法工作。您现在可以将其加载到标题中并放心它会触发。

我不太明白为什么在提交之前会重置字段，因为您没有绑定到任何提交事件处理程序......如果仍然发生这种情况，请告诉我们。

如果您在登录页面上，而不是调用`if ($('body').hasClass('login'))`您的 js，您可能想要签入 php（使用 login_head 操作）并且不将此 js 发送到您网站上的所有页面。但是在优化之前先让它工作。

如果提交没有到达后端，那可能是因为您的 javascript 使用与 wordpress 输入相同的 ID 重新创建输入，从而替换它们。据我所知，这根本不是你所追求的。只需替换现有标签即可。

# javascript - 当我动态更改底部属性时，元素不会锚定到屏幕底部

> ID：11768819
> 
> 赞同：0
> 
> 时间：2012-08-01T23:03:13.367
> 
> 标签：javascript, css, anchor

我正在尝试编写一个 javascript 脚本，在必要时将元素动态锚定到页面底部。这是我的代码示例：

```
thebox.style.right = (window.innerWidth - topleft.Left - abs.Left - thebox.offsetWidth)+'px'
thebox.style.left = ''
thebox.style.top = (topleft.Top - abs.Top)+'px'
thebox.style.bottom = '' 
```

当我想将元素锚定到页面的顶部和右侧时，将调用此代码。其他锚点位置调用其他代码。

问题是，如果元素最初锚定在页面的右侧，它只会锚定在页面的右侧。当我将最初锚定在右侧的东西动态地锚定到左侧时，它会正确地锚定到左侧。当我将它锚回到右侧时，它正确地锚定在右侧。但是，如果它从未锚定在右侧，那么无论我做什么，它都不会锚定在右侧。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:08:26.910

尝试使用这个我不确定这是否是解决方案，但它可能值得一试。

```
//anchoring left 
thebox.style.left= '0';
thebox.style.right= 'auto';

//anchoring right
thebox.style.left= 'auto';
thebox.style.right= '0'; 
```

希望它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:14:05.540

如果我理解正确，您不需要 JavaScript 来定位元素。如果您在`body`水平和绝对位置添加元素，则只需 CSS 即可实现。然后要更改任何元素的位置，只需在 JS 中动态分配适当的类。

**演示：http:** [//jsfiddle.net/elclanrs/x8CTY/](http://jsfiddle.net/elclanrs/x8CTY/)

# iphone - 给 iOS 开发者的 OSX Cocoa Book 推荐？

> ID：11768821
> 
> 赞同：1
> 
> 时间：2012-08-01T23:03:18.563
> 
> 标签：iphone, objective-c, macos

我是一位经验丰富的 iOS 开发人员，理论上我了解 iOS 和 OSX 开发之间的基本区别，但没有为 OSX 编写过一个应用程序。下周，我计划开始我的第一个 OSX 应用程序。这个周末，我有一个漫长的公路旅行......所以我希望有人可以推荐一本学习OSX / Cocoa开发的好书，考虑到我现有的知识（例如，我真的不想把“这是一个NSString ！”或其他面向目标 C 的新手的 Hello-world-esque 方法）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:07:44.930

我倾向于选择[Beginning Lion OSX Apps Development](http://www.apress.com/9781430237204)（一本来自Apress的书，因为我在iOS方面有很好的经验）。亚马逊上的评论不是最好的，但最差的评论抱怨这本书的索引很差。有 iOS 开发经验但想切换到 mac 的人（像你这样的人）给了它 4 星评价。

不过老实说，我会选择指南和 Apple 文档。如果您打算在旅途中使用 iPad，我建议您下载一些 Apple 的 iBooks 编程指南，并在旅途中阅读它们。但是，如果您想要一步一步的示例，并且需要帮助克服学习曲线，我发现 Apress 书籍是可靠的。

希望有帮助！

# android - 仅在某些设备上显示在 Google Play 搜索中的 Android 应用

> ID：11768823
> 
> 赞同：1
> 
> 时间：2012-08-01T23:03:32.853
> 
> 标签：android, google-play, android-manifest, device

我已经在 2.2、2.3 和 4.0 上测试了我的应用程序。它在所有版本上都按设计工作。当我从三星手机搜索 Google Play 商店时，免费和付费版本都显示在列表中。当我从我的平板电脑（双电源 T708）搜索时，两个应用程序都没有出现。应用程序确实出现了，所以我知道这不是连接。我查看了设备兼容性列表并没有列出 T708，但是其他应用程序如何显示？？？

下面是我的 AndroidManifest.xml。我希望有人可以帮助我对此有所了解。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SocialWriter"
    android:installLocation="auto"
    android:versionCode="10"
    android:versionName="1.1" >

    <uses-sdk android:minSdkVersion="8" 
              android:targetSdkVersion="15" />

    <supports-screens 
                  android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true" 
                  android:xlargeScreens="true" 
                  android:anyDensity="true"  />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".SocialWriterActivity"
            android:theme="@android:style/Theme.NoTitleBar">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>           
        </activity>
        <activity
            android:name=".RegisterActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>
        <activity
            android:name=".NewBookActivity"
            android:theme="@android:style/Theme.NoTitleBar" >             
        </activity>
        <activity
            android:name=".AboutAuthorActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>        
        <activity
            android:name=".SearchCirclesActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>     
        <activity
            android:name=".SearchPublicActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>                     
        <activity
            android:name=".SearchRequestActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>         
        <activity
            android:name=".SearchPublishedActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>          
        <activity
            android:name=".EditBookActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>             
        <activity
            android:name=".ViewBookActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>           
        <activity
            android:name=".EditParagraphActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>           
        <activity
            android:name=".BookForumActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>
        <activity
            android:name=".EditBookInfoActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>           
        <activity
            android:name=".ViewPagesActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>           
        <activity
            android:name=".RequestCenterActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>           
        <activity
            android:name=".AuthorBioActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>              
        <activity
            android:name=".EditAccountActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>              
        <activity
            android:name=".ReadBookActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>          
        <activity
            android:name=".TermsActivity"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity> 
        <activity
            android:name=".MyIntents"
            android:theme="@android:style/Theme.NoTitleBar" > 
        </activity>                
        <activity android:name="com.google.ads.AdActivity"
                      android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:09:54.100

您多久前发布了该应用程序？Google play 需要一段时间来更新可以使用您的应用的设备。我知道当我第一次上传我的应用程序时，google play 说总共有 0 台设备可以使用该应用程序。

# actionscript-3 - 如何在 2 个不同的类 as3 中使用相同的实例名称

> ID：11768824
> 
> 赞同：0
> 
> 时间：2012-08-01T23:03:35.787
> 
> 标签：actionscript-3, class, button, movieclip

这是代码

文档类：

```
menu.more.addEventListener(MouseEvent.CLICK, More_func)
function More_func (e:MouseEvent):void
{
    showmore.visible = true;
} 
```

menu 是文档类中影片剪辑的实例名称。more 是影片剪辑中按钮的实例名称。showmore 是另一个影片剪辑的实例名称。

我想将此代码转移到菜单类中。我只是简单地复制/粘贴。但我收到一条消息说：'访问未定义的属性显示更多。'。

所以我在问如何将外部对象（在本例中为 showmore）用于另一个影片剪辑类（在本例中为菜单）。

如果代码在文档类中，则代码可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:52:52.707

听起来你只需要去找家长展示更多。如果将此代码复制到菜单类中，则引用 showmore 会在菜单类中查找它。

您需要能够从菜单类中引用您的文档类。你可以通过几种不同的方式做到这一点：

1.  （如果 menu 和 showmore 都是显示列表中文档类的子类，而 showmore 是公共对象）您需要强制转换 parent 属性，否则会出现编译错误。

    DocumentClassName(parent).showmore.visible = false;

2.  在文档类上创建一个静态变量，您可以在文档类中使用：

    公共静态变量我：DocumentClassName；

在您的文档类构造函数中：

```
me = this; 
```

在你的菜单类More_func：

```
DocumentClassName.me.showmore.visible = false; 
```

# meteor - 客户端 Meteor.users 集合的防篡改和安全性如何？

> ID：11768830
> 
> 赞同：1
> 
> 时间：2012-08-01T23:04:22.723
> 
> 标签：meteor

如果您关闭自动发布。客户端 Meteor.users 集合的防篡改和安全性如何？

我的实验表明它是防篡改的。我已经尝试在控制台上编写客户端脚本来插入、更新和删除并获得 403 错误。

例如，您可以尝试这个，使用您的用户集合 ID 之一，然后 $push 或 $set 的东西。您也可以尝试删除和插入。

```
Meteor.users.update({_id: "72277b27-3a53-4aa3-82b7-fb096060a8dc"}, {$set: {foo:'bar'}}) 
```

或者

```
Meteor.users.insert({this:'that'}) 
```

或者

```
Meteor.users.remove({_id: "72277b27-3a53-4aa3-82b7-fb096060a8dc"}) 
```

你应该在所有这些上得到一个 403。

但它的防篡改和安全性如何？

谢谢斯蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:40:23.537

鉴于 Meteor.users 在 auth 分支上是新鲜的，而不是官方版本的一部分，我认为它可能存在错误（顺便说一下，如果你发现了，你应该报告）。

话虽如此，鉴于它是身份验证系统的一部分，它的设计目标似乎是防篡改和安全。

# javascript - Javascript 安全性：在自调用函数中存储敏感数据是否比 cookie 更安全？

> ID：11768832
> 
> 赞同：7
> 
> 时间：2012-08-01T23:04:33.557
> 
> 标签：javascript, security

我知道客户端 JavaScript 中的安全性要么不存在，要么非常困难。我知道我的服务器端代码最终应该决定它向谁提供数据或从谁那里接受数据。

就是说，以下是可以做的。“好的”我的意思是如果这是一些新流行的时尚酷网络应用程序上使用的方法。知道我不会看到“Super Cool Web App Hacked, change your passwords”，我晚上能不能睡觉？由于此实施，整个 HN 和 Reddit（或人们关心的任何其他信息来源）。

如果不安全。为什么？如何获取这些信息（用户名和密码）？

如果是安全的？你有多确定？为什么它是安全的？是什么阻止了我在我现在明显无能为力的情况下获取这些信息。

欢迎部分回答。只是寻求更好的理解。

* * *

**编辑**

我正在考虑一些人试图窃取用户凭据的情况。我的理解是 cookie 是不安全的，因为 1.）其他 javascript（通过 XSS 或其他方式）可以访问它们，并且因为 2.）它们以明文形式传递。我认为 SSL 会解决第二个问题，假设我能够防止 XSS。现在看来，cookie 现在是安全的，对吧？

我知道一些可能导致 cookie 不安全的浏览器漏洞。这就是让我问这个问题的原因。考虑到所有使 cookie 不安全的因素，这（下面的代码）是否更好？

* * *

[http://jsfiddle.net/KTastrophy/vXEjm/1/](http://jsfiddle.net/KTastrophy/vXEjm/1/)或查看下面的代码（仅在 Chrome 中测试）

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <form id="login">
            <div>
                <label for="username">Username</label>
                <input id="username" name="username" type="text" />
            </div>
            <div>
                <label for="password">Password</label>
                <input id="password" name="password" type="password" />
            </div>
            <div>
                <input id="submit" name="submit" type="submit" value="Login" />
            </div>
        </form>
    </body>
    <script type="text/javascript">
        ;(function () {
            "use strict";
            var login, user = {};
            login = document.getElementById("login");
            login.onsubmit = function (event) {
                event.preventDefault();
                user.username = document.getElementById("username").value;
                user.password = document.getElementById("password").value;

                /*
                    use the username and password here to do
                    an API request over SSL using HTTP Auth
                 */
            }
        }());
    </script>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T23:09:48.750

当您处理存储在 JavaScript 中的敏感值时，您有两个主要的安全问题：

1.  敏感值在源中可以作为纯文本查看。
2.  页面上的另一个 JS 函数可以进入对象并提取这些值（即 XSS 攻击）。

当您在单个页面上运行来自多个来源的应用程序（例如，Facebook 应用程序）时，上述第二项变得更加相关。在这些情况下，您必须采取预防措施，不要通过对命名空间使用闭包来公开敏感变量。您实际上已经这样做了：您的`user`对象在闭包内声明。这可以防止页面上的任何其他 JS 函数能够访问该`user`对象。

在您的情况下，我假设页面上除了您自己的代码之外没有任何其他代码，并且注入的可能性很小——您的代码是安全的:)

**编辑：**将用户名和密码存储在 cookie 中不安全的原因在于，它在您关闭浏览器后位于您的计算机上。如果黑客可以访问该 cookie（通过多种方式），那么您可能会遇到麻烦。您在上面所做的事情是安全的，因为在浏览器关闭后，客户端没有存储任何内容（并且在浏览器打开时，其他 JS 无法访问您存储的值）。如果您想在 cookie 中放入一些东西，最好存储某种公共/私有身份验证密钥。对此有很多讨论，这里有一篇关于该主题的详尽的“最佳实践”文章：http: [//jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T23:18:15.287

如果您存储的数据出现在源代码中，那么不会，`toString`可以使用函数的方法将函数体转换为源代码。

```
function f() {
  var cryptoKey = "ABGASDJEOTATJKASDTNM...";
}
alert(f); 
```

如果数据被关闭而不是出现在源代码中，并且函数无法`eval`在其主体中调用，那么在现代解释器上是可以的。

较旧的 Netscape 解释器进行了扩展`eval`，因此它可以用于通过`eval("nameOfLocalVariable", fnToStealFrom)`.

如果函数调用它的参数之一，那么它可以被窃取。

```
var f = (function () {
  var x = "secret";
  return function (a, b) { return a(b + x.length); };
})();
f(eval, "x//"); 
```

将窃取 EcmaScript 3 解释器和一些 EcmaScript 5 解释器的秘密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T23:24:37.887

将输入框的值保存在 javascript 值中非常好，因为自从用户输入它以来，他们显然知道它。

然而！通常不赞成在任何地方将用户密码存储为纯文本。

**编辑**

SSL 将使恶意观察者*很难*拦截和重新创建消息（如果有足够的时间，这并非不可能，但足以让大多数 Web 使用它作为安全）。暂时将单个密码存储在该页面上输入的 javascript 变量中是可以的。但是，不要**从**服务器以纯文本形式发送它，否则您会在头条新闻中醒来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:13:21.667

不，您可以并且需要做的是：

*   保护您的*数据库*。将密码存储为加盐哈希等。
*   确保*连接*。您需要使用 SSL。

在客户端 javascript 代码中可能没有安全性。用户以纯文本形式输入所有数据，因此页面中运行的每个脚本都可以访问它。因此，您需要*防止 XSS*。当然，cookie 可直接用于在您的域上运行的每个脚本，而隐藏在某些函数范围内的数据不是“全局变量”，但每个恶意脚本都可以像您自己的应用程序一样访问它。

@您的代码：是的，没有人可以`user`从外部访问该对象。但是每个人都可以访问密码输入元素，并且每个人都可以劫持浏览器对象以窥探 api 请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T00:31:06.327

正如您的示例所显示的那样，您是完全安全的。

但是，这并不能取代 cookie。在您的示例中，您将密码存储在本地代码中，但与 cookie 不同，这些值以后永远不能使用。

最好根本不存储该值，并通过 ssl 使用传统的 http 身份验证。

# macos - Mac OS X 的 Pascal IDE

> ID：11768835
> 
> 赞同：6
> 
> 时间：2012-08-01T23:04:44.897
> 
> 标签：macos, ide, pascal

我是一名初学者 Pascal 程序员，最近迁移到 Mac OS X。今天我花了很多时间为这个操作系统寻找一个好的 Pascal IDE，但一无所获。我曾经在 Windows 上使用 Geany 编写代码，它的工作原理非常棒，我也很喜欢 Geany 的编译和运行能力。

你知道任何类似 Geany 的 IDE 或者至少一个在 Mac OS X 上突出显示、编译和运行 pascal 代码的 IDE 吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:10:03.807

让我们试试**Lazarus**，Free Pascal 的集成开发环境。

[http://www.lazarus.freepascal.org/](http://www.lazarus.freepascal.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T10:03:46.420

人们将 XCode 与一组合适的模板一起使用，但 XCode 丢失了 pascal 语法高亮显示了一种方法。还有其他选择：

*   [帕斯卡角斗士](http://www.thealchemistguild.com/pascalgladiator/)
*   [轻量级 IDE](http://www.ragnemalm.se/lightweight/)

但我还是最喜欢拉撒路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T11:58:33.733

@Thiago：仅尝试 { "cmd": ["fpc", "$file"]}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T10:42:48.013

[http://freepascal.org/down/i386/macosx.var](http://freepascal.org/down/i386/macosx.var)

我最喜欢 Free Pascal，一开始我相信它是最好的，因为你没有太多花哨的 GUI 功能来分散你对初学者编程的注意力（算法、程序思维......）。

我没有尝试在 Mac 上运行它，但它应该可以工作......我已经满意地在 Linux 和 Windows 上使用了 Free Pascal。

# php - 用于 php 的 UTF-8 解码

> ID：11768839
> 
> 赞同：6
> 
> 时间：2012-08-01T23:05:08.973
> 
> 标签：php, utf-8, decoding

我正在从 Tumblr API 获取帖子，并且遇到了返回的“帖子”“正文”的编码问题。所有撇号都被看起来像“aETM”的东西所取代。

我正在尝试使用：

```
utf8_decode($string) 
```

但所做的只是用“？”替换“aETM”的出现。

有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T23:19:33.807

尝试

```
$string = mb_convert_encoding($string,'HTML-ENTITIES','utf-8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T06:48:15.803

使用[此链接转换字符串](http://php.net/manual/en/function.utf8-decode.php)

iconv("UTF-8", "CP1252", $data)

# objective-c - 当 iPhone 应用程序在向表中插入数据时或期间退出时，如何回滚 SQLite DB？

> ID：11768841
> 
> 赞同：0
> 
> 时间：2012-08-01T23:05:23.353
> 
> 标签：objective-c, ios, sqlite

我正在为我的 iPhone 应用程序使用 SQLite（没有任何外部库）。我有将近 500 行的大量数据（来自 Web 服务，因此无法从 sqlite 管理器手动插入）要插入到 SQLite 表中。我检查了日志并成功执行了插入。

```
if ( sqlite3_exec(database, [insertStatement UTF8String], NULL, NULL, &error) == SQLITE_OK) 
```

但是当应用程序在插入操作中退出时，只有一些行被插入，例如说 200。那么当应用程序在插入操作中退出时，有没有办法完全回滚？因此，当我重新启动应用程序时，我只读取了 200 行。

注意：我正在使用 NSOperationQueue，因此我的应用程序在插入过程中运行没有任何故障（整个插入需要近 20 秒）

是否有针对这种情况的参考教程以避免不完整地插入 SQLite？我知道我可能不得不为此使用事务，但是有什么好的参考吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:30:46.280

幸好我找到了出路：

```
if ([db_handle openConnectionSucess]==1 && (sqlite3_exec(database, "BEGIN", 0, 0, 0))==SQLITE_OK) {  

      char *error;

         NSString *insertStatement = [NSString stringWithFormat:@"insert into StationTbl (id, name, address) VALUES (\"%@\", \"%@\", \"%f\", \"%f\")",id,name,value];
        if ( sqlite3_exec(database, [insertStatement UTF8String], NULL, NULL, &error) == SQLITE_OK)
        {

        }
        else
        {
            NSLog(@"Error: %s", error);
        }

      if(sqlite3_exec(database, "COMMIT", 0, 0, 0) ==SQLITE_OK){

      }
      else {
          sqlite3_exec(database, "ROLLBACK", 0, 0, 0);
      }
} 
```

它解决了两个目的：

1.  插入最多在 3 秒内执行（在不使用事务的情况下相当于 25 秒）

2.  如果应用程序退出，它会自动回滚。

感谢所有在帖子中付出努力的人！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:40:15.660

您可以开始交易并结束。简单案例：

```
sqlite3_exec(database, "BEGIN", 0, 0, 0);

... (your insert code)

sqlite3_exec(database, "COMMIT", 0, 0, 0); 
```

# javascript - 如何在 Ajax 调用的元素上注册 mouserover

> ID：11768847
> 
> 赞同：0
> 
> 时间：2012-08-01T23:06:27.273
> 
> 标签：javascript, jquery

我正在尝试在用户单击按钮后生成的元素上注册 mouseover 事件。

元素是通过 ajax 生成的。mouserover 似乎不适用于 ajax 创建的元素。我想知道是否有办法解决这个问题。非常感谢。

```
jQuery.ajax({
        type: "GET", 
        url: "http://list.php", 
        data: null, 
        dataType:"json", 
              timeout: 10000,
              global: true,
              error: oh_no,
        success: 
     });

var image = document.getElementById('image');

the image path are from ajax.

function listem(){
 ......codes
 ......codes

 image.innerHTML=  image.innerHTML + "<img src="\" + imagePath + \"\>";
} 

$(document).ready(function(){   

   $('#image img').mouseover(function(){

       alert('mouseOVER!!!');

   });

})

html    

<button id='showstuff' onclick='listem();'>show</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:14:12.990

尝试使用[委托（使用`.on`方法）](http://api.jquery.com/on/)。您可以将事件处理委托给父对象：

```
 $('#image').on('click', 'img', function() {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:14:26.083

您不能将鼠标悬停应用于尚不存在的元素，因此您的准备功能仅适用于现有的#image。对 ajax 成功执行一个函数来应用侦听器，你应该会很好。

```
jQuery.ajax({
        type: "GET", 
        url: "http://list.php", 
        data: null, 
        dataType:"json", 
              timeout: 10000,
              global: true,
              error: oh_no,
        success: function(){
           $('#image img').mouseover(function(){
               alert('mouseOVER!!!');
           });
        }
     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T23:13:28.077

此外，您正在页面加载时应用侦听器，但此时对象不存在。尝试创建像“AddImageListeners()”这样的函数并在 ajax 调用的“成功”部分调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:13:58.393

而不是将鼠标悬停在选择器上，您需要使用 live、delegate 或 on，具体取决于 jQ 版本。

这意味着还应该将事件触发器添加到动态添加的内容中，例如 ajax 调用。

为此，请使用类似的东西。

```
$(document).ready(
  $("html").on("mouseover","yourselector", yourOnMouseFunction())
); 
```

祝你好运（如果您只想在某些选择器中使用实时事件，则可以用任何父选择器替换 html）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T23:16:09.013

您需要在通过 ajax 创建的元素中注入 jquery。这将通过`.live()`函数、`.on()`函数或`livequery`插件来完成。请参阅`.live()` [api.jquery.com/live](http://api.jquery.com/live/)和`livequery` [docs.jquery.com/Plugins/livequery的链接](http://docs.jquery.com/Plugins/livequery)

# java - 跨类层次结构的接口“切割”

> ID：11768861
> 
> 赞同：0
> 
> 时间：2012-08-01T23:08:32.103
> 
> 标签：java, class, interface

我正在阅读一本关于 android 的书，但在迷你书中刷了一些 java 的东西。我已经读过一本关于 Java 的书并且知道接口。书上说

> 接口实现层次结构（如果你可以称它为“层次结构”）跨越类扩展层次结构。这个想法如图 4-1 所示，其中我垂直显示类扩展并水平显示接口实现。（Android 的 KeyboardView 类位于 android.inputmethod 服务包中。示例 4-3 中的 KeyboardView 和自制的 MyListener 类都实现了 Android 的 OnClickListener 接口。）
> 
> ![跨类层次结构的接口切割](../Images/4323aebfdc0fb9571212fe27e7901b46.png)
> 
> 巴里伯德 (2011-11-14)。Android 应用程序开发多合一傻瓜（第 197 页）。约翰威利父子。Kindle版。

“跨越类层次结构”是否只是意味着兄弟类都扩展了接口......我不明白他们用这个图指出了什么，并说它横向跨越了图 4-3 中的类垂直层次结构。 ..请解释是否有比我从中得到的更深的特殊概念...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:28:50.097

`MyListener`和- 类都`KeyboardView`实现了 - 接口`OnClickListener`。这使得这两个类都是`OnClickListener`s。

这个想法如下：每个类都派生自一个基类（`Object`是可用的最基本的类）。这使得每个类都成为`Object`. 就 OOP 而言，您可以说的最抽象的事情*是*，它是一个对象。

回到接口，假设您有两个接口，`Singer`并且`Writer`. 一个人可以是歌手，一个人可以是作家。但他/她也可以两者兼而有之。

实现`Singer`和/或`Writer`告诉您有关对象的更多信息。一些代码：

```
class Guy implements Singer, Writer{
  // Empty
}
Guy chris = new Guy();

hireWriter(chris); // Accepts "Writer" as it's parameter
hireSinger(chris); // Accepts "Singer" as it's parameter 
```

通过实现接口，你告诉你的代码这个对象是：

1.  一个`Object`
2.  一种`Singer`
3.  一种`Writer`

这种“通过类层次结构切割”通过提供更多关于类的信息，而不是从更多类派生，而是通过实现接口。

# svg - 在 HTML 5 画布上渲染 SVG 图像的性能

> ID：11768864
> 
> 赞同：0
> 
> 时间：2012-08-01T23:08:37.907
> 
> 标签：svg, html5-canvas

SVG 图像非常适合高细节图形，但由于它们包含许多需要在渲染之前计算的坐标，因此与渲染 jpg 相比，它们可能对性能不利，而 jpg 只是绘制预先计算的像素数组?

我使用 Context.drawImage，我不知道是否需要在画布的每个绘制帧中计算 SVG 图形，或者它们是否可能以某种方式被缓存？或者我什么都不担心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:07:07.143

性能将取决于您的特定应用程序和图形的复杂性，但一般来说，矢量图形不会产生重大影响。您的主要瓶颈通常是在画布中操作像素数据；画布越大，绘制所需的时间就越多。

但是，除非您每帧都重新绘制画布，否则唯一执行的计算是您最初绘制图像时所做的计算。当您不修改它时，画布实际上只不过是一个静态位图。

# wpf - 将整个元素绑定到类中的属性

> ID：11768871
> 
> 赞同：0
> 
> 时间：2012-08-01T23:09:13.440
> 
> 标签：wpf, binding

我的 XAML 中有一个组合框：

```
<ComboBox Name="MyComboBox" /> 
```

我想将整个对象绑定到我的视图类中的一个属性：

```
public class MyView : INotifyPropertyChanged
{
    public ComboBox MyComboBox;
    ...
} 
```

我知道如何将组合框的各个属性绑定到我的视图类中的属性，但是有没有办法绑定整个元素？我只需要两个属性，所以我可以分别绑定这两个属性，但想知道是否有办法一次性完成。

# animation - 旋转加载/等待/缓冲动画的名称

> ID：11768874
> 
> 赞同：8
> 
> 时间：2012-08-01T23:10:00.380
> 
> 标签：animation, loading-animation

在桌面和 Web 开发中随处可见这些东西。他们有合适的术语或名称吗？我以为我曾经听到有人称它为“thumper”，但谷歌似乎并不同意。

[![在此处输入图像描述](../Images/bec8186cd8b974861844854e47974781.png)](https://i.stack.imgur.com/wlZGP.gif) ![在此处输入图像描述](../Images/a772b27866872af798f9bce61f724995.png)

* * *

不太确定如何对此进行分类，因为它适用于任何地方。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T20:00:58.803

您听到的术语很可能是[Throbber](http://en.wikipedia.org/wiki/Throbber) - 这是来自早期的 Web 浏览器（Mosaic、Netscape），其中通过动画浏览器徽标来指示页面加载指示器。

[![NCSA 马赛克](../Images/00bd36389692a27a77163cec84c5f025.png)](https://i.stack.imgur.com/dIFkT.gif) [![Netscape Navigator 悸动者](../Images/be3b8ccc746f7ed87da56e007822fab7.png)](https://i.stack.imgur.com/oqMri.gif)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T23:12:24.160

在 Android 开发中，它们被称为“[不确定的进度条](http://developer.android.com/reference/android/widget/ProgressBar.html)”。

在 iOS 开发中，它们被称为“[活动指示器](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)”。

另一个常用术语是“微调器”，例如`STYLE_SPINNER`在[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)中，但应注意避免与[微调器样式的菜单](http://developer.android.com/reference/android/widget/Spinner.html)混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-13T13:23:13.130

缓冲 pinner 的术语 Sorrento 来自 Douglas Adams 和 John Lloyd 撰写的笑话词源书“Liff 的含义”系列，

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-08-07T00:25:45.170

它被称为 sorrento，是由 Google Milan 的前经理为纪念他的家乡而命名的。

# maven - Maven 和 yui-compressor 插件问题

> ID：11768878
> 
> 赞同：2
> 
> 时间：2012-08-01T23:10:12.213
> 
> 标签：maven, maven-3, yui-compressor

我正在为 maven 使用 yui-compressor 插件，但似乎无法对其进行压缩。所有 js 文件的附加工作正常。它不会删除注释、换行符，也不会缩小 js（即将 var myVar 转换为 var a）。我的配置有问题吗？

```
 <plugin>
                    <groupId>net.alchim31.maven</groupId>
                    <artifactId>yuicompressor-maven-plugin</artifactId>
                    <version>1.1</version>
                    <executions>
                        <execution>
                            <goals>
                                <goal>compress</goal>
                            </goals>
                            <configuration>
                                <jswarn>false</jswarn>
                                <disableOptimizations>false</disableOptimizations>
                                <insertNewLine>false</insertNewLine>
                                <preserveAllSemiColons>false</preserveAllSemiColons>
                                <aggregations>
                                    <aggregation>
                                        <removeIncluded>true</removeIncluded>
                                        <!-- insert new line after each concatenation (default: false) -->
                                        <output>${project.build.directory}/${project.build.finalName}/WEB-INF/scripts/all.js</output>
                                        <!-- files to include, path relative to output's directory or absolute 
                                            path -->
                                        <!--inputDir>base directory for non absolute includes, default to 
                                            parent dir of output</inputDir -->
                                        <includes>
                                            <include>${basedir}/src/main/webapp/WEB-INF/scripts/underscore.js</include>
<include>${basedir}/src/main/webapp/WEB-INF/scripts/backbone.dev.js</include>
<include>${basedir}/src/main/webapp/WEB-INF/scripts/modernizr.custom.83543.js</include>
<include>${basedir}/src/main/webapp/WEB-INF/scripts/jquery.slider.min.js</include>
<include>${basedir}/src/main/webapp/WEB-INF/scripts/myApp.js</include>
                                        </includes>
                                        <!-- files to exclude, path relative to output's directory <excludes> 
                                            <exclude>**/*.pack.js</exclude> <exclude>**/compressed.css</exclude> </excludes> -->
                                    </aggregation>
                                </aggregations>
                                <includes>
                                    <include>${basedir}/src/main/webapp/WEB-INF/scripts/*.js</include>
                                </includes>
                                <excludes>
                                    <exclude>${basedir}/src/main/webapp/WEB-INF/scripts/*min*.js</exclude>
                                    <exclude>${basedir}/src/main/webapp/WEB-INF/scripts/underscore.js</exclude>
                                    <exclude>${basedir}/src/main/webapp/WEB-INF/scripts/backbone.js</exclude>
                                    <exclude>${basedir}/src/main/webapp/WEB-INF/scripts/modernizr*.js</exclude>
                                    <exclude>${basedir}/src/main/webapp/WEB-INF/scripts/*fancybox*.js</exclude>
                                    <exclude>${basedir}/src/main/webapp/WEB-INF/scripts/jquery.easing*.js</exclude>
                                </excludes>
                            </configuration>
                        </execution>
                    </executions>
                </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:31:47.087

我弄清楚发生了什么事。实际上，有一些问题是错误的：首先，整个配置块需要与执行块相邻，而不是在其中。其次，insertNewLine 选项需要在聚合块内。第三，没有被删除的评论是 /*! */ 注释，通常包含许可信息并且 yui-compressor 不会删除。第四，也是最重要的一点，myApp.js 中有一个 eval，它被认为是“邪恶的”并阻止 yui-compressor 压缩。

希望这对人们有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T06:15:31.337

我建议您使用 jshint 插件并 lint 您的 js 代码作为压缩 js 的上一步。如果检测到 eval、结束错误的逗号等，则您的 maven 构建在尝试压缩之前失败。

```
 <plugin>
            <groupId>com.cj.jshintmojo</groupId>
            <artifactId>jshint-maven-plugin</artifactId>
            <version>1.6.0</version>
            <executions>
                <execution>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>lint</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <options>forin,sub,evil,latedef,eqnull</options>
                <directories>
                    <directory>src/main/webapp/</directory>
                </directories>
                <excludes>
                    <exclude>src/main/webapp/extjs-4.2</exclude>
                </excludes>
                <reporter>jslint</reporter>
                <reportFile>target/jshint.xml</reportFile>
                <failOnError>true</failOnError>
            </configuration>
        </plugin> 
```

# html - html选择下拉菜单的行为不一致

> ID：11768880
> 
> 赞同：0
> 
> 时间：2012-08-01T23:10:21.567
> 
> 标签：html, select, drop-down-menu, scrollbar

我写了一个 javascript 生成的网页，可以从课程页面打开，为中文学生提供交互式抽认卡练习。它在一个（现在已弃用！）框架集页面上运行，该页面具有三个“列”，其中第二个和第三个框架页面由第一个框架页面中的 javascript 动态编写。第二和第三帧页面中的每一个都有一个 html 选择下拉菜单，使用相同的结构代码编写。然而，尽管第三帧页面中的下拉菜单出现了垂直滚动条，但第二帧页面中的下拉菜单 (a) 没有滚动条，并且 (b) “下拉”（在 Linux 平台上的 Firefox 中）超出了主浏览器窗口的顶部边缘，使下拉列表的顶部无法访问。包含 select 标签的 html 表单的结构是：

```
<form>
  <select size="1" name="sel_py" id="sel_py">
    <option class="lucidasansu" value="">CHOOSE</option>
    <option class="lucidasansu" value="er4">èr</option>
    <option class="lucidasansu" value="hang2">háng</option>
    <option class="lucidasansu" value="hao3">hǎo</option>
    ....
    <option class="lucidasansu" value="ye3">yě</option>
    <option class="lucidasansu" value="yi1">yī </option>
  </select>
  <span id="py_butt"><input type="button" name="py_button" value="CHECK" onClick="test_py(this.form.sel_py.value)"></span>
</form> 
```

该标记没有“动作”值，因为 onClick 对标识为 py_button 的按钮的效果在框架页面组内起作用，以检查选择的有效性，并在第一个选择后显示第三个框架页面上的类似按钮成功了。

我已经检查了 W3C 标记验证器上的第二和第三帧页面的代码，它们只检查了一些小警告，所以我不明白为什么两个结构明显相同的下拉菜单会有如此不同的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:54:01.480

所以这很奇怪。似乎没有任何加载的 CSS，因此这可能是问题的一部分，但我认为`<frame>`HTML5 可能是问题的根源。

查看此链接以了解有关 HTML5 和框架的更多信息。

[<frameset> 可以与 HTML5 一起使用吗？](https://stackoverflow.com/questions/4580472/will-frameset-work-with-html5)

在 Firebug 中搞乱时，我设法通过将此 CSS 添加到选择标记来使其在正确的方向上进行下拉。所以我认为它可以通过一些 CSS 作为快速修复来解决。但就像我之前提到的。我在想使用框架和 HTML5 可能是根本原因。

```
#sel_py {
    display: block;
    height: 24px;
} 
```

**另请注意：** *我无法为选择添加更多高度，而不会再次弄乱。*

这可能不是您要寻找的答案。但我希望这会有所帮助。

# mysql - 根据日期范围查找季度的 SQL 语句

> ID：11768881
> 
> 赞同：6
> 
> 时间：2012-08-01T23:10:22.607
> 
> 标签：mysql, sql

我有一个用户活动表。我有用户 ID 和日期。我需要根据日期范围获取用户活动的季度，即：

日期范围：2011-08-01 - 2012-07-31

```
Q1 - Aug-Oct
Q2 - Nov-Jan
Q3 - Feb-Apr
Q4 - May-Jul 
```

我在 mysql 中使用了[QUARTER](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_quarter)函数，但它只返回基于 1 月作为年初的季度：

```
SELECT QUARTER(a.Date), a.Date
FROM activity AS a
WHERE a.InstitutionNumber = '000000000075' 
AND a.HWA = '001372EADBC4'
AND (a.Date between '2011-08-01' and '2012-07-31')
GROUP BY QUARTER(a.Date), a.HWA 
```

返回：

```
QUARTER Date
1   2012-01-11
3   2011-08-01
4   2011-10-03 
```

我希望能够将每个 HWA 具有活动的季度列为不重叠的计数。我的意思是，如果根据 2011 年 8 月至 1012 年 7 月的日期，HWA 在第 1、2 和 3 季度使用，我希望它将该 HWA 的季度列为 3。

* * *

**更新：**

从下面的答案中，我现在已经回答了我所说的问题。我现在有更复杂的情况。一些 HWA 是其他 HWA 的替代品。在这些情况下，它们具有相同的 groupID 以表明它们是链接的。在这些情况下，我需要取消重叠的季度。澄清一下，如果两个 HWA 在第 2 季度使用并且它们具有相同的 groupID，那么我只需要为其中一个计算第 2 季度（这无关紧要）。下面是我现在使用的查询，得到的输出是：

```
 SELECT act.HWA, count(act.HWA), m.Status, m.GroupID
FROM (
    SELECT 
      a.HWA, a.Date,
      CASE 
        WHEN MONTH(a.Date) BETWEEN 8 AND 10 THEN 'Q1'
        WHEN (MONTH(a.Date) BETWEEN 11 AND 12 OR MONTH(a.Date) = 1) THEN 'Q2'
        WHEN MONTH(a.Date) BETWEEN 2 AND 4 THEN 'Q3'
        WHEN MONTH(a.Date) BETWEEN 5 AND 7 THEN 'Q4'
      END AS quarter,
      CASE
        WHEN MONTH(a.Date) <= 7 THEN YEAR(a.Date) - 1 
        ELSE EXTRACT(YEAR_MONTH from a.Date)
      END AS quarteryear,
      COUNT(*) AS num_activites
    FROM activity a
    WHERE
      a.InstitutionNumber = '000000000075'  
      AND (a.HWA = '001372EADBC4' OR a.HWA = '180373E241DB' OR a.HWA = '180373E23DE7')
      AND (a.Date between '2011-08-01' and '2012-07-31')
    GROUP BY
      quarter,
      a.HWA
) act, machine m
where act.HWA = m.HWA
group by act.HWA 
```

它返回这个：

```
HWA         quarters  status   groupid

001372EADBC4    3    deleted    59970
180373E23DE7    2     online    59970
180373E241DB    1    deleted    59970 
```

3 个 HWA 都共享第 3 季度和相同的 groupID。其中只有一个必须将 Q3 计入其中。您可以从上面看到，在 3 个 HWA 中共有 6 个季度。如果您从其中两个中删除第 3 季度，我们总共有 4 个季度用于所有 3 个 HWA，这应该是这样的。任何进一步的帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:43:15.280

您可以`GROUP BY`使用 a 派生的列`CASE`来按月分隔季度并处理年份，如果月份 <= 7 月，则从年份中减去 1 以构建从 8 月开始的年份（仅用于分组目的）。我认为这应该做的工作：

```
SELECT 
  a.Date,
  CASE 
    WHEN MONTH(a.Date) BETWEEN 8 AND 10 THEN 'Q1'
    WHEN (MONTH(a.Date) BETWEEN 11 AND 12 OR MONTH(a.Date) = 1) THEN 'Q2'
    WHEN MONTH(a.Date) BETWEEN 2 AND 4 THEN 'Q3'
    WHEN MONTH(a.Date) BETWEEN 5 AND 7 THEN 'Q4'
  END AS quarter,
  CASE
    /* Make a year that starts with August so quarters appear to be all in the same year */
    WHEN MONTH(a.Date) <= 7 THEN YEAR(a.Date) - 1 
    ELSE YEAR(a.Date) 
  END AS quarteryear,
  COUNT(*) AS num_activites
FROM Activity a
WHERE
  a.InstitutionNumber = '000000000075'  
  AND a.HWA = '001372EADBC4'
  AND (a.Date between '2011-08-01' and '2012-07-31')
/* Groupings over the quarter and fake year for aggregates */
GROUP BY
  quarter, 
  quarteryear 
```

## 更新：

重读您的问题，我意识到这不是您想要的确切输出。以上将为您提供每季度的事件数，但您确实想要有事件的季度数。为此，您可以将上述部分包装在子查询中并继续`COUNT()`：

```
SELECT quarteryear, COUNT(*)
FROM (
    SELECT 
      a.Date,
      CASE 
        WHEN MONTH(a.Date) BETWEEN 8 AND 10 THEN 'Q1'
        WHEN (MONTH(a.Date) BETWEEN 11 AND 12 OR MONTH(a.Date) = 1) THEN 'Q2'
        WHEN MONTH(a.Date) BETWEEN 2 AND 4 THEN 'Q3'
        WHEN MONTH(a.Date) BETWEEN 5 AND 7 THEN 'Q4'
      END AS quarter,
      CASE
        /* Make a year that starts with August so quarters appear to be all in the same year */
        WHEN MONTH(a.Date) <= 7 THEN YEAR(a.Date) - 1 
        ELSE YEAR(a.Date) 
      END AS quarteryear,
      COUNT(*) AS num_activites
    FROM Activity a
    WHERE
      a.InstitutionNumber = '000000000075'  
      AND a.HWA = '001372EADBC4'
      AND (a.Date between '2011-08-01' and '2012-07-31')
    /* Groupings over the quarter and fake year for aggregates */
    GROUP BY
      quarter, 
      quarteryear
) qtrsubcounts
GROUP BY quarteryear 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T12:03:13.607

我知道这有点过时了，但我不认为这是一个解决方案，而且它更简单。甚至可以将其设置为功能。

选择(datepart(M,a,Date),'Q2','Q3','Q3','Q3','Q4','Q4','Q4','Q1','Q1','Q1' ,'Q2','Q2')

# android - Android GUI 覆盖

> ID：11768886
> 
> 赞同：1
> 
> 时间：2012-08-01T23:10:49.107
> 
> 标签：android, screen, surfaceview

我是安卓新手。前段时间我看到了应用程序“Cracked Screen”。它制作屏幕截图，然后添加一个透明的“破解”精灵并显示它。我可以在不截图的情况下做类似的事情吗？那就是在GUI之上显示精灵？

PS：对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:21:21.117

是的你可以。只需使用 SurfaceView 并将图像放在它上面。图像或图像所在的布局应设置 android:background="@null"。未能设置背景会为您提供默认背景，但如图所示设置为 null 会使其透明。

# jquery - jQuery UI 选项卡：片段标识符不匹配（jQuery 1.71、UI 1.8.16）

> ID：11768888
> 
> 赞同：2
> 
> 时间：2012-08-01T23:11:04.897
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在使用 jQuery 1.71 和 jQuery UI 1.8.16，并且收到了臭名昭著的 jQuery UI Tabs: Mismatching fragment identifier 错误。

任何人都可以帮忙吗？我认为 UI 和 jQuery 的版本可能存在问题 - 但我很确定我的版本相当现代。

提前致谢。

```
jQuery(document).ready(function ($) {
    tab_holder = jQuery('#dl-tabs');
    tab_holder.tabs({
    event: 'mouseover'
});

tab_holder.tabs('option', 'disabled', false);
    tab_holder.tabs('rotate', 5000);
    tab_holder.mouseleave(function () {
     tab_holder.tabs('rotate', 5000);
    });
}); 
```

HTML代码如下：

```
<div class="tabs ui-tabs ui-widget ui-widget-content ui-corner-all" id="dl-tabs">
<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
        <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><span>Content</span></li>
                    <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><span>Content</span></li>
                    <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><span>Content</span></li>
                    <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><span>Content</span></li>
                    <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><span>Content</span></li>
 </ul></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:45:25.827

好的 - 我没有包含我的所有标记（例如链接到 div [正如你指出的 Andrew]，当使用你的 jsfiddle 时，我发现使用我使用的代码，jquery 中引用的 div 必须包含列表和内容。它是通过添加一个新的 div 环绕两者并在其上调用选项卡来解决的。

谢谢安德鲁，你真的帮了大忙！

# mysql - Mysql IN条件限制

> ID：11768893
> 
> 赞同：0
> 
> 时间：2012-08-01T23:11:45.160
> 
> 标签：mysql, sql, database

我有两张桌子，一张用于菌株，一张用于 StoreStrains。商店出售菌株，因此对于某个菌株 ID，“StoreStrains”中可以有多个条目。

我正在打一个电话以从应变表中获取所有应变。然后我像“1,2,3,4,5”那样映射那些应变ID。然后我正在做另一个 SQL 调用来查找哪些商店有这些菌株。

```
SELECT * FROM StoreStrains
WHERE strain_id IN (strain_ids)
LIMIT 5 
```

正如您所料，这将返回所有 StoreStrains，其中的 strain_id 为 1-5。但是，如果其中 3 家商店具有相同的压力，我将返回 8 个结果，但我限制为 5 个。

在更大的范围内（在具有 500,000 多个 StoreStrain 的数据库中），仅仅增加“获取所有结果”的限制根本不是一个好的选择。所以我想知道是否有方式限制

```
WHERE strain_id IN (strain_ids) 
```

每 1 个结果？

我知道我可以像这样执行 5 个单独的 SQL 调用：

```
SELECT * FROM StoreStrains Where strain_id = ? LIMIT 1 
```

但如果可能的话，我更希望这一切都发生在一个 sql 调用中。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:23:05.520

如果你想随意选择一家商店，那就这样做吧

```
Select strain_id,
       (Select StrainStore.id
        from StrainStore
        Where StrainStore.strain_id = Strains.strain.id
        Limit 1)
From Strains 
```

但这样做可能更好

```
Select Strains.strain_id, GROUP_CONCAT(StrainStore.id)
From Strains
Join StrainStore
    On (Strains.strain_id = StrainStore.strain_id)
Group by Strains.strain_id 
```

# blackberry-eclipse-plugin - Playbook 和 BB10 的黑莓开发 - 可以制作通用应用程序吗？

> ID：11768895
> 
> 赞同：4
> 
> 时间：2012-08-01T23:12:13.110
> 
> 标签：blackberry-eclipse-plugin, blackberry-playbook, blackberry-10

我正在考虑为黑莓做开发，但我对一些事情感到困惑。也许这里有人可以清除它们：

*   是否可以构建一个在 Playbook 和 BB10 上运行的“通用”应用程序？
*   使用 Java IDE，我可以使用所有原生 SDK 吗？或者，我是否需要为此使用 Native C IDE？
*   使用 Eclipse 是 BlackBerry Java 开发的最佳选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T19:56:39.280

1.  当然，尤其是在 2013 年 BB10 正式发布之后将 PlayBook 更新到 BB10 之后，从那时起它们将运行相同的操作系统。目前，您可以使用 AIR（正如 Alexander 指出的那样）和 WebWorks，就这一点而言，Native SDK 也可以正常工作。您还可以使用常规 Qt 库，它们在 Dev Alpha 设备（仅运行 BB10 的现有硬件）和 PlayBook 上运行良好。

2.  正如 Shashank 的评论所说，除了 Android 运行时为您提供的之外，没有任何 Java 支持。RIM 显然试图让所有受支持的 SDK 尽可能完全地访问整个操作系统，但请注意，最终*只有*Native SDK (C/C++) 将提供对所有内容的*完全*访问权限。然而，其他人的差距可能相对较小，很少使用的 API 是唯一不受支持的东西。

3.  鉴于 Java 仅用于遗留 BBOS 开发（除了 Android 运行时），我怀疑这个问题没有实际意义。但是请注意，Eclipse 是 Momentics IDE 的基础，Momentics IDE 是用于 Native 和 Cascades SDK 的 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T15:16:07.480

Playbook 和 BB10 的“通用应用程序”可以[在 AIR 中](https://developer.blackberry.com/air/)使用。

# javascript - 禁止“并允许\”的正则表达式

> ID：11768896
> 
> 赞同：-1
> 
> 时间：2012-08-01T23:12:13.777
> 
> 标签：javascript, regex

我正在写作以提取用引号（“）包围的字符串。我在 jquery 中使用以下语句来获取它。

```
var item = objstr.match(/\"(([^\"])*)\"/g); 
```

但我想为 \" 做一个例外被允许。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:40:57.420

这个正则表达式也可以工作，而不使用前瞻或后瞻：（删除空格！）

```
/" (\\\\ | \\" | [^"])* "/ 
```

阅读：将字符串从双引号匹配到双引号。在这两者之间可能没有转义的反斜杠`\\`、转义的双引号`\"`或任何非引号字符或任何组合。这允许像这样的输入

```
"abc\\abc\abc\"abc\\\"abc" 
```

是有效的，但不是

```
"abc\\"abc"
//    ^ String terminates here 
```

如果您的字符串可能具有未转义的含义，您可能希望这样做`\"`。

@nickb 的答案没有这个功能/错误，不管你怎么称呼它。这两个字符串在他的正则表达式中都是有效的。

如果您的正则表达式引擎能够关闭*回溯*，那么现在是使用它的时候了。在 Perl 中，我必须将 a 添加`+`到量词（或转向深奥的分支重置）。我不知道你需要什么。

```
/" (\\\\ | \\" | [^"])*+ "/ 
```

我们也*想要*贪婪的行为，所以没有`*?`构造。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:07:15.290

我已经从[http://writecodeonline.com/javascript/](http://writecodeonline.com/javascript/)测试了以下代码：

```
var s = "wwww\"ooxx\\\"xyz\"";
var foo = s.match(/"(?:[^\\"]|\\.)*"/);
document.write(foo[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:39:37.757

这个问题已经被问过很多次了，它总是引出同样明显但不正确的答案。;)

消极的lookbehind方法———— `(?<!\\)"`不起作用，因为它没有考虑转义的反斜杠。我知道问题中没有提到这一点，但是如果源文本使用反斜杠来转义引号，则除非另有说明，否则您应该假设它也使用它们来转义其他反斜杠。

交替方法 -- `"(?:[^\\"]|\\.)*"`-- 处理转义的反斜杠，但不正确。添加另一种选择 - `"(\\\\|\\"|[^"])*"`- 并不能解决它。它可以匹配有效的输入，但是给出了这样一个格式错误的字符串：

```
"escaped \"quotes\" but no ending quote 
```

...而不是像它应该的那样报告失败的匹配，而是错误地匹配这个：

```
"escaped \"quotes\" 
```

这是最好的方法，可以在 RegexBuddy 的图书馆中找到并在[The Book](http://regex.info/)中讨论：

```
/"[^"\\]*(?:\\.[^"\\]*)*"/g 
```

如果匹配的字符串不应包含行分隔符（如 Java 字符串文字），请使用以下命令：

```
/"[^"\\\r\n]*(?:\\.[^"\\\r\n]*)*"/g 
```

其他方法也是可能的，但这种方法具有三个主要优点： 已被多次证明；它非常有效；而且它不依赖于高级特性——换句话说，它甚至可以在 JavaScript 中工作，JavaScript 是 Perl 派生的正则表达式风格的红发继子。:D

# html - 如何防止选择菜单选项在选择时突出显示？

> ID：11768903
> 
> 赞同：0
> 
> 时间：2012-08-01T23:13:23.187
> 
> 标签：html, css

当用户选择菜单中的一个选项时，`<select>`我不希望它被突出显示。我怎样才能做到这一点？

```
<select id="my_select_menu">
    <option id="1">Option 1</option> // do not highlight when selected
    <option id="2">Option 2</option> // do not highlight when selected
    ....
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:22:23.003

在你的 CSS 中放这个

```
#my_select_menu
{
    outline: none;
} 
```

# python - 比较两个 csv 文件内容并将相似的内容存储到变量中

> ID：11768914
> 
> 赞同：1
> 
> 时间：2012-08-01T23:14:29.300
> 
> 标签：python, csv, compare

我对 python 真的很陌生，我有两个 csv 文件。第一个（more.csv）的内容为

```
A123,B456,C789 
```

第二个（less.csv）的内容为

```
B456 
```

我希望当它们相同时，它们将相似的项目存储到一个名为“相同”的变量中

我认为它会从以下内容开始：

```
more = open('more.csv','r')
less= open('less.csv','r')
for item in unitid: 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:38:36.177

如果它们只有一行，您可以使用*set*对象（python 内置）来比较它们，例如：

```
>>> a = ['A123','B456','C789','D007']
>>> b = ['B456','D007','E009']
>>> c = list(set(a).intersection(b))
>>> print c
['B456', 'D007'] 
```

从文件进行比较的完整方法如下所示：

```
def compare( fileA, fileB ):
    a_file = open(fileA, 'r')
    a_data = a_file.read()
    a_file.close()

    b_file = open(fileB, 'r')
    b_data = b_file.read()
    b_file.close()

    # compare the contents
    a_set = set(a_data.split(','))
    b_set = set(b_data.split(','))

    return list(a_set.intersection(b_set))

compare('more.csv', 'less.csv') 
```

如果每个文件不止一行，那么您仍然可以使用它，您只需对其进行一些修改 - 我想将交叉点存储到一个表示逐行相似性的数组中或者其他的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:30:19.490

将 CSV 文件处理成列表后，您可以使用它`collections.Counter`来查找重复项：

```
from collections import Counter

# after processing your CSV files into two lists:
more_list = ['A123', 'B456', 'C789', 'D007']
less_list = ['B456', 'D007', 'E009']

dupe_counter = Counter(more_list)
dupe_counter.update(less_list)
same_list = [val for val in dupe_counter if dupe_counter[val] > 1]
# same_list will be: ['B456', 'D007'] 
```

# c++ - 什么是 _dl_lookup_symbol_x ？- C++ 分析

> ID：11768919
> 
> 赞同：14
> 
> 时间：2012-08-01T23:15:25.847
> 
> 标签：c++, profiling, valgrind

我正在使用 valgrind/callgrind 来分析我的服务器代码以进行一些优化。callgrind 向我报告的两个最常用的调用（使用 kcachegrind 查看）是 _dl_lookup_symbol_x 和 do_lookup_x。但是，我不知道其中任何一个是什么，似乎也找不到任何关于它们的文档。

谁能告诉我这两个功能在哪里使用以及它们的作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T00:40:03.247

`_dl_lookup_symbol_x`是 glibc C 运行时库中的一个内部函数。如果您[浏览](http://fossies.org/dox/glibc-2.16.0/dl-lookup_8c_source.html)glibc 的源代码，您会在`_dl_lookup_symbol_x`定义上方找到以下注释：

```
/* Search loaded objects' symbol tables for a definition of the symbol
   UNDEF_NAME, perhaps with a requested version for the symbol. 
```

`do_lookup_x`只是在函数内调用的辅助`_dl_lookup_symbol_x`函数。

我不是 glibc 内部的专家，但据我所知，`_dl_lookup_symbol_x`在您的程序加载的共享库中查找符号（例如函数）。

我不知道为什么在您的分析中如此频繁地调用这些函数，但至少现在您对它们的作用有了一些线索。您的分析应该告诉您哪些函数负责`_dl_lookup_symbol_x`如此频繁地调用。

请注意，`_dl_lookup_symbol_x`在程序第一次启动时被多次调用是正常的，因为运行时会计算出具有给定名称的共享库函数的地址。如果您正在分析一个非常短暂的程序，那么您会发现大部分时间都花在了内部“管家”功能而不是您自己的代码上，这并不奇怪。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-06-22T01:57:13.027

dl_lookup_symbol 从 _dl_fixup 调用，它从 _dl_runtime_resolve_sse 调用

在 gdb 中，如果您在第一个函数调用（任何调用）中中断，然后在惰性链接中（使用 gcc 时的默认设置），函数的地址实际上不会被解析，直到该调用几乎返回到 main 之后。用于解析函数地址的函数之一是 dl_lookup_symbol，因此对于每个使用延迟链接的程序调用的每个函数，几乎所有这些函数都应该看到一次。

源代码：

```
#include <stdio.h>
#include <string.h>

int main (void)
{
    size_t a = strlen("Hello"); 
    printf("%s is %d letters\n", "Hello", a);

    if (a != sizeof("Hello") - 1)
    {
        perror("What?");
    }

    size_t b = strlen("Bye");
    printf("%s is %d letters\n", "Bye", b);

    if (b != sizeof("Bye") - 1)
    {
        perror("What?");
    }

    return 0;
} 
```

去gdb：

```
(gdb) disas
Dump of assembler code for function main:
   0x0000555555554700 <+0>: push   rbp
   0x0000555555554701 <+1>: mov    rbp,rsp
   0x0000555555554704 <+4>: sub    rsp,0x10
   0x0000555555554708 <+8>: mov    QWORD PTR [rbp-0x8],0x5
   0x0000555555554710 <+16>:    mov    rax,QWORD PTR [rbp-0x8]
   0x0000555555554714 <+20>:    mov    rdx,rax
   0x0000555555554717 <+23>:    lea    rsi,[rip+0xf6]        # 0x555555554814
   0x000055555555471e <+30>:    lea    rdi,[rip+0xf5]        # 0x55555555481a
   0x0000555555554725 <+37>:    mov    eax,0x0
=> 0x000055555555472a <+42>:    call   0x5555555545a0 <printf@plt>
   0x000055555555472f <+47>:    cmp    QWORD PTR [rbp-0x8],0x5
   0x0000555555554734 <+52>:    je     0x555555554742 <main+66>
   0x0000555555554736 <+54>:    lea    rdi,[rip+0xef]        # 0x55555555482c
   0x000055555555473d <+61>:    call   0x5555555545b0 <perror@plt>
   0x0000555555554742 <+66>:    mov    QWORD PTR [rbp-0x10],0x3
   0x000055555555474a <+74>:    mov    rax,QWORD PTR [rbp-0x10]
   0x000055555555474e <+78>:    mov    rdx,rax
   0x0000555555554751 <+81>:    lea    rsi,[rip+0xda]        # 0x555555554832
   0x0000555555554758 <+88>:    lea    rdi,[rip+0xbb]        # 0x55555555481a
   0x000055555555475f <+95>:    mov    eax,0x0
   0x0000555555554764 <+100>:   call   0x5555555545a0 <printf@plt>
   0x0000555555554769 <+105>:   cmp    QWORD PTR [rbp-0x10],0x3
   0x000055555555476e <+110>:   je     0x55555555477c <main+124>
   0x0000555555554770 <+112>:   lea    rdi,[rip+0xb5]        # 0x55555555482c
   0x0000555555554777 <+119>:   call   0x5555555545b0 <perror@plt>
   0x000055555555477c <+124>:   mov    eax,0x0
   0x0000555555554781 <+129>:   leave  
   0x0000555555554782 <+130>:   ret 
```

下面，在进入 printf 之后，是惰性链接的神奇结果在完成之后出现的地方。在这里，我只是展示了，当我逐步执行此操作时，程序将通过，但是一旦 printf 被解决，如果我在

```
0x00005555555545a0 <+0>:    jmp    QWORD PTR [rip+0x200a72] 
```

该程序将直接进入 printf。所以，下次调用函数**jmp QWORD PTR [rip+0x200a72]**将直接带我们到 printf。此后直到函数返回 main 的所有代码都只是解析 printf 的地址，并且*仅在第一次调用该函数时发生。*

```
(gdb) disas
Dump of assembler code for function printf@plt:
=> 0x00005555555545a0 <+0>: jmp    QWORD PTR [rip+0x200a72]        # 0x555555755018
   0x00005555555545a6 <+6>: push   0x0
   0x00005555555545ab <+11>:    jmp    0x555555554590

(gdb) disas
Dump of assembler code for function printf@plt:
=> 0x00005555555545a0 <+0>: jmp    QWORD PTR [rip+0x200a72]        # 0x555555755018
   0x00005555555545a6 <+6>: push   0x0
   0x00005555555545ab <+11>:    jmp    0x555555554590
End of assembler dump.
(gdb) stepi
0x00005555555545a6 in printf@plt ()
(gdb) disas
Dump of assembler code for function printf@plt:
   0x00005555555545a0 <+0>: jmp    QWORD PTR [rip+0x200a72]        # 0x555555755018
=> 0x00005555555545a6 <+6>: push   0x0
   0x00005555555545ab <+11>:    jmp    0x555555554590
End of assembler dump.
(gdb) stepi
0x00005555555545ab in printf@plt ()
(gdb) disas
Dump of assembler code for function printf@plt:
   0x00005555555545a0 <+0>: jmp    QWORD PTR [rip+0x200a72]        # 0x555555755018
   0x00005555555545a6 <+6>: push   0x0
=> 0x00005555555545ab <+11>:    jmp    0x555555554590 
```

介入。不知道为什么 gdb 不选择这些，它们只是 .plt 表中的说明。是的，地址不一样，我的系统在我们点击 _start 之前将 0x555555554000 添加到所有内容中

```
(gdb) stepi
0x0000555555554590 in ?? ()
(gdb) disas
No function contains program counter for selected frame.
(gdb) stepi
0x0000555555554596 in ?? ()
(gdb) disas
No function contains program counter for selected frame. 
```

， 证明：

```
$ gdb -q ./simpletest
Reading symbols from ./simpletest...done.
(gdb) break _start
Breakpoint 1 at 0x5d0
(gdb) run
Starting program: /flerb/flerb/flerb/simpletest 

Breakpoint 1, 0x00005555555545d0 in _start ()
(gdb) 
```

来自 objdump：

```
Disassembly of section .plt:

0000000000000590 <.plt>:
 590:   ff 35 72 0a 20 00       push   QWORD PTR [rip+0x200a72]        # 201008 <_GLOBAL_OFFSET_TABLE_+0x8>
 596:   ff 25 74 0a 20 00       jmp    QWORD PTR [rip+0x200a74]        # 201010 <_GLOBAL_OFFSET_TABLE_+0x10>
 59c:   0f 1f 40 00             nop    DWORD PTR [rax+0x0] 
```

数据库

```
(gdb) stepi
_dl_runtime_resolve_sse () at ../sysdeps/x86_64/dl-trampoline.h:164
164 ../sysdeps/x86_64/dl-trampoline.h: No such file or directory. 
```

嘿，_dl_runtime_resolve_sse，我们越来越近了。下面的内容可能看起来很难看。它不是。它只是保存寄存器，以便`0x00007ffff7def11a <+154>: call 0x7ffff7de7970 <_dl_fixup>`中途调用可以使用它需要的任何寄存器，而这确实是魔术发生的地方。在末尾 0x00007ffff7def1b0 <+304>: bnd jmp r11 将带我们到 printf 程序执行此特定功能的代码的这一次，因为这是程序执行此特定功能的代码的唯一时间。

```
(gdb) disas
Dump of assembler code for function _dl_runtime_resolve_sse:
=> 0x00007ffff7def080 <+0>: push   rbx
   0x00007ffff7def081 <+1>: mov    rbx,rsp
   0x00007ffff7def084 <+4>: and    rsp,0xfffffffffffffff0
   0x00007ffff7def088 <+8>: sub    rsp,0x100
   0x00007ffff7def08f <+15>:    mov    QWORD PTR [rsp+0xc0],rax
   0x00007ffff7def097 <+23>:    mov    QWORD PTR [rsp+0xc8],rcx
   0x00007ffff7def09f <+31>:    mov    QWORD PTR [rsp+0xd0],rdx
   0x00007ffff7def0a7 <+39>:    mov    QWORD PTR [rsp+0xd8],rsi
   0x00007ffff7def0af <+47>:    mov    QWORD PTR [rsp+0xe0],rdi
   0x00007ffff7def0b7 <+55>:    mov    QWORD PTR [rsp+0xe8],r8
   0x00007ffff7def0bf <+63>:    mov    QWORD PTR [rsp+0xf0],r9
   0x00007ffff7def0c7 <+71>:    movaps XMMWORD PTR [rsp],xmm0
   0x00007ffff7def0cb <+75>:    movaps XMMWORD PTR [rsp+0x10],xmm1
   0x00007ffff7def0d0 <+80>:    movaps XMMWORD PTR [rsp+0x20],xmm2
   0x00007ffff7def0d5 <+85>:    movaps XMMWORD PTR [rsp+0x30],xmm3
   0x00007ffff7def0da <+90>:    movaps XMMWORD PTR [rsp+0x40],xmm4
   0x00007ffff7def0df <+95>:    movaps XMMWORD PTR [rsp+0x50],xmm5
   0x00007ffff7def0e4 <+100>:   movaps XMMWORD PTR [rsp+0x60],xmm6
   0x00007ffff7def0e9 <+105>:   movaps XMMWORD PTR [rsp+0x70],xmm7
   0x00007ffff7def0ee <+110>:   bndmov [rsp+0x80],bnd0
   0x00007ffff7def0f7 <+119>:   bndmov [rsp+0x90],bnd1
   0x00007ffff7def100 <+128>:   bndmov [rsp+0xa0],bnd2
   0x00007ffff7def109 <+137>:   bndmov [rsp+0xb0],bnd3
   0x00007ffff7def112 <+146>:   mov    rsi,QWORD PTR [rbx+0x10]
   0x00007ffff7def116 <+150>:   mov    rdi,QWORD PTR [rbx+0x8]

   0x00007ffff7def11a <+154>:   call   0x7ffff7de7970 <_dl_fixup>
   0x00007ffff7def11f <+159>:   mov    r11,rax

   0x00007ffff7def122 <+162>:   bndmov bnd3,[rsp+0xb0]
   0x00007ffff7def12b <+171>:   bndmov bnd2,[rsp+0xa0]
   0x00007ffff7def134 <+180>:   bndmov bnd1,[rsp+0x90]
   0x00007ffff7def13d <+189>:   bndmov bnd0,[rsp+0x80]
   0x00007ffff7def146 <+198>:   mov    r9,QWORD PTR [rsp+0xf0]
   0x00007ffff7def14e <+206>:   mov    r8,QWORD PTR [rsp+0xe8]
   0x00007ffff7def156 <+214>:   mov    rdi,QWORD PTR [rsp+0xe0]
   0x00007ffff7def15e <+222>:   mov    rsi,QWORD PTR [rsp+0xd8]
   0x00007ffff7def166 <+230>:   mov    rdx,QWORD PTR [rsp+0xd0]
   0x00007ffff7def16e <+238>:   mov    rcx,QWORD PTR [rsp+0xc8]
   0x00007ffff7def176 <+246>:   mov    rax,QWORD PTR [rsp+0xc0]
   0x00007ffff7def17e <+254>:   movaps xmm0,XMMWORD PTR [rsp]
   0x00007ffff7def182 <+258>:   movaps xmm1,XMMWORD PTR [rsp+0x10]
   0x00007ffff7def187 <+263>:   movaps xmm2,XMMWORD PTR [rsp+0x20]
   0x00007ffff7def18c <+268>:   movaps xmm3,XMMWORD PTR [rsp+0x30]
   0x00007ffff7def191 <+273>:   movaps xmm4,XMMWORD PTR [rsp+0x40]
   0x00007ffff7def196 <+278>:   movaps xmm5,XMMWORD PTR [rsp+0x50]
   0x00007ffff7def19b <+283>:   movaps xmm6,XMMWORD PTR [rsp+0x60]
   0x00007ffff7def1a0 <+288>:   movaps xmm7,XMMWORD PTR [rsp+0x70]
   0x00007ffff7def1a5 <+293>:   mov    rsp,rbx
   0x00007ffff7def1a8 <+296>:   mov    rbx,QWORD PTR [rsp]
   0x00007ffff7def1ac <+300>:   add    rsp,0x18

   0x00007ffff7def1b0 <+304>:   bnd jmp r11

End of assembler dump. 
```

最后的 bnd jmp r11 将带我们到 printf。

最后，我们进入 _dl_fixup，我在其中挑出了对 _dl_lookup_symbol 的调用

```
(gdb) break *0x7ffff7def11a 
Note: breakpoint 5 also set at pc 0x7ffff7def11a.
Breakpoint 8 at 0x7ffff7def11a: file ../sysdeps/x86_64/dl-trampoline.h, line 212.
(gdb) cont
Continuing.

Breakpoint 5, _dl_runtime_resolve_sse () at ../sysdeps/x86_64/dl-trampoline.h:212
212 in ../sysdeps/x86_64/dl-trampoline.h
(gdb) stepi
_dl_fixup (l=0x7ffff7ffe168, reloc_arg=0) at ../elf/dl-runtime.c:66
66  ../elf/dl-runtime.c: No such file or directory.
(gdb) disas
Dump of assembler code for function _dl_fixup:
=> 0x00007ffff7de7970 <+0>: push   rbx
   0x00007ffff7de7971 <+1>: mov    r10,rdi
   0x00007ffff7de7974 <+4>: mov    esi,esi
   0x00007ffff7de7976 <+6>: lea    rdx,[rsi+rsi*2]
   0x00007ffff7de797a <+10>:    sub    rsp,0x10
   0x00007ffff7de797e <+14>:    mov    rax,QWORD PTR [rdi+0x68]
   0x00007ffff7de7982 <+18>:    mov    rdi,QWORD PTR [rax+0x8]
   0x00007ffff7de7986 <+22>:    mov    rax,QWORD PTR [r10+0xf8]
   0x00007ffff7de798d <+29>:    mov    rax,QWORD PTR [rax+0x8]
   0x00007ffff7de7991 <+33>:    lea    r8,[rax+rdx*8]
   0x00007ffff7de7995 <+37>:    mov    rax,QWORD PTR [r10+0x70]
   0x00007ffff7de7999 <+41>:    mov    rcx,QWORD PTR [r8+0x8]
   0x00007ffff7de799d <+45>:    mov    rax,QWORD PTR [rax+0x8]
   0x00007ffff7de79a1 <+49>:    mov    rdx,rcx
   0x00007ffff7de79a4 <+52>:    shr    rdx,0x20
   0x00007ffff7de79a8 <+56>:    lea    rsi,[rdx+rdx*2]
   0x00007ffff7de79ac <+60>:    lea    rsi,[rax+rsi*8]
   0x00007ffff7de79b0 <+64>:    mov    rax,QWORD PTR [r10]
   0x00007ffff7de79b3 <+67>:    mov    QWORD PTR [rsp+0x8],rsi
   0x00007ffff7de79b8 <+72>:    mov    rbx,rax
   0x00007ffff7de79bb <+75>:    add    rbx,QWORD PTR [r8]
   0x00007ffff7de79be <+78>:    cmp    ecx,0x7
   0x00007ffff7de79c1 <+81>:    jne    0x7ffff7de7b17 <_dl_fixup+423>
   0x00007ffff7de79c7 <+87>:    test   BYTE PTR [rsi+0x5],0x3
   0x00007ffff7de79cb <+91>:    jne    0x7ffff7de7a67 <_dl_fixup+247>
   0x00007ffff7de79d1 <+97>:    mov    rax,QWORD PTR [r10+0x1c8]
   0x00007ffff7de79d8 <+104>:   test   rax,rax
   0x00007ffff7de79db <+107>:   je     0x7ffff7de7a90 <_dl_fixup+288>
   0x00007ffff7de79e1 <+113>:   mov    rax,QWORD PTR [rax+0x8]
   0x00007ffff7de79e5 <+117>:   movzx  eax,WORD PTR [rax+rdx*2]
   0x00007ffff7de79e9 <+121>:   and    eax,0x7fff
   0x00007ffff7de79ee <+126>:   lea    rdx,[rax+rax*2]
   0x00007ffff7de79f2 <+130>:   mov    rax,QWORD PTR [r10+0x2e0]
   0x00007ffff7de79f9 <+137>:   lea    r8,[rax+rdx*8]
   0x00007ffff7de79fd <+141>:   mov    eax,0x0
   0x00007ffff7de7a02 <+146>:   mov    r9d,DWORD PTR [r8+0x8]
   0x00007ffff7de7a06 <+150>:   test   r9d,r9d
   0x00007ffff7de7a09 <+153>:   cmove  r8,rax
   0x00007ffff7de7a0d <+157>:   mov    edx,DWORD PTR fs:0x18
   0x00007ffff7de7a15 <+165>:   test   edx,edx
   0x00007ffff7de7a17 <+167>:   mov    eax,0x1
   0x00007ffff7de7a1c <+172>:   jne    0x7ffff7de7ab0 <_dl_fixup+320>
   0x00007ffff7de7a22 <+178>:   mov    esi,DWORD PTR [rsi]
   0x00007ffff7de7a24 <+180>:   mov    rcx,QWORD PTR [r10+0x380]
   0x00007ffff7de7a2b <+187>:   lea    rdx,[rsp+0x8]
   0x00007ffff7de7a30 <+192>:   push   0x0
   0x00007ffff7de7a32 <+194>:   push   rax
   0x00007ffff7de7a33 <+195>:   mov    r9d,0x1
   0x00007ffff7de7a39 <+201>:   add    rdi,rsi
   0x00007ffff7de7a3c <+204>:   mov    rsi,r10

   0x00007ffff7de7a3f <+207>:   call   0x7ffff7de2d10 <_dl_lookup_symbol_x>

   0x00007ffff7de7a44 <+212>:   mov    r8,rax
   0x00007ffff7de7a47 <+215>:   mov    eax,DWORD PTR fs:0x18
   0x00007ffff7de7a4f <+223>:   test   eax,eax
   0x00007ffff7de7a51 <+225>:   pop    rcx
   0x00007ffff7de7a52 <+226>:   pop    rsi
   0x00007ffff7de7a53 <+227>:   jne    0x7ffff7de7ad0 <_dl_fixup+352>
   0x00007ffff7de7a55 <+229>:   mov    rsi,QWORD PTR [rsp+0x8]
   0x00007ffff7de7a5a <+234>:   test   rsi,rsi
   0x00007ffff7de7a5d <+237>:   je     0x7ffff7de7aa0 <_dl_fixup+304>
   0x00007ffff7de7a5f <+239>:   test   r8,r8
   0x00007ffff7de7a62 <+242>:   je     0x7ffff7de7aa8 <_dl_fixup+312>
   0x00007ffff7de7a64 <+244>:   mov    rax,QWORD PTR [r8]
   0x00007ffff7de7a67 <+247>:   movzx  edx,BYTE PTR [rsi+0x4]
   0x00007ffff7de7a6b <+251>:   add    rax,QWORD PTR [rsi+0x8]
   0x00007ffff7de7a6f <+255>:   and    edx,0xf
   0x00007ffff7de7a72 <+258>:   cmp    dl,0xa
   0x00007ffff7de7a75 <+261>:   je     0x7ffff7de7b10 <_dl_fixup+416>
   0x00007ffff7de7a7b <+267>:   mov    edx,DWORD PTR [rip+0x215267]        # 0x7ffff7ffcce8 <_rtld_global_ro+72>
   0x00007ffff7de7a81 <+273>:   test   edx,edx
   0x00007ffff7de7a83 <+275>:   jne    0x7ffff7de7a88 <_dl_fixup+280>
   0x00007ffff7de7a85 <+277>:   mov    QWORD PTR [rbx],rax
   0x00007ffff7de7a88 <+280>:   add    rsp,0x10
   0x00007ffff7de7a8c <+284>:   pop    rbx
   0x00007ffff7de7a8d <+285>:   ret    
   0x00007ffff7de7a8e <+286>:   xchg   ax,ax
   0x00007ffff7de7a90 <+288>:   xor    r8d,r8d
   0x00007ffff7de7a93 <+291>:   jmp    0x7ffff7de7a0d <_dl_fixup+157>
   0x00007ffff7de7a98 <+296>:   nop    DWORD PTR [rax+rax*1+0x0]
   0x00007ffff7de7aa0 <+304>:   xor    eax,eax
   0x00007ffff7de7aa2 <+306>:   jmp    0x7ffff7de7a7b <_dl_fixup+267>
   0x00007ffff7de7aa4 <+308>:   nop    DWORD PTR [rax+0x0]
   0x00007ffff7de7aa8 <+312>:   xor    eax,eax
   0x00007ffff7de7aaa <+314>:   jmp    0x7ffff7de7a67 <_dl_fixup+247>
   0x00007ffff7de7aac <+316>:   nop    DWORD PTR [rax+0x0]
   0x00007ffff7de7ab0 <+320>:   mov    DWORD PTR fs:0x1c,0x1
   0x00007ffff7de7abc <+332>:   mov    eax,0x5
   0x00007ffff7de7ac1 <+337>:   jmp    0x7ffff7de7a22 <_dl_fixup+178>
   0x00007ffff7de7ac6 <+342>:   nop    WORD PTR cs:[rax+rax*1+0x0]
   0x00007ffff7de7ad0 <+352>:   xor    eax,eax
   0x00007ffff7de7ad2 <+354>:   xchg   DWORD PTR fs:0x1c,eax
   0x00007ffff7de7ada <+362>:   cmp    eax,0x2
   0x00007ffff7de7add <+365>:   jne    0x7ffff7de7a55 <_dl_fixup+229>
   0x00007ffff7de7ae3 <+371>:   mov    rdi,QWORD PTR fs:0x10
   0x00007ffff7de7aec <+380>:   xor    r10d,r10d
   0x00007ffff7de7aef <+383>:   add    rdi,0x1c
   0x00007ffff7de7af3 <+387>:   mov    edx,0x1
   0x00007ffff7de7af8 <+392>:   mov    esi,0x81
   0x00007ffff7de7afd <+397>:   mov    eax,0xca
   0x00007ffff7de7b02 <+402>:   syscall 
   0x00007ffff7de7b04 <+404>:   jmp    0x7ffff7de7a55 <_dl_fixup+229>
   0x00007ffff7de7b09 <+409>:   nop    DWORD PTR [rax+0x0]
   0x00007ffff7de7b10 <+416>:   call   rax
   0x00007ffff7de7b12 <+418>:   jmp    0x7ffff7de7a7b <_dl_fixup+267>
   0x00007ffff7de7b17 <+423>:   lea    rcx,[rip+0x10862]        # 0x7ffff7df8380 <__PRETTY_FUNCTION__.10645>
   0x00007ffff7de7b1e <+430>:   lea    rsi,[rip+0xea8f]        # 0x7ffff7df65b4
   0x00007ffff7de7b25 <+437>:   lea    rdi,[rip+0x1081c]        # 0x7ffff7df8348
   0x00007ffff7de7b2c <+444>:   mov    edx,0x4f
   0x00007ffff7de7b31 <+449>:   call   0x7ffff7df1210 <__GI___assert_fail>
End of assembler dump. 
```

这就是这次旅程的全部内容。dl_lookup_symbol 函数用于解析 elf 文件和使用符号，这就是 pfm 发生的地方。

# google-fusion-tables - fusion-tables 自动填充新记录中的字段

> ID：11768920
> 
> 赞同：0
> 
> 时间：2012-08-01T23:15:36.757
> 
> 标签：google-fusion-tables

我正在使用融合表来存储客户端数据库。我有大约 300 条客户及其安装的记录，但我需要添加维修记录。我需要一种创建“修复”票证的简单方法，其中可以看到来自特定客户记录的大部分信息，而无需为每次额外的修复手动复制信息。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:13:16.223

对于您的用例，我将创建另一个包含修复的表，其中包含某种用于识别客户端的键列。这可以是客户的名称或只是一个数字 (id)。

当您拥有新的修复表和现有的客户表时，您可以简单地[创建一个所谓的合并表](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=171254)。这个新表包含维修和客户的信息。如果您在其中一个表中添加或更改数据，合并表会自动包含此数据。

从技术上讲，合并表是[左外连接 (SQL)](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)。

# c# - sosex.mbp 或 sosex.mbm 设置的断点不起作用

> ID：11768921
> 
> 赞同：12
> 
> 时间：2012-08-01T23:15:41.227
> 
> 标签：c#, .net, debugging, windbg, sosex

我正在使用 VS.NET 2010。我编译了一个非常简单的 .NET 4.0 应用程序。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestWindbg
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.ReadLine();
            Func1();
        }

        static void Func1()
        {
            int i = 0;
            int j = i + 2;
            Console.WriteLine(j);
        }
    }
} 
```

我打开windbg 6.12.0002.633编译的可执行文件。键入以下命令以加载 sosex

```
.loadby sosex clr 
```

然后，输入以下命令来设置断点

```
!mbm TestWindbg.Program.Func1
!mbp Program.cs 16 
```

然后运行程序。没有一个破发点被击中。

任何的想法？

*** 编辑 ***

在这里，我根据 Marc 的要求粘贴有关我的环境的更多详细信息

```
0:004> !mbl
1 eu: disable *!TESTWINDBG.PROGRAM.FUNC1 ILOffset=0: pass=1 oneshot=false thread=ANY
2 eu: disable Program.cs, line 16: pass=1 oneshot=false thread=ANY
0:004> .chain
Extension DLL search Path:
    C:\Program Files\Debugging Tools for Windows (x64)\WINXP;C:\Program Files\Debugging Tools for Windows (x64)\winext;C:\Program Files\Debugging Tools for Windows (x64)\winext\arcade;C:\Program Files\Debugging Tools for Windows (x64)\pri;C:\Program Files\Debugging Tools for Windows (x64);C:\Program Files\Debugging Tools for Windows (x64)\winext\arcade;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\10.0\DLLShared\;C:\Program Files (x86)\Shoreline Communications\ShoreWare Client\;C:\Program Files (x86)\Perforce;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files (x86)\Microsoft SQL Server\90\Tools\binn\
Extension DLL chain:
    C:\Windows\Microsoft.NET\Framework64\v4.0.30319\sosex: image 4.5.0.0, API 1.0.0, built Mon May 21 11:39:36 2012
        [path: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\sosex.dll]
    dbghelp: image 6.11.0001.404, API 6.1.6, built Wed Feb 25 18:10:27 2009
        [path: C:\Program Files\Debugging Tools for Windows (x64)\dbghelp.dll]
    ext: image 6.11.0001.404, API 1.0.0, built Wed Feb 25 18:10:26 2009
        [path: C:\Program Files\Debugging Tools for Windows (x64)\winext\ext.dll]
    exts: image 6.11.0001.404, API 1.0.0, built Wed Feb 25 18:10:17 2009
        [path: C:\Program Files\Debugging Tools for Windows (x64)\WINXP\exts.dll]
    uext: image 6.11.0001.404, API 1.0.0, built Wed Feb 25 18:10:20 2009
        [path: C:\Program Files\Debugging Tools for Windows (x64)\winext\uext.dll]
    ntsdexts: image 6.1.7015.0, API 1.0.0, built Wed Feb 25 18:09:22 2009
        [path: C:\Program Files\Debugging Tools for Windows (x64)\WINXP\ntsdexts.dll]
0:004> sx
  ct - Create thread - ignore
  et - Exit thread - ignore
 cpr - Create process - ignore
 epr - Exit process - break
  ld - Load module - output
  ud - Unload module - ignore
 ser - System error - ignore
 ibp - Initial breakpoint - break
 iml - Initial module load - ignore
 out - Debuggee output - output

  av - Access violation - break - not handled
asrt - Assertion failure - break - not handled
 aph - Application hang - break - not handled
 bpe - Break instruction exception - break
bpec - Break instruction exception continue - handled
  eh - C++ EH exception - second-chance break - not handled
 clr - CLR exception - second-chance break - not handled
clrn - CLR notification exception - second-chance break - handled
 cce - Control-Break exception - break
  cc - Control-Break exception continue - handled
 cce - Control-C exception - break
  cc - Control-C exception continue - handled
  dm - Data misaligned - break - not handled
dbce - Debugger command exception - ignore - handled
  gp - Guard page violation - break - not handled
  ii - Illegal instruction - second-chance break - not handled
  ip - In-page I/O error - break - not handled
  dz - Integer divide-by-zero - break - not handled
 iov - Integer overflow - break - not handled
  ch - Invalid handle - break
  hc - Invalid handle continue - not handled
 lsq - Invalid lock sequence - break - not handled
 isc - Invalid system call - break - not handled
  3c - Port disconnected - second-chance break - not handled
 svh - Service hang - break - not handled
 sse - Single step exception - break
ssec - Single step exception continue - handled
 sbo - Stack buffer overflow - break - not handled
 sov - Stack overflow - break - not handled
  vs - Verifier stop - break - not handled
vcpp - Visual C++ exception - ignore - handled
 wkd - Wake debugger - break - not handled
 wob - WOW64 breakpoint - break - handled
 wos - WOW64 single step exception - break - handled

   * - Other exception - second-chance break - not handled 
```

*** 编辑 2012 年 8 月 17 日 ***

感谢科林史密斯，我认为您得到了最接近的答案。我将我的程序编译为 32 位程序。切换到使用 32 位 Windbg 和 32 位 sosex。按照相同的步骤设置断点。现在，如果我这样做`!mbl`。断点列表的显示方式不同。

```
0 e : disable *!TESTWINDBG.PROGRAM.FUNC1 ILOffset=0: pass=1 oneshot=false thread=ANY
    TestWindbg!TestWindbg.Program.Func1() (PENDING JIT) 
```

以前，我没有看到这条线`(PENDING JIT)`。继续程序，Windbg 成功停在断点处。

我不知道为什么 64 位程序不起作用。我仔细检查了我的 64 位 sosex.dll 和我的 64 位程序符号路径。一切看起来都是正确的。也许，这是 sosex.dll 中的错误？

我正在使用 .NET 4.0，并且我的 windbg 在 Windows 2008 R2 64 位中运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T12:01:23.227

以下是一些建议，需要检查的事项：

## 在设置断点之前等待模块加载

您可以尝试等到运行时/JITter/模块加载/初始化之后再设置断点。

采用：

*   `sxe ld:mscorlib`       （加载运行时后中断）...或
*   `sxe ld:clrjit`           （加载 JITter 后中断）...或
*   `sxe ld:MyModuleAssemblyName`       （加载特定模块后中断）

这将导致调试器在它们发生后中断......然后你可以做你的`!mbm`，等等。

## 检查您的程序私有符号（来自它的 .pdb）是否已正确加载

采用：

*   `lml`    （显示已加载和未能加载符号）
*   `lme`    （仅显示未能加载符号）。

您也可以使用`!sym noisy`符号加载活动的详细跟踪，例如帮助发现您何时损坏了 .pdb 等。

有关一些 PDB 相关错误代码的有用参考：

*   [http://www.codeproject.com/script/Content/ViewAssociatedFile.aspx?rzp=%2FKB%2FDLL%2FSymbols_File_Locator%2FSources.zip&zep=SymbolsParser%2FDiaErrorTranslator.cpp&obid=37883&obtid=2&ovid=3](http://www.codeproject.com/script/Content/ViewAssociatedFile.aspx?rzp=%2FKB%2FDLL%2FSymbols_File_Locator%2FSources.zip&zep=SymbolsParser%2FDiaErrorTranslator.cpp&obid=37883&obtid=2&ovid=3)

有关验证符号是否正确加载的一般讨论，请参见：

*   [http://msdn.microsoft.com/en-us/library/windows/hardware/ff560260(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff560260(v=vs.85).aspx)

## 使用 32 位或 64 位 WinDBG

此外，您是否可以尝试在 32 位调试器而不是 64 位调试器下运行您的程序（当然还要使用 32 位 SOSEX 插件...并编译为 x86）...看看您是否得到相同的结果。

## 使用最新版本的 SOSEX

在 Steves Techspot 中，他说他破坏了 XP 中的兼容性（您似乎正在使用它）......也许这就是问题所在。（日期：2012 年 6 月 8 日）

*   [http://www.stevestechspot.com/FixForXPIncompatibility.aspx](http://www.stevestechspot.com/FixForXPIncompatibility.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-22T20:09:20.757

作为替代方案，只要您可以控制源代码，就可以尝试在 C# 代码中添加 DebugBreak 语句。Windbg 将在编译成二进制文件后中断

C# 中 DebugBreak 的一个很好的参考 [如何在 C# 中使用 DebugBreak()？](https://stackoverflow.com/questions/104235/how-can-i-use-debugbreak-in-c)

# jquery - HTML5 画布绘制阻止动画正确运行

> ID：11768922
> 
> 赞同：1
> 
> 时间：2012-08-01T23:15:50.610
> 
> 标签：jquery, html, canvas

所以我有一个巨大的数据集，我正在 HTML5 画布上绘制，所以绘制它大约需要 3 秒。所以在那三秒钟内，我需要显示一个加载栏来向用户传达正在发生的事情。基本上，在这段时间里，我正在绘制一个屏幕外的画布，该画布在我的应用程序使用期间用作缓存。我想在发生这种情况时更新加载栏，但由于某种原因，jquery 忽略了我在绘图完成后调整加载栏大小的调用，此时加载栏有点没用，因为它只是跳到 100%

所以这是我想要做的事情的要点......

```
function drawStuff() {
    for(p in points) {
        points[p].draw();
        updateLoadingBar(p/points.length);
    }

}

function updateLoadingBar(percent) {
    $('#loading_bar').width(percent+'%');
} 
```

这段代码有点简单。不，它实际上并没有在循环中获取 DOM 元素，但这更简洁并且具有相同的结果。重要的是整个浏览器都锁定了，什么也没有发生。在任何其他语言中，您只需启动一个工作线程来执行此操作，但这不是一个选项，所以我想知道在做大量工作的同时保持响应式 UI 的最佳方法是什么。

谢谢。

# facebook - Facebook Tab App 画布停留在 800 像素高度

> ID：11768923
> 
> 赞同：1
> 
> 时间：2012-08-01T23:15:56.083
> 
> 标签：facebook, iframe, canvas, height, facebook-javascript-sdk

我正在尝试开发和应用程序，画布大小固定为 800px。我希望它比 800px 高度延伸得更远。它下面的所有内容都会被切断。

此代码紧跟在标签之后。

```
<div id="fb-root"></div>
<script type="text/javascript">
window.fbAsyncInit = function() {
    FB.init({
        appId : 'APP_ID_HERE',
        status : true, // check login status
        channelUrl : '/channel.html', // Channel File
        cookie : true, // enable cookies to allow the server to access the session
        xfbml : true // parse XFBML
    });
    FB.Canvas.setAutoGrow();
};

(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));
</script> 
```

任何帮助，将不胜感激。提前致谢。

编辑：这是一个 Facebook 标签应用程序。

# python - wxPython - 正确关闭另一个脚本

> ID：11768927
> 
> 赞同：0
> 
> 时间：2012-08-01T23:16:16.757
> 
> 标签：python, memory-management, wxpython

我编写了一个调用另一个脚本的 wx GUI。我导入我的脚本并将一个按钮绑定到在导入的脚本中调用 main() 的函数。一切都运转良好。

我没有正确关闭我访问的脚本。我知道这一点是因为该脚本操作 numpy 数组，并且每次运行 GUI 时，我的内存占用都会随着数组的大小而增加。显然，从命令行运行这不是问题，因为解释器退出并且内存被清除。

在不重新启动 GUI 的情况下从内存中清除我之前运行的脚本的正确方法（规范）是什么。我应该在 GUI 中还是在被调用的脚本中执行此操作？

```
from myscript import *

....

#Submit / Cancel
    submit_button = wx.Button(self.panel, label="Submit")
    self.Bind(wx.EVT_BUTTON, lambda e:self.ParseArgs(e, self.args),submit_button)
    self.sizer.Add(submit_button, pos=(10,0), flag=wx.LEFT, border=10)

....

def ParseArgs(self, e, arg):
    inputarg = []
    inputarg.append(arg['input'])
    pystretch.main(arg, inputarg) 
```

# c++ - 在函数声明和参数上使用引用是什么意思？

> ID：11768928
> 
> 赞同：-1
> 
> 时间：2012-08-01T23:16:21.560
> 
> 标签：c++

在这个例子中：

```
template <typename T>
inline T const& Max (T const& a, T const& b)  { 
    return a < b ? b : a; 
} 
```

具体这部分：

```
...const& Max (T const& a, T const& b)... 
```

我不明白它`&`是用来做什么的。我可以在没有 的情况下实现相同的功能`&`，它仍然可以工作。在这里获取地址有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:32:49.080

> 我可以在没有 & 的情况下实现相同的功能，它仍然可以工作。

不，你不能。删除＆符号，您将拥有一个非常不同的功能。这个新函数复制传递给它的参数并返回一个副本。使用 & 符号时，该函数不会进行复制。返回值是较大输入的别名。

这是另一个例子：去掉`const`参数和返回值的限定符。通过此更改，可以在分配的左侧使用该功能。没有＆符号，您将无法做到这一点。

```
#include <iostream>

template <typename T>
inline T & Max (T & a, T & b)  {   
   return a < b ? b : a;  
}

int main () {
  int a = 1;
  int b = 2;

  Max(a,b) = 42; 

  std::cout << "a=" << a << " b=" << b << "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:21:07.137

在这种情况下 & 符号不是获取地址，而是创建引用变量。将引用视为始终取消引用的指针。这不是它的实际情况，但它是解释它的最简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:27:13.437

其背后的思考过程基本上是，“我想通过引用传递（无论出于何种原因），当我这样做时，我想确保它在此过程中不会改变。我将修改带 const 的参数。”。

它是引用的事实意味着您没有将值复制到新范围（函数）中。相反，您指的是调用您的函数的范围内的原始版本。const 的原因只是为了保证值不会改变。

[阅读http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)上的“通过 const 参考”部分

关于 const 使用的许多细节的更详尽解释： [http ://en.wikipedia.org/wiki/Const-correctness](http://en.wikipedia.org/wiki/Const-correctness)

# c# - 调用列表视图中每个选定项目的方法

> ID：11768931
> 
> 赞同：-2
> 
> 时间：2012-08-01T23:16:30.257
> 
> 标签：c#, listview, selecteditem

我想调用一个方法，该方法为列表视图中的每个选定项目接收一个字符串。

```
foreach (string item in lvwPoliciesAvailableForHoldBack.SelectedItems)
                {
                    Database.HoldBackPolicy(item);
                } 
```

我遇到了这个错误：

无法将“System.Windows.Forms.ListViewItem”类型的对象转换为“System.String”类型。

这是“HoldBackPolicy”方法：

```
public int HoldBackPolicy(string PolicyNumber)
        {
            int result = 0;

            SqlCommand cmd = new SqlCommand("spHoldBackPolicy", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@PolicyNumber", PolicyNumber);

            var returnParameter = cmd.Parameters.Add("@RETURN_VALUE", SqlDbType.Int);
            returnParameter.Direction = ParameterDirection.ReturnValue;

            try
            {
                conn.Open();
                cmd.ExecuteNonQuery();
                result = Convert.ToInt32(returnParameter.Value);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message.ToString());
            }
            finally
            {
                conn.Close();
            }
            return result;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:35:42.760

您不能将 ListViewItem 转换为字符串。错误说明了一切。

这一行：

```
foreach (string item in lvwPoliciesAvailableForHoldBack.SelectedItems) 
```

是错的。一定是这样的：

```
foreach (ListViewItem item in lvwPoliciesAvailableForHoldBack.SelectedItems) 
```

而这个函数调用，一定是这样的：

```
Database.HoldBackPolicy(item.Text); 
```

# javascript - Jquery UI手风琴标题格式

> ID：11768932
> 
> 赞同：0
> 
> 时间：2012-08-01T23:17:03.247
> 
> 标签：javascript, jquery, html, css, jquery-ui

我在我的 JQuery UI 模式对话框中使用 JQuery UI 手风琴。我的代码与我在网上找到的几个工作示例相同（尤其是[http://jsfiddle.net/eKb8J/](http://jsfiddle.net/eKb8J/)）。怀疑罪魁祸首与 CSS 相关，但不知道如何解决该问题。

我正在使用 JQuery UI 1.8.7 和 JQuery 1.7.2。

**问题** 本质上，箭头和标题垂直条与手风琴标题不对齐，使其看起来非常草率。我希望标题与箭头和标题垂直条出现在同一行。发布的问题截图：http: [//i.stack.imgur.com/rpn1H.png](http://i.stack.imgur.com/rpn1H.png)

任何帮助将不胜感激！

当我使用 Ctrl-Shift-I 查看 FireFox 中的元素时，我得到： 应用于手风琴元素的 CSS：http: [//i.stack.imgur.com/DCpSe.png](http://i.stack.imgur.com/DCpSe.png) 应用于标题元素的 CSS手风琴：http: [//i.stack.imgur.com/iD2tM.png](http://i.stack.imgur.com/iD2tM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:21:54.763

我们可以查看代码的 URL 会很有帮助。此外，尝试下载最新版本的 Firefox，访问您的页面，然后单击 Ctrl+Shift+I。然后单击有问题的元素。这是缩小 CSS 罪魁祸首的一种非常快速的方法。

# java - java.lang.Error - 未解决的编译错误

> ID：11768933
> 
> 赞同：2
> 
> 时间：2012-08-01T23:17:04.733
> 
> 标签：java, eclipse, lwjgl

我收到这个奇怪的错误，

```
java.lang.Error: Unresolved compilation problem: 
    The code of method render(GameContainer, StateBasedGame, Graphics) is 
    exceeding the 65535 bytes limit 
```

人们一直在告诉我分解字节或其他东西，我不知道他们的意思或如何做到这一点渲染是一个具有图形 g 和基于状态的游戏和游戏容器的空白。有人可以向我解释如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:22:02.710

[正如这里](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html#40222)所指出的，谈论类：

> code_length 项的值必须小于 65536。

这意味着您不能超过 64kb 的原始字节码。

无论如何，我认为这是您遇到的最少的问题，因为您根本不应该在单个文件中达到该限制。只需上课：

*   如果您使用的是内部类，只需将它们提取到单独的文件中
*   如果您没有使用内部类，那么代码中应该有一些真正的错误，因为这意味着方法很长，请考虑重构方法

# c++ - 假设指针为结构

> ID：11768937
> 
> 赞同：0
> 
> 时间：2012-08-01T23:18:17.090
> 
> 标签：c++

我记得在 MASM32 编译器上的指令 ASSUME 让我将指针假定为结构。有什么方法可以在 C++ 中做到这一点吗？例如我想这样做：

```
char* test = new char [sizeof MyStruct + MAX_REALIGN];
MyStruct* data = test;
data.member = 1; 
```

我需要这个的原因是因为我有一个指向结构的指针，我需要用新数据重新编译它，增加原始结构的大小并重新对齐它们的一些成员。重新编译完成后，我将不再引用新结构，我只需要在重新编译之前引用。

这听起来有点难以理解，但问题很简单：有没有办法将指针作为结构引用？（我知道它不安全、不便携等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:21:31.053

Reinterpret_cast 将任何指针类型转换为任何其他指针类型，甚至是不相关的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:38:37.003

`MyStruct* data = reinterpret_cast<MyStruct*>(test);`

或者，您可以使用 c 样式强制转换，在这种情况下，它在功能上是等效的。

`MyStruct* data = (MyStruct*)test;`

这[通常是不推荐](https://www.securecoding.cert.org/confluence/display/cplusplus/EXP05-CPP.+Do+not+use+C-style+casts)的，因为 c 风格的强制转换将值强制转换为您所说的任何内容。但是，这基本上就是您对 reinterpret-cast 所做的事情，因此更简洁的语法可能是值得的（尽管我会质疑您为什么一开始就这样做）。

# css - 在 Rails 3 中导入 LESS 变量

> ID：11768944
> 
> 赞同：2
> 
> 时间：2012-08-01T23:18:47.597
> 
> 标签：css, ruby-on-rails-3, asset-pipeline, less

我的资产文件夹中有一个 global.less 文件，我在其中定义了许多站点范围的变量。

为了在其他较少的文件中使用这些变量，我目前将其放在每个文件的顶部：

```
@import 'global'; 
```

这可以很好地加载一切，但是现在我将全局副本加载到每个更少的文件中。我想知道是否有一种方法可以在项目中只编写一次导入，并且其他较少的文件能够访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T04:05:25.877

There are just two small things you need to do to make this happen.

1.  Make `application.css` a .less file by renaming it to `application.less` or `application.css.less`.

2.  Remove the `require_tree .` sprocket directive, which would import the files in the stylesheets directory on its own, removing your ability to define the order.

Once those things are done, it should work as you expect, simply:

```
// in global.less
@foo: #FFFFFF;

// in foo.less
.foo {
  background-color: @foo;
}

// and finally in application.less
@import 'global';
@import 'foo'; 
```

# java - 将 IEEE 754 双精度转换为字符串的纯 Java 代码

> ID：11768945
> 
> 赞同：3
> 
> 时间：2012-08-01T23:19:05.713
> 
> 标签：java, string, double, ieee-754

`long`我有一个包含 IEEE 754 表示的64 位`double`。我想像标准 Java 一样将它转换为字符串`Double.toString(d)`。但是，我不能使用`Double`该类的任何方法，因为它们是错误的。（`String.valueOf(d)`也`"" + d`不起作用，因为它们在`Double.toString(d)`内部使用。`NumberFormat`不起作用，因为它失去了精度。）所以我需要纯 Java 代码来进行转换。

我在哪里可以找到这样的代码？我尝试了 GNU Classpath 的源代码，但它使用本机方法进行此转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:30:35.290

我搜索了一下，发现：[dtoa.java](http://www.jarvana.com/jarvana/view/rhino/js/1.6R6/js-1.6R6-sources.jar!/org/mozilla/javascript/DToA.java?format=ok)。看起来很复杂，但代码是在 GPL 许可（或 Mozilla Public License 1.1 许可）下的。

我希望它会帮助你。

（我什至发现了你提到的[错误。）](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4511638)

编辑：

[Andrew Thompson] 是对的，你经常（总是？）失去浮点精度。[正如这里](https://stackoverflow.com/a/322875/1564493)所指出的，您可能想要使用[`BigDecimal`](http://java.sun.com/j2se/1.5.0/docs/api/java/math/BigDecimal.html)

# perl - 珀尔 | 哈希中的受祝福对象 | 玫瑰::DB::对象

> ID：11768946
> 
> 赞同：1
> 
> 时间：2012-08-01T23:19:25.357
> 
> 标签：perl, rose-db-object

我试图弄清楚为什么我无法访问元素内部的祝福引用：

这是我的模块：

```
package Test::Node

__PACKAGE__->meta->setup(
    table   => 'node',

    columns => [
        id                             => { type => 'serial', not_null => 1 },
        name                           => { type => 'varchar', length => 128, not_null => 1 },
    ],

    primary_key_columns => [ 'id' ],

    relationships =>
    [ 
      alias =>
      { 
        type       => 'one to many',
        class       => 'Test::Alia',
        column_map => { id => 'asset_id' },
      },
], 
```

这是我要测试的子：

```
sub SearchNode {
  my $self = shift;
  my ($opts) = shift;
  my %query = (name => { like => "$opts->{name}%"});
  my %object = (with_objects => ['alias']);
  $object{query} = [%query] if $opts->{name};

  my $records = Test::Node::Manager->get_node(%object);
  my $i = 0;  
  my $record = {}; 
  $record->{page} = 1;
  $record->{total} = 1;
  foreach (@$records) {
    my %items =(
      id => $_->id,
      name => $_->name,
      alias => $_->alias->alias
    );  
    $record->{rows}[$i] = \%items; 
    $i++;
  }   
  $record->{records} = $i; 
  return $record;
} 
```

如果我使用 $_->alias 我得到以下返回：

```
$ ./search.pl 
$VAR1 = {
          'page' => 1,
          'records' => 1,
          'rows' => [
                      {
                        'name' => 'test.localhost.net',
                        'id' => '1234',
                        'alias' => bless( {
                                            'node_id' => '1234',
                                            'id' => '5678',
                                            'alias' => 'server1.localhost.net'
                                          }, 'Test::Alia' )
                      }
                    ],
          'total' => 1
        }; 
```

如果我使用 $_->alias->alias，我会收到一个错误：

```
./search.pl 
Can't call method "alias" on unblessed reference at /usr/local/lib/perl/Test/Node.pm line 41. 
```

我有点困惑，因为 Dumper 输出显示 Alias 的值是有福的，这似乎与错误消息相矛盾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:46:43.867

Dumper 输出显示`$_->alias` 返回哈希引用，而不是对象。要访问结构中的别名对象，您需要以下内容：

```
$_->{rows}[0]{alias}; 
```

要访问该对象的别名方法：

```
$_->{rows}[0]{alias)->alias; 
```

# php - 两个 Post 请求，并且不改变变量

> ID：11768948
> 
> 赞同：2
> 
> 时间：2012-08-01T23:19:33.693
> 
> 标签：php, javascript, ajax, variables, select

好的，基本上这是我的页面：当页面加载时，它会向我的 php 文件发送 Ajax Post 请求，并发送两个变量 - ida=yes 和 xquery=dropdown。该代码在这里：

```
function ddmenu() {
var xmlhttp;
if (window.XMLHttpRequest) {
    // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else {
    // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
var url = "dex.php";
var params = "xquery=dropdown&ida=yes";
xmlhttp.open("POST", url, true);
//Send the proper header information along with the request
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.setRequestHeader("Connection", "close");
xmlhttp.onreadystatechange = function() {
    //Call a function when the state changes.
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        document.getElementById("dropdown").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.send(params);
} 
```

这个 Ajax 请求激活了这个 100% 正确工作的 PHP。

```
$xquery = $_POST['xquery'];
// If $xquery is a dropdown.
if ($xquery = "dropdown") {
$dd = "SELECT * FROM tablename";
$ddq = mysql_query($dd) or die('Error: '.mysql_error ());
echo 'Choose your Pokemon: <select id="tableid" onchange="tableloader()">';
while ($row = mysql_fetch_array($ddq)) {
    echo '<option value="'.$row['pokemon_name'].'">'.$row['natdex'].'-'.$row['pokemon_name'].'</option>';
}
echo "</select>".$xquery;
} 
```

此处生成的选择列表，在其值更改时使用下一个函数。页面上的另一个选择列表也使用了这个功能。

现在，我还有第二个函数，它在下拉列表的值更改时运行。现在这个函数还发送一个 Ajax Post 请求，以及 xquery 和 ida 变量。我的问题是，当我在我的 php 页面上回显我的 xquery 变量时，它仍然将 xquery 设置为下拉列表。当它应该以表格形式出现时。正如代码基本上如下所述：

```
function tableloader(str) {
var xmlhttp;
if (window.XMLHttpRequest) {
    // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else {
    // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
var url = "dex.php";
var var1 = document.getElementById("gendrop").value;
var var2 = document.getElementById("tableid").value;
var params = "xquery=tables&ida=yes&var1="+var1+"&var2="+var2;
xmlhttp.open("POST", url, true);
//Send the proper header information along with the request
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length", params.length);
xmlhttp.setRequestHeader("Connection", "close");
xmlhttp.onreadystatechange = function() {
    //Call a function when the state changes.
    if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        document.getElementById("searchdisplay").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.send(params);
} 
```

现在这个函数，从第一个函数中生成的下拉值中获取值，并且还使用这个下拉列表中的下拉值：

```
<select id="gendrop" onchange="tableloader(this.value)">
    <option value="all">All</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">2</option>
    <option value="4">4</option>
    <option value="4">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
</select> 
```

现在最后，我的问题是为什么我不能得到我的两个下拉菜单的值，为什么它没有改变我的 xquery 变量而是将相同的东西输出到我的 php 文件，即使它是不同的 ajaz 请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:32:28.583

听起来你可能有冲突的变量。您应该`var xmlhttp`在每个函数的顶部单独声明您的。请参阅此之前的帖子：

[如何阻止 XMLHTTP 相互冲突？](https://stackoverflow.com/questions/8513263/how-to-stop-xmlhttp-from-clashing-with-each-other)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:57:41.323

我拉了很多头发后才弄清楚。是 PHP 的挑剔习惯之一，我需要 == 我的 if 语句而不是 =。多谢你们。

# magento - Magento：不一致的 URL 重写

> ID：11768950
> 
> 赞同：3
> 
> 时间：2012-08-01T23:20:18.113
> 
> 标签：magento, url-rewriting

在我们的 Magento 安装中，URL 重写有一个奇怪的行为，我很难相信它没有任何问题。仅供参考，我目前有...

系统 --> 配置 --> 目录 --> 目录 --> SEO --> 如果 URL 密钥更改为“否”，则为 URL 创建永久重定向

还

我已经尝试从 System -> Index Management 重新索引 URL 重写。这似乎并*没有*删除已经存在的重写。

当我通过数据馈送上传产品时，我将`url_key`列留空，以便 Magento 可以使用产品名称创建自己的产品。因此，如果我上传一个名为 的产品`White Shirt A`，它将创建一个目标到请求路径`catalog/product/view/id/1234`到`mydomain.com/white-whirt-a.html`. 但是，如果我从管理面板中完全删除此产品，并重新上传我之前使用的相同数据馈送，Magento 不会删除预览 URL 映射到`mydomain.com/white-whirt-a.html`. 相反，它会创建一个新的 URL 规则`mydomain.com/white-whirt-a-1.html`（或有时`mydomain.com/white-whirt-a-1234.html`出于某种原因使用产品 ID）。请注意，在管理员中，产品`mydomain.com/white-whirt-a.html`的 URL 密钥是不正确的。

一些问题：

1.  我不想创建`...-1.html`or `...-1234.html`。如何防止获得这些“连字符”链接？

2.  更大的问题是该`url_key`产品的管理和目录导出文件显示`mydomain.com/white-whirt-a.html`可用。当实际 URL 为`mydomain.com/white-whirt-a-1.html`.. 时发生了什么？

3.  Magento 何时使用产品 ID 创建 URL 重写？IE`mydomain.com/white-whirt-a-1234.html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:09:18.317

尝试重新索引您的 url 重写：系统 > 索引管理 [目录 url 重写]

如果您有很多产品，可能会出现网关超时，如果发生这种情况，您可以尝试从命令行执行它，它位于：[magentoRoot]/shell/indexer.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:22:58.440

似乎 Magento，或者至少我们当前的版本，一旦创建 URL 重写，就不会删除它，无论设置是什么或当前目录中是否存在相应的产品。因此，如果您上传 ID 为 1234 的产品并稍后删除该产品，则 URL 重写将保留在`core_url_rewrite`. 无论出于何种原因再次上传此产品，它都会有一个新的产品 ID，当然，例如 5678，但由于产品 ID 1234 存在 URL 重写，因此它的名称与产品 ID 1234 相同，因此您最终会`...-1.html`得到新的重写。我已经要求 Magento 提供帮助，但他们只是不太明白我要解释的内容。同时，清空表格`core_url_rewrite`将适用于开发站点。

# jquery - JQuery .serializeArray() 在输入框中的 < 之后删除文本

> ID：11768953
> 
> 赞同：0
> 
> 时间：2012-08-01T23:20:40.953
> 
> 标签：jquery, serializearray

使用 .serializeArray() 并且如果我在文本框中输入说 Jim<Test，则 Jquery 只会选择 Jim。他们可以解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:25:15.923

**工作演示** [http://jsfiddle.net/xyBS3/](http://jsfiddle.net/xyBS3/)

我看不到你的代码，但你可以尝试输入`jim<test`，它会让你这样做。

希望对事业有所帮助。`:)`

**代码**

```
$('pre').text(JSON.stringify($('#f').serializeArray(), null, '  '));

$('input').keyup(function() {
    $('pre').text(JSON.stringify($('#f').serializeArray(), null, '  '));
});​ 
```

# google-bigquery - 使用本地文件通过 java 库加载 Google BigQuery 表

> ID：11768957
> 
> 赞同：3
> 
> 时间：2012-08-01T23:21:10.733
> 
> 标签：google-bigquery

有没有办法通过 BigQuery Java 库从本地 CSV 文件加载表？当我尝试将本地文件 URI 传递给 JobConfigurationLoad.setSourceUris() 时，我收到错误“源 URI 必须是 Google 存储位置”。

相关，如果我需要先将文件上传到 Google Cloud Storage，如果我在将文件加载到 BigQuery 后立即从云存储中删除文件，我需要支付什么费用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T09:26:52.523

使用 Bigquery 插入方法：

```
public Insert insert(String projectId, com.google.api.services.bigquery.model.Job content,
        com.google.api.client.http.AbstractInputStreamContent mediaContent) 
```

您有 2 个 AbstractInputStreamContent 的实现：FileContent、InputStreamContent

例如：

```
val content = FileContent("application/octet-stream", new File("csv","data.csv")
val insertReq = bigquery.jobs().insert(PROJECT_ID, insertJob, content)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:21:50.467

您可以使用多部分 mime 请求直接上传文件...请参阅[此处](https://developers.google.com/bigquery/docs/developers_guide#uploadtablestorage)的 bigquery 导入文档。java中没有例子，但是python中有一个应该比较容易适应。但是，如果您要处理非常大的文件，最好先将文件上传到 Google Cloud Storage。

如果您将文件暂存到 Google Cloud Storage 然后删除它们，您可能需要支付最多 24 小时的存储费用（我不确定，但肯定不会超过 24 小时的存储时间）。

# performance - Haskell 中的初筛

> ID：11768958
> 
> 赞同：10
> 
> 时间：2012-08-01T23:21:14.760
> 
> 标签：performance, haskell, time-complexity, primes, sieve-of-eratosthenes

我对 Haskell 很陌生，我只是想找到前 200 万个素数的总和。我正在尝试使用筛子生成素数（我认为是 Eratosthenes 的筛子？），但它真的很慢，我不知道为什么。这是我的代码。

```
sieve (x:xs) = x:(sieve $ filter (\a -> a `mod` x /= 0) xs)
ans = sum $ takeWhile (<2000000) (sieve [2..]) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T01:31:18.293

它非常慢，因为该算法是一个不停留在平方根的试除法。

如果您仔细查看算法的作用，您会看到对于每个 prime `p`，其不具有较小素因数的倍数将从候选列表中删除（先前已删除具有较小素因数的倍数）。

因此，每个数字都被所有素数除，直到它作为其最小素数除数的倍数被删除，或者如果它是素数，它出现在剩余候选者列表的开头。

对于合数来说，这并不是特别糟糕，因为大多数合数都有小的素数除数，在最坏的情况下，最小的素数除数`n`不会超过`√n`.

但是素数被*所有*更小的素数整除，所以直到第 k^个素数被发现是素数，它已经被所有`k-1`更小的素数整除。如果存在`m`低于极限`n`的质数，则找到所有质数所需的工作是

```
(1-1) + (2-1) + (3-1) + ... + (m-1) = m*(m-1)/2 
```

师。根据素[数定理](http://en.wikipedia.org/wiki/Prime_number_theorem)，下面的素数`n`是渐近的`n / log n`（其中`log`表示自然对数）。消除复合材料的工作可以粗略地受到`n * √n`除法的限制，因此`n`与在素数上花费的工作相比，这不是可以忽略不计的。

对于 200 万的素数，特纳筛需要大约 10 ^(10)格。此外，它需要解构和重建大量列表单元格。

止于平方根的试除法，

```
isPrime n = go 2
  where
    go d
      | d*d > n        = True
      | n `rem` d == 0 = False
      | otherwise      = go (d+1)

primes = filter isPrime [2 .. ] 
```

将需要少于 1.9*10 ⁹个除法（粗略估计，如果*每次* `isPrime n`检查都进行`√n`- 实际上，它只需要 179492732，因为复合材料通常很便宜）^(（1）)和更少的列表操作。此外，通过跳过偶数（除了`2`）作为候选除数，可以轻松改进此试验除法，这将所需除法的数量减半。

Eratosthenes 的筛子不需要任何除法，只使用`O(n * log (log n))`操作，这要快得多：

`primeSum.hs`：

```
module Main (main) where

import System.Environment (getArgs)
import Math.NumberTheory.Primes

main :: IO ()
main = do
    args <- getArgs
    let lim = case args of
                (a:_) -> read a
                _     -> 1000000
    print . sum $ takeWhile (<= lim) primes 
```

并以 1000 万的限制运行它：

```
$ ghc -O2 primeSum && time ./primeSum 10000000
[1 of 1] Compiling Main             ( primeSum.hs, primeSum.o )
Linking primeSum ...
3203324994356

real    0m0.085s
user    0m0.084s
sys     0m0.000s 
```

我们让试用部门只跑到 100 万（固定类型为`Int`）：

```
$ ghc -O2 tdprimeSum && time ./tdprimeSum 1000000
[1 of 1] Compiling Main             ( tdprimeSum.hs, tdprimeSum.o )
Linking tdprimeSum ...
37550402023

real    0m0.768s
user    0m0.765s
sys     0m0.002s 
```

而特纳筛子只到100000：

```
$ ghc -O2 tuprimeSum && time ./tuprimeSum 100000
[1 of 1] Compiling Main             ( tuprimeSum.hs, tuprimeSum.o )
Linking tuprimeSum ...
454396537

real    0m2.712s
user    0m2.703s
sys     0m0.005s 
```

* * *

^((1))粗略估计是

```
2000000
   ∑ √k ≈ 4/3*√2*10^9
 k = 1 
```

评估为两位有效数字。由于大多数数字是具有小素因数的复合数 - 一半的数字是偶数并且只需要一个除法 - 这大大高估了所需的除法数。

通过仅考虑素数可以获得所需除法数的下限：

```
 ∑ √p ≈ 2/3*N^1.5/log N
 p < N
p prime 
```

其中， for`N = 2000000`大约给出 1.3*10 ⁸。这是正确的数量级，但低估了一个重要的因素（增长缓慢下降到 1 `N`，并且永远不会大于 2 `N > 10`）。

除了素数之外，素数的平方和两个相近素数的乘积也需要试除法上升到（几乎）`√k`，因此如果有足够多的话，对整体工作的贡献很大。

然而，处理半素数所需的除法数受以下常数倍数的限制

```
N^1.5/(log N)^2 
```

所以对于非常大`N`的情况，相对于处理素数的成本来说，它变得可以忽略不计。但在试验划分完全可行的范围内，它们仍然有很大的贡献。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T16:05:30.630

这是[埃拉托色尼的筛子](http://www.haskell.org/haskellwiki/Prime_numbers#Sieve_of_Eratosthenes)：

**P** = { *3* , *5* , ...} \ **⋃** {{ *p ²* , *p ² +2p* , ...} | *p*中的**p** }

（没有 2）。:) 或者在“功能”中，即基于列表的 Haskell，

```
primes = 2 : g (fix g)  where
   g xs = 3 : (gaps 5 $ unionAll [[p*p, p*p+2*p..] | p <- xs])

unionAll ((x:xs):t) = x : union xs (unionAll $ pairs t)  where
  pairs ((x:xs):ys:t) = (x : union xs ys) : pairs t 
fix g = xs where xs = g xs
union (x:xs) (y:ys) = case compare x y of LT -> x : union  xs (y:ys)
                                          EQ -> x : union  xs    ys 
                                          GT -> y : union (x:xs) ys
gaps k s@(x:xs) | k<x  = k:gaps (k+2) s    
                | True =   gaps (k+2) xs 
```

与[augustss 答案](https://stackoverflow.com/a/11774190/849891)中的试验除法代码相比，它在生成 200k 素数时快 1.9 倍，在 400k 时快 2.1 倍，[经验时间复杂度](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth)为`O(n^1.12..1.15)`vs `O(n^1.4)`，在所述范围内。生成 100 万个素数时速度快 2.6 倍。

## 为什么特纳筛子这么慢

**因为它为每个素数过早**地打开了多重过滤流，所以最终会产生**太多**的素数。在输入中看到它的平方之前，我们不需要按素数进行过滤。

在[流处理范例](https://stackoverflow.com/a/8871918/849891)下看，`sieve (x:xs) = x:sieve [y|y<-xs, rem y p/=0]`可以看作是在其工作时在其背后创建流转换器的管道：

```
[2..] ==> sieve --> 2
[3..] ==> nomult 2 ==> sieve --> 3
[4..] ==> nomult 2 ==> nomult 3 ==> sieve 
[5..] ==> nomult 2 ==> nomult 3 ==> sieve --> 5
[6..] ==> nomult 2 ==> nomult 3 ==> nomult 5 ==> sieve 
[7..] ==> nomult 2 ==> nomult 3 ==> nomult 5 ==> sieve --> 7
[8..] ==> nomult 2 ==> nomult 3 ==> nomult 5 ==> nomult 7 ==> sieve 
```

哪里`nomult p = filter (\y->rem y p/=0)`。但是 8 还不需要检查是否可以被 3 整除，因为它小于`3^2 == 9`，更不用说被 5 或 7 整除了。

这是该代码中最严重的问题，尽管在每个人都提到的那篇文章的开头，它被认为是无关紧要的。通过推迟过滤器的创建来[修复它可以实现显着的加速。](http://www.haskell.org/haskellwiki/Prime_numbers#Postponed_Filters)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T23:57:19.607

你所做的不是埃拉托色尼筛；它是试用部门（注意 mod 运算符）。这是我的埃拉托色尼筛法：

```
import Control.Monad (forM_, when)
import Control.Monad.ST
import Data.Array.ST
import Data.Array.Unboxed

sieve :: Int -> UArray Int Bool
sieve n = runSTUArray $ do
    let m = (n-1) `div` 2
        r = floor . sqrt $ fromIntegral n
    bits <- newArray (0, m-1) True
    forM_ [0 .. r `div` 2 - 1] $ \i -> do
        isPrime <- readArray bits i
        when isPrime $ do
            forM_ [2*i*i+6*i+3, 2*i*i+8*i+6 .. (m-1)] $ \j -> do
                writeArray bits j False
    return bits

primes :: Int -> [Int]
primes n = 2 : [2*i+3 | (i, True) <- assocs $ sieve n] 
```

您可以在[http://ideone.com/mu1RN](http://ideone.com/mu1RN)运行它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T09:00:57.660

就个人而言，我喜欢这种生成素数的方式

```
primes :: [Integer]
primes = 2 : filter (isPrime primes) [3,5..]
  where isPrime (p:ps) n = p*p > n || n `rem` p /= 0 && isPrime ps n 
```

与此处建议的其他一些方法相比，它也相当快。它仍然是试除法，但它只测试素数。（不过，这段代码的终止证明有点棘手。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T00:21:48.450

您使用的算法根本不是筛子，因此就它的速度而言，您应该期望使用试除法。

素数大致出现平方根函数的频率......即在 1 和*n之间有大约**n/log(n)*素数。因此，对于前 200 万个素数，您将需要多达 3200 万个。但是您正在构建一个包含 200 万个元素的数据结构，这些素数将通过这些数据结构。所以你可以开始明白为什么这会这么慢。实际上是 O(n^2)。您可以将其减少到 O(n*(log n)*log(log n))

 *这是有关各种治疗方法的页面，将引导您了解如何减少它。 [http://en.literateprograms.org/Sieve_of_Eratosthenes_(Haskell)](http://en.literateprograms.org/Sieve_of_Eratosthenes_%28Haskell%29)*

# ios - 是否有可能拥有一台可以为不同客户构建不同风格的同一应用程序的构建机器？

> ID：11768959
> 
> 赞同：0
> 
> 时间：2012-08-01T23:21:18.387
> 
> 标签：ios, xcode

我工作的公司正在创建一个 iOS 应用程序，该应用程序的皮肤会根据客户的身份而有所不同（只有少数不同的客户，他们实际上是网络运营商）。

因此 99% 的代码是相同的，不同的是应用程序图标、图像、文本以及可能在各处进行的一些代码调整，以便每个应用程序都根据每个运营商的公司准则等进行品牌化。

最终结果将是一组不同的应用程序，它们实际上只是外观不同，但实际上都在做同样的事情。

然而，由于这些是不同的应用程序，我假设每个客户都必须实际注册一个 iOS 帐户并将其特定版本的应用程序自己提交到应用程序商店，这不是我们能够为他们做的事情。这个对吗？

假设是这样，那么我想知道我们是否仍然可以为他们构建应用程序并将构建的版本提供给他们提交，我正在考虑将所有不同的应用程序收集在一个工作区中，其中代码可以共享，但构建时会生成不同的应用程序。

由于它们将是不同的应用程序，因此它们需要使用不同的证书和配置文件等进行签名。这本身很容易做到 - 例如，每个应用程序都可以有自己的目标。

但我的问题是，是否可以在单个构建机器上放置不同的配置文件和证书等以构建所有这些不同的应用程序？我问的原因是因为在 Apple 的一个 XCode 视频中，评论员说：“构建需要作为已接受许可协议的用户在构建机器上运行”。

这是可能的事情吗，一台构建机器可以为不同的客户公司使用不同的配置文件/证书集创建不同的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:25:35.330

是的，一点没错。我在一家公司工作，我们向我们自己的 App Store 和多个客户的商店提交应用程序，并且我们已经多次在同一台机器上成功构建多个证书。

您将需要客户端的分发证书及其应用程序的配置文件，但是是的，一切都会正常工作。

* * *

啊，回答你问的第一个问题，我忘记了——是的，每个客户都需要自己的 iTunes Connect 帐户，但你*可以*为他们设置。他们可以创建帐户，然后给您密码，您可以为他们上传，如果他们担心安全性，他们可以重置密码。

# android - 如何在hierarchyviewer中将android复合控件显示为单个视图项

> ID：11768966
> 
> 赞同：1
> 
> 时间：2012-08-01T23:21:55.557
> 
> 标签：android, view, controls

我创建了一个简单的复合控件，其中包含一个 EditText 和一个位于其下方的 Button，用于清除 EditText 视图上的任何文本。

一切正常，但我想做的是在层次结构查看器中查看这个复合控件作为一个整体（或单个视图），但是每当我加载它时，我都会看到我的自定义控件（它扩展了 LinearLayout），以及两个子视图它包含。

我知道它可以做我想做的事，因为我在 Gmail 应用程序中看到了它，它使用自定义视图 (CanvasConversationHeaderView) 在 ListView 中显示电子邮件项目。

我需要这样做，因为在我的情况下，我的自定义复合控件包含比此示例更多的单个视图，因此我需要减少我的活动中的总视图数。

我希望有人可以帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:31:41.097

从gmail怎么知道`CanvasConversationHeaderView`是复合视图？

如果您指的是复合视图[`ViewGroup`](http://developer.android.com/reference/android/view/ViewGroup.html)，那么这就是hierarchyviewer的工作方式，它遍历树，将其`ViewGroup`视为内部节点和`View`叶子。如果您不想要这种行为，那么不要从`ViewGroup`(`LinearLayout`在这种情况下) 扩展。

# node.js - 在 Mongoose Schema 中返回“父”集合特定值

> ID：11768968
> 
> 赞同：3
> 
> 时间：2012-08-01T23:22:04.487
> 
> 标签：node.js, schema, express, return-value, mongoose

我需要的是从 Schema 方法返回一个特定的“父”值：

我有两个架构：

```
var IP_Set = new Schema({
    name: String
}); 
```

和

```
var Hash_IP = new Schema({
    _ipset      : {
        type: ObjectId,
        ref: 'IP_Set'
    },
    description : String
}); 
```

在`Hash_IP`架构中，我希望有以下方法：

```
Hash_IP.methods.get_parent_name = function get_parent_name() {
    return "parent_name";
}; 
```

所以当我运行时：

```
var hash_ip = new Hash_IP(i);
console.log(hash_ip.get_parent_name()) 
```

我可以获得关联实例的`IP_Set`名称值。`Hash_IP`

到目前为止，我有以下定义，但我无法返回名称：

```
Hash_IP.methods.get_parent_name = function get_parent_name() {
    this.model('Hash_IP').findOne({ _ipset: this._ipset })
        .populate('_ipset', ['name'])
        .exec(function (error, doc) {
            console.log(doc._ipset.name);
        });
}; 
```

我试过了：

```
Hash_IP.methods.get_parent_name = function get_parent_name() {
    this.model('Hash_IP').findOne({ _ipset: this._ipset })
        .populate('_ipset', ['name'])
        .exec(function (error, doc) {
           return doc._ipset.name;
        });
}; 
```

没有结果。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:06:30.033

我相信你已经很亲近了。你的问题不是很清楚，但我认为

```
.populate('_ipset', ['name'])
.exec(function (error, doc) {
  console.log(doc._ipset.name);
}); 
```

正在工作并且

```
.populate('_ipset', ['name'])
.exec(function (error, doc) {
   return doc._ipset.name;
}); 
```

不是？

不幸的是，异步`return`没有按照您希望的方式工作。

`.exec`调用您的回调函数，该函数返回名称。但是，这不会将名称作为 的返回值返回`get_parent_name()`。那样就好了。（想象一下`return return name`语法。）

像这样传入回调`get_parent_name()`：

```
Hash_IP.methods.get_parent_name = function get_parent_name(callback) {
    this.model('Hash_IP').findOne({ _ipset: this._ipset })
        .populate('_ipset', ['name'])
        .exec(callback);
}; 
```

您现在可以`instance_of_hash_ip.get_parent_name(function (err, doc) { ... do something with the doc._ipset.name ... });`在您的代码中使用。

## 奖金答案;）

如果您经常使用父母的名字，您可能希望始终在初始查询中返回它。如果将`.populate(_ipset, ['name'])`Hash_IP 实例放入查询中，则无需在代码中处理两层回调。

只需将`find()`or `findOne()`，后跟`populate()`放入模型的一个不错的静态方法中。

### 奖励答案的奖励示例:)

```
var Hash_IP = new Schema({
    _ipset      : {
        type: ObjectId,
        ref: 'IP_Set'
    },
    description : String
});

Hash_IP.statics.findByDescWithIPSetName = function (desc, callback) {
    return this.where('description', new RegExp(desc, 'i'))
        .populate('_ipset', ['name']) //Magic built in
        .exec(cb)
};

module.exports = HashIpModel = mongoose.model('HashIp', Hash_IP);

// Now you can use this static method anywhere to find a model 
// and have the name populated already:

HashIp = mongoose.model('HashIp'); //or require the model you've exported above
HashIp.findByDescWithIPSetName('some keyword', function(err, models) {
   res.locals.hashIps = models; //models is an array, available in your templates
}); 
```

现在，每个模型实例都已经定义了 models._ipset.name。享受 ：）

# database - 多对多关系 - 大表的查询性能

> ID：11768969
> 
> 赞同：1
> 
> 时间：2012-08-01T23:22:10.793
> 
> 标签：database, django, database-design, many-to-many, relational-database

假设这是我的架构：

```
class modelA(models.Model):
  b = models.ManyToManyField(through='linkModel')

class modelB(models.Model):
  name = models.CharField()

class linkModel(models.Models):
  a = models.ForeignKey(modelA)
  b = models.ForeignKey(modelB)
  (other link-relevant stuff) 
```

在查找链接到 A 的 B 实例时，我会在什么时候遇到查询性能问题，反之亦然。100,000 行？百万？

使用单个 ForeignKey 关系而不是 ManyToMany（在某些情况下可能重新排列架构）会提供更好的性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T00:06:41.500

根据我不熟悉的框架的行为，连接可能会传递到后备数据库服务器以执行。如果是这种情况，那么您会发现索引效率为 O(log n)，并且阻塞点不是连接，而是结果集的大小。

假设有能力的模式设计和索引，批量数据操作性能*总是*由工作集的大小决定的。

要获得适用于您的数据库服务器、框架和应用程序逻辑的特定组合的明确答案，您将不得不执行测试，这可能与现代实践脱节，令人震惊。

您不一定需要使用大型复杂应用程序进行测试。您可以将有趣的应用程序代码摘录到测试应用程序中。不过，您*将*需要大量数据。

如果您希望有人已经测试过您的特定场景，那么您需要详细描述您的配置。您已经提供了示例应用程序逻辑，这是一个好的开始。

数量惊人的事物会产生干扰。例如，在 Microsoft SQL Server 2008 数据库上打开 Auto-shrink 选项会产生巨大的开销，并将 TPM 数字减少大约 3 倍。您必须找到并记录这些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:47:06.080

除了[Peter Wone 所说](https://stackoverflow.com/a/11769298/533120)的之外，这里是数据库中应该存在的“理想”联结表结构，以便 JOIN 的两个“方向”以最佳方式执行：

*   具有由 2 个 FK 组合而成的复合 PK。
*   具有与 PK 完全“反向”的备用索引。
*   两个索引（主索引和备用索引）都被压缩，以最小化重复前沿字段的开销。
*   没有代理键（所以我们不需要第三个索引）。
*   是[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)的。由于备用索引已经包含所有 PK 字段（只是以相反的顺序），因此通常没有与聚簇表中的备用索引相关的开销。并且由于它[涵盖](http://use-the-index-luke.com/sql/glossary/covering-index)了 JOIN，因此没有双重查找。

Oracle 语法如下所示：

```
CREATE TABLE LINK_MODEL (
    MODEL_A_ID INT,
    MODEL_B_ID INT,
    PRIMARY KEY (MODEL_A_ID, MODEL_B_ID),
    FOREIGN KEY (MODEL_A_ID) REFERENCES MODEL_A (MODEL_A_ID),
    FOREIGN KEY (MODEL_B_ID) REFERENCES MODEL_B (MODEL_B_ID)
) ORGANIZATION INDEX COMPRESS;

CREATE INDEX LINK_MODEL_IE1 ON LINK_MODEL (MODEL_B_ID, MODEL_A_ID) COMPRESS; 
```

这样，查询给定 A 的 B 只需要对索引进行简单的范围扫描，即`LINK_MODEL`，无需任何表堆访问（根本没有表堆）。查询给定 B 的 As 需要对 进行简单的范围扫描`LINK_MODEL_IE1`，也不需要任何表堆访问。

不幸的是，并非所有数据库都支持集群和索引压缩，但您应该尽可能多地实现这些，只要您的 DBMS 和 ORM 允许您这样做。

# c++ - C++模板类友元运算符重载

> ID：11768970
> 
> 赞同：4
> 
> 时间：2012-08-01T23:22:13.350
> 
> 标签：c++, templates, operator-overloading, friend

我正在尝试制作一个通用矢量类，既是为了我自己的代码片段库，也是为了练习模板类。本质上，Vector 类是模板化的，允许您选择它的精度是 float、double、long double 等。

我遇到的问题是为了缩放向量而重载 * 运算符。排除所有工作重载和成员函数后，类定义如下所示：

```
#pragma once

#include <math.h>   //  for sqrt function when normalizing

template <typename T> class Vector;
template <typename T> Vector<T> operator*(const Vector<T>& obj);

template <typename T> class Vector {
private:
    //  Attributes:
    static const int DIMS = 3;
    T component[DIMS];

public:
    enum { 
        X, Y, Z
    };

public:
    //  Constructors:
    Vector(void) {
        for (int i=0; i<DIMS; ++i) {
            component[i] = T();
        }
    }
    Vector(T x, T y, T z) {
        component[X] = x;
        component[Y] = y;
        component[Z] = z;
    }

    //  Destructor:
    ~Vector(void) { }

    //  Scaling:
    friend Vector<T> operator*(const Vector<T>& obj);
    Vector operator*(const T scale) {
        Vector<T> result = Vector<T>();

        for (int i=0; i<DIMS; ++i) {
            result.component[i] = component[i] * scale;
        }

        return result;
    }
};

template <typename T>
Vector<T> operator*(const Vector<T>& obj) {
    Vector<T> result = Vector<T>();

    for (int i=0; i<DIMS; ++i) {
        result.component[i] = obj.component[i] * this*;
    }

    return result;
} 
```

在我的主要方法中，我有以下几行代码：

```
Vector<float> testVector1 = Vector<float>(1.0f, 0.0f, 0.0f);
Vector<float> testVector2 = Vector<float>(0.0f, 1.0f, 0.0f);
Vector<float> testVector3 = 10.0f * testVector1;
Vector<float> testVector4 = testVector2 * 10.0f; 
```

除了一个错误之外，一切都编译得很好：虽然 main() 中的第四行工作正常（将向量乘以标量），但第三行（将标量乘以向量）给了我错误：

`Error 1 error C2677: binary '*' : no global operator found which takes type 'Vector<T>' (or there is no acceptable conversion)`

我对这个问题的最佳猜测是编译器不知道我试图重载哪个原语的 * 运算符，而且我不能直接告诉它，因为类在传递到模板之前不会知道类型。有没有办法完成我正在尝试做的事情，或者模板必须始终遵循运算符重载的类？

**更新：** 多亏了 jwismar 和其他人，我发现了左手超负荷的错误尝试。类中函数的定义现在是：

```
friend Vector<T> operator*(T scalar, const Vector<T>& obj); 
```

它的实现是：

```
template <typename T> 
Vector<T> operator*(T scalar, const Vector<T>& obj) {
    Vector<T> result = Vector<T>();

    for (int i=0; i<DIMS; ++i) {
        result.component[i] = obj.component[i] * scalar;
    }

    return result;
} 
```

类上方重载的初始声明是 now `template <typename T> Vector<T> operator*(T scalar, const Vector<T>& obj);`，但无论它是否被注释掉，我都会得到相同的错误。

现在我要讨论一个关于模板和运算符重载的更具体的问题。编译器现在停止编译，尽管错误现在是未解决的外部错误：

`Error 1 error LNK2019: unresolved external symbol "class Vector<float> __cdecl operator*(float,class Vector<float> const &)" (??D@YA?AV?$Vector@M@@MABV0@@Z) referenced in function _main C:\Users\D03457489\Desktop\UVCTester\UVCTester\main.obj UVCTester`

所以编译器告诉我它可以找到定义`operator*(float, Vector<float>)`但找不到实现。所以新的问题是：这是我的另一个基本疏忽的结果，还是不可能以这种方式使用模板来生成操作数左侧未知的运算符重载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:44:52.150

`operator*`是一个**二元**运算符，它需要两个参数，这意味着您可以将其实现为应用于左侧并接受参数（右侧）的成员函数或作为接受两个参数的自由函数。通常最好将其实现为自由功能。当您希望能够实现时更是如此，`double*Vector<T>`因为左侧不是一个类。该重载的签名将是：

```
template <typename T>
Vector<T> operator*( T d, Vector<T> v ); 
```

您可能要添加的内容：

```
template <typename T>
Vector<T> operator*( Vector<T> v, T d ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:36:56.783

不是第 4 行有错误，而是第 3 行。编译器正在寻找一个在左侧有一个浮点数的内置函数，但它找不到。您将需要定义一个自由函数，例如：

```
template <typename T> Vector<T> operator*(T scalar, const Vector<T>& obj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:37:45.770

试试这个函数签名（未测试）：

```
template <typename T, typename F>
Vector<T> operator*(const F &lhs, const Vector<T>& rhs); 
```

它应该允许以下语句：

```
auto vec = f * other_vec; 
```

对于任何`F`具有已定义运算符的类型：

```
template <typename F, typename T>
undetermined operator*(const F& lhs, const T &rhs); 
```

where`T`是用于 的类型`Vector<T>`，并且返回的类型可以隐式转换为`T`。

所以以下可能会起作用：

```
long l;
float f;
int i;
//.......

Vector<float> v1;
v2 = l * v1;
v3 = f * v2;
v4 = i * v3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:31:41.900

您需要定义一个函数，允许在`*`. 幸运的是，这相对容易实现：

```
template <typename T>
Vector<T> operator*(const T scale, const Vector<T> &v) {
    Vector<T> result = v;
    return result * scale;
} 
```

您在两个 s 之间进行组件明智乘法的其他函数`Vector`未正确声明和实现。它不需要成为朋友：

```
/*friend*/ Vector<T> operator*(const Vector<T>& obj); 
```

并将其作为类的方法实现：

```
template <typename T>
Vector<T> Vector<T>::operator*(const Vector<T>& obj) {
    Vector<T> result = Vector<T>();

    for (int i=0; i<DIMS; ++i) {
        result.component[i] = obj.component[i] * component[i];
    }

    return result;
} 
```

# java - 来自 Main 的函数调用

> ID：11768978
> 
> 赞同：1
> 
> 时间：2012-08-01T23:23:06.147
> 
> 标签：java, function, main

我有函数 A、函数 B 和函数 C

我正在尝试从 Main 随机调用其中一个函数（A 或 B 或 C）。

我该怎么做呢？

我可以将函数放在一个名为 FunctionList 的数组列表中吗

然后进行以下操作？

```
int x = (int)(Math.random() * Functionlist.size());
FunctionCall = FunctionList.get(x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:26:08.443

如果函数的数量很少，最简单的方法是 a `switch`,

```
switch((int)(Math.random()*NUM_FUNCTIONS) {
    case 0:
        functionA();
        break;
    case 1:
        functionB();
        break;
  //  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:37:18.533

Java 不支持函数指针。一种解决方法是有条不紊地命名您的函数，即 f1、f2、f3 等……然后根据该模式创建一个 Method 对象。例如，使用函数名 f1、f2、f3，您可以这样做：

```
java.lang.reflect.Method method;
try {
  methodName = "f" + String.valueOf((int) Math.random()*NUM_FUNCTIONS);
  method = obj.getClass().getMethod(methodName, param1.class, param2.class, ..); 
} catch (SecurityException e) {
  // ...
} catch (NoSuchMethodException e) {
  // ...
} 
```

然后像这样调用函数：

```
try {
  method.invoke(obj, arg1, arg2,...);
} catch (IllegalArgumentException e) {
} catch (IllegalAccessException e) {
} catch (InvocationTargetException e) { 
```

[*这个答案是从这里](https://stackoverflow.com/questions/160970/how-do-i-invoke-a-java-method-when-given-the-method-name-as-a-string)大量借来的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:15:47.160

我会以标准方式模拟函数对象，方法是创建 - 可能是匿名的 -`Function<T>`使用方法实现某些接口的类`call(T arg)`，或者甚至`Runnable`，如果没有参数的话。这些实例可以放入一个集合中

# c# - Linq to sql 中的最新日期

> ID：11768979
> 
> 赞同：1
> 
> 时间：2012-08-01T23:23:26.430
> 
> 标签：c#, linq-to-sql

假设我有一个名为 Storage 的表，其中包含此类记录

```
Item_Id      |  Date            |   Price
1            |  01/01/2011      |   50
1            |  03/26/2012      |   25  
2            |  04/21/2012      |   20
3            |  08/02/2012      |   15
3            |  09/02/2012      |   13
4            |  10/02/2012      |   18 
```

我想使用 linq to sql 获取 Item_Id 以及与之关联的最新日期（在这种情况下它将是“4”）。

我正在使用这个表达式

```
var lastDate= Storage
                    .GroupBy(s => s.Item_Id)
                    .Select(grp => new {
                      grp.Key,
                      LastDate = grp.OrderByDescending(
                             x => x.Date).First()
                    }).ToList(); 
```

我得到一个列表，其中包含每个 item_Id 的最新日期。所以下一步将是获得所有这些中最高的，但我被困在那里。

实际上，最终我需要跳过查询中的一些 Item_Id，但我想我可以在 Select 之前添加一个 where，例如 Where(s => s.Item.Id {这里是一个表达式检查它是否在我通过的列表中）。

我会很感激任何提示，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:45:29.183

这对您的需要有用吗？

```
var highestDateID = Storage.OrderByDescending(x => x.Date).Select(x => x.Item_Id).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:51:27.077

为什么不

```
var lastDateId = Storage
  .GroupBy(s => s.Item_Id)   
  .Select(grp => new { Id = grp.Key, LastDate = grp.Max(x=>x.Date) })
  .OrderBy(o=>o.LastDate).Take(1).Id; 
```

甚至

```
var lastDateId = Storage.OrderByDescending(o=>o.LastDate).Take(1).Id; 
```

如果你需要完整的记录

```
var record = Storage
  .Where(w=>w.Id == Storage.OrderByDescending(o=>o.LastDate).Take(1).Id)
  .First(); 
```

# javascript - 浏览器的点对点库

> ID：11768981
> 
> 赞同：1
> 
> 时间：2012-08-01T23:24:20.980
> 
> 标签：javascript, flash, html

浏览器中点对点连接的选项我能想到的有WebRTC（PeerConnection）、Flash/Java/Silverlight。

考虑到 WebRTC 没有大规模实现，我决定选择 Flash 选项，但我的应用程序是基于 HTML5 的，所以我找到了这个 [https://github.com/empaempa/P2P.js](https://github.com/empaempa/P2P.js)

我不确定它是否适合我的目的（VNC/RDP），但我即将找到答案。

关键是 - 是否有一个**库**可以将浏览器中的点对点选项与 JavaScript 界面统一起来。我想要与 socket.io 对套接字所做的相同 - 首先尝试 WebSocket，然后回退到 Flash 仿真，然后到 AJAX 等。但是，这应该用于 P2P 连接 - 首先尝试 WebRTC，然后尝试 Flash，然后是 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:06:56.707

我不知道尝试 Javascript 然后 Flash 的库。我建议您找到一个可以很好地与 Javascript 或 Flash 配合使用的库，然后使用它。

通常，我会说使用 Javascript 和 HTML5，但您提到 VNC/RDP，其中涉及视频。根据用例，Flash 有时会更好地处理视频。但是，如果您只是接收和播放视频，并通过套接字发回命令，那么 HTML5 就可以了。

# iphone - 如果开关关闭，则删除表格视图单元格

> ID：11768982
> 
> 赞同：0
> 
> 时间：2012-08-01T23:24:33.730
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我有一个显示很多单元格的表格视图（我用故事板制作），在其他视图中有一个开关，我希望当这个开关关闭时，它所代表的单元格从表格视图中消失，带开关的视图通过标签栏连接到表格视图。

我该怎么做？我不知道！

![我的故事板](../Images/290e3257561eefa99b9557c06a27e022.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:16:56.920

当开关关闭时，调用`[tableView reloadData]`并在您的`tableView:numberOfRowsInSection:`检查开关的属性中查看它是否已关闭。如果关闭，则返回 0。

# javascript - 自动禁用浏览器选项（显示输入元素中保存的单词）

> ID：11768985
> 
> 赞同：0
> 
> 时间：2012-08-01T23:24:50.677
> 
> 标签：javascript, browser, input

> **可能重复：**
> [如何在 Web 表单字段/输入标签上禁用浏览器自动完成功能？](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tag)

在输入文本中，如果写例如单词：“ford”，浏览器会保存这个词，第二次，如果在输入文本中写符号“f”，在输入元素下方，浏览器会显示这个词（福特）是吗？我有站点输入元素，我想为我的输入元素禁用此选项。请告诉，如何使这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:26:39.537

你可能不知道这叫做自动完成。一旦你知道你会更容易找到有关它的信息。

请参阅：[如何在 Web 表单字段/输入标签上禁用浏览器自动完成功能？](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tag)

# objective-c - 如何删除以编程方式创建的按钮？

> ID：11768987
> 
> 赞同：0
> 
> 时间：2012-08-01T23:24:59.010
> 
> 标签：objective-c, xcode, button

对于这种情况，删除以编程方式创建的按钮的代码是什么，例如：

```
for (m=0; m<f;m++ )
    {
        numerodeboton=partenumero+m+1;
        //NSLog(@"crear boton2, %i", numerodeboton);
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [button setBackgroundImage:[UIImage imageNamed:@"boton.png"] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(notasCurso)forControlEvents:UIControlEventTouchUpInside];
        [button setTitle:[NSString stringWithFormat:@"Botón %d", numerodeboton] forState:UIControlStateNormal];
        button.frame = CGRectMake(espacioh+m*(h+d)-z + h/2, y + (l-1)*(v+d) + v/2, 1, 1);
        button.layer.cornerRadius = 30;
        button.clipsToBounds = YES;
        button.layer.borderColor=[UIColor blackColor].CGColor;
        button.layer.borderWidth=0.01f;
        [button setTitleColor:[UIColor darkGrayColor] forState:UIControlStateNormal];
        button.tag = numerodeboton;
        [UIView animateWithDuration:0.05*numerodeboton animations:^{
            button.frame = CGRectMake(espacioh+m*(h+d)-z, y + (l-1)*(v+d), h, v);
        }];
        [self.view addSubview:button];
    } 
```

假设我想删除带有 的按钮`tag = 3`，代码是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:28:39.197

该行将`[[self.view viewWithTag:3] removeFromSuperview];`获取带有标签 3 的按钮，然后将其删除。如果您有多个标签为 3 的按钮，只需像这样遍历它们：

```
while (UIView *aView = [self.view viewWithTag:3]) {
    [aView removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:31:07.787

我想更安全的方法是使用`[button removeFromSuperview]`，这将在它被保留后自动释放内部视图`addSubView:`。

当然，您需要一种方法来检索正确的按钮，您可以

*   取回它`viewWithTag:`
*   `NSMutableArray`如果您需要更快的速度，请保留它们的一个或一个普通的 C 数组

# javascript - 使用 console.log'd 对象

> ID：11768992
> 
> 赞同：1
> 
> 时间：2012-08-01T23:25:41.470
> 
> 标签：javascript, google-chrome

我打电话给：

```
console.log(some_random_object); 
```

…Chrome 正在帮助将对象转储到控制台中。这很好，因为我可以看到很多有用的东西，但有时我想实际*使用*该对象，看看它如何响应某些东西，就在控制台中。

有什么方法可以将先前`console.log`的对象分配给变量，以便我可以开始弄乱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:13:38.640

使用包装器`console.log()`：

```
function log() {
    window.logHistory = window.logHistory || [];
    if (console) {
        window.logHistory.push(arguments);
        console.log.apply(console, arguments);
    }
}

log("Test");
log({
    test: 1,
    team: "Abc"
});
log(window.logHistory);​ 
```

演示：http: [//jsfiddle.net/pratik136/DY4Sk/](http://jsfiddle.net/pratik136/DY4Sk/)

* * *

**输出：**

![在此处输入图像描述](../Images/d567faa006f9406e5dfaae766aeb9881.png)

# iphone - 用值填充 UISlider

> ID：11768994
> 
> 赞同：0
> 
> 时间：2012-08-01T23:25:47.617
> 
> 标签：iphone, objective-c, xcode

我正在我的应用程序中创建搜索功能，但在为我的 UISlider 计算代码时遇到了一些麻烦。滑块在情节提要中创建并连接起来。我有一个带有字典数组作为信息源的 .plist。字典包含有关葡萄酒的信息。

* * *

*   滑块应表示字典中“价格”键的值。我为它选择了数字，所以其中一些就像 78,900000000001。换句话说，他们需要两位小数的格式。

*   minimumValue = 字典中的最小值，向下舍入到最接近的 10（如果最小值 = 67,90，则 minimumValue = 60），如果这不是太复杂的话。

*   maximumValue = 最大值，但四舍五入到最接近的 10。

*   供用户设置可选的最低价格，因此默认位置应为 minimumValue。

*   我希望它在滑动时步进 5 个数字，例如 70、75、80、85、90 等

* * *

到目前为止，这是 UISlider 的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
self.navigationItem.title = @"Search";

NSString *path = [[NSBundle mainBundle] pathForResource:@"Wines" ofType:@"plist"];
allObjectsArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

minSlider.continuous = YES;
[minSlider setMinimumValue: ]; // Lowest value rounded down to closest 10
[minSlider setMaximumValue: ]; // Highest value rounded up to closest 10

[minSlider addTarget:self
           action:@selector(minValueChanged:) 
 forControlEvents:UIControlEventValueChanged];

minText.text = minSlider.minimumValue // <--- or something like that
}

- (void)minValueChanged:(UISlider*)sender
{
 // And something here for change of value and text field
minText.text = current slider value
} 
```

你能帮我完成这个吗？在询问之前，我是根据从研究中学到的知识开始的。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:18:49.280

这有点取决于你的 plist 的结构，但你没有告诉我们......我假设它看起来像

> ```
> <array>
>   <dict>
>     <key>name</key>
>     <string>Bordeaux</string>
>     <key>price</key>
>     <real>75.40</real>
>   </dict>
>   <dict>
>     <key>name</key>
>     <string>Chardonnay</string>
>     <key>price</key>
>     <real>29.90</real>
>   </dict>
> </array> 
> ```

这是您确定最小值和最大值的方法：

```
NSNumber *minValue = [allObjectsArray valueForKeyPath:@"@min.price"];
NSNumber *maxValue = [allObjectsArray valueForKeyPath:@"@max.price"]; 
```

这是你如何四舍五入的数字：

```
float roundedDown = ((int)[minValue floatValue]/10)*10.0;
float roundedUp = ((int)[maxValue floatValue]/10)*10.0 +10; 
```

这是设置滑块最小值的方式：

```
minSlider.minimumValue = [minValue floatValue]; 
```

这是使标签仅显示 5 的倍数的方法：

```
-(void)minValueChanged:(UISlider*)sender {
    minText.text = [NSString stringWithFormat:@"%.0f", 
       5.0 * ((int) (sender.value / 5) + 0.5)];
} 
```

# sql - 反序查询结果

> ID：11768996
> 
> 赞同：1
> 
> 时间：2012-08-01T23:26:00.367
> 
> 标签：sql, sqlite

我希望查询返回结果的顺序有点由内而外。我有一张客户订单表，我想检索 N 个最旧的订单来处理，但这样做是为了最大限度地增加正在处理的不同客户的数量。我将其描述为“反排序”，因为排序顺序使得通常彼此相邻的事物尽可能地展开。

```
CREATE TABLE custorders (
  order_id integer PRIMARY KEY,
  customer,
  data
);

INSERT INTO custorders VALUES 
  (1,'joe','xyz'),
  (2,'joe','abc'),
  (3,'joe','def'),
  (4,'sam','qwe'),
  (5,'sam','rty'); 
```

我可以通过以下方式为每个客户获取最旧的订单

```
SELECT * 
FROM custorders
WHERE order_id IN 
(
 SELECT MIN(order_id) FROM custorders GROUP BY customer
); 
```

但是我一直试图为每个客户获取 2 个最旧的订单，或者（我真正想要的）所有客户的 10 个最旧的订单，以最大限度地增加不同客户的数量。也就是说，如果有 20 个客户，它将给出 10 个不同的客户，但如果只有 8 个不同的客户都有多个挂单，那么结果中会出现 2 个客户多次。

我在 sqlite 3 中工作，因此使用特定于其他数据库的函数的解决方案没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T18:30:53.017

SQLlite 似乎不支持 TOP 关键字。按客户分组的子查询中的限制 10 可能会给您 10 个客户，而不是每个客户的前 10 个。

自己实施顶...

我在这里调整了一个 mysql 解决方案，所以任何有 sqllite 经验的人想要清理它，请随意。像下面这样的东西应该可以工作。

我们需要映射 order_id 以便我们有每个客户的连续值。我们想分配由我们的客户自动订购的 rowid，然后是他的 order_id 以升序排列，所以我们首先获得最旧的。rowid 是一个隐藏字段，如果我们不使用主键，它将为我们分配。

```
CREATE TEMP TABLE temp(
  order_id INTEGER,
  customer text,
  data text
) AS SELECT * FROM custorders ORDER BY customer, order_id ASC; 
```

现在我们有 rowid 来确定每个客户的前 10 个是什么

```
SELECT t1.* FROM temp AS t1 JOIN (
  SELECT customer, MIN(rowid) AS min FROM temp GROUP BY customer
) AS t2 ON t2.min + 10 < t1.rowid AND t2.customer = t1.customer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:30:02.580

你不能。SQL 不能做到这一点。

一般来说，SQL 无法跨行比较数据，只能在行内比较。

您正在尝试跨行（最旧的两个等）整理数据。

您可以尝试诸如此类`min(order_id) + 2`的技巧（找到`min`所有记录都大于其他记录的位置`min`），但它们不可扩展。

对不起。

PS。sqllite可能对此有一些特殊的功能，但我并不熟悉。我的回答一般是针对 SQL 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:34:54.577

尝试这样的事情。不过我还没有测试过。逻辑是只选择 2 个 order_id 值较低的记录，其中 MIN() 只会返回一个值。

```
 SELECT * FROM custorders
    WHERE order_id IN 
    (
    SELECT order_id FROM custorders GROUP BY customer
    ORDER BY order_id ASC
    LIMIT 2
    )
    ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:09:40.253

前言：这是未经测试的（对不起，这台笔记本电脑没有用 sqlfiddle 玩球）但我认为这可能对你有用：

```
select 
    out.customer,
    group_concat(
        select 
            a.order_id 
        from 
            custOrders a 
        where 
            a.customer=out.customer 
        order by 
            order_id asc 
        limit 2
    ) as outStanding
from
    custOrders out
limit 10 
```

# jquery - 授予权限后 Facebook 登录/连接窗口“冻结”（XD 代理）

> ID：11768998
> 
> 赞同：-1
> 
> 时间：2012-08-01T23:26:10.570
> 
> 标签：jquery, facebook, forms, facebook-javascript-sdk, facebook-login

我的网站是：[http ://bit.ly/OF9NHS](http://bit.ly/OF9NHS)

在页面下半部分的选择框上，当我单击 Facebook Connect 按钮然后登录时，它只是“挂起”并显示一个空白窗口并且什么也不做。

我怎样才能让它继续，以便将用户信息返回到我的表单？

我在这里搜索过，但没有找到适合我情况的任何解决方案。谢谢 ：-）

这是我的代码：

```
/////////////////////////////////////////////////////////////////////////////////////////////////////
 /// facebook + optin box scripts
 /////////////////////////////////////////////////////////////////////////////////////////////////////

    window.fbAsyncInit = function() {
      FB.init({
        appId      : '271302529636100', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
    };
    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));

//           FB.init({ 
//              appId:'271302529636100', cookie:true, 
//              status:true, xfbml:true 
//           });
        function register_with_fb_222(){

            FB.login(function(response) {

            if (response.authResponse) {
                FB.api('/me', register_user_fb_222);

            } else {
                alert('You need to Grant Permission to Register with Facebook.')
            }

        }, {scope:'email,user_about_me'});

        }
        function register_user_fb_222(user){
            document.getElementById('name1').value=user.first_name;
            document.getElementById('email1').value=user.email;
            document.forms['mainForm1'].submit.click();

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:18:16.593

你需要删除

```
 <div id="fb-root" class=" fb_reset">
    <div style="position: absolute; top: -10000px; height: 0px; width: 0px; ">
      <div>
        <iframe id="fb_xdm_frame_http" name="fb_xdm_frame_http" src="http://static.ak.facebook.com/connect/xd_arbiter.php?version=6#channel=f2929cfda&amp;origin=http%3A%2F%2Fwww.hinsdalearearugcleaning.com&amp;channel_path=%2F%3Ffb_xd_fragment%23xd_sig%3Df30d8d28b%26&amp;transport=postmessage"></iframe>
        <iframe id="fb_xdm_frame_https" name="fb_xdm_frame_https" src="https://s-static.ak.facebook.com/connect/xd_arbiter.php?version=6#channel=f2929cfda&amp;origin=http%3A%2F%2Fwww.hinsdalearearugcleaning.com&amp;channel_path=%2F%3Ffb_xd_fragment%23xd_sig%3Df30d8d28b%26&amp;transport=postmessage"></iframe>
      </div>
    </div>
  </div> 
```

从您的标记（顺便说一句，这是非常极端的！），您正在搞乱 JS SDK 的内部实现细节......

该页面正在加载超过 10MB 的资源，其中两个 PNG 超过 4MB...