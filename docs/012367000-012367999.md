# StackOverflow 问答 12367000-12367999

# backbone.js - 骨干追加模型在控制台中有效，但在 $(document).ready 之后无效

> ID：12367002
> 
> 赞同：1
> 
> 时间：2012-09-11T09:48:24.220
> 
> 标签：backbone.js, fetch, backbone-views, document-ready

我的最终目标是将 JSON 数据附加到`ul#tweets`，每个作为单独的隐藏列表项。然后，随着时间的推移，它们将一一出现，在屏幕上可见/显示，然后从`ul#tweets`列表中删除。

一旦隐藏项目的数量低于一定数量，我想重新附加 JSON 数据。发生这种情况时，我不担心重复的项目。

我尝试通过创建一个具有超时的函数来设置测试，以便每 5 秒将 JSON 数据附加到列表中。

但是，尽管我的应用程序可以很好地加载页面加载的初始数据，但是当我创建要在其中运行的函数时`$(document).ready({})`-它将无法正常工作。

但是，我确实知道，我可以在页面加载后在控制台中手动附加 JSON 数据（与下面的代码相同，而无需将其包装在函数或 doc.ready 中）。

谢谢您的帮助！

**功能：**

```
$(document).ready(function(){
   updateTweets = function() {

    newTweets = new Tweets();
    newTweets.fetch();

    newTweets.each( function(tweet) {

      console.log('test'); // this doesn't work
      view = new TweetView({ model:tweet });
      $('#tweets').append(view.render().el);
    });

    setTimeout(updateTweets, 5000);
  };
  updateTweets();

}); 
```

**这是我的代码**

```
// MODEL
window.Tweet = Backbone.Model.extend({});

// COLLECTION
window.Tweets = Backbone.Collection.extend({ model: Tweet, url: '/tweets' });

// SET GLOBAL VARIABLE FOR NEW TWEETS COLLECTION
window.tweetList = new Tweets();

$(document).ready(function() {

// MODEL VIEW
window.TweetView = Backbone.View.extend({
    tagName: 'li',
    className: 'tweet',

    initialize: function() {
        _.bindAll(this, 'render');
        this.model.bind('change', this.render);
        this.template = _.template($('#tweet-template').html());
    },

    render: function(){
        var renderedTweets = this.template(this.model.toJSON());
        $(this.el).html(renderedTweets);

        return this;
    }
});

// COLLECTION VIEW
window.TweetListView = Backbone.View.extend({

  template: _.template($('#tweet-list-template').html()),

  initialize: function() {

    _.bindAll(this, 'render');
    this.collection.bind('reset', this.render);

  },

  render: function() {
    var $tweets,
    collection = this.collection;

    $(this.el).html(this.template({}));
    $tweets = this.$('#tweets');
    collection.each(function(tweet){
      var view = new TweetView({
        model: tweet,
        collection: collection
      });
      $tweets.append(view.render().el);
    });
    return this;
  }
});

// ROUTER
window.TweetListDisplay = Backbone.Router.extend({
  routes: {
    '': 'home'
  },
  initialize: function(){
    this.tweetListView = new TweetListView({
      collection: window.tweetList
    });
  },
  home: function() {
    var $container = $('#container');
    $container.empty();
    $container.append(this.tweetListView.render().el);
  },
});

// DECLARE AND START APP
window.app = new TweetListDisplay();
Backbone.history.start();

}); // close $(document).ready({}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:05:00.620

你在这里调用 fetch

```
newTweets.fetch(); 
```

然后在开始处理集合之后，就好像它已经被填充一样，在这里

```
newTweets.each( function(tweet) {

  console.log('test'); // this doesn't work
  view = new TweetView({ model:tweet });
  $('#tweets').append(view.render().el);
}); 
```

`fetch`是一个 ASYNCHRONOUS 操作，这意味着在你触发它之后，程序的其余部分将立即继续执行，无论由 ajax 发起的调用`fetch`是否返回。因此，当您开始处理集合时，您的 fetch 尚未返回并且集合仍然是空的。

有两种方法可以纠正这种情况。让我们首先创建一个`processCollection`对集合执行您想要的功能的函数：

```
var processCollection = function () {
  newTweets.each( function(tweet) {

    console.log('test'); // this doesn't work
    view = new TweetView({ model:tweet });
    $('#tweets').append(view.render().el);
  });
}; 
```

### 1 回调函数（我不喜欢这些）

```
newTweets.fetch(success: processCollection); 
```

现在`processCollection`将在获取成功后立即调用。

### 2 绑定到事件（我更喜欢这个）

```
newTweets.on('reset', processCollection);
newTweets.fetch(); 
```

当 fetch 成功返回时，它将填充集合并触发`reset`-event。这是绑定处理事件的好地方，因为您知道现在集合已填充。此外，我发现事件的范围问题比回调的问题要少一些。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:53:02.547

你不能打电话；

```
 newTweets.fetch(); 
```

然后立即开始处理集合，就好像它可以使用一样.. 它需要时间.. fetch 调用是异步的.. 它在控制台中工作的原因是它需要时间来为控制台准备输出.. 并且 fetch 确实确实完结了。。

您应该为 fetch 提供一个成功回调，如下所示：

```
 newTweets.fetch({success: function(){//process collection}}); 
```

# c# - Response.Redirect 禁用后退按钮

> ID：12367003
> 
> 赞同：1
> 
> 时间：2012-09-11T09:48:25.673
> 
> 标签：c#, asp.net

我正在使用 Response.Redirect 将控制权转移到另一个页面。但这会禁用浏览器中的后退导航。实现这一目标的替代方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:54:14.403

`Response.Redirect`不会以任何方式禁用后退按钮。使用网络控制台检查它或将调试点放在您的页面上并再次检查。我认为在您的情况下，浏览器后退按钮正在工作**，但您的页面可能会强制它再次重定向到第二页**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:52:27.027

您可以进行客户端重定向。

[这是使用 JavaScript 执行此操作的 5 种不同方法的代码](http://ntt.cc/2008/01/21/5-ways-to-redirect-url-with-javascript.html)

我推荐第一个是`window.location.href`在 JS 中设置属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:51:23.847

您应该改用[Server.Transfer()](http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T07:22:17.053

您必须在项目中的某处（如 MasterPage 或父页面）添加了一个 javascript 函数，该函数禁用后退按钮，从用户的角度来看这是不好的，否则浏览器的后退按钮不可能自行禁用因为您在代码 -behind 中使用了 response.redirect 。

# php - 如何使用 php 通过本地服务器连接托管服务器数据库？

> ID：12367007
> 
> 赞同：0
> 
> 时间：2012-09-11T09:48:39.823
> 
> 标签：php, mysql, xampp

我想通过本地服务器连接托管服务器数据库这是我的代码

```
<?php
$con=mysql_connect("myserverDbHostname","mydatabaseUsername","Password");
if($con)
{
echo "connect";
mysql_select_db("DatabaseName");
else
{
echo "not connect";
}
?> 
```

当我在本地服务器（xammp 服务器）中运行此文件时，我无法连接

```
Warning: mysql_connect() [function.mysql-connect]: Can't connect to
MySQL server on 
```

我得到“未连接”响应

谁能指导我

感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:54:10.487

连接到远程数据库需要做三件事：

*   在防火墙上打开端口 3306。服务器和客户端的防火墙必须打开 3306 端口！
*   在 my.cnf bind-address = 0.0.0.0 让mysql绑定到所有接口
*   数据库中有足够的权限以允许远程连接

虚拟所有托管公司关闭防火墙上的 3306 端口，不允许直接远程访问。即使他们这样做，您也不会获得连接到数据库的权限。

仅当远程数据库在您的 LAN 中，或者您使用具有 root 访问权限的 VPS 时，您才能进行配置以建立远程连接。

# python - 'nosetests' 无法从目录中收集测试文件

> ID：12367009
> 
> 赞同：0
> 
> 时间：2012-09-11T09:48:46.363
> 
> 标签：python, nose, nosetests

我有一个目录层次结构，在每个目录中都有一个“test/”目录，其中包含所有测试文件。nosetests 无法以某种方式收集这些测试文件。我也遵循了用于文件名和类名的命名约定。这些文件中定义的所有类都是 unittest:TestCase 的子类。仍然没有运气。一定是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:51:18.733

如果你仔细看python鼻子的用法，你会明白的

--exe 在可执行的 python 模块中查找测试。正常行为是排除可执行模块，

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:50:46.533

我只是在回答我的问题。这真的很奇怪。我发现之前的测试文件处于可执行模式。一旦我改变了那里的模式，它就开始像魅力一样工作。:-) chmod -x *_test.py 为我工作。谁能解释鼻子测试的这种行为？？？

# asp.net - 在一个asp页面中选中单选按钮时，结果必须显示在另一个asp页面中..怎么做..请解释一下？

> ID：12367010
> 
> 赞同：1
> 
> 时间：2012-09-11T09:48:48.587
> 
> 标签：asp.net

一个aspx页面中的单选按钮，应该在另一个aspx页面中显示结果

2012年奥运会在哪里举行？？

```
 <form name="form1" action="resultpage.aspx" onclick="submit">
        <input type="radio" name="VanPersie" id="a" value="paris" />paris<br />
        <input type="radio" name="VanPersie" id="b" value="london" />london<br />
        <input type="radio" name="VanPersie" id="c" value="rome" />rome<br />
        <input type="submit" value="Submit"/>. 
```

上面的代码显示了我的第一个主页，它必须被重定向到另一个 aspx 页面..所以当用户检查..london 时，它必须显示正确的答案，即 London ..如何设计结果页面...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:10:55.130

首先将form的**method**属性设置为**POST**

```
<form name="form1" action="resultpage.aspx" onclick="submit" method="POST"> 
```

然后，如果您从**ASP**页面提交此表单，则在**resultpage.aspx**中，您可以通过以下方式获取单选值：

```
//C#
protected void Page_Load(object sender, EventArgs e)
{
     Request.Form["VanPersie"];
}

'VB
Protected Sub Page_Load(sender As Object, e As EventArgs)
    Request.Form("VanPersie")
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:55:38.037

1 您可以使用此代码

```
var result = radioButtonList.SelectedValue;
Response.Redirect("AnotherPage?id=" + result); 
```

在页面中，您可以使用

```
`QueryString["id"]`; 
```

2 你也可以使用

```
yourButton.PostBackUrl = "AnotherPage.aspx?qid=" + radioButtonList.SelectedValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:55:41.080

假设您有一个在页面中触发事件的**按钮**，您可以将**PostbackUrl**属性设置为您想要的页面以及可以在其中检索值的位置

```
<asp:Button ID="btn" runat="server" Text="Send to other page" postbackurl="yourPage.aspx" /> 
```

[将 ASP.NET 网页发布到不同的页面](http://msdn.microsoft.com/en-us/library/ms178140%28v=vs.100%29.aspx)

# delphi - 在多个系统之间交换文件并打印它们

> ID：12367016
> 
> 赞同：0
> 
> 时间：2012-09-11T09:49:17.957
> 
> 标签：delphi, pdf, delphi-7, gdi

有两个系统。我需要以某种格式获取文档并将其打印到我的应用程序中。源文件应为 pdf 格式。

1.  你知道delphi7的组件，我可以打开pdf文件并在delphi的画布上打印它。这种方法对pdf文档质量有好处吗？

2.  或者哪种格式的源文档可以更好地在 delphi 应用程序中打印？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:00:52.377

我认为几乎所有 PDF 预览组件都可以做到这一点。

搜索时 - [https://www.google.ru/search?client=opera&q=delphi+render+pdf+to+canvas&sourceid=opera](https://www.google.ru/search?client=opera&q=delphi+render+pdf+to+canvas&sourceid=opera) - 您会立即获得至少几个商业库：

*   [http://www.gnostice.com/nl_article.asp?id=229&t=Convert_PDF_To_High-Resolution_Images_Using_Delphi](http://www.gnostice.com/nl_article.asp?id=229&t=Convert_PDF_To_High-Resolution_Images_Using_Delphi)
*   [http://www.quickpdflibrary.com/faq/can-i-use-quick-pdf-as-a-viewer-in-my-delphi-application.php](http://www.quickpdflibrary.com/faq/can-i-use-quick-pdf-as-a-viewer-in-my-delphi-application.php)
*   [http://www.wpcubed.com/manuals/wpviewpdf/idh_twpviewpdf_printhdc.htm](http://www.wpcubed.com/manuals/wpviewpdf/idh_twpviewpdf_printhdc.htm)

*TCanvas 是一个围绕 Windows HDC 的 wapper。请参阅[http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCanvas.Handle](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TCanvas.Handle)*

# sql - Yii 和数据库方法

> ID：12367019
> 
> 赞同：0
> 
> 时间：2012-09-11T09:49:29.737
> 
> 标签：sql, yii, rdbms

我正在 yii 中构建一个应用程序。我在 AR 和 DAO 方面都有经验，但由于我的应用程序数据量很大，因此我将仅将 DAO 用于所有 CRUD 任务。

但是我被困在哪种数据库模式上，我对 RDBMS 非常熟悉，但考虑到数据验证/在视图中显示数据，我必须创建它们各自模型的对象。我的应用程序中的用户有各种字段，他们可以选择填写/不填写。字段如下：
1）地址相关字段（分解为单独的实体）
2）电话号码（多种类型）
3）认证（字符串数据）
4）利基专业化（字符串数据）
5）时间（从下拉列表中选择） )
6) 设施（字符串数据）

等等，请注意，这些只是所有字段的 30% 左右。

在设计 RDBMS 时，我自然会将我的电话号码放在一张表中，将地址放在另一张表中，依此类推。为了显示单个视图，我正在考虑创建大约 10-20 个模型对象。然而，我正在谈论的这个单一视图页面是应用程序的核心，功能在这里不能妥协。

考虑到所有这些考虑，如果我将来必须考虑可伸缩性和性能，RDBMS 真的是要走的路吗？

我应该选择哪些其他数据库选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:19:02.267

将 AR 与 Yii 结合使用的真正威力在于利用模型“关系”（包括原始 1.1 版本后添加的众多功能）。定义“范围”也可以非常强大，就像使用“with”一样。所有这些功能都允许您编写一次关系定义。这可能需要一点时间，但你知道每次使用它都是正确的，它们可以组合在一起，这就是 AR 大放异彩的时候。

创建模型对象有一些开销。通过使用 Yii 广泛的缓存功能，您仍然可以获得更高的性能。我还没有测量过，但我很容易相信带有缓存的 AR 可以大大优于没有缓存的 DAO。

# qt - Qt，如何在不将鼠标悬停在控件上的情况下使 Tooltip 可见？

> ID：12367022
> 
> 赞同：4
> 
> 时间：2012-09-11T09:49:40.287
> 
> 标签：qt, focus, hover, tooltip, visible

我希望在容器小部件获得**focus/visible时****默认显示**工具提示。

 **我希望工具提示出现而不是鼠标悬停在相应的控件上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:25:30.880

您需要子类化小部件并覆盖应该产生工具提示显示的事件的处理程序。在处理程序中，创建一个`QHelpEvent`类型`QEvent::ToolTip`并将其排入事件循环中。最后调用父级的原始处理程序，让它做最初的打算。

因此，专门用于关注按钮，它将是

```
class MyButton : public QPushButton {
  virtual void focusInEvent(QFocusEvent *) {
    if(evt->gotFocus()) {
      QPoint pos(0,0);
      QHelpEvent* help = new QHelpEvent(
        QEvent::ToolTip,pos,this->mapToGlobal(pos));
      QCoreApplication::postEvent(this,help);
    }
    QPushButton::focusInEvent(evt);
  }
} 
```

为了可见性，您将覆盖

```
void QWidget::showEvent(QShowEvent * event); 
```

并做类似的代码。您需要根据`pos`自己的喜好进行调整，因为最初工具提示取决于您在此处没有的鼠标位置。还要保持非常严格的控制以使您的小部件集中和/或可见。默认情况下，某些东西一直都是焦点，所以你会得到到处都是工具提示。**

# sql - 基于 SQL Server 的计数器

> ID：12367023
> 
> 赞同：1
> 
> 时间：2012-09-11T09:49:40.820
> 
> 标签：sql, performance, counter, increment

在 SQL Server 2005 中实现唯一计数器生成器的最佳方法是什么？所以我在一个表中有一个字段，它有一个值，即计数器。

我想获取当前值并增加 1。

所以数据库将保存下一个增量值。我已经尝试了几个选择 + 更新组合，但是由于来自独立应用程序的各种调用对这个计数器的打击非常大（可能每分钟 5000 次），所以应用程序似乎很慢。如何获得更好的计数器？我需要该值是串行的，因此我们不能为每个应用程序提供不同的表。

我这里有人建议：[http](http://www.sqlines.com/mysql/how-to/select-update-single-statement-race-condition) ://www.sqllines.com/mysql/how-to/select-update-single-statement-race-condition但不确定它是否正确或可能有其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:06:38.300

您不能只使用标识列将行插入表中吗？使用 检索插入的计数器值`SCOPE_IDENTITY`后，您将知道以前的版本是什么。它会很快，因为它不检查现有行。如果您不需要存储每个请求的行，您可以偶尔清除这些行。

# c# - Gtk.Application.Invoke 不工作

> ID：12367036
> 
> 赞同：2
> 
> 时间：2012-09-11T09:50:32.370
> 
> 标签：c#, multithreading, mono, monodevelop

我正在尝试使用 Backgroundworker 在 MONO 上构建应用程序。当我使用顺序方法时，我的应用程序运行良好。基本上，我的应用程序在单击按钮时在绘图区域上绘制一些矩形。

我正在尝试使用 Backgroundworker 和其他方法比较顺序执行时间的差异。

我在使用后台工作者时遇到问题，请查看以下代码，

```
 static void DoWork (object sender, DoWorkEventArgs e)
    {
        Context ct = (Context)e.Argument;
        house.DrawHouse rect = new house.DrawHouse ();
        PointD p1, p2, p3, p4;

        p1 = new PointD (55, 250);
        p2 = new PointD (65, 250);
        p3 = new PointD (65, 90);
        p4 = new PointD (55, 90);
            Gtk.Application.Invoke (delegate {
                ct.MoveTo (p1);
                ct.LineTo (p2);
                ct.LineTo (p3);
                ct.LineTo (p4);
                ct.LineTo (p1);
                ct.ClosePath ();
                ct.Color = new Color (0, 0, 0);
                ct.FillPreserve ();
                ct.Color = new Color (255, 255, 255);
                ct.Stroke ();
            });
        }   
    } 
```

在上面的代码中，工作线程正在创建矩形并让 GUI 线程打印它。但它在**ct.MoveTo (p1) 中引发错误；**

![以下是错误](../Images/562675f7cc55cb1edda0e3bb6b484bcd.png)

希望很快能听到一些人的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:39:47.300

您确定要在 GUI 线程中调用该代码吗？要找出答案，您可以使用[此工具](https://github.com/slluis/gui-thread-check)。

另外，让我猜一下：你在 Windows 上运行它，不是吗？我有这个印象是因为 AccessViolationExceptions 在 MS.NET 上比在 Mono 上更频繁地发生（不知何故，与非托管世界的互操作性在 Mono 上不那么严格）。

这有时会在错误中提出，但尚未修复。在 MS.NET 中，这些问题通常可以通过应用适当的调用约定来解决。一个例子是[这个](https://github.com/mono/gtk-sharp/commit/51d5faf65114e4a8c7974570526b505acd060837)，也许你错过了一些？（或者 Cairo 的绑定？一定要克隆[gtk-sharp](https://github.com/mono/gtk-sharp/)并查看被调用的 DllImport；也许你可以在那里发现一个错误并发送一个拉取请求来修复它？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T03:00:12.310

你是对的。是的，我在 Windows 上运行它。对于您的第一点，工作线程将启动任务并创建矩形并提供给 GUI 线程以将其打印在屏幕上。**（Gtk.Application.Invoke (delegate { }); 这将切换到 GUI 线程）**

看看下面的代码我正在做同样的事情，但不是从绘画的角度来看，但它做了一些耗时的计算。耗时的计算由工作线程完成，并将结果提供给 GUI 线程以在 UI 上打印。这对我来说绝对可以正常工作，没有任何错误。

```
void DoWork (object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    var watch = Stopwatch.StartNew ();

    for (int i = lowerLimit; i <= upperLimit; i++) {
        int j = i;
        var result = SumRootN (j);
        Gtk.Application.Invoke (delegate {
            textview15.Buffer.Text += "root " + j.ToString () + " = " + result.ToString () + Environment.NewLine;
        });
        worker.ReportProgress ((int)(((double)i / (double)upperLimit) * 100));
    }
    var time = watch.ElapsedMilliseconds;
    textview20.Buffer.Text = "Background Worker: \n execution took " + time + " MS to \n complete the execution \n SLOW & RESPONSIVE"; 
} 
```

但是，如果我在绘画上做同样的事情，它会给我上面附加的错误。

如果我错了请纠正我

感谢您的回复knocte，我会看看您的回复。

# c# - 在 C# 中创建 Word 文档

> ID：12367041
> 
> 赞同：0
> 
> 时间：2012-09-11T09:50:44.797
> 
> 标签：c#, .net, interopservices

我正在尝试使用 Microsoft Office 互操作创建 Word 文档。该文档应包含一张图片和下面的一些表格内容。但是当我添加内容时，它并没有按照我需要的方式添加。

我在下面提供了示例代码。

```
MSWord.Application oWordApp;
MSWord.Document oWordDoc;
oWordApp = new MSWord.Application();
oWordApp.Visible = true;
oWordApp.WindowState = MSWord.WdWindowState.wdWindowStateMinimize;
oWordDoc = oWordApp.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing);

object start = 0;
object end = 0;

Microsoft.Office.Interop.Word.Range oRange = oWordDoc.Range(ref start,ref end);

oWordDoc.InlineShapes.AddPicture(imagepath, ref oMissing, ref oMissing, oRange);

Microsoft.Office.Interop.Word.Table tbl = oWordDoc.Tables.Add(oRange, 10, 2, ref oMissing, ref oMissing);
Random rnd = new Random();
for (int i = 0; i < 10; i++)
{
    tbl.Rows[i + 1].Cells[1].Range.Text = "Item#";
    tbl.Rows[i + 1].Cells[2].Range.Text = "Sample";
}

oWordDoc.SaveAs(svd.FileName, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                            ref oMissing, ref oMissing, ref oMissing, ref oMissing); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:07:49.827

您是否尝试过邮件合并？这样您就可以设置单词模板，并且可以随意放置图像和表格。然后您只需要担心将输入字段与模板合并。这样，如果需要，您可以为不同的 Word 文档提供多个模板。这是一个例子：

[在 Microsoft Word 2010 中将文本发送到邮件合并字段](https://stackoverflow.com/questions/10734817/sending-text-to-mailmerge-fields-in-ms-word-2010)

# java - java应用程序显示启动应用程序的进度

> ID：12367043
> 
> 赞同：0
> 
> 时间：2012-09-11T09:50:56.903
> 
> 标签：java

我们有一个大型 Java 桌面应用程序，大约需要几分钟才能启动，目前我们在启动时使用闪屏，是否可以显示带有闪屏的进度条...？我的意思是当我们启动像 netbeans、IDEA Intellij 这样的 IDE 时，它们会在初始屏幕上以进度条的形式显示进度。进度条可能会显示加载类的进度.. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:06:03.397

您可以使用 java [SplashScreen](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)类。要设置进度条，您可以在初始屏幕上绘制一个矩形。当您点击启动的不同部分时，您可以更新此矩形，使其类似于进度条。[这个](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/misc/SplashDemoProject/src/misc/SplashDemo.java)来自 Oracle 的演示代码显示了这一点。请参阅名为 renderSplashFrame() 的方法

# sql - Crystal Reports，基于 SQL SP 参数的下钻/子报表

> ID：12367048
> 
> 赞同：1
> 
> 时间：2012-09-11T09:51:02.190
> 
> 标签：sql, sql-server, crystal-reports, drilldown

我有一个主要报告，其中显示了相关组中的产品，例如“红色”和“蓝色”。

它看起来像这样；

```
Customer1       

                Qty      Price

Red Products     24       75
Blue Products    75       16 
```

该报告基于一个数据库表。

然后我有一个子报告（存储过程），它将显示分组下的所有相关产品（例如红色或蓝色）并要求提供此参数。

我遇到的问题是从主报告链接分组名称，作为子报告的参数。

**注意：主报告是一个交叉表**

我尝试插入子报告，然后“更改子报告链接”，但这对我不起作用。

最终目标是用户可以双击分组以显示该分组中所有产品的列表。任何指针？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:20:06.577

您不能从交叉表中运行子报表，您可能必须将报表移动到标准组/汇总报表（或在组页脚上显示该组的值的单行交叉表）。

# json - 从 simple-json 对象中渲染不带引号的值

> ID：12367054
> 
> 赞同：1
> 
> 时间：2012-09-11T09:51:19.143
> 
> 标签：json, jakarta-ee

我尝试在 Servlet 中做：

```
JSONObject json = new JSONObject();
json.put( "eventContent", "event" );
String script = "var object= " + json.toJSONString() + ";";
response.getWriter().print( something + script + another ); 
```

脚本的内容当然是：

```
var object = {"eventContent":"event"}; 
```

但我将此字符串呈现为 javascript 函数并尝试引用现有的 javascript 对象“事件”。所以我需要不带引号的 JSON Sting 中的值。

```
var object = {"eventContent":event}; 
```

有什么建议么？:)

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:19:23.793

我认为这不是真正的 JSON，因为您不应该引用变量。无论如何，您可以通过实现`JSONString`接口来获得所需的东西，就像这样。

```
public static void main(String[] args) throws JSONException {
    JSONObject json = new JSONObject();
    json.put( "eventContent", new JSONVariable("event") );
    System.out.println("var object= " + json.toString() + ";");
}

private static class JSONVariable implements JSONString { // implements JSONAware with com.googlecode.json-simple
    private final String name;

    public JSONVariable(String name) {
        this.name = name;
    }

    @Override
    public String toJSONString() {
        return name;
    }
} 
```

# regex - 在 Delphi 中编译 PerlRegExp 时未声明的标识符

> ID：12367066
> 
> 赞同：0
> 
> 时间：2012-09-11T09:51:42.343
> 
> 标签：regex, delphi, delphi-2009, pcre

我想在 Delphi 2009 的项目中使用 TPerlRegExp （来自[http://www.regular-expressions.info/delphi.html](http://www.regular-expressions.info/delphi.html)，在页面的中间位置）。

我将 PerlRegEx.pas 和 pcre.pas 添加到我的项目组中，并将“PerlRegEx”放在我的使用列表中。

当我编译时，我收到以下错误：

> [DCC 错误] PerlRegEx.pas(305): E2003 未声明的标识符：'pcre_dispose'
> 
> [DCC 错误] PerlRegEx.pas(533)：E2003 未声明的标识符：'pcre_dispose'
> 
> [DCC 致命错误] test.dpr(21): F2063 无法编译使用的单元 '..\Shared\Classes\TPerlRegEx\PerlRegEx.pas'

当我使用“pcre_dispose”注释掉这些行时，它可以编译。但是我当然不想通过不释放东西来造成内存泄漏……那可能是什么原因造成的呢？

任何有想法的人？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:07:59.123

逐步进行有效安装（从您在原始问题的评论中提供的下载链接）：

将 Zip 文件解压缩到一个文件夹中。我使用`E:\Code\PerlRegEx\XE2`了 ，因为我已经为 D2007 安装了非 Unicode 版本。

使用 .启动一个新的控制台项目`File->New->Other->Console App`。

从 IDE 的主菜单中使用`Project->Options->Compiler`，并将上面的路径位置添加到`Search Path`. 粘贴以下代码以替换代码编辑器中的所有内容：

```
program Project2;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, PerlRegex;

var
  Regex: TPerlRegex;

begin
  try
    Regex := TPerlRegex.Create;
    try
      Regex.Subject := 'This is a test of TPerlRegex';
      Regex.RegEx := '\btest\b';
      if Regex.Match then
        WriteLn('Found match: ' + Regex.MatchedText)
      else
        WriteLn('Can''t be! No match found!');
      ReadLn;
    finally
      Regex.Free;
    end;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

如您所见，我`TPerlRegex`对这个测试用例的功能进行了非常复杂的测试。:-)

如果上述方法对您有用，并且您在自己的项目中仍然遇到问题：

1.  检查您的旧项目以获取对旧版本 TPerlRegex 的引用（搜索或库路径中的另一个文件夹，Tools->Options->Environment->Library Path 中的条目）。

2.  检查 PerlRegex 的 uses 子句（您可以使用 Search->Find in Files，检查 All Files in Project）。

3.  确保您遵循了上面的确切步骤：将 PerlRegex 的文件夹添加到您的项目->编译器->搜索路径设置中，将 PerlRegex 添加到您要使用它的单元的使用子句中。如果它在我的示例中的代码中有效你的机器，但不在你的其他项目中，问题就在那里

# c# - 从 XAML 获取 DataContext

> ID：12367068
> 
> 赞同：0
> 
> 时间：2012-09-11T09:51:44.880
> 
> 标签：c#, wpf, xaml, datacontext

我删除了 MainWindow.xaml 的 CodeBehind，因为我正在做一个小项目，我确实*必须*这样做。

因此，我通过 xaml 以这种方式创建了我的 ViewModel 的实例：

```
<Grid.DataContext>
    <lib:StartPageViewModel />
</Grid.DataContext> 
```

现在，我`DataContext`在我的代码（StartPageViewModel）中需要这个，因为我想打开另一个解决方案（更多信息请看[这里](https://stackoverflow.com/questions/3504174/how-to-open-a-solution-from-a-custom-vs2010-start-page)）。

关于如何获得此 DataContext 的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:59:36.753

至少我解决了这个问题。实际上我并不需要为此使用 DataContext：

```
 public static DTE2 GetDTE(DataContext dataContext)
    {
        ICustomTypeDescriptor typeDescriptor = dataContext as ICustomTypeDescriptor;
        Debug.Assert(typeDescriptor != null, "Could not get ICustomTypeDescriptor from dataContext. Was the Start Page tool window DataContext overwritten?");
        PropertyDescriptorCollection propertyCollection = typeDescriptor.GetProperties();
        return propertyCollection.Find("DTE", false).GetValue(dataContext) as DTE2;
    } 
```

我将代码更改为以下，它现在可以完美运行，我可以在不使用 DataContext 的情况下打开解决方案：

```
 public static DTE2 GetDTE()
    {
        return (DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:00:45.803

ViewModel 不应该对 View 有任何了解。

因此，当应用“正确”的 MVVM 时，您不应该尝试从 ViewModel 中访问 DataContext。

`StartPageViewModel`放入 DataContext 的对象的 IS 部分的代码。这意味着您可以通过`this`在 ViewModel 的代码中使用来访问该对象。

如果您正在寻找 Grid（甚至更高的 VisualTree），您可以使用 Xaml 中的属性传递它：

```
<Grid Name="MyGrid">
    <Grid.DataContext>
        <lib:StartPageViewModel MyParent={Binding ElementName=MyGrid} />
    </Grid.DataContext>
</Grid> 
```

尽管如此，如果您这样做，您就是在向 ViewModel 添加有关视图的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:04:33.057

我从未在 XAML 文件中声明过视图模型，但您是否尝试过：

```
viewName.DataContext as ViewModelType; 
```

顺便说一句，删除代码隐藏通常是一个好习惯。

# algorithm - 如何在“A Fast Voxel Traversal Algorithm for Ray Tracing”中初始化 t 变量？

> ID：12367071
> 
> 赞同：21
> 
> 时间：2012-09-11T09:52:06.090
> 
> 标签：algorithm, math, language-agnostic, grid, raytracing

我正在尝试实现本文中解释的算法，用于按照直线遍历网格单元，这对于光线追踪很有用：

[http://www.cse.yorku.ca/~amana/research/grid.pdf](http://www.cse.yorku.ca/~amana/research/grid.pdf)

该论文将算法描述为两个部分：初始化和迭代遍历。我可以理解迭代遍历部分，但我无法理解初始化部分中的一些变量是如何计算的。

我需要帮助初始化`tMaxX`, `tMaxY`, `tDeltaX`& `tDeltaY`。它们的初始化过程解释如下：

> 接下来，我们确定光线穿过第一个垂直体素边界时的 t 值，并将其存储在变量 tMaxX 中。我们在 y 中执行类似的计算并将结果存储在 tMaxY 中。这两个值中的最小值将指示我们可以沿着射线行进多少并且仍然保留在当前体素中。
> 
> 最后，我们计算 tDeltaX 和 tDeltaY。TDeltaX 表示我们必须沿着射线移动多远（以 t 为单位），才能使这种移动的水平分量等于体素的宽度。类似地，将沿射线的移动量存储在 tDeltaY 中，该射线的垂直分量等于体素的高度。

我无法从上面给出的英文描述中推断出我需要的代码。有人可以帮我把它翻译成数学/伪代码表达式吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T13:09:23.703

X 坐标变量的初始化（Y 相同）

```
 DX = X2 - X1
  tDeltaX = GridCellWidth / DX
  tMaxX = tDeltaX * (1.0 - Frac(X1 / GridCellWidth)) 
  //Frac if fractional part of float, for example, Frac(1.3) = 0.3, Frac(-1.7)=0.3 
```

例子：

```
 GridCellWidth, Height = 20
  X1 = 5, X2 = 105 
  Y1 = 5, Y2 = 55 
  DX = 100, DY  = 50
  tDeltaX = 0.2, tDeltaY = 0.4 
  tMaxX = 0.2 * (1.0 - 0.25) = 0.15  //ray will meet first vertical line at this param
  tMaxY = 0.4 * (1.0 - 0.25) = 0.3   //ray will meet first horizontal line at this param 
```

我们可以看到第一个单元格边界将在参数 t = 0.15 处满足

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-24T13:42:48.180

在正向和负向（在 CUDA C 中）在 3D 中为我工作的那个：

```
#define SIGN(x) (x > 0 ? 1 : (x < 0 ? -1 : 0))
#define FRAC0(x) (x - floorf(x))
#define FRAC1(x) (1 - x + floorf(x))

float tMaxX, tMaxY, tMaxZ, tDeltaX, tDeltaY, tDeltaZ;
int3 voxel;

float x1, y1, z1; // start point   
float x2, y2, z2; // end point   

int dx = SIGN(x2 - x1);
if (dx != 0) tDeltaX = fmin(dx / (x2 - x1), 10000000.0f); else tDeltaX = 10000000.0f;
if (dx > 0) tMaxX = tDeltaX * FRAC1(x1); else tMaxX = tDeltaX * FRAC0(x1);
voxel.x = (int) x1;

int dy = SIGN(y2 - y1);
if (dy != 0) tDeltaY = fmin(dy / (y2 - y1), 10000000.0f); else tDeltaY = 10000000.0f;
if (dy > 0) tMaxY = tDeltaY * FRAC1(y1); else tMaxY = tDeltaY * FRAC0(y1);
voxel.y = (int) y1;

int dz = SIGN(z2 - z1);
if (dz != 0) tDeltaZ = fmin(dz / (z2 - z1), 10000000.0f); else tDeltaZ = 10000000.0f;
if (dz > 0) tMaxZ = tDeltaZ * FRAC1(z1); else tMaxZ = tDeltaZ * FRAC0(z1);
voxel.z = (int) z1;

while (true) {
    if (tMaxX < tMaxY) {
        if (tMaxX < tMaxZ) {
            voxel.x += dx;
            tMaxX += tDeltaX;
        } else {
            voxel.z += dz;
            tMaxZ += tDeltaZ;
        }
    } else {
        if (tMaxY < tMaxZ) {
            voxel.y += dy;
            tMaxY += tDeltaY;
        } else {
            voxel.z += dz;
            tMaxZ += tDeltaZ;
        }
    }
    if (tMaxX > 1 && tMaxY > 1 && tMaxZ > 1) break;
    // process voxel here
} 
```

请注意，在我的情况下，网格单元的宽度/高度/深度都等于 1，但您可以根据需要轻松修改它。

# java - 创建动态 JLabel 和 JButton

> ID：12367074
> 
> 赞同：1
> 
> 时间：2012-09-11T09:52:23.353
> 
> 标签：java, swing, jbutton, jlabel

我正在尝试根据属性文件中定义的 URL 数量创建动态`JButton`的`JLabel`。

到目前为止，我尝试过的是：

```
AppResources.properties file

urls=http://google.com,http://stackoverflow.com,http://gmail.com
urlLabels=Internet Users,MPLS Users,Physical Access (Not Advised) 
```

在我的 Java 程序中，我正在读取属性文件并基于`comma separator`拆分字符串，现在我需要相应地生成按钮和标签。之类的`first URL Label --> first URL as Button`。

到目前为止，我这样做的方式是：

```
String url = properties.getProperty("urls");
        String urlLabel = properties.getProperty("urlLabels");
        String[] jButton = url.split(",");
        String[] jLabel = urlLabel.split(",");

        for (int i = 0; i < jLabel.length; i++) {
        JLabel labels = new JLabel(jLabel[i]);
        panel.add(labels);
        for (int j = 0; j < jButton.length; j++) {
            JButton button = new JButton(jButton[j]);
            panel.add(button);
        }
        } 
```

但是它会为标签打印三次按钮。如何解决这个问题？另外如何为这些按钮编写动作监听器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:28:53.880

删除内部循环（基于 j）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T10:54:11.410

如果你想为你的按钮实现动作监听器，你可以在创建按钮时简单地创建并添加一个新的 ActionListener。

例子 ：

```
for (int i = 0; i < jLabel.length; i++) {
    final String str = jLabel[i];
    JLabel labels = new JLabel(str);
    panel.add(labels);
    JButton button = new JButton(jButton[i]);
    button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            JOptionPane.showMessageDialog(panel, str);
        }
    });
    panel.add(button);
} 
```

# vim - 是否可以更改 vim 中选项卡的位置？

> ID：12367080
> 
> 赞同：3
> 
> 时间：2012-09-11T09:52:37.497
> 
> 标签：vim

我想知道是否有任何方法可以更改选项卡的位置。任何人都可以帮助我吗？我想将 vim 作为我最喜欢的 ide..:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T09:56:34.463

退房`help :tabm[ove]`。基本上你可以这样做：

`:tabm +N`将当前选项卡向右移动 N 个位置。或者`:tabm -N`向左移动 N 个位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:59:04.203

Vim 不是一个 IDE，它是一个编辑器。无论你多么努力，你都不会把它变成一个 IDE。

无论如何，请阅读`:h tabmove`：

```
:tabmove 0 
```

将当前选项卡移动到第一个位置

```
:tabmove 2 
```

将当前选项卡移动到 2 选项卡之后

```
:tabmove 
```

将当前选项卡移动到最后一个位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:17:42.277

“标签的位置”到底是什么意思？其他答案已经展示了如何移动各个标签页。

如果你正在询问 Vim 将选项卡标签放在哪里，那是无法更改的；它们将始终位于 GUI 菜单和窗口之间。在 GVIM 中，您只能通过以下方式将选项卡外观从图形“降级”为文本

```
:set guioptions-=e 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T15:18:00.857

### 拆分操作

*   `Ctrl`+ `W`, `R`（交换上/下或左/右拆分）
*   `Ctrl`+ `W`, `T`(将当前窗口拆分为一个新的 tabview)
*   `Ctrl`+ `W`, `o`（关闭当前 tabview 中的每个窗口，但当前窗口除外）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-06T16:10:35.547

使用制表符时（使用 guioptions-=e），您可以用鼠标拖放制表符。

有一个待处理的补丁（但在 Vim 7.4.1054 尚未应用）也可以将其扩展到 GUI 选项卡：

[https://groups.google.com/forum/#!msg/vim_dev/LnZVZYls1yk/fj_Gz0vhnrsJ](https://groups.google.com/forum/#!msg/vim_dev/LnZVZYls1yk/fj_Gz0vhnrsJ)

# python - 自动文本摘要：使用 Django/python 的 Web 应用程序？

> ID：12367082
> 
> 赞同：0
> 
> 时间：2012-09-11T09:52:39.633
> 
> 标签：python, django, project

我将开发一个自动文本摘要工具作为我的 FYP。我将使用 Python，它将成为一个 Web 应用程序。因为，我的工具中不会涉及数据库，使用 Django 是个好主意吗？任何人都可以推荐任何其他框架吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:18:15.560

是否涉及数据库并不重要，但对于整个 Web 开发来说，它是一个易于使用的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:16:36.453

如果您的应用程序中没有数据库，那么您可能不会使用 Django 的 ORM，这是使用它而不是更轻量级的东西的主要原因之一。

话虽如此，如果您熟悉 Django，请使用 Django。如果您不是并且正在寻找 Python Web 框架，那么[Flask 之](http://flask.pocoo.org/)类的怎么样？模板模块（我认为是 Jinja2）比 Django 的模板更强大。

# mysql - 在数据库中排序整数

> ID：12367092
> 
> 赞同：4
> 
> 时间：2012-09-11T09:53:00.503
> 
> 标签：mysql, sql

我有这样的查询

```
SELECT user_id FROM user_rights ORDER BY user_id DESC; 
```

为什么它会给我那些乱七八糟的数字？

```
USER_ID
4
4
4
4
3
3
21
21
21
21
21
21
20
20 
```

它没有按预期对数字进行排序。

证明：[http ://sqlfiddle.com/#!2/c753a/1](http://sqlfiddle.com/#!2/c753a/1)

我知道它们可能是按字母顺序或数字顺序排列的，买我不明白为什么这个结果如此奇怪......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T09:54:19.410

这是因为`user_id`不是数字。

试试这个，

```
SELECT user_id 
FROM user_rights 
ORDER BY CAST(user_id as SIGNED) DESC; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/c753a/13)

另一种解决方案是将列的数据类型更改`user_id`为`int`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:55:50.157

您的 userid 字段是 a `varchar(64)`，因此它按字母顺序降序排序（根据 SQL 查询的要求）。鉴于此，您的输出完全正确。

您应该更改您的用户 ID 数据类型，或将其转换为整数（如果您可以保证它始终是整数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:05:37.550

hey if there are multiple entries of user in table than you can use group by and than try order by i.e.`SELECT user_id FROM user_rights GROUP BY user_id ORDER BY CONVERT(int,user_id) DESC;`

# stored-procedures - Oracle中的存储过程与案例和时间

> ID：12367094
> 
> 赞同：2
> 
> 时间：2012-09-11T09:53:03.547
> 
> 标签：stored-procedures, oracle11g

我有一个场景，我有 5 个不同的表：

```
Table 1 - Product, Columns - ProductId, BatchNummer, Status, GroupId, OrderNummer

Table 2 - ProductGrop, Columns - GropId, ProductType, Description

Table 3 - Electronics, Columns - EId, Description, BatchNummer, OrderNummer, OrderData

Table 4 - Manual, Columns - MId, Description, Status, OrderNummer, ProcessStep

Table 5 - ProcessedProduct, columns same as Product with one extra column of datetime 
```

现在，根据业务流程，我需要从 Product 表中填充所有数据，并且必须检查基础表（电子或手动，取决于 ProductGoup 的 ProductType 列）是否具有 ordernuumer 值，然后在表 5 中插入一条记录"ProcessedProduct" 否则跳过记录。

对于这个要求，我想创建一个程序。但是我被困在如何检查我必须参考哪个基础表（电子/手册）以及如何实现它。

此外，我应该如何编写插入记录的循环。

注意：我无法更改表架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T15:18:46.413

使用 PL/SQL 过程，您可以只在 LOOP 内切换，但如果您只需要检查 OrderNummer 是属于电子产品还是手册，则不需要命令式算法。

假设通过 ProductType 值“Electronics”或“Manuals”选择明细表，您可以：

```
INSERT INTO ProcessedProduct (ProductId, BatchNummer, Status, GroupId, OrderNummer, TS)
SELECT ProductId, BatchNummer, Status, GroupId, OrderNummer, SYSDATE
FROM Product p 
INNER JOIN ProductGroup pg USING (GroupId)
WHERE EXISTS (
  SELECT NULL FROM Electronics e
  WHERE p.OrderNummer = e.OrderNummer
  AND pg.ProductType = 'Electronics'
  UNION
  SELECT NULL FROM Manuals m
  WHERE m.OrderNummer = m.OrderNummer 
  AND pg.ProductType = 'Manuals') 
```

普通 SQL 总是最快的方式，而“WHERE EXISTS”通常是最快的条件。

# android - Android：查找相似词

> ID：12367101
> 
> 赞同：0
> 
> 时间：2012-09-11T09:53:20.727
> 
> 标签：android

在充当搜索框的 EditText 中，我如何找到**相似**的词

任何人都可以帮忙吗？

谢谢洛基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:57:54.267

AutocompletetextView 是最好的选择：这里是链接：[http ://www.androidaspect.com/2012/06/autocompletetextview-example.html](http://www.androidaspect.com/2012/06/autocompletetextview-example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:02:11.290

你有两个选择

*   自动完成文本视图

    检查这个[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

*   编辑文本`addTextChangedListener`

    [使用 EditText 轻松搜索](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/)检查此列表视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:17:41.530

遵循[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)文档

> `AutoCompleteTextView`是一个可编辑的文本视图，可在用户键入时自动显示完成建议。

另请阅读有关[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

> `BaseAdapter`由任意对象数组支持的混凝土。

[并从文档](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)中尝试以下示例

```
public class CountriesActivity extends Activity {
     protected void onCreate(Bundle icicle) {
         super.onCreate(icicle);
         setContentView(R.layout.countries);

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                 android.R.layout.simple_dropdown_item_1line, COUNTRIES);
         AutoCompleteTextView textView = (AutoCompleteTextView)
                 findViewById(R.id.countries_list);
         textView.setAdapter(adapter);
     }

     private static final String[] COUNTRIES = new String[] {
         "Belgium", "France", "Italy", "Germany", "Spain"
     };
 } 
```

# c - 在 C 中解析复杂的字符串

> ID：12367102
> 
> 赞同：2
> 
> 时间：2012-09-11T09:53:22.703
> 
> 标签：c, string

我有一个这样的字符串：

`"00:00:00 000~00:02:00 0000|~00:01:00 0000;00:01:00 0000~"`,

我想得到像`"00:00:00 000"`.

我的想法是首先将字符串拆分为`";"`，然后拆分为`"|"`，最后拆分为`"~"`。

但问题是，如果它为空，我就无法获取它，例如`"00:01:00 0000~"`，之后的部分 `"~"`，我想获取它并为其设置一个默认值，然后将其存储在其他地方，但代码不起作用。问题是什么？

这是我的代码：

```
int main(int argc, char *argv[])
{

   char *str1, *str2, *str3, *str4, *token, *subtoken, *subt1, *subt2;
   char *saveptr1, *saveptr2, *saveptr3;
   int j;

   for (j = 1, str1 = argv[1]; ; j++, str1 = NULL) {
       token = strtok_r(str1, ";", &saveptr1);
       if (token == NULL)
           break;
       printf("%d: %s\n", j, token);

       int flag1 = 1; 
       for (str2 = token; ; str2 = NULL) {
           subtoken = strtok_r(str2, "|", &saveptr2);
           if (subtoken == NULL)
               break;
           printf("  %d: --> %s\n", flag1++, subtoken);
           int flag2 = 1;
           for(str3 = subtoken; ; str3 = NULL) {
                subt1 = strtok_r(str3, "~", &saveptr3);
                if(subt1 == NULL) {
                    break;
                }
                printf("      %d: --> %s\n",flag2++, subt1);
           }
       }
   }

   exit(EXIT_SUCCESS);
} /* main */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:11:48.037

如果首先使所有分隔符统一，则可以简化算法。首先替换所有出现的 , 和 | 加上~，那么解析会更容易。您可以通过 sed 或 vim 在外部执行此操作，也可以在 C 代码中以编程方式执行此操作。那么您应该能够轻松解决“NULL”问题。（就我个人而言，我不喜欢使用 strtok，因为它会修改原始字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T12:42:03.180

在这种情况下，编写自定义解析器确实更容易。

下面的版本分配新的字符串，如果不需要分配新的内存，将`add_string`方法更改为只指向`start`，并设置`start[len]`为 0。

```
static int add_string( char **into, const char *start, int len )
{
    if( len<1 ) return 0;
    if( (*into = strndup( start, len )) )
        return 1;
    return 0;
}

static int is_delimeter( char x )
{
    static const char delimeters[] = { 0, '~', ',', '|',';' };
    int i;

    for( i=0; i<sizeof(delimeters); i++ )
        if( x == delimeters[i] )
            return 1;

    return 0;
}

static char **split( const char *data )
{
    char **res = malloc(sizeof(char *)*(strlen(data)/2+1));
    char **cur = res;
    int last_delimeter = 0, i;

    do {
        if( is_delimeter( data[i] ) )
        {
            if( add_string( cur, data+last_delimeter,i-last_delimeter) )
                cur++;
            last_delimeter = i+1;
        }
    } while( data[i++] );

    *cur = NULL;
    return res;
} 
```

该方法的示例用法：

```
int main()
{
    const char test[] = "00:00:00 000~00:02:00 0000|~00:01:00 0000;00:01:00 0000~";
    char **split_test = split( test );
    int i = 0;

    while( split_test[i] )
    {
        fprintf( stderr, "%2d: %s\n", i, split_test[i] );
        free( split_test[i] );
        i++;
    }
    free( split_test );
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T10:59:52.983

与其拆分字符串，不如想出一个简单的有限状态机来解析字符串可能更合适。幸运的是，您的令牌似乎对其长度有上限，这使事情变得容易多了：

遍历字符串并区分四种不同的状态：

*   当前字符不是分隔符，但前一个字符是（标记开始）
*   当前字符是分隔符，前一个字符不是（标记结束）
*   当前和前一个字符都不是分隔符（将它们存储在临时缓冲区中）
*   当前和前一个字符都是分隔符（忽略它们，读取下一个字符）

应该可以想出一段非常短（10 行？）且简洁的代码来解析指定的字符串。

# .net - 在不参考 GAC 的情况下进行开发

> ID：12367105
> 
> 赞同：1
> 
> 时间：2012-09-11T09:53:26.553
> 
> 标签：.net, asp.net-mvc, visual-studio, gac

*是否可以在不*引用 GAC 中的程序集（核心 .Net 框架除外）的情况下在 Visual Studio 中进行开发？我想我在问是否可以将纯本地程序集用于应用程序。

我们的 buildserver/live/test 环境除了 .Net 框架外没有安装任何东西，所有引用的程序集（如 MVC/Entity Framework 等）都包含在 NuGet 包档案中。开发机器需要安装 MVC 才能使 Visual Studio 正常工作。这样做的问题是，在将其推送到构建服务器之前，无法判断某些东西是否会导致解决特定依赖关系的问题，因为开发机器通常会在 GAC 中找到它需要的东西。我也遇到过这样的情况，即在我的开发机器上的 GAC 中发现了一个旧的、不正确的程序集版本，即使项目引用了后来的正确版本作为包的一部分（构建服务器使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:58:27.647

好吧，您可以随时添加一个文件夹“Libs”以及其他文件夹，并将您的所有 Dll 存储在其中。并确保引用指向该文件夹和 dll，而不是 GAC。

这基本上意味着从项目中删除所有引用，然后手动将它们重新添加到特定位置。

然后，您可以做的是在源代码管理中跟踪这些 dll。这样，所有这些都将被推送到构建服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:33:01.457

解决方案是 2 个步骤；

1.  删除（或重命名为不存在的内容）AssembleyFoldersEx 注册表项下的路径。所以在我的 Win7 64 位机器上它是以下内容

    HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft.NETFramework\v4.0.30319\AssemblyFoldersEx\ASP.NET MVC4（和网页）

2.  从 GAC 中删除程序集。在我的场景中，这是 system.web.mvc 和相关的程序集，基本上是安装在

    C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4（和网页）

请按照此处的步骤执行此操作

[http://dylanbeattie.blogspot.co.uk/2008/11/working-on-aspnet-mvc-beta-and-preview.html](http://dylanbeattie.blogspot.co.uk/2008/11/working-on-aspnet-mvc-beta-and-preview.html)

基本上现在任何无法通过项目文件中指定的位置解析的程序集（即，如果 NuGet 包的名称不正确）将导致构建失败，其方式与构建服务器相同。MVC 模板在 Visual Studio 中仍然有效

# php - 投票重定向

> ID：12367106
> 
> 赞同：0
> 
> 时间：2012-09-11T09:53:32.033
> 
> 标签：php, javascript, jquery

我从这个网站下载了 PHP 投票脚本：

我已经安装了它，它在我的网站上运行良好，但是我正在考虑稍微定制它，以便一旦用户投票，然后将它们重定向到新页面，或者理想情况下打开一个灯箱。

我已将其范围缩小为 javascript 问题，并且 javascript 文件位于voting.js 文件中。

以下是在该文件中找到的以下代码：

```
// Ajax Voting Script - http://www.coursesweb.net
var ivotings = Array();         // store the items with voting
var ar_elm = Array();       // store the items that will be send to votAjax()
var i_elm = 0;                  // Index for elements aded in ar_elm
var itemvotin = '';       // store the voting of voted item
var votingfiles = 'votingfiles/';      // directory with files for script
var advote = 0;      // variable checked in addVote(), if is 0 cann vote, else, not

// gets all DIVs, store in $ivotings, and in $ar_elm DIVs with class: "vot_plus", "vot_updown", and ID="vt_..", sends to votAjax()
var getVotsElm = function () {
  var obj_div = document.getElementsByTagName('div');
  var nrobj_div = obj_div.length;
  for(var i=0; i<nrobj_div; i++) {
    // if contains class and id
    if(obj_div[i].className && obj_div[i].id) {
        var elm_id = obj_div[i].id;
      // if class "vot_plus", "vot_updown1", "vot_updown2", or "vot_poll" and id begins with "vt_"
      if((obj_div[i].className=='vot_plus' || obj_div[i].className=='vot_updown1' || obj_div[i].className=='vot_updown2') && elm_id.indexOf("vt_")==0) {
        ivotings[elm_id] = obj_div[i];       // store object item in $ivotings

        ar_elm[i_elm] = elm_id;     // add item_ID in $ar_elm array, to be send in json string tp php
        i_elm++;             // index order in $ar_elm
      }
    }
  }
  // if there are elements in "ar_elm", send them to votAjax()
  if(ar_elm.length>0) votAjax(ar_elm, '');      // if items in $ar_elm pass them to votAjax()
};

// add the ratting data to element in page
function addVotData(elm_id, vote, nvotes, renot) {
  // exists elm_id stored in ivotings
  if(ivotings[elm_id]) {
    // sets to add "onclick" for vote up (plus), if renot is 0
    var clik_up = (renot == 0) ? ' onclick="addVote(this, 1)"' : ' onclick="alert(\'You already voted\')"';

    // if vot_plus, add code with <img> 'votplus', else, if vot_updown1/2, add code with <img> 'votup',  'votdown'
    if(ivotings[elm_id].className == 'vot_plus') {    // simple vote
      ivotings[elm_id].innerHTML = '<h4>'+ vote+ '</h4><span><img src="'+votingfiles+'votplus.gif" alt="1" title="Vote"'+ clik_up+ '/></span>';
    }
    else if(ivotings[elm_id].className=='vot_updown1') {   // up/down with total Votes
      // sets to add "onclick" for vote down (minus), if renot is 0
      var clik_down = (renot == 0) ? ' onclick="addVote(this, -1)"' : ' onclick="alert(\'You already voted\')"';

      ivotings[elm_id].innerHTML = '<div id="nvotes">Votes: <b>'+ nvotes+ '</b></div><h4>'+ vote+ '</h4><span><img src="'+votingfiles+'votup.png" alt="Vote Up" title="Vote Up"'+ clik_up+ '/> <img src="'+votingfiles+'votdown.png" alt="Vote Down" title="Vote Down"'+ clik_down+ '/></span>';
    }
    else if(ivotings[elm_id].className=='vot_updown2') {      // up/down with number of votes up and down
      var nvup = (nvotes*1 + vote*1) /2;       // number of votes up
      var nvdown = nvotes - nvup;              // number of votes down

      // sets to add "onclick" for vote down (minus), if renot is 0
      var clik_down = (renot == 0) ? ' onclick="addVote(this, -1)"' : ' onclick="alert(\'You already voted\')"';

      ivotings[elm_id].innerHTML = '<h4>'+ vote+ '</h4><span><img src="'+votingfiles+'votup.png" alt="Vote Up" title="Vote Up"'+ clik_up+ '/> <img src="'+votingfiles+'votdown.png" alt="Vote Down" title="Vote Down"'+ clik_down+ '/></span><div id="nupdown"><b id="nvup">'+ nvup+ '</b> &nbsp; &nbsp; <b id="nvdown">'+ nvdown+ '</b></div>';
    }
  }
}

// Sends data to votAjax(), that will be send to PHP to register the vote
function addVote(ivot, vote) {
  // if $advote is 0, can vote, else, alert message
  if(advote == 0) {
    var elm = Array();
    elm[0] = ivot.parentNode.parentNode.id;      // gets the item-name that will be voted

    ivot.parentNode.innerHTML = '<i><b>Thanks</b></i>';
    votAjax(elm, vote);
  }
  else alert('You already voted');
}

/*** Ajax ***/

// create the XMLHttpRequest object, according to browser
function get_XmlHttp() {
  var xmlHttp = null;           // will stere and return the XMLHttpRequest

  if(window.XMLHttpRequest) xmlHttp = new XMLHttpRequest();     // Forefox, Opera, Safari, ...
  else if(window.ActiveXObject) xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");     // IE

  return xmlHttp;
}

// sends data to PHP and receives the response
function votAjax(elm, vote) {
  var cerere_http =  get_XmlHttp();     // get XMLHttpRequest object

  // define data to be send via POST to PHP (Array with name=value pairs)
  var datasend = Array();
  for(var i=0; i<elm.length; i++) datasend[i] = 'elm[]='+elm[i];
  // joins the array items into a string, separated by '&'
  datasend = datasend.join('&')+'&vote='+vote;

  cerere_http.open("POST", votingfiles+'voting.php', true);         // crate the request

  cerere_http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    // header for POST
  cerere_http.send(datasend);       //  make the ajax request, poassing the data

  // checks and receives the response
  cerere_http.onreadystatechange = function() {
    if (cerere_http.readyState == 4) {
      // receives a JSON with one or more item:[vote, nvotes, renot]
      eval("var jsonitems = "+ cerere_http.responseText);

      // if jsonitems is defined variable
      if (jsonitems) {
        // parse the jsonitems object
        for(var votitem in jsonitems) {
          var renot = jsonitems[votitem][2];        // determine if the user can vote or not

          // if renot=3 displays alert that already voted, else, continue with the voting reactualization
           if(renot == 3) {
            alert("You already voted \n You can vote again tomorrow");
            window.location.reload(true);       // Reload the page
          }
          else addVotData(votitem, jsonitems[votitem][0], jsonitems[votitem][1], renot);    // calls function that shows voting
        }
      }

      // if renot is undefined or 2 (set to 1 NRVOT in voting.php), after vote, set $advote to 1
      if(vote != '' && (renot == undefined || renot == 2)) advote = 1;
      }
  }
}

// this function is used to access the function we need after loading page
function addLoadVote(func) {
  var oldonload = window.onload; 

  // if the parameter is a function, calls it with "onload"
  // otherwise, adds the parameter into a function, and then call it
  if (typeof window.onload != 'function') window.onload = func;
  else { 
    window.onload = function() { 
      if (oldonload) { oldonload(); } 
      func();
    } 
  } 
}

addLoadVote(getVotsElm);            // calls getVotsElm() after page loads 
```

我自己确实尝试过这样做，它在某些浏览器中确实有效，但在其他浏览器中无效。我所做的只是添加更改第 66 行的代码：

ivot.parentNode.innerHTML = '***谢谢***';

到：

ivot.parentNode = window.location = "register2.php";

但正如我所说，这仅适用于某些浏览器，因为在其他浏览器上它不会将信息添加到数据库中，有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:55:02.633

你的意思是 ：

```
window.top.location = 'register2.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:30:25.397

ajax 请求和数据库操作在`votAjax(elm, vote)`. 因此，您必须在执行该请求后添加重定向代码。

最有可能在 100-115 行之间

# twitter-bootstrap - 带有 knockout.js 的引导工具提示

> ID：12367109
> 
> 赞同：1
> 
> 时间：2012-09-11T09:53:46.633
> 
> 标签：twitter-bootstrap, knockout.js

一旦淘汰赛完成渲染for循环，我发现很难找到将引导工具提示应用于我的img的方法。

下面显示了正确的图像，并显示了“标准” html 工具提示，但 .tooltip() 调用未激活引导工具提示。

我哪里错了？

**视图模型**

```
self.handleAfterRender= function(elements, data) {
    $(elements).find('img').tooltip();
} 
```

**HTML**

```
<div data-bind="with: $root.SelectedSubmission">
  <div data-bind="foreach: {data: To, afterRender: handleAfterRender}">
    <div class="pull-left">
      <img class="mediumprofileimage" rel="tooltip" 
           data-bind="attr: {src: ProfilePicture, alt: Fullname, title: Fullname}" />
      <br/>
      <span data-bind="text: Fullname"></span>
    </div>
  </div>
  <div class="clearfix"></div>
</div> 
```

我发现了更多关于这个问题的信息。似乎该元素正在失去对`tooltip()`. 我不确定我是否必须使用`jquery.on()`或`.live()`以某种方式保持绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-09T22:02:44.700

[你可以在这里](https://stackoverflow.com/questions/16875773/bootstraps-tooltip-not-working-with-knockout-bindings-w-fiddle)找到答案或者试试[Knockout-bootstrap](https://github.com/billpull/knockout-bootstrap)这是一个不错的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:55:14.083

在您的情况下，您应该使用 foreach，因为**afterRender**获得了插入的 DOM 元素的数组：

`$(elements).each(function(index,element){ $(element).find('img').tooltip()});`

但我认为最好使用**afterAdd**事件而不是**afterRender**，因为您需要为每个添加的项目添加工具提示，然后您将能够像现在尝试工作一样单独处理每个项目：

> $(element).find('img').tooltip();

**[链接到关于后处理或动画生成的 DOM 元素的](http://knockoutjs.com/documentation/foreach-binding.html#note_5_postprocessing_or_animating_the_generated_dom_elements)**KnockoutJs 文档

# seo - (SEO) - 将主站点内容复制到移动站点的副作用是什么？

> ID：12367111
> 
> 赞同：-2
> 
> 时间：2012-09-11T09:54:03.840
> 
> 标签：seo

您如何看待将我们的内容（尤其是文本内容）从我们的主站点（例如：mysite.com）复制到移动站点（例如：m.mysite.com 或 mysite.com/m）。这样做的 SEO 副作用是什么？SEO专家是否推荐这个？

如果您有外部文章或参考，希望你们也可以在这里分享。:)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:29:06.983

[这是谷歌对移动端搜索引擎优化的官方立场](http://googlewebmastercentral.blogspot.ch/2012/06/recommendations-for-building-smartphone.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:07:59.450

谷歌有一个单独的移动内容蜘蛛。如果您将主站点复制到 m.yoursite.com，则效果最佳，并且您的域权限将被转移。没有重复内容处罚。

# java - 使用 eclipselink 在实体表上指定 NullConstraint

> ID：12367114
> 
> 赞同：2
> 
> 时间：2012-09-11T09:54:16.763
> 
> 标签：java, jpa, persistence, eclipselink

要在多个列上指定 UniqueConstraint，我使用 @Table 注释并指定 uniqueConstraint 的值。我还想根据这种情况添加一个空约束：

```
@Entity
public class Contact{
  private PhoneBook phoneBook;
  private ContactGroup group;
} 
```

实体可以在电话簿中，也可以在组中，但不能同时在两者中，因为组已经引用了它所属的电话簿。在这种情况下，phonebook 和 group 都不能为空，并且不能都设置，一次只能设置一个。

在 netbeans 7.2、glassfish 3.2 eclipselink 2.0 上工作

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:04:28.813

我会简单地投入`ConstraintViolationException`或`phoneBook`根据`group`条件投入使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:04:10.877

```
import javax.validation.constraints.NotNull;

@Entity
public class Contact{

  @NotNull
  private PhoneBook phoneBook;

  @NotNull
  private ContactGroup group;
} 
```

应该管用 ：）

编辑：

对不起，现在我看到你在写交叉验证，可能你必须编写自己的验证器。

# visual-studio-2010 - VS2010 和 Mercurial：.hgignore 上的警告符号 - 如何消除警告

> ID：12367115
> 
> 赞同：0
> 
> 时间：2012-09-11T09:54:16.973
> 
> 标签：visual-studio-2010, mercurial, tortoisehg

每当我打开我的 VS2010（在 Mercurial 下）项目时，该`.hgignore`文件都会带有警告标记。工具提示说`Clean [default]`。

![忽略警告](../Images/624723eb893d03552ef99b07cc6ca40e.png)

打开文件一次会删除警告符号。

![hgignore 没有警告](../Images/cd8c3dae2456bbe847b8147e77646a90.png)

任何想法，为什么会这样以及我如何摆脱这个警告符号？一切都按预期工作，所以我不知道我被警告了什么。

使用：2012-09-04：TortoiseHg 2.5（与 Mercurial 2.3.1）发布

# crystal-reports - 水晶报表中的小数

> ID：12367117
> 
> 赞同：0
> 
> 时间：2012-09-11T09:54:20.393
> 
> 标签：crystal-reports, report, decimal, rounding

我花了几天时间解决一个问题，但不是如何解决它。我正在使用 Visual Studio 2010 在 Crystal Reports 中做一份报告，到目前为止它工作正常，我必须显示小数，神奇地总是四舍五入到最接近的整数，即如果数字是 13.80，四舍五入到 14，当我想要离开 13.80。

检索数据库的存储过程正确检索数据。该报告并创建了一个名为“正常”的变量来创建一个小公式，即：

```
if {pr_recuperar_apuntes_trabajador2; 1.tipo_apunte} = '3 'then

            {pr_recuperar_apuntes_trabajador2; 1.Quantity}; 
```

这证明了“tipo_apunte”是数字 3 来显示金额，如果它什么也没显示。我想问题出在公式中，而不是如何解决。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T10:42:35.410

右键单击对象并选择**格式化对象**。然后在您获得的窗口中单击**自定义按钮。**然后你可以看到下面的对话框。
![小数四舍五入](../Images/0cecac1250ddbf20a59840de1bd0d2e0.png)

在上面的窗口中，选择舍入选项为 0.01，小数为 1.00（例如，您可以调整更多）。这样您的值就不会被四舍五入为 2 位数。您的价值将保持为 13.80

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:07:49.823

选择字段。单击“增加小数”按钮两次。

![在此处输入图像描述](../Images/102a9a76bdb448e6c787e58a598cc2de.png)

# jquery - Jquery如何删除一列

> ID：12367118
> 
> 赞同：0
> 
> 时间：2012-09-11T09:54:19.647
> 
> 标签：jquery, html, dom

如何使用以下代码删除列。我正在使用 jquery 和 joomla。

```
jQuery("a.coldelete").live("click", function(){
                    var Index = jQuery(this).closest("th").prevAll("th").length;
                    var CostIndex = Index *2 - 1;
                    var SaleIndex = Index *2; 
                    alert(Index+'-'+CostIndex+'-'+SaleIndex);

                    jQuery("#ratecardlist").find("th:eq("+Index+")").remove();

                    jQuery("#labelrow").find("td:eq("+CostIndex+")").remove();
                    jQuery("#labelrow").find("td:eq("+SaleIndex+")").remove();

                    jQuery("#ratecardlist").find("tr.ratedatarow").each(function(){
                          jQuery(this).find("td:eq("+CostIndex+")").remove();
                          jQuery(this).find("td:eq("+SaleIndex+")").remove();
                    });
              }); 
```

下面提到了 HTML 结构，它是由 jquery 操作的。

```
<table id="cardlist" class="admintable">
    <tbody>
        <tr>
            <th>Show Time</th>
            <th colspan="2" style="text-align:left;">A Full <a href="#ratecardinfo" class="coldelete"><img src="com/assets/images/remove.png" /></a></th>
            <th colspan="2" style="text-align:left;">A Half <a href="#ratecardinfo" class="coldelete"><img src="com/assets/images/remove.png" /></a></th>
            <th colspan="2" style="text-align:left;">B Full <a href="#ratecardinfo" class="coldelete"><img src="com/assets/images/remove.png" /></a></th>
            <th colspan="2" style="text-align:left;">B Half <a href="#ratecardinfo" class="coldelete"><img src="com/assets/images/remove.png" /></a></th>
            <th colspan="2" style="text-align:left;">C Full <a href="#ratecardinfo" class="coldelete"><img src="com/assets/images/remove.png" /></a></th>
            <th></th>
        </tr>
        <tr id="labelrow">
            <td>&nbsp;</td>
            <td width="80px"><label>COST</label></td>
            <td width="80px"><label>SALE</label></td>
            <td width="80px"><label>COST</label></td>
            <td width="80px"><label>SALE</label></td>
            <td width="80px"><label>COST</label></td>
            <td width="80px"><label>SALE</label></td>
            <td width="80px"><label>COST</label></td>
            <td width="80px"><label>SALE</label></td>
            <td width="80px"><label>COST</label></td>
            <td width="80px"><label>SALE</label></td>
            <td></td>
        </tr>
        <tr class="ratedatarow" id="rate15">
            <td>6:30 PM</td>
            <input type="hidden" value="15" name="showtimeids[]" /><input type="hidden" value="101" name="categoryids[]" />
            <td width="50px"><input type="text" value="650.00" name="fc:15:101" style="width:45px;" /></td>
            <td width="50px"><input type="text" value="670.00" id="fs_15_101" name="fs:15:101" style="width:45px;" /></td>
            <td width="50px"><input type="text" value="500.00" name="hc:15:101" style="width:45px;" /></td>
            <td width="50px"><input type="text" value="520.00" name="hs:15:101" id="hs_15_101" style="width:45px;" /></td>
            <input type="hidden" value="102" name="categoryids[]" />
            <td width="50px"><input type="text" value="400.00" name="fc:15:102" style="width:45px;" /></td>
            <td width="50px"><input type="text" value="420.00" id="fs_15_102" name="fs:15:102" style="width:45px;" /></td>
            <td width="50px"><input type="text" value="300.00" name="hc:15:102" style="width:45px;" /></td>
            <td width="50px"><input type="text" value="320.00" name="hs:15:102" id="hs_15_102" style="width:45px;" /></td>
            <input type="hidden" value="103" name="categoryids[]" />
            <td width="50px"><input type="text" value="1200.00" name="fc:15:103" style="width:45px;" /></td>
            <td width="50px"><input type="text" value="1240.00" name="fs:15:103" id="fs_15_103" style="width:45px;" /></td>
            <td><a onclick="removeRow('rate15');" href="#ratecardinfo" id="rem"><img src="com/assets/images/remove.png" /></a> <a id="mo_applytoall" onclick="applyToAll('rate15');" href="#ratecardinfo"> Apply to All </a></td>
        </tr>
        <tr>
            <td style="background-color:#DDDDDD;" colspan="11"></td>
            <td style="background-color:#DDDDDD;">
                <input type="submit" style="cursor:pointer;" value="Add Card" name="addratecard" />                    
                <input type="button" style="cursor:pointer;" onclick="resetAll();" value="Reset" />                      
                <input type="button" style="cursor:pointer;" onclick="clearAll();" value="Clear All" /> 
            </td>
        </tr>
    </tbody>
</table> 
```

当我单击 remove.png 时，应该删除特定的行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:57:38.143

最有效的方法是给列的所有单元格一个类，然后您可以使用类名来删除列。

```
$('.myColumn').remove(); 
```

或者，您可以循环浏览行，根据需要删除每个第 N 个子项。

```
$('tr').each(function(){
  $(this).children().eg(N).remove();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:08:57.910

在功能`removeRow`尝试

```
$(this).closest('tr').remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:43:58.517

这似乎工作..

```
$("a").on("click", function(){
    $("table tbody tr").find("td:eq(0)").remove(); 
}); 
```

[http://jsfiddle.net/peterbenoit/ymYpv/](http://jsfiddle.net/peterbenoit/ymYpv/)

# c# - 如何创建 C# 正则表达式以使用引号中的某些单词拆分字符串？

> ID：12367119
> 
> 赞同：0
> 
> 时间：2012-09-11T09:54:29.300
> 
> 标签：c#, regex, string, split

我有一个字符串，格式如下：

```
"one,",2,3,"four " ","five" 
```

我需要以下格式的输出：

```
one,
2
3
four " 
five 
```

谁能帮我为上述创建正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:00:58.053

您可以在没有 Regex 的情况下执行此操作。我不清楚你想做什么。我已经调整了更新问题的代码：

```
var text = "\"one\",2,3,\"four \"\",\"five\"";

var collection = text
    .Split(',')
    .Select(s =>
                {
                    if (s.StartsWith("\"") && s.EndsWith("\""))
                    {
                        s = s.Substring(1, s.Length - 2);
                    }
                    return s;
                })
    .ToList();

foreach (var item in collection)
{
    Console.WriteLine(item);
} 
```

我为您添加了另一个示例，它使用 CSV 阅读器。我已经从 NuGet 安装了“CsvHelper”包：

```
const string text = "\"one,\",2,3,\"four \"\"\",\"five\"";

using (var textReader = new StringReader(text))
using (var reader = new CsvReader(textReader))
{
    reader.Configuration.Delimiter = ',';
    reader.Configuration.AllowComments = false;
    reader.Configuration.HasHeaderRecord = false;

    if (reader.Read())
    {
        foreach (var item in reader.CurrentRecord)
        {
            Console.WriteLine(item);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:59:53.023

```
 string newString = Regex.Replace(oldString, @'[^",]', ' '); 
```

我希望正则表达式是好的，但我只是想让你看到这个想法。

编辑：

```
 string newString = Regex.Replace(oldString, @'[^",]', '\n'); 
```

# build - 如何在 teamcity 中构建解决方案时设置 debug=false

> ID：12367120
> 
> 赞同：1
> 
> 时间：2012-09-11T09:54:29.660
> 
> 标签：build, msbuild, teamcity, debug-symbols

我想在 teamcity 中使用 msbuild 构建解决方案时设置 debug=false。是否有任何参数可以传递，以便在发布模式下构建时不会复制 bin 目录中的调试符号。我尝试使用 /p:debug=false 但它没有用。我不想使用 Web 配置转换。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:24:54.687

要不生成 pdb，您需要通过 /p:DebugSymbols=false;DebugType=None 命令行

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T06:53:08.940

您可以在 Visual Studio 中更改高级构建设置以进行发布构建配置。

打开项目属性，打开构建选项卡。按底部的“高级...”按钮并将调试信息更改为“无”。

# asp.net - javascript中的多视图

> ID：12367122
> 
> 赞同：2
> 
> 时间：2012-09-11T09:54:41.970
> 
> 标签：asp.net

我的多视图控件中有 3 个视图。我想使用javascript更改客户端多视图的activeviewindex。我做不到。帮助将不胜感激。我的代码是：

```
<asp:Panel runat="server" ID="multiviewContainer" CssClass="multiviewContainer">
    <asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0">
        <asp:View ID="View1" runat="server">
            View 0
        </asp:View>
        <asp:View ID="View2" runat="server">
            View 1
        </asp:View>
        <asp:View ID="View3" runat="server">
            View 2
        </asp:View>
        <asp:View ID="View4" runat="server">
            View 3
        </asp:View>
    </asp:MultiView>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:04:58.270

MultiView 是一个服务器端控件，并不意味着要在客户端进行修改，因此即使在技术上可以更改活动索引客户端，您也可能不应该这样做。所以我认为没有人会为这个问题提供任何“好的”答案。为什么不使用 jQuery？

```
<script type="text/javascript">

    function ChangeActiveIndex(index) {
        $('div').hide(); // change this selector to be more specific
        $('#div' + index).show();
    }

</script>

<div id="div1">View 1</div>
<div id="div2">View 2</div>
<div id="div3">View 3</div>

<span onclick="ChangeActiveIndex(1);">Show View 1</span>
<span onclick="ChangeActiveIndex(2);">Show View 2</span>
<span onclick="ChangeActiveIndex(3);">Show View 3</span> 
```

如果需要，您还可以在后面的代码中修改它们：

```
<div id="div1" runat="server">View 1</div>

div1.Attributes.Add("class", "make-a-class-display:none-or-display:inline") 
```

# javascript - 如何获得位于 2 个引号之间的子字符串？

> ID：12367126
> 
> 赞同：15
> 
> 时间：2012-09-11T09:54:54.807
> 
> 标签：javascript, jquery, regex

我有一个看起来像这样的字符串：“你需要的词是'你好'”。

将“hello”（但不带引号）放入 javascript 变量的最佳方法是什么？我想这样做的方法是使用正则表达式（我对此知之甚少）？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-11T09:57:34.323

使用[`match()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)：

```
> var s =  "the word you need is 'hello' ";
> s.match(/'([^']+)'/)[1];
"hello" 
```

这将匹配一个开始`'`，然后是除 之外的任何内容`'`，然后是结束`'`，将其间的所有内容存储在第*一个*捕获的组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:04:48.517

[http://jsfiddle.net/Bbh6P/](http://jsfiddle.net/Bbh6P/)

```
var mystring = "the word you need is 'hello'"
var matches = mystring.match(/\'(.*?)\'/);  //returns array

​alert(matches[1]);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:20:24.443

如果您想避免使用正则表达式，则可以使用`.split("'")`在单引号处拆分字符串，然后使用`jquery.map()`仅返回奇数索引子字符串，即。所有单引号子字符串的数组。

```
var str = "the word you need is 'hello'";
var singleQuoted = $.map(str.split("'"), function(substr, i) {
   return (i % 2) ? substr : null;
}); 
```

**[演示](http://jsfiddle.net/GwCUc/1/)**

## 警告

**如果原始字符串中出现一个或多个撇号（与单引号相同），则此方法和其他方法将出错。**

# java - 如何使用 Jackson 构建不同对象的 JSON 数组？

> ID：12367128
> 
> 赞同：2
> 
> 时间：2012-09-11T09:55:04.180
> 
> 标签：java, android, json, jackson

我正在构建一个 android 应用程序，用于保存类中传入/传出呼叫、`CallLog`类中传入/传出 SMS`SmsLog`以及通过类发送/接收的字节的信息`DataLog`。我让它们都实现了一个`JsonLog`接口，这样我就可以创建一个s `ArrayList`，`JsonLog`希望它可以通过 Jackson 轻松转换为不同对象的 JSON 数组。

但是，每当我反序列化 JSON 文件时，我都会收到此错误：

```
com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance
of com.project.pojos.JsonLog, problem: abstract types either need to be mapped
to concrete types, have custom deserializer, or be instantiated with additional
type information 
```

我该如何解决这个问题？所有`JsonLog`类都有一个字符串属性`type`，它是`in_call`or `out_call`for `CallLog`s, `in_sms`or `out_sms`for `SmsLog`s, and `data`for `DataLog`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:59:37.890

您需要在 JSON 数据中包含类型参数或自定义反序列化器才能完成这项工作。

更简单的解决方案是前者，因为您不需要编写太多代码，并且可以轻松扩展它，并且从 JSON 数据中您可以简单地判断哪个条目是什么类型。

### 类型信息

如果你有一个`type`参数：

```
[
  {
    "type": "SMS",
    "id": 1,
    "data": { }
  },
  {
    "type": "CALL",
    "id": 2,
    "somethingOtherData": {}
  }
] 
```

然后在您的抽象`JsonLog`类中，您可以设置类型映射信息：

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type")
@JsonSubTypes({
    @Type(name = "SMS", value = SmsLog.class),
    @Type(name = "CALL", value = CallLog.class)
})
public abstract class JsonLog {
} 
```

### 解串器

如果您的 JSON 中不能包含此类型信息，则需要编写自己的反序列化器。在该反序列化器中，您需要从实际条目中决定该条目是 an`SmsLog`还是 a `CallLog`。

# .net - .Net 中的二传手是原子的吗？

> ID：12367129
> 
> 赞同：2
> 
> 时间：2012-09-11T09:55:08.693
> 
> 标签：.net, concurrency

> **可能重复：**
> [在 C# 中对属性的读写是原子的吗？](https://stackoverflow.com/questions/1151873/are-reads-and-writes-to-properties-atomic-in-c)

.NET 4 中自动生成的设置器是原子的吗？

```
Public property Busy As boolean 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:56:59.533

他们不保证是。

考虑到上面编译为带有支持字段的完整表单属性。在 setter 调用和支持字段的实际分配之间可能会出现不同的线程。

此外，并非所有类型都可以原子分配 - 大值类型（`DateTime`等`TimeSpan`）对于原子分配来说太大了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:56:34.213

不，setter 是一种具有特殊语法的方法。Auto-Properties 是具有自动生成的 getter 和 setter 的属性。编译器生成一个底层字段，该字段由 getter 方法检索并由 setter 方法分配。

例如，

```
 public bool Property { get; set; } 
```

实际上被编译成类似的东西：

```
private bool underlyingField;

public bool Property { 
   get { 
      return underlyingField;
   } 
   set { 
      underlyingField = value;
   }
} 
```

一个字段可以被认为是一个原子单元，写入一个字段是一个原子操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:59:57.120

是的，如果类型本身的分配是原子的，那么属性分配就是原子的。

setter 是一种方法，因此分配被包装在方法调用中（如果它不是内联的），但它所做的实际分配是原子的。

# knockout.js - 带有 ko.mapping 的淘汰赛更新模型不适用于计算字段

> ID：12367131
> 
> 赞同：1
> 
> 时间：2012-09-11T09:55:36.383
> 
> 标签：knockout.js, knockout-mapping-plugin

似乎如果计算字段的属性“所有者”设置为视图模型的子元素，则使用 ko.mapping 更新 ViewModel 会删除计算值。

就像在这种情况下，我们有一个父母数组（每个父母都有一些子元素），我们希望每个父母都有一个计算字段来显示孩子的年龄总和。

当我们第一次应用 ViewModel 时一切正常，但是如果我们在创建计算字段后重新应用映射，它们就会被删除。

```
<div data-bind="foreach: parent">

    <div class="cell"><span class="" data-bind="text : $data.comp"></span></div>
</div>
<span data-dind="text: comp"></span>
<script type="text/ecmascript">

    var viewModelJs = { 'parent': [{ 'name': 'pippo', 'childAge': [{ 'age': 15 }, { 'age': 18 }] }, { 'name': 'pluto', 'childAge': [{ 'age': 5 }, { 'age': 13 }] }] };

    var viewModel = ko.mapping.fromJS(viewModelJs);

    for (var index in viewModel.parent()) {
        var parent = viewModel.parent()[index];
        parent.comp = ko.computed(
            {
                read: function () {
                    var parent = this;
                    var sum = 0;
                    for (var j in parent.childAge()) {
                        var age = parent.childAge()[j].age();
                        sum += parseInt(age);
                    }
                    return sum;
                },
                owner: parent
            });
    };

    ko.applyBindings(viewModel);

    viewModelJs = { 'parent': [{ 'name': 'paperino', 'childAge': [{ 'age': 5 }, { 'age': 18 }] }, { 'name': 'mario', 'childAge': [{ 'age': 5 }, { 'age': 13 }] }] };

    //Everything works fine so far...

    ko.mapping.fromJS(viewModelJs, viewModel);

    //now the computed fields are gone.

</script> 
```

有没有办法用 ko.mapping 保存那些计算字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:49:49.443

如果属性*名称*唯一标识数组中的一项，请尝试将您对函数**ko.mapping.fromJS**的第一次调用替换为：

```
var mapping = {
    'parent': {
        key: function(data) {
            return ko.utils.unwrapObservable(data.name);
        }
    }
};
var viewModel = ko.mapping.fromJS(viewModelJs, mapping); 
```

并在第二个*viewModelJs*定义中使用相同的*名称值。*

 *见[jsbin](http://jsbin.com/abaluz/1/edit)*

# r - 在 R 中使用具有分类值的 k-NN

> ID：12367133
> 
> 赞同：6
> 
> 时间：2012-09-11T09:55:38.740
> 
> 标签：r, distance, knn

我正在寻找对主要具有分类特征的数据进行分类。为此，欧几里得距离（或任何其他数值假设距离）不适合。

我正在寻找 [R] 的 kNN 实现，可以选择不同的距离方法，例如汉明距离。有没有一种方法可以使用具有不同距离度量函数的常见 kNN 实现，例如 {class} 中的实现？

我正在使用 R 2.15

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:28:06.847

只要您可以计算距离/相异矩阵（以您喜欢的任何方式），您就可以轻松执行 kNN 分类，而无需任何特殊包。

```
# Generate dummy data
y <- rep(1:2, each=50)                          # True class memberships
x <- y %*% t(rep(1, 20)) + rnorm(100*20) < 1.5  # Dataset with 20 variables
design.set <- sample(length(y), 50)
test.set <- setdiff(1:100, design.set)

# Calculate distance and nearest neighbors
library(e1071)
d <- hamming.distance(x)
NN <- apply(d[test.set, design.set], 1, order)

# Predict class membership of the test set
k <- 5
pred <- apply(NN[, 1:k, drop=FALSE], 1, function(nn){
    tab <- table(y[design.set][nn])
    as.integer(names(tab)[which.max(tab)])      # This is a pretty dirty line
}

# Inspect the results
table(pred, y[test.set]) 
```

如果有人知道比上面的脏线更好的方法来找到向量中最常见的值，我很乐意知道。

需要该`drop=FALSE`参数来`NN`在 case 中保留 as 矩阵的子集`k=1`。如果不是，它将被转换为向量并`apply`抛出错误。

# php - 我如何在 CSS 中运行 PHP

> ID：12367134
> 
> 赞同：16
> 
> 时间：2012-09-11T09:55:38.523
> 
> 标签：php, css

我有一个这样的样式表链接

```
<link href="css/<? echo $theme;?>/styles.css" rel="stylesheet" type="text/css" /> 
```

在 CSS 内部，我希望能够回显 db 输出的背景图像

```
body{ background-image:url(../../images/<?php echo $theme.'/'.$background;?>);} 
```

我尝试将以下内容添加到页面的开头，但它只是以 html 代码输出所有内容

```
<? header ("Content-type: text/css");?> 
```

我确定这有一点，任何人都可以建议最好的行动方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-11T09:57:14.620

将文件结尾更改为 php 以便它由服务器运行，一旦完成，您就可以链接到它，就好像它是一个常规的 css 文件一样，并确保使用您在文件顶部

**改变：**

```
<link href="css/<? echo $theme;?>/styles.css" rel="stylesheet" type="text/css" /> 
```

**至：**

```
<link href="css/<? echo $theme;?>/styles.php" rel="stylesheet" type="text/css" /> 
```

以及您拥有的该文件的顶部

```
<? header ("Content-type: text/css");?> 
```

顺便说一句，因为你似乎已经启用了*php 短标签*，你也可以使用而不是使用

```
<? echo $var;?> 
```

利用

```
<?=$var;?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-20T20:11:09.647

这是一种方法：在 HTML 文件中使用 CSS 的那部分。使用双引号“”并在其中写入 PHP 文件。这是在 CSS 文件中使用 PHP 的示例。

此 CSS 在 HTML 文件中，此代码在我的项目中运行良好。让我知道是否有任何问题会对其进行测试。

```
<style type="text/css">

        @media screen and (max-width: 650px) {
            .benifit {
                background-image:url("<?= $this->getBaseUrl() ?>/www/images/Capture.png") ;
                height:440px;
                border-radius: 5px 0px 0px 5px;
            }

        }
        @media screen and (min-width: 400px) {
            .benifit {

                width: 47%;
                background-image:url("<?= $this->getBaseUrl() ?>/www/images/Capture.png") ;
                height:440px;
                border-radius: 5px 0px 0px 5px;
            }
        }
        #ajax-loader {

            height:     100%;
            width:      100%;
            background: rgba( 255, 255, 255, .8 ) url("<?= $this->getBaseUrl() ?>/www/img/ajax-loader1.gif") 50% 50% no-repeat;
            overflow: hidden;
        }

    </style> 
```

# javascript - Internet Explorer 不显示图像。图像“src”保持空白

> ID：12367136
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:55:48.610
> 
> 标签：javascript, html, internet-explorer-8, getelementbyid, src

我希望你很好。

## 短的：

我的 HTML 内容如下：

```
<img id="JavImage">
    <script language="JavaScript" type="text/javascript"
            src="http://www.foobar.com/Contents.js"></script>
</img> 
```

我的*Contents.js 内容*如下：

```
document.getElementById("JavImage").src="https://www.foobar.com/imgURL.jpg"; 
```

它`imgURL`在 FF15 中正确显示图像，但在 IE8 中根本不显示。我检查了源代码，FF 适当地添加了“src”属性，而 IE8 中没有附加“src”属性。

根据我对这些论坛的研究，IE 与`getElementById`and存在问题`getElementsByName`，但`<img id="JavImage" name="JavImage"></img>`也没有工作。

请指教。有关更多信息，请参见下文。

* * *

## 长：

我有一个简单的 HTML 页面阅读：

```
<script language="JavaScript" type="text/javascript" src="http://www.foobar.com/JavPage.js"></script>` 
```

和*JavPage.js*读取：

```
 document.write('<!DOCTYPE html><html><head>...<body><a id="JavHeader"><script language="JavaScript" type="text/javascript" src="http://www.foobar.com/Contents.js"></script></a>...</html>'); 
```

Contents.js*内容*如下：

```
document.getElementById("JavHeader").href="www.foobar.com";
document.getElementById("JavHeader").innerHTML="Foobar"; 
```

Contents.js 中有各种具有相应 ID 的此类元素。

**我的意图是允许 HTML 由外部文件编写，以便可以远程编辑。有没有更有效的方法来做到这一点？**

简单的 HTML 页面呈现了整个 Javascript，但某些元素在 Firefox/Chrome 中有效，而在 IE 中无效（参见**Short**）。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:58:46.397

为了

```
<img id="JavImage"><script language="JavaScript" type="text/javascript" src="http://www.foobar.com/Contents.js"></script></img> 
```

调用您的 javascript 时，浏览器可能不会呈现图像对象。所以你可以让你的函数在页面加载后被调用

# asp.net-mvc - 在 asp.net mvc 的单个视图中从多个模型中获取值

> ID：12367138
> 
> 赞同：0
> 
> 时间：2012-09-11T09:55:53.073
> 
> 标签：asp.net-mvc

如何在单个视图中从多个模型中获取值？使用 ViewModel 是正确的解决方案吗？创建 ParentModel 也会出错。有这方面的分步教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:01:25.740

创建一个视图模型，检查这个[创建一个视图模型](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx)

# php - 发送带有附件的邮件

> ID：12367139
> 
> 赞同：1
> 
> 时间：2012-09-11T09:56:10.780
> 
> 标签：php, email, attachment

我有发送带有多个附件的邮件的代码。当我提交邮件时，文件附在邮件中...购买我的短信不会出现在邮件中（我的邮件：xxxxxxx）

```
$fname = $_POST["fname"];
$lname = $_POST["lname"];
$email = $_POST["email"];
$phone =  $_POST["phone"];
$address =  $_POST["address"];
$freetext = $_POST["freetext"];
    ///// 
```

$mime_boundary="==Multipart_Boundary_x".md5(mt_rand())."x";

```
 $headers = "From: '".$email."'\r\n" .
     "MIME-Version: 1.0\r\n" .
        "Content-Type: multipart/mixed; charset=utf-8 ; boundary=$sep\n" .
        " boundary=\"{$mime_boundary}\"";

     $message = "xxxxxx" .
        "--{$mime_boundary}\n" .
        "Content-Type: text/html; charset=utf-8\n\n" .
        "Content-Transfer-Encoding: 7bit\n\n" .
         "\n\n";

     foreach($_FILES as $userfile)
     {
        $tmp_name = $userfile['tmp_name'];
        $type = $userfile['type'];
        $name = $userfile['name'];
        $size = $userfile['size'];

        if (file_exists($tmp_name))
        {
           if(is_uploaded_file($tmp_name))
           {
              $file = fopen($tmp_name,'rb');

              $data = fread($file,filesize($tmp_name));

              fclose($file);

              $data = chunk_split(base64_encode($data));
           }

           $message .= "--{$mime_boundary}\n" .
              "Content-Type: {$type};\n" .
              " name=\"{$name}\"\n" .
              "Content-Disposition: attachment;\n" .
              " filename=\"{$fileatt_name}\"\n" .
              "Content-Transfer-Encoding: base64\n\n" .
           $data . "\n\n";
        }
     }

     $message .="--{$mime_boundary}--\n"; 
```

if (mail($support, $txt_new_member, $message, $headers)) echo "邮件发送成功。"; 否则回显“邮件错误”；

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:59:17.440

我推荐你使用 PHP Mailer - [http://sourceforge.net/projects/phpmailer/](http://sourceforge.net/projects/phpmailer/)

# mysql - mysql - 使用关键字作为列名时出现错误 1064 (42000)

> ID：12367145
> 
> 赞同：2
> 
> 时间：2012-09-11T09:56:24.453
> 
> 标签：mysql, raspberry-pi, debian-based

这有什么问题？在 Gentoo 系统上成功运行了这个，但现在在 Debian-Squeeze (Raspberry PI) 上它不会工作。

数据库设置好了

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| arduino1           |
| mysql              |
| performance_schema |
| test               |
| tmp                |
+--------------------+
6 rows in set (0.01 sec)

mysql> 
```

命令是：

```
#mysql -u root -p******* arduino1 < arduino-tables.sql 
```

导致：

```
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(8),
    currentTime DATETIME,
    timeDiff INT(10),
    unixTime INT(10),
    currentR1 FL' at line 3 
```

arduino-tables.sql 的内容：

```
#cat arduino-tables.sql:

CREATE TABLE pulseLog (
    id INT(10) UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
    timeStamp TIMESTAMP(8),
    currentTime DATETIME,
    timeDiff INT(10),
    unixTime INT(10),
    currentR1 FLOAT,
    currentS2 FLOAT,
    currentT3 FLOAT,
    currentAverageR1 FLOAT,
    currentAverageS2 FLOAT,
    currentAverageT3 FLOAT,
    temp0 FLOAT,
    temp1 FLOAT,
    temp2 FLOAT,
    temp3 FLOAT,
    temp4 FLOAT,
    temp5 FLOAT,
    pulses INT,
    event char(255),
 ) CHARACTER SET UTF8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:05:26.263

那里有一些拼写错误，比如`timestamp`一个关键字，你在 . 之后有一个额外的逗号 `event char(255),`。

尝试这个：

```
 CREATE TABLE pulseLog (
    id INT(10) UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
    `timeStamp` TIMESTAMP,
    `currentTime` DATETIME,
    `timeDiff` INT(10),
    `unixTime` INT(10),
    `currentR1` FLOAT,
    `currentS2` FLOAT,
    `currentT3` FLOAT,
    `currentAverageR1` FLOAT,
    `currentAverageS2` FLOAT,
    `currentAverageT3` FLOAT,
    `temp0` FLOAT,
    `temp1` FLOAT,
    `temp2` FLOAT,
    `temp3` FLOAT,
    `temp4` FLOAT,
    `temp5` FLOAT,
    `pulses` INT,
    `event` char(255)
 ) CHARACTER SET UTF8; 
```

这是[SQL Fiddle 演示](http://sqlfiddle.com/#!2/da1d5)

**编辑：**

除此之外，不支持您的时间戳语法。有关日期、日期时间和时间戳的参考，[请在此处查看](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:59:37.877

您正在使用的关键字是`datatype`. 您可以通过使用`backtick`示例转义它来做到这一点

```
CREATE TABLE pulseLog (
    id INT(10) UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
    `timeStamp` TIMESTAMP(8),
    `currentTime` DATETIME,
    `timeDiff` INT(10),
    `unixTime` INT(10),
    currentR1 FLOAT,
    currentS2 FLOAT,
    currentT3 FLOAT,
    currentAverageR1 FLOAT,
    currentAverageS2 FLOAT,
    currentAverageT3 FLOAT,
    temp0 FLOAT,
    temp1 FLOAT,
    temp2 FLOAT,
    temp3 FLOAT,
    temp4 FLOAT,
    temp5 FLOAT,
    pulses INT,
    event char(255),
 ) CHARACTER SET UTF8; 
```

# java - 用正则表达式拆分字符串

> ID：12367152
> 
> 赞同：0
> 
> 时间：2012-09-11T09:56:42.627
> 
> 标签：java, regex

我一直试图在android中使用正则表达式拆分字符串，但没有成功。

字符串的格式如下**id;value|** 例如 ：

```
String valueString = "20;somevalue|4;anothervalue|10;athirdvalue|5;enoughwithvaluesalready"; 
```

我使用这种方法来尝试拆分字符串。

```
public void splitString(String valueString){
    Pattern p = Pattern.compile("([\\d]+);([^\\|]+)");
    Matcher m = p.matcher(valueString);  
    boolean matches = m.matches();
} 
```

当我在[Rubular-regex-editor](http://rubular.com/r/dGDvQrIV7d)中运行它时，它看起来很好，在 Android 中找不到匹配项。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:07:37.793

该方法`matches()`尝试将正则表达式与完整的字符串进行匹配。这显然不匹配。

`find()`将找到下一个匹配的子字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:17:33.510

为什么不使用[`String.split`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)而不是编写自己的解决方案？

喜欢：

```
final String[] entries = valueString.split("\\|");
for (String entry : entries) {
  final String[] fields = entry.split(";", 2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:17:23.803

我试过你的例子，它只会在你的 Regx 末尾添加 .*

```
 Log.i("MainActivity ", "Matches " + valueString.matches("([\\d]+);([^\\|]+).*")); 
```

以上行返回真

[http://developer.android.com/reference/java/lang/String.html#matches(java.lang.String](http://developer.android.com/reference/java/lang/String.html#matches(java.lang.String) )

在上面的函数中描述

# forms - 从 Zend Framework 2 中的 Form 获取发布的数据

> ID：12367153
> 
> 赞同：7
> 
> 时间：2012-09-11T09:56:44.633
> 
> 标签：forms, zend-framework2

我是 Zend 框架的新手，所以问了一个基本问题。我想获取发布的数据，通常是从表单中的一个字段，我想获取用于调试目的的数据。

例如，我有一个包含用户名、年龄等字段的表单。在 addAction() 的控制器中，我想获取用户名，将其存储在变量中并将其用于调试目的。我希望我说清楚了。如果我的问题不清楚，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-11T10:28:44.263

你不是很清楚，所以我建议一些解决方案......

如果您需要普通的 POST 值，可以使用

```
$this->getRequest()->getPost('name'); 
```

从控制器的上下文。

如果您需要之前分配的表单中的值，您可以使用

```
$form->get('elementName')->getValue(); 
```

但是，如果您使用 InputFilters，则需要使用

```
$form->getInputFilter()->getValue('name'); 
```

否则，您检索的值不会通过过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:16:36.623

您可以通过以下方式执行此操作：在您的控制器操作中

```
$value = $form->getValue('UserName'); 
```

通过这种方式，您可以获得具有 ID 'UserName' 的 zend 文本框的值

有关更多详细信息，您可以研究以下给出的代码： [Zend 框架教程](http://akrabat.com/zend-framework-tutorial/)

# asp.net - 使用 SuppressFormsAuthenticationRedirectModule 导致 Object Moved Here 而不是显示页面内容

> ID：12367158
> 
> 赞同：1
> 
> 时间：2012-09-11T09:57:06.027
> 
> 标签：asp.net, forms-authentication, webforms

我正在使用位于[http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)的 SuppressFormsAuthenticationRedirectModule来防止重定向某些 HTTP 401状态并改为显示自定义页面。

但是，我将 Object Moved Here 作为输出。如何改为显示我的自定义页面？

页面如下

```
<%@ Page Title="Unauthorized" Language="vb" MasterPageFile="~/Site.Master" AutoEventWireup="false" CodeBehind="UnauthorizedError.aspx.vb" Inherits="WebFormsTemplate.UnauthorizedError" %>

<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
    <h2>Unauthorized</h2>
    You do not have permission to view this page.
</asp:Content> 
```

背后的代码

```
Imports System.Net
Imports Appahoo.Web.WebForms

Public Class UnauthorizedError
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        SuppressFormsAuthenticationRedirectModule.SuppressAuthenticationRedirect(Me.Context, False)
        Me.Response.StatusCode = HttpStatusCode.Unauthorized
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:03:58.310

没有意识到 SuppressAuthenticationRedirect 已经将状态设置为 HttpStatusCode.Unauthorized。因此我应该删除 Me.Response.StatusCode = HttpStatusCode.Unauthorized 让页面呈现。

```
Imports System.Net
Imports Appahoo.Web.WebForms

Public Class UnauthorizedError
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        SuppressFormsAuthenticationRedirectModule.SuppressAuthenticationRedirect(Me.Context, False)
    End Sub
End Class 
```

# scala - MyType 类型不匹配

> ID：12367161
> 
> 赞同：1
> 
> 时间：2012-09-11T09:57:12.907
> 
> 标签：scala, types, self-type

[我在这里](https://stackoverflow.com/a/3965743/562716)借用了[Landei](https://stackoverflow.com/users/375232/landei) 的 MyType 技巧。但是最近我遇到了 self 类型的问题。一个例子说明了我的意思：

```
trait Excitable[SELF] { self: SELF =>
  def withMoreAnger: SELF
}
trait Animal[SELF0] { self: SELF0 =>
  type SELF = SELF0 // to reveal SELF0 for method spitAt used as a dependent method type 
  type SpittableAnimal[S] <: Animal[S]
  def spitAt[A <: SpittableAnimal[_]](a: A): a.SELF
}
trait ExcitableAnimal[SELF] extends Animal[SELF] with Excitable[SELF] { self: SELF =>
  type SpittableAnimal[S] = ExcitableAnimal[S]
  def spitAt[A <: SpittableAnimal[_]](a: A): a.SELF = a.withMoreAnger
}
trait Quadruped[SELF] extends ExcitableAnimal[SELF] { self: SELF => }
case class Dog(anger: Int) extends Quadruped[Dog] {
  def withMoreAnger: Dog = copy(anger = anger + 1)
}
case class Cat(anger: Int) extends Quadruped[Cat] {
  def withMoreAnger: Cat = copy(anger = anger + 1)
}
val dog = Dog(anger = 0)
val cat = Cat(anger = 0)
val angryCat: Cat = dog spitAt cat // fine

val anotherDog = Dog(0)
val animals = Seq(dog, cat)
val angryAnimals: Seq[Quadruped[_]] = for (a <- animals) yield anotherDog spitAt a // fine
val veryAngryAnimals: Seq[Quadruped[_]] = for (a <- angryAnimals) yield anotherDog spitAt a // type mismatch !!! 
```

据我所知，问题似乎是该`spitAt`方法中的下划线最终会产生一个`Any`for `a.SELF`。但是我怎样才能使这段代码工作呢？
我也试过这个：

```
def spitAt[A <: SpittableAnimal[A]](a: A): A = a.withMoreAnger 
```

但是推断的类型参数不符合方法 spitAt 的类型参数边界，这对我来说很清楚，因为`SELF`元素的类型参数`animals`至少有边界`_ >: Cat with Dog <: Quadruped[_]`不符合`a.SELF`,`A`在`spitAt`上面甚至`A`在`spitAt`下面：

```
def spitAt[A <: SpittableAnimal[S], S <: A](a: A): A = a.withMoreAnger 
```

那么`spitAt`使`for`-loop 行工作的方法的正确签名是什么？
也许 SELF 类型参数的方差注释 ( `+SELF`) 可能会有所帮助，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:36:15.217

这是另一个观点。我想这将是“吐槽”。

它只是显示类型参数的差异，以及 spitAt 的修订签名。

它还在 Worm 中展示了另一个永恒问题的示例，让您创建一个具有抽象类型成员的具体类有什么好处？

```
package spit

import language.higherKinds

trait Excitable[+SELF] { self: SELF =>
  def withMoreAnger: SELF
}
trait Animal[+SELF] { self: SELF =>
  type SpatAt = SELF // to reveal SELF for method spitAt used as a dependent method type
  type SpittableAnimal[S] <: Animal[S]
  def spitAt[A](a: SpittableAnimal[A]): a.SpatAt
}
trait ExcitableAnimal[+SELF] extends Animal[SELF] with Excitable[SELF] { self: SELF =>
  type SpittableAnimal[S] = ExcitableAnimal[S]
  def spitAt[A](a: SpittableAnimal[A]): a.SpatAt = a.withMoreAnger
}
trait Quadruped[+SELF] extends ExcitableAnimal[SELF] { self: SELF =>
}
case class Dog(anger: Int) extends Quadruped[Dog] {
  def withMoreAnger: Dog = copy(anger = anger + 1)
}
case class Cat(anger: Int) extends Quadruped[Cat] {
  def withMoreAnger: Cat = copy(anger = anger + 1)
}
trait Vermiform[SELF] extends Animal[SELF] { self: SELF =>
  // worm saliva is actually quite pleasant
  def spitAt[A](a: SpittableAnimal[A]): a.SpatAt = a.asInstanceOf[A]
}
case class Worm() extends Vermiform[Worm]

object Test {
  def main(args: Array[String]) {
    val dog = Dog(anger = 0)
    val cat = Cat(anger = 0)
    val angryCat: Cat = dog spitAt cat // fine

    val anotherDog = Dog(0)
    val animals = Seq(dog, cat)
    val angryAnimals = for (a <- animals) yield anotherDog spitAt a
    val podAnimals = for (a <- angryAnimals) yield anotherDog spitAt a
    println(animals)
    println(angryAnimals)
    println(podAnimals)

    val worm = Worm()
    //println(worm spitAt dog) // Worms don't spit
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T01:07:21.647

你喜欢zee疼痛吗？你！:)

我不敢相信这个问题没有爱。

```
$ smala spit.Test
List(mild puppy, sweet kitteh)
List(angry puppy, gnarly kitteh)
List(angry hound, gnarly pussy) 
```

谁能抵挡得了粗犷的小猫？

支持我，否则小猫会生气！很生气！

在有关 MyType 的问题中，我们发现有人说只使用类型类。去做就对了。

很容易授予可能吐口水和被吐口水的人，并且可能易于阅读代码。

我本来想变聪明的，比如，一只非常生气的猫变成了一只鬼猫（愤怒> 9条生命），但我必须去幼儿园当司机……

```
package spit

import language.{ higherKinds, implicitConversions }

trait Excitable[SELF] { self: SELF =>
  def withMoreAnger: SELF
}
trait Animal[SELF] { self: SELF =>
  type SpatAt = SELF
  type SpittableAnimal[S] <: Animal[S]
}
trait ExcitableAnimal[SELF] extends Animal[SELF] with Excitable[SELF] { self: SELF =>
}
object ExcitableAnimal{
  implicit def toSpitter[S](a: ExcitableAnimal[S]) = new Spitter(a)
  implicit def toSpittee[S](a: ExcitableAnimal[S]) = new Spittee(a)
}
trait Quadruped[SELF] extends ExcitableAnimal[SELF] { self: SELF =>
}
class Dog(anger: Int) extends Quadruped[Dog] {
  def withMoreAnger: Dog = new Dog(anger + 2)
  override def toString = s"${if (anger > 0) "angry" else "mild"} ${if (anger > 2) "hound" else "puppy"}"
}
class Cat(anger: Int) extends Quadruped[Cat] {
  def withMoreAnger: Cat = new Cat(anger + 1)
  override def toString = s"${if (anger > 0) "gnarly" else "sweet"} ${if (anger > 1) "pussy" else "kitteh"}"
}

class Spitter[S](val spitter: Animal[S]) extends AnyVal {
  def spitAt[T](spittee: ExcitableAnimal[T]) = spittee.spatUpon
}
class Spittee[S](val spittee: ExcitableAnimal[S]) extends AnyVal {
  def spatUpon = spittee.withMoreAnger
}
object Test {
  def Dog(anger: Int) = new Dog(anger)
  def Cat(anger: Int) = new Cat(anger)
  def main(args: Array[String]) {
    val dog = Dog(anger = 0)
    val cat = Cat(anger = 0)
    val angryCat: Cat = dog spitAt cat // fine

    val anotherDog = Dog(0)
    val animals = Seq(dog, cat)
    println(animals)
    val angryAnimals = for (a <- animals) yield anotherDog spitAt a
    println(angryAnimals)
    val poAnimals = for (a <- angryAnimals) yield anotherDog spitAt a
    println(poAnimals)
  }
} 
```

作为参考，另一个字符：

```
trait Vermiform[SELF] extends Animal[SELF] { self: SELF =>
  // worm saliva is actually quite pleasant
  def spitAt[A <: SpittableAnimal[A]](a: A): a.SpatAt = a
} // not excitable
case class Worm() extends Vermiform[Worm] 
```

刚才在车里，我发现自己想知道蠕虫的唾液是否真的有镇静作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:08:25.193

与此同时，我继续阅读并记住了这一点：[Typeclass Pattern - An Alternative to Inheritance](http://www.youtube.com/watch?v=yYo0gANYViE)
正如[user1296806在](https://stackoverflow.com/users/1296806/user1296806)[这里](https://stackoverflow.com/a/12398100/562716)提到的那样，typeclasses值得一试。所以这里是：

```
trait Excitable[T] { // TYPECLASS
  def withMoreAnger(t: T): T
}
trait Animal {
  type SpittableAnimal <: Animal
  def spitAt[A <: SpittableAnimal: Excitable](a: A): A
}
trait ExcitableAnimal extends Animal {
  type SpittableAnimal = ExcitableAnimal
  def spitAt[A <: SpittableAnimal: Excitable](a: A): A = implicitly[Excitable[A]] withMoreAnger a
}

object Dog {
  implicit object ExcitableDog extends Excitable[Dog] {
    def withMoreAnger(dog: Dog): Dog = dog copy (anger = dog.anger + 1)
  }
}
case class Dog(anger: Int) extends Quadruped

object Cat {
  implicit object ExcitableCat extends Excitable[Cat] {
    def withMoreAnger(cat: Cat): Cat = cat copy (anger = cat.anger + 1)
  }
}
case class Cat(anger: Int) extends Quadruped

sealed trait Quadruped extends ExcitableAnimal // sealed: to couple pattern match at implicit object ExcitableQuadruped and all subclasses of Quadruped
object Quadruped {
  implicit object ExcitableQuadruped extends Excitable[Quadruped] {
    def withMoreAnger(quadruped: Quadruped): Quadruped = {
      quadruped match {
        case dog: Dog => implicitly[Excitable[Dog]].withMoreAnger(dog)
        case cat: Cat => implicitly[Excitable[Cat]].withMoreAnger(cat)
      }
    }
  }
}

val dog = Dog(anger = 0)
val cat = Cat(anger = 0)
val angryCat: Cat = dog spitAt cat // fine
val anotherDog = Dog(0)
val animals: Seq[Quadruped] = Seq(dog, cat)
val angryAnimals: Seq[Quadruped] = for (a <- animals) yield anotherDog spitAt a // fine
val podAnimals: Seq[Quadruped] = for (a <- angryAnimals) yield anotherDog spitAt a // fine, still a Seq[Quadruped] 
```

# extjs4.1 - 如果Extjs中的时间过去了如何销毁窗口

> ID：12367164
> 
> 赞同：0
> 
> 时间：2012-09-11T09:57:16.770
> 
> 标签：extjs4.1

我有一个弹出窗口。我必须在 5-10 后自动销毁这个窗口

秒。任何人都可以提出一个关于如何自动销毁窗口的例子......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:41:23.000

假设您有一个调用的函数，该函数`MyApp.destroyWindow`接受一个参数，一个实例`Ext.window.Window`并销毁它。用于`Ext.defer`设置超时。

```
Ext.defer(MyApp.destroyWindow, /* function to call */
          5000, /* timeout in milliseconds */,
          MyApp, /* scope of the called function */
          [myWindow] /* array of arguments to provide the function */
); 
```

有关如何使用它的更多信息，请参阅[Ext.Function.defer 。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Function-method-defer)`Ext.defer`是一个别名，`Ext.Function.defer`所以任何一个调用都可以工作。

# c# - 从asp.net中的页面方法返回值

> ID：12367173
> 
> 赞同：4
> 
> 时间：2012-09-11T09:57:42.640
> 
> 标签：c#, javascript, asp.net, pagemethods

我有一个页面方法，它在服务器端进行一些复杂的验证。我有一个按钮来验证。javascript代码如下：

```
function resultOfValidation(result);
{
    return result;
}

function IsValidDate()
{
    PageMethods.ComplicatedValidation(resultOfValidation);
} 
```

C#代码：

```
[WebMethod]
public static bool ComplicatedValidation()
{
    return true;
} 
```

但我想做

```
function IsDateTimeAvailable()
{
    var result= PageMethods.ComplicatedValidation();
} 
```

据我所知，这是不可能的。如果您有其他选择，请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:03:50.637

客户端 webmethod 的最后两个参数是成功和错误回调。你可以使用它们。返回值像参数一样传递给那些函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T10:01:51.850

[更多的...](http://forums.asp.net/t/1188694.aspx)

```
function GetValue() 
{ 
    return PageMethods.GetValueFromServer( 
     function(result) 
       { 
          // The result that is returned from server 
          //Now do what ever you would like to do. 
       }
    ); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T21:09:47.583

你可以尝试这样的事情：

```
 var secuencias = new String;
           jQuery("#add_note").click(function() {

                                                    $.ajax({
                                                    type: "POST",
                                                    url: '<%= ResolveUrl("~/Paginas/EscuchadorAlertas.aspx/ConsultarAlertas") %>',
                                                    data: "{}",
                                                    contentType: "application/json; charset=utf-8",
                                                    dataType: "json",
                                                    async: false,
                                                    success: function(msg) {
                                                        secuencias = msg.d;
                                                    },
                                                    error: function() {
                                                        alert("error");
                                                   }
                                                   });
                                                }); 
```

正如您在变量 secuencia 中看到的那样，存储了 de 函数 ConsultarAlertas 的值，这是一个仅返回字符串的 PageMethods 函数。

# python - 在 python 中将 html 文档上传到 Google Docs

> ID：12367174
> 
> 赞同：0
> 
> 时间：2012-09-11T09:57:42.780
> 
> 标签：python, google-drive-api

我想在 python 2.7 中创建一个小的 poc 模块，我可以在其中上传一个小的 html 文件在 google docs 中，我们可以将它转换为 google 文档并将 html 保存在同一个样式表中。

这是我想以谷歌文档格式上传和转换的文件示例。

```
<html> 
 <h1>Heading 1</h1> 
 <h2>Heading 2</h2> 
 <h3>Heading 3</h3> 
 <p>Here we are </p>  
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T00:32:29.323

[https://developers.google.com/drive/v2/reference/files/insert#examples](https://developers.google.com/drive/v2/reference/files/insert#examples)

和

[https://developers.google.com/api-client-library/python/](https://developers.google.com/api-client-library/python/)

# asp.net-mvc-3 - 自定义 ValidationMessageFor 时出错

> ID：12367176
> 
> 赞同：0
> 
> 时间：2012-09-11T09:57:56.203
> 
> 标签：asp.net-mvc-3

我想自定义 ValidationMessageFor 显示错误。当我运行应用程序时，出现错误： **方法 'ValidationMessageFor' 没有重载需要 1 个参数**

我明白我的错误，但我不知道如何解决它？我需要一些建议。感谢您的阅读！

我的代码：

```
 using System.Linq.Expressions;
using System.Web;
using System.Web.Mvc;

namespace OurCompanyUI.app_code
{
    public static class MyHtml
    {
        public static MvcHtmlString ValidationMessageFor<TModel, TProperty>(
                                        this HtmlHelper<TModel> htmlHelper,
                                        Expression<Func<TModel, TProperty>> expression,
                                        string validationMessage,
                                        IDictionary<string, Object> htmlAttributes
                                    )
        {
            string modelName = ExpressionHelper.GetExpressionText(expression);
            TagBuilder p = new TagBuilder("p");
            p.InnerHtml = htmlHelper.ValidationMessageFor(htmlHelper,expression).ToString();
         //   p.InnerHtml = htmlHelper.ValidationMessageFor().ToString();
            return MvcHtmlString.Create(p.ToString(TagRenderMode.Normal)); 
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:01:58.847

`ValidationMessageFor`通过将以下内容添加到您的 using 指令，确保您已将定义原始帮助程序的命名空间纳入范围：

```
using System.Web.Mvc.Html; 
```

# vbscript - 推入 vbscript 不起作用

> ID：12367177
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:58:01.733
> 
> 标签：vbscript

我正在编写一个需要`pushd`到共享服务器位置的 vbscript，执行一些命令，最后`popd`.

`\\sharedLocation\server`是服务器的有效共享文件夹位置。

**脚本.vbs**

```
set ws = CreateObject("WScript.Shell")
arg = Wscript.Arguments.Named("arg")
push = "C:\Windows\System32\cmd.exe /c pushd " & arg
ws.Run(push) 
```

我使用在命令提示符下执行上述脚本

```
> script.vbs /arg:\\sharedLocation\Server 
```

但什么也没发生。这里可能出了什么问题？我在 Windows XP 上运行这个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:15:50.180

`pushd`实际上正在工作，但是您`cmd`与 /c 开关一起使用，女巫导致立即`cmd`运行`pushd`并退出。如果你想`cmd`保持打开状态，你应该使用 /k 开关。

# ruby-on-rails - Heroku 中的 Twitter Bootstrap Glyphicons

> ID：12367180
> 
> 赞同：2
> 
> 时间：2012-09-11T09:58:07.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, twitter-bootstrap

我开发了一个应用程序，在其中我使用 twitter bootstrap 来吸引一些前端。每个在本地看起来都很好，但是，当我部署到 heroku 时，Glyphicons 都搞砸了。在 Google Chrome 中，所有的 Glyphicons 都是正方形。在 Firefox 中，所有的 Glyphicons 都是一些奇怪的正方形。我用 gem 安装了引导程序（https://github.com/seyhunak/twitter-bootstrap-rails）：

```
gem "twitter-bootstrap-rails", :group => :assets 
```

此外，这里是 google chrome 和 firefox 搞砸的 Glyphicons 的屏幕截图，以及 Glyphicons 在本地的外观：

[http://imgur.com/a/BIYhI#4](http://imgur.com/a/BIYhI#4)

这是 Heroku 上浏览器中加载的 Glyphicons css 的屏幕截图：

[http://i.imgur.com/qhOF3.png](http://i.imgur.com/qhOF3.png)

这是本地 Glyphicons css 的屏幕截图：

[http://i.imgur.com/mxkNH.png](http://i.imgur.com/mxkNH.png)

任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:07:20.450

Ok, I found my solution in [this github post](https://github.com/seyhunak/twitter-bootstrap-rails/issues/123).

All I did was move the gem out of the assets category. From this:

```
gem "twitter-bootstrap-rails", :group => :assets 
```

To this:

```
gem "twitter-bootstrap-rails" 
```

And the Glyphicons now work perfectly.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T15:08:30.070

I had a similiar problem using the bootstrap-sass gem. In the end I had to copy the 4 font files directly into the public/assets/bootstrap folder (where the 404 was occurring when trying to access the files).

This feels messy but I don't understand enough about how to debug properly to find a better approach.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T23:38:42.637

[font_assets](https://github.com/ericallam/font_assets) gem 是专门为此创建的。使用它为我解决了这个问题。（如果您从 CloudFront 提供资产，请不要忘记在安装此 gem 后使您的资产无效。）

# c# - 在没有证书的情况下保护自托管 wcf

> ID：12367181
> 
> 赞同：0
> 
> 时间：2012-09-11T09:58:07.347
> 
> 标签：c#, wcf

我有一个托管在 Windows 服务（c#）中的 wcf 服务。实际上，只有一个客户端应用程序（c#）和多个服务，它们在多台机器上运行，我的客户端请求在机器上执行操作（类似的东西）这个服务在我无权安装证书的机器上运行所以注册端口+证书的想法是不可能的，而且，我认为我需要一个机器证书，这也是根本不可能的。

我的问题是，我想保护我的 wcf 服务和客户端应用程序之间的通信。我正在发送敏感信息，所以我需要加密。

如果不涉及证书，我怎么能做到这一点？

提前致谢

# python - rpdb2：如何连接到 pid

> ID：12367183
> 
> 赞同：4
> 
> 时间：2012-09-11T09:58:14.603
> 
> 标签：python, pdb, winpdb

我有一个 wsgi 应用程序，它在代码中有这个：

```
import rpdb2; rpdb2.start_embedded_debugger("asdf") 
```

现在使用 rpdb2（**不是 winpdb！**）我想连接到进程并开始调试。

我不知道该怎么做。如何连接到正在运行的进程或如何使该进程连接到调试器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T21:09:32.780

在 rpdb2 中使用命令：

（我假设你想连接到在 localhost 上运行的进程。否则你应该使用 --host 开关）

```
 $ ./rdb2
 RPDB2 - The Remote Python Debugger, version RPDB_2_4_8,
 Copyright (C) 2005-2009 Nir Aides.
 Type "help", "copyright", "license", "credits" for more information.

 > password "debugger"
 Password is set to: "debugger"

 > attach
 Connecting to 'localhost'...
 Scripts to debug on 'localhost':

    pid    name
 --------------------------
    7772   myscript.py

 > attach 7772
 > *** Attaching to debuggee...
 > *** Debug Channel is encrypted.
 > *** Successfully attached to
 > *** 'myscript.py'.
 > *** Debuggee is waiting at break point for further commands.

 > go 
```

# android - 在android中本机拦截phoneGap中的URL并解压缩文件

> ID：12367186
> 
> 赞同：1
> 
> 时间：2012-09-11T09:58:42.213
> 
> 标签：android, cordova, request, unzip

我正在用 phoneGap 下载一个 zip 文件，我必须解压缩它。

在 iOS 中，我分两步完成：

1.  例如，我下载文件并将其发送到“假”网址中`xxx.c?filePathToUnzip=file://...`

2.  在`- (BOOL)webView:shouldStartLoadWithRequest:navigationType:` 函数中，我捕获所有 URL，如果参数匹配`filePathToUnzip`，我调用本机函数来解压缩文件（使用[ziparchive](http://code.google.com/p/ziparchive/)）。（并且我返回 False 以不加载文件）。

我怎么能在android中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:47:45.480

在 Android 上使用[FileTransfer.download](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileTransfer_download)获取 zip 文件，然后使用[zip 提取插件](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ExtractZipFile)解压缩文件。

# html - 有条件地自定义 Rails 验证错误

> ID：12367193
> 
> 赞同：0
> 
> 时间：2012-09-11T09:58:58.813
> 
> 标签：html, ruby-on-rails-3, subdomain, validationerror

我正在使用`ActionView::Base.field_error_proc`自定义 Rails 应用程序中的验证错误。我创建了一个初始化程序，如下所示：

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  html = %(<div class="control-group error">#{html_tag}</div>)
  elements = Nokogiri::HTML::DocumentFragment.parse(html_tag).css "label, input"
  elements.each do |e|
    if e.node_name.eql? 'label'
      e['class'] = "control-label"
      html = %(#{e})
    elsif e.node_name.eql? 'input'
      html = %(<div class="controls">)
      if instance.error_message.kind_of?(Array)
        html += %(#{html_tag}<span class="help-inline">&nbsp;#{instance.error_message.first}</span>)
      else
        html += %(#{html_tag}<span class="help-inline">&nbsp;#{instance.error_message}</span>)
      end
      html += %(</div>)
    end
  end
  html.html_safe
end 
```

仅当子域存在时，我才想自定义标记`fisheye`，否则，我想使用不同的标记。我该如何做到这一点？我认为这是可能的，因为它`instance`被传递给了块。

# iphone - 在 xcode 4 错误中将 iphone 应用程序转换为通用应用程序

> ID：12367198
> 
> 赞同：0
> 
> 时间：2012-09-11T09:59:11.667
> 
> 标签：iphone, xcode, xcode4, xcode4.2

我正在尝试将 iphone 应用程序转换为通用应用程序，这是我的代码

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];

        //  self.viewController = [[SearchViewController alloc] initWithNibName:@"SearchViewController" bundle:nil];
        [self.window addSubview:self.viewController.view];
        [self.timer invalidate];
        self.timer = nil;
        self.timer = [NSTimer scheduledTimerWithTimeInterval: 3 target: self selector: @selector (pullnextview) userInfo: nil repeats: YES];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
        [self.window addSubview:self.viewController.view];
        [self.timer invalidate];
        self.timer = nil;
        self.timer = [NSTimer scheduledTimerWithTimeInterval: 3 target: self selector: @selector (Ipadpullnextview) userInfo: nil repeats: YES];
    } 
```

==================================================== =================================

```
-(void)pullnextview
{
    [self.viewController.view removeFromSuperview];
    [self.timer invalidate];
    self.timer = nil;
    NSArray *viewsArray;
    //create the first view controller

    SearchViewController *navController0 = [[SearchViewController alloc] initWithNibName:@"SearchViewController" bundle:nil];

    navController0.tabBarItem.image = [UIImage imageNamed:@"search.png"];
    [navController0 setTitle:@"Neuen Termin buchen"];

    //create the navigation controller and use NavRootController as its root
    UINavigationController *nav0 = [[UINavigationController alloc] initWithRootViewController:navController0];
    UINavigationController *nav;
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
    int uid = [standardUserDefaults integerForKey:@"dmloginid"];
    [standardUserDefaults synchronize];

    if(uid>0)
    {

        SearchViewController *navController = [[SearchViewController alloc] initWithNibName:@"SearchViewController" bundle:nil];
        navController.tabBarItem.image = [UIImage imageNamed:@"appointment.png"];
        [navController setTitle:@"Meine Termine"];
        nav = [[UINavigationController alloc] initWithRootViewController:navController];

    }
    else
    {
        LoginViewController *navController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
        navController.tabBarItem.image = [UIImage imageNamed:@"appointment.png"];
        [navController setTitle:@"Meine Termine"];
        nav = [[UINavigationController alloc] initWithRootViewController:navController];

    }

    SettingsViewController *navController3 = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil];
    navController3.tabBarItem.image = [UIImage imageNamed:@"setting.png"];
    [navController3 setTitle:@"Einstellungen"];

    //create the navigation controller and use NavRootController as its root
    UINavigationController *nav3 = [[UINavigationController alloc] initWithRootViewController:navController3];
    viewsArray = [NSArray arrayWithObjects:nav0,nav,nav3, nil];
    UITabBarController *tabbarController = [[UITabBarController alloc] init];
    tabbarController.view.frame = CGRectMake(0,0,320,460);
    //then tell the tabbarcontroller to use our array of views
    [tabbarController setViewControllers:viewsArray];

    //then the last step is to add the our tabbarcontroller as subview of the window
    self.window.rootViewController = tabbarController;

}

-(void)Ipadpullnextview
{
    [self.viewController.view removeFromSuperview];
    [self.timer invalidate];
    self.timer = nil;
    NSArray *viewsArray;
    //create the first view controller

    SearchViewController *navController0 = [[SearchViewController alloc] initWithNibName:@"IpadSearchViewController" bundle:nil];

    navController0.tabBarItem.image = [UIImage imageNamed:@"search.png"];
    [navController0 setTitle:@"Neuen Termin buchen"];

    //create the navigation controller and use NavRootController as its root
    UINavigationController *nav0 = [[UINavigationController alloc] initWithRootViewController:navController0];
    UINavigationController *nav;
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
    int uid = [standardUserDefaults integerForKey:@"dmloginid"];
    [standardUserDefaults synchronize];

    if(uid>0)
    {

        SearchViewController *navController = [[SearchViewController alloc] initWithNibName:@"IpadSearchViewController" bundle:nil];
        navController.tabBarItem.image = [UIImage imageNamed:@"appointment.png"];
        [navController setTitle:@"Meine Termine"];
        nav = [[UINavigationController alloc] initWithRootViewController:navController];

    }
    else
    {
        LoginViewController *navController = [[LoginViewController alloc] initWithNibName:@"IpadLoginViewController" bundle:nil];
        navController.tabBarItem.image = [UIImage imageNamed:@"appointment.png"];
        [navController setTitle:@"Meine Termine"];
        nav = [[UINavigationController alloc] initWithRootViewController:navController];

    }

    SettingsViewController *navController3 = [[SettingsViewController alloc] initWithNibName:@"IpadSettingsViewController" bundle:nil];
    navController3.tabBarItem.image = [UIImage imageNamed:@"setting.png"];
    [navController3 setTitle:@"Einstellungen"];

    //create the navigation controller and use NavRootController as its root
    UINavigationController *nav3 = [[UINavigationController alloc] initWithRootViewController:navController3];
    viewsArray = [NSArray arrayWithObjects:nav0,nav,nav3, nil];
    UITabBarController *tabbarController = [[UITabBarController alloc] init];
    tabbarController.view.frame = CGRectMake(0,0,320,460);
    //then tell the tabbarcontroller to use our array of views
    [tabbarController setViewControllers:viewsArray];

    //then the last step is to add the our tabbarcontroller as subview of the window
    self.window.rootViewController = tabbarController;

} 
```

==================================================== =================================

我正在调用包含相同代码但 .xib 不同的两个不同函数。之后，当我去运行代码时，这个错误来了。

==================================================== =================================

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "IpadSearchViewController" nib but the view outlet was not set.' 
```

谁能帮我。我是本节的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:05:16.893

转到您的 iPad XIB 并通过右键单击视图连接视图插座，然后将视图的引用插座连接到文件所有者。它应该可以正常工作

# python - 当我尝试执行带有百分号的原始 SQL 字符串时，为什么 SQLAlchemy 会产生错误？

> ID：12367206
> 
> 赞同：4
> 
> 时间：2012-09-11T09:59:41.013
> 
> 标签：python, sql, sqlalchemy

我尝试基本上执行一些这样的 sql（它以复杂的方式构建）：

```
sql = "SELECT COUNT(*) FROM entities WHERE (unit = '%')" 
```

使用此 Python 代码：

```
engine.execute(sql) 
```

然后会发生什么是我得到一个

```
TypeError: 'dict' object does not support indexing 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T10:03:25.370

不是 100% 肯定，但我认为 SQLAlchemy 正在尝试将`%`字符解释为 SQL 参数。我会尝试将`%`角色加倍来解决这个问题：

```
sql = "SELECT COUNT(*) FROM entities WHERE (unit = '%%')" 
```

这取决于您使用的数据库；不同的数据库适配器使用不同的参数样式。例如，用于 PostgreSQL 数据库连接的 psycopg2 模块使用的`%s`样式和[文档`%%`](http://www.initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries)`%`是在SQL 语句中插入文字值[的正确方法。](http://www.initd.org/psycopg/docs/usage.html#passing-parameters-to-sql-queries)

# mysql - 存储过程权限错误

> ID：12367210
> 
> 赞同：1
> 
> 时间：2012-09-11T09:59:58.700
> 
> 标签：mysql, stored-procedures

我试图执行这个存储过程：

```
DELIMITER |
DROP PROCEDURE IF EXISTS HelloWorld|
CREATE PROCEDURE HelloWorld()
BEGIN
UPDATE sites_niche SET `short_review` = REPLACE(`short_review`, 'â€™',"'");
END |
DELIMITER ; 
```

但是，它告诉我：

> 用户 'bestcam728'@'%' 拒绝访问数据库 'bestcamdir_main'

问题是我已经登录到数据库..该错误阻止我创建存储过程...我该如何克服这个问题？还有无法创建新用户的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:35:11.443

运行`SHOW GRANTS`命令查看用户 'bestcam728'@'%' 拥有的所有权限。

要授予 'bestcam728'@'%' 权限，请以 root 身份连接并使用[GRANT](http://dev.mysql.com/doc/refman/5.1/en/grant.html)语句授予您需要的权限。似乎缺少 CREATE 或 CREATE ROUTINE 特权。您可以全局或为特定数据库授予这些权限 -

```
-- Grant database privileges
GRANT CREATE ON `bestcamdir_main`.* TO 'bestcam728'@'%';
GRANT CREATE ROUTINE ON `bestcamdir_main`.* TO 'bestcam728'@'%';

-- Grant global privileges
GRANT CREATE ON *.* TO 'bestcam728'@'%';
GRANT CREATE ROUTINE ON *.* TO 'bestcam728'@'%'; 
```

然后重新连接为 'bestcam728'@'%' 并尝试再次创建程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:05:40.943

检查 mysql.db 和可能的 mysql.user 中的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:05:02.060

使用[工作台](http://www.mysql.com/products/workbench/)并以 root 身份登录。然后，您可以授予用户正确的权限以创建存储过程。

# iphone - 将文档目录图像加载到 Web 视图中

> ID：12367212
> 
> 赞同：3
> 
> 时间：2012-09-11T10:00:08.737
> 
> 标签：iphone, uiwebview, uiimage

我有一个 Xcode 项目`UIWebView`。现在我需要将图像从文档目录加载到该 web 视图。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T10:18:59.377

```
 NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString  *imagePath = [documentsDirectory stringByAppendingPathComponent: 
                          [NSString stringWithFormat: @"/imageName.png"]];

    [myWebView loadHTMLString:[NSString stringWithFormat:@"<html><body><img src=\"file://%@\"></body></html>",imagePath] baseURL:nil]; 
```

# mysql - 设置 null 后 MySQL VARCHAR 存储

> ID：12367215
> 
> 赞同：0
> 
> 时间：2012-09-11T10:00:17.583
> 
> 标签：mysql, memory-management, varchar, database-optimization

我有一些 varchar(512) 列的大型 MySQL InnoDB 表。下一个插入的行取决于先前插入的。插入新行后，先前插入行的 varchar 字段将无状态。以前插入的行总是被标记为“已处理”（通过执行更新查询），但 varchar 字段没有被删除。该字段未编入索引。我应该将先前行中该字段的值设置为空（出于节省内存的原因）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:04:44.230

VARCHAR 不能是 512！varchar 的最大值为 255。因此，对于大量数据，请使用 TEXT 或 MEDIUMTEXT。

# javascript - Javascript语句中的误解

> ID：12367221
> 
> 赞同：2
> 
> 时间：2012-09-11T10:00:48.033
> 
> 标签：javascript, function, function-pointers

我刚刚开始使用 javascript，我看到了一些我无法解释的东西。
我有一个名为 TestClass.js 的 js 文件及其以下内容：

```
TestClass.SetError = function (errorDescription, errorCode, typedErrorCode)
{
    alert("SetError ");
}  

function SetError2(errorCode)
{
    alert("SetError2 ");
} 
```

有人可以解释一下 SetError 和 SetError2 之间的区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:05:22.497

区别在于浏览器如何将它们加载到执行上下文中。

在执行任何代码之前加载函数。

While 表达式仅在解释器到达该代码行时加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:03:08.950

SetError 是对象 TestClass 的一个方法。而 SetError2 是一个全局函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T10:04:58.543

第一段代码 (SetError) 包含`Anonymous Function Expression`，其中第二段代码 (SetError2) 包含 a `Function Declaration`。请参阅[函数声明与函数表达式](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)

另一篇好文章：[命名函数表达式揭秘](http://kangax.github.com/nfe/)

摘抄：

> 函数声明在任何其他表达式之前被解析和评估。即使声明在源中位于最后，它也将首先评估范围中包含的**任何其他表达式。**

这基本上是主要区别。它不是很大，但值得注意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:04:47.847

`SetError2`是一种“命名”的方法。 是引用匿名方法`TestClass.SetError`的成员变量。`TestClass`这意味着以后你可以做`TestClass.SetError = function(){ alert ("SetError2");}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:13:09.393

Javascript 有对象和函数。

一个对象可以包含对象和/或函数。

这是一个对象：

```
var TestClass = {}; 
```

您可以向 TestClass 对象添加一个新对象，如下所示：

```
var TestClass = { object : {}}; 
```

然后你可以像这样访问它：

```
var a = TestClass.object; 
```

您可以在对象中有一个函数：

```
var TestClass = {object:{}, setError:function(){/*function body*/}}; 
```

现在您可以像这样调用测试类的函数：

```
TestClass.setError(); 
```

此外，Function 本身可以这样定义：

```
function setError2(){/*function body*/} 
```

你可以这样调用：

```
setError2(); 
```

通常，我们在对象中定义函数以某种方式在 Javascript 中实现 OO 并防止混乱的 js 代码。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-11T10:04:56.707

这个：

```
function SetError2(errorCode) {
  alert("SetError2 ");
} 
```

相当于这个：

```
window.SetError2 = function(errorCode) {
  alert("SetError2 ");
} 
```

# jakarta-ee - 从 Application Server 自动部署中排除依赖项

> ID：12367225
> 
> 赞同：0
> 
> 时间：2012-09-11T10:01:02.200
> 
> 标签：jakarta-ee, maven, deployment, war, jboss7.x

我有 EJB 对象，它需要一些依赖项（maven - jar）的接口。当我在 .ear 中的 .ejb 中部署它时，一切正常。我真的不需要耳朵，所以我想将 .war 与这个 EJB 对象一起使用。然而，在部署过程中，我的依赖项似乎有一些用@Webservice 注释的类。这些类还需要我不想在我的项目中使用的其他依赖项，因此在部署期间我没有找到类定义异常。有什么办法可以阻止这种自动部署带注释的类的依赖关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:20:23.027

使用[Maven Shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/) `filters`和/或`minimizeJar`功能从该依赖项中排除类。

# mysql - MySql，临时表，错误 1422

> ID：12367228
> 
> 赞同：0
> 
> 时间：2012-09-11T10:01:08.957
> 
> 标签：mysql, stored-procedures, temp-tables

我的问题是：

我使用 3 个函数和 1 个 SP 将数字转换为单词……当我从我的一个函数调用 SP 时

```
 CALL extenso_trata_grupo(`ivalor`, ' Triliao', ' Trilioes', `flag_e`, `s_ext`);
    Select `s_ext` INTO `s_ext` from tbl_temp; 
```

这给了我一个 1422 错误......当我自己（单独）使用它时，没有它`INTO`，它没有给我任何错误......

有什么帮助吗？

**更新**

```
BEGIN
DECLARE ivalor BIGINT;
DECLARE s_ext VARCHAR(255);
DECLARE flag_e BIT;
DECLARE grupo DECIMAL(10, 2);

SET s_ext = '';
SET flag_e  = 0;
SET grupo   = 0;

if valor >= 1 then
    set ivalor = valor / 1000000000000;
    if ivalor > 0 then
        set valor = valor - (ivalor * 1000000000000);
        CALL extenso_trata_grupo(`ivalor`, ' Triliao', ' Trilioes', `flag_e`, `s_ext`);
            Select `s_ext` INTO `s_ext` from tbl_temp;
    end if;
    set ivalor = valor / 1000000000;
    if ivalor > 0 then
        set valor = valor - (ivalor * 1000000000);
        CALL extenso_trata_grupo(`ivalor`, ' Biliao', ' Bilioes', `flag_e`, `s_ext`);
                Select `s_ext` INTO `s_ext` from tbl_temp;
    end if;
    set ivalor = valor / 1000000;
    if ivalor > 0 then
        set valor = valor - (ivalor * 1000000);
        CALL extenso_trata_grupo(`ivalor`, ' Milhao', ' Milhao', `flag_e`, `s_ext`); 
            Select `s_ext` INTO `s_ext` from tbl_temp;
    end if;
    ...
    return `s_ext`;
END 
```

**更新**

存储过程 extenso_trata_grupo

```
BEGIN
DECLARE RETORNO VARCHAR(255);
DECLARE FLAG INT;

SET RETORNO = s_ext;
SET FLAG    = flag_e;

if grupo <> 0 THEN
    if flag_e = 1 THEN
        SET RETORNO = CONCAT(RETORNO,' e');
    END IF;
    SET flag_e = 1;
    SET RETORNO = CONCAT(RETORNO,
        (SELECT extenso_grupo(grupo) as grupo),
        (CASE WHEN grupo = 1 THEN singular ELSE plural END));
END IF;
DROP TABLE IF EXISTS `tbl_temp`;
CREATE TEMPORARY TABLE `tbl_temp` (
    flag_e tinyint,
    s_ext varchar(255)
);
INSERT INTO `tbl_temp` (flag_e, s_ext) VALUES(flag, retorno);
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:51:49.700

我只是飞过你的代码并在我读到这个后停下来：

```
if valor >= 1 then
    set ivalor = valor / 1000000000000;
    if ivalor > 0 then
        set valor = valor - (ivalor * 1000000000000);
        CALL extenso_trata_grupo(`ivalor`, ' Triliao', ' Trilioes', `flag_e`, `s_ext`);
            Select `s_ext` INTO `s_ext` from tbl_temp;
    end if; 
```

之后代码永远不会通过`if ivalor > 0 then`，您可能希望将其更改为`if ivalor >= 1 then`.

以后`set valor = valor - (ivalor * 1000000000000);` `valor`永远都是`0`。你以前做过`set ivalor = valor / 1000000000000;`，所以基本上你在做

```
set valor = valor - (valor / 1000000000000 * 1000000000000); 
```

线

```
Select `s_ext` INTO `s_ext` from tbl_temp; 
```

应该分配 tbl_temp 的哪一行`s_ext`？您不能分配一整列，例如数组或其他内容。

我不会审查您的整个代码或为您编写它。我建议您想出自己的解决方案来解决问题，不要尝试转换其他人的解决方案。在那里提出的问题将在这里得到愉快的回答。

# asp.net - ASP.NET 应用程序性能和内存泄漏

> ID：12367230
> 
> 赞同：0
> 
> 时间：2012-09-11T10:01:13.230
> 
> 标签：asp.net, performance, memory-leaks

我们有一个 ASP.NET 4.0 Web 应用程序，有 200 多个页面。它有一个公共网站和一个cms。我们已在同一服务器的近 30 个域中安装了此应用程序，因此每个域都安装了该应用程序。

服务器内存（私有工作集）增长缓慢，但它会增长。服务器有 8 GB 的 RAM，但是在一天中的某个时候，我们会收到一条 OutOfMemory 消息，尽管我们每天早上都在回收 AppPool。

它必须有内存泄漏，但我们不知道如何定位这些泄漏。我们试图处理我们可以处理的每一个元素......

我们需要一些帮助。有没有提供这类服务的公司，我的意思是检查应用程序并修复内存泄漏？

谢谢。-

经过一番研究，我发现了很多这样的行：

标签 xLabel = (Label)FormView.FindControl("xLabel")

没有处置。你不认为这会产生巨大的泄漏吗？不会更好：

使用 (Label xLabel = (Label)FormView.FindControl("xLabel")) { Actions }

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:08:24.183

New Relic 提供这样的服务：[https](https://newrelic.com/) ://newrelic.com/有一个免费试用版，他们为您的应用程序提供了非常好的分析。

或者要自己执行，您可以查看 MSDN 中的这篇文章：

[http://msdn.microsoft.com/en-us/library/ee658248.aspx](http://msdn.microsoft.com/en-us/library/ee658248.aspx)

* * *

'免责声明 - 客户，而不是员工。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:25:50.940

如果您在前一天回收后每天结束，则内存不足，显然有问题。我想如果你有正确的版本，你应该能够弄清楚查看代码或使用 VS.NET 内存分析器。

您还可以查看专业的分析工具，例如[Ants](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)，这是一个很好的工具，我发现它在很多场合都很有帮助。

如果您没有可以运行分析器的环境，您可以获得内存转储（使用 DebugDiag 甚至使用任务管理器）并检查（使用 windbg）内存中的对象，这可能会导致您编写错误的代码。如果有人在使用 WinDbg ，这比使用分析工具或在代码库很大的情况下深入研究代码要快得多（因为内存问题是显示障碍）。

顺便说一句，您输入的示例代码 - 当容器被清理时，这些引用应该由 GC 自动清理。如果保存标签本身的容器（视图）没有正确处理，那么它可能是一个问题。问题通常与正在引用且未正确清理的其他对象（大对象）有关。

# c# - 使用 SWIG 为 Octave 创建 C# 包装器

> ID：12367236
> 
> 赞同：2
> 
> 时间：2012-09-11T10:01:34.523
> 
> 标签：c#, c++, wrapper, swig, octave

我正在考虑在我的 C# 项目中使用 Octave 及其函数，但目前连接 C# 和 Octave 的唯一方法是在命令行上调用它并解析字符串输出。（[请参阅此 SO 问题](https://stackoverflow.com/questions/8026951/interfacing-octave-with-c-sharp)）这很慢（每个脚本调用一个命令行）并且容易出错，因为您必须解析字符串。

如果您可以在 C# 中包装 Octave，就像 EmguCV 为 OpenCV 所做的那样，您将获得一种更快、更简洁的方式来访问 Octave。[SWIG](http://www.swig.org)是一个可以生成这样一个包装器的工具，但我不知道这是否可能以及它会在多大程度上起作用。你知道我该如何开始吗？

# java - 从android中的Activity返回时如何停止服务？

> ID：12367239
> 
> 赞同：1
> 
> 时间：2012-09-11T10:01:38.583
> 
> 标签：java, android

我已经在 android 中创建了服务，并且在转到 MapActivity 时它已经运行，如果我使用返回按钮从 MapActivity 返回，我想停止服务。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:04:12.980

```
@Override
public void onBackPressed(){
 //stop your Service here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:05:04.363

您可以使用`Context.stopService(serviceObject);`Activity 停止服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:15:37.510

当您使用设备后退按钮导航到上一个类时，请使用 write：

```
@Override
public void onBackPressed(){
 //stop your Service here
} 
```

如果您使用自定义后退按钮导航到上一个类，则在第二类中维护静态布尔变量。

```
Second class: static boolean navigate = false;
when you click the custom back button in second class, then  make boolean as true;

now, in first class check the value for true: 
if it is ture , then stop the service by using Context.stopService(serviceObject); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:16:47.900

```
@Override

void onDestroy
{
unbindService(ServiceConnection c);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:17:58.390

我使用[绑定服务](http://developer.android.com/guide/components/bound-services.html)，我在活动的 onStart() 中绑定并从 onStop() 中取消绑定。我使用 Context.BIND_AUTO_CREATE 进行绑定，以便在没有绑定任何活动时服务会自动停止。这是一种让多个活动使用服务并通过 IBinder 接口将数据从活动传递到服务的便捷方式

# wpf - 具有相同 CollectionViewSource ItemSource 的两个组合框相互更新

> ID：12367249
> 
> 赞同：12
> 
> 时间：2012-09-11T10:02:00.423
> 
> 标签：wpf, xaml, data-binding, collectionviewsource

在我的 ViewModel 上，我有 2 个属性（都实现了属性更改通知）：

```
CountryOfIssue
Nationality 
```

在我的视图中，我有一个 CollectionViewSource 指向我的实体框架上下文的本地实例：

```
<CollectionViewSource x:Key="cvsCountries" Source="{Binding LocalContext.Countries}" CollectionViewType="{x:Type ListCollectionView}">
    <CollectionViewSource.SortDescriptions>
        <scm:SortDescription PropertyName="Name" />
    </CollectionViewSource.SortDescriptions>
</CollectionViewSource> 
```

同样在此页面上，我有两个组合框用于设置 CountryOfIssue 和 Nationality 的值：

```
<ComboBox IsEnabled="{Binding CanEditCountryOfIssue}" ItemsSource="{Binding Source={StaticResource cvsCountries}}" DisplayMemberPath="Name" SelectedValuePath="Id" SelectedItem="{Binding CountryOfIssue, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}" />

<ComboBox IsEnabled="{Binding CanEditNationality}" ItemsSource="{Binding Source={StaticResource cvsCountries}}" DisplayMemberPath="Name" SelectedValuePath="Id" SelectedItem="{Binding Nationality, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}" /> 
```

使用此设置，每当我更改组合框的值之一时，另一个也会更改...这是预期的行为吗？

（我已经通过使用另一个 CollectionViewSource 实现了修复，我只是想知道这是否正常）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T10:54:47.050

这是正常的，`CollectionViews`有 a`CurrentItem`并且如果`ItemsSource`是 a`CollectionView`他们得到同步，请参阅[`IsSynchronizedWithCurrentItem`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.issynchronizedwithcurrentitem.aspx)：

> **如果[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)始终与[ItemCollection中的当前项同步，则为](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcollection.aspx)**true**；如果[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)从未与当前项目同步，则为**false ；**[仅当Selector](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.aspx)使用[CollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)时，如果[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selecteditem.aspx)与当前项目同步，则为**null**。默认值为**null**。**

 ******因此，您可以通过将该属性设置为`false`.

（顺便说一句，您还可以通过斜杠绑定到 a 的 。例如`CurrentItem`，绑定到中的当前人员的属性。）`CollectionView``People/Name``Name``People`******

# php - 使用 PHP 检索给定域的名称服务器

> ID：12367250
> 
> 赞同：1
> 
> 时间：2012-09-11T10:02:01.260
> 
> 标签：php, curl, dns, nameservers

我正在尝试检索给定域的名称服务器，最好是在 PHP 中。

我尝试了多种方法，但无法获得任何体面/一致的结果，并且想知道是否有人知道可以帮助我实现这一目标的函数或类？

例如，[这个](http://code.google.com/p/php-whois-class/)whois 类取得了一些成功，但未能从 .com TLD 中检索名称服务器。

我在想我也许可以以某种方式使用谷歌的 DNS 服务器 8.8.8.8，但不确定如何？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:21:44.770

答案是这个函数：

> [http://www.php.net/manual/en/function.dns-get-record.php](http://www.php.net/manual/en/function.dns-get-record.php)

```
$result = dns_get_record("stackoverflow.com");
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:29:31.977

看到[这个](https://developers.google.com/speed/public-dns/docs/using)。

对于 Windows 上的 PHP：

```
$e = 'nslookup -debug www.google.com. 8.8.8.8'; 
```

对于 Mac 和 Linux 上的 PHP：

```
$e = 'dig @8.8.8.8 www.google.com.'; 
```

接着，

```
$o = array();
$r = -1;
$ip = exec($e,$o,$r);
if($r == 0) // success
{
    // do some regexp or explosion depending upon your output format to get the ip
    // here is for windows:
    $ip = trim(explode("Address:", $ip)[1]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T10:09:35.723

有一些 PHP 函数可以做到这一点。

[http://www.php.net/manual/en/function.gethostbyname.php](http://www.php.net/manual/en/function.gethostbyname.php) http://php.net/manual/en/function.gethostbyaddr.php

也许你可以使用它。

编辑：在左边你有一个完整的**网络功能**列表。

# javascript - 如何将 Knockout-Kinetic 与敲除 observables 一起使用

> ID：12367252
> 
> 赞同：1
> 
> 时间：2012-09-11T10:02:02.913
> 
> 标签：javascript, json, knockout.js, kineticjs

我最近为 KineticJS找到了这个[knockoutjs 插件](https://github.com/christophercurrie/knockout-kinetic)

wiki 页面包含一个示例，但我并不真正了解它究竟做了什么：

```
<!DOCTYPE html>
<html>
  <head>
    <title>A Knockout/Kinetic example</title>
    <script type="text/javascript" src="kinetic-v3.9.8.min.js"></script>
    <script type="text/javascript" src="knockout-2.1.0.js"></script>
    <script type="text/javascript" src="../knockout-kinetic.js"></script>
  </head>
  <body>
    <!--
   This example is from the 'Rect' tutorial:
   http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-rect-tutorial/
   -->
    <div id="container">
      <!-- Look, ma! No JavaScript! -->
      <!-- ko Kinetic.Stage: { width: 578, height: 200 } -->
      <!--     ko Kinetic.Layer: { } -->
      <!--         ko Kinetic.Rect: { x: 239, y: 75, width: 100, height: 50, fill: "#00D2FF", stroke: "black", strokeWidth: 4 } -->
      <!--         /ko -->
      <!--     /ko -->
      <!-- /ko -->
    </div>
    <script type="text/javascript">
        // Ok, a *little* JavaScript...
        ko.applyBindings();
    </script>
</html> 
```

除了没有得到“没有 javascript”的笑话（至少我认为它是这样的吗？）我看不出这个插件如何帮助我绑定到定义数字或矩形的敲除 observables 列表。

例如，假设我通过 ajax 调用得到以下 json：

```
{"rectangles":[{"id":1,"x":0,"y":0,"width":200,"height":30},{"id":2,"x":0,"y":40,"width":200,"height":30}]} 
```

然后我可以使用这些数据在我的 ViewModel 中填充一个可观察的数组，但是如何使用插件将 Kinetic 绑定到它，以便自动显示和更新矩形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T01:19:19.053

这可以分段构建。给定一个带有矩形数据的 JavaScript 对象，您可以创建视图模型：

```
var viewModel = ko.observable(data);
ko.applyBindings(viewModel); 
```

并使用实现您的视图的 HTML 文件呈现它：

```
<div id="container"> <!-- The container is optional but good practice -->
  <!-- ko Kinetic.Stage: { width: 800, height: 600 } -->
  <!--     ko Kinetic.Layer: { } -->
  <!--         ko foreach: rectangles -->
  <!--             ko Kinetic.Rect: $data -->
  <!--             /ko --> 
  <!--         /ko -->
  <!--     /ko -->
  <!-- /ko -->
</div> 
```

你总是需要声明你的 Stage，并且至少要声明一个 Layer。您可以使用敲除绑定在该层中组织您的形状，或将它们分布在多个层中，以适合您的应用程序。

一旦您使用 JavaScript 对象，您可以通过使用[敲除映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)直接使用您的 JSON 数据：

```
var viewModel = ko.mapping.fromJS(data);
ko.applyBindings(viewModel); 
```

“无 JavaScript”是指无需使用 JavaScript 调用设置 Kinetic Stage 内容，而是使用用户界面的声明性定义来替换它。

另外，请注意语法仍在开发中。我已经有一段时间没有使用它了，所以变化并没有很快发生，但我很想听听你的经验反馈。

# php - 如何将会话变量值放入字符串

> ID：12367257
> 
> 赞同：-2
> 
> 时间：2012-09-11T10:02:24.837
> 
> 标签：php, string

如何在 PHP 中将会话值放入此字符串

```
$query = '//Users/User/username[. =  "admin"]'; 
```

所以我需要输入而不是管理员`$_SESSION['SESS_FIRST_NAME'];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:03:24.010

这应该对你有用

```
$query = '//Users/User/'.$_SESSION["SESS_FIRST_NAME"]; 
```

假设 Session 中的数据是“Joe”，这将输出：

```
//Users/User/Joe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:03:51.723

试试这个`$query = '//Users/User/'.$_SESSION["SESS_FIRST_NAME"];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:04:17.223

$_SESSION['SESS_FIRST_NAME'] 就像普通变量一样，因此可以直接将其替换为 admin 或将其值存储在变量中

```
$admin = $_SESSION['SESS_FIRST_NAME'];
$query = '//Users/User/username[. =  ". $admin . "]'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:04:19.117

```
$query = '//Users/User/username[. =  "'.$_SESSION['SESS_FIRST_NAME'].'"]'; 
```

# visual-studio-2008 - Netbeans 对象资源管理器等效于 Visual Studio 对象资源管理器

> ID：12367259
> 
> 赞同：1
> 
> 时间：2012-09-11T10:02:26.020
> 
> 标签：visual-studio-2008, netbeans, explorer

是否有与 Visual Studio 对象资源管理器等效的 Netbeans 对象资源管理器？如果没有，是否在任何 Eclipse 版本（即 Helios）中都有一个？

只是一个有用的工具，我在 Visual Studio 中使用了很多，而在 Netbeans 中却错过了。我必须使用智能感知从代码编辑器中查找类。

**VS2008 对象资源管理器截图：**

![在此处输入图像描述](../Images/777fddeb8fc19eead74e853db099febe.png)

谢谢

安德斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:51:33.767

是的：

*   **Navigator Window** - 显示班级的所有成员、方法等
*   **Javadoc 窗口**- 显示 javadoc（还有一个用于显示源代码，也显示例如 C/C++ 文档）
*   打字例如。`System.`将向您展示此类的所有方法/成员，包括它的完整 javadoc
*   **类窗口**- 类浏览器 (C/C++)
*   `ctrl + left`鼠标将打开文件的完整源代码，另外它将显示在导航窗口中（见上文）
*   在树视图中打开`Libraries`会显示项目的所有库，您现在可以根据需要浏览所有包、类、接口、方法、字段……

这是来自互联网的 goog 屏幕截图：http: [//pliki.onet.pl/zdjecia/pliki/n/netbeans-cpp.jpg](http://pliki.onet.pl/zdjecia/pliki/n/netbeans-cpp.jpg)（显示 C/C++）

# ios - 如何在 Core Plot 中使用多个自定义标签？

> ID：12367268
> 
> 赞同：2
> 
> 时间：2012-09-11T10:03:04.617
> 
> 标签：ios, xcode, core-plot

我的核心情节有问题，这让我很伤心，并且在互联网上搜索找不到解决方案。我担心这是一个非常简单的疏忽，但对于我的生活，我无法弄清楚它是什么。

基本上，当我在核心图中设置自定义标签时，只有一个标签出现在刻度位置零处，即使相关数组填充了正确的数据，如刻度位置和标签。

我通过手动将 newLabels 输入到 customLabels 数组中绕过了自定义标签例程，这很有效，所以我担心我在某处的例程中遗漏了一些基本的东西。

```
NSUInteger labelLocation = 0;
NSMutableArray *customLabels = [[NSMutableArray alloc] initWithCapacity:[self.days count]];

for (NSNumber *tickLocation in self.customTickLocations)
{

    CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:[self.dateLabels objectAtIndex:labelLocation] textStyle:axisTextStyle];
newLabel.tickLocation = [tickLocation decimalValue];
    int i = [tickLocation intValue];

    newLabel.offset = 5.0f;
    newLabel.rotation = M_PI/4;

    [customLabels addObject:newLabel];
    NSLog(@"Label is %@", [self.dateLabels objectAtIndex:labelLocation]);

    labelLocation = labelLocation + 1;

    NSLog(@"Tick Location is %i", i);
}
NSLog(@"Number of labels is %i", [customLabels count]);

axisSet.xAxis.axisLabels = [NSSet setWithArray:customLabels];
axisSet.xAxis.majorTickLocations = [NSSet setWithArray:self.customTickLocations];

NSLog(@"I have set customlabels"); 
```

这是我的日志：

> 2012-09-11 10:39:23.725 SnoozeBaby[12000:c07] 标签为 9 月 11 日
> 
> 2012-09-11 10:39:23.725 SnoozeBaby[12000:c07] 勾选位置为 0
> 
> 2012-09-11 10:39:23.725 SnoozeBaby[12000:c07] 标签为 9 月 10 日
> 
> 2012-09-11 10:39:23.726 SnoozeBaby[12000:c07] 勾选位置为 150
> 
> 2012-09-11 10:39:23.726 SnoozeBaby[12000:c07] 标签数为 2
> 
> 2012-09-11 10:39:23.728 SnoozeBaby[12000:c07] 我设置了自定义标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:43:18.817

您是否将`CPTAxis`标签政策设置为`CPTAxisLabelingPolicyNone`？除非您这样做，否则您将无法看到标签。

要注意的第二件事是，您不会释放每次`CPTAxisLabel`迭代创建的每个对象。

我没有对此进行测试，但我会说你应该首先设置位置然后设置标签：

```
axisSet.xAxis.majorTickLocations = [NSSet setWithArray:self.customTickLocations];
axisSet.xAxis.axisLabels = [NSSet setWithArray:customLabels]; 
```

# google-play - 如何在没有旧证书和私钥的情况下在 Google Play 中升级 Android 应用

> ID：12367272
> 
> 赞同：1
> 
> 时间：2012-09-11T10:03:18.637
> 
> 标签：google-play, upgrade

我正在尝试升级 Google Play 中的应用程序。但显示错误消息，即与证书有关。我没有任何证书和密钥。这都不见了，只有我有源代码。请指导我以不同的方式升级应用程序。这在 iPhone 中是否可行，所以我认为在 Android 中也可以使用这个技巧。谢谢你！非常提前。- 兰吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T22:24:24.310

您现在可能已经知道，如果**没有相同的包名称和相同的证书，就无法升级 Google Play 商店应用程序。**以下是我发现的一篇文章的摘录，有助于解释原因。[链接到原始文章。](http://android-developers.blogspot.com/2011/06/things-that-cannot-change.html)

**您的包裹名称和证书：**

其中最明显和最明显的是“清单包名称”，这是您在其 AndroidManifest.xml 中为应用程序提供的唯一名称。该名称使用 Java 语言风格的命名约定，互联网域所有权有助于避免名称冲突。例如，由于 Google 拥有“google.com”域，因此我们所有应用程序的清单包名称都应以“com.google”开头。为避免与其他开发人员发生冲突，开发人员必须遵守此约定。

一旦您在其清单包名称下发布您的应用程序，这将永远是应用程序的唯一身份。**切换到不同的名称会生成一个全新的应用程序，它不能作为现有应用程序的更新安装。**

与清单包名称同样重要的是应用程序所使用的证书。签名证书代表应用程序的作者。**如果您更改了应用程序的签名证书，它现在是一个不同的应用程序，因为它来自不同的作者。**这个不同的应用程序不能作为原始应用程序的更新上传到 Market，也不能作为更新安装到设备上。

用户在安装以这两种方式之一更改的应用程序时看到的确切行为是不同的：

如果清单包名称已更改，则新应用程序将与旧应用程序一起安装，因此它们会同时在用户的设备上共存。

如果签名证书更改，尝试将新应用程序安装到设备上将失败，直到旧版本被卸载。

如果您更改应用程序的签名证书，则应始终更改其清单包名称，以避免安装时失败。

**你的 AndroidManifest.xml 是一个公共 API** 不仅仅是你的包名是不可变的。AndroidManifest.xml 的一个主要功能本质上是从您的应用程序中声明一个公共 API，以供其他应用程序和 Android 系统使用。您在清单中声明的​​每个非私有组件（即其 android:exported 状态为 true）都应被视为公共 API，并且永远不会以破坏兼容性的方式进行更改。

构成兼容性中断的一个微妙但重要的方面是**您的活动、服务和接收器组件的 android:name 属性。**这可能令人惊讶，因为我们认为 android:name 指向实现我们应用程序的私有代码，但它也是（结合清单包名称）该组件的官方唯一公共名称，由 ComponentName 类表示。

更改应用程序内部的组件名称可能会对您的用户产生负面影响。一些例子是：

如果您的应用程序的主要活动的名称被更改，用户对其所做的任何快捷方式都将不再起作用。快捷方式是直接指定它应该运行的 ComponentName 的 Intent。Intent 主要有两种：

隐式意图仅指定它们应该匹配的“什么”，使用操作、类别、数据、MIME 类型等。他们将找到的确切组件仅在运行时确定，由包管理器将其与当前应用程序进行匹配。

显式意图通过 ComponentName 指定他们应该匹配的单个显式“谁”。无论 Intent 中的其他内容如何，​​它只与在其 ComponentName 中给出的确切清单包名称和类名称相关联。

这两种类型的 Intent 对 Android 如何与您的应用程序交互都很重要。

ComponentName 是您在清单中声明的​​组件的公共唯一名称，如果它们对其他应用程序可见，则不得更改。

总之：您的应用程序的某些部分无法更改。请小心。

[http://android-developers.blogspot.com/2011/06/things-that-c​​annot-change.html](http://android-developers.blogspot.com/2011/06/things-that-cannot-change.html)

# c# - 为幸运号码生成唯一字符串

> ID：12367278
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:03:44.347
> 
> 标签：c#

> **可能重复：**
> [唯一的随机字符串生成](https://stackoverflow.com/questions/730268/unique-random-string-generation)

我必须生成一个随机的唯一字符串。这样做的目的是在表格中的每个成功条目后生成一个**幸运数字。**

我不喜欢使用 GUID，因为它在两者之间是破折号（-）。 [这是一个例子](https://stackoverflow.com/questions/730268/unique-random-string-generation)，但它似乎也太长了。

我想生成一个大约 10 个字符的字符串。

任何好的想法将不胜感激。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:05:33.317

您可以创建不带破折号的 Guid 的字符串表示形式：

```
Guid.NewGuid().ToString("N"); 
```

当然，它有 32 个字符长，而不是 10 个字符。但它是一个简单而快速的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:06:31.913

你可以试试这个：

```
public struct ShortGuid
{
    private Guid _underlyingGuid;

    public ShortGuid(Guid underlyingGuid) : this()
    {
        _underlyingGuid = underlyingGuid;
    }

    public static ShortGuid Empty 
    {
        get { return ConvertGuidToShortGuid(Guid.Empty); }
    }

    public static ShortGuid NewShortGuid()
    {
        return ConvertGuidToShortGuid(Guid.NewGuid());
    }

    private static ShortGuid ConvertGuidToShortGuid(Guid guid)
    {
        return new ShortGuid(guid);
    }

    public override string ToString()
    {
        return Convert.ToBase64String(_underlyingGuid.ToByteArray()).EscapeNonCharAndNonDigitSymbols();
    }

    public bool Equals(ShortGuid other)
    {
        return other._underlyingGuid.Equals(_underlyingGuid);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (obj.GetType() != typeof (ShortGuid)) return false;
        return Equals((ShortGuid) obj);
    }

    public override int GetHashCode()
    {
        return _underlyingGuid.GetHashCode();
    }
} 
```

其中**EscapeNonCharAndNonDigitSymbols**是一个扩展方法：

```
 public static string EscapeNonCharAndNonDigitSymbols(this string str)
    {
        if (str == null)
            throw new NullReferenceException();
        var chars = new List<char>(str.ToCharArray());

        for (int i = str.Length-1; i>=0; i--)
        {
            if (!Char.IsLetterOrDigit(chars[i]))
                chars.RemoveAt(i);
        }
        return new String(chars.ToArray());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:21:36.110

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Cryptography;

namespace LinqRandomString
{
    class Program
    {
        static void Main(string[] args)
        {
            do
            {
                byte[] random = new byte[10000];

                using (var rng = RandomNumberGenerator.Create())
                    rng.GetBytes(random);

                var q = random
                            .Where(i => (i >= 65 && i <= 90) || (i >= 97 && i <= 122)) // ascii ranges - change to include symbols etc
                            .Take(10) // first 10
                            .Select(i => Convert.ToChar(i)); // convert to a character

                foreach (var c in q)
                    Console.Write(c);

            } while (Console.ReadLine() != "exit");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:16:44.147

就在昨天不得不做同样的任务。干得好：

```
public static class RandomStringService
{
    //Generate new random every time used. Must sit outside of the function, as static, otherwise there would be no randomness.
    private static readonly Random Rand = new Random((int)DateTime.Now.Ticks);

    /// <summary>
    /// Create random unique string- checking against a table
    /// </summary>
    /// <returns>Random string of defined length</returns>
    public static String GenerateUniqueRandomString(int length)
    {
        //check if the string is unique in Barcode table.
        String newCode;
        do
        {
            newCode = GenerateRandomString(length);

         // and check if there is no duplicates, regenerate the code again.
        } while (_tableRepository.AllRecords.Any(l => l.UniqueString == newCode));

//In my case _tableRepository is injected via DI container and represents a proxy for 
//EntityFramework context. This step is not really necessary, most of the times you can use 
//method below: GenerateRandomString

        return newCode;
    }

    /// <summary>
    /// Generates the random string of given length.
    /// String consists of uppercase letters only.
    /// </summary>
    /// <param name="size">The required length of the string.</param>
    /// <returns>String</returns>
    private static string GenerateRandomString(int size)
    {
        StringBuilder builder = new StringBuilder();
        char ch;
        for (int i = 0; i < size; i++)
        {
            ch = Convert.ToChar(CreateRandomIntForString());
            builder.Append(ch);
        }
        return builder.ToString();
    }

    /// <summary>
    /// Create a random number corresponding to ASCII uppercase or a digit
    /// </summary>
    /// <returns>Integer between 48-57 or between 65-90</returns>
    private static int CreateRandomIntForString()
    {
        //ASCII codes
        //48-57 = digits
        //65-90 = Uppercase letters
        //97-122 = lowercase letters

        int i;
        do
        {
            i = Convert.ToInt32(Rand.Next(48, 90));
        } while (i > 57 && i < 65);

        return i;
    } 
```

# actionscript-3 - 无法从多个 swc 转换为 MovieClip 到 ComboBox

> ID：12367281
> 
> 赞同：0
> 
> 时间：2012-09-11T10:03:54.427
> 
> 标签：actionscript-3

我有一个带有 swcA.swc 和 swcB.swc 的 AS3 项目。swcA 有一个用于 ActionScript 类的 mc 导出，名为 mcA。

mcA 有一个子组合框。swcB 的情况与 swcA 类似，如下图：

```
swcA
    mcA (a definition)
       combobox (a child of mcA)

swcB
    mcB (a definition)
      combobox (a child of mcB) 
```

在我的代码中：（3种情况）

1.  `var m:MovieClip = new mcA(); // work fine`

2.  `var m:MovieClip = new mcB(); // work fine`

3.  `var m1:MovieClip = new mcA();`

    ```
    var m2:MovieClip = new mcB();  // trace type error:
                                   // it says xxxxMovieClip couldn't convent to xxx.xxx.Combobox; 
    ```

我的swc很简单，就是一个MovieClip和里面的一些fl控件，而这个MovieClip有一个联动名。

因为在 Flash 作者中设计 UI 布局比较容易，我不喜欢编写它。

如果其他包含一个或多个 fl 控件的 swc 文件包含在具有链接名称的 MovieClip 中，则编译时将导致错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:45:13.063

没有看到 SWCs FLA 文件很难说，但我会这样做。但取决于设计。

将组合框组件放入库中，确保链接，然后导出一个名为 assets 的 SWC。将 SWC 链接到您的项目。

在您的 AS3 中，您可以：

```
var mc1:MovieClip = new MovieClip();
var cb1:ComboBox = new ComboBox();
mc1.addChild(cb1);
addChild(mc1);
// Accessible via mc1.cb1\. and cb1. 
```

你也可以这样做：

```
var sp1:Sprite = new Sprite();
var cb2:ComboBox = new ComboBox();
sp1.addChild(cb2);
addChild(sp1);
// Accessible via sp1.cb2\. and cb2. 
```

这些天我倾向于在电影剪辑上使用精灵，除非它们是基于时间线的或高度图形定制的。

当您在创建资产后切换其类型时，通常会在创建资产时闪现错误。例如来自图形的movieclip。我倾向于删除并重新创建电影剪辑并将组合框放在其中并分配链接。这应该可以分配给你想要的尽可能多的变量。

D

PS。

我刚刚打开 Flash 并创建了一个影片剪辑（选择绘制框并按 F8）

1.  我将链接名称设置为“容器”

2.  在movieclip中，我删除了一个组合框并给它一个实例名称（在“cb”的属性面板中）

然后这段代码在根时间轴上运行良好：

```
import flash.display.MovieClip;

var mc1:MovieClip = new container();
addChild(mc1);

var mc2:MovieClip = new container();
addChild(mc2);

var mc3:MovieClip = new container();
addChild(mc3);

trace(mc1.cb); // Found [object ComboBox]
trace(mc2.cb); // Found [object ComboBox]
trace(mc3.cb); // Found [object ComboBox] 
```

# symfony - 查询错误 - Doctrine2/Symfony2

> ID：12367282
> 
> 赞同：0
> 
> 时间：2012-09-11T10:04:03.693
> 
> 标签：symfony, doctrine-orm

我正在尝试执行一个简单的查询，但我不明白我的错误在哪里。请帮忙！

这是在存储库类中：

```
public function searchFriends ($param)
    {
         return $this->getEntityManager()
            ->createQuery('SELECT f FROM EMMyFriendsBundle:Friend f WHERE f.name='.$param)
            ->getResult();
    } 
```

这就是我从控制器的操作中调用它的方式：

```
 $em = $this->getDoctrine()->getEntityManager();
 $result = $em->getRepository('EMMyFriendsBundle:Friend')
              ->searchFriends($search->getWords()); 
```

当它以这种方式时，我收到以下错误：

```
[Semantical Error] line 0, col 54 near 'Maria': Error: 'Maria' is not defined.
500 Internal Server Error - QueryException 
```

我试图以这种方式将搜索到的值放在引号中：

```
public function searchFriends ($param)
    {
         return $this->getEntityManager()
            ->createQuery('SELECT f FROM EMMyFriendsBundle:Friend f WHERE f.name=" '.$param ' " ')
            ->getResult();
    } 
```

但后来我得到

```
[Syntax Error] line 0, col 59: Error: Expected end of string, got ' " '
500 Internal Server Error - QueryException 
```

您能告诉我如何正确编写查询吗？提前致谢！

* * *

**编辑**

我也试过这个：

```
public function searchFriends ($param)
{
     $q = $this
        ->createQueryBuilder('f')
        ->where('f.name = :name')
        ->setParameter('name', $param)
        ->getQuery();

     return $q->getResult();
} 
```

有了这个：

```
 $em = $this->getDoctrine()->getEntityManager();
 $result = $em->getRepository('EMMyFriendsBundle:Friend')
              ->searchFriends($search->getWords()); 
```

它正在工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:10:30.097

虽然我不会使用这种将参数传递给查询的方式（检查[这个](http://docs.doctrine-project.org/en/2.0.x/reference/query-builder.html)），但您的错误在于您构建缺少点的字符串的方式。它应该是这样的：

```
public function searchFriends ($param)
    {
         return $this->getEntityManager()
            ->createQuery('SELECT f FROM EMMyFriendsBundle:Friend f WHERE f.name="'.$param.'"')
            ->getResult();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T08:48:26.300

您需要使用文字表达式：

```
public function searchFriends($param)
{
    $qb = $this->createQueryBuilder('f')
        ->where($qb->expr()->eq('f.name', $qb->expr()->literal($param)));

    return $qb->getQuery()->getResult();
} 
```

# java - 使用 box2d 将动态体向上移动

> ID：12367287
> 
> 赞同：1
> 
> 时间：2012-09-11T10:04:17.123
> 
> 标签：java, android, box2d, libgdx

我是 android 开发的新手，作为我第一次尝试获得一个工作的 android 应用程序，我正在尝试使用 libGDX 和 box2d 制作一个 2D 横向滚动游戏（有点类似于马里奥）。

我发现本教程可以让我启动并运行：[Libgdx Box2d Tiled Maps](http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p1)。我已经遵循（并对其进行了一些更改）并且我已经使用我自己的一组瓷砖启动并运行它。我遇到的问题是，当我的盒子（在示例中称为跳线）到达倾斜瓷砖的底部时，它只是停止移动。如果您下载第 2 部分的示例并修改 collisions.txt 文件并将第 12 行更改为 0x31,31x0 并走到第一个坡度，您应该希望看到我的问题（该示例不尝试处理倾斜碰撞）。我确定我的碰撞边界是正确的，因为我打开了调试渲染，我可以在正确的位置看到它们。

根据我在互联网上所做的研究以及玩弄代码，可能有几个解决方案：

1.  我尝试将盒子对象的质心更改为降低并将固定旋转设置为假（jumper.sexFixedRotation（false）），以便盒子与斜率成角度并且相对于平面应用线性脉冲。我一直无法让这个工作。
2.  我尝试检测水平和垂直速度，并在盒子没有移动但仍在按下输入时应用不同的线性脉冲。

    ```
     if (moveRight && !moveLeft) {

          if(!(Math.abs(jumper.getLinearVelocity().x) > 0.0f) && !(Math.abs(jumper.getLinearVelocity().y) > 0.00f)) {
            jumper.applyLinearImpulse(new Vector2(0.0f, 0.09f), jumper.getWorldCenter());
        } else {
            jumper.applyLinearImpulse(new Vector2(0.05f, 0.0f), jumper.getWorldCenter());
        }
        if (!jumperFacingRight) {
            jumperSprite.flip(true, false);
            jumperFacingRight = true;
        }
    } 
    ```

    这确实有效，但是非常缓慢和跳跃（更不用说hacky了！）。

我确定有一些我错过/没有想到的东西，任何建议都将受到欢迎！

# file-upload - 从用户输入文件路径中删除前导“/”和禁止“../”有多安全？

> ID：12367297
> 
> 赞同：0
> 
> 时间：2012-09-11T10:04:49.340
> 
> 标签：file-upload, sanitization, sanitize, input-sanitization

在用户提供的文件名的任何部分中剥离前导“/”并禁止“../”仍然被认为是“安全的”吗？还是有一些（想到utf-8编码）的方法？我不是在问是否可以在每个文件系统上创建文件名。我想保留尽可能多的用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:23:06.280

我认为您应该为您使用的文件系统清除文件名中禁止使用的字符（不要忘记 \ ，因为它可能会在 Windows 环境中引起一些问题......并且可能会提供一些转义字符问题......）

但是您总是可以将文件名更改为您创建的某个序列，然后将文件名与数据库中的这个新名称进行映射...这样您就可以保留您喜欢的任何名称（列出时要小心以避免XSS等...... .)

# python - 每当单元测试失败时执行操作

> ID：12367299
> 
> 赞同：2
> 
> 时间：2012-09-11T10:04:53.003
> 
> 标签：python, unit-testing, python-3.x

我正在使用`unittest`.

如果我在测试用例中的测试失败，我喜欢做一些事情（例如，将错误的输出保存到临时文件夹以供以后查看等）。

这段代码属于哪里？

起初，我以为我可以检查`if self.assertEqual(...)`，但事实证明这个函数没有返回任何值。现在这是有道理的，因为它旨在一旦检测到故障就将执行踢出测试功能。

`tearDown`无论测试是否成功，都会调用它，因此它似乎也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:11:56.807

一种方法是在测试用例实例上设置一个标志，然后在拆除时检查它的值：

```
def setUp(self):
    self.test_passed = false

def tearDown(self):
    if not self.test_passed:
        log()

def test_something(self):
    self.assertEquals(something())
    self.test_passed = true 
```

您可以编写一个装饰器来避免在每次测试结束时将您的标志设置为 true。

# django - 现有版本中 django 的 Tastypie 或 django-rest-framework

> ID：12367301
> 
> 赞同：1
> 
> 时间：2012-09-11T10:04:56.793
> 
> 标签：django, rest, tastypie, django-rest-framework

前段时间它们都很棒，有类似的主题证明了这一点，但是我们在 django 和框架方面都有很多更新。所以问题是：

现在该选择哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:16:16.223

你的问题真的很广泛。我没有使用 django-rest-framework 没什么大不了的。尽管我每天都大量使用 Tastypie 来开发大型 API。它真的很好。

我们能够插入我们自己的自定义身份验证机制，最终效果很好。此外，我需要使用复杂的模式类型（GPX 和 TCX 格式），而且很容易让这些工作。

总而言之，Tastypie 真的很容易扩展。此外，它真的很容易开始。只需几行代码，您就可以获得一个有效的 API。

它对 HATEOAS 有很好的支持，并且具有出色的错误处理功能。它也使用了相当不错的 HTTP 状态代码。

作为最后的想法，两者似乎都得到了大量开发（在过去的几天里都有提交）。

您可以根据自己的需要进行选择。

# jquery - jquery masonry 插件的空间问题在 IE 和 firefox 中不起作用

> ID：12367303
> 
> 赞同：0
> 
> 时间：2012-09-11T10:04:56.923
> 
> 标签：jquery, plugins, jquery-masonry

```
<div class="rectangle-wrapper">
        <div class="rectangle-3 rect-box">
            <div class="image-wrap">
                <img src="img source here" alt=""/>
            </div>
            <div class="controls">
                <i class="icon-arrow-up icon-2 icon-it"></i>

                <div class="text-3">69</div>
                <i class="icon-arrow-down icon-3 icon-it"></i>
                <a onclick="" href="#" class="btn-rect">
                    <div class="rectangle-4 rect-btn">
                        <div class="text-4">Sho Frenz</div>
                    </div>
                </a>
                <a onclick="" href="#"class="btn-rect">
                    <div class="rectangle-5 rect-btn">
                        <div class="text-5">Aii Waant!</div>
                    </div>
                </a>
            </div>
        </div>
</div>

 $(".rectangle-wrapper").masonry({
                itemSelector:".rect-box ",
                columnWidth:240,
                isFitWidth:true,
                gutterWidth:0
            }); 
```

我使用了来自[http://masonry.desandro.com/](http://masonry.desandro.com/)的砌体，发现它在 Firefox 和 IE 中不起作用。

它向我展示了单行中的 4 个元素。在 Firefox 和 Ie 中，它们只有 2 个元素显示在元素上，其他地方是空格。

有人可以让我知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:44:50.513

在 Chrome 的 devtools 中查看它，您设置错误。砌体对容器内的元素进行操作。不要只在其中放置其他内容，例如页眉和页脚。你没有给容器一个高度和宽度——宽度由查看器的浏览器窗口决定，高度由元素的数量和大小决定。基本设置是这样组织的：

```
<div id="container">
  <div class="item">...</div>
  <div class="item">...</div>
  <div class="item">...</div>
  ...
</div> 
```

理想情况下，元素应该遵循模块的宽度和高度，如您在原始文档中所见。然后你像这样调用 Masonry：

```
$(function(){
  $('#container').masonry({
    // options
    itemSelector : '.item',
    columnWidth : 240
  });
}); 
```

这一切都在[此处](http://masonry.desandro.com/docs/intro.html)的文档中。

# svn - svn 存储库显示非常大

> ID：12367311
> 
> 赞同：2
> 
> 时间：2012-09-11T10:05:10.060
> 
> 标签：svn, tortoisesvn

我的一位办公室开发人员将视频上传到 svn 存储库。几天后，他删除了这些视频，但 svn 存储库仍然显示非常大的 sige。我怎样才能减小 svn 存储库的大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T10:30:24.740

您的问题已在 Apache Subversion 常见问题解答中得到解答：

[“如何从存储库的历史记录中完全删除文件？”](http://subversion.apache.org/faq.html#removal)

Apache Subversion（和其他版本控制系统）旨在保留所有历史记录。从回购历史中删除文件通常被认为是一项复杂的任务，并不是一件好事。这不是您可以轻松完成的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:14:07.310

如果您删除它们，SVN 会保留修订。请参阅[http://www.svnforum.org/threads/35631-permanently-delete-file](http://www.svnforum.org/threads/35631-permanently-delete-file)永久删除文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-06T20:10:32.147

以防几年后有人浏览这个主题：可以从颠覆中删除文件或目录 - 你制作转储，过滤转储，恢复过滤转储。有关更多详细信息，请参阅[https://stackoverflow.com/a/6025750/1727132](https://stackoverflow.com/a/6025750/1727132)

# android - 错误：Android中的NullPointerException按钮单击

> ID：12367312
> 
> 赞同：0
> 
> 时间：2012-09-11T10:05:14.477
> 
> 标签：android, facebook

我正在使用一个名为注销的按钮。此注销适用于应用程序中用户的 facebook 注销选项。当我单击此按钮时，出现以下错误。

我在下面的代码中注释了出现此错误的行。

```
09-11 15:25:30.124: E/AndroidRuntime(6866): FATAL EXCEPTION: main
> 09-11 15:25:30.124: E/AndroidRuntime(6866):
> java.lang.NullPointerException 09-11 15:25:30.124:
> E/AndroidRuntime(6866):   at
> com.example.settings.Settings$1.logout(Settings.java:46) 09-11
> 15:25:30.124: E/AndroidRuntime(6866):     at
> com.example.settings.Settings$1.onClick(Settings.java:38) 09-11
> 15:25:30.124: E/AndroidRuntime(6866):     at
> android.view.View.performClick(View.java:2485) 09-11 15:25:30.124:
> E/AndroidRuntime(6866):   at
> android.view.View$PerformClick.run(View.java:9080) 09-11 15:25:30.124:
> E/AndroidRuntime(6866):   at
> android.os.Handler.handleCallback(Handler.java:587) 09-11
> 15:25:30.124: E/AndroidRuntime(6866):     at
> android.os.Handler.dispatchMessage(Handler.java:92) 09-11
> 15:25:30.124: E/AndroidRuntime(6866):     at
> android.os.Looper.loop(Looper.java:123) 09-11 15:25:30.124:
> E/AndroidRuntime(6866):   at
> android.app.ActivityThread.main(ActivityThread.java:3683) 09-11
> 15:25:30.124: E/AndroidRuntime(6866):     at
> java.lang.reflect.Method.invokeNative(Native Method) 09-11
> 15:25:30.124: E/AndroidRuntime(6866):     at
> java.lang.reflect.Method.invoke(Method.java:507) 09-11 15:25:30.124:
> E/AndroidRuntime(6866):   at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 09-11 15:25:30.124: E/AndroidRuntime(6866):   at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 09-11
> 15:25:30.124: E/AndroidRuntime(6866):     at
> dalvik.system.NativeStart.main(Native Method) 
```

我的代码：

脸书脸书；

```
Button btn_logout = (Button)findViewById(R.id.logout);
               btn_logout.setOnClickListener(new View.OnClickListener() {

        public  void onClick(View v) {
            // TODO Auto-generated method stub
            String response = logout();//error
            Toast.makeText(getApplicationContext(), "Logout"+ response , 2).show();
        }

        public String logout() {
            // TODO Auto-generated method stub
            String res = null;
            try {
                  res = fb.logout(getApplicationContext());//error

            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return res;
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:09:12.160

确保`Facebook`对象`(fb)`已初始化...

```
Facebook fb= new .... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T10:07:22.690

您可能忘记初始化 Facebook **fb**；

```
Facebook fb= new Facebook("APP_ID"); 
```

# security - Tomcat 7 安全性 - 尝试登录？

> ID：12367317
> 
> 赞同：11
> 
> 时间：2012-09-11T10:05:22.807
> 
> 标签：security, tomcat

在 Tomcat 7 上部署我们的应用程序后，我们得到了很多：

```
<date> org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user "admin" 
```

在访问日志中，我们发现*了很多*这样的：

```
91.121.4.141 - - <date> "GET /manager/html HTTP/1.1" 401 2486 
```

这似乎是一个法国ISP（OVH SAS）。

发生什么了？他们是否尝试登录，ping？是僵尸网络吗？

我们如何防止这种登录尝试？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T13:40:31.093

这看起来像是对 Manager 应用程序的暴力攻击。LockoutRealm 已完成其工作并锁定用户以防止攻击成功。但是，这确实意味着合法用户也无法登录。假设攻击来自单个 IP，请尽早在网络中阻止该 IP 并继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-07T21:19:22.347

有用的信息可能在这里： [https ://serverfault.com/questions/244614/is-it-normal-to-get-hundreds-of-break-in-attempts-per-day](https://serverfault.com/questions/244614/is-it-normal-to-get-hundreds-of-break-in-attempts-per-day)

以及如何检查（在 CentOS/RedHat 上）失败

```
cat /var/log/secure | grep 'sshd.*Invalid' 
```

成功的登录尝试

```
cat /var/log/secure | grep 'sshd.*opened' 
```

阻止每 15 秒尝试一次的用户

```
iptables -A INPUT -p tcp -i eth0 -m state --state NEW --dport 22 -m recent --update --seconds 15 -j DROP
iptables -A INPUT -p tcp -i eth0 -m state --state NEW --dport 22 -m recent --set -j ACCEPT 
```

和关于 Auth 的完整报告

```
aureport 
```

其他工具信息在这里

[http://www.tecmint.com/5-best-practices-to-secure-and-protect-ssh-server/](http://www.tecmint.com/5-best-practices-to-secure-and-protect-ssh-server/)

还有一些安全技术在这里

[https://wiki.centos.org/HowTos/Network/SecuringSSH](https://wiki.centos.org/HowTos/Network/SecuringSSH)

# gcc - 我可以用动态符号表编译静态应用程序吗？

> ID：12367318
> 
> 赞同：3
> 
> 时间：2012-09-11T10:05:23.323
> 
> 标签：gcc, compiler-construction, compilation, linker

举个简单的例子：

```
void foo() {}

int main()
{
       return 0;
} 
```

我构建它并查看动态符号表：

```
$ g++ test.cpp -o test
$ nm --dynamic test
0804849c R _IO_stdin_used
         w __gmon_start__
         U __libc_start_main 
```

正如预期的那样，我没有看到`foo`。所以我构建以包含未使用的符号。

```
$ gcc test.c -rdynamic -o test
$ nm --dynamic test
0804863c R _IO_stdin_used
         w _Jv_RegisterClasses
0804a010 A __bss_start
0804a008 D __data_start
         w __gmon_start__
080485e0 T __libc_csu_fini
08048570 T __libc_csu_init
         U __libc_start_main
0804a010 A _edata
0804a018 A _end
0804861c T _fini
08048638 R _fp_hw
08048438 T _init
080484a0 T _start
0804a008 W data_start
08048554 T foo
08048559 T main 
```

你可以看到它`foo`现在在符号表中。现在我建立一个静态版本。

```
$ gcc test.c -rdynamic -static -o test
$ nm --dynamic test
nm: test: No symbols 
```

我的符号已经消失了，即使我明确指定了它们。

根据 GCC 手册页：

> -static 在支持动态链接的系统上，这会阻止与共享库的链接。

我的函数`foo()`不是共享库。

如果我扩展这个应用程序，它调用`dlopen()`了，我加载的库需要调用`foo()`，我的符号表不再包含对的引用`foo()`，我的应用程序将失败。

这件事[最近](https://stackoverflow.com/questions/12315670/what-do-i-need-to-debug-pthreads)发生在我身上。

为什么 -static 否定 -rdynamic 以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:36:02.223

我认为可执行文件与 C 库静态链接的想法，但提供到共享库的导出可能是一个错误的概念。在这种情况下会发生什么？假设您的共享库分配了一些内存（使用它自己的 C 库副本），然后将其传递给可执行文件中的例程，该例程释放它（在 C 库的不同副本中）。这闻起来像个问题。如果您需要静态链接某些库，您可以使用`-Wl,-Bstatic`这些库之前的选项来强制链接静态版本。

此外，如果您需要更多地控制正在发生的事情，最好有单独的编译和链接步骤并`ld`直接用于链接步骤。它不一定对您正在使用的命令行选项有所帮助，但我怀疑您可能会找到“有效”的东西，除非上面提到的问题。

# php - 函数返回 - PHP

> ID：12367319
> 
> 赞同：-2
> 
> 时间：2012-09-11T10:05:24.737
> 
> 标签：php, function, return

这只是一个好奇的问题，我不知道如何通过谷歌搜索。

一些函数是这样的：

```
function foo()
{
    $bar = 'Hello World';

    return;
} 
```

什么`retun;`会返回？这有点荒谬。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:07:42.100

> **注意：**如果没有提供参数，则必须省略括号`NULL`并将返回。带括号但不带参数的调用`return`将导致解析错误。
> 
> [http://www.php.net/return](http://www.php.net/return)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T10:06:49.203

它确实返回`null`。如果`return`在没有任何变量或值的情况下调用`return`将返回`null`.

PHP手册页的注释

> 如果未提供参数，则必须省略括号并返回 NULL。使用括号但没有参数调用 return() 将导致解析错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:08:38.147

`return`将简单地将控制权返回给调用该函数的人，并返回一个`NULL`值。所以，如果你有这段代码

```
function bar()
{
  echo 'bar';
  $a = foo();
  echo 'foobar';
} 
```

首先它打印`'bar'`字符串，然后将控制权传递给`foo()`分配给（本地）`$bar`变量`'Hello World'`字符串值的函数。然后这个变量被销毁（你退出函数）并且控制返回给`bar()`函数。之后显示一个`'foobar'`字符串。
注意`a`会有一个`NULL`值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:12:49.713

如果你正在使用

```
function foo()
{
    $bar = 'Hello World';

    return;
}
echo $temp=foo(); 
```

比它返回**NULL 值**

如果你正在使用

```
function foo()
{
    $bar = 'Hello World';

    return $bar;
}

    echo $temp=foo(); 
```

比它返回 Hello World 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:14:19.060

你可以很容易地弄清楚这一点：

```
function foo()
{
    $bar = 'Hello World';

    return;
}

var_dump( foo() ); 
```

# nsis - NSIS 嵌入卸载程序 readRegStr 文件路径

> ID：12367325
> 
> 赞同：0
> 
> 时间：2012-09-11T10:05:38.060
> 
> 标签：nsis, filepath, uninstallation

我有一个使用 HM NIS Edit 创建的卸载程序。到目前为止，它正在从静态路径执行卸载程序。但我想让它动态化。它必须读取 reg，然后使用该路径作为前缀来查找卸载程序。

```
readRegStr $0 HKLM "SOFTWARE\Data Access Worldwide\Visual DataFlex\17.0\Defaults" VDFRootDir 
```

我希望我说清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:18:39.727

您可以使用 StrCpy 连接字符串：

```
ReadRegStr $0 HKLM "SOFTWARE\Data Access Worldwide\Visual DataFlex\17.0\Defaults" VDFRootDir
StrCpy $0 "$0\Uninstall Visual DataFlex 17.0.22.0\UNWISE.EXE"
ExecWait '"$0"' 
```

如果您只使用字符串一次，您甚至不需要 StrCpy：

```
ReadRegStr $0 HKLM "SOFTWARE\Data Access Worldwide\Visual DataFlex\17.0\Defaults" VDFRootDir
ExecWait '"$0\Uninstall Visual DataFlex 17.0.22.0\UNWISE.EXE"' 
```

# java - Javassist：Bytecode.get() 不工作

> ID：12367326
> 
> 赞同：0
> 
> 时间：2012-09-11T10:05:39.730
> 
> 标签：java, javassist, bytecode-manipulation

```
import javassist.bytecode.Bytecode;
import javassist.bytecode.ConstPool;
public class Coverage {

    public static void main(String[] args) {

        ConstPool cp = new ConstPool("Hello");
        byte[] b = new byte[100];
        Bytecode bc = new Bytecode(cp);
        b = bc.get();
        System.out.println("Bytecode start");
            for(int i = 0 ; i < b.length ; i++)
             {
                System.out.println(b);
             }
        System.out.println("Bytecode end");
    }

} 
```

**bc.get()**没有返回任何东西。我的目标是获取一个类的字节码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:03:50.530

好吧，您`System.out.println(b);`每次都在打印整个阵列，您需要，`System.out.println(b[i]);`但我认为这无论如何都行不通。尝试...

```
public static void main(String[] args)  {

    ClassPool pool = ClassPool.getDefault();

    try {
        CtClass cc = pool.get("java.lang.String");
        byte[] bytes = cc.toBytecode();

        System.out.println("Bytecode start");
        for (Byte b : bytes) {
            System.out.println(b);
        }
        System.out.println("Bytecode end");

    } catch (NotFoundException e) {
        e.printStackTrace();
    } catch (CannotCompileException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:36:48.160

请参阅此[BCEL 教程](http://www.smfsupport.com/support/java/bcel-tutorial!/)以编写代码覆盖工具。

# git - git p4 仓库路径错误

> ID：12367328
> 
> 赞同：0
> 
> 时间：2012-09-11T10:05:46.020
> 
> 标签：git, perforce, git-p4

我在使用 git-p4 使用 perforce 设置 git 时遇到问题。在完成这篇出色的博客文章中的所有步骤后：http: [//owenou.com/2011/03/23/git-up-perforce-with-git-p4.html](http://owenou.com/2011/03/23/git-up-perforce-with-git-p4.html)，我尝试添加一个新文件/修改现有文件本地 git 存储库中的文件。

当试图变基时，我得到：

```
$git-p4 rebase  
Traceback (most recent call last):  
  File "/home/user/bin/git-p4", line 2362, in <module>  
    main()  
  File "/home/user/bin/git-p4", line 2357, in main  
    if not cmd.run(args):  
  File "/home/user/bin/git-p4", line 2051, in run  
    sync.run([])  
  File "/home/user/bin/git-p4", line 2004, in run  
    changes = self.p4.p4ChangesForPaths(self.depotPaths, self.changeRange)  
  File "/home/user/bin/git-p4", line 232, in p4ChangesForPaths  
    assert depotPaths  
AssertionError 
```

在将更改提交到 git 并执行
`git p4 submit --verbose`
应该将更改推送到 p4 存储库后，我得到 65534 行输出：

```
Reading pipe: git notes --ref=git-p4 show HEAD~1  
Reading pipe: git notes --ref=git-p4 show HEAD~2  
[...]  
Reading pipe: git notes --ref=git-p4 show HEAD~65534  
Traceback (most recent call last):  
  File "/home/wgorski/opt/git-p4/git-p4", line 2754, in <module>  
    main()  
  File "/home/wgorski/opt/git-p4/git-p4", line 2749, in main  
    if not cmd.run(args):  
  File "/home/wgorski/opt/git-p4/git-p4", line 1125, in run  
    self.depotPath = settings['depot-paths'][0]  
KeyError: 'depot-paths' 
```

不用说，更改不会推送到 p4 存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:38:02.680

问题是git版本。我安装了 git 1.7.0 并且 git-p4 脚本需要 git 版本 >= 1.7.1。我建议更新到最新的 git 版本。

如果升级 git 不是一个选项，您可以将 git-p4 脚本降级为不使用注释的修订版，如下所示：

`git checkout 994ec6ce71cb03786a27a77da77ac33a9e53e090 .`

降级 git-p4 后，您需要从 perforce 中查看本地 git repo。

# java - 在 cmd 提示符下观察 Java 代码的运行时间

> ID：12367331
> 
> 赞同：0
> 
> 时间：2012-09-11T10:06:14.280
> 
> 标签：java, instrumentation

我手里有一个 java 类文件，可以简单地从 windows cmd 运行它来查看输出。我只需要根据不同的输入参数观察这个java程序的运行时间。我没有源代码，所以我无法修改它来为我生成运行时间。请提出可能的出路来观察这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:11:05.963

将它包装在另一个类中并运行它。例如，如果您的类（您没有代码）被称为 Runner，那么您当前可能正在运行它

```
java -jar jarContainingRunner.jar Runner 
```

如果您创建另一个然后调用 Runner 的类，您可以在该类中执行任何操作。例如，您可以调用类 InstrumentedRunner。

```
public class InstrumentedRunner {

   public static void main(String... arg) {
       long start = System.currentTimeMillis();
       new Runner().run();
       long dur = System.currentTimeMillis() - start;
       System.out.format("Runner took %s milliseconds", dur);
   }
} 
```

（我没有测试上面的代码。）

然后你可以运行

```
java -jar jarContainingRunner.jar;jarContainingInstrumentedRunner.jar instrumentedRunner 
```

然后它将运行 Runner 的 run 方法（假设这是您想要计时的方法）并输出它所花费的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:13:00.630

你可以做的是你可以编写一个批处理文件，在那里你可以调用你的java类，但在此之前将开始时间保存在变量中，然后在类结束`subtract`之后用开始时间完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:14:01.610

您可以编写一个简单的 Java 程序来观察这一点。在新代码中使用运行时执行并观察执行时间。

此新代码的示例概述：

```
//... before your class runs.
Runtime.getRuntime().exec("java -jar yourClass"); 
//... after your class runs. 
```

# c# - c# 是否可以创建这样的委托？

> ID：12367335
> 
> 赞同：1
> 
> 时间：2012-09-11T10:06:34.613
> 
> 标签：c#, .net, delegates

我有一个听起来可能可行的想法，但我不完全确定，因此寻求有关是否可以实现以及如何实现的建议。

在我的网络表单上，我有一个名为“错误”的布尔值。

要成功加载页面，需要在页面上发生许多事情。

我可以这样写代码：

```
bool thisSuccess = DoThis();
if(!thisSuccess)
    then error;

bool thatSuccess = DoThat();
if(!thatSuccess)
    then error;

if(error)
  FailoverActions(); 
```

等等。

当然，这完全是低效的，所以我认为可以创建某种类型的委托，代码看起来像这样：

错误 = DoThis();

...还有某种触发器，当error = true时调用一个函数；

为缺乏精确的细节道歉，但这对我来说是新的领域。

* * *

更新

感谢大家的好主意。

细节很少的原因是我非常缺乏经验，而我迄今为止发现.net 是虽然有很多方法可以破解鸡蛋，但通常有一些比其他更好。

我很欣赏你有经验的观点。

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:08:03.083

为什么不。返回分配给被委托人的布尔值的方法。

这边走

```
public delegate bool PerformCalculation();

PerformCalculation = DoThis();
if (!PerformCalculation())
    then error;

PerformCalculation = DoThat();
if(!PerformCalculation())
    then error;

if(error)
    FailoverActions(); 
```

**替代解决方案**

不需要委托人。只需2个方法

`bool DoThis()`和`bool DoThat()`

```
if (!DoThis())
    then error;

if(!DoThat())
    then error;

if(error)
    FailoverActions(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:18:30.390

首先 - 让你的方法返回`true`或者`false`是一个有问题的做法 - 看起来你应该使用异常来处理这个问题，尤其是在错误相对罕见的情况下。

示例代码：

```
try
{
    DoThis();
    DoThat();
}
catch(DoingThingsException ex)
{
    FailoverActions();
    //throw; //?
} 
```

至于快速解决方案，一种选择是短路：

```
bool success = DoThis() && DoThat() && DoTheOther();
if(!success) FailoverActions(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T10:11:37.490

您可以`Func<bool>`用来表示初始化步骤：

```
var steps = new List<Func<bool>>()
{
    Step1,
    Step2,
    Step3
}; 
```

其中 Step1 等是返回的方法`bool`。

然后这个循环调用它们：

```
foreach (var step in steps)
{
    if (!step())
    {
        // an error occurred

        break; // use break to exit if necessary
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T10:15:25.093

怎么样：

```
public class MyClass
{
    private bool _error;

    private Func<bool> DoThis;
    private Func<bool> DoThat;

    public MyClass()
    {
        DoThis = () => true;
        DoThat = () => false;

        Validate();
    }

    public void Validate()
    {
        Error = DoThis() && DoThat();
    }

    public bool Error
    {
        get { return _error;  }
        set { 
            _error = value;
            if (_error) FailoverActions();
        }
    }

    public void FailoverActions()
    {

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:20:32.123

您所描述的内容适合状态机设计模式。
这种东西可以用Windows Workflow建模，最新版本中其实包含了状态机工作流。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T10:44:23.723

尝试这个：

```
if (!(DoThis() && DoThat()))
  then error;

if (error)
  FailoverActions(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T10:12:09.427

代表对返回值有未指定的行为。例如，如果将多个处理程序分配给委托使用的返回值之一，但您无法控制哪一个。这可能会导致成功的功能掩盖某些错误的情况。更不用说调用未分配的代表的危险了。

有更好的选择，但你应该澄清你想要实现的目标。

# javascript - 预加载图像并插入 DOM

> ID：12367338
> 
> 赞同：1
> 
> 时间：2012-09-11T10:06:41.880
> 
> 标签：javascript, jquery, dom, image-preloader

您好我有一个关于在 JS 或 jQuery 中预加载图像的问题。我所拥有的是一张我基本上想在一个图像中重复 16 次的图像

```
<li>image here</li> 
```

结构体。我开始基本上像这样将它插入到列表中。

```
<ul>
   <li>image</li>
   <li>image</li>
   <li>image</li>
</ul> 
```

在我的 HTML 中出现了 16 次。有效，但不是很漂亮也不是很有效。如果我想在我的 js 中预加载图像，然后插入到我的 HTML 列表中。[我在这里](http://engineeredweb.com/blog/09/12/preloading-images-jquery-and-javascript/)找到了一些不同的方法。

在这里它们被缓存，但我需要将它们放在 li 中。有什么好的建议吗？！欢迎使用 JS 和 jQuery 示例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:17:12.147

缓存图像后（使用代码[http://engineeredweb.com/blog/09/12/preloading-images-jquery-and-javascript/](http://engineeredweb.com/blog/09/12/preloading-images-jquery-and-javascript/)），您只需运行一个 javascript 循环：

```
for (i=0; i<16; i++) {
  $('ul#your_ul_id').append('<li><img src="your_image_url"/></li>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:18:04.297

我会为原始图像触发一个 .load() 事件，然后才克隆 DOM：

```
$(document).ready(function() {
var img = $('<img id="yourImg">'); 
img.load(function() {
// repeat this step ad libitum
$(this).clone().appendTo(whatever)
});
img.attr('src', yourURL);
img.appendTo(whatever2);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T10:25:30.240

```
var img = new Image();
img.onload = function() {
  $("li").prepend( this );
};
img.src = 'http://placehold.it/40x40/cf5'; 
```

# eclipse - 以编程方式在 Eclipse 中创建插件项目

> ID：12367342
> 
> 赞同：1
> 
> 时间：2012-09-11T10:06:55.450
> 
> 标签：eclipse, plugins

我尝试使用 eclipse 向导创建一个“来自现有 JAR 档案的插件”，并添加了一个外部 JAR。当我试图检查 .classpath 文件时，我有这个

```
<classpath>
     <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
    <classpathentry kind="con" path="org.eclipse.pde.core.requiredPlugins"/>
    <classpathentry exported="true" kind="lib" path=""/>
    <classpathentry kind="con" path="org.eclipse.jdt.junit.JUNIT_CONTAINER/4"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

eclipse如何知道我指向的JAR文件是什么？这个过程可以以编程方式复制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:59:33.467

有关包含的 JAR 的信息位于项目的 MANIFEST.MF 和 build.properties 文件中。

您可以使用 java.util.jar.Manifest 和 java.util.Properties 类编辑或创建这两个文件。

# c - 将初始化代码放在循环之前还是循环内部更好？

> ID：12367355
> 
> 赞同：8
> 
> 时间：2012-09-11T10:07:49.243
> 
> 标签：c, legacy-code

对不起，如果这是一个愚蠢的问题:-)

## 背景

我有如下所示的遗留代码：

```
struct {
int field1;
int field2;
int field3;
int field4;
... many many fields
} myStruct;

while (something) {
initialzationFunction(&myStruct);

// ...change fields of myStruct and do stuff.
} 
```

while 循环的每次迭代都需要将 myStruct 初始化为某个值，比如说零。initialzationFunction 将 myStruct 的所有字段初始化为零。

## 问题

将 initialzationFunction 保留在 while 循环中是否更好，或者最好在循环之前调用它一次，让程序员在碰巧更改此代码时“手动”初始化他们需要的东西。

编辑：不幸的是 myStruct 是一个全局变量，因此不能将其设为自动变量，除非我想将它作为参数传递给使用它的大量遗留函数。

## 我的想法

*   只需调用 initialzationFunction() 将防止错误，以防有人修改代码并忘记稍后初始化 myStruct。
*   查看初始化了哪些特定字段可能会提供更多信息。
*   如果稍后在 while 循环中只修改了几个字段，则调用初始化所有字段的 initialzationFunction() 是多余的。

你会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T10:18:14.760

如果您将代码留给他人维护，并且代码不是经过验证的热点，请每次初始化，因为他人引入的错误会更少。

如果代码是经过验证的关键热点，则初始化一次，然后清理代码。

过早的优化是万恶之源

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T10:26:40.650

由于结构字段在 while 循环内更改，因此在每次迭代期间初始化它是有意义的，无论循环中完成的处理目的是什么。

我想说即使循环中没有修改，也可以重新初始化几个字段。但是，在下一次迭代期间进行初始化时，跟踪哪些字段被修改并排除这些字段将是一件您可以不用的麻烦。

另一种方法是使用带有初始化值的临时结构变量，并在每次迭代开始时简单地分配它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T10:24:07.860

如果每次循环运行时都*必须初始化结构，那么在内部进行就可以了。*您还可以使用在循环之前初始化的虚拟结构，并使用`memcpy`将清除的结构复制到循环内的真实结构中。

或者就像史蒂夫·杰索普（Steve Jessop）所链接的问题的公认答案一样，而不是`memcpy`仅使用普通赋值并让编译器担心复制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T10:52:25.157

这是一个平衡和复杂性的问题。如果结构中的大多数成员在 while 循环中从未被访问过，那么初始化显然是多余的......但是为什么它们会在一个结构中组合在一起呢？他们最初的目的是什么？在这种情况下，代码本身比必要的复杂，尽管 C 中的空闲数据当然比从未执行的代码更容易混淆。

如果 OTOH 在 while 循环中使用了结构成员的主要部分，那么仅对每个成员添加一个零赋值不会有太大影响，因为对该成员的每个后续操作都会或多或少地减轻初始化对性能的影响 1/ n 方式。

我认为对代码维护有害的是 init 函数本身需要知道结构，这意味着您将信息分散到更多的地方而不是必要的地方。IIRC C允许结构被memset清空（将结构触摸为无符号字符的向量）并且成员将真正出现0 ==>如果这是公然错误那么我很抱歉，有人可能会粉碎所有的打印版本标准在我头上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T10:29:56.577

好吧，理想情况下，您希望执行最少的操作来解决您正在解决的问题。按照这个逻辑，最好离开`initializationFunction`循环，只更新循环迭代所需的字段。

从维护的角度来看，如果有人忘记从您的`struct`对象中重置成员，则循环中的算法可能会中断（或行为异常），那么最好在每个循环中初始化所有内容。但是，这并不能消除未来出现错误的可能性，它只会降低它的可能性。最后，这一切都取决于维护者的能力水平。

从性能的角度来看，这是一个[微优化](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)，并没有什么关系（除非你在初始化函数中做了一些耗时的事情）。

# iphone - iPhone- 使用 SKPSMTPMessage 的应用程序崩溃

> ID：12367356
> 
> 赞同：4
> 
> 时间：2012-09-11T10:07:49.947
> 
> 标签：iphone, ios, xcode, ipad, cfnetwork

我正在使用 SKPSMTPMessage 发送电子邮件。它在模拟器中运行良好，但是当我在 iPad 上尝试时，它会发送邮件，但之后它会崩溃。我的中继主机是

```
 testMsg.relayHost = @"smtp.gmail.com" 
```

问题出在哪里？？谁能帮我

提前致谢

编辑：错误：

```
 2012-09-11 16:10:02.824[2902:707] C: Attempting to connect to server at: smtp.gmail.com:25
 2012-09-11 16:10:03.368 [2902:707] *** stopping watchdog ***
 2012-09-11 16:10:03.370 [2902:707] S: 220 mx.google.com ESMTP iq3sm9573874pbc.5
 2012-09-11 16:10:03.371 [2902:707] C: EHLO localhost

 2012-09-11 16:10:03.373 [2902:707] *** starting short watchdog ***
 2012-09-11 16:10:03.475 [2902:707] 0
 2012-09-11 16:10:03.476 [2902:707] 0
 2012-09-11 16:10:03.522 [2902:707] 0
 2012-09-11 16:10:03.854 [2902:707] *** stopping watchdog ***
 2012-09-11 16:10:03.855 [2902:707] S: 250-mx.google.com at your service, [112.196.5.2]
 2012-09-11 16:10:03.856 [2902:707] *** stopping watchdog ***
 2012-09-11 16:10:03.857 [2902:707] S: 250-SIZE 35882577
 2012-09-11 16:10:03.858 [2902:707] *** stopping watchdog ***
 2012-09-11 16:10:03.858 [2902:707] S: 250-8BITMIME
 2012-09-11 16:10:03.859 [2902:707] *** stopping watchdog ***
 2012-09-11 16:10:03.861 [2902:707] S: 250-STARTTLS
 2012-09-11 16:10:03.862 [2902:707] C: STARTTLS

 2012-09-11 16:10:03.863 [2902:707] *** starting short watchdog ***
 2012-09-11 16:10:03.864 [2902:707] *** stopping watchdog ***
 2 012-09-11 16:10:03.865 [2902:707] S: 250 ENHANCEDSTATUSCODES
 2012-09-11 16:10:04.108 [2902:707] *** stopping watchdog ***
 2012-09-11 16:10:04.110 [2902:707] S: 220 2.0.0 Ready to start TLS
 2012-09-11 16:10:04.112 [2902:707] Beginning TLSv1...
 2012-09-11 16:10:04.113 [2902:707] C: EHLO localhost

 2012-09-11 16:10:05.088 [2902:707] *** starting short watchdog ***
  2012-09-11 16:10:05.332 [2902:707] *** stopping watchdog ***
  2012-09-11 16:10:05.334 [2902:707] S: 250-mx.google.com at your service, [112.196.5.2]
 2012-09-11 16:10:05.335 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:05.336 [2902:707] S: 250-SIZE 35882577
2012-09-11 16:10:05.337 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:05.337 [2902:707] S: 250-8BITMIME
2012-09-11 16:10:05.338 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:05.339 [2902:707] S: 250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
2012-09-11 16:10:05.340 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:05.340 [2902:707] S: 250 ENHANCEDSTATUSCODES
2012-09-11 16:10:05.341 [2902:707] C: AUTH PLAIN AGJyZWFraW4ucmVwb3J0QGdtYWlsLmNvbQBicmVha2luLnJlcG9ydA==

2012-09-11 16:10:05.342 [2902:707] *** starting short watchdog ***
2012-09-11 16:10:06.074 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:06.075 [2902:707] S: 235 2.7.0 Accepted
2012-09-11 16:10:06.077 [2902:707] C: MAIL FROM:<xyz@gmail.com> BODY=8BITMIME

2012-09-11 16:10:06.078 [2902:707] *** starting short watchdog ***
2012-09-11 16:10:06.321 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:06.323 [2902:707] S: 250 2.1.0 OK iq3sm9573874pbc.5
2012-09-11 16:10:06.324 [2902:707] C: RCPT TO:<abc@com>

2012-09-11 16:10:06.326 [2902:707] *** starting short watchdog ***
2012-09-11 16:10:06.566 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:06.568 [2902:707] S: 250 2.1.5 OK iq3sm9573874pbc.5
2012-09-11 16:10:06.569 [2902:707] C: DATA

2012-09-11 16:10:06.570 [2902:707] *** starting short watchdog ***
2012-09-11 16:10:07.644 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:07.646 [2902:707] S: 354  Go ahead iq3sm9573874pbc.5
2012-09-11 16:10:07.656 [2902:707] *** starting long watchdog ***
2012-09-11 16:10:12.645 [2902:707] *** stopping watchdog ***
2012-09-11 16:10:12.647 [2902:707] *** stopping watchdog ***
(lldb) 
```

这里 self.watchdogTimer = nil; EXC_BAD_ACCESS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-23T07:42:41.773

两年后我也遇到过这个问题。可能对某人有用我的解决方案：

```
@implementation SMTPEmailManager
{
    SKPSMTPMessage* _smtpMessage;
}

- (void) sendMessage
{
    ...
    _smtpMessage = [[SKPSMTPMessage alloc] init];
    _smtpMessage.relayHost = @"smtp.gmail.com";
    ...

    [_smtpMessage send];
}

- (void) messageSent: (SKPSMTPMessage*) message
{
    _smtpMessage = nil;
    ...    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:32:28.250

您是否将任何附件与您的电子邮件一起发送？如果是，那么您必须使用相关的 MIME 类型。

# android - 如何在android中添加管理员权限以防止应用删除？

> ID：12367364
> 
> 赞同：0
> 
> 时间：2012-09-11T10:08:27.823
> 
> 标签：android, admin

我查看了 Android 开发人员页面中的设备管理类。但是，没有防止应用程序删除的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:09:59.187

你不能。但要删除应用程序，您需要停用活动管理员。您的管理员可以收到此事件（即停用）并使用密码锁定手机。这是唯一的使用模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:34:06.013

如果您想阻止用户删除应用程序，请尝试使用某些应用程序进行锁定。这些应用程序要求输入代码以访问被禁止的应用程序或设置。在我看来，最好的方法是限制设备的使用。

# javascript - 如何替换objective-c中的java脚本参数？

> ID：12367372
> 
> 赞同：0
> 
> 时间：2012-09-11T10:08:42.757
> 
> 标签：javascript, objective-c, html, virtual-reality

我试图在我的示例项目中使用[Apple HTML5 VR ...](http://www.apple.com/html5/showcase/threesixty/)

这个[示例代码](https://github.com/WebberLai/ThreeSixtyForIPad)看起来很好。

> threesixty.js

```
threeSixty = {
    init: function() {
        this._vr = new AC.VR('viewer', 'images/optimized/Seq_v04_640x378_##.jpg', 72, {
            invert: true
        });
    },
    didShow: function() {
        this.init();
    },
    willHide: function() {
        recycleObjectValueForKey(this, "_vr");
    },
    shouldCache: function() {
        return false;
    }
}
if (!window.isLoaded) {
    window.addEventListener("load", function() {
        threeSixty.init();
    }, false);
} 
```

它加载 Seq_v04_640x378_01.jpg ~ Seq_v04_640x378_72.jpg

但我很好奇，如果我想添加另一张图片来显示 360

怎么改图片名？？？

感谢您的任何回复或回答:)

韦伯

/*编辑 - 添加 Projec 词典截图*/ ![在此处输入图像描述](../Images/3c90489e40de5e8c398406924fd08ea5.png) “优化”词典中有 72 张图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:27:45.107

**编辑**您必须编辑`threesixty.js`：在`new AC.VR( ... )`函数调用中，它足以替换：

*   `images/optimized/Seq_v04_640x378_##.jpg`使用名称模式，以及
*   `72`与您拥有的图像数量，

分别作为第二个和第三个参数。只需确保将文件放置在正确的位置，即项目中“threesixty”目录的子目录中。例如，如果您的图像序列文件被命名为：

*   frame0001.jpeg
*   frame0002.jpeg
*   ...
*   frame0360.jpeg

然后你必须写：

*   `images/optimized/frame0###.jpg`作为第二个参数，和
*   `360`作为第三个参数。

**编辑**然后，`threesixty/images/optimized/`使用 XCode 菜单项“Project->Add to project”（CMD+Alt+A）将所有文件添加到目录中。这样您就不必重命名所有序列（前提是文件具有名称模式）。

# android - 从视频中获取位图帧

> ID：12367376
> 
> 赞同：0
> 
> 时间：2012-09-11T10:09:00.763
> 
> 标签：android, video, bitmap, video-capture, sd-card

我已经编写了捕获视频的代码，现在我想从中获取位图帧，该怎么做。在这里，我正在获取要捕获位图帧的实时视频。如何获取帧？

```
public class FdActivity extends Activity {
                private Camera myCamera;
                private MyCameraSurfaceView myCameraSurfaceView;
                private MediaRecorder mediaRecorder;
                private VideoCapture        mCamera;
                Button myButton;
                SurfaceHolder surfaceHolder;
                boolean recording;
                /** Called when the activity is first created. */
                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    recording = false;
                    setContentView(R.layout.main);
                    //Get Camera for preview
                    myCamera = getCameraInstance();
                    if(myCamera == null){
                        Toast.makeText(FdActivity.this, 
                                "Fail to get Camera", 
                                Toast.LENGTH_LONG).show();
                    }
                    myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);
                    FrameLayout myCameraPreview = (FrameLayout)findViewById(R.id.videoview);
                    myCameraPreview.addView(myCameraSurfaceView);
                    myButton = (Button)findViewById(R.id.mybutton);
                    myButton.setOnClickListener(myButtonOnClickListener);
                }
                Button.OnClickListener myButtonOnClickListener
                = new Button.OnClickListener(){
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        if(recording){
                              mediaRecorder.stop();  // stop the recording
                            releaseMediaRecorder(); // release the MediaRecorder object
                              finish();
                        }else{
                                releaseCamera();
                            mediaRecorder.start();
                            recording = true;
                            myButton.setText("STOP");
                        }
                    }};

                private Camera getCameraInstance(){
                    // TODO Auto-generated method stub
                    Camera c = null;
                    try {
                        c = Camera.open(); // attempt to get a Camera instance
                    }
                    catch (Exception e){
                    }
                    return c; // returns null if camera is unavailable
                }
                private boolean prepareMediaRecorder(){
                    myCamera = getCameraInstance();
                    mediaRecorder = new MediaRecorder();
                    myCamera.unlock();
                    mediaRecorder.setCamera(myCamera);
                    mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
                    mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
                    mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
                    mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
                    mediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
                    mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
                    mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface());
                    try {
                        mediaRecorder.prepare();
                    } catch (IllegalStateException e) {
                        releaseMediaRecorder();
                        return false;
                    } catch (IOException e) {
                        releaseMediaRecorder();
                        return false;
                    }
                    return true;
                }
                @Override
                protected void onPause() {
                    super.onPause();
                    releaseMediaRecorder();       // if you are using MediaRecorder, release it first
                    releaseCamera();              // release the camera immediately on pause event
                }
                private void releaseMediaRecorder(){
                    if (mediaRecorder != null) {
                        mediaRecorder.reset();   // clear recorder configuration
                        mediaRecorder.release(); // release the recorder object
                        mediaRecorder = null;
                        myCamera.lock();           // lock camera for later use
                    }
                }
                private void releaseCamera(){
                    if (myCamera != null){
                        myCamera.release();        // release the camera for other applications
                        myCamera = null;
                    }
                }
                public class MyCameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{
                    private SurfaceHolder mHolder;
                    private Camera mCamera;
                    public MyCameraSurfaceView(Context context, Camera camera) 
                    {
                        super(context);
                        mCamera = camera;
                        mHolder = getHolder();
                        mHolder.addCallback(this);
                        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
                    }
                    public void surfaceChanged(SurfaceHolder holder, int format, int weight,
                            int height) 
                    {
                        if (mHolder.getSurface() == null){
                          return;
                        }
                        try {
                            mCamera.stopPreview();
                        } catch (Exception e){
                        }
                        try {
                            mCamera.setPreviewDisplay(mHolder);
                            mCamera.startPreview();
                        } catch (Exception e){
                        }
                    }
                    public void surfaceCreated(SurfaceHolder holder) {
                        try {
                            int offset = 0;
                            int stride = 0;
                            int width = 0;
                            int y = 0;
                            int x = 0;
                            int[][] pixels = null;
                            Bitmap src = null;
                            int height = 0;
                            mCamera.setPreviewDisplay(holder);
                            mCamera.startPreview();
                        } catch (IOException e) {
                        }
                    }
                    public void surfaceDestroyed(SurfaceHolder holder) {
                    }
                }
            } 
```

# reference - SAML 参考文档？

> ID：12367378
> 
> 赞同：4
> 
> 时间：2012-09-11T10:09:07.363
> 
> 标签：reference, saml, saml-2.0

我一直在尝试在 Java 中使用 SAML 实现 SSO。很长一段时间以来，我一直在参考专家的博客以及您网站上的一些答案。我想知道是否有一个标准参考文档定义了 SAML 请求/响应的所有协议元素和属性以及它们的使用指南。我一直根据自己的方便使用它，没有遵循任何标准，只是在 Web 应用程序之间交换 XML 消息。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:34:37.993

SAML 规范可[在此处获得](http://saml.xml.org/saml-specifications)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T03:15:00.763

[http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf)是一个很好的参考，但一个好的外行的解释是[https://www.youtube.com/ watch?feature=player_embedded&v=gUmMcecHN9s](https://www.youtube.com/watch?feature=player_embedded&v=gUmMcecHN9s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T10:24:14.540

除了 Chris Dickson 的回答之外，以下链接还提供了 opansaml-java 的标准文档

> [https://wiki.shibboleth.net/confluence/display/OpenSAML/OSTwoUserManual](https://wiki.shibboleth.net/confluence/display/OpenSAML/OSTwoUserManual)

# iphone - 使用 NSPredicate 过滤 NSMutableArray - 返回无结果

> ID：12367382
> 
> 赞同：0
> 
> 时间：2012-09-11T10:09:19.590
> 
> 标签：iphone

我得到了一个如下所示的 NSMutableArray*，并尝试使用 NSPredicate 对其进行过滤，以仅根据那里的状态返回那些感兴趣的人。

执行后结果变量为空，因此由于某种原因它没有过滤，有什么想法吗？

谢谢

代码：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"StatusId == %i", aOrderStatus ];
NSLog(@"%@", [predicate debugDescription]);
NSArray *result = [aOrdersList filteredArrayUsingPredicate: predicate];
NSLog(@"getRestaurantOrderList - result: %@", [result debugDescription]);
return [result mutableCopy]; 
```

aOrdersList 数组内容：

```
{
    StatusId = 0;
    cost = "22.950000762939";
    name = "Pieter Uys";
    number = 0823630937;
    order = "1/4 Chicken - SPICE: L";
    "order detail" = "SPICE: L";
    "order title" = "1/4 Chicken";
    orderNo = 2;
    orderNoDisplay = ORD0000000002;
    quantity = 1;
    restaurant = Nandos;
    time = " 20 min ";
},
{
    StatusId = 0;
    cost = "41.950000762939";
    name = "Pieter Uys";
    number = 0823630937;
    order = "1/4 CHICKEN MEAL - Side: CHIPS, Drink: COKE, SPICE: L";
    "order detail" = "Side: CHIPS, Drink: COKE, SPICE: L";
    "order title" = "1/4 CHICKEN MEAL";
    orderNo = 3;
    orderNoDisplay = ORD0000000003;
    quantity = 1;
    restaurant = Nandos;
    time = " 20:00 ";
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:34:30.650

这样做取决于：aOrderStatus

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(StatusId == %d)", aOrderStatus ];
NSArray *result = [aOrdersList filteredArrayUsingPredicate: predicate];
NSLog(@"getRestaurantOrderList - result: %@", [result debugDescription]); 
```

# android - AndEngine GLES2 中的编译错误

> ID：12367383
> 
> 赞同：1
> 
> 时间：2012-09-11T10:09:20.870
> 
> 标签：android, andengine

我正在尝试将 AndAngine 与 GLES2 一起使用，当我尝试编译它时，我在 AndEngine 的源代码中遇到了很多错误，例如

```
cannot find symbol variable BuildConfig
cannot find symbol variable HONEYCOMB 
```

和

```
glDrawElements(int,int,int,java.nio.Buffer) in android.opengl.GLES20 cannot be applied to (int,int,int,int) 
```

而且，例如， BuildConfig.java 甚至不存在于 中`/src/org/andengine`，正如 import 所说！

此外，`HONEYCOMB`Build.VERSION_CODES中不存在`GINGERBREAD`、 和。`ICE_CREAM_SANDWICH`

我已经从 GitHub（分支 GLES2）下载了最新版本的 AndEngine，安装了 SDK（API 级别 7-16）并`minSdkVersion`在 AndroidManifest 中设置为“8”。有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:10:30.820

对于您的 AndEngine 项目 - 检查构建目标

右键单击 AndEngine - 然后左键单击 Properties - Android - 确保 Build Target 设置为 15 或更高

还要确保您的开发工具是最新的。如果您使用的是 Eclipse - Window | Android SDK 管理器 - 确保顶部项目“Android SDK 工具”是版本 17+

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:03:44.067

好的，有解决方案：

1) 模块 SDK 必须为 15 或更高

2) /gen 文件夹必须在源文件夹列表中

# javascript - jQuery无限滑块插件

> ID：12367388
> 
> 赞同：0
> 
> 时间：2012-09-11T10:09:55.140
> 
> 标签：javascript, jquery

我做了一场噩梦，试图让一个插件与我的脚本一起工作。

似乎在页面加载时，jQuery 选择器没有看到我的 div，因为根本没有任何反应。

它应该是一排可以左右滚动的简单图像。

我把我所有的代码都放在了这里的一页上，如果有人对出了什么问题有任何建议，我将不胜感激！谢谢！

[http://liamg.co.uk/test.html](http://liamg.co.uk/test.html)

* * *

值得注意的是，控制台也不会抛出任何错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:39:03.960

In your page, you've got a call:

```
 var increment = jQuery(sliderList).children().outerWidth("true") 
```

that should be:

```
 var increment = jQuery(sliderList).children().outerWidth(true) 
```

(note the lack of quotes around true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:25:13.413

尝试在不带引号 ( )`jQuery(sliderList).children().outerWidth("true")`的情况下输入 true 。`jQuery(sliderList).children().outerWidth(true)`

# html - 我有哪些替代模式或非模式对话框来显示信息和联系表格的方法？

> ID：12367389
> 
> 赞同：0
> 
> 时间：2012-09-11T10:09:58.300
> 
> 标签：html, css

我在一个正在进行的网站上有几个链接，这些链接将显示我所谓的“一次性”信息——比如关于项目和联系表格等的东西，我真的不想让用户重新加载页面。

最初我认为我想将这些显示为模式（或无模式）窗口，从而停止额外的页面加载并保持我的职责，即尝试在页面的一次加载中提供尽可能多的内容。

但是，我的 JS 知识为零，所以我在尝试实现模态窗口系统时惨遭失败。问题 1 -***是否有任何替代模式对话框更适合我没有想到的？*** 我在想唯一的其他选择是一个 CSS 弹出窗口，它在没有 JS 的情况下也会做同样的事情。

我想我可能不得不辞职来单独加载页面，所以另一种情况是我有一个带有音乐播放器和其他数据的侧栏。理想情况下，我不希望用户单击链接并重新加载音乐播放器（即，当用户导航到此一次性信息时它会继续播放），1）由于用户停止和启动音乐的体验，以及 2 ) 所以多次重启不会影响播放次数。想到那个...

问题 2 -***有什么我可以使用的方式与以前的 HTML 框架设置相同的方式是不狡猾的，还是我必须接受播放器的重新加载？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:15:09.407

模态弹出是最佳实践。我不建议为联系表格采用任何其他技术。`HTML <form>`如果您不喜欢复杂性，有一种直接的技术可以使用它。一个简单的示例代码`HTML form`

```
<div id == "errorresponse"></div>
<form name = "myform" action = "action.php" method = "post" onSubmit = "validate()">
<input type = "text" name = "firstname"/>
<input type = "text" name = "email"/>
<input type = "submit" name = "submit" value = "Click Here to Submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:46:29.433

您可以使用展开和折叠方法来显示您不同的链接信息。这会更容易，并且不需要重新加载页面。

模态弹出窗口也是一个不错的选择，但点击次数会增加。

您可以在下面的链接中找到这两种类型的演示。

websemantics.co.uk/resources/accessible_css3_modal_pop-ups/

# c++ - 在 C++ 中启动进程时隐藏命令提示符

> ID：12367391
> 
> 赞同：0
> 
> 时间：2012-09-11T10:10:04.523
> 
> 标签：c++, winapi

我必须从我的 C++ 代码开始一个进程。我正在使用 CreateProcess() 函数，并且在 startupinfo 结构中设置了以下标志。但仍然显示命令提示符，我必须手动关闭才能继续。请告诉我如何在进程启动期间隐藏此命令提示符。

```
si.cb = sizeof(STARTUPINFO);
    si.dwFlags = STARTF_USESHOWWINDOW;
    si.wShowWindow = SW_HIDE; 
```

创建过程调用如下所示：

```
CreateProcess( NULL,   // No module name (use command line)
        exe,            // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        CREATE_NEW_CONSOLE,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi ); 
```

exe 是一个包含要启动的进程名称的字符串。

请告诉我如何在进程启动期间隐藏此命令提示符。我尝试了[这里](http://www.codeproject.com/Articles/2537/Running-console-applications-silently)描述的方法，但它不起作用。我有一个 Windows 7 系统。

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:49:45.303

您正在通过`CREATE_NEW_CONSOLE`并且您不想要新的控制台窗口。似乎答案是完全显而易见的。尽管如此，如果其他进程自己创建了一个控制台，那么您就无法阻止它。如果您通过资源管理器启动该过程会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:03:02.643

正如 MSalters 所说，这`CREATE_NEW_CONSOLE`不是您想要的。但是您可能还想传递`CREATE_NO_WINDOW`给该`CreateProcess`函数。有关可以作为标志传递的内容，请参阅[MSDN 文档。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)`CreateProcess`

# bash - 在 bash 脚本之间共享变量

> ID：12367392
> 
> 赞同：0
> 
> 时间：2012-09-11T10:10:04.523
> 
> 标签：bash

我正在尝试制作一个 init.d 脚本来启动我的应用程序。我有两个脚本，第一个是 init.d 脚本**myapp**：

```
 #!/bin/bash
   export MYAPP_HOME="/srv/myapp"
   su - myuser -c "exec $COMMAND_LINE" 
```

第二个是启动 myapp 的脚本。

我想在第二个脚本中使用变量 MYAPP_HOME。

有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:20:42.483

问题是您正在使用`-`to 参数创建登录 shell `su`，因此创建了一个新环境。要么不使用登录 shell（省略`-`），将变量作为命令行参数传递，要么将环境变量放在启动文件之一中，例如`.bash_profile`.

# php - Jquery：加入重复信息处理

> ID：12367393
> 
> 赞同：0
> 
> 时间：2012-09-11T10:10:12.590
> 
> 标签：php, jquery, mysql, ajax

我有 ajax 从两个不同的表中获取信息：

一张表是*信息*，另一张是*图像*。有唯一的信息行，最多可以连接图像表中的三行。

**MySQL：**

```
SELECT information.pointID, sName, sAddr, sPhone, iURL FROM information, images WHERE information.pointID = images.pointID AND placeID='$kraj'; 
```

我使用 ajax 作为 json 获取结果。

**JS：**

```
...

var result='';
$.each(data, function(i,e) {
result += e.pointID+' '+e.sName+' '+e.iURL;
});

... 
```

假设数据库中有信息 1 的三张图像。

我的问题是 php 获取三行，因为即使只有一个唯一信息行，该选定信息也有三张图像。

这是打印结果后我用 js 得到的输出：

```
2 John 02151 John 02152 John 02153 
```

我想要的是只打印一次基本信息。例子：

```
2 John 02151 02152 02153 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:11:44.193

我认为最好创建一个您需要的数组并将该数组发送到 JSON 并生成输出。

该数组类似于数组（'pointID','john',array(02151,02152,02153)）。循环通过这将很容易。

```
data = ["point", "john", [9, 18, 3]]
result = data[0]+data[1];

$.each(data[2], function(i,e) {
  result += e;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:25:24.817

试试这个查询...

```
SELECT a.pointID, DISTINCT a.sName, a.sAddr, a.sPhone, a.iURL FROM information as a, images as b WHERE a.pointID = b.pointID AND placeID='$kraj'; 
```

希望这会帮助你....

# database - 如何使用 sqlite 配置 symfony2

> ID：12367396
> 
> 赞同：3
> 
> 时间：2012-09-11T10:10:25.053
> 
> 标签：database, sqlite, symfony

我正在使用 sqlite 在 symfony2 中开发我的测试应用程序。我已经安装了 symfony2 并尝试使用 sqlite 进行设置，我在“src/test”测试命名空间下创建了“data”文件夹，但是当我运行命令时

```
app/console doctrine:database:create 
```

它给出的错误：

> 无法为名为 data/ak.db 的连接创建数据库
> SQLSTATE[HY000] [14] 无法打开数据库文件

我的 Parameter.yml 设置是：

```
parameters:
    database_driver: pdo_sqlite
    database_host: localhost
    database_port: null
    database_name: ak.db
    database_user: root
    database_password: null
    mailer_transport: smtp
    mailer_host: localhost
    mailer_user: null
    mailer_password: null
    locale: en
    secret: b4289c0b750d5c5b573788d79c4e1d130380ff7d
    database_path: data/ak.db 
```

和 config.yml ：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        path:     %database_path%
        charset:  UTF8 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T10:26:35.567

数据库“路径”参数必须列出数据库的完整路径。在您的情况下，您可以执行以下操作：

```
doctrine:
    dbal:
        path: %kernel.root_dir%/src/test/%database_path% 
```

# ios - ios中的数据库大小限制

> ID：12367399
> 
> 赞同：1
> 
> 时间：2012-09-11T10:10:33.100
> 
> 标签：ios, iphone, ipad

我正在开发一个应用程序，它通过在线搜索在数据库中存储大量图像。当一次有 5000x4 图像存储在数据库中时，应用程序崩溃。我想知道的是，是数据库超出了某个（有限）大小，还是在数据库上执行了太多活动导致它崩溃。

PS：它在模拟器中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:58:32.283

1) 如果总数据库大小只有几百兆，那么您可以安全有效地使用 SQL 支持的核心数据存储库来存储图像。

2）当你开始接近一个或更多的演出时，你应该将较大的（或所有）图像保存在文件中，并使用 Core Data 保留对图像的引用（文件路径或 URL）。执行此操作的方法是（对于 ios 5.1 和更高版本）在“应用程序支持”目录（您可能需要创建）中创建一个目录，将其标记为不包含在 iCloud 备份中，并将图像存储在那里. 通过这种方式，您可以保留大量数据（假设用户不会生气并删除您的应用程序）。

编辑：我刚刚读了你的评论。假设有大量的小 (8K) 图像，如果问题是让它们同时处于活动状态（也就是说，您一次设置所有实体属性，而不是长时间），那么您可能需要使使用“refreshObject:mergeChanges:”的实体“故障”。您可以在 Core Data Programming Guide 中阅读有关此内容的内容以及其他减少内存占用的技巧。

# sql - Oracle 的 Table.Column(+) = 值的 SQL Server 等效项

> ID：12367402
> 
> 赞同：1
> 
> 时间：2012-09-11T10:10:38.553
> 
> 标签：sql, sql-server, oracle, database-migration

我正在从事一个处理将 Oracle db 迁移到 SQL Server 的项目。我遇到了这样的查询：

```
select <colums>
from Table1, Table2
where Table1.key = Table2.Key(+)
      and Table1.Column1(+) = 1234 
```

我知道 SQL 服务器相当于查询的第一个条件是

```
select <colums>
from Table1 LEFT OUTER JOIN Table2 ON Table1.Key = Table2.Key
WHERE .... 
```

我的问题是我需要为这个条件写什么

```
and Table1.Column1(+) = 1234 
```

将简单地

```
and Table1.Column1 = 1234 
```

工作，因为我认为我已经介绍了加入部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:13:39.300

```
select <colums>
from Table1 LEFT OUTER JOIN Table2 ON Table1.Key = Table2.Key
WHERE Table1.Column1 = 1234 
```

# mysql - 使用 C 访问数据库

> ID：12367403
> 
> 赞同：7
> 
> 时间：2012-09-11T10:10:39.763
> 
> 标签：mysql, c, database

我正在解决一个需要从数据库存储和检索数据的问题。我在 Windows 系统上使用 C。我熟悉 MYSQL 数据库。我只需要知道我是否可以使用 C 访问数据库，如果可以的话，我可以使用哪个 IDE 以及如何将它连接到 MYSQL 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T10:13:45.853

是的，您可以使用 MySql 主页上的连接器（驱动程序）将您的 C 代码连接到 MySQL：[http ://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/)

关于编写访问 MySQL 的 C 程序有一个很好的教程：[MySQL C API 编程教程](http://zetcode.com/db/mysqlc/)

您可以使用任何所需的 IDE 来编写代码，例如 Visual Studio。您可以在这里下载免费版本： http: [//www.microsoft.com/visualstudio/11/en-us/products/express](http://www.microsoft.com/visualstudio/11/en-us/products/express)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T10:15:12.823

是的，当然可以。您只需要下载[MySQL 库](http://dev.mysql.com/downloads/)。这里是如何使用它的简单示例：

```
#include <stdio.h> 
#include "mysql/mysql.h" 

int main() { 
    MYSQL mysql; 

    if(mysql_init(&mysql)==NULL) { 
        printf("\nInitialization error\n"); 
        return 0; 
    } 

    mysql_real_connect(&mysql,"localhost","user","pass","dbname",0,NULL,0); 

    printf("Client version: %s",mysql_get_client_info()); 
    printf("\nServer version: %s",mysql_get_server_info(&mysql)); 
    mysql_close(&mysql); 
    return 1; 
} 
```

您可以使用任何您想使用的 IDE。您只需要在 MySQL 中为 include、lib 和 bin 文件夹设置路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-29T04:21:14.947

我用 C++ 编写了一个用于数据库访问的库。使用这个库，您可以连接从 postgresql、mysql 和 mysql 检索数据。

您可以在此处获取代码：[https ://github.com/vitorluis/VSQL](https://github.com/vitorluis/VSQL)

你可以试试这个库并与其他人分享。

# c# - 将 Linq 中的表截断为实体

> ID：12367404
> 
> 赞同：0
> 
> 时间：2012-09-11T10:10:41.940
> 
> 标签：c#, linq, ado.net, entity

我的 C# 项目 (.NET 3.5) 中有一个 ADO.NET 实体数据模型，并且使用它非常愉快。我希望能够截断此模型中的表格。我在网上搜索过，大多数人建议使用“ExecuteCommand”，但我的数据上下文没有将 ExecuteCommand 显示为可用的方法。我在这里做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:12:27.547

听起来您使用的是实体框架而不是 Linq to SQL？- 尝试`ExecuteStoreCommand`

# internet-explorer - SSRS 报告 IE8 ScriptResource.axd 压缩/解压错误

> ID：12367408
> 
> 赞同：6
> 
> 时间：2012-09-11T10:10:47.063
> 
> 标签：internet-explorer, reporting-services, ssrs-2008, scriptresource.axd

从这个问题开始：

[SSRS IE8 JavaScript 错误 无效字符 ScriptResource.axd](https://stackoverflow.com/questions/8939854/ssrs-ie8-javascript-error-invalid-character-scriptresource-axd)

这是一个我真的需要解决的问题。我现在有更多关于此的信息，因此决定记录一个新问题。

我有一套 SSRS 报告位于运行 SQL Server 2008 R2 的 SQL Server 上。使用 Internet Explorer 访问这些报告超过 6 个月，我没有遇到任何问题。

上周，有人记录了一个帮助台电话，称她无法看到报告，因为页面永远加载，几秒钟后左下角出现一个带有解释标记的小图标，旁边显示“完成”文本。

因为我已经知道这个问题可能是 IE 问题，所以我建议用户下载 Firefox 并改用它。这样做后，用户可以看到报告。

第二天，我使用 IE 正常访问报告，用户遇到的问题发生在我身上。我被困在一个无限循环中，角落里有一个带有错误图像的小“完成”。单击时的错误消息是：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E)
Timestamp: Tue, 11 Sep 2012 09:58:13 UTC

Message: Invalid character
Line: 1
Char: 1
Code: 0
URI: http://xxxxx/xxxxxxx/ScriptResource.axd?d=iYyn-VGIBSAJxmoeImLsTtesAMP1500Akt1KNGOHN_b-PEkCEZq1v-qs_SbiV610TRrm-8ISgq4xWAV6lxRrv1NaHOGFuUUOfusDmQgdb8FPNvi0YU9Sc8hp24nzIzpdQXiEtHcT-lcQIUkU_kcJg-EM61o1&t=ffffffffb868b5f4

Message: Sys.ScriptLoadFailedException: The script '/Reports/ScriptResource.axd?d=iYyn-VGIBSAJxmoeImLsTtesAMP1500Akt1KNGOHN_b-PEkCEZq1v-qs_SbiV610TRrm-8ISgq4xWAV6lxRrv1NaHOGFuUUOfusDmQgdb8FPNvi0YU9Sc8hp24nzIzpdQXiEtHcT-lcQIUkU_kcJg-EM61o1&t=ffffffffb868b5f4' could not be loaded.
Line: 5
Char: 25340
Code: 0
URI: http://xxxxx/xxxxxxx/ScriptResource.axd?d=IcCsSJUAEsxazITdzqHjDt1BesfkTp6Mm3HS3LIMBVF2Lxr_e3gi3u2PvZQRuLbGfe0MhIoDqlxXvrXTRXhpV2wfNhWcJK0iLFPtfDZzuej4KzvCBV1ggWWCaLYj6iG0RpVkSYBY-IrbRMKNOCn9Qc8W77bR9CrIphFmFbR2zKerE3DA0&t=ffffffffb868b5f4 
```

我检查了我使用的 IE 版本号是 8.0.6001.18702。我尝试让一位同事尝试访问也使用 8.0.6001.18702 版 IE 的报告，而她没有遇到任何问题。

我对此感到奇怪的是，6 个月以来我没有任何问题，然后突然之间我无法使用 IE 访问报告，你甚至不能说这是 Internet Explorer 版本的问题，因为正如我所说，我的同事正在使用与我相同的版本。

由于它使用 Firefox 工作，它仍然指向 IE 问题，但可能是服务器端的问题？

任何人都可以在这里提出任何建议，就好像这对我来说是个问题一样，这可能会在一夜之间成为许多用户的问题。

当我尝试访问报告时，请参阅随附的屏幕截图：

> ![在此处输入图像描述](../Images/8fe37af84a41b3628ac8f2ceb6b3d46c.png)

**更新：** 研究表明这应该修复，已经完成并使用 fiddler 进行了监控，但是它仍在使用 GZIP 压缩，并且不适合我。

```
<system.web.extensions>
    <scripting>
      <scriptResourceHandler enableCompression="false" enableCaching="true"/>
    </scripting>
  </system.web.extensions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:33:22.753

听起来很疯狂，但我的问题的解决方案很简单。

转到控制面板 > Internet 选项 > 高级

关闭 HTTP 1.1 设置，然后重新打开。

SSRS 报告现在可以正确呈现，但是我的 ie8 版本仍然不希望支持 gzip 编码，而我的同事却支持。

**更新** 10 分钟 - 30 分钟后，错误又回来了，我现在已经一起关闭了 HTTP 1.1，虽然不理想，但我可以查看报告。

# python - os.getenv 返回 None 而不是正确的值

> ID：12367410
> 
> 赞同：14
> 
> 时间：2012-09-11T10:10:51.307
> 
> 标签：python, linux, environment-variables, getenv

我有一个无法发布的复杂软件，也没有具体的工作示例。我会尝试解释这个问题，也许有人以前遇到过这个问题。

在 Linux shell 上，我定义了一个环境变量：

```
> export MY_TEST_ENV=4711
> echo $MY_TEST_ENV
> 4711 
```

在复杂的代码中，我想用

```
print os.getenv('MY_TEST_ENV') 
```

总是返回`None`。如果我创建一个测试脚本来测试这种行为，即使是不同文件中的类，我总是会得到所需的行为，例如，`os.getenv('MY_TEST_ENV')`返回正确的值`4711`。

代码以`sudo`.

任何想法可能是什么原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T10:41:12.290

您调用 Python 进程的方式很可能会让您失去环境。如果您在正在运行的 shell 中导出变量，然后直接在同一个 shell 中调用有问题的 Python 进程，则该环境变量绝对应该可用于该 Python 进程。为了帮助您调试此问题：代替有问题的代码 ( `print os.getenv('my...')`)，通过 . 打印整个环境`print os.environ`。从结果中，您应该能够推断出您的环境发生了什么。

# spring - Spring 3 Controller 的 List 类型的私有变量清空。会话超时？

> ID：12367412
> 
> 赞同：1
> 
> 时间：2012-09-11T10:10:54.467
> 
> 标签：spring, session, tomcat, controller, portlet

我有一个有两个列表变量的 portlet 控制器

```
private List<MyObject1DTO> list1;
private List<MyObject2DTO> list2; 
```

在我的 JSP 中，我使用 AJAX 请求将对象发送回控制器，控制器根据用户提交的内容将对象添加到任一列表中。当用户会话超时时，这些列表会发生什么？

有时，当用户完成将对象添加到这些列表（这是一个大表单）并填写了表单的其余部分并按下提交这些列表的验证（它们不能为空）时会失败。我想知道当用户填写表单并清除这些列表时会话是否超时。还有什么可能导致列表为空？

我这样做的方式是设计缺陷吗？有没有更好的方法来做到这一点？

这是一个非常大的表格，并且有很多领域。表单中有两个不同的部分创建这些对象并通过 AJAX 请求将它们发送到列表。当我在控制器中处理 ajax 请求时，我无法访问模型本身，因此我可以将对象添加到模型中。所以我用控制器中的列表来做。

编辑：

```
@Controller("myController")
@RequestMapping("VIEW")
public class MyController {
  private List<MyObject1DTO> list1;
  private List<MyObject2DTO> list2;    
  @ModelAttribute(value = "myFormDTO")
  public MyFormDTO getMyFormDTO() {
  ....
  }
  // Controller mappings etc.
} 
```

我有一个对象绑定为代表我的表单的模型属性。但这不包括那些列表。因为我不知道在我用来将对象添加到列表的 ajax 请求中访问此模型属性的方法（不认为这是可能的）。基本上，用户看到的表单是绑定到模型属性的字段。然后有两个不同的“篮子”（列表），用户可以添加项目（控制器中的列表保存用户添加的对象）。我将物品添加到购物篮中的方式是通过 ajax 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:15:36.430

您可以查看 Spring Webflow，也可以将模型属性设置为会话属性。

您可以如下注释您的课程

```
@Controller("myController")
@RequestMapping("VIEW")
@SessionAttributes("myFormDTO")
public class MyController {
    ....
} 
```

spring 会将您的模型属性添加到会话中，由此您可以在控制器方法中访问您的模型属性。

```
@RequestMapping("/ajax/addToList1")
public void ajaxAddToList1(@ModelAttribute("myFormDTO") MyFormDTO form, ....) {
    form.getList1().add(.....);
} 
```

不要使用 Controller 成员变量（除非您使用 @Scope 注释），因为 Spring Controller 默认是单例的，并发用户可能会相互干扰。

# typo3 - 如何以 PHP 方式检索另一个页面的已编译 TypoScript 值？

> ID：12367414
> 
> 赞同：1
> 
> 时间：2012-09-11T10:11:04.840
> 
> 标签：typo3, typoscript

我想获得一个 TypoScript 值，不是为当前页面编译的，而是为另一个页面编译的。

是否有一些本机 API 方法可以实现这一点？

最好的方法是：

```
$foreignTsArray = t3something::getTsArray($foreignPageId); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:15:06.777

前段时间这对我有用。

```
$foreignPageId = 999;

$templateParserObj = t3lib_div::makeInstance('t3lib_tsparser_ext');
$templateParserObj->tt_track = 0;
$templateParserObj->init();

$pageSelectObj = t3lib_div::makeInstance ('t3lib_pageSelect');
$rootLine = $pageSelectObj->getRootLine($foreignPageId);
$templateParserObj->runThroughTemplates($rootLine);
$templateParserObj->generateConfig();
$foreignTs = $templateParserObj->setup; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:23:09.257

为了避免重新发明轮子，我建议将 TS 移动到主级别页面并在两个条件下启用：

```
[globalVar = TSFE:id = 123] || [globalVar = TSFE:id = 345]
    lib.someSharedObject = ...
[end] 
```

# jquery - jquery .get() 在 Internet Explorer 中不显示任何内容

> ID：12367416
> 
> 赞同：0
> 
> 时间：2012-09-11T10:11:12.950
> 
> 标签：jquery

我正在使用以下代码，但它似乎不想在 ie 中工作，有人知道为什么吗？我已经看到将缓存设置为 false 的解决方案，这是正确的吗？如果是这样，我将如何在我的代码中实现？

提前致谢。

编辑 - 不跨域（对不起）

```
<script>
    $.get("staffnotices/index.php", function(data) {
    $.ajaxSetup({cache: false});
    $("#bbs").html(data);
    });
</script>
<div id="bbs">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:15:23.597

将浏览器模式设置为 IE7 OR IE8 OR IE9 并检查结果。此问题处于兼容模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:13:49.047

首先要尝试将`cache`选项设置为。`false`您可以通过在调用之前添加它来做到这一点`$.get()`：

```
$.ajaxSetup({cache: false}); 
```

您只需每页执行一次，因为它设置了全局 AJAX 选项并将影响所有 AJAX 请求（除非他们明确地将选项设置为不同的值）。

```
<script>
    $.ajaxSetup({cache: false});
    $.get("staffnotices/index.php", function(data) {
        $("#bbs").html(data);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:14:56.207

尝试这个：

```
$(document).ready(function () {
  $.get("staffnotices/index.php", function(data) {
    $("#bbs").html(data);
  });
}); 
```

# html - HTML: onpaste="doSomething();" 作为无效属性

> ID：12367417
> 
> 赞同：4
> 
> 时间：2012-09-11T10:11:13.600
> 
> 标签：html, onpaste

我正在使用 Amaya 检查我的 HTML 代码。

我在这一行有一个错误：

```
<input style="vertical-align:bottom;" type="text" id="doi_id" onkeydown="if (event.keyCode == 13) return false;" onpaste="parsePIIfromDOI();"/> 
```

对于 onpaste，我收到“无效属性“onpaste”（保存时删除）”错误。

我不知道为什么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:19:27.190

[http://reference.sitepoint.com/html/extended-event-attributes/onpaste](http://reference.sitepoint.com/html/extended-event-attributes/onpaste)

“Microsoft 为在 Internet Explorer 中使用而定义的非标准事件。可能在某些其他浏览器中有效，但不能可靠地使用。此非标准属性的兼容性未经测试。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T11:11:42.493

Amaya 编辑器使用文档类型定义执行语法检查，其内置曲目仅包括不允许该`onpaste`属性的文档类型。这就是您收到错误消息的原因。

在 Amaya 中可能无法绕过这条消息。您可以使用 Tools → Change doctype → Remove the doctype，或者更好的是，在 Show Source 模式下手动将 doctype 声明更改`<!doctype html>`为 HTML5 doctype。但 Amaya 仍然不断检查它认为正确的规范。

Amaya 是一个编辑器（和一个测试平台浏览器），而不是一个检查器。使用[验证器](http://validator.w3.org/)检查您的语法。然后您可以使用`<!doctype html>`来指定 HTML5。请注意 HTML5 有一些奇怪之处，与流行的误解相反，它不是 HTML 4.01 的纯粹扩展。显然，因为 Amaya 决定删除该属性，您需要使用不同的编辑器。

是否`onpaste`有用和使用安全是一个不同的问题。

更新（2018 年 7 月）：多年来，`onpaste`它还没有成为官方 HTML 的一部分，因此验证器会发出一条关于它的错误消息。然而，支持似乎出现在例如 Chrome 中。如果您需要避免验证错误（或您的编辑器删除`onpaste`属性），请使用 JavaScript 为元素节点的属性分配值，`onpaste`而不是在 HTML 标记中使用属性。

# animation - 缓存 CCAnimation

> ID：12367418
> 
> 赞同：0
> 
> 时间：2012-09-11T10:11:15.620
> 
> 标签：animation, cocos2d-iphone

在 Cocos2D 中缓存 CCAnimations 是否有一些最佳实践？目前，我基本上是在每次出现在屏幕上时重新计算精灵的“出现”动画。以某种方式将动画缓存在实例类中不是明智之举吗？

目前，对于某些给定的游戏条件，我运行此代码数千次：

```
CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];
[frameCache addSpriteFramesWithFile:@"WichserAnimations.plist"];

NSMutableArray* frames = [NSMutableArray arrayWithCapacity:8];
for (int i = 41; i <= 48; i++) {
    NSString* file = [NSString stringWithFormat:@"intro_prep__Main_000%i.png", i];
    CCSpriteFrame* frame = [frameCache spriteFrameByName:file];
    [frames addObject:frame];
}

CCAnimation* anim    = [CCAnimation animationWithSpriteFrames:frames delay:0.05f];
CCAnimate*   connect = [CCAnimate actionWithAnimation:anim];        
[self runAction:connect]; 
```

我想将“连接”CCAnimate 对象放入精灵中以供以后重用，但这似乎不起作用:(任何建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:54:34.987

动画缓存类被调用`CCAnimationCache`。

# ajax - 带有 GWT 应用程序的 HtmlUnit 返回不完整的页面

> ID：12367419
> 
> 赞同：1
> 
> 时间：2012-09-11T10:11:18.443
> 
> 标签：ajax, gwt, seo, htmlunit

我正在尝试使用 HtmlUnit 制作我的 GWT 应用程序的 HTML 快照。这个想法是让我的 AJAX 应用程序可抓取。

不幸的是，我正在获取的页面似乎并不完整。当我在普通浏览器中访问该页面时，它缺少可查看的内容。我只需要 HTML 快照中的文本。这是我的代码：

```
public class Browser {

    public static void main(String[] args) throws IOException, InterruptedException {

       final WebClient webClient = new WebClient(BrowserVersion.FIREFOX_10);
        webClient.setJavaScriptEnabled(true);//JS is enabled by default but...
        webClient.setAjaxController(new NicelyResynchronizingAjaxController());

        HtmlPage page = webClient.getPage("http://meridianbet.com");

        int n = webClient.waitForBackgroundJavaScript(30000);

        System.out.println("Executing " + n + " JavaSript jobs!");

        System.out.println("OUTPUT: " + page.asXml());
        webClient.closeAllWindows();
       }
} 
```

执行代码后还有 7 个未完成的 JS 作业。而且无论我等多久，工作都不会被执行。有什么帮助吗？//我正在使用最新的 htmlunit 2.10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:20:11.333

我遇到了类似的问题。您是否尝试过使用这样的循环：

```
while (i > 0)
        {
            i = webClient.waitForBackgroundJavaScript(1000);

            if (i == 0)
            {
                break;
            }
            synchronized (page) 
            {
                System.out.println("wait");
                page.wait(500);
            }
        } 
```

当我使用这样的循环时，它只是坐在那里并说：“等待”无限期。但也许它会为你工作。

如果你确实解决了你的问题，请确保发布你所做的，因为我认为它会解决我同样的问题。

我在这个问题上找到了代码：[HTMLUnit doesn't wait for Javascript](https://stackoverflow.com/questions/5555178/htmlunit-doesnt-wait-for-javascript)

# mysql - 如何找到表中的哪条记录填充了最多的字段？

> ID：12367431
> 
> 赞同：4
> 
> 时间：2012-09-11T10:12:09.530
> 
> 标签：mysql

或者换一种说法：如何找到表中的哪条记录具有最少的空字段或空白字段？

无需单独计算每个字段 - 该表有 161 个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:22:52.097

这可以通过构造一个动态查询来完成，例如：

```
SELECT id,
       (IF(col1 = NULL OR col1 = "", 1, 0) +
        IF(col2 = NULL OR col3 = "", 1, 0) +
        ...
        IF(coln = NULL OR coln = "", 1, 0)
       ) AS null_count
FROM table_name
ORDER BY null_count DESC
LIMIT 1; 
```

这可以通过使用`INFORMATION_SCHEMA.COLUMNS`然后执行形成一个新的动态查询来轻松完成`dynamic sql query`。此外，您可能需要通过将会话`GROUP_CONCAT`级别变量设置`group_concat_max_len`为更高的值来增加函数输出的最大长度。

```
SET GLOBAL group_concat_max_len = 4294967295;

SELECT @query1 := CONCAT('SELECT id,
                                 (',
                         GROUP_CONCAT(CONCAT('IF(',COLUMN_NAME,' IS NULL OR ',
                                                   COLUMN_NAME,' = "", 1, 0
                                                ) 
                                           ') 
                                      SEPARATOR ' + '),
                                ') AS null_count
                         FROM table_name
                         ORDER BY null_count DESC
                         LIMIT 1')
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = SCHEMA()
      AND TABLE_NAME = 'table_name';

PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/ef9ab/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:43:44.277

*免责声明：我的问题错了，以为 OP 正在寻找具有最多 NULL 的表的列。尽管如此，也许它对任何人都有用。*

像这样创建一个过程：

```
drop procedure if exists test_most_pop_field;
DELIMITER $$
CREATE PROCEDURE test_most_pop_field(IN tableName varchar(100))
BEGIN

DECLARE done INT DEFAULT 0;
DECLARE sql_query VARCHAR(255);

DECLARE cur CURSOR FOR 
SELECT CONCAT('INSERT INTO tmp_result(columnName, numberOfEmptyRows) SELECT "', COLUMN_NAME, '" AS columnName, SUM(IF(',COLUMN_NAME,' IS NULL OR ', COLUMN_NAME,' = "", 1, 0)) AS numberEmptyRows FROM ', TABLE_NAME)
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = SCHEMA()
AND TABLE_NAME = tableName;

DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done = 1;

DROP TABLE IF EXISTS tmp_result;
CREATE TEMPORARY TABLE tmp_result(columnName varchar(100), numberOfEmptyRows int);

OPEN cur;

REPEAT
  FETCH cur INTO sql_query;
  IF NOT done THEN
    BEGIN
      SET @sql = sql_query; /*this extra step is necessary, cause otherwise it's a syntax error, don't ask me why*/
      PREPARE stmt FROM @sql; 
      EXECUTE stmt; 
      DEALLOCATE PREPARE stmt;
    END;
  END IF;
UNTIL done END REPEAT;

CLOSE cur;

SELECT * FROM tmp_result ORDER BY numberOfEmptyRows DESC /*optionally LIMIT 1*/;

END $$
DELIMITER ; 
```

然后使用您要检查的表名调用它：

```
CALL test_most_pop_field('yourTableName'); 
```

# java - Java：如何检查字符串的整个 JTree 路径

> ID：12367432
> 
> 赞同：1
> 
> 时间：2012-09-11T10:12:19.070
> 
> 标签：java, swing, jtree, treemodel

我已经看了一段时间了，但我似乎真的在网上找不到太多关于它的信息。我有一个 JTree 和一个字符串列表。我只想搜索每个字符串的 JTree 的最低级别（因此不是搜索树中的每个节点，只搜索最低节点），如果我正在搜索的字符串存在于列表中，则将字符串添加到列表中最低节点的路径

像这样的东西

```
public List<String> searchLowestNodes(List<String> wordsToSearchFor){
    List<String> matches = new ArrayList<>;
    for(String word: wordsToSearchFor){
        // i do not know how to get the lowest node for each path
        if(path.contains(word)){
            matches.add(word);
        }
        //keep looping for all paths
     }
     return matches;
} 
```

有谁知道如何做到这一点？

编辑：树示例

```
Root
-assignment1
--paul
---example.java
--john
---example.java
-assignment2
--a2
---sean
----assignment.java
---mark
----assignment.java 
```

所以给定下面的树它应该只在下面的路径中搜索单词

```
root>assignment1>paul>example.java
root>assignment1>john>example.java
root>assignment2>a2>sean>assignment.java
root>assignment2>a2>mark>assignment.java 
```

我不想添加

```
root>assignment1
root>assignment1>paul
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:17:50.357

首先，获取树模型的根：

```
rootNode = (DefaultMutableTreeNode)tree.getModel().getRoot() 
```

现在有了这个节点，遍历整个树并将叶子存储在您自己的数据结构中。您可以使用 遍历树`rootNode.depthFirstEnumeration()`，遍历枚举器并检查每个元素`element.isLeaf()`。

获得所有叶子后，获取它们的路径：`element.getPath()`. 这为您提供了从根节点到叶节点的节点数组。

现在你可以对他们做任何你想做的事。

# android - ViewPager 的视图持有者模式？

> ID：12367433
> 
> 赞同：6
> 
> 时间：2012-09-11T10:12:25.217
> 
> 标签：android, android-viewpager

我有一个 ViewPager、FragmentPagerAdpater 和 3 个片段来实现标签滑动视图。ViewPager 是否应该在第一次渲染后“记住”这 3 个视图？

我的问题是，一段时间后，这 3 个视图的布局被“遗忘”了。这意味着我需要再次更新它们，用户会在更新之前看到丑陋的部分。

viewpager 是否也有视图持有者模式？我可以使用什么技术来保留那些已经渲染的视图或防止它们被破坏？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T10:52:54.210

您可以`ViewPager` `setOffscreenPageLimit()`用来控制在内存中保留多少页并在滚动到之前预先创建多少页。默认情况下，它的值为 1，这意味着它会将当前页面保留在内存中以及它之前和之后的页面。根据您的页面大小（全屏或部分屏幕），将其增加到例如 2 将阻止在屏幕上构建页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:47:36.930

在您的选项卡适配器中，只需覆盖 destroyItem() 方法并引用 super 语句

这将保存您的片段实例，并且它们不需要一次又一次地加载

```
@Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        // TODO Auto-generated method stub
        // super.destroyItem(container, position, object);
    } 
```

像这样的东西。

# c# - Unity3d Android插件静态AsyncTask问题

> ID：12367438
> 
> 赞同：5
> 
> 时间：2012-09-11T10:12:59.280
> 
> 标签：c#, java, plugins, android-asynctask, unity3d

我正在 Unity3d 引擎上为 android 开发应用程序。此应用程序必须通过网络套接字连接到我在 PC 上的服务器。我找到了一些适用于 Android 的 Unity3d 插件示例。基于它们，我在 C# 上为 Unity3d 编写了一些代码，在 Java 上为 Android 编写了一些代码。我发现网络操作不能在 Android 应用程序的 UI 线程中运行。所以我必须使用 AsynTask 来处理网络请求。我还尝试从 c# 脚本调用非静态方法，但它们不返回任何数据。只有静态调用从 java 应用程序返回数据。所以我的 AsyncTask 类是静态的。但是当我使用 AsyncTask 作业调用静态函数以通过网络获取数据时，我的应用程序崩溃了。我收到错误。你能帮我解决我的问题吗？我看到了两种解决此问题的方法：1) 更改 Unity3d 的 c# 代码以通过非静态方法调用获取数据。在 Java 代码中将所有方法更改为非静态。2) 更改我的 Java 代码以使用静态方法和静态 AsyncTask。

我的 c# 脚本 AndroidClientPlugin.cs：

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using System;

public class AndroidClientPlugin : MonoBehaviour {
    private float TEST;

    private AndroidJavaClass cls_UnityPlayer;
    private AndroidJavaObject obj_Activity;
    private AndroidJavaClass cls_CompassActivity;
    // Use this for initialization
    void Start () {

        AndroidJNI.AttachCurrentThread();
        cls_UnityPlayer = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
        obj_Activity = cls_UnityPlayer.GetStatic<AndroidJavaObject>("currentActivity");
        cls_CompassActivity = new AndroidJavaClass("com.lab.Android.AndroidClientPlugin");

        cls_CompassActivity.SetStatic<String>("ServerAddressValue", "192.168.1.5");
        cls_CompassActivity.SetStatic<String>("ServerPortValue", "8881");

    }
    void OnGUI() {
        GUI.Label(new Rect(Screen.width / 2 -200, Screen.height / 2, 400,100), "x = " + TEST.ToString());
    }
    void Update()
    {
        if(cls_CompassActivity.CallStatic<bool>("GetData"))
        {
            TEST = cls_CompassActivity.CallStatic<float>("getPosX");
        }
    }
} 
```

我的 Java 脚本 AndroidClientPlugin.java：

```
package com.lab.Android;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;

import com.unity3d.player.UnityPlayer;
import com.unity3d.player.UnityPlayerActivity;

import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Looper;
import android.os.StrictMode;
import android.util.Log;
import android.content.Context;
import android.content.Intent;
import android.app.Activity;

public class AndroidClientPlugin  extends UnityPlayerActivity {

    //Server address parameters
    public  static String ServerAddressValue;
    public  static String ServerPortValue;
    //Tracker parameters
    public  static String vServerName;
    public  static String vSensorNumber;

    private  static SensorData vTaskResult;

    public static cTask BackgroundTask;

    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);

        //set thread strict mode off
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        vTaskResult = new SensorData(); 
        ServerAddressValue = "192.168.1.5";
        ServerPortValue = "8881";
        vServerName = "Tracker0";
        vSensorNumber = "0";       
        BackgroundTask = new cTask();        
    }

    @Override
    protected void onResume()
    {
        super.onResume();
    }

    @Override
    protected void onStop()
    {
        super.onStop();
    }

    public static boolean GetData()
    {    
        cTaskResult taskResult = new cTaskResult();
        taskResult = BackgroundTask.DoAsyncTask(ServerAddressValue, ServerPortValue, vServerName, vSensorNumber);
        vTaskResult = taskResult.ResultData;
        return taskResult.DataIsReady;
    }

    public static class cTaskResult
    {
        public boolean DataIsReady;
        public SensorData ResultData;
        public cTaskResult()
        {
            DataIsReady = false;
            ResultData = new SensorData();  
        }   
    }

    public static class cTask
    {       
        public cTask()
        {               
        }
        public cTaskResult DoAsyncTask(String serverAddress, String serverPort, String trackerName, String trackerSensorNumber)
        {
            cTaskResult Result = new cTaskResult();     
            GetDataTask Task;
            Task = new GetDataTask();       
            Task.execute(serverAddress, serverPort, trackerName, trackerSensorNumber, Result);          
            try {
                Result = Task.get(1, TimeUnit.SECONDS);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (TimeoutException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return Result;          
        }

        public static class GetDataTask extends AsyncTask<Object, Void, cTaskResult> 
        {
            @Override
            protected void onPreExecute() {
              super.onPreExecute();
            }

            @Override
            protected cTaskResult doInBackground(Object... params) {
                cTaskResult TMPData = new cTaskResult();
                //doing network requests
                //TMPData.DataIsReady = NetClient.getInstance().GetData((String)params[0], (String)params[1], (String)params[2],  Integer.valueOf((String)params[3]), TMPData.ResultData);
                //TMPData is a result of network operations
                TMPData.DataIsReady = true;
                TMPData.ResultData = new SensorData();

                return TMPData;
            }

            @Override
            protected void onPostExecute(cTaskResult result) {
              super.onPostExecute(result);
            }
          }
    }

    public static float getPosX()
    {
        return vTaskResult.posX;
    }   
} 
```

调试消息：

```
 09-11 12:56:05.514: E/CMarlinMediator(137): Error : MarlinMediator Failed to get TrustedTime
09-11 12:56:05.594: E/CMarlinMediator(137): Error : MarlinMediator Failed to get TrustedTime
09-11 12:56:12.184: E/Adreno200-EGL(7590): <qeglDrvAPI_eglGetConfigAttrib:484>: EGL_BAD_ATTRIBUTE
09-11 12:56:12.184: E/Adreno200-EGL(7590): <qeglDrvAPI_eglGetConfigAttrib:484>: EGL_BAD_ATTRIBUTE
09-11 12:56:12.184: E/Adreno200-EGL(7590): <qeglDrvAPI_eglGetConfigAttrib:484>: EGL_BAD_ATTRIBUTE
09-11 12:56:14.304: E/AndroidRuntime(7590): FATAL EXCEPTION: GLThread 741
09-11 12:56:14.304: E/AndroidRuntime(7590): java.lang.ExceptionInInitializerError
09-11 12:56:14.304: E/AndroidRuntime(7590):     at com.lab.Android.AndroidClientPlugin$cTask.DoAsyncTask(AndroidClientPlugin.java:128)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at com.lab.Android.AndroidClientPlugin.GetData(AndroidClientPlugin.java:79)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at com.unity3d.player.UnityPlayer.nativeRender(Native Method)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at com.unity3d.player.UnityPlayer.onDrawFrame(Unknown Source)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1462)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
09-11 12:56:14.304: E/AndroidRuntime(7590): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-11 12:56:14.304: E/AndroidRuntime(7590):     at android.os.Handler.<init>(Handler.java:121)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:607)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:607)
09-11 12:56:14.304: E/AndroidRuntime(7590):     at android.os.AsyncTask.<clinit>(AsyncTask.java:190)
09-11 12:56:14.304: E/AndroidRuntime(7590):     ... 6 more
09-11 12:56:15.194: E/CMarlinMediator(137): Error : MarlinMediator Failed to get TrustedTime
09-11 12:56:15.234: E/CMarlinMediator(137): Error : MarlinMediator Failed to get TrustedTime 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T08:21:44.497

首先，为什么要在Update函数中调用android代码？因为它将在每一帧中调用。

也许您应该放置一些标志来指示本机代码正在运行，并且不要调用它两次。

关于您的问题，据我所知，必须在 UI-Thread 中调用 AsyncTask 创建和任务运行。问题是：

1.  在 Unity`AndroidClientPlugin.GetData`的方法中调用静态方法。`Update`据我所知，这与android的UI-Thread不是同一个线程。所以你在 Unity 自己的线程中调用它，并且：
2.  您在 Unity3d 的线程中创建并运行 AsyncTask，因此会出错。

我的解决方案是（你可以试试）：

```
public static void GetData()
{    
    //this will be called on UIThread of Android
    com.unity3d.player.UnityPlayer.currentActivity.runOnUiThread(new Runnable(){
        public void run(){
            cTaskResult taskResult = new cTaskResult();
            taskResult = BackgroundTask.DoAsyncTask(ServerAddressValue, ServerPortValue, vServerName, vSensorNumber);
            vTaskResult = taskResult.ResultData;
                com.unity3d.player.UnityPlayer.currentActivity.SendMessage("YourGameObjectName", "YourMethodName", taskResult.DataIsReady);
            //return taskResult.DataIsReady;    
        }
    });

} 
```

# php - 覆盖来自 FOSUserBundle 的 propel.xml 文件

> ID：12367441
> 
> 赞同：1
> 
> 时间：2012-09-11T10:13:12.343
> 
> 标签：php, symfony, propel, fosuserbundle

我正在为我的项目扩展 FOSUserBundle，但我不希望电子邮件字段是唯一的，因此扩展了 schema.xml 以从 xml 中删除唯一标签并相应地构建模型。但是当我尝试注册时，它仍然会通过 propel.xml 检查电子邮件的唯一性。

username_canonical fos_user.username.already_used</option>--> 注册配置文件

```
<constraint name="Propel\PropelBundle\Validator\Constraints\UniqueObject">
    <option name="fields">email_canonical</option>
    <!-- PropelBundle does not support custom messages yet
    <option name="message">fos_user.email.already_used</option>-->
    <option name="groups">
        <value>Registration</value>
        <value>Profile</value>
    </option>
</constraint> 
```

我不想让那个独特的属性出现在独特的对象中。我无法覆盖它，因为它在 FOSUserBundle Dependecy 注入中加载 xml 时需要特定路径

```
$loader = new XmlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));

if ('custom' !== $config['db_driver']) {
    $loader->load(sprintf('%s.xml', $config['db_driver']));
}

foreach (array('validator', 'security', 'util', 'mailer') as $basename) {
    $loader->load(sprintf('%s.xml', $basename));
} 
```

谁能帮助我，我怎样才能删除propel.xml中定义的唯一约束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:11:53.657

我自己也在为此苦苦挣扎，但由于您发布问题的方式找到了解决方案。

关键是在您自己的包中扩展 ValidationPass 类并覆盖 process 方法。我将验证 xml 文件也复制到了资源 > 配置 > 验证下的我自己的包中，并改用了这些文件。

我所做的是：

1.  在我的包 (src/Example/ExampleBundle/ExampleBundle.php) 中：定义构建方法并使用我自己的 ValidatorPass 类
2.  将验证文件复制到我自己的包并修改它们
3.  将 ValidatorPass 文件复制到我自己的包 (src/Example/ExampleBundle/DependencyInjection/Compiler/ValidatorPass.php)
4.  在 ValidatorPass 处理方法中，我删除 FOSUserBundle xml 文件并添加我自己的

如果有不清楚的地方，我可以更详细地介绍，但我认为这应该对你有所帮助......

# c++ - boost::bind 与 boost::asio 一起。boost::bind 跟进

> ID：12367442
> 
> 赞同：0
> 
> 时间：2012-09-11T10:13:15.543
> 
> 标签：c++, boost, boost-asio, boost-bind

现在我想在前一个问题的函数中添加两个参数：[boost::bind 和 boost::asio。boost::bind 不起作用，从示例中复制](https://stackoverflow.com/questions/12364625/boostbind-together-with-boostasio-boostbind-not-working-copied-from-an-e)

**编辑：**抱歉，忘记添加 timer_result 的类型： boost::optional timer_result;

```
//my function
void CClient::setResult2(boost::optional<boost::system::error_code>* a, boost::system::error_code b,
const boost::system::error_code& error, std::size_t);

//my attempt: I'd like to set the value of the first, third and fourth parameters but not the second one
timer.async_wait(boost::bind(&CClient::setResult2, this, &timer_result, _1,boost::asio::placeholders::error,
              boost::asio::placeholders::bytes_transferred)); 
```

_1 的含义是否与上一个问题不同？谢谢。

**错误：**

```
Description     Resource        Path    Location        Type  
required from ‘void boost::asio::basic_deadline_timer<Time,
TimeTraits, TimerService>::async_wait(WaitHandler&&) [with WaitHandler
= boost::_bi::bind_t<void, boost::_mfi::mf4<void, CClient, boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >; Time =
boost::posix_time::ptime; TimeTraits =
boost::asio::time_traits<boost::posix_time::ptime>; TimerService =
boost::asio::deadline_timer_service<boost::posix_time::ptime,
boost::asio::time_traits<boost::posix_time::ptime> >]’   remote_server
line 501, external location:
/usr/include/boost/asio/basic_deadline_timer.hpp   C/C++ Problem
invalid user-defined conversion from ‘const boost::system::error_code’
to ‘unsigned int’ [-fpermissive] remote_server           line 525,
external location: /usr/include/boost/bind/bind.hpp   C/C++ Problem  
required from ‘void boost::_bi::list5<A1, A2, A3, A4,
A5>::operator()(boost::_bi::type<void>, F&, A&, int) [with F =
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>; A = boost::_bi::list1<const boost::system::error_code&>; A1 =
boost::_bi::value<CClient*>; A2 =
boost::_bi::value<boost::optional<boost::system::error_code>*>; A3 =
boost::arg<1>; A4 = boost::arg<1> (*)(); A5 = boost::arg<2> (*)()]’   
remote_server           line 525, external location:
/usr/include/boost/bind/bind.hpp   C/C++ Problem size of array is
negative       remote_server           line 37, external location:
/usr/include/boost/bind/arg.hpp     C/C++ Problem make: ***
[src/CClient.o] Error 1       remote_server                   C/C++
Problem   required from ‘void boost::asio::detail::binder1<Handler,
Arg1>::operator()() [with Handler = boost::_bi::bind_t<void,
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >; Arg1 =
boost::system::error_code]’     remote_server           line 46,
external location: /usr/include/boost/asio/detail/bind_handler.hpp    
C/C++ Problem   required from ‘boost::_bi::bind_t<R, F,
L>::result_type boost::_bi::bind_t<R, F, L>::operator()(const A1&)
[with A1 = boost::system::error_code; R = void; F =
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>; L = boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()>;
boost::_bi::bind_t<R, F, L>::result_type = void]’    remote_server    
line 47, external location: /usr/include/boost/bind/bind_template.hpp 
C/C++ Problem   required from ‘void
boost_asio_handler_invoke_helpers::invoke(Function&, Context&) [with
Function = boost::asio::detail::binder1<boost::_bi::bind_t<void,
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >,
boost::system::error_code>; Context = boost::_bi::bind_t<void,
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >]’
remote_server           line 39, external location:
/usr/include/boost/asio/detail/handler_invoke_helpers.hpp   C/C++
Problem   required from ‘void
boost::asio::asio_handler_invoke(Function, ...) [with Function =
boost::asio::detail::binder1<boost::_bi::bind_t<void,
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >,
boost::system::error_code>]’       remote_server           line 64,
external location: /usr/include/boost/asio/handler_invoke_hook.hpp    
C/C++ Problem   required from
‘boost::asio::detail::wait_handler<Handler>::wait_handler(Handler&)
[with Handler = boost::_bi::bind_t<void, boost::_mfi::mf4<void,
CClient, boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >]’  
remote_server           line 39, external location:
/usr/include/boost/asio/detail/wait_handler.hpp     C/C++ Problem  
required from ‘static void
boost::asio::detail::wait_handler<Handler>::do_complete(boost::asio::detail::io_service_impl*,
boost::asio::detail::operation*, const boost::system::error_code&,
std::size_t) [with Handler = boost::_bi::bind_t<void,
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >;
boost::asio::detail::io_service_impl =
boost::asio::detail::task_io_service; boost::asio::detail::operation =
boost::asio::detail::task_io_service_operation; std::size_t = unsigned
int]’ remote_server           line 69, external location:
/usr/include/boost/asio/detail/wait_handler.hpp     C/C++ Problem
make: *** No rule to make target `all'.                         C/C++
Problem   required from ‘void
boost::asio::deadline_timer_service<TimeType,
TimeTraits>::async_wait(boost::asio::deadline_timer_service<TimeType,
TimeTraits>::implementation_type&, WaitHandler&&) [with WaitHandler =
boost::_bi::bind_t<void, boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >; TimeType =
boost::posix_time::ptime; TimeTraits =
boost::asio::time_traits<boost::posix_time::ptime>;
boost::asio::deadline_timer_service<TimeType,
TimeTraits>::implementation_type =
boost::asio::detail::deadline_timer_service<boost::asio::time_traits<boost::posix_time::ptime>
>::implementation_type]’ remote_server           line 138, external location: /usr/include/boost/asio/deadline_timer_service.hpp C/C++
Problem   required from ‘void
boost::asio::detail::deadline_timer_service<Time_Traits>::async_wait(boost::asio::detail::deadline_timer_service<Time_Traits>::implementation_type&,
Handler) [with Handler = boost::_bi::bind_t<void,
boost::_mfi::mf4<void, CClient,
boost::optional<boost::system::error_code>*,
boost::system::error_code, const boost::system::error_code&, unsigned
int>, boost::_bi::list5<boost::_bi::value<CClient*>,
boost::_bi::value<boost::optional<boost::system::error_code>*>,
boost::arg<1>, boost::arg<1> (*)(), boost::arg<2> (*)()> >;
Time_Traits = boost::asio::time_traits<boost::posix_time::ptime>]’
remote_server           line 180, external location:
/usr/include/boost/asio/detail/deadline_timer_service.hpp  C/C++
Problem   required from here    CClient.cpp     /remote_server/src    
line 102        C/C++ Problem 
```

**信息：**

```
Description     Resource        Path    Location        Type candidate is: 
boost::system::error_code::operator boost::system::error_code::unspecified_bool_type() const <near match>
remote_server           line 355, external location:
/usr/include/boost/system/error_code.hpp   C/C++ Problem   no known conversion for implicit ‘this’ parameter from ‘boost::system::error_code::unspecified_bool_type {aka void (*)()}’ to ‘unsigned int’      remote_server           line 355, external
location: /usr/include/boost/system/error_code.hpp   C/C++ Problem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:17:10.110

`async_wait()`接受具有此签名的函数（来自 Boost.ASIO 文档）：

```
void handler(
  const boost::system::error_code& error // Result of operation.
); 
```

您的绑定会导致功能类似的事情，其签名类似于：

```
void bound_setResult2(_1, _error, _bytes_transferred); 
```

bind() 调用中的每个占位符都映射到绑定结果中的一个参数。你有三个占位符。当然编译不了。但是你有一个更大的概念问题。

您似乎认为截止时间计时器知道正在进行的 I/O。它不是。处理程序仅在计时器经过或取消时才被调用。（并且错误代码表明它是否被取消。）不应期望计时器处理程序知道#bytes 已传输。由您的 I/O 处理程序（而不是计时器过期处理程序）来跟踪该信息。

可能，您真正想要的计时器处理程序中的所有代码都是调用的代码， `port.cancel()`然后`setResults2()`——它应该是 I/O 的处理程序，而不是计时器的处理程序——你处理取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:16:55.583

您的方法中有两个错误代码，bind 中只有一个错误占位符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T12:29:14.897

`placeholders::error``_1`是,`placeholders::bytes_transferred`实际上是 的别名`_2`，所以你不能再放`_1`了。

将您的附加参数移动到第三个：并作为第三个参数`void CClient::setResult2(const boost::system::error_code& error, std::size_t, boost::optional<boost::system::error_code>* a)`传递。`&timer_result`像这样：

`bind(&CClient::setResult2, this, _1, _2, &timer_result)`.

（我在这里使用了较短的占位符，但如果您喜欢，可以用较长的 asio 替换它们。）

# iphone - 如何处理覆盖iphone中的上传数据？

> ID：12367447
> 
> 赞同：1
> 
> 时间：2012-09-11T10:13:30.200
> 
> 标签：iphone, ios5, file-upload, overwrite

我已经在本地写了一些日志。当日志计数达到 200 时，只有我将日志转换为 JSON 以上传到服务器。它工作得很好。

我的想法是我也有一个刷新按钮，刷新按钮控制剩余的数据或日志，这意味着如果日志计数为 240。前 200 个日志自动上传到服务器，然后剩余的 40 个日志手动上传到服务器，这意味着当用户单击flus按钮，它将转换为JSON上传到服务器。

如果用户在查看加载时单击刷新按钮，则上传 200 条日志，然后覆盖 200 条日志 + 40 条要上传的日志。我该如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:15:14.763

//URLConnection类创建数据自动上传时取消连接的方法

```
NSURLConnection *Connection;
-(void)cancelConnection{
if (connection)
{
    [connection cancel];
    connection = nil;
}

} 
```

//在您的按钮操作中调用此方法

```
-(IBAction)flushButtonAction:(id)sender{

[urlConnection cancelConnection];
 //call your upload method again

} 
```

当您的数据上传到服务器以停止该连接然后创建连接以上传剩余数据时，此按钮操作应该有助于.. 它似乎避免了覆盖现有数据。

感谢每一个人

# android - crash in the load of android application

> ID：12367462
> 
> 赞同：0
> 
> 时间：2012-09-11T10:14:15.393
> 
> 标签：android

I get a crash in the load phase of my application. here after the source code:

**DiscoveryMain.java**

```
package com.heeere.androiddnssd.discovery;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class DiscoveryMain extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button = (Button)this.findViewById(R.id.button);

        button.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
                    startActivity(browserIntent);
                }
            });

    }    /** Called when the activity is first created. */

} 
```

**main.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent" 
              android:orientation="vertical"
              android:scrollbars="vertical"
              android:fadeScrollbars="true"
              android:isScrollContainer="true">
    <TextView  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:text="Hello World, Android Discovery" />
    <TextView 
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello, I am a TextView" />
    <Button 
            android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello, I am a Button" />
    </LinearLayout>
</ScrollView> 
```

**Manifest.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.heeere.androiddnssd.discovery">
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>

    <application>
         <activity android:name=".MainTest" android:label="DiscoveryActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**LogCat**

```
09-11 11:21:18.186: W/dalvikvm(3415): threadid=3: thread exiting with uncaught exception (group=0x4001e170)
09-11 11:21:18.196: E/AndroidRuntime(3415): Uncaught handler: thread main exiting due to uncaught exception
09-11 11:21:18.206: E/AndroidRuntime(3415): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.heeere.androiddnssd.discovery/com.heeere.androiddnssd.discovery.MainTest}: java.lang.ClassNotFoundException: com.heeere.androiddnssd.discovery.MainTest in loader dalvik.system.PathClassLoader@44798cd0
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.os.Looper.loop(Looper.java:123)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.app.ActivityThread.main(ActivityThread.java:4363)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at java.lang.reflect.Method.invokeNative(Native Method)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at java.lang.reflect.Method.invoke(Method.java:521)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at dalvik.system.NativeStart.main(Native Method)
09-11 11:21:18.206: E/AndroidRuntime(3415): Caused by: java.lang.ClassNotFoundException: com.heeere.androiddnssd.discovery.MainTest in loader dalvik.system.PathClassLoader@44798cd0
09-11 11:21:18.206: E/AndroidRuntime(3415):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
09-11 11:21:18.206: E/AndroidRuntime(3415):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
09-11 11:21:18.206: E/AndroidRuntime(3415):     ... 11 more 
```

what is the proble in my code ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:29:20.413

do you have this in your manifest?

```
 <activity
            android:name=".DiscoveryMain"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

**update:**

What is your start Activity? DiscoveryMain or MainTest? please add the correct one

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:37:21.943

Please Use below..

```
<application>
     <activity android:name=".DiscoveryMain">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
</application> 
```

Happy coding.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:40:54.703

I fix the problem. inspired from ***breceivemail*** in the Manifest file Just use

```
<activity android:name=".DiscoveryMain" android:label="DiscoveryActivity"> 
```

instead of

```
<activity android:name=".MainTest" android:label="DiscoveryActivity"> 
```

# php - CakePHP2.0 如何在组件内使用函数？

> ID：12367466
> 
> 赞同：0
> 
> 时间：2012-09-11T10:14:23.227
> 
> 标签：php, oop, cakephp

这可能是一个非常菜鸟的问题，但我似乎无法在任何地方找到答案。是否可以在一个组件中创建自己的函数并在同一个组件中调用它？

例子：

```
Class myComponent extends Component{

 public function doSomething(){

  doThis();

  $b = $a + 2;

  return $b;

 }

 function doThis(){

  $a = 0;

 }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:19:57.980

您在这里混淆了几件事。

1.  您通常可以毫无问题地创建这样的***对象方法。***您必须将它们称为对象方法：

    ```
    public function doSomething() {
        $this->doThis();
        ...
    } 
    ```

2.  只是调用`doThis()`不会神奇地`$a`在调用范围内创建变量。变量将在内部创建`doThis`并包含在那里。这是一件好事。您必须显式地`return`从方法中获取值以使其可用：

    ```
    public function doSomething() {
        $a = $this->doThis();
        ...
    }

    protected function doThis() {
        return 0;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:18:49.327

变量范围意味着当函数完成时函数`$a`内部会丢失，但你可以这样做：`doThis`

```
Class myComponent extends Component
{
    public function doSomething()
    {
        $a=$this->doThis();
        $b = $a + 2;
        return $b;
    }

    function doThis()
    {
        $a = 0;
        return $a;
    }

} 
```

我可能会使用这样的类属性：

```
Class myComponent extends Component
{
    public $a;
    public function doSomething()
    {
        $this->doThis();
        $b = $this_.a + 2;
        return $b;
    }

    public function doThis()
    {
        $this->a = 0;
    }

} 
```

类属性是通过函数更新信息的好方法。整个班级在任何地方都可以访问它们。如果您通过`public`if 声明它可以直接通过实例在类外部使用，如下所示：

```
$var=new myComponent();
// Crete a new instance of the object.
echo $var->a; // Outputs the value. 
```

或者，您可以使用`private`在函数中对对象本身可见但对外部世界不可见的属性（好吧，无论如何都无法访问）。

# c# - WebBrowser 控件获取表单操作

> ID：12367468
> 
> 赞同：1
> 
> 时间：2012-09-11T10:14:26.550
> 
> 标签：c#, winforms, forms, webbrowser-control

我有一个带有 WebBrowser 控件的 Windows 窗体。我要去一个页面，我想要该页面上的表单操作。

所以当页面的 HTML 看起来像这样时：

```
<!doctype html>
<head>
    <title>testing</title>
</head>
<body>
    <form action="http://www.testing.nl/form.php?hoi=true" >

    </form>
</body>
</html> 
```

我想`http://www.testing.nl/form.php?hoi=true`用 C# 接收。我怎样才能做到这一点？

**-注意**- URL是假的，只是为了显示我想要的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:23:56.440

这将遍历网页中的所有表单并提取`action`每个表单的属性：

```
var actions = new List<string>();
if (webBrowser1.Document != null)
{
    actions.AddRange(from HtmlElement form in webBrowser1.Document.Forms select form.GetAttribute("action"));
} 
```

您必须确保页面已完全加载。

# java - 以变 量名作为输入并输出其值 - Java

> ID：12367469
> 
> 赞同：0
> 
> 时间：2012-09-11T10:14:31.670
> 
> 标签：java, variables

我需要创建一个方法，将变量的名称作为输入，搜索类，并输出该变量指向的值。但是，正如您可能已经猜到的那样，我遇到了问题：

```
public String myMethod(String varname) {
    return varname;
} 
```

如您所见，上述所有操作都是返回输入字符串。有没有办法让它做其他事情？

编辑：对于那些要求解释的人，这里是：

假设我有以下代码：

`String foo = "foo"; String bar = "bar";`

我想创建一个采用变量名称并返回其值的方法。因此，如果我使用上述方法并编写`myMethod(foo)`，输出将是“foo”；同样，我想`myMethod(bar)`给“酒吧”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:23:22.413

使用[Java**反射**API](http://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html)。例如：

```
private String foo = "foo text";
private String bar = "some text";

public String myMethod(String varname) throws Exception {
  Class<?> c = this.getClass();
  Field field = c.getDeclaredField(varname);
  Object fieldValue = field.get(this);
  return fieldValue.toString();
}

// myMethod("foo") returns "foo text"
// myMethod("bar") returns "some text" 
```

**[演示](http://ideone.com/AQFEY)**。

### 参考：

*   [反射 API](http://docs.oracle.com/javase/tutorial/reflect/TOC.html)
*   [获取和设置字段值](http://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html)

# javascript - javascript RegExp 的奇怪行为：相同的正则表达式产生不同的结果

> ID：12367471
> 
> 赞同：2
> 
> 时间：2012-09-11T10:14:43.207
> 
> 标签：javascript, regex

> **可能重复：**
> [为什么在 Javascript 中带有全局标志的 RegExp 会给出错误的结果？](https://stackoverflow.com/questions/1520800/why-regexp-with-global-flag-in-javascript-give-wrong-results)

```
var reg1 = new RegExp('^http:\/\/abc\.com\/\d+$');
var reg2 = /^http:\/\/abc\.com\/\d+$/;

var url = 'http://abc.com/1657706754';

// expected: true, actual: false
document.write(reg1.test(url));
document.write('<br/>');
// expected: true, actual: true
document.write(reg2.test(url)); 
```

​见上面的代码示例。`reg1`和`reg2`是相同的正则表达式，但为什么`test`结果不同？我在 Chrome 中测试它。这是在线演示：http: [//jsfiddle.net/DzfWC/](http://jsfiddle.net/DzfWC/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:17:25.943

当您将其用作文字字符串时，您必须`\` 使用以下命令进行转义`\\`：

```
var reg1 = new RegExp('^http:\\/\\/abc\\.com\\/\\d+$'); 
```

# sql-server - 将列值连接成单个字符串的意外结果

> ID：12367472
> 
> 赞同：0
> 
> 时间：2012-09-11T10:14:48.820
> 
> 标签：sql-server, concatenation, coalesce

我看到了很多为此目的使用 COALESCE 和其他“方法”的示例。这里是其中之一：

```
 @result nvarchar(1024)
     SELECT @result = COALESCE(@result + ',', '') + column_name
     FROM some_table 
```

预期：[价值，价值，价值]

结果：[价值，价值，价值]

有没有人有这个问题，或者我必须在其他事情上找到我的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:20:54.800

听起来您的`column_name`值中可能有空格。您应该使用[`LTRIM()`](http://msdn.microsoft.com/en-us/library/ms177827.aspx)and[`RTRIM()`](http://msdn.microsoft.com/en-us/library/ms178660.aspx)周围的`column_name`来删除任何空格。：

```
declare @result nvarchar(1024)

SELECT @result = COALESCE(@result + ',', '') + ltrim(rtrim(col1))
FROM yourtable

select @result 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/62e96/1)

或者您可以[`REPLACE()`](http://msdn.microsoft.com/en-us/library/ms186862.aspx)在最终结果上使用来删除空格：

```
declare @result nvarchar(1024)

SELECT @result = COALESCE(@result + ',', '') + col1
FROM yourtable

select replace(@result, ' ', '') 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/62e96/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:16:50.217

```
@result nvarchar(1024)
SELECT @result = COALESCE(ltrim(rtrim(@result)) + ',', '') + ltrim(rtrim(column_name))
FROM some_table 
```

# c++ - 如何使用默认和删除的函数 C++

> ID：12367473
> 
> 赞同：2
> 
> 时间：2012-09-11T10:14:48.520
> 
> 标签：c++, c++11

我最近尝试了解 C++ 11 中的默认和删除函数，并编写了下面的示例代码。当我尝试运行时，它说：

> 错误 C2065：“默认”：未声明的标识符

编码 ：

```
#include "stdafx.h"
#include <iostream>
#include <string>

using namespace std;

struct A
{
    int age;

    A(int x): age(x){};
    A() = default;

};

int _tmain(int argc, _TCHAR* argv[])
{
    A test(10);
    cout << test.age << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T10:20:48.100

您似乎正在使用 Microsoft Visual Studio。很抱歉，即使在新版本 VC11 中，Microsoft 编译器也不允许这种新语法。

[在此处](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)查看可用功能列表。您将看到*Defaulted 和 deleted 函数*尚不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:18:01.863

带有 MSVC++ 编译器的 Visual Studio[不支持](http://msdn.microsoft.com/en-us/library/hh567368.aspx)默认函数和已删除函数。你需要使用像[MinGW 的](http://www.mingw.org/)G++ 这样的东西。

# haskell - wx 0.90.0.1 无法在 Haskell 平台 2012.2.0.0 (WinXP) 上安装

> ID：12367480
> 
> 赞同：5
> 
> 时间：2012-09-11T10:15:12.373
> 
> 标签：haskell, wxwidgets

我尝试使用“cabal install wx”在 Haskell Platform 2012.2.0.0 上安装 WX 0.90.0.1，但得到以下结果：

```
Configuring wxc-0.90.0.4...
setup.exe: wx-config: does not exist
cabal: Error: some packages failed to install:
wx-0.90.0.1 depends on wxc-0.90.0.4 which failed to install.
wxc-0.90.0.4 failed during the configure step. The exception was:
ExitFailure 1
wxcore-0.90.0.3 depends on wxc-0.90.0.4 which failed to install. 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T07:46:18.610

我在使用 wxc-0.90.0.4 时遇到了同样的问题，但在构建过程中失败了，发现错误已在wxHaskell的[Github 存储库中得到纠正。](https://github.com/jodonoghue/wxHaskell/commit/79373da951f14ae8dc08c35aa16b67b0fa3bc84a#wxc/src/cpp/eljpen.cpp)

按照 Satvik 的建议，可以通过解压 wxc 来修复该[错误](https://stackoverflow.com/users/750603/satvik)：`cabal unpack wxc`

然后根据上面的 Github 存储库修改几行代码，然后在 wxc 目录中执行：`cabal install`

之后，您应该能够：`cabal install vx`

作为替代使用针对 wxWidgets 2.8 构建的版本：`cabal install wx-0.13.2.3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T16:58:19.913

我做了以下事情：

1.  `sudo apt-get install libwxgtk2.9-0`

2.  `sudo apt-get install libwxgtk2.9-dev`

3.  `cabal install wx-0.13.2.3`

没关系。

# matlab - 从 GUI 传递的参数

> ID：12367482
> 
> 赞同：0
> 
> 时间：2012-09-11T10:15:18.827
> 
> 标签：matlab, matlab-guide

我有一个可以以各种不同方式运行的函数，具体取决于代码顶部设置的 42 个常量的状态。到目前为止，如果我想在不同的条件下运行我的函数，我只需打开 MATLAB 代码并调整代码开头的常量。

有 42 个常量需要跟踪，而且我发现自己在进行实验时会意外打开某些开关。显而易见的解决方案是构建一个 GUI，可以在一个地方直观地看到我的输入。GUI 只是一个参数设置窗口，底部有一个大的“Go”按钮，它接受输入（全部 42 个！）并将它们传递给我的主函数。

我遇到了 GUIDE，我用它来构建一个不错的 GUI。我设法获得了一个按钮来启动我的函数，但我正在努力将实际变量输入到文本框和复选框状态以传递给主函数。

我知道它与“回调”有关，但文档不清楚，似乎更关心构建其中变量调整当前窗口内容的 GUI。

作为一个基本示例，我正在使用一个复选框。我知道当我单击一个复选框时，函数 checkbox1_Callback(hObject, eventdata, handles) 会执行。我已修改此函数，使其返回一个变量“状态”，该变量在函数期间以下列方式设置：

```
state = get(hObject,'Value') 
```

每当我单击复选框时，都会弹出一条消息说状态已更改。当然，一旦发生这种情况，函数就结束了，变量也被销毁了。似乎没有任何方法可以在其他地方接收变量。.m 代码在任何地方都不包含对 checkbox1_Callback 函数的调用，所以我不知道在哪里可以接收输入。

我曾希望我可以在单击“开始”按钮时调用 checkbox1_Callback 函数，但我不知道将哪些参数传递给回调。

显然我在这里遗漏了一些基本的东西，但是文档并没有让这变得容易！任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:39:35.050

You will probably only need one callback - on the "GO" button.

It sounds like you've already sorted this out - so you probably have a function like:

```
function go_Callback(hObject, eventdata, handles) 
```

which gets executed when you press the "Go" button. If you don't have it, create it from GUIDE by right-clicking the "Go" button and selecting "View Callbacks"->"Callback".

From here, you can 'pull' the data from other GUI components. For example, if you have a text box called "threshold":

```
threshold = get(handles.threshold, 'String'); 
```

Similarly, for a checkbox:

```
checked = get(handles.my_checkbox, 'Value'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:01:04.550

我没有使用 GUIDE，所以我不能马上回答你的问题。但是，我会考虑在普通的 MATLAB 函数中“手动”编程开始屏幕。然后，您可以在显示 GUI 的函数中声明所有 ui 组件。GO 按钮的回调被声明为本地函数，因此它可以访问所有 ui 控件。当按下 GO 时，您只需获取 uicontrols 的状态并运行您的函数。

```
function setup_screen

init_figure = 1;
h_fig =   figure(...
    'BackingStore', 'on',...
    'DoubleBuffer','on',...
    'Render', 'zbuffer',...
    'Name', 'TecMod - Process Manager',...
    'NumberTitle','off',...
    'MenuBar','none',...
    'DockControls', 'off',...
    'Toolbar','none',...
    'units', 'characters',...
    'Position',[10 10 30 20],...
    'Units','characters');

hp_config = uipanel(...
    'Title','Setup',...
    'units', 'characters',...
    'Position',[1 1 28 18]);

hu_info = uicontrol('parent', hp_config, 'style','pushbutton',...
    'units','characters',  ...
    'TooltipString', 'Run the function',...
    'tag', 'hu_info',...
    'String', 'GO',...
    'Position', [1 1 25 3],...
    'Callback', @buttonCallback);

hu_choice = uicontrol('parent', hp_config, 'Style','checkbox',...
        'units', 'characters',...
        'Position',[1 10 25 3],...
        'String', 'Checkbox1',...
        'Value', 1);

    function buttonCallback(src,evt)
        if src==hu_info
            display('event from GO button');
            % get ui controls states
            display(['checkbox state ' num2str(get(hu_choice, 'Value'))]);
            % call your function with chosen parameters
        end
    end
end 
```

# scala - ScalaIDE - 一种以冒号结尾的奇怪方法

> ID：12367488
> 
> 赞同：4
> 
> 时间：2012-09-11T10:15:32.917
> 
> 标签：scala, syntax, type-inference

我想到了一个想法，为了为对象创建一个前缀方法，我可以`:`在方法名称的末尾使用，因此，我写道：

```
def aaa: {
} 
```

它编译得很好！但是，这没有用，所以我想让方法返回一些东西，所以，不确定，我写：

```
def aaa: = {
} 
```

错误！

```
- identifier expected but '=' found.
- not found: type <error> 
```

好的，我知道编译器会中断`: =`，我变得好奇并尝试：

```
def aaa: {
  println("wow")
} 
```

又报错了！

```
illegal start of declaration (possible cause: missing `=' in front of current method body) 
```

然后我试试这个：

```
val a = aaa 
```

它说（悬停在`aaa`）`aaa`签名是`def aaa: AnyRef`，所以我尝试：

```
def aaa: {
  Global
} 
```

哪里`Global`是`object`。还是错误。所以，我的问题是：为什么允许这种语法？我不能让它像前缀方法一样工作，我不能用这个方法来产生副作用，我不能让它返回任何东西。为什么它首先允许我这样写？

**更新：**

现在我试试这个：

```
def aaa: {} = {
  Global
} 
```

它有效。所以看起来像`{}`表示`AnyRef`。开始感觉我仿佛置身于 JavaScript 仙境。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T10:35:37.143

您会收到这些错误，因为方法名称末尾的冒号意味着您要指定返回类型。如果你不给，编译器会抱怨。有了`{}`它就可以了，因为你给了一个类型，在这种情况下是一个空的结构类型，它基本上与`AnyRef`. 有一些规则，当您实际上被允许在方法名称的末尾添加冒号时，afaik 该方法只能由非字母数字字符组成。所以`def +:(x:Int)`没关系，`def foo:(x:Int)`导致错误。但我对此并不确定。以冒号结尾的方法也是右关联的。

# asp.net - Asp.NET 页面重定向问题

> ID：12367490
> 
> 赞同：0
> 
> 时间：2012-09-11T10:15:45.957
> 
> 标签：asp.net

我已经设置`defaultUrl`为

```
<forms loginUrl="Home/Login.aspx" defaultUrl="Items/Default.aspx" name="MySite" timeout="120" slidingExpiration="true" requireSSL="false"/> 
```

问题是，当我第一次登录时，它会将我带到该`defualtUrl`页面，但是一旦我单击注销按钮，它就会将我注销，如果我再次登录，它将带我去`Home/Default.aspx`。我正在使用`FormAuthentication`。我也尝试过以下设置

```
<system.webServer>
    <defaultDocument enabled="true">
      <files>
        <add value="Items/Default.aspx"/>
      </files>
    </defaultDocument>
  </system.webServer> 
```

我不知道它发生的原因。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:27:58.013

是否`Items/Default.aspx`需要对用户进行身份验证才能访问它？如果是这样，它可能是这种行为的原因。

`Items/Default.aspx`您可以通过在 web.config 中执行此操作来允许匿名用户访问：

```
<location path="Items/Default.aspx">
<system.web>
    <authorization>
        <allow users="*"/>
    </authorization>
</system.web>
</location> 
```

**更新**：当您找到另一种选择时，这可能是您的问题的解决方法：

在您可以检查用户是否实际经过身份验证并相应地重定向它们`Page_Load`：`Home/Default.aspx`

```
if (!this.User.Identity.IsAuthenticated)
{
    Response.Redirect("Items/Default.aspx");
} 
```

我希望这会有所帮助。

# c - 如何消除与 Epoch 时间的时间差异？

> ID：12367492
> 
> 赞同：0
> 
> 时间：2012-09-11T10:15:49.070
> 
> 标签：c, time, epoch

我试图从它的 inode 找出文件的创建时间。我已经使用 gmtime() 转换为正常时间。但与 ls -l 命令显示的时间相差 6 小时 30 分钟。

为什么会这样？如何消除这种差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:18:36.840

来自**man gmtime**

```
 The  gmtime()  function  converts  the  calendar  time timep to broken-down time representation, expressed in Coordinated Universal Time
   (UTC).

   ...............

   The localtime() function converts the calendar time timep to broken-time representation, expressed  relative  to  the  user's  specified
   timezone. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:22:32.523

我假设你正在使用linux。在 unix 中不存储创建时间；您只有上次访问时间 (atime)、上次修改内容时间 (mtime) 和上次修改 inode 时间 (ctime)。

因此，检查您从 inode 检索的内容并与 ls -l 进行比较

# cakephp - 将 CakePHP 实现到正在运行的项目中

> ID：12367494
> 
> 赞同：1
> 
> 时间：2012-09-11T10:16:00.090
> 
> 标签：cakephp

我有一个旧的运行项目，它是用 HTML、CSS、PHP、MySQL、JS、AJAX (jQuery) 开发的，但没有 MVC、ORM 等。只有 HTML/CSS/JS 和 PHP 是分开的。我目前正在从事这个项目，并不时对软件进行一些改进。由于系统每天都在使用，我想逐个模块地介绍CakePHP，逐步提高质量。

拥有 MVC、ORM 等将使维护效率更高，但我没有时间一次重写所有内容。我认为除了登录过程（确保使用 CakePHP 的例程登录时用户在使用旧系统的模块时登录）和文件链接之外不会有很多问题。

你怎么看待这件事？还有更多障碍吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:25:38.103

我不羡慕你:-(

您*可以*将整个现有 Web 应用程序放到 /app/webroot 中，它应该从那里运行，然后通过创建控制器和视图逐渐“蛋糕化”部分，但是，这个项目应该是 a) '废弃它并执行它正确'或b）'它可以正常工作，只需维护它'

如果是我，我会选择 b) 选项，或者尝试说服当权者应该从头开始重写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:30:36.510

好吧...如果您已经有应用程序（不是 MVC）并且您想将其转换为 CakePHP，您将不得不考虑一些事情...

> 1.) 正如你所难过的那样，记录用户将是一个问题，但有 AuthComponent。
> 
> 2.) 你将不得不对某些事情有不同的想法，因为这是 MVC。
> 
> 3.) 你所有的验证都应该在模型中。
> 
> 4.) 授予对某些页面的访问权限将使用 AuthComponent 中的 isAuthorized 函数完成。

我认为对你来说最好的方法是下载一个新的 CakePHP 并从模型开始。做所有的验证。然后创建控制器和一些放在组件中的“全局”代码。

然后做你的看法。

嗯...使用**Bake 脚本**会容易很多。如果您有任何其他问题或需要帮助，请随时在这里提问或给我发送电子邮件（在我的个人资料中提供）。

我认为将 PHP 应用程序转换为 MVC (CakePHP) 是一个非常好的主意。以后更改，添加一些功能和调试要容易得多。:)

祝你好运！

# java - 根据参数化 Junit 测试用例中的不同参数更改断言行为

> ID：12367496
> 
> 赞同：0
> 
> 时间：2012-09-11T10:16:16.707
> 
> 标签：java, junit, junit4

是否可以根据 @Parameters 方法的参数更改断言行为。

```
Class abcTest
{
  ..
  @Parameters
  public static Collection<Object[]> testParameters()
  {
        return Arrays.asList(new Object[][] {
        {1},{2} 
        });
  }

  ..
  @Test
  public void test()
  {
    ...
    if(num == 1) { assertTrue(..); }
    if(num == 2) { assertFalse(..); }
    ...
  }
} 
```

是否可以完全按照我们定义参数的方式定义断言行为？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:39:02.133

In the simplest case you can pass expected values as parameters and use them in assertions, as shown in [javadoc](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runners/Parameterized.html).

In more complex cases you need to encapsulate assert logic into objects and pass them as parameters.

If you need different assertions for the same values you can use `assertThat()` and `Matcher<T>`:

```
class abcTest
{
  @Parameters
  public static Collection<Object[]> testParameters()
  {
        return Arrays.asList(new Object[][] {
            {1, CoreMatchers.is(true)},
            {2, CoreMatchers.is(false)} 
        });
  }

  ..
  @Test
  public void test()
  {
      ...
      assertThat(value, matcher);
  }
} 
```

Otherwise, if different parameters need completely different assertions you can pass them as `Runnable`s.

However, it may be not a good idea to use parameterized tests in this case - if you need completely different assertions for different cases it can be more elegant to create separate test methods for these cases, extracting their commons parts into helper methods:

```
@Test
public void shouldHandleCase1() {
   handleCase(1);
   assertTrue(...);
}

@Test
public void shouldHandleCase2() {
   handleCase(2);
   assertFalse(...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:02:20.990

最近我开始了[zohhak](https://github.com/piotrturski/zohhak)项目。它让你写

```
@TestWith({
    "1, true",
    "2, false"
})
public void test(int value, boolean expectedResult) {
  assertThat(...).isEqualTo(expectedResult);
} 
```

# linux - 使用 torrent 备份 vhd

> ID：12367506
> 
> 赞同：1
> 
> 时间：2012-09-11T10:16:49.560
> 
> 标签：linux, backup, vhd, utorrent

嗨，这是一个问题，它可能是多余的，但我有一种预感，有一个工具可以解决这个问题 - 或者应该有，如果没有，我可能会成功 - 或者我在找错树，在这种情况下是正确的我的想法：

但我的问题是：我正在寻找某种方法，每周一次通过仅中等速度的 Internet 连接将大型虚拟磁盘驱动器从服务器迁移，这是一种必须能够限制带宽的解决方案，因为 Internet 连接是一直在使用。

我想了想，问题很熟悉：可以移动的大文件也可以被节流，可以很容易地在断开/重新连接/大型等情况下存活下来——我熟悉的唯一能完美做到的解决方案是**torrent**。

有没有办法自动战略性地制作种子并自动将它们远程“发送”到客户端下载列表？我在 Windows Hyper-V 主机中工作，但我只为客人使用 Linux，我可以轻松地制作一个客人来进行复制，所以认为这是一个 Windows 或 linux 问题。

**PS：当我移动它们时，vhd 是来宾服务器的“离线”副本 - 仅将它们视为 20-30gig dum 文件。**

**PPS：我宁愿避免花钱**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:52:12.210

Bittorrent 是一个很好的选择，因为它可以很好地处理增量更新和连接丢失后的自动恢复。

要自动创建 .torrent 文件，请使用`btmakemetainfo`原始 bittorrent 包中的脚本，或众多重写中的一个（bittornado，...）——重要的是它是可编写脚本的。您应该注意在 .torrent 文件中设置“禁用 DHT”标志。

您将需要找到一个允许您跟踪具有任意哈希值的文件的跟踪器（因为您事先不知道这些）；您可以使用现有的开放式跟踪器，也可以设置自己的跟踪器，但应注意适当限制客户端 IP 范围。

这减少了传输 .torrent 文件的问题——我通常`rsync`通过 ssh 从 cronjob 使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:21:29.067

对于点对点传输，洪流是一种昂贵的带宽使用。对于 1:n 传输来说，负载分配允许客户端的上传带宽被其他客户端共享，因此带宽成本被摊销，每个人都获得...

听起来您只有一个客户，在这种情况下，我会考虑另一种解决方案...

[wget](http://go2linux.garron.me/limit_rate_resume_downloads_wget)允许节流，并且如果 FTP/http 服务器支持恢复传输，则可以从中断的地方恢复传输......这就是我将使用的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T04:50:56.230

您可以为此使用 rsync ( [http://linux.die.net/man/1/rsync](http://linux.die.net/man/1/rsync) )。在 man 中搜索 --partial 选项，这应该可以解决问题。当传输中断时，未完成的结果（文件或目录）被保留。~~**当您从本地发送到远程位置**~~~~（从未检查过）时，我不能 100% 确定它是否适用于 telnet/ssh 传输，但它应该适用于远程端的 rsync 守护进程。~~ **您还可以使用它在两个本地存储位置进行同步。**

 **```
rsync --partial [-r for directories] source destination 
```

编辑：刚刚用 ssh 确认了划掉的声明**

# php - 更好的文件命名约定或结构

> ID：12367508
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:16:51.730
> 
> 标签：php, codeigniter

我创建文件夹，然后添加文件，例如

```
folder: orders
files : view.php, add_update.php, invoice.php
Uri becomes: orders/view, orders/add_update, orders/invoice 
```

另一个例子

```
folder: user
files : view.php (view profile), add_update.php (add, update users)
Uri   : users/view, users/add_update 
```

以及更多具有类似结构的文件夹和文件。它工作正常，但在编辑器（netbeans）中，我只在选项卡中看到文件的名称，所以如果我打开`order/view.php, users/view.php, files/view.php`我看到`view.php, view.php, view.php`......我当然可以将鼠标悬停在上面并查看完整路径，但我想知道你们是否遵循更好的文件命名模式。上传文件时有时会出错，`orders/view.php or users/view.php`因为文件结构看起来很相似。你有什么建议？

PS：这些是控制器而不是 CI 视图文件。我有这种结构的原因之一是有有意义的 uri。我只是在 CI 中添加了标签，但我是否使用 CI 并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:48:33.513

为什么需要文件夹？为什么不简单地有一个类`Orders`with methods `view`,`update`等等？

准系统示例：

```
<?php if (! defined('BASEPATH')) exit('No direct script access');

class Orders extends CI_Controller {

function __construct() {
    parent::__construct();
}

/* URL = example.com/orders */
function index()
{

    /* default action */
}

/* URL = example.com/orders/view */
function view()
{
    /* view method code */
}

/* etc */

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:21:06.387

您可以重命名您的文件，如 order_view.php、order_update.php 等，类似地 user_view.php、user_update.php...它将区分您 IDE 中的订单和用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:23:25.117

我建议使用命名空间，并给视图一个更有意义的名称。

这就是我的 Netbeans 的外观：

![在此处输入图像描述](../Images/c5382aca1747d97d140251b697016116.png)

我已经`\Ganymedes\Views`为它们分配了命名空间。所以我有有意义的名字，而且所有的东西都在同一个命名空间中。

# spring - 如何在 SPRING 跨战共享 bean INSTANCE？

> ID：12367509
> 
> 赞同：1
> 
> 时间：2012-09-11T10:16:51.433
> 
> 标签：spring, spring-mvc

我想在多场战争中共享一个单例 bean。我知道使用 parentContextKey 属性共享 ApplicaitonContext（例如，[http://blog.springsource.org/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/](http://blog.springsource.org/2007/06/11/using-a-shared-parent-application-context-in-a-multi-war-spring-application/) )

但是这种方式的bean实例创建了多个（对于2个战争，2个实例）。我只想要 2 场战争中的 1 个实例。

另一种方式，如果我在任何 POJO 中设置一些值，它应该可以在另一场战争中访问。

我需要这个的原因是，有一些 bean（如 HibernateSessionFactory、Datasource 等很昂贵）被多次创建（n 实例用于 n 战争）。而我想利用相同的实例而不是在不同的战争中创建相同的实例。

谁能为此提供解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:34:25.503

您可以通过将对象绑定到全局 JNDI 树来实现这一点。这意味着两个 WAR 都会引用在 JNDI 中查找的对象。

Hibernate 允许您使用该`hibernate.session_factory_name`属性（[这](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Web_Platform/5/html/Hibernate_Core_Reference_Guide/configuration-optional-jndi.html)可能是一个很好的起点。应该已经从 JNDI 查找数据源。

有一件事，我不会将会话工厂或数据源归类为昂贵的，因此您很可能会节省少量内存以换取大量额外的复杂性，所以我会问自己这个问题是否值得额外的维护难题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:49:08.063

Spring 提供了一种公开任何 bean（服务）的方法，并且可以从任何其他 Web 应用程序或任何独立应用程序访问这些 bean。

请参阅[使用 Spring 的远程处理和 Web 服务](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html)以获取更多详细信息。

# dotnetnuke - 如何在 DotNetNuke 6 中创建模块？

> ID：12367510
> 
> 赞同：0
> 
> 时间：2012-09-11T10:16:53.010
> 
> 标签：dotnetnuke

如何在不使用`DataSource`控件的情况下在 Visual Studio 2010 中为 DotNetNuke v6 创建一个连接到数据库的模块？

我是 DotNetNuke 的初学者，我想完全了解如何创建模块。我参考了谷歌，发现了两个我认为不错的链接，但我需要一个简单的示例，其中包含更好的评论并在不使用`DataSource`控件的情况下连接到数据库。

[创建 DotNetNuke® 模块 - 适合初学者！](http://www.codeproject.com/Articles/12853/Creating-a-DotNetNuke-Module-For-Absolute-Beginner)
[为绝对初学者创建一个超快速和超简单的 DotNetNuke® 模块！](http://www.codeproject.com/Articles/14613/Creating-a-Super-Fast-and-Super-Easy-DotNetNuke-Mo)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:58:32.560

我欢迎你使用 dotnetnuke，它确实是一个很棒的 CMS，分别是用 ASP.NET 制作的最棒的 CMS

我会建议你[基本的模块开发视频](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/15/View/Details/Basic-DotNetNuke-Module-Development.aspx)

你可以通过 dotnetnuke 官方视频培训库点击[这里](http://www.dotnetnuke.com/Resources/Video-Library.aspx)

还请查看 dotnetnuke 博客文章，我建议您查看 Steve Fabians[博客](http://www.dotnetnuke.com/Resources/Blogs/BlogID/16.aspx)， 您也可以查看 Peter Donker 和 Chris Hammond 的博客。

最后但并非最不重要的一点是，您可以在 dnncreative.com 上查看 dotnetnuke 的无限 [资源](http://dnncreative.com)

# objective-c - 为沙盒化 Cocoa 应用程序创建临时文件

> ID：12367512
> 
> 赞同：10
> 
> 时间：2012-09-11T10:16:55.020
> 
> 标签：objective-c, cocoa, app-store, sandbox, temporary-files

我的应用程序是*沙盒*的（根据最新的 App Store 指南），我想创建一些临时文件。

我可以这样做吗？如果“是”，我在哪里可以这样做？有没有预先指定的路径？（以及访问该路径的命令？）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T17:47:27.037

您应该使用该`NSTemporaryDirectory()`函数，该函数将为您的应用程序找到并返回适当的临时文件夹（无论沙箱状态、操作系统版本和许多其他内容如何）。看看[这篇 Cocoa With Love](http://cocoawithlove.com/2009/07/temporary-files-and-folders-in-cocoa.html)帖子，了解更多关于`NSTemporaryDirectory()`和其他临时目录相关细节的详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-03T13:10:46.407

NSHipster 上有一篇关于临时目录的好文章：

[http://nshipster.com/nstemporarydirectory/](http://nshipster.com/nstemporarydirectory/)

作者建议这段代码也可以完美地与沙盒应用程序一起使用：

```
NSError *error;
NSString *globallyUniqueString = [[NSProcessInfo processInfo] globallyUniqueString];
NSString *tempDirectoryPath = [NSTemporaryDirectory() stringByAppendingPathComponent:globallyUniqueString];
NSURL *tempDirectoryURL = [NSURL fileURLWithPath:tempDirectoryPath isDirectory:YES];
[[NSFileManager defaultManager] createDirectoryAtURL:tempDirectoryURL withIntermediateDirectories:YES attributes:nil error:&error]; 
```

# winforms - Datagridview 列宽

> ID：12367516
> 
> 赞同：4
> 
> 时间：2012-09-11T10:17:12.027
> 
> 标签：winforms, datagridview, datagridviewcolumn

![在此处输入图像描述](../Images/a91e4fed9c99cb170a28605e6247b6f9.png)我有与 Winform 中的 datagridview 相关的问题。

我的左侧面板中有一个表名列表。当我单击表格时，我会在右侧面板中显示表格内容。我通过获取数据并将数据源分配给 dgv 在 datagridview 中显示数据。

我将以下属性设置为 dgv。

```
dgTemp.Dock = DockStyle.Fill;
dgTemp.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
dgTemp.AutoSize = true;
dgTemp.DefaultCellStyle.WrapMode = DataGridViewTriState.True;
dgTemp.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells;
dgTemp.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.DisableResizing;
dgTemp.ReadOnly = true;
dgTemp.AutoGenerateColumns = true;
dgTemp.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
dgTemp.AllowUserToAddRows = false; 
```

我的问题是我分配给 dgv 的数据源中可以有任意数量的列。因此，如果列数很少（例如 1 或 2），则 dgv 大小会非常小，并且右侧的空白空间看起来非常难看。我不能使用 auto `autosizecolumnmode`，`fill`因为当有更多列时，所有列都会缩小和扩展列不给我滚动底部

所以我的要求是

1.  应填充 datagridview 中的所有空间。（应覆盖所有区域）
2.  当有更多列时，应该出现滚动，这样看起来更好

有什么我可以使用的事件或属性吗？

感谢期待。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:20:48.157

试试这个 ：

```
dgTemp.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill; 
```

更新 ：

```
 dataGridView1.FirstDisplayedScrollingRowIndex = 5; //use 5 because you want to start from 5
        //you can have a horizontal scroll bar with this code :
        dataGridView1.FirstDisplayedScrollingColumnIndex = 10; //you can choose every column you wanna start with that column 
```

更新 2：

```
int rows = dataGridView1.Rows.Count;
        int columns = dataGridView1.Columns.Count;
        if (rows < 5 && columns < 10)
        {
            dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
        }
        else
        {
            dataGridView1.FirstDisplayedScrollingRowIndex = 5; //use 5 because you want to start from 5
            //you can have a horizontal scroll bar with this code :
            dataGridView1.FirstDisplayedScrollingColumnIndex = 10; //you can choose every column you wanna start with that column
        } 
```

# jakarta-ee - 在 Filter 和 ManagedBean 中获取相同的 EJB 实例

> ID：12367520
> 
> 赞同：2
> 
> 时间：2012-09-11T10:17:20.950
> 
> 标签：jakarta-ee, ejb-3.0, servlet-filters, managed-bean, stateful-session-bean

我正在尝试向我的 Java EE 应用程序添加一个过滤器，但我遇到了一些问题。

我想将过滤器用于登录目的，所以我需要让它与管理登录的*UserManager* bean“对话”。

这是我的结构：

*   LoginFilter : ServletFilter
*   LoginBean : 一个*SessionScoped 托管 Bean*
*   UserManager：有*状态会话 Bean*

*UserManager*必须由*LoginFilter*和*LoginBean*访问，因为它具有处理登录过程的方法。

在*LoginBean*中，我用这个简单的行得到了*UserManager ：*

```
@EJB private UserManagerLocal userManager; 
```

我不能在*LoginFilter*中这样做，所以我不得不编写一个查找方法：

```
try{
    Context c = new InitialContext();
    return (UserManagerLocal) c.lookup("java:global/PROJECT/PROJECT-ejb/UserManager!ejb.UserManagerLocal");
} catch (NamingException ex) {
    ...
} 
```

我也有一行将这个*UserManagerLocal*添加到请求属性中，但是它抛出了 NPE，因为当我调用查找方法时没有请求，所以我将它移到了*doFilter()*方法中。

```
public void doFilter(...){
   HttpServletRequest req = (HttpServletRequest) request;
   if(req.getAttribute("userManager") == null){
      req.setAttribute("userManager", userManager);
   }
   ...
} 
```

现在问题来了。

*LoginFilter*和*LoginBean*使用**两个不同**的*UserManager*实例！这使得我的过滤器即使是登录的用户也停止了，因为*LoginBean在**UserManager*的另一个实例上工作，所以*LoginFilter*不知道登录已经完成！

我该如何解决？我认为查找和注入会返回相同的*SSFB*实例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:39:41.220

不，它将返回新实例。即使您多次在过滤器中进行查找，它也会返回不同的实例。

您需要维护/使用您在过滤器中创建的 UserManagerLocal 实例，而不是在 LoginBean 中注入 UserManagerLocal 从请求中获取相同的实例。

# java - 向 PDF 添加注释行

> ID：12367528
> 
> 赞同：2
> 
> 时间：2012-09-11T10:17:46.160
> 
> 标签：java, pdf

PDF文件具有这样的结构（或多或少，只是为了描绘我的需要）

```
%Header containing PDF version and two characters that ensure PDF is read properly
//objects
//cross-reference table 
```

但是，如果我`%text`在上面列表的最后两个元素之间添加这样形成的文本，PDF 不应该被破坏，并且 PDF 阅读器会忽略该行，对吧？据我所知，PDF中的“%”与Java中的“//”相同。

我想以这种方式将我的一些自定义数据添加到 PDF 中。这可能不是最好的方法，但对我来说这是最简单的方法。以后我可能会改变它，但现在我想坚持下去。

问题是，一方面，我的假设是，如果将行添加到 PDF 的正确位置，PDF 本身不会被破坏，其次，我想知道我应该使用哪些类和方法来实现这一点.

我从常规 PDF 开始，我想以包含我的数据的 PDF 结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:08:01.370

> 如果我在上面列表的最后两个元素之间添加这样形成的文本`%text`，PDF 不应该被损坏，并且 PDF 阅读器会忽略该行，对吗？

**错误的！**

首先，您给定的 PDF 文件结构是不完整的（即使是“描绘您的需求”）。它错过了`startxref`元素。

PDF 文件的正确（粗略）结构（根据您的需要）需要考虑以下四个要素：

1.  PDF 标题
2.  PDF 正文（对象）
3.  PDF 外部参照表
4.  PDF 预告片

*交叉引用表*是一种 TOC（目录），列出了 PDF 文件中的所有对象。这些对象通过此 TOC 列表及其文件字节偏移值定位，从文件开头计算。

因此，如果您在 PDF 中插入**任何内容**（即使是 PDF 阅读器应该忽略的注释），您必须为插入的注释之后的所有对象调整外部参照表中的字节偏移值。

然后，*预告片*的重要性次之：它包含一个名为的条目，该条目`startxref`保存（最后一个）外部参照部分的文件字节偏移值。（*最后一个*外部参照部分，因为 PDF 文件可能不仅仅是一个，而是多个外部参照部分。）

因此，符合标准的 PDF 阅读器应该从头开始阅读 PDF 文件。他们在那里找到了外部参照表的位置。然后，通过阅读外部参照表，他们将找到每个对象。

In your special case (you want to insert a comment after all the PDF objects, but before the Xref table), you also need to adapt the number given by the `startxref` keyword: if your comment is 55 characters long (including newline characters) then add 55 to the previous value and you should be fine.

# python - 在 python 中使用 self 作为方法参数的问题

> ID：12367537
> 
> 赞同：0
> 
> 时间：2012-09-11T10:18:06.380
> 
> 标签：python, oop, tkinter

我为这个基本问题道歉，但我在语法或我认为的整体概念方面遇到了一些问题。我遇到的问题是，当我在下面的类中调用该方法时，解释器希望我为 self 参数输入一个我认为不应该发生的值。我想要做的是创建一个对象来一次保存多个 tkinter 小部件，这样我就可以动态地分组添加或减去它们，而不是一次一个。非常感谢这里的任何帮助，谢谢！

```
class User(object):

    #Input a UI row number and this will generate a corresponding row of widgets
    def generateLine(self, rowNumber):
        self.NameVar = StringVar()
        self.ReasonVar = StringVar()
        #ExcusedVar

        self.Name_Cbox = ec.AutocompleteCombobox(content, textvariable = self.NameVar)
        self.Name_Cbox.grid(row = rowNumber, column = 0)

        self.Reason_Cbox = ec.AutocompleteCombobox(content, textvariable = self.ReasonVar)
        self.Reason_Cbox.grid(row = rowNumber, column = 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:19:28.363

确保您有一个类的*实例*`User`来调用该方法：

```
user = User()
user.generateLine(0) 
```

`self`仅在方法已绑定到实例时提供。

如果你直接在类上调用方法，你会得到一个异常：

```
>>> class User(object):
...     def generateLine(self, row):
...         print row
... 
>>> User.generateLine(0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unbound method generateLine() must be called with User instance as first argument (got int instance instead)
>>> User().generateLine(0)
0 
```

# clojure - 如何在 mustache 处理程序中访问/传递请求映射

> ID：12367538
> 
> 赞同：2
> 
> 时间：2012-09-11T10:18:06.643
> 
> 标签：clojure, ring

我想创建一个接受两个输入的处理函数。一个是从 url 获取的参数`/name`，第二个是来自查询字符串的参数`/name?x=3`

```
(def my-app (app
               [page-name] (handler page-name)))

(defn handler
  [{:keys [params]} page-name]
  (let [x (params "x")]
    (-> (page-templ page-name x) response constantly))) 
```

上面的失败是因为处理程序需要 2 个参数，但是我只传递了一个。

如何获取请求映射并将其传递给处理程序？

上述案例中的请求映射包含一个名为`x`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:27:47.470

最好可以在页面名称上发送，如下所示：

```
(app
 [""] (index-page)
 ["login"] (serve-login)) 
```

这里函数 index-page 和 serve-login 返回一个参数的函数。

```
(defn index-page[]
  (fn [req] ..)) 
```

req 是将包含键/值映射中所有 url 参数的请求。要获取参数值，请执行以下操作：

```
(-> req (get :params) (get :x)) 
```

所以完整的解决方案看起来像这样：

```
(def my-app (app
               ["page1-name"] (handler)))

(defn handler []
  (fn [req]
    (let [x (-> req :params :x)]
      (-> (page-templ page-name x) response)))) 
```

**编辑：**不要忘记将您的应用程序包装到 (wrap-keyword-params) 和 (wrap-params) 中，您可以这样做：

```
(def my-wrapped-app
  (-> my-app
   (wrap-keyword-params)
   (wrap-params)) 
```

# jquery - Jquery 脚本崩溃

> ID：12367543
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:18:21.230
> 
> 标签：jquery

我有以下代码

```
function manChecks() {
    if ($("#__CS").length > 0) {
        var cols = $("#__CS").val();
        for (var i = 1; i <= 9; i++) {
            colManage(i, cols.indexOf('|' + i) != -1);
        }
    }
} 
```

那么如果该代码小于 0 它不应该运行会发生什么 - 但它似乎导致了一个问题。

正确地写了这个或者我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:26:46.777

您的代码当前执行的操作：

*   如果`#__CS`文档中不存在，则什么都不做（此检查不会导致错误）
*   如果`#__CS`确实存在，`.val()`它将被设置为`cols`. 这永远不会导致错误。
*   之后，您将从 1 到 9 进行迭代。这不会导致您的代码中断。
*   将调用九次，传递一个从 1 到 9 的值，以及字符串中是否存在的`colManage`指示。此调用也永远不会导致您的代码中断，但其中的某些内容很可能会导致它中断。`|1``|9``cols``colManage`

# hook - Automake 上是否有在 automake Makefile 规则之前执行的任何目标？

> ID：12367548
> 
> 赞同：2
> 
> 时间：2012-09-11T10:18:41.450
> 
> 标签：hook, automake

我一直在尝试生成在自动生成 Makefile 规则*之前*执行的 Makefile 规则。我已经看到我可以定义“all-local”和“hooks”规则，但这些规则是在“all”和其他规则*之后*执行的，例如。

有什么方法可以在自动添加规则之前执行我的代码？我想在目录中自动生成文件，但是通过make的编译过程总是试图按照automake Makefile规则编译程序。如果我可以添加一个“pre-”规则，我可以生成所需的文件，然后让正常的编译过程运行。

我知道 BUILT_SOURCES，但我试图不使用它

那可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T02:31:07.180

没有办法做到这一点。

一般来说，在 Makefile 中，如果你想这样做，你应该考虑在需要的地方添加适当的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-12T08:01:21.497

Makefiles 可以具有相同的目标和不同的先决条件，在这种情况下，先决条件将被合并：

```
# The following will be equivalent to 'target: prerequisite1 prerequisite2'
target: prerequisite1
target: prerequisite2 
```

这可以从[GNU make 手册](https://www.gnu.org/software/make/manual/html_node/Multiple-Rules.html)中推断出来（那里的解释真的很糟糕，但我没有找到更好的东西）。

您可以自己利用此功能`Makefile.am`：

```
all: all-prehook

all-prehook:
    echo Prehook called here

.PHONY: all-prehook 
```

小心 automake 会抱怨（`Warning: overrides Automake target`或类似的东西）。您可以使用`-Wno-override`: 将其关闭，如果您使用的是 autoconf，只需将其添加到您的`AM_INIT_AUTOMAKE`通话中即可。

# c# - 存储在同一位置的 Azure 缓存中的会话在多个实例上不同步

> ID：12367554
> 
> 赞同：6
> 
> 时间：2012-09-11T10:19:06.987
> 
> 标签：c#, asp.net, asp.net-mvc, azure, azure-caching

对于在 Azure 中运行的 MVC4 应用程序，我将会话存储在同位缓存中。如Microsoft 提供的[此操作指南中所述。](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/#store-session)

我运行了两个小实例，一切似乎都运行良好。我可以登录到应用程序，当我在应用程序中四处浏览时，我仍然保持登录状态。所以会话似乎在这两种情况下都有效。

但是，当我更新会话数据时，如下所示：

```
HttpContext.Current.Session["someVar"] = "new value"; 
```

该更改似乎仅对处理该特定请求的实例产生影响。现在，当我浏览应用程序时，有时会得到初始值，有时会得到更新后的值。

我没有对 web.config 进行任何更改，因此它看起来与被 Nuget 包添加时完全一样：

```
<sessionState mode="Custom" customProvider="AppFabricCacheSessionStoreProvider">
  <providers>
    <add name="AppFabricCacheSessionStoreProvider"
          type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache"
          cacheName="default"
          useBlobMode="true"
          dataCacheClientName="default" />
  </providers>
</sessionState> 
```

**使用 Azure 缓存时，我是否需要以其他方式处理会话，还是我在这里缺少的其他东西？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T13:31:47.437

您需要分配一个[`applicationName`](http://msdn.microsoft.com/en-us/library/windowsazure/gg185682.aspx)，以便分布式缓存可以查看同一应用程序边界内的共享状态。请参阅[MSDN 论坛帖子以供参考](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/127ba211-51b2-4f3e-9e7b-1b41af269708)。

```
<add name="AppFabricCacheSessionStoreProvider"
          type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache"
          applicationName="azureMVC4App"
          cacheName="default"
          useBlobMode="true"
          dataCacheClientName="default" /> 
```

如果要跨应用程序边界共享缓存状态，则需要分配[`sharedId`](http://msdn.microsoft.com/en-us/library/ee790859%28v=azure.10%29.aspx)

# android - 推送通知和拉取通知的区别？

> ID：12367557
> 
> 赞同：10
> 
> 时间：2012-09-11T10:19:21.683
> 
> 标签：android, android-notification-bar

有人知道“推送通知”和“拉取通知”有什么区别吗？

我知道“推送通知”是 C2DM，但我不知道什么是“拉取通知”

任何人请帮助..

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2016-04-18T09:25:24.687

我必须发布这个答案，因为接受的答案非常具有误导性。

*   **[拉取通知](https://en.wikipedia.org/wiki/Pull_technology)**意味着**客户端请求服务器**检查是否有任何更新。
*   **[推送通知](https://en.wikipedia.org/wiki/Push_technology)**是指**服务器向客户端通知**更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T10:31:34.020

**推**

推送通知是一种向手机发送数据（推送）的**技术**。一个示例是 SMS 消息。另请参阅 WAP、推送电子邮件等。

这种技术的反面通常被称为“**轮询**”，手机会定期向服务器询问新的信息或内容。

**拉**

“拉取通知”通常是用来指代通知或事件的**图形表示的术语。**这显示在 Android 手机顶部的区域中。这是用户看到某事发生的视觉“提示”的地方。

与此相关的其他术语是“下拉菜单”、“下拉通知”等

# c# - Internet Explorer 事件不起作用

> ID：12367559
> 
> 赞同：1
> 
> 时间：2012-09-11T10:19:26.850
> 
> 标签：c#, internet-explorer-9, watin

我正在尝试使用带有 Internet Explorer 9 的[WatiN](http://en.wikipedia.org/wiki/Watir#Similar_tools)运行测试，而我的环境不会激活诸如`keyup`,等事件`onkeydown`。这一直导致测试失败。在其他机器上，他们成功了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:27:54.970

如果 Internet Explorer 未设置为您的默认浏览器/启动浏览器，这可能会阻止正确捕获事件。

您是否检查过用于在 Internet Explorer 中呈现的文档引擎等？（按`F12`）

PS：有关Visual Studio的一些浏览器切换扩展，请参阅 Stack Overflow 问题*[Change default browser in Visual Studio 2010 RC](https://stackoverflow.com/questions/2443749/change-default-browser-in-visual-studio-2010-rc)*

# c# - 从 Win XP 移植到 Win7 时“创建 COM 组件实例失败”

> ID：12367562
> 
> 赞同：0
> 
> 时间：2012-09-11T10:19:34.623
> 
> 标签：c#, windows-7, windows-xp

我开发了一个带有线程的 C# 应用程序，可以将 word 转换为 pdf。
此应用程序在带有 Office 2007 的 Win XP 中运行良好。但是在带有 Office 2010 的 Win7 上使用它时会引发错误：

> 由于以下错误，从 IClassFactory 创建 CLSID 为 {00020906-0000-0000-C000-000000000046} 的 COM 组件实例失败：8001010a。

你能告诉我如何让 Win7 运行我的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:20:30.973

错误代码 0x8001010a 是 RPC_E_SERVERCALL_RETRYLATER，“被调用的对象现在选择不处理调用。稍后再试。” Office 应用程序并不少见。你应该睡一会，然后再试一次。

使用最强烈的轻描淡写，这不是很实用。最终，它是由您在代码中使用线程引起的。Office 对象是单线程的。您当然可以在工作线程上进行方法调用，但 COM 会自动将调用编组到创建对象的 STA 线程。基本上消除了多线程的所有优点。如果您创建自己的 STA 线程来避免这种情况，那么封送处理将在 Office 应用程序内完成。

这就是成本停止的地方，如果您拨打电话并且应用程序还没有准备好执行该方法，因为它正忙于做其他事情（通常是您之前要求它做的任何事情），那么它将拒绝这个呼叫错误代码。究竟什么时候你会得到错误是高度不可预测的，版本更改肯定会产生不同的行为。您必须降低代码中的线程，以避免如此猛烈抨击它。

或者实现 IMessageFilter 接口并告诉 COM 您的程序挂起调用是可以的，它应该继续等待，直到 Office 应用程序准备好处理调用。 [这个 Q+A](https://stackoverflow.com/questions/14467510/c-sharp-excel-interop-how-to-test-if-interop-object-is-still-working-and-perfo)谈到了它。

# c - 添加 char* 一些其他数据 c 代码

> ID：12367564
> 
> 赞同：0
> 
> 时间：2012-09-11T10:19:38.550
> 
> 标签：c, nullpointerexception, char, strcpy

我在代码中有这一部分：

```
char* data="My name is: "; 
```

我想在此添加`argv[1]`代表名称的参数。如何在c代码中做到这一点？我已经尝试过`strcpy`，`strcat`但是当 Ipcp 执行此操作时出现分段错误：

```
strcpy(data,argv[1]); 
```

有人可以帮忙吗？

还有为什么：`data=data+argv[1]`不工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:23:59.103

您需要提供一些内存，可以将连接的结果存储到其中。例如：

```
char buffer[1024];

strcpy(buffer, "My name is: ");
strcat(buffer, argv[1]); 
```

但是请注意，这很容易出错：如果`argv[1]`与前缀字符串组合的值超过 1024 个字符，则会产生缓冲区溢出。所以，也许是这样的：

```
char* prefix = "My name is: ";
int length = strlen(prefix) + strlen(argv[1]) + 1;
char* buffer = malloc(length);

if (!buffer) abort();
else 
{
    strcpy(buffer, prefix);
    strcat(buffer, argv[1]);

    /* Do something with buffer here. And don't
     * forget to free it, once you no longer need
     * it. This is C -- no garbage collection. */

    free(buffer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:24:31.963

`data`将在只读部分分配内存。所以修改会导致问题。

[内存中的字符串文字在哪里？堆栈/堆？](https://stackoverflow.com/questions/4970823/where-in-memory-are-string-literals-stack-heap)

`+`运算符不会像您想象的那样进行 concat 。

`strcat()`功能在`string.h`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:24:44.577

还有为什么：data=data+argv[1] 不起作用？

关于这一点 - C 中的数据和 argv 只不过是指向包含您的字符串的内存中的地址的指针。您不能以这种方式连接字符串（char*）。我建议看一下字符串库，也许更多地看一下整个 C 语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:32:06.987

您不能附加到数据指针，因为其中没有空间

```
char result_data [1024];
char* data="My name is: ";
strcat(result_data, data);
strcat(result_data, argv[1]); 
```

# c# - 在子窗体中抑制 MDIForm 的菜单快捷键

> ID：12367568
> 
> 赞同：0
> 
> 时间：2012-09-11T10:19:59.340
> 
> 标签：c#, .net, winforms

我有一个带有多个快捷键的 MenuStrip 的 MDI 表单。一切正常，但我不想要一件事，如下所述：

**当从子窗体按下 MDIParent 窗体中菜单项的快捷键时，该快捷键仍然有效！！**

当从子窗体按下时，我希望对相同的快捷键（MDIParent 的菜单项）有不同的实现。

我希望我能够正确地澄清我的问题。

# c# - 如何在 C# 中获取会话 ID

> ID：12367571
> 
> 赞同：23
> 
> 时间：2012-09-11T10:20:14.693
> 
> 标签：c#, sessionid

在 C# 中获取会话 id 的正确方法是什么

```
String sessionId ;
sessionId = Session.SessionID; 
```

或者

```
 string sessionId = Request["http_cookie"];
 sessionId = sessionId.Substring(sessionId.Length - 24); 
```

实际上，我对 C# 完全陌生，刚刚加入了一个项目，在那里我找到了第二个代码，通过谷歌我找到了第一个代码，所以任何人都请告诉我要使用的实际代码是什么

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-11T10:24:28.390

正确的方法是：

```
HttpContext.Current.Session.SessionID 
```

# javascript - 防止在 Chrome 中使用 flash Event.DEACTIVATE

> ID：12367572
> 
> 赞同：1
> 
> 时间：2012-09-11T10:20:16.180
> 
> 标签：javascript, flash, events, google-chrome-extension

我想编写一个 Google Chrome 扩展程序来防止特定网页对模糊事件做出反应。

我知道如何为 javascript 部分执行此操作：我在运行时在页面中注入了一些 javascript:"document_start"，以便用我自己的函数重载 addEventListener 方法。

问题在于页面上的 Flash 部分。论文可以使用`addEventListener(flash.events.Event.DEACTIVATE,deactivate_method_in_as3);`

当然我想阻止方法调用

所以我有几个问题：

*   是否可以在某处设置安全参数以禁止 Chrome 将焦点相关事件传输到应用程序？
*   是否可以“即时”修改 swf 文件以删除或覆盖此处理程序（当然我无法控制该 swf）。
*   我也开始使用`chrome.debugger.*`和`chrome.windows.*` API，因为它们可以提前拦截事件。在那种情况下，我会收到一条烦人的消息，说“选项卡由...调试”
*   swf 有一个类似的处理程序，`flash.events.Event.ACTIVATE`所以我可以尝试使用它。但是当页面没有聚焦时如何触发呢？（我试图调用`focus()`它，但它似乎不起作用。
*   欢迎任何其他想法:)

谢谢阅读

# javascript - 如何在 ejs (javascriptmvc) 中指定相对图像路径

> ID：12367573
> 
> 赞同：1
> 
> 时间：2012-09-11T10:20:16.967
> 
> 标签：javascript, ejs, javascriptmvc

我正在尝试使用 javascriptmvc 做简单的应用程序。

有几个控制器和下一个文件夹结构：

```
/controllerA
  /views
    view1.ejs
    /images
      img1.png
/controllerB
  /views
    view2.ejs
    /images
      img2.png 
```

我如何在 ejs 文件中引用图像，以便它在整个项目中正常工作，并且分别在每个控制器中（例如 localhost/myapp/controllerA/controllerA.html）？

ejs 看起来像：

```
<div class="show-control">
  <img src="images/img1.png" alt="Show"/>
  <div class="count"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:44:50.123

你应该把你的图片放在 ./project/public/images 而不是 ./project/views/images

然后你可以使用带有正斜杠的相对路径 /

```
 <img src="/images/img1.png" alt="Show"/> 
```

# python - 使用 SqlAlchemy 获取 TimeoutError

> ID：12367576
> 
> 赞同：3
> 
> 时间：2012-09-11T10:20:27.640
> 
> 标签：python, sqlalchemy, nosetests

*更新*：刚刚发现 echo_pool=True 只显示重大事件，使用 echo_pool="debug" 代替。

我必须显式关闭引擎连接，否则`TimeoutError: QueuePool limit of size 5 overflow 10 reached, connection timed out, timeout 30`在使用nosetest 和sqlalchemy 时会出错。

我正在关注有关如何将[Session 加入外部事务](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#joining-a-session-into-an-external-transaction)的 SqlAlchemy 文档。唯一的区别是我使用的是作用域会话。这是有问题的代码：

```
import unittest

from sqlalchemy import create_engine

from myapp.mymodel import Session

engine = create_engine(
    '<REDACTED>',
    echo = False,
    # To make it faster to fail, but also fails with the default options
    # pool_size=2,
    # max_overflow=0,
    # echo_pool="debug",
    # pool_timeout=10,
)

class MyTest(unittest.TestCase):

    def setUp(self):
        self.connection = engine.connect()

        # begin a non-ORM transaction
        self.trans = self.connection.begin()

        # bind an individual Session to the connection
        Session.configure(bind=self.connection)

        self.addCleanup(self._teardown)

    def _teardown(self):
        """Rollback the db.

        Added to the list of cleanup by setUp, so that subclass do not have to
        call super() on tearDown.
        """

        # Rollback database
        self.trans.rollback()

        # Session must be closed BEFORE being removed
        Session.close()
        Session.remove()
        # If I don't do that, I get TimeOut
        # self.connection.close() 
```

这是`echo_pool`调试输出：

```
2012-09-11 12:34:28,506 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bae1e20>
2012-09-11 12:34:28,514 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bae1e20> checked out from pool
2012-09-11 12:34:29,664 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bc61c20>
2012-09-11 12:34:29,665 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bc61c20> checked out from pool
2012-09-11 12:34:30,368 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bc9ea20>
2012-09-11 12:34:30,369 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bc9ea20> checked out from pool
2012-09-11 12:34:31,042 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bcd6820>
2012-09-11 12:34:31,043 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bcd6820> checked out from pool
2012-09-11 12:34:31,775 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bcbd820>
2012-09-11 12:34:31,775 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bcbd820> checked out from pool
2012-09-11 12:34:32,439 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bcc2220>
2012-09-11 12:34:32,439 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bcc2220> checked out from pool
2012-09-11 12:34:33,129 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bd0e220>
2012-09-11 12:34:33,129 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bd0e220> checked out from pool
2012-09-11 12:34:33,802 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bd1e420>
2012-09-11 12:34:33,802 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bd1e420> checked out from pool
2012-09-11 12:34:34,590 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bcf6a20>
2012-09-11 12:34:34,590 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bcf6a20> checked out from pool
2012-09-11 12:34:35,452 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bd53420>
2012-09-11 12:34:35,452 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bd53420> checked out from pool
2012-09-11 12:34:36,276 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bd32420>
2012-09-11 12:34:36,276 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bd32420> checked out from pool
2012-09-11 12:34:36,970 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bd80420>
2012-09-11 12:34:36,971 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bd80420> checked out from pool
2012-09-11 12:34:37,639 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bda9020>
2012-09-11 12:34:37,640 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bda9020> checked out from pool
2012-09-11 12:34:37,664 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bdc3c20>
2012-09-11 12:34:37,664 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bdc3c20> checked out from pool
2012-09-11 12:34:37,675 DEBUG sqlalchemy.pool.QueuePool Created new connection <_mysql.connection open to '127.0.0.1' at 7f938bd95e20>
2012-09-11 12:34:37,675 DEBUG sqlalchemy.pool.QueuePool Connection <_mysql.connection open to '127.0.0.1' at 7f938bd95e20> checked out from pool 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:09:13.370

我在 sqlalchemy 的小组上问了同样的问题。

所以是的，你确实需要明确地关闭连接，根据 Michael Bayer 的说法：

> 当您使用 unittest 运行测试时，unittest 会创建您的测试类的一个新实例，这意味着所有这些测试类实例都将存在 self.connection 并且不会返回到池中。

[https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/eiQTXKn5ai8](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/eiQTXKn5ai8)

# c++ - 外部打印函数如何编译

> ID：12367578
> 
> 赞同：0
> 
> 时间：2012-09-11T10:20:28.430
> 
> 标签：c++, gcc

我创建了两个文件，第二个文件应该打印一个 std::vector。

那是我的 main.cpp：

```
#include <vector>
int main() {

std::vector<int> vec;
vec.push_back(1);
vec.push_back(2);
vec.push_back(3);
vec.push_back(4);
vec.push_back(5);
return 0;
} 
```

那是 print.cpp

```
#include <iostream>
#include <iterator>
#include <algorithm>
#include <vector>

template <typename T> void printVec(T vec) {
std::copy(vec.begin(), vec.end(), std::ostream_iterator<int>(std::cout, " "));
std::cout << std::endl;
}

template void printVec< std::vector<int> >(std::vector<int> t); 
```

我编译了这些文件：

```
g++ -g main.cpp -o main.o
g++ -g -c print.cpp -o print.o
g++ -o main main.o print.o 
```

并得到以下错误

```
main.o: In function `_start':
(.text+0x0): multiple definition of `_start'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.text+0x0): first defined here
main.o: In function `_fini':
(.fini+0x0): multiple definition of `_fini'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.fini+0x0): first defined here
main.o:(.rodata+0x0): multiple definition of `_IO_stdin_used'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.rodata.cst4+0x0): first defined here
main.o: In function `__data_start':
(.data+0x0): multiple definition of `__data_start'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o:(.data+0x0): first defined here
main.o: In function `__data_start':
(.data+0x8): multiple definition of `__dso_handle'
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtbegin.o:(.data+0x0): first defined here
main.o: In function `_init':
(.init+0x0): multiple definition of `_init'
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o:(.init+0x0): first defined here
/usr/lib/gcc/x86_64-linux-gnu/4.6/crtend.o:(.dtors+0x0): multiple definition of `__DTOR_END__'
main.o:(.dtors+0x8): first defined here
/usr/bin/ld: error in main.o(.eh_frame); no .eh_frame_hdr table will be created.
collect2: ld returned 1 exit status 
```

我应该如何让它运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T10:22:07.480

改变：

```
g++ -g main.cpp -o main.o
g++ -g -c print.cpp -o print.o
g++ -o main main.o print.o 
```

至：

```
g++ -g -c main.cpp -o main.o
g++ -g -c print.cpp -o print.o
g++ -o main main.o print.o 
```

或者，您也可以将所有 3 个操作合二为一（并在操作时启用警告）：

```
g++ -g -Wall -o main main.cpp print.cpp 
```

# php - 以 PDF 格式打开我的 php 页面

> ID：12367581
> 
> 赞同：0
> 
> 时间：2012-09-11T10:20:46.213
> 
> 标签：php, pdf, file-io

我的页面上有一个链接到report.php 页面的按钮。我想要的是，而不是单击按钮并查看 php 页面，而是单击按钮并将此 report.php 页面打开为 PDF 页面。

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:23:05.257

Ofc 它可能，您定义标题并制作推荐的文件名而不是扩展名 php

```
<?php
// We'll be outputting a PDF
header('Content-type: application/pdf');

// It will be called downloaded.pdf
header('Content-Disposition: attachment; filename="downloaded.pdf"');

// The PDF source is in original.pdf
readfile('original.pdf');
?> 
```

在 php.net 上找到的第一个示例

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

当然，假设您生成的文件与 pdf 兼容，您可以在线找到很多 pdf 生成器，但我建议使用[http://phpclasses.org](http://phpclasses.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:23:47.697

你可以试试[这个](http://code.google.com/p/dompdf/)，HTML to PDF Converter。将您的 HTML 转换为 PDF，然后在屏幕上显示，以下是[示例](http://pxd.me/dompdf/www/examples.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:24:12.160

您可以生成 PDF 并允许用户下载它（如果浏览器支持内联 PDF 显示，它将看起来如您所愿）。试试[mPDF](http://www.mpdf1.com/mpdf/index.php)。它从 HTML 和 CSS 生成 PDF。

# html - 如果创建网络工作者失败，是否有可能捕获？

> ID：12367589
> 
> 赞同：2
> 
> 时间：2012-09-11T10:21:13.600
> 
> 标签：html, error-handling, web-worker

在下面的示例中，Web Worker 的代码中存在错误（未定义的引用），但**try { ... } catch(e) { ...}**并没有捕捉到太多。消息*为什么我在这里？*出现在控制台上。

HTML 文件：

```
<html>
<body>
<script type="text/javascript">

var worker;
try {
  worker = new Worker("foo.js");
  console.log('Why am I here ?');
} catch (e) {
  console.log('Error creating the worker.');
}
// No matter what, an object "worker" will created during the call to Worker()
// How to test that all went well
var worker_failed = false;
worker.addEventListener("error",
                        function(e) { worker_failed = true },
                        false);
// Is it correct to assume that "worker" is created asynchronously, and that checking
// that creation went well should not be sequential and the test below is not
// the way to do it ?
if ( worker_failed ) {
  // Worker("foo.js") failed, switch to plan B
}
</script>
</body>
</html> 
```

网络工作者（*foo.js*）：

```
foobar = 2 + baz; // fails here (baz is undefined)
onmessage = function(e) {
  var data = e.data;
  postMessage(data);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:57:24.747

您可以异步处理工作人员中的错误。你需要听`error`工人的事件。

> worker.addEventListener("错误", onError, false);

[这里](http://www.html5rocks.com/en/tutorials/workers/basics/)有一个关于网络工作者的很棒的教程。您可以在该部分中准确找到您要查找的`handling errors`内容。

您还可以查看官方[html5 规范](http://www.w3.org/TR/workers/#runtime-script-errors)以获取有关浏览器应如何实现此功能的更多信息。

# python - Python numpy：具有多个数据集的数据文件

> ID：12367593
> 
> 赞同：1
> 
> 时间：2012-09-11T10:21:26.100
> 
> 标签：python, numpy, plot

假设您有一个数据文件，其中包含多个由字符串“--”分隔的数据集，格式如下：

```
--
<x0_val> <y0_val>
<x1_val> <y1_val>
<x2_val> <y2_val>
--
<x0_val> <y0_val>
<x1_val> <y1_val>
<x2_val> <y2_val>
... 
```

如何将整个文件读入一个数组数组，以便之后可以将所有数据集绘制到同一张图片上，并`for`在外部数组上循环？

```
genfromtxt('data.dat', delimiter=("--")) 
```

给了很多

```
Line #1550 (got 1 columns instead of 2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:31:39.367

我会更新...

我首先将文件拆分为多个文件，这些文件可以作为对象驻留在内存中，也可以作为新文件驻留在文件系统中。

`--`您可以使用模块定位字符串`re`。

然后你可以使用我上面发布的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:31:52.193

如果您 100% 确定文件中没有负值，您可以快速尝试：

```
np.genfromtxt(your_file, comments="-") 
```

将`comments="-"`强制`genfromtxt`忽略 之后的所有字符`-`，如果您有负变量，这当然会产生奇怪的结果。此外，结果将只是单个数组中的一部分数据集

否则，最安全的方法是迭代您的文件并将不匹配的行存储在`--`每个块的一个列表中，类似于以下内容：

```
blocks = []
current = []
for line in your_file:
    if line.startswith("-"):
        blocks.append(np.array(current))
        current = []
    else:
        current += line.split() 
```

如果为空，您可能必须摆脱第一个块。

您还可以检查[`mmap`已发布的基于解决方案](https://stackoverflow.com/questions/12223965/how-to-parse-block-data-from-a-text-file-into-an-2d-array-in-python/12227618#12227618)。

# php - Magento - 如何检查一个类别是否是另一个类别的孩子

> ID：12367595
> 
> 赞同：1
> 
> 时间：2012-09-11T10:21:34.020
> 
> 标签：php, magento

我在帮助器中检索产品所属的所有类别 ID：

```
$productCategories = $this->getProduct()->getCategoryIds(); 
```

这给了我一个类别 ID 的数组。就我而言，每种产品都只会属于一个子类别。从 ID 中，我需要根据哪些类别是哪些类别的子项来确定逻辑顺序。

目的是创建一个我可以调用的方法，并指定我想要的产品类别级别，它将返回该类别的路径。

我知道我可以像这样加载一个类别：

```
Mage::getModel('catalog/category')->load($categoryId) 
```

而且我知道我在 PHP 中正在做什么，但只是有点停留在使用这里来实现我想要的逻辑（和方法）上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:44:44.410

最简单的方法是测试它是否有关联的父 ID。parent_id > 0 表示它是较低级别的类别。如果 parent_id 等于 1，则意味着它比根类别低一级。

```
$category = Mage::getModel('catalog/category')->load($categoryId)
echo $category->getParentId(); 
```

我建议不要使用原始 SQL，因为这是不好的做法，数据库架构可能会在某些时候发生变化。

# java - 何时在表单 ID 前加上冒号

> ID：12367597
> 
> 赞同：5
> 
> 时间：2012-09-11T10:21:40.120
> 
> 标签：java, ajax, jsf, primefaces

我有两种形式的两个数据表，*forma*和*formg*。在每个表单中都有 a `p:dataTable`、*groupsa*和*groupsg*。在每个数据表中，都有一个自定义列显示名为*fava*和*favg*`h:graphicImage`的图像（ ）。

 **单击图像时，将更新其他数据表中的图像。

```
<p:ajax event="click" listener="#{agent.toogleFavorite}"
update="fava, :formg:groupsg:favg" /> 
```

没有冒号，我得到一个例外：

```
javax.faces.FacesException: Cannot find component with identifier "forma:agentsa:fava" referenced from "groupsg:0:favg". 
```

formg:groupsg:favg 和 :formg:groupsg:favg 有什么区别？

我正在使用 JSF2.0 和 PrimeFaces 3.4。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T10:48:48.030

前缀将`:`使其成为绝对客户端 ID，因此将相对于`UIViewRoot`而不是最近的 parent进行搜索`NamingContainer`。当您想要引用不在同一个最近的 parent 内的组件时，您应该（必须）使用它`NamingContainer`。和(and `<h:form>`)是组件。`<h:dataTable>``<p:dataTable>``NamingContainer`

另请参阅[如何找出组件的客户端 ID 以进行 ajax 更新/渲染？找不到从“bar”引用的表达式“foo”的组件以](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)获取详细说明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T10:57:09.900

如果要从页面的根目录搜索 ID，请在开头使用冒号。当调用更新的组件不在被更新组件的同一个 NamingContainer 内时，这是必要的。

当您想相对于同一个 NamingContainer 进行搜索时，不要使用它。当两个组件（调用更新的组件和正在更新的组件）都在同一个 NamingContainer 中时，您可以这样做。

顺便说一句，“NamingContainers”是所有将其 ID 附加到其子组件的组件，例如`<h:form>`、`<p:dataTable>`、`<p:accordionPanel>`等。只需查看生成的 HTML 以查看父级是否将其 ID 附加到其子级。

*   [命名容器 Javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)。
*   [JSF 用于通过 ID 查找组件的算法](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)。
*   [BalusC 在这里](http://docs.oracle.com/javaee/6/api/javax/faces/component/NamingContainer.html)详细解释了它 。**

# matlab - 使用线性分类器最小化训练误差

> ID：12367600
> 
> 赞同：0
> 
> 时间：2012-09-11T10:22:01.493
> 
> 标签：matlab, machine-learning

我试图找到一个线性分类器，在数据非线性可分的情况下最小化训练误差（0/1 损失）。具体来说，我正在寻找一种确定权重的方法：

```
sign(weights' * features) = label 
```

对于`features`\in {0, 1}^d, `label`\in {-1, 1} 和实值权重。我有 N 个训练实例，我希望上述等式适用于最大可能的实例数。我知道如果问题总是可分离的，那么像硬边距 SVM 这样的东西会起作用，但如果不是，我也需要找到解决方案。

（这个任务可能听起来有点深奥，但是请不要告诉我该怎么做而不是寻找一个最小训练误差的线性分类器——我所描述的绝对是我想要解决的问题！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:43:31.873

Matlab 包含一个非常易于使用的非线性 SVM 工具箱。看看`svmtrain`和`svmclassify`。要选择内核函数，您必须使用`'kernel_function'`参数，尽管默认值是`'linear'`您尝试执行的操作。`'boxconstraint'`参数让您选择`C`哪个是软约束的参数。

**编辑**

我发现[这篇](http://authors.library.caltech.edu/20237/1/Li2007p85212007_Ieee_International_Joint_Conference_On_Neural_Networks_Vols_1-6.pdf)论文描述了一种最小化 0/1 损失的方法。

# android - Android 浏览器 Intent 后退按钮

> ID：12367602
> 
> 赞同：3
> 
> 时间：2012-09-11T10:22:17.817
> 
> 标签：android, android-intent

您好，我正在使用以下意图从我的应用程序中启动浏览器：

```
String url = "XXXX";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

但是当我按下浏览器时，我想回到我的应用程序，而不是转到浏览器的选项。我该如何控制这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:24:40.230

**您不能**因为后退按钮的实现现在受**Browser Application**的控制。

在您的应用程序中实现 a`WebView`并处理**Back Key Pressed**是唯一的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:32:55.000

尝试：

```
Intent i = new Intent(Intent.ACTION_VIEW);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.setData(Uri.parse(url));
startActivity(i); 
```

任务（从启动它的活动到下一个任务活动）定义了用户可以移动到的活动的原子组。任务可以移到前台和后台；特定任务中的所有活动始终保持相同的顺序。你可以在这里找到更多信息：http: [//developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

# android - 每当启动服务时，Android全屏都不起作用

> ID：12367603
> 
> 赞同：2
> 
> 时间：2012-09-11T10:22:30.570
> 
> 标签：android

对于 kindle fire 中的应用程序，我想让屏幕没有软键。

为此，我将清单更新为

```
<activity
    android:name=".MainActivity"
    android:label="@string/title_activity_main"
    android:screenOrientation="landscape"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    super.onCreate(savedInstanceState);

    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main); 
    myLayout = (LinearLayout) findViewById(R.id.myLayout);
    myLayout.setBackgroundResource(R.drawable.bgfinal);

    createMainView();
}

@Override
public void onAttachedToWindow()
{
    this.getWindow().setType(WindowManager.LayoutParams.FLAG_FULLSCREEN); 

    super.onAttachedToWindow(); 
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    return false;
}

public void createMainView()
{
    LinearLayout HomePage = new LinearLayout(this);

    HomePage.setOrientation(LinearLayout.VERTICAL);

    HomePage.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    myLayout.addView(HomePage);
    TextView name = new TextView(this); 

    name.setGravity(Gravity.CENTER);
    name.setMinHeight(46);
    HomePage.addView(name);
    LinearLayout HomePageHorLayOut = new LinearLayout(this);
    HomePageHorLayOut.setOrientation(LinearLayout.HORIZONTAL);

    HomePageHorLayOut.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    HomePage.addView(HomePageHorLayOut);

    TextView name1 = new TextView(this);    

    name1.setGravity(Gravity.CENTER);
    name1.setText("     ");
    name1.setWidth(274);
    HomePageHorLayOut.addView(name1);

    final Button PIBtn=new Button(this);
    PIBtn.setBackgroundResource(R.drawable.pilatest);
    PIBtn.setLayoutParams(new LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    HomePageHorLayOut.addView(PIBtn); 
    PIBtn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            startActivity(new Intent(android.provider.Settings.ACTION_DATE_SETTINGS));
        }
    });
} 
```

在这种情况下，无论何时启动应用程序，屏幕都没有任何软键，但只要按下按钮，kindle fire 就会将用户带到时间设置框架，即使我们返回应用程序，软键也不会隐藏。

我发现，[已经报告了](https://stackoverflow.com/questions/10823529/android-full-screen-not-working-when-activity-is-launched-by-a-service)几乎相同的问题，但我已经尝试过这个答案，但结果是一样的。

从设置返回主应用程序时，是否有任何选项可以隐藏软键？

# sqlite - SQLite .tables 命令 - 禁用列输出格式

> ID：12367604
> 
> 赞同：0
> 
> 时间：2012-09-11T10:22:31.777
> 
> 标签：sqlite

当我执行`sqlite database.db .tables`命令时，它返回以下格式的表列表：

```
table1   table2     table3                
table4   table4     table6 
```

我想将其切换为：

```
table1
table2
table3 
```

我怎样才能改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:15:54.440

SQLite shell 工具不允许自定义`.tables`输出格式。

尝试通过管道输出`fmt -w1`。

# powershell - Powershell变量查询日期和时间差

> ID：12367606
> 
> 赞同：0
> 
> 时间：2012-09-11T10:22:41.090
> 
> 标签：powershell

大家早，

我有一个变量如下：`$machines = $user2,$name,$serial,$purchased` 存储在 $machines 中的示例数据是：

```
User1,
Laptop1,
xyz1234,
01/01/2010 
```

我想创建一个名为 $tobereplaced 的新变量，其中包含 $machines 中的所有记录，其日期距今天超过 4 年。

这个我期望的模糊逻辑代码类似于`$tobereplaced = $machines.$purchased | where {$_$purchased = -getdate > 4 years}`等等，但我无法弄清楚。

协助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:15:46.547

```
$fourYearsAgo = (Get-Date).AddYears(-4) 
$tobereplaced = $machines | Where-Object { (Get-Date $_[-1]) -le $fourYearsAgo } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:42:24.390

将日期转换为 DateTime 并将其与四年前的日期进行比较。像这样，

```
# Assuming $m[3] contains the timestamp, parse it as a DateTime and compare
# against a date four years ago.
if([DateTime]::Parse($m[3]) -le [DateTime]::Now.AddYear(-4)) {
  $tobereplaced += $m
} 
```

根据您的语言环境，您可能需要告诉`[DateTime]::Parse()`如何解析日期。2010 年 1 月 12 日是 2010 年 12 月 1 日还是 2010 年 1 月 12 日？

# java - 当两个线程从 datainputstream 读取时达到 EOS

> ID：12367612
> 
> 赞同：0
> 
> 时间：2012-09-11T10:23:00.887
> 
> 标签：java, multithreading, sockets, datainputstream

我正在编写一个程序，其中一个程序创建一个线程，该线程又从套接字读取，我的问题是当创建两个线程时，都从数据输入流中读取。一个线程正确读取，而另一个线程遇到 EOS 并返回 -1 作为读取的字节数。我已经同步了我的运行方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:30:54.890

一定是因为第一个线程读取流直到EOF。这是预期的行为。如果要拆分读取，例如在 100 字节后交换读取器，请使用[read(byte[] b, int off, int len)](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html#read%28byte%5b%5d,%20int,%20int%29)否则从一个线程读取数据然后共享它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:44:35.057

你在做什么没有意义。您不能按顺序或同时读取两次流。在这种情况下，如果线程 A 读取第一个字节，则线程 B 无法读取第一个字节。如果线程 A 读取了所有字节，则线程 B 无法读取其中任何一个。

# ios - Safari 喜欢在 iPhone/iPad 上下载

> ID：12367623
> 
> 赞同：1
> 
> 时间：2012-09-11T10:23:25.113
> 
> 标签：ios, safari, uiviewanimation, download

我需要有关`safari`用于下载的动画的帮助。当我们点击一​​个可下载的链接时，动画将开始 safari img 将从点击的位置弹出到 safari 窗口的右侧，下载将显示在向下箭头标记处。我怎样才能做到这一点`iOS`，我需要为 iPad/iPhone 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:05:12.753

您必须在 IBAction 中使用动画。使用 Core Animation OpenGL ES Quartz 2D 之一

# visual-c++ - 资源 (.rc) 文件包含标头忽略 Visual Studio 项目包含路径

> ID：12367627
> 
> 赞同：3
> 
> 时间：2012-09-11T10:23:35.520
> 
> 标签：visual-c++, include, visual-c++-2010, resource-files

我正在尝试在资源文件 (.rc) 中包含头文件。路径类似于`"folder_a/sub_folder_b/file_name.h"`

folder_a 所在的文件夹包含在项目的 c++ 包含目录中。

当我在同一个项目的 .cpp 文件中编写相同的#include 指令时，它可以正确编译，但是对于 .rc 文件，VS 找不到头文件。

在源代码编辑器窗口中，当我右键单击#include 指令并选择“打开文档”时，弹出错误指出它找不到文件，显示它搜索文件的路径，但项目的包含路径不是显示。

如果我对 .cpp 文件（同样是同一个项目）中的虚拟 #include 执行相同操作，则所有路径都会显示在错误消息中。

我的结论是 VC++ 不使用项目中为 .rc 文件中的 #include 指令定义的包含目录。

这是真的？如果不是 - 我做错了什么？如果是的话 - 有没有办法解决它？

我试图避免：

`#include "../../../parent_folder/folder_a/sub_folder_b/file_name.h"`

但如果我必须这样做，我会这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T11:53:05.890

添加文件的路径在

```
Project Properties->Resources->Additional Include Directories: ../../../parent_folder/folder_a/sub_folder_b 
```

# iphone - 使用 UIPanGestureRecognizer 拖动后必须点击两次才能选择 UITableViewCell

> ID：12367632
> 
> 赞同：3
> 
> 时间：2012-09-11T10:23:49.123
> 
> 标签：iphone, uitableview, uigesturerecognizer

我有一个`320x144`名为的小型视图控制器`SubViewController.h`，其中有一个 UITableView，其中包含 3 个单元格和一个部分。我已经使 tableView 不可滚动，并且还通过`CALayer`.

在另一个名为 MainViewController.mi 的视图控制器中，已将`SubViewController.h`其作为子视图添加到 this`MainViewController`中。使用`UIPanGestureRecognizer`我已经成功地将 SubViewContoller 拖动到我想要的任何地方。

我用`UIBarButtonItem`. 在子视图的 tableView 中选择一个单元格后，我通过一些动画让它从主视图中消失。

一切正常。

但是当我拖动子视图然后尝试选择一个单元格时，我必须点击该单元格两次。在第一次点击中，除了单元格变为蓝色（就像您在 tableView 中选择一个单元格时通常发生的那样），实际上什么都没有发生，但没有隐藏。如果我再次点击，它将隐藏。

在不拖动子视图的情况下，我可以通过一次触摸选择一个单元格，并且视图也会隐藏。

我已经编写了在子视图的`didSelectRowAtIndexPath:`方法中隐藏子视图的代码。我已经检查过，当我在拖动子视图后第一次选择时不会调用此方法。在第二次点击或触摸时，它会被调用。如果用户再次移动子视图，则会出现同样的问题。

拖动后，子视图的某些属性肯定发生了变化，我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:28:07.860

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    NSUInteger tapCount = [touch tapCount];

    switch (tapCount) {
        case 1:
            [self performSelector:@selector(singleTapMethod) withObject:nil afterDelay:.4];
            break;
        case 2:
            [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(singleTapMethod) object:nil];
            [self performSelector:@selector(doubleTapMethod) withObject:nil afterDelay:.4];
            break;
. . .
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:45:55.080

首先，当您希望显示您的子视图时，即单击您的 UIBarButtonItem：

```
-(IBAction)buttonClick
{
        //setup ur view dynamically as you like//
        PSview=[[UIView alloc]initWithFrame:CGRectMake(5, 5, 310,450)];
        PSview.backgroundColor=[UIColor blackColor];
        PSview.alpha=0.8;
        [PSview.layer setBorderColor: [[UIColor whiteColor] CGColor]];
        [PSview.layer setBorderWidth: 3.0];

    PSview.contentMode=UIViewContentModeScaleAspectFill;
    PSview.clipsToBounds=YES;
    [PSview.layer setBorderColor: [[UIColor whiteColor] CGColor]];
    [PSview.layer setBorderWidth: 3.0];

    [PSview addSubview:subView];
    [self.view addSubview:PSview]; 
```

}

然后稍后：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {
//since there are two tables in one view, you can differentiate them using if()
     if(tableView==subView) 
        {
            // ...ur code . ..
            // write your code what needs to happen when you click a row of your subView.
            [PSview removeFromSuperview];
        }
    if(tableView==mainView)
       {
      // write your code , what happens when user clicks row of the main table
       }
    } 
```

# delphi - 以文本形式获取方法

> ID：12367639
> 
> 赞同：1
> 
> 时间：2012-09-11T10:24:14.467
> 
> 标签：delphi, method-names

我需要保存一些属性并将其加载到数据库中，但我对此感到困惑。我有一个带有几种方法和一个按钮的表单。button.onclick 事件被分配给表单的方法之一。我需要将分配的方法的名称作为字符串（就像对象检查器“form1.proc1”）并将其保存到数据库中。稍后我需要从数据库中获取方法名称并将 button.onclick 分配给相应表单的方法。这可能吗？

```
Form1 = class(TForm)
...
procedure proc1(Sender: TObject);
procedure proc2(Sender: TObject);
procedure proc3(Sender: TObject);

Button1.OnClick = readMethodNameFromDatabase; 
...
saveMethodToDatabase(Button1.OnClick); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:40:01.290

You can obtain a method, given its name, like this:

```
function TForm1.MethodFromName(const Name: string): TNotifyEvent;
begin
  TMethod(Result).Data := Self;
  TMethod(Result).Code := MethodAddress(Name);
  if TMethod(Result).Code=nil then
    raise Exception.CreateFmt('Count not find method named %s', [Name]);
end; 
```

This is the mechanism that the RTL uses when reading your .dfm files. It relies on the method being published.

You can call it like this:

```
Button1.OnClick := TNotifyEvent(MethodFromName('Button1Click')); 
```

Naturally you'd substitute a database read in the final code.

* * *

As for the second part of your question, you can get the name of an event handler with this code:

```
MethodName(@Button1.OnClick); 
```

# perl - Perl：如何在 csv 文件上应用两个代码

> ID：12367640
> 
> 赞同：0
> 
> 时间：2012-09-11T10:24:19.123
> 
> 标签：perl

我有许多需要清理的 csv 文件（用空格替换标点符号并用其他单词替换某些单词......）我的 csv 文件有两列，在每一列中我用其他的替换一些字符。例如，在第一列中我替换 ; 由 xxx 并在第二列中替换；通过 ppp。为此，我在正则表达式中有两个 perl 代码，并在两个文件上切片一个 csv 文件：文件 1 = 第一列和文件 2 = 第二列，我运行第一列文件中第一列的代码.. .. 这根本不是一个好方法 :s !!!

那么我怎样才能有一个代码，其中第一个条件在 SAME 文件的第一列上运行，第二个条件在 SAME 文件的第二列上运行？

CSV 示例： [http](http://dbpedia.org/resource/Berenguer_de_Cru%C3%AFlles) ://dbpedia.org/resource/Berenguer_de_Cru%C3%AFlles Berenguer de Cruïlles [http://dbpedia.org/resource/Berenguer_de_Cru%C3%AFlles](http://dbpedia.org/resource/Berenguer_de_Cru%C3%AFlles) Berenguer de Cruïlles

IRI 是第一列，名称在第二列。

第一列的正则表达式中的 Perl 代码：

```
use strict;
use warnings;

open(IN,$ARGV[0]);
open(OUT,">RES_xxx.txt");
while(my $l = <IN>)
{
 chomp($l);
     $l =~ s/http:\/\//_/g;
     $l =~ s/,/vvv/g;
     $l =~ s/"/=/g;
     $l =~ s/'/#/g;
     $l =~ s/\(/ééé/g;
     $l =~ s/\)/èèè/g;
     $l =~ s/%/zzz/g;

     print OUT "$l\n";
}
close(IN);
close(OUT); 
```

第二列的正则表达式中的 Perl 代码：

```
 #! usr/bin/perl

    use strict;
    use warnings;

    open(IN,$ARGV[0]);
    open(OUT,">RES_xxx.txt");
    while(my $l = <IN>)
    {
     chomp($l);
     $l =~ s/\(.+\)/ /g;
     $l =~ s/'/ /g;
     $l =~ s/"/ /g;
     $l =~ s/,/ /g;
     $l =~ s/\./ /g;
     $l =~ s/:/ /g;
     $l =~ s/;/ /g;
     $l =~ s/!/ /g;
     $l =~ s/\?/ /g;
     $l =~ s/-/ /g;
     $l =~ s/_/ /g;
     $l =~ s/{/ /g;
     $l =~ s/}/ /g;
     $l =~ s/\+/ /g;
     $l =~ s/=/ /g;

     print OUT "$l\n";
    }
    close(IN);
    close(OUT); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:28:16.810

您可以通过分两步解析文件来做到这一点：

1.  第一步，替换`;`原始文件第一列中的 ；

2.  在第二步中，替换第一步`;`输出的第二列中的 。

这应该从您当前的解决方案中轻松完成：我想您有一个正则表达式来匹配第一列和第二列。您可以简单地更改这些正则表达式，而不是匹配第一列或第二列，而是在该列中替换它们。

如果您提供有关文件的更多详细信息以及当前如何拆分两列，我可能会提供一些具体示例。

编辑：

由于您似乎只有两列并且每列都不包含任何逗号，因此您可以这样做：

1.  逐行解析文件；

2.  在（列之间的分隔符）处拆分行`,`；

3.  在您在第 2 步得到的每个部分上，应用正则表达式来替换您想要的。

例如：

```
my $file = 'file.csv';
open(my $fh, '<', $file) or die "Can't read file '$file' [$!]\n";
while (my $line = <$fh>) {
  chomp $line;
  my ($firstCol, $secondCol) = split(/,/, $line);
  $firstCol =~ s/;/xxx/g;
  $secondCol =~ s/;/yyy/g;
  print "$firstCol, $secondCol\n";
} 
```

# iphone - iOS 的基于块的图像缓存库

> ID：12367647
> 
> 赞同：0
> 
> 时间：2012-09-11T10:24:35.503
> 
> 标签：iphone, objective-c, caching, static-libraries, block

什么是目前最快的基于块的 iOS 图像缓存库，它只返回 UIImage 而不是 NSData。

除了 MKNetworkKit :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:09:56.140

我不知道它是否是最快的，但一个非常好的库是[SDWebImage](https://github.com/rs/SDWebImage)。您可以使用块语法，它使用最少的代码从网络或缓存加载图像。

# php - 如何在 apache/php/sf1.4/jquery/flash/html 5 中实现流式 Web 应用程序？

> ID：12367648
> 
> 赞同：0
> 
> 时间：2012-09-11T10:24:37.597
> 
> 标签：php, flash, html, stream, webcam

我想在我的 Web 应用程序的两个用户之间实现一对一的网络摄像头对话（如 Skype 通话）。对于客户端，我发现这个非常好的带有 Flash 库的 jQuery 插件，但我不知道该过程的其余部分应该如何工作.. 将视频上传到服务器（可选择保存）流式传输视频。和其他用户接收它。

您能否就如何实施该系统提出任何脚本或任何工作流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:42:59.980

您不能依赖上传/下载视频的方法。您需要实时通信。您可以依靠在服务器端使用 AMF 服务器的 Flash 技术（客户端）。

您可以查看这个 OpenMeeting 开源项目
[http://incubator.apache.org/openmeetings/](http://incubator.apache.org/openmeetings)

# eclipse - 无法在 Eclipse Juno 上将 End 键解除绑定到“文本结束”

> ID：12367650
> 
> 赞同：13
> 
> 时间：2012-09-11T10:24:41.613
> 
> 标签：eclipse, eclipse-juno

有任何想法吗？
当我按下 END 键时，Eclipse 总是询问我是否应该执行“文本结束”或“行结束”。
在我在 Preferences 上取消绑定“Text end”的键绑定后，Eclipse 仍然问我。

版本：Juno 发布版本 ID：20120614-1722

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-28T03:56:29.277

显然，Juno 中存在一个错误，即使首选项未指示， **HOME**和**END键似乎也存在键冲突。**除非您首先手动创建冲突，然后使用恢复默认值按钮，否则恢复默认值按钮不会更正问题。

1.  转到窗口->首选项->常规->键
2.  使“行开始”和“文本开始”都只使用**HOME**键，以创建冲突。
3.  使“行结束”和“文本结束”都只使用**END**键，以产生冲突。
4.  单击应用，然后单击确定
5.  再次转到 Window->Preferences->General->Keys
6.  点击“恢复默认值”
7.  单击应用，然后单击确定

这应该使事情恢复同步，并解决问题；至少它在 Juno 上为我做了 32 位 Windows 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T13:16:56.140

我在 Linux 中使用 Kepler 版本。

关闭 eclipse 并打开它解决了我的 home/end 键问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T14:45:20.923

有时当我没有时间在 Kepler/CFEclipse 中制造冲突和重置时，添加 Shift 仍然可以让 End、Ctrl+End、Home 和 Ctrl+Home 选择文本，然后记得使用左箭头在 Home 后取消选择，右箭头在 End 后取消选择。

# ios - SKPaymentQueue：如果我从不调用 finishTransaction: 会发生什么？

> ID：12367652
> 
> 赞同：5
> 
> 时间：2012-09-11T10:24:47.173
> 
> 标签：ios, xamarin.ios, storekit

我的应用将允许用户通过应用内购买升级到 Pro 功能。我正在使用我自己的服务器验证收据数据，并且确认从我的服务器返回，我调用了 finishTransaction：

如果验证失败（可能不是由于盗版尝试）并且我不调用 finishTransaction: 会发生什么？它会无限期地留在队列中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:02:54.123

`FinishTransaction`如果没有被调用，我总是发现在某些时候我会出现奇怪的行为。

最好的选择是在 等中设置一个设置`StandardUserDefaults`，指示“我买了这个，但它失败了”，然后调用`FinishTransaction`。然后，当他们重新启动应用程序（或前台应用程序）时，您可以检查这一点并将其发送到您的服务器。

此外，如果您购买的不是消耗品（即不购买硬币或金钱），您只需致电`FinishTransaction`并告诉用户通过`RestoreTransaction`设置菜单中的按钮激活即可。无论如何，Apple 都需要此按钮来购买非消耗品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-18T13:56:40.720

以下是 Apple 告诉您的操作：当您收到应用内购买成功的通知时，有两种可能性：用户向您的银行账户付款，或者黑客伪造了该通知。

因此，您将收据发送到您的服务器，服务器会检查收据。百分百确保它不会拒绝任何正确的收据。当它告诉您的应用收据有效且已被处理时，您的应用会调用 finishTransaction。如果它告诉您的应用收据无效，没有人确切知道该怎么做，但调用 finishTransaction 不会有任何伤害。如果出现其他任何问题（您的服务器崩溃、互联网中断等），您不要*调用*finishTransaction，因为如果您这样做，客户会在没有得到任何东西的情况下赔钱，并且会非常生气。在这种情况下，您将在稍后再次被告知该交易。如果用户有两个或更多设备，可能在不同的手机上。所以要准备好交易可能会到达*任何*时间，即使您的应用没有*在该设备上*看到任何购买。

这就是为什么在用户默认值中存储任何内容都是错误的。用户按下“购买”按钮的设备不一定是最终进行购买的设备。（有些人拥有*许多*iOS 设备，即使在简单的情况下，用户也可能在他们的 iPhone 和 iPad 之间切换）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-22T10:04:46.503

> 如果对服务器的请求失败，我的应用程序将以什么方式再次收到通知以重试对我的服务器的请求？

如果您没有完成交易，那么它会保留在 SKPaymentQueue 中。当您的应用程序连接到 SKPaymentQueue 时，它​​会接收与其相关的所有交易。

所以你的应用需要完成所有未完成的交易。

# ios - iOS - 我开发的礼物应用程序

> ID：12367655
> 
> 赞同：1
> 
> 时间：2012-09-11T10:24:48.813
> 
> 标签：ios, app-store

是否可以赠送我为我的 Beta 测试人员开发的应用程序（不花费我任何费用）？或者是让应用程序免费然后告诉我的测试用户免费下载它然后再次付费的唯一方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:29:48.447

如果您进入 iTunes Connect 并进入您的应用程序，然后按应用程序图标下方的“详细信息”，则会出现一个名为“促销代码”的选项 - 这将为您提供许多代码，具体取决于您想要的数量. 然后，您可以分发这些代码，它们可以在商店中兑换，这样他们就可以免费下载您的应用程序。

```
iTunes Connect -> Applications -> [Your App] -> Details Button -> Promo Codes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:29:50.913

您是否考虑过促销代码？

# ruby-on-rails - 不包括 Rails / Heroku / 资产

> ID：12367657
> 
> 赞同：2
> 
> 时间：2012-09-11T10:25:01.900
> 
> 标签：ruby-on-rails, heroku, asset-pipeline, assets

我有一个使用 redactor（所见即所得编辑器）的应用程序，它可以在本地完美运行，当我上传它时它也可以工作，除了位于子文件夹中的配置文件在推送到 Heroku 时不会做任何事情。我尝试预编译，使用：

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

和

```
bundle exec rake assets:precompile 
```

我有 config.assets.enabled = false

不适用于 Heroku 的 config.js 文件作为 redactor-rails/config 包含在 application.js 中

可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:19:51.923

在推送之前，您是否已将 config.js 添加到本地 git 存储库？

[编辑]

还有几件事要检查。您是否使用了 redactor-rails gem，如果是，它是否在您的 gemfile 中？

```
gem 'jquery-rails'
gem 'redactor-rails' 
```

您的 gemfile.lock 是否已检入 git？

[编辑 2]

我现在已经对此进行了测试，实际上，redactor-rails 存在问题，这会导致自定义配置被 gem 的默认值覆盖。

在 github repo 上，有一个解决方案，我在 heroku 上测试过，并复制到这里：

> `rails generate redactor:config`生成文件`app\assets\redactor-rails\config.js`。这将无法在资产管道中正确工作，因为该`rake assets:precompile`任务仍将`config.js`来自 gem 而不是应用程序（尽管它在开发中不会正常工作）。请参阅[在生产环境中覆盖后端资产](https://stackoverflow.com/questions/7829726/overriding-backend-assets-in-production-environment)
> 
> 解决方案是创建自己的 config.js（或任何文件名）并将其放在 >app 的资产中的任何位置。然后，当需要编辑器时`//= require redactor-rails`，请使用：

```
//= require redactor-rails/redactor.min
//= require path/to/custom/config 
```

为我工作。希望有帮助。[https://github.com/SammyLin/redactor-rails/issues/16](https://github.com/SammyLin/redactor-rails/issues/16)

# c++ - 调试断言失败。空指针

> ID：12367662
> 
> 赞同：0
> 
> 时间：2012-09-11T10:25:13.430
> 
> 标签：c++

当我尝试执行我的应用程序“调试断言失败！，表达式无效空指针”的 .exe 时遇到此问题

经过一番谷歌搜索后，我想我知道问题出在哪里，但不知道如何解决它。

下面是相关的代码。

```
size_t idx;
// create the initial texture
atlases.push_back(new TextureAtlas( image_names.size()));
// load the texture
for (idx = 0; idx < image_names.size(); ++idx) {
//load the image
TextureInformation *ti = new TextureInformation (idx, folder_location_str, image_names[idx]); 
```

在初始化 ti 并声明本地选项卡（在 ms visual c++ 2008 中）处的值的行的代码执行期间，如下所示。

```
ti TextureInformation *
idx CXX0030: Error: expression cannot be evaluated
image_path {npos=4294967295 _Bx={...} _Mysize=??? ...} std::basic_string<char,std::char_traits<char>,std::allocator<char> >
image_name {npos=4294967295 _Bx={...} _Mysize=??? ...} std::basic_string<char,std::char_traits<char>,std::allocator<char> >
image CXX0017: Error: symbol "" not found 
```

出于某种原因： idx 和 image 在这里显示错误，这仅在 for 循环的第一次迭代期间发生。下面是第二次迭代时ti的内容

```
idx 0 unsigned int
+ image_path ".....Related\PNG\" std::basic_string<char,std::char_traits<char>,std::allocator<char> >
+ image_name "basn0g01.png" std::basic_string<char,std::char_traits<char>,std::allocator<char> >
+ image 0x00812830 {m_info={...} m_pixbuf={...} } png::image<png::basic_rgba_pixel<unsigned char> > * 
```

这就是我的 TextualInformation 的样子

```
class TextureInformation
{
public:
TextureInformation(size_t index, std::string path, std::string name)
: idx(index), image_path(path), image_name(name)
{
image = new png::image<png::rgba_pixel>(image_path + image_name,
png::convert_color_space<png::rgba_pixel>());
}
~TextureInformation(void)
{
delete image;
}
....
....
private:
size_t idx;
std::string image_path;
std::string image_name;
png::image<png::rgba_pixel>* image;
}; 
```

请告诉我是否需要其他详细信息。谢谢

# javascript - 图形所需的 D3 拾取节点

> ID：12367665
> 
> 赞同：0
> 
> 时间：2012-09-11T10:25:26.613
> 
> 标签：javascript, layout, svg, d3.js, nodes

我在屏幕上有一个图表，所有需要的数据都在一个名为 的变量中`jsonData`，这是我避免将 JSON 文件单独存储在服务器上的方法。现在`jsonData`包含的内容比我真正想要在开始时显示的要多，所以我必须选择所需的节点。这个想法是有一个根节点并显示与其直接连接的所有节点以及它们之间的连接。有没有简单的可能性来做到这一点？也许我可以换行

```
var node = svg.selectAll(".node")
  .data(jsonData.nodes)
.enter().append("g")
  .attr("class", "node")
  .call(force.drag); 
```

因为它不需要选择所有这些，但是我怎样才能选择需要的呢？我在后台有一个数组，其中包含所有需要的链接，我正在编写一个存储连接节点的部分。我不能将这个新数组直接提供给`svg.selectAll`-part，因为否则链接会崩溃（它们通过它在更大数组中的原始位置来引用节点的编号）。有什么提示吗？我无法通过谷歌研究找到任何例子，但如果你能在网上发现一些东西，请随时用链接回答！

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:28:32.643

```
function getNodesIndex(searchedFor){
    for(var i = 0; i < jsonData.nodes.length; i++){
        if(jsonData.nodes[i].name == searchedFor){
            return i;   
        }
    }//for
}

function getNetParts(searchedFor){
    reqNodes = null;
    reqNodes = [];
    reqLinks = null;
    reqLinks = [];

    var index = getNodesIndex(searchedFor);
    reqNodes.push(jsonData.nodes[index]);   

    for(var y = 0; y < jsonData.nodes[index].connections.length; y++){
        //stores every node connected with the main node in reqNode
        reqNodes.push(jsonData.nodes[jsonData.nodes[index].connections[y]]);    
    }

    for(var z = 1; z < reqNodes.length; z++){                   
        //circle through stored Nodes
        for(var c = 0; c < reqNodes[z].connections.length; c++){    
            //inspect all of their connections
            for(var w = 0; w < reqNodes.length; w++){
                //check all stored reqNodes for the one linked
                if(jsonData.nodes[reqNodes[z].connections[c]].name == reqNodes[w].name)           { 
                    //the node is available at reqNodes?
                    var source = null; 
                    var newLink = {
                        "source":z,
                        "target":w,
                        "value":1,
                    };                          
                    reqLinks.push(newLink);                 
                }
            }   
        }   
    }
} 
```

然后`update()`只需删除屏幕上的任何内容，获取新数据并重建可视化。以防万一有人遇到同样的麻烦... ;)

# c# - 用于文本文件格式转换的棘手 LINQ 查询

> ID：12367667
> 
> 赞同：1
> 
> 时间：2012-09-11T10:25:30.490
> 
> 标签：c#, linq

我在文本文件中有一个购物清单，如下所示：

```
BuyerId    Item;
1;         Item1;
1;         Item2;
1;         ItemN;
2;         Item1;
2;         ItemN;
3;         ItemN; 
```

我需要将此列表转换为如下格式：

```
Item1; Item2; Item3; ...; ItemN    <--- For buyer 1
Item1; ...; ItemN                  <--- For buyer 2
Item1; ...; ItemN                  <--- For buyer 3 
```

首先，我像这样解析 CSV 文件：

```
IList<string[]> parsedcsv = (from line in lines.Skip(1) 
                             let parsedLine = line.TrimEnd(';').Split(';')
                             select parsedLine).ToList(); 
```

然后我用 LINQ 对这些项目进行分组并将它们聚合为最终格式：

```
IEnumerable<string> buyers = from entry in parsedcsv
                             group entry by entry[0] into cart
                             select cart.SelectMany(c => c.Skip(1))
                                  .Aggregate((item1, item2) => 
                                      item1 + ";" + item2).Trim(); 
```

但是，碰巧，BuyerId 不是唯一的，而是在多次重复后重复（例如，它可以像这样重复：1,2,3,4,5,1,2,3,4,5,1 ,2,3 或类似的 1,2,3,1,2,3,1,2)。

没什么大不了的，我可以很容易地解决这个问题，方法是将项目分组在一个循环中，检查我一次只与一个买家打交道：

```
int lastBatchId = 0;
string currentId = parsedcsv[0][0];
for (int i = 0; i < parsedcsv.Count; i++)
{
    bool last = parsedcsv.Count - 1 == i;
    if (parsedcsv[i][0] != currentId || last)
    {
         IEnumerable<string> buyers = from entry in parsedcsv.Skip(lastBatchId)
              .Take(i - lastBatchId + (last ? 1 : 0))
         ...
         lastBatchId = i;
         currentId = parsedcsv[i][0];
         ... 
```

...但是，这不是最优雅的解决方案。我几乎可以肯定这只能用 LINQ 来完成。

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:28:52.710

你应该看看[GroupAdjacent](http://code.google.com/p/morelinq/source/browse/MoreLinq/GroupAdjacent.cs?r=fb6fc90407fc5af44485e9062d0c6f06606e1d10)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:53:56.137

我不确定这是最好的解决方案，但你说你想要一个纯 Linq 答案，所以在这里你有它：

```
var result = from r in (

    from l in lines.Skip(1)
    let data = l.Split(new string[]{";"," "}, 
                       StringSplitOptions.RemoveEmptyEntries)
    select new { Id = data.First(), Item = data.Skip(1).First() })
    .Aggregate(new 
                { 
                    Rows = Enumerable.Repeat(new 
                                            { 
                                                Id = string.Empty, 
                                                Items = new List<string>() 
                                            }, 1).ToList(), 
                    LastID = new List<string>() { "" } 
                }, 
                (acc, x) => 
                { 
                    if (acc.Rows[0].Id == string.Empty)
                        acc.Rows.Clear();
                    if (acc.LastID[0] != x.Id)
                        acc.Rows.Add(new 
                                    {
                                        Id = x.Id, 
                                        Items = new List<string>() 
                                    });
                    acc.Rows.Last().Items.Add(x.Item);
                    acc.LastID[0] = x.Id;
                    return acc; 
                }       
    ).Rows
select new 
{ 
    r.Id, 
    Items = string.Join(";", from x in r.Items 
                             select x) 
}; 
```

我写得很快，它可以改进，我特别不喜欢它，因为它使用了一些技巧，但它是纯 Linq 并且可以作为一个起点。

# extjs - 无限滚动不渲染

> ID：12367669
> 
> 赞同：4
> 
> 时间：2012-09-11T10:25:35.863
> 
> 标签：extjs, grid, extjs4.1, infinite-scroll

我正在尝试使用 ExtJS4.1 无限滚动功能。
正在进行 ajax 调用，返回数据，但仅加载第一页。
我究竟做错了什么？当我向下滚动时，没有任何反应。

我的代码：
商店：

```
Ext.define('BM.store.Tests', {
    extend: 'Ext.data.Store',
    model: 'BM.model.Test',

    storeId: 'Tests',
    buffered: true,
    leadingBufferZone: 50,
    pageSize: 25,
    purgePageCount: 0,
    autoLoad: true
}); 
```

代理在模型中：

```
proxy: {
    type: 'ajax',
    api: {
        create: '../webapp/tests/create',
        read: '../webapp/tests',
        update: '../webapp/tests/update'
    },
    reader: {
        type: 'json',
        root: 'tests',
        successProperty: 'success'
    }
} 
```

网格：

```
Ext.define('BM.view.test.MacroList', {
    extend: 'Ext.grid.Panel',
    alias:'widget.macro-test-list',

    store: 'Tests',

//    loadMask: true,
//    selModel: {
//        pruneRemoved: false
//    },
//    viewConfig: {
//        trackOver: false
//    },

    verticalScroller: {
        numFromEdge: 5,
        trailingBufferZone: 10,
        leadingBufferZone: 20
    },

    initComponent: function() {

        this.columns = [
            {
                xtype: 'gridcolumn',
                dataIndex: 'name',
                text: 'Name'
            },
            {
                xtype: 'datecolumn',
                dataIndex: 'created',
                text: 'Date Created',
                format: 'd-M-Y'
            },
            {
                xtype: 'datecolumn',
                dataIndex: 'changed',
                text: 'Last Updated',
                format: 'd-M-Y'
            }
        ];
        this.callParent(arguments);
    } 
```

我的实现与示例中的实现唯一不同的是，我的网格没有渲染到正文。
视口包含一个边框布局。
网格是西部区域面板的一部分：

```
{
    collapsible: true,
    region: 'west',
    xtype: 'macro',
    width: 500
} 
```

宏面板：

```
Ext.define('BM.view.Macro', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.macro',

    title: 'Tests',

    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    items: [
    {
        id: "macro-test-list-id",
        xtype: 'macro-test-list',
        flex: 1
    },
    {
        id: "macro-report-panel-id",
        xtype: 'macro-report-list',
        title: false,
        flex: 1
    },
    {
        id: "macro-report-list-id-all",
        xtype: 'macro-report-list-all',
        flex: 1,
        hidden: true,
        layout: 'anchor'
    }
    ]
}); 
```

我已经尝试了很多东西，改变布局，给网格一个固定的高度，等等......
没有任何效果，向下滚动，并且网格不刷新。
另一条信息：数据库包含 53 条数据记录。我收到了 3 个 ajax 调用，但只出现了前 25 条记录（如我所要求的那样）。
有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:04:24.660

听起来您可能忘记将`total`属性放入服务器的 JSON 响应中。你的答案是否有这样的结构：

```
{
    "total": 53, 
    "tests": [(...)]
} 
```

该`totalProperty`名称在 Reader 配置中定义，默认为`total`.

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader-cfg-totalProperty](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader-cfg-totalProperty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T16:21:04.163

你需要升级到 ExtJS 4.2！

# php - 优化网站上的sql查询

> ID：12367672
> 
> 赞同：0
> 
> 时间：2012-09-11T10:25:38.343
> 
> 标签：php, mysql, sql, optimization

所以我有一个朋友的网站，我正试图帮助他优化查询，因为他收到了来自主机的电子邮件，说他的网站`eating`资源太多。所以看着这个查询我在想，有什么方法可以更快或更智能（消耗更少的时间或更少的内存）我不知道哪种方法是最好的方法，可能是准备好的语句或对当前代码的一些改进。

```
$query=@mysql_query("
    SELECT 
        tl.title, 
        tl.dt, 
        tk.nr as nr2, 
        tk.name as cat, 
        tf.name, 
        tf.type, 
        tf.alt,
        tt.trupi
    FROM 
        ".$tab['news']." as tl, 
        ".$tab['category']." as tk, 
        ".$tab['foto']." as tf, 
        ".$tab['entry']." as th, 
        ".$tab['body']." as tt
    WHERE 
        tl.nr = '$nr' AND 
        tl.foto = tf.nr AND 
        tl.kategoria = tk.nr AND 
        tl.hyrja = th.nr AND 
        tl.trupi = tt.nr"); 
```

我会很感激你的所有建议，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:30:38.670

首先，您可以使用 ANSI 92 连接语法。

结合摆脱两个字母的首字母缩写词，这将有助于更清楚地了解您的查询在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:57:01.703

也许试试...

```
$nr = mysql_real_escape_string( $nr );

$tab['category'] = mysql_real_escape_string( $tab['category'] );
$tab['foto']     = mysql_real_escape_string( $tab['foto'] );
$tab['entry']    = mysql_real_escape_string( $tab['entry'] );
$tab['body']     = mysql_real_escape_string( $tab['body'] );

$query = @mysql_query("
    SELECT 
        tl.title, 
        tl.dt, 
        tk.nr as nr2, 
        tk.name as cat, 
        tf.name, 
        tf.type, 
        tf.alt,
        tt.trupi
    FROM 
        ".$tab['news']." as tl
        LEFT JOIN ".$tab['category']." as tk ON ( tk.nr = tl.kategoria )
        LEFT JOIN ".$tab['foto']." as tf ON ( tf.nr = tl.foto )
        LEFT JOIN ".$tab['entry']." as th ON ( th.nr = tl.hyrja )
        LEFT JOIN ".$tab['body']." as tt ON ( tt.nr = tl.trupi )
    WHERE 
        tl.nr = '$nr'"); 
```

请注意在 SQL 字符串中使用变量之前对其进行转义（请参阅[Bobby 表](http://bobby-tables.com/)。）

要记住的另一件事是数据库的整体设计。如果表之间存在“一对一”关系的任何实例，则应将这两个表折叠成一个表，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:28:30.023

无需对每个表都使用 as，也可以`Explain`用于检查查询的优化程度，您可以在此处找到一个很好的指南[http://www.databasejournal.com/features/mysql/article.php/1382791/Optimizing- MySQL-Queries-and-Indexes.htm](http://www.databasejournal.com/features/mysql/article.php/1382791/Optimizing-MySQL-Queries-and-Indexes.htm)关于如何解释解释的结果

所有添加到查询的操作都会以一种或另一种方式降低性能，但我认为瓶颈在于连接本身以及关联表的方式。在将一个表与另一个表关联时尝试使用整数（ids），如果不可能，请确保您关联的列已编入索引。我可以肯定，这会增加您的查询。

# database - 我可以使用什么单元测试框架来测试数据库中数据的质量

> ID：12367673
> 
> 赞同：0
> 
> 时间：2012-09-11T10:25:43.943
> 
> 标签：database, unit-testing, data-integrity

我有一个数据库，我们使用它来显示通过应用计数等分组的报告。我只需要拥有最好的单元测试框架，它可以帮助我自动查询数据库并验证结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:48:38.497

您可以使用[DBUnit](http://www.dbunit.org/)。这是一个很好的数据库测试框架。您可以将它与 JUnit 一起使用，但由于它们与 DB 相关，它们通常不再被视为单元测试。那里有很多教程。

另一件事是，如果您使用 Spring Framework 和 Hibernate，您可以连接您的 DAO 并在没有 DBUnit 的情况下创建测试用例。如果您使用的是遗留数据库并且难以创建数据样本，这可能会有所帮助。

# iphone - FQL 从相册中获取所有照片

> ID：12367677
> 
> 赞同：0
> 
> 时间：2012-09-11T10:26:05.887
> 
> 标签：iphone, objective-c, ios, facebook-fql, fql.multiquery

我`FBRequestConnection`在 iPhone 上使用从同一个相册中获取所有照片。
我想从包含 11 张照片的相册中获取所有照片，并且`aid="100001996111955_72360"`.
我写了下面的代码，但它返回了 4 张照片，而不是 11 张。

```
SELECT pid, src_big FROM photo WHERE aid="100001996111955_72360" 
```

谁能告诉我为什么我不能得到所有的照片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:21:24.707

当我在[Graph API Explorer](https://developers.facebook.com/tools/explorer/145634995501895/?fql=SELECT%20pid%2C%20src_big%20FROM%20photo%20WHERE%20aid%3D%22100001996111955_72360%22)中运行 FQL 查询时，我返回了 11 个项目。如果您只看到 4 个项目，那么您的脚本中肯定还有另一个问题。

另一条评论：`pid`并且`aid`正在弃用的道路上。为了将来证明您的脚本，您应该尽可能使用`object_id`。

```
SELECT object_id, src_big FROM photo WHERE album_object_id = 313997665343435 
```

( `SELECT object_id FROM album WHERE aid="100001996111955_72360"`= 313997665343435)

# javascript - 基于 URL 内容的表格内容

> ID：12367678
> 
> 赞同：0
> 
> 时间：2012-09-11T10:26:06.580
> 
> 标签：javascript, html, url

我编写了一段 JavaScript，以便当用户将鼠标悬停在网站中的特定文本上时，会弹出一个表格。

目前，为了调试目的，表格内容是用几个单词硬编码的，它会根据需要显示。

内容 html 看起来像 -

```
<tr>
  <th>Name</th>
  <th>Age</th>
</tr>

<tr>
  <td>Jambo</td>
  <td>22</td>
</tr> 
```

所以表格内容显示了上述内容。

我现在想根据通过访问 URL 查看的报告的内容来制作表格的内容。

我确实试过这个 -

```
<tr>
  <td><a href="url">Link text</a></td>
</tr> 
```

但当然，这只是提供了报告的链接，并没有真正打开内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:42:37.433

一个绝对可怕但快速的方法是：

> 1.  Ajax 请求您的**网址**
> 2.  获取带有html标签的表格数据作为ajax responseText
> 3.  document.getElementById(' **yourmouseoverdivid** ').innerHTML = responseText

另一种更好的方法是：

> 1.  使用 ajax 获取表数据为 json
> 2.  使用 javascript 和获取的 json 创建嵌套的表格 html 元素**例如：document.createElement('table')**
> 3.  将这些元素附加到 document.getElementById(' **yourmouseoverdivid** ')

# c# - RichTextBox 更改文本颜色

> ID：12367682
> 
> 赞同：0
> 
> 时间：2012-09-11T10:26:19.887
> 
> 标签：c#, winforms, richtextbox

我输入了一些基本文本的 RichTextBox 控件。我希望以一种方式自定义它，当用户输入或粘贴一些文本时，它的字体颜色与 BASIC TEXT 不同。

我在 KeyDown 事件上更改了 SelectionBackColor 属性，但是当用户尝试仅复制 BASIC TEXT 的一部分时也会发生这种情况。

```
 private void richTextBox1_KeyDown(object sender, KeyEventArgs e)
    {
        RichTextBox richTextBox1 = sender as RichTextBox;
        richTextBox1.SelectionBackColor = Color.LightCoral;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:30:37.000

而不是`KeyDown`，使用`TextChanged`事件：

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
{
    RichTextBox richTextBox1 = sender as RichTextBox;
    richTextBox1.SelectionBackColor = Color.LightCoral;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:41:37.547

试试这个 ：

```
private void richTextBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Control && e.KeyCode == Keys.V)
        {
            richTextBox1.SelectionBackColor = Color.LightCoral;

        }
        else
        {
            richTextBox1.SelectionBackColor = Color.White;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:00:40.327

```
private void richTextBox1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Control && e.KeyCode == Keys.V)
    {
        richTextBox1.SelectionBackColor = Color.LightCoral;

    }
    else
    {
        richTextBox1.SelectionBackColor = Color.White;
    }
} 
```

# cuda - 下三角矩阵上的 CUDA 循环

> ID：12367685
> 
> 赞同：3
> 
> 时间：2012-09-11T10:26:30.723
> 
> 标签：cuda

如果有一个矩阵，我只想访问矩阵的下三角部分。我正在尝试找到一个好的线程索引，但到目前为止我还没有管理它。有任何想法吗？我需要和索引来循环下三角矩阵，说这是我的矩阵

```
1 2 3 4
5 6 7 8
9 0 1 2
3 5 6 7 
```

索引应该去

```
1 
5 6
9 0 1
3 5 6 7 
```

在此示例中，一维数组的位置 0,4,5,8,9,10,12,13,14,15。

CPU循环是：

```
for(i = 0; i < N; i++){
    for(j = 0; j <= i; j++){
             ....... 
```

其中 N 是行数。我在内核中尝试了一些东西：

```
 __global__ void Kernel(int N) {

        int row = blockIdx.x * blockDim.x + threadIdx.x;
        int col = blockIdx.y * blockDim.y + threadIdx.y;
        if((row < N) && (col<=row) )
           printf("%d\n", row+col);
      } 
```

然后这样称呼它：

```
 dim3 Blocks(1,1);
 dim3 Threads(N,N);
 Kernel<<< Blocks, Threads>>>(N); 
```

但它根本不起作用。我得到什么：

```
0
1
2
2
3
4 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T12:32:20.667

您正在启动一个线程网格，然后禁用对角线以上的所有线程，即约 50% 的线程将什么都不做，这是非常低效的。

您的代码的简单修复是修复索引：

```
__global__ void Kernel(int N)
{
  int row = blockIdx.x * blockDim.x + threadIdx.x;
  int col = blockIdx.y * blockDim.y + threadIdx.y;
  if((row < N) && (col<=row) )
    printf("%d\n", row * N + col);
} 
```

也许更有效但更复杂的解决方案是启动正确数量的线程并转换索引。看看[这个答案](https://stackoverflow.com/a/6948441/214473)的起点......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T12:00:57.973

问题是我们正在索引一维数组，因此为了映射它，我们需要将行索引乘以列数，因此遵循示例：

```
__global__ void Kernel(int N) {
        int row = blockIdx.x * blockDim.x + threadIdx.x;
        int col = blockIdx.y * blockDim.y + threadIdx.y;
        if((row < N) && (col<=row) )
           printf("%d\n", row*N + col);
 } 
```

# java - 如何在 wicket 中创建可排序的数据视图

> ID：12367693
> 
> 赞同：0
> 
> 时间：2012-09-11T10:26:48.803
> 
> 标签：java, wicket

我遵循这个例子：[http ://www.wicket-library.com/wicket-examples/repeater/wicket/bookmarkable/org.apache.wicket.examples.repeater.SortingPage?0](http://www.wicket-library.com/wicket-examples/repeater/wicket/bookmarkable/org.apache.wicket.examples.repeater.SortingPage?0)

这是我的代码：

```
 SortablePlayerDataProvider dp = new SortablePlayerDataProvider();
    final DataView<Player> dataView = new DataView<Player>("rows", dp, 10) {

        private static final long serialVersionUID = 1L;

        @Override
        protected void populateItem(final Item<Player> listItem) {
            final Player player = listItem.getModelObject();
            listItem.setModel(new CompoundPropertyModel<Player>(player));
            listItem.add(new Label("name", player.getName()));
            listItem.add(new Label("surname", player.getSurname()));
            listItem.add(new Label("club", player.getClub()));
        }
    }; 
```

和提供者：

```
public class SortablePlayerDataProvider extends SortableDataProvider<Player> {

    private static final long serialVersionUID = 1L;

    public SortablePlayerDataProvider() {
        setSort("surname", SortOrder.ASCENDING);
    }

    @Override
    public Iterator<Player> iterator(int first, int count) {
        return tournamentService.getAllPlayer().subList(first, first + count).iterator();
    }

    @Override
    public int size() {
        return tournamentService.getAllPlayer().size();
    }

    @Override
    public IModel<Player> model(final Player object) {
        return new LoadableDetachableModel<Player>() {

            private static final long serialVersionUID = 1L;

            @Override
            protected Player load() {
                return object;
            }
        };
    }
} 
```

但排序不起作用，我不知道为什么。怎么了 ？是否有 som optins 如何调试它？

更新：

有人可以解释一下并显示这个 dataProvider 排序项目在哪里吗？

因为当我打印它时：

```
 Iterator<Player> a = dp.iterator(0, dp.size());
    for (Iterator<Player> iterator = a; iterator.hasNext();) {
        System.out.println(iterator.next());
    } 
```

项目仍然没有排序，当我寻找这个提供者的实现时，我找不到这个迭代器在哪里排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:39:06.220

我已经看到了上面示例的代码。也许您可能需要使用组件 OrderByBorder

更新

数据排序应该由您的数据源执行，SortableDataProvider 不会自己执行。如果您查看示例代码，您会发现它使用 ContactsDatabase 作为数据源。此类保留两个排序列表，一个用于“名称”，一个用于“姓氏”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:40:24.513

好的，我发现它为什么不起作用。在 wicket 示例中，当您定义迭代器时，项目正在排序：

```
 return getContactsDB().find(first, count, getSort()).iterator(); 
```

但我不明白为什么我需要对项目进行排序。然后我可以在创建迭代器时创建简单的新 IDataProvider 排序项，并且它也已排序。这门课真的很晦涩...

# php - DOMPDF 在 Mac 中工作而不是在 Windows 和 CentOS 中

> ID：12367694
> 
> 赞同：1
> 
> 时间：2012-09-11T10:26:52.687
> 
> 标签：php, dompdf

我在我的 Moodle 项目中使用 DOMPdf，在此我试图将 html 制作为 pdf。它在我的本地机器（Mac 系统）上运行良好。我将相同的代码放在 Windows 机器和 CentOS 服务器中；它不工作。我尝试了几个小时我无法得到解决方案。我在所有环境中都使用 PHP 5。

我尝试的解决方案：

1.  授予 DOMPDF 文件夹的完整权限 (777)。

以下是我的代码

```
require_once("dompdf/dompdf_config.inc.php");

$Test='<html>
        <head>

        <title>Insert title here</title>
        </head>
        <body>    
         Sample Text
        </body>
        </html>';
    $dompdf = new DOMPDF();
    $dompdf->load_html($Test);
    $dompdf->render();
    $dompdf->stream("test.pdf");
echo $dompdf; 
```

我不确定我做错了什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:01:22.193

我认为这个答案会帮助大家......

```
<?php
 require_once("C:/dompdf/dompdf_config.inc.php");

$Test='<html>
    <head>
    <title>Insert title here</title>
    </head>
    <body>    
     Sample Text
    </body>
    </html>';
$dompdf = new DOMPDF();
$dompdf->load_html($Test);
$dompdf->render();
$dompdf->stream("test.pdf");
//echo $dompdf;
?> 
```

# c# - 为什么我的所有者绘制的列表视图控件中没有显示选定的项目？

> ID：12367696
> 
> 赞同：2
> 
> 时间：2012-09-11T10:27:03.377
> 
> 标签：c#, winforms, listview

我正在制作一个所有者绘制的列表视图，其中我在列表视图中绘制形状。我已经使用`Listview_DrawItem`事件做到了这一点。我的问题是，当我运行应用程序时，我无法选择在列表视图中绘制的形状。

```
private void AddItem(ListView lvw, string Shape_name, Color Shape_color)
    {
        // Make the item.
        ListViewItem item = new ListViewItem(Shape_name);

        // Save the Shape object  in the Tag property.
        Shapes myShape = new Shapes(Shape_name,Shape_color);

        item.Tag = myShape;
        item.SubItems[0].Name ="ShapeName";

        // Add subitems so they can draw.
        item.SubItems.Add("ShapeColor");

        // Add the item to the ListView.
        lvw.Items.Add(item);
    }

    // Draw the item. In this case, the Shape_name's logo.
    private void lvwServers_DrawItem(object sender, DrawListViewItemEventArgs e)
    {

        // Get the ListView item and the Shapes object.
        ListViewItem item = e.Item;

        Shapes myShape = item.Tag as Shapes;

        // Clear.
        e.DrawBackground();

        // Smoothing mode for blur free drawing
        e.Graphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;

        Rectangle rect = new Rectangle(e.Bounds.Left + 10, e.Bounds.Top + 10, 41, 41);

        using (SolidBrush br = new SolidBrush(myShape.ShapeColor))
        {

            e.Graphics.FillRectangle(br, rect);
        }

        e.Graphics.DrawRectangle(Pens.Black, rect);

        e.Graphics.ResetTransform();
        e.DrawFocusRectangle(); 
```

另外，我无法更改`e.bound`属性值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:40:50.470

您可以将 DrawItem 事件处理程序中的绘图代码基于 DrawListViewItemEventArgs 参数中可用的 e.State 的值。

```
bool isSelected = e.State == ListViewItemStates.Selected; 
```

这样，您可以决定在选择项目时要更改已绘制项目的哪些元素。

# android - AndEngine GLES2 在模拟器问题上运行

> ID：12367699
> 
> 赞同：0
> 
> 时间：2012-09-11T10:27:22.330
> 
> 标签：android

有什么方法可以在 android 模拟器上运行 AndEngine GLES2 应用程序，还是严格限制在 android 设备上。任何建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:58:11.000

终于我了解了。您所要做的就是创建一个启用了 GPU Emulation 的模拟器，然后如果您的 pc 显卡足以支持这些图形，您的模拟器将能够处理 GLES2 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:09:19.687

GLES2 使用 GPU，而模拟器不支持使用 GPU。所以我不认为这是可能的。

# facebook - 支付订阅-测试回调

> ID：12367700
> 
> 赞同：10
> 
> 时间：2012-09-11T10:27:32.283
> 
> 标签：facebook, payment

我们目前正在考虑实施 Facebook 的新[订阅付款](https://developers.facebook.com/docs/payments/subscriptions/)。我们已经为 Facebook 设置了有效的支付设置，并且回调 url 设置正确。如果我进行定期测试付款，回调会被正确调用。

测试订阅的设置是根据[这个](https://developers.facebook.com/docs/payments/subscriptions/#testusers)。但是，如果我选择总是成功或总是失败，则不会对付款回调 url 进行回调。

它确实返回一个表示订阅处于活动状态且具有 ID 的对象。

```
{status: "active", subscription_id: 204626XXXXXX} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:05:16.867

如果订阅状态发生变化，您是否可能只收到发送到回调 URL 的请求，并且您已经有用户的活动订阅？我认为在这种情况下您会收到客户端错误，但我没有看到任何证据表明存在错误代码。

如果您为同一个帐户多次进行常规测试付款会怎样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:43:20.423

Facebook 订阅不是常规购买。

您必须**在“payment_subscriptions”对象上设置实时更新**并监听这些可用字段：（“status”、“pending_cancel”、“payment_status”、“last_payment”）。请参阅文档： http: [//developers.facebook.com/docs/payments/subscriptions/](http://developers.facebook.com/docs/payments/subscriptions/)，有一个名为“消费实时更新”的部分

每次用户订阅或取消（或隐式续订）时，您都会收到相关的订阅 ID。然后，您可以向 Graph API 询问有关此订阅对象的信息。

您还可以通过“/payment.subscriptions”上的 Graph Api 调用检索任何用户的订阅列表

所有这些调用都必须使用 App 访问令牌执行。

我必须承认，如果您总是执行“同步”购买，这个过程会很烦人。我确实实现了订阅，这是一次漫长而痛苦的旅行；）

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:07:31.207

订阅被映射到 Facebook 端的 OpenGraph 对象，以及虚拟货币，所以，我怀疑服务器端没有回调，你所能做的就是做某种 http 帖子（例如通过表单） insde FB.ui 回调并在 Servlet 中实现 doPost 方法。这将是一种将订阅信息获取到某些数据源的方法。

编辑：关于[支付回调](http://developers.facebook.com/docs/payments/callback/)，那些订单信息是基于OG对象计算的，facebook不会发送payments_get_items请求，所以订阅创建后无法获取订单信息。另一方面，您可能会在对应的 servlet 中收到一些 payment_status_update（我说的是 servlet，因为我是一名 Java 程序员，但总体思路适用于您选择的任何技术）

# php - 从 html 表单调用带有参数的 javascript 函数

> ID：12367702
> 
> 赞同：0
> 
> 时间：2012-09-11T10:27:37.580
> 
> 标签：php, javascript, html, javascript-events

您好我正在尝试将参数传递给 javascript 函数`getConfirmation()`，我的代码如下。根本不执行对函数的调用。所以我想我打电话给它会出错。请帮忙。

```
<html>
<head>
<script type="text/javascript">
<!--
function getConfirmation(var value1)
{

   var retVal = confirm("Pop Code:" + value1 + "\n" + "Amount:" + "" + "\n" + "Updated Balance:" + "" + "\nPlease confirm!");
   if( retVal == true )
   {
      alert("User wants to continue!");
      return true;
   }else{
      alert("User does not want to continue!");
      return false;
   }
}
//-->
</script>
<body>
<div align="center" style="width:100%; margin: 0px auto;">

<div align="center" style="width:100%; margin: 0px auto; background-color:f0f0f0">
<div id="child" style="  align="center" style="width:100%; margin:0px auto;" >
<div style=" right:5%; top:5%; z-index: 100; position:absolute;">

</div>
<img src = "images/header.png" width ="100%"  />

</div>
</div>
<div align="center">
<?php
require 'config.php';
mysql_connect ($dbhost, $dbusername, $dbuserpass);
mysql_select_db($dbname) or die('Cannot select database');
$query = "SELECT * FROM cust_info;";
$result = mysql_query($query) or die(mysql_error());

echo "</br>";
echo "<table border='1'>
<tr>
<th>Pop Code</th>
<th>Open_Date</th>
<th>Maturity_Date</th>
<th>Amount</th>
<th>Balance</th>
<th>Col Amount</th>
</tr>";

while($row1 = mysql_fetch_array($result))
  {
  if ($row1['status'] == 'DONE')
  {
  continue;
  }
  echo "<div class=\"addform\"><form method='post' action=\"txn.php\">\n";
  echo "<tr>";
  echo "<td><input type='hidden' name='pop_code' value='".$row1['pop_code']."'>" . $row1['pop_code'] . "</td>";
  echo "<td><input type='hidden' name='open_date' value='".$row1['open_date']."'>" . $row1['open_date'] . "</td>";
  echo "<td><input type='hidden' name='mat_date' value='".$row1['mat_date']."'>" . $row1['mat_date'] . "</td>";
  echo "<td><input type='hidden' name='depoamt' value='".$row1['depoamt']."'>" . $row1['depoamt'] . "</td>";
  echo "<td><input type='hidden' name='balance' value='".$row1['balance']."'>" . $row1['balance'] . "</td>";
  echo "<td>" . "   <input type=\"text\" name=\"amount\"/>\n" . "</td>";
  //echo "<td>" . "<input type=\"button\" value=\"Make Entry\" onclick=\"getConfirmation();\"" . "</td>";
  echo "<td>" . "   <input type=\"image\" src=\"images/update.png\" onclick=\"getConfirmation(".$row1['pop_code'].");\" alt=\"Update Row\" class=\"update\" title=\"Update Row\">\n" . "</td>";
  echo "</tr>";
  echo "</form></div>";
  }
echo "</table>";
?>
<div align="center" style="width:100%; margin: 0px auto;">
<img src="images/footer.png" style="width:100%;"/>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:29:33.063

它应该是：

```
function getConfirmation(value1){ 
```

和形式：

```
echo "<div class=\"addform\"><form method='post' action=\"txn.php\" onsubmit=\"return getConfirmation('".$row1['pop_code']."');\">"; 
```

并且您可以不理会提交图像而无需任何 javascript 调用。

最终代码：

```
 echo "<div class=\"addform\"><form method='post' action=\"txn.php\" onsubmit=\"return getConfirmation('".$row1['pop_code']."',this,'".$row1['balance']."');\">\n";
  echo "<tr>";
  echo "<td><input type='hidden' name='pop_code' value='".$row1['pop_code']."'>" . $row1['pop_code'] . "</td>";
  echo "<td><input type='hidden' name='open_date' value='".$row1['open_date']."'>" . $row1['open_date'] . "</td>";
  echo "<td><input type='hidden' name='mat_date' value='".$row1['mat_date']."'>" . $row1['mat_date'] . "</td>";
  echo "<td><input type='hidden' name='depoamt' value='".$row1['depoamt']."'>" . $row1['depoamt'] . "</td>";
  echo "<td><input type='hidden' name='balance' value='".$row1['balance']."'>" . $row1['balance'] . "</td>";
  echo "<td><input type=\"text\" name=\"amount\"/>\n</td>";
  echo "<td><input type=\"image\" src=\"images/update.png\" alt=\"Update Row\" class=\"update\" title=\"Update Row\">\n</td>";
  echo "</tr>";
  echo "</form></div>"; 
```

和 javascript：

```
<script type="text/javascript">
<!--
function getConfirmation(value1,form,balance)
{

   var retVal = confirm("Pop Code:" + value1 + "\n" + "Amount:" + form.amount.value + "\n" + "Updated Balance:" + balance + "\nPlease confirm!");
   if( retVal == true )
   {
      alert("User wants to continue!");
      return true;
   }else{
      alert("User does not want to continue!");
      return false;
   }
}
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:38:08.877

first call the function from your button code just like this

```
echo "<td><input type="image" src="images/update.png" onclick="getConfirmation('".$row1['pop_code']."');" alt="Update Row" class="update" title="Update Row"></td>"; 
```

> when we define the function parameter the there is no need to declare variable as using var keyword so after that replace your javascript function declaration

```
<script type="text/javascript">
function getConfirmation(value1)
{

   var retVal = confirm("Pop Code:" + value1 + "\n" + "Amount:" + "" + "\n" + "Updated Balance:" + "" + "\nPlease confirm!");
   if( retVal == true )
   {
      alert("User wants to continue!");
      return true;
   }else{
      alert("User does not want to continue!");
      return false;
   }
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:45:28.977

我认为代码有两个问题。

1.  `var`从函数中删除
    `function getConfirmation(value1)`

2.  该代码`onclick=\"getConfirmation(".$row1['pop_code'].");\"`将在 $row1['pop_code') 的整数值上创建正确的代码，即 getConfirmation(10)，但是当代码是文本时，它将是不正确的 getConfirmation(test)。所以你必须添加引用值。
    IE`onclick=\"getConfirmation('".$row1['pop_code']."');\"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:29:39.390

尝试改变

```
function getConfirmation(var value1) 
```

至

```
function getConfirmation(value1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:30:38.230

您不能将`var`关键字用作函数参数。

尝试这个

```
function getConfirmation(value1){

  //Your function

} 
```

# mysql - 需要基本的基于 wordpress 的 sql 查询帮助

> ID：12367705
> 
> 赞同：1
> 
> 时间：2012-09-11T10:27:45.687
> 
> 标签：mysql, wordpress

我对 SQL 查询不太感兴趣，所以可以在这里帮忙。

在 wp_postmeta 表中，我想更新 meta_key 字段等于 file_1、file_2 或 file_3 的所有 meta_value 字段。我想在 meta_value 的当前内容前面加上一串文本（字符串当前是 image-1.jpg 或类似的）。

我很乐意通过 phpmyadmin 运行查询。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:36:00.290

像这样的东西应该工作。请参阅[更新语法](http://dev.mysql.com/doc/refman/5.5/en/update.html)。

```
UPDATE wp_postmeta
SET meta_value =  CONCAT("image-1.jpg", meta_value)
WHERE meta_key IN(file_1, file_2, file_3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:36:31.857

您可以尝试：

```
UPDATE wp_postmeta
SET meta_value=CONCAT("image-1.png", meta_value)
WHERE meta_key="file_1" OR meta_key="file_2" OR meta_key="file_3"; 
```

之前试试。我没有测试它。

# android - 强制android比它滚动得更远

> ID：12367706
> 
> 赞同：0
> 
> 时间：2012-09-11T10:27:52.440
> 
> 标签：android, android-layout, scrollview

如您所见，我有一个底栏（它没有使用 TabHost 或任何东西，部分原因是它显然已贬值，但部分原因是这仅适用于应用程序中的两个活动，因此我不需要只做一个标签主机两页）。无论如何，该标签栏“下方”有内容。Android 不会进一步滚动，因为它认为内容是可见的，但实际上并非如此。

我的问题是将内容放在标签栏上方的最佳方式是什么。

我的一些想法：

1.  设置高度（因为标签栏设置高度）和 wrap_content 宽度的透明图像。这是行不通的。
2.  使用标签栏的背景，使其看起来不显眼。
3.  使底部栏不透明，并在那里放置任何东西，并设置高度。

您可能对我的 xml 结构感兴趣：

```
 <RelativeLayout>
   <ScrollView>
     <LinearLayout>
       <RelativeLayout>
         <LinearLayout>

         </LinearLayout>

         <LinearLayout>

         </LinearLayout>
       </RelativeLayout>
     </LinearLayout>
   </ScrollView>
   <LinearLayout>
     TAB BAR
   </LinearLayout>
 </RelativeLayout> 
```

![截屏](../Images/70714d17941af6384696844dfed4aca0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:37:46.063

如果您的 TAB BAR 具有固定高度，则可以设置`ScrollView`边距底部属性。这将始终`ScrollView`在 TAB BAR 上方显示您的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:40:21.073

Alternatively to @Antarix Tandon's answer, you could change your root relative layout to be a vertical linear layout.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:46:35.307

在 xml 中给标签栏一个视图 id，然后将出现在它后面的视图设置为标签栏视图的“layout_above”，并确保它们都在同一个 RelativeLayout 内。

因此，例如：

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

        <LinearLayout
            android:id="@+id/bottom_bar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" />

       <LinearLayout
            android:id="@+id/top_area"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@+id/bottom_bar"
            android:orientation="vertical" /> 
 </RelativeLayout> 
```

这将导致后面的内容被推到上面，然后您可以将该 top_area 布局放入滚动视图中，然后滚动视图将可滚动并始终位于底部栏上方。

例如：

```
<ScrollView 
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/bottom_bar" >
   <LinearLayout
        android:id="@+id/top_area"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" />
</ScrollView> 
```

这会将滚动视图放置在底部栏上方，其中包含 top_area 布局并可滚动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:42:01.037

`RelativeLayout`除非另有说明，否则会愉快地将其所有子代放在彼此之上。修复它的一些想法：

*   将顶部更改`RelativeLayout`为`LinearLayout`带有`orientation="vertical"`并`ScrollView` `layout_weight`指定为非零值，以便标签栏始终位于底部，并且滚动视图占据所有剩余的垂直空间。

*   保留`RelativeLayout`但首先使用布局选项卡栏`layout_alignParentBottom="true"`，然后使用`layout_above="@id/your_tabbar_id"`.

# c# - jquery datepicker 格式日期问题

> ID：12367710
> 
> 赞同：0
> 
> 时间：2012-09-11T10:28:06.107
> 
> 标签：c#, jquery, asp.net-mvc

我有 jquery 日期选择器像这样通过 Shared/EdotorTemplates/DateTime.cshtml 实现

```
@model DateTime
@Html.TextBox("", Model.ToString("dd.MM.yyyy"),
   new { @class = "date" }) 
```

显然我想要 dd.mm.yyyy 日期格式。首次加载表单时一切正常。

但是，我在 jquery datepicker 上得到了 mm/dd/yyyy 格式。我尝试在 domready 上关注 _Layout.cshtml

```
$('.date').datepicker({ dateFormat: "dd.MM.yyyy" }); 
```

但我得到了这些奇怪的约会`11.September.20122012`

如何将这些修复为 dd.mm.yyyy 格式？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:29:17.040

像这样编辑

```
$('.date').datepicker({ dateFormat: "dd.mm.yy" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:45:04.207

$('.date').datepicker({ dateFormat: "dd.MM.yyyy" }); 它将显示日期为 11.September.2012

$('.date').datepicker({ dateFormat: "dd/mm/yy" }); 它将显示日期为 11/09/2012

`$('.date').datepicker({ dateFormat: "dd-mm-yy" });`它将显示日期为 11-09-2012

# google-app-engine - 应用程序引擎python：使用json填充结构化属性会出错

> ID：12367714
> 
> 赞同：1
> 
> 时间：2012-09-11T10:28:19.040
> 
> 标签：google-app-engine, app-engine-ndb

**语境**

我有以下数据结构：

```
class Birthday(ndb.Model):
  day = ndb.IntegerProperty()
  month = ndb.IntegerProperty()
  year = ndb.IntegerProperty()

class User(ndb.Model):
  name = ndb.StringProperty()
  birthday = ndb.StructuredProperty(Birthday)
  # ... other properties 
```

**问题**

当我尝试在 User 的实例上使用**populate()**方法时，它给出了一个错误：期望一个生日实例而不是参数字典。

如果我删除生日属性，一切正常：用户实例填充了参数字典。

populate() 方法不应该识别结构化属性并自动填充它们吗？

有什么线索吗？

谢谢

PS：populate 方法也可以使用宽容模式，在这种模式下它会忽略在 params 字典中有引用的未知属性。

**>>添加评论**

我正在使用一个*通用的 REST 处理*程序，它被*扩展用于*访问和更改几种数据类型。扩展必须定义一个方法 getModel() 来返回模型类以访问/操作。模型类必须实现一些方法，即 create(cls, params)。

POST 处理程序通过以下方式解析参数（由 AngularJS 使用 $resouce 发送——链接如下）：

```
# inside the generic REST Handler
params = json.loads(self.request.body, object_hook=self.datetime_decoder) # parse json params
...
self.getModel().create(params) # invokes the create method of the 
```

模型类通过以下方式实现 create 方法：

```
@classmethod
def create(cls, params = None):
    obj = cls()
    if params:
        obj.update(**params)
        obj.put()
        return True, obj
    return False, None 
```

*JSON dict*的内容是：

```
{"name":"Ana Matos","email":"ana.matos@nvd.com","phone":"+35196983465671","birthday":{"day":1,"month":0,"year":1980},"gender":"FEMALE","groups":["2012/2013"],"serviceProviderId":206133} 
```

[JSON 内容——firefox 截图](http://cl.ly/image/1o1e0W1H0R0L)

[AngularJS $资源](http://docs.angularjs.org/api/ngResource.%24resource)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:42:10.027

您是报告错误还是请求功能？populate() 方法要求其参数类型与属性的声明类型相匹配，在本例中是一个生日实例。

如果您显示您传递给 populate() 的 JSON dict 的内容（以及您传递它的确切方式），这将有所帮助。

可能解决方案就像从 JSON 字典中获取“生日”值并使用它来创建生日实例一样简单。但是我必须查看您的代码才能确定。

# c# - ClickOnce 的流程和先决条件

> ID：12367717
> 
> 赞同：2
> 
> 时间：2012-09-11T10:28:40.973
> 
> 标签：c#, clickonce, manifest, publishing

我有一个要通过 ClickOnce 构建和部署的应用程序。但我们希望这是一个可以通过脚本在 VS 之外运行的流程，用于测试、业务 UAT 或生产环境。

每个单独的环境都需要使用不同的 .config 文件，并需要在更新位置部署不同的 Web 服务器。

该应用程序还具有 .NET 运行时 3.5 和 Crystal 报表的先决条件。

我已经研究过使用 MAGE 来创建应用程序和部署清单，如果我执行代码 BUILD，然后根据每个环境使用 MAGE，并将脚本复制到正确的 .config 文件上，这会创建我认为的内容运行脚本时每个环境的正确清单。

但我正在努力做的是包括先决条件。如果通过 VS 完成，您可以指定一个 setup.exe 包，它使用 pre-reqs 构建并与应用程序一起部署，当您单击下载链接时，它会从 setup.exe 安装 pre-reqs，然后是应用程序。

但是如何在 VS 之外手动执行此操作？我可以使用正确的 URl 位置通过 VS 构建 setup.exe，但是如何使用 MAGE 将 setup.exe 作为先决条件链接到应用程序以生成清单？

我们遇到的问题是 1) 用户没有下载和安装软件包的管理员权限，只能通过 clickonce 安装东西，因此必须在 click once 安全保护伞下安装 pre-reqs。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:18:31.943

ClickOnce 和 prereqs 会引起很多混乱。Visual Studio 生成的 setup.exe 与 ClickOnce 无关。两者之间唯一的次要链接是 setup.exe 将在完成后启动 ClickOnce 应用程序。就是这样。因此，认为用户将能够“在 clickonce 安全保护伞下”安装您的先决条件是错误的。如果他们不是管理员并且 prereq 安装需要管理员权限，他们将无法安装它。

我的建议是生成您的 setup.exe 一次。除非您的先决条件不断变化，否则您不需要继续这样做。使用 Visual Studio，生成一次设置，然后使用 Mage 完成其余部分。

**编辑**
通常，您使 setup.exe 可用，并取决于用户是否需要运行它。如果他们已经拥有先决条件并运行 setup.exe，则不会发生任何不好的事情。它看到所有东西都已安装，然后启动应用程序。

通常你会指导用户运行 setup.exe。下次他们想要启动应用程序时，他们应该使用开始菜单快捷方式（假设您没有使用“仅在线”）。我发现这是对用户来说最不容易混淆的一组说明。

还记得 Visual Studio 在发布时是如何做额外的、非 ClickOnce 的东西的（比如 setup.exe）吗？它还创建了一个简单的 html 页面，其中包含指向 ClickOnce 清单和 setup.exe 的链接以及说明。它还有一些 javascript 检查 UserAgent 字符串以确定它们是否安装了 .NET Framework。同样，这不是 ClickOnce。这只是 Visual Studio 为您做的一件好事。如果您喜欢它，请使用它。我有点喜欢跳过它并运行 setup.exe 进行安装，然后从开始菜单启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:32:34.413

codeConcussion 是对的，您实际上不可能直接从 ClickOnce 灌输先决条件。您应该只生成一次，然后为您的外部 ClickOnce 工具准备好它。

除了法师，还有一个选项。您可以使用我的公司工具[ClickOnceMore](http://clickoncemore.net)作为您的 ClickOnce 构建软件。它专为想要使用 ClickOnce 但不想使用 Visual Studio 构建的人而设计。

它可以挂接到从 Visual Studio 生成的 setup.exe（[详情请点击此处](http://clickoncemore.net/documentation/browser.php?page=setup.exe_and_bmg)），因此应该可以满足您的所有需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:06:55.103

如果一切都可以通过 clickonce 完成，为什么还要手动构建设置？如果要包含 .netfx 或 crystalreports，则可以从先决条件表单中选择“从同一位置下载先决条件”选项，下载 .netfx3.5 和 Crystalreports 的引导程序包并添加到文件夹（对于 Windows 7）“C:\Program文件 (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages" 。部署项目将自动包含 netfx 和其他软件包以及 setup.exe。希望这可以帮助。

# android - 谷歌导航意图禁用卫星视图

> ID：12367719
> 
> 赞同：1
> 
> 时间：2012-09-11T10:28:45.403
> 
> 标签：android, google-maps, android-intent, navigation, routes

在我的应用程序中，我有一个 Intent 必须打开 Google 导航，并将路线从我当前位置设置到给定的经度和纬度。这适用于以下代码：

```
new Intent(Intent.ACTION_VIEW, Uri.parse("google.navigation:q=" + item.getNavigateTo() + "&mode=w") 
```

但是当谷歌导航应用打开时，它是卫星视图。是否有一个选项可以在不打开应用程序设置的情况下禁用谷歌导航中的卫星视图？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:43:54.017

因为这是在您自己的应用程序之外，所以这是不可能的。

# javascript - 用于在 MVC3 中选择 RadioButtons 值的 JavaScript

> ID：12367720
> 
> 赞同：0
> 
> 时间：2012-09-11T10:28:45.840
> 
> 标签：javascript, asp.net-mvc-3

我是 JavaScript 新手，所以需要帮助。基本上我有两个单选按钮和一个提交按钮。我想在单击提交按钮时使用 JS 函数来选择单选按钮的值。

```
<td align="right" style="width: auto">
   @Html.RadioButton("SelectedOption", LinkOption.Link, true) Link Account
</td>
<td align="left" style="width: auto">
   @Html.RadioButton("SelectedOption", LinkOption.DeLink, false) De-Link Account
</td>
<td align="right" style="width:50%">
   <input type="submit" id="linkAccountSubmit" onclick="activeDeLink()" />
</td> 
```

JavaScript 函数是；我想在哪里使用 if 语句来选择单选按钮的值

```
function activeDeLink() {
    if (............) {
       $('.hiddenLink').each(function () {
           $(this).removeClass('hiddenLink');
       });
    }
    else
    {.......}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:49:46.753

你可以通过这种方式获得价值：

```
$('input[name="SelectedOption"]').val(); 
```

请记住，如果您没有从函数返回布尔值，您的表单将被提交

```
<input type="submit" id="linkAccountSubmit" onclick="return activeDeLink()" />

function activeDeLink() {
    if ($('input[name="SelectedOption"]').val() == "SomeValueToCheck") {
       $('.hiddenLink').each(function () {
           $(this).removeClass('hiddenLink');
       });

       return true;
    }
    else
    {
       // the condition is false, I dont want submit.
       return false;
    }

} 
```

# asp.net - 为什么我在数据表中的日期结束时得到 00:00:00？网

> ID：12367721
> 
> 赞同：0
> 
> 时间：2012-09-11T10:28:46.230
> 
> 标签：asp.net, vb.net, date, datetime

嗨，我正在从下面的函数执行一个存储过程。在所有日期，我在数据表中都在 19:12:2012 00:00:00 结束时获得时间。该列在数据库中定义为 Date 并在 SP 中返回为 Date。为什么我在日期结束时得到 00:00:00？

谢谢。

示例代码。

```
 Dim dt As New DataTable
    Dim da As New SqlDataAdapter
    Dim con As New SqlConnection(_conString)
    Dim SelectCommand As New SqlCommand()

        With SelectCommand                

            .Parameters.Add(New SqlParameter(_strAcademicYear, SqlDbType.Int))
            .Parameters(_strAcademicYear).Value = _AcademicYear

            .CommandText = "[Teacher].[GetDate]"
            .CommandType = CommandType.StoredProcedure
            .Connection = con
        End With

        da.SelectCommand = SelectCommand
        con.Open()
        da.Fill(dt)
        con.Close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:31:28.670

因为在您的数据表中，它是一个`DateTime`. 只有日期没有 CLR 类型。未指定时间的日期的默认时间是午夜 - 00:00:00。

你可以为你的gridview使用列数据格式，我假设 - 没有使用过一个 - 正确输出你想要显示的数据。

就像是

```
<asp:boundfield datafield="date"
    dataformatstring="{0:YYYY-MM-DD}"
    htmlencode="false" /> 
```

并将格式字符串替换为您希望它看起来像的任何内容，当然。=)

（标签已根据 chridam 的评论更新）

# java - 向 Maven 项目添加方面

> ID：12367728
> 
> 赞同：1
> 
> 时间：2012-09-11T10:29:22.557
> 
> 标签：java, maven, aspectj

我`aspectJ`在单独的 Maven 项目中创建了类：

```
@Aspect
public class AspectE {

    @Pointcut("execution(@EntryPoint * *.*(..))")
    public void defineEntryPoint() {
    }

    @Before("defineEntryPoint()")
    public void setThreadName(JoinPoint joinPoint) {
       ...
    }

    @After("defineEntryPoint()")
    public void removeThreadName(JoinPoint joinPoint) {
        ...
    }
} 
```

然后在第二个项目中，我注释了几个方法并添加到`pom.xml`：

```
 <dependency>
        <groupId>first-project</groupId>
        <artifactId>first-project</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.7.0</version>
    </dependency> 
```

但仍然根本*看不到*任何方面。我错过了一些步骤吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:33:11.173

你看过这个吗？

[AspectJ 编译器 Maven 插件 - 用法](http://mojo.codehaus.org/aspectj-maven-plugin/usage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:11:51.940

为了将代码与库正确编织，您应该在依赖项和 aspectj 编织器中声明它们：

```
<dependencies>
    <!-- Aspectj lib  -->
    <dependency>
        <groupId>com.my.group</groupId>
        <artifactId>my-aspect-lib</artifactId>
        <version>1.0</version>
    </dependency>

    <!-- Other dependencies -->

</dependencies>

<build>
    <!-- Specific build configuration -->

    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <configuration>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>com.my.group</groupId>
                        <artifactId>my-aspect-lib</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
            </configuration>
        </plugin>

        <!-- Other plugins configuration -->

    </plugins>
</build>

<!-- Other settings --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T11:02:05.683

你必须用代码编织方面。这可以通过两种方式完成：

*   编译时编织，使用Andrei 建议的[AspectJ 编译器 Maven 插件](http://mojo.codehaus.org/aspectj-maven-plugin/usage.html)
*   [加载时编织 (LTW)](http://www.eclipse.org/aspectj/doc/released/devguide/ltw.html)，使用代理或自定义类加载器

加载时编织更加通用，但正确设置可能有点挑战。它在启动期间（编织发生时）消耗更多 CPU，并且还具有内存占用。很明显，编译时编织会在编译期间消耗更多的 CPU，但是您不必为每次重新启动付出代价。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-10T18:39:14.083

我遇到了同样的问题......但是在我添加了这个 maven repo 之后它就可以工作了

```
<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.8.9</version>
</dependency> 
```

# jquery - JQuery 拆分操作并执行另一个操作

> ID：12367730
> 
> 赞同：0
> 
> 时间：2012-09-11T10:29:31.480
> 
> 标签：jquery

我的问题是为我的问题找到一个合适的搜索短语。我认为这个论坛上有一些关于这个的答案。

我想启动一个 mouseOver 事件，该事件会及时执行合适的操作。目前，当我悬停并离开 one-div 时，它首先执行 mouseenter，完成后执行 mouseleave。

我需要的是在我离开鼠标的时候。mouseleave 事件应该立即被激活。

我知道它与 .ready 函数有关，但我找不到任何其他函数。

```
$(document).ready(function(){
    $("div#one").mouseenter(function() {
        $("div#two").slideDown("normal");
    });
    $("div#one").mouseleave(function() {
        $("div#two").slideUp("normal");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:38:35.577

试试这个，可能对你有帮助。

```
$(document).ready(function(){
    $("div#one").mouseenter(function() {
        $("div#two").stop().slideDown("normal");
    });
    $("div#one").mouseleave(function() {
        $("div#two").stop().slideUp("normal");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:39:35.830

mouseenter 和 mouseleave 工作正常，这是您在不停止队列的情况下继续排队的动画。试试这个：

```
$(document).ready(function(){
    $("div#one").mouseenter(function() {
        $("div#two").stop(true, true).slideDown("normal");
    }).mouseleave(function() {
        $("div#two").stop(true, true).slideUp("normal");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:40:15.893

您需要添加一个[`stop()`](http://api.jquery.com/stop/)以中止当前正在运行的动画。

See this [fiddle](http://jsfiddle.net/VN6FD/)

# php - 使用 FFmpeg 进行视频旋转

> ID：12367735
> 
> 赞同：0
> 
> 时间：2012-09-11T10:29:46.627
> 
> 标签：php, video, ffmpeg, rotation

我正在为我的 iPhone 应用程序开发 PHP 网络服务，以便用户上传视频。当用户想在网站上观看视频时，他们会得到一个水平视频，所以我需要使用 FFmpeg 命令旋转视频。有人能帮我吗？

```
function make_rotation($input, $output, $transpose="1") {
    $ffmpegpath = "ffmpeg";
    if(!file_exists($input)) return false;  
    //$command = "$ffmpegpath -i $input -vf 'transpose=$transpose' $output";
    //$command = "ffmpeg -vfilters 'rotate=270' -i $input $output";
    $command ="ffmpeg -i $input -vf 'transpose=$transpose'  $output";
    exec($command);
    return true;
} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:37:11.383

```
ffmpeg -vfilters "rotate=90" -i input.mp4 output.mp4 
```

上面的评论对我有用，添加“rotate=90”并检查。

```
ffmpeg -i <input_video> -vf “transpose=1″ -r 30 -sameq <output_video> 
```

也工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T10:13:13.190

我已经用这个 mencode 命令修复了旋转问题，如下所示：

```
function make_rotation($input, $output, $transpose="1") {
    $cmd="mencoder -vf rotate=1 -o $output -oac pcm -ovc lavc $input";
    exec($cmd);
    if(!file_exists($output)) return false;
    if(filesize($output)==0) return false;
    return true;
} 
```

# file-upload - 不使用插件的简单 cakephp 2.0 上传

> ID：12367743
> 
> 赞同：2
> 
> 时间：2012-09-11T10:30:24.097
> 
> 标签：file-upload, cakephp-2.0, cakephp-2.1

我正在尝试创建一个图像上传站点，用户可以在其中将图像上传到该站点。在不使用任何插件的情况下，这是最简单的方法。如何从图像中获取 exif/meta 信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:15:40.823

指定您的表单类型为文件。

```
 $this->Form->create('Model', array('type' => 'file'));

 $this->Form->input('filefield', array('type' => 'file')); 
```

在你保存之前查看字段的输出，它将包含类似 $_FILE 的信息，包含所有 tmp-name、原始文件名和错误代码。

你可以自己 move_uploaded_files() 到你方便的位置。将文件名存储到您的表中。

但是，对于实现，您将不得不处理各种事情，例如两个具有相同名称的文件名、文件大小、允许的扩展名、权限。删除记录时删除文件。

因此，出于学习目的，您可以尝试一下，但对于生产模式，如果您坚持使用插件会更好。

# c++ - 二进制逻辑仿真器逻辑错误

> ID：12367752
> 
> 赞同：0
> 
> 时间：2012-09-11T10:30:54.520
> 
> 标签：c++, boolean, logic

如果您需要更多信息，请询问。

我想要做的是模拟可以在 C++ 代码中的计算机上找到的布尔逻辑。现在我正在尝试创建一个 32 位加法器。当我运行测试代码时，我得到了 32 的输出，这是错误的，它应该是 64。我相当确定我的`add`函数是正确的。这些门的代码是：

```
bool and(bool a, bool b)
{
return nand(nand(a,b),nand(a,b));
}

bool or(bool a, bool b)
{
return nand(nand(a,a),nand(b,b));
}

bool nor(bool a, bool b)
{
return nand(nand(nand(a,a), nand(b,b)),nand(nand(a,a), nand(b,b)));
} 
```

添加函数的代码：

```
bool *add(bool a, bool b, bool carry)
{
static bool out[2];

out[0] = nor(nor(a, b), carry);
out[1] = or(and(b,carry),and(a,b));

return out;
}

bool *add32(bool a[32], bool b[32], bool carry)
{
static bool out[33];
bool *tout;

for(int i = 0; i < 32; i++)
{
    tout = add(a[i], b[i], (i==0)?false:tout[1]);
    out[i] = tout[0];
}
out[32] = tout[1];

return out;
} 
```

我用来测试的代码是：

```
bool *a = int32tobinary(32);
bool *b = int32tobinary(32);
bool *c = add32(a, b, false);
__int32 i = binarytoint32(c); 
```

这两个功能是：

```
bool *int32tobinary(__int32 a)
{
static bool _out[32];
bool *out = _out;
int i;

for(i = 31; i >= 0; i--)
{
    out[i] = (a&1) ? true : false;
    a >>= 1;
}

return out;
}

__int32 binarytoint32(bool b[32])
{
int result = 0;
int i;

for(i = 0; i < 32; i++)
{
    if(b[i] == true)
        result += (int)pow(2.0f, 32 - i - 1);
}

return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:57:29.603

从哪儿开始？

如评论中所述，返回指向静态变量的指针是错误的。

这个

```
out[0] = nor(nor(a, b), carry); 
```

应该

```
out[0] = xor(xor(a, b), carry); 
```

这`out[1] = or(and(b,carry),and(a,b));`也是不正确的。`out[1]`必须是`true`，当`a == true`和`carry == true`。

`add32`假设索引 0 为 LSB，`int32tobinary`并`int32tobinary`假设索引 0 为 MSB。

# python - 文件“/usr/local/google_appengine/dev_appserver.py”不存在

> ID：12367755
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:30:59.723
> 
> 标签：python, eclipse, google-app-engine

`The file "/usr/local/google_appengine/dev_appserver.py" does not exist.`当我尝试使用 eclipse（UNIX MAC OS）添加新库后，当启动应用程序时出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:47:02.063

您收到此消息的原因是该文件`dev_appserver.py`在该位置不存在`/usr/local/google_appengine`。

您需要安装[Google App Engine Python SDK](https://developers.google.com/appengine/downloads#Google_App_Engine_SDK_for_Python)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T15:32:46.690

转到聚光灯（Cmd + Space），找到并运行 GoogleAppEngineLauncher。它将在您的本地文件夹中创建指向 google_appengine 的链接。然后你应该重新启动 Eclipse 或 Pycharm（我最喜欢的）。如有必要，再次创建需要项目。

# c - 通过双指针访问数组，丢失它的主体，纯 C

> ID：12367758
> 
> 赞同：1
> 
> 时间：2012-09-11T10:31:18.303
> 
> 标签：c, arrays, sorting, double-pointer

当我尝试对通过双指针引用的数组内容进行排序时。

[http://ideone.com/OapPh](http://ideone.com/OapPh)

第 77 行

```
SortQuick(&(*data_resource)->data,
   &(*data_resource)->low,
   &(*data_resource)->length - 1); 
```

内容尚未排序，通过相同的方法我使用函数**ArrayPrint()非常好地打印该数组的值**

这段代码在 MS C++ 编译器上编译得很好，关于 GCC 不知道。代码中没有任何警告或错误，MS 编译器没有按标准配置显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:50:16.523

它不是排序，因为`&(*data_resource)->length - 1`评估为`&(*data_resource)->low`.

`&(*data_resource)->length`是一个指向`int`. 当您从中减去 1 时，它会指向`int`前一个，这恰好是`&(*data_resource)->low`因为您按以下顺序定义了结构成员：

```
typedef struct Resource
{
        int low;
        int length;
        int *data;
} Resource; 
```

因此，您的排序代码有 2 个相同的索引可供使用，并且正确地不对任何内容进行排序，因为在仅包含一个元素的子数组中没有任何内容可排序。

这是一个稍微修改过的版本：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct Resource
{
        int low;
        int length;
        int *data;
} Resource;

void Swap(int *first, int *second)
{
        int tmp = *first;
        *first = *second;
        *second = tmp;
}

void SortQuick(int **data, int *low, int *high)
{
        int i = *low,
                j = *high,
                x = (*data)[(*low + *high) / 2];

        do
        {
                while((*data)[i] < x) i++;
                while((*data)[j] > x) j--;

                if(i <= j)
                {
                        Swap(&(*data)[i], &(*data)[j]);
                        i++;
                        j--;
                }

        } while(i <= j);

        if(i < *high) SortQuick(data, &i, high);
        if(*low < j) SortQuick(data, low, &j);
}

void ArrayPrint(int **data, int *array_length)
{
        for(int i = 0; i < *array_length; i++)
        {
                printf("[%i]: %20i\r\n", i, (*data)[i]);
        }
}

void ArrayInit(int **data, int *array_length)
{
        (*data) = (int*)malloc(sizeof(int) * *array_length);

        for(int i = 0; i < *array_length; i++)
        {
                (*data)[i] = rand();
        }
}

int GlobalInit(Resource **data_resource)
{
        srand((unsigned int)rand());

        *data_resource = (Resource*)malloc(sizeof(Resource));
        (*data_resource)->low = 0;
        (*data_resource)->length = 10;//rand();

        ArrayInit(&(*data_resource)->data, &(*data_resource)->length);

        return (*data_resource)->length;
}

void BenchmarkTest(Resource **data_resource)
{
        ArrayPrint(&(*data_resource)->data, &(*data_resource)->length);
        (*data_resource)->length--;
        SortQuick(&(*data_resource)->data, &(*data_resource)->low, &(*data_resource)->length);
        (*data_resource)->length++;
        ArrayPrint(&(*data_resource)->data, &(*data_resource)->length);
}

int main(void)
{
        Resource *data_resource = NULL;

        GlobalInit(&data_resource);
        BenchmarkTest(&data_resource);

        return 0;
} 
```

输出（[ideone](http://ideone.com/RpOHX)）：

```
[0]:           1362961854
[1]:              8891098
[2]:            392263175
[3]:            158428306
[4]:           2074436122
[5]:             47170999
[6]:            431826012
[7]:           1599373168
[8]:           1769073836
[9]:           1043058022
[0]:              8891098
[1]:             47170999
[2]:            158428306
[3]:            392263175
[4]:            431826012
[5]:           1043058022
[6]:           1362961854
[7]:           1599373168
[8]:           1769073836
[9]:           2074436122 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:51:00.360

所有这些指针的引用和取消引用都让你发疯，在大多数情况下它们不是必需的，试试这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct Resource
{
    int low;
    int length;
    int *data;
} Resource;

void Swap(int *first, int *second)
{
    int tmp = *first;
    *first = *second;
    *second = tmp;
}

void SortQuick(int *data, int low, int high)
{
    int i = low,
        j = high,
        x = data[(low + high) / 2];

    do
    {
        while(data[i] < x) i++;
        while(data[j] > x) j--;

        if(i <= j)
        {
            Swap(&(data[i]), &(data[j]));
            i++;
            j--;
        }

    } while(i <= j);

    if(i < high) SortQuick(data, i, high);
    if(low < j) SortQuick(data, low, j);
}

void ArrayPrint(int *data, int array_length)
{
    for(int i = 0; i < array_length; i++)
    {
        printf("[%i]: %i\r\n", i, data[i]);
    }
}

void ArrayInit(Resource *data_resource)
{
    data_resource->data = (int*)malloc(sizeof(int) * data_resource->length);

    for(int i = 0; i < data_resource->length; i++)
    {
        data_resource->data[i] = rand();
    }
}

Resource* GlobalInit()
{
    Resource *data_resource;
    srand((unsigned int)rand());

    data_resource = (Resource*)malloc(sizeof(Resource));
    data_resource->low = 0;
    data_resource->length = rand();

    ArrayInit(data_resource);

    return data_resource;
}

void BenchmarkTest(Resource *data_resource)
{
    ArrayPrint(data_resource->data, data_resource->length);
    SortQuick(data_resource->data, data_resource->low, data_resource->length - 1);
    ArrayPrint(data_resource->data, data_resource->length);
}

int main(void)
{
    Resource *data_resource = NULL;

    data_resource = GlobalInit();
    BenchmarkTest(data_resource);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:55:44.540

这部分没有意义：

```
&(*data_resource)->length - 1); 
```

您正在获取该`length`字段的地址并减去 1。删除`- 1`似乎使其工作。

此外，您过度使用指针。例如`ArrayPrint`可以简单地是

```
void ArrayPrint(int *data, int array_length)
{
        for(int i = 0; i < array_length; i++)
        {
                printf("[%i]: %i\r\n", i, data[i]);
        }
} 
```

# php - 在 PHP 中打印变量的多个链接

> ID：12367759
> 
> 赞同：1
> 
> 时间：2012-09-11T10:31:19.887
> 
> 标签：php, variables, hyperlink

如何在通过 MYSQL 的变量上提供多个链接。在下面的链接中，用户名正在获取通用链接。我想为个人用户名使用相应的链接。

例如 [http://www.bahrainmedicalbulletin.com/output2.php](http://www.bahrainmedicalbulletin.com/output2.php)

PHP 脚本

```
 <html>
    <body>
    <?php
    $username="username";
    $password="password";
    $database="database";
    $localhost = "localhost";

    mysql_connect($localhost,$username,$password);
    @mysql_select_db($database) or die( "Unable to select database");
    $query="SELECT * FROM people";
    $result=mysql_query($query);

    $num=mysql_numrows($result);

    mysql_close();
    ?>
    <table border="1" bordercolor="#000000" cellspacing="2" cellpadding="5">
    <tr>
    <td><font face="Arial, Helvetica, sans-serif">ID</font></td>
    <td><font face="Arial, Helvetica, sans-serif">Full Name</font></td>
    <td><font face="Arial, Helvetica, sans-serif">Telephone</font></td>
    <td><font face="Arial, Helvetica, sans-serif">Birthday</font></td>
    </tr>

<?php
$i=0;
while ($i < $num) {

$f1=mysql_result($result,$i,"id");
$f2=mysql_result($result,$i,"name");
$f3=mysql_result($result,$i,"telephone");
$f4=mysql_result($result,$i,"birtday");

?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif">**<?php echo "<a href=\"riz_ritz.png\">{$f2}</a>"; ?>**</font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
</tr>

<?php
$i++;
}
    ?>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:38:54.470

```
$f5=mysql_result($result,$i,"link");
<td><font face="Arial, Helvetica, sans-serif"><?php echo "<a href='http://www.yoursite.com/".$f5."'>{$f2}</a>"; ?></font></td> 
```

# regex - 将数字顺序添加到匹配的事件中

> ID：12367765
> 
> 赞同：2
> 
> 时间：2012-09-11T10:31:48.147
> 
> 标签：regex, linux, vim, sed

我有一些问题。
我有一个大文件，它提供了一个带有文本“这是错误”的错误。
在源代码中，我有很多行相同的文本。我如何将所有这些行更改为计数行。
我的意思是我想这样改变它：

```
some_function ()
 {
 provide  "it's an error"
  } 
 another_function ()
 provide  "it's an error"
 provide  "it's an error" 
```

现在我想得到下一个：

```
some_function ()
 {
 provide  "1 it's an error"
  } 
 another_function ()
 provide  "2 it's an error"
 provide  "3 it's an error" 
```

或相同但带有行号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:59:41.600

带行号：

```
awk '{gsub(/it.s an error/, NR" &"); print }' filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T16:38:03.333

您可以使用 Vim 来实现这一点（正如您在帖子中标记的那样）：

```
:let i=1 | g/\zeit's an error/s//\=i." "/g | let i=i+1 
```

或者使用这种其他方式来枚举错误行的错误：

```
:%s/\zeit's an error/\=line('.')." "/g 
```

# eclipse - 在 Eclipse 中删除 Axis Web 服务

> ID：12367768
> 
> 赞同：1
> 
> 时间：2012-09-11T10:31:54.137
> 
> 标签：eclipse, web-services, axis2

我无法删除 Eclipse 动态 Web 项目中已部署的 Web 服务。

我在 Project Explorer 窗口中的任何地方都找不到 ws 部署（我正在寻找一些图标来右键单击它并删除），所以我尝试了这个：

通过 Axis Administration Web 页面删除 Web 服务：Web 服务已从列表中删除，但它仍然存在。

如果我删除文件夹 mydwpproject/services/servicename/，它会在我下次重新启动 Tomcat 服务器时重新生成。

我应该如何摆脱旧的 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:12:45.380

转到项目的物理位置并删除 .wsdl，相关的文件夹结构可能会有所帮助。

# c# - 如何在不运行 webserver 的情况下在 asp.net mvc4 中使用单元测试测试模型逻辑类？

> ID：12367771
> 
> 赞同：0
> 
> 时间：2012-09-11T10:31:59.520
> 
> 标签：c#, asp.net-mvc, unit-testing, asp.net-mvc-4

我在 asp.net mvc4 应用程序的 Models 文件夹中有逻辑类：MyUtil.cs。

为 MyUtils.cs 自动生成的单元测试创​​建与网络服务器一起使用的单元测试（使用 attr:[HostType("ASP.NET")][UrlToTest("http://localhost:1139/") 等..]）。

我应该改变什么以使这个单元测试在没有服务器的情况下运行？

谢谢，

约瑟夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:38:51.590

The best and simplest solution would be to **not use the auto-generator** for unit tests but write the tests yourself. There are many articles and tutorials out there and this one can be a good place to start:

*   **[Introduction to Test-Driven Development with ASP.NET MVC](http://weblogs.asp.net/shijuvarghese/archive/2009/07/22/introduction-to-test-driven-development-with-asp-net-mvc.aspx)**

# jquery - 我们如何避免在 Rails 的视图中编写 js 代码

> ID：12367775
> 
> 赞同：1
> 
> 时间：2012-09-11T10:32:21.320
> 
> 标签：jquery, ruby-on-rails, partial-views

嗨，我想了解关于 Rails 约定的非常好的实践，我们应该把所有的

我们的 JS 代码不在视图中，而是我们将所有 js 代码放在 js 文件中。

但是当我们使用下面列出的嵌套级别部分时，我们需要使用 ajax 调用刷新部分或使用 ajax 提交表单，那么我们有时需要将 js 代码放在我们的视图中。

```
 <div class="temp" ><%=render :partial => "question/list"%>          
           <div class="ans" ><%=render :partial => "answers/list"%></div>
        </div> 
```

那么这里最好的实践是什么。或者如果需要我们应该编写js代码。

参考任何教程或书籍。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:12:00.043

在 .js.erb 文件中，您可以

`$("#temp").html("<%= escape_javascript(render :partial => 'question/list') %>")`

等等

# android - 资源目录不可用

> ID：12367777
> 
> 赞同：2
> 
> 时间：2012-09-11T10:32:30.387
> 
> 标签：android, xml, android-layout

Eclipse 在 Problems 选项卡中显示资源目录不可用，尽管它在项目文件夹树中可用：

```
[2012-09-11 12:14:43 - QR01] ERROR: resource directory 'D:\workspaceQR\QR01\res' 
does not exist 
```

我试图通过重建路径来修复这个错误，但我无法解决它，而且它在项目名称旁边给了我红色的感叹号。为什么 Eclipse 说我的资源目录不可用有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T11:09:56.753

供将来参考：升级到 SDK Tools r22 时可能会出现此错误。更新后需要重新打开 SDK Manager。在这里你会发现一个新的包 - Android SDK Build-tools。也得到这个，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:50:54.737

它是否与 src 文件夹位于同一级别？或者您是否尝试过清理您的项目？

# iis-7 - IIS 7 启用协议

> ID：12367780
> 
> 赞同：5
> 
> 时间：2012-09-11T10:32:50.253
> 
> 标签：iis-7

我有一个 win 2008r2 服务器。默认网站已启用协议设置为“http,net.tcp”。当在默认网站下创建任何新应用程序时，我希望默认启用相同的协议。谁能建议如何做到这一点？目前，当我添加应用程序时，创建一个启用的协议只有“http”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T09:10:52.890

我发现使用 Powershell 的 IIS 提供程序可以做到这一点。以下行对我有用：

**Set-ItemProperty IIS:\sites\$NetTcpWebsite -name EnabledProtocols -Value "http,net.Tcp"**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-22T20:22:29.323

为了让协议从网站级别级联到应用程序级别，我必须执行以下操作：

首先，我创建了网站和应用程序。其次，我运行了以下内容：

```
$iisAppName = %YourWebsiteName%
Set-ItemProperty IIS:\sites\$iisAppName -name applicationDefaults.enabledProtocols -Value "http,net.tcp" 
```

这解决了原来的问题。Rob 的回答只会在网站级别设置启用的协议配置文件，这会使您的应用程序和虚拟目录没有启用适当的协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:44:01.277

net 和 tcp 协议用于 WAS。默认情况下禁用它们以最小化攻击面。您是否需要托管 WCF 应用程序？

[http://technet.microsoft.com/en-us/library/cc735229(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc735229(v=ws.10).aspx)

最好的祝福。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T12:39:39.040

我为此苦苦挣扎了一段时间，并研究了将其包含在 MSI（WiX 或其他）或每个应用程序或服务的 web.config 文件中的方法。最后，最简单的解决方案是更改 IIS 中的网站默认设置，使其适用于每个应用程序和服务，而无需更改 MSI 或 web.config。基本步骤是：在 IIS 管理器中，单击站点节点，然后单击“设置网站默认值...”，将“启用协议”属性更改为 http,net.tcp

# c# - ConfigurationManager 和 ConfigurationSettings 之间的区别

> ID：12367785
> 
> 赞同：15
> 
> 时间：2012-09-11T10:33:06.813
> 
> 标签：c#, configurationmanager

*System.Configuration.ConfigurationManager.AppSettings["key"]*和*System.Configuration.ConfigurationSettings.AppSettings["key"]*之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T10:37:11.773

[ConfigurationSettings.AppSettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsettings.appsettings.aspx)已过时。[ConfigurationManager.AppSettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)是替代品。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-11T10:41:35.223

ConfigurationManager 比 ConfigurationSettings 具有更多功能，如下表所示
1\. ConfigurationManager 可以访问 appsetting 和 connectionstring 部分
2\. ConfigurationManager 提供可用于读取和写入配置的功能。
3\. 用户级别 4 的权限
.......以及您可以在 msdn 上看到的其他内容

请参阅[http://msdn.microsoft.com/En-US/library/system.configuration.configurationmanager.aspx](http://msdn.microsoft.com/En-US/library/system.configuration.configurationmanager.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T19:17:36.917

请记住，即使命名空间相同，ConfigurationManager 对象也位于不同的 (DLL) 程序集中。

ConfigurationManager 命名空间：System.Configuration 程序集：System.Configuration（在 System.Configuration.dll 中）

ConfigurationSettings 命名空间：System.Configuration 程序集：System（在 System.dll 中）

安东

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:38:10.353

有时阅读文档是个好主意。

[http://msdn.microsoft.com/en-en/library/system.configuration.configurationsettings(v=vs.80).aspx](http://msdn.microsoft.com/en-en/library/system.configuration.configurationsettings(v=vs.80).aspx)

为读取配置部分和通用配置设置提供运行时版本**1.0 和 1.1**支持。

换句话说，不推荐使用 ConfigurationSettings 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:52:38.513

'System.Configuration.ConfigurationSettings.AppSettings' 已过时：过时意味着旧的或不再使用。它已被 System.Configuration!System.Configuration.ConfigurationManager.AppSettings' 取代

# symfony - Symfony2如何加载validation.yml

> ID：12367791
> 
> 赞同：9
> 
> 时间：2012-09-11T10:33:31.367
> 
> 标签：symfony

在遵循 Symfony2 的验证文档 (http://symfony.com/doc/current/book/validation.html) 时，作者经常提到

`src/Acme/BlogBundle/Resources/config/validation.yml`

我也有这个文件，在正确的位置（当然是我的包名称和供应商），但它被完全忽略了。

我需要从某个地方加载这个吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-16T20:04:22.950

您不必以编程方式加载 validation.yml。您只需修改 config.yml 以启用验证和禁用注释：

```
framework:
    validation:      { enabled: true, enable_annotations: false } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T10:54:21.400

您需要在扩展文件 src/Acme/BlogBu​​ndle/DependencyInjection/AcmeBlogExtension.php 中加载它。

```
public function load(array $configs, ContainerBuilder $container)
{
    //...
    $yamlMappingFiles = $container->getParameter('validator.mapping.loader.yaml_files_loader.mapping_files');
    $yamlMappingFiles[] = __DIR__.'/../Resources/config/validation.yml';
    $container->setParameter('validator.mapping.loader.yaml_files_loader.mapping_files', $yamlMappingFiles);
} 
```

# android - Android GCM-注册 ID 和项目 ID

> ID：12367792
> 
> 赞同：0
> 
> 时间：2012-09-11T10:33:48.380
> 
> 标签：android, google-cloud-messaging

我无法使用我的项目 ID 获取注册 ID

我可以`google`为同一个项目获取不同帐户的新项目 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:47:38.513

## 请按照以下步骤操作：

1.  启动您的应用程序
2.  检查是否注册ID
3.  如果寄存器 id 为空字符串，则检查 ddms 中的任何错误消息
4.  如果没有错误消息，则
    a) 检查 senderid 是否正确。
    b) 检查您的清单权限
5.  如果有错误信息，你能把它贴在这里吗？

通常，当应用程序第一次启动时会发生什么，它需要一些时间来生成注册 ID，并且注册 ID 可以在 GCMIntentService 类的 onRegister() 方法中捕获。

# jquery - 更改a的选项时如何在cakephp中检索数据领域？我真的是 cakephp 的新手。我有两个名为“问题”和“答案”的控制器。在答案视图中，我有一个 admin_add.ctp 文件，其中包含一个显示问题列表的选择框。但问题是当有人选择问题时，它会根据所选的 question_id 在不同的输入字段中显示所有答案，尽管我的 admin_add.ctp 包含单个输入字段。因此，当有人进行更改时，必须将字段动态添加到 admin_add ctp。我的答案表包含一个字段“question_id”作

> ID：12367793
> 
> 赞同：1
> 
> 时间：2012-09-11T10:33:53.807
> 
> 标签：jquery, html, cakephp-2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:05:30.070

尝试如下：

使用 AJAX 请求`change()`为该框编写方法：`select`

```
$('select#AnswerQuestionId').on('change', function() {
   var questionID = $(this).val();
   // send ajax
   $.ajax({
      url: 'admin/answers/add/' + questionID,
      method: 'get',
      dataType: 'json',
      success: function(response) {
          // for example
          // response = [{'Answer': {'id': 1, 'answer': 'ans 1'} }, {'Answer': {'id': 2, 'answer' : 2}}....];
          // now loop over the response
          var html = '';
          $.each(response, function(index, val) {
              html + = '<div id="answer_'+ val.Answer.id +'">'+ val.Answer.answer +'</div>'
          });
          // append this html to target container
          $('#target_container').append(html);
      }
   });
}); 
```

在 CakePHP 方面尝试如下：

```
public function admin_add($id = null) {
    if( !empty($id) )
    {
        $this->Answer->recursive = -1;
        $answers = $this->Answer->find('all', 
                                        array(
                                         'fields' => array('Answer.answer', 'Answer.id'), // assume the answer contains in answer field in db
                                         'conditions' => array('Answer.question_id' => $id)
                                        )
                                      );
        echo json_encode( $answers );
    }
} 
```

# c# - C# Winforms - 在 Form_Load 上挂起的启动画面

> ID：12367795
> 
> 赞同：0
> 
> 时间：2012-09-11T10:34:03.767
> 
> 标签：c#, winforms, screen, loading, splash-screen

好的，伙计们，我有一个显示“正在加载...”启动画面的类。当我在 Initialize() 上调用它而不是在 Form_Load 上调用它时效果很好。它不是在 Form_Load 的开头显示，而是在所有表都填满后显示，然后就挂在那里（无锁）。

```
class innerLoad
{
    //Delegate for cross thread call to close
    private delegate void CloseDelegate();

    //The type of form to be displayed as the splash screen.
    private static frmLoading splashForm;

    static public void ShowSplashScreen()
    {
        // Make sure it is only launched once.
        if (splashForm != null)
            return;

        Thread thread = new Thread(new ThreadStart(innerLoad.ShowForm));
        thread.IsBackground = true;
        //Thread.Sleep(100);
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();

    }
    //volatile static public bool isOpen = false;
    static private void ShowForm()
    {

        splashForm = new frmLoading();

        splashForm.ShowDialog();
        splashForm.Dispose();
    }

    static public void CloseForm()
    {
        try
        {
            if (splashForm == null)
                return;
            splashForm.Invoke(new CloseDelegate(innerLoad.CloseFormInternal));
        }
        catch
        {

        }

    }

    static private void CloseFormInternal()
    {
        splashForm.Close();
        splashForm = null;
    }

} 
```

这是 Form_Load 代码：

```
 private void frmPayGen_Load(object sender, EventArgs e)
    {
        //th1 = new Thread(LoadingForm);
        //th1.Start();
        //Thread.Sleep(500);
        innerLoad.ShowSplashScreen();
        fill();
        innerLoad.CloseForm();

        //Thread.Sleep(500);
    } 
```

感谢您的帮助，我喜欢这个网站...对我有很大帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:49:37.173

如果您在表单加载事件开始时设置断点，并使用 F11 单步执行，您最终会看到以下异常：

![错误](../Images/1765d5072530a6fc19e99fcfeae88693.png)

表单加载事件中的异常基本上会被忽略。如果抛出异常，则抛出异常的行之后不会运行，但 Windows 窗体也不会崩溃。去掉这行代码应该会让事情如你所愿。

# cakephp - cakephp - 下拉列表中的自动清空选项

> ID：12367797
> 
> 赞同：0
> 
> 时间：2012-09-11T10:34:10.993
> 
> 标签：cakephp, cakephp-2.1, cakephp-2.2

有没有办法“自动”将空选项添加到下拉列表中？

我正在寻找的是将此选项添加到可以为空的belongTo 关系的下拉列表中，而无需在视图上添加代码。

我确实相信这应该是一个模型选项，例如在脚手架上可能很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:58:58.190

您可以覆盖该`_findList`方法或进行新的自定义查找并使用 _findList （称它为 say `_findSelectList`）。例子：

```
protected function _findList($state, $query, $results = array()) {
    $return = parent::_findList($state, $query, $results);
    if ($state === 'after') {
        $return = array('' => 'select one') + $return;
    }
    return $return;
} 
```

或者您可以扩展 FormHelper 并默认添加空选项，我认为这会更简单。实际上，您可以`empty`在`inputDefaults`打电话时摆脱困境`$this->Form->create('Model', array('inputDefaults' => array('empty' => 'Select One')));`。如果这可行并且您不想在每个表单中都这样做，请扩展 FormHelper 并将其设置为其中的默认值。

# php - MySQL 功能不工作

> ID：12367798
> 
> 赞同：-3
> 
> 时间：2012-09-11T10:34:11.903
> 
> 标签：php, mysql

当我做

```
SELECT count(*) FROM table_name WHERE id= 2 
```

代码有效，但是当我这样写时：

```
$try= 2;
SELECT count(*) FROM table_name WHERE id= $try; 
```

代码不再起作用。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:38:57.857

First of all you have to "include" your parameter properly into string

```
'SELECT count(*) FROM tble_name WHERE id='.$try; 
```

Second, you have to pass it to [mysqli object](http://www.php.net/manual/en/mysqli.query.php)

```
$result = $mysqli->query('SELECT count(*) FROM tble_name WHERE id='.$try); 
```

Then you have to fetch result

```
while ($row = $result->fetch_row()) {
        /* your logic here */
    } 
```

Obviously you have to create new `mysqli` object properly, as explained into link that I've provided you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:40:57.217

MySQL`@`对变量使用符号。

阅读[http://dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)了解更多信息

试试这个会起作用：

```
SET @try='test';
SELECT count(*) FROM tble_name WHERE id = @try; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:38:49.727

use this

```
$try= 2;
$sql=sprintf("SELECT count(*) FROM table_name WHERE id=%d",$try); 
```

# graph - 在无向图中查找所有循环

> ID：12367801
> 
> 赞同：75
> 
> 时间：2012-09-11T10:34:38.887
> 
> 标签：graph, cycle

我需要一个工作算法来在无向图中查找所有简单循环。我知道成本可能是指数的，问题是 NP 完全的，但我将在一个小图中（最多 20-30 个顶点）使用它，并且循环数量很少。

经过长时间的研究（主要是这里），我仍然没有工作方法。以下是我的搜索摘要：

[在无向图中查找所有循环](https://stackoverflow.com/questions/5068086/finding-all-cycles-in-an-undirected-graph)

[无向图中的循环](https://stackoverflow.com/questions/526331/cycles-in-an-undirected-graph)-> 仅检测是否存在循环

[在无向图中查找多边形](https://stackoverflow.com/questions/9804127/finding-polygons-within-an-undirected-graph)-> 非常好的描述，但没有解决方案

[在有向图中查找所有循环](https://stackoverflow.com/questions/546655/finding-all-cycles-in-graph/549402#549402)-> 仅在有向图中查找循环

[使用boost图库检测无向图中的循环](https://stackoverflow.com/questions/9626249/detect-cycles-in-undirected-graph-using-boost-graph-library)

我找到的唯一解决我的问题的答案是这个：

[查找图中的所有循环，redux](https://stackoverflow.com/questions/2839908/find-all-cycles-in-graph-redux)

似乎找到一组基本循环并对它们进行异或运算可以解决问题。找到一组基本循环很容易，但我不明白如何组合它们以获得图中的所有循环......

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-08-22T18:55:34.907

对于无向图，标准方法是寻找所谓的循环基：一组简单的循环，可以通过组合所有其他循环从中生成。这些不一定都是图中的简单循环。例如考虑下图：

```
 A 
  /   \
B ----- C
  \   /
    D 
```

这里有 3 个简单的循环：ABCA、BCDB 和 ABDCA。但是，您可以将其中的每 2 个作为基础，并将第 3 个作为 2 的组合。这与有向图有很大的不同，因为需要观察边缘方向，因此无法如此自由地组合循环。

为无向图寻找循环基的标准基线算法是这样的：构建一棵生成树，然后为不属于树的每个边从该边和树上的一些边构建一个循环。这样的循环必须存在，否则边缘将成为树的一部分。

例如，上面示例图的可能生成树之一是：

```
 A 
  /   \
B      C
  \ 
    D 
```

不在树中的 2 条边是 BC 和 CD。对应的简单循环是ABCA和ABDCA。

您还可以构建以下生成树：

```
 A 
  /   
B ----- C
  \   
    D 
```

对于这个生成树，简单的循环是 ABCA 和 BCDB。

基线算法可以以不同的方式进行细化。据我所知，最好的改进属于 Paton（K. Paton，An algorithm for find a basic set of cycles for an undirected linear graph, Comm. ACM 12 (1969), pp. 514-518.）。此处提供了 Java 的开源实现：[http](http://code.google.com/p/niographs/) ://code.google.com/p/niographs/ 。

我应该提到你如何结合循环基础中的简单循环来形成新的简单循环。您首先以任何（但此后固定）顺序列出图形的所有边。然后，通过将 1 放置在属于循环的边的位置并将零放置在不属于循环的边的位置，您可以通过 0 和 1 的序列来表示循环。然后你对序列进行按位异或（XOR）。您执行 XOR 的原因是您想要排除属于两个循环的边，从而使组合循环不简单。您还需要通过检查序列的按位与是否不全为零来检查 2 个周期是否有一些共同的边缘。否则 XOR 的结果将是 2 个不相交的循环，而不是一个新的简单循环。

这是上面示例图的示例：

我们首先列出边：（（AB），（AC），（BC），（BD），（CD））。那么简单循环ABCA、BDCB和ABDCA表示为(1, 1, 1, 0, 0), (0, 0, 1, 1, 1)和(1, 1, 0, 1, 1)。现在我们可以用 BDCB 对 ABCA 进行异或运算，结果是 (1, 1, 0, 1, 1)，这正是 ABDCA。或者我们可以对 ABCA 和 ABDCA 进行异或运算，结果为 (0, 0, 1, 1, 1)。这正是BDCB。

给定一个循环基础，您可以通过检查 2 个或更多不同基础循环的所有可能组合来发现所有简单循环。该过程在此处进行了更详细的描述：http: [//dspace.mit.edu/bitstream/handle/1721.1/68106/FTL_R_1982_07.pdf](http://dspace.mit.edu/bitstream/handle/1721.1/68106/FTL_R_1982_07.pdf)第 14 页。

为了完整起见，我会注意到使用算法来查找有向图的所有简单循环似乎是可能的（而且效率低下）。无向图的每条边都可以用两条相反方向的有向边代替。然后有向图的算法应该可以工作。对于必须忽略的无向图的每条边，将有 1 个“假”2 节点循环，并且无向图的每个简单循环都会有顺时针和逆时针版本。用于在有向图中查找所有循环的算法的 Java 开源实现可以在我已经引用的链接中找到。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-05-15T06:53:59.450

Axel，我已将您的代码翻译成 python。大约 1/4 的代码行并且更清晰易读。

```
graph = [[1, 2], [1, 3], [1, 4], [2, 3], [3, 4], [2, 6], [4, 6], [8, 7], [8, 9], [9, 7]]
cycles = []

def main():
    global graph
    global cycles
    for edge in graph:
        for node in edge:
            findNewCycles([node])
    for cy in cycles:
        path = [str(node) for node in cy]
        s = ",".join(path)
        print(s)

def findNewCycles(path):
    start_node = path[0]
    next_node= None
    sub = []

    #visit each edge and each node of each edge
    for edge in graph:
        node1, node2 = edge
        if start_node in edge:
                if node1 == start_node:
                    next_node = node2
                else:
                    next_node = node1
                if not visited(next_node, path):
                        # neighbor node not on path yet
                        sub = [next_node]
                        sub.extend(path)
                        # explore extended path
                        findNewCycles(sub);
                elif len(path) > 2  and next_node == path[-1]:
                        # cycle found
                        p = rotate_to_smallest(path);
                        inv = invert(p)
                        if isNew(p) and isNew(inv):
                            cycles.append(p)

def invert(path):
    return rotate_to_smallest(path[::-1])

#  rotate cycle path such that it begins with the smallest node
def rotate_to_smallest(path):
    n = path.index(min(path))
    return path[n:]+path[:n]

def isNew(path):
    return not path in cycles

def visited(node, path):
    return node in path

main() 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-01-02T00:32:39.630

以下是基于深度优先搜索的 C#（和 Java，请参见答案末尾）的演示实现。

外循环扫描图的所有节点并从每个节点开始搜索。节点邻居（根据边列表）被添加到循环路径中。如果不能添加更多未访问的邻居，则递归结束。如果路径长于两个节点并且下一个邻居是路径的起点，则找到一个新的循环。为了避免重复循环，循环通过将最小节点旋转到开始来标准化。倒序循环也被考虑在内。

这只是一个幼稚的实现。经典论文是：Donald B. Johnson。找到有向图的所有基本电路。SIAM J. 计算机，4（1）：77–84，1975。

可以在[这里找到最近对现代算法的调查](http://arxiv.org/pdf/1205.2766.pdf)

```
using System;
using System.Collections.Generic;

namespace akCyclesInUndirectedGraphs
{
    class Program
    {
        //  Graph modelled as list of edges
        static int[,] graph =
            {
                {1, 2}, {1, 3}, {1, 4}, {2, 3},
                {3, 4}, {2, 6}, {4, 6}, {7, 8},
                {8, 9}, {9, 7}
            };

        static List<int[]> cycles = new List<int[]>();

        static void Main(string[] args)
        {
            for (int i = 0; i < graph.GetLength(0); i++)
                for (int j = 0; j < graph.GetLength(1); j++)
                {
                    findNewCycles(new int[] {graph[i, j]});
                }

            foreach (int[] cy in cycles)
            {
                string s = "" + cy[0];

                for (int i = 1; i < cy.Length; i++)
                    s += "," + cy[i];

                Console.WriteLine(s);
            }
        }

        static void findNewCycles(int[] path)
        {
                int n = path[0];
                int x;
                int[] sub = new int[path.Length + 1];

                for (int i = 0; i < graph.GetLength(0); i++)
                    for (int y = 0; y <= 1; y++)
                        if (graph[i, y] == n)
                        //  edge referes to our current node
                        {
                            x = graph[i, (y + 1) % 2];
                            if (!visited(x, path))
                            //  neighbor node not on path yet
                            {
                                sub[0] = x;
                                Array.Copy(path, 0, sub, 1, path.Length);
                                //  explore extended path
                                findNewCycles(sub);
                            }
                            else if ((path.Length > 2) && (x == path[path.Length - 1]))
                            //  cycle found
                            {
                                int[] p = normalize(path);
                                int[] inv = invert(p);
                                if (isNew(p) && isNew(inv))
                                    cycles.Add(p);
                            }
                        }
        }

        static bool equals(int[] a, int[] b)
        {
            bool ret = (a[0] == b[0]) && (a.Length == b.Length);

            for (int i = 1; ret && (i < a.Length); i++)
                if (a[i] != b[i])
                {
                    ret = false;
                }

            return ret;
        }

        static int[] invert(int[] path)
        {
            int[] p = new int[path.Length];

            for (int i = 0; i < path.Length; i++)
                p[i] = path[path.Length - 1 - i];

            return normalize(p);
        }

        //  rotate cycle path such that it begins with the smallest node
        static int[] normalize(int[] path)
        {
            int[] p = new int[path.Length];
            int x = smallest(path);
            int n;

            Array.Copy(path, 0, p, 0, path.Length);

            while (p[0] != x)
            {
                n = p[0];
                Array.Copy(p, 1, p, 0, p.Length - 1);
                p[p.Length - 1] = n;
            }

            return p;
        }

        static bool isNew(int[] path)
        {
            bool ret = true;

            foreach(int[] p in cycles)
                if (equals(p, path))
                {
                    ret = false;
                    break;
                }

            return ret;
        }

        static int smallest(int[] path)
        {
            int min = path[0];

            foreach (int p in path)
                if (p < min)
                    min = p;

            return min;
        }

        static bool visited(int n, int[] path)
        {
            bool ret = false;

            foreach (int p in path)
                if (p == n)
                {
                    ret = true;
                    break;
                }

            return ret;
        }
    }
} 
```

演示图的周期：

```
1,3,2
1,4,3,2
1,4,6,2
1,3,4,6,2
1,4,6,2,3
1,4,3
2,6,4,3
7,9,8 
```

用Java编码的算法：

```
import java.util.ArrayList;
import java.util.List;

public class GraphCycleFinder {

    //  Graph modeled as list of edges
    static int[][] graph =
        {
            {1, 2}, {1, 3}, {1, 4}, {2, 3},
            {3, 4}, {2, 6}, {4, 6}, {7, 8},
            {8, 9}, {9, 7}
        };

    static List<int[]> cycles = new ArrayList<int[]>();

    /**
     * @param args
     */
    public static void main(String[] args) {

        for (int i = 0; i < graph.length; i++)
            for (int j = 0; j < graph[i].length; j++)
            {
                findNewCycles(new int[] {graph[i][j]});
            }

        for (int[] cy : cycles)
        {
            String s = "" + cy[0];

            for (int i = 1; i < cy.length; i++)
            {
                s += "," + cy[i];
            }

            o(s);
        }

    }

    static void findNewCycles(int[] path)
    {
            int n = path[0];
            int x;
            int[] sub = new int[path.length + 1];

            for (int i = 0; i < graph.length; i++)
                for (int y = 0; y <= 1; y++)
                    if (graph[i][y] == n)
                    //  edge refers to our current node
                    {
                        x = graph[i][(y + 1) % 2];
                        if (!visited(x, path))
                        //  neighbor node not on path yet
                        {
                            sub[0] = x;
                            System.arraycopy(path, 0, sub, 1, path.length);
                            //  explore extended path
                            findNewCycles(sub);
                        }
                        else if ((path.length > 2) && (x == path[path.length - 1]))
                        //  cycle found
                        {
                            int[] p = normalize(path);
                            int[] inv = invert(p);
                            if (isNew(p) && isNew(inv))
                            {
                                cycles.add(p);
                            }
                        }
                    }
    }

    //  check of both arrays have same lengths and contents
    static Boolean equals(int[] a, int[] b)
    {
        Boolean ret = (a[0] == b[0]) && (a.length == b.length);

        for (int i = 1; ret && (i < a.length); i++)
        {
            if (a[i] != b[i])
            {
                ret = false;
            }
        }

        return ret;
    }

    //  create a path array with reversed order
    static int[] invert(int[] path)
    {
        int[] p = new int[path.length];

        for (int i = 0; i < path.length; i++)
        {
            p[i] = path[path.length - 1 - i];
        }

        return normalize(p);
    }

    //  rotate cycle path such that it begins with the smallest node
    static int[] normalize(int[] path)
    {
        int[] p = new int[path.length];
        int x = smallest(path);
        int n;

        System.arraycopy(path, 0, p, 0, path.length);

        while (p[0] != x)
        {
            n = p[0];
            System.arraycopy(p, 1, p, 0, p.length - 1);
            p[p.length - 1] = n;
        }

        return p;
    }

    //  compare path against known cycles
    //  return true, iff path is not a known cycle
    static Boolean isNew(int[] path)
    {
        Boolean ret = true;

        for(int[] p : cycles)
        {
            if (equals(p, path))
            {
                ret = false;
                break;
            }
        }

        return ret;
    }

    static void o(String s)
    {
        System.out.println(s);
    }

    //  return the int of the array which is the smallest
    static int smallest(int[] path)
    {
        int min = path[0];

        for (int p : path)
        {
            if (p < min)
            {
                min = p;
            }
        }

        return min;
    }

    //  check if vertex n is contained in path
    static Boolean visited(int n, int[] path)
    {
        Boolean ret = false;

        for (int p : path)
        {
            if (p == n)
            {
                ret = true;
                break;
            }
        }

        return ret;
    }

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-28T16:52:18.037

这只是这个算法的一个非常蹩脚的 MATLAB 版本，它改编自上面的 python 代码，供任何可能需要它的人使用。

```
function cycleList = searchCycles(edgeMap)

    tic
    global graph cycles numCycles;
    graph = edgeMap;
    numCycles = 0;
    cycles = {};
    for i = 1:size(graph,1)
        for j = 1:2
            findNewCycles(graph(i,j))
        end
    end
    % print out all found cycles
    for i = 1:size(cycles,2)
        cycles{i}
    end
    % return the result
    cycleList = cycles;
    toc

function findNewCycles(path)

    global graph cycles numCycles;
    startNode = path(1);
    nextNode = nan;
    sub = [];

    % visit each edge and each node of each edge
    for i = 1:size(graph,1)
        node1 = graph(i,1);
        node2 = graph(i,2);
        if node1 == startNode
            nextNode = node2;
        elseif node2 == startNode
            nextNode = node1;
        end
        if ~(visited(nextNode, path))
            % neighbor node not on path yet
            sub = nextNode;
            sub = [sub path];
            % explore extended path
            findNewCycles(sub);
        elseif size(path,2) > 2 && nextNode == path(end)
            % cycle found
            p = rotate_to_smallest(path);
            inv = invert(p);
            if isNew(p) && isNew(inv)
                numCycles = numCycles + 1;
                cycles{numCycles} = p;
            end
        end
    end

function inv = invert(path)
    inv = rotate_to_smallest(path(end:-1:1));

% rotate cycle path such that it begins with the smallest node
function new_path = rotate_to_smallest(path)
    [~,n] = min(path);
    new_path = [path(n:end), path(1:n-1)];

function result = isNew(path)
    global cycles
    result = 1;
    for i = 1:size(cycles,2)
        if size(path,2) == size(cycles{i},2) && all(path == cycles{i})
            result = 0;
            break;
        end
    end

function result = visited(node,path)
    result = 0;
    if isnan(node) && any(isnan(path))
        result = 1;
        return
    end
    for i = 1:size(path,2)
        if node == path(i)
            result = 1;
            break
        end
    end 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-08-01T02:46:34.590

这是上面python代码的C++版本：

```
std::vector< std::vector<vertex_t> > Graph::findAllCycles()
{
    std::vector< std::vector<vertex_t> > cycles;

    std::function<void(std::vector<vertex_t>)> findNewCycles = [&]( std::vector<vertex_t> sub_path )
    {
        auto visisted = []( vertex_t v, const std::vector<vertex_t> & path ){
            return std::find(path.begin(),path.end(),v) != path.end();
        };

        auto rotate_to_smallest = []( std::vector<vertex_t> path ){
            std::rotate(path.begin(), std::min_element(path.begin(), path.end()), path.end());
            return path;
        };

        auto invert = [&]( std::vector<vertex_t> path ){
            std::reverse(path.begin(),path.end());
            return rotate_to_smallest(path);
        };

        auto isNew = [&cycles]( const std::vector<vertex_t> & path ){
            return std::find(cycles.begin(), cycles.end(), path) == cycles.end();
        };

        vertex_t start_node = sub_path[0];
        vertex_t next_node;

        // visit each edge and each node of each edge
        for(auto edge : edges)
        {
            if( edge.has(start_node) )
            {
                vertex_t node1 = edge.v1, node2 = edge.v2;

                if(node1 == start_node)
                    next_node = node2;
                else
                    next_node = node1;

                if( !visisted(next_node, sub_path) )
                {
                    // neighbor node not on path yet
                    std::vector<vertex_t> sub;
                    sub.push_back(next_node);
                    sub.insert(sub.end(), sub_path.begin(), sub_path.end());
                    findNewCycles( sub );
                } 
                else if( sub_path.size() > 2 && next_node == sub_path.back() )
                {
                    // cycle found
                    auto p = rotate_to_smallest(sub_path);
                    auto inv = invert(p);

                    if( isNew(p) && isNew(inv) )
                        cycles.push_back( p );
                }
            }
        }
    };

    for(auto edge : edges)
    {
        findNewCycles( std::vector<vertex_t>(1,edge.v1) );
        findNewCycles( std::vector<vertex_t>(1,edge.v2) );
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-05-27T08:15:44.217

受@LetterRip 和@Axel Kemper 启发这是Java 的较短版本：

```
public static int[][] graph =
        {
                {1, 2}, {2, 3}, {3, 4}, {2, 4},
                {3, 5}
        };
public static Set<List<Integer>> cycles = new HashSet<>();

static void findNewCycles(ArrayList<Integer> path) {
    int start = path.get(0);
    int next = -1;
    for (int[] edge : graph) {
        if (start == edge[0] || start == edge[1]) {
            next = (start == edge[0]) ? edge[1] : edge[0];
            if (!path.contains(next)) {
                ArrayList<Integer> newPath = new ArrayList<>();
                newPath.add(next);
                newPath.addAll((path));
                findNewCycles(newPath);
            } else if (path.size() > 2 && next == path.get(path.size() - 1)) {
                List<Integer> normalized = new ArrayList<>(path);
                Collections.sort(normalized);
                cycles.add(normalized);
            }
        }
    }
}

public static void detectCycle() {
    for (int i = 0; i < graph.length; i++)
        for (int j = 0; j < graph[i].length; j++) {
            ArrayList<Integer> path = new ArrayList<>();
            path.add(graph[i][j]);
            findNewCycles(path);
        }
    for (List<Integer> c : cycles) {
        System.out.println(c);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-25T07:52:35.733

这是上面python代码的vb .net版本：

```
Module Module1
'  Graph modelled as list of edges
Public graph As Integer(,) = {{{1, 2}, {1, 3}, {1, 4}, {2, 3},
        {3, 4}, {2, 6}, {4, 6}, {7, 8},
        {8, 9}, {9, 7}}

Public cycles As New List(Of Integer())()
Sub Main()
    For i As Integer = 0 To graph.GetLength(0) - 1
        For j As Integer = 0 To graph.GetLength(1) - 1
            findNewCycles(New Integer() {graph(i, j)})
        Next
    Next

    For Each cy As Integer() In cycles
        Dim s As String
        s = cy(0)
        For i As Integer = 1 To cy.Length - 1
            s = s & "," & cy(i)
        Next

        Console.WriteLine(s)
        Debug.Print(s)
    Next

End Sub
Private Sub findNewCycles(path As Integer())
    Dim n As Integer = path(0)
    Dim x As Integer
    Dim [sub] As Integer() = New Integer(path.Length) {}

    For i As Integer = 0 To graph.GetLength(0) - 1
        For y As Integer = 0 To 1
            If graph(i, y) = n Then
                '  edge referes to our current node
                x = graph(i, (y + 1) Mod 2)
                If Not visited(x, path) Then
                    '  neighbor node not on path yet
                    [sub](0) = x
                    Array.Copy(path, 0, [sub], 1, path.Length)
                    '  explore extended path
                    findNewCycles([sub])
                ElseIf (path.Length > 2) AndAlso (x = path(path.Length - 1)) Then
                    '  cycle found
                    Dim p As Integer() = normalize(path)
                    Dim inv As Integer() = invert(p)
                    If isNew(p) AndAlso isNew(inv) Then
                        cycles.Add(p)
                    End If
                End If
            End If
        Next
    Next
End Sub

Private Function equals(a As Integer(), b As Integer()) As Boolean
    Dim ret As Boolean = (a(0) = b(0)) AndAlso (a.Length = b.Length)

    Dim i As Integer = 1
    While ret AndAlso (i < a.Length)
        If a(i) <> b(i) Then
            ret = False
        End If
        i += 1
    End While

    Return ret
End Function

Private Function invert(path As Integer()) As Integer()
    Dim p As Integer() = New Integer(path.Length - 1) {}

    For i As Integer = 0 To path.Length - 1
        p(i) = path(path.Length - 1 - i)
    Next

    Return normalize(p)
End Function

'  rotate cycle path such that it begins with the smallest node
Private Function normalize(path As Integer()) As Integer()
    Dim p As Integer() = New Integer(path.Length - 1) {}
    Dim x As Integer = smallest(path)
    Dim n As Integer

    Array.Copy(path, 0, p, 0, path.Length)

    While p(0) <> x
        n = p(0)
        Array.Copy(p, 1, p, 0, p.Length - 1)
        p(p.Length - 1) = n
    End While

    Return p
End Function

Private Function isNew(path As Integer()) As Boolean
    Dim ret As Boolean = True

    For Each p As Integer() In cycles
        If equals(p, path) Then
            ret = False
            Exit For
        End If
    Next

    Return ret
End Function

Private Function smallest(path As Integer()) As Integer
    Dim min As Integer = path(0)

    For Each p As Integer In path
        If p < min Then
            min = p
        End If
    Next

    Return min
End Function

Private Function visited(n As Integer, path As Integer()) As Boolean
    Dim ret As Boolean = False

    For Each p As Integer In path
        If p = n Then
            ret = True
            Exit For
        End If
    Next

    Return ret
End Function 
```

端模块

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-29T07:42:05.493

这是python代码的节点版本。

```
const graph = [[1, 2], [1, 3], [1, 4], [2, 3], [3, 4], [2, 6], [4, 6], [8, 7], [8, 9], [9, 7]]
let cycles = []

function main() {
  for (const edge of graph) {
    for (const node of edge) {
      findNewCycles([node])
    }
  }
  for (cy of cycles) {
    console.log(cy.join(','))
  }
}

function findNewCycles(path) {
  const start_node = path[0]
  let next_node = null
  let sub = []

  // visit each edge and each node of each edge
  for (const edge of graph) {
    const [node1, node2] = edge
    if (edge.includes(start_node)) {
      next_node = node1 === start_node ? node2 : node1
    }
    if (notVisited(next_node, path)) {
      // eighbor node not on path yet
      sub = [next_node].concat(path)
      // explore extended path
      findNewCycles(sub)
    } else if (path.length > 2 && next_node === path[path.length - 1]) {
      // cycle found
      const p = rotateToSmallest(path)
      const inv = invert(p)
      if (isNew(p) && isNew(inv)) {
        cycles.push(p)
      }
    }
  }
}

function invert(path) {
  return rotateToSmallest([...path].reverse())
}

// rotate cycle path such that it begins with the smallest node
function rotateToSmallest(path) {
  const n = path.indexOf(Math.min(...path))
  return path.slice(n).concat(path.slice(0, n))
}

function isNew(path) {
  const p = JSON.stringify(path)
  for (const cycle of cycles) {
    if (p === JSON.stringify(cycle)) {
      return false
    }
  }
  return true
}

function notVisited(node, path) {
  const n = JSON.stringify(node)
  for (const p of path) {
    if (n === JSON.stringify(p)) {
      return false
    }
  }
  return true
}

main() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-12T07:40:05.293

这不是答案！

@尼古拉·奥格尼亚诺

**1\. 试图理解我们应该如何用简单循环生成组合循环**

我试图理解你提到的

> 您还需要通过检查序列的按位与是否不全为零来检查 2 个周期是否有一些共同的边缘。否则 XOR 的结果将是 2 个不相交的循环，而不是一个新的简单循环。

我想了解我们应该如何处理如下图：

```
0-----2-----4
|    /|    /
|   / |   /
|  /  |  /
| /   | /
|/    |/
1-----3 
```

假设基本/简单循环是：

```
0 1 2
1 2 3
2 3 4 
```

显然，如果我使用以下按位`XOR`and `AND`，它将错过循环 `0 1 3 4 2`。

```
bitset<MAX> ComputeCombinedCycleBits(const vector<bitset<MAX>>& bsets) {
    bitset<MAX> bsCombo, bsCommonEdgeCheck; bsCommonEdgeCheck.set();

    for (const auto& bs : bsets)
        bsCombo ^= bs, bsCommonEdgeCheck &= bs;
    if (bsCommonEdgeCheck.none()) bsCombo.reset();
    return bsCombo;
} 
```

我认为主要问题在这里`bsCommonEdgeCheck &= bs`？如果有 3 个以上的简单循环组成联合循环，我们应该使用什么？

**2.试图理解我们如何得到联合循环的顺序**

例如，使用下图：

```
0-----1
|\   /|
| \ / |
|  X  |
| / \ |
|/   \| 
3-----2 
```

假设基本/简单循环是：

```
0 1 2
0 2 3
0 1 3 
```

使用按位异或后，我们完全失去了简单循环的顺序，如何获得组合循环的节点顺序？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-28T18:24:26.083

上面的循环查找器似乎有一些问题。C# 版本无法找到一些循环。我的图表是：

```
 {2,8},{4,8},{5,8},{1,9},{3,9},{4,9},{5,9},{6,9},{1,10},
  {4,10},{5,10},{6,10},{7,10},{1,11},{4,11},{6,11},{7,11},
  {1,12},{2,12},{3,12},{5,12},{6,12},{2,13},{3,13},{4,13},
  {6,13},{7,13},{2,14},{5,14},{7,14} 
```

例如，循环：`1-9-3-12-5-10`未找到。我也尝试了 C++ 版本，它返回的周期数非常大（数千万），这显然是错误的。很可能，它与周期不匹配。

对不起，我有点紧张，我没有进一步调查。我根据 Nikolay Ognyanov 的帖子编写了自己的版本（非常感谢您的帖子）。对于上面的图表，我的版本返回 8833 个周期，我正在尝试验证它是否正确。C# 版本返回 8397 个周期。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-06-11T16:16:32.447

Matlab 版本遗漏了一些东西，函数 findNewCycles(path) 应该是：

函数 findNewCycles(路径)

```
global graph cycles numCycles;
startNode = path(1);
nextNode = nan;
sub = [];

% visit each edge and each node of each edge
for i = 1:size(graph,1)
    node1 = graph(i,1);
    node2 = graph(i,2);
    if (node1 == startNode) || (node2==startNode) %% this if is required
        if node1 == startNode
            nextNode = node2;
        elseif node2 == startNode
            nextNode = node1;
        end
        if ~(visited(nextNode, path))
            % neighbor node not on path yet
            sub = nextNode;
            sub = [sub path];
            % explore extended path
            findNewCycles(sub);
        elseif size(path,2) > 2 && nextNode == path(end)
            % cycle found
            p = rotate_to_smallest(path);
            inv = invert(p);
            if isNew(p) && isNew(inv)
                numCycles = numCycles + 1;
                cycles{numCycles} = p;
            end
        end
    end
end 
```

# android - 升级安卓应用后，安卓市场中未显示升级应用

> ID：12367803
> 
> 赞同：0
> 
> 时间：2012-09-11T10:34:57.893
> 
> 标签：android, google-play

我在 Android Market 中升级了我的应用程序，但到目前为止还没有反映在 Android Market 中。在 Android 电子市场中反映更新的应用程序需要多少小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:46:16.877

在印度（我想你在哪里），可能需要大约两到三个小时。

# c#-4.0 - 在 crm 2011 中创建视图时无法选择 Group AND 或 Group OR

> ID：12367804
> 
> 赞同：0
> 
> 时间：2012-09-11T10:34:58.143
> 
> 标签：c#-4.0, dynamics-crm, dynamics-crm-2011, crm

![创建视图时出现错误的屏幕截图](../Images/60d7efeeab2c019e9f886d0c9727d469.png)

我正在尝试为实体创建视图，但我无法给出条件或使用组 AND 或组 OR。

上面的屏幕截图显示了我遇到的错误。如何克服这一点。

我去了定制 - `entity`-> `view`-> `New`。

当我单击编辑过滤器标准时，该窗口仅显示“清除”“组 AND”和“组 OR”。

当我单击组并发出此警报时。您可以在屏幕截图中看到所有三个弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:26:36.660

要使用分组 AND/OR 功能，您首先必须创建要分组的条件。

然后选择左侧的箭头按钮，然后为您要分组的每个项目选择“选择行”。

然后点击“Group OR”或“Group AND”按钮

![在此处输入图像描述](../Images/9d528fe850895d77166062cc63691553.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:09:57.733

编辑：阅读您的评论，我现在明白这个问题了。这是哪个实体？

要创建条件，请按照以下步骤操作。

![在此处输入图像描述](../Images/0192e637562339977dc8430b1658d14e.png)

# c# - MVVM 实现查询

> ID：12367806
> 
> 赞同：0
> 
> 时间：2012-09-11T10:35:02.667
> 
> 标签：c#, mvvm

作为 MVVM 的新手，我需要了解 MVVM 并且还需要对我拥有的一些基本查询进行评论。

我在我的测试项目中实现了 INotifyPropertyChanged 例如：一个员工类，读取数据，在表单上显示，编辑数据，提交，使用 MVVM 更新员工源。

但需要一个想法，我们如何将下面的代码制作为完整的 sln ？

1.  要启用/禁用按钮，如何实现 ICommand 接口？
2.  MVVM 中的控制器是什么？
3.  从 UI，流程如何进入模型？
4.  接口 INotifyPropertyChanged 应该在模型或视图模型上实现吗？
5.  为什么我们在 MVVM 中需要 ICommand 接口和 ObservableCollection ？
6.  我们可以拥有适用于 Windows 的 MVVM 还是仅适用于 WPF？
7.  为什么大家都强调先实现模型？

有什么好的链接可以解释我们必须在 MVVM 中实现的所有接口的基本用法，以说明我的 MVVM 实现已完成？

```
class EMP
{
    public EMP()
    {

    }

    public string EmpName { get; set; }
    public string EmpID { get; set; }

}

class EmpVModel: INotifyPropertyChanged
{
    public EmpVModel()
    {
        Employees = GetEmployeeList();
    }

    ObservableCollection<EMP> GetEmployeeList()
    {
        ObservableCollection<EMP> objEmp = new ObservableCollection<EMP>();
        objEmp.Add(new EMP { EmpName = "A", EmpID = "1" });
        return objEmp;

    }

    public event PropertyChangedEventHandler PropertyChanged;
    public ObservableCollection<EMP> _Emp;

    public ObservableCollection<EMP> Employees
    {
        get { return _Emp; }
        set { _Emp = value; RaiseChange("Employees");  }
    }

    public void RaiseChange(string Employee)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(Employee));
        }
    }
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:44:55.980

您可以从这里开始：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

然后转到[http://joshsmithonwpf.wordpress.com/advanced-mvvm/](http://joshsmithonwpf.wordpress.com/advanced-mvvm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:53:35.273

这些问题合而为一。请查看[Wikipedia: MVVM](http://en.wikipedia.org/wiki/MVVM)，并查看该文章中引用的链接以供进一步阅读。

# api - 分页 API 响应

> ID：12367812
> 
> 赞同：0
> 
> 时间：2012-09-11T10:35:44.580
> 
> 标签：api, pagination, symfony-1.4

我在我的一个网站上使用 onapp api。现在我需要显示用户购买的服务器列表。我将这些数据作为对象作为 API 调用对 onapp 服务器的响应。但有时，这是一个巨大的列表，所以我需要对它进行分页。我当前的分页是面向数据库的，它正在选择特定数量的数据，并根据页面给出限制。但在 api 响应中。我一次得到了所有的回应。

那么如何在服务器端分页而不是依赖于客户端分页..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:28:51.307

从 SF1.4 调用 Web 服务时，我必须做同样的事情，但在我的情况下，WS 承认分页参数。无论如何，我想在结果中使用 sfPager，所以我创建了一个继承自 sfPager 的类：

```
class sfWSPager extends sfPager {
public function getResults() {
    return $this->results;
}

public function init() {
    if (0 == $this->getPage() || 0 == $this->getMaxPerPage() || 0 == $this->getNbResults())
        $this->setLastPage(0);
    else {
            $this->setLastPage(ceil($this->getNbResults() / $this->getMaxPerPage()));
        }
}

public function setResults($results) {
    $this->results = $results;
}

public function setNbResults($nb) {
    parent::setNbResults($nb);
}
} 
```

然后在我的行动中：

```
$this->pager = new sfWSPager(null);
$this->pager->setResults($dataResultsFromWS);
$this->pager->setNbResults($totalNbOfResults);
$this->pager->setPage($page);

$this->pager->init(); 
```

所以我一直在使用 Symfonys 的 sfPager 功能。

# c# - Ajaxcontroltoolkit 水印扩展器定时器闪烁

> ID：12367813
> 
> 赞同：1
> 
> 时间：2012-09-11T10:35:45.910
> 
> 标签：c#, asp.net, asp.net-ajax, ajaxcontroltoolkit

我有一个 ASP.NET 页面

1.  1个定时器（Tick事件触发更新面板）
2.  1 更新面板
3.  1 个标签（在更新面板中）
4.  1 个文本框
5.  1个水印扩展器（用于文本框）

文本框和水印扩展器不在更新面板中，页面中还有一些其他对象，但我没有列出它们，计时器不会影响它们。当我在文本框中写东西时没有问题，但是当文本框为空并且水印扩展器在计时器滴答时处于活动状态时，水印文本正在闪烁。

可能是什么问题呢 ？。

更新面板工作正常，计时器滴答时没有其他对象受到影响，但不知何故水印文本正在闪烁。

你能帮我解决这个问题吗？

asp.net 页面：

```
 <script type="text/javascript">
    Sys.Application.add_load(function () {
        WebForm_OnSubmit = Sys.Extended.UI.TextBoxWatermarkBehavior._originalWebForm_OnSubmit;
    });
</script>

    <div>
        <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </ajaxToolkit:ToolkitScriptManager>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

        <ajaxToolkit:TextBoxWatermarkExtender ID="TextBox1_TextBoxWatermarkExtender" 
            runat="server" Enabled="True" TargetControlID="TextBox1" 
            WatermarkText="Some Text">
        </ajaxToolkit:TextBoxWatermarkExtender>

        <asp:Timer ID="Timer1" runat="server" Interval="1000" ontick="Timer1_Tick">
        </asp:Timer>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
        </ContentTemplate>
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
        </Triggers>
        </asp:UpdatePanel>

    </div> 
```

代码隐藏：

```
protected void Timer1_Tick(object sender, EventArgs e)
{
    Label1.Text = DateTime.Now.ToLongTimeString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:13:04.240

这是 WatermarkExtender 控件的设计特性。这种行为的原因是为了防止将水印文本作为目标文本框的值提交给服务器。

**您可以通过在AFTER** ScriptManager 控件下方添加脚本来避免此类行为：

```
<script type="text/javascript">
     Sys.Application.add_load(function () 
     {
          WebForm_OnSubmit = Sys.Extended.UI.TextBoxWatermarkBehavior._originalWebForm_OnSubmit;
     });
</script> 
```

但请注意，在这种情况下，如果服务器上的水印文本框值等于水印文本，则需要明确忽略它。

# java - 在三层架构中使用 Spring Security

> ID：12367814
> 
> 赞同：0
> 
> 时间：2012-09-11T10:35:53.930
> 
> 标签：java, spring-security, three-tier

我试图了解 Spring Security 在三层架构中的工作原理。

假设系统由以下部分组成：
`WEB`<--> `APP`<-->`DB`

并且用户是在`DB`层中定义的。

我将如何在应用程序中实现它？
据我了解，我应该执行以下操作：

1.  `WEB`在层中创建我自己的身份验证提供程序。
2.  身份验证提供程序将调用`APP`层上的服务以实际验证针对数据库的凭据。
3.  用户通过`WEB`层上的 Spring Security 模块后，不再进行身份验证，每个`WEB`-->`APP`调用实际上都是**unauthenticated**。

最后一个项目符号对我来说毫无意义 - 所以我认为我错过了文档中的某些内容。

我的问题 - 这是在三层网络应用程序中实现安全性的 Spring 方式吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:24:33.457

这很标准。将大部分身份验证逻辑保留在其中，`APP`但`WEB`成为客户端/提供者。

在进行呼叫后，进一步的呼叫*不是*未经身份验证的，身份验证使用会话保留。只要您在安全 xml 中声明所有端点都需要身份验证，那么除非用户已通过身份验证，否则无法访问任何端点（如果未通过身份验证或登录已过期，则将被踢出到指定的路径） .

而且我还认为，像这样的横切关注点从 3 层的角度思考并不适用。该`DB`部分是无关紧要的，另一个部分是为了可重用性目的，这相当于分离存储库和集成。

# php - 如何在 javascript 中验证 MM/YY 的日期？

> ID：12367817
> 
> 赞同：2
> 
> 时间：2012-09-11T10:36:04.643
> 
> 标签：php, javascript, html, validation

> **可能重复：**
> [在 JavaScript 中格式化日期](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

我有一个包含很多字段的表单，所有字段都通过 Java 脚本进行验证，其中一个用于日期。

```
<td>Credit Card Expiration Date</td><td>:<input class="input" type="text" name="CC_expiration_date" id="CC_expiration_date"><p>(MM/YY)</p></td> 
```

现在我希望用户必须以（MM/YY）格式输入日期。如何使用 JavaScript 验证这一点？

我试着做一个正则表达式：

```
/^(\d{2})[-\/](\d{2})[-\/](\d{4})$/.exec(date); 
```

...但*没有工作*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:57:16.157

试试这个简单的功能。

```
function validDate(dValue) {
  var result = false;
  dValue = dValue.split('/');
  var pattern = /^\d{2}$/;

  if (dValue[0] < 1 || dValue[0] > 12)
      result = true;

  if (!pattern.test(dValue[0]) || !pattern.test(dValue[1]))
      result = true;

  if (dValue[2])
      result = true;

  if (result) alert("Please enter a valid date in MM/YY format.");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T10:41:16.263

您可以使用正则表达式；

```
var s = "11/12";
/^(0[1-9]|1[0-2])\/\d{2}$/.test(s); 
```

第一部分`(0[1-9]|1[0-2])`验证月份部分，即该值在范围内`01-12`。第二部分，`\d{2}`验证两位数的年份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:47:03.427

试试这个..

对于`DD-MM-YYYY`==>`var dateReg = /^\d{2}[./-]\d{2}[./-]\d{4}$/`

对于`MM-YY`==>`var dateReg = /^\d{2}[./-]\d{2}$/`

了解正则表达式.. [http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)

更多详情请[点击这里](https://stackoverflow.com/questions/276479/javascript-how-to-validate-dates-in-format-mm-dd-yyyy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:20:34.750

```
var d = "09/11"
var pattern = /^(0[1-9]|1[012])\/\d{2}$/
pattern.test(d) 
```

# file - 是否可以重命名文件并保留 cvs 历史记录？

> ID：12367821
> 
> 赞同：0
> 
> 时间：2012-09-11T10:36:35.517
> 
> 标签：file, versioning, cvs, tortoisecvs

我有一个文件已经存在超过 1 年，并定期进行修改。现在我必须重命名这个文件，我唯一的问题是我不想丢失这个文件的 cvs 历史。历史对我来说很重要，因为我需要将它用作我的更改的参考。我搜索了“cvs rename”，但没有找到。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:06:52.390

没有好的方法可以做到这一点。您可以在 cvs 存储库中找到该文件并重命名该文件。缺点是这将是所有版本的文件名，而不仅仅是前进。

您还可以将存储库文件复制到具有新名称的文件中。缺点也是如此。这仅取决于您如何进行设置。

# javascript - 使用没有文本文件的 OpenLayers 显示 POI

> ID：12367824
> 
> 赞同：2
> 
> 时间：2012-09-11T10:36:53.137
> 
> 标签：javascript, html, openlayers

我需要使用 OpenLayers 在易滑的地图上显示带有信息的标记。我正在尝试做的一个例子可以在这里看到：http://wiki.openstreetmap.org/wiki/Openlayers_POI_layer_example

由于我使用的软件产品不灵活，我不能使用服务器端脚本，也不能直接从我的 SQL 数据库访问我需要的信息。

我能做的是从 SQL 数据库中获取信息并将其读入一个 html 表，之后我可以将该表解析为一个 javascript 数组。问题是 OpenLayers.Layer.Text 需要一个文本文件，那么如何将 javascript 数组中的信息转换为 OpenLayers 可以用来在每个标记旁边显示信息的格式？

**附加代码**

这是我尝试使用向量来解决问题。不幸的是，这段代码似乎不起作用——我已经检查过了，看起来还不错。有任何想法吗？

```
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
<script type="text/javascript">

    var osmap = null;
    var wgs84Proj = null;
    var osmapProj = null;

    function initialise() 
    {
        var elmnts = document.getElementById('data').getElementsByTagName('tr');
        var ACol = -1;
        var BCol = -1;
        var CCol = -1;      
        var LonCol = -1;
        var LatCol = -1;
        var minX = 0;
        var maxX = 0;
    var minY = 0;
    var maxY = 0;

    // Match fields to column headings in first row
    for (var col=0; col < elmnts[0].cells.length; col++) 
    {
        var val = elmnts[0].cells[col].innerHTML;
        switch (val) 
        {
            case "A": ACol = col; break;
            case "B": BCol = col; break;
            case "C": CCol = col; break;                
            case "LON": LonCol = col; break;
            case "LAT": LatCol = col; break;
            default:
        }
    }

    // Initialise bounding coordinates
    if (elmnts.length > 1) 
    {
        minX = Number(elmnts[1].cells[LonCol].innerHTML) - 0.00001
        maxX = Number(elmnts[1].cells[LonCol].innerHTML) + 0.00001
        minY = Number(elmnts[1].cells[LatCol].innerHTML) - 0.00001
        maxY = Number(elmnts[1].cells[LatCol].innerHTML) + 0.00001
    }

    osmap = new OpenLayers.Map
    (
        {
            div: "map_canvas",
            controls: 
            [
                new OpenLayers.Control.Navigation(),
                new OpenLayers.Control.PanZoomBar(),
                new OpenLayers.Control.Attribution()
            ]
        }
    );

    var mapnik = new OpenLayers.Layer.OSM();
    mapnik.transitionEffect = 'resize';
    osmap.addLayer(mapnik);

    var vectors = new OpenLayers.Layer.Vector("Overlay");
    osmap.addLayer(vectors);

    var wgs84Proj = new OpenLayers.Projection("EPSG:4326"); // WGS 1984 Projection
    var osmapProj = osmap.getProjectionObject(); // this will be Spherical Mercator Projection for OSM

    // Loop through the table rows...
    for (var row=1; row < elmnts.length; row++) 
    {
        var AVal = elmnts[row].cells[ACol].innerHTML;
        var BVal = elmnts[row].cells[BCol].innerHTML;
        var CVal = elmnts[row].cells[CCol].innerHTML;           
        var lonVal = Number(elmnts[row].cells[LonCol].innerHTML);
        var latVal = Number(elmnts[row].cells[LatCol].innerHTML);

        if (lonVal != 0 && latVal != 0) 
        {
            // Adjust bounding coordinates
            if (lonVal < minX) minX = lonVal;
            if (lonVal > maxX) maxX = lonVal;
            if (latVal < minY) minY = latVal;
            if (latVal > maxY) maxY = latVal;

            vectors.addFeatures(
                new OpenLayers.Feature.Vector(
                    new OpenLayers.Geometry.Point(latVal,lonVal),
                    {description:'This is the value of<br>the description attribute'},
                    {externalGraphic: 'http://wiki.openstreetmap.org/wiki/File:Ol_icon_blue_example.png', graphicHeight: 25, graphicWidth: 25, graphicXOffset: 0, graphicYOffset: 0}
                )
            )
        }
    }

    var bounds = new OpenLayers.Bounds(minX,minY,maxX,maxY).transform(wgs84Proj,osmapProj);
    osmap.zoomToExtent(bounds, false);
}   

window.onload = initialise; 
```

```
<div id="data">
<table>
    <tr>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>LON</td>
        <td>LAT</td>
    </tr>
    <tr>
        <td>1</td>
        <td>11</td>
        <td>111</td>
        <td>28.00</td>
        <td>-26.00</td>
    </tr>
    <tr>
        <td>2</td>
        <td>22</td>
        <td>222</td>
        <td>28.00</td>
        <td>-26.20</td>
    </tr>
    <tr>
        <td>3</td>
        <td>33</td>
        <td>333</td>
    <td>28.50</td>
    <td>-26.50</td>
</tr>
<tr>
    <td>4</td>
    <td>44</td>
    <td>444</td>
    <td>27.00</td>
    <td>-25.00</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:50:32.653

**编辑**：固定

由于外部图形的 url 不正确，因此未呈现标记。出于某种原因，openlayers 没有报告错误，只是将特征添加到 unrenderedfeatures 变量中。

通过将 url 更改`http://wiki.openstreetmap.org/w/images/e/e7/Ol_icon_blue_example.png`为功能渲染，尽管它们在大西洋？

**已编辑**：包括从 wgs84 到球面的点转换

如果标记所需的数据位于 javascript 数组中，则可以在循环中执行类似于以下的操作。

```
var vectorLayer = new OpenLayers.Layer.Vector("Overlay");

// Define markers as "features" of the vector layer:
var feature = new OpenLayers.Feature.Vector(
        new OpenLayers.Geometry.Point( -0.1279688, 51.5077286).transform(wgs84Proj,osmapProj),
        {description:'This is the value of<br>the description attribute'} ,
        {externalGraphic: 'http://wiki.openstreetmap.org/w/images/e/e7/Ol_icon_blue_example.png', graphicHeight: 25, graphicWidth: 21, graphicXOffset:-12, graphicYOffset:-25  }
    );    
vectorLayer.addFeatures(feature); 
```

您显然需要遍历数组并获取所需的数据并在创建时将其添加到功能中。

这是你追求的那种东西吗？

# c++ - 将 Boost 库包含到标准 MinGW 路径中

> ID：12367825
> 
> 赞同：4
> 
> 时间：2012-09-11T10:36:55.897
> 
> 标签：c++, boost, mingw

如何在 MinGW 的标准搜索路径中包含 Boost 库（连同它的包含文件），以便我可以做这样的事情；

```
#include <filesystem.hpp>
using boost::filesystem; 
```

并避免在 Makefile 中添加 -I、-l 和 -L，就像 C++ 标准库一样？（我在 Windows 7 上使用已编译的 boost 1.51.0）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:20:03.453

我这样做的方式（对于`/usr/local`）我添加到我的全局定义`CXXFLAGS`的 . 我总是将 MinGW 与 MSys 结合使用。我将 fstab( `C:\MinGW\msys\1.0\etc\fstab`) 更改为映射`C:\Users`到`/home`. （无论如何这应该是默认值。）然后我在我的用户目录中定义一个文件，`.profile`其中包含我的 "default"`CFLAGS`和. 所以在我的情况下：`CXXFLAGS``LDFLAGS`

```
export CFLAGS=-g -Wall -I/usr/local/include
export CXXFLAGS=-g -Wall -I/usr/local/include
export LDFLAGS=/usr/local/lib 
```

在 makefile 中，我只根据需要扩展变量：

```
LDFLAGS += -lawsomelib 
```

这就像一个魅力，并且具有我可以`CXXFLAGS`在特殊情况下本地重新定义的优势。基本上，您应该在 makefile 中假设变量 CC、CXX、CXXFLAGS、CFLAGS 和 LDFLAGS 已经定义并包含有用的东西。这是一种可移植的标准方法。

（注意：`/usr/local`在 vanilla MinGW + MSys 中不作为标准包含位置。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:40:48.140

默认情况下，GCC 会查找 C_INCLUDE_PATH 和 CPP_INCLUDE_PATH 环境变量。您可以将以下内容添加到您的 .bashrc 中，而不是执行 -I：

```
export CPP_INCLUDE_PATH=/path/to/your/boost/header 
```

# php - PHP：查询电子邮件是否唯一，如果是，则查询以将记录添加到数据库

> ID：12367827
> 
> 赞同：2
> 
> 时间：2012-09-11T10:37:10.843
> 
> 标签：php, mysql

我没有经验，所以感谢任何帮助。

我正在寻找构建一个 PHP 来确认用户注册具有唯一的电子邮件地址。如果唯一，则添加到 sql 数据库，并回显相应的值。

这就是我所拥有的 - 如果电子邮件地址重复，则会产生回显值，但不会产生回显值，并且如果它是唯一的，则不会更新数据库。

```
<?php
$email= $_GET["email"];
$firstname = $_GET["firstname"];
$lastname = $_GET["lastname"];

$con = mysql_connect("user","db","pass");
mysql_select_db("db");

$query1 = "SELECT * FROM `db` WHERE `Email` = '$email'";

$result = mysql_query($query1);

if ( mysql_num_rows ($result) == 1 )
{$value="Already registered";

}
else
{
 mysql_query("INSERT INTO db (Email, FirstName, LastName) VALUES ('$email','$firstname','$lastname')");
mysql_close($con);

$value="Confirmed";

}

echo $value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:45:28.653

与其获取所有行，不如只取其中之一。它将节省大量内存。

```
$query1 = "SELECT 1 FROM `db` WHERE `Email` = '$email' LIMIT 1"; 
```

然后下面一行

```
if ( mysql_num_rows ($result) == 1 ) 
```

将是逻辑正确的。否则，如果数据库中有 2 条或更多条记录，则结果为 false。通过我的修复，这`if`将是合乎逻辑的。

另一种解决方案是选择行数，但由于电子邮件在数据库中是唯一的，所以没有必要做类似的事情

```
$query1 = "SELECT COUNT(*) FROM `db` WHERE `Email` = '$email'"; 
```

但是，通过这种方式，您可以检查结果而不用担心结果为空，而不是检查结果中的行数。但是同样，由于您的数据库的逻辑是只有一封电子邮件，因此检查其中有多少是没有意义的，因为结果将是 0 或 1 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:43:32.703

1.  确保您的代码没有任何错误
2.  作为你的条件

    if ( mysql_num_rows ($result) == 1 )

这意味着如果你有更多然后`>1`重新编码，`false`所以将其更改为

```
if ( mysql_num_rows ($result) >0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:50:52.730

```
$query1 = mysql_query("SELECT COUNT(*) AS num FROM `db` WHERE `Email` = '$email'");
$result = mysql_fetch_assoc($query1);

if ($result['num'] == 1)
{
   // already registered
}
else
{

} 
```

此外，您完全忘记了 sql 注入。您需要确保用户提供的所有值都可以安全地通过数据库运行。您可以使用 mysql_real_escape_string() 来执行此操作。IE：

```
$email = mysql_real_escape_string($_GET['email']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:58:12.257

为了解决这个问题，我会使用 Ajax：

php **check_email.php**

```
$email= $_POST["email"];
$firstname = $_GET["firstname"];
$lastname = $_GET["lastname"];
...
$query1 = "SELECT * FROM `db` WHERE `Email` = '$email'";
$result = mysql_query($query1);
if (mysql_num_rows ($result)){
  echo "yes";
} else {
  mysql_query("INSERT INTO db (Email, FirstName, LastName) VALUES ('$email','$firstname','$lastname')");
  echo "no";
} 
```

**HTML**：

```
 <form method="post" action=""/>
      <input name="email" type="text" id="email" value=""/>
      <input name="firstname" type="text" id="firstname" value=""/>
      <input name="lastname" type="text" id="lastname" value=""/>
      <input name="Submit" type="button" id="submit" value="Go"/>
      <div id="msg"></div>
    </form>
    <!--load latest version of jquery-->
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script>
    //JS (use jquery):
    $("#submit").click(function () {
        $.ajax({
          type: "POST",
          url: "check_email.php",
          dataType: "text",
          //send data to php
          data: {email:$("#email").val(),firstname:$("#firstname").val(),lastname:$("#lastname").val()},
          //get answers
          success: function (response) {
            if(responce=="yes") $("#msg").html("email exists!")
            else if (responce=="no") $("#msg").html("Email was successfully added to the database!")
          },
          error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
          }
        });
    });
</script> 
```

# java - 如何从 Java 中的 ResultSetMetaData 获取不同的数据类型？

> ID：12367828
> 
> 赞同：26
> 
> 时间：2012-09-11T10:37:09.997
> 
> 标签：java, jdbc, metadata, database-metadata

我有一个返回不同类型数据的 ResultSet。查询是动态构造的，因此在编译时，我不知道查询将返回什么类型的值。

假设所有结果都是字符串，我编写了以下代码。但我也想获得每个值的类型。我怎样才能做到这一点？

下面是我写的代码。

```
while (reportTable_rst.next()) {
    String column = reportTable_rst.getString(columnIterator);
} 
```

此时，我想获取列类型，并根据数据类型获取值。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-11T10:45:18.700

[`ResultSetMetaData.getColumnType(int column)`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html#getColumnType%28int%29)返回一个值，`int`指定在 中找到的列类型[`java.sql.Types`](http://docs.oracle.com/javase/6/docs/api/java/sql/Types.html)。

例子：

```
Connection connection = DriverManager.getConnection(JDBC_URL, JDBC_USERNAME, JDBC_PASSWORD);
PreparedStatement statement = connection.prepareStatement(JDBC_SELECT);
ResultSet rs = statement.executeQuery();
PrintStream out = System.out;

if (rs != null) {
    while (rs.next()) {
        ResultSetMetaData rsmd = rs.getMetaData();
        for (int i = 1; i <= rsmd.getColumnCount(); i++) {
            if (i > 1) {
            out.print(",");
            }

            int type = rsmd.getColumnType(i);
            if (type == Types.VARCHAR || type == Types.CHAR) {
                out.print(rs.getString(i));
            } else {
                out.print(rs.getLong(i));
            }
        }

        out.println();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T10:40:22.287

你可以打电话，

返回指定列的 SQL 类型。

`int ResultSetMetaData.getColumnType(int column)`

返回指定列的数据库特定类型名称。

`String ResultSetMetaData.getColumnTypeName(int column)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T10:43:22.820

```
ResultSet rs;
int column;
.....
ResultSetMetaData metadata = rs.getMetaData();
metadata.getColumnTypeName(column); // database specific type name
metadata.getColumnType(column);  // returns the SQL type 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-26T15:41:11.490

我认为上面的答案没有循环，并且缺少一些细节。此代码片段可以改进为仅显示列名称和相应的数据类型。这是完整的工作代码

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;

public class Test {

    private static final String DRIVER = "com.mysql.jdbc.Driver";
    private static final String HOST = "192.168.56.101";
    private static final String PORT = "3316";
    private static final String CONNECTION_URL = "jdbc:mysql://"+HOST+":"+PORT+"/";
    private static final String USERNAME = "user";
    private static final String PASSWORD = "pwd";
    private static final String DATABASE = "db";
    private static final String TABLE = "table";
    private static final String QUERY = "select * from "+DATABASE+"."+TABLE+" where 1=0";

    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        Class.forName(DRIVER);
        Connection con = DriverManager.getConnection (CONNECTION_URL , USERNAME, PASSWORD);
        ResultSet rs = con.createStatement().executeQuery(QUERY);
        if (rs != null) {
            System.out.println("Column Type\t\t Column Name");

                ResultSetMetaData rsmd = rs.getMetaData();
                for (int i = 1; i <= rsmd.getColumnCount(); i++) {
                    System.out.println(rsmd.getColumnTypeName(i)+"\t\t\t"+rsmd.getColumnName(i));
            }
        }   
    }
} 
```

# vba - 字典数组包含所有数组元素的相同字典引用

> ID：12367831
> 
> 赞同：1
> 
> 时间：2012-09-11T10:37:29.183
> 
> 标签：vba

我有一个数组，在一个 while 循环中，我将一行数据插入到字典中，然后将每个字典添加到数组中。

我的设置是这样的：

```
while something

    Dim MyDict as new Scripting.Dictionary
    MyDict.RemoveAll

    'Add data
    MyDict.add "something","something"

    If Count = 0 Then
        ReDim MyArray(0)
    Else
        ReDim Preserve MyArray(UBound(MyArray, 1) + 1)
    End If

    'Add the dictionary to the array of dictionaries
    Set MyArray(UBound(MyArray, 1)) = MyDict

wend 
```

然而，在 while 循环结束时，整个字典数组都指向同一个字典——最后一个字典。我想通过在while循环中声明字典并使用New，以及removeall，我会避免这种情况......

如何确保每本字典不仅仅是对最后插入的字典的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:21:38.530

这就是科瓦格斯告诉你的：

```
Dim MyDict as Scripting.Dictionary

while something      

    Set MyDict = new Scripting.Dictionary     

    'Add data     
    MyDict.add "something","something"       

     If Count = 0 Then
         ReDim MyArray(0)
     Else
         ReDim Preserve MyArray(UBound(MyArray, 1) + 1)
     End If      

    'Add the dictionary to the array of dictionaries     
    Set MyArray(UBound(MyArray, 1)) = MyDict  

wend 
```

...尽管我认为您可能会发现将集合用于这个数组的 insted 会更容易。

# android - 如何在 Android 硬件上设置系统屏幕分辨率？

> ID：12367834
> 
> 赞同：3
> 
> 时间：2012-09-11T10:37:34.400
> 
> 标签：android, hardware, screen-resolution, android-hardware

我想添加对 Android 源代码的更改，以便 Android 以我选择的分辨率启动。我不想在 QEMU/AVD 上执行此操作，我想执行此操作并在真实硬件上对其进行测试。任何人都可以指出我可以在 Android 源代码中设置或硬编码屏幕尺寸值的位置吗？

谢谢你。

# java - 从 Java 访问 HBase 时，第一个连接非常慢。正常吗？

> ID：12367836
> 
> 赞同：0
> 
> 时间：2012-09-11T10:37:41.540
> 
> 标签：java, hbase, apache-zookeeper

我们有一个 java servlet，它通过`org.apache.hadoop.hbase.client.HTable.HTable`.

第一个 HTable 实例化总是会非常慢（~2800ms），而随后的调用会很快（~60ms）。

读取 HTable 类源它表明 Zookeeper 连接在 HTable 实例之间共享，因此这可能对应于一些 zookeeper 初始化延迟，但我仍然想知道其他人是否看到类似的延迟，以及是否有一些配置选项可以加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:07:26.553

经过调查，似乎是的，第一次`HTable`初始化需要几秒钟是正常的。一些消息来源建议使用`HTablePool`跨线程共享 HTable 接口，从而避免多次引发初始化延迟。对象本身不应该被共享，`HTable`因为它不是线程安全的。

# java - 在 java 中定位资源时，两个类在相同代码上给出不同的输出

> ID：12367839
> 
> 赞同：1
> 
> 时间：2012-09-11T10:37:48.377
> 
> 标签：java, resources, eclipse-rcp

我有两个班

```
public class CsvReaderExample { 
    public static void main(String[] args) {
        try {               
    String file=CsvReaderExample.class.getResource("/saralbitta/common/db/DateNepali.csv").getFile(); 
```

下一节课是

```
 public class LoanIssueView extends ViewPart {
    public LoanIssueView() {    
            }
            @Override
   public void createPartControl(Composite parent) {
   String file=LoanIssueView.class.getResource("/saralbitta/common/db/DateNepali.csv").getFile(); 
```

当我在两个课程中打印`file`时，我感到非常惊讶，以至于在一个课程中，我在第一种情况下得到如下输出

```
 /E:/myskbbl/saralbitta/bin/saralbitta/common/db/DateNepali.csv 
```

同样，在第二种情况下，我将 outPut 作为

```
/saralbitta/common/db/DateNepali.csv 
```

为什么具有相同代码的两个类给出不同的输出。我在第二种情况下得到 fileNotFoundException，因为我需要第一种情况下的输出。如何在第二种情况下获得类似第一种情况的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:07:02.357

应该和classpath设置的不同有关。检查两个应用程序的类路径设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:48:55.383

CsvReaderExample 和 LoanIssueView 类是否包含在不同的包/插件中？每个包都有自己的类路径，除非您允许，否则无法看到其他包的类。包间依赖关系在 Manifest 中声明。

编辑：好的，那就很清楚了。在第一种情况下，OSGi 没有启动，所以它是一个普通的 Java 应用程序。在第二种情况下，OSGi 启动并且每个包都有自己的类加载器。我会尝试从捆绑包中请求资源。[在http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#getResource%28java.lang.String%29](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#getResource%28java.lang.String%29)使用 getResource() 方法。您可以从**BundleContext**获取包引用。您可以从**BundleActivator** start() 方法[http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleActivator.html#start%28org.osgi.framework.BundleContext%29获得](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/BundleActivator.html#start%28org.osgi.framework.BundleContext%29)**BundleContext**。请注意，您获取的 URL 不是文件 URL。使用文件**定位器******将 URL 转换为文件 URL [http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FFileLocator .html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FFileLocator.html)。****

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:51:12.060

这些程序是从哪里执行的？查找资源时，有一种算法可以确定绝对名称。它还取决于类加载器。可能这就是您看到不同结果的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T12:11:27.337

检查两者的文档[`getResource`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)和[`findResource`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#findResource%28java.lang.String%29)

在第一种情况下，`getResource()`返回文件字符串。但在第二种情况下，不知何故`getResource()`无法找到路径并尝试调用`findResource()`方法，如其文档中所述：

[`getResource`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)：

> 该方法将首先在父类加载器中搜索资源；如果 parent 为 null，则搜索虚拟机内置的类加载器的路径。如果失败，此方法将调用 findResource(String) 来查找资源。

可能这可能是不同返回字符串的原因，因为可能会根据流程调用不同的方法。****

# c# - Control ID is not accessible in user defined class in C#

> ID：12367848
> 
> 赞同：0
> 
> 时间：2012-09-11T10:38:21.917
> 
> 标签：c#, asp.net, class

I have a querystring.aspx file having a gridview inside in it.

In querystring.cs file's default class that is

`public partial class querystring : System.Web.UI.Page`,

i can access the `gridview` control id.I have made a another class below this class ,but it is not accessing the `gridview` control id.

This is user defined class code in querystring.cs file:-

```
public partial class bindingmethod : System.Web.UI.Page
{

    public void show()
    {
        SqlConnection con = new SqlConnection(getconnectionstring());
        SqlCommand cmd = new SqlCommand();
        DataTable dt = new DataTable();
        cmd.Connection = con;
        con.Open();
        SqlDataAdapter adb = new SqlDataAdapter("show_answers", con);
        adb.Fill(dt);

       GridView1.DataSource = dt;

        GridView1.DataBind();
    }
    //Get a connection string to make a db connection
    public static string getconnectionstring()
    {
        return System.Configuration.ConfigurationManager.ConnectionStrings["crudconnection1"].ConnectionString;
    }
} 
```

For GridView1 it says:

```
The name GridView1 does not exist in the current context. 
```

Please help me. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:00:05.997

您可以简单地将 GridView 的引用传递给您的新类/方法。

从您的 querystring.cs 类：

```
bindingmethod b = new bindingmethod();
b.show(this.GridView1); 
```

绑定方法.cs

```
public class bindingmethod 
{ 
    public void show(GridView gridView) 
    { 
        using(SqlConnection con = new SqlConnection(getconnectionstring()))
        using(SqlCommand cmd = new SqlCommand())
        {
            using(DataTable dt = new DataTable())
            {
              cmd.Connection = con; 
              con.Open(); 

              using(SqlDataAdapter adb = new SqlDataAdapter("show_answers", con))
              {
                  adb.Fill(dt); 

                  gridView.DataSource = dt; 

                  gridView.DataBind(); 
              }
           }
        }
    } 

    //Get a connection string to make a db connection 
    public static string getconnectionstring() 
    { 
        return System.Configuration.ConfigurationManager.ConnectionStrings["crudconnection1"].ConnectionString; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:43:04.083

这是没有意义的，`bindingmethod`不是，`System.Web.UI.Page`因此我不知道你为什么要继承它。此外，`Grid`/`GridView`是`querystring`页面的一部分，因此您只能从该页面访问它们。

我认为您想要做的是将您的`show`/`getconnectionstring`方法移到您的`querystring`课程中并完全摆脱`bindingmethod`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:48:35.007

您顶部的 aspx 页面在`Inherits="querystring"`页面属性中有一个属性。那就是将您的 aspx 页面链接到您的代码后面的 class `querystring`。由于您创建了一个新类`bindingmethod`，因此它与`aspx`页面没有任何关系。您不能从多个类继承 aspx 页面，并且`aspx`页面中的对象`GridView1`以任何方式对您的新类都不可见。

我不确定你为什么要创建一个新课程。看来您只需要`querystring`类中的另一个方法，并且可能需要调用该方法`Page_Load`。

# apache-flex - 适用于初学者的 PureMVC 和 Flex

> ID：12367849
> 
> 赞同：0
> 
> 时间：2012-09-11T10:38:27.363
> 
> 标签：apache-flex, actionscript, puremvc

我是核心 Java 和 Java EE 开发人员，在 UI 和 Web 应用程序方面拥有丰富的经验。我现在遇到一个项目，它使用 Flex 和 ActionScript 作为开发技术，我完全不知道上述两个是什么，并且从未在技术环境中工作过。

我只是想了解它是如何工作的，从 PureMVC 和 Flex 编码开始需要注意什么。

示例是 Java 有类文件作为输出，我们需要在 .java 和文字表达式方法和类中编码。flex 和 AS 中的 dere 是什么？

PureMVC 与 Web 应用程序中使用的 MVC 相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:13:19.483

我不建议您从 PureMVC 和 Flex 开始。大多数企业解决方案都使用[Parsley](http://www.spicefactory.org/parsley/) + Flex。Parsley 与 Spring 非常相似，您作为 Java 和 Java EE 开发人员将更容易理解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:34:54.953

PureMVC 是一个带有 flex 端口的 MVC 框架（其实最初是用 flex 开发的，后来移植到其他平台上）。它是最早发布的用于 flex 的框架之一（与 Ca​​irngorm 一起）。我发现它对自己的学习曲线有点限制。

您会发现 AS3 对于 Java 开发人员来说有些自然。语法可能有点古怪，但您可以将想要的大部分内容直接翻译成 AS3。AS3 源文件以 *.as 结尾，输出是 *.swf（可执行文件）或 *.swc（库）。

如果您选择 flex，您还会发现 *.mxml 文件，这是它的标记语言。MXML 与在 Android 的 XML 模板中编程或使用 HTML 进行 Web 开发之间的根本区别在于，MXML 文件实际上编译为纯动作脚本类。

对于 Java 开发人员，我建议您看一下[spring actionscript](http://www.springactionscript.org/)。它是第一个（如果不是第一个）依赖注入框架之一，直接来自 Java Spring 的端口。您将通过 XML 配置获得基于注解的注入或注入。

就个人而言，如果我作为初学者从头开始，我选择的框架是[简单](http://swizframework.org/)的。

# php - 在更新或插入查询中是否需要使用 mysql_num_rows（PDO 中的 rowCount）？

> ID：12367851
> 
> 赞同：1
> 
> 时间：2012-09-11T10:38:38.563
> 
> 标签：php, rowcount, mysql-num-rows

我应该使用`mysql_num_rows`( `rowCount`in `PDO`) in`update`还是`insert`查询？目前，我的代码看起来像这样，

```
public function update_username(){
    $q = "UPDATE usertable SET username = '$user_name' WHERE id = '$user_id' LIMIT 1";
    $r = $db->query($q);
    if($r){
        $message = "Updated successfully";
        return $message;
    }else{
        return false;
    }
} 
```

我应该把它改成这样吗？

```
public function update_username(){
    $q = "UPDATE usertable SET username = '$user_name' WHERE id = '$user_id' LIMIT 1";
    $r = $db->query($q);
    if($r){
        $num = $r->rowCount();
        if($num == 1){
            $message = "Updated successfully";
            return $message;
        }else{
            $message = "An error occurred";
            return $message;
        }
    }else{
        return false;
    }
} 
```

通常，查询通过没有任何错误，所以我不应该太担心它，但**哪一个会是更好的编码实践？**或者你有什么建议吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:42:46.423

实际上，这两个代码做了不同的事情。

如果查询成功执行，第一个将打印“更新成功”。但是查询也可以成功执行而不会影响任何行，即您有一个`WHERE`不匹配的状态。如果没有行受到影响，第二个代码将不会打印“更新成功”。

当然，如果你确定你的`WHERE`语句必须匹配，你可以使用两个代码没有任何区别，使用第二个可以帮助你发现任何潜在的错误，即它不匹配，所以出了问题（可能id 与您预期的不同）。

`mysql_num_rows`通常，只有在您想知道有多少行受到影响时才需要回答您的问题。使用它根本不是强制性的。

所以，这取决于你想要什么。两者都很好，但它们是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:40:35.953

如果您 100% 确定变量是由您而不是其他人创建的，您可以这样做，但您可以进一步最小化代码：

```
public function update_username(){
    $q = "UPDATE usertable SET username = '$user_name' WHERE id = '$user_id'";
    if($db->query($q)){
        return "Updated successfully";
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T10:54:25.253

首先，因为查询执行成功，并不一定意味着任何内容都已更新。因此，如果您需要区分查询有效性或更新更改之间的差异，那么是的，rowCount 将是一个很好的做法。

其次，在分配变量（SQL 注入等）时使用准备好的语句会更明智。

```
public function update_username(){
  $q = "UPDATE usertable SET username = :user_name WHERE id = :user_id LIMIT 1";
  $r = $db->prepare($q);
  $r->bindValue(':user_name', $user_name);
  $r->bindValue(':user_id', $user_id);
  if($r->execute()){
    $message = "Updated successfully: updated ".$r->rowCount();
    return $message;
  }else{
     return false;
  }
} 
```

为避免代码重复，也许您应该考虑避免为查询编写相同的执行代码，并将其移至为您完成所有操作的方法/函数，例如

```
public function validateStmt($r) {
  // validate query
  if($r->execute()) {
    // check result set
    if($r->rowCount() > 0) {
      return $r;
    }
    else {
      // if a result set IS expected, then you might consider to handle this as
      // a warning or an error
    }
  }
  else {
    // query invalid
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T10:55:31.510

根据情况，您必须选择应该使用的部分。mysql_num_rows() 用于检查您执行的查询影响了多少行。因此，由您决定是否真的有必要将 mysql_num_rows() 函数添加到您的代码中。

# iphone - 如何在 iPhone 上显示 Instagram 用户登录页面

> ID：12367857
> 
> 赞同：0
> 
> 时间：2012-09-11T10:38:56.907
> 
> 标签：iphone, ios, ipad, instagram

任何人都知道如何将 Instagram 用户登录页面显示到我的 iPhone 应用程序中？我只想在成功登录后显示用户的 Instagram 图片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:23:10.247

有一些示例代码..

对于 iPad：

[https://github.com/jaydee3/instagram4iPad](https://github.com/jaydee3/instagram4iPad)

对于 iPhone：

[https://github.com/hsandhu/HSInstagram/tree/master/HSInstagramSample/HSInstagramSample](https://github.com/hsandhu/HSInstagram/tree/master/HSInstagramSample/HSInstagramSample)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T10:52:02.053

为此，我建议查看*“Instagram API”*，它允许开发人员利用用户的*Instagram*照片和其他详细信息。您可以在此处查看 API 开发人员页面...

[http://instagram.com/developer/](http://instagram.com/developer/)

# apache - 如何让 Apache gzip 压缩工作？

> ID：12367858
> 
> 赞同：55
> 
> 时间：2012-09-11T10:38:59.807
> 
> 标签：apache, .htaccess, gzip, mod-deflate

我无法让我的网站使用 gzip 压缩。

我最近在 css-tricks.com 上观看了 Chris Coyier 的这段[视频。](http://css-tricks.com/video-screencasts/114-lets-do-simple-stuff-to-make-our-websites-faster/)在视频中，他谈到了启用 gzip 压缩以使网站运行得更快。

按照他的指示，我通过 html5boilerplate.com 链接到 github，从他们的 .htaccess 文件中复制 gzip 压缩代码，粘贴到我自己的文件中，然后上传到我的网站。

我已经通过 gzipwtf.com 对其进行了测试，但它似乎不起作用。谁能帮我这个？

我的 .htaccess 文件如下所示：

```
# ----------------------------------------------------------------------
# Trim www
# ----------------------------------------------------------------------

RewriteEngine On
RewriteCond %{HTTP_HOST} !^orbitprint.com$ [NC]
RewriteRule ^(.*)$ http://orbitprint.com/$1 [L,R=301]

# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # Compress all output labeled with one of the following MIME-types
  <IfModule mod_filter.c>
    AddOutputFilterByType DEFLATE application/atom+xml \
                                  application/javascript \
                                  application/json \
                                  application/rss+xml \
                                  application/vnd.ms-fontobject \
                                  application/x-font-ttf \
                                  application/xhtml+xml \
                                  application/xml \
                                  font/opentype \
                                  image/svg+xml \
                                  image/x-icon \
                                  text/css \
                                  text/html \
                                  text/plain \
                                  text/x-component \
                                  text/xml
  </IfModule>

</IfModule> 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-11T10:44:26.907

试试这个 ：

```
####################
# GZIP COMPRESSION #
####################
SetOutputFilter DEFLATE
AddOutputFilterByType DEFLATE text/html text/css text/plain text/xml application/x-javascript application/x-httpd-php
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html
SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-05-19T15:45:07.260

最好像下面的代码片段那样实现它。

只需将以下内容粘贴到您的`.htaccess`文件中，然后使用[Google PageSpeed](http://developers.google.com/speed/pagespeed/insights/)、[Pingdom Tools](http://tools.pingdom.com)和[GTmetrics](http://gtmetrix.com/)检查性能。

```
# Enable GZIP
<ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
</ifmodule>

# Expires Headers - 2678400s = 31 days
<ifmodule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "access plus 1 seconds"
  ExpiresByType text/html "access plus 7200 seconds"
  ExpiresByType image/gif "access plus 2678400 seconds"
  ExpiresByType image/jpeg "access plus 2678400 seconds"
  ExpiresByType image/png "access plus 2678400 seconds"
  ExpiresByType text/css "access plus 518400 seconds"
  ExpiresByType text/javascript "access plus 2678400 seconds"
  ExpiresByType application/x-javascript "access plus 2678400 seconds"
</ifmodule>

# Cache Headers
<ifmodule mod_headers.c>
  # Cache specified files for 31 days
  <filesmatch "\.(ico|flv|jpg|jpeg|png|gif|css|swf)$">
  Header set Cache-Control "max-age=2678400, public"
  </filesmatch>
  # Cache HTML files for a couple hours
  <filesmatch "\.(html|htm)$">
  Header set Cache-Control "max-age=7200, private, must-revalidate"
  </filesmatch>
  # Cache PDFs for a day
  <filesmatch "\.(pdf)$">
  Header set Cache-Control "max-age=86400, public"
  </filesmatch>
  # Cache Javascripts for 31 days
  <filesmatch "\.(js)$">
  Header set Cache-Control "max-age=2678400, private"
  </filesmatch>
</ifmodule> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-11T12:46:50.717

您的 .htaccess 应该可以正常运行；它依赖于四个不同的 Apache 模块（每个`<IfModule>`指令一个）。我猜是以下之一：

*   您的 Apache 服务器没有安装和运行 mod_filter、mod_deflate、mod_headers 和/或 mod_setenvif 模块。如果您可以访问服务器配置，请检查`/etc/apache2/httpd.conf`（以及相关的 Apache 配置文件）；否则，您可以`phpinfo()`在 apache2handler 部分下查看哪些模块是通过 加载的（见附图）；（**编辑**）或者，您可以打开一个终端窗口并发出`sudo apachectl -M`将列出已加载模块的命令；

*   如果您收到 http 500 内部服务器错误，您的服务器可能不允许使用 .htaccess 文件；

*   您正在尝试加载发送自己的标头（覆盖 Apache 的标头）的 PHP 文件，从而“混淆”浏览器。

在任何情况下，您都应该仔细检查您的服务器配置**和**错误日志，看看出了什么问题。可以肯定的是，尝试使用Apache 文档中建议[的最快方式：](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)

```
AddOutputFilterByType DEFLATE text/html text/plain text/xml 
```

然后尝试加载一个大的文本文件（最好先清理缓存）。

（**编辑**）如果需要的模块在那里（在 Apache 模块目录中）但没有加载，只需编辑 /etc/apache2/httpd.conf 并为每个模块添加一个[LoadModule指令。](http://httpd.apache.org/docs/2.2/mod/mod_so.html#loadmodule)

如果所需的模块不存在（既没有加载，也没有在 Apache 模块目录中），我担心唯一的选择是重新安装 Apache（完整版本）。

![phpinfo() apache2handler 部分](../Images/67bcf537f9b73e7a969af4dd3de29018.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-01-11T12:08:59.777

首先**转到 apache/bin/conf/httpd.conf**并确保 mod_deflate.so 已启用。

然后转到**.htaccess**文件并添加以下行：

> SetOutputFilter DEFLATE

这应该输出所有作为 gzip 压缩的内容，我已经尝试过了，它可以工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-26T21:13:25.640

使用相同的 .htaccess 配置遇到了这个问题。我意识到我的服务器正在提供 javascript 文件`text/javascript`而不是`application/javascript`. 一旦我添加`text/javascript`到`AddOutputFilterByType`声明中，gzip 就开始工作了。

至于为什么 javascript 被用作`text/javascript`：`AddType 'text/javascript' js`在我的根 .htaccess 文件的顶部有一个声明。删除它后（它被错误地添加了），javascript 开始作为`application/javascript`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-31T03:25:29.663

就我而言，我使用以下代码在 apache Web 服务器中启用 gzip 压缩。

```
 # Compress HTML File, CSS File, JavaScript File, Text File, XML File and Fonts
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE application/json
    AddOutputFilterByType DEFLATE application/x-httpd-php
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE font/otf
    AddOutputFilterByType DEFLATE font/ttf 
```

我参考了[http://www.tutsway.com/enable-gzip-compression-using-htacess.php](http://www.tutsway.com/enable-gzip-compression-using-htacess.php)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-05-04T06:00:03.740

如果您的 Web 主机是通过 C 面板在 Apache C 面板上启用 G ZIP 压缩

转到 CPanel 并检查软件选项卡。

以前优化网站曾经可以工作，但现在有一个新选项可用，即“MultiPHP INI 编辑器”。

选择要压缩的域名。

向下滚动到底部，直到找到 zip 输出压缩并启用它。

现在再次检查 G ZIP 压缩。

您也可以按照视频教程进行操作。[https://www.youtube.com/watch?v=o0UDmcpGlZI](https://www.youtube.com/watch?v=o0UDmcpGlZI)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-14T07:41:37.983

就我而言，仅附加此行有效

`SetOutputFilter DEFLATE`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-17T07:10:08.220

**通过 .htaccess 启用压缩**

对于大多数阅读本文的人来说，压缩是通过在其 Web 主机/服务器上的名为 .htaccess 的文件中添加一些代码来启用的。这意味着转到您的虚拟主机上的文件管理器（或您去添加或上传文件的任何地方）。

.htaccess 文件控制着您网站的许多重要事项。

下面的代码应添加到您的 .htaccess 文件中...

```
<ifModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_dechunk Yes
mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
mod_gzip_item_include handler ^cgi-script$
mod_gzip_item_include mime ^text/.*
mod_gzip_item_include mime ^application/x-javascript.*
mod_gzip_item_exclude mime ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule> 
```

保存 .htaccess 文件，然后刷新您的网页。

[使用Gzip 压缩工具](https://varvy.com/tools/gzip/)检查您的压缩是否正常工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-14T06:26:15.160

```
<ifModule mod_gzip.c>
mod_gzip_on Yes
mod_gzip_dechunk Yes
mod_gzip_item_include file .(html?|txt|css|js|php|pl)$
mod_gzip_item_include handler ^cgi-script$
mod_gzip_item_include mime ^text/.*
mod_gzip_item_include mime ^application/x-javascript.*
mod_gzip_item_exclude mime ^image/.*
mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

<IfModule mod_deflate.c>
# Insert filters
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE application/x-httpd-php
AddOutputFilterByType DEFLATE application/x-httpd-fastphp
AddOutputFilterByType DEFLATE image/svg+xml

# Drop problematic browsers
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

# Make sure proxies don't deliver the wrong content
Header append Vary User-Agent env=!dont-vary
</IfModule> 
```

# ruby-on-rails - How to maintain values of variable between multiple action call in rails

> ID：12367864
> 
> 赞同：0
> 
> 时间：2012-09-11T10:39:03.893
> 
> 标签：ruby-on-rails, ruby, static

I my project I am having varible

```
id=params[:id]
status=params[:status]
.....

if(!status.nil?)
   if(status='off')
   flag[id]=1
   else
   flag[id]=2
   end
else
   if(flag==1)
    puts off
   else
    puts on
end 
```

*   request come with status depending on status I am creating flag

*   i want to use that flag in next call to the function when the status is nil

*   My problem is that I am not getting the flag values in next call

*   How to temporary store that values for later use

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:55:49.590

如果您想在请求之间保留一个值，使用会话可能是正确的方法。有关该主题的更多信息，请参阅[本指南](http://guides.rubyonrails.org/action_controller_overview.html#session)。

# mysql - Use of Mysql index

> ID：12367867
> 
> 赞同：1
> 
> 时间：2012-09-11T10:39:14.597
> 
> 标签：mysql

1.  MYISAM table type or engine - creates 3 files on disk for each table.

    1.  for structure .frm
    2.  for data .myd
    3.  for index .myi If I create new index for already existed table, which files from above get changed?
2.  When we create index, what exactly happends to the data in table? does the records in table get chenged for indexed column?

3.  If we insert new record as `name = aaass`, `salary = 40500`, at which position the record is stored? at the end? or as we created index, it will store bellow the name= aaab?

e.g table is

```
id name salary
1  aaa   20000
2  ddd   23000
3  aaabb 10000
4  dddqa 40000 
```

if I create index on name, then does data gets rearraged as follows?

```
id name salary
1  aaa   20000
3  aaabb 10000
2  ddd   23000
4  dddqa 40000 
```

If not then what is the use of index?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:45:33.903

如果您为已经存在的表创建一个新索引，那么`.frm`文件`.myi`应该得到更新，因为`.frm`将在表定义中使用新索引进行更新，并且`myi`文件将使用新的索引树进行更新。

`PRIMARY KEY`在表上定义的`clustured index`记录是根据键顺序按排序顺序存储的。

# javascript - javascript/jquery 在子数组中搜索？

> ID：12367868
> 
> 赞同：0
> 
> 时间：2012-09-11T10:39:27.250
> 
> 标签：javascript, jquery, arrays, string

有一个字符串正在制定类似这样的 `Item:ShortName:Tax`内容，如果添加更多项目，则将其附加到字符串 like `Item:ShortName:Tax_Item2:ShortName2:Tax2`，再添加一个，`Item:ShortName:Tax_Item2:ShortName2:Tax2_Item3:ShortName3:Tax3`依此类推。我想知道的是，我必须检查列表中是否存在某个项目，例如`shirt`，或`jeans`。当用冒号分隔时，它将是数组中的第一个。

我用过[这个](http://jsfiddle.net/fgbmE/)。

```
var list = "Item:ShortName:Tax_Item2:ShortName2:Tax2_Item3:ShortName3:Tax3_Item4:ShortName4:Tax4";

$(document).ready(function () {
    var arg = 'Item2';
    findItem(arg);
    fucntion findItem(argument) {
        $.each(list.split('_'), function () {
            if (this.split(':')[0] == arg) {
                alert('Item found!');
            }
        };
        }; 
```

但是警报没有出现，但`Item2`在列表中。
如果不清楚，这个列表拆分`_`包含一个数组（如您所见）并且每个数组由`:`contains分隔`Itemname, ItemShortName, TaxOnItem`，现在在所有这些小数组中，我必须检查包含的第一个数组`ItemName`以查看是否有特定的项目存在与否！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:43:26.407

您确实意识到您的代码中有错误， fucntion findItem(argument) { } 认为您的意思是“函数”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:43:43.850

在这里：我稍微~~重新格式化~~重组了你的代码。试试这个：

```
var list = "Item:ShortName:Tax_Item2:ShortName2:Tax2_Item3:ShortName3:Tax3_Item4:ShortName4:Tax4";

function findItem(argument) {
    list.split("_").forEach(function(subList){
        if(subList.split(":")[0] == argument) { 
             alert("Item found!");
         }
    });
};

$(document).ready(function () {
    findItem("Item2");
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:44:37.733

你错过了一些`{`，`(`以及一个错字。控制台日志告诉你这一切！

```
$(document).ready(function () {

    var list = "Item:ShortName:Tax_Item2:ShortName2:Tax2_Item3:ShortName3:Tax3_Item4:ShortName4:Tax4";
    var arg = 'Item2';
    findItem(arg);

    function findItem(argument) {
        $.each(list.split('_'), function () {
            if (this.split(':')[0] == arg) {
                alert('Item found!');
            }
        });
}

}​);​ 
```

# android - dalvikvm-heap：73547536 字节分配内存不足

> ID：12367874
> 
> 赞同：3
> 
> 时间：2012-09-11T10:39:56.813
> 
> 标签：android, android-listview

我释放了每个对象，回收了 onDestroy() 方法中的所有位图：

```
 private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
}
@Override
protected void onDestroy()
{
    super.onDestroy();
    unbindDrawables(findViewById(R.id.RootView));
            bitmap.recycle();
            bitmap=null;
    System.gc();

} 
```

我已经在每个类的 onDestroy() 方法中完成了这个编码。但我的 logcat 仍然向我显示如下错误：

```
 FATAL EXCEPTION: main
            java.lang.RuntimeException: Unable to start activity ComponentInfo{}: android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.RelativeLayout
             android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
             android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
             android.app.ActivityThread.access$600(ActivityThread.java:123)
             android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
             android.os.Handler.dispatchMessage(Handler.java:99)
             android.os.Looper.loop(Looper.java:137)
             android.app.ActivityThread.main(ActivityThread.java:4424)
             java.lang.reflect.Method.invokeNative(Native Method)
             java.lang.reflect.Method.invoke(Method.java:511)
        com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
             dalvik.system.NativeStart.main(Native Method)
           Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.RelativeLayout
           android.view.LayoutInflater.createView(LayoutInflater.java:606)
                com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
            android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
            android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
            android.view.LayoutInflater.inflate(LayoutInflater.java:466)
            android.view.LayoutInflater.inflate(LayoutInflater.java:396)
             android.view.LayoutInflater.inflate(LayoutInflater.java:352)
           com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
           android.app.Activity.setContentView(Activity.java:1835)
           android.app.Activity.performCreate(Activity.java:4465)
          android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
          android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
          ... 11 more
          Caused by: java.lang.reflect.InvocationTargetException
          java.lang.reflect.Constructor.constructNative(Native Method)
          java.lang.reflect.Constructor.newInstance(Constructor.java:417)
          android.view.LayoutInflater.createView(LayoutInflater.java:586)
        ... 23 more
              Caused by: java.lang.OutOfMemoryError
              android.graphics.Bitmap.nativeCreate(Native Method)
              android.graphics.Bitmap.createBitmap(Bitmap.java:605)
              android.graphics.Bitmap.createBitmap(Bitmap.java:551)
              android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
              android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
              android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
              android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
          android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
           android.content.res.Resources.loadDrawable(Resources.java:1935)
           android.content.res.TypedArray.getDrawable(TypedArray.java:601)
           android.view.View.<init>(View.java:2785)
            android.view.View.<init>(View.java:2722)
            android.view.ViewGroup.<init>(ViewGroup.java:379)
           android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
          ... 26 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T11:28:55.093

标题说明了一切——您试图一次为一张图像分配*73 兆字节的堆。*仅此一项就超过了大多数现代设备上可用的堆大小——64 兆字节。您需要找到一种方法来使用明显更小的图像。

# elasticsearch - 更改 Elasticsearch 中现有索引的设置和映射

> ID：12367877
> 
> 赞同：20
> 
> 时间：2012-09-11T10:40:08.170
> 
> 标签：elasticsearch

我想在 Elasticsearch 中已经存在的索引上设置以下设置和映射：

```
{
    "analysis": {
        "analyzer": {
            "dot-analyzer": {
                "type": "custom",
                "tokenizer": "dot-tokenizer"
            }
        },
        "tokenizer": {
            "dot-tokenizer": {
                "type": "path_hierarchy",
                "delimiter": "."
            }
        }
    }
}

{
    "doc": {
        "properties": {
            "location": {
                "type": "string",
                "index_analyzer": "dot-analyzer",
                "search_analyzer": "keyword"
            }
        }
    }
} 
```

我试图添加这两行代码：

```
client.admin().indices().prepareUpdateSettings(Index).setSettings(settings).execute().actionGet();
client.admin().indices().preparePutMapping(Index).setType(Type).setSource(mapping).execute().actionGet(); 
```

但这是结果：

```
org.elasticsearch.index.mapper.MapperParsingException: Analyzer [dot-analyzer] not found for field [location] 
```

任何人？非常感谢，

斯廷

* * *

这似乎有效：

```
if (client.admin().indices().prepareExists(Index).execute().actionGet().exists()) {            
    client.admin().indices().prepareClose(Index).execute().actionGet();
    client.admin().indices().prepareUpdateSettings(Index).setSettings(settings.string()).execute().actionGet();
    client.admin().indices().prepareOpen(Index).execute().actionGet();
    client.admin().indices().prepareDeleteMapping(Index).setType(Type).execute().actionGet();
    client.admin().indices().preparePutMapping(Index).setType(Type).setSource(mapping).execute().actionGet();
} else {
    client.admin().indices().prepareCreate(Index).addMapping(Type, mapping).setSettings(settings).execute().actionGet();
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-11T11:11:08.353

如果您在发送更改后查看您的设置，您会注意到分析器不存在。事实上，您无法更改实时索引设置的分析部分。最好使用所需的设置创建它，否则您可以关闭它：

```
curl -XPOST localhost:9200/index_name/_close 
```

当索引关闭时，您可以发送新设置。之后，您可以重新打开索引：

```
curl -XPOST localhost:9200/index_name/_open 
```

当索引关闭时，它不使用任何集群资源，但它不可读也不可写。如果要使用 Java API 关闭并重新打开索引，可以使用以下代码：

```
client.admin().indices().prepareClose(indexName).execute().actionGet();
//TODO update settings
client.admin().indices().prepareOpen(indexName).execute().actionGet(); 
```

# ruby-on-rails - Resque does not honor application config

> ID：12367878
> 
> 赞同：0
> 
> 时间：2012-09-11T10:40:09.513
> 
> 标签：ruby-on-rails, localization, internationalization, config, resque

I Have been using resque quite comfortably, But for following scenario

In one of my perform method

```
class A < ActiveRecord::Base
  def self.perform
    B.something
  end
end

class B < ActiveRecord::Base
  def self.something
   l = Misc.get_locale
    ....
    ....
  end
end

class Misc
  def self.get_locale
    return I18n.locale
  end
end 
```

Issue is that it always return I18n.locale as **:en** even though in my application config, I have set it to **:us_en**(or whatever), like below

```
config.i18n.default_locale = :us_en
config.i18n.locale = :us_en 
```

Is it because I am reading that I18n.locale from a class and not a rails Model? Or is it because of some other reason?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:30:52.523

我认为 resque 更有可能没有读取您的 rails 配置。

您可以尝试在初始化程序中设置它（我相信应该阅读）。

`config/initalizers/i18n.rb`：

```
I18n.default_locale = 'en-US'
I18n.locale = 'en-US' 
```

作为旁注，语言代码在[bcp47](http://tools.ietf.org/html/bcp47)标准中用于识别语言的区域代码之前首先出现（尽管我是肛门！）。

# xpath - 使用 xpath 查找正确字符串时出现问题

> ID：12367880
> 
> 赞同：1
> 
> 时间：2012-09-11T10:40:19.773
> 
> 标签：xpath

我的 xpath 要么返回

`John Hernandez | 12 Jul 2012` 或`13 July 2012`作为字符串。

如果字符串包含字符`|`，那么我想要字符串，`|`否则我想要整个字符串。

我使用了以下 xpath ：

```
 substring-after(string(./div/span[2]),'|') 
```

如果字符串包含 | 它会给我正确的输出 2012 年 7 月 12 日 但如果我的字符串不包含 | 它返回空值。有没有办法检查字符串是否包含 | 然后在 | 之后使用字符串 ow 返回整个字符串。

谁能帮我做到这一点。

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:27:38.230

如果您使用的是 XPath 2.0，那么这将是：

```
if (contains(string(div/span[2]), '|')) 
then substring-after(string(div/span[2]),'|') 
else string(div/span[2]) 
```

如果您使用的是 XPath 1.0，那么您必须在调用 substring-after() 之前检查 XSLT（或您正在使用的任何东西）中的字符串。例如：

```
<xsl:choose>
    <xsl:when test="contains(div/span[2], '|')">
        <xsl:value-of select="substring-after(string(div/span[2]),'|')"/>
    </xsl:when>
    <xsl:otherwise>
        <xsl:value-of select="div/span[2]"/>
    </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:24:04.683

在 XPath 1.0 中，您可以使用

```
substring-before(substring-after(concat(string(./div/span[2]), "|", string(./div/span[2]), "|"), "|"), "|") 
```

这首先将字符串分别归一化为`John Hernandez | 12 Jul 2012 | John Hernandez | 12 Jul 2012 |`or`13 July 2012 | 13 July 2012 |`然后总是返回 |-list 中的第二个值

（但无论如何你都应该切换到 XPath 2，它会好得多......）

# google-app-engine - Appengine error object has no attribute '_key'

> ID：12367885
> 
> 赞同：0
> 
> 时间：2012-09-11T10:40:26.793
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore

I have a GAE database entity that looks like this:

```
class Notification(db.Model):

    alert = db.StringProperty()
    type = db.StringProperty()
    status = db.StringProperty(default="unread", choices=set(["unread", "read"])) 
    created  = db.DateTimeProperty(auto_now_add=True)
    modified = db.DateTimeProperty(auto_now=True)
    entity = db.StringProperty()
    record = db.ReferenceProperty(model.RecordModel)
    actor = db.ReferenceProperty(model.Profile)
    account = db.ReferenceProperty(model.Account) 
```

... and I create an entity like so:

```
notify = model2.Notification(account=account)
notify.alert = message
notify.type = "reminder"
notify.actor = actor
notify.record = record
notify.put() 
```

This call raises an error ***'Notification' object has no attribute '_key'***

```
nquery = db.Query(model2.Notification).filter('account =', self.session.account).order('-created')            
for n in nquery:
  try:
    _dict = {}
    _dict['serverID'] = str(n.key()) #- raises error! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:44:34.203

尝试：

```
nquery = Notification.all().filter('account =', self.session.account).order('-created') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:30:04.043

我想我已经想通了！我的 Notification 类中的“实体”属性导致 python appengine 中的某种命名冲突。更改名称会删除“错误对象没有属性 '_key'”错误。去搞清楚！

# sharepoint - 无法使用 sharepoint powershell 更新列表字段属性

> ID：12367887
> 
> 赞同：1
> 
> 时间：2012-09-11T10:40:30.820
> 
> 标签：sharepoint, powershell

如何使用 PowerShell 更新列表字段属性？当我尝试以下操作时：

```
$site = Get-SPSite -Identity "http://vikas:26112/"

$web= $site.OpenWeb()   

$spList = $web.GetList("/Lists/Support Links") 
$spFieldType = [Microsoft.SharePoint.SPFieldType]::Text
$spList.Fields.Add("FirstName",$spFieldType,$false)
$spList.Fields[“FirstName”].Description = “My FirstName Field”
$spList.Fields[“FirstName”].Required=$true
$spList.Fields["FirstName"].EnforceUniqueValues=$true
$spList.update()

$web.Dispose() 
```

执行后该`FirstName`字段被添加到列表中，但该字段的属性保持不变：

```
Description =""  
Required=false  
EnforceUniqueValues=false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T10:51:46.110

问题是您没有更新该字段，并且每次使用它时索引器都会返回不同的实例。您必须将字段的实例存储在某个变量中，然后更改它，然后更新它。

像这样更改您的代码：

```
$site = Get-SPSite -Identity "http://vikas:26112/"
$web= $site.OpenWeb()   
$spList = $web.GetList("/Lists/Support Links") 
$spFieldType = [Microsoft.SharePoint.SPFieldType]::Text
$spList.Fields.Add("FirstName",$spFieldType,$false)
$field = $spList.Fields[“FirstName”]
$field.Description = “My FirstName Field”
$field.Required=$true
$field.EnforceUniqueValues=$true
$field.update()

$web.Dispose() 
```

# python - 从类文件中确定文件-/内容-/mime-type？

> ID：12367891
> 
> 赞同：2
> 
> 时间：2012-09-11T10:40:49.883
> 
> 标签：python, mime-types, content-type

是否可以在 Python 中确定类文件对象的类型？

例如，如果我要将文件的内容读入`StringIO`容器并将其存储在数据库中，我以后可以从数据中计算出原始文件-/内容-/mime-type 吗？例如。我可以搜索任何常见的标题吗？

如果没有，是否有任何方法可以确定“常见”文件（图像、办公文档等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:43:01.067

你可以试试[filemagic](http://pypi.python.org/pypi/filemagic)模块：

```
with magic.Magic as m:
    m.id_filename('setup.py')
    # => 'Python script, ASCII text executable'

    b = open("image.jpg", "rb").read()
    m.id_buffer(b)
    # => 'JPEG image data, JFIF standard 1.01' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-25T12:35:42.687

是的，您应该评估十六进制签名。

# xml - 根据字长插入

> ID：12367895
> 
> 赞同：0
> 
> 时间：2012-09-11T10:40:55.377
> 
> 标签：xml, regex, character

首先，我不是程序员。

我有一个巨大的 XML 文件，其中的术语描述如下：

```
<term>
<termId>MANUAL000399</termId>
<termUpdate>Add</termUpdate>
<termName>care</termName>
<termType>Pt</termType>
<termStatus>Active</termStatus>
<termApproval>Approved</termApproval>
<termCreatedDate>20120618T14:38:20</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20120618T14:40:41</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
</term> 
```

在文件中，条款有

```
<termType> 
```

铂或ND

我希望解决方案适用于两者。我想做的是能够通过，查看 termName 中的单词长度，如果那里的字符少于 5 个，则附加另一个属性，a

```
<termNote> 
```

在之后

```
<termModifiedBy> 
```

财产：

```
<term>
<termId>MANUAL000399</termId>
<termUpdate>Add</termUpdate>
<termName>care</termName>
<termType>Pt</termType>
<termStatus>Active</termStatus>
<termApproval>Approved</termApproval>
<termCreatedDate>20120618T14:38:20</termCreatedDate>
<termCreatedBy>admin</termCreatedBy>
<termModifiedDate>20120618T14:40:41</termModifiedDate>
<termModifiedBy>admin</termModifiedBy>
<termNote label="Short">Short</termNote>
</term> 
```

谁能建议最好的方法是什么？我在这里找到了正则表达式，但问题是它们的应用，我发现有人建议 /\b[a-zA-Z]{5,}\b/ 但我不知道如何编写一个脚本来接受这个和如果匹配，则插入 termNote。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:30:19.433

这种转换可以通过一个简单的 XSLT 样式表来完成。（XSLT 是非程序员经常比程序员更热衷的语言。样式表基本上是一组转换规则：当您看到与 X 匹配的内容时，将其替换为 Y。当然，一旦您掌握了 XSLT，您可以称自己为程序员）。

首先是一些样板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:strip-space elements="*"/> <!-- removes whitespace from the input -->
<xsl:output indent="yes"/>      <!-- adds whitespace to the output --> 
```

如果没有更具体的规则，则默认模板规则会复制未更改的内容：

```
<xsl:template match="*">
  <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template> 
```

然后是匹配短期术语的模板规则：

```
<xsl:template match="term[string-length(termName) &lt; 5]">
  <term>
    <xsl:copy-of select="*"/>
    <termNote label="Short">Short</termNote>
  </term>
</xsl:template> 
```

然后结束：

```
</xsl:stylesheet> 
```

您应该能够使用任何 XSLT 处理器运行它；有很多可用的。如果没有其他想法，请下载 KernowForSaxon（来自 SourceForge），它是围绕我的 Saxon 处理器的一个非常简单的 GUI 界面。

# jquery - jQuery插件 - 如何使用初始化参数外部调用函数

> ID：12367898
> 
> 赞同：0
> 
> 时间：2012-09-11T10:40:59.463
> 
> 标签：jquery, jquery-plugins, external

我正在尝试编写一个插件来自动切换 jQuery 中面板的内容。如果我不需要在我的插件中定义的外部调用具有初始化设置的指定元素的函数，那么一切正常。我被困在这种情况下。举个例子；我有一个名为“toggle(domEle)”的函数获取一个元素作为参数，如果打开则将其关闭，否则打开。在这个函数内部，它调用了另外两个函数，名为“toggleOff(domEle)”和“toggleOn(domEle)”。我想在外部调用这些函数中的任何一个。因为我想对面板进行分组并确保同时只有一个“在”组中。所以我得到了所有的组，但不能为他们调用“toggleOff”方法。

```
$("#someElement").togglePanel({options}); // initialize the plugin.

//Now it works fine with binded trigger events passed in options.
//But i want to call toggling functions externally like this or somehow:

$("#someElement").togglePanel().toggleOff();
//Or
$("#someElement").togglePanel.toggleOff();
//Or how it must be. 
```

这是我的完整代码。我希望我能解释我的问题。

```
//Toggle Panel
(function ($) {
    var methods = {
        //init method
        init: function (domEle, settings) {
            if (!methods.getSettings(domEle)) {
                switch (settings.position) {
                    case "top":
                        $(domEle).css("margin-top", settings.margin);
                        break;
                    case "bottom":
                        $(domEle).css("margin-bottom", settings.margin);
                        break;
                    case "left":
                        $(domEle).css("margin-left", settings.margin);
                        break;
                    case "right":
                        $(domEle).css("margin-right", settings.margin);
                        break;
                }
                $(domEle).css("position", "absolute");
                $(domEle).css("z-index", settings.zindex);
                methods.setToggleStatus(domEle, "on");
                methods.setToggleGroup(domEle, settings.toggleGroup);
                $(settings.triggers).each(function (index, elem) {
                    $(elem.selector).bind(elem.eventName, function (e) {
                        methods.toggle(domEle);
                    });
                });
                methods.setSettings(domEle, settings);
                methods.toggleOff(domEle, false);
            }
        },
        //toggle method
        toggle: function (domEle) {
            if (methods.getAnimatingStatus(domEle) == "true") return;
            if (methods.getToggleStatus(domEle) == "on") {
                methods.toggleOff(domEle);
            }
            else {
                methods.toggleOn(domEle);
            }
        },
        //toggleOn method
        toggleOn: function (domEle, useAnimation) {
            if (methods.getAnimatingStatus(domEle) == "true") return;
            var settings = methods.getSettings(domEle);
            useAnimation = typeof useAnimation !== 'undefined' ? useAnimation : settings.useAnimation;
            if (methods.getToggleStatus(domEle) == "off") {
                if (useAnimation) {
                    methods.toggleStart(domEle);
                    switch (settings.position) {
                        case "top":
                            $(domEle).animate({ top: 0 }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                        case "bottom":
                            $(domEle).animate({ bottom: 0 }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                        case "left":
                            $(domEle).animate({ left: 0 }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                        case "right":
                            $(domEle).animate({ right: 0 }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                    }
                }
                else {
                    switch (settings.position) {
                        case "top":
                            $(domEle).css({ top: 0 });
                            break;
                        case "bottom":
                            $(domEle).css({ bottom: 0 });
                            break;
                        case "left":
                            $(domEle).css({ left: 0 });
                            break;
                        case "right":
                            $(domEle).css({ right: 0 });
                            break;
                    }
                }
                methods.setToggleStatus(domEle, "on");
            }
        },
        //toggleOff method
        toggleOff: function (domEle, useAnimation) {
            if (methods.getAnimatingStatus(domEle) == "true") return;
            var settings = methods.getSettings(domEle);
            useAnimation = typeof useAnimation !== 'undefined' ? useAnimation : settings.useAnimation;
            var width = $(domEle).width();
            var height = $(domEle).height();
            if (methods.getToggleStatus(domEle) == "on") {
                if (useAnimation) {
                    methods.toggleStart(domEle);
                    switch (settings.position) {
                        case "top":
                            $(domEle).animate({ top: -height }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                        case "bottom":
                            $(domEle).animate({ bottom: -height }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                        case "left":
                            $(domEle).animate({ left: -width }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                        case "right":
                            $(domEle).animate({ right: -width }, settings.animDuration, null, function () { methods.toggleComplete(domEle); });
                            break;
                    }
                }
                else {
                    switch (settings.position) {
                        case "top":
                            $(domEle).css({ top: -height });
                            break;
                        case "bottom":
                            $(domEle).css({ bottom: -height });
                            break;
                        case "left":
                            $(domEle).css({ left: -width });
                            break;
                        case "right":
                            $(domEle).css({ right: -width });
                            break;
                    }
                }
                methods.setToggleStatus(domEle, "off");
            }
        },
        //toggleStart
        toggleStart: function (domEle) {
            methods.setAnimatingStatus(domEle, true);
            methods.getSettings(domEle).toggleStart();
        },
        //toggleComplete
        toggleComplete: function (domEle) {
            methods.setAnimatingStatus(domEle, false);
            methods.getSettings(domEle).toggleComplete();
        },
        //getToggleStatus method
        getToggleStatus: function (domEle) { return $(domEle).attr("toggleStatus"); },
        //setToggleStatus method
        setToggleStatus: function (domEle, status) { $(domEle).attr("toggleStatus", status); },
        //getToggleGroup method
        getToggleGroup: function (domEle) { return $(domEle).attr("toggleGroup"); },
        //setToggleGroup method
        setToggleGroup: function (domEle, group) { $(domEle).attr("toggleGroup", group); },
        //getAnimatingStatus
        getAnimatingStatus: function (domEle) { return $(domEle).attr("isAnimating"); },
        //setAnimatingStatus
        setAnimatingStatus: function (domEle, status) { $(domEle).attr("isAnimating", status); },
        //getSettings
        getSettings: function (domEle) { return jQuery(domEle).data("settings"); },
        //setSettings
        setSettings: function (domEle, settings) { jQuery(domEle).data("settings", settings); }
    }

    jQuery.fn.togglePanel = function (options) {
        jQuery.fn.togglePanel.toggleOff = function () { methods.toggleOff($(this)); };
        jQuery.fn.togglePanel.toggleOn = function () { methods.toggleOn($(this)); };
        jQuery.fn.togglePanel.toggle = function () { methods.toggle($(this)); };
        jQuery.fn.togglePanel.defaults = {
            position: "top",
            margin: 0,
            zindex: -1,
            useAnimation: true,
            animDuration: 400,
            triggers: {},
            toggleStart: function () { },
            toggleComplete: function () { },
            toggleGroup: "_none_"
        };
        var $this = $(this);
        var settings = jQuery.extend(jQuery.fn.togglePanel.defaults, options);
        methods.init($this, settings);
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:23:04.593

你应该做这样的事情

```
var methods = {
    toggleOn: ...,
    toggleOff: ...,
    init: function(obj) {
        ...
    }
}

$.fn.togglePanel= function( method ) {    
  if ( methods[method] ) {
    return methods[method].apply( 
     this, Array.prototype.slice.call( arguments, 1 )
    );
  } else if ( typeof method === 'object' || ! method ) {
    return methods.init.apply( this, arguments );
  } else {
    $.error( 'Method ' +  method + ' does not exist' );
  }      
}; 
```

所以你可以通过`.togglePanel('toggleOff')`

您的尝试将与通常的 jQuery 链接相矛盾。

# php - 在模糊时检查 mySQL 数据库中是否存在记录

> ID：12367899
> 
> 赞同：0
> 
> 时间：2012-09-11T10:41:04.673
> 
> 标签：php, jquery, ajax, forms, validation

我正在考虑如何实现这个场景：

我有一张桌子`orders`，里面有一个`serialNumber`字段。然后我还有一个带有表单的 PHP 页面。我想做的是，`onBlur`或者在按键输入/返回`<input type=text>`字段时，我想要一个 ajax/jquery 脚本来检查文本框输入中的序列号，如果它在我的 mySQL 数据库中有现有记录。然后脚本会警告用户该序列号已经存在于数据库中并且不允许提交。

我知道如何通过标准表单提交来实现它，但我在想它可以在没有按字面按下提交按钮的情况下完成。

有没有办法实现这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:03:57.670

为此，您可以使用 javascript。在模糊事件上调用文本框的 javascript 上创建。在这里，我创建了在模糊事件上调用文本框的函数。

```
function CheckUserName(){
    var UserName = document.getElementById('UserName');
    if(UserName.value != "")
    {
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()
        {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                var value = xmlhttp.responseText;
                if(value.length > 1)
                {
                    document.getElementById('ErrorSpan').innerHTML="User Name Already exist please choose Other User Name";
                    UserName.focus();
                }
                else
                {
                    document.getElementById('ErrorSpan').innerHTML="";
                }
            }
          }
        xmlhttp.open("GET","checkUserName.php?q="+UserName.value,true);
        xmlhttp.send();
    }
} 
```

并创建一个名为 checkusername.php 的 php 文件，并通过查询字符串传递您的值。

php代码如下。

```
<?php
$q=$_GET["q"];
include("db_connect.php");

$sql="select * from usermaster where UserName='".$q."'";
$result = mysql_query($sql);
while($row = mysql_fetch_array($result))
  {
    echo $row['UserName'];
  }
mysql_close($con);

?> 
```

如果用户名找到它，则从 php 此处返回值，您可以在 javascript 函数中获取值。我希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:50:32.983

您也可以使用我在 keyup 上检查过的这种方法，您可以通过 onblur 选项使用它。

```
 <input  type="text"  value="" id="jform_domain_name" name="jform[domain_name]"   onkeyup="checkAvailability();"/>

<div id="errormsg" class="no-display">Sorry, this name is not available!</div>
<div id="successmsg" class="no-display">Congratulations, this domain is available!</div>
 <script>
 function checkAvailability(){

    jQuery('#ajaxloader').html('<img src="images/ajax-loader.gif" />');
    var string = jQuery('#jform_domain_name').val();
    if(string == ''){
        jQuery('#ajaxloader').html('');
        return false;   
    }

    jQuery.ajax({
            type : "POST"
            ,url : "YOUR_ACTION_URL"
            ,data :"string="+jQuery('#jform_domain_name').val()

            ,success : function(data){               
                if(data==0){
                    var errormsg = jQuery("#errormsg").html();
                    jQuery("#ajaxloader").show();
                jQuery('#ajaxloader').html(errormsg);
            }else{
                var successmsg = jQuery("#successmsg").html();
                jQuery("#ajaxloader").show();
                jQuery('#ajaxloader').html(successmsg);
            }

        }
    ,complete : function(){

         if( jQuery('#jform_domain_name').val() == "" ) {
                jQuery("#ajaxloader").hide();
            }
        }
            ,beforeSend: function(html){
                jQuery("#ajaxloader").show();
                jQuery('#ajaxloader').html('<img style="padding-top:6px;" src="images/ajax-loader.gif" />');
            return;
        }
        });
}
 </script> 
```

作为参考，我提供了我的控制器操作和我使用的模型

```
//sample controller action 
 function checkdomain(){
       $requestData = JRequest::get();
    $return = $model->checkAvailabiLity($requestData['string']);

    if($return === false){
        echo 0;
    }else{
        echo 1;
    }
    die;
} 
//sample model on which I created Query logic.
   public function checkAvailabiLity($data){
    $select = "SELECT id FROM #__jshopping_vendors WHERE domain_name = '".strtolower($data)."' AND user_id != ".$user->id."";
    $db->setQuery($select);
    $type = $db->loadObject();

    if(isset($type->id) && $type->id >0){
        return false;
    }else{
        return true;
    }
} 
```

希望这可以帮助....

# google-app-engine - 使用高复制数据存储 + NDB 写入/读取

> ID：12367904
> 
> 赞同：2
> 
> 时间：2012-09-11T10:41:25.517
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore

所以我最近一直在阅读很多关于 HRD 和 NDB 的文档，但是我仍然对 NDB 是如何缓存的东西有一些疑问。

**示例案例：**

想象一个用户写入数据并且应用程序需要在写入后立即获取它的情况。例如，用户创建一个“组”（类似于 Facebook/Linkedin 组）并在创建后立即被重定向到该组。*（现在，我正在创建一个组而不为其分配祖先）*

**结果：**

在本地测试此类功能时（启用高复制），新创建的组的立即获取失败。返回一个 NoneType。

**问题：**

浏览了 High Replication 文档和 Google IO 视频后，我了解到写入延迟较高，但是，NDB 缓存不应该解决这个问题吗？即缓存写入，然后异步实际写入磁盘，因此，立即读取将从缓存中读取，因此应该没有问题。我需要强制执行一些其他设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:47:30.913

很确定您遇到了 HRD 功能，其中查询“最终一致”。NDB 的缓存与此行为无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:14:51.510

我怀疑这可能是因为返回 NoneType 的重定向。

[https://developers.google.com/appengine/docs/python/ndb/cache#incontext](https://developers.google.com/appengine/docs/python/ndb/cache#incontext)

> 上下文缓存仅在单个传入 HTTP 请求期间持续存在，并且仅对处理该请求的代码“可见”。它很快; 这个缓存存在于内存中。当 NDB 函数写入数据存储时，它也会写入上下文缓存。当 NDB 函数读取实体时，它首先检查上下文缓存。如果在此处找到实体，则不会发生 Datastore 交互。查询不会在任何缓存中查找值。但是，如果缓存策略如此，查询结果将被写回上下文缓存（但永远不会写回 Memcache）。

因此，您将值写入缓存，重定向它，然后读取失败，因为重定向上的 HTTP 请求是不同的，因此缓存不同。

我在这里达到了我的知识极限，但我建议您最初尝试在事务中创建并在完成/成功时重定向。

[https://developers.google.com/appengine/docs/python/ndb/transactions](https://developers.google.com/appengine/docs/python/ndb/transactions)

此外，当您将组模型放入数据存储区时，您将获得一个密钥。您可以将该密钥（例如通过 urlsafe）传递给重定向，然后您就可以保证检索数据，因为您拥有它的显式密钥？如果它毕竟不在数据存储中，就不能拥有它的密钥。

另外我建议在生产服务器上尝试它，有时行为在本地和生产中可能会有很大不同。

# ruby-on-rails - 在 ROR 3.0 中使用全局变量是好的做法吗

> ID：12367907
> 
> 赞同：3
> 
> 时间：2012-09-11T10:41:36.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在需要更多安全性的大型项目中使用全局变量是否是良好做法（我读到的一些地方不是 DRY），如果没有，请解释原因？提前感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:54:50.633

无论在哪里使用全局变量，它们通常都是[bad](http://c2.com/cgi/wiki?GlobalVariablesAreBad)。

**为什么在不必要时应避免使用全局变量**

*   非局部性——当单个元素的范围有限时，源代码最容易理解。全局变量可以被程序的任何部分读取或修改，因此很难记住或推理每种可能的用途。
*   没有访问控制或约束检查——程序的任何部分都可以获取或设置全局变量，并且任何关于其使用的规则都可以很容易地被破坏或遗忘。（换句话说，get/set 访问器通常比直接数据访问更可取，对于全局数据更是如此。）通过扩展，在您可能希望运行不受信任的代码的情况下，缺乏访问控制极大地阻碍了实现安全性（例如使用 3rd 方插件）。
*   隐式耦合——具有许多全局变量的程序通常在其中一些变量之间存在紧密耦合，以及变量和函数之间的耦合。将耦合的项目分组为有凝聚力的单元通常会导致更好的程序。
*   并发问题——如果全局变量可以被多个执行线程访问，同步是必要的（而且经常被忽略）。当动态链接模块与全局变量时，即使在几十个不同上下文中测试的两个独立模块是安全的，组合系统也可能不是线程安全的。
*   命名空间污染——全局名称随处可见。当您认为您正在使用本地（通过拼写错误或忘记声明本地）时，您可能会在不知不觉中最终使用全局，反之亦然。此外，如果您必须将具有相同全局变量名称的模块链接在一起，如果幸运的话，您会遇到链接错误。如果你不走运，链接器将简单地将所有使用相同名称的对象视为同一个对象。
*   内存分配问题——某些环境的内存分配方案使得全局变量的分配变得棘手。在“构造函数”具有分配以外的副作用的语言中尤其如此（因为在这种情况下，您可以表达两个全局变量相互依赖的不安全情况）。此外，当动态链接模块时，可能不清楚不同的库是否有自己的全局实例或全局是否共享。
*   测试和限制 - 使用全局变量的源代码更难测试，因为在运行之间无法轻松设置“干净”的环境。更一般地，利用未明确提供给该源的任何类型的全局服务（例如读取和写入文件或数据库）的源由于相同的原因而难以测试。对于通信系统，测试系统不变量的能力可能需要同时运行一个系统的多个“副本”，这会受到任何共享服务（包括全局内存）的使用的极大阻碍，这些共享服务并未作为测试的一部分提供共享.

# sql-server - 从 VBA 中的 Excel 连接到 SQL Server 的问题

> ID：12367911
> 
> 赞同：1
> 
> 时间：2012-09-11T10:41:59.273
> 
> 标签：sql-server, sql-server-2008

我需要能够使用用户名/密码从 Excel 连接到 SQL Server。我已经指定：

```
'Declare variables'
    Set objMyConn = New ADODB.Connection
    Set objMyRecordset = New ADODB.Recordset
    Dim strSQL As String

'Open Connection'
    objMyConn.ConnectionString = "Driver=SQL Server;Server=SERVER\SERVER;Database=we_ci_db; Uid = genericReadWrite; Pwd=XYZ;"
    objMyConn.Open

'Set and Excecute SQL Command'
    strSQL = "select TOP 1 * from tblUsers WHERE alias='" & "username" & "'"

    'Debug.Print strSQL
'Open Recordset'
    Set objMyRecordset.ActiveConnection = objMyConn
    objMyRecordset.Open strSQL

'Copy Data to Excel'
    Sheets("Sheet1").Range("A4").CopyFromRecordset (objMyRecordset) 
```

该代码将一些基本细节复制到“系统”选项卡，更新一些标志“UserID，SystemAccess”等，然后删除密码哈希以确保安全。

现在我认为它到目前为止工作正常，但它显然已经退回到 Windows 身份验证（我和我的团队被明确列为 SQL Server 上的用户。

但是当我得到一个没有明确添加为服务器的 NT 登录的人时，它就不起作用了。请注意，服务器是为混合身份验证设置的。

在 Excel 中，我们得到`-2147467259 - [Microsoft][ODBC SQL Server Driver][SQL Server]Cannot open database "we_ci_db" requested by the login. The login failed.`

服务器日志说： `Login failed for user 'DOMAIN\user'. Reason: Failed to open the explicitly specified database. [CLIENT: xx.xx.xx.xx]`

我将不胜感激任何帮助，因为它开始困扰我。我不知道这是 SQL Server 问题还是连接字符串问题，尽管连接字符串至少部分有效，即使服务器忽略了用户名。

# c# - 在 Linq 中添加 arraylist 字符串

> ID：12367912
> 
> 赞同：0
> 
> 时间：2012-09-11T10:42:00.073
> 
> 标签：c#, linq, for-loop

我需要在 linq 中添加项目的数组列表。下面是我的示例代码。

```
string[] _str = ("1.21,2.02,3.14,4.951,5.156").ToString().Split(',');
double Sum = 0.0;
for (int i = 0; i < _str.Length; i++)
{
  if (_str[i].ToString() != ",")
     Sum = Sum + Convert.ToDouble(_str[i]);
} 
```

我在 for 循环中完成了上面的代码，以获取数组列表中所有项目的总和。我需要在 linq 中转换相同的操作。请任何人帮我解决这个问题，因为我是 linq 的新手。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:45:48.803

使用[`Sum`](http://msdn.microsoft.com/en-us/library/bb534734.aspx)方法：

```
string[] _str = "1.21,2.02,3.14,4.951,5.156".Split(',');
var result = _str.Sum(e => Double.Parse(e)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:55:52.787

```
string[] _str =  {"1.21","2.02","3.14","4.951","5.156"};
double Sum = 0.0;
for (int i = 0; i < _str.Length; i++)
{
    double.TryParse(_str[i],out val)
} 
```

但是如果你这样做是为了学习 linq

```
string[] _str = {"1.21","2.02","3.14","4.951","5.156"};
_str.Sum(x => 
    {  
       double val ; 
       if(double.TryParse(x, out val)){
         return val;
       }
       return 0.0;
    }); 
```

如果您确定字符串将始终包含有效的数字字符串。然后你可以使用 double.Parse(x)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:46:27.990

你可以试试

```
string[] _str = "1.21,2.02,3.14,4.951,5.156".Split(',');
double Sum = _str.Sum(x=>Convert.ToDouble(x)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:51:16.857

尝试...

```
var _str = _str = ("1.21,2.02,3.14,4.951,5.156").ToString().Split(',');
var _sum = Array.ConvertAll<String, Double>(_str, Double.Parse).Sum(); 
```

另一个班轮，带有方法链接示例...

```
var _sum = "1.21,2.02,3.14,4.951,5.156".Split(',').Sum(x => Double.Parse(x)); 
```

# javascript - 解释正则表达式 - '/_m_/_r_'

> ID：12367921
> 
> 赞同：-4
> 
> 时间：2012-09-11T10:42:40.770
> 
> 标签：javascript, regex

正则表达式匹配下面是什么？'_' 是通配符和 '/' 是 or 语句吗？

我认为它匹配任何“m”字符或任何“r”字符。

```
'/_m_/_r_' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:53:17.497

我只是假设这是一个这样使用的字符串文字：

```
var r = new RegExp('/_m_/_r_'); 
```

在这种情况下，表达式与文字字符串匹配`/_m_/_r_`。表达式中没有具有特殊含义的标记。

# streaming - 如何从 echonest 流式传输音乐？

> ID：12367922
> 
> 赞同：1
> 
> 时间：2012-09-11T10:42:45.097
> 
> 标签：streaming, enyo

现在我正在使用`enyo.js`. 我想从`echonest`. 现在我可以获取歌曲的 ID。

我想播放音乐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:11:56.190

很可能您可以为此使用 HTML 5 标记。您需要更全面地调查他们的 API，以确定在获得 ID 后是否需要发出另一个请求，或者如果 ID 是音频文件的 URL，只需创建一个标签并将其设置为源即可。

# wpf - wpf中的mipmapping

> ID：12367928
> 
> 赞同：7
> 
> 时间：2012-09-11T10:43:04.297
> 
> 标签：wpf, rendering, mipmaps

我是'wpf'的新手，我遇到了以下问题：在我的项目中，我尝试使用小分辨率.png作为模型的纹理。当我在 Blender（我在其中构建立方体）中禁用 mipmapping 时，结果正是我想要的：

[没有 mipmap](http://eridan.ucoz.ru/images/blend.png)

但在 wpf 项目中，模糊效果永远不会关闭：

[wpf结果](http://eridan.ucoz.ru/images/wpf.png)

这是我的代码：

```
<Window x:Class="GCS.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="504" Width="525" ShowInTaskbar="True">
<Grid>
        <Viewport3D Name="myViewport"
            xmlns="http://schemas.microsoft.com/netfx/2007/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
            <Viewport3D.Resources>
                <MaterialGroup x:Key="Material">
                    <DiffuseMaterial>
                        <DiffuseMaterial.Brush>
                            <ImageBrush RenderOptions.BitmapScalingMode="NearestNeighbor" ViewportUnits="Absolute" ImageSource="char.png"/>
                        </DiffuseMaterial.Brush>
                    </DiffuseMaterial>
                </MaterialGroup>
            </Viewport3D.Resources>
            <Viewport3D.Camera>
                <PerspectiveCamera Position="7.8,-11,-0.8" NearPlaneDistance="1" FarPlaneDistance="50" LookDirection="-0.4,0.9,-0.3" UpDirection="0,0,1" FieldOfView="15"/>
            </Viewport3D.Camera>
            <Viewport3D.Children>
                <ModelVisual3D>
                    <ModelVisual3D.Content>
                        <Model3DGroup>
                            <GeometryModel3D Material="{StaticResource Material}">
                                <GeometryModel3D.Transform>
                                    <Transform3DGroup>
                                        <TranslateTransform3D OffsetZ="0" OffsetX="0" OffsetY="-7"/>
                                        <ScaleTransform3D ScaleZ="1" ScaleY="1" ScaleX="1"/>
                                        <RotateTransform3D>
                                            <RotateTransform3D.Rotation>
                                                <AxisAngleRotation3D Axis="1,0,0" Angle="92"/>
                                            </RotateTransform3D.Rotation>
                                        </RotateTransform3D>
                                        <TranslateTransform3D OffsetZ="0" OffsetX="0" OffsetY="7"/>
                                        <TranslateTransform3D OffsetZ="-6.622" OffsetX="0" OffsetY="-0.023"/>
                                    </Transform3DGroup>
                                </GeometryModel3D.Transform>
                                <GeometryModel3D.Geometry>
                                    <MeshGeometry3D
                                        Normals="-1,0,0 -1,0,0 -1,0,0 -1,0,0 0,0,-1 0,0,-1 0,0,-1 0,0,-1 1,0,0 1,0,0 1,0,0 1,0,0 0,0,1 0,0,1 0,0,1 0,0,1 0,-1,0 0,-1,0 0,-1,0 0,-1,0 0,1,0 0,1,0 0,1,0 0,1,0"
                                        Positions="-1,6,-1 -1,6,1 -1,8,1 -1,8,-1 -1,8,-1 1,8,-1 1,6,-1 -1,6,-1 1,8,-1 1,8,1 1,6,1 1,6,-1 -1,6,1 1,6,1 1,8,1 -1,8,1 -1,6,1 -1,6,-1 1,6,-1 1,6,1 1,8,1 1,8,-1 -1,8,-1 -1,8,1"
                                        TextureCoordinates="0,0.5 0.125,0.5 0.125,0.25 0,0.25 0.5,0.25 0.375,0.25 0.375,0.5 0.5,0.5 0.375,0.25 0.25,0.25 0.25,0.5 0.375,0.5 0.125,0.5 0.25,0.5 0.25,0.25 0.125,0.25 0.375,0.25 0.375,0 0.25,0 0.25,0.25 0.25,0.25 0.25,0 0.125,0 0.125,0.25"
                                        TriangleIndices="0 1 2 0 2 3 4 5 6 4 6 7 8 9 10 8 10 11 12 13 14 12 14 15 16 17 18 16 18 19 20 21 22 20 22 23"/>
                                </GeometryModel3D.Geometry>
                            </GeometryModel3D>
                        </Model3DGroup>
                    </ModelVisual3D.Content>
                </ModelVisual3D>
                <ModelVisual3D>
                    <ModelVisual3D.Content>
                        <AmbientLight Color="#ffffff"/>
                    </ModelVisual3D.Content>
                </ModelVisual3D>
            </Viewport3D.Children>
        </Viewport3D>
</Grid> 
```

我在网上做了很多搜索，尝试了很多方法：强制软件渲染，使用DrawingBrush而不是ImageBrush，但结果是一样的。有没有办法克服这种渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T08:48:44.830

使用 VisualBrush 尝试以下方法 - 它会产生清晰的混叠纹理：

![截屏](../Images/f431a0e7cb8bd749396efcf48575c99c.png)

```
 <DiffuseMaterial x:Key="Material">
            <DiffuseMaterial.Brush>
                <VisualBrush RenderOptions.CachingHint="Cache">
                    <VisualBrush.Visual>
                        <Image Source="char.png" RenderOptions.BitmapScalingMode="NearestNeighbor" />
                    </VisualBrush.Visual>
                </VisualBrush>
            </DiffuseMaterial.Brush>
        </DiffuseMaterial>
    </Grid.Resources>

    <Viewport3D Name="myViewport">
        <Viewport3D.Camera>
            <PerspectiveCamera Position="0 0.5 1.5" LookDirection="0 0 -1"
                           UpDirection="0 1 0" FieldOfView="120" />
        </Viewport3D.Camera>
        <Viewport3D.Children>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <GeometryModel3D Material="{StaticResource Material}">

                        <GeometryModel3D.Geometry>
                            <MeshGeometry3D
                         Positions="0 0 0, 0 1 0, 1 0 0, 1 1 0"
                         TriangleIndices="0 2 3, 0 3 1"
                         TextureCoordinates="0 1, 0 0, 1 1, 1 0" />
                        </GeometryModel3D.Geometry>

                    </GeometryModel3D>
                </ModelVisual3D.Content>
            </ModelVisual3D>

            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <AmbientLight Color="#ffffff"/>
                </ModelVisual3D.Content>
            </ModelVisual3D>
        </Viewport3D.Children>
    </Viewport3D>
</Grid> 
```

# android - 在真机上运行Android+Opencv+NDK App

> ID：12367929
> 
> 赞同：5
> 
> 时间：2012-09-11T10:43:04.427
> 
> 标签：android, opencv, android-ndk

我遵循了人脸检测示例方法，并成功地在模拟器上编写了一个对象检测应用程序。

现在，当我尝试在真实设备上运行它时，单击检测按钮的那一刻，它崩溃了。Logcat 说`"OpenCv/StaticHelp >> First attempt to load libs failed"`。我已经在我的设备上安装了 OpenCVManager，甚至运行了一些示例，例如拼图甚至面部检测。

我的问题是：它可能是 Android.mk 上的 OpenCV 包含的硬编码，例如

```
include /home/xxx/Desktop/OpenCV-2.4.2-android-sdk/sdk/native/jni/OpenCV.mk 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:01:22.620

您忘记将本机相机库放入项目中的 libs 文件夹中。将 OPENCV_CAMERA_MODULES:=on 和 OPENCV_INSTALL_MODULES:=on 添加到您的 Android.mk 文件中以获取更多信息，请查看[opencv4andriod 网站上的教程](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#dev-with-ocv-on-android)

# ios - 在 AIR for iOS 上启用 iCloud

> ID：12367931
> 
> 赞同：2
> 
> 时间：2012-09-11T10:43:08.093
> 
> 标签：ios, air

我正在 Adob​​e AIR（flash）上开发 iOS 应用程序，我想使用 iCloud KeyValue 函数（使用 ANE）。

如何在 AIR 上启用 iCloud 功能？

我假设 app.xml 是如何完成的，但不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:52:39.987

我解决了这个问题。

```
<Entitlements>
<![CDATA[
<key>com.apple.developer.ubiquity-container-identifiers</key>
<array>
    <string>$(TeamIdentifierPrefix).com.hoge.hugaApp</string>
</array>
<key>com.apple.developer.ubiquity-kvstore-identifier</key>
<string>$(TeamIdentifierPrefix).com.hoge.hugaApp</string>
<key>keychain-access-groups</key>
<array>
    <string>$(AppIdentifierPrefix).com.hoge.hugaApp</string>
</array>
]]> 
```

我从 XCode 项目的 hugaApp.entitlement 中这样写，它是自动生成的文件。然后我将 $(TeamIdentifierPrefix) 和 $(AppIdentifierPrefix) 替换为实际值。

谢谢你回复我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:35:58.220

Adobe AIR 本身不支持 iCloud（iOS SDK 本身支持 iCloud）。

为了能够使用 iCloud，您需要使用使用 xCode 和 ObjC 的 Native 扩展。我可能是错的，但我找不到任何现有的 iCloud AIR 原生扩展，只是在谷歌检查。

无论如何，您可以查看以下链接：

[http://extensionsforair.com/native-extensions/ios/](http://extensionsforair.com/native-extensions/ios/)

[http://www.adobe.com/devnet/air/native-extensions-for-air.html](http://www.adobe.com/devnet/air/native-extensions-for-air.html)

# asp.net-mvc - 从 url 中没有“区域”的区域访问静态内容

> ID：12367938
> 
> 赞同：0
> 
> 时间：2012-09-11T10:43:27.057
> 
> 标签：asp.net-mvc, url, asp.net-mvc-areas

我目前正在开发一个 Web 应用程序，该应用程序在根级别有一个小网页，在区域中有几个（更复杂的）网页。所有基于区域的网页都有相互独立的静态内容，因此每个网页都有自己的内容文件夹。不幸的是，静态内容的结果 url 包含字符串“Areas”，例如

```
http://myappurl/Areas/MyArea1/Images/myFile.png 
```

由于区域是技术实现细节，用户不应该知道（或关心）任何内容，因此它们不属于 url。我该如何解决？我不想为每个区域创建另一个根级目录（会令人困惑且容易出错），但我真的不明白如何修改路由以允许这样做。帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:35:50.287

默认情况下，ASP.NET 不处理对 .png 文件的请求。

Scott Hanselman 有一篇文章解释了如何更改此功能。链接：[回归基础：动态图像生成、ASP.NET 控制器、路由、IHttpHandlers 和 runAllManagedModulesForAllRequests](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)。

如果您按照那里的说明进行操作，那么您将能够控制对所有 png 文件的请求的路由方式。因此，您可以像为任何其他 View/JSON/XML 一样为嵌套在该区域内的文件定义路由。然后诀窍是设置适当的内容类型并将图像呈现为文件流。

# html - 如何用渐变背景遮罩图像？

> ID：12367940
> 
> 赞同：3
> 
> 时间：2012-09-11T10:43:40.027
> 
> 标签：html, png, css

我有图像，我想删除每个图像的 2 个角度。删除的部分应该是透明的，这是我无法修复的部分。这里有 2 张图片显示了我想要做的事情：

这是一个空图像。白色是我想要展示的部分。蓝色部分显示文档背景渐变颜色。

![基本形象](../Images/900236369dc136d132b7c8c7d33f806b.png)

这是我最后应该得到的。蓝色部分再次从文档渐变颜色中透明。

![它应该是什么样子](../Images/a22930bec699222764ee149f40949b39.png)

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:52:48.933

在 webkit 浏览器中，您可以使用`mask-box-image`. 将您的图像放入具有图像掩码类的 div 中，然后`mask-box-image`与透明 png 一起使用

```
.image-mask {
  -webkit-mask-box-image: url(your_mask.png);
} 
```

在总是出色的 CSS Tricks 网站上有一篇很棒的文章 - [http://css-tricks.com/webkit-image-wipes/](http://css-tricks.com/webkit-image-wipes/)

虽然我很害怕，但它只是 webkit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:23:28.540

有些人可能不喜欢我的非代码答案，但您可以在图像本身中做到这一点？请不要因为我的建议而讨厌我，但有时代码并不能解决所有问题。

1.  将图像保存为 PNG。
2.  如果您在 Photoshop 中，请确保您正在处理的图层不是“背景”图层。
3.  擦除/使用侯爵工具删除您想要透明的图像部分。您可以模糊侯爵工具的边缘以使其“淡化”。
4.  根据您在 Photoshop 或其他编辑程序中的设置，“透明”部分应为灰色和白色方格。
5.  将图像另存为 PNG 并使用它代替编码蒙版。

当然，如果您正在动态加载图像或出于其他原因依赖代码来屏蔽图像，这将不起作用，但它应该可以工作。早期版本的 IE 对 PNG 有一些问题，但在我当前的项目中，我没有遇到过 IE9、IE8 或 IE7 的问题。

# android - 突出显示 AutoCompleteTextView 下拉列表中的搜索文本

> ID：12367941
> 
> 赞同：3
> 
> 时间：2012-09-11T10:43:41.660
> 
> 标签：android, autocompletetextview

我已经`AutoCompleteTextView`在我的应用程序中实现了搜索字段。

我想突出显示在`AutoCompleteTextView`（搜索文本字段）中输入的文本，以在下拉列表中突出显示。

例如，如果用户开始输入`'jo'`下拉将有以下

```
joe smith
Joseph ahraham
billy Joseph
... 
```

我想`'jo'`用蓝色突出显示所有三个名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T12:02:14.690

如果这个问题仍然相关：您应该能够通过将`<b>`-tags 和/或`<span>`具有颜色定义的 -tags 插入到适配器数据中应突出显示的单词周围来实现这一点。

# c# - Roslyn 将文档添加到项目

> ID：12367945
> 
> 赞同：8
> 
> 时间：2012-09-11T10:43:59.380
> 
> 标签：c#, roslyn

我正在运行 roslyn ctp2

我正在尝试将新的 html 文件添加到项目中

```
IWorkspace workspace = Workspace.LoadSolution("MySolution.sln");
var originalSolution = workspace.CurrentSolution;
ISolution newSolution = originalSolution;
newSolution.GetProject(newSolution.ProjectIds.First())
                        .AddDocument("index.html", "<html></html>");
workspace.ApplyChanges(originalSolution, newSolution); 
```

这导致不写入任何更改。我正在尝试让新的 html 文件出现在 VS 中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:31:47.030

这里有两个问题：

1.  Roslyn `ISolution`、`IProject`和`IDocument`对象是不可变的，因此为了查看更改，您需要`ISolution`使用更改创建一个新对象，然后调用`Workspace.ApplyChanges()`.
2.  在 Roslyn 中，`IDocument`仅为传递给编译器的文件创建对象。另一种说法是`Compile` `ItemGroup`项目文件中包含的内容。对于其他文件（包括 html 文件），您应该使用普通的 Visual Studio 界面，例如`IVsSolution`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T12:32:36.467

工作区是不可变的。这意味着任何听起来像是要*修改*工作区的方法都将返回一个应用了更改的*新*实例。

所以你想要这样的东西：

```
IWorkspace workspace = Workspace.LoadSolution("MySolution.sln");
var originalSolution = workspace.CurrentSolution;
var project = originalSolution.GetProject(originalSolution.ProjectIds.First());
IDocument doc = project.AddDocument("index.html", "<html></html>");
workspace.ApplyChanges(originalSolution, doc.Project.Solution); 
```

但是，我目前不在安装 Roslyn 的机器附近，所以我不能保证 100%。

# spring-security - 带有 JDBCSessionManager 和 Spring Web Security 的 Jetty

> ID：12367947
> 
> 赞同：2
> 
> 时间：2012-09-11T10:44:01.317
> 
> 标签：spring-security, jetty, httpsession

在我的应用程序中，我有一个嵌入式码头服务器（版本 8.1.2），它运行一个使用 Spring Web 安全性的 Web 应用程序。码头服务器配置为使用`JDBCSessionManager`

spring 使用的安全过滤器之一是 的子类`AbstractAuthenticationProcessingFilter`，在其中，它具有 a `SessionAuthenticationStrategy`，默认情况下是 a `SessionFixationProtectionStrategy`。此保护策略创建一个新会话，作为原始会话的副本，并使旧会话无效。

现在，当我尝试登录 Web 应用程序时，我看到创建了一个新会话，但添加到新会话的身份验证属性没有写回数据库。此外，我看到旧会话被写入具有新属性的数据库，即使它已失效。

最后，当一个新的 http 请求作为新会话的一部分到达时，由于上述原因，它没有通过身份验证。

经过一番调查，我发现在旧版本的jetty（我尝试了7.1.4）中不会发生这种行为，并且我看到新的会话数据已写入数据库。

我当然可以通过以下任何方式解决这个问题：

*   使用旧版本的码头
*   禁用会话固定保护策略
*   使用默认会话管理器而不是`JDBCSessionManager`

但假设上述选项都对我无效，我想知道是否有任何解决方案可以解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:50:55.770

已在 jetty 8 的较新版本中解决，至少 8.1.6 :)

# eclipse - 如何加快 SpringSource 工具套件上的 spring 验证？

> ID：12367949
> 
> 赞同：0
> 
> 时间：2012-09-11T10:44:18.603
> 
> 标签：eclipse, sts-springsourcetoolsuite

我正在使用 3.0.0 版的 STS，每当我打开大量项目或进行构建时，它都会发出以下消息：

```
validating element <element here> with rule '@required property rule' 
```

或类似的消息

每个 bean 大约需要两到三秒，并且正在遍历我的层次结构中的每个类文件。对于较大的项目，这可能需要大约 45 分钟。

是否有任何配置设置可以帮助解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:28:35.667

可能是内存不足导致问题。我会尝试将您的 Xmx 提高到 1024m（默认为 768m）。您可以在 STS.ini 中更改此设置。它与 STS 可执行文件位于同一位置。

# android - Android：活动失去链接到 ViewPager 片段

> ID：12367950
> 
> 赞同：1
> 
> 时间：2012-09-11T10:44:20.380
> 
> 标签：android, android-viewpager, fragment

我在使用 FragmentNotification 接口向 ViewPager 中的片段触发命令的 Activity 时遇到问题。一切正常，直到应用程序长时间处于后台或方向发生变化。此时，Activity 似乎与 Fragment 失去了联系。

我的活动代码：

```
public class MyActivity extends FragmentActivity implements MyFragment3.FragmentNotification   {

   SectionsPagerAdapter mSectionsPagerAdapter;
   ViewPager mViewPager;

   MyFragment1 fragOne = new MyFragment1();
   MyFragment2 fragTwo = new MyFragment2();
   MyFragment3 fragThree = new MyFragment3();

   boolean toggle = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

 ...

 setContentView(R.layout.activity_main);
         // Create the adapter that will return a fragment for each of the three primary sections
         // of the app.
   mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

   // Set up the ViewPager with the sections adapter.
   mViewPager = (ViewPager) findViewById(R.id.pager);
   mViewPager.setOffscreenPageLimit(2);
   mViewPager.setAdapter(mSectionsPagerAdapter);
   mViewPager.setClickable(true);

   mViewPager.setCurrentItem(0);
    }
}

  @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK)) {

            if (fragThree != null) {

                fragThree.doSomething();
                toggle = false;
                return false;
            } else {

            }

        }
       return super.onKeyDown(keyCode, event);
    }

   public class SectionsPagerAdapter extends FragmentPagerAdapter  {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment;
        if(i==0){

            fragment   = fragOne;

        }else if(i==1){
             fragment =  fragTwo;
        }else{
            fragment   =  fragThree;

        }
        return fragment;
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();

        }
        return null;
    }

}

//Receive an event notification from a fragment 
// @Override 
 public void fragmentAction(int actionType) { 

                 if (actionType == MyFragment3.TOGGLE_ACT) { 
                                             toggle = true;
                 }
 }
} 
```

我的片段代码：

```
 public class MyFragment3 extends Fragment {

         View mView;

      @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    ...
      mView = ....

    return rootView;
}

@Override
public void onSaveInstanceState(Bundle outState) {

    super.onSaveInstanceState(outState);
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        mListener = (FragmentNotification) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString() + " must implement OnArticleSelectedListener");
    }
}

  public void doSomething(){

     mView.setVisibility(View.GONE);
     ...
 }

  public interface FragmentNotification {
    public void fragmentAction(int actionType);

  }

} 
```

如前所述，在某些状态发生变化之前一切正常，然后看起来活动失去了对 viewpager 中存在的片段的引用，即使在按下后退按钮之前它正在正确显示。

我相信我需要通过从我的 Fragment 的 onSaveInstanceState 提供一个包来恢复连接，但不知道如何开始。

任何帮助将不胜感激。

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:06:25.733

您在数据成员初始化程序 (!) 中盲目地创建三个片段的实例，即使这些片段已经存在。请记住，Android 会在配置更改时重新创建所有现有片段。因此，在配置更改时，这些新创建的片段都不会被使用，因为它们`ViewPager`将使用 Android 为其重新创建的片段。您可以在 in 的实现中看到这一点`instantiateItem()`（`FragmentPagerAdapter`源代码在您的 SDK 中）。

“当按下 BACK 时，我想用寻呼机中的第三个片段做一些特别的事情”的概念并不能`ViewPager`很好地支持所有这些。我会鼓励你找到一些其他的解决方案来解决你试图用这种逻辑解决的任何问题。

# c++ - 为什么 Symbian 无法获取用户的位置？

> ID：12367953
> 
> 赞同：3
> 
> 时间：2012-09-11T10:44:33.850
> 
> 标签：c++, qt, gps, symbian, qt-mobility

我有 Symbian/MeeGo 项目，它使用 qt-mobility 来获取用户的位置。问题是下面的代码在 Meego (Nokia N9) 上运行良好，而在 Symbian 上根本不起作用（在 C6-01 和 N8 上测试）。看起来 GPS 适配器启动良好，但无法接收任何位置信息。所以我们可以在系统时钟附近看到“卫星”图标，但没有接收到坐标。我在不同的条件下（建筑物内部/外部，不同的天气条件）进行了测试，结果始终相同。

这种行为的原因是什么？

我的代码：

.pro

```
<...>
CONFIG += mobility
MOBILITY += location
symbian:TARGET.CAPABILITY += NetworkServices Location
<...> 
```

。H

```
<...>
#include <QGeoPositionInfoSource>
#include <QGeoPositionInfo>
#include <QDebug>
<...>
QTM_USE_NAMESPACE

private:
   QGeoPositionInfoSource* mManager;

private slots:
   void newPos(QGeoPositionInfo);
<...> 
```

.cpp

```
<...>
 mManager = QGeoPositionInfoSource::createDefaultSource(this);
 mManager->setUpdateInterval(1000);
 mManager->setPreferredPositioningMethods(QGeoPositionInfoSource::AllPositioningMethods);

 connect(mManager, SIGNAL(positionUpdated(QGeoPositionInfo)),
            this, SLOT(newPosition(QGeoPositionInfo)));
<...>
void QmlContext::newPosition(QGeoPositionInfo pos){
    qDebug() << pos;
}
<...> 
```

# c# - 转换为 Excel 时输出颜色不同

> ID：12367958
> 
> 赞同：0
> 
> 时间：2012-09-11T10:44:54.130
> 
> 标签：c#, asp.net

当我想使用 C# 转换为 Excel 时，我遇到了颜色问题。我使用参考：

```
 using Microsoft.Office.Interop.Excel; 
```

使用代码：

```
 private Microsoft.Office.Interop.Excel.Range workSheet_range = null;
 workSheet_range.Interior.Color = GetColorValue(be.InteriorColor);

 private int GetColorValue(string interiorColor)
    {
        switch (interiorColor)
        {
            case "BLUE":
                return System.Drawing.Color.LightSkyBlue.ToArgb();
            case "YELLOW":
                return System.Drawing.Color.LightYellow.ToArgb();
            default :
                return System.Drawing.Color.White.ToArgb();
        }
    } 
```

我的问题是，源代码工作正常（没有错误）。但是颜色输出是完全错误的。例如，当我将内部颜色设置为*Yellow*时，输出可能是*Light Chocolate*。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:11:04.673

尝试这个：

```
workSheet_range.Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Red); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:55:40.203

像这样试试

**System.Drawing.ColorTranslator.FromHtml("#FFFF00");**

这里#FFFF00 是黄色的十六进制颜色代码。

# java - 使用反射调用静态方法返回值

> ID：12367961
> 
> 赞同：2
> 
> 时间：2012-09-11T10:44:59.123
> 
> 标签：java, reflection

> **可能重复：**
> [如何使用反射（Java）调用私有静态方法？](https://stackoverflow.com/questions/4770425/how-do-i-invoke-a-private-static-method-using-reflection-java)

所以有一个名为“getInstance”的方法，它只返回某个类的实例。这是一个没有参数的静态方法。

我如何调用该方法并获取类的返回值（实例）？我尝试使用的每种方法都要求我在看起来的参数中有一个类的实例。

例如，我尝试使用

```
Method method = classLoader.loadClass("testClass").getMethod("getInstance", null);
            Object object = method.invoke(null, null); 
```

但我总是在这一行得到一个空指针异常，

```
Object object = method.invoke(null, null); 
```

我假设我得到了它，因为它要求的对象是空的。

谢谢你的帮助。

编辑：方法不为空。我正在做一个`System.out.println(method == null);`它打印出来的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:56:34.967

您不希望`null`作为参数或参数列表。相反，你可以做

```
Method method = classLoader.loadClass("testClass").getMethod("getInstance", new Class[0]);
Object object = method.invoke(null, new Object[0]); 
```

或以下，因为它们是可变参数方法。

```
Method method = classLoader.loadClass("testClass").getMethod("getInstance");
Object object = method.invoke(null);
// or works but is perhaps confusing.
Object object = method.invoke(null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:04:42.530

对我来说，以下两段代码都适用于静态方法并打印出返回值。

```
Method method = myClass.getMethod("getInstance", null);
Object object = method.invoke(null);
System.out.println("returned value: "+object); 
```

也

```
Method method = myClass.getMethod("getInstance", null);
Object object = method.invoke(null,null);
System.out.println("returned value: "+object); 
```

我认为这取决于您使用的 Java 版本（1.5 之前没有可变参数）。我正在使用 Java 运行时 v1.6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:48:45.360

那不是问题。 [如果底层方法是静态的，则忽略指定的 obj 参数。它可能为空。](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)

因此，方法本身似乎必须为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:56:36.033

我敢打赌，问题出在你的`getInstance`方法上。你能调试它或发布它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T10:58:19.193

与`getMethod("getInstance", null)`您说的是“获取名称为'getInstance'且没有参数的方法”。

当您键入时，`method.invoke(null, null)`您说的是“在对象'null'上调用此方法，**并将'null'作为第一个参数传递**”。

您应该删除最后一个`null`，只需键入：

```
Object object = method.invoke(null); 
```

# javascript - 为什么我在使用 jquery ui 自动完成时会得到额外的 html？

> ID：12367962
> 
> 赞同：1
> 
> 时间：2012-09-11T10:44:59.850
> 
> 标签：javascript, jquery, css, jquery-ui

我正在使用 jquery 在我的网页中生成以下 html。

```
 <input id="left_div_foretagname" class="userinfofont" type="text" name="left_div_foretagname" /> 
```

但是当我看到我的页面的 html 时，我得到以下 html：

```
 <input name="left_div_foretagname" class="userinfofont ui-autocomplete-input" id="left_div_foretagname" role="textbox" aria-haspopup="true" type="text" autocomplete="off" aria-autocomplete="list"/> 
```

我正在使用 jquery ui `autocomplete`。它不仅是这个元素。我的 html 中的很多元素都获得了这些额外的属性。我怎样才能避免属性来获得这个额外的属性。

指向 jquery ui 自动完成的链接如下：

```
 http://jqueryui.com/demos/autocomplete/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:56:28.143

这些属性是由 JQuery UI 添加的，因此您不必自己做，因此当您随着时间的推移升级库时，您不必更改任何内容。

它们是必需的，以便它在多个浏览器中工作。

您会注意到，如果您查看演示的源代码，添加了完全相同的额外属性：

```
<input id="tags" class="ui-autocomplete-input" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true"> 
```

即使基本来源只是：

```
<input id="tags"> 
```

# java - 刷新另一个类的 jframe

> ID：12367969
> 
> 赞同：1
> 
> 时间：2012-09-11T10:45:27.880
> 
> 标签：java, swing, refresh, jframe, repaint

如果发生其他类中的事件，我想刷新（重新绘制）一个 jframe，我使用下面的代码之类的东西，但有时这段代码不起作用：

```
static Container container;
public FrameConstractor()
{
    ...
    container = getContentPane();
    ...
}

public static void refreshMethod()
{
    container.repaint();
} 
```

当我的事件发生时我调用刷新方法；但是这段代码有时会为我重新绘制框架，有时并没有做任何事情！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T11:01:11.257

我认为您的问题可以通过将 refreshMethod 更改为：

```
public static void refreshMethod()
{
    container.invalidate();
    container.validate();
} 
```

# c# - 在 C# 中处理 XSD 文件

> ID：12367971
> 
> 赞同：1
> 
> 时间：2012-09-11T10:45:30.057
> 
> 标签：c#, xsd

在 C# 代码中查询 XSD 表的最佳方法是什么？
例如，我想从两个表中选择一些结果，并且标签中的这些结果是一个表单。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:48:56.047

您可以尝试查看 Linq XML

这个网站上有一个例子： [LINQ to read XML](https://stackoverflow.com/questions/670563/linq-to-read-xml)

# coldfusion - ColdFusion - 利用浏览器缓存

> ID：12367973
> 
> 赞同：0
> 
> 时间：2012-09-11T10:45:34.597
> 
> 标签：coldfusion, coldfusion-8

无论如何通过ColdFusion利用浏览器缓存还是必须在服务器级别（IIS）完成？

我正在寻找缓存图像、CSS 和 JS 文件。

我已经看到[利用浏览器缓存](https://stackoverflow.com/questions/1994223/leverage-browser-caching)- 如果在 CF 中不可能，我该如何将图像/CSS/JS 文件添加到该解决方案？

谢谢，

JJ

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:58:35.133

CF 通常不提供图像、CSS 和 JS 文件。您可能希望通过您的 Web 服务器来执行此操作。对于 CF 确实提供的文件，您可以使用 cfheader 在将来返回过期值。有关示例，请参阅[cfheader](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7aea.html)上的核心文档。

# php - 使用 Zend Framework 2 中的 FormElement ViewHelper 渲染自定义表单元素

> ID：12367974
> 
> 赞同：3
> 
> 时间：2012-09-11T10:45:43.187
> 
> 标签：php, zend-form, zend-framework2, viewhelper

我为一个特殊的、复杂的目的创建了一个新的表单元素类（带有用于打开“搜索向导”弹出窗口的附加按钮的文本输入字段）。

为了正确渲染这个元素，我还创建了一个表单视图助手。一切正常，到目前为止一切正常。

但是，如果我尝试使用 FormCollection 视图助手呈现表单，则该元素将呈现为基本输入元素。这是因为 FormCollection 助手所依赖的 FormElement 视图助手使用一系列硬编码的 if 子句将元素的类型映射到特定的表单视图助手。它无法映射我元素的类，因此回退到`FormInput`.

即（取自 Zend/Form/View/Helper/FormElement.php，第 41-49 行）：

```
 if ($element instanceof Element\Button) {
        $helper = $renderer->plugin('form_button');
        return $helper($element);
    }

    if ($element instanceof Element\Captcha) {
        $helper = $renderer->plugin('form_captcha');
        return $helper($element);
    }

    ...

    $helper = $renderer->plugin('form_input');
    return $helper($element); 
```

等等。

我在这里有点卡住了，因为这种架构并没有真正促进可扩展性。

我想到的唯一解决方案（除了手动渲染表单）是扩展 FormElement 视图助手类，从而创建我自己的 CustomFormElement 视图助手。但是，由于其复杂性，我已将自定义元素放入自己的模块中。所以我必须动态地编写这个 CustomFormElement 助手来添加来自任何模块的自定义元素。我不认为这是推荐的程序。

是否有另一种解决方案，或者甚至不推荐我的完整方法？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T08:17:08.153

我认为最简单的方法是在您的方法中扩展`Zend\Form\View\Helper\FormElement`、处理您的字段类型`render()`并将您的 FormElement 注册为您的应用程序/模块的默认 FormElement。假设您有要呈现的自定义 TestField：

```
namespace Application\Form\View\Helper; 

use \Zend\Form\ElementInterface;
use \Zend\Form\View\Helper\FormElement
use \Application\Form\Element\TestField;

class MyFormElement extends FormElement
{
    public function render(ElementInterface $element)
    {
        $renderer = $this->getView();
        if (!method_exists($renderer, 'plugin')) {
            // Bail early if renderer is not pluggable
            return '';
        }

        //your custom fields go here...
        if ($element instanceof TestField) {
            $helper = $renderer->plugin('\Application\Form\View\Helper\FormTestField');
            return $helper($element);
        }

        return parent::render($element);
    }
} 
```

在 Application/config/module.config.php 中：

```
'view_helpers' => array(
    'invokables' => array(
         'form_element' => 'Application\Form\View\Helper\MyFormElement',
    )
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-11T18:19:52.517

以下是我所做的，感觉是保持事物分开和整洁的正确水平。

鉴于：

*   一个新元素：MyModule\Form\MyElement，它扩展了 Zend\Form\Element
*   MyElement 的新视图助手类：MyModule\Form\View\Helper\FormMyElement 扩展 Zend\Form\View\Helper\AbstractHelper

以下是通过将以下内容添加到 module.config.php 来注册用于渲染元素的视图助手的方法：

```
'view_helpers' => array(
    'invokables'=> array(
        'formMyElement' => 'MyModule\Form\View\Helper\FormMyElement',
    ),
    'factories' => array(
        'formElement' => function($sm) {
            $helper = new \Zend\Form\View\Helper\FormElement();
            $helper->addClass('MyModule\Form\MyElement', 'formMyElement');
            return $helper;
        }
    ),
), 
```

关键是您为 FormElement 提供了一个新的工厂方法，它仍然创建相同的标准类（无需覆盖它），但还调用 addClass 方法将您的自定义帮助程序注册为自定义元素的正确帮助程序。如果您不想为您的助手创建短名称，您可以删除可调用部分并将 FQCN 放在 addClass 调用中，但我喜欢使用短名称。

这是迄今为止我发现的最好的方法。理想情况下，您不必接管 FormElement 的构造，只需修改传递给它的配置。这种方法的缺点是，如果您有多个定义自定义表单元素的模块，如果它们都尝试重新定义 FormElement 工厂，它们将会发生冲突。您不能以这种方式在多个模块中指定添加。因此，如果有人发现可以设置的更好的配置，只需传递给 FormElement::addClass() 方法，请告诉我。

顺便说一句，我发现这个页面没有解决等式的视图助手方面，但讨论了注册新的表单元素类以及如何覆盖内置类： http: [//framework.zend.com/manual/当前/en/modules/zend.form.advanced-use-of-forms.html](http://framework.zend.com/manual/current/en/modules/zend.form.advanced-use-of-forms.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-16T22:08:19.867

`FormElement`以任何方式获取视图助手并`addType`覆盖使用的视图助手。即在视图中，就在您呈现表单之前：

```
<?php $this->plugin('FormElement')->addType('text', 'formcustom'); ?> 
```

这将通过键名覆盖使用视图助手的`FormRow`助手中使用的视图助手：`FormCollection`

在你的配置中

```
'view_helpers' => array(
    'invokables' => array(
        'formcustom' => 'Application\Form\View\Helper\FormCustom',
    )
), 
```

当被问到这个问题时，该方法可能不存在。但现在是。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-20T17:48:36.170

----自定义表单元素-----

```
namespace App\Form\View\Helper;

use Zend\Form\View\Helper\FormElement as ZendFormElement;

/**
 * Description of FormElement
 */
class FormElement
        extends ZendFormElement
{

    public function addTypes(array $types)
    {
        foreach ($types as $type => $plugin) {
            $this->addType($type, $plugin);
        }
    }

} 
```

---- 应用模块.config.php--------------

```
//..........
    'view_helpers' => array(
        'invokables' => array(
            'formRTE' => 'App\Form\View\Helper\FormRTE',
        ),
        'factories' => array(
            'formElement' => function($sm) {
                $helper = new App\Form\View\Helper\FormElement();
                $helper->addTypes(array(
                    'rte' => 'formRTE',
                    ));
                return $helper;
            }
        ),
    ),
//......... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T20:35:22.467

似乎我们都遇到了 Zend 的表单问题。我认为它可以更好地与整个 MVC 结构集成。

我认为你的方法是合理的。我可能会想到做的是以下

1.  给你的元素一个名为 helper 的变量，就像在 ZF1 中一样。
2.  创建自定义表单元素渲染器，该渲染器还将检查表单元素的渲染器属性以决定如何渲染它。

您可以重新使用`ViewHelperProviderInterface`或创建自己的界面：

```
class CustomElement implements ViewHelperProviderInterface
{
     public function getViewHelperConfig()
     {
          return array('type' => '\My\View\Helper');
     }
} 
```

或者

```
class CustomElement implements FormHelperProviderInterface
{
     public function getFormHelperConfig()
     {
          return '\My\View\Helper';
          // or
          return new My\View\Helper();
     }
} 
```

然后在您的`FormElement`课堂上，您可以执行以下操作：

```
 if ('week' == $type) {
        $helper = $renderer->plugin('form_week');
        return $helper($element);
    }

    if ($element instanceof THEINTERFACE) {
          return $renderer->plugin($element->getFormHelperConfig());
    }

    $helper = $renderer->plugin('form_input');
    return $helper($element); 
```

无论如何，这可能是您的想法。

创建自己的界面可能会更好，因为第一个界面已经具有某种含义，并且可能会使某些人感到困惑。

除此之外，每个模块只需`helper_map`在模块配置中提供一个键，以便在使用 MVC 组件进行渲染期间使其视图助手可用。

# jquery - 使用图像 src 时如何进行平滑过渡

> ID：12367976
> 
> 赞同：0
> 
> 时间：2012-09-11T10:45:49.210
> 
> 标签：jquery, css, html, jquery-ui

我正在尝试使用 HTML 中的 img src 显示图像列表。但是下载时它的显示方式看起来不太好。我想知道是否有任何方法可以在下载完成之前进行转换。

TIA。

# delphi - 绘制空行

> ID：12367985
> 
> 赞同：2
> 
> 时间：2012-09-11T10:46:27.460
> 
> 标签：delphi, devexpress, tcxgrid

即使没有要显示的数据，如何在 cxGrid 中绘制行？

像这样

![像这个](../Images/9adbf4b704b6fdfcda0255b220d9a12d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:54:24.413

您可以在 DevExpress 网站上查看此线程：

[https://www.devexpress.com/Support/Center/Question/Details/Q421788](https://www.devexpress.com/Support/Center/Question/Details/Q421788)

# java - 为什么会引发“已删除的实体传递给坚持”-异常？

> ID：12367986
> 
> 赞同：1
> 
> 时间：2012-09-11T10:46:27.287
> 
> 标签：java, spring, spring-mvc

我试图创建简单的网络应用程序，其中将包含主题和评论。主题模型：

```
@Entity
@Table(name = "T_TOPIC")
public class Topic {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;

    @ManyToOne
    @JoinColumn(name="USER_ID")
    private User author;

    @Enumerated(EnumType.STRING)    
    private Tag topicTag;

    private String name;
    private String text;

    @OneToMany(fetch = FetchType.EAGER, mappedBy = "topic", cascade = CascadeType.ALL)
    private List<Comment> comments;

    // We shouldn't read whole collection to get this basic info
    private int commentsCount;
    private Date timeLastUpdated;

     /**
     * Removes comment from the Topic entity
     * @param comment
     */
     public void removeComment(Comment comment) {
            // updating topic
            timeLastUpdated = Utils.getCurrentTime();
            commentsCount--;
            comments.remove(comment);

     }
} 
```

评论型号：

```
@Entity
@Table(name = "T_COMMENT")
public class Comment
{
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;

    @ManyToOne
    @JoinColumn(name="TOPIC_ID")
    private Topic topic;

    @ManyToOne
    @JoinColumn(name="USER_ID")
    private User author;

    private String text;
    private Date creationDate;
} 
```

评论服务：

```
@Service
@Transactional
public class CommentService {

    @Autowired
    private CommentRepository commentRepository;

    public int saveComment(Comment comment){
         return commentRepository.save(comment).getId();

    }   

    public Comment findCommentByID(int id){
        return commentRepository.findOne(id);
    }

     /**
     * Deletes a comment
     * @param comment -- a comment to delete
     * @return id of a topic
     */
     public int deleteComment(Comment comment) {
         int result = comment.getTopic().getId();
         commentRepository.delete(comment);
         return result;
     }
} 
```

控制器的方法，即删除评论：

```
@RequestMapping(value = "/deleteComment/{commentId}", method = {RequestMethod.POST, RequestMethod.GET} )
public String deleteComment(@PathVariable int commentId, @ModelAttribute("comment")Comment comment, BindingResult result, Model model){
    Topic parentTopic;
    Comment deletedComment = commentService.findCommentByID(commentId);
    if (deletedComment != null) {
         // remove any relations
         parentTopic = deletedComment.getTopic();
         parentTopic.removeComment(deletedComment);
         // rempve the comment itself
         commentService.deleteComment(deletedComment);
        }
         //return "refresh:";
         return "home";
} 
```

已删除的实体传递给持久化：[com.epam.mvc3.model.Comment#]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:07:38.040

如下更改您的 deleteComment()，

```
public int deleteComment(int commentId) 
{

         Comment existingComment = findCommentByID(commentId);
         if(existingComment != null)
         {

             int result = existingComment .getTopic().getId();
             Topic existingTopic = existingComment .getTopic();
             existingTopic.remove(existingComment) 
             topicRepository.save(existingTopic);// spring 3.1
             topicRepository.merge(existingTopic);// spring 3.0
             return result;

          }

       return 0;

     } 
```

这里的重点是我们需要始终使用父 dao/repository 来处理子项。

因此，首先从主题中删除评论并使用 topicRepository 保存/合并主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:28:04.990

如果您随后将评论对象从存储库中删除，则您不必自己从 Topic 的集合中删除它，我认为这样做会导致您的合并删除评论，并且删除尝试删除并且已经已删除评论。

尝试更改它以从主题中删除评论，然后保存主题。或者在服务中创建一个方法来运行查询以计算给定主题的评论数，而无需读取整个集合。

尽管 Comment fetch 类型很急切，但为什么不直接使用`comments.size()`呢？

# jquery - 单击链接时，JQuery 在 div 中选择特定值

> ID：12367989
> 
> 赞同：-1
> 
> 时间：2012-09-11T10:46:29.763
> 
> 标签：jquery, jquery-selectors, parent-child

单击添加文件链接时，我需要从 row11 的第三个实例（lib_data [3]）中获取文本-代码如下：-

```
lb+="<div class='row_container2'>
     <div class='row11'>"+lib_data[2]+"</div>
     <div class='row11'>"+lib_data[1]+"</div>
     <div class='row11'>"+lib_data[3]+"</div>
     <div class='row11'>
     <a href='sym.php?doc_id="+lib_data[0]+"' class='view_file'>View File</a>
      | 
     <a href='javascript:void(0);' class='select_doc' data-file='"+lib_data[0]+"' data-file_name='"+lib_data[1]+"'>Add File</a>
    </div>
    <br style='clear:both'>";
lb+="</div>";
lb+="<div class='hidden_lib'>";
lb+="</div>"; 
```

到目前为止的jQuery： -

```
var document_desc=$(this).parent().parent().text(); 
```

不幸的是，这似乎从每个 div 中获取了所有文本。有没有办法指定所需的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:55:03.647

试试这个脚本：

```
$('.row_container2 .row11').eq(2).html(); 
```

这是一个示例[DEMO](http://jsfiddle.net/9jwmC/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:49:45.290

像这样试试

```
$("div .row11:eq(2)").text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:15:57.387

尝试这个。

```
$('.row_container2 .row11')[2] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:19:26.657

认为我已经解决了问题。我真的应该最初指定 div 将根据列表中的条目数循环。我的解决方案以及此处的帮助如下：-

```
$(this).closest('.row_container2').children('.row11:eq(2)').text(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:49:10.983

尝试这个，

```
$(this).parent().parent().eq(2).text(); 
```

您的方法的问题是，parent.parent 获得了 div row_container2 而不是您想要的子 div

# netbeans - 如何在 JavaFX 2 中为外部 URL 调用 getResource()

> ID：12367991
> 
> 赞同：0
> 
> 时间：2012-09-11T10:46:36.993
> 
> 标签：netbeans, javafx-2

我想加载一个存在于应用程序目录之外的图像，例如：

**好的**：`url = Person.class.getResource("user_info.png").toString();`

**高**：`url = Person.class.getResource("C:/images/user_info.png").toString();`

我的情况是：我有很多应用程序在运行时需要的图像（>1000），我想创建一个包含所有图像的目录，然后从应用程序访问它。

配置：Netbeans 7.2、JavaFX 2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:26:44.873

对于本地路径使用`file:/`前缀，对于 web 你可以只使用 URL：

```
 Image image = new Image("file:/c:/images/user_info.png"); 
```

# android - SD卡写入方法在AlarmReceiver中崩溃

> ID：12367992
> 
> 赞同：1
> 
> 时间：2012-09-11T10:46:40.993
> 
> 标签：android, alarmmanager, android-sdcard

我有一种方法尝试写入 AlarmReceiver 中 SD 卡上的文本文件。在我将它移到 AlarmReceiver 之前，该方法运行良好，但现在它在 Logcat 中因以下内容而崩溃：

```
09-11 10:36:44.395: D/AndroidRuntime(946): Shutting down VM
09-11 10:36:44.395: W/dalvikvm(946): threadid=1: thread exiting with uncaught exception         (group=0x409c01f8)
09-11 10:36:44.425: E/AndroidRuntime(946): FATAL EXCEPTION: main
09-11 10:36:44.425: E/AndroidRuntime(946): java.lang.RuntimeException: Unable to start receiver com.exercise.AndroidSYSinfo.AlarmReceiver: java.lang.NullPointerException
09-11 10:36:44.425: E/AndroidRuntime(946):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2126)
09-11 10:36:44.425: E/AndroidRuntime(946):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
09-11 10:36:44.425: E/AndroidRuntime(946):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
09-11 10:36:44.425: E/AndroidRuntime(946):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-11 10:36:44.425: E/AndroidRuntime(946):  at android.os.Looper.loop(Looper.java:137)
09-11 10:36:44.425: E/AndroidRuntime(946):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-11 10:36:44.425: E/AndroidRuntime(946):  at java.lang.reflect.Method.invokeNative(Native Method)
09-11 10:36:44.425: E/AndroidRuntime(946):  at java.lang.reflect.Method.invoke(Method.java:511)
09-11 10:36:44.425: E/AndroidRuntime(946):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-11 10:36:44.425: E/AndroidRuntime(946):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-11 10:36:44.425: E/AndroidRuntime(946):  at dalvik.system.NativeStart.main(Native Method)
09-11 10:36:44.425: E/AndroidRuntime(946): Caused by: java.lang.NullPointerException
09-11 10:36:44.425: E/AndroidRuntime(946):  at java.io.Writer.write(Writer.java:141)
09-11 10:36:44.425: E/AndroidRuntime(946):  at com.exercise.AndroidSYSinfo.AlarmReceiver.writeSD(AlarmReceiver.java:318)
09-11 10:36:44.425: E/AndroidRuntime(946):  at com.exercise.AndroidSYSinfo.AlarmReceiver.onReceive(AlarmReceiver.java:182)
09-11 10:36:44.425: E/AndroidRuntime(946):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2119) 
```

这是相关代码：

```
 public void writeSD(Context context) 
 {
      //Toast.makeText(context,"Saving sdcardstats.txt..." , Toast.LENGTH_SHORT).show();
         //  
         // Write SDCard stats to file
         //
         try
           {
           FileOutputStream fOut1 = context.openFileOutput("sdcardstats.txt", Context.MODE_PRIVATE);
           OutputStreamWriter osw1 = new OutputStreamWriter(fOut1);       
           osw1.write(string);
           osw1.flush();
           osw1.close();    

           }
           catch (IOException ioe)
           {

           ioe.printStackTrace();
           } //end catch

 }  // end of writeSD() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:38:45.023

> 字符串不为空

这是失败的源代码片段，带有行号：

```
140    public void write(String str) throws IOException {
141        write(str, 0, str.length());
142    } 
```

单个语句抛出 a的*唯一*`NullPointerException`方法是 if `str`is `null`。因此，虽然您可能认为`string`is not `null`，但您的堆栈跟踪表明并非如此。