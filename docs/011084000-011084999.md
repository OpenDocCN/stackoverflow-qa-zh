# StackOverflow 问答 11084000-11084999

# cakephp - Cakephp:How can i reference to a field in another table while i have the primary key

> ID：11084003
> 
> 赞同：0
> 
> 时间：2012-06-18T13:32:39.087
> 
> 标签：cakephp

I want to print out the `programme_name` in my `programsubjects` controller, but currently I have only the `programme_code` from the programmes controller.

How can I make my drop down list to bring the `programme_name`?

My code:

```
 $list[]=$this->ProgrammeChoice->Programme->ProgrammeRequirementsSubject->
  find('list',array('fields'=> array('programme_code'),
  'conditions'=>array(' ProgrammeRequirementsSubject.subject_code'=>$s_code,
  'compulsory'=>'true'),
   'group' =>array('programme_code'))); 
```

Now my `programme_code` is a primary key for the programme model, so how can I make it bring the `programme_name` while I have the programme_code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:45:27.300

您可以使用 displayField 模型属性来指定要在 ddl 上显示为文本的字段（默认情况下，主键将是值）。[食谱](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list)上有更多详细信息

# sql-server-2005 - ms sql 没有更新权限的表列表

> ID：11084006
> 
> 赞同：2
> 
> 时间：2012-06-18T13:32:51.043
> 
> 标签：sql-server-2005

我想获取给定数据库和给定模式中的表列表，这些表对给定用户没有更新权限。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:06:12.537

以下应该工作。

[http://consultingblogs.emc.com/jamiethomson/archive/2007/02/09/SQL-Server-2005_3A00_-View-all-permissions--_2800_2_2900_.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2007/02/09/SQL-Server-2005_3A00_-View-all-permissions--_2800_2_2900_.aspx)

基于此，我修改了一个脚本并将对象类型描述添加到显示用户、对象、权限类型、权限表的列表中

因此您可以添加 where caluse 过滤到 user_table 对象，按用户和权限类型进一步过滤

```
declare @type_desc varchar(100)
declare @user varchar(100)

WITH    perms_cte as

(

        select USER_NAME(p.grantee_principal_id) AS principal_name,

                dp.principal_id,

                dp.type_desc AS principal_type_desc,

                p.class_desc,

                OBJECT_NAME(p.major_id) AS object_name,

                o.type_desc,

                p.permission_name,

                p.state_desc AS permission_state_desc

        from    sys.database_permissions p

        inner   JOIN sys.database_principals dp

        on     p.grantee_principal_id = dp.principal_id

        inner join sys.objects o

        on o.object_id =p.major_id

)

--users

SELECT p.principal_name,  p.principal_type_desc, p.class_desc, p.[object_name], p.type_desc,p.permission_name, p.permission_state_desc, cast(NULL as sysname) as role_name
--select *
FROM    perms_cte p

WHERE   principal_type_desc <> 'DATABASE_ROLE'

UNION

--role members

SELECT rm.member_principal_name, rm.principal_type_desc, p.class_desc, p.object_name, p.type_desc,p.permission_name, p.permission_state_desc,rm.role_name

FROM    perms_cte p

right outer JOIN (

    select role_principal_id, dp.type_desc as principal_type_desc, member_principal_id,user_name(member_principal_id) as member_principal_name,user_name(role_principal_id) as role_name--,*

    from    sys.database_role_members rm

    INNER   JOIN sys.database_principals dp

    ON     rm.member_principal_id = dp.principal_id

) rm

ON     rm.role_principal_id = p.principal_id

order by 1 
```

另一个有用的链接 [http://www.mssqltips.com/sqlservertip/2132/auditing-sql-server-user-and-role-permissions-for-databases/](http://www.mssqltips.com/sqlservertip/2132/auditing-sql-server-user-and-role-permissions-for-databases/)

# r - 在 RI 中覆盖了一个函数，我该如何取回它？

> ID：11084008
> 
> 赞同：4
> 
> 时间：2012-06-18T13:32:55.297
> 
> 标签：r

我在 R 会话中做了一些愚蠢的事情。我写

> 打印 = 假

现在我不能打印东西了！

> 打印 [1] 错误

我该如何取回它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T13:34:27.090

`rm`不会删除基础对象，因此您可以运行：

```
rm(print) 
```

有趣的是，你*可以*打印一些东西：

```
> print <- FALSE
> print
[1] FALSE
> print("hi")
[1] "hi"
> rm(print)
> print("hi")
[1] "hi"
> print
function (x, ...) 
UseMethod("print")
<bytecode: 0x2a3a148>
<environment: namespace:base> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T13:43:00.830

具有讽刺意味的是，您没有覆盖它。您创建了一个名为“print”的数据对象，当您`print`在控制台输入时，eval-print 循环接管并返回它。如果您通过键入正确测试了 print 的行为，`print("something")`或者`print(42)`您会看到解释器仍然能够找到`print.default`基本命名空间中的函数。定义与现有函数同名的数据对象是不好的做法，不是因为它们在 R 解释器中覆盖，而是因为它们在用户的脑海中覆盖。解释器通过查看是否存在表示函数调用的左括号来确定您的意图（好吧，它决定了它将做什么）。如果字母 print 后跟“(”，则解释器查看参数的类并分派适当的 print 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T13:33:58.867

从命名空间取回

```
print = base::print 
```

# python - 在 Python 2.3 中按项目频率对列表列表进行排序

> ID：11084015
> 
> 赞同：1
> 
> 时间：2012-06-18T13:33:22.900
> 
> 标签：python, list, sorting

我有一个列表，其中包含此类项目的子列表。

```
mylist = [
['ITEM A', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'NO'],
['ITEM B', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'MAYBE'],
['ITEM C', 'YES', 'YES', 'YES', 'YES', 'NO', 'NO', 'MAYBE', 'NO', 'MAYBE']
] 
```

现在我想在这种情况下对子列表进行排序——每行（即子列表）中的项目越`'YES'`多`'MAYBE'`，它就越高。`'NO'`每行的 s越多，它在排序列表中的移动越低。

理想的结果是——</p>

```
mylist = [
['ITEM C', 'YES', 'YES', 'YES', 'YES', 'NO', 'NO', 'MAYBE', 'NO', 'MAYBE'],
['ITEM B', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'MAYBE'],
['ITEM A', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'NO']
]
#Item C has 4 'YES' and 2 'MAYBE'
#Item B has 3 'YES' and 1 'MAYBE'
#Item C has 3 'YES' 
```

可悲的是，我被困在**Python 2.3**上，需要找出最有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:38:13.000

要在 Python 2.3 或更低版本中按键排序，您*可以*使用`cmp`参数。但有时`key`样式排序更容易阅读；并且在任何情况下，它的工作量都会减少，因为`cmp`将被调用 O(n log n) 次，而`key`函数只会被调用 O(n) 次。

考虑到这一点，这是一种`key`在更高版本的 Python 中重现参数行为的方法。它使用 decorate-sort-undecorate 成语，也就是[Schwartzian Transform](http://en.wikipedia.org/wiki/Schwartzian_transform)。这不会像复制副本那样节省空间，但是对于大型列表，它可能会更节省时间。我之所以命名它`sorted`是因为它大致再现了`sorted`2.4 中添加的功能；检查python版本并有条件地导入它，这样你就不会破坏`sorted`新版本中的内置 - 或者只是重命名它。

```
def sorted(seq, key=lambda x: None, reverse=False):
    seq = [(key(x), i, x) for i, x in enumerate(seq)]
    seq.sort()
    if reverse:
        seq.reverse()
    return [x for k, i, x in seq] 
```

请注意，`enumerate`仅当您关心对具有相等键的不相等值进行稳定排序时才需要这样做；它会减慢头发的功能。对您的数据进行了测试：

```
>>> key=lambda x: (x.count('YES'), x.count('MAYBE'), x.count('NO'))
>>> my_sorted(mylist, key=key, reverse=True)
[['ITEM C', 'YES', 'YES', 'YES', 'YES', 'NO', 'NO', 'MAYBE', 'NO', 'MAYBE'], 
 ['ITEM B', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'MAYBE'], 
 ['ITEM A', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'NO']] 
```

您也可以考虑使用字典进行计数；这样，只需要一次通过。但是，经过充分优化，至少在我的机器上，`count`三遍仍然比一个 Python循环快。`for`因此，仅当您需要计算大量值时才使用它。我将把它留在这里以供后代使用：

```
def my_key(inner_list):
    counts = {'YES':0, 'MAYBE':0, 'NO':0}
    for i in inner_list:
        if i in counts:
            counts[i] += 1
    return (counts['YES'], counts['MAYBE'], counts['NO']) 
```

* * *

我做了一些测试；为长篇大论道歉。以下仅适用于好奇和好奇的人。

我的测试表明，在较小的列表中， decorate, sort, undecorate*已经*比使用内置的 sort +更快`cmp`。在更大的列表中，差异变得更加显着。定义：

```
def key_count(x):
    return (x.count('YES'), x.count('MAYBE'), x.count('NO'))

def key_dict(inner_list):
    counts = {'YES':0, 'MAYBE':0, 'NO':0}
    for i in inner_list:
        if i in counts:
            counts[i] += 1
    return (counts['YES'], counts['MAYBE'], counts['NO'])

def decorate_sort(seq, key=lambda x: None, reverse=False):
    seq = [(key(x), i, x) for i, x in enumerate(seq)]
    seq.sort()
    if reverse:
        seq.reverse()
    return [x for k, i, x in seq]

def builtin_sort(seq, key, reverse=False):
    seq.sort(lambda p, q: cmp(key(p), key(q)))
    if reverse:
        seq.reverse() 
```

测试：

```
>>> mylist = [
... ['ITEM A', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'NO'],
... ['ITEM B', 'YES', 'NO', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', 'MAYBE'],
... ['ITEM C', 'YES', 'YES', 'YES', 'YES', 'NO', 'NO', 'MAYBE', 'NO', 'MAYBE']
... ]
>>> %timeit decorate_sort(mylist, key=key_count, reverse=True)
100000 loops, best of 3: 5.03 us per loop
>>> %timeit builtin_sort(mylist, key=key_count, reverse=True)
100000 loops, best of 3: 5.28 us per loop 
```

内置版本已经很慢了！由于添加了to ，不太通用的版本`mylist.sort(lambda p, q: -cmp(key(p), key(q)))`对于一个简短的列表来说是更好的选择。没有它，速度会更快（在我之前的测试中每个循环 4.28 us）：`enumerate``decorate_sort``decorate_sort`

```
>>> %timeit mylist.sort(lambda p, q: -cmp(key_count(p), key_count(q)))
100000 loops, best of 3: 4.74 us per loop 
```

但是，在这种情况下使用`key_dict`是一个错误：

```
>>> %timeit decorate_sort(mylist, key=key_dict, reverse=True)
100000 loops, best of 3: 8.97 us per loop
>>> %timeit builtin_sort(mylist, key=key_dict, reverse=True)
100000 loops, best of 3: 11.4 us per loop 
```

在更大的列表上对其进行测试，结果基本相同：

```
>>> import random
>>> mylist = [[random.choice(('YES', 'MAYBE', 'NO')) for _ in range(1000)] 
              for _ in range(100)]
>>> %timeit decorate_sort(mylist, key=key_count, reverse=True)
100 loops, best of 3: 6.93 ms per loop
>>> %timeit builtin_sort(mylist, key=key_count, reverse=True)
10 loops, best of 3: 34.5 ms per loop 
```

不太通用的版本现在比`decorate_sort`.

```
>>> %timeit mylist.sort(lambda p, q: -cmp(key_count(p), key_count(q)))
100 loops, best of 3: 13.5 ms per loop 
```

而且`key_dict`还是比较慢。（但比`builtin_sort`！）

```
>>> %timeit decorate_sort(mylist, key=key_dict, reverse=True)
10 loops, best of 3: 20.4 ms per loop
>>> %timeit builtin_sort(mylist, key=key_dict, reverse=True)
10 loops, best of 3: 103 ms per loop 
```

所以结果是 Schwartzian 变换提供了一种更快*、*更通用的解决方案——一种罕见而美妙的组合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:39:58.053

一般解决方案：`list.sort`与返回元组的键函数一起使用：

```
mylist.sort(key=lambda sl: (sl.count('YES') + sl.count('MAYBE'), -sl.count('NO')), reverse=True) 
```

`key`并`reverse`在 Python 2.4 中添加，因此您必须手动完成：

```
key = lambda sl: (sl.count('YES') + sl.count('MAYBE'), -sl.count('NO'))
mylist.sort(lambda p, q: -cmp(key(p), key(q))) 
```

如果`key`速度很慢，最好使用`key`只对每个项目计算一次函数的解决方案（所谓的“[施瓦茨变换](http://en.wikipedia.org/wiki/Schwartzian_transform)”）。请注意 >=Python 2.4 已经执行了这个优化（或类似的）：

```
def key_sort(seq, cmp=None, key=None, reverse=False):
    if key is not None:
        transform = [(key(x), i, x) for i, x in enumerate(seq)]
        transform.sort(None if cmp is None else lambda (k, _, _), (l, _, _): cmp(k, l))
        seq[:] = [x for _, _, x in transform]
    else:
        seq.sort(cmp)
    if reverse:
        seq.reverse() 
```

# php - Authorizing with Facebook API and login/logout

> ID：11084016
> 
> 赞同：-1
> 
> 时间：2012-06-18T13:33:26.370
> 
> 标签：php, facebook

I have the following script for login/logout:

```
 $config = array();
        $config['appId'] = 'xxx';
        $config['secret'] = 'xx';
        $config['cookie'] = true; // optional
        $facebook=new Facebook($config);
        $user=$facebook->getUser();
        if ($user) 
        {
            //echo "Authorized";
            $logout_url=$facebook->getLogoutUrl();
            header("Location: ".$logout_url);
        }
        else 
        {
            //echo "Not authorized";
            $login_url=$facebook->getLoginUrl();
            header("Location: ".$login_url);
        } 
```

It works good for loginning, but I have some problem with registration: when I authorize successfully and I must see the window for logout but instead that my browser will be loaded and I will se the error Error 310 (net::ERR_TOO_MANY_REDIRECTS). What is the problem? Thank you

UPDATED:

```
 $config = array();
        $config['appId'] = '436058296415139';
        $config['secret'] = '50c4ec9a2a565085e8a2e73cd0433111';
        //$config['cookie'] = true; // optional
        $facebook=new Facebook($config);
        $user=$facebook->getUser();
        $data=array();
        if ($user) 
        {
            //echo "Authorized";
           $data['url']=$facebook->getLogoutUrl();
           $data['title']='For logout';
        }
        else 
        {
            //echo "Not authorized";
            $data['url']=$facebook->getLoginUrl();
            //header("Location: ".$login_url);
            $data['title']='For login';
        }
        echo '<a href="'.$data['url'].'">'.$data['title'].'</a>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:41:21.377

如果没有用户，您将他发送到登录对话框（他登录并重定向到您的应用程序）。

之后，有一个用户，因此您立即将他发送到注销 URL（将他注销，并将他重定向回您的应用程序）。

之后……从头开始重复。

# haskell - wl-pprint 包中的 vcat 中有一个额外的空白行

> ID：11084019
> 
> 赞同：5
> 
> 时间：2012-06-18T13:33:33.033
> 
> 标签：haskell, pretty-print

我使用[wl-pprint](http://hackage.haskell.org/package/wl-pprint)包，因为标准 PrettyPrinter 缺乏功能。一切都很好，除了函数中的空文档`vcat`（与`<$>`组合器相同）。

正确行为：

```
import Text.PrettyPrint
> vcat[text "a", empty, text "b"]   
a
b 
```

wl-pprint 显示一个额外的空行：

```
import Text.PrettyPrint.Leijen
> vcat[text "a", empty, text "b"]   
a

b 
```

那么我能做什么呢？过滤 vcat 列表是不可能的，因为`Eq`没有`Doc`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:35:07.737

因为没有更好的想法，所以在源码中做了如下改动

```
(<$$>) :: Doc -> Doc -> Doc
x <$$> Empty    = x                   -- <<< added
Empty <$$> y    = y                   -- <<< added
x <$$> y        = x <> linebreak <> y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:27:14.167

定义 `vcatSoft = fold <//>`

[文档](http://hackage.haskell.org/packages/archive/wl-pprint/1.0/doc/html/Text-PrettyPrint-Leijen.html)说“文档 (vcat xs) 用 (). 垂直连接所有文档 xs。”，然后查看`<$$>`，它说它“连接文档 x 和 y，中间有一个换行符”。但请注意下一个函数 ，`<//>`它使用 a`softbreak`代替。而且看[vcat](http://hackage.haskell.org/packages/archive/wl-pprint/1.0/doc/html/src/Text-PrettyPrint-Leijen.html)的defn，很简单`vcat = fold <$$>`，所以定义一个函数`= fold <//>`。

# backbone.js - 如何将 Backbone.Marionette.ItemView 与 Mustache 一起使用

> ID：11084021
> 
> 赞同：8
> 
> 时间：2012-06-18T13:33:34.143
> 
> 标签：backbone.js, mustache, marionette

以下代码使用`Backbone.Marionette.ItemView`但不能正常工作`Mustache`。

[Backbone.Marionette.ItemView - 没有胡子](http://jsfiddle.net/derickbailey/me4NK/)

我想使用相同的代码，但使用`Mustache`.

这是我的代码：

[Backbone.Marionette.ItemView - 带小胡子](http://jsfiddle.net/me4NK/76/)

知道为什么[我的代码](http://jsfiddle.net/me4NK/76/)不起作用，为什么？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-09T23:26:35.700

我想在这里更新一下答案，因为我只是在为此苦苦挣扎，并且我将此答案用作参考。

以下是我的发现：

**这里的答案与当前版本的Mustache**有点过时（这是可以理解的，因为它已经很老了）

*   **Mustache.to_html**现在已弃用，但仍然作为**Mustache.render**的简单包装器存在，以实现向后兼容。[看看这个链接](https://github.com/janl/mustache.js/blob/master/mustache.js#L550-L559 "小胡子 to_html 源码")。

此外，我发现覆盖**Marionette.Renderer.render**，如上面接受的答案，完全绕过**Marionette.TemplateCache**层，这可能不是所需的行为。

这是**Marionette.Renderer.render**方法的来源：

```
render: function(template, data){

  if (!template) {
    var error = new Error("Cannot render the template since it's false, null or undefined.");
    error.name = "TemplateNotFoundError";
    throw error;
  }

  var templateFunc;
  if (typeof template === "function"){
    templateFunc = template;
  } else {
    templateFunc = Marionette.TemplateCache.get(template);
  }

  return templateFunc(data);
} 
```

^([来源](https://github.com/marionettejs/backbone.marionette/blob/master/src/marionette.renderer.js#L12-L29))

如您所见，它访问**Marionette.TemplateCache.get**方法，而上述答案对维护该功能没有任何作用。

现在来解决我的问题（注意：上面的答案不一定是错误的；这只是我维护**Marionette.TemplateCache**层的方法）：

正如上面的评论所建议的，覆盖**compileTemplate**代替：

```
Marionette.TemplateCache.prototype.compileTemplate = function(rawTemplate) {

    // Mustache.parse will not return anything useful (returns an array)
    // The render function from Marionette.Renderer.render expects a function
    // so instead pass a partial of Mustache.render 
    // with rawTemplate as the initial parameter.

    // Additionally Mustache.compile no longer exists so we must use parse.
    Mustache.parse(rawTemplate);
    return _.partial(Mustache.render, rawTemplate);
}; 
```

[这是一个有效的 JSFiddle 作为证明](http://jsfiddle.net/aubricus/ktG52/)。

在小提琴中，我还重写了**Marionette.TemplateCache.loadTemplate**以证明它只被调用一次。该函数的主体只添加了一些调试输出，然后重新实现了大部分原始功能（减去错误处理）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T15:37:21.490

Marionette 默认使用 UnderscoreJS 模板。仅仅替换`template`视图的配置是不够的。您还需要替换渲染过程的工作方式。

在您的简单示例中，您只需要覆盖`Marionette.Renderer.render`调用 Mustache 的函数，然后将`template`视图设置为您想要的字符串模板：

```
 Backbone.Marionette.Renderer.render = function(template, data){
  return Mustache.to_html(template, data);
}

var rowTemplate = '{{ username }}{{ fullname }}';

// A Grid Row
var GridRow = Backbone.Marionette.ItemView.extend({
    template: rowTemplate,
    tagName: "tr"
}); 
```

请注意，即使您放置此代码，您的 JSFiddle 仍然无法工作，因为`GridView`它仍在使用 jQuery 选择器/字符串作为`template`属性。您需要将其替换为相同类型的`template`函数才能返回 mustache。

[http://jsfiddle.net/derickbailey/d7qDz/](http://jsfiddle.net/derickbailey/d7qDz/)

# c# - C#：从树视图中搜索

> ID：11084027
> 
> 赞同：0
> 
> 时间：2012-06-18T13:33:52.313
> 
> 标签：c#, winforms, textbox, treeview

我从 XML 文件中加载了一个树视图数据。当用户在文本框中输入内容时，我想执行搜索。这是正确的做法吗？？我只想过滤数据。请给我看一些例子。

下面的代码不起作用。

```
 textBox1.Enter += new EventHandler(txtSearch_TextChanged);

 private void txtSearch_TextChanged(object sender, EventArgs e)
        {

            foreach (TreeNode node in this.treeView1.Nodes)
            {

                if (node.Text.ToUpper().Contains(this.textBox1.Text.ToUpper()))
                {

                    treeView1.SelectedNode = node;

                    break;

                }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:05:02.873

我认为另一个问题可能是您提供的代码仅查看顶级节点。您将需要创建一个方法，该方法将递归地遍历节点的子节点，直到找到匹配项。像这样的东西：

```
private TreeNode FindNode(TreeNode node, string searchText)
{
  TreeNode result = null;

  if (node.Text == searchText)
  {
    result = node;
  }
  else
  {
    foreach(TreeNode child in node.Nodes)
    {
       result = FindNode(child, searchText);
       if (result != null)
       {
         break;
       }
    }  
  }
  return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:46:58.070

```
textBox1.Enter += new EventHandler(txtSearch_TextChanged);

 private void txtSearch_TextChanged(object sender, EventArgs e)
        {

            foreach (TreeNode node in this.treeView1.Nodes)
            {

                if (node.Text.ToUpper().Contains(this.textBox1.Text.ToUpper()))
                {
                    treeView1.Select(); // First give the focus to the treeview control,
                    //doing this, the control is able to show the selectednode.
                    treeView1.SelectedNode = node;

                    break;

                }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T13:37:56.640

您需要注册文本更改事件：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textchanged.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textchanged.aspx)

并用于查找特定节点：

```
treeView1.Nodes.Find() 
```

此处的模式详细信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.treenodecollection.find](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenodecollection.find)

# iphone - 字符串对齐

> ID：11084033
> 
> 赞同：-1
> 
> 时间：2012-06-18T13:34:08.267
> 
> 标签：iphone, objective-c

在我的应用程序中，我正在解析 xml 文件以获取 uilabel 的属性，例如颜色、文本、对齐方式。在此我可以将字符串转换为 UIColor，但我搜索了很多链接以将字符串转换为 UITextAlignment。我没有得到任何适当的解决方案。

等待解决方案。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:40:09.263

UITextAlignment 只不过是枚举，所以无论你得到什么响应的文本都说你在左、中或右，那么你可以创建与 UITextAlignment 相同的枚举，即

```
 enum {
        UITextAlignmentLeft = 0,
        UITextAlignmentCenter,
        UITextAlignmentRight,                   
    }

typedef NSTextAlignment UITextAlignment; 
```

并使用字符串获取相应的值并提供给textAlignment。

注意：在内置枚举中，您必须创建自己的枚举，左侧为 0，中心为 1，右侧为 2。

# android - 使用 Phonegap 构建的移动应用程序的 html 页面保存在哪里？

> ID：11084037
> 
> 赞同：1
> 
> 时间：2012-06-18T13:34:26.310
> 
> 标签：android, iphone, mobile, cordova

我正在使用 Phonegap 为 Android 和 iPhone 构建一个移动应用程序。我打算将所有 html、css 和 js 文件保留在我的 Web 服务器上，并仅使用 webview 从那里提供服务。我对此感到困惑。有可能这样做还是我必须与Phonegap捆绑在一起？我也看过[这个](https://stackoverflow.com/questions/6254009/using-phonegap-and-keeping-the-ui-on-the-server)，但这篇文章已经有一年了。有什么变化吗？

请提供您的意见。

谢谢

布平德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:48:04.530

你最好用应用程序打包资源（html/css/js）。如果您远程加载所有内容，您将面临以下风险：A) 至少被 Apple 的应用商店拒绝；B) 网络延迟导致您的应用无法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:09:17.113

你绝对可以做到这一点。您可以从服务器加载 css、js 和 html。但它几乎看起来像一个移动网站，而且你无法通过传感器、电池和通知等电话间隙事件控制页面，它纯粹就像一个网站。如果您的网络速度很快，那么从加载 Web 服务器开始，页面加载速度肯定也很快。要点是您不能像普通的 Android 应用程序那样与您的应用程序交互用户。您可以像移动网站一样使用。所以我更喜欢从手机加载，因为包更好，它提供了真正的应用程序体验，而不是网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T16:50:06.827

是的，你可以这样做，但它会首先被苹果应用商店拒绝。此外，在网络故障或互联网连接缓慢的情况下，您的应用程序将毫无用处。所以我建议避免这种情况，因为这将是一个移动应用程序，而不是网站。

# rest - REST 响应中的链接

> ID：11084042
> 
> 赞同：1
> 
> 时间：2012-06-18T13:34:31.973
> 
> 标签：rest, hateoas

在 HATEOAS 范式中，REST 响应中的链接表示什么，一个动作还是一个资源？我有一个带有类型下拉菜单的订单。一些高级选项字段将根据这些选择加载到表单中。

按照 HATEOAS 范式，不应期望客户端知道或猜测从何处加载这些额外字段。因此，我为提供的每个选项都包含了 1 个链接。链接对象上的`rel`属性应该提供某种关于链接意图的文档。这是一个正确的实现吗？

'net 上流行的咖啡店示例（在 Ian Robinson 的演讲和 InfoQ 的一篇文章中）使用链接来识别下一个可用的状态转换。这些在精神上是等价的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:40:04.130

我不会说您的示例是正确的还是不正确的，而是说它是一个*兼容*的超媒体链接。有不同类型的超媒体链接，您只需要找到最合适的。例如，有时将与资源的链接关系与链接资源分开是有意义的。使用 XML，您可以这样做：

```
<link rel="type1SpecialOptions" href="http:/yourDomain/specialOptions/type1" />
<link rel="type2SpecialOptions" href="http:/yourDomain/specialOptions/type2" /> 
```

而不是仍然有效的超媒体链接样式：

```
<link specialOptions="http:/yourDomain/specialOptions/type1" />
<link specialOptions="http:/yourDomain/specialOptions/type2" /> 
```

选择一种对您的应用程序有意义的链接类型。这篇关于超媒体链接的[文章对超媒体链接](http://amundsen.com/hypermedia/hfactor/)的类型进行了非常简要的解释。它几乎假设您熟悉超媒体和 REST 的术语，因此**首先**查看示例，然后按照不同链接类型的链接更好地了解可能的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:43:21.267

您有多种选择：

1.  定义自定义 rel 值，表示可以对链接资源执行操作。在您的 API 文档中记录这些内容。（最好使用自记录、可取消引用的 HTTP URI 作为您的 rel 值！）
2.  在您的媒体类型文档中定义文档层次结构中的某些超链接表示可以对其执行非 GET 请求的资源，而其他地方的链接表示仅支持 GET 的资源。你可以在这里尽可能具体。
3.  使用表格。某些媒体类型（XML、HTML）具有表单的概念。作为表单动作的超链接是明确的动作。请注意，如果没有 AJAX，浏览器目前仅支持 POST。
4.  用于`OPTIONS`返回`Allow:`标头，提供有关可以执行的操作的信息。此选择需要第二次往返，但除了上述三个中的一个或多个之外，还可以支持。

# java - 如何以编程方式访问 Google Drive 共享链接？

> ID：11084046
> 
> 赞同：3
> 
> 时间：2012-06-18T13:34:46.770
> 
> 标签：java, google-drive-api

Google Drive 允许您使用直接链接共享文件。有没有办法在 Web 应用程序（用 Java 和 JSP 编写）中使用该链接访问 Google Drive 文件？我应该使用哪些 Google API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:42:27.830

从[Google Drive SDK](https://developers.google.com/drive/)页面开始。它包含 5 种编程语言的最佳实践和示例，包括[Java](https://developers.google.com/drive/examples/java)。

Google Drive 使用[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)模式对文件进行操作。任何 Java REST 客户端库都应该足够了 - 请参阅[此线程](https://stackoverflow.com/questions/221442/rest-clients-for-java)。

# jquery - 使用 javascript/jquery 使用 HTTP Post 将文本作为文件上传到服务器

> ID：11084048
> 
> 赞同：2
> 
> 时间：2012-06-18T13:34:56.393
> 
> 标签：jquery, ajax, file, post

我们在网页上有一个表单可以将文件上传到我们的服务器：

```
<form enctype="multipart/form-data" action="upload_file.php" method="post">
  <input type="file" name="file"><input type="submit" value="Upload">
</form> 
```

我们在 Web 应用程序中将 JSON 对象生成为文本，并希望将它们上传到此表单，就好像它们是文本文件一样。

有没有办法使用 javascript/jquery 将文本作为文件动态提交到此表单，例如这样？

```
function UploadTextAsFile (pText) {
  var filename = 'file.txt';

  //post parameter pText as a text file with name "file.txt"
  $.post ('upload_file.php', ....................);
} 
```

# php - 退出弹出重定向，但仅在退出时执行，而不是在单击页面上的任何其他 html 重定向按钮时执行

> ID：11084049
> 
> 赞同：0
> 
> 时间：2012-06-18T13:34:57.947
> 
> 标签：php, javascript, html, redirect

我正在使用此代码

```
var exitPop = false;
var nonFire = false;
window.onbeforeunload = function () {
    if(!exitPop){
        exitPop=true;
        return 'Wait! YOU ARE TODAYS WINNER!';
    }
};

setInterval(function(){
    if(exitPop && !nonFire){
        nonFire = true;
        window.location.href = 'http://google.com';
    }
}, 200); 
```

但它也会在单击页面上的任何 html 重定向按钮时执行。我希望它仅在有人关闭浏览器时执行，并且它应该支持所有浏览器。

我只需要在我的网站中的一个链接上添加这个 id 怎么办？我的意思是我正在使用此代码进行重定向

```
<script type="text/javascript"> 

window.fbAsyncInit = function() {
    FB.Event.subscribe('comment.create',
    function (response) {
        window.location = "http://domain.com";
    });
    FB.Event.subscribe('comments.remove',
    function (response) {
        window.location = "http://domain.com";
    });   
};

(function() {
    var e = document.createElement('script');
    e.async = true;
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}());
//]]>
</script> 
```

所以我希望退出功能不要为此执行..那么如何整合这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:44:41.940

我尚未对其进行测试，但您应该能够将“点击”事件附加到页面上的每个链接，这应该设置一个全局变量，例如

```
linkClicked = true; 
```

然后您可以在卸载事件中检查该变量

```
if (!linkClicked) // variable is false so they must not have clicked on a link
{
    // Some annoying message here
} 
```

免责声明：这几乎是伪代码，它不是复制+粘贴解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:46:57.597

`window.onbeforeunload`不区分链接、后退/前进按钮、退出按钮或其他任何内容。如果在您离开页面时触发，无论您如何离开页面。

# c# - .NET 会停止调试运行 finally 块中的代码吗？

> ID：11084050
> 
> 赞同：4
> 
> 时间：2012-06-18T13:34:59.380
> 
> 标签：c#, .net, vb.net, debugging, finally

好吧，我已经阅读（并了解到）finally 块并不总是执行它的代码（即使除了拔掉插头）。
仅供参考有关更多信息，请参阅[try catch finally 问题](https://stackoverflow.com/questions/3304308/try-catch-finally-question)

但是，我还没有发现：
当我停止调试器时，我的 finally 块是否被执行？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T13:36:13.040

不，当您在到达 finally 块之前停止调试器时，它不会被执行。

# c# - 有没有更简单的方法可以将水平滚动条添加到 ASP 中的列表框？

> ID：11084057
> 
> 赞同：3
> 
> 时间：2012-06-18T13:35:22.683
> 
> 标签：c#, asp.net, listbox

我做了一些寻找，我发现了这个：

[http://www.codeproject.com/Articles/14439/The-ScrollableListBox-Custom-Control-for-ASP-NET-2](http://www.codeproject.com/Articles/14439/The-ScrollableListBox-Custom-Control-for-ASP-NET-2)

但对我来说，似乎必须有一个更简单的方法..使用常规 C# .NET 你可以做到

```
listbox1.HorizontalScrollbar = true; 
```

然后您的列表框会毫不费力地提出一个，难道没有一些简单的方法可以以同样的方式将一个列表框应用于 asp 列表框吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T13:37:19.090

没有>

HTML 不支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T13:43:54.120

我知道的唯一方法是将控件设置为较小的`div`（显式高度和/或宽度）`overflow:auto`；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:30:01.217

只需创建一个将溢出设置为 auto 的 div 标记，然后将宽度设置为您想要的任何值，并将列表框设置为 autosize = true。这样 div 标签将只显示指定的宽度，如果列表框比 div 标签宽，则可以使用滚动条。

# php - php选择多个复选框

> ID：11084058
> 
> 赞同：0
> 
> 时间：2012-06-18T13:35:25.020
> 
> 标签：php

我有这段代码，它可以帮助我检索所有表字段并将检查按钮与它们相关联，但是此代码生成相同的名称，我的意思是它显示了所有字段，但名称相同... id

我需要他们的特殊名称..

你能看看有什么问题吗？

谢谢..

```
 <form action='report.php' method='post'>

<?php // Script 12.7 - sopping.php

$db = mysql_connect('localhost', 'root', '');
mysql_select_db('db_up', $db);

echo "<table border='1' class='tabtext'>";

$result = mysql_query("SELECT * FROM hostess");
$numrows = mysql_num_rows($result);
$numfields = mysql_num_fields($result);

// show headers
echo '<thead><tr>';
for ($field = 0; $field < $numfields; $field++) {
    $field_name = mysql_field_name($result, $field); // instead of $i
    echo '<th><label><input type="checkbox" name="checkbox[' . $field_name . ']" value="1"/> ' . $field_name . '</label></th>';
}

echo '</tr></thead>';

echo '<tbody>';
for ($row = 0; $row < $numrows; $row++) {
    $data = mysql_fetch_assoc($result);
    echo '<tr>';
    for ($field = 0; $field < $numfields; $field++) {
        $field_name = mysql_field_name($result, $field);
        if (isset($_POST['checkbox'][$field_name])) {
            echo '<td>' . $data[$field_name] . '</td>';
        }
    }
    echo '</tr>';
}
echo '</tbody>';
echo '</table>';

?>
<input type='submit' value='Submit' />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:41:23.173

mysql_field_name 函数的第二个参数没有定义，所以我很确定 PHP 假设你的意思是 0 并且只返回第一个字段名。使用您定义的变量 ($field) 作为索引。

应该：

```
for ($field = 0; $field < $numfields; $field++) {
    $field_name = mysql_field_name($result, $field); // instead of $i
    echo '<th><label><input type="checkbox" name="checkbox[' . $field_name . ']" value="1"/> ' . $field_name . '</label></th>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:41:31.720

您正在使用[mysql_field_name](http://php.net/manual/en/function.mysql-field-name.php)并且它总是为您返回相同的名称（对于第 0 列），因为`$i`未定义。

# java - 动态添加组件到 JScrollPane

> ID：11084062
> 
> 赞同：3
> 
> 时间：2012-06-18T13:35:34.607
> 
> 标签：java, swing, awt

我是 Java Swing 的新手，我想开发一个类似于下图的 POS 应用程序： ![在此处输入图像描述](../Images/d1fcdfa0d2ec9db543211960c2ded0f8.png)

为了开发这个应用程序，我正在使用 Eclipse，我创建了 JPanel，它在图像中以数字 eg(1, 2) 显示。在第 3 处，我添加了包含 JPanel 的 JscrollPan，现在我想在这里做，当我单击第 2 号面板中的一个按钮时，该按钮应该在第 3 号面板中动态添加新按钮，当时我只想在每行显示三个按钮并且滚动应该仅在需要时垂直激活。但我不能这样做，因为当我写 scrollPanel.setPreferredSize(new Dimension(2, 3)); 垂直滚动不起作用。我的代码在这里：

```
public class WelcomeUI extends JFrame {
    private JPanel contentPane;
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    WelcomeUI frame = new WelcomeUI();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }
    public WelcomeUI() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(Toolkit.getDefaultToolkit().getScreenSize());
        setUndecorated(true);       
        contentPane = new JPanel();
        contentPane.setBackground(Color.LIGHT_GRAY);
        contentPane.setBorder(new EmptyBorder(0, 0, 0, 0));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);        
        header = new JPanel();
        header.setForeground(Color.BLUE);
        FlowLayout fl_header = (FlowLayout) header.getLayout();
        fl_header.setAlignment(FlowLayout.RIGHT);
        fl_header.setVgap(40);
        fl_header.setHgap(0);
        header.setBackground(Color.BLUE);
        contentPane.add(header, BorderLayout.NORTH);

        footer = new JPanel();
        FlowLayout flowLayout = (FlowLayout) footer.getLayout();
        flowLayout.setVgap(10);
        footer.setBackground(Color.BLUE);
        contentPane.add(footer, BorderLayout.SOUTH);

        panel_2 = new JPanel();
        panel_2.setBackground(Color.BLUE);
        contentPane.add(panel_2, BorderLayout.WEST);

        JButton btnSelectRestaurant = new JButton("Select Restaurant");
        btnSelectRestaurant.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                createDynamicButton(e);
            }
        });     
        JButton btnNewButton = new JButton("Select Steward");       
        JButton btnNewButton_1 = new JButton("Select Table");       
        JButton btnNewButton_2 = new JButton("Misc keys");
        GroupLayout gl_panel_2 = new GroupLayout(panel_2);
        gl_panel_2.setHorizontalGroup(
            gl_panel_2.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel_2.createSequentialGroup()
                    .addGap(19)
                    .addGroup(gl_panel_2.createParallelGroup(Alignment.LEADING)
                        .addComponent(btnNewButton, Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, 119, Short.MAX_VALUE)
                        .addComponent(btnSelectRestaurant, Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnNewButton_1, Alignment.TRAILING, GroupLayout.DEFAULT_SIZE, 119, Short.MAX_VALUE)
                        .addComponent(btnNewButton_2, Alignment.TRAILING, 0, 0, Short.MAX_VALUE))
                    .addContainerGap())
        );
        gl_panel_2.setVerticalGroup(
            gl_panel_2.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel_2.createSequentialGroup()
                    .addGap(26)
                    .addComponent(btnSelectRestaurant, GroupLayout.PREFERRED_SIZE, 43, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.UNRELATED)
                    .addComponent(btnNewButton, GroupLayout.PREFERRED_SIZE, 47, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.UNRELATED)
                    .addComponent(btnNewButton_1, GroupLayout.PREFERRED_SIZE, 40, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.UNRELATED)
                    .addComponent(btnNewButton_2, GroupLayout.PREFERRED_SIZE, 41, GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(438, Short.MAX_VALUE))
        );
        gl_panel_2.setAutoCreateContainerGaps(true);
        gl_panel_2.setAutoCreateGaps(true);
        panel_2.setLayout(gl_panel_2);

        panel_3 = new JPanel();
        FlowLayout flowLayout_2 = (FlowLayout) panel_3.getLayout();
        flowLayout_2.setHgap(250);
        contentPane.add(panel_3, BorderLayout.EAST);

        scrollPane = new JScrollPane();     
        contentPane.add(scrollPane, BorderLayout.CENTER);       
        scrollPanel = new JPanel();     
        scrollPanel.setPreferredSize(new Dimension(2, 3));
        scrollPane.setViewportView(scrollPanel);        
    }
    protected void createDynamicButton(ActionEvent e) {     
        JButton dynButton = new JButton("My Button");
        dynButton.setPreferredSize(new Dimension(300, 200));        
        scrollPanel.add(dynButton);         
        scrollPanel.validate();
        scrollPanel.revalidate();       
    }   
    private JPanel header;
    private JPanel footer;
    private JPanel panel_2;
    private JPanel panel_3;
    private JPanel scrollPanel;
    private JScrollPane scrollPane;
} 
```

所以，请告诉我我在哪里做错了。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:39:11.080

着眼于面板 3，考虑以下内容：

1.  给面板 a `GridLayout(0, 3)`，它指定三列中的任意数量的行。
2.  实现`Scrollable`接口，让`getPreferredScrollableViewportSize()`返回`Dimension`一个按钮高度的倍数。
3.  随着每个按钮的添加，给它一个合适的[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html).
4.  添加按钮时，`revalidate()`面板和`repaint()`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:13:19.097

我得到了答案，实际上问题是，我已经为面板设置了最大尺寸，并且所有动态生成的按钮都放置在单行上，这些按钮被添加到没有遇到最大尺寸，但是函数无法与其他函数通信，因此我们需要动态更改尺寸和这将通过修改[FlowLayout 接口](http://www.koders.com/java/fid7E9F096AF4B92647A91B0C00B2DC70377B296FFB.aspx)来实现。

您可以使用修改后的布局而不是 FlowLayout。

# c# - 如何从动态肥皂网络服务中捕获反序列化错误或 xml？

> ID：11084064
> 
> 赞同：0
> 
> 时间：2012-06-18T13:35:38.163
> 
> 标签：c#, soap, wsdl

我正在通过 ServiceDescription 和 ServiceDescriptionImporter 创建（成功）动态 Web 服务。

**但**

如果我从 Web 服务主机得到一些错误的 xml 文档，我该如何拦截反序列化（错误：InvalidCast... 无法转换为数组）？即使阅读错误的 xml 文档对我来说也是一个谜。

是否可以替换生成的 SoapHttpClientProtocol ？还是 XmlSerializer ？

如果是这样，**如何**？

我不想让整个请求失败。

有人可以帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:41:42.370

最后我能够通过 IL-Emitter**替换 GetWebResponse 。**

虽然很难...我得到的最接近的提示是[here](http://rebuildall.umbraworks.net/2009/09/22/Overriding_virtual_methods_at_runtime)

如果有人感兴趣，我可以展示更多代码。只需放下一条线。

*感谢路过。*

# jquery-ui - JQgrid：获取 Json 数据

> ID：11084066
> 
> 赞同：6
> 
> 时间：2012-06-18T13:35:41.143
> 
> 标签：jquery-ui, jqgrid, jqgrid-asp.net, jqgrid-php

当数据类型是本地的以及列名时，有什么方法可以从 Jqgrid 获取完整的 JSON 数据？

采用这种格式： [{"firstname": "Chris"},{"firstname": "Dave"}]

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T14:57:30.810

您可以使用该`getRowData`方法返回一个包含所有网格数据的数组。例如：

```
var fullData = jQuery("#myGrid").jqGrid('getRowData'); 
```

这是`getRowData`来自 jqGrid wiki 的文档，它有助于解释发生了什么：

> **获取行数据**
> 
> * * *
> 
> 参数：rowid 或无
> 
> 返回：数组
> 
> 描述：
> 
> 返回一个数组，其中包含请求的 id = rowid 的数据。返回的数组是名称：值类型，其中名称是来自 colModel 的名称和来自该行中关联列的值。如果找不到 rowid，则返回一个空数组。
> 
> 如果未设置 rowid，则该方法返回数组中网格中的所有数据

* * *

**更新**

您可能还对该参数感兴趣，该`data`参数可用于检索传递给网格的数据。从[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)：

> 存储传递给网格的本地数据的数组。如果要加载数组数据，可以直接指向该变量。它可以替代相对大数据速度较慢的 addRowData 方法

[例如](https://stackoverflow.com/questions/11102440/keep-checked-state-of-checkbox-in-custom-formatted-column-when-sorting-jqgrid/11102441#comment14542279_11102441)：

```
var data = $('#' + gridid).jqGrid('getGridParam', 'data'); 
```

这有帮助吗？

# css - CSS z-index 和定位问题

> ID：11084069
> 
> 赞同：2
> 
> 时间：2012-06-18T13:35:58.807
> 
> 标签：css, position

我遇到了一个问题，如果我设置相对定位的父元素的 z-index，那么伪元素就不能定位在它后面。

示例：[http ://dabblet.com/gist/2948390](http://dabblet.com/gist/2948390)

HTML：

```
<div class="img"><img src="http://lorempixel.com/500/344"></div> 
```

CSS：

```
.img {
  background:#fff;
  z-index:10;
  position:relative;
  width:500px;
  height:344px;
  border:1px solid black;
  padding:10px;
}

.img:after {
  content:'';
  z-index:0;
  position:absolute;
  bottom:-5px;
  left:10px;
  width:50%;
  height:20%;
  -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
  box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
} 
```

你可以在这里看到，如果我从父元素中删除 z-index 并将伪元素上的 z-index 更改为负数，那么它就可以工作。

[http://dabblet.com/gist/2948402](http://dabblet.com/gist/2948402)

不幸的是，我不能使用该方法，因为页面其余部分的内容是如何定位的。我必须能够在父元素上设置 z-index。

知道为什么我的第一个示例会这样运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:56:15.557

如果包含元素建立了堆叠上下文，那么即使带有负数的元素`z-index`也将始终位于包含元素的边框/背景之前。每个具有`z-index`不`auto`形成堆叠上下文的值的项目：

> **`'z-index'`**
> 
> ```
>  Value:   auto | <integer> | inherit
>   Initial:   auto 
>      [...] 
> ```
> 
> 值具有以下含义：
> 
> **`<integer>`** 这个整数是当前堆叠上下文中生成的盒子的堆叠级别。该框还建立了一个新的堆叠上下文。
> 
> **`auto`** 生成的box在当前stacking context中的stack level为0。box不会建立新的stacking context，除非它是根元素。
> 
> [...]
> 
> 在每个堆叠上下文中，以下图层按从后到前的顺序绘制：
> 
> 1.  构成堆叠上下文的元素的背景和边框。
> 2.  具有负堆栈级别（最负优先）的子堆栈上下文。
> 3.  [...]

这就是为什么您的第二个版本有效，`.img`不会创建新的堆叠上下文。

有关更多信息，请参阅[CSS 2.1：9.9.1 指定堆栈级别：'z-index' 属性](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)）。

### 解决方案

不要忘记您可以创建第二个伪元素`.img:before`. 将其缩放到最大值，将其设置`z-index`为高于`.img:after`并添加一个负值`background-color`。因为它会在它上面渲染，`.img:after`所以会产生`.img:after`被定位在后面的效果`.img`：

```
.img {
    background:#fff;
    z-index:10;
    position:relative;
    width:500px;
    height:344px;
    border:1px solid black;
    padding:10px;
}

.img:before{ /* create a pseudo-background */
    z-index:-1;
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
    background:#fff;
    content: '';
}

.img:after {
    content:'';
    z-index:-2;  /* lower value than .img:before{z-index} */
    position:absolute;
    bottom:-5px;
    left:10px;
    width:50%;
    height:20%;
    -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
} 
```

[**dabblet 演示**](http://dabblet.com/gist/2948884)

# wcf - WCF - 来自智能卡的 x509 证书 - “无法验证签名”

> ID：11084070
> 
> 赞同：0
> 
> 时间：2012-06-18T13:35:58.723
> 
> 标签：wcf, iis-6, pki, wshttpbinding, x509certificate2

我有一个在 IIS6 上运行的 WCF 服务，该服务使用“带有消息凭据的传输”安全设置配置了 WSHTTPBinding（传输客户端凭据设置为“无”，消息设置为“证书”。这是由通过使用 VS 2010 中的服务自动生成的代码创建的 .NET 客户端。

在我的开发环境中，我创建了一个证书作为服务证书和 IIS SSL 证书，由于我很懒，我导出了证书以用于我的客户端应用程序。在该配置中一切正常，但这不是目标环境。这个想法是让用户使用他们的智能卡来访问这项服务。服务器将不在同一个域中，并且目前不允许使用 LDAP。

问题是现在我在测试实验室中得到了这个并设置了一个环境，其中 SSL 证书由与用户证书相同的 CA 颁发，并且我创建了一个自定义 x509 证书验证器和服务凭据，但在初始调用之后对我的验证者来说，在移交之间发生了一些事情，并在服务跟踪日志上踢出一个错误，说“验证消息安全性错误”，内部异常是“无法验证签名”。由于 is 通过我的自定义验证器并且我收到了消息记录，因此在 SOAP 端一切看起来都很好，而我正在通过另一端获取证书。我已确保我尝试使用的每个证书都在“受信任的用户”存储中，甚至尝试导出证书并将它们放入本地计算机“个人”

感觉不太明白web.config文件中服务证书和客户端证书的使用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:44:50.723

好的，所以我在同事的帮助下设法回答了我自己的问题。在我们坐下来开始问我一堆问题并随机进行一些谷歌搜索之后，我们决定更改配置中的一些东西，这让我感到惊讶。

因此，为了完成我的问题，我将消息凭据设置为“证书”，并将加密算法套件设置为“TripleDesSha256Rsa15”。事实证明，智能卡上的证书或卡本身仅支持 Sha1（这不是其他所有选项的选项）。当我们将设置更改为“Basic256”时，一切都开始工作了。我最终能够将其设置为“TripleDesRsa15”并且它继续工作。

基本上，WCF 在没有私钥的情况下发送证书，因为它无法使用该加密算法访问它。WCF在尝试访问证书时***不会***抛出异常，它只会在服务器端抛出异常“无法验证签名”。有点希望它会说“没有签名”，因为这样更容易追踪。我不知道是否有人会发现这很有用，但是如果您这样做并且可以找到对使用 WCF 使用智能卡的“正确”方式的参考，请将其与参考一起发布。

总体而言，请检查您尝试使用的加密算法，并确保它适用于您计划使用的智能卡/证书。

# tfs - TeamCity Artifacts 和结帐规则和 TFS（天哪！）

> ID：11084073
> 
> 赞同：1
> 
> 时间：2012-06-18T13:36:03.937
> 
> 标签：tfs, msbuild, teamcity

在 teamcity 6.5 中创建工件时遇到实际问题（使用 TFS 和 MSBuild 作为 buildrunner，如果它有任何可能性，它可能会像我发现的任何示例一样使用 SVN ......）。

只要我不输入结帐规则，构建就可以工作。如果我理解它，我需要设置一些工件，它们本身依赖于结帐规则（？）。

除了启动方式之外，我有两个相同的构建。一项在登记入住时启动 一项从 TC 内手动启动。此构建是测试构建

程序集版本号来自单个 versioninfo.cs 文件，该文件是解决方案中所有项目的链接文件。此方法在此处详细说明：http: [//www.codeproject.com/Articles/328977/The-Right-Way-to-Version-Your-Assemblies](http://www.codeproject.com/Articles/328977/The-Right-Way-to-Version-Your-Assemblies)并因此保存版本号：[assembly: AssemblyFileVersion("9.1.0.0" )]

最终，我无法将测试版本的输出复制到另一个位置。就目前而言，构建的唯一输出是在 teamcity 数据目录中，例如：C:\TeamCity\buildAgent\work\ceaaf65dc87ff856\Project1\bin\Debug C:\TeamCity\buildAgent\work\ceaaf65dc87ff856\Project2\bin \调试等

我想将输出文件（exes 和 DLLs）复制到一个输出文件夹，其中包含构建的内部版本号为了参数，假设上面的版本号，这将是 c:\BuildServer_Output\SolutionName \9.1.0.0

目前，我无法创建实际执行任何操作的工件路径 - 即在任何地方复制任何内容。例如，我有一些工件路径，但没有任何东西被放入 C:\BuildServer_TestBuilds - +:Accounts\bin\debug* => C:\BuildServer_TestBuilds +:BackOffice\bin\debug* => C:\BuildServer_TestBuilds

因为我没有结帐规则，我是否没有得到任何工件（因此我的工件路径被忽略）？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:06:49.440

我很确定工件和结帐规则是完全独立的。Artifacts 只处理已构建的内容。签出规则告诉 teamcity 如何响应和签出 VCS 中的更改。

看起来您的工件路径以绝对路径开头。我一直发现使用通配符的相对路径更容易。这样我就不用担心 teamcity 把构建放在哪里了。我们使用以下方法将所有 dll 和 exe 放到一个文件夹中

```
**\bin\Debug\*.*=>deploymentdir 
```

我们的构建配置页面有一个工件链接，当我们打开它时，它会有类似的东西

```
deploymentdir\common\bin\debug\common.dll
deploymentdir\common\bin\debug\common.pdb
deploymentdir\runner\bin\debug\runner.exe 
```

在我们的其他构建之一中，我们使用 msbuild 脚本在将其放入工件过程之前将其展平。

我们确实使用了结帐规则，但我们不必更改我们的工件路径来适应它们。

# html - 图片未在 Chrome 中显示

> ID：11084078
> 
> 赞同：0
> 
> 时间：2012-06-18T13:36:18.607
> 
> 标签：html, css, image

我有一组在 Firefox 中运行良好但在 Google Chrome 中运行良好的小图像。html代码是这样的：

```
<li class="links">
<a href="tassa-di-soggiorno"><img src="<?php bloginfo('template_directory'); ?>/images/taxNero.jpg"></a>
<a href="eco-friendly-hotel"><img src="<?php bloginfo('template_directory'); ?>/images/eco.jpg"></a>
<a href="pet-friendly-hotel"><img src="<?php bloginfo('template_directory'); ?>/images/pet.jpg"></a>
<a href="3130"><img src="<?php bloginfo('template_directory'); ?>/images/diverability.jpg"></a>
</li> 
```

和CSS样式：

```
#nav-bar li.links a {
display: block;
float: left;
margin: 0 1px;
width: 40px;
} 
```

这是网页的链接以查看它：[http ://www.alcappellorosso.it](http://www.alcappellorosso.it)

您应该看到左侧导航菜单正下方的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:46:39.990

添加你的CSS：

```
#nav-bar li {
 height: 35px;
} 
```

或者更适合您的设计。

# java - 为什么 FileSystemXmlApplicationContext 在存在的文件上抛出 FileNotFoundException

> ID：11084079
> 
> 赞同：6
> 
> 时间：2012-06-18T13:36:19.873
> 
> 标签：java, linux, spring

我正在运行以下代码：

```
new FileSystemXmlApplicationContext("/data/farm/Server/confData/1000004/contex.xml") 
```

它抛出

```
java.io.FileNotFoundException: class path resource [data/farm/Server/confData/1000004/contex.xml] cannot be opened because it does not exist 
```

文件存在，我可以

```
cat /data/farm/Server/confData/1000004/contex.xml 
```

并查看其内容。同样在 Windows 中，此代码正在运行 - 问题出在 linus 中（我有 ubuntu os）

任何人都可以建议这里有什么问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T13:54:32.610

尝试使用 Url 创建 FileSystemXmlApplicationContext，例如：

```
new FileSystemXmlApplicationContext("file:/data/farm/Server/confData/1000004/contex.xml"); 
```

有关进一步的解释，请参见：[http](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch05s07.html) : //static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch05s07.html 5.7.3 FileSystemResource 警告

# python - 使用 Python 进行多元分布

> ID：11084080
> 
> 赞同：4
> 
> 时间：2012-06-18T13:36:21.690
> 
> 标签：python, statistics, scipy

# 问题

我计算了一个取决于两个变量的概率密度函数。我想使用这个多元分布来生成一些随机数，这些随机数的概率与 PDF 成正比。

看起来，SciPy 目前只支持[单变量分布](http://mail.scipy.org/pipermail/scipy-user/2010-March/024786.html)。是否有任何允许二维分布的简单方法或易于使用的软件包？

作为一种解决方法，我可能会尝试在感兴趣的域上创建随机数并将它们丢弃或保留它们与我的 PDF 相关的机会，但仍然可能有其他选择。随机数生成不必很快。

谢谢你的帮助！

# 这是一个可能的解决方案

根据答案（非常感谢！），我破解了一些代码，您可能会在[此 gist](https://gist.github.com/2953219)中找到这些代码。如果您使用 sin^2*Gauss PDF 运行此示例，将在 PDF 上绘制 2000 个满足给定条件（在圆圈内）的随机随机变量。也许这对其他人也有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:14:24.933

所以你有一个PDF `F(x,y)`，你想生成成对`x`并`y`根据这个PDF分发？

我会说，除非您可以使用反演技术（[wiki](http://en.wikipedia.org/wiki/Inverse_transform_sampling)）的多元版本，否则拒绝采样是可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:14:28.160

对于变量 X 和 Y，您不能通过仅生成具有 X 的独立分布的 x 和具有给定 x 的 Y 分布的 ay 来将其分成两个单变量分布的采样吗？

# notepad++ - Notepad++ 将 2 行合并为 1 行

> ID：11084086
> 
> 赞同：10
> 
> 时间：2012-06-18T13:36:41.417
> 
> 标签：notepad++, editing

我有以下文字；

> 国家/地区=法国
> 名称=牛仔
> 国家/地区=德国
> 名称=迈克尔
> 国家/地区=英国
> 名称=杰克

我希望它看起来像；

> 国家/地区=法国名称=牛仔
> 国家/地区=德国名称=迈克尔
> 国家/地区=英国名称=杰克

我如何在记事本++中做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-01-30T07:39:10.653

从菜单中选择 Edit → Line Operations → Join Lines 或

选择行并按 Ctrl + J --> 最简单的选项:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T13:41:51.753

使用扩展替换功能并将“\r\nname”替换为“name”

根据文件为 \r\n 替换适当的行结束字符。

如果它来自 Windows，请使用 \r\n

如果它来自 unix，请使用 \n

如果是来自 mac，请使用 \r

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T13:57:05.703

1.  打开“搜索>替换”对话框

2.  在“查找内容”字段中放置不带引号的字符串“(country=\w*)\r\n(name=\w*)”。

3.  在“替换为”字段中放置字符串“(\1) (\2)”，同样不带引号。

4.  标记“正则表达式”搜索模式。

5.  按“查找下一个”进行测试。

6.  如果选择了以 country=XX 和 name=YY 开头的 2 行，则按“全部替换”。

如果您不使用 Windows，则必须仅使用 \n 或 \r，具体取决于您使用的是 linux/unix 还是 mac。

[Notepad++ 使用 Posix 正](http://npp-community.tuxfamily.org/documentation/notepad-user-manual/searching/normal-search)则表达式。您可以参考任何标准 Posix Regex 参考，例如[this one](http://www.zytrax.com/tech/web/regex.htm)或[this one](http://krijnhoetmer.nl/stuff/regex/cheat-sheet/)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-23T06:44:31.043

想要添加以防它可以帮助类似的情况：
当前一行数字和第二个文本时替换文件中的行

```
1
text
2
text 
```

基于[Filipe Fedalto](https://stackoverflow.com/users/959251/filipe-fedalto)答案正则表达式将是：

```
find:(\d+)\r\n
replace:(\1) 
```

# php - mysql查询连接表

> ID：11084087
> 
> 赞同：1
> 
> 时间：2012-06-18T13:36:41.463
> 
> 标签：php, mysql

我有两个表表的结构是这样的

```
TableA

id      location
1        Australia
2        Nepal
3        Australia
4        U.K 
```

id 是自动递增且唯一的

```
TableB 

uid   app      title    var1
2      music   reeedd    rfrwwdew
4      game     jejee     edeeded
2      game     efrfeded   ededede
3      book      ededed   dedee 
```

请注意，tableA“id”和tableB“uid”指的是相同的用户标识，我想打印详细信息，这样来自尼泊尔的用户只能看到内容rfrwwdewas app is music only出现一次。

所以我使用了这个查询，一切都很好，它根据我的requiremnet打印了记录但是当我点击播放时它正在转义我注意到它没有解析（嵌入java脚本）播放器

```
 $res6411 = sql_query("SELECT * from TableB as c join TableA as p on c.uid=p.id  where p.location='{$client['location']}' and c.app='music' order by rand() desc limit 3");

while($row6411 = sql_fetch_array($res6411)) {
    $outputmusic .= '<div href="'.$row6411['var1'].'" style="width: 520px;" class="item">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">'.$row6411['title'].'</div>
        </div>
        <div class="player inactive"></div>
    </div>';        
        } 
```

我得到的输出是

```
<div id="playlist" class="playlist1"> <div class="item" style="width: 520px;" href="">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">Dheere Dheere Se Meri Zindagi</div>
        </div>
        <div class="player inactive"></div>
    </div><div class="item" style="width: 520px;" href="">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">DEKHA NE HAYE -BOMBAY TO GOA</div>
        </div>
        <div class="player inactive"></div>
    </div><div class="item" style="width: 520px;" href="">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">Saagar Kinare</div>
        </div>
        <div class="player inactive"></div>
    </div></div> 
```

但我想得到这个输出

```
<div id="playlist" class="playlist1"> <div class="item" style="width: 520px;" href="uploads/userfiles/201206/1112_06_rhuak.01_TERE_NAAM.MP3">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">Tere Naam</div>
        </div>
        <div class="player inactive"></div>
    </div><div class="item" style="width: 520px;" href="uploads/userfiles/201206/114_50_q7n4k.25RAATKALIEKKHUWABMEIN.mp3">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">RAAT KALI EK KHUWAB MEIN</div>
        </div>
        <div class="player inactive"></div>
    </div><div class="item" style="width: 520px;" href="uploads/userfiles/201206/123_29_52l7b.15TeriPyariPyariSuratKo.mp3">
        <div>
            <div class="fr duration"></div>
            <div class="btn play"></div>
            <div class="title">Teri Pyari Pyari Surat Ko</div>
        </div>
        <div class="player inactive"></div>
    </div></div> 
```

# c# - 方法 'WeightOut' 没有重载需要 2 个参数

> ID：11084093
> 
> 赞同：-1
> 
> 时间：2012-06-18T13:36:51.597
> 
> 标签：c#, winforms, syntax

方法 'WeightOut' 没有重载需要 2 个参数

在我对其进行调整以提高效率之前，我的代码正在运行。

这是工作代码：

在 BASE 类中，我有：

```
public virtual double WeightOut(double weightOut, double wightIn)
        {
            return Math.Round((weightOut = (weightIn + 0.12)), 2);
        } 
```

然后在继承类中我有：

```
public override double WeightOut(double weightOut, double weightIn)
        {
            return Math.Round((this.WeightIn() + 0.12), 2);
        } 
```

然后我更改了它，以便我不在两个类中使用相同的代码，而只在继承的类中使用：

在 BASE 类中：

```
public abstract double WeightOut(); 
```

在继承类中：

```
public override double WeightOut()
        {
            return Math.Round((this.WeightIn() + 0.12), 2);
        } 
```

然后，在使用同一 INHERTIED 类中的 WeightOut() 方法导致的这行代码进行编译时，我得到了语法错误：

```
public override double HowMuchTheFishWeighOutKG()
        {
            return this.FishPerTank() * this.WeightOut(0, 0) * this.Tanks();
        } 
```

所以我将其更改为：

```
public override double HowMuchTheFishWeighOutKG()
        {
            return this.FishPerTank() * this.WeightOut() * this.Tanks();
        } 
```

语法错误仍然存​​在：

方法 'WeightOut' 没有重载需要 2 个参数。

**（另一个小问题）它告诉我错误在哪里：37,59，但 Visual Studio 没有告诉我那在哪里，我必须自己数数才能找到它在哪里。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:37:58.737

我要检查的几件事：在基类中，您确定 WeightOut 的抽象方法没有参数。发出的投诉可能与继承的函数定义不匹配有关。

第二件事要检查，右键单击 Inherited Classes "WeightOut" 函数（具体的函数名称）并选择选项`Find All References`。这应该为您提供代码中每个位置的列表，按类名/文件名和行号，调用此函数。这可能会有所帮助。

注意：如果您没有该选项，请详细说明您使用的是哪个版本的 Visual Studio？

另请注意：这可以通过“在文件中查找”搜索以及函数名称来完成。此搜索将返回更多误报，但仍会找到对该函数的所有引用。

此外，即使在 vs 2005 中，如果您双击错误框中的错误，它应该将光标放在导致问题的行上，或者更确切地说是抛出错误的行，如果它不是代码行而是就像一个结束`}`，然后告诉我们一些不同的东西。

# jquery - 如何直接解析具有 $.getJSON 的自定义函数的返回数据？

> ID：11084095
> 
> 赞同：0
> 
> 时间：2012-06-18T13:36:57.233
> 
> 标签：jquery, json, twitter, getjson

我在自定义函数 getSearch() 中调用了 $.getJSON。我想将数据直接返回到我调用的容器中。（比自定义函数中的 .html() 容易得多。它在克隆对象上。）我正在尝试两种方法： 1\. 将数据直接返回到调用函数中，因为我已经“知道我在哪里”。2\. 将正确容器的 var 传递给函数，以便可以从那里将其放入正确的位置。我想我更喜欢第一种选择，但现在我无法工作。

这些是我的函数——一个是在搜索框中按回车键触发，另一个是使用 $.getJSON() 调用 twitter 的自定义函数。用## 标记的相关行。

```
 // RUN SEARCH: when pressing enter key in search box
    $('.search_box_in_menu').keypress(function(e) {
        var keycode = (e.keyCode ? e.keyCode : e.which);
        if(keycode == '13') {                   // remember to add all the enter/return buttons
                console.log(".search_box_in_menu - enter-key pressed.");
                console.log($(this).val());
            var where = $(this).parent().parent().parent();
            var there = $(this).next('.results').attr('class');
            console.log("where:");
            console.log($(this));
            console.log($(this).parent().parent().parent());
            console.log($(this).next('.results').attr('class'));
            console.log(where);
            console.log("there:");
            console.log(there);
    ##      $(this).closest('.results').getSearch($(this).val(), where);    //calling twitter
                console.log("$(this).val() at enter-press: " + $(this).val());

            $(this).closest('.dropdown').trigger('click'); //close dropdown box
            $('.search_box_in_menu').tooltip('hide'); //hiding tooltip on searchbox when pressing enter
        }
    });

}); //$(document).ready 

// function for getting tweets from Twitter
$.fn.getSearch = function(searchword, where) { 
    var qterm = searchword;
    var preUrl = "http://search.twitter.com/search.json?q=";
    var postUrl = "&rpp=50&include_entities=true&show_user=true&callback=?";
    var twUrl =  preUrl + qterm + postUrl; 
    console.log(preUrl + ", " + qterm + ", " + postUrl);

    if (qterm !== '') {
        $.getJSON(twUrl, 
            function(data) { 
                console.log('sending to search_back.php.');
                console.log("data before send: " + data);
                $.post("search_back.php", {json_data: data}, function(data) { 
                        console.log("returned at: ");
                        console.log($(this));
                        console.log(where);
            ##      $(".results").html(data); // # this is the current way, but will apply to all cloned objects.
            ##      //return data; // # this is the preferred way
                });

            });
    };
}; 
```

有人知道如何以一种英俊的方式解决这个问题吗？我也不想为 .results 分配 ID，因为似乎必须有一种更优雅的方法来解决这个问题！

这是 FireBug 控制台日志：我所追求的 .results 是 [div id="menu200"] 之后的下一个。

```
document.ready -
[div#menu200.dropdown]
.dropdown - click.
.search_box_in_menu - click.
.search_box_in_menu - value removed.
.search_box_in_menu - enter-key pressed.
twitter
where:
[input.search_box_in_menu Search...]
[div#menu200.dropdown]
undefined
[div#menu200.dropdown]
there:
undefined
http://search.twitter.com/search.json?q=, twitter, &rpp=50&include_entities=true&show_user=true&callback=?
$(this).val() at enter-press: twitter
[div#menu200.dropdown]
.search_box_in_menu - dirty searchbox.
.dropdown - click.
sending to search_back.php.
data before send: [object Object]
POST http://wikindoit.org/twitterstars/search_back.php
200 OK
927ms   
returned at:
[Object { url="search_back.php", isLocal=false, global=true, more...}]
[div#menu200.dropdown] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:47:31.920

向 getSearch 添加第三个参数：

```
$.fn.getSearch = function(searchword, where, callback) { 
```

在 getScript 的成功回调结束时，您将调用回调并将任何您想要的传递给它。

```
//$(".results").html(data);
callback(data); 
```

# windows - 我应该担心一个 CPU 系统中的 NUMA 吗？

> ID：11084102
> 
> 赞同：4
> 
> 时间：2012-06-18T13:37:05.830
> 
> 标签：windows, numa

如果只有一个 CPU，对于支持 NUMA 的 CPU 架构的 Windows 开发人员是否有任何影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T18:06:28.077

评论 -> 回答

据我所知，没有单插槽系统是 NUMA。[IBM Power7](http://en.wikipedia.org/wiki/POWER7)有一个轻微的NUMA L3 缓存，但对主存的访问仍然是统一的。

许多多插槽主板系统都是 NUMA，其中每个插槽都有自己的本地和快速内存组。您可以选择仅填充一个套接字，但它不再是 NUMA。

所以不，如果只有 CPU，那么你不需要担心 NUMA。

# jquery - 在html页面中解析jquery以获取python中的加载url

> ID：11084104
> 
> 赞同：0
> 
> 时间：2012-06-18T13:37:20.207
> 
> 标签：jquery, python, html

我在 html 页面中有以下 java 脚本代码片段：

```
<script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery("#data1").load("/link-to-data-1 table");
    })
</script> 
```

请建议一些使用 HTML Parser 或任何其他解析器从上述脚本获取 url 的好方法：/link-to-data-1。通过使用 HTML Parser，我们尝试解析 handle_data 中的数据，我们将以下数据作为字符串获取，`jQuery(document).ready(function(){ jQuery("#data1").load("/link-to-data-1 table"); })`我们希望以结构化方式从上述数据中提取 url 链接 /link-to-data-1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:41:36.777

使用正则表达式，您将能够匹配类似的`load\(\"(.*)\"\)`内容，这将获取您需要的内容，我在这里举了一个例子，[http://rubular.com/r/YMWtYMJSdG](http://rubular.com/r/YMWtYMJSdG)。Rubular 工具由 Ruby 正则表达式提供支持，但这些基本功能可在所有引擎中移植。

我的例子中的匹配**是非贪婪**的，所以下面的例子也是正确的[http://rubular.com/r/yjPVrKMgWX](http://rubular.com/r/yjPVrKMgWX)

# perl - 如何从perl中的字符串变量复制模式

> ID：11084106
> 
> 赞同：3
> 
> 时间：2012-06-18T13:37:33.470
> 
> 标签：perl

我需要在perl`=`和`)`使用 perl 之间复制句子的内容。比如说：

```
 $temp="06/18/2012 08:35:35(PID=2150)"; 
```

现在我需要将值复制到变量`2150`之间。`=``)``$temp2`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T13:39:48.520

使用正则表达式很容易实现：

```
my ($temp2) = $temp =~ /=(\d+)\)/; 
```

只需查找 和 之间的数字`=`序列`\)`。由于括号用于捕获组，因此必须对右括号进行转义。

必须`$temp2`用括号括起来的原因是因为您需要强制列表上下文返回匹配结果。在标量上下文中，您只会得到匹配的数量；1 在这种情况下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:48:40.360

仅使用 index() 和 substr() （作为练习，如果有的话；）。

```
$temp="06/18/2012 08:35:35(PID=2150)";
$temp = substr $temp, index($temp, "=") + 1, (index($temp, ")") - 1) - index($temp, "=");
print $temp; 
```

# blackberry - 如何在黑莓中为bimap提供点击事件

> ID：11084113
> 
> 赞同：0
> 
> 时间：2012-06-18T13:37:57.947
> 
> 标签：blackberry

我用圆角矩形创建了经理。我在左角的那个管理器中添加了小位图。如果单击该位图，我想更改该位图。如何将调用动作赋予位图我尝试过的调用动作方法。但它不工作。请告诉我是否有人知道我用过

```
 roundedManager = new RoundedManager();
    Bitmap bitmap = Bitmap.getBitmapResource("img/delete_icon.png");
    BitmapField bitField = new BitmapField(bitmap, ACTION_INVOKE ) {
    protected boolean invokeaction(int action){
      dialog.alert("clicked");
     return true; 
```

但它不工作

# html - 表表示为不显示的 Div

> ID：11084116
> 
> 赞同：0
> 
> 时间：2012-06-18T13:38:16.510
> 
> 标签：html, css, html-table

我是网络编程的新手，我正在处理的网页的初稿在表格中包含表格。当我阅读更多内容时，我发现将外部表格呈现为 div 并将表格嵌套在外部 div 的单元格中是更好的样式。但是，一旦我将表格标签切换为 div，一切都停止了显示。我确定我遗漏了一些明显的东西。这是代码：

CSS：

```
.Dashboard
{
    display: table;
    table-layout: fixed;
    height: 500px;
    width: 500px;
}
.col
{
    display: table-column;
}
.cell1
{
    display: table-cell;
    border: 1px solid black;
}
.cell2
{
    display: table-cell;
    border: 1px solid black;
}
.cell3
{
    display: table-cell;
    border: 1px solid black;
}
.cell4
{
    display: table-cell;
    border: 1px solid black;
}
table.inner, td
{
    border-collapse: collapse;
    border: 2px solid black;
    text-align: center;
    padding: 2px;
}
td.image
{
    padding: 0;
    margin: 0;
} 
```

HTML：

```
<form id="form1" runat="server">
<asp:Label runat="server" ID="label"></asp:Label>
<div runat="server" id="Dashboard" class="Dashboard">
    <div class="col">
        <div class="cell1">
            <table class="inner" id="t1">
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr><...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
            </table>
        </div>
        <div class="cell2">
            <table class="inner" id="t2">
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
            </table>
        </div>
    </div>
    <div class="col">
        <div class="cell3">
            <table class="inner" id="t3">
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
            </table>
        </div>
        <div class="cell4">
            <table class="inner" id="t4">
                <tr>...</tr>
            </table>
        </div>
    </div>
</div>
</form>
</body>
</html> 
```

我意识到目前所有的单元格都是相同的，但这会改变——因此有四种不同的 CSS 规范。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:47:13.297

好的做法是使用`table less`HTML 进行标记，除非您确实有要显示的表格数据。桌子是为了`Tabular data`！.但是，在您的情况下，问题出在`display:`CSS 属性上。如果你把 display:block; 而不是`table-cell`等，布局开始出现在您的页面上。所以我建议看看[W3schools](http://www.w3schools.com/cssref/pr_class_display.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:03:53.483

您的代码中唯一的错误是您将**display:table-column**用于*.col*，尝试将其删除或将其更改为 table-cell 或 table-row ，您的代码应该可以工作。

# c# - 在嵌套母版页中查找父 MasterPage 属性

> ID：11084118
> 
> 赞同：1
> 
> 时间：2012-06-18T13:38:19.497
> 
> 标签：c#, asp.net, master-pages

我继承了一些带有父母版页的代码：content.master。此页面有两个属性，内容页面可以访问这些属性来控制多视图服务器控件。

```
public enum ContentViews
{
    vw100 = 0,
    vw3070 = 1,
    vw7030 = 2
}

public ContentViews CurrentView
{
    get { return ((ContentViews)mvwDisplay.ActiveViewIndex); }
    set { mvwDisplay.ActiveViewIndex = (int)value; }
} 
```

直接子内容页面 (content_3070.aspx) 可以访问这些属性并设置多视图的活动视图，如下所示：

```
protected void Page_PreInit(Object sender, System.EventArgs e)
{
    ((Content_Master)Page.Master).CurrentView = Content_Master.ContentViews.vw3070;
} 
```

我也有 content_100.aspx 和 content_7030.aspx，它们是直接的孩子，可以做同样的事情。

那太棒了。但我想做的是创建另一个母版页：search.master。Seach.master 将是一个嵌套的主人。

```
<%@ Master Language="C#" MasterPageFile="~/content.master" AutoEventWireup="true"CodeFile="search.master.cs" Inherits="Search_Master" %>

<%@ MasterType virtualpath="~/content.master" %> 
```

从 search.master，我想创建子内容页面（这将是 content.master 的孙子）。从这些“孙子”中，我想访问 content.master 属性。但我似乎无法弄清楚如何在 C# 中执行此操作的语法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:36:29.417

好的，想通了这一点。解决方案是将属性添加到子母版页 (search.master)，然后可以引用父母版页 (content.master) 上的属性。然后，第二个母版 (search.master) 的子内容页面可以访问其直接父母版的属性。

所以，第二个孩子 master seach.master 看起来像这样：

```
public partial class Search_Master : System.Web.UI.MasterPage
{
    public enum ContentViews
    {
        vw100 = Content_Master.ContentViews.vw100,
        vw3070 = Content_Master.ContentViews.vw3070,
        vw7030 = Content_Master.ContentViews.vw7030
    }

    public ContentViews CurrentView
    {
        get 
        {
            MultiView mvwDisplay;
            mvwDisplay = (MultiView)Master.FindControl("mvwDisplay");
            return ((ContentViews)mvwDisplay.ActiveViewIndex); 
        }
        set 
        {
            MultiView mvwDisplay;
            mvwDisplay = (MultiView)Master.FindControl("mvwDisplay");
            mvwDisplay.ActiveViewIndex = (int)value; 
        }
    }
} 
```

content.master 上的多视图可以从 search.master 的内容子项中设置如下：

```
protected void Page_PreInit(Object sender, System.EventArgs e)
{
    ((Search_Master)Page.Master).CurrentView = Search_Master.ContentViews.vw100;
} 
```

# sql-server - 如何让 MS SQL Server 透明地使用 CHECKSUM/哈希索引？

> ID：11084120
> 
> 赞同：8
> 
> 时间：2012-06-18T13:38:31.157
> 
> 标签：sql-server, sql-server-2008, hash, indexing, database-performance

除非 CHECKSUM 列显式包含在查询的搜索参数中，否则 SQL Server 似乎不会自动使用 CHECKSUM/哈希索引。这是一个问题，因为我不控制查询表的应用程序，并且我可能不会破坏它们的性能。

**有没有办法让 SQL Server 使用新的 CHECKSUM/hash 索引*而不*修改查询以包含新的 CHECKSUM/hash 列？**

## 复制脚本

```
CREATE TABLE big_table
(
    id BIGINT IDENTITY CONSTRAINT pk_big_table PRIMARY KEY,
    wide_col VARCHAR(50),
    wide_col_checksum AS CHECKSUM(wide_col),
    other_col INT
)

CREATE INDEX ix_checksum ON big_table (wide_col_checksum) 
```

插入一些测试数据：

```
SET NOCOUNT ON
DECLARE @count INT = 0
BEGIN TRANSACTION
WHILE @count < 10000
BEGIN
    SET @count = @count + 1
    INSERT INTO big_table (wide_col, other_col) 
    VALUES (SUBSTRING(master.dbo.fn_varbintohexstr(CRYPT_GEN_RANDOM(25)), 3, 50), @count)
    IF @count % 1000 = 0
    BEGIN
        COMMIT TRANSACTION
        BEGIN TRANSACTION
    END
END
COMMIT TRANSACTION

INSERT INTO big_table (wide_col, other_col) 
VALUES ('ABCDEFGHIJKLMNOPQRSTUVWXYZ', 9999999) 
```

* * *

旧版查询。导致聚集索引扫描 (BAD)：

```
SELECT * FROM big_table 
WHERE wide_col = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 
```

![聚集索引扫描 (BAD)](../Images/260e94ce502d64d6631dc95cf50b2067.png)

* * *

更新了查询。导致非聚集索引搜索（良好）：

```
SELECT * FROM big_table 
WHERE wide_col = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
AND wide_col_checksum = CHECKSUM('ABCDEFGHIJKLMNOPQRSTUVWXYZ') 
```

![非聚集索引搜索（好）](../Images/378c9bef317fa26d47bad7feb74bc814.png)

## 背景

我的表非常大（数亿行），有几个索引（~ 20），所有这些都是必需的。一些索引列有点宽（约 50 个字节）并且几乎没有重复值。仅在相等时搜索列。表被不断地插入。

这是一个比较上面示例表上的“正常”索引和 CHECKSUM/哈希索引的表，包括压缩和非压缩。来自 100 万行表的新重建索引的数据：

![哈希索引和压缩](../Images/2efda59a4ca21f46fcac18d63c4feb3d.png)

单独的页面压缩对样本数据非常无效（实际数据应该压缩得更好）。哈希索引实现了 4 倍的索引大小减少。哈希索引上的页面压缩实现了 6 倍的索引大小减少。

我使用哈希索引的目的是：

1.  减少这些索引在内存中的大小，从而允许 SQL Server 在 RAM 中缓存更多部分，从而避免物理读取。
2.  减少索引存储大小。
3.  减少 INSERT 操作的索引 I/O。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:44:30.687

如果您的应用程序查询：

```
SELECT * FROM big_table WHERE wide_col = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 
```

您需要在 上`wide_col`而不是在 上的索引`wide_col_checksum`。

SQL Server 将索引存储为 B 树。正如@MartinSmith 所建议的那样，减少索引中列的大小确实会减少内存和磁盘占用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T10:14:25.873

SQL Server 不会自动开始使用校验和/哈希索引。查询需要使用散列列供sql server 考虑使用索引。因此，我看不到您如何实现对查询进行更改的目标。然而，这是一个有趣的问题，可能是对 SQL Server 的一个很好的功能请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-12T18:25:35.813

我有一个解决方案给你，这是一项艰巨的任务！

您可以重命名您的表格，然后使用表格的名称创建一个视图，并在视图内部执行此操作。

这个想法是用视图捕获对表的调用，如果没有直接过滤器`wide_col`或使用`ix_checksum`索引对应的记录，则在视图内部返回所有记录。

我使用`sys.dm_exec_requests`and`sys.dm_exec_sql_text`来获取用户想要的查询文本，然后通过一点解析，我提取`wide_col`列的参数以及它的参数，`CHECKSUM()`或者`NULL`如果没有找到参数。

之后，我`id`使用该校验和（如果存在）提取记录。

`UNION ALL`如果查询中未请求过滤器，则使用运算符将​​所有记录添加到结果集中。

这很棘手，但它有效！

**警告！**
我已经做了一点解析以从查询中获取参数，您应该检查您的查询以查看它是否正确并在需要时进行调整。

```
-- rename the table
exec sp_rename big_table, _big_table;
go

drop view big_table
go

-- create the view with the name of the table
create view big_table
as
with
q as ( -- extract the query text
    SELECT SUBSTRING(dest.text, (dem.statement_start_offset+2)/2, CASE WHEN dem.statement_end_offset=-1 THEN 8000 ELSE (dem.statement_end_offset-dem.statement_start_offset+4)/2 END) current_statement
    FROM   sys.dm_exec_requests dem CROSS APPLY sys.dm_exec_sql_text(dem.sql_handle) dest  WHERE  session_id = @@SPID
),
f as ( -- do some parsing to get WHERE condition
    select 
        REPLACE(REPLACE(REPLACE(REPLACE(
            SUBSTRING(current_statement, nullif(patindex('%WHERE%wide_col%=%''%''%', current_statement), 0)+5, 8000)
        , CHAR(9), ' '), CHAR(10), ' '), CHAR(13), ' '), ' ', '') par 
        from q 
        where current_statement like '%WHERE%wide_col%=%''%''%'
),
r as ( -- some more parsig to get wide_col filter
    select SUBSTRING(par, 1, charindex('''', par)-1) par
    from (
        select SUBSTRING(par, patindex('%wide_col=''%''%', par)+LEN('wide_col')+2, 8000) par
        from f
        where par like '%wide_col=''%''%'
    ) r
),
p as ( -- calc the checksum of the parameter
    select par, iif(par is null, null, CHECKSUM(par)) chk 
    from r
),
x as ( -- lookup the id of the searched record
    select m.id 
    from _big_table m 
    where wide_col_checksum = (select chk from p)),
z as ( -- test if a parameter was found (flag for normal operation)
    select COUNT(*) n 
    from p 
    where chk is not null
)

-- this is the fast output for searched record
select m.*
from _big_table m, x
where (m.id = x.id) --OR (x.id is null) 

union all

-- this is the normal output for all other conditions
select m.*
from _big_table m, z
where z.n = 0 
```

请享用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-29T04:11:26.080

在大多数排序规则中，两个查询可以提供不同的结果，因为`'A'='a'`, 但`CHECKSUM('A')`不等于`CHECKSUM('a')`。即使在 CS_AS 或 BIN 排序规则中，尾随空格也可能是个问题。所以这就是为什么 SQL Server 不能自动使用这样的索引。

# gcc - CPLUS_INCLUDE_PATH 不起作用

> ID：11084123
> 
> 赞同：8
> 
> 时间：2012-06-18T13:38:47.717
> 
> 标签：gcc, include

我已将环境变量设置`CPLUS_INCLUDE_PATH`为`boost`.

```
>echo $CPLUS_INCLUDE_PATH
boost 
```

但它根本不起作用。

```
>g++ parse_utils.cpp
parse_utils.cpp:1:34: fatal error: boost/lexical_cast.hpp: No such file or directory 
```

就是在`.hpp`那条路上。

```
>g++ parse_utils.cpp -Iboost 
(work well) 
```

我认为`CPLUS_INCLUDE_PATH`相当于`-I`选项？

```
>g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T15:53:38.783

您需要在运行 g++ 之前导出变量：

```
export CPLUS_INCLUDE_PATH 
```

# jquery - Watin 不打开在 ajax 中完成的反身问题

> ID：11084124
> 
> 赞同：2
> 
> 时间：2012-06-18T13:38:47.973
> 
> 标签：jquery, ajax, watin

我有一个 AJAX 页面，其中包含一系列反身问题（即，您回答父问题和从页面“取消隐藏”的第二个问题），但 Watin 未能取消隐藏子问题。父问题由是和否单选问题组成。如果我手动单击单选按钮，它会取消隐藏子问题。

我在 Watin 尝试了以下所有方法：

```
tr.RadioButton(Find.ByLabelText(xe.Value)).MouseDown();
tr.RadioButton(Find.ByLabelText(xe.Value)).MouseUp();
tr.RadioButton(Find.ByLabelText(xe.Value)).Checked = true;
tr.RadioButton(Find.ByLabelText(xe.Value)).Focus();
tr.RadioButton(Find.ByLabelText(xe.Value)).KeyPress();
tr.RadioButton(Find.ByLabelText(xe.Value)).KeyDown();
tr.RadioButton(Find.ByLabelText(xe.Value)).MouseEnter();
tr.RadioButton(Find.ByLabelText(xe.Value)).Blur();
tr.RadioButton(Find.ByLabelText(xe.Value)).Change(); 
```

我知道您可能会建议然后执行 FireEvent()，但是当单击单选按钮时，我看不到“onclick()”或其他任何似乎在调用 Javascript 函数的东西。有没有人在他们的 Web 应用程序中处理过 AJAX 反身问题，他们如何在 Watin 中处理这些问题？提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:55:38.943

您能否提供“Ajax 反身问题”定义的链接，因为它没有出现在[http://www.asp.net/search](http://www.asp.net/search)上？

你用什么来查看是否有任何jQuery被调用？我一直在 Firefix 上使用 FireQuery 和 Firebug，否则我无法单独从 HTML 中判断我是否需要做一些额外的事情来触发更改。

我猜想你的这些元素需要通过 JavaScript 触发才能发生变化，这在此处的许多线程中都已讨论过。

# c# - 使用 C# 将 MJPEG 保存到压缩视频文件

> ID：11084125
> 
> 赞同：0
> 
> 时间：2012-06-18T13:39:01.080
> 
> 标签：c#, video, mjpeg

我想将 MJPEG 流从 IP 摄像机转换为压缩视频文件。要访问流，我使用此处找到的 MJPEF 解码器：http: [//channel9.msdn.com/coding4fun/articles/MJPEG-Decoder](http://channel9.msdn.com/coding4fun/articles/MJPEG-Decoder)。如果我使用 avifil32.dll Wrapper 将帧写入 avi 文件，我需要 100MB 1 分钟和 5 fps。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:39:00.443

[试试AForge.NET](http://www.aforgenet.com/framework/)提供的 AVI 编写器：

*   `AForge.Video.VFW.AVIWriter`使用 Video for Windows API
*   `AForge.Video.FFMPEG.VideoFileWriter`使用 FFMPEG 库

每个参数的两个重要参数是`FrameRate`和`BitRate`，试验这些参数以获得您需要的质量/尺寸权衡。

仅供参考，AForge 还包括一个 MJPEG 客户端和一个用于视频运动检测的库。

# java - Android Coverflow：膨胀类 pl.polidea.coverflow.CoverFlow 时出错

> ID：11084126
> 
> 赞同：0
> 
> 时间：2012-06-18T13:39:03.547
> 
> 标签：java, android, android-layout, coverflow, runtimeexception

我尝试在我自己的 android projet 中添加 android coverflow

当 myt 活动启动时，我收到以下错误：

```
06-18 15:32:35.690: E/AndroidRuntime(15146): 
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.accessdev.myproject/com.accessdev.myproject.MainTMP_Activity}: java.lang.RuntimeException: Unable to start activity 

ComponentInfo{com.accessdev.myproject/com.accessdev.myproject.BonsPlansActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class pl.polidea.coverflow.CoverFlow 
```

我的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical"
android:layout_width="fill_parent" android:layout_height="fill_parent">

<view class="pl.polidea.coverflow.CoverFlow" xmlns:coverflow="http://schemas.android.com/apk/res/com.accessdev.myproject"
    coverflow:imageWidth="100dip" coverflow:imageHeight="150dip" android:id="@+id/coverflow" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_marginTop="5dip">
</view>

<pl.polidea.coverflow.CoverFlow xmlns:coverflow="http://schemas.android.com/apk/res/com.accessdev.myproject"
    coverflow:imageWidth="100dip" coverflow:imageHeight="150dip" coverflow:withReflection="true"
    coverflow:imageReflectionRatio="0.2" coverflow:reflectionGap="2dip" android:id="@+id/coverflowReflect"
    android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_marginTop="5dip" />

<TextView android:text="STATUS" android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:padding="5dip" android:id="@+id/statusText"></TextView> 
```

第 7 行是引用了 coverflow 的第一行：

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:43:45.340

似乎您需要使用`pl.polidea.coverflow.CoverFlow`而不是`view`在您的 xml 中，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical"
android:layout_width="fill_parent" android:layout_height="fill_parent">

<pl.polidea.coverflow.CoverFlow class="pl.polidea.coverflow.CoverFlow" xmlns:coverflow="http://schemas.android.com/apk/res/com.accessdev.myproject"
    coverflow:imageWidth="100dip" coverflow:imageHeight="150dip" android:id="@+id/coverflow" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_marginTop="5dip">
</pl.polidea.coverflow.CoverFlow >

<pl.polidea.coverflow.CoverFlow xmlns:coverflow="http://schemas.android.com/apk/res/com.accessdev.myproject"
    coverflow:imageWidth="100dip" coverflow:imageHeight="150dip" coverflow:withReflection="true"
    coverflow:imageReflectionRatio="0.2" coverflow:reflectionGap="2dip" android:id="@+id/coverflowReflect"
    android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_marginTop="5dip" />

<TextView android:text="STATUS" android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:padding="5dip" android:id="@+id/statusText"></TextView>

</LinearLayout> 
```

# c# - 创建 WCF 并将其托管在 IIS 上

> ID：11084130
> 
> 赞同：0
> 
> 时间：2012-06-18T13:39:12.610
> 
> 标签：c#, wcf, https

我看过很多关于这个主题的问题和教程，但似乎没有一个能完全回答我的问题。我正在做一个 3 层项目。我有一个名为 ServiceHandlers 的服务库，它从 microsoft ax 2012 获取数据并将正确的实体放在上面。然后我有一个名为 Services 的 wcf 服务，它从 serviceHandlers 调用这些 get 函数（有对该项目的引用）.. 最后是客户端，它可以是 winform、console 或其他。我的问题是我的老板希望我通过 HTTPS 通信将服务放在本地服务器上。现在，如果我只有服务和客户端部分，这将很容易。我会按照本教程[http://debugmode.net/2010/09/07/walkthrough-on-creating-wcf-4-0-service-and-hosting-in-iis-7-5/](http://debugmode.net/2010/09/07/walkthrough-on-creating-wcf-4-0-service-and-hosting-in-iis-7-5/)) .. 但由于我有 serviceHandler 部分，所以一切似乎都一团糟。我应该怎么办 ？？我的老板正在度假，我没有人要问，所以我现在几乎什么都没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:18:13.230

如果您需要独立[的 WCF 服务，您可以遵循本教程：如何：在 IIS 中托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733766.aspx)。其实你需要创建

*   `/App_code`带有真实 C# 代码文件的文件夹（就像这里复制/粘贴 cs 文件一样）
*   `/bin`包含所有 .DLL 文件的文件夹。您需要一个已经解决所有依赖项的工作程序（不要忘记包括：System.ServiceModel）。您可以从 VS 的 WCF 服务库模板构建项目本身，只需引用您的其他项目/库/资源（**不要忘记将它们与您的项目 .dll 文件一起复制**）
*   在主要的“VirtualFolder”（已转换为 IIS 中的应用程序）中放置 .svc 文件和 web.config 文件。SVC文件构建如下：

    <@ServiceHost language="C#" *Debug="true"* Service="full-name-including-namespace-to-class-that-implements-interface" @>

    希望这将从一开始就起作用。*有无数种可能出错的组合，奇怪的错误和刚刚死去的情况 - 我无法解释所有这些*如果你遇到另一个问题，你可以在这个网站上搜索解决方案

# javascript - tokeninput jquery 插件 - preventDuplicates 不起作用

> ID：11084135
> 
> 赞同：8
> 
> 时间：2012-06-18T13:39:39.710
> 
> 标签：javascript, jquery

我正在使用 jquery 插件 Tokeninput。我需要防止用户输入重复值，Js代码如下：

```
$(document).ready(function () {
    // Configure Tags
    $('#Tags').tokenInput(tagSource(), 
    {
        prePopulate: selectedTags(),
        theme: "facebook",
        propertyToSearch: "Code",
        preventDuplicates: true
     });

    function tagSource() {
        var data = [];
        @if (Model.SourceTags != null && Model.SourceTags.Count() > 0) {
            <text>
                data = @(Html.Raw(Model.SourceTags));
            </text>
        }
        return data;
    }

    function selectedTags() {
        var selectedData = [];
         @if (Model.SelectedTags != null && Model.SelectedTags.Count() > 0) {
            <text>
                selectedData = @(Html.Raw(Model.SelectedTags));
            </text>
        }
        return selectedData;
    }
}); 
```

当我再次选择相同的项目时，输入字段中的现有项目会突出显示，并且没有添加任何内容。

此外，当我选择不同的项目时，第一个项目会突出显示，并且没有添加任何内容。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T20:33:13.707

如果您仍然遇到此问题，我想我可能知道发生了什么。TokenInput 假定数据对象的“id”属性拼写为“id”（注意小写）。如果您的 id 属性拼写不同，您所描述的将会发生。供您参考，这发生在 add_token 函数中（在 v1.6.0 tokeninput.js 中的 js 文件中的第 495 行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-23T06:03:15.383

最好的方法是限制下拉搜索列表。通过删除文本字段中的选定项目。

```
"SELECT id, title from job_categories WHERE id NOT IN (".$member->category_id.") AND title LIKE '%%%".$this->input->get('q')."%%' ORDER BY id DESC LIMIT 10" 
```

此查询将从再次选择的列表中删除 prePopulate 值

# r - 为什么这行得通？创建与基本函数同名的逻辑仍然允许使用该函数

> ID：11084136
> 
> 赞同：3
> 
> 时间：2012-06-18T13:39:39.833
> 
> 标签：r

我在这里遇到了一个奇怪的问题：

[https://stackoverflow.com/a/11084038/636656](https://stackoverflow.com/a/11084038/636656)

似乎分配给与基本函数相同的名称仍然允许您使用基本函数：

```
> print <- FALSE
> print
[1] FALSE
> print("hi")
[1] "hi"
> 
> sum <- FALSE
> sum(1:10)
[1] 55
> sum
[1] FALSE 
```

相比之下，将函数分配给与基函数相同的名称不会产生相同的行为：

```
> sum <- function(x) x^2
> sum(1:10)
 [1]   1   4   9  16  25  36  49  64  81 100
> sum
function(x) x^2 
```

我知道这些位于不同的名称空间中，但我对两件事感到好奇：

1.  **为什么**：这是避免难以恢复的行为（例如，如果您覆盖`rm`）的故障保险吗？预测这种行为的原理是什么？

2.  **如何**：按命名空间是否有不同的函数和逻辑查找例程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:59:41.200

在评估对 的调用时`print()`，R 搜索（沿其普通搜索路径）名称为 的**函数**`print`。您的对象`print <- TRUE`具有正确的名称，但不是函数，因此搜索会直接跳转到具有正确名称的第一个函数。

[这是 John Chambers 的解释，来自“数据分析软件：使用 R 编程](http://www.springer.com/statistics/computanional+statistics/book/978-0-387-75935-7)”中的“第 13 章：R 的工作原理” 。

> 函数调用的评估从查找与名称对应的函数开始。“寻找”的规则与上面提到的评估名称的一般规则相同，只是评估器会默默地忽略任何找到的不是函数的对象，允许与非本地函数同名的本地非函数对象，人们倾向于为对象指定名称（例如“c”）所激发的让步。

（我特别喜欢最后一点，这是“人们倾向于……的一种让步”；）

* * *

由于您对此感兴趣，因此也值得一看`match.fun()`，它旨在“提取所需的函数对象，同时避免与其他类型的对象进行不希望的匹配”。它包括以下行，很好地说明了评估者和评估者使用的策略：

```
FUN <- get(as.character(FUN), mode = "function", envir = envir) 
```

# javascript - 使用 jquery 的按钮和对话框

> ID：11084137
> 
> 赞同：0
> 
> 时间：2012-06-18T13:39:45.083
> 
> 标签：javascript, jquery, button, dialog

我有一个按钮（假设它的名称是 123），如果我按下它，就会出现一个对话框窗口（假设是 window1）。Window1 有 1 个按钮。如果我按下按钮，则会出现另一个对话框窗口，其中也有 1 个按钮和 2 个单选按钮。在用户做出决定并按下按钮 2 后，两个对话窗口都应该消失。

我用

```
$("dialog1").remove();
$("dialog2").remove(); 
```

之后，如果我想再次按 123，则第一个（以及第二个）窗口不会出现。`.detach()`不是我需要的。一切都在同一个会话中。我怎样才能让 then 再次出现？我应该使用什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:07:07.917

`$.hide()`和`$.show()`，分别 - 如果您不想使用它们，请更新您的问题并解释为什么这些（或`.detatch()`）不是可行的选项。另一种方法是重新创建 DOM 元素，例如使用`$("<div id="dialog1">stuff</div>");`，但这与隐藏/显示和/或分离相比效率非常低。

# ruby - 使用 Watir Webdriver 和所见即所得

> ID：11084148
> 
> 赞同：0
> 
> 时间：2012-06-18T13:40:44.513
> 
> 标签：ruby, watir, watir-webdriver

使用 Watir Webdriver 我能够检测到所见即所得的 ckeditor 存在，但是任何尝试`send_keys`输出一个空白字符串？

我可以使用 ckeditor 运行上面的测试而不会出现问题：

```
require "watir-webdriver"
b = Watir::Browser.new :firefox
b.goto "http://ckeditor.com/demo"
b.frame(:title => 'Rich text editor, editor1, press ALT 0 for help.').send_keys "hello world" 
```

但是，我在为自己的测试运行此代码时遇到问题：

```
b.frame(:title, "Rich text editor, currentItem.contentText, press ALT 0 for help.").exists?
=> true

b.frame(:title, "Rich text editor, currentItem.contentText, press ALT 0 for help.").send_keys 'text'
=>"" 
```

没有任何东西呈现给所见即所得。网页上的其他框架允许我编辑文本字段。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:05:06.850

一般来说，将密钥发送到整个帧是一个坏主意。

根据我自己使用 FCKEditor 的经验，如果我找到可以响应 .send_keys 方法的*特定元素*，我只会让它工作。

这是一个对我有用的例子（我猜我的第一个框架元素引用将等同于你使用“标题”标签点击的框架元素）：

```
@browser.frame(:id, "body___Frame").td(:id, "xEditingArea").frame(:index=>0).send_keys "your text here" 
```

# asp.net - 认证后 User.Identity.Name 为空

> ID：11084151
> 
> 赞同：0
> 
> 时间：2012-06-18T13:40:52.920
> 
> 标签：asp.net, asp.net-mvc, facebook

我正在尝试使用 facebook connect 在我的 ASP.NET MVC 应用程序中对用户进行身份验证。我编写了控制器，它获取 facebook access_token、facebook 用户的电子邮件，然后使用以下方法对用户进行身份验证：

```
FormsAuthentication.SetAuthCookie(loggedUserEmail, true); 
```

毕竟，我将用户重定向到主页，在那里我尝试获取 User.Identity.Name 以显示登录用户的名称（在这种情况下，我猜是电子邮件）。不幸的是，User.Identity.Name 为空。但是，身份验证过程似乎可以正常工作，因为 Request.IsAuthenticated 返回 true ......

```
@if (Request.IsAuthenticated) {
    <p>
        @* ###THIS LINE THROWS EXCEPTION AS User.Identity.Names IS NULL### Hello, @Html.ActionLink(User.Identity.Name, "ChangePassword", "Account", routeValues: null, htmlAttributes: new { @class = "username", title = "Change password" })!*@ 
        @Html.ActionLink("Log off", "LogOff", "Account")
    </p>
} 
```

为什么没有启动 User.Identity.Name 的任何想法？谢谢，

巴特

PS代替

```
FormsAuthentication.SetAuthCookie(loggedUserEmail, true); 
```

我也试过

```
var authCookie = FormsAuthentication.GetAuthCookie(loggedUserEmail, true);
var ticket = FormsAuthentication.Decrypt(authCookie.Value);
// We want to change the expiration of our forms authentication cookie
// to match the token expiration date, but you can also use your own expiration
DateTime expiration = ticket.IssueDate.AddSeconds(facebookTokenExpirationSeconds);
var newTicket = new FormsAuthenticationTicket(ticket.Version, ticket.Name,
                  ticket.IssueDate, expiration, 
                  ticket.IsPersistent, facebookName);

// Encrypt the cookie again
authCookie.Value = FormsAuthentication.Encrypt(newTicket);

// Manually set it (instead of calling FormsAuthentication.SetAuthCookie)
Response.Cookies.Add(authCookie); 
```

但它也不`User.Identity.Names`包含任何东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:30:25.600

也许我认为，重定向页面后访问令牌已过期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T21:33:04.933

我不相信在发出下一个请求之前会设置身份。过去，我通过手动将 HttpContext.Current.User 设置为在执行登录逻辑后从 Forms Auth 票证创建的 IPrincipal 来解决此问题。

像这样的东西（您的里程可能会有所不同）：

```
var authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
var ticket = FormsAuthentication.Decrypt(authCookie.Value);
var identity = new GenericIdentity(ticket.Name);
var principal = new GenericPrincipal(identity, null);
HttpContext.Current.User = principal 
```

# java - 在 Eclipse 插件中在运行时向用户询问“对象”

> ID：11084152
> 
> 赞同：0
> 
> 时间：2012-06-18T13:40:57.190
> 
> 标签：java, eclipse, reflection, eclipse-plugin, runtime

我正在开发一个用于处理 Java 源文件的 Eclipse 插件。

当用户在方法中有插入符时，我想提示用户输入该方法的参数。我知道参数的类型，我只是不知道如何最好地要求用户在这里输入。

一个示例方法：

```
public void Test(int[] numbers) {
    for (int number : numbers) {
    System.out.println(number);
    }
} 
```

在该示例中，我想提示用户输入 int 数组并根据输入创建它。

我希望我问的问题足够清楚，否则请随时发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:43:43.843

[您可以为org.eclipse.jdt.ui.javaCompletionProposalComputer](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/extension-points/org_eclipse_jdt_ui_javaCompletionProposalComputer.html)提供贡献。这将允许您的提案参与 Java 编辑器中的内容辅助。`Preferences>Java>Editor>Content Assist>Advanced`您可以在首选项页面中查看其他贡献的示例。您可以看到一个示例实现[SWTTemplateCompletionProposalComputer](http://git.eclipse.org/c/jdt/eclipse.jdt.ui.git/tree/org.eclipse.jdt.ui/ui/org/eclipse/jdt/internal/ui/text/java/SWTTemplateCompletionProposalComputer.java)。

另一种可能性是应用模板。请参阅模板视图。插入模板后，用户输入由这些绿色小方块管理。内容辅助和提供模板之间存在一些交叉。

# quickfix - Quickfix 是否会在关闭 FIX 连接之前回答挂起的心跳请求？

> ID：11084154
> 
> 赞同：0
> 
> 时间：2012-06-18T13:41:02.983
> 
> 标签：quickfix

基本上，我在接受器上随机收到“心跳超时”消息，可能每天一次，而心跳配置为 60 秒，但我不知道为什么会这样。

我每天都会关闭并重新打开启动器很多次。这可能是那些心跳超时的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:52:03.047

心跳配置定义了引擎发送心跳消息的频率，而不是这些消息的超时时间，这由 TCP/IP 定义。如果您经常连接和断开连接，请确保在断开连接之前发送注销消息，而不是仅仅切断连接。系统使用这些心跳消息检测断开连接，因此超时意味着延迟已经变得太高以至于数据包被丢弃，或者另一端没有引擎可以连接。如果您经常连接和断开连接，那么您很可能会这样做，而 æther 中有一条心跳消息，这将导致心跳超时。

# android - 实现滑动视图的最佳/最干净的方法是什么？

> ID：11084156
> 
> 赞同：0
> 
> 时间：2012-06-18T13:41:04.673
> 
> 标签：android, swipe

它应该类似于 android 主屏幕。哪种方式性能最好，是编程中最常见和最干净的方式？页数将在 5 到 25 页之间，这将是动态创建的。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:49:12.420

使用[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html). 它适用于 类型`Adapter`，因此动态添加页面很简单，它也是官方的并且具有良好的性能，因此它应该非常适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T12:40:37.883

对于要添加的页面数量，我建议使用[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)。**如果页面数量很大，**
这是 Google 推荐的使用滑动视图的方法。

 **其他分页适配器的问题在于它们将页面保存在内存中，这会占用大量资源并使您的应用程序效率低下。

使用 FragmentStatePagerAdapter，页面不会保存在内存中，每次离开前台时它们都会被销毁。这将节省宝贵的资源并使您的应用程序快速运行！！！

通过这个和适当的生命周期处理，您的应用程序将符合 Google 标准，同时提供出色的用户体验。

Google 的 android 页面的开发人员部分有一个教程，用于使用 FragmentStatePagerAdapter 创建滑动视图。[使用选项卡创建滑动视图](http://developer.android.com/training/implementing-navigation/lateral.html)。

希望这有帮助！！！**

# unit-testing - 有没有办法定义两个不同的 Testng 侦听器的运行顺序？

> ID：11084157
> 
> 赞同：2
> 
> 时间：2012-06-18T13:41:14.527
> 
> 标签：unit-testing, automated-tests, testng, listeners

我有两个 testng 听众。一种用于创建带有测试运行结果的报告 html 文件，另一种用于将结果写入数据库。html 文件必须可用，才能将它们写入数据库，所以我必须控制运行顺序。

是否有任何配置可能性或让侦听器相互通信的方法？我在 pom.xml 中使用带有 listener 属性的 maven。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T06:44:17.247

不。也许您可以创建自己的记者，按照您想要的顺序调用这两个？

# jquery - 在ajax函数中使用查询字符串

> ID：11084161
> 
> 赞同：0
> 
> 时间：2012-06-18T13:41:25.157
> 
> 标签：jquery

我正在尝试做一个简单的 AJAX 函数来从查询字符串发送数据，并附加 DIV。.我尝试了各种不同的方法，但没有一个会更新 div。如果它更新，它返回 NULL，否则它只是转到 request.php 页面。如果我在点击事件下移动阻止默认功能，它什么也不做。任何帮助，将不胜感激！！TIA

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
$(function()
{
    $("#link").click(function(e)
    {

        $.ajax(
                {
                    type    : "GET",
                    url     : "request.php",
                    data    : { id: link.attr('id') },
                    success : function(response)
                    {
                        $("#ajaxresponse    div").fadeOut("fast", function()
                        {
                            $("#ajaxresponse div").remove();
                            $("#ajaxresponse").append($(response).hide().fadeIn());
                        });

                    }
                });

        e.preventDefault();
    });
});

</script>
</head><body>
<h1>
    AJAX with PHP
</h1>
<div class="content">

<a href="request.php?id=1" id="link" data-id="1" >Submit Link</a>

</div>
<div id="ajaxresponse">
    <div>please submit the form</div>
</div> 
```

request.php 如下：

```
<?php
$username = $_GET['id'];

echo getTemplate($username);

function getTemplate($username)
{
return '<div class="box">
    <h1>The ID is</h1>
    <div class="meta">username: '.$username.'</div>
</div>';

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:44:41.590

我猜您正试图以错误的方式读取链接的 id 值。这应该有效。

```
$(function()
{
    $("#link").click(function(e)
    {
       var link=$(this);
       e.preventDefault();
        $.ajax(
                {
                    type    : "GET",
                    url     : "request.php",
                    data    : { id: link.attr('id') },
                    success : function(response)
                    {
                        $("#ajaxresponse div").fadeOut("fast", function()
                        {
                            $("#ajaxresponse div").html(response).fadeIn();
                        });

                    }
                });   

    });
}); 
```

你甚至可以使用`get`jQuery ajax 调用的简短版本，方法类型为`GET`.

```
$(function()
{
    $("#link").click(function(e)
    {
       var link=$(this);
       e.preventDefault();
       $.get("request.php?id="+link.attr('id'),function(response){
               $("#ajaxresponse div").fadeOut("fast", function()
               {
                     $("#ajaxresponse div").html(response).fadeIn();
               });   
       });             
    });
}); 
```

# macos - 运行脚本以在网络 OSx 上自动挂载服务器

> ID：11084169
> 
> 赞同：0
> 
> 时间：2012-06-18T13:41:44.873
> 
> 标签：macos

所以，我家有一台 100G 的服务器，每个人都可以保存东西。我有一个 1 TB 的新服务器，并且希望人们开始保存到这台服务器，因为它更大。我家的每个人都使用 macbook，所以是否可以编写一个脚本让人们自动挂载到这个新服务器而不是手动连接到它？我知道它可以手动完成，但编写脚本似乎是一个可重用的工具，而且效率更高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:11:47.007

知道了。

```
 myName to do shell script "whoami"
try
    mount volume "smb://server/"
end try 
```

# c# - 抽象类层次结构中的 IDisposable 实现

> ID：11084172
> 
> 赞同：0
> 
> 时间：2012-06-18T13:41:51.750
> 
> 标签：c#, .net, abstract-class, idisposable

我有以下类层次结构 -

```
//Abstract Class1 in library1 (Can't modify this)
public abstract class absClass1 : IDisposable
{
    public abstract int AddTwoNumbers(int Num1, int Num2);
    // Some other overrides, abstract methods and concrete methods

    void Dispose()
    {
       // Standard Dispose impl.
    }
}

//Abstract Class2 in library2
public abstract class absClass2 : absClass1
{
    //Implementing AddTwoNumbers
    public override int AddTwoNumbers(int Num1, int Num2)
    {
       return Num1+Num2;
    }

    public abstract int MultiplyTwoNumbers(int Num1, int Num2);

    // Some other overrides, abstract methods and concrete methods

    protected override void Dispose(bool disposing)
    {
        if (!IsDisposed)
        {
            //Cleanup
        }

        base.Dispose(disposing);
    }
}

//Derived class from absClass2 in library3
public sealed class absDerived1 : absClass2
{
    //Implementing MultiplyTwoNumbers
    public override int MultiplyTwoNumbers(int Num1, int Num2)
    {
       return Num1*Num2;
    }

    // Some other overrides, abstract methods and concrete methods

    protected override void Dispose(bool disposing)
    {
        if (!IsDisposed)
        {
            // Cleanup
        }

        base.Dispose(disposing);
    }
}

//... Some more implementation of absClass2 like absDerived2 etc.
//  can be there in other library4... 
```

我想同时在 和 中处理对象，`absClass2`在`absDerived`这两个类中覆盖 Dispose(bool) 有什么问题吗？这个设计有问题吗？如何改进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:51:05.927

这是正确的，无论您拥有的*引用*类型如何，如果*对象*是`absDervied`那么**一旦 absClass1 类 Dispose() 调用虚拟 Dispose(bool)**然后调用`Dispose()`引用将调用`Dispose`所有类的方法到`absClass1`.

该方法（on `absClass1`）调用虚拟方法`Dispose(bool)`，该方法调用最派生的方法（on `absDerived`），`base.Dispose(disposing)`调用最近的基类（即`absClass2`）上的方法，该基类还包含`base.Dispose(disposing)`调用方法的调用`absClass1`。

将该类结构放在控制台应用程序中，将一些 WriteLine 语句放在 Dispose 方法中，您会看到它们在`Dispose()`被调用时全部触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:51:15.253

[这目前不会编译，但由于你没有问为什么它不能编译，我猜你只是`void Dispose()`为了简洁而省略了定义。]

只要您`base.Dispose`正确调用并且只担心将本地内容放置到当前类而不是基类中，这将很好 - 因为您依赖于`base.Dispose`为您执行此操作。

调用`base.<member>`只是调用当前类型的直接基类型，因此在您的情况下`absDerived`转到`absClass2`，转到`absClass`。

我唯一的观察是在调用`base.Dispose`. 根据内容的关联方式，您可能希望首先处理基本内容，然后是当前类型 - 但这完全取决于您实际处理的内容以及顺序是否重要。

# sql - 尝试在 ubuntu 中使用 RODBC 连接到 ODBC 服务器

> ID：11084173
> 
> 赞同：7
> 
> 时间：2012-06-18T13:41:52.157
> 
> 标签：sql, sql-server, r, odbc

我收到错误消息：

```
 [RODBC] ERROR: state 01000, code 0, message [unixODBC][Driver Manager]Can't open lib 'SQL Server' : file not found
 2: In odbcDriverConnect("driver={SQL Server};server=*******;database=****;trusted_connection=true") :
 ODBC connection failed 
```

谁能提供有关安装 ODBC 驱动程序以使其与 RODBC 一起使用的详细说明？

注意：我正在尝试连接到 MSSQL Server

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T20:21:33.450

在我的工作中，我们使用 Centos 5.8。当我需要连接到我们的 MS-SQL 服务器时，我使用 FreeTDS 驱动程序。我在这里多谈一点：[https](https://stackoverflow.com/a/10196098/1332389) ://stackoverflow.com/a/10196098/1332389 ，包括我安装的包和依赖项。

示例连接字符串可能如下所示：

```
data_odbc <- odbcDriverConnect(connection="Driver=FreeTDS;
                                           Server=dataserver1\\instancename(default: master);
                                           Port=1433;        
                                           Database=database_01;
                                           Uid=data_mgmt;
                                           Pwd=placeholder") 
```

我们将 odbcinst.ini 文件（在 /etc/ 中）配置为：

```
# FreeTDS Drivers
# Manual setup, used for MS SQL
[FreeTDS]
Description     = FreeTDS for MSSQL
# 32 bit
Driver          = /usr/lib/libtdsodbc.so
Setup           = /usr/lib/libtdsS.so
# 64 bit
Driver64        = /usr/lib64/libtdsodbc.so
Setup64         = /usr/lib64/libtdsS.so
FileUsage = 1 
```

自从设置它以来，我没有任何问题。希望这会有所帮助 - 如果您有更多问题，我可以尝试回答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T21:36:29.530

我在 Linux 上使用带有 RJServer 的远程 R 会话，在 Eclipse 下从 StatET 连接到它时遇到了类似的问题。错误如下所示：

[RODBC] 错误：状态 01000，代码 0，消息 [unixODBC][驱动程序管理器]无法打开 lib '/usr/local/easysoft/sqlserver/lib/libessqlsrv.so'：找不到文件

解决这个问题的困难在于错误消息具有误导性：消息中显示的文件是完全可见的（我可以测试它）。“秘密”是“找不到文件”是指另一个依赖库。

底线：我在远程会话中使用的 LD_LIBRARY_PATH 中添加了一些元素，在我的例子中是：/usr/local/easysoft/unixODBC/lib:/usr/local/easysoft/lib

要弄清楚您需要添加什么，您应该查看缺少的内容。在有问题的库上使用“ldd”命令。

# php - 为什么 。（点）和空格在 PHP $_GET 数组中更改为 _（下划线）？

> ID：11084175
> 
> 赞同：7
> 
> 时间：2012-06-18T13:42:06.960
> 
> 标签：php, syntax, get

在[PHP 文档](http://www.php.net/manual/en/language.variables.external.php)中，我发现了以下部分：

> 变量名中的点和空格被转换为下划线。例如`<input name="a.b" />`变成`$_REQUEST["a_b"]`.

我知道虽然 PHP 不能为 变量创建变量`$a.b`，`register_globals`但这种解释并没有让我完全满意。虽然确实`register_globals`必须这样做（或者，即使不会因为`${'a.b'}`），但为什么它会影响全局变量，比如`$_GET`从技术上讲你必须从一开始就给出字符串（所以 PHP 程序员不能忘记`${'a.b'}`一些东西在)的情况`$_GET`。

为什么它只影响点和空格？虽然我可以理解点（`<input type=image>`），但为什么它会影响空格。那么连字符呢？

# javascript - XML获取具有特定属性的特定节点

> ID：11084178
> 
> 赞同：0
> 
> 时间：2012-06-18T13:42:17.697
> 
> 标签：javascript, xml

嗨，我是 XML 和 javascript 的初学者。但我想选择一个包含“保险遗嘱”的节点。我想这样做是因为有相同节点名称的节点可以包含不同的文本。XML 文件可能如下所示。

```
<Description>Hi hello</Description>
<Description>insurance will</Description>
<Description>come here</Description>
<Description>lalaland</Description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:01:39.260

```
var descs = document.getElementsByTagName( 'Description' );
for ( var i = 0, len = descs.length; i < len; i++ ) {
    if ( descs[ i ].textContent === 'insurance will' ) {
        // This node is the right one!
    }
} 
```

# google-chrome - 我只能在 Chrome 浏览器中停用 CSS3 动画吗？

> ID：11084184
> 
> 赞同：0
> 
> 时间：2012-06-18T13:42:38.287
> 
> 标签：google-chrome, css-transitions

因为我的 CSS3 动画在 MacOS X 10.7 上的 Chrome 浏览器 21.0 中使用了超过 50% 的 CPU。但不是在 Safari 中（也使用 Webkit）。在 Firefox 中，它也适用于低 CPU。

我看到的唯一方法是在 Chrome 中停用我的动画。有没有办法做到这一点？也许没有Javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:46:49.013

您可以检测服务器端使用的浏览器访问者。但我建议您使用 javascript 执行此操作：

```
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1; 
```

# javascript - Javascript：如何检查是否已将某些内容添加到 DOM？

> ID：11084185
> 
> 赞同：0
> 
> 时间：2012-06-18T13:42:41.517
> 
> 标签：javascript, ajax, dom, loading

看看[这个网站](http://www.thisiswhyimbroke.com)。当您向下滚动时，它会自动加载更多页面。假设我有一个在 document.load 上运行的事件。当您向下滚动并看到更多内容时，有没有办法让它再次这样做？

值得一提的是，我正在尝试设计一种方法来捕获所有这样的实例，而不仅仅是我提到的特定站点，当它进行无限滚动时，它很可能有一些东西可以锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:07:43.750

有已弃用的[DOM3 Mutation Events](https://developer.mozilla.org/en/DOM/Mutation_events)，例如`DOMSubtreeModified`，只要发生特定的突变事件就会触发。出于性能和兼容性的原因，MDN 强烈反对使用它们，但它们确实存在。我也相信他们没有提供关于发生了什么*样*的突变或任何类型的前后比较的信息。

[DOM4 Mutation Observers](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html)有一个 W3C 草案，目前可能在某些浏览器中实现。我知道它至少在 Chrome 中实现，使用`WebKitMutationObserver`如下：

```
var observer = new WebKitMutationObserver(function(mutations, observer) {
    // fired when a mutation occurs
    console.log(mutations, observer);
    // ...
});

// define what element should be observed
// and what types of mutations trigger the callback
observer.observe(document, {
  subtree: true,
  attributes: true
  //...
}); 
```

草稿中有完整的[突变属性](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutationobserver)列表（向下滚动到绿色框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:45:03.510

您所描述的行为通常被称为“[无限滚动](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)”。

**编辑：**我上面的回答并没有真正回答你的问题。

我能想到的最接近的一种真正通用的处理方式，即使不是您的代码向 DOM 添加元素，也是使用[DOM Level 3 API Mutation events](https://developer.mozilla.org/en/DOM/Mutation_events)，但它们**现在已被弃用，不应使用.**

[DOM 级别 4 中的突变观察者](https://developer.mozilla.org/en/DOM/DOM_Mutation_Observers)提案的工作正在进行中，但这些尚未标准化。但是，[请查看本文](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)以获取示例实现。

# java - Eclipse CompareEditor 检测来自不同编辑器的保存

> ID：11084187
> 
> 赞同：3
> 
> 时间：2012-06-18T13:42:50.267
> 
> 标签：java, eclipse-plugin, editor, compare

我对自定义 Eclipse 比较编辑器和文件编辑器有疑问。

从文件编辑器保存时，比较编辑器保持脏标志，文件编辑器被保存。反向工作中的相同内容，比较和文件编辑器都被标记为非脏文件。

比较编辑器是否有办法检测文件更改并删除脏标志，即使文件已保存，当尝试关闭比较编辑器时也会导致打开保存对话框。

有没有人遇到过类似的问题？找到解决方案了吗？

# jquery - 附加一个由颜色选择器选择的背景颜色的div？

> ID：11084189
> 
> 赞同：0
> 
> 时间：2012-06-18T13:42:55.520
> 
> 标签：jquery, html, append, color-picker

我有一些带有附加按钮的输入字段，它将输入值附加到 div。多亏了这个 jQuery [colorpicker](http://laktek.com/2008/10/27/really-simple-color-picker-in-jquery/)，我还能够“追踪”选择了哪种颜色

`$('#color1').val()`

因此，现在当单击附加按钮时，它会将输入值以纯文本形式附加到 div 中。但我想要完成的是另一个小 div（头像）出现在颜色选择器中选择的颜色中。让我在 JS 中演示我的意思。

HTML：

```
<form>
    <div>
        <input type="text" name="price" id="price" value="price" />
        <input type="text" name="brand" id="brand" value="brand"/>
        <br/>
        <input type="radio" id="up" name="direction" value="up" />  up
        <input type="radio" id="down" name="direction" value="down" /> down
        <input type="radio" id="left" name="direction" value="left" />  left
        <input type="radio" id="right"name="direction" value="right" /> right
        <button id="addbutton">add it</button>
      </div>

</form>
      <div><label for="color1">Color 1</label>
<input id="color1" name="color1" type="text" value="#333399" /></div>

<div id="sidebar"><h1>sidebar</h1></div> 
```

JS：

```
var counter = 0;
$(document).ready(function(){

$('#addbutton').click(function() {
    var $addDiv = $('#sidebar');
    $addDiv.append(
    $( '<div></div>', { id: 'item' } )
        .html( $( '#input1' ).val() + ' ' + $( '#input2' ).val() + ' ' + $('input[name="category"]:checked').val() + ' ' +("<div id="avatar" backgound="color from colorpicker"></div>")+ ' ' +$('#color1').val()));
   $('.removebtn').live('click', function() {
        $(this).parent().remove();
    });
    return false

});

$('#color1').colorPicker();
}); 
```

我的问题是：我怎样才能用颜色选择器完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:32:41.900

您应该首先附加“avatarDiv”并为其赋予正确的颜色，然后将其附加到 div。最后一步是将其附加到侧边栏。

为了清楚起见，我将其分为两个变量：

```
$(document).ready(function(){
  var counter=0; //should not be in global namespace...
  $('#addbutton').click(function() {
      var $avatarDiv = $('<div>').css('background-color',$('#color1').val()).css('height','16px').css('width','16px').css('float','left');
      var $addDiv = $('<div>', { id: 'item'+counter } ).text('your input val').append($avatarDiv);
      $('#sidebar').append($addDiv);
   counter++;

  });
}); 
```

# coldfusion - 使用 ColdFusion 的 SAML 服务提供商

> ID：11084193
> 
> 赞同：2
> 
> 时间：2012-06-18T13:43:22.203
> 
> 标签：coldfusion, saml-2.0

我正在尝试使用 ColdFusion 9 对 SAML 2.0 进行测试。我想要的只是使用 SAML 生成的 xml 并进行处理。我正在关注此处给出的文章[http://blog.tagworldwide.com/?p=19（存档版本）](http://web.archive.org/web/20111023072341/http://blog.tagworldwide.com/?p=19)

但是当我启动 xmlSignatureClass ( `xmlSignature = xmlSignatureClass.init(docElement.getElementsByTagNameNS("http://www.w3.org/2000/09/xmldsig","Signature").item(0),javacast("string",""));`) 时出现错误。

我的测试代码如下 -

```
<cfxml variable="samlAssertionXML">
<Response xmlns="urn:oasis:names:tc:SAML:2.0:protocol" Destination="https://dummy.com" ID="_4b25fcd29ca107018e952b0ee8606cf9f1a5" IssueInstant="2012-06-01T14:21:18Z" Version="2.0">
    <ns1:Issuer xmlns:ns1="urn:oasis:names:tc:SAML:2.0:assertion" Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">DummyIdP</ns1:Issuer>
    <Status><StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"/></Status>
    <ns2:Assertion xmlns:ns2="urn:oasis:names:tc:SAML:2.0:assertion" ID="_302d1f1e2e5b39845923a3a21af3906f3e85" IssueInstant="2012-06-01T14:21:18Z" Version="2.0">
        <ns2:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">DummyIdP</ns2:Issuer>
        <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig">
            <ds:SignedInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig">
                <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n" xmlns:ds="http://www.w3.org/2000/09/xmldsig"/>
                <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsigrsa-sha1" xmlns:ds="http://www.w3.org/2000/09/xmldsig"/>
                <ds:Reference URI="_302d1f1e2e5b39845923a3a21af3906f3e85" xmlns:ds="http://www.w3.org/2000/09/xmldsig">
                    <ds:Transforms xmlns:ds="http://www.w3.org/2000/09/xmldsig">
                        <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsigenveloped-signature" xmlns:ds="http://www.w3.org/2000/09/xmldsig"/>
                        <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n" xmlns:ds="http://www.w3.org/2000/09/xmldsig"/>
                    </ds:Transforms>
                    <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsigsha1" xmlns:ds="http://www.w3.org/2000/09/xmldsig"/>
                    <ds:DigestValue xmlns:ds="http://www.w3.org/2000/09/xmldsig">JUtQwTxlNEEwvzF9URMq4RFk1gM=</ds:DigestValue>
                </ds:Reference>
            </ds:SignedInfo>
            <ds:SignatureValue xmlns:ds="http://www.w3.org/2000/09/xmldsig">
                EHKr7088SiCcgviN56jgupiZlvVItJh3EHXNX/YAlvUuyN05m3beH4IblfKI5KnmTxRsEokKgAAn FvdG9Cv7yA7+m+D9WwmG7uRXQq0aLaoZM9+erGKvFuVjqQ5gGBM0XZBSpGHGHlPSSzmX/PwfuAg4 gvcOjoKfPQHJzArPYFAGD2MAFaS9qedr6kRlv19Jf5HnguyK670MgV9aUTwkWtS2P79K1GGreQP/ yDoEud7NXZw7QmlGrv9WHJdQf4z4jfJ8ZPatMMJH8B+rx/vzCpvbvM3a+XBaG8ZbmHJ2Lse+1ALW UWhktUXI5KIVZaLqK7kH+W7CVvCg1gbQ4oYdWg== 
            </ds:SignatureValue>
            <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig">
                <ds:X509Data xmlns:ds="http://www.w3.org/2000/09/xmldsig">
                    <ds:X509Certificate xmlns:ds="http://www.w3.org/2000/09/xmldsig">
                        MIIGQjCCBSqgAwIBAgIQJGHmoBo8/XCv/LcgrNMwCjANBgkqhkiG9w0BAQUFADCBujELMAkGA1UE BhMCVVMxFzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR…truncated for ease of reading….DJge Mpl05h0dZIN5y40i3YBRyBWfbzt2dRA+d/B2lAyplxoQK73q4mpR8TmmqpybLF0pfktAZSSS8hUq 47Tl0i4gVH94qQ== 
                    </ds:X509Certificate>
                </ds:X509Data>
            </ds:KeyInfo>
        </ds:Signature>
        <ns2:Subject>
            <ns2:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified">A439237</ns2:NameID>
            <ns2:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
                <ns2:SubjectConfirmationData NotOnOrAfter="2012-06-01T14:22:48Z" Recipient="https://dummy.com"/>
            </ns2:SubjectConfirmation>
        </ns2:Subject>
        <ns2:Conditions NotBefore="2012-06-01T14:20:48Z" NotOnOrAfter="2012-06-01T14:22:48Z">
            <ns2:AudienceRestriction><ns2:Audience>
                    CBTest
                </ns2:Audience></ns2:AudienceRestriction>
            <ns2:AudienceRestriction><ns2:Audience>
                    DummyIdP
                </ns2:Audience></ns2:AudienceRestriction>
        </ns2:Conditions>
        <ns2:AuthnStatement AuthnInstant="2012-06-01T14:21:17Z" SessionIndex="3DiXDmQrg1TbVwcP7zwVAmh8qMM=vkXFrA==" SessionNotOnOrAfter="2012-06-01T14:22:48Z">
            <ns2:AuthnContext>
                <ns2:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</ns2:AuthnContextClassRef>
            </ns2:AuthnContext>
        </ns2:AuthnStatement>
        <ns2:AttributeStatement>
            <ns2:Attribute Name="login" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified"><ns2:AttributeValue>
                    A439237
                </ns2:AttributeValue></ns2:Attribute>
            <ns2:Attribute Name="first_name" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified"><ns2:AttributeValue>
                    Carolyn
                </ns2:AttributeValue></ns2:Attribute>
            <ns2:Attribute Name="last_name" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified"><ns2:AttributeValue>
                    Brodginski
                </ns2:AttributeValue></ns2:Attribute>
            <ns2:Attribute Name="email" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified">
                <ns2:AttributeValue>BrodginskiCC@test.com</ns2:AttributeValue>
            </ns2:Attribute>
            <ns2:Attribute Name="company" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified"><ns2:AttributeValue>
                    test
                </ns2:AttributeValue></ns2:Attribute>
        </ns2:AttributeStatement>
    </ns2:Assertion>
</Response>

</cfxml>
</cfoutput>

    <cfset samlAssertionXML= BinaryEncode(CharsetDecode(samlAssertionXML,"utf-8") ,"Base64")/>

    <!--- <cfdump var="#samlAssertionXML#"><cfabort> --->

    <!--- samlAssertionElement = samlAssertionXML.getDocumentElement(); 
    samlAssertionDocument = samlAssertionElement.GetOwnerDocument(); 
    samlAssertion = samlAssertionDocument .getFirstChild(); 
    SignatureSpecNS = CreateObject("Java", "org.apache.xml.security.utils.Constants"); 
    Init = CreateObject("Java", "org.apache.xml.security.Init").Init().init();
    XMLSignatureClass = CreateObject("Java", "org.apache.xml.security.signature.XMLSignature");         
    sigType = XMLSignatureClass.ALGO_ID_SIGNATURE_RSA_SHA1; 
    signature = XMLSignatureClass .init(samlAssertionDocument, javacast("string",""), sigType); 
    samlAssertionElement .insertBefore(signature .getElement(),samlAssertion.getFirstChild());

    TransformsClass = CreateObject("Java", "org.apache.xml.security.transforms.Transforms"); 
    transformEnvStr = TransformsClass.TRANSFORM_ENVELOPED_SIGNATURE; 
    transformOmitCommentsStr = TransformsClass.TRANSFORM_C14N_EXCL_OMIT_COMMENTS; 
    transforms = TransformsClass.init(samlAssertionDocument transforms.addTransform(transformOmitCommentsStr); 
    transforms.addTransform(transformEnvStr); --->

    <cfscript>

        xmlResponse=CharsetEncode(BinaryDecode(samlAssertionXML,"Base64") ,"utf-8"); 
        //writedump(xmlResponse);abort;
        docElement= XmlParse(xmlResponse).getDocumentElement();
        //writedump(docElement);
        SignatureConstants=CreateObject( "Java", "org.apache.xml.security.utils.Constants"); 
        //writedump(SignatureConstants); 
        SignatureSpecNS=SignatureConstants.SignatureSpecNS; 
        //writedump(SignatureSpecNS); 
        xmlSignatureClass = CreateObject("Java", "org.apache.xml.security.signature.XMLSignature"); 
        //writedump(xmlSignatureClass);

        //writedump(docElement.getElementsByTagNameNS("http://www.w3.org/2000/09/xmldsig","SignatureValue").item(0));abort; 
        xmlSignature = xmlSignatureClass.init(docElement.getElementsByTagNameNS("http://www.w3.org/2000/09/xmldsig","Signature").item(0),javacast("string","")); 
        writedump(xmlSignature);abort; 
        keyInfo=xmlSignatureClass.getKeyInfo(); 
        writedump(keyInfo);abort; 
        X509CertificateResolverCN = "org.apache.xml.security.keys.keyresolver.implementations.X509CertificateResolverClass"; 
        keyResolver=CreateObject("Java", X509CertificateResolverCN) .init(); 
        keyInfo.registerInternalKeyResolver(keyResolver); 
        x509cert = keyInfo.getX509Certificate();

    </cfscript> 
```

我得到的错误是 -

```
Unknown canonicalizer. No handler installed for URI http://www.w3.org/2001/10/xml-exc-c14n 
```

有谁曾在 ColdFusion 的 SAML 服务提供商方面工作过？

谢谢，美国航空航天局

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:37:31.653

我发现了问题。因为它是一个coldfusion脚本，我已经从导致问题的xml中删除了一个#。添加转义字符后，它对我来说一切正常

# android - 具有重复背景的 android 形状

> ID：11084194
> 
> 赞同：6
> 
> 时间：2012-06-18T13:43:23.857
> 
> 标签：android, shape, nine-patch

我需要做一个具有这种背景的容器：![在此处输入图像描述](../Images/88554cc05cd6dc866421a3697c221548.png)

背景必须在这个形状内重复（带圆角的矩形）。

因为这是因为我知道用 9patch 不可能做到这一点，所以我研究了形状，但在这里，似乎不可能得到我想要的东西......

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    <corners 
        android:topRightRadius="20dp"
        android:topLeftRadius="10dp"
        android:bottomLeftRadius="0dp"
        android:bottomRightRadius="0dp"/>
    <solid 
        android:color="@color/red"/>

</shape> 
```

我无法将形状链接到我的：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/point1sur4"
    android:tileMode="repeat" /> 
```

而且，我的形状有四个圆角....

希望你能帮忙！谢谢，雷诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:02:26.967

尝试使用 `android:background="@drawable/point1sur4`" 而不是 `android:src="@drawable/point1sur4"`

# mysql - 在实时机器（MySQL）上更新 MyISAM 表

> ID：11084195
> 
> 赞同：0
> 
> 时间：2012-06-18T13:43:27.930
> 
> 标签：mysql, sql, myisam

我需要一种在不影响用户体验的情况下更新实时机器上的表的方法。

我在 MyISAM 引擎上有几张表，每 15 分钟更新一次。更新脚本只是截断表并从选择语句中插入数据。出现问题，然后用户尝试从正在更新的表中查看信息 - 用户体验滞后，显示不正确的信息。

使用 InnoDB 事务很容易，但是 MyISAM 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:45:40.623

正如你自己写的。转移到 InnoDB，或者解释是什么阻止了你这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:48:58.110

如果不能迁移到 InnoDB，我唯一能想到的就是在更新的时候加一层缓存。（例如 APC 或 memcached？）

你甚至可以写一些通常会跳过缓存的东西，当你开始一个更新周期时，将缓存中的当前内容设置为“遥远的未来”，从缓存中提供内容，并在更新完成时使它们失效。

额外的好处是你现在有一个工作缓存系统，也许让一切变得更快:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:00:29.960

如果你必须使用 myISAM，你可以尝试这种事情。您需要使用 5.0 或更高版本。如果不是，请升级。

1.  使用临时名称创建一个新表
2.  填充新表（这是耗时的操作）
3.  锁定您的生产表。
4.  将生产表重命名为其他名称。
5.  将您的临时表重命名为用于生产表的名称。
6.  解锁生产表。
7.  删除旧的生产表（或执行其他操作以重新使用磁盘空间）。

如果您可以使您使用的软件能够对抱怨缺少表的 SQL 错误进行读取，并且只需在一秒钟左右后再次尝试，您可以跳过锁定和解锁步骤。但是这些步骤可以保护您的系统免受短暂的影响，在重命名随机播放期间，没有具有正确名称的生产表的表。

这是猴子的生意，需要一些调试。但它对我来说效果很好。

（我将“猴子业务”定义为纯粹、优雅、SQL 范围之外的东西。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T14:07:06.117

您可以使用临时表名并向用户显示 VIEW。

步骤是：

*   `CREATE TABLE newtable`
*   `INSERT INTO newtable`
*   [`CREATE OR REPLACE VIEW`](http://dev.mysql.com/doc/refman/5.1/en/create-view.html)
*   `DROP TABLE oldtable`

# apache - 通过同一网络上的 2 台计算机发送信息

> ID：11084197
> 
> 赞同：0
> 
> 时间：2012-06-18T13:43:30.973
> 
> 标签：apache, communication, form-submit

我正在开发一个基于 Web 的应用程序，它将从菜单中收集用户选择，一旦用户按下提交，它将通过同一网络将表单发送到计算机。我研究了套接字以弄清楚它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:46:45.100

我假设您的意思是托管在其他计算机上的 php 页面...

如果是这样，您可以使用 CURL 将其推送到其他页面。

# azure - 在 Sql Azure 中使用 EF 迁移时更改主键

> ID：11084201
> 
> 赞同：4
> 
> 时间：2012-06-18T13:43:42.650
> 
> 标签：azure, entity-framework-4.1, azure-sql-database

我已更改实体中的主键。当我尝试在 SQl Azure 上运行迁移时，它失败并显示“此版本的 SQL Server 不支持没有聚集索引的表。请创建聚集索引并重试。”

```
 public override void Up()
 {
    DropPrimaryKey("User", new[] { "Id" });
    AddPrimaryKey("User", "Username");
 } 
```

我该如何解决这个问题？我唯一能想到的就是创建我自己的 ChangePrimaryKey 方法，它以某种方式默默地创建一个具有正确主键的临时表，复制数据，然后替换原始表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:02:30.147

SQL Azure 不支持没有聚集索引的表。这意味着您不能在没有线索索引的情况下创建新表，也不能在现有表上删除现有的聚集索引。Windows Azure 要求每个表上都有一个聚集索引。

根据 Cihan Biyikoglu (MSFT) 的说法，一种解决方法是使用您喜欢的索引结构创建一个新表，移动数据并在单个事务中重命名表。

使用存储过程，您可以执行以下操作：

```
begin
 tran
 exec
 sp_rename 'db1','db1_old'
 exec
 sp_rename 'db1_new','db1'
 commit
tran 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:50:52.570

基于 Avkash 建议的解决方法。[并从https://stackoverflow.com/a/317864/53970](https://stackoverflow.com/a/317864/53970)获得一些想法，我想出了一个存储过程，它将更改表上的主键。某些表结构可能存在一些问题（到目前为止对我来说还可以）并且它不处理触发器。但它确实复制了结​​构、数据、约束（主要、外部、检查）和索引。将其张贴在这里以防其他人遇到我遇到的同一堵砖墙。

```
create procedure dbo.ChangePK
    @src sysname,
    @pklist nvarchar(4000), --comma list of primary key fields
    @skipfinalrename bit = 1 --set to not perform anything destructive on src table or related tables (for testing)
as

set nocount on

declare @tmpPrefix nvarchar(10)
set @tmpPrefix = 'tmp_'

declare @dest sysname
set @dest = 'tmpCopy'

declare @sql nvarchar(max)
set @sql = ''
--create table script
select @sql = @sql + ' IF EXISTS (SELECT * FROM sysobjects WHERE id = OBJECT_ID(N''' + @dest + ''')  AND OBJECTPROPERTY(id, N''IsTable'') = 1) drop table [' + @dest + ']; create table [' + @dest + '] (' + o.list + ')' + CASE WHEN tc.Constraint_Name IS NULL THEN '' ELSE 'ALTER TABLE ' + @dest + ' ADD CONSTRAINT ' + @tmpPrefix + tc.Constraint_Name + ' PRIMARY KEY ' + ' (' + @pklist + ')' END + ';'
from    sysobjects so
cross apply
    (SELECT 
        '  ['+column_name+'] ' + 
        data_type + case data_type
                when 'sql_variant' then ''
                when 'text' then ''
                when 'decimal' then '(' + cast(numeric_precision_radix as varchar) + ', ' + cast(numeric_scale as varchar) + ')'
                else coalesce('('+case when character_maximum_length = -1 then 'MAX' else cast(character_maximum_length as varchar) end +')','') end + ' ' +
        case when exists ( 
        select id from syscolumns
        where object_name(id)=so.name
        and name=column_name
        and columnproperty(id,name,'IsIdentity') = 1 
        ) then
        'IDENTITY(' + 
        cast(ident_seed(so.name) as varchar) + ',' + 
        cast(ident_incr(so.name) as varchar) + ')'
        else ''
        end + ' ' +
         (case when IS_NULLABLE = 'No' then 'NOT ' else '' end ) + 'NULL ' + 
          case when information_schema.columns.COLUMN_DEFAULT IS NOT NULL THEN 'DEFAULT '+ information_schema.columns.COLUMN_DEFAULT ELSE '' END + ', ' 

     from information_schema.columns where table_name = so.name
     order by ordinal_position
    FOR XML PATH('')) o (list)
cross apply
    (SELECT 
        ',  ['+column_name+'] ' 

     from information_schema.columns where table_name = so.name
     order by ordinal_position
    FOR XML PATH('')) c (columnlist)
left join
    information_schema.table_constraints tc
on  tc.Table_name               = so.Name
AND tc.Constraint_Type  = 'PRIMARY KEY'
cross apply
    (select '[' + Column_Name + '], '
     FROM       information_schema.key_column_usage kcu
     WHERE      kcu.Constraint_Name     = tc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) j (list)
where   xtype = 'U'
AND name        NOT IN ('dtproperties')
and name = @src

print 'create'
print @sql
exec sp_executesql @sql

--now the  inserts
set @sql = ''
select @sql = @sql + ' set identity_insert [' + @dest + '] on; insert into [' + @dest + '] (' + STUFF(c.columnlist,1,2,'') + ') select ' + STUFF(c.columnlist,1,2,'') + ' from [' + @src + '] ; set identity_insert [' + @dest + '] off;'
from    sysobjects so
cross apply
    (SELECT 
        ',  ['+column_name+'] ' 

     from information_schema.columns where table_name = so.name
     order by ordinal_position
    FOR XML PATH('')) c (columnlist)
left join
    information_schema.table_constraints tc
on  tc.Table_name               = so.Name
AND tc.Constraint_Type  = 'PRIMARY KEY'
cross apply
    (select '[' + Column_Name + '], '
     FROM       information_schema.key_column_usage kcu
     WHERE      kcu.Constraint_Name     = tc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) j (list)
where   xtype = 'U'
AND name        NOT IN ('dtproperties')
and name = @src

print 'data'
print @sql
exec sp_executesql @sql

--now the foreign keys
set @sql = ''
select @sql =  @sql + case when tc.Constraint_Name is null then '--no foreign keys' else 'ALTER TABLE ' + @dest + ' WITH CHECK ADD CONSTRAINT ' + @tmpPrefix + tc.Constraint_Name + ' FOREIGN KEY ' + ' (' + STUFF(fk1.list,1,2,'') + ') REFERENCES [' + rctc.table_name + '] (' + STUFF(fk2.list,1,2,'') + ');' end
from    sysobjects so
left join
    information_schema.table_constraints tc on  tc.Table_name = so.Name 
                                AND tc.Constraint_Type  = 'FOREIGN KEY'
left join INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rcc on tc.constraint_name = rcc.constraint_name
left join INFORMATION_SCHEMA.table_constraints rctc on rcc.unique_constraint_name = rctc.constraint_name
cross apply
    (select ', [' + Column_Name + ']'
     FROM       INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu
     WHERE      kcu.Constraint_Name     = tc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) fk1 (list)
cross apply
    (select ', [' + kcu.Column_Name + ']'
     FROM      INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rc
     JOIN      INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu on rc.unique_constraint_name = kcu.constraint_name
     WHERE      rc.Constraint_Name     = tc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) fk2 (list)

where   xtype = 'U'
and name = @src

print 'foreign keys'
print @sql
exec sp_executesql @sql

--now the unique keys
set @sql = ''
select @sql = @sql + case when tc.Constraint_Name is null then '--no unique keys' else 'ALTER TABLE ' + @dest + ' WITH CHECK ADD CONSTRAINT ' + @tmpPrefix + tc.Constraint_Name + ' UNIQUE NONCLUSTERED ' + ' (' + STUFF(fk1.list,1,2,'') + ');' end
from    sysobjects so
left join
    information_schema.table_constraints tc on  tc.Table_name = so.Name 
                                AND tc.Constraint_Type  = 'UNIQUE'
cross apply
    (select ', [' + Column_Name + ']'
     FROM       INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu
     WHERE      kcu.Constraint_Name     = tc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) fk1 (list)

where   xtype = 'U'
and name = @src

print 'unique keys'
print @sql
exec sp_executesql @sql

--now check constraints
set @sql = ''
select @sql = @sql + case when tc.Constraint_Name is null then '--no check constraints' else 'ALTER TABLE ' + @dest + ' WITH CHECK ADD CONSTRAINT ' + @tmpPrefix + tc.Constraint_Name + ' CHECK ' + ' (' + cc.check_clause + ');' end
from    sysobjects so
left join
    information_schema.table_constraints tc on  tc.Table_name = so.Name 
                                AND tc.Constraint_Type  = 'CHECK'
left join INFORMATION_SCHEMA.CHECK_CONSTRAINTS cc on      cc.Constraint_Name     = tc.Constraint_Name

where   xtype = 'U'
and name = @src

print 'check constraints'
print @sql
exec sp_executesql @sql

if (@skipfinalrename = 1)
    return

set xact_abort on

--now we start affecting the src table
begin tran
--drop fk constraints on src referencing current primary key
set @sql = ''
select @sql = @sql + case when tc.Constraint_Name is null then '--no fk constraints to drop' else 'ALTER TABLE ' + rctc.table_name + ' DROP CONSTRAINT ' + rc.Constraint_Name + ';' end
from    sysobjects so
left join information_schema.table_constraints tc on  tc.Table_name = so.Name  
                    AND tc.constraint_type  = 'PRIMARY KEY'
left join INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rc on tc.constraint_name = rc.unique_constraint_name
left join information_schema.table_constraints rctc on  rc.constraint_name = rctc.constraint_name  
where   xtype = 'U'
and name = @src  

--create fk constraints on dest referencing new primary key
declare @sql2 nvarchar(max)
set @sql2 = ''
select @sql2 = @sql2 + case when tc.Constraint_Name is null then '--no fk constraints to drop' else 'ALTER TABLE [' + rctc.table_name + '] WITH CHECK ADD CONSTRAINT ' + @tmpPrefix + rc.Constraint_Name + ' FOREIGN KEY ' + ' (' + STUFF(fk1.list,1,2,'') + ') REFERENCES [' + @dest + '] (' + STUFF(fk2.list,1,2,'') + ');' end
from    sysobjects so
left join information_schema.table_constraints tc on  tc.Table_name = so.Name  
                    AND tc.constraint_type  = 'PRIMARY KEY'
left join INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rc on tc.constraint_name = rc.unique_constraint_name 
left join information_schema.table_constraints rctc on  rc.constraint_name = rctc.constraint_name  
cross apply
    (select ', [' + Column_Name + ']'
     FROM       INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu
     WHERE      kcu.Constraint_Name     = rc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) fk1 (list)
cross apply
    (select ', [' + kcu.Column_Name + ']'
     FROM      INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS rc1
     JOIN      INFORMATION_SCHEMA.KEY_COLUMN_USAGE kcu on rc1.unique_constraint_name = kcu.constraint_name
     WHERE      rc1.Constraint_Name     = rc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) fk2 (list)
where   xtype = 'U'
and name = @src  

----

print 'create new ref fk'
print @sql2
exec sp_executesql @sql2

print 'drop original ref fk'
print @sql
exec sp_executesql @sql

--now we can create the index sql
set @sql2 = ''
select @sql2 = @sql2 + ' IF  NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N''' + @src + ''') AND name = N''' + i.name + ''') 
CREATE ' + i.type_desc COLLATE Latin1_General_CS_AS + ' INDEX ' + i.name + ' ON [' + @src + '] (
    ' +  STUFF(ix.list,1,2,'') + '
) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY];
'
from sys.tables as t 
inner join sys.indexes as i on t.[object_id] = i.[object_id] 
cross apply
    (select ', [' + ac.name + ']'
     FROM       sys.index_columns ic
     inner join sys.all_columns as ac on ic.[object_id] = ac.[object_id] and ic.[column_id] = ac.[column_id] 
     WHERE      ic.[object_id] = i.[object_id] and ic.[index_id] = I.[index_id]
     ORDER BY
        key_ordinal
     FOR XML PATH('')) ix (list)
where 
t.name = @src

--now drop the original table
set @sql = 'drop table [' + @src + '];'
print 'drop original original'
print @sql
exec sp_executesql @sql

--now rename the constraints (remove leading tmp_ in effect)
set @sql=''
select @sql = @sql + ' exec sp_rename ''' + tc.constraint_name + ''', ''' + substring(tc.constraint_name, 5, len(tc.constraint_name)-4) + ''';'
from    sysobjects so
left join
    information_schema.table_constraints tc on  tc.Table_name = so.Name 
where   xtype = 'U'
and name = @dest  

print 'rename constraints to original names'
print @sql
exec sp_executesql @sql

--now rename the table back to the original
exec sp_rename @dest, @src

print 'finally apply the indexes'
print @sql2
exec sp_executesql @sql2

print 'finished' 

commit tran 
```

# xml - ANT - 替换 xml 声明

> ID：11084203
> 
> 赞同：0
> 
> 时间：2012-06-18T13:43:45.713
> 
> 标签：xml, ant, replace, xml-declaration

我有一个 XML 文档，它由附加到它的其他几个 XML 文档组成。因此，文档中有几个 XML 声明会阻止我的 XSLT 正确解析它。我正在尝试使用 ant`replace`和`replaceregexp`任务从文档中删除声明，但它们对文件没有任何作用。这就是我到目前为止所拥有的。

```
<replaceregexp file="${cppUnit.file}" >
    <regexp pattern="&lt;?xml * ?&gt;" />
    <substitution expression="" />
</replaceregexp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:35:41.240

试试这个：

```
<replaceregexp file="${cppUnit.file}" match="&lt;\?xml.*\?&gt;"
     replace="" byline="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:35:27.560

行。这行得通。

```
<regexp pattern="..?xml version=.1.0\. encoding='ISO-8859-1' standalone='yes' ?..." /> 
```

# php - 如何强制 Doctrine 更新数组类型字段？

> ID：11084209
> 
> 赞同：13
> 
> 时间：2012-06-18T13:44:20.093
> 
> 标签：php, arrays, symfony, doctrine, doctrine-orm

我有一个带有数组类型字段的 Doctrine 实体：

```
/**
 * @ORM\Table()
 */
class MyEntity
{
    (...)

    /**
     * @var array $items
     * 
     * @ORM\Column( type="array" ) 
     */
    private $items;

    /**
     * @param SomeItem $item 
     */
    public function addItem(SomeItem $item)
    {
        $this->items[] = $item;
    }

    (...)
} 
```

如果我将元素添加到数组中，则此代码可以正常工作：

```
$myEntityObject->addItems(new SomeItem()); 
$EntityManager->persist($myEntityObject);
$EntityManager->flush(); 
```

`$myEntityObject`以正确的数据保存到数据库中（数组被序列化，在查询数据库时被反序列化）。

不幸的是，当我更改数组中的一个对象而不更改该数组的大小时，如果我试图将更改保存到数据库，Doctrine 什么也不做。

```
$items = $myEntityObject->getItems();
$items[0]->setSomething(123);
$myEntityObject->setItems($items);
$EntityManager->persist($myEntityObject);
$EntityManager->flush();
print_r($myEntityObject); 
```

尽管`print_r`在该代码的最后一行显示更改的对象的数据，但如果数组大小未更改，Doctrine 不知道数组内部的某些内容已更改。有什么方法可以强制 Doctrine 保存在该字段中所做的更改（或轻轻告知它需要保存的该字段中的更改）？

* * *

刚刚在文档中找到了一种解决我的问题的方法：

[http://docs.doctrine-project.org/en/latest/reference/change-tracking-policies.html](http://docs.doctrine-project.org/en/latest/reference/change-tracking-policies.html)

它需要对代码进行大量更改，但它可以工作。有人知道如何为其他字段保留默认跟踪策略并仅将 NotifyPropertyChanged 用于存储数组的字段吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-05T12:12:43.037

Doctrine 使用相同的运算符 (===) 来比较新旧值之间的变化。在具有不同数据的同一对象（或对象数组）上使用的运算符始终返回 true。还有另一种方法可以解决此问题，您可以克隆需要更改的对象。

```
$items = $myEntityObject->getItems();
$items[0] = clone $items[0];
$items[0]->setSomething(123);
$myEntityObject->setItems($items);

// ... 
```

或者改变`setItems()`方法（我们只需要克隆一个对象来持久化整个数组）

```
public function setItems(array $items) 
{
    if (!empty($items) && $items === $this->items) {
        reset($items);
        $items[key($items)] = clone current($items);
    }
    $this->items = $items;
} 
```

关于第二个问题：

> 有人知道如何为其他字段保留默认跟踪策略并仅将 NotifyPropertyChanged 用于存储数组的字段吗？

您不能只为一个字段设置跟踪策略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-30T17:19:37.423

我在代码上修复此问题的方法是使用 createQueryBuilder 并创建更新查询。这种方式教义没有办法说不:)

所以我从这个

```
$em          = $this->getDoctrine()->getManager();
$matchEntity = $em->getReference('MyBundleBundle:Match', $match_id);

$matchEntity->setElement($element);
$matchEntity->setTeamHomeColour($data['team_a_colour']);
$matchEntity->setTeamAwayColour($data['team_b_colour']); 
```

对此：

```
$repository = $this->getDoctrine()->getRepository('MyBundleBundle:Match');
$query      = $repository->createQueryBuilder('u')
    ->update()
    ->set('u.element', ':element')
    ->set('u.teamHomeColour', ':thomecolour')
    ->set('u.teamAwayColour', ':tawaycolour')
    ->where('u.matchId = :match')

    ->setParameter('element', $element)
    ->setParameter('thomecolour', $data['team_a_colour'])
    ->setParameter('tawaycolour', $data['team_b_colour'])
    ->setParameter('match', $matchEntity)

    ->getQuery();

$query->execute(); 
```

它多了几行代码，但没有克隆或任何其他类型的魔法。只需直接告诉教义进行该死的更新！希望这可以帮助。

注意：在我的情况下，$element 没有被设置。我取消了之前查询中的所有匹配项，而学说只是没有看到它，因此拒绝更新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-24T14:41:14.420

我知道这是一个非常古老的问题，但仍然相关，我想在@VadimAshikhman 的答案中添加更多内容（顺便说一下，你为我节省了几个小时的工作时间......）。

因为我不想在控制器中做特定的事情，所以我在我的实体上添加了一个 Doctrine PreFlush 回调，在那里我克隆了未检测到更改的数组/对象：

```
/**
 * @ORM\Table()
 */
class MyEntity
{
    (...)

    /**
     * @var array $items
     * 
     * @ORM\Column( type="array" ) 
     */
    private $items;

    (...)

    /**
     * Always clone the array/object before flushing,
     * because changes are not detected inside the array/object.
     * It ensures changes are always persisted to the db.
     * 
     * @ORM\PreFlush()
     */
    public function cloneOnPreFlush() {
        $clone = clone $this->items;
        $this->items = $clone;
    }
} 
```

在你的控制器中，一个正常的`$em->flush()`会触发 PreFlush 回调。唯一的小缺点是您的实体将始终在刷新时在数据库中更新，即使没有对其进行更改。

# c# - 如何通过 C# 使用 Web 服务端点

> ID：11084210
> 
> 赞同：2
> 
> 时间：2012-06-18T13:44:30.043
> 
> 标签：c#, asp.net, .net, rest, wcf-rest

我想通过 C# 向以下端点发出获取请求。

[http://api.example.com/1/companies/](http://api.example.com/1/companies/) {id}

我正在查看 WCF rest starter kit，想知道除了安装 rest starter kit 之外，还有其他方法可以轻松地发出获取请求。

请建议。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:54:49.047

这是一个从 URL 执行 GET 并返回字符串的方法：

```
public static string GetResponse(string endPoint)
        {
            HttpWebRequest request = CreateWebRequest(endPoint);

            using (var response = (HttpWebResponse)request.GetResponse())
            {
                var responseValue = string.Empty;

                if (response.StatusCode != HttpStatusCode.OK)
                {
                    string message = String.Format("POST failed. Received HTTP {0}", response.StatusCode);
                    throw new ApplicationException(message);
                }

                // grab the response  
                using (var responseStream = response.GetResponseStream())
                {
                    using (var reader = new StreamReader(responseStream))
                    {
                        responseValue = reader.ReadToEnd();
                    }
                }

                return responseValue;
            }
        } 
```

编辑：

```
private static HttpWebRequest CreateWebRequest(string endPoint)
        {
            var request = (HttpWebRequest)WebRequest.Create(endPoint);

            request.Method = "GET";
            request.ContentLength = 0;
            request.ContentType = "text/json";

            return request;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:49:13.890

创建一个新的类库项目并将其命名为“RESTService.Lib”。添加对“System.ServiceModel”和“System.ServiceModel.Web”的引用。创建一个名为 IRESTDemoServices 的接口类，并添加表示所提供服务的方法的定义。我们的界面将只提供一项服务，如下所示：

```
public interface IRESTDemoServices
{
    string GetClientNameById(string Id);
} 
```

为了告诉框架将此接口视为服务，您需要将其装饰如下：

```
[ServiceContract(Name = "RESTDemoServices")]
public interface IRESTDemoServices
{
    [OperationContract]
    string GetClientNameById(int Id);
} 
```

定义用于访问服务的 URL（URL 路由）：

```
public static class Routing
{
    public const string GetClientRoute = "/Client/{id}";
} 
```

URL Route 到接口中方法的连接是通过在接口上装饰一个属性来实现的，如下所示：

```
[ServiceContract(Name = "RESTDemoServices")]
public interface IRESTDemoServices
{
    [OperationContract]
    [WebGet(UriTemplate = Routing.GetClientRoute, BodyStyle = WebMessageBodyStyle.Bare)]
    string GetClientNameById(string Id);
} 
```

现在实现服务：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, 

                 ConcurrencyMode = ConcurrencyMode.Single, IncludeExceptionDetailInFaults = true)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class RestDemoServices:IRESTDemoServices
{
    public string GetClientNameById(string Id)
    {
        Random r = new Random();
        string ReturnString="";
        int Idnum=Convert.ToInt32(id);
        for (int i = 0; i < Idnum; i++)
            ReturnString += char.ConvertFromUtf32(r.Next(65, 85));

        return ReturnString;

    }
} 
```

然后您必须在 IIS 中或使用自定义托管（控制台、Windows 服务等）来托管它。

看这里： http: [//www.progware.org/blog/post/a-simple-rest-service-in-c.aspx](http://www.progware.org/blog/post/a-simple-rest-service-in-c.aspx)

希望有帮助！

# c# - ASP.net FileUpload 损坏上传的文件

> ID：11084211
> 
> 赞同：4
> 
> 时间：2012-06-18T13:44:30.487
> 
> 标签：c#, asp.net, file-upload, corrupt

我一直在使用 FileUpload 控件上传一个大文件。本地主机上一切正常，但在服务器上，文件损坏：上传顺利，文件大小正确，但内容混淆，文件的某些部分被其他部分覆盖。

比如像这样：

```
Original file:
abcdef0123456789

Uploaded file:
abc1230123456789 
```

每 10 MB 的文件大约有一个这样的段，长度各不相同，通常为 0.1-1 kB。

我的代码很简单：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="UploadTest.Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:FileUpload ID="FileUpload1" runat="server" />

    </div>
    <p>
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Submit" />
    </p>
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    </form>
</body>
</html> 
```

和服务器端：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace UploadTest
{
    public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            if (FileUpload1.HasFile) 
            {
                FileUpload1.SaveAs(AppDomain.CurrentDomain.BaseDirectory + "\\Files\\" + FileUpload1.FileName);
                Label1.Text = "Success " + FileUpload1.FileName;
            }
            else {
                Label1.Text = "No file";
            }
        }
    }
} 
```

无论我尝试上传什么文件，大文件（> 10 MB）都会损坏。

我认为这与代码无关，但它与其他东西有关（但它不仅仅发生在我的客户端计算机上，我需要足够简单的解决方案来向使用它的其他人解释它，如果这是客户端 -有关的）。我试过禁用杀毒软件，但没有任何效果。而且，有些客户端可以正确处理数据上传。

还有什么可以弄乱我的帖子数据？

有任何想法吗？谢谢， AlesP

*帖子已编辑*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:34:21.867

似乎您可能超出了默认文件大小限制，我认为您可以更改该设置。请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)

特别是关于内存限制的部分。

**编辑**

这看起来可能对您有所帮助： [Large POST data is corrupted when using Django/PyISAPIe/IIS](https://stackoverflow.com/questions/9891467/large-post-data-is-corrupted-when-using-django-pyisapie-iis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:32:54.537

`<form>`将您的编码属性更改为`enctype="multipart/form-data"`.

# inner-join - 选择语句以从内部联接中获取特定行

> ID：11084216
> 
> 赞同：0
> 
> 时间：2012-06-18T13:44:45.107
> 
> 标签：inner-join, sql

我的问题与这个问题有点相似 - [MySQL select 1 row from inner join](https://stackoverflow.com/questions/10914079/mysql-select-1-row-from-inner-join)

然而，它从来没有以我需要的方式得到真正的回答。所以我想我会问。

我有一个表 A（tableA），这个表在 tableB 中有很多状态。新状态一直在添加。

TableB 有一个“State”列，它具有 TableA.Id 的外键。这个表B有一个值和时间戳

我正在尝试获取一个查询，它将带回 TableA 中的所有值，并使用内部连接从 tableB 中获取这些行的最新“值”。最新的是时间最晚的那个。

我知道如何在需要的地方进行内部连接，并且我知道如何订购表以带回最新的“时间”行，但是我不知道如何将这两者放在一起并创建一个查询。

我确定我必须在一个选择中有一个选择，这很好。但是，我要避免的是从 TableA 中带回 DataTable 以及我的所有结果，并分别对 tableB 上的每个结果进行查询。

有任何想法吗？

编辑 - 我在这个问题上犯了一个错误，我只是在尝试实现其中一个答案时才真正注意到。

我在 TableA.id 和 TableB.proId 之间有一个外键

TableA - 'Id'、'Name' TableB - 'Id'、'proId'、'State'、'time'

我想通过 B 上的连接来恢复 TableA 的所有值，以恢复最大时间的“状态”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:11:08.177

```
SELECT T.Id,
       T.Name,
       T.State
  FROM 
(
    SELECT A.ID,
           A.Name,
           B.State,
           ROW_NUMBER() OVER ( PARTITION BY A.ID ORDER BY B.Timestamp DESC) RowNumber
      FROM Table_A A
     INNER JOIN Table_B B on A.Id = B.ProdId
) T
WHERE T.RowNumber = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:52:56.970

假设给定状态没有重复的时间戳：

```
select table_a.*, foo.value as latest_value
from table_a left outer join (
    -- selects the value for the given state w/ the max timestamp
    select bar.*, table_b.value from (
        -- selects the max timestamp for a given state
        select state, max(timestamp) 
        from table_b 
        group by state
    ) bar
    left outer join table_b on 
    table_b.state = bar.state and
    table_b.timestamp = bar.timestamp
) foo 
on foo.state = table_a.id 
```

或者，您可以使用`first_value`，它不那么冗长但更晦涩：

```
select table_a.*, foo.value as latest_value
from table_a left outer join (
    select distinct state, 
    first_value(value) over (
        partition by state order by timestamp desc
    )
    from table_b
) foo
on foo.state = table_a.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:15:31.813

```
Select Table_A.*
From Table_A 
LEFT JOIN 
(Select State, max(timestamp) 
From Table_B
Group BY State) b 
ON Table_A.Sate = b.State 
```

# php - php sqlite注入预防

> ID：11084219
> 
> 赞同：0
> 
> 时间：2012-06-18T13:44:59.787
> 
> 标签：php, sqlite, sql-injection

我正在整理一个相当简单的 Web 应用程序，它使用用户输入的数据对 sqlite 数据库进行操作，它引起了我的注意，“清理”字符串可能还不够，并且可能会引发更多问题。据我了解，我应该使用准备好的陈述。在我的研究中，我发现 PDO（php 数据对象）具有准备功能，而且 php sqlite3 扩展也提供了准备语句。如果重要的话，此时数据库中没有登录名和敏感信息。

PDO 对我来说似乎是“外星人”，我真的不明白为什么/如何需要使用它。我可以复制/粘贴代码并让它工作，但它的“想法”让我无法理解。

所以我想问题是 PDO OR sqlite3 准备功能是否最好并简要说明原因。

非常感谢，托德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:13:13.997

说真的，如果您要开始构建您的 Web 应用程序以利用数据库交互，然后获得一些[PDO](http://php.net/manual/en/book.pdo.php)知识，这是物超所值的东西，它可能会帮助您更多地了解 OOP 编码风格，而且只要您使用准备好的声明它始终不会被注射。

无需赘述 PDO 可以处理多种类型的数据库并且具有几乎相同的语法，因此一旦您构建了模型，您就可以轻松地移植到其他数据库而不会遇到太多麻烦。[这里](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)有一个关于 PDO 的很棒的教程

```
<?php 
//Connect this creates a new PDO object
$db = new PDO('sqlite:/path/to/database.sdb');

//Build your sql query with parameters :field 
$sql = "SELECT * FROM sometable WHERE someCol=:field";
//Prepare the above query
$statement = $db->prepare($sql);
//Bind the value received from the form or such with the parameter place holder
$statement->bindParam(':field', $_POST['someVal']);
//Execute the prepared query
$statement->execute();
//Fetch the result
$result = $statement->fetchAll(PDO::FETCH_ASSOC);

//Treat the result as a pure array
foreach ($result as $row){
    //do something
}
?> 
```

互联网上有很多教程比我解释得更好，但要掌握 PDO，因为您将来会在 mysql_* 函数消失时更多地使用它。希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:56:53.927

PDO 扩展是一个包装器，它统一了对许多不同数据库的访问。只要您在其中编写的 SQL 查询是兼容的，您只需连接到 中的不同数据库即可切换数据库`new PDO(...)`，而无需接触其余代码。

sqlite3 扩展只适用于 SQLite 数据库。如果以后要连接到不同的数据库，则必须重写所有使用 sqlite3 函数的代码。

除此之外，准备好的语句及其工作方式在这两个扩展之间基本相同。我会投票支持 PDO，因为从长远来看，它提供了更大的灵活性，并且意味着您只需学习一个界面即可使用许多不同的数据库。当然请注意，您不能混合使用它们，您必须专门使用其中一种。你不能使用`prepare`一种方法和`execute`另一种方法。

# php - 在 PHP 中以编程方式将照片作为页面本身上传到 Facebook 页面

> ID：11084225
> 
> 赞同：3
> 
> 时间：2012-06-18T13:45:19.687
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, image-uploading

# 背景

我在找出如何以编程方式将照片发布到[**Facebook Page**](https://www.facebook.com/FacebookPages)时遇到了一些麻烦。我已经阅读了[关于身份验证为页面的 Facebook 文档](https://developers.facebook.com/docs/authentication/pages/)，但[所有示例都涉及 Facebook 用户](https://developers.facebook.com/docs/authentication/server-side/)。到目前为止，我刚刚使用 Facebook 的[Graph API Explorer](https://developers.facebook.com/tools/explorer/)手动生成了所需的访问令牌。[(3)]

# 我试过的

使用这个简单的代码，我成功上传了图片，但是它被发布在我**自己的**墙上，在我**自己**名字下的相册中，而不是在**Facebook**页面**上**，在**Facebook 页面下的****Facebook 页面**相册中的名字。我需要将其作为**Facebook 页面**本身发布在特定的**Facebook**页面上。[(1)]

 **```
<?php
require 'facebook-php-sdk/src/facebook.php';
require 'config.php';

$facebook = new Facebook(array(
    'appId' => $config['facebook_appId'],
    'secret' => $config['facebook_appSecret'],
    'fileUpload' => true
));

$facebook->setAccessToken($config['facebook_pageAccessToken']);

$args = array(
    'message' => 'Facebook API test',
    'source' => '@'.realpath(__DIR__.'/404.jpg')
);

$data = $facebook->api('/'.$config['facebook_pageId'].'/photos', 'post', $args); 
```

# 关于代码

*   `$config['facebook_appId']`来自我创建的虚拟测试应用程序
*   `$config['facebook_appSecret']`来自我创建的虚拟测试应用程序
*   `$config['facebook_pageAccessToken']`使用范围、和( [3)]从[Graph API Explorer生成](https://developers.facebook.com/tools/explorer)`manage_pages``publish_stream``photo_upload``offline_access` [*   **作为对潜在未来访问者的附注，事实证明我生成了一个用户访问令牌而不是页面访问令牌，这就是它被张贴在我自己的墙上的原因，在我自己的相册中。**] 
*   `$config['facebook_pageId']`是页面的 ID（我也是使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)找到的）
*   成功完成后`$data`包含图像的 ID 和墙上的帖子（？）

# 问题摘要

1.  **如何将照片作为 Facebook 主页本身发布到 Facebook 主页？**
2.  这是针对开发人员来来往往的项目。有没有办法让我拥有一个独立于特定 Facebook 用户的**不可变页面访问令牌，****或者**依赖于（虚拟）Facebook 应用程序，**或者**以某种方式动态生成一个？
3.  **我如何（如有必要）作为 Facebook 页面进行身份验证 - 在 PHP 中以编程方式给我一个页面访问令牌？**

代码示例或指向**简明**文档和/或教程的链接，最好带有示例，我们将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T14:10:32.100

这三个问题的答案是：

*   让作为页面管理员的用户授予您的应用`manage_pages` [权限](https://developers.facebook.com/docs/authentication/permissions/)

*   如果您执行此客户端（即 Javascript SDK），您将希望使用[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)上的**场景 4说明扩展他们的访问令牌**

*   `access_token`通过调用`/me/permissions`或调用检索页面的`/[PAGE_ID]/?fields=access_token`。如果您在检索页面访问令牌之前扩展了页面管理员的 access_token，则页面访问令牌不会过期，除非用户不再是页面管理员或更改其密码、撤销对应用程序的权限等（上述文档中的场景 5 )

*   使用该访问令牌将照片上传到页面的墙上。

我认为这些步骤中的大部分都在此处进行了说明：[https](https://developers.facebook.com/docs/authentication/pages/) ://developers.facebook.com/docs/authentication/pages/ （以页面身份登录）或在此[页面文档中](https://developers.facebook.com/docs/reference/api/page/)**

# matlab - 在 MATLAB 中从数据集中提取唯一记录

> ID：11084226
> 
> 赞同：0
> 
> 时间：2012-06-18T13:45:20.487
> 
> 标签：matlab, dataset, record, unique-key

这是一个不太难的问题，但是因为我还在学习 MATLAB，我不得不佩服我有点挣扎。好吧，假设我们有两个数据集：

```
Input1 = [
Date;X1;X2;X3
2007-06-19;2;1;3
2007-06-22;1;2;3
2007-06-01;1;2;3
2007-06-18;1;2;3
2007-06-19;1;2;3
2007-06-20;1;2;3
2007-06-25;1;2;3
]

Input2 = [
Date;X1;X2;X3
2007-06-22;1;2;3
2007-06-19;1;2;3
2007-06-25;2;1;3
2007-06-01;1;2;3
2007-06-15;1;2;3
2007-06-18;1;2;3
2007-06-21;1;2;3
2007-06-25;1;2;3
]

Output1 = [
]

Output2 = [
] 
```

我想要做的是： - 根据第一列（最旧的日期放在第一位）分别对它们中的每一个进行排序。- 根据第一列分别删除每个文件中的重复项。- 当且仅当它们的键在这两个数据集中都存在时，保留两行（每个数据集一个）。- 做最后检查以确保两个列表上的日期元素一一相同。

尤林。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:50:00.107

为了让您开始，您需要稍微清理一下您的输入数据，然后才能真正释放 Matlab 的强大功能。

首先，丢失“列标题”，*即*行`Date;X1;X2;X3`。Matlab 数组是数字的，甚至 Matlab 字符数组也是真正的数字。

其次，仅在每行末尾放置分号；就 Matlab 数组而言，分号是一行的结尾，因此您的表有可能成为列向量。在您当前有分号的地方使用空格或逗号，并在每行的末尾放置一个分号。

第三，Matlab 数组是数字的，类似 2007-06-22 的东西不是数字。正如您所写的那样，Matlab 也不会将其识别为字符串。如果它确实将它识别为一个字符串，它会在输入中呕吐，因为它不全是数字。

您可以使用元胞数组或结构，但将输入数组转换为数字可能更容易。例如，计算以下表达式：

```
Input1 = [
datenum(datevec('2007-06-19')),2,1,3;
datenum(datevec('2007-06-22')),1,2,3;
datenum(datevec('2007-06-01')),1,2,3;
datenum(datevec('2007-06-18')),1,2,3;
datenum(datevec('2007-06-19')),1,2,3;
datenum(datevec('2007-06-20')),1,2,3;
datenum(datevec('2007-06-25')),1,2,3;
] 
```

正如 Dan 已经建议的那样，将为您提供一个不错的数字数组。 `datenum`并且`datevec`是 Matlab 内置的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:30:53.710

为了让您开始，一个没有重复的排序列表为每个列表执行此操作：

```
% find the unique values for the first column
[~, I] = unique(Input1(:,1));
% extract the records for each unique value in the first column (sorted)
SortedAndUnique = Input1(I,:); 
```

我相信你会解决剩下的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:54:15.040

一些提示：

*   你可以用`datenum('2007-06-22','yyyy-mm-dd')`数字来表达你的日期
*   `unique()`正如丹的回答中提到的那样
*   `intersect()`查找 Input1 和 Input2 中的键

# jquery - 使用 ASP.NET MVC 的 Jquery Post 未到达控制器

> ID：11084227
> 
> 赞同：0
> 
> 时间：2012-06-18T13:45:24.013
> 
> 标签：jquery, ajax, asp.net-mvc, post, controller

我需要使用 POST 将用户的表信息发送到 MVC 控制器（将其保存在服务器的会话中）。

我看到使用嗅探器成功传递了 POST 的信息，但它永远不会到达实际的 MVC 控制器（它永远不会到达断点！）。

我的代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#btnSave").click(function () {
            var tableStr = $("#divTable").html();
            $.post("Home/Save/", tableStr, function (data) {
                if (data) {
                    alert("Great success!");
                }
                else {
                    alert("Fail!");
                }
            });
            return false;
        });
    });
</script>

<h2><%: ViewBag.Message %></h2>
<%=Ajax.ActionLink("Show Users", "LoadUsers", new AjaxOptions() { InsertionMode = System.Web.Mvc.Ajax.InsertionMode.Replace, UpdateTargetId = "divTable" }) %>

<center><div id="divTable"></div></center>
<input type="button" id="btnSave" value="Save" /> 
```

控制器：

```
 [HttpPost]
    public ActionResult Save(string tableHtml)
    {
        Session["TableStr"] = tableHtml;
        return new JsonResult() { Data = true };
    } 
```

我究竟做错了什么？？谷歌搜索了几个小时！

有没有更简单的方法可以将此信息传递给我的服务器会话？这必须是 AJAX（A-同步调用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:52:16.863

如果您正在发帖，您**确实**需要`[HttpPost]`，即使它仍然不起作用，也不要删除它。您还需要确保返回 JSON 数据。

假设您这样做了并且您的控制器实际上被正确引用，您可以尝试显式声明您的 AJAX 元素以确保所有内容都正确传递，包括您的有效负载的名称：

```
$("#form").submit(function () {
    $.ajax({           
       type: 'POST',
       dataType: 'json',
       url: '/Home/Save/', 
       data: { tableHtml: tableStr }, 
       success: function (data) {
            ...
       }
    });
});

[HttpPost]
public JsonResult Save(string tableHtml)
{
    Session["TableStr"] = tableHtml;
    return Json(new { Data = "true" });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:58:01.993

看起来你缺少 /，试试这个

```
$.post("/Home/Save/", tableStr , function (data) {
            if (data) {
                alert("Great success!");
            }
            else {
                alert("Fail!");
            }
        }); 
```

这是一篇关于这样做的博客文章[http://bob-the-janitor.blogspot.com/2011/11/more-ajax-with-mvc-using-partial-views.html](http://bob-the-janitor.blogspot.com/2011/11/more-ajax-with-mvc-using-partial-views.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:42:16.213

我认为你需要用 httppost 装饰你的方法：

```
[HttpPost]
public ActionResult Save(string tableHtml)
{
    Session["TableStr"] = tableHtml;

    return new JsonResult() { Data = true };
} 
```

另外，请确保路径对您的控制器是正确的。如果您确定，请使用`$.ajax`调用而不是`$.post`使用错误回调来查看问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:26:01.827

I see a few things wrong with this.

1.  You are calling `$("#Form").Submit()`...., you have no element with the ID form. Try putting `<form id="theForm">` and changing your call to `$("#theForm").submit()`...

2.  You are setting your `tableStr` variable when the page loads. Looking at your example, this is empty. Then, you call an Ajax actionlink to populate the div. However, you never update your `tableStr` variable again with the AJAX received content. You will be sending an empty string to the server once you get this to work.

3.  Why are you using a FORM element to do this? Forms are typically used to collect information from the user to submit to the server, which in this example, you are not collecting data, only sending the content of a div. You could have a button without the form to do the same thing and will grab whatever is in the "DivTable" element at the time of the button click:

Javascript

```
$(document).ready(function () {
    $("#myButton").click(function () {
       var tableStr = $("#divTable").html();
       $.ajax({           
          type: 'POST',
          dataType: 'json',
          url: '/Home/Save/', 
          data: { tableHtml: tableStr }, 
          success: function (data) {
             alert("Great success!");
           },
          error: function(data){
             alert('fail');
          }
       });
    });
  }); 
```

Controller

```
[HttpPost]
public ActionResult Save(string tableHtml)
{
    Session["TableStr"] = tableHtml;

    return new JsonResult() { Data = true };
} 
```

HTML

```
<center><div id="divTable"></div></center>
<input type="button" id="myButton" value="Save some stuff"/> 
```

4.Why is this necessary anyways? Looking at this code, you appear to be populating a list from an Ajax call to the server (Using the Ajax.ActionLink), then resubmitting that list back to the server to store in session? If that is right, just store the information in session when you call your Ajax link.

```
public ActionResult LoadUsers()
    {
        var UserInfoHtmlString = GetYourUserInfo();
        Session["TableStr"] = UserInfoHtmlString ;
        return UserInfoHtmlString;
    } 
```

# android - 在查询中添加额外条件以将数据库提取到游标中时，SQLite 中的错误

> ID：11084228
> 
> 赞同：0
> 
> 时间：2012-06-18T13:45:25.837
> 
> 标签：android, sqlite

我正在尝试在 android 中显示 SQLite 数据库的内容。当我不在 db2.select 上添加任何条件时，该代码有效。但是，当我向查询添加条件时，它会标记一个错误“数据库上从未调用过关闭”。

解决方案是什么？

提前致谢。

这是我的代码：

```
public class LogDisp extends Activity {
final ResultLog resultlog = new ResultLog(this);
String[] FROM = {_ID,Type,Date,Question,Percent,Avg };
String testtype="Verbal:: Sentence Correction" ;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //String sqlstr="SELECT Date, Question, Avg, Percent FROM TABLE_NAME2 where Question>5";
    String Orderby= Question+"DESC";

    SQLiteDatabase db2 = resultlog.getReadableDatabase();
    Cursor cursor = db2.query(TABLE_NAME2,FROM,null, null, null, null, Orderby);    

    //Cursor cursor =db2.rawQuery(sqlstr, null); 

    ScrollView sv = new ScrollView(this);
    LinearLayout ll= new LinearLayout(this);
    sv.addView(ll);

    final TableLayout tv = new TableLayout(this);
    ll.addView(tv);
    while(cursor.moveToNext()){
        String type=cursor.getString(1) ;
        String date=cursor.getString(2);
        String question=cursor.getString(3);
        String percent=cursor.getString(4);
        String avg=cursor.getString(5);

        TableRow tr= new TableRow(this);
        tv.addView(tr);
        final String space=""+""+""+""+""+"";
        TextView txtview= new TextView(this);
        txtview.setText(date+space+question+space+percent+space+avg);
        tr.addView(txtview); 
    }

     this.setContentView(sv);
     db2.close();
     cursor.close();

} 
```

}

这是我的 SQLite 助手类：

```
public class ResultLog extends SQLiteOpenHelper{ 
 private static final String DATABASE_NAME2 = "LogofResult.db";
 private static final int DATABASE_VERSION2 = 1;

 public ResultLog(Context ctx) { 
        super(ctx, DATABASE_NAME2, null, DATABASE_VERSION2);
     }  

 // Database creation sql statement
    private static final String DATABASE_CREATE = "create table "
                    + TABLE_NAME2+ "(" + 
                    _ID + " integer primary key autoincrement, " + 
                    Type +" text not null,"+
                    Date     + " integer not null,"+
                    Question + " integer not null,"+  
                    Avg+" real not null,"+
                    Percent +" real not null);" ;

    @Override
    public void onCreate(SQLiteDatabase database) {
                database.execSQL(DATABASE_CREATE);
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME2);
                onCreate(db);
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:48:54.490

> 从未在数据库上调用过 close

如果它被调用，你需要关闭你的数据库。你可以在`onDestroy()`方法或`onStop()`方法中做到这一点。

这`String Orderby= Question+"DESC"`看起来不正确，请在此处添加空格

`Question+" DESC"`然后它应该可以工作。这导致了你的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:50:36.977

我的猜测是在您的 Orderby 变量中。您没有在列名和`DESC`

编辑：在此处发布您的 logcat 以获得进一步的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:00:10.257

我认为问题是你试图关闭数据库，而你仍然有一个打开的游标。将 oncreate 方法的最后三行更改为，我认为您的问题已解决。

请记住始终关闭您首先打开的最后一个东西。

```
cursor.close();
db2.close();
this.setContentView(sv); 
```

编辑：进一步看，我认为错误也可能是您在问题和描述之间缺少空间，但是我之前描述的内容是当您与关闭它的方式不一致时会给您带来很多麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T13:52:59.787

你少了一个空格。

```
String Orderby= Question+"DESC"; 
```

这将产生：

```
questionDESC 
```

它需要是

```
String Orderby= Question+" DESC"; 
```

# javascript - 将 HTML 表导出到 Excel JavaScript 函数添加选择文件名

> ID：11084232
> 
> 赞同：13
> 
> 时间：2012-06-18T13:45:34.117
> 
> 标签：javascript, asp.net, excel, export, export-to-excel

我有以下将 HTML 导出到 excel 的函数：

```
function generateexcel(tableid) {
  var table= document.getElementById(tableid);
  var html = table.outerHTML;
  window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html));
} 
```

问题是，我不能保存一个特定的文件名，所以用户会得到类似的东西：

是否要保存 %3Ctable%20id%3D%22tableRslts%22%20tabindex%3D%2235%22%20 文件？

保存的文件是这样的：

`IytvT8Jo.xls.part.xls`（至少在我们将使用的目标浏览器 Firefox 中）

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:18:24.557

您可以查看两个选项：

*   [Filesaver API](http://www.w3.org/TR/file-writer-api/#idl-def-FileSaver)是新的“HTML5”功能，允许 /exactly/ 这个。只有一个小问题：Firefox 还不支持相关部分。如果你想使用它，有一个很好的包装库可以让你更轻松：[filesaver.js](https://github.com/eligrey/FileSaver.js)
*   [Downloadify](https://github.com/dcneiner/Downloadify)也是一个为此而创建的 Flash 工具，您可以在此处找到它。（'缺点'：闪光）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T04:43:08.113

我不确定你是否已经这样做了。您可能需要在您的 aspx 页面中处理以下内容：

```
$(window).load(function(){
$( "#clickExcel" ).click(function() {  
var dtltbl = $('#dtltbl').html();    `enter code here`
window.open('data:application/vnd.ms-excel,' + $('#dtltbl').html());
});
});//]]> 
```

在上面的脚本中，#dtltbl 是表 ID。

以下代码需要在您的服务器端代码中，然后您的问题将得到解决。

```
 Response.AddHeader("Content-Disposition", "attachment;filename=myfilename.csv"); 
```

# regex - 使用 Regex 从 tcprobe 文本中提取 FPS

> ID：11084235
> 
> 赞同：1
> 
> 时间：2012-06-18T13:45:42.967
> 
> 标签：regex

当我在视频文件上运行 tcprobe -i 时，我返回了以下信息：

```
[tcprobe] RIFF data, AVI video
[avilib] V: 30.000 fps, codec=MJPG, frames=1599, width=640, height=480
[avilib] A: 8000 Hz, format=0x01, bits=8, channels=1, bitrate=64 kbps,
[avilib]    54 chunks, 427248 bytes, CBR
[tcprobe] summary for PICT1120.AVI, (*) = not default, 0 = not detected
import frame size: -g 640x480 [720x576] (*)
       frame rate: -f 30.000 [25.000] frc=0 (*)
      audio track: -a 0 [0] -e 8000,8,1 [48000,16,2] -n 0x1 [0x2000] (*)
                   bitrate=64 kbps
           length: 1599 frames, frame_time=33 msec, duration=0:00:53.299 
```

我想使用正则表达式来提取帧速率（在第 2 行）请任何人告诉我如何做到这一点（只是帧数，而不是任何周围的文本）。

PS。请记住，fps 会有所不同，因为我将在各种不同的视频文件上使用此脚本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:48:10.873

您可以使用如下表达式：

```
([\d.]+) fps 
```

FPS 在第一个捕获组中。

Perl 示例：

```
perl -nE '/([\d.]+) fps/ && say $1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:56:28.217

对于您可以使用的框架：

```
frames=(\d+) 
```

如果你想要 fps，这将起作用：

```
(\d+.\d+)\sfps 
```

# delphi - HelpSystem 在 Delphi XE2 中无法使用几个项目

> ID：11084236
> 
> 赞同：0
> 
> 时间：2012-06-18T13:45:46.663
> 
> 标签：delphi, delphi-xe2, help-system

在 Delphi XE2 中创建任何应用程序并按 F1 运行帮助系统。您将看到帮助文章或以下窗口（搜索字符串“function”）：

![在此处输入图像描述](../Images/0a44990bff830220c059dd8b1b083d1e.png)

我有一个 Delphi XE2 的应用程序。当我打开它并按 F1 时，帮助系统仅打开以下窗口（用于搜索字符串“函数”）：

![在此处输入图像描述](../Images/991c6237de378dd04538761546cc71b7.png)

如果您将再次打开第一个项目（在第二个项目之后），帮助系统将打开与第二个项目相同的窗口（不正确）。

我曾尝试删除以下文件：.dproj、.dof、.identcache、.otares - 但没有成功。如何解决这个问题？

**更多信息：**

`HtmlHelpViewer`当您将 BPL 与unit on uses 子句一起使用时，上下文帮助在 IDE 上不起作用。BPL 既是设计时又是运行时。我是否应该创建 2 个单独的 BPL——第一个用于带有条件指令的设计时，第二个用于在应用程序上使用？这是一个 Delphi XE2 问题吗，应该由 Embarcadero 解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:38:19.753

也许对我今年早些时候询问的相关帮助问题的一些答案将有助于解决您的问题：[如何在 Delphi 2010 的 IDE 中修复损坏的上下文敏感帮助](https://stackoverflow.com/questions/4643667/how-to-fix-broken-context-sensitive-help-in-ide-of-delphi-2010)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:48:23.927

这个 Delphi XE2 问题是在任何设计时 BPL 使用`HtmlHelpViewer`单元时引起的。有2个解决方案：

1.  为设计时和运行时创建 2 个单独的 BPL。
2.  `HtmlHelpViewer`自己替换单元，`HtmlHelp`直接调用API。

PS 感谢**David Heffernan**提供的第二种方法。Embarcadero 不想解决 IDE 或设备上的问题。

# java - Java 字符串格式化程序

> ID：11084240
> 
> 赞同：0
> 
> 时间：2012-06-18T13:45:59.313
> 
> 标签：java

我想知道 java 中是否有类似于 java DecimalFormat("0.#") 的字符串格式化程序

我有以下一组需要用破折号掩盖的数字，“00-0000-00”，我希望有一个格式化程序可以让我以与您处理 DecimalFormat("00-0000 -00”）。如果这种方法不存在，有人可以提供替代解决方案的示例。

我需要在保存到数据库时去除破折号，并在从数据库中检索它们时将它们重新添加。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T13:49:01.500

你看过`String.format("%2d-%4d-%2d", int1, int2, int3)`吗？

例子：

```
 int n = 12345678;
    String formatted = String.format("%2d-%4d-%2d", n / 1000000, (n / 100) % 10000, n % 100);
    int orig = Integer.valueOf(formatted.replace("-", ""));
    System.out.println(String.format("formatted=%s, orig=%d", formatted, orig));
    // formatted=12-3456-78, orig=12345678 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:50:30.653

Java 确实有一个[String.format](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)方法。

然后使用[全部替换](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)来转换回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T13:52:02.697

编写自定义方法及其反向。前者将在添加到您的数据库之前调用，后者在检索您的数据库之后调用。我相信应该问题不大。

# machine-learning - libsvm 返回一个简单的解决方案

> ID：11084247
> 
> 赞同：2
> 
> 时间：2012-06-18T13:46:34.447
> 
> 标签：machine-learning, classification, libsvm, svm

我正在尝试使用[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)对数据进行分类，如下图所示： ![SVM 的散点图](../Images/643f7503f9f44bd32600aeb35e7ad52f.png)

您可以“通过肉眼”看到蓝色和红色之间存在柔和的分离，但整个区域都存在一些蓝色样本，我会说“应该标记为红色”。

我无法让 libsvm 返回一个有意义的分类，并继续获得标记为蓝色的琐碎的单点。这发生在各种内核和参数值上。我认为使用成本变量并不能解决这个问题，因为蓝色样本比红色样本多 10 倍。

我错过了什么吗？是否有一些处理这种情况的 libsvm 参数？
或者 SVM 可能不适合该任务，您可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:45:33.723

应该可以使用线性 SVM 获得非平凡的解决方案。您应该尝试不同的 C 值，并且由于您的数据不平衡，请使用 wi 参数来固定每个类的权重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:15:26.203

尝试做一些主成分分析或一些独立成分分析作为预处理。这应该可以帮助你。鸢尾花数据库有很多例子。

# machine-learning - Weka 预测（百分比置信度） - 这是什么意思？

> ID：11084248
> 
> 赞同：1
> 
> 时间：2012-06-18T13:46:36.740
> 
> 标签：machine-learning, weka, data-analysis

我一直在自学 Weka，并学会了如何构建模型并从中获得预测（使用 CLI 进行预测）。

当我对来自先前构建的模型的数据集运行预测时，我得到一个列，该列是“预测”，也称为每个预测实例的预测置信度。

我知道百分比置信度意味着什么，但我的所有预测不应该是我的 Weka 模型的准确性吗？

又名，如果我有一个准确率为 90% 的 J48 决策树分类器，那么使用此模型的每个分类实例不应该是 90% 的预测置信度吗？

任何人都知道这个百分比置信度是如何计算的，或者在告诉别人我的模型时我应该如何阅读错误预测和模型准确性？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:08:33.613

基本上，当决策树在数据集上进行训练时，您通常希望（或由于缺少特征*必须*）在它过度拟合每个训练实例之前停止它。发生这种情况时，您将在树的叶节点处有几个训练样本。很多时候，训练标签在那个时候仍然是混合的（不是所有的正类，也不是所有的负类。）

置信度是在树下到*该训练实例*的叶子时训练标签的一致性程度的某种度量。

编辑：请注意，这也用于以干净和公正的方式处理缺失的特征（属性）。

[有关此的简要定义，请参见此处。](http://weka.wikispaces.com/What+do+those+numbers+mean+in+a+J48+tree?)

另请查看 Quinlan 在决策树方面的一些工作。特别是他在 C4.5 上的工作

另外：“我知道百分比置信度意味着什么，但我的所有预测不应该是我的 Weka 模型的准确性吗？”

不，这不是真的，一些训练样本比其他样本更容易分类，这些分数反映了这一点。

# ruby-on-rails - 设计生成新模型错误

> ID：11084253
> 
> 赞同：0
> 
> 时间：2012-06-18T13:46:48.130
> 
> 标签：ruby-on-rails, devise

我刚刚用几个 gem 创建了新的 rails 应用程序来支持 haml 和 twitter 引导程序。我已将**Devise** gem 添加到 gemfile 中，运行 bundle。跑步

```
rails generate devise:install 
```

完美地工作。但是当我跑步时

```
rails generate devise User 
```

它给了我错误：

```
.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:174:in `default_controller_and_action': controller name should not start with a slash (ArgumentError)
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:78:in `normalize_options!'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:61:in `initialize'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:1304:in `new'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:1304:in `add_route'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:1284:in `decomposed_match'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:1270:in `block in match'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:1270:in `each'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:1270:in `match'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:260:in `root'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/mapper.rb:1317:in `root'
from /Users/Gabriel/Desktop/Projects/heroes-update/config/routes.rb:51:in `block in <top (required)>'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/routing/route_set.rb:260:in `draw'
from /Users/Gabriel/Desktop/Projects/heroes-update/config/routes.rb:1:in `<top (required)>'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:245:in `load'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:245:in `block in load'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:245:in `load'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/routes_reloader.rb:40:in `each'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/routes_reloader.rb:40:in `load_paths'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/routes_reloader.rb:16:in `reload!'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/routes_reloader.rb:26:in `block in updater'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/file_update_checker.rb:78:in `call'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/file_update_checker.rb:78:in `execute'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/routes_reloader.rb:27:in `updater'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/initializable.rb:30:in `instance_exec'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/initializable.rb:30:in `run'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/initializable.rb:55:in `block in run_initializers'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/initializable.rb:54:in `each'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/initializable.rb:54:in `run_initializers'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application.rb:136:in `initialize!'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/Gabriel/Desktop/Projects/heroes-update/config/environment.rb:5:in `<top (required)>'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `require'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `block in require'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `require'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/application.rb:103:in `require_environment!'
from /Users/Gabriel/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.5/lib/rails/commands.rb:25:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

目前还没有控制器和模型，应用程序是默认的 Rails 应用程序，除了应用程序布局。无法理解问题出在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:42:02.680

异常的第一行表示您的 routes.rb 中有错误“控制器名称不应以斜杠开头”。

这必须修复以运行 rake 任务或生成器（或 rails s）。

# mysql - 如何使用“大于”和“分组依据”创建联接？

> ID：11084256
> 
> 赞同：7
> 
> 时间：2012-06-18T13:46:50.810
> 
> 标签：mysql, join, group-by

我有一张包含一系列姓名、事件和日期的表格。我创建了一个`evt5_date`与特定事件 ( `evt5`) 相关的新字段“”。

每个名称可以有多个事件，每个事件的时间都记录在`evt_date`字段中。两个事件`evt1`和`evt2`相关`evt5`。

我想将第一次出现的日期插入到前面的`evt5`所有`evt1`行中。如果or后面没有，则该字段为空。`evt2``evt5``evt5``evt1``evt2`

所有这些都必须为每个`name`. 有几千个不同的名字。我在下面的数据中只显示了 2

**当前表数据**- evt5_date 中没有值

```
name      evt_date       event    evt5_date
name-1    2010-06-30     evt1     
name-1    2009-10-30     evt5
name-1    2009-09-30     evt2      
name-1    2009-06-30     evt5          
name-1    2009-03-30     evt5     
name-1    2009-02-28     evt2     
name-1    2009-01-30     evt1     
name-2    2005-05-30     evt2
name-2    2005-03-30     evt5
name-2    2005-01-30     evt1 
```

**我希望它看起来如何**- evt5_date 字段中的值

```
name      evt_date       event    evt5_date
name-1    2010-06-30     evt1     
name-1    2009-10-30     evt5
name-1    2009-09-30     evt2     2009-10-30 
name-1    2009-06-30     evt5          
name-1    2009-03-30     evt5     
name-1    2009-02-28     evt2     2009-03-30
name-1    2009-01-30     evt1     2009-03-30
name-2    2005-05-30     evt2
name-2    2005-03-30     evt5
name-2    2005-01-30     evt1     2005-03-31 
```

我尝试使用下面的代码执行更新，但我不知道如何指定 evt5 的日期大于 evt1 和 evt2 的 evt_date 之间的联系，同时还按 evt5 分组以获得与相关的 evt_date最近的evt5。

我还需要按名称分组，因为事件特定于每个名称。

```
update mytable as t1
set t1.evt5_date = (select min(t2.evt_date) from mytable as t2
                    where t2.event = 'evt5' AND
                           t2.evt_date > t1.evt_date
                    group by name)
where
  t1.event in ('evt1', 'evt2') 
```

任何建议将不胜感激。谢谢

**更新最终解决方案**- 对@biziclop 提供的答案进行了一些小的更改，以保持`name`

```
UPDATE mytable AS t1
INNER JOIN
    (
      SELECT
             a.name, a.evt_date,
        MIN( b.evt_date ) AS nearest_date
      FROM       mytable AS a
      INNER JOIN mytable AS b ON b.event = 'evt5'
                            AND b.evt_date > a.evt_date
                            AND a.name = b.name       -- needed this additional condition
      GROUP BY a.name, a.evt_date                     -- added 'a.name' to 'group by' 
    ) AS nearest_dates 
       ON nearest_dates.evt_date = t1.evt_date AND
         nearest_dates.name = t1.name                 -- added this additional condition
SET t1.evt5_date = nearest_dates.nearest_date
WHERE t1.event IN ('evt1', 'evt2'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T17:04:53.310

我修复了您的更新声明，我认为它现在有效。我省略了该`GROUP BY name`部分，因为它在您的版本中没有意义。

```
UPDATE mytable AS t1
INNER JOIN
    (
      SELECT
        a.evt_date,
        MIN( b.evt_date ) AS nearest_date
      FROM       mytable AS a
      INNER JOIN mytable AS b ON b.event = 'evt5'
                            AND b.evt_date > a.evt_date
      GROUP BY a.evt_date
    ) AS nearest_dates ON nearest_dates.evt_date = t1.evt_date
SET t1.evt5_date = nearest_dates.nearest_date
WHERE t1.event IN ('evt1', 'evt2'); 
```

首先进行一些验证： [http ://sqlfiddle.com/#!2/309ac/6](http://sqlfiddle.com/#!2/309ac/6)

最终`UPDATE`查询： [http ://sqlfiddle.com/#!2/80c3c/1](http://sqlfiddle.com/#!2/80c3c/1)

# ruby-on-rails - 打开图表错误的标题在起作用？

> ID：11084260
> 
> 赞同：2
> 
> 时间：2012-06-18T13:47:15.723
> 
> 标签：ruby-on-rails, facebook

我在 facebook 上的操作中出现错误标题的问题。动作的标题是错误的属性。它不是从 og:title 属性生成的。

**设置是：订购（动作）一顿饭（对象）**

请看几张截图。

它在 fb 上的外观：

![在此处输入图像描述](../Images/6d574f69baa7bfb02e7c927c8d91ada5.png)

它在 json 中的外观：

![在此处输入图像描述](../Images/615dacdb0800e7a230005585099017c1.png)

实际对象的外观：

![在此处输入图像描述](../Images/64b81221d030bceeae8a44d184b15524.png)

Facebook开图设置餐对象：

![在此处输入图像描述](../Images/670d8bd5fcf0e5cfc9d01cfa5d51b3e2.png)

订单对象的设置：

![在此处输入图像描述](../Images/ff1800de34edbcc04533a6acd8b57f4a.png)

编辑：

我之前在打开的图形设置中更新了属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:56:27.700

听起来您已经使用了相同的 URL，并且 Facebook 缓存了旧标题 - 您可以使用[Facebook 的调试工具](https://developers.facebook.com/tools/debug)清除缓存，直到该对象与许多（我认为是 100 个）操作相关联，之后即使您更改标题也会被锁定元标记

# android - Android 列表项删除操作

> ID：11084264
> 
> 赞同：0
> 
> 时间：2012-06-18T13:47:30.860
> 
> 标签：android, listview

我的 android 应用程序中有一个列表视图。此列表视图充满了消息。现在我想让用户能够选择多条消息，然后删除它们或移动它们。单击列表项将显示消息详细信息。现在我想要一些建议。1）我怎样才能让用户能够选择多条消息？复选框或其他方法？我使用 messagesListView.setOnItemClickListener(this); 获取被点击的消息？我的自定义适配器，我已经覆盖了 setOnLongClickListener 以获得对 List Item 的长按。但不知何故，这行为真的很奇怪。就像当我想长按时触发短按监听器一样？我说得通吗？我的问题是如何为用户提供一种在 ListView 中选择多个项目的有效方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:51:28.797

**`CheckBox`**是实现listview多选的最佳方式。此外，您不必`onItemClick()`为此实施。甚至几乎每个 android 应用程序都提供与`CheckBox`.

教程[自定义 ListView 具有检查项目的能力](http://www.marvinlabs.com/2010/10/custom-listview-ability-check-items/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:08:20.690

你还没有说你正在开发什么版本，所以很难给出最好的建议。

如果您正在为 API 11+ 进行开发，则应使用支持批处理操作的上下文操作模式。有关更多信息，请参阅[此处](http://developer.android.com/guide/topics/ui/menus.html#context-menu)的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T13:55:38.663

android平台有CheckedTextView的定义。如果你想试试

# image - 如何显示二进制图像？

> ID：11084268
> 
> 赞同：0
> 
> 时间：2012-06-18T13:47:40.437
> 
> 标签：image, image-processing, opencv

这是一个原始的 16 位灰度二值图像：

```
 0000 1111 1111 1000,  0000 1111 1111 1001, 0000 1111 1111 1002, 0000 1111 1111 1003 
```

如何显示此图像（我不想进行压缩）？

**更新：**

给我这个图像的相机有另一个选项来获得 32 位 BMP。但我想得到一个 16 位的图像。我不想降低精度，所以希望保持每像素 16 位的大小。

实际上，我正在寻找某种方式来显示此图像（每像素 16 位，灰度），并以 16 bpp 保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:55:22.773

这是一个非常开放的问题。原因是如果您想在不丢失任何信息的情况下保持每像素 16 位，则可以使用伪着色。您可以去掉每个像素的最低有效 8 位，最终得到 8 位灰度。

还有其他方法，看你想要什么！！！

在所有情况下，如果您只想以灰度显示来结束显示，那么保持每个像素超过 8 位是没有意义的，因为人眼无法区分比这更多的灰度级。伪着色允许您通过添加另一个颜色分量（或更多）来显示添加的像素信息，从而使总可显示深度超过 256 级，因为您的眼睛现在可以区分更多颜色。

IR 系统（在伪彩色系统之前）传统上以绿色而不是灰度显示，因为人眼对绿色水平最敏感。

同样，一切都取决于你想要完成什么！

# ios - 3GS上可以使用iPhone后台计时器吗？

> ID：11084276
> 
> 赞同：0
> 
> 时间：2012-06-18T13:48:00.173
> 
> 标签：ios

我想向我们的应用程序添加一个功能，让用户知道他/她何时在设定位置附近（使用 GPS 获取他们的坐标）。

我不想一直打开 GPS，因为半径很大（可能长达 5 英里），所以用户在进入该区域后不必立即收到通知。

我想要一个在后台运行的计时器，它每 5 分钟左右触发一个方法来打开 GPS，获取用户所在位置的准确位置读数，然后关闭 GPS（当然，如果他们通知用户范围内）。如何让我的应用程序的一部分在计时器的后台运行？我不希望该应用程序必须始终处于打开状态并且可见。这在 3G iPhone 上是否可行，而不仅仅是 iPhone 4 和 4S？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:56:54.333

这取决于操作系统，而不是型号。您可以通过在后台任务到期处理程序中启动核心位置来使应用程序在后台保持活动状态，这将继续执行应用程序，但仅限于 5.0 及更高版本。确保您使用 NSRunLoopCommonModes 作为计时器以防止中断

# node.js - 用于轻松部署和更新的 Node.js 设置

> ID：11084279
> 
> 赞同：56
> 
> 时间：2012-06-18T13:48:13.320
> 
> 标签：node.js, deployment, updates

我们目前正在为一个由 node.js/socket.io 应用程序支持的客户开发一个网站（Apache 下的 TYPO3），该应用程序为 CMS 提供的内容提供实时更新。

由于这是我们的第一个 node.js 项目，当谈到“完美设置”时，我没有任何最佳实践可供参考，因此我花了一些时间研究部署技术。

为了实现良好的设置，我还有几个问题：

1.  **易于客户部署**。这非常重要，因为我们的网站将集成到他们的“实时”TYPO3 安装中，该安装为大量网站提供服务，并且运行在不受客户管理的服务器上，而是由另一个（集中式）组织进行支持呼叫和服务器更改的组织缓慢的过程。

2.  **应该很容易更新。**如前所述，请求重新启动和进行服务器更改是一个缓慢的过程，因此理想情况下，节点安装应该在收到使用`git`.

**部署**

普遍的[共识](https://stackoverflow.com/questions/4681067/how-to-deploy-node-js)似乎是`forever`在部署节点应用程序以保持它们运行时使用。我已经测试过`forever`，它似乎在由`npm install forever -g`（全局）安装时工作正常。不过，这需要外部协助才能在实时环境中全局安装，所以我更愿意让它从应用程序的`node_modules`目录运行，但我无法创建一个可靠的包装器来执行此操作。

此外，`forever`工作正常，但必须手动启动。确保它在服务器启动时启动并继续运行的最佳方法是什么？

*   一个简单的`init.d`脚本？
*   编写看门狗包装器？
*   检查`forever`状态的 TYPO3 调度程序任务？

**快速开发/更新重启**

我们目前仍处于项目的开发阶段，每次我对 node.js 应用程序进行更改时，我都会手动重新启动`node`或`forever`. 这可行，但远非理想。有几个较小的`npm`模块可以检查文件修改并`node`在检测到更改时重新启动，例如：

*   [节点兽](http://remysharp.com/2010/10/12/nodejs-rapid-development-nodemon/)
*   [Node.js 主管](http://fgnass.posterous.com/nodejs-supervisor)
*   [弹跳](https://github.com/weepy/bounce)
*   [结节](https://stackoverflow.com/a/2929366/813718)（不需要重新启动节点，因此可能更容易与 结合`forever`）
*   [向上](https://github.com/LearnBoost/up)

有没有人有这些经验？

**更新：你为什么不直接使用集群？**

[Cluster 模块通过](https://github.com/LearnBoost/cluster)[重新加载](http://learnboost.github.com/cluster/docs/reload.html)机制提供了类似的功能，但[不适用于 Node 0.5+](https://github.com/kriszyp/multi-node/issues/14)。取代它的[核心集群模块（节点 0.6+）](http://nodejs.org/api/cluster.html)不具备所有这些功能，而仅提供集群。这反过来又[不能很好地与 socket.io 配合使用](https://github.com/LearnBoost/cluster/issues/95)。至少在[不使用 Redis](https://stackoverflow.com/questions/8395407/using-socket-io-with-cluster)的情况下不会（这对我们来说是个问题，因为我们不能强制向客户提供另一个 prereq 服务）。

--

`forever`显然，在将项目移交给客户之前，我正在尝试找到最稳定的解决方案，该解决方案将更新重启程序与之前相结合，我真的希望任何人都已经产生了经过验证的技术组合。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-22T13:33:40.193

结合所有收集到的知识（非常感谢[Julian Knight](https://stackoverflow.com/users/1309986/julian-knight)的想法）和过去一周测试的方法，我决定接受下面描述的部署解决方案（我想我很乐意分享以帮助其他有类似问题的人):

脚本错误时自动重启***和***脚本更改时自动重新加载由 [**forever**](https://github.com/nodejitsu/forever/)处理，因为它还包括脚本监视，只要 Forever 是从 node.js 脚本中生成的。

为此，我添加了一个`server.js`来启动`app.js`我们实际想要运行的脚本：

**服务器.js**

```
var forever = require('forever'),
    child = new(forever.Monitor)('app.js', {
        'silent': false,
        'pidFile': 'pids/app.pid',
        'watch': true,
        'watchDirectory': '.',      // Top-level directory to watch from.
        'watchIgnoreDotFiles': true, // whether to ignore dot files
        'watchIgnorePatterns': [], // array of glob patterns to ignore, merged with contents of watchDirectory + '/.foreverignore' file
        'logFile': 'logs/forever.log', // Path to log output from forever process (when daemonized)
        'outFile': 'logs/forever.out', // Path to log output from child stdout
        'errFile': 'logs/forever.err'
    });
child.start();
forever.startServer(child); 
```

这将监视应用程序目录中的所有文件的更改，并在更改后`forever`立即重新启动正在运行的脚本。由于日志和 pidfile 位于应用程序的子目录中，因此必须从文件监视中忽略它们，否则脚本将循环重新启动：

**.foreverignore**

```
pids/**
logs/** 
```

为了让这一切在系统启动时开始，使我们能够`start node-app`使用`stop node-app`Ubuntu[的 Upstart](http://upstart.ubuntu.com/)轻松控制服务。我将两个示例（[这个](http://kevin.vanzonneveld.net/techblog/article/run_nodejs_as_a_service_on_ubuntu_karmic/)和[这个](http://geeknme.wordpress.com/2009/10/15/getting-started-with-upstart-in-ubuntu/)）组合成一个可以很好地完成工作的示例：

**/etc/init/node-app.conf**

```
# This is an upstart (http://upstart.ubuntu.com/) script
# to run the node.js server on system boot and make it
# manageable with commands such as
# 'start node-app' and 'stop node-app'
#
# This script is to be placed in /etc/init to work with upstart.
#
# Internally the 'initctl' command is used to manage:
# initctl help
# initctl status node-app
# initctl reload node-app
# initctl start node-app

description "node.js forever server for node-app"
author      "Remco Overdijk <remco@maxserv.nl>"
version "1.0"

expect fork

# used to be: start on startup
# until we found some mounts weren't ready yet while booting:

start on started mountall
stop on shutdown

# Automatically Respawn:
respawn
respawn limit 99 5

env HOME=/home/user/node-app-dir

script
    # Not sure why $HOME is needed, but we found that it is:
    export HOME=$HOME
    chdir $HOME
    exec /usr/local/bin/node server.js > logs/node.log &
end script

#post-start script
#   # Optionally put a script here that will notifiy you node has (re)started
#   # /root/bin/hoptoad.sh "node.js has started!"
#end script 
```

正如[Kevin 在他的文章中明智地提到，](http://kevin.vanzonneveld.net/techblog/article/run_nodejs_as_a_service_on_ubuntu_karmic/)以 root 身份运行 node 是不明智的，因此我们将`exec sudo -u www-data /usr/local/bin/node`在下周迁移到新服务器时将其更改。

因此，它`forever`会自动`node server.js`启动，由 启动`upstart`，并监控崩溃和文件更改，让整个设置运行只要我们想要的时间。

我希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T21:49:17.083

因为我的最后一个答案是为了未来！以下是一些其他帮助链接：

*   [https://serverfault.com/questions/274857/how-to-use-node-js-as-a-production-web-server](https://serverfault.com/questions/274857/how-to-use-node-js-as-a-production-web-server)
*   [http://www.slideshare.net/the_undefined/nodejs-best-practices-10428790](http://www.slideshare.net/the_undefined/nodejs-best-practices-10428790)（见幻灯片 35）
*   [http://www.slideshare.net/the_undefined/nodejs-in-production](http://www.slideshare.net/the_undefined/nodejs-in-production)（幻灯片 31 到最后）
*   [当 node.js 出现故障时，如何自动将其恢复？](https://stackoverflow.com/questions/5668126/when-node-js-goes-down-how-can-i-bring-it-back-up-automatically)

似乎还没有一个完美的答案，但是有很多人在运行生产节点实例。希望这将为您指明正确的方向。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-18T20:26:54.403

对于生产用途，您可能会更好地查看[Cluster](https://github.com/learnboost/cluster)之类的东西。您可能不需要集群功能，但它还包括其他生产功能，例如零停机重启、日志记录、工作程序等。

正如您所说，Forever 可以进行测试，但实际上并没有生产使用所需的东西。

我似乎隐约记得，从 v0.7 开始，Node 本身可能会采用 Cluster 或类似的东西

# node.js - 语言 SDK 与原始 HTTP 请求

> ID：11084283
> 
> 赞同：-1
> 
> 时间：2012-06-18T13:48:28.767
> 
> 标签：node.js, http, sdk

在使用服务时，我经常会遇到这样的问题，我应该为我的语言 (Node.js) 找到一个 SDK，还是应该只发送原始 HTTP 请求。

一些服务为您提供了具有良好文档的真正最新的 SDK：[https ://www.braintreepayments.com/developers](https://www.braintreepayments.com/developers)

其他人的工作一般，而其他人只提供一个 Restful HTTP API。

依我看来：

SDK的优点：

1.  你喜欢你的语言并想写/读它。

SDK 的缺点：

1.  并非所有服务都提供一种（太昂贵/不可能拥有所有语言的 SDK）
2.  不是最新的。
3.  不要涵盖底层 HTTP API 的所有功能。
4.  分裂社区。
5.  薄文档。

使用语言 SDK 似乎利大于弊。

如果有原始 HTTP API，我应该始终直接使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T13:52:01.127

我会说不。通过使用提供的 SDK，您通常可以节省时间，而且您使用的代码已经过测试，远远超过您自己编写的任何代码。在我看来，这些好处超过了你所有的缺点。

但是，您的大多数缺点都显示了不使用 SDK 的停止理由。如果您发现 SDK 不符合您的要求，那么可以，使用原始 HTTP 请求。也就是说，您通常可以在满足您要求的情况下使用 SDK，并在不满足要求的情况下使用原始 HTTP 请求（最好通过扩展 SDK）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:10:12.620

我会说“这取决于”（这就是为什么我认为这个问题不太适合 SO 格式，顺便说一句），对我来说，最重要的因素是 HTTP API 和 SDK 的稳定性。

如果 API 是稳定的，它可能被 SDK 很好地覆盖，可以安全地使用后者。

如果 API 发展迅速，很可能（很少有例外）被 SDK 覆盖得不够好。

或者当然，这一切都是假设您需要的功能被 API 和 SDK 覆盖。如果不是这样，我建议只使用SDK的基本功能（例如授权模块），并自己实现所有复杂的功能。

# ios - popViewControllerAnimated 后 UITextField 内容为空

> ID：11084287
> 
> 赞同：0
> 
> 时间：2012-06-18T13:48:34.287
> 
> 标签：ios, xcode, uinavigationcontroller, uitextfield, popviewcontrolleranimated

在我的应用程序中，我使用的是导航控制器。我的问题是，当我转到上一个视图然后返回当前视图时，此视图中的所有 TextField 都是空的。

当我从导航控制器浏览堆栈时，我不知道如何保存这些值（在文本字段中）。

这是我调用 popViewControllerAnimated 的方法：

```
- (IBAction)swipeBack:(id)sender {
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:12:49.993

在您之前视图的 .h 文件中声明一个属性：

```
@property (noonatomic, retain) YOURVIEWCONTROLLER *secondVC; 
```

然后在您的@implementation 中，合成属性：

```
@synthesize secondVC; 
```

然后用以下代码替换将视图控制器呈现为模态视图的代码：

```
if(!secondVC){
    YOURVIEWCONTROLLER *controller=[[YOURVIEWCONTROLLER alloc]init.......];
    [self setSecondVC:controller];
    [controller release];//if you ain't using arc else just set it to nil
    controller=nil;
}
[self presentModalViewController:self.secondVC animated:YES]; 
```

“YOURVIEWCONTROLLER”是包含文本字段的第二个视图控制器类的名称。不要忘记释放 -dealloc 中的 secondVC 属性。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:55:36.130

当您推送或弹出视图控制器时，它会分别从内存中加载或卸载。您需要在弹出控制器之前保存信息，并在分配新控制器之后加载信息，然后再将其推入堆栈。您可以使用`NSUserDefaults`基本文件 I/O 来保存和重新加载您的信息。

保存：

*   使用上述方法之一保存数据。
*   然后弹出视图控制器。

加载：

*   加载数据。
*   分配一个视图控制器。
*   将数据传递给视图控制器（使用属性、单例等）
*   推送视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:30:46.100

为什么不将它设置为一个属性来存储它？当你想推它显示时，你只能在它是 nil 成员时分配它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T13:56:04.257

这里有两件事要解决： 1\. 保存文本字段的内容。2\. 再次推送视图控制器时恢复文本字段的内容。

您可以通过将文本字段值保存到全局对象（如 AppDelegate 或任何其他全局单例）来解决第一个问题。

处理 2 的最佳方法是使用文本字段为视图控制器创建初始化程序。例如：

```
- (id)initWithOptions:(NSDictionary*)options; 
```

然后，当您需要将控制器压入堆栈时，您从 1 中从全局存储中获取先前保存的值，并将它们传递到选项字典中。然后，在*viewDidLoad*中，将值分配给字段。

# css - CSS 选择器嵌套

> ID：11084288
> 
> 赞同：4
> 
> 时间：2012-06-18T13:48:36.207
> 
> 标签：css

是否可以在选择器中嵌套选择器？我有很多看起来像这样的样式：

```
#header h1{
  ...
} 
#header img{
  ...
}
#header form{
  ...
} 
```

我想压缩它们，使它们看起来像这样：

```
#header{
  h1{
    ...
  }
  img{
    ...
  }
  form{
    ...
  }
} 
```

为了提高可读性。这在普通的旧 CSS 中是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T13:49:47.983

不是在 vanilla CSS 中，但有像[LESS](http://lesscss.org/)这样的编译到 CSS 语言允许您使用嵌套选择器。

我选择的库是[Sass](http://sass-lang.com/)，它现在已集成到 Rails 资产管道中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T13:50:18.017

不它不是。但是，如果您使用[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)之类的预处理器（仅列出最流行的），它就是。

根据您的需要，您应该研究其中之一。它们绝对值得，因为它们不仅可以通过嵌套选择器显着简化您的工作，还可以引入变量、mixin、循环和其他方便的东西。

[CSS-预处理器的介绍和比较](http://www.vanseodesign.com/css/css-preprocessors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T13:50:31.637

不，这在纯 CSS 中是不可能的。你需要类似[Sass](http://sass-lang.com/)或[Less](http://lesscss.org/)的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T13:51:08.423

不，使用普通的旧 CSS 是不可能的。

但是你可以用[LESS](http://lesscss.org/)或[Sass](http://sass-lang.com/)来做。这两个编译成CSS。

Sass 生成的 CSS 可以像您需要的示例一样缩进。

```
#header{}
   #header h1{
     ...
   }
   #header img{
     ...
   }
   #header form{
     ...
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T19:43:41.060

你可能会发现类似的东西

```
@-moz-document url-prefix() {
    .myDefinition {
    }
} 
```

然而。这些由 Firefox 解析，可用于提供仅限 Firefox 的 CSS hack，但我不确定它们的有效性和标准符合性。

# javascript - 用高度展开折叠 div

> ID：11084291
> 
> 赞同：-6
> 
> 时间：2012-06-18T13:48:44.973
> 
> 标签：javascript, jquery, css, html

我有 2 个水平放置的 div ( `float:left; width:50%;`)。但我想给他们`height:500px`并`overflow:hidden`在底部显示展开/折叠按钮。如何用 jquery 创建它？

```
 <div id="tab-two">

        <ul class="nav">
            <li class="nav-one"><a href="#featured" class="current">last</a></li>
            <li class="nav-two"><a href="#core">popular</a></li>
        </ul>

        <div class="list-wrap">

            <ul id="tabclick">

                <li>
            ***content***                       
                            </li>
             </ul>

         </div> 

     </div>
 <style>
 #tab-two {
 background: none repeat scroll 0% 0% #FFFFFF;
 border-radius: 4px 4px 4px 4px;
 border-right: 1px solid #CCCCCC;
 margin: 0pt 1% 5px 0pt;
 padding: 1px 0pt 0pt 5px;
 }
 </style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:13:17.327

我看不到您的代码中有 2 个 div 可以按描述的方式运行。我为你解决了这个问题。您应该能够对其进行编辑以适合您的 HTML/CSS 标记：

```
<style type="text/css">

.floatBox {
    position: relative;
    float: left;
    width: 50%;
    height: 500px;
    overflow: hidden;
    display: block;
}

.boxContent {
    display: table;
}

a.expandLink {
    width: 100%;
    height: 30px;
    background: #059;
    color: #fff;
    position: absolute;
    bottom: 0;
    text-align: center;
    display: block;
}

</style>

<script>

var collapseH = 500; // set the height of your collapse state

$(document).ready(function() {
    $('.expandLink').click(function() {
        var $link   = $(this);
        var $box    = $link.parents('.floatBox'); // get parent with class="floatBox"
        var innerH  = $box.children('.boxContent').innerHeight(); // get height of inner HTML
        var linkH   = $link.height(); // get height of link to add to your animation

        if ($box.height() == collapseH) { // if the box is collapsed

            // animate to full inner height
            $box.stop().animate({
                height: innerH+linkH
            }, 500);

            // change text of link
            $link.html('collapse');

        } else { // if it is expanded

            // animate to collapsed height
            $box.stop().animate({
                height: collapseH
            }, 500);

            // change text of link
            $link.html('expand');

        }

        return false;
    });
});

</script>

<div id="container" style="width: 800px;">
    <div class="floatBox">
        <div class="boxContent">
            <!-- PUT YOUR CONTENT HERE -->
        </div>
        <a href="#" class="expandLink">expand</a>
    </div>
    <div class="floatBox">
        <div class="boxContent">
            <!-- PUT YOUR CONTENT HERE -->
        </div>
        <a href="#" class="expandLink">expand</a>
    </div>
</div> 
```

# c++ - boost asio async_read_some 只读数据

> ID：11084296
> 
> 赞同：5
> 
> 时间：2012-06-18T13:48:58.067
> 
> 标签：c++, boost, boost-asio

我有一个使用 boost::asio 进行读/写操作的 c++ 服务器 - 写出消息工作正常 - 但由于某种原因，我无法让读取工作

我从客户端发送给它的消息是 15 个 16 位无符号短裤 - 我的测试消息是这样的：

```
1, 34, 7, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0 
```

现在在服务器上我经常看到这样的事情。读取经常被分解和/或乘以 256

这是一次发送两次

```
reading length = 8: [1 34 7 0 0 0 0 0]
reading length = 3: [1024 0 0]
reading length = 3: [0 0 0]
reading length = 8: [1 34 7 0 0 0 0 0]
reading length = 6: [1024 0 0 0 0 0] 
```

这是第二次发送两次

```
reading length = 8: [1 34 7 0 0 0 0 0]
reading length = 6: [1024 0 0 0 0 0]
reading length = 6: [1 34 7 0 0 0]
reading length = 1: [0] 
reading length = 0: []
reading length = 0: []
reading length = 2: [0 0]
reading length = 2: [0 0]
reading length = 1: [0] 
```

这是第三次发送一次（我不知道这里发生了什么）

```
reading length = 14: [256 8704 1792 0 0 0 0 0 1024 0 0 0 0 0] 
```

这是实际的服务器读取代码

```
void Session::start(void) {
  msg_interface->add_msg_listener(this);
  _socket.async_read_some(
    boost::asio::buffer(_read_data_buffer, READ_DATA_BUFFER_LENGTH),
    boost::bind(&Session::handle_read, this, boost::asio::placeholders::error,
      boost::asio::placeholders::bytes_transferred));
}

void Session::handle_read(const boost::system::error_code& error, std::size_t bytes_transferred) {
  if (error) {
    msg_interface->remove_msg_listener(this);
    delete this;
  } else {
    if (bytes_transferred != 0) {
      // print what we've received
      const int length = bytes_transferred / sizeof(uint16_t);
      std::cout << "reading length = " << length << ": [";
      for (int i = 0; i < length; i++) {
        const uint16_t data = ntohs(_read_data_buffer[i]);
        std::cout << data;
        if (i != length - 1) {
          std::cout << " ";
        }
      }
      std::cout << "]" << std::endl;
    }
    _socket.async_read_some(
      boost::asio::buffer(_read_data_buffer, READ_DATA_BUFFER_LENGTH),
      boost::bind(&Session::handle_read, this, boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred));
  }
} 
```

变量如下

```
const int READ_DATA_BUFFER_LENGTH = 1024;

class AbstractSession {
protected:
  uint16_t _read_data_buffer[READ_DATA_BUFFER_LENGTH];
... 
```

有一件事 - 我使用相同的 IO 服务在收到消息时写入消息（服务器正在与旧接口通信并将它接收到的消息发送给所有客户端）并从客户端读取消息。可以为两者使用相同的 io 服务导致这种情况发生吗？

关于我应该做些什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T13:55:19.247

你的代码做了它应该做的事情——它尽可能多地读取数据。这就是函数[`async_read_some`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/ssl__stream/async_read_some.html)名称以“some”结尾的原因——它读取“some”字节并且不承诺做更多的事情。文档还说以下内容：

> 如果您需要确保在异步操作完成之前读取请求的数据量，请考虑使用 async_read 函数。

除非您重新处理接收器以处理部分读取，否则这似乎是您的情况。

# tcp - 我应该使用 TCP 还是 UDP？

> ID：11084304
> 
> 赞同：3
> 
> 时间：2012-06-18T13:49:25.450
> 
> 标签：tcp, udp

我的应用程序需要将视频数据从服务器逐帧发送到客户端。我在使用 TCP 或 UDP 之间摇摆不定。

从我的测试中，我发现了以下一些结果：

TCP：很容易实现。

UDP：要向客户端发送一个帧（大约 50KB），如果我为每个帧创建 1 个 UDP 包，那么发送总是会丢失帧。所以我必须把每一帧分成很多UDP包。这使我的算法更加复杂，因为 UDP 协议可能会丢失包裹并且包裹可能会乱序交付。另外，如果每个UDP包中的数据长度很大，那么很容易丢失。

我有一些疑问：

1.  我应该为这种类型的应用程序使用 TCP 还是 UDP。

2.  如果我想使用UDP进行更快的传输，如何确定每个包中数据的合适长度，在传输过程中不会轻易丢失？（这可能属于网络带宽）？

3.  根据您的经验，您能估算出 TCP 比 UDP 快多少百分比？

很抱歉在帖子中有这么多问题，但在决定在我的应用程序中使用 TCP 还是 UDP 之前，我需要了解更多细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T13:57:21.713

由于您的应用程序流式传输视频，您可能需要 UDP。TCP 和 UDP（在这种情况下）之间的一个巨大区别是 UDP 不会像 TCP 那样尝试恢复丢失的数据包。您不希望每次跳过一帧时都重新加载视频，因为这需要很长时间，相反 UDP 只会跳过丢失的帧。（如果您右键单击 Youtube 视频，您可以看到流式传输视频时丢弃的数据包数量）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:01:03.800

在您的情况下，我会使用 TCP **，除非**您实际上有手动分段和重新组装 UDP 数据包的实践经验，并且您愿意维护代码中引入的开销（例如重新组装缓冲区并控制这意味着延迟）。

此外，您应该考虑目标网络。它是仅本地主机、局域网、广域网还是互联网。您对网络的控制越少，在往返时间、延迟、数据包丢失等方面偏爱 TCP 的影响就越大。通过控制我的意思是上限或估计跨网段 (#routers) 的数量，数量不同的配置（QoS、带宽限制器、MTU、...）等等。

根据经验，当瞬间（定义如下）所需的所有数据都适合一个数据包（IPv6 中的 MTU 保证为 1280）时，UDP 非常有用。瞬间是时间上的短暂快照，通常具有往返时间的生命周期。UDP 也适用于查询和响应都是小实体的对话。

因此，从这个意义上说，**我**会将 UDP 用于 DNS（简短查询、简短回答）或金融交易数据（在 1 次往返时间的生命周期内只有这么多）或协议元数据，例如参与客户的数量或身份哈希（查询/响应很短，在往返时间内只有少数）。

希望这可以帮助。

**编辑：**
回答你的问题

1.  UDP（上面列出的限制）
2.  IPv6 提供路径 mtu 检测，您只需使用 PMTU，对于 IPv4，您必须自己动手：
    *   设置`IP_DONTFRAG`套接字选项
    *   发送一个您认为会通过的数据包
    *   想一个简单的协议让接收者告诉你数据包是否已经被完全接收
    *   如果不是 -> 减小大小，如果是 -> 增加大小
    *   经过几次乒乓球之后，您对 PMTU 有了一个安全的估计（当然您已经可以发送有效载荷数据了）
3.  **如果**网络的性质稳定并保持稳定，UDP 将大大优于 TCP 。（相反）当网络的性质不断变化（延迟变化、丢包概率变化等）时，TCP 不会获胜。但是，同样的，**当****网段**相距很远且 QoS 为在一些中间段中使用（配置为支持或多或少已知的 TCP 服务而不是“其他”内容的 QoS。

对于一些数字和灵感，您应该查看[udt](http://udt.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T13:03:02.180

除了视频/音频流之外，UDP 还用于具有短消息的低延迟应用程序。

# google-chrome - 以编程方式将 ROOT 证书导入 Google Chrome 中的“受信任的根证书颁发机构”

> ID：11084307
> 
> 赞同：3
> 
> 时间：2012-06-18T13:49:34.337
> 
> 标签：google-chrome, google-chrome-extension, ssl-certificate

## Que：如何通过**Chrome 扩展程序以***编程方式* **将 ROOT 证书导入**Google Chrome 中的“受信任的根证书颁发机构” ？

 **我正在开发一个 Chrome 扩展程序，我想将根证书导入：

### 铬：//铬/设置/

### 管理证书 --> 受信任的根证书颁发机构 --> 导入

谷歌浏览器*扩展*有**API**吗？或javascript代码？为达到这个 ？

 *谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:26:48.850

我不知道 Chrome 中有这样的替代方案。但无论如何，我怀疑它是否存在，因为这将是一个**巨大**的安全漏洞。

这意味着恶意扩展可以静默注册过期或不受信任的证书。此后，如果用户访问证书所在的域，就不会被警告非受信任证书的潜在危险。

像往常一样，如果你的意图是好的，拥有这样的功能会很棒，但你不能冒险！***

# facebook - 通知我的应用程序的所有用户有新信息

> ID：11084308
> 
> 赞同：1
> 
> 时间：2012-06-18T13:49:37.890
> 
> 标签：facebook, facebook-graph-api, notifications, facebook-app-requests

我们正在构建的应用程序希望通知其所有用户有可用的新信息。

基本上，用户按照提示在地图上找到某个地方来赢得奖品。在接下来的几周内，将在特定时间提供新的提示，每天 3 次。

我们现在正在研究使用 App-to-user 请求，但请求仍然存在，与新闻源中的消息不同，因此它可能看起来是垃圾邮件。它也不会直接传达消息，而只会显示“应用程序对您有新请求”。

让**所有**用户知道新提示可用的最佳方法是什么？我们不想强迫他们喜欢我们的主页。我们也不想给他们发电子邮件。

# symfony - Symfony2 - EntityRepository - 对行进行排序 - 这是一个好的和节省的方法吗？

> ID：11084310
> 
> 赞同：1
> 
> 时间：2012-06-18T13:49:40.737
> 
> 标签：symfony, doctrine-orm

Doctrine 为我的班级创建了一个存储库并获取按任何行排序的所有元素的列表，我写了这个成员：

```
class NoteRepository extends EntityRepository {
    public function findAllOrderedByRow($row, $order = 'ASC') {
        if ( 'DESC' != strtoupper($order) ) {
            $order  = 'ASC';
        }

        if ( property_exists('Namespace\Entity', $row) ) {
            return $this->getEntityManager()
                ->createQuery('SELECT o FROM Entity o ORDER BY o. ' . $row . ' ' . $order)
                ->getResult();
        }

        return null;
    }
} 
```

我的问题是，这是一个好方法还是为所有可排序的行添加函数更好？像这样使用它是否可以保存？我没有看到注射的方法。但也许我忽略了它。

非常感谢，菲利普

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:28:00.570

EntityRepository 中有一个可用的函数，称为`findBy`. 您可以将订单作为第二个参数传递。

```
public function findBy(array $criteria, array $orderBy = null, $limit = null, $offset = null) 
```

还有一个小例子：

```
$this->getDoctrine()->getRepository('User')->findBy(
    array(), 
    array('email' => 'asc')
); 
```

在我看来，覆盖这种行为是没有用的。

# string - Coldfusion：使用字符串作为结构名

> ID：11084316
> 
> 赞同：0
> 
> 时间：2012-06-18T13:50:07.830
> 
> 标签：string, coldfusion, struct

我没有找到这个问题的答案，因为我不知道我是否正确地表达了这个问题。

这很简单。我有这个代码：

```
<cfset queryAddRow(sday.morning) /> 
```

我需要这样的东西：

```
<cfset tday = "morning" />
<cfset queryAddRow(sday.tday) /> 
```

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:09:28.930

假设 sday.morning 是一个查询，那么您可以使用关联数组表示法来动态引用键：

```
struct[key] 
```

其中 'key' 是一个保存键名的变量。在您的情况下，要使用的代码是：

```
queryAddRow(sday[tday]) 
```

# blackberry - 如何使用 Blackberry Webworks 下载图像？

> ID：11084325
> 
> 赞同：1
> 
> 时间：2012-06-18T13:50:38.360
> 
> 标签：blackberry, cordova, phonegap-plugins, blackberry-webworks

我想从服务器下载图像并将其保存到 SD 卡。我搜索了很多网站，但没有找到任何解决方案。对于读取和写入文件，我正在使用以下[文件读取器和写入器](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileReader)代码，它运行良好。但我不知道如何使用 Phonegap 保存文件。谁能帮我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:46:03.050

要使用 PhoneGap 保存文件，有[FileTransfer API](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileTransfer)，它提供了一种将文件从服务器下载到设备文件系统/SD 卡的方法。

使用 WebWorks，还有[File API](https://developer.blackberry.com/html5/apis/blackberry.io.file.html)，它还提供了一种方法（ saveFile() ）将文件保存到 SD 卡。

Michelle Mendoza
开发者关系
研究动态
@BlackBerryDev

# internet-explorer - 通过 IE 中的 iframe 进行谷歌分析

> ID：11084328
> 
> 赞同：2
> 
> 时间：2012-06-18T13:50:45.793
> 
> 标签：internet-explorer, iframe, google-analytics

我在 IE 中遇到 GA 问题。我正在跟踪从[http://www.mydomain.com](http://www.mydomain.com)的登录页面开始的目标。（**www.mydomain.com** --> **wwwGA 个人资料**）

目标尝试从某人看到登录页面的那一刻起跟踪访问，直到他执行特定操作。

当用户注册时，它会被重定向到他在 usersubdomain.mydomain.com 上的管理面板（他将使用该子域中的我们的服务）。（**user.anotherdomain.com** --> **subGA 配置文件**）

所以 www.mydomain.com 和 user.anotherdomain.com 有两个不同的配置文件。

在某个给定的时间，该用户可能会在他的管理面板上执行一个操作，该操作是完成 wwwGA 配置文件中的 GA 目标的触发器。所以我需要一种方法让 wwwGA 配置文件知道这个动作发生了。

user.anotherdomain.com 始终通过 HTTPS 访问。

我目前正在做的是：

*   如果在管理面板中执行该操作，我设置一个标志 action_performed = 1
*   如果 action_performed == 1：
    1.  显示以下 iframe`<iframe src="http://www.mydomain.com/track-action-performed" width="1" height="1"></iframe>`
    2.  设置 action_performed = 0

当包含这个 iframe 时，它​​应该跟踪 wwwGA 配置文件上的访问（如果用户点击[http://www.mydomain.com/track-action-performed，wwwGA](http://www.mydomain.com/track-action-performed)配置文件被设置为完成目标）。

这适用于除 IE 之外的所有浏览器。

我已经尝试过但没有成功

*   正如谷歌在[https://developers.google.com/analytics/devguides/collection中建议的那样，www.domain.com 上的 P3P 标头（这实际上使 IE 接受 iframe cookie - 至少来自 www.domain.com 的那些） /gajs/gaTrackingSite#trackingIFrames](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames)
*   尝试将 http:// 和 https:// 作为 iframe 源。

有什么我想念的吗？

提前致谢！

# javascript - 简单的 ember.js 应用程序 - 为什么模型数据不出现在视图中？

> ID：11084329
> 
> 赞同：0
> 
> 时间：2012-06-18T13:50:55.770
> 
> 标签：javascript, ember.js, handlebars.js

我目前正在尝试学习 ember.js 框架。我有一个非常简单的应用程序，使用 starterkit 作为起点。

app.js 文件包含：

```
// Application
var App = Em.Application.create();

// Models
App.Person = Ember.Object.extend({
    fName: null,
    surname: null
});

// Controller
App.personController = Ember.ArrayController.create({
    content: [],
    init: function(){
        // create an instance of the person model
        var person = App.Person.create({
        fName: 'Fred',
        surname: 'Bloggs'
    });
    this.pushObject(person);
    }
}); 
```

而我`index.html`的基于默认样板：

```
<body>
  <script type="text/x-handlebars">
    {{#each App.personController}}
        <p>{{fName}} {{surname}}</p>
    {{/each}}
  </script>

  <!-- The missing protocol means that it will match the current protocol, either http or https. If running locally, we use the local jQuery. -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
  <script src="js/libs/ember-0.9.8.1.min.js"></script>
  <script src="js/app.js"></script>
</body> 
```

当我在浏览器中检查时，我没有看到任何 js 错误，并且呈现的 html 显示车把正在呈现，但没有内容。

```
<div id="ember163" class="ember-view">
    <script id="metamorph-0-start" type="text/x-placeholder"></script><script id="metamorph-0-end" type="text/x-placeholder"></script>
</div> 
```

非常感谢任何关于为什么没有渲染的帮助或解释。我原以为 init 函数会呈现单个用户

问候，

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:30:01.603

您需要`this._super()`在声明 var person 之前调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:51:14.110

您必须将 App 定义为全局命名空间，不带 var：

[http://jsfiddle.net/Sly7/GhBfn/](http://jsfiddle.net/Sly7/GhBfn/)

正如@Jimmy 所写，不要忘记调用`_super()`init 方法。

# iphone - 如何在 iOS 6 中为带有自定义背景图像的导航栏禁用导航栏阴影？

> ID：11084331
> 
> 赞同：50
> 
> 时间：2012-06-18T13:50:59.390
> 
> 标签：iphone, uinavigationbar, shadow, ios6

似乎在 iOS 6 中，即使您设置了自定义背景图像，导航栏也会自动添加阴影。我很确定 iOS 5 不是这种情况，因为当我在 iOS 5 和 6 sim 中测试相同的代码时，阴影出现在 iOS 6 中而不是 5 中。

有人对这个有了解吗？或者如何启用/禁用它？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-11-09T19:12:59.910

把它放在你的 AppDelegate

```
[[UINavigationBar appearance] setShadowImage:[UIImage new]];
// is IOS 7 and later
[[UINavigationBar appearance] setBackgroundImage:[UIImage new] forBarMetrics:UIBarMetricsDefault]; 
```

这就是为我做的。希望能帮助到你！

### 带有评论更新的 Swift 版本

```
 UINavigationBar.appearance().shadowImage = UIImage()
    UINavigationBar.appearance().setBackgroundImage(UIImage(), forBarMetrics: .Default) 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-10-14T13:34:13.597

我知道这已经通过上面更复杂的答案解决了，但这是我将阴影隐藏在导航栏下的最快和最简单的方法。

```
self.navigationController.navigationBar.clipsToBounds = YES; 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-04-25T09:19:20.053

Apple 开发文档中关于该`shadowImage`属性的注释：

> 讨论：默认值为nil，对应默认的阴影图像。当非零时，此属性表示要显示的自定义阴影图像而不是默认值。要显示自定义阴影图像，还必须使用 setBackgroundImage:forBarMetrics: 方法设置自定义背景图像。如果使用默认背景图像，则无论此属性的值如何，都将使用默认阴影图像。

因此，要使用 nil UIImage hack，您还必须设置自定义导航栏背景图像。这也可以是一个 nil 图像，这会产生一个漂亮的平坦、干净的“地铁”风格导航栏：

```
[[UINavigationBar appearance] setShadowImage:[[UIImage alloc] init]];
        [[UINavigationBar appearance] setBackgroundImage:[[UIImage alloc] init] forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-09-18T10:09:36.353

你也可以试试这个：

```
controller.navigationBar.shadowImage = [[[UIImage alloc] init] autorelease]; 
```

控制器是一个 UINavigationController。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-08T18:26:03.740

一般，非 NDA 侵权答案：

如果您不希望某些东西从图层中伸出，请将图层蒙版到其边界。

```
[self.layer setMasksToBounds:YES]; 
```

如果它本身不起作用，请将高度明确设置为 44（或 iPhone 上的横向 32）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-31T17:27:15.867

将 shadowImage 设置为空图像确实有效，但是，如果操作系统早于 iOS 6，则呈现解决方案的方式会导致添加属性。

一个更好的方法来做一些依赖于属性或方法存在的事情是：

```
if ([self.navigationController.navigationBar
respondsToSelector:@selector(shadowImage)]) {
self.navigationController.navigationBar.shadowImage = [[[UIImage alloc] init] autorelease];
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-26T00:11:20.030

有两种可能的解决方案，其中第二种在其他答案中提到。

1.  在导航栏背景图像的底部添加一个透明的像素，使其高度为 45pt。这将禁用 iOS 6 中的阴影。
2.  实现以下代码：

    ```
    // Omit the conditional if minimum OS is iOS 6 or above
    if ([UINavigationBar instancesRespondToSelector:@selector(setShadowImage:)]) {
        [[UINavigationBar appearance] setShadowImage:[[UIImage alloc] init]];
    } 
    ```

来源：[iOS 上的高级外观定制](https://developer.apple.com/videos/wwdc/2012/?id=216)，@27:15

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-09-13T07:39:19.610

由于`self.navigationController.navigationBar.shadowImage = [[UIImage alloc] init];`没有工作，我找到了一种简单可行的方法来消除`UINavigationBar`iOS 6和iOS 5中的阴影。希望有需要的人可以看到这篇文章。

您所要做的就是准备一张高度比导航栏高度大 1 像素的背景图像（例如，默认 UINavigationBar 为 320×45，当然 2x 为 640×90）。

然后只需使用`[[UINavigationBar appearance] setBackgroundImage: ...]`，您会发现阴影被那 1 个像素所取代。干杯！

顺便说一句，我发现 Twitter 也做了同样的事情，如果你解压缩`Twitter.ipa`并查看`bg_nav_bar_events_dark.png`，大小是 320×47。他们为 3 像素制作了自己的阴影 :)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-30T21:16:52.003

我无法发表评论，所以我会在这里添加我的信息。

也许上述建议在测试版中有效，但现在似乎并非如此。

```
self.navigationController.navigationBar.shadowImage = [[UIImage alloc] init]; 
```

以上不起作用，上面任何其他类似的答案也不起作用。我都试过了。

剪裁到边界确实有效，但没有给出我想要的结果，因为我希望其他视图挂在导航栏之外。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-16T18:26:15.017

当我试图让导航栏在 iOS6 和 iOS7 之间看起来相同时，我遇到了这个 SO 问题。

我发现有效的答案只是使用：

```
 NSMutableDictionary *titleBarAttributes = [NSMutableDictionary dictionaryWithDictionary: [[UINavigationBar appearance] titleTextAttributes]];
    [titleBarAttributes setValue:[NSNumber numberWithInt:0] forKey:UITextAttributeTextShadowOffset];
    [[UINavigationBar appearance] setTitleTextAttributes:titleBarAttributes]; 
```

即：将阴影偏移设置为零。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-29T08:29:43.513

替代方法如何：

`UINavigationBar.appearance().barStyle = .Black`

对于深色导航栏，iOS 不显示阴影。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-04T07:18:59.030

我有同样的问题，我已经通过以下方式解决了它：

```
CustomNavBar *navBar = (CustomNavBar *)self.navigationController.navigationBar;
        [navBar setBackgroundImage:[UIImage imageNamed:@"navigation_bar_gray.png"] forBarMetrics:UIBarMetricsDefault];
        navBar.shadowImage = [[UIImage alloc]init]; // this is what acctually removed the shadow under navigation bar 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-24T08:50:24.287

在 Swift 3.0 中，这看起来像这样

```
UINavigationBar.appearance().shadowImage = UIImage ()
UINavigationBar.appearance().setBackgroundImage(UIImage(), for: .default) 
```

# python - 我不断收到“NoneType 对象不可下标”

> ID：11084338
> 
> 赞同：0
> 
> 时间：2012-06-18T13:51:15.427
> 
> 标签：python, exception, csv

我正在尝试编写一个函数，允许我浏览 CSV 文件，然后解析该 CSV 文件，然后将每个值发送到 Google Search API（该位已写入）。

所以现在我有这个：

```
def loadtemplate():
    filename = tkFileDialog.askopenfilename(filetypes = (("CSV files", "*.csv")
                                                             ,("Text Files", "*.txt")
                                                             ,("All files", "*.*") ))
    if filename: 
            try: 
                csvfile = csv.reader(open(filename, 'rb'), delimiter=',')
                for row in csvfile:
                    for x in row:
                            generate(x)
            except: 
                tkMessageBox.showerror("Open Source File", "Failed to read file \n'%s'"%filename)
                return 
```

我的 CSV 文件如下所示：

```
seo,company name,drupal,wordpress themes,awesome web design 
```

没有什么太疯狂了。无论如何，我收到了这个错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "C:/Python27/Projects/Google Searcher/realsearcher.py", line 20, in loadtemplate
    generate(x)
  File "C:/Python27/Projects/Google Searcher/realsearcher.py", line 31, in generate
    gs = gs['cursor']
TypeError: 'NoneType' object is not subscriptable 
```

似乎以某种方式将值设置为无？但是我一直尝试使用条件 where `if x == None:`，它不允许查询通过，或者尝试将 CSV 文件更改为不应该解析类似内容的位置。

这是怎么回事，我该如何解决？

PS - 这是变量行的样子：

```
['seo', 'company name', 'drupal', 'wordpress themes', 'awesome web design'] 
```

这是 generate() （我使用了重复的代码，因为我觉得编写可以同时执行这两种解决方案的东西会花费更长的时间并且是不必要的，因为这个项目不会被扩展）：

```
def generate(item):
    infoget = urllib.quote(item)
    infoquote = '"' + infoget + '"' 
    response = urllib2.urlopen("http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=" + infoget)
    gs = simplejson.load(response)
    gs = gs['responseData']
    gs = gs['cursor']
    gs = gs['estimatedResultCount']
    print gs
    response = urllib2.urlopen("http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=" + infoquote)
    gs = simplejson.load(response)
    gs = gs['responseData']
    gs = gs['cursor']
    gs = gs['estimatedResultCount']
    print gs 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:02:58.413

从回溯中应该很明显，问题与 CSV 加载无关，而是来自`generate`函数。我们可以从该函数的代码中看到您正在查询 Google 搜索 API（针对每一行中的每个项目！）。但是，在各种情况下，您会得到一个空白结果。

您应该将函数重写为`generate`更明智，而不是向 Google 发送垃圾邮件（他们不喜欢它），并明智地处理故障 - 在依赖它们之前检查 JSON 中是否存在嵌套值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:56:15.097

```
gs = None
>>> gs = gs['aa']

Traceback (most recent call last):
  File "<pyshell#6>", line 1, in -toplevel-
    gs = gs['aa']
TypeError: unsubscriptable object
>>> 
```

不知何故，变量 gs 被重新初始化或初始化为`None`

```
gs['responseData'] is None 
```

尝试：

```
gs = simplejson.load(response)
gs = gs and gs ['responseData']
gs = gs and gs['cursor']
gs = gs and gs['estimatedResultCount']
print gs 
```

例子：

```
gs = None
>>> gs and gs['aa']

>>> print gs
None 
```

# common-lisp - 获取 ASDF 系统的版本

> ID：11084339
> 
> 赞同：1
> 
> 时间：2012-06-18T13:51:17.690
> 
> 标签：common-lisp, asdf

您可以在 ASDF 系统中设置的其他内容包括`:version`属性。有没有办法在运行时读取它？像`(system-version :my-system-name)`什么？

我知道有`asdf:version-satisfies`, 和`asdf:asdf-version`，但在这种情况下也没有我想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T17:32:19.583

这是代码：

```
(defun system-version (system-designator)
  (let ((system (asdf:find-system system-designator nil)))
    (when (and system (slot-boundp system 'asdf:version))
      (asdf:component-version system)))) 
```

它是这样工作的：

```
CL-USER> (system-version :cffi)
"0.10.7.1"
CL-USER> (system-version :foo)
NIL 
```

# php - 将数组应用到新类 PHP

> ID：11084346
> 
> 赞同：0
> 
> 时间：2012-06-18T13:51:39.967
> 
> 标签：php

这一直困扰着我一段时间的 PHP，我仍然无法弄清楚我会怎么做。基本上，目前对于我的 SQL 类，我将结果转储到一个数组中并将它们转换为一个对象以给出如下内容：

```
$first_post = $Post->find(1); 
```

（我也一直试图让语法看起来像： $Post::find(1); 但这完全是一个不同的纯粹审美问题）

然后你可以像这样使用 first_post ：

```
$first_post->title; 
```

这是通过将内容转换为`$post->find(1)`对象来完成的，如下所示：

```
$first_post = (object) array("title" => "blah"); 
```

我知道它实例化了一个新的 STDClass，但我不知道如何将方法绑定到 STDClass 的新实例。这主要是因为我可以做类似的事情：

```
$posts = $Post->all();
$last_post = $posts->last();
$specific  = $posts->find("name" => "hello"); 
```

有什么想法可以让 PHP 做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:09:14.610

您不能将方法绑定到，`StdClass`因为您可以使用 JavaScript 动态添加方法。

您需要使用所需的方法创建一个类。（您可以使用`extends`，或者`trait`如果您将有不同类的通用方法。）

例如：

```
class Post
{
    static function find()
    {
        $post = new Post();
        $array = array('title' => 'First Post');
        foreach ($array as $key => $value)
        {
            $post->$key = $value;
        }
        return $post;
    }

    public function do_something()
    {
        echo $this->title;
        return $this;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:12:41.110

> （我也一直试图让语法看起来像： $Post::find(1); 但这完全是一个不同的纯粹审美问题）

使用范围解析运算符时，您正在访问静态方法和/或常量。这些是作用于类而不是类的实例的方法。例如：

```
// the find method retuns a new Post instance and 
// does not try to access $this
$post = Post::find(1); 
```

至于从数组为帖子创建对象，最好创建自己的`Post`类并相应地填充它，或者使用将表数据作为对象而不是数组返回的数据库函数之一，例如[`mysqli_result::fetch_object`](http://us2.php.net/manual/en/mysqli-result.fetch-object.php)or [`mysql_fetch_object`](http://us2.php.net/manual/en/function.mysql-fetch-object.php)。

如果创建您自己的 Post 类，您可以将数据库信息存储在一个数组中并使用`__call()`,`__get()`和`__get()` [魔术方法](http://php.net/manual/en/language.oop5.magic.php)来访问该数据。例如：

```
class Post() {
    protected $data;

    public function __construct($data) {
        $this->data = $data;
    }

    // access data with a getFoobar() style call
    public function __call($name, $args) {
        if (substr($name, 0, 3) == 'get') {
            $key = strtolower(substr($name, 3));
            if (array_key_exists($key, $this->data)) {
                return $this->data[$key];
            }
        }

        $class = get_class($this);
        throw new Exception("Call to undefined method $class::$name");
    }

    // access data like a class property
    public function __get($key) {
        if (array_key_exists($key, $this->data)) {
            return $this->data[$key];
        }

        throw new Exception("Attempt to access non-existant property $class::$name");
    }

    // set the data like a class property
    public function __set($name, $value) {
        $this->data[$name] = $value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T13:55:58.843

您可以但需要在每次实例化时每次都这样做：

```
$obj = new stdClass();
$obj->myMethod = function($name) {echo 'Hello '.$name;}; 
```

好的，上面不起作用...我已经成功地使用了文档中的这种方法，这与相同的思路：http: [//uk3.php.net/manual/en/reserved.classes.php#105404](http://uk3.php.net/manual/en/reserved.classes.php#105404)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T13:57:11.603

我想你可以创建一个`Post`类

实例化后，它可以获取所有帖子并存储为数组。

它可以有一个 find 方法来搜索指定查询的所有帖子。

它还可以有一个 last 和 first 方法，分别获取最后一个项目或第一个项目。

我相信您可以使用该方法动态创建类属性`__get`。这接受一个属性名称，它可以搜索您的帖子数组并返回该值（如果存在）。

[您可以在 PHP 中动态创建实例属性吗？](https://stackoverflow.com/questions/829823/can-you-create-class-properties-dynamically-in-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T14:28:54.237

如果您正在使用`PDO`从数据库中检索数据，请查看此方法[`PDOStatement::setFetchMode`](http://www.php.net/manual/en/pdostatement.setfetchmode.php)。您可以告诉 PDO 为结果中的每一行实例化一个新类[`PDO::FETCH_CLASS`](http://www.php.net/manual/en/pdo.constants.php)。确切的方法定义是这样的：

```
bool PDOStatement::setFetchMode ( int $PDO::FETCH_CLASS , string $classname , array $ctorargs ) 
```

并将其放入您的上下文中：

```
namespace My\Web;

class Post {
    public function __construct($arg) {
        var_dump($arg);
    }

    public function getTitle() {
        return $this->title;
    }

    public function getFormatedContent() {
        return whatever($this->content);
    }
} 
```

获取对象：

```
$stmt = $conn->query($sql);
$posts = $stmt->setFetchMode(PDO::FETCH_CLASS, 'My\Web\Post', array(rand()));
print_r($posts);
// print array of My\Web\Post objects, each will print some random number in it's constructor. 
```

所以我想向您展示的是，您不必将属性数组转换为 stdClass 然后绑定一些方法。
您可以根据需要创建类，并让 PDO 使用该类包装查询结果。

顺便说一句，它也适用于最新的 Doctrine DBAL（因为它是建立在 PDO 之上的）。

# java - 从子类访问时的最终字段状态

> ID：11084347
> 
> 赞同：7
> 
> 时间：2012-06-18T13:51:46.790
> 
> 标签：java

我看到了一个奇怪的行为，根据 JMM 似乎不应该发生。我有扩展类 A 的 B 类，A 中的最终受保护字段在 A 构造函数中初始化，B 类在其构造函数中访问该构造函数。

但是，在极少数情况下，我在 B 中访问时会得到 NPE。有什么想法吗？

部分代码：

```
class AsyncReplicationSourceGroup extends AbstractReplicationSourceGroup{

    public AsyncReplicationSourceGroup(DynamicSourceGroupConfigHolder groupConfig){
        super(groupConfig);
        createReplicationChannels();  
    }

    protected void createReplicationChannels(){
        //...
        specificLogger.finest("created channel");  // this is where the NPE is thrown from
        //...
    }
}

abstract class AbstractReplicationSourceGroup{

    protected final Logger specificLogger;

    public AbstractReplicationSourceGroup(DynamicSourceGroupConfigHolder groupConfigHolder){
        specificLogger = Logger.getLogger(Constants.LOGGER_REPLICATION_GROUP + "." + _groupConfigHolder.getConfig().getName());
        //...
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:25:35.350

从单独发布的代码中无法确定，但如果您确定记录器本身为空（并且您没有错误地从内部看到 NPE，例如，specificLogger.finest），那么最可能的解释是由于某种原因，Logger.getLogger 偶尔会返回 null。

我不认为问题出在线程上，因为只要构造函数内部没有引用泄漏，一旦构造对象可见，就保证分配给构造函数的最终字段可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:53:15.050

从您的示例中很难看出这一点，但我的猜测是它必须处理日志记录框架和 train-wreck 调用才能在构造函数中对其进行初始化。这是 logger 声明应该始终是**private static final的原因之一**

# java - PrintWriter 的 toString() 结果泄漏

> ID：11084349
> 
> 赞同：-1
> 
> 时间：2012-06-18T13:51:51.963
> 
> 标签：java

> **可能重复：**
> [防止根据 PCI 标准暴露敏感数据 - response.getWriter().write(xml.toString())](https://stackoverflow.com/questions/11076992/presvent-exposure-of-sensitive-data-against-pci-standards-response-getwriter)

我在以下 Java 代码中收到消息“toString() 结果泄漏”：

```
PrintWriter out = response.getWriter();
out.println("<a href=\""
            + XYZAC
            + "?"
            + fieldArray.get(i)
            + "="
            + content[j].split("=")[0]
            + "&sessionId="
            + request.getAttribute("sessionId").toString()
            + "&mSA=" + pHNO
            + "\"" + ">"
            + content[j].split("=")[1]
            + "</a>"); 
```

谁能告诉我泄漏在哪里，以及如何解决？该消息来自代码审计工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:56:48.590

对 toString 的调用是多余的。也许这就是它所抱怨的。

我会删除它并重试。

# iphone - 持续时间后如何更改 UIImageView 的 UIImage（闪烁效果）

> ID：11084358
> 
> 赞同：2
> 
> 时间：2012-06-18T13:52:16.520
> 
> 标签：iphone, animation, uiimageview, uiimage, blink

我正在尝试为 imageview 上的两个图像之间的闪烁设置动画，以将用户的注意力吸引到一个指示器上以注意到变化。我希望图像在保留在新图像上之前只闪烁一到两次。事件的时间线如下所示：

1.  旧图像已设置，正在等待特定事件发生。
2.  事件发生并开始闪烁动画。新图像显示 0.25 秒。
3.  旧图像显示 0.25 秒。
4.  新图像显示 0.25 秒。动画结束。

由于动画的时间很短，我的印象是有一种方法可以在不使用 NSTimer 的情况下做到这一点。我目前的尝试如下

```
+(void)blinkImage:(UIImageView*)view toNewImage:(UIImage*)newImage numOfTimes:(int)numOfTimes{

    float waitInterval = 0.25;
    float totalWaitTime = 0.0;
    UIImage *oldImage = view.image;

    view.image = newImage;
    totalWaitTime = totalWaitTime+waitInterval;

    for (int times = 0; times<numOfTimes; times++) {
        [UIView beginAnimations:@"setOld" context:nil];
        [UIView setAnimationDelay:totalWaitTime];
        [UIView setAnimationDuration:waitInterval];
        view.image = oldImage;
        totalWaitTime = totalWaitTime+waitInterval;
        NSLog(@"SetOld; waitTime %f", totalWaitTime);
        [UIView commitAnimations];

        [UIView beginAnimations:@"setNew" context:nil];
        [UIView setAnimationDelay:totalWaitTime];
        [UIView setAnimationDuration:waitInterval];
        view.image = newImage;
        totalWaitTime = totalWaitTime+waitInterval;
        NSLog(@"SetNew; waitTime %f", totalWaitTime);
        [UIView commitAnimations];
    }
} 
```

然而，这并没有产生预期的结果。使用上面的代码，视图只是简单地变成了新的图像，没有做更多的事情。

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:00:00.807

把这一行放在下面`setAnimationDuration`

```
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:yourView cache:YES]; 
```

这里有不同类型的动画..你也可以使用下面的另一种动画方式

```
#define kAnimationKey @"transitionViewAnimation"

CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFromBottom];
    [animation setDuration:1.0];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[yourView layer] addAnimation:animation forKey:kAnimationKey]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:02:18.043

为什么不直接使用 UIImageView 的内置动画呢？

```
Animating Images
  animationImages  (property)
  highlightedAnimationImages  (property)
  animationDuration  (property)
  animationRepeatCount  (property)
– startAnimating
– stopAnimating
– isAnimating 
```

或者你总是可以只设置突出显示的图像并切换它而不是整个图像

```
- (id)initWithImage:(UIImage *)image highlightedImage:(UIImage *)highlightedImage 
```

# java - 确定高尔夫球场顺序函数 Java

> ID：11084361
> 
> 赞同：1
> 
> 时间：2012-06-18T13:52:39.017
> 
> 标签：java, algorithm, sorting

我正在开发一个 Android 应用程序，该应用程序需要根据一轮高尔夫的分数来确定当前的发球台顺序。对于那些不知道的人，发球顺序（或荣誉）是根据上一洞（当前第 1 洞）得分最高（最低）的球员从发球台击球的顺序。如果有平局，那么我需要查看当前的hole-2 ...等。直到我弄清楚了顺序，或者检查了所有分数，此时我会使用他们开始的顺序。一旦我确定了一个球员的顺序，我就会停止检查那个球员的分数。问题是球员可以从任何洞开始。也可以有任意数量的孔。因此，如果他们从第 3 洞开始，那么他们将在第 2 洞结束。所以他们将到达第 18 洞（假设球场是 18 洞），然后绕道并从第 1 洞开始。

```
Example data:
Holes: 9
Starting hole: 3
Player 1: 0,0,5,4,5,6,3,2,5
Player 2: 0,0,4,2,5,3,3,6,3
Player 3: 0,0,4,3,7,3,2,2,5

Assume the starting order is: Player 1, Player 2, Player 3

Example Output of the order after calculation:
Player 2, Player 3, Player 1 
```

我已经攻击了这个问题，以为这会很容易，但结果却比我想象的要难。我已经通过遍历每个玩家开始迭代路线，然后遍历每个玩家在第一个洞的得分，他们都有得分......等等，但我发现我有很多 for 循环，它只是用大量的 if 语句变得丑陋。我打算尝试一个递归解决方案，但我想看看是否有人对此有任何想法，而我暂时休息一下。如果有人想查看我的代码，我目前正在工作并在 PHP 中对其进行测试，因为我们的开发服务器上没有 Java，因此代码将使用 PHP。但是移植到 Java 会很容易。感谢您的任何帮助！

编辑：我还应该注意，我随时都想知道这些信息，无论他们是否完成了这一轮比赛。因此，如果他们从第 3 洞开始并且只打了 2 个洞，那么我需要考虑未打过的洞。如果这还不是很明显...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:03:18.740

第一个想法是使用[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)。假设你有一个 Players 集合并且每个玩家都有它的分数，你可以实现类似的东西：

```
public Comparator<Player> PlayerComparator = new Comparator<Player>(){

    @Override
    public int compare(Player p1, Player p2) {
       int order = 0;
       //Compare the score of the players starting from the starting hole
       while(...){
          ...
       }
       return order;
    }

}; 
```

然后，只需执行：

```
Collection.sort(playerList, PlayerComparator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:11:41.893

你只需要一个循环。

循环遍历孔号（从它们的起始孔开始，必要时返回 1）。

在每个洞，查看球员在该洞的得分，然后更新当前谁获得荣誉的状态。

# c++ - 无法在 Visual Studio 2010 中打开包含文件“stdlib.h”

> ID：11084362
> 
> 赞同：3
> 
> 时间：2012-06-18T13:52:41.027
> 
> 标签：c++, visual-studio-2010, tesseract

我正在尝试使用 Visual Studio 2010 Pro (SP1) 编译第三方库。不幸的是，当我尝试这样做时，我收到了大约 1000 次此错误：

> 错误 C1083：无法打开包含文件：'stdlib.h'：没有这样的文件或目录。

搜索将我带到目录 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC 应该包含 stdlib.h，但该目录不包含它。事实上，我的整台计算机上都没有 stdlib.h，尽管在随 Visual Studio 分发的示例中有很多对它的引用。

我已经很长时间没有在 Windows 上使用 C++了，即便如此，我的使用也并不先进，所以我不确定我需要下载什么。我的印象是这应该开箱即用。

我试图编译的库（[Tesseract](http://code.google.com/p/tesseract-ocr/)）通常是用 Visual Studio 2008 构建的。有没有可以下载头文件的地方？搜索 Visual C++ SDK 只为我提供了用于为 IDE 进行扩展的 SDK。

如果这有助于缩小问题范围，我通常使用 Visual Studio Pro 进行 C# 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T18:01:08.310

我通过以下步骤解决了同样的问题：

1.  通过安装 DVD 卸载 Visaul Studio 2010。
2.  通过控制面板删除了有关 Visaul Studio 2010 的所有内容
3.  从 DVD 重新安装 Visual Studio 2010 Pro。选择完整安装。

我觉得关键是通过DVD卸载VS。我使用控制面板卸载，然后重新安装，但没有解决问题。希望这会帮助一些人。此外，我觉得根本原因是另一个版本的 Visual Studio。我之前有过VS 2008。它运作良好。问题发生在我更新到 VS 2010 之后。

# c - 此代码如何为任何给定数字找到下一个最高的 2 幂

> ID：11084367
> 
> 赞同：4
> 
> 时间：2012-06-18T13:53:20.120
> 
> 标签：c, algorithm, bit-manipulation

此代码如何**为 32 位整数查找任何给定数字 [>1] 的 2 的下一个最高幂？**

```
n--;
n = n | n>>1;
n = n | n>>2;
n = n | n>>4;
n = n | n>>8;
n = n | n>>16;
n++; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T13:57:09.607

移位和按位或的序列保证了一个由所有`1`s 组成的数字，它比 2 的幂小一。将 1 添加到它会得到 2 的幂。

初始递减 1 是为了使其适用于`n`已经是 2 次方的值。

`n`（显然，如果最初是，则此代码不起作用`0`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:01:50.680

递减将使 case 2 ^ n 给出结果 2 ^ n 而不是 2 ^ (n + 1)。它与末尾的增量不对应。

递减和递增之间的部分实际上试图填充所有比当前最高有效位 1 更重要的位。最高位 1 将在每一行之后逐渐传播，并将填充所有不那么重要的位最后一行。

增量是为了达到 2 的下一个最高幂的结果。

# mysql - MySQL中不同的SQL

> ID：11084368
> 
> 赞同：0
> 
> 时间：2012-06-18T13:53:34.943
> 
> 标签：mysql, sql, distinct

我有两个没有任何关系或外键的表，我想在查询中组合两列。

```
 select   DISTINCT a.OdemeTuru, b.MAdi from odemeturu as a, 
 musteriler as b order by b.MID,a.OID 
```

我可以从两者中获取值，但它是混合的并且不同的不起作用。

结果如下：

```
'Nakit', 'Ali' 'Veresiye', 'Ali' 'Kredi Kartı', 'Ali' 'Özel', 'Ali'
'Nakit', 'Ahmet' 'Veresiye', 'Ahmet' 'Kredi Kartı', 'Ahmet' 'Özel',
'Ahmet' 'Nakit', 'Cemil' 'Veresiye', 'Cemil' 'Kredi Kartı', 'Cemil'
'Özel', 'Cemil' 'Nakit', 'Furkan' 'Veresiye', 'Furkan' 'Kredi Kartı',
'Furkan' 'Özel', 'Furkan' 
```

但是，我想要以下

```
'Nakit', 'Ali'
'Özel', 'Ahmet'
'Veresiye', 'Cemil'
'Kredi Kartı', 'Furkan' 
```

我的查询中的错误在哪里？（表的行数相同）

编辑：对不起，我忘记了一些事情。不存在a.tarih

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:11:04.703

我能想到交叉应用 2 个 4 行表以获得 4 行而不是 16 行的唯一方法是加入行号：

```
SELECT  a.OdemeTuru, b.Madi
FROM    (   SELECT  @a:= @a + 1 AS RowNumber, OID, OdemeTuru
            FROM    odemeturu,
                    (SELECT @a:= 0) AS a
            ORDER BY OID
        ) AS a
        INNER JOIN
        (   SELECT  @b:= @b + 1 AS RowNumber, MID, Madi
            FROM    musteriler,
                    (SELECT @b:= 0) AS b
            ORDER BY MID
        ) AS b
            ON a.RowNumber = b.RowNumber 
```

中`odemeturu`的行按 OID 排序，中的行`musteriler`按 MID 排序。第一行`odemeturu`与 的第一行连接，第二行与第二行连接`musteriler`，依此类推。这是相当随意的，但似乎符合您的标准。

您可以更改子查询的排序方式以更改结果。

* * *

**[SQL Fiddle 示例](http://sqlfiddle.com/#!2/d32a2/1)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:01:29.567

如果您可以以某种方式加入两个表，那么您可能可以这样做：

```
select   DISTINCT a.OdemeTuru, b.MAdi from odemeturu a leftjoin musteriler b 
on a.OID = b.MID order by b.MID,a.OID a.tarih 
```

**编辑：**

如前所述，没有任何关系的表和 MID/OID 也不同；唯一可能的方法是使用`UNION`like获得所有不同的值

```
select DISTINCT OdemeTuru from odemeturu order by a.OID,a.tarih 
UNION
select distinct MAdi from musteriler order by b.MID 
```

# t4mvc - 在 Visual Studio 2012 RC 中使用 T4MVC 和 .NET 4.5

> ID：11084369
> 
> 赞同：0
> 
> 时间：2012-06-18T13:53:46.377
> 
> 标签：t4mvc, asp.net-4.5

有谁知道这是否可能？如果我为 4.0 兼容性而构建，我可以让它正常工作，但是当我使用 4.5 时，我所有的测试都以熟悉的方式失败；

> System.Security.VerificationException：方法 Microsoft.Web.Mvc.Internal.ExpressionHelper.GetRouteValuesFromExpression：类型参数“T”违反类型参数“TController”的约束

我认为这是由于 MVC 版本不匹配造成的。我尝试在 4.5 的配置中添加绑定重定向，但正如我所料，这似乎不起作用。

# firefox - Firefox 上的 Highcharts 打印错误

> ID：11084370
> 
> 赞同：0
> 
> 时间：2012-06-18T13:53:55.613
> 
> 标签：firefox, printing, highcharts, multipage

我正在使用 Highcharts 版本 2.2.5。

最近我们发现了在 Firefox 13.0.1 上打印的问题（它适用于 IE 和 chrome）

测试在这里：http: [//jsfiddle.net/a2avu/6/](http://jsfiddle.net/a2avu/6/)

单击打印按钮时，它将仅打印第一页，第二页将为空白。

我该如何解决？图表定义有什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:18:48.633

它适用于 Firefox 13.0.1。您应该尝试使用新的配置文件。您可以从命令行启动 Firefox。

```
firefox -ProfileManager --no-remote 
```

然后创建配置文件并按“启动 Firefox”。

如果问题仍然存在，您应该告诉我们您使用的是哪个操作系统。如果这解决了您的问题，那么您的 Firefox 配置文件有问题。

# hibernate - FK 字段上的休眠 createCriteria 不适用于我

> ID：11084371
> 
> 赞同：3
> 
> 时间：2012-06-18T13:54:04.690
> 
> 标签：hibernate, foreign-key-relationship, postgresql-9.1, query-by-example

我已经坚持了一段时间，无法取得进展。问题是当 DB 中的限制字段是 FK 时如何使用 Hibernate 的*createCriteria 。*

这里有 2 个表：*account*和 *cf_account_type*，代表限定符（客户、员工等）

```
 CREATE TABLE account (
        usern character varying(30) NOT NULL,
        cf_account_type character varying(30) NOT NULL
    );
    ALTER TABLE ONLY account
        ADD CONSTRAINT pk_account366 PRIMARY KEY (usern);

    CREATE TABLE cf_account_type (
        cf_account_type character varying(30) NOT NULL
    );
    ALTER TABLE ONLY cf_account_type
        ADD CONSTRAINT pk_cf_account_type373 PRIMARY KEY (cf_account_type);

    ALTER TABLE ONLY account
        ADD CONSTRAINT fk_account465 FOREIGN KEY (cf_account_type) 
        REFERENCES cf_account_type(cf_account_type); 
```

Hibernate 文档建议的解决方案可在 [此处](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#querycriteria-examples)找到，如下所示：

```
 Cat cat = new Cat();
    cat.setSex('F');
    cat.setColor(Color.BLACK);
    List results = session.createCriteria(Cat.class)
        .add( Example.create(cat) )
        .list(); 
```

但是，*性别*和*颜色*不是对象，而是纯文本字段。所以，问题是我的代码从***account*****中返回所有行，并且似乎没有考虑到限制***。*

 *```
 Session session = SF.getSession();
    Transaction tx = session.beginTransaction();
    //creating an example instance
    Account instance = new Account();
    instance.setCfAccountType(cfAccountType);

    //fetching from db
    List<Account> result = (List<Account>)session.
            createCriteria(Account.class).
                    add(Example.create(instance)).list();
    tx.commit(); 
```

附加信息：

数据库是 PostgreSQL 9.1.2，它通过 JDBC4 (postgresql-9.1-902.jdbc4.jar) 连接

从 hibernate.cfg.xml 文件中提取

```
 <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.password">CENSORED</property>
    <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/CENSORED</property>
    <property name="hibernate.connection.username">postgres</property>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQL82Dialect</property>

    <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
    <property name="hibernate.current_session_context_class">thread</property>
    <property name="hibernate.search.autoregister_listeners">false</property>
    <property name="hibernate.connection.autocommit">true</property>
    <property name="hibernate.show_sql">false</property>

    <property name="hibernate.hbm2ddl.auto">update</property> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:05:36.657

从[文档中](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#querycriteria-examples)：

> 版本属性、标识符**和关联**被忽略。默认情况下，空值属性被排除在外。

（强调我的）

您需要使用常规标准限制：

```
session.createCriteria(Account.class, "account")
       .add(Restrictions.eq("account.cfAccountType", cfAccountType)
       .list(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:01:20.320

[从文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-examples)中引用 QBE 的用法：

> 版本属性、标识符和**关联被忽略**。默认情况下，空值属性被排除在外。

虽然，它随后显示了在关联对象上放置标准的示例：

```
List results = session.createCriteria(Cat.class)
    .add( Example.create(cat) )
    .createCriteria("mate")
        .add( Example.create( cat.getMate() ) )
    .list(); 
```

将其应用于您的案例：

```
List<Account> result = (List<Account>) session.createCriteria(Account.class)
                .add(Example.create(instance))
                .createCriteria("ofAccountType")
                     .add(Example.create(instance.getOfAccountType()))
                     .list(); 
```*

# qt - 在 QT 中绘制统计图表的最佳方法是什么

> ID：11084372
> 
> 赞同：1
> 
> 时间：2012-06-18T13:54:15.177
> 
> 标签：qt

我想使用 QT4.7 绘制一些统计图表，

这里有一些例子： [示例图片](http://processtrends.com/toc_statistical_charts.htm)

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:06:43.233

没有“最佳”方式，但根据我的个人经验，我推荐[Qwt](http://qwt.sourceforge.net/)。一致的文档通常是需要的（基本上只有 doxygen），但它是开源的，恕我直言，内部设计简洁易懂。许可证是宽松的 LGPL。

# mysql - 从 MySql 中的每个类别中选择随机 N 条记录（不是顶部）

> ID：11084373
> 
> 赞同：1
> 
> 时间：2012-06-18T13:54:25.347
> 
> 标签：mysql, sql

我有以下`destination`和表格：`image``destination_image`

（MYSQL）：

*   目的地：id_destination
*   图片：id_image、文件路径、大小
*   目的地图像：id_destination，id_image

我需要为每个目的地选择给定大小的~~随机~~N 幅图像；其中 N 是在运行时定义的，目的地是从 的范围内选择的`id_destination`。

我不需要`top`N 张图片，只需要~~随机~~的N 张图片。

有人可以指出正确的 SQL 查询的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:43:40.530

如果您想要每个目的地的“x”个条目，您可以按 MySQL 变量执行...类似

```
select
      di.id_destination,
      di.id_image,
      i.filepath,
      i.size,
      @RandSeq := if( @lastDestination = di.id_destination, @RandSeq +1, 1 ) as FinalSeq,
      @lastDestination := di.id_destination as carryForward
   from
      destination_image di
         join image i
            on di.id_image = i.id_image,
      ( select @lastDestination := 0, 
               @RandSeq := 0 ) SQLVars
   where
      di.id_destination between rangeStart and rangeEnd (or similar criteria for your "range" )
   having
      FinalSeq = 4  ( just a sample, but your "N" entries per destination desired)
   order by
      id_destination,
      rand() 
```

这将在每个目的地获得 4 个（或在您的情况下为“N”个）条目。关键是顺序。order by 将首先按此顺序返回记录，然后应用 @sql 变量。因此，在每个目的地上，行将首先被 RAND()omized，但在单个目的地内是随机的......在下一个目的地上也是如此，下一个......然后@vars 生成 1、2、3等，用于“FinalSeq”列。“HAVING”子句限制哪些行允许在最后一行返回具有该条件的条目，因此每个示例只有 4 个。

***SQL 的澄清。***

@variables 几乎就像 SQL 语句中使用的内联变量...通过执行 ( select @someVar := someValue, @anotherVar := '', @someDateVar := getdate() ) 作为 SQLVars ...基本上只是创建和初始化可以针对查询将要处理的每一行设置、更改和更新的变量...在 SQL 语句的末尾，然后释放变量。有些人将它们预先声明为单独的 SET 命令，然后运行 ​​SQL-Select .. 我更喜欢内联。

现在，它们是如何使用的......它们可用于跟踪 SQL-select 语句返回的任何行的几乎任何内容，但是如果您需要按特定顺序进行处理，则首先处理 order 子句，然后传递记录要使用@vars 处理...因此，请考虑在程序中设置@vars。它们按照它们在 SQL 命令中的处理顺序被设置为一个，无论最终结果是什么，都像任何其他类似的函数调用一样存储到最终的列名中，例如填充、修剪、上层、合并等。

现在，发生了什么...让我们看一下步骤...为便于理解，假设我们有一个表，10 行对应 1=A，2=B，3=C --- 10= J。这些是记录的自然顺序，例如自动增量。现在，如果您要通过 rand() 运行查询 select * from table order，您可能会得到 3-C、9-I、2=B、7=G 等……这只有 LIMIT 4返回前 4 个，你就完成了。

现在，分别采用记录 1-10 = AJ 的相同场景。现在，让我们扩展以允许您的多个目的地和大小的“组”，例如...

```
ID  Ltr   Dest   Size
1   A     X      a
2   B     Y      a
3   C     X      a
4   D     X      a
5   E     Y      b
6   F     X      c
7   G     Y      b
8   H     X      a
9   I     Y      a
10  J     X      b
11  K     X      a
12  L     Y      a
13  M     X      a
14  N     Y      a 
```

现在，您想要所有目的地的东西，但例如一个单一尺寸的“a”......我添加了一些额外的东西。

```
select * from SampleTable where Size="a" order by rand() 
```

您可以获得所有“X”目的地，或“Y(a)”​​记录和“X(a)”记录，或其他类似的可用余额。但是，不能保证您获得 3 个“X”和 3 个“Y”大小为“a”的记录。如果您将 ORDER 更改为 ORDER BY Dest, rand()，这会将所有“X”条目放在首位，然后是“Y”，限制不起作用......所以，应用我的选择原则，你按目的地和随机排序，并应用一个 Size = "a" 的 where 子句，您可能会得到......（首先按目的地，然后随机......

```
13  M     X      a
3   C     X      a
8   H     X      a
1   A     X      a
11  K     X      a
4   D     X      a

9   I     Y      a
14  N     Y      a
2   B     Y      a
12  L     Y      a 
```

现在，将@variables 应用到混合...只需应用@RandSeq 和@lastDestination

@RandSeq := if( @lastDestination = di.id_destination, @RandSeq +1, 1 ) 作为 FinalSeq，@lastDestination := di.id_destination 作为 carryForward

```
 Start Value of 
ID  Ltr   Dest   Size   @RandSeq  @lastDestination  FinalSeq  carryForward
13  M     X      a      0         ''                1         X (current record value of dest)
3   C     X      a      1         X                 2         X
8   H     X      a      2         X                 3         X
1   A     X      a      3         X                 4         X
11  K     X      a      4         X                 5         X
4   D     X      a      5         X                 6         X

9   I     Y      a      6         X                 1         Y (change to Y resets counter to 1)
14  N     Y      a      1         Y                 2         Y
2   B     Y      a      2         Y                 3         Y
12  L     Y      a      3         Y                 4         Y 
```

现在，如果您应用“HAVING”子句 FinalSeq <= 3，您将获得上面列出的所有 FinalSeq <= 3 行，目标“X”的剩余 4、5、6 将被忽略，“ Y" 将被忽略...因此从给定大小的每个目的地留下 3 个。

希望这可以澄清查询的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T13:56:45.843

尝试类似`ORDER BY RAND() LIMIT N`where`N`应该返回的结果数。例如：

```
SELECT i.id_image FROM image i
JOIN destination_image di ON i.id_image = di.id_image
WHERE di.id_destination > N AND di.id_destination < M
AND i.size = X
ORDER BY RAND() LIMIT Y 
```

将`N`、`M`和替换为您`X`的`Y`值。

# php - PHP 和弦转置器

> ID：11084376
> 
> 赞同：2
> 
> 时间：2012-06-18T13:54:34.740
> 
> 标签：php, regex, string

我正在编写一个脚本，该脚本需要找到文本中某些字母（和弦）的匹配项，然后替换它们。

1.  但也有一些例外。如果下一个“2”空格为空，则它们是匹配的。
2.  如果只有一个空格，但第二个空格也包含一个符合上述规则的字母。

EX（匹配这些 A、Am、B、C#）：文本是：

Am BA 飞机降落 C# B

在此示例中，（Am、B、C# 和 B）应该匹配但不是“A”平面。

我对字符串函数和正则表达式不太擅长任何帮助将不胜感激

我基本上是在尝试写一个转置器，但我主要担心的是它会选择错误的文本谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:52:40.617

假设您无法控制输入（例如，您从指法网站上抓取这些），并且由于某种原因这些和弦在单词之间交错而不是在行之间休息，那么这是一个开始：

```
<?php

    $mods = '(?:maj|m|min|sus|add9|aug|dim|dom|...)';
    $regex = "/\b([ABCDEFG][#b]?$mods?)\s+/"

?> 
```

但是，恐怕我不理解您的“下两个空格”限制。但是，如果您想区分和弦“A”和单词“A”，我建议您不要使用您的方法。相反，请考虑以下替代规则，尽管远非完美。“A”是唯一一个通常单独是一个词的和弦，所以*如果*你的歌词大写，“A”是一个词而不是和弦的暗示是下一个词是一个未大写的词：

```
 Am B A plane came down C# --> Am B C#

    Am B A Plane came down C# --> Am B A C# 
```

如果您考虑一下，除了上下文线索之外，这也是人类可以分辨的方式。要使用此策略制作正则表达式，可以将单独的“A”视为一种特殊情况，如下所示。

```
<?php

    $mods = '(?:maj|m|min|sus|add9|aug|dim|dom|...)';
    $regex_1 = '((?:A(?!\s)|[BCDEFG])[#b]?$mods?)';
    $regex_2 = '(A(?=\s+[a-z]))';
    $regex = "/\b(?:$regex_1|$regex_2)\s+/";

?> 
```

在此处查看正在运行的演示：[http](http://rubular.com/r/tRjozL7KCx) ://rubular.com/r/tRjozL7KCx 。

这远非完美，但您可以开始并改进。

更新：解释，帮助学习。

```
\b                      A word-boundary, so "A plane came down and CRASHED
                        into the sea" will not match "D" as a note.
(?:                     A non-capture group.  (Ignore this for now.)
    (                   A capture group.  (To encapsulate $regex_1.)
        (?:             A non-capture group.  (Ignore this for now.)
            A(?!\s)     An "A" not followed by whitespace, i.e. a "lone A".
            |           An "OR" operator.
            [BCDEFG]    Any one of these characters, B C D E F G.
        )
        [#b]            Any one of the characters, # b.
        ?               Says the previous entity (# or b) is optional.
        $mods           Any one of the modifiers, e.g. maj m min ...
        ?               Says the previous entity (maj m min ...) is optional.
    )

    |                   An "OR" operator.

    (                   A capture group.  (To encapsulate $regex_2.)
        A(?=\s+[a-z])   An "A" that is followed by at least one whitespace
                        character, then a lower-case letter.
    )
)
\s+                     A bunch of whitespace. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T03:24:35.977

好吧，无论如何这里是转置和弦的课程仍然需要一些调整，但现在它适合我的需要。

[PHP CHORD TRANSPOSER 类](http://pastebin.com/994jy3ab)

它检测几乎所有可能的和弦并拾取内联和弦。如果您包含 Flats 和弦，它将转调为 flats 而不是升号，sharp 也是如此，默认为Sharp，因此 F Transpose by 1 是 F# 而不是 Gb

它还支持 PDF 创建，只需下载[DOMPDF](http://code.google.com/p/dompdf/downloads/list)并取消注释包含和第 82-86 行并从 $html 变量中删除回显。

希望这会有所帮助，但它仍然远非完美，哈哈，但到目前为止它还没有错过任何和弦

用多首歌曲测试它并发布反馈错误等

# javascript - 在 Android 中阻止 Webview 的特定内容

> ID：11084377
> 
> 赞同：4
> 
> 时间：2012-06-18T13:54:38.607
> 
> 标签：javascript, android, webview, browser

我知道这个问题已经被问过好几次了，但我还没有明确的答案。请用你的想法启发我。

**要求**：- 应用程序是一个浏览器，其中只允许查看和访问“列入白名单”的 URL。例如，Yahoo.com 在白名单中，但 Youtube 不在。雅虎可能在其网页上嵌入了 Youtube 视频。在这种情况下，我希望我的浏览器根本不显示嵌入式视频，即阻止部分 Web 视图。

**调查结果**：-

1）有两种方法，一种是`shouldOverrideUrlLoading()`我们可以覆盖并决定是否打开链接。其次是 `shouldInterceptRequest()`[3.0 above] 我们可以覆盖和更改页面的内容，就像[这里](https://stackoverflow.com/questions/8273991/webview-shouldinterceptrequest-example)给出的一样。但它对于修改网页的个别内容没有用。 `onLoadResource()`是为每个加载的资源调用的方法，但我们不能覆盖它来显示自定义内容。如果我们可以更改正在加载的内容的内容，类似于 onLoadResource 的东西将是一个完美的解决方案。（可能的安全问题）

[2) 更改 HTML 内容：-这里](https://stackoverflow.com/questions/3479833/is-it-possible-to-get-the-html-code-from-webview)给出的几种方法是使用 HTTPClient 下载页面内容，然后将其加载到 Webview 中。这里的方法可能是更改 HTML 以用一些“站点被阻止”消息替换被阻止的内容。这里的问题是该方法是否完全证明。javascript在这里会有任何问题吗？

3）使用Javascript修改页面内容。（任何例子？）我见过[这个](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview)。是否还有更多此类示例可供我参考，例如替换/删除包含黑名单 URL 的标签

4）不可能按照我的要求去做。

# android - 按钮对齐在 layout.xml 中没有被覆盖

> ID：11084381
> 
> 赞同：0
> 
> 时间：2012-06-18T13:55:00.853
> 
> 标签：android, android-layout, android-relativelayout

我创建了一个按钮：

```
<?xml version="1.0" encoding="utf-8"?>

<Button
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/barBtn"
    android:layout_width="wrap_content"
    android:layout_height="32dp"
    android:layout_centerVertical="true"
    android:layout_marginRight="8dp"
    android:textColor="@color/white"
    android:layout_alignParentRight="true"
    android:background="@drawable/sel_btn_bar"
/> 
```

没关系，那我试着把它放在其他布局中

```
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    <ImageView
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:scaleType="fitXY"
            android:src="@drawable/bar"
            />

    <include layout="@layout/btn_bar"
             android:layout_alignParentRight="false"
             android:layout_alignParentLeft="true"/>
    <TextView
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_centerInParent="true"
            android:textColor="@color/white"
            android:textStyle="bold"
            android:textSize="20sp"
            android:text="@string/city_fragment_title"
            />
</RelativeLayout> 
```

但是，当我`android:layout_alignParentRight`在按钮声明中删除时，该按钮仅左对齐。为什么？

## 更新

包含布局时似乎 align 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:00:49.697

当你定义你已经使用过的按钮时

```
android:layout_alignParentRight="true" 
```

这将应用于按钮尝试在包含按钮时定义对齐方式。但我认为你应该在布局中定义按钮而不是包含它。

# java - 用正则表达式中的路径递归替换正则表达式查找

> ID：11084382
> 
> 赞同：1
> 
> 时间：2012-06-18T13:55:03.380
> 
> 标签：java, regex, string, replace, stringbuilder

**我的问题**是一个设计问题。我应该使用 a`StringBuilder`并逐行读取文件，还是应该使用`replace`？

我正在开发一种从文件中读取文本的方法。在文件中可以有`@@GOTO:"C:\path\to\more.txt"@@`. 我想将两个`@@`s 之间的所有内容替换为`C:\path\to\more.txt`. 此外，内部`more.txt`可能还有另一个`@@GOTO:"C:\path\to\evenmore.txt"@@`. 所以我认为递归地这样做是最好的。

我在想这样的事情：

```
private String replaceGoTo(Pattern pattern, String xmlString) throws IOException {
  Matcher match = pattern.matcher(xmlString);
  while (match.find()) {
    String replacText = IOHelper.fileToString(match.group(2));
    String insert = replaceGoTo(pattern, replacText);
    xmlString = xmlString.replace(match.group(1), insert);
  }
  return xmlString;
} 
```

但我想知道这是否是最有效的方法，因为我没有使用 a`StringBuilder`并且我可能在这些字符串中有很多信息。

**注意**它没有坏，我只是问是否有更好的方法来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:16:01.920

最有效的方法是编写一个 FilterReader 在您读取文件时替换开始和结束字符串。我认为不需要正则表达式来替换静态数据。以下代码可以解决问题：

```
public class ReplaceFilterReader extends Reader {
    private String match;
    private String replace;

    private BufferedReader in;
    private boolean matched;
    private int currentPos;
    private boolean end = false;

    public ReplaceFilterReader(Reader in, String match, String replace) {
        this.in = new BufferedReader(in);
        this.matched = false;
        this.currentPos = 0;
        this.match = match;
        this.replace = replace;
    }

    @Override
    public int read(CharBuffer target) throws IOException {
        int len = target.remaining();
        char[] cbuf = new char[len];
        int n = read(cbuf, 0, len);
        if (n > 0) {
            target.put(cbuf, 0, n);
        }
        return n;
    }

    @Override
    public int read(char[] cbuf) throws IOException {
        return this.read(cbuf, 0, cbuf.length);
    }

    @Override
    public int read() throws IOException {
        char cb[] = new char[1];
        if (this.read(cb, 0, 1) == -1) {
            return -1;
        } else {
            return cb[0];
        }
    }

    private int readNext() throws IOException {
        int result = 0;
        if (!matched) {
            this.in.mark(match.length());
            char cb[] = new char[match.length()];
            int n = this.in.read(cb);
            if (n>0) {
                String s = new String(cb);
                if (s.equals(match)) {
                    this.matched = true;
                    if (replace.length()>0) {
                        result = replace.charAt(currentPos);
                        currentPos+=1;
                        if (currentPos == replace.length()) {
                            this.matched = false;
                            this.currentPos = 0;
                        }
                    } else {
                        this.matched = false;
                        this.currentPos = 0;
                        result = 0;
                    }

                } else {
                    this.in.reset();
                    result = this.in.read();
                }
            } else {
                result = n;
            }
        } else {
            result = replace.charAt(currentPos);
            currentPos+=1;
            if (currentPos == replace.length()) {
                this.matched = false;
                this.currentPos = 0;
            }
        }

        return result;
    }

    @Override
    public int read(char[] cbuf, int off, int len) throws IOException {
        if (end) {
            return -1;
        }

        int n = 0;
        int read = 0;
        for (int i=0; i<len && n!=-1; i++) {
            n = this.readNext();
            if (n!=-1 && n!=0) {
                read += 1;
                cbuf[off+i] = (char) n;
            } else if (n==0) {
                i = i-1;
            }
        }

        if (n == -1) {
            end = true;
        }

        return read;
    }

    @Override
    public void close() throws IOException {
        this.in.close();
    }
} 
```

你会这样进行：

```
Reader yourReader = // open file ...
Reader replaceStart = new ReplaceFilterReader(yourReader,"@@GOTO:\"","");
Reader replaceEnd = new ReplaceFilterReader(replaceStart,"\"@@",""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:16:53.717

诚实的回答：使用现有的模板库，如 Freemarker 或 Velocity。

字面上的回答：[`Matcher`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)有两种方法可以在这种情况下派上用场，[`appendReplacement()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29 "请参阅此链接以了解使用情况")并且`appendTail()`. 两者都要求您使用 StringBuffer，这很不幸，但它是解决此类问题的最优雅的方法。

# mysql - Activerecord 对 sql 的转换不正确

> ID：11084383
> 
> 赞同：2
> 
> 时间：2012-06-18T13:55:05.097
> 
> 标签：mysql, ruby-on-rails, rspec

我正在使用 rails 3.2.3、rspec 2.9.0、mysql5.1

原来的要求是

```
def index
  @votes = current_contest.votes.select('COUNT(*) AS votes_count, submission_id').group('submission_id').order('votes_count DESC')
end 
```

在开发环境中一切正常，但在我的测试中我得到了错误（ActiveRecord 添加额外的别名并重写我的）

```
ActionView::Template::Error:
   Mysql2::Error: Unknown column 'votes_count' in 'order clause': SELECT COUNT(*) AS count_all, submission_id AS submission_id FROM `votes` INNER JOIN `invitations` ON `votes`.`invitation_id` = `invitations`.`id` WHERE `invitations`.`contest_id` = 1 AND (`invitations`.`status` = 'used') GROUP BY submission_id ORDER BY votes_count DESC 
```

我可以在这样的简单查询中捕获此错误

```
def index    
  @votes = Vote.select('COUNT(*) AS votes_count, submission_id')
end 
```

日志输出是

```
SELECT COUNT(*) FROM `votes` 
```

但！！！如果我做

```
def index    
  @votes = Vote.select('COUNT(*) AS votes_count, submission_id')
  @votes.inspect # or something else calling @votes
end 
```

我在控制台日志中得到了正确的 sql 查询

```
SELECT COUNT(*) AS votes_count, submission_id FROM `votes` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:02:01.260

我猜，你叫类似

```
if @votes.any? 
```

在你看来。

方法`any?`将计算表中的记录。例如，`Vote.any?`将产生如下内容：

```
SELECT COUNT(*) AS count_all FROM `votes`; 
```

在您的情况下，您`COUNT(*) AS votes_count`将被替换为`COUNT(*) AS count_all`，但别名`votes_count`将保留在 order 子句中。

```
SELECT COUNT(*) AS count_all, submission_id AS submission_id FROM `votes` 
  INNER JOIN `invitations` ON `votes`.`invitation_id` = `invitations`.`id` 
WHERE `invitations`.`contest_id` = 1 AND (`invitations`.`status` = 'used') 
GROUP BY submission_id 
ORDER BY votes_count DESC 
```

# c# - 我不明白持久性独立的意义

> ID：11084384
> 
> 赞同：6
> 
> 时间：2012-06-18T13:55:05.210
> 
> 标签：c#

> **可能重复：**
> [持久无知有什么好处？](https://stackoverflow.com/questions/905498/what-are-the-benefits-of-persistence-ignorance)

经过一段时间和一些试图弄清楚实体框架的问题后，我得出的结论是，我只是不明白持久性无知对象的意义是什么。

据我所知，使用持久性感知对象和持久性无知对象之间的实际区别在于，使用的对象类似于

```
Person p = Person.Load(id);
p.Active = false;
p.Save(); 
```

另一个是沿线使用

```
using (var context = new MyContext())
{
   Person p = context.Persons.Single(x => x.ID == id);
   p.Active = false;
   context.SaveChanges();
} 
```

在第一种情况下，我可以返回`p`，并`Save()`在稍后调用。在后者中，我可以 return `p`，但我需要将它放入一个 new`MyContext()`中以保存它。在第一种情况下，假设 Person 从实际处理数据库逻辑的某个基础对象继承 Load() 和 Save()，如果我想更改持久性，它只涉及更改该基础对象（甚至只是有一个`IPersistent`接口可以实现多个基类来访问多个商店）。在后者中，如果持久层发生更改，我将需要更改每个实例`MyContext`，并且零碎做会非常复杂。

我的印象是坚持-无知是件好事。我只是不明白为什么。似乎设置、使用、更改批发和零碎更改要复杂得多，这种复杂性没有任何优势。我只是错过了一些重要的事情，还是我对持久意识/无知意味着什么的整个理解有缺陷？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:01:43.427

持久性无知是关注点分离的一部分。您应该问自己，为什么 Person 应该知道应该如何加载或保存它？人应该处理自己的小领域。

PI 意味着 Person 不关心它是否来自内存、SQL、平面二进制或任何其他持久性方式，并允许您稍后将持久性层替换为其他东西。您可能最初开发应用程序以使用带有基本序列化程序的平面二进制文件来存储数据。稍后，出于性能原因，您可能会升级到 SQL ——并且这种更改只需要在一个位置——其工作——处理持久性，即关联的层/组件。否则，您必须遍历整个代码库来更改处理持久性的小部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:46:58.027

只是说说你的例子，通过写 Person.Load(id) 你说 -*通过查看他的标识符来加载这个对象*- 你正在创建一个严格的工厂模式，只有当你知道他们的 ID 时你才能获取对象，稍后您会发现您需要根据某些搜索条件提取记录，并且您将添加更多工厂方法，而第二个解决方案已经为您提供了所需的所有自由。

**第二种解决方案非常适合在运行时切换持久性逻辑，因为它与对象模型解耦**，理论上您可以决定在客户端代码中使用哪种持久性引擎，而无需硬编码和触摸您的 OM，说您会需要更改*MyContext*的每个实例，您应该编写客户端代码以使其从某种工厂类或依赖注入中接收上下文。

作为一个例子，你可以有这个伪代码：

```
var person = onlineDbContext.Persons.Single(x=>x.Guid == myguid);

offlineDbContext.Persons.Add(person)
offlineDbContest.SaveOrUpdate(); 
```

# c++ - 字符串中包含的转义字符

> ID：11084389
> 
> 赞同：0
> 
> 时间：2012-06-18T13:55:32.663
> 
> 标签：c++, strcat

有一个奇怪的问题

```
sprintf(tmp, "\"%s\"", filename); 
```

我希望输出是

```
"filename" 
```

但相反我得到

```
\"filename\" 
```

这里发生了什么？

==============================

```
extern "C" void __export __pascal MyFunc(LPTSTR m_avi, LPTSTR m_mpg)
{
  int frameRate = 20;
  char szAVI[MAX_PATH], szMPG[MAX_PATH];

#ifdef UNICODE
  wcstombs(szAVI, m_avi, _tcslen(m_avi) + 1);
  wcstombs(szMPG, m_mpg, _tcslen(m_mpg) + 1);
#else
  strcpy(szAVI, m_avi);
  strcpy(szMPG, m_mpg);
#endif

  //Call to ffmpeg.exe
  char cmdline[1000] = "ffmpeg ", tmp[50];

  //Overwrite without asking
  strcat(cmdline, "-y ");

  //Input file
  sprintf(tmp, "-i \"%s\" ", szAVI);
  strcat(cmdline, tmp);

  //Lock output at 20 frames per second
  sprintf(tmp, "-r %i ", frameRate);
  strcat(cmdline, tmp);

  //Output file
  sprintf(tmp, "\"%s\"", szMPG);
  strcat(cmdline, tmp);

  WinExec(cmdline, SW_HIDE);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:12:35.417

由于您显示的代码实际上并没有产生任何输出，我怀疑您正在谈论的“输出”来自您的调试器，您试图在调用之前检查数组的值`WinExec`。

调试器通常使用被调试语言的语法来显示变量的值。在这种情况下，调试器显示字符串变量包含引号。由于引号在 C++ 中是特殊的，因此调试器还显示反斜杠以指示引号是字符串内容的一部分，而不是表示字符串值的开始或结束。

If you're seeing backslashes in the debugger, then everything's fine. If you're seeing backslashes printed out or displayed somewhere in your program, then you need to go look at *that* code since the code here in the question doesn't display anything.

# .net - 是否有用于组织/按字母顺序排列 CSS、JSON 对象等的工具或库？

> ID：11084391
> 
> 赞同：1
> 
> 时间：2012-06-18T13:55:38.077
> 
> 标签：.net, css, json, ide

## 背景

我正在开发一个商业代码库，现在在主要代码（不是数据）中有数千行 JSON 对象和数百行 CSS。

由于代码的大小，管理起来变得很困难，我想按字母顺序排列 JSON 对象和 CSS，以便在编码时更容易找到这些项目的元素。

我正在考虑快速编写一个小的 Web 应用程序或 Windows 窗体应用程序来执行此操作。

## 问题

这样的工具是否已经存在？如果代码已经存在，我不想浪费时间对其进行编码。如果我*编写*代码，我很乐意与任何感兴趣的人分享代码。

## 要清楚：

我只是想通过一个工具运行我的主要编码字符串（JSON、CSS 等）来清理它，并按字母顺序和一些格式对其进行组织。我#NOT# 希望对要显示给最终用户的 JSON 对象进行排序。我知道该怎么做。我只是想知道是否有用于此任务的预先存在的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T13:57:43.067

这个：

[http://styleneat.com/](http://styleneat.com/)

似乎允许您按字母顺序对 css 进行排序（以及其他一些仍应提高其可读性的 css 美化器功能），尽管它警告使用谨慎。希望对您有所帮助，不过我不了解 JSON！

# java - 将目录和文件从 res/raw 文件夹复制到 sd 卡 - android

> ID：11084393
> 
> 赞同：6
> 
> 时间：2012-06-18T13:55:42.867
> 
> 标签：java, android, android-intent, android-widget, android-sdk-2.1

我有一个文件夹，其中包含一些文件和一些目录，当我第一次启动应用程序时，我需要将它们复制到我的 SD 卡的 /mnt/sdcard/Android/data/ 路径，当然，如果还不是所需的文件夹不存在于该路径中。

我将在我的应用程序的 res/raw 文件夹中有这个文件夹。

我需要执行哪些分步程序才能将文件夹及其所有内容从 res/raw 复制到 SD 卡中的指定路径。

任何帮助深表感谢。

**编辑**

如果它可以帮助其他人，以下是解决方案：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    copyFileOrDir("edu1");//directory name in assets
}
File sdCard = Environment.getExternalStorageDirectory();
private void copyFileOrDir(String path) {
    AssetManager assetManager = this.getAssets();
    String assets[] = null;
    try {
        assets = assetManager.list(path);
        if (assets.length == 0) {
            copyFile(path);
        } else {
            File dir = new File (sdCard.getAbsolutePath() + "/" + "Android/data");
            //String fullPath = "/data/data/" + this.getPackageName() + "/" + path;//path for storing internally to data/data
            //File dir = new File(fullPath);
            if (!dir.exists()){
                System.out.println("Created directory"+sdCard.getAbsolutePath() + "/Android/data");
                boolean result = dir.mkdir();
                System.out.println("Result of directory creation"+result);
            }

            for (int i = 0; i < assets.length; ++i) {
                copyFileOrDir(path + "/" + assets[i]);
            }
        }
    } catch (IOException ex) {
        System.out.println("Exception in copyFileOrDir"+ex);
    }
}

private void copyFile(String filename) {
    AssetManager assetManager = this.getAssets();

    InputStream in = null;
    OutputStream out = null;
    try {
        in = assetManager.open(filename);
        //String newFileName = "/data/data/" + this.getPackageName() + "/" + filename;//path for storing internally to data/data
        String newFileName = sdCard.getAbsolutePath() + "/Android/data/" + filename;
        out = new FileOutputStream(newFileName);
        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
    } catch (Exception e) {
        System.out.println("Exception in copyFile"+e);
    }

}
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:19:35.533

我建议您将文件保存在资产中。以下代码可以帮助您将内容从资产目录复制到 SD 卡。

```
public static void copyFile(Activity c, String filename) 
{
    AssetManager assetManager = c.getAssets();

    InputStream in = null;
    OutputStream out = null;
    try 
    {
        in = assetManager.open(filename);
        String newFileName = sdcardpath/filename;
        out = new FileOutputStream(newFileName);

        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1) 
        {
            out.write(buffer, 0, read);
        }
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
    } catch (Exception e) {
        Utility.printLog("tag", e.getMessage());
    }finally{
        if(in!=null){
            try {
                in.close();
            } catch (IOException e) {
                printLog(TAG, "Exception while closing input stream",e);
            }
        }
        if(out!=null){
            try {
                out.close();
            } catch (IOException e) {
                printLog(TAG, "Exception while closing output stream",e);
            }
        }
    }
} 
```

# r - 使用带有对象名称的变量保存对象

> ID：11084395
> 
> 赞同：13
> 
> 时间：2012-06-18T13:55:51.947
> 
> 标签：r, save

> **可能重复：**
> [如何使用特定变量名保存（）](https://stackoverflow.com/questions/4675755/how-to-save-with-a-particular-variable-name)

我想知道在 R 中保存对象的简单方法是使用`objectName`带有要保存对象名称的变量。我希望这可以轻松保存对象，它们的名称在文件名中。

我尝试使用`get`，但我没有设法用它的原始对象名称保存对象。

**例子：**

如果我有一个名为“temp”的对象，我想将其保存在目录“dataDir”中。我将对象的名称放在变量“objectName”中。

*尝试1：*

```
objectName<-"temp"
save(get(objectName), file=paste(dataDir, objectName, ".RData", sep=""))
load(paste(dataDir, objectName, ".RData", sep="")) 
```

这不起作用，因为 R 试图保存一个名为 的对象`get(objectName)`，而不是这个调用的结果。所以我尝试了以下方法：

*尝试2：*

```
objectName<-"temp"
object<-get(objectName)
save(object, file=paste(dataDir, objectName, ".RData", sep=""))
load(paste(dataDir, objectName, ".RData", sep="")) 
```

这显然不起作用，因为 R 保存名称为“object”的对象，而不是名称“temp”。加载后我有一个“对象”的副本，而不是“临时”。（是的，内容相同......但这不是我想要的:)）。所以我认为它应该是带有指针的东西。所以尝试了以下方法：

*尝试 3：*

```
objectName<-"temp"
object<<-get(objectName)
save(object, file=paste(dataDir, objectName, ".RData", sep=""))
load(paste(dataDir, objectName, ".RData", sep="")) 
```

结果与尝试 2 相同。但我不确定我正在做我认为我正在做的事情。

解决方案是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-18T19:17:32.580

试试`save(list=objectName, file=paste(objectName, '.Rdata', sep='') )`。

关键是`list`参数 to`save`接受一个字符串列表，它是要保存的对象的名称（而不是通过的实际对象`...`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:11:45.640

我发现您的示例难以理解，但我可以想到您想要的两种可能性。您要么希望将文件名另存为`objectName.RData`或`temp.RData`. 这是你如何做到的：

```
objectName<-"temp"

# This saves the object as "temp.RData"
save(objectName, file=paste(dataDir, objectName, ".RData", sep=""))
# Loading it will bring it back with the name objectName, and the value temp
load(paste(dataDir, 'temp', '.RData', sep=''))

# This saves the object as "objectName.RData"
save(objectName, file=paste(dataDir, deparse(substitute(objectName)), ".RData",    sep=""))
# Loading it will bring it back with the name objectName, and the value temp
load(paste(dataDir, 'objectName', '.RData', sep='')) 
```

您的所有尝试都返回错误，因为您调用`get`不正确。它应该是`get('objectName')`，但如果你考虑一下，那会让你得到和 完全一样的东西`objectName`。

# wordpress - 在 Wordpress 中创建上下文菜单的最佳方法是什么？

> ID：11084400
> 
> 赞同：-1
> 
> 时间：2012-06-18T13:55:59.370
> 
> 标签：wordpress, menu, wordpress-theming

我想显示一个上下文菜单，例如在我希望菜单显示的 RedProducts 部分中：

```
RedProduct1 
RedProduct2 
```

等等，BlueProducts、GreenProducts 等在选择时也是如此。

如果这些链接在被选中时可以显示不同的类，那就太好了。例如：

```
<ul>        
<li class="link"><a href="/redproduct1" >Red Product 1</a></li>     
<li class="current"><a href="/redproduct2" >Red Product 2</a></li>      
<li class="link"><a href="/redproduct3" >Red Product 3</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:03:21.250

Wordpress 插件“高级菜单小部件”现在为您完成了这一切，非常快速和简单，但我花了很长时间才找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:28:20.333

希望你正在努力做到这一点。[**jsfiddle 示例**](http://jsfiddle.net/libinvbabu/QbX7k/)。

这就是“上下文菜单”的工作原理。:) 只需隐藏子菜单并单击主菜单，它将在 jQuery 的帮助下打开！

只需将其应用于您的 WordPress 菜单即可。不要忘记包含 jQuery 库。

# mobile - 如何开始使用 tabris？

> ID：11084401
> 
> 赞同：0
> 
> 时间：2012-06-18T13:55:59.653
> 
> 标签：mobile

我想使用 tabris 框架来开发跨平台的移动应用程序。什么是入门的好资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:04:28.323

您可以使用[http://developer.eclipsesource.com/tabris/docs/create-a-hello-tabris/上的教程](http://developer.eclipsesource.com/tabris/docs/create-a-hello-tabris/)

它包含有关如何设置 Tabris 服务器、启动服务器端 helloworld 示例以及使用 iOS 和 Android 上的移动客户端访问此示例的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:24:50.407

请参阅 github-repository [Tabris Demos](https://github.com/eclipsesource/tabris-demos)中的示例。

# objective-c - 在 Objective C 中通过 POST 上传图像

> ID：11084403
> 
> 赞同：4
> 
> 时间：2012-06-18T13:56:01.837
> 
> 标签：objective-c, uiimage, http-post

我目前正在通过 HTTP Post 将图像上传到服务器，但似乎无法找到一种方法来构建调用服务的 url。用户从库或相机中选择图像，然后调用执行插入语句的 json 服务。

该服务需要以下 uritemplate：

```
@"%@/DataTransfer/SetUserProfileImage?EMP_ID=%@&image=%@&imageName=%@" 
```

期望图像数据以某种方式转换为字符串并通过 url 发送。

这是我当前的代码：

```
- (BOOL)setUserProfileImage:(UIImage *)imgUser Name:(NSString *)strName{

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSData *dataImage = UIImagePNGRepresentation(imgUser);

    NSString* theNSString = [[NSString alloc] initWithData:dataImage encoding:NSASCIIStringEncoding];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@/DataTransfer    /SetUserProfileImage?EMP_ID=%@&"
                                   "image=%@&imageName=%@",
                                   appDelegate.ServerAddress, 
                                   appDelegate.UserId,
                                   theNSString,
                                   strName]];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url 
                                                       cachePolicy: NSURLRequestUseProtocolCachePolicy
                                                   timeoutInterval:10.0];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    NSURLResponse* response = nil;
   NSError* resultError = nil;

   NSData* data = [NSURLConnection sendSynchronousRequest:request 
                                     returningResponse:&response 
                                                 error:&resultError];

   NSString *strResult = [[NSString alloc] initWithBytes:[data bytes] 
                                               length:[data length] 
                                             encoding:NSUTF8StringEncoding]; 

   BOOL imgResponse = [strResult boolValue];
   [strResult release];

   return imgResponse;
} 
```

我收到一条错误消息，说 NSURL 是“”。似乎无法建立正确的 URL。我知道服务本身会再次将此字符串转换为图像。

更新：

```
- (BOOL)setUserProfileImage:(UIImage *)imgUser Name:(NSString *)strName{

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

NSString *url = [NSString stringWithFormat:@"%@/DataTransfer/SetUserProfileImage",appDelegate.ServerAddress]; 

NSData *data = UIImagePNGRepresentation(imgUser);

NSString * boundary = @"tweetPhotoBoundaryParm";
NSMutableData *postData = [NSMutableData dataWithCapacity:[data length] + 1024];

name=\"EMP_ID\"\r\n\r\n%@", @"100-01"];
NSString * boundaryString = [NSString stringWithFormat:@"\r\n--%@\r\n", boundary];
NSString * boundaryStringFinal = [NSString stringWithFormat:@"\r\n--%@--\r\n", boundary];

[postData appendData:[boundaryString dataUsingEncoding:NSUTF8StringEncoding]];    
[postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\";\r\nfilename=\"media.png\"\r\nContent-Type: image/png\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:data];
[postData appendData:[boundaryStringFinal dataUsingEncoding:NSUTF8StringEncoding]];

NSMutableURLRequest * theRequest=(NSMutableURLRequest*)[NSMutableURLRequest requestWithURL:[NSURL URLWithString:url] 
                                                                            cachePolicy:NSURLRequestUseProtocolCachePolicy 
                                                                        timeoutInterval:60.0];

[theRequest setHTTPMethod:@"POST"];

[theRequest addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-Type"];
//[theRequest addValue:@"www.tweetphoto.com" forHTTPHeaderField:@"Host"];
NSString * dataLength = [NSString stringWithFormat:@"%d", [postData length]];
[theRequest addValue:dataLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPBody:(NSData*)postData];

NSURLConnection * theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
if (theConnection)
{
    webData =[[NSMutableData data] retain];
}
else
{
    NSLog(@"%@",@"Could not connect to the network");
}

return false;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T12:37:47.853

**Objective-C**

```
-(void)saveImageToServer
{
    // COnvert Image to NSData
    NSData *dataImage = UIImageJPEGRepresentation([UIImage imageNamed:@"yourImage"], 1.0f);

    // set your URL Where to Upload Image
    NSString *urlString = @"Your URL HERE";

    // set your Image Name
    NSString *filename = @"YourImageFileName";

    // Create 'POST' MutableRequest with Data and Other Image Attachment.
    NSMutableURLRequest* request= [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];
    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
    NSMutableData *postbody = [NSMutableData data];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.jpg\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[NSData dataWithData:dataImage]];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:postbody];

    // Get Response of Your Request
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *responseString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
    NSLog(@"Response  %@",responseString);
} 
```

**迅速**

```
// COnvert Image to NSData
var dataImage: NSData = UIImageJPEGRepresentation(UIImage(named: "yourImage"), 1.0)
// set your URL Where to Upload Image
var urlString: String = "Your URL HERE"
// set your Image Name
var filename: String = "YourImageFileName"
// Create 'POST' MutableRequest with Data and Other Image Attachment.
var request: NSMutableURLRequest = NSMutableURLRequest()
request.URL = NSURL(string: urlString)!
request.HTTPMethod = "POST"
var boundary: String = "---------------------------14737809831466499882746641449"
var contentType: String = "multipart/form-data; boundary=\(boundary)"
request.addValue(contentType, forHTTPHeaderField: "Content-Type")
var postbody: NSMutableData = NSMutableData.data()
postbody.appendData("\r\n--\(boundary)\r\n".dataUsingEncoding(NSUTF8StringEncoding))
postbody.appendData("Content-Disposition: form-data; name=\"userfile\"; filename=\"\(filename).jpg\"\r\n".dataUsingEncoding(NSUTF8StringEncoding))
postbody.appendData(String.stringWithString("Content-Type: application/octet-stream\r\n\r\n").dataUsingEncoding(NSUTF8StringEncoding))
postbody.appendData(NSData.dataWithData(dataImage))
postbody.appendData("\r\n--\(boundary)--\r\n".dataUsingEncoding(NSUTF8StringEncoding))
request.HTTPBody = postbody
// Get Response of Your Request
var returnData: NSData = NSURLConnection.sendSynchronousRequest(request, returningResponse: nil, error: nil)
var responseString: String = String(data: returnData, encoding: NSUTF8StringEncoding)
NSLog("Response  %@", responseString) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:15:15.117

这种方法有几个问题。

1) 将图像的原始字节转换为字符串永远不会起作用。

```
NSData *dataImage = UIImagePNGRepresentation(imgUser);
NSString* theNSString = [[NSString alloc] initWithData:dataImage encoding:NSASCIIStringEncoding]; 
```

将失败。您将永远无法`dataImage`从`theNSString`. 您需要对 dataImage 进行 base 64 编码。使用类似[这样](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)的东西来进行 base 64 编码。

2) 不要将图像数据放入 URL。您需要将图像数据放在帖子正文中。

3）不要使用“application/x-www-form-urlencoded”，使用“multipart/form-data”。

* * *

**评论后更新**

抱歉，但看起来你在理解你的系统方面还有很多工作要做。

在上面的示例中，您将所有数据添加到 URL 查询字符串，但没有向消息正文添加任何内容。在该示例中，您将内容类型设置为“application/x-www-form-urlencoded”。

现在您似乎认为 POST 需要使用 JSON 格式。你需要找出应该如何做。该 JSON 消息需要如何附加？在您说数据需要在 URL 中之前，现在还是这样吗？如果需要将 JSON 消息附加到 POST 正文中，那么 POST 的内容类型需要是什么？JSON 消息的结构是什么（需要的所有键/值字段）？

在任何人可以帮助您之前，您需要**确切地**找出需要什么。应该有人可以给你一个HTTP消息的准确描述。

# php - 如何将PHP数组转换为R中的数据框

> ID：11084405
> 
> 赞同：-1
> 
> 时间：2012-06-18T13:56:11.783
> 
> 标签：php, r, dataframe

我是 R 新手。我用谷歌搜索了一段时间，但没有找到相关信息。

以下数组是在我的 php 脚本中生成的。

```
Array
(
    [data_1] => Array
        (
            [1] => 3
            [2] => 4
            [3] => 10
            [4] => 11
            [5] => 12
        }
    [data_2] => Array
        (
            [1] => 34
            [2] => 5
            [3] => 10
            [4] => 19
            [5] => 1
        }
} 
```

我需要在 R 中处理这些值。所以我想为此创建一个数据框。

像

```
data_frame_values = data.frame(A=data_1,B=data_2) 
```

输出像

```
> data_frame_values
    A     B
1   3    34
2   4    5
3   10   10
4   11   19
5   12   1 
```

谁能告诉我如何做到这一点？

我正在尝试通过迭代 php 数组和字符串连接来创建它。如果需要，我可以分享我的 php 代码。

或者我用了错误的方法，是否还有其他方法存在。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:29:13.017

您可以将 PHP 数组保存到 CSV 文件中，然后将其加载到 R 会话中。

**PHP：**

```
<?php
$array = array("data1"=>array(1,2,45,6,4), "data2"=>array(23,4,5,6,1));
writeCSV ("array.csv", $array, array("A", "B"));

function writeCSV ($filename, $array, $columnNames)
{
    $newArray = array();
    foreach ($array as $key => $subarray)
        foreach ($subarray as $subkey => $val)
            $newArray[$subkey][$key] = $val;

    $x = "\"".implode("\",\"",$columnNames)."\"\n";
    foreach ($newArray as $key => $subarray)
    {
        $x = $x.($key+1).",";
        $tempArray = array();
        foreach ($subarray as $subkey => $val)
            array_push($tempArray, $val);

        $x = $x.implode(",", $tempArray)."\n";
    }

    $open = fopen($filename, "w+");
    fputs($open, $x);
    fclose($open);
}
?> 
```

**回复：**

```
x <- read.csv("array.csv");
print(x)
#    A  B
# 1  1 23
# 2  2  4
# 3 45  5
# 4  6  6
# 5  4  1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:25:47.530

您的意思是创建组合数组吗？

```
$data_r = array();
$data_1 = array(3,4,10,11,12);
$data_2 = array(34,5,10,19,1);
$i = 0;
while ($i < sizeof($data_1))
{
    $data_r[$i] = array( $data_1[$i], $data_2[$i]);
    $i++;
}
print_r($data_r); 
```

# scala - Scala反射错误：这是一个内部模块，在InstanceMirror上使用reflectModule来获取它的ModuleMirror

> ID：11084408
> 
> 赞同：4
> 
> 时间：2012-06-18T13:56:17.173
> 
> 标签：scala, macros, scala-2.10

跟进[这个问题](https://stackoverflow.com/q/11053571/53013)，我试图弄清楚如何在对象上调用方法。相关定义如下：

```
trait ThirdParty { def invoke = println("right") }
trait WeatherIcon { def invoke = println("wrong") }
class MyClass {
    object objA extends ThirdParty
    object objB extends WeatherIcon
} 
```

我有一个这样`Symbol`的：`objA`

```
import reflect.runtime.universe._

val stuff = typeOf[MyClass].members.filter(_.isValue).filter(_.typeSignature <:< typeOf[ThirdParty]) 
```

这会返回一个`Iterable`带有单个元素的 a，所以让我们说：

```
val objASymbol = stuff.head.asModuleSymbol 
```

然后我尝试，基于[this other question](https://stackoverflow.com/q/11020746/53013)，这个：

```
val mirror = runtimeMirror(getClass.getClassLoader)
mirror.reflectModule(objASymbol) 
```

这导致了该主题引用的错误消息：

```
java.lang.Error: this is an inner module, use reflectModule on an InstanceMirror to obtain its ModuleMirror
    at scala.reflect.runtime.JavaMirrors$JavaMirror.reflectModule(JavaMirrors.scala:118)
    at scala.reflect.runtime.JavaMirrors$JavaMirror.reflectModule(JavaMirrors.scala:60) 
```

问题是我无法弄清楚这条错误消息告诉我该怎么做！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:29:55.800

你需要写`runtimeMirror.reflect(<instance of MyClass>).reflectModule(objASymbol)`。普通的 reflectModule 不行，因为一些反射操作`objA`（例如获取它的实例）需要一个外部实例。

不幸的是，即使你写对了，你的用例也不会起作用，因为 M4 只支持静态对象：[https](https://issues.scala-lang.org/browse/SI-5498) ://issues.scala-lang.org/browse/SI-5498 。我们将在 2.10.0-final 之前实现这一点。

# android - 如何为Android应用程序设置drawable以实现多种分辨率？

> ID：11084413
> 
> 赞同：0
> 
> 时间：2012-06-18T13:56:29.090
> 
> 标签：android, drawable

我正在开发具有大量图像的 android 应用程序。这是一个韩国应用程序。我想支持尽可能多的分辨率。所以我创建了 4 个不同的文件夹（ldpi、mdpi、hdpi、xhdpi）作为可绘制的 google doc 所述。现在我的问题是我的应用程序可以在所有大多数设备上完美运行，但是在韩国有设备[Pantech Vega LTE M](http://pdadb.net/index.php?m=specs&id=3439&c=pantech_vega_racer_2_lte_im-a830s_sky)，这给了很多麻烦

它的分辨率属于 xhdpi 类别，但仍然在此设备中，我的应用程序显示来自 mdpi 的图像，并且显示的图像比它的分辨率大。所以一半的图像被压缩显示。

所以我不知道如何为此设备设置可绘制对象。我是否需要添加单独的可绘制文件夹以匹配此分辨率。

如果我更改 mdpi 文件夹中的图像，则会为其他分辨率带来问题。

除了我需要添加多少文件夹之外，我的应用程序还与所有可能的可用分辨率兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:10:11.790

那是因为该设备运行 Android 2.3 Gingerbread，其中*不支持*X-Large 配置，因为从 Adroid 3.0 afaik 开始支持该分辨率。

**编辑：** 看起来 xhdpi 从 API 级别 9 开始就受到支持，并且您设备的配置规范看起来像一个普通的带有 xhdpi 的大屏幕。所以我能想到的唯一解决方法是在你的drawables中创建这些文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:33:13.880

嗨，您创建了可绘制文件夹，例如 drawable-large-mdpi

1.  检查您的设备属于哪个类别 large ， xlarge 并相应地创建文件夹。
2.  发布您的屏幕分辨率以调查问题。
3.  检查此代码以获取有关您设备的确切信息

    ```
    DisplayMetrics metrics = new DisplayMetrics(); 
    getWindowManager().getDefaultDisplay().getMetrics(metrics); 

    switch(metrics.densityDpi)
    {      

        case DisplayMetrics.DENSITY_LOW:                 
        Toast.makeText(this,"low density " + String.valueOf(metrics.densityDpi),Toast.LENGTH_SHORT ).show();
        break;      
        case DisplayMetrics.DENSITY_MEDIUM:                  
        Toast.makeText(this,"medium density " + String.valueOf(metrics.densityDpi),Toast.LENGTH_SHORT ).show(); 
        break;      
        case DisplayMetrics.DENSITY_HIGH:
        Toast.makeText(this,"high density " + String.valueOf(metrics.densityDpi),Toast.LENGTH_SHORT ).show();           
        break; 
    }

    if ((getResources().getConfiguration().screenLayout &  Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) 
    {              Toast.makeText(this, "Large screen",Toast.LENGTH_SHORT).show();      }    
    else if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_NORMAL) 
    {              Toast.makeText(this, "Normal sized screen" , Toast.LENGTH_SHORT).show();      }      
    else if ((getResources().getConfiguration().screenLayout &      Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_SMALL) 
    {              Toast.makeText(this, "Small sized screen" , Toast.LENGTH_SHORT).show();     }     
    else {         Toast.makeText(this, "Screen size is neither large, normal or small" , Toast.LENGTH_LONG).show();     } 
    ```

# c# - 向 OleDb 插入数据时出现 ASP.Net 错误

> ID：11084416
> 
> 赞同：0
> 
> 时间：2012-06-18T13:56:39.503
> 
> 标签：c#, ms-access, oledb

我不断收到此错误。我读到 OleDb 不支持命名参数，所以我将它们更改为`(?, ?)`.

但是不断收到同样的错误

> System.Data.OleDb.OleDbException：INSERT INTO 语句中的语法错误。在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult) 在 System.Data。 System.Data.OleDb.OleDbCommand.ExecuteReaderInternal（CommandBehavior 行为，字符串方法）在 System.Data.OleDb.OleDbCommand.ExecuteNonQuery() 的 OleDb.OleDbCommand.ExecuteCommand(CommandBehavior 行为，Object& executeResult) 在 Registration.ImageButton1_Click（对象发送者，ImageClickEventArgs e) 在 c:\Users\Nirre\Desktop\Cti Project\Book Club TRY 2\Registration.aspx.cs:line 51

这是 .cs 类中的代码

```
 protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{
    if (IsPostBack)
    {
        OleDbConnection conn = new OleDbConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        conn.Open();
        string insCmd = @"INSERT COUNT(*) INTO Registration(UserName, [Password], EmailAddress, FullName, Country, PasswordRecovery)
                     VALUES (?, ?, ?, ?, ?, ?)";
        OleDbCommand insertUser = new OleDbCommand(insCmd, conn);
        insertUser.Parameters.AddWithValue("@UserName", txtUserName.Text);
        insertUser.Parameters.AddWithValue("@Password", txtPassoword.Text);
        insertUser.Parameters.AddWithValue("@EmailAddress", txtEmail.Text);
        insertUser.Parameters.AddWithValue("@FullName", txtFullName);
        insertUser.Parameters.AddWithValue("@Country", DdlCountry.SelectedItem.ToString());
        insertUser.Parameters.AddWithValue("@PasswordRecovery", txtAnswer.Text);

        try
        {
            insertUser.ExecuteNonQuery();
            conn.Close();
            Response.Redirect("Login.aspx");
        }
        catch (Exception er)
        {
            Response.Write(er);
            lblError.Visible = true;
            lblError.Text = "An error has ocured pleas try again...!";
        }
        finally
        {
            // Code
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:03:52.173

`INSERT COUNT(*)`不是有效的 SQL 语句，只需删除`COUNT(*)`，其余代码似乎正确。

[请参阅此处以获取参考](http://www.w3schools.com/sql/sql_insert.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:04:17.073

```
string insCmd = @"INSERT COUNT(*) INTO Registration(UserName, [Password], EmailAddress, FullName, Country, PasswordRecovery)
                     VALUES (?, ?, ?, ?, ?, ?)"; 
```

应该

```
string insCmd = @"INSERT INTO Registration(UserName, [Password], EmailAddress, FullName, Country, PasswordRecovery)
                     VALUES (@UserName, @Password, @EmailAddress, @FullName, @Country, @PasswordRecovery)"; 
```

我不明白你想用 COUNT 做什么。如果您想返回受影响的行数，只需添加返回参数并将@@ROWCOUNT 分配给它

编辑：我从未在 Reporting Services 之外使用问号作为参数占位符，因此请尝试用命名参数替换它们，如上所示。

# asp.net - 一个页面只能有一个服务器端表单标签..但我需要 2

> ID：11084425
> 
> 赞同：2
> 
> 时间：2012-06-18T13:57:11.743
> 
> 标签：asp.net

我在页面底部有这个：

```
<form id="Login" method="post" runat="server">
<span class="MenutextWhite">You are logged in as 
<asp:Label ID="lblUsername" Runat="server"></asp:Label> 
- not you?&nbsp;&nbsp;</span>
<asp:LinkButton CssClass="MenutextWhite" ID="btnLogout" Runat="server" Text="Log out"
OnClick="Logout_Click" tip="click here to log out"> 
</asp:LinkButton>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<a href = "admin.aspx"
class="MenutextWhite">Admin</a>&nbsp;&nbsp;&nbsp;
</form> 
```

这涉及显示用户是谁并授予对管理部分和注销按钮的访问权限。（我没有使用母版页）

然而，在页面的上方，在主要内容区域，我需要另一个控件（freetextbox）

我怎样才能解决这个单一形式的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:01:05.030

你只能有一个带有服务器端标签的表单。但是，您可以拥有尽可能多的 html 表单（不带`runat=server`）标签。该`runat=server`标签允许网络表单页面生命周期和查看内容工作。

如果您想要更传统的 Web 开发体验，请不要使用 Web 表单。而是使用 mvc 框架（FUBU、Monorail、MSMVC 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:12:02.680

正如 Jason Meckley 所说——你不能。但在 ASP.Net 表单中，我从来不需要它。

您有两个按钮用于表单的两个不同部分 - 因此您将有 2 个不同的点击处理程序，因此可以采取两种不同的操作

```
protected void ptnFormPart1_Click(object sender, EventArgs e)
{
   //.. action 1
}

protected void ptnFormPart1_Click(object sender, EventArgs e)
{
   //.. action 2
} 
```

因此，您不需要具有两种不同动作的两种不同形式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:09:54.750

解决了！我需要的 2 个表格位于不同的 DIV 中。

因为我只能有一种形式，所以我将标签放在 - 所有内容之外。

现在一切正常。

# wcf - 在 Web 上部署 WCF 服务时出错

> ID：11084428
> 
> 赞同：0
> 
> 时间：2012-06-18T13:57:15.300
> 
> 标签：wcf, deployment, hosting

我在我的计算机上创建了一个有效的 WCF 服务库。

当我在主机上发布它时（右键单击 -> 发布 -> 我输入地址）并使用此服务启动网页，如“.../webservice.svc”

我收到这样的错误：

![在此处输入图像描述](../Images/372ff0094302e7f136cea4691c9135fc.png)

什么问题？

我应该改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T01:37:17.200

必须打开错误消息以查看错误本身。在我打开WCF服务配置文件中的错误信息后，我看到了问题并修复了它。这是其中一个库的问题。

# c# - 如何处理 FormattedText / 使 WPF 放弃 .TTF 文件？

> ID：11084434
> 
> 赞同：2
> 
> 时间：2012-06-18T13:57:30.337
> 
> 标签：c#, wpf, fonts, truetype, formatted-text

在我的 WPF 应用程序中，我有一个自定义的 Canvas 实现，其中我使用指定的 .ttf 文件绘制了一些文本。ttf 文件位于一个临时位置，可以在以后的某个时间点删除。我的问题是，一旦我的文本在画布上呈现，ttf 文件似乎保持打开状态，并且在应用程序关闭之前无法删除。似乎是保持字体文件打开的 FormattedText 实例。有谁知道“处理” FormattedText 的方法，或者以任何其他方式确保字体文件在渲染后关闭？

我的文字绘制代码：

```
public class MyCanvas : System.Windows.Controls.Canvas
{
    protected override void OnRender(DrawingContext dc)
    {
        base.OnRender(dc);

        // Some other drawing stuff...

        FontFamily fontFamily = new FontFamily(fontUri);
        Typeface typeFace = new Typeface(fontFamily, FontStyles.Normal, FontWeights.Normal, FontStretches.Normal);
        FormattedText formattedText = new FormattedText(chars, System.Globalization.CultureInfo.InvariantCulture, FlowDirection.LeftToRight, typeFace, text.FontHeight, new SolidColorBrush(color));
        dc.DrawText(formattedText, new Point(text.X + offsetX, text.Y + offsetY));
        int textWidth = (int) formattedText.Width;
        int textHeight = (int)formattedText.Height;

        // Drawing continues...
    }
} 
```

注意：似乎我什至不必调用`DrawText`来锁定字体文件（尝试注释掉该行）。使用 formattedText 实例分配 textWidth 和 textHeight 变量足以让 WPF 保持文件打开。

**更新：** 我无法解决这个问题，所以目前我正在使用一种解决方法，如果覆盖现有字体目录失败，则会创建一个新的临时字体目录。它有效，但我对不得不这样做并不满意，所以我仍然对如何解决这个问题的任何建议感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:32:55.900

也许它在某种程度上与 Pr​​esentation Font Cache 相关，这是一种运行以缓存字体数据结构的服务，以便 WPF 应用程序执行得更好......也许它使文件保持锁定状态。

尝试更改 Presentation Font Cache 服务，使其停止并禁用。运行您的应用程序，然后尝试查看是否可以删除字体文件。

如果实际上是原因，禁用演示字体缓存不是一个长期的解决方案。您可能会以编程方式停止并重新启动它......不确定这将如何影响其他正在运行的 WPF 应用程序。

有一种更明确的方法可以通过使用工具来查看谁锁定了文件，例如

*   [http://windowsxp.mvps.org/processlock.htm](http://windowsxp.mvps.org/processlock.htm)

一个可能的解决方案（绕过锁定文件的人）是将 .TTF 文件作为资源放入您的应用程序中，然后您可以让 WPF 担心如何管理和清理它。

链接：

*   [http://msdn.microsoft.com/en-us/library/ms753303.aspx](http://msdn.microsoft.com/en-us/library/ms753303.aspx)

*   [WPF PresentationFontCache。这是什么？](https://stackoverflow.com/questions/2770999/wpf-presentationfontcache-what-is-this)

*   [http://blog.tune-up.com/myth-buster/the-case-of-the-mysterious-presentation-font-cache-cpu-hog/](http://blog.tune-up.com/myth-buster/the-case-of-the-mysterious-presentation-font-cache-cpu-hog/)

更新：

您可以创建一个包装器类，其工作是在释放对象时删除文件，或者如果由于文件仍处于锁定状态而无法在释放时删除文件，那么当垃圾收集器调用终结器时它将被删除。

*   [http://www.codeproject.com/Articles/84831/A-simple-technique-to-take-care-of-temporary-files](http://www.codeproject.com/Articles/84831/A-simple-technique-to-take-care-of-temporary-files)

另一种可能性是使用`FileOptions.DeleteOnClose`- 您必须查看是否可以在您打开/创建的字体文件上使用 FontFamily，并且当前正在维护一个打开的文件句柄。

*   [带有 DeleteOnClose File 选项的 FileStream](https://stackoverflow.com/questions/1444262/filestream-with-deleteonclose-file-option)

您说“ttf 文件驻留在一个临时位置，可以在以后的某个时间点删除。”...当您在以后的某个时间点说...我假设是当您退出程序/进程时....或者不是这样吗？

或尝试 TempFileCollection：

*   [http://msdn.microsoft.com/en-us/library/system.codedom.compiler.tempfilecollection.aspx](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.tempfilecollection.aspx)

# javascript - 使用 Jquery 选中/取消选中多个复选框

> ID：11084440
> 
> 赞同：0
> 
> 时间：2012-06-18T13:57:48.263
> 
> 标签：javascript, jquery, asp.net-mvc, razor, partial-views

我一直被困在一个小的 jquery 问题上，它可能只是我还没有看到的小问题。我有一个 PartialView，我希望能够选中一个复选框，它应该使所有其他复选框都未选中。我只希望在提交页面之前选中一个复选框。

无论如何，这是我的代码示例：

**这是我的部分视图**

```
@model List<int>
@foreach (var element in Model)
{
    <div id="AddedProductImages">
        <img src="@Url.Action("RetrieveFile", "File", new { id = element })"     alt="@element" width="125px;" />
    <input type="checkbox" name="PrimaryImage" onchange="PrimaryImageChkBox('@element')" id="PrimaryCheckbox'@element'"/>
</div>
} 
```

**这是我的 Jquery 函数**

我不应该先取消选中然后在第二行告诉单击的复选框被选中吗？

```
function PrimaryImageChkBox(id) {
    alert(id);
    $('input[name=PrimaryImage]').removeAttr("checked");
    $('#PrimaryCheckbox' + id).attr('checked', "checked");
} 
```

先感谢您 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:00:16.843

> 我只希望在提交页面之前选中一个复选框。

这就是单选按钮的用途，而不是复选框。您可以使用相同的名称对多个单选按钮进行分组。这允许同时选择一个单选按钮：

```
@model List<int>
@foreach (var element in Model)
{
    <div id="AddedProductImages">
        <img src="@Url.Action("RetrieveFile", "File", new { id = element })" alt="@element" width="125px;" />
        <input type="radio" name="PrimaryImage" />
    </div>
} 
```

除此之外，您现在可以完全摆脱 javascript。

# php - PHP mySQL 获取表头函数

> ID：11084445
> 
> 赞同：1
> 
> 时间：2012-06-18T13:58:26.360
> 
> 标签：php, mysql

我正在尝试构建一个 PHP 函数，该函数允许我拥有一个 MySQL 数据库标头数组以查找特定字段。

```
function table($tablename,$id) {
  $post = mysql_query("SELECT * FROM $tablename WHERE ID = '$id'");
} 
```

然后，我将如何将表头输出为相关行的有效微型查询。

例如。`$post->title, $post->timestamp, $post->field4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:01:39.513

您需要 MySQLi 或 PDO_MySQL，但在您的情况下：

```
while ($row = mysql_fetch_assoc($post)) {
    echo $row['title'];
} 
```

[文档](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)

请记住，不鼓励使用 mysql_* 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:05:15.513

一个简单的 PHP 脚本来获取**MySQL**中的**字段名称**：

 **```
<?php 
    $sql = "SELECT * FROM table_name;"; 
    $result = mysql_query($sql); 
    $i = 0; 
    while($i<mysql_num_fields($result)) 
    { 
      $meta=mysql_fetch_field($result,$i); 
      echo $i.".".$meta->name."<br />"; 
      $i++; 
    } 
?> 
```

**输出：**

```
0.id 
1.todo 
2.due date 
3.priority 
4.type 
5.status 
6.notes 
```

希望这可以帮助！取自 php.net 文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T14:04:23.390

怎么样`mysql_fetch_assoc($post)`？

要将所有字段名称放入一个单独的数组中：

```
$post = mysql_fetch_assoc($post);
$fields = array();

foreach($post as $title => $value){
    $fields[] = $title;
} 
```

您可以在 while 循环中使用它来遍历所有行并获取字段值（以及它们的名称）：

```
while($p = mysql_fetch_assoc($post)){

    $title = $p['title'];
    $timestamp = $p['timestamp'];

    //And so on...
} 
```

编辑：Pierpaolo 是对的，你应该使用另一个 mysql 实现，因为旧的将在 PHP 5.5/5.6 或稍后删除......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T14:10:57.890

您可以通过执行以下命令仅获取列名：

```
DESCRIBE `MyTable`; 
```

它将返回一个包含 Field、Type、Key 等的结果集。

```
$query = mysql_query("DESCRIBE `MyTable`");
while($result = mysql_fetch_assoc($query)) {
    echo $result['Field'] . "\n";
} 
```**

# c# - 调用 sproc 时的数字或类型错误

> ID：11084446
> 
> 赞同：0
> 
> 时间：2012-06-18T13:58:28.480
> 
> 标签：c#, sql, oracle

每当我尝试从 C# 执行它时，我都会不断收到此存储过程错误（参数的数量或类型错误）。

这是 sproc 的变量定义：

```
requestNumber varchar2,
requestXML clob,
userID varchar2,
activityID integer,
origin_zip varchar2,
destination_zip varchar2,
pur_date varchar2 
```

这是 C# 代码中 oracle 参数的定义：

```
OracleParameter _requestNumber = new OracleParameter("requestNumber", OracleDbType.Varchar2) { Direction = ParameterDirection.Input, Value = requestNumber };

OracleParameter _requestXML = new OracleParameter("requestXML", OracleDbType.Clob) { Direction = ParameterDirection.Input, Value = xml };

OracleParameter _userID = new OracleParameter("userID", OracleDbType.Varchar2) { Direction = ParameterDirection.Input, Value = input.UserID };

OracleParameter _activityID = new OracleParameter("activityID", OracleDbType.Int32) { Direction = ParameterDirection.Input, Value = Convert.ToInt32(activityID) };

OracleParameter _sOriginZip = new OracleParameter("origin_zip", OracleDbType.Varchar2) { Direction = ParameterDirection.Input, Value = _originZip };

OracleParameter _sDestinationZip = new OracleParameter("destination_zip", OracleDbType.Varchar2) { Direction = ParameterDirection.Input, Value = _destinationZIP };

OracleParameter _sPurDate = new OracleParameter("pur_date", OracleDbType.Varchar2) { Direction = ParameterDirection.Input, Value = _purDate };

                command.Parameters.Add(_requestNumber);
                command.Parameters.Add(_requestXML);
                command.Parameters.Add(_userID );
                command.Parameters.Add(_activityID );
                command.Parameters.Add( _sOriginZip);
                command.Parameters.Add( _sDestinationZip);
                command.Parameters.Add( _sPurDate); 
```

什么可能导致该异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:06:16.610

在添加参数之前尝试使用以下代码清除命令参数，

```
command.Parameters.Clear(); 
```

还要检查你是否设置`command.Type`为 storedProcedure

# javascript - 现有 javascript 照片库的图像淡入淡出效果

> ID：11084449
> 
> 赞同：0
> 
> 时间：2012-06-18T13:58:39.617
> 
> 标签：javascript, jquery, slideshow, fade, photo-gallery

我是一名摄影师，最近一直在重新设计我的网站。我使用了我在一个非常有用的网站上找到的幻灯片代码，并且能够通过删除自动播放、自定义下一个、上一个按钮等来根据我的需要对其进行自定义......这真的很简单，而且看起来效果很好现在。

但我有一个问题。是否可以在不完全重写代码的情况下为图像过渡添加淡入淡出效果？几天来，我一直在搜索 javascript/jquery 代码，并且遇到了许多提供代码的网站，但我找不到任何可以让我将其实施到现有画廊中的网站。这是我的代码的样子；

```
<body>

<!-- configurable script -->
<script type="text/javascript">
theimage = new Array();

// The dimensions of ALL the images should be the same or some of them may look stretched or reduced in Netscape 4.
// Format: theimage[...]=[image URL, link URL, name/description]
theimage[0]=["/images/portrait/image1.jpg", "", "Image Title 1"];
theimage[1]=["/images/portrait/image2.jpg", "", "Image Title 2"];
theimage[2]=["/images/portrait/image3.jpg", "", "Image Title 3"];
theimage[3]=["/images/portrait/image4.jpg", "", "Image Title 4"];
theimage[4]=["/images/portrait/image5.jpg", "", "Image Title 5"];
theimage[5]=["/images/portrait/image6.jpg", "", "Image Title 6"];
theimage[6]=["/images/portrait/image7.jpg", "", "Image Title 7"];
theimage[7]=["/images/portrait/image8.jpg", "", "Image Title 8"];

///// Plugin variables

playspeed=0;// The playspeed determines the delay for the "Play" button in ms
//#####
//key that holds where in the array currently are
i=0;

//###########################################
window.onload=function(){

    //preload images into browser
    preloadSlide();

    //set the first slide
    SetSlide(0);

}

//###########################################
function SetSlide(num) {
    //too big
    i=num%theimage.length;
    //too small
    if(i<0)i=theimage.length-1;

    //switch the image
    document.images.imgslide.src=theimage[i][0];

    //if they want name of current slide
    document.getElementById('slidebox').innerHTML=theimage[i][2];

    //if they want current slide number and total
    document.getElementById('slidecount').innerHTML= ""+(i+1)+" / "+theimage.length;

}

//###########################################
function preloadSlide() {
    for(k=0;k<theimage.length;k++) {
        theimage[k][0]=new Image().src=theimage[k][0];
    }
}

</script>

<!-- slide show HTML -->
<form name="slideshow">

<table border="0" cellpadding="2" cellspacing="0">
<tr>
    <td align="left">
    <script type="text/javascript">
        document.write('<img name="imgslide" id="imgslide" src="'+theimage[0][0]+'" border="0">')
    </script>
    </td>
</tr>
<tr>
    <td align="left"><div id="slidebox"></div></td>
</tr>
<tr>
    <td height="30px" align="left" valign="bottom">
        <a style="text-decoration:none;" href="javascript:SetSlide(i-1);" onfocus="this.blur()">Prev</a> | 
        <a style="text-decoration:none;" margin-left:2px"; href="javascript:SetSlide(i+1);" onfocus="this.blur()">Next</a>
        <div style="display:inline; margin-left:10px" align="left" id="slidecount"></div>
    </td>
</tr>
</table>

</form>
<!-- end of slide show HTML -->

</body> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:01:27.970

您可以更改为使用 jQuery`SetSlide()`实现 a`fadeOut`然后 a ，如下所示：`fadeIn`

```
//###########################################
function SetSlide(num, titleOnly) {
    if (!titleOnly) {
        //switch the image
        var img = $("#imgslide");

        // don't interrupt an image in transition
        if (img.data("inTransition")) {
            return;
        }
        img.data("inTransition", true);

        //too big
        i=num%theimage.length;
        //too small
        if(i<0)i=theimage.length-1;

        img.stop(true).animate({opacity: 0}, 1000, function() {
            img.attr("src", theimage[i][0]);
            img.animate({opacity: 1}, 1000, function() {
                img.data("inTransition", false);

            });
        })
    }

    //if they want name of current slide
    document.getElementById('slidebox').innerHTML=theimage[i][2];

    //if they want current slide number and total
    document.getElementById('slidecount').innerHTML= ""+(i+1)+" / "+theimage.length;

} 
```

并更改`preloadSlide()`为：

```
//###########################################
function preloadSlide() {
    for(k=0;k<theimage.length;k++) {
        theimage[k][3]=new Image().src=theimage[k][0];
    }
} 
```

这是一个工作演示：http: [//jsfiddle.net/jfriend00/85nzq/](http://jsfiddle.net/jfriend00/85nzq/)

* * *

`<body>`要在您的页面中包含 jQuery，请将其添加到您的其他脚本之前的标记之后的右上角附近：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# css - 两个 div 并排 - 一个在最左边，另一个在中间

> ID：11084452
> 
> 赞同：0
> 
> 时间：2012-06-18T13:58:56.187
> 
> 标签：css, html, css-float, padding, margin

我正在创建一个 WP 主题，该主题将在页面中间有两个部分。左边是“最近的工作”，右边是“最近的博客文章”。我希望“最近的博客文章”从页面中间开始；它的左边缘与容器的水平中点对齐。我还希望有一条垂直线将两者分开。我玩过边距和填充，但似乎无法达到我想要的效果。这是我要做什么的图像： ![理想的](../Images/09b6b3038f4659ff5b03a7247ba01462.png)

```
<div id="recent">
    <div id="recent-work">
            <p><span>Recent Work</span></p>

    <div class="next">
        <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
    </div><!-- end next -->
    </div><!-- end recent-work -->
    <div id="recent-blog">
        <p><span>Recent Blog</span></p>

    <div class="next">
        <a href="#"><img src="img/next.png" alt="Click for more information" /></a>
    </div><!-- end next -->
    </div><!-- end recent-blog -->
</div><!-- end recent --> 
```

和

```
#recent {
    border-top: 1px solid #202020;
    padding-bottom: 40px;
    padding-top: 40px;
}

#recent #recent-work {
    float: left;
}

#recent #recent-work .next{
    float: right;
}

#recent #recent-work p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
}

#recent #recent-blog {
    float: right;
}

#recent #recent-blog .next{
    float: right;
}

#recent #recent-blog p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
} 
```

从昨天开始我一直在努力解决这个问题，因此非常感谢任何和所有的帮助。

@普拉文 ![变化](../Images/aa1f3238e809767b2b96b9559fa56c02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:02:14.593

在您的 CSS 中，请添加以下行：

```
#recent #recent-work p {text-align: center;} 
```

**更新：**

我添加了这个：

```
#recent #recent-work p, #recent #recent-blog p {text-align: center;} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:16:11.757

希望我做对了-

工作示例 -[**演示**](http://jsfiddle.net/cedLK/2/)

HTML

```
<div class="wrap">
<div class="leftCont">
    <div class="leftEle"></div>
    <div class="leftEle"></div>
    <div class="leftEle"></div>
</div>
<div class="rightCont">
    <div class="rightEle"></div>
    <div class="rightEle"></div>
    <div class="rightEle"></div>
</div>
</div>​ 
```

CSS -

```
.rightCont , .leftCont{
width:50%;
float:left;
background-color:green;
min-width:340px;
}
.wrap{
padding-top:20px;
width:100%;
min-width:600px;
height:150px;
overflow:hidden;
background-color:black;
}
.leftEle , .rightEle{
width:30%;
border:2px solid black;
min-width:100px;
float:left;
background-color:yellow;
height:100px;
} 
```

​</p>

# ruby-on-rails - Rails 3 - 从 JSON 响应中检索多行

> ID：11084453
> 
> 赞同：0
> 
> 时间：2012-06-18T13:58:59.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我已经成功地对 Facebook、Twitter 和 LastFM 进行了 API 调用，以使用以下代码检索 Likes、Followers 和 Listeners：

```
 def get_twitter
    @artist = Artist.accessible_by(current_ability).find(params[:id])
    if @artist.twitter_screen_name.present?
      require 'open-uri'
      require 'json'
      result = JSON.parse(open("https://api.twitter.com/1/users/show.json?screen_name="<<@artist.twitter_screen_name<<"&include_entities=true").read)
      @followers = result["followers_count"]
    end
  end 
```

这很好用，因为只返回一个数据集，并且很容易访问我想要的位。LastFM 的响应是嵌套的，虽然它抛出了我，但我设法访问了与上面几乎完全相同的 Listeners 计数，但只使用了以下行：

```
@listeners = result["artist"]["stats"]["listeners"].to_i 
```

现在，我正在尝试从 Songkick 检索事件列表。显然，响应包含多个事件，因此我无法知道如何遍历响应。

他们的开发者指南在这里： http: [//www.songkick.com/developer/upcoming-events-for-artist](http://www.songkick.com/developer/upcoming-events-for-artist)

示例响应如下，但这仅适用于单个事件：

```
{
  "resultsPage:" {
    "results": { "event": [
      {
        "id":11129128,
        "type":"Concert",
        "uri":"http://www.songkick.com/concerts/11129128-wild-flag-at-fillmore?utm_source=PARTNER_ID&utm_medium=partner",
        "displayName":"Wild Flag at The Fillmore (April 18, 2012)",
        "start":{"time":"20:00:00",
                 "date":"2012-04-18",
                 "datetime":"2012-04-18T20:00:00-0800"},
        "performance":[{"artist":{"uri":"http://www.songkick.com/artists/29835-wild-flag?utm_source=PARTNER_ID&utm_medium=partner",
                                  "displayName":"Wild Flag","id":29835,"identifier":[]},
                        "displayName":"Wild Flag",
                        "billingIndex":1,
                        "id":21579303,
                        "billing":"headline"}],
        "location":{"city":"San Francisco, CA, US","lng":-122.4332937,"lat":37.7842398},
        "venue":{"id":6239,
                 "displayName":"The Fillmore",
                 "uri":"http://www.songkick.com/venues/6239-fillmore?utm_source=PARTNER_ID&utm_medium=partner",
                 "lng":-122.4332937, "lat":37.7842398,
                 "metroArea":{"uri":"http://www.songkick.com/metro_areas/26330-us-sf-bay-area?utm_source=PARTNER_ID&utm_medium=partner",
                              "displayName":"SF Bay Area","country":{"displayName":"US"},"id":26330,"state":{"displayName":"CA"}}},
        "status":"ok",
        "popularity":0.012763
      }, ....
    ]},
    "totalEntries":24,
    "perPage":50,
    "page":1,
    "status":"ok"
  }
} 
```

有没有人有任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:57:43.680

您只需要进入数组并迭代：

```
parsed = JSON.parse(some_json)
events = parsed['resultsPage']['results']['event']
events.each do |event|
  puts event["type"]
  #access other parts of the event
end 
```

# c# - 如何在 Windows 窗体中从一个 .cs 文件访问 gridview 到另一个 .cs 文件

> ID：11084454
> 
> 赞同：0
> 
> 时间：2012-06-18T13:59:06.360
> 
> 标签：c#, winforms

我在 Windows 窗体中有一个 gridview。我有`checkData.cs`，`myNames.cs`文件。我划分了一些函数，并将这些函数保存在这些 .cs 文件中。所有文件都有命名空间`myNameSpace` Program.cs 文件有 gridview。当我尝试从 checkData.cs 访问该 gridview 时，它显示为`The data dataGridView1 doesnot exist in the current context`. 如何访问网格视图？

在 Program.cs 我有以下代码

```
namespace myNameSpace
{

    class Program : System.Windows.Forms.Form
    {
    private DataGridView dataGridView1;
    }
} 
```

在 checkData.cs 文件中，我尝试按如下方式访问该 gridview。

```
namespace myNameSpace
{
 public BindToGrid()
{
dataGridView1.dataSource = mySource; //assume that mySource has grid bound data
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:11:56.590

将 传递`DataGridView`给另一个类作为参数并存储对它的引用（类在 C# 中是引用类型，因此非常简单。）

编辑：编码大猩猩的答案表明了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:16:06.397

命名空间在这里并不是很重要。我不确定您在 checkData.cs 和 myNames.cs 中的类和/或方法是否是静态的，但是您拥有的 DataGridView 对象作为表单对象的子对象存在。为了访问此对象，必须将其传递到您要从中访问它的类或方法中。一种方法是将其传递给构造函数。另一种方法是在你的类中拥有一个属性。我个人认为让任何需要访问该对象的方法直接作为参数传入会更有用。

或者，如果您所做的事情影响了 DataGridView 的数据，并且您只是试图将您的逻辑保留在表单本身之外，那么您可以将逻辑放在扩展方法中，然后直接从表单中调用它。

从表格内部：

```
using MyExtensions; 

...

private void MyMethod()
{
    this.DataGridView1.CheckNames();
} 
```

然后使用 CheckNames 方法（Extensions.cs 之类的）创建一个扩展类：

```
public static class Extensions
{

    public static void CheckNames(this DataGridView source)
    {
        // Do  your logic here.
    }

} 
```

我发现扩展方法在分离/重用与特定类相关的逻辑方面非常方便。这是[文档](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:08:23.297

最简单的答案是让你`checkData.cs`和`myNames.cs`文件中的类`DataGridView`作为构造函数参数。就像是：

```
public class CheckData 
{
   public CheckData(DataGridView Gridview)
   {
       _gridView = GridView;
   }

   private readonly DataGridView _gridView;
} 
```

# asp.net - 在 ASP.NET 和 IIS7 中记录原始和压缩的 HTTP 响应

> ID：11084459
> 
> 赞同：3
> 
> 时间：2012-06-18T13:59:22.753
> 
> 标签：asp.net, logging, iis-7, compression, ihttpmodule

按照[这个问题](https://stackoverflow.com/questions/1038466/logging-raw-http-request-response-in-asp-net-mvc-iis7)的思路，我想创建一个 HttpModule 来为我们记录一些自定义的请求和响应。使用该问题的最流行答案中的代码，我已经启动并运行了一个 HttpModule，它确实有效：

```
class PortalTrafficModule : IHttpModule
{
    public void Dispose()
    {
        // Do Nothing
    }

    public void Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(context_BeginRequest);
        context.EndRequest += new EventHandler(context_EndRequest);
    }

    private void context_BeginRequest(object sender, EventArgs e)
    {
        HttpContext context = ((HttpApplication)sender).Context;

        // Create and attach the OutputFilterStream to the Response and store it for later retrieval.
        OutputFilterStream filter = new OutputFilterStream(context.Response.Filter);
        context.Response.Filter = filter;
        context.Items.Add("OutputFilter", filter);

        // TODO: If required the request headers and content could be recorded here
    }

    private void context_EndRequest(object sender, EventArgs e)
    {
        HttpContext context = ((HttpApplication)sender).Context;
        OutputFilterStream filter = context.Items["OutputFilter"] as OutputFilterStream;

        if (filter != null)
        {
            // TODO: Log here - for now just debug.
            Debug.WriteLine("{0},{1},{2}",
                context.Response.Status,
                context.Request.Path,
                filter.ReadStream().Length);
        }
    }
} 
```

*（注意，代码中引用的OutputFilterStream类在引用的[问题](https://stackoverflow.com/questions/1038466/logging-raw-http-request-response-in-asp-net-mvc-iis7)中）。*

但是，响应似乎缺少我在 Fiddler 中看到的一些 HTTP 标头（例如“日期”），更重要的是，当我打开压缩时，我正在记录的响应没有被压缩，而我在 Fiddler 中看到的是。

**所以我的问题**- 是否可以记录压缩内容，或者这是否发生在我的模块无法连接的后续步骤中？

作为记录，我也尝试过处理*PreSendRequestContent*事件并且响应仍然未压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:23:42.077

嗨，虽然我不能直接回答你的问题，但我过去曾做过类似的事情，并且发现以下资源非常有帮助和启发。最后，通过在 web config 中配置 System.Diagnostics 节点并创建流量跟踪日志，我设法实现了原始肥皂头所需的内容。我了解您的需求可能比这更细化，但我相信此资源可能仍会有所帮助。

[http://msdn.microsoft.com/en-us/library/ms731859](http://msdn.microsoft.com/en-us/library/ms731859)

特别感兴趣的可能是上面的消息日志配置和查看消息日志链接。

# windows - 什么可能导致 Perl 系统调用开始失败？

> ID：11084463
> 
> 赞同：12
> 
> 时间：2012-06-18T13:59:38.607
> 
> 标签：windows, perl

一个小要求：我每天阅读 Stack Overflow 的 Perl 问题，并尽可能回答/贡献；今天我需要社区的帮助！

Perl 设置：我在 Windows 上运行 Active Perl 5.8.8。安装在我们部门服务器的本地驱动器上，该驱动器也与网络共享。所有部门用户都通过指向这个网络安装的 Perl 在他们自己的 PC 上运行 Perl。这已经工作了多年，并没有引起问题，但它是理解问题所需的一条信息。

有问题的服务器也是我们的“cron”（计划任务）服务器，处理各种自动化任务。上周突然，Perl 脚本（在服务器上）中的系统调用开始失败（详情如下）。起初，我怀疑 Perl 安装已损坏，但所有客户端 PC 仍然可以运行相同的 Perl 脚本而没有任何问题，这让我认为这是服务器问题。我已经重新启动服务器两次，问题仍然存在，因此我需要帮助！

以下是系统调用失败的各种方式的一些示例，归结为 Perl 单行代码：

```
% perl -e "system('dir')" 
```

那应该打印一个“目录”列表，但它会打开一个子外壳。如果我输入“exit”，我可以退出子 shell，然后我回到原来的 shell（通过使用向上箭头键检查 shell 历史来确认）。

```
% perl -e "print `dir`" 
```

这实际上挂起。什么都没有发生。如果我 Ctrl-C 终止进程，我会收到消息“终止信号 SIGINT(2)”，然后 DOS 提示符返回。但是，DOS 提示符中的任何未来命令（即使只是按 ENTER）都会导致错误“进程试图写入不存在的管道。”。您必须退出 DOS 提示符，因为它实际上是无用的。

最后一个例子：

```
% perl -e "system('Z:/Scripts/rebuild.pl')" 
```

'ebuild.pl' 不是内部或外部命令、可运行程序或批处理文件。

在这种情况下，Perl 将正斜杠 (/) 切换为 DOS/Windows 反斜杠 ()，它多年来一直做得很好。但是，Perl 将“rebuild.pl”文件名开头的“\r”解释为回车（我认为）并寻找剩余的“ebuild.pl”。调用其字符不能被误解的其他脚本名称会导致上述挂起（如果您使用反引号）打开子 shell（对于 system() 调用）。

我不只是对此感到困惑——我很绝望！我们部门服务器的“cron”作业现在没有用，因为我们使用了很多系统调用。

同样，我不认为这是一个损坏的 Perl 安装，因为网络用户可以正常运行。那么，在单个机器（不依赖于 Perl 安装本身）上会发生什么可能导致 Perl 的系统调用像这样失败？

环境设置，根据要求：

```
ALLUSERSPROFILE=C:\Documents and Settings\All Users
APPDATA=C:\Documents and Settings\engmodem\Application Data
CDSROOT=Z:\Cadence\SPB_16.5
CDS_CONCEPT_NOSPLASH=TRUE
CDS_LIC_ONLY=1
CDS_SITE=Z:\Cadence\Sites\16.5
CHDL_LIB_INST_DIR=%CDSROOT%
CLIENTNAME=USENTUTTLJL3C
ClusterLog=C:\WINDOWS\Cluster\cluster.log
CommonProgramFiles=C:\Program Files\Common Files
COMPUTERNAME=CORPUSAPP5
ComSpec=C:\WINDOWS\system32\cmd.exe
CONCEPT_INST_DIR=%CDSROOT%
FP_NO_HOST_CHECK=NO
HOMEDRIVE=H:
HOMEPATH=\
HOMESHARE=\\PF1\HOME
ICMHOME=Z:\Software\PTC\INTERC~1
INSTDIR=%CDSROOT%
LOGONSERVER=\\ENGMAHO5
LSF_BINDIR=Z:\Software\LSF\bin
LSF_ENVDIR=\\hwc151\LSF_6.2\etc
MESSAGE=BROADCAST
NUMBER_OF_PROCESSORS=2
OA_PLUGIN_PATH=%CDSROOT%\Share\oaPlugIns
OS=Windows_NT
Path=C:\Program Files\Legato\nsr\bin;Z:\oracle\ora92\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Windows Resource Kits\Tools\;Z:\Software\Perl\5.8.8\bin;C:\Program Files\Oracle\jre\1.3.1\bin;C:\Program Files\Oracle\jre\1.1.8\bin;C:\Program Files\Support Tools\;Z:\Software\LSF\bin;C:\Program Files\PHP\;C:\Program Files\Microsoft SQL Server\90\Tools\binn\;C:\Program Files\EMC RepliStor;C:\GitStack\python;C:\GitStack\python\Scripts;C:\GitStack\git\cmd;Z:\Scripts;Z:\bin;Z:\Cadence\SPB_16.5\tools\bin;Z:\Cadence\SPB_16.5\tools\fet\bin;Z:\Cadence\SPB_16.5\tools\pcb\bin;Z:\Cadence\SPB_16.5\OpenAccess\bin\win32\opt
PATHEXT=.COM;.EXE;.BAT;.PL;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.VBS
PCB_LIBRARY=16
PERL5SHELL=cmd
PHPRC=C:\Program Files\PHP\
PROCESSOR_ARCHITECTURE=x86
PROCESSOR_IDENTIFIER=x86 Family 6 Model 29 Stepping 1, GenuineIntel
PROCESSOR_LEVEL=6
PROCESSOR_REVISION=1d01
ProgramFiles=C:\Program Files
PROMPT=$P$G
PULLUP_DIFF_PAIRS=TRUE
SESSIONNAME=RDP-Tcp#1
SystemDrive=C:
SystemRoot=C:\WINDOWS
TZ=EST5EDT
VISUALSVN_SERVER=C:\Program Files\VisualSVN Server\
WF_RESOURCES=Z:\oracle\ora92\WF\RES\WFus.RES
windir=C:\WINDOWS 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T18:30:01.373

事实证明，这种奇怪行为的原因是错误地定义了 PERL5SHELL 变量：`cmd.exe`（Windows 中的 shell 解释器）应该使用一些参数调用以进行正确处理 - 一些更新后参数丢失。)

顺便说一句，在[The Doc](http://perldoc.perl.org/perlrun.html)中，据说如果根本没有定义 PERL5SHELL 环境变量，Perl 通常将“cmd.exe /x /c”行假定为 shell 可执行文件。

PS我真的很喜欢这个帖子：它清楚地表明了评论的目的。)

# sharepoint - 根据年份筛选 SharePoint 列表中的视图

> ID：11084464
> 
> 赞同：2
> 
> 时间：2012-06-18T13:59:54.050
> 
> 标签：sharepoint, filtering, spview

我正在使用 SharePoint 2010。

我想为我的列表创建新视图。该列表包含一个名为 的列`Year`，它是一个数字，顾名思义，它包含年份。例如。：

```
2012
2011
2010
2009 
```

我想创建一个视图，我只会显示过去 3 年。在创建新视图下，我去`Filter`，选择`Show items only when the following is true:`，选择列`Year`，然后......这就是我迷路的地方。

如何写一个条件，即一个数字应该大于当年减去 3？我试过了

```
[Year]-3 
```

但这显然不可能这么简单。请帮我写下这个条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:05:22.207

`[Today]`返回当前日期，因此您可以使用以下公式：

```
[Year] > YEAR([Today])-3 
```

# asp.net-mvc-3 - post方法中的空枚举

> ID：11084465
> 
> 赞同：0
> 
> 时间：2012-06-18T13:59:54.083
> 
> 标签：asp.net-mvc-3, post, razor, get, actionmethod

我有这个观点

```
@model IEnumerable<ViewModelRound2>

... <snip> ...

@{
    using (Html.BeginForm(new { round1Ring3Bids = Model }))
    {
        if (Model != null && Model.Count() > 0)
        {
                ... <snip> ...

                @for (var x = 0; x < Model.Count(); x++)
                {
                    ViewModelRound2 viewModelRound2 = Model.ElementAt(x);
                    Bid bid = viewModelRound2.Bid;

                    string userName = @bid.User.Invitation.Where(i => i.AuctionId == bid.Lot.Lot_Auction_ID).First().User.User_Username;

                    <tr>
                        <td>
                            @userName
                        </td>
                        <td>
                            @bid.Bid_Value
                        </td>
                        <td>
                            @Html.EditorFor(c => c.ElementAt(x).SelectedForRound2) 
                        </td>
                    </tr>
                }

            </table>

            <div class="buttonwrapper2">
                <input type="submit" value="Select"/>              
            </div>
        }
    }
} 
```

我有一个发布方法，当提交按钮被点击时

```
[HttpPost]
        public ActionResult Round2Manager(IEnumerable<ViewModelRound2> round1Ring3Bids) 
```

问题是枚举总是空的。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:20:24.213

> 问题是枚举总是空的。为什么是这样？

因为您不尊重默认模型绑定器期望绑定集合的[有线格式。](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

以下：

```
@Html.EditorFor(c => c.ElementAt(x).SelectedForRound2) 
```

为您的输入字段生成绝对错误的名称。

我建议您使用编辑器模板来避免这些问题：

```
@model IEnumerable<ViewModelRound2>

@using (Html.BeginForm())
{
    if (Model != null && Model.Count() > 0)
    {
        <table>
            @Html.EditorForModel()
        </table>
        <div class="buttonwrapper2">
            <input type="submit" value="Select"/>              
        </div>
    }
} 
```

然后为`ViewModelRound2`类型 ( `~/View/Shared/EditorTemplates/ViewModelRound2.cshtml`) 定义一个自定义编辑器模板，该模板将自动为该集合的每个元素呈现：

```
@model ViewModelRound2
@ {
    string userName = Model.Bid.User.Invitation.Where(
        i => i.AuctionId == Model.Bid.Lot.Lot_Auction_ID
    ).First().User.User_Username;
}

<tr>
    <td>
        @userName
    </td>
    <td>
        @Model.Bid.Bid_Value
    </td>
    <td>
        @Html.EditorFor(c => c.SelectedForRound2) 
    </td>
</tr> 
```

您现在会注意到文本输入字段如何具有正确的名称：

```
name="[0].SelectedForRound2"
name="[1].SelectedForRound2"
name="[2].SelectedForRound2"
... 
```

将此与您的初始值进行比较。

# c - 如何分配 16byte 内存对齐数据

> ID：11084468
> 
> 赞同：12
> 
> 时间：2012-06-18T13:59:59.910
> 
> 标签：c, memory, sse, icc

我正在尝试在一段代码上实现 SSE 矢量化，我需要我的一维数组与 16 字节内存对齐。但是，我尝试了几种方法来分配 16 字节内存对齐的数据，但它最终是 4 字节内存对齐的。

我必须使用英特尔 icc 编译器。这是我正在测试的示例代码：

```
 #include <stdio.h>
  #include <stdlib.h>

  void error(char *str)
  {
   printf("Error:%s\n",str);
   exit(-1);
  }

  int main()
  {
   int i;
   //float *A=NULL;
   float *A = (float*) memalign(16,20*sizeof(float));

   //align
   // if (posix_memalign((void **)&A, 16, 20*sizeof(void*)) != 0)
   //   error("Cannot align");

    for(i = 0; i < 20; i++)
       printf("&A[%d] = %p\n",i,&A[i]);

        free(A);

         return 0;
   } 
```

这是我得到的输出：

```
 &A[0] = 0x11fe010
 &A[1] = 0x11fe014
 &A[2] = 0x11fe018
 &A[3] = 0x11fe01c
 &A[4] = 0x11fe020
 &A[5] = 0x11fe024
 &A[6] = 0x11fe028
 &A[7] = 0x11fe02c
 &A[8] = 0x11fe030
 &A[9] = 0x11fe034
 &A[10] = 0x11fe038
 &A[11] = 0x11fe03c
 &A[12] = 0x11fe040
 &A[13] = 0x11fe044
 &A[14] = 0x11fe048
 &A[15] = 0x11fe04c
 &A[16] = 0x11fe050
 &A[17] = 0x11fe054
 &A[18] = 0x11fe058
 &A[19] = 0x11fe05c 
```

每次都是 4 字节对齐的，我用过 memalign，posix memalign。由于我在 Linux 上工作，我不能使用 _mm_malloc 也不能使用 _aligned_malloc。当我尝试使用 _aligned_attribute 时出现内存损坏错误（我认为这仅适用于 gcc）。

任何人都可以帮助我在 linux 平台上为 icc 准确生成 16 字节内存对齐数据。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T14:09:30.437

您分配的内存是 16 字节对齐的。请参阅：
`&A[0] = 0x11fe010`
但是在 的数组中`float`，每个元素是 4 个字节，因此第二个元素是 4 字节对齐的。

`aligned`您可以使用具有以下属性的结构数组，每个结构都包含一个浮点数：

```
struct x {
    float y;
} __attribute__((aligned(16)));
struct x *A = memalign(...); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-18T14:11:02.157

函数返回的地址`memalign`是`0x11fe010`，是 的倍数`0x10`。因此，该功能正在做正确的事情。这也意味着您的数组在 16 字节边界上正确对齐*。*您稍后要做的是打印`float`数组中每个下一个类型元素的地址。由于`float`在您的情况下大小正好是 4 个字节，因此每个下一个地址都将等于前一个 +4。例如，`0x11fe010 + 0x4 = 0x11FE014`. 当然，地址`0x11FE014`不是 的倍数`0x10`。如果您要在 16 字节边界上对齐所有浮点数，那么您将不得不浪费`16 / 4 - 1`每个元素的字节数。仔细检查您正在使用的内在函数的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:22:01.293

AFAIK，两者`memalign`都`posix_memalign`在做他们的工作。

```
&A[0] = 0x11fe010 
```

这与 16 字节对齐。

```
&A[1] = 0x11fe014 
```

当您这样做时，`&A[1]`您是在告诉编译器向`float`指针添加一个位置。这将不可避免地导致：

```
&A[0] + sizeof( float ) = 0x11fe010 + 4 = 0x11fe014 
```

如果您打算将向量中的**每个**元素对齐到 16 字节，则应考虑声明一个 16 字节宽的结构数组。

```
struct float_16byte
{
    float data;
    float padding[ 3 ];
}
    A[ ELEMENT_COUNT ]; 
```

然后您必须为`ELEMENT_COUNT`（在您的示例中为 20 个）变量分配内存：

```
struct float_16byte *A = ( struct float_16byte * )memalign( 16, ELEMENT_COUNT * sizeof( struct float_16byte ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:11:00.043

[我在维基百科](http://en.wikipedia.org/wiki/Data_structure_alignment#Hardware_significance_of_alignment_requirements)上找到了这段代码：

```
Example: get a 12bit aligned 4KBytes buffer with malloc()

// unaligned pointer to large area
void *up=malloc((1<<13)-1);
// well aligned pointer to 4KBytes
void *ap=aligntonext(up,12);

where aligntonext() is meant as: 
move p to the right until next well aligned address if
not correct already. A possible implementation is

// PSEUDOCODE assumes uint32_t p,bits; for readability
// --- not typesafe, not side-effect safe
#define alignto(p,bits) (p>>bits<<bits)
#define aligntonext(p,bits) alignto((p+(1<<bits)-1),bits) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T01:30:25.723

我个人认为您的代码是正确的，并且适用于英特尔 SSE 代码。当您将数据加载到 XMM 寄存器中时，我相信处理器只能从主存储器加载 4 个连续的浮点数据，第一个以 16 字节对齐。

总之，我相信你所做的正是你想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-16T00:24:46.953

你也可以在 VS 中使用它。

```
__declspec(align(16)) struct x {
    long long a;
    long long b;
    char c;
}; 
```

而不是这个

```
struct x {
    float y;
} __attribute__((aligned(16))); 
```

# java - 如果未检测到语句

> ID：11084473
> 
> 赞同：-1
> 
> 时间：2012-06-18T14:00:09.397
> 
> 标签：java, netbeans, if-statement

我正在使用 Netbeans 7.1.2 IDE。我的代码在这里：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)         {                                         
    // TODO add your handling code here:
    String search1;
    search1 = jTextField1.getText();
    search1.toLowerCase();
    jTextField2.setText("tes1");
    // stone
    if (search1=="stone" || search1=="rock" || search1=="1")
    {
        jTextField2.setText("Stone: 1");
    }

    // grass
    else if (search1=="Grass" || search1=="grass")
    {
        jTextField2.setText("Grass: 2");
    }

    // dirt
    else if (search1=="Dirt" || search1=="dirt" || search1=="Soil" || search1=="soil")
    {
        jTextField2.setText("Dirt: 3");
    }

    // cobblestone
    else if (search1=="cobblestone" || search1=="cobble")
    {
        jTextField2.setText("Cobblestone: 4");
    }

    else;
    {   
        jTextField2.setText("Unknown Block");
    }
} 
```

当我运行构建并在 jTextField1 中输入“石头”并点击 jButton1 时，它只会给我“未知块”，当 If 语句指定它应该将 jTextField 设置为“石头：1”时。难道我做错了什么？抱歉，如果这最终成为一个完全明显的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:01:38.840

Compare `String` using `equals()`

```
if (search1.equals("stone") || search1.equals("rock") || search1.equals("1")) 
```

Read [this](https://stackoverflow.com/questions/767372/java-string-equals-versus) for more information.

`==` compares references,not the values. In your case, you want to check for the value equality, not the reference equality.

* * *

EDIT:

Remember, you need to do all your `String` comparisons that way.

Besides,

you have an unwanted `;` here:

```
 else;
    {   
        jTextField2.setText("Unknown Block");
    } 
```

remove that `;` after `else`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:02:08.820

您需要使用`.equals`来检查字符串，如下所示：

`if (search1.equals("stone") || search1.equals("rock") || search1.equals("1"))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:02:15.920

所以首先不要比较 String using`==`而是使用`equals()`，然后在最后一个 else 语句中添加 a `;`，这意味着 else 的结尾（所以`jTextField2.setText("Unknown Block")`总是被执行）。你应该放下它。

```
else; //<==Remove the ;
{   
    jTextField2.setText("Unknown Block");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:04:01.783

你应该按照风影我爱罗所说的去做。但在这种情况下，问题不是那样的。在以下语句中删除`;`after else。

```
else;
{   
    jTextField2.setText("Unknown Block");
} 
```

这里发生的是

```
{   
    jTextField2.setText("Unknown Block");
} 
```

无论如何都会被执行，因为它在 if else 块之后。分号有效地终止了 else 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T14:04:23.987

使用`.equals`代替`==`来比较字符串。见：[http ://blog.enrii.com/2006/03/15/java-string-equality-common-mistake/](http://blog.enrii.com/2006/03/15/java-string-equality-common-mistake/)

# php - 使用 WAMP 的本地 Facebook 开发环境 - 如何查找本地主机端口号并处理应用程序

> ID：11084475
> 
> 赞同：0
> 
> 时间：2012-06-18T14:00:10.027
> 
> 标签：php, facebook, localhost, wampserver

嗨，我是 Web 编程的新手，正在尝试用 PHP 构建一个集成的 FB 应用程序。我已经在 heroku 服务器上存储了一些示例代码，但为了方便起见，我正在尝试设置本地开发环境并安装了 WAMP（我正在运行 Windows 7 32 位）。我有三个问题：

1) 我一直按照[https://devcenter.heroku.com/articles/facebook#working_locally](https://devcenter.heroku.com/articles/facebook#working_locally)上的说明进行操作，并且正在设置开发人员测试应用程序。似乎每台机器的 localhost url 始终为 127.0.0.1，但我怎样才能找出要放置的端口号？还是我只是随机选择一个 4 位数字？在另一篇文章中，有人为 Ruby（或 Ruby on Rails，我不确定）指定了一个端口，但我找不到关于 PHP 端口的任何信息。

2) 指南提到我需要将 APP ID 和 APP 机密设置为环境变量 - 我如何在 WAMP 中执行此操作？

3）一旦我创建了测试应用程序，我该如何在本地工作？

非常感谢您对任何这些问题的帮助！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:20:42.873

1.  您可以使用像 wireshark 这样的协议分析器来查找数据包在哪个端口上发送和接收。

2.  Heroku 默认为你设置环境变量。您可以通过调用来检查它`phpinfo()`。

    您也可以手动执行此操作

    ```
     <?php
     putenv("APP_ID=$APP_ID");
       ?> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:18:58.780

*   您不需要指定端口，PHP 使用的 HTTP 的默认值为 80。

> 该指南提到我需要将 APP ID 和 APP 机密设置为环境变量 - 我如何在 WAMP 中执行此操作？

*   希望 WAMP 类似于 XAMPP，因此您应该找到等效的 vhosts 文件并输入以下内容

    ```
    <VirtualHost *:80>
        DocumentRoot /Users/adam/Sites/mycoolapp-dev
        ServerName mycoolapp-dev.localhost
        SetEnv FACEBOOK_APP_ID 964173273189
        SetEnv FACEBOOK_SECRET dcd5d23d003d53cb2b68e01
    </VirtualHost> 
    ```

应该`C:\wamp\bin\apache\apache\conf\extra\httpd-vhosts.conf`是位置。因此，如果遇到错误，您需要阅读虚拟主机才能使其正常工作

> 一旦我创建了测试应用程序，我该如何在本地工作？

*   您编写代码并保存，然后在您的应用设置中创建一个与推送到 Heroku 的测试应用不同的新测试应用，或者更改原始应用设置中的 URL 以匹配您的本地主机 URL。如果一切都设置好了，您的应用程序应该能够在本地运行。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-18T14:02:52.490

```
var_dump($_SERVER); // should give you all the info you need 
```

# php - Magento - 具有 1000 种颜色选项的可配置产品会减慢产品详细信息页面的加载时间

> ID：11084476
> 
> 赞同：1
> 
> 时间：2012-06-18T14:00:10.353
> 
> 标签：php, mysql, magento

我们有一个拥有大约 5k 可配置产品的 magento 商店。对于这些产品，我们有 29k+ 的“颜色”属性选项。这严重拖慢了我们的商店（加载产品详细信息页面需要 10-20 秒）。

许多开发人员告诉我们，他们可以使用直接查询来解决速度问题。然而，实际上没有一个人能够完成这项任务。

有没有人在这里成功地做到这一点？任何建议、代码等将不胜感激。我在这里花了很多时间环顾四周，并没有看到这个问题的任何具体答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-03T12:30:03.607

因为我今天有类似或完全相同的问题，所以我想发布解决方案：

在我的情况下，我有可能有 20k 个选项的可配置属性。产品详细信息页面需要很长时间才能加载。

经过一些研究，我发现其他人也有类似的问题： [Link 1](https://magento.stackexchange.com/questions/55709/enterprise-1-14-1-swatches-causing-35-sec-plus-load-time-on-category-pages) [Link 2](https://magento.stackexchange.com/questions/89290/can-anyone-suggest-me-how-can-i-handle-thousands-of-color)

解决方案如下：

我复制了：/app/code/core/Mage/ConfigurableSwatches/Model/Resource/Catalog/Product/Attribute/Super/Collection.php

到本地：/app/code/**本地**/Mage/ConfigurableSwatches/Model/Resource/Catalog/Product/Attribute/Super/Collection.php

（请注意您应该更改：**$fallbackStoreId**变量）

并进行了以下更改以加快速度：

```
/**
 * Load attribute option labels for current store and default (fallback)
 *
 * @return $this
 */
protected function _loadOptionLabels()
{
    if ($this->count()) {
        $labels = $this->_getOptionLabels();
        foreach ($this->getItems() as $item) {
            $item->setOptionLabels($labels);
        }
    }
    return $this;
}

/**
 * Get Option Labels
 *
 * @return array
 */
protected function _getOptionLabels()
{
    $attributeIds = $this->_getAttributeIds();
    // Mage_Catalog_Model_Abstract::DEFAULT_STORE_ID
    $fallbackStoreId = 2;

    $select = $this->getConnection()->select();
    $select->from(array('options' => $this->getTable('eav/attribute_option')))
        ->join(
            array('labels' => $this->getTable('eav/attribute_option_value')),
            'labels.option_id = options.option_id',
            array(
                'label' => 'labels.value',
                'store_id' => 'labels.store_id',
            )
        )
        ->where('options.attribute_id IN (?)', $attributeIds)
        ->where(
            'labels.store_id IN (?)',
            array($fallbackStoreId, $this->getStoreId())
        );

    $labels = array();
    $thisClass = $this;
    Mage::getSingleton('core/resource_iterator')->walk(
        $select,
        array(function($args) use (&$thisClass){
            $data = $args['row'];
            $labels[$data['option_id']][$data['store_id']] = $data['label'];

        })
    );

    return $labels;
}

/**
 * Get Attribute IDs
 *
 * @return array
 */
protected function _getAttributeIds()
{
    $attributeIds = array();
    foreach ($this->getItems() as $item) {
        $attributeIds[] = $item->getAttributeId();
    }
    $attributeIds = array_unique($attributeIds);

    return $attributeIds;
} 
```

# mysql - Mysql查询返回一个非常大的文件

> ID：11084478
> 
> 赞同：1
> 
> 时间：2012-06-18T14:00:14.457
> 
> 标签：mysql, file, multiple-tables

我有查询从两个表中选择一些列，这些列必须包含一些实际上是空的单元格，但必须在查询中命名它，例如

```
select name, REPLACE(format, ' – ', '/') as format, CAST(price AS UNSIGNED INTEGER) as price, CONCAT('http://example.com/',url_key) as url, level_id_value, delivery, sku from t1 where delivery <> 'slut' INTO OUTFILE 'test.txt' FIELDS TERMINATED BY '\t'; 
```

它可以完美地在 lib 文件夹中生成 2.5 MB 大小的文本文件，但其他代码如下，用于另一个查询，我必须从另一个表中添加一个列以及一些带有某些标题的空列，似乎可以工作，但产生的文件大小约为11GB，

```
sELECT t1.sku, t.name, ' ' as Size, format, ' ' as subcategory, CAST(t1.price AS UNSIGNED INTEGER) as price, ' ' as dummy, CONCAT('http://example.com/',t1.url_key) as url, CONCAT('Från ',t1.level_id_value) as shipping_fee, t2.is_in_stock as stock, ' ' as text1, ' ' as Description from t2,t1 where t1.delivery <> 'slut' INTO OUTFILE 'test.txt' FIELDS TERMINATED BY '\t'; 
```

调试此问题的任何帮助将是可观的，对mysql了解不多，因此非常欢迎详细解释。有没有一种方法可以使代码类似于两个表中的第一个工作代码？我只需要 t2 表中的一列，即 is_in_stock。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:14:06.063

所以第一个是带有 WHERE 子句的简单查询 SELECT INTO，这将返回少量结果。

第二个是显示一个隐式内部连接，但是您不是基于唯一行返回值，您只需从两个表中提取所有内容，无论它们在两个表中是否匹配

```
SELECT t1.sku, 
t.name, 
' ' as Size, 
format,
' ' as subcategory, CAST(t1.price AS UNSIGNED INTEGER) as price, 
' ' as dummy, CONCAT('http://example.com/',t1.url_key) as url, 
CONCAT('Från ',t1.level_id_value) as shipping_fee, 
t2.is_in_stock as stock, 
' ' as text1,
' ' as Description **`from t2,t1`** 
where t1.delivery <> 'slut' INTO OUTFILE 'test.txt' FIELDS TERMINATED BY '\t'; 
```

这就是我的做法，但您仍然需要隔离每条记录，所以是什么让每一行独一无二，并在 t1 和 t2 之间的那些字段上进行内部连接，如内部连接 ​​t2 ON t1.name = t2.name 和t1.id = t2.id 但它应该看起来像这样

```
SELECT t1.sku, 
t1.name, 
t1.format, 
CAST(t1.price AS UNSIGNED INTEGER) as price, 
CONCAT('http://example.com/',t1.url_key) as url,
CONCAT('Från ',t1.level_id_value) as shipping_fee, 
'' as dummy,
'' as size, 
'' as subcat,
'' as text1,
'' as Description,
t2.is_in_stock as stock,
from t1
INNER JOIN t2 WHERE t1.delivery <> 'slut'
INTO OUTFILE 'test.txt' FIELDS TERMINATED BY 't\'; 
```

希望能帮助到你！

# drupal - 自定义 Drupal 视图

> ID：11084484
> 
> 赞同：0
> 
> 时间：2012-06-18T14:00:20.443
> 
> 标签：drupal, structure

我对drupal及其观点有点陌生。所以任何人都可以告诉我如何制作如下图所示的结构 [http://d.pr/i/LrYX](http://d.pr/i/LrYX)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:04:46.110

您需要启用 Views UI 模块以及 Views 及其依赖项才能构建视图。

您将要创建一个表示“公司”的内容类型。然后你会想给它一个标志的图像字段，如果你想让它链接回某个东西，可能还给它一个链接字段或一个文本字段。这是 Drupal 7 中的所有核心，除了链接字段。

创建视图时，让它显示您刚刚创建的内容类型的字段网格。视图创建屏幕应如下所示。 ![查看配置](../Images/3e5472c19378c89cd746e640f9188ed2.png)

使用左侧的 AJAX 界面添加字段，并将网格设置为在网格格式的设置中显示 4 列。此配置位于格式标题下的左列中。

在开始添加字段之前，左侧的句柄列应该看起来像这样。 ![在此处输入图像描述](../Images/7a1aa84db2137dd01cb8c75c77b45239.png)

之后剩下的就是 CSS。

# windows - 在宽屏幕中捕捉 Windows 8 Metro 中的 ScrollViewer 不捕捉到最后一项

> ID：11084493
> 
> 赞同：3
> 
> 时间：2012-06-18T14:00:41.367
> 
> 标签：windows, xaml, microsoft-metro

我已在 ScrollViewer 内的应用程序中启用捕捉点，如以下问题所述：[使用可绑定集合启用 ScrollViewer Horizo​​ntalSnapPoints](https://stackoverflow.com/questions/10107470/enabling-scrollviewer-horizontalsnappoints-with-bindable-collection)

我遇到的问题是，当我在全高清显示器（1920x1080）中尝试我的应用程序时，每个项目的宽度都是 1400 像素。当我在项目#n-1 中捕捉到滚动条时，我无法滚动到最后一个，因为它没有捕捉到......

我必须做的是添加一个“假”项目，最后是透明的，所以我可以滚动到我收藏的最后一个项目：

```
<Page.Resources>
    <Style x:Key="ItemsControlStyle" TargetType="ItemsControl">
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ItemsControl">
                <ScrollViewer Style="{StaticResource HorizontalScrollViewerStyle}" HorizontalSnapPointsType="Mandatory" HorizontalSnapPointsAlignment="Near">
                    <ItemsPresenter />
                </ScrollViewer>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    </Style>
</Page.Resources>

<ItemsControl Style="{StaticResource ItemsControlStyle}">
    <Border Background="Red" Height="1000" Width="1400"/>
    <Border Background="Blue" Height="1000" Width="1400"/>
    <Border Background="Green" Height="1000" Width="1400"/>
    <Border Background="Yellow" Height="1000" Width="1400"/>
    <Border Background="Magenta" Height="1000" Width="1400"/>
    <Border Background="Transparent" Height="1000" Width="1000" />
</ItemsControl> 
```

我什至使用此 hack 的第二个问题是，我无法通过 Metro 应用程序访问屏幕尺寸，因此我什至无法根据屏幕添加宽度可变的最后一项来解决此问题问题。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:58:01.450

似乎以编程方式更改最后一项的宽度是最好的解决方案，使用 Window.Current.Bounds.Width;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:07:29.447

`LayoutAwarePage.cs`我发现您可以使用`WindowSizeChanged`事件 ( `e.Size`)从内部访问当前屏幕大小

也就是说，我确信可能有更好的方法来访问此事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T11:34:39.410

*之前提供的解决方案仅适用于少量案例（具有固定尺寸的物品）并且存在视觉问题。*

**更新：** 请参阅此处的示例[Enabling ScrollViewer Horizo​​ntalSnapPoints with bindable collection](https://stackoverflow.com/questions/10107470/enabling-scrollviewer-horizontalsnappoints-with-bindable-collection/34995256#34995256)

不需要“假”项目，至于第二个：您不需要屏幕大小，只需要 ItemsPresenter.Parent.ActualHeight（或宽度，取决于列表的使用方向）和项目容器宽度 - 请参见示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-12T10:51:38.210

ViewChanging 时更改 Horizo​​ntalSnapPointsAlignment ，如下所示：

```
private void sv_ViewChanging(object sender, ScrollViewerViewChangingEventArgs e)
    {
        if (e.NextView.HorizontalOffset <e.FinalView.HorizontalOffset)
        {
            sv.HorizontalSnapPointsAlignment = SnapPointsAlignment.Far;
        }
        else if (e.NextView.HorizontalOffset > e.FinalView.HorizontalOffset)
        {
            sv.HorizontalSnapPointsAlignment = SnapPointsAlignment.Near;
        }
    } 
```

# c# - 如何检测一个数据表是另一个数据表的一部分

> ID：11084496
> 
> 赞同：0
> 
> 时间：2012-06-18T14:00:51.343
> 
> 标签：c#, asp.net, .net, linq, datatable

如果我有两个数据表：

```
DT1 & DT2 
```

如何检查第一个是否包含第二个，我的意思是相同的`DT2`行在`DT1`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:04:26.413

循环遍历表和比较字段（希望只是 ID）。根据数据表的结构，有多种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:15:21.210

我的问题：*“所有行的字段都必须与另一个 DataTable 的同一行的字段匹配吗？”*

您的回答：*“不只是 id”*

您可以首先检查两者`DataTables`是否为空或两者是否具有相同的行数。然后，您可以使用 LINQ 来确定两者是否具有相同的 ID [`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
var dt1IDs = DT1.AsEnumerable().Select(r => r.Field<int>("id"));
var dt2IDs = DT2.AsEnumerable().Select(r => r.Field<int>("id"));
var diff = dt1IDs.Except(dt2IDs);
var equal = DT1.Rows.Count == DT2.Rows.Count && !diff.Any(); 
```

说明：`diff.Any()`当 DT1 中至少有一个 id 不在 DT2 中时返回 true。

**编辑**：如果 ID**不是**唯一的并且可能重复，您需要检查 DT1 中的所有 ID 是否也在 DT2 中并且 DT2 的所有 ID 都在 DT1 中：

```
var DT1InDT2 = dt1IDs.Except(dt2IDs);
var DT2InDT1 = dt2IDs.Except(dt1IDs);
var equal = DT1.Rows.Count == DT2.Rows.Count && !DT1InDT2.Any() && !DT2InDT1.Any(); 
```

无论如何，这个查询是有效的。

* * *

**Edit2**：我刚刚看到我有点误解了你的requiremnet。您只想知道第一个表是否包含第二个，反之亦然。

```
var DT2IdNotInDT1 = dt2IDs.Except(dt1IDs);
var equal = !DT2IdNotInDT1.Any(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:11:08.313

您可以使用相交运算符

var intersect = DT2.AsEnumerable().Intersect(DT1.AsEnumerable(), DataRowComparer.Default);

# php - mod rewrite 在 & 处停止，因此找不到名为“Britain-&-Ireland.php”的页面

> ID：11084498
> 
> 赞同：0
> 
> 时间：2012-06-18T14:00:54.997
> 
> 标签：php, mysql, apache

所以我的重写规则发送请求

www.cruiseandmaritime.com/cruises/French-Leave.php 到

www.cruiseandmaritime.com/cruise_details_by_name.php?id=French-Leave

效果很好

```
RewriteRule ^cruises/([a-zA-Z0-9-&]+).php?$ cruise_details_by_name.php?id=$1    [NC,L]  # Handle requests for all cruises 
```

然而，一些游轮在他们的标题中使用 & 符号......（英国和北部群岛）所以他们会

www.cruiseandmaritime.com/cruises/British-&-Northern-Isles.php

这不起作用，因为我的查询按名称查找游轮，并且传递给我的 get 变量的唯一位是“British”，在 & 和没有 & 之后没有其他内容

所以我很困惑...

富有的 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:04:40.090

```
www.cruiseandmaritime.com/cruises/British-&-Northern-Isles.php 
```

不是一个有效的 URL，因为`&`它不应该在那里。从那里开始，它只是一个垃圾箱，就是垃圾箱:)

url 中的 & 符号应该是`%26`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:11:20.243

我在[http://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)上尝试了这个并且不完全知道为什么，但是规则是有效的：

```
([&a-zA-Z0-9-]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:04:57.977

你的正则表达式很奇怪。你猜`-&`会是什么意思？

我不认为它应该是这样的：

```
[a-zA-Z0-9\&] 
```

# r - 如何在空间数据中使用区域名称作为标签？

> ID：11084502
> 
> 赞同：1
> 
> 时间：2012-06-18T14:01:18.040
> 
> 标签：r, ggplot2, spatial

我使用以下代码`SpatialPolygonsDataFrame`用 ggplot2 可视化一些：

```
require(shapefiles) 
require(sp)

xx <- readShapeSpatial(system.file("shapes/sids.shp", package="maptools")[1],
                   IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))

xx.ff <- fortify(xx,region="NAME")

x <- ggplot(xx.ff) +
aes(long,lat, fill = id) +
geom_polygon() 
```

最终得到：

![在此处输入图像描述](../Images/56b999b7eaad519ff3ee732978e99a0e.png)

假设我`fill`用来代表其他东西，比如区域盗窃率。因此，我想用它们的名字标记这些区域。有没有办法将地区名称直接写到地图上对应的地区，例如我想把哈利法克斯写到地区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:19:03.043

看看我问过的类似/相关问题：

[ggplot在地图上居中名称](https://stackoverflow.com/questions/9441436/ggplot-centered-names-on-a-map)

[改进居中县名ggplot和地图](https://stackoverflow.com/questions/9441778/improve-centering-county-names-ggplot-maps)

[在多面州地图上绘制县名（ggplot2）](https://stackoverflow.com/questions/10233623/plot-county-names-on-faceted-state-map-ggplot2)

# php - 将问题显示到 Excel/文本文件中的字符？

> ID：11084505
> 
> 赞同：0
> 
> 时间：2012-06-18T14:01:32.023
> 
> 标签：php, encoding, utf-8, preg-replace

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:56:47.593

您的正则表达式缺少`u`(utf-8) 修饰符：

```
preg_replace('/[\s]+/u',' ',@$tring);
                     ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:09:39.397

`echo $string`使用前有试过`preg_replace('/[\s]+/',' ',@$tring);`吗？

此代码在使用 Chrome 时运行正常，其输出为`le secteur public à réagir`.

当我在命令行中运行这段代码时，它的输出是`le secteur public α rΘagir`.

所以，我认为这里的问题不是`preg_replace('/[\s]+/',' ',@$tring);`

# c# - How to Convert Wpf BitmapSource to byte[] in C#

> ID：11084506
> 
> 赞同：3
> 
> 时间：2012-06-18T14:01:33.037
> 
> 标签：c#, wpf

> **Possible Duplicate:**
> [WPF Image to byte[]](https://stackoverflow.com/questions/553611/wpf-image-to-byte)

[Relative to this](https://stackoverflow.com/questions/553611/wpf-image-to-byte) I have a BitmapSource image obtained by capturing image from webcam.How can i convert it to byte[] in C#

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T14:37:38.123

我得到了解决方案

```
 JpegBitmapEncoder encoder = new JpegBitmapEncoder();
        //encoder.Frames.Add(BitmapFrame.Create(bitmapSource));
        encoder.QualityLevel = 100;          
       // byte[] bit = new byte[0];
        using (MemoryStream stream = new MemoryStream())
        {               
            encoder.Frames.Add(BitmapFrame.Create(bitmapSource));
            encoder.Save(stream);
            byte[] bit = stream.ToArray(); 
            stream.Close();               
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:20:19.370

您可以使用[BitmapSource.CopyPixels](http://msdn.microsoft.com/en-us/library/ms616043.aspx)方法将原始数据复制到字节数组中。stride 参数是每个图像行中的字节数。一个 100 像素宽的 RGBA 图像的步长为 100*4=400 字节。

检查此[SO 讨论](https://stackoverflow.com/questions/3881857/bitmapsource-copypixels-whats-a-good-value-for-stride)以了解 stride 参数及其对不同图像类型的行为方式

# wordpress - How do I set WordPress plugins to do cron jobs?

> ID：11084507
> 
> 赞同：0
> 
> 时间：2012-06-18T14:01:38.963
> 
> 标签：wordpress, plugins, cron, rss, atom-feed

We are looking for an autoblogging WordPress plugin for Atom/Rss feeds (must support Atom). The problem is, I tried 4 autoblogging plugins, but none of them run its cron jobs on time. I want the plugin to update every hour, or at least 4 times a day. I tried but I don't understand how WordPress does cron jobs. I set the plugins to update every 60 minutes, but none of them does. When the time has passed, they just write that the time has passed but they don't update the feeds.

Here are the names of the plugins I tried:

1.  AutoBlogged Version 2.9.1
2.  FeedWordPress Version 2011.1019
3.  WPeMatico Version 0.91.1Beta
4.  CyberSyn Version 2.11

Do you know other plugin for autoblogging from Atom feeds or do you know how to fix this problem?

Thanks! Uri.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:07:44.723

wordpress cron 作业仅在用户访问该网站时被触发（调用），因此如果您的网站没有大量流量，那么 cron 将不会按时触发，您最好创建一个调用每个你想触发的功能，

然后使用您的主机控制面板，检查您是否可以访问 cron 作业，

然后只需创建一个 cron 作业设置时间间隔并将其指向您当时希望调用的 php 页面，

然后当 cron 作业运行时，它会找到 php 文件并运行它，

但这又取决于您的托管选项，如果您使用，请看这里：

**面板：** [http ://www.upstartblogger.com/how-to-create-a-cron-job-in-cpanel](http://www.upstartblogger.com/how-to-create-a-cron-job-in-cpanel)

**Plesk： http:** [//myhosting.com/kb/How_to_Set_Up_Cron_Jobs_in_Plesk_9.5](http://myhosting.com/kb/How_to_Set_Up_Cron_Jobs_in_Plesk_9.5)

**GoDaddy： http:** [//support.godaddy.com/help/article/3547/creating-a-basic-cron-job](http://support.godaddy.com/help/article/3547/creating-a-basic-cron-job)

马蒂

# git - 无法推送到 github：一切都是最新的

> ID：11084515
> 
> 赞同：21
> 
> 时间：2012-06-18T14:01:47.667
> 
> 标签：git, github, git-push

在 github 上，我 fork 了另一个项目的旧版本。我做了一些更改，并试图将它们推送到我在 github 上的 fork 上。我在本地提交了更改，然后尝试了 git push，但这只是告诉我“一切都是最新的”。然而，当我在 github 上浏览该项目时，什么都没有改变：它仍然在我的 fork 上显示文件（来自最新版本），未经修改。如何将更改推送到我的 github 帐户？

（我意识到这不是很多信息......我还能说什么？我感觉可能是因为我直接在（home）/git/（project）中修改文件......？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T14:55:56.833

> git branch -v 表示我的提交已打开（无分支）。至于添加，我最初通过 Eclipse（使用 git 插件）提交了更改......当我从命令行执行 git add 时，它似乎没有做任何事情

这意味着您处于[DETACHED HEAD](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)模式。
您可以添加和提交，但从上游存储库的角度来看（即从 GitHub 存储库），没有准备好推送的新提交。
您有多种方法可以将本地（分离`HEAD`的）提交包含回分支中，然后您就可以推送该分支。
看：

*   “[当前不在任何分支上 + `git commit`+ 不在任何分支上时结帐。我是否丢失了我的更改？](https://stackoverflow.com/questions/6048425/not-currently-on-any-branch-git-commit-checkout-when-not-in-any-branch-did) ”
*   “[超然`HEAD`解释](http://gitolite.com/detached-head.html)”。
*   “ [Git：我怎样才能`HEAD`与 master/origin 协调分离？](https://stackoverflow.com/questions/5772192/git-how-can-i-reconcile-detached-head-with-master-origin) ”
*   “ [Git 课程：注意一个超然的头脑](http://eclipsesource.com/blogs/2011/05/29/life-lesson-be-mindful-of-a-detached-head/)”
*   “[本周 Git 提示：分离的头脑](http://alblue.bandlem.com/2011/08/git-tip-of-week-detached-heads.html)”

OP提到这篇文章是为了解决这种情况：
“ [git：如果你不提交任何分支该怎么办](https://edspencer.net/2009/10/28/git-what-to-do-if-you-commit-to-no-branch/)”

> 我们需要做的就是检查我们应该在的分支并合并到该提交 SHA 中：

请注意，您可以使用脚本记住它，而不是合并您将以某种方式复制的 SHA1，使用`head=$(git rev-parse HEAD)`：
请参阅“ [git：可靠地切换到分离的 HEAD，然后稍后恢复 HEAD，全部来自脚本](https://stackoverflow.com/a/3467576/6309)”。
然后你可以将分离的分支合并`HEAD`回正确的分支。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T14:09:04.950

更改文件后，您需要

```
git add 
```

他们之前

```
git commit 
```

.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-24T04:26:14.643

```
git commit 
```

将向您显示本地计算机上的文件，取消注释您要上传的内容并

```
git push origin master 
```

因为`git add *`对我不起作用（即使它没有返回错误）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-07T14:38:28.013

不知道为什么人们对正确答案的人投反对票。对我来说，添加我的电子邮件和姓名确实解决了这个问题。虽然命令不正确。

```
git config --global user.email "you@example.com"
git config --global user.name "Your Name" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-20T12:51:21.017

检查`git commit -m`命令

就我而言，我只是忘记`-`在 m 之前添加

当您这样做时，终端会输出如下错误
`error: pathspec 'm' did not match any file(s) known to git`
`error: pathspec 'TESTING' did not match any file(s) known to git`

但是，当您尝试时，`git push`您不会收到任何错误，但输出将是

`Everything up-to-date`

顺序应该是：
`git status`

`git add .` *那就是如果您想添加要提交的全部更改*

`git commit -m "Your Comments"`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-04-02T18:30:27.783

在最近的 git 版本中必须配置用户详细信息 git config -g user.name "name"

```
git config -g user.email "ab@mil.com" 
```

这解决了我的问题

# delphi - 所需软件包：rtl160.bpl

> ID：11084525
> 
> 赞同：1
> 
> 时间：2012-06-18T14:02:28.177
> 
> 标签：delphi, delphi-xe2, packages

我目前正在使用delphi xe2。以及它的firemonkey部分。我曾经能够编译和测试我的项目。我在win xp上试用了测试版，它需要rtl160.bpl包，所以我添加了它。现在即使在我的机器上也无法编译。我不断收到错误说

> [DCC 致命错误] E2202 未找到所需的包 'rtl160'

...即使在我将其从包装中删除之后，任何人都可以帮我解决这个问题吗？

后编辑。一旦我取消选中“与运行时包的链接”，它似乎可以在我的机器上编译，但仍然不能在 win xp 上运行 ![设置截图](../Images/d43805926ee1ab9a4b0b59751e59ada4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:46:30.990

请检查您的环境变量。平台应该是 AnyCPU

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:42:03.163

好的很酷，所以我解决了问题，这实际上是我的一个错误，如果 delphi 似乎找不到包，请确保运行时包没有链接到已编译的包

您可以通过按 ctrl + shift + F11 在 delphi 中检查应用程序的设置

# wordpress - 两个 Wordpress 安装——一个默认为另一个失败的页面

> ID：11084527
> 
> 赞同：0
> 
> 时间：2012-06-18T14:02:36.690
> 
> 标签：wordpress

我在 goDaddy 有托管空间，在几个域之间共享。最初我在子文件夹中安装了一个 wordpress。现在我也在根目录中安装了 wordpress。如果您转到主页，首先安装在子文件夹中的 wordpress 可以工作，但是如果您尝试转到其他页面或查看存档帖子，它会查找安装在根目录中的 wordpress 博客上的页面或帖子. 我该如何解决这个问题？

# objective-c - 如何在 iOS 中实现这种风格？

> ID：11084531
> 
> 赞同：2
> 
> 时间：2012-06-18T14:02:55.120
> 
> 标签：objective-c, uitableview, ios5, xcode4.3

在我的应用程序中，我想在 UITableViewController 屏幕中显示一个弹出屏幕，其中列出了一些供用户选择的选项。

类似于 Facebook 应用程序的工作方式（不幸的是我没有请求）:(

![Facebook好友请求表](../Images/0bfdb28a948603a48c4d288137641f0e.png)

所以我有两个问题：

1）我们在这里看到的黑色阴影框似乎是我经常看到的一种常见样式，尤其是在 iPad 应用程序中。应用程序使用相同的样式只是巧合吗？它是其他人正在使用的第 3 方插件吗？还是它是 iOS SDK 的一个新的、原生的部分？

2）如果我要自己构建这个子视图，什么样的结构最好？我想过：

```
UIImageView (for the background) > 
    UILabel (containing the header)
    UITableView (containing my sub-table) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:05:29.510

它是`UIPopoverController`iPad 的原生组件，但不适用于 iPhone。对于 iPhone，请使用第 3 方框架，例如： [http ://www.50pixels.com/blog/labs/open-library-fppopover-ipad-like-popovers-for-iphone/](http://www.50pixels.com/blog/labs/open-library-fppopover-ipad-like-popovers-for-iphone/)

# javascript - 成功从 if 块调用函数

> ID：11084534
> 
> 赞同：0
> 
> 时间：2012-06-18T14:03:06.027
> 
> 标签：javascript, jquery, ajax, callback

各位程序员好。我是 jquery ajax 的新手。我如何从 if 块中调用函数 checkreturn() 或者是否可以在成功之外访问 msg 如果是，请告诉我如何。我需要它，因为只有当条件证明为真时，我才必须启用后续文本框。这是我的代码。提前感谢您的时间和回复。Rajesh。

```
<script type="text/javascript" >    

        function checkreturn()        {   

            document.getElementById("txtAns").removeAtrribute("disabled");                     
        }
        function cQtn(e){             
        var uname= $("#<%=Username.ClientID%>").val();
        var sq=$("#<%=SecQuest.ClientID%>");
        var sqtn = $("#<%=SecQuest.ClientID%> option:selected").text();
        var sans=$("#txtAns");      
        var msgbox = $("#Dstatus");
          $.ajax({
                    type: "POST",                    
                    url: "forgotpassword.aspx/CheckValidSQtn",
                    data: "{'uname':'"+uname+"','args':'"+sqtn+"'}", 
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(msg) {                                                                                                             
                         if (msg.d == 'Available') {                            
                            sq.removeClass("notavailablecss");
                            sq.addClass("availablecss");
                            msgbox.html('<img src="proj_mages/a.png"> <font color="Green"> Valid </font>');
                            //how do i call from here??                                                                                                              
                           }
                        else {                            
                            sq.removeClass("availablecss");
                            sq.addClass("notavailablecss");
                            msgbox.html(msg.d);                           
                        }                        
                    }                                                 
                });                                     
      }     

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:26:16.867

您的`checkreturn`函数中有错字。您想使用`removeAttribute`, 而不是`removeAtrribute`(double `t`,not double `r`)。

此外，您可以使用`jQuery`以下功能：

```
function checkreturn(){   
    $('#txtAns').prop('disabled',false);                
} 
```

, 而不是本机`DOM`函数 ( `document.getElementById`, `setAttribute`)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:17:52.887

不知道为什么正常方式不起作用，但您可以尝试强制浏览器应该做什么，

```
function checkreturn(){   
     document.getElementById("txtAns").removeAtrribute("disabled");                     
} 
```

变成

```
window.checkreturn = function(){   
     document.getElementById("txtAns").removeAtrribute("disabled");                     
} 
```

然后尝试通过调用，`window.checkreturn();`或者`checkreturn();`您也可以尝试以另一种方式调用，这样您就可以离开您的函数并尝试调用`window.checkreturn();`

如果这些都不起作用，则表示您的函数未进入页面的窗口（全局）范围，请使用 Firebug 或 Inspector 并尝试`checkreturn();`查看您返回的异常，

如果你得到一个 not found 你没有在你的代码中向我们展示一些东西可能是一个闭包或一些东西

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-18T14:20:39.623

我会进一步研究它，但尝试`async`设置`ajax`调用`false`：

```
function checkreturn() {

    document.getElementById("txtAns").removeAtrribute("disabled");

}

function cQtn(e) {

    var uname= $("#<%=Username.ClientID%>").val(),
        sq=$("#<%=SecQuest.ClientID%>"),
        sqtn = $("#<%=SecQuest.ClientID%> option:selected").text(),
        sans=$("#txtAns"),
        msgbox = $("#Dstatus");

    $.ajax( {
        async: false,
        type: "POST",
        url: "forgotpassword.aspx/CheckValidSQtn",
        data: "{'uname':'"+uname+"','args':'"+sqtn+"'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(msg) {
            if (msg.d == 'Available') {
                sq.removeClass("notavailablecss");
                sq.addClass("availablecss");
                msgbox.html('<img src="proj_mages/a.png"> <font color="Green"> Valid </font>');
                //how do i call from here??
            } else {
                sq.removeClass("availablecss");
                sq.addClass("notavailablecss");
                msgbox.html(msg.d);
            }
        }
    } );

} 
```

现在，当进行`ajax`调用时，脚本的其余部分将等待它完成，而不是在`async`is时一切继续`true`。

# php - Apache2 重写模块，标志 [L]

> ID：11084537
> 
> 赞同：0
> 
> 时间：2012-06-18T14:03:16.123
> 
> 标签：php, apache, mod-rewrite, apache2

我有下一个重写规则：

```
RewriteEngine ON

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z]+)/(js|css|img)/(.+\.jpg|gif|png|js|css)$ media/myfiles/$1/$2/$3 [L]
RewriteRule .* index.php 
```

我的应用程序有路由类，可以根据我的需要处理 url。

当我尝试打开包含将匹配重写规则的扩展名的文件时，我移至下一个重写规则，并且我的路由器类处理此 url ...

任何想法为什么 apache 在第一次规则匹配后不停止？

PS 第一条规则在禁用第二条规则后起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:11:53.130

看看这里：[http ://httpd.apache.org/docs/2.2/rewrite/flags.html](http://httpd.apache.org/docs/2.2/rewrite/flags.html)

> 如果您在 .htaccess 文件或部分中使用 RewriteRule，那么了解规则的处理方式非常重要。**其简化形式是，一旦处理了规则，重写的请求就会被交回 URL 解析引擎来做它可能做的事情。**处理重写的请求时，可能会再次遇到 .htaccess 文件或部分，因此可能会从头开始再次运行规则集。最常见的情况是，如果其中一个规则导致重定向（内部或外部）导致请求过程重新开始。

（我的）

所以我认为发生的是你的最后一条规则命中并重定向。它不叫底线。但是，该请求像任何其他请求一样被处理，您的正则表达式没有命中，并且在这个运行中，底线确实发挥了作用。

这也是当你禁用底部规则时它起作用的原因：第二次周围没有什么可做的，所以什么也没有发生。

# string - 树的 LCS 算法

> ID：11084539
> 
> 赞同：1
> 
> 时间：2012-06-18T14:03:22.343
> 
> 标签：string, algorithm

两棵有根、有序、有标签的树的 LCS 是最大森林的大小

通过删除节点从两棵树中获得。删除节点 v 意味着删除 v 和所有边

v 的事件。 v 的孩子成为

v 的父级的子级（如果存在）而不是 v

我需要一个算法来计算两个相等大小的树的 LCS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:27:43.690

[http://www.cs.bgu.ac.il/~dekelts/publications/treelcs.pdf](http://www.cs.bgu.ac.il/~dekelts/publications/treelcs.pdf)

# java - Java 2D 整数矩阵的最佳结构？

> ID：11084540
> 
> 赞同：8
> 
> 时间：2012-06-18T14:03:25.827
> 
> 标签：java, arraylist, integer

在 Java 中存储二维整数矩阵的最佳方法是什么？

该矩阵将从可能具有不同维度的数据文件中填充，因此初始化某些大小的 int M[][] = new int[n][m] 不起作用，因为我们不知道矩阵的大小和我们将只迭代文件的行并从每行中提取整数（由内部空格分隔）。所以我想使用 ArrayList 的 ArrayList 来动态添加整数作为对象，但我不太确定如何做到这一点。

就性能而言，选择存储此类矩阵的最佳结构也很重要，因为我将迭代此矩阵并进行一些计算。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T14:07:11.753

从 开始`ArrayList<ArrayList<Integer>>`，然后在您完成读取文件后，将其转换为`int[][]`用于性能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T14:09:32.253

如您所料，在处理文件时最好使用`ArrayList`of 。`ArrayList`如果事后性能将成为问题，那么将其转回二维数组后记可能是谨慎的。

您可以像这样添加到二维`ArrayList`矩阵：

```
ArrayList<ArrayList<Integer>> matrix = new ArrayList<ArrayList<Integer>>();
matrix.add(new ArrayList<Integer>());
matrix.get(0).add(ROW0Col0Number);
matrix.get(0).add(ROW0Col1Number);
matrix.get(1).add(ROW1Col0Number); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-08T16:25:11.580

这是一个创建和打印 3x3 矩阵的简单示例类

```
import java.util.ArrayList;
import java.util.Arrays;

public class TestMatrix {

    public static void main(String[] args){

        ArrayList<ArrayList<Integer>> matrix = new ArrayList<ArrayList<Integer>>();

        System.out.println(matrix.toString());//print empty matrix
        ArrayList<Integer> row1 = new ArrayList<Integer>(Arrays.asList(1,2,3));
        ArrayList<Integer> row2 = new ArrayList<Integer>(Arrays.asList(4,5,6));
        ArrayList<Integer> row3 = new ArrayList<Integer>(Arrays.asList(7,8,9));
        matrix.add(row1);
        matrix.add(row2);
        matrix.add(row3);
        System.out.println(matrix.toString());
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T14:40:49.867

正如其他人所说，最好的选择是使用 a来读取文件，但我认为没有必要在完成阅读后将`List<List<Integer>>`其转换回 an 。`int[][]`内部`ArrayList`已经使用了数组（因此得名），编译器很可能会转换`list.get(i).get(j)`为 simple `arr[i][j]`，因此没有性能损失。如果您关心空间性能，您可以`trimToSize()`在构建列表后使用它来修剪列表。

另一方面，最好写`A[i][j]`然后`A.get(i).get(j)`，所以这取决于你。我将编写一些伪伪代码，因为我不知道您打算如何从文件中获取元素。

```
List<List<Integer>> mat = new ArrayList<List<Integer>>();
for line in file{
    row = new ArrayList<Integer>();
    mat.add(row);
    for element in line
        row.add(element);
    row.trimToSize();
}
mat.trimToSize()

//If you really want to convert, and is sure that all rows have the same size...
int[][] A = new int[mat.size()][];
int i=0;
for (List<Integer> row : mat){
    A[i++] = row.toArray(A[i]);
} 
```

# c# - 多线程

> ID：11084541
> 
> 赞同：1
> 
> 时间：2012-06-18T14:03:26.123
> 
> 标签：c#, .net, winforms, multithreading

我正在开发一个应用程序（在 C# 中）。这基本上是一个文件上传/下载应用程序（就像 filezila）。

但是有一个特殊功能（文件下载）：-

我们可以将文件分成不同的段（最多 100 个）。并且可以通过各种循环重复这个过程（意味着我们可以将一个文件分成不同的段，并且可以重复这个过程不止一次（通过循环），同时）。

我为此使用线程概念。在应用程序中，有一些进度条和标签显示上传/下载状态。

我的问题是：-

如果我为更多数字执行此过程（下载），例如：-

100 个周期和（周期可以超过 100 个）

100 段

意味着我们将一个文件分成 100 个部分（段），并且相同的过程将工作 100 次（周期）。

意味着 100 * 100 =10,000 个文件将通过同一进程同时下载。

但是我面临的问题是，如果我为这项任务采取大量数字，那么应该会打开更多线程。

如果有 100 个 TCP 端口/线程同时运行，应用程序将挂起。

我为此尝试了很多东西，但我还没有成功。就像 -

异步委托、线程池等

我在更新进度条和标签时遇到了一个主要问题（因为当前的功能正在使用异步委托）。

请建议我一些方法来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:13:23.030

因为所有这些线程都想将数据传递给 UI 线程以显示进度，所以 UI 线程正在成为您应用程序的瓶颈。

您可以添加一个计时器，该计时器不时导致 UI 线程检查作业的进度。

这样，UI 线程不是由大量线程驱动，而是由时间驱动。

如果您需要更多详细信息，请发布一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T06:25:19.553

你好 Erno 我正在发送一些代码以便更好地理解：-

这是下载功能：

```
Public Sub FileDownload()

    txtBytesToDownload.Text = totalBytesToDownload.ToString("N", nfi)  'set textbox with total file size

    del = New MyDelegate(AddressOf DownloadDataInRange)

    callback = New AsyncCallback(AddressOf CalcCallback)

    TotalBytesToDownloadForEachCycle = totalBytesToDownload
    downloadedBytes = 0
    dlStopWatch = Stopwatch.StartNew()

    Dim flag As Integer = 0

    Dim segment As Integer = nuSegment.Value          'total segments
    Dim cyl = cycleNumericUpDown.Value                'total cycles

    'ServicePointManager.DefaultConnectionLimit = segment

    If UtilityFunctions.CheckRangeSupported(dlUrlHttpTextBox.Text) Then

        Dim segmentSize As Integer = 0
        segmentSize = TotalBytesToDownloadForEachCycle / segment

        ' For cy As Integer = 0 To (cyl - 1)

        For ctr As Integer = 0 To (segment - 1)        'loop for total Segments

            GC.Collect()
            flag += 1

            Dim fileValues As New FileValues()

            If ctr = 0 Then
                fileValues.StartPoint = 0               'starting point of each segment (in bytes)
            Else
                fileValues.StartPoint = segmentSize * ctr + 1
            End If

            fileValues.EndPoint = fileValues.StartPoint + segmentSize   'end point of each segment (in bytes)

            If (ctr = (segment - 1)) Then
                fileValues.EndPoint += TotalBytesToDownloadForEachCycle Mod segment
            End If

            fileValues.URL = dlUrlHttpTextBox.Text                         'downloading file url
            Dim str As String = ctr.ToString() + "_" + flag.ToString()

            ' del.BeginInvoke(fileValues, callback, Nothing)

            newThread = New System.Threading.Thread(AddressOf DownloadBytes)      'Thread starts here
            newThread.Priority = ThreadPriority.Highest
            newThread.IsBackground = True
            newThread.Start(fileValues)

            'ThreadPool.QueueUserWorkItem(AddressOf DownloadBytes, fileValues)

            fileValues = Nothing

        Next

        ' ProgressBarTotal.Value += 1

        ' Next

    Else
        Dim fileValues As New FileValues()
        fileValues.StartPoint = 0
        fileValues.EndPoint = TotalBytesToDownloadForEachCycle
        fileValues.URL = dlUrlHttpTextBox.Text
        Dim newThread As New System.Threading.Thread(AddressOf DownloadBytes)
        newThread.Name = "Thread1"
        newThread.Start(fileValues)
        'ThreadPool.QueueUserWorkItem(AddressOf DownloadBytes, fileValues)
        fileValues = Nothing

    End If

    Console.WriteLine("Http Downloload End")
    Debug.Print("thread List 1 count =" + _threadsList1.Count.ToString() + ", thread list 2 count =" + _threadsList2.Count.ToString() + ", thread list 3 count =" + _threadsList3.Count.ToString())

    'MessageBox.Show("finished - flag=" + flag.ToString())

    'After all Cycles Complete 
    'startButton.Enabled = True
    'abortButton.Enabled = False
    'skipButton.Enabled = False
    'DataGridViewDLOrPing.Enabled = True
    'DataGridViewUL.Enabled = True

    'protocolComboBox.Enabled = True
    'modelComboBox.Enabled = True
    'testTypeComboBox.Enabled = True
    'measurementComboBox.Enabled = True
    'cycleNumericUpDown.Enabled = True
    'DelayNumericUpDown.Enabled = True
    'InputBoxPrivilege()

End Sub 
```

这是 Thread 将调用以读取字节的函数：

```
Public Sub DownloadBytes(ByVal p_fileValues As FileValues)

    Dim httpWebRequest As HttpWebRequest
    Dim httpWebResponse As HttpWebResponse
    Dim responseStream As Stream

    Dim threadName = threadID

    Try
        Console.WriteLine("Start " + Thread.CurrentThread.Name)
        httpWebRequest = DirectCast(WebRequest.Create(p_fileValues.URL), HttpWebRequest)
        'httpWebRequest.ProtocolVersion = HttpVersion.Version11
        httpWebRequest.KeepAlive = False
        httpWebRequest.AddRange(p_fileValues.StartPoint, p_fileValues.EndPoint)
        httpWebRequest.Credentials = CredentialCache.DefaultCredentials
        httpWebRequest.Proxy = WebRequest.DefaultWebProxy
        httpWebResponse = CType(httpWebRequest.GetResponse(), HttpWebResponse)
        responseStream = httpWebResponse.GetResponseStream()

        Dim bytesSize As Integer = 0
        ' A buffer for storing and writing the data retrieved from the server
        Dim downBuffer As Byte() = New Byte(2047) {}
        Dim bytesAlreadyDownloaded As Int64 = p_fileValues.StartPoint

        ' Loop through the buffer until the buffer is empty
        While (True)

            'end while loop if the Abort button is clicked
            If (isActionAborted = True) Then
                Exit While
            End If

            'currentCycle is > total Cycles ,then end while
            If (currentCycleDownload > cycleNumericUpDown.Value) Then
                Exit While
            End If

            bytesSize = responseStream.Read(downBuffer, 0, downBuffer.Length)

            bytesAlreadyDownloaded += bytesSize

            'speedtimer.Start()

            If (bytesSize <= 0) Then
                If (downloadedBytes < totalBytesToDownload) Then
                    Me.Invoke(New UploadProgressCallback(AddressOf Me.UpdateDownloadProgress), New Object() {(totalBytesToDownload - downloadedBytes), totalBytesToDownload})
                End If

                Exit While
            End If

            ' Invoke the method that updates the form's label and progress bar
            Me.Invoke(New DownloadProgressCallback(AddressOf Me.UpdateDownloadProgress), New Object() {bytesSize, TotalBytesToDownloadForEachCycle})

            If (bytesAlreadyDownloaded > p_fileValues.EndPoint) Then
                'Console.WriteLine("Downloading part files Exit " + p_fileValues.StartPoint.ToString() + "," + p_fileValues.EndPoint.ToString())
                Exit While
            End If

        End While

        responseStream.Flush()
        responseStream.Close()
        httpWebResponse.Close()
        responseStream.Dispose()
        responseStream = Nothing
        httpWebResponse = Nothing
        Console.WriteLine("End " + Thread.CurrentThread.Name)

        'ProgressDownload.Value = Convert.ToInt32((downloadedBytes * 100) / totalBytesToDownload)
        ' downloadedBytesTextBox.Text = downloadedBytes.ToString("N", nfi)

    Catch ex As Exception

        Console.WriteLine("Error " + Thread.CurrentThread.Name)
        Console.WriteLine(ex)

    Finally
        Console.WriteLine("Finally " + Thread.CurrentThread.Name)

        GC.Collect()

        ' GC.WaitForPendingFinalizers()
        'newThread.Abort()

        'Try
        'Thread.CurrentThread.Abort()

        'Catch ex1 As Exception

        'End Try
    End Try

    'Return 1

End Sub 
```

此功能将更新进度条和表单上的其他标签：

```
Private Sub UpdateDownloadProgress(ByVal BytesRead As Int64, ByVal TotalBytes As Int64)
    If Not swDL Is Nothing AndAlso swDL.IsRunning Then
        swDL.Stop()
        If swDL.ElapsedMilliseconds > 0 Then
            resultGrid.Rows.Item(HandoverGridCounter - 1).Cells(4).Value &= "DL: " & swDL.ElapsedMilliseconds & " ms"
        End If
        swDL = Nothing
    End If

    If (dlCurrentspeed > 0) Then
        'txtCurrentSpeedDL.Text = Math.Round((dlCurrentspeed / 1024), 0) & " KB/s"
    End If

    downloadedBytes += BytesRead
    If downloadedBytes >= totalBytesToDownload Then
        downloadedBytes = totalBytesToDownload
    End If

    ProgressDownload.Value = Convert.ToInt32((downloadedBytes * 100) / TotalBytes)
    downloadedBytesTextBox.Text = downloadedBytes.ToString("N", nfi)  ' & " bytes"

    If totalBytesToDownload = 0 Then
        totalBytesToDownload = TotalBytes
        txtBytesToDownload.Text = totalBytesToDownload.ToString("N", nfi)
    End If

    If downloadedBytes >= totalBytesToDownload Then
        dlCurrentspeed = 0
        dlStopWatch.Stop()

        testEndTickDownload = My.Computer.Clock.TickCount
        testDeltaDownload = (testEndTickDownload - testStartTickDownload) / 1000
        If DLtimedOut = True Then
            DownloadCompleted(TestStatus.Cancelled.ToString(), "")
        Else
            DownloadCompleted(TestStatus.Completed.ToString(), "")
        End If
        If currentCycleDownload <= cycleNumericUpDown.Value Then
            If protocolComboBox.Text = "HTTP" Then
                StartHttpDownload()
            Else
                StartFtpDownload()
            End If
        End If
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:00:35.333

要从工作线程（无论是显式创建、排队到线程池的工作项还是来自异步 API 的回调）异步更新 UI，请使用[`Control.BeginInvoke`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx).

这不会在等待 UI 线程处理操作时阻塞工作线程。

但请记住，UI 线程不能假定异步操作完成的特定顺序（以特定顺序开始的两个相同的下载不太可能按该顺序完成：太多的外部因素会影响下载速度）。

最后，大多数`BeginABC`方法*都需要*调用相应的`EndABC`，但（有帮助）`Control.BeginInvoke`不需要。

# eclipse - 有没有办法告诉 Eclipse 如何解决模棱两可的 java 名称？

> ID：11084545
> 
> 赞同：3
> 
> 时间：2012-06-18T14:03:53.567
> 
> 标签：eclipse

我的 Eclipse 配置为，当我保存 java 源文件时，它会自动插入缺少的导入声明。除非引用不明确。Fpr 实例，最烦人的歧义是 with `List<T>`- both`java.util`和`java.awt`声明它。这里日食需要手动解决。

我想知道是否可以在某个地方配置每当`List<T>`使用时都`java.util`应该导入。或者，由于我没有使用`java.awt`，我可以将其从可能的建议列表中删除。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:50:52.350

[这听起来像是从 Eclipse 的组织导入中排除包](https://stackoverflow.com/questions/10019698/exclude-packages-from-eclipses-organize-imports)的可能副本。基本上，您想更改您的**类型过滤器**首选项以排除`java.awt.*`包。请记住，如果您尝试编写 AWT/Swing 代码，这样做会使事情变得更难/令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:25:50.357

我想到的一件事是更改首选项中的类模板以包含以下行：

```
import java.util.List 
```

除非您打算使用 AWT 版本的 List，或者关心未使用的 import 语句，否则应该可以解决这个烦人的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:55:46.083

手动调用 Organize Imports，它会在发现歧义时询问您。

# java - 异步 HTTP 发布 gps 坐标

> ID：11084549
> 
> 赞同：0
> 
> 时间：2012-06-18T14:04:07.823
> 
> 标签：java, android

每当手机上的 gps 位置更新时，我想将 gps 坐标发送到 Web 服务。

我应该创建一个扩展类，将数据从事件`AsyncTask`发送到 Web 服务吗？`onLocationChanged`或者你们有什么建议吗？

我昨天开始编写应用程序，所以请告诉我我是否走在正确的轨道上。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:24:25.447

我推荐[IntentService](http://developer.android.com/reference/android/app/IntentService.html)机制。

这有很多用途，并且经常被许多 Android 开发人员所忽视。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:11:23.350

是的，我认为这将是正确的方法。扩展`AsyncTask`并添加`doInBackground()`到`POST/PUT`您的 Web 服务器。

另一种方法可能是使用 a `SocketConnection`，但这仍然必须在后台线程中操作，并且可能会增加开销、线程`Socket`断开等。

只要确保`unregister`您`BroadcastReceiver`进入`onPause`并处理您`AsyncTasks`的取消，当一个新的将被执行，或者`Activity`停止......等等，这取决于您的应用程序需要。

如果您还想在您的应用程序处于后台时发送位置，您应该考虑实现一个[`Service`](http://developer.android.com/reference/android/app/Service.html).

# java - 未正确配置 Persistence.xml

> ID：11084551
> 
> 赞同：20
> 
> 时间：2012-06-18T14:04:13.190
> 
> 标签：java, jdbc, persistence, ejb, jta

我无法正确获取此持久性文件...我在用作指南的书中找不到更多信息。我正在使用 MySQL 数据库。

```
<?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
      <persistence-unit name="a11_DA_g5_PU" transaction-type="JTA">
        <jta-data-source>a11_DA_g5</jta-data-source>
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>entities.Book</class>
        <class>entities.Author</class>
        <class>entities.Customer</class>
        <class>entities.Membership</class>
        <properties>
          <property name="eclipselink.target-database" value="DERBY"/>
          <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
          <property name="javax.persistence.jdbc.url" value="jdbc:mysql://studev.groept.be:3306/a11_DA_g5"/>
          <property name="javax.persistence.jdbc.user" value="a11_DA_g5"/>
          <property name="javax.persistence.jdbc.password" value="passwordhere"/>
          <property name="eclipselink.ddl-generation" value="create-tables"/>
        </properties>
      </persistence-unit>
    </persistence> 
```

**编辑**

严重：DPL8015：存档 [EJBModule_jar] 中部署描述符文件 META-INF/persistence.xml 中的部署描述符无效。第 6 行第 15 列 -- cvc-complex-type.2.4.a：发现以元素“提供者”开头的无效内容。'{"http://java.sun.com/xml/ns/persistence":shared-cache-mode, "http://java.sun.com/xml/ns/persistence":validation-mode 之一， “http://java.sun.com/xml/ns/persistence”:properties}' 是预期的。

严重：DPL8005：部署描述符解析失败：cvc-complex-type.2.4.a：发现以元素“提供者”开头的无效内容。'{"http://java.sun.com/xml/ns/persistence":shared-cache-mode, "http://java.sun.com/xml/ns/persistence":validation-mode 之一， “http://java.sun.com/xml/ns/persistence”:properties}' 是预期的。

严重：部署应用程序时出现异常 [VaadinTestApp]

严重：org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“提供者”开头的无效内容。'{"http://java.sun.com/xml/ns/persistence":shared-cache-mode, "http://java.sun.com/xml/ns/persistence":validation-mode 之一， “http://java.sun.com/xml/ns/persistence”:properties}' 是预期的。java.io.IOException：org.xml.sax.SAXParseException：cvc-complex-type.2.4.a：发现以元素“提供者”开头的无效内容。'{"http://java.sun.com/xml/ns/persistence":shared-cache-mode, "http://java.sun.com/xml/ns/persistence":validation-mode 之一， “http://java.sun.com/xml/ns/persistence”:properties}' 是预期的。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-18T14:28:21.853

内部元素的顺序`<persistence-unit>`很重要，`<jta-data-source>`应该遵循`<provider>`：

```
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider> 
<jta-data-source>a11_DA_g5</jta-data-source> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-18T14:30:25.567

正如[XSD](http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd)所说，`<provider>`元素必须在`<jta-data-source>`元素之前。

# javascript - asp 控件触发 javascript 但我的函数未定义

> ID：11084552
> 
> 赞同：0
> 
> 时间：2012-06-18T14:04:14.543
> 
> 标签：javascript, function, undefined

我正在测试我的 ASP 代码，并让处理程序正确触发，但是在执行我的 javascript 函数时，它给出了一个未定义的错误。

使用 ASP 时，是否会出现 Javascript 未定义的回发或类似边缘状态的情况？

为了测试，我的测试是这样的：

```
<asp:textbox runat="server" onchange="alert('this is a test'); numsOnly();"></asp:textbox> 
```

这可能是语法问题吗？我应该说 onchange="return numsOnly();" 反而？警报显示它确实触发了，但函数 numsOnly(); 在页面头部定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:32:52.323

我注意到我有以下代码行：

```
if (x[11] == "top" && x[12] == "left") { $("#toggle_1").attr("checked", "true"); }
        else if (x[12] == "top" && x[11] == "middle") { $("#toggle_2").attr("checked", "true"); }
        else if (x[12] == "top" && x[11] == "right") { $("#toggle_3").attr("checked", "true"); }
        else if (x[12] == "middle" && x[11] == "left") { $("#toggle_4").attr("checked", "true"); }
        else if (x[12] == "middle" && x[11] == "middle") { $("#toggle_5").attr("checked", "true"); }
        else if (x[12] == "middle" && x[11] == "right") { $("#toggle_6").attr("checked", "true"); }
        else if (x[12] == "bottom" && x[11] == "left") { $("#toggle_7").attr("checked", "true"); }
        else if (x[12] == "bottom" && x[11] == "middle") { $("#toggle_8").attr("checked", "true"); }
        else if (x[12] == "bottom" && x[11] == "right") { $("#toggle_9").attr("checked", "true"); }
        else alert("None of the alignments were matched"); 
```

我还注意到警报声明已被注释掉，因为我现在不需要一直知道该信息。它看起来像：

```
else if (x[12] == "bottom" && x[11] == "right") { $("#toggle_9").attr("checked", "true"); }
else //alert("None of the alignments were matched"); 
```

它未能通过 javascript 测试，因为它正在寻找执行不存在的东西，并将右括号作为代码的一部分读取，并且出现错误。

通过添加以下 2 个字符 { 和 } 可以轻松解决此问题。

```
else if (x[12] == "bottom" && x[11] == "right") { $("#toggle_9").attr("checked", "true"); }
    else { alert("None of the alignments were matched"); } 
```

问题解决了。抱歉这个问题。Will +1 帮助我指出方向的人，因为最终我正在寻找一些东西，并注意到一个智能感知错误，这证实了他们所说的话。

# javascript - 将 html 表导出到 Excel javascript 函数特殊字符已更改

> ID：11084564
> 
> 赞同：7
> 
> 时间：2012-06-18T14:04:46.310
> 
> 标签：javascript, excel, encoding, export, special-characters

我有以下将 html 导出到 excel 的函数：

```
function generateexcel(tableid) {
  var table= document.getElementById(tableid);
  var html = table.outerHTML;
  window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html));
} 
```

一个问题是数据中的特殊字符被转换为其他符号：

*   1º = 1º
*   é = é

你会如何解决这个问题？是否有任何字符替换到 html 以防止它？任何编码选项？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T15:41:11.943

替换字符是一个糟糕的解决方案。

我将 encodeURIComponent 替换为转义并且工作正常，但自 ECMAScript v3 以来已弃用转义。

出现此问题的原因是 encodeURIComponent 适用于 UTF-8 而 Excel 不适用。

对我来说更好的方式。

将数据编码为base64并像这样导出。[我使用了来自https://github.com/carlo/jquery-base64/blob/master/jquery.base64.min.js](https://github.com/carlo/jquery-base64/blob/master/jquery.base64.min.js)的 jquery-base64 插件

并将代码更改为：

```
window.open('data:application/vnd.ms-excel;base64,' + $.base64.encode(html)); 
```

如果不想使用 jquery，可以使用这个 base64_encode 函数 [http://phpjs.org/functions/base64_encode](http://phpjs.org/functions/base64_encode)

“Base64 编码/解码已经是现代 (tm) 浏览器中的本机功能：btoa(str) 和 atob(str) 是无需任何外部重新实现即可使用的功能。” - 芯片

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T15:16:26.960

解决了为有问题的符号添加替换：

```
function generateexcel(tableid) {
  var table= document.getElementById(tableid);
  var html = table.outerHTML;

  //add more symbols if needed...
  while (html.indexOf('á') != -1) html = html.replace('á', '&aacute;');
  while (html.indexOf('é') != -1) html = html.replace('é', '&eacute;');
  while (html.indexOf('í') != -1) html = html.replace('í', '&iacute;');
  while (html.indexOf('ó') != -1) html = html.replace('ó', '&oacute;');
  while (html.indexOf('ú') != -1) html = html.replace('ú', '&uacute;');
  while (html.indexOf('º') != -1) html = html.replace('º', '&ordm;');

  window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T16:44:00.713

我有同样的问题，只需将 encodeURIComponent 替换为转义即可。

```
function generateexcel(tableid) {
 var table= document.getElementById(tableid);
 var html = table.outerHTML;
 window.open('data:application/vnd.ms-excel,' + escape(html));
} 
```

这个对我有用...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-21T12:33:52.673

只需替换`encodeURIComponent`为`escape`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-27T21:57:31.237

在我的情况下，我使用之前发布的 generateexcel 函数，只需添加特殊字符的大写字母以使其工作

```
 function generateexcel(tableid) {
      var table= document.getElementById(tableid);
      var html = table.outerHTML;
      while (html.indexOf('á') != -1) html = html.replace('á', '&aacute;');
      while (html.indexOf('Á') != -1) html = html.replace('Á', '&Aacute;');
      while (html.indexOf('é') != -1) html = html.replace('é', '&eacute;');
      while (html.indexOf('É') != -1) html = html.replace('É', '&Eacute;');
      while (html.indexOf('í') != -1) html = html.replace('í', '&iacute;');
      while (html.indexOf('Í') != -1) html = html.replace('Í', '&Iacute;');
      while (html.indexOf('ó') != -1) html = html.replace('ó', '&oacute;');
      while (html.indexOf('Ó') != -1) html = html.replace('Ó', '&Oacute;');
      while (html.indexOf('ú') != -1) html = html.replace('ú', '&uacute;');
      while (html.indexOf('Ú') != -1) html = html.replace('Ú', '&Uacute;');
      while (html.indexOf('º') != -1) html = html.replace('º', '&ordm;');
      while (html.indexOf('ñ') != -1) html = html.replace('ñ', '&ntilde;'); 
      while (html.indexOf('Ñ') != -1) html = html.replace('Ñ', '&Ntilde;');  

  window.open('data:application/vnd.ms-excel,' + encodeURIComponent(html));
} 
```

希望能帮助到你...

# matlab - 如何在 MatLab 中创建选项卡式 GUI？

> ID：11084565
> 
> 赞同：7
> 
> 时间：2012-06-18T14:04:54.407
> 
> 标签：matlab, user-interface, tabs

我想创建一个选项卡式 GUI，其中第一个选项卡用于读取输入，然后输入显示在 GUI 上。用户应该能够从 GUI 中选择数据，然后作为算法的输入。用户也可以在另一个选项卡中选择算法的参数。在第三个选项卡中，用户可以看到结果图。

如何以编程方式或使用 GUIDE 在 MatLab 中创建选项卡式 GUI？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T18:34:01.583

这是一个使用半文档化函数 UITAB 创建选项卡的简单示例：

```
function tabbedGUI()
    %# create tabbed GUI
    hFig = figure('Menubar','none');
    s = warning('off', 'MATLAB:uitabgroup:OldVersion');
    hTabGroup = uitabgroup('Parent',hFig);
    warning(s);
    hTabs(1) = uitab('Parent',hTabGroup, 'Title','Data');
    hTabs(2) = uitab('Parent',hTabGroup, 'Title','Params');
    hTabs(3) = uitab('Parent',hTabGroup, 'Title','Plot');
    set(hTabGroup, 'SelectedTab',hTabs(1));

    %# populate tabs with UI components
    uicontrol('Style','pushbutton', 'String','Load data...', ...
        'Parent',hTabs(1), 'Callback',@loadButtonCallback);
    uicontrol('Style','popupmenu', 'String','r|g|b', ...
        'Parent',hTabs(2), 'Callback',@popupCallback);
    hAx = axes('Parent',hTabs(3));
    hLine = plot(NaN, NaN, 'Parent',hAx, 'Color','r');

    %# button callback
    function loadButtonCallback(src,evt)
        %# load data
        [fName,pName] = uigetfile('*.mat', 'Load data');
        if pName == 0, return; end
        data = load(fullfile(pName,fName), '-mat', 'X');

        %# plot
        set(hLine, 'XData',data.X(:,1), 'YData',data.X(:,2));

        %# swithc to plot tab
        set(hTabGroup, 'SelectedTab',hTabs(3));
        drawnow
    end

    %# drop-down menu callback
    function popupCallback(src,evt)
        %# update plot color
        val = get(src,'Value');
        clr = {'r' 'g' 'b'};
        set(hLine, 'Color',clr{val})

        %# swithc to plot tab
        set(hTabGroup, 'SelectedTab',hTabs(3));
        drawnow
    end
end 
```

![tab1](../Images/6fe6b7a13e2c18f5425b151dff94ee7f.png) ![tab2](../Images/f1af6c670f9c7d6894ea5a83dcd55377.png) ![tab3](../Images/b684281d1d33a30f2ce532fe3b7c86b5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-19T08:19:04.323

您还可以借助我编写的[Matlab File Exchange](http://www.mathworks.com/matlabcentral/fileexchange/54705-tabmanager-create-tab-panels--uitabgroup--from-a-guide-gui)提供的实用程序从 GUIDE 创建的 GUI 创建选项卡。

用法相当简单：

1.  Create a pane with tag set to Tab? where ? is any letter or number (e.g. TabA). This main pane should be left empty and determines the size and location of the tab group (uitabgroup).
2.  Create additional panes with a tag name that starts with the name of the main pane. All other controls should be added to these panes.
3.  In the Guide generated function xxx_OpeningFcn add the following:

    handles.tabManager = TabManager( hObject );

The location of the additional panes is not important but it is generally easier to edit the GUI if they are in the same location as the main pane. You can edit the panes even if they are overlaid by cycling through the panes with the "Send to back" command from the Guide pop up menu.

[![Tab Group Place holder](../Images/1a5f054e00170f70cf1fd118fb68a84f.png)](https://i.stack.imgur.com/KsiIn.png)[![Main Tab](../Images/0acd1d23b54ab2e9dbc8f521628185fa.png)](https://i.stack.imgur.com/HHwUJ.png) [![Supplementary Tab](../Images/56332baed9b5e07bebacc3b1a0e856ec.png)](https://i.stack.imgur.com/1beaz.png)[![Resulting GUI](../Images/3546fbc24fdd9afa932d2e3d57b21793.png)](https://i.stack.imgur.com/Enpdp.png)

# jquery - jQuery和设置按钮的状态

> ID：11084567
> 
> 赞同：0
> 
> 时间：2012-06-18T14:05:01.913
> 
> 标签：jquery

该页面包含 1 个复选框、3 个单选按钮和一个按钮。如果复选框或任何单选按钮的状态发生更改，则应启用它。页面加载时，默认情况下禁用该按钮。

下面的代码不适用于单选按钮，但适用于复选框。错误在哪里？

```
$(document).ready(function () {

    /*The initial values of checkBox and RadioButtons they have as the page was loaded*/
    var rbl = $('#rbgList').find('input:radio:checked');
    var rblInitialValue = rbl.val();

    var chk = $('#chkHideFromAddressBook');
    var chkInitialValue = chk.is(":checked");

    var btn = $('#btnSaveConfigSettings');

    var isChanged = function () {
        return ((rbl.val() != rblInitialValue) || (chk.is(":checked") != chkInitialValue));
    };

    /*Set button the state of SaveChanges to enables/disabled that depends on of the current state (check/unchecked) of checkBox and RadioButtons*/

    /*1*/
    $('#rbgList input:radio').click(function () {
        isChanged() ? btn.attr('disabled', '') : btn.attr('disabled', 'disabled');
    });

    /*2*/
    $("#chkHideFromAddressBook").click(function () {
        isChanged() ? btn.attr('disabled', '') : btn.attr('disabled', 'disabled');
    });

}) 
```

**但是这个效果很好**

```
$(document).ready(function () {

    /*The initial values of checkBox and RadioButtons they have as the page was loaded*/
    var rblInitialValue = $('#rbgList').find('input:radio:checked').val();
    var chkInitialValue = $('#chkHideFromAddressBook').is(":checked");

    $('#rbgList input:radio').click(function () {
        if (
                ($('#rbgList').find('input:radio:checked').val() != rblInitialValue) ||
                ($('#chkHideFromAddressBook').is(":checked") != chkInitialValue)
            ) {
            $('#btnSaveConfigSettings').attr('disabled', '');
        }
        else {
            $('#btnSaveConfigSettings').attr('disabled', 'disabled');
        }
    });

    $("#chkHideFromAddressBook").click(function () {
        if (
                ($('#rbgList').find('input:radio:checked').val() != rblInitialValue) ||
                ($('#chkHideFromAddressBook').is(":checked") != chkInitialValue)
            ) {
            $('#btnSaveConfigSettings').attr('disabled', '');
        }
        else {
            $('#btnSaveConfigSettings').attr('disabled', 'disabled');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:16:59.310

我知道你并没有要求一个完整的解决方案，但我在修复它时偏离了方向。反正就是这里。

### 小提琴

[http://jsfiddle.net/UHXf2/2/](http://jsfiddle.net/UHXf2/2/)

### JS

```
$(document).ready(function() {

    var originalindex = -1;
    var originalcheck = -1;
    var button;
    var check;

    function getindex() {
        return $('input[name=sex]:checked', '#myform').index();
    }

    function getcheck() {
        return check.is(':checked');
    }

    function validateform() {
        if (getindex() == originalindex && getcheck() == originalcheck) {
            button.attr('disabled', true);
        } else {
            button.removeAttr('disabled');
        }
    }

    button = $('input[name=submit]', '#myform');
    check = $('input[name=alien]', '#myform');

    originalindex = getindex();
    originalcheck = getcheck();

    $('input[name=sex]', '#myform').change(function() {
        validateform();
    });
    check.change(function() {
        validateform();
    });

});​ 
```

### HTML

```
<form id="myform">
 <input type="radio" name="sex" value="m" checked="true" /> Male<br />
 <input type="radio" name="sex" value="f" /> Female<br />
 <input type="radio" name="sex" value="o" /> Other<br />
 <input type="checkbox" name="alien" value="h" checked="false" /> Human<br/>
<input type="submit" name="submit" value="submit" disabled="true" />
</form>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:20:36.187

问题在于：

```
var rbl = $('#rbgList').find('input:radio:checked');
var rblInitialValue = rbl.val(); 
```

虽然该代码在语法方面很好，`rbl`但当您检查不同的单选按钮时不会更新，因此该测试：

```
(rbl.val() != rblInitialValue) 
```

将始终评估为`false`.

当值更改时，您需要获得对选中单选按钮的新引用，以便将当前选中的单选按钮的值与最初选中的单选按钮的值进行比较。对现有代码的最少修改是：

```
$('#rbgList input:radio').click(function () {
    rbl = $(this);
    isChanged() ? btn.attr('disabled', '') : btn.attr('disabled', 'disabled');
}); 
```

# knockout.js - KnockoutJS - Hiding div based on slider value

> ID：11084568
> 
> 赞同：0
> 
> 时间：2012-06-18T14:05:04.907
> 
> 标签：knockout.js

I'm trying to show/hide items within a collection using a jQueryUI slider.

The slider returns values 1 to 10 and I want to show the item if the item's "win" property is higher than the slider's value and vice versa.

I've got so far:

[http://jsfiddle.net/FloatLeft/uqv7D/](http://jsfiddle.net/FloatLeft/uqv7D/)

I was hoping that this code would set the item's visibility

```
ko.utils.arrayForEach(viewModel.euroTeams, function(team) {
    team.win = ko.observable(team.win);
    team.lose = ko.observable(team.lose);
    team.showTeam = team.win() > viewModel.wins();   
}); 
```

Template:

```
<div class="team" data-bind="visible: showTeam"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:13:48.927

You need to create a computed observable so that the value of showTeam will update as well.

Here is a reference on the subject: [http://knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)

I've updated your fiddle: [http://jsfiddle.net/uqv7D/17/](http://jsfiddle.net/uqv7D/17/)

As per freakish's suggestion, I am pasting the code below so there's no reliance on external sources:

```
ko.utils.arrayForEach(viewModel.euroTeams, function(team) {
    team.win = ko.observable(team.win);
    team.lose = ko.observable(team.lose);
    team.showTeam = ko.computed(function() {
        return team.win() > viewModel.wins();
    }, this);
}); 
```

# c# - 所有项目实体框架和模型生成的奇怪行为

> ID：11084574
> 
> 赞同：0
> 
> 时间：2012-06-18T14:05:24.653
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我有一些非常奇怪的行为。也许我错过了一些东西。在此错误发生之前我记得做的最后一件事是安装 VS 2012 RC1。尝试从我的项目中删除实体并添加旧版本。还从头开始尝试了一个全新的项目，但无济于事。现在的大问题是，当我只部署项目 dll 时，它会在生产中产生与在本地开发相同的错误。所以我很确定它与我的工作环境或我安装的东西无关。无论如何，这里是从实体生成的错误，我找不到任何解决方案。请您传递您的智慧，因为我需要对生产代码进行一些更改并且似乎无法解决下面的错误。

```
System.Data.Edm.EdmEntityType: : EntityType 'UrlHelper' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'RequestContext' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'HttpContextBase' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'Exception' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'Type' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'AssemblyName' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'CultureInfo' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'DateTimeFormatInfo' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'Calendar' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'IdentityReference' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'RouteData' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'RouteBase' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'ControllerContext' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'ControllerBase' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: Name: The specified name is not allowed: '__ConsoleStream'.
System.Data.Edm.EdmEntityType: : EntityType 'Encoding' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntityType: : EntityType 'TextWriter' has no key defined. Define the key for this EntityType.
System.Data.Edm.EdmEntitySet: : The referenced EntitySet �ActionResults� for End �ContentResult_ContentEncoding_Source� could not be found in the containing EntityContainer.
System.Data.Edm.EdmEntitySet: : The referenced EntitySet �ActionResults� for End �JsonResult_ContentEncoding_Source� could not be found in the containing EntityContainer.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �UrlHelpers� is based on type �UrlHelper� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �RequestContexts� is based on type �RequestContext� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �HttpContextBases� is based on type �HttpContextBase� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �Exceptions� is based on type �Exception� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �Types� is based on type �Type� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �AssemblyNames� is based on type �AssemblyName� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �CultureInfoes� is based on type �CultureInfo� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �DateTimeFormatInfoes� is based on type �DateTimeFormatInfo� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �Calendars� is based on type �Calendar� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �IdentityReferences� is based on type �IdentityReference� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �RouteDatas� is based on type �RouteData� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �RouteBases� is based on type �RouteBase� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �ControllerContexts� is based on type �ControllerContext� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �ControllerBases� is based on type �ControllerBase� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �Encodings� is based on type �Encoding� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �TextWriters� is based on type �TextWriter� that has no keys defined.
System.Data.Edm.EdmEntitySet: EntityType: EntitySet �ActionResults� is based on type �ActionResult� that has no keys defined. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:17:17.787

So stupid! I created a model inheriting from my controller. So Entity was trying to create a table based on my controller properties. Sometimes the most basic programming mistakes take you the longest to solve.

```
public class MyClass : Controller 
```

Instead of

```
public class MyClass 
```

# ruby-on-rails - 从 RoR 查询到 postgreSQL 比从提示符慢？

> ID：11084575
> 
> 赞同：1
> 
> 时间：2012-06-18T14:05:25.967
> 
> 标签：ruby-on-rails, postgresql, execution-time, pgrouting

我以这种方式从我的 ruby​​ on rails 应用程序中查询 postgreSQL DB：

```
var = Map.connection.execute("
SELECT * 
FROM shortest_path('SELECT * FROM japan WHERE japan.geom_way && ST_MakeEnvelope(139.68012, 35.63993, 139.71918, 35.66024)', 242945, 582735, false, false) 
JOIN japan ON edge_id = id;") 
```

rails 服务器控制台中显示的执行时间为**327.8 ms**。

我从 psql promtp 执行相同的查询：

```
SELECT * 
FROM shortest_path('SELECT * FROM japan WHERE japan.geom_way && ST_MakeEnvelope(139.68012, 35.63993, 139.71918, 35.66024)', 242945, 582735, false, false) 
JOIN japan ON edge_id = id; 
```

执行时间为**53.108 ms**。

我认为某些缓存可能是执行时间不同的原因，但是如果我尝试在 rails 应用程序中连续执行 2 次相同的查询，则 1 个查询的执行时间不会改变。例如：

```
var = Map.connection.execute("SELECT * FROM shortest_path('SELECT * FROM japan WHERE japan.geom_way && ST_MakeEnvelope(139.68012, 35.63993, 139.71918, 35.66024)', 242945, 582735, false, false) JOIN japan ON edge_id = id;") 
var = Map.connection.execute("SELECT * FROM shortest_path('SELECT * FROM japan WHERE japan.geom_way && ST_MakeEnvelope(139.68012, 35.63993, 139.71918, 35.66024)', 242945, 582735, false, false) JOIN japan ON edge_id = id;") 
```

给出**330.7 ms**和**327.8 ms**的执行时间。

由于这两个查询是相同的，我不应该期望 RoR 和提示中的执行时间相同吗？

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:36:21.447

看看[http://www.depesz.com/2008/05/10/prepared-statements-gotcha/](http://www.depesz.com/2008/05/10/prepared-statements-gotcha/) - 也许原因是相似的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:33:48.183

一种是使用 Ruby，一种不是。

此外，您还没有指出是否存在任何网络传输影响，以及是否存在网络差异，通过线路返回了多少行。

你还没有说你是如何安排这些事情的。如果时间包括Ruby情况下的客户端处理，那么在第二种情况下，处理显然更少，并且提示不包括传输时间或将结果处理到显示器的时间作为“执行时间”的一部分“它正在向您报告。

# javascript - 提供替代 Flash 内容

> ID：11084580
> 
> 赞同：0
> 
> 时间：2012-06-18T14:05:38.660
> 
> 标签：javascript, html, flash

我正在调整 Flash 页面以在 Flash 不可用时显示替代内容，但是，它使用的方法对于具有大量内容的完整替代页面并不理想。目前，替代内容的服务方式如下：

```
var hasRightVersion = DetectFlashVer(requiredMajorVersion, requiredMinorVersion, requiredRevision);
if(hasRightVersion) {  // if we've detected an acceptable version
    if (AC_FL_RunContent == 0) {
        alert("This page requires AC_RunActiveContent.js. In Flash, run \"Apply Active Content Update\" in the Commands menu to copy AC_RunActiveContent.js to the HTML output folder.");
    } else {
        // embed the flash movie
        AC_FL_RunContent(
                'codebase', 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0',
                'width', '1000',
                'height', '688',
                'src', 'wot',
                //etc, etc...
        ); //end AC code
    }
} else {  // flash is too old or we can't detect the plugin
    var alternateContent =
            '<p>&nbsp;</p>'
            + '<p>This website requires a newer version of the Adobe Flash Player.</p>'
            + '<p>&nbsp;</p>'
            + '<p>&nbsp;</p>'
            + '<p><a href="http://www.macromedia.com/go/getflash/">Get the Latest Flash Player here.</a></p>'
            + '<p><a href="http://www.macromedia.com/go/getflash/"><img src="images/get_flash_player.gif" alt="Download Flash Player" width="88" height="31" border="0" /></a></p>'
            + '<p>&nbsp;</p>'
            + '<p>&nbsp;</p>';
    document.write(alternateContent);  // insert non-flash content
} 
```

然而，我想要提供的新内容比“获取 Flash”消息要大得多。

有没有更好的方法来提供大量 HTML（和 javascript）？通过某种包含？我不确定我是否想做任何类型的重定向 - 还是我做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:09:43.780

最好的方法是使用 SWFObject，

如果安装了 Flash 播放器，则在里面有一个带有备用系统的 div，然后使用 SWFObject 在该 div 中加载 Flash 播放器

请看：如何使用 SWFObject 动态发布嵌入 Flash Player 内容在此页面上：[http ://code.google.com/p/swfobject/wiki/documentation](http://code.google.com/p/swfobject/wiki/documentation)

下：如何使用 HTML 来配置您的 Flash 内容？

```
flashvars devicefont (more info) 
allowscriptaccess (more info here and here)
seamlesstabbing (more info)
allowfullscreen (more info)
allownetworking (more info) 
```

您需要将它们输入到您的参数中，

```
var params = {allowscriptaccess:'always', allownetworking:'allways'} 
```

然后将婴儿车送入您的装载机生产线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:19:58.560

除了 HotHeadMartin 的回答：这里有一个不错的代码生成器：http:
[//www.bobbyvandersluis.com/swfobject/generator/index.html](http://www.bobbyvandersluis.com/swfobject/generator/index.html)

只需选择“动态发布”并填写一些文本字段。

# java - 获取 ListItem 中的信息并将其发送到下一个 Activity

> ID：11084581
> 
> 赞同：0
> 
> 时间：2012-06-18T14:05:39.537
> 
> 标签：java, android, eclipse

我对 Eclipse 和 ADT 插件世界比较陌生，所以你能解释一下它在做什么吗？这将非常有帮助。

基本上，我在一项活动中有一个列表，该列表将由来自数据库 API 的 HTTP 请求填充，我仍在努力。但是，我想知道的是，我是否能够在 ListItem 中获取字符串并在下一个活动中将其提供给 TextView？

例如，我点击“Record 1”，它将“Record 1”放入变量中，然后将用户发送到下一个屏幕，并将变量插入 TextView。这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:14:36.133

从适配器获取你想要的，然后将它放入启动新活动的 Intent 中：

```
 listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            String string = parent.getAdapter().getItem(position);
            Intent intent = new Intent(this, nextActivity.class);
            intent.putExtra("text", string);
            startActivity(intent);
        }
    }); 
```

在新的 Activity 中，您将获得启动新 Activity 的 Intent 并获得您放入其中的字符串：

```
String data = getIntent().getStringExtra("text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:12:43.343

为 listItem实现`setOnItemClickListener()`，您将在其中捕获单击的 listItem 和`String`您需要的，然后使用`intent.putExtra(String id, STRING_VALUE)`您可以将字符串传递给下一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:14:27.367

是的，有可能。

您可以使用 将信息发送到另一个活动`Extra`。请参阅下面的代码：

```
Intent i = new Intent(this, NoteEdit.class);
i.putExtra(NotesDbAdapter.KEY_ROWID, id);
startActivityForResult(i, ACTIVITY_EDIT); 
```

你`putExtra`用来把你想要发送的数据发送到活动中。在示例`NotesDbAdapter.KEY_ROWID`中是您为访问数据而提供的名称，并且`id`是数据本身。

而且，您可以通过以下方式从活动中获取数据：

```
Bundle extras = getIntent().getExtras();
mRowId = (extras == null) ? null : extras.getLong(NotesDbAdapter.KEY_ROWID); 
```

# html - 处理不良机器人请求的做法 url 包含“&”而不是“&”之类的和号

> ID：11084582
> 
> 赞同：9
> 
> 时间：2012-06-18T14:05:41.193
> 
> 标签：html, url

[& 是 html 中的保留字符，](http://www.w3schools.com/html/html_entities.asp)因此在任何地方我都有 url 指向带有查询字符串的路径，我放了 & 而不是 & 以便我获得有效的 HTML。

有许多不同的爬虫浏览网站并访问此 url，但它们不使用 html 解码方法来获取正确的 url 值，因此它们向我的网站发出请求：

```
mywebsite.com/?p1=v1&amp;p2=v2 
```

代替

```
mywebsite.com/?p1=v1&p2=v2 
```

现在我正在响应错误页面，因为发出此请求的机器人对我不感兴趣。

但我的问题是，处理此类请求的最佳做法是什么？

您知道支持处理此类请求是否有任何用处？（例如，是否有任何流行的爬虫或浏览器无法正确转换此网址？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:57:07.423

我认为您可以期望任何主要的爬虫都能够处理有效的转义 URL。所以我不会担心剩下的。

如果您真的喜欢，那么您可能想要将重写规则添加到您的 Apache 或您使用的任何东西中。但是，当 URL 确实包含字符序列并被您的重写规则`&amp;`替换为错误时，这可能会导致其他问题。`&`

在我看来，最好保持不变。这不是你的错，当你并不真正关心这些爬虫时 - 那又如何？:)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-03T08:10:21.830

是的 & 是一个保留字符，但你不会把它放在网站链接中。

正确的

```
<a href="mywebsite.com/?p1=v1&p2=v2">mywebsite.com/?p1=v1&amp;p2=v2</a> 
```

不正确

```
<a href="mywebsite.com/?p1=v1&amp;p2=v2">mywebsite.com/?p1=v1&amp;p2=v2</a> 
```

# visual-studio - VS6 中的 MIDL 选项卡

> ID：11084589
> 
> 赞同：1
> 
> 时间：2012-06-18T14:06:14.080
> 
> 标签：visual-studio, midl

我被分配构建一个 Visual Studio 6 C++ 项目（我知道这本身就是一个问题......）。我向项目中添加了一个 IDL 文件，但 MIDL 选项卡未显示项目或文件本身。如何使 MIDL 选项卡出现？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:25:25.697

最终解决方案是使用 IDL 文件复制现有（另一个）项目并更改其属性/文件。这行得通。

# .net - .NET 4.0 的独立 .NET CLR 调试器？

> ID：11084595
> 
> 赞同：4
> 
> 时间：2012-06-18T14:06:39.120
> 
> 标签：.net, debugging, com

我有一个 COM 应用程序，它实际上是 PowerPoint 的加载项。在以前的版本中，它使用 .NET 2.0 和更高版本的 .NET 3.5（它们都具有相同的 CLR 版本）。我曾经使用 WinDbg 和 CDB 来调试我的 .NET 应用程序，纯粹是为了例外。它工作得很好......但是，现在我已经为我的最新版本使用了 .NET 框架，所以它不起作用！

有谁知道一个相当直接且轻量级的 .NET 4.0 调试器，它类似于 WinDbg？我了解 Microsoft 不再支持 .NET 4.0 的 CLR 调试，但为什么呢？？？

此外，有人知道我可以用来调试我的应用程序的任何其他“轻量级”方法吗？它安装在数百台机器上，不幸的是，安装 VS2010 不是一个选项！

感谢任何输入。

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:03:40.917

我不确定 WinDbg 无法调试 .NET 4 是什么意思，因为它绝对受支持。SOS、PSSCOR 和 SOSEX 都适用于 .NET 4。

但是，请记住，.NET 运行时 DLL 在 .NET 4 中已从 mscorwks 重命名为 clr，因此当您加载 SOS 时，您必须这样做`.loadby sos clr`而不是`.loadby sos mscorwks`.

# django - 如何将一个模型绑定到另外两个已经相关的模型并显示信息？

> ID：11084596
> 
> 赞同：1
> 
> 时间：2012-06-18T14:06:39.707
> 
> 标签：django, django-models, django-views

抱歉，如果标题不符合要求，我不知道如何表达我的问题。请随时编辑一个更好的。这是我正在尝试做的事情：

我正在尝试使用几种不同的模型创建一个关系数据库。这个想法是：

*   合同是唯一的
*   任何合同都可以拥有（并共享）任意数量的项目
*   需要为特定合同存储有关每个特定项目的唯一信息

到目前为止，我按预期工作的前两个要点。第三点似乎奏效了，至少在管理面板中是这样。我可以将一条信息分配给特定合同的特定项目。

首先，我这样做是否正确？

其次，作为视图的一部分，我如何一次列出以上所有信息？像这样：

```
-ContractName
    -ProjectName
    -ProjectName
        -SpecificInfo/Comments
    -ProjectName 
```

这是我目前拥有的模型代码：

```
from django.db import models

class Project(models.Model):
    identifier = models.CharField(max_length=30)
    description = models.CharField(max_length=100)

    def __unicode__(self):
        return self.identifier

class Contract(models.Model):
    number = models.CharField(max_length=30)
    name = models.CharField(max_length=75)
    projects = models.ManyToManyField(Project)

    def __unicode__(self):
        return self.number

class Info(models.Model):
    contract = models.ForeignKey(Contract)
    project = models.ForeignKey(Project)
    title = models.CharField(max_length=75)
    info_text = models.TextField()

    def __unicode__(self):
        return self.title 
```

这是当前仅显示合同和任何相关项目的视图：

```
<ul>
{% for contract in contracts %}
    <b><li>{{ contract.number }} - {{ contract.name }}</li></b>
        {% for project in contract.projects.all %}
            <ul>
                <li>{{ project.identifier }} - {{ project.description }}</li>
            </ul>
        {% endfor %}
{% endfor %}
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:19:26.487

子弹对子弹：

*   合同是唯一的

    独特的怎么样？您可以使其编号唯一或名称唯一，甚至特定客户的唯一（尽管这没有多大意义，因为您可能希望客户拥有多个合同。重复业务 FTW！）。要使特定字段独一无二，您只需添加`unique=True`.

*   任何合同都可以拥有（并共享）任意数量的项目

    合同有很多项目，项目有很多合同，所以这是一个明显的 M2M，你已经涵盖了。

*   需要为特定合同存储有关每个特定项目的唯一信息

    所以这就是你横着走的地方。如果需要在*关系*上存储唯一信息，即专门适用于合同和项目的组合，则需要“通过”模型。您基本上是使用`Info`模型创建的，但是您需要告诉 Django 实际使用*此*模型而不是其默认的关系隐式模型，例如：

    ```
    projects = models.ManyToManyField(Project, through='Info') 
    ```

*（我建议重命名`Info`为更具描述性的名称，例如`ContractProject`，以表明它是这两个模型的连接表。）*

有了它，您的模板大致看起来像（基于您当前的代码，而不是我建议的名称更改）：

```
{% for contract in contracts %}
    {{ contract.name }}
    {% for info in contract.info_set.all %}
        {{ info.project.name }}
        {{ info.title }}
        {{ info.info_text }}
    {% endfor %}
{% enfor %} 
```

所以这里的想法是，您需要获取连接表实例（以便您可以访问该信息），而不是直接从合同中获取项目，然后通过它拉动项目。请记住，虽然这相对昂贵，但您对每个合同都有一个查询以获取`Info`实例，然后对于每个查询，对项目进行另一个查询。因此，如果您有 3 个合同和每个合同的 3 个项目，那么您已经在谈论 1+3*3 查询或总共 10 个查询。你拥有的合同/项目越多，这个数字当然会成倍增长。

在 Django 1.4 中，您可以使用 new`prefetch_related`在一个查询中获取所有合同的所有信息实例，这大大减少了查询，但您仍然可以为每个项目查询。

```
contracts = Contract.objects.prefetch_related('info') 
```

使用前面的示例，您的查询计数将是 1+1+3，或总共 5 个，因此您可以将其减半。值得庆幸的是，Django 甚至通过支持 join 语法让你走得更远`prefetch_related`。

```
contracts = Contract.objects.prefetch_related('info_project') 
```

这将获取所有合同，然后获取这些合同的所有信息实例，最后获取这些信息实例的所有项目。同样，使用前面的示例，您的查询计数减少到 1+1+1，总共 3。

如果您没有运行 Django 1.4，您可以从名为[django-batch-select](https://github.com/lilspikey/django-batch-select)的包中获得几乎相同的功能。

# xml - XML - 引用数字属性

> ID：11084602
> 
> 赞同：10
> 
> 时间：2012-06-18T14:07:03.780
> 
> 标签：xml, syntax, standards, quotes

## 是否应该引用 XML 中的数字属性？

```
<root>
  <node size=45 />
  <foo bar=1.2>
    <baz foo=20>
  </foo>
</root> 
```

对比

```
<root>
  <node size="45" />
  <foo bar="1.2">
    <baz foo="20">
  </foo>
</root> 
```

* * *

我的代码编辑器/浏览器没有引号似乎很好，但大多数在线资源似乎都说它们是必需的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:38:55.733

[http://www.w3schools.com/xml/xml_attributes.asp](http://www.w3schools.com/xml/xml_attributes.asp)

> 必须引用 XML 属性

必须始终引用属性值。可以使用单引号或双引号。对于一个人的性别，person 元素可以这样写：

```
<person sex="female"> 
```

或像这样：

```
<person sex='female'> 
```

如果属性值本身包含双引号，您可以使用单引号，如下例所示：

```
<gangster name='George "Shotgun" Ziegler'> 
```

或者您可以使用字符实体：

```
<gangster name="George &quot;Shotgun&quot; Ziegler"> 
```

至少根据 Microsoft 世界，根据最新评论进行了更新以扩展。

[XElement.Value 属性](https://docs.microsoft.com/en-us/dotnet/api/system.xml.linq.xelement.value?redirectedfrom=MSDN&view=netframework-4.7.2#System_Xml_Linq_XElement_Value)

```
public string Value { get; set; } 
```

你也可以看到参考这个[问题](https://stackoverflow.com/questions/26379256/is-xml-elements-attribute-value-always-data-type-of-string)

# jquery - 通过jQuery隐藏div模糊

> ID：11084606
> 
> 赞同：4
> 
> 时间：2012-06-18T14:07:08.353
> 
> 标签：jquery, toggle, blur

我正在尝试使用通过按空下拉列表切换的 div 创建多选下拉列表的错觉。它工作正常，但我希望能够在 div 外部单击时隐藏它。我该怎么做呢？我使用以下代码：

```
<script src="../js/jqGlobal.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $(".testColor").click(function () {
            $("#exampleDiv").toggle();
        });
        $("#exampleDiv").blur(function () {
            $("#exampleDiv").toggle();
        });
    });
</script>

<style type="text/css">
    #exampleDiv 
    {
        position: absolute;
        top:22px;
        left: 0px;
        width:198px;
        height:150px;
        overflow-y: scroll;
        overflow-x: hidden;
        border: 1px solid #7F9DB9;
        display: none;
    }

</style>

    <div style="position:relative;">
        <asp:DropDownList ID="DropDownList1" runat="server" Width="200" class="testColor">

        </asp:DropDownList>
        <div id="exampleDiv">
            <asp:CheckBox ID="CheckBox2" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox3" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox4" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox5" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox6" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox7" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox8" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox9" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox10" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox11" runat="server" />
            <br />
            <asp:CheckBox ID="CheckBox12" runat="server" />
            <br />
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:14:00.130

```
var element = $("#exampleDiv");    

$(document).bind('mouseup', function (e){
     if (element.has(e.target).length === 0)
         $(element).hide();
});

$(element).click(function(){
    $(element).show();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:10:04.783

您可以尝试 .mouseout() 而不是 .blur()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:21:04.413

onclick 页面上的任何位置隐藏 div 并在单击 testColor 时取消单击传播到父元素

```
function cancelBubleEv(e)
{
     e = e||event;
     e.stopPropagation? e.stopPropagation() : e.cancelBubble = true;

}

$(document).ready(function () {
     $(document).click(function () {

        $("#exampleDiv").hide();

     });
     $(".testColor").click(function (e) {
         $("#exampleDiv").toggle();
         cancelBubleEv(e);
     });
     $("#exampleDiv").click(function (e) {
        cancelBubleEv(e);
     });

}); 
```

编辑：

单击复选框时取消事件传播

# java - 查找时出现 Java LDAP 错误

> ID：11084607
> 
> 赞同：0
> 
> 时间：2012-06-18T14:07:09.283
> 
> 标签：java, ldap-query

我正在查找 Sun One LDAP 中的对象并得到下面给出的异常：

**javax.naming.NamingException：使用对象工厂生成对象时出现问题 [根
异常是 java.lang.IllegalAccessException：类 javax.naming.spi.NamingManager
无法使用修饰符“public”访问 com.ldap.java.LDAPFactory 类的成员] ; 其余名称 cn=favorite,dc=xxx,dc=abc,dc=cdf'**

在下面给出的“读取对象”的代码中引发了异常：

```
 Fruit fruit = new Fruit("orange", "sweet and sour");

        // Perform bind
        ctx.bind("cn=favorite,dc=xxx,dc=abc,dc=cdf", fruit);
        logger.info("Entry bind...Complete");

        // Read object back
        Object f2 = ctx.lookup("cn=favorite,dc=xxx,dc=abc,dc=cdf");
        logger.info("Fruit = " + f2);

        // Read attributes to see encoding
        Attributes attrs = 
                    ctx.getAttributes("cn=favorite,dc=xxx,dc=abc,dc=cdf");
        logger.info("Atrributes = " + attrs);

        // Close the context when we're done
        ctx.close() 
```

有人能告诉我代码有什么问题吗？

--

Tks 巴拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:33:03.207

我已经通过以下代码解决了这个问题：

现有代码：

```
 String classname = Fruit.class.getName();
    StringRefAddr classref = new StringRefAddr("java:".concat(name), fruit + ":" + fruitType);
    String classfactoryname = FruitFactory.class.getName();

    Reference ref = new Reference(classname, classref, classfactoryname, null);

    logger.info("getReference(): END");

    return ref; 
```

新代码：

```
 String classname = Fruit.class.getName();
    StringRefAddr classref = new StringRefAddr("java:".concat(name), fruit + ":" + fruitType);
    //String classfactoryname = FruitFactory.class.getName();

    Reference ref = new Reference(classname, classref);

    return ref; 
```

--
Tks
巴拉特

# javascript - 访问 AJAX 响应文本中的 javascript 变量

> ID：11084610
> 
> 赞同：-1
> 
> 时间：2012-06-18T14:07:18.523
> 
> 标签：javascript, ajax, asp-classic

我正在尝试从 ASP 页面（我在其中创建动态 javascript 数组）获得响应。但是在 AJAX 回调之后，我无法访问 javascript 数组。

我已经阅读了 stackoverflow 文章[调用从 Ajax 响应返回的 JavaScript 函数，](https://stackoverflow.com/questions/510779/calling-a-javascript-function-returned-from-a-ajax-response)它解决了与我的问题类似的问题。

不知道这有什么问题。我在下面简要介绍我编写的代码。

* * *

```
Function ()
{
  var xmlhttp;
  if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
  } else { // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 1) {
      alert('connection');
    }
    if (xmlhttp.readyState == 3) {
      alert('processing');
    }
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      alert('back with the bang');
      document.getElementById('dvCallback').innerHTML = xmlhttp.responseText;
      eval(document.getElementsByID("runscript").innerHTML);
      split1 = arrJSCalT[i].split(":");
      alert(split1[1]);
    }
  }
  xmlhttp.open("POST", "Sys_Add.asp", true);
  xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xmlhttp.send();
  return false;
} 
```

* * *

Sys_Add.asp 如下。

```
 <%
    response.Expires = -1
    dim strErrMsg

    recCntr = 0
    recCntr = rsCalT.RecordCount
    recCntr = recCntr - 1
    dim dicCalT
    set dicCalT = CreateObject("Scripting.Dictionary")
    if rsCalT.RecordCount <> 0 then
    rsCalT.MoveFirst
    do while not rsCalT.EOF
    dicCalT.Add cstr(rsCalT(0)), cstr(rsCalT(1))
    rsCalT.MoveNext
    loop
    end if
    Call FillJSArray(dicCalT,"arrJSCalT")

    Sub FillJSArray(dicVB, arrJS)
        dim itr
        a = dicVB.keys
        b = dicVB.items
        Response.write ("<script language=""javascript"" id=""runscript"" name =""runscript"">" & VbCrLf )
        Response.Write ("var " & arrJS & "= new Array(" )
        for i = 0 To dicVB.Count - 1
            If i > 0 then
                response.write (",")
            End If
            Response.Write ("""" & a(i) & ":" & b(i) & """")
        Next
        Response.Write (");" & vbCrLf )
        'Response.write "alert(""running from main"");"
        Response.write ("</script>" & VbCrLf)
        Response.write ("so this is printed as welll")
    End Sub
    'END creating javascript array from asp recordset

  response.Write ("Did you want this??")

%> 
```

* * *

我在 split1 = arrJSCalT[i].split(":"); 行出现错误 如果我能得到这方面的帮助，我将不胜感激。

谢谢...普拉尚特....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:14:58.783

这是因为

```
Response.write ("<script language=""javascript"" id=""runscript"" name =""runscript"">" & VbCrLf )
Response.Write ("var " & arrJS & "= new Array(" ) 
```

使数组成为新脚本的本地数组，除非`function() {...}`在同`<script/>`一块内调用 js 部分，否则您将看不到它，因为变量范围是本地的。

附加信息：这个：

```
 eval(document.getElementsByID("runscript").innerHTML); 
```

创建一个脚本，其中包含一个局部变量，这是您的数组。该数组在此脚本之外是完全不可见的。

但是你尝试在下一行使用它：

```
 split1 = arrJSCalT[i].split(":"); 
```

但是这条线在您之前的动态创建块之外。我无法为您提供解决方案，因为我不知道您在此操作中试图实现什么，但我强烈推荐以下内容：

*   从您的 asp 页面获取 XML 文档，返回您需要的所有数据（并且仅返回数据），例如数组的内容。XML 返回示例：

> ```
> <DATAS>
>     <DATA>1</DATA>
>     <DATA>2</DATA>
>     <DATA>3</DATA>
>     <DATA>4</DATA>
> </DATAS> 
> ```

```
var parser=new DOMParser();
var xmlDoc=parser.parseFromString(xmlhttp.responseText,"text/xml");
var sLocalData;
var oOpt;

for(var i=0; i< xmlDoc.getElementsByTagName("data").length; i++) {
    sLocalData = xmlDoc.getElementsByTagName("title")[i].textContent;
    //do your stuff here, for example:
    oOpt = document.createElement("option");
    oOpt.text = sLocalData;
    mycombobox.appendChild(oOpt);
} 
```

*   不要使用 eval 来添加这样的脚本，你正在做一些非常危险、丑陋和不清楚的事情

给你，玩得开心！问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:15:36.863

您正在尝试访问 arrJSCalT 变量，但它不存在。仅存在于 ASP 范围内，但 JS 不知道。

所以，你需要告诉 JS 谁是 arrJSCalT。您可以使用 xmlhttp 的属性 responseText 访问 AJAX 返回。

在 split1 var 之前，放置：

```
arrJSCalT = xmlhttp.responseText; 
```

# maven - 在没有 Maven 的情况下构建 Maven 项目

> ID：11084612
> 
> 赞同：2
> 
> 时间：2012-06-18T14:07:31.390
> 
> 标签：maven, java, building

我有 Maven 项目，但在其中一台服务器上，我必须在没有 Maven 的情况下构建它。
可以使用标准 JDK 命令。在哪里可以看到 Maven 在构建项目时发送到 JDK 的命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:12:07.900

Maven 做了很多。没有简单的方法可以模拟没有 Maven 的 Maven 所做的事情。

如果您绝对不能在服务器上安装 maven，请在另一台服务器（或本地）上构建您的工件并通过 scp 将它们移动到服务器上。

也就是说：我曾经遇到过类似的情况，我从 Maven 为绝对需要运行本地构建但无法运行 Maven（禁止网络访问）的服务器生成 RPM。我所做的是将所有依赖项放在 RPM 中，外加一个 Ant 发行版和一个 Ant 构建文件。在 RPM 安装脚本中，解压缩了依赖项并调用了 Ant 脚本。它奏效了，但这意味着双重工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-28T13:45:32.373

您可以从此处下载依赖项：http: [//jar-download.com/online-maven-download-tool.php](http://jar-download.com/online-maven-download-tool.php)。因此，您不需要 Maven 安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T07:24:10.553

这是我的解决方案。当然是硬编码，项目很小，但对我来说很有帮助

项目结构：
*主文件夹*
-依赖（dir）
-module1-src...-
module2-src...-
manufest.template（文件）
module2有module1的依赖，module1用JDK1.5编译，module2用JDK1.6编译.

```
@echo off

set JODA=dependency\joda-time-1.6.2.jar
set EJB=dependency\ejb-api-3.0.jar
set PERSISTANCE_API=dependency\persistence-api-1.0.jar
set DEPENDENCIES=%EJB%;%JODA%;%PERSISTANCE_API%
set TEMP_FILE=temp
set PUBLIC_INTERFACE_CLASSES=target\target-module1
set CODEGEN_CLASSES=target\target-module2
mkdir target
mkdir %MODULE1_CLASSES%
mkdir %MODULE2_CLASSES%

dir module1\*.java /s /B > %TEMP_FILE%
%JAVA_HOME_1_5%\bin\javac -classpath %DEPENDENCIES%;%MODULE1_CLASSES% -d %MODULE1_CLASSES% @%TEMP_FILE%

dir module2\*.java /s /B > %TEMP_FILE%
%JAVA_HOME_1_6%\bin\javac -classpath %DEPENDENCIES%;%JAVA_HOME_1_6%\lib\tools.jar;%MODULE1_CLASSES%;%MODULE2_CLASSES% -d %MODULE2_CLASSES% @%TEMP_FILE%

jar cf module1.jar -C %MODULE1_CLASSES% .
jar cfm module2.jar manifest.template -C %MODULE2_CLASSES% .

rm %TEMP_FILE%
rm -r target 
```

# php - 创建一个有效的单词计数器，包括中文/日文和其他重音语言

> ID：11084623
> 
> 赞同：3
> 
> 时间：2012-06-18T14:08:06.100
> 
> 标签：php, symbols, word-count, non-ascii-characters

在试图弄清楚如何拥有一个有效的字符串单词计数器之后，我知道 PHP 具有的现有功能，[`str_word_count`](http://php.net/manual/en/function.str-word-count.php)但不幸的是它没有做我需要它做的事情，因为我需要计算包含英语的单词数量、中文、日文等重音字符。

但是`str_word_count`，除非您在第三个参数中添加字符，否则无法计算单词的数量，但这太*疯狂*了，这可能意味着我必须添加中文、日语、重音字符（等）语言中的每个字符，但这不是我的需要。

测试：

```
str_word_count('The best tool'); // int(3)
str_word_count('最適なツール'); // int(0)
str_word_count('最適なツール', 0, '最ル'); // int(5) 
```

无论如何，我在网上找到了这个功能，它可以完成这项工作，但遗憾的是它没有计数：

```
function word_count($str)
{
    if($str === '')
    {
        return 0;
    }

    return preg_match_all("/\p{L}[\p{L}\p{Mn}\p{Pd}'\x{2019}]*/u", $str);
} 
```

测试：

```
word_count('The best tool') // int(3)
word_count('最適なツール'); // int(1)

// With spaces
word_count('最 適 な ツ ー ル'); // int(5) 
```

基本上我正在寻找一个好的 UTF-8 支持的单词计数器，它可以计算每个典型单词/重音/语言符号中的单词 - 有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:33:38.200

有可用于字数统计的日文[黑字词形态分析器。](http://www.atilika.org/)不幸的是，它是用 Java 编写的，而不是 PHP。由于将其全部移植到 PHP 是一项艰巨的任务，我建议围绕它编写一个小包装器，以便您可以在命令行上调用它，或查看其他 PHP-Java 桥。

我不知道它是否适用于日语以外的语言。您可能想查看[Apache Tika](http://tika.apache.org/)项目以获取类似的此类库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T12:34:05.307

我使用`Intl`扩展的 break 迭代器取得了很好的效果，该迭代器使用区域设置感知词边界对字符串进行标记。例如：

```
<?php
$words = IntlBreakIterator::createWordInstance('zh');
$words->setText('最適なツール');

$count = 0;
foreach( $words as $offset ){
  if( IntlBreakIterator::WORD_NONE !== $words->getRuleStatus() ){
    $count++;
  }
}

printf("%u words", $count ); // 3 words 
```

由于我不懂中文，我无法验证“3”是正确答案。但是，它会为我理解的脚本产生准确的结果，并且我相信 ICU 库是可靠的。

我还注意到“zh”参数的传递似乎对结果没有影响，但该参数是强制性的。

我正在运行 Intl PECL-3.0.0，ICU 版本是 55.1。我发现我的 CentOS 服务器运行的版本比这些旧，而且它们不适用于中文。因此，请确保您拥有最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:23:13.960

您可以查看使用 UTF-8 字符串的[mbstring](http://www.php.net/manual/en/intro.mbstring.php)扩展。

mb_split() 使用正则表达式模式拆分 mb 字符串。

```
<?php 
printf("Counting words in: %s\n", $argv[1]);
mb_regex_encoding('UTF-8');
mb_internal_encoding("UTF-8");
$r = mb_split(' ', $argv[1]); 
print_r($r); 
printf("Word count: %d\n", count($r));

$ php mb.php "foo bar"
Counting words in: foo bar
Array
(
    [0] => foo
    [1] => bar
)
Word count: 2

$ php mb.php "最適な ツール"
Counting words in: 最適な ツール
Array
(
    [0] => 最適な 
    [1] => ツール
)
Word count: 2 
```

~~*注意：我必须在字符之间添加 2 个空格才能获得正确的计数*~~ 通过设置&来**修复**`mb_regex_encoding()``mb_internal_encoding()``UTF-8`

**但是，在中文中不存在“单词”的概念（在某些情况下在日语中也可能存在），因此您可能永远不会以这种方式得到相关的结果......）**

您可能需要使用字典编写算法来确定哪些字符组是“单词”

# php - PHP变量访问数组中的变量

> ID：11084626
> 
> 赞同：3
> 
> 时间：2012-06-18T14:08:13.763
> 
> 标签：php, arrays, reference

不习惯 php，我在访问数组及其子数据时遇到了问题。

```
$form['signatories']['signatory1'] = array(...); 
```

我必须为上面一行中创建的数组创建一个“指针”，我希望以下内容可以工作：

```
$cluster = $form['signatories']['signatory1']; 
```

测试我正在访问相同的“内存空间”证明我错了：

```
$cluster['signatory_name'] = array(...)
// $form['signatories']['signatory1'] has no elements
// $cluster has a sub element 
```

像 cluster 是我希望它指向的数组的副本。

我应该如何进行？我尝试使用某些博客中提到的“&”参考符号，但这没有帮助。

谢谢！J。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:11:54.353

默认情况下，PHP 中的赋值是按值而不是按引用，对象除外。

如果要传递对原始数组的引用，则需要显式创建引用：

```
$cluster = &$form['signatories']['signatory1']; 
```

请参阅PHP 手册中的[通过引用分配。](http://www.php.net/manual/en/language.references.whatdo.php#language.references.whatdo.assign)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:11:20.457

您可以使用`=&`通过[引用](http://www.php.net/manual/en/language.references.spot.php)分配：

```
$cluster =& $form['signatories']['signatory1']; 
```

实际上这是两个操作。第一个是`&$form['signatories']['signatory1']`为您提供参考`$form['signatories']['signatory1']`。第二个`=`显然将引用分配给`$cluster`.

# iphone - 如何以编程方式在ios搜索栏中输入keyworkd？

> ID：11084627
> 
> 赞同：0
> 
> 时间：2012-06-18T14:08:18.393
> 
> 标签：iphone, ios, searchbar

我有一个带有搜索栏的 UI 表格视图，它在正常情况下运行良好。现在，应用程序可以使用前一屏幕中的搜索关键字进入此屏幕。屏幕显示时，需要在搜索栏中可编程输入关键字，表格视图需要像往常一样显示过滤后的记录。谁能告诉我如何实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:14:08.347

如果您使用的是 UISearchDisplayController，您可以获取它的 searchBar 属性（UISearchBar 的一个实例）并在 searchBar 上调用 setText: 来设置文本。

# iphone - 应用程序在 NSURLConnection 中崩溃

> ID：11084630
> 
> 赞同：0
> 
> 时间：2012-06-18T14:08:24.843
> 
> 标签：iphone, objective-c, cocoa, crash, nsurlconnection

我正在尝试使用异步类型将 URL 发布到服务器，例如

```
_urlConn = [[NSURLConnection alloc] initWithRequest:_urlReq delegate: self]; 
```

我得到了正确的响应，并且我使用代理方法（例如 didRecieveResponse 和 connectionDidFinishLoading）很好地处理了响应。到目前为止，流程运行良好。我面临一个我无法清楚地解决的新问题。

假设我有一个按钮，它将发布相同的 URL。

1.  我点击按钮发布网址
2.  当再次单击按钮时（在一/两秒内），不会发布 URL（我已经编写了逻辑）。
3.  URL 已发布（对于第一个按钮单击），直到现在我还没有收到任何响应，现在我正在尝试再次单击该按钮，该按钮现在将发布 URL。

我的应用程序就在这里。是不是因为我用的是`_ReleaseObject(_urlConn);`in`connectionDidFinishLoading`方法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:32:47.387

使用委托回调时需要非常小心。

在这个例子中，一个对象是两个同时的 NSURLConnection 对象的委托。这是一个坏主意。除非您开发一种将特定连接与适当的响应数据对象相关联的方法，否则您最终会混合响应数据。在这种情况下，使用 _urlConn （我假设是一个 iVar）而不是 connection （传递给 的参数）会使事情变得更糟`-connectionDidFinishLoading:`。

为了简化所有这些，您需要在现有请求待处理时不发出新请求，或者您需要在开始新请求之前[取消](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLConnection/cancel)旧请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:50:58.197

我刚刚[在这里回答了某人](https://stackoverflow.com/questions/11076486/how-to-write-a-dowloader-class-for-updating-download-progress-in-ios/11076606#11076606)关于使用同一个委托处理多个并发下载的问题。（@Jeffery 是对的——它需要保持每个状态，键控在连接对象上）。

这是我处理您的具体示例的方式...

```
- (IBAction)postButtonPressed:(id)sender {

    sender.enabled = NO;  // no more presses until we are ready again

    [UIView animateWithDuration:0.3 animations:^{
        sender.alpha = 0.3;  // or some effect to make your button appear disabled
    }];

    NSURLRequest *request = // build your post request here

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue]
        completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

            // check for error, do whatever you intend with the response
            // then re-enable the button
            sender.enabled = YES;
            [UIView animateWithDuration:0.3 animations:^{sender.alpha=1.0;}];
    }];
} 
```

# c# - 在 .NET 中使用 select 的动态 linq 表达式

> ID：11084636
> 
> 赞同：1
> 
> 时间：2012-06-18T14:09:03.267
> 
> 标签：c#, .net, linq, lambda, dynamic-linq

我想动态添加 .Select 语句，但编译器只允许我在当前范围内构建这些语句。我知道 linqkit，它可能是一个解决方案，但我不想添加任何外部功能。我如何避免我现在拥有的这种代码重复：

```
 if (request.Equals("some text"))
        {
            var filter = commonFilter.GroupBy(x => new
                {
                    x.Timestamp.Year,
                    x.Timestamp.Month,
                })
                .Select(g => new
                {
                    Year = g.Key.Year,
                    Month = g.Key.Month,
                    TotErr = g.Count(),

                    column1 = g.Sum(o => o.Process.Contains("something") ? 1 : 0),
                    column2= g.Sum(o => o.Process.Contains(".something1") ? 1 : 0),
                    column3= g.Sum(o => o.Process.Contains(".something2") ? 1 : 0),
                    column4= g.Sum(o => o.Process.Contains("something3") ? 1 : 0),
                    column5= g.Sum(o => o.Process.Contains(".something4") ? 1 : 0),
                    column6 = g.Sum(o => o.Process.Contains(".something5") ? 1 : 0),
                    column7= g.Sum(o => o.Process.Contains(".something6") ? 1 : 0),
                    column8= g.Sum(o => o.Process.Contains(".something7") ? 1 : 0),
                    column9= g.Sum(o => o.Process.Contains(".something8") ? 1 : 0),

                    NumOrgs = g.Select(l => l.OrganizationId).Distinct().Count(),
                    NumUsers = g.Select(l => l.UserId).Distinct().Count(),

                });

            return filter.AsPa......;//not important right now
        }
        //Same thing again but slightly different
        else if (request.Equals("some other text"))
        {
            var filter = commonFilter.GroupBy(x => new
                {
                    x.Timestamp.Year,
                    x.Timestamp.Month,
                    x.Timestamp.Day
                })
                .Select(g => new
                {
                    Year = g.Key.Year,
                    Month = g.Key.Month,
                    Day= g.Key.Day,
                    TotErr = g.Count(),

                    column1 = g.Sum(o => o.Process.Contains("something") ? 1 : 0),
                    column2= g.Sum(o => o.Process.Contains(".something1") ? 1 : 0),
                    column3= g.Sum(o => o.Process.Contains(".something2") ? 1 : 0),
                    column4= g.Sum(o => o.Process.Contains("something3") ? 1 : 0),
                    column5= g.Sum(o => o.Process.Contains(".something4") ? 1 : 0),
                    column6 = g.Sum(o => o.Process.Contains(".something5") ? 1 : 0),
                    column7= g.Sum(o => o.Process.Contains(".something6") ? 1 : 0),
                    column8= g.Sum(o => o.Process.Contains(".something7") ? 1 : 0),
                    column9= g.Sum(o => o.Process.Contains(".something8") ? 1 : 0),

                    NumOrgs = g.Select(l => l.OrganizationId).Distinct().Count(),
                    NumUsers = g.Select(l => l.UserId).Distinct().Count(),

                });

            return filter.AsPa......;//not important right now
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:35:56.433

如果要维护 Anonymous 类型，可以使用 InternalsVisibleToAttribute 以允许单独的公共库与匿名类型一起使用。

我以前这样做是为了使用 EF 数据源为数据网格创建一个通用过滤库，但它确实涉及一定程度的反射和从通用 System.Linq.Expression 组件构建表达式，所以这可能不值得，除非你有很多您想要执行此操作的实例。

查看 msdn 信息：

[http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

和

[http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx)

如果选择模式更可预测，您可能不需要表达式部分，但在这种情况下，最终只使用公共类而不是匿名类可能更简单。

**编辑**：“无法将匿名转换为 x”类型错误意味着您还没有完全/正确地摆脱匿名。

在您拥有 new { ...whatever... } 的每个位置中，您正在创建一个匿名类型。如果您为每个具有正确属性的类创建类以匹配您分配的内容，那么您只需更改一些看起来像

```
new {x=1,y=2} 
```

读书

```
new somenewclass() {x=1,x=2} 
```

假设您已在其他地方定义

```
public class somenewclass
{
    public int x {get;set;}
    public int y {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:19:56.583

你可以这样做，

```
 var Query = commonFilter.Select(g => new
            {
                Year = g.Key.Year,
                Month = g.Key.Month,
                Day= g.Key.Day,
                TotErr = g.Count(),

                column1 = g.Sum(o => o.Process.Contains("something") ? 1 : 0),
                column2= g.Sum(o => o.Process.Contains(".something1") ? 1 : 0),
                column3= g.Sum(o => o.Process.Contains(".something2") ? 1 : 0),
                column4= g.Sum(o => o.Process.Contains("something3") ? 1 : 0),
                column5= g.Sum(o => o.Process.Contains(".something4") ? 1 : 0),
                column6 = g.Sum(o => o.Process.Contains(".something5") ? 1 : 0),
                column7= g.Sum(o => o.Process.Contains(".something6") ? 1 : 0),
                column8= g.Sum(o => o.Process.Contains(".something7") ? 1 : 0),
                column9= g.Sum(o => o.Process.Contains(".something8") ? 1 : 0),

                NumOrgs = g.Select(l => l.OrganizationId).Distinct().Count(),
                NumUsers = g.Select(l => l.UserId).Distinct().Count(),

            });
    if (request.Equals("some text"))
    {
        var filter = Query.GroupBy(x => new
            {
                x.Timestamp.Year,
                x.Timestamp.Month,
            }) ;
    }
    //Same thing again but slightly different
    else if (request.Equals("some other text"))
    {
        var filter = Query.GroupBy(x => new
            {
                x.Timestamp.Year,
                x.Timestamp.Month,
                x.Timestamp.Day
            });
    } 
```

# node.js - Cloud9中使用socket.io总是得到xhr-polling传输方式

> ID：11084640
> 
> 赞同：3
> 
> 时间：2012-06-18T14:09:11.060
> 
> 标签：node.js, xmlhttprequest, websocket, socket.io

我正在开发一个使用 socket.io 的应用程序，但它总是回退到 xhr 轮询传输方法，我不明白为什么。

我用的是Chrome，但是我已经用其他浏览器测试过了，还是用xhr轮询传输方式。

我在 c9.io 中使用 Cloud9 IDE。

你见过这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T20:08:35.467

Cloud9 IDE 仅支持 xhr 轮询传输方式，如 heroku [https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)

# flash - 嵌入式 Flash 播放器以像素化方式消失

> ID：11084643
> 
> 赞同：0
> 
> 时间：2012-06-18T14:09:27.550
> 
> 标签：flash

很难描述这个问题，但是如果你访问[http://kinetichifi.com/listenpop.php](http://kinetichifi.com/listenpop.php)就很清楚了。就像当您在 Windows 中打开其中一个剩余的资源管理器窗口时，您可以通过在其上拖动另一个窗口来“擦除”它。我真的很感激任何关于为什么会这样的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:49:29.803

我不确定这个问题的根本原因是什么，但事实证明它在任何其他浏览器中都没有发生（我使用的是 Firefox 13.0.2）。我最终下载了 Flash 的早期版本（11.something 中的 10.something），它现在可以工作了。

# ios - 使用 setter 在值更改时发布通知？

> ID：11084647
> 
> 赞同：0
> 
> 时间：2012-06-18T14:09:34.613
> 
> 标签：ios, nsnotificationcenter

```
- (void) setNeededValue:(valueType)newValue;
{
    neededValue = newValue;

    if( neededValue > threshold )
    {
        [[NSNotificationCenter defaultCenter] postNotificationName: @"setNeededValue" object: self];
    }
} 
```

/////////////////

```
-(void)callfunction{
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(setNeededValue) name:@"setNeededValue" object:nil];

NSLog(@"sam: %d,100);
} 
```

setNeededValue 被调用并且调用通知存在问题？当它达到阈值条件时，它会调用函数 callfunction... :( 对此有点新？请帮帮我！！

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:19:13.293

问题可能是您将自己设置为错误位置的通知观察者。

您成为 callfunction 内通知的观察者（当达到阈值时会调用它）。

实例化对象或视图时，只应添加一次观察者。并在它被移除时被移除。

因此，将 addObserver 移动到您的 init 中（或者如果您在 viewDidLoad 方法中的视图控制器内）。

正如克里斯蒂安所指出的，这应该不是问题

*我会替换： [[NSNotificationCenter defaultCenter] postNotificationName: @"setNeededValue" object: self]; with [[NSNotificationCenter defaultCenter] postNotificationName: @"setNeededValue" object: nil]; 然后它应该可以工作，因为通知中心检查从 postNotification 传递的对象并查看观察者，如果有匹配，它将被调用，否则不会。在您的情况下，您使用 object 发布 Notification `self`，但在 addObserver 您有 object`nil`*

# jquery - jQuery bValidator 问题 - 异步

> ID：11084649
> 
> 赞同：0
> 
> 时间：2012-06-18T14:09:37.867
> 
> 标签：jquery

有谁知道在不禁用异步的情况下使这个 ajax 函数工作的方法？Asynx=false 冻结一切......

```
<script type="text/javascript">   
    $(document).ready(function () {
        $('#form5').bValidator();
    });

    function checkUsername(username){

        var ret = false;

        $.ajax({
            type: 'POST',
            url: 'checkuser.php',
            sync: false, // Want to remove this
            data: {'username':username},
            success: function(data){
                if(data == 'ok')
                    ret = true
            }
        });

        return ret;
    }
</script>
<form id="form5" method="post">
    <p> Choose username:
        <input type="text" data-bvalidator="checkUsername,required" data-bvalidator-msg="This username is not valid or already taken.">
    </p>
    <p>
        <input type="submit" value="Submit">
        <input type="reset" value="Reset">
    </p>
</form> 
```

[http://karmela.fsb.hr/~bmauser/bvalidator/documentation.html#serversidevalidation](http://karmela.fsb.hr/~bmauser/bvalidator/documentation.html#serversidevalidation)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T14:19:02.400

你对ajax的概念缺乏一些了解。它被称为“异步”是有原因的。
如果你删除`async: false`（你应该，否则它不是真正的ajax），那么对'checkuser.php'的请求是异步完成的。这意味着脚本继续执行，同时在“后台”中发出 ajax 请求。
完成后，执行“成功”的回调函数（无论何时发生，您都无法确定）。
因此，如果您希望仅在请求的 ajax 成功完成后才发生某些事情，那么您应该将其放在“成功”函数中。

如果您确实删除了`async: false`，则执行顺序如下：

1.  调用函数'checkUsername'
2.  分配'ret = false'
3.  调用 ajax 请求（不等待它完成）
4.  返回'ret'
5.  ajax 完成了它的执行并执行 'success()'
6.  分配'ret = true'，但此时'ret'不再存在。

要了解同步和异步之间的区别，请执行以下两个示例：

**示例 1：**

```
$.ajax({
    type: 'POST',
    url: 'checkuser.php',
    async: false,
    data: {'username':username},
    success: function(data){
        alert('1');
    }
});
alert('2'); 
```

**示例 2：**

```
$.ajax({
    type: 'POST',
    url: 'checkuser.php',
    data: {'username':username},
    success: function(data){
        alert('1');
    }
});
alert('2'); 
```

在“示例 1”中，您将收到“1”警报，然后是“2”。
但在“示例 2”中，您将首先收到“2”警报，然后是“1”。
这是因为在“示例 1”中，脚本在继续之前等待 ajax 请求的执行完成，但在“示例 2”中，脚本让 ajax 请求在“后台”中运行，同时继续执行其余部分剧本。

希望这可以说清楚。

# windows - 从 cmd 脚本如何查找它是从 cmd 控制台调用还是通过单击资源管理器调用

> ID：11084650
> 
> 赞同：1
> 
> 时间：2012-06-18T14:09:38.803
> 
> 标签：windows, cmd

我有一个脚本。

如果从 cmd 控制台调用，则会显示错误。但是，如果通过从资源管理器单击调用我想暂停它，以便用户有机会在窗口关闭之前阅读错误。

有没有办法知道脚本是从 cmd 控制台还是从 Windows 资源管理器调用的？

谢谢，杰斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:13:52.320

你可以看看`%cmdcmdline%`哪个会是类似的东西

```
cmd /c ""C:\path\foo.cmd"" 
```

从资源管理器启动时。

实际上，除非您的批处理文件运行，否则您`cmd`应该能够依赖该变量永远不会包含批处理文件的完整路径，除非通过`open`动词启动（这是 Explorer 所做的；但其他一些也是如此，例如 Far Manager 或电源外壳）。

# iis - 我希望 app_offline.htm 不适用于特定的子目录

> ID：11084654
> 
> 赞同：2
> 
> 时间：2012-06-18T14:09:47.167
> 
> 标签：iis, web-config, app-offline.htm

我在 iis 7.5 的应用程序中有一个子目录。在此子目录中，我放置了一个 web.config 文件，该文件重定向到其他 Web 应用程序。当我将 app_offline.htm 文件放在源 Web 应用程序的根目录中时，不允许此重定向。我希望 app_offline 为整个原始网络应用程序工作，但这个子目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:53:21.133

使用 app_offline.htm 时，它适用于整个 Web 应用程序（根文件夹）。IIS 不会为根目录或子目录中的任何其他页面 (.aspx) 提供服务，因此无法使用 response.redirect 或 server.transfer 传输到另一个页面。您可以使用 neta refresh，但这会将所有请求转移到其他应用程序，并破坏 app_offline.htm 的目的。

您可能需要重新考虑您的设计并分离您的 Web 应用程序。

# iphone - 如何复制 NSMutableAttributedString

> ID：11084655
> 
> 赞同：0
> 
> 时间：2012-06-18T14:09:52.670
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-text

我只是想知道如何制作`NSMutableAttributedString`. 我有一个名为的属性`text`，我想在某个时间点保存它的内容并在发生某些事情时恢复它。我尝试创建一个名为的属性`textCopy`，我可以将其保存到其中，`@property (nonatomic, copy)`但执行此操作时出现运行时错误：

```
 -[NSConcreteAttributedString insertAttributedString:atIndex:]: unrecognized selector sent to instance. 
```

我将如何做到这一点？

更新了运行时错误。每当我将 NSMutableAttributedString 设置为`@property (nonatomic, copy)`. 不明白为什么这不起作用，一般来说，无论我是否使用它的 setter 方法，复制参数似乎都不适用于 NSMutableAttributedString。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T04:09:54.650

问题是您已经使用属性声明了`copy`属性，并且可能正在使用编译器生成的设置器。编译器生成的 setter 将`copy`消息发送到对象以进行复制。该`copy`消息制作了一个**不可变**的副本。也就是说，它创建一个`NSAttributedString`，*而不是*一个`NSMutableAttributedString`。

解决此问题的一种方法是编写自己的使用 的设置器，`mutableCopy`如果您使用的是 ARC，则如下所示：

```
- (void)setTextCopy:(NSMutableAttributedString *)text {
    textCopy = [text mutableCopy];
} 
```

如果您使用手动引用计数，或者像这样：

```
- (void)setTextCopy:(NSMutableAttributedString *)text {
    [textCopy release];
    textCopy = [text mutableCopy];
} 
```

另一个解决方法是`textCopy`使用 a`NSAttributedString`而不是 a `NSMutableAttributedString`，并将其余代码作为不可变对象使用。

# ms-access - 将当前日期时间插入审计表

> ID：11084663
> 
> 赞同：4
> 
> 时间：2012-06-18T14:10:05.127
> 
> 标签：ms-access, vba

我正在实施审计日志以记录对数据库更改的**简要**说明。我的审计表由自动编号 PK、empID(number)、Description(memo) 和 auditDate(date/time) 组成。我的 empID 和描述被正确插入而没有抛出错误，但我的日期/时间没有被插入。我在想这可能不像放错引号那么简单。我的 VBA 代码如下：

在 afterInsert 事件中：

```
Dim strQuery As String
'Dim js As Integer
Dim currDateTime As Date
currDateTime = Now()

strQuery = "INSERT INTO Audits ([emp Number], Description, dateofAudit) VALUES (" & Me.empID & ", '" & "insertion" & "'," & currDateTime & " )"

CurrentDb.Execute (strQuery) 
```

就像我说的，我可以很好地获得前三个值，但是当我尝试插入日期时间时，我遇到了问题。任何输入表示赞赏。希望这不像放错引号那么简单，因为我在提交这个问题之前尝试了大约 4 种引号放置的变体:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T14:16:26.687

试试这个方法。

```
strQuery = "INSERT INTO Audits ([emp Number], [Description], dateofAudit)" & _
    vbCrLf & "VALUES (" & Me.empID & ", 'insertion', Now())" 
```

也给自己一个检查完成的文本字符串的机会。

```
Debug.Print strQuery 
```

使用这种方法，您将不需要您的`currDateTime`变量。日期/时间值将在数据库引擎评估`Now()`函数时确定......`INSERT`执行语句的时间。

如果您希望按照原始方法设置时间，请格式化`currDateTime`并添加`#`分隔符。

```
strQuery = "INSERT INTO Audits ([emp Number], [Description], dateofAudit)" & _
    vbCrLf & "VALUES (" & Me.empID & ", 'insertion', " & _
    Format(currDateTime, "\#yyyy-mm-dd hh:nn:ss\#") & ")" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T18:02:03.953

尝试像这样格式化日期时间：

```
protected DateTime GetDateWithoutMilliseconds(DateTime d)
    {
        return new DateTime(d.Year, d.Month, d.Day, d.Hour, d.Minute, d.Second);
    } 
```

# c++ - C++ Metro 风格应用程序中的资源

> ID：11084667
> 
> 赞同：2
> 
> 时间：2012-06-18T14:10:16.837
> 
> 标签：c++, visual-c++, windows-8, windows-runtime, winrt-xaml

我有一个用 C++/GDI 制作的库，我正在尝试移植到 C++/Metro 风格。

函数`FindResource`/ /(...) 在*Metro Style Applications*`LoadResource`中不可用，并且该主题的文档说：

 *> ^([开发中心 - Metro 风格应用 > 文档 > 开发游戏 > 开发 Metro 风格 DirectX 和 C++ 应用 > 定义应用资源](http://msdn.microsoft.com/en-us/library/windows/apps/hh994921.aspx))
> 
> 该材料尚不可用。此占位符主题作为文档示例提供，可能包含在以后的版本中。

有没有人找到有关如何在 C++ Metro 风格应用程序中处理资源的任何其他信息来源？

我正在寻找一种将字体文件作为资源存储在我的应用程序包中并以编程方式将其作为流加载的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:25:18.763

Metro 有一个可用于访问资源的 ResourceManager 类。这是从 Assets 文件夹中获取文件的示例 -

```
auto file = ResourceManager::Current->MainResourceMap->GetSubtree("Files")->GetValue("Assets/Logo.png"); 
```

这是在 Metro 应用程序中访问资源的链接 -

[http://msdn.microsoft.com/en-us/library/windows/apps/hh694557.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh694557.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:26:01.590

查看[这篇](http://www.codeproject.com/Articles/340084/Under-the-hood-Part-4-Cplusplus-WinRT-Component-DL)关于 WinRT 中组件 DLL 的文章。

显然并且仅基于本文的作者：

> 这里有趣的部分是 C++ 应用程序是基于 XAML 的。C++ 中不再有 .RC 和 resource.h 文件（对于 Metro）。

希望这能回答你的问题。*

# mysql - 在表中查找学生的等级

> ID：11084668
> 
> 赞同：2
> 
> 时间：2012-06-18T14:10:16.687
> 
> 标签：mysql, sql

我是mysql的新手。我用谷歌搜索，但找不到任何令人满意的答案。

基本上，我需要为 student 提供排名。在给定的示例中解释了唯一要考虑的事情。让我们有一个表 student(id,marks,rank)。现在让条目成为

```
id    marks
1      2
2      2
3      3
4      4 
5      4
6      3
7      3 
```

这里 id 的等级：4 和 5 应该是 FIRST。
id 的等级：3、6 和 7 应该是第三个。
id 的等级：1 和 2 应该是 SIXTH。
应该是什么查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:56:13.167

考虑在应用程序端实施排名。如果确实需要在 MySQL 端，可以使用[用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)：

```
SET @rank = 1, @seq = 1, @last = null;
SELECT *, @rank := if(@last = marks, @rank, @seq) AS rank, @seq := @seq + 1, @last := marks FROM test ORDER BY marks DESC; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T14:33:31.693

也许是案例陈述？

```
...
...
CASE
    WHEN marks=4 then rank='First'
    WHEN marks=3 then rank='Third'
    WHEN marks=2 then rank='Sixth'
    ELSE rank='Unk'
END CASE
...
... 
```

编辑：如果 lanzz 是正确的，也许这很有用：

[从分数列表生成标准比赛排名](https://stackoverflow.com/questions/6901115/generate-standard-competition-rankings-from-a-list-of-scores)

# c - gcc 链接器找不到 .so 库文件

> ID：11084669
> 
> 赞同：2
> 
> 时间：2012-06-18T14:10:17.040
> 
> 标签：c, eclipse, ubuntu, arm, beagleboard

我正在尝试为我的手臂目标制作一个小型应用程序。我已经在linux下的eclipse中设置了工具链。现在我正在尝试构建库。

这是我的库头文件 led.h：

```
#ifndef LED_H_
#define LED_H_

extern char ledon(char lednum);
extern char ledoff(char lednum);

#endif /* LED_H_ */ 
```

和我的 c 文件 led.c ：

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <led.h>
int fd = 0;

char ledon(char lednum)
{
    switch(lednum)
    {
    case 0 :fd = open("/sys/class/leds/beaglebone::usr0/brightness", O_WRONLY);
               break;
    case 1 :fd = open("/sys/class/leds/beaglebone::usr1/brightness", O_WRONLY);
                break;
    case 2 :fd = open("/sys/class/leds/beaglebone::usr2/brightness", O_WRONLY);
                break;
    case 3 :fd = open("/sys/class/leds/beaglebone::usr3/brightness", O_WRONLY);
                break;

    }
    if (fd>0)
    {
        write(fd,"1",sizeof(char));
        close(fd);
        return 1;
     }
    else
    {
        printf("Message form library function\n Error reading the LED %d",lednum);
        return 0;
    }

}

char ledoff(char lednum)
{
    switch(lednum)
    {
    case 0 :fd = open("/sys/class/leds/beaglebone::usr0/brightness", O_WRONLY);
               break;
    case 1 :fd = open("/sys/class/leds/beaglebone::usr1/brightness", O_WRONLY);
                break;
    case 2 :fd = open("/sys/class/leds/beaglebone::usr2/brightness", O_WRONLY);
                break;
    case 3 :fd = open("/sys/class/leds/beaglebone::usr3/brightness", O_WRONLY);
                break;

    }
    if (fd>0)
    {
        write(fd,"0",sizeof(char));
        close(fd);
        return 1;
     }
    else
    {
        printf("Message form library function\n Error reading the LED %d",lednum);
        return 0;
    }

} 
```

编译上面我得到led.h和libled.so。

现在我在另一个项目中创建了一个测试 c 文件 ledtest.c。

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <unistd.h>
#include <led.h>

int main(void) {

    while(1)
    {
        ledon(2);
        sleep(1);
        ledoff(2);
        sleep(1);
    }

    return EXIT_SUCCESS;
} 
```

我创建了两个文件夹“include”，其中包含 led.h 和“lib”，其中包含 libled.so。

我已配置如下： [包含路径](http://i.stack.imgur.com/skaGs.jpg) [库路径](http://i.stack.imgur.com/32qPy.jpg)

现在当我编译 ledtest.ci 得到以下错误

```
make all 
Building target: ledtest
Invoking: GCC C Linker
arm-linux-gnueabi-gcc -L/usr/arm-linux-gnueabi/lib -L/home/sanatan/Coustom/lib -o      
   "ledtest"  ./src/ledtest.o   
./src/ledtest.o: In function `main':
ledtest.c:(.text.startup+0x4): undefined reference to `ledon'
ledtest.c:(.text.startup+0x10): undefined reference to `ledoff'
collect2: ld returned 1 exit status
make: *** [ledtest] Error 1 
```

但是如果我在库中添加 libled.so ：

我收到以下错误：

```
**** Build of configuration Release for project ledtest ****

make all 
Building file: ../src/ledtest.c
Invoking: GCC C Compiler
arm-linux-gnueabi-gcc -I/home/sanatan/Coustom/include -I/usr/arm-linux-
    gnueabi/include -O3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/ledtest.d" -
    MT"src/ledtest.d" -o "src/ledtest.o" "../src/ledtest.c"
Finished building: ../src/ledtest.c

Building target: ledtest
Invoking: GCC C Linker
arm-linux-gnueabi-gcc -L/usr/arm-linux-gnueabi/lib -L/home/sanatan/Coustom/lib -o 
    "ledtest"  ./src/ledtest.o   -l/home/sanatan/Coustom/lib/libled.so
/usr/lib/gcc/arm-linux-gnueabi/4.6.1/../../../../arm-linux-gnueabi/bin/ld: cannot 
    find -l/home/sanatan/Coustom/lib/libled.so
collect2: ld returned 1 exit status
make: *** [ledtest] Error 1

**** Build Finished **** 
```

但我确信文件在那里：

```
root@ubuntu:/home/sanatan/Coustom/lib# ls
led.o  libled.so 
```

有人可以在这里帮助我吗，我不知道该怎么办。相信我，我做了功课.. :)

提前致谢。

萨纳坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:19:16.873

每当您想链接到库时，都需要包含该选项

```
 -lxyz 
```

链接到名为 libxyz 的库，并可能使用 -L 选项包含指向它的路径。正如 Fred 的评论所说，您可能需要添加该`-lled`选项。

有关如何在 Eclipse 中将库添加到项目的详细信息，请参阅[此问题的答案](https://stackoverflow.com/questions/1351712/how-to-add-a-library-to-an-eclipse-project)

# linux - 等同于 LINUX bash 中的 typeset -l 和 typeset -u？

> ID：11084675
> 
> 赞同：1
> 
> 时间：2012-06-18T14:10:54.393
> 
> 标签：linux, bash, ksh, hp-ux

我正在将脚本从 HP-UX 移植到 LINUX。当我尝试获取脚本时，bash 抱怨说

```
bash: typeset: -u: invalid option
typeset: usage: typeset [-afFirtx] [-p] name[=value] ...

typeset: usage: typeset [-afFirtx] [-p] name[=value] ...
./install_profile: line 237: typeset: -l: invalid option 
```

据我所见，排版用于为变量赋值，尽管我不太明白什么`typeset -u`和`typeset -l`具体做什么与诸如 foo="bar" 之类的一般赋值不同。

我想知道是否有一些等效的方式来表达`typeset -u`和`typeset -l`用于 LINUX bash，因为它似乎与 bash 不兼容。

或者，我想知道是否可以将排版命令识别为 ksh 命令，因为排版似乎来自 ksh。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:18:27.100

您要从/移植到哪些版本的 bash？`typeset -l`使变量使得对它的任何赋值都将大写转换为小写；`typeset -u`将下转换为上。我怀疑这些选项是`bash`在版本 4 左右的某个时候添加的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:40:47.230

和的行为在 Bash、ksh93`typeset -l`和`-u`mksh 中基本相同，它们导致字符串在赋值时分别转换为小写或大写。在 ksh 中，它们还充当长整数和浮点数的修饰符，这不是常见的 shell 功能（Bash 没有这些）。通常不鼓励使用`-u`and ，尤其是在它们可能让错误溜进来的大型脚本中。大多数时候使用 case-modification 参数扩展有更好的选择。`-l`

`typeset`under Bash 是`declare`（Bash 认为`typeset`已弃用 - IMO 这不是主要问题）的同义词。它们之间存在许多显着差异，除非您注意了解它们的确切行为，否则它们通常应被视为不兼容。在这两个 shell 中，它们在定义数据类型方面发挥着重要作用（Bash、zsh 和 mksh 都具有一些比 ksh93 更有限的非重叠支持）。

此外，在 Linux 下安装 ksh93（或整个 AST 工具包）也没有问题，除非您真的愿意，否则可能不需要将脚本移植到 Bash。Bash 作为 Linux 下的默认设置更受欢迎，这主要是出于历史原因，在一定程度上是许可（copyleft）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:28:22.857

```
$ echo $VAR_NAME | tr '[:upper:]' '[:lower:]'
$ echo $VAR_NAME | tr '[:lower:]' '[:upper:]' 
```

资料来源： [http ://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/](http://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/)

# html - 更改ckeditor的背景？

> ID：11084687
> 
> 赞同：2
> 
> 时间：2012-06-18T14:11:31.670
> 
> 标签：html, css, ckeditor, fckeditor

如何更改用户键入文本的 CKEditor 的背景颜色？我需要动态执行此操作，但找不到需要更改的元素。知道如何定位它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T20:02:29.330

您可以尝试：

```
CKEDITOR.instances.editor1.document.getBody().setStyle('background-color', 'red'); 
```

编辑器的实例在哪里`CKEDITOR.instances.editor1`- 你可以在这里进行测试，例如：http: [//ckeditor.com/demo](http://ckeditor.com/demo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T09:05:06.297

使用“myCss.css”文件进行更改：

我的Javascript：

```
CKEDITOR.document.$.body.className+=' nameofClass '; 
```

myCss.css：

```
.nameofClass{
    background-color: 'blue';
} 
```

ckEditor 文件夹的 config.js：

```
config.contentsCss = '/path/myCss.css'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-02T14:07:10.993

如果您想通过更改或单击事件来更改它：

```
<textarea id="content" class="main_editor" name="content"></textarea>
<input type="button" class="default-text" value="White" data-value="#ff0000" />

<script>
editor = CKEDITOR.replace("content");
$(document).on("click", ".default-text" , function(e) {
    var color = $(this).data('value');
    editor.document.$.childNodes[1].childNodes[1].style.color = color;
    editor.focus();
});
</script> 
```

我使用 jquery mini colors 和 change 事件来动态更改背景（style.background = color）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-18T14:15:16.103

使用 FF 上的 Firebug 插件或 Chrome 的开发者工具来找到正确的元素来设置样式。

# python - 在模板中调用字典项

> ID：11084688
> 
> 赞同：0
> 
> 时间：2012-06-18T14:11:32.290
> 
> 标签：python, django

我正在尝试在模板中调用特定的 dict 项，但是在执行此操作时遇到了麻烦。

基本上我使用 dict 来显示我的数据库的所有类别/子类别。

字典格式如下： {'categoryname1': [subcategory1, categoryname2], "categoryname2": [a, b, c]}

我正在尝试做：
**categoryname1**
- subcategory1
- categoryname2 --a
--b --c

这是我的代码。我遇到问题的线路是这部分：`{% for subcatlevel2 in subcats.items.subcat.1 %}`. 基本上，我试图弄清楚当我知道特定键时如何提取值。

```
{% for cat in subcats.items %}
    {{ cat.0}}
    {% for subcat in cat.1 %}
        {{ subcat }}
        {% for subcatlevel2 in subcats.items.subcat.1 %}
            { subcatlevel2 }}
        {% endfor %}
    {% endfor %}
{% endfor %}` 
```

# c++ - 插件如何调整它的窗口大小

> ID：11084694
> 
> 赞同：4
> 
> 时间：2012-06-18T14:11:53.327
> 
> 标签：c++, plugins, browser, firebreath

当我使用以下 html 加载 pdf 时，pdf 插件似乎会调整其窗口大小以适应 pdf 文件的完整长度。我想知道这个插件是怎么做到的？

* * *

```
<!DOCTYPE html>
<html>
<head>
<title>Test html object tag</title>
<style type = "text/css">
    html
    {
        height: 100%;
    }

    body
    {
        margin: 0;
        padding: 0;
        height: 100%;
    }

    .my_style
    {
        width: 100%;
        min-height: 100%;
    }
</style>
</head>

<body>
    <div class="my_style">
        <object class = "my_style" data="data/test.pdf" type="application/pdf"></object>
    </div>

</body>
</html> 
```

* * *

据我了解，提供给插件的窗口大小是在 html 对象标记中定义的。

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:22:05.460

这纯粹是猜测，因为我没有所说插件的来源，但如果我试图解决这个问题，我只需获取对我插件的对象标签的引用并设置宽度和高度。

尚未测试此代码，但这些代码应该可以工作：

```
FB::DOM::ElementPtr elem(m_host->getDOMElement());
elem->setWidth(640);
elem->setHeight(480); 
```

显然，无论您做什么，都需要访问 BrowerHostPtr (m_host)。

# php - 从复选框 php/mysql 中检索信息

> ID：11084701
> 
> 赞同：-3
> 
> 时间：2012-06-18T14:12:17.110
> 
> 标签：php

我有这段代码，我从中打印表格行和一个复选框，我需要在另一个 php 文件中打印选中的行。我应该怎么做？

我需要 sql=select $checkbox1, checkbox2 之类的东西，或者最好这样做....

```
<form action='report.php' method='post'>

<?php // Script 12.7 - sopping.php

$db = mysql_connect('localhost', 'root', '');
mysql_select_db('db_up', $db);

echo "<table border='1' class='tabtext'>";

$result = mysql_query("SELECT * FROM hostess");
$numrows = mysql_num_rows($result);
$numfields = mysql_num_fields($result);

// show headers
echo '<thead><tr>';
for ($field = 0; $field < $numfields; $field++) {
    $field_name = mysql_field_name($result, $field); // instead of $i
    echo '<th><label><input type="checkbox" name="checkbox[' . $field_name . ']" value="1"/> ' . $field_name . '</label></th>';
}

echo '</tr></thead>';

echo '<tbody>';
for ($row = 0; $row < $numrows; $row++) {
    $data = mysql_fetch_assoc($result);
    echo '<tr>';
    for ($field = 0; $field < $numfields; $field++) {
        $field_name = mysql_field_name($result, $field);
        if (isset($_POST['checkbox'][$field_name])) {
            echo '<td>' . $data[$field_name] . '</td>';
        }
    }
    echo '</tr>';
}
echo '</tbody>';
echo '</table>';

?>
<input type='submit' value='Submit' />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:49:00.760

好的。所以首先你应该只让这个文件生成表单。根据您布置表格的方式，您希望有 2 行，第一行是字段名称，第二行包含复选框本身。所以这就是：

```
<form action='report.php' method='post'>
<?php // Script 12.7 - sopping.php

$db = mysql_connect('localhost', 'root', '');
mysql_select_db('db_up', $db);

echo "<table border='1' class='tabtext'>";

$result = mysql_query("SELECT * FROM hostess");
$numrows = mysql_num_rows($result);
$numfields = mysql_num_fields($result);

// show headers
echo '<thead><tr>';
for ($field = 0; $field < $numfields; $field++) {
    $field_name = mysql_field_name($result, $field);
    echo '<th>'. $field_name . '</th>'; // only the field name
}    
echo '</tr></thead>';
echo '<tbody><tr>';
for ($field = 0; $field < $numfields; $field++) {
    $field_name = mysql_field_name($result, $field);
    echo 
        '<td>
             <input type="checkbox" name="checkbox['.$field_name.']" value="1"/>
        </td>';
}
echo '</tr></tbody>';
echo '</table>';
?>
<input type='submit' value='Submit' />
</form> 
```

然后在您提交表单的文件（report.php）中，您将捕获您发布的内容并显示一个仅显示您提交的复选框的新表格。这是您可以执行的操作的示例。

```
<?php
// within report.php (THIS IS AN EXAMPLE ONLY)

// check if the checkbox fields were submitted
// and if not empty we know that items have been checked.
if(isset($_POST['checkbox']) && !empty($_POST['checkbox'])){
  // iterate through the checked items.
  // this is an associative array because you gave the items a key
  foreach($_POST['checkbox'] as $field => $value){
    // do some stuff
    echo "<p>Checked Field: $field<br/>Value:$value</br></p>";
  }
} else {
  // display a message saying that nothing was submitted
  // you could also display some error or redirect back to the form etc.
  echo '<p>No Check boxes have been checked</p>';
}?> 
```

我希望这足以让你顺利进行。试一试，运行你的代码，看看它的表现如何。确保您的表单以您想要的方式显示并且提交正确运行并且至少向您展示了一些东西。如果需要，只需使用我的示例代码，如果您看到某些内容，则表示它已到达那里。然后，您可以将该示例代码替换为您真正想要显示的内容。除此之外，我基本上会为您编写代码。试一试。祝你好运。

# hibernate - 什么是休眠 3.2 中的 EntityMode？

> ID：11084703
> 
> 赞同：0
> 
> 时间：2012-06-18T14:12:32.263
> 
> 标签：hibernate

什么是实体模式？实际上我试图使用休眠找出表中的主键。

```
ClassMetadata metaData=mapSession.getSessionFactory().getClassMetadata(Dept.class);
metaData.getIdentifierPropertyName(); 
```

它显示主键列。但我尝试使用 getIdentifier(Object,EntityMode) 显示具有值的主键列。

如何在 getIdentifier 方法中使用实体模式？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:58:21.753

org.hibernate.EntityMode 定义了实体可用的表示模式。

使用 EntityMode 的包

org.hibernate

org.hibernate.cache

org.hibernate.cfg

org.hibernate.collection

org.hibernate.engine

org.hibernate.event.def org.hibernate.impl

org.hibernate.mapping

org.hibernate.metadata

org.hibernate.persister.entity

org.hibernate.pretty

org.hibernate.property

org.hibernate.tuple

org.hibernate.tuple.component

org.hibernate.tuple.entity

org.hibernate.type

谢谢

# python - 有条件的 Numpy 均值

> ID：11084710
> 
> 赞同：11
> 
> 时间：2012-06-18T14:13:13.170
> 
> 标签：python, numpy, where-clause

我有计算纯python平均速度的算法：

```
speed = [...]
avg_speed = 0.0
speed_count = 0

for i in speed:
    if i > 0: # I dont need zeros
        avg_speed += i
        speed_count += 1

if speed_count == 0:
    return 0.0

return avg_speed / speed_count 
```

有没有办法用 Numpy 重写这个函数？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-18T14:45:41.217

该函数`numpy.average`可以接收一个`weights`参数，您可以在其中放置一个从应用于数组本身的某些条件生成的布尔数组 - 在这种情况下，一个大于 0 的元素：

```
average_speed = numpy.average(speeds, weights=(speeds > 0)) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-07-09T08:41:07.907

我很惊讶没有人提出最短的解决方案：

```
speeds_np = np.array(speeds)

speeds_np[speeds_np>0].mean() 
```

**解释：**

`speedsNp > 0`创建一个大小相同的布尔数组，满足（不）等式。如果输入`speedsNp`，它只产生`speedNp`布尔数组的值所在的对应值`True`。然后，您需要做的就是获取`mean()`结果。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-18T14:14:41.603

```
import numpy as np

def avg_positive_speed(speed):
    s = np.array(speed)
    positives = s > 0
    if positives.any():
        return s[positives].mean()
    else:
        return 0.

speed = [1., 2., 0., 3.]
print avg_positive_speed(speed)
# prints 2.0

print avg_positive_speed([0., 0.])
# prints 0.0 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-18T14:16:14.027

我知道你想要一个`numpy`解决方案，所以这不符合这个标准（@eumiro 之前的帖子肯定符合），但作为替代方案，这是一个优化的 Python 版本，令人惊讶的是（至少对我而言）结果非常快！

```
speeds = [i for i in speed if i > 0]
return  sum(speeds) / (1.0 * len(speeds)) if sum(speeds) > 0 else 0.0 
```

在速度方面将其与 numpy（或原始）实现进行比较可能会很有趣。

```
In [14]: timeit original(speed)              # original code
1000 loops, best of 3: 1.13 ms per loop

In [15]: timeit python_opt(speed)            # above Python 2 liner
1000 loops, best of 3: 582 us per loop

In [16]: timeit avg_positive_speed(speed)    # numpy code
1000 loops, best of 3: 1.2 ms per loop 
```

在哪里

```
speed = range(10000) 
```

我原以为这`numpy`会在这里有优势..有人知道它为什么会落后吗？

更新：

与`speed = range(100000)`：

```
In [19]: timeit original(speed)
100 loops, best of 3: 12.2 ms per loop

In [20]: timeit python_opt(speed)
100 loops, best of 3: 11 ms per loop

In [21]: timeit avg_positive_speed(speed)
100 loops, best of 3: 12.5 ms per loop 
```

仍然不相信这是解决***这个***`numpy`特定问题的好工具，除非有**大量**的速度:)

 ***numpy 如何处理内存？列表理解在某些时候会遇到一些限制。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-24T22:43:30.407

从[v1.20](https://numpy.org/doc/stable/release/1.20.0-notes.html#where-keyword-argument-for-numpy-functions-mean-std-var)开始， numpy 的`mean`etc 函数支持一个`where`参数：

```
speed.mean(where=speed>0) 
```***

# php - Wordpress 照片库不显示 - the_content

> ID：11084717
> 
> 赞同：0
> 
> 时间：2012-06-18T14:13:28.700
> 
> 标签：php, wordpress, wordpress-theming

我正在潜心创建我的第一个 WordPress 主题，但我发现自己非常卡在某些东西上。该网站是一个单页网站，但我正在通过 WordPress“页面”CMS 加载每个“部分”的内容。所以这就是我所拥有的：

```
<?php
$page_id = 2;
$page_data = get_page( $page_id );
echo '<h2>'. $page_data->post_title .'</h2>';// echo the title
echo apply_filters('the_content', $page_data->post_content);
?> 
```

到目前为止，这对所有事情都很有效。获取页面 ID，从该页面获取标题并获取 the_content。the_content 不知道什么是 WP 照片库吗？它知道什么是独立图像，因为如果我单击“将图像插入帖子”，它会显示得很好。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:35:59.477

如果可以，您应该使用[setup_postdata( $page_data )](http://codex.wordpress.org/Function_Reference/setup_postdata)；然后使用 the_title() 和 the_content()。

# ruby-on-rails - 如何在 Rails 中验证之前从值中去除美元符号？

> ID：11084718
> 
> 赞同：7
> 
> 时间：2012-06-18T14:13:30.103
> 
> 标签：ruby-on-rails, ruby

这是我在模型中使用的内容：

```
before_validation :strip_dollar_sign

validates :amount_due,
          :format => { :with => /^\d+??(?:\.\d{0,2})?$/ }, 
          :numericality => {:greater_than => 0}

private

def strip_dollar_sign
  self.amount_due = self.amount_due.to_s.tr!('$,','').to_f
end 
```

如果我在 Rails 控制台中手动从 strip_dollar_sign 函数运行该行，我得到的正是我想要的（即 400 美元最终为 400.0），但是当我在我的应用程序中使用实际表单时，值总是以 0.0 结尾。有人发现我做错了什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T14:26:46.600

这里有三个问题：

*   [正如 Stefan 在他的回答](https://stackoverflow.com/a/11084776/211563)中指出的那样，您可能希望`,`在`tr!`通话中删除 ，尽管它不会影响替换 a `$`。

*   您正在使用`tr!`，并且以不正确的方式使用其返回值。`tr!`（连同大多数 Ruby 的`!`方法变体）就地改变字符串并`nil`在没有进行任何更改时返回。因为`nil.to_f`is `0.0`，这就是你得到它的原因（或者可能没有，见下文）。您应该改用`tr`.

*   Rails 自动将赋值参数转换为与其关联的数据库列的正确类型，因此即使在验证之前，您的值也会被转换为浮点数，并且`"$400".to_f`是`0.0`，这就是您的回调所看到的。解决方案是覆盖`amount_due=`而不是使用回调：

    ```
    def amount_due=(value)
      value = value.to_s.tr('$', '').to_f
      write_attribute(:amount_due, value)
    end 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:17:31.390

后面有一个逗号，`$`所以你要删除`$,`而不是`$`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-13T00:55:59.697

我建议在 javascript 中执行此操作。Rails 似乎对表单助手做了一些魔术，它将由数字数据库类型支持的字段中的任何非数字值转换为 0.0。愚蠢，我知道。

# jenkins - Jenkins - 定义用户

> ID：11084719
> 
> 赞同：2
> 
> 时间：2012-06-18T14:13:41.423
> 
> 标签：jenkins

我刚刚在我的电脑上安装了詹金斯。它是 Windows 7，我使用了 *.exe 文件。

现在我只需使用目标运行 msbuild：clean、init、compile、test 和 coverage。在我有一个运行 fxCop 的 Windows 批处理命令之后。

现在我想配置安全性和用户。

我正在使用具有一个用户 sarasilva 的 VisualSVN 服务器。我认为 jenkins 中最好的配置是使用相同的用户（？）。

在配置中我这样做：

[http://s14.postimage.org/gvu930udd/security.png](http://s14.postimage.org/gvu930udd/security.png)

在 people>sarasilva 配置中，我有这个：

[http://s15.postimage.org/y134g5q0b/security_sarasilva_config.png](http://s15.postimage.org/y134g5q0b/security_sarasilva_config.png)

如果我保存此配置，当我尝试使用 sarasilva 用户登录时失败，我使用的是来自 svn 服务器的相同密码。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:49:43.793

您尚未创建帐户 - 只是权限。转到`http://<jenkins-host>/signup`并创建帐户。

# android - 在加载 ListView 内容之前显示进度对话框

> ID：11084728
> 
> 赞同：0
> 
> 时间：2012-06-18T14:14:16.573
> 
> 标签：android, multithreading, progressdialog

我正在从文件中读取数据->保存到数据库中->通过从数据库中获取数据来加载我的自定义列表视图。在获取数据并将其保存到数据库时，我希望 ProgressDialog 出现在我的屏幕上，我尝试了这两种类型，但它没有在职的

类型 1：

```
AlertDialog alertDialog = AlertDialog.show(CommoditiesListScreen.this, "Importing...");

// importing data from file
// Saving data to the DB

alertDialog.dismiss(); 
```

类型 2：

```
 UiDialog uiDialog = new UiDialog(CommoditiesListScreen.this);
 CommoditiesListScreen.this.runOnUiThread(uiDialog);
 AlertDialog alertDialog = AlertDialog.show(CommoditiesListScreen.this, "Importing...");
 alertDialog.getWindow().makeActive();

// importing data from file
// Saving data to the DB

uiDialog.stopDialog();
alertDialog.dismiss(); 
```

我尝试了两种方法都不起作用，ProgressDialog 没有出现在屏幕上，我添加的任何其他内容或我在代码中要做的任何修改，请帮助我......

**注意：当忘记调用dismiss(); 在 ListView 加载后出现 Type 1 Progress 并且它旋转了无限时间..**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:20:24.947

这是一种理想的情况`AsyncTask`，您可以在方法中显示您的内容`dialog`，在方法`onPreExecute()`中执行后台操作（从文件中读取数据 -> 保存到 DB 中）并在方法中`doInBackground()`加载和显示您的列表`onPostExecute()`。

# django - 在没有 django 模型和 nutch 的情况下使用 SearchQuerySet haystack API

> ID：11084729
> 
> 赞同：2
> 
> 时间：2012-06-18T14:14:20.620
> 
> 标签：django, nutch, django-haystack

大家早，

在过去的一周里，我一直在尝试不同的搜索引擎和索引工具，但遇到了一个问题。我有一个全是静态页面的 django 站点。我使用 nutch 抓取网站并将结果发送到 solr 索引。我想使用 haystack 来获取搜索结果，但我遇到了一些问题。

第一个问题是我的站点没有任何模型，因此干草堆设置的教程没有用。我已经在 solr 中设置了索引，只想使用 SearchQuerySet API 来搜索它。

我尝试的第一件事是将这些行添加到 solr 索引以使其工作：

```
 <field name="id" type="string" stored="true" indexed="true" multiValued="false" required="true"/>
    <field name="django_ct" type="string" indexed="true" stored="true" multiValued="false"/>
    <field name="django_id" type="string" indexed="true" stored="true" multiValued="false"/> 
```

但是，之后，当我尝试使用 API 进行搜索时，在 django 页面上出现以下错误：

```
 "KeyError at /search/" 'django_ct' 
```

我从人们那里听说，您必须将这些键添加到 solr 中的 schema.xml 才能在没有模型的情况下使用 SearchQuerySet。

如果有人可以提供更多信息或帮助我下一步应该做什么，那就太好了。

谢谢

PS这是我的回溯

```
 Traceback:
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  136\.                     response = response.render()
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/response.py" in render
  104\.             self._set_content(self.rendered_content)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/response.py" in rendered_content
  81\.         content = template.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render
  140\.             return self._render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  837\.         return node.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  837\.         return node.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  837\.         return node.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  837\.         return node.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  837\.         return node.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/base.py" in render_node
  837\.         return node.render(context)
  File "/home/dave/virtualenvs/stuff/local/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  145\.         len_values = len(values)
  File "/home/dave/virtualenvs/stuff/src/stuff/haystack/query.py" in __len__
  84\.             self._result_count = self.query.get_count()
  File "/home/dave/virtualenvs/stuff/src/stuff/haystack/backends/__init__.py" in get_count
  459\.                 self.run()
  File "/home/dave/virtualenvs/stuff/src/stuff/haystack/backends/solr_backend.py" in run
  667\.         results = self.backend.search(final_query, **search_kwargs)
  File "/home/dave/virtualenvs/stuff/src/stuff/haystack/backends/__init__.py" in wrapper
  27\.             return func(obj, query_string, *args, **kwargs)
  File "/home/dave/virtualenvs/stuff/src/stuff/haystack/backends/solr_backend.py" in search
  257\.         return self._process_results(raw_results, highlight=highlight, result_class=result_class, distance_point=distance_point)
  File "/home/dave/virtualenvs/stuff/src/stuff/haystack/backends/solr_backend.py" in _process_results
  355\.             app_label, model_name = raw_result[DJANGO_CT].split('.') 
```

异常类型：/search/ 处的 KeyError 异常值：'django_ct'

# android - Android 中的 ListView 与 IOS 中的一样

> ID：11084730
> 
> 赞同：3
> 
> 时间：2012-06-18T14:14:21.907
> 
> 标签：android

我正在寻找方法来创建列表视图，就像在带有固定标题的 IOS 中一样。有没有办法做到这一点 ？感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:29:37.983

您可以从此链接对[与 iPhone 相同的固定分段列表视图进行 SVN 结帐。希望您正在寻找此示例。](http://code.google.com/p/android-playground/source/checkout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:18:07.600

找到答案。[Android 惊人的列表视图](http://code.google.com/p/android-amazing-listview/)

[如何像 ios 的 UITableview 一样在 android listview 中绘制节标题？](https://stackoverflow.com/questions/7943802/how-to-draw-a-section-header-in-android-listview-just-like-the-ioss-uitableview)

# ruby-on-rails-3 - Rails & Twilio：存储从 Twilio 收到的文本时接收 nil

> ID：11084735
> 
> 赞同：0
> 
> 时间：2012-06-18T14:14:32.653
> 
> 标签：ruby-on-rails-3, post, twilio

我已经在我的 Twilio 帐户中设置了请求 URL，以便将其 POST 到：myurl.com/receivetext。它似乎已成功发布，因为当我使用 Heroku 控制台检查数据库时，我看到以下内容：

帖子 ID：5，正文：nil，来自：nil，created_at：“2012-06-14 17:28:01”，updated_at：“2012-06-14 17:28:01”

为什么它从身体和属性中接收 nil ？我无法弄清楚我做错了什么！创建和更新的 at 存储成功，但我关心的两个属性继续存储为 nil。

这是接收来自 Twilio 的 Post 请求的 Receive Text 控制器：

```
class ReceiveTextController < ApplicationController
  def index
    @post=Post.create!(body: params[:Body], from: params[:From])
  end
end 
```

编辑：当我转储参数时，我收到以下信息： "{\"controller\"=>\"receive_text\", \"action\"=>\"index\"}"

我通过将以下内容插入到我的 ReceiveText 控制器中来实现这一点。@params = Post.create!(body: params.inspect, from: "Dumping Params") 然后打开 Heroku 控制台以查找带有 from = "Dumping Params" 的数据库条目。

我使用以下命令 curl -X POST myurl.com/receivetext route -d 'AccountSid=AC123&From=%2B19252411234' 模拟了带有 curl 的 Twilio 请求

我再次检查了生产数据库，发现在获取 FROM 属性时 curl 请求确实有效。它存储了以下内容：

params.inspect 返回 "{\"AccountSid\"=>\"AC123\", \"From\"=>\"+19252411234\", \"co..."

我收到一条评论说：“只要 twilio 使用相同的方法（GET/POST）访问相同的 URL，它也应该填充 params 数组”我不知道如何使这个评论可行。任何帮助将不胜感激！我对rails很陌生。

这是我的数据库迁移（我将两个属性都设置为字符串。我尝试将其设置为文本，但也没有用）：

```
 class CreatePosts < ActiveRecord::Migration
   def change
    create_table :posts do |t|
    t.string :body
    t.string :from

    t.timestamps
   end
  end
 end 
```

这是我的帖子模型：

```
 class Post < ActiveRecord::Base
   attr_accessible :body, :from
 end 
```

路线（一切似乎都很好）：

```
 MovieApp::Application.routes.draw do
  get "receive_text/index"
  get "pages/home"
  get "send_text/send_text_message"

  root to: 'pages#home'

  match '/receivetext', to: 'receive_text#index'
  match '/pages/home', to: 'pages#home'
  match '/sendtext', to: 'send_text#send_text_message'
 end 
```

这是我的gemfile（以防有帮助）

```
 source 'https://rubygems.org'

  gem 'rails', '3.2.3'
  gem 'badfruit'
  gem 'twilio-ruby'
  gem 'logger'
  gem 'jquery-rails'

 group :production do
  gem 'pg'
 end

 group :development, :test do
  gem 'sqlite3'
 end

 group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:12:11.083

您是否尝试过将此`create`操作称为[via`POST`](https://www.twilio.com/docs/api/twiml/sms/twilio_request)？

```
class ReceiveTextController < ApplicationController
  def create
    @post = Post.create!(body: params[:Body], from: params[:From])
  end
end 
```

在你的`routes.rb`：

```
post "receive_text/create" 
```

# android - 意图如何在内部工作？

> ID：11084738
> 
> 赞同：15
> 
> 时间：2012-06-18T14:14:54.277
> 
> 标签：android, android-intent

我开发了一个应用程序并执行了一些测试。该测试包括将数据从一个后台服务发送到另一后台服务。在传输速率较低（4 次意图/秒）时接收到所有数据。但是，当我提高传输速率（8 和 12 次意图/秒）时，目标服务未接收到一些数据（通常为 2-3%）。

所有意图都被广播并且服务在本地运行。

谁能告诉我，操作系统如何处理意图和整个机制的工作原理，以便找出接收者未收到数据的原因？

此致，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:14:47.793

以下是相关方法（您可以看到从 ContextImpl.broadcastIntent() 方法调用的第一个方法，请参阅[Force's answer](https://stackoverflow.com/a/11203892/375929)中的链接）：

*   [ActivityManagerService.broadcastIntent()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/com/android/server/am/ActivityManagerService.java#ActivityManagerService.broadcastIntent%28android.app.IApplicationThread%2Candroid.content.Intent%2Cjava.lang.String%2Candroid.content.IIntentReceiver%2Cint%2Cjava.lang.String%2Candroid.os.Bundle%2Cjava.lang.String%2Cboolean%2Cboolean%29)
*   进而调用[ActivityManagerService.broadcastIntentLocked()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/com/android/server/am/ActivityManagerService.java#ActivityManagerService.broadcastIntentLocked%28com.android.server.am.ProcessRecord,java.lang.String,android.content.Intent,java.lang.String,android.content.IIntentReceiver,int,java.lang.String,android.os.Bundle,java.lang.String,boolean,boolean,int,int%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:57:17.453

首先，我宁愿建议绑定服务，然后使用 Handlers for IPC。一个很好的例子可以在这里找到：http: [//developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)这更快更可靠。

关于 Intents 如何在内部工作，您可以查看源代码：[https ://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ContextImpl.java#L893](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/ContextImpl.java#L893)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:50:38.733

~~一个可能的原因是 Android 进程间通信是同步的。在服务器进程的应答期间，调用客户端进程被阻塞。您的带有计时器的服务会在（非常短的）时间段内被阻止，这可能会导致您观察到的行为。~~

资料来源：[Android Binder - Thorsten Schreiber 的 Android 进程间通信](http://www.nds.rub.de/media/attachments/files/2012/03/binder.pdf)，第 11 - 13 页。

**编辑**：我一直公布答案，因为 Chris Stratton 和 João Nunes 的评论很有价值。

# jquery - 带有 jQ uery 和溢出 div 的 ScrollTop

> ID：11084739
> 
> 赞同：3
> 
> 时间：2012-06-18T14:14:58.020
> 
> 标签：jquery, overflow, scrollto

我有一个问题，试图`scrollTo`在一个 div 中创建一个溢出。

我在菜单中创建了五个部分和五个链接。当我单击菜单中的链接时，我希望它是正确的 div。

我所做的内容链接：http: [//jsbin.com/adagid/](http://jsbin.com/adagid/)

有时它显示正确（当您直接单击第一个或最后一个链接时），但有时显示的内容是内容的中间。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:43:29.443

由于该部分的位置随每次滚动而变化，因此您希望`+=`在动画属性上使用。

检查这个小提琴。我还更改了`bind`to `on`，而不是尝试拆分类名来查找该部分，而是使用了数据属性。

[http://jsfiddle.net/KvQ7W/](http://jsfiddle.net/KvQ7W/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:38:57.477

您需要减去 .contents 的 scrollTop() 以获得正确的位置

[http://jsfiddle.net/estevao_lucas/SdUVd/](http://jsfiddle.net/estevao_lucas/SdUVd/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T14:34:11.887

更新了您的代码（克隆副本）：http: [//jsbin.com/etexul](http://jsbin.com/etexul)

请注意，您需要考虑容器的当前滚动...

```
 var scrollTop = jQuery('#' + gethash).offset().top + jQuery('.content').scrollTop() - 25; 
```

25 由于您在容器上使用的边距

# java - 从 openOffice 或 Microsoft Office 检查葡萄牙语语法的 Java API

> ID：11084742
> 
> 赞同：3
> 
> 时间：2012-06-18T14:15:15.650
> 
> 标签：java, openoffice.org, languagetool

我正在巴西从事一个记者项目，因此我需要找到一个能够检查 Open Office 或 Microsoft word 文档中的拼写和语法文档的 Java API。我在谷歌上做了一些研究，发现了一些很酷的 API，`LanguageTools`但我需要的是一个适用于葡萄牙语 - 巴西的 API。我能够使用`UNO`API 和 Hunspell 开发检查拼写，但我无法开发语法检查。

我能找到的唯一语法检查是`CoGroo`，但它不是 API，只是 Open Office 文档的扩展。

这是一个非常重要的项目，所以如果有人能帮助我解决这种情况，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:29:40.477

1.  [Hunspell 是 LibreOffice/OpenOffice http://en.wikipedia.org/wiki/Hunspell](http://en.wikipedia.org/wiki/Hunspell)中的开源拼写检查器
2.  Hunspell 的 Java 绑定[https://code.google.com/p/hunspell4eclipse/source/browse/#svn%2Ftrunk%2Fcom.lorands.hunspell4eclipse.hunspelljna](https://code.google.com/p/hunspell4eclipse/source/browse/#svn%2Ftrunk%2Fcom.lorands.hunspell4eclipse.hunspelljna)
3.  另一个 Java 绑定（以防万一）[http://dren.dk/hunspell.html](http://dren.dk/hunspell.html)
4.  Hunspell 的字典[http://wiki.services.openoffice.org/wiki/Dictionaries](http://wiki.services.openoffice.org/wiki/Dictionaries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T13:05:18.037

您可能希望将自己的用户定义规则添加到 Languagetool，以了解葡萄牙语和巴西葡萄牙语之间的差异。Languagetool 社区可能也非常欢迎此输入以将其添加到 language-modules/pt 源代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:50:08.300

CoGroo 扩展名 (*.oxt) 只是一个 ZIP 文件，您可以将其重命名为 *.zip，解压缩它会找到几个 JAR 文件。因此，您很有可能可以将它用作 Java 的 API。

# vba - 在 PowerPoint 2007 中将宏保存为插件

> ID：11084747
> 
> 赞同：2
> 
> 时间：2012-06-18T14:15:36.383
> 
> 标签：vba, add-in, powerpoint, powerpoint-2007

我有一个关于 PowerPoint 2007 中的插件的问题。

是否可以将宏保存为插件，然后在所有 PP 演示文稿中将其用作按钮？我知道这在 Excel 中是可能的……但是 PowerPoint 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:42:18.467

是的。演示文稿应包括您想要提供的任何宏以及一些用于创建任何需要的按钮/工具栏以调用宏的代码。通常这将进入 Auto_Open 子例程（每当加载项加载时都会自动触发）。

我的 PPT FAQ 网站上的这个页面解释了如何以与所有当前版本的 PPT/Windows 兼容的方式执行此操作：

[使用运行宏的工具栏创建加载项](http://www.pptfaq.com/FAQ00031_Create_an_ADD-IN_with_TOOLBARS_that_run_macros.htm)

它将创建出现在 PPT 2007 及更高版本中的加载项选项卡上的工具栏/按钮。
如果你想在 PPT 功能区上创建按钮，它会变得有点复杂。

# sql-server - 如何从现有数据库生成模式

> ID：11084750
> 
> 赞同：3
> 
> 时间：2012-06-18T14:15:49.223
> 
> 标签：sql-server, database

我正在使用 microsoft sql server management studio 2008，我想创建一个全新的数据库，它具有我当前数据库的所有相同质量，但没有我当前数据库的数据。

例如，user.dbo 中有 12 个用户，其中包含密码和其他信息。我只想要那个数据库的概要而不想要用户。

有人可以给我正确的途径来获取该大纲，然后将其应用于新数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:21:38.410

1.  在管理工作室中，右键单击要编写脚本的数据库。选择任务 > 生成脚本并从那里按照向导进行操作。

2.  然后右键单击 Databases 和 New Database 创建一个新数据库

3.  然后右键单击新数据库和新查询，在此窗口中，通过步骤 1 的内容，然后单击菜单执行（或 F5）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T10:34:32.947

您可以按照以下步骤

转到数据库>右键单击数据库>所有任务。生成 SQL 脚本> 1.全部显示（在一般选项卡下）>选择脚本你想要的 2.在格式选项卡下选择所需的格式脚本 3.在选项选项卡下选择所需的安全脚本和表脚本 4.然后只需单击确定，在一个脚本中只有创建数据库、数据库用户、表、存储过程、索引、PK、Fk，然后我们只需要在我们希望创建新的 SQL 查询分析器上运行此脚本空数据库

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-11T15:37:19.407

这篇文章的标题不能很好地代表这个问题。例如，您可以从现有数据库在现有数据库上创建模式。

# java - 来自 JFrame 的 JDialog，为什么我的听众不能工作？

> ID：11084752
> 
> 赞同：3
> 
> 时间：2012-06-18T14:15:53.043
> 
> 标签：java, swing, twitter, keylistener, jdialog

大约一周前，我开始研究选项类型 GUI。我从一个 JFrame 开始，并通过各种按钮和按键侦听器添加了相当多的功能。我已经完成了所有这些工作，并决定我希望窗口是模态的。我将 JFrame 转换为 JDialog，虽然它仍然不是模态的，但所有功能仍然存在，但是当我将其设置为模态（真或假）时，我失去了听众的所有功能。知道什么是错的吗？

我正在努力将我的 SVN 上传到 GitHub。如果您需要查看代码，只需发表评论并给我几分钟。提前致谢。

```
package main;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.util.ArrayList;
import javax.swing.*;
import Twitter.SearchTweets;

public class OptionsGUI {

// auto generated
private static final long serialVersionUID = 1L;

private JDialog f;
private JPanel buttonPanel;
private JPanel optionsLabelPanel;
private JPanel optionsSetPanel;

private JLabel sortLocationLabel;
private JLabel timeoutLabel;
private JLabel maxTweetsLabel;
private JLabel keywordsLabel;   
private JLabel currentKeywordsLabel;

private JButton add;
private JButton remove;
private JButton save;
private JButton cancel; 

private JCheckBox sortLocationField;
private JTextField setTimeoutField;
private JTextField setMaxTweetsField;
private JTextField addKeywordField;
private JComboBox currentKeywordsField;

public OptionsGUI() {
    f = new JDialog(f, "Options");
    buttonPanel = new JPanel();
    optionsLabelPanel = new JPanel();
    optionsSetPanel = new JPanel();

    sortLocationLabel = new JLabel("Sort by location: ");
    sortLocationLabel.setHorizontalAlignment(JLabel.RIGHT);
    timeoutLabel = new JLabel("Timeout (in seconds): ");
    timeoutLabel.setHorizontalAlignment(JLabel.RIGHT);
    maxTweetsLabel = new JLabel("Maximum Tweets to show: ");
    maxTweetsLabel.setHorizontalAlignment(JLabel.RIGHT);
    keywordsLabel = new JLabel("Keyword to add: ");
    keywordsLabel.setHorizontalAlignment(JLabel.RIGHT);
    currentKeywordsLabel = new JLabel("Current keywords: ");
    currentKeywordsLabel.setHorizontalAlignment(JLabel.RIGHT);

    add = new JButton("Add Keyword");
    remove = new JButton("Remove Keyword");
    save = new JButton("Save");
    cancel = new JButton("Cancel");

    sortLocationField = new JCheckBox();
    setTimeoutField = new JTextField(10);
    setMaxTweetsField = new JTextField(10);
    addKeywordField = new JTextField(10);
    currentKeywordsField = new JComboBox();
    currentKeywordsField.setEditable(false);

    buttonPanel.setLayout(new GridLayout(2,2));
    buttonPanel.add(add);
    buttonPanel.add(remove);
    buttonPanel.add(save);
    buttonPanel.add(cancel);

    optionsLabelPanel.setLayout(new GridLayout(5,1));
    optionsLabelPanel.add(sortLocationLabel);
    optionsLabelPanel.add(timeoutLabel);
    optionsLabelPanel.add(maxTweetsLabel);
    optionsLabelPanel.add(keywordsLabel);
    optionsLabelPanel.add(currentKeywordsLabel);

    optionsSetPanel.setLayout(new GridLayout(5,1));
    optionsSetPanel.add(sortLocationField);
    optionsSetPanel.add(setTimeoutField);
    optionsSetPanel.add(setMaxTweetsField);
    optionsSetPanel.add(addKeywordField);
    optionsSetPanel.add(currentKeywordsField);

    sortLocationField.setSelected(BasicGUI.isSortedByLocation());
    setTimeoutField.setText("" + SearchTweets.getTimeout());
    setMaxTweetsField.setText("" + BasicGUI.getMaxTweets());
    if (SearchTweets.getKeywords().size() > 0) {
        for (String keyword: SearchTweets.getKeywords()) {
            currentKeywordsField.addItem(keyword);
        }
    }
    else
        currentKeywordsField.addItem("(none)");

    f.getContentPane().setLayout(new BorderLayout());
    f.getContentPane().add(buttonPanel, BorderLayout.SOUTH);
    f.getContentPane().add(optionsLabelPanel, BorderLayout.WEST);
    f.getContentPane().add(optionsSetPanel, BorderLayout.CENTER);
    f.setBounds(50, 50, 300, 235);
    f.setResizable(false);
    f.setAlwaysOnTop(true);
    f.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
    f.setVisible(true);
    addKeywordField.requestFocus();

    add.addActionListener(new ButtonListener());
    addKeywordField.addKeyListener(new KeyChecker());
    remove.addActionListener(new ButtonListener());
    save.addActionListener(new ButtonListener());
    cancel.addActionListener(new ButtonListener());
}

public class ButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == add) {
            String newKeyword  = addKeywordField.getText();
            if (newKeyword != null && newKeyword.length() > 0) {
                boolean duplicate = false;
                ArrayList<String> keywords = SearchTweets.getKeywords();
                for (int i = 0; i < keywords.size(); i++) {
                    if (keywords.get(i).equalsIgnoreCase(newKeyword)) {
                        duplicate = true;
                        break;
                    }
                }
                addKeywordField.transferFocus();
                if (duplicate ==  false) {
                    if (keywords.size() == 0)
                        currentKeywordsField.removeItem("(none)");
                    currentKeywordsField.addItem(addKeywordField.getText());
                    currentKeywordsField.setSelectedItem(addKeywordField.getText());
                }
                else {
                    JOptionPane.showMessageDialog(null, "Please enter a keyword that is not already in the list.", "Duplicate Keyword", JOptionPane.ERROR_MESSAGE);
                    f.toFront();
                    addKeywordField.requestFocus();
                    addKeywordField.setText("");
                }
            }
            else {
                JOptionPane.showMessageDialog(null, "Please enter a keyword before clicking \"Add\".", "Empty Field", JOptionPane.ERROR_MESSAGE);
                f.toFront();
                addKeywordField.requestFocus();
            }
            f.toFront();
            addKeywordField.requestFocus();
            addKeywordField.setText("");
        }

        else if (e.getSource() == remove) {
            if (currentKeywordsField.getSelectedItem() != null) {
                if (!(((String)currentKeywordsField.getSelectedItem()).equals("(none)"))) {
                    currentKeywordsField.removeItem(currentKeywordsField.getSelectedItem());
                    if (currentKeywordsField.getItemCount() == 0) {
                        currentKeywordsField.addItem("(none)");
                    }
                }
                else
                    JOptionPane.showMessageDialog(null, "No keywords have been entered yet.", "Empty List", JOptionPane.ERROR_MESSAGE);
                f.toFront();
            }
        }

        else if (e.getSource() == save) {

            boolean inputFail = false;
            //input checking try block
            try {

                int tempTimeout = Integer.parseInt(setTimeoutField.getText());
                if (tempTimeout < 0)
                    throw new Exception();

                int tempMaxTweets = Integer.parseInt(setMaxTweetsField.getText());
                if (tempMaxTweets < 0)
                    throw new Exception();

                BasicGUI.setSortedByLocation(sortLocationField.isSelected());
                SearchTweets.setTimeout(tempTimeout);
                BasicGUI.setMaxTweets(tempMaxTweets);

            } catch (NumberFormatException error) {
                inputFail = true;
                JOptionPane.showMessageDialog(null, "Please insure that Timeout and Maximum\nTweets are both integers.", "Invalid Input", JOptionPane.ERROR_MESSAGE);
                f.toFront();
            } catch (Exception error) {
                inputFail = true;
                JOptionPane.showMessageDialog(null, "Please be sure to enter a nonzero\ninteger for Timeout and Maximum Tweets.\n0 for either insures no timeout or a\nmaximum amount of tweets shown.", "Invalid Input", JOptionPane.ERROR_MESSAGE);
                if (Integer.parseInt(setTimeoutField.getText()) < 0) 
                    setTimeoutField.setText("" + SearchTweets.getTimeout());
                if ( Integer.parseInt(setMaxTweetsField.getText()) < 0)
                    setMaxTweetsField.setText("" + BasicGUI.getMaxTweets());
                f.toFront();
            } 

            if (inputFail == false) {
                SearchTweets.deleteKeywords();
                for (int i = 0; i < currentKeywordsField.getItemCount(); i++) {
                    SearchTweets.addKeyword((String)currentKeywordsField.getItemAt(i));
                }
                BasicGUI.setOptionsOpen(false);
                f.dispose();
            }
            BasicGUI.setSettingsPaneValues();
        }

        else if (e.getSource() == cancel) {
            BasicGUI.setOptionsOpen(false);
            f.dispose();
        }

        else {
            JOptionPane.showMessageDialog(null, "Error: Button not recognized");
        }

    }

}

public class KeyChecker implements KeyListener {
    public void keyPressed(KeyEvent e) {
        if (e.getKeyCode() == KeyEvent.VK_ENTER) {
                add.doClick();
        }
    }

    public void keyReleased(KeyEvent arg0) {
        //ignore
    }

    public void keyTyped(KeyEvent arg0) {
        //ignore
    }
}

public class ListenCloseWdw extends WindowAdapter{
    public void windowClosing(WindowEvent e){
        BasicGUI.setOptionsOpen(false);
        f.dispose();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:18:18.317

不要`KeyListener`用于这个。添加一个`ActionListener`到您的文本字段，如下所示。`Enter`密钥已绑定到`Action`接受输入文本的。

另请参阅[*如何使用操作*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和[*如何使用键绑定*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

/** @see http://stackoverflow.com/a/11085850/230513 */
public class EnterTest extends JPanel {

    public EnterTest() {
        super(new GridLayout(0, 1));
        final JButton add = new JButton(new AbstractAction("Add") {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("Add");
            }
        });
        JTextField addKeywordField = new JTextField("Press enter.");
        addKeywordField.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                add.doClick();
            }
        });
        this.add(addKeywordField);
        this.add(add);
    }

    private void display() {
        JFrame f = new JFrame("EnterTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new EnterTest().display();
            }
        });
    }
} 
```

# android - 避免 NetworkOnMainThreadException

> ID：11084755
> 
> 赞同：1
> 
> 时间：2012-06-18T14:16:07.997
> 
> 标签：android, multithreading, exception, networking, networkonmainthread

我了解到 GUI 线程上不允许进行网络操作。我可以。但是为什么在对话框按钮单击回调上使用此代码仍然会产生`NetworkOnMainThreadException`？

```
new Thread(new Runnable() {                         
  @Override
  public void run() {
    heavyAndTimeConsumingOperation();
  }
}).run(); 
```

也许我不会以这种方式产生新线程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T14:18:00.693

你需要打电话`.start()`，不是`.run()`。

`.run()`是您覆盖的实际执行的方法。
`.start()`是系统提供的实际启动线程的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T14:22:16.863

SLaks 是对的，但对于 Android 来说，还有一种更微妙的方式：[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

```
new AsyncTask<Void, Void, Void>(){

    @Override
    protected Void doInBackground(Void... params){
        //Do heavy stuff
    }

    @Override
    protected void onPostExecute(Void result){
        //Do UI stuff after heavy stuff
    }
}.execute(); 
```

# sql - 加快 SQL Server WHERE x LIKE '%blah%'

> ID：11084756
> 
> 赞同：2
> 
> 时间：2012-06-18T14:16:08.823
> 
> 标签：sql, sql-server, sql-like

> **可能重复：**
> [SQL Server：如何优化“like”查询？](https://stackoverflow.com/questions/2532075/sql-server-how-to-optimize-like-queries)

我必须在 WHERE 子句如下所示的数据库上进行搜索：

```
SELECT * FROM table WHERE column LIKE '%blah%' 
```

这会按预期进行表扫描，这使其变慢。是否有不同的方法来编写查询以使其更快？也许我可以在上面放一个索引？其他想法？

# sass - Sass .scss：嵌套和多个类？

> ID：11084757
> 
> 赞同：418
> 
> 时间：2012-06-18T14:16:09.487
> 
> 标签：sass

我正在为我当前的项目使用 Sass (.scss)。

以下示例：

**HTML**

```
<div class="container desc">
    <div class="hello">
        Hello World
    </div>
</div> 
```

**SCSS**

```
.container {
    background:red;
    color:white;

    .hello {
        padding-left:50px;
    }
} 
```

这很好用。

我可以在使用嵌套样式时处理多个类吗？

在上面的示例中，我正在谈论这个：

**CSS**

```
.container.desc {
    background:blue;
} 
```

在这种情况下，一切通常`div.container`都是蓝色的。`red``div.container.desc`

`container`我怎样才能用 Sass把它嵌套在里面？

* * *

## 回答 #1

> 赞同：700
> 
> 时间：2012-06-18T14:18:41.247

可以使用[父选择器引用](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#parent-selector) `&`，编译后会被父选择器替换：

对于您的示例：

```
.container {
    background:red;
    &.desc{
       background:blue;
    }
}

/* compiles to: */
.container {
    background: red;
}
.container.desc {
    background: blue;
} 
```

将`&`完全解析，因此如果您的父选择器本身嵌套，则嵌套将在替换`&`.

这种表示法最常用于编写[伪元素和 -classes](https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes)：

```
.element{
    &:hover{ ... }
    &:nth-child(1){ ... }
} 
```

但是，您几乎可以将^*`&`放置在您喜欢的任何位置，因此也可以进行以下操作：

```
.container {
    background:red;
    #id &{
       background:blue;
    }
}

/* compiles to: */
.container {
    background: red;
}
#id .container {
    background: blue;
} 
```

但是请注意，这会以某种方式破坏您的嵌套结构，因此可能会增加在样式表中查找特定规则的工作量。

*：在 . 前面不允许使用除空格以外的其他字符`&`。所以你不能直接连接`selector`+ `&`-`#id&`会引发错误。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-11-09T07:09:56.710

如果是这种情况，我认为您需要使用更好的方法来创建类名或类名约定。例如，就像您说的那样，您希望`.container`类根据特定用途或外观具有不同的颜色。你可以这样做：

**SCSS**

```
.container {
  background: red;

  &--desc {
    background: blue;
  }

  // or you can do a more specific name
  &--blue {
    background: blue;
  }

  &--red {
    background: red;
  }
} 
```

**CSS**

```
.container {
  background: red;
}

.container--desc {
  background: blue;
}

.container--blue {
  background: blue;
}

.container--red {
  background: red;
} 
```

> 上面的代码基于类命名约定中的 BEM Methodology。您可以查看此链接：[BEM — Block Element Modifier Methodology](http://getbem.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-26T19:49:28.763

克里斯托夫的回答是完美的。但是，有时您可能想上更多的课而不是一门。在这种情况下，您可以尝试使用.css`@at-root`和`#{}`css 功能，这将使两个根类彼此相邻`&`。

这不起作用（由于`nothing before &`规则）：

```
container {
    background:red;
    color:white;

    .desc& {
      background: blue;
    }

    .hello {
        padding-left:50px;
    }
}
```

但这会（使用`@at-root plus #{&}`）：

```
container {
    background:red;
    color:white;

    @at-root .desc#{&} {
      background: blue;
    }

    .hello {
        padding-left:50px;
    }
}
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-20T15:00:10.247

采用`&`

**SCSS**

```
.container {
    background:red;
    color:white;

    &.hello {
        padding-left:50px;
    }
} 
```

[https://sass-lang.com/documentation/style-rules/parent-selector](https://sass-lang.com/documentation/style-rules/parent-selector)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-11T10:51:26.043

除了 Cristoph 的回答之外，如果您想在声明中更具体，您可以引用容器类组件的所有子组件。这可以通过以下方式完成：

```
.container {
// ...
  #{&}.hello {
     padding-left: 50px;
  }
} 
```

这编译为：

```
.container .container.hello {
   padding-left: 50px;
} 
```

我希望这对你有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-07T20:27:19.787

这对我有用

```
<div class="container">
  <div class="desc">
    desc
  </div>
  <div class="asc">
    asc
  </div>
</div>

.container{
  &.desc {
    background: blue;
  }
  &.asc {
    background: red;
  }
} 
```

# c++ - 与内存映射、c++、ERROR_NOT_ENOUGH_MEMORY 共享结构

> ID：11084763
> 
> 赞同：1
> 
> 时间：2012-06-18T14:16:28.730
> 
> 标签：c++, struct, shared-memory

我试图让我的软件通过内存映射与预先存在的第三方软件进行通信。我被告知将结构写入由其他软件创建的内存映射文件。我设法打开了该文件，并且它肯定是正确创建的，但是当我尝试映射文件时出现错误 8 (ERROR_NOT_ENOUGH_MEMORY)。

```
#include "stdafx.h"
#include <Windows.h>

struct MMFSTRUCT
{
    unsigned char flags;
    DWORD   packetTime;
    float   telemetryMatrix[16];
    float   velocity[3];
    float   accel[3];
};

int _tmain(int argc, _TCHAR* argv[])
{
    DWORD Time = 0;
    HANDLE hMapFile;
    void* pBuf;
    TCHAR szName[]=TEXT("$FILE$");

    hMapFile = OpenFileMapping(
                   FILE_MAP_ALL_ACCESS,   // read/write access
                   FALSE,                 // do not inherit the name
                   szName);               // name of mapping object
    if (hMapFile == NULL)
    {
        _tprintf(TEXT("Could not open file mapping object (%d).\n"),
               GetLastError());
        return 1;
    }
    while(true)
    {
        pBuf = MapViewOfFile(hMapFile,   // handle to map object
                            FILE_MAP_WRITE, // read/write permission
                            0,
                            0,
                            0);
        if (pBuf == NULL)
        {
            _tprintf(TEXT("Could not map view of file (%d).\n"),
                   GetLastError());
            CloseHandle(hMapFile);
            return 1;
        }
        MMFSTRUCT test_data;
        // define variables here
        CopyMemory(pBuf, &test_data,  sizeof(MMFSTRUCT));
    }
    // etc
    return 0;
} 
```

MSDN 说，如果创建共享内存的程序未将共享内存设置为增长，则可能会发生这种情况，我应该尝试使用这些函数来设置指针大小：

```
SetFilePointer(hMapFile, sizeof(MMFSTRUCT) , NULL, FILE_CURRENT);
SetEndOfFile(hMapFile); 
```

但我仍然收到错误 8，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:04:17.387

我认为循环内的 MapViewOfFile 没有什么意义。那可能是笔误？除此之外，您应该传递映射到 MapViewOfFile 的内存大小，因为您的文件可能是空的：

```
if (hMapFile == NULL)
{
    _tprintf(TEXT("Could not open file mapping object (%d).\n"),
           GetLastError());
    return 1;
}

pBuf = MapViewOfFile(hMapFile,   // handle to map object
                        FILE_MAP_WRITE, // read/write permission
                        0,
                        0,
                        sizeof(MMFSTRUCT));
if (pBuf == NULL)
{
        _tprintf(TEXT("Could not map view of file (%d).\n"),
               GetLastError());
        CloseHandle(hMapFile);
        return 1;
 }
 MMFSTRUCT test_data;
 // define variables here
 CopyMemory(pBuf, &test_data,  sizeof(MMFSTRUCT));

 UnmapViewOfFile(pBuf);
 CloseHandle(hMapFile); 
```

# php - 有没有办法从 PHP 代码加载的文件中解析 PHP？

> ID：11084764
> 
> 赞同：2
> 
> 时间：2012-06-18T14:16:36.977
> 
> 标签：php, html

我正在从外部文本文件加载 HTML/PHP 代码

```
$f = fopen($filename, "r");
while ($line = fgets($f, 4096)) 
{
  print $line;
} 
```

有没有办法让服务器解析这个文件中的 PHP 代码？我目前只`<?php echo("test"); ?>`在外部文件中使用一个简单的（保存在`$filename`）来测试它是否有效。我尝试在主文件中使用`ob_start()`and `ob_end_flush()`，但无济于事。我对其他解决方案持开放态度，但如果可能的话，我想保持文件的分离并仅使用 PHP 来简化网站的未来升级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:18:56.343

看起来你正在寻找这个： http: [//php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)

但请牢记警告：

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

如果有的话，尝试找到不同的解决方案吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:21:47.610

您可以使用`file_get_contents($link)`来获取文件的输出。

查看[PHP 手册中的 file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:09:40.443

以下将做你需要的。

如果您在模板类型的场景中使用它，即，想要将数据显示到 PHP 文件并回显结果，请使用 ob_start 和 get_clean 捕获输出并将结果存储在变量中：

```
ob_start();
eval('?>'.file_get_contents($file).'<?');
$result = ob_get_clean();

echo $result; 
```

否则，一个简单的：

```
eval('?>'.file_get_contents($file).'<?'); 
```

将工作。

**注意**： eval() 应始终谨慎使用，如果可能，完全不要出于安全和性能问题。

# java-me - 使用播放器切换的 Mp3 流式传输

> ID：11084766
> 
> 赞同：1
> 
> 时间：2012-06-18T14:16:40.890
> 
> 标签：java-me, midp, mmapi

我正在开发一个示例应用程序，它可以播放广播 mp3 流（为 S40 平台开发，CLDC 1.1，MIDP 2.0）。我正在使用两个播放器切换以继续播放。

我使用以下逻辑进行流式传输。

```
Buffer enough chunks
Start Player1
Wait Player1 to finish
Start Player2
Wait Player2 to finish
repeat... 2 
```

问题是，在玩家之间切换时，听众会感觉到 1 秒的沉默（间隙）。

我想知道是否可以无间隙地从服务器流式传输音频（在切换播放器时）？

这是我启动播放器的代码：

```
Player p = Manager.createPlayer(is, type);
p.addPlayerListener(playerListener);
p.realize();
p.prefetch(); 
```

`Player2`在完成之前预取`Player1`- 我为播放器创建了一个 FIFO 队列，当下载一个块时，我创建输入流 -> Player -> Realize() -> Prefetch() -> Push into the Queue。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T09:24:56.830

也有这个项目：mfradio.sourceforge.net 但不再维护，我没有让它在“后期”MIDP 设备（索尼 W995）上工作，我仍在使用另一个 android 设备。

您的开发在某处可用吗？

谢谢。

# php - 在 Datagrid 中过滤 jeasyui 组合框并显示文本而不是值

> ID：11084770
> 
> 赞同：0
> 
> 时间：2012-06-18T14:17:08.147
> 
> 标签：php, jquery, mysql, jquery-ui

我正在使用 jquery easy ui crud datagrid，并且需要一个用于其中一列的组合框。我已经填充了组合框，但现在如果需要更改项目，我需要能够过滤该框。

我的问题的第 2 部分是我无法将组合中的值从 id 设置为框中的实际文本，例如。ID是15488，即林肯公园。我希望它显示林肯公园，而不是 ID

组合框的源数据是一个 php 脚本，选择所有艺术家并将其放入一个数组中，然后将其编码为 json

这是我的数据网格代码

```
<table id="dg" title="Tracklisting" style="width:1000px;height:250px"
        toolbar="#toolbar" pagination="true"
        rownumbers="true"  singleSelect="true">
    <thead>
        <tr>
            <th field="TRACK NO" width="50" editor="{type:'validatebox',options:{required:true}}">ID</th>
            <th field="DISC NO" width="50" editor="{type:'validatebox',options:{required:true}}">CAT No</th>
            <th field="TRACKTITLE" width="50" editor="{type:'validatebox',options:{required:true}}">Track No</th>
            <th field="VERSION" width="50" editor="text">Title</th>
            <th field="ARTIST_ID_1" width="100"  editor="{type:'combobox',options:
{valueField:'ID',textField:'ARTIST',url:'get_artist.php',required:true}}">Artist</th>
        </tr>
    </thead>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:25:20.517

回答你的第二个问题：

`formatter="JS_function"`

将调用此 javascript 函数来显示网格中所选值的文本。请详细解释第一个问题。

# html - FireFox 中的定位问题

> ID：11084772
> 
> 赞同：-1
> 
> 时间：2012-06-18T14:17:18.473
> 
> 标签：html, css, firefox

请原谅这个简单的问题，我遇到的问题可能是由于睡眠不足。我的 Firefox 浏览器出现定位问题。由于某种原因，底部的图像行在 FF 中无法正确显示，但它们在 Chrome 中[。](http://iamnatesmithen.com/jukebox/dancers.php)有谁知道是什么导致了这个问题，我想知道这个以供将来参考..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:23:36.103

使用 clearfix - 清除浮动。

清除浮动 - 我的意思是[**Quirks Help**](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:26:57.190

如果我错了，请纠正我，但是您的 CSS 中的任何地方都没有定义配置文件框？当我查看 Firefox 和 Chrome 时，每个配置文件框的计算宽度为 770 像素，这可能是问题的一部分，因为这似乎是容器的整个宽度。正确定义配置文件框的宽度/高度应该可以解决您的问题。

# blackberry - 如何使用 RIM5.0 将 PIM 联系人的照片检索为位图？

> ID：11084775
> 
> 赞同：0
> 
> 时间：2012-06-18T14:17:30.810
> 
> 标签：blackberry, bitmap, contacts, pim, rim-5.0

我想检索联系人的图像并将它们显示在`BitmapField`s.
所以我正在使用以下代码从联系人中收集位图对象：

```
Vector bitmaps = new Vector();
BlackBerryContactList contactList = (BlackBerryContactList)BlackBerryPIM.getInstance().openPIMList(BlackBerryPIM.CONTACT_LIST, BlackBerryPIM.READ_WRITE);
Enumeration contactListItems = contactList.items();
int counter = 0;
while (contactListItems.hasMoreElements()) {
    BlackBerryContact contact = (BlackBerryContact)contactListItems.nextElement();
    byte[] imageBytes = contact.getBinary(BlackBerryContact.PHOTO, counter);
    EncodedImage encodedImage = EncodedImage.createEncodedImage(imageBytes, 0, imageBytes.length);
    Bitmap bitmap = encodedImage.getBitmap();
    bitmaps.addElement(bitmap);
    counter++;
} 
```

`java.lang.IllegalArumentException`不幸的是，代码在这个方法中抛出了一个：

```
EncodedImage.createEncodedImage(imageBytes, 0, imageBytes.length); 
```

我应该如何将`byte[]`图像转换为`BitmapField`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:08:55.437

我为那些感兴趣的人找到了解决方案，从 PIM 检索到的图像是 Base64 编码的，应该先解码。这是正确的代码：

```
Vector bitmaps = new Vector();
BlackBerryContactList contactList = (BlackBerryContactList)BlackBerryPIM.getInstance().openPIMList(BlackBerryPIM.CONTACT_LIST, BlackBerryPIM.READ_WRITE);
Enumeration contactListItems = contactList.items();
while (contactListItems.hasMoreElements()) {
    BlackBerryContact contact = (BlackBerryContact)contactListItems.nextElement();
    byte[] imageBytesBase64 = contact.getBinary(BlackBerryContact.PHOTO, 0);
    byte[] imageBytes = Base64InputStream.decode(imageBytesBase64, 0, imageBytesBase64.length);
    EncodedImage encodedImage = EncodedImage.createEncodedImage(imageBytes, 0, imageBytes.length);
    Bitmap bitmap = encodedImage.getBitmap();
    bitmaps.addElement(bitmap);
} 
```

# eclipse - 是否有与 Visual Studio 片段等效的 Eclipse？

> ID：11084783
> 
> 赞同：3
> 
> 时间：2012-06-18T14:17:57.533
> 
> 标签：eclipse, visual-studio

是否有与 Visual Studio 片段等效的 Eclipse，如果有，它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:43:54.797

是的，有。

您可以选择 Window>Preferences 对话框访问现有的。然后导航到 Java > Editor > Templates 子树。

在那里你可以看到现有的。第一列是名称和激活码。例如，“main”模板在光标位置插入一个默认的主块。

您可以通过键入“main”并按“CTRL +空格”在编辑器中使用它。然后会显示一个弹出窗口，您可以选择所需的模板。

在上述对话框中，您既可以定义新模板，也可以随意编辑现有模板。

需要考虑的一件事是，内容辅助（CTRL+空格键组合）只有在光标位于第二列中指示的上下文内时才会带来适当的结果。

也就是说，例如，“while”模板仅在光标位于 Java 语句内时才有效，依此类推。

# perl - 如何避免awk中的转义字符

> ID：11084785
> 
> 赞同：1
> 
> 时间：2012-06-18T14:17:59.687
> 
> 标签：perl, shell, awk

我想这个问题与awk有关。我没有使用awk的经验。我尝试了很多东西，但我找不到任何解决方案。

实际上，我想逐行读取文件，然后用 perl 替换整行。

我简化了代码。我希望你能够明白。

```
new_line1=1234567
new_line2=1234/567

perl -pi -e "s/$new_line1/$new_line2/g" $FILE 
```

问题是当我使用时与`/`.

```
Number found where operator expected at -e line 1, near "s/1234567/1234/567"
syntax error at -e line 1, near "s/1234567/1234/567" 
```

因为 bash 假设`perl -pi -e "s/1234567/1234**/**567/g" $FILE`

我怎样才能避免它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:22:16.913

`/`如果您不想转义，请使用不同的分隔符：

```
perl -pi -e "s#$new_line1#$new_line2#g" $FILE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:54:48.843

既然你`awk`在标题中提到...

标准解决方案是使用不同的分隔符。不幸的是，在 awk 中，您不能做直观的事情并编写`\@pattern@`用作`@`分隔符，但您可以显式调用`match`：

```
awk 'match( $0, "'$new_line1'" ) { print "'$new_line2'"; next } 1' $FILE 
```

如果其中一个`new_line1`或`new_line2`包含一个`"`. 请注意，这不会就地编辑文件。（`perl -i`实际上，它也不会创建一个新文件。）

# vb.net - Vb.net 将值传递给类型 T 的构造函数

> ID：11084787
> 
> 赞同：0
> 
> 时间：2012-06-18T14:18:03.703
> 
> 标签：vb.net, reflection

我有这段代码来获取默认构造函数：

```
Public Function f(ByVal t As System.Type) As Object
    Return t.GetConstructor(New System.Type() {}).Invoke(New Object() {})
End Function 
```

我需要将值传递给构造函数

```
Public Function f(ByVal t As System.Type) As Object
    Return t.GetConstructor(New System.Type() {someInteger,someString,etc.etc}).Invoke(New Object() {}) 
End Function 
```

我也有 3 类 Type `T`，都有不同的参数构造函数。对我来说，让它具有通用性很重要，因为将来类型的类`T`可能会随着参数的减少或增加而增加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:23:16.677

对的，这是可能的。

但是，您将值放在`Type()`. 您需要指定构造函数的类型，以便它知道您要实际解析的构造函数，然后传递您希望的实际值`Invoke`：

```
Public Function f(ByVal t As System.Type) As Object
    Return t.GetConstructor(New System.Type() {GetType(Integer),GetType(String)}).Invoke(New Object() {someInteger, someString}) 
End Function 
```

# php - PHP 中跨服务器通信的一次性 CSRF 令牌生成和验证

> ID：11084795
> 
> 赞同：2
> 
> 时间：2012-06-18T14:18:35.710
> 
> 标签：php, token, csrf

我进行了很多搜索，试图找到适合我的目的的东西，但是大多数解决方案都围绕着与会话数据一起工作的 CSRF 令牌。我的目的需要“基于时间的”令牌进行跨服务器通信。

我`Server A`需要接收和验证通过 POST 发送给它的令牌`Server B`。令牌需要`Server B`通过使用密钥进行散列来生成。`Server A`必须验证相同。现在，问题是令牌需要限制为一次性使用（可能？）并且应该根据时间过期（比如 10 分钟的生命周期）。因为，这是跨服务器通信，我不能使用会话。

恐怕我不能使用数据库或会话来存储/验证令牌。任何代码示例都会有所帮助。

这在 PHP 环境中是必需的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:50:30.637

您可以做的是向令牌密钥添加时间戳，就像它创建时加上请求者 IP 一样，然后在您解密密钥时检查时间是否介于允许的时间或允许的 IP 地址之间。

固定IP的例子：

```
<?php
class csrf_check {

    const SALT = '_SECRET_';

    public function create_api_key()
    {
        return base64_encode($this->encrypt(time().'|'.$_SERVER['REMOTE_ADDR'])); // !change if you dont want IP check
    }

    public function check_api_key($key, $timeout = 5)
    {
        if (empty($key)) exit('Invalid Key');

        $keys = explode('|', $this->decrypt(base64_decode($key)));

        return (
            isset($key, $keys[0], $keys[1]) && 
            $keys[0] >= (time() - $timeout) && 
            $keys[1] == $_SERVER['REMOTE_ADDR'] // !change if you dont want IP check
        );
    }

    public function encrypt($string, $key = 'PrivateKey', $secret = 'SecretKey', $method = 'AES-256-CBC') {
        // hash
        $key = hash('sha256', $key);
        // create iv - encrypt method AES-256-CBC expects 16 bytes
        $iv = substr(hash('sha256', $secret), 0, 16);
        // encrypt
        $output = openssl_encrypt($string, $method, $key, 0, $iv);
        // encode
        return base64_encode($output);
    }

    public function decrypt($string, $key = 'PrivateKey', $secret = 'SecretKey', $method = 'AES-256-CBC') {
        // hash
        $key = hash('sha256', $key);
        // create iv - encrypt method AES-256-CBC expects 16 bytes
        $iv = substr(hash('sha256', $secret), 0, 16);
        // decode
        $string = base64_decode($string);
        // decrypt
        return openssl_decrypt($string, $method, $key, 0, $iv);
    }
}

$csrf = new csrf_check();

//start example 

$do = filter_input(INPUT_GET, 'do');
$key = filter_input(INPUT_GET, 'key');

switch ($do) {
    //example.com?do=get - a key for the request
    case "get": {
        $key = $csrf->create_api_key();
        echo '<a href="?do=check&key='.urlencode($key).'">Check Key ('.$key.')</a>';
    } break;

    //example.com?do=check - a key for the request
    case "check": {
        //key only lasts 30 secs & validate key passed
        //example.com?do=check&key=MEV6NXk4UjVRQXV5Qm1CMjBYa3RZZUhGd2M0YnFBUVF0ZkE5TFpNaElUTT0=

        echo 'Key ' . ($csrf->check_api_key($key, 30) ? 'valid' : 'invalid');
        echo '<br><a href="?do=get">Get new key</a>';
    } break;

    default: {
        echo '<a href="?do=get">Get Key</a>';
    } break;
} 
```

# javascript - JavaScript instanceof 运算符何时返回 true 应该为 false？

> ID：11084799
> 
> 赞同：2
> 
> 时间：2012-06-18T14:18:43.183
> 
> 标签：javascript, function, new-operator, prototype, instanceof

我正在开发一个 JavaScript 应用程序，并遇到了这种奇怪的行为。
谁能给我解释一下为什么

```
function BaseClass() {}
function ClassOne() { this.bar = "foo"; }
function ClassTwo() { this.foo = "bar"; }

var base = new BaseClass();
ClassOne.prototype = base;
ClassTwo.prototype = base;

var one = new ClassOne();
var two = new ClassTwo();
one instanceof ClassTwo && two instanceof ClassOne;
// The line above will return true, but i think it should return false,
// because obviously one is not an instance of ClassTwo! 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:24:24.953

两者都`one`具有`two`相同的原型（构造函数`BaseClass`）。`Object.getPrototypeOf(one) === Object.getPrototypeOf(two)`.

代替“回收” `new BaseClass`，`base`使用：

```
// var base = new BaseClass(); <-- No!
ClassOne.prototype = new BaseClass();
ClassTwo.prototype = new BaseClass(); 
```

# mercurial - 移除实验分支

> ID：11084802
> 
> 赞同：19
> 
> 时间：2012-06-18T14:18:54.143
> 
> 标签：mercurial, branch

如果我想完全删除 mercurial 中的功能分支，如何删除它？它应该从历史记录中删除，我不想合并另一个分支中的更改（只需将代码扔掉）。

我知道我可以将其他分支克隆到[此处](https://stackoverflow.com/q/7463712/851737)描述的新存储库，但这似乎不是一个干净的解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-18T14:26:33.700

我在[这里](https://www.mercurial-scm.org/wiki/PruningDeadBranches#Using_strip)找到了一个可行的解决方案。

它通过使用`hg strip`扩展`mq`来工作：

```
$ hg strip my_pruned_branch 
```

正如评论中提到的，这应该只用于未发布的变更集。

# java - Java中的方法一致性问题

> ID：11084805
> 
> 赞同：1
> 
> 时间：2012-06-18T14:18:59.020
> 
> 标签：java, memory-management, synchronization, enumeration

我真的不知道蹲java内存管理，所以这完全是我的错，我只需要指出解决方案的方向。

我正在处理一个巨大的数据集。我有一个将字符串作为输入并返回值的方法。该值基于字符串的内容。如果我以缓慢、细化、一次性的方式执行此操作：

```
while (!input.equals("#")) {

        System.out.print("Input input (logical redundancy): ");
        Scanner scan = new Scanner(System.in);
        input = scan.nextLine();

        Analyzer analysis = new Analyzer(new Dictionary());
        System.out.println(analysis.analyzeString(input));
    } 
```

没有问题，而且完全一致。对象是包含某些单词的键对信息的`Dictionary`数组列表。

但是，如果我尝试在更大的枚举规模上应用该方法，那么我会从分析方法返回错误数据。就比例而言，这些值在正确的范围内，但是它们与它们应该对应的字符串不对应。至少在我看来，返回的数据只是随机的。我尝试了各种尝试枚举的方法，但这就是我现在所拥有的：

```
while (rs.next()) {
            int id = rs.getRow();
            Analyzer analysis = new Analyzer(dict);
            String entry = rs.getString(5);
            double val = analysis.analyzeString(entry);
            pst.setDouble(1, val);
            pst.setInt(2, id);
            System.out.println(val + " : " + rs.getString(5));
            pst.executeUpdate();
} 
```

`analyzeString`在该尝试中，即使输入了相同的字符串，该方法返回的结果也存在极大的不一致。我该如何解决不一致？跟同步有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:24:44.473

首先，请定义不一致。我想你的意思是，你得到的值不是预期的。如果是这样，请在循环中打印输入和输出，看看你是否通过了你认为你正在通过的东西。我看到您正在传递查询结果第 5 列的值。`Did you remember that it is not 0-based index, but 1-based index`?

其次，是否可以将分析器实例化保持在循环之外？

```
Analyzer analysis = new Analyzer(dict);
while (rs.next()) {
            int id = rs.getRow();

            String entry = rs.getString("Use_Column_name_Here_to_be_SAFE");
            double val = analysis.analyzeString(entry);
            pst.setDouble(1, val);
            pst.setInt(2, id);
            System.out.println(id+": "+ val + " : " + entry);
            pst.executeUpdate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:24:53.087

要调试您的代码，我建议您使用调试器逐步完成代码。在 IDE 中，它是运行旁边的按钮。

* * *

> 蹲java内存管理真的不懂，

我怀疑它无论如何都与它无关。

> 我该如何解决不一致？

澄清你所说的不一致是什么意思。这可能意味着任何事情。除非您对问题所在有一个很好的了解，否则很难解决它。

> 跟同步有关系吗？

它是你的代码。如果你不知道没有人知道。我怀疑不是。

顺便说一句：我假设`pst`并且`rs`与另一个无关。;)

# facebook - Graph API 未显示所有相关的墙帖

> ID：11084811
> 
> 赞同：1
> 
> 时间：2012-06-18T14:19:18.200
> 
> 标签：facebook, facebook-graph-api, feed

我目前正在为我的一位客户开发一个项目。我对图形 api 有疑问。我试图通过调用 [http://graph.facebook.com/PAGEID/feed?access_token=ACCESSTOKEN](http://graph.facebook.com/PAGEID/feed?access_token=ACCESSTOKEN)来接收所有新闻提要。访问令牌有效且处于活动状态。客户页面还允许应用使用 read_stream 权限。但是我只收到了 4 月发布的一篇文章，尽管客户在 6 月发布了很多。它是一个错误吗？我在 facebook 上的 graph api explorer 上尝试过 - 结果相同。我也用自己的帐户尝试过 - 一切正常。

需要帮忙！

# juice-ui - 我可以覆盖 Juice UI 加载的脚本吗？

> ID：11084813
> 
> 赞同：0
> 
> 时间：2012-06-18T14:19:19.027
> 
> 标签：juice-ui

这是对 SO Question 的后续问题 -[在此处输入链接描述](https://stackoverflow.com/q/9741880/136717)。

是否可以在不重新编译果汁的情况下覆盖哪些脚本？或者为基于 jquery-ui 的自定义控件添加脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:59:43.167

部分答案 - 对于 JavaScript 文件，我只需要重新定义 JuiceApp.cs 文件中的脚本定义以指向我需要它们的位置。我在 Global.asx - Application_Start 方法中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:07:38.640

如果你有一个想要连接到 Juice UI 的 jQuery UI 小部件，你可以很容易地做到这一点。目前还没有关于该过程的任何文档，但是您可以遵循很多示例。我建议查看 ProgressBar.cs 文件以及它如何与 jQuery UI 源代码中的 ui-progressbar.js 文件匹配。您还可以查看 Wijmo Open for Juice UI 的源代码——他们使用 Juice UI 构建了一个完整的扩展库来连接他们的 jQuery UI 小部件库。

# c++ - sigaction SIGINT，在带有 & （背景）的 shell 中运行的程序没有收到信号

> ID：11084814
> 
> 赞同：0
> 
> 时间：2012-06-18T14:19:24.133
> 
> 标签：c++, linux

简单代码：

```
#include <signal.h>
#include <stdio.h>
#include <unistd.h>
#include <iostream>

using namespaces td;                                                             
bool unblock = false;                                                  
long int ile = 0;                                                 

void ouch(int sig) {
    cout << "signal " <<  sig << endl;                               
    unblock = true;                                                  
}                                                                
int main(){                                                          
    struct sigaction act;                                           
    act.sa_handler = ouch;                                           
    sigemptyset(&act.sa_mask);                                  
    act.sa_flags = 0;                                             
    sigaction(SIGINT, &act, 0);                                    

    do {                                                         
        cout << "." << endl;                                         
    } while(!unblock);                                                          

    cout << "EXIT" << endl;                                          
} 
```

现在我编译代码并得到“a.out”。当我像这样运行 a.out 时：

```
[przemek@localhost test]$ ./a,out 
```

它按预期运行，当我按 CTRL+C 时，程序按需要退出但是当我像这样运行程序时（在我的项目中需要）：

```
[przemek@localhost test]$ ./a.out& 
```

操作系统将控制权传递给 shell，我无法通过 CTRL+C 中断循环

我需要在 bash 脚本中运行此代码，并且需要在后台运行它。在这种情况下是否有可能以某种方式捕捉信号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:21:38.693

当您按下时，`ctrl-c`您将信号 2 (SIGINT) 发送到当前进程（在终端前台运行的进程）。您可以使用以下命令将信号发送到在后台运行的进程（以 & 开头）`kill`：

```
$ kill -2 %% 
```

当你说`%%`你的意思*是最后一个后台进程*。当然，您可以指定另一个。您需要知道它的 PID（参见 ps(1)）或 JobID（bash(1)/jobs）。

我还想指出，您只能在带有作业管理的 shell 中使用 %-notation（例如 in `bash`）。当您不在这样的外壳中时，您只能使用 PID。

最后启动的进程的 PID 在`$!`. 这在某些脚本中可能很有用。

# c# - 文件编码：这是否适用于 C# 的 WriteByte 方法？

> ID：11084818
> 
> 赞同：0
> 
> 时间：2012-06-18T14:19:36.273
> 
> 标签：c#, visual-studio-2010, encoding

我是编码主题的新手，想更详细地了解它。我在 MSDN 上找到了这个关于创建文件夹和文件的示例。文件的创建是通过使用 WriteByte 方法完成的。 [http://msdn.microsoft.com/en-us/library/as2f1fez.aspx](http://msdn.microsoft.com/en-us/library/as2f1fez.aspx)

为方便起见，我将代码直接放在下面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CreateFolderFile
{
    class Program
    {
        static void Main(string[] args)
        {
            // Specify a "currently active folder"
            string activeDir = @"c:\testdir2";

            //Create a new subfolder under the current active folder
            string newPath = System.IO.Path.Combine(activeDir, "mySubDir");

            // Create the subfolder
            System.IO.Directory.CreateDirectory(newPath);

            // Create a new file name. This example generates
            // a random string.
            string newFileName = System.IO.Path.GetRandomFileName();

            // Combine the new file name with the path
            newPath = System.IO.Path.Combine(newPath, newFileName);

            // Create the file and write to it.
            // DANGER: System.IO.File.Create will overwrite the file
            // if it already exists. This can occur even with
            // random file names.
            if (!System.IO.File.Exists(newPath))
            {
                using (System.IO.FileStream fs = System.IO.File.Create(newPath))
                {
                    for (byte i = 0; i < 100; i++)
                    {
                        fs.WriteByte(i);
                    }
                }
            }

            // Read data back from the file to prove
            // that the previous code worked.
            try
            {

                byte[] readBuffer = System.IO.File.ReadAllBytes(newPath);
                foreach (byte b in readBuffer)
                {
                    Console.WriteLine(b);
                }
            }
            catch (System.IO.IOException e)
            {
                Console.WriteLine(e.Message);
            }

            // Keep the console window open in debug mode.
            System.Console.WriteLine("Press any key to exit.");
            System.Console.ReadKey();
        }
    }
} 
```

我还发现了 Joel Spolsky 关于这个主题的一篇有趣的文章：

每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有任何借口！） [http://www.joelonsoftware.com/printerFriendly/articles/Unicode.html](http://www.joelonsoftware.com/printerFriendly/articles/Unicode.html)

我的问题：WriteByte 方法使用什么编码？从我做的阅读来看，无论你使用什么，真的可以准确地确定文件的编码吗？（例如：发送给您的 csv 文件并使用 Notepad++ 确定编码）。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:22:42.683

`Stream.WriteByte`将字节作为输入（方法的参数）和输出（目标流）处理，它们本质上是*二进制*数据 - 因此编码的概念（文本和二进制信息之间的映射）不适用。

现在，如果您要*读取*使用`WriteByte`调用创建的文件，就*好像它是*需要您以特定编码*解释它的文本文件一样。*那是另一回事 - 文件的内容仍然只是字节。

正如 Guffa 的回答中所述，文件（通常，无论如何¹）没有任何编码概念。它只是一个字节桶。如果您的文件*只是*纯文本，则您必须在阅读时知道编码是什么，或者通过启发式推断它。

* * *

¹当然，文件系统可以保留有关编码的元数据 - 但由创建程序来设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:26:38.487

该`WriteByte`方法根本不使用任何编码。字节值完全按照指定写入，不进行转换。

编码仅用于文本。通常，整个文本文件使用相同的编码，但也有可能包含二进制数据和编码文本的文件。

该文件本身没有任何关于任何编码的信息。该文件仅包含字节，并且编码可用于将字节解释为文本。

某些文件格式在文件的开头有一个指示符来确定编码。通常，您会使用中性编码（例如 ASCII）读取文件的第一部分，以获取有关使用何种编码的信息。（这是一个引导问题。）

例如，XML 文件的第一行可能包含版本标记，其中可能包含指定编码的属性。另一个例子是 Unicode 文本文件中的第一个字符，它可能是一个 BOM（字节顺序标记），可用于确定使用了哪种类型的 Unicode 编码。

# ajax - Chrome 扩展在 ajax 更改上运行内容脚本

> ID：11084819
> 
> 赞同：5
> 
> 时间：2012-06-18T14:19:55.993
> 
> 标签：ajax, google-chrome, google-chrome-extension

我有一个 chrome 扩展程序，它在网站上进行了一些更改（编辑评论）。

在网站上最近的更改（网站不是我的）之后 - 使用 ajax 加载评论块（在它是整个页面重新加载的简单发布请求之前）。

现在，如果我第一次加载页面 - 内容脚本可以工作，但是当我转到下一页时，比如说第 2 页 - 使用 ajax 添加评论并且扩展脚本不再运行。所以评论不会改变我想要的方式。

有没有什么简单的方法来监听页面更改 DOM 并再次应用扩展脚本？

在清单文件中我有：

```
{
  "name": "Name",
  "version": "1.0",
  "description": "Description",
  "icons": {"16":"16.png",
            "48":"48.png",
            "32":"32.png",
            "128":"128.png"},
  "browser_action": {
    "default_title": "Default title",
    "default_icon": "48.png",
    "popup": "popup.html"
  },
  "permissions": [
    "tabs",
    "http://www.site.com/*",
    "notifications",
    "unlimitedStorage"
  ],

  "options_page": "options.html",
  "background_page": "background.html",

  "content_scripts": [
                {
                    "matches": ["http://www.site.com/*","https://www.site.com/*"],
                    "js": ["jquery-1.7.1.min.js","content.js"],
                    "run_at": "document_end"
                }]
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T14:25:16.317

您可以在名为 的事件上添加一个侦听器`DOMSubtreeModified`。给它绑定一个函数，只要有变化就会调用它。

在 jQuery 中：

```
$('#ContentContainer').bind('DOMSubtreeModified',modifyComments); 
```

* * *

更新：

如果事件多次触发，请在第一次删除事件绑定，在一定超时后，您可以调用 modifyComments 并重新绑定事件。

```
function DOMModificationHandler(){
    $(this).unbind('DOMSubtreeModified.event1');
    setTimeout(function(){
        modifyComments();
        $('#ContentContainer').bind('DOMSubtreeModified.event1',DOMModificationHandler);
    },1000);
}

//after document-load
$('#ContentContainer').bind('DOMSubtreeModified.event1',DOMModificationHandler); 
```

# java - FileNotFoundException（没有这样的文件或目录）

> ID：11084823
> 
> 赞同：8
> 
> 时间：2012-06-18T14:20:12.123
> 
> 标签：java, java-io

我正在编写一个 android 应用程序，我需要从几个文件夹中读取几个文件并将它们添加到几个 zip 档案中。我需要将档案的最大大小限制为 16mb。因此，在运行时，如果文件的大小超过 16 mb，则在将文件添加到存档时创建另一个具有相同大小限制的存档，依此类推。我正在使用以下包装类：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class ChunkedZippedOutputStream {
    private ZipOutputStream zipOutputStream;

    private String path;

    private String name;

    private long currentSize;

    private int currentChunkIndex;

    private final long MAX_FILE_SIZE = 16 * 1000 * 1024; // 16mb limit

    private final String PART_POSTFIX = ".part";

    private final String FILE_EXTENSION = ".zip";

    public ChunkedZippedOutputStream(String path, String name) throws FileNotFoundException {
        this.path = path;
        this.name = name;
        constructNewStream();
    }

    public void addEntry(ZipEntry entry) throws IOException {
        long entrySize = entry.getCompressedSize();
        if ((currentSize + entrySize) > MAX_FILE_SIZE) {
            closeStream();
            constructNewStream();
        } else {
            currentSize += entrySize;
            zipOutputStream.putNextEntry(entry);
        }
    }

    private void closeStream() throws IOException {
        zipOutputStream.close();
    }

    private void constructNewStream() throws FileNotFoundException {
        zipOutputStream = new ZipOutputStream(new FileOutputStream(new File(path, constructCurrentPartName())));
        currentChunkIndex++;
        currentSize = 0;
    }

    private String constructCurrentPartName() {
        // This will give names is the form of <file_name>.part.0.zip, <file_name>.part.1.zip, etc.
        StringBuilder partNameBuilder = new StringBuilder(name);
        partNameBuilder.append(PART_POSTFIX);
        partNameBuilder.append(currentChunkIndex);
        partNameBuilder.append(FILE_EXTENSION);
        return partNameBuilder.toString();
    }
} 
```

我像这样使用它：

```
String zipPath = Environment.getExternalStorageDirectory() + "/MyApp/MyFolder/Zip/";
String zipName = "MyZipFle";
ChunkedZippedOutputStream zippedOutputStream = new ChunkedZippedOutputStream(zipPath, zipName);
....
zippedOutputStream.addEntry(new ZipEntry("ZipEntry" + i)); 
```

但是 ChunkedZippedOutputStream 对象的实例化我得到这个错误：

```
 java.io.FileNotFoundException: /mnt/sdcard/MyApp/MyFolder/Zip/MyZipFle.part0.zip (No such file or directory) 
```

我知道我在路径输入或名称上做错了，但我不知道是什么。

另外，如果代码片段不正确，请告诉我，我从这里得到了[如何将一个巨大的 zip 文件拆分为多个卷？](https://stackoverflow.com/questions/243992/how-to-split-a-huge-zip-file-into-multiple-volumes)

如果我的问题有更简单的解决方案，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T14:28:45.383

输出目录不存在。请参阅`File.mkdirs()`解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-06-12T11:08:57.943

这对我有用

```
Project
|->src
|   |-->MyClass.java
|   |-->MyFile1.txt
|->res
   |->files
     |-->MyFile2.txt 
```

例子：

对于 MyFile1，您可以使用 new File("MyFile1.txt");
对于 MyFile2，您可以使用 new File("./res/files/MyFile2.txt");

# java - 如何在不停止代码执行的情况下使用 try-catch

> ID：11084825
> 
> 赞同：0
> 
> 时间：2012-06-18T14:20:20.720
> 
> 标签：java

我有这个剪断的代码：

```
 try{
        JAXB.xmlJavaConverter(clientCommand);
    } catch (Exception e){
        nServerFifo.add(clientCommand);
    } 
```

我想调用远程 Java 方法`JAXB.xmlJavaConverter(clientCommand);`。如果由于某种原因失败，我想将数据插入 Buffer `nServerFifo.add(clientCommand);`。我如何在不停止代码执行的情况下做到这一点。我确定我必须`Exception e`用其他东西替换，但我不确定在不停止代码执行的情况下我需要什么类型的例外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:22:22.153

如果你 catch ，*任何*异常 都会进入`Exception`该块。`catch`

 *您现有的代码应该可以工作。

如果您*只想*输入`catch`特定类型的异常的块（您的问题似乎并不暗示），您会写

```
catch (MoreSpecificExceptionType e) 
```

如果你这样做了，

```
nServerFifo.add(clientCommand); 
```

`try`仅当块中的代码 throws时才会执行`MoreSpecificException`。*

# c# - C# - 如何检查缺少的 scope.Complete() 语句？

> ID：11084829
> 
> 赞同：5
> 
> 时间：2012-06-18T14:20:27.653
> 
> 标签：c#, resharper, qa, ndepend

我团队中的程序员有时会打开事务并忘记包含 scope.Complete() 语句（参见下面的代码块）。关于方法的任何想法

(1) 在我们的解决方案中搜索缺少的 scope.Complete() 语句，或者

(2) 是否让 Visual Studio 自动突出显示丢失的 scope.Complete() 语句或发出警告？

这是我们错过的那一行：

```
 using(TransactionScope scope = new TransactionScope())
 {
      /* Perform transactional work here */
      scope.Complete(); <-- we forget this line
      /* Optionally, include a return statement */
 } 
```

**我已经尝试**

过为此目的使用 ReSharper 自定义模式，但没有成功。理想情况下，我会搜索以下内容：

```
using(TransactionScope scope = new TransactionScope())
{
    $statements1$
    [^(scope.Complete();)]
    $statements2$
} 
```

但是，ReSharper 只接受标识符的正则表达式，而不是语句，因此这似乎不起作用 ( [http://www.jetbrains.com/resharper/webhelp/Reference__Search_with_Pattern.html](http://www.jetbrains.com/resharper/webhelp/Reference__Search_with_Pattern.html) )。

有任何想法吗？我也愿意使用其他插件或工具。

谢谢，
本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:26:01.980

你能强迫程序员使用自定义 API 而不是低级范围。完整的东西吗？

闭包将强制使用`.Complete()`：

```
public static void Do(this TransactionScope scope, Action action) {
  using (scope) {
    action();
    scope.Complete();
  }
} 
```

然后你可以这样做：

```
new TransactionScope().Do(() => /* Transactional stuff */); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:31:44.530

NDepend 当然可以提供帮助，但无法检查 100% 的您所要求的内容。NDepend 不知道方法体内部结构（方法调用的顺序）。因此，充其量，您可以[在 LINQ (CQLinq)](http://www.ndepend.com/Features.aspx#CQL)上编写一个代码规则，该规则将检查一个方法是否正在创建一个`TransactionScope`，至少它必须调用`TransactionScope.Complete()`：

```
warnif count > 0
from m in Application.Methods
where m.CreateA("System.Transactions.TransactionScope") &&
     !m.IsUsing("System.Transactions.TransactionScope.Complete()")
select m 
```

请注意，如果开发人员有足够的纪律性来避免`TransactionScope`在一个方法中创建多个，则此规则应该适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:42:53.370

我不知道有任何现有的 R# 插件可以对此进行检查，但您当然可以创建自己的一个。您所要做的就是检测带有`TransactionScope`类型变量声明的 using 语句，然后迭代包含的语句以查找`Complete()`调用。

如果您对此感兴趣，我建议您下载[ReSharper SDK](http://www.jetbrains.com/resharper/download/index.html)并查看[插件开发指南](http://confluence.jetbrains.net/display/ReSharper/ReSharper+6+Plugin+Development)。

# android - 未捕获的类型错误：无法调用未定义的方法“列表”

> ID：11084831
> 
> 赞同：1
> 
> 时间：2012-06-18T14:20:29.480
> 
> 标签：android, jquery, cordova

我正在开发一个 Phonegap 插件。我的 HTML 文件如下所示：

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
  function fun(){
    alert("hai I am alert");
    window.plugins.Unixell.list(SuccessCallBack ,failureCallBack);
    function SuccessCallBack() {
      alert("success");
    };
    function failureCallBack() {
      alert("failure");
    };
  }
</script>
</head>
<body>
  <input type="button" value="i am button" onclick="fun()" />
  <script src='apis/Phonegap.js'></script>
  <script src='apis/Unixell.js'></script>
</body>
</html> 
```

Unixell.js 是：

```
var cam=function(){};
cam.prototype.list = function(successCallback, failureCallback) {
  return PhoneGap.exec(successCallback,failureCallback, 'Unixell', 'list', [null]);
};
PhoneGap.addConstructor(function() {
  alert("I am in unixell.js3333");
  PhoneGap.addPlugin("Unixell", new cam());
  PluginManager.addService("Unixell", "com.phonegap.plugins.unixell.Unixell");
}); 
```

而我的 com.phonegap.plugins.unixell.Unixell.java 文件是：

```
public class Unixell extends Plugin{
  private static final String TAG = "unixell";
  private static final String ACTION = "list";
  @Override
    public PluginResult execute(String action, JSONArray arg1, String arg2) {
      // TODO Auto-generated method stub
      PluginResult result = null;
      result=new PluginResult(Status.OK, "I am a message");
      if(ACTION.equals(action)){
        System.out.println("success");
        LOG.d(TAG,"U R success");
      }
      return result;
    } 
```

但是我在logcat中遇到错误：

```
Uncaught TypeError: Cannot call method 'list' of undefined at file:///android_asset/www/index.html 
```

会有什么问题？为什么我会收到此错误？解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:34:43.667

我想你可以通过执行 Unixell.prototype.list 来获得一个函数，就像你定义的那样，但我对 Phonegap 的工作并不多；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:58:07.950

好吧，在 HTML 文件中，您正在声明，`window.plugins.Unixell`但在 JS 文件中，您正在声明`var cam=function(){};`Pick one。因为到目前为止还没有 Unixell.list，只有一个 cam.list 函数......

# ios - iOS 上的 SQLite 使用现有架构

> ID：11084837
> 
> 赞同：0
> 
> 时间：2012-06-18T14:20:42.447
> 
> 标签：ios, database, sqlite, core-data

我需要使用已经存在的数据库模式，其中包含数据。是否可以从给定的 SQLite 文件中获取数据到 iOS 数据库以使用我要创建的核心数据和模型？如果没有，您的建议是什么？我真的需要将现有的数据从设备数据库传输到设备数据库，这样我就可以在我的应用程序中使用它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:04:09.217

如果您事先不知道数据库的结构，我建议您不要为此使用 Core Data。Apple 设计了 ​​Core Data，以便您事先设置数据结构。然后，您在应用程序中使用该结构。但是采用任意 SQLite 表结构并尝试使其适应预设的核心数据结构将是最困难的。我不会说这是不可能的，但是你必须做的抽象级别才能使它工作，你可以简单地使用 SQLite。我建议添加某种数据库包装器，例如[FMDB](https://github.com/ccgus/fmdb)，以使用 Objective-C（而不是 C 函数）访问数据。这样您就不需要改编 SQLite 文件，而是直接使用该文件（或将其导入现有的 SQLite 文件）。

如果您事先知道结构，那么是的，将数据从 SQLite 导入核心数据应该相当容易。您首先需要使用 Apple 的工具在 Core Data 中重新创建该结构。在运行时，您可以从 SQLite 数据库中获取信息并将其添加到 Core Data。如果您还没有这样做，请阅读 Apple 的[核心数据编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html)以了解等式的核心数据方面。我仍然推荐[FMDB](https://github.com/ccgus/fmdb)来访问 SQLite 数据库，因为它会使从 SQLite 获取数据变得更加容易。

我还想指出，如果 SQLite 数据库发生变化（或可能发生变化），您可能仍然可以通过避免使用 Core Data 来获得更好的服务，具体取决于它的变化频率。这样做的原因很简单：为了让 Core Data 适应 SQLite 数据库中的更改，您必须进行更改，然后向您的应用程序发布更新。这可能会导致您的应用程序无法完全同步到 SQLite 数据库甚至可能导致错误的很多天（可能是几周）。Core Data 在很多事情上都很棒，但适应数据结构不是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:09:20.283

我在理解这个问题时遇到了一些麻烦，但我认为是这样的：

> 如何在 CoreData 之外创建的 sqlite .db 上使用 CoreData？

如果这是你的问题，这里有几个链接

[http://ablogontech.wordpress.com/2009/07/13/using-a-pre-populated-sqlite-database-with-core-data-on-iphone-os-3-0/](http://ablogontech.wordpress.com/2009/07/13/using-a-pre-populated-sqlite-database-with-core-data-on-iphone-os-3-0/)

[http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)

但是，与其他答案一样，[Apple 建议不要这样做](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFAQ.html#//apple_ref/doc/uid/TP40001802-SW2)

# python - Python下的FANN表现异常。这是因为我用错了，还是因为工具的限制？

> ID：11084838
> 
> 赞同：1
> 
> 时间：2012-06-18T14:20:47.673
> 
> 标签：python, machine-learning, neural-network, fann

我有许多记录，我试图根据其他字段预测一个字段。我在 Python 下建立了一个 FANN 神经网络，有大约 10 个输入、100 个隐藏节点和 2 个输出。

当我去构建网络时，有 1000 多条记录，它们在几千个 epoch 内下降到大约 60 的误差，但没有进一步下降；通常报告的错误与前一个错误的最后一位相同。

当我去测试它时，我预计相关性很弱，但它预测了每条测试数据的相同结果。

现在这种行为是因为我没有正确使用 FANN（我希望如此），还是因为我在 FANN 不是特别有用的问题空间中工作？

ATdhvaankcse，

# python - 如何在python中绘制cdf

> ID：11084839
> 
> 赞同：0
> 
> 时间：2012-06-18T14:20:51.403
> 
> 标签：python, scipy, cdf

我有一个排序的整数数组，我想为它绘制一个累积分布函数。但是，数据的性质是不确定的，所以我认为我不能为它使用任何预定义的库。

所以为了实现它，我使用了插值函数（scipy.interpolate）。我这样做是这样的：

```
def plot_cdf(self,x,y,):
        tck = interpolate.splrep(x,y,s=0)
        y = interpolate.splev(x,tck,der=0)
        plt.figure()
        plt.plot(x,y)
        xlabel("Percentage")
        ylabel("Unavailability slot duration")
        plt.show() 
```

可以改善吗？？？有没有预定义的功能？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:24:18.543

您使用 绘制函数`plot`，这就是您正在使用的。

# android - 为服务指定发送（共享）意图过滤器

> ID：11084840
> 
> 赞同：8
> 
> 时间：2012-06-18T14:20:53.653
> 
> 标签：android, android-intent, android-manifest, intentfilter, android-sharing

我正在尝试通过我的一个s中的`android.intent.action.SEND`操作过滤和处理意图。`Service`我在我的`AndroidManifest.xml`:

```
<service 
    android:name=".app.ScreamerService"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.SEND"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <data android:mimeType="*/*"/>
    </intent-filter>                                                                    
</service> 
```

现在，问题是我在“共享方式”选项列表中看不到我的应用程序，例如，当尝试从浏览器共享网页或从联系人列表中共享联系人时。但是，如果我将意图过滤器移动到主`<activity>`标记（而不是`<service>`），我的应用程序名称和图标**确实**会出现在“共享方式”选项列表中。

我在这里做错了什么？不能将`SEND`操作定向到服务吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T15:05:15.957

> 我正在尝试在我的一项服务中使用 android.intent.action.SEND 操作过滤和处理意图。

`ACTION_SEND`是一个活动动作，因此不能被服务或广播接收器接收。

> 现在，问题是我在“共享方式”选项列表中看不到我的应用程序，例如，

那是因为它不是一项活动。

> 不能将 SEND 操作定向到服务吗？

出现在选择器中的事物（例如，. for `ACTION_SEND`）必须是活动。不过，欢迎您的活动与服务进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:45:11.050

这应该有效，但是：

首先尝试使用广播接收器来获取意图并启动您的服务。

如果这不起作用：

使用没有布局的虚拟活动。（使主题半透明并在处理意图后立即调用完成）。

此外，您的 mime 类型意味着您正在处理每一种文件类型。那是你需要的吗？我认为您应该在选择时更加精确。如果有人试图将它与您不支持的类型一起使用，您将得到负面反馈。我的建议是测试类型并一一添加，因为您有信心可以处理它们。

# forms - 将公式添加到重力形式表单

> ID：11084841
> 
> 赞同：4
> 
> 时间：2012-06-18T14:20:54.900
> 
> 标签：forms, formula, conditional-statements

重力形式允许使用合并标签进行基本字段计算，例如`{Field 1:1} * {Field 2:2}`，但我想使用 if/and/else 语句来设置字段值，例如：

`if (and ({Field 1:1} = 200,{Field 2:2} = 1), 100, if (and ({Field 1:1} = 200,{Field 2:2} = 2), 150, if (and ({Field 1:1} = 200,{Field 2:2} > 2), 200, 0)))`

或者换句话说：

`if (field_1 = 200) { if (field_2 = 1) { field_3 = 100 } else if (field_2 = 2) { field_3 = 150 } else { field_3 = 200 }`

希望有人能给我一些关于如何在重力形式中包含这种计算的想法。

仅供参考：[这是我正在处理的表格](http://indigobrazilianportuguese.com/courses-prices/booking/)。我希望使用公式而不是“Course 1 week 1 topup”条件字段的 21 种不同变体，这些变体仅在选择课程 1 和第 1 周时出现。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T22:25:15.850

不确定您是否已经知道这一点，但对于数字计算，我发现我可以使用条件逻辑和默认值部分解决问题。我正在使用重力形式 1.7.2。

基本思想是在您的表单中添加一个新的数字字段，该字段使用条件逻辑，以便在您的条件为真时显示，否则不显示。确保为该字段提供一个对您的应用程序有意义的默认值。

现在，如果您在计算中包含新的数字字段，如果该字段被隐藏（您的条件为假），它将采用值 0，如果该字段显示（您的条件为真），则采用您选择的默认值。

例子：

字段 0：标签：“汉堡成本”；类型：数字；默认值：10

字段 1：标签：“额外的奶酪？”；类型：单选按钮；选择“是”、“否”

字段 2：标签：“额外奶酪的成本”；类型：数字；条件逻辑：如果 Extra Cheese 为“是”，则显示此字段；默认值：2.50

字段 3：标签：“总成本”；类型：数字；启用计算：{Cost of Hamburger} + {Cost of Extra Cheese}

如果额外奶酪为“否”，您应该会发现总成本字段显示 10，但是当您将额外奶酪更改为“是”时，总成本将更改为 12.50。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:31:21.527

Gravity Forms 确认目前无法在其公式中包含 if/and/else 语句（Gravity Forms v1.6.4）。

希望在未来的版本中看到这一点！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-14T15:51:31.297

您可以通过一系列字段来完成此操作。假设您的答案是 840

1.  添加字段：计算实际总数并除以 100。（结果 8.4）
2.  添加一个字段：计算实际总数并除以 100 - 然后将其四舍五入到小数点后 0。（结果 8）
3.  添加字段：计算差值 (0.4)
4.  添加一个字段：使用条件逻辑添加 1（数字 1），如果差异 > 0，那么它就在那里。（结果 1）
5.  添加总和（2 的结果加上 4 的结果）* 100。结果：900。

# wso2 - WSO2 Developer Studio 与 Carbon studio 的向后兼容性？

> ID：11084845
> 
> 赞同：0
> 
> 时间：2012-06-18T14:21:06.943
> 
> 标签：wso2, wso2esb, wso2developerstudio

我已经下载了新的 WS02 Developer Studio 和 Helios，但是当我将它指向现有的 Carbon Studio 工作区时，它无法识别 Carbon 项目及其方面。我们是否必须在 Developer Studio 中手动重新创建项目并将 xml 文件复制进去？我可以正确创建新的 wso2 项目，因此它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:32:31.140

Developer Studio 2.0.0 不具有与 Carbon Studio 1.0.14 的向后兼容性，因为它包含围绕项目结构等的许多基本级别更改。

因此，您将无法将使用 Carbon Studio 版本创建的 C-App 项目与 Developer Studio 一起使用。

我们正计划实施一个迁移工具来迁移 1.0.x 项目的新项目结构，但我们无法提供该工具发布的确切时间表。

在那之前，唯一可能的选择是使用 Developer Studio 手动重新创建旧项目。

谢谢并恭祝安康，

哈沙娜

# c# - npoi 日期格式

> ID：11084846
> 
> 赞同：2
> 
> 时间：2012-06-18T14:21:10.593
> 
> 标签：c#, xls, npoi

我正在使用 NPOI 1.2.5.0 ，Visual Studio 2008。电子表格中有一个日期列。我

观察到，如果我在 Microsoft Excel 中打开文件，将列的大小设置为 autoset ，保存它，

一切正常。我不能使用这个解决方案，因为生产上没有安装 excel

个人电脑。

否则，当我处理其他逻辑/编码时，日期列显示#### 而不是日期

使用 NPOI 并保存此文件。我打开excel，它说文件已损坏，需要

恢复，数据可能会丢失。如果我单击“是”，它会恢复文件并显示一切正确。

我发现这可以解决，如果我打开文件自动设置日期列保存 excel 使用

微软 Excel。使用 NPOI .net 代码处理后，它确实可以正常打开。

1.  所以我决定使用 NPOI 自动设置 thr' 代码，它不会增加日期的宽度

列，而是在那里显示数字。

我编写了以下代码来设置日期格式，但它显示的是数字而不是

日期。我在此块之前或之后尝试了自动设置代码，没有变化。

```
for (int i = 0; i <= nTotalRows; i++)
            {
                HSSFCellStyle cellStyle = (HSSFCellStyle)templateWorkbook.CreateCellStyle();
                HSSFCell Cell = (HSSFCell)exlSheet.GetRow(i).GetCell(nCheckColumn);
                //(HSSFCell)exlSheet.Sheet.get .SetDefaultColumnStyle(nCheckColumn,
                cellStyle.DataFormat = HSSFDataFormat.GetBuiltinFormat("mm-dd-yy");
                Cell.CellStyle = cellStyle;
                MemoryStream ms = new MemoryStream();
                templateWorkbook.Write(ms);
                ms.Close();
                FileStream fs1 = new FileStream(strFilePath, FileMode.Create);
                templateWorkbook.Write(fs1);
                fs1.Close();
            } 
```

请为此提出解决方案。我正在搜索 Getcolumn 以将 Dataformat 设置为

完整的列而不是单元格。

假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T16:02:37.387

我用它来自动设置列宽：

```
HSSFSheet sheet = (HSSFSheet)workbook.GetSheetAt(x);
sheet.AutoSizeColumn(y); 
```

其中 x 是工作表编号，y 是列编号。这至少会设置宽度，所以excel不会显示###

# c# - 使用 C# 从 Arduino Serial 收集的数据进行 SQL 更新

> ID：11084847
> 
> 赞同：0
> 
> 时间：2012-06-18T14:21:15.173
> 
> 标签：c#, sql, serial-port, arduino, visual-studio-2012

我正在尝试用 C# 编写一个简单的程序，该程序将从通过串行连接的 Arduino 读取数据输出，将相关数据从经过格式化的文本字符串中提取出来，以便在串行监视器中易于理解，显示两部分两个只读文本框中的信息作为计数器（每次更新信息时覆盖），并使用这些数字更新 SQL 表。

* * *

例子：

Arduino输出：

```
'Day Users: 234231'
'All Users: 433241' 
```

C# 在 textbox1 中显示完整消息

C# 在 textbox2 中显示 234231

C# 在 textbox3 中显示 433241

C# UPDATES SQL 表的内容如下：

```
SqlCommand myCommand = new SqlCommand("UPDATE USER_NUMBERS
SET NUMBERZ= 234231 
WHERE UPTIME = DAYHK"); 
```

但显然，'234231' 是一个变量，由 Arduino 的输入指定，然后通知 textbox2 的内容和更新 SQL 表所需的值。

* * *

我对 C# 很陌生，但到目前为止，我有一个程序可以从 Arduino 读取串行数据并将整个输出放入 textbox1，但仅此而已。

如何指定要分配给值的输入数据的一部分作为 textbox2（或 textbox3）中的文本输出，然后使用它来执行此操作以及更新我的 SQL 表中保存的值？

到目前为止，我的代码是这样的：

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Serial_Reader
{
    public partial class Form1 : Form
    {

        string RxString;

        public Form1()
        {
            InitializeComponent();
        }

        private void buttonStart_Click(object sender, EventArgs e)
        {
            serialPort1.PortName = "COM3";
            serialPort1.BaudRate = 9600;

            serialPort1.Open();
            if (serialPort1.IsOpen)
            {
                buttonStart.Enabled = false;
                buttonStop.Enabled = true;
                buttonSQL.Enabled = true;
                textBox1.ReadOnly = false;
            }
        }

        private void buttonStop_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.Close();
                buttonStart.Enabled = true;
                buttonStop.Enabled = false;
                buttonSQL.Enabled = false;
                textBox1.ReadOnly = true;
            }
        }

        private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            // If the port is closed, don't try to send a character.

            if (!serialPort1.IsOpen) return;

            // If the port is Open, declare a char[] array with one element.
            char[] buff = new char[1];

            // Load element 0 with the key character.

            buff[0] = e.KeyChar;

            // Send the one character buffer.
            serialPort1.Write(buff, 0, 1);

            // Set the KeyPress event as handled so the character won't
            // display locally. If you want it to display, omit the next line.
            e.Handled = true;
        }

        private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            RxString = serialPort1.ReadExisting();
            this.Invoke(new EventHandler(DisplayText));
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (serialPort1.IsOpen) serialPort1.Close();
        }

        private void DisplayText(object sender, EventArgs e)
        {
            textBox1.AppendText(RxString);
        }

        private void buttonSQL_Click(object sender, EventArgs e)
        {

        }

    }
 } 
```

正如你从“我的”熟练评论中看到的，但编程不熟练，我使用的是来自精彩教程的代码[：](http://csharp.simpleserial.com)我的程序将有一个额外的按钮来开始 SQL 通信，当串行通信停止时停止，和两个额外的文本框。

* * *

**编辑**：

输入格式为：

```
Someone got up from seat number 9
All-time users on seat number 9 is: 5
Today's total users: 17
All-time total users: 17 
```

这样非程序员检查串行监视器可以很容易地理解输出。第一行总是“Someone got up from”或“Someone sated on”，在第二行，只有数字发生变化，第三行和第四行也是如此，但第三和第四行的数字（在这种情况相同，因为系统运行不到一天）是需要解析的。

* * *

**编辑 2**（新代码）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace Serial_Reader
{
    public partial class Form1 : Form
    {

        string RxString;

        public Form1()
        {
              InitializeComponent();
        }

        private void buttonStart_Click(object sender, EventArgs e)
        {
            serialPort1.PortName = "COM3";
            serialPort1.BaudRate = 9600;

            serialPort1.Open();
            if (serialPort1.IsOpen)
            {
                buttonStart.Enabled = false;
                buttonStop.Enabled = true;
                buttonSQL.Enabled = true;
                textBox1.ReadOnly = true;
            }
        }

        private void buttonStop_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.Close();
                buttonStart.Enabled = true;
                buttonStop.Enabled = false;
                buttonSQL.Enabled = false;
                textBox1.ReadOnly = true;
            }
        }

        private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            // If the port is closed, don't try to send a character.

            if (!serialPort1.IsOpen) return;

            // If the port is Open, declare a char[] array with one element.
            char[] buff = new char[1];

            // Load element 0 with the key character.

            buff[0] = e.KeyChar;

            // Send the one character buffer.
            serialPort1.Write(buff, 0, 1);

            // Set the KeyPress event as handled so the character won't
            // display locally. If you want it to display, omit the next line.
            e.Handled = true;
        }

        private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            RxString = serialPort1.ReadExisting();
            this.Invoke(new EventHandler(DisplayText));

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (serialPort1.IsOpen) serialPort1.Close();
        }

        private void DisplayText(object sender, EventArgs e)
        {
            textBox1.AppendText(RxString);

        }

        private void buttonSQL_Click(object sender, EventArgs e)
        {
            //   SqlConnection myConnection = new SqlConnection("user id=username;" +
            //                            "password=password;server=serverurl;" +
            //                            "Trusted_Connection=yes;" +
            //                            "database=database; " +
            //                            "connection timeout=30");

            do
            {
                string dayUsers, allUsers;
                string s1 = "Today's total users: ";
                string s2 = "All-time total users: ";

                if (RxString.Contains(s1))
                {
                dayUsers = RxString.Replace(s1, "");
                textDU.Text = dayUsers;
           //     string queryDay = "UPDATE USER_NUMBERS SET NUMBERZ=" + dayUsers + "WHERE UPTIME=DAYHK";
                }

                if (RxString.Contains(s2))
                {
                allUsers = RxString.Replace(s2, "");
                textAU.Text = allUsers;
           //     string queryAll = "UPDATE USER_NUMBERS SET NUMBERZ=" + allUsers + "WHERE UPTIME=ALLHK";
                }
            }
            while (serialPort1.IsOpen);
        }

        private void textDU_TextChanged(object sender, EventArgs e)
        {

        }

        private void textAU_TextChanged(object sender, EventArgs e)
        {

        }

    }
} 
```

* * *

**编辑 3**（传入数据）：

```
if (abs (then [i] - now[i]) > THRESH)
{
  Serial.print ("Someone ");
  if (now [i] > then [i])
  {
    Serial.print ("sat on");
    allusers++;
    dayusers++;
    digitalWrite(counterPin, HIGH);  // hit counter
    delay(75);
    digitalWrite(counterPin, LOW);
    val[i]++;
  }  
  else
  {
    Serial.print ("got up from");
  }  
  Serial.print (" seat number ");
  Serial.println (i);
  Serial.print ("All-time users on seat number ");
  Serial.print (i);
  Serial.print (" is: ");
  Serial.println (val[i]); 
  Serial.print ("Today's total users: ");
  Serial.println (dayusers);
  Serial.print ("All-time total users: ");
  Serial.println (allusers);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:45:58.583

如果您知道输入字符串始终采用相同的格式，并且数字始终为 6 位，您可以使用简单的子字符串：

```
int dayUsers, allUsers;
Int32.TryParse(RxString.Substring(12, 6), out dayUsers);
Int32.TryParse(RxString.Substring(32, 6), out allUsers); 
```

否则，您可以使解析更复杂一点：

```
int dayUsers, allUsers;
string[] parts = RxString.Split('\'', ':');
if (parts.Length > 5)
{
    Int32.TryParse(parts[2].Trim(), out dayUsers);
    Int32.TryParse(parts[5].Trim(), out allUsers);
} 
```

然后只需使用文本框中的数字和 SQL 查询即可：

```
textBox2.Text = dayUsers.ToString();
textBox3.Text = allUsers.ToString();

string query = "UPDATE USER_NUMBERS SET NUMBERZ=" + dayUsers + "WHERE UPTIME=DAYHK" 
```

**编辑：** 鉴于 textBox1 中有四行数据，您可以使用类似这样的方法来提取包含数字的字符串：

```
string[] inputLines = textBox1.Text.Split('\n');
if (inputLines.Length == 4)
{
    string dayUsers = inputLines[2].Substring(inputLines[2].IndexOf(':') + 1).Trim();
    string allUsers = inputLines[3].Substring(inputLines[3].IndexOf(':') + 1).Trim();
} 
```

**编辑 2：** 关于在 TextBox1 中解析可能不完整数据的代码的建议：

```
private void buttonSQL_Click(object sender, EventArgs e)
{
    // Get unsaved input from text box
    string input = textBox1.Text;
    string[] inputLines = input.Split('\n');

    // Find and process relevant input
    foreach(string line in inputLines)
    {
        if (line.EndsWith("\r")) // Make sure line is complete
        {
            if (line.StartsWith("Today's total users: "))
            {
                string dayUsers = line.Substring(20).Trim();
                textDU.Text = dayUsers;
                // SQL query...
            }
            else if (line.StartsWith("All-time total users: "))
            {
                string allUsers = line.Substring(21).Trim();
                textAU.Text = allUsers;
                // SQL query...
            }
        }
    }

    // Only keep unparsed text in text box
    textBox1.Text = inputLines[inputLines.Length - 1];
} 
```

# android - PayPal MPL - 如何让用户选择金额？

> ID：11084851
> 
> 赞同：1
> 
> 时间：2012-06-18T14:21:22.977
> 
> 标签：android, paypal

我目前正在我的应用程序中实施“捐赠”选项，并决定使用 PayPal（请参阅：[通过应用内结算捐赠](https://stackoverflow.com/questions/6001148/donate-via-in-app-billing)）

在阅读了文档等之后，决定使用 PayPal 移动支付库 (MPL)。一切似乎都对我有用（交易显示在沙箱等中）

但是，我目前只是将捐款金额硬编码为 5 美元。我想知道是否有一种好方法可以让用户选择他们想要捐赠的金额。

目前我能找到的唯一“解决方案”是首先显示一个对话框，询问用户捐赠金额 - 但这感觉很难看。希望有更好的方法来实现这一点！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:38:25.070

为什么显示对话框很难看？这是提示用户输入金额的一种非常常见的方式。

您可以将其默认设置为 5 美元，还可以添加单选按钮以在固定金额之间进行选择。添加一些文本（“欢迎任何捐赠，随意选择金额，......”）这样您就不会只有一个按钮和一个文本字段。目标只是制作一个“漂亮”的对话。

如果您想让您的用户选择金额，您实际上没有其他选择。

# java - 哪些 ASCII 代码可能会在文本中呈现为空格？

> ID：11084852
> 
> 赞同：0
> 
> 时间：2012-06-18T14:21:28.543
> 
> 标签：java, ascii

假设我有一个这样的实用功能 -

```
public static boolean isABlankSpace(char c)
  {

     // returns true if the char c is rendered as a blank space
  } 
```

我目前的实现只做-

```
if(c == ' ') 
 {
    return true;
 } 
```

但我意识到许多其他 ASCII 代码可以呈现为空白。那么这些ASCII码是什么？这将如何改变我的实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:24:39.873

你可以使用：

```
Character.isWhitespace(c); 
```

这是一个内置的实用方法。它的作用细节在[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isWhitespace%28char%29)中。请注意，它也会为换行符（等）返回`\n`true `\r`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:23:45.163

我将再添加2个：

制表符 \t

和

零宽度空间：

[http://en.wikipedia.org/wiki/Zero-width_space](http://en.wikipedia.org/wiki/Zero-width_space)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:29:23.383

```
Character.isSpaceChar(c); 
```

如果字符是以下任何一种，则返回 true：

```
SPACE_SEPARATOR
LINE_SEPARATOR
PARAGRAPH_SEPARATOR 
```

[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html#isSpaceChar%28char%29)

为避免其他字符被解释为空格字符，您可以转换为 ASCII：

```
int j = (int) c;
if(j == 32) return true; 
```

但当然要考虑 unicode 构建。

# android - 如何在 Android 中将媒体播放器管理为钢琴键盘？

> ID：11084853
> 
> 赞同：0
> 
> 时间：2012-06-18T14:21:35.663
> 
> 标签：android, android-layout, android-widget, media-player

我正在尝试制作一个小型钢琴键盘，但在媒体播放器的管理和按钮的触摸方面发现了一些问题。这是我到目前为止写的代码：

```
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.Button;
public class KeyboardPianoActivity extends Activity {

Button dooT,reT,miT,faT,solT,laT,siT,doodT,redT,fadT,soldT,ladT,doo1T,re1T,mi1T,fa1T,sol1T,la1T,si1T,doo1dT,re1dT,fa1dT,sol1dT,la1dT,doo2T;

MediaPlayer m1; 
MediaPlayer m2;
MediaPlayer m3;
MediaPlayer m4;
MediaPlayer m5; 
MediaPlayer m6; 
MediaPlayer m7,m8,m9,m10,m11,m12;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
setContentView(R.layout.main);

dooT = (Button) findViewById(R.id.button1);
reT = (Button) findViewById(R.id.button2);
miT = (Button) findViewById(R.id.button3);
faT = (Button) findViewById(R.id.button4);
solT = (Button) findViewById(R.id.button5);
laT = (Button) findViewById(R.id.button6);
siT = (Button) findViewById(R.id.button7);

m1 = MediaPlayer.create(getBaseContext(), R.raw.do1);
m2 = MediaPlayer.create(getBaseContext(), R.raw.re);
m3 = MediaPlayer.create(getBaseContext(), R.raw.mi);
m4 = MediaPlayer.create(getBaseContext(), R.raw.fa);
m5 = MediaPlayer.create(getBaseContext(), R.raw.sol);
m6 = MediaPlayer.create(getBaseContext(), R.raw.la);
m7 = MediaPlayer.create(getBaseContext(), R.raw.si);

dooT.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {

m1.start();
}
});

reT.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {

m2.start();
}
});

miT.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {

m3.start();
}
});

faT.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {

m4.start();
}
});

solT.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {

m5.start();
}
}); 
}
} 
```

这是 LogCat：

```
E/AndroidRuntime(29177): FATAL EXCEPTION: main
E/AndroidRuntime(29177): java.lang.NullPointerException
E/AndroidRuntime(29177): at      it.bisemanuDEV.piano.KeyboardPianoActivity$1.onClick(KeyboardPianoActivity.java:71)
E/AndroidRuntime(29177):    at android.view.View.performClick(View.java:2408)
E/AndroidRuntime(29177):    at android.view.View$PerformClick.run(View.java:8819)
E/AndroidRuntime(29177):    at android.os.Handler.handleCallback(Handler.java:603)
E/AndroidRuntime(29177):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(29177):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(29177):    at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(29177):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(29177):    at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(29177):    at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)    
E/AndroidRuntime(29177):    at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(29177):    at dalvik.system.NativeStart.main(Native Method) 
```

我仍然是 Android 编程的初学者，我想正确管理按钮和媒体播放器的行为，以模拟钢琴键盘的操作。我希望你的一些建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:21:11.060

不要`getBaseContext()`用来创建`MediaPlayer`对象，使用`getApplicationContext()`or `this`，这取决于它需要的持久性。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/1027438/752320)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:47:01.413

对于这样的应用程序，您不想使用它`MediaPlayer`来完成所有这些工作。 `SoundPool`专为需要短音效的项目而设计。运行这么多`MediaPlayer`实例将非常慢。

[http://developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)

# php - Symfony2 - bin/vendors install - 无法导入资源 config.yml

> ID：11084858
> 
> 赞同：0
> 
> 时间：2012-06-18T14:21:47.550
> 
> 标签：php, symfony, yaml, symfony-sonata

按照[安装说明](http://sonata-project.org/bundles/admin/2-0/doc/reference/installation.html)，我添加了

```
#depts
[SonataAdminBundle]
    git=git://github.com/sonata-project/SonataAdminBundle.git
    target=/bundles/Sonata/AdminBundle
    version=origin/2.0 
```

和

```
#app/config/config.yml
sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]

        sonata.block.service.text:
        sonata.block.service.action:
        sonata.block.service.rss: 
```

启动了更新

```
$ php bin/vendors install 
```

所有供应商捆绑包都已更新/安装，但在`SonataAdminBundle`写入之后

```
[Symfony\Component\Config\Exception\FileLoaderLoadException]                 
Cannot import resource "/var/www/Symfony/app/config/config.yml" from "/var/  
www/Symfony/app/config/config_dev.yml".                                      

[InvalidArgumentException]                                                   
There is no extension able to load the configuration for "sonata_block" (in  
/var/www/Symfony/app/config/config.yml). Looked for namespace "sonata_bloc  
k", found "framework", "security", "twig", "monolog", "swiftmailer", "doctr  
ine", "assetic", "sensio_framework_extra", "jms_security_extra", "glide_rep  
ort", "fos_user", "glide_user", "acme_demo", "web_profiler", "sensio_distri  
bution"                                                                      

[Symfony\Component\Config\Exception\FileLoaderLoadException]                 
Cannot import resource "/var/www/Symfony/app/config/config.yml" from "/var/  
www/Symfony/app/config/config_dev.yml".                                      

[InvalidArgumentException]                                                   
There is no extension able to load the configuration for "sonata_block" (in  
/var/www/Symfony/app/config/config.yml). Looked for namespace "sonata_bloc  
k", found "framework", "security", "twig", "monolog", "swiftmailer", "doctr  
ine", "assetic", "sensio_framework_extra", "jms_security_extra", "glide_rep  
ort", "fos_user", "glide_user", "acme_demo", "web_profiler", "sensio_distri  
bution" 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:51:13.197

SonataAdminBundle 有许多依赖项，因为它是在您引用的说明中编写的。那些是：

```
 SonataCacheBundle
    SonataBlockBundle
    SonatajQueryBundle
    KnpMenuBundle (Version 1.1.*)
    Exporter 
```

您可能错过了 SonataBlockBundle（至少错误表明您没有`sonata_block`从 config.yml 加载的扩展名）

# linux - 安装scrapy（openSSL）

> ID：11084863
> 
> 赞同：1
> 
> 时间：2012-06-18T14:22:10.377
> 
> 标签：linux, centos, scrapy, pyopenssl

我现在使用scrapy 几个月了。我一直在几台机器上使用它，从来没有遇到过麻烦。我在 Windows xp 和 7 上使用过它，我也在 Arch linux 上使用过它，安装时从来没有遇到过问题。几乎它只是 pip install scrapy 并完成了。

现在我试图在使用 CentOS 的生产服务器上设置它。由于 CentOS 默认有 python2.4，所以我首先并行安装了 python2.7。我还为python 2.7安装了virtualenv，那时一切看起来都不会出错，我有干净的环境并有我的点子。

但是当我尝试 pip install scrapy 时，它给了一个错误。

```
OpenSSL/ssl/connection.c: In function 'ssl_Connection_set_context':

OpenSSL/ssl/connection.c:289: warning: implicit declaration of function'SSL_set_SSL_CTX'

OpenSSL/ssl/connection.c: In function 'ssl_Connection_get_servername':

OpenSSL/ssl/connection.c:313: error: 'TLSEXT_NAMETYPE_host_name' undeclared (first use in this function)

OpenSSL/ssl/connection.c:313: error: (Each undeclared identifier is reported only once

OpenSSL/ssl/connection.c:313: error: for each function it appears in.)

OpenSSL/ssl/connection.c:320: warning: implicit declaration of function 'SSL_get_servername'

OpenSSL/ssl/connection.c:320: warning: assignment makes pointer from integer without a cast

OpenSSL/ssl/connection.c: In function 'ssl_Connection_set_tlsext_host_name':

OpenSSL/ssl/connection.c:346: warning: implicit declaration of function 'SSL_set_tlsext_host_name'

error: command 'gcc' failed with exit status 1 
```

下面是保存在 pip 日志文件中的错误。

为包 pyOpenSSL 运行 setup.py egg_info

```
running egg_info
writing pip-egg-info/pyOpenSSL.egg-info/PKG-INFO
writing top-level names to pip-egg-info/pyOpenSSL.egg-info/top_level.txt
writing dependency_links to pip-egg-info/pyOpenSSL.egg-info/dependency_link$
warning: manifest_maker: standard file '-c' not found 
```

如果有人知道它可能是什么，或者有这个问题，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:42:06.477

这似乎是 pyOpenSSL 的已知错误

[https://bugs.launchpad.net/pyopenssl/+bug/845445](https://bugs.launchpad.net/pyopenssl/+bug/845445)

我通过手动安装 0.12 版本解决了

[http://pypi.python.org/pypi/pyOpenSSL/0.12](http://pypi.python.org/pypi/pyOpenSSL/0.12)

# java - 在Java中读取可能被另一个进程修改的文件

> ID：11084868
> 
> 赞同：2
> 
> 时间：2012-06-18T14:22:30.533
> 
> 标签：java, java-io

我想知道如果我尝试在 Java 中读取可能被其他进程修改的文件会发生什么。例如给定伪代码：

```
File f = new File("a");

if (f.exists()) {
    // A
    BufferedReader br = new BufferedReader(new FileReader(f));
    // B
    String line = "";

    while ((line = br.readLine() ) != null ) {
        // C
        out.println(line);
    }
} 
```

如果在那些注释的地方（A/B/C）文件名被另一个进程更改了会发生什么？如果文件被删除或被另一个文件替换，它会有所不同吗？如果实现了不同类型的 od 文件读取，是否会受到影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:36:32.907

如果不同的进程正在处理您的文件，则 if(f.exists()) 逻辑不会对您有太大帮助：在它完成执行但在下一行执行之前，结果可能会有所不同。

如果文件的文件名在点//A 发生更改，您将根据[FileReader 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html#FileReader%28java.io.File%29)获得 FileNotFoundException 。如果文件被其他读者替换，则不应该注意到。

在此之后，您的 VM 应该可以控制该文件，并且大多数操作系统会阻止其他进程接触该文件。

但是，同时修改文件是一个坏主意，应该避免。如果您试图找到一种让两个进程进行通信的方法，一个常见的选择是使用内存映射文件。同样，另一种解决方案可能会更合理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T14:38:33.760

`exists()`您可以并且应该通过删除测试和捕获来消除点 A，`FileNotFoundException,`一旦打开文件，它的名称对您来说并不重要，并且在某些操作系统上，无法重命名打开的文件。此外，没有理由初始化 'line' 变量。

# c# - DotNetZip 保存位置

> ID：11084870
> 
> 赞同：2
> 
> 时间：2012-06-18T14:22:32.403
> 
> 标签：c#, zip, dotnetzip

嗬嗬！

```
 using (ZipFile zip = new ZipFile())
 {
     // add this map file into the "images" directory in the zip archive
     zip.AddFile("c:\\images\\personal\\7440-N49th.png", "images");
     // add the report into a different directory in the archive
     zip.AddFile("c:\\Reports\\2008-Regional-Sales-Report.pdf", "files");
     zip.AddFile("ReadMe.txt");
     zip.Save("MyZipFile.zip");
 } 
```

此示例将 MyZipFile.zip 存储在“C:\Program Files (x86)\IIS Express”中，我在网上找不到任何简单的示例有没有办法更改该路径？我怀疑我有权在我的虚拟主机上去那里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T14:24:05.287

在您的保存方法中或在声明时更改路径。

```
ZipFile zip = new ZipFile("C:\\MyFile.Zip"); 
```

或者

```
using (ZipFile zip = new ZipFile())
 {
     // add this map file into the "images" directory in the zip archive
     zip.AddFile("c:\\images\\personal\\7440-N49th.png", "images");
     // add the report into a different directory in the archive
     zip.AddFile("c:\\Reports\\2008-Regional-Sales-Report.pdf", "files");
     zip.AddFile("ReadMe.txt");
     zip.Save("C:\\MyZipFile.zip");
 } 
```

更多帮助[DotNetZip](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)

# maven-3 - 从测试范围 Maven 中排除 servlet-api

> ID：11084871
> 
> 赞同：15
> 
> 时间：2012-06-18T14:22:37.753
> 
> 标签：maven-3

我的 pom.xml 中有以下依赖项，因此我的 IDE（IntelliJ）在编译期间具有可用的 servlet-api 类，但在构建中未提供。

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>3.0-alpha-1</version>
    <scope>provided</scope>
 </dependency> 
```

但是在测试范围内运行时，提供的范围会将此依赖项中的类添加到类路径中，这对于我以编程方式启动的 Jetty 来说是个问题。因为它已经在它的图书馆里了，所以我得到了一个

```
 java.lang.SecurityException: class "javax.servlet.FilterRegistration"'s signer information does not match signer information of other classes in the same package 
```

如果我删除此依赖项，Jetty 服务器会在测试范围内正确启动，但我需要此依赖项才能让 IntelliJ 编译我的代码。解决此问题的最佳方法是什么，有没有办法可以排除测试范围的这种依赖关系？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T06:08:58.463

我自己也遇到了这个问题，想分享一下：

*   依赖`javax.servlet:servlet-api:3.0-alpha-1`，有范围`provided`，因此它不会干扰我的 WAR 最终部署到的容器
*   依赖于`org.eclipse.jetty:jetty-webapp`，具有范围`test`，以便我可以将 Jetty Server 作为单元测试的一部分运行
*   `org.eclipse.jetty.orbit:javax.servlet:3.0.0.v201112011016`随后对, 所需的传递依赖`jetty-webapp`

排除`jetty.orbit:javax.servlet`是没有选择的（对我来说），因为 Jetty需要`Server`一个. 我最终这样做了：`javax.servlet.HttpConstraintElement``javax.servlet:servlet-api:3.0-alpha-1`

1.  移除对的依赖`javax.servlet:servlet-api`
2.  `jetty.orbit:javax.servlet`显式添加对, 范围的依赖`provided`，因此完全替换`javax.servlet:servlet-api`

我不知道`HttpConstraintElement`它需要的交易是什么；也许它会在未来`javax.servlet:servlet-api`的 .

编辑：

顺便说一句，这个问题是我通过摆弄一个自动格式化 POM 文件的插件的配置来引入的。它重新排序了依赖关系，因此与另一张海报重新排序 POM 文件的解决方案背道而驰。在我丰富的 Maven 经验中：如果您“依赖”依赖关系的顺序，那是**一种主要的气味**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T15:26:14.137

尝试将其设置为编译范围

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T05:10:12.833

我在尝试不在运行 junit 测试的类路径中包含 javax.servlet-api 时找到了解决方案。实际上，我将 servlet-api 移到了类路径中 jar 的最末端，然后启示来了……

我使用了错误版本的 servlet-api。我使用的是 2.5，但需要 3.0。Maven 范围我选择“提供”。适用于在 eclipse 中运行 junit 和“mvn test”执行。

不过，我不明白为什么没有冲突。如果我做对了，即使是“提供的”依赖项也会在测试时暴露在类路径中，所以可能会发生冲突 - 或者，当然 - 如果我完全命中了用于编译的 servlet-api 和码头的正确版本servlet-api 则没有冲突。

无论如何，它对我有用。

这是我的依赖项/* pom-setup for jetty + servlet api：

```
<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-server</artifactId>
    <version>8.1.4.v20120524</version>
    <type>jar</type>
    <scope>test</scope>
</dependency>

<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-servlet</artifactId>
    <version>8.1.4.v20120524</version>
    <type>jar</type>
    <scope>test</scope>
</dependency>

<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-webapp</artifactId>
    <version>8.1.4.v20120524</version>
    <type>jar</type>
    <scope>test</scope>
</dependency>

<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-jsp</artifactId>
    <version>8.1.4.v20120524</version>
    <type>jar</type>
    <scope>test</scope>
</dependency>

<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T03:37:43.163

对我来说，同样的错误来了。我发现旧版本的 Servlet (2.5) 与 servlet 3.0 一起存在于我的路径中。一旦我删除（排除）旧版本，我的问题就解决了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-06T05:42:17.493

我使用以下 sbt 项目设置来解决类似的问题：

```
 "any dependency program that includes servlet-api java library code" %  excludeAll ExclusionRule(organization = "org.eclipse.jetty.servlet-api"),
  "org.mortbay.jetty" % "servlet-api" % "3.0.20100224" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T17:44:16.387

您还可以混合使用 grizzly 和 jetty 依赖项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-03T17:42:45.640

在我的情况下，排除是不够的，但是将码头降级到 7.6.14.v20131031 对我有用。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-01-23T00:24:16.067

对于 Gradle 用户，使用 Jetty 运行基于 Spring WebMVC 的嵌入式 webapp 的设置适用于以下依赖项：

```
apply plugin: 'war'
apply plugin: 'jetty'
apply plugin: 'eclipse-wtp'
dependencies {

   // Logging support
   compile 'org.slf4j:slf4j-api:1.7.7'
   runtime 'org.slf4j:slf4j-simple:1.7.7'

   // Spring WebMVC part
   compile 'org.springframework:spring-web:4.0.6.RELEASE'
   compile 'org.springframework:spring-webmvc:4.0.6.RELEASE'
   compile 'org.springframework:spring-context:4.0.6.RELEASE'
   compile 'org.springframework:spring-core:4.0.6.RELEASE'
   compile 'org.springframework:spring-beans:4.0.6.RELEASE'
   compile 'org.springframework:spring-expression:4.0.6.RELEASE'

   // Jetty support
   compile 'org.eclipse.jetty:jetty-server:8.1.4.v20120524'
   compile 'org.eclipse.jetty:jetty-servlet:8.1.4.v20120524'
   compile 'org.eclipse.jetty:jetty-webapp:8.1.4.v20120524'
   compile 'org.eclipse.jetty:jetty-jsp:8.1.4.v20120524'

   // Web Container interaction
   //providedCompile 'javax.servlet:servlet-api:2.5'
   runtime 'jstl:jstl:1.2'

   // Unit Testing
   testCompile 'junit:junit:4.11'
   testCompile 'org.mockito:mockito-all:1.9.5'
   testCompile 'org.springframework:spring-test:3.2.0.RELEASE'
} 
```

# coldfusion - 为什么 valuelist 将整数转换为浮点数？

> ID：11084875
> 
> 赞同：1
> 
> 时间：2012-06-18T14:22:44.727
> 
> 标签：coldfusion

ColdFusion 的`valuelist`函数文档说它不评估这些值，这就是它过去对我的表现。我过去曾`valuelist`多次使用该功能，以前从未遇到过这个问题。我们使用的是 CF9.0.1，但这最初是在 CF9.0 的实例上弹出的。

`number`当我们从一个支持浮点值的 Oracle 数据库中提取值时，情况就出现了。存储的值都是整数，而不是浮点数。下面的代码复制了我们看到的行为。数据是通过我们可以更改（使用`CAST`）的存储过程检索的，但如果可能的话希望避免。

```
<cfscript>
    qryVLTest = queryNew('member_id') ;
    for ( i = 1; i LTE 10; i=i+1) {
      queryAddRow(qryVLTest,1) ;
      querySetCell(qryVLTest,'member_id',i) ;   
    }
    writedump(qryVLTest) ;
    writeoutput(valuelist(qryVLTest.member_id)) ;
</cfscript> 
```

转储显示我期望的值：整数 1-10。

但是，该`valuelist`函数的输出返回以下内容：

**1,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0**

第一个值之后的所有值都被评估并转换为浮点数。为什么会这样，将来如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T14:46:47.430

你有2个选择。你可以这样做：

```
querySetCell(qryVLTEst,"member_id","#i#") 
```

这应该强制一个字符串。或者，如果这是您想要的，您可以指定 INT（如 azawaza 所示）。

```
queryNew("member_id","Integer"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:29:49.700

我知道你说过你不想使用 CAST() 但也许你的意思是在 Oracle 中。请记住，您也可以使用 Q of a Q 在 CF 中进行 CAST。

运行您的 Oracle 查询，然后使用 Query of a Query 重铸数字，如

```
<cfquery name="blah" dbtype="query">
SELECT CAST(member_ID AS Integer) AS member_ID
FROM  myFancyPantsOracleQuery
</cfquery> 
```

那会做我认为的伎俩。

# mysql - 附加查询

> ID：11084877
> 
> 赞同：2
> 
> 时间：2012-06-18T14:22:51.717
> 
> 标签：mysql, sql, ms-access

一个快速的技术问题-

我有两个查询输出一些相同的数据。例如，假设两个查询都有列 X 和 Y，并且每个查询都有一行，每列中有一些数据。因此，我们在每个查询中都有单元格 X1 和单元格 Y1。

我将如何附加两个查询，以便仍然有两列 X 和 Y，但有两行？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T14:25:42.103

你会用`UNION`

> UNION 用于将多个 SELECT 语句的结果组合成一个结果集。

mysql：[http](http://dev.mysql.com/doc/refman/5.6/en/union.html) ://dev.mysql.com/doc/refman/5.6/en/union.html （Access也支持）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T14:28:27.873

您可以使用 UNION，但请记住列数必须相同：

```
mysql> select * from test_big;
+-------------+
| id          |
+-------------+
|          10 |
|          11 |
|   123456789 |
|  1234567890 |
| 12345678901 |
+-------------+
5 rows in set (0.00 sec)

mysql> select * from test;
+----+------+
| id | name |
+----+------+
|  0 | a    |
|  2 | 3    |
|  3 | none |
|  6 |      |
|  9 | a    |
| 11 | a    |
| 50 | a    |
+----+------+
7 rows in set (0.00 sec)

mysql> select * from test_big union select * from test;;
ERROR 1222 (21000): The used SELECT statements have a different number of columns
ERROR: 
No query specified 
```

但您可以使用相同数量的列来修复它

```
mysql> select * from test_big union select id from test;
+-------------+
| id          |
+-------------+
|          10 |
|          11 |
|   123456789 |
|  1234567890 |
| 12345678901 |
|           0 |
|           2 |
|           3 |
|           6 |
|           9 |
|          50 |
+-------------+
11 rows in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:25:46.440

```
[Your first query]

UNION

[Your second query] 
```

# asp.net - Facebook/Gmail/Twitter 与 Unity3D 的连接

> ID：11084878
> 
> 赞同：0
> 
> 时间：2012-06-18T14:22:51.720
> 
> 标签：asp.net, facebook, twitter, gmail, unity3d

我有一个需要注册的 Unity3D 应用程序。
用户需要在应用程序中注册。他可以简单地输入电子邮件地址和密码。这些用于访问应用程序。
但我想提供与其他现有帐户（如 facebook、gmail、twitter 等）连接的可能性……
这可能吗？一切都必须在 Unity 应用程序中，但可以使用 http 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:05:45.673

试试这些链接。我还没有开始与其他联合系统集成，但我相信这些链接将为您提供启动它所需的大部分内容。

*   [Google 的联合登录 API](https://developers.google.com/accounts/docs/OpenID)
*   [Facebook 的 OAuth 集成（用于 Unity）](http://forum.unity3d.com/threads/64332-Facebook-OAuth-API-how-to-add-Facebook-integration-into-your-desktop-game-%28-source%29)
*   [Unity 中的 Twitter OAuth 示例（由于不相关的原因无法正常工作）](http://answers.unity3d.com/questions/44489/post-data-via-wwwform-is-not-working-for-twitter-o.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:14:11.260

关于**Unity/Facebook**，我使用了一个非常好的教程： http:
[//www.paladinstudios.com/2011/11/15/facebook-and-unity-tutorial-part-one/](http://www.paladinstudios.com/2011/11/15/facebook-and-unity-tutorial-part-one/)
[http://www.paladinstudios.com/ 2011/11/24/facebook-and-unity-tutorial-part-two/](http://www.paladinstudios.com/2011/11/24/facebook-and-unity-tutorial-part-two/)
[http://www.paladinstudios.com/2011/12/06/facebook-and-unity-tutorial-part-three/](http://www.paladinstudios.com/2011/12/06/facebook-and-unity-tutorial-part-three/)

它使用 JavaScript Facebook Api 和有用的功能：

```
<UNITY> Application.ExternalCall("YourJavaFunction");
<JS>    getUnity().SendMessage("YourGameObject", "YourUnityFunction", yourdata); 
```

关于**Unity/Twitter**，我没有找到直接与 Unity 联系 Twitter 的方法。但我将 TweetSharp 与我的 asp.net c# 后端一起使用。
[https://github.com/danielcrenna/tweetsharp](https://github.com/danielcrenna/tweetsharp)
[https://dev.twitter.com/docs](https://dev.twitter.com/docs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:59:12.407

Facebook integration is going to be added in for iOS 6\. In addition to the twitter integration they already have. It may be worth it to wait to implement this feature until there's a unity wrapper for the iOS 6 feature. Though, you'd still have do to something different for google.

# c# - 如何在 XNA 中绘制和移动一个正方形？

> ID：11084879
> 
> 赞同：0
> 
> 时间：2012-06-18T14:22:56.743
> 
> 标签：c#, graphics, xna

我试图在 XNA 中绘制一个正方形，然后根据用户输入简单地用键盘移动它。不幸的是，我什至无法让正方形显示 - 我很肯定我在这里遗漏了一些东西，但我无法弄清楚它到底是什么。我计划创建一个可以在我的游戏中使用的原始形状的复杂层次结构。类的主要组件`Shape`被初始化，派生类（在这种情况下`Rect`）利用这些组件进一步使用，并配置它们。

我在这里做错了什么？

**代码**

*形状.cs*

```
public abstract class Shape
    {
        public Vector3 Center;
        public Color[] Colors;
        public bool SetColorsOnUpdate;

        public virtual Rectangle BoundingBox { get; set; }
        public float Radius { get { return mRadius; } }

        protected VertexBuffer mVertexBuf;
        protected IndexBuffer mIndexBuf;
        protected float mRadius;
        protected BasicEffect mShader;

        public Shape(Vector3 center, Color[] colors, int numVertices, float radius)
        {
            Colors = colors;
            Center = center;
            mVertexBuf = new VertexBuffer(Graphics.MainDevice, typeof(VertexPositionColor), numVertices, BufferUsage.WriteOnly);
            mIndexBuf = new IndexBuffer(Graphics.MainDevice, IndexElementSize.SixteenBits, numVertices, BufferUsage.WriteOnly);
            SetColorsOnUpdate = true;
            mShader = new BasicEffect(Graphics.MainDevice);
            mRadius = radius;
        }

        public abstract void Update();
        public abstract void Draw();
    } 
```

**矩形文件**

```
public class Rect : Shape
{
    public override Rectangle BoundingBox
    {
        get
        { 
            int x = (int)Center.X, y = (int)Center.Y;
            int diameter = (int)mRadius * 2;

            return new Rectangle(
                x, y,
                x + diameter, 
                y + diameter
            );
        }
    }

    const float TestRectZCoordinate = 0;
    const int NumVertices = 4;

    public Rect(Vector3 center, Color[] colors, float radius)
        : base(center, colors, NumVertices, radius)
    {
        if (colors.Length < NumVertices)
            throw new IndexOutOfRangeException(string.Format("Color array passed to Rect constructor MUST have an element index size of 4\. Current length passed is {0}", colors.Length));

        mShader.VertexColorEnabled = true;

        mVertexBuf.SetData<VertexPositionColor>(
                new VertexPositionColor[]
                {
                    new VertexPositionColor(new Vector3(Center.X + mRadius, Center.Y + mRadius, TestRectZCoordinate), Colors[0]),
                    new VertexPositionColor(new Vector3(Center.X + mRadius, Center.Y - mRadius, TestRectZCoordinate), Colors[1]),
                    new VertexPositionColor(new Vector3(Center.X - mRadius, Center.Y - mRadius, TestRectZCoordinate), Colors[2]),
                    new VertexPositionColor(new Vector3(Center.X - mRadius, Center.Y + mRadius, TestRectZCoordinate), Colors[3])
                }
            );

        mIndexBuf.SetData<short>(new short[] { 0, 1, 2, 3 });
    }

    public override void Update()
    {
        //TODO
    }

    public override void Draw()
    {
        mShader.World = Matrix.CreateWorld(Center, Vector3.Forward, Vector3.Up);
        mShader.CurrentTechnique.Passes[0].Apply();

        Graphics.MainDevice.SetVertexBuffer(mVertexBuf);
        Graphics.MainDevice.Indices = mIndexBuf;

        Graphics.MainDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, NumVertices, 0, 1);
    }
} 
```

**更新**

这是最新的 Rect.Draw() 实现。

```
public override void Draw()
    {
        Viewport viewport = Graphics.MainDevice.Viewport;

        mShader.World = Matrix.CreateWorld(Center, Vector3.Forward, Vector3.Up);
        mShader.View = Matrix.CreateLookAt(new Vector3(viewport.Width / 2, viewport.Height / 2, -5f), Center, Vector3.Up);
        mShader.CurrentTechnique.Passes[0].Apply();

        Graphics.MainDevice.SetVertexBuffer(mVertexBuf);
        Graphics.MainDevice.Indices = mIndexBuf;

        Graphics.MainDevice.DrawIndexedPrimitives(PrimitiveType.LineStrip, 0, 0, NumVertices, 0, 2);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:32:19.410

啊 - 我想我至少看到了你的一个问题。您正在绘制一个 TriangleList（请参阅[PrimitiveType](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.primitivetype.aspx)）并且您需要 6 个索引，而不是 4 个。

知道了。看起来您的顶点/索引顺序错误。我也没有看到投影矩阵。

这是对我来说非常有用的代码——我所做的只是添加一个投影矩阵、重新排序顶点、更改索引并修复图元计数。

[http://pastebin.com/tMKCxBLL](http://pastebin.com/tMKCxBLL)

希望这可以帮助！

# scala - 为什么我使用 Scala Enumeration 和 App mix-in 获得 NPE？

> ID：11084880
> 
> 赞同：1
> 
> 时间：2012-06-18T14:23:03.590
> 
> 标签：scala, nullpointerexception, enumeration

我有以下描述枚举的代码：

```
package aicore2.worker.scheduling
    object Priority extends Enumeration with App {
      type Priority = Value

      /**
       * Action is performed immediately, any running action is interrupted
       * and action queue is cleared
       */
      val ACHTUNG = Value

      /**
       * Action is performed before all LOW, NORMAL and HIGHER actions
       */
      val HIGH = Value

      /**
       * Action is performed before all NORMAL and LOW actions
       */
      val HIGHER = Value

      /**
       * Standart priority for most actions
       */
      val NORMAL = Value

      /**
       * Action is added to the end of the queue. Desired for non-critical maintenance actions
       */
      val LOW= Value

      Priority.values  foreach println
    } 
```

和一个测试：

```
package aicore2.worker.scheduling

import org.junit.Assert._
import org.junit.Test
import aicore2.worker.scheduling.Priority._

class PriorityTypeTests {

  @Test
  def toStringTest()  {
    //Priority.values  foreach println
    //Priority.main(Array("2"))
    assertEquals(HIGH.toString(), "HIGH")
  }

  @Test
  def stringParseTest() {
     assertEquals(Priority.withName("HIGH"), HIGH)
  }

} 
```

当我运行测试时，我得到 NPE (HIGH=null)。

当我将 Priority 作为 App 运行时，我会得到我想要的任何东西： ACHTUNG HIGH HIGH NORMAL LOW

在运行测试之前调用 Priority.main() 时得到相同的结果并且没有 NPE。当我从 Priority 标头（“with App”）中删除 App trait mix-in 时，所有测试都按预期通过。我知道当我混合 App 特征时，初始化顺序有些奇怪，但我是 Scala 的新手（来自 Java 领域的难民），还没有足够的经验来解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:37:23.633

`App``main`意味着在您运行该方法之前成员不会被初始化。在 REPL 中尝试以下操作：

```
object A { val x = "foo" }
object B extends App { val x = "foo" }
A.x // = "foo"
B.x // = null 
```

在您使用 App 的 Enumeration 类中，所有成员都`null`在您调用它的`main`方法之前。所以`HIGH.toString()`从你的测试方法中会导致一个 nullPointerException 因为`HIGH`没有被初始化。

`Enumeration`因此，赋予特征似乎是一个非常糟糕的主意`App`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:21:38.363

`App`trait 扩展了trait，延迟了其成员的`DelayedInit`初始化，直到它被显式请求（在`App`trait 的应用程序开始时）。您应该将其视为主要方法制作的对象。

有关`App`and`DelayedInit`特征的更多信息，您可以阅读[Scala 2.9.0 发行说明](http://www.scala-lang.org/node/9483)。

# android - 按下后退按钮时android黑屏

> ID：11084881
> 
> 赞同：1
> 
> 时间：2012-06-18T14:23:12.590
> 
> 标签：android, android-layout, android-intent

我想避免按下后退按钮时活动之间的黑屏。

如果我用 killProcess 杀死一个活动，我会得到相同的结果。

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

我宁愿不必使用 AsyncTask。我通过 activityforresult 中的意图调用该活动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T14:37:59.127

**黑屏通常表示布局尚未初始化。traceview 您的应用程序以查看每个布局加载之前所花费的时间。**

换句话说，您的活动仍在尝试加载布局。根据层次结构和复杂性，它可能会花费大量时间，尤其是如果您在设置内容视图或初始化视图之前有处理内容。

我100确定有你的问题。

**使用异步任务来正确处理加载和处理任务。**

**使用完成，从不手动终止任务。该活动具有应遵循的生命周期。**

# sql - 连接两个子查询或一个带有子查询的查询 SQL Server 2008

> ID：11084882
> 
> 赞同：3
> 
> 时间：2012-06-18T14:23:13.553
> 
> 标签：sql, sql-server, tsql

怪物编辑：查询现在将运行但返回不正确的答案。添加了粗略的架构。PatientID 不是 tblPatientVisits 表中的主键，因为同一个患者 ID 可以多次出现。

列出了每个县名，但每个 count(s.countyName) 和 count(t.countyname) 都为 1

```
PatientVisits   
PatientID   int
PatientState    varchar(2)
patientCounty   varchar(3)
visitNumber int - PK

tblStateCounties    
CPK stateCode   varchar(2)
CPK countyCode  varchar(3)
countyName  varchar(25)

SELECT t.countyName,
    count(t.countyName) as reAdmits ,count(s.countyName) as totalVisits
FROM (
    SELECT countyName,count(countyName) AS readmitCounts
    FROM (
        SELECT tblPatient.patientID
            ,tblStateCounties.countyName
        FROM tblPatient
        INNER JOIN tblPatientVisits
            ON tblPatient.patientID = tblPatientVisits.patientID
        INNER JOIN tblStateCounties
            ON tblPatientVisits.patientState = tblStateCounties.stateCode
                AND tblPatientVisits.patientCounty = tblStateCounties.countyCode
        GROUP BY tblPatient.patientID
            ,tblStateCounties.stateCode
            ,tblStateCounties.countyName
        HAVING (COUNT(tblPatient.patientID) > 1)
            AND (tblStateCounties.stateCode = '21')
        ) t
    GROUP BY countyname
    ) t
INNER JOIN (
    SELECT countyName
    FROM (
        SELECT tblStateCounties.countyName
            ,COUNT(tblStateCounties.countyName) AS counts
        FROM tblPatient
        INNER JOIN tblPatientVisits
            ON tblPatient.patientID = tblPatientVisits.patientID
        INNER JOIN tblStateCounties
            ON tblPatientVisits.patientState = tblStateCounties.stateCode
                AND tblPatientVisits.patientCounty = tblStateCounties.countyCode
        WHERE (tblStateCounties.stateCode = '21')
        GROUP BY tblStateCounties.countyName
        ) z
    ) s
    ON s.countyName = t.countyName
    group by s.countyname, t.countyname 
```

编辑：我有一个现在运行的查询，但它返回

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T15:36:04.363

没有样本数据和期望的结果很难说，但也许这就是你所追求的？

```
;WITH x AS 
(
  SELECT c.CountyName, v.patientCounty, v.patientState, p.patientID
    FROM dbo.tblPatient AS p
    INNER JOIN dbo.tblPatientVisits AS v
    ON p.patientID = v.patientID 
    INNER JOIN dbo.tblStateCounties AS c 
    ON v.patientState = c.stateCode 
    AND v.patientCounty = c.countyCode
  WHERE c.stateCode = '21'
),
y AS (SELECT CountyName, c = COUNT(*) FROM x GROUP BY CountyName),
z AS (SELECT CountyName, c = COUNT(PatientID) FROM x 
  GROUP BY CountyName, patientState, PatientID HAVING COUNT(*)>1)
SELECT y.countyName, reAdmits = MAX(COALESCE(z.c, 0)), totalVisits = MAX(y.c)
FROM y LEFT OUTER JOIN z
ON y.CountyName = z.CountyName
GROUP BY y.CountyName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:39:54.527

这个查询似乎有几个问题。我假设“s”的子查询旨在替换之前查询中的“s”。你熟悉“with”语法吗？这将接近您的表达方式。

无论如何，您的第一个子查询在 HAVING 子句和 GROUP BY 之间缺少一个“)”。此外，“s”子查询有一个 GROUP BY，但是“SELECT *”。

以下可能是您要表达的内容：

```
select t.countyName, count(t.countyName), s.countyName, count(s.countyName)
from (select countyName, count(countyName) as readmitCounts
      from (SELECT tblPatient.patientID, tblStateCounties.countyName
            FROM tblPatient INNER JOIN
                 tblPatientVisits
                 ON tblPatient.patientID = tblPatientVisits.patientID INNER JOIN
                 tblStateCounties
                 ON tblPatientVisits.patientState = tblStateCounties.stateCode AND
                    tblPatientVisits.patientCounty = tblStateCounties.countyCode
            GROUP BY tblPatient.patientID, tblStateCounties.stateCode, tblStateCounties.countyName
            HAVING (COUNT(tblPatient.patientID) > 1) AND (tblStateCounties.stateCode = '21')
           ) t
      group by countyname
     ) t inner join
     (select tblStateCounties.countyName
      from (SELECT tblStateCounties.countyName, COUNT(tblStateCounties.countyName) AS counts
            FROM tblPatient INNER JOIN
                 tblPatientVisits
                 ON tblPatient.patientID = tblPatientVisits.patientID INNER JOIN
                 tblStateCounties
                 ON tblPatientVisits.patientState = tblStateCounties.stateCode AND 
                    tblPatientVisits.patientCounty = tblStateCounties.countyCode
            WHERE (tblStateCounties.stateCode = '21')
       GROUP BY tblStateCounties.countyName
     )
     on s.countyName = t.countyName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:36:28.650

我认为您的问题过于复杂，并且可以在不将 2 个查询混合在一起的情况下完成此操作：

```
SELECT  t.countyName, 
        SUM(Admissions) AS TotalAdmissions,
        COUNT(*) AS TotalPatients,
        COUNT(CASE WHEN Admissions > 1 THEN PatientID END) AS TotalPatientsReadmitted
        SUM(Admissions - 1) AS TotalReadmissions
FROM    (   SELECT  tblPatient.PatientID,
                    tblStateCounties.countyName,
                    COUNT(*) AS Admissions
            FROM    tblPatient 
                    INNER JOIN tblPatientVisits 
                        ON tblPatient.patientID = tblPatientVisits.patientID 
                    INNER JOIN tblStateCounties 
                        ON tblPatientVisits.patientState = tblStateCounties.stateCode 
                        AND tblPatientVisits.patientCounty = tblStateCounties.countyCode
            WHERE   tblStateCounties.stateCode = '21'
            GROUP BY tblPatient.PatientID, tblStateCounties.countyName
        ) AS t
GROUP BY CountyName 
```

我刚刚拿走了你的`FROM`并`JOINS`得到了我认为你需要的所有数据（还有更多）。我希望为这些列提供足够合理的名称，以便清楚地显示每个列应该显示的内容。

# jquery - jQuery选中或显示

> ID：11084886
> 
> 赞同：1
> 
> 时间：2012-06-18T14:23:22.230
> 
> 标签：jquery

`testdiv`我对这段代码有疑问，我想删除所有`style="display:none"`未检查的字段。

但是使用此代码，它会删除所有`testdiv`.

```
$("#post_form").submit(function() {
    if ($('div[id^="testdiv_"]').not(":checked") || $('div[id^="testdiv_"]').css("display", "none")) {
        $('div[id^="testdiv_"]').remove();
        alert('OK');
    }
    else {
        alert('Error');
    }
}); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:30:29.830

选择器`$('div[id^="testdiv_"]')`选择所有匹配的元素。您的代码执行以下操作：

```
For each element that matches($('div[id^="testdiv_"]').not(":checked") || $('div[id^="testdiv_"]').css("display", "none"))
    Remove all elements that match $('div[id^="testdiv_"]') 
```

您可能想使用 jQuery 的 .each：[http ://api.jquery.com/jQuery.each/C](http://api.jquery.com/jQuery.each/C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:27:15.387

`$('div[id^="testdiv_"]').css("display", "none")`将所有 id 以“testdiv_”开头的 div 设置为无显示，`$('div[id^="testdiv_"]').remove();`然后方便地删除。

要检查 css，而不是设置 css，请使用`$('div[id^="testdiv_"]').css("display") === "none"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:27:43.820

```
$('div[id^="testdiv_"]').css("display", "none") 
```

这会将所有内容都`$('div[id^="testdiv_"]')`隐藏起来。

试试`$('div[id^="testdiv_"]:hidden')`。

还，

```
$('div[id^="testdiv_"]').remove(); 
```

这将删除所有`$('div[id^="testdiv_"]')`. 尝试这样的事情：

```
$('div[id^="testdiv_"]:hidden,div[id^="testdiv_"]:not(:checked)').remove(); 
```

# performance - jQuery Mobile 在 iPad 上非常慢

> ID：11084887
> 
> 赞同：5
> 
> 时间：2012-06-18T14:23:22.293
> 
> 标签：performance, jquery-mobile, mobile-safari

我正在使用客户端的 jQuery Mobile 和服务器端的 PHP 和 MySQL 开发一个 Web 应用程序。该应用程序在 Safari、Chrome 和 Firefox 等桌面浏览器上运行良好。然而，在 iPad 上——应用程序作为网页剪辑从主屏幕打开——应用程序的性能要差得多。滚动工作正常，但点击链接从服务器加载页面会非常慢。

iPad 屏幕的记录显示（例如）在点击后需要 0.3 秒才能突出显示点击的元素并显示加载程序。从开始 1.0 秒后，打开页面的下半部分被渲染/显示（在加载器下方）。然后在页面上部显示之前需要另外 0.6 秒，使加载页面所需的总时间为 1.6 秒。可以在[此处](http://cl.ly/1x1y1j0K1c3e1s1x162N)找到显示此过程的视频（以原始速度的 25% 播放） 。

[![加载过程](../Images/790ca96164388e908496ddfa3e9dbead.png)](https://i.stack.imgur.com/NKkEp.jpg)

我知道加载页面（通过 WiFi）需要一些时间，但我不明白为什么渲染页面的上半部分需要额外的 0.6 秒。假设页面在 1.0 秒后完全加载（因为页面的下半部分已经显示），我认为这也需要很长时间，因为在我的 Mac 上的 Safari 上只需要大约 0.5 秒. 但这可能是因为我的 iPad 处理器速度较慢和 WiFi 连接滞后。

希望有人知道一些（客户端）优化以使应用程序执行（或感觉）更快。我已经在 jQuery Mobile 中禁用了动画，我将尝试自己优化服务器端。

* * *

也许这些事情很重要：

*   我从服务器返回的所有页面都`<head>`包含多个引用的样式表和脚本。jQuery Mobile 是否忽略`<head>`或节食这需要处理能力？
*   我在大多数页面上都有固定的页眉和页脚。我`<div data-role="…" data-position="fixed" data-id="…" data-tap-toggle="false">`用来完成这个。页眉和页脚也包含在所有页面中。
*   大多数标题的左侧有一个按钮（`<a data-role="button">`标签），中间有一个标题（`<h1>`标签），右侧有一个控制组（`<div data-role="controlgroup">`），包含两个按钮（`<a data-role="button">`）。
*   标题中的一个按钮设置为将页面预取到它链接的位置 ( `<a href="…" data-role="button" data-rel="dialog" data-prefetch>`)。这个按钮包含在每个页面中，但每个页面`href`上的链接都是相同的。**这可能是什么..？**
*   所有页脚都有一个导航栏 ( `<div data-role="navbar">`)，其中包含多个项目 ( `<li><a>`)。
*   某些页面是具有过滤功能的列表视图 ( `<ul data-role="listview" data-filter="true">`)。目前仅包含几个项目（`<li><a>`，最多 5 个）和列表分隔符（`<li data-role="list-divider">`）。
*   其他页面是`<form>`包含列表视图的表单 ( ) ( ) ，其中包含`<ul data-role="listview" data-inset="true">`多个表单字段 ( `<li data-role="fieldcontain">`)。

嗯，这些都是我能想到的“特别”的东西。如果您需要了解更多信息或查看一些源代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:13:13.943

long`listviews`非常慢...如果您要在 pagebefore/show 中填充列表；尝试最初添加较少数量的`li`s 并在小超时后附加剩余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:39:59.857

这个问题（大部分）通过更新到 jQuery Mobile 1.1 得到解决。该版本包括一些与性能相关的修复/优化。

# c - C中带括号的指针

> ID：11084898
> 
> 赞同：2
> 
> 时间：2012-06-18T14:24:06.583
> 
> 标签：c, pointers

我在我正在分析的一些代码中发现了这行代码：

```
Mintau = (double*) malloc(FadeAll.num_paths*sizeof(double)); 
```

我还在这里找到了一个问题（它与出现的其他问题重复），它解释了指针的不同语法，包括：

```
int *ptr;  
int * ptr;  
int* ptr; 
```

我应该解释一下，我完全理解以上三个人都在说同样的事情。最后一个是最接近我的代码行的那个。我想知道为什么在这种情况下必须用括号括起来？如果这是一个重复的问题，我深表歉意，但我找不到任何关于此的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T14:26:05.933

这三个声明之间没有区别：

```
int *ptr;  
int * ptr;  
int* ptr; 
```

`(double*)`必须在括号中，因为它是演员表。

[在此链接](http://en.wikipedia.org/wiki/Type_conversion)中阅读有关铸造的一些信息

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T14:25:44.517

这意味着一个演员。该函数`malloc`返回一个`void*`. 将该`(double*)`值强制转换为 type `double*`。

在 C 中，这种强制转换是不必要的，因为任何指针类型都与`void*`. 但如果这是 C++，那么就需要演员表。

两者之间没有区别：

```
int *ptr;  
int * ptr;  
int* ptr; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T14:29:23.413

这意味着它是从`malloc()`的返回类型 ( `void *`) 到的强制转换`float *`。什么是演员表？[http://en.wikipedia.org/wiki/Type_conversion#Explicit_type_conversion](http://en.wikipedia.org/wiki/Type_conversion#Explicit_type_conversion)

顺便说一句，强制转换的返回值是一种非常糟糕的做法`malloc()`。看看为什么：[我要转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T18:24:23.280

`(double*)`是*演员*表；每当您看到形式为`(`*type-name* `)` *expression*的表达式时，它的意思是“将*表达式的结果解释为**type-name 类型*的值”。在这种情况下，它的意思是“将结果解释`malloc`为指向`double`”的指针。

通常，一种类型（例如`char *`）的指针值不能直接分配给不同类型（例如`double *`）的指针变量，因此您必须使用强制转换表达式将源值显式转换为目标类型。在 1989 年标准之前`malloc`，`calloc`, 和`realloc`所有返回`char *`值，因此您必须使用强制转换将结果分配给不同的指针类型。

该`void *`类型在 1989 年标准中作为通用指针类型引入，无需强制转换*即可*`*alloc`分配给不同的指针类型，并且函数已更改为返回该类型的值。显式转换结果`malloc`现在被认为是不好的做法。

强制转换表达式中的类型结构与声明中的类型结构非常匹配，只是没有被声明的事物的名称。这可能最好用一些例子来解释。

`int *p`声明`p`为指向`int`; 要将表达式的结果转换为指向 的指针`int`，请编写`(int *)`. 它与声明相同，减去标识符`p`。

这里还有几个例子：

```
声明类型
------------ ---- ----
int (*ap)[10] (int (*)[10]) 指向 int 的 10 元素数组的指针
int (*f)(void) (int (*)(void)) 指向返回 int 的函数的指针
char **p (char **) 指向 char 的指针

```

同样，强制转换表达式的结构与声明的结构相同，只是减去了被声明事物的名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T14:28:14.393

它在括号中，因为它是一个[cast](http://www.cplusplus.com/doc/tutorial/typecasting/)，它基本上告诉编译器，嘿，你在那里，将这块内存视为具有这种类型，因为我这么说（顺便说一句，它是 C 中错误的主要原因，除了内存分配/释放对不匹配）。

在 C 中，转换 的结果也被认为是不好的形式`malloc`，因为转换 from`void *`是自动的。它只是添加代码噪音而没有任何好处。

至于三种类型的变量声明，请记住`int* a, b;`与`int *a, *b`. 我更喜欢后者，因为它显式地显示了绑定到变量名的指针，而不是类型。

# perl - 在 Perl 中解析由空字节分隔的字符串

> ID：11084900
> 
> 赞同：10
> 
> 时间：2012-06-18T14:24:07.437
> 
> 标签：perl, null, unpack

**/proc**文件系统包含正在运行的进程的详细信息。例如，在 Linux 上，如果您的 PID 为**123**，则该进程的命令行将在**/proc/123/cmdline中找到**

[cmdline](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)使用空字节来分隔参数。

我怀疑应该使用**unpack**但我不知道如何使用各种模板（“x”、“z”、“C*”、“H*”、“A*”等）只是不工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T14:27:44.390

一个简单`split("\0", $line)`的就可以完成这项工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-18T05:08:51.143

您可以设置`$/`为`"\0"`. 例子：

```
perl -ne 'INIT{ $/ = "\0"} chomp; print "$_\n";' < /proc/$$/environ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T14:49:38.720

我实际上并不推荐使用它，只是为了您的信息：本来可以工作的解压模板是`unpack "(Z*)*", $cmdline`. `Z`打包和解包以 null 结尾的字符串，但因为它是字符串类型，所以它是一个*length*之后的数字或星号，而不是重复 -`Z*`解包*一个*任意长度的以 null 结尾的字符串。要解压其中的*任意*数量，需要将其包装在括号中，然后对括号组应用重复，这样就可以得到`(Z*)*`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-10T22:27:20.897

这可以通过命令行开关`-l`和来完成`-0`，或者通过手动更改`$/`.

`-l`并且`-0`是顺序相关的，可以多次使用。

感谢您启发我阅读[perlrun](http://perldoc.perl.org/perlrun.html#Command-Switches)文档。

## 例子：

```
# -0    : set input separator to null
# -l012 : chomp input separator (null) 
#         and set output separator explicitly to newline, octol 012.
# -p    : print each line
# -e0   : null program

perl -0 -l012 -pe0 < /proc/$$/environ 
```

.

```
# -l    : chomp input separator (/n) (with -p / -n)
#         and set output separator to current input separator (/n)
# -0    : set input separator to null
# -p    : print each line
# -e0   : null program

perl -l -0 -pe0 < /proc/$$/environ 
```

.

```
# partially manual version
# -l    : chomp input separator (/n) (with -p / -n)
#         and set output separator to current input separator (/n)
# -p    : print each line
# -e    : set input record separator ($/) explicitly to null
perl -lpe 'INIT{$/="\0"}'  < /proc/$$/environ 
```

## 捆绑问题：

```
# DOESN'T WORK:
# -l0   : chomp input separator (/n) (with -p / -n)
#         and set output separator to \0
# -e0   : null program
perl -l0 -pe0 
```

.

```
# DOESN'T WORK:
# -0    : set input separator to null (\0)
# -l    : chomp input separator (\0) (with -p / -n)
#         and set output separator to current input separator (\0)
# -e0   : null program
perl -0l -pe1 
```

# c# - HighCharts 使用 SQL 数据库中的数据填充饼图

> ID：11084901
> 
> 赞同：1
> 
> 时间：2012-06-18T14:24:09.250
> 
> 标签：c#, highcharts

我是网页设计的新手，我正在尝试使用 C# 使用 SQL 数据库中的数据填充一个 highcharts 饼图。我已经成功地为条形图完成了它，但在使用饼图时遇到了问题。基本上我有一个表 tblReport1 包含 2 个字段 CustomerType 和 TotalOrders

我可以让它引入值，但我不能让我的切片重命名为 CustomerType 字段中的数据。我在这个论坛上尝试了一些建议，但无法让它们发挥作用。以下是我的代码，任何建议将不胜感激。

```
private void Report1()
{
    dsSeries = BindData();

    if (dsSeries == null) return;

    foreach (DataRow dr in dsSeries.Tables[0].Rows)
    {
        hidXCategories11.Add(dr["CustomerType"]);
    }

    foreach (DataRow dr1 in dsSeries.Tables[0].Rows)
    {
        hidValues11.Add(Convert.ToInt32(dr1["TotalOrders"]));
        yValues = hidValues11.ToArray(typeof(object)) as object[];
    }

    DotNet.Highcharts.Highcharts chart = new DotNet.Highcharts.Highcharts("chart")
    .InitChart(new Chart { PlotShadow = false })
    .SetTitle(new Title { Text = "Orders by Customer Type" })
    .SetTooltip(new Tooltip { Formatter = "function() { return '<b>'+ this.point.name +'</b>: '+ this.y +' Orders'; }" })
    .SetPlotOptions(new PlotOptions
    {
        Pie = new PlotOptionsPie
        {
            ShowInLegend = true,
            AllowPointSelect = true,
            DataLabels = new PlotOptionsPieDataLabels
            {
                Formatter = "function() { return '<b>'+ this.point.name +'</b>: '+ this.y; }"
            }
        }
    })

    .SetSeries(new[]
       {
               new Series { Type = ChartTypes.Pie, Name = "help!", Data = new Data(yValues) }
       });

    ltrChart.Text = chart.ToHtmlString();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:39:15.750

查看[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie-basic/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie-basic/)饼图数据的格式是两部分，标签和数据项。

在您看来，系列数据只是一个整数数组。

所以我认为你需要改变你的`Series`对象来接受不同格式的数据。

遗憾的是，Highcharts.Net 文档中的示例有点缺乏，并且似乎没有这样的示例，因此您可能必须查看智能感知提供的内容。

但最重要的是，您的饼图需要在数据系列中命名，而不是作为类别或其他任何名称。

**编辑一些示例代码**

我正在查看他们的网站，他们在那里有一个帮助论坛，其中包含以下示例代码

```
 series.Add(new Serie
        {
            data = new object[] { 
                new object[] { "Firefox", 45 }, 
                new object[] { "IE", 24.8 }, 
                new object[] { "Chrome", 12.8 },
                new object[] { "Safari", 8.5 }, 
                new object[] { "Opera", 5.2 }, 
                new object[] { "Outros", 3.7 } 
            }
        }); 
```

资料来源：[http ://highcharts.codeplex.com/discussions/269347](http://highcharts.codeplex.com/discussions/269347)

我无法对此进行测试，但从帖子的上下文来看，它看起来应该可以完成这项工作。

# java - xss 攻击问题——使用 servletoutputstream.write(b, 0, b.length);

> ID：11084909
> 
> 赞同：0
> 
> 时间：2012-06-18T14:24:31.870
> 
> 标签：java, xss, servlet-filters

```
byte b[] = do.getFileUploaded();
servletoutputstream = response.getOutputStream();
            servletoutputstream.write(b, 0, b.length); 
```

我在 servletoutputstream.write(b, 0, b.length) 中有一个 XSS 攻击问题；语法说“将从 servlet 请求（“b”）接收的数据注入到 servlet 响应（可能的 XSS 攻击）”如何修复它。我正在使用 ESAPI 转义和过滤其他 xss 攻击问题。有没有人对此有任何/替代解决方案提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:46:32.823

您正在将接收到的数据发送回发送者。这就是消息的原因（来自什么？）。问题是，你为什么要这样做？解决方案是不这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T14:39:57.510

您必须将响应标头元数据设置为二进制。

# database - Libreoffice Base 中的关系和表格

> ID：11084910
> 
> 赞同：0
> 
> 时间：2012-06-18T14:24:31.680
> 
> 标签：database, libreoffice, libreoffice-base

我正在审核一些服务器，并且我有一个名为“Servers”的表，其中包含一些字段。

其中之一是称为“用户”的字段

我有另一个名为“用户”的表，其中包含每个用户的信息。当然，有很多“root”用户（每个服务器一个），所以我不知道单个用户表是否适合这个。

用户信息包括他们的 SSH 密钥、用户名、主目录等。设计数据库的最佳方式是什么，以及轻松输入这些信息的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:52:08.860

是的，适合所有用户的单个表

忘记表`users`中的字段`servers`，这不是关系在关系数据库中的工作方式。

您的`users`表应该有一个字段（可能称为`server_id`），它与“服务器”的主键具有外键关系。

设置好 2 个表后，您可以使用表单向导创建一个表单，`servers`该表单有一个`subform`for`users`并将`libreoffice`为您完成大部分工作，只需选择所有字段作为`subform`除了`server_id`（`subform`将管理为你）

您可能还需要考虑将 ssh 键拆分为单独的表并进一步嵌套`sub-form`，因为用户可以拥有多个。

* * *

请记住，此解决方案并未完全规范化，任何时候用户在多个服务器上拥有帐户时，都有可能出现重复。然而，为您的审计设计一个完全规范化的数据库似乎有点矫枉过正，并且会使`libreoffice`基础工作变得更加困难。

# iphone - iOS iphone uialertview 在横向添加了另一个文本视图

> ID：11084919
> 
> 赞同：0
> 
> 时间：2012-06-18T14:24:57.567
> 
> 标签：iphone, ios, textview, uialertview

我目前正在使用一个带有 textview 的警报视图，但是当我将 iPhone 旋转到横向时发生了一些奇怪的事情，另一个 textview 似乎出现在警报视图上。这个问题在 iPad 上不会发生。有谁知道这可能是什么原因造成的？任何建议或帮助将不胜感激。

我的代码放置在应用程序委托中，并在下面列出，

```
- (IBAction) loadAboutUs 
{
UIAlertView *showSelection;
showSelection.delegate = self;
NSString *key = [NSString stringWithFormat: @"Drug Tariff\n"
@"Version: %@\n"
@"text\n\n"
@"text\n"
@"text\n"
@"text", [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"]];
showSelection = [[UIAlertView alloc] 
                 initWithTitle: @""
                 message: @"\n\n\n\n\n\n\n\n\n\n"//The new lines are used to increase the size of the pop-up
                 delegate: nil 
                 cancelButtonTitle: @"OK" 
                 otherButtonTitles: nil];

//The text view inserted into the alertview 
UITextView *myTextView = [[UITextView alloc] initWithFrame:CGRectMake(12.0, 15.0, 260.0, 210.0)];
myTextView.text = key;
myTextView.dataDetectorTypes = UIDataDetectorTypeAll;//set the textview to pick up all link types
[myTextView setFont:[UIFont fontWithName:@"ArialMT" size:16]];
myTextView.textAlignment = UITextAlignmentCenter; 
myTextView.editable = false;//the textview needs to be uneditable for the dataDectector to work
myTextView.scrollEnabled = true;
[myTextView setBackgroundColor:[UIColor whiteColor]];
[showSelection addSubview:myTextView];

[showSelection show];
} 
```

我附上了这个问题的图片，

![警报视图问题](../Images/213d6ef9cbaeb5d2c76bafe8c15f1acc.png)

更新：

当我运行下面的代码时得到的输出，

```
NSArray *subviews = [showSelection subviews];
for (UIView *view in subviews)
{
    NSLog(@"class %@, tag: %i", [view class], view.tag);
} 

Landscape
2012-06-18 17:56:43.906 TS Data[6513:b903] class UIImageView, tag: 0
2012-06-18 17:56:43.907 TS Data[6513:b903] class UILabel, tag: 0
2012-06-18 17:56:43.908 TS Data[6513:b903] class UILabel, tag: 0
2012-06-18 17:56:43.908 TS Data[6513:b903] class UIThreePartButton, tag: 1
2012-06-18 17:56:43.909 TS Data[6513:b903] class UITextView, tag: 1000
2012-06-18 17:56:43.910 TS Data[6513:b903] class UIAlertTextView, tag: 12345
2012-06-18 17:56:43.910 TS Data[6513:b903] class UIImageView, tag: 3334

Portrait
2012-06-18 17:56:38.035 TS Data[6513:b903] class UIImageView, tag: 0
2012-06-18 17:56:38.053 TS Data[6513:b903] class UILabel, tag: 0
2012-06-18 17:56:38.054 TS Data[6513:b903] class UILabel, tag: 0
2012-06-18 17:56:38.055 TS Data[6513:b903] class UIThreePartButton, tag: 1
2012-06-18 17:56:38.055 TS Data[6513:b903] class UITextView, tag: 1000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:13:37.833

您只需在初始化 UIAlertView 时更改“消息”属性：

```
showSelection = [[UIAlertView alloc] 
             initWithTitle: @""
             message: @""
             delegate: nil 
             cancelButtonTitle: @"OK" 
             otherButtonTitles: nil]; 
```

请注意，如果要调整 UIAlertView 的大小，可以在视图控制器中使用以下代码：

```
- (void) willPresentAlertView:(UIAlertView *)alertView
{
    alertView.frame = CGRectMake(0, 0, 150, 250);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:31:21.447

添加：

```
myTextView.tag = 1000 //number here does not matter as long as it is not 0 
```

然后在您初始化 myTextView 之前，只需检查带有标签 1000 的视图是否存在：

```
if (![showSelection viewWithTag:1000]){//if that view is not there add it, if not, it is there ;)
 UITextView *myTextView = [[UITextView alloc] initWithFrame:CGRectMake(12.0, 15.0, 260.0, 210.0)];
 myTextView.tag = 1000
 myTextView.text = key;
 myTextView.dataDetectorTypes = UIDataDetectorTypeAll;//set the textview to pick up all link types
 [myTextView setFont:[UIFont fontWithName:@"ArialMT" size:16]];
 myTextView.textAlignment = UITextAlignmentCenter; 
 myTextView.editable = false;//the textview needs to be uneditable for the dataDectector to work
 myTextView.scrollEnabled = true;
 [myTextView setBackgroundColor:[UIColor whiteColor]];
 [showSelection addSubview:myTextView];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:07:32.850

在 iPhone 横向模式下，alertView 框架发生变化。我通过更改方向上的 textField 框架手动处理它。

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
   if (((orientation == UIInterfaceOrientationLandscapeLeft) || (orientation == UIInterfaceOrientationLandscapeRight)) && (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone))
   {
        yourTextField.frame = CGRectMake(20.0, 32.0, 245.0, 25.0);
   }
   else
   {
        yourTextField.frame = CGRectMake(20.0, 45.0, 245.0, 25.0);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:00:11.313

您有 3 个选项来解决此问题：

1.  根据旋转手动设置框架。就像“Warif Akhand Rishi”给出的答案
2.  如果存在警报视图，则不允许视图旋转。（从 shouldAutoRotateToInterfaceOrientation 方法返回 NO）
3.  界面变化时关闭警报视图，并在视图旋转后显示。它需要一点点代码。如果您的 textField 中有任何内容，那么您想暂时存储它并再次显示它。

我在我的项目中遇到了同样的问题，当时我选择了第二个选项。

# excel - 未评估 Apache POI 总和

> ID：11084920
> 
> 赞同：0
> 
> 时间：2012-06-18T14:25:01.700
> 
> 标签：excel, apache-poi

您好我正在使用 Apache POI 2.5.1

此版本不支持 FormulaEvaluator。

打开excel表格时，显示如下：

![在此处输入图像描述](../Images/a45b7de7d88ad64c6323f8babbe3a06d.png)

但是在单元格中双击或在公式栏中单击后会评估公式。

请提供解决方案！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:52:38.363

POI 2.5.1 于 2004 年 2 月 29 日发布。那是 8 年前的事了！如果您查看[POI ChangeLog](http://poi.apache.org/changes.html)，您会发现自那时以来已经有大量的改进和修复。你真的需要升级！

一旦您从这十年（！）升级到一个版本，您就可以按照[POI 网站](http://poi.apache.org/)上的[公式计算说明](http://poi.apache.org/spreadsheet/eval.html)自行重新计算值，或强制 Excel 在加载时执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:51:37.050

((HSSFSheet) 表).setForceFormulaRecalculation(true); - apache poi 3.1 最终版

# php - 跳过 ExpressionEngine Chanel 条目

> ID：11084922
> 
> 赞同：0
> 
> 时间：2012-06-18T14:25:07.113
> 
> 标签：php, expression, expressionengine

因此，我正在构建 EE，但在跳过已经通过的频道条目时遇到了一点问题。

我输入了日期参数以仅显示结束日期大于或等于当前时间的那些，但仍然无效。

所以我想出了一个 if then 语句的想法。如果频道条目是过去的，它将跳过它并转到下一个。不断地这样做，直到一个合适的条目起作用。

我想我的问题是是否有办法使偏移量成为全局变量？

SN：构建并没有做得最好，这就是为什么我想出的通常可行的想法不起作用的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:24:27.880

您能否发布您的`{exp:channel:entries}`标签以便我们更有效地调试您的问题？只是从你写的内容开始，似乎你可能使用了不正确的“日期”参数。要使用的正确参数是[`start_on`parameter](http://expressionengine.com/user_guide/modules/channel/channel_entries.html#start-on)。该参数的文档显示了忽略过去发布的条目的示例代码，并且应该清除您对如何实现它的任何问题。

如果您仍然需要帮助，请详细说明您的问题！

**更新的答案：**

嘿 Jamal，感谢您发布您的代码。我肯定会将您的`start_on`参数设置为`start_on="{current_time format='%Y-%m-%d %H:%i'}"`，然后从那里进行故障排除。如果您在进行此更改后看到错误或没有生成代码，这很可能是其他地方出现问题的迹象，应该予以修复。

您可以尝试为参数硬编码日期`start_on`，如下所示：

```
start_on="2012-06-18 03:39" 
```

您也可以尝试添加`dynamic="no"`标签，但我不记得在这种情况下是否应该改变任何东西。

如果您仍然遇到此参数的问题，请打开模板调试和 EE 的输出分析器（都可以在*Admin > System Administration > Output and Debugging*中找到），刷新页面，然后尝试确定问题是基于出现在屏幕上的调试信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T22:35:00.533

我认为您需要在这里解释“end_date”的含义。

那是一个自定义字段，里面有日期吗？您正在对其进行排序，但您也在使用 start_on 参数。start_on 参数查看 entry_date 而不是您的自定义字段。

所以基本上你的标签是在说……</p>

“给我一条未来的 entry_date 记录，end_date 的值最小。”

这很容易导致 end_date 是过去日期的记录返回。

# jquery - innerHTML 返回空白？

> ID：11084923
> 
> 赞同：2
> 
> 时间：2012-06-18T14:25:12.177
> 
> 标签：jquery, wysiwyg, innerhtml

这是一个冗长的问题，所以我会尽量具体。

我有两个所见即所得的文本编辑器放在两个单独的容器中。在单击`<a>`标签时运行的功能中，一个容器向上滑动并插入到另一个容器之前。这会导致所见即所得的盒子完全损坏，因此我将其删除然后重新初始化。我遇到的问题是获取其中的内容。

这是所见即所得的 HTML 结构：

```
 <div class="rightFieldContainer">
        <div class="wysiwyg" style="...">
             <ul class="panel" role="menu">...</ul>
             <div style="clear: both;">...</div>
             <iframe frameborder="0" style="..." tabindex="0">
                 <html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
                     <head>...</head>
                     <body style="..." class="wysiwyg">
                        <b _moz_dirty="">WHAT I'M TRYING TO GET</b></strike><br>
                     </body>
                 </html>
             <iframe>
          ... (all remaining tags are closed) 
```

内容的路径是我的函数是这样指定的：

```
 var content = $("#someContainer1").find(".rightFieldContainer").children(" .wysiwyg").children()[2].contentWindow.document.body.innerHTML; 
```

使用 innerHTML 会返回一个空白，而 html 会返回 undefined。更奇怪的是，如果我使用相同/相似的路径来获取另一个永远不会被移动的文本框的内容，它工作正常。

我知道，由于问题本身有点模糊，因此不可能希望得到明确的答案，但只是对 innerHTML 的替代或它可能不起作用的原因表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:34:44.510

您是否尝试过不同的选择器来确保拉动 iframe 的主体？

```
var content = $("#someContainer1").find(".rightFieldContainer > div.wyiswyg > iframe body.wysiwyg").html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:41:04.077

使用父文档中的选择器无法导航 iframe 中的内容。要获取 iframe 的文档，您需要执行以下操作：

```
$("#someContainer1").find(".rightFieldContainer").children("iframe").contents(); 
```

`.contents()`获取 iframe 的文档，因此您可以从父页面中找到其中的内容，假设 iframe 的内容位于同一域中。

```
var content = $("#someContainer1").find(".rightFieldContainer").children("iframe").contents().find(".wysiwyg").html(); 
```

为了简化这一点，你应该给你的 iframe 一个 class/id 并直接选择它：

```
var content = $("#someContainer1").find("#youriframe").contents().find(".wysiwyg").html(); 
```

# data-modeling - 健康保险公司的数据模型标准——类似于 HL7

> ID：11084924
> 
> 赞同：1
> 
> 时间：2012-06-18T14:25:15.610
> 
> 标签：data-modeling

快速提问：有人知道支持健康保险业务的现成数据模型吗？我开始阅读有关 HL7 的内容，但这似乎与医院和提供者的运营有关，尽管我可能是错的。

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:23:11.473

您想要的内容包含在医疗保健/保险特定的 EDI 交易中。北美使用 ANSI ASC X12 标准。

可以在此处找到健康/保险相关交易的快速列表：[保险/健康系列 (INS)](http://en.wikipedia.org/wiki/X12_Document_List#Insurance.2FHealth_Series_.28INS.29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T22:08:19.533

查看[https://eligibleapi.com/](https://eligibleapi.com/ "符合条件的 API") - 他们的 API 会喜欢它会提供你正在寻找的东西，但它背后有一个 RESTful 服务（所以它不仅仅是你可能为 HL7 获得的语义） - 即使你是只是找造型，值得一试。

# c# - 自动化服务器无法创建对象 IE(9) - 带有 .cab 文件的 activex

> ID：11084935
> 
> 赞同：0
> 
> 时间：2012-06-18T14:25:48.297
> 
> 标签：c#, activex

我在 c# 中创建了一个类库，并使用安装文件创建了一个 cab 文件。现在在html页面里面object写成codebase=xyz.cab。一切顺利。在运行 html 页面时，它要求安装 activex 控件并且安装成功。但是在创建活动 x 的对象时，它会显示错误“自动化服务器无法创建对象”。经过非常多的谷歌搜索后，我无法解决此问题。我已经按照谷歌的建议更改了浏览器设置。安装文件成功安装并在注册表中。

```
var activeX = null;
         activeX = new ActiveXObject('Printer'); 
```

自过去 7 小时以来，我一直在努力解决这个错误。任何帮助家伙......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:18:58.667

这是错误，因为 ActiveX 未正确安装在系统中。在创建 ActiveX 控件期间，确保 Register 属性设置为设置文件的 Primary 输出的“vsdrpCOM”。

# javascript - 如何从第一个未隐藏的复选框中获取价值

> ID：11084942
> 
> 赞同：5
> 
> 时间：2012-06-18T14:26:15.253
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我需要从未隐藏的复选框中获取值。

这是我的 HTML 和 JQuery 代码

```
$(document).ready(function() {

  var maanu = $('.form').find('input[type=checkbox]:checked').filter(':first').val();

  alert(maanu);

});
```

```
.hide {
  display: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class='form'>
  <input class="bills hide" type="checkbox" value="01" checked="checked" />
  <br />
  <input class="bills" type="checkbox" value="02" />
  <br />
  <input class="bills" type="checkbox" value="03" checked="checked" />
  <br />
  <input class="bills " type="checkbox" value="04" checked="checked" />
  <br />
  <input class="bills " type="checkbox" value="05" />
  <br />
  <input class="bills " type="checkbox" value="06" />
  <br />
  <input class="bills " type="checkbox" value="07" />
  <br />
  <input class="bills " type="checkbox" value="08" />
  <br />
</div>
```

**[演示](http://jsfiddle.net/sweetmaanu/xgQVG/5/)**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-18T14:28:49.157

使用[`:visible`](http://api.jquery.com/visible-selector/)选择器：

```
$('input:checkbox:checked:visible:first').val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T14:28:37.193

试试 - [http://jsfiddle.net/xgQVG/6/](http://jsfiddle.net/xgQVG/6/)

```
$(document).ready(function(){

    var maanu = $('.form').find('input[type=checkbox]:checked:not(:hidden)').filter(':first').val();

    alert(maanu);

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:27:58.457

这很有效，并且很容易阅读和理解：

```
$('input').not('.hide').first().val(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T14:29:57.373

看看这个答案。我认为它可以帮助您回答您的问题 [jQuery If DIV Don't Have Class "x"](https://stackoverflow.com/questions/520250/jquery-if-div-doesnt-have-class-x)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T14:29:37.010

这有效：

```
$('.form').find('input[type=checkbox]:checked').not('.hide').filter(':first').val(); 
```

更新[了小提琴](http://jsfiddle.net/xgQVG/7/)。

# delphi - 您可以覆盖类构造函数并使用继承吗？

> ID：11084943
> 
> 赞同：7
> 
> 时间：2012-06-18T14:26:16.817
> 
> 标签：delphi, delphi-xe2

当您在基类中定义类构造函数（即设置一些静态类变量）时，是否可以在派生类中覆盖该类构造函数并从其**继承**的层次父级调用构造函数？

例子：

```
TBaseclass = class(TObject)
public
   class constructor ClassCreate; virtual;
end;

TOtherClass = class(TBaseClass)
public
  class constructor ClassCreate; override;
end;

**implementation**

class constructor TBaseClass.ClassCreate;
begin
  //do some baseclass stuff
end;

class constructor TotherClass.ClassCreate;
begin
  inherited;
  //do some other stuff
end; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T14:38:54.897

[类构造函数](http://docwiki.embarcadero.com/RADStudio/en/Methods#Class_Constructors)没有理由是虚拟的，因为它们不能被多态调用。你不能直接打电话给他们；编译器会根据程序中使用的类自动插入对它们的调用。虚方法用于运行时多态性，但由于编译器在编译时确切知道它正在调用哪些类构造函数，因此不需要对类构造函数或析构函数进行动态调度。

但是，继承不需要虚拟方法，因此`inherited`在类构造函数或类析构函数中使用应该没有问题。不过，正如[大卫的回答](https://stackoverflow.com/a/11085158/33732)所指出的那样，编译器会忽略调用，`inherited`因为多次初始化一个类通常是不明智的，如果你真的设法调用继承的类构造函数，你就会这样做。如果有些事情你需要发生两次，你需要找到一种不同的方式来实现它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T14:39:02.100

首先，由于类构造函数不能是虚拟的（它们是虚拟的没有意义），您需要删除`virtual`and`override`关键字才能使您的代码编译。

类构造函数通常用于初始化类变量。类变量通常只需要初始化一次。如果您可以`inherited`按照您在问题中建议的方式调用，那么`TBaseClass.ClassCreate`将被调用多次，而实际上它只需要调用一次。

虽然您可以编写`inherited`类构造函数，并且代码将编译，但编译器只是忽略它。

```
program ClassConstructors;

{$APPTYPE CONSOLE}

uses
  SysUtils;

var
  Count: Integer;

type
  TBaseclass = class
  public
    class constructor ClassCreate;
  end;

  TOtherClass = class(TBaseClass)
  public
    class constructor ClassCreate;
  end;

class constructor TBaseClass.ClassCreate;
begin
  inc(Count);
end;

class constructor TotherClass.ClassCreate;
begin
  inherited;
end;

begin
  TBaseClass.Create.Free;
  TOtherClass.Create.Free;
  Writeln(Count);//outputs 1
  Readln;
end. 
```

请注意，当然，两个类构造函数都运行。

# android - ToogleButton 在右侧对齐文本标签

> ID：11084956
> 
> 赞同：0
> 
> 时间：2012-06-18T14:27:12.650
> 
> 标签：android

我想`ToogleButton`在按下时变成绿色/白色的那个栏的右侧对齐文本。

更明确地说，我将发布代码以及我现在得到的结果。

```
 <ToggleButton android:id="@+id/ToggleButton01"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  layout_gravity="center_vertical"
                  android:textOff="Off"
              android:textOn="On"/>

 ToggleButton onOffButton = (ToggleButton) findViewById(R.id.ToggleButton01);
 onOffButton.setGravity(Gravity.RIGHT | Gravity.CENTER_VERTICAL);
 onOffButton.setPadding(0, 0, 5, 0); 
```

结果： ![在此处输入图像描述](../Images/bc1c126b8230f25ed062335b529cfb50.png)

我希望栏和文本不重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:33:41.830

你试过属性重力吗？

```
android:gravity="center" 
```

`android:layout_gravity="center"`和之间的区别在于`android:gravity="center"`，第一个将以您`View`的`layout`内容为中心，而第二个将以该内容为中心`View`。

这是我的按钮布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ToggleButton android:id="@+id/ToggleButton01"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_gravity="center_vertical"
                  android:textOff="Off"
                  android:gravity="center"
              android:textOn="On"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T11:48:21.463

你在看`android:drawableLeft="@drawable/the_button_resource"`

还有其他选项，例如 drawableRight/drawableTop/drawableBottom 将可绘制资源放置在参数建议

# c++ - system() 在作为 CGI 调用时总是返回非零值

> ID：11084959
> 
> 赞同：4
> 
> 时间：2012-06-18T14:27:19.323
> 
> 标签：c++, linux, shell, cgi, system

从 cgi 调用 system() 时，它总是返回 -1（表示错误）。errno 设置为 10，ECHILD。

test.cgi 包含：

```
cout << "/bin/true " << system("/bin/true") << endl;
cout << "/bin/false " << system("/bin/false") << endl;
cout << "/bin/touch /tmp/foo" << system("/bin/touch /tmp/foo") << endl; 
```

从命令行调用，因为 ./test.cgi 返回：

```
/bin/true 0
/bin/false 256
/bin/touch /tmp/foo 0 
```

但是将其作为来自 Web 浏览器的链接调用会返回（在预期的格式错误的标头错误消息之后）：

```
/bin/true -1
/bin/false -1
/bin/touch /tmp/foo -1 
```

我已经验证了在这两种情况下都执行了命令（创建了文件 /tmp/foo），但是通过 httpd（mongoose、ARM9、Linux）调用它们会返回 -1。

任何提示，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:58:04.427

`system`由于`ECHILD`错误，您的呼叫失败。这发生在`wait`等待时，但没有挂起的孩子。造成这种情况的一个可能原因是您的代码（或您调用的某些代码）为 to 设置了信号处理`SIGCHLD`程序`SIG_IGN`。要对此进行测试，您可以将`SIGCHLD`信号处理程序设置为`SIG_DFL`，以将其恢复为默认信号处理程序，就在您调用`system`.

我不想走得太远，所以检查一下上面的测试是否有效。如果是这样，如果您的程序是单线程的，您可以考虑使用测试作为修复，并且您将信号处理程序恢复到它在`system`完成后设置的内容。但是，实际的解决方法是找出信号处理程序的设置位置和原因，然后判断您要对此做什么。

# opengl - 将模板渲染缓冲区绑定到opengl中的帧缓冲区

> ID：11084961
> 
> 赞同：6
> 
> 时间：2012-06-18T14:27:22.540
> 
> 标签：opengl, framebuffer

有没有人成功地做到了这一点？似乎我在模板渲染缓冲区中使用的任何索引格式`glCheckFramebufferStatus(...)`都会返回`GL_FRAMEBUFFER_UNSUPPORTED`。我已经成功地绑定了一个深度\颜色渲染缓冲区，但是每当我尝试对我的模板缓冲区做同样的事情时，我都会得到（正如我所说）`GL_FRAMEBUFFER_UNSUPPORTED`。

这是我的代码片段：

```
// Create frame buffer
GLuint fb;
glGenFramebuffers(1, &fb);

// Create stencil render buffer (note that I create depth buffer the exact same way, and It works.
GLuint sb;
glGenRenderbuffers(1, &sb);
glBindRenderbuffer(GL_RENDERBUFFER, sb);
glRenderbufferStorage(GL_RENDERBUFFER, GL_STENCIL_INDEX8, w, h);

// Attach color
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, cb, 0);

// Attach stencil buffer
glBindFramebuffer(GL_FRAMEBUFFER, fb);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_STENCIL_ATTACHMENT, GL_RENDERBUFFER, rb);
// And here I get an GL_FRAMEBUFFER_UNSUPPORTED when doing glCheckFramebufferStatus() 
```

*有任何想法吗？*

注意：颜色附件是纹理而不是渲染缓冲区

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T16:32:24.463

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-30T12:56:34.757

You can use stencil-only on recent nvidia hardware/drivers

```
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_STENCIL_ATTACHMENT_EXT, GL_TEXTURE_2D, fboStencilTexture, 0); 
```

Still no support for both separate depth and stencil

# jquery - HOWTO：实现一个 jQuery 版本的 ASP.Net MVC“强类型部分视图”

> ID：11084962
> 
> 赞同：0
> 
> 时间：2012-06-18T14:27:25.050
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我正在制作一个多页评估表，其中问题/回答是由数据库驱动的。目前，我是通过标准 ASP.Net MVC 使用 Html.BeginForm 的基本系统。

此时，整个系统的关键是“强类型局部视图”。当从数据库中读取问题/响应时，响应类型确定创建哪个派生模型并将其添加到集合中。它遍历集合的主视图并使用 ASP.Net MVC 的“强类型部分视图”系统来确定哪个视图呈现正确类型的响应（单选按钮、下拉菜单或文本框）。

我想将此过程从 Html.BeginForm 更改为 Ajax.BeginForm。问题是我不知道如何在 JavaScript/jQuery 世界中实现问题/响应的动态创建。有什么想法和/或建议吗？

额外信息：

更改的原因是需要发生的复杂的实时跳过模式（验证）。有些问题会触发跳过模式。跳过模式决定了其他问题的可访问性和价值。当用户更改触发跳过模式的问题时，需要将所有当前答案发送回服务器以通过规则引擎运行。

一个问题是，当 ASP.Net MVC 输入设置为只读时，它的值不会回发。解决方案是具有当前值的隐藏输入。在用户或规则引擎更改值的两种情况下，此隐藏值都需要由 JavaScript 管理。

总而言之，管理起来似乎非常复杂。似乎更合乎逻辑的是，ASP.Net MVC 代码只是提供了一个 JSON 模型，而 jQuery 只是在浏览器中构建表单，然后调用保存操作或跳过模式验证操作，将 JSON 模型传递给它。似乎消除了一层头痛:)

这是生成动态表单的当前代码：

```
@using (Html.BeginForm(new { mdsId = @Model.MdsId, sectionId = @Model.SectionId }))
{
    <div class="SectionTitle">
        <span>Section @Model.SectionName - @Model.SectionDescription</span>
        <span style="float: right">@Html.CheckBoxFor(x => x.ShowUnansweredQuestions) Show only unaswered questions</span>
    </div>

    @Html.HiddenFor(x => x.PrevSectionId)
    @Html.HiddenFor(x => x.NextSectionId)

    for (var i = 0; i < Model.answers.Count(); i++)
    {
        @Html.EditorFor(m => m.answers[i]);
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T14:32:36.797

您可以向控制器操作发送 AJAX 请求，该操作将使用强类型分部视图返回包含正确标记的分部视图，并将该部分视图注入 DOM。Steven Sanderson 有一篇关于这个主题的不错的博客文章：http: [//blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

# sql-server-2008 - SQLBulkCopy 与目标表中的标识插入

> ID：11084964
> 
> 赞同：5
> 
> 时间：2012-06-18T14:27:26.677
> 
> 标签：sql-server-2008, c#-4.0, sqlbulkcopy

我正在尝试使用 SQLBulkCopy 向 SQL Server 插入一个通用列表，

而且我在身份字段方面遇到了麻烦

我希望我的目标表生成身份字段我应该如何处理，这是我的代码

```
using (var bulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
                {
                    bulkCopy.BatchSize = (int)DetailLines;
                    bulkCopy.DestinationTableName = "dbo.tMyTable";

                    var table = new DataTable();
                    var props = TypeDescriptor.GetProperties(typeof(tBFFormularyStatusList))
                        //Dirty hack to make sure we only have system data types 
                        //i.e. filter out the relationships/collections
                                               .Cast<PropertyDescriptor>()
                                               .Where(propertyInfo => propertyInfo.PropertyType.Namespace.Equals("System"))
                                               .ToArray();
                    foreach (var propertyInfo in props)
                    {
                        bulkCopy.ColumnMappings.Add(propertyInfo.Name, propertyInfo.Name);
                        table.Columns.Add(propertyInfo.Name, Nullable.GetUnderlyingType(propertyInfo.PropertyType) ?? propertyInfo.PropertyType);
                    }

                    var values = new object[props.Length];
                    foreach (var item in myGenericList)
                    {
                        for (var i = 0; i < values.Length; i++)
                        {
                            values[i] = props[i].GetValue(item);
                        }

                        table.Rows.Add(values);
                    }

                    bulkCopy.WriteToServer(table);
                } 
```

# 例外

```
Property accessor 'ID' on object 'ProcessFlatFiles.DetailsClass' threw the following exception:'Object does not match target type.' 
```

我也试过

```
using (var bulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString, SqlBulkCopyOptions.KeepIdentity))
                { 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T16:14:12.413

最后我得到了这个方法

```
 using (var bulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString, SqlBulkCopyOptions.KeepNulls & SqlBulkCopyOptions.KeepIdentity))
                {
                    bulkCopy.BatchSize = (int)DetailLines;
                    bulkCopy.DestinationTableName = "dbo.myTable";
                    bulkCopy.ColumnMappings.Clear();
                    bulkCopy.ColumnMappings.Add("SourceColumnName", "DestinationColumnName");
                    bulkCopy.ColumnMappings.Add("SourceColumnName", "DestinationColumnName");
                    bulkCopy.ColumnMappings.Add("SourceColumnName", "DestinationColumnName");
                    bulkCopy.ColumnMappings.Add("SourceColumnName", "DestinationColumnName");
                    .
                    .
                    .
                    .
                    bulkCopy.ColumnMappings.Add("SourceColumnName", "DestinationColumnName");

                    bulkCopy.WriteToServer(datatable);
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T01:17:14.903

我知道这是一个老问题，但我认为值得添加这个替代方案：（如果您已经有正确的架构，可以跳过 1、2、3）

1.  从表中执行简单的 TOP 1 选择以返回具有目标表架构的数据表
2.  使用 DataTable 的`Clone`方法生成相同架构且无数据的数据表
3.  将您的数据插入此表
4.  Perform SqlBulkCopy's `WriteToServer` (if column orders match, then the identity values can be read. If the option isn't provided in SqlBulkCopy's constructor then the default is to ignore these values and let the destination provide them).

The important point is that if you have the columns in the correct order (including identity columns), everything is handled for you.

# android - 使用 MotionEvent

> ID：11084967
> 
> 赞同：0
> 
> 时间：2012-06-18T14:27:38.823
> 
> 标签：android

据我所知，x 和 y 从屏幕左上角开始为 0,0

> 我的问题是有计算在事件中获得定位吗？或其他方式（例如，此类中的另一个新类或方法）？

现在这个问题很模糊，所以我想添加一个例子：

我记得在数学结束时，您在图表中的左上角、右上角、左下角和右下角有 4 个部分。

使用图形样式获取变量：

1.  从左上角到左下角获取位置。
2.  从右下角到右上角获取位置
3.  从左上角到右下角获取位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:44:57.690

使用`event.getX()`，`event.getY()`然后您可以计算数学课中使用的图形的任何部分中的坐标。

1.  x, 高度 - y
2.  x, 高度 - y
3.  宽度 - x，高度 - y

# c# - 有母版的页面不管有没有都不起作用 标签

> ID：11084970
> 
> 赞同：1
> 
> 时间：2012-06-18T14:27:55.413
> 
> 标签：c#, asp.net, entity-framework

我尝试发布 C#/ASP.NET 页面并收到以下错误消息：

> 控件 XXX 必须放在带有 runat=server 的表单标签内

添加`<form runat="server">`标签时，我收到以下错误：

> 一个页面只能有一个服务器端 Form 标签。

我知道我的母版页具有`runat=server`表单标签，并且内容包含在该标签中。我还看到错误似乎发生在

> c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\a05ad405\1aeb0277\App_Web_lgjjhruj.3.cs:0

我想这是一个临时文件？

我的问题是，有没有人遇到过类似的错误，是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:09:41.587

在母版页中只保留一个 从内容页中删除所有表单标记，以及从内容页中删除头部和正文标记。

最重要的是，将所有控件保留在将在表单标记内呈现的内容占位符内。

在所有asp控件中的服务器上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:33:53.167

您的内容页面中是否有另一个表单（使用您的母版页）？您应该有一个仅在您的母版页中在服务器上运行的表单。在您的项目中搜索 (ctrl + shift + f)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:39:51.233

检查您的 MasterPage 并确保所有带有 a 的控件`runat="server"`都包含在`<form runat="server">`元素中。

# smartgwt - listgrid smartgwt 选择取消选择功能

> ID：11084975
> 
> 赞同：0
> 
> 时间：2012-06-18T14:28:03.927
> 
> 标签：smartgwt, listgrid

我使用 SmartGwt Listgrid 显示对象列表，每个对象包含许多子对象。因此，当我单击特定行时，会显示一个弹出窗口，允许我更新此子对象的列表。

第二个约束是允许用户选择多行，合并成一行。为此，我使用如下代码的复选框选择类型：

```
myListGrid.setSelectionType(SelectionStyle.SIMPLE);
myListGrid.setSelectionAppearance(SelectionAppearance.CHECKBOX); 
```

对于第一次加载，所有工作都完美无缺。问题是当我显示/隐藏弹出窗口时，Listgrid 的选择/取消选择功能停止运行。单击复选框后，它保持不变。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:13:49.963

我回答自己的问题，经过数小时的调查，问题是我将 smartGwt 的 listGrid 和 GWT 的 dialogBog 混合在一起，当我用 smartGwt 的 Dialog 更改 DialogBox 时，问题就解决了

# excel - 宏无法根据工作表数据创建约会

> ID：11084984
> 
> 赞同：0
> 
> 时间：2012-06-18T14:28:25.867
> 
> 标签：excel, vba, outlook, appointment

我有一个运行的 Excel 宏，它从电子表格中获取活动名称、日期和时间，并将它们放入 Outlook 日历中。这在 Outlook 运行时可以正常工作，但如果不是，宏不会进行约会。

我做了一个错误检查，检查 Outlook 的运行实例是否正在运行，如果没有创建一个，但它仍然只在 Outlook 运行时工作。

任何想法为什么？

```
Sub SetAppt()
  ' Dim olApp As Outlook.Application
    Dim olApt As AppointmentItem
    Dim olApp As Object

    'if an instance of outlook is not open then create an instance of the application
    On Error Resume Next
    Set olApp = GetObject(, "Outlook.Application")

    If er.Number = 429 Then
      Set olApp = CreateObject("Outlook.Application.14")
    End If

    On Error GoTo 0

    Set olApp = CreateObject("Outlook.Application")
    ' Set olApp = New Outlook.Application

    'declare an index for all the variables
     Dim i As Integer
     i = 2

    'declare the variables that will hold the data and set their initial value
     Dim occ, actName, srtTime, duration As String
     occ = "A" & i
     actName = "B" & i
     srtTime = "F" & i
     duration = "G" & i

     'for holding different parts of the dates/times that will be split
     Dim splitStr() As String
     Dim splitDrtion() As String

     'loop until there is no more items
     While Range(occ).Value <> ""

      'create a new appointment
      Set olApt = olApp.CreateItem(olAppointmentItem)

      'we must split the start time and date
      splitStr = Split(Range(srtTime).Value, " ")

      Dim oDate As Date
      oDate = splitStr(0)

      'we must also spilt the duration (number/hour)
      splitDrtion = Split(Range(duration).Value, " ")

        'with is used to acces the appointment items properties
        With olApt

          .Start = oDate + TimeValue(splitStr(1))

          'if the duration is in hours then multiply number else leave it
          If splitDrtion(1) = "Hour" Then
            .duration = 60 * splitDrtion(0)
          Else
            .duration = splitDrtion(0)
          End If

          .Subject = Range(occ).Value
          .Body = Range(actName).Value
          .Save
         End With

        'increment i and reset all the variables with the new number
        i = i + 1
        occ = "A" & i
        actName = "B" & i
        srtTime = "F" & i
        duration = "G" & i

        Set olApt = Nothing
      Wend
      Set olApp = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:35:33.503

代替

```
On Error Resume Next
Set olApp = GetObject(, "Outlook.Application")

If er.Number = 429 Then
    Set olApp = CreateObject("Outlook.Application.14")
End If

On Error GoTo 0

Set olApp = CreateObject("Outlook.Application") 
```

试试这个

```
On Error Resume Next
Set olApp = GetObject(, "Outlook.Application")

'~~> If not found then create new instance
If Err.Number <> 0 Then
    Set olApp = CreateObject("Outlook.Application")
End If
Err.Clear
On Error GoTo 0 
```

由于我无法对其进行测试，因此这是您的代码以及必要的更新。请试试这个。

```
Sub SetAppt()
    Dim olApt As Object, olApp As Object
    Dim i As Integer
    Dim occ As String, actName As String, srtTime As String, duration As String
    Dim splitStr() As String, splitDrtion() As String
    Dim oDate As Date

    On Error Resume Next
    Set olApp = GetObject(, "Outlook.Application")

    '~~> If not found then create new instance
    If Err.Number <> 0 Then
        Set olApp = CreateObject("Outlook.Application")
    End If
    Err.Clear
    On Error GoTo 0

    'declare an index for all the variables
    i = 2

    'declare the variables that will hold the data and set their initial value
    occ = "A" & i
    actName = "B" & i
    srtTime = "F" & i
    duration = "G" & i

    'loop until there is no more items
    While Range(occ).Value <> ""
        'create a new appointment
        Set olApt = olApp.CreateItem(1)

        'we must split the start time and date
        splitStr = Split(Range(srtTime).Value, " ")

        oDate = splitStr(0)

        'we must also spilt the duration (number/hour)
        splitDrtion = Split(Range(duration).Value, " ")

        'with is used to acces the appointment items properties
        With olApt

            .Start = oDate + TimeValue(splitStr(1))

            'if the duration is in hours then multiply number else leave it
            If splitDrtion(1) = "Hour" Then
                .duration = 60 * splitDrtion(0)
            Else
                .duration = splitDrtion(0)
            End If

            .Subject = Range(occ).Value

            .Body = Range(actName).Value
            .Save
        End With

        'increment i and reset all the variables with the new number
        i = i + 1
        occ = "A" & i
        actName = "B" & i
        srtTime = "F" & i
        duration = "G" & i

        Set olApt = Nothing
    Wend

    Set olApp = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:22:57.537

以[Siddharth](https://stackoverflow.com/a/11085091/190829)的示例为基础，这里是您的代码的重构版本。

```
Sub SetAppt()
  Dim olApt As Object ' Outlook.AppointmentItem
  Dim olApp As Object ' Outlook.Application
  Dim i As Long
  Dim apptRange As Variant

  Const olAppointmentItem As Long = 1

  ' create outlook
  Set olApp = GetOutlookApp

  If olApp Is Nothing Then
    MsgBox "Could not start Outlook"
    Exit Sub
  End If

  ' read appts into array
  apptRange = Range(Cells(2, 1), Cells(Rows.Count, 7).End(xlUp)).value

  For i = LBound(apptRange) To UBound(apptRange)
    Set olApt = olApp.CreateItem(olAppointmentItem)
    With olApt
      .Start = apptRange(i, 6)
      If InStr(apptRange(i, 7), "Hour") > 0 Then
        ' numeric portion cell is delimited by space
        .Duration = 60 * Split(apptRange(i, 7), " ")(0)
      Else
        .Duration = apptRange(i, 7)
      End If

      .Subject = apptRange(i, 1)
      .Body = apptRange(i, 2)
      .Save
    End With
  Next i

End Sub
Function GetOutlookApp() As Object
  On Error Resume Next
  Set GetOutlookApp = CreateObject("Outlook.Application")
End Function 
```

此代码将您的工作表数据读入一个数组。这避免了来自 VBA 和 Excel 之间的 COM 交互的时间损失。

我们遍历数组并为每一行创建一个新约会。

使用以下示例数据，无论 Outlook 是否打开，它都可以正常工作（但是，关闭 Outlook 会使其明显变慢）。

![示例应用程序](../Images/eeb0f9bab87e95a221ca64a460f26353.png)

实际上[没有必要检查 Outlook 是否打开](https://stackoverflow.com/a/7260469/190829)。

# iphone - 获取本地声明隐藏多个语句的实例变量警告消息

> ID：11084990
> 
> 赞同：0
> 
> 时间：2012-06-18T14:28:46.253
> 
> 标签：iphone

我无法让这段代码工作。

在下面给出的语句上方声明了 playpauseButton

```
UIButton *playpauseButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

`playpauseButton`获取以下语句的隐藏实例变量警告消息的本地声明

```
playpauseButton addTarget:self action:@selector(playpauseAction:) forControlEvents:UIControlEventTouchUpInside];
playpauseButton.frame = CGRectMake(0, 0, 30, 30);
[playpauseButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[playpauseButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithCustomView:playpauseButton]; 
```

在我定义之后`playpauseAction method`

```
-(void)playpauseAction:(id)sender {    
if( playpauseButton.state == UIControlStateNormal ){
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
[audioPlayer play];
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                    target:self
                                    selector:@selector(displayviewsAction:)
                                    userInfo:nil
                                    repeats:NO];
}  else if (playpauseButton.state == UIControlStateSelected)
{
[sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[audioPlayer pause];
 [self pauseTimer];
 } else if (playpauseButton.state == UIControlStateNormal)
{
[sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateSelected];
[audioPlayer play];
[self resumeTimer];}} 
```

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T14:39:31.460

它告诉您，您有两个`playpauseButton`. 一个在类的接口部分（实例变量），另一个是局部变量。

这不是实际错误，但警告告诉您，您可能会得到与您想要的结果不同的结果。

# cakephp - Cakephp 电子邮件错误

> ID：11084994
> 
> 赞同：0
> 
> 时间：2012-06-18T14:28:58.920
> 
> 标签：cakephp

我的控制器

```
App::uses('CakeEmail', 'Network/Email'); //before class begins

//function
public function contact(){

        $email = new CakeEmail();
        $email->config('smtp');
        $email->from('me@gmail.com');
        $email->to('you@gmail.com');
        $email->subject('About');
        $email->send('My message');
    }

//Email.php in config folder

class EmailConfig {

    public $smtp = array(
        'transport' => 'Smtp',
        'from' => 'me@gmail.com',
        'host' => 'smtp.gmail.com',
        'port' => 465,
        //'timeout' => 30,
        'username' => 'me@gmail.com',
        'password' => '*****',
        'client' => null,
        'log' => false,
        //'charset' => 'utf-8',
        //'headerCharset' => 'utf-8',
    ); 
} 
```

我得到的错误是

> 致命错误：第 222 行的 C:\wamp\www\myproject\lib\Cake\Network\CakeSocket.php 中的最大执行时间超过 30 秒

我需要改变什么？

我什至在 Views/Users/contact 中创建了视图文件。

我需要更改视图/电子邮件文件夹中的视图文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:01:03.473

您需要在 php.ini 文件中增加 max_execution_time 变量。

不过，您不应该超时通过 gmail 发送电子邮件。您是否正确配置了 smtp 选项？

来自蛋糕书 [http://book.cakephp.org/2.0/en/core-utility-libraries/email.html](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)

'您可以配置 SSL SMTP 服务器，例如 GMail。为此，请将“ssl://”放在主机的前缀中，并相应地配置端口值。例子：'

```
<?php
class EmailConfig {
    public $gmail = array(
        'host' => 'ssl://smtp.gmail.com',
        'port' => 465,
        'username' => 'my@gmail.com',
        'password' => 'secret',
        'transport' => 'Smtp'
    );
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:20:35.120

从您的操作中删除`$email->from('me@gmail.com');`，然后重试。仅在电子邮件配置中指定*发件人地址。*然后看看它是否有效。

```
App::uses('CakeEmail', 'Network/Email'); //before class begins

//function
public function contact(){

        $email = new CakeEmail();
        $email->config('smtp');
        $email->to('you@gmail.com');
        $email->subject('About');
        $email->send('My message');
    }

//Email.php in config folder

class EmailConfig {

    public $smtp = array(
        'transport' => 'Smtp',
        'from' => 'me@gmail.com',
        'host' => 'ssl://smtp.gmail.com',
        'port' => 465,
        'timeout' => 60,
        'username' => 'me@gmail.com',
        'password' => '*****',
        'client' => null,
        'log' => false,
        //'charset' => 'utf-8',
        //'headerCharset' => 'utf-8',
    ); 
} 
```

# .net - 在.net中使用样式属性操作html内联cssclass

> ID：11084995
> 
> 赞同：0
> 
> 时间：2012-06-18T14:29:04.020
> 
> 标签：.net, css

我有 1 个包含 html 的字符串和一个包含 css 的字符串，有没有办法根据 css 字符串中的规则删除所有具有样式属性的类属性。

我这样做的原因是我想将 html 作为邮件发送，但 gmail 不支持样式或链接标签，所以我唯一的选择是使用 style 属性，但我不想用 style 属性使我的 html 膨胀，是否有任何 .net 组件可以自动执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:39:17.427

不，.net 无法帮助您解决这个问题。您应该制作一个单独的邮件模板并为所有内容使用内联样式并使用基于表格的布局。调整面向浏览器的 HTML/CSS 以供电子邮件使用是自找麻烦。即使您可以自动将样式表转换为内联样式，许多样式声明本身**也不受**各种客户端的支持。您需要特定于电子邮件的设计，时期。

电子邮件客户端的能力差异很大，迫使一个可怕的共同点就好像它仍然是 1999 年一样。MS Outlook 甚至使用脑死亡的 MS-Word 渲染引擎来查看 HTML 电子邮件。这都是一个可怕的深坑。

这是一个关于如何格式化电子邮件的好指南：http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:00:53.427

环顾四周后，我发现了以下3个资源

1.  [http://www.codeproject.com/Articles/20450/Simple-CSS-Parser](http://www.codeproject.com/Articles/20450/Simple-CSS-Parser)
2.  [http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)
3.  [http://forums.wincustomize.com/322441](http://forums.wincustomize.com/322441)

通过梳理那些我设法完成了任务！

# geolocation - 如何获取有关 tabris 中地理位置变化的通知？

> ID：11084996
> 
> 赞同：1
> 
> 时间：2012-06-18T14:29:05.830
> 
> 标签：geolocation

我正在试验 tabris，目前正在研究 geo api。

我可以通过 getCurrentPosition() 从 Geolocation 类中获取我的当前位置。我的问题是我不想一直执行拉取请求来获取地理更新。

相反，我想在用户移动他的设备时得到位置变化的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:34:18.607

要获得有关您的位置更改的通知，只需使用方法 Geolocation.watchPosition() 添加一个监听器。然后可以使用它来更新 UI。

# html - 响应式设计/@media 设计故障不能正常运行

> ID：11084997
> 
> 赞同：0
> 
> 时间：2012-06-18T14:29:13.427
> 
> 标签：html, css, responsive-design

我对响应式/自适应设计非常陌生，并且在移动版本的媒体查询方面遇到了一些麻烦。我之前用相同的查询建立了几个站点，但没有遇到这个问题。我正在寻找的结果在 Mozilla Firefox 中显示良好（最小细分/调整为 480 像素），但在其他任何地方都没有（最重要的是在手机上）。

[我在http://adapdivdesign.com/scff/](http://adapdivdesign.com/scff/)有该站点临时进行测试

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:53:35.040

看起来您没有正确关闭 767 媒体查询？

```
/* ============================= */
/* ! 767 767 767 767 767 767 767 */
/* ============================= */

@media screen and (max-width: 767px) { 
```

480 媒体查询包含在 767 媒体查询中。

# django - 使用“电子邮件作为用户名”的 Django 与 Facebook 登录有冲突？！或者如何同时拥有

> ID：11084998
> 
> 赞同：0
> 
> 时间：2012-06-18T14:29:14.990
> 
> 标签：django, facebook, facebook-graph-api, django-views, email

在第一阶段，我使用电子邮件作为用户名[django-email-as-username](https://github.com/dabapps/django-email-as-username)。对于第二阶段，我也想激活 facebook 登录。但我见过的几乎所有 3rd 方应用程序都使用 Django 的**用户名**作为后端。

你知道它们中的哪一个可以适应我之前提到的方式吗？

任何帮助都非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:28:50.370

该`AUTHENTICATION_BACKENDS`设置允许列出后端，以便您可以支持多种身份验证方法：用户名/密码、电子邮件/密码、facebook、twitter、openid 等

[例如， django-social-auth](https://github.com/omab/django-social-auth)为每个身份验证提供程序定义了一个新的后端。这与其他身份验证后端一起工作正常。