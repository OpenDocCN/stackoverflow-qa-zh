# StackOverflow 问答 10408000-10408999

# php - 如何从以下获取响应代码

> ID：10408015
> 
> 赞同：0
> 
> 时间：2012-05-02T05:07:56.147
> 
> 标签：php, xml, soap

我需要获取我正在使用 PHP 的 ResponseCode 和 ResponseDescription

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <ProcessPaymentResponse xmlns="https://services.incard.com.au">
      <ProcessPaymentResult>
        <ResponseCode>string</ResponseCode>
        <ResponseDescription>string</ResponseDescription>
      </ProcessPaymentResult>
    </ProcessPaymentResponse>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:14:33.023

你需要 php xml 解析器。

采用`simplexml`

更多信息在这里：http: [//in2.php.net/manual/en/simplexml.examples.php](http://in2.php.net/manual/en/simplexml.examples.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:17:43.740

您可能会考虑使用[php SoapClient](http://www.php.net/manual/en/soapclient.getlastresponseheaders.php)，假设他们向您公开 SOAP 服务。

如果没有其他几件事你可以做：

1.  使用 XPath 获取值： http: [//php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)

2.  使用 php 的 XML 解析函数之一来解析 XML 并获取值：[http ://www.php.net/manual/en/function.xml-parse-into-struct.php](http://www.php.net/manual/en/function.xml-parse-into-struct.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:27:40.160

试试这个：

```
<?php
$str = '<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <ProcessPaymentResponse xmlns="https://services.incard.com.au">
      <ProcessPaymentResult>
        <ResponseCode>string</ResponseCode>
        <ResponseDescription>string</ResponseDescription>
      </ProcessPaymentResult>
    </ProcessPaymentResponse>
  </soap:Body>
</soap:Envelope>';

$xml = simplexml_load_string( $str );
$xml->registerXPathNamespace( 'soap', 'http://schemas.xmlsoap.org/soap/envelope/' );
$result = $xml->xpath('//soap:Body');

foreach ($result as $body) {
  echo $body->ProcessPaymentResponse->ProcessPaymentResult->ResponseCode . "<br />";
  echo $body->ProcessPaymentResponse->ProcessPaymentResult->ResponseDescription . "<br />";
}
?> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:06:28.047

在

新的 .xml 放入您的 xml 数据，然后如果您想要单个数据字段，请执行以下代码

```
 <?php

$file="new.xml";

function contents($parser, $data){ 
    echo $data; 
} 

function startTag($parser, $data){ 
    echo "<b>"; 
} 

function endTag($parser, $data){ 
    echo "</b><br />"; 
} 

$xml_parser = xml_parser_create(); 

xml_set_element_handler($xml_parser, "startTag", "endTag"); 

xml_set_character_data_handler($xml_parser, "contents"); 

$fp = fopen($file, "r"); 

$data = fread($fp, 80000); 

if(!(xml_parse($xml_parser, $data, feof($fp)))){ 
    die("Error on line " . xml_get_current_line_number($xml_parser)); 
} 

xml_parser_free($xml_parser); 

fclose($fp); 

$xml = simplexml_load_string( $data);
$xml->registerXPathNamespace( 'soap', 'http://schemas.xmlsoap.org/soap/envelope/' );
$result = $xml->xpath('//soap:Body');

foreach ($result as $body) {
  echo $body->ProcessPaymentResponse->ProcessPaymentResult->ResponseCode . "<br />";
  echo $body->ProcessPaymentResponse->ProcessPaymentResult->ResponseDescription . "<br />";
}
?> 
```

如果你想要n个数据试试这个

```
<?php
$file="new.xml";

function contents($parser, $data){ 
    echo $data; 
} 

function startTag($parser, $data){ 
    echo "<b>"; 
} 

function endTag($parser, $data){ 
    echo "</b><br />"; 
} 

$xml_parser = xml_parser_create(); 

xml_set_element_handler($xml_parser, "startTag", "endTag"); 

xml_set_character_data_handler($xml_parser, "contents"); 

$fp = fopen($file, "r"); 

$data = fread($fp, 80000); 

if(!(xml_parse($xml_parser, $data, feof($fp)))){ 
    die("Error on line " . xml_get_current_line_number($xml_parser)); 
} 

xml_parser_free($xml_parser); 

fclose($fp); 
    $xml = simplexml_load_string($data); 
    $xml->registerXPathNamespace('soap:Envelope', 'http://schemas.xmlsoap.org/soap/envelope/');
    foreach ($xml->xpath('//soap:Envelope:ResponseCode') as $item) {
        echo (string) $item; 
    }
    foreach ($xml->xpath('//soap:Envelope:ResponseDescription') as $item) {
        echo (string) $item; 
    }
    ?> 
```

# android - 在android中再次重新进入活动后如何使用asynctask更新进度条

> ID：10408017
> 
> 赞同：0
> 
> 时间：2012-05-02T05:08:07.027
> 
> 标签：android, android-asynctask

我正在尝试实现一些功能，例如文件下载，下载启动按钮位于某些列表视图中。为了更清楚，这里用图表来说明。

首先，我在那里输入带有一些列表视图的 Book1_Activity： [book_chapter_name_1 [download_1]] [book_chapter_name_2 [download_2]] 我点击了 download_1 按钮，下载开始，有一个进度条显示进度。下载是通过 AsyncTask 实现的。

之后，我想切换到其他活动，比如说 book_read_activity，这样我就可以在继续阅读的同时下载一些书籍。

我的问题是我看完书后，想查看下载的书的进度，所以我重新进入Book1_Activity，因为Book1_Activity被销毁并重新创建了，我怎么能得到下载进度并更新呢？</p >

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:23:15.180

考虑改用服务？那么即使关闭也可以运行吗？但是，如果您想继续您的方法，我会让 asynctask 将进度写入全局访问点，然后从那里读取进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:17:05.670

这是我一直在使用的东西。我不谈论您的 UI、您的列表框更新等。这只是 Task 和 ProgressDialog 处理：

ProgressDialog 的样式：

```
<resources>
    <style name="MyProgressDialog" parent="@android:style/Theme.Dialog">
        <item name="android:background">@android:color/transparent</item>
        <item name="android:backgroundDimEnabled">false</item>
        <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowFrame">@null</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
        <item name="android:windowTitleStyle">@null</item>
    </style>
</resources> 
```

我的 ProgressDialog 类：

```
public class MyProgressDialog extends Dialog {

    public MyProgressDialog(Context context) {
        super(context, R.style.MyProgressDialog);
    }

    public static MyProgressDialog show(Context context, CharSequence title, CharSequence message) {
        return show(context, title, message, false);
    }

    public static MyProgressDialog show(Context context, CharSequence title, CharSequence message, boolean indeterminate) {
        return show(context, title, message, indeterminate, false, null);
    }

    public static MyProgressDialog show(Context context, CharSequence title, CharSequence message, boolean indeterminate, boolean cancelable) {
        return show(context, title, message, indeterminate, cancelable, null);
    }

    public static MyProgressDialog show(Context context, CharSequence title, CharSequence message, boolean indeterminate, boolean cancelable, OnCancelListener onCancelListener) {
        MyProgressDialog dialog = new MyProgressDialog(context);
        dialog.setCancelable(cancelable);
        dialog.setOnCancelListener(onCancelListener);
        dialog.setTitle(title);

        dialog.addContentView(new ProgressBar(context), new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        dialog.show();

        return dialog;
    }
} 
```

现在是牛肉。以 AsyncTask 作为内部类的 ListView。AsyncTask 持有对周围 ListActivity（上下文）的引用，而 ListActivity 持有对 AsyncTask 的引用。ProgressDialog 将在通常启动时在 AsyncTask 中创建。如果 ListActivity 停止并且 AsyncTask 仍在运行，则对话框将从 ListActivity 中消失并在重新启动后重新创建。

重要的是要注意谁在做什么：

```
public class MyListActivity extends ListActivity {

    private class MyAsyncTask extends AsyncTask<Void, Integer, Boolean> {

        /* package */ MyListActivity   context;
        /* package */ MyProgressDialog dialog;

        public MyAsyncTask(MyListActivity context) {
            super();

            this.context = context;
        }

        @Override
        protected Boolean doInBackground(final Void... voids) {
            Boolean rc = false;

            // Put your running task here

            return rc;
        }

        @Override
        protected void onPostExecute(final Boolean result) {
            if (dialog != null) {
                try {
                    dialog.dismiss();
                } catch (Exception exception) {
                }

                dialog = null;
            }

            if (result) {
                // Whatever you need to update in UI
            }

            context.task = null;
        }

        @Override
        protected void onPreExecute () {
            dialog = MyProgressDialog.show(context, null, null, true, false);
        }
    }

    /* package */ MyAsyncTask task;

    // Save AsyncTask if running, dismiss ProgressDialog if open
    @Override
    public Object onRetainNonConfigurationInstance() {
        if (task != null) {
            if (task.dialog != null) {
                task.dialog.dismiss();
                task.dialog = null;
            }
        }

        return task;
    }

    @Override
    public void onCreate(final Bundle bundle) {

        // Usual start here

        // Was task running?
        task = (MyAsyncTask) getLastNonConfigurationInstance();
        if (task != null) {
            // Task was running, update context, restart ProgressDialog
            task.context = this;
            task.dialog = MyProgressDialog.show(this, null, null, true, false);
        } else {
            // Task was not running. Start from beginning
            task = new MyAsyncTask(this);
            task.execute();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T10:34:29.783

我必须在我的一个应用程序中做同样的事情（使用 API 8）。我选择在通知栏中显示下载进度，并使用服务对其进行更新。对我来说工作得很好。

由于我为 API 8 开发了我的应用程序，因此我无法使用[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)类，但您可能想看看它。如果您的应用程序使用 API 9+，这似乎比自己重新编码流程更合适。

# iphone - webview和放大的ipad方向问题

> ID：10408019
> 
> 赞同：1
> 
> 时间：2012-05-02T05:08:23.323
> 
> 标签：iphone

我在 ipad xib 中有一个 webview，在两个方向 w 上都可以正常工作。但是如果我在纵向模式下放大，然后在横向 webview 中旋转从右侧获取边距

```
- (void)viewDidLoad
{
    NSString *urlString=@"http://www.plus.al";
    NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
    webView.scalesPageToFit = YES;
    [webView loadRequest:request];
}

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation 
 {
   if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
        {

            webView.frame=CGRectMake(0, 0, 1024, 748);

        }
        if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
        {

            webView.frame=CGRectMake(0, 0, 768, 1004);

        }
    else {
        if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
        { 
            webView.frame=CGRectMake(0, 0, 480, 300);    
        }
        if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
        {

            webView.frame=CGRectMake(0, 0, 320, 460);
        }
    }
    return YES;
 } 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:54:28.727

您需要改用以下代码-

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation 
{
    return YES;
}

- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
        {
            self.webView.frame=CGRectMake(0, 0, 1024, 748); 
        }
        if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
        {
            self.webView.frame=CGRectMake(0, 0, 768, 1004);
        }
        else {
            if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
            { 
                self.webView.frame=CGRectMake(0, 0, 480, 300);    
            }
            if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) 
            {                
                self.webView.frame=CGRectMake(0, 0, 320, 460);
            }
        }
    }
} 
```

# python - Django：MEDIA_URL 返回页面未找到

> ID：10408022
> 
> 赞同：7
> 
> 时间：2012-05-02T05:08:43.210
> 
> 标签：python, django, media-url

**设置.py**

```
# -*- coding: utf-8 -*-
# Django settings for basic pinax project.

import os.path
import posixpath

PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))

DEBUG = True
TEMPLATE_DEBUG = DEBUG

# tells Pinax to serve media through the staticfiles app.
SERVE_MEDIA = DEBUG

# django-compressor is turned off by default due to deployment overhead for
# most users. See <URL> for more information
COMPRESS = False

INTERNAL_IPS = [
    "127.0.0.1",
]

ADMINS = [
    # ("Your Name", "your_email@domain.com"),
]

MANAGERS = ADMINS

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3", # Add "postgresql_psycopg2", "postgresql", "mysql", "sqlite3" or "oracle".
        "NAME": "dev.db",                       # Or path to database file if using sqlite3.
        "USER": "",                             # Not used with sqlite3.
        "PASSWORD": "",                         # Not used with sqlite3.
        "HOST": "",                             # Set to empty string for localhost. Not used with sqlite3.
        "PORT": "",                             # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = "US/Eastern"

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = "en-us"

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# Absolute path to the directory that holds media.
# Example: "/home/media/media.lawrence.com/"
MEDIA_ROOT = os.path.join(PROJECT_ROOT, "static")

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash if there is a path component (optional in other cases).
# Examples: "http://media.lawrence.com", "http://example.com/media/"
MEDIA_URL = "/site_media/media/"

# Absolute path to the directory that holds static files like app media.
# Example: "/home/media/media.lawrence.com/apps/"
STATIC_ROOT = os.path.join(PROJECT_ROOT, "site_media", "static")

# URL that handles the static files like app media.
# Example: "http://media.lawrence.com"
STATIC_URL = "/site_media/static/"

# Additional directories which hold static files
STATICFILES_DIRS = [
    os.path.join(PROJECT_ROOT, "static"),
    os.path.join(PROJECT_ROOT, "media"),
]

STATICFILES_FINDERS = [
    "staticfiles.finders.FileSystemFinder",
    "staticfiles.finders.AppDirectoriesFinder",
    "staticfiles.finders.LegacyAppDirectoriesFinder",
    "compressor.finders.CompressorFinder",
]

# URL prefix for admin media -- CSS, JavaScript and images. Make sure to use a
# trailing slash.
# Examples: "http://foo.com/media/", "/media/".
ADMIN_MEDIA_PREFIX = posixpath.join(STATIC_URL, "admin/")

# Subdirectory of COMPRESS_ROOT to store the cached media files in
COMPRESS_OUTPUT_DIR = "cache"

# Make this unique, and don't share it with anybody.
SECRET_KEY = "HIDDEN"

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = [
    "django.template.loaders.filesystem.load_template_source",
    "django.template.loaders.app_directories.load_template_source",
]

MIDDLEWARE_CLASSES = [
    "django.middleware.common.CommonMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django_openid.consumer.SessionConsumer",
    "django.contrib.messages.middleware.MessageMiddleware",
    "pinax.apps.account.middleware.LocaleMiddleware",
    "pagination.middleware.PaginationMiddleware",
    "pinax.middleware.security.HideSensistiveFieldsMiddleware",
    "debug_toolbar.middleware.DebugToolbarMiddleware",
]

ROOT_URLCONF = "ezstyler.urls"

TEMPLATE_DIRS = [
    os.path.join(PROJECT_ROOT, "templates"),
]

TEMPLATE_CONTEXT_PROCESSORS = [
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.request",
    "django.contrib.messages.context_processors.messages",

    "staticfiles.context_processors.static",

    "pinax.core.context_processors.pinax_settings",

    "pinax.apps.account.context_processors.account",

    "notification.context_processors.notification",
    "announcements.context_processors.site_wide_announcements",
]

INSTALLED_APPS = [
    # Django
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.sites",
    "django.contrib.messages",
    "django.contrib.humanize",

    "pinax.templatetags",

    # theme
    "pinax_theme_foundation",

    # external
    "notification", # must be first
    "staticfiles",
    "compressor",
    "debug_toolbar",
    "mailer",
    "django_openid",
    "timezones",
    "emailconfirmation",
    "announcements",
    "pagination",
    "idios",
    "metron",

    # Pinax
    "pinax.apps.account",
    "pinax.apps.signup_codes",

    # project
    "about",
    "profiles",
    "outfits",
]

FIXTURE_DIRS = [
    os.path.join(PROJECT_ROOT, "fixtures"),
]

MESSAGE_STORAGE = "django.contrib.messages.storage.session.SessionStorage"

EMAIL_BACKEND = "mailer.backend.DbBackend"

ABSOLUTE_URL_OVERRIDES = {
    "auth.user": lambda o: "/profiles/profile/%s/" % o.username,
}

AUTH_PROFILE_MODULE = "profiles.Profile"
NOTIFICATION_LANGUAGE_MODULE = "account.Account"

ACCOUNT_OPEN_SIGNUP = True
ACCOUNT_USE_OPENID = False
ACCOUNT_REQUIRED_EMAIL = False
ACCOUNT_EMAIL_VERIFICATION = False
ACCOUNT_EMAIL_AUTHENTICATION = False
ACCOUNT_UNIQUE_EMAIL = EMAIL_CONFIRMATION_UNIQUE_EMAIL = False

AUTHENTICATION_BACKENDS = [
    "pinax.apps.account.auth_backends.AuthenticationBackend",
]

LOGIN_URL = "/account/login/" # @@@ any way this can be a url name?
LOGIN_REDIRECT_URLNAME = "what_next"
LOGOUT_REDIRECT_URLNAME = "home"

EMAIL_CONFIRMATION_DAYS = 2
EMAIL_DEBUG = DEBUG

DEBUG_TOOLBAR_CONFIG = {
    "INTERCEPT_REDIRECTS": False,
}

# local_settings.py can be used to override environment-specific settings
# like database and email that differ between development and production.
try:
    from local_settings import *
except ImportError:
    pass 
```

如果有帮助，还有**urls.py ：**

```
from django.conf.urls.defaults import *
from outfits.views import *
import settings

urlpatterns = patterns("",
    # Outfits
    url(r'^$', outfit_list, name='outfit_list'),
    url(r'^new/$', outfit_create, name='outfit_create'),
    url(r'^detail/(\d+)/$', outfit_detail, name='outfit_detail'),
    url(r'^update/(\d+)/$', outfit_update, name='outfit_update'),
    url(r'^delete/(\d+)/$', outfit_delete, name='outfit_delete'),
    # Products
    url(r'^detail/(\d+)/add/confirm/$', product_confirm, name='product_confirm'),
    url(r'^outfit_displayImg/$', outfits_displayImg),
    url(r'^detail/(\d+)/add/$', product_add, name='product_add'),
    url(r'^detail/(\d+)/update/(\d+)$', product_update, name='product_update'),
    url(r'^detail/(\d+)/delete/(\d+)$', product_delete, name='product_delete'),
)

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^site_media/media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
) 
```

所以在我的模板 {{ MEDIA_URL }}{{ p.images }} 中返回正确的 URL **http://127.0.0.1:8000/site_media/media/products/co_macysLogo3.gif**，但是当我打开它时我得到*Page Not Found* .

该文件在那里，所以我不确定它为什么抱怨。我已经查看了关于 SO 的 3 或 4 个其他问题，这些问题与我的相似，但他们的答案都没有解决我的问题。奇怪的是我的 {{STATIC_URL}} 工作得很好，但不是 {{MEDIA_URL}}。如果可以的话，我当然会使用 STATIC_URL，只是为了让我的应用程序正常工作，但不幸的是 Django 的 ImageField upload_to 参数只将图像上传到媒体文件夹。

**更新：**将 MEDIA_ROOT 更改为`MEDIA_ROOT = os.path.join(PROJECT_ROOT, "static")`并通过 {{ STATIC_URL }}{{ p.images }} 调用我的图像解决了这个问题。我希望有更好的方法。我仍然不明白为什么 Django 不能从 MEDIA_URL 提供图像文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-23T07:17:36.600

在您的`urls.py`文件中，您需要执行以下操作：

```
from django.conf import settings
from django.conf.urls.static import static

if settings.DEBUG:
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T05:38:48.550

`if settings.DEBUG`在 urls.py下添加以下行

```
(r'^site-media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes':True}), 
```

或设置`MEDIA_URL = "/media/"`

`staticfiles`提供静态文件，对于媒体文件，您必须明确指定服务路径。

*更新*

当使用文件后端存储媒体文件时，例如`ImageField(upload_to='product')`，将创建一个名为 foo 的文件`MEDIA_ROOT/product/foo`；页面中文件的 URL 是`MEDIA_URL/product/foo`；在开发服务器上，您必须配置`urls.py`为请求提供服务`'MEDIA_URL/(?<path>.*)$'`，其中路径为`product/foo`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T19:36:55.033

只是一个简单的例子，说明在我的一个项目中什么对我有用。
设置.py

```
MEDIA_ROOT = os.path.join(PROJECT_ROOT, 'site_media', 'media')
MEDIA_URL = '/site_media/media/'
STATIC_ROOT = os.path.join(PROJECT_ROOT, 'site_media', 'static')
SITE_MEDIA_URL = '/site_media/'
STATIC_URL = '/site_media/'
ADMIN_TOOLS_MEDIA_URL = '/site_media/'
ADMIN_MEDIA_PREFIX = posixpath.join(STATIC_URL, "admin/")
STATICFILES_DIRS = (os.path.join(PROJECT_ROOT, 'site_media'),) 
```

网址.py

```
if settings.SERVE_MEDIA:
    urlpatterns += patterns("",
        (r'^site_media/(?P<path>.*)$', 'django.views.static.serve',
            {'document_root': settings.STATIC_ROOT, 'show_indexes': True }),
        (r'^static/(?P<path>.*)$', 'django.views.static.serve',
            {'document_root': settings.STATIC_ROOT, }), 
```

模型.py

```
image = ImageField(upload_to='products/product_type', blank=True, null=True) 
```

模板（简化）

```
<img src="{{object.image.url}}" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:42:42.583

url 模式与您的 MEDIA_URL 不一致。您可以将设置中的 MEDIA_URL 更改为“/media/”以匹配您的 url 设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T06:10:03.040

我认为这是正确的

```
(r'^site-media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': 'media/your/path'}), 
```

之后检查您的文件是否存在于此路径中

意味着您必须`products/co_macysLogo3.gif`在媒体路径中

# java - 无法实例化检测 ComponentInfo

> ID：10408025
> 
> 赞同：1
> 
> 时间：2012-05-02T05:08:53.360
> 
> 标签：java, android, junit, manifest

我正在尝试为 Android 设置 JUnit 测试，并且我已经设置了清单和此类设置，但我不断收到此错误：

```
java.lang.RuntimeException: Unable to instantiate instrumentation ComponentInfo {com.example.Android/android.test.InstrumentationTestRunner}: java.lang.ClassNotFoundException: android.test.InstrumentationTestRunner in loader dalvik.system.PathClassLoader[/data/app/com.example.Android-1.apk:/data/app/com.example.Android-1.apk] 
```

测试类：

```
 public class ConnectionToSiteTest extends AndroidTestCase{
    private final String emailUsername = "testUser@gmail.com";
    private final String password = "test";
    private final String features = "222222";
    private String commands;

    public void testCommandReturn(){
        requestToSite();

        assertEquals("222222", commands);
    }

    private void requestToSite(){
        try {
            // Create params for connection including 3sec timeout
            // on connection and 5sec timeout on socket
            HttpParams httpParams = new BasicHttpParams();
            int timeoutConnection = 3000;
            int timeoutSocket = 5000;

            // Set the timeouts
            HttpConnectionParams.setConnectionTimeout(httpParams,
                    timeoutConnection);
            HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);
            HttpClient httpClient = new DefaultHttpClient(httpParams);

            // Create the data entities
            HttpPost post = new HttpPost("http://example.com/AndroidCommands");
            HttpResponse response;

            // Set POST data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    2);
            nameValuePairs.add(new BasicNameValuePair("emailUsername",
                    emailUsername));
            nameValuePairs.add(new BasicNameValuePair("password",
                    password));
            nameValuePairs.add(new BasicNameValuePair("features",
                    features));
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Query the server and store the user's ID
            response = httpClient.execute(post);

            // Grabs the command string from response headers and processes them
            commands = (String) response.getHeaders("commands")[0].getValue();

        } catch (UnsupportedEncodingException e) {
        } catch (ClientProtocolException e) {
        } catch (IOException e) {
        }
    }
} 
```

AndroidManifest.xml：

```
<uses-library android:name="android.test.runner" />
<instrumentation android:name="android.test.InstrumentationTestRunner"
   android:targetPackage="edu.neumont.MillerK.Android" android:label="Tests for My App" />
<activity
        android:name="com.example.Android.ConnectionToSiteTest">            
    </activity> 
```

测试套件类：

```
 public class AllTests extends TestSuite {
    public static Test suite() {
        return new TestSuiteBuilder(AllTests.class).includeAllPackagesUnderHere().build();
    }
} 
```

我一直试图在某个地方找到它已修复的相同异常，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:48:25.403

您确定测试在正确的 Android 测试项目中吗？您可以通过右键单击您的项目 -> Android 工具 -> 添加 Android 测试项目在 Eclipse 中添加一个。你所有的测试都应该放在那个项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:00:08.337

可能是 Eclipse 没有正确构建包。当它发生在我身上时，完全相同的错误，我查找并轻松找到了解决方案。就我而言，我在*YourProject->Properties->Builders*下缺少**Android Package Builder**。要再次添加它，我只是在 Eclipse 的 .project 文件中添加了几行（ApkBuilder 行）。您可能会遇到不同的问题，但请检查您的 .project 是否如下所示：

 *```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>xxx-it</name>
    <comment></comment>
    <projects>
        <project>xxx-project</project>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ResourceManagerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.PreCompilerBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>com.android.ide.eclipse.adt.ApkBuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.m2e.core.maven2Builder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
        <nature>org.eclipse.jdt.core.javanature</nature>
        <nature>org.eclipse.m2e.core.maven2Nature</nature>
    </natures>
</projectDescription> 
```*

# php - Jquery show hide 在 ie7 中不起作用

> ID：10408031
> 
> 赞同：1
> 
> 时间：2012-05-02T05:09:15.487
> 
> 标签：php, jquery, html

请参考这个小提琴

[http://jsfiddle.net/qJBhD/4/](http://jsfiddle.net/qJBhD/4/)

此处单击 question1 时，将显示 answer1。

但是如果我们打开这个ie7，它就不起作用了。在这里单击问题1时，问题2是切换的。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:17:06.987

整个问题是因为您的 HTML 标记。

用这个

```
<div style="" id="25294" class="pane">

     <ol>
                         <li ><span class="question">Question 1 </span>  <p class="answer">
               Answer1</p>

              </li>

                         <li ><span class="question">Question 2</span> <p class="answer">
               Answer2
            </p>

              </li>

          <li ><span class="question">Question 3</span> <p class="answer">
               Answer3
            </p>

              </li>

         </ol></div> 
```

在 IE7 中检查（兼容模式工作正常） -[更新小提琴：http://jsfiddle.net/qJBhD/12/](http://jsfiddle.net/qJBhD/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:43:04.307

而不是这个`<li class="question"><span></span></li><p class="answer"></p>`，你应该切换到`<li class="question"><span></span><p class="answer"></p></li>`

并将你的脚本更改为

```
$('p.answer').toggle();

$('.question').live('click', function() {
        $(this).children('p.answer').slideToggle();
        });​ 
```

# ruby-on-rails - Rails：添加到另一个元素时的Link_to raw（''）

> ID：10408034
> 
> 赞同：1
> 
> 时间：2012-05-02T05:10:03.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我看来，我想在下面的第二个示例`Post.find..`之前拥有。`raw`之所以`raw`存在，是因为我正在使用需要用 css 检测的单独字体内联。

将帖子放在`raw`帖子之前：这可以正确呈现。然而，这不是我想要的顺序。

```
<%= link_to raw("<span id='arrow'>&gt</span>") + Post.find_by_id(post.id-1).title, params.merge(:page => @posts.previous_page) %> 
```

这不起作用，原始渲染为`"<span id='arrow'>&gt</span>"`. 但这是我想要的顺序。

```
<%= link_to Post.find_by_id(post.id-1).title + raw("<span id='arrow'>&gt</span>"), params.merge(:page => @posts.previous_page) %> 
```

如何让第二个语句`raw`正确呈现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T05:30:10.407

```
<%= link_to raw("#{Post.find_by_id(post.id-1).title} <span id='arrow'>&gt</span>"), params.merge(:page => @posts.previous_page) %> 
```

# google-maps - 如何在谷歌地图的卫星视图中显示标签

> ID：10408038
> 
> 赞同：50
> 
> 时间：2012-05-02T05:10:31.260
> 
> 标签：google-maps, google-maps-api-3

![在此处输入图像描述](../Images/281836cef43d6521109cbfbefe1a1ca4.png)

我的地图显示正常。但是上面没有显示标签。当我检查**卫星 => 标签时，我可以显示标签**。

默认情况下如何检查**卫星 => 标签**（通过代码）。现在默认情况下不显示任何标签。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-02T05:48:23.123

在用于创建地图的 MapOptions 对象中，使用`MapTypeId.HYBRID`，如下所示：

```
var myLatlng = new google.maps.LatLng(-34.397, 150.644);
var myOptions = {
  zoom: 8,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.HYBRID
};
var map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-02T05:49:30.023

我不知道在 SATELLITE 视图中显式显示标签的选项。“样式”属性应该这样做，但是当我用下面的代码尝试这个时我没有幸运：

```
styles:[
    {
        featureType: "all",
        elementType: "labels",
        stylers: [
            { visibility: "on" }
        ]
    }
] 
```

我最终使用了混合地图类型，而不是使用卫星地图类型，并隐藏了默认用户界面以关闭更改地图类型菜单的可见性，并隐藏了“道路”元素：

```
mapOptions: {
    disableDefaultUI: true,
    mapTypeId: 'hybrid',
styles: [
        {
        featureType: "road",
        stylers: [
                 {visibility: "off"}
             ]
        }
    ] 
```

# java - 异常后 Quartz 调度程序不工作 [java.lang.IllegalStateException: HttpSession 无效]

> ID：10408039
> 
> 赞同：0
> 
> 时间：2012-05-02T05:10:42.210
> 
> 标签：java, exception, weblogic, scheduled-tasks, quartz-scheduler

我目前正在我的 Web 应用程序中使用 Quartz 调度程序来在运行服务器后调度任务，然后定期重复它。
该过程在我的开发服务器中运行良好，但是当部署到生产环境时，它很好，但有时发生一些异常时它会停止工作。不知道异常是因为这个调度过程还是有别的原因。
异常总是发生在应该开始调度的 2-3 分钟之前。

这是堆栈跟踪。

```
java.lang.IllegalStateException: HttpSession is invalid
    at weblogic.servlet.internal.session.SessionData.getInternalAttribute(SessionData.java:690)
    at weblogic.servlet.internal.session.SessionData.getInternalAttribute(SessionData.java:685)
    at weblogic.servlet.internal.session.JDBCSessionData.dbRefresh(JDBCSessionData.java:428)
    at weblogic.servlet.internal.session.JDBCSessionData.getFromDB(JDBCSessionData.java:102)
    at weblogic.servlet.internal.session.JDBCSessionContext.getSessionDataFromDB(JDBCSessionContext.java:240)
    at weblogic.servlet.internal.session.JDBCSessionContext.getSessionInternal(JDBCSessionContext.java:220)
    at weblogic.servlet.internal.session.SessionContext$SessionInvalidator.cleanupExpiredSessions(SessionContext.java:938)
    at weblogic.servlet.internal.session.SessionContext$SessionInvalidator$1.run(SessionContext.java:894)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.session.SessionContext$SessionInvalidator.timerExpired(SessionContext.java:888)
    at weblogic.timers.internal.TimerImpl.run(TimerImpl.java:273)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

无论如何，我在开发和生产中都使用 WebLogic 应用程序服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:40:15.413

这可能会发生，因为当您尝试从中读取某些内容时，您的会话变得无效。您可以在这里做的一件事是检查配置文件中的会话超时条目。很可能您需要增加会话超时值。

# asp.net - 将 ASP 网页导出为 PDF

> ID：10408042
> 
> 赞同：0
> 
> 时间：2012-05-02T05:11:32.787
> 
> 标签：asp.net, pdf, telerik, pdf-generation

我需要导出我的 ASP 网页，其中包含 Telerik 控件、一些 ASP 控件、页眉和页脚横幅。单击按钮后，我想将此页面上的所有内容导出为 PDF。我试过 iTextSharp ，它只允许将 HTML 元素转换为 PDF。有没有免费的第三方东西可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:45:37.093

You need to get html content of your .aspx page and then you can convert html code to PDF with any 3rd party library. To get the html content of this page you can try something like that:

```
StringWriter objStringWriter = new StringWriter();
HtmlTextWriter objHtmlWriter = new HtmlTextWriter(objStringWriter);
form1.RenderControl(objHtmlWriter);
string html_sting = objStringWriter.ToString(); 
```

Where form1 is your main form on .aspx page.

# objective-c - UIAlertView 关闭后如何重新加载视图？

> ID：10408043
> 
> 赞同：1
> 
> 时间：2012-05-02T05:11:52.120
> 
> 标签：objective-c, ios

关闭 UIAlertView 后，我想重新加载视图（`viewWillDisappear`为视图和视图运行`viewWillAppear`）。

我怎么做？我尝试过委托给 nil 和 self 。这是我的代码。

```
- (IBAction)doStuffWhenUIButtonIsClicked:(id)sender
{
    int intSelection = [sender tag];
    NSString* strAlertTitle;
    NSString* strAlertMessage;
    if (intSelection == self.intCorrectChoice) {
        strAlertTitle = @"Correct tag!";
    }
    else {
        strAlertTitle = @"Sorry, incorrect tag!";
    }
strAlertMessage = @"The correct answer was 8.";

    self.answerReaction = [[UIAlertView alloc]
                           initWithTitle: strAlertTitle
                                 message: strAlertMessage
                                delegate: nil
                       cancelButtonTitle:@"Next Question"
                       otherButtonTitles:nil];
    [self.answerReaction show];
} 
```

如您所见，我想在用户回答其中一个问题后加载一个新问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T05:28:19.070

首先，您需要使您所在的视图控制器符合`UIAlertViewDelegate`协议。

然后，在显示警报之前，您需要添加以下行：

```
self.answerReaction.delegate = self; 
```

然后，实现 didDismissWithButtonIndex 委托方法：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    [self viewWillDisappear:YES];
    // load your new question
    [self viewWillAppear:YES];
} 
```

那应该照顾它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:33:56.273

只需添加当您单击 UIAlertView 上的任何按钮时触发的此方法。

```
- (void)alertView:(UIAlertView *)alertView  clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
        [self viewWillDisappear:YES];
        [self viewWillAppear:YES];
    }
} 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T10:40:16.680

它对我不起作用！我有：

```
- (IBAction)OkButton:(id)sender {    

  // store your selected row
    NSUInteger selectedRow = [_intervalPicker selectedRowInComponent:0];    

    // Display a message to user
    if (selectedRow == CorrectAnswer) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Correct!" message:@"YAY!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];

        [alert show];

        RightScoreNumber0 += 1;
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sorry!" message:@"Wrong answer" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];

        [alert show];

        WrongScoreNumber0 += 1;
    }

} 
```

正如你所建议的：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
    NSLog(@"OK was selected");  

    [self viewWillDisappear:YES];
    // load your new question
    [self viewWillAppear:YES];
} 
```

我收到消息“确定已选择”，但没有其他反应...

**它终于奏效了，但以另一种方式！** 我两个都换

```
[self viewWillDisappear:YES];
[self viewWillAppear:YES]; 
```

和

```
[self viewDidLoad]; 
```

# mysql - 如何在生产模式下从 ruby on rails 运行 nodejs 脚本

> ID：10408045
> 
> 赞同：4
> 
> 时间：2012-05-02T05:12:24.393
> 
> 标签：mysql, ruby-on-rails-3, node.js, production-environment

在我的项目中，我试图从 ruby​​ on rails 运行 nodejs 脚本。

我像这样在我的 product_details_controller 中运行：

```
system "node /home/user1/sample.js" 
```

在 sample.js 中是这样的：

```
var jsdom = require('/usr/local/lib/node_modules/jsdom'),
    request = require('/usr/local/lib/node_modules/request');
var _mysql = require('/usr/local/lib/node_modules/mysql');
var MYSQL_USER = 'root';
var MYSQL_PASS = 'abc';
var DATABASE = 'example';
var mysql = _mysql.createClient({
    user: MYSQL_USER,
    password: MYSQL_PASS,
});
mysql.query('USE ' + DATABASE);
mysql.query('select * from product_details',
    function selectCb(err, results, fields) {
        if (err) throw err;
        else {
            for (var i in results) {
                var product = results[i];
                console.log(product);
            }
        }
    }); 
```

在开发模式下它工作正常。但是当我尝试在服务器中部署它时遇到问题。

mysql.query('use '+DATABASE) 没有执行，它只在那里循环。我不知道如何解决这个问题。请帮忙。在错误日志中也没有收到错误。我也没有收到任何错误和任何回应。请帮我。提前致谢。

# haskell - 在 Haskell 中为左关联树实现“读取”

> ID：10408046
> 
> 赞同：8
> 
> 时间：2012-05-02T05:12:37.110
> 
> 标签：haskell

我很难为树结构实现[Read 。](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t:Read)我想采用左关联字符串（带括号）`ABC(DE)F`并将其转换为树。该特定示例对应于树

![树](../Images/c90ee53ce6f0ad8b5625dae27566bcd1.png).

这是我正在使用的数据类型（尽管我愿意接受建议）：

```
data Tree = Branch Tree Tree | Leaf Char deriving (Eq) 
```

在 Haskell 中，那棵特定的树是：

```
example = Branch (Branch (Branch (Branch (Leaf 'A')
                                         (Leaf 'B'))
                                 (Leaf 'C'))
                         (Branch (Leaf 'D')
                                 (Leaf 'E')))
                 (Leaf 'F') 
```

我的`show`功能如下：

```
instance Show Tree where
    show (Branch l r@(Branch _ _)) = show l ++ "(" ++ show r ++ ")"
    show (Branch l r) = show l ++ show r
    show (Leaf x) = [x] 
```

我想做一个`read`函数，以便

```
read "ABC(DE)F" == example 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T08:28:25.190

在这种情况下，使用解析库会使代码非常短且极具表现力。（当我尝试回答这个问题时，我很惊讶它是*如此整洁！）*

我将使用[Parsec](http://www.haskell.org/haskellwiki/Parsec)（该文章提供了一些链接以获取更多信息），并以“应用模式”（而不是单子模式）使用它，因为我们不需要单子的额外功率/射脚能力。

### 代码

首先是各种导入和定义：

```
import Text.Parsec

import Control.Applicative ((<*), (<$>))

data Tree = Branch Tree Tree | Leaf Char deriving (Eq, Show)

paren, tree, unit :: Parsec String st Tree 
```

现在，树的基本单位是单个字符（不是括号）或带括号的树。带括号的树只是介于`(`和之间的普通树`)`。正常的树只是左关联地放入分支的单元（它非常自递归）。在使用 Parsec 的 Haskell 中：

```
-- parenthesised tree or `Leaf <character>`
unit = paren <|> (Leaf <$> noneOf "()") <?> "group or literal"

-- normal tree between ( and )
paren = between (char '(') (char ')') tree  

-- all the units connected up left-associatedly
tree = foldl1 Branch <$> many1 unit

-- attempt to parse the whole input (don't short-circuit on the first error)
onlyTree = tree <* eof 
```

（是的，这就是整个解析器！）

如果我们愿意，我们可以不这样做`paren`，`unit`但上面的代码非常有表现力，所以我们可以保持原样。

作为简要说明（我提供了文档的链接）：

*   [`(<|>)`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Prim.html#v:-60--124--62-)基本上是指“左解析器或右解析器”；
*   [`(<?>)`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Prim.html#v:-60--63--62-)允许您制作更好的错误消息；
*   [`noneOf`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Char.html#v:noneOf)将解析不在给定字符列表中的任何内容；
*   [`between`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Combinator.html#v:between)接受三个解析器，并返回第三个解析器的值，只要它由第一个和第二个分隔即可；
*   [`char`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Char.html#v:char)从字面上解析它的论点。
*   [`many1`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Combinator.html#v:many1)将其一个或多个参数解析为一个列表（因此空字符串似乎无效`many1`，而不是`many`解析零个或多个）；
*   [`eof`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Combinator.html#v:eof)匹配输入的结尾。

我们可以使用该[`parse`](http://hackage.haskell.org/packages/archive/parsec/3.1.2/doc/html/Text-Parsec-Prim.html#v:parse)函数来运行解析器（它返回`Either ParseError Tree`,`Left`是一个错误并且`Right`是一个正确的解析）。

### 作为`read`

将其用作`read`类似功能可能类似于：

```
read' str = case parse onlyTree "" str of
   Right tr -> tr
   Left er -> error (show er) 
```

（我曾经`read'`避免与`Prelude.read`; 如果你想要一个`Read`实例，你将不得不做更多的工作来实现`readPrec`（或任何需要的），但它不应该太难与实际解析已经完成。）

### 例子

一些基本的例子：

```
*Tree> read' "A"
Leaf 'A'

*Tree> read' "AB"
Branch (Leaf 'A') (Leaf 'B')

*Tree> read' "ABC"
Branch (Branch (Leaf 'A') (Leaf 'B')) (Leaf 'C')

*Tree> read' "A(BC)"
Branch (Leaf 'A') (Branch (Leaf 'B') (Leaf 'C'))

*Tree> read' "ABC(DE)F" == example
True

*Tree> read' "ABC(DEF)" == example
False

*Tree> read' "ABCDEF" == example
False 
```

展示错误：

```
*Tree> read' ""
***Exception: (line 1, column 1):
unexpected end of input
expecting group or literal

*Tree> read' "A(B"
***Exception: (line 1, column 4):
unexpected end of input
expecting group or literal or ")" 
```

`tree`最后，和之间的区别`onlyTree`：

```
*Tree> parse tree "" "AB)CD"     -- success: ignores ")CD"
Right (Branch (Leaf 'A') (Leaf 'B'))

*Tree> parse onlyTree "" "AB)CD" -- fail: can't parse the ")"
Left (line 1, column 3):
unexpected ')'
expecting group or literal or end of input 
```

### 结论

秒差距是惊人的！这个答案可能很长，但它的核心只是完成所有工作的 5 或 6 行代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T05:48:30.570

这非常像一个堆栈结构。当您遇到输入字符串`"ABC(DE)F"`时，您`Leaf`将找到任何原子（非括号）并将其放入累加器列表中。当列表中有 2 个项目时，将`Branch`它们放在一起。这可以通过以下方式完成（注意，未经测试，仅包括给出一个想法）：

```
read' [r,l] str  = read' [Branch l r] str
read' acc (c:cs) 
   -- read the inner parenthesis
   | c == '('  = let (result, rest) = read' [] cs 
                 in read' (result : acc) rest
   -- close parenthesis, return result, should be singleton
   | c == ')'  = (acc, cs) 
   -- otherwise, add a leaf
   | otherwise = read' (Leaf c : acc) cs
read' [result] [] = (result, [])
read' _ _  = error "invalid input" 
```

这可能需要一些修改，但我认为它足以让你走上正轨。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T13:34:07.810

dbaupp 的解析秒回答很容易理解。作为“低级”方法的一个示例，这里是一个手写解析器，它使用成功延续来处理左关联树的构建：

```
instance Read Tree where readsPrec _prec s = maybeToList (readTree s)

type TreeCont = (Tree,String) -> Maybe (Tree,String)

readTree :: String -> Maybe (Tree,String)
readTree = read'top Just where
  valid ')' = False
  valid '(' = False
  valid _ = True

  read'top :: TreeCont -> String -> Maybe (Tree,String)
  read'top acc s@(x:ys) | valid x =
    case ys of
      [] -> acc (Leaf x,[])
      (y:zs) -> read'branch acc s
  read'top _ _ = Nothing

  -- The next three are mutually recursive

  read'branch :: TreeCont -> String -> Maybe (Tree,String)
  read'branch acc (x:y:zs) | valid x = read'right (combine (Leaf x) >=> acc) y zs
  read'branch _ _ = Nothing

  read'right :: TreeCont -> Char -> String -> Maybe (Tree,String)
  read'right acc y ys | valid y = acc (Leaf y,ys)
  read'right acc '(' ys = read'branch (drop'close >=> acc) ys
     where drop'close (b,')':zs) = Just (b,zs)
           drop'close _ = Nothing
  read'right _ _ _ = Nothing  -- assert y==')' here

  combine :: Tree -> TreeCont
  combine build (t, []) = Just (Branch build t,"")
  combine build (t, ys@(')':_)) = Just (Branch build t,ys)  -- stop when lookahead shows ')'
  combine build (t, y:zs) = read'right (combine (Branch build t)) y zs 
```

# sql - VB 例程在日期/时间日志中定位和分类重复事件

> ID：10408048
> 
> 赞同：2
> 
> 时间：2012-05-02T05:12:53.440
> 
> 标签：sql, ms-access, vba

我在 Access 中有一个表格，用于记录特定医疗程序的患者 ID、日期/时间和医生姓名。我需要想出一种方法来识别和分类同一天执行的重复测试并相应地应用代码。我想找到一种自动更新代码字段的方法，而不是让别人手动更新（这是目前的做法，这很容易出错！）。我的表类似于以下。

```
Patient_id  Test_date_time      Doctor id    Code
----------  ------------------  ---------    -------
123         4/2/2012  08:00 AM  SMITH_J
123         4/2/2012  12:01 PM  SMITH_J     
123         4/3/2012  11:00 AM  SMITH_J
123         5/1/2012  10:00 AM  SMITH_J
123         5/1/2012  07:00 PM  SMITH_J
123         5/1/2012  08:00 PM  JONES_B
123         5/1/2012  10:00 PM  SMITH_J 
```

我需要根据以下条件更新表格：

使同一医生在同一天执行的所有重复程序的代码 = 76（但对于特定日期的第一次测试将代码留空）。

将代码 = 77 用于在同一天执行的重复程序，但由不同的医生执行（但再次将第一次出现的代码留空）。

换句话说，搜索日志以查找患者在同一天进行测试的所有实例，如果医生与第一次出现的医生相同，则将这些重复程序的代码设为 76，如果医生不同，则将代码设为 77比第一次出现。

在上面的例子中，期望的结果是：

```
Patient_id  Test_date_time      Doctor_id    Code
----------  ------------------  ---------   -------
123         4/2/2012  08:00 AM  SMITH_J     
123         4/2/2012  12:01 PM  SMITH_J     76
123         4/3/2012  11:00 AM  SMITH_J     
123         5/1/2012  10:00 AM  SMITH_J
123         5/1/2012  07:00 PM  SMITH_J     76
123         5/1/2012  08:00 PM  JONES_B     77
123         5/1/2012  10:00 PM  SMITH_J     76 
```

Test_date_time 字段被格式化为日期/时间字段。该表未按 date_time 字段排序。Patient_id 是患者独有的数字，Doctor_id 是医生独有的字符串。

我什至不确定从哪里开始或如何存储信息以比较日期。有什么想法可以解决这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:53:24.630

以下查询将确定您是否需要给定代码的 76 或 77 值`{Patient_id, Test_Date_type`}

遗憾的是，这不能在[可更新查询](http://support.microsoft.com/default.aspx?scid=kb;en-us;116142&Produc)中使用。正如 MSDN 文章建议的那样，您有两种选择。1）循环遍历更新每条记录的结果或将结果插入临时表，然后使用该临时表进行更新。

```
SELECT Ptests.Patient_id, 
       Ptests.Test_date_time, 
       Iif(SeventySixers.Patient_id IS NULL, 77, 76) AS Code 
FROM   (PTests 
        LEFT JOIN (SELECT MAX(Test_date_time) AS last_date_time, 
                          Patient_id 
                   FROM   PTests AS t1 
                   GROUP  BY Datevalue(test_date_time), 
                             Patient_id, 
                             Doctor_id 
                   HAVING COUNT(*) > 1) AS SeventySixers 
          ON ( PTests.Test_date_time = SeventySixers.last_date_time ) 
             AND ( PTests.Patient_id = SeventySixers.Patient_id )) 
       LEFT JOIN (SELECT MAX(Test_date_time) AS last_date_time, 
                         Patient_id 
                  FROM   PTests AS t1 
                  GROUP  BY Datevalue(test_date_time), 
                            Patient_id 
                  HAVING COUNT(*) > 1) AS SeventySevens 
         ON ( PTests.Test_date_time = SeventySevens.last_date_time ) 
            AND ( PTests.Patient_id = SeventySevens.Patient_id ) 
WHERE  (( NOT ( SeventySixers.Patient_id ) IS NULL )) 
        OR (( NOT ( SeventySevens.Patient_id ) IS NULL )); 
```

* * *

创建和插入用于测试的语句

```
CREATE TABLE [PTests]
    ([Patient_id] int, [Test_date_time] datetime, [Doctor_id] varchar(7), [Code] int);

INSERT INTO [PTests]
    ([Patient_id], [Test_date_time], [Doctor_id], [Code])
VALUES
    (123, #2012-04-02 08:00:00#, 'SMITH_J', null);

INSERT INTO [PTests]
    ([Patient_id], [Test_date_time], [Doctor_id], [Code])
VALUES
    (123, #2012-04-02 12:01:00#, 'SMITH_J', null);

INSERT INTO [PTests]
    ([Patient_id], [Test_date_time], [Doctor_id], [Code])
VALUES
    (123, #2012-04-03 11:00:00#, 'SMITH_J', null);

INSERT INTO [PTests]
    ([Patient_id], [Test_date_time], [Doctor_id], [Code])
VALUES
    (123, #2012-05-01 10:00:00#, 'SMITH_J', null);

INSERT INTO [PTests]
    ([Patient_id], [Test_date_time], [Doctor_id], [Code])
VALUES
    (123, #2012-05-01 19:00:00#, 'SMITH_J', null);

INSERT INTO [PTests]
    ([Patient_id], [Test_date_time], [Doctor_id], [Code])
VALUES
    (123, #2012-05-01 20:00:00#, 'JONES_B', null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:55:51.413

像这样的查询会将条目过滤到患者在同一天有多行的位置：

```
SELECT source.*
    FROM Table1 as source
      left join table1 as joined
         on source.patient_id = joined.patient_id 
           and DateValue(source.test_date_time) = DateValue(joined.test_date_time)
           and source.test_date_time <> joined.test_date_time
      WHERE joined.patient_id is not null 
```

这给出了：

```
Patient_id  Test_date_time          Doctor_id    Code           
----------  ------------------      ---------   -------           
123         5/2/2012 1:05:00 AM     smith_j 
123         5/2/2012 12:50:00 AM    smith_j     76
123         5/1/2012 10:00:00 AM    smith_j 
123         5/1/2012 8:00:00 PM     jones_b     77 
```

然后，您将需要某种程序代码来遍历查询结果 (RecordSet)，并根据与第一次出现的医生 ID 值的比较为行分配 76 或 77。

您可能希望对记录集中的患者 ID 和 DatePart(test_date_time) 进行过滤或 GROUP BY，以确保您不会在迭代中进入其他患者/天。

# php - 选择值时提交表单，如何在表单处理中识别提交事件

> ID：10408050
> 
> 赞同：0
> 
> 时间：2012-05-02T05:13:13.723
> 
> 标签：php, forms

我有一个简单的表单，它有一个选择下拉菜单。从菜单中选择一个项目后，我会提交表单...执行此操作的代码是：

```
<select name="some name" onchange="this.form.submit"></select> 
```

现在，如果使用提交按钮（比如 name="submitForm"）提交此表单，那么我只需这样做：

`if($_POST['submitForm'] == 'submit')`然后进行依赖于表单提交的处理。

但是，由于每个人都没有提交按钮，我如何获得 $_POST['some name'] == 'submit' 的等价物？（这显然是不正确的）

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:14:33.303

在标签*内*添加一个名为`submitForm`和值的隐藏输入字段。`submit` *`<form></form>`*

 *```
<input type="hidden" name="submitForm" value="submit" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:32:25.923

如果您有如下表格，请输入`index.php`

```
 <form method='POST' action="index.php">
        <input type='text' name='input1' />
        <input type='submit' name='test' style="display: none;" />
        <select id="selSubmit" name='submit_option' onchange="this.form.submit()">
        <option>Option 1</option>
        <option>Option 2</option>
        </select>
     </form> 
```

要检查表单是否已提交，您可以检查字段是否不为空`$_POST['one of the field'] != ''`，而不是正常的 submit `$_POST['name of form']`。

```
 <?php 
        if($_POST['input1'] != '') || $_POST['submit_option'] != ''){
             print_r($_POST);
        }

     ?> 
```

或者您可以按照 Bibhas 的建议设置一个具有定义值的隐藏字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:24:36.610

您可以创建一个可以发布的隐藏字段，例如 name = "processMode" value = "Partial|Submit"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:18:58.233

检查 $_POST 中的所有其他按钮。如果没有发送，则表示使用了 JS 提交表单。就那么简单。:)*

# java - PipedOutputStream / PipedInputStream（或Reader/Writer）和BlockingQueue在Java中用于异步文件写入的异同

> ID：10408055
> 
> 赞同：5
> 
> 时间：2012-05-02T05:14:29.970
> 
> 标签：java, multithreading, io

我正在尝试修改从数据库读取并将结果写入文件的串行程序，这是以阻塞方式完成的，我认为我们可以通过有内存缓冲区并写入文件来提高性能异步的“背景”

我可以想到“工作面试”解决方案，使用线程、共享资源、同步块等......但我确信有更好的方法（是否有一个不错的小“延迟写入”库可以做到为了我？）

是否有任何`java.util.concurrent`软件包提供任何帮助？`java.nio`? 或者可能是 JMS/ActiveMQ？

`PipedOutputStream`/`PipedInputStream`作为我的缓冲区的基础呢？

如何在 Java 中实现延迟/后台/缓冲/非阻塞/异步文件写入器？

**编辑：**

根据建议，并避免关闭此问题（因为我认为根据答案评论和投票仍然相关），这是试图使其更加集中的尝试。（我保留上面的原始问题，因此答案仍将保留在上下文中，因为有一些非常好的答案）

*   `PipedOutputStream`/ `PipedInputStream`（或`PipedReader`/ `PipedWriter`）和之间的实际区别是什么`BlockingQueue`
*   并且最好将后者用于异步文件写入？（或者这是苹果与橙子的比较，如果是，我想知道为什么？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T05:46:59.703

您可能希望在生产者（数据库读取器）和消费者（文件写入器）之间使用有界阻塞队列。

Java 的[ArrayBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)很好地完成了这项工作。如果缓冲区已满，生产者会阻塞，从而避免消耗过多内存的任何问题。

在并发线程中进行生产和消费最好使用 Java 的[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)框架来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:11:17.830

> 我可以想到“工作面试”解决方案，使用线程、共享资源、同步块等......但我确信有更好的方法（是否有一个不错的小“延迟写入”库可以做到为了我？）

我从来没有遇到过“延迟写入”库。但我想这实际上只是一个输出流/写入器，它使用一个从队列/缓冲区读取并写入阻塞输出的私有线程写入队列或循环缓冲区。这应该可行，但可能难以避免复制双重复制数据的成本。

> 是否有任何 java.util.concurrent 包提供任何帮助？

可能。

> java.nio?

可能。

> 或者可能是 JMS/ActiveMQ？

我对此表示怀疑……如果您的目标是写入本地文件。

> PipedOutputStream / PipedInputStream 作为我的缓冲区的基础怎么样？

那会有所帮助。但是您仍然需要实现读/写流的线程。

* * *

忽略实现这一点的机制，我怀疑在这种情况下执行异步 I/O 不会显着提高速度。如果您以当前形式分析应用程序，您可能会发现主要瓶颈是从数据库中获取数据。写入文件可能要快几个数量级。如果是这种情况，那么重叠的数据库和文件 I/O 不太可能显着加快速度。

如果文件输出确实成为瓶颈，那么加速它的更简单方法是增加输出流缓冲区大小。这很简单——只需在`BufferedOutputStream`构造函数中添加一个额外的缓冲区大小参数。在进行重大重写之前，您应该尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T10:02:08.817

Java 7 在“NIO 2”中具有异步 I/O。

如果您不能使用 Java 7，坦率地说，我根本不会费心去尝试实现它。你可以做一些涉及期货的可怕事情，但如果不是负数，获得的收益可能为零。

# firefox - Where are the certificates of ca's stored in firefox?

> ID：10408060
> 
> 赞同：2
> 
> 时间：2012-05-02T05:14:37.423
> 
> 标签：firefox, certificate, x509certificate

I want to copy all the ca certificates of firefox to my a folder or a keystore. I don't want to export the certificates one by one. It will take a lot of time. But I am not able to get the **directory** where the ca certificates are stored. I am using windows xp.
Where will I be able to see the certificates or the keystore containing the certificates of the firefox browser?
**From the answers below,**
I have come to know that the certificates are stored in th ecert8.db file. but how to extract the contents of this file? The reason I am asking this is that my application requires that when a client submits his certificate, I have to see if the issuer is a valid ca. For that I need a list of the valid ca's. So is there any way I can anagrammatically access the certificates in cert8.db and verify the client certifiate.?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:28:15.047

All the certificates are stored in cert8.db under your profiles folder.

For Windows XP:

```
C:\Documents and Settings\<Windows login/user name>\Application Data\Mozilla\Firefox\Profiles\<profile folder> 
```

[Source](http://kb.mozillazine.org/Profile_folder_-_Firefox)

# php - php使用经度、纬度等在地图上显示天气预报数据

> ID：10408061
> 
> 赞同：0
> 
> 时间：2012-05-02T05:14:44.440
> 
> 标签：php

我想制作像 Ugrib 一样的 Web 应用程序，它使用 grib 文件在地图上显示天气信息。我有 grib 数据并希望在地图上显示是否存在任何类型的 API 可以做同样的事情。

# c++ - 如何在 Mac 上使用 clang 构建我的 C++ 代码？

> ID：10408063
> 
> 赞同：2
> 
> 时间：2012-05-02T05:15:22.487
> 
> 标签：c++, gcc, clang

我有一堆 .cpp 和 .c 文件，我使用 gcc/make 来构建一个项目。在 Mac 上只有 gcc 4.2。它非常古老，对语言有很多限制。我听说 clang 是 Mac 的默认编译器。如何更改我的 makefile 以使用 clang？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:16:41.683

对于初学者来说，GCC 4.2 并不是“很老，并且对语言有很多限制”。

话虽如此，你的 Mac，如果它安装了 GCC 4.2，也应该`clang`安装。Xcode 包括 clang 和 GCC（使用 LLVM 构建），分别是 as`clang`和`gcc`/ `g++`。任何一个：

*   `clang`将您的makefile更改为直接指向
*   将`CC`环境变量设置为`clang`
*   软链接`g++`到，`clang`如果你想对它真的很笨拙。

任何人都应该做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T05:19:02.403

您可以尝试在 makefile 中将 CC=g++ 替换为 CC=clang 或使用 CC=clang make 而不是 make 并查看它是否可以编译。

如果您使用 gnu c/c++ 扩展或 gcc 命令行选项，它可能无法编译，在这种情况下，您可以尝试使用谷歌搜索寻求帮助。

# c# - SQL Server 参数 C#

> ID：10408065
> 
> 赞同：0
> 
> 时间：2012-05-02T05:15:37.183
> 
> 标签：c#, sql-server

好的，如果它不存在，这应该向数据库添加一个新的标签，否则它应该增加计数器。

然而，到目前为止，它所做的只是添加新的，即使它们是相同的。所以我有很多相同的主题标签，都是 1。有什么建议吗？

```
HashTagReader r = new HashTagReader();

int i;
i=1;

if (r.HashTagSearch(s))
    MessageBox.Show("I Found it!");

else
{
    SqlCommand myCommand = new SqlCommand("INSERT INTO dbo.Table1 (HashTag, Counter) Values (@HashTag,@Counter)", connection);

    myCommand.Parameters.Add("@HashTag", SqlDbType.VarChar, 50).Value = s;  //Your hashTagvalue
    myCommand.Parameters.Add("@Counter", SqlDbType.VarChar, 50).Value = i++; //Your Counter Value
    myCommand.ExecuteNonQuery();
}

connection.Close(); 
```

HashTag Search 就是这样实现的

```
public bool HashTagSearch(string hashtagstring)
{
        SqlConnection connection = new SqlConnection();
        connection.ConnectionString = (@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Jordan Moffat\Desktop\coursework\WindowsFormsApplication1\WindowsFormsApplication1\HashTags.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
        //  SqlConnection connection = new SqlConnection();
        //  connection.ConnectionString = "C:/Users/Jordan Moffat/Desktop/coursework/WindowsFormsApplication1/WindowsFormsApplication1/HashTags.mdf"; //Your connection string
        SqlCommand command = new SqlCommand();
        command.Connection = connection;
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = "FindString";
        command.Parameters.AddWithValue("@MyString", hashtagstring);
        try
        {
            connection.Open();
            SqlDataReader reader = command.ExecuteReader();
            while (reader.Read())
            {
                return true;
            }
        }
            catch (Exception)
    {
        // MessageBox.Show("heel");
    }
    finally
    {
        if (connection.State == ConnectionState.Open)
            connection.Close();
    }
    return false;
}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:30:21.500

从提供的代码中很难分辨，但看起来此代码将始终找到主题标签或添加 counter=1 的新行。如果我了解您要正确执行的操作，则您希望找到主题标签的行，然后更新其“计数器”值。如果没有找到，插入一个 counter=1 的新行。

我建议编写一个存储过程来执行包含在事务中的更新/插入。

```
CREATE PROC InsertOrUpdateHashTag
(
    @hashtag nvarchar(100)
)
AS
BEGIN TRAN   
    UPDATE Table1 SET Counter+=1 WHERE Hashtag = @hashtag   
    IF @@ROWCOUNT = 0   
    BEGIN
        INSERT Table1 (Hashtag, Counter) VALUES (@hashtag,1)
    END
COMMIT TRAN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:28:29.163

我没有得到你想要的柜台。counter 将始终为您提供值 1，因为您设置了它

```
int i; 
```

我=1

即使你使用`i++`.

如果您的意思是计数器是标签编号，您可以在数据库中声明“计数器”列是自动递增索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:30:14.217

您可以尝试使用存储过程进行如下查询。

```
IF EXISTS (SELECT * FROM dbo.Table1 WHERE HashTag = @HashTag)
UPDATE dbo.Table1 SET Counter = @Counter+1
ELSE
INSERT INTO dbo.Table1 (HashTag, Counter) Values (@HashTag,@Counter) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:22:03.197

尝试使用前缀增量，而不是后缀。像这样：

```
myCommand.Parameters.Add("@Counter", SqlDbType.VarChar, 50).Value = ++i; 
```

# html - 输入 CSS 悬停状态之前的 HTML 标签

> ID：10408068
> 
> 赞同：0
> 
> 时间：2012-05-02T05:16:05.723
> 
> 标签：html, css, input, label

我有一个表格，我在输入之前放置了标签，如下所示：

```
<label for="email">Confirm Email</label>
<input type="text" id="email" />
<label for="firstname">First Name</label>
<input type="text" id="firstname" />
<label for="lastname">Last Name</label>
<input type="text" id="lastname" />
<label for="company">Company</label>
<input type="text" id="company" /> 
```

当我尝试使用 CSS 为标签设置样式时，当我将输入像这样 ( `input:hover + label`) 悬停时，CSS 将应用于下一个标签而不是具有该`for=`属性的标签。例如，如果我尝试悬停电子邮件输入，它将`input:hover+label`在第二个标签上应用效果`for="firstname"`。

我的设计结构顶部有标签，下面有输入，所以我不能切换它们的位置。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:00:54.423

[使用一些巧妙的 CSS，您可以在输入之后添加标签，但标签仍然看起来像是在输入http://jsfiddle.net/8YqN2/2/](http://jsfiddle.net/8YqN2/2/)之上

```
<input type="text" id="email" />
<label for="email">Confirm Email</label>    
<input type="text" id="firstname" />
<label for="firstname">First Name</label>    
<input type="text" id="lastname" />
<label for="lastname">Last Name</label>    
<input type="text" id="company" /> 
<label for="company">Company</label> 
```

**CSS**

```
input:hover + label  {
  background-color: #eee;
}

input {
  position: relative;
  display: block;
  margin-top: 1.5em;
}

label {
  display: block;
  position: relative;
  top: -2.5em;
} 
```

~~我认为单独使用 CSS 是不可能的~~，如果您可以忍受启用 JS 的用户的效果，您可以使用以下内容。[http://jsfiddle.net/8YqN2/1/](http://jsfiddle.net/8YqN2/1/)

```
$('input').hover(
  function(){
    $(this).prev().addClass('hover');
  },
  function(){
    $(this).prev().removeClass('hover');
  }
);

label.hover  {
  background-color: #eee;
} ​ 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T05:41:03.013

你这样做是错的。“+”号是一个“[相邻兄弟选择器](http://www.456bereastreet.com/archive/200510/css_21_selectors_part_2/)”。

> 选择器匹配一个元素，该元素是第一个元素的下一个兄弟元素。

在您的情况下，选择器与.`label`的下一个兄弟元素匹配`input:hover`。

CSS 不关心`for`属性，它关心`id`,`class`和元素的层次结构。

你还没有提到你想要完成什么，但试一试：

**HTML**

```
<label for="email">Confirm Email<input type="text" id="email" /></label>
<label for="firstname">First Name<input type="text" id="firstname" /></label>
<label for="lastname">Last Name<input type="text" id="lastname" /></label>
<label for="company">Company<input type="text" id="company" /></label> 
```

**CSS**

```
label:hover { /* something */ } 
```

`<span>`如果需要，将“标签”文本包装在标签中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T06:07:50.043

我希望这有帮助

```
<div class="nina">
    <label for="email" id="em">Confirm Email</label>
    <input type="text" id="email" onmouseover="document.getElementById('em').style.color='red'" onmouseout="document.getElementById('em').style.color='black'" />
    <label for="firstname">First Name</label>
    <input type="text" id="firstname" />
    <label for="lastname">Last Name</label>
    <input type="text" id="lastname" />
    <label for="company">Company</label>
    <input type="text" id="company" />

</div> 
```

这个没有jquery

# jquery - 按钮问题 , 第二个按钮就像第一个按钮

> ID：10408070
> 
> 赞同：0
> 
> 时间：2012-05-02T05:16:39.923
> 
> 标签：jquery, css, button, html

我试图解决这个问题一整天，但我找不到让它工作的方法。

我有一个类似于工具提示的行为。它在鼠标悬停时显示在一些下方，并且包含 2 个按钮。

HTML 代码：

```
<label id="name1" class="label" style="width: 150px;">John Smith
<div class="tp"> <!-- this is a tooltip I am talking about and it contains: -->
<button type="button" class="button" id="edit1">Edit</button>
<button type="button" class="button" id="remove1">Remove</button>
</div> <!-- end of tooltip -->
</label> 
```

工具提示的 CSS 样式：

```
div.tp {
    position:absolute; 
    display: none;
    text-align: center;
}
label:hover div.tp {    position: absolute; 
    display: block; 
    z-index: 140; 
    max-width: 400px; 
    padding: 5px; 
    color: #dadada; 
    background: #000000; 
    border-radius: 4px;
} 
```

Javascript：

```
$(".tp button[id^=edit]").live('click',function() { 
alert('This is edit button');
});

$(".tp button[id^=remove]").live('click',function() {
alert('This is remove button');
}); 
```

问题是，当我单击第一个按钮时，它工作正常并显示“这是编辑按钮”，但是当我单击第二个（删除）按钮时，它显示了 2 个警报。第一个是“这是删除按钮”，第二个是“这是编辑按钮”，所以基本上，它也会点击第一个按钮。

我在 Opera 浏览器中没有问题，但在其他所有浏览器（Chrome、IE、FF）中都没有问题。

更新：如果我使用工具提示 div 之外的按钮，则不存在问题。

有人知道出了什么问题吗？

最好的问候， IceWave

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:38:45.603

问题出在你的`label`标签上。默认`<label>`响应点击，如果与按钮/复选框/收音机等一起使用，它会选择元素，所以基本上如果你向`<label>`标签添加另一个按钮，它将作为第一个按钮点击它，例如

```
<label id="name1" class="label" style="width: 150px;">John Smith
   <div class="tp"> <!-- this is a tooltip I am talking about and it contains: -->
      <button type='button' class='btn' id='invisible'></button>
      <button type="button" class="button" id="edit1">Edit</button>
      <button type="button" class="button" id="remove1">Remove</button>
   </div> <!-- end of tooltip -->
</label>​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

所以你必须隐藏第一个按钮，Label 现在会选择你想要的按钮。

虽然这只是一个补丁，但不要在你的 HTML 代码中使用这样的东西（如果不需要，请删除标签，不要用按钮嵌套它）

请参阅 jsfiddle 的修复：http: [//jsfiddle.net/3LD4U/1/](http://jsfiddle.net/3LD4U/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:29:07.810

```
<label id="name1" class="label" style="width: 150px;">John Smith
    <span class="tp">
        <input type="button" class="button" id="edit1" value="Edit" />
        <input type="button" class="button" id="remove1" value="Remove" />
    </span>
</label> 
```

您应该使用最新版本的 jQuery 并执行以下操作：

```
$(document).on("click", "[id^='edit']", function(e) { 
    alert('This is edit button');
});

$(document).on("click", "[id^='remove']", function() {
    alert('This is remove button');
}); 
```

并用最近的非动态父级替换文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:29:43.297

尝试这个：

```
$('div.tp').find('button:nth-child(1)').live('click', function(){
   alert('Edit');
});
$('div.tp').find('button:nth-child(2)').live('click', function(){
   alert('Remove');
}); 
```

顺便说一句，您的 HTML 标记是错误的。您不能在标签内放置 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:33:50.453

它的标签谁确实提高了点击次数。只需添加以下内容：

```
$(".label").live('click',function() {
    return false;
});

$(".tp button[id^=edit]").live('click',function() {
    alert('This is edit button');
});

$(".tp button[id^=remove]").live('click',function() {
    alert('This is remove button');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T05:24:25.230

您应该直接使用按钮的 id 而不是 tp 的公共 div

用jquery是不是很简单

```
$("#edit").click(function() {
  alert('This is edit button');
});

$("#remove").click(function() {
  alert('This is remove button');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T05:24:56.217

将 <div> 替换为 <span>，这在 <label> 内是允许的（<div> 是不允许的）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T05:54:15.420

您将整个工具提示包裹在`label`其中，这会产生问题。试试你这样的工具提示html：

```
<label id="name1" class="label" style="width: 150px;">John Smith</label> <!--  label will end here-->
<div class="tp"> <!-- this is a tooltip I am talking about and it contains: -->
<button type="button" class="button" id="edit1">Edit</button>
<button type="button" class="button" id="remove1">Remove</button>
</div> <!-- end of tooltip --> 
```

并且不要使用`live()`，`on()`而是使用如下所示：

```
$(document).on("click", "button[id^='edit']", function(e) { 
    alert('This is edit button');
});

$(document).on("click", "[id^='remove']", function(e) {
    alert('This is remove button');
}); 
```

[演示](http://jsfiddle.net/636vV/30/)

# html - 文本对齐：居中；不工作

> ID：10408072
> 
> 赞同：13
> 
> 时间：2012-05-02T05:16:49.557
> 
> 标签：html, css

我一直在搞乱我的网站的布局，并且 `text-align : center;`在我将所有 div 位置设置为相对以使父 div 在我使用 javascript 添加组件时更改大小后发生了停止工作。

这是我的两个 CSS 文件：

您可以在下面的 JSfiddle 链接中看到新的。

jsFiddle：http: [//jsfiddle.net/2WvrV/](http://jsfiddle.net/2WvrV/)

我还提供了旧网站的代码（正确对齐文本）：

[http://jsfiddle.net/fiddlerOnDaRoof/fQpjX/](http://jsfiddle.net/fiddlerOnDaRoof/fQpjX/)

旧的 HTML 与我刚刚添加的新版本非常相似 style="float:left;" 在其中一个 div 中

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T05:26:21.377

简短的回答：您的文本没有居中，因为元素是浮动的，并且浮动元素“缩小”到内容，即使它是块级元素。

你能解释更多这意味着什么吗？

> 当我使用javascript向父div添加组件时，我必须将所有位置设置为相对以使父div改变大小

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T06:28:07.473

`float:left;`CSS 中的任何位置，在`width: 100%;`其后添加。浮动会破坏你想要的中心对齐。

另外，添加`text-align: center;`到`#login`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T20:59:35.040

终于想通了。我需要做的就是添加 `clear:left;`到我的`loginBttn`div 之后一切正常

感谢您尝试帮助大家

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-07T12:44:04.400

这是 Text-align: center 不起作用的另一种情况。

您在上面的 Div 中使用**display:flex**属性，因此您需要删除它然后尝试它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-02T15:09:30.033

你忘了添加`width: 100%;`你的 CSS 类。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-02T05:20:44.113

试试这个。我想它可能会帮助你

```
text-align:justify; 
```

# java - 如何从 std::string 获取 jchar*？

> ID：10408073
> 
> 赞同：2
> 
> 时间：2012-05-02T05:16:52.910
> 
> 标签：java, c++, java-native-interface

我正在编写一个 JNI 应用程序。在我的 C++ 代码中，我有 `std::string`. 我需要从中获取 a`jchar *`以传递给 Java 函数。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T05:24:36.900

使用`env->NewStringUTF()`, 从`char*`.

# file-upload - Struts文件上传API突然行为，通过struts API上传到服务器时文件损坏

> ID：10408084
> 
> 赞同：0
> 
> 时间：2012-05-02T05:18:37.110
> 
> 标签：file-upload, struts, struts-html

我有我正在使用 Struts2 框架的 web 项目。在这个人上传pdf文件，为此我使用了struts文件上传API。

但奇怪的是，服务器上每隔一个文件上传就损坏了，当我尝试打开文件时，它给了我错误：

> 打开此文档时出错。文件已损坏，无法修复。

我已使用以下代码作为 xml 配置：

```
<constant name="struts.multipart.maxSize" value="314572800" />    
<action name="uploadData" class="com.lufthansa.ereader.web.action.PublisherAction"  method="uploadData">
                <interceptor-ref name="basicStack"/>
                <interceptor-ref name="validation"/>
                <interceptor-ref name="workflow"/>
                <interceptor-ref name="redirectMessage" />
                <interceptor-ref name="paramsPrepareParamsStack" />
                <result name = "success" type="redirectAction" >publisherDashBoard.action</result>
                <result name="error" type="redirectAction">publisherDashBoard.action</result>
                <result name="input" type="redirectAction">publisherDashBoard.action?error=true</result>
            </action> 
```

我也使用了多部分表单数据..

```
<s:form name = "uploadContent" action="/publisher/uploadData.action" method="post" enctype="multipart/form-data" theme="simple"> 
```

现在我很困惑，为什么会出现这个问题？

struts 是否在连接丢失或其他情况下处理文件的部分上传？

或者这个问题是由于其他原因造成的，该文件已损坏。

**我该如何处理这些文件损坏的情况。**

我已经看到其他人也报告了这个问题，这里是参考线程 [http://www.coderanch.com/t/50100/Struts/Uploaded-files-incomplete](http://www.coderanch.com/t/50100/Struts/Uploaded-files-incomplete) [http://grokbase.com/t/struts /user/112sjfg6eg/file-upload-issue](http://grokbase.com/t/struts/user/112sjfg6eg/file-upload-issue) [http://web.archiveorange.com/archive/v/FLO18lz72HB5mKGyEfKT](http://web.archiveorange.com/archive/v/FLO18lz72HB5mKGyEfKT)

# php - How to use loadObjectsAtResourcePath from Restkit 0.10.0 for a http post to a php script?

> ID：10408086
> 
> 赞同：0
> 
> 时间：2012-05-02T05:18:53.703
> 
> 标签：php, ios, post, restkit

I'm using Restkit 0.10.0 and I can't figure out how to do a http post with object mapping. This is what I have so far:

```
baseUrl = [[NSURL alloc] initWithString:@"http://www.whatever.com"];
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURL:baseUrl];
objectManager.acceptMIMEType = RKMIMETypeJSON;
objectManager.serializationMIMEType = RKMIMETypeJSON; 

// mapping
RKObjectMapping * userMapping = [RKObjectMapping mappingForClass:[User class]];
[userMapping mapKeyPath:@"id" toAttribute:@"id"];
[userMapping mapKeyPath:@"g" toAttribute:@"genre"];
[[objectManager mappingProvider] addObjectMapping: userMapping];
[[RKObjectManager sharedManager].mappingProvider setMapping:userMapping forKeyPath:@"response"];

// post request 
NSArray *objects = [NSArray arrayWithObjects:@"Montreal", @"Canada", @"", @"", @"", @"1", @"0", @"2", @"0", nil];
NSArray *keys = [NSArray arrayWithObjects:@"c", @"co", @"lat", @"lng", @"rad", @"s", @"o", @"ageG", @"w_ageG", nil];
NSDictionary *queryParameters = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
NSString *getResourcePath = RKPathAppendQueryParams(@"people.php", queryParameters);

// send request and wait for answer, delegate self will map objects
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/people.php" delegate:self]; 
```

When I do this post, with

```
$city = $_POST['c']; 
```

in the php file for example, nothing happens. Any ideas? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:33:14.107

```
RKURL *rkUrl = [RKURL URLWithBaseURL:baseUrl resourcePath:postString];
RKObjectLoader* loader = [[RKObjectLoader alloc] initWithURL:rkUrl mappingProvider:[RKObjectManager sharedManager].mappingProvider];
loader.method = RKRequestMethodPOST;
loader.delegate = self;

loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[MyObject class]];
[loader send]; 
```

# sql-server - 使用 SQL Server 中的数据创建谷歌图表的步骤是什么

> ID：10408087
> 
> 赞同：1
> 
> 时间：2012-05-02T05:18:54.243
> 
> 标签：sql-server, google-visualization

请原谅这个新手问题，但我无法在网上找到任何关于我的问题的教程。

我有一个很长的复杂查询，它输出如下数据：

```
 DECLARE @QA1 TABLE (BeginWeek date, One int, Two int, Three int, Total int)

    INSERT INTO @QA1 
    SELECT '20110612','0','0','5','5' UNION ALL
    SELECT '20110626','0','0','8','8' UNION ALL
    SELECT '20110703','0','2','12','14' UNION ALL
    SELECT '20110710','4','3','12','19' UNION ALL
    SELECT '20110717','5','7','14','26' UNION ALL
    SELECT '20110724','7','11','14','32' UNION ALL
    SELECT '20110731','9','14','14','37' UNION ALL
    SELECT '20110807','10','20','17','47' UNION ALL
    SELECT '20110814','10','23','20','53' UNION ALL
    SELECT '20110821','11','23','20','54' UNION ALL
    SELECT '20110828','11','26','25','62' UNION ALL
    SELECT '20110904','13','29','25','67' UNION ALL
    SELECT '20110911','20','32','27','79' 
```

我希望能够在 HTML 中将其显示为 Google 图表，当我点击重新加载时，它会再次查询数据库，然后构建我的图表。

如果我的查询被调用`fooQuery`，我需要遵循哪些步骤才能将它从我的数据库动态拉到网页？我必须使用 PHP 吗？（如果是这样，我需要安装它，这会有点痛苦）还有其他软件吗？我的 SQL 查询应该在网页中吗？存储过程？

任何带有非常简单示例的网络资源都会很棒！

PS - 我在本地运行所有东西，所以我不需要太担心安全性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:44:01.777

因为您已经在（MS？）SQL 服务器中完成了此操作，我建议您下载 MS Visual Studio Web Express 并查看可用的大量示例。它允许您在网页上删除存储过程并自动为其生成表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:52:04.847

使用 Google Charts 的要求与提供网页的要求基本相同。您需要选择一个网络服务器、一些语言/工具来在查询您的数据库后动态构建一个网页，然后包括一个对 Google Charts 的客户端调用。

我建议您首先尝试在网页中显示您的数据（例如使用 Ruby on Rails、JSP、ASP.NET 或类似工具），然后按照网络上的一些优秀教程来使用 Google Charts。

# ruby-on-rails - 将 Rails 应用程序部署到共享托管服务会出现权限错误

> ID：10408092
> 
> 赞同：2
> 
> 时间：2012-05-02T05:19:42.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, hosting, shared-hosting

我正在尝试将 Rails 3.2.3 应用程序部署到以 Postgres 作为我的数据库的共享托管服务 (1and1)。我通过 FTP 将我的文件夹上传到网站目录，并在控制面板中将域指向我的 rails 文件夹，但是当我转到网站主页时，我得到“您无权访问此服务器上的 /”。我尝试使用Passenger，但我不确定是否需要这样做或者它是否有效。我对此很陌生，所以分步说明会很棒。

我正在使用 Mac OSX Snow Leopard，如果需要更多信息，请告诉我。任何更多的背景文章也将不胜感激，我一直在寻找能够很好地解释其工作原理的东西，但我还没有找到一个好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:29:09.503

首先，您需要将虚拟主机指向公共目录，而不是根路径。

第二：我建议你在本地机器上运行 rake assets:precompile 并将 public/assets 文件夹加载到你的主机上。

第三：查看你上传的文件和文件夹的权限，网络服务器应该可以读取和执行。

第四：如果主机运行 apache 作为网络服务器，你需要安装 mod_passenger。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:54:25.300

在我看来，你之前没有部署过 Rails 项目，这真的不适合胆小的人，也不像“安装 apache”并启动它那么简单——如果你尝试得到，你真的会得到款待它在 OSX 上运行，它非常奇怪地配置了 apache（尤其是在 Lion、eesh 上）

所以。

1) 只是不要费心在你的 Snow Leopard 机器上通过 Apache 运行 RoR，使用附带的 rails 服务器（rails s --debugger），无论如何你都会希望调试器在大多数时间都可用。

2) 使用大型端到端教程让 RoR 在您的 1and1 机器上运行，最好在 Ubuntu 上运行（这更容易）[经典 Slicehost 教程](http://articles.slicehost.com/2009/2/2/ubuntu-intrepid-mod_rails-installation)

3) 完成#2 后，请告诉我们您的进展情况。

# mysql - 规范化 MySQL 数据的 DateTime

> ID：10408096
> 
> 赞同：1
> 
> 时间：2012-05-02T05:19:51.700
> 
> 标签：mysql, normalization

我正在研究一个汇总财务数据观察的数据库（以货币对 USDCAD 为例）。

财务数据作为观察数据出现。我没有设置观察的日期和时间，因为它是由数据提供者确定的。

我的表如下所示： `CREATE TABLE observations (symbol varchar(32) not null, datetime datetime not null, value decimal(20, 10) not null);`

当我需要在没有特定观察的情况下获取系列的值时，就会出现问题。例如，我可能想在上午 10:30:15 对我们以加元销售的某种产品重新定价。

但是，我可能不会在上午 10:30:15 准确地观察到 USDCAD。这将需要我做一个加权平均来得到那个确切时间的观察结果。

这有点麻烦，但可能。更大的问题是 - 如果我有一张包含我们产品每秒的美元价格的表格，并且我想以 USDCAD 重新定价每个产品价格观察（每秒）（其中有随机定时的观察），我不能想办法在没有疯狂子查询的情况下做到这一点。

我在这里最好的选择是什么？插入值时，是否也可以更好地计算 USDCAD 系列的每秒观测值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:55:04.040

1.  `@time`通过应用[线性插值](http://en.wikipedia.org/wiki/Linear_interpolation)获得加权平均观测值：

    ```
    SELECT p0.y + (UNIX_TIMESTAMP(@time)-p0.x) * (p1.y-p0.y) / (p1.x-p0.x)
    FROM
      (
        SELECT   `value`                     AS y
          ,       UNIX_TIMESTAMP(`datetime`) AS x
        FROM     `observations`
        WHERE    `datetime` <= @time
        ORDER BY `datetime` DESC
        LIMIT    1
      ) p0,
      (
        SELECT   `value`                     AS y
          ,       UNIX_TIMESTAMP(`datetime`) AS x
        FROM     `observations`
        WHERE    `datetime` >= @time
        ORDER BY `datetime` ASC
        LIMIT    1
      ) p1; 
    ```

2.  [`VIEW`](http://dev.mysql.com/doc/refman/5.5/en/views.html)使用最新汇率以 CAD 价格创建您的产品：

    ```
    CREATE VIEW `productsCAD` AS
      SELECT `products`.*
        ,    `products`.`price` * `exchange`.`value` AS `priceCAD`
      FROM   `products`
        , (
          SELECT   `value`
          FROM     `observations`
          ORDER BY `datetime` DESC
          LIMIT    1
        ) AS `exchange`; 
    ```

* * *

**更新**

要获得多个预定义时间的插值价格（假设存储为名为的表`DATETIME`中的列中的值），您需要使用子查询首先获取前一个和紧随其后的观察时间，然后将这些时间与观察结果连接起来再次表以获取相应的值：`time``times`

```
SELECT time, p0.y + IFNULL((unixtime-p0.x) * (p1.y-p0.y) / (p1.x-p0.x), 0) AS value
FROM
  (
    SELECT
          time,
          UNIX_TIMESTAMP(`time`)               AS `unixtime`,
      MAX(UNIX_TIMESTAMP(`before`.`datetime`)) AS `prevTime`,
      MIN(UNIX_TIMESTAMP( `after`.`datetime`)) AS `nextTime`
    FROM
      `times`
      JOIN (SELECT `datetime` FROM `observations`)
        AS `before` ON (`before`.`datetime` <= `time`)
      JOIN (SELECT `datetime` FROM `observations`)
        AS `after`  ON ( `after`.`datetime` >= `time`)
    GROUP BY `time`
  ) AS `matches`
  JOIN (
    SELECT
      UNIX_TIMESTAMP(`datetime`) AS x,
      `value`                    AS y
    FROM `observations`
  ) AS p0 ON (p0.x = `matches`.`prevTime`)
  JOIN (
    SELECT
      UNIX_TIMESTAMP(`datetime`) AS x,
      `value`                    AS y
    FROM `observations`
  ) AS p1 ON (p1.x = `matches`.`nextTime`); 
```

如果要在查询中指定所需的时间（而不是使用预定义的表`times`），请将对的引用替换为`times`使用动态构建此类表的子查询`UNION`：

```
SELECT time, p0.y + IFNULL((unixtime-p0.x) * (p1.y-p0.y) / (p1.x-p0.x), 0) AS value
FROM
  (
    SELECT
          time,
          UNIX_TIMESTAMP(`time`)               AS `unixtime`,
      MAX(UNIX_TIMESTAMP(`before`.`datetime`)) AS `prevTime`,
      MIN(UNIX_TIMESTAMP( `after`.`datetime`)) AS `nextTime`
    FROM
      (
                  SELECT '2012-05-02 19:20:00' AS `time`
        UNION ALL SELECT '2012-05-02 19:20:05'
        UNION ALL SELECT '2012-05-02 19:20:10'
        UNION ALL SELECT '2012-05-02 19:20:15'
        -- etc.
      ) AS `times`
      JOIN (SELECT `datetime` FROM `observations`)
        AS `before` ON (`before`.`datetime` <= `time`)
      JOIN (SELECT `datetime` FROM `observations`)
        AS `after`  ON ( `after`.`datetime` >= `time`)
    GROUP BY `time`
  ) AS `matches`
  JOIN (
    SELECT
      UNIX_TIMESTAMP(`datetime`) AS x,
      `value`                    AS y
    FROM `observations`
  ) AS p0 ON (p0.x = `matches`.`prevTime`)
  JOIN (
    SELECT
      UNIX_TIMESTAMP(`datetime`) AS x,
      `value`                    AS y
    FROM `observations`
  ) AS p1 ON (p1.x = `matches`.`nextTime`); 
```

# ios - 使用 NSXmlParser 解析 XML 文件时获取重复值

> ID：10408097
> 
> 赞同：0
> 
> 时间：2012-05-02T05:20:18.450
> 
> 标签：ios, nsxmlparser

我有一个简单的 XML 文件。我只想获取用户名和密码。但是当我使用 nslog 观察结果时，它会产生重复值。XML 结构是这样的：

```
<Login xmlns="http://tempuri.org/">
  <userName>Vincent</userName>
  <password>string</password>
  <status>OK</status>
</Login>

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"userName"]) {
        NSLog(@"Node is found correctly");
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (!userNameString) {
        userNameString=[[NSMutableString alloc]init];
    }
    [userNameString appendString:string];
    NSLog(@"%@",userNameString);
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    NSInteger errorCode=[parseError code];
//    NSLog(@"%d,%@",errorCode,[parseError localizedDescription]);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"userName"]) {
        userNameString=nil;
    }
} 
```

这是由 NSLog 生成的结果：

2012-05-02 19:47:27.620 交付管理[4364:11003]

```
 Vincent 
```

2012-05-02 19:47:27.620 交付管理[4364:11003]

2012-05-02 19:47:27.621 DeliveryManagement[4364:11003] 字符串 2012-05-02 19:47:27.622 DeliveryManagement[4364:11003] 字符串

2012-05-02 19:47:27.623 DeliveryManagement[4364:11003] 字符串 OK 2012-05-02 19:47:27.623 DeliveryManagement[4364:11003] 字符串 OK

2012-05-02 19:47:27.624 DeliveryManagement[4364:11003] 字符串 OK

2012-05-02 19:47:27.625 DeliveryManagement[4364:11003] 字符串 OK

2012-05-02 19:47:27.626 DeliveryManagement[4364:11003] 字符串 OK

2012-05-02 19:47:27.626 DeliveryManagement[4364:11003] 字符串 OK

2012-05-02 19:47:27.627 DeliveryManagement[4364:11003] 字符串 OK

2012-05-02 19:47:27.628 DeliveryManagement[4364:11003] 正确找到节点 2012-05-02 19:47:27.642 DeliveryManagement[4364:11003] 字符串 OK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:15:16.293

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
if ([elementName isEqualToString:@"userName"]) {
    NSLog(@"Node is found correctly");
    if(userNameString == nil)
        userNameString = [NSMutableString string];
    else 
        [userNameString setString:@""];
}
else {
    userNameString = nil;
}

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{

[userNameString appendString:string];
if (userNameString) 
{
    userNameString = nil;
}
NSLog(@"%@",userNameString);
} 
```

只需添加此代码，它应该可以工作。基本上重复的值是因为每个值后面都有一个 '\n' 字符。所以我们需要让 userNameString = nil; 附加后。这样它进入

*   (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string

但它的 nil 所以没有附加值。希望对你有帮助。。

# c# - Exchange 2010 上的 C# 和 powershell - 无法识别术语“组对象”

> ID：10408103
> 
> 赞同：2
> 
> 时间：2012-05-02T05:20:55.813
> 
> 标签：c#, .net, powershell, exchange-server

我必须列出 Exchange 2010 服务器中的所有数据库及其邮箱。

在 Powershell 中我可以运行它，

```
Get-Mailbox -Server Exc2010 | Group-Object Database | Select-Object name,count

Name       Count
----       -----
DB01       16
DB04       3
DB02       2
DB03       5 
```

但是，如果我在 C# 中尝试相同的操作，

```
//Running cmdlets remotely
WSManConnectionInfo wsConnectionInfo = new WSManConnectionInfo(new Uri("https://" + ExchangeSite + "/powershell"),
"http://schemas.microsoft.com/powershell/Microsoft.Exchange", getCredential());
wsConnectionInfo.AuthenticationMechanism = AuthenticationMechanism.Basic;
wsConnectionInfo.SkipCACheck = true;
wsConnectionInfo.SkipCNCheck = true;
wsConnectionInfo.SkipRevocationCheck = true;

rsRemoteRunspace = RunspaceFactory.CreateRunspace(wsConnectionInfo);
rsRemoteRunspace.Open();

Collection<PSObject> Result = null;
Pipeline pipeLine = rsRemoteRunspace.CreatePipeline();

Command myCommand = new Command("Get-MailboxDatabase");
myCommand.Parameters.Add("Server", "Exc2010");
Command myCommand2 = new Command("Group-Object");
myCommand2.Parameters.Add("Property", "Database");

pipeLine.Commands.Add(myCommand);
pipeLine.Commands.Add(myCommand2);
Result = pipeLine.Invoke(); 
```

我明白了，

```
The term 'Group-Object' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again. 
```

如果我使用 Select-Object 它可以正常工作，所以我想知道为什么使用 Group-Object 会出现该错误。

任何帮助，将不胜感激。

**编辑**

如果我使用 Select-Object 运行它，它可以正常工作：

```
Command myCommand = new Command("Get-MailboxDatabase");
myCommand.Parameters.Add("Server", "Exc2010");
Command myCommand2 = new Command("Select-Object");
myCommand2.Parameters.Add("Property", "Name");

pipeLine.Commands.Add(myCommand);
pipeLine.Commands.Add(myCommand2);
Result = pipeLine.Invoke();

PSObject PSResult = Result.FirstOrDefault();
Console.WriteLine("DB Name: " + PSResult.Properties["Name"].Value.ToString()); 
```

我明白了，

```
DB Name: DB01 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:28:51.510

您是否在 Exchange 提供的远程管理会话中运行它？如果是这种情况，您只能运行 Exchange 提供的 cmdlet，而 Group-Object 不是其中之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T16:03:52.187

@大卫是对的。远程端点中只有 Exchange 命令可用。你需要找到另一个解决方案。以下是我在 PowerShell 中的操作方式：

```
$s = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri http://ex1/PowerShell/ -Authentication Basic -Credential (Get-Credential)
Invoke-Command $s { Get-Mailbox } | Group-Object Database -NoElement 
```

请注意，分组发生在邮箱对象到达之后。我不是开发人员，所以我不能告诉你代码在 C# 中应该是什么样子。我想您需要创建一个本地运行空间并在其中进行分组。

更新：您可以通过以下方式找到远程会话中可用的 cmdlet：

```
Invoke-Command $session { Get-Command } 
```

除了 Exchange cmdlet ，远程会话中还有 5 个 PowerShell 核心 cmdlet：`Exit-PSSession`、`Get-FormatData`、`Measure-Object`和. 这些 cmdlet 是受限端点的一部分。除了它们之外，不存在核心 cmdlet。`Out-Deafult``Select-Object`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:14:17.323

我无法运行 group-object 所以我必须以这种方式更改 cmdlet：

```
 Pipeline pipeLine = rsRemoteRunspace.CreatePipeline();
                Command myCommand = new Command("Get-Mailbox");
                myCommand.Parameters.Add("Server", Server);

                pipeLine.Commands.Clear();
                pipeLine.Commands.Add(myCommand);
                Mailboxes = pipeLine.Invoke();

                foreach (PSObject obj in Mailboxes)
                {
                    if (mbCount.ContainsKey(obj.Members["Database"].Value.ToString()))
                    {
                        mbCount[obj.Members["Database"].Value.ToString()] += 1;
                    }
                    else
                    {
                        mbCount.Add(obj.Members["Database"].Value.ToString(), 1);
                    }
                }
                pipeLine = null;
            }

            foreach (String Database in mbCount.Keys)
            {
                Console.WriteLine("Database : " + Database + " Mailboxes : " + mbCount[Database].ToString());
            } 
```

# javascript - 如果它在 jquery 内部，repeat 将不起作用

> ID：10408104
> 
> 赞同：2
> 
> 时间：2012-05-02T05:20:56.077
> 
> 标签：javascript, jquery

功能站菜单（$范围）{

```
$.ajax({
    url: "/users/station_names_ajax",
    type: "POST",

    success: function(data){

        $scope.phones = [
            {"name": "Nexus S",
                "snippet": "Fast just got faster with Nexus S."},
            {"name": "Motorola XOOM™ with Wi-Fi",
                "snippet": "The Next, Next Generation tablet."},
            {"name": "MOTOROLA XOOM™",
                "snippet": "The Next, Next Generation tablet."}
        ];

        //console.log(Stations); 
    }
});

// $scope.phones = Stations;
// console.log(Stations); 
```

}

好像我在哪里做这个

```
function stationMenu($scope){

    $scope.phones = [
        {"name": "Nexus S",
            "snippet": "Fast just got faster with Nexus S."},
        {"name": "Motorola XOOM™ with Wi-Fi",
            "snippet": "The Next, Next Generation tablet."},
        {"name": "MOTOROLA XOOM™",
            "snippet": "The Next, Next Generation tablet."}
    ];
} 
```

它工作....我怎样才能让它在ajax中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:38:09.070

```
function callService(){
    return  $.ajax({
    url: "/users/station_names_ajax",
    type: "POST",

    success: function(data){

        //console.log(Stations); 
    }
});
}
var $scope= {};

$.when(callService())
 .then(function(data){
           $scope.phones = [
                                   {"name": "Nexus S",
                                    "snippet": "Fast just got faster with Nexus S."},
                                   {"name": "Motorola XOOM™ with Wi-Fi",
                                    "snippet": "The Next, Next Generation tablet."},
                                   {"name": "MOTOROLA XOOM™",
                                    "snippet": "The Next, Next Generation tablet."}
                                 ];

 }); 
```

使用 when, then 构造来处理从服务器返回的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:32:11.473

你又来了..现在有很多关于这个的问题。
首先，我假设您放入 $scope.phones 的值是从 ajax 请求返回的并且没有硬编码，否则硬编码
jquery 中的 ajax 请求默认为异步的值没有任何意义。
因此，您需要对返回的数据执行的所有操作都需要 在示例`success`中的 so 事件内完成`ajax request`

```
function stationMenu($scope){

        $.ajax({
              url: "/users/station_names_ajax",
              type: "POST",

              success: function(data){

                  $scope.phones = [
                                   {"name": "Nexus S",
                                    "snippet": "Fast just got faster with Nexus S."},
                                   {"name": "Motorola XOOM™ with Wi-Fi",
                                    "snippet": "The Next, Next Generation tablet."},
                                   {"name": "MOTOROLA XOOM™",
                                    "snippet": "The Next, Next Generation tablet."}
                                 ];

                  //console.log(Stations);
//make use of anything returned and and $scope.phones here
              }
            });

//these lines wont work here
       // $scope.phones = Stations;
       // console.log(Stations);

    } 
```

# windows-phone-7.1 - 绑定到 Windows Phone 应用程序中的地图时，所有图钉都显示在角落

> ID：10408106
> 
> 赞同：0
> 
> 时间：2012-05-02T05:21:13.087
> 
> 标签：windows-phone-7.1, bing-maps

当我将 ObservableCollection 绑定到图钉数据的地图时，所有图钉都显示在左上角。我在一个简单的应用程序中复制了这个，不知道我做错了什么。有什么帮助吗？

```
<phone:PhoneApplicationPage 
x:Class="PushpinApp.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True" xmlns:my="clr-namespace:Microsoft.Phone.Controls.Maps;assembly=Microsoft.Phone.Controls.Maps">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <my:Map Name="map1">
            <my:MapItemsControl ItemsSource="{Binding Stuff}">
                <my:MapItemsControl.ItemTemplate>
                    <DataTemplate>
                        <my:Pushpin Location="{Binding Location}" Content="{Binding Name}" />
                    </DataTemplate>
                </my:MapItemsControl.ItemTemplate>
            </my:MapItemsControl>
        </my:Map>
    </Grid>
</Grid>
</phone:PhoneApplicationPage> 
```

```
public partial class MainPage : PhoneApplicationPage
{
    public ObservableCollection<Thing> Stuff { get; set; }

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        Stuff = new ObservableCollection<Thing>();
        Stuff.Add(new Thing() { Name = "one", Location = new GeoCoordinate(45.0, -110.0) });
        Stuff.Add(new Thing() { Name = "two", Location = new GeoCoordinate(40, -100) });

        DataContext = this;
    }
}

public class Thing
{
    public string Name { get; set; }
    public Location Location { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:44:10.367

为什么是“位置”属性的类型`Location`而不是`GeoCoordinate`？

另外，尝试将`MapItemsControl`.`MapLayer`

```
<map:Map CredentialsProvider="Your_Key">
    <map:MapLayer>
        <map:MapItemsControl ItemsSource="{Binding Stuff}">
            <map:MapItemsControl.ItemTemplate>
                <DataTemplate>
                    <map:Pushpin Location="{Binding Location}" Content="{Binding Name}" />
                </DataTemplate>
            </map:MapItemsControl.ItemTemplate>
        </map:MapItemsControl>
    </map:MapLayer>
</map:Map> 
```

# search - 在 joomla 搜索结果中添加文章类别的链接

> ID：10408107
> 
> 赞同：0
> 
> 时间：2012-05-02T05:21:18.953
> 
> 标签：search, joomla, hyperlink, categories

在 Joomla 2.5 中，我正在寻找一种方法，通过修改 com_search 模板将更多与文章相关的功能添加到搜索结果中。在这种情况下，我想知道如何包含指向结果类别的链接？default_results.php 页面包含每篇返回文章的类别/部分，但没有指向该类别的链接。它可以被箭头运算符引用吗？

此外，其他文章功能（例如评分和作者）呢？这些也可以包含在搜索结果中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:08:52.153

如果您正在考虑为搜索结果创建模板覆盖，您将受到可用数据的限制。

查看搜索结果`view.html.php`，结果数组包含具有以下属性的对象列表（*如在 Eclipse 中观察到的*）

```
stdObj:
- title
- text
- created
- browsernav
- catid
- slug
- href
- section
- count 
```

如您所见，tmpl 无法使用评级和作者，因此您必须修改搜索组件以获取此附加信息或使用可用信息加载`content`模型并自行提取。

要链接到类别博客页面，您可以`catid`结合使用`JRoute`来创建类别博客布局的 URL。像这样的东西可以工作（*NB使用多行来提高可读性*）：

```
$catURL = 'index.php?option=com_content&view=category&layout=blog&id=';
$catURL .= $result->catid;
$catURL = JRoute::_($catURL); 
```

然后，您需要做的就是将包含类别（部分）的行包含在 URL 中，例如。

```
( <a href="<?php echo $catURL; ?>" ><?php echo $this->escape($result->section); ?></a> ) 
```

*请注意没有试过这个代码只是在这里输入...*

**[编辑]**

com_search（它提供 Joomla! 搜索功能）使用搜索插件来收集结果，使用插件以便不同类型的内容可以提供它们的结果...

所以，在 Joomla！2.5 行，这意味着`/plugins/search/`默认加载的子文件夹这包括标准 Joomla！内容，如*联系人*、*内容*、*网络链接*等。第三方扩展也可能提供搜索插件，例如。`virtuemart`

要找出特定插件返回的内容，您需要查看相关文件，例如。对于内容`/plugins/search/content/content.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T21:29:19.777

在 Joomla 3.3.0 中，我设法以这种方式在搜索结果中显示链接的类别名称：

```
<?php
$url = $result->catslug;
$url = str_replace(':', '', $url);
$url = ltrim($url, '0123456789');
?>
<a href="<?php echo $url; ?>" ><?php echo $this->escape($result->section); ?></a> 
```

（但是我不确定这是否是最佳解决方案。）

# php - 用于不在网络服务器上运行的脚本的静态 PHP 分析器？

> ID：10408108
> 
> 赞同：1
> 
> 时间：2012-05-02T05:21:19.480
> 
> 标签：php, scripting, profiler

因此，我一直在尝试调试其他人编写的一些代码，但这很混乱，因为我必须跟踪多个文件和数组才能从中得到一件事。

是否有任何仅通过 CLI 运行的 PHP 脚本分析工具？即不为网络服务器运行？

我查看了很多其他建议（XDebug、XH、PHP_debug 等），但它们似乎都特定于在服务器上运行的 PHP 代码。

我想要的是可以通过 PHP 脚本/目录运行的东西，并对其进行建模，以便我可以读取变量、数组和函数。

您的帮助将不胜感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:34:54.157

我们的[PHP Profiler](http://www.semanticdesigns.com/Products/Profilers/PHPProfiler.html)并不关心您的 PHP 页面是如何被调用的，所以是的，您可以从 CLI 运行它们并获取分析数据。有一个相应的测试覆盖工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:53:13.883

尝试让这个[http://jenkins-php.org/](http://jenkins-php.org/)运行，或者您只需使用您的 IDE（NetBeans 或 Eclipse）+ 远程调试。如果您只需要使用 CLI 进行快速操作，请使用[http://phpmd.org/](http://phpmd.org/)。

# symfony-1.4 - 错误：在非对象上调用成员函数 getTitleName()

> ID：10408110
> 
> 赞同：0
> 
> 时间：2012-05-02T05:21:56.363
> 
> 标签：symfony-1.4, symfony-forms

我创建了表单，出现以下错误：

```
Call to a member function getTitleName() on a non-object in C:\wamp\www\public_html\apps\frontend\modules\planbook\templates\_form.php on line 25 
```

这是我的代码：

```
<form method="post" enctype="multipart/form-data" action="<?php echo  url_for((!isset($planbook) ? '@planbook_create' : '@planbook_update').(isset($planbook) ? '?id='.$planbook->getId() : '')) ?>">
  <table>
    <tfoot>
      <tr>
        <td colspan="2">
          &nbsp;<a href="<?php echo url_for('planbook/index') ?>">Back to list</a>
          <?php if (!$form->getObject()->isNew()): ?><?php endif; ?>

          <input type="hidden" id="planbook_id" name="planbook[id]"  value="<?php echo isset($planbook) ?  $planbook->getId() : ' '?>" />
          <input type="submit" value="Save" />
        </td>
      </tr>
    </tfoot>
    <tbody>
      <tr>
      <th>
        <lable for="planbook_titlename"> Title</label>
      </th>
      <td>
        <?php if(isset($editFormFields) && isset($editFormFields['titlename'])) :?>
          <input type="text" id="planbook_titlename" name="planbook[titlename]" value="<?php echo isset($planbook) ?  $planbook->getTitleName() : ''?>">
        <?php else: ?>
          <?php echo $planbook->getTitleName() ?>
        <?php endif; ?>
      </td>
      </tr>
      <tr>
        <th>
          <label for="planbook_place">Place</label>
        </th>
        <td>
          <?php if(isset($editFormFields) && isset($editFormFields['place'])) :?>
            <input type="text" id="planbook_place" name="planbook[place]" value="<?php echo isset($planbook) ? $planbook->getPlace() : ''?>">
          <?php else: ?>
            <?php echo $planbook->getPlace() ?>
          <?php endif; ?>
        </td>
      </tr>
    </tbody>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:29:39.780

为了解决您的错误，我想您需要将此行放在表单之前：

```
$planbook = $form->getObject(); 
```

然后`isset($planbook)`用`! $planbook->isNew()`.

* * *

**但**我认为您采用了错误的方式来创建表单。

例如，这个：

```
<?php if(isset($editFormFields) && isset($editFormFields['titlename'])) :?>
  <input type="text" id="planbook_titlename" name="planbook[titlename]" value="<?php echo isset($planbook) ?  $planbook->getTitleName() : ''?>">
<?php else: ?>
  <?php echo $planbook->getTitleName() ?>
<?php endif; ?> 
```

您不需要手动执行操作，例如：

*   显示输入，
*   生成 id 和 name，
*   如果对象存在，确定是否必须设置值
*   ETC ..

每件事都用表格完成：

```
<?php echo $editFormFields['titlename']->renderRow() ?> 
```

请[阅读与表格相关的完整文档](http://www.symfony-project.org/gentle-introduction/1_4/en/10-Forms)。另外，不要忘记将您的错误的所有代码提供给我们。在这里，您只给我们一个部分模板。

*   动作呢？
*   表单类（从何`$form`而来）呢？
*   主模板怎么样（因为你给了我们一个部分，以及包含这个部分的模板）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:32:44.157

试试 is_object($planbook)

教义通常会返回一些东西，所以 is_null 或 isset 可能不是最好的主意

# ios - 通过代码将 UITabBar 和 tabbaritems 添加到 UITabBar （注意：我不想实现 TabBarController ）

> ID：10408111
> 
> 赞同：7
> 
> 时间：2012-05-02T05:22:01.163
> 
> 标签：ios, uitabbar, uitabbaritem

我进行了很多搜索，相信我遇到了很多问题和示例代码，但没有一个符合我的要求，这太疯狂了，怎么可能没有答案。

我的具体要求：- 1\. 我想要一个 UITabBar 而不是 UITabBarController 2\. 我希望它位于 UIView 的右上角 3\. 我想要两个标签栏项目（不需要与两个视图控制器关联）

现在我所做的是

```
UITabBar *myTabBar=[UITabBar alloc]initWithFrame:myTabFrame];
[self.view addSubView:myTabBar];
myTabBar.delegate=self; 
```

现在我被困在如何将标签栏项目添加到这个 UITabBar。

我想这可能很容易，但我发现的每个代码都添加了 TabBarController，但我不想使用 tabbarcontroller，因为它只出现在屏幕底部，而且这不是必需的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T05:52:45.670

你可以通过为你的标签栏创建你想要的项目，将它们添加到一个数组中，然后调用 UITabBar 方法来做到这一点`setItems:animated:`

```
UITabBarItem *firstItem = [[UITabBarItem alloc] initWithTitle:@"First" image:firstImage tag:1];
UITabBarItem *secondItem = [[UITabBarItem alloc] initWithTitle:@"Second" image:secondImage tag:2];

NSArray *itemsArray = @[firstItem, secondItem];

[myTabBar setItems:itemsArray animated:YES]; 
```

# c++ - glMatrixMode(GL_PROJECTION) 和 glMatrixMode(GL_MODELVIEW) 的区别

> ID：10408113
> 
> 赞同：5
> 
> 时间：2012-05-02T05:22:03.663
> 
> 标签：c++, math, opengl, graphics

`glMatrixMode(GL_PROJECTION)`和有什么区别`glMatrixMode(GL_MODELVIEW)`？

```
#include <stdio.h>
#include <GL/gl.h>
#include <GL/glut.h>

#define KEY_ESCAPE 27

void display();
void keyboard(unsigned char,int,int);

int main(int argc, char **argv) {
    glutInit(&argc, argv);                                    
    glutInitDisplayMode(GLUT_RGB|GLUT_DOUBLE|GLUT_DEPTH );
    glutInitWindowSize(600,400);                  
    glutCreateWindow("Opengl Test");                              
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    glutMainLoop();
    return 0;
}
void display() {
    float x,y,z;
    int i;
    x=0;
    y=-0.8;
    z=0;
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1,1,0);
    glBegin(GL_POINTS);
    for(i=0;i<98;i++) {
        glVertex3f(x,y,z);
        x=x+0.01;
    }
    glEnd();
    glutSwapBuffers();    
}
void keyboard(unsigned char key, int mousePositionX, int mousePositionY) {
    switch ( key ) {
        case KEY_ESCAPE:
            exit ( 0 );  
            break;      
        default:      
            break;
    }
} 
```

示例 2：

```
#include <stdio.h>
#include <GL/gl.h>
#include <GL/glut.h>

#define KEY_ESCAPE 27

void display();
void keyboard(unsigned char,int,int);

int main(int argc, char **argv) {
    glutInit(&argc, argv);                                    
    glutInitDisplayMode(GLUT_RGB|GLUT_DOUBLE|GLUT_DEPTH );
    glutInitWindowSize(600,400);                  
    glutCreateWindow("Opengl Test");                              
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    glutMainLoop();
    return 0;
}
void display() {
    float x,y,z;
    int i;
    x=0;
    y=-0.8;
    z=0;
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1,1,0);
    glBegin(GL_POINTS);
    for(i=0;i<98;i++) {
        glVertex3f(x,y,z);
        x=x+0.01;
    }
    glEnd();
    glutSwapBuffers();    
}
void keyboard(unsigned char key, int mousePositionX, int mousePositionY) {
    switch ( key ) {
        case KEY_ESCAPE:
            exit ( 0 );  
            break;      
        default:      
            break;
    }
} 
```

对于这两个代码，我得到了相同的结果。任何人都可以展示这些`glMatrixMode(GL_MODELVIEW)`和的区别`glMatrixMode(GL_PROJECTION)`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T05:37:48.540

当你在看一个场景时，从 GL 的角度来看，你有一个相机和一个镜头。

ModelView 是代表您的相机（位置、指向和向上矢量）的矩阵。

ProjectionView 是代表相机镜头（光圈、远场、近场等）的矩阵。

有关这些的更多信息，请参见[此处...](http://www.songho.ca/opengl/gl_transform.html)

在像您这样的简单示例中，这并没有太大区别。然而，一般来说，你需要让 OpenGL 使用矩阵乘法和求逆来计算东西。例如，如果要将屏幕上的一个点转换为 GL 坐标系的一个点，GL 将需要一个投影矩阵和一个模型矩阵，并将它们乘以特定的顺序。在这种情况下，您必须相应地使用它们，因为矩阵乘法是不可交换的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T05:36:40.993

当然，你没有得到不同的结果。你实际上并没有对矩阵*做任何事情。*您将其设置为身份...这是*默认*值。

通常，您应该只将投影矩阵放入`GL_PROJECTION`矩阵中。从模型空间到相机空间的变换应该进入`GL_MODELVIEW`矩阵。

如果您不知道什么是投影矩阵，或者您不确定什么是矩阵，我建议您查找[适当的 OpenGL 学习资料](http://www.opengl.org/wiki/Getting_started#Tutorials_and_How_To_Guides)。并且避免使用固定功能的GL。

# python - 在 Python 2 和 3 中统一迭代字典的生成器

> ID：10408119
> 
> 赞同：8
> 
> 时间：2012-05-02T05:22:29.360
> 
> 标签：python, python-3.x

有没有办法有效地迭代在 Python 2 和 Python 3 中都有效的字典中的值/项目？

在 Python 2 中，我可以编写

```
for x in mydict:
for x in mydict.iterkeys():
for x in mydict.viewkeys():
for x in mydict.itervalues():
for x in mydict.viewvalues():
for x in mydict.iteritems():
for x in mydict.viewitems(): 
```

在 Python 3 中，我有以下可能性：

```
for x in mydict:
for x in mydict.keys():
for x in mydict.values():
for x in mydict.items(): 
```

所以，我可以用 , 迭代键`for x in mydict`，这在 Python 2 和 3 中都有效。但是有没有一种方法可以迭代通用的值和键值对（“项目”）？我需要它来编写可以在两个 Python 版本中运行的 Python 代码。

（附带说明一下，可以轻松绕过带有迭代器的其他障碍；例如：

```
if sys.version_info.major<3:
    from itertools import izip as zip, imap as map 
```

但是，字典方法不能像`map`和那样轻易地重新定义`zip`。）

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T05:34:41.627

values() 版本只是另一个笨蛋的答案

```
for value in (mydict[key] for key in mydict): 
```

或者

```
def dict_values(d):
   return (mydict[key] for key in mydict)

def dict_items(d):
   return ((key, mydict[key]) for key in mydict)

for value in dict_values(mydict):
    ...

for value in dict_items(mydict):
    ... 
```

不过，这很糟糕。您可以检查 python 版本，而不是返回生成器，返回`d.items()`或`d.iteritems()`酌情

我认为一个更好的问题可能是如何编写与 2to3 配合良好并生成好的 Python3 代码的 Python2 代码

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T06:56:15.023

以下代码适用于 Py2 和 Py3：

```
def iteritems(d):
    'Factor-out Py2-to-3 differences in dictionary item iterator methods'
    try:
         return d.iteritems()
    except AttributeError:
         return d.items()

d = dict(red=1, blue=2, green=3)
for k, v in iteritems(d):
    print(k)
    print(v)
    print('') 
```

请注意，此解决方案的优点是使用本机迭代器，而不是滚动您自己的生成器并进行自己的查找。本机迭代器比提供的其他解决方案更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T05:29:37.677

这将为您提供一个生成器：

```
for key,value in ((key,mydict[key] for key in mydict) 
```

如果您想要一个列表，请在表达式周围使用 [] 而不是外部的 ()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:27:17.177

Python2.7`.items`在字典中有一个方法可以让你遍历 (key,value) 元组。Python3 具有相同的 API（尽管实现不同）。这对你有用吗？

# semantic-web - RDF 命名空间（语义数据）

> ID：10408120
> 
> 赞同：6
> 
> 时间：2012-05-02T05:22:30.997
> 
> 标签：semantic-web

我正在尝试为我的应用程序提出一个本体（内部）。但是，我想尽可能多地借钱。当我环顾不同的现有本体时，我观察到重叠。例如：foaf:Person 和 dbpedia:Person 等。两者都是其代理类、事物类等的子类。尽管它们可能具有不同的属性。为什么他们不互相重用/扩展？

我的问题：

1) 为什么 dbpedia 不使用 foaf:person 反之亦然？

2) 你如何选择 b/w dbpedia:Person 和 foaf:Person 或者你自己创建？

我对此很陌生。请原谅我的无知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:28:09.980

1) 因为 DBpedia 包含数千个用于各种不同事物的类，如果他们必须在开始发布 DBpedia 数据之前在 Web 上搜索其他类以重用，他们将永远无法到达任何地方。所以他们用自己的类创建了自己的 DBpedia 本体。`rdfs:subClassOf`在某些情况下，当他们发现现有类时，他们会通过或`owl:equivalentClass`稍后将 DBpedia 本体类映射到现有类。此外，FOAF 如何定义“Person”和 DBpedia 如何定义“Person”可能存在细微差别。例如，像哈利波特这样的虚构人物是不是一个人？定义自己的类会更安全，这样您就可以完全控制定义。

2) 这是一个复杂的决定。如果有一个完善的词汇表，如 FOAF、DC、SKOS 等，可以满足您的需求，那么您应该始终重复使用它，而不是自己发明。如果不存在适用的词汇表，或者如果您不相信词汇表的出版商是有信誉的并且从长远来看会保持词汇表的稳定和稳定，那么创建自己的词汇表可能会更好。您始终可以组合多个词汇表，或使用您自己的一些属性（在您自己的命名空间中）扩展现有词汇表。如果您定义自己的类和属性，则应始终尝试将它们映射到现有的类和属性。如果您可以在多个现有词汇表之间进行选择，请选择使用更广泛的词汇表。[LOV](http://labs.mondeca.com/dataset/lov/)、[LODstats](http://stats.lod2.eu/)等服务[Sindice Analytics](http://sindice.com/stats/direct/basic-class-stats?settings=%7B%22iCreate%22%3A1335950874519%2C%22iStart%22%3A0%2C%22iEnd%22%3A50%2C%22iLength%22%3A50%2C%22sFilter%22%3A%22%22%2C%22sFilterEsc%22%3Atrue%2C%22aaSorting%22%3A%5B%5B4%2C%22desc%22%5D%5D%2C%22aaSearchCols%22%3A%5B%5B%22%22%2Ctrue%5D%2C%5B%22%22%2Ctrue%5D%2C%5B%22%22%2Ctrue%5D%2C%5B%22%22%2Ctrue%5D%2C%5B%22%22%2Ctrue%5D%5D%2C%22abVisCols%22%3A%5Btrue%2Ctrue%2Ctrue%2Ctrue%2Ctrue%5D%2C%22ssDelta%22%3A%22%22%7D)可以提供帮助。

# mysql - MySQL Query 乘以和舍入现有值

> ID：10408123
> 
> 赞同：0
> 
> 时间：2012-05-02T05:22:50.133
> 
> 标签：mysql

很抱歉上次我问这个问题时含糊其辞。

我的数据库中有这个现有的表，显示某些事件的奖品。我希望在 phpMyAdmin 中运行查询，以正确地将现有奖品乘以 50，除以 2，然后四舍五入到最接近的整数。

例如，event_id 1 中的排名 1 将是 (120*50)/2，显示为 new_prize。

我的表的一个例子如下：

```
event_id   ranking     prize
1          1           120
1          2           60
2          1           10
2          2           5 
```

我希望这次我能更好地解释它。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:42:39.363

您可以使用`ROUND(X)`, `CEILING(X)`,`FLOOR(X)`来获得四舍五入值

例如

1.ROUND(X)

```
 select *,round((prize*50)/2) as new_price from events 
```

它将返回, 和'4.1' 的`5`值`4.8``4`

2.天花板(X)

```
select *,ceiling((prize*50)/2) as new_price from events 
```

它将`5`返回`4.8`

3.楼层(X)

```
select *,floor((prize*50)/2) as new_price from events 
```

它将`4`返回`4.8`

谢谢..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:26:09.987

`select *,round((prize*50)/2) as new_price from events`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:27:22.687

这很简单

```
SELECT round((prize*50)/2) as New_prize FROM table where event_id = 1 
```

并删除 WHERE 条件以获取所有记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:28:51.203

```
update events set prize = ceil(prize * 50 / 2) 
```

# c# - 从另一台 PC 调用 aspx 页面

> ID：10408124
> 
> 赞同：0
> 
> 时间：2012-05-02T05:22:59.890
> 
> 标签：c#, asp.net

我有一个在 .net 中开发的项目，它的 URL 是`http://localhost:2688/WebSite2/Default.aspx`，当我运行它时它工作正常，我如何从另一台 PC 访问它？

我试过`http://IP_HERE:2688/WebSite2/Default.aspx`了，但它不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:26:48.253

端口 2688 不是标准的 http，所以我假设您使用的是开发服务器（IIS Express 或 VS 开发服务器）？如果是这样，你可以这样看

1.  Windows 系统的防火墙允许外部访问该端口
2.  服务器侦听所有 IP（您可以使用 netstat 命令检查）

**编辑：**

如果 netstat -an 列出了类似的行

```
TCP    0.0.0.0:2688    <hostname>:0    LISTENING 
```

它正在侦听所有 IP（127.0.0.1 和您的 PC 拥有的 ip。如果不是 0.0.0.0 而是有一个特定的 IP，例如 127.0.0.1，则服务器只侦听该特定端口/IP 组合

**编辑2：**

无法从另一台 PC 访问 Cassini（[http://weblogs.asp.net/ryangaraygay/archive/2008/04/19/asp-net-development-server-cannot-be-accessed-using-non-localhost-url。 aspx](http://weblogs.asp.net/ryangaraygay/archive/2008/04/19/asp-net-development-server-cannot-be-accessed-using-non-localhost-url.aspx) ) 所以你必须切换到 IIS Express 或 IIS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:32:51.240

通过端口 2688 的 url 推断您正在使用 Visual Studio 开发 Web 服务器。不允许您从其他具有 Visual Studio 开发 Web 服务器的 PC 访问它。[你会在这里](http://forums.asp.net/t/1147955.aspx)找到关于这个的讨论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T05:33:56.887

为什么要使用 VS 开发服务器从远程机器访问 URL？我认为如果您将其发布到本地 IIS 然后从那里使用它会更好。Visual Studio 开发服务器不适用于此目的。但如果仍想使用它，请查看此线程上的讨论[远程机器无法连接到 Visual Studio Web 服务器](https://stackoverflow.com/questions/220274/remote-machines-cannot-connect-to-visual-studio-web-server)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T05:38:55.060

如果您使用的是开发服务器或 IIS Express，您将无法执行您想要执行的操作。[在此处](https://stackoverflow.com/questions/4924830/accessing-iis-7-5-express-from-another-machine-on-the-intranet)和[此处](https://stackoverflow.com/questions/1730280/accessing-asp-net-development-server-from-another-pc-on-the-network)查看答案。话虽如此，[这个小伙子](http://johan.driessen.se/posts/Accessing-an-IIS-Express-site-from-a-remote-computer)声称已经完成了您想要做的事情（使用 IIS Express），就像[这个家伙](http://msmvps.com/blogs/rfennell/archive/2011/03/22/how-to-expose-iis-express-to-external-network-connections-and-use-a-non-self-signed-certificate.aspx)一样。

您可能会考虑只运行 IIS 的本地实例并按照预期的方式使用它。似乎它会比替代方案容易得多。

# c# - 双值在数据集中四舍五入

> ID：10408127
> 
> 赞同：0
> 
> 时间：2012-05-02T05:23:29.750
> 
> 标签：c#, ms-access

我有 ms 访问数据库。我有一个表，其值是双数据类型。例如

```
Column 1
3.0
3.1
2.0
3.2 
```

我正在使用此表中的数据集返回值

```
 public DataSet GetDataSet(string sqlQuery)
    {
        //Initializes a dataset
        DataSet dataSet = new DataSet();
        //Specify Locale
        dataSet.Locale = CultureInfo.InvariantCulture;

        Connection.Open();
        {                
            OleDbDataAdapter adapter = new OleDbDataAdapter(sqlQuery, this.connection);
            adapter.Fill(dataSet);
            adapter.Dispose();
        }
        Connection.Close();
        Connection.Dispose();

        return dataSet;
    } 
```

但是值正在四舍五入。具有 .0 的值（例如：3.0,2.0）返回为 3,2。有没有办法防止双精度值的四舍五入。

# ios - 就像谷歌有操作系统版本/设备的官方统计数据一样，任何使用 ios5 / 4.x 的设备百分比的苹果统计数据？

> ID：10408128
> 
> 赞同：0
> 
> 时间：2012-05-02T05:23:30.123
> 
> 标签：ios

是否有任何官方的苹果（ios）统计数据关于具有 5.x 和 4.x ios 版本的设备的百分比，就像谷歌为 android 提供的一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:03:37.620

据我所知，没有官方统计数据。但是一些程序员给出了一些数字。例如来自 Instapaper 的 Marco Arment：http: [//www.marco.org/2011/11/30/more-ios-device-and-os-version-stats-from-instapaper](http://www.marco.org/2011/11/30/more-ios-device-and-os-version-stats-from-instapaper)

这些数字不是最新的。但你至少会得到一个印象。

# iphone - 如何从数组中获取数据？

> ID：10408131
> 
> 赞同：0
> 
> 时间：2012-05-02T05:23:48.773
> 
> 标签：iphone, nsarray, uilabel

我已经创建了一个`NSarray`，现在我想根据它们的索引在标签中显示它的数据。

但不想在表格视图单元格中显示它们。
我想以简单的标签显示它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:26:36.293

```
for (int i=0; i<[yourArr count]; i++) {
    yourLblObject.text=[NSString stringWithFormat:@"%@",[yourArr objectAtIndex:i]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:27:15.210

使用此代码我认为这将对您有所帮助

```
 -(void)viewdidload
   {
 playerScores = [[NSArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10",@"11",@"12",@"13",@"14",@"15",@"16",@"17",@"18",nil] retain];
 CGFloat y = 20;
for (int i = 0;i<[playerScores count];i++) {
    myLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, y, 60, 60)];
    myLabel.backgroundColor=[UIColor clearColor];

    [myLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:35]];
    NSString *text = [NSString stringWithFormat:[playerScores objectAtIndex:i]];
    [myLabel setText:text];

    [yardsScrollView addSubview:myLabel];
    [myLabel release];
    y = y+125;
}

 } 
```

# knockout.js - 即使父属性为空，计算值也始终返回真值

> ID：10408132
> 
> 赞同：0
> 
> 时间：2012-05-02T05:24:01.133
> 
> 标签：knockout.js, computed-observable

我正在使用 ko 映射插件从 JS 对象创建我的 observables `ko.mapping.fromJS()`，.

该对象的片段如下：

```
{ Name: "blah", Parent: { Title: "blah", Url: "/blah" } } 
```

如果`Parent.Title`发生更改，那么我页面上的所有内容都会按预期更新，但是当`Parent`变为 null 时，我遇到了问题。使用`Parent`属性的简化标记如下所示：

```
<p data-bind="if: HasParent">Up: <a data-bind="text: ParentTitle"></a></p> 
```

`HasParent`看起来像这样：

```
self.HasParent = ko.computed(function () {
    return self.Parent;
}); 
```

`ParentTitle`看起来像这样：

```
self.ParentTitle = ko.computed(function () {
    return self.HasParent() ? self.Parent.Title() : "";
}); 
```

注意：`self`设置为返回的结果`ko.mapping.fromJS()`，然后通过调用应用到页面`ko.applyBindings();`

所以基本上我的问题是`HasParent`函数总是返回一个真实的值。

另外，这是我的第一个 ko 项目，所以如果我能以更好的方式做任何事情，请告诉我 :)

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:32:25.260

observables 是函数，因此即使它们的实际值为 null，在查看 observable 本身时它仍然是真实的。

绑定将`if`解开您计算的 observable，但您的将有两个级别需要解包才能得到实际值（计算的然后是实际的 observable）。

你会想要返回`self.Parent()`让它以你想要的方式工作。如果你真的想要一个真/假值（不需要`if`），那么你可以做`!!self.Parent()`。

更新：

问题是映射插件只在最外层的属性上创建 observables，所以`Title`and`Url`将是 observables，但不是`Parent`. 如果您希望计算出的 observable 实际响应在 null 和填充之间移动的 Parent，那么它需要是 observable 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:07:09.823

父母不是可观察的；它是一个对象。HasParent 永远不会被重新评估，因为它不依赖于任何可观察的。将绑定从更改`if: HasParent`为`if: Parent`应该可以帮助您。

# android - 如何在android中获取实时视频录制的文件大小？

> ID：10408133
> 
> 赞同：7
> 
> 时间：2012-05-02T05:24:23.957
> 
> 标签：android, video-capture

在 Android 中使用 录制视频时如何获取视频文件大小`MediaRecorder`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:50:32.857

```
String recVideoPath = Environment.getExternalStorageDirectory() + videoRecordedFileName;

File file = new File(recVideoPath);
long fileVideo = file.length(); 
```

或多或少类似于上面的那个。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-27T08:09:33.210

把它放在一个线程中，或者你正在更新 UI 的地方

```
currentPosition = (int) mediaPlayer.getCurrentPosition();
yourProgressBar.setProgress(currentPosition); 
```

我希望这有帮助 ：）

# java-me - 图像捕获不适用于诺基亚 C2-01,02,03

> ID：10408142
> 
> 赞同：2
> 
> 时间：2012-05-02T05:25:36.097
> 
> 标签：java-me, midp, lcdui, mmapi

我能够捕获图像本地 C 驱动器并将其保存到我的 PC，但是每当我想使用诺基亚 C2-01,01,03 捕获图像时，相机命令正在工作，但捕获命令不起作用。

我需要做哪些改变才能使这个对我有用？我的 CaptureAndSaveImage.java 代码是：

```
public class CaptureAndSaveImage extends MIDlet implements CommandListener {

    private Display display;

    // Form where camera viewfinder is placed
    private Form cameraForm;

    // Command for capturing image by camera and saving it. 
    // Placed in cameraForm.
    private Command cmdCapture;
    // Command for exiting from midlet. Placed in cameraForm.
    private Command cmdExit;

    // Player for camera
    private Player player;
    // Video control of camera
    private VideoControl videoControl;

    // Alert to be displayed if error occurs.
    private Alert alert;

    /**
     * Constructor.
     */
    public CaptureAndSaveImage() {
        InitializeComponents();
    }

    /**
     * Initializes components of midlet.
     */
    private void InitializeComponents() {
        display = Display.getDisplay(this);

        if(checkCameraSupport() == false) {
            showAlert("Alert", "Camera is not supported!", null);
            return;
        }

        try {
            createCameraForm();
            createCamera(); 
            addCameraToForm();
            startCamera();
        } catch(IOException ioExc) {
            showAlert("IO error", ioExc.getMessage(), null);
        } catch(MediaException mediaExc) {
            showAlert("Media error", mediaExc.getMessage(), null);
        } 
    }

    /**
     *  Creates and returns form where the camera control will be placed.
     */
    private void createCameraForm() {
        // Create camera form
        cameraForm = new Form("Camera");
        // Create commands for this form
        cmdCapture = new Command("Capture", Command.OK, 0);
        cmdExit = new Command("Exit", Command.EXIT, 0);
        // Add commands to form
        cameraForm.addCommand(cmdCapture);
        cameraForm.addCommand(cmdExit);
        // Set midlet as command listener for this form
        cameraForm.setCommandListener(this);
    }  

    /**
     * Check camera support.
     * @return true if camera is supported, false otherwise.
     */
    private boolean checkCameraSupport() {
        String propValue = System.getProperty("supports.video.capture");
        return (propValue != null) && propValue.equals("true");
    }    

    /**
     * Creates camera control and places it to cameraForm.
     * @throws IOException if creation of player is failed.
     * @throws MediaException if creation of player is failed.
     */
    private void createCamera() throws IOException, MediaException {
        player = Manager.createPlayer("capture://video");
        player.realize();
        player.prefetch();

        videoControl = (VideoControl)player.getControl("VideoControl");
    }

    /**
     * Adds created camera as item to cameraForm.
     */
    private void addCameraToForm() {
        cameraForm.append((Item)videoControl.
                initDisplayMode(VideoControl.USE_GUI_PRIMITIVE, null));
    }

    /**
     * Start camera player
     * @throws IOException if starting of player is failed.
     * @throws MediaException if starting of player is failed.
     */
    private void startCamera() throws IOException, MediaException  {
        if(player.getState() == Player.PREFETCHED) {
            player.start();
        }
    }

    /**
     * Saves image captured by camera.
     */
    private void captureAndSaveImage() {
        FileConnection file = null;
        OutputStream outStream = null;

        try {
            if(checkPngEncodingSupport() == false) {
                throw new Exception("Png encoding is not supported!");
            }

            // Capture image
            byte[] capturedImageData = 
                    videoControl.getSnapshot("encoding=png");

            // Get path to photos folder.
            String dirPhotos = System.getProperty("fileconn.dir.photos");
            if(dirPhotos == null) {
                throw new Exception("Unable get photos folder name");
            }

            String fileName = dirPhotos + "CapturedImage.png";
            // Open file
            file = (FileConnection)Connector.open(fileName, 
                    Connector.READ_WRITE);
            // If there is no file then create it
            if(file.exists() == false) {
                file.create();
            }
            // Write data received from camera while making snapshot to file
            outStream = file.openOutputStream();
            outStream.write(capturedImageData);

            showAlert("Info", "Image is saved in " + fileName, cameraForm);

        } catch(IOException ioExc) {
            showAlert("IO error", ioExc.getMessage(), cameraForm);
        } catch(MediaException mediaExc) {
            showAlert("Media error", mediaExc.getMessage(), cameraForm);
        } catch(Exception exc) {
            showAlert("Error", exc.getMessage(), cameraForm);
        } finally {
            // Try to close file
            try {
                if(outStream != null) {
                    outStream.close();
                }
                if(file != null) {
                    file.close();
                }
            } catch(Exception exc) {
                // Do nothing 
            }
        }
    }    

    /**
     * Checks png encoding support
     * @return true if png encoding is supported false otherwise.
     */
    private boolean checkPngEncodingSupport() {
        String encodings = System.getProperty("video.snapshot.encodings");
        return (encodings != null) && (encodings.indexOf("png") != -1);
    }

    /**
     * From MIDlet.
     * Signals the MIDlet that it has entered the Active state.
     */
    public void startApp() {
        if ( videoControl != null ) {
            display.setCurrent(cameraForm);
        }
    }    

    /**
     * From MIDlet.
     * Signals the MIDlet to enter the Paused state.
     */
    public void pauseApp() {        
        // TODO: pause player if it is running.
    }

    /**
     * Performs exit from midlet.
     */
    public void exitMIDlet() {
        notifyDestroyed();
    }

    /**
     * Shows alert with specified title and text. If next displayable is not
     * specified then application will be closed after alert closing.
     * @param title - Title of alert.
     * @param message - text of alert.
     * @param nextDisp - next displayable. Can be null.
     */
    private void showAlert(String title, String message, Displayable nextDisp) {
        alert = new Alert(title);
        alert.setString(message);
        alert.setTimeout(Alert.FOREVER);

        if(nextDisp != null) {
            display.setCurrent(alert, nextDisp);
        } else {
            display.setCurrent(alert);
            alert.setCommandListener(this);
        }
    }        

    /**
     * From MIDlet.
     * Signals the MIDlet to terminate and enter the Destroyed state.
     */
    public void destroyApp(boolean unconditional) {
        if(player != null) {
            player.deallocate();
            player.close();
        }
    }

    /**
     * From CommandListener.
     * Indicates that a command event has occurred on Displayable displayable.
     * @param command - a Command object identifying the command.
     * @param displayable - the Displayable on which this event has occurred.
     */
    public void commandAction(Command command, Displayable displayable) {
        // Handles "Capture image" command from cameraForm
        if(command == cmdCapture) {
            captureAndSaveImage();
        }
        // Handles "exit" command from forms
        if(command == cmdExit) {
            exitMIDlet();
        }
        // Handle "ok" command from alert
        if(displayable == alert) {
            exitMIDlet();
        }
    }
} 
```

# java - 如何为 Android 平板电脑创建应用程序（Honeycomb 3.2 Api13）

> ID：10408149
> 
> 赞同：0
> 
> 时间：2012-05-02T05:26:42.700
> 
> 标签：java, android

```
hii i am new in android i have create application for android 2.2  api (8)  . 
```

我想为android选项卡开发应用程序但不是我如何开始，即使我无法解析

```
http://www.taxmann.com/TaxmannWhatsnewService/Services.aspx?service=getStatutesTabNews 
```

请告诉我如何为 android 选项卡构建应用程序。

```
please post me some link of Honey comb example with parsing and Ui Design . 
```

# ios - 应用程序第一次处于纵向模式，如果设备处于横向模式

> ID：10408156
> 
> 赞同：0
> 
> 时间：2012-05-02T05:27:17.630
> 
> 标签：ios, xcode, ipad, ios-simulator

在我们的应用程序中，我们的应用程序第一次处于纵向模式。如果设备处于横向，它将显示纵向屏幕模式。为什么？但是当我手动旋转模拟器时，它将正确进入横向和纵向模式。但是模拟器第一次显示纵向屏幕..请解决我的问题，为什么会发生这种情况或如何解决它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:00:23.617

您必须在 Xcode 中为您的应用添加支持的方向。

![在此处输入图像描述](../Images/e48be988d717511c911c63a82459d889.png)

如果这不起作用，请尝试将其添加到您的 viewController

**注意：**此代码表示应用程序支持所有方向，但`UIInterfaceOrientationPortraitUpsideDown`设备是 iPhone 或 iPod Touch 时除外，并且可以修改以适应设备和 iPhone/iPad 时的特定方向要求。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
} 
```

# java - 使用DISC框架的weblogic portlet的AJAX消费

> ID：10408159
> 
> 赞同：2
> 
> 时间：2012-05-02T05:27:31.420
> 
> 标签：java, ajax, weblogic, portlet, jsr168

我制作了一个 JSR 168 portlet，如下所示：

```
public class GetTest extends GenericPortlet {
    @Override
    public void doView(RenderRequest request, RenderResponse response) 
             throws PortletException, IOException {
        PortletRequestDispatcher rd = 
                      getPortletContext().getRequestDispatcher("/getTest.jsp");
        rd.include(request, response);
    }
} 
```

用于此的 portlet 被命名为 getTest.portlet 并且位于 WebContent 文件夹中。这个的jsp页面：

```
<%
    String params = request.getParameter("params");
    out.print("Params: " + params);
%> 
```

现在我想使用 Weblogic 的 DISC 框架向这个 portlet 发出 Ajax get 请求。我怎样才能做到这一点？

我在网上对此进行了搜索，但没有任何有用的示例可以使用。我尝试过的如下：

在其他一些.jsp 中：

```
.....
<script type="text/javascript">
    var dataUrl = "/getTest.portlet?params=hi";
    var xmlhttp = new bea.wlp.disc.io.XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
        if ((xmlhttp.readyState == 4) && (xmlhttp.status == 200)) {
            alert(xmlhttp.responseText);
        }
    }
    xmlhttp.open('GET', dataUrl, true);
    xmlhttp.send(null);
</script>
.... 
```

在警报中，我变得空白。我应该得到“Params: hi”，因为它在这个 portlet 的 jsp 页面中。我怎样才能做到这一点？

我阅读了以下文章，但没有发现任何有用的东西，或者我可能错过了一些东西。

*   [http://docs.oracle.com/cd/E13155_01/wlp/docs103/clientdev/disc.html](http://docs.oracle.com/cd/E13155_01/wlp/docs103/clientdev/disc.html)
*   [http://docs.oracle.com/cd/E13155_01/wlp/docs103/clientdev/rest.html](http://docs.oracle.com/cd/E13155_01/wlp/docs103/clientdev/rest.html)
*   [https://blogs.oracle.com/satya/entry/new_feature_resource_serving_in](https://blogs.oracle.com/satya/entry/new_feature_resource_serving_in)
*   [http://docs.oracle.com/cd/E13155_01/wlp/docs103/clientdev/publishing.html](http://docs.oracle.com/cd/E13155_01/wlp/docs103/clientdev/publishing.html)

我还为附加此 portlet 的桌面门户启用了光盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T06:15:00.787

最后，我自己找到了。我需要使用 JSR 286 portlet 的 Resource Serving 特性来通过 Ajax 请求获取数据。你需要做的是：

1.  构建您的 portlet 的资源 url：`<portlet:resourceURL var="homeURL" id="home" escapeXml="false" />`
2.  使用此 url 向您的 portlet 发出 Ajax 请求。

    ```
    var path="<%=homeURL.toString()%>";
    request.onreadystatechange=function () {
        if (request.readyState == 4) {
            if (request.status == 200) {
                alert(request.responseText);
            } else {
                alert("Problem retrieving data from server.");
            }
        }
    };
    request.open("GET", path, true);
    request.send(null); 
    ```

3.  在 portlet 中，在`serveResource(ResourceRequest request, ResourceResponse response)`方法中编写您的逻辑。将数据值设置为请求的属性，然后转发请求，使用请求分流器响应 JSP 页面。或者您可以直接将 JSON 格式的数据值写入响应写入器。( `response.getWriter()`)
4.  如果您选择将数据传递到 JSP 页面，则在 JSP 页面上从请求属性中获取数据并根据需要显示它们。
5.  如果您选择使用响应编写器以 JSON 格式传递数据，那么您需要在 JavaScritp 中解析该数据，然后以适当的格式显示它们。
6.  而且，如果您将数据传递给 portlet，您就可以像使用 Ajax 请求将数据传递给 servlet 一样轻松地传递它。在这一行`request.send(null)`中，而不是`null`传递您的数据。

希望这对未来的访客有所帮助。**:-)**

[我仍然不确定这是否是最好的方法。任何其他解决方案总是受欢迎的。]

# iphone - 仅在应用程序第一次运行时显示键盘时崩溃

> ID：10408160
> 
> 赞同：1
> 
> 时间：2012-05-02T05:27:31.767
> 
> 标签：iphone, ios, keyboard, uitextfield

显示键盘时，我正面临崩溃。正如Apple docs中所建议的那样，我正在收听从键盘发送的通知，以调整将被键盘覆盖的文本视图的位置。在模拟器会话和调试会话中，应用程序第一次运行并且只有当我第一次点击 texfield 应用程序崩溃时，在控制台中我收到了以下消息：

> -[UITextMagnifierCaret keyboardWasShown:]：无法识别的选择器发送到实例 0x3ee2e0 2012-05-02 07:17:49.929 XXXX[316:707] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[UITextMagnifierCaret keyboardWasShown:]：无法识别的选择器发送到实例 0x3ee2e0'

这里有一些线索：

1.  键盘之前在另一个部分中显示
2.  如果崩溃已经发生，则不会再次发生
3.  它似乎只在 sim 和设备上的调试过程中出现，而不是在 ad-hoc 中出现
4.  我的ios版本是5.1
5.  UITextMagnifierCaret 不是应用程序的一个类，但我猜是放大类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:10:52.810

您将某个对象注册为观察者，然后释放该对象，但观察者仍指向该内存位置。UITextMagnifierCaret 的例外可能是因为曾经分配给观察者的内存位置现在分配给了您不管理的 UITextMagnifierCaret 对象，并且不响应键盘通知。

使用 ARC 可能有助于避免此类问题。通常，请确保将任何指向您将要手动释放的对象的指针设为 nil 或删除。

# android - 调用执行时不执行任何操作

> ID：10408164
> 
> 赞同：0
> 
> 时间：2012-05-02T05:28:14.287
> 
> 标签：android, android-asynctask

这是我的 asynctask 类........

```
public class  UpdatingNews extends AsyncTask<String, Void, String> {
    private Database_WebService webservice;
    private Context mContext;

    public UpdatingNews(Context context){
        this.mContext = context;

    }

    @Override
    protected String doInBackground(String... params) {
        webservice = new Database_WebService(mContext);
        webservice.updateallCatNews();
        webservice.UpdateAllNews();
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        startActivity(new Intent(Main_Launcher.this,
                Main_FormNewUser.class));
        finish();
    }
} 
```

当我调用它时......

```
update = new UpdatingNews(this);
    check = webservice.CheckSurveySubmit();
    int secondsDelayed = 3;
    new Handler().postDelayed(new Runnable() {
        public void run() {
            if (check == 0) {
                update.execute("...");

            }
            if (check == 1) {
                startActivity(new Intent(Main_Launcher.this,
                        Main_AllLatestNews.class));
                finish();
            }
        }
    }, secondsDelayed * 1000); 
```

它没有执行.......................

```
webservice.updateallCatNews();
        webservice.UpdateAllNews(); 
```

有什么问题？？？？？？？？？？？？？？？？？？？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:33:48.957

你`UpdatingNews`是一个异步任务。在您的 run() 中，您启动了任务，但随后立即启动了另一个活动，但没有完成任务。最有可能的是，android 移动到`Main_FormNewUser`Activity，但任务仍在后台运行。因此，您的第二次运行很可能实际上是第一次运行的结果。

如果您需要下一个活动出现*在*您抓取新闻之后，您应该将您的`startActivity`语句移动到`onPostExecute()`异步任务中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:40:54.190

查看您的代码后，我认为 xandy 是正确的。Main_FormNewUser Activity 与异步任务并行执行。

# java - Smack + openfire - 是否可以检查当前用户是否为管理员？/ 如何查看当前用户的详细信息？

> ID：10408168
> 
> 赞同：3
> 
> 时间：2012-05-02T05:28:23.420
> 
> 标签：java, android, admin, openfire, smack

是否可以检查当前用户是否是管理员/如何检查当前用户详细信息？（Android 中的 Java smack + openfire）？
当我尝试在 openfire 管理网页上创建用户时。有一个选项：
是管理员吗？（授予 Openfire 的管理员权限）
可以知道当前用户是否有 Openfire 的管理员权限？（我的意思是，如何检查当前用户是 OpenFire 的管理员）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T05:50:35.810

试试这个，

```
 account = Connection.getAccountManager();
 Collection<String> attrs = account.getAccountAttributes();
 //inspect the values in attrs, should contain the type of account 
```

* * *

好的..在用户创建页面上。

是管理员吗？--> 表示如果您想向您正在创建的用户授予管理员权限。管理员用户将拥有创建/删除用户、会话、组等的所有权限。您可能不想为所有用户提供管理员权限。

如果您想知道*当前用户*或存在的任何其他用户是否具有管理员权限，请转到

User/Groups-->Users-->User Summary（这里你会得到系统中的所有用户）

当前登录的用户将由其旁边的*星号表示。*（我认为）单击用户，然后它将给出用户的摘要。*Is Administrator?:*属性将相应地为*yes*或*no*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-27T13:10:28.227

也许 AdminManager 中的方法会给你一些想法。例如，

```
public boolean isUserAdmin(org.xmpp.packet.JID jid,
                           boolean allowAdminIfEmpty) 
```

和

```
public List<org.xmpp.packet.JID> getAdminAccounts() 
```

您可以参考有关该类的[javadoc 。](http://download.igniterealtime.org/openfire/docs/latest/documentation/javadoc/org/jivesoftware/openfire/admin/AdminManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T05:40:50.227

有一个使用 AdminManager 获取所有服务器管理员的示例：

```
/**
 * Returns a collection with the JIDs of the server's admins. The collection may include
 * JIDs of local users and users of remote servers.
 *
 * @return a collection with the JIDs of the server's admins.
 */
public Collection<JID> getAdmins() {
    return AdminManager.getInstance().getAdminAccounts();
} 
```

更多细节可以在[XMPPServer.java](https://searchcode.com/file/133624981/src/java/org/jivesoftware/openfire/XMPPServer.java)中找到。

# django - 构建一个集成 Pentaho CDF 的 django webapp 有意义吗

> ID：10408170
> 
> 赞同：0
> 
> 时间：2012-05-02T05:28:29.070
> 
> 标签：django, business-intelligence, pentaho

Pentaho CDF 可以集成到 django webapp 中，用于这个 webapp 的报告模块吗？

我们需要以“BI 用户”的方式呈现我们的数据，允许用户探索我们的数据，例如向下钻取、单击详细信息……在这种情况下，我们应该利用 Pentaho 的方法是什么？

1) 利用其 CDF 制作图表？

2) 利用其报表设计器来设计单个图表？

3) 利用其报表设计器来设计仪表板布局？-- 看来我们应该让我的 django 应用程序控制布局。

我认为我的问题与以下问题有关（只是我在考虑 Django 而不是 Java EE） [如何使用 Pentaho 和 Java 生成包含图表的报告？](https://stackoverflow.com/questions/7723790/how-to-generate-report-containing-chart-using-pentaho-and-java)

另外，这两个帖子似乎也与我的想法有关[如何在 Pentaho 中构建图表？使用 xAction 还是使用 CDF？](https://stackoverflow.com/questions/8258278/how-to-build-charts-in-pentaho-using-xaction-or-using-cdf)

[将 Pentaho Reporting Web 前端与自定义 Java/JSF 应用程序集成](https://stackoverflow.com/questions/5443572/integrating-pentaho-reporting-web-frontend-with-custom-java-jsf-application)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:55:45.270

如果您正在考虑将 Pentaho 的报告模块和分析工具与 CDF 一起使用，我建议您集成[Saiku](http://analytical-labs.com/)，因为 Pentaho 中不再支持 JPivot。

# jqplot - jqPlot - 如何在 y 轴上显示文本？

> ID：10408173
> 
> 赞同：1
> 
> 时间：2012-05-02T05:28:32.907
> 
> 标签：jqplot

我有一个数组，其中包含 x 轴的日期和 y 轴的 1-3 之间的整数值，如下所示：

```
chartData = [["19-Jan-2012",1],["20-Jan-2012",2],["21-Jan-2012",1],["22-Jan-2012",3]]; 
```

**问题 1：** 我想查看文本而不是 1 和 2 和 3，如下所示：“高”而不是 3，“中”而不是 2，“低”而不是 1。

怎么做？

**问题2：**

如何在每个点旁边永久显示标签，而不仅仅是用荧光笔鼠标悬停？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:18:15.413

您可以像这样使用第三个参数`[[1,4,'mid'], [3 5,'hi'], [7,2,'low']]`并在您的选项字符串中使用它

```
series:[{
  pointLabels:{
    labels:['mid', 'hi', 'low'],
    location:'se',
    ypadding: 12
  }
}] 
```

也试试这个我认为这正是你想要的[http://www.jqplot.com/tests/point-labels.php](http://www.jqplot.com/tests/point-labels.php) 但你仍然必须通过 x 系列将数值传递给数据。

在上面的链接中，您可以找到我猜想的确切解决方案..

干杯..

# jquery - jquery过滤器选择器与过滤器方法

> ID：10408175
> 
> 赞同：0
> 
> 时间：2012-05-02T05:28:57.390
> 
> 标签：jquery

我在让 jquery 过滤器方法工作时遇到问题。

如果我有

```
$("#resultDiv tr:odd").addClass("alternate_row"); 
```

div“resultDiv”中包含表的所有行都被赋予了备用行类。

但是，如果我使用

```
 $('#resultDiv').filter("tr:odd").addClass("alternate_row"); 
```

它似乎不匹配任何元素，并且没有应用任何类。

我需要使用 filter 方法，因为我正在做其他一些传递变量的事情。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T05:35:17.350

使用第二个选择器，您可以选择具有 id 的元素`#resultDiv`并对其应用过滤器。但它可能不是一个集合，只是一张桌子什么的。

您必须像这样选择`tr`元素并对它们应用过滤器；

```
$('#resultDiv tr').filter(":odd").addClass("alternate_row"); 
```

这样，您将拥有一个`tr`应用过滤器的集合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T05:39:08.957

在您的第一个版本中：

> `$('#resultDiv').filter("tr:odd").addClass("alternate_row")`

`.filter()` *从集合中删除*不匹配的元素，并且您的`#resultDiv`元素都不是`tr`，因此过滤器不匹配任何内容。

尝试：

```
$('#resultDiv').find("tr:odd").addClass("alternate_row"); 
```

显式*添加与选择器**匹配*的新后代节点`tr:odd`，或

```
$('#resultDiv tr').filter(":odd").addClass("alternate_row"); 
```

它使用单个选择器来查找*所有* `tr`元素，然后使用`.filter`仅选择奇数的元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T05:34:48.617

我猜这`#resultDiv`是所有`<tr>`'s 的父母，所以我认为你想要这个：

```
$('#resultDiv tr').filter(":odd").addClass("alternate_row"); 
```

# asp.net-mvc-3 - 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误 - ASP.NET MVC 实体框架

> ID：10408182
> 
> 赞同：11
> 
> 时间：2012-05-02T05:29:35.010
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework

我正在使用带有 Sql server 2008 的 ASP.Net MVC 3（实体框架）。连接字符串在 web.config 中很好。但有时我从我的应用程序中得到以下异常：

```
 System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)

Generated: Wed, 02 May 2012 05:05:21 GMT

System.Data.EntityException: The underlying provider failed on Open. ---> System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginWithFailover(Boolean useFailoverHost, ServerInfo primaryServerInfo, String failoverHost, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
   --- End of inner exception stack trace ---
   at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure)
   at System.Data.EntityClient.EntityConnection.Open()
   at System.Data.Objects.ObjectContext.EnsureConnection()
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
   at System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__2[TResult](IEnumerable`1 sequence)
   at System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle[TResult](IEnumerable`1 query, Expression queryRoot)
   at System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute[S](Expression expression)
   at System.Linq.Queryable.SingleOrDefault[TSource](IQueryable`1 source)
   at MyApp.Data.UserRepository.GetUserDetails(String username)
   at MyApp.Core.Services.SiteService.GetUserDetails(String username, Int64 userId)
   at MyApp.PublicSite.Web.Controllers.BaseController.Initialize(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at MyApp.PublicSite.Web.Controllers.BaseController.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

连接字符串是：

```
 <connectionStrings>
    <add name="MyAppDBContainer" connectionString="metadata=res://*/MyAppDB.csdl|res://*/MyAppDB.ssdl|res://*/MyAppDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=SERVERNAME;initial catalog=MyAppDB;persist security info=True;user id=USERID;Password=PASSWORD;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

此异常是随机发生的，并且每次都无法获取/重现它。我可能在这里缺少任何可能的设置？请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:59:16.983

鉴于它有时/大部分都有效（如您所说）：

*   连接字符串没问题
*   SQL 配置正确（即允许远程连接等）

这可能是您的服务器（您的代码）和 SQL Server 之间的网络中断，或者 SQL Server 由于某种原因而关闭的唯一原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T07:38:28.030

为了允许远程连接，我们需要[在 sql server 配置管理器中将 tcp/IP 的属性设置为 true](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/ea9f0e79-ef69-4d47-9862-d53a1e460003/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:09:36.813

我们必须为此检查以下内容

1.检查 sqlserver 配置管理器设置中的 Tcp/IP 设置。如果禁用，[请确保我们必须启用 TCP/IP 的状态](http://forums.asp.net/t/1827197.aspx/1?a%20network%20related%20or%20instance%20specific%20error%20occurred%20while%20establishing%20a%20connection%20to%20sql%20server)

2.在火灾设置中添加端口到防火墙异常。sql端口的详细信息：

名称：SQL

端口号：1433

协议：选择 TCP

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T08:34:00.577

试试这个....

```
<add name="MyAppDBContainer" connectionString="metadata=res://*;provider=System.Data.SqlClient;provider connection string='data source=SERVERNAME;initial catalog=MyAppDB;persist security info=True;user id=USERID;Password=PASSWORD;multipleactiveresultsets=True;'" providerName="System.Data.EntityClient" /> 
```

我已经编辑了我的答案......

# iphone - NSMutableURLRequest 超时不起作用

> ID：10408185
> 
> 赞同：0
> 
> 时间：2012-05-02T05:29:44.920
> 
> 标签：iphone, ios, xcode, timeout, nsmutableurlrequest

我正在尝试将 NSMutableURLRequest 的请求超时设置为 120，但它被忽略了。请求超时在 90 秒内失败。谁能告诉我如何设置 NSMutableURLRequest 的请求超时？. 我浏览了一些链接，说明默认超时值为 240 秒。我找不到任何关于此的苹果文档。谁能帮我 ？

```
NSMutableURLRequest* urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:serverURL]];

[urlRequest setHTTPMethod:@"GET"];
[urlRequest setTimeoutInterval:120];

_urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate: self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:16:09.633

是真的。最小值为 240 秒。设置在下面将被忽略。

你为什么不找替代品而不是找教授。

您可以使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)。您可以根据需要设置`setTimeOutSeconds:`& `setNumberOfTimesToRetryOnTimeout:`。注：开发者已停止维护该项目，但目前稳定。对于 IOS 5.x 或更高版本，您可能会寻找其他选择。

# math - 如何求解非线性联立方程组（在 Matlab、Python 或 Fortran 中）

> ID：10408187
> 
> 赞同：0
> 
> 时间：2012-05-02T05:29:53.160
> 
> 标签：math, numerical-methods, nonlinear-functions

我正在研究一个非线性联立方程组。这两个变量是 u>0 和 b>0。如何在 Matlab、Python 或 Fortran 中解决这个问题？谢谢。

![非线性联立方程](../Images/59d8de9d7ad93c7c47e789acee59fbd9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:40:56.853

老实说，我不确定这个问题是否真的属于这里。但解决方案在理论上很简单。方程 1 可以简单地求解 b 作为 u 的函数。代入等式 2，其中 b 仅出现一位。

现在，您可以在新方程 2 上使用求根器，求解满足该关系的 u 值。给定 u 的值，您可以使用自适应数值正交例程进行积分。在 MATLAB 中，这类似于 quadgk。（不要使用 ODE 求解器，因为它们提供的信息比您需要的多。您只需要整体积分。）

但事实上，该积分中的内核是变量 t 的简单多项式，并且 u^10 是积分中的因子。因此，第一学期的微积分将手工进行积分，尽管它需要一些铅笔和纸。或者，符号工具箱就足够了。单行调用来解决在这里就足够了，尽管这会是一条很长的行，而且我懒得写它。

说了这么多，请注意数值积分都会有一点问题，因为你的数字是讨厌的和巨大的，指数相当大。因此，这也意味着您非常希望象征性地解决问题。

确实，这个答案的重点是在问题上使用数值求解器是一个坏主意，尤其是当符号工具箱（或铅笔和纸！）等工具足够且可用时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:26:58.223

您可以通过求解 b 的 #1 轻松消除其中一个方程。然后用它为你解决#2。

您将不得不使用迭代方法来做到这一点：猜测一个解决方案，计算一个估计值，与您的猜测进行比较，调整并重复直到收敛。

我会使用数值积分（五阶 Runge-Kutta 或其他东西）来计算积分。

# regex - 正则表达式约束验证 - grails

> ID：10408188
> 
> 赞同：2
> 
> 时间：2012-05-02T05:30:00.813
> 
> 标签：regex, validation, grails, constraints

我现在正在从事一个 grails 项目，并且我很难使用正则表达式来过滤我想要的所需数据。事情就是这样，我有一个字段可以接受所有字母和数字（大写和小写），以及键盘上的所有特殊字符（@*$&#）。只有当输入是数字和字母的组合 (0925abc) 或字母、数字和特殊字符的组合 (0925abc?><) 时，它才会接受输入。如果输入是纯字母 (adCbT)、纯数字 (0383) 或纯特殊字符 (@#$>_+-)，系统将拒绝输入。这可能与grails中的正则表达式约束有关吗？感谢您分享您的知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T09:05:25.007

因此，如果您只是在寻找适合您的约束的正则表达式，例如

```
'.*([a-zA-Z][0-9@*$&#]+|[0-9][a-zA-Z@*$&#]|[@*$&#][0-9a-zA-Z]).*' 
```

应该做的伎俩。它确保在您的输入中至少有一个从一个字符类到另一个字符类的转换。

使用负前瞻，它甚至更容易维护

```
'^(?![a-zA-Z]+$)(?![0-9]+$)(?![@*$&#]+$).+$' 
```

这三个术语确保输入不只包含来自一个字符类的字符。

这是一些测试表达式的代码：

```
def ok = ['asdasd90','90asdas','asd#sdfsd9','asd9sdf','908787#@']
def nok = ['asdewSDFDSFasd','23803','@*$&#']
def expression = '^(?![a-zA-Z]+$)(?![0-9]+$)(?![@*$&#]+$).+$'
ok.each { value ->
    assert value.matches(expression)
}
nok.each { value ->
    assert !value.matches(expression)
} 
```

# weblogic - Weblogic 服务器中的 OUTOFMEMORY 错误

> ID：10408192
> 
> 赞同：0
> 
> 时间：2012-05-02T05:30:18.003
> 
> 标签：weblogic, out-of-memory, weblogic-10.x

我们的生产服务器经常抛出 OutOfMemory 错误（两天一次）。

当我们分析堆转储时，它显示 44% 用于字符串，30% 用于 ConcurrentLinkedQueue，21% 用于字符数组

如何降低 String、ConcurrentLinkedQueue 和 char[] 的内存使用率？

（对于字符串，我不能减少太多，因为我需要将每个请求的 macid（字符串数据类型）传递给 weblogic 服务器）

# java - 如何清除谷歌地图上显示的路线？

> ID：10408194
> 
> 赞同：1
> 
> 时间：2012-05-02T05:30:20.593
> 
> 标签：java, android, google-maps, map

在我的 android 应用程序中，我正在显示路线 b/w current_location，并且用户通过单击“获取路线”按钮在剧院附近选择，但是当用户选择另一个剧院时，新路线也显示但旧路线未清除。我尝试了多种方式，但我无法去做。我尝试使用 mapOverlays.clear(); 这清除了我不想要的整个地图。即使我尝试了 {mapOverlays.remove(ol1); mapView.postInvalidate();}它没有清除路线请帮助我：以下是代码：

MyOverLay.java

```
public class MyOverLay extends Overlay 
{ 
    private GeoPoint gp1; 
    private GeoPoint gp2; 
    private int mode=0; 
    Context mContext;

    public MyOverLay(GeoPoint gp1,GeoPoint gp2,int mode) 
    { 
        this.gp1 = gp1; 
        this.gp2 = gp2; 
        this.mode = mode; 
    }  
    public int getMode() 
    { 
        return mode; 
    } 

    @Override 
    public boolean draw (Canvas canvas, MapView mapView, boolean shadow, long when) 
    { 
        Projection projection = mapView.getProjection(); 
        Log.d("shadow", ""+shadow);
        if (shadow== false) 
        { 
            Paint paint = new Paint(); 
            paint.setAntiAlias(true); 
            Point point = new Point(); 
            projection.toPixels(gp1, point); 
            if(mode==1) // start point
            { 
                    paint.setColor(Color.BLUE); 
            } 
            else if(mode==2) // mode=2,path 
            { 
                paint.setColor(Color.BLUE); 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 
            } 
            else if(mode==3)   /* mode=3&#65306;end */ 
            { 
                /* the last path */ 
                Point point2 = new Point(); 
                projection.toPixels(gp2, point2); 
                paint.setStrokeWidth(5); 
                paint.setAlpha(120); 
                canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 
                /* end point */
            } 
        } 
        return super.draw(canvas, mapView, shadow, when); 
    } 
} 
```

HelloItemizedOverlay.java

```
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    WebViewDemo viewDemo;
    GeoPoint curret_point;

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    Context mContext;

   //some methods

    public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
        viewDemo=(WebViewDemo)context;
    }

    //When user taps theater icon this alert box pop ups.which contains 'Get directions' Button
    @Override
    protected boolean onTap(int index) { 
         WebViewDemo.MyOverLayItem item = (WebViewDemo.MyOverLayItem) mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        viewDemo.desc_lat=item.getPoint().getLatitudeE6();
        viewDemo.desc_lng=item.getPoint().getLongitudeE6();
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.setPositiveButton("Get directions", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                viewDemo.showDrections();
            }
        });
        dialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });
        dialog.show();
        return true;
    }
} 
```

WebViewDemo Map Activity的主要部分：

WebViewDemo.java

```
public class WebViewDemo extends MapActivity {

public double current_latitude, current_langitude;
Overlay ol1;
MapView mapView;
GeoPoint destGeoPoint;
HttpClient httpClient;
HttpPost postRequest;
HttpResponse response;
BufferedReader reader;
String sResponse, result;
StringBuilder s;
JSONObject jsonObject;
public String lat = null, lng = null;
int desc_lat,desc_lng;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
.....
mapView = (MapView) findViewById(R.id.mapview);
mapOverlays = mapView.getOverlays();
/**Here i am getting current_latitude, current_langitude using Location Manager
and displaying it on map.and making Web Service request to google and displaying near theaters also.*/
..
}//onCreate end

// *For displaying route b/w current location and User selected Theaters when Get directions Button clicked (in HelloItemizedOverlay class). 

public void showDrections() {

        try {
                      //Here i am trying  to clear previous path. 
            if(ol1!=null){
                mapOverlays.remove(ol1);
                mapView.postInvalidate();
                mapView.invalidate();
            }
            double l1 = desc_lat/1E6;
            double l2 = desc_lng/1E6;
            destGeoPoint = new GeoPoint(desc_lat,desc_lng);
            httpClient = new DefaultHttpClient();
            postRequest = new HttpPost(
                    "http://maps.googleapis.com/maps/api/directions/json?origin="
                            + current_latitude
                            + ","
                            + current_langitude
                            + "&destination="
                            + l1
                            + ","
                            + l2
                            + "&sensor=true&optimize=true&alternatives=false");
            response = httpClient.execute(postRequest);
            reader = new BufferedReader(new InputStreamReader(response
                    .getEntity().getContent(), "UTF-8"));// getting response
            sResponse = null;
            s = new StringBuilder();
            while ((sResponse = reader.readLine()) != null) {
                s = s.append(sResponse);
            }
            result = s.toString().trim();
            jsonObject = new JSONObject(result);

            JSONArray jsonRouteArray = jsonObject.getJSONArray("routes");
            JSONObject overview_poly = jsonRouteArray.getJSONObject(0).getJSONObject("overview_polyline");
            String points = overview_poly.getString("points");
            List<GeoPoint> _geopoints = decodePoly(points);
            GeoPoint gp1;
            GeoPoint gp2;
            gp2 = _geopoints.get(0);
            for (int i = 1; i < _geopoints.size(); i++) // the last one  would be crash
            {
                gp1 = gp2;
                gp2 = _geopoints.get(i);
                ol1 = new MyOverLay(gp1, gp2, 2);
                mapOverlays.add(ol1);
            }
            mapView.postInvalidate();
            dialog.cancel();
        } catch (JSONException je) {
            Toast.makeText(this, "Unable to Show The Route", Toast.LENGTH_LONG).show();
            Log.d("showDirectins() JSON ERROR", ""+je);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
private List<GeoPoint> decodePoly(String encoded) {
//this method is used to decode the route points which are coming from web service and convert them into GeoPoints
}

} 
```

如果需要，请建议我更改代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:14:42.603

有可能删除地图中的路线，请在创建路线时将所有覆盖引用存储到一个列表，当您要删除迭代列表时，请从地图视图中删除所有覆盖引用。我希望它会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:19:49.497

向 MyOverLay 类添加一个函数。“setPathVisibility（布尔值）”

将布尔值存储在称为可见性的私有变量中，在执行任何绘图逻辑之前，检查可见性是否为真。

这将允许您在不丢失所有覆盖数据的情况下打开和关闭路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:09:39.157

我找到了一种更简单的方法。它可能有点脏，但它对我有用。

创建一个整数变量，每当单击按钮时该变量都会增加。然后在您的代码之上，添加此代码

```
if(iterator>0) {
                int listSize = mapView.getOverlays().size();
                Log.d("listSize",Integer.toString(listSize));
                mapView.getOverlays().remove(listSize-1); 
                iterator=0;
            } 
```

上面的代码将删除在地图上绘制的最后一条路径。不需要列表或类似的东西。希望这可以帮助。

# iphone - iPhone应用程序在崩溃时自动重启

> ID：10408199
> 
> 赞同：1
> 
> 时间：2012-05-02T05:30:36.180
> 
> 标签：iphone, crash, restart

> **可能重复：**
> [如果应用程序意外关闭，如何重新启动它](https://stackoverflow.com/questions/10395142/how-to-restart-app-if-it-unexpectedly-shutdown)

刚刚看到来自 Skype 应用程序的更新，其中提到他们的最新版本使该应用程序能够在崩溃时自动重新启动。

尽管我希望我的应用程序不会崩溃，但在它发生的“可能”事件中，这个功能真的很好。

任何有关如何实现类似功能的有用指示将不胜感激。

# django - 如何在 Django 中存储图像文件？

> ID：10408200
> 
> 赞同：24
> 
> 时间：2012-05-02T05:30:43.433
> 
> 标签：django

在 Django 中存储图像文件的典型场景是什么？更具体地说，图像是否直接存储在数据库 blob（例如 MongoDB GridFS）、本地文件系统或 Amazon S3 中？对于这三种情况，是否有可用的工具或 django 包来简化存储图像的生活？

我目前正在本地开发服务器上的 Django 项目中的**媒体文件夹中保存图像并从中提供图像。**有人告诉我在同一台机器上提供静态文件是一种不好的做法。那么在 Django 中存储和提供静态图像的典型真实场景是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T05:45:05.777

一个典型的真实示例是将上传的图像存储在站点目录的子目录中`media/`:)

如果您需要存储的图像多于应用程序服务器的硬盘空间，或者您需要多个应用程序服务器，或者您想使用 CDN 来减少延迟，或者......其他一千种事情中的一种，这可能会成为一个问题.

但是，除非您有特定的前期要求，否则要知道您需要担心的数千件事情中的哪一件（如果有的话）的唯一方法是启动您的网站，而最快的方法是将图像存储在`media/`.

如果您使用 a 执行此操作`FileField`，并且您在代码中小心不要假设，例如，图像是本地磁盘上的文件（例如，您确实*使用*了`.url()`方法*而不*使用属性），当（如果）时机成熟时，将这些图像移动到更合适的后端将是直截了当的。`FileFile`*`.path`*

 ** * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T06:23:56.013

默认情况下，[Django 将所有文件（和图像）保存在 MEDIA_ROOT 中](https://docs.djangoproject.com/en/dev/topics/files/)。但是，您可以编写[自定义文件存储](https://docs.djangoproject.com/en/dev/howto/custom-file-storage/)，以便将其保存在其他地方。

选择什么？这真的取决于。
您打算存储多少文件？他们将使用多少存储空间？多少带宽？你认为会有非常高的使用高峰吗？

通常，本地文件系统是最快的选择；但是，如果您发现这些图像会占用您过多的带宽，那么您可能需要卸载它们，尤其是在使用模式出现高峰时。相反，如果您需要扩展到多台服务器，那么您可能会发现将它们移动到数据库中是有益的。

无论如何，如果可能的话，您应该在获得一些数据后才决定真实数据。切换到不同的存储系统非常容易，所以我会从本地文件系统开始，然后在看到问题后才切换到更高级的系统。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T14:43:09.747

这*本身*并不是坏习惯。我想谁告诉你这有点困惑。Django 说你永远不应该使用*Django*提供静态资源，即它们应该由你用作 Django 反向代理的网络服务器（Apache、nginx 等）直接提供，但它没有争论是否必须打开不同的服务器或相同的服务器。

如果您有一个简单的应用程序或网站，则使用完全不同的服务器来存储静态文件可能是矫枉过正。只有在高并发的情况下（想想 Twitter、Facebook 等），应用程序无法让网络服务器担心除了将请求发送到应用程序本身之外的任何事情。现在，一些网络主机提供“云”存储来配合您的 VPS（例如 Rackspace）。如果您正在使用这样的主机，请务必利用您所拥有的，但在大多数情况下这不是必需的。

但是，在不同的*子域*下提供静态资源*是*有好处的。您可以使用相同的服务器，但使用子域（例如 static.mysite.com）将允许浏览器进行更多并行下载，在某些情况下，至少可以防止来自主网站的 cookie 附加到每个静态要求。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T07:54:54.080

这实际上取决于您要解决的解决方案。在某些情况下，s3 可能是比本地文件存储更好的解决方案。s3 在能够从不同的 Web 应用程序访问数据以及与您正在使用的服务器分离方面提供了更大的灵活性。如果您打算使用大量图像，我认为 s3 是一条可行的路线。如果您认为要使用的图像数量有限，那么服务器上的本地存储将是一个很好的实现（我认为）。

就您可以使用的工具而言，我会研究 PIL。[http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)**

# jquery - SlickGrid - 同一个应用程序上的多个版本

> ID：10408203
> 
> 赞同：0
> 
> 时间：2012-05-02T05:31:07.867
> 
> 标签：jquery, slickgrid

我在我的应用程序中使用[SlickGrid](https://github.com/mleibman/SlickGrid/wiki/_pages)插件。如果您还没有听说过，它是客户端数据网格管理**的**插件。我已经使用它近一年了，并在我的应用程序内的大量页面中实现了它。我现在想更新到最新版本，它具有更酷的功能，但可能会破坏我的应用程序。所以我想知道是否有一种方法可以在同一个应用程序上使用多个版本的插件来系统地替换旧版本，一个一个，而不会破坏它。

我应该澄清一下，它是一个单页应用程序。所以仅仅添加新版本并开始使用是行不通的 - 会吗？它是否有某种无冲突模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:54:02.517

我还没有尝试过，但是您应该能够通过更改 SlickGrid 源文件以使用不同的命名空间来实现这一点。

两次包含各种 SlickGrid 源文件，在必要时重命名旧文件以避免冲突。在每个旧文件中，更改命名空间声明，例如

改变

```
$.extend(true, window, {
    Slick: {
        Grid: SlickGrid
    }
}); 
```

至

```
$.extend(true, window, {
    Slick1: {
        Grid: SlickGrid
    }
}); 
```

然后您的网格实例化变为：

```
grid = new Slick1.Grid(... 
```

# regex - vim 搜索替换正则表达式

> ID：10408204
> 
> 赞同：11
> 
> 时间：2012-05-02T05:31:29.503
> 
> 标签：regex, vim, replace

我正在尝试替换所有出现的`hello(...)`by`hello[...]`

`%s/hello\((.*?)\)/hello\[$1\]/`我尝试过没有任何成功的事情

有什么帮助吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-02T05:36:43.840

那是 Perl 语法，而不是 Vim。在 Vim 正则表达式中，至少在默认情况下，括号匹配自己并且反斜杠括号捕获 - 与 Perl 相反。此外，Vim 不理解非贪婪修饰符`?`，并且捕获组是用`\`*n*插值的，而不是`$`*n*。尝试这个：

```
%s/hello(\([^)]*\))/hello[\1]/ 
```

或者，您可以使用`\v`("very magic") 修饰符使特殊字符和反斜杠的行为更像 Perl，尽管它不会让 Vim 理解`*?`或更改其插值语法：

```
%s/\vhello\(([^)]*)\)/hello[\1]/ 
```

另外，请注意，替换文本中的方括号不需要反斜杠 - 替换命令的右侧*不是*正则表达式，因此您不必担心大多数特殊字符一。几乎只有反斜杠本身是特殊的，可用于包含捕获组或自身的文字实例或分隔符。

# python - Python程序到网站应用程序

> ID：10408208
> 
> 赞同：2
> 
> 时间：2012-05-02T05:31:53.527
> 
> 标签：python, django, web, cgi, pyramid

我正在开展一个项目，该项目将用于图片和文本程序的 50mb python 分级间隔召回评级系统转换为基于网站的应用程序。（然后围绕它设计一个网站）它需要连接到数据库来经常存储用户信息，所以它需要在服务器端运行对吗？假设我什么都不知道，完成这个的最佳结构是什么？似乎有很多不同的选择，我感到迷茫。

我一直在使用 CGI 为原始 python 代码创建 Web UI。这甚至可以实施吗？

金字塔 / uWSGI / 塔 / 烧瓶怎么样

还是姜戈？（尽管我被告知不要在这个项目中使用它）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:49:07.877

好吧，可能很难给你一个好的建议，因为你的项目描述很模糊——到底什么是“50mb python 图片和文本程序的分级间隔召回评级系统”？:) - 但我会尝试概述您列出的选项之间的区别：

**Django**是一种集成解决方案——它包括模板系统、ORM、表单框架等等。

由于这些东西都紧密联系在一起，Django 提供了一些细节，例如内置管理界面、可插拔应用程序等。这将使传统网站的启动开发更容易，因为您不需要构建这些自己的事情。例如，要使用 Django 构建博客站点，您需要定义一个数据库模型、几个路由和几个视图，仅此而已 - 您可以使用内置管理界面添加和编辑博客条目并使用可插拔的认证模块。

但当然是有代价的——为了确保所有这些部分协同工作，Django 在某种程度上要求你使用 Django 提供的技术——即，你必须使用 Django ORM 定义你的模型并使用 Django 模板编写模板。您*可以*将不同的位交换为其他东西，但可以理解的是，它们不能很好地与框架的其余部分一起使用——即，您可以使用另一个 ORM，例如 SQLAlchemy，来访问数据库，但这样的模型不适用于 Django 的管理界面。

在某种程度上，Django 还期望数据库表的特定结构（即，它期望能够基于 Python 代码中定义的模型创建这些表），这将使现有数据库的工作变得更加困难。另外，我的理解是它*希望*您拥有一个 SQL 数据库。

因此，在我看来，Django 是构建“典型”Django 网站（它是为新闻网站构建的）的一个非常好的选择，它可以利用现有的可插入应用程序和其他 Django 功能。

**另一方面， Pyramid**不需要您使用任何特定的技术来访问数据库 - 事实上，它根本不需要您拥有数据库 - 您可以构建一个应用程序来处理存储在文件系统上的数据，在对象数据库，例如 ZODB 或一些分布式 NoSQL 存储。甚至可能是一些 XML 文件和一堆图像......你的想象力就是你的极限

使用 SQL 数据库时，它并不期望数据库具有一定的结构。还有，SQLAlchemy，推荐的 Pyramid 的 ORM，被认为比 Django ORM 更加灵活和强大

它不需要您使用任何特定的模板库或表单库，因此您可以选择最适合您需求的任何内容。

Pyramid 甚至不需要您使用路由映射，这是大多数 Web 框架的基石功能 - 除了路由映射 Pyramid 还支持 URL 遍历，这可能是处理分层数据结构的一种非常强大的方式。

虽然不要求您使用任何特定技术，但 Pyramid 确实为典型用例提供了一些合理的模板。

这种灵活性的代价是可能更难找到现有的“应用程序”，这些“应用程序”可以插入到您非常自定义的 Pyramid 网站中而无需任何更改 - 尽管 Pyramid 中出色的 WSGI 支持利用了这一点。

**Pylons**在前段时间与 repoze.bfg 合并后，现在称为 Pyramid。

**uWSGI**更多的是为 Pyramid 应用程序（或其他符合 WSGI 的应用程序）提供服务的应用程序/协议

**烧瓶**- 从未使用过它，也许其他人会给你一些概述。

所以，简而言之，Django 和 Pyramid 之间的选择归结为“我可以在我的网站上使用多少 Django 的内置功能”这个问题——因为如果你不打算使用 Django 的自动管理或大量使用第三方可插拔应用程序 - Pyramid 中的其他一切都更好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:05:23.860

如果应用程序需要与已经存在的数据库通信，那么 django 不会给你带来太多价值 IMO。因为除非 db 架构符合 django 的预期（自动递增 int 主键等），否则管理界面不适用于该部分，因此任何其他假定预期架构的 web 框架也是如此。

那么，sqlalchemy 是你最好的选择。它有一个 orm 层，但您不必使用它，仅使用查询接口就可以物有所值。

因此，就 webframeworks 而言，这将其范围缩小到任何可以使用 sqlalchemy 的东西。由于上述原因，除了 Django、Zope 和可能的 web2py 之外，其他的都不是。尽管对于 Zope 来说，它的价值在某种程度上源于它得到 zodb 的支持。但是 zodb 根本不会帮助您处理现有的数据库和数据。

因此，在剩下的 Web 框架中，我将使用的选择标准是其将请求路由到视图的能力。以及它与您的 url 生成策略的匹配程度。IMO，金字塔在这方面非常灵活。但你可能不需要那个。您可以使用烧瓶或瓶子来解决问题。甚至是直网布。

另一个不太重要的标准是模板引擎/语言，大多数框架将支持更流行的，例如 jinja2 等...

我个人的选择是金字塔，因为它在请求路由部门从超级简单到超级多毛都可以很好地扩展。但同样，根据您希望您的网址如何工作，您可能不需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T05:35:55.240

有人告诉我 pylons 非常好（较新的金字塔），但我个人使用 Django，对此我很满意。甚至不要尝试使用 CGI，因为这与我犯的错误相同 - 后来我发现更改所有 html 是一件很痛苦的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:10:13.490

Django 有一个命令 (./manage.py inspectdb) 可以帮助您制作当前数据库的初始模型。如果您决定重新设计数据库，这仍然可以更轻松地将数据移动到新模式中。就个人而言，我喜欢 Django，但其他的可能非常适合您的应用程序。

要与服务器进行通信，您可能会使用 AJAX。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T06:30:43.273

I've found Django too heavyweight for my needs.
I've had good success with [CherryPy, a minimalist Web Framework](http://www.cherrypy.org/)

# ruby - EventMachine 和一些 Ruby 语法

> ID：10408213
> 
> 赞同：0
> 
> 时间：2012-05-02T05:32:42.530
> 
> 标签：ruby, syntax, line, eventmachine

我试图更好地理解以下涉及 EventMachine 的代码行。努力学习 Ruby。

EventMachine.run 在这段代码中做了什么？

|chunk| 是什么意思？在这种情况下意味着什么？

另外，'while line'有什么作用？line 是 Ruby 语法吗？我似乎找不到任何与此相关的东西。

```
#create an HTTP request ob to URL above with user authorization
EventMachine.run do
  http = EventMachine::HttpRequest.new(url).get :head => { 'Authorization' => [ user, password ] }

# Initiate an empty string for the buffer
  buffer = ""

# Read the stream by line
  http.stream do |chunk|
    buffer += chunk
    while line = buffer.slice!(/.+\r?\n/) #cut each line at newline
      handle_tweet JSON.parse(line) #send each tweet object to handle_tweet method
    end

  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:47:24.327

您可以使用调试器。诸如 ruby​​-debug 之类的调试器的目的是让您在 Ruby 程序执行时查看它“内部”发生的情况。或者你可以使用记录器。Logger 提供了一个简单但复杂的日志记录实用程序，您可以使用它来显示输出消息。

# .net - VB.NET 泛型

> ID：10408219
> 
> 赞同：1
> 
> 时间：2012-05-02T05:33:03.743
> 
> 标签：.net, vb.net, generics

我有一个功能如下：

```
Function foo(ByVal c As CustomType, ByValue str as String) As Object
   Dim o as Object
   Select Case c.TypeName
     Case "System.String"
       If str = String.Empty Then
         o = DBNull.Value
       Else
         o = value
       End If
     Case "System.Int64"
       Try
         o = Long.Parse(value, Globalization.NumberStyles.Any)
       Catch
         o = DBNull.Value
       End Try
     Case "System.Double"
       Try
         o = Double.Parse(value, Globalization.NumberStyles.Any)
       Catch
         o = DBNull.Value
       End Try
     Case "System.Int32"
       Try
         o = Int32.Parse(value, Globalization.NumberStyles.Any)
       Catch
         o = DBNull.Value
       End Try
     Case "System.DateTime"
       Try
         o = DateTime.Parse(value)
       Catch
         o = DBNull.Value
       End Try
   Return o
End Function 
```

这个功能让我想写一个通用版本。由于像 C++ 这样的 .NET 中不允许部分专业化（如果我在这里错了，请纠正我），我可以通过哪些方式使用泛型的任何特性。我做了一个尴尬的尝试，但失败了：

```
Function foo(Of T)(...) as Object
  Dim o As Object
  Try
     o = T.Parse(...) 'This doesnt work
  Catch
     o = DBNull.Value  
  End Try  
  ...
End Function
'Add functions for handling String and DateTime maybe? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:40:48.977

确实，您不能使用`T.whatever`泛型；只能采用（基于 的已知约束）的*实例*方法。`T``T`

也许是这样的：

```
// return object since SQL parameter packing
static object Parse<T>(string value)
{
    if (string.IsNullOrEmpty(value)) return DBNull.Value; // for SQL parameter
    return TypeDescriptor.GetConverter(typeof(T)).ConvertFromString(value);
} 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:50:51.350

您可以使用反射以某种方式简化代码：

```
If c.Type.Primitive Then
   o = c.Type.GetMethod("Parse").Invoke(Nothing, New Object() {value, Globalization.NumberStyles.Any}) 
```

# c# - wmi 无效查询错误

> ID：10408220
> 
> 赞同：2
> 
> 时间：2012-05-02T05:33:15.570
> 
> 标签：c#, .net, wmi, wql

我正在尝试获取 c:\windows\ntds\ 目录中存在的这个 dsa 文件的大小。

我在这里遇到错误，我不知道为什么。错误是“无效查询”。

当我使用不同的 WMI 类时，我似乎经常遇到这个错误。

**我不知道为什么会出现这个错误以及如何解决这个问题？**

**下面的代码中是否有任何错误，如何解决？**

**为什么我们会得到这个 Invalid Query 错误，它的来源是什么？它的内部异常将始终为空？**

```
private int getDatabaseFileSize(string DSADatabaseFile, string machineName)
        {
            string scope = @"\\" + machineName + @"\root\CIMV2";
            string query = string.Format("Select FileSize from CIM_DataFile WHERE Name = '{0}'", DSADatabaseFile);
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
            ManagementObjectCollection collection = searcher.Get();
            foreach (ManagementObject mobj in searcher.Get())
            {
                Console.WriteLine("File Size : " + mobj["FileSize"]);
            }
            return 0;
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:51:31.037

我猜，但由于您的查询在语法上是正确的并且使用了正确的字段和对象名称，我认为这是因为您将字符串 "C:\Windows\NTDS\ntds.dit" 传递为`DSADatabaseFile`. 这对于 C# 中的“典型”使用是正确的，比如在使用`Path`类时，等等，但不是在这里。

您需要将带有两个反斜杠的文件名传递给 WMI。但是，由于 C# 已经要求，您需要有效地通过四个：

```
 getDatabaseFileSize("C:\\\\Windows\\\\NTDS\\\\ntds.dit", machine) 
```

或使用逐字字符串文字：

```
 getDatabaseFileSize(@"C:\\Windows\\NTDS\\ntds.dit", machine); 
```

**更新**这里是一个完整的例子：

```
// Compile with: csc foo.cs /r:System.Management.dll

using System;
using System.Management;

namespace Foo
{
    public class Program
    {
        private int getDatabaseFileSize(string DSADatabaseFile, string machineName)
        {
            string scope = @"\\" + machineName + @"\root\CIMV2";
            string query = string.Format("Select FileSize from CIM_DataFile WHERE Name = '{0}'", DSADatabaseFile);
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
            ManagementObjectCollection collection = searcher.Get();
            foreach (ManagementObject mobj in searcher.Get())
            {
                Console.WriteLine("File Size : " + mobj["FileSize"]);
            }
            return 0;
        }

        public static void Main(string[] args)
        {
            var p = new Program();

            // These work
            p.getDatabaseFileSize("C:/boot.ini", ".");
            p.getDatabaseFileSize(@"C:\\boot.ini", ".");
            p.getDatabaseFileSize("C:\\\\boot.ini", ".");

            // These fail
            try {
                p.getDatabaseFileSize("C:\\boot.ini", ".");
            } catch (ManagementException ex) { 
                Console.WriteLine("Failed: {0}", ex.ErrorCode);
            }
            try {
                p.getDatabaseFileSize(@"C:\boot.ini", ".");
            } catch (ManagementException ex) { 
                Console.WriteLine("Failed: {0}", ex.ErrorCode);
            }
        }
    }
} 
```

编译：

（预期的）输出是：

```
File Size : 313
File Size : 313
Failed: InvalidQuery.
Failed: InvalidQuery. 
```

**更新**似乎已经有一个[相关](https://stackoverflow.com/a/972232/21567)的问题（提到需要`\\\\`代替`\\`）。

# android - 如何在 Android/AndEngine 中变形两个图像

> ID：10408227
> 
> 赞同：2
> 
> 时间：2012-05-02T05:33:56.600
> 
> 标签：android, image, graphics, andengine, morphing

我想知道他们的 Andengine 的任何子库是否可以变形两个不同的图像？还是在安卓中？我一直在寻找它，但我什么也没找到。帮帮我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:40:20.233

没有什么原生的andengine可以做到这一点。

要变形图像，您需要一个位图操作库来执行此操作： [javamorph](http://code.google.com/p/javamorph/) 例如这个。

然后在 andengine 中，为 Sprite 分配纹理，并且随着位图的更新，您将需要更新纹理区域。

或者，渲染变形帧并制作动画Spritetexture。

# jquery - 用jquery选择文本行和span标签

> ID：10408230
> 
> 赞同：2
> 
> 时间：2012-05-02T05:34:13.423
> 
> 标签：jquery

## 

```
<br/>
<a href="#">News</a>
<br/>
This is the first line
<br/>
This is the second line
<br/>
This is the third line 
```

> 有什么方法可以用标签包装每个文本行！文本的内容不是固定的，它会动态出现。如果我使用 jquery :contains 选择器，动态内容行就没有办法了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:45:35.973

您需要将 HTML 放在某个容器中并应用以下 jQuery。我使用了 div id="data"。
这是工作代码：

```
<div id="data">
    <br/>
    <a href="#">News</a>
    <br/>
    This is the first line
    <br/>
    This is the second line
    <br/>
    This is the third line
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    var data = $('#data').html();
    var sbstr = data.split('<br>');

    var new_data = '';
    // wrap each line with a tag, you can use 'a', 'li' or any other tag.
    for(x in sbstr){
        new_data += '<a href="#">'+sbstr[x]+'</a><br>';
    }

    //replace old data with new one
    $('#data').html(new_data);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:39:44.093

```
<div id="contents">
    <br/>
    <a href="#">News</a>
    <br/>
    This is the first line
    <br/>
    This is the second line
    <br/>
    This is the third line
</div>

$('#contents').contents().remove('br').filter(function() {
    var node = $(this);
    if(node.context.nodeType == 3 && node.context.length != 1) {
      node = node.wrap('<div/>');
    }
    return node;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:57:32.000

假设你有一个 id = test 的包装器：

```
var test = $('#test');
var temp = test.html().split('<br>');
var insert = "";

$.each(temp, function(index) {
   insert += '<div class="wrap">' + this + '</div>';       
});
test.html(insert); 
```

这里的例子：http: [//jsfiddle.net/GMJxG/1/](http://jsfiddle.net/GMJxG/1/)

编辑：@Arvind07 打败了我！我将把它留在这里作为示例。

# iphone - 如何通过按下 iPhone 中的按钮将行/单元格动态添加到 UITableView

> ID：10408232
> 
> 赞同：7
> 
> 时间：2012-05-02T05:34:20.860
> 
> 标签：iphone, objective-c, uitableview

最初我有一个只有一个添加按钮的表格视图。

当用户按下此按钮时，我需要增加单元格计数并按如下方式添加单元格

如何编写行数以及如何通过单击添加按钮添加新行

//行数

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return **????** ;
} 
```

// 单元格/行上的内容

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
       ??????
} 
```

***// ### 添加新行.. ###***

```
-(IBAction)myAction:(id)sender
{
    ???????? ;
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T05:51:28.360

`UITableView`具有插入行或节的属性。见[苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/cl/UITableView)

这方面有很多教程。有 2 个常用来添加/删除行/部分。

```
insertRowsAtIndexPaths:withRowAnimation:
deleteRowsAtIndexPaths:withRowAnimation: 
```

我已经发布了类似的答案如何使用它： [Hiding the table view cells with switch ON/OFF in iPhone](https://stackoverflow.com/questions/9339186/hiding-the-table-view-cells-with-switch-on-off-in-iphone/9340926#9340926)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T06:02:26.110

在您的应用程序中，当您在 btn 中执行操作时，您必须向 Array 添加值。

例如，在您的表格视图中，您在 cell.textLABEL.text 中显示 NSString。这些字符串在 NSMutableArray 中。

现在当 buttonAction 被调用时

在 我的**行动中**

```
{
    NSString *newString =@"NEW CELL";

    [tableArray addObject:newString];
    [tableView reloadData];
} 
```

在您的应用程序中尝试有关您的模态的此逻辑。

我希望这个逻辑对你有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-27T18:27:09.113

每次要添加或删除行时重新加载表视图会给应用程序的用户带来糟糕的体验。尽管它不是执行此任务的有效方式，但它也有一些负面影响 - 重新加载后选定的行不会保持选中状态，并且更改不会动画。

`UITableView`具有为动态更改表视图内容而创建的方法。这些是：

```
insertRowsAtIndexPaths:withRowAnimation:
moveRowAtIndexPath:toIndexPath:
deleteRowsAtIndexPaths:withRowAnimation: 
```

`reloadData`请注意，这些方法允许您指定执行指定操作时将使用的动画类型 - 当您用于修改表格视图的内容时，您无法实现这种行为。

此外，您甚至可以使用表格视图的附加方法组合多个表格视图操作（这不是必需的）：

开始更新结束更新

只需将您想要执行的操作包装到调用`beginUpdates`和`endUpdates`方法中，表格视图将为在调用之间请求的所有操作创建*一个*`beginUpdates`动画，`endUpdates`以便整个过渡看起来比由几个单独的动画创建的效果更好。

```
[self.tableView beginUpdates]
//calls to insert/move and delete methods   
[self.tableView endUpdates] 
```

保持数据源状态与`UITableView`. 出于这个原因，您必须确保当表视图开始执行请求的操作时，其数据源将返回正确的值。

```
[self.tableView beginUpdates]
//calls to insert/move and delete methods   
//operations on our data source so that its
//state is consistent with state of the table view
[self.tableView endUpdates] 
```

表视图何时开始执行操作？这取决于操作是否在`beginUpdates`和`endUpdates`方法定义的动画块中。`endUpdates`如果是，则表视图在方法调用后开始执行操作。否则，表视图在调用插入/移动或删除方法后立即执行操作。

当您使用`beginUpdates`和`endUpdates`方法在表视图上执行操作时，您必须知道在这种情况下，表视图“批处理”请求的操作并以特定顺序执行它们，这与您在表视图上进行的调用顺序不必相同对象（[Apple 关于此主题的文档](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html#//apple_ref/doc/uid/TP40007451-CH10-SW9)）。

要记住的最重要的事情是删除所有操作总是在所有插入操作之前执行。此外，当插入操作按升序执行（索引 1、2、3 的操作）时，删除操作似乎按降序执行（索引 3、2、1 的操作）。请记住，这*对于*保持数据源状态与表视图保持一致至关重要。

花一些时间分析对数据源和表视图的操作顺序，如下面的示例所示。

最后一个例子：

```
//initial state of the data source
self.numbers = [@[@(0), @(1), @(2), @(3), @(4), @(5), @(6)] mutableCopy];
//
//...
//

NSArray indexPathsToRemove = @[[NSIndexPath indexPathForRow:3 section:0].
                               [NSIndexPath indexPathForRow:0 section:0];
NSArray indexPathsToAdd = @[[NSIndexPath indexPathForRow:6 section:0],
                            [NSIndexPath indexPathForRow:5 section:0]];

[self.tableView beginUpdates];

[self.numbers removeObjectAtIndex:3];
[self.numbers removeObjectAtIndex:0];

[self.numbers insertObject:@(10) atIndex:4];
[self.numbers insertObject:@(11) atIndex:5];

[self.tableView insertRowsAtIndexPaths:indexPathsToAdd withRowAnimation:UITableViewRowAnimationAutomatic];
[self.tableView deleteRowsAtIndexPaths:indexPathsToRemove withRowAnimation:UITableViewRowAnimationAutomatic];

[self.tableView endUpdates];
//final state of the data source ('numbers') - 1, 2, 4, 5, 6, 10, 11 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-10T21:20:38.273

这里还有其他正确的答案（您应该阅读它们，因为它们更深入），但是在阅读了我能找到的所有解决方案后，我为此苦苦挣扎了一个多星期，因为没有任何（我发现！）全面的例子。

这样做的规则： 1\. 必须**直接**对包含您在`UITableView`. `UITableViewCell`如果您将方法中的某个值设置`tableView:cellForRowAtIndexPath:`为等于 中的值`self.expandableArray`，则**还**必须进行更改`self.expandableArray`才能使这些方法起作用。

1.  更改 tableView 中显示的项目数组***必须在两者之间*** `[tableView beginUpdates]`进行`[tableView endUpdates]`
2.  indexPaths 数组的计数必须等于您添加到 tableView 的其他项目的计数（我认为这很明显，但指出这一点并没有什么坏处）

这是一个非常简单的示例，可以自行运行。

```
 @interface MyTableViewController ()
@property (nonatomic, strong) NSMutableArray *expandableArray;
@property (nonatomic, strong) NSMutableArray *indexPaths;
@property (nonatomic, strong) UITableView *myTableView;
@end

@implementation MyTableViewController

- (void)viewDidLoad
{
    [self setupArray];
}

- (void)setupArray
{
    self.expandableArray = @[@"One", @"Two", @"Three", @"Four", @"Five"].mutableCopy;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.expandableArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //here you should create a cell that displays information from self.expandableArray, and return it
}

//call this method if your button/cell/whatever is tapped
- (void)didTapTriggerToChangeTableView
{
    if (/*some condition occurs that makes you want to expand the tableView*/) {
        [self expandArray]
    }else if (/*some other condition occurs that makes you want to retract the tableView*/){
        [self retractArray]
    }
}

//this example adds 1 item
- (void)expandArray
{
    //create an array of indexPaths
    self.indexPaths = [[NSMutableArray alloc] init];
    for (int i = theFirstIndexWhereYouWantToInsertYourAdditionalCells; i < theTotalNumberOfAdditionalCellsToInsert + theFirstIndexWhereYouWantToInsertYourAdditionalCells; i++) {
        [self.indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
    }

    //modify your array AND call insertRowsAtIndexPaths:withRowAnimation: INBETWEEN beginUpdates and endUpdates
    [self.myTableView beginUpdates];
    //HERE IS WHERE YOU NEED TO ALTER self.expandableArray to have the additional/new data values, eg:
    [self.expandableArray addObject:@"Six"];
    [self.myTableView insertRowsAtIndexPaths:self.indexPaths withRowAnimation:(UITableViewRowAnimationFade)];  //or a rowAnimation of your choice

    [self.myTableView endUpdates];
}

//this example removes all but the first 3 items
- (void)retractArray
{
    NSRange range;
    range.location = 3;
    range.length = self.expandableArray.count - 3;

    //modify your array AND call insertRowsAtIndexPaths:withRowAnimation: INBETWEEN beginUpdates and endUpdates
    [self.myTableView beginUpdates];
    [self.expandableArray removeObjectsInRange:range];
    [self.myTableView deleteRowsAtIndexPaths:self.indexPaths withRowAnimation:UITableViewRowAnimationFade];  //or a rowAnimation of your choice
    [self.myTableView endUpdates];
}

@end 
```

我希望这可以节省很多时间和头痛。如果你这样做，你不需要重新加载整个 tableView 来更新它，你可以为它选择一个动画。免费代码，不要敲它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T06:03:03.240

您可以在数组中添加对象并在单击按钮时重新加载您的表格视图。

```
[array addobject:@""];
[tableview reloaddata]; 
```

# c++ - 如何从两个函数中获得总数？

> ID：10408239
> 
> 赞同：0
> 
> 时间：2012-05-02T05:34:59.367
> 
> 标签：c++, function, loops

我正在做一个项目，并编写了确定一天花费多少钱的代码 - 唯一的问题是我需要做到这一点，以便输出第 1 天的总数，然后第 2 天开始（只有第 2 天输出总数），然后第 3 天开始（仅输出第 2 天的总数），然后在所有 3 天结束后，输出 3 天的总数。我将我的代码粘贴进去，但由于某种原因，格式被弄乱了。谢谢！

```
void drillDay ()
{
    int dayCounter = 1;
    while (dayCounter > 0)
    {
        //Enlisted Soldiers, total number of Soldiers who attend
        int privatesRankOneTotal = 0;
        int privatesRankTwoTotal = 0;
        int privatesRankThreeTotal = 0;
        int specialistsCorporalsTotal = 0;
        int sergeantsTotal = 0;
        int staffSergeantsTotal = 0;
        int pltSergeantsTotal = 0;
        int masterSergeantsTotal = 0;

    //Warrant Officers, total number of Warrant Officers who attend
    int chiefWarrantRankOneTotal = 0;
    int chiefWarrantRankTwoTotal = 0;
    int chiefWarrantRankThreeTotal = 0;

    //Officers, total number of officers who attend
    int ltRankTwoTotal = 0;
    int ltRankOneTotal = 0;
    int captainsTotal = 0;

    //How much each soldier is paid per day, based on rank.
    double pvtOnePay = 99.40;
    double pvtTwoPay = 111.42;
    double pfcPay = 117.16;
    double SpcCplPay = 136.42;
    double sgtPay = 165.84;
    double ssgPay = 229.12;
    double sfcPay = 239.32;
    double msgPay = 309.44;

    double cwoOnePay = 233.40;
    double cwoTwoPay = 274.92;
    double cwoThreePay = 336.04;

    double ltTwoPay = 188.56;
    double ltOnePay = 294.96;
    double cptPay = 335.40;

    cout<<endl<<"Enter amount of enlisted soldiers:"<<endl<<endl;

    cout<<"How many Privates (E-1) / (PVT) are attending drill today?  "<<endl;
    cin>>privatesRankOneTotal;
    cout<<"How many Privates (E-2) / (PV2) are attending drill today?  "<<endl;
    cin>>privatesRankTwoTotal;
    cout<<"How many Privates (E-3) / (PFC) are attending drill today?  "<<endl;
    cin>>privatesRankThreeTotal;
    cout<<"How many Specialists / Corporals (E-4) / (SPC / CPL) are attending drill today? ";
    cin>>specialistsCorporalsTotal;
    cout<<"How many Sergeants (E-5) / (SGT) are attending drill today?  "<<endl;
    cin>>sergeantsTotal;
    cout<<"How many Staff Sergeants (E-6) / (SSG) are attending drill today?  "<<endl;
    cin>>staffSergeantsTotal;
    cout<<"How many Platoon Sergeants (E-7) / (SFC) are attending drill today?  "<<endl;
    cin>>pltSergeantsTotal;
    cout<<"How many soldiers with the paygrade of (E-8) are attending drill today?  "<<endl;
    cin>>masterSergeantsTotal;

    cout<<endl<<endl<<endl;

    cout<<"Enter amount of Warrant Officers:"<<endl<<endl;

    cout<<"How many Warrant Officers (W-1) / (WO1) are attending drill today?  "<<endl;
    cin>>chiefWarrantRankOneTotal;
    cout<<"How many Warrant Officers  (W-2) / (CW2) are attending drill today?  "<<endl;
    cin>>chiefWarrantRankTwoTotal;
    cout<<"How many Warrant Officers (W-3) / (CW3) are attending drill today?  "<<endl;
    cin>>chiefWarrantRankThreeTotal;

    cout<<endl<<endl<<endl;

    cout<<"Enter amount of Officers:"<<endl<<endl;

    cout<<"How many 2nd Lieutenants (O-1) / (2LT) are attending drill today?  "<<endl;
    cin>>ltRankOneTotal;
    cout<<"How many 1st Lieutenants  (O-2) / (1LT) are attending drill today?  "<<endl;
    cin>>ltRankTwoTotal;
    cout<<"How many Officers with paygrade (O-3) / Rank (CPT) are attending drill today?  "<<endl;
    cin>>captainsTotal;
    cout<<endl<<endl<<endl;

    int totalEnlistedSoldiers = privatesRankOneTotal + privatesRankTwoTotal + privatesRankThreeTotal + specialistsCorporalsTotal + sergeantsTotal + staffSergeantsTotal + pltSergeantsTotal + masterSergeantsTotal;
    cout<<"Total enlisted soldiers at drill today:  "<<totalEnlistedSoldiers<<endl<<endl;

    int totalWarrantOfficers = chiefWarrantRankOneTotal + chiefWarrantRankTwoTotal + chiefWarrantRankThreeTotal;
    cout<<"Total Warrant Officers at drill today:  "<<totalWarrantOfficers<<endl<<endl;

    int totalOfficers = ltRankOneTotal + ltRankTwoTotal + captainsTotal;
    cout<<"Total Officers at drill today:  "<<totalOfficers<<endl<<endl;

    int totalSoldiers = totalEnlistedSoldiers + totalWarrantOfficers + totalOfficers;
    cout<<"Total soldiers (Enlisted, Warrant Officers, and Officers) at drill today:  "<<totalSoldiers<<endl;

    double privateOneTotalPay = privatesRankOneTotal*pvtOnePay;
    double privateTwoTotalPay = privatesRankTwoTotal*pvtTwoPay;
    double privateThreeTotalPay = privatesRankThreeTotal*pfcPay;
    double spcCplTotalPay = specialistsCorporalsTotal*SpcCplPay;
    double sgtTotalPay = sergeantsTotal*sgtPay;
    double ssgTotalPay = staffSergeantsTotal*ssgPay;
    double sfcTotalPay = pltSergeantsTotal*sfcPay;
    double msgTotalPay = masterSergeantsTotal*msgPay;

    double cwoOneTotalPay = chiefWarrantRankOneTotal*cwoOnePay;
    double cwoTwoTotalPay = chiefWarrantRankTwoTotal*cwoTwoPay;
    double cwoThreeTotalPay = chiefWarrantRankThreeTotal*cwoThreePay;

    double ltOneTotalPay = ltRankTwoTotal*ltTwoPay;
    double ltTwoTotalPay = ltRankOneTotal*ltOnePay;
    double cptTotalPay = captainsTotal*cptPay;

    double totalSoldiersDrillPay = privateOneTotalPay + privateTwoTotalPay + privateThreeTotalPay + spcCplTotalPay + sgtTotalPay + ssgTotalPay + sfcTotalPay + msgTotalPay + cwoOnePay + cwoTwoPay + cwoThreePay + ltOnePay + ltTwoPay + cptPay;
    cout<<endl<<endl<<endl;

    double costOfLunch = 14.99;
    int soldiersProvidedLunch = 0;
    int loopCounter = 1;

    cout<<"How many soldiers were provided lunch today?"<<endl;
    cin>>soldiersProvidedLunch;
    cout<<endl;

    double totalLunchCost = soldiersProvidedLunch*costOfLunch;

    while (loopCounter == 1)
    {
        if (soldiersProvidedLunch <= totalSoldiers)
        {
            cout<<endl<<soldiersProvidedLunch<<" were provided lunch, the total cost of lunch today will be $"<<setiosflags(ios::fixed) << setprecision(2)<<totalLunchCost;
            loopCounter --;
        }
        else
        {
            cout<<totalSoldiers<<" soldiers were at drill today, there cannot be more."<<endl<<endl;
            cout<<"Enter the number of soldiers that were provided lunch today."<<endl;
            cin>>soldiersProvidedLunch;
        }
    }

    cout<<endl<<endl<<endl;

    double gasPrice = 3.87;
    double gallonsPumped = 0;

    cout<<"How many gallons of gasoline were purchased today:"<<endl;
    cin>>gallonsPumped;
    double finalGasPrice = gasPrice*gallonsPumped;

    cout<<endl;

    if (gallonsPumped >= 1)
    {
        cout<<endl<<"The total cost for gasoline today was $"<<setiosflags(ios::fixed) << setprecision(2) << finalGasPrice<<"."<<endl;
    }
    else
    {
        cout<<"No money spent on gasoline today.";
    }

    double dayDrillCost = finalGasPrice+totalLunchCost+totalSoldiersDrillPay;

    cout<<endl<<endl<<endl<<"Totals for today: "<<endl<<"**************************************"<<endl;
    cout<<"Total pay for soldiers present: $"<<setiosflags(ios::fixed) << setprecision(2)<<totalSoldiersDrillPay<<endl;
    cout<<"Total amount of money spent on lunch: $"<<setiosflags(ios::fixed) << setprecision(2)<<totalLunchCost<<endl;
    cout<<"Total amount of money spent on gas: $"<<setiosflags(ios::fixed) << setprecision(2)<<finalGasPrice<<endl<<"**************************************"<<endl;
    cout<<"Cost of drill today: $"<<setiosflags(ios::fixed) << setprecision(2)<<dayDrillCost<<endl;
    dayCounter --;
}
cout<<"Drill completed"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:53:22.247

这是一个简单的循环，将单个计数器递增 3 次。从这里，你可以看到锄头来概括你所有的柜台。

```
int someCounter = 0;

for (int day=0; day<3; ++day) { // loop three times

  // do your cin input here
  int tmp;
  cin >> tmp;
  someCounter += tmp; // increment running total

}

// print the total 
```

如果你有很多计数器，你可以考虑创建一个`struct`或`class`持有这些，`operator+=`为那个类定义，并为那个类覆盖`istream operator>>`，但我感觉这可能超出了你的作业的预期。无论如何，关于 SO 有很多问题解释了如何做到这一点。

# php - CodeIgniter Phil Sturgeon 的模板库错误

> ID：10408240
> 
> 赞同：0
> 
> 时间：2012-05-02T05:35:03.477
> 
> 标签：php, codeigniter, templates, module, themes

我正在使用来自 Phil Sturgeon 的模板库。我也使用模块。

模块博客仅在我添加时有效

```
$this->template->set_theme('nvc');
$this->template->set_layout('theme'); 
```

但我不想要那个，我想在核心文件中设置它。我应该如何解决这个问题？

模块欢迎工作完美

```
class Welcome extends NVC_Controller {

function index()
{
    $this->template->build('theme');
}
} 
```

但是模块博客给出了一个错误（模板）：

> 无法加载请求的文件：default.php

```
class Blog extends NVC_Controller {

var $num = 10;

function __construct()
{
    $this->load->model('blog_model', 'blog');
}

function index()
{
    $data["result"] = $this->blog->get_all_posts($this->num);
    $this->template->build('blog', $data);
}

} 
```

核心/NVC_Controller.php

```
class NVC_Controller extends MX_Controller {
function __construct(){ 
    if(nvc_site_open()){                
        $this->template->set_theme('nvc');
        $this->template->set_layout('theme');
    } else {
        show_error("De site is momenteel gesloten.");
    }
}
} 
```

出了什么问题？将配置布局设置为“主题”也不起作用。模板存储在`application/themes/nvc/views/layouts/theme.php`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:33:05.640

CI 安装中的一个文件正在尝试调用给定位置中不存在的 default.php。您能否调查一下它是哪个文件并在此处发布该代码？

# javascript - 使用 if else 语句 javascript 打开我的链接的文本框

> ID：10408242
> 
> 赞同：-1
> 
> 时间：2012-05-02T05:35:32.690
> 
> 标签：javascript

我想要完全相同的东西，但否则它将打开我的其他 .htm 文件的链接。整个代码都很好，但是当我在 textfeild 中输入内容时，我希望链接出现在警报或主窗口中。

```
<script Language="JavaScript">
<!--
    function Blank_TextField_Validator() {
        // Check the value of the element named text_name from the form named text_form
        if (text_form.text_name.value == "") {
            // If null display and alert box
            alert("Please fill in the text field.");
            // Place the cursor on the field for revision
            text_form.text_name.focus();
            // return false to stop further processing
            return (false);
        }
        // If text_name is not null continue processing
        return (true);
    }
-->
</script>
<form name="text_form" method="get" action="#" onsubmit="return Blank_TextField_Validator()">
    <input type="text" name="text_name" >
    <input type="submit" value="Submit">
</form>​​​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:47:58.510

> 但在其他情况下，它将打开我的其他 .htm 文件的链接。

“在其他情况下”您的意思是当表单提交返回true时打开链接？如果是这样，只需将链接放在表单的`action`属性中，而不是`#`.

> 但是当我在 textfeild 中输入内容时，我希望链接出现在警报或主窗口中。

如果要显示显示链接的消息，`alert('www.example.com');`请在`// If text_name is not null continue processing`.

* * *

**编辑**

我调整了你的 JS 函数：

```
<script Language="JavaScript">
<!--
function Blank_TextField_Validator() {
    // Check the value of the element named text_name from the form named text_form
    if (text_form.text_name.value == "") {
        // If null display and alert box
        alert("Please fill in the text field.");
        // Place the cursor on the field for revision
        text_form.text_name.focus();
        // return false to stop further processing
        return (false);
    }
    // If text_name is not null continue processing
    if (text_form.text_name.value == "project")
        window.open('project.htm');
    else if (text_form.text_name.value == "under")
        window.open('underconstruction.htm');
    else
        alert("Invalid keyword!");
    return (true);
}
-->
</script> 
```

# c - statfs 显示所有路径名的相同输出

> ID：10408246
> 
> 赞同：1
> 
> 时间：2012-05-02T05:36:01.530
> 
> 标签：c, linux

任何人都可以找出这段代码中的问题。问题是它为所有路径名显示相同的输出，即使它们具有不同的内容、不同的文件。

```
#include<stdio.h>  
#include<sys/stat.h>
#include<unistd.h>  
#include<sys/types.h>
#include<sys/vfs.h>
int main(int argc,char *argv[])  
{
    struct statfs sb;
    if((statfs(argv[1],&sb))==0)
    {
            printf("optimal transfer blk size is %d\n",sb.f_bsize);
            printf("total data blocks are %d\n",sb.f_blocks);
            printf("free blocks in fs are %d\n",sb.f_bfree);
            printf("total file nodes in fs are %d\n",sb.f_files);
            printf("free file nodes in fs are %d\n",sb.f_ffree);
    }
}

[testuser@hdchshocms6344 ex4]$ ./a.out /home/testuser
optimal transfer blk size is 4096  
total data blocks are 8819390
free blocks in fs are 6771045  
total file nodes in fs are 2240224  
free file nodes in fs are 1927385 

[testuser@hdchshocms6344 ex4]$ ./a.out /home/testuser/harish
optimal transfer blk size is 4096
total data blocks are 8819390
free blocks in fs are 6771034
total file nodes in fs are 2240224
free file nodes in fs are 1927386 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:39:54.353

`statfs`提供已安装*文件系统*的信息，而不是目录。除非`/home/testuser/harish`是完全不同的文件系统（即您已经在该位置安装了一个分区），否则您会得到与`/home/testuser`.

# c - 使用基数排序对日期进行排序

> ID：10408248
> 
> 赞同：0
> 
> 时间：2012-05-02T05:36:36.977
> 
> 标签：c

我有一个给定的日期字符串数组，格式为`dd/mm/yyyy`.

我想用基数排序按月和年对日期进行升序排序，但我不知道如何排序，因为最后它会根据最大的月份数排序

例如，我有以下数组： 16/04/2012 01/05/2013 01/02/2012 10/11/2012 01/12/2012

通常排序后的结果是： 01/02/2012 16/04/2012 01/05/2013 10/11/2012 01/12/2012

而我想要的是： 01/02/2012 16/04/2012 10/11/2012 01/12/2012 01/05/2013 首先是 2012 年，然后是 2013 年

我还没有编写代码，因为我不知道算法是如何工作的，我必须**只使用 1 个基数排序**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:50:25.113

您将需要应用基数排序两次，首先在月份，然后在年份。如果您只使用一次基数排序，则必须按年份排序，但同一年内的月份将不会被排序。也许您可以对一年内的月份应用不同的算法，或者根本不使用基数排序。您只能排序一次是否有特殊原因？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:13:06.053

考虑不要在您拥有的表示上对日期进行排序，而是在单独的排序键上进行排序。例如，为日期 01/02/2012 创建排序键 20120201。现在数字按从最高到最低有效的顺序排列，您可以将排序键视为数字并对它们应用基数排序。

如果您愿意，您不必显式创建排序键，但是您必须修改为一轮基数排序选择数字的代码以强制执行正确的顺序。

# c# - .Net Excel 插件，将设置保存到 excel 属性

> ID：10408255
> 
> 赞同：0
> 
> 时间：2012-05-02T05:37:14.110
> 
> 标签：c#, excel, excel-interop

我需要开发一个 .NET 插件来表现出色。其中一项要求是保存一些设置。此设置应在用户关闭 excel 后再次显示，并显示用户的最后一次输入。

我有什么选择这样做？Excel 是否有某种我可以使用的用户设置表？我试图避免创建自己的文件或设置来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:12:47.137

如果您需要保存不属于电子表格的内容，您可以使用[应用程序和用户设置。](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)

# c++ - 文件可以打开但不返回任何内容？

> ID：10408260
> 
> 赞同：1
> 
> 时间：2012-05-02T05:38:01.277
> 
> 标签：c++, text-files, ifstream, getline

我在尝试从 .txt 文件中获取行时遇到问题。我在另一段代码和文档中使用了类似的算法，似乎没有问题（= 所有行都已打印）。但是，当我尝试使用 getline （像往常一样）做同样的事情时，我得到了我的字符串 line =“”。我的行不是空的，我有一个预先测试来检查文件是否打开，它确实打开了。下面是我程序中的一个函数。谁能提供一些帮助？谢谢！

我正在尝试运行案例“A”

```
 void Database::LoginMenu(string code)
  {
    cout << endl;
    cout << "Thank You for Login In, Would You Like To..." << endl;
    cout << "====================================================" << endl;
    cout << "A. View your registration information" << endl;
    cout << "B. Search for others" << endl;
    cout << "C. Search for Upcoming" << endl;
    cout << "D. Enter the Database" << endl;

    char choice, YN;

    cout << endl;
    cout << "Please choose an option: ";
    cin >> choice;

    switch(choice)
    {
    case 'A':
        {
            ifstream myfile("RegistrationInfo.txt");
            string line;
            if(myfile.is_open())
            {   
                while(!myfile.eof())
                {
                    getline(cin, line);

                    if(line[5] == ':')
                    {
                        line = line.substr(7, line.size());
                    }
                    if(line == code)
                    {
                        while(!line.empty())
                        {
                            cout << line << endl;
                        }
                    }
                }
            }   
            cout << "Would you like to return to the menu? (Y/N)";
            cin >> YN;      

            if(YN == 'Y')
            {
                LoginMenu(code);
            }

            myfile.close();
        }
        break;
    case 'B':
        {
            ifstream filein("RegistrationInfo.txt");
            string temp, YN, enteredInfo;
            int n = 0;

            cout << "Who do you wish to search for? :";
            cin >> enteredInfo;

            while(!filein.eof())
            {
                getline(cin, temp);
            }
        }
        break;
    case 'C': upcomingComps();
        break;
    case 'D': DatabaseMenu();
        break;
    }
  } 
```

这是我的txt文件中的几行。

*   C代码：abd50896
*   姓名：汤姆穆伦妮可拉伯格
*   Compt: 罗格斯舞蹈运动 2012
*   级别：新人
*   舞蹈：探戈华尔兹快步伦巴ChaCha Jive

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:41:55.360

建议调用使用 myfile 作为第一个参数，而不是 cin -- `getline(myfile, line)`-- 因为 cin 代表标准输入，而不是您打开的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:45:47.247

最明显的事情是您打开文件但您正在从 cin 读取。尝试将 cin 更改为 myfile。

# android - How to take photo from camera and add photo gallery in android application?

> ID：10408263
> 
> 赞同：0
> 
> 时间：2012-05-02T05:38:12.350
> 
> 标签：android, sqlite, gallery

I am android deveoper .i needed help that i try to take photo from camera and i get photo and how to add gallery view .how to possible? my code in below!!`enter code here`

Thanks!!

```
send_zoo_btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            String base64string = "";
            // bitmap = i.getDrawingCache();
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
            ImageByte = stream.toByteArray();
            base64string = Base64.encodeBytes(ImageByte);

            db.execSQL("insert into newanimal(path,selece_animal) values('"
                    + base64string + "','" + id + "' )");
            Toast.makeText(ThirdActivity.this, "Data inserted", 1).show();
            Intent intent = new Intent().setClass(ThirdActivity.this,
                    ZoobuzzActivity.class);
            startActivity(intent);
        }
    });
} 
```

in below my onactivity result method in

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d("CheckStartActivity", "onActivityResult and resultCode = "
            + requestCode);
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == GALLERY || requestCode == CAMERA) {
        if (resultCode == RESULT_OK) {
            if (requestCode == CAMERA) {
                Log.d("log", " request code camera " + requestCode);
                final File file = getTempFile(this);
                try {
                    selImagePath = file.getAbsolutePath();
                    Log.v("anim", "path  " + selImagePath);

                    m_bmOCRBitmap = Media.getBitmap(getContentResolver(),
                            Uri.fromFile(file));

                    int calwidth;
                    int calheight;

                    // OI FILE Manager
                    FileOutputStream out;

                    out = new FileOutputStream(file);
                    int width = m_bmOCRBitmap.getWidth();
                    int height = m_bmOCRBitmap.getHeight();
                    if (width > height) {
                        calwidth = (int) ((width * 250) / height);
                        calheight = 250;
                    } else {
                        calheight = (int) ((height * 200) / width);
                        calwidth = 200;
                    }

                    bitmap = Bitmap.createScaledBitmap(m_bmOCRBitmap,
                            calwidth, calheight, true);

                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);

                    Log.v("bitmap", " bitmap :" + bitmap);

                    img_pht.setImageBitmap(bitmap);

                    hideMenu();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();

                }
            } else if (requestCode == GALLERY) {

                Uri selectedImageUri = data.getData();

                Log.v("", " result code : " + resultCode + " request "
                        + requestCode + " data " + data);

                realpath = getPath(selectedImageUri);

                Log.v("anim", " realpath : " + realpath);
                file = new File(realpath);

                Log.v("anim", " file : " + file);

                m_bmOCRBitmap = BitmapFactory.decodeFile(realpath);
                int calwidth;
                int calheight;

                // OI FILE Manager
                FileOutputStream out;
                try {
                    out = new FileOutputStream(file);
                    int width = m_bmOCRBitmap.getWidth();
                    int height = m_bmOCRBitmap.getHeight();
                    if (width > height) {
                        calwidth = (int) ((width * 250) / height);
                        calheight = 250;
                    } else {
                        calheight = (int) ((height * 200) / width);
                        calwidth = 200;
                    }

                    bitmap = Bitmap.createScaledBitmap(m_bmOCRBitmap,
                            calwidth, calheight, true);

                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);

                    Log.v("bitmap", " bitmap :" + bitmap);

                    img_pht.setImageBitmap(bitmap);
                    hideMenu();
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }
    }
    if (resultCode == 1) {
        Log.d("log", " request code di= " + requestCode);

        id = data.getExtras().getInt("id");
        if (GViewAdapter.imageIDs.get(id).equals("R.drawable")) {
            int as = Integer.parseInt("" + GViewAdapter.imageIDs.get(id));
            img_chose.setImageResource(as);
        } else {

        }

        Log.v("log", " id" + data.getExtras().getInt("id"));

    }

}

public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

private File getTempFile(Context context) {
    final File path = new File(Environment.getExternalStorageDirectory(),
            context.getPackageName());
    if (!path.exists()) {
        path.mkdir();
    }
    return new File(path, fileName);
}

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (!(android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.DONUT)
            && keyCode == KeyEvent.KEYCODE_BACK
            && event.getRepeatCount() == 0) {
        onBackPressed();
    }
    return super.onKeyDown(keyCode, event);
}

public void onBackPressed() {
    if (isMenuVisible) {
        hideMenu();
    } else {
        finish();
    }
} 
```

Error

```
05-02 11:26:35.900: ERROR/AndroidRuntime(510): FATAL EXCEPTION: main
05-02 11:26:35.900: ERROR/AndroidRuntime(510): java.lang.ArrayIndexOutOfBoundsException
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.zoobuzz.FirstActivity$1.onItemClick(FirstActivity.java:39)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.widget.Gallery.onSingleTapUp(Gallery.java:864)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.GestureDetector.onTouchEvent(GestureDetector.java:557)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.widget.Gallery.onTouchEvent(Gallery.java:839)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.View.dispatchTouchEvent(View.java:3766)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.os.Looper.loop(Looper.java:123)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at java.lang.reflect.Method.invokeNative(Native Method)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at java.lang.reflect.Method.invoke(Method.java:521)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-02 11:26:35.900: ERROR/AndroidRuntime(510):     at dalvik.system.NativeStart.main(Native Method)

enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:49:59.117

Call the Camera Intent using

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

startActivityForResult(intent, PICK_IMAGE_FROM_CAMERA);

@Override
protected void onActivityResult(int requestCode , int resultCode ,
        Intent data) {

    // TODO Auto-generated method stub

    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
            case PICK_IMAGE_FROM_CAMERA:

                Uri uri = data.getData();
                imageview.setImageURI(uri);

                break;

}
    }
} 
```

To save image on SD Card on a specific Location

```
if (uri != null) {
        String SD_Card_Path = Environment.getExternalStorageDirectory()
                .toString();
        String Our_Path = SD_Card_Path + "/NewFolder/Images/";
        OutputStream fOut = null;
        ImageFullName = Image_Name + "_" + System.currentTimeMillis()
                + ".jpg";
        File file = new File(Our_Path + ImageFullName);
        try {
            fOut = new FileOutputStream(file);

            Bitmap mBitmap = null;
            mBitmap = Media.getBitmap(this.getContentResolver(),
                    myCaptureUri);

            mBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOut);
            fOut.flush();
            fOut.close();
        }
        catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

# matlab - 用matlab做视频直播

> ID：10408272
> 
> 赞同：1
> 
> 时间：2012-05-02T05:39:21.800
> 
> 标签：matlab, matlab-deployment

这段代码应该拍摄实时视频绘制 2 行，但是当我们运行代码时，cam 将拍摄实时视频，但 2 行出现在不同的窗口中。任何人都可以找出问题所在吗？

```
clear;

dev_info = imaqhwinfo('winvideo',1);
celldisp(dev_info.SupportedFormats);
vid1 = videoinput('winvideo',1);

%out = imaqhwinfo(vid);

%This is for triggering:

num_frames=5;

triggerconfig(vid1, 'Manual')
set(vid1,'FramesPerTrigger',num_frames)

start(vid1);
trigger(vid1)

%frame = getsnapshot(vid1);
%image(frame);

%here it will acquire 5 frames

%now move the data acquired to the workspace
[data1 time1] = getdata(vid1,num_frames);
kk=length(time1);
elapsed_time = time1(kk) - time1(1);
%frame = getsnapshot(vid1);   %this is to get a single frame
for i=1:500

line([27,1523],[1753,1753]);
line([7,1531],[1395,1395]);
 preview(vid1);
end

delete(vid1);
clear vid1;

aviobj = avifile('example.avi');
for i=1:kk
    F=data1(:,:,:,i);
    aviobj = addframe(aviobj,F);
end
aviobj = close(aviobj);

%then we can see the whole video clip
mov = mmreader('example.avi');

%................

%Also, we can directly play the video from the video file
mplay('example.avi'); 
```

# jsf-2 - icefaces 3.0 ace:dataTable排序列，需要例子

> ID：10408278
> 
> 赞同：0
> 
> 时间：2012-05-02T05:40:05.423
> 
> 标签：jsf-2, icefaces-3

我需要一个在 ace:dataTable 中对列进行排序的示例，我不知道如何使用 sortBy + sortFunction 。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:45:30.207

所以我的朋友找到了解决方案：

在 collectionBean 中：

```
private Comparator<String> vNoComparator = new Comparator<String>(){ 

         public int compare(String iRec1, String iRec2){
              if(iRec1==null || iRec2==null)
              {
                    if(iRec1==null && iRec2==null)
                          return 0;
                    if(iRec1==null)
                          return -1;
                    return 1;
              } 

              long vNumber1=  Long.parseLong(iRec1) ;
              long vNumber2= Long.parseLong(iRec2);
              if(vNumber1>vNumber2)
                    return 1;
              else if(vNumber1<vNumber2)
                    return -1;
              else        
                    return 0; 
        }
  }; 
```

Comparator 的类型是我们排序的属性的类型，在这种情况下 ARecordNo 类型是 String

```
public Comparator<String> getvNoComparator() {
        return vNoComparator;
  }
  public void setvNoComparator(Comparator<String> vNoComparator) {
        this.vNoComparator = vNoComparator;
  } 
```

在 .xhtml 中：

```
 <ace:dataTable
  value="#{eITDocumentsCollectionBean.AEITDocumentsItems}"
  var="eITDocumentsItemBean" …..
  <ace:column
  headerText="#{eITDocumentsCollectionBean.ARecordNumberColumnName}"
  sortBy="#{eITDocumentsItemBean.ARecordNo}" 
  sortFunction="#{eITDocumentsCollectionBean.vNoComparator}"> 
```

ARecordNo= ItemBean 中按它排序的属性 vNoComparator= 我创建的比较器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:46:31.940

```
<ui:param name="title" value="#{msgs[dataTableSorting.title]}"/>
<ui:param name="description" value="#{msgs[dataTableSorting.description]}"/>
<ui:param name="resourceValue" value="#{dataTableSorting.exampleResource}"/>

<ui:param name="wikiResources" value="#{dataTableResources.wikiResources}"/>
<ui:param name="tldResources" value="#{dataTableResources.tldResources}"/>

<ui:define name="example">
    <h:form id="form">
       <ace:dataTable id="carTable"
                      value="#{dataTableSort.carsData}"
                      var="car">
           <ace:column id="id" headerText="ID" sortBy="#{car.id}">
                <h:outputText id="idCell" value="#{car.id}"/>
            </ace:column>
            <ace:column id="name" headerText="Name" sortBy="#{car.name}">
                <h:outputText id="nameCell" value="#{car.name}"/>
            </ace:column>
            <ace:column id="chassis" headerText="Chassis" sortBy="#{car.chassis}" >
                <h:outputText id="chassisCell" value="#{car.chassis}"/>
            </ace:column>
            <ace:column id="weight" headerText="Weight (lbs)" sortBy="#{car.weight}">
                <h:outputText id="weightCell" value="#{car.weight}"/>
            </ace:column>
            <ace:column id="accel" headerText="Accel" sortBy="#{car.acceleration}" >
                <h:outputText id="accelCell" value="#{car.acceleration}"/>
            </ace:column>
            <ace:column id="mpg" headerText="MPG" sortBy="#{car.mpg}">
                <h:outputText id="mpgCell" value="#{car.mpg}"/>
            </ace:column>
            <ace:column id="cost" headerText="Cost" sortBy="#{car.cost}">
                <h:outputText id="costCell" value="#{car.cost}">
                    <f:convertNumber type="currency"
                                     currencySymbol="$"
                                     groupingUsed="true"
                                     minFractionDigits="2"
                                     maxFractionDigits="2"/>
                </h:outputText>
            </ace:column>
        </ace:dataTable>
    </h:form>
</ui:define> 
```

参考 - [icefaces-showcase](http://icefaces-showcase.icesoft.org/showcase.jsf?grp=aceMenu&exp=dataTableBean)

# c - C++11 中的 async-future 模型或 C# 中的 async-await 有什么好的 C 实现吗？

> ID：10408294
> 
> 赞同：0
> 
> 时间：2012-05-02T05:41:50.633
> 
> 标签：c, asynchronous

我的项目有几个地方需要处理异步。所以我想学习如何在 C 中实现异步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T01:01:14.127

我在“过去”做过一些异步编程。

我使用的方法是将每个异步操作表示为`HANDLE`，如果操作没有固有的`HANDLE`. 然后我为应用程序创建了一个主循环，它基本上只是调用`WaitForMultipleObjects`和执行完成回调。

这种方法有几个问题：

*   这是相当资源密集型的。非常需要手动重置事件包装器。
*   它是严格的单线程。但是，您可以修改方法以使用线程池；当我“回到过去”开发我的异步程序时，操作系统还没有提供线程池。
*   它限制为 64 个未完成的异步操作。我确实遇到了这个限制，并写了一个我称之为“事件多路分解器”的东西来解决它。本质上，您只需根据需要添加线程，子线程共享一个“通知” `HANDLE`，该“通知”始终在`HANDLE`主线程等待的 64 秒内。

# ruby - 如何在 Thor 中指定多个参数或参数？

> ID：10408296
> 
> 赞同：12
> 
> 时间：2012-05-02T05:42:07.243
> 
> 标签：ruby, command-line-interface, command-line-arguments, thor

my_gem 你好 name1 name2 name3 给我一个

> my_gem hello 至少需要 1 个参数：my_gem hello name

我应该只解析它们并用分隔符分隔参数吗？

例如

> my_gem 你好 name1,name2,name3,nameN

在文件中它看起来像

```
class MyCLI < Thor
  desc "hello NAMES", "say hello to names"

  def hello(names)
    say "hello #{names.split(',')}"
  end
end 
```

还是有办法做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-14T08:33:43.247

是的，还有另一种方法可以做到这一点。

```
require 'thor'
class TestApp < Thor
    desc "hello NAMES", "long desc"
    def hello(*names)
        say "hello #{names.join('; ')}"
    end
end 
```

它可以这样调用：

```
$ thor test_app:hello first second third
hello first; second; third 
```

# sql-server - 在 SQL Server 中编写更快的存储过程？

> ID：10408297
> 
> 赞同：-1
> 
> 时间：2012-05-02T05:42:17.307
> 
> 标签：sql-server, tsql, stored-procedures

我需要存储在多个表中的超过 500000 行。用我的逻辑获取所有行。在这种情况下，我编写了一个在 SQL Server 浏览器中成功执行的存储过程，但是当我从 C# 代码运行它时，发生了超时异常。

谁能建议我如何改进我的存储过程？

```
CREATE PROCEDURE [dbo].[SP_ExtendedPTU]
(
    @SQLForPTU as varchar(MAX)  
)
AS
BEGIN TRAN
--DECLARE 
--@SQLForPTU as varchar(MAX)
--SET @SQLForPTU= 'WHERE  OrderID IN(4233)And OrderType =3'

BEGIN--1
DECLARE 
@ProductionTracingUnitID    as int,
@OrderID    as int,
@OrderType  as smallint,
@ProductID  as int,
@LabLabDipID    as int,
@ColorName  as varchar(255),
@PantonNo as    varchar(127),
@Shade as varchar(4),
@DyeingOrderQty as decimal(30, 17),
@JobOrderQty    as decimal(30, 17),
@ProductionPipeLineQty as decimal(30, 17),
@ProductionFinishedQty as decimal(30, 17),
@DeliveryQty    as decimal(30, 17),
@BuyerID    as int, 
@FactoryID  as int,
@ProductionGraceQty as decimal(30, 17),
@WeightLossGainQty  as decimal(30, 17),
@RateInLBS as decimal(30, 17),
@State  as smallint,
@ProductionLossQty  as decimal(30, 17),
@ReturnQty as decimal(30, 17),
@ActualDeliveryQty  as decimal(30,17),
@ReadyStockInhand as decimal(30, 17),
@JobOrderQtyApproved    as decimal(30, 17),
@OrderNumber as varchar(50),
@FactoryName as varchar(200),
@BuyerName as varchar(200),
@ProductName as varchar(200),
@YetToDelivery as decimal(30,17),
@StockInHand as decimal(30,17),
@YetToProduction as decimal(30,17),
@LCID as int,
@LCNo as varchar(300),
@PIQty as decimal(30,17),
@ChangingQty as decimal(30,17),
@SampleAdjQty as decimal(30,17),
@SampleAdjValue as decimal(30,17),
@MKTPersonID as int, 
@MKTPersonName as varchar(500),
@MerchandiserID as int,
@MerchandiserName as varchar(500),
@AmendmentStatus as smallint,
@AcceptanceValue as decimal(30,17),
@MaturityValue as decimal(30,17),
@BillAcceptanceValue as decimal(30,17),
@BillMaturityValue as decimal(30,17),
@BillAcceptancePercentage  as decimal(30,17),
@BillMaturityPercentage  as decimal(30,17),
@ExportLCValue as decimal(30,17),
@Acceptance as varchar(100),
@Maturity as varchar(100),
@YarnCount as varchar(50),
@PTUDQty  as decimal(30,17),
@ShadeFromOrder as smallint,
@EWYDLRelabNo as varchar(100),
@EWYDLColorNo as varchar(100),
@DeliveryTo as int,
@FactoryPersonnelID as int,
@BuyerPersonnelID as int,
@OrderRcvBy as int,
@OrderState as smallint

CREATE TABLE #TempTableOne(
                            ProductionTracingUnitID int,
                            OrderID int,
                            OrderType smallint,
                            ProductID int,
                            DyeingOrderQty decimal(30,17),
                            JobOrderQty decimal(30,17),
                            ProductionPipeLineQty decimal(30,17),
                            ProductionFinishedQty decimal(30,17),
                            DeliveryQty decimal(30,17),
                            BuyerID int,
                            FactoryID int,
                            ProductionGraceQty decimal(30,17),
                            WeightLossGainQty decimal(30,17),
                            RateInLBS decimal(30,17),
                            ProductionLossQty decimal(30,17),
                            ActualDeliveryQty decimal(30,17),
                            ReadyStockInhand decimal(30,17),
                            OrderNumber varchar(50),
                            FactoryName varchar(200),
                            BuyerName varchar(200),
                            ProductName varchar(200),
                            ColorName varchar(200),
                            LabLabDipID int,
                            ReturnQty decimal(30,17),
                            YetToDelivery decimal(30,17),
                            StockInHand decimal(30,17),
                            YetToProduction decimal(30,17),
                            LCID int,
                            LCNo varchar(300),
                            PIQty decimal(30,17),
                            ChangingQty decimal(30,17),
                            SampleAdjQty decimal(30,17),
                            SampleAdjValue decimal(30,17),
                            MKTPersonID int, 
                            MKTPersonName varchar(500),
                            MerchandiserID int,
                            MerchandiserName varchar(500),
                            AmendmentStatus smallint,
                            Acceptance varchar(100),
                            Maturity varchar(100),
                            YarnCount varchar(50),                          
                            EWYDLRelabNo varchar(50),
                            EWYDLColorNo varchar(50),
                            ShadeFromOrder smallint
                          )

--ProductionTracingUnitID,OrderID,OrderType,ProductID,LabLabDipID,ColorName,PantonNo,EWYDLColorNo,Shade,EWYDLRelabNo,DyeingOrderQty,JobOrderQty,ProductionPipeLineQty,ProductionFinishedQty,DeliveryQty,BuyerID,FactoryID,ProductionGraceQty,WeightLossGainQty,RateInLBS,State,ProductionLossQty,ShadeFromOrder,ReturnQty,ActualDeliveryQty,ReadyStockInhand,JobOrderQtyApproved
DECLARE 
@SQL as varchar(MAX)
SET @SQL=
'
    DECLARE Cur_AB1 CURSOR GLOBAL FORWARD_ONLY KEYSET FOR           
    SELECT ProductionTracingUnitID,OrderID,OrderType,ProductID,DyeingOrderQty,JobOrderQty,ProductionPipeLineQty,ProductionFinishedQty,BuyerID,FactoryID,ProductionGraceQty,WeightLossGainQty,RateInLBS,ProductionLossQty,ActualDeliveryQty,ReadyStockInhand,ColorName,LabLabDipID,ReturnQty,EWYDLRelabNo,EWYDLColorNo,ShadeFromOrder FROM ProductionTracingUnit '+@SQLForPTU+'
'
EXEC (@SQL)

OPEN Cur_AB1
FETCH NEXT FROM Cur_AB1 INTO @ProductionTracingUnitID,@OrderID,@OrderType,@ProductID,@DyeingOrderQty,@JobOrderQty,@ProductionPipeLineQty,@ProductionFinishedQty,@BuyerID,@FactoryID,@ProductionGraceQty,@WeightLossGainQty,@RateInLBS,@ProductionLossQty,@ActualDeliveryQty,@ReadyStockInhand,@ColorName,@LabLabDipID,@ReturnQty,@EWYDLRelabNo,@EWYDLColorNo,@ShadeFromOrder
    WHILE(@@Fetch_Status <> -1)
    BEGIN--2
        SET @LCID=0
        SET @LCNo=''
        SET @PIQty=0
        SET @AcceptanceValue =0
        SET @MaturityValue= 0
        SET @Acceptance= ''
        SET @Maturity =''

        SET @DeliveryQty=@ActualDeliveryQty-@ReturnQty
        SET @YetToDelivery=@JobOrderQty-@ActualDeliveryQty+@ReturnQty
        set @PTUDQty=(select sum(Qty) from PTUDistribution where ProductionTracingUnitID=@ProductionTracingUnitID )
        IF(@PTUDQty>@YetToDelivery)
        BEGIN--sih
            SET @StockInHand =@YetToDelivery
        END --sih
        ELSE
        BEGIN--sih2
            SET @StockInHand =@PTUDQty
        END --sih2          
        SET @YetToProduction=@JobOrderQty-@ReadyStockInhand-@ActualDeliveryQty+@ReturnQty
        IF (@YetToProduction<0)
        BEGIN
            SET @YetToProduction=0
        END

        SET @ChangingQty=0
        SET @SampleAdjQty=0
        SET @SampleAdjValue=0 
        SET @MerchandiserID=0
        SET @MerchandiserName=''
        SET @MKTPersonID =0
        SET @AmendmentStatus=0
        SET @AcceptanceValue =0
        SET @MaturityValue= 0
        SET @Acceptance= ''
        SET @Maturity =''

        SET @MKTPersonName =''
        SET @OrderNumber=''     
        IF(@OrderType=3)
        BEGIN--jam1
            SET @OrderNumber=(SELECT ISNULL(JobCode,'')+' - '+ISNULL(JobNo,'')+' / '+ISNULL(JobYear,'') FROM Job WHERE JobID=@OrderID)
            SELECT @LCID=ISNULL(ExportLCID,0), @LCNo=ISNULL(ExportLCNo,''),@AmendmentStatus=AmendmentStatus,@ExportLCValue=Amount FROM ExportLC WHERE ExportLCID =(SELECT LCID FROM [PI] WHERE PIID=(SELECT PIID FROM Job WHERE JobID=@OrderID))                    
            SELECT @PIQty=ISNULL(SUM(Qty),0), @SampleAdjQty=ISNULL(SUM(AdjQty),0), @SampleAdjValue=ISNULL(SUM(AdjValue),0) FROM PIProducts WHERE PIID=(SELECT PIID FROM Job WHERE JobID=@OrderID) AND ProductID=@ProductID          
            SET @ChangingQty=(SELECT ISNULL(SUM(Qty),0) FROM PIDeliverableProducts WHERE PIID=(SELECT PIID FROM Job WHERE JobID=@OrderID) AND ProductID=@ProductID)                 
            SELECT @MKTPersonID=EWYDLMarketingEmpID, @MerchandiserID=CmsBCPID FROM [PI] WHERE PIID=(SELECT PIID FROM Job WHERE JobID=@OrderID) 
            SET @MerchandiserName=(SELECT ISNULL([Name],'') FROM ContactPersonnel WHERE ContactPersonnelID=@MerchandiserID)         
            SET @MKTPersonName =(SELECT [Name] FROM Employee WHERE EmployeeID=@MKTPersonID)     

            SET @BillAcceptanceValue=(select isnull(sum(Amount),0) from LCbill where EXportLCID=@LCID and [state] in (2,3,4))
            SET @BillMaturityValue =(select isnull(sum(Amount),0) from LCbill where EXportLCID=@LCID and [state] in (5,6,7,8,9,10,12))

            IF(@ExportLCValue>0 and @ExportLCValue is not null)
            BEGIN
                SET @BillAcceptancePercentage  =(@BillAcceptanceValue*100)/@ExportLCValue -- bill Percentage 
                SET @BillMaturityPercentage  =(@BillMaturityValue*100)/@ExportLCValue

                SET @AcceptanceValue=(@ChangingQty*@RateInLBS)*(@BillAcceptancePercentage/100)--Percentage Wise PI Valu         
                SET @MaturityValue=(@ChangingQty*@RateInLBS)*(@BillMaturityPercentage/100)

                IF((@ChangingQty*@RateInLBS)>0 and (@ChangingQty*@RateInLBS) is not null)
                BEGIN
                    SET @AcceptanceValue=(@AcceptanceValue*100)/(@ChangingQty*@RateInLBS)-- PI ValuePercentage
                    SET @MaturityValue=(@MaturityValue*100)/(@ChangingQty*@RateInLBS)
                END

                SET @Acceptance=Convert(varchar(20),(CONVERT(float,round((@AcceptanceValue+@MaturityValue),0)))) +'%'
                SET @Maturity =Convert(varchar(20),(CONVERT(float,round(@MaturityValue,0)))) +'%'
            END

            SET @FactoryName=''
            IF(@FactoryID>0)
            BEGIN--jam3
                SET @FactoryName=(SELECT [Name] FROM Contractor WHERE ContractorID=@FactoryID)
            END--jam3

            SET @BuyerName=''
            IF(@BuyerID>0)
            BEGIN--jam4
                SET @BuyerName=(SELECT [Name] FROM Contractor WHERE ContractorID=@BuyerID)
            END--jam4

        END--jam1
        ELSE
        BEGIN --jam2 IF Sample
            SET @LCID=0
            SET @LCNo=''
            SET @OrderNumber=''
            SET @PIQty=0    
            SET @DeliveryTo=0
            SET @FactoryPersonnelID=0 
            SET @BuyerPersonnelID=0
            SET @OrderRcvBy=0
            SET @ChangingQty=0
            SET @MerchandiserName=''
            SET @MKTPersonName=''
            SET @OrderState=0
            SET @AmendmentStatus=0
            SET @PIQty= (SELECT ISNULL(SUM(Qty),0) FROM SampleOrderDetail WHERE PTUID=@ProductionTracingUnitID)
            SET @ChangingQty=@PIQty
            SELECT @OrderNumber=ISNULL(SampleOrderNo,''), @DeliveryTo=ISNULL(DeliveryTo,0),@FactoryPersonnelID=ISNULL(FactoryPersonnelID,0),@BuyerPersonnelID=ISNULL(BuyerPersonnelID,0),@OrderRcvBy=ISNULL(OrderRcvBy,0),@OrderState=ISNULL(OrderState,0)  FROM SampleOrder WHERE SampleOrderID=@OrderID
            SET @AmendmentStatus=@OrderState
            IF(@DeliveryTo=3)
            BEGIN
                SET @MerchandiserName=(SELECT ISNULL([Name],'') FROM ContactPersonnel WHERE ContactPersonnelID=@FactoryPersonnelID)     
            END

            IF(@DeliveryTo=2)
            BEGIN
                SET @MerchandiserName=(SELECT ISNULL([Name],'') FROM ContactPersonnel WHERE ContactPersonnelID=@BuyerPersonnelID)
            END
            SET @MKTPersonName =(SELECT [Name] FROM Employee WHERE EmployeeID=@OrderRcvBy)      

            IF(@DeliveryTo=3)
            BEGIN
                SET @FactoryName=(SELECT [Name] FROM Contractor WHERE ContractorID=@FactoryID)
            END

            IF(@DeliveryTo=2)
            BEGIN
                SET @FactoryName=(SELECT [Name] FROM Contractor WHERE ContractorID=@BuyerID)
            END     

            SET @BuyerName=''
            IF(@BuyerID>0)
            BEGIN--jam4
                SET @BuyerName=(SELECT [Name] FROM Contractor WHERE ContractorID=@BuyerID)
            END--jam4
        END--jam2

        SET @ProductName=''
        SET @YarnCount =''
        SELECT @ProductName=('['+ Code+ '] '+ [Name]), @YarnCount =[Count]  FROM Yarncategory WHERE YarncategoryID=@ProductID       

        INSERT INTO #TempTableOne Values(ISNULL(@ProductionTracingUnitID,0),ISNULL(@OrderID,0),ISNULL(@OrderType,0),ISNULL(@ProductID,0),ISNULL(@DyeingOrderQty,0),ISNULL(@JobOrderQty,0),ISNULL(@ProductionPipeLineQty,0),ISNULL(@ProductionFinishedQty,0),ISNULL(@DeliveryQty,0),ISNULL(@BuyerID,0),ISNULL(@FactoryID,0),ISNULL(@ProductionGraceQty,0),ISNULL(@WeightLossGainQty,0),ISNULL(CONVERT (decimal(18,2),@RateInLBS),0),ISNULL(@ProductionLossQty,0),ISNULL(@ActualDeliveryQty,0),ISNULL(@ReadyStockInhand,0),ISNULL(@OrderNumber,''),ISNULL(@FactoryName,''),ISNULL(@BuyerName,''),ISNULL(@ProductName,''),ISNULL(@ColorName,''),ISNULL(@LabLabDipID,0),ISNULL(@ReturnQty,0),ISNULL(@YetToDelivery,0),ISNULL(@StockInHand,0),ISNULL(@YetToProduction,0),ISNULL(@LCID,0),ISNULL(@LCNo,''),ISNULL(@PIQty,0),ISNULL(@ChangingQty,0),ISNULL(@SampleAdjQty,0),ISNULL(@SampleAdjValue,0),ISNULL(@MKTPersonID,0),ISNULL(@MKTPersonName,''),ISNULL(@MerchandiserID,0),ISNULL(@MerchandiserName,''),ISNULL(@AmendmentStatus,0),ISNULL(@Acceptance,''),ISNULL(@Maturity,''),ISNULL(@YarnCount,''),ISNULL(@EWYDLRelabNo,''),ISNULL(@EWYDLColorNo,''),ISNULL(@ShadeFromOrder,0))
FETCH NEXT FROM Cur_AB1 INTO @ProductionTracingUnitID,@OrderID,@OrderType,@ProductID,@DyeingOrderQty,@JobOrderQty,@ProductionPipeLineQty,@ProductionFinishedQty,@BuyerID,@FactoryID,@ProductionGraceQty,@WeightLossGainQty,@RateInLBS,@ProductionLossQty,@ActualDeliveryQty,@ReadyStockInhand,@ColorName,@LabLabDipID,@ReturnQty,@EWYDLRelabNo,@EWYDLColorNo,@ShadeFromOrder
END--2
CLOSE Cur_AB1
DEALLOCATE Cur_AB1
SELECT * FROM #TempTableOne Order By OrderID
--Group By Product
SELECT ProductID,ProductName, YarnCount,  SUM(PIQty) as PIQty, SUM(ChangingQty) AS ChangingQty, SUM(SampleAdjQty) AS SampleAdjQty, SUM(SampleAdjValue) as SampleAdjValue, SUM(DyeingOrderQty) as DyeingOrderQty,SUM(JobOrderQty)AS JobOrderQty,SUM(ProductionPipeLineQty)as ProductionPipeLineQty,SUM(ProductionFinishedQty) as ProductionFinishedQty,SUM(DeliveryQty)as DeliveryQty,SUM(ProductionGraceQty)AS ProductionGraceQty,SUM(WeightLossGainQty) as WeightLossGainQty,SUM(ProductionLossQty)as ProductionLossQty,SUM(ActualDeliveryQty)as ActualDeliveryQty,SUM(ReadyStockInhand)as ReadyStockInhand, SUM(ReturnQty) AS ReturnQty,SUM(YetToDelivery)AS YetToDelivery,SUM(StockInHand)AS StockInHand,SUM(YetToProduction)AS YetToProduction  FROM #TempTableOne GROUP BY ProductID,ProductName,YarnCount Order By ProductID
--Group By Factory
SELECT FactoryID,FactoryName,SUM(PIQty) as PIQty, SUM(ChangingQty) AS ChangingQty, SUM(SampleAdjQty) AS SampleAdjQty, SUM(SampleAdjValue) as SampleAdjValue, SUM(DyeingOrderQty) as DyeingOrderQty,SUM(JobOrderQty)AS JobOrderQty,SUM(ProductionPipeLineQty)as ProductionPipeLineQty,SUM(ProductionFinishedQty) as ProductionFinishedQty,SUM(DeliveryQty)as DeliveryQty,SUM(ProductionGraceQty)AS ProductionGraceQty,SUM(WeightLossGainQty) as WeightLossGainQty,SUM(ProductionLossQty)as ProductionLossQty,SUM(ActualDeliveryQty)as ActualDeliveryQty,SUM(ReadyStockInhand)as ReadyStockInhand, SUM(ReturnQty) AS ReturnQty,SUM(YetToDelivery)AS YetToDelivery,SUM(StockInHand)AS StockInHand,SUM(YetToProduction)AS YetToProduction FROM #TempTableOne GROUP BY FactoryID,FactoryName
--Group By Order    
SELECT OrderID,OrderNumber,LCNo,FactoryID,FactoryName,BuyerID,BuyerName,SUM(PIQty) AS PIQty,SUM(ChangingQty) AS ChangingQty,SUM(SampleAdjQty) AS SampleAdjQty,SUM(SampleAdjValue) AS SampleAdjValue,MKTPersonID,MKTPersonName,MerchandiserID,MerchandiserName,AmendmentStatus,Acceptance,Maturity,SUM(DyeingOrderQty) as DyeingOrderQty,SUM(JobOrderQty)AS JobOrderQty,SUM(ProductionPipeLineQty)as ProductionPipeLineQty,SUM(ProductionFinishedQty) as ProductionFinishedQty,SUM(DeliveryQty)as DeliveryQty,SUM(ProductionGraceQty)AS ProductionGraceQty,SUM(WeightLossGainQty) as WeightLossGainQty,SUM(ProductionLossQty)as ProductionLossQty,SUM(ActualDeliveryQty)as ActualDeliveryQty,SUM(ReadyStockInhand)as ReadyStockInhand, SUM(ReturnQty) AS ReturnQty,SUM(YetToDelivery)AS YetToDelivery,SUM(StockInHand)AS StockInHand,SUM(YetToProduction)AS YetToProduction FROM #TempTableOne GROUP BY OrderID,OrderNumber,OrderNumber,LCNo,FactoryID,FactoryName,BuyerID,BuyerName,MKTPersonID,MKTPersonName,MerchandiserID,MerchandiserName,AmendmentStatus,Acceptance,Maturity
--Default View
SELECT OrderID,OrderNumber,LCNo,FactoryID,FactoryName,BuyerID,BuyerName,ProductID,ProductName,YarnCount,PIQty,ChangingQty,SampleAdjQty,SampleAdjValue,RateInLBS,MKTPersonID,MKTPersonName,MerchandiserID,MerchandiserName,AmendmentStatus,Acceptance,Maturity, SUM(DyeingOrderQty) as DyeingOrderQty,SUM(JobOrderQty)AS JobOrderQty,SUM(ProductionPipeLineQty)as ProductionPipeLineQty,SUM(ProductionFinishedQty) as ProductionFinishedQty,SUM(DeliveryQty)as DeliveryQty,SUM(ProductionGraceQty)AS ProductionGraceQty,SUM(WeightLossGainQty) as WeightLossGainQty,SUM(ProductionLossQty)as ProductionLossQty,SUM(ActualDeliveryQty)as ActualDeliveryQty,SUM(ReadyStockInhand)as ReadyStockInhand, SUM(ReturnQty) AS ReturnQty,SUM(YetToDelivery)AS YetToDelivery,SUM(StockInHand)AS StockInHand,SUM(YetToProduction)AS YetToProduction  FROM #TempTableOne GROUP BY OrderID,OrderNumber,LCNo,FactoryID,FactoryName,BuyerID,BuyerName,ProductID,ProductName,YarnCount,PIQty,ChangingQty,SampleAdjQty,SampleAdjValue,RateInLBS,MKTPersonID,MKTPersonName,MerchandiserID,MerchandiserName,AmendmentStatus,Acceptance,Maturity   
DROP TABLE #TempTableOne
END--1
COMMIT TRAN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:36:09.547

这里有很多问题。如果编写得当，这个过程应该可以在大约 15 秒内轻松运行，具体取决于您的索引。在深入研究之前，我可以给你的提示如下：

首先，在进行批量处理时，唯一可以接受使用游标的情况是在批量处理中对更新进行分区。换句话说，永远不要使用需要为要更新的每条记录进行迭代的游标。整个过程需要迭代 500,000 次，这将非常缓慢。而是使用临时表将数据插入，然后使用该表执行更新。可以使用临时索引来索引临时表，如下面的代码所示。确保在 WHERE 子句中使用的任何字段都被索引，无论是对于您的临时表还是您的活动表。

```
CREATE TABLE #Temp2 (
    ProductionTracingUnitID int,
    OrderID int,
    OrderType smallint,
    ProductID int,
    DyeingOrderQty  decimal(30, 17),
    JobOrderQty     decimal(30, 17),
    ProductionPipeLineQty  decimal(30, 17),
    ProductionFinishedQty  decimal(30, 17),
    BuyerID     int, 
    FactoryID   int,
    ProductionGraceQty  decimal(30, 17),
    WeightLossGainQty   decimal(30, 17),
    RateInLBS  decimal(30, 17),
    ProductionLossQty   decimal(30, 17),
    ActualDeliveryQty   decimal(30,17),
    ReadyStockInhand  decimal(30, 17),
    ColorName   varchar(255),
    LabLabDipID     int,
    ReturnQty  decimal(30, 17),
    EWYDLRelabNo  varchar(100),
    EWYDLColorNo  varchar(100),
    ShadeFromOrder  smallint
)
CREATE NONCLUSTERED INDEX #IX_Temp2_1 ON #Temp2(ProductionTracingUnitID)
CREATE NONCLUSTERED INDEX #IX_Temp2_2 ON #Temp2(OrderID)
CREATE NONCLUSTERED INDEX #IX_Temp2_3 ON #Temp2(ProductID)

DECLARE @SQL as varchar(MAX)
SET @SQL=
'
    SELECT ProductionTracingUnitID,OrderID,OrderType,ProductID,DyeingOrderQty,JobOrderQty,ProductionPipeLineQty,ProductionFinishedQty,BuyerID,FactoryID,ProductionGraceQty,
        WeightLossGainQty,RateInLBS,ProductionLossQty,ActualDeliveryQty,ReadyStockInhand,ColorName,LabLabDipID,ReturnQty,EWYDLRelabNo,EWYDLColorNo,ShadeFromOrder 
    FROM ProductionTracingUnit '+@SQLForPTU
INSERT INTO #Temp2 (ProductionTracingUnitID, OrderID, OrderType, ProductID, DyeingOrderQty, JobOrderQty, ProductionPipeLineQty, 
        ProductionFinishedQty, BuyerID, FactoryID, ProductionGraceQty, WeightLossGainQty, RateInLBS, ProductionLossQty, ActualDeliveryQty,
        ReadyStockInhand, ColorName, LabLabDipID, ReturnQty, EWYDLRelabNo, EWYDLColorNo, ShadeFromOrder)
EXEC (@SQL) 
```

其次，在做批量处理时，避免使用需要每行执行的子查询。在最好的情况下，以下行会非常慢：

```
SELECT @LCID=ISNULL(ExportLCID,0), @LCNo=ISNULL(ExportLCNo,''),@AmendmentStatus=AmendmentStatus,@ExportLCValue=Amount 
FROM ExportLC WHERE ExportLCID =(SELECT LCID FROM [PI] WHERE PIID=(SELECT PIID FROM Job WHERE JobID=@OrderID)) 
```

考虑使用连接重新表述，如下所示：

```
SELECT @LCID=ISNULL(ExportLCID,0), @LCNo=ISNULL(ExportLCNo,''),@AmendmentStatus=AmendmentStatus,@ExportLCValue=Amount 
FROM ExportLC e, [PI] p, Job j
WHERE e.ExportLCID = p.LCID
AND p.PIID = j.PIID
AND j.JobID = @OrderID 
```

在不使用游标的情况下重写过程，这看起来更像是：

```
UPDATE #Temp2 SET LCID = ISNULL(ExportLCID, 0), LCNo = ISNULL(ExportLCNo, 0), ...
FROM #Temp2 t, ExportLC e, [PI] p, Job j
WHERE e.ExportLCID = p.LCID
AND p.PIID = j.PIID
AND j.JobID = t.OrderID 
```

要让这一切正常工作需要做很多工作，而且我很难为这样一个复合过程创建一个测试环境。但是，我认为这应该给你足够的继续。如果您遇到困难，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:08:23.613

如果您要解析 500,000 行，则游标是非首发。这将导致各种问题，并且随着数据的增长，它会变得越来越慢。有几种方法可以实现更好的性能。

1) 如果可能，在一夜之间获取数据 - 即使用 SQL 作业将数据扁平化到快照表中

2）在批量选择中获取尽可能多的数据 - 即不是在循环中逐行插入临时表，您可以执行查询以获取特定列所需的所有数据

3) 如果你不能在一夜之间做到这一点，并且必须始终这样做，我建议将其分解为谨慎的存储过程并从你的 C# 代码中循环。这样您就可以向您的用户提供反馈——也许以进度条的形式。这不会超时，只要用户知道正在计算某些东西，他们大概知道他们必须等待多长时间，并且如果他们有机会退出，那么花费多长时间并不重要。想要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:06:44.403

您可以使用 SQL Server 中的执行计划来识别瓶颈。另外请尽量避免使用游标，如果临时表包含大量数据，请创建普通表而不是创建#table

# c# - Linq to EF .Clear() 不清除

> ID：10408305
> 
> 赞同：4
> 
> 时间：2012-05-02T05:42:51.947
> 
> 标签：c#, linq, collections, entity-framework-4, entitycollection

```
EntityCollection.ToList().Clear() 
```

不清除实体集合。知道为什么吗？

有什么解决办法吗？

我应该如何清除`EntityCollection`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T05:45:37.650

因为`ToList()`将 EntityCollection 的副本创建为 a `List<T>`，然后您只需清除该列表而不是其`EntityCollection`本身。

编辑1：使用`Clear()`EntityCollection中的方法：http: [//msdn.microsoft.com/de-de/library/bb302707.aspx](http://msdn.microsoft.com/de-de/library/bb302707.aspx)

编辑2：哦，我明白了。所以这是这个类： http: [//msdn.microsoft.com/de-de/library/ff422654](http://msdn.microsoft.com/de-de/library/ff422654(v=vs.91).aspx) (v=vs.91).aspx ？似乎您必须枚举所有项目并一一删除它们。

```
foreach( var item in EntityCollection.ToList() )
    EntityCollection.Remove(item); 
```

在这里您需要`ToList()`创建一个副本，因为大多数集合类不喜欢在枚举期间从它们中删除项目时它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:45:31.033

`ToList()`生成一个新列表（您正在清除它）。

# php - 如何使用 jquery 隐藏和显示多个图像的图像标题？

> ID：10408306
> 
> 赞同：0
> 
> 时间：2012-05-02T05:42:53.207
> 
> 标签：php, jquery

我有如下结构，

```
<div class="btheme">    
    <a href="/a1"><img src="/a1.jpg" /></a>
    <div class="caption">
         <div>image caption</div>
    </div>   
</div>

<div class="btheme">    
   <a href="/a3"><img src="/a3.jpg" /></a>
   <div class="caption">
       <div>image caption3</div>
   </div>   
</div>

<div class="btheme">    
   <a href="/a2"><img src="/a2.jpg" /></a>
   <div class="caption">
      <div>image caption2</div>
   </div>   
</div> 
```

我使用下面的代码在 jquery 中显示/隐藏标题，

```
<script type="text/javascript">

    jQuery(document).ready(function(){

         jQuery("div.btheme .img").mouseover(function(){
              jQuery(this).parent().find("div.caption").css('display','none');              
         });

         jQuery("div.btheme .img").mouseout(function(){
             jQuery(this).parent().find("div.caption").css('display','block');              
         });                
   });

  </script> 
```

这没用？。我怎样才能做到这一点？。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:48:11.190

去掉前面的点`.img`。

此外，要选择标题 div，请改用：

```
jQuery(this).closest("div.btheme").find("div.caption")... 
```

`jQuery(this).parent()`会给你错误的锚标签。

**更新：** 这是[**jsfiddle**](http://jsfiddle.net/v2ZH3/)中的工作代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:48:43.770

只是`img`没有`.img`

```
jQuery("div.btheme img").mouseover(function(){
   jQuery(this).parent().next("div.caption").css('display','none');
});

jQuery("div.btheme img").mouseout(function(){
   jQuery(this).parent().next("div.caption").css('display','block');    
}); 
```

# maven-plugin - 将 JVM 选项传递给 Maven 插件

> ID：10408308
> 
> 赞同：2
> 
> 时间：2012-05-02T05:43:03.780
> 
> 标签：maven-plugin

我知道像surefire这样的插件有一个“argLine”配置参数，它们传递给运行插件特定目标的JVM。据我了解，默认情况下，maven 插件是分叉的并在单独的 JVM 中运行（如果我错了，请纠正我）。我试图弄清楚如何将 VM 参数传递给 maven 插件[jibx](https://github.com/jibx/maven-plugin/tree/master/jibx-maven-plugin)，但不知道是否有更简单/声明性的方式（或通过 Util 类）可以配置它来执行此操作。在万无一失的情况下，booterclient 中有一些实用程序类似乎正在处理这个问题，但该功能似乎在插件中是通用的，对吧？因此想知道 Mojo/Plexus 是否有一些支持可以轻松添加它而无需编写一堆管道代码。再次，如果我的理解不正确，请纠正我

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:26:06.447

实际的 Maven 插件类在与 Maven 相同的 JVM 中运行。

如果 Maven 插件包装了一个单独的工具，它取决于 Maven 插件是如何编写的，它是否分叉一个进程。

例如，Cobertura Maven 插件派生了一个流程来执行 Cobertura 的事情。这种分叉没有技术原因，在 Cobertura 的情况下，JVM 的分叉是为了解决 Cobertura 工具本身的 GPL 许可。

正如您所注意到的，Surefire 插件通常会分叉一个运行单元测试的进程。它在技术上不需要分叉（请参阅 参考资料`forkMode=never`），但是由于需要分叉的 JVM 的某些部分的隔离性较差，这是有充分理由的，例如系统属性是全局的。

查看您问题中的插件，您[可以看到它只是直接调用 JIBX 的 main 方法](https://github.com/jibx/maven-plugin/blob/master/jibx-maven-plugin/src/main/java/org/jibx/maven/AbstractJibx2WsdlMojo.java#L222)。换句话说，它根本没有分叉 JVM。如果有你想要的 JVM 选项，你需要使用`MAVEN_OPTS`环境变量来指定它们（副作用是它们对于 Maven 来说是全局的，如果你忘记指定它们，那么事情就不会像你期望的那样工作）

我认为要解决此问题，您应该向插件建议一个补丁，该插件为分叉的 JVM 分叉并接受 JVM 选项

# winapi - 如何通过发送虚拟键 VK_LAUNCH_MEDIA_SELECT 来确定它将启动哪个播放器

> ID：10408311
> 
> 赞同：0
> 
> 时间：2012-05-02T05:43:43.990
> 
> 标签：winapi, vbscript, media-player, sendkeys, keyboard-input

在 Win2K（或更高版本）下，通过发送 Virtual-Key VK_LAUNCH_MEDIA_SELECT，可以启动播放器。

如果安装了多个播放器软件，如何确定它将启动哪一个？

示例 VBS 代码：

```
Wscript.CreateObject("Wscript.Shell").Sendkeys chr(&h88b5) 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)

[http://msdn.microsoft.com/zh-cn/library/dd375731](http://msdn.microsoft.com/zh-cn/library/dd375731)

```
VK_LAUNCH_MEDIA_SELECT
0xB5
Select Media key 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:11:34.890

前台窗口可以为响应[WM_APPCOMMAND](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646275%28v=vs.85%29.aspx)消息做任何它想做的事情，如果它不处理该消息，则外壳挂钩 (HSHELL_APPCOMMAND) 开始处理它，如果没有挂钩处理该消息，则 Windows 检查注册表中的[AppKey](http://www.microsoft.com/mspress/books/sampchap/6232.aspx#120)键。（您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)查找特定按键的编号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T16:06:17.373

`VK_LAUNCH_MEDIA_SELECT`实际上是由系统接收并翻译成一个`WM_APPCOMMAND`with `lParam`as `APPCOMMAND_LAUNCH_MEDIA_SELECT`。所以理论上，任何实现这个处理程序的程序都可以启动。[此页面](http://msdn.microsoft.com/en-us/windows/hardware/gg463446.aspx#EZJAC)（尽管很旧）列出了侦听的默认应用程序`WM_APPCOMMAND`：

*   IE浏览器
*   帮助
*   DVD播放机
*   激光唱机
*   媒体播放器
*   音量控制系统托盘小程序

显然，其中只有少数真正适用于`APPCOMMAND_LAUNCH_MEDIA_SELECT`.

但是，我不知道翻译机制实际上是如何工作的。似乎并非每个应用程序都会收到翻译后的`WM_APPCOMMAND`消息。在我的键盘上，我尝试按下发送`VK_VOLUME_UP`. 音量按预期上升，因为它是由音量控制系统托盘小程序处理的。但是，我打开了一个实例`notepad.exe`并使用 Spy++ 监视它的消息。即使在前台，它也没有收到任何消息。奇怪的是，如果按下播放/暂停按钮，只要有焦点，`VK_MEDIA_PLAY_PAUSE`就会收到通过。我会用 测试，但我实际上不确定对应的按钮（或者我的键盘是否有它）。`WM_APPCOMMAND``notepad.exe``VK_LAUNCH_MEDIA_SELECT`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:25:21.557

谢谢，Mike Kwan 的回复。

通过测试一个程序与各种音频文件相关的大量设置。最终确定，这将取决于**与哪个程序关联的****CDA（CD 音频）**文件。

 **如果您将 CDA（CD 音频）文件的默认关联设置为 Notepad 或 Paint 或**任何**其他**程序**，它仍然可以发送相同的虚拟键来打开相应的程序。**

# sql - Vertica 中的 Where 子句

> ID：10408313
> 
> 赞同：0
> 
> 时间：2012-05-02T05:43:48.340
> 
> 标签：sql, database, data-warehouse, teradata, vertica

我正在尝试将 Vertica 视图定义转换为 Teradata。我在 Vertica 中遇到了 where 子句，类似于

`Where ( ColumnA or ColumnB);`

我不确定这是如何工作的，因为没有比较。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:53:03.910

相当于

```
WHERE ColumnA = TRUE OR ColumnB = TRUE 
```

假设两列都可以强制转换为布尔值。（我手头没有的 Vertica 文档包含一个允许类型强制转换的图表；请查看。）

# spring - 从 Servlet 的 HTTPSession 获取 Spring 主要用户

> ID：10408315
> 
> 赞同：1
> 
> 时间：2012-05-02T05:43:53.220
> 
> 标签：spring, spring-security

我有一个使用 Spring 3.* 的 Web 应用程序，并且我的 Web 应用程序中有一个 Flash 组件需要 POST 到 Servlet。在 Servlet 的 doPost 方法中，我想检查 Spring 应用程序上下文以确保存在经过身份验证的会话，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:13:55.943

那么它很简单，只需使用

```
Authentication auth = SecurityContextHolder.getContext().getAuthentication(); 
```

# php - 如何将小时分钟和 pm/m 转换为 strtotime

> ID：10408323
> 
> 赞同：-2
> 
> 时间：2012-05-02T05:45:11.383
> 
> 标签：php

我有一个时间价值`04:30` `(h:mts am/pm)`下午。我想将其转换为 strtotime

我还需要从 strtotime 转换回这种格式`(h:mits am/pm)`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:48:59.917

阅读 php [http://php.net/manual/en/function.time.php的这个文档](http://php.net/manual/en/function.time.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:50:48.703

试试这个：

```
$time_string = '04:30 pm';
$time        = strtotime($time_string);

echo 'PHP Time: ' . $time . PHP_EOL;
echo 'Human Time: ' . date('h:i a', $time); 
```

在这里演示：http: [//ideone.com/SR58g](http://ideone.com/SR58g)

# c# - 在单选按钮控件列表上的项目之间添加文本

> ID：10408325
> 
> 赞同：1
> 
> 时间：2012-05-02T05:45:21.717
> 
> 标签：c#, asp.net

我需要在列表项之间添加一些文本，但我还没有看到这样做的方法。我已经研究过在项目之间添加空格，但我不知道如何在列表项之间添加文本。

```
 <asp:RadioButtonList ID="RadioButtonList1" runat="server" >
 need to add text here
    <asp:ListItem Value="10.00" Selected="True">this is item1</asp:ListItem>
 need to add text here
    <asp:ListItem Value="10.00">this is item2 </asp:ListItem>
 need to add text here
    <asp:ListItem Value="10.00"> this is item3 </asp:ListItem>

</asp:RadioButtonList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:57:47.077

您可以使用多个`RadioButton`控件来实现这一点，也可以根据需要对它们进行分组。

`RadioButtonList`将不允许您在两者之间插入文本。这是来自[MSDN](http://msdn.microsoft.com/en-us/library/h1sa1wdz%28v=vs.71%29.aspx)的引用：

> RadioButtonList 控件不允许您在按钮之间插入文本，但如果要将按钮绑定到数据源，则使用起来要容易得多。编写检查哪个按钮被选中的代码也稍微容易一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:10:38.177

我将创建一个自定义 RadioButtonList 控件，以便您可以实现自己的自定义 ListItem 类型并适当地[呈现](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.radiobuttonlist.render%28v=vs.100%29.aspx)客户 ListItem 属性中的值。

ListItem 是密封的，所以你不能继承它。但是，您可以创建自己的类来模仿 ListItem，并为您希望能够显示每个列表项的附加文本添加更多属性。

然后，在您的自定义单选按钮列表的 Render 方法中，您可以在输出正常列表项属性（文本和值）之前在它们之间渲染标签和文本。

高温高压

# scala - Play 2.0 - Build.scala - 从 pom.xml 转换

> ID：10408326
> 
> 赞同：2
> 
> 时间：2012-05-02T05:45:30.560
> 
> 标签：scala, maven, sbt, playframework-2.0

我正在尝试从 Nexus maven repo 迁移到使用[https://github.com/jcaddel/maven-s3-wagon](https://github.com/jcaddel/maven-s3-wagon)。上马车？我已经阅读了一些关于 SBT 构建脚本的内容，但这似乎不是我想要的……我错过了什么吗？文档很少。

这是我的游戏！2.0 构建.scala 文件：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

  val appName = "my-play-app"
  val appVersion = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    "org.fusesource.mqtt-client" % "mqtt-client" % "1.0")

  val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
    resolvers ++= Seq(
      "Maven Repository" at "http://repo1.maven.org/maven2/",
      "fusesource.snapshots" at "http://repo.fusesource.com/nexus/content/repositories/snapshots",
      "fusesource.releases" at "http://repo.fusesource.com/nexus/content/groups/public"))
} 
```

这是我需要从 pom.xml 文件转换为 Build.scala 的内容（通过 wagon wiki）：

```
<build>
 <extensions>
  <extension>
    <groupId>org.kuali.maven.wagons</groupId>
    <artifactId>maven-s3-wagon</artifactId>
    <version>[S3 Wagon Version]</version>
  </extension>
 </extensions>
</build> 
```

和

```
<distributionManagement>
 <site>
  <id>s3.site</id>
  <url>s3://[AWS Bucket Name]/site</url>
 </site>
 <repository>
  <id>s3.release</id>
  <url>s3://[AWS Bucket Name]/release</url>
 </repository>
 <snapshotRepository>
  <id>s3.snapshot</id>
  <url>s3://[AWS Bucket Name]/snapshot</url>
 </snapshotRepository>
</distributionManagement> 
```

我想我了解如何将分发部分添加到 Build.scala：

```
 import sbt._
    import Keys._
    import PlayProject._

    object ApplicationBuild extends Build {

      val appName = "my-play-app"
      val appVersion = "1.0-SNAPSHOT"

      val appDependencies = Seq(
        "org.fusesource.mqtt-client" % "mqtt-client" % "1.0")

      val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
        resolvers ++= Seq(
          "Maven Repository" at "http://repo1.maven.org/maven2/",
          "fusesource.snapshots" at "http://repo.fusesource.com/nexus/content/repositories/snapshots",
          "fusesource.releases" at "http://repo.fusesource.com/nexus/content/groups/public",
          "s3.site" at "s3://[AWS Bucket Name]/site",
          "s3.release" at "s3://[AWS Bucket Name]/release",
          "s3.snapshot" at "s3://[AWS Bucket Name]/snapshot"))
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T10:07:21.327

看起来 sbt 中仍然没有自动 S3 发布支持（尽管有[s3-plugin](https://github.com/sbt/sbt-s3/)）。但我认为你可以很容易地创建自己的，因为

1.  sbt 可以通过插件增强
2.  Maven 插件只是 POJO（因此您可以在 Maven 之外轻松地重用它们）
3.  有一个[现有的 Maven 插件](https://github.com/jcaddel/maven-s3-wagon)已经可以满足您的需求

我想你可以

1.  使用[sbt 发布插件](https://github.com/sbt/sbt-release)...
2.  ...添加您自己的自定义发布步骤...
3.  ...调用[`S3Wagon.putResource`](https://github.com/jcaddel/maven-s3-wagon/blob/master/src/main/java/org/kuali/maven/wagon/S3Wagon.java)或[`S3Plugin.S3.s3Settings.upload`](https://github.com/sbt/sbt-s3/blob/master/src/main/scala/S3Plugin.scala)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T19:49:37.210

[sbt-aether-deploy](https://github.com/arktekk/sbt-aether-deploy)、[maven-s3-wagon](https://github.com/jcaddel/maven-s3-wagon)和[fmt-sbt-s3-resolver 的组合](https://github.com/frugalmechanic/fm-sbt-s3-resolver)对我来说效果很好

构建.sbt：

```
publishMavenStyle := true

publishTo <<= version { v: String =>

  if (v.trim.endsWith("SNAPSHOT"))
    Some("Snapshots" at "s3://myrepo/snapshots")
  else
    Some("Releases" at "s3://myrepo/releases")
}

aetherSettings

aetherPublishSettings

wagons := Seq(aether.WagonWrapper("s3", "org.kuali.maven.wagon.S3Wagon")) 
```

插件.sbt:

```
addSbtPlugin("no.arktekk.sbt" % "aether-deploy" % "0.13")

addSbtPlugin("com.frugalmechanic" % "fm-sbt-s3-resolver" % "0.4.0")

libraryDependencies += "org.kuali.maven.wagons" % "maven-s3-wagon" % "1.2.1" 
```

[fm-sbt-s3-resolver](https://github.com/frugalmechanic/fm-sbt-s3-resolver)用于解析 s3 依赖项和用于部署的以太。[单独使用fm-sbt-s3-resolver](https://github.com/frugalmechanic/fm-sbt-s3-resolver)部署不会 AFAIK 生成和发布元数据（maven-metadata.xml）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T05:57:29.420

Sbt 不支持 maven 扩展，这为您提供了 s3:// 协议，所以简而言之，没有简单的方法可以做您想做的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T10:01:07.623

有一个[用于 sbt 的 S3 插件](https://github.com/sbt/sbt-s3)可用。

# java - 如何在带有复选框数组的滚动窗格中显示 db 查询的结果？

> ID：10408333
> 
> 赞同：2
> 
> 时间：2012-05-02T05:45:54.693
> 
> 标签：java, swing, jtable, jscrollpane, checkbox

在 java 中，我查询一个数据库并检索一个结果集，我想将其显示在滚动窗格中。

除了显示查询结果外，我还希望在滚动窗格中每一行的左侧有一个复选框。

添加复选框是我不知道该怎么做的部分。任何有关如何执行此操作的建议将不胜感激。

我正在使用 Swing，我的 IDE 是 Netbeans 7.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T05:55:35.170

使用 JTable 将其放入 JScrollPane 链接如何将 ResultSet 转换为 TableModel [http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel](http://technojeeves.com/joomla/index.php/free/59-resultset-to-tablemodel)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T06:11:02.493

除了@Stan 的示例，[默认的渲染器和编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)是`Boolean`a `JCheckbox`，因此返回`Boolean`列的类。[这里](https://stackoverflow.com/a/7137801/230513)有一个例子。

# include - Mac Ogre Xcode 项目找不到标题

> ID：10408334
> 
> 赞同：0
> 
> 时间：2012-05-02T05:46:26.080
> 
> 标签：include, osx-lion, ogre

在尝试使模板 Xcode 4 ogre 项目工作时，构建失败，因为它找不到 OgreCamera.h。

我已将 Ogre 安装到 /opt/local/lib/OGRE，并在创建 Xcode 4 项目时将其指定为 Ogre SDK 位置。

不用说，项目设置中的头文件和框架包含路径精确指向所有头文件的位置，但找不到其中一个。我尝试注释掉 OgreCamera.h 的包含，在尝试运行时，找不到下一个包含 OgreEntity.h。将其注释掉并再次运行，找不到下一个包含，依此类推（这些包含在 OgreFramework.h 中。

我不明白为什么这些标头（当我在 Finder 或终端中查找它们时明显存在）无法被项目找到，即使我像这样指定它们的完整路径：

```
#include </opt/local/lib/OGRE/lib/release/Ogre.framework/Versions/1.7.4/Headers/OgreCamera.h> 
```

我是否以某种方式错误地安装了 Ogre SDK？（我将它从 DMG 复制到适当的位置……）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:47:45.257

我遇到了同样的问题，并通过遵循 rjstelling 在该线程中的回答找到了部分成功：

[为什么 Xcode 找不到这个头文件？](https://stackoverflow.com/questions/5634071/why-cant-xcode-find-this-header-file)

这解决了 OgreCamera.h 包含问题，但现在我坚持包含 boost 库。它们不会在搜索路径或上面线程中建议的索引组中被拾取。

基本上它看起来像 XCode4 中的一个错误，必须在补丁发布之前解决。这里还有更多信息：

[Xcode 4（和依赖项）的编译、构建或存档问题](https://stackoverflow.com/questions/5584317/compile-build-or-archive-problems-with-xcode-4-and-dependancies)

# android - Android MenuItem setActionView(null) 崩溃

> ID：10408338
> 
> 赞同：2
> 
> 时间：2012-05-02T05:46:46.867
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-actionbar, actionbarsherlock

在 android 4.0.3 上，如果您调用`MenuItem.setActionView(null)`然后旋转屏幕，我的应用程序将崩溃。

我想要做的是模拟`actionbar`GMail**应用**程序，如果您单击一个项目，它会变成`progress bar`.

但是，它现在保存了 的状态，`ActionView`当它尝试恢复它时，它会这样说。

> 无法启动活动 ComponentInfo{}：java.lang.ClassCastException：android.view.AbsSavedState$1 无法转换为 android.widget.ProgressBar$SavedState

有没有人有这方面的工作代码？或解决方法？

哦，`actionbarsherlock`如果那件事，我会使用。它不应该因为在**4.03**上它只是调用所有的系统调用。

代码：

```
OnCreate()
    refreshMenuActionView = new ProgressBar(this.getActivity());
    refreshMenuActionView.setIndeterminateDrawable(this.getActivity().getResources().getDrawable(R.drawable.refresh_spinner));

AsyncTask.onPostExecute
                if ( refreshMenuItem != null ) {
                    refreshMenuItem.setActionView(null);
                }

    @Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.loadable_menu, menu);
    refreshMenuItem = menu.findItem(R.id.refreshMenuItem);
    if ( downloader != null && downloader.getStatus() == AsyncTask.Status.RUNNING ) {
            refreshMenuItem.setActionView(refreshMenuActionView);
    }
    searchMenuItem = menu.findItem(R.id.searchMenuItem);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/refreshMenuItem"
        android:title="@string/refresh_item_title"
        android:icon="@drawable/ic_menu_refresh"
        android:showAsAction="ifRoom" />
    <item
        android:id="@+id/searchMenuItem"
        android:title="@string/search_item_title"
        android:icon="@drawable/ic_menu_search"
        android:showAsAction="always" />
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:05:18.723

您能否在变成 ProgressBar 的单击周围发布更多代码？

我使用 ABS，下面是一些在用户单击按钮时启动 AsyncTask 和 ProgressBar 的代码（代码在 SherlockFragment 内）：

```
public class LoginFragment extends SherlockFragment {
      ...

    loginButton = (Button) getActivity().findViewById(R.id.loginButton);
    loginButton.setOnClickListener(loginListener);

public OnClickListener loginListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
            ProgressDialog progressDialog = new ProgressDialog(getActivity());
            progressDialog.setMessage("Logging in...");
            LoginTask loginTask = new LoginTask((Polling) getActivity(), progressDialog);
            loginTask.execute(); 
```

然后，在整个 ASyncTask 中控制 ProgressDialog（每个方法中的 setVisibility）：

```
public class LoginTask extends AsyncTask<String, Void, Integer> {

private ProgressDialog progressDialog;
private Polling activity;
private int id = -1;
private JSONParser jsonParser;
private static String loginURL = "";
private static String registerURL = "";
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";
private int responseCode = 0;

public LoginTask(Polling activity, ProgressDialog progressDialog)
{
    this.activity = activity;
    this.progressDialog = progressDialog;
}

@Override
protected void onPreExecute()
{
    progressDialog.show();
}

protected Integer doInBackground(String... arg0) {

    // check for login response
    try {
        if (json.getString(KEY_SUCCESS) != null) {
            String res = json.getString(KEY_SUCCESS);

            if(Integer.parseInt(res) == 1){
                //user successfully logged in
                // Store user details in SQLite Database
                DatabaseHandler db = new DatabaseHandler(activity.getApplicationContext());
                JSONObject json_user = json.getJSONObject("user");
                //Log.v("name", json_user.getString(KEY_NAME));
                // Clear all previous data in database
                userFunction.logoutUser(activity.getApplicationContext());
                db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), 
                        json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                responseCode = 1;
                // Close Login Screen
                //finish();

            }else{
                responseCode = 0;
                // Error in login
            }
        }

    } catch (NullPointerException e) {
        e.printStackTrace();

    }
    catch (JSONException e) {
        e.printStackTrace();
    }

    return responseCode;
}

@Override
protected void onPostExecute(Integer responseCode)
{

    if (responseCode == 1) {
        progressDialog.dismiss();
        activity.loginReport(responseCode);

    }
    if (responseCode == 0) {
        progressDialog.dismiss();
        activity.loginReport(responseCode);

    }

} 
```

}

# c# - 从不同的服务器 B 检索远程服务器 A 的文件列表

> ID：10408344
> 
> 赞同：1
> 
> 时间：2012-05-02T05:47:38.410
> 
> 标签：c#

我正在尝试从某个远程服务器获取文件详细信息列表，该服务器与我正在执行 exe 的服务器不同。

```
Server.Path(servername + "d:\foldername\") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T05:56:11.287

你有不同的可能性：

1.  编写一个从服务器 B 上运行的 exe 调用的 Web 服务应用程序。
2.  如果您在域上运行，您可以在服务器 B 上创建一个共享并使用它访问它`\\serverb\sharename`这将允许使用 Windows 用户实现集成安全性

根据您以后要添加的其他功能以及数据的敏感性，这对安全性有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:22:57.527

FTP 是另一种选择（如果在远程服务器上启用）。

# vb.net - 跟踪网页下载进度

> ID：10408345
> 
> 赞同：1
> 
> 时间：2012-05-02T05:47:44.633
> 
> 标签：vb.net, stream

我正在使用 VB.NET 的这段代码从网站下载文本：

```
Dim Str As System.IO.Stream
        Dim srRead As System.IO.StreamReader
        Dim req As System.Net.WebRequest = System.Net.WebRequest.Create("http://www.example.com/file.txt")
        Dim resp As System.Net.WebResponse = req.GetResponse
        Str = resp.GetResponseStream
        srRead = New System.IO.StreamReader(Str) 
```

它只是一个文本文件，而且很小，因此下载速度非常快。但我相信将来该文件会变得相当大。有没有办法从上述方法跟踪下载进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:57:55.093

您可以在对象的`ContentLength`属性中找到查找的总长度`WebResponse`。一旦你有了它，就很容易根据你从`GetResponseStream`.

# python - NumPy 中的 HDF5 数组提取和转换

> ID：10408346
> 
> 赞同：0
> 
> 时间：2012-05-02T05:47:57.507
> 
> 标签：python, numpy, hdf5

我有一些 HDF5 格式的原始每日海风数据，想知道如何使用 Numpy 将它们转换为风速和风向？</p>

原始的每日海风数据存储在两个 HDF5 文件中：u.hdf5 和 v.hdf5。每个HDF5文件包含三个内容：纬度、经度、u(或v)。u(或v)数组是3D的，0维表示小时(0:00-24:00)。我需要做的是将 u 和 v 数组切片为每小时（即 0:00-1:00），然后使用以下代码将它们转换为风速和风向：

```
#!/usr/bin/python2

import os
import sys
import math

def d2r(degree):
  radian = degree * math.pi / 180.0
  return (radian)

def r2d(radian):
  degree = radian * 180.0 / math.pi
  return (degree)

def uv2sd(u,v):
  s = math.sqrt((u*u)+(v*v))
  radian = math.atan2(u,v)
  degree = r2d(radian)
  if degree < 0:
    degree = 360 + degree
  return (s,d) 
```

之后，我需要创建另一个 HDF5 文件，其中包含纬度、经度和每小时风速和风向 (s,d) 信息。

非常感谢！

* * *

我尝试使用下面的代码，但没有奏效：

```
>>> import numpy
>>> import h5py
>>> import os
>>> import sys
>>> import math

>>> a=h5py.File('D:/Wind/u_100m/20100101.hdf5','r')
>>> b=a['u'].value
>>> c=b[0,:,:]
>>> cu=c
>>> d=h5py.File('D:/Wind/v_100m/20100101.hdf5','r')
>>> e=d['v'].value
>>> f=e[0,:,:]
>>> fv=f

>>> u=cu.reshape(-1)
>>> v=fv.reshape(-1)

>>> def d2r(d):
    r=d*math.pi/180.0
    return(r)

>>> def r2d(r):
    d=r*180.0/math.pi
    return(d)

>>> def uv2sd(u,v):
    s=math.sqrt((u*u)+(v*v))
    d=math.atan2(u,v)
    if d<0:
        d=360+d
    return (s,d)

>>> print uv2sd(u,v)

Traceback (most recent call last):
  File "<pyshell#55>", line 1, in <module>
    print uv2sd(u,v)
  File "<pyshell#54>", line 2, in uv2sd
    s=math.sqrt((u*u)+(v*v))
TypeError: only length-1 arrays can be converted to Python scalars 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:40:08.580

您希望脚本返回数组或列表的平方根，但除非您有一个元素数组或列表，否则这是不可能的！

举个例子：

```
import numpy as np
import math

a = np.array([2, 4, 6])
s = math.sqrt(a) 
```

这行不通。你会得到同样的错误：

```
TypeError: only length-1 arrays can be converted to Python scalars 
```

您必须为`math.sqrt`数组的每个元素调用该函数...例如：

```
for i in a:
    s = math.sqrt(i)
    print s 
```

现在你会得到你想要的：

```
1.41421356237
2.0
2.44948974278 
```

* * *

如果您对函数进行一些小的更改，您的代码应该可以工作`uv2sd`：

```
def uv2sd(u,v):
    s = []
    d = []
    for i in range(len(u)):
        angulo = math.atan2(u[i],v[i])
        if angulo < 0:
            angulo = 360 + angulo
        d.append(angulo)
        s.append(math.sqrt((u[i]*u[i])+(v[i]*v[i])))     
    return s, d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:44:35.087

**struct**模块用于操作二进制打包数据。

您读取和写入字符数组（即字符串）到外部文件，并在内部将它们转换为 python 存储类型。

您所要做的就是创建一个基于理解 HDF5 的结构的函数或类

例如

```
import struct
f=open("infile.dat","rb")

s=struct.Struct('fl')
BLOCKSIZE=s.size()

mydata=[]
data=f.read()
f.close()
for p in range(0,len(data),BLOCKSIZE):
    b=data[p:p+BLOCKSIZE]
    mydata.append(s.unpack(b))
print mydata 
```

# python - 运行 Python 图形和代码

> ID：10408348
> 
> 赞同：0
> 
> 时间：2012-05-02T05:48:01.913
> 
> 标签：python, tkinter

我有一个程序，我只是在其中添加图形，但是我在运行我的主代码和图形时遇到了问题。基本上我有这样的事情：

```
def mainFunction():
    while True:
        run code in here

root = Tk()
board = Canvas(root, height=710, width=1000)
board_image = PhotoImage(file="/path/example.jpg")
photo = board.create_image(0,0, anchor=NW, image=board_image)
board.pack()

mainFunction
root.mainloop() 
```

我只能运行 mainFunction 或图形，因为无论我在代码中首先运行哪个都是唯一运行的。它不会停止允许下一个代码运行。必须有一种简单的方法来让图形和代码并排运行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:07:10.683

用于`Tk.after_idle()`注册将完成所需工作的*功能*。继续一块一块地做，直到所有的工作都完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:21:15.397

一般来说，您不能在 Tkinter 应用程序中放置无限循环。为什么？它已经在运行一个无限循环：事件循环。您的代码相当于：

```
while <there are more events to service>:
    while True:
        <run code in here>
    <get the next event>
    <service the event> 
```

看到问题了吗？您正在阻止代码为事件提供服务，而事件是 GUI 的生命线。

相反，您需要通过添加要在循环内运行的代码来利用已经运行的无限循环。您可以使用`after`(and `after_idle`) 执行此操作。这将把一个甚至放在队列中。如果在处理该事件期间您再次调用`after_idle`，则您有效地设置了一个在事件循环内工作的无限循环。

例如：

```
def do_one_iteration(self):
    <run code in here>
    self.after(100, self.do_one_iteration) 
```

然后，在你的主逻辑的某个地方，或者响应一个按钮，你调用`do_one_iteration`. 它将对您以前的无限循环进行一次迭代。完成后，它会指示 Tkinter 在 100 毫秒后再次调用自己。当该时间段过去时，您的代码将运行，它会在 100 毫秒内安排另一次迭代，等等。您可以将间隔更改为您想要的任何时间；间隔越小，您的代码运行得越快，但您让 GUI 无法获得事件的机会就越大。

请注意，这仅在`<run code in here>`运行相对较快时才有效。当它运行时，您的 GUI 将冻结。如果它可以在几百毫秒内完成一次迭代，那么用户永远不会知道。如果它需要一秒钟或更长时间，它会很明显。

注意：此示例假设您的主应用程序是一个继承自 Tkinter 小部件的对象。如果不是这种情况，它仍然可以工作，你只需要删除`self`参数。一个更好的解决方案是重构您的 GUI 以使用对象——这是一种更灵活的实现 GUI 的方式。

# javascript - 模糊功能在 Firefox 中不起作用

> ID：10408350
> 
> 赞同：2
> 
> 时间：2012-05-02T05:48:15.560
> 
> 标签：javascript, jquery, html

`Blur`我对 jQuery函数有疑问

我这样编码：

```
<head>
<script src="_js/jquery-1.6.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#l').blur(function(){
        if($(this).val()=='')
            alert('Invalid');
    });
});
</script>
</head> 
```

我正在使用它来识别输入字段是否为空。如果我运行此代码，那么如果我将其留空并单击其他位置，`Blur`则不会调用该函数并且不会生成警报

我正在使用 Firefox 10.1 运行代码

HTML：

```
<form method="post" action="Login.php" id="Log">
<select id="Login" name="Type">
<option value="Sel" selected="selected">Select Login type</option>
<option value="Student">Student</option>
<option value="Faculity">Faculity</option>
</select>
<div id="type">
<p id="Ch">Group Id: &nbsp;<input id="l" name="log" type="text"/></p>
<p id="Pass">Password: &nbsp; <input id="p" name="Pass" type="password" /></p>
<input id="Cond" type="Text" />
<input type="submit" value="Login"  />
</div>
<p id="Invalid" style="padding-top:.75em; color:#FF0000;">Login Field Empty </p>
</form> 
```

代码的内容通过选择和代码更改是这个组ID和密码在开头隐藏并且在下面的代码中选择选项时更改

```
$('#Login').change(function() {
if($(this).val()=='Sel')
$('#type').hide();
else if($(this).val()=='Student')
{
    $('#Ch').html('<p id="Ch">Group Id: &nbsp; &nbsp;<input id="l" name=" log" type="text" /></p>')
    $('#type').show(10);
}
else
{
$('#Ch').html('<p id="Ch">Faculity Id: &nbsp;<input id="l" name="log" type="text" /></p>')
$('#type').show(10);
} 
```

});

我认为它引起了问题请检查并告诉我如果它引起一些问题或者我做错了有什么替代方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T05:53:30.800

`$('#input')`# 用于 ID 选择器，尝试使用`$('input')`标签名称选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:53:37.247

除非您的输入具有“输入”的 ID，否则您应该将输入引用为`$('input')`. 这将创建一个包含所有“输入”类型元素的 jQuery 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:20:26.553

在您的帖子中，您有这段 JavaScript 代码：

```
$('#Login').change(function() {
if($(this).val()=='Sel')
$('#type').hide();
else if($(this).val()=='Student')
{
    $('#Ch').html('<p id="Ch">Group Id: &nbsp; &nbsp;<input id="l" name=" log" type="text" /></p>')
    $('#type').show(10);
}
else
{
$('#Ch').html('<p id="Ch">Faculity Id: &nbsp;<input id="l" name="log" type="text" /></p>')
$('#type').show(10);
} 
```

我能问一下这段代码在页面中的位置吗？执行顺序可能有问题。

# java - 在 Web 应用程序中显示来自本地计算机的 JFree 图表图像

> ID：10408352
> 
> 赞同：0
> 
> 时间：2012-05-02T05:48:20.443
> 
> 标签：java, html, image, struts2, jfreechart

我正在使用 JFree 图表库生成图表。生成后，我将它保存到本地机器（需求文档专门读取我已将其保存在本地机器中）。

现在 Web UI 中有一个下拉菜单，用于将生成的图像导出到 excel 或在网页本身中呈现图像。

由于我将图像保存在本地计算机中，**因此 *img src* html 标记不起作用。**

有没有办法解决这个问题？

使用的服务器：Weblogic

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:07:51.720

您需要以编程方式从磁盘读取文件的内容，并使用流通过一些 servlet 提供它，并将页面中 Img 标记的 url 设置为此 servlet。

# r - 将变量添加到R中的列表

> ID：10408356
> 
> 赞同：1
> 
> 时间：2012-05-02T05:48:25.220
> 
> 标签：r

我在一个列表中有 28 个列表，我尝试将另一个名为 ID 的变量添加到每个单独的列表中。我[在列表中找到了这个 Dataframes；添加一个具有数据框名称的新变量](https://stackoverflow.com/questions/7073785/dataframes-in-a-list-adding-a-new-variable-with-name-of-dataframe)非常有帮助。但是当我尝试他的代码时，它在我的情况下不起作用。我认为这是因为我的列表没有明确的标签 [1]、[2].[3] 等。代码可以识别。

```
all$id <- rep(names(mylist), sapply(mylist, nrow))

>List of 1
$ :List of 28

  ..$ :'data.frame':    271 obs. of  12 variables:

  .. ..$ Sample_ID                 : Factor w/ 271 levels "MC25",..: 19 27 2

  .. ..$ Reported_Analyte          : Factor w/ 10 levels "2-Butoxyethanol",..: 7 7 7 

 ..$ Date_Collected            : Factor w/ 71 levels "2010-05-08","2010-05-09",..: 8 9 1

  .. ..$ Result2                   : num [1:271] 0.11 0.11 0.11 0.11 

  ..$ :'data.frame':    6 obs. of  12 variables:

  .. ..$ Sample_ID                 : Factor w/ 271 levels "MC25",..: 19 27 2

  .. ..$ Reported_Analyte          : Factor w/ 10 levels "2-Butoxyethanol",..: 7 7 7 

 ..$ Date_Collected            : Factor w/ 71 levels "2010-05-08","2010-05-09",..: 8 9 1

  .. ..$ Result2                   : num [1:271] 0.11 0.11 0.11 0.11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:24:52.327

我使用带有样本的列表的构造示例来回答这个问题`mtcars`。

首先，创建一个数据框列表。`mtcars`通过从列表的每个元素中抽取 10 行来做到这一点：

```
ml <- lapply(1:3, function(x)mtcars[sample(1:32, 10), 1:3]) 
```

所以，现在您有一个包含 3 个数据框的未命名列表。接下来，您要添加一`id`列。诀窍是使用`lapply`一系列列表项`seq_along(ml)`，然后将`cbind`您的 id 用于每个数据框：

```
ml2 <- lapply(seq_along(ml), function(x)cbind(ml[[x]], id=x)) 
```

结果是您所需要的：

```
str(ml2)
List of 3
 $ :'data.frame':   10 obs. of  4 variables:
  ..$ mpg : num [1:10] 15 24.4 26 15.8 22.8 21 32.4 17.3 17.8 30.4
  ..$ cyl : num [1:10] 8 4 4 8 4 6 4 8 6 4
  ..$ disp: num [1:10] 301 147 120 351 108 ...
  ..$ id  : int [1:10] 1 1 1 1 1 1 1 1 1 1
 $ :'data.frame':   10 obs. of  4 variables:
  ..$ mpg : num [1:10] 33.9 19.2 24.4 10.4 30.4 22.8 16.4 21.4 15.5 21.5
  ..$ cyl : num [1:10] 4 6 4 8 4 4 8 6 8 4
  ..$ disp: num [1:10] 71.1 167.6 146.7 460 75.7 ...
  ..$ id  : int [1:10] 2 2 2 2 2 2 2 2 2 2
 $ :'data.frame':   10 obs. of  4 variables:
  ..$ mpg : num [1:10] 15.5 21 13.3 21.5 21.4 30.4 21 18.1 30.4 15.2
  ..$ cyl : num [1:10] 8 6 8 4 4 4 6 6 4 8
  ..$ disp: num [1:10] 318 160 350 120 121 ...
  ..$ id  : int [1:10] 3 3 3 3 3 3 3 3 3 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T07:30:59.243

真的不是很清楚你想要实现什么（你链接到的帖子是关于折叠数据框列表并在折叠版本中添加一个 ID 变量，指示折叠数据框中每行来自哪个原始数据框）。

我发现您的数据很复杂；您有一个列表中包含 28 个数据框*的*列表。您可以`str()`在 Q 中给出的输出中看到这一点。您可以使用这个示例数据集更好地看到这一点（这里所有的数据框都是相同的，但这只是为了方便）

```
set.seed(42)
dat <- data.frame(Sample_ID = factor(sample(10)),
                  Reported_Analyte = factor(sample(LETTERS, 10)),
                  Date_Collected = Sys.Date() + 0:9,
                  Result2 = rnorm(10))

mylist <- list(lapply(1:28, function(x) dat)) 
```

如果我们看一下`mylist`使用`str()`，我们会看到我提到的并发症的性质：

```
R> str(mylist, max = 2)
List of 1
 $ :List of 28
  ..$ Data_frame_ 1 :'data.frame':  10 obs. of  4 variables:
  ..$ Data_frame_ 2 :'data.frame':  10 obs. of  4 variables:
  ..$ Data_frame_ 3 :'data.frame':  10 obs. of  4 variables:
  ..$ Data_frame_ 4 :'data.frame':  10 obs. of  4 variables:
  ..$ Data_frame_ 5 :'data.frame':  10 obs. of  4 variables:
  ..$ Data_frame_ 6 :'data.frame':  10 obs. of  4 variables:
  ..$ Data_frame_ 7 :'data.frame':  10 obs. of  4 variables:
....<etc> 
```

您链接到的帖子的起始位置是外部列表*中*的列表，并且该列表具有命名组件。如果您不需要外部列表，最好在此阶段将其丢弃：

```
mylist2 <- mylist[[1]]
## the `[[` are important as we want the 1st component *inside* the list
## using `[` would just give us a list within a list again. 
```

然后可以将名称添加到此列表中

```
names(mylist2) <- paste("Data_frame_", seq_along(mylist2), sep = "") 
```

这将导致

```
R> str(mylist2)
List of 28
 $ Data_frame_1 :'data.frame':  10 obs. of  4 variables:
  ..$ Sample_ID       : Factor w/ 10 levels "1","2","3","4",..: 10 9 3 6 4 8 5 1 2 7
  ..$ Reported_Analyte: Factor w/ 10 levels "C","F","I","J",..: 6 7 10 2 5 8 9 1 3 4
  ..$ Date_Collected  : Date[1:10], format: "2012-05-02" "2012-05-03" ...
  ..$ Result2         : num [1:10] 1.305 2.287 -1.389 -0.279 -0.133 ...
 $ Data_frame_2 :'data.frame':  10 obs. of  4 variables:
  ..$ Sample_ID       : Factor w/ 10 levels "1","2","3","4",..: 10 9 3 6 4 8 5 1 2 7
  ..$ Reported_Analyte: Factor w/ 10 levels "C","F","I","J",..: 6 7 10 2 5 8 9 1 3 4
  ..$ Date_Collected  : Date[1:10], format: "2012-05-02" "2012-05-03" ...
  ..$ Result2         : num [1:10] 1.305 2.287 -1.389 -0.279 -0.133 ...
....<etc> 
```

请注意`List of 1`不再报告。

如果列表中的数据框列表对您很重要（不知道为什么会这样，但可以），那么您可以`[[1]]`直接将名称分配给 st 组件。

```
names(mylist[[1]]) <- paste("Data_frame_", seq_along(mylist[[1]]), sep = "") 
```

（请注意，我使用的是原始版本`mylist`，并且在这两种情况下，我都使用 . 来索引该列表`[[1]]`。）

结果与上述类似，但保留了列表结构中的列表：

```
R> str(mylist)
List of 1
 $ :List of 28
  ..$ Data_frame_1 :'data.frame':   10 obs. of  4 variables:
  .. ..$ Sample_ID       : Factor w/ 10 levels "1","2","3","4",..: 10 9 3 6 4 8 5 1 2 7
  .. ..$ Reported_Analyte: Factor w/ 10 levels "C","F","I","J",..: 6 7 10 2 5 8 9 1 3 4
  .. ..$ Date_Collected  : Date[1:10], format: "2012-05-02" "2012-05-03" ...
  .. ..$ Result2         : num [1:10] 1.305 2.287 -1.389 -0.279 -0.133 ...
  ..$ Data_frame_2 :'data.frame':   10 obs. of  4 variables:
  .. ..$ Sample_ID       : Factor w/ 10 levels "1","2","3","4",..: 10 9 3 6 4 8 5 1 2 7
  .. ..$ Reported_Analyte: Factor w/ 10 levels "C","F","I","J",..: 6 7 10 2 5 8 9 1 3 4
  .. ..$ Date_Collected  : Date[1:10], format: "2012-05-02" "2012-05-03" ...
  .. ..$ Result2         : num [1:10] 1.305 2.287 -1.389 -0.279 -0.133 ...
....<etc> 
```

如果您现在希望继续将各个数据框折叠成一个数据框，但保留有关它们来自哪个数据框的信息，我们将这样做`mylist2`：

```
all2 <- do.call("rbind", mylist2)
all2 <- transform(all2, id = rep(names(mylist2), sapply(mylist2, nrow)))
rownames(all2) <- seq_len(nrow(all2)) ## reset rownames for compactness 
```

这使：

```
R> head(all2)
  Sample_ID Reported_Analyte Date_Collected    Result2           id
1        10                L     2012-05-02  1.3048697 Data_frame_1
2         9                R     2012-05-03  2.2866454 Data_frame_1
3         3                W     2012-05-04 -1.3888607 Data_frame_1
4         6                F     2012-05-05 -0.2787888 Data_frame_1
5         4                K     2012-05-06 -0.1333213 Data_frame_1
6         8                T     2012-05-07  0.6359504 Data_frame_1 
```

因为`mylist`我们使用非常相似的东西，但只是索引`mylist`using `[[1]]`：

```
all1 <- do.call("rbind", mylist[[1]])
all1 <- transform(all1, id = rep(names(mylist[[1]]), sapply(mylist[[1]], nrow)))
rownames(all1) <- seq_len(nrow(all1)) ## reset rownames for compactness

R> head(all1)
  Sample_ID Reported_Analyte Date_Collected    Result2           id
1        10                L     2012-05-02  1.3048697 Data_frame_1
2         9                R     2012-05-03  2.2866454 Data_frame_1
3         3                W     2012-05-04 -1.3888607 Data_frame_1
4         6                F     2012-05-05 -0.2787888 Data_frame_1
5         4                K     2012-05-06 -0.1333213 Data_frame_1
6         8                T     2012-05-07  0.6359504 Data_frame_1 
```

`mylist[[1]]`正如您所看到的，如果您不需要外部列表，则必须反复引用您的数据框列表是很痛苦的。

**更新：**

如果您不想将列表折叠成单个数据框，请参阅@Andrie 的答案，但将其修改为：

```
ml2 <- ml1
ml2[[1]] <- lapply(seq_along(ml[[1]]), function(x)cbind(ml[[1]][[x]], id=x)) 
```

所以你在列表结构中考虑了列表。

# java-me - 无法使用诺基亚手机拍摄图像但在计算机应用程序中工作正常？

> ID：10408359
> 
> 赞同：2
> 
> 时间：2012-05-02T05:48:42.403
> 
> 标签：java-me, midp, mmapi

我正在制作一个应用程序，用户可以在其中使用相机，捕获该图像并将其保存到 C 驱动器，当我在 PC 上使用此应用程序时，我也能够执行所有这些操作。

但是，每当我在手机中使用此应用程序时，例如诺基亚 C2-01,02,03，我只能查看相机，但无法在短时间捕获图像，当我使用手机运行此应用程序时，它无法正常工作。

我的 Midlet 代码如下，请查看问题并支持我通过移动设备捕获图像：-

```
public class CaptureAndSaveImage extends MIDlet implements CommandListener {

    private Display display;

    // Form where camera viewfinder is placed
    private Form cameraForm;

    // Command for capturing image by camera and saving it. 
    // Placed in cameraForm.
    private Command cmdCapture;
    // Command for exiting from midlet. Placed in cameraForm.
    private Command cmdExit;

    // Player for camera
    private Player player;
    // Video control of camera
    private VideoControl videoControl;

    // Alert to be displayed if error occurs.
    private Alert alert;

    /**
     * Constructor.
     */
    public CaptureAndSaveImage() {
        InitializeComponents();
    }

    /**
     * Initializes components of midlet.
     */
    private void InitializeComponents() {
        display = Display.getDisplay(this);

        if(checkCameraSupport() == false) {
            showAlert("Alert", "Camera is not supported!", null);
            return;
        }

        try {
            createCameraForm();
            createCamera(); 
            addCameraToForm();
            startCamera();
        } catch(IOException ioExc) {
            showAlert("IO error", ioExc.getMessage(), null);
        } catch(MediaException mediaExc) {
            showAlert("Media error", mediaExc.getMessage(), null);
        } 
    }

    /**
     *  Creates and returns form where the camera control will be placed.
     */
    private void createCameraForm() {
        // Create camera form
        cameraForm = new Form("Camera");
        // Create commands for this form
        cmdCapture = new Command("Capture", Command.OK, 0);
        cmdExit = new Command("Exit", Command.EXIT, 0);
        // Add commands to form
        cameraForm.addCommand(cmdCapture);
        cameraForm.addCommand(cmdExit);
        // Set midlet as command listener for this form
        cameraForm.setCommandListener(this);
    }  

    /**
     * Check camera support.
     * @return true if camera is supported, false otherwise.
     */
    private boolean checkCameraSupport() {
        String propValue = System.getProperty("supports.video.capture");
        return (propValue != null) && propValue.equals("true");
    }    

    /**
     * Creates camera control and places it to cameraForm.
     * @throws IOException if creation of player is failed.
     * @throws MediaException if creation of player is failed.
     */
    private void createCamera() throws IOException, MediaException {
        player = Manager.createPlayer("capture://video");
        player.realize();
        player.prefetch();

        videoControl = (VideoControl)player.getControl("VideoControl");
    }

    /**
     * Adds created camera as item to cameraForm.
     */
    private void addCameraToForm() {
        cameraForm.append((Item)videoControl.
                initDisplayMode(VideoControl.USE_GUI_PRIMITIVE, null));
    }

    /**
     * Start camera player
     * @throws IOException if starting of player is failed.
     * @throws MediaException if starting of player is failed.
     */
    private void startCamera() throws IOException, MediaException  {
        if(player.getState() == Player.PREFETCHED) {
            player.start();
        }
    }

    /**
     * Saves image captured by camera.
     */
    private void captureAndSaveImage() {
        FileConnection file = null;
        OutputStream outStream = null;

        try {
            if(checkPngEncodingSupport() == false) {
                throw new Exception("Png encoding is not supported!");
            }

            // Capture image
            byte[] capturedImageData = 
                    videoControl.getSnapshot("encoding=png");

            // Get path to photos folder.
            String dirPhotos = System.getProperty("fileconn.dir.photos");
            if(dirPhotos == null) {
                throw new Exception("Unable get photos folder name");
            }

            String fileName = dirPhotos + "CapturedImage.png";
            // Open file
            file = (FileConnection)Connector.open(fileName, 
                    Connector.READ_WRITE);
            // If there is no file then create it
            if(file.exists() == false) {
                file.create();
            }
            // Write data received from camera while making snapshot to file
            outStream = file.openOutputStream();
            outStream.write(capturedImageData);

            showAlert("Info", "Image is saved in " + fileName, cameraForm);

        } catch(IOException ioExc) {
            showAlert("IO error", ioExc.getMessage(), cameraForm);
        } catch(MediaException mediaExc) {
            showAlert("Media error", mediaExc.getMessage(), cameraForm);
        } catch(Exception exc) {
            showAlert("Error", exc.getMessage(), cameraForm);
        } finally {
            // Try to close file
            try {
                if(outStream != null) {
                    outStream.close();
                }
                if(file != null) {
                    file.close();
                }
            } catch(Exception exc) {
                // Do nothing 
            }
        }
    }    

    /**
     * Checks png encoding support
     * @return true if png encoding is supported false otherwise.
     */
    private boolean checkPngEncodingSupport() {
        String encodings = System.getProperty("video.snapshot.encodings");
        return (encodings != null) && (encodings.indexOf("png") != -1);
    }

    /**
     * From MIDlet.
     * Signals the MIDlet that it has entered the Active state.
     */
    public void startApp() {
        if ( videoControl != null ) {
            display.setCurrent(cameraForm);
        }
    }    

    /**
     * From MIDlet.
     * Signals the MIDlet to enter the Paused state.
     */
    public void pauseApp() {        
        // TODO: pause player if it is running.
    }

    /**
     * Performs exit from midlet.
     */
    public void exitMIDlet() {
        notifyDestroyed();
    }

    /**
     * Shows alert with specified title and text. If next displayable is not
     * specified then application will be closed after alert closing.
     * @param title - Title of alert.
     * @param message - text of alert.
     * @param nextDisp - next displayable. Can be null.
     */
    private void showAlert(String title, String message, Displayable nextDisp) {
        alert = new Alert(title);
        alert.setString(message);
        alert.setTimeout(Alert.FOREVER);

        if(nextDisp != null) {
            display.setCurrent(alert, nextDisp);
        } else {
            display.setCurrent(alert);
            alert.setCommandListener(this);
        }
    }        

    /**
     * From MIDlet.
     * Signals the MIDlet to terminate and enter the Destroyed state.
     */
    public void destroyApp(boolean unconditional) {
        if(player != null) {
            player.deallocate();
            player.close();
        }
    }

    /**
     * From CommandListener.
     * Indicates that a command event has occurred on Displayable displayable.
     * @param command - a Command object identifying the command.
     * @param displayable - the Displayable on which this event has occurred.
     */
    public void commandAction(Command command, Displayable displayable) {
        // Handles "Capture image" command from cameraForm
        if(command == cmdCapture) {
            captureAndSaveImage();
        }
        // Handles "exit" command from forms
        if(command == cmdExit) {
            exitMIDlet();
        }
        // Handle "ok" command from alert
        if(displayable == alert) {
            exitMIDlet();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:44:59.047

也许您应该尝试在 captureAndSaveImage() 的 try-catch 块中捕获 OutOfMemoryError（最好捕获 Throwable，它也会捕获它而不是异常）

此外，您可能希望查看 fileName 以确保它尝试保存在正确的目录中

```
 showAlert("fileName", fileName, this);
    // Open file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T06:11:08.797

在您使用管理器类 jst 创建播放器的 creatCamera 方法中，尝试捕获模式而不是视频模式。

```
 player = Manager.createPlayer("capture://image"); 
```

我在 nokia-c1 中遇到了同样的问题。和

```
byte[] capturedImageData = videoControl.getSnapshot(null); 
```

通过在 getSnapshot 方法中 传递**null参数，您将获得设备默认支持的图像格式。**

# jquery - 悬停卡不适用于即时添加的数据

> ID：10408366
> 
> 赞同：0
> 
> 时间：2012-05-02T05:49:07.907
> 
> 标签：jquery

当我刷新页面时，悬停卡工作正常。但是当我使用添加一个 html 行时

```
 $('.addactanme').click( function(){
                var activityName = $('#activityName2').val();
                var listId = $('#listId').val();
                $.post(
                   "<?php echo SITE_URL?>ajax/activity/addActivity.php",
                   {name: activityName, listId: listId },
                   function(data) {
                       var returnValue = $.parseJSON(data);

                       $('#activityWhere').val(returnValue.id);
                       var activityText = "Activity " + activityName + " Created";
                       $('#activitySuccess').text(activityText);
                       $('#activitySuccess').fadeOut(5000);
                       //console.log($('#activityWhere').val());
                       $('#empty-active').empty();
                       $('#activties-added').append(returnValue.html);
                   }
             ); 
```

上面的功能，它不起作用。仅适用于使用添加的 html 内容

```
$('#activties-added').append(returnValue.html); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:11:32.133

问题可能是由于您发布的代码中的拼写错误，您可以尝试使用**.on**，例如：

```
$('.addactanme').on('click', function(){
 .... 
```

或者，如果以前版本的 jquery 则：

```
$('.addactanme').live('click', function(){
  ..... 
```

希望能帮助到你

# regex - 在 perl 中从字符串中删除字符和数字

> ID：10408367
> 
> 赞同：0
> 
> 时间：2012-05-02T05:49:19.727
> 
> 标签：regex, perl

我正在尝试重命名目录中的一堆文件，但我被困在其中的正则表达式部分。

我想从出现在开头的文件名中删除某些字符。

示例 1：`_00-author--book_revision_`

预期的：`Author - Book (Revision)`

到目前为止，我可以使用正则表达式删除下划线并将第一个字母大写

```
$newfile =~ s/_/ /g;
$newfile =~ s/^[0-9]//g;
$newfile =~ s/^[0-9]//g;
$newfile =~ s/^-//g;
$newfile = ucfirst($newfile); 
```

这不是一个好方法。我需要帮助删除所有字符，直到您点击第一个字母，当您点击第一个“-”时，我想在“-”之前和之后添加一个空格。另外，当我点击第二个“-”时，我想用“（”替换它。

非常感谢任何有关采取正确方法的指导、提示甚至建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:58:32.690

你的指示和你的例子不匹配。

根据您的指示，

```
s/^[^\pL]+//;    # Remove everything until first letter.
s/-/ - /;        # Replace first "-" with " - "
s/-[^-]*\K-/(/;  # Replace second "-" with "(" 
```

根据你的例子，

```
s/^[^\pL]+//;
s/--/ - /;
s/_/ (/;
s/_/)/;
s/(?<!\pL)(\pL)/\U$1/g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:05:31.720

```
$filename =~ s,^_\d+-(.*?)--(.*?)_(.*?)_$,\u\1 - \u\2 (\u\3),; 
```

我的 Perl 解释器（使用严格和警告）说最好这样写：

```
$filename =~ s,^_\d+-(.*?)--(.*?)_(.*?)_$,\u$1 - \u$2 (\u$3),; 
```

第一个可能是因为它的味道更*sedish*！（当然，两个版本的工作原理都是一样的。）

解释（根据[stema](https://stackoverflow.com/users/626273/stema)的要求）：

```
$filename =~ s/
  ^       # matches the start of the line
  _\d+-   # matches an underscore, one or more digits and a hypen minus
  (.*?)-- # matches (non-greedyly) anything before two consecutive hypen-minus
          #   and captures the entire match (as the first capture group)
  (.*?)_  # matches (non-greedyly) anything before a single underscore and
          #  captures the entire match (as the second capture group)
  (.*?)_  # does the same as the one before (but captures the match as the
          #  third capture group obviously)
  $       # matches the end of the line
/\u$1 - \u$2 (\u$3)/x; 
```

替换规范只是告诉 Perl 插入从 1 到 3的`\u${1..3}`捕获组，并且它们的第一个字符大写。如果您想将整个匹配（在捕获的组中）设为大写，则必须`\U`改用。

*x*标志打开*详细*模式，它告诉 Perl 解释器我们要使用*#*注释，所以它会忽略这些（以及正则表达式中的任何空格 - 所以如果你想匹配一个*空格*，你必须使用`\s`或者`\`）。不幸的是，我不知道如何告诉 Perl 忽略 * replacement* 规范中的空白 - 这就是我将其写在一行的原因。

（另请注意，我已将`s`终止符从更改`,`为`/`- 如果我使用`,`打开详细模式的 Perl 对我咆哮......不完全确定为什么。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T06:18:58.343

那么你想大写新文件名的所有组成部分，还是只大写第一个？你的问题在这一点上是不一致的。

请注意，如果您在 Linux 上，您可能有`rename`命令，它将接受一个 perl 表达式并使用它为您重命名文件，如下所示：

```
rename 'my ($a,$b,$r);$_ = "$a - $b ($r)" 
  if ($a, $b, $r) = map { ucfirst $_ } /^_\d+-(.*?)--(.*?)_(.*?)_$/' _* 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:02:56.657

如果他们都遵循该格式，请尝试：

```
my ($author, $book, $revision) = $newfiles =~ /-(.*?)--(.*?)_(.*?)_/;

print ucfirst($author ) . " - $book ($revision)\n"; 
```

# c - c中的指针操作

> ID：10408370
> 
> 赞同：1
> 
> 时间：2012-05-02T05:49:52.990
> 
> 标签：c, pointers

我对指针操作有疑问...

```
main()
{   int x=10;  // extra line added...
   char *p=x;

   printf("%d", &p)

   printf("%d", &p[0]);
   printf("%d" , &p[1]);
} 
```

此代码给出输出

地址 10.. 10 11

最后两个输出是怎么来的..谁能给我解释一下..？

代码变了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T05:53:37.813

这是未定义的行为。
在将某个值添加到该位置之前，指针需要指向有效的东西。

```
char a = 10;
char *p = &a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T09:10:23.550

将解释两种情况：

## 场景一：`char * p = x;`

`x == 10`,`p`是一个 char 指针，初始化为 10（用户程序无法访问的地址）：`p == 10`

`p`(ie, )的值`*p`会导致分段错误（无效的内存引用）

`p[0] == *(p + 0)`这`&p[0] == (p+0) == p` 是10。

因此`printf("%p", &p[0])`会给你10个。

`p[1] == *(p + 1)`和`&p[1] == (p+1)`

由于,`p`是一个字符指针，它以 为增量`sizeof(char)`，即 1

因此`printf("%p", &p[1])`会给你 10+1 = 11

## 场景二： `char * p = &x;`

这`p`是一个指向整数的 char 指针`x`

值`x`= 10

地址`x`= 1000（假设）

因此`p`= 1000

`p[0] == *(p + 0)`和`&p[0] == (p+0) == p`

因此`printf("%p", &p[0])`会给你1000

`p[1] == *(p + 1)`和`&p[1] == (p+1)`

由于,`p`是一个字符指针，它以 为增量`sizeof(char)`，即 1

IE`&p[1] == 1000+1 == 1001`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T06:54:18.017

`p`并将`&p[0]`被评估为相同的地址（数组的第一个元素的地址），即 10。

所以`&p[0]`将被评估`10`为11`&p[1]``&p[0] + sizeof(char)`

`*p`但是，当您取消引用 p ( )时，您的代码很可能会出现段错误。

以下代码将始终打印`True`.

```
main()
{  
    int* p; 
    printf("%s\n",p == &p[0] ? "True" : "False");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T05:51:56.770

```
char *p=10; 
```

目前的代码具有未定义的行为。指针`p`未指向任何有效的内存位置以在该位置初始化 10。

话虽如此，两者都`p`产生`&p[0]`相同的内存位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T06:55:53.760

您的代码中有一些错误：

```
int x = 10;
char * p = &x; // error  1 - you was assigning int to pointer

printf("%p\n", &p); //  error 2 - you printing address of pointer (char **), 
                    //  so different format string is needed
printf("%p\n",  &p[0]);  // same error 2 - printing address of first byte in int x
printf("%p\n" , &p[1]);  // same error 2 - printing address of second byte in int x 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T09:12:58.657

```
 printf("%d", &p[0]);
   printf("%d" , &p[1]); 
```

它将打印出 p 所指向的地址.. 因为 char *p=x; 而 x = 10;

然后,, &p[0] = 10, &p[1] = 11 &p[2] = 12, 等等..

```
 printf("%d", &p); 
```

我对此不太确定，但据我所知，在我的情况下，它将打印出内存 10 中包含的值 = 10000

```
 printf("%d", p); 
```

它将打印出 10，即 *p 值；

cmiiw

# android - 来自 Google Play 的付款被拒

> ID：10408371
> 
> 赞同：0
> 
> 时间：2012-05-02T05:49:54.663
> 
> 标签：android, credit-card, google-play

我有一个可以在 Google Play 上购买的小型 android 应用程序。我注意到最近大约 60% 的下载导致信用卡被 Google Play 拒绝。

为什么会有这么大的百分比？我预计会有一些卡会因为人们忘记更新而被拒绝，但 60% 非常高。是否有某种骗局可以免费获得软件？有没有其他人注意到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:10:50.867

您不必担心，Google 会负责信用卡处理。这通常发生在同一个人一次又一次地尝试购买您的软件并且在他的 CC 号码或其他信息中出错时。最终（s）他会找出错误并付款。或不。

# php - 监控和保护下载链接

> ID：10408374
> 
> 赞同：0
> 
> 时间：2012-05-02T05:50:14.140
> 
> 标签：php, codeigniter

我打算做一个网络应用程序来控制对用户的下载。为了防止用户直接访问文件，我可以做一个 htaccess 来防止下载文件。但我现在的问题是如何访问它。

我在想的是通过服务器路径访问文件并将文件放在服务器临时文件中，然后生成一个链接来下载它。问题是，如何做到这一点？此外，如果有其他更简单的方法可以做到这一点。

我正在使用 CI 顺便说一句。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:02:34.457

1.  将文件放在 webroot 之外，这样就无法通过 web 服务器访问它们。
2.  创建一个用户可以访问的 PHP 脚本，该脚本将从磁盘读取文件并将其输出给用户，请参阅[`readfile`](http://php.net/readfile).
3.  在该文件中实现您想要的任何类型的身份验证/授权机制。

# objective-c - 如何解决 Range 或 index out of bounds 的运行时错误？

> ID：10408375
> 
> 赞同：-1
> 
> 时间：2012-05-02T05:50:19.190
> 
> 标签：objective-c, nsrangeexception

我是 iPhone 的初学者，我得到了如下所示的运行时错误。当我在 getColor 方法中传递对象时“textView.textColor=[self getColor:appDelegate.pickcolor];” 我得到错误

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__NSCFConstantString substringWithRange:]: Range or index out of bounds”

```
- (UIColor *) getColor: (NSString *) hexColor
{
    //NSLog(@"Calling Getcolor..");
    unsigned int red, green, blue;
    NSRange range;
    range.length = 2;

    range.location = 0; 
    [[NSScanner scannerWithString:[hexColor substringWithRange:range]] scanHexInt:&red];
    //NSLog(@"\n\tRed :%d\n",red);
    range.location = 2; 
    [[NSScanner scannerWithString:[hexColor substringWithRange:range]] scanHexInt:&green];
    //NSLog(@"\n\tgreen :%d\n",green);
    range.location = 4; 
    [[NSScanner scannerWithString:[hexColor substringWithRange:range]] scanHexInt:&blue];   
    //NSLog(@"\n\tblue :%d\n",blue);
    return [UIColor colorWithRed:(float)(red/255.0f) green:(float)(green/255.0f) blue:(float)(blue/255.0f) alpha:1.0f];
} 
```

提出任何建议和解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:07:29.327

也许十六进制字符串不是 6 个字符或更多？

您可以在方法开始时添加健全性检查以捕捉该场景。

```
- (UIColor *) getColor: (NSString *) hexColor
{
    if ([hexColor length] < 6)
        return nil;

    // ...
} 
```

# iphone - 如何在后台下载表格视图单元格的多个图像？

> ID：10408378
> 
> 赞同：0
> 
> 时间：2012-05-02T05:50:30.820
> 
> 标签：iphone, uitableview

我想在 tableView 的一行中创建一个应用程序，将有 4 个按钮图像，这些图像将从后台服务器加载，因为如果我直接加载它们，那么表格视图会挂起一些。为此，我使用此代码在单元格中创建按钮并执行以在后台下载图像。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *hlCellID = @"hlCellID";

        UITableViewCell *hlcell = [tableView dequeueReusableCellWithIdentifier:hlCellID];
        if(hlcell == nil) {
            hlcell =  [[[UITableViewCell alloc] 
                        initWithStyle:UITableViewCellStyleDefault reuseIdentifier:hlCellID] autorelease];
            hlcell.accessoryType = UITableViewCellAccessoryNone;
            hlcell.selectionStyle = UITableViewCellSelectionStyleNone;
        }

        int section = indexPath.section;
        NSMutableArray *sectionItems = [sections objectAtIndex:section];

        int n = [sectionItems count];

        int i = 0, j = 0, tag = 1;
        int x = 10;
        int y = 30;

        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        for (i = 1; i<= n ; i++) //[arr count]
        {
            for(j=1; j<=4;j++)
            {

                if (i>=n) break;
                Item *item = [sectionItems objectAtIndex:i];

                CGRect rect = CGRectMake(x = x, y = y, 68, 65); 
                UIButton *button=[[UIButton alloc] initWithFrame:rect];
                [button setFrame:rect];
                UIImage *buttonImageNormal=[UIImage imageNamed:item.image];
                [button setBackgroundImage:buttonImageNormal    forState:UIControlStateNormal];
                [button setContentMode:UIViewContentModeCenter];
                // set the image to be loaded (using the same one here but could/would be different)
                NSURL *imgURL = [NSURL URLWithString:@"http://londonwebdev.com/wp-content/uploads/2010/07/featured_home.png"];      

                // Create an array with the URL and imageView tag to 
                // reference the correct imageView in background thread.
                NSMutableArray *arr = [[NSArray alloc] initWithObjects:imgURL, [NSString stringWithFormat:@"%d", tag], nil  ];

                // Start a background thread by calling method to load the image
                [self performSelectorInBackground:@selector(loadImageInBackground:) withObject:arr];
    //          button.tag = [tagValue intValue];
                button.tag = tag;
                //NSLog(@"....tag....%d", button.tag);

                [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
                [hlcell.contentView addSubview:button];
                [button release];

                tag++;

                x = x + 77; 

            }
            x = 10;
            y = y + 74;
        }
        [pool release];
        return hlcell;
    } 
```

上面的代码工作得很好，但是当我下载图像并尝试分配某个特定按钮时，我找不到按钮标签，尽管我可以在`touchupinside`操作时找到按钮标签。

```
- (void) loadImageInBackground:(NSArray *)urlAndTagReference  {

    NSLog(@"Received URL for tagID: %@", urlAndTagReference);

    // Create a pool
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    // Retrieve the remote image. Retrieve the imgURL from the passed in array
    NSData *imgData = [NSData dataWithContentsOfURL:[urlAndTagReference objectAtIndex:0]];
    UIImage *img    = [[UIImage alloc] initWithData:imgData];

    // Create an array with the URL and imageView tag to 
    // reference the correct imageView in background thread.
    NSMutableArray *arr = [[NSArray alloc] initWithObjects:img, [urlAndTagReference objectAtIndex:1], nil  ];

    // Image retrieved, call main thread method to update image, passing it the downloaded UIImage
    [self performSelectorOnMainThread:@selector(assignImageToImageView:) withObject:arr waitUntilDone:YES];

    [pool release];

}

    - (void) assignImageToImageView:(NSArray *)imgAndTagReference
    {

        // Create a pool
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        int i;
        UIButton *checkView;

    //  [imagesForCategories addObject:[imgAndTagReference objectAtIndex:1]];
    //    UITableViewCell *cell = [celebCategoryTableView cellForRowAtIndexPath:[imgAndTagReference objectAtIndex:1]];
    //    UIImageView *profilePic = (UIImageView *)[cell.contentView viewWithTag:20];
    //    profilePic.image = [imgAndTagReference objectAtIndex:0];

    //  checkView.tag = [[imgAndTagReference objectAtIndex:1] intValue];
        // loop
        for (UIButton *checkView in [self.tblImage subviews] ) 
        { i++;
            NSLog(@"Checking tag: %d against passed in tag %d",checkView.tag, [[imgAndTagReference objectAtIndex:1] intValue]);
            if ([checkView tag] == [[imgAndTagReference objectAtIndex:1] intValue]) {

                if (i==35) break;
                // Found imageView from tag, update with img
    //          [checkView setImage:[imgAndTagReference objectAtIndex:0]];
                [checkView setImage:[imgAndTagReference objectAtIndex:0] forState:UIControlStateNormal];

                //set contentMode to scale aspect to fit
                checkView.contentMode = UIViewContentModeScaleAspectFit;

                //change width of frame
                CGRect frame = checkView.frame;
                frame.size.width = 80;
                checkView.frame = frame;

            }
        }   

        // release the pool
        [pool release];

        // Remove the activity indicator created in ViewDidLoad()
        [self.activityIndicator removeFromSuperview];

    } 
```

所有代码都完美运行，但我在这里找不到表格单元格子视图，`for (UIButton *checkView in [self.tblImage subviews]`那么如何找到表格单元格子视图的子视图。？

[我想创建这样的东西，请看图片。！](http://i.stack.imgur.com/b4ZJG.png)在那个新城市到来并且只是部分更改之后，数据将在行和单元格部分中显示新图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:56:59.883

你可以使用[SDWebImage](https://github.com/rs/SDWebImage)

Web Image 这个库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

它提供：

一个向 Cocoa Touch 框架添加 Web 图像和缓存管理的 UIImageView 类别 异步图像下载器 具有自动缓存过期处理的异步内存 + 磁盘图像缓存 保证不会多次下载相同的 URL 保证不会出现虚假 URL t 一次又一次地重试表演！

就用它

```
[youImageView setImageWithURL:[NSURL URLWithString:url] placeholderImage:nil options:SDWebImageRetryFailed]; 
```

# android - 向下滚动列表视图时将图像从服务器加载到Android自定义列表视图

> ID：10408381
> 
> 赞同：1
> 
> 时间：2012-05-02T05:50:44.213
> 
> 标签：android, android-listview

我有一个自定义`listview`，其中包含来自服务器的图像和文本。如果服务器返回 500 多组数据，我可以将所有数据呈现给我`listview`，但加载需要很长时间

相反，当列表向下滚动时，我应该呈现数据。为此，我返回了一些代码来加载图像，但我仍然对这段代码不满意。我`getView()`通过调用 `manager.fetchBitMapThread(data.getImgUrl(),iv)` （ImageLoaderThread）从该方法加载图像。因为运行时会创建这么多线程。有人可以建议加载自定义数据的好主意吗`listview`？

我见过`OnScrollListener`，但我不明白如何为自定义实现这一点`listview`。

```
manager.fetchBitMapThread(data.getImgUrl(),iv);

public class Manager {

ImageView imageView;
final int stub_id=R.drawable.stub;
private final Map<String, Bitmap> bitMap;

public Manager() {
    bitMap = new HashMap<String, Bitmap>();
}

public void fetchBitMapThread(final String urlString, final ImageView imageView) {
    this.imageView = imageView;
    if (bitMap.containsKey(urlString)) {
        imageView.setImageBitmap(bitMap.get(urlString));
    }
    imageView.setImageResource(stub_id);
    final Handler handler = new Handler() {
        @Override
        public void handleMessage(Message message) {
            if(!message.equals(null))
            imageView.setImageBitmap((Bitmap) message.obj);
            else
            imageView.setImageResource(stub_id);
        }
    };

    Thread thread = new Thread() {
        @Override
        public void run() {
            // set imageView to a "pending" image
            Bitmap bitM = fetchBitmap(urlString);
            Message message = handler.obtainMessage(1, bitM);
            handler.sendMessage(message);
        }
    };
    thread.start();
}

public Bitmap fetchBitmap(String urlString) {
    if (bitMap.containsKey(urlString)) {
        return bitMap.get(urlString);
    }

    Log.d(this.getClass().getSimpleName(), "image url:" + urlString);
    try {
        InputStream is = fetch(urlString);

        Bitmap drawable = BitmapFactory.decodeStream(is);

        if (drawable != null) {
            bitMap.put(urlString, drawable);
            //Log.d(this.getClass().getSimpleName(), "got a thumbnail drawable: " + drawable.getBounds() + ", " + drawable.getIntrinsicHeight() + "," + drawable.getIntrinsicWidth() + ", " + drawable.getMinimumHeight() + "," + drawable.getMinimumWidth());
        } else {
            //wrong.setImageResource(stub_id);
            Log.w(this.getClass().getSimpleName(), "could not get thumbnail");

        }

        return drawable;
    } catch (MalformedURLException e) {
        Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
        //imageView.setImageResource(stub_id);
        return null;
    } catch (IOException e) {

        Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
    //  imageView.setImageResource(stub_id);
        return null;
    }
}
private InputStream fetch(String urlString) throws MalformedURLException, IOException {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpGet request = new HttpGet(urlString);
    HttpResponse response = httpClient.execute(request);
    return response.getEntity().getContent();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T07:21:21.897

follow this link to Load images from server in Custom List View. [http://androidexample.com/Download_Images_From_Web_And_Lazy_Load_In_ListView_-_Android_Example/index.php?view=article_discription&aid=112&aaid=134](http://androidexample.com/Download_Images_From_Web_And_Lazy_Load_In_ListView_-_Android_Example/index.php?view=article_discription&aid=112&aaid=134)

Download this and try to implement it in your application.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:53:50.347

按照这个链接

[http://android-er.blogspot.in/2010/07/load-listview-in-background-asynctask.html](http://android-er.blogspot.in/2010/07/load-listview-in-background-asynctask.html)

使用异步任务从服务器加载图像并将其显示在 ListView 中的完整示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:04:37.643

OnScrollListener 提供了四个参数，如下所示：

```
 public void onScroll(AbsListView view, int firstVisibleItem,
        int visibleItemCount, int totalItemCount) 
```

顾名思义，第一个是您在屏幕上可见的第一个项目，第二个是您可见的项目总数，最后一个告诉您项目列表的总数，在您的情况下是 500+。因此，发送请求以下载用户可见的那些 itema/rows 的图像。通过 ding 这首先将创建更少的线程，第二个优点是图像将下载得更快。使用占位符或进度条进行图像视图。

为位图图像准备一张地图，并以 url 值作为键。在获取视图方法中，检查特定图像视图位置的位图是否下载或不使用哈希图，并根据该设置进度条可见性。

对于上述操作，您不能简单地创建一个线程（在匿名内部类中），通过创建一个类扩展线程并实现一个侦听器来有效地做到这一点，该侦听器通知 ui 线程和背景是否下载图像。这将类似于创建线程异步管道。

我希望上述方法可以帮助您加载 500 多行而无需花费时间，否则以异步方式下载所有图像会导致位图内存不足异常，并且也需要花费大量时间。

# android - 从 DatePicker 和 TimePicker 创建警报

> ID：10408387
> 
> 赞同：0
> 
> 时间：2012-05-02T05:51:26.503
> 
> 标签：android

我想创建一个警报，通知 DatePicker 和 TimePicker 中设置的时间

我的代码是：

```
//Create alarm
                        GregorianCalendar tmpDate=new GregorianCalendar(datePicker.getYear(),datePicker.getMonth(),datePicker.getDayOfMonth());
                        long date=tmpDate.getTimeInMillis();
                        long hour=timePicker.getDrawingTime();
                        long dateTime=date+hour;
                        calendar=new GregorianCalendar();

                        if(dateTime<calendar.getTimeInMillis()){
                            Toast.makeText(getApplicationContext(),"No puedes crear la alarma antes de hoy", Toast.LENGTH_SHORT);
                            return;
                        }

AlarmManager alm=(AlarmManager)getSystemService(ALARM_SERVICE);
        alm.set(AlarmManager.RTC_WAKEUP, dateTime,mAlarmSender); 
```

如果我尝试在当前时间上增加 5 秒，但设置时间 frim 日期和时间选择器不会通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:35:35.887

`timePicker.getDrawingTime()`不返回 timePicker 中设置的时间。要检索您需要使用的设置时间`onTimeSetListener()`（另请参阅[此示例](http://developer.android.com/resources/tutorials/views/hello-timepicker.html)）

要检查您是否正确完成了其他所有操作，您可以在设置警报之前记录您获得的日期，如下所示：

```
Log.d("test", "Current time is "+new Date().toLocaleString();
Log.d("test", "Date is "+new Date(dateTime).toLocaleString(); 
```

# visual-c++ - 我可以通过应用程序或命令禁用/启用开始菜单中的关机、注销、重启按钮吗？如果是，那怎么办？

> ID：10408390
> 
> 赞同：-4
> 
> 时间：2012-05-02T05:51:30.027
> 
> 标签：visual-c++, windows-7, console-application

我需要编写一个可以禁用关机、注销、重新启动按钮并执行一些工作的应用程序，然后在再次终止它之前启用所有这些按钮。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T06:21:58.757

```
#include <windows.h>
#include <stdio.h>
//#include <Winerror.h>

int main()
{
    HKEY Regkey,RegSubkey ; 
    DWORD buf = 1 ;
    DWORD Disposition ;
    LONG ret ;

    ret = RegOpenKeyEx(HKEY_CURRENT_USER,TEXT("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer"),0,KEY_ALL_ACCESS,&Regkey) ;

    if(ret !=  ERROR_SUCCESS)
    {
        printf("RegOpenKeyEx failed......%d\n",GetLastError()) ;
        getchar() ;
        return 0 ;
    }
    else
        printf("RegOpenKeyEx success......\n") ;

    ret = RegSetValueEx(Regkey,TEXT("NoClose"),0,REG_DWORD,(const BYTE*)&buf,sizeof(buf)) ;
    if(ret !=  ERROR_SUCCESS)
    {
        printf("RegSetValueEx failed......%d\n",GetLastError()) ;
        getchar() ;
        return 0 ;
    }
    else
        printf("RegSetValueEx success......\n") ;

    //getchar() ;
    RegCloseKey(Regkey) ;
    return 0 ;

} 
```

# sql - ER图 - 关系

> ID：10408394
> 
> 赞同：-2
> 
> 时间：2012-05-02T05:51:52.323
> 
> 标签：sql, database

疾病和症状的最佳关系是什么？
我认为应该是多对多（n2n）。

但是，如果我想在用户选择疾病后检索疾病，如何查询呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:56:43.410

您需要更具体地了解您在寻找什么？

根据我从您的问题中了解到的情况，疾病可能有很多症状。不同的症状可以指向不同的疾病。这是多对多的关系。

您是否正在为模式构建 ER 图？或者您是否正在尝试编写查询来检索数据？

# asp.net - 使用asp.net填写表格时如何显示步骤？

> ID：10408397
> 
> 赞同：0
> 
> 时间：2012-05-02T05:52:30.693
> 
> 标签：asp.net

我正在制作一个 Web 应用程序。注册表非常大。所以我想向用户展示（sep1，step2）之类的步骤。如何在 asp.net 中处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:55:49.577

您可以使用[向导](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.wizard.aspx)控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:56:16.560

您可以使用向导控制

[http://www.codeproject.com/Articles/15804/ASP-NET-2-0-Wizard-Control](http://www.codeproject.com/Articles/15804/ASP-NET-2-0-Wizard-Control)

[http://weblogs.asp.net/scottgu/archive/2006/02/21/438732.aspx](http://weblogs.asp.net/scottgu/archive/2006/02/21/438732.aspx)

# task-parallel-library - TPL 任务计划在 UI 线程与 UI 线程上运行

> ID：10408401
> 
> 赞同：1
> 
> 时间：2012-05-02T05:52:46.670
> 
> 标签：task-parallel-library

在任务中运行的代码（计划在 UI 线程的同步上下文中运行）与直接在消息泵上运行的代码之间有什么区别。

我注意到许多行为差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:41:53.733

不确定“直接在消息泵上运行的代码”是什么意思，但是查看参考源，您基本上可以看到

`WindowsFormsSynchronizationContext.Send`= `Control.Invoke` `WindowsFormsSynchronizationContext.Post`= `Control.BeginInvoke` `DispatcherSynchronizationContext.Send`= `Dispatcher.Invoke` `DispatcherSynchronizationContext.Post`=`Dispatcher.BeginInvoke`

因此，当任务调度程序在 UI 线程上调度任务时，它应该等同于您这样做

# c++ - 如何从 LONGLONG 转换为 _variant_t 类？

> ID：10408411
> 
> 赞同：2
> 
> 时间：2012-05-02T05:53:52.100
> 
> 标签：c++, windows-ce, variant, long-long

在本例中，m_Amount 是 CString。stringToNumber 函数成功将其转换为 LONGLONG 数字。但是当我想将它分配给一个变体时，我得到了这个错误：

```
error C2440: 'type cast' : cannot convert from '__int64' to 'class _variant_t' 
```

我的代码

```
_variant_t  myVar = _variant_t( (LONGLONG)stringToNumber(m_Amount) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:58:14.077

你不需要演员表。

采用：

```
_variant_t(
   __int64 i8Src
) 
```

请参阅[`_variant_t`](http://msdn.microsoft.com/en-us/library/k74e1xsh%28v=vs.80%29.aspx)MSDN 以获取更多参考。

但是，Windows CE 并未提供常规 Windows XP/Vista/Win 7 安装中可用的所有数据类型。在您的情况下，这意味着 WinCE 不支持 64 位有符号/无符号整数。因此，最好建议您使用更窄的数据类型或滚动您自己的类型（可能使用两个`int`s）来获得`LONGLONG`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:10:39.920

你用的是什么工具链？

应该有从`__int64`到`_variant_t`if的转换`_WIN32_WINNT >= 0x501`，这对应于至少 WinXP 的目标。这对于最新的 Windows 工具链应该是正确的，但您可能需要使用一些较旧的工具（如 VS 2005，我相信）自己明确设置宏定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:01:40.987

试试这个：

```
union UltimateCast
{
   __int64 From;
   __variant_t To;
}; 
```

将需要转换的 __int64 值放入 From 字段中。之后从 To 字段读取结果值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T10:15:29.383

我正在使用 _variant_t 将 LONGLONG 数据插入 SQL 服务器数据库。正如[这个asnwer](https://stackoverflow.com/a/10409134/779408)中提到的，数字被映射到C++中的CString。所以我从数据库中检索我的数字数据作为字符串，将其转换为 LONGLONG，更改然后再次将其转换为字符串并将结果字符串存储到数据库。

**SQL numeric --(retrieve from database)--> string -> LONGLONG -> string --(insert into the database)--> SQL numeric**

# php - 如何在没有用户代理标头的情况下发送请求

> ID：10408413
> 
> 赞同：2
> 
> 时间：2012-05-02T05:54:03.483
> 
> 标签：php, api, url, header, request

我有一个视频广播项目，我需要在其中提供下载选项。我使用了 Justin.tv api，当我点​​击该 url 时，他们会发送一个 url 来下载视频文件，但出现 403 禁止错误。我已经和他们的相关人员讨论过这个问题，他回答说：

> 浏览器将收到 403 错误，您需要通过服务器代理文件（通过删除 User-Agent 标头）或告诉用户使用下载管理器。

后一种肯定不是好主意。现在我被困在没有用户代理标头的情况下发送请求我该怎么做（使用 PHP）。我用谷歌搜索了它，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-04T18:20:29.943

对这个旧线程进行死灵处理，我不知道@ayman-safadi 评论中的信息在发布时***是否***准确。那是从其他地方引用的。但是***现在***，要删除用户代理标头，请执行以下操作：

`-H "User-Agent:"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:02:32.800

也许您可以让“下载”链接指向一个内部页面，该页面将对实际的 Justin.tv 链接进行[cURL](http://www.php.net/manual/en/function.curl-setopt.php)调用。

根据[其中一条评论](http://www.php.net/manual/en/function.curl-setopt.php#102090)：

> 仅供参考...除非您专门设置用户代理，否则不会在您的请求中发送任何用户代理，因为没有像其他一些选项那样的默认值。

还有很多[评论](http://www.php.net/manual/en/function.curl-setopt.php#usernotes)可能会有所帮助。

# jquery - 将css类添加到下一个和上一个选项卡jquery选项卡中的选定选项卡

> ID：10408415
> 
> 赞同：0
> 
> 时间：2012-05-02T05:54:16.263
> 
> 标签：jquery

我想将 css 类添加到当前选定的选项卡内容中，因此当我单击下一个按钮时，应更改当前选定选项卡内容的 css。

我已经尝试了以下代码，但它不起作用：

```
 $("#tab-div").tabs();

    $(".next-tab").click(function () {

        var selected = $("#tab-div").tabs("option","selected");
        $("#tab-div").tabs("option", "selected", selected + 1);
        $(this).parent().removeClass("current");
        $(this).find("a").addClass("current");
        $(this).addClass("current");
     });

    $(".prev-tab").click(function () {
        var selected = $("#tab-div").tabs("option", "selected");
        $("#tab-div").tabs("option", "selected", selected - 1);
        $(this).parent().removeClass("current");
        $(this).find("a").addClass("current");
        $(this).addClass("current");

    }); 
```

HTML

```
<div class="prev-tab">
<a href="#" title="Previous">&nbsp;</a>
</div>
<div class="next-tab">
<a href="#" title="next">&nbsp;</a>
</div>    

 <div id="tab-div">
<ul class="nav">
<li><a href="#tab1" class="current">New Group</a></li>
<li><a href="#tab2">For Companies</a></li>
</ul>
<div id="tab1" class="current">
</div>
 <div id="tab2">
</div> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:06:01.933

**编辑：没关系，自从我发布以来，你改变了你的 html。这似乎是设置标签的一种糟糕的方式——我会考虑完全重新考虑。您应该设置一个处理所有这些的选项卡类，包括隐藏/显示选项卡内容 div 和设置/删除选定/当前类。**

```
$(".next-tab, .next-tab").on('click', function() {
    $('#tab-div a').removeClass("current");
    $(this).find("a").addClass("current");
 }); 
```

会将当前类更改为您单击的任何内容。不过，这似乎不是设置选项卡的好方法，而且我也不确定 .tabs() 方法而不知道更多。

# oracle - 如何使用触发器更新 2 个表

> ID：10408416
> 
> 赞同：-1
> 
> 时间：2012-05-02T05:54:23.957
> 
> 标签：oracle, plsql, triggers

我有2张桌子，

*   lv_data,

它有以下字段，

```
 emp_name            tot_days 
                guru                18 
```

*   离开数据

它有以下字段，

```
 emp_name   From_date      to_date       no_of_days   remaining_days 
           guru   02/05/2012     03/05/2012         2 
```

在第二个表中，如果插入数据，`no_of_days`将自动计算`(from to_date - From_date)+1`

这里我需要编写触发器来更新剩余天数列，

在第一个表中`emp_name`，`tot_days`是 18 天，所以在第二个表中，每当插入记录时，`remaining_days`应该像这样计算

```
remaining_days := tot_days - no_of_days 
```

并且这个（计算的）值应该在第一个表（ ）的`tot_days`列中更新，`lv_data`

示例：

```
 emp_name tot_days 
          guru     18 
```

*   离开数据

    ```
    emp_name     From_date    to_date        no_of_days   remaining_days 
    guru        02/05/2012    03/05/2012        2            16 
    ```

现在第一个表应该像这样更新，

```
 emp_name tot_days 
        guru     16 
```

所以我需要更新 2 个表。有人可以帮我通过触发器更新这两个表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:10:56.103

在表上有一个插入前触发器，它将在插入之前设置记录

有几点需要注意：

*   您的数据模型没有唯一的行标识符
*   我认为您的“no_of_days”计算不正确。

* * *

```
CREATE OR replace TRIGGER leave_data_before_insert
  BEFORE INSERT ON LEAVE_DATA
  FOR EACH ROW
DECLARE
    CURSOR c_lv_data(
      p_emp_id IN lv_data.id%TYPE) IS
      SELECT tot_days
      FROM   lv_data
      WHERE  id = p_emp_id;
    v_tot_days NUMBER;
BEGIN
    OPEN c_lv_data(:new.id);

    FETCH c_lv_data INTO v_tot_days;

    :new.no_of_days := ( :new.from_date - :new.TO_DATE ) + 1;

    :new.remaining_days := v_tot_days - :new.no_of_days;

    UPDATE lv_data
    SET    tot_days = :new.remaining_days
    WHERE  id = :new.id;

    CLOSE c_lv_data;
END; 
```

DDL用来测试：

```
CREATE TABLE lv_data
  (
     id       NUMBER,
     emp_name VARCHAR2(240),
     tot_days NUMBER
  );

CREATE TABLE leave_data
  (
     id             NUMBER,
     emp_name       VARCHAR2(240),
     from_date      DATE,
     to_date        DATE,
     no_of_days     NUMBER,
     remaining_days NUMBER
  ); 
```

DML用于测试：

```
INSERT INTO lv_data
VALUES      (1,
             'sathya',
             18);

INSERT INTO LEAVE_DATA
VALUES     ('1',
            'sathya',
            SYSDATE,
            SYSDATE + 2,
            NULL,
            NULL); 
```

# android - 如何从 Horizo ntalScrollView 中释放未显示在屏幕上的图像？

> ID：10408418
> 
> 赞同：0
> 
> 时间：2012-05-02T05:54:35.043
> 
> 标签：android, out-of-memory, horizontalscrollview

我正在开发一个由许多 Horizo​​ntalScrollViews 组成的应用程序。最初，一切都很好。但随着应用程序的增长，需要加载更多图像，我面临 OutOfMemoryError。这是因为我的本机内存用完了。因此，我想释放那些在屏幕上不可见的视图，就像 ViewPager 一样。但是，我不想要快照效果。我希望它可以自由滚动。谢谢

**更新：**我正在研究姜饼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:03:58.107

考虑使用[Horizo​​ntal List View](https://stackoverflow.com/questions/3240331/horizontal-listview-in-android)，因为看起来您的列表实际上正在增长，这不是 ScrollViews 的预期用途。一个 ScrollView 应该有有限的，并且很可能是静态的子数量，因为它不打算动态释放或创建视图。

有很多关于延迟加载和释放列表视图项目的教程。例如，[这是一个](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:03:41.843

如果我没记错的话，不在屏幕上的图像不在内存中。无论如何，使用 multipul ScrollViews 对性能非常不利。

尝试阅读[有关高效 UI 的 android 博客文章](http://developer.android.com/resources/articles/layout-tricks-efficiency.html)。

在我看来，使用文件的哈希图和画廊小部件而不是滚动视图对用户来说会更快。

看看[fedorvlasov 的 LazyAdapter](https://github.com/thest1/LazyList)`imageLoader`的实现，看看他使用的缓存方法。他们非常有效率。:)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:06:50.147

您正在寻找的是在水平滚动视图上延迟加载图像。我不确定是否可以延迟加载滚动视图。

也许您可以使用 ViewPager [http://android-developers.blogspot.com/2011/08/horizo](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html) ​​ntal-view-swiping-with-viewpager.html这在幕后使用适配器，您可以在设置算到一个非常大的数字。

# php - 使用 PHP 来整理多个 JavaScript 文件会比单独包含它们更快吗？

> ID：10408423
> 
> 赞同：2
> 
> 时间：2012-05-02T05:55:38.090
> 
> 标签：php, javascript

我知道提供多个小文件比提供一个大文件要慢得多，这就是为什么最好使用单个 CSS 文档和精灵表。一段时间以来，我还尝试将尽可能多的 JavaScript 包含到最少量的文件中，以避免查看器多次请求更多文件，但是在同一个文档中有各种明显不同的任务会让人感到困惑和乱。

我一直想知道是否使用 PHP 将大量 JavaScript 文件合并到一个文件中，然后将其与`content-type`set to`application/x-javascript`一起提供可以解决这个问题。

我假设因为服务器管理检索这些文件，查看器将只请求一个文件。但是，我确实对服务器将如何处理这个问题知之甚少，以及它是否会以相反的方式最终成为相同的问题（并且最终会变得很慢）。我有一种感觉，因为 JavaScript 和 PHP 都托管在同一个地方，所以不应该这样。

> 如果我实际上有多个文件并通过 PHP 将它们作为单个文档提供，我是否会获得只有一个 JavaScript 文件的相同好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:05:15.587

您可以获得单个 HTTP 请求来检索 JS 文件的好处，因此浏览器体验会更快（至少在低流量水平下），但是您的服务器将更加努力地执行 PHP 代码，而不仅仅是提供服务静态文件。如果您没有获得太多流量，这可能很好，但为了获得最佳效果，您应该将此技术与 PHP 前面的缓存层结合起来。

# c - 在没有 if 条件的情况下调用等于运算符

> ID：10408433
> 
> 赞同：0
> 
> 时间：2012-05-02T05:56:18.090
> 
> 标签：c

我正在查看我的产品中的一些旧代码，我发现了以下代码。

```
#include <stdio.h>
#include <string.h>
int main ( int argc, char **argv) {
    const char *str = "abcdefghi";
    int value = strcmp(str, "abcdefghi") == 0;
} 
```

`int value = strcmp(str, "abcdefghi") == 0;`此类代码的目的是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T05:59:58.523

它使用将是或取决于返回`value`的结果进行初始化。`strcmp(str, "abcdefghi") == 0``0``1``strcmp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:59:45.813

在 C 表达式中使用关系运算符的结果是 0 或 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:09:30.980

如果`strcmp(str, "abcdefghi")`返回`0`则将`strcmp(str, "abcdefghi") == 0`返回 true 并`value`分配值 1。如果返回 1 则将`value`分配值 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:29:41.423

```
int value = strcmp(str, "abcdefghi") == 0; 
```

是这样的

```
int value = (strcmp(str, "abcdefghi") == 0); 
```

现在在 () 内部 if strcmp 返回 0 then (0 == 0) 这意味着它将给出 1

```
 if strcmp returns anything else then 0 then () will give 0 
```

# javascript - 如何使用 JavaScript/Jquery 轻松实现屏幕/视图？

> ID：10408434
> 
> 赞同：2
> 
> 时间：2012-05-02T05:56:23.520
> 
> 标签：javascript, jquery, jsrender

我确定我错过了一些非常基本的东西，但我刚刚开始让自己加快 jQuery 和 Javascript 编程的速度。以前我正在使用 PHP 进行服务器端编程。我现在正在为 HTML5 webapp 创建一个原型，我希望在其中有不同的屏幕。现在使用 PHP 非常简单，我可以使用 Smarty 之类的服务器端模板并完成它。

但是，为了让我的应用更像 webapp，我想在屏幕之间动态切换而不必重新加载窗口。

我已经研究了几个可能会回答我的问题的选项，但我不确定我是否走在正确的轨道上。

我检查了例如 JsRender、JsViews 甚至是纯 jquery 加载命令。但我不确定这些东西是否能让我拥有这样的东西：

HEADER_PART
MAIN_CONTENT
FOOTER_PART（还包含我使用的常见 JS 文件的链接）

我想动态更新 MAIN_CONTENT 部分。目前我的应用程序只有一个页面，我所有属于该页面的自定义逻辑都在一个 JS 文件中。在这个 JS 文件中，我使用一个简单的 $(function() { ... 来加载我的页面，所以每当它被加载时，我的页面的某些部分都会异步更新。这很好，因为我在这个特定页面中的所有块都会必须在加载该一页时加载。

但是，如果我有一个链接，例如 main.html#otherscreen，并且当我单击该屏幕时，我想更改我的 MAIN_CONTENT 并运行另一个页面加载特定的 JS 来处理另一个屏幕上的块，而不是第一页？

我知道我仍然可以使用服务器端模板并使用 AJAX 请求加载我的页面，但同样，不确定这是否是正确的方法。

你能启发我吗？:)

谢谢和最好的问候，本斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:02:21.337

查看[jQuery.load()](http://api.jquery.com/load/)。使用此功能，您可以将内容动态加载到页面上的 div 中，这是我认为您想要做的。只需在`div`要加载内容的页面上找到并调用

```
$('#mydiv').load(url, data, function(response){
    //do something once it's done.
}); 
```

* * *

**根据您的评论...**

这实际上很容易。`.load()`应该替换 div 中的内容（我认为。如果没有，请先调用`.empty()`）。当然，您可以花哨并添加效果，例如

```
function changePages(url) {
    $('#mydiv').fadeOut('fast', function() { 
        $(this).load(url, function(response){
            $('#mydiv').fadeIn('fast');
        });
    });
} 
```

要处理 URL 中的哈希之类的事情，在您的点击事件中，您必须确保首先调用`e.preventDefault()`：

```
$('#mylink').click(function(e){ 
    e.preventDefault(); //e is a jquery event object
    var link = $(this);
    var hash = link.attr('href'); // get the hashtag if the href is '#something'
    changePages(someUrl + hash);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:18:17.100

要在不更改页眉和页脚的情况下将数据动态加载到页面中，您应该使用 jQuery 的 AJAX 函数。它允许您向服务器发布请求并接收返回的数据，而无需重新加载页面。一个简单的例子是这样的：

```
<html>
    <head>
        <title>Example</title>
        <!-- Assuming jQuery is already referenced -->
        <script type="text/javascript">
            $('span.buttonish').click(function(){
                $.ajax({
                    // The URL can be a file or a PHP script of your choosing
                    // it can also be pure HTML without the <html> tags as they
                    // are already in your file
                    url: 'path/to/the/file/that/return/data',
                    success: function(receivedData) {
                        // The received data is the content of the file or the return
                        // data of the script and you can use it as you would with any data
                        $('#content').html(receivedData);
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="header">
        <!-- Something -->
        </div>
        <div id="content">
            <span class="buttonish">Click me to change the text... </span>
        </div>
        </div id="footer">
        <!-- Something -->
        </div>
    </body>
<html> 
```

# joomla - 支付宝付款选项在 HikaShop 的结帐页面中消失

> ID：10408436
> 
> 赞同：0
> 
> 时间：2012-05-02T05:56:40.010
> 
> 标签：joomla, paypal, joomla1.5

我们最近刚刚在 Hikashop 支持的 joomla 网站 v 1.5 的结帐页面中“消失”了我们的 Paypal 付款选项。在此之前它总是显示正常，我的客户确认她玩过 hikashop 中的国家/地区设置，所以我想知道这是否是导致此 paypal 选项消失的问题？

我期待着对这个问题的任何答复。非常感谢答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:21:28.320

有可能是的。确保您删除了您的贝宝插件选项中的“区域”限制。此外，您可以在此处查看常见问题解答： [http ://www.hikashop.com/en/support/documentation/integrated-documentation/29-hikashop-plugins-listing.html#faq](http://www.hikashop.com/en/support/documentation/integrated-documentation/29-hikashop-plugins-listing.html#faq)

# wpf - 将 ACB 升级到 MVVM Light 工具包

> ID：10408442
> 
> 赞同：1
> 
> 时间：2012-05-02T05:57:36.183
> 
> 标签：wpf, mvvm-light

我们对 MVVM 库（MVVM Light、Caliburn.Micro、Prism 等）进行了一些比较，我们将选择 MMVM Light，因为它似乎提供：庞大的用户群、大量的功能和更新以及温和的学习曲线。

以前的事件处理是通过附加命令行为 (ACB) 完成的：[Marlon Grech 的网站](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/ "Marlon Grech 的网站")

我们升级的最佳方法是什么？我们需要删除所有以前的基础工作，还是有一个简单的升级路径？

问候，

米歇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:21:59.120

我认为您想要的是 MVVM Light 框架中的**EventToCommand**行为。它几乎与 ACB 相同。

# sql - XML 数据类型方法“value”的参数 1 必须是字符串字面量

> ID：10408445
> 
> 赞同：16
> 
> 时间：2012-05-02T05:57:50.790
> 
> 标签：sql, xml, tsql

如何更改我的 T-SQL 查询，以免发生此错误：

> 'XML 数据类型方法“value”的参数 1 必须是字符串文字。'

T-SQL 代码：

```
Declare @Count Int = 1
While(@count <= @j)
Begin
insert into mytable
([Word])
Select ([XmlColumn].value(N'word['+Cast(@Count as nvarchar(2))+']/@Entry','nvarchar(max)'))
    from OtherTable WHERE ID=2 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-02T06:38:40.473

您必须隐式使用 sql 变量：

```
Declare @Count Int = 1
While(@count <= @j)
Begin
insert into mytable
([Word])
Select ([XmlColumn].value('(/word[sql:variable("@Count")]/@Entry)[1]','nvarchar(max)'))
    from OtherTable WHERE ID=2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T06:18:47.327

您可以删除 while 循环并一次性执行插入[`nodes`](http://msdn.microsoft.com/en-us/library/ms188282.aspx?ppud=4)以粉碎 XML。

```
insert into mytable([Word])
select N.value('@Entry', 'nvarchar(max)')
from OtherTable
  cross apply XmlColumn.nodes('word') as T(N)
where ID = 2 
```

如果`@j`有限制要插入的行数，`mytable`则可以改用它。

```
insert into mytable([Word])
select ID
from
  (
    select N.value('@Entry', 'nvarchar(max)') as ID, 
           row_number() over(order by T.N) as rn
    from OtherTable
      cross apply XmlColumn.nodes('word') as T(N)
    where ID = 2
  ) T
where rn <= @j 
```

如果您出于某种原因真的想使用循环，那么您可以这样做。

```
while @Count <= @j
begin
  insert into mytable([Word])
  select XMLColumn.value('(/word[sql:variable("@Count")]/@Entry)[1]', 'nvarchar(max)')
  from OtherTable
  where ID = 2 
```

# mysql - 允许多个浏览器持久登录时的数据库问题

> ID：10408448
> 
> 赞同：3
> 
> 时间：2012-05-02T05:57:56.763
> 
> 标签：mysql, cookies, remember-me

我正在尝试使用 cookie 实现“记住我”系统，该系统将跨浏览器记住用户，这意味着如果用户使用浏览器 A 登录网站并选中“记住我”，然后使用“记住我”登录到浏览器 B ，无论他使用哪种浏览器，他都会继续自动登录。（在浏览器 B 中选中“记住我”不会破坏他在浏览器 A 中的持久登录）。

为此，我设置了我的数据库，以便可以将多个密钥与用户 ID 一起存储。当用户登录我的网站时，会检查 cookie 的值。如果在数据库中找到该值，则为用户分配一个新的 cookie，并且更新数据库中的该 cookie 键条目以匹配。其他键保持不变，不影响其他浏览器的登录持久性。当用户手动注销时，检查cookie，删除数据库中的相应条目，然后删除cookie。

当用户手动删除他的 cookie 时，问题就出现了。如果用户这样做，我将无法删除数据库中的相应条目。它只会成为我数据库中的永久条目。当我不尝试支持跨浏览器“记住我”时，这不是问题，但通过允许存储多个 cookie 密钥已成为问题。

有什么办法可以解决/避免这种情况吗？

有大量关于持久登录的信息，但似乎从未涵盖跨浏览器的持久登录，因此任何帮助都会很棒。（也可以随意批评我的方法和任何安全问题。当我只允许每个用户“记住我”时，它似乎更安全，但跨浏览器的持久登录似乎是用户想要的功能）。

我正在使用 MySQL 和 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:46:04.390

我建议使用“记住我（足够长）”的解决方案。在会话上设置一个到期时间，但让它变得很长。根据您期望用户登录的频率，这可能需要 8 小时到一周甚至一年以上的时间。每次他们使用有效的 cookie 访问时，您都会在幕后更新过期时间，并且它看起来是持久的。如果他们删除 cookie，那么最终他们的会话将被删除。

（如果您实际上并没有使用会话，听起来不像，您需要围绕此添加一些维护编码。可能最好了解会话而不是重新发明轮子。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:53:13.947

我同意@llion 的建议，即在 cookie 上设置过期时间，在这种情况下，您可以[安排](http://dev.mysql.com/doc/refman/5.5/en/events.html)一个流程从 dB 中清除过期的 cookie。但是，您可以通过在您看到 cookie 时[延长它们的寿命](https://stackoverflow.com/questions/4863740/change-cookie-expiry-date-http)，使用户觉得这几乎就像 cookie 是无限期持久的。

为了其他对此问题感兴趣的读者的利益，我真的希望您只将 cookie 的[哈希值存储](https://stackoverflow.com/a/477578/623041)在您的 dB 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T21:26:11.893

要清楚地回答您的问题：

您**无法在野外知道流氓 remember_me 令牌**，唯一真正的解决方案是让您的 remember_me 令牌仅持续几周，然后**cron-job 或守护进程将它们杀死**。

这解决了您的**数据库过度拥挤**问题，这似乎是您请求的用例。

请注意您正面临一个现实问题，您无法猜测用户何时删除了 cookie，没有从浏览器或其他方法触发反向进程，因此**唯一的方法是如果没有，则定期杀死它们used**，并刷新一次使用的到期日期。

你描述你的系统的方式**更安全**，（如果做得对的话）长期存在的 php 会话，所以我建议你保持你当前的方法，用系列+令牌保护它，并杀死几个星期未使用的 long_live 令牌。

希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T11:00:13.900

嗯，如果他在另一台机器上并使用浏览器，同样的登录会发生什么？这肯定会发生。在我们家，我一直这样做。我在楼下有 3 个盒子，我妈妈在楼上有 2 台机器。

也许您可以使用微时间和来自 navigatior.userAgent 的 UA 字符串来保证会话是唯一的

但你不能得到计算机名。但是您可以通过 JS api 获取他们的 IP 地址。[http://www.w3.org/TR/2010/WD-system-info-api-20100202/#network](http://www.w3.org/TR/2010/WD-system-info-api-20100202/#network) 但使用它可能会在浏览器中触发某种警告对话框。不。不起作用。

java可以获取ip。

# knockout.js - Knockoutjs2 可观察绑定不显示更新值

> ID：10408454
> 
> 赞同：0
> 
> 时间：2012-05-02T05:58:29.293
> 
> 标签：knockout.js, 2-way-object-databinding

```
<script type="text/javascript">
 var initialData = <%= new JavaScriptSerializer().Serialize(Model) %>;
 var viewModel = {
 variables: ko.observable(initialData.Variables),
 //...
};
$(document).ready(function(){ko.applyBindings(viewModel);});
</script>

<body>
<table data-bind="with:variables">
<tr><td><input data-bind="value: description"/></td></tr>
<tr><td><input data-bind="value: description"/></td></tr>
</table>
</body> 
```

更新第一行时，不更新第二行。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:00:22.747

每个属性本身都需要是可观察的。查看 ko.mapping.fromJS。

# c# - 将数据表从 C# 传递到 SQL Server 2008

> ID：10408457
> 
> 赞同：6
> 
> 时间：2012-05-02T05:59:04.877
> 
> 标签：c#, sql, sql-server-2008, c#-4.0

如何将 DataTable 从 C# 传递到 SQL Server 2008？

**例外**：

> 表类型参数“@CurrentTableInitial”必须具有有效的类型名称。

**表结构：**

```
CREATE TABLE [dbo].[RegisterChoiceUserInitial](
    [RegisterChoiceUserInitialID] [int] IDENTITY(1,1) NOT NULL,
    [UserId] [uniqueidentifier] NOT NULL,
    [RegisterChoiceUserInitialJob] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialOrganization] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialUnit] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialMembershipType] [nvarchar](50) NULL,
    [RegisterChoiceUserInitialStart] [nvarchar](10) NULL,
    [RegisterChoiceUserInitialEnd] [nvarchar](10) NULL,
 CONSTRAINT [PK_RegisterChoiceUserInitial] PRIMARY KEY CLUSTERED 
(
    [RegisterChoiceUserInitialID] ASC
) 
```

**用户自定义类型：**

```
CREATE TYPE [dbo].[TableTypeInitial] AS TABLE(
    [ID] [int] NULL,
    [InitialJob] [nvarchar](50) NULL,
    [InitialOrganization] [nvarchar](50) NULL,
    [InitialUnit] [nvarchar](50) NULL,
    [InitialMembershipType] [nvarchar](50) NULL,
    [InitialMembershipStart] [nvarchar](10) NULL,
    [InitialMembershipEnd] [nvarchar](10) NULL
) 
```

**存储过程：**

```
create PROCEDURE [dbo].[FinishRegisterChoiceUserInitial]
      ( @UserId                         uniqueidentifier,
       @TableVariable TableTypeInitial READONLY)
 AS
 BEGIN

 INSERT INTO [Election].[dbo].[RegisterChoiceUserInitial]
           ([UserId]
           ,[RegisterChoiceUserInitialJob]
           ,[RegisterChoiceUserInitialOrganization]
           ,[RegisterChoiceUserInitialUnit]
           ,[RegisterChoiceUserInitialMembershipType]
           ,[RegisterChoiceUserInitialStart]
           ,[RegisterChoiceUserInitialEnd])
       SELECT
             @UserId AS UserId
             ,InitialJob
             ,InitialOrganization
             ,InitialUnit
             ,InitialMembershipType
             ,InitialMembershipStart
             ,InitialMembershipEnd
       FROM
             @TableVariable   
 END 
```

**数据表：**

```
DataTableInitial.Columns.Add(new DataColumn("ID", typeof(int)));
DataTableInitial.Columns.Add(new DataColumn("InitialJob", typeof(String)));
DataTableInitial.Columns.Add(new DataColumn("InitialOrganization", typeof(String)));
DataTableInitial.Columns.Add(new DataColumn("InitialUnit", typeof(String)));
DataTableInitial.Columns.Add(new DataColumn("InitialMembershipType", typeof(String)));
DataTableInitial.Columns.Add(new DataColumn("InitialMembershipStart", typeof(String)));
DataTableInitial.Columns.Add(new DataColumn("InitialMembershipEnd", typeof(String)));

cmd.CommandText = "EXEC FinishRegisterChoiceUserInitial @UserId, @CurrentTableInitial ";
cmd.Parameters.AddWithValue("@UserId",user.ProviderUserKey);

DataTable TableInitial=(DataTable)ViewState["CurrentTableInitial"];
SqlParameter a = cmd.Parameters.AddWithValue("@CurrentTableInitial", TableInitial);
a.SqlDbType = SqlDbType.Structured;

cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T07:51:10.267

您缺少 a.TypeName = "dbo.TableTypeInitial"; 将此语句放在“a.SqlDbType = SqlDbType.Structured;”之前

采用

```
cmd.CommandText = "EXEC FinishRegisterChoiceUserInitial @UserId, @TableTypeInitial "; 
```

代替

```
cmd.CommandText = "EXEC FinishRegisterChoiceUserInitial @UserId, @CurrentTableInitial "; 
```

**Sql 服务器脚本：**

```
 CREATE TABLE [Target]
         (
         [ID] [int] NOT NULL PRIMARY KEY IDENTITY,
         [FirstName] [varchar](100)NOT NULL,
         [LastName] [varchar](100)NOT NULL,
         [Email] [varchar](200) NOT NULL
         )
        CREATE TYPE [TargetUDT] AS TABLE
         (
         [FirstName] [varchar](100)NOT NULL,
         [LastName] [varchar](100)NOT NULL,
         [Email] [varchar](200) NOT NULL
         )
         CREATE PROCEDURE AddToTarget(@TargetUDT TargetUDT READONLY)
         AS
         BEGIN
               INSERT INTO [Target]
               SELECT * FROM @TargetUDT
         END 
```

**示例代码：**

```
public static void StartProcess()
        {
            //Create a local data table to hold customer records
            DataTable dtCustomers = new DataTable("Customers");
            DataColumn dcFirstName = new DataColumn("FirstName", typeof(string));
            DataColumn dcLastName = new DataColumn("LastName", typeof(string));
            DataColumn dcEmail = new DataColumn("Email", typeof(string));
            dtCustomers.Columns.Add(dcFirstName);
            dtCustomers.Columns.Add(dcLastName);
            dtCustomers.Columns.Add(dcEmail);
            //Add customer 1
            DataRow drCustomer = dtCustomers.NewRow();
            drCustomer["FirstName"] = "AAA";
            drCustomer["LastName"] = "XYZ";
            drCustomer["Email"] = "aaa@test.com";
            dtCustomers.Rows.Add(drCustomer);
            //Add customer 2
            drCustomer = dtCustomers.NewRow();
            drCustomer["FirstName"] = "BBB";
            drCustomer["LastName"] = "XYZ";
            drCustomer["Email"] = "bbb@test.com";
            dtCustomers.Rows.Add(drCustomer);
            //Add customer 3
            drCustomer = dtCustomers.NewRow();
            drCustomer["FirstName"] = "CCC";
            drCustomer["LastName"] = "XYZ";
            drCustomer["Email"] = "ccc@test.com";
            dtCustomers.Rows.Add(drCustomer);
            //Create Connection object to connect to server/database
            SqlConnection conn = new SqlConnection(ConStr);
            conn.Open();
            //Create a command object that calls the stored procedure
            SqlCommand cmdCustomer = new SqlCommand("AddToTarget", conn);
            cmdCustomer.CommandType = CommandType.StoredProcedure;
            //Create a parameter using the new SQL DB type viz. Structured to pass as table value parameter
            SqlParameter paramCustomer = cmdCustomer.Parameters.Add("@TargetUDT", SqlDbType.Structured);
            paramCustomer.Value = dtCustomers;
            //Execute the query
            cmdCustomer.ExecuteNonQuery();        
        } 
```

# c++ - 为什么可以找到 stdint.h 而找不到 cstdint？

> ID：10408458
> 
> 赞同：8
> 
> 时间：2012-05-02T05:59:07.443
> 
> 标签：c++, g++, stdint, acc

我对包含 stdint.h 的作品感到惊讶，但不包含 cstdint。

```
$ aCC sizeof.cpp
"sizeof.cpp", line 5: error #2005-D: could not open source file "cstdint"
  #include <cstdint>
                    ^

1 error detected in the compilation of "sizeof.cpp".
$ aCC --version
aCC: HP C/aC++ B3910B A.06.12 [Nov 03 2006] 
```

与 g++ 相同：

```
$ g++ --version
g++ (GCC) 4.2.3 
```

我可以问为什么吗？而且，除了更新编译器，有什么方法可以解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T06:06:39.077

您的编译器支持没有的旧 C++ 标准`<cstdint>`（因为 C90 没有`<stdint.h>`）。`<cstdint>`是 C++11 的新手。

# packaging - Ada：包装概念

> ID：10408459
> 
> 赞同：3
> 
> 时间：2012-05-02T05:59:08.993
> 
> 标签：packaging, ada

这是我之前的帖子的后续：

[Ada：理解私有类型和理解封装](https://stackoverflow.com/questions/10398922/ada-understanding-private-types-and-understanding-packaging)

该`Rectangular`类型的实现是使用一个实现实现的，即 `Rectangular_Method_1`，该实现需要一个规范文件和一个主体文件。

如果我们想为`Rectangular_Method_2`用户提供另一个实现，则可以将主文件 `rectangular_Form.ads`更改为

```
-- with Rectangular_Method_1;
-- package Rectangular_Form renames Rectangular_Method_1;
with Rectangular_Method_2;
package Rectangular_Form renames Rectangular_Method_2; 
```

问题

1.  这是软件工程中允许另一个实现的正确方法吗，因为测试文件`test_rectangular_form.adb`对于不同的实现保持不变？

2.  如果我们创建第二个实现`Rectangular_Method_2`，除了这个新实现的强制性新主体之外，是否还需要创建一个单独的规范文件？`Vector_Basis_r`然而，需要在新实现中为、等提供相同的过程/函数`Set_Horz`，`Get_Horz`以便我们可以在`test_rectangular_form.adb`.

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:55:50.997

如果您使用 GNAT，则可以为项目使用 GPR 文件。在那里您可以更改特定包的文件名，例如：

```
for Specification (Rectangular_Form) use "Rectangular_Method_1.ads";
for Implementation (Rectangular_Form) use "Rectangular_Method_1.adb"; 
```

您甚至可以根据环境变量进行设置。

如果你的规范文件看起来都一样，你可以使用 a`Rectangular_Form.ads`并且只使用上面的 Implementation 行。

示例 GPR 文件可能如下所示：

```
project Example is

   type Methods is ("normal", "something_else");
   Method : Methods := external ("METHOD", "normal");

   package Naming is
      case Method is
         when "normal" =>
            for Implementation ("Example") use "example_normal.adb";
         when "something_else" =>
            for Implementation ("Example") use "example_something.adb";
      end case;
   end Naming;

end Example; 
```

然后，你可以`gnatmake -P example.gpr`根据你的`METHOD`变量来编译它，或者使用`-XMETHOD=...`gnatmake 的参数或者只使用提供的默认值。

`example_*.adb`应该都包含包的主体，`Example`而不是`Example_Normal`等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T13:18:04.450

另一种方法是使用标记类型。

```
package Rectangular is
   type Instance is abstract tagged private;

   procedure Vector_Basis_r (A : in Long_Float; D : out Instance);
   procedure Set_Horz (R : in out Instance; H : Long_Float);
   function Get_Horz (R : Instance) return Long_Float;
private
   type instance is tagged null record;
end Rectangular;

with Rectangular;
package Rectangular_Method_1 is
    type Instance is new Rectangular.Instance with private;
    ...
private
    type Instance is new Rectangular.Instance with 
    record
        Horz, Vert: Long_Float;
    end record;
end Rectangular_Method_1; 
```

（Rectangular_Method_2 的类似实现）。

然后我相信你可以编写这样使用它的代码：

```
with Rectangular_Method_1;
with Rectangular_Method_2;
...
--  My_Rectangle : Rectangular_Method_1.Instance;
My_Rectangle : Rectangular_Method_2.Instance;

My_Rectangle.Set_Horiz(Whatever_Value);
... 
```

换句话说，在两者之间切换时，您只需要更改类型名称即可。您的客户甚至可以通过在顶部使用单个子类型来摆脱这些更改。

```
subtype Rectangle_Instance is Rectangular_Method_2.Instance; 
```

这也将使您能够将通用代码/字段向上移动到基类（包）中，我认为这就是您所追求的。

# css - jQuery Mobile 选择性地覆盖按钮上的 ui-btn-inner 类？

> ID：10408461
> 
> 赞同：1
> 
> 时间：2012-05-02T05:59:31.707
> 
> 标签：css, jquery-mobile

所以这里详细介绍了如何通过覆盖页面上的类来删除按钮上的填充：[Can the button padding beadjusted in Jquery Mobile?](https://stackoverflow.com/questions/6670940/can-the-button-padding-be-adjusted-in-jquery-mobile)

但是我该怎么做：

```
.ui-btn-inner {
padding: 0;} 
```

并有选择地将其应用于一个按钮，即：

```
<button data-icon="false" onclick="alert('clicked me')">Button Name</button> 
```

做这样的事情是行不通的：

```
<button style="padding:0" data-icon="false" onclick="alert('clicked me')">Button Name</button> 
```

想法？创造性的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T17:04:34.723

只需为该按钮设置一个新类，然后如下更改子类。

HTML：

```
<a href"#" data-role="button" class="myClass">Text</a> 
```

CSS：

```
.myClass .ui-btn-inner{
    padding: 0px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:42:44.960

我想我终于找到了解决方案（现在一直在尝试解决）！

使用 CSS 的“级联”部分来帮助您。例如，如果您的按钮使用主题“a”，则可以将 .ui-btn-inner 的填充规则仅应用于主题为“a”的按钮。只需在您要更改的类前面加上主题属性即可。

HTML：
`<a href"#/mypath" data-role="button" data-theme="a">Touch Me</a>`

CSS：
`.ui-btn-up-a .ui-btn-inner,
.ui-btn-hover-a .ui-btn-inner,
.ui-btn-down-a .ui-btn-inner
{ padding: 0px; }`

如您所见，这意味着您必须为按钮的每个状态创建规则，否则当您触摸按钮时，填充将在瞬间返回。

只需将不同的主题（例如“b”）应用于应保留其填充的按钮。使用这种类型的 CSS 继承，您可以完全疯狂地使用按钮。

您可以拥有无​​限数量的主题。我去主题滚轮并为字母表中的每个字母创建一个默认主题。然后，只需用 CSS 覆盖它们即可。

当我尝试将 jQuery Mobile 用于工作项目时，这是一个很大的症结所在。他们已经有了 UI 设计，我的任务是让 jQuery Mobile 完全匹配它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T23:58:43.187

我只是想让图标显示没有边框或背景，所以我使用了你的示例，但是图标向上移动了，所以我用它来重新定位它：

```
.ui-btn-up-mytheme .ui-btn-inner, 
.ui-btn-hover-mytheme .ui-btn-inner, 
.ui-btn-down-mytheme .ui-btn-inner {
margin-top: 2px;
border: none;
} 
```

html标记：

```
<a href="schedules" data-rel="back" data-icon="arrow-l" data-iconpos="notext"
 data-theme="mytheme" data-shadow="false"  ></a> 
```

# c# - 将 div id 作为参数传递给控制器 ？

> ID：10408462
> 
> 赞同：1
> 
> 时间：2012-05-02T05:59:32.523
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, actionlink

我想将 div 的 id 传递给控制器​​。我已将操作链接附加到 div，我正在尝试执行以下操作，

我的 TasksController 的索引视图

```
@Html.ActionLink("c", "Create", "TasksController", new { i = 6 }, new { @class = "element" }) 
```

在创建控制器内部

```
public ActionResult Create(string i)
        {
            ViewData["I"] = i;
            return View();
        } 
```

然后在创建视图中，

```
<div class="editor-field">
            @Html.TextBox("divID", ViewData["I"])
            @Html.ValidationMessageFor(model => model.divID)
</div> 
```

但这不起作用。请问有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:40:37.333

尝试这个：

```
@Html.ActionLink("c", "Create", "Tasks", new { i = "6" }, new { @class = "element" }) 
```

**您也可以通过配置路由来解决此问题：**

全球.asax：

```
routes.MapRoute(
    "Default",     // Route name
    "{controller}/{action}/{id}",                           // URL with parameters
    new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
); 
```

动作链接：

```
Html.ActionLink(article.Title, 
                "Item",   // <-- ActionMethod
                "Login",  // <-- Controller Name.
                new { "6"}, // <-- Route arguments.
                null  // <-- htmlArguments .. which are none. You need this value
                      //     otherwise you call the WRONG method ...
                      //     (refer to comments, below).
                ) 
```

链接将如下所示：

```
<a href="/Item/Login/6">Title</a> 
```

**请考虑控制器名称是“Tasks”而不是“Taskscontroller”。**

**编辑：** 要重定向到另一个视图并传递一些数据，您必须在控制器中使用“RedirectToAction”：

```
return RedirectToAction("Tests", new { 
   ID = "6", 

}); 
```

**编辑**

你必须写**“6”**，只是**任务**希望这会奏效！

# wpf - WPF DataGrid Visual 不是祖先错误

> ID：10408465
> 
> 赞同：1
> 
> 时间：2012-05-02T05:59:51.863
> 
> 标签：wpf, wpfdatagrid

我有以下数据网格，但我不断收到错误消息。为什么 ？

```
 <TabControl Name="tabContent"  TabStripPlacement="Bottom">
                <TabItem Header="Information">
                    <DataGrid x:Name="gridInformation" AutoGenerateColumns="False">
                        <DataGrid.Columns>
                        <DataGridTemplateColumn Header="Address">                         
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock  Text="{Binding Address}"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>                                                                     
                    </DataGrid>                                        
                </TabItem>               
            </TabControl> 
```

这是错误

```
System.InvalidOperationException was unhandled
  Message=The specified Visual is not an ancestor of this Visual.
  Source=PresentationCore
  StackTrace:
       at System.Windows.Media.Visual.TrySimpleTransformToAncestor(Visual ancestor, Boolean inverse, GeneralTransform& generalTransform, Matrix& simpleTransform)
       at System.Windows.Media.Visual.TransformToAncestor(Visual ancestor)
       at System.Windows.Controls.DataGridCellsPanel.ComputeCellsPanelHorizontalOffset()
       at System.Windows.Controls.DataGridHelper.GetParentCellsPanelHorizontalOffset(IProvideDataGridColumn cell)
       at System.Windows.Controls.DataGrid.InvalidateCellsPanelHorizontalOffset(Object args)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.DispatcherOperation.InvokeImpl()
       at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
       at System.Threading.ExecutionContext.runTryCode(Object userData)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.ProcessQueue()
       at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
  InnerException: 
```

这是导致问题的主题部分：

```
 <Grid Background="{TemplateBinding Background}" x:Name="Root">
                        <Grid.Resources>
                            <ControlTemplate x:Key="TopLeftHeaderTemplate" TargetType="DataGridColumnHeader">
                                <Grid Margin="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="Background" Opacity="0.65" Grid.ColumnSpan="3" Grid.RowSpan="3">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush EndPoint="0.5,1.4" StartPoint="0.5,0">
                                                <GradientStop Color="{StaticResource PrimaryColor}" Offset="0.75" />
                                                <GradientStop Color="{StaticResource SecondaryColor}" Offset="1" />
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                    <Border CornerRadius="0,0,40,40" x:Name="Highlight" RenderTransformOrigin="0.5,1" Grid.ColumnSpan="3">
                                        <Border.Background>
                                            <RadialGradientBrush>
                                                <RadialGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <ScaleTransform CenterX="0.5" CenterY="0.5" ScaleX="1.25" ScaleY="2" />
                                                        <TranslateTransform Y="-0.6" />
                                                    </TransformGroup>
                                                </RadialGradientBrush.RelativeTransform>
                                                <GradientStop Color="#BFFFFFFF" Offset="0" />
                                                <GradientStop Color="#4CFFFFFF" Offset="1" />
                                            </RadialGradientBrush>
                                        </Border.Background>
                                    </Border>
                                </Grid>
                            </ControlTemplate>
                            <ControlTemplate x:Key="TopRightHeaderTemplate" TargetType="DataGridColumnHeader">
                                <Grid Margin="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="Background" Opacity="0.65" Grid.ColumnSpan="3" Grid.RowSpan="3">
                                        <Rectangle.Fill>
                                            <LinearGradientBrush EndPoint="0.5,1.4" StartPoint="0.5,0">
                                                <GradientStop Color="{StaticResource PrimaryColor}" Offset="0.75" />
                                                <GradientStop Color="{StaticResource SecondaryColor}" Offset="1" />
                                            </LinearGradientBrush>
                                        </Rectangle.Fill>
                                    </Rectangle>
                                    <Border CornerRadius="0,0,40,40" x:Name="Highlight" RenderTransformOrigin="0.5,1" Grid.ColumnSpan="3">
                                        <Border.Background>
                                            <RadialGradientBrush>
                                                <RadialGradientBrush.RelativeTransform>
                                                    <TransformGroup>
                                                        <ScaleTransform CenterX="0.5" CenterY="0.5" ScaleX="1.25" ScaleY="2" />
                                                        <TranslateTransform Y="-0.6" />
                                                    </TransformGroup>
                                                </RadialGradientBrush.RelativeTransform>
                                                <GradientStop Color="#BFFFFFFF" Offset="0" />
                                                <GradientStop Color="#4CFFFFFF" Offset="1" />
                                            </RadialGradientBrush>
                                        </Border.Background>
                                    </Border>
                                </Grid>
                            </ControlTemplate>
                        </Grid.Resources>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <primitives:DataGridColumnHeader x:Name="TopLeftCornerHeader" Width="22" Template="{StaticResource TopLeftHeaderTemplate}" />
                        <primitives:DataGridColumnHeadersPresenter Grid.Column="1" x:Name="ColumnHeadersPresenter" />
                        <primitives:DataGridColumnHeader Grid.Column="2" x:Name="TopRightCornerHeader" Template="{StaticResource TopRightHeaderTemplate}" />
                        <Rectangle Grid.ColumnSpan="3" Height="1" x:Name="ColumnHeadersAndRowsSeparator" VerticalAlignment="Bottom" Width="Auto" Fill="#FFDBDCDC" StrokeThickness="1" />

                          <ScrollViewer   Grid.ColumnSpan="2" Grid.Row="1"  Padding="{TemplateBinding Padding}" Focusable="false" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" x:Name="scrollViewer">

                            <ItemsPresenter x:Name="ItemsPresenter" />

                          </ScrollViewer>
                        <Rectangle Grid.Column="2" Grid.Row="2" x:Name="BottomRightCorner" Fill="{TemplateBinding Background}" />
                        <Rectangle Grid.ColumnSpan="2" Grid.Row="2" x:Name="BottomLeftCorner" Fill="{TemplateBinding Background}" />                           
                        <Grid Grid.Column="1" Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Rectangle x:Name="FrozenColumnScrollBarSpacer" />
                            <ScrollBar Grid.Column="1" Height="18" Margin="0" x:Name="HorizontalScrollbar" Orientation="Horizontal" Visibility="{TemplateBinding HorizontalScrollBarVisibility}"  />
                        </Grid>-->
                    </Grid>

                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# c# - 关于特定正则表达式模式的说明

> ID：10408466
> 
> 赞同：0
> 
> 时间：2012-05-02T05:59:52.877
> 
> 标签：c#, asp.net, validation

我`Asp.Net/C#`在我的项目中使用。在我`Regular Expression Validator`用来验证电子邮件地址的一个表单中。我搜索了一些验证电子邮件的示例。我发现了这个`\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*` 可以任何人解释我这个模式，这将非常有帮助。任何解释都非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:14:18.953

一些简短的提示：

*   \w 代表单词字符

*   [-+.'] 表示大括号中的字符之一

*   plus 和 * 是量词

*   ( ) 包围一个可以创建反向引用的组（您可以以编程方式引用或读取的内容）

更长的（自动）解释：

```
\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*

Match a single character that is a “word character” (letters, digits, and underscores)     «\w+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the regular expression below and capture its match into backreference number 1 «([-+.']\w+)*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   Note: You repeated the capturing group itself.  The group will capture only the last  iteration.  Put a capturing group around the repeated group to capture all iterations. «*»
   Match a single character present in the list “-+.'” «[-+.']»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the character “@” literally «@»
Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the regular expression below and capture its match into backreference number 2 «([-.]\w+)*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   Note: You repeated the capturing group itself.  The group will capture only the last iteration.  Put a capturing group around the repeated group to capture all iterations. «*»
   Match a single character present in the list “-.” «[-.]»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the character “.” literally «\.»
Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Match the regular expression below and capture its match into backreference number 3 «([-.]\w+)*»
   Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
   Note: You repeated the capturing group itself.  The group will capture only the last iteration.  Put a capturing group around the repeated group to capture all iterations. «*»
   Match a single character present in the list “-.” «[-.]»
   Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+» 
```

我使用 RegexBuddy 创建了更长的自动解释

**编辑：**

要获得有关正则表达式的一些入门信息，您可以查看[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

# haskell - 旋转矩阵 PBMfile Haskell

> ID：10408471
> 
> 赞同：-1
> 
> 时间：2012-05-02T06:00:20.180
> 
> 标签：haskell, matrix, rotation, ppm

> **可能重复：**
> [旋转图像 .pbm Haskell](https://stackoverflow.com/questions/10407003/rotate-image-pbm-haskell)

我需要有关 haskell 中的旋转矩阵的帮助

我有 2 种数据类型：

```
data RGBdata= RGB Int Int Int
data PBMfile= PBM Int Int [[RGBdata]] 
```

我的功能收到：

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y ((transpose . reverse) l)) 
```

其中“x”和“y”分别是列数和行数（也许可以帮助执行该功能）。

例如：

```
(PBM 2 2 [[(RGB 0 255 255),(RGB 255 0 0)],[(RGB 255 255 255),(RGB 255 0 0)]]) 
```

我尝试使用反向和转置的组合向左旋转 90°，但图像结果是错误的。

我试试

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y ((reverse . transpose) l)) 
```

和

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y ((transpose . reverse) l)) 
```

和

```
spin :: PBMfile -> PBMfile
spin (PBM x y l) = (PBM x y (((map reverse) . transpose) l)) 
```

旋转矩阵但不起作用。

结果类似于

[http://imageshack.us/photo/my-images/52/catmc.jpg/](http://imageshack.us/photo/my-images/52/catmc.jpg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:23:20.607

转置操作应该发生在反向操作之前。尝试

```
spin (PBM x y l) = (PBM y x ((reverse . transpose) l)) 
```

旋转图像的尺寸也被切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:32:48.327

您还需要考虑`(map reverse)`，而不仅仅是`transpose`和`reverse`。我认为`((map reverse) . transpose)`做你想要的。

# javascript - 从 jquery 回到 JavaScript

> ID：10408474
> 
> 赞同：-3
> 
> 时间：2012-05-02T06:00:48.137
> 
> 标签：javascript, jquery

我需要这个 Jquery 代码的纯 JavaScript 等价物：因为在我当前的项目中不允许使用库，

文件 handler.js

```
$(document).ready(function(){

 $("#some_button").click(function(){

  alert('ok. works');

 });

}); 
```

文件 index.html

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="handler.js"></script>
<head>
<body>
<button id="some_button">Btn</button>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:03:33.937

把它放在你的`handler.js`文件中：

```
window.onload = function() {
  document.getElementById('some_button').addEventListener('click',
    function() {
       alert('ok. works');
    }, true);
}; 
```

注意：这不适用于不支持`addEventListener`. 你*可以*偷懒，改用 DOM0`element.onclick`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:06:38.877

```
 function buttonClick() {
     alert('ok. works');
} 
```

文件 index.html

```
<!DOCTYPE html>
<html>
<head>

<head>
<body>
<button id="some_button" onclick="buttonClick()">Btn</button>
</body>

</html> 
```

# android - Android简单程序运行报错

> ID：10408475
> 
> 赞同：0
> 
> 时间：2012-05-02T06:00:48.137
> 
> 标签：android

我刚刚安装`Android SDK`到我的`Eclipse`.，但是当我在上面运行一个简单的程序时，`Eclipse`我得到了以下错误。

```
[2012-05-02 11:15:11 - Emulator] invalid command-line parameter: and.
[2012-05-02 11:15:11 - Emulator] Hint: use '@foo' to launch a virtual device named 'foo'.
[2012-05-02 11:15:11 - Emulator] please use -help for more information 
```

我添加`ADT plugin`并`Eclipse`设置了路径`Android SDK`为

```
C:\Documents and Settings\ganesh\android-sdk_r12-windows\android-sdk-windows 
```

我哪里做错了？

谢谢

加内什。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:04:31.883

Android sdk 路径不能包含任何空格。所以你的路径 `C:\Documents and Settings\ganesh\android-sdk_r12-windows\android-sdk-windows`是错误的。将您的 sdk 放在不包含空格的路径中，例如 c:\android-sdk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:22:41.980

我第二个 Rasel，另一种解决方法是将 Eclipse 中的 Android 首选项中的“SDK 位置”更改为其相应的 8dot3 目录名称，因为这里的“文档和设置”导致问题，将其更改为相应的 8dot3 目录名称，这可能所以`DOCUME~1`完整的路径是

> C:\DOCUME~1\ganesh\android-sdk_r12-windows\android-sdk-windows

* * *

如果您不知道所需路径的 8dot3 名称，只需使用命令提示符并执行“DIR /X”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T06:17:34.180

这是一个非常常见的问题，也是 Android SDK 的一个错误。“文档和设置”有空格，它会破坏它。

你有2个选择

1.  重新安装 SDK 并避免文件夹中有空格。
2.  而不是用if not then`Documents and Settings`替换它（一些dos路径）`DOCUME~1``DOCUME~2`

例如`C:\DOCUME~1\ganesh\android-sdk_r12-windows\android-sdk-windows`

我希望您喜欢第二个选项，因为您不必再​​次重新安装 SDK。这个对我有用。

# web-services - Jmeter：在同一线程组中使用“N”个 Web 服务请求。

> ID：10408479
> 
> 赞同：0
> 
> 时间：2012-05-02T06:01:12.083
> 
> 标签：web-services, jmeter

我正在使用 Jmeter 2.4。

我试图在单个线程组中使用“N”个 WebService (SOAP) Request Sampler。但在所有“N”号 WebService (SOAP) 请求中，WSDL URL`http://webservices.daehosting.com/services/TemperatureConversions.wso?WSDL`是相同的。测试的 web 服务有 4 种方法。所以我需要检查所有 4 种方法，通过使用 4 个不同的 WebService(SOAP) 请求来检查每个请求中的每个方法。

**问题是：**
如果我在第一个 WebService(SOAP) 请求中选择一种方法，然后在剩余的其他 3 个 WebService(SOAP) 请求中，该方法会自动更改为与我在第一个 WebService(SOAP) 请求中选择的方法相同。

**预期为：**
我想分别在其他 3 个 WebService (SOAP) 请求中选择其他 3 个方法。因此，我可以在 4 个不同的 Web 服务（SOAP）请求中测试所有 4 种方法的 Web 服务请求。

希望，如果对我的问题有任何澄清，我准备好解释更多。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:58:14.977

挣扎了一个星期后。我找到了我的问题的解决方案。是的，可以在 Jmeter 中发出“N”个 Web 服务请求。就像使用“N”个Http请求一样，通过使用“N”个Http WebService Request Sampler并配置它们。

# ruby-on-rails - 如何更改部署 heroku 应用程序的获取和推送操作目标

> ID：10408480
> 
> 赞同：1
> 
> 时间：2012-05-02T06:01:20.430
> 
> 标签：ruby-on-rails, ruby, heroku, github

现在，当我在应用程序目录中时在终端中键入 git remote -v 时，我得到：

```
heroku  git@heroku.com:falling-samurai-3043.git (fetch)
heroku  git@heroku.com:falling-samurai-3043.git (push)

origin  git@github.com:obsideous/sample_app.git (fetch)
origin  git@github.com:obsideous/sample_app.git (push) 
```

`falling-smurai-3043`不再存在，因为我从 heroku 网站上的帐户中销毁了它。我希望它看起来像：

```
heroku  git@heroku.com:(one that I create).git (fetch)
heroku  git@heroku.com:(one that I create).git (push)

origin  git@github.com:BigBoy1337/sample_app.git (fetch)
origin  git@github.com:BigBoy1337/sample_app.git (push) 
```

`obsideous`是我的旧帐户，`BigBoy1337`也是我尝试将所有内容切换到的新 GitHub 帐户。
我怎样才能完成这些改变。我是这个东西的菜鸟，所以越详细越好。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:43:05.433

[`git remote`您可以通过键入（手册页](http://schacon.github.com/git/git-remote.html)）来更改远程名称：

```
git remote set-url heroku git@heroku.com:(one that I create).git
git remote set-url origin git@github.com:BigBoy1337/sample_app.git 
```

这将更新git文件中的`push`和地址。`fetch``config`

# php - 如何在多维数组中获取唯一值

> ID：10408482
> 
> 赞同：31
> 
> 时间：2012-05-02T06:01:52.513
> 
> 标签：php, multidimensional-array, unique-values

我在溢出和谷歌上做了很多环顾四周，但没有一个结果适用于我的具体情况。

我有一个名为 $holder 的占位符数组，值如下：

```
 Array ( 
    [0] => Array ( 
        [id] => 1 
        [pid] => 121 
        [uuid] => 1  
        )
    [1] => Array ( 
        [id] => 2 
        [pid] => 13
        [uuid] => 1
        )
    [2] => Array ( 
        [id] => 5 
        [pid] => 121 
        [uuid] => 1
        )
    ) 
```

我试图从这个多维数组中提取不同/唯一的值。我想要的最终结果是一个包含 (13,121) 的变量，或者（最好）一个数组，如下所示： Array( [0] => 13 [1] => 121 )

我再次尝试了序列化等，但不太明白在每个数组中使用单个键操作时它是如何工作的。

我尽量说清楚。我希望这是有道理的...

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-02T06:06:22.007

看起来很简单：将所有`pid`值提取到他们自己的数组中，运行它`array_unique`：

```
$uniquePids = array_unique(array_map(function ($i) { return $i['pid']; }, $holder)); 
```

同样的事情：

```
$pids = array();
foreach ($holder as $h) {
    $pids[] = $h['pid'];
}
$uniquePids = array_unique($pids); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-05-25T14:48:25.383

在 php >= 5.5 中，您可以使用[array_column](http://php.net/manual/en/function.array-column.php)：

```
array_unique(array_column($holder, 'pid')); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T06:08:11.900

试试这个

```
foreach($arr as $key => $val) {
    $new_arr[] = $val['pid'];
}
$uniq_arr = array_unique($new_arr); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T06:08:24.943

只需对其进行迭代并`array_unique`在结果上应用：

```
foreach($holder as $yourValues){
    $pids[] = $yourValues['pid'];
}
$yourUniquePids = array_unique($pids); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-11T23:43:30.727

假设您的数组称为 $holder：

```
$unique = array();
foreach( $holder as $h )
    if( ! in_array($h, $unique ) )
        $unique[] = $h; 
```

我相信，这是一种比通过 array_unique 更有效的方法。可能是一样的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-03T13:25:37.027

```
$uniquearray = [];
    for($i=0;$i<count($assocarray);$i++){
        if(!in_array($assocarray[$i]['KEY'],$uniquearray)){
            $uniquearray[$i]= $assocarray[$i]['KEY'];
        }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T06:30:04.183

嗨，请尝试下面给出的代码以获取唯一值，然后对该值进行排序

```
<?php

$sort_arr = unique_sort($holder, 'pid');
echo "<pre>";
print_r($sort_arr);
echo"</pre>";

/*function for get unique value then sort them*/

function unique_sort($arrs, $id) {
    $unique_arr = array();
    foreach ($arrs AS $arr) {

        if (!in_array($arr[$id], $unique_arr)) {
            $unique_arr[] = $arr[$id];
        }
    }
    sort($unique_arr);
    return $unique_arr;
} 
```

谢谢

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-12-30T09:11:45.140

对于我的情况，我使用这种方法

```
//get some data from db to array
while ($row = mysqli_fetch_assoc($query)){
   $data[] = $row;
}

//display unique value
echo "<table>";
$uniq = array();
foreach ($data as $row) {
    if(!in_array($row['path'], $uniq)) {
        $uniq[] = $row['path'];
        echo "<tr>";
        echo "<td>";
        echo $row['path'];
        echo "</td>";
        echo "<td>";
        echo $row['relationship_id'];
        echo "</td>";
        echo "</tr>";
    }
}
echo "</table>"; 
```

# android - android 的 paypal sdk 中的授权和捕获可行吗？

> ID：10408493
> 
> 赞同：2
> 
> 时间：2012-05-02T06:03:13.980
> 
> 标签：android, paypal, payment

我一直在寻找使用 paypal sdk 在 android 中实现 Authorization & Capture 的方法。我只发现使用网站支付标准是可行的。使用paypal sdk在移动平台上也可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:16:00.663

我能够使用[此处](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)找到的 paypal 的 Mobile Express Checkout Library 来实现授权和捕获。

# c# - 用 AgilityHTML 替换属性？

> ID：10408498
> 
> 赞同：1
> 
> 时间：2012-05-02T06:03:42.833
> 
> 标签：c#, .net-4.0, html-agility-pack

我需要更改很多页面的 css，所以我借此机会玩了 AgilityHTML，我可以阅读我必须更改的 css 条目，但我不知道如何更改它的 href。

这是我想要更改的示例：

```
<link rel="stylesheet" type="text/css" href="http://cdn.mysite.com/master/public.css?rev=012010"> 
```

更具体的href：

```
http://cdn.mysite.com/master/public.css?rev=012010 
```

我环顾四周，但还没有找到答案。

```
var nodes = doc.DocumentNode.SelectNodes("//css[@type=\"text/css\"]");
if (nodes != null)
{
    foreach (HtmlNode data in nodes)
    {
        if (data.Attributes["href"] == null)
            continue;

        //data.Attributes["href"].Value;
    }
} 
```

恢复：

**我怎样才能更改href并将其保存回来？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:22:06.437

```
data.Attributes["href"].Value = "Whatever you want";
...
...
doc.Save(stream);
// or:
string content = doc.DocumentNode.OuterHtml; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:50:58.040

尝试跟随，

```
var nodes = doc.DocumentNode.SelectNodes("//css[@type='text/css']"); 
```

它将正确选择节点。

我猜 HtmlNode 类上有一个方法叫做

> 设置属性值

您可以使用它来保存新值。

设置值后，您可以使用访问更改的 html 内容

```
node.DocumentNode.OuterHtml 
```

# linux - 如何从 Perl 进行 SIP 呼叫并接收 DTMF 输入？

> ID：10408501
> 
> 赞同：2
> 
> 时间：2012-05-02T06:04:11.103
> 
> 标签：linux, perl, monitoring, sip

在 Linux 上运行的命令行 Perl 应用程序中，我需要拨打电话 (SIP)，播放音频文件，然后等待并接收来自被叫方的 DTMF 输入。

我无法运行任何 GUI 应用程序，因此大多数 Linux SIP 客户端都被淘汰出局。

目前我正在使用 pjsua，不幸的是，这有一些我想避免的问题。

**实现这一目标的最佳方法是什么？**

是否有任何适用于 Linux 的完全可编写脚本的命令行 SIP 客户端？有没有可以使用的健全的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:25:43.597

尽量不要在 Perl 中实现您自己的 SIP 客户端。这将是一个 PITA 和浪费时间，因为那里有现成的实现。

例如，您可以为此使用[Asterisk](http://www.asterisk.org/asterisk)。凭借其脚本功能，它非常灵活。它有一个很棒的社区并且有很好的文档记录——你可以在网上找到很多例子。

与 Asterisk 相媲美的其他解决方案是[Yate](http://yate.null.ro)和[FreeSwitch](http://www.freeswitch.org)。

在 Asterisk 中，你基本上会：

1.  通过将[呼叫文件](http://www.the-asterisk-book.com/unstable/call-file.html)放在假脱机目录中来启动呼叫。
2.  将新的拨出电话连接到一个特殊的“扩展”（基本上是一个脚本块）：

拨号方案脚本示例：

```
[specialstuff]
exten => s,1,Wait(1)                  ; wait a second before playback
exten => s,2,Playback(yourfile.wav)   ; play your file
exten => s,3,AGI(yourscript.pl)       ; run your script with AGI interface
       ; in "yourscript.pl" you can wait for / receive DTMF and react on it 
```

或者，您可以在 Asterisk 中完全实现 DTMF。这称为 IVR（交互式语音响应）。网上有很多例子。

```
[specialstuff]
exten => s,1,Wait(1)                  ; wait a second before playback
exten => s,2,Playback(yourfile.wav)   ; play your file
exten => s,3,WaitExten(10)            ; wait 10 seconds for DTMF input

exten => 1,1,System(/your/script.pl one)   ; callee pressed DTMF 1
exten => 1,2,Playback(thanks)              ; give feedback

exten => 2,1,System(/your/script.pl two)   ; callee pressed DTMF 2
exten => 2,2,Playback(goodbye)             ; give feedback

exten => 3,1,System(/your/script.pl three) ; callee pressed DTMF 3
exten => 3,2,Playback(something)           ; give feedback 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T08:12:57.467

大约一年前，我研究过使用可用的 CPAN 模块来实现类似的 SIP 客户端。

但是最后我决定使用[SIPp](http://sipp.sourceforge.net/)。它并不完全直观（我花了很多时间在 Wireshark 中调试调用流），但最终它完成了我需要做的所有事情，甚至更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T20:20:13.847

我强烈推荐 FreeSWITCH。它实际上带有一个 Perl API，因此您可以从您的 Perl 程序与 FreeSWITCH 服务器通信并发起呼叫、发送/接收 DTMF、播放音频文件等。

例如，还有一种方法可以让 FreeSWITCH 在来电时调用您的 Perl 程序。

# android - 如何减少对话框中列表项的高度？

> ID：10408502
> 
> 赞同：1
> 
> 时间：2012-05-02T06:04:19.267
> 
> 标签：android

我在 AlertDialog 中有列表。我使用 setItems 来显示每个列表项的数组。但是，列表中每个项目的高度太大了。有没有办法减少对话框中列表项的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:58:51.533

您必须创建 XML 布局让称为行 .xml 包含列表组件，

然后你会膨胀行布局，

在您可以根据需要从 xml 布局更改对话框内的列表高度之后。

你可以试试这个：

```
 Dialog dialog = new Dialog(context); LayoutInflater inflater =
   context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View v = inflater.inflate
   (R.layout.row, null, false); dialog .setContentView(v);
   dialog .show(); 
```

然后你的xml布局：

```
 <TexView
    android:id="@+id/YOUR LIST"
    android:layout_width="fill_parent"
    android:layout_height="your height" >
  </TextView> 
```

希望这有帮助

# jakarta-ee - java socket和web编程

> ID：10408505
> 
> 赞同：0
> 
> 时间：2012-05-02T06:04:41.113
> 
> 标签：jakarta-ee

java-ee 中的先生，我如何获得通过套接字在我们的系统中发送和接收的数据包头的详细信息（仅限 source_IP、destination_IP、Source_Port、Destination_Port ）......每当我们打开浏览器并打开任何网站时，例如 www.stackoverflow .com 然后如果发生 222 个数据包传输，则我们的 java-ee 程序的输出将是休闲的，那么所有 222 source_IP Destination_ip source_port destination_port 192.168.5.10 64.34.119.12 2121 2929 64.34.119.12 192.168.5.10 的详细信息。.
. . . . . . . . 等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:19:46.043

不是纯 Java，而是借助一些库，如[http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:23:40.127

套接字是两台机器之间的端点通信。通过使用服务器套接字，您可以获得目标 ip 和端口。如果客户端视图也可以获取源 IP 而不是端口。仅使用端口连接到您的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:13:10.393

是的，您可以捕获通过任何机器上特定接口传输的所有数据包，有许多工具（如 wireshark 等）可以帮助您做到这一点，并且由于这些是开源的，您可以查看源代码并从中挑选出您需要的东西他们 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:23:59.227

据我所知，你不能用普通的java来做到这一点。在 Java 中，您只能通过套接字进行点对点连接。为了捕获所有数据包，网卡还必须处于混杂模式。在纯 java 中也无法切换到此模式。您可以使用 RMI 来调用本机代码，但是您是平台相关的。

# seo - 子域指向同一个站点时的SEO？

> ID：10408507
> 
> 赞同：0
> 
> 时间：2012-05-02T06:04:43.343
> 
> 标签：seo

我的子域将是城市名称：

```
miami.mysite.com
newyork.mysite.com 
```

我不知道大多数网站如何处理子域。我的想法只是将它们全部指向 mysite.com 并以某种方式使用 PHP 获取子域名，以便我使用 PHP 呼应城市帖子和内容。

提供所有子域具有不同的标题和描述。谷歌会将每个子域索引为不同的网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:18:54.313

是的，谷歌会将每一个都作为一个单独的站点进行索引。但是，请确保您考虑利弊。这是一个很好的起点：[http ://www.seomoz.org/blog/understanding-root-domains-subdomains-vs-subfolders-microsites](http://www.seomoz.org/blog/understanding-root-domains-subdomains-vs-subfolders-microsites)

我的意见是使用子文件夹（例如 mysite.com/miami）而不是子域，主要是因为将入站链接合并到单个主机名将随着时间的推移建立更多的权限，而不是在数百个子域中稀释相同的链接汁液。此外，我认为很难在每个子域上构建足够独特的内容来支持或证明拥有一个单独的站点。

# java - 没有重复的排列算法？

> ID：10408509
> 
> 赞同：8
> 
> 时间：2012-05-02T06:04:48.793
> 
> 标签：java, math, permutation, combinations

在我正在为给定的一组字母生成字谜的程序中，我目前的方法是：

1.  获取所有字母的所有组合
2.  获取每个组合组的排列
3.  按字母顺序对结果排列进行排序
4.  删除重复条目

我的问题与排列的数学有关。我想知道是否有可能在删除重复条目后完全计算存储所有剩余条目所需的数组大小（例如，使用重复字母的数量与排列公式或其他东西结合使用）。

对于我的问题含糊不清，我深表歉意，我仍在研究更多关于组合和排列的信息。随着我对组合和排列的理解的扩展，我将尝试详细说明我的目标，一旦我重新熟悉了我的程序（这是我去年夏天的一个业余项目）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:10:31.000

如果您有`n`元素、`a[0]`一个元素的`a[1]`重复项、另一个元素的重复项，等等，直到`a[k]`，那么不同排列的总数（最多重复项）为`n!/(a[0]! a[1]! ... a[k]!)`。

仅供参考，如果您有兴趣，可以使用[Guava](http://guava-libraries.googlecode.com)编写

```
Collection<List<Character>> uniquePermutations = 
  Collections2.orderedPermutations(Lists.charactersOf(string)); 
```

结果将是字符的*独特*排列，考虑到重复和一切。您甚至可以调用它的`.size()`方法——或者只是查看它的实现以获取提示。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:00:22.163

生成所有排列确实是个坏主意。例如，“溢出”一词有 40320 个排列。因此，随着字长的增加，内存消耗会变得非常高。

我相信你试图解决的问题可以简化为找出一个词是否是另一个词的字谜。

然后你可以通过计算每个字母出现的次数（它将是一个 26 元组）并将这些元组相互比较来解决它。

# ruby-on-rails - 使用应用程序令牌发布到应用程序的页面？考拉

> ID：10408510
> 
> 赞同：1
> 
> 时间：2012-05-02T06:04:53.427
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

每天我都想运行一个 rake 任务，将更新发布到应用程序的 Facebook 页面。该页面在 Facebook > 应用 > 设置 > 高级（底部）下定义。

我想获取应用程序访问令牌，然后作为页面发布到页面。这就是我的想法，但它不起作用：

```
@oauth = Koala::Facebook::OAuth.new(CONFIG['appid'], CONFIG['appsecret'])
@token = @oauth.get_app_access_token
@page_graph = Koala::Facebook::API.new(@token)
@page_graph.put_connections('NAME_OF_PAGE','feed', :message => 'This is posted as the page') 
```

我得到的错误：

```
OAuthException: (#200) The user hasn't authorized the application to perform this action 
```

我不知道是否有一个地方（我尝试在@oauth.get_app_access_token 中作为选项传递）：

@oauth.get_app_access_token(:permissions => "manage_pages")

依然没有。有任何想法吗？

* * *

[更新]

所以我改为：

```
@oauth = Koala::Facebook::OAuth.new(CONFIG['appid'], CONFIG['appsecret'])
@token = @oauth.get_app_access_token
@page_graph = Koala::Facebook::API.new(@token)
@postid = @page_graph.put_connections(CONFIG['appid'],'feed', :message => 'This is posted as the page') 
```

然后当我输出@postid 时，我得到一个有效的 ID。我将此 id 放入：[https](https://graph.facebook.com/POSTID) ://graph.facebook.com/POSTID并得到有效响应。

这非常令人困惑。为什么没有出现在页面上？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:27:52.840

我有同样的问题。到目前为止，我只为 OAuth 找到了这种方法，以便获得发布权限：

@oauth.url_for_oauth_code(:permissions => "publish_stream")

但我一直遇到无法将此方法应用于字符串的错误。我认为它失败并且它不返回 oAuth 结构，而是返回一个字符串。

# android - 安卓-facebook消息

> ID：10408513
> 
> 赞同：1
> 
> 时间：2012-05-02T06:05:01.063
> 
> 标签：android, facebook-graph-api

我想知道是否有任何方法可以从 android 应用程序向 facebook 中的朋友发送消息。（不是墙帖）。谷歌搜索了很多关于这个主题但没有得到任何合适的解决方案。指导我参考或博客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:30:14.783

I am not sure about native application but you can do it from HTML5 application using javascript:-

[https://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

If no other solution place the script in an html file and load the same from the native app

# iphone - 如何在首次启动应用程序时使文本字段不可编辑

> ID：10408518
> 
> 赞同：2
> 
> 时间：2012-05-02T06:06:00.347
> 
> 标签：iphone, uitextfield

我想在应用程序首次启动时使文本字段不可编辑。而且我通过点击它有一个 UIBarbutton 项目，它将使文本字段可编辑。我正在尝试以下代码但不工作。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{
if(edit == NO){
   textField.enabled = NO;
}
    if(edit == YES){
    textField.enabled = NO;
  }
 return YES;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:45:51.040

您可以`- (void)viewWillAppear:(BOOL)animated`为此使用委托，

```
- (void)viewWillAppear:(BOOL)animated
 {
   [textfield setEnable:NO];
 } 
```

`[textfield setEnable:YES];`并在栏按钮的点击方法中写入，

```
- (IBAction)clicked:(id)sender
  {
    [textfield setEnable:YES];
  } 
```

如果您使用上面的代码，那么如果您导航到另一个视图（详细视图）并返回，那么 textField 也将被禁用。如果您不希望这样，请使用以下代码：

```
 - (void)viewDidLoad
 {
  [textfield setEnable:NO];
 } 
```

有关视图控制器委托的更多信息：[UIViewController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:09:52.197

你应该使用这个方法

```
-(Void)viewwillappers
 {
   [textfield setEnable:NO];
 } 
```

单击栏按钮后，在 Button Click 方法中将其设置为 yes。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T07:14:25.130

```
txtfld.userInteractionEnabled = NO;
// perform changes and enable afterwards
txtfld.userInteractionEnabled = YES; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T07:16:58.470

尝试这个

```
-(Void)viewwillapper

{

[textfield setuserintractionEnable:yes];

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-02T07:14:52.043

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc]
             initWithStyle:UITableViewCellStyleValue1
             reuseIdentifier:CellIdentifier]
            autorelease];
}
cell.textLabel.text=[Players objectAtIndex:indexPath.row];

playername=[[UITextField alloc]initWithFrame:CGRectMake(10, 3, 280, 30)];  
playername.placeholder=@"Player";
playername.delegate=self;
playername.keyboardType=UIKeyboardTypeDefault;
 // playername.returnKeyType=UIReturnKeyDone;
[cell.contentView addSubview:playername];
 return cell;
} 
```

将此用于动态文本字段。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-29T18:33:20.713

此外，如果您使用 Storyboard，您只需取消选中 TextField 的“启用”复选框即可。应该做的伎俩。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T07:07:36.567

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
static NSString *MyIdentifier = @"tblCellView";

PlayerDetailsCell *cell = (PlayerDetailsCell *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
if(cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"PlayerDetailsCell" owner:self options:nil];
    cell = tblCell;
}
return cell; 
} 
```

在您的表格视图中使用此代码并调用您的 uitableviewcell 类。就像我在调用(playerdetailscell)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-02T06:48:20.610

简单的。

在 XIB 中，对于 textrField 的属性，取消选中“启用用户交互”

.现在在 Bar 按钮的点击事件上使用这个：

```
 [textfield setEnable:NO]; 
```

优点：

当您再次加载此视图时。首先该 textField 将被禁用。

所以它会如你所愿。

# c# - 我可以简化这个案例陈述吗？

> ID：10408523
> 
> 赞同：2
> 
> 时间：2012-05-02T06:06:08.767
> 
> 标签：c#

我有以下内容：

```
switch (id.Substring(2, 2))
{
    case "00": return("14");
    case "01": return("19");
    case "02": return("19");
    case "03": return("19");
    case "1F": return("19");
    case "04": return("17");
    case "05": return("18");

} 
```

对此不确定，但有没有办法可以将“01”、“02”、“03”和“1F”组合成一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T06:07:28.243

```
 switch (id.Substring(2, 2))
    {
        case "00": return("14");
        case "01":
        case "02":
        case "03":
        case "1F": return("19");
        case "04": return("17");
        case "05": return("18");
    } 
```

基本上，**只要您不添加任何代码**（因为不支持失败），您就可以对多个测试值使用相同的结果路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:11:53.460

另一种方法是创建一个字典，其中 case 子句（00、01 等）作为键，值作为 14、19 等。

然后打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:43:36.180

不确定这是否会为当前答案增加任何价值，但符合 jfs - 我会执行以下操作...

```
 var result = new Dictionary<string, string>();

            result.Add("00","14");
            result.Add("01", "14");
            result.Add("02", "14");
            result.Add("03", "14");
            result.Add("1F", "19");
            result.Add("04", "17");
            result.Add("05", "18");

            return result[id.Substring(2, 2)]; 
```

# f# - F# 中的代码行数和其他指标

> ID：10408524
> 
> 赞同：9
> 
> 时间：2012-05-02T06:06:17.320
> 
> 标签：f#, code-metrics

如何获得有关我的 F# 代码的一些不错的统计信息？

我可以想象这样的事情

*   我的代码行数
*   文件数
*   字符数？
*   函数、类、模块等的数量

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T06:21:14.403

为什么不使用一些简单的 shell 实用程序？

按顺序回答

```
wc -l *.fs
ls -l *.fs | wc -l
wc -c *.fs
grep module *.fs | wc -l
grep type *.fs | wc -l
grep "^let\|member" *.fs | wc -l 
```

**更新：**递归文件夹的一些示例 - 我希望模式很明显

```
wc -l `find . -name "*.fs" `
find . -name "*.fs" | wc -l
wc -c `find . -name "*.fs" `
grep module `find . -name "*.fs" ` | wc -l 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T07:08:19.237

这是一个 F# 版本，它递归地计算`fs`和`fsx`文件（假设您安装了 F# 运行时）：

```
open System.IO
open System.Text.RegularExpressions

let rec allFiles dir =
    seq { yield! Directory.GetFiles dir
          yield! Seq.collect allFiles (Directory.GetDirectories dir) }

let rgType = new Regex(@"type", RegexOptions.Compiled)
let rgModule = new Regex(@"module", RegexOptions.Compiled)
let rgFunction = new Regex(@"^let|member", RegexOptions.Compiled)

let count (rg: Regex) s =
    s |> rg.Matches |> fun x -> x.Count

type Statistics = {
        NumOfLines: int; NumOfFiles: int;
        NumOfChars: int; NumOfTypes: int;
        NumOfModules: int; NumOfFunctions: int;
    } 

let getStats =
    allFiles 
    >> Seq.filter (fun f -> f.EndsWith ".fs" || f.EndsWith ".fsx")
    >> Seq.fold (fun acc f -> 
                    let contents = f |> File.ReadLines
                    { NumOfLines = acc.NumOfLines + Seq.length contents; 
                      NumOfFiles = acc.NumOfFiles + 1;
                      NumOfChars = acc.NumOfChars + Seq.sumBy String.length contents;
                      NumOfTypes = acc.NumOfTypes + Seq.sumBy (count rgType) contents;
                      NumOfModules = acc.NumOfModules + Seq.sumBy (count rgModule) contents;
                      NumOfFunctions = acc.NumOfFunctions + Seq.sumBy (count rgFunction) contents; } 
                        ) { NumOfLines = 0; NumOfFiles = 0; 
                            NumOfChars = 0; NumOfTypes = 0; 
                            NumOfModules = 0; NumOfFunctions = 0 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T07:33:15.090

因为 F# 编译为 IL 代码和通用类型系统 (CTS) 和[PDB 文件](http://msdn.microsoft.com/en-us/library/ms241903.aspx)，所以可以通过工具[NDepend](http://www.ndepend.com/Default.aspx)分析 F# 程序集，您将获得关于您的代码的[82 个代码指标](http://www.ndepend.com/Metrics.aspx)（+[该工具的所有其他功能](http://www.ndepend.com/Features.aspx)）。[此处](http://www.ndepend.com/NDependDownload.aspx)提供免费试用版。

*免责声明，我是 NDepend 团队的成员。*

# android - Android - 获取 Google 帐户同步设置

> ID：10408534
> 
> 赞同：6
> 
> 时间：2012-05-02T06:06:48.783
> 
> 标签：android

我正在尝试确定用户是否将 Google 照片 (picasa) 设置为在其设备上同步。有没有办法以编程方式确定是否为用户手机上设置的任何谷歌帐户打开了同步？

另外，有没有办法以编程方式关闭谷歌照片的同步？如果不是，那么直接向 Google 帐户的“数据和同步”屏幕启动活动的正确意图是什么，以便用户可以手动禁用同步？

提前致谢！

编辑：

我发现了一些有用的代码，但是“Google-Photos”（又名 Picasa）的授权字符串是什么？

```
import android.provider.ContactsContract;

AccountManager am = AccountManager.get(this);
Account[] accounts = am.getAccountsByType("com.google");        
boolean syncEnabled = ContentResolver.getSyncAutomatically(accounts[0], ContactsContract.AUTHORITY); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:40:40.770

有两种情况

**1)**如果您的设备已经与 Google 帐户同步，那么帐户选择器将选择当前登录帐户。[参考这个链接](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address)

**2)**如果您的帐户选择器没有返回任何帐户，这意味着您没有使用任何 Google 帐户登录。所以你需要同步。现在在这种情况下打开你的帐户屏幕和一个帐户[这将帮助你](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)

# javascript - html 表中的 Javascript 弹出窗口

> ID：10408536
> 
> 赞同：1
> 
> 时间：2012-05-02T06:06:55.487
> 
> 标签：javascript, html, html-table, popup

我有一个 10 x 10 的数据表，它是使用 html 标签创建的。如果可以为每个单元格创建一个 onClick 函数？我的意思是，如果我单击一个单元格，那么它会在警报窗口中给我它的值吗？如果是，那么如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:19:43.997

纯 JS - 假设`<table id="table1">`：

```
window.onload=function() {
  var cells = document.getElementById('table1').getElementsByTagName('td');
  for (var i=0, n=cells.length;i<n;i++) {
    cells[i].onclick=function() { alert(this.innerHTML) }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T17:59:31.687

一个很好的例子可以在这里找到

```
HTML CODE: 

<div id='page-wrap'>

Your content goes here.

<a id='show' href='#'>show overlay</a> 
```

* * *

```
JavaScript & JQuery:

$(document).ready(function() {

$("#show").click(function() {
    showPopup();
});

$("#popup").click(function() {

    $(this).hide();
    $("#mask").hide();

}); 
```

});

函数显示弹出（）{

```
 // show pop-up

$("#mask").fadeTo(500, 0.25);

// show the popup
$("#popup").show();
}

 ---------------------------------------

 CSS CODE: 

* { margin: 0, padding 0}

#mask{
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #000;
display: none;
z-index: 10000; 
```

}

```
#popup
{
width: 200px;
height: 200px;
margin: 10px auto; 
border: 1px solid #333;
background-color: #ffffdd;
cursor: pointer;
padding: 10px;
position: relative;
z-index: 10001;
display: none;
}

  [![enter image description here][1]][1] 
```

# eclipse - Eclipse 与 jdk1.4 不兼容

> ID：10408538
> 
> 赞同：0
> 
> 时间：2012-05-02T06:07:11.390
> 
> 标签：eclipse

嗨，我正在使用 eclipse galileo 和 jdk 版本 jdk1.4。无法打开 eclipse，因为它给出“需要 jdk1.5 或更高版本”错误。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:31:41.857

请安装JDK/JRE 1.5或以上版本，然后在eclipse主目录下的eclipse.ini文件中添加以下内容

-vm

$JDK_HOME\bin

注意：JRE 的路径应该在 -vm 之后的行中，而不是在同一行中。

Eclipse 将使用此路径上可用的 JVM 来启动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:51:36.343

将最新版本的 JRE 从您的文件夹复制并粘贴`C:\program files\jre...`到 eclipse 文件夹中，并将其重命名为“JRE”，它应该可以工作。

# sql-server-2005 - 来自 servlet 的 INSERT 抛出 java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver

> ID：10408539
> 
> 赞同：0
> 
> 时间：2012-05-02T06:07:11.653
> 
> 标签：sql-server-2005, servlets, jdbc

我正在使用下面的代码从 servlet 连接到 SQL Server 2005 数据库。但它抛出了以下异常：

```
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver 
```

* * *

代码片段：

```
import java.sql.*;
import java.io.*;

import javax.servlet.*;
import javax.servlet.http.*;

public class InsertServlet extends HttpServlet
{
public void doPost(HttpServletRequest request,HttpServletResponse response)
throws ServletException,IOException
{
    doGet(request,response);

}

public void doGet(HttpServletRequest request,HttpServletResponse response)
throws ServletException,IOException
{
    response.setContentType("text/html");
    PrintWriter pw=response.getWriter();
    EmpDetailBean empdetailbean=new EmpDetailBean();
    Connection con=null;
    PreparedStatement pstmt2=null;
    //ResultSet rs=null;
    String employeecode=request.getParameter("employeecode");
    pw.println(employeecode);
    empdetailbean.setEmployeecode(employeecode);
    try
    {   //String emp_code=(String)session.getAttribute("empcode");
        //Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        //String url = "jdbc:sqlserver://localhost;" +  
               // "databaseName=test;user=sa;password= ;"; 

        //con=DriverManager.getConnection("Jdbc:Odbc:leave1");
        con=DriverManager.getConnection("jdbc:sqlserver://10.217.7.3;databaseName=test;user=sa;password=123;");
        String query1="insert into leavetype(dbo.empcode) values(?)";

        pstmt2=con.prepareStatement(query1);
        pstmt2.setString(1,empdetailbean.getEmployeecode());

        int k=pstmt2.executeUpdate();
        System.out.println(k);
        pstmt2.close();    

    }
    catch(Exception e)
    {   pw.println("exception"+ e);

    }

}

} 
```

**日志文件显示**

```
May 2, 2012 11:34:19 AM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
May 2, 2012 11:34:19 AM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:51:41.420

如果您想`com.microsoft.sqlserver.jdbc.SQLServerDriver`用作驱动程序，则`sqljdbc.jar`需要存在于您的类路径中，即`WEB-INF\lib`.

如果您想使用 Jtds 驱动程序，请检查此[链接](http://jtds.sourceforge.net/faq.html#driverImplementation)以获取驱动程序和数据库 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:10:35.713

似乎您已部署的 war 文件中缺少 JDBC 连接的 Jar 文件。你能确保lib文件与war文件正确打包吗

# r - text() R 函数 - 如何更改单个单词的字体？

> ID：10408542
> 
> 赞同：3
> 
> 时间：2012-05-02T06:07:31.077
> 
> 标签：r, fonts

```
text(x, y, font=2, "text") 
```

更改整个“文本”的字体。

但是是否可以更改“文本”中单个单词的字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:35:08.193

是的！

```
plot.new()
text(0.5,0.5, expression(paste(bold("bold")," not bold"))) 
```

查看`?plotmath`可以使用的大量其他选项和符号。

# mono - Mono 有热插拔功能吗？

> ID：10408547
> 
> 赞同：1
> 
> 时间：2012-05-02T06:08:04.370
> 
> 标签：mono

当我用 Java 编写代码时，我可以使用 JRebel 之类的工具来让我立即查看更改，而无需重新启动服务器。（我将 JVM 嵌入到 ac 应用程序中，所以我不想为每次 Java 源代码更改不断重启 c 应用程序） Mono 有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:48:08.177

您可以通过使用应用程序域来做类似的事情（在新的应用程序域中加载新代码，卸载旧代码等）。

# spring - 在 Tomcat 中发送带有附件文件的消息时缺少开始边界异常

> ID：10408553
> 
> 赞同：2
> 
> 时间：2012-05-02T06:08:38.363
> 
> 标签：spring, tomcat, jetty, jakarta-mail, apache-camel

我找到了许多可能与这个问题匹配的东西，但没有一个对我有用。

我正在使用 Apache Camel 将文件作为电子邮件附件传递。它使用以下 Maven 目标完美地工作：

码头：运行码头：运行-爆炸码头：运行-战争

我正在使用java 1.6。我的部署容器是tomcat6。在 tomcat6 和 tomcat7 中，我得到以下异常：

org.springframework.mail.MailSendException：失败的消息：javax.mail.MessagingException：缺少开始边界；消息异常详细信息 (1) 是：失败消息 1：javax.mail.MessagingException：在 javax.mail.internet.MimeMultipart.parsebm(MimeMultipart.java:882) 处缺少开始边界

网络上的建议表明这是一个类加载器问题。要么没有找到activation-1.1.jar 或mail-1.4.4.jar 文件，要么没有找到mail-1.4.4.jar 中的mailcap 文件。

我试过把这些 jar 文件放在 tomcat/lib 中。我已经尝试将 jar 文件中的 mailcap 复制到爆炸战争的 META-INF 目录中。这些都没有区别。

版本：

Windows：Apache Tomcat/7.0.5 JDK 1.6.0_27-b07 Apache Camel 2.8.0-fuse-00-08

Linux - ubuntu 10.04 LTS 附带的版本 - 我稍后会检查并添加。

这是我的骆驼路线的简化版本：

```
<route id="uploadFileForm">
    <from uri="jetty:http://0.0.0.0:9095/premier"/>
    <to uri="velocity:form.html"/>
</route>
<route id="uploadFile">
    <from uri="jetty:http://0.0.0.0:9095/fup"/>
    <to uri="log:mail?showBody=true&amp;showHeaders=true"/>
    <to uri="smtp://localhost"/>
    <setHeader headerName="content-type"><constant>text/plain</constant></setHeader>
    <setBody><constant>Message Sent</constant></setBody>
</route> 
```

这是日志显示的内容：

```
[4 - seda://mail-ws-audio-files] 邮件信息交换[ExchangePattern:InOut, Headers:{Connection=Keep-Alive, CamelHttpServletRequest=org.eclipse.jetty.servlets.MultiPartFilter$Wrapper@bb32c5, upfile= D:downloads!37SQFTS.pdf, CamelHttpPath=/fup, subject=BBC Premier League Update - Edition 1, CamelHttpQuery=null, CamelHttpServletResponse=HTTP/1.1 200

, UntilMessage=直到格林威治标准时间 10:30，当第二个公告可用时（仅限周一至周五），主机=localhost:9095，用户代理=Mozilla/4.0（兼容；MSIE 7.0；Windows NT 6.1；Trident/4.0；SLCC2； .NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；.NET4.0C；.NET4.0E)，Accept-Encoding=gzip，放气，bulletin_type=am，to=julian.cable@ yahoo.com，cc=admin@localhost，breadcrumbId=ID-B1-L0N336601-58958-1335935026761-0-2，CamelHttpUrl=http://localhost:9095/fup，Content-Length=24896，Referer=http:// localhost:9095/premier, from=jfbcable@gmail.com, Accept=image/jpeg, application/x-ms-application, image/gif, application/xaml+xml, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*, Accept-Language=en-GB, Content-Type=multipart/form-data; 边界=---------------7dc3a8371906f6，

    请在附件中找到我们文件的最新版本。

```

一个最小的示例 maven 项目在[这里](https://docs.google.com/open?id=0BwhuUU2g0GM9Um1PdGRHV0tfN1k)，战争在[这里](https://docs.google.com/open?id=0BwhuUU2g0GM9dmlZOVZMMlg5N2M)。如果您在 Eclipse 中运行项目或使用

```
mvn jetty:run 
```

然后使用[http://localhost:9095/premier的表格](http://localhost:9095/premier)

您将收到“无法联系服务器”异常。但是，如果您将战争部署到 tomcat，您将得到缺少的开始边界异常。如果您编辑 applicationContext.xml 并将*** * 替换为有效值，它实际上会发送一封电子邮件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:44:44.257

我有一个可行的解决方案来解决我的问题，但没有回答我的问题。我的原始路由集以我尝试过的所有方式工作，除了在 Tomcat 中并且不需要 java 代码（我自己的）。

我采取了蛮力的方法并将码头生成的附件移动到身体上，然后在路线的后期，将其移回附件。它让我可以部署一些东西，但它是一个黑客。

仍在寻找一种方法来部署我在 Tomcat 6 中设置的原始路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:10:57.793

我已经尝试过您的简化骆驼路线示例，它适用于 mvn jetty:run。

在我的 Tomcat 7.0.27、Java 6 中，它确实有效。邮件已正确发送。唯一的区别是我不使用：

```
mvn install 
```

而是使用：

```
mvn package 
```

然后将 target/test-mail-0.0.1-SNAPSHOT.war 复制到 Tomcat webapps 文件夹，并启动 tomcat（bin/startup.sh 或 bin/startup.bat）。

希望这也适用于你。

我建议您选择与我相同的 Tomcat 版本并遵循相同的步骤。

您应该的其他问题来源：

1.  检查是否有环境变量 CATALINA_HOME 或 CATALINA_BASE 毫无疑问地设置为指向其他 Tomcat 安装。
2.  同样在环境变量中，检查 JRE_HOME 或 JAVA_HOME（使用 JDK 时）和 CLASSPATH 变量的内容。您应该将类​​路径设置为 $JAVA_HOME/jre/lib:$JAVA_HOME/jre/lib/ext:。或 %JAVA_HOME%/jre/lib;%JAVA_HOME%/jre/lib/ext;。（最后一个点很重要）
3.  如果您仅在 JRE 上运行，请将 JAVA_HOME/lib 替换为 JRE_HOME。
4.  您正在运行什么版本的 JVM。我正在使用 Oracle JDK 6。您使用的是 OpenJDK/J9 还是其他？

# c# - 有没有办法在 C# 中从构造函数中初始化字段？

> ID：10408558
> 
> 赞同：3
> 
> 时间：2012-05-02T06:09:15.410
> 
> 标签：c#, constructor

我似乎记得某种简化发送给构造函数的类的字段的初始化方法，例如：

```
 Class A {
    int n;
    public A(int N) : n(N) {}
 } 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:22:43.340

在构造函数之后有一种简单的方法来初始化类字段，如下所示：

```
public class A
  {
    public int N;
    public string S;
    public A() {}
  }

  class B
  {
     void foo()
     {
        A a = new A() { N = 1, S = "string" }
     }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:10:13.490

那将是 C++，但您将问题标记为 C#。C# 没有初始化列表的概念，您只需在构造函数中分配字段。但是，您可以链接构造函数或以类似方式调用基类构造函数

```
// call base class constructor before your own executes
public class B : A
{
    public B(int whatever)
        : base(something)
    {
        // more code here
    }
}

// call secondary constructor
public class B : A
{
    private int _something;

    public B() : this(10) { }

    public B(int whatever)
    {
        _something = whatever;
    }
} 
```

# iphone - 在功能完成之前我无法隐藏按钮并设置图像

> ID：10408561
> 
> 赞同：0
> 
> 时间：2012-05-02T06:09:25.773
> 
> 标签：iphone, objective-c, ios

我想在单击时隐藏按钮 loadImgButton 。此按钮将调用以下方法：

```
- (IBAction)produceImage:(id)sender
{

    [loadImgButton setHidden:YES];

    [image1 setImage:[UIImage imageNamed:@"Fanny2.JPG"]];
    [image2 setImage:[UIImage imageNamed:@"Fanny3.JPG"]];

    NSLog(@"i am here");

    for (int i = 0; i < 100000; i++) {
        for(int j = 0;j < 10000; j++) {

        }
    }
}

The problem is that the button is not hidden and the image is not set until the function is finish. What is the reason cause this situation and how to fix it? Thanks! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:21:37.243

UI 的更新发生在运行循环中，诸如`setHidden`简单地设置标志的方法，以便以后可以更新 UI。您可能想查看“ [Is there a way to make drawRect work right now?](https://stackoverflow.com/questions/4739748/is-there-a-way-to-make-drawrect-work-right-now) ”以了解强制立即更新 UI 的方法。但是，您可能会更好地考虑其他方法来实现所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:20:34.087

```
- (IBAction)produceImage:(id)sender
{

     [loadImgButton setHidden:YES];

     // Call another function which download image with delay

    [self performSelector:@selector(image:) withObject:sender afterDelay:2];

}

- (IBAction)image:(id)sender
{
    [image1 setImage:[UIImage imageNamed:@"Fanny2.JPG"]];

    [image2 setImage:[UIImage imageNamed:@"Fanny3.JPG"]];

    NSLog(@"i am here");

    for (int i = 0; i < 100000; i++) {
        for(int j = 0;j < 10000; j++) {

        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:22:13.500

您可能想要使用动画块，以便您可以在其完成时运行您的函数。您的代码的问题在于，我相信 setHidden 只是发送一个请求，该请求会在系统出现时执行。这就是为什么它首先运行您的功能。试试这个：

```
[UIView animateWithDuration:0.1 animations:^{

  [loadImgButton setHidden:YES];

} 
completion:^ (BOOL finished) {

 for (int i = 0; i < 100000; i++) {
    for(int j = 0;j < 10000; j++) {

    }
 }

}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:28:33.373

如果您的按钮没有隐藏，那么一旦您检查您的 nib 文件并检查您的按钮对象是否与文件连接？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T06:42:36.900

创建 1 个新方法。

```
- (IBAction)produceImage:(id)sender 
```

{

```
[loadImgButton setHidden:YES];

[self new]; 
```

} -（无效）新{

```
[image1 setImage:[UIImage imageNamed:@"Fanny2.JPG"]];
[image2 setImage:[UIImage imageNamed:@"Fanny3.JPG"]];

NSLog(@"i am here");

for (int i = 0; i < 100000; i++) {
    for(int j = 0;j < 10000; j++) {

    }
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T08:44:23.950

试试这个

```
-(IBAction)buttonPressed:(id)sender{

[(UIButton*)sender performSelectorInBackground:@selector(setHidden:) withObject:[NSNumber numberWithBool:YES]];
NSLog(@"heeere");

for (int i = 0; i < 100000; i++) {
    for(int j = 0;j < 10000; j++) {

    }
} 
```

}

# algorithm - 在不同的基础上计数

> ID：10408563
> 
> 赞同：3
> 
> 时间：2012-05-02T06:09:27.460
> 
> 标签：algorithm, binary, decimal

如果要计数超过 8 位，以 2 为底，结果如下：

```
0 0 0 0 0 0 0 0;
0 0 0 0 0 0 0 1;
0 0 0 0 0 0 1 0;
.....
1 1 1 1 1 1 1 1; 
```

但是，您如何制作一个算法来计算 - 对于每个位 - 基于不同的基数，例如：如果最低有效位根据基数 5 计算，而最高有效位在基数 2 上，则结果应如下所示：

```
0 0 0 0 0 0 0 0;
0 0 0 0 0 0 0 1;
0 0 0 0 0 0 0 2;
0 0 0 0 0 0 0 3;
0 0 0 0 0 0 0 4;
1 0 0 0 0 0 0 0;
1 0 0 0 0 0 0 1;
1 0 0 0 0 0 0 2;
...
1 0 0 0 0 0 0 4; 
```

你能给我生成这些向量的算法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:53:18.917

这个问题的一种算法是大多数学生通常在幼儿园学习的那种“ripple-carry”加法，除了稍加修改。当您将两个数字相加时，您将逐个数字地进行：首先是个位，然后是十位，然后是百位，等等。如果您必须写下一个大于 10 的数字（例如 7+8 =15），然后你把它写下来 -10 并将 10 “携带”到下一个地方，在那里你添加它（它变成 1）；这可能会“影响”许多地方（例如 999+1=1000）。通过使用这种算法重复加一个，我们可以一个一个地计数。

重要的是要澄清我们所追求的：不同的地方有不同的基地意味着什么。如果您允许位置具有任意数字范围，并代表任意数字，那么可能会发生一些不好的事情：一个数字可以用多种方式写入，和/或某些十进制数不能写入。因此，我们将自己限制在一个“理智”的方案中，如果一个地方*i*有一个基数*b [i]*，这意味着有效数字是 0,1,2,..., *b [i] -1*（像往常一样，就像十进制一样)，并且那个地方的数字代表*b [i]*乘以右边所有基的乘积 ( *b [i-1]* x *b [i-2]*X ...）。例如，如果我们的基数是 [10,10,10]，则数字的值将是 [1000,100,10,1]；如果我们的基数是 [5,10,5]，则数字的值将是 [250,50,5,1]

数字加1的方法：

```
Increment the least-significant digit (LSD)
Perform ripple-carry as follows:
    Set the current place to the LSD
    Repeat as long as the current place exceeds its allowed max digit:
        Set the digit at the current place to 0
        Advance the current place one to the left
        Increment the number at the new place (now on the left) 
```

重复上述算法，直到获得所需的所有数字。

Python：

```
from itertools import *

def multibaseCount(baseFunction):
    currentDigits = [0]
    while True:
        yield currentDigits[::-1]

        # add 1
        currentDigits[0] += 1

        # ripple-carry:
        for place,digit in enumerate(currentDigits):
            if currentDigits[place]>=baseFunction(place):    # if exceeds max digit
                currentDigits[place] = 0         # mod current digit by 10
                if place==len(currentDigits)-1:  # add new digit if doesn't exist
                    currentDigits += [0]
                currentDigits[place+1] += 1      # add 1 to next digit
            else:    # doesn't exceed max digit; don't need to carry any more
                break 
```

演示，其中 n 位置的底数为 n+1：

```
>>> for digits in islice(multibaseCount(lambda n:n+1),30):
...     print( ''.join(map(str,digits)).zfill(5) )
... 
00000
00010
00100
00110
00200
00210
01000
01010
01100
01110
01200
01210
02000
02010
02100
02110
02200
02210
03000
03010
03100
03110
03200
03210
10000
10010
10100
10110
10200
10210 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:24:09.590

如果您真的只对这种格式的八位“数字”感兴趣，这里有一些伪代码可以帮助您入门：

```
for (a=0; a<2: a++)
  for (b=0; b<5; b++)
    for (c=0; c<2; c++)
      for (d=0; d<2; d++)
        for (e=0; e<2; e++)
          for (f=0; f<2; f++)
            for (g=0; g<2; g++)
              for (h=0; h<2; h++)
                printf("%d%d%d%d%d%d%d%d\n", a, b, c, d, e, f, g, h); 
```

在这种情况下，它将是基数 2、5、2、2、2、2、2、2。根据需要更改索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-24T21:07:23.117

为时已晚，但这是 C 中的解决方案。

```
#include <stdio.h>
#include <assert.h>

void
odo(int base, int len)
{
    int stack[len+1];
    int pos=0;
    #define DIGIT (stack[pos])
    #define LOOP(code) for(int i=0; i<len; i++) code
    #define PRINT LOOP(printf("%d", stack[i]));printf("\n");
    LOOP(stack[i]=-1);
    while(pos>=0)
    {
        if (pos<len-1)
        {
            if (DIGIT<base)
            {
                DIGIT++;
                pos++;
                assert(DIGIT==-1);
            }
            else
            {
                DIGIT=-1;
                pos--;
                continue;
            }
        }
        else
        {
            assert(pos==len-1);
            if (DIGIT<base)
            {
                DIGIT++;
                PRINT;
            }
            else
            {
                DIGIT=-1;
                pos--;
            }
        }
    }
}

int
main(void)
{
    odo(4,6);
} 
```

# javascript - 如何只运行一次函数，然后运行另一个依赖相同元素的函数

> ID：10408566
> 
> 赞同：0
> 
> 时间：2012-05-02T06:09:44.210
> 
> 标签：javascript, jquery, infinite-scroll

我正在尝试为一个站点构建一个无限滚动系统，但遇到了问题。

基本上有一个包含很多`<li>`元素的 div。

此函数对 div 进行切片并隐藏`<li>`前 20 个元素之后的每个元素。一旦滚动到页面底部，它会显示所有元素并立即切片到 40 个元素，然后再次隐藏其余元素。

```
$("#CategoryContent li").slice(20).hide();    

$(window).scroll(function() {
       if($(window).scrollTop() + $(window).height() == $(document).height()) {
            $("#CategoryContent li").show();
           $("#CategoryContent li").slice(40).hide();
       }
    }); 
```

我非常希望这种情况无限发生，直到所有内容都加载完毕。

添加具有不同切片编号的相同代码显然不起作用。那么我该怎么做呢？

将第一个切片的值存储在一个变量中，一旦执行该函数，将该变量增加 20？

我已经搜索了插件来为我解决这个问题，但它们都依赖于分页，目前这不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:20:31.747

它很昂贵，但您可以获得可见元素的数量，然后添加 20。在调用之前`$("#CategoryContent li").show()`，您可以这样做：

```
var visibleItems = $("#CategoryContent li").filter(function( i, el ) {
    return $(el).css("display") !== "none";
}); 
```

这将返回 $("#CategoryContent li") 集合中所有未将其 CSS`display`属性设置为`none`.

然后您可以将切片调用更新为：

```
$("#CategoryContent li").slice(visibleItems.length + 20).hide(); 
```

话虽如此，更好的方法是手动跟踪计数并在整个事物周围放置一个函数包装器。

```
(function ( ) {
    var visibleCount = 20;

    $(window).scroll(function() {
       if($(window).scrollTop() + $(window).height() == $(document).height()) {
           visibleCount += 20;
           $("#CategoryContent li").show();
           $("#CategoryContent li").slice(visibleCount).hide();
       }
    });
}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:16:47.533

我要做的第一件事是缓存你的选择器。有道理，因为看起来你一直在使用它。

```
var category_content_lis = $('#CategoryContent li'); 
```

接下来，我可能不会`.slice`为此烦恼。我很可能只是使用选择器之类的东西`:lt()`来以某种方式微调我的选择器。

这个想法是**隐藏所有内容**，然后以增量方式显示它们。

```
category_content_lis
    .hide()
    .filter(':lt(20)')
    .show()
    ; 
```

现在，如果您只是以 20 为增量显示它们，那么您可以执行以下操作来触发显示下一个 20：

```
category_content_lis
    .filter(':hidden:lt(20)')
    .show()
    ; 
```

...如果您愿意，可以方便地将其封装在一个函数中。无论您的清单有多长，这都会起作用。

请注意，我们并没有隐藏所有内容**然后**显示选择。类似的东西会导致闪烁，这只是刺激性的，可能会也可能不会导致癫痫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T02:06:44.257

我最终这样做了

```
var mincount = 20;
var maxcount = 40;

$(window).scroll(function() 
                    {
                    if($(window).scrollTop() + $(window).height() >= $(document).height() - 400) {
                            $("#CategoryContent li").slice(mincount,maxcount).fadeIn(800);

mincount = mincount+20;
maxcount = maxcount+20

}
}); 
```

# iphone - 在 tableViewCell 中按升序排列值

> ID：10408570
> 
> 赞同：0
> 
> 时间：2012-05-02T06:10:08.187
> 
> 标签：iphone, ios

在我的应用程序中，我使用带有 4 个按钮的 scrollView。当我们点击任何一个按钮时，表格将动态地逐行显示数据。

现在我的问题是将它们按升序排列。

示例代码是

这是用于向滚动视图添加按钮 这是一类

```
 browseScrollView.hidden = NO;
    browseScrollView.frame = CGRectMake(15, 57, 480, 44);
    [browseScrollView setContentSize:CGSizeMake(600, 40)];        
    firstButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [firstButton setFrame:CGRectMake(5,3,91,37)];
    [firstButton setImage:[UIImage imageNamed:@"genres.png"] forState:UIControlStateNormal];
    firstButton.tag = 1;
    [firstButton addTarget:self action:@selector(fourthPageSongSelction:) forControlEvents:UIControlEventTouchDown];
    [browseScrollView addSubview:firstButton];

    secondButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [secondButton setFrame:CGRectMake(110,3,91,37)];
    [secondButton setImage:[UIImage imageNamed:@"artists.png"] forState:UIControlStateNormal];
    secondButton.tag = 2;
    [secondButton addTarget:self action:@selector(fourthPageSongSelction:) forControlEvents:UIControlEventTouchDown];
    [browseScrollView addSubview:secondButton];

    thirdButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [thirdButton setFrame:CGRectMake(209,3,91,37)];
    thirdButton.tag = 3;
    [thirdButton setImage:[UIImage imageNamed:@"albums.png"] forState:UIControlStateNormal];
    [thirdButton addTarget:self action:@selector(fourthPageSongSelction:) forControlEvents:UIControlEventTouchDown];
    [browseScrollView addSubview:thirdButton];

    fourthButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [fourthButton setFrame:CGRectMake(317,3,91,37)];
    fourthButton.tag = 4;
    [fourthButton setImage:[UIImage imageNamed:@"songs.png"] forState:UIControlStateNormal];
    [fourthButton addTarget:self action:@selector(fourthPageSongSelction:) forControlEvents:UIControlEventTouchDown];
    [browseScrollView addSubview:fourthButton];

    tableView.hidden = NO;
    tableView.frame = CGRectMake(5, 100, 235, 200);
    tableView.showsVerticalScrollIndicator = NO; 
```

这是我用来在另一个类中向表行添加值的方法，该类是 TableViewCell 的子类

```
-(void) showFourthPageControlValues :(int) currRow :(int)val
{
int value = val;
TonifyAppDelegate *appDelegate = (TonifyAppDelegate *)[UIApplication sharedApplication].delegate;

if (value == 1) 
{
    genresLabel1.hidden = NO;
    genresLabel2.hidden = NO;

    genresButton.hidden = NO;

    artistLabel1.hidden = YES;
    artistLabel2.hidden = YES;
    artistButton.hidden = YES;

    albumLabel1.hidden = YES;
    albumLabel2.hidden = YES;
    albumButton.hidden = YES;

    songsLabel1.hidden = YES;
    songsLabel2.hidden = YES;
    songsButton.hidden = YES;

    [genresLabel1 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"Genre"]];
    [genresLabel2 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"SongName"]];
    [genresButton addTarget:self.delegateController action:@selector(songTypeSelAction:) forControlEvents:UIControlEventTouchUpInside];
    genresButton.tag = currRow;
}

if (value == 2) 
{
    genresLabel1.hidden = YES;
    genresLabel2.hidden = YES;
    genresButton.hidden = YES;

    artistLabel1.hidden = NO;
    artistLabel2.hidden = NO;
    artistButton.hidden = NO;

    albumLabel1.hidden = YES;
    albumLabel2.hidden = YES;
    albumButton.hidden = YES;

    songsLabel1.hidden = YES;
    songsLabel2.hidden = YES;
    songsButton.hidden = YES;

    [artistLabel1 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"ArtistName"]];
    [artistLabel2 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"SongName"]];

    [artistButton addTarget:self.delegateController action:@selector(songTypeSelAction:) forControlEvents:UIControlEventTouchUpInside];
    artistButton.tag = currRow;
}
if (value == 3) 
{
    genresLabel1.hidden = YES;
    genresLabel2.hidden = YES;
    genresButton.hidden = YES;

    artistLabel1.hidden = YES;
    artistLabel2.hidden = YES;
    artistButton.hidden = YES;

    albumLabel1.hidden = NO;
    albumLabel2.hidden = NO;
    albumButton.hidden = NO;

    songsLabel1.hidden = YES;
    songsLabel2.hidden = YES;
    songsButton.hidden = YES;

    [albumLabel1 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"AlbumName"]];
    [albumLabel2 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"SongName"]];

    [albumButton addTarget:self.delegateController action:@selector(songTypeSelAction:) forControlEvents:UIControlEventTouchUpInside];
    albumButton.tag = currRow;
}
if (value == 4) 
{
    genresLabel1.hidden = YES;
    genresLabel2.hidden = YES;
    genresButton.hidden = YES;

    artistLabel1.hidden = YES;
    artistLabel2.hidden = YES;
    artistButton.hidden = YES;

    albumLabel1.hidden = NO;
    albumLabel2.hidden = NO;
    albumButton.hidden = NO;

    songsLabel1.hidden = NO;
    songsLabel2.hidden = NO;
    songsButton.hidden = NO;

    [songsLabel1 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"SongName"]];
    [songsLabel2 setText:[[appDelegate.songsList objectAtIndex:currRow] valueForKey:@"AlbumName"]];
    [songsButton addTarget:self.delegateController action:@selector(songTypeSelAction:) forControlEvents:UIControlEventTouchUpInside];
    songsButton.tag = currRow;
} 
```

}

这是我用于选择或行的方法

```
-(void) songTypeSelAction :(id) sender
{
NSLog(@"songTypeSelAction");
UIButton *btn = (UIButton *) sender;
NSLog(@"songTypeSelAction bttn.tag: %d", btn.tag);
if ([self.delegateController respondsToSelector:@selector(songImageSelAction:)])
{

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:22:18.433

```
NSSortDescriptor *sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"SongName" ascending:TRUE];
NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"AlbumName" ascending:TRUE];
[appDelegate.songsList sortUsingDescriptors:[NSArray arrayWithObjects:sortDescriptor1,sortDescriptor2, nil]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:22:23.850

如果你想要更可取..比你可以这样做..首先获取新视图....添加四个按钮和 tableView。

比这个：编辑器->嵌入->滚动视图

比按钮的点击事件显示表格并且不要忘记在显示时重新加载表格视图数据。

如果有任何疑问问我。

# wpf - FormatConvertedBitmap 黑白效果不佳

> ID：10408574
> 
> 赞同：2
> 
> 时间：2012-05-02T06:10:22.660
> 
> 标签：wpf, bitmap

这似乎是转换位图像素格式的标准方法，但在转换为黑白格式时结果很差：

```
 // convert to black & white bitmap
    FormatConvertedBitmap monoBitmap = new FormatConvertedBitmap(bitmap, PixelFormats.BlackWhite, null, 0);

    // save black & white bitmap to file
    fileName = string.Format("{0}.bmp", data.SelectedProduct.Code);
    bitmapEncoder = new BmpBitmapEncoder();
    bitmapEncoder.Frames.Add(BitmapFrame.Create(monoBitmap));
    using (Stream stream = File.Create(fileName))
    {
        bitmapEncoder.Save(stream);
    } 
```

生成的图像文件非常粗糙且像素化。我需要将它发送到行式打印机，所以我需要锋利的边缘。

转换前的原件看起来不错（它的 32BPP 颜色），如果我使用 IrfanView 之类的工具将原件手动转换为黑白，它的效果也比 .NET 所做的要好得多。

在 .NET 而不是 FormatConvertedBitmap 中是否有另一种选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:00:02.447

它正在使用`PixelFormats.BlackWhite`，它在生成的图像中仅使用黑色和白色，如果有较暗的像素包围着明亮的像素，这可能会使它看起来有颗粒感。如果您将图像转换为使用灰色阴影，我想效果会更好。为了做到这一点，您使用这一行代码而不是您发布的代码中的那一行：

```
FormatConvertedBitmap monoBitmap = new FormatConvertedBitmap(bitmap, PixelFormats.Gray32Float, null, 0); 
```

这应该将图像转换为仅使用灰色阴影，因此不需要颜色来打印它。

让我知道这是否是您想要达到的效果。

`PixelFormats`您可以在此处找到有关课程的更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.media.pixelformats.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.pixelformats.aspx)。

# c# - 阅读文件的评论

> ID：10408580
> 
> 赞同：5
> 
> 时间：2012-05-02T06:10:45.537
> 
> 标签：c#, extended-properties

某些文件在其属性中有摘要选项卡，此选项卡包括标题、作者、评论等信息。C# 中有什么方法可以读取文件的注释。我必须只阅读 jpg 等图像文件中的评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T07:26:17.817

评论和其他答案是搜索的好地方。这里有一些完整的代码可以帮助你。确保您`shell32.dll`首先引用和命名空间`Shell32`。我已经在 LINQPad 中完成了这个，所以它有点不同。

选择一个测试文件和文件夹：

```
var folder = "...";
var file = "..."; 
```

获取 Shell 对象：

```
// For our LINQPad Users
// var shellType = Type.GetTypeFromProgID("Shell.Application");
// dynamic app = Activator.CreateInstance(shellType);   

Shell32.Shell app = new Shell32.Shell(); 
```

获取文件夹和文件对象：

```
var folderObj = app.NameSpace(folder);
var filesObj = folderObj.Items(); 
```

找到可能的标题：

```
var headers = new Dictionary<string, int>();
for( int i = 0; i < short.MaxValue; i++ )
{
    string header = folderObj.GetDetailsOf(null, i);
    if (String.IsNullOrEmpty(header))
        break;
    if (!headers.ContainsKey(header)) headers.Add(header, i);
} 
```

如果您愿意，您可以将它们打印出来 - 这是该目录中所有可能的标题。让我们以标题“评论”为例：

```
var testFile = filesObj.Item(file);
Console.WriteLine("{0} -> {1}", testFile.Name, folderObj.GetDetailsOf(testFile, headers["Comments"])); 
```

根据需要修改！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:20:32.930

shell (shell32.dll) 将帮助您解决这个问题。[我最近在 MSDN ( http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/94430444-283b-4a0e-9ca5-7375c8420622](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/94430444-283b-4a0e-9ca5-7375c8420622) )上发现了这篇很棒的文章。

还有一个关于读取 ID3 标签[的代码项目。](http://www.codeproject.com/Articles/5036/ID3-Tag-Reader-Using-Shell-Functions)

# iphone - NSArray 在 3 次视图加载后清除

> ID：10408584
> 
> 赞同：-1
> 
> 时间：2012-05-02T06:11:28.940
> 
> 标签：iphone, xcode, nsmutablearray, nsarray

我有一个包含几个项目的 NSArray。NSArray 从另一个类加载到 uitableview 中。当我退出详细视图并重新输入（第三次）时，NSArray 为空，tableview 也为空。怎么了？（我正在使用弧，所以我认为它不是泄漏）

```
- (void)viewDidLoad {

    myMatch = [[Match alloc] initWithId:1 OpponentId:13];
}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *askCellIdent = @"askCell";
    static NSString *answerCellIdent = @"answerCell";

    if (indexPath.row == 0)
    {

        AskCell *cell = [tv dequeueReusableCellWithIdentifier:askCellIdent];
        if (cell==nil) {
            cell = [[AskCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:askCellIdent];
        }

        cell.nameLabel.text = @"Albert asked:";
        cell.questionLabel.text = [NSString stringWithFormat:@"%@", [[myMatch.chat objectAtIndex:indexPath.row] objectAtIndex:1]];
        return cell;
    }
    if (indexPath.row == 1)
    {

        AnswerCell *cell = [tv dequeueReusableCellWithIdentifier:answerCellIdent];
        if (cell==nil) {
            cell = [[AnswerCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:answerCellIdent];
        }

        cell.nameLabel.text = @"Hugh answered:";
        cell.answerLabel.text = [NSString stringWithFormat:@"%@", [[myMatch.chat objectAtIndex:indexPath.row] objectAtIndex:1]];
        return cell;
    }

} 
```

这是我的比赛类的初始化代码：

```
- (id) initWithId:(NSInteger)yourId OpponentId:(NSInteger)opId {
    self = [super init];
    if (self != nil) {
        //set your id and opponents id to the match.
        [self setUserId:yourId];
        [self setUserId:opId];

        JSON = @"[{\"opponentId\":\"4\",\"chat\":[[\"1\",\"Does he have a beard?\"],[\"1\",\"No.\"]]}]";

        //initiate the chat array.
        chat = [[NSMutableArray alloc] init ];
        [self loadMatch];

    }
    return self;
} 
```

这是聊天属性/合成

```
NSMutableArray *chat;

@property (nonatomic, retain) NSMutableArray *chat;

@synthesize chat; 
```

不知道发生了什么，因为数组的 slog 也是空的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:22:04.097

使用 self.chat = [[[NSMutableArray alloc] init ]autorelease]; 初始化你的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:43:23.617

取而代之的是 ViewDidLoad，在 initWithCoder 中分配对象。

```
- (void)viewDidLoad
{
   [super viewDidLoad];
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if( self )
    {
       myMatch = [[Match alloc] initWithId:1 OpponentId:13];
    }
return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:00:50.650

在 appDelegate 中声明一个 int 变量 repeatCount

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ypurAppDelegate *appDelegate = (yourAppDelegate *)[[UIApplication sharedApplication]   elegate];

          appDelegate.repeatCount++;

       if(appDelegate.repeatCount %3==0)
       {
           [array removeAllObjects];
            [tableview reloaddata];
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:39:41.613

我认为这是填充的问题，`NSMutableArray`因为只会`viewDidLoad`调用一次。`viewWillAppear`您应该在Method 中将值插入数组或在`initWithCoder`.

# c# - 获取堆栈面板内焦点所在的项目索引

> ID：10408589
> 
> 赞同：0
> 
> 时间：2012-05-02T06:12:04.010
> 
> 标签：c#, windows-phone-7, silverlight-4.0, windows-phone-7.1

我在滚动查看器内的堆栈面板中水平添加了 10 张图像。当用户滑动页面时，滚动查看器停止在某个位置，如果滚动停止在 &th 图像我想获取图像的名称。如何得到它？

```
 for (int i = 0; i <= 59; i++)
        {

  Uri uri = new  Uri("http://d1mu9ule1cy7bp.cloudfront.net/2012/media/catalogues/47/pages/p_" + i + "/thump.jpg");
            ImageSource img1 = new BitmapImage(uri);
            Image rect = new Image { RenderTransform = new TranslateTransform() };

            rect.Source = img1;

            stack.Children.Add(rect);

        } 
```

XAML：

```
<ScrollViewer HorizontalContentAlignment="Left" HorizontalAlignment="Left" Name="scroll" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Visible">

        <StackPanel Name="stack" Width="Auto" Orientation="Horizontal" HorizontalAlignment="Left"  >

    </StackPanel>
    </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:40:59.927

假设您的图像大小相同，您可以通过查看`HorizontalOffset`ScrollViewer 来计算。

# jquery - 使用偏移属性制作动画

> ID：10408590
> 
> 赞同：1
> 
> 时间：2012-05-02T06:12:13.350
> 
> 标签：jquery, jquery-animate

我有一些具有相对位置的 div 的页面，我想将它们动画到屏幕的特定位置。因此我不能使用

```
$("div").animate({top:269,left:529}); 
```

我需要为他们的偏移设置动画

```
$("div").animate({$(this).offset().top:269,$(this).offset().left:529}); 
```

但它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:49:50.977

相对定位的元素是流程的一部分。动画化你的 div 的位置会改变它后面的所有元素。

不过，如果你想用相对 div 来做，那么只需计算偏移量：

```
$(this).animate({
    top: 269-$(this).offset().top,
    left: 529-$(this).offset().left
}); 
```

# php - 在多个数据库中插入/更新行

> ID：10408593
> 
> 赞同：0
> 
> 时间：2012-05-02T06:12:32.820
> 
> 标签：php, database, sql-server-2008, synchronization

我有一个涉及软件即服务的项目。该应用程序有一个 SystemDB 和多个客户数据库。客户数据库完全相同（所有表都相同）。系统数据库包含一个表，其中包含来自客户数据库（如 dbname、dbPassword、dbUsername 等）的所有详细信息。

如何对所有数据库进行更新并确保更新正确。例如。所有数据库都有一个翻译表。我想在所有表格中添加一个单词。或者我想更新一个拼写错误的单词。我有超过 50 分贝要维护。所以手工工作是不可能的。

关于可以做到这一点的软件或框架的任何建议。

我正在使用 PHP5.4.0，但还没有特定的框架。作为 DB，我们使用 MS Sql 2008R2

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:37:00.867

我将使用 SQL Server 隐式支持的复制来解决此问题。复制允许您在系统数据库（发布者）中发布某些表，并订阅来自一个或多个客户数据库（订阅者）的数据更改。由于您只是向一个方向推送数据，并且正在镜像某些表和系统数据库，因此这对您很有效。

您可以从 SSMS 设置复制。在对象资源管理器中展开服务器下的复制分支，右键单击“本地发布”并选择创建发布。该向导将指导您完成发布过程。对订阅执行相同操作，并为您的每个客户数据库创建订阅。

由于您有很多客户数据库，因此值得您使用 t-sql 创建订阅，然后在所有目标数据库中复制该代码。查看[http://msdn.microsoft.com/en-us/library/ms147346.aspx](http://msdn.microsoft.com/en-us/library/ms147346.aspx)以获取有关如何执行此操作的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:19:09.620

我们有类似的情况要从多个数据库中读取，我们的 pl 是 C#.net。为此，我们编写了一个 C#.net 代码，该代码逐个运行并连接到每个数据库，并将数据管理到单个服务器中。我建议您仅采用这种方式，并且任何脚本（如更新或插入脚本）都应用作 .Net 中的执行查询。在此我们将避免手动连接和更新工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:19:58.810

使用数据库触发器来更新其他数据库中的表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:20:27.783

恐怕没有魔杖可以做到这一点。但是，如果您确实想做一些魔术，请尝试使用 ORM。它让生活变得如此轻松。

我最喜欢的是

教义 ORM - [http://www.doctrine-project.org/](http://www.doctrine-project.org/)

当然还有很多其他的太喜欢了。[推进](http://www.propelorm.org/)，[红豆PHP](http://redbeanphp.com/)。

# javascript - Javascript HTMLDOM appendChild 导致 DOM 异常 8

> ID：10408595
> 
> 赞同：1
> 
> 时间：2012-05-02T06:13:05.527
> 
> 标签：javascript, exception, appendchild, dom

我写了以下代码

```
function byId(id) {
  return document.getElementById(id);
}
function addElm(root,elm) {
  document.createElement(elm);
  if(!root) {
      root = document;
  }
  root.appendChild(elm);
  return elm;
}
document.addEventListener('DOMContentLoaded',function() {
  var elm = byId('myExistingElmId');
  addElm(elm,'span');
},false); 
```

id 为“myExistingElmId”的元素在我的文档中。线

```
root.appendChild(elm); 
```

在控制台中给我以下错误

```
Uncaught error: NOT_FOUND_ERR: DOM Exception 8 
```

为什么会这样。。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:17:00.867

`document`不是 DOM 元素，`document.body`是。正如@Alnitak 所说，您丢失了`document.createElement`. 这段代码应该可以工作：

```
function addElm(root,elm) {
    var elm = document.createElement(elm);
    if(!root) {
        root = document.body;
    }
    root.appendChild(elm);
    return elm;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:17:09.423

您的`addElm`功能是错误的 - 您正在丢弃`document.createElement`.

它应该是：

```
function addElm(root, type) {
  var elm = document.createElement(type);
  if(!root) {
      root = document.body;
  }
  root.appendChild(elm);
  return elm;
} 
```

见[http://jsfiddle.net/alnitak/wAuvJ/](http://jsfiddle.net/alnitak/wAuvJ/)

[@Ethan 应该是正确的`document.body`，但这是您看到的实际错误的附带问题，因为您没有执行该代码路径]

# php - 无法在分配循环之外检索 PHP 数组

> ID：10408599
> 
> 赞同：0
> 
> 时间：2012-05-02T06:13:52.163
> 
> 标签：php

我正在尝试创建一个二维数组，从（大）met 文件中读取特定值。数组是空的，我不知道为什么。我有以下数组：

`$varmet = array('tasmax', 'tasmin', 'pr', 'clt');`

我有两个循环：

第一个是

```
for ($j = 0; $j <= 3; $j++)  {
... 
```

我阅读了相应的文件和变量等。它工作正常。

然后我有另一个循环

```
for ($i = 1; $i <= 360; $i++) {
....
$valor = $valor * $correctp; 
```

它完美地工作，在 $valor 中检索所需的值

当我想根据met变量将值存储在不同的数组中时，就会出现问题：

```
switch ($j) {
case 0: 
   $tmax[$i] = $valor;
break;
case 1: 
   $tmin[$i] = $valor;
break;
case 2: 
   $prec[] = $valor;
break;
case 3: 
   $clt[$i] = $valor;
break; } // Fin del switch

    }  // Fin del for para un fichero met
} // Fin del for para todas las varmet 
```

,等没有价值，尽管 $valor 确实有`$tmax`。`$tmin`此外，如果我在循环内分配数组（即`$valorest[$j][$i] = $valor`），它仍然有值，但不在它之外。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:25:28.610

像这样试试

```
$tmax = array(); //declare this outside the loop i.e before the loop starts 
```

在 switch case 语句中，替换下面的行

```
$tmax[$i] = $valor; 
```

和

```
array_push($tmax,$valor); 
```

# android - 如何在不中断本机进程的情况下创建拦截 SMS 的服务

> ID：10408610
> 
> 赞同：1
> 
> 时间：2012-05-02T06:15:14.040
> 
> 标签：android, sms

我想创建一个服务来获取短信并将其写入文件，而不会中断处理短信的本机过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:18:37.117

像这样的东西？

[http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/](http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:31:33.590

Can you be more specific? Do you want to create your own service? Do you want to receive SMS and write that SMS to a file?

### 1st approach

In you application register Broadcast in Manifest. Never unregister that broadcast.

Once you receive your broadcast in onreceive() write to a file.

### 2nd approach

Create a service and in that service register a broadcast Once you receive ur broadcast in onreceive() write to a file.

Note: don't unregister your broadcast in onDestroy() of your Service. Keep it alive.

You can check this link:

[http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)

# iphone - 在 UITableView 中，为已离开屏幕的单元格取消 GCD 操作的最佳方法？

> ID：10408611
> 
> 赞同：6
> 
> 时间：2012-05-02T06:15:15.673
> 
> 标签：iphone, objective-c, ios, uitableview, grand-central-dispatch

我有一个`UITableView`使用 GCD 将 URL 中的图像异步加载到单元格中的方法。问题是如果用户轻弹过去 150 行，则 150 个操作排队并执行。我想要的是出列/取消那些过去并离开屏幕的。

我该怎么做呢？

我此时的代码（非常标准）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

    // after getting the cell...

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        if (runQ) {
            NSString *galleryTinyImageUrl = [[self.smapi getImageUrls:imageId imageKey:imageKey] objectForKey:@"TinyURL"];
            NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:galleryTinyImageUrl]];
            dispatch_async(dispatch_get_main_queue(), ^{
                if (imageData != nil) {
                    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
                    cell.imageView.image = [UIImage imageWithData:imageData];
                }
            });
        }
    }); 
```

runQ 是`BOOL`我设置为`NO`on的 ivar `viewWillDisappear`，（我认为）当它`UITableView`从导航控制器中弹出时，它具有快速清除队列的效果。

那么，回到我最初的问题：如何取消已离开屏幕的单元格的图像获取操作？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T17:17:25.350

首先，不要在滚动时排队操作。`viewDidLoad`相反，仅在用户停止滚动时加载可见行的图像：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    for (NSIndexPath *indexPath in [self.tableView indexPathsForVisibleRows]) {
        [self loadImageForCellAtPath:indexPath];
    }
} 
```

如果您仍然希望能够取消对不可见单元格的加载，您可以使用`NSBlockOperation`而不是 GCD：

```
self.operationQueue = [[[NSOperationQueue alloc] init] autorelease];
[self.operationQueue setMaxConcurrentOperationCount:NSOperationQueueDefaultMaxConcurrentOperationCount];

// ...

-(void)loadImageForCellAtPath:(NSIndexPath *)indexPath {
    __block NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
        if (![operation isCancelled]) {
            NSString *galleryTinyImageUrl = [[self.smapi getImageUrls:imageId imageKey:imageKey] objectForKey:@"TinyURL"];
            NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:galleryTinyImageUrl]];
            dispatch_async(dispatch_get_main_queue(), ^{
                if (imageData != nil) {
                    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
                    cell.imageView.image = [UIImage imageWithData:imageData];
                }
            });
        }
    }];

    NSValue *nonRetainedOperation = [NSValue valueWithNonretainedObjectValue:operation];
    [self.operations addObject:nonRetainedOperation forKey:indexPath];
    [self.operationQueue addOperation:operation];
} 
```

这`operations`是一个`NSMutableDictionary`. 当您想取消操作时，您可以通过单元格的 检索它`indexPath`，取消它，然后将其从字典中删除：

```
NSValue *operationHolder = [self.operations objectForKey:indexPath];
NSOperation *operation = [operationHolder nonretainedObjectValue];
[operation cancel]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:47:00.350

GCD 操作在发送后无法取消。但是，您可以检查调度块以查看代码是否需要继续。在 -tableView:cellForRowAtIndexPath: 你可以做这样的事情

```
UIImage *image = [imageCache objectForKey:imageName];
if(image) {
    cell.imageView.image = image;
else {
    dispatch_async(globalQueue, ^{
        //get your image here...
        UIImage *image = ...
        dispatch_async(dispatch_get_main_queue(), ^{
            if([cell.indexPath isEqual:indexPath){
                cell.indexPath = nil;
                cell.imageView.image = image;
                [cell setNeedsLayout];
            }
        });
        [imageCache setObject:image forKey:imageName];
    });
} 
```

基本上使用图像缓存（NSMutableDictionary）并尝试抓取图像。如果你没有它，那么调度一个块并获取它。然后分派回主线程，检查索引路径，然后设置图像，最后缓存图像。此示例使用自定义 tableview 单元格，该单元格将索引路径作为属性存储在其中。

因此，为了使这项工作顺利进行，需要做一些额外的工作，但这是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:19:49.550

如果您使用出队的单元格，最好的方法是取消 GCD

-[UITableViewCell prepareForReuse]

# jquery - jQuery多选

> ID：10408612
> 
> 赞同：5
> 
> 时间：2012-05-02T06:16:03.807
> 
> 标签：jquery, jquery-plugins, multi-select

我正在使用 jquery 多选插件[http://wilkerlucio.github.com/jquery-multiselect/](http://wilkerlucio.github.com/jquery-multiselect/)

提供小提琴用鼠标正确选择项目，但如果我/某人下载代码并运行提供的示例，那么它可以使用键盘键正常工作，但鼠标只能选择最后一个。

包中是否缺少任何/某些东西但在小提琴中可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:21:12.860

我建议你最好使用[Chosen](http://harvesthq.github.com/chosen/)。它易于使用且用户友好的解决方案

# html - 如何链接表格单元格？

> ID：10408618
> 
> 赞同：-3
> 
> 时间：2012-05-02T06:16:40.813
> 
> 标签：html, css, background, href

我需要在母版页文件上设置一个链接。所以我为表格列（`<td>`）设置了一个背景图像，并分别将一些字体作为“home”。现在我设置“onclick”事件并将其重定向到页面`<td>`。但它在浏览器上的图像底部提供了一些空间。所以链接（手形符号）从下面的空格开始到按钮图像。我检查了所有边距设置、填充等。但它不起作用。所以现在我决定为背景图片设置一个href。是否有可能或任何其他方式来纠正这个问题？我在互联网上找到了一些帮助。但我不知道如何使用此代码。我在这篇文章中附上了帮助代码。

**我的代码：**

```
<tr style="height:44px;">
            <td id="Homebutton" runat="server" style="height: 44px; width: 101px; cursor: pointer;"
                class="menubuttonhome" align="center" onclick="navigate(id)" onmouseover="this.className='menubuttonhomefocus'"
                onmouseout="this.className= 'menubuttonhome'">
                Home
            </td>
</tr> 
```

**css 文件**

```
.menubuttonhomefocus
        {
            background-image: url('Images/homebuttonfocus.png');
            background-repeat: no-repeat;
            vertical-align: top;
            color: White;
            padding-top: 11px;
            font-family: Arial;
            font-size: 10pt;
            font-weight: 500;
        } 
```

**来自互联网的帮助代码**

```
a.particular-link {display: block; /* or inline-block; I think IE would respect it since a link is an inline-element */
                   background: #fff url(path/to/image.gif) top left no-repeat; 
                   text-align: center;
                   line-height: 50px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:51:19.163

正如 Jukka 已经提到的，无法设置指向通过 CSS 应用的背景图像的链接。

您应该真正使用`<a>`标签。诀窍是将链接的高度强制为图像的高度。

例子：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Image link</title>
    <style type="text/css">
      td {
        padding: 0;
      }
      a {
        display: block;
        height: 89px;
      }
    </style>
  </head>
  <body>
    <table>
      <tr>
        <td style="background-color: blue;"><a href="#asdf"><img src="http://getfirebug.com/img/firebug-logo.png" style="background-color: yellow;"/></a></td>
      </tr>
    </table>
  </body>
</html> 
```

尽管我还想指出，您**永远不**应该使用表格进行布局。不使用表格布局有[几个很好的理由。](http://phrogz.net/css/WhyTablesAreBadForLayout.html)相反，您可以使用例如`<div>`s、`<header>`s 和`<section>`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:28:04.187

**HTML**

```
<tr>
  <td id="Homebutton" runat="server" class="menubutton">
    <a href="home.html">Home</a>
  </td>
</tr> 
```

**CSS**

```
td {
  padding: 0;
}

.menubutton > a {
  display: block;
  width: 101px;
  height: 44px;
  background-repeat: no-repeat;
  vertical-align: top;
  padding-top: 11px;
  color: white;
  text-align: center;
  font-family: Arial;
  font-size: 10pt;
  font-weight: 500;
  cursor: pointer;
}

#Homebutton {
  background-image: url(Images/homebutton.png);
}

#Homebutton:hover {
  background-image: url(Images/homebuttonfocus.png);
} 
```

注意悬停效果你只需要使用`:hover`伪类。

顺便提一句。图像底部的空间是为文本保留的。即，如果您写了一些文本，它将出现在图像下方。

# three.js - 带有three.js景深散景着色器的倾斜移位

> ID：10408625
> 
> 赞同：2
> 
> 时间：2012-05-02T06:17:16.787
> 
> 标签：three.js, depth, post-processing

Three.js 附带了[一个很好的景深示例](https://github.com/mrdoob/three.js/blob/master/examples/webgl_postprocessing_dof.html)，我在一个项目中一直在使用它，并且效果很好。

我想做的是修改它，使散景在焦点的前后工作，倾斜移位风格。

我对这些东西很陌生，但看起来我需要做的是让它从相机前面的相机点计算深度纹理（该示例从当前相机位置计算它）但无论如何我试着我不能让它工作。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:23:35.560

好的 nvm，“焦点”制服是我想要的，如果你让它 < 1，你会在相机前面得到焦点 - 我之前没有意识到，因为所需的步骤很短，在我的场景中放置场景中心的焦点需要 0.98 的焦点值，示例 GUI 以 0.025 的步长移动焦距

# web-services - 将 Web 服务 (SOAP over HTTP) 称为无状态意味着什么？

> ID：10408626
> 
> 赞同：5
> 
> 时间：2012-05-02T06:17:26.593
> 
> 标签：web-services, http, soap, state, stateless

我有一个 HTTP 是无状态的概念，因此 HTTP 上的 SOAP（用于 Web 服务）也是无状态的。我曾经认为*状态*意味着“对象的状态”。例如，假设我有一个名为的类和名为and的`Employee`方法。如果 web 服务的调用者调用工资为 1000，那么如果被调用，调用者不一定会得到值 10000。当我测试得到 1000（即分配的值）时，我想知道状态如何对象的保留。`setSalary``getSalary``setSalary``getSalary``getsalary``setSalary``Employee`

Stack Overflow 问题[Web 服务是无状态的？](https://stackoverflow.com/questions/2312969/webservices-are-stateless)提到了用于维护状态的cookie之类的技巧，但是由于我没有做出任何明确的努力来维护状态，所以`Employee`对象的状态是如何维护的？

如果我完全误解了有状态/无状态的概念，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T06:48:23.880

**无状态**意味着服务的状态不会在后续请求和响应之间持续存在。而在**有状态**的情况下，状态会在后续请求之间保持不变，即每个请求都需要知道并保留在先前请求中所做的更改。

**银行应用程序**是有状态应用程序的一个示例，用户首先登录然后进行交易并注销。如果用户在注销后尝试进行交易，他将无法这样做。

是的，**http 协议本质上是一个无状态协议**，但为了使其有状态，我们使用了**HTTP cookie**。因此，默认情况下是 SOAP。但它也可以是有状态的，这取决于您使用的框架。

您提供的案例，您是否尝试在后续请求或相同请求中设置和获取值？只有这样，我才能对此发表评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-10T10:20:33.253

在 HTTP 等无状态协议中，每个请求都是独立的。在每个请求中，客户端调用服务器，服务器响应。每个请求都是独立的。客户端需要在每次请求时重新建立与服务器的关系。这并不意味着服务器会忘记以前的请求。如果客户端请求员工的薪水，服务器将响应它拥有的该员工的薪水信息。就是这个`getSalary` *意思*。如果客户端告诉服务器员工的薪水是多少，服务器将保存该员工的薪水值。就是这个`setSalary`意思。

如果您在`setSalary`之前执行`getSalary`，您将取回您设置的值。你还期望发生什么？究竟是什么`setSalary`方法不会导致服务器实际*保存*`getSalary`值集，并在后续请求中返回该值？

# playframework-2.0 - 如何与 Play 2.0 共享类库？

> ID：10408629
> 
> 赞同：1
> 
> 时间：2012-05-02T06:17:29.363
> 
> 标签：playframework-2.0

我有一些在多个项目中通用的代码，所以很自然，我希望我的 Play Web 应用程序和我的所有其他项目都通过源代码引用这些代码。

我似乎无法弄清楚这是如何在 Play 2.0 中完成的。我已将此类库制作成一个 Maven 项目，将其安装在本地，并让 Play 应用程序将其作为依赖项引用，但在找不到其中一个共享包的情况下出现~~运行时编译错误。~~如果我将类库 .jar 复制到我的 Play /lib 文件夹中，一切都会按预期进行，但在开发的这些早期阶段，我需要将其自动化。

在 Play 2.0 中将本地类库作为依赖项的最佳方式是什么？

编辑：我的本地maven仓库是在Build.scala中定义的，如下

```
 val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(

        resolvers += "Local Maven Repository" at "file:///"+Path.userHome.absolutePath+"/.m2/repository"

    ) 
```

如果我运行`play dependencies`，Play 确实找到了我的本地 Maven 包，但我仍然收到编译错误（未找到来自共享库的包）。即使这确实有效，但仍然不理想，因为`maven install`每次更改共享库时我都必须在共享库上运行。不过，这比将我的 .jar 复制到所有依赖项目要好。

# c++ - 添加两个号码。没有任何操作员

> ID：10408632
> 
> 赞同：-2
> 
> 时间：2012-05-02T06:17:53.243
> 
> 标签：c++, c

是否可以在不使用任何算术或逻辑运算符的情况下将两个数字相加？

如果是这样，我该怎么做？

**解决方案：**

```
main(){ 
  int x=10,y=21; 
  char *p=x; 
  printf("%d" , &p[y]); 
} 
```

至少不要对这个问题投反对票，因为你没有得到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:21:03.793

```
int add(int x, int y) {
    std::vector<int> v(x);
    std::vector<int> u(y);
    for(auto& n : u) {
        v.push_back(n);
    }
    return v.size();
} 
```

# javascript - 在javascript中呈现哈希的模板是什么

> ID：10408643
> 
> 赞同：1
> 
> 时间：2012-05-02T06:18:31.647
> 
> 标签：javascript, dictionary, hashmap, mustache

使用 JavaScript 的 Mustache 模板实现模板应该如何渲染 Hash 对象。越来越多的示例处理众所周知的键和值，但是如何创建模板（知道哈希是形式`<string,string>`）

```
var hash = {
    "Key1":"Value1",
    "Key2":"Value2",
    "Key3":"Value3",
    "Key4":"Value4"
}; 
```

`Mustache.render(hash,"{{WHAT COMES HERE}}");`

我正在尝试输出这个

`<ul> //for each object in hash <li><a href="{{key}}">value</a></li> </ul>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:36:12.780

在小胡子中，它：

```
Mustache.render(html, data); 
```

对于重复值，您可以使用部分

```
var html = '<ul>{{#list}}<li><a href="{{key}}">{{value}}</a></li>{{/list}}</ul>'; 
```

和数据：

```
var data = {
    list : [ //list is an array of items
        {key:'foo1',value:'bar1'},
        {key:'foo2',value:'bar2'},
        {key:'foo3',value:'bar3'},
        ...
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:35:51.643

从我可以从他们的文档[http://mustache.github.com/mustache.5.html](http://mustache.github.com/mustache.5.html)中收集到的内容，它应该类似于但参数是相反的。

“{{Key1}}、{{Key2}}、{{Key3}}....”

# ruby-on-rails - Rails 3，一个请求中的缓存对象不会持续到下一个请求

> ID：10408645
> 
> 赞同：0
> 
> 时间：2012-05-02T06:18:38.633
> 
> 标签：ruby-on-rails, caching, memcached, dalli

我正在写一个对象来缓存使用

```
class Foo
  attr_accessor  :bar
end

foo = Foo.new
foo.bar = "123"

Rails.write "key", foo 
```

当我打电话

```
Rails.read "key" 
```

在同一个请求中 - 检索对象。但是，当我在其他请求/其他 rails 进程中调用它时，我得到了 nil。

存储简单对象（数字、字符串、数字数组等）

Rails.cache 数据：

```
pry(main)> Rails.cache
=> #<ActiveSupport::Cache::DalliStore:0x007fa42906d5b8
 @data=
  #<Dalli::Client:0x007fa42906d478
   @options={:expires_in=>0},
   @ring=
    #<Dalli::Ring:0x007fa423bc0ad8
     @continuum=nil,
     @failover=true,
     @servers=
      [#<Dalli::Server:0x007fa423bc0c90
        @down_at=nil,
        @error=nil,
        @fail_count=0,
        @hostname="localhost",
        @last_down_at=nil,
        @lock=
         #<Monitor:0x007fa423bc0970
          @mon_count=0,
          @mon_mutex=#<Mutex:0x007fa423bc0858>,
          @mon_owner=nil>,
        @msg=nil,
        @options=
         {:down_retry_delay=>1,
          :socket_timeout=>0.5,
          :socket_max_failures=>2,
          :socket_failure_delay=>0.01,
          :value_max_bytes=>1048576,
          :username=>nil,
          :password=>nil,
          :async=>false,
          :expires_in=>0},
        @port=11211,
        @sock=#<Dalli::Server::KSocket:fd 11>,
        @version="1.4.13",
        @weight=1>]>,
   @servers=["localhost:11211"]>, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:37:15.053

谜底的解决方案——在开发环境中，cache_classes 默认为 false。这一事实阻止了 Rails 缓存编组转储的对象，因为它不知道类/模块。

可能的绕过是为了避免开发环境中的低级缓存。

# go - 如何导入和使用不同的同名包

> ID：10408646
> 
> 赞同：162
> 
> 时间：2012-05-02T06:18:42.113
> 
> 标签：go, package

例如，我想在一个源文件中同时使用 text/template 和 html/template。但是下面的代码会抛出错误。

```
import (
    "fmt"
    "net/http"
    "text/template" // template redeclared as imported package name
    "html/template" // template redeclared as imported package name
)

func handler_html(w http.ResponseWriter, r *http.Request) {
    t_html, err := html.template.New("foo").Parse(`{{define "T"}}Hello, {{.}}!{{end}}`)
    t_text, err := text.template.New("foo").Parse(`{{define "T"}}Hello, {{.}}!{{end}}`)

} 
```

* * *

## 回答 #1

> 赞同：299
> 
> 时间：2012-05-02T06:24:50.067

```
import (
    "text/template"
    htemplate "html/template" // this is now imported as htemplate
) 
```

[在规范中](http://golang.org/ref/spec#Import_declarations)阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-07-03T19:01:41.303

*穆斯塔法的回答是正确的，但是需要一些解释。让我试着回答一下。*

**您的示例代码不起作用，因为您尝试导入两个具有相同名称的包，即：“模板”。**

```
import "html/template"  // imports the package as `template`
import "text/template"  // imports the package as `template` (again) 
```

**导入是声明语句：**

*   您不能在同一范围内声明相同的名称（*术语：标识符*）。

*   在 Go 中，`import`是一个声明，它的作用域是试图导入这些包的文件。

*   它不起作用的原因与您不能在同一个块中声明具有相同名称的变量相同。

**以下代码有效：**

```
package main

import (
    t "text/template"
    h "html/template"
)

func main() {
    t.New("foo").Parse(`{{define "T"}}Hello, {{.}}!{{end}}`)
    h.New("foo").Parse(`{{define "T"}}Hello, {{.}}!{{end}}`)
} 
```

上面的代码为导入的同名包提供了两个不同的名称。因此，您现在可以使用两种不同的标识符：`t`用于`text/template`包和`h`用于`html/template`包。

[您可以在操场上查看](https://play.golang.org/p/jvwZf7tvrBI)。

# c# - 用控件替换字符串中的 xml 标签

> ID：10408647
> 
> 赞同：2
> 
> 时间：2012-05-02T06:18:45.110
> 
> 标签：c#, asp.net, text, replace

我有一个字符串，看起来像这样：

```
"Sandra <as type="1">walked</as> in the park, and met a <as type="3">random</a> stranger". 
```

基于这些 xml 标签，我想用其他东西（控件列表）替换标签。

例如，当我看到 时`<as type="1">walked</as>`，我想返回一个文字和一个文本框以替换该句子。

我想最简单的方法是将整个内容添加到占位符中，但我不知道如何做替换部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:01:10.013

您当前没有有效的 XML，因此作为第一步，我建议您使用一些基本标签将其包围，例如：

```
var start = "Sandra <as type=\"1\">walked</as> in the park, and met a <as type=\"3\">random</as> stranger";
var startAsXml = "<root>" + start + "</root>"; 
```

现在我们可以解析它：

```
var doc = XElement.Parse(startAsXml); 
```

现在我们在这个 XML 中有两种类型的节点——文本和元素。您可以轻松地循环通过任意数量的方式并提取它们，更改它们，做你喜欢的事情。这是一个例子：

```
foreach (var node in doc.Nodes()) 
{
    if (node.NodeType == XmlNodeType.Text) Console.WriteLine("Text: {0}", node.ToString().Trim());
    else if (node.NodeType == XmlNodeType.Element) 
    {
        var element = (XElement)node;
        Console.WriteLine("Element: Name={0} Type={1} Value={2}",
                          element.Name, element.Attribute("type").Value, element.Value);
    }
} 
```

这将打印：

```
Text: Sandra 
Element: Name=as Type=1 Value=walked
Text:  in the park, and met a 
Element: Name=as Type=3 Value=random
Text:  stranger 
```

# ios - NSMutableArray addObject 似乎不起作用

> ID：10408656
> 
> 赞同：2
> 
> 时间：2012-05-02T06:19:51.393
> 
> 标签：ios, arrays

我对 iOS 开发真的很陌生，我正在尝试创建一个简单的表格视图，所以我添加了一个表格视图控制器，向其中添加了我的自定义类，现在我正在尝试添加项目。

所以我创建了一个新数组：

```
@property (nonatomic, strong) NSMutableArray *activity; 
```

我是 viewDidLoad，我尝试向数组中添加一些项目：

```
for(int i = 0; i < 20; i++) 
{
    NSLog(@"Current item: %u", i);
    Item *item = [[Item alloc] init];
    item.time = @"14:30";
    item.text = @"A simple test";
    item.startedAgo = @"yesterday";
    item.project = @"testProject";
    [self.activity addObject:item];
}

NSLog(@"Activity count: %u", [self.activity count]); 
```

日志似乎很好，当我尝试输出数组的长度时，它保持为 0

> 2012-05-02 14:12:50.772 coop_dev[15352:f803] 当前项目：0
> 
> ...
> 
> 2012-05-02 14:12:50.783 coop_dev[15352:f803] 当前项目：19
> 
> 2012-05-02 14:12:50.784 coop_dev[15352:f803] 活动计数：0

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:27:02.643

Make sure you initialise your array before using it

```
self.activity = [[NSMutableArray alloc] init]; 
```

If your using ARC there is no need for autorelease.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:23:48.543

您是否在向其添加对象之前初始化了您的活动数组？
在 viewDidLoad 中初始化您的活动数组，如下所示：-

```
self.activity = [[[NSMutableArray alloc]init]autorelease]; 
```

# solr - SpanQuery 和 PhraseQuery 有什么区别？

> ID：10408658
> 
> 赞同：0
> 
> 时间：2012-05-02T06:20:01.090
> 
> 标签：solr, lucene

假设我想用 2 个术语查询搜索索引。我可以用`PhraseQuery(term1, term2, slop = 2) or with SpanNearQuery(term1, term2, slop=2, ordered=false)`. 这些配置的 lucene 评分有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T10:39:35.680

据我所知，带有 slop 的短语查询将对短语进行标记，然后在每个标记之间应用 slop 距离，而在跨度查询中，短语将被保留为一个单元。

因此，如果您有一个短语查询`"cat dog bird"`with slop `3`，它会匹配`cat horse lizard dog bird`。

`"cat dog" bird`但是对于with slop的跨度查询`3`将不匹配`cat horse lizard dog bird`，因为`cat`并且`dog`不相邻。但是，它会匹配：`cat dog horse lizard bird`.

# amazon-ec2 - Amazon AutoScaling Scale in 以 FIFO 方式移除实例

> ID：10408663
> 
> 赞同：3
> 
> 时间：2012-05-02T06:20:28.440
> 
> 标签：amazon-ec2, amazon-web-services, rabbitmq, autoscaling

目前我正在使用亚马逊自动缩放服务。我观察到，当它有规模时，它会删除第一个创建的实例。我的问题是我还想将 RabbitMQ 放入自动缩放中，如果我将第一个实例配置为主实例，那么当它有规模时，它会删除主 rabbitmq 实例。我想知道是否有任何方法可以在 Amazon EC2 自动扩展策略上为删除实例提供扩展模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:19:18.077

您可能希望将您的主 RabbitMQ 实例排除在自动扩展集群之外。并启动一个辅助实例并进行自动扩展......请记住将主实例和自动扩展集群都添加到负载均衡器。

# iphone - 如何将网页导出/保存为图像？

> ID：10408668
> 
> 赞同：0
> 
> 时间：2012-05-02T06:20:51.333
> 
> 标签：iphone, image, uiwebview, web

我尝试将网页导出为图像，以便将其分享到一些不允许输入太多单词的社交网络。当我尝试将 UIWebview 的滚动视图层渲染到当前上下文并创建图像时，只需捕捉页面的可见矩形。我该怎么做？非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:21:00.923

```
 NSString *hStr = [web stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"];//get the height
NSString *wtStr = [web stringByEvaluatingJavaScriptFromString:@"document.body.scrollWidth;"];// Get the width
        web.frame=CGRectMake(0, 0, [wtStr floatValue], [hStr floatValue]);
        UIGraphicsBeginImageContext(CGSizeMake(web.frame.size.width,web.frame.size.height));
        CGContextRef ctx = UIGraphicsGetCurrentContext();
        [web.layer renderInContext:ctx];
        UIImage *finalimage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 
```

尝试根据页面宽度和高度设置webviews的高度和宽度，然后截图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:40:01.943

你可以试试这种方式

```
UIGraphicsBeginImageContext(CGSizeMake(yourwebview.frame.size.width,yourwebview.frame.size.height));
CGContextRef ctx = UIGraphicsGetCurrentContext();
[yourwebview.layer renderInContext:ctx];
finalimage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# powershell - 将 Transifex 与 PowerShell 一起使用

> ID：10408674
> 
> 赞同：0
> 
> 时间：2012-05-02T06:21:12.233
> 
> 标签：powershell, resources, translation, quotes

我正在尝试制作一个 powershell 脚本来为我的项目设置 Transifex，当我尝试运行时，我不断收到相同的错误：

```
& tx "set --source -r myproject.auth-resx_myproject -l ""en"" ""C:\MyProjectDir\ResourceFile.resx""" 
```

错误是：

```
 tx.exe : tx: Command set --source -r myproject.auth-resx_myproject -l en C:\MyProjectDir\ResourceFile.resx not found
    At line:1 char:2
    + & <<<<  tx "set --source -r myproject.auth-resx_myproject -l ""en"" ""C:\MyProjectDir\ResourceFile.resx""" 
    + CategoryInfo          : NotSpecified: (tx: Command set....resx not found:String) [], RemoteException
+ FullyQualifiedErrorId : NativeCommandError 
```

看起来有些字符没有正确转义，因为在没有执行运算符和引号的情况下运行脚本。

```
tx set --source -r myproject.auth-resx_myproject -l "en" "C:\MyProjectDir\ResourceFile.resx" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:46:05.190

这引出了一个问题，为什么您首先要尝试`&`。但无论如何，你的问题是你的论点列表。你不需要引用它。实际上，除非您想将它作为单个参数传递给命令，否则您不能引用它。鉴于您显示为有效的线路，您显然不会这样做。

顺便说一句，在这种情况下，工作线也不需要引号。

# java - MVC 的依赖注入

> ID：10408684
> 
> 赞同：0
> 
> 时间：2012-05-02T06:22:09.280
> 
> 标签：java, model-view-controller, dependency-injection, guice, gwt-gin

我知道 DI 主要与 MVP 模式一起使用，但是，Google Gin 在哪里适合模型-视图-控制器框架/模式？

例如，通常对于 MVC，View 持有对 Model 的引用（它在其中侦听更改事件），而 Controller 持有对 Model 和 View 的引用。我的意思是如何使用 DI 改进 MVC 模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:24:22.200

DI 与 MVC 或 MVP 无关，它是 IOC 模式，它通过 DI 容器为清洁器/更容易的单元测试和解耦抽象了依赖关系。

# sql-server - 一行中的数据集过滤器

> ID：10408687
> 
> 赞同：-1
> 
> 时间：2012-05-02T06:22:16.510
> 
> 标签：sql-server, vb.net, c#-3.0

有没有像这样的可能性在一个数据视图中选择两个条件，比如

Childds.Tables("ColumnList").DefaultView.RowFilter = customername='hello'

```
dv = Childds.Tables("ColumnList").DefaultView() 
```

它给出了正确的答案，但是

**Childds.Tables("ColumnList").DefaultView.RowFilter = customername='hello' or customername='hai'**

```
dv = Childds.Tables("ColumnList").DefaultView() 
```

在这种情况下，它只需要第一个并忽略第二个或条件如何编写行过滤器以选择当客户是多个时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:58:21.070

这里可能的答案：[DataView RowFilter Syntax [C#]](http://www.csharp-examples.net/dataview-rowfilter/)
我相信这对你来说已经足够了：

```
dataView.RowFilter = "CustomerName IN ('hello', 'hai')"; 
```

# c++ - 带有非托管代码的 CLR SP

> ID：10408689
> 
> 赞同：0
> 
> 时间：2012-05-02T06:22:19.293
> 
> 标签：c++, sql-server-2008-r2, sqlclr, clrstoredprocedure

我有一些 C++ 代码（www.NR.com 函数），我想在 SQL Server 2008R2 CLR SP 中使用。试图在 C# 中制作一个包装器，但没有运气。也许有人有一个工作示例或手册如何制作这样的包装器并设置所有必需的编译器/链接器选项？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:16:58.443

MSDN 拥有将参数从本机代码编组到托管 .NET 的所有信息

[http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/library/z6cfh6e6(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/z6cfh6e6(v=vs.71).aspx)

本文解释了如何使用非托管代码（C++ 类）

[http://www.codeguru.com/cpp/cpp/cpp_managed/interop/article.php/c6867/Consuming-Unmanaged-C-Class-Libraries-from-NET-Clients.htm](http://www.codeguru.com/cpp/cpp/cpp_managed/interop/article.php/c6867/Consuming-Unmanaged-C-Class-Libraries-from-NET-Clients.htm)

64 位本机代码存在一个问题（本文未提及，因为它在 amd64 实际普及之前）。必须调整链接器参数，我只是通过反复试验来做到这一点。

再想一想，NR.com 的事情就更简单了。您可以创建一个包含所有所需功能的 .DLL。这称为 P/Invoke，它比我上面提到的 C++/CLI 解决方案简单得多。

基本上，对于像这样的 C 代码

```
extern "C" void do_something_with_numbers(double* array, int len); 
```

您使用导出的此函数创建 Wrapper.DLL。

然后在 C# 中你只需声明

```
class MyNRWrapper
{
     [DllImport("WrapperDLL.dll", EntryPoint="do_something_with_numbers")]
     public static extern void DoSomething([MarshalAs(UnmanagedType.LPArray, SizeParamIndex=1)] double [] array, int size );
}; 
```

您遇到的问题可能是由于在 DLL 中您忘记将函数声明为 extern "C" 并且它们被 C++ 编译器损坏。使用 CFF Explorer 工具并查看 Wrapper.DLL 的导出部分，看看它是否确实具有您要导出的功能。如果名称被破坏，请添加 extern "C" 修饰符或更改 C# 中的 EntryPoint 名称。

# java - Java/HtmlUnit 金融网站网页抓取

> ID：10408690
> 
> 赞同：0
> 
> 时间：2012-05-02T06:22:20.113
> 
> 标签：java, web-scraping, htmlunit

我是一名投资者，希望抓取某些股票变量以在 sql 数据库中进行分析（特别是 PE 比率）。

我阅读了一本基本的 Java 书籍，但目前缺乏从网页中获取数据并将其存储在表格中的编程经验。我查看了 HtmlUnit 页面上的示例，但不知道如何让一切正常工作。

目标：

1.  使用 Htmlunit，数据挖掘网站表中的所有值
    [http://ycharts.com/companies/AAPL/historical_data/price#](http://ycharts.com/companies/AAPL/historical_data/price#)
2.  将值存储在我的 SQL 数据库中以进行分析。
3.  对所有股票重复/循环并将数据存储在数据库中。

这是我完成任务的基本尝试。

```
// First, I need to import some Htmlunit libraries, but im not sure which ones yet. 
// Code below datamines the PE ratio for aapl? 

WebClient webClient = new WebClient();
   HtmlPage page = webClient.getPage("http://ycharts.com/companies/AAPL/historical_data/pe_ratio");
   HtmlTable table = (HtmlTable)page.getFirstByXPath("//table[@class='histDataTable']");
   for (HtmlTableRow row : table.getRows()) {
       System.out.println("Found row");
       for (HtmlTableCell cell : row.getCells()) {
           System.out.println("   Found cell: " + cell.asText());

// Not familiar enough with exceptions, but think i need them somewhere?
// And then when I decide to actually create and update statements, ill need something like? 

System.out.println("doing ticker " + ticker + " " + date + " " + pe);           
insert.setString(1,ticker);
insert.setDate(2,date);
insert.setDouble(3,pe);
insert.execute();
}catch(PSQLException e)
{
//set update values
update.execute();
} 
```

# iphone - 如何使用 iCloud 同步我的 sqlite 数据库和位于应用程序库文件夹中的文件夹中的图像

> ID：10408695
> 
> 赞同：3
> 
> 时间：2012-05-02T06:22:56.837
> 
> 标签：iphone, objective-c, sqlite, ios5, icloud

我的要求是，我正在开发的应用程序在位于应用程序文件夹中的 Library 文件夹中创建了一个名为“Private docmunets”的文件夹名称。该文件夹中有图像和一个记录用户条目和图像的 sqlite 文件。

我必须启用我的应用程序 iCloud，所以我必须同步我的 sqlite 数据库和存储在 iCloud 上 Private docmunets 文件夹中的所有图像。

从过去两周开始，我一直在寻找这个，但我没有找到正确的方向。请任何人建议我应该遵循哪种方法来满足我的要求。

提供的任何链接或示例代码将不胜感激。

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T08:57:22.783

请在这些链接中查看我的答案。我和你的要求完全一样。1)[将 sqlite 数据库与 iCloud 同步](https://stackoverflow.com/questions/9953345/syncing-sqlite-database-with-icloud) 2)[如何使用 iCloud 在我的应用程序之间同步 .zip 文件？](https://stackoverflow.com/questions/8047217/how-can-i-use-icloud-to-synchronize-a-zip-file-between-my-apps/10069242#comment13538082_10069242)

# python - python MSN上是否有任何库

> ID：10408697
> 
> 赞同：1
> 
> 时间：2012-05-02T06:23:02.773
> 
> 标签：python, msn

作为标题，我处于严格的网络环境中。对外访问只能使用一个http代理IP。

我现在计划开发一个 MSN 机器人，由该代理提供。有什么建议吗？试一下msnp和papyon，不行。

# lua - if, else, else if 和结束 Lua

> ID：10408704
> 
> 赞同：29
> 
> 时间：2012-05-02T06:23:26.967
> 
> 标签：lua, if-statement

知道为什么这在 Lua 中是错误的吗？

```
 if Pieza == 1 then
            if Rotacion == 1 then
                Piezas = Cuadrado1
            else if Rotacion == 2 then
                Piezas = Cuadrado2
            else if Rotacion == 3 then --this is Line 273
                Piezas = Cuadrado3
            else if Rotacion == 4 then
                Piezas = Cuadrado4
            else
                io.write("Me Envio una rotacion que no existe? \n");
            end 
--this end closes the if inside the first if the one using to compare Rotacion
        else if Pieza == 2 then
            if Rotacion == 1 then
                Piezas = I1
            else if Rotacion == 2 then
                Piezas = I2
            else if Rotacion == 3 then
                Piezas = I3
            else if Rotacion == 4 then
                Piezas = I4
            else
                io.write("Me Envio una rotacion que no existe? \n");
            end
--this end closes the if inside the first if the one using to compare Rotacion
        else  --this else is in case Pieza != 1 || 2
            io.write("Me Envio una pieza que no existe? \n");
        end --this close the whole if (the one comparing "Pieza") 
```

我得到的错误是“else”附近的预期“结束”（在第 273 行关闭“if”）

此外，在每个 if 之后添加 end （这不是应该做的，但无论如何都尝试过）不起作用......

如果你需要我翻译成英文，我很乐意做评论和一切，但我认为这个问题没有必要。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-02T06:32:36.507

是`elseif`，不是`else if`（注意空格）。错误是因为解释器期望`end`每个`else`块都有一个。

有关详细信息，请参阅[手册](http://www.lua.org/manual/5.2/manual.html#3.3.4)。

# php - 确定是否刚刚粘贴网址的快速方法？

> ID：10408711
> 
> 赞同：1
> 
> 时间：2012-05-02T06:24:05.947
> 
> 标签：php

有没有办法通过简单地复制粘贴 url 或只是在地址栏中输入来确定页面是否被访问？可以使用`$_SERVER['HTTP_REFERER']`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:25:31.263

使用推荐人（或没有推荐人）并不可靠，但却是一个强有力的指标。还要查找可能已在网站早期页面上设置的 cookie。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T06:28:52.957

由于这是您的链接被从另一个页面点击（或未点击）的唯一常见指标，这可能是您最好的选择，具体取决于您关心的原因（特别是如果流量可能来自外部站点），但它不是 100% 准确的。

某些浏览器加载项、安全设置、防病毒工具、代理服务器和防火墙不会传递此变量。

此外，搜索机器人和其他访问您网站的非浏览器方式通常不会传入 HTTP_REFERER 标题。

如果大多数浏览器从安全页面链接到您的页面（即 https 页面中的 http 链接），它们会删除此内容

最后，这是一个容易伪造的属性。浏览器插件和其他工具（例如 cUrl）允许您将其设置为您想要的任何内容。

# c# - 如何在 C# 正则表达式中将数字与空格和换行匹配？

> ID：10408716
> 
> 赞同：2
> 
> 时间：2012-05-02T06:24:27.890
> 
> 标签：c#, regex

我有一个注册表单，我想在 C# 中验证电话号码，我的 inputText 中只接受带有空格或换行符的数字，我该如何创建模式？我使用`[^\d\s+$]`但它不能正常工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T06:28:04.297

你放错了锚点`^`和`$`量词`+`，试试

```
^[\d\s]+$ 
```

方括号定义了一个字符类，你把所有你想允许的字符放在里面。如果您的角色类以`^`它的否定类开头，则意味着匹配**不在**该类中的所有内容。

`^`将表达式锚定到字符串的开头

`$`将表达式锚定到字符串的末尾

`+`是量词在这里的意思是：匹配一个或多个类的所有字符。

[您可以在regular-expressions.info](http://www.regular-expressions.info/)上找到有关正则表达式的更多信息，也许“[快速入门](http://www.regular-expressions.info/quickstart.html)”是一个不错的起点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T06:34:45.500

试试这个`^\d[\d\s]*$`

这意味着电话号码必须以数字开头，并且可以以空格和数字的任意组合继续

# c - Case (In)Equality Operators '===' & !==' like Verilog in C

> ID：10408717
> 
> 赞同：3
> 
> 时间：2012-05-02T06:24:35.187
> 
> 标签：c

我有一个简单的 C 代码来进行整数比较。

```
void evaluate_comparison (int addr, int expected, int got)
{
    if (got == expected) tunnel_pass (addr, got);
    else                 tunnel_fail (addr, expected, got);
} 
```

`expected`&`got`实际上是 24 位值，对应于写入/读取到 24 位 DSP 内核的值。（此 C 代码编译为汇编并加载到 DSP 内核中）

在模拟中，有时（尤其是当`addr`DSP 不支持某些时），DSP 内核读取`got = 24'hxxxxxx`（未定义的 24 位值）。在这种情况下，上述比较通过了，但我不希望这样。

我尝试使用`===`& `!==`Case Equality 运算符（类似于 Verilog），但代码无法编译。有没有办法在 C 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:11:33.160

也许你可以写这样的东西：

```
if (IsSupported(addr) && got == expected)
   tunnel_pass (addr, got);
else
   tunnel_fail (addr, expected, got); 
```

但是我不知道`IsSupported()`在您的情况下实现功能是否可行。
至少也许您可以手动对支持的地址范围进行硬编码。

# android - 在两个独立的应用程序中使用数据库

> ID：10408718
> 
> 赞同：0
> 
> 时间：2012-05-02T06:24:35.570
> 
> 标签：android, sqlite

我知道数据库存储在应用程序数据文件夹中，如何从单独的应用程序访问数据库？有没有办法可以在两个单独的 apk 中使用数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:32:05.370

如果您在应用程序中定义了内容提供程序，那么其他应用程序可以访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:37:50.007

您不必将数据库存储在应用程序数据文件夹中；如果你把它放在 sdcard 上，任何应用程序都可以访问它。

一般来说，您可能确实更喜欢服务器，但我觉得这仍然值得一提。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:28:24.390

通常，应用程序的数据库只能由该应用程序访问。如果您想为多个应用程序使用相同的数据库，您可能想尝试使用服务器。

# ruby-on-rails-3 - Heroku Delayed_Job 在通过 rufus_scheduler 时触发两次

> ID：10408721
> 
> 赞同：0
> 
> 时间：2012-05-02T06:24:53.493
> 
> 标签：ruby-on-rails-3, heroku, delayed-job, rufus-scheduler

我意识到这个标题是一个拗口...

我的应用程序当前设置为每天在帐户有活动时向所有用户发送电子邮件。为了实现这一点，**我通过 rufus_scheduler 运行了一个 cron 任务，并使用 delay_job 延迟电子邮件传递**，如下所示：

```
scheduler.cron("0 12 * * *") do
  User.all.each do |user|
    Newideas.delay.newideas_email(user)
  end
end 
```

**不幸的是，使用这种组合（ rufus_scheduler 和 delay_job** ）似乎会导致电子邮件在部署到 Heroku 时向每个用户发送两次。

我试图在开发中复制这一点，但我一直无法做到。此外，当我使用控制器方法触发延迟作业时，问题不会发生 - 即当有人创建新帐户等时。

任何帮助解决这个问题将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:30:51.807

为什么不直接使用 Heroku 调度程序并通过它调用它呢？它产生了一个单独的过程，所以没有必要在那里使用delayed_job......简化:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:17:16.313

也许原因很简单，您调用`scheduler.cron`了一个`config/initializer/what_ever` 文件，因此调度程序在 rails 进程**和**delay_job 进程中运行？

[这](https://stackoverflow.com/questions/4661608/getting-extra-rufus-scheduler-thread-with-each-delayed-job-rake-jobswork)可能是对这个问题的简单回答。

# selenium - 如何在 Debian Linux 中使用 Selenium IDE 插件？

> ID：10408722
> 
> 赞同：2
> 
> 时间：2012-05-02T06:25:09.653
> 
> 标签：selenium, debian

我正在尝试安装 firefox 插件“Selenium IDE”（来自这里：[http](http://seleniumhq.org/download/) ://seleniumhq.org/download/ ）

问题是，它与 debian 的 iceweasel 不兼容。

如何使用 iceweasel 安装它，或者让 firefox 在 debian 64bit 上运行？（我知道有一个每晚构建的 64 位 Firefox，但这需要所有类型的 32 位库，我真的不想在那个系统上安装）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:42:57.657

first you remove previous browser

```
apt-get remove iceweasel 
```

Then, download the latest Linux build of Firefox. Extract the files, and navigate to that folder, and run it. If you want, make an icon on your desktop. You can also make a link to the binary in **/usr/bin/firefox** to make it easier to launch.

get the package in your /etc/apt/sources.list

```
deb http://packages.linuxmint.com debian import 
```

then run

```
apt-get update

  apt-get install firefox 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:41:41.020

只需点击以下链接

[http://fisheye.olat.org/browse/~raw,r=1.2/OLAT/olat3/doc/test_doc/seleniumide_firefox.html](http://fisheye.olat.org/browse/~raw,r=1.2/OLAT/olat3/doc/test_doc/seleniumide_firefox.html) firefox 插件'Selenium IDE'

# java - super的克隆有什么作用？

> ID：10408732
> 
> 赞同：1
> 
> 时间：2012-05-02T06:26:09.253
> 
> 标签：java

我正在阅读 它说在`clone`第一个要调用的方法中必须是 在这种情况下，我想最终我们最终会调用of向上层级链。 但我认为该对象的克隆没有做任何事情。 查看我看到的代码：并且没有实现。 但是从段落看来，如果一个类只有原始字段调用就足以创建一个克隆。 但是怎么做？属于. `Effective Java`
`clone``super.clone()`
`clone``java.lang.Object`

`protected native Object clone() throws CloneNotSupportedException;`

`(ClassX) super.clone()`
`super.clone``Object`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:50:36.343

对象中的这个声明

```
 protected native Object clone() throws CloneNotSupportedException; 
```

... 表示该`clone`方法是在本机代码中实现的；即幕后有魔法。

您可以放心，`Object.clone()`实际上确实做了一些事情……前提是您已将您的类声明为正在实现`Cloneable`。但是它所做的事情不能用普通的 Java 来表达。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:30:24.863

clone() 是 Java 中用于对象复制的方法。在 Java 中，对象是通过引用变量来操作的，并且没有用于复制对象的操作符——赋值操作符复制的是引用，而不是对象。clone() 方法提供了这个缺失的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T06:37:04.517

没错，当你克隆一个对象时，你应该总是调用`super.clone()`（作为第一条语句），然后手动克隆你的对象的其余部分，这是因为当你克隆一个对象时，你必须确保超类的部分对象也以正确的方式克隆......

如果一个对象不支持它抛出的克隆`CloneNotSupportedException`，这意味着如果你尝试克隆一个超级对象并且你得到了异常，你也不能在你的子类型中实现克隆对象，并且不能克隆对象......那里禁止对象克隆操作是正确的几种情况。

# c++ - STL 列表 iterator to change an object within the list I'm an amateur so bear with me, but I've hit the end of my research with no solution for this. This code complies fine but when I debug, it's apparent that the procedure 问问题 问问题 2012-05-02T06:26:10.540 1249 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm an amateur so bear with me, but I've hit the end of my research with no solution for this. This code complies fine but when I debug, it's apparent that the procedure exists upon reaching the for loop, and never executes what is within it (which is what I need to do). void insertWord(list <word>&words, string str) { list<word>::iterator itr; for (itr = words.begin(); itr != words.end(); itr++ ) //EXITS HERE { if (str == (*itr).aWord) { (*itr).iterateCount(); return; } if (str > (*itr).aWord) { words.push_back(Word(str)); return; } } } I don't understand why the for loop is never executed. It just skips right to the end of the function. NB: "Word" is a custom class to hold a string and an int(how many of that string there are). If any more info is required please ask, I'm dying here! Thanks. The calling thread must be STA The error Im getting : The calling thread must be STA, because many UI components require this. So I have an android application which generates a bill of materials on the server side. Therefore a new UI has to be generated for the bill of materials. When I try to add a product to the BOM..this is the error I am getting. How do I go about it. An solution allowing me to host the service the android application is using is already running. The BOM application is a part of this solution. c++listobjectstliterator 4 2 回答 2 This answer is useful 2 看起来你的列表是空的，所以itr==words.end()循环中的代码永远不会执行。 于 2012-05-02T06:55:03.813 回答 This answer is useful 0 您可以使用std::map： std::map <word, int="">histogram; histogram[Word("hello")] += 1; histogram[Word("hello")]++; // equivalent histogram[Word("vertigo")]++; 于 2012-05-02T07:09:15.957 回答 Related 1 objective-c - 以编程方式创建 NSButton 并设置自定义 NSButtonCell 1 database - 适用于 i18n 的 FuelPHP ORM 数据库模式，意见/建议 1 mysql - mysql where子句冲突 2 git - 如何退出某些推送 1 php - 如何一次显示所有错误而不是一次显示一个错误？ 2 angularjs - 任何按钮的AngularUI ui-keypress？ 2 javascript - Codeigniter、jQuery 和 Ajax - 在动态显示新数据库内容时阻止页面刷新 1 html - --no-clobber 如果在 wget 中使用 --html-extension 仍会覆盖文件？ 2 html - 如何在浏览器顶部放置标题 - CSS3 HTML5 1 java - 使用 JButton actionperformed 类如何将元素从一个数组列表添加到另一个数组列表？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</word,></word></word>

> ID：10408733
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c++, list, object, stl, iterator

I'm an amateur so bear with me, but I've hit the end of my research with no solution for this.

This code complies fine but when I debug, it's apparent that the procedure exists upon reaching the for loop, and never executes what is within it (which is what I need to do).

```
void insertWord(list<Word> &words, string str)
{
    list<Word>::iterator itr;
    for (itr = words.begin(); itr != words.end(); itr++ ) //EXITS HERE
    {
        if (str == (*itr).aWord)
        {
            (*itr).iterateCount();
            return;
        }
        if (str > (*itr).aWord)
        {
            words.push_back(Word(str));
            return;
        }
    }
} 
```

I don't understand why the for loop is never executed. It just skips right to the end of the function.

NB: "Word" is a custom class to hold a string and an int(how many of that string there are). If any more info is required please ask, I'm dying here! Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:55:03.813

看起来你的列表是空的，所以`itr==words.end()`循环中的代码永远不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:09:15.957

您可以使用`std::map`：

```
std::map<Word, int> histogram;

histogram[Word("hello")] += 1;
histogram[Word("hello")]++; //  equivalent

histogram[Word("vertigo")]++; 
```

# wpf - 调用线程必须是 STA

> ID：10408734
> 
> 赞同：0
> 
> 时间：2012-05-02T06:26:16.343
> 
> 标签：wpf

我得到的错误：调用线程必须是 STA，因为许多 UI 组件都需要这个。

所以我有一个在服务器端生成材料清单的 android 应用程序。因此，必须为物料清单生成一个新的 UI。当我尝试将产品添加到 BOM 时..这是我得到的错误。我该怎么做。允许我托管 android 应用程序正在使用的服务的解决方案已经在运行。BOM 应用程序是该解决方案的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:44:04.297

当您在应用程序中创建一个新线程时，请在启动它之前像下面的代码一样设置它的独立状态：

```
 Thread myThread = new Thread(() =>
            {

            });

            myThread.SetApartmentState(ApartmentState.STA);
            myThread.Start(); 
```

如果您不创建这样的新线程，您可能必须使用 [STAThread] - 属性声明您的“main”或“startup” - 方法。请参见此处：[为什么 WPF 需要将 STAThread 属性应用于 Main 方法？](https://stackoverflow.com/questions/1293402/why-does-wpf-require-a-stathread-attribute-to-be-applied-to-the-main-method)

# python - Python inheritance - calling base class methods inside child class?

> ID：10408739
> 
> 赞同：16
> 
> 时间：2012-05-02T06:27:12.237
> 
> 标签：python, class, inheritance, base-class, overwrite

It baffles me how I can't find a clear explanation of this anywhere. Why and when do you need to call the method of the base class inside the same-name method of the child class?

```
class Child(Base):
    def __init__(self):
        Base.__init__(self)

    def somefunc(self):
        Base.somefunc(self) 
```

I'm guessing you do this when you don't want to completely overwrite the method in the base class. is that really all there is to it?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T06:37:36.463

通常，当您想通过修改而不是完全替换基类方法来扩展功能时，您会这样做。`defaultdict`就是一个很好的例子：

```
class DefaultDict(dict):
    def __init__(self, default):
        self.default = default
        dict.__init__(self)

    def __getitem__(self, key):
        try:
            return dict.__getitem__(self, key)
        except KeyError:
            result = self[key] = self.default()
            return result 
```

请注意，执行此操作的适当方法是[使用`super`而不是直接调用基类](https://stackoverflow.com/questions/222877/how-to-use-super-in-python)。像这样：

```
class BlahBlah(someObject, someOtherObject):
    def __init__(self, *args, **kwargs):
        #do custom stuff
        super(BlahBlah, self).__init__(*args, **kwargs) # now call the parent class(es) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:30:04.127

It completely depends on the class and method.

If you just want to do something before/after the base method runs or call it with different arguments, you obviously call the base method in your subclass' method.

If you want to replace the whole method, you obviously do not call it.

# php - Why does in_array() wrongly return true with these (large numeric) strings?

> ID：10408740
> 
> 赞同：43
> 
> 时间：2012-05-02T06:27:13.650
> 
> 标签：php, arrays

I am not getting what is wrong with this code. It's returning "Found", which it should not.

```
$lead = "418176000000069007";
$diff = array("418176000000069003","418176000000057001");

if (in_array($lead,$diff))
    echo "Found";
else
    echo "Not found"; 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-05-02T06:34:16.417

**注意：**此行为在 PHP 5.4 中已更改。

默认情况下，`in_array`使用松散比较 ( `==`)，这意味着将数字字符串转换为数字并作为数字进行比较。在 PHP 5.4 之前，如果您的平台的浮点类型没有足够的精度，就会丢失差异并且得到错误的答案。

一种解决方案是通过将额外参数传递给来打开`strict`比较 ( ) ：`===``Boolean``in_array`

```
 $lead = "418176000000069007";
  $diff = array("418176000000069003", "418176000000057001");

  if ( in_array($lead, $diff, true) ) 
    echo "Found";
  else
    echo "Not found"; 
```

然后将字符串作为没有数字强制的字符串进行比较。但是，这意味着您确实失去了“01234”和“1234”等字符串的默认等效性。

此行为[被报告为错误](https://bugs.php.net/bug.php?id=54547)并在 PHP 5.4 中修复。与 比较时，数字字符串仍会转换为数字`==`，但前提是字符串的值适合平台的数字类型。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-02T06:32:49.397

**注意：*这是 PHP 旧版本中的错误，并在`PHP 5.4`新版本中得到纠正。***

这是因为存储数量的限制`PHP`

这里真正的问题是因为`PHP_INT_MAX`- 在我们的案例中超出了值。

尝试`echo`/`print_r` `$lead`不`$diff`使用引号。会导致

```
$lead ---> 418176000000070000  
$diff ---> Array ( [0] => 418176000000070000 [1] => 418176000000060000 ) 
```

所以，在这种情况下，`in_array`结果是真的！

所以通过将`strict`第三`in_array()`个参数设置`in_array()`为`true`

```
 if(in_array($lead,$diff,true)) //use type too
       echo "Found";
     else
       echo "Not found";
?> 
```

尝试这个。它会起作用的。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-02T06:31:32.920

It's because of one defect in PHP. `418176000000069007` is modified to 2147483647 (integer limit of PHP). That is why you are getting `Found`.

try `in_array($lead, $diff, true)`

```
If the third parameter strict is set to TRUE then the in_array() 
function will also check the types of the needle in the haystack. 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-02T06:33:44.560

值超过`PHP_INT_MAX`。尝试做`if(in_array($lead,$diff,true))`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-02T06:38:38.027

`in_array`应该严格。

```
$lead = "418176000000069007";
  $diff = array("418176000000069003","418176000000057001");

  if(in_array($lead,$diff,true)) 
    echo "Found";
  else
    echo "Not found"; 
```

此问题是由于*您的数字超出了定义的整数限制*

注意：最大值取决于系统。32 位系统的最大有符号整数范围为`-2147483648`至`2147483647`。因此，例如在这样的系统上，`intval('1000000000000')`将返回`2147483647`. 64 位系统的最大有符号整数值为`9223372036854775807`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-02T06:35:24.173

尝试使用方括号并使用严格模式：

```
$lead = "418176000000069007";
$diff = array("418176000000069003","418176000000057001");

if(in_array($lead, $diff, true)) {
    echo "Found";
} else {
    echo "Not found";
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-02T11:47:47.483

如果第三个参数 strict 设置为 TRUE，那么该`in_array()`函数还将检查大海捞针的类型，并且因为限制超出了最大整数值。

因此，如果 PHP 遇到超出整数类型范围的数字，它将被解释为浮点数。此外，导致数字超出整数类型范围的操作将改为返回浮点数。检查 PHP 手册。

```
if (in_array($lead,$diff,true)) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-09T05:16:10.370

来自[PHP 手册：字符串转换为数字](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)：

> 在数字上下文中评估字符串时，结果值和类型确定如下。
> 
> 如果字符串包含任何字符“.”、“e”或“E”，则该字符串将被评估为浮点数。否则，它将被评估为整数。

正如其他一些人提到的，您应该对[in_array](http://php.net/manual/en/function.in-array.php)使用 strict ：

> `bool in_array ( mixed $needle , array $haystack [, bool $strict =` FALSE ] ) 除非设置了严格，否则使用松散比较在 haystack 中搜索针。

有人提到`PHP_INT_MAX`。这将`2147483647`在我的系统上。我不太确定这是否是[手册](http://php.net/manual/en/language.types.integer.php)所述的问题：

> 如果 PHP 遇到超出整数类型范围的数字，它将被解释为浮点数。此外，导致数字超出整数类型范围的操作将改为返回浮点数。

但是[浮点精度](http://www.php.net/manual/en/language.types.float.php)应该足够高......

不管这个问题的“真正”来源是什么，只需使用 strict for`in_array`来解决这个问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-24T04:25:08.123

如果那是您的问题，并且您真的想在数组中进行比较/查找，那么有一个技巧

```
$lead = "a418176000000069007";
$diff = array("a418176000000069003","a418176000000057001");

if (in_array($lead,$diff))
    echo "Found";
else
    echo "Not found"; 
```

即，您必须以某种方式为每个数字添加一个特定的字符。相比之下，它们将表现为字符串，因此会给出正确的结果。

# iphone - 更改 UIView 的图层类

> ID：10408746
> 
> 赞同：2
> 
> 时间：2012-05-02T06:28:03.797
> 
> 标签：iphone, objective-c, uiview

根据 Apple UIView Programming Guide，您只能使用该`layerClass`方法更改 uiview 的 CA 层，您必须在视图初始化期间覆盖该方法以返回不同的类，这是唯一可以做到的方法：

> 创建视图后，无法更改与视图关联的图层类型。因此，每个视图都使用 layerClass 类方法来指定其图层对象的类。

但是，我已经看到直接将视图层分配给另一个创建的层的应用程序教程，我一直认为这本质上是用另一个层类替换该层并且工作正常。

这两种方法会产生相同的结果吗？使用第二种方法不好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:55:53.377

的`layer`属性`UIView`是只读的。您不能分配给它。我怀疑您正在查看 Mac OS X 教程，而不是 iOS 教程。在 Mac OS X 上，您使用`NSView`，它具有读写`layer`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-12T06:30:07.547

UIView 类有一个类型 var

```
class var layerClass: Swift.AnyClass { get } 
```

在您的视图中覆盖此 var 以更改 iOS 中的图层类：

```
class MyView: UIView {
    override class var layerClass: Swift.AnyClass {
        return CATiledLayer.self
} 
```

# java - 用于处理列表的 Java API

> ID：10408749
> 
> 赞同：0
> 
> 时间：2012-05-02T06:28:09.223
> 
> 标签：java, collections, arraylist

我正在对对象列表进行大量处理和搜索。我的应用程序在呈现结果时内存不足。是否有任何 API 可以有效地处理/处理对象列表，我正在尝试对其进行优化。

我还要说一件事，我正在用新的 ArrayList 初始化我的所有列表。我应该使用其他东西吗？

我有一个需要显示记录和搜索这些记录的屏幕，我正在使用那里的 API（这是我唯一的方法，因为我无法访问他们的数据库，我无法运行 SQL 查询。）屏幕上显示的每条记录搜索特定标准，我正在使用他们的搜索 API 进行相同的搜索。我正在调试代码，发现该搜索方法引发了异常。我正在粘贴错误日志

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.2.v20100323-r6872): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: [OWLS][SQLServer JDBC Driver][SQLServer]There is insufficient system memory in resource pool 'internal' to run this query.
Error Code: 701
Call: SELECT DISTINCT t0.PRIMARY_KEY, t0.TOTAL_ACCRUAL, t0.TOTAL_ALLOCATED, t0.ALLOC_LIMIT, t0.APPL_END_ON, t0.APPL_EXPENSE_PERCENT, t0.APPL_NON_US_TAX_PERCENT, t0.APPL_INVD_EXPENSE_PERCENT, t0.APPL_INVD_TASK_PERCENT, t0.APPL_START_ON, t0.APPL_TASK_PERCENT, t0.INVOLVED_APPL_TYPE_IID, t0.PROJECT_APPL_TYPE_IID, t0.VENDOR_APPL_TYPE_IID, t0.TOTAL_BG_AVAILABLE, t0.CREATED_ON, t0.STATUS_IID, t0.APPL_EXPENSE, t0.APPL_INVC_ACCRUAL, t0.APPL_INVC_CREDIT_NOTE, t0.APPL_NON_US_TAX, t0.APPL_INVC_SHADOW, t0.APPL_INVC_STANDARD, t0.APPL_INVD_EXPENSE, t0.APPL_INVD_TASK, t0.APPL_TASK, t0.AUTO_POST, t0.MODIFIED_ON, t0.NAME, t0.OVERDRAFT_TYPE_IID, t0.POSTED_TYPE_IID, t0.SECURITY_TYPE_IID, t0.TREE_KEY, t0.TYPE_IID, t0.TOTAL_USED, t0.VERSION, t0.APPL_EXPENSE_CATEGORY_ID, t0.APPL_NON_US_TAX_TYPE, t0.APPL_INVOLVED_ID, t0.APPL_INVD_EXP_CATEGORY_ID, t0.APPL_INVD_TASK_CATEGORY_ID, t0.APPL_PROJECT_CATEGORY_ID, t0.APPL_PROJ_DETAIL_FIELD_ID, t0.PROJECT_ID, t0.APPL_TASK_CATEGORY_ID, t0.APPL_VENDOR_ID, t0.APPROVAL_STATUS_ID, t0.CREATED_BY_ID, t0.CREATED_ON_BEHALF_OF_ID, t0.DEFAULT_CATEGORY_ID, t0.DOCUMENT_FOLDER_ID, t0.FORUM_ID, t0.MODIFIED_BY_ID, t0.NOTE_ID, t0.PARENT_ACCOUNT_ID FROM T_ACCOUNT_SECURITY_FILTER t5, Y_OBJ_CATEGORY t4, T_PROJECT t3, E_ACCT t2, T_CONTACT t1, T_ACCOUNT t0 WHERE ((((((((((t0.VENDOR_APPL_TYPE_IID = 2) AND (t1.PRIMARY_KEY = 2004)) AND (t2."YEARACCT" = N'2012')) AND (t0.PROJECT_APPL_TYPE_IID = 2)) AND (t3.PRIMARY_KEY = 46537)) AND (t4.TREE_POSITION = N'ACCT_ACTL_CCSP_VNDR_MONT')) AND (t0.NAME = N'Actuals - Cost Center 10 - LA2012000250 - Singla, Ashima - 2012 - October')) AND (t2."PERIODACCT" = N'M9')) AND (t5.USER_ID = 1504)) AND (((((t1.PRIMARY_KEY = t0.APPL_VENDOR_ID) AND (t2.ACCOUNT_ID$ = t0.PRIMARY_KEY)) AND (t3.PRIMARY_KEY = t0.PROJECT_ID)) AND (t4.PRIMARY_KEY = t0.DEFAULT_CATEGORY_ID)) AND (t5.ENTERPRISE_OBJECT_ID = t0.PRIMARY_KEY)))
Query: ReadAllQuery(referenceClass=TFAccount sql="SELECT DISTINCT t0.PRIMARY_KEY, t0.TOTAL_ACCRUAL, t0.TOTAL_ALLOCATED, t0.ALLOC_LIMIT, t0.APPL_END_ON, t0.APPL_EXPENSE_PERCENT, t0.APPL_NON_US_TAX_PERCENT, t0.APPL_INVD_EXPENSE_PERCENT, t0.APPL_INVD_TASK_PERCENT, t0.APPL_START_ON, t0.APPL_TASK_PERCENT, t0.INVOLVED_APPL_TYPE_IID, t0.PROJECT_APPL_TYPE_IID, t0.VENDOR_APPL_TYPE_IID, t0.TOTAL_BG_AVAILABLE, t0.CREATED_ON, t0.STATUS_IID, t0.APPL_EXPENSE, t0.APPL_INVC_ACCRUAL, t0.APPL_INVC_CREDIT_NOTE, t0.APPL_NON_US_TAX, t0.APPL_INVC_SHADOW, t0.APPL_INVC_STANDARD, t0.APPL_INVD_EXPENSE, t0.APPL_INVD_TASK, t0.APPL_TASK, t0.AUTO_POST, t0.MODIFIED_ON, t0.NAME, t0.OVERDRAFT_TYPE_IID, t0.POSTED_TYPE_IID, t0.SECURITY_TYPE_IID, t0.TREE_KEY, t0.TYPE_IID, t0.TOTAL_USED, t0.VERSION, t0.APPL_EXPENSE_CATEGORY_ID, t0.APPL_NON_US_TAX_TYPE, t0.APPL_INVOLVED_ID, t0.APPL_INVD_EXP_CATEGORY_ID, t0.APPL_INVD_TASK_CATEGORY_ID, t0.APPL_PROJECT_CATEGORY_ID, t0.APPL_PROJ_DETAIL_FIELD_ID, t0.PROJECT_ID, t0.APPL_TASK_CATEGORY_ID, t0.APPL_VENDOR_ID, t0.APPROVAL_STATUS_ID, t0.CREATED_BY_ID, t0.CREATED_ON_BEHALF_OF_ID, t0.DEFAULT_CATEGORY_ID, t0.DOCUMENT_FOLDER_ID, t0.FORUM_ID, t0.MODIFIED_BY_ID, t0.NOTE_ID, t0.PARENT_ACCOUNT_ID FROM T_ACCOUNT_SECURITY_FILTER t5, Y_OBJ_CATEGORY t4, T_PROJECT t3, E_ACCT t2, T_CONTACT t1, T_ACCOUNT t0 WHERE ((((((((((t0.VENDOR_APPL_TYPE_IID = ?) AND (t1.PRIMARY_KEY = ?)) AND (t2."YEARACCT" = ?)) AND (t0.PROJECT_APPL_TYPE_IID = ?)) AND (t3.PRIMARY_KEY = ?)) AND (t4.TREE_POSITION = ?)) AND (t0.NAME = ?)) AND (t2."PERIODACCT" = ?)) AND (t5.USER_ID = ?)) AND (((((t1.PRIMARY_KEY = t0.APPL_VENDOR_ID) AND (t2.ACCOUNT_ID$ = t0.PRIMARY_KEY)) AND (t3.PRIMARY_KEY = t0.PROJECT_ID)) AND (t4.PRIMARY_KEY = t0.DEFAULT_CATEGORY_ID)) AND (t5.ENTERPRISE_OBJECT_ID = t0.PRIMARY_KEY)))")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:687)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:530)
    at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:529) 
```

谢谢拉维库马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:31:57.010

你可以看看 Apache 的[CollectionUils](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)包。API 可以提供一些您可能已经在做的功能，但 API 可能会更有效地做到这一点。话虽这么说，但没有告诉我们您实际上在做什么，我们只能推测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:35:32.620

您是否考虑过一些延迟加载技术？

例如，在集合的实际迭代期间加载您的集合对象。

或者具有存储在集合中的实际对象的轻量级表示（例如只有对象的 DB 键）。

如果您想要高效的搜索，那么您应该考虑搜索引擎库，例如[Lucene](http://lucene.apache.org/core/)。

# java - How to change the default objectMapper of MappingJacksonHttpMessageConverter?

> ID：10408751
> 
> 赞同：4
> 
> 时间：2012-05-02T06:28:22.050
> 
> 标签：java, spring, spring-mvc

I would like to replace the default objectMapper of the MappingJacksonHttpMessageConverter.

I found a working solution but I am not happy about it:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
                       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                       http://www.springframework.org/schema/context
                       http://www.springframework.org/schema/context/spring-context-3.1.xsd
                       http://www.springframework.org/schema/util
                       http://www.springframework.org/schema/util/spring-util-2.0.xsd">

<!-- Scans the classpath of this application for @Components to deploy as beans -->
<context:component-scan base-package="org.mypackage.service"/>

<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="messageConverters">
        <list>
            <!--Adding the default message converters-->
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter">
                <property name="writeAcceptCharset" value="false"/>
            </bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"/>

            <!--Adding our custom JSON converter-->
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper">
                    <util:constant static-field="org.mypackage.JsonUtils.MAPPER"/>
                </property>
            </bean>
        </list>
    </property>
</bean> 
```

The solution initializes RequestMappingHandlerAdapter classes with my custom list of message converters.

I don't like this solution because I needed to add the default message converters (which I copied from the `org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter` constructor).

Without adding the default converters - my controllers could handle only application/json requests and forgot how to handle other basic requests such as application/xml.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:32:04.907

您可以通过代码来完成，而无需声明`RequestMappingHandlerAdapter`bean 并手动初始化所​​有这些转换器。你应该写一个`BeanPostProcessor`，像这样：

```
public class MyBeanPostProcessor implements BeanPostProcessor {

    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }

    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        if (bean instanceof AnnotationMethodHandlerAdapter) {
            AnnotationMethodHandlerAdapter adapter = (AnnotationMethodHandlerAdapter) bean;
            HttpMessageConverter<?>[] converters = adapter.getMessageConverters();

            for (HttpMessageConverter<?> converter : converters) {
                if (converter instanceof MappingJacksonHttpMessageConverter) {
                    initConverter((MappingJacksonHttpMessageConverter) converter);
                }
            }
        } else  if(bean instanceof MappingJacksonHttpMessageConverter){
            initConverter((MappingJacksonHttpMessageConverter) bean);
        }
        return bean;
    }

    private void initConverter(MappingJacksonHttpMessageConverter converter) {
            MappingJacksonHttpMessageConverter jsonConverter = (MappingJacksonHttpMessageConverter) converter;
            final ObjectMapper mapper = // get your mapper from wherever
            jsonConverter.setObjectMapper(mapper);

            /* here you can apply any other configuration you wish*/
     }
} 
```

并将其定义为 bean：

```
<bean class="my.package.MyBeanPostProcessor" id="myBeanPostProcessor" lazy-init="false"/> 
```

这样您就可以准确地编辑您真正感兴趣的内容 - `MappingJacksonHttpMessageConverter`.

# php - Magento 致命错误 lib/Varien/Image/Adapter/Gd2.php

> ID：10408760
> 
> 赞同：0
> 
> 时间：2012-05-02T06:29:12.873
> 
> 标签：php, magento, magento-1.5, out-of-memory

我们在 Magento 管理员中添加了一些产品并上传了一些产品图片。之后我的产品列表页面是空白的。所以我检查了我的 error_log 文件，我看到了以下错误。

```
PHP Fatal error:  Out of memory (allocated 190578688) (tried to allocate 7896 bytes) in /public_html/lib/Varien/Image/Adapter/Gd2.php on line 44 
```

所以我禁用了所有最后添加的产品。清除缓存。重新索引，启用缓存。

我的内存限制 = 512M

这到底是什么。任何人有解决方案，请发布它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T07:06:08.897

190578688 字节为 181 MB。这意味着要么

1.  您的服务器受到物理 RAM 的限制。您可以在 php.ini 中设置任何您喜欢的内容，但操作系统无法使用 RAM 并不重要

2.  某些东西（.htaccess、ini_set 调用、不同的 php.ini）覆盖了您设置的 512 MB

3.  您在日志中看到的错误与另一个问题有关

要检查 #3，请在 中打开开发者模式`index.php`，并将`display_errors`ini 文件设置为“1”，然后尝试加载您的产品页面。这应该将您的错误直接输出到浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:38:23.923

这似乎是家常便饭。我们有一家在弱服务器上运行的商店。每页大约有 30 个“大”缩略图，大约 60 个“小”缩略图和大约 90 个大图像。添加 5-10 个产品后，我们遇到了同样的错误。

wodoo-magic 之一是刷新页面，直到服务器上的用户数量减少，并且希望 PHP 有足够的内存来更改图像的大小。大声笑：D

更好的解决方案是将图像的来源更改为最差的质量，这样 PHP 就不会与大型 JPEG 或 PNG 作斗争。或者在上传到所需大小之前调整图像大小。

最好的解决方案可能是编写一些 cron-walker，它检查调整大小的图像，如果缓存中没有这样的图像，它就会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T08:04:14.740

删除目录中大于 350Kb 的图像。

同样在系统/配置/常规/设计用于水印的图像并以 jpg 格式上传优化图像。这对我有用！

# sharepoint-2010 - Where does the Terms used to Tag a page exist in SharePoint 2010?

> ID：10408762
> 
> 赞同：0
> 
> 时间：2012-05-02T06:29:44.020
> 
> 标签：sharepoint-2010

I am trying to Tag a Url with the "I Like It" using code, i.e. using the SocialTagManager class.

```
SPServiceContext serviceContext = SPServiceContext.GetContext(SPContext.Current.Site);
SocialTagManager socialTagManager = new SocialTagManager(serviceContext);
UserProfileManager userProfileManager = new UserProfileManager(serviceContext);
UserProfile userProfile = userProfileManager.GetUserProfile(CurrentUser);
SocialTerm[] terms = socialTagManager.GetTerms(userProfile);
Term favTerm = (from t in terms
                            where (t.Term.Name.Equals("i like it", StringComparison.InvariantCultureIgnoreCase))
                            select t.Term).First();

socialTagManager.AddTag(new Uri(Url), favTerm, Title); 
```

But for this, the favTerm should be already there in SharePoint. But if a user has not tagged any page with "I Like it" before then the GetTerms() or GetAllTerms() method does not return any Term for I Like it.

How do I create a new Term if the I Like it Term is not already there?

Thanks in advance

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T15:49:02.570

不太确定你在找什么。但是您可以按照本文[http://msdn.microsoft.com/en-us/library/ff407956.aspx中所示以编程方式创建标签](http://msdn.microsoft.com/en-us/library/ff407956.aspx)

```
TaxonomySession taxSession = mySocialTagManager.TaxonomySession;
TermStore termStore = taxSession.DefaultKeywordsTermStore;
myTerm = termStore.KeywordsTermSet.CreateTerm("term", termStore.DefaultLanguage);
termStore.CommitAll(); 
```

但是当 Term 已经在 TermStore 中时，我遇到了这种情况，但是这个术语还没有出现在 User Profile 术语数组中。

# .net - 在不知道字段名称的情况下提取特定的 JSON 字段？

> ID：10408766
> 
> 赞同：0
> 
> 时间：2012-05-02T06:30:24.723
> 
> 标签：.net, json, json.net

看起来好的 JSON 对象通常具有名称-值对，如果它有多个项目，则值为 JSON 数组。这更容易解析。

但是我遇到了一个烦人的案例，我不确定如何解析。虽然我的问题是针对 .NET 的，并且我在 CodePlex 上使用 JSON.NET 库（主要是 LINQ to JSON 方法，但也可以采用其他方法），但我也想知道在其他语言平台上是如何处理的。

烦人的情况是 JSON 没有数组和名称-值对仅在最低级别的子级，JSON 对象的节点包含更多对象，直到我们将属性作为名称-值对的最低级别。而且我想提取中间节点的列表，并且在进行查询时事先不知道它们的节点名称（它们是动态的）。您如何查询它们或遍历它们。下面是一个示例 - 我想要所有“响应”子节点的名称。AlbumData 属性的父名称，即“Twenty5MBPhotos”和“TestPhotos”。

```
{"status":200,"message":"OK","response":{"Twenty5MBPhotos":{"__albumData":{"id":"67b0de21d48290741598"}},"FiveMBPhotos":{"__albumData":{"id":"67b0de21d4a72ac5b401"}},"TestPhotos":{"__albumData":{"id":"67b0de21d64693a7f49f"}},"Sample album":{"__albumData":{"id":"67b0de21d67c4a99f4c3"}},"Empty":{"__albumData":{"id":"67b0de21d5fc3f2e05ac"}},"me":{"__albumData":{"id":"67b0de21d5bd2d1ea4f9"}},"satx":{"__albumData":{"id":"67b0de21d5b2f929c473"}},"designs":{"__albumData":{"id":"67b0de21d5a29b9f45c0"}},"views":{"__albumData":{"id":"67b0de21d5958c3b652e"}},"Puppy":{"__albumData":{"id":"67b0de21d540884dc413"}},"QaTest":{"__albumData":{"id":"67b0de21d6d96c35d419"}},"random":{"__albumData":{"id":"67b0de21d6b89b9ab401"}}}} 
```

坦率地说，JSON 格式本来可以更容易，结果是具有属性专辑名称和专辑 ID 的数组，而不是当前格式，但我没有定义这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:47:08.807

你可以像这样得到所有的名字：

```
 JObject obj = JObject.Parse(json);
    var children= obj["response"];

    foreach (var item in children)
    {
        string val = ((JProperty)item).Name;   
    } 
```

只需要将 JToken 转换为 JProperty 即可获取名称值。

更新：

或者用一些 linq

```
var theNamesAndIds = children.ToDictionary(m => ((JProperty)m).Name,
                                           m => m.First()["__albumData"]["id"]);

foreach (var item in theNamesAndIds)
{
    //item has your key(name) and value(Id)
} 
```

# sql - 检查sql语句是否已经执行

> ID：10408768
> 
> 赞同：2
> 
> 时间：2012-05-02T06:30:31.973
> 
> 标签：sql, stored-procedures

如何在执行另一个 SQL 语句之前检查 sql 语句是否已执行。

我这样做

```
 DECLARE tempId double default 2;
 insert IGNORE  into  `system_users`( `user_id`,`username`,`password`) values (id , userName ,md5(password)) ;

  set tempId= last_insert_id();

  IF tempId <> 0 THEN     
        insert into  `user_profile`(`user_id`, `full_name`, `cellphone`, `Date_time_ added`,`added_by`) values (id, fullName ,cellPhone , CURRENT_TIMESTAMP(),addedBy ) ; 
```

函数 last_insert_id() 不适用于我的情况，因为 user_id 不是自动递增 pk，它是用户的标识号。用于测试sql语句执行的函数是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:35:16.140

也许是这样的。查看插入的行是否已经存在：

```
 insert IGNORE  into  `system_users`( `user_id`,`username`,`password`) values (id , userName ,md5(password)) ;

  IF NOT EXISTS(SELECT NULL FROM system_users WHERE system_users=id) 
  BEGIN     
        insert into  `user_profile`(`user_id`, `full_name`, `cellphone`, `Date_time_ added`,`added_by`) values (id, fullName ,cellPhone , CURRENT_TIMESTAMP(),addedBy ) ;
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:35:24.200

你没有指定你正在使用什么 DMBS，所以我假设 MySQL（它看起来像 MySQL，如果不是，请指定）对于`INSERT`语句，使用[ROW_COUNT()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)

例如

```
DECLARE tempId double default 2;
 insert IGNORE  into  `system_users`( `user_id`,`username`,`password`) values (id , userName ,md5(password)) ;

set tempId= ROW_COUNT(); 
```

这将返回受影响的行数。

另外，请注意，对于`SELECT`语句，您将使用[FOUND_ROWS()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

例如

```
SELECT SQL_CALC_FOUND_ROWS * FROM MyTable; 
SELECT FOUND_ROWS(); 
```

尽管这会告诉您找到的总行数，无论您是否有`LIMIT`子句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T06:46:12.633

您可以在存储过程结束之前添加它，它会指示是否有任何记录受到影响。

```
 IF @@ROWCOUNT <>1
    BEGIN
    RAISERROR ('An error occured',10,1)
    RETURN -1
    END 
```

例如

```
 DECLARE tempId double default 2;
     insert IGNORE  into  `system_users`( `user_id`,`username`,`password`) values (id , userName ,md5(password)) ;

    IF NOT EXISTS(SELECT NULL FROM system_users WHERE system_users=id) 
    BEGIN     
    insert into  `user_profile`(`user_id`, `full_name`, `cellphone`, `Date_time_ added`,`added_by`) values (id, fullName ,cellPhone , CURRENT_TIMESTAMP(),addedBy ) ;

    IF @@ROWCOUNT <>1
    BEGIN
    RAISERROR ('No rows were affected',10,1)
    RETURN -1
    END
    END 
```

因此，如果没有修改任何行，RAISERROR 变量将包含“没有行受到影响”。这是你要找的，还是我误会了……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:34:54.140

您必须测试 SQLCODE 的值

> SQLCA 数据结构中最重要且使用最广泛的字段是 SQLCODE 变量。每次 Microsoft® SQL Server™ 2000 运行嵌入式 SQL 语句时，它都会设置 SQLCODE 变量的值以指示最后一个嵌入式 SQL 语句是否成功完成。值 0 表示最后一个嵌入式 SQL 语句是成功的。0 以外的值表示警告或错误。

来源[http://msdn.microsoft.com/en-us/library/aa225200(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa225200(v=sql.80).aspx)

不同的 SQLCODE 值列表：http: [//www.caliberdt.com/tips/sqlcode.htm](http://www.caliberdt.com/tips/sqlcode.htm)

（我使用了 MSSQL Server，但 SQLCODE 是每个 SQL 引擎都可用的标准）

# c# - 网络中的主机 IP 范围

> ID：10408772
> 
> 赞同：2
> 
> 时间：2012-05-02T06:30:53.600
> 
> 标签：c#, network-programming

我能够以编程方式获得`IP address`和。`Subnet Mask`有没有办法我们可以使用这两个信息生成所有可寻址的主机 IP？

我只是想`Ping Sweep`为我的应用程序开发一个简单的模块。

谢谢。

PS：我使用的是 C# .NET 3.5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T06:36:22.487

计算第一个和最后一个主机 IP 地址，然后依次迭代它们。第一个 IP 地址是`(address & mask) + 1`. 最后一个是`(address | ~mask) - 1`。

因此，如果网络为`192.168.132.0`且网络掩码为`255.255.255.0`，则第一个符合条件的主机 IP 为：

```
(address & mask) + 1
(192.168.132.0 & 255.255.255.0) + 1
192.168.132.0 + 1
192.168.132.1 
```

最后一个符合条件的主机 IP 是：

```
(address | ~mask) - 1
(192.168.132.0 | ~(255.255.255.0)) - 1
(192.168.1.32.0 | (0.0.0.255)) - 1
192.168.132.255 - 1
192.168.132.254 
```

所以有效的主机地址是`192.168.132.1`通过`192.168.132.254`包容的。

# css - 验证 IE 特定的 CSS

> ID：10408776
> 
> 赞同：0
> 
> 时间：2012-05-02T06:31:24.990
> 
> 标签：css, internet-explorer

我为一个站点继承了以下 CSS，但我不知道它是否有任何用处。如果 IE 版本小于 8，它会作为 IE 特定包含在内。所以我的猜测是它试图处理 IE < 8 的 PNG。但它是否真的这样做我不知道。

此外，一些机器人正在尝试跟踪链接`/Content/','').replace('`，我认为这就是他们如何阅读其中包含的行`replace`。我无法判断它是机器人未能读取此 CSS 还是该 CSS 是垃圾。

如果有人可以请告知这个 CSS 是否有效和有用。谢谢。

```
* html #nav li { z-index: expression( runtimeStyle.zIndex = 1, this == parentNode.firstChild ? (className += " first-child") : 0 );}
* html .tabs-container .t{
    background-position:-9999px -9999px;
    filter: progid:dximagetransform.microsoft.alphaimageloader(src='images/bg-tabs-container-t.png', sizingmethod='crop');
}
* html .tabs-container .c {
    background-position:-9999px -9999px;
    filter: progid:dximagetransform.microsoft.alphaimageloader(src='images/bg-tabs-container-c.png', sizingmethod='scale');
}
* html .tabs-container .b {
    background-position:-9999px -9999px;
    filter: progid:dximagetransform.microsoft.alphaimageloader(src='images/bg-tabs-container-b.png', sizingmethod='crop');
}
* html .png{
behavior: expression((this.runtimeStyle.behavior="none")&&(this.pngSet?this.pngSet=true:(this.nodeName == "IMG" && this.src.toLowerCase().indexOf('.png')>-1?(this.runtimeStyle.backgroundImage = "none",
this.runtimeStyle.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + this.src + "', sizingMethod='image')",
this.src = "images/transparent.gif"):(this.origBg = this.origBg? this.origBg :this.currentStyle.backgroundImage.toString().replace('url("','').replace('")',''),
this.runtimeStyle.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='" + this.origBg + "', sizingMethod='crop')",
this.runtimeStyle.backgroundImage = "none")),this.pngSet=true));}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:41:16.850

它无效，但它可能有用。一些 CSS hack 需要无效的 CSS 来在特定浏览器上强制执行特定行为，同时保持其他人不变。

如果删除它有什么变化吗？如果没有，那就没用了。:)

It seems to me that this CSS is to allow transparent PNG images. I think those were not supported in IE6\. So if you still need to support IE6, you might still need this, but I wouldn't.

# python - How would I go about building an API converter?

> ID：10408777
> 
> 赞同：2
> 
> 时间：2012-05-02T06:31:28.530
> 
> 标签：python, api, serialization, xml-serialization, tastypie

I have multiple different APIs with different schemas serialised in XML or JSON which I need to output as a standardised schema.

Main features needed:

*   **Serialisation to XML and JSON**
*   **Authentication**
    *   I.e.: can't get/set data unless you have the correct user+pass
*   **Role/Scope limitation**
    *   I.e.: you can't access everything in our database, only what your role allows for
*   **Get/set (conversion) between different schemas**
    *   I.e.: No matter the input API, you can get it formatted in whichever output API you request

* * *

Or to put it visually:

Server1 >[send as SOAP 1.1]>[My Server]>[Server3 receives as XML in Server3 schema]

Server3>[Send as XML]>[My Server]>[Server1 receives as SOAP 1.1 in Server1 schema]

* * *

Or to put it programmically:

```
id=MyServer.read.SOAP[Server1.schema](Server1).id
MyServer.send.XML[Server2.schema](data_get(id), Server2) 
```

* * *

It would need to store all received data in a Model (database) so that read is available on-demand.

Is this the sort of problem [Slumber](http://slumber.in/) with [TastyPie](http://tastypieapi.org/) would be best for?

Or are there a different libraries you'd recommend?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:15:11.437

这比看起来更难，原因有两个：1）SOAP 和 REST 是不同的范例（基于消息传递 v 的资源），所以有些东西不会有直接的映射，2）如果涉及任何 API，则需要内置可维护性改变。

建立一个中间层服务来进行重新路由和访问控制绝对是有意义的。TastyPie 和 Slumber 有助于创建其余 API 本身，但您似乎还想同时公开一个 SOAP API。因此，您可能需要将 pysimplesoap 或 SOAPy 之类的东西放到中间层的公共数据结构上。（如果你能在离开的路上摆脱 SOAP，你的生活会更轻松:)。）。

如果所有后端服务的用户群都相同，则用户名密码可能仍然有意义，但如果不同的人对不同的服务拥有不同的权限，那么最好将 oAuth 之类的东西放在 oAuth 库中，然后跟踪每个用户独立的权利。

# sql - SQL SMO exception causes finally block to be skipped?

> ID：10408781
> 
> 赞同：0
> 
> 时间：2012-05-02T06:31:48.083
> 
> 标签：sql, try-catch, smo, finally

I created a VS2010 Windows service project. In it I invoke the method Microsoft.SqlServer.Management.Smo.Database.ExecuteWithResults(expression). In my scenario the expression contains invalid SQL, so the call fails with an exception as expected.

What's not expected is that the method is invoked within a try/finally block, but the finally block is NEVER executed:

```
try { database.ExecuteWithResults(invalid-sql) } 
finally { // code here is NOT executed } 
```

However, if I change it to a try/catch/finally block, both the catch and finally code is invoked.

```
try { database.ExecuteWithResults(invalid-sql) } 
catch(Exception) { // code here is executed fine }
finally { // as is this code } 
```

Am I missing something here? Shouldn't a finally block always get executed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:44:53.897

在 Visual Studio 中，转到调试 | 异常...，您可以尝试检查不同级别的异常以“抛出”。在我只看到某些 3rd 方 win32 dll 发生这种情况之前，可以通过在该对话框中检查更多异常类型来捕获它们。

# maven - 如何创建maven模块化项目

> ID：10408782
> 
> 赞同：0
> 
> 时间：2012-05-02T06:31:53.147
> 
> 标签：maven, maven-plugin, maven-3

我想创建 Maven 多模块项目，但它不应该像普通的模块项目。我的要求是将 web 项目分成许多部分和一些模块内容公共页面，在构建项目时需要创建许多 web 战争文件。

有这种需求的maven插件吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:13:50.100

根据您需要创建多少战争文件，您可以使用[覆盖](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)来合并公共页面。如果每次战争都有一个模块是可以的，这将起作用。

否则，我建议使用不同的[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)来创建每个不同的战争。然后，您将在每次战争中运行一次构建。

# android - 如何在 Android 的 PostgreSQL 服务器中检查用户名和密码？

> ID：10408784
> 
> 赞同：0
> 
> 时间：2012-05-02T06:31:57.833
> 
> 标签：android, postgresql, android-intent

我正在使用 Android 2.2 API。我想知道如何连接到 PostgreSQL 数据库服务器。

我是新手，所以没有想法，所以请帮助我提供一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:19:57.217

您通常不直接连接到数据库。为了达到你想要的结果，你可以做一个 RESTful 请求。

这意味着，将 JSON 字符串或 xml 文件发送到服务器（您可以使用 php、ruby 等进行编程）

我不会给你示例代码，因为在简单的谷歌搜索“android restful login” [示例教程上有大量代码](http://timewasted.net/?p=127)

该过程通常是：

在 android 设备上输入登录凭据 -> 向服务器发送 post 请求 -> 验证数据库的凭据（在这种情况下为 postgres） -> 发送验证 -> android 设备在验证时采取行动（通常通过加载新活动作为结果，如果已登录成功进入）

# ios - 核心图形坐标系

> ID：10408786
> 
> 赞同：10
> 
> 时间：2012-05-02T06:32:00.940
> 
> 标签：ios, uiview, core-graphics, quartz-graphics

覆盖时`drawRect`，我发现那里的坐标使用 0,0 作为左上角。

但是 Apple UIView 编程指南是这样说的：

> 一些 iOS 技术定义了默认坐标系，其原点和方向与 UIKit 使用的不同。例如，Core Graphics 和 OpenGL ES 使用坐标系，其原点位于视图或窗口的左下角，并且其 y 轴相对于屏幕指向上方。

我很困惑; 当他们在这里提到 Core Graphics 时，他们在谈论与 Quartz 不同的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T06:42:02.977

本文档中的“核心图形”是指“石英”，是的。这只是过于简单化了。

当您自己创建时`CGContext`，其坐标系的原点位于左下角。当 UIKit 在`CGContext`视图中创建用于绘图时，它会在调用`-drawRect:`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T06:44:10.213

就坐标而言，iOS 上的 Core Graphics 和 Quartz 是一回事。[iOS 技术指南](http://developer.apple.com/library/ios/documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html#//apple_ref/doc/uid/TP40007898-CH9-SW5)是这样说的：

> 核心图形（也称为 Quartz）...
> 
> Core Graphics 框架 (CoreGraphics.framework) 包含 Quartz 2D 绘图 API 的接口。Quartz 与 Mac OS X 中使用的基于矢量的高级绘图引擎相同。

区别在于，从技术上讲，Quartz 是技术或机制，而“Core Graphics”是框架的名称。（当然，在 Mac OS 上，实际上有一个“Quartz”框架，它只是一个保护伞。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-15T15:25:45.133

为了其他人找到这个线程的利益：

这里有坐标系的完整解释：[Coordinate Systems in Cocoa](https://developer.apple.com/library/ios/documentation/General/Conceptual/Devpedia-CocoaApp/CoordinateSystem.html)

它们不同并不完全有帮助。有一些方法可以在您的应用程序中的各个视图级别的坐标系之间进行转换！例如，这会在缩放图像的可见屏幕中找到它在 (20,20) 处的点的坐标。结果与缩放图像的原点相关，现在可能在空间中很远。

```
croppingFrame.origin = [self convertPoint:CGPointMake(20.0, 20.0) fromCoordinateSpace:(self.window.screen.fixedCoordinateSpace)]; 
```

# silverlight - 将 VisualStateManager 应用于 ControlTemplate 和 Content

> ID：10408788
> 
> 赞同：0
> 
> 时间：2012-05-02T06:32:08.603
> 
> 标签：silverlight, visualstatemanager

我使用样式中的 ControlTemplate 重新设置了按钮的样式，其中包含将背景反转为黑色和前景反转为白色的 VisualStateManager MouseOver 状态。

然后我使用这个样式按钮来承载一个 Path 对象，其 Fill 属性设置为 Black。

当触发鼠标悬停状态时，如何使包含在按钮内容中的 Path 对象的 Fill 属性更改为白色，而无需将 Path 移动到 ControlTemplate 本身，这意味着为每个按钮创建单独的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:55:15.317

您的填充超出了`Button`. 我看到两种方法来处理这个问题：

i) 将您的内部`Path`（`Button`可能就`Grid`在.`Border x:Name="Background"``ControlTemplate TargetType="Button"``x:Name``Button`

ii) 使用您`Path`的`Button`内容，然后为此`Button`内容添加专用的视觉状态管理器。您可能会使用`i:EventTrigger EventName="Click"`您的内容（[请参阅此示例](http://wordwalkingstick.com/silverlightbiggestbox/#/sample/packedxaml/blend+interactions-gotostate+action+and+visualstatemanager)）。

当您想`Path`对本质上相同的按钮使用不同的视觉效果时，您不得不使用这些替代方案中的任何一个来违反 DRY 原则。（制作自定义控件是最终的解决方案，但在这里您将失去速度和短期便利的好处）。

以下示例使用选项 (i)，如下[所示](http://www.flickr.com/photos/wilhite/7645847590/in/photostream/)：

![违反 DRY 原则的基于矢量的按钮](../Images/ea5438544220f87761bc9adf2339d5d8.png)

和这个：

```
<UserControl x:Class="rasx.Buttons.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:vsm="clr-namespace:System.Windows;assembly=System.Windows"
    d:DesignHeight="300" d:DesignWidth="400">
    <UserControl.Resources>
        <ControlTemplate x:Key="ButterflyPathTemplate" TargetType="ContentControl">
            <Canvas x:Name="BackgroundCanvas"
                Width="140" Height="90">
                <!--http://www.thexamlproject.com/#/artwork/437-->
                <!--Butterfly:-->
                <Path
                    Data="F1 M 133.242,3.82999C 133.103,2.12811 130.674,0.701721 129.535,0.36969C 109.54,-5.44736 77.5898,30.2498 70.3398,38.7362L 70.3606,38.386C 70.3763,38.2512 70.3841,38.1152 70.3841,37.9765C 70.3841,35.8977 68.6992,34.2134 66.621,34.2134C 64.5436,34.2134 62.86,35.8977 62.86,37.9765C 62.86,38.1152 62.8691,38.2512 62.8835,38.386L 62.9036,38.7362C 55.6529,30.2498 23.7012,-5.44736 3.70638,0.36969C 2.56775,0.701721 0.137329,2.12689 0,3.82999C -0.330811,7.9361 1.14774,11.3326 3.84241,13.9817C 14.5253,24.4817 11.093,34.8846 14.0865,41.6177C 15.8437,45.5721 28.8476,46.5057 25.9505,47.5474C -1.51242,57.4354 31.4427,94.563 46.8196,85.3365C 52.6581,81.8339 62.7916,64.5942 64.2238,62.1269L 64.916,74.3352C 64.916,75.2766 65.6784,76.0396 66.6197,76.0396C 67.5625,76.0396 68.3241,75.2766 68.3241,74.3352L 69.0169,62.1269C 70.4478,64.5942 80.582,81.8339 86.4205,85.3365C 101.799,94.563 134.754,57.4354 107.292,47.5474C 104.393,46.5057 117.397,45.5721 119.155,41.6177C 122.147,34.8846 118.715,24.4803 129.398,13.9817C 132.092,11.3326 133.573,7.93475 133.242,3.82999 Z "
                    Fill="{TemplateBinding Foreground}"
                    Stretch="Uniform"
                    Width="133.334" Height="87.0643"
                    />
            </Canvas>
        </ControlTemplate>
        <ControlTemplate x:Key="ButterflyPathButtonTemplate" TargetType="Button">
            <Grid>
                <vsm:VisualStateManager.VisualStateGroups>
                    <vsm:VisualStateGroup x:Name="CommonStates">
                        <vsm:VisualState x:Name="Normal">
                        </vsm:VisualState>
                        <vsm:VisualState x:Name="MouseOver">
                            <Storyboard>
                                <ColorAnimation
                                    Duration="0"
                                    Storyboard.TargetName="BackgroundContent"
                                    Storyboard.TargetProperty="(Foreground).(SolidColorBrush.Color)"
                                    To="Red"
                                    />
                                <ColorAnimation
                                    Duration="0"
                                    Storyboard.TargetName="ContentPresenter"
                                    Storyboard.TargetProperty="(Foreground).(SolidColorBrush.Color)"
                                    To="Red"
                                    />
                            </Storyboard>
                        </vsm:VisualState>
                        <vsm:VisualState x:Name="Pressed">
                            <Storyboard>
                                <ColorAnimation
                                    Duration="0"
                                    Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)"
                                    Storyboard.TargetName="Background"
                                    To="Red"
                                    />
                                <ColorAnimation
                                    Duration="0"
                                    Storyboard.TargetName="BackgroundContent"
                                    Storyboard.TargetProperty="(Foreground).(SolidColorBrush.Color)"
                                    To="White"
                                    />
                                <ColorAnimation
                                    Duration="0"
                                    Storyboard.TargetName="ContentPresenter"
                                    Storyboard.TargetProperty="(Foreground).(SolidColorBrush.Color)"
                                    To="White"
                                    />
                            </Storyboard>
                        </vsm:VisualState>
                        <vsm:VisualState x:Name="Disabled">
                            <Storyboard>
                                <ColorAnimation
                                    Duration="0"
                                    Storyboard.TargetName="BackgroundContent"
                                    Storyboard.TargetProperty="(Foreground).(SolidColorBrush.Color)"
                                    To="Gray"
                                    />
                                <ColorAnimation
                                    Duration="0"
                                    Storyboard.TargetName="ContentPresenter"
                                    Storyboard.TargetProperty="(Foreground).(SolidColorBrush.Color)"
                                    To="Gray"
                                    />
                            </Storyboard>
                        </vsm:VisualState>
                    </vsm:VisualStateGroup>
                    <vsm:VisualStateGroup x:Name="FocusStates">
                        <vsm:VisualState x:Name="Focused">
                        </vsm:VisualState>
                        <vsm:VisualState x:Name="Unfocused" />
                    </vsm:VisualStateGroup>
                </vsm:VisualStateManager.VisualStateGroups>
                <Border
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}">
                    <Grid x:Name="Background"
                        Background="Transparent">
                        <!-- TODO: build custom control with BackgroundContentTemplate property needed? -->
                        <ContentControl x:Name="BackgroundContent"
                            Foreground="{TemplateBinding Foreground}"
                            Template="{StaticResource ButterflyPathTemplate}" Background="Black"
                            />
                    </Grid>
                </Border>
                <!--Default ContentPresenter changed to TextBlock:-->
                <TextBlock x:Name="ContentPresenter"
                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                    Margin="{TemplateBinding Padding}"
                    Text="{TemplateBinding Content}"
                    />
                <Rectangle x:Name="DisabledVisualElement"
                    IsHitTestVisible="false"
                    Opacity="0"
                    />
                <Rectangle x:Name="FocusVisualElement"
                    IsHitTestVisible="false"
                    Opacity="0"
                    />
            </Grid>
        </ControlTemplate>
        <Style x:Key="VectorButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Foreground" Value="Green" />
            <Setter Property="Padding" Value="0,90,0,0" />
            <Setter Property="Template" Value="{StaticResource ButterflyPathButtonTemplate}" />
        </Style>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Button
            Content="Yes"
            Style="{StaticResource VectorButtonStyle}"
            />
        <Button Grid.Row="1"
            Content="Nope"
            IsEnabled="False"
            Style="{StaticResource VectorButtonStyle}"
            />
    </Grid>
</UserControl> 
```

# matlab - matlab fminunc 不退出（无限期运行）

> ID：10408791
> 
> 赞同：0
> 
> 时间：2012-05-02T06:32:24.660
> 
> 标签：matlab, machine-learning, regression

一段时间以来，我一直在尝试在 matlab 中实现逻辑回归。我已经这样做了，但由于我不知道的原因，我无法使用 fminunc 执行单次迭代。当它调用函数时，程序只是无限期地进入等待模式。代码有问题，还是我的数据集很大？

```
function [theta J] = logisticReg(initial_theta, X, y, lambda, iter)

% Set Options
options = optimset('GradObj', 'on', 'MaxIter', iter);

% Optimize
[theta, J, exit_flag] = fminunc(@(t)(costFunctionReg(t, X, y, lambda)), initial_theta, options);

end 
```

在哪里

```
X is a [676,6251] matrix
y is a [676,1] vector
lambda = 1
initial_theta is [6251, 1] vector of zeros
iter = 1 
```

任何“指向正确的方向”将不胜感激！PS，我能够运行 costFunctionReg。所以我假设它是这个功能。

根据要求，costFunctionReg

```
function [J, grad] = costFunctionReg(theta, X, y, lambda)

m = length(y); % number of training examples

J = 0;
grad = zeros(size(theta));

hyp = sigmoid(X * theta);
cost_reg = (lambda / (2*m)) * sum(theta(2:end).^2);

J = 1/m * sum((-y .* log(hyp)) - ((1-y) .* log(1-hyp))) + cost_reg;

grad(1) = 1/m * sum((hyp - y)' * X(:,1));
grad(2:end) = (1/m * ((hyp - y)' * X(:,2:end))) + (lambda/m)*theta(2:end)'; 
```

回答@Rasman 问题：

```
Cost at initial theta: NaN
press any key to continue 
Performing Logistic Regrestion
Error using sfminbx (line 28)
Objective function is undefined at initial point. fminunc cannot continue.

Error in fminunc (line 406)
   [x,FVAL,~,EXITFLAG,OUTPUT,GRAD,HESSIAN] = sfminbx(funfcn,x,l,u, ...

Error in logisticReg (line 8)
[theta, J, exit_flag] = fminunc(@(t)(costFunctionReg(t, X, y, lambda)),
initial_theta, options);

Error in main (line 40)
[theta J] = logisticReg(initial_theta, X, y, lambda, iter); 
```

第一行是我使用 initial_theta 运行 costFunctionReg。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:08:37.027

您可能已经尝试搜索此链接： http: [//www.mathworks.com/matlabcentral/newsreader/view_thread/290418](http://www.mathworks.com/matlabcentral/newsreader/view_thread/290418)

一般弧（我已从上述站点复制并粘贴/编辑文本）是：

错误消息表明您的目标函数“obj”在点 x0 处求值时要么出错，要么返回无效值，例如 Inf、NaN 或复数。

您可能希望在调用 fmincon（或在您的情况下为 fminunc）之前在 x0 处评估您的函数，以查看它是否定义明确：类似于

```
 costFunctionReg(initial_theta) 
```

如果您的函数 (costFunctionReg) 返回一个复值结果，则使用 real() 将其剥离。

# java - Android SDK 和 Eclipse 虚拟设备未启动

> ID：10408792
> 
> 赞同：0
> 
> 时间：2012-05-02T06:32:24.827
> 
> 标签：java, android, eclipse, sdk

我刚刚用 andriod sdk 安装了 eclipse。我已完成所有建议的步骤。当我尝试启动模拟器寡妇返回模拟器手臂停止工作时，任何人都可以帮助我解决这个问题我无法测试我的 .apk 没有它，因为我没有安卓设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:10:12.917

您是否创建了虚拟设备或模拟器。我猜你没有。启动 AVD 管理器，您可以在“android sdk 管理器”所在的同一文件夹中找到它。选择创建新选项并创建一个模拟器。这将创建模拟器，您在 eclipse 上编写的应用程序将在此模拟器上运行。注意：第一次运行模拟器需要一些时间。所以不要假设它不起作用。

# java - java中的echo-server和client-server聊天应用程序有什么区别？

> ID：10408798
> 
> 赞同：3
> 
> 时间：2012-05-02T06:32:39.997
> 
> 标签：java, client-server

另外我想知道单线程和多线程客户端服务器之间的主要区别是什么？我想创建一个客户端服务器聊天应用程序。

服务器表单包括： 1 Textarea（文本区域）（显示文本） 1 sendarea（文本区域）（键入要发送的文本） 1 个发送按钮（发送在 sendarea 中键入的文本）它发送到客户端 1 个退出按钮（关闭申请）

客户端表单包括： 1 Textarea（文本区域）（显示文本） 1 sendarea（文本区域）（键入要发送的文本） 1 个发送按钮（发送在 sendarea 中键入的文本）它发送到服务器 1 个退出按钮（关闭申请）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:42:45.343

单线程意味着 1 个线程。多线程意味着多线程。就您的聊天服务器而言，这意味着：

如果您有一个单线程服务器，则只能与服务器建立 1 个连接。多线程将允许您在每次新聊天客户端连接时创建一个新线程，并发出自己的输入/输出流来发送和接收聊天消息。

回显服务器只会从连接的 1 个客户端回显消息，而聊天服务器将允许您向其他用户广播消息并允许他们向您的客户端发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:42:53.400

这听起来很像家庭作业，所以如果是，你应该这样标记。

回显服务器通常是一个应用程序，用于测试客户端和服务器之间的连接是否成功。它由一个服务器组成，该服务器发回客户端发送的任何文本。

客户端-服务器是任何环境，其中您有一个主节点（服务器），其他节点（客户端）连接到该主节点（服务器），通常是为了请求一些信息。

单线程服务器是使用 1 个主线程来处理所有请求的服务器。通常这些用于处理非常短的请求，例如同步计算机时钟。这些被称为迭代服务器。

多线程服务器是每个客户端使用一个或多个线程的服务器。大多数应用程序服务器通常都是这种情况，并且有利于可伸缩性。它还允许服务器在任何一个时间点处理多个客户端。这些被称为并发服务器。

我建议你看看[这个](http://docs.oracle.com/javase/tutorial/networking/sockets/)Oracle 教程。它应该让你开始并指出你正确的方向。

# android - KSOAP2 工具

> ID：10408799
> 
> 赞同：0
> 
> 时间：2012-05-02T06:32:40.983
> 
> 标签：android, ksoap2

我在我的项目中使用kso​​ap2（ksoap2-android-assembly-2.4-jar-with-dependencies.jar），一切正常，但突然代码在我实现这个（ksoap2）接口的每个类中停止工作我得到一个错误，这里是 LogCat 结果显示：

```
05-02 06:21:45.969: I/System.out(345): debugger has settled (1341)
05-02 06:21:46.234: I/dalvikvm(345): Failed resolving Lbikorot/Main/Entities/Users; interface 170 'Lorg/ksoap2/serialization/KvmSerializable;'
05-02 06:21:46.234: W/dalvikvm(345): Link of class 'Lbikorot/Main/Entities/Users;' failed
05-02 06:21:46.245: I/dalvikvm(345): Failed resolving Lbikorot/Main/Entities/Users; interface 170 'Lorg/ksoap2/serialization/KvmSerializable;'
05-02 06:21:46.245: W/dalvikvm(345): Link of class 'Lbikorot/Main/Entities/Users;' failed
05-02 06:21:46.245: W/dalvikvm(345): VFY: unable to resolve instance field 284
05-02 06:21:46.245: D/dalvikvm(345): VFY: replacing opcode 0x54 at 0x0017
05-02 06:21:46.245: D/dalvikvm(345): VFY: dead code 0x0019-001e in Lbikorot/Main/LogInActivity;.Login ()V
05-02 06:21:46.264: I/dalvikvm(345): Failed resolving Lbikorot/Main/Entities/Users; interface 170 'Lorg/ksoap2/serialization/KvmSerializable;'
05-02 06:21:46.264: W/dalvikvm(345): Link of class 'Lbikorot/Main/Entities/Users;' failed
05-02 06:21:46.264: E/dalvikvm(345): Could not find class 'bikorot.Main.Entities.Users', referenced from method global.utilities.GlobalUtil.<init>
05-02 06:21:46.264: W/dalvikvm(345): VFY: unable to resolve new-instance 90 (Lbikorot/Main/Entities/Users;) in Lglobal/utilities/GlobalUtil;
05-02 06:21:46.264: D/dalvikvm(345): VFY: replacing opcode 0x22 at 0x0009
05-02 06:21:46.264: D/dalvikvm(345): VFY: dead code 0x000b-0048 in Lglobal/utilities/GlobalUtil;.<init> ()V 
```

请帮忙！！！！！！！

好的，我正在使用 HttpTransportSE (ksoap2 2.6.4)，但是当它遇到实现 ksoap 接口的调用时，代码仍然崩溃，这是此类之一的代码：

```
 package bikorot.Main.Entities;

   import java.util.Hashtable;
   import org.ksoap2.serialization.KvmSerializable;
   import org.ksoap2.serialization.PropertyInfo;

   public class Users implements KvmSerializable {

  public int kod;
  public String name;
  public String password;
  public int kod_users_group;
  public boolean pail;
  public String edu_Bikoret;

  public Users()
  { }

  public Users(int kod, String name, String password)
  {
      this.kod = kod;
      this.name = name;
      this.password = password;
  }

  @Override
public int getPropertyCount() {
    return 6;
}
  @Override
public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch (index) {
    case 0:
        info.type = PropertyInfo.INTEGER_CLASS;
        info.name = "kod";
        break;
    case 1:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "name";
        break;
    case 2:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "password";
        break;
    case 3:
        info.type = PropertyInfo.INTEGER_CLASS;
        info.name = "kod_users_group";
        break;
    case 4:
        info.type = PropertyInfo.BOOLEAN_CLASS;
        info.name = "pail";
        break;
    case 5:
        info.type = PropertyInfo.STRING_CLASS;
        info.name = "edu_Bikoret";
        break;

    default:
        break;
    }
}

  @Override
public void setProperty(int index, Object value) {
    switch (index) {
    case 0:
        kod = Integer.parseInt(value.toString());
        break;
    case 1:
        name = value.toString();
        break;
    case 2:
        password = value.toString();
    case 3:
        kod_users_group = Integer.parseInt(value.toString());
        break;
    case 4:
        pail =Boolean.parseBoolean( value.toString());
    case 5:
        edu_Bikoret = value.toString();
        break;

    default:
        break;
    }
}

  @Override
public Object getProperty(int arg0) {

    switch (arg0) {
    case 0:
        return kod;
    case 1:
        return name;
    case 2:
        return password;
    case 3:
        return kod_users_group;
    case 4:
        return pail;
    case 5:
        return edu_Bikoret;
    }

    return null;
        }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:13:43.833

我认为您需要将 getter 和 setter 添加到`Users`类中。

# oauth - 如何在 Mac OS X 上从浏览器打开应用程序？

> ID：10408801
> 
> 赞同：3
> 
> 时间：2012-05-02T06:32:45.260
> 
> 标签：oauth, callback, openurl

我正在做一个 Twitter Mac OS X 应用程序，需要使用 OAuth1.0。在请求 oauth/access_token 接口时，是否可以`oauth_callback`为此目的使用该参数？

换句话说，如何在 Max OS X 上从浏览器打开应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T08:00:55.627

答案很明显：注册自定义 URL 方案

[http://techblog.amphora-research.com/2010/03/registering-url-handlers-in-macos-x-cocoa-apps/](http://techblog.amphora-research.com/2010/03/registering-url-handlers-in-macos-x-cocoa-apps/)

我的意思是说：

```
 1\. Register the "twittercallbackformyapp://"
    scheme using the link above
 2\. Set this callback in the 'access_token'
    HTTP request (oauth_callback parameter)
 3\. Write the routine (handleOpenURL) to handle
    the 'twittercallbackformyapp://oauth_access_token=...&oauth_token_secret=...'
    which will be called after you register the handler 
```

关于 oauth 的许多问题都在这里解决了：[http ://code.google.com/p/twitcurl/](http://code.google.com/p/twitcurl/)

上面的库使用 curl。您可以使用 Cocoa 原生网络 API。

附言

下面是关于如何注册 URL 处理程序的另一个描述：

[http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

它适用于 iPhone，但对于 Mac，模式是相同的：将 URL 添加到应用程序的 .plist 文件中。

# .net - 如何在不使用第三方实用程序或工具的情况下将文件上传和下载到 .NET 中的大型机？

> ID：10408807
> 
> 赞同：0
> 
> 时间：2012-05-02T06:33:25.497
> 
> 标签：.net, upload, ftp, download, mainframe

我在 .NET 中为大型机 FTP（如下载和上传文件）使用第三方实用程序。有没有办法在没有任何单独的实用程序的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:38:46.527

如果你想要一个纯粹的 .net 自由，那么在 msdn 上你可以阅读：

> .NET Framework 通过 FtpWebRequest 和 FtpWebResponse 类为 FTP 协议提供全面支持。这些类派生自 WebRequest 和 WebResponse。在大多数情况下，WebRequest 和 WebResponse 类提供了发出请求所需的一切，但如果您需要访问作为属性公开的 FTP 特定功能，您可以将这些类强制转换为 FtpWebRequest 或 FtpWebResponse。

参考[这里](http://msdn.microsoft.com/en-us/library/ms229718.aspx)

**编辑**

我会读到这个：

[一个 FtpClient 类和 WinForm 控件](http://www.blackbeltcoder.com/Articles/client/an-ftpclient-class-and-winform-control)

# c# - 使用本地 iis 服务器 (7.5) 调试 asp.net Web 应用程序时未命中断点

> ID：10408810
> 
> 赞同：1
> 
> 时间：2012-05-02T06:33:50.550
> 
> 标签：c#, asp.net

使用本地 IIS 服务器时没有命中断点。它与 Visual Studio 的内置调试服务器完美配合。我已将该网站添加到 IIS 并启动它。每次它显示“没有为此文档加载任何符号”。请帮忙。

关于，JosephJCKochi

# javascript - 用 jQuery 中的 TAB 键代码替换 Enter 键代码

> ID：10408811
> 
> 赞同：5
> 
> 时间：2012-05-02T06:33:53.597
> 
> 标签：javascript, jquery, asp.net

`Enter`我有一个用`TAB`键替换的javascript脚本：

```
function ReplaceEnterWithTab() { if (event.keyCode == 13) event.keyCode = 9; return false; } 
```

我这样使用它：

```
txt.Attributes.Add("OnKeyDown", "ReplaceEnterWithTab();"); 
```

这段代码很好用。现在我想用 jQuery 开发一个不需要添加`OnKeyDown`属性的脚本。请考虑这个示例页面：

```
<form id="form1" runat="server">
<div>
    <asp:TextBox ID="TextBox1" runat="server" CssClass="EntTab"></asp:TextBox>
    <br />
    <br />
    <asp:TextBox ID="TextBox2" runat="server" CssClass="EntTab"></asp:TextBox>
    <br />
    <br />
    <asp:DropDownList ID="DropDownList1" runat="server" CssClass="EntTab">
        <asp:ListItem>1</asp:ListItem>
        <asp:ListItem>2</asp:ListItem>
    </asp:DropDownList>
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
</div>
</form> 
```

我写了这段代码：

```
$(document).ready(function () {

        $('.EntTab').on('keydown', function (e) {
            if (e.keyCode == 13) e.keyCode = 9;
        });

    }); 
```

问题是当我按下`Enter`键时`TextBox1`，`Button1`导致页面回发。我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T06:39:49.117

尝试：

```
$(document).ready(function () {
    $(".EntTab").bind("keypress", function(e) {

        if (e.keyCode == 13) {
            var inps = $("input, select"); //add select too
            for (var x = 0; x < inps.length; x++) {
                if (inps[x] == this) {
                    while ((inps[x]).name == (inps[x + 1]).name) {
                    x++;
                    }
                    if ((x + 1) < inps.length) $(inps[x + 1]).focus();
                }
            }   e.preventDefault();
        }
    });
}); 
```

你是不是有这样的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:39:39.567

您忘记取消事件传播，添加`return false`到 keydown 回调：

```
$(document).ready(function () {
    $('.EntTab').on('keydown', function (e) {
        if (e.keyCode == 13) e.keyCode = 9;
        return false;
    });
}); 
```

此外，ASP.NET 中的 Button 标记默认情况下`UseSubmitBehavior` [将标志设置为 true](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.usesubmitbehavior.aspx)，这会导致按钮呈现为`input type="submit"`标记。尝试将其设置为 false，以获得类似以下答案中所述的行为：[使用 Javascript 更改在输入键按下时激活哪个提交](https://stackoverflow.com/a/382179/55209)

# lotus-notes - 使用 SSJS 将文件附加到笔记文档

> ID：10408812
> 
> 赞同：0
> 
> 时间：2012-05-02T06:33:55.857
> 
> 标签：lotus-notes, xpages, lotus-domino, lotus, xpages-ssjs

我正在尝试将文件附加到注释文档，但出现以下错误。

```
 var doc:NotesDocument = DS_EmpDetails.getDocument();
 var rtitem:NotesRichTextItem = doc.createRichTextItem("AttachmentField");
 var Attachment:String = "C:\\Users\\karthick_m\\Desktop\\PDFIcon.jpg"; 
 var emobj:NotesEmbeddedObject = rtitem.embedObject(NotesEmbeddedObject.EMBED_ATTACHMENT, "", Attachment, null);
 doc.save(); 
```

我收到以下错误..

```
 [TypeError] Exception occurred calling method NotesRichTextItem.embedObject(number, string, string, string) null 
```

提前致谢...

我的堆栈跟踪 **堆栈跟踪**

javax.faces.FacesException：执行 JavaScript 操作表达式 com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:102) com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210) com 时出错。 sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:96) com.ibm.xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250) com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java: 206) com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:189) com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:154) com.ibm.xsp.webapp.FacesServletEx.service( FacesServletEx.java:137) com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:86) com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:538) com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1140) com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:803) com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:758) com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:527) com.ibm。 domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1124) com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:513) com.ibm.domino.xsp.module。 nsf.NSFService.doService(NSFService.java:342) com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:304) com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service( LCD环境。java:261) com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:291) com.ibm.xsp.exception.EvaluationExceptionEx：执行 JavaScript 操作表达式 com.ibm.xsp 时出错。 binding.javascript.JavaScriptMethodBinding.invoke(JavaScriptMethodBinding.java:126) com.ibm.xsp.application.ActionListenerImpl.processAction(ActionListenerImpl.java:60) javax.faces.component.UICommand.broadcast(UICommand.java:324) com. ibm.xsp.component.UIEventHandler.broadcast(UIEventHandler.java:365) com.ibm.xsp.component.UIDataPanelBase.broadcast(UIDataPanelBase.java:400) com.ibm.xsp.component.UIViewRootEx.broadcast(UIViewRootEx.java:第1490章、InvokeApplicationPhase.execute(InvokeApplicationPhase.java:94) com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:210) com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:96) com.ibm。 xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250) com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:206) com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:189) com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:154) com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137) com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.爪哇：86）96) com.ibm.xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250) com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:206) com.ibm.xsp.webapp.FacesServletEx.serviceView( FacesServletEx.java:189) com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:154) com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137) com.ibm.xsp.webapp。 DesignerFacesServlet.service(DesignerFacesServlet.java:86)96) com.ibm.xsp.controller.FacesControllerImpl.execute(FacesControllerImpl.java:250) com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:206) com.ibm.xsp.webapp.FacesServletEx.serviceView( FacesServletEx.java:189) com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:154) com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137) com.ibm.xsp.webapp。 DesignerFacesServlet.service(DesignerFacesServlet.java:86)DesignerFacesServlet.service(DesignerFacesServlet.java:86)DesignerFacesServlet.service(DesignerFacesServlet.java:86)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T08:11:00.817

使用上传控件。您使用 SSJS 代码的方式仅适用于服务器上已经存在的文件 - 您没有上传它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:38:20.060

上面的错误消息可能是错误的，但它指出原因是“ritem”变量为空。你在你的代码中检查过这个吗？

```
if (!rtitem) throw new java.lang.Exception("Uh oh!"); 
```

# unix - 如何在不获取 nohup.out 的情况下使用 nohup 命令？

> ID：10408816
> 
> 赞同：381
> 
> 时间：2012-05-02T06:34:45.140
> 
> 标签：unix, jobs

我的 nohup 命令有问题。

当我运行我的工作时，我有很多数据。输出 nohup.out 变得太大，我的进程变慢。如何在不获取 nohup.out 的情况下运行此命令？

* * *

## 回答 #1

> 赞同：755
> 
> 时间：2012-05-02T06:42:31.310

该命令仅在输出将发送到终端`nohup`时才写入。`nohup.out`如果您已将命令的输出重定向到其他地方 - 包括`/dev/null`- 那就是它的位置。

```
 nohup command >/dev/null 2>&1   # doesn't create nohup.out 
```

如果你正在使用`nohup`，那可能意味着你想在后台运行命令，`&`方法是在整个事情的末尾放置另一个：

```
 nohup command >/dev/null 2>&1 & # runs in background, still doesn't create nohup.out 
```

在 Linux 上，运行作业`nohup`也会自动关闭其输入。在其他系统上，尤其是 BSD 和 macOS，情况并非如此，因此在后台运行时，您可能需要手动关闭输入。虽然关闭输入对 的创建与否没有影响`nohup.out`，但它避免了另一个问题：如果后台进程试图从标准输入中读取任何内容，它将暂停，等待您将其带回前台并输入内容。所以额外安全的版本看起来像这样：

```
nohup command </dev/null >/dev/null 2>&1 & # completely detached from terminal 
```

但是请注意，这不会阻止命令直接访问终端，也不会将其从 shell 的进程组中删除。如果您想执行后者，并且您正在运行 bash、ksh 或 zsh，则可以通过`disown`不带参数运行作为下一个命令来执行此操作。这将意味着后台进程不再与外壳“作业”相关联，并且不会有任何信号从外壳转发给它。（注意区别：`disown`ed 进程没有收到其父 shell 自动转发给它的信号 - 但没有`nohup`，它仍然会接收`HUP`通过其他方式发送的信号，例如手动`kill`命令。`nohup`'ed 进程忽略任何和所有`HUP`信号，不管它们是如何发送的。）

解释：

在 Unixy 系统中，每个输入源或输出目标都有一个与之关联的数字，称为“文件描述符”，或简称为“fd”。每个正在运行的程序（“进程”）都有自己的一组，当一个新进程启动时，其中三个已经打开：“标准输入”，即 fd 0，对进程开放，可以读取，而“标准输出”（fd 1）和“标准错误”（fd 2）是开放的，可以写入。如果您只是在终端窗口中运行命令，那么默认情况下，您键入的任何内容都会转到其标准输入，而其标准输出和标准错误都会发送到该窗口。

但是您可以在启动命令之前要求外壳程序更改任何或所有这些文件描述符指向的位置；这就是重定向 ( `<`, `<<`, `>`, `>>`) 和管道 ( `|`) 运算符所做的事情。

管道是其中最简单的...`command1 | command2`安排标准输出`command1`直接馈入`command2`. 这是一个非常方便的安排，导致了 UNIX 工具中的特定设计模式（并解释了标准错误的存在，它允许程序向用户发送消息，即使它的输出正在进入管道中的下一个程序） . 但是您只能将标准输出通过管道传输到标准输入；如果没有一些杂耍，您就无法将任何其他文件描述符发送到管道。

重定向运算符更友好，因为它们允许您指定要重定向的文件描述符。因此`0<infile`从名为 的文件中读取标准输入`infile`，同时`2>>logfile`将标准错误附加到名为 的文件的末尾`logfile`。如果不指定数字，则输入重定向默认为 fd 0（`<`与 相同`0<`），而输出重定向默认为 fd 1（`>`与 相同`1>`）。

此外，您可以将文件描述符组合在一起：`2>&1`意味着“在标准输出所在的任何地方发送标准错误”。这意味着您将获得一个输出流，其中包括标准输出和标准错误混合在一起，无法再将它们分开，但这也意味着您可以在管道中包含标准错误。

所以这个序列的`>/dev/null 2>&1`意思是“将标准输出发送到`/dev/null`”（这是一个特殊的设备，它只会丢弃你写给它的任何东西）“然后将标准错误发送到标准输出的任何地方”（我们刚刚确定是`/dev/null`）。基本上，“丢弃此命令写入任一文件描述符的任何内容”。

当`nohup`检测到它的标准错误和输出都没有连接到终端时，它不会费心去创建`nohup.out`，而是假设输出已经被重定向到用户想要它去的地方。

该`/dev/null`设备也可用于输入；如果您使用 运行命令`</dev/null`，则该命令从标准输入读取的任何尝试都将立即遇到文件结尾。请注意，合并语法在这里不会产生相同的效果；它仅适用于将文件描述符指向另一个在同一方向（输入或输出）打开的文件描述符。shell 会让你这样做`>/dev/null <&1`，但这最终会创建一个在输出流上打开输入文件描述符的进程，因此任何读取尝试都会触发致命的“无效文件描述符”错误，而不是仅仅命中文件结尾。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-05-22T18:59:45.357

```
nohup some_command > /dev/null 2>&1& 
```

这就是你需要做的！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-02T06:41:25.723

您是否尝试过重定向所有三个 I/O 流：

```
nohup ./yourprogram > foo.out 2> foo.err < /dev/null & 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-02T06:39:52.143

您可能想要使用[分离程序](http://inglorion.net/software/detach/)。您可以像使用它一样使用它，`nohup`但除非您告诉它，否则它不会产生输出日志。这是手册页：

```
NAME
       detach - run a command after detaching from the terminal

SYNOPSIS
       detach [options] [--] command [args]

       Forks  a  new process, detaches is from the terminal, and executes com‐
       mand with the specified arguments.

OPTIONS
       detach recognizes a couple of options, which are discussed below.   The
       special  option -- is used to signal that the rest of the arguments are
       the command and args to be passed to it.

       -e file
              Connect file to the standard error of the command.

       -f     Run in the foreground (do not fork).

       -i file
              Connect file to the standard input of the command.

       -o file
              Connect file to the standard output of the command.

       -p file
              Write the pid of the detached process to file.

EXAMPLE
       detach xterm

       Start an xterm that will not be closed when the current shell exits.

AUTHOR
       detach was written by Robbert Haarman.  See  http://inglorion.net/  for
       contact information. 
```

请注意，我与该程序的作者没有任何关系。我只是该程序的满意用户。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-14T14:42:21.367

以下命令将让您在后台运行某些东西而不会得到 nohup.out：

```
nohup command |tee & 
```

这样，您将能够在远程服务器上运行脚本时获得控制台输出： [![在此处输入图像描述](../Images/a698cc259293add08544ea039d690c6f.png)](https://i.stack.imgur.com/wYM8S.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-03-12T22:35:55.113

```
sudo bash -c "nohup /opt/viptel/viptel_bin/log.sh $* &> /dev/null"  & 
```

重定向 sudo 的输出会导致 sudo 重新请求密码，因此需要一种笨拙的机制来执行此变体。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-28T20:16:25.023

如果您面前的 mac/linux 上有 BASH shell，请尝试以下步骤以实际了解重定向：

创建一个名为 zz.sh 的 2 行脚本

```
#!/bin/bash
echo "Hello. This is a proper command"
junk_errorcommand 
```

*   echo 命令的输出进入 STDOUT 文件流（文件描述符 1）。
*   错误命令的输出进入 STDERR 文件流（文件描述符 2）

目前，只需执行脚本即可将 STDOUT 和 STDERR 发送到屏幕。

```
./zz.sh 
```

现在从标准重定向开始：

```
zz.sh > zfile.txt 
```

在上面，“echo”（STDOUT）进入 zfile.txt。而“错误”（STDERR）显示在屏幕上。

以上与以下相同：

```
zz.sh 1> zfile.txt 
```

现在您可以尝试相反的方法，并将“错误”STDERR 重定向到文件中。来自“echo”命令的 STDOUT 进入屏幕。

```
zz.sh 2> zfile.txt 
```

结合以上两个，你得到：

```
zz.sh 1> zfile.txt 2>&1 
```

解释：

*   首先，将 STDOUT 1 发送到 zfile.txt
*   然后，将 STDERR 2 发送到 STDOUT 1 本身（通过使用 &1 指针）。
*   因此，1 和 2 都进入同一个文件 (zfile.txt)

最终，您可以将整个内容打包到 **nohup 命令**中并在后台运行它：

```
nohup zz.sh 1> zfile.txt 2>&1& 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-17T16:39:31.327

您可以运行以下命令。

```
nohup <your command> & >  <outputfile> 2>&1 & 
```

例如，我在脚本中有一个 nohup 命令

```
./Runjob.sh > sparkConcuurent.out 2>&1 
```

# python - 在python中删除前导和尾随斜杠/

> ID：10408826
> 
> 赞同：83
> 
> 时间：2012-05-02T06:35:28.183
> 
> 标签：python, django, path, strip

我`request.path` 用来在 Django 中返回当前 URL，它正在返回 `/get/category`.

我需要它`get/category`（没有前导和尾随斜杠）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2012-05-02T06:37:32.487

```
>>> "/get/category".strip("/")
'get/category' 
```

`strip()`是这样做的正确方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-02T06:49:46.463

```
def remove_lead_and_trail_slash(s):
    if s.startswith('/'):
        s = s[1:]
    if s.endswith('/'):
        s = s[:-1]
    return s 
```

与 不同`str.strip()`，这保证最多删除每侧的一个斜线。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-02T06:56:02.410

另一个带有正则表达式的：

```
>>> import re
>>> s = "/get/category"
>>> re.sub("^/|/$", "", s)
'get/category' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-01T10:43:42.257

你可以试试：

`"/get/category".strip("/")`

# installation - NSIS 脚本是用什么语言编写的？

> ID：10408828
> 
> 赞同：3
> 
> 时间：2012-05-02T06:35:37.630
> 
> 标签：installation, nsis

**[NSIS](http://nsis.sourceforge.net/Main_Page)脚本是用什么语言编写的？**

它是 NSIS 自己的语言还是通用语言甚至是 Assembly 本身？它看起来对 Assembly 很熟悉。我在网站上查看过它是什么语言，但它没有解释它是什么语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T08:04:13.923

> NSIS 用于编写脚本的指令是 PHP 和程序集之间的一种交叉。

这就是手册要说的。脚本语言是 NSIS 独有的，我看不出将它与其他语言进行比较的意义。（NSIS 从基本的[Winamp 插件安装程序](http://web.archive.org/web/20000815054448/http://www.winamp.com/nsdn/pimp/)演变而来，更多历史可[在此处](http://www.1014.org/code/nullsoft/nsis/#history)获得）

几年前添加了[LogicLib](http://nsis.sourceforge.net/Include/LogicLib.nsh)，它添加了“高级”宏，因此您可以在没有 goto 的情况下执行基本的 If 和循环。调用函数和插件仍然需要将参数推送到堆栈 asm 样式。

该语言基本上具有三种类型的指令：

*   [预处理器](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#compcommands)（定义、包含和宏等），它们以`!`( `!if 1 > 0`)开头
*   [属性](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#instattribs)/属性：图标、版本信息等
*   [在安装/卸载期间执行的指令](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#instr)（指令放在函数和部分中）

安装程序 UI 由一个或多个[页面](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#pages)组成。每个页面都可以基于多个回调函数（Show、Leave 等）执行代码，但大多数指令在 instfiles 页面（带有进度条和日志窗口的页面）上执行 instfiles 页面执行所有部分中的代码。一个[部分](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#sections)基本上是用于将安装程序组织成不同部分的文件和说明的集合。如果安装程序包含一个组件页面，用户将获得一个列表，他们可以在其中选择要执行的部分。

可以[在源代码](http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Source/tokens.cpp?view=markup)中找到完整的指令列表（此列表不包括来自外部包含文件的插件和辅助宏）编译器 (makensis.exe) 验证这些指令（以及您包含的其他文件）并将其压缩为一个 blob附加到一个用 C 编写的小型 GUI 应用程序。这个小应用程序解释了这些指令......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T06:40:53.830

它是他们自己的“语言”，松散地基于汇编程序。

据我了解，它将其编译为本机代码，因此安装程序如此之小:)

# php - 使用 SIM 授权.net ARB

> ID：10408831
> 
> 赞同：3
> 
> 时间：2012-05-02T06:36:00.483
> 
> 标签：php, zend-framework, authorize.net

您好我想使用 Authorize.net SIM（服务器集成方法）创建一个 ARB 信用卡捕获页面。任何人都可以帮助我在zend框架中解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:09:20.660

你不能那样做。您需要直接访问 ARB API 以通过 ARB 设置订阅。您无法通过 SIM 卡进行操作。

# opengl - 无法使用 opengl 纹理加载 .png 图像

> ID：10408832
> 
> 赞同：-1
> 
> 时间：2012-05-02T06:36:07.650
> 
> 标签：opengl, graphics

```
#include <stdio.h>
#include <GL/gl.h>
#include <GL/glut.h>

#define KEY_ESCAPE 27

void display();
void keyboard(unsigned char,int,int);
GLuint LoadTextureRAW( const char * filename, int wrap );

int main(int argc, char **argv) {
    glutInit(&argc, argv);                                    
    glutInitDisplayMode(GLUT_RGB|GLUT_DOUBLE|GLUT_DEPTH );
    glutInitWindowSize(600,400);                  
    glutCreateWindow("Opengl Test");                              
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    glutMainLoop();
    return 0;
}
void display() {
    GLuint texture=LoadTextureRAW("ball.png",1);
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D,texture);
    glBegin( GL_QUADS );
    glTexCoord2d(0.0,0.0); glVertex2d(0.0,0.0);
    glTexCoord2d(1.0,0.0); glVertex2d(1.0,0.0);
    glTexCoord2d(1.0,1.0); glVertex2d(1.0,1.0);
    glTexCoord2d(0.0,1.0); glVertex2d(0.0,1.0);
    glEnd();
    glutSwapBuffers();    
}
// load a 256x256 RGB .RAW file as a texture
GLuint LoadTextureRAW( const char * filename, int wrap )
{
    GLuint texture;
    int width, height;
//    BYTE * data;
    int *data;
    FILE * file;

    // open texture data
    file = fopen( filename, "rb" );
    if ( file == NULL ) return 0;

    // allocate buffer
    width = 256;
    height = 256;
    data = (int*)malloc( width * height * 3 );

    // read texture data
    fread( data, width * height * 3, 1, file );
    fclose( file );

    // allocate a texture name
    glGenTextures( 1, &texture );

    // select our current texture
    glBindTexture( GL_TEXTURE_2D, texture );

    // select modulate to mix texture with color for shading
    glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );

    // when texture area is small, bilinear filter the closest mipmap
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                     GL_LINEAR_MIPMAP_NEAREST );
    // when texture area is large, bilinear filter the first mipmap
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

    // if wrap is true, the texture wraps over at the edges (repeat)
    //       ... false, the texture ends at the edges (clamp)
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
                     wrap ? GL_REPEAT : GL_CLAMP );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
                     wrap ? GL_REPEAT : GL_CLAMP );

    // build our texture mipmaps
    gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height,
                       GL_RGB, GL_UNSIGNED_BYTE, data );

    // free buffer
    free( data );

    return texture;
}
void keyboard(unsigned char key, int mousePositionX, int mousePositionY) { 
    switch ( key ) {
        case KEY_ESCAPE:
            exit ( 0 );   
            break;      
        default:      
            break;
    }
} 
```

我跟着这个，[http://www.nullterminator.net/gltexture.html](http://www.nullterminator.net/gltexture.html)

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:43:19.600

“LoadTextureRAW()”不适用于 PNG 文件。[您将需要像libpng](http://www.libpng.org/pub/png/libpng.html)这样的第三方库来解码 png 文件，因为它们是压缩的。

如果您不想自己实现 libpng，这有点高级，那么您可能可以在 google 的某个地方找到一个包装库。

您可以在此处找到 libpng 的最小实现：http: [//zarb.org/~gc/html/libpng.html](http://zarb.org/~gc/html/libpng.html)

# jquery - 在 jquery UI 模式对话框中检查复选框状态

> ID：10408834
> 
> 赞同：0
> 
> 时间：2012-05-02T06:36:17.293
> 
> 标签：jquery, jquery-ui, checkbox, dialog, modal-dialog

我有一个带有复选框的模态 jQuery UI 对话框：

```
 $dialog = $('<div id="formContainer"></div>')
                        .html('<div>some text</div><input id="accept_cb" type="checkbox" checked="checked"/> Uncheck this box to disable.<br />')
                        .dialog({
                                autoOpen: false,
                                title: 'Title ',
                                modal: true,
                                buttons: {
                                    "Close": function() {
                                        checkboxHandler();
                                    },
                                    Cancel: function() {
                                        $( this ).dialog( "close" );
                                    }
                                }
                            });

            function checkboxHandler(){
                if ($('#accept_cb').is(':checked'))
                {
                  alert('checked');
                }else{
                  alert('not checked');
                }
            } 
```

当我第一次打开对话框时，一切正常并提醒正确的检查状态。但是当我第二次返回时，无论是第一次，状态都保持“已检查”或“未检查”。我需要改变什么？

我也试过`().attr`and `().prop`，同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:43:27.390

在您的代码中，我看到一个语法错误。注意你的`'`. 另请参阅 jQuery API 以获取有关复选框[http://api.jquery.com/checked-selector/的更多信息](http://api.jquery.com/checked-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:48:25.177

关闭对话并不会破坏它。尽管您没有提及您是如何打开对话的，但我想您只是再次运行此代码。如果是这样，您正在创建所有这些元素的副本。当您在页面上有 2 个具有相同 ID 的元素时，您的浏览器将始终返回第一个，因此您的“无论它是第一次”。

“关闭”处理程序中的对话，或者`.remove()`不要每次都重新创建内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:26:38.437

简单的解决方案。您需要为复选框使用类并将选择器与 一起使用`:last`，因为 ui 模态对话框复制了此元素。

```
function checkboxHandler(){
   if ($('.accept_cb:last').is(':checked'))
   {
      alert('checked');
   }else{
      alert('not checked');
   }
} 
```

# objective-c - Objective-C，情节提要：instantiateViewControllerWithIdentifier 返回 nil

> ID：10408841
> 
> 赞同：3
> 
> 时间：2012-05-02T06:37:13.217
> 
> 标签：objective-c, xcode4, storyboard

我有一个 UITableViewController 和一个故事板推送 segue 从原型单元链接到详细信息页面，一个常规的旧 UIViewController。在故事板中，detail ViewController 有一个标识符，segue 有一个标识符，它与 detail 标识符相同，只是第一个字母是小写的。此外，详细 ViewController`AttractionDetailViewController`在类下拉列表中选择了一个“自定义类”（ ）。

不工作。问题是`instantiateViewControllerWithIdentifier:@"AttractionDetails`返回`nil`。

相关代码。首先是`prepareForSegue`调试器从未进入的方法。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"attractionDetails"])
    {
        AttractionDetailViewController *attrDetailVC = [segue destinationViewController];
    }
} 
```

相反，它进入了这个方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //AttractionDetailViewController *attrDetailVC = [[AttractionDetailViewController alloc] init];
    AttractionDetailViewController *attrDetailVC = [self.storyboard instantiateViewControllerWithIdentifier:@"AttractionDetails"];

    NSIndexPath *selIndexPath = [self.tableView indexPathForSelectedRow];
    attrDetailVC.theAttraction = [attractions objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:attrDetailVC animated:YES];
} 
```

由于`instantiateViewControllerWithIdentifier`返回`nil`它当然会引发异常。真正有趣的是，如果我改用这`alloc init`条线，它可以工作，但屏幕全黑。

无论如何，我已经阅读了这个并尝试了一些不同的东西，但我仍然受到阻碍。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-02T16:25:51.507

问题是你没有`UITableViewController`从情节提要中实例化你的主视图控制器（），所以它的`storyboard`属性是零。

# c# - 出现错误“该进程无法访问该文件，因为它正被另一个进程使用。”

> ID：10408842
> 
> 赞同：2
> 
> 时间：2012-05-02T06:37:19.023
> 
> 标签：c#, automation

我收到一个错误：

> 该进程无法访问文件“E:\testing\check1.txt”，因为它正被另一个进程使用。

这是我的代码：

```
private void timer2_Tick(object sender, EventArgs e)
{
    StreamWriter sw1 = new StreamWriter("E:\\testing\\check1.txt");
    sw1.Flush();
    if (dt[playback_iterator].iden == this.event_id)
    {

        foreach (Type type in asm1.GetTypes())
        {
            if (type.IsSubclassOf(typeof(System.Windows.Forms.Form)))
            {
                System.Windows.Forms.Form f = (System.Windows.Forms.Form)Activator.CreateInstance(type);
                foreach (Control ctrl in f.Controls)
                {
                    if (ctrl.Handle.ToInt32() == dt[playback_iterator].hndl)
                    {
                        if (ctrl.BackColor.R == this.r_comp && ctrl.BackColor.G == this.g_comp && ctrl.BackColor.G == this.g_comp)
                        {
                            sw1.WriteLine("verification point was set and the test passed");
                            /*success ob = new success();
                            ob.Show();*/
                        }
                        else
                        {
                            sw1.WriteLine("verification point test failed");
                        }

                    }
                }

            }
            sw1.Close();

            if (dt[playback_iterator].hndl == -1 && dt[playback_iterator].x == -1 && dt[playback_iterator].y == -1)
            {
                timer2.Enabled = false;
            }
            MoveMouse(dt[playback_iterator].hndl, dt[playback_iterator].x, dt[playback_iterator].y);
            if (dt[playback_iterator].click_detect.Equals("yes"))
            {
                ClickMouse(MonkeyButtons.btcLeft, dt[playback_iterator].x, dt[playback_iterator].y, 0, 0);
            }
            if (dt[playback_iterator].word != "")
            {
                ++count;
                StringBuilder wd = new StringBuilder(dt[playback_iterator].word);
                SetForegroundWindow(dt[playback_iterator].hndl);
                SendKeys.Send(dt[playback_iterator].word);
            }
            playback_iterator++;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:53:58.717

您可以使用`using`块并写入文本文件

```
using (StreamWriter sw1 = new StreamWriter("E:\\testing\\check1.txt"))
{
    if (condition)
    {
        foreach (Type type in asm1.GetTypes())
        {
            if (contition)
            {
                sw1.WriteLine("verification point was set and the test passed");
            }
        }
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:53:09.400

不要关闭 StreamWriter 对象，如果您尝试附加此错误.. 每次在循环内创建时，请使用 FileStream 类附加日志

```
string logFile = "E:\\testing\\check1.txt";
FileStream fs = new FileStream(logFile, FileMode.Append, FileAccess.Write);
StreamWriter sw1 = new StreamWriter(fs);
sw1.Flush();
if (dt[playback_iterator].iden == this.event_id)
{

    foreach (Type type in asm1.GetTypes())
    {
        if (type.IsSubclassOf(typeof(System.Windows.Forms.Form)))
        {
            System.Windows.Forms.Form f = (System.Windows.Forms.Form)Activator.CreateInstance(type);
            foreach (Control ctrl in f.Controls)
            {
                if (ctrl.Handle.ToInt32() == dt[playback_iterator].hndl)
                {
                    if (ctrl.BackColor.R == this.r_comp && ctrl.BackColor.G == this.g_comp && ctrl.BackColor.G == this.g_comp)
                    {
                        sw1.WriteLine("verification point was set and the test passed");
                        /*success ob = new success();
                        ob.Show();*/
                    }
                    else
                    {
                        sw1.WriteLine("verification point test failed");
                    }

                }
            }

        }
        if (dt[playback_iterator].hndl == -1 && dt[playback_iterator].x == -1 && dt[playback_iterator].y == -1)
        {
            timer2.Enabled = false;
        }
        MoveMouse(dt[playback_iterator].hndl, dt[playback_iterator].x, dt[playback_iterator].y);
        if (dt[playback_iterator].click_detect.Equals("yes"))
        {
            ClickMouse(MonkeyButtons.btcLeft, dt[playback_iterator].x, dt[playback_iterator].y, 0, 0);
        }
        if (dt[playback_iterator].word != "")
        {
            ++count;
            StringBuilder wd = new StringBuilder(dt[playback_iterator].word);
            SetForegroundWindow(dt[playback_iterator].hndl);
            SendKeys.Send(dt[playback_iterator].word);
        }
        playback_iterator++;

    }
}
sw1.Close();
fs.Close(); 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:50:05.583

如果这个条件

```
if (dt[playback_iterator].iden == this.event_id) 
```

不是真的，`StreamWriter`没有确定性地关闭，下次您尝试打开文件时，您可能会遇到访问冲突。

使用`using`声明

```
using (StreamWriter sw1 = new StreamWriter("E:\\testing\\check1.txt"))
{
} 
```

那么你也可以删除`sw1.Close()`并且作者总是只关闭一次。

注意：错误也可能意味着文件被当前进程使用。我认为记事本不会使文件保持打开状态，因此记事本不会有问题。

# c# - 动态更改 ASPxGridView SettingsLoadingPanel 文本

> ID：10408844
> 
> 赞同：1
> 
> 时间：2012-05-02T06:37:26.883
> 
> 标签：c#, asp.net, .net, devexpress, aspxgridview

我需要`SettingsLoadingPanel`动态更改 ASPxGridView（如果可能，从后面的代码）。

例如，当我单击复选框时，我希望文本为“正在选择...”，然后单击按钮以查看文本“正在加载...”

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:38:00.827

你可以使用[`ASPxClientLoadingPanel`](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxLoadingPanelScriptsASPxClientLoadingPanelClassMethodsTopic)方法。并且[`.Shov()`](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxLoadingPanelScriptsASPxClientLoadingPanel_Showtopic)方法调用加载面板。

```
<dxlp:ASPxLoadingPanel ID="ASPxLoadingPanel1" runat="server" ClientInstanceName="lp">
        </dxlp:ASPxLoadingPanel>

        <dxe:ASPxButton ID="btnShow" runat="server" AutoPostBack="False" 
                        Text="Show" ClientInstanceName="button" >
            <ClientSideEvents Click="function(s, e) {
                lp.Show();
            }" />
        </dxe:ASPxButton>

        <dxe:ASPxButton ID="btnHide" runat="server" AutoPostBack="False" 
                        Text="Hide" ClientInstanceName="button" >
            <ClientSideEvents Click="function(s, e) {
                lp.Hide();
            }" />
        </dxe:ASPxButton> 
```

[`this`](http://demos.devexpress.com/aspxperiencedemos/LoadingPanel/Example.aspx)您也可以在链接中找到演示。

**ASPX**

```
<%@ Page Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Example.aspx.cs"
    Inherits="ASPxLoadingPanel_Example" %>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentHolder" runat="Server">
    <dx:ASPxCallback ID="ASPxCallback1" runat="server" ClientInstanceName="Callback">
        <ClientSideEvents CallbackComplete="function(s, e) { LoadingPanel.Hide(); }" />
    </dx:ASPxCallback>
    <div class="BottomPadding">
        <dx:ASPxCheckBox ID="ASPxCheckBox1" runat="server" AutoPostBack="true" Checked="True"
            Text="Display the ASPxLoadingPanel over a specific control">
        </dx:ASPxCheckBox>
    </div>
    <table id="Panel" style="border: Dashed 1px Gray; height: 125px; width: 60%; margin: 30px 20%">
        <tr>
            <td align="center" valign="middle">
                <dx:ASPxButton ID="ASPxButton1" runat="server" Text="Show Loading Panel" AutoPostBack="False">
                    <ClientSideEvents Click="function(s, e) {
    Callback.PerformCallback();
    LoadingPanel.Show();
}" />
                </dx:ASPxButton>
            </td>
        </tr>
    </table>
    <dx:ASPxLoadingPanel ID="LoadingPanel" runat="server" ClientInstanceName="LoadingPanel"
        Modal="True">
    </dx:ASPxLoadingPanel>
</asp:Content> 
```

**C＃**

```
using System;
using System.Threading;
using System.Web.UI;

public partial class ASPxLoadingPanel_Example : Page {

    protected void Page_Load(object sender, EventArgs e) {
        if(IsCallback) {
            // Intentionally pauses server-side processing,
            // to demonstrate the Loading Panel functionality.
            Thread.Sleep(500);
        }
        LoadingPanel.ContainerElementID = ASPxCheckBox1.Checked ? "Panel" : "";
    }

} 
```

# mono - C#、Gendarme、Sonar 和 Jenkins：从 Gendarme 中排除生成的文件

> ID：10408848
> 
> 赞同：3
> 
> 时间：2012-05-02T06:37:37.003
> 
> 标签：mono, sonarqube, gendarme

我正在与 Sonar 调用的 .net 宪兵合作（由 Jenkins 发起）。我有很多 AvoidVisibleFieldsRule 违规行为。在生成的文件中可以找到主要的违规行为。由于我对此无能为力，我想从扫描中排除 *.designer.cs。

我找不到办法做到这一点。Sonar 中有一个属性可以排除生成的文件，但它似乎不适用于宪兵。

有没有办法做这样的事情？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:10:57.083

宪兵希望你提供一份忽略名单，

[http://www.mono-project.com/Gendarme.FAQ](http://www.mono-project.com/Gendarme.FAQ)

[https://github.com/mono/mono-tools/blob/master/gendarme/self-test.ignore](https://github.com/mono/mono-tools/blob/master/gendarme/self-test.ignore)

忽略文件格式有点奇怪，但你可以通过实验来学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T07:23:50.153

事实上，这实际上根本不正常。生成的代码被标准配置的插件排除在外。您使用的是什么版本的 C# 插件？无论如何，您可以尝试的配置属性是“sonar.exclusions”（请参阅[​​ http://docs.codehaus.org/display/SONAR/Advanced+parameters](http://docs.codehaus.org/display/SONAR/Advanced+parameters)）。如果您没有立即解决您的问题，最好的办法是将邮件发送到用户邮件列表（请参阅[http://www.sonarsource.org/support/support/](http://www.sonarsource.org/support/support/)）并发送您构建的详细输出。要获得此输出，只需在命令行中添加“-X”。希望能帮助到你

# c++ - 如何在 Clang 中使用 C++ 11 功能？

> ID：10408849
> 
> 赞同：66
> 
> 时间：2012-05-02T06:37:37.317
> 
> 标签：c++, c++11, clang

如何在 Clang 中使用最新的 C++ 11 功能？支持哪些（子）功能集？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-02T06:42:50.127

您将需要 clang 3.3 才能使用 C++ 11 中最相关的功能集。阅读[Clang](http://clang.llvm.org/cxx_status.html)中的 C++ 支持以获取最新支持的功能的完整列表。Clang 3.3 声称是 C++11 功能完整的。

Clang 的命令行与 gcc 兼容，因此您必须通过 followinf 命令行开关启用 C++11 支持

```
-std=c++11 
```

Clang 3.3 还支持一堆 C++11 后的特性（如 decltype(auto)、成员初始化器和聚合）。使用此命令行开关启用它们

```
-std=c++1y 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-02T06:41:44.500

以下是 clang 支持的最新功能列表：

[http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)

要激活 C++11，您必须在您的 clang 调用中添加 -std=c++11，例如 gcc。如果您使用支持 clang 或 gcc 的 IDE，则可以使用特定的项目设置选项来执行此操作。

# ios - 同时播放多个视频

> ID：10408852
> 
> 赞同：0
> 
> 时间：2012-05-02T06:37:55.093
> 
> 标签：ios, ipad

是否可以在一个视图中播放多个视频。我尝试过 MPMovieMediaPlayer，但只播放最后添加的视频，是否有其他解决方案可以一起播放所有文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:56:05.243

你可以使用苹果的[`AVPlayer`](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html#//apple_ref/occ/cl/AVPlayer).

# ruby-on-rails-3 - 如何更新 Rails 中的子类别

> ID：10408853
> 
> 赞同：0
> 
> 时间：2012-05-02T06:37:59.757
> 
> 标签：ruby-on-rails-3, activerecord, associations

我有类别和产品，类别中有很多产品。我可以编辑删除创建类别，也可以在每个类别中创建删除产品，但想要编辑每个产品。我可以使用 link_to 访问特定类别的单个产品，并且产品控制器正在接收特定类别的产品。

在类别的 html 中，所有产品都属于该类别

```
 <%= link_to 'Edit', edit_category_product_path(product.category, product) %> 
```

产品的控制器，编辑功能是

```
@product = Product.where(params[:id]) 
```

那么我的编辑html是

```
<%= form_for @product do |f| %>
<% if @product.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from     being saved:</h2>

  <ul>
  <% @product.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
  </div>
 <% end %>

<div class="field">
<%= f.label :name %><br />
<%= f.text_field :name %>
</div>
<div class="field">
<%= f.label :description %><br />
<%= f.text_area :description %>
</div>
<div class="field">
<%= f.label :price %><br />
<%= f.text_field :price %>
</div>

<div class="actions">
<%= f.submit %>
</div>
<% end %>

<%= link_to 'Back', category_products_path %> 
```

尝试编辑产品时出现此错误

```
NoMethodError in Products#edit

Showing C:/Sites/propoolpro6/app/views/products/edit.html.erb where line #3 raised:

undefined method `model_name' for ActiveRecord::Relation:Class
Extracted source (around line #3):

1: <h1>Editing product</h1>
2: 
3: <%= form_for @product do |f| %>
4:   <% if @product.errors.any? %>
5:     <div id="error_explanation">
6:       <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product   from being saved:</h2>
Rails.root: C:/Sites/propoolpro6

Application Trace | Framework Trace | Full Trace
 app/views/products/edit.html.erb:3:in  `_app_views_products_edit_html_erb___584392485_32651052'
Request

Parameters:

{"category_id"=>"1",
"id"=>"3"} 
```

**注意：**我用过这个 2，但同样的错误，

```
<%= form_for(@product) do |f| %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:28:26.050

我认为以下行创建数组
**@product = Product.where(params[:id])**

form_helper 无法使用它（期望模型名称通常由 ActiveRecord 关系提供）。您可以检查 @product 以查看结果。

所以最好使用 find 而不是 where like

**@product = Product.find(params[:id])**

我希望这个答案会对你有所帮助。
谢谢。

# r - 根据变量的值将值从一个数据帧移动到另一个数据帧

> ID：10408864
> 
> 赞同：3
> 
> 时间：2012-05-02T06:39:24.777
> 
> 标签：r, merge, reshape

不熟悉 R，我遇到了以下问题：我想将 dataframe 中的值添加`probeposition`到`mlpa`dataframe 中`patients`，并且`probeposition`通过值链接的值同时出现在`mlpa`和`patients`（即`probe`和`patprobe`）中。据我所知，通常的数据管理教程没有涵盖这个问题。

```
#mlpa:
probe <- c(12,15,18,19)
probeposition <- c(100,1200,500,900)
mlpa = data.frame(probe = probe, probeposition = probeposition)
#patients:
patid <- c('AT', 'GA', 'TT', 'AG', 'GG', 'TA')
patprobe <- c(12, 12, NA, NA, 18, 19)
patients = data.frame(patid = patid, patprobe = patprobe)

#And that's what I finally want:
patprobeposition = c(100, 100, NA, NA, 500, 900)  
patients$patprobeposition = patprobeposition 
```

## 更新

在 Andrie 的回复中，我意识到我不得不提到患者数据集中有几个“探针”，所以实际上数据看起来更像这样（实际上，不仅有 probe1 和 probe2，而且探针1-探针4）：

```
mlpa <- data.frame(probe = c(12,15,18,19),
                   probeposition = c(100,1200,500,900) ) 
patients <- data.frame(patid = c('AT', 'GA', 'TT', 'AG', 'GG', 'TA'),
                       probe1 = c(12, 12, NA, NA, 18, 19), 
                       probe2 = c(15, 15, NA, NA, 19, 19) ) 
```

我想要的是这样的：

```
patients <- data.frame(patid = c('AT', 'GA', 'TT', 'AG', 'GG', 'TA'),   
                       probe1 = c(12, 12, NA, NA, 18, 19), 
                       probe2 = c(15, 15, NA, NA, 19, 19), 
                       position1 = c(100, 100, NA, NA, 500, 900), 
                       position2 = c(1200, 1200, NA, NA, 900, 900)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:50:03.887

您可以使用 非常轻松地做到这一点`merge`，它采用两个数据框并将它们连接到公共列或行名称上。

开始工作的最简单方法`merge`是确保您具有匹配的列名称，其中这些列引用相同的信息。具体来说，我已将您的专栏重命名`patprobe`为`probe`：

```
mlpa <- data.frame(
  probe = c(12,15,18,19),
  probeposition = c(100,1200,500,900)
)

patients <- data.frame(
  patid = c('AT', 'GA', 'TT', 'AG', 'GG', 'TA'),
  probe = c(12, 12, NA, NA, 18, 19)
) 
```

现在您可以调用`merge`. 但是，请注意，默认值`merge`仅返回匹配的行（在数据库术语中，这是一个*内部连接*）。您想要的是将**所有**行包含在`patients`（左外连接）中。您可以通过指定`all.x=TRUE`：

```
merge(patients, mlpa, all.x=TRUE, sort=FALSE)

  probe patid probeposition
1    12    AT           100
2    12    GA           100
3    18    GG           500
4    19    TA           900
5    NA    TT            NA
6    NA    AG            NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:30:21.487

安装`reshape2`软件包并尝试以下操作：

```
require(reshape2)
m.patients = melt(patients)
m.patients = merge(m.patients, mlpa, 
                   by.x = "value", 
                   by.y = "probe", 
                   all = TRUE)
reshape(m.patients, direction="wide", 
        timevar="variable", idvar="patid") 
```

这应该为您提供如下输出，可以对其进行清理以匹配您所需的输出。

```
 patid value.probe1 probeposition.probe1 value.probe2 probeposition.probe2
1     AT           12                  100           15                 1200
2     GA           12                  100           15                 1200
5     GG           18                  500           19                  900
7     TA           19                  900           19                  900
9     TT           NA                   NA           NA                   NA
10    AG           NA                   NA           NA                   NA 
```

## 更新

当然，您也可以使用以下`reshape2`软件包完成所有操作：

```
m.patients = melt(patients, id.vars="patid", variable_name="time")
m.patients = melt(merge(m.patients, mlpa, by.x = "value", 
                        by.y = "probe", all = TRUE))
dcast(m.patients, patid ~ variable + time ) 
```

结果是：

```
 patid value_probe1 value_probe2 probeposition_probe1 probeposition_probe2
1    AG           NA           NA                   NA                   NA
2    AT           12           15                  100                 1200
3    GA           12           15                  100                 1200
4    GG           18           19                  500                  900
5    TA           19           19                  900                  900 
```

## 更新 2：使用 Base R Reshape

您也可以`reshape2`完全避免使用该软件包。

```
patients.l = reshape(patients, direction="long", idvar="patid", 
                     varying=c("probe1", "probe2"), sep="")
reshape(merge(patients.l, mlpa, all = TRUE), direction="wide", 
        idvar="patid", timevar="time") 
```

这使您最接近所需的输出：

```
 patid probe.1 probeposition.1 probe.2 probeposition.2
1     AT      12             100      15            1200
2     GA      12             100      15            1200
5     GG      18             500      19             900
7     TA      19             900      19             900
9     TT      NA              NA      NA              NA
10    AG      NA              NA      NA              NA 
```

# asp-classic - 将代码转换为经典的 asp

> ID：10408865
> 
> 赞同：1
> 
> 时间：2012-05-02T06:39:27.837
> 
> 标签：asp-classic, if-statement, vbscript

我想将下面的字符串转换为**经典的 asp 代码**，任何一封帮助电子邮件都可以有一些价值，但它不会进入循环内部，任何人都可以帮助我。

```
If (IsEmpty(email) And IsNull(email)) Then

EndIf 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T06:47:00.810

该代码看起来已经像它的 VBScript，因此不需要“转换”，但是代码有问题。应该：

```
If IsEmpty(email) Or IsNull(email) Then

End If 
```

一个变量不能既为空*又*包含 Null，因此原始条件表达式始终为假。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:18:38.760

你总是可以尝试：

```
If IsEmpty(email) = True Then
    'uninitialized
ElseIf IsNull(email) = True Then
    'contains null value
ElseIf email = ""
    'contains zero length string
Else
    'Response.Write email
    'MsgBox email
End If 
```

在大多数情况下，我尝试编写代码以保证变量被初始化，因此您不需要运行 IsEmpty 检查。

```
Option Explicit

Dim email
email = "" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T14:53:04.093

为什么不检查电子邮件变量的长度：

```
 If Len(Trim(email)) > 0 Then

 Else

    YOUR CODE HERE

 End If 
```

# sql - 关键字“where”附近的语法不正确

> ID：10408866
> 
> 赞同：3
> 
> 时间：2012-05-02T06:39:33.313
> 
> 标签：sql

```
insert into product (CategoriesId) values (2) where Categories=' ab ' 
```

错误是

关键字“where”附近的语法不正确。

我不明白请帮帮我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T06:40:57.477

插入时不能有 where 语句。如果您使用的是桌子，那么您可以。

```
INSERT INTO product (CategoriesId) values (2) 
```

或者像这样：

```
INSERT INTO product (CategoriesId)
SELECT CategoriesId
FROM someTable
WHERE someTable.Categories=' ab ' 
```

或者，如果您有现有的行并想要`UPDATE`它们。然后这样做：

```
UPDATE product SET CategoriesId=2 WHERE Categories='ab' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T06:42:11.347

您不能将 where 子句与 insert 一起使用，您应该像这样使用 update

```
update product set CategoriesId = 2 where Categories='ab' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-02T06:55:21.523

如果您想在不插入记录时更新用户名或在主目录中。所以使用更新查询而不是插入查询和插入查询不使用 Where 子句。试试这个，你可以得到你的答案。祝你好运。

# programming-languages - 关于表达和陈述的语言概念

> ID：10408868
> 
> 赞同：1
> 
> 时间：2012-05-02T06:39:45.790
> 
> 标签：programming-languages

任何计算机语言都有“表达”和“陈述”。在概念上，有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:44:59.817

取自[维基百科](http://en.wikipedia.org/wiki/Statement_%28computer_science%29#Expressions)：

> 在大多数语言中，语句与表达式的不同之处在于语句不返回结果并且仅因其副作用而执行，而表达式总是返回结果并且通常根本没有副作用。在命令式编程语言中，Algol 68 是为数不多的语句可以返回结果的语言之一。在混合了命令式和函数式风格的语言中，例如 Lisp 家族，表达式和语句之间没有区别：即使是在顺序上下文中执行的仅出于副作用且未使用其返回值的表达式也被视为“表达式”。在纯函数式编程中，没有语句；一切都是一种表达。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T06:44:51.560

表达式有值，而语句没有。如果您可以将它作为参数传递给函数，那么它就是一个表达式。如果你不能，这是一个声明。C 派生语言中的控制流构造通常是语句（您不能将“if {}”块作为函数参数传递）。因此，这些语言倾向于为“if”提供一种表达形式（如三元运算符）。当然，许多函数式语言的全部意义在于一切都有一个值，而函数是一等值，这意味着一切都是一个表达式。语句通常出现在命令式语言中，您希望编写不一定返回值的命令。有关详细信息，请参阅链接。
[http://lambda-the-ultimate。](http://lambda-the-ultimate.org/node/1044)

[表达与陈述](https://stackoverflow.com/questions/19132/expression-versus-statement)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:45:39.800

`statements`通常没有值。`expressions`通常确实有一个价值。

这在诸如 Ruby 或 Erlang 之类的语言中通常是可见的，它们为诸如`if .. end`构造之类的东西提供了一个值：

```
> foo = if 1 then "hello" else "goodbye" end
=> "hello"
> foo
=> "hello" 
```

```
1> Foo = if 1 =:= 1 ->
1>   hello;
1> true ->
1>   goodbye
1> end.
hello
2> 
```

许多语言不允许您使用`lvalue = if ...`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T06:55:57.770

语言的“语句”实际上是计算机系统做某事的指令。

语言的“表达式”是运算符和操作数的组合，例如 z=x+y。粗略地说，语言表达式本质上是数学的。

每一种语言的“表达”都是一种语言的“陈述”，但每一种语言的“陈述”都不是一种语言的“表达”。

# r - Hmisc：如何使用latex（）对列变量进行分组？

> ID：10408869
> 
> 赞同：4
> 
> 时间：2012-05-02T06:39:46.057
> 
> 标签：r

我怎样才能使用`Hmisc`'s`latex`来获得像......

```
 Group 1                     Group 2
d   n   beta   Sub-group 1   Sub-group 2   Sub-group 1   Sub-group 2
10  100 0.25       1             9
        0.75       2
    500 0.25       3            10
        0.75       4            11             ...           ...
100 100 0.25       5            12
        0.75       6            13
    500 0.25       7            ...
        0.75       8 
```

...？以下是我到目前为止所拥有的。不知何故，我想告诉`latex`使用前三列来显示行标签。此外，NA 不会被删除。

```
x <- matrix(1:72, ncol=4, nrow=8) # data part
colnames(x) <- c("gr1.sgr1", "gr1.sgr2", "gr2.sgr1", "gr2.sgr2")
rmNames <- function(x) {x[c(FALSE, x[-1]==x[-length(x)])] <- ""; x} 
rn <- apply(expand.grid(beta=c(0.25, 0.75), n=c(100, 500), d=c(10, 100))[, 3:1], 2, rmNames)
x <- cbind(rn, x) 
x[2,5] <- NA

require(Hmisc)
latex(x,
      file="",
      cgroup=c("", "Group 1", "Group 2"),
      n.cgroup=c(3, 2, 2),
      na.blank=TRUE,
      rowlabel=c("d", "n", "beta"),
      booktabs=TRUE,
      collabel.just=rep("c", 2)) 
```

**更新**

使用 joran 的方法，我得到（所以添加`rownames=NULL`and `rep("c",7)`）：

```
\begin{table}[!tbp]
\begin{center}
\begin{tabular}{lllcllcll}
\toprule
\multicolumn{3}{c}{\bfseries }&
\multicolumn{1}{c}{\bfseries }&
\multicolumn{2}{c}{\bfseries Group 1}&
\multicolumn{1}{c}{\bfseries }&
\multicolumn{2}{c}{\bfseries Group 2}
\tabularnewline
\cline{1-9}
\multicolumn{1}{c}{d}&\multicolumn{1}{c}{n}&\multicolumn{1}{c}{beta}&\multicolumn{1}{c}{}&\multicolumn{1}{c}{gr1.sgr1}&\multicolumn{1}{c}{gr1.sgr2}&\multicolumn{1}{c}{}&\multicolumn{1}{c}{gr2.sgr1}&\multicolumn{1}{c}{gr2.sgr2}\tabularnewline
\midrule
10&100&0.25&&1&9&&17&25\tabularnewline
&&0.75&&2&NA&&18&26\tabularnewline
&500&0.25&&3&11&&19&27\tabularnewline
&&0.75&&4&12&&20&28\tabularnewline
100&100&0.25&&5&13&&21&29\tabularnewline
&&0.75&&6&14&&22&30\tabularnewline
&500&0.25&&7&15&&23&31\tabularnewline
&&0.75&&8&16&&24&32\tabularnewline
\bottomrule
\end{tabular}
\end{center}
\end{table} 
```

1) 为什么要插入空列 ( `\multicolumn{1}{c}{}`)？

2) 为什么`NA`s 没有被替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T23:24:39.923

所以在`rmNames`. 您可能希望它是：

```
rmNames <- function(x) {x[c(FALSE, x[-1]==x[-length(x)])] <- NA; x} 
```

分配空字符最终会将所有内容强制转换为字符。老实说，我不太确定这是如何导致`latex`绊倒的，因为有问题的值仍然是 NA，但做出这种改变似乎可以解决问题。

至于额外的列，我不知道。查看生成的 PDF，我只能假设作者认为，在对列进行分组时，用空列填充它们看起来会更好，我承认如果这是真的，他们可能会说得有道理。

# objective-c - 需要在 Dropbox 示例应用程序中进行说明

> ID：10408870
> 
> 赞同：0
> 
> 时间：2012-05-02T06:39:48.330
> 
> 标签：objective-c, ios, dropbox

我需要在我的应用程序中集成 DropBox。我尝试了从 www.dropbox.com 下载的 dropbox 示例应用程序。在登录到保管箱后使用该应用程序时，它会转到随机照片控制器，当我们按下随机照片按钮时，它会显示**“将 .jpg 照片放入您的照片文件夹以使用 DBRoulette！”**的警报。但在保管箱网站，有三个 .jpg 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:39:55.387

检查您的保管箱文件夹...您将拥有一个名为“应用程序”的新文件夹。其中一个子文件夹将是您的应用程序根文件夹。将带有 jpg 或 jpeg 扩展名的照片放在那里，它应该可以工作。

# sql - SQL 中的 CASE 允许多少个 WHEN....THEN 条件

> ID：10408875
> 
> 赞同：0
> 
> 时间：2012-05-02T06:40:06.753
> 
> 标签：sql, oracle, case, decode

我正在使用 CASE & DECODE。CASE 的语法是：

```
CASE  [ expression ]
  WHEN condition_1 THEN result_1
  WHEN condition_2 THEN result_2
  ...
  WHEN condition_n THEN result_n
  ELSE result
END 
```

在 CASE 中，如果我们编写任何条件，我们可以使用 WHEN...THEN 来编写它。

所以，你能告诉我在一个案例中我们可以写多少次 WHEN... THEN 条件。是他们在一个案例中写 WHEN....THEN 条件的任何限制。

感谢您的回复。实际上我得到了我的问题的答案。我得到了我的问题的答案。

实际上，我们只能在一个 CASE 中编写 255 个比较。每个 WHEN...THEN 子句都被视为 2 次比较。

我们可以在一个 CASE 语句中编写 255 个比较。每个 WHEN...THEN 子句都被视为 2 次比较。

相同的限制适用于解码。

DECODE 函数中的最大参数数为 255。这包括：EXPRESSION、SEARCH 和 RESULT 参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:20:48.007

[直接来自http://docs.oracle.com/cd/E11882_01/server.112/e41084/expressions004.htm#SQLRF20037](http://docs.oracle.com/cd/E11882_01/server.112/e41084/expressions004.htm#SQLRF20037)的 11.2 手册

> ***CASE 表达式中的最大参数数为 65535**。所有表达式都计入此限制，包括简单 CASE 表达式的初始表达式和可选的 ELSE 表达式。每个 WHEN ... THEN 对都算作两个参数。为避免超出此限制，您可以嵌套 CASE 表达式，以便 return_expr 本身是 CASE 表达式*

（强调我的）

**编辑**
显然，这个限制在 11.2 中已显着增加，因为在 11.1 和 10.2 手册中，限制记录为 255

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm#i1033392](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm#i1033392)
[http://docs.oracle.com/cd/B28359_01/server.111/b28286/expressions004.htm#i1033392](http://docs.oracle.com/cd/B28359_01/server.111/b28286/expressions004.htm#i1033392)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T06:42:23.377

对此没有限制，您可以随心所欲地做...但是您的目标/方法是什么？我认为当模型出现问题时，您应该解决如此大的案例。

# c# - 基于 DistinguishedName 排序时出错

> ID：10408883
> 
> 赞同：0
> 
> 时间：2012-05-02T06:40:47.790
> 
> 标签：c#, sorting, ldap, distinguishedname

我正在连接到 LDAP，我只得到用户类型的类对象，我只想获得专有名称，当我不进行任何排序时，（我评论排序行）结果很好，数量用户是 13 岁。我可以将它们全部打印出来，但它们没有按升序排列，所以我根据 distinctName 进行了排序，当我将这些行添加到代码中时，它给了我一个空的 searchResults 集合。

我不知道为什么，为什么当我进行排序时，数据会消失，而当我停止排序时，数据就在那里。排序有什么问题？？？

```
DirectoryEntry entry = new DirectoryEntry(_path, username, 
DirectorySearcher mySearcher = new DirectorySearcher(entry);
mySearcher.Filter = ("(objectClass=user)");
SortOption option = new SortOption("distinguishedName", System.DirectoryServices.SortDirection.Ascending);
mySearcher.Sort = option;
DataSet ds = new DataSet();
DataTable dtUsers = new DataTable("Users");
dtUsers.Columns.Add("distinguishedName");
SearchResultCollection ss = mySearcher.FindAll();
SearchResult a = ss[0]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:28:18.820

在 DataView 中进行如下排序：

```
DataTable dtUsers = new DataTable("Users");
dtUsers.Columns.Add("distinguishedName");
DataView view = dtUsers.DefaultView;
view.Sort = "distinguishedName"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:32:57.773

FWIW，我的建议通常是不对服务器端进行排序。客户端可以轻松地对 DC 进行排序并保持排序负载。在某些情况下，您确实需要服务器进行排序，但如果您可以避免它，我会的。您的管理员会感谢您的。

# c++ - 在 Ubuntu 上使用 Mingw64 交叉编译 Matlab oct 文件时出现问题

> ID：10408887
> 
> 赞同：3
> 
> 时间：2012-05-02T06:40:58.397
> 
> 标签：c++, matlab, cross-compiling, mex, mingw-w64

我编写了一个 C++ 应用程序，其中包括外部库[glpk](http://www.gnu.org/software/glpk/)和绑定到 Matlab API 的[boost 。](http://www.boost.org/)在使用 mex 在 Matlab 中编译的 Ubuntu 上工作正常，程序运行没有困难。

现在要在 Windows 平台上使用相同的应用程序，我想使用 Mingw64 交叉编译它。对应于这个[线程](https://stackoverflow.com/questions/8552580/using-gccmingw-as-matlabs-mex-compiler)，可以使用以下命令完成：

```
x86_64-w64-mingw32-gcc -m64 -shared -I"/usr/local/MATLAB/R2011a/extern/include" -I"/usr/local/include" -I"/usr/include" -DMATLAB_MEX_FILE -o output.mexw64 input.cpp -L"/usr/local/MATLAB/R2011a/bin/glnxa64/" -lmex -lmx -lmat -leng -L"/usr/lib" -lglpk 
```

*   路径*/usr/local/include*包含 boost 库的头文件（仅头库）
*   路径*/usr/include*包含 glpk 库的头文件
*   路径*/usr/lib*包含 glpk 库的源文件

但是运行此命令会给我以下`conflicting declarations`类型的错误：

```
/usr/include/sys/types.h:110:19: error: conflicting declaration ‘typedef __ssize_t ssize_t’
/usr/lib/gcc/x86_64-w64-mingw32/4.6/../../../../x86_64-w64-mingw32/include/_mingw.h:394:35: error: ‘ssize_t’ has a previous declaration as ‘typedef long long int ssize_t’ 
```

似乎路径*/usr/include*会导致编译器出现问题。但是需要包含 glpk 头文件。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:28:31.563

如果您的 glpk 头文件位于 /usr/include 中，则很可能您没有为 Windows 编译该库。您应该为目标平台交叉编译所有库（并将它们安装在 /usr/x86_64-w64-mingw32 中（如果我正确推断出您的安装细节）。

您将无法解决的一个大问题：您的 Matlab 是 Linux，并且不包含任何 Windows 可链接库，所以无论如何您都不走运。

# linux - 设置 hudson 构建触发器以检查 svn 更改

> ID：10408890
> 
> 赞同：1
> 
> 时间：2012-05-02T06:41:24.913
> 
> 标签：linux, svn, hudson

我已经用不同的选项设置了 Poll SCM，但它们似乎都不起作用我试过

```
* * * * * 
5 * * * *
*/10 * * * * 
```

它似乎没有尝试构建并且更改已提交给 svn![在此处输入图像描述](../Images/491833cb5053fd37589f062c1932c46b.png)

知道我做错了什么吗？我必须设置一个提交后挂钩吗？这不应该工作吗？谢谢

# asp.net - 为何 应用于Repeater Control的CSS放置在UpdatePanel中时会失真？

> ID：10408892
> 
> 赞同：1
> 
> 时间：2012-05-02T06:41:31.950
> 
> 标签：asp.net, css, html, repeater

我是 AJAX 的新手我正在尝试更新中继器控件当用户使用 UpdatePanel 的触发事件单击位于 updatePanel 外部的搜索按钮时，当将中继器控件放置在 UpdatePanel 内时，CSS 会失真当更新面板被删除时 CSS完美应用为什么会发生？

代码：

```
 <div class="jqueryresultsBackground">
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
 <ContentTemplate>
     <asp:Repeater ID="ResultsRepeater" runat="server">
                  <HeaderTemplate>
                      <table border="0" cellpadding="0" cellspacing="0" width="100%">
                          <tr>
                              <td>
                                  &nbsp;
                              </td>
                          </tr>
                      </table>
                  </HeaderTemplate>
                  <ItemTemplate>
                      <tr>
                          <td>
                              <table align="center" width="100%">
                                  <tr>
                                      <td align="left" class="searchResFieldName" width="40%">
                                          <asp:Image ID="Image1" runat="server" ImageUrl="~/images/deleted.png" 
                                              Style="z-index: 1; position: absolute; margin-left: -5px;" 
                                              Visible='<%# DeletedImageVisibility(Eval("IsActive"))%>' />
                                          <br />
                                          <%# Eval("UnicodeFullName")%>
                                      </td>
                                      <td width="10%">
                                         Col1
                                      </td>
                                  </tr>
                              </table>
                          </td>
                          <td width="10%">
                              Col2
                          </td>
                          <td width="10%">
                             Col3
                          </td>
                          <td width="8%">
                              Col4
                          </td>
                          <td width="5%">
                              Col5
                          </td>
                          <td width="10%">
                              Col6
                          </td>
                      </tr>
                      <tr>
                          <td align="left" class="searchResFieldName" width="35%">
                              <%# Eval("EnglishFullName")%>
                          </td>
                          <tr>
                              <td align="left">
                                  <%# Eval("HouseNumber")%>
                                  <br />
                                  <%# Eval("UnicodeAddress")%>
                              </td>
                              <td>
                                  <b><%# Eval("ConstituencyNumber")%></b>
                              </td>
                              <td>
                                  <b><%# Eval("PartNumber")%></b>
                              </td>
                              <td>
                                  <b><%# Eval("SerialInPart")%></b>
                              </td>
                              <td>
                                  <b><%# Eval("Age")%></b>
                              </td>
                              <td>
                                  <b><%# Eval("Sex")%></b>
                              </td>
                              <td>
                                  <b><%# Eval("CardNo")%></b>
                              </td>
                          </tr>
                          <tr>
                              <td>
                                  <%# Eval("Address")%>
                              </td>
                              <tr>
                                  <td>
                                  </td>
                                  <td align="left" class="searchResPrabhag" colspan="7">
                                      &nbsp;
                                  </td>
                              </tr>
                          </tr>
                          </table>
                          </td>
                      </tr>
                      <tr>
                          <td>
                              <hr />
                          </td>
                      </tr>
                  </ItemTemplate>

<FooterTemplate>
                      <tr>
                          <td>
                              &nbsp;
                          </td>
                      </tr>
                      </table>
                  </FooterTemplate>
              </asp:Repeater>
</ContentTemplate>

              <Triggers>
                  <asp:AsyncPostBackTrigger ControlID="SearchButton" EventName="Click" />
              </Triggers>

          </asp:UpdatePanel>
            <asp:HiddenField ID="CurrentPageHiddenField" runat="server" />
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:56:34.223

您的 HTML 已损坏... HeaderTemplate 正在关闭您的表格。

# php - PHP PDO 类构建

> ID：10408893
> 
> 赞同：1
> 
> 时间：2012-05-02T06:41:36.433
> 
> 标签：php, class, pdo

我对 PDO 和 OOP 都很陌生。我正在尝试编写一个连接到数据库并更新插入和修改它的类。我有几个问题：

1.  在构造函数中连接数据库是一种好习惯吗？

2.  一个类应该更新、插入、修改和连接，还是应该分成几个类？

3.  为什么 runQuery 不起作用？我假设它是因为 $pdo 是在不同的范围内定义的。我将如何让这个工作？

4.  如果该类包含在每个页面的顶部，这是否意味着每次加载新页面时它都会重新连接到数据库，这会导致安全问题吗？

为过多的问题道歉。提前感谢您的任何答案。

```
<?php
class Login{

private $_username;
private $_password;
private $_host;
private $_database;
private $_driver;

//Connect to the database

function __construct($configFile){

    $connectionDetails = parse_ini_file($configFile);

    $this->_username = $connectionDetails['username'];
    $this->_password = $connectionDetails['password'];
    $this->_host = $connectionDetails['host'];
    $this->_database = $connectionDetails['database'];
    $this->_driver = $connectionDetails['driver'];

    $pdo = new PDO("$this->_driver:host=$this->_host;dbname=$this->_database", $this->_username, $this->_password);

}

public function loginAllowed($user, $pw){

    $sth = $pdo->setFetchMode(PDO::FETCH_ASSOC);
    print_r($sth);
}

public function runQuery($query, $params){
    $sth = $this->pdo->prepare($query);
    $sth->execute($params); 
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T06:45:37.557

因为`$pdo`是构造函数和方法中的局部变量`loginAllowed`。您应该将其设为实例变量 ( `private $pdo`)，以便您可以通过`$this->pdo`. 我还建议在这里使用[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)，将`PDO`类作为构造函数中的参数。

例子

```
<?php
class Login {
    private $pdo;
    // Your other instance variables

    public function __construct(PDO $pdo)
    {
        $this->pdo = $pdo;
    }

    // Your other methods
}

$pdo = new PDO("...");
$login = new Login($pdo); 
```

您不应该通过阅读设置和初始化数据库连接来打扰您的班级（绝对阅读有关[关注点分离的](http://en.wikipedia.org/wiki/Separation_of_concerns)内容），将其排除在您的班级之外。只需将 PDO 对象作为参数提供（我使用了[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)，这样您就被迫提供该`PDO`类型的对象）。另一个优点是您现在可以确保您只有一个活动的数据库连接（您可以在您的代码库中管理它），创建多个连接是不必要的并且绝对不需要（性能方面）。

还使用[require_once](http://php.net/manual/en/function.require-once.php)来包含您的类定义。否则，您将收到许多有关重新声明的错误（并且您希望避免这种情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T06:52:39.167

1.  在您认为最方便的地方连接到数据库。只需尝试确保只有一个连接。与同一个数据库的更多连接是浪费时间和资源。

2.  您引用的类在 MVC 体系结构中称为模型。它通常对给定表执行所有操作。我认为使用单个类来满足您的所有需求并没有错——只要代码是可读和可维护的。

3.  它不起作用，因为它`$pdo`是一个局部变量。在 ctor 中，`$this->pdo`改为实例化。

4.  包含一个类并不等同于实例化它。一个新实例将建立另一个连接。多次包含它只会给你一个多重声明错误:)。改为使用`require_once`。如果您希望在多个文件中使用该实例，我强烈建议您对 Singleton 模式进行快速搜索。使用单例对象将确保您始终只有一个模型对象实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T06:00:51.400

不要打扰所有随机的东西，只需在你的构造中替换它：

```
$pdo = new PDO("$this->_driver:host=$this->_host;dbname=$this->_database", $this->_username, $this->_password); 
```

和

```
$this->pdo = new PDO("$this->_driver:host=$this->_host;dbname=$this->_database", $this->_username, $this->_password); 
```

并从现在开始将其引用为 $this->pdo。就如此容易！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T07:13:16.770

1）在构造函数中连接数据库是好的做法吗？

不好，查询前先连接

```
if($this->pdo == null) {
$this->pdo = new PDO("...."); 
```

}

2) 一个类应该更新、插入、修改和连接，还是应该分成几个类？为类添加方法

3) 为什么 runQuery 不工作？我假设它是因为 $pdo 是在不同的范围内定义的。我将如何让这个工作？改用 $this->pdo

4) 如果该类包含在每个页面的顶部，这是否意味着每次加载新页面时它都会重新连接到数据库，这会导致安全问题吗？使用 static $pdo 然后 self::$pdo 将是唯一的一个连接器

```
if(self::$pdo == null) {
self::$pdo = new PDO("...."); 
```

}

# java - 在新窗口中打开 URL 快捷方式

> ID：10408894
> 
> 赞同：0
> 
> 时间：2012-05-02T06:41:40.487
> 
> 标签：java, gwt, java-io

我的网页中有一些 URL 快捷方式文件，我想在新的浏览器窗口选项卡中单击它时打开特定的 URL。（目前我可以实现点击下载文件的功能）。

喜欢，

`facebook shortcut.url`

`google shortcut.url`

我正在研究 GWT，并且只有该页面的客户端访问权限。

那么，1）是否可以读取该文件的内容？所以我可以从文件中读取特定的 url 并在新窗口中打开它（仅从客户端）。

# vb.net - 如何在 Visual Basic 中比较两列/多列数组的值并添加到列表框中而不重复

> ID：10408898
> 
> 赞同：0
> 
> 时间：2012-05-02T06:41:53.840
> 
> 标签：vb.net, arrays

嗨，我有一个小项目要做，现在我被困在中间了。

该程序是读取顺序文本文件并将其加载到结构数组/数组中。

数据信息是这样的（示例）：

```
ID | Name    | Type
1  | Cat     | Animal
2  | Dog     | Animal
3  | Parrot  | Bird
4  | Tuna    | Fish
5  | Tiger   | Animal
6  | Sparrow | Bird 
```

DATA.txt 文件中的示例数据如下所示：

```
1;Cat;Animal
2;Dog;Animal
3;Parrot;Bird
4;Tuna;Fish
5;Sparrow;Bird
6;Tiger;Animal 
```

这只是作为示例数据，我的原始数据不止这些。

我已经使用 FileStreamReader 打开了 DATA.txt 文件：

```
Dim FileStreamReader As StreamReader = New StreamREader(DATA.txt) 
```

读取列表中的所有元素并通过`ReadArrayString`.
使用以下方法拆分字符串：

```
DataString.Split(New Char() {";"c}) 
```

通过

```
ReadArrayString(0)
ReadArrayString(1)
ReadArrayString(2) 
```

其中索引 0 是 ID，索引 1 是名称，索引 2 是类型

然后我从数组中加载下拉组合框菜单中的类型而不重复。像这样：

```
If TypeComboBox.FindString(ReadArrayString(2)) < 0 Then
  TypeComboBox.Items.Add(ReadArrayString(2))
End If 
```

现在，当您单击 TypeComboBox 时，它将仅显示带有以下列表的下拉菜单。

```
Animal
Bird
Fish 
```

在此之后，当从组合框下拉菜单中选择/单击动物类型时，它应该只在列表框中添加动物类型的 ID 和名称。

伪代码可能如下所示：

```
If Animal is selected/clicked from TypeComboBox then
  Add Cat into listbox
  Add Dog into listbox
  Add Tiger into listbox
Else If Bird is selected then
  Add Parrot into listbox
  Add Sparrow into listbox
Else If Fish is selected then
  Add Tuna in to listbox
End If 
```

我只计算出将仅一列/数组中的项目加载到组合框中而没有重复。但无法弄清楚将一个列/数组的值与另一列/数组的值进行比较并将其加载到列表框中。我不想在代码中硬编码或写入匹配值。我想要的是使用数组。

任何帮助都会很棒。

对不起，如果我的解释很糟糕。我希望上面的伪代码可以让你对我的问题有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:02:04.680

除非我误解了您的问题，否则对于您正在尝试做的事情，这样的事情应该有效。

```
For Each row as String() In TwoDArray
    If row(2) = TypeComboBox.Text Then
        listbox.Items.Add(row(1))
    End If
Next 
```

# ios - 在两个 iOS 设备之间发送视频的最佳方式是什么？

> ID：10408899
> 
> 赞同：1
> 
> 时间：2012-05-02T06:41:54.963
> 
> 标签：ios

我希望人们能够在我的应用程序中相互发送短视频......最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:50:46.740

稍微解释一下上下文可能会帮助您获得更好的答案。但总的来说，icloud 应该是解决您的问题的有用技术。

[面向开发人员的 iCloud](https://developer.apple.com/icloud/index.php)

# google-drive-api - 在 Google Drive Apps Collection 中列出

> ID：10408905
> 
> 赞同：2
> 
> 时间：2012-05-02T06:42:25.947
> 
> 标签：google-drive-api

我在 Chrome 网上应用店中发布了适用于 Google Drive 的应用程序。我认为它可能会自动添加到 Google Drive Collection 中，但那没有发生。有什么我必须提交的表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:25:24.003

为了让您的应用程序出现在[云端硬盘应用程序集合中，](https://chrome.google.com/webstore/category/collection/drive_apps)您的 Chrome 网上应用店应用程序清单文件需要指定 Google Drive 容器和您的 API 控制台项目 ID，如[本文档](https://developers.google.com/drive/listing)中所述。

然后，您的应用列表应获得“与 Google Drive 一起使用”徽章，并且如果索引延迟几分钟，您的应用将出现在[Drive 应用集合中](https://chrome.google.com/webstore/category/collection/drive_apps)。

请注意：如果您已经在浏览器上安装了它，**您可能看不到它，**因为该集合中不会为您显示列表。它会显示给所有其他尚未安装您的应用程序的用户。要确保它在那里：尝试使用另一个浏览器（例如 FireFox）查看该集合。

# html - 使用 XSLT 独立插入开始和结束 HTML 标记

> ID：10408908
> 
> 赞同：1
> 
> 时间：2012-05-02T06:42:38.610
> 
> 标签：html, xslt, variables, tags

我已经习惯了以下变量：

```
<xsl:variable name="openTag">
<![CDATA[
<div>
]]>
</xsl:variable>

<xsl:variable name="closeTag">
<![CDATA[
</div>
]]>
</xsl:variable> 
```

并通过以下方式实现：

```
<div class="root">
      <xsl:variable name="ownerid" select="Prp[@name='owner id']/@value" />
      <xsl:variable name="nextownerid" select="preceding-sibling::Node[1]/Prp[@name='owner id']/@value"/>

      <xsl:choose>
        <xsl:when test="$ownerid = '-1'">
          <xsl:copy-of select="$LogText"/>
        </xsl:when>
        <xsl:when test="$ownerid &lt; $nextownerid">
          <xsl:copy-of select="$openTag"/>
          <xsl:copy-of select="$LogText"/>
        </xsl:when>

        <xsl:when test="$ownerid &gt; $nextownerid">
          <xsl:copy-of select="$openTag"/>
          <xsl:copy-of select="$LogText"/>
          <xsl:copy-of select="$closeTag"/>
          <xsl:copy-of select="$closeTag"/>
        </xsl:when>

        <xsl:otherwise>
          <xsl:copy-of select="$openTag"/>
          <xsl:copy-of select="$LogText"/>
          <xsl:copy-of select="$closeTag"/>
        </xsl:otherwise>
      </xsl:choose>
    </div> 
```

问题是`div`标签作为文本输出，而不是被识别为 HTML 标签。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T08:01:19.640

XSLT 是一种树转换语言：它以一棵节点树作为输入，并生成一棵节点树作为输出。它不读取包含开始和结束标记的词法 XML，也不输出包含开始和结束标记的词法 XML。输入树（通常）由称为 XML 解析器的单独处理器从词法 XML 构造，输出树（通常）由称为 XML 序列化器的单独处理器转换为词法 XML。

disable-output-escaping 是一种 hack，XSLT 处理器借此向串行器发送带外信息。因此，它会在转换器和序列化程序之间产生不希望的紧密耦合，这会阻止您的 XSLT 代码在没有序列化程序的管道中工作（例如，Firefox）。

看起来好像您的逻辑正在尝试解决“组相邻”问题：将具有相同所有者 ID 的所有相邻元素分组。在 XSLT 中有很多更好的方法可以在不使用序列化技巧的情况下解决该问题。在 XSLT 2.0 中：

```
<xsl:for-each-group select="*" group-adjacent="owner-id">
  <div>
    <xsl:copy-of select="current-group()"/>
  </div>
</xsl:for-each-group> 
```

如果您受限于 XSLT 1.0，这会有点棘手，但并不难：查找“兄弟递归”的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:11:31.953

这就是您*实际*需要的 XSLT 1.0 转换。

它创建了一个结构良好的 HTML 嵌套树，没有任何`disable-output-escaping`技巧。

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
  <xsl:output method="html" indent="yes" />

  <!-- index Nodes by their owner ID -->
  <xsl:key name="kNodeByOwnerId" match="Node" use="Prp[@name = 'owner id']/@value" />

  <xsl:template match="/">
    <html>
      <head>
        <style type="text/css"><![CDATA[
          body {
            font-size: 14px;
            font-family: verdana;
            background-color: white;
          }
          div.root {
            padding: 0px 0px 2px 0px;
          }
          div.root div {
            padding: 0px 0px 0px 0px;
            margin-left: 3em;
          }
          div.remark {
            margin-left: 2em;
          }
          img.icon {
            padding-right: 5px;
          }
          span.log {
            font-weight: bold;
          }
          span.log.fail {
            color: red;
          }
          span.log.pass {
            color: green;
          }
          span.log.info {
            color: blue;
          }
        ]]></style>
      </head>
      <body>
        <!-- output "top level" nodes, i.e. those with owner ID -1 -->
        <xsl:apply-templates select="key('kNodeByOwnerId', '-1')">
          <xsl:sort select="substring-after(@name, 'message ')" data-type="number" />
          <xsl:with-param name="containerClass" select="'root'" />
        </xsl:apply-templates>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="Node">
    <xsl:param name="containerClass" select="''" />

    <xsl:variable name="messageClass">
      <xsl:apply-templates select="Prp[@name = 'type']" />
    </xsl:variable>

    <div class="{$containerClass}">
      <img class="icon" src="./{$messageClass}.png" />

      <span class="log {$messageClass}">
        <xsl:value-of select="Prp[@name='message']/@value"/>
      </span>

      <xsl:apply-templates select="Prp[@name = 'remarks']" />

      <!-- output nodes that belong to this node (recursive!) -->
      <xsl:apply-templates select="key('kNodeByOwnerId', Prp[@name = 'id']/@value)">
        <xsl:sort select="substring-after(@name, 'message ')" data-type="number" />
      </xsl:apply-templates>
    </div>
  </xsl:template>

  <xsl:template match="Prp[@name = 'remarks']">
    <xsl:if test="normalize-space(@value) != ''">
      <div class="remark">              
        <img class="icon" src="./info.png" />
        <xsl:value-of select="@value"/>              
      </div>
    </xsl:if>
  </xsl:template>

  <xsl:template match="Prp[@name = 'type']">
    <xsl:choose>
      <xsl:when test="@value = '0'">pass</xsl:when>
      <xsl:when test="@value = '4'">info</xsl:when>
      <xsl:otherwise>fail</xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

注意使用`<xsl:key>`. 可以[在我的较早答案中](https://stackoverflow.com/a/955527/18771)找到密钥如何工作的详尽解释。

该代码非常简单明了，因此您应该可以轻松理解它的作用。不要犹豫，问是否有任何不清楚的地方。

我强烈建议将 CSS 代码放入单独的文件中。

# html - textarea 为每个 \n 添加空格

> ID：10408914
> 
> 赞同：2
> 
> 时间：2012-05-02T06:42:57.010
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, textarea, newline

这是一个字段的值：

```
"This is my special statement.\nLine 2.\nLine 3." 
```

在我的文本区域中，它显示如下：

```
This is my special statement.
            Line 2.
            Line 3. 
```

我`erb`的这个文本区域的代码是：

```
<%= text_area :user, :custom_statement, :class => "field" %> 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:21:06.583

您是否以文本区域的内容为中心？检查 .field 的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:38:20.490

它很简单：

```
"Your text".gsub("\n","\r") 
```

# android - 地图绘制路径并计算距离

> ID：10408917
> 
> 赞同：0
> 
> 时间：2012-05-02T06:43:09.607
> 
> 标签：android, google-maps

如何绘制路径并计算移动距离。下面的代码不计算 onLocationChanged 方法的距离？

```
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

    String text = String.format("Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f\nDistance:\t %f",
            location.getLatitude() *1E6, location.getLongitude() *1E6,
            location.getAltitude() *1E6, location.getBearing() *1E6, location.distanceTo(location));
            textOut.setText(text);
    lat = (int) (location.getLatitude() *1E6);
    longi = (int) (location.getLongitude() *1E6);
    GeoPoint myLocation = new GeoPoint(lat, longi);
    OverlayItem overlayItem = new OverlayItem(myLocation, "WHATZ UP", "2nd String");
    StagePoint custom = new StagePoint(d, Start.this);
    custom.insertPinpoint(overlayItem);
    overlayList.add(custom);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T09:58:30.607

```
private class MyLocationOverlay1 extends MyLocationOverlay {
@Override
public void drawMyLocation(Canvas canvas, MapView mapView, Location lastFix, GeoPoint myLocation, long when) 
        super.drawMyLocation(canvas,mapView,lastFix,myLocation,when);

        Location bLocation = new Location("reverseGeocoded");
        bLocation.setLatitude(FindList.gpslat);           
        bLocation.setLongitude(FindList.gpslong);         
        Location aLocation = new Location("reverseGeocoded");
        aLocation.setLatitude(myLocation.getLatitudeE6() / 1e6);
        aLocation.setLongitude(myLocation.getLongitudeE6() / 1e6);

        int distance = (int)aLocation.distanceTo(bLocation);  
        String str = " (" + String.valueOf(distance) + " meters)";
}
} 
```

# iphone - 如何使用终端将 .p12 文件转换为 .pem 文件？

> ID：10408920
> 
> 赞同：26
> 
> 时间：2012-05-02T06:43:22.637
> 
> 标签：iphone, ios, terminal, pem, pkcs#12

我已经有一个`development certificate in apple developer portal`. 我正在开发一个 iPhone 应用程序，我想在这个应用程序中集成 Apple 推送通知。我创建了一个`new App ID`使用现有证书和`enabled the Push Notification in this app id`. 我创建了一个`new Provisioning Profile`使用新创建的应用程序 ID。在这些步骤之前，我已经创建并下载了`.cer file from keychain access`. 完成这些步骤后`created SSL (Apple Push Notification Service SSL certificate) file and installed`，我在我的 Mac 钥匙串访问中下载了新的。一旦我安装了这个文件，验证（那里有绿色勾号）和`got the .p12 file from this ssl file`.

我按照苹果文档`RemoteNotificationsPG.pdf`，在保存 .p12 文件后他们提到的这个文档中打开终端应用程序并输入以下推荐，

```
openssl pkcs12 -in Certificates.p12 -out Certificates.pem -nodes 
```

我在我的终端应用程序中使用了它，但出现了错误消息，即

```
Error opening input file Certificates.p12
Certificates.p12: No such file or directory 
```

您能否建议或指导我在哪里做错或在这些步骤中遗漏了什么？请帮我。提前致谢。

编辑：

我将我的 Certificates.p12 文件存储在我的桌面上。文件夹路径是`Desktop->1/5/2012_Certificate->2/5/12->Certificates.p12`

我`'ls' command`在终端中使用过它没有列出我的 Certificates.p12 文件。

我已经输入`cd *path*`了这个返回`No such file or directory`。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T06:45:59.810

您在正确的目录中吗？使用 ls 命令，它是否列出 Certificates.p12？

编辑：在终端类型中：

```
ls 
```

这将列出您所在当前目录的所有文件。如果未列出 Certificates.p12，则说明您不在终端的正确目录中。

要获得正确的目录类型：

```
cd *path* 
```

其中 path 是包含 Certificates.p12 的文件夹。您可以在键入 cd 后将该文件夹拖放到终端中。击回。然后运行 ​​openssl 命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-27T18:04:35.173

打开终端，点击`ls`列出当前目录下的项目，

然后，如果您不在 .p12 移动到正确目录的文件夹中

```
cd directory path 
```

例如，

```
cd Downloads 
```

然后列出使用的文件并确保 .p12 文件存在于目录中。

然后使用以下命令将 .p12 文件转换为 .pem 文件。

```
openssl pkcs12 -in filename.p12 -out filename.pem -nodes 
```

您创建的 .pem 文件将保存在具有 .p12 文件的目录中。

# python - 如何使用 Python ElementTree 获取元素树的所有子元素？

> ID：10408927
> 
> 赞同：30
> 
> 时间：2012-05-02T06:43:50.257
> 
> 标签：python, xml, elementtree

我想找到一种方法来获取元素树的所有子元素，因为自 Python 2.7 版`ElementTree.getchildren()`以来已弃用。 我不想再使用它了，虽然我现在仍然可以使用它。`getchildren()`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-02T06:56:49.120

的所有子元素（后代）`elem`：

```
all_descendants = list(elem.iter()) 
```

一个更完整的例子：

```
>>> import xml.etree.ElementTree as ET
>>> a = ET.Element('a')
>>> b = ET.SubElement(a, 'b')
>>> c = ET.SubElement(a, 'c')
>>> d = ET.SubElement(a, 'd')
>>> e = ET.SubElement(b, 'e')
>>> f = ET.SubElement(d, 'f')
>>> g = ET.SubElement(d, 'g')
>>> [elem.tag for elem in a.iter()]
['a', 'b', 'e', 'c', 'd', 'f', 'g'] 
```

要排除根本身：

```
>>> [elem.tag for elem in a.iter() if elem is not a]
['b', 'e', 'c', 'd', 'f', 'g'] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-08-22T08:47:06.140

在 pydoc 中提到在节点上使用 list() 方法来获取子元素。
`list(elem)`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-02T11:31:21.737

如果要获取所有元素“a”，可以使用：

```
a_lst = list(elem.iter('a')) 
```

如果`elem`也是'a'，它将被包括在内。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-24T09:27:54.537

也许这与 OP 实际问题不对应，但在更大的意义上，我建议如果有人想获得所有以某个名称命名的元素，例如“对象”可以使用（[@Turtles Are Cute](https://stackoverflow.com/a/42552523/4298200)的另一种方法至少对我来说看起来更自然）：

```
objs = tree.findall('object') 
```

它还返回一个列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-02T10:13:25.407

没有一个现有的答案会找到所有的孩子。此解决方案使用 BeautifulSoup 而不是 ETree，但会找到所有子级，而不仅仅是顶级：

```
from bs4 import BeautifulSoup    

with open(filename) as f:
    soup = BeautifulSoup(f, 'xml')

results = soup.find_all('element_name') 
```

# java - 如何使用 java 在 selenium 中显式地等待 driver.get()

> ID：10408928
> 
> 赞同：3
> 
> 时间：2012-05-02T06:44:02.533
> 
> 标签：java, selenium, webdriver

如何等待 driver.get()，因为我们使用 .get() 访问的 URL 是不知道的。并且可能需要未知时间，所以我们必须给 diver.get() 30 秒超时，然后如何给它。

以下是它的代码..

```
package org.openqa.selenium.example;

import java.util.List;

import org.openqa.selenium.By

import org.openqa.selenium.WebDriver;

import org.openqa.selenium.WebElement;

import org.openqa.selenium.firefox.FirefoxDriver;

public class MyClass{

    public static void main(String[] args) throws Exception {

        // The Firefox driver supports javascript 

        WebDriver driver = new HtmlUnitDriver();

        // Go to the some websites

        driver.get("http://www.abced.com/123456/asd.htm");

        /***  Here we DONT get back the driver, so we need to Give Time out of 30 seconds**/

        final List<WebElement> element1= driver.findElements(By.tagName("a"));

    for (WebElement webElement : element1) {

        String urlFromPage = webElement.getAttribute("href");

                System.out.println(urlFromPage);

        }

     }

} 
```

我试过了

```
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
driver.get(thisPage.url); 
```

它不工作..请建议，tx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:55:51.070

如果您想等待页面加载，您应该使用该`pageLoadTimeout(long time, java.util.concurrent.TimeUnit unit)`方法。`implicitlyWait(long time, java.util.concurrent.TimeUnit unit)`用于等待尚未出现的元素，而不是等待页面加载。

在您的 WebDriver 实例上，您应该调用与您使用的方法链类似的方法链`implicitlyWait()`。这将按顺序调用：

*   `manage()`- 驱动管理界面
*   `options()`- 驱动程序选项界面
*   `timeouts()`- 超时选项界面
*   `pageLoadTimeout(...)`- 将超时设置为您想要的时间

[您可以在此处](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html)找到相关的 javadoc 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:04:00.147

相反，您可以使用 WebDriverWait 来指定要检查的条件和最大超时。这可以按如下方式使用：

```
WebDriverWait _wait = new WebDriverWait(driver, new TimeSpan(0, 0, 2)); //waits 2 secs max
_wait.Until(d => d.FindElement(By.Id("name"))); 
```

[我已经对这个](https://stackoverflow.com/questions/10404160/selenium-web-driver-explicit-wait-vs-implicit-wait/10404947#10404947)问题发布了类似的答案。

# html5-canvas - 如何在 HTML5 画布元素的情况下使用 jcrop 插件

> ID：10408929
> 
> 赞同：0
> 
> 时间：2012-05-02T06:44:03.043
> 
> 标签：html5-canvas, jcrop

我是这个画布的新手。最近在我的项目中，当用户在服务器上上传图像时，图像正在画布元素上动态预览。现在我想裁剪它的一部分。我使用了 jcrop 插件，但没有知道如何获得裁剪区域。任何关于 jcrop 使用的小帮助也表示赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T07:03:57.357

如果你使用 jcrop，你就不必关心画布的东西。

只需创建这样的图像

```
<img src="myimage.jpg" id="cropbox" /> 
```

jcrop 将完成剩下的工作。像这样使用它（并添加您需要的选项）：

```
$('#cropbox').Jcrop(); 
```

官方网站上的选项和教程的完整列表：http: [//deepliquid.com/projects/Jcrop/demos.php](http://deepliquid.com/projects/Jcrop/demos.php)

**编辑 ：**

如果你有一个要裁剪的画布，那么你不应该使用 JCrop 但是这个：

```
drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) 
```

![drawImage 参数说明](../Images/22b095f639587d21f6c89bd9d024b9c8.png)

**参数 Image 可以是画布对象**。然后，要将画布提取到图像，请使用 toDataURL 函数。

完整的文档可在 mozilla MDN [https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:06:53.800

jcrop-canvas 看起来很有前途：[https ://github.com/andrewlin12/jcrop-canvas](https://github.com/andrewlin12/jcrop-canvas)

# android - 我如何在android中制作历史计算器？

> ID：10408934
> 
> 赞同：0
> 
> 时间：2012-05-02T06:44:32.747
> 
> 标签：android

我正在制作一个与 Windows 计算器相同的计算器。我被困在历史功能上。哪个是实现 Windows Calculator 中看到的历史记录功能的最佳 UI 控件？我还想要历史上的 onclick 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:09:45.927

我不确定你如何表示计算，但你可以有一个像这样的简单类：

```
enum Operator {PLUS,MINUS,DIV,MULT};

class Calculation {
    float operand1,operand2;
    Operator operator;
    public Calculation(float op1,float op2,Operator operator){
        this.operand1=op1;
        this.operand1=op2;
        this.operator=operator;
    }
} 
```

然后当计算完成后，创建一个这种类型的对象并将其添加到一个 ArrayList 中：

```
List<Calculation> history = new ArrayList<Calculation>();// history

history.add(new Calculation(5,5,Operator.PLUS));// add a new `Calculation` to our list 
```

然后`history.get(some_integer)`根据您的 UI 使用 访问列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:56:46.763

您需要在此处使用索引存储所有操作和结果。每次执行操作时增加索引。要检索过去的操作，操作索引即可获取值。您可以使用 Collection API 来存储操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T06:50:10.870

您可以只使用包含许多先前输入的计算的[列表吗？](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)如果您事先知道最大可能的历史记录大小，则可以坚持使用普通数组，但 List 将为您提供更大的灵活性。

# timeout - Talend - 超过锁定等待超时

> ID：10408940
> 
> 赞同：2
> 
> 时间：2012-05-02T06:45:00.573
> 
> 标签：timeout, etl, talend

我使用 ETL Talend Open Studio (TOS)。我想将数据库 A 转移到数据库 B。我使用 tMap 组件。当我使用 tLogRow 查看结果时，没关系。TOS 正确显示数据。但是当我进行转移时，TOS 会写**"Lock wait timeout exceeded; try restarting transaction"**。

没看懂这个问题……读数据没问题，但是写数据有问题。你能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:17:40.767

尝试使用与 Mysql 的单个连接来运行您的作业（我假设您正在使用它，因为错误是 mysql 错误）

当您尝试同时从两个或多个连接中插入/更新/删除时，可能会发生上述错误。

要创建单个连接并让所有组件共享它，您需要一对组件：“tMysqlConnection”和“tMysqlCommit”

Connection 组件应在您尝试查询数据库之前放置。一旦你在工作中拥有它，你可以通过选择“使用现有连接”将 tMysqlInput 组件链接到它

提交组件将发出提交命令并关闭事务。

对于正在使用的每个单独的数据库服务器，您都需要连接组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:32:10.857

基础 A 包含 300 篇文章。我认为这个问题是由 Talend Open Studio 引起的。TOS 不能执行超过 100 篇文章。我试图将碱基A“切割”成三个碱基。然后，我运行 TOS。错误已丢失。这很奇怪......但它有效。

# regex - NSRegularExpression 匹配不起作用

> ID：10408941
> 
> 赞同：0
> 
> 时间：2012-05-02T06:45:05.133
> 
> 标签：regex, nsstring, nsregularexpression, nsstringencoding

我正在尝试替换 NSString 中的一些转义 unicode。我对 CFString 函数没有任何运气，所以我想我会尝试正则表达式。

这是正则表达式

```
NSRegularExpression *regexUnicode2 = [NSRegularExpression regularExpressionWithPattern:@"(\\u([0-9A-Fa-f]){4}){2}" options:0 error:&error]; 
```

然后我尝试使用它来匹配

```
NSArray *twoEscapeArray = [regexUnicode2 matchesInString:selfCopy options:0 range:NSMakeRange(0, self.length)]; 
```

selfCopy 是输入字符串的可变副本。这是该字符串的一部分：

> muestran al p\u00c3\u00bablico las encuadernaciones de las colecciones reales adem\u00c3\u00a1s de otros objetos hist\u00c3\u00b3ricos en relaci\u00c3\u00b3n con \u00c3\u00a9stas。
> 
> La muestra, thinkada a nivel mundial como uno de los conjuntos ligatorios hist\u00c3\u00b3ricos m\u00c3\u00a1s importantes, se completa con obras de arte como armas, alfombras y relojes。Estos son objetos que ayudan a entender la encuadernaci\u00c3\u00b3n como elemento basic de la cultura de corte。
> 
> Los fodos de la Real Biblioteca, del Real Monasterio de San Lorenzo de El Escorial, del Monasterio de Santa Mar\u00c3\u00ada la Real de las Huelgas de Burgos, del Monasterio de las

如果没有适当的转换，当我将这些转义的 unicode 对放入 UIWebView 时，它们将被视为单个字符（每对产生两个字符）。

这就是原始 JSON 数据的编码方式，我没有任何运气将其正确转换为拉丁字符。

无论如何，问题在于`twoEscapeArray`匹配尝试后数组为零。我不确定为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:04:40.293

你的意思`\u00c3\u00ba`是正在转换为`Ãº`？这对我来说似乎是正确的行为。真正的问题是那些 Unicode 转义符是如何进入其中的。看起来文本在某些时候被错误解码（可能是在创建 NSString 时？），字母的两字节 UTF-8 编码应该是什么`ú`（U + 00FA，带有 Acute 的拉丁小写字母 U）是解码为两个字符。

尝试回到创建 NSString 的位置，这次指定 UTF-8 作为编码。

# android - 在 android 布局中的微调器旁边添加和图像

> ID：10408942
> 
> 赞同：1
> 
> 时间：2012-05-02T06:45:07.567
> 
> 标签：android, android-layout

我只想`Spinner`在我的布局旁边添加一个图像。我尝试`align:layout_gravity = "right"`了图像，但这将图像移动到布局中的右侧和`Spinner`相同布局中的当前下方。我想要的是除了`Spinner`. 下面是xml布局文件：

```
<LinearLayout
    android:id="@+id/topLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_gravity="center"
    android:background="@color/headingBgColor"
    android:gravity="center"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/yourName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="Group"
        android:textColor="@color/black" />

    </ImageView>
</LinearLayout>

<LinearLayout
    android:id="@+id/bottomLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="5sp" >

    <Button
        android:id="@+id/deleteBlockLog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Tasks"
        android:textSize="@dimen/font_size_10"
        android:textStyle="bold" />

    <Button
        android:id="@+id/deleteBlockLog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Messages"
        android:textSize="@dimen/font_size_10"
        android:textStyle="bold" />

    <Button
        android:id="@+id/deleteBlockLog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Groups"
        android:textSize="@dimen/font_size_10"
        android:textStyle="bold" />

    <Button
        android:id="@+id/deleteBlockLog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Notes"
        android:textSize="@dimen/font_size_10"
        android:textStyle="bold" />

    <Button
        android:id="@+id/deleteBlockLog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="MyProfile"
        android:textSize="@dimen/font_size_10"
        android:textStyle="bold" />
</LinearLayout>

<LinearLayout
    android:id="@+id/centerLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/topLayout"
    android:orientation="vertical"
    android:padding="10sp" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:paddingTop="20dip" />

    <ImageView
        android:id="@+id/imageButton"
        android:layout_width="100dp"
        android:layout_height="70dp"
        android:layout_gravity="right"
        android:src="@drawable/contacts" />

    <LinearLayout
        android:id="@+id/centerLqayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="10sp" >

        <CheckBox
            android:id="@+id/sms"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="SMS"
            android:textColor="@color/black" />

        <CheckBox
            android:id="@+id/email"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Email"
            android:textColor="@color/black" />
    </LinearLayout>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="140dp"
        android:gravity="top"
        android:inputType="textPostalAddress" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/deleteBlockLog1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="Send"
        android:textSize="@dimen/font_size_15" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:49:43.810

`LinearLayout`将方向设置为`vertical`将子视图置于另一个之下。你有两个选择：

*   `Spinner`您可以将and the包装`ImageView`在另一个`LinearLayout`中，并将方向设置为，`horizontal`以便两个视图最终位于同一条线上。

例子：

```
<LinearLayout android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:orientation="horizontal">
   <Spinner
    android:id="@+id/spinner1"
    android:layout_width="140dp"
    android:layout_height="wrap_content"
    android:paddingTop="20dip" />

  <ImageView
    android:id="@+id/imageButton"
    android:layout_width="100dp"
    android:layout_height="70dp"
    android:src="@drawable/contacts" />

</LinearLayout> 
```

*   您使用的布局允许子项相对于其他人（如 a ）而不是具有 id`RelativeLayout`的父项放置。`LinearLayout``centerLayout`

# search-engine - 如何在没有 robots.txt 的情况下阻止机器人

> ID：10408943
> 
> 赞同：1
> 
> 时间：2012-05-02T06:45:08.643
> 
> 标签：search-engine, web-crawler, robots.txt

众所周知，robots.txt 可以帮助我们避免网络爬虫/机器人对某些网页/部分进行索引。但是使用这种方法也有一定的缺点： 1\. 网络爬虫可能不会监听 robots.txt 文件；2.您将要保护的文件夹暴露给所有人；

还有另一种方法可以阻止要保护的文件夹免受爬虫的侵害？请记住，可能希望从浏览器（如 /admin）访问这些文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:47:15.457

检查`User-Agent`请求的标头，如果标头包含机器人的名称，则发出 403。这将阻止所有诚实的机器人，但不会阻止不诚实的机器人。但话又说回来，如果机器人真的诚实，它会服从`robots.txt`的。

# c# - 隐藏密码文本

> ID：10408954
> 
> 赞同：6
> 
> 时间：2012-05-02T06:46:25.257
> 
> 标签：c#, winforms, password-protection

我有一个使用 UseSystemPasswordChar 的文本框，因此它不会显示用户输入的密码。问题是密码仍然可以被 Spy++ 之类的东西读取。我正在寻找一种方法来隐藏它，就像他们在 Services.msc > 登录选项卡的密码字段中所做的那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T08:43:30.383

这是我到目前为止所得到的。

您可以通过一些独特的事件来指示是否已接受按下的键、InputFilter 或 RealText 是否已更改等来改进这一点...

另一个需要改进的地方是 InputFilter 的默认用法，因为使用 char 和 Keys 并不能真正适用于许多特殊键。例如 - 目前，如果您在 PasswordBox 处于焦点时按 Alt+F4，它将输入“s”......所以有一大堆错误需要修复。

最后，可能有一种更优雅的方式来处理大写字母和非大写字母的输入，而不是我在那里所做的。

所以这里是：

```
public class PasswordBox : TextBox
{
    private string _realText;

    public string RealText
    {
        get { return this._realText; }
        set
        {
            var i = this.SelectionStart;

            this._realText = value ?? "";

            this.Text = "";
            this.Text = new string('*', this._realText.Length);

            this.SelectionStart = i > this.Text.Length ? this.Text.Length : i;
        }
    }

    private Func<KeyEventArgs, bool> _inputFilter;

    public Func<KeyEventArgs, bool> InputFilter
    {
        get { return this._inputFilter; }
        set { this._inputFilter = value ?? (e => true); }
    }

    public PasswordBox()
    {
        this.RealText = "";
        this.InputFilter = e => "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".Any(c => c == e.KeyValue);
    }

    protected override void OnKeyDown(KeyEventArgs e)
    {
        e.SuppressKeyPress = true;

        switch (e.KeyCode)
        {
            case Keys.Back:
                if (this.SelectionStart > 0 || this.SelectionLength > 0)
                {
                    this.RealText = this.SelectionLength == 0
                                        ? this.RealText.Remove(--this.SelectionStart, 1)
                                        : this.RealText.Remove(this.SelectionStart, this.SelectionLength);
                }
                break;
            case Keys.Delete:
                if (this.SelectionStart == this.TextLength)
                {
                    return;
                }

                this.RealText = this.RealText.Remove(this.SelectionStart, this.SelectionLength == 0 ? 1 : this.SelectionLength);
                break;
            case Keys.X:
            case Keys.C:
            case Keys.V:
                if (e.Control)
                {
                    return;
                }
                goto default;
            case Keys.Right:
            case Keys.Left:
            case Keys.Up:
            case Keys.Down:
            case Keys.Shift:
            case Keys.Home:
            case Keys.End:
                e.SuppressKeyPress = false;
                base.OnKeyDown(e);
                break;
            default:
                if (e.Control)
                {
                    e.SuppressKeyPress = false;
                    base.OnKeyDown(e);
                    break;
                }

                if (this.InputFilter(e))
                {
                    var c = (char)e.KeyValue;

                    if (e.Shift == IsKeyLocked(Keys.CapsLock))
                    {
                        c = char.ToLower(c);
                    }

                    this.RealText = this.RealText.Remove(this.SelectionStart, this.SelectionLength)
                        .Insert(this.SelectionStart, c.ToString());

                    this.SelectionStart++;
                }
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:04:08.860

所以尝试这样的事情

```
 private string realpass = "";
        private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar == (Char) Keys.Back)
                realpass += realpass.Substring(0, realpass.Length - 2);
            realpass += e.KeyChar.ToString();
            textBox1.Text = "";
            for (int i = 0; i < realpass.Length; i++)
                textBox1.Text += "*";
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T07:14:14.507

如果您打算收集 Windows/域用户凭据，则不应使用自己的对话框。您应该使用 Windows 通过 PInvoke 提供的内容，或者简单地使用这样的包装器，

[http://weblogs.asp.net/hernandl/archive/2005/11/21/usercredentialsdialog.aspx](http://weblogs.asp.net/hernandl/archive/2005/11/21/usercredentialsdialog.aspx)

和这个，

[http://credentials.codeplex.com/](http://credentials.codeplex.com/)

# android - NFC Android：解码使用 NXP NFC Writer 编写的 Mifare 标签

> ID：10408957
> 
> 赞同：0
> 
> 时间：2012-05-02T06:46:46.923
> 
> 标签：android, authentication, nfc, mifare

我在搞乱一些 nfc 标签，我用 nxp 公司制作的应用程序“TagWriter”向它们写了纯文本。是否可以制作可以读取此纯文本的应用程序？还是由于 nxp 应用程序的某些授权密钥而这不可能？或者以前有人这样做过吗？

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:00:41.113

有关如何将 NDEF 消息写入和读取 MIFARE CLassic 标签的完整文档是公开的，请参阅[http://www.nxp.com/documents/application_note/AN1304.pdf](http://www.nxp.com/documents/application_note/AN1304.pdf)和[http://www.nxp.com/documents /application_note/AN1305.pdf](http://www.nxp.com/documents/application_note/AN1305.pdf)。第一个文档列出了第 11 页和第 12 页上使用的身份验证密钥。对于密钥 A 的 MAD 扇区，使用值 0xA0A1A2A3A4A5，而对于密钥 A，NDEF 数据扇区使用值 0xD3F7D3F7D3F7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:57:58.927

您使用过哪个 MIFARE 标签？有不止一种类型......并不是说这里也是“NXP TagInfo”应用程序 - 它为您提供有关标签的详细信息。

USB阅读器也有相当不错的桌面软件。

请注意，Ultralight C 提供基于 3DES 的身份验证，这可能需要指定的内存块。我怀疑 NFC 编写器是否支持 - 这可能已禁用，因此保存的文本是 TLV 中的纯文本 RTD NDEF 消息。

BR 斯坦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T07:21:38.597

默认情况下，NFC 不需要任何特殊的 NXP 身份验证。[请参阅http://nfc.android.com](http://nfc.android.com)上的 StickyNotes 应用程序。

# java - android中的Json Parsin

> ID：10408961
> 
> 赞同：0
> 
> 时间：2012-05-02T06:47:04.063
> 
> 标签：java, android, web-services, text-parsing

[http://www.taxmann.com/TaxmannWhatsnewService/Services.aspx?service=getStatutesTabNews](http://www.taxmann.com/TaxmannWhatsnewService/Services.aspx?service=getStatutesTabNews)

这是我的网络服务。我想解析它，我想显示 news_id 和新闻标题。请张贴，向我展示如何解析它，以便我可以将所有值存储在一个字符串中。我试过了，但我得到了`Exception ..`

```
try
    {
        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost("http://www.taxmann.com/TaxmannWhatsnewService/Services.aspx?service=getStatutesTabNews");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    }catch(Exception e)
    {
        Log.e("log_tag", "Error in http connection"+e.toString());
    }

    //convert response to string
    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"),8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line="0";
        while ((line = reader.readLine()) != null) 
        {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }catch(Exception e)
    {
        Log.e("log_tag", "Error converting result "+e.toString());
    }

//  String name;
    try
    {
        jArray = new JSONArray(result);
        JSONObject json_data=null;
        for(int i=0;i<jArray.length();i++)
        {
            HashMap<String, String> map = new HashMap<String, String>();
            json_data = jArray.getJSONObject(i);

//              name=json_data.getString("name");
            map.put("id",  String.valueOf(json_data.getString("news_id")));

            map.put("title",json_data.getString("news_title"));
            map.put("shortdescription",json_data.getString("news_short_description"));
            map.put("date",json_data.getString("news_date"));
            mylist.add(map);
        }

    }
        catch(Exception e)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:22:55.837

您可以使用**Gson parser**进行解析。所以首先从[http://findjar.com/jar/com/google/code/gson/gson/1.1/gson-1.1.jar.html下载](http://findjar.com/jar/com/google/code/gson/gson/1.1/gson-1.1.jar.html)**gson-1.1.jar**文件

然后将 jar 文件添加到您的项目构建路径中，然后使用下面的代码进行解析（简单地用下面的代码替换您的解析代码）

```
 try
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.taxmann.com/TaxmannWhatsnewService/Services.aspx?service=getStatutesTabNews");
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        String  data = EntityUtils.toString(entity);

        Gson gson = new Gson();
        Type collectionType = new TypeToken<List<NewsData>>(){}.getType();
        List<NewsData> details = gson.fromJson(data, collectionType);
    }
    catch (Exception e) 
    {
        Log.i("error","error");
        e.printStackTrace();
    } 
```

上面代码的bean是

```
public class NewsData
{
    private String news_id = null;
    private String news_title = null;
    private String news_short_description = null; 
    private String news_date = null;

    public String getNews_id()
    {
        return news_id;
    }
    public void setNews_id(String newsId)
    {
        news_id = newsId;
    }
    public String getNews_title()
    {
        return news_title;
    }
    public void setNews_title(String newsTitle)
    {
        news_title = newsTitle;
    }
    public String getNews_short_description()
    {
        return news_short_description;
    }
    public void setNews_short_description(String newsShortDescription)
    {
        news_short_description = newsShortDescription;
    }
    public String getNews_date()
    {
        return news_date;
    }
    public void setNews_date(String newsDate)
    {
        news_date = newsDate;
    }
} 
```

并在您的清单中添加互联网权限

```
<uses-permission
        android:name="android.permission.INTERNET" /> 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:21:02.880

如果你仍然没有得到你的结果，你可以使用下面的代码。

```
static InputStream is = null;
    static JSONObject jObj = null;
    static JSONArray jsonArray=null;
    static String json = "";

mJsonArray=getJSONFromUrl(url);
        try{
        JSONObject mJsonObject=null;
        for(int i =0;i<mJsonArray.length();i++){
            if(!mJsonArray.isNull(i)){
                 HashMap<String, String> map = new HashMap<String, String>();
                 mJsonObject=mJsonArray.getJSONObject(i);
                 map.put("title",mJsonObject.getString("news_title"));
                 map.put("shortdescription",mJsonObject.getString("news_short_description"));
                 map.put("date",mJsonObject.getString("news_date"));
            //add you map in to list
            }
        }
        }catch(JSONException jexc){
            jexc.printStackTrace();
        }

public JSONArray getJSONFromUrl(String url) {

          // Making HTTP request
          try {
              // defaultHttpClient
              DefaultHttpClient httpClient = new DefaultHttpClient();
              HttpPost httpPost = new HttpPost(url);

              HttpResponse httpResponse = httpClient.execute(httpPost);
              HttpEntity httpEntity = httpResponse.getEntity();
              is = httpEntity.getContent();            

          } catch (UnsupportedEncodingException e) {
              e.printStackTrace();
          } catch (ClientProtocolException e) {
              e.printStackTrace();
          } catch (IOException e) {
              e.printStackTrace();
          }

          try {
              BufferedReader reader = new BufferedReader(new InputStreamReader(
                      is, "iso-8859-1"), 8);
              StringBuilder sb = new StringBuilder();
              String line = null;
              while ((line = reader.readLine()) != null) {
                  sb.append(line + "\n");
              }
              is.close();
              json = sb.toString();
          } catch (Exception e) {
              Log.e("Buffer Error", "Error converting result " + e.toString());
          }

          // try parse the string to a JSON object
          try {
            jsonArray =new JSONArray(json);
          } catch (JSONException e) {
              Log.e("JSON Parser", "Error parsing data " + e.toString());
          }

          // return JSON String
          return jsonArray;

      } 
```

# c# - 为javascript传递动态ID

> ID：10408965
> 
> 赞同：0
> 
> 时间：2012-05-02T06:47:36.230
> 
> 标签：c#, javascript, asp.net-mvc-3

当我点击一个复选框时，我想用 HTML 元素打开一个组。它适用于一组（因为那时我只有一个 id）。但如果我有更多组，每个组都有一个动态 id（用于 div-tag 和 input-tag）。这是我的 HTML 代码：

```
<div style="line-height: 1.7em; background-color: #eee;">
   <span style="padding-left: 8px; color: #eb8f00; font-size: 1.1em; font-weight: bold; font-family: 'Trebuchet MS', Verdana, Helvetica, Sans-Serif;">
      <input style="vertical-align: middle;" id="@currentElement.sGroupId" type="checkbox" name="@currentElement.sGroupId" />
      <label for="@currentElement.sGroupId">@currentElement.sGroupName</label>
   </span>
</div>

<div style="background-color: #eee;" class="@currentElement.sGroupName">
   <!-- Dynamic content -->
</div> 
```

现在我有那些由于我的 foreach 循环而动态的字符串。

@currentElement.sGroupId 看起来像“idgr_12”（只有数字改变）
@currentElement.sGroupName 是我要打开的“组”的名称（整个名称随着每个循环而变化）

这是我的 Javascript 代码：

```
$(function () {
   $("id from div").hide();
   $("id from input").change(function () {
      var $this = $(this);
      if ($this.is(":checked")) {
         $("id from div").show(250);
      }
      else {
         $("id from div").hide(250);
      }
   });
}); 
```

现在我得到例如三个组，每个组都有一个复选框。但是当我点击一个复选框时，每个组都会展开。我如何在我的 javascript 方法中获取这些动态 ID，以便只有激活复选框的组才会展开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:23:22.540

在您的 If 正文中，您可以使用相对选择器，例如

```
$(this).parent('div').show(250) 
```

# android - Android 从 Res 错误加载文件

> ID：10408968
> 
> 赞同：0
> 
> 时间：2012-05-02T06:47:54.543
> 
> 标签：android, file, file-io

我正在尝试从 res/raw 加载文本文件。我查看了几个代码片段并尝试实现一些方法，但似乎没有一个对我有用。我目前正在尝试工作的代码是这样的

```
TextView helloTxt = (TextView)findViewById(R.id.hellotxt);
        helloTxt.setText(readTxt());
    }

    private String readTxt() {

     InputStream inputStream = getResources().openRawResource(R.raw.hello);

     ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

     int i;
     try {
         i = inputStream.read();
         while (i != -1) {
             byteArrayOutputStream.write(i);
             i = inputStream.read();
         }
         inputStream.close();
     }
     catch (IOException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
     }

     return byteArrayOutputStream.toString(); 
```

但它与所有其他人一样面临同样的问题。

a)`(TextView)findViewById(R.id.hellotxt);`说它贬值了，Eclipses 建议迁移代码。

b)`getResources()`无法识别，只是建议我添加一个名为 getResources() 的方法。

最初我想使用资产文件夹，但得到与 b) 相同的错误，但使用 getAssets()。

这是我正在实现的一个单独的类文件`public class PassGen{}`，目前用一种方法调用它`public String returnPass(){}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:53:32.910

应该从上下文调用函数 getAssets 和 getResources。

如果您从 Activity 类中调用它，则不需要前缀，否则您需要将上下文传递给需要函数的类并调用例如 context.getAssets()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:20:46.780

活动课：

```
public class ReadFileActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Read read = new Read(getApplicationContext());

    TextView helloTxt = (TextView) findViewById(R.id.hellotxt);
    helloTxt.setText(read.readTxt());
}
} 
```

阅读类：

```
public class Read {

Context ctx;

public Read(Context applicationContext) {
    // TODO Auto-generated constructor stub

    this.ctx = applicationContext;
}

public String readTxt() {

    InputStream inputStream = ctx.getResources().openRawResource(R.raw.hello);

    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    int i;
    try {
        i = inputStream.read();
        while (i != -1) {
            byteArrayOutputStream.write(i);
            i = inputStream.read();
        }
        inputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return byteArrayOutputStream.toString();
}
} 
```

# java - 使用 JNI 时如何在 C++ 中获取 Java 异常的描述？

> ID：10408972
> 
> 赞同：22
> 
> 时间：2012-05-02T06:48:21.040
> 
> 标签：java, c++, java-native-interface

我想确定使用 JNI 从 C++ 代码调用该函数时 Java 函数引发了什么异常。我有以下代码可以捕获 Java 异常：

```
JNIEnv * pEnv; // assume this is properly initialized
jclass javaClass; // ditto
jmethodID javaFunction; // ditto
pEnv->CallStaticVoidMethod(javaClass, javaFunction);
jthrowable exc;
if(exc = pEnv->ExceptionOccurred())
{
    pEnv->ExceptionClear();
} 
```

我不知道如何在此 C++ 代码中获取有关 Java 异常的描述性信息。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T08:23:13.903

为了简洁起见，我省略`ExceptionCheck()`了在每次 JNI 调用之后调用并检查是否有任何失败的尝试定位方法：您应该在实现时添加这些。

首先，存储异常，然后获取获取有关信息所需的 Java 方法`Throwable`：

```
// Get the exception and clear as no
// JNI calls can be made while an exception exists.
jthrowable exception = pEnv->ExceptionOccurred();
pEnv->ExceptionClear();

jclass throwable_class = pEnv->FindClass("java/lang/Throwable");
jmethodID mid_throwable_getCause =
    pEnv->GetMethodID(throwable_class,
                      "getCause",
                      "()Ljava/lang/Throwable;");
jmethodID mid_throwable_getStackTrace =
    pEnv->GetMethodID(throwable_class,
                      "getStackTrace",
                      "()[Ljava/lang/StackTraceElement;");
jmethodID mid_throwable_toString =
    pEnv->GetMethodID(throwable_class,
                      "toString",
                      "()Ljava/lang/String;");

jclass frame_class = pEnv->FindClass("java/lang/StackTraceElement");
jmethodID mid_frame_toString =
    pEnv->GetMethodID(frame_class,
                      "toString",
                      "()Ljava/lang/String;"); 
```

其次，递归构造错误消息（您可能需要修改它）：

```
std::string error_msg; // Could use ostringstream instead.

_append_exception_trace_messages(*pEnv,
                                 error_msg,
                                 exception,
                                 mid_throwable_getCause,
                                 mid_throwable_getStackTrace,
                                 mid_throwable_toString,
                                 mid_frame_toString);

void _append_exception_trace_messages(
                        JNIEnv&      a_jni_env,
                        std::string& a_error_msg,
                        jthrowable   a_exception,
                        jmethodID    a_mid_throwable_getCause,
                        jmethodID    a_mid_throwable_getStackTrace,
                        jmethodID    a_mid_throwable_toString,
                        jmethodID    a_mid_frame_toString)
{
    // Get the array of StackTraceElements.
    jobjectArray frames =
        (jobjectArray) a_jni_env.CallObjectMethod(
                                        a_exception,
                                        a_mid_throwable_getStackTrace);
    jsize frames_length = a_jni_env.GetArrayLength(frames);

    // Add Throwable.toString() before descending
    // stack trace messages.
    if (0 != frames)
    {
        jstring msg_obj =
            (jstring) a_jni_env.CallObjectMethod(a_exception,
                                                 a_mid_throwable_toString);
        const char* msg_str = a_jni_env.GetStringUTFChars(msg_obj, 0);

        // If this is not the top-of-the-trace then
        // this is a cause.
        if (!a_error_msg.empty())
        {
            a_error_msg += "\nCaused by: ";
            a_error_msg += msg_str;
        }
        else
        {
            a_error_msg = msg_str;
        }

        a_jni_env.ReleaseStringUTFChars(msg_obj, msg_str);
        a_jni_env.DeleteLocalRef(msg_obj);
    }

    // Append stack trace messages if there are any.
    if (frames_length > 0)
    {
        jsize i = 0;
        for (i = 0; i < frames_length; i++)
        {
            // Get the string returned from the 'toString()'
            // method of the next frame and append it to
            // the error message.
            jobject frame = a_jni_env.GetObjectArrayElement(frames, i);
            jstring msg_obj =
                (jstring) a_jni_env.CallObjectMethod(frame,
                                                     a_mid_frame_toString);

            const char* msg_str = a_jni_env.GetStringUTFChars(msg_obj, 0);

            a_error_msg += "\n    ";
            a_error_msg += msg_str;

            a_jni_env.ReleaseStringUTFChars(msg_obj, msg_str);
            a_jni_env.DeleteLocalRef(msg_obj);
            a_jni_env.DeleteLocalRef(frame);
        }
    }

    // If 'a_exception' has a cause then append the
    // stack trace messages from the cause.
    if (0 != frames)
    {
        jthrowable cause = 
            (jthrowable) a_jni_env.CallObjectMethod(
                            a_exception,
                            a_mid_throwable_getCause);
        if (0 != cause)
        {
            _append_exception_trace_messages(a_jni_env,
                                             a_error_msg, 
                                             cause,
                                             a_mid_throwable_getCause,
                                             a_mid_throwable_getStackTrace,
                                             a_mid_throwable_toString,
                                             a_mid_frame_toString);
        }
    }
} 
```

我从几年前编写的代码中复制了这个（修改以消除样板`ExceptionCheck()`），但我没有编译我发布的内容，但一般方法希望很清楚。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-12T13:13:38.383

如果您只对异常的堆栈跟踪感兴趣，您可以：

```
if (env->ExceptionOccurred()) // check if an exception occurred
{
    env->ExceptionDescribe(); // print the stack trace          
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:56:56.103

解决这个问题的简单方法是声明 JNI 方法以抛出所有可能的异常，然后：

```
jthrowable throwable = ExceptionOccurred(env);
if (throwable != NULL)
   Throw(env, throwable); 
```

并让您的 Java 代码处理它。

# qt - 在 Qt 中查找可用的网络接入点

> ID：10408974
> 
> 赞同：0
> 
> 时间：2012-05-02T06:48:23.737
> 
> 标签：qt, network-programming, wireless, wifi, qtnetwork

我需要找到可用的网络连接，如 eth、wlan、蓝牙。Qt 是否会在检测到这些接入点时自动发出任何信号？而且，如果有超过 1 个连接可用，我怎么知道系统使用哪个接入点？并且如果仅存在 1 个连接 [除了 eth0]，例如：WLAN 我们是否需要应用任何其他设置来使用 ftp/htttp 协议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:49:12.250

我认为您正在寻找的是[`QNetworkConfigurationManager`](http://qt-project.org/doc/qt-4.8/qnetworkconfigurationmanager.html)Qt 4.7 中添加的内容。

> QNetworkConfigurationManager 提供对系统已知的网络配置的访问，并使应用程序能够在运行时检测系统功能（关于网络会话）。

它具有添加和删除配置的信号。

它还可以触发对`updateConfigurations()`插槽的扫描（完成时会发出信号）：

> 启动所有配置的更新。这可用于启动 WLAN 扫描或其他耗时的更新，这些更新可能需要获得正确的配置状态。

您可以[`QNetworkAccessManager`](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html)通过调用来设置 a 使用的连接`QNetworkAccessManager::setConfiguration`。

# zend-framework - Zend 框架中的常用常量变量

> ID：10408978
> 
> 赞同：0
> 
> 时间：2012-05-02T06:48:30.267
> 
> 标签：zend-framework

创建包含所有应用程序常量变量的类的最佳位置在哪里？
是吗：-**引导**
程序 -**在应用程序公共库中**

例如：1-当我从数据库中检索图像名称时，如果此记录没有图像，我想在某处放置一个默认值，以便我可以在我的模型中使用它

** 我在所有应用程序中使用的常量，所以如果我更改它，我不想回到我的代码中的所有内容并在任何地方更改它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T06:51:07.970

application.ini 是最好的地方，例如在那里定义一些常量

```
constants.PUBLIC_PATH =  APPLICATION_PATH "/../public/"
constants.THEME = blue 
```

然后在你的引导做

```
protected function setConstants($constants)
{
    foreach($constants as $name => $value)
    {
         if(!defined($name))
            define($name, $value);
    }

} 
```

ZF 从配置中获取“常量”并在引导程序中调用 setConstants 方法，传递所有以常量为前缀的行，因此它是一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T09:05:27.217

我尝试不使用常量，并且更喜欢类常量而不是全局常量。但是，当常量不可避免时，无论出于何种原因，我都会使用 .ini 配置文件和 Bootstrap/library/model 类常量。

## .ini 配置常量的示例

*（假设[默认 zf 项目结构](http://framework.zend.com/manual/en/learning.quickstart.create-project.html)）*

应用程序/配置/application.ini

```
constants.MESSAGE_1 = "Message 1"
constants.MESSAGE_2 = "Message 2" 
```

引导程序.php

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initConstants()
    {
        $options = $this->getOption('constants');

        if (is_array($options)) {
            foreach($options as $key => $value) {
                if(!defined($key)) {
                    define($key, $value);
                }
            }
        }
    }

    // ...
} 
```

控制器中的示例用法：

```
class IndexController extends Zend_Controller_Action
{
    public function indexAction()
    {
        $this->view->message1 = MESSAGE_1;
        $this->view->message2 = MESSAGE_2;
    }
} 
```

我将扩展上述内容以允许配置常量的定义方式*。*例如，您可能希望所有常量都大写或不大写，并允许或禁止已定义的常量，因此：

应用程序/配置/application.ini

```
constants.forceUppercase = 1
constants.allowAlreadyDefined = 1
constants.set.message_1 = "Message 1"
constants.set.message_2 = "Message 2" 
```

引导程序：

```
 protected function _initConstants()
    {
        $options = $this->getOption('constants');

        if (isset($options['set']) && is_array($options['set'])) {

            if (isset($options['forceUppercase'])
                && (bool) $options['forceUppercase']) {
                $options['set'] = array_change_key_case($options['set'], CASE_UPPER);
            }

            $allowAlreadyDefined = false;
            if (isset($options['allowAlreadyDefined'])
                && (bool) $options['allowAlreadyDefined']) {
                $allowAlreadyDefined = true;
            }

            foreach($options['set'] as $key => $value) {
                if (!defined($key)) {
                    define($key, $value);
                } elseif (!$allowAlreadyDefined) {
                    throw new InvalidArgumentException(sprintf(
                        "'%s' already defined!", $key));
                }
            }
        }
    } 
```

## 引导类常量

可能是您自己的库，或模型类等，这取决于。

在引导程序中：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    const MESSAGE_CONSTANT = "Hello World";

    // ...
} 
```

控制器中的示例用法：

```
class IndexController extends Zend_Controller_Action
{
    public function indexAction()
    {
        $this->view->message = Bootstrap::MESSAGE_CONSTANT;
    }
} 
```

# android - android ndk 套接字网络无法访问

> ID：10408980
> 
> 赞同：1
> 
> 时间：2012-05-02T06:48:38.847
> 
> 标签：android, c++, sockets, udp, sendto

我不知道这是我处理 Android 的方式，还是我的本机代码有问题，或两者兼而有之。

我在 C++ 中设置了一个 udp 套接字（由 swig 生成的包装器）：

```
udpSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
        if (udpSocket < 0)
        {
            pthread_mutex_unlock(&csOpenCloseUdp);
            throw IOException("Failed to open socket");
        }

        char bAllowMultiple = true;
        setsockopt(udpSocket, SOL_SOCKET, SO_REUSEADDR, &bAllowMultiple, sizeof(bAllowMultiple));
        setsockopt(udpSocket, IPPROTO_IP, IP_MULTICAST_TTL, (char *)&hopLimit, sizeof(hopLimit));
        setsockopt(udpSocket, IPPROTO_IP, IP_MULTICAST_IF, (char *)&localAddr, sizeof(localAddr));

        // Set to non-blocking mode
        unsigned long bMode = 1;
        ioctl( udpSocket, FIONBIO, &bMode );

        // Create the local endpoint
        sockaddr_in localEndPoint;
        localEndPoint.sin_family = AF_INET;
        localEndPoint.sin_addr.s_addr = localAddr.s_addr;
        localEndPoint.sin_port = groupEndPoint.sin_port;

        // Bind the socket to the port
        int r = bind(udpSocket, (sockaddr*)&localEndPoint, sizeof(localEndPoint));
        if (r == SOCKET_ERROR)
        {
            //LeaveCriticalSection(&csOpenCloseUdp);
            pthread_mutex_unlock(&csOpenCloseUdp);
            close();
            throw IOException("Failed to bind port");
        }

        // Join the multicast group
        struct ip_mreq imr;
        imr.imr_multiaddr = groupEndPoint.sin_addr;
        imr.imr_interface.s_addr = localAddr.s_addr;
        setsockopt(udpSocket, IPPROTO_IP, IP_ADD_MEMBERSHIP, (char*)&imr, sizeof(imr)); 
```

套接字没有抛出任何异常，并且在此之后它具有*一些*不是 INVALID_SOCKET 的值。

当我尝试发送数据包时，

```
int r = sendto(udpSocket, (char*)dataToSend, (size_t)length, 0, (sockaddr*)&groupEndPoint, (socklen_t)sizeof(groupEndPoint)); 
```

我得到 errno 101：网络无法访问。

我对套接字编程很陌生，而且我知道 Android 中的套接字是一种不好的开始方式，但事实是我必须完成这项工作并且时间很少。这里有人知道导致网络无法访问的可能原因吗？有没有人尝试在 Android 上使用 UDP 并能有所启发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:26:00.560

是否需要使用 C++ 套接字？如果可能的话，为了时间的利益，并且几乎为了一切的利益，我会推荐 Java API。以下是如何使用它的示例：[http](http://android-er.blogspot.com/2011/01/simple-communication-using.html) ://android-er.blogspot.com/2011/01/simple-communication-using.html 。我喜欢 C，但我建议不要在这里使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:54:33.723

解决了：

我只需要修改设备上的以太网设置，就可以让它与我的笔记本电脑对话。出于某种原因，它不喜欢使用专用链接，所以我正在通过本地网络路由器并且它正在工作。现在遇到不同的问题，但这个已经完成

# assembly - DCPU-16 中的 XNU 内核克隆

> ID：10408981
> 
> 赞同：0
> 
> 时间：2012-05-02T06:48:43.977
> 
> 标签：assembly, kernel, bsd, dcpu-16, mach

[https://github.com/galaxas0/MachX-Kernel](https://github.com/galaxas0/MachX-Kernel)

在我着手一个旨在失败的项目之前，我想通过提出一个简单的问题来解决问题，这样他们就不会失败：DCPU-16 到底如何加载内核……是虚拟的。我了解物理计算机上的引导和内核初始化过程，但是，DCPU-16 让我不知所措。我是否应该假设它确实是一个工作方式完全相同的 1:1 16 位处理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:26:07.557

DCPU-16 只是一个带有内存的 CPU 内核。有 I/O 扩展，但我认为它们中的任何一个都不能非常直接地引导 CPU。大多数仿真器只是在启动 CPU 之前将您想要的任何数据预加载到仿真处理器的内存中。

它肯定与最先进的技术相去甚远，但我[自己的 DCPU-16 仿真器](https://github.com/unwind/cade/blob/master/cade.h)也确实如此。

# jquery - 当我打开页面“对象不支持此属性或方法”时，IE8 显示此错误

> ID：10408982
> 
> 赞同：0
> 
> 时间：2012-05-02T06:48:45.423
> 
> 标签：jquery

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#my-dropdown,#my-dropdown3').Select();
    });
</script> 
```

执行此操作时，我收到错误：

> 对象不支持此属性或方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:43:10.660

你想用你的下拉菜单做什么？事件`.select()`可能不适用于选择框，因为文档说

> 当用户在其中进行文本选择时，选择事件会发送到元素。[http://api.jquery.com/select/](http://api.jquery.com/select/)

绑定事件`.change()`以选择框`#my-dropdown`& `#my-dropdown3`?

```
 $('#my-dropdown,#my-dropdown3').change(function(){ 
       alert($(this).val());

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:03:15.877

根据以下正确纠正您的方法：

```
$(document).ready(function(){         
   $('#my-dropdown,#my-dropdown3').select();     
}); 
```

# c# - 实现方法错误信息

> ID：10408983
> 
> 赞同：0
> 
> 时间：2012-05-02T06:48:48.183
> 
> 标签：c#, web-services

我正在开发一个网络服务来发送电子邮件。当我运行我的应用程序时，我收到以下错误：

`The method or operation is not implemented.`

我网站中的代码如下所示：

```
WebTestServiceApp.localhost.Service1 Send = new WebTestServiceApp.localhost.Service1();
        Send.Sendemail(txtTo.Text, txtSubject.Text, txtbody.Text); 
```

我的 webService 中的代码如下所示：

```
[WebMethod]
    public string Sendemail( String inValueTo, String inValueSub, String inValueBody) 
    {try
        {
            String valueTo = inValueTo;
            String valueSub = inValueSub;
            String valueBody = inValueBody;
           // String valueAttachmentPostedfile = inValueAttachmentPostedfile; //FileUpload1.PostedFile.FileName
          //  String valueAttachmentFileContent = inValueAttachemtnFileContent;  //FileUpload1.FileContent.fileName

            System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage(); // Creating new message.

            message.To.Add(valueTo);
            message.Subject = valueSub;
            message.From = new System.Net.Mail.MailAddress("shaunmossop@mweb.co.za");
            message.Body = valueBody;
            message.IsBodyHtml = true;

            //  string fileName = Path.GetFileName(valueAttachmentPostedfile); // Get attachment file
           //  Attachment myAttachment =
           //                  new Attachment(valueAttachmentFileContent, fileName);
           //   if (fileName != "")
           //   {
           //       message.Attachments.Add(myAttachment); // Send attachment
           //   }

            System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("smtp.gmail.com"); //Properties.Settings.Default.MailSMTPServer

            smtp.Port = 587;
            smtp.EnableSsl = true;
            smtp.UseDefaultCredentials = false;

            NetworkCredential netC = new NetworkCredential(Properties.Settings.Default.username, Properties.Settings.Default.password); // Useing Projects defult settings.
            smtp.Credentials = netC;
            smtp.Send(message);

            return "Message has been sent";
        }
        catch (Exception)
        {
            return "Message faild to send" ;

        }} 
```

webService 中的其余代码有效，我知道这一点是因为我在一个工作网站中使用了它，我的问题只是传递了值，或者我在 webService 中缺少一个步骤。

谁能看到一个明显的问题，我做错了什么，我在 VB 中使用了 web 服务，但没有在 C# 中使用，所以有区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:09:46.137

您当前的应用程序可能尚未更新 Web 参考，因此它可能与未实现该方法的情况相关联。

因此，对其进行检查和工作的唯一方法是尝试更新 Web 参考。

# php - PHP中的array_diff_uassoc()？

> ID：10408986
> 
> 赞同：-4
> 
> 时间：2012-05-02T06:49:10.543
> 
> 标签：php, html

```
function myfunction($v1, $v2) {
    if ($v1 == $v2) {
        return 0;
    }
    if ($v1 > $v2) {
        return 1;
    } else {
        return-1;
    }
}

$a1 = array(5 => "Rat", 2 => "Cat", 7 => "Horse");
$a2 = array(8 => "Rat",4 => "Cat",7 => "Horse");
print_r(array_diff_uassoc($a1, $a2, "myfunction")); 
```

它是如何执行的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:54:42.803

请阅读[手册](http://www.php.net/manual/en/function.array-diff-uassoc.php)。

> 它基本上比较两个或多个数组，检查差异，然后比较用户定义函数中的键，然后返回一个数组，其中包含第一个数组中的键和值，如果函数允许的话。
> 
> 与[array_diff_assoc()](http://www.php.net/manual/en/function.array-diff-assoc.php)不同，用户提供的回调函数用于索引比较，而不是内部函数。

请在[此处](http://ideone.com/miJ7z)查看您的代码的实时版本。它根据函数计算差值并给出以下输出。

```
Array
(
    [5] => Rat
    [2] => Cat
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T06:59:21.313

如果您看不懂， 请查看[这里有关您的程序的更多信息](http://php.net/manual/en/function.array-diff-uassoc.php)

# java - 如何在java中将一个图像添加到另一个图像

> ID：10408994
> 
> 赞同：5
> 
> 时间：2012-05-02T06:50:03.970
> 
> 标签：java, image

我有一张背景简单的图片。现在我需要在 (x, y) 位置放置另一个图像。这怎么可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T06:55:36.360

创建一个`BufferedImage`具有所需大小的。使用`getGraphics()`图像并绘制第一个图像，然后绘制第二个图像。`Graphics`有方法

```
public abstract boolean drawImage(Image img, int x, int y, 
                      Color bgcolor,
                      ImageObserver observer) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-02T06:58:17.887

您可以使用[drawImage](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)方法。也许是这样的：

```
try
{
    BufferedImage source = ImageIO.read(new File("..."));
    BufferedImage logo = ImageIO.read(new File("..."));

    Graphics g = source.getGraphics();
    g.drawImage(logo, 0, 0, null);
}
catch (Exception e)
{
    e.printStackTrace();
} 
```

# xml - 如何在 xslt 中获取同一父级的另一个元素？

> ID：10408999
> 
> 赞同：0
> 
> 时间：2012-05-02T06:50:15.230
> 
> 标签：xml, xslt

```
<name><last-name>aaa</last-name><first-name>bbb</first-name></name> 
```

模板是：

```
<xsl:template match="last-name">
  display first-name
</xsl:template> 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:35:29.320

**使用**：

```
<xsl:value-of select="../first-name"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:23:15.817

对于这个输入...

```
<name>
  <last-name>aaa</last-name>
  <first-name>bbb</first-name>
</name> 
```

这个样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
  <xsl:apply-templates />
</xsl:template>

<xsl:template match="first-name" />

<xsl:template match="last-name">
  <xsl:comment>for last-name of <xsl:value-of select="." /></xsl:comment>
  <first-name>
   <xsl:value-of select="following-sibling::*" />      
  </first-name>
</xsl:template>

</xsl:stylesheet> 
```

...产生...

```
<?xml version="1.0" encoding="utf-8"?>
<!--for last-name of aaa--><first-name>bbb</first-name> 
```