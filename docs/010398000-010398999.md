# StackOverflow 问答 10398000-10398999

# wpf - Datagrid鼠标悬停标题图像重叠

> ID：10398001
> 
> 赞同：0
> 
> 时间：2012-05-01T13:04:02.987
> 
> 标签：wpf, image, mouseover, overlapping, columnheader

当我在列标题上进行鼠标悬停时，我有图像要显示。但重要的是它应该显示在列标题区域下方。 ![在此处输入图像描述](../Images/47233d9c2226f2c150fa1d15d2ca2bb7.png)

我能够创建它，但它与下面的单元格重叠。这是图像。 ![在此处输入图像描述](../Images/57eff89c75364c181522fcff258288bf.png)

这是我的代码：

```
 <Style TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Height" Value="26" />
            <Setter Property="Width" Value="126" />
            <Setter Property="Foreground" Value="{DynamicResource ContrastWhiteBrush}" />
            <Setter Property="Background" Value="{DynamicResource ContentToGreyedOutBrush}" />
            <Setter Property="Template" Value="{StaticResource ColumnHeaderControlTemplate}" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="{DynamicResource GridHeaderMouseOverBrush}" />
                </Trigger>
                <Trigger Property="prism:DataGridProperties.IsMouseOverGridCellColumnHeader" Value="True">
                    <Setter Property="Background" Value="{DynamicResource GridHeaderMouseOverBrush}" />
                </Trigger>
            </Style.Triggers>

     <ControlTemplate x:Key="ColumnHeaderControlTemplate" TargetType="{x:Type DataGridColumnHeader}" >
    <AdornerDecorator>
        <Grid Background="{TemplateBinding Background}" x:Name="dgColumnHeader" Panel.ZIndex="10001">
            <ad:Interaction.Behaviors>
                <GridColumnHeaderControl:GridAdornerBehavior AdornerTemplate="{StaticResource AdornerDataTemplate}" Panel.ZIndex="19999">
                    <ad:Interaction.Triggers>
                        <ad:EventTrigger SourceName="dgColumnHeader" EventName="MouseEnter">
                            <ad:InvokeCommandAction CommandName="ShowAdornerCommand"/>
                        </ad:EventTrigger>
                        <ad:EventTrigger SourceName="dgColumnHeader" EventName="MouseLeave">
                            <ad:InvokeCommandAction CommandName="HideAdornerCommand"/>
                        </ad:EventTrigger>
                    </ad:Interaction.Triggers>
                </GridColumnHeaderControl:GridAdornerBehavior>
            </ad:Interaction.Behaviors>
            <Border x:Name="border" BorderBrush="Black" BorderThickness="0,0,1,1" Grid.ColumnSpan="1">
                <Rectangle Width="116" Margin="3,3,3,3" HorizontalAlignment="Center" RadiusX="7" RadiusY="7" x:Name="PART_Rectangle" Fill="{DynamicResource ContentOutofFocusBrush}"></Rectangle>
            </Border>
            <ContentPresenter x:Name="content"  HorizontalAlignment="Center"  VerticalAlignment="Center" Content="{TemplateBinding Content}" />
        </Grid>
    </AdornerDecorator>
    <ControlTemplate.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter TargetName="PART_Rectangle" Property="Fill" Value="{DynamicResource ActiveItemBrush}" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

    <DataTemplate x:Key="AdornerDataTemplate">
    <Grid HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,13,0,0" Grid.ZIndex="99">
        <Button Content="X" Width="28" Height="26" Panel.ZIndex="10002" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ctrls:RhinoDataGrid}}, Path=RemoveSelectedColumnCommand}">
            <Button.Style>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                    <Setter Property="Foreground" Value="Red"/>
                    <Setter Property="Background" Value="{DynamicResource GridHeaderMouseOverBrush}"/>
                    <Setter Property="HorizontalContentAlignment" Value="Center"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                    <Setter Property="FontWeight" Value="Heavy"></Setter>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid>
                                    <Border Background="{TemplateBinding Background}" CornerRadius="0,0,12,12" BorderThickness="1,0,1,1" BorderBrush="Black">
                                        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                          Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" RecognizesAccessKey="True"/>
                                    </Border>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Button.Style>
        </Button>
    </Grid>
</DataTemplate> 
```

一些我的 rowheader 是如何工作的。我的行标题宽度为 36，关闭按钮宽度为 28，左边距为 26。有些图像与单元格没有重叠 ![在此处输入图像描述](../Images/0f8210bc12153a412c8569ca7ba94429.png)

请帮我解决。谢谢迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:19:24.897

页眉高度为26

```
 <Setter Property="Height" Value="26" /> 
```

您如何期望它显示高度 > 26 的图像？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:16:43.947

为了在另一个控件之上显示您的“关闭”按钮，您必须添加“弹出”控件并将“关闭”按钮添加为其子控件。您最多可以定义一个子元素，它可以是任何 UIElement。您应该为 DatagridColumnHeader 的鼠标悬停事件定义事件触发器，并设置弹出控件的“IsOpen = true”。例如

```
<Popup Name="myPopup">
  <TextBlock Name="myPopupText" 
             Background="LightBlue" 
             Foreground="Blue">
    Popup Text
  </TextBlock>
</Popup> 
```

您还可以设置以下属性以获得预期的结果。

```
AllowsTransparency="True" 
        Placement="Relative"
            PlacementTarget="{Binding ElementName=Border}" /* your control name */
            HorizontalOffset="0"
            VerticalOffset="60"
            PopupAnimation="Fade" 
```

# sql - SQL Server 作业/时间表 - 美国与英国夏令时调整

> ID：10398003
> 
> 赞同：6
> 
> 时间：2012-05-01T13:04:14.257
> 
> 标签：sql, sql-server, timezone, sql-server-agent

SQL Server 作业/时间表 - 美国与英国夏令时调整

我们有一个基于英国的服务器，它需要在 16:30（美国中部时间 - 这可能看起来很奇怪，但这是因为一些数据的可用性）运行 SQL 代理作业。通常这不会有问题，因为英国和美国之间的时差是 6 小时，所以我们将工作安排在 22:30。

但由于英国和美国在 3 月和 11 月的夏令时调整时钟的时间不同，因此英国和美国之间的时差为 5 小时有 2 周的时间段。

我想实现一种方法，SQL Server 可以识别这种时差变化，然后使用 sp_update_schedule 之类的东西重新安排它自己的作业。

我的一种方法是在美国服务器上获取当前时间戳，然后将其与当前英国时间进行比较。如果时差为 5 小时，则将作业重新安排到 21:30，如果时差为 6 小时，则将作业重新安排到 22:30。

但无论如何可以提出另一种解决方案，也许不涉及在美国服务器上获取当前时间戳，理想情况下不必在表格中存储夏令时调整日期列表。也许更动态的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:16:38.473

实际上，您似乎已经提到了两种可行的解决方案：询问该时区的服务器或存储关键日期列表。关于为什么在下面的第一个链接中的派对路线。您可以实现自己的功能（必须存储日期列表或向服务器询问偏移量）。或者您可以获得时区信息的公共域列表（如下面的第二个链接）。还有几个 Web 服务将返回偏移量。Oracle 实现了该时区数据库以在命名时区之间进行转换，因此如果您已经同时支持两者，您可以这样做。

有一个 C# 实现，您可以在第三个链接处将其包装在 CLR 函数中。

[http://blogs.msdn.com/b/sqlprogrammability/archive/2008/03/18/using-time-zone-data-in-sql-server-2008.aspx](http://blogs.msdn.com/b/sqlprogrammability/archive/2008/03/18/using-time-zone-data-in-sql-server-2008.aspx)

[http://www.twinsun.com/tz/tz-link.htm](http://www.twinsun.com/tz/tz-link.htm)

[http://timezone.codeplex.com/](http://timezone.codeplex.com/)

# rdlc - 我需要 RDLC 表达式“=Fields!xxx.Value”的其他语法，其中 xxx 包含点（。）

> ID：10398007
> 
> 赞同：3
> 
> 时间：2012-05-01T13:04:36.660
> 
> 标签：rdlc, cls-compliant

我正在动态生成报告。

我有两个表用户和分支，并且都有列名'NAME'。因此，我使用“User.Name”和“Branch.Name”作为 DataTable 中的 ColumnName，并使用以下代码将其绑定到 RDLC：

```
foreach(DataColumn dc in dtUser.Columns)
{
     rpt.ADDField("=Fields!"+dc.ColumnName"+".Value");
} 
```

这会给出“对象名称必须是符合 CLS 的标识符”的错误。我认为这是因为 columnName 包含点（。）。

我们还有其他语法可以解决这个问题吗？（如 =Fields![xxx.yyy].Value）

# mysql - SELECT CASE SQL 中的 DISTINCT COUNT

> ID：10398010
> 
> 赞同：9
> 
> 时间：2012-05-01T13:04:40.053
> 
> 标签：mysql, select, if-statement, case

我有一个报告表，其中包括字段`Case`（唯一编号）、`ISR`（个人安全报告 - 唯一编号）和`YearsOld`。

每个案例可以有多个 ISR。我想计算年龄组中唯一案例的数量。

此 SQL 为我提供了 ISR 数量的计数：

```
SELECT  
COUNT(CASE WHEN `YearsOld` = -2) THEN 1 END) `No Report`,
COUNT(CASE WHEN `YearsOld` BETWEEN 0 AND 5) THEN 1 END) `0 to 5`
COUNT(CASE WHEN `YearsOld` BETWEEN 6 AND 12) THEN 1 END) `6 to 12`
FROM `Demographics` 
```

有没有办法修改它来计算`Cases`这些年龄组的 DISTINCT？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T13:19:04.067

如果您的“case”变量是唯一的，您当然可以将 distinct 关键字直接放在 SQL CASE 语法中：

```
Count(distinct CASE when yearsold between 6 and 12 then case else null end) 
```

这样，case 变量的每个唯一值只计算一次。

只是关于列命名的注释，如果您有选择的话，我建议不要使用在 SQL 中有意义的词（即使用“case_num”而不是 case）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T13:21:42.693

您可以使用子查询为每个案例的单个`YearsOld`字段过滤您的人口统计表，尽管如果该案例可能与不同的年龄有关，`ISR`那么它最终只会被计入一个括号（也许这就是您想要的？） ：

```
SELECT
  ... -- as you currently have
FROM (
  SELECT `Case`, `YearsOld` from `Demographics` GROUP BY `Case`
) t; 
```

或者，要“计算”每个括号内的每个“不同”“案例”，您可以这样做：

```
SELECT
  COUNT(DISTINCT CASE WHEN `YearsOld` = -2 THEN 1 END) `No Report`,
  COUNT(DISTINCT CASE WHEN `YearsOld` BETWEEN 0 AND  5 THEN `Case` END) `0 to 5`,
  COUNT(DISTINCT CASE WHEN `YearsOld` BETWEEN 6 AND 12 THEN `Case` END) `6 to 12`
FROM Demographics; 
```

# .net - ObservableCollection 更改时重新评估 LINQ 查询

> ID：10398014
> 
> 赞同：5
> 
> 时间：2012-05-01T13:04:46.877
> 
> 标签：.net, linq, linq-to-objects, observablecollection

我有一个共同的问题，我想（希望）找到一个更好的解决方案来继续前进。我有一个包含数据主列表的 ObservableCollection。在我的客户端代码中，我需要将数据“转换”为新表单以显示给用户。我使用如下 LINQ 语句：

```
var newList = (from item in observable
               select new { FirstInitial = item.Name[0] }); 
```

我知道这很初级，但足以证明问题。（注意投影，这不是一个简单的过滤器或分组语句。）然后我通过数据绑定在我的 UI 中显示 newList。

问题是，当原始集合发生变化时，UI 不会。到目前为止，我应用的解决方案是将事件处理程序附加到原始集合的 CollectionChanged 事件，该事件重新评估查询并更新绑定属性。

虽然这很好用，但每次我遇到这种情况时都会重复很多代码。有没有办法让 LINQ 查询返回一个 ObservableCollection，当源 Observable 更改时“自动”更新？

换句话说，我想实现一些“固定”功能，以便在遇到这种情况时可以简单地重用它。

更新

感谢 Scroog1 帮助我看到我的原始帖子与 UI 的耦合度太高，无法满足我的真正要求。以下面的例子来更好地描述问题：

```
public class SomeClass
{
    private ObservableCollection<Employee> _allEmployees;
    private ObservableCollection<Employee> _currentEmployees;

    public ObservableCollection<Employee> CurrentEmployees
    {
        get
        {
            if (_currentEmployees == null)
                _currentEmployees = _allEmployees.Where(e => !e.IsTerminated);

            return _currentEmployees;
        }
    }
}

public class SomeViewModel
{
    private ICollectionView _view;

    public ICollectionView CurrentView
    {
        if (_view == null)
        {
            var cvs = new CollectionViewSource()
            {
                Source = someClass.CurrentEmployees
            }

            cvs.Add(new SortDescription("Name", ListSortDirection.Ascending));

            _view = cvs.View;
        }

        return _view;
    }
} 
```

如您所见，查询所在的代码并不是直接绑定到 UI 的。我使用这个例子来证明我是从更一般的用例而不是严格的 UI 数据绑定场景中询问的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:19:29.237

我会做这样的事情（假设一个名为 observable 的 ObservableCollection 和使用 RaisePropertyChanged 方法实现 INotifyPropertyChanged 的​​类）：

```
public IEnumerable<string> NewList
{
    return from item in observable
           select item.Name;
}

observable.CollectionChanged += delegate { RaisePropertyChanged("NewList"); }; 
```

然后当 observable 改变时，UI 会被告知 NewList 已经改变并重新评估查询。

对于多个依赖项，您可以执行以下操作：

```
observable.CollectionChanged += delegate
    {
        RaisePropertyChanged("NewList",
                             "OtherProperty",
                             "YetAnotherProperty",
                             "Etc");
    }; 
```

**更新**

上述内容通常适用于属性，因为您每次访问它时都会获得最新值，并且 INPC 可用于告诉事情以重新读取它。

对于稍微有趣的集合案例，我将实现一个自定义类，该类实现 INotifyCollectionChanged 和 IEnumerable 并包装 LINQ。例如，

```
public class CustomObservableCollection<T> : INotifyCollectionChanged,
                                             INotifyPropertyChanged,
                                             IEnumerable<T>
{
    private readonly IEnumerable<T> _collection;
    public CustomObservableCollection(IEnumerable<T> collection)
    {
        _collection = collection;
    }
    public IEnumerator<T> GetEnumerator()
    {
        _collection.GetEnumerator();
    }
    public void RaiseCollectionChanged() { ... }
    ...
} 
```

然后你可以这样做：

```
var newList = new CustomObservableCollection(from item in observable
                                             select item.Name);
observable.CollectionChanged += delegate { newList.RaiseCollectionChanged(); }; 
```

**更新 2**

您甚至可以将依赖项传递给 CustomObservableCollection：

```
public class CustomObservableCollection<T> : INotifyCollectionChanged,
                                             INotifyPropertyChanged,
                                             IEnumerable<T>
{
    private readonly IEnumerable<T> _collection;
    public CustomObservableCollection(IEnumerable<T> collection,
                 params ObservableCollection[] dependencies)
    {
        _collection = collection;
        foreach (var dep in dependencies)
            dep.CollectionChanged += RaiseCollectionChanged();
    }
    public IEnumerator<T> GetEnumerator()
    {
        _collection.GetEnumerator();
    }
    public void RaiseCollectionChanged() { ... }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:54:16.113

为什么不直接绑定到`observable`，然后选择你想要的属性。

例如：

```
public IEnumerable<Item> Items { get { return this.observable;} }

<ItemsControl ItemsSource="{Binding Items}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <TextBlock Text="{Binding Name}" />
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:18:03.273

正如我在对 Scroog1 答案的评论中提到的那样，我能够接受他的答案并稍微修改它以在我的应用程序中使用。我最终得到了一个包装类，它接受原始集合、谓词和选择器函数作为构造函数参数，如下所示：

```
public class ObservableWrapper<TSource, TElement> : IEnumerable<TElement>,
                                                    INotifyCollectionChanged
{
    private Collection<TElement> _items;
    private Func<TSource, Boolean> _predicate;
    private Func<TSource, TElement> _selector;
    private ObservableCollection<TSource> _source;

    public ObservableWrapper(ObservableCollection<TSource> source,
                             Func<TSource, Boolean> predicate,
                             Func<TSource, TElement> selector)
    {
        _predicate = predicate;
        _selector = selector;
        _source = source;

        _source.CollectionChanged += SourceCollectionChanged;
    }

    public IEnumerator<TElement> GetEnumerator()
    {
        EnsureItems();

        return _items.GetEnumerator();
    }

    private void EnsureItems()
    {
        if (_items == null)
        {
            _items = new Collection<TElement>();

            RefreshItems();
        }
    }

    private void NotifyCollectionChanged(NotifyCollectionChangedAction action)
    {
        var handlers = CollectionChanged;

        if (handlers != null)
        {
            var args = new NotifyCollectionChangedEventArgs(action);

            handlers(this, args);
        }
    }

    private void RefreshItems()
    {
        _items.Clear();

        foreach (var element in _source)
        {
            if (_predicate(element))
            {
                var item = _selector(element);

                _items.Add(item);
            }
        }

        NotifyCollectionChanged(NotifyCollectionChangedAction.Reset);
    }

    private void SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
    {
        RefreshItems();
    }

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

我原来的例子变成：

```
var newList = new ObservableWrapper<Person, Char>(observable,
                                                  item => { return true; },
                                                  item => { return item.Name[0]; }); 
```

缺点是该投影未命名。但是，在更复杂的场景中，我只是将 TElement 定义为一个类并从选择器函数中返回它。

# java - 使用漂亮的 JSF 中的欢迎页面

> ID：10398018
> 
> 赞同：1
> 
> 时间：2012-05-01T13:04:58.257
> 
> 标签：java, jsf-2, prettyfaces

我正在使用 JSF 2.0.5、Tomcat 7.0.12 和漂亮的面孔。

我的 web.xml 文件是：

```
<welcome-file-list>
    <welcome-file>/index.jsp</welcome-file>
</welcome-file-list> 
```

我漂亮的文件配置：

```
<url-mapping>
    <pattern>/</pattern>
    <view-id>/jsp/index.jsf</view-id>
</url-mapping> 
```

我的 index.jsp 文件是空的。

我的问题是，当我访问[http://www.foo.com/](http://www.foo.com/)时，他最终会重定向到 [http://www.foo.com/jsp/index.jsf](http://www.foo.com/jsp/index.jsf)并且由于我们重定向到 [http://再次访问 www.foo.com/](http://www.foo.com/)。
有人可以解释他为什么要点击 jsp/index.jsf 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:00:50.620

我想我找到了答案。

因为我使用漂亮：

```
<url-mapping>
    <pattern>/</pattern>
    <view-id>/jsp/index.jsf</view-id>
</url-mapping> 
```

因此，当我点击[http://www.foo.com/](http://www.foo.com/)时，漂亮地将“/”翻译为[http://www.foo.com/jsp/index.jsf](http://www.foo.com/jsp/index.jsf)

# iphone - 核心数据 - 如何获取具有最大值属性的实体

> ID：10398019
> 
> 赞同：40
> 
> 时间：2012-05-01T13:04:59.100
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

我有一个`Person`具有属性的实体`personId`（personId 是唯一的）

如何获取具有最大 personId 的人？

（我想获取人本身而不是财产的价值）

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-01T13:11:24.980

您设置`fetchLimit`to`1`并按`personId`降序排序。例如：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Person"];

fetchRequest.fetchLimit = 1;
fetchRequest.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"personId" ascending:NO]];

NSError *error = nil;

id person = [managedObjectContext executeFetchRequest:fetchRequest error:&error].firstObject; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-01T13:20:02.217

您需要使用带有 NSPredicate 的 NSFetchRequest 来指定您的查询...

改编自 Apple 的谓词编程指南：

```
NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Person"
    inManagedObjectContext:managedObjectContext];
[request setEntity:entity];

request.predicate = [NSPredicate predicateWithFormat:@"personId==max(personId)"];
request.sortDescriptors = [NSArray array];

NSError *error = nil;
NSArray *array = [managedObjectContext executeFetchRequest:request error:&error]; 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-10-15T07:49:36.830

推荐的方法是使用[Apple 推荐的方法](https://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/fetchExpressions.html)NSExpression。我希望这会比使用排序便宜。如果您考虑一下，使用排序您将不得不对所有记录进行排序并保留最大的记录。使用表达式，您只需通读列表并将最大值保存在内存中。

这是我与 NSDate 一起使用的示例

```
- (NSDate *)lastSync:(PHAssetMediaType)mediaType {
    NSEntityDescription *entity = [NSEntityDescription  entityForName:kMediaItemEntity inManagedObjectContext:self.managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    fetchRequest.entity = entity;
    fetchRequest.resultType = NSDictionaryResultType;

    NSMutableArray *predicates = [NSMutableArray array];
    [predicates addObject:[NSPredicate predicateWithFormat:@"%K=%d", kMediaType,mediaType]];
    [predicates addObject:[NSPredicate predicateWithFormat:@"%K=%d", kMediaProviderType,self.mediaProviderType]];
    NSPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates: predicates];
    fetchRequest.predicate = predicate;

    // Create an expression for the key path.

    NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:kSyncTime];
    // Create an expression to represent the function you want to apply

    NSExpression *maxExpression = [NSExpression expressionForFunction:@"max:"
                                                            arguments:@[keyPathExpression]];

    // Create an expression description using the maxExpression and returning a date.
    NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];
    [expressionDescription setName:@"maxDate"];
    [expressionDescription setExpression:maxExpression];
    [expressionDescription setExpressionResultType:NSDateAttributeType];

    // Set the request's properties to fetch just the property represented by the expressions.
    fetchRequest.propertiesToFetch = @[expressionDescription] ; // @[kSyncTime];

    NSError *fetchError = nil;
    id requestedValue = nil;

    // fetch stored media
    NSArray *results = [self.managedObjectContext executeFetchRequest:fetchRequest error:&fetchError];
    if (fetchError || results == nil || results.count == 0) {
        return [NSDate dateWithTimeIntervalSince1970:0];
    }
    requestedValue = [[results objectAtIndex:0] valueForKey:@"maxDate"];
    if (![requestedValue isKindOfClass:[NSDate class]]) {
        return [NSDate dateWithTimeIntervalSince1970:0];
    }
    DDLogDebug(@"sync date %@",requestedValue);
    return (NSDate *)requestedValue;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-07T09:58:24.207

上面使用 NSExpression 给出的答案是正确的。这是斯威夫特版本。

```
private func getLastSyncTimestamp() -> Int64? {

let request: NSFetchRequest<NSFetchRequestResult> = NSFetchRequest()
request.entity = NSEntityDescription.entity(forEntityName: "EntityName", in: self.moc)
request.resultType = NSFetchRequestResultType.dictionaryResultType

let keypathExpression = NSExpression(forKeyPath: "timestamp")
let maxExpression = NSExpression(forFunction: "max:", arguments: [keypathExpression])

let key = "maxTimestamp"

let expressionDescription = NSExpressionDescription()
expressionDescription.name = key
expressionDescription.expression = maxExpression
expressionDescription.expressionResultType = .integer64AttributeType

request.propertiesToFetch = [expressionDescription]

var maxTimestamp: Int64? = nil

do {

    if let result = try self.moc.fetch(request) as? [[String: Int64]], let dict = result.first {
       maxTimestamp = dict[key]
    }

} catch {
    assertionFailure("Failed to fetch max timestamp with error = \(error)")
    return nil
}

return maxTimestamp
} 
```

其中 moc 是一个 NSManagedObjectContext。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-12T13:23:55.620

斯威夫特 3

```
let request:NSFetchRequest = Person.fetchRequest()

let sortDescriptor1 = NSSortDescriptor(key: "personId", ascending: false)

request.sortDescriptors = [sortDescriptor1]

request.fetchLimit = 1

do {
    let persons = try context.fetch(request)
    return persons.first?.personId
} catch {
    print(error.localizedDescription)
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-21T20:32:15.050

斯威夫特 4

```
let request: NSFetchRequest<Person> = Person.fetchRequest()
request.fetchLimit = 1

let predicate = NSPredicate(format: "personId ==max(personId)")
request.predicate = predicate

var maxValue: Int64? = nil
do {
    let result = try self.context.fetch(request).first
    maxValue = result?.personId
} catch {
    print("Unresolved error in retrieving max personId value \(error)")
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-18T11:07:36.917

除了 Ryan 的回答，在今天的 Swift 中，`NSManagedObject`'s`execute(_:)`返回一个`NSPersistentStoreResult`对象，这需要一些额外的代码来检索该值：

```
// Cast `NSPersistentStoreResult` to `NSAsynchronousFetchResult<NSDictionary>`
let fetchResult = moc.execute(request) as! NSAsynchronousFetchResult<NSDictionary>

// Retrieve array of dictionary result
let dictsResult = fetchResult.finalResult

// Retrieve and cast the real result
let key = /* `expressionDescription.name` */
let result = dictsResult.first!.object(forKey: key) as! /* Your type, depending on `expressionDescription.expressionResultType` */ 
```

*注意：上面使用强制不安全类型转换来简化代码，在实际情况下，您应该始终避免这种情况。*

# javascript - ExtJs：ajax调用中的代码执行顺序是什么？

> ID：10398035
> 
> 赞同：3
> 
> 时间：2012-05-01T13:06:08.047
> 
> 标签：javascript, ajax, extjs, asynchronous, single-threaded

鉴于 Javascript 是一种单线程语言，ExtJs 中以下代码的执行顺序是什么？

```
FuncA();

Ext.Ajax.request({
    url: 'ajax.php',
    params: {
        id: 1
    },
    success: function(response){

        FuncB();
    }
});

FuncC();

FuncD(); 
```

这里函数的执行顺序会是 ACDB 吗？

或者

是否有可能在 FuncC() 或 FuncD() 之前调用 FuncB()？如果是，那么在哪些条件下？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:16:12.517

除非 ajax 请求是同步的，否则顺序将始终为 ACDB，但实际上不建议使用它，因为它会导致 UI 挂起。

例如，试试这个（最好在 Chrome 中）

```
function f1() {
    var s = '';
    for (var i = 0; i < 10000000; ++i) {
        s += 'a';
    }
}

function f2() {
    var s = '';
    for (var i = 0; i < 10000000; ++i) {
        s += 'b';
    }
}

Ext.require('Ext.Ajax');

Ext.onReady(function() {

    var d;
    Ext.Ajax.request({
        url: 'data.json',
        success: function(){
            console.log('finished');
        }
    });

    d = new Date();
    f1();
    console.log(new Date() - d, 'f1 done');
    d = new Date();
    f2();
    console.log(new Date() - d, 'f2 done');

}); 
```

您会看到，即使运行代码大约需要 1 秒，ajax 请求总是最后触发，即使请求本身只需要大约 7 毫秒（它是一个本地框）。然后通过注释掉对 f1/f2 的调用再次尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:20:40.667

A {B} C {B} D {B}
b 可以在所有标记为 {b} 的位置执行。但只会执行一次。
编辑：-
没有 javascript 不是多线程语言。所以维护了一个`queue`要执行的代码。所以当它到达时`funcC`它开始执行`FuncC`，然后在 ii 返回后查找队列中要执行的下一个函数，这可能是`funcB`（如果 ajax 请求完成）所以`funcB`只能在 2 个函数调用之间执行

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T13:46:17.567

请注意，javascript 代码从上到下运行。因此，在这种情况下，您的代码执行将在 开始`funcA()`和结束，`funcD()`但`funcB()`可以随时调用，因为它完全取决于`ajax.php`返回响应的速度。

# java - 使用 javascript 从 iframe 读取 xml 数据

> ID：10398036
> 
> 赞同：0
> 
> 时间：2012-05-01T13:06:08.977
> 
> 标签：java, javascript, xml, jsp, iframe

以下 iframe 代码包括：

iframe 结果由 xml 数据组成

-收藏

-error rowuniqueid="17" key="filenameupload"

```
 Please upload files of the 16 BIT MONO wav format only; other formats are not supported at the moment..

error 
```

收藏

javascript:

var myFrm = document.getElementById('target_iframe');

var 框架文档；

```
if (myFrm.contentDocument){

    frameDoc = myFrm.contentDocument;

   }
else{ // bad Internet Explorer  ;)
    frameDoc = myFrm.document;
} 
```

警报（frameDoc）

frameDoc 获取为 [object HTMLDocument] 我需要获取 [object XMLDocument]

读取和解析错误标签

iframe id="target_iframe" name="target_iframe" style="display: none" iframe

# matlab - Matlab：创建封闭的圆圈层

> ID：10398042
> 
> 赞同：0
> 
> 时间：2012-05-01T13:06:39.127
> 
> 标签：matlab, math, mathematical-optimization

我正在尝试通过像一个盒子一样生成我的中心点来创建一个紧密堆积的层，然后剪切该点以创建一个紧密堆积的圆圈层。 [更多信息可以在这里找到](http://chemistry.osu.edu/~woodward/ch754/str_cp.htm)

但我遇到了一些困难..到目前为止我的代码是

```
%% Trying out the shear function
rad=2; n=3;
[X,Y] = meshgrid(0   :   rad*2   :   rad*(n-1)*2    ,   ...
             0   : sqrt(2*(2*rad)^2)/2 : sqrt(2*(2*rad)^2)/2*(n-1));
xyBox = [reshape(X,1,numel(X)) ; reshape(Y,1,numel(Y))];
Sh = @(m) [1 m; 0 1];       % horizontal shear - slope is qual to 1/m
slope = sqrt(3);

shearedCoordinates = Sh(1/slope) * xyBox;
figure; plot(xyBox(1,:),xyBox(2,:),'k.');
for i= 1:(numel(shearedCoordinates)/2)
    hold on;
    circle(shearedCoordinates(1,i),shearedCoordinates(2,i),rad)
    plot(shearedCoordinates(1,i),shearedCoordinates(2,i),'bx')
    hold off;
end
axis equal 
```

![有点拥挤的圈子](../Images/eb8b76d0432b7cd0563c6ecb0cda431b.png)

不太了解 Sh 背后的数学原理，但可以看出它在扭曲（剪切）点方面做得非常好。我计算出平方根 3 的斜率应该给出正确的位置，但看起来我的 y 距离有问题......

圆函数是

```
function circle(x,y,r)
    angle=0:0.01:2*pi; 
    xp=r*cos(angle);
    yp=r*sin(angle);
    plot(x+xp,y+yp,'r');
end 
```

*** 解决方案 ***

```
%% Trying out the shear function
rad=2; n=3;
[X,Y] = meshgrid(0   :   rad*2   :   rad*(n-1)*2    , ...
    0   : sqrt(3)*rad   : sqrt(3)*rad*(n-1));
xyBox = [reshape(X,1,numel(X)) ; reshape(Y,1,numel(Y))];
Sh = @(m) [1 m; 0 1];       % horizontal shear - slope is qual to 1/m
slope = sqrt(3);

shearedCoordinates = Sh(1/slope) * xyBox;
figure; plot(xyBox(1,:),xyBox(2,:),'k.');
for i= 1:(numel(shearedCoordinates)/2)
    hold on;
    circle(shearedCoordinates(1,i),shearedCoordinates(2,i),rad)
    plot(shearedCoordinates(1,i),shearedCoordinates(2,i),'bx')
    hold off;
end
axis equal 
```

（觉得有用别忘了点赞哦）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:17:29.377

我还没有机会通过 Matlab 中的代码，但只要看看你发布的图，我同意剪切正在工作。但是，即使您使用预剪切中心，这些圆圈也会重叠。你是这个意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:23:15.467

我认为您的错误（或者可能只是我能看到的第一个错误）在于圆心线的 y 间距。你有表情

```
0   : sqrt(2*(2*rad)^2)/2 : sqrt(2*(2*rad)^2)/2*(n-1) 
```

用于布置圆心。我认为垂直步幅（或步长值）应该`rad*sqrt(3)/2`会给你：

```
0   : rad*sqrt(3)/2 : sqrt(2*(2*rad)^2)/2*(n-1) 
```

除非我犯了一个错误（完全可能），否则单位等边三角形的高度`sqrt(3)/2`应该是你的 y 间距。

# php - 如何使用php在facebook中发布消息用户最近的活动

> ID：10398045
> 
> 赞同：1
> 
> 时间：2012-05-01T13:06:45.450
> 
> 标签：php, facebook

我是 facebook 应用程序开发的新手。我正在使用这段代码：

```
$attachment = array('message' => "Testing message ",
                    link' => 'http://www.google.com/');
if(!($sendMessage = $facebook->api('/me/feed/','post',$attachment))){
                                 $errors= error_get_last();
                                 echo "Facebook publish error: ".$errors['type'];
                                 echo "<br />\n".$errors['message'];
                                      }' 
```

此代码在用户的时间线中发布消息，但我想在他最近的活动中发布消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:59:36.630

该帖子将自动出现在最近的活动中。此部分汇总了在各个地方进行的活动，由 Facebook 生成。不能直接写入。

# java - 迭代次数未定义的循环

> ID：10398051
> 
> 赞同：1
> 
> 时间：2012-05-01T13:07:08.020
> 
> 标签：java, loops

我有一个逻辑问题。允许用户向表单添加任意数量的字段。提交表单后，我需要收集所有字段的值并将它们存储在 ArrayList 中。问题是我不知道表单中是否只有 1 个字段，还是 500 个。

我区分单个表单字段的方法是在它们的名称中添加索引号，因此在表单中存在 name="field1"、name="field2" 等字段。

这是我到目前为止的代码：

```
for (int i = 1; i < number of fields; i++) {
    while (request.getParameter("field" + Integer.toString(i)) != null) {
        Add to ArrayList
    }
} 
```

我怎样才能找到字段的数量？或者也许这个问题有另一种解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:09:48.603

使用 while 循环：

```
int i=0;

while (request.getParameter("field" + Integer.toString(i)) != null) {

    // Add to ArrayList

    i++; // very important, don't forget this one
}

// i is the count of fields at this point 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:10:36.943

这应该没问题：

```
i=1;

while (request.getParameter("field" + Integer.toString(i)) != null) {
        //Add to ArrayList
        i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:12:01.687

java中有3种类型的循环。

1.  for 循环 - 当您确切知道必须迭代多少条目时使用。
2.  while 循环 - 当你不知道有多少时使用，可能是 0 - 500
3.  a do while - 当它必须运行至少一次并且之后任何次数时使用。

听起来您需要找出一种方法来检查字段是否存在并构造一段时间或执行一段时间，具体取决于他们是否能够输入 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:12:53.527

您可以使用 request.getParameterNames() 并循环浏览元素

```
for(Enumeration e = request.getParameterNames();
 e.hasMoreElements(); ){
                String parameterName = (String)e.nextElement();
             //Your code logic with the parameter.

} 
```

这是一种更有效的逻辑，因为您不需要先计算参数的数量然后添加到`ArrayList`. `null`而且你不需要和 NPE一起玩

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T13:13:48.493

您的`request`对象应该具有有用的方法，例如`getParameterNames`枚举`String`s 或`getParameterMap`不言自明的方法。这两者都可用于围绕所有参数设置循环，无论它们的数量如何。

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T13:20:14.973

```
Enumeration<String> parameterNames = request.getParameterNames();
while (parameterNames.hasMoreElements()) {
  String parameterName = parameterNames.nextElement();
  if (parameterName.startsWith("field")) {
    Add request.getParameter(parameterName) to ArrayList
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-01T13:35:36.123

您可以使用 getParameterValues() 获取所有值来执行此操作，您必须确保页面中的所有字段都应具有相同的名称。像这样

```
<input type="text" name="field" id="field1"/>
<input type="text" name="field" id="field2"/>
<input type="text" name="field" id="field3"/>
<input type="text" name="field" id="field4"/> 
```

在服务器端你可以这样写

```
String[] arrFields  = request.getParameterValues("field");
for(String field: arrField)
{
      // put the field into the arraylist.
} 
```

# android - Android - 停止广播接收器被服务杀死

> ID：10398053
> 
> 赞同：1
> 
> 时间：2012-05-01T13:07:39.517
> 
> 标签：android, service, android-activity, android-intent, broadcastreceiver

我已经构建了一个应用程序，它实现了许多广播接收器并根据用户设置在服务中注册它们。该服务绑定到一个调用它的一些方法的活动。当广播接收器被调用时，它会启动服务（或者如果服务已经在运行，则调用服务的 onstart）并向它传递一个字符串，告诉服务要做什么。我的问题是当活动被破坏（后退按钮）时，服务也会被破坏，这反过来会杀死广播接收器。

我知道我可以在清单中注册接收器，这意味着在调用它们时检查用户是否选择了该选项。然而，对应用程序至关重要的接收器之一是“android.intent.action.HEADSET_PLUG”，它只能以编程方式注册。

所以我想我的问题是，当服务被销毁时，有没有办法让这个广播接收器保持活动状态？如果没有，任何人都可以看到此问题的解决方法吗？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:19:43.933

> 我的问题是当活动被杀死时，服务被杀死，这反过来又杀死了广播接收器。

如果“killed”是指用户使用任务杀手或“设置”应用程序中的“强制停止”终止了您的应用程序，那么“killed”是适当的动词。但是，您的整个过程都被“杀死”了——它没有遵循您在此处描述的事件链。

如果“杀死”是指用户通过 BACK 按钮退出了您的活动，那是因为您选择绑定到服务，而不是启动它。如果您希望服务在活动的生命周期之后继续执行，您必须使用`startService()`，并确保用户可以通过某些路径表明他们不再需要此服务，以便您知道何时调用`stopService()`。

> 所以我想我的问题是，当服务被杀死时，有没有办法让这个广播接收器保持活动状态？

不。

> 如果没有，任何人都可以看到此问题的解决方法吗？

启动您的服务，而不是（或可能除了）绑定到服务。

# iphone - 在基础应用程序中下载并启动另一个应用程序 - iphone

> ID：10398065
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:08:23.873
> 
> 标签：iphone

我希望开发一个基于条形码的应用程序下载另一组代码/应用程序并执行所需的操作。基本应用程序没有编码的操作流，只有识别参数和要下载的应用程序的输入。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:14:41.077

这取决于您是否需要应用商店批准以及“代码”是什么。审查指南说，“2.7 以任何方式或形式下载代码的应用程序将被拒绝。”

另一方面，网页通常具有与之关联的 Javascript 代码，并且 Web 视图可以执行该代码。

这取决于更多细节以及您是否打算使用该商店。

# jquery - 调整 div 的大小以适应具有最大高度的内容

> ID：10398069
> 
> 赞同：13
> 
> 时间：2012-05-01T13:08:54.027
> 
> 标签：jquery, css, html, resize

我有一个包含动态内容的 div。当内容在 div 中加载时，我希望 div 调整大小以适应内容。但我希望这种调整大小具有最大高度。如果内容需要超过这个最大高度，我希望有一个滚动条。

我在这里搜索了问题，但找不到我要找的东西（除了提问者回答说他自己想出来的问题）。我读过我可以用 jquery 做到这一点，但我对此很陌生，但我确实经历了调整 div 大小和更改类之类的演示，但我真的不知道如何实现我在找什么。我试图找到解决方案，所以请温柔*。*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-01T13:13:33.797

```
 div {height:auto;overflow:scroll;max-height:200px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:30:28.527

采用：

```
<div style="max-height: 400px; overflow-y:scroll; overflow-x: hidden">
<p>Some dynamic content loads inside the div</p>
</div> 
```

然后添加：`<div style="clear:both"></div>`在关闭“div”之前：

```
<div style="max-height: 400px">
<p>Some dynamic content loads inside the div</p>
<div style="clear:both"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:14:50.590

您可以使用 css 执行此操作，例如：`max-height: 100px; overflow-y:scroll;`

# winapi - KbdLayerDescriptor 在 64 位架构下返回 NULL

> ID：10398072
> 
> 赞同：0
> 
> 时间：2012-05-01T13:08:55.760
> 
> 标签：winapi, keyboard

我正在编写一个分析用户写作的复杂程序，在 64 位操作系统上运行此应用程序时遇到问题。这是您可以运行以重新解释问题的代码。 [http://thetechnofreak.com/technofreak/keylogger-visual-c/](http://thetechnofreak.com/technofreak/keylogger-visual-c/) 当然，你需要有 64 位操作系统，因为程序可以在 32 位操作系统上正确运行。

在这个电话之后

```
pKbd = pKbdLayerDescriptor(); 
```

此指针等于 NULL

```
pKbd->pVkToWcharTable 
```

我试图先用谷歌搜索解决方案，我发现这个 [http://www.codeproject.com/Questions/211107/RegQueryValueEx-programcrash-on-64-Bit](http://www.codeproject.com/Questions/211107/RegQueryValueEx-programcrash-on-64-Bit) 它与我的问题完全相同，但似乎没有成为一个解决方案。那么你有什么想法可能是错的吗？

程序中有这段代码，它似乎处理了 32 位和 64 位架构上指针之间的大小差异

```
#if defined(BUILD_WOW6432)
#define KBD_LONG_POINTER __ptr64
#else
#define KBD_LONG_POINTER
#endif 
```

但很明显，它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:50:49.620

我刚刚遇到了与那段代码完全相同的问题。

我假设您正在编译为 32 位，但像我一样在 64 位上运行。如果是这样，那么首先您需要`BUILD_WOW6432`在包含之前定义`kbd.h`（或者`kbdext.h`如果您正在使用它）。其次，使用

```
SHGetFolderPath(NULL, CSIDL_SYSTEMX86, NULL, 0, systemDirectory) 
```

而不是`GetSystemDirectory(systemDirectory, MAX_PATH)`. 这意味着您始终使用 32 位代码，即使在 64 位机器上也是如此。

这为我解决了问题，希望对您有所帮助:)

# jquery - Android上的jQuery UI日期选择器？

> ID：10398078
> 
> 赞同：0
> 
> 时间：2012-05-01T13:09:11.930
> 
> 标签：jquery

我在移动网络上使用 jQuery UI 日期选择器并在 Android 2.3 设备上进行测试。它目前运行良好（具有默认的开箱即用行为），但我遇到了一个明显的问题。当日期选择器打开时，dp 下方的任何其他输入字段也将在单击日期时被选中，突出显示日期选择器顶部的字段。我该如何解决这个问题？是重点吗？如果需要，我可以发布代码，但同样，这都是默认的 jQuery ui。此外，这在 iOS 4 或 5 中也不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:42:04.703

我遇到过同样的问题。我找不到必须阻止传播哪个事件。你找到解决办法了吗？

我目前的解决方法是： - 打开对话框时停用输入、选择等 - 关闭对话框时重新激活它们。

当你这样做时它工作正常（但它不应该是必要的）。

# jquery - Jquery统计解析的XML文件中的单词

> ID：10398081
> 
> 赞同：1
> 
> 时间：2012-05-01T13:09:22.857
> 
> 标签：jquery, xml

我希望能够计算解析的 XML 文件中的单词。我以为我可以使用代码

```
'<span class="detail">' + $(play).find(" ").size() + '</span><span> Words</span></br>' + 
```

计算将告诉我单词数量但不会计算或运行语句的空格。

什么方法可以从解析的 XML 文件中计算单词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:13:10.180

您不需要 jQuery 来计算字符串中的单词。

例如，您可以在空格上拆分字符串，然后计算数组长度，如：

```
var sentence = 'I am a demo sentence.';
var numWords = sentence.split(' ').length; //should return 5 
```

请参阅 MDN 页面了解**[String.split()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)**

考虑到您问题中的标记，您可以使用类似**[this fiddle的方法](http://jsfiddle.net/fAMYR/2/)**

# android - 使用 ListView 的 RuntimeException

> ID：10398086
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:09:35.553
> 
> 标签：android, android-listview, runtimeexception

我收到了这个奇怪的错误：

```
05-01 14:04:42.589: E/AndroidRuntime(3261): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

我看过很多帖子，但没有一个对我有用。我只是想将一个数组填充到`ListView`. 它工作得很好，但我想`SharedPreferences`在我的代码中使用一些，所以我扩展了`PreferenceActivity`类。我想从那以后这个错误开始被抛出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:20:42.183

例外情况很明显，如果您扩展`ListActivity`（`PreferenceActivity`extends `ListActivity`so 具有相同的行为）并使用自定义内容视图（with `setContentView()`），那么在该布局文件中您必须有一个`ListView`带有 id 的元素：

```
android:id="@android:id/list" 
```

所以`ListActivity`知道在哪个`ListView`上绑定数据。

# extjs - Extjs 将参数传递给显示窗口

> ID：10398087
> 
> 赞同：4
> 
> 时间：2012-05-01T13:09:37.107
> 
> 标签：extjs, window

当我调用 window.show() 时，我想将参数传递给我的窗口。

我在我的窗口中为 show 方法添加了一个侦听器，但它将参数显示为 [Object, object]。

```
 #window call
 var test = 'hi';
 tstWin.show(test);

 #listener
  listeners : {             
    'show' : function(test){
        alert(test.value);
     }   
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T13:13:50.110

在您的事件处理程序中，参数与您放入`show()`方法中的参数不同。事实上，它们彼此没有任何关系。

阅读：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.AbstractComponent-event-show](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.AbstractComponent-event-show)

Show 事件处理程序将在第一个参数中接收对对象的引用。

更新：

你可以这样做：

```
win = Ext.create(...); // Create your window object here
win.myExtraParams = { a: 0, b: 1, c: 2}; // Add additional stuff
win.on('show', function(win) {
   console.log(win.myExtraParams.a, win.myExtraParams.b, win.myExtraParams.c);
});

win.show(); 
```

# plot - 大型分组数据绘图

> ID：10398090
> 
> 赞同：0
> 
> 时间：2012-05-01T13:09:42.817
> 
> 标签：plot, gnuplot

我有大量数据要绘制，我正在尝试使用 gnuplot。数据是大约 80000 个元素的排序数组。通过简单地使用

```
plot "myData.txt" using 1:2 with linespoints linetype 1 pointtype 1 
```

我得到了输出，但是：渲染需要时间，而且点通常很混乱，偶尔会有间隙。为了解决第二个问题，我想到了做条形图：每个条目都对应一个条形图。但是，我不确定如何实现这一点。我想在连续的条之间有一些空间，但我不希望它是可见的。您对绘制数据有何建议？

………………………………………………………………………………

由于数据量大，我想最好分组。请注意，我的数据看起来像

```
1 11041.9
2 11041.9
3 9521.07
4 9521.07
5 9520.07
6 9519.07
7 9018.07
... 
```

我想按一组 3 绘制数据，即第一条垂直线应该从 9521.07 开始，作为 1、2、3 和结束于 11041 的点的最小值。第二条垂直线应该考虑以下内容3 点：4、5 和 6，从 9519.07 开始，在 9521.07 结束，以此类推。

考虑到如图所示的数据文件，这可以通过 gnuplot 实现吗？如果是这样，如果有人发布一组我应该使用的命令，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T23:56:14.073

要减少 gnuplot 实际绘制的点数，可以使用`every`关键字，例如

```
plot "myData.txt" using 1:2 with linespoints linetype 1 pointtype 1 every 100 
```

将绘制每 100 个数据点。

我不确定是否可以在 gnuplot 中优雅地做你想做的事情（绘制垂直线），但这是我的解决方案（假设是 UNIX-y 环境）。首先制作一个名为的 awk 脚本`sort.awk`：

```
BEGIN { RS = "" }
{
 # the next two lines handle the case where
 # there are not three lines in a record
 xval = $1 + 1
 ymin = ymax = $2
 # find y minimum
 if ($2 <= $4 && $2 <= $6)
  ymin=$2
 else if ($4 <= $2 && $4 <= $6 && $4 != "")
  ymin=$4
 else if ($6 <= $2 && $6 <= $4 && $6 != "")
  ymin=$6
 # find y maximum
 if ($2 >= $4 && $2 >= $6)
  ymax=$2
 else if ($4 >= $2 && $4 >= $6)
  ymax=$4
 else if ($6 >= $2 && $6 >= $4)
  ymax=$6
 # print the formatted line
 print ($1+1) " " ymin " " ymin " " ymax " " ymax
} 
```

现在这个 gnuplot 脚本将调用它：

```
set terminal postscript enhanced color
set output 'plot.eps'

set boxwidth 3
set style fill solid
plot "<sed 'n;n;G;' myData.txt | awk -f sort.awk" with candlesticks title 'pretty data' 
```

它不漂亮，但它有效。 `sed`每 3 行添加一个空白行，并`awk`格式化样式的输出`candlesticks`。您也可以尝试将 awk 脚本嵌入到 gnuplot 脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:20:49.047

你可以做这样的事情......（在unix上最简单）。您需要每三行插入一个空格——我看不出有什么办法。如果你在 unix 上，命令

```
awk 'NR % 3 == 0 {print ""} 1' myfile 
```

应该这样做。（请参阅[如何使用 awk 每 n 行插入一个空行？](https://stackoverflow.com/questions/977408/awk-insert-blank-line-every-n-lines)）

当然，您可以（并且可能应该）将其直接打包到您的 gnuplot 文件中。

所以，总而言之，你会有这样的事情：

```
xval(x)=int(x)/3  #Return the x position on the plot
plot "< awk 'NR % 3 == 0 {print ""} 1' datafile" using (xval($1)):2 with lines 
```

# c# - 在添加新 XML 节点时需要帮助

> ID：10398093
> 
> 赞同：0
> 
> 时间：2012-05-01T13:09:56.000
> 
> 标签：c#, .net, xml

```
<?xml version="1.0" encoding="utf-8"?>
<mappings>
  <mapping>
    <aID iskey="true">ABC</aID>
    <bID iskey="true">DEF</bID>
    <SubAccount>PS</SubAccount>
    <Account>PS</Account>
  </mapping>
  <mapping>
    <aID isKey="true">GHI</aID>
    <bID isKey="true">PFP</bID>
    <SubAccount>MS</SubAccount>
    <!-- I want to add a new node here, how can I do this  -->
  </mapping>
  <mapping>
    <aID isKey="true">MNO</aID>
    <bID isKey="true">BBG</bID>
    <SubAccount>MAX</SubAccount>
  </mapping>
</mappings> 
```

我想添加一个上面 XML 中提到的新节点。我尝试了很多，但我无法成功。

```
XmlDocument xDoc = new XmlDocument();
xDoc.Load(filename);

foreach (XmlNode node in xmlDoc.SelectNodes("/mappings/mapping"))
{
    if (boothIDNode.InnerXml == BoothID)
    {
        chkBoothIDExists = true;
        if (clientIDNode.InnerText == ClientID)
        {
            chkClientIDExists = true;
            for (int j = 2; j < nodelist.Count; j++)
            {
                columnNode = nodelist[j];
                if (columnNode.Name == column.ToString())
                {
                    XmlNode elm = xDoc.CreateNode(XmlNodeType.Element,"Account",null);
                    elm.InnerText = value.ToString();                                                                                 
                    node.AppendChild(elm);  //  Error comes here 
                }
            }
        }
    }   
}

xmlDoc.Save(filename); 
```

问题解决了。问题是由于我的愚蠢错误而发生的。基本上有两个 xml 文档，我正在创建其他 xml 文档的新节点，因此出现错误。谢谢大家， XmlDocument xDoc = new XmlDocument(); XmlDocument xmlDoc = new XmlDocument();

错误：要插入的节点来自不同的文档上下文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:29:23.503

使用类似这样的东西，而不是 ac# person，但这应该会有所帮助。我认为 insertafter 是你需要的：

```
 XmlNode currNode = xDoc.SelectNodes("/mappings/mapping");  
  XmlNode elm = xDoc.CreateNode(XmlNodeType.Element,"Account",null);
  currNode.InsertAfter(elm, currNode.LastChild); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:22:50.237

为了添加节点，请考虑以下示例：

```
 XDocument a = XDocument.Parse(@"<?xml version=""1.0"" encoding=""utf-8""?>
<mappings>
  <mapping>
    <aID iskey="true">ABC</aID>
    <bID iskey="true">FPP</bID>
    <SubAccount>PS</SubAccount>
    <Account>PS</Account>
  </mapping>
  <mapping>
    <aID isKey="true">GHI</aID>
    <bID isKey="true">PFP</bID>
    <SubAccount>MS</SubAccount>
    <!-- I want to add a new node here, how can I do this  -->
  </mapping>
  <mapping>
    <aID isKey="true">MNO</aID>
    <bID isKey="true">BBG</bID>
    <SubAccount>MAX</SubAccount>
  </mapping>
</mappings>");
a.Descendants("mapping").Skip(1).First().Add(new XElement("aaa", new XAttribute("id", 1))); 
```

--->

```
 <mappings>
  <mapping>
    <aID iskey="true">ABC</aID>
    <bID iskey="true">FPP</bID>
    <SubAccount>PS</SubAccount>
    <Account>PS</Account>
  </mapping>
  <mapping>
    <aID isKey="true">GHI</aID>
    <bID isKey="true">PFP</bID>
    <SubAccount>MS</SubAccount>
    <!-- I want to add a new node here, how can I do this  -->
    <aaa id="1" />
  </mapping>
  <mapping>
    <aID isKey="true">MNO</aID>
    <bID isKey="true">BBG</bID>
    <SubAccount>MAX</SubAccount>
  </mapping>
</mappings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-04T21:18:45.540

```
XDocument doc = XDocument.Load(filepath); // filepath is string
doc.Element(firstnodename).SetElementValue(descendantname,newvalue); //names and value are string
doc.Save(filepath); // This line optional. And filepath like : @"C:\Users\user\desktop\a.xml" or "C:\\Users\\user\\desktop\\a.xml". You should write with ". 
```

你可以写更长的 .Element ForEx：

```
doc.Element(firstnode).Element(secondnode).Element(thirdnode).SetElementValue(fourthnode,valueoffourth); 
```

# sql-server - 带条件的存储过程？

> ID：10398098
> 
> 赞同：0
> 
> 时间：2012-05-01T13:10:10.923
> 
> 标签：sql-server, stored-procedures

我试图重写一个存储过程，我的 SQL 不是很好。我希望做的是编写它，以便如果 ModuleID 为 555，则选择自定义日期范围（例如 2012-01-01 2012-12-31）。当前 SP 如下。

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
GO

/*** EventsGetByRange ***/

ALTER PROCEDURE [dbo].[EventsGetByRange]
(
 @Filter nvarchar(500),
 @BeginDate datetime,
 @EndDate datetime
)
AS
SET DATEFORMAT mdy
Declare @sql nvarchar(4000)
Select @sql = 'SELECT E.PortalID, E.EventID, E.RecurMasterID, E.ModuleID, E.EventDateBegin, E.EventDateEnd, '
 + 'E.EventTimeBegin, E.Duration, E.EventName, E.EventDesc, '
 + 'E.Importance, E.CreatedDate,  '
 + 'CreatedBy = U.DisplayName, '
 + 'CreatorID =  E.CreatedBy, '
 + 'E.Every, '
 + 'E.Period, '
 + 'E.RepeatType, '
 + 'E.Notify, '
 + 'E.approved, '
 + 'E.Signups, '
 + 'E.MaxEnrollment, '
 + '(Select count(*) from dbo.EventsSignups WHERE EventID = E.EventID and E.Signups = 1) as Enrolled, '
 + 'E.EnrollRoleID, '
 + 'E.EnrollFee, '
 + 'E.EnrollType, '
 + 'E.PayPalAccount, '
 + 'E.PayPalPassword, '
 + 'E.Cancelled, '
 + 'E.DetailPage, '
 + 'E.DetailNewWin, '
 + 'E.DetailURL, '
 + 'E.ImageURL, '
 + 'E.ImageType, '
 + 'E.ImageWidth, '
 + 'E.ImageHeight, '
 + 'E.ImageDisplay, '
 + 'E.Location, '
 + 'c.LocationName, '
 + 'c.MapURL, '
 + 'E.Category, '
 + 'b.CategoryName, '
 + 'b.Color, '
 + 'b.FontColor, '
 + 'E.Reminder, '
 + 'E.TimezoneOffset, '
 + 'E.SendReminder, '
 + 'E.ReminderTime, '
 + 'E.ReminderTimeMeasurement, '
 + 'E.ReminderFrom, '
 + 'E.SearchSubmitted, '
 + 'E.CustomField1, '
 + 'E.CustomField2, '
 + 'E.EnrollListView, '
 + 'E.DisplayEndDate, '
 + 'E.AllDayEvent, '
 + 'E.OwnerID, '
 + 'OwnerName = O.DisplayName, '
 + 'E.LastUpdatedAt, '
 + 'LastUpdatedBy = L.DisplayName, '
 + 'E.LastUpdatedID, '
 + '(Select ModuleTitle from dbo.Modules WHERE ModuleID = E.ModuleID) as ModuleTitle, '
 + 'RMOwnerID = r.OwnerID, '
 + 'r.RRULE, '
 + 'E.OriginalDateBegin, '
 + 'E.NewEventEmailSent '
 + 'FROM dbo.Events E '
 + 'inner join dbo.EventsRecurMaster AS r on E.RecurMasterID = r.RecurMasterID '
 + 'left outer join dbo.Users U on E.CreatedBy = U.UserID '
 + 'left outer join dbo.Users O on E.OwnerID = O.UserID '
 + 'left outer join dbo.Users L on E.LastUpdatedID = L.UserID '
 + 'left join dbo.EventsCategory b on E.Category = b.Category '
 + 'left join dbo.EventsLocation c on E.Location = c.Location '
 + 'WHERE (E.ModuleID = 555 AND E.EventTimeBegin BETWEEN 2012-01-01 AND 2012-12-31) OR ((E.EventTimeBegin <= DATEADD(DAY,1,''' + convert(varchar, @EndDate) + ''') AND DATEADD(minute,E.Duration,E.EventTimeBegin) >= ''' + convert(varchar, @BeginDate) + ''') OR '
 + '  (E.EventTimeBegin BETWEEN ''' + convert(varchar, @BeginDate) + ''' AND DATEADD(DAY,1,''' + convert(varchar, @EndDate) + ''')))'
 + '  AND E.Approved = 1'
 + '  AND E.Cancelled = 0'
 + ' ' + @Filter + ' '
 + ' ORDER BY E.EventDateBegin, E.EventTimeBegin, E.EventDateEnd'
EXEC (@sql) 
```

更新：我使用了 Diego 推荐的 where 语句，但没有达到预期的结果。它不像 and If\Else scanrio （当我考虑它时这是有道理的）。

我需要首先确定模块 ID 是否为 555，如果是，则仅从硬编码范围内提取日期，否则按书面执行。如果需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:20:18.500

*   proc失败了吗？
*   您是否尝试在 where 子句中添加 E.ModuleID = 555 ？
*   您真的要对值 555 进行硬编码吗？将它传递给参数怎么样？
*   还有最重要的问题：为什么要将 sql 语句添加到变量并执行它？为什么不直接运行 SQL？是因为@Filter 变量吗？
*   还有，sql server 2005 还是 2008？
*   为什么你的变量上有 nvarchar 而不是 varchar （“n”占据双倍空间）

编辑：

好的，你在那里有一个 OR，所以它可能很棘手。您想要代码 555 中的所有内容（尽管有日期范围值），还是日期范围和代码 555 内的所有内容？我认为选项 2 会更有意义，所以只需添加

```
E.ModuleID = 555 
```

之前

```
 + '  AND E.Approved = 1' 
```

# c++ - 对类的私有元素进行排序

> ID：10398099
> 
> 赞同：-2
> 
> 时间：2012-05-01T13:10:21.060
> 
> 标签：c++, sorting

> **可能重复：**
> [如何对私有中声明的整数进行排序](https://stackoverflow.com/questions/10396527/how-to-sort-an-integer-that-is-declared-in-the-private)

我在如何对类中的 int id 元素进行排序时遇到问题，这是我为类放置函数的地方

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

#include "student.h"
#define cap 100

//Student constructor- empty

student::student()
{
   id = 0;
   first = "null";
   last = "null";
   age = 0;
   gpa = 0.0;
}

//Student deconstructor

student::~student()
{

}

bool student::get(istream &in)
{

   in >> id >> first >> last >> age >> gpa;
   return(in.good());
}
void student::put(ostream &out)
{
   out << id << first << last << age << gpa;
}
bool student::operator>(student)
{
    if(student[i].id>student[i+1].id)
        return true;
    else
        return false;
    cout << student[i].id;
}

bool student::operator<(student)
{
    if(student[i].id<student[i+1].id)
        return true;
    else
        return false;
}
void student::sort_array()
{

    int j,temp;
    for(j=0;j<cap-1;j++)
    { 
//if out of position switch the out of align number
    if(student[i].id<student[i+1].id)
        {
            temp =  student[i].id;
            student[i].id = student[i+1].id;
            student[i+1].id = temp;
        }
    }
} 
```

这是我的文件，以及显示和调用函数的主要代码

```
#include <iostream>
#include <fstream>
#include <string>
#include <iomanip>
using namespace std;

#include "student.h"
#define cap 100
void main()
{       string s;
    class student student[cap],l;
    int i;
    fstream f;

    i=0;
    cout << "Enter the file name: ";    //Display to enter the file name
    cin >>s;

    f.open(s.data(),ios::in);
    if(!f.is_open()) 
        cout << "could not open file";
    while(i<cap && !f.eof())
    {   
        student[i].get(f);

 //Display if okay
        if(f.good())
        {
            student[i].sort_array();
            i++;
            cout << i;
        }
    }
    f.close();
} 
```

这是我的课程代码和课程文件

```
#include <iostream>
using namespace std;

class student
{
    public:
        student(); //Constructor without parameters
        student(int,string,string,int,float); //Constructor with parameters
        ~student(); //Deconstructors
        bool get(istream &);    //Input
        void put(ostream &);    //Output
        bool operator==(student);
        bool operator>(student);
        bool operator<(student);
        bool operator==(int);
        bool operator>(int);
        bool operator<(int);    
        int read_array(string,int);
        void sort_array();
    private:
        int id,age;
        float gpa;
        string last,first;
 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:29:02.833

常见的技术是为可以比较的类提供比较运算符 <、>、<=、>=、== 和 !=。大多数排序算法要求容器中的项目可以“小于可比”。

查找 Boost 库，因为它具有在仅定义小于和相等时定义所有比较运算符的工具。

在您的设计中，您将需要一个容器来存放您`student`的 s. `std::sort`在容器上使用或您喜欢的分类功能。如果这是家庭作业，您可能希望将容器`main()`与排序逻辑一起放入。

此外，要么在网上搜索“C++ 重载运算符”，要么定义自己的方法。如果你很聪明，你可以将你的类设计为具有不同的比较函数，以允许按不同的字段进行排序。

# android - 如何在运行时更改 GridView 的行高

> ID：10398100
> 
> 赞同：1
> 
> 时间：2012-05-01T13:10:22.613
> 
> 标签：android, gridview, height

有没有办法改变 GridView 的行高？我需要通过代码（不是 xml）来做到这一点。我从 web 服务获取一些图像来创建 gridView。行高必须与我得到的第一张图片的高度相匹配。

我需要对宽度做同样的事情，但我看到有一个名为“setColumnWidth”的方法。找不到类似的行高。

# java - 更改为整数时出现双值编程问题

> ID：10398101
> 
> 赞同：0
> 
> 时间：2012-05-01T13:10:23.310
> 
> 标签：java, android, c++, c

我有一个 double 值，我想将其转换为整数值。但是，双精度值足够大，会导致问题。这是一个例子：

```
double val1 = 74.1234567890
int val2; 
```

我希望 val2 的值等于`741234567890`没有小数点的值。有没有人对如何做到这一点有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:19:51.000

你想要什么`74.1234560000`。如果它总是 10 位，`val * 1e10`则转换为适当大的整数类型就可以了。否则，你必须更清楚地定义你想要什么。如果它基于用于初始化的字符串`double`，则无法完成；许多不同的字符串可以产生完全相同的内部值，包括如果解释为实数则表示不同值的字符串。在另一个极端，如果您想要最小的整数值，使得该值乘以 10 的某个负幂，正好是浮点数的值......大多数浮点值将需要 52 个十进制数字，结果几乎可以肯定不适合任何本机整数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:16:05.387

在 Java 中可以做的一件事是将其解析为字符串，然后去掉点，然后将其解析为 int。

```
double val1 = 74.1234567890;
String str = String.parse(val1);
str = str.replace(".", "");
int val2 = Integer.parse(str); 
```

请记住，像您这样的转换会导致溢出，因为 double 包含 2 个字（8 个字节）和 int 仅 2 个（4 个字节）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:16:21.597

首先，int 只能保存 -2,147,483,648 和 2,147,483,647 之间的值。所以 741234567890 不适合。你需要很长时间（见@Daniel Fischer）

你可以做一个例子：

```
//silly conversion
double val1 = 74.1234567890;
long val2 = Math.round(val1 * 10000000000); 
```

如果您想支持其他值并想要某种“。” 卸妆，你应该看看为此使用字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-01T13:13:35.943

将 double 转换为 String 而不是 int。

# android - 如何从android连接到远程数据库？

> ID：10398107
> 
> 赞同：-6
> 
> 时间：2012-05-01T13:11:00.253
> 
> 标签：android, database

我有一个带有 sql 数据库的网站，我想连接到数据库并从我的 android 应用程序中进行一些更改????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:14:57.693

您很可能需要开发 Web 服务架构并使用 android 手机上的网络连接向网站发布请求。

您必须对此进行调查，没有人会给您提供所需的所有代码。

尝试查看这样的教程（使用 java REST）： [http ://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

# android - 如何在Android中找到可绘制文件夹

> ID：10398109
> 
> 赞同：3
> 
> 时间：2012-05-01T13:11:09.613
> 
> 标签：android, resources

根据这个[http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

开发人员页面说，创建一个 XML 文件，该文件应包含指示资源状态的图标。但默认情况下会创建一个新项目，此 Drawable 文件夹不存在，但我将有 4 个 diff 文件夹表示不同分辨率的图像。

我强行创建了一个名为 Drawable 的文件夹并放置 XML 文件并在我的应用程序中使用，但不幸的是我的应用程序抛出异常说资源为 NULL。如何克服这个问题？

我们必须将 XML 文件放在哪里？我们应该制作单独的 XML 文件并放在不同的资源文件夹中吗？请给我建议

这是文件夹结构的图像。

![在此处输入图像描述](../Images/04cd65f870d8ebafa10c5780ea41fdd4.png)

如果我使用 ic_tab_artist，我的应用程序会崩溃。这是完整的来源

```
package simple.tab.proj;
import android.app.Activity;
import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TextView;

public class SimpleTabActivity extends TabActivity  {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Resources res = getResources(); // Resource object to get Drawables
        TabHost tabHost = getTabHost();  // The activity TabHost
        TabHost.TabSpec spec;  // Resusable TabSpec for each tab
        Intent intent;  // Reusable Intent for each tab

        // Create an Intent to launch an Activity for the tab (to be reused)
        intent = new Intent().setClass(this, ArtistsActivity.class);

        // Initialize a TabSpec for each tab and add it to the TabHost
        spec = tabHost.newTabSpec("artists").setIndicator("Artists",
                          res.getDrawable(R.drawable.ic_tab_artists))
                      .setContent(intent);
        tabHost.addTab(spec);

        // Do the same for the other tabs
        intent = new Intent().setClass(this, ArtistsActivity.class);
        spec = tabHost.newTabSpec("albums").setIndicator("Albums",
                          res.getDrawable(R.drawable.ic_tab_artists))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, ArtistsActivity.class);
        spec = tabHost.newTabSpec("songs").setIndicator("Songs",
                          res.getDrawable(R.drawable.ic_tab_artists))
                      .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(2);

    }

    public static class ArtistsActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            TextView textview = new TextView(this);
            textview.setText("This is the Artists tab");
            setContentView(textview);

            //setContentView(R.layout.main);
        }
    }
} 
```

这是我的 Main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost> 
```

这是我的 ic_artist_tab.xml

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/ic_tab_artists_grey"
          android:state_selected="true" />
     <!-- When not selected, use white-->
    <item android:drawable="@drawable/ic_tab_artists_white" />
</animation-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:14:43.480

> 我强行创建了一个名为 Drawable 的文件夹并放置 XML 文件并在我的应用程序中使用，但不幸的是我的应用程序抛出异常说资源为 NULL。如何克服这个问题？

Android 区分大小写。目录必须是`res/drawable/`，不是`Drawable`。

> 我们应该制作单独的 XML 文件并放在不同的资源文件夹中吗？

一个 XML 文件`res/drawable/`就足够了，尽管您指向的各个可绘制资源`StateListDrawable`可能需要针对不同密度的不同版本。

# android - 如何获取按下按钮的值

> ID：10398114
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:11:35.117
> 
> 标签：android

大家好，我是 android 开发的新手，事实上它是我的第一个应用程序。我想知道

```
<button
 android:text="1" /> 
```

在上面的标签中，文本是按钮的值吗？如果是，那么我如何获取该值或将其存储在变量中。如果没有，那么如何在android中的任何按钮后面定义一个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:15:54.507

您首先需要给按钮一个 id，如下所示：

```
<Button 
android:id="@+id/buttonId"
android:text="1"
 /> 
```

然后在您的代码中执行以下操作：

```
Button b = (Button)findViewById(R.id.buttonId);
b.getText(); // returns the value of your text. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T13:16:47.020

是的，它是 Button 的值，使用以下代码获取 Button 的文本。

```
Button b = (Button)findViewById(R.id.button1);
String buttonText = b.getText().toString(); 
```

**函数调用**

```
b.setOnClickListener(new Button.OnClickListener() {
    @Override
    public void onClick(View v) {
                  // TODO Auto-generated method stub
                  function();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T13:16:57.287

```
<Button
  android:id="@+id/button1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="ButtonText" /> 
```

...

```
@Override
public void onCreate(Bundle savedInstanceState) {
  Button btn = (Button) findViewById(R.id.button1);
  String text = btn.getText().toString();

} 
```

# android - 在 Android 中阅读传入的短信

> ID：10398117
> 
> 赞同：0
> 
> 时间：2012-05-01T13:11:56.070
> 
> 标签：android, sms

我的应用中有一个 BroadcastReceiver：

```
public class SMSReceiver extends BroadcastReceiver { 

   public void onCreate(){
        Log.i("APP","SMS Receiver started.");
   }

   @Override 
       public void onReceive(Context context, Intent intent) { 
           Log.i("APP", "SMS received.");
       }
   } 
```

和接收器：

```
<receiver class="SMSReceiver" android:name=".SMSReceiver" >
    <intent-filter>
        <action android:name="smsreceiver" android:value="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

和：

```
<uses-permission android:name="android.permission.RECEIVE_SMS"/> 
```

我开始：

```
Intent SMS = new Intent(this, SMSReceiver.class);
sendBroadcast(SMS); 
```

在主要活动中。

如何阅读邮件内容？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:48:13.527

在你的 mainfest 中声明：

```
<receiver android:name=".SMSReceiver"> 
        <intent-filter android:priority="100"> 
            <action android:name=
                "android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
</receiver> 
```

当您在清单中声明它时，无需从意图启动您的接收器，当传入消息到达时会自动调用它。

这是广播接收器的代码：

**将此代码放入您的 onRecieve 方法中**

```
 if (!intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) 
                       return;          
                        bundle = intent.getExtras();

            if (bundle != null) {
                // ---retrieve the SMS message received---
                Object[] pdus = (Object[]) bundle.get("pdus");
                // Set<String> Bundle.keySet();
                msgs = new SmsMessage[pdus.length];
                // DeleteSMSFromInbox(context, msgs);
                for (int i = 0; i < msgs.length; i++) {

                    msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                    ClsIncomingsmsNo = msgs[i].getOriginatingAddress();
                    System.out.println("ClsIncomingsmsNo" + ClsIncomingsmsNo);
                    msg = msgs[i].getMessageBody().toString();

} 
```

}

# java - 使用 JAX-RS 实际验证 JAXB 数据？

> ID：10398119
> 
> 赞同：6
> 
> 时间：2012-05-01T13:11:57.600
> 
> 标签：java, validation, jaxb, jax-rs

`@GET`我们将 JAX-RS 与一些相当基本的 POJO 实体一起使用，并且有许多带`@POST`注释的方法，它们`@Produce`和`@Consume` `MediaType.APPLICATION_JSON`, `MediaType.APPLICATION_XML`. 没什么了不起的。

我的问题是我应该如何最好地验证传入的数据？

我们没有 XML Schema，尽管我可以生成一个。我需要以某种方式将其挂钩，这看起来并不吸引人，而且我还没有找到一个简洁的例子。

我们可以使用“bean 验证”，但我再次不确定如何连接并调用它。

最后（我认为）我们可以例如`isValidForXXX()`向实体 POJO 添加一些方法，并在我们有实例提交给我们时调用它们。

有人推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:29:38.023

如果您有 XML 模式，那么您可以在`MessageBodyReader`. 有关具体示例，请参阅我对类似问题的回答。

*   [在 JPA/JAX-RS Web 服务中验证 JAXBElement](https://stackoverflow.com/questions/3428273/validate-jaxbelement-in-jpa-jax-rs-web-service/3440388#3440388)

**验证阅读器**

下面是一个简单的实现，`MessageBodyReader`它做了四件事：1) `Create a JAXBContext`2) 创建 3) 的实例`Schema`4 `Unmarshaller`) 解组`InputStream`.

```
package org.example;

import java.io.*;
import java.lang.annotation.Annotation;
import java.lang.reflect.Type;
import java.net.URL;

import javax.ws.rs.*;
import javax.ws.rs.core.*;
import javax.ws.rs.ext.*;
import javax.xml.XMLConstants;
import javax.xml.bind.*;
import javax.xml.validation.*;

@Provider
@Consumes("application/xml")
public class ValidatingReader implements MessageBodyReader<Customer> {

    @Context
    protected Providers providers;

    private Schema schema;
    private JAXBContext jaxbContext;

    public ValidatingReader() {
        try {
            JAXBContext jc = JAXBContext.newInstance(Customer.class);
            SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
            URL schemaURL = null; // URL for your XML schema
            schema = sf.newSchema(schemaURL);
        } catch(Exception e) {
            throw new RuntimeException(e);
        }
    }

    public boolean isReadable(Class<?> arg0, Type arg1, Annotation[] arg2, MediaType arg3) {
        return arg0 == Customer.class;
    }

    public Customer readFrom(Class<Customer> arg0, Type arg1, Annotation[] arg2, MediaType arg3, MultivaluedMap<String, String> arg4, InputStream arg5)
            throws IOException, WebApplicationException {
        try {
            Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
            unmarshaller.setSchema(schema);
            return (Customer) unmarshaller.unmarshal(arg5);
        } catch(JAXBException e) {
            throw new RuntimeException(e);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-20T23:11:16.603

正在寻求完成与原始海报相同的事情。由于似乎希望避免 a`MessageBodyReader`我想我会分享这个解决方案，它只是使用`HttpServletRequest`作为参数，然后使用该`getInputStream`方法直接处理数据。

```
@POST
@Path("/myPath")
@Consumes(MediaType.APPLICATION_XML)
public Response saveCustomerInteraction(@Context HttpServletRequest httpRequest) {

    Response response = null;
    try {
        CustomerInteraction ci = this.handleCustomerInteractionRequest(httpRequest);
        if (ci!=null){
            // save your data or whatever your app does
        }
        else {
            response = Response.status(Status.BAD_REQUEST).entity("invalid XML").build();               
        }
    }
    catch(Exception e){
        log.error(e.getMessage(),e);
        response = Response.serverError().entity(e.getMessage()).build();
    }
    return response;
} 
```

然后该`handleCustomerInteractionRequest`方法将处理 servlet 流并验证 XML

```
protected CustomerInteraction handleCustomerInteractionRequest(HttpServletRequest request){

    CustomerInteraction ci = null;
    try {
        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = sf.newSchema(schemaUrl);
        JAXBContext jaxbContext = JAXBContext.newInstance(CustomerInteraction.class);
        Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
        unmarshaller.setSchema(schema);
        ci = (CustomerInteraction) unmarshaller.unmarshal(request.getInputStream());    
    }
    catch (Exception e){
        // log error and return a null (or whatever you want to do with the error)
    }

    return ci;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T00:05:26.643

使用 MessageBodyReader 作为优秀的@Blaise Doughan 建议可以为您提供很大的灵活性。显然，如果您已经拥有 @Consumes 注释和 JAXB 注释类，我可以看到这看起来很冗长。

这真的取决于您的舒适程度。我注意到您没有定义 XML 模式，因此您手动创建了 JAXB 类，在相同的类（或外部自定义验证器）中编写验证逻辑似乎是合乎逻辑的。

我个人会考虑编写 XML Schema，特别是如果您的验证规则很容易表达。这对您的项目来说可能是一笔不错的投资：您可以从那时起自动生成 JAXB 类，并自动获得验证，因此您应该有更好的可维护性。

# jquery - 使用传递变量的 ajax 链接时避免 404 错误

> ID：10398121
> 
> 赞同：1
> 
> 时间：2012-05-01T13:12:07.543
> 
> 标签：jquery, ajax, search-engine, http-status-code-404

我正在使用这个（例如）

```
$('.changeserver').click(function(e)
{
    e.preventDefault();

    quin = $(this).attr('href');

    $('div.caja').css('visibility', 'hidden');
    $('#'+quin).css('visibility', 'visible');

    $('.jdownloader').css('visibility', 'hidden');
    $('#j'+quin).css('visibility', 'visible');

    $('#servers li a').css('color', '#666');
    $(this).css('color', '#bababa');

}); 
```

用户点击的 url 是 www.domain.com/putlocker，因为有 e.preventDefault(); 用户不会收到错误消息，但是，当 Google 抓取该网站时，它将所有喜欢的内容计为 404 链接，因为他不关心 e.preventDefault()，因为他只是阅读代码。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:15:02.847

> 要阻止 Googlebot 跟踪单个链接，请将 rel="nofollow" 属性添加到链接本身。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182072](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182072)

将您的链接更改为：

```
<a href="www.domain.com/putlocker" class="changeserver" rel="nofollow">Change server</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:14:25.947

您可以尝试使用 rel=nofollow 属性

[http://en.wikipedia.org/wiki/Nofollow](http://en.wikipedia.org/wiki/Nofollow)

但这会给您的网站带来问题。如果用户禁用了 javascript 怎么办？然后*他们*将点击链接并获得 404。也许考虑将 URL 放在数据属性中，例如

```
<a data-url="/example.html" href="#">My Link</a> 
```

然后替换这一行

```
quin = $(this).attr('href'); 
```

和

```
quin = $(this).data('url'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:13:50.970

使 url 更像 '#putlocker' 并相应地调整您的解析。

# javascript - 为每个 jsp 页面使用一个最小文件来缩小 js 和 css

> ID：10398123
> 
> 赞同：1
> 
> 时间：2012-05-01T13:12:30.490
> 
> 标签：javascript, css, minify

我的网站中有大约 5 个主要的 JSP。每个jsp包含多个js和css文件。我想缩小 js 和 css，每个 JSP 一个 js&css。

所有可用的插件都在谈论整个网站的一个 js 和 css，但我更希望每个 JSP 有一个 js/css。否则在主页加载本身时，它会下载我不想要的完整 js/css。

任何人都可以建议任何解决方案。

谢谢， 哈里什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:19:51.347

如果这些文件只是静态的，那么最好将它们打包到一个 CSS 和一个 JS 中。这样，接下来的几页将只加载缓存的版本。但是，是的，您仍然可以按 JSP 打包更轻的页面，尤其是移动页面。

至于工具，有很多。[YUI Compressor](http://developer.yahoo.com/yui/compressor/)和[Google Closure Compiler](https://developers.google.com/closure/compiler/)通常是首选。

# php - 如何确定访客网络浏览器是否支持 html5

> ID：10398132
> 
> 赞同：4
> 
> 时间：2012-05-01T13:13:15.913
> 
> 标签：php, javascript, html

我目前正在部署一个视频平台。视频当前与 JWPlayer 的插件集成一起列出。我想默认设置`<video>`html5 标签，前提是客人的网络浏览器支持它。如何检查`<video>`来宾 Web 浏览器的标签是否支持 .flv（编码视频格式）？

我应该实现一个javascript函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:24:04.870

`<video>`标签允许标签之间的内容。[只有当浏览器不支持时，`<video>`](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-html-5-video-with-a-fallback-to-flash/)才会在页面上呈现其中的内容。

```
<video> 
    <source ogg>
    <source mp4>
    <embed flv /> <!-- embed only rendered if video not supported-->
</video> 
```

# c - C语言中的运算符优先级

> ID：10398133
> 
> 赞同：0
> 
> 时间：2012-05-01T13:13:19.353
> 
> 标签：c

如果我写下面这样的代码？

```
int arr[] = {6, 7, 8, 9, 10};
int *ptr = arr;
*(ptr++)+= 123; 
```

现在 arr[] 中的元素是什么？

我原本以为 arr[] 现在应该是 {6, 130, 8, 9, 10}，但实际上结果是 {129, 7, 8, 9, 10}，我不知道为什么？

在我看来，ptr++在括号里，所以ptr应该先增加，不是吗？在它增加一个之后，它应该指向数组中的第二个元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:14:51.670

的**值`ptr++`**是`ptr`任何增量之前的值（*副作用是`ptr`在表达式评估期间的某个时间*递增）。

那是在 中取消引用的值`*(ptr++)`。

*如果您`ptr`在后续表达式中取消引用，它将指向下一个元素，即具有 value 的元素`7`。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T13:15:27.847

如果您想要您期望的行为，请使用`++ptr`（即预增量）。括号不影响*后*增量发生的时间。换句话说，它与优先级无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:00:33.933

这个ptr++的效果只会在';'之后发生 ptr++ 等价于 ptr = ptr + 1; 但这只会在该语句的分号后完成。ptr 值将在操作期间为 arr[0] *(ptr++)+= 123; 但在该语句之后 ptr 将等同于 arr[1]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:26:29.347

**ptr++**的基本含义是**先使用后增量**，这就是它被称为**后增量运算符**的原因。这意味着变量 ptr 的值只有在当前指令执行完毕并且在后续指令中再次使用时才会更新。

而**++ptr**正好相反，它是**First Increment 然后使用**，它被称为**Pre Increment Operator**。

# mod-rewrite - 包含 mod_rewrite 时 Lighttpd 无法启动

> ID：10398141
> 
> 赞同：0
> 
> 时间：2012-05-01T13:13:39.410
> 
> 标签：mod-rewrite, freebsd, lighttpd

这是我的服务器模块列表 ( `modules.conf`)，它的工作没有任何问题，并且在使用此列表时 lighttpd 运行正常：

```
server.modules = (
  "mod_access",
#  "mod_alias",
#  "mod_auth",
#  "mod_evasive",
#  "mod_redirect",
#  "mod_rewrite",
#  "mod_setenv",
#  "mod_usertrack",
) 
```

当我想取消注释`mod_rewrite`模块时出现问题：

```
server.modules = (
  "mod_access",
#  "mod_alias",
#  "mod_auth",
#  "mod_evasive",
#  "mod_redirect",
   "mod_rewrite",
#  "mod_setenv",
#  "mod_usertrack",
) 
```

然后，当我想运行我的 Web 服务器时，我收到以下消息：

> 2012-05-01 15:01:18: (plugin.c.169) dlopen() 失败: /usr/local/lib/lighttpd/mod_indexfile, mod_access.so 无法打开“/usr/local/lib/lighttpd/ mod_indexfile，mod_access.so"
> 
> 2012-05-01 15:01:18: (server.c.656) 加载插件最终失败 /usr/local/etc/rc.d/lighttpd: 警告: 无法启动 lig​​httpd

如您所见，该`mod_access`模块确实存在一些问题，但有点奇怪，尤其是当我评论该`mod_rewrite`模块然后它的工作时。

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T20:30:05.677

我尝试使用最新的[www/lighttpd](http://www.freshports.org/www/lighttpd)端口（版本 1.4.32）重现此问题，但无法...服务器以您所描述的 modules.conf 启动。尝试更新到最新版本，如果这也适用于您，那么只需将其记为 1.4.30 的错误并继续...

# mysql - MySQL，使用 GROUP BY 和 HAVING 时选择列值

> ID：10398143
> 
> 赞同：1
> 
> 时间：2012-05-01T13:13:41.280
> 
> 标签：mysql

我想为具有 2 个或更少属性（表中的 2 行或更少行）的资产*选择*`asset_id`、`category_name`和。到目前为止，我只有and 。可能并非对所有资产都存在。如果是这样，那将是从一行 *`Fixture ID``asset_property``asset_id``category_name``Fixture ID``property_value``property_id 1`*

 *## 期望结果示例

**资产属性**表：

```
| asset_id | property_id | property_value |
|:--------:|:-----------:|:---------------|
| 100      | 1           | A-6            |*
| 100      | 6           | Blue           |
| 104      | 1           | CC-7           |*
| 104      | 6           | Blue           |
| 104      | 4           | 12"            |
| 105      | 1           | B-1            |*
| 108      | 1           | HR-1           |*
| 109      | 3           | 500            |
| 109      | 4           | 1"             | 
```

* `property_id`1 是`Fixture ID`

期望的结果：

```
| asset_id | category_name | property_value*|
|:--------:|:-------------:|:---------------|
| 100      | Flooring      | A-6            |
| 104      | Flooring      | CC-7           |
| 105      | Kitchen Equip | B-1            |
| 108      | Plumbing      | HR-1           |
| 109      | Plumbing      |                | 
```

*`property_value`是`Fixture ID`如果`property_id`是`1`

## 我的 MYSQL 到目前为止

MySQL：

```
SELECT asset_property.asset_id, category_name
FROM asset_property
LEFT JOIN asset
ON asset.asset_id = asset_property.asset_id
LEFT JOIN category
ON category.category_id = asset.category_id
GROUP BY asset_property.asset_id
HAVING COUNT(asset_property.asset_id) <= 2 
```

![mysql解释](../Images/b7bb07ce2bbd30dda19a5c15026d544c.png)

MySQL的结果：

```
| asset_property.asset_id | category_name |
|:-----------------------:|:--------------|
| 3048                    | Parking Lot   |
| 3519                    | Kitchen       |
| 3522                    | Kitchen       |
| 3597                    | Flooring      |
(etc...) 
```

`SELECT`所以我还需要`property_value WHERE`. `property_id = 1`我希望这是有道理的，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:33:58.867

也许 switch/case 适合这个查询

```
SELECT asset_property.asset_id, category_name,
( CASE property_id 
       WHEN 1 THEN property_value
       ELSE 0
  END
)
FROM asset_property
LEFT JOIN asset
     ON asset.asset_id = asset_property.asset_id
LEFT JOIN category
     ON category.category_id = asset.category_id
GROUP BY asset_property.asset_id
HAVING COUNT(asset_property.asset_id) <= 2 
```

希望有帮助..*

# c++ - C++ 字符串中是否发生缓冲区溢出？

> ID：10398144
> 
> 赞同：5
> 
> 时间：2012-05-01T13:13:44.687
> 
> 标签：c++, string, buffer-overflow

这与 C++ 中的字符串有关。很久没有接触C/C++了；事实上，大约 7 年前，我只在大学的第一年就使用这些语言进行了编程。

在 C 中，为了保存字符串，我必须创建字符数组（无论是静态的还是动态的，这都不重要）。所以这意味着我需要提前猜测数组将包含的字符串的大小。好吧，我在 C++ 中应用了相同的方法。我知道有一个 std::string 类，但我从来没有使用过它。

我的问题是，由于我们从未在 std::string 类中声明数组/字符串的大小，因此在写入时是否会发生缓冲区溢出。我的意思是，在 C 语言中，如果数组的大小为 10，并且我在控制台上键入了超过 10 个字符，那么额外的数据将被写入与数组相邻的其他对象的内存位置。使用 cin 对象时，在 std::string 中是否会发生类似的事情。

使用 std::string 时，我是否必须在 C++ 中事先猜测字符串的大小？

出色地！谢谢大家。这个页面上没有一个正确的答案（提供了很多不同的解释），所以我没有选择任何一个这样的答案。我对前 5 个很满意。保重！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T13:20:13.093

根据您用来访问`string`对象的成员，是的。因此，例如，如果您使用`reference operator[](size_type pos)`where `pos > size()`，是的，您会使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T13:18:08.440

假设标准库实现中没有错误，没有。A`std::string`总是管理自己的内存。

当然，除非您颠覆`std::string`提供的访问器方法，并执行以下操作：

```
std::string str = "foo";
char *p = (char *)str.c_str();
strcpy(p, "blah"); 
```

您在这里没有保护，并且正在调用**未定义的行为**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T13:19:09.140

std::string 通常可以防止缓冲区溢出，但仍然存在编程错误可能导致缓冲区溢出的情况。当**操作引用超出字符串边界的内存时，C++ 通常会抛出 out_of_range 异常**，**而下标运算符 []（不执行边界检查）则不会**。

**将 std::string 对象转换为 C 风格的字符串**时会出现另一个问题。**如果你使用 string::c_str() 进行转换，你会得到一个正确的以 null 结尾的 C 样式字符串。**但是，如果您使用 string::data()，它将字符串直接写入数组（返回指向数组的指针），您将获得一个非空终止的缓冲区。`The only difference between c_str() and data() is that c_str() adds a trailing null byte.`

最后，许多现有的 C++ 程序和库都有自己的字符串类。要使用这些库，您可能必须使用这些字符串类型或不断地来回转换。在安全性方面，此类库的质量参差不齐。通常最好使用标准库（如果可能）或了解所选库的语义。一般而言，应根据库的使用难易程度、可能发生的错误类型、这些错误发生的难易程度以及可能产生的潜在后果来评估库。参考[https://buildsecurityin.us-cert.gov/bsi/articles/knowledge/coding/295-BSI.html](https://buildsecurityin.us-cert.gov/bsi/articles/knowledge/coding/295-BSI.html)

在 c 中，原因解释如下：

```
void function (char *str) {
       char buffer[16];
       strcpy (buffer, str);
    }
    int main () {
      char *str = "I am greater than 16 bytes"; // length of str = 27 bytes
      function (str);
    } 
```

该程序肯定会导致意外行为，因为 27 字节的字符串 (str) 已复制到仅分配 16 字节的位置（缓冲区）。额外的字节越过缓冲区并覆盖为 FP 分配的空间、返回地址等。这反过来又会破坏进程堆栈。用于复制字符串的函数是 strcpy，它不完成边界检查。使用 strncpy 可以防止这种堆栈损坏。然而，这个经典的例子表明缓冲区溢出会覆盖函数的返回地址，进而改变程序的执行路径。回想一下，函数的返回地址是内存中下一条指令的地址，该指令在函数返回后立即执行。

这是一个[很好的教程](http://www.linuxjournal.com/article/6701)，可以让您的答案满意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T13:18:19.577

在 C++ 中，`std::string`类以最小大小开始（或者您可以指定起始大小）。如果超出该大小，则`std::string`分配更多动态内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T13:16:50.613

假设提供的库`std::string`被正确写入，您不能通过向`std::string`对象添加字符来导致缓冲区溢出。

当然，库中的错误并非不可能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T11:58:43.160

“缓冲区溢出是否发生在 C++ 代码中？”

在某种程度上，C 程序是合法的 C++ 代码（它们几乎都是），并且 C 程序有缓冲区溢出，C++ 程序可能有缓冲区溢出。

比 C 更丰富，我确信 C++ 可以以 C 不能的方式发生缓冲区溢出：-}

# php - 如何在 $_SESSION 中序列化/保存 DOMElement？

> ID：10398147
> 
> 赞同：5
> 
> 时间：2012-05-01T13:13:50.173
> 
> 标签：php, session, dom, serialization

我对 PHP、DOM 和 PHP DOM 实现还很陌生。我想要做的是将根元素保存`DOMDocument`在一个`$_SESSION`变量中，以便我可以访问它并在后续页面加载时对其进行修改。

`$_SESSION`但是在使用保存 DOMElement 的状态时，我在 PHP 中遇到错误：

> 警告：DOMNode::appendChild() [domnode.appendchild]: 无法获取 DOMElement

我读过 PHP DOMDocument 对象不能以`$_SESSION`本机方式保存。但是，可以通过保存 DOMDocument 的序列化（例如`$_SESSION['dom'] = $dom->saveXML()`）来保存它。

我不知道是否同样适用于将 a 保存`DOMElement`到 a`$_SESSION`变量也是如此，但这就是我正在尝试的。我想要这样做的原因是使用 DOMElement 的扩展类和一个附加属性。我希望通过将根 DOMElement 保存在 $_SESSION 中，以后可以检索元素并修改此附加属性并执行测试，例如 if (additionalProperty === false) { do something; }。我还通过保存 DOMDocument 并稍后检索它来阅读，所有元素都作为来自本机 DOM 类的对象返回。也就是说，即使我使用扩展类来创建元素，我随后需要的属性也将无法访问，因为持有对扩展类对象的引用的变量已经超出范围——这就是为什么我'我正在尝试其他事情。我首先尝试使用扩展类（不包括在下面），但出现错误...... 所以我恢复使用 DOMElement 对象来查看是否是问题所在，但我仍然遇到相同的错误。这是代码：

```
<?php
session_start();

$rootTag = 'root';
$doc = new DOMDocument;

if (!isset($_SESSION[$rootTag])) {
    $_SESSION[$rootTag] = new DOMElement($rootTag);
}

$root = $doc->appendChild($_SESSION[$rootTag]);
//$root = $doc->appendChild($doc->importNode($_SESSION[$rootTag], true));

$child = new DOMElement('child_element');
$n = $root->appendChild($child);

$ct = 0;
foreach ($root->childNodes as $ch) echo '<br/>'.$ch->tagName.' '.++$ct;

$_SESSION[$rootTag] = $doc->documentElement;
?> 
```

此代码给出以下错误（取决于我是直接使用 appendChild 还是使用 importNode 的注释代码行）：

`Warning: DOMNode::appendChild() [domnode.appendchild]: Couldn't fetch DOMElement in C:\Program Files\wamp_server_2.2\www\test2.php on line 11`

`Warning: DOMDocument::importNode() [domdocument.importnode]: Couldn't fetch DOMElement in C:\Program Files\wamp_server_2.2\www\test2.php on line 12`

我有几个问题。首先，是什么导致了这个错误，我该如何解决？另外，如果我试图做的事情是不可能的，那么我如何实现我的总体目标，即在为每个元素使用自定义属性的同时保存 DOM 树的“状态”？请注意，附加属性仅在程序中使用，而不是要保存在 XML 文件中的属性。此外，我不能每次都将 DOM 保存回文件，因为 DOMDocument 在修改后，根据我正在使用的模式可能无效，直到稍后对 DOMDocument 执行其他修改/添加。这就是为什么我需要保存一个暂时无效的 DOMDocument。感谢您的任何建议！

编辑：在尝试了 hakre 的解决方案后，代码起作用了。然后我继续尝试使用 DOMElement 的扩展类，但正如我所怀疑的那样，它不起作用。这是新代码：

```
<?php
session_start();
//$_SESSION = array();
$rootTag = 'root';
$doc = new DOMDocument;

if (!isset($_SESSION[$rootTag])) {
    $root = new FreezableDOMElement($rootTag);
    $doc->appendChild($root);
} else {
    $doc->loadXML($_SESSION[$rootTag]);
    $root = $doc->documentElement;
}

$child = new FreezableDOMElement('child_element');
$n = $root->appendChild($child);

$ct = 0;
foreach ($root->childNodes as $ch) {
    $frozen = $ch->frozen ? 'is frozen' : 'is not frozen';
    echo '<br/>'.$ch->tagName.' '.++$ct.': '.$frozen;
    //echo '<br/>'.$ch->tagName.' '.++$ct;
}

$_SESSION[$rootTag] = $doc->saveXML();

/**********************************************************************************
 * FreezableDOMElement class
 *********************************************************************************/
class FreezableDOMElement extends DOMElement {
    public $frozen; // boolean value

    public function __construct($name) {
        parent::__construct($name);
        $this->frozen = false;
    }
}
?> 
```

它给了我错误`Undefined property: DOMElement::$frozen`。就像我在原始帖子中提到的那样，在`saveXML`and之后`loadXML`，最初实例化的元素`FreezableDOMElement`正在返回类型`DOMElement`，这就是`frozen`无法识别该属性的原因。有没有办法解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:20:35.497

你不能`DOMElement`在里面存储一个对象`$_SESSION`。一开始它会起作用，但是在下一个请求时，它将被取消设置，因为它不能被序列化。

这与`DOMDocument`您在问题中所写的相同。

将其存储为 XML 或封装序列化机制。

您在这里基本上面临三个问题：

*   序列化`DOMDocument`（你这样做）
*   序列化`FreezableDOMElement`（你这样做）
*   将私人成员`FreezableDOMElement::$frozen`与文档一起保存。

正如所写，序列化不是开箱即用的。此外，即使没有序列化，`DOMDocument`也不会持续存在。`FreezableDOMElement`下面的例子演示了不自动保留实例，`FALSE`返回默认值（[Demo](http://codepad.org/txXd6WB7)）：

```
class FreezableDOMElement extends DOMElement
{
    private $frozen = FALSE;

    public function getFrozen()
    {
        return $this->frozen;
    }

    public function setFrozen($frozen)
    {
        $this->frozen = (bool)$frozen;
    }
}

class FreezableDOMDocument extends DOMDocument
{
    public function __construct()
    {
        parent::__construct();
        $this->registerNodeClass('DOMElement', 'FreezableDOMElement');
    }
}

$doc = new FreezableDOMDocument();
$doc->loadXML('<root><child></child></root>');

# own objects do not persist
$doc->documentElement->setFrozen(TRUE);
printf("Element is frozen (should): %d\n", $doc->documentElement->getFrozen()); # it is not (0) 
```

由于 PHP 到目前为止不支持`setUserData`（DOM 级别 3），一种方法是将附加信息存储在元素的命名空间属性中。这也可以通过在序列化对象时创建 XML 字符串并在反序列化时加载它来序列化（请参阅 参考资料[`Serializable`](http://php.net/Serializable)）。这样就解决了所有三个问题（[Demo](http://codepad.org/w4dZn6gW)）：

```
class FreezableDOMElement extends DOMElement
{
    public function getFrozen()
    {
        return $this->getFrozenAttribute()->nodeValue === 'YES';
    }

    public function setFrozen($frozen)
    {
        $this->getFrozenAttribute()->nodeValue = $frozen ? 'YES' : 'NO';
    }

    private function getFrozenAttribute()
    {
        return $this->getSerializedAttribute('frozen');
    }

    protected function getSerializedAttribute($localName)
    {
        $namespaceURI = FreezableDOMDocument::NS_URI;
        $prefix = FreezableDOMDocument::NS_PREFIX;

        if ($this->hasAttributeNS($namespaceURI, $localName)) {
            $attrib = $this->getAttributeNodeNS($namespaceURI, $localName);
        } else {
            $this->ownerDocument->documentElement->setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:' . $prefix, $namespaceURI);
            $attrib = $this->ownerDocument->createAttributeNS($namespaceURI, $prefix . ':' . $localName);
            $attrib = $this->appendChild($attrib);
        }
        return $attrib;
    }
}

class FreezableDOMDocument extends DOMDocument implements Serializable
{
    const NS_URI = '/frozen.org/freeze/2';
    const NS_PREFIX = 'freeze';

    public function __construct()
    {
        parent::__construct();
        $this->registerNodeClasses();
    }

    private function registerNodeClasses()
    {
        $this->registerNodeClass('DOMElement', 'FreezableDOMElement');
    }

    /**
     * @return DOMNodeList
     */
    private function getNodes()
    {
        $xp = new DOMXPath($this);
        return $xp->query('//*');
    }

    public function serialize()
    {
        return parent::saveXML();
    }

    public function unserialize($serialized)
    {
        parent::__construct();
        $this->registerNodeClasses();
        $this->loadXML($serialized);
    }

    public function saveBareXML()
    {
        $doc = new DOMDocument();
        $doc->loadXML(parent::saveXML());
        $xp = new DOMXPath($doc);
        foreach ($xp->query('//@*[namespace-uri()=\'' . self::NS_URI . '\']') as $attr) {
            /* @var $attr DOMAttr */
            $attr->parentNode->removeAttributeNode($attr);
        }
        $doc->documentElement->removeAttributeNS(self::NS_URI, self::NS_PREFIX);
        return $doc->saveXML();
    }

    public function saveXMLDirect()
    {
        return parent::saveXML();
    }
}

$doc = new FreezableDOMDocument();
$doc->loadXML('<root><child></child></root>');
$doc->documentElement->setFrozen(TRUE);
$child = $doc->getElementsByTagName('child')->item(0);
$child->setFrozen(TRUE);

echo "Plain XML:\n", $doc->saveXML(), "\n";
echo "Bare XML:\n", $doc->saveBareXML(), "\n";

$serialized = serialize($doc);

echo "Serialized:\n", $serialized, "\n";

$newDoc = unserialize($serialized);

printf("Document Element is frozen (should be): %s\n", $newDoc->documentElement->getFrozen() ? 'YES' : 'NO');
printf("Child Element is frozen (should be): %s\n", $newDoc->getElementsByTagName('child')->item(0)->getFrozen() ? 'YES' : 'NO'); 
```

它并不是真正的功能完整，而是一个工作演示。无需额外的“冻结”数据即可获得完整的 XML。

# php - facebook让我保持登录与不让我保持登录

> ID：10398149
> 
> 赞同：-3
> 
> 时间：2012-05-01T13:13:53.167
> 
> 标签：php, facebook, session, cookies, login

我已经在 php 中构建了登录系统，并且我总是使用 session 来登录用户。作为使用会话的结果，我的浏览器总是创建一个名为 PHPSESSID 的 cookie。如果用户选中**记住我**选项，我会将用户名和密码设置到 cookie 中。请注意，这些 cookie 可在浏览器中访问。

因为，我总是喜欢看看别人是怎么做他们的登录系统的，所以我决定用 facebook 来测试这个事实。我登录了我的 Facebook，没有检查**保持登录状态**，然后我检查了 cookie，但我没有看到 PHPSESSID cookie。有谁知道为什么？

我第二次登录facebook，这次我检查了**保持登录状态**。**然后我检查了 cookie，我看到了与我第一次**尝试相同的过期日期的 cookie 。

如果第*一次*和*第二次*尝试产生相同的 cookie，那么有什么区别？或者更好地说使用它有什么意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:18:28.377

> 如果用户选中记住我选项，我会将用户名和密码设置到 cookie 中。

请不要那样做。密码和其他敏感数据不应保存到 cookie 中。

> 因为，我总是喜欢看看别人是怎么做他们的登录系统的，所以我决定用 facebook 来测试这个事实。我登录了我的 Facebook，没有检查保持登录状态，然后我检查了 cookie，但我没有看到 PHPSESSID cookie。有谁知道为什么？

会话 cookie 不必命名`PHPSESSID`。我展示了来自 Facebook 的 11 个 cookie，其中一些具有可能是会话信息的数据。

> 如果第一次和第二次尝试产生相同的 cookie，那么有什么区别？或者更好地说使用它有什么意义？

记住我的功能很容易在服务器端。

在 Web 开发中，几乎所有事情都有不止一种方法。Facebook 是一个复杂的系统，因此他们有时会使用比您的小型项目所需的更复杂的解决方案。

# mysql - 查询以查找某些列是否在数组中

> ID：10398150
> 
> 赞同：0
> 
> 时间：2012-05-01T13:13:55.243
> 
> 标签：mysql

我有一个复杂的嵌套查询，它位于连接内，是否可以找到与该查询匹配的多个列，而不是在连接中重复查询？IE：

```
select * from 
A left join B on a.xid=b.xid and 
(a.userid or b.userid) in (select userid from A where..) 
```

^^^ 不想重复嵌套查询...

有一个嵌套查询应该匹配父查询中的几个列（如上例所示）。简单的方法是多次复制嵌套查询。IE-

```
select * from A
left join B
  on a.xid=b.xid
  and a.userid in (select userid from ...)
  and b.userid in (Select userid from ....) 
```

但是 - 由于子查询有点复杂，我不希望 mysql 运行它两次，而是只运行一次，而不是将它与几个父查询列匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:55:07.003

如果您的子查询工作正常并且您打开了查询缓存，您就不必担心性能问题。如果它是一个过于复杂的问题，那么也许你可以使用一个 proc 来进行这个查询：将 sub 的结果放入一个临时表并加入它。

有很多方法可以解决这个问题。

# mysql - MySQL 购物车结构

> ID：10398155
> 
> 赞同：1
> 
> 时间：2012-05-01T13:14:34.593
> 
> 标签：mysql, schema, e-commerce

我希望创建一个能够处理多个类别的 MySQL 商店。我已经对所有类别设施等进行了排序，但我没有得到任何地方的是这个..

每个项目可以有多个选项，例如一件 T 恤应该有“颜色”和“尺码”选项。然后，我需要从父产品创建许多变体/派生产品，指定超大蓝色 T 恤有 20 件库存（例如）。问题是，出售的不只是衣服，它可能是任何数量的东西。所以我还需要这个架构来处理无限数量的变体，例如带有“**跑车**”设计的“ **6mm** ”“**大型**”生日贺卡。6mm、Large 和 'Ace' 是变量。通过这种方式，我能够确保我们没有任何库存控制问题。如果对您有用，以下是我当前的站点结构。

 **[现有数据库架构 http://www.hallwaystudios.com/screenshots/uploads/g5B7SNKU.png](http://www.hallwaystudios.com/screenshots/uploads/g5B7SNKU.png)

我希望你明白我的意思，并且有人能回答我的问题！非常感谢提前（当然之后）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:43:12.217

不太清楚这里的问题是什么......我可能会创建四个表：

```
-- a table of item types (t-shirt, birthday card, etc.)
CREATE TABLE ItemTypes (
  TypeID      INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  TypeName    VARCHAR(20) NOT NULL
);

-- a table of associated properties
CREATE TABLE TypeProperties (
  PropertyID  INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  TypeID      INT NOT NULL,
  PropName    VARCHAR(20) NOT NULL,
  INDEX(Property, TypeID),
  FOREIGN KEY(TypeID) REFERENCES ItemTypes(TypeID)
);

-- a table of specific items (XL Blue t-shirt, large bday card w/sports car, etc.)
CREATE TABLE Items (
  ItemID      INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  TypeID      INT NOT NULL,
  ItemName    VARCHAR(100) NOT NULL,
  ItemPrice   DECIMAL UNSIGNED NOT NULL,
  ItemStock   INT UNSIGNED NOT NULL,
  INDEX(ItemID, TypeID),
  FOREIGN KEY(TypeID) REFERENCES ItemTypes(TypeID)
);

-- the dictionary of property values
CREATE TABLE ItemProperties (
  ItemID      INT NOT NULL,
  TypeID      INT NOT NULL,
  PropertyID  INT NOT NULL,
  Value       VARCHAR(20) NOT NULL,
  PRIMARY KEY(ItemID, Property),
  INDEX(ItemID,     TypeID),
  INDEX(PropertyID, TypeID),
  FOREIGN KEY(            TypeID) REFERENCES ItemTypes     (            TypeID),
  FOREIGN KEY(ItemID,     TypeID) REFERENCES Items         (ItemID,     TypeID),
  FOREIGN KEY(PropertyID, TypeID) REFERENCES TypeProperties(PropertyID, TypeID)
); 
```

这应该是相当明显的，但以防万一，示例数据看起来像：

```
INSERT INTO ItemTypes (TypeID, TypeName) VALUES
  (1, 'T-Shirt'      ),
  (2, 'Birthday Card'),
  (3, 'Balloon'      );

INSERT INTO TypeProperties(PropertyID, TypeID, PropName) VALUES
  (51, 1, 'Colour' ), (52, 1, 'Size'),
  (53, 2, 'Size/mm'), (54, 2, 'Size'), (55, 2, 'Design'),
  (56, 3, 'Colour' );

INSERT INTO Items (ItemID, TypeID, ItemName, ItemPrice, ItemStock) VALUES
  (101, 1, 'Extra Large Blue T-Shirt',                       10.99, 20),
  (102, 2, '6mm Large Birthday Card with Sports Car Design',  2.99, 17),
  (103, 1, 'Extra Large Black T-Shirt',                      10.99,  5),
  (104, 3, 'Pink balloon',                                    0.10, 60);

INSERT INTO ItemProperties (ItemID, TypeID, PropertyID, Value) VALUES
  (101, 1, 51, 'Blue'       ),
  (101, 1, 52, 'Extra Large'),
  (102, 2, 53, '6'          ),
  (102, 2, 54, 'Large'      ),
  (102, 2, 55, 'Sports Car' ),
  (103, 1, 51, 'Black'      ),
  (103, 1, 52, 'Extra Large'),
  (104, 3, 56, 'Pink'       ); 
```**

# c# - 使用标准 asp.net3.5 和 web.config 将 url 重定向到 index.aspx 页面

> ID：10398164
> 
> 赞同：0
> 
> 时间：2012-05-01T13:15:11.217
> 
> 标签：c#, asp.net, url-rewriting

我有一个子域[http://trade.businessbazaar.in](http://trade.businessbazaar.in)。我以这种方式从数据库动态创建 URL [http://trade.businessbazaar.in/mycompany](http://trade.businessbazaar.in/mycompany)。为了显示详细信息，我在那里有一个 index.aspx 文件，我认为在每次请求时 index.aspx 页面都会相应地加载和显示数据。此外，在 index.aspx 页面上有一个母版页，我从中捕获文本 mycompany 并在数据库中查询它以获取结果。但似乎没有任何效果。

真正的链接是[http://trade.businessbazaar.in/Symparlife](http://trade.businessbazaar.in/Symparlife)。但它无法加载 index.aspx。我需要一种没有任何第三方 dll 或重写器的干净方法。直接在配置中推送一些行并开始工作。那就是 url 将是相同的，但索引页面将被加载......

**简而言之，我想说**

我需要 StackOverflow 类型的 clean url 机制来获取页面

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:22:36.003

~~您可以处理 Global.asax 中的 Begin_Request 事件并添加自定义代码以重定向到 index.aspx 并将 URL 的部分转换为查询字符串参数。您应该使用 Server.Transfer 将 URL 保留在浏览器中。~~

~~我建议升级到 4.0 并使用 Routing enine。您应该检查标准路由是否可用于 ASP.NET 3.5 的下载。我相信你的代码很快就会变得混乱。去过也做过。~~

正如@Mike Miller 在评论中提到的那样，路由引擎随 ASP.NET 3.5 一起提供。您可以在此处查看文档 - [http://msdn.microsoft.com/en-us/library/system.web.routing(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.routing(v=vs.90).aspx)

这是有关如何将其与 Web 表单一起使用的教程 - [http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs -2010-and-net-4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

对于您的情况，代码将类似于：

```
routes.MapPageRoute("company-index", "/{company}", "~/index.aspx") 
```

在 index.aspx 中，您可以像这样访问公司的路线值：

```
string company = (string)Page.RouteData.Values["company"]; 
```

请记住，您最好在 URL 中的实际参数（公司名称）之前添加一些内容。如果你不这样做，你以后会遇到问题，因为你可能想添加一个像“/Login”这样的URL，但是你必须验证用户不能创建一个名为“Login”的公司。不是 Stack Overflow 在 URL 中的实际问题信息之前有“/questions/”。

# android - 在Android中，当滑动改变屏幕时如何同时显示动画

> ID：10398171
> 
> 赞同：5
> 
> 时间：2012-05-01T13:15:29.220
> 
> 标签：android, android-animation

抱歉，标题不够清楚。我不知道如何表达，但这里的图像说明了一切。

在谷歌阅读器应用程序中，如果用户在当前帖子上向左或向右滑动，他们会看到第一个帖子移出，而第二个帖子移入。这是一个很好的效果，但我不知道如何实现它。

有任何想法吗？

![在此处输入图像描述](../Images/5f2642acc1a3b5aecf129a6991e79a1a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:19:55.450

您需要使用带有片段的 ViewPager：

[http://android-developers.blogspot.co.uk/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.co.uk/2011/08/horizontal-view-swiping-with-viewpager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:06:03.960

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#a4c639"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/awesomepager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</LinearLayout>

 public class ReadRawActivity extends Activity {

    private ViewPager awesomePager;
    private static int NUM_AWESOME_VIEWS = 3;
    private static Context cxt;
    private AwesomePagerAdapter awesomeAdapter;

    /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    cxt = ReadRawActivity.this;

    awesomeAdapter = new AwesomePagerAdapter();
    awesomePager = (ViewPager) findViewById(R.id.awesomepager);
    awesomePager.setAdapter(awesomeAdapter);
}

private class AwesomePagerAdapter extends PagerAdapter{

            @Override
            public int getCount() {
                    return NUM_AWESOME_VIEWS;
            }

        /**
         * Create the page for the given position.  The adapter is responsible
         * for adding the view to the container given here, although it only
         * must ensure this is done by the time it returns from
         * {@link #finishUpdate()}.
         *
         * @param container The containing View in which the page will be shown.
         * @param position The page position to be instantiated.
         * @return Returns an Object representing the new page.  This does not
         * need to be a View, but can be some other container of the page.
         */
            @Override
            public Object instantiateItem(View collection, int position) {
                    TextView tv = new TextView(cxt);
                    tv.setText("View Pager" + position);
                    tv.setTextColor(Color.WHITE);
                    tv.setTextSize(30);

                    ((ViewPager) collection).addView(tv,0);

                    return tv;
            }

        /**
         * Remove a page for the given position.  The adapter is responsible
         * for removing the view from its container, although it only must ensure
         * this is done by the time it returns from {@link #finishUpdate()}.
         *
         * @param container The containing View from which the page will be removed.
         * @param position The page position to be removed.
         * @param object The same object that was returned by
         * {@link #instantiateItem(View, int)}.
         */
            @Override
            public void destroyItem(View collection, int position, Object view) {
                    ((ViewPager) collection).removeView((TextView) view);
            }

            @Override
            public boolean isViewFromObject(View view, Object object) {
                    return view==((TextView)object);
            }

        /**
         * Called when the a change in the shown pages has been completed.  At this
         * point you must ensure that all of the pages have actually been added or
         * removed from the container as appropriate.
         * @param container The containing View which is displaying this adapter's
         * page views.
         */
            @Override
            public void finishUpdate(View arg0) {}

            @Override
            public void restoreState(Parcelable arg0, ClassLoader arg1) {}

            @Override
            public Parcelable saveState() {
                    return null;
            }

            @Override
            public void startUpdate(View arg0) {}

}

} 
```

# android - ViewPagerIndicator 选项卡 - 控制文本样式

> ID：10398172
> 
> 赞同：2
> 
> 时间：2012-05-01T13:15:30.610
> 
> 标签：android, viewpagerindicator

我正在使用 ViewPagerIndicator [http://viewpagerindicator.com/](http://viewpagerindicator.com/)

主题指定了正在使用的样式（我可以更改样式中的文本颜色并查看它对选项卡文本的影响）

```
<style name="TabText" parent="Widget.TabPageIndicator.Text">
  <item name="android:textColor">@color/white</item>
  <item name="android:textSize">14sp</item>
  <item name="android:ellipsize">end</item>
</style> 
```

我想控制标签名称的处理时间。我想尝试使用 wrap_content （即标签调整大小以包装文本宽度），我还想尝试在长文本上使用椭圆化（即标签的宽度相同，但如果标题太长，它会省略）。

![在此处输入图像描述](../Images/299171976db7c3a99d01fd81c2cb5436.png)

椭圆化适用于旧设备（例如 Nexus One）

![在此处输入图像描述](../Images/563a1293bdf33f5a4e89f3c66996b816.png)

但是在 ICS 上，省略号不起作用，并且标题只是截断了

如何控制 VPI 中选项卡文本的宽度和省略号？

（在相关说明中，我发现默认情况下长文本会在 VPI 中换行，因此我正在搜索替换带有不间断空格的空格以阻止这种情况，因为样式中的 singleLine=true 会导致 VPI 引发强制转换异常）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T13:35:58.090

解决方案似乎很简单，添加`singleLine=true"`到样式中。似乎截断不是截断，而是实际换行。

在我的项目中添加此属性不再导致 VPI 中的强制转换异常，因此我只能假设我之前看到的强制转换异常涉及其他一些因素。

# ruby-on-rails - 如何将数据属性添加到 Rails 单选按钮？

> ID：10398175
> 
> 赞同：3
> 
> 时间：2012-05-01T13:15:45.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试在助手中执行此操作：

```
 def radio_button_by_code(da_form, da_field, product_id, option_code)
    txt = Product.find(product_id).options.find_by_code(option_code).title
    btn = da_form.radio_button(da_field, txt, :data-product-id => product_id)
    "<label>#{btn} #{txt}</label>".html_safe
  end 
```

但是，如果我这样做，我总是会得到一个未定义的局部变量或方法“产品”错误。

如果我删除 :data-product-id => product_id 部分，那么它会正确输出单选按钮。

如何将数据属性添加到 radio_button？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T13:39:21.457

试试这个： `"data-product-id" => product_id`

# javascript - 使用 jquery 显示搜索中的匹配行

> ID：10398177
> 
> 赞同：0
> 
> 时间：2012-05-01T13:15:55.430
> 
> 标签：javascript, jquery

我有一些代码可以从输入源搜索页面上显示的当前信息，输入源是一个加载的 XML。然后显示找到该单词的次数，然后应该显示找到该单词的行尽管目前它正在显示所有行。代码是

```
function searchResults(query) {
    var temp = "\\b" + query + "\\b";
    var regex_query = new RegExp(temp, "gi");
    var currentLine;
    var num_matching_lines = 0;
    $("#mainOutput").empty();
    $("LINE", g_playDOM).each(
            function() {
                currentLine = $(this).text();
                matchesLine = currentLine.replace(regex_query,
                        '<span class="query_match">' + query + '</span>');

                if (currentLine.search(regex_query) > 0)
                    num_matching_lines++;
                $("#mainOutput").append("<p>" + matchesLine + "</p>");
            });
    $("#sideInfo").append(
            "<p>Found " + query + " in " + num_matching_lines + " lines</p>");
}

$(document).ready(function() {

    loadPlay();

    $("#term_search").focus(function(event) {
        $(this).val("");
    });

    $("#term_search").keypress(function(event) {
        if (event.keyCode == 13)
            searchResults($("#term_search").val());
    });

    $('#term-search-btn').click(function() {
        searchResults($("#term_search").val());
    });
});
</script> 
```

目前，单词所在的行数正在正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:30:34.783

如果您希望在条件中执行一行代码，则需要在其周围放置花括号。否则，只会执行*下一个操作项*。在您的情况下，增加匹配的行数。

您的后续操作项，将找到的行附加到 DOM 将在每个分支上执行，因为该`if`语句已经完成了它的工作。下面的违规行：

```
if ( currentLine.search(regex_query) > 0 ) num_matching_lines++;
    $("#mainOutput").append("<p>" + matchesLine + "</p>"); 
```

固定的：

```
if ( currentLine.search(regex_query) > 0 ) {
    num_matching_lines++;
    $("#mainOutput").append("<p>" + matchesLine + "</p>");
} 
```

# c# - 将节点部分转换为一行

> ID：10398178
> 
> 赞同：0
> 
> 时间：2012-05-01T13:16:02.857
> 
> 标签：c#, xml

我有**很多**这样的项目的 xml 文档：

```
 <item>
    <key>
       <unsignedShort>x</unsignedShort>
    </key>
    <value>
       <unsignedShort>y</unsignedShort>
    </value>
 </item>

 <item>
...... 
```

现在我希望它的每个部分都像这样：

```
<item><key><unsignedShort>x</unsignedShort></key><value><unsignedShort>y</unsignedShort></value></item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:18:51.753

您必须实现自己的 XmlWriter。[XmlTextWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.formatting.aspx)允许您使用不缩进的格式，但这会导致整个文档在一行上。所以，是的，你必须自己滚动，除非你对整个文档放在一行上没问题。

# mysql - MySQL：在两个表 A 和 B 中查找匹配的记录，其中 B 很大

> ID：10398184
> 
> 赞同：4
> 
> 时间：2012-05-01T13:16:19.923
> 
> 标签：mysql

以下工作正常，但太慢了。我只需要知道表 B 中有匹配的记录，有什么技巧吗？

（奇怪的是相反的搜索：查找不加入的记录（IS NULL）非常快）

```
SELECT
  TableA.id
FROM
  TableA
  LEFT JOIN
    TableB 
  ON
    TableB.TableA_id = TableA.id
WHERE
  TableB.id IS NOT NULL and TableA.clientid=13 ; 
```

Clientid 现在已编入索引，但正是这个子条款将查询速度从非常快减慢到几分钟。

（2012 年 3 月 3 日，我现在在功能更强大的服务器上的相同数据库上尝试了相同的查询，查询需要一秒钟。所以看来我的问题是我的原始服务器完全超载，具有讽刺意味的是，上面的查询被用来识别我们可以删除以减少表大小的记录。我将不得不在更快的服务器上重新构建数据库，清理它然后在“慢”服务器上重新生成它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:20:25.410

索引应该在 TableB.TableA_id 和 TableA.id 上创建

```
SELECT
  Count(TableA.id)
FROM
  TableA
  JOIN
    TableB 
  ON
        TableB.TableA_id = TableA.id And TableB.id IS NOT NULL
and TableA.clientid=13 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:21:31.027

此查询查找 A 中也在 B 中的所有记录：

```
SELECT TableA.id
FROM TableA
JOIN TableB ON TableB.TableA_id = TableA.id 
```

如果有索引，它将执行良好`TableB.TableA_id`（索引`TableA.id`与此查询的性能无关）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:24:18.950

尝试这个

```
SELECT TableA.id
FROM TableA
INNER JOIN TableB ON TableB.TableA_id = TableA.id 
```

在这种情况下，由于内部连接，您不需要使用 not null。希望这会是更好的解决方案

# php - 如何从服务器中删除文件

> ID：10398191
> 
> 赞同：2
> 
> 时间：2012-05-01T13:16:51.187
> 
> 标签：php, javascript

我在下面有一个 javascript 函数，当用户单击“删除”按钮时，它会从 .listImage 中删除附加的文件名：

```
function stopImageUpload(success, imagefilename){

      var result = '';

      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage">Delete</button><br/><hr/></div>'); 
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

        $(this).parent().remove();

    });

      return true;   
} 
```

但我想知道的是，当用户点击删除按钮时，我也希望将文件从服务器中删除。如何才能做到这一点？

存储文件的文件夹称为 ImageFiles，服务器端的文件名代码为`$_FILES["fileImage"]["name"]`.

将文件上传到服务器是在下面的 php 脚本的单独页面上：

```
<?php
$result = 0;

if( file_exists("ImageFiles/".$_FILES['fileImage']['name'])) {
    $parts = explode(".",$_FILES['fileImage']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileImage']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileImage"]["tmp_name"],
    "ImageFiles/" . $_FILES["fileImage"]["name"]);
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

      }

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:18:34.180

看看这个 - [http://www.php.net/unlink](http://www.php.net/unlink)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:20:56.690

尝试：

```
<?php
// Delete image from server
unlink($path_to_file);
?> 
```

（取消链接；））

# javascript - 将 highstock 标志更改为 xAxis 上的行

> ID：10398192
> 
> 赞同：1
> 
> 时间：2012-05-01T13:16:53.777
> 
> 标签：javascript, jquery, highcharts, highstock

您好，以下代码通过使用类型将标志放在系列上：'flags' name:'' data:[{}] 等等，“”有什么方法可以更改标志类型以绘制线条或区域？“”

代码很简单

```
 series: [{
                      type: 'line',
                      name: 'AAPL',
                      data: ohlc,
                      id:'dataseries'
                  }, {
                  type: 'flags', 'this is what i wanted to change to lines 
                  name: 'Flags on series',
                  data: [{
                  x: 1114992000000,
                      title: 'On series'
                  }, {
                      x: Date.UTC(2011, 3, 28),
                      title: 'On series'
           }],
                      onSeries: 'dataseries',
                      shape: 'squarepin'

                  }, {
                      type: 'line',
                      name: 'Volume',
                      data: volume,
                      yAxis: 1

        }] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:08:12.647

您是否知道highchart 开箱即用支持的[绘图线](http://api.highcharts.com/highstock#xAxis.plotLines)或[绘图带？](http://api.highcharts.com/highstock#xAxis.plotBands)他们没有在 x 轴上给出这些示例，但是在垂直方向上它们也非常有效

[x轴上的垂直绘图线@ jsFiddle](http://jsfiddle.net/jugal/RWCua/)

# c++ - 将一行二维数组分配给一维数组

> ID：10398193
> 
> 赞同：0
> 
> 时间：2012-05-01T13:16:56.440
> 
> 标签：c++, arrays

我想将一行二维数组分配给一维数组，这就是我想要做的。 `int words[40][16]; int arrtemp[16]; arrtemp=words[i];`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:20:24.020

使用[std::copy](http://en.cppreference.com/w/cpp/algorithm/copy)：

```
int words[40][16]; //Be sure to initialise words and i at some point
int arrtemp[16];
//If you don't have std::begin and std::end,
//use boost::begin and boost::end (from Boost.Range) or
//std::copy(words[i] + 0, words[i] + 16, arrtemp + 0) instead.
std::copy(std::begin(words[i]), std::end(words[i]), std::begin(arrtemp)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:18:32.967

数组在 C 和 C++ 中是不可变的。您不能重新分配它们。

您可以使用`memcpy`：

```
memcpy(arrtemp, words[i], 16 * sizeof(int) ); 
```

`16 * sizeof(int)`这会将字节从复制`words[i]`到`arrtemp`。

# java - 我需要 Mac 的 java 中的全局键盘监听器

> ID：10398200
> 
> 赞同：3
> 
> 时间：2012-05-01T13:17:19.437
> 
> 标签：java, macos, keyboard-shortcuts, keyboard-hook

我知道您可以在 Windows 中使用 JIntellitype 收听键盘，但 Mac 是否有类似的东西？感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:58:22.943

JNativeHook 不直接注册全局快捷方式，但您应该能够使用全局键盘侦听器完成同样的事情。支持 Windows Linux 和 OS X。

[http://code.google.com/p/jnativehook/](http://code.google.com/p/jnativehook/)

从 Byron Voorbach 指出的另一个线程： [https](https://github.com/tulskiy/jkeymaster) ://github.com/tulskiy/jkeymaster （需要 JNA）

# java - ArrayList 在复制 JSON 对象的内容后更改索引顺序

> ID：10398201
> 
> 赞同：0
> 
> 时间：2012-05-01T13:17:21.707
> 
> 标签：java, android, arraylist

假设我有一个名为 fruits 的 JSON 对象，这是它的内容：

```
"fruits":[{
    "name":"natural_one", 
    "kind"{
        0:"apple",
        1:"banana",
        2:"pear"
    }
}]; 
```

当我将 JSONObject 的内容复制到新的 ArrayList 中时，索引顺序会发生变化，如下例所示：

```
"fruits":[{
    "kind"{
        1:"banana",
        2:"pear",
        0:"apple"
    },
    "name":"natural_one"
}]; 
```

复制内容时如何防止更改索引顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:22:27.300

我不确定这是您的问题，但 JSON 对象属性没有任何内在顺序。

```
{"a":"b", 
 "c":"d"} 
```

严格等价于

```
{"c":"d", 
 "a":"b"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:21:40.017

> 有人可以给我一个示例，如何在不更改索引顺序的情况下复制 JSONObject 的内容？

这不可能。

该类`JSONObject`将属性存储在哈希表中，因此无法以串行 JSON 表示形式表示属性的顺序。没关系，因为 JSON 规范说属性的顺序并不重要。

这来自 JSON 的起源，它是用于关联数组/对象的 Javascript stntax。Javascript 关联中的条目没有定义/重要的顺序。

# vb6 - 在VB6中分配变量时何时使用括号，何时不使用括号？

> ID：10398207
> 
> 赞同：4
> 
> 时间：2012-05-01T13:17:48.660
> 
> 标签：vb6

我正在查看一些旧的 VB6 代码。我是 VB 新手，我来自 C/Java 背景，所以我不理解一些赋值语句。这是一个例子——

```
 Private Type UGH
       Rsp(3) As Byte
       ProgramId(7) As Byte
       RID(7) As Byte
       TID(3) As Byte
       FL(39) As Byte
    End Type
    Private UHeader As UGH 
```

之后，分配如下：

```
 With UHeader
    StringToByteArray UHeader.ProgramId(), "ABCDPQRS" 
```

我的问题是，为什么在上面的作业中 ProgramId 之后使用了括号？对我来说这似乎是一个函数调用，但它显然不是一个函数调用。那这是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:30:31.583

好吧，实际上并不需要。在没有括号的情况下调用同一行将执行完全相同的操作。允许它的原因是因为它是一个字节数组。

也许像这样重写该行会使其更具可读性：

```
call StringToByteArray(UHeader.ProgramId(), "ABCDPQRS") 
```

但这也是有效的：

```
call StringToByteArray(UHeader.ProgramId, "ABCDPQRS") 
```

如果 StringToByteArray 方法是一个函数而不是子例程，它可能对您更有意义：

```
Private Function StringToByteArray(ByVal strValue As String) As Byte()
    'conversion code left out
End Function 
```

然后你可以这样称呼它：

```
UHeader.ProgramId() = StringToByteArray("ABCDPQRS") 
```

或这个：

```
UHeader.ProgramId = StringToByteArray("ABCDPQRS") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:29:27.933

在这种情况下，括号用于指定一个数组。对于`Rsp(3) as Byte`，它表示从 0 到 2 索引的 3 个字节的数组。

对于 line:`StringToByteArray UHeader.ProgramId(), "ABCDPQRS", StringToByteArray`是一个采用字节数组的方法——将数组传递给方法时，将其作为`array()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:31:09.447

括号也用于数组语法。

所以说，`StringToByteArray UHeader.ProgramId(), "ABCDPQRS"`严格来说不是赋值，而是方法（子例程或函数）调用。 `StringToByteArray`将在您的程序中的某个地方定义，它可能会接受一个 ByRef 数组参数、一个字符串参数，并且它可能会将字符串参数复制到字节缓冲区中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T21:49:06.627

UHeader.ProgramId 实际上是一个指向数组的指针。你可以简单地这样做：`StringToByteArray UHeader.ProgramID, "ABCDPQRS"`. VB6 中的规则是，函数需要对参数列表进行括号括起来，而 Subs 需要不使用括号，除非前面有 Call 语句，在这种情况下它们会这样做。

由于您通过引用传递数组（默认），因此在子例程中执行的操作是在数组本身上执行的。基本上，您传递一个指向数组的指针和一个文字字符串，子例程将使用字符串中的字符填充数组。有点像“非正式”函数调用，如果你愿意的话。

# android - 如何从主要活动中调用偏好操作？

> ID：10398212
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:18:09.320
> 
> 标签：android, android-preferences

我有`PreferenceActivity`，我有以下偏好：

```
 <Preference android:key="pref_test"
        android:title="@string/pref_test" 
        android:summary="@string/pref_test_description"
        android:enabled="true"
        android:persistent="true"
        android:defaultValue="false"/> 
```

我如何从主要活动中调用它（即单击项目）？因此，我将不必重新编写`onPreferenceClick`代码。

我发现了类似的问题：[How to open or simulation a click on an android Preference, created with XML, programmatically?](https://stackoverflow.com/questions/4805896/how-to-open-or-simulate-a-click-on-a-android-preference-which-was-created-with) ，但有问题`findPreference`：

> 对于新的 DialogInterface.OnClickListener(){} 类型，方法 findPreference(String) 未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:32:55.060

看起来最好（也是最简单）的选项是使用 Extra boolean 启动 Preference 活动，然后应根据此额外值调用所有其他操作。就像是：

```
if (getIntent().getBooleanExtra("com.example.ShowExtraDialog", false)) {
       PreferenceScreen screen = (PreferenceScreen) findPreference("pref_key");
   int pos = findPreference("pref_billing_buy").getOrder();
   screen.onItemClick(null, null, pos, 0); 
} 
```

感谢以下问题：[findpreference undefined type](https://stackoverflow.com/questions/7569048/findpreference-undefined-type)

# java - 从 Oracle DB 加载 Java JTable 数据

> ID：10398221
> 
> 赞同：0
> 
> 时间：2012-05-01T13:18:35.137
> 
> 标签：java, swing, jtable

我在获取从“listallButton”检索到的数据以正确显示到 JTable 中时遇到问题。数据库正在`SELECT * FROM ATM`以一组字符串的形式正确发送信息。我不确定它是否被正确接收和记录，因为 JTables 没有显示任何数据并且正在获取 nullpointerexception：

```
 import java.awt.*;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.io.ObjectInputStream;
    import java.io.ObjectOutputStream;
    import java.net.Socket;
    import javax.swing.*;
    import javax.swing.border.Border;
    import javax.swing.table.*;
    import java.util.*;
    import javax.swing.table.AbstractTableModel;

    public class AtmView extends JApplet implements ActionListener{
        final static String banner = "WELCOME TO SHETH BANK!";
        JLabel bannerLabel;
        Border blackline;

        CardLayout myLayout;
        JPanel screensPanel; //main center panel

        JPanel loginPanel; //login panel
        JButton loginButton; //login button
        JTextField accountNumber; //login account number field
        JPasswordField password; //login password/PIN field
        String access_lvl; //login access level
        public String account;
        String pass;
        DataObject communicationObject;
        final static String LOGIN = "LOGIN";

        JPanel empPanel; //employee panel
        CardLayout empLayout; //employee center panel
        JButton createacctButton; //employee create account button
        JButton listallButton; //employee list all accounts button
        JPanel empcenterPanel;
        final static String EMP1 = "EMPLOYEE";
        String balance;
        String withdrawal_amount;
        String withdraw_amount;
        JLabel balanceDisplay;

  final static String LIST = "listallPanel";
  JPanel listallPanel;
  JTable table;
  String[] data;
  String[][] data2;
  String[] temp;
  String row;
  DefaultTableModel tbm; 
  JLabel listdisplay;
  String acclist;
  ArrayList<String> al;

  JButton empBackButton; //emp back
  JButton emplogoutButton; //emp logout
  JButton empwithdrawButton;

  JPanel custPanel; //customer panel
  final static String CUST = "CUSTOMER";

  JButton checkbalButton; //check balance
  JButton withdrawButton; //withdraw
  JButton depositButton; //deposit
  JButton transferButton; //transfer

  JLabel display; //server response display area

    @Override
  public void init(){

    getContentPane().setVisible(true);
    getContentPane().setLayout(new BorderLayout());
    getContentPane().setBackground(Color.BLUE);
    //getContentPane().setBorder(blackline);
    bannerLabel = new JLabel(banner,JLabel.CENTER);
    bannerLabel.setVerticalTextPosition(JLabel.CENTER);
    bannerLabel.setHorizontalTextPosition(JLabel.CENTER);
    bannerLabel.setFont(new Font("Serif", Font.BOLD, 26));
    bannerLabel.setForeground(Color.yellow);
    blackline = BorderFactory.createLineBorder(Color.black);

    //bannerLabel.setBorder(blackline);
    add(bannerLabel, BorderLayout.NORTH);
    //bannerLabel.setBorder(BorderFactory.createMatteBorder(0, 0, 2, 0, Color.BLACK));

    myLayout = new CardLayout();
    screensPanel = new JPanel();
    screensPanel.setLayout(myLayout);
    add(screensPanel, BorderLayout.CENTER);

    //================ LOGIN VIEW ================================== 

    loginPanel = new JPanel(new GridLayout(3,1));
    loginPanel.setBackground(Color.BLUE);
    JLabel loginTitle = new JLabel("ENTER LOGIN INFO", JLabel.CENTER);
    //loginTitle.setVerticalAlignment(SwingConstants.TOP);
    loginTitle.setFont(new Font("Serif", Font.BOLD, 20));
    loginTitle.setForeground(Color.yellow);
    loginPanel.add(loginTitle);

    JPanel accountInfo = new JPanel(new GridLayout(2,1));
    accountInfo.setBackground(Color.blue);
    JPanel accNum = new JPanel();
    accNum.setBackground(Color.BLUE);
    JLabel accLabel = new JLabel("Account Number: ", JLabel.CENTER);
    accLabel.setFont(new Font("Serif", Font.BOLD, 14));
    accLabel.setForeground(Color.yellow);
    accountNumber = new JTextField(4);
    accountNumber.setHorizontalAlignment(JTextField.CENTER);
    accNum.add(accLabel);
    accLabel.setLabelFor(accountNumber);
    accNum.add(accountNumber); 
    accountInfo.add(accNum);
    JPanel pw = new JPanel();
    pw.setBackground(Color.BLUE);
    JLabel pwLabel = new JLabel("Password/PIN: ", JLabel.CENTER);
    pwLabel.setFont(new Font("Serif", Font.BOLD, 14));
    pwLabel.setForeground(Color.yellow);
    password = new JPasswordField(4);
    password.setHorizontalAlignment(JTextField.CENTER);
    pw.add(pwLabel);
    pwLabel.setLabelFor(password);
    pw.add(password);
    accountInfo.add(pw);
    loginPanel.add(accountInfo);

    JPanel logBut = new JPanel();
    loginButton = new JButton("Login");
    loginButton.addActionListener(this);
    logBut.setBackground(Color.blue);
    logBut.add(loginButton);

    loginPanel.add(logBut);

    screensPanel.add(loginPanel, "LOGIN");

    //================ EMPLOYEE VIEW ==================================

    empPanel = new JPanel(new BorderLayout());
    empPanel.setBackground(Color.BLUE);
    JLabel empLabel = new JLabel("Employee View",JLabel.CENTER);
    empLabel.setVerticalTextPosition(JLabel.CENTER);
    empLabel.setHorizontalTextPosition(JLabel.CENTER);
    empLabel.setFont(new Font("Serif", Font.BOLD, 20));
    empLabel.setForeground(Color.yellow);
    empPanel.add(empLabel, BorderLayout.NORTH);

    empLayout = new CardLayout();
    empcenterPanel = new JPanel();
    empcenterPanel.setBackground(Color.blue);
    empcenterPanel.setLayout(empLayout);
    empPanel.add(empcenterPanel, BorderLayout.CENTER);

    JPanel empbuttonPanel = new JPanel(new GridLayout(3,2));
    empbuttonPanel.setBackground(Color.blue);
    checkbalButton = new JButton("Check Balance"); 
    checkbalButton.addActionListener(this);
    empbuttonPanel.add(checkbalButton);
    withdrawButton = new JButton("Withdraw"); 
    withdrawButton.addActionListener(this);
    empbuttonPanel.add(withdrawButton);
    depositButton = new JButton("Deposit"); 
    depositButton.addActionListener(this);
    empbuttonPanel.add(depositButton);
    transferButton = new JButton("Transfer");
    transferButton.addActionListener(this);
    empbuttonPanel.add(transferButton);
    createacctButton = new JButton("Create account");
    createacctButton.addActionListener(this);
    empbuttonPanel.add(createacctButton);
    listallButton = new JButton("List all accounts");
    listallButton.addActionListener(this);
    empbuttonPanel.add(listallButton);
    empcenterPanel.add(empbuttonPanel, "EmpButtonPanel");

    createPanel = new JPanel(new GridLayout(6,1));
    createPanel.setBackground(Color.blue);
    JLabel createTitle = new JLabel("Enter new account info: ",JLabel.CENTER);
    createTitle.setVerticalTextPosition(JLabel.CENTER);
    createTitle.setHorizontalTextPosition(JLabel.CENTER);
    createTitle.setFont(new Font("Serif", Font.BOLD, 18));
    createTitle.setForeground(Color.yellow);
    createPanel.add(createTitle);

    JPanel cloginPanel = new JPanel(new FlowLayout());
    cloginPanel.setBackground(Color.blue);
    JLabel cloginLabel = new JLabel("Account number: ",JLabel.CENTER);
    cloginLabel.setVerticalTextPosition(JLabel.CENTER);
    cloginLabel.setHorizontalTextPosition(JLabel.CENTER);
    cloginLabel.setFont(new Font("Serif", Font.BOLD, 14));
    cloginLabel.setForeground(Color.yellow);
    cloginPanel.add(cloginLabel);
    createloginField = new JTextField(4);
    createloginField.setHorizontalAlignment(JTextField.CENTER);
    cloginLabel.setLabelFor(createloginField);
    cloginPanel.add(createloginField);
    createPanel.add(cloginPanel);
    JPanel cpinPanel = new JPanel(new FlowLayout());
    cpinPanel.setBackground(Color.blue);
    JLabel cpinLabel = new JLabel("PIN: ",JLabel.CENTER);
    cpinLabel.setVerticalTextPosition(JLabel.CENTER);
    cpinLabel.setHorizontalTextPosition(JLabel.CENTER);
    cpinLabel.setFont(new Font("Serif", Font.BOLD, 14));
    cpinLabel.setForeground(Color.yellow);
    cpinPanel.add(cpinLabel);
    createpinField = new JTextField(4);
    createpinField.setHorizontalAlignment(JTextField.CENTER);
    cloginLabel.setLabelFor(createpinField);
    cpinPanel.add(createpinField);
    createPanel.add(cpinPanel);
    JPanel cbalPanel = new JPanel(new FlowLayout());
    cbalPanel.setBackground(Color.blue);
    JLabel cbalLabel = new JLabel("Starting balance: ",JLabel.CENTER);
    cbalLabel.setVerticalTextPosition(JLabel.CENTER);
    cbalLabel.setHorizontalTextPosition(JLabel.CENTER);
    cbalLabel.setFont(new Font("Serif", Font.BOLD, 14));
    cbalLabel.setForeground(Color.yellow);
    cbalPanel.add(cbalLabel);
    createbalanceField = new JTextField(10);
    createbalanceField.setHorizontalAlignment(JTextField.CENTER);
    cbalLabel.setLabelFor(createbalanceField);
    cbalPanel.add(createbalanceField);
    createPanel.add(cbalPanel);
    JPanel clvlPanel = new JPanel(new FlowLayout());
    clvlPanel.setBackground(Color.blue);
    JLabel clvlLabel = new JLabel("Access level (1 for Employee, 2 for Customer): ",JLabel.CENTER);
    clvlLabel.setVerticalTextPosition(JLabel.CENTER);
    clvlLabel.setHorizontalTextPosition(JLabel.CENTER);
    clvlLabel.setFont(new Font("Serif", Font.BOLD, 14));
    clvlLabel.setForeground(Color.yellow);
    clvlPanel.add(clvlLabel);
    createlvlField = new JTextField(1);
    createlvlField.setHorizontalAlignment(JTextField.CENTER);
    cbalLabel.setLabelFor(createlvlField);
    clvlPanel.add(createlvlField);
    createPanel.add(clvlPanel);
    JPanel createbutPanel = new JPanel();
    createbutPanel.setBackground(Color.blue);
    createButton = new JButton("Create");
    createButton.addActionListener(this);
    createbutPanel.add(createButton);
    createPanel.add(createbutPanel);
    empcenterPanel.add(createPanel, "createPanel");

    listallPanel = new JPanel(new BorderLayout());
    listallPanel.setBackground(Color.blue);
    JLabel listTitle = new JLabel("All accounts in system: ",JLabel.CENTER);
    listTitle.setVerticalTextPosition(JLabel.CENTER);
    listTitle.setHorizontalTextPosition(JLabel.CENTER);
    listTitle.setFont(new Font("Serif", Font.BOLD, 16));
    listTitle.setForeground(Color.yellow);
    listallPanel.add(listTitle,BorderLayout.NORTH);

    String[] columnNames = {"Account Number","PIN","Access Level","Balance",};
    String [][] rowTest = {{"1111","1111","1","1000",},{"1111","1111","1","1000",}};
    String delimiter = ",";

    tbm = new DefaultTableModel();  
    tbm.addColumn("Account Number"); 
    tbm.addColumn("PIN"); 
    tbm.addColumn("Access Level"); 
    tbm.addColumn("Balance");

    table = new JTable(tbm);
    JScrollPane scrollPane = new JScrollPane(table);
    listallPanel.add(scrollPane,BorderLayout.CENTER);        

    empcenterPanel.add(listallPanel, "listallPanel");

    JPanel logoutPanel = new JPanel(new FlowLayout());
    emplogoutButton = new JButton("Logout");
    emplogoutButton.addActionListener(this);
    empBackButton = new JButton("Back");
    empBackButton.addActionListener(this);
    logoutPanel.setBackground(Color.blue);
    logoutPanel.add(emplogoutButton);
    logoutPanel.add(empBackButton);
    empPanel.add(logoutPanel, BorderLayout.SOUTH);

    screensPanel.add(empPanel, "EMPLOYEE");

    //================ CUSTOMER VIEW ==================================

    }

  public void actionPerformed(ActionEvent event) {
      if (event.getSource() == loginButton) {
          account = accountNumber.getText();
          pass = password.getText();
          String query = "SELECT access_level FROM ATM a WHERE a.account_number='"+account+"' AND a.pin='"+pass+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              access_lvl = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
          if ((access_lvl.charAt(0)) == '1') {
              myLayout.show(screensPanel, EMP1);
              empLayout.first(empcenterPanel);}
          else {myLayout.show(screensPanel, CUST); } }

      else if(event.getSource() == emplogoutButton) {
          accountNumber.setText("");
          password.setText("");
          account = "";
          pass = "";
          empLayout.first(empcenterPanel);
          myLayout.show(screensPanel, LOGIN);
          doLayout();}

      else if(event.getSource() == checkbalButton) {

      String query = "SELECT balance FROM ATM a WHERE a.account_number='"+account+"' AND a.pin='"+pass+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
          balanceDisplay.setText(balance);
          //balanceDisplayPanel.add(balanceDisplay);
          //checkBalancePanel.add(balanceDisplayPanel);
          empLayout.show(empcenterPanel, EMPBAL); }

      else if(event.getSource() == empBackButton) {
          empLayout.first(empcenterPanel); }

      else if(event.getSource() == withdrawButton) {
          empLayout.show(empcenterPanel, EMPWITH); }  

      else if(event.getSource() == empwithdrawButton) {
      withdraw_amount = withdrawField.getText();
      Integer w_amt = Integer.valueOf(withdraw_amount);
      String query = "SELECT balance FROM ATM a WHERE a.account_number='"+account+"' AND a.pin='"+pass+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
          Integer oldbalance = Integer.valueOf(balance);
          Integer newbalanceamount = oldbalance - w_amt;
          balance2 = "" + newbalanceamount;
          String query2 = "UPDATE ATM SET balance='"+balance2+"' WHERE account_number='"+account+"' AND pin='"+pass+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query2);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              //balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e); }
      withdrawField.setText("");
      empLayout.first(empcenterPanel); }

      else if(event.getSource() == depositButton) {
         empLayout.show(empcenterPanel, EMPDEP); }

      else if(event.getSource() == empdepositButton) {
      deposit_amount = depositField.getText();
      Integer d_amt = Integer.valueOf(deposit_amount);
      String query = "SELECT balance FROM ATM a WHERE a.account_number='"+account+"' AND a.pin='"+pass+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
          Integer oldbalance2 = Integer.valueOf(balance);
          Integer newbalanceamount2 = oldbalance2 + d_amt;
          balance3 = "" + newbalanceamount2;
          String query2 = "UPDATE ATM SET balance='"+balance3+"' WHERE account_number='"+account+"' AND pin='"+pass+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query2);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              //balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
          depositField.setText("");
          empLayout.first(empcenterPanel); }

      else if(event.getSource() == transferButton) {
         empLayout.show(empcenterPanel, EMPTNS); }

      else if(event.getSource() == transferamountButton) {
      fromAccount = fromField.getText();
      toAccount = toField.getText();
      transAmount = transferAmount.getText();
      Integer t_amt = Integer.valueOf(transAmount);
      String query = "SELECT balance FROM ATM a WHERE a.account_number='"+fromAccount+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
      Integer fromBalance = Integer.valueOf(balance);
      String query2 = "SELECT balance FROM ATM a WHERE a.account_number='"+toAccount+"'";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query2);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
      Integer toBalance = Integer.valueOf(balance);
      Integer newFromBalance = fromBalance - t_amt;
      Integer newToBalance = toBalance + t_amt;
      String newFBalance = "" + newFromBalance;
      String newTBalance = "" + newToBalance;
      String query3 = "UPDATE ATM SET balance='"+newFBalance+"' WHERE account_number='"+fromAccount+"'";
      try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query3);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              //balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
      String query4 = "UPDATE ATM SET balance='"+newTBalance+"' WHERE account_number='"+toAccount+"'";    
      try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query4);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              //balance = communicationObject.getMessage();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}      
      toField.setText("");
      fromField.setText("");
      transferAmount.setText("");
      empLayout.first(empcenterPanel); }     

      else if(event.getSource() == createacctButton) {
         empLayout.show(empcenterPanel, CREATE); }

      else if(event.getSource() == createButton) {
          createLogin = createloginField.getText();
          createPin = createpinField.getText();
          createLvl = createlvlField.getText();
          createBalance = createbalanceField.getText();
          String query = "INSERT INTO ATM VALUES ("+createLogin+","+createPin+","+createLvl+","+createBalance+")";
          try {
              communicationObject = new DataObject();
              communicationObject.setMessage(query);
              Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
              ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
              ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
              myOutputStream.writeObject(communicationObject);
              communicationObject = (DataObject)myInputStream.readObject();
              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }   
          catch(Exception e){System.out.println(e);}
          createloginField.setText("");
          createpinField.setText("");
          createlvlField.setText("");
          createbalanceField.setText("");
          empLayout.first(empcenterPanel); }

        else if(event.getSource() == listallButton) {
          String query = "SELECT * FROM ATM";
          String delimiter = ",";
          String input = "go";
          int count=0;
          al = new ArrayList<String>();

              try {
                  communicationObject = new DataObject();
                  communicationObject.setMessage(query);
                  Socket socketToServer = new Socket("sunlab32.njit.edu",31414);
                  ObjectOutputStream myOutputStream = new ObjectOutputStream(socketToServer.getOutputStream());
                  ObjectInputStream myInputStream = new ObjectInputStream(socketToServer.getInputStream());
                  myOutputStream.writeObject(communicationObject);
                  communicationObject = (DataObject)myInputStream.readObject();
                  input = communicationObject.getMessage();
                  if (input != "stop") {
                      al.add(input);
                      data[count] = input;
                      count++; }

                  for (int i=0;i<data.length;i++) {
                      row = data[i];
                      temp = row.split(delimiter);
                      tbm.addRow(new String[] {temp[0],temp[1],temp[2],temp[3]}); } 

                  table.setModel(tbm);
                  table.repaint();

              //Object Object_Array[]=al.toArray();
              //data=new String[Object_Array.length];
              //for (int i=0;i<data.length;i++) {data[i]=Object_Array[i].toString();}

              myOutputStream.close();
              myInputStream.close();
              socketToServer.close(); }
              catch(Exception e){System.out.println(e);}   

          empLayout.show(empcenterPanel, LIST);  }

        }   } 
```

堆栈跟踪：

```
java.lang.NullPointerException at AtmView.actionPerformed(AtmView.java:757) at 
javax.swing.AbstractButton.fireActionPerformed(Unknown Source) at 
javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source) at 
javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source) at 
javax.swing.DefaultButtonModel.setPressed(Unknown Source) at 
javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) at 
java.awt.Component.processMouseEvent(Unknown Source) at 
javax.swing.JComponent.processMouseEvent(Unknown Source) at 
//...
java.awt.EventQueue.dispatchEventImpl(Unknown Source) at 
java.awt.EventQueue.access$000(Unknown Source) at 
java.awt.EventQueue$3.run(Unknown Source) at 
java.awt.EventQueue$3.run(Unknown Source) at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:26:30.463

空点异常可能是由 DB 中的某些空列引起的。你的做法不好，如果DB中有大量记录会导致程序崩溃，更好的方法是使用分页来避免加载大量记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:25:21.907

你的问题是你没有初始化你`data`的字符串数组。

执行查询后，首次访问此实例变量

```
if (input != "stop") {
    al.add(input);
    data[count] = input;
    count++;
} 
```

此时数据为空，您正在尝试访问其第 0 个元素，因此是 NPE。

附带说明：

不要在 EventModelThread 上做如此大量的工作，使用 SwingWorker 执行数据加载操作，然后将更改推送到 UI 上。Swing 是单线程的，在执行数据加载时会阻塞 UI。

尽管在您当前的情况下，考虑到您只有 5 行，它不会产生太大影响，但如果您的行数为 1000 左右，您的 UI 将无响应。另外，不要指望人们在一页中看到所有 1000 行，有分页。

[分页示例代码](https://stackoverflow.com/questions/1481138/how-to-make-pagination-in-swing-java)

[摇摆工人教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

# javascript - 如何使用 javascript 阻止所有客户端 cookie？

> ID：10398224
> 
> 赞同：2
> 
> 时间：2012-05-01T13:19:00.330
> 
> 标签：javascript, cookies

有没有办法阻止使用 javascript 从网页发送到客户端的所有 cookie？也不应该允许来自 iframe 或其他脚本的第三方 cookie。

我已经考虑过了，就像一个触发设置cookie事件并阻止它的监听器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:20:48.583

不，这是不可能的。

您可以通过轮询 cookie 并在发现它们时将其删除（这不适用于仅标记为 http 的 cookie）来为当前域伪造它，但您不能使用 JavaScript 触摸来自其他来源的 cookie。

# git - .git/branches 文件夹是做什么用的？

> ID：10398225
> 
> 赞同：24
> 
> 时间：2012-05-01T13:19:02.813
> 
> 标签：git

我一直认为该`.git/branches`目录是用于遗留目的，并且 git 曾经使用该目录，但现在使用该`.git/refs`目录。这是真的？如果不是，那么该目录的用途是什么，因为我从未见过它被使用或引用过。

编辑

我正在使用 git 版本 1.7.3.4。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-01T13:39:23.610

`.git/branches`有用的[`gitrepository-layout`文档](http://schacon.github.com/git/gitrepository-layout.html)中描述了现在“略微弃用”的使用：

> **分支**：存储用于指定 URL 到*git fetch*、*git pull*和*git push*命令的速记的一种略微弃用的方法是将文件存储在*branch/<name>*中，并为这些命令指定*名称*来代替存储库参数。

在上面的评论中，问题是为什么有些人有这个目录而有些人没有。似乎[在 2009 年引入了一个提交](https://github.com/git/git/commit/0cc5691a8b05a7eabdeef520c94b1bb3bcac7874)，默认情况下阻止了 git 创建`.git/branches`目录。然而，最近该更改[被恢复](https://github.com/git/git/commit/c8a58ac5a52b0850fbca87898d1c6aa44cf5626f)（即意味着`.git/branches` *将*在`git init`等上创建），来自 Junio C. Hamano 的以下理由：

> 这样做没有足够的理由。我们不再更新*.git/branches*和*.git/remotes*中的内容，但仍会从那里读取信息并将继续这样做。
> 
> 此外，这在 t55 中打破了相当多的测试？？系列。

# iphone - 链接 100% 宽度的表格会导致 90% 宽度的表格

> ID：10398227
> 
> 赞同：0
> 
> 时间：2012-05-01T13:19:06.837
> 
> 标签：iphone, ios, email, html-email

这真的很奇怪。

下面的代码应生成 100% 宽度的电子邮件，顶部为石灰色。但是因为 TD 包含一个链接，所以整个表格现在是 90%（左右）——但仅在 iPhone 电子邮件中。删除链接，电子邮件是正确的......这是怎么回事？

[https://s3.amazonaws.com/resultcaptures/C1C356D4-EAC0-4A50-B278-04155E256E51.png](https://s3.amazonaws.com/resultcaptures/C1C356D4-EAC0-4A50-B278-04155E256E51.png)

**我把我的电子邮件归结为：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Email</title>    
</head>
<body bgcolor="brown" style="margin:0;padding:0; ">
    <table cellpadding="0" cellspacing="0" width="100%" bgcolor="black">
        <tr>
            <td bgcolor="Lime">
                <div><a href="#" alt="">This</a> is a link</div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

没什么不对的……对吧？……还是我瞎了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:25:51.197

此 MacRumors 线程提供了该问题的解决方案： http: [//forums.macrumors.com/showthread.php?t=1158457](http://forums.macrumors.com/showthread.php?t=1158457)

> 尝试将 align="center" 和 style="text-align:center" 放在第一个表上，然后在必要时将 style="text-align:left" 放在第二个表上。

如果您将内容包装在居中对齐的父表中，这奇怪地似乎消除了 iPhone 邮件阅读器上的右边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T09:29:35.600

iOS肯定有问题。问题是电子邮件被缩小以适应电子邮件客户端的宽度，但是当邮件比电子邮件客户端窄时，这会发生 - 但仅限于带有锚点的电子邮件。

将表格的 with 设置为 320px 以摆脱它，但告别弹性布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:45:52.237

好的，我找到了一个可行的解决方案：

只需设置：

```
table {
    width: 99%; /* 99.99% doesn't seem to work */
    margin: 0 auto;
} 
```

要消除非常小的最小间隙，只需将背景颜色设置为与您的表格相同。

暂时修好了！

我有同样的问题：[链接](https://stackoverflow.com/questions/9493272/iphone-mail-table-doesnt-stretch-to-100-because-of-an-anchor-tag)

# asp.net-mvc-3 - 在视图中渲染图像

> ID：10398230
> 
> 赞同：0
> 
> 时间：2012-05-01T13:19:18.937
> 
> 标签：asp.net-mvc-3, filecontentresult, image-rendering

我正在尝试在强类型视图中为用户显示一些图片。在模型成员中有一个表示图像内容（例如 jpeg） 我应该如何将此内容传递给 img 标签以呈现此图像？模型看起来像：

```
publiс class Image {
public virtual FileContentResult currentImage { get; set; }
public Image()
        {
            currentImage = createSomeImage(); 
// createSomeImage returns new FileContentResult(bmpBytes, "image/png");
        }
} 
```

视图看起来像

```
@model app.Models.Image
<img src='@Model.currentImage' alt="" class="img" /> 
```

我从父视图将其渲染为：

```
@Html.Partial("_ImageShow", new app.Models.Image()) 
```

我进行了很多搜索，但仅发现由于某些控制器的操作而返回图像的实现。有没有办法在视图中显示具有 fileContentResult 的图像？提前致谢。

# python - 在 windows 命令行中安装 Django

> ID：10398236
> 
> 赞同：1
> 
> 时间：2012-05-01T13:19:32.623
> 
> 标签：python, windows, django

我在 Windows 的命令行中完成了以下命令：

```
python.exe setup.py install 
```

它正在运行然后出现此错误：

```
error: invalid command 'install_lib' (no class 'install_lib' in module 'distutil
s.command.install_lib') 
```

谁能确定它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:07:54.547

下载并安装[适用于 Windows 的 setuptools](http://www.lfd.uci.edu/~gohlke/pythonlibs/#setuptools)，然后运行该命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:24:35.900

好像你没有安装[setuptools](http://pypi.python.org/pypi/setuptools/0.6c11)。您可以使用`ez_setup.py`. 完成后，我建议您`pip`使用`easy_install pip`（easy_install 附带 setuptools）安装，然后安装`django`就是：`pip install django`.

# jquery - 如何在重新加载表单后重新验证表单

> ID：10398247
> 
> 赞同：0
> 
> 时间：2012-05-01T13:20:18.617
> 
> 标签：jquery, jquery-validate

我第一次验证表单时效果很好。当表单有效时，我保存表单实例以备将来使用。

```
MY_GLOBALS[form_instance] = $('#form-section').clone(true); 
```

当我重新加载此表单并清空必填字段时，该表单未经过验证。在保存表单实例之前，我什至删除了有效的类；

```
$("#form-section").replaceWith(MY_GLOBALS[form_instance]); // load saved instance 
```

因此，验证仅在我从新的 #form_section 实例开始时才有效。我也试图强制验证。但是当重新加载表单时，它一直返回 true。

```
console.log('check', $('#myform').validate().form() ); 
```

顺便说一句：实际形式：#myform 是#form-section 的一部分。html 看起来像这样：

```
<section id="form-section">
    <form id="myform" action="/" method="get" novalidate="novalidate"> 
```

novalidate 已由插件添加。在保存之前删除它，没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:23:42.943

您可以 `$.validator.unobtrusive.parse('#myForm')`在重新加载表单时使用

# amazon-s3 - amazon s3 重命名和覆盖文件、建议和风险

> ID：10398250
> 
> 赞同：6
> 
> 时间：2012-05-01T13:20:24.663
> 
> 标签：amazon-s3, batch-rename

我有一个包含两种文件名的存储桶：

1.  `[Bucket]/[file]`
2.  `[Bucket]/[folder]/[file]`

例如，我可以：

1.  `MyBucket/bar`
2.  `MyBucket/foo/bar`

我想将所有`[Bucket]/[folder]/[file]`文件重命名为`[Bucket]/[file]`文件（从而覆盖/丢弃`[Bucket]/[file]`文件）。
所以和前面的例子一样，我想`MyBucket/foo/bar`成为`MyBucket/bar`（并覆盖/删除原来的`MyBucket/bar`）。

我尝试了两种方法：

1.  使用 s3cmd 的 move 命令：`s3cmd mv s3://MyBucket/foo/bar s3://MyBucket/bar`
2.  使用亚马逊的 php 开发工具包：`rename(s3://MyBucket/foo/bar, s3://MyBucket/bar)`

这两种方法似乎都有效，但是 - 考虑到我必须对数千个文件进行批处理，
**我的问题是：**

1.  首选哪种方法？
2.  还有其他更好的方法吗？
3.  **我必须在移动/重命名之前删除旧文件吗？**（没有它似乎可以正常工作，但我可能不知道所涉及的风险）

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T11:47:56.883

自从我大约 5 个月前问过这个问题以来，我有一些时间来获得一些见解；所以我会自己回答：

据我所见，**性能方面没有重大差异**。我可以想象`s3cmd`，由于为每个请求调用外部进程，从 PHP 内部调用可能会很昂贵；但话又说回来 - 亚马逊的 SDK 使用 cURL 来发送它的请求，所以没有太大的区别。

我确实注意到的一个区别是，**亚马逊的 SDK 倾向于抛出 cURL 异常**（看似随机且很少），但`s3cmd`根本没有崩溃。我的脚本在成千上万个文件上运行，因此我不得不学习处理这些 cURL 异常的艰难方法。
我的理论是，当服务器上存在通信冲突时（例如，当两个进程尝试使用相同的资源时），cURL 会崩溃。我正在开发一个开发服务器，有时多个进程同时使用 cURL 访问 S3；这些是 cURL 表现出这种行为的唯一情况。

**结论：**
使用`s3cmd`可能更稳定，但使用 SDK 可以提供更多功能并更好地与您的 PHP 代码集成；只要您记得处理 SDK 抛出 cURL 异常的罕见情况（我会说每 1000 个请求 1 个，当多个进程同时运行时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T20:32:19.753

由于 s3cmd 和 SDK 这两种方法最终都会发出相同的 REST 调用，因此您可以安全地选择最适合您的方法。

当你移动一个文件时，如果目标存在，它总是被替换，那么，如果你不想要这种行为，你需要检查目标文件名是否已经存在，以便执行移动操作.

# objective-c - 缺少初始化的后果？

> ID：10398252
> 
> 赞同：4
> 
> 时间：2012-05-01T13:20:30.853
> 
> 标签：objective-c, cocoa-touch, cocoa, init, nsobject

在将一个编码非常糟糕的 iOS 项目移植到 OS X 的过程中，我强调要保留模型层，以便（以后）能够使两个版本保持同步。

我目前无权更改 iOS 代码库 - 也不是特别想更改。此外，对于所有的故障，模型层都经过测试并且可以正常工作。

他们说，如果它没有坏，就不要修理它。所以我想我的问题是，*下面*的代码是否损坏了？`init`请注意，在 之后没有调用`alloc`，并且被实例化的类是 的直接子类`NSObject`。

```
...
SuspectClass *obj = [SuspectClass alloc];
obj.arrayProperty = [NSArray arrayWith...];

// etc.
... 
```

我想提出问题的另一种方式是`NSObject`'是否`init`真的向对象添加了任何东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T13:28:36.700

从`init`in NSObject 的文档中得到了官方的回答：“一个对象在被初始化之前还没有准备好使用。”

...以及实际的答案：“NSObject 类中定义的 init 方法不进行初始化；它只是返回 self。”

:-)

`alloc`虽然功能齐全，但考虑到警告需要某种形式的地方的数量，我认为我不会相信裸露的`init`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T16:46:23.410

没有 init 你会得到一个处于未定义状态的“对象”（至少有足够的内存空间用于“对象”）。你无法知道你记忆中那个地方发生了什么，所以 init 是必须的

# bash - 比较 Bash 中的许多文件

> ID：10398257
> 
> 赞同：2
> 
> 时间：2012-05-01T13:20:49.147
> 
> 标签：bash, shell, comm

我正在尝试自动化我通常手动完成的工作任务，即从多个用户的权限中获取数据库输出并比较它们以查看它们的共同点。我现在有一个使用 comm 和 paste 的脚本，但它并没有给我我想要的所有输出。

部分问题在于 comm 一次只处理两个文件，我需要至少比较三个文件才能找到趋势。我还需要确定三个中的两个是否有共同点，但第三个没有（因此比较两个 comm 命令的输出不起作用）。我需要这些以逗号分隔的值，以便可以将其导入 Excel。每个用户都有一个专栏，最后是他们共同拥有的所有内容的列表。如果 comm 可以比较两个以上的文件（并显示三分之二的比较），它将完美地工作。

除了代码之外，我还必须从原始 csv 文件中清除所有多余的内容，这是迄今为止我比较四个用户时所拥有的内容。这是非常低效的，但这是我所知道的。

```
cat foo1 | sort > foo5
cat foo2 | sort > foo6
cat foo3 | sort > foo7
cat foo4 | sort > foo8

comm foo5 foo6 > foomp
comm foo7 foo8 > foomp2

paste foomp foomp2 > output2
sed 's/[\t]/,/g' output2 > output4.csv
cat output4.csv 
```

现在这会输出两个用户，他们的相似之处和不同之处，然后对另外两个用户执行相同的操作并将其粘贴在一起。这比手工做的效果更好，但我知道我可以做得更多。

一个示例输入文件将类似于：

用户 1

```
Active Directory
Internet
S: Drive
Sales Records 
```

用户 2

```
Active Directory
Internet
Pricing Lookup
S: Drive 
```

用户 3

```
Active Directory
Internet
Novell
Sales Records 
```

他们有共同的 AD 和 Internet，三分之二的有销售记录访问权限和 S：驱动权限，每个只有一个有 Novell 和定价访问权限。

有人可以帮我解决我所缺少的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:31:48.917

您可以使用该`diff3`程序。从手册页：

```
 diff3 - compare three files line by line 
```

鉴于上面的示例输入，运行`diff3`结果为：

```
====
1:3,4c
  S: Drive
  Sales Records
2:3,4c
  Pricing Lookup
  S: Drive
3:3,4c
  Novell
  Sales Records 
```

这会让你更接近你正在寻找的东西吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T18:14:02.337

使用 GNU AWK ( `gawk`)，您可以打印一个表格，显示多个用户的权限如何关联。你也可以用任何支持关联数组（哈希）的语言来做同样的事情，比如 Bash 4、Python、Perl 等。

```
#!/usr/bin/awk -f
{
    array[FILENAME, $0] = $0
    perms[$0] = $0
    if (length($0) > maxplen) {
        maxplen = length($0)
    }
    users[FILENAME] = FILENAME
}
END {
    pcount = asort(perms)
    ucount = asort(users)
    maxplen += 2
    colwidth = 8
    printf("%*s", maxplen, "")
    for (u = 1; u <= ucount; u++) {
        printf("%-*s", colwidth, users[u])
    }
    printf("\n")

    for (p = 1; p <= pcount; p++) {
        printf("%-*s", maxplen, perms[p])
        for (u = 1; u <= ucount; u++) {
            if (array[users[u], perms[p]]) {
                printf("%-*s", colwidth, "  X")
            } else {
                printf("%-*s", colwidth, "")
            }
        }
    printf("\n")
    }
} 
```

保存此文件，可能称其为“相关”，然后将其设置为可执行：

```
$ chmod u+x correlate 
```

然后，假设文件名对应于用户名或在其他方面有意义（您的示例是“user1”到“user3”，这样效果很好），您可以像这样运行它：

```
$ ./correlate user* 
```

您将根据您的示例输入获得以下输出：

```
 user1   user2   user3
Active Directory    X       X       X
Internet            X       X       X
Novell                              X
Pricing Lookup              X
S: Drive            X       X
Sales Records       X               X 
```

**编辑：**

此版本不使用`asort()`，因此它应该适用于非 GNU 版本的 AWK。缺点是行和列的顺序是不可预测的。

```
#!/usr/bin/awk -f
{
    array[FILENAME, $0] = $0
    perms[$0] = $0
    if (length($0) > maxplen) {
        maxplen = length($0)
    }
    users[FILENAME] = FILENAME
}
END {
    maxplen += 2
    colwidth = 8
    printf("%*s", maxplen, "")
    for (u in users) {
        printf("%-*s", colwidth, u)
    }
    printf("\n")

    for (p in perms) {
        printf("%-*s", maxplen, p)
        for (u in users) {
            if (array[u, p]) {
                printf("%-*s", colwidth, "  X")
            } else {
                printf("%-*s", colwidth, "")
            }
        }
    printf("\n")
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:34:35.453

我会使用 strings 命令从文件中删除任何二进制文件，将它们放在一起，然后在连接的文件上使用 uniq -c 来获取字符串的出现次数

# php - CodeIgniter 路由不起作用

> ID：10398258
> 
> 赞同：3
> 
> 时间：2012-05-01T13:20:51.780
> 
> 标签：php, codeigniter, routing, routes, url-routing

我的路由有问题。我的默认控制器 (mysite.com) 可以工作，但如果我尝试其他任何操作（例如 mysite.com/dashboard），它会转到基于服务器的 404，而不是 CodeIgniter。这非常令人困惑，因为目前我的 routes.php 文件中只有 2 条路径。以下是我的 routes.php 文件中未注释的部分：

```
$route['404_override'] = '';

$route['default_controller'] = 'pages/view';
$route['(:any)'] = 'pages/view/$1'; 
```

我的控制器位于 /application/controllers/pages.php。

我不认为这是一个 .htaccess 问题（因为它可以访问默认控制器），但这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteCond $1 !^(index\.php|styles|scripts|images|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1

#<IfModule mod_gzip.c>
#    mod_gzip_on       Yes
#    mod_gzip_dechunk  Yes
#    mod_gzip_item_include file      \.(html?|txt|css|js|php|pl)$
#    mod_gzip_item_include handler   ^cgi-script$
#    mod_gzip_item_include mime      ^text/.*
#    mod_gzip_item_include mime      ^application/x-javascript.*
#    mod_gzip_item_exclude mime      ^image/.*
#    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
#</IfModule> 
```

**编辑**

这是页面控制器：

```
<?php

        class Pages extends CI_Controller {

        public function __construct()
        {       
                //Construct it's parent
            parent::__construct();

            //Check login
            //$this->load->model('pages_model');
        //$this->pages_model->getLoginStatus();

    }

    public function view($page = 'dashboard')
    {

        //If the file doesn't exist
        if ( ! file_exists('/var/www/vhosts/mysite/httpdocs/library/application/views/pages/'.$page.'.php'))
        {
            // Whoops, we don't have a page for that!
            show_404();
        }       

        $data['title'] = ucfirst($page); // Capitalize the first letter

        //Load all necessary views
        $this->load->view('templates/head', $data); 
        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);

    }

}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-12T18:00:09.403

刚才遇到了同样的问题，只需将 .htaccess 文件移动到工作目录的根目录，
只需将其从应用程序文件夹中取出即可

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:38:21.803

这是我用于所有项目的 htaccess 文件：

```
Options -Indexes
Options +FollowSymLinks

# Set the default file for indexes
DirectoryIndex index.php

<IfModule mod_rewrite.c>

    # activate URL rewriting
    RewriteEngine on

    # do not rewrite links to the documentation, assets and public files
    RewriteCond $1 !^(images|assets|uploads|captcha)

    # do not rewrite for php files in the document root, robots.txt or the maintenance page
    RewriteCond $1 !^([^\..]+\.php|robots\.txt|maintenance\.html)

    # but rewrite everything else
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>

    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 index.php

</IfModule> 
```

然后确保在您的 config.php 文件中：

```
 $config['index_page'] = ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-12T13:02:47.783

最近我将服务器上的 PHP 版本从 7.0 升级到了 7.2。但是，我的 CodeIgniter 路由在这样做后停止工作。所有请求都在浏览器控制台中返回 300 错误。

我通过切换回 PHP 7.0 解决了我的问题。

# c# - 将行添加到源表时不会触发 DataView.ListChanged 事件

> ID：10398260
> 
> 赞同：0
> 
> 时间：2012-05-01T13:21:00.230
> 
> 标签：c#, dataview, listchanged

在某些情况下，当我向表中添加新行时，它不会触发 ListChanged 事件。奇怪的是，更新和删除行确实会触发该事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:50:21.697

您可以手动调用 ListChanged 事件。但在我看到一些代码之前，我无法给你更直接的答案。

# android - 时间选择器 Android

> ID：10398262
> 
> 赞同：3
> 
> 时间：2012-05-01T13:21:16.240
> 
> 标签：android, textview, timepicker

如何在 TimePicker 中设置先前选择的值？

我的意思是，单击 TextView，出现 TimePicker 对话框，然后我选择时间并将其设置在 TextView 中，例如 TextView 上的 12:30 PM。

之后，如果我想更改时间，请再次单击 TextView，然后 TimePicker 对话框应显示先前选择的值。所以 TimePicker 应该显示 12:30 PM。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:26:33.020

如果您使用 onCreateDialog 创建时间选择器对话框并调用它，它将自动存储以前的值。

```
@Override
protected Dialog onCreateDialog(int id) {

switch (id) {

    case 0:

TimePickerDialog timeDlg = new TimePickerDialog(this,
                new TimePickerDialog.OnTimeSetListener() {

                    @Override
                    public void onTimeSet(TimePicker view, int hourOfDay,
                            int minute) {
                        // TODO Auto-generated method stub

                        if (hourOfDay > 12) {
                            hourOfDay = hourOfDay - 12;
                            time = " PM";
                        } else if (hourOfDay < 12 && hourOfDay != 0) {
                            time = " AM";
                        } else if (hourOfDay == 12) {
                            time = " PM";
                        } else if (hourOfDay == 0) {
                            hourOfDay = 12;
                            time = " AM";
                        }

                        Toast.makeText(
                                getApplicationContext(),
                                new StringBuilder().append(pad(hourOfDay))
                                        .append(":").append(pad(minute))
                                        .append(time), Toast.LENGTH_SHORT)
                                .show();
                    }
                }, 12, 00, false);

        timeDlg.setMessage("Set Time:");

        timeDlg.setOnCancelListener(new OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "Dismiss",
                        Toast.LENGTH_SHORT).show();
            }
        });
        return timeDlg;
}
    return null;
} 
```

使用 showDialog(id); 显示对话框。

# ios - 每个堆栈跟踪行末尾的数字是什么意思？

> ID：10398264
> 
> 赞同：2
> 
> 时间：2012-05-01T13:21:25.477
> 
> 标签：ios, xcode, xcode4, stack-trace

我正在检查一些 Xcode 崩溃日志，我想知道每行末尾的数字意味着：

```
0 Powercents 0x000781de testflight_backtrace + 142
1 Powercents 0x00078d6c TFSignalHandler + 212
2 libsystem_c.dylib 0x319937ec _sigtramp + 48
3 libsystem_c.dylib 0x3198920e pthread_kill + 54
4 libsystem_c.dylib 0x3198229e abort + 94
5 AppSupport 0x35f70c2e abortAfterPassingIntegrityCheck + 38
6 AppSupport 0x35f70ee6 runIntegrityCheckAndAbort + 526
7 AppSupport 0x35f7102c checkResultWithStatement + 120
8 AppSupport 0x35f72a12 _connectAndCheckVersion + 1058
9 AppSupport 0x35f72ab6 CPSqliteDatabaseConnectionForWriting + 42
10 AppSupport 0x35f72b8c CPSqliteDatabaseRegisterFunction + 20
11 AddressBook 0x345523f6 ABCDBContextCreateWithPathAndAddressBook + 214
12 AddressBook 0x34546428 ABCCreateAddressBookWithDatabaseDirectoryAndForceInProcessMigrationInProcessLinkingAndResetSortKeys + 232
13 AddressBook 0x34554cd6 ABAddressBookCreate + 14
14 TextInput 0x377981c4 _ZN2KB45fill_with_matchable_strings_from_address_bookERNS_7HashmapINS_6StringEbEE + 16
15 TextInput 0x3779edf4 _ZN2KB21DynamicDictionaryImpl28background_load_address_bookERKNS_16StaticDictionaryE + 200
16 TextInput 0x3779f72e _ZN2KBL14BackgroundLoadEPv + 278
17 libsystem_c.dylib 0x3194a734 _pthread_start + 320
18 libsystem_c.dylib 0x3194a5ef thread_start + 7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-04T12:41:19.000

它们是机器码偏移量

例如在这张图片中，

*   `libsystem_kernel.dylib mach_msg`的机器码从地址开始`0x18474f054`。
*   `libsystem_kernel.dylib mach_msg + 68`，如您所见，这是`mach_msg_trap`被调用的地方，而`mach_msg_trap`'s addrss 是`0x18474f21c`，
*   `libsystem_kernel.dylib mach_msg + 72`是断点停止的地方，等于`0x18474f054 + 0x72`

[![在此处输入图像描述](../Images/702867a1cf02360a73d678e06bbaf6ae.png)](https://i.stack.imgur.com/Z7Ibw.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:58:31.240

您的崩溃日志没有符号化。如果你象征它，它应该给你更容易解释的信息。

这是一个讨论这个的文件：

[http://developer.apple.com/library/ios/#technotes/tn2151/_index.html](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)

# objective-c - 访问 viewDidLoad 期间填充的数组时出错

> ID：10398270
> 
> 赞同：0
> 
> 时间：2012-05-01T13:21:53.570
> 
> 标签：objective-c, nsarray

我的 xib 文件中有一堆滑块，我在头文件中引用这些滑块，如下所示：

```
@property (nonatomic, retain) IBOutlet UISlider *slider1;
@property (nonatomic, retain) IBOutlet UISlider *slider2;
@property (nonatomic, retain) IBOutlet UISlider *slider3; 
```

然后我在头文件中声明我的 NSArray ：

```
@property (nonatomic, retain) NSArray *sliders; 
```

现在在我的实现中，我在 viewDidLoad 处理程序期间用滑块填充数组

```
sliders = [NSArray arrayWithObjects:slider1, slider2, slider3, nil]; 
```

属性当然是综合的。到目前为止一切都很好。通过断点，我可以看到数组已正确填充，并且我使用 NSLog 获得了滑块值。

问题是当我处理按钮提交事件时，该数组似乎为空 此行生成执行中止错误：

```
id obj = [sliders objectAtIndex:0]; 
```

请任何人都可以帮助指出我哪里出错了？这是使用一组滑块或任何控件的正确方法吗？我想遍历它们，最好是用字典，这样我就可以用字符串键引用它们，但我会满足于简单的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:29:33.900

代替

```
sliders = [NSArray arrayWithObjects:slider1, slider2, slider3, nil]; 
```

和

```
self.sliders = [NSArray arrayWithObjects:slider1, slider2, slider3, nil]; 
```

通过直接访问 ivar，您绕过了属性的内存管理，因此您的数组在设置后被释放。然后您会发生崩溃，因为您正在向已发布的对象发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:26:17.997

你可以替换：

```
 id obj = [sliders objectAtIndex:0]; 
```

和

```
 UISlider *obj = [sliders objectAtIndex:0]; 
```

也尝试打电话

```
 self.sliders //instead of just sliders 
```

看看它是否仍然崩溃，如果数组非零，也尝试做一个条件......你连接了插座吗？你是过度释放还是释放不足 你在 ARC 上吗？

重要问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:28:10.750

没有看到代码很难猜测，但我会寻找以下内容：

*   在使用 NSLOG 使用 objectAtIndex 之前，您可以在行中显示数组吗
*   您是否使用属性分配给滑块（self.sliders），如果没有，您最终可能会访问已释放的数组。
*   如果您没有使用 ARC，您是否尝试过使用 NSZombies 来跟踪问题？

# c# - 滚动时 WP7 列表框项目不同步

> ID：10398274
> 
> 赞同：3
> 
> 时间：2012-05-01T13:22:20.243
> 
> 标签：c#, silverlight, windows-phone-7, xaml, silverlight-toolkit

我有一个页面，其中有一个带有以下项目模板的列表框，如下所示：

```
<ListBox x:Name="test">
    <ListBox.ItemTemplate>
        <DataTemplate>
                <Grid MaxHeight="108" Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="4" />
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Rectangle Height="108" Grid.Column="0" Fill="{Binding Color}"/>
                    <Image Source="{Binding Image}" Height="108" Width="108" Grid.Column="1" HorizontalAlignment="Left" Stretch="UniformToFill"/>
                    <StackPanel Grid.Column="2">
                        <TextBlock Text="{Binding Title}" TextWrapping="NoWrap" />
                        <TextBlock Text="{Binding SubHeading}" TextWrapping="NoWrap" />
                        <TextBlock Text="{Binding Body}" TextWrapping="Wrap" />
                    </StackPanel>
                </Grid>
         </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

在页面的 OnNavigatedTo 事件上，我将列表框的项源设置为大约 20 个项的可观察集合。

一切都很好并且列表已填充，但是当我向上或向下滚动列表时，这些项目在 UI 上看起来不同步。例如，显示在第一个列表项上的文本出现在列表框中的最后一项上，有时会出现重复项，并且每次向上或向下滑动时，项目都是不同的。

我已经调试了列表框项目，我可以看到正确的对象被绑定到正确的项目。因此，只有 UI 上显示的内容不正确。

我还尝试过明确地使用标准堆栈面板而不是虚拟化堆栈面板，并且通过确保所有项目都加载到内存中来解决这个问题。

我不认为删除虚拟化是答案。必须有一个根本原因。但是它可能是可以接受的，因为我的列表框永远不会真正包含超过 30 个项目。

在另一页上，我对 silverlight 工具包 longlistselector 做了同样的事情，并且遇到了同样的问题。但是我不确定如何在 longlistselector 上删除虚拟化。

总而言之，导致列表框项目在滚动时无法正确更新 UI 的潜在问题可能是什么？如果删除虚拟化是唯一的答案，我该如何在 longlistselector 上执行此操作？

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T21:28:32.003

[也许这](http://blog.rsuter.com/?p=258)是某种问题？（滚动时跳转列表框）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:40:17.390

事实证明，这是一个绑定问题，与列表框无关。

我（在不知不觉中）在项目模板中删除了一些属性的绑定，在我绑定到它们之后（在其他一些代码中）因此，每次列表框为新项目回收容器时，它都无法用正确的更新它信息。

感谢你的帮助

# java - java服务器信息中的postgres

> ID：10398276
> 
> 赞同：0
> 
> 时间：2012-05-01T13:22:34.730
> 
> 标签：java, postgresql

创建用Java制作的服务器。服务器在端口 111 上接受请求，当客户端连接到服务器时，向它发送一个 JSON 文件。服务器收到 JSON 然后他必须存储到 postgres 数据库中。

我的问题是如何管理 postgres 连接。

我应该只创建一个连接并为每个客户端请求同步它，还是为连接到服务器的每个客户端创建一个新连接。

我是说：

--------- 只有一个连接： --------------

服务器创建唯一的一个连接

```
_connection = DriverManager.
   getConnection("jdbc:postgresql:"+_dbName, _username, _password); 
```

并为每个客户使用此连接

```
syncronize(_connection) { send data to database } 
```

--------- 每个客户端的连接 -------------

服务器在接受客户端请求时为连接的客户端创建新连接

```
_clientConnection = DriverManager.
   getConnection("jdbc:postgresql:"+_dbName, _username, _password); 
```

每个客户都有个人联系。

谁能解释做这些事情的最佳工作实践是什么？我认为与 MySQL 相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:34:01.067

最佳实践是使用连接池。这确保了

*   多个客户端可以同时访问数据库
*   打开连接的数量始终保持合理，并且不会在大量并发请求的情况下使服务器或数据库屈服
*   连接不会经常打开和关闭。打开连接是一项耗时且消耗内存的操作

有几个可用的免费连接池（C3P0、DBCP 等）。谷歌是你的朋友。

# java - Android - 如何在另一个叠加层的 onTap 动作中显示另一个叠加层

> ID：10398277
> 
> 赞同：1
> 
> 时间：2012-05-01T13:22:35.657
> 
> 标签：java, android, overlay, android-mapview, itemizedoverlay

我正在使用 MapView 将一些多边形（区域）显示为画布上的叠加层。我扩展了 Overlay 类，现在想实现 onTap 方法。用户点击这些区域之一后，应显示另一个叠加层。我想将此叠加层的布局定义为普通的 XML 布局，而不仅仅是膨胀并显示。

我已经看过一个名为 android-mapviewballoons 的示例，但它使用逐项叠加层，该叠加层采用可绘制资源并将其显示在地图视图上。这个drawable可以被录音。就我而言，我希望我的区域（多边形）成为可点击的资源。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:38:24.003

第 1 步：实施并确认`onTap()`您`Overlay`在需要时获得控制权。

第 2 步：调整现有布局，使其`MapView`位于支持 Z 轴排序的容器中，例如`RelativeLayout`

步骤#3：在`onTap()`中，向容器中添加另一个孩子（并最终在适当的时候摆脱那个孩子）

这是我的一本书[中的一个示例应用程序](https://github.com/commonsguy/cw-advandroid/tree/master/Maps/EvenNooerYawk)`ItemizedOverlay`，它使用`Overlay`.

# c++ - 退出时应用程序崩溃

> ID：10398281
> 
> 赞同：1
> 
> 时间：2012-05-01T13:22:47.437
> 
> 标签：c++, qt, mingw

我有以下问题：我正在为游戏编写一个小改装工具，一切正常。但是当我编译它是静态的，Qt 是静态的，当我关闭应用程序时它会崩溃。当我使用标准 Qt 动态库编译它时不会发生这种情况。

那我做错了什么？这是gdb的输出，我有：

![](../Images/69a62c7bbdbf36b7be8b09b473e35ce1.png)

我将不胜感激任何帮助。如果您需要我的代码的任何部分，请说出来。我实际上不确定在这里，我应该发布我的代码的哪一部分！

谢谢

编辑：看来问题出在构建链中。除了-static之外，我使用相同的配置构建了库。我的错误在那里吗？

配置 -release -nomake 示例 -nomake 演示 -no-qt3support -no-scripttools -no-openssl -no-opengl -no-webkit -no-phonon -no-style-motif -no-style-cde -no-style- cleanlooks -no-style-plastique -no-sql-sqlite

# ruby-on-rails - Rails模型“before_filter”？

> ID：10398282
> 
> 赞同：12
> 
> 时间：2012-05-01T13:22:49.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, callback

我知道 before_filter 仅适用于 Rails 中的控制器，但我想对模型进行这样的处理：每当调用模型中的方法时，我都想运行一个确定被调用方法是否应该运行的方法。从概念上讲，是这样的：

```
class Website < ActiveRecord::Base
  before_filter :confirm_company

  def confirm_company
    if self.parent.thing == false?
      return false
    end
  end

  def method1
    #do stuff
  end

end 
```

所以当我调用@website.method1 时，它会先调用confirm_company，如果我返回false，就不会运行method1。Rails 有这样的功能吗？我希望我只是在这里错过了一些明显的东西......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T14:02:27.327

```
class MyModel
    extend ActiveModel::Callbacks
    define_model_callbacks :do_stuff

    before_do_stuff :confirm

    def do_stuff
        run_callbacks :do_stuff do
            #your code
        end
    end

    def confirm
        #confirm
    end
end 
```

我真的不确定这会奏效，但你可以试试，因为我现在真的没有时间。看看那个：[http ://api.rubyonrails.org/classes/ActiveModel/Callbacks.html](http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-08T07:01:38.843

我为此做了一颗宝石。

您可以将其插入任何 ruby​​ 类，并在控制器中执行类似的操作。

```
before_action :foobar, on: [:foo] 
```

[https://github.com/EdmundLeex/action_callback](https://github.com/EdmundLeex/action_callback)

# android - 从地理编码 API 获取纬度和语言？

> ID：10398286
> 
> 赞同：0
> 
> 时间：2012-05-01T13:22:57.057
> 
> 标签：android, json, maps, geocoding, latitude-longitude

我想从 Geo Coding API 获取纬度和经度位置。我为此编写了以下代码。

```
package com.appulento.mapsexample.pack;
import android.graphics.Point;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;
import com.mapsinfo.pack.DBAdapter;

public class MapsMianClass extends MapActivity {

   private MapController   mapController;
    private LocationManager locationManager;
    private  MapView mapView;
    List<Overlay> listOfOverlays ;
    private List mapOverlays;
    private Projection projection;
    private Geocoder geoCoder;
    private MapController mc;
    private GeoPoint gP;
    private DBAdapter db;

   /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       //here i am giving the Maps Geo coding API   URL    

        Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true_or_false"));
        startActivity(intent);
        //starting the Intent
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    //default method of maps Activity.
    }         
} 
```

这是对的吗？如何在上述代码中合并 JSON 以从 URL 获取纬度和经度值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:51:59.623

试试这个代码

```
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URI;

public class MyActivity extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        AsyncTask<String, Void, Void> stringVoidVoidAsyncTask = new AsyncTask<String, Void, Void>() {

            BufferedReader in;

            @Override
            protected Void doInBackground(String... strings) {

                String url = "";
                if (strings.length > 0) {
                    url = strings[0];
                } else {
                    return null;
                }
                try {
                    HttpClient httpClient = new DefaultHttpClient();// Client
                    HttpGet getRequest = new HttpGet();

                    getRequest.setURI(new URI(url));
                    HttpResponse response = httpClient.execute(getRequest);

                    in = new BufferedReader
                            (new InputStreamReader(response.getEntity().getContent()));
                    StringBuffer sb = new StringBuffer("");
                    String line = "";
                    String NL = System.getProperty("line.separator");
                    while ((line = in.readLine()) != null) {
                        sb.append(line + NL);
                    }
                    in.close();
                    String page = sb.toString();
                    JSONObject jsonObject = new JSONObject(page);
                    JSONArray jsonArray = (JSONArray) jsonObject.get("results");
                    if (jsonArray.length() > 0) {
                        jsonObject = (JSONObject) jsonArray.get(0);
                        jsonObject = (JSONObject) jsonObject.get("geometry");
                        JSONObject location = (JSONObject) jsonObject.get("location");
                        Double lat = (Double) location.get("lat");
                        Double lng = (Double) location.get("lng");
                        System.out.println("lat - " + lat + " , lon - " + lng);
                    }
                    System.out.println(page);
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    if (in != null) {
                        try {
                            in.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }
                return null; 
            }
        };
        stringVoidVoidAsyncTask.execute("http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true");
    }
} 
```

并在 AndroidManifest 中为 Internet 添加权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

下次在提问之前先做功课，先用谷歌搜索。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T13:50:31.020

你想在 Activity 的 onCreate() 中的 StartActivity() 方法中启动什么？

您应该使用[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)进行 http 请求 并解析它的响应

# excel - 取一个参考单元格，搜索第二张纸，用相同的标识符替换数据

> ID：10398287
> 
> 赞同：2
> 
> 时间：2012-05-01T13:23:00.337
> 
> 标签：excel, vba

我决定改变我的机智。我决定再试一次，但以一种新的方式。我做了一个周末的谷歌马拉松，发现我相信我的答案，

```
Option Explicit
Sub DataUpdate()
Dim rFind As Long, NR As Long, LR As Long, LC As Long
LR = Range("C" & Rows.Count).End(xlUp).Row
LC = Cells(2, Columns.Count).End(xlToLeft).Column
NR = LR + 1

On Error Resume Next
rFind = Range("A25:A" & LR).Find(Range("A1")).Row
On Error GoTo 0

    If rFind = 0 Then
        If MsgBox("Customer record not found, add to dataset?", vbYesNo + vbQuestion) = vbYes Then
            Range("A2", Cells(LC, 2)).Copy
            Range("C" & NR).PasteSpecial xlPasteValues
            Range("A1", Cells(1, LC)).ClearContents
            Exit Sub
        End If
    Else
        Range("A2", Cells(2, LC)).Copy
        Range("A" & rFind).PasteSpecial xlPasteValues
        Range("A1", Cells(1, LC)).ClearContents
    End If
End Sub 
```

看着这个，我只想要一个更清晰的解释，而不是按原样使用它，并且在不知道我在做什么的情况下使用它。

这是它所在的工作表：

[http://dl.dropbox.com/u/3327208/Excel/Replace.zip](http://dl.dropbox.com/u/3327208/Excel/Replace.zip)

如果我将它添加到我的代码中，反刍这个代码我看到我可以做到这一点，我只是想验证这是正确的。

```
Option Explicit

Sub PENCMR()
    Dim i As Integer

    With Application
        .ScreenUpdating = False
    End With

    'Internal NCMR
    Dim wsPE As Worksheet
    Dim wsNDA As Worksheet

    'Copy Ranges
    Dim c As Variant

    'Paste Ranges
    Dim p As Range

    'Setting Sheet
    Set wsPE = Sheets("Print-Edit NCMR")
    Set wsNDA = Sheets("NCMR Data")
    Set p = wsPE.Range("A54:U54")

    With wsPE
        c = Array(.Range("AG2"), .Range("B11"), .Range("B14"), .Range("B17"), .Range("B20"), .Range("B23") _
                , .Range("Q11"), .Range("Q14"), .Range("Q17"), .Range("Q20"), .Range("R25"), .Range("V23") _
                , .Range("V25"), .Range("V27"), .Range("B32"), .Range("B36"), .Range("B40"), .Range("B44") _
                , .Range("D49"), .Range("L49"), .Range("V49"))
    End With

    For i = LBound(c) To UBound(c)
        p(i + 1).Value = c(i).Value
    Next

    With wsNDA
        Dim rFind As Long, NR As Long, LR As Long, LC As Long
        LR = Range("C" & Rows.Count).End(xlUp).Row
        LC = Cells(2, Columns.Count).End(xlToLeft).Column
        NR = LR + 1
        rFind = wsNDA.Range("A:A" & LR).Find(Range("A54")).Row

        Range("A54", Cells(2, LC)).Copy
        Range("A" & rFind).PasteSpecial xlPasteValues
        Range("A54", Cells(1, LC)).ClearContents

    End With

    With Application
        .ScreenUpdating = True
    End With
End Sub 
```

代码运行，但它没有返回错误，但它没有完全运行。它达到了将所有东西拖下的地步，然后它似乎死在那里。有人可以帮我找出为什么它没有做我认为应该做的事情，即复制行，在 A 列中搜索数字，然后用第 54 行中的正确数据覆盖它...

我知道出了点问题，但是我没有能力弄清楚是什么，如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:46:43.073

我不是 100% 确定您要达到的目标，但您的代码中有几个问题：

代替

```
Set p = wsPE.Range("A54:U54")
For i = LBound(c) To UBound(c)
    p(i + 1).Value = c(i).Value
Next 
```

你大概是说

```
Set p = wsPE.Range("A54")
For i = LBound(c) To UBound(c)
    p.Offset(0, i) = c(i)
Next 
```

在您的`With wsNDA`块中，您需要在and`.`之前放置，例如：`Range``Cells`

```
.Range("A54", .Cells(2, LC)).Copy 
```

最后：

*   我现在将删除这些`ScreenUpdating`语句，并在调试模式 (F8) 下运行代码，以逐步查看代码在做什么，并在必要时检查变量的值，使用“添加监视”
*   我会避免使用范围来存储临时数据。您可以改用二维数组，例如：

* * *

```
Dim data As Variant
Redim data(1 To 1, 1 To 21) As Variant
for i = xx To yy
    data(1,i+1) = c(i)
Next i

yourTargetCell.Resize(1, UBound(data,2)) = data 
```

# c# - 如何打印列表视图的多条记录

> ID：10398289
> 
> 赞同：1
> 
> 时间：2012-05-01T13:23:23.883
> 
> 标签：c#, wpf, listview, gridview, printing

如何打印列表视图的多条记录？该`PrintVisual`方法仅打印特定尺寸或视图（您一次站立的位置）的图像。

您能否就如何使用`PrintVisual`或任何其他方法打印多条记录给我一些建议？

我是新手`WPF`，所以如果有人知道如何解决这个问题，请简要解释一下？（我的列表视图绑定到另一个控件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:39:00.153

使用 for 循环

例如：for(int i=0; i< datagridview1.rows.count;i++)
{
//此处打印代码
}

# php - 使用 POS-tagging 否定句子

> ID：10398294
> 
> 赞同：6
> 
> 时间：2012-05-01T13:24:07.967
> 
> 标签：php, regex, nlp

我正在尝试找到一种基于 POS 标记来否定句子的方法。请考虑：

```
include_once 'class.postagger.php';

function negate($sentence) {  
  $tagger = new PosTagger('includes/lexicon.txt');
  $tags = $tagger->tag($sentence);
  foreach ($tags as $t) {
    $input[] = trim($t['token']) . "/" . trim($t['tag']) .  " ";
  }
  $sentence = implode(" ", $input);
  $postagged = $sentence;

  // Concatenate "not" to every JJ, RB or VB
  // Todo: ignore negative words (not, never, neither)
  $sentence = preg_replace("/(\w+)\/(JJ|MD|RB|VB|VBD|VBN)\b/", "not$1/$2", $sentence);

  // Remove all POS tags
  $sentence = preg_replace("/\/[A-Z$]+/", "", $sentence);

  return "$postagged<br>$sentence";
} 
```

顺便说一句：在这个例子中，我使用了Ian Barber 的[POS 标记实现](http://phpir.com/part-of-speech-tagging)和[词典](http://phpir.com/user/files/text/lexicon.txt)。运行此代码的一个示例是：

```
echo negate("I will never go to their place again");
I/NN will/MD never/RB go/VB to/TO their/PRP$ place/NN again/RB 
I notwill notnever notgo to their place notagain 
```

正如你所看到的，（这个问题也在代码中注释），否定词本身被否定为 wel: become `never`，`notnever`这显然不应该发生。由于我的正则表达式技能还不是全部，有没有办法从使用的正则表达式中排除这些单词？

[编辑]另外，我非常欢迎您在这个否定实施中可能有其他评论/批评，因为我确信它（仍然）有很大缺陷:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:09:59.207

试试这个：

```
$sentence = preg_replace("/(\s)(?:(?!never|neither|not)(\w*))\/(JJ|MD|RB|VB|VBD|VBN)\b/", "$1not$2", $sentence); 
```

# c# - 如何从gridview的dataTable中获取价值？

> ID：10398295
> 
> 赞同：0
> 
> 时间：2012-05-01T13:24:16.160
> 
> 标签：c#, asp.net

我有一个 girdivew 和一个 SQLDataSource 来将 dataTable 信息绑定到 gridview。

如何获取 Row UPDATING EVENT 中当前编辑行的某一列的值。（来自数据表）。

谢谢 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:41:05.250

在下面的示例中，我在网格中显示数据，然后允许用户异步激活或停用评论。我正在使用 UPDATE PANEL 来异步激活它。

您需要同时使用 rowDataBound 和 RowCommand 事件来实现这一点

通过这种方式，您可以获得行的 id 并查看您想对该行执行的操作，无论是编辑、删除还是像我在此示例中所做的那样，我更新**了一个 COLUMN**

```
 <asp:GridView ID="gvSHowMostViewedArticles"  runat="server" AllowPaging="True" 
         AutoGenerateColumns="False"  Width="920px" BackColor="White" 
         BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="4" 
         Font-Names="Verdana" Font-Size="X-Small" ForeColor="Black" 
         GridLines="Horizontal" PageSize="10"   onrowdatabound="gvSHowMostViewedArticles_RowDataBound" 
onrowcommand="gvSHowMostViewedArticles_RowCommand" onpageindexchanging="gvSHowMostViewedArticles_PageIndexChanging">

         <Columns>
          <asp:TemplateField HeaderText="Sno">
                <ItemTemplate>
                  <%# Container.DataItemIndex + 1 %>
               </ItemTemplate>
          </asp:TemplateField>
   <asp:BoundField DataField="ArticleTitle" HeaderText="Article Title" />
   <asp:BoundField DataField="FullName" HeaderText="Name" />
   <asp:BoundField DataField="Country" HeaderText="Country" />

<asp:TemplateField HeaderText="Message">
       <ItemTemplate>
           <asp:LinkButton ID="lnkBtnShowMessage" runat="server" Text="Read" CommandName="showMessage" CommandArgument='<%# Eval("ID") %>' />
                                                </ItemTemplate>
                                         </asp:TemplateField>
                                        <asp:TemplateField HeaderText="Activate">
                                                <ItemTemplate>
                                                    <asp:LinkButton ID="lnkBtnActivateComment" runat="server" Text="Activate" CommandName="ActivateComment" CommandArgument='<%# Eval("ID") %>' />
                                                </ItemTemplate>
                                         </asp:TemplateField>
                                        <asp:TemplateField HeaderText="De Activate">
                                                <ItemTemplate>
                                                    <asp:LinkButton ID="lnkBtnDeActivateComment" runat="server" Text="De-Activate" CommandName="DeActivateComment" CommandArgument='<%# Eval("ID") %>' />
                                                </ItemTemplate>
                                         </asp:TemplateField> 
```

```
 protected void gvSHowMostViewedArticles_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            //Show Message
            LinkButton lb = e.Row.FindControl("lnkBtnShowMessage") as LinkButton;
            if (lb != null)
                ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(lb);

            //Activate
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                LinkButton lbActivate = e.Row.FindControl("lnkBtnActivateComment") as LinkButton;
                if (lbActivate != null)
                    ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(lbActivate);

                lbActivate.Attributes.Add("onclick", "javascript:return " +
                "confirm('Are you sure you want to Activate this comment " +
                DataBinder.Eval(e.Row.DataItem, "ID") + "')");
            }
            //De Activate
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                LinkButton lbActivate = e.Row.FindControl("lnkBtnDeActivateComment") as LinkButton;
                if (lbActivate != null)
                    ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(lbActivate);

                lbActivate.Attributes.Add("onclick", "javascript:return " +
                "confirm('Are you sure you want to De-Activate this comment " +
                DataBinder.Eval(e.Row.DataItem, "ID") + "')");
            }
        }

      protected void gvSHowMostViewedArticles_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            //Show Message
            if (e.CommandName == "showMessage")
            {
                int sno = Convert.ToInt32(e.CommandArgument);
                string strSql = "SELECT * FROM Comments WHERE comID = " + sno;
                DataSet ds = DataProvider.Connect_Select(strSql);
                lblCommentMessage.Text = ds.Tables[0].Rows[0]["comMessage"].ToString();
            }

            // Activate Comment
            if (e.CommandName == "ActivateComment")
            {
                int sno = Convert.ToInt32(e.CommandArgument);
                String strSql = "UPDATE Comments SET Visible = 1 WHERE ID = " + sno;
                DataProvider.Connect_Select(strSql);
                lblCommentMessage.Text = "Activated";
            }

            // De Activate Comment
            if (e.CommandName == "DeActivateComment")
            {
                int sno = Convert.ToInt32(e.CommandArgument);
                String strSql = "UPDATE Comments SET Visible = 0 WHERE ID = " + sno;
                DataProvider.Connect_Select(strSql);

                lblCommentMessage.Text = "Deactivate";

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:30:03.197

你试过什么？您是否仅尝试从某个列中获取数据？还是代表整行的某个 ID？如果是后者，您可以执行以下操作：

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    int ID = Convert.ToInt16(GridView1.SelectedDataKey.Value);

} 
```

你必须在你的gridview中声明你的数据键名，像这样：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="id" DataSourceID="SqlDataSource1" 
    onselectedindexchanged="GridView1_SelectedIndexChanged"> 
```

用户评论后编辑：

如果您想要某个列中的某个值，您可以这样做：

```
<asp:GridView ID="GridView1" runat="server" OnRowDataBound="handler" 
        AutoGenerateColumns="False" DataSourceID="SqlDataSource1" 
        DataKeyNames="id"  OnRowCommand="RowCommandHandler"> 
```

将 onRowCommand 添加到您的 gridview，然后在您的代码隐藏中：

```
 protected void RowCommandHandler(Object sender, GridViewCommandEventArgs e)
 {
  int index = Convert.ToInt32(e.CommandArgument);
  GridViewRow row = GridView1.Rows[index];
   int k = row.RowIndex;
   string text = row.Cells[1].Text;
 } 
```

您获取所选行的索引，然后获取该索引并将其传递给 GridView1.Rows，然后您拥有选定的行，然后您可以从您想要的任何列获取数据。

```
 string text = row.Cells[1].Text; 
```

如果您需要文本的列是第 4 列，您只需将 Cells[1] 更改为 Cells[4] 等。

# php - 带有codeigniter的ajax jquery。url 不访问控制器

> ID：10398298
> 
> 赞同：5
> 
> 时间：2012-05-01T13:24:19.547
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我是 codeigniter 的新手，无法让我的 ajax 工作。
我正在尝试使链接在单击时将内容加载到主文档中。
我寻找说明，但无法弄清楚。除 ajax 外的所有工作都返回`alert('ERROR')`消息。没有加载任何东西`<div id='load_here'></div>`
也许我在 config.php 中遗漏了一些东西？我是否必须加载一些库才能使其工作？任何想法都会有所帮助//主文档链接

```
<span id='reg_link_rules'>Link</span>  
<div id='load_here'></div> 
```

// 控制器

```
class Register extends CI_Controller {
   public function hello()
   {
      echo 'hello';
   }
} 
```

// jQuery

```
$(document).ready(function() {
    $('#reg_link_rules').click(function(eve){

    $.ajax({
      type: "GET", 
      url: "register/hello", 

      complete: function(data){
        $('#load_here').html(data);
    },
    error: function(){alert('error');}
    });
  });
}); 
```

我认为问题在于 ajax url 没有访问控制器。Z:/home/codeigniter/www/register/test 这是我认为需要的地方

问题解决了，url需要是[http://codeigniter/index.php/register/hello](http://codeigniter/index.php/register/hello)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T13:26:25.450

尝试使用 url：“/register/hello”。

可能会奏效。

通常我会做一个

```
<script type="text/javascript">
    base_url = '<?=base_url()?>';
</script> 
```

在我页面的开头，简单地说

```
base_url+"register/hello" 
```

反而

这使我的 ajax 更可靠，即使 / 不正确。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T13:28:00.587

```
complete: function(data){
        $('#load_here').html(data);
    }, 
```

## 应该

只是引用另一个 SO 问题......[在 AJAX 调用中使用 success() 或 complete()](https://stackoverflow.com/questions/1021062/use-succes-or-complete-in-ajaxcall)

```
success: function(data){
        $('#load_here').html(data);
    }, 
```

和

```
$.ajax({
  type: "GET", 
```

## 应该

除非您希望在 URL 中提交您的表单变量。

```
$.ajax({
  type: "POST", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T13:49:34.950

```
you need to pass the bas_url to ajax file

<script type="text/javascript">

$(document).ready(function(e) {
    var baseurl = <?php echo base_url();?>

    $('#reg_link_rules').click(function(){

        $.ajax({
            url : baseurl+'index.php/register/hello',
            data : '',
            type: "POST",
           success : function(){

            }
        })
        return false;
    })

});

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T01:44:57.440

您好，您应该将基本 url 添加到 URL Ajax。

```
 $.ajax({
  type: "GET", 
  url: <?php echo base_url();?>"register/hello", 

  complete: function(data){
    $('#load_here').html(data);
}, 
```

请记住在控制器中启用帮助程序 URL！

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-03T12:16:33.510

你需要确保两件事

请将您的 ajax 部分作为 url: ?php echo base_url();?>"register/hello"，并输入："GET"，还需要检查它是否路由到 config/routes.php 上的 url。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-21T09:35:06.533

有时您确实需要将 index.php 添加到字符串中。像这样：

```
 $.ajax({
  type: "GET", 
  url: <?php echo base_url();?>"index.php/register/hello", 

  complete: function(data){
    $('#load_here').html(data);
}, 
```

但这一切都与您的配置文件有关。这是我的错误。希望能帮助到你。

# tridion - 调用 ISessionAwareCoreService.GetList() 时出现“意外的列表类型”异常

> ID：10398299
> 
> 赞同：5
> 
> 时间：2012-05-01T13:24:29.887
> 
> 标签：tridion

我正在通过随附的客户端程序集调用 Tridion 2011 SP1 核心服务。当我尝试列出出版物的内容时，我得到了一个例外。

代码（简化）如下所示：

```
ItemsFilterData filter = new Tridion.ContentManager.CoreService
                     .Client.RepositoryItemsFilterData.RepositoryItemsFilterData();
filter.ItemTypes = new ItemType[] { 
    ItemType.Folder, 
    ItemType.StructureGroup 
};
filter.Recursive = false;                        

IEnumerable<IdentifiableObjectData> childItems = core.GetList("tcm:0-15-1", filter); 
```

注意：变量“core”指的是我可以成功调用的 ISessionAwareCoreService，例如 core.GetSystemWideList()

调用 .GetList 时，出现以下异常：

```
System.ServiceModel.FaultException`1 was unhandled
  Message=Unexpected list type: 
     Tridion.ContentManager.Data.ContentManagement.RepositoryItemsFilterData. 
```

这个问题的可能原因是什么？你能提出一个很好的通用方法来解释这种信息吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T13:33:26.140

您无法获得`Publication`using的直接子代`GetList`。相反，您应该只加载`PublicationData`a`client.Read`然后访问`RootFolder`and `RootStructureGroup`。

```
PublicationData pub = (PublicationData)core.Read("tcm:0-1-1", new ReadOptions());
string rootFolder = pub.RootFolder.IdRef;
string rootSG = pub.RootStructureGroup.IdRef; 
```

或者，您可以自己调用`GetListXml`并`RepositoryItemsFilterData`从 XML 中提取项目。

```
XElement listResult = core.GetListXml(parent.ID, filter); 
```

# windows-phone-7 - 我不能让 windows phone 的上下文菜单出现在屏幕中间

> ID：10398301
> 
> 赞同：1
> 
> 时间：2012-05-01T13:24:47.617
> 
> 标签：windows-phone-7, contextmenu

我试图通过设置字段 IsOpen 显示上下文菜单，它显示但它的位置在屏幕顶部，我想将它设置为显示在中间，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:32:21.580

# f# - 检索 RavenDB 中的所有结果

> ID：10398302
> 
> 赞同：1
> 
> 时间：2012-05-01T13:24:51.457
> 
> 标签：f#, ravendb, iqueryable

我以为我可以使用统计功能强制通过多个页面检索所有结果并跳过

```
 type Linq.IRavenQueryable<'T>
    with member q.getAll() =  let mutable stat = Linq.RavenQueryStatistics()
                              let total = stat.TotalResults
                              let a = q.Statistics(&stat)
                              let rec addone n = seq { yield  q.Skip(n*1024).Take(1024).ToArray()
                                                       if n*1024 < total  then
                                                         yield! addone  (n + 1) }
                              addone 0 |> Array.concat 
```

当你这样做时它会起作用

```
 let q =  session.Query<productypfield>()
 let r = q.getAll() 
```

但与

```
 let q =  session.Query<productypfield>().Where(System.Func ....)
 let r = q.getAll() 
```

由于 Linq.IRavenQueryable 类型通过 Linq 组合不是幂等的：如果我使用 Linq，我会得到一个 IEnumerable，在该 IEnumerable 上没有定义 q.Statistics(&stat)。

我阅读了文档，但无论如何我都看不到通过 Linq 组合来保持类型。是循环固定（高）次数或设置高服务页面大小并采用（大量元素）的唯一方法吗？

**编辑**：实际上，即使上面的代码显然也不能正常工作，要获得有效计数，您需要运行一次查询。必须调用 Take(0) 来触发它。

```
 use session = store.OpenSession()
   let q =  session.Query<productypfield>()
   let mutable s = Linq.RavenQueryStatistics()
   let a = q.Statistics(&s)  
   s.TotalResults = 0 //true
   printfn "%A" a      //triggers evaluation
   s.TotalResults = 0 //false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:54:04.443

您可以将您的第二个代码示例更改为此（我不熟悉 F#）：

```
let q =  session.Query<productypfield>().Where(Expression<System.Func<....>>)
let r = q.getAll() 
```

那应该让您保留所需的 IQueryable

# c++ - intptr_t 是 uintptr_t 的签名对应物吗（反之亦然）？

> ID：10398304
> 
> 赞同：10
> 
> 时间：2012-05-01T13:24:59.840
> 
> 标签：c++, c++11, metaprogramming

我正在为 add_signed MPL 类开发一些测试，该类将类型转换为其签名对应项。定义如下：

```
template<class T>
struct add_signed { 
    typedef T type;
};

template<>
struct add_signed<std::uint8_t> { 
    typedef std::int8_t type;
};

template<>
struct add_signed<std::uint16_t> { 
    typedef std::int16_t type;
};

template<>
struct add_signed<std::uint32_t> { 
    typedef std::int32_t type;
};

template<>
struct add_signed<std::uint64_t> { 
    typedef std::int64_t type;
}; 
```

在对不同类型进行测试时，我注意到以下评估结果为真：

```
std::is_same<add_signed<uintptr_t>::type, intptr_t>::value  // true 
```

同样对于 add_unsigned MPL 类，以下代码的计算结果为 true：

```
std::is_same<add_unsigned<intptr_t>::type, uintptr_t>::value  // true 
```

我的编译器是 MSVC 2010。

所以问题是 - 我们可以假设在所有（理智的）编译器中签署 intptr_t 将产生 uintptr_t 反之亦然？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-01T13:47:10.023

类型`intptr_t`和`uintptr_t`在 ISO/IEC 9899:1999 (C99) 中是可选的，但其中一个被实施，另一个也是如此。所有有符号类型都有一个相同大小的无符号对应物，反之亦然。

> ### §7.18.1 整数类型
> 
> 当 typedef 名称仅在首字母不存在或存在时有所不`u`同时，它们应表示相应的有符号和无符号类型，如 6.2.5 中所述；提供这些对应类型之一的实现也应提供另一个。
> 
> ...
> 
> ### §7.18.1.4 能够保存对象指针的整数类型
> 
> 以下类型指定了一个有符号整数类型，其属性是任何指向 void 的有效指针都可以转换为此类型，然后转换回指向 void 的指针，结果将与原始指针进行比较：
> 
> ```
> intptr_t 
> ```
> 
> 以下类型指定了一个无符号整数类型，其属性是任何指向 void 的有效指针都可以转换为此类型，然后转换回指向 void 的指针，结果将与原始指针进行比较：
> 
> ```
>  uintptr_t 
> ```
> 
> 这些类型是可选的。

请注意，在 C 标准的含义内，函数不是对象；C标准不保证`uintptr_t`可以保存函数指针。

幸运的是，[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_12)采取了救援措施：它确实要求对象指针和函数指针的大小相同。

> ### 2.12.3 指针类型
> 
> 所有函数指针类型都应与指向的类型指针具有相同的表示`void`。函数指针的转换`void *`不应改变表示。可以使用显式强制转换将这种转换产生的`void *`值转换回原始函数指针类型，而不会丢失信息。
> 
> 笔记：
> 
> ISO C 标准不要求这样做，但它是 POSIX 一致性所必需的。

# asp.net - asp.net/asp.net mvc 中搜索引擎的设计技巧，有点类似于 sharepoint 视图

> ID：10398306
> 
> 赞同：0
> 
> 时间：2012-05-01T13:25:24.610
> 
> 标签：asp.net, asp.net-mvc

伙计们，我正在寻找一些很棒的技巧来开发一个页面，该页面允许用户从数据库中搜索东西，视图仅限于某些列，数据按某些列分组和排序..

在这种情况下，源很容易找出哪个是检索搜索结果的类... kapish ..

这种情况下的视图让我做噩梦，因为我不想编写许多 asp 人似乎习惯的那段令人作呕的代码……覆盖创建的行和 gridview 的数据绑定等……我在想只需在数据表级别应用必要的预处理（在从分页结果中检索到的内存对象上的 group by、sortby 等）呈现 html 表本身

我需要知道到目前为止我的思维过程是否正确，或者在 asp.net/asp.net mvc 等中是否有更清洁的方法来完成整个事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:07:58.273

恭喜你不想写“令人作呕的代码”......我花了几年时间这样做，而创建/绑定/等的整个覆盖行是一场噩梦。

你的来源是一门课——太好了。我的首选方法是沿着 jQuery 路线走，使用 jqGrid 并编写一个使用您的自定义类的 MVC 控制器。或者您可以动态生成自己的 HTML 表格，但如果您有大量数据，我会节省自己的时间并改为探索 jqGrid。它不一定是 MVC——你可以将它嵌入到标准的 asp.net 网站中，只是如果你必须扩展你的应用程序来做更多的事情，MVC 方法会让生活更轻松。

# jquery - 实现 .closest 和 .prev 的方法存在吗？

> ID：10398307
> 
> 赞同：0
> 
> 时间：2012-05-01T13:25:27.243
> 
> 标签：jquery, dom

**html:**

```
<div class="ancestor">
  <div class="sibling"><input class="findMe" /></div>
  <button>find findMe</button>
</div> 
```

**或（输入是直接兄弟）**

```
<input class="findMe" />
<button>find findMe</button> 
```

如果单击按钮，有没有办法找到 .findMe？基本上，将检查祖先、以前的兄弟姐妹（第二个片段）和兄弟姐妹中的孩子（第一个片段）。

**JS：**

```
$("button").click(function(){
  var btn = $(this);
  // what I'm after...
  var input = btn.findSomethingThatExistsAnywhereAboveMe(".findMe") 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:28:58.033

不是您提供的代码。

脚本应该如何知道您的意思是特定`.findMe`元素，您可以在同一个文档中包含任意数量的这些元素。

但是，如果您在此标记周围有一个父元素，那么您可以找到特定`.findMe`的 .

```
<div class="parentElement">
  <div class="ancestor">
    <input class="findMe" />
  </div>
  <button>find findMe</button>
</div> 
```

**或者**

```
<div class="parentElement">
  <input class="findMe" />
  <button>find findMe</button>
</div> 
```

然后你可以这样做：

```
$("button").click(function(){
  var btn = $(this);
  var input = btn.parents(".parentElement").find(".findMe");
}); 
```

# javascript - 切换列表，单击项目显示所有子项目，而不仅仅是项目中的子项目

> ID：10398308
> 
> 赞同：3
> 
> 时间：2012-05-01T13:25:34.660
> 
> 标签：javascript, jquery

抱歉标题含糊，但我找不到合适的标题，很好地解释了问题。

问题：我写了一个切换列表的代码。它按我想要的方式工作。当我单击“headcategory”时，它会打开子类别等。当我第一次单击 headcategory 时会出现问题，它会打开每个列表，这不是我想要的。当我关闭并再次打开它时，它会以应有的方式工作。我试图弄清楚为什么会这样，但我不知道。因此，如果有人可以帮助我，他/她将不胜感激。

jQuery 代码。

```
$(document).ready(function()
{
$('ul.subcat').hide();

$('li').click(function(event)
{ 
    event.stopPropagation();
    $('ul', this).toggle(); 

});
}); 
```

HTML 代码

```
<ul class="headcat">
  <li>item 1
  <ul class="subcat">
    <li>subitem 1
    <ul class="subcat">
      <li>subsubitem 1
      <ul class="subcat">
        <li><p>text</p></li>
      </ul>
      </li>
      <li>subsubitem 2
      <ul class="subcat">
        <li><p>text</p></li>
        <li>subsubsubitem 1
        <ul class="subcat">
          <li><p>text</p></li>
        </ul>
        </li>
        <li>subsubsubitem 2</li>
      </ul>
      </li>
    </ul>
    </li>
    <li>item 2</li>
  </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:28:10.577

您只需要选择当前单击的直接后代`li`，试试这个：

```
$(this).children("ul").toggle(); 
```

以下方法也可以使用，但是使用`>`没有主元素的后代选择器不是最佳实践。

```
$('> ul', this).toggle(); 
```

[**示例小提琴**](http://jsfiddle.net/EtaZ9/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:29:54.657

或尝试`subcat`仅在初始化时隐藏第一个：

```
$('ul.subcat:first').hide(); 
```

演示在这里：http: [//jsfiddle.net/kv4dT/](http://jsfiddle.net/kv4dT/)

# iphone - 应用程序关闭时如何通过推送更改应用程序徽章

> ID：10398309
> 
> 赞同：1
> 
> 时间：2012-05-01T13:25:58.030
> 
> 标签：iphone, xcode, push-notification, push, badge

我正在尝试更改我正在开发的应用程序的徽章。关闭时，不幸的是，我只收到一条消息而没有更改徽章。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

[application registerForRemoteNotificationTypes:UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeBadge];

NSDictionary* userInfo = [launchOptions valueForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"];
NSDictionary *apsInfo = [userInfo objectForKey:@"aps"];

NSInteger badge = [[apsInfo objectForKey:@"badge"] integerValue];
if( [apsInfo objectForKey:@"alert"] != NULL)
{
    application.applicationIconBadgeNumber = badge;
} 
```

但这并没有改变任何事情。我还没有找到任何解决方案。推送通知到达时调用什么方法并关闭应用程序？我还补充说：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

#if !TARGET_IPHONE_SIMULATOR

NSLog(@"remote notification: %@",[userInfo description]);
NSDictionary *apsInfo = [userInfo objectForKey:@"aps"];

NSString *alert = [apsInfo objectForKey:@"alert"];
NSLog(@"Received Push Alert: %@", alert);

NSString *badge = [apsInfo objectForKey:@"badge"];
NSLog(@"Received Push Badge: %@", badge);
application.applicationIconBadgeNumber = [[apsInfo objectForKey:@"badge"] integerValue];

#endif
} 
```

但没什么...

你能帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T12:14:41.620

徽章图标编号由作为推送消息接收的有效负载中的徽章属性控制。在应用程序激活之前，应用程序本身对显示的数字没有任何作用。将 'badge' 属性设置为任何整数值（注意：它不应该是字符串，也不应该包含在“”中）可以满足需要。收到通知的操作系统会查找“徽章”的值，并立即将其设置在应用徽章图标上。当应用程序不活动时，这一切都会发生。为确保它根据应用程序中发生的情况增加或减少，应用程序应使用更新的徽章编号向服务器发送消息。

在活动状态下，应用程序负责处理远程通知并更改徽章图标。

**注意**：“badge”属性包含在有效负载中收到的“aps”字典中。我的有效负载看起来像：aps = { alert = "Push notification!"; 徽章 = 9; 声音=默认；}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:09:09.930

您应该更好地定义您想要做什么，因为我不清楚您是在谈论远程通知还是本地通知，或者您究竟想要获得什么以及您正在获得什么。

无论如何，关于远程通知 (APNS)，如果您希望在应用程序关闭的情况下设置徽章，则应将徽章设置为有效负载的一部分。除非用户手动打开应用程序（从 NotificationCenter 或扩展坞），否则您的应用程序不会被调用。

另一方面，当您运行应用程序时，您将收到调用

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo { 
```

在您的 AppDelegate 中，然后您可以使用

```
application.applicationIconBadgeNumber = badge; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:45:41.030

看看这个，可能是设置问题！： [ios5中的应用程序图标徽章编号](https://stackoverflow.com/questions/7835367/application-icon-badge-number-in-ios5)

也尝试给 applicationIconBadgeNumber 一个 int 值，而不是 NSInteger。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T13:33:39.083

好的。现在我报告奇怪的事情。我知道了！现在效果很好。

问题是：我使用推送通知创建了我的应用程序，使用简单整数 (1,8,99) 一切正常，但后来我注意到PHP 变量*$price中的整数***35.06**根本无法识别它，即使*(int)$price*不成功. 我认为这个数字太长了（但实际上 4 位数字很受欢迎）。我决定使用

 **```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

但正如它所提到的，当应用程序没有启动时它根本不起作用。没有机会。它永远不会更新徽章。我花了很多时间思考可能出了什么问题，突然想到了什么。

在有效载荷中，我只是这样做了

```
'badge' => $price*100 
```

当然它对我有用 =) 我不知道问题出在哪里，为什么不起作用**(int)$price**（它实际上是整数）但现在可以了。我的徽章现在显示类似于**3.506**的内容，当然您可以将点移到步上，您就有了**35.06**

希望它可以帮助你。**

# excel - Excel VBA - 未定义子或函数错误

> ID：10398310
> 
> 赞同：1
> 
> 时间：2012-05-01T13:26:04.113
> 
> 标签：excel, vba

我在这种方法上遇到编译错误，我不知道为什么。我收到“子或函数未定义”错误。它可能很愚蠢，但仍然逃避了我。提前致谢。

```
Public Function GetReportDate(dept As String) As String

    Dim dateOut As String   'this will be the returned value from the method
    Dim dateIn As String    'this is the date retrieved from the report

    Dim MonthNum As String
    Dim Temp As String      'this variable stores that date that will be manipulated
    Dim StartEnd(1 To 4, 1 To 4) As String
    Dim Period As String
    Dim Year As Integer

    'select the date string
    Select Case dept
    Case "Min and AMF": Cells(2, 2).Select
    Case Else: Cells(2, 1).Select
    End Select

    Selection.Font.Bold = True

    'store the month, day and year string to the array
    dateIn = ActiveCell.Value
    Temp = dateIn
    StartEnd(1, 1) = Mid(Temp, 1, 2)    '1st month
    StartEnd(1, 2) = Mid(Temp, 14, 2)   '2nd month
    StartEnd(2, 1) = Mid(Temp, 4, 2)    '1st day
    StartEnd(2, 2) = Mid(Temp, 17, 2)   '2nd day
    StartEnd(3, 1) = Mid(Temp, 7, 4)    '1st year

    'assign to two var
    MonthNum = StartEnd(1, 2)
    Year = StartEnd(3, 1)

    ' change the month format for the 1st month
    Select Case StartEnd(1, 1)
        Case "01": StartEnd(1, 1) = "Jan"
        Case "02": StartEnd(1, 1) = "Feb"
        Case "03": StartEnd(1, 1) = "Mar"
        Case "04": StartEnd(1, 1) = "Apr"
        Case "05": StartEnd(1, 1) = "May"
        Case "06": StartEnd(1, 1) = "Jun"
        Case "07": StartEnd(1, 1) = "Jul"
        Case "08": StartEnd(1, 1) = "Aug"
        Case "09": StartEnd(1, 1) = "Sep"
        Case "10": StartEnd(1, 1) = "Oct"
        Case "11": StartEnd(1, 1) = "Nov"
        Case "12": StartEnd(1, 1) = "Dec"
    End Select

    ' change the month format for the 2nd month
    Select Case StartEnd(1, 2)
        Case "01": StartEnd(1, 2) = "Jan"
        Case "02": StartEnd(1, 2) = "Feb"
        Case "03": StartEnd(1, 2) = "Mar"
        Case "04": StartEnd(1, 2) = "Apr"
        Case "05": StartEnd(1, 2) = "May"
        Case "06": StartEnd(1, 2) = "Jun"
        Case "07": StartEnd(1, 2) = "Jul"
        Case "08": StartEnd(1, 2) = "Aug"
        Case "09": StartEnd(1, 2) = "Sep"
        Case "10": StartEnd(1, 2) = "Oct"
        Case "11": StartEnd(1, 2) = "Nov"
        Case "12": StartEnd(1, 2) = "Dec"
    End Select

    'Change the Date Format After the Min Qem has been executed
    'If dept = "Min and AMF" Then

        ' the 1st and 2nd month are equal
        If StartEnd(1, 1) = StartEnd(1, 2) Then
            ' find the type of report
            If StartEnd(2, 2) - StartEnd(2, 1) <= 7 Then
                Period = "Week"
            Else
                 Period = "Month"
            End If

            ' change the report period to the right format
            ActiveCell = Period & " of " & StartEnd(1, 1) & " " & StartEnd(2, 1) & " " _
                    & "to" & " " & StartEnd(2, 2) & " " & Year
        Else     ' the 1st and 2nd month are NOT equal
            If 30 - StartEnd(2, 1) + StartEnd(2, 2) >= 20 Then
                Period = "Month"
            Else
                Period = "Week"
            End If

    'change the header of the report to represt the period
                ActiveCell = Period & " of " & StartEnd(1, 1) & " " & StartEnd(2, 1) _
                        & " " & "to" & " " & StartEnd(1, 2) & " " & StartEnd(2, 2) _
                        & " " & Year
            End If

        'return the dateout
        dateOut = Temp
        GetReportDate = dateOut
    End Function 
```

当我调用该方法时，这就是我正在使用的方法。

```
CurReport = GetReportName(sDept) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:29:15.810

您正在调用的内容与您定义的函数不匹配。`Date`并且`Name`不一样。

```
Public Function GetReportDate(dept As String) As String
        GetReportDate = dateOut
    End Function 
```

不会被调用

```
CurReport = GetReportName(sDept) 
```

# nhibernate - 流畅的 NHibernate 没有自动映射 SQL 异常，关键字“用户”附近的语法不正确

> ID：10398314
> 
> 赞同：3
> 
> 时间：2012-05-01T13:26:22.493
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

刚从 NHibernate 开始，在我看来一切似乎都是正确的，但显然不是。当我进行如下所示的单元测试时，我收到回信，关键字“User”附近存在语法错误，这是我的用户类：

```
namespace Users
    {
        public class User
        {
            public virtual string firstName { get; set; }
            public virtual string lastName { get; set; }
            public virtual int Id { get; set; }
        }
    } 
```

和用户映射（也在列名周围没有方括号，结果相同：

```
namespace Users
{
    class UserMap: ClassMap<User>
    {
        UserMap()
        {
            Table("User");
            Id(x => x.Id).GeneratedBy.Native().Column("[Id]").Not.Nullable();
            Map(x => x.firstName).Not.Nullable().Column("[firstName]");
            Map(x => x.lastName).Not.Nullable().Column("[lastName]");
        }
    }
} 
```

名为 Framework.cs 的配置文件

```
namespace Users
{
    public class Framework
    {
        private const string ConnectionStr = "Data Source=ERALCH-ESTEPHEN;Initial     
                                Catalog=NHDev;Integrated Security=True;Pooling=False";
        public static ISessionFactory CreateFactory()
        {
            return Fluently.Configure()
                .Database(FluentNHibernate.Cfg.Db.MsSqlConfiguration
                .MsSql2008
                .ConnectionString(ConnectionStr))
                .Mappings(x=>x.FluentMappings.AddFromAssemblyOf<User>())
                .BuildSessionFactory();
        }
    }
} 
```

数据访问层——简单地通过 Id 检索用户

```
namespace Users
{
    public class Accesslayer
    {
        public static IList<User> GetUserById(int Id)
        {
            ISessionFactory provider = Framework.CreateFactory();
            using (ISession session = provider.OpenSession())
            {
                return session.CreateSQLQuery(String
                    .Format("SELECT * FROM User WHERE Id={0}", Id)).List<User>();
            }

        }
    }
} 
```

最后是单元测试层

```
namespace Users
{
    [TestFixture]
    class AccessLayerTest
    {
        [Test]
        public void CanGetUserById()
        {
            Assert.AreEqual(1, Accesslayer.GetUserById(1).Count());
        }
    }
} 
```

数据库是 MSsql，其中包含一个表“用户”，其列与用户属性匹配。任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-03T14:46:31.423

You should be able to do this in your configuration:

```
var factory = Fluently.Configure()
    // ...
    .ExposeConfiguration(c => SchemaMetadataUpdater.QuoteTableAndColumns(c))
    .BuildSessionFactory(); 
```

Which should escape your table and column names for you automagically.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:03:47.970

映射时您应该需要 [Brackets]。哎呀，如果它们具有相同的名称，则它们的工作方式相同：

```
public class UserMap: ClassMap<User>
{
    UserMap()
    {
        Table("User");
        Id(x => x.Id).GeneratedBy.Native().Not.Nullable();
        Map(x => x.firstName).Not.Nullable();
        Map(x => x.lastName).Not.Nullable();
    }
}

public class UserMap: ClassMap<User>
{
    UserMap()
    {
        Table("User");
        Id(x => x.Id, "Id").GeneratedBy.Native().Not.Nullable();
        Map(x => x.firstName, "firstName").Not.Nullable();
        Map(x => x.lastName, "lastName").Not.Nullable();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:31:10.593

避免使用[保留关键字](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)命名您的表或列。Hibernate 形成了一个不会被 MS SQL 接受的 SQL 语句。与 NHibernate + Fluent + Automapper 有同样的问题，并通过将“用户”列重命名为“用户名”来解决它。不知道其他数据库如何处理它。

更多关于[这里](https://stackoverflow.com/questions/695578/creating-table-names-that-are-reserved-words-keywords-in-ms-sql-server)的评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:53:09.597

您是否尝试在 User 表名周围加上反引号？

```
namespace Users
{
    class UserMap: ClassMap<User>
    {
        UserMap()
        {
            Table("`User`");
            Id(x => x.Id).GeneratedBy.Native().Column("`Id`").Not.Nullable();
            Map(x => x.firstName).Not.Nullable().Column("`firstName`");
            Map(x => x.lastName).Not.Nullable().Column("`lastName`");
        }
    }
} 
```

有关更多详细信息，请参阅此答案：[NHibernate - Force escaping on Table Names](https://stackoverflow.com/questions/679279/nhibernate-force-esacping-on-table-names)

此外，您应该使用 NHibernate 查询工具而不是 SQL ：

```
namespace Users
{
    public class Accesslayer
    {
        public static IList<User> GetUserById(int Id)
        {
            ISessionFactory provider = Framework.CreateFactory();
            using (ISession session = provider.OpenSession())
            {
                return session.Query<User>().Where(x => x.Id == Id ).List<User>();
            }
        }
    }
} 
```

看看这个教程：[http ://www.d80.co.uk/post/2011/02/20/Linq-to-NHibernate-Tutorial.aspx](http://www.d80.co.uk/post/2011/02/20/Linq-to-NHibernate-Tutorial.aspx)

# javascript - 将 JavaScript 转换为 Python 字节码

> ID：10398315
> 
> 赞同：4
> 
> 时间：2012-05-01T13:26:24.190
> 
> 标签：javascript, python, google-app-engine

我正在尝试在纯 Python 环境（Google AppEngine）中执行简单的 JavaScript 代码。

我尝试过 PYJON，但它似乎还不够成熟，无法真正使用（它不处理例如前向引用函数或 do-while 并且它挂在数组使用上）。

一种想法是使用 pynarcissus 将 JavaScript 转换为语法树，然后将此树转换为 Python AST，后者可以编译成 Python 字节码。

以前有人做过吗？这个想法有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:12:09.780

[我使用ply](http://www.dabeaz.com/ply/)做了类似的事情，对于 VBScript 和我一直在研究的一种新语言，但是我没有构建 AST 然后转换为 Python AST，而是直接构建 Python AST，使用它节点类，偶尔子类化和覆盖一些不太适合的类。

由于您可以依靠 pynarcissus 为 Javascript 构建 AST，因此转换 AST 可能更容易，但我认为值得检查使用它的解析器构建 Python AST 是否不是更好的方法。

据我所知，这种方法没有固有的问题，只要语言可以在句法上简化为通用方言。这是一项艰苦的工作，但可以做到。我这样做是因为我没有可用的解析器，并且编写一个仅仅构建 AST 是没有意义的。对于 VBScript，我只处理录制的宏，因此代码非常稳定，主要是单行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T00:55:42.380

据我所知，Python 上没有完整且健壮的 Javascript 解释器实现。您最好的选择可能是使用 Java 中的 Rhino 解释器部署您的应用程序的替代版本，并将其作为 Web 服务与您的应用程序的主要版本一起调用。

# c++ - SFML 平铺矢量下标超出范围

> ID：10398320
> 
> 赞同：0
> 
> 时间：2012-05-01T13:26:33.357
> 
> 标签：c++, vector, sfml, tile

我是 SFML 的新手，我一直在玩我在网上找到的基本磁贴引擎。瓦片引擎中有一个摄像头不能很好地工作，所以我把它拿出来，打算以后用我自己的替换它。就在此之前，引擎将仅绘制屏幕上的图块，并且由于某种原因无法将其他图块添加到需要绘制的图块列表中。目前，我正在尝试绘制所有可能的图块，但在第一行之后收到矢量下标错误 - 1。

这是似乎导致错误的代码：

```
int levelHeight = currentLevel->getHeight();
int levelWidth = currentLevel->getWidth();

for(int tileY = 1; tileY < levelHeight; tileY++)
{
    for(int tileX = 1; tileY < levelWidth; tileX++)
    {
        tile = currentLevel->getTile(tileX, tileY);

        std::cout << "Adding Tile X: " << tileX << ", Y: " << tileY << " to buffer." << std::endl;

        if(tile)
            tile->draw((tileX * tileSize), (tileY * tileSize), display);
    }
} 
```

如果我提供任何其他有用的信息，请随时询问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:34:26.947

我认为内`for`循环终止条件不正确：

```
for(int tileX = 1; tileY < levelWidth; tileX++) 
```

应该：

```
for(int tileX = 1; tileX < levelWidth; tileX++)
                     //^ 
```

# c# - 创建一个搜索，您可以单击链接以从其唯一 ID 打开表单

> ID：10398328
> 
> 赞同：1
> 
> 时间：2012-05-01T13:27:11.010
> 
> 标签：c#, asp.net, search, uniqueidentifier

好的，所以我目前正在使用以下代码来实现我的搜索：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
     ConnectionString="<%$ ConnectionStrings:connectionstringexample %>" 
     SelectCommand="SELECT [ID], [SPECIALIST], [CUST_LNAME], [CUST_FNAME], [COMPANY_NAME], [EVENT_TYPE] FROM [tblcontacts] WHERE (([CUST_FNAME] = @CUST_FNAME) OR ([CUST_LNAME] = @CUST_LNAME) OR ([COMPANY_NAME] = @COMPANY_NAME) OR ([EVENT_TYPE] = @EVENT_TYPE))">
        <SelectParameters>
            <asp:ControlParameter ControlID="searchtext" Name="CUST_FNAME" 
                PropertyName="Text" Type="String" />
            <asp:ControlParameter ControlID="searchtext" Name="CUST_LNAME" 
                PropertyName="Text" Type="String" />
            <asp:ControlParameter ControlID="searchtext" Name="COMPANY_NAME" 
                PropertyName="Text" Type="String" />
            <asp:ControlParameter ControlID="searchtext" Name="EVENT_TYPE" 
                PropertyName="Text" Type="String" />
        </SelectParameters>
    </asp:SqlDataSource>

<asp:GridView ID="recordsgrid" runat="server" AllowSorting="True" 
        AutoGenerateColumns="False" DataSourceID="SqlDataSource1" 
    Width="916px" BackColor="White" BorderColor="#999999" BorderStyle="None" 
            BorderWidth="1px" CellPadding="3" GridLines="Vertical" 
        DataKeyNames="ID" >
        <AlternatingRowStyle BackColor="#DCDCDC" />
        <Columns>
            <asp:CommandField ShowSelectButton="True" />

            <asp:BoundField DataField="ID" HeaderText="ID" 
                SortExpression="ID" InsertVisible="False" ReadOnly="True" />
            <asp:BoundField DataField="SPECIALIST" HeaderText="Event Specialist" 
                SortExpression="SPECIALIST" />
            <asp:BoundField DataField="CUST_LNAME" HeaderText="Client's Last Name" 
                SortExpression="CUST_LNAME" />
            <asp:BoundField DataField="CUST_FNAME" HeaderText="Client's First Name" 
                SortExpression="CUST_FNAME" />
            <asp:BoundField DataField="COMPANY_NAME" HeaderText="Company Name" 
                SortExpression="COMPANY_NAME" />
            <asp:BoundField DataField="EVENT_TYPE" HeaderText="Event Type" 
                SortExpression="EVENT_TYPE" />

        </Columns>
        <FooterStyle BackColor="#CCCCCC" ForeColor="Black" />
        <HeaderStyle BackColor="#4b6c9e" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
        <RowStyle ForeColor="Black" BackColor="#EEEEEE" />
        <SelectedRowStyle BackColor="#008A8C" Font-Bold="True" ForeColor="White" />
        <SortedAscendingCellStyle BackColor="#F1F1F1" />
        <SortedAscendingHeaderStyle BackColor="#0000A9" />
        <SortedDescendingCellStyle BackColor="#CAC9C9" />
        <SortedDescendingHeaderStyle BackColor="#000065" />
    </asp:GridView> 
```

我想要的是能够单击 ID 列中的 ID 并打开一个新页面，该页面自动填充与该唯一 ID 相关的表单数据。我正在使用 asp.net 和 C#。任何帮助将不胜感激。

***编辑：***

```
<asp:HyperLinkField DataTextField="ID" DataNavigateUrlFormatString="Searchresults.aspx?@ID={0}" Text="ID" DataNavigateUrlFields="ID" HeaderText="ID" 
                SortExpression="ID" InsertVisible="False"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:32:43.440

创建一个超链接列，该列链接到传递包含该行 ID 的查询参数的页面。超链接列允许您指定 url 格式字符串，然后在该字符串中使用来自数据源的数据。一旦您使用正确的 ID 在另一个页面上，我相信您可以使用正确的数据填充该表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:40:30.667

您可以将 ID 列设为 itemtemplate：

```
 <asp:TemplateField>
      <ItemTemplate>
      <asp:LinkButton ID="lb1" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "id") %>' CommandName="detail" commandArgument="<%$ Eval("id")%> />
</ItemTemplate>
</asp:TemplateField> 
```

然后在 gridview 的点击事件中，您可以访问已点击的 ID，并且可以将该 ID 传递给您必须加载相关数据的任何方法。

```
protected void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
 {
    if (e.CommandName ="detail")
     {
  int index = Convert.ToInt32(e.CommandArgument);
  List<Something> test = SomeMethod(index);
    }
 } 
```

编辑：正如一些人已经建议的那样，您也可以使用带有导航的超链接。

# vb.net - 从解决方案资源管理器打开 HTML 文档

> ID：10398330
> 
> 赞同：0
> 
> 时间：2012-05-01T13:27:15.710
> 
> 标签：vb.net

我正在尝试运行已导入解决方案资源管理器的 HTML 文件。我不知道如何在代码中引用解决方案资源管理器中的文档。我怎样才能做到这一点？

我目前正在使用此代码，但它不起作用：

```
process.start(".\help.html") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:38:56.483

您需要设置要复制到输出目录的 HTML 文件。在解决方案资源管理器中右键单击您的文件：

![文件上下文菜单](../Images/c53f8969dfc191c0ad599b72afdc9163.png)

将“复制到输出目录”属性设置为“如果较新则复制”：

![更改属性](../Images/d6c71db402fcfd8159bc83578cd70301.png)

最后，像往常一样运行文件：

```
Process.Start("help.html") 
```

# iphone - 使用 RestKit 在 post 请求中寻求帮助

> ID：10398332
> 
> 赞同：0
> 
> 时间：2012-05-01T13:27:23.447
> 
> 标签：iphone, objective-c, ios, ipad, restkit

我必须在 iOS 中访问 Rest api，为此我正在使用 RestKit。服务器只接受 POST 请求并以 JSON 格式发送响应。只需帮助我使用 RestKit 调用登录 api。网址是这样的：

[http://mobile.domian.co/apiversion/user/login](http://mobile.domian.co/apiversion/user/login)

和 Post 参数是：

app_key(string),signature(string),timestamp(dateTime),user_id(string),password(string)。

可用的响应表示

```
{
"status": "0",
"result": {
    "error_code": "1",
    "error_msg": "Login failed. Wrong username or password"
} 
```

> {“状态”：“1”，“结果”：{“数据”：{“头像”：“”，“电子邮件”：“sd.p@clozette.co”，“用户名”：“sd”，“通讯“：”1，“bio_data”：“关于我自己”，“mth_dob”：“1”，“yr_dob”：“1981”，“hometown”：“”，“dob_priv”：“1”，“hometown_priv”： “1”，“bio_data_priv”：“1”，“block_comment_notification”：“0”，“block_liked_notification”：“0”，}

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:05:21.840

这是答案（您应该将日期时间转换为字符串）：-

```
 NSString *post =[NSString stringWithFormat:@"app_key=%@&signature=%@&timestamp=%@&user_id=%@&password=%@",appKEY,Signature,Datetime,UID,Password];

    NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:@"Your URL"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *returnData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    if (error)
{
    NSLog(@"Error is %@",[error localizedDescription]);
}

    returnString=[[NSString alloc]initWithData:returnData encoding:NSUTF8StringEncoding];
    if(!returnString)
    {
        UIAlertView *erroralert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"There is an error getting response" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [erroralert show];
        [erroralert release];
    }
    else 
    {
        NSLog(@"%@",returnString);
    }
    SBJSON *json = [[SBJSON new] autorelease];
    NSMutableDictionary *dic = [[NSMutableDictionary alloc] initWithDictionary:[json objectWithString:returnString error:nil]]; 
```

# php - RHEL 6 上的 PHP file_get_contents() 问题

> ID：10398339
> 
> 赞同：1
> 
> 时间：2012-05-01T13:28:07.920
> 
> 标签：php, linux, apache, proxy, file-get-contents

好的，我有两个 Linux 机器在代理服务器后面运行。两个框都设置为通过连接端口 801 来绕过过滤。

方框 A - Fedora Core 12 / PHP 5.3.1

方框 B - RHEL 6 / PHP 5.3.3

在 Box AI 上，可以使用 file_get_contents() 连接到外部站点。

```
<?php
$opts = array(
              'http' => array(
                              'proxy' => 'tcp://10.136.132.1:801',
                              'request_fulluri' => true
                             )
             );

$cxContext = stream_context_set_default($opts);
echo file_get_contents("http://www.google.com"); 
```

这会导致显示 Google 的主页。

在 Box BI 上运行相同的代码，但出现此错误：

```
Warning: file_get_contents(http://www.google.com): failed to open stream: Permission denied 
```

两个盒子都在同一个网络上，在同一个代理服务器后面。我在 Apache 或 PHP 中是否缺少允许 file_get_contents 在 Box B 上工作的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:07:55.343

听起来您启用了 SELinux，默认情况下它会阻止 Apache 的任何传出连接。尝试在你的 shell 中以 root 身份运行它：

```
setsebool -P httpd_can_network_connect on 
```

更多关于 SELinux 布尔值的信息可以在这里找到： [http ://wiki.centos.org/TipsAndTricks/SelinuxBooleans](http://wiki.centos.org/TipsAndTricks/SelinuxBooleans)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:48:41.697

这可能是因为 google 阻止了似乎来自 Bot 或 Script 的请求。可能是因为 Box A 在向 google 请求时设置了额外的标头。

尝试在 Box b 上打开其他网站

# android - Anymote 协议能否从 Google TV 设备获取当前频道？

> ID：10398344
> 
> 赞同：1
> 
> 时间：2012-05-01T13:28:28.420
> 
> 标签：android, google-tv

鉴于 Google TV 将被集成到某些集合中，我假设当前频道存储在 GTV 操作系统可以检索的某个位置。如果是这种情况，我想知道 Anymote 协议是否可以在身份验证时发出请求，以便它可以从电视机获取电视调谐到的当前频道。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:56:39.583

没有可靠的方法来获取当前频道。如果可以的话，它会对隐私产生影响。

# silverlight - 是否可以在 silverlight 中向客户发送未请求的信息或命令？

> ID：10398350
> 
> 赞同：0
> 
> 时间：2012-05-01T13:28:41.943
> 
> 标签：silverlight

在 Silverlight 应用程序中，我们曾经将请求从客户端发送到服务器并接收其响应。是否可以将信息从服务器发送到不等待的客户端？例如，服务器要求客户端更新特殊文本框中的文本等。“一个信息或已知命令可能随时到达客户，而不是对客户请求的响应”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:32:14.983

您可以为此使用[双工服务](http://msdn.microsoft.com/en-us/library/ms731064.aspx)。

# gcc - 使用 arm-linux-gcc 编译 STLPort 时出现未知错误

> ID：10398351
> 
> 赞同：0
> 
> 时间：2012-05-01T13:28:43.190
> 
> 标签：gcc, compiler-errors, stlport

我试图用 uclinux 的交叉编译器工具链编译 STLPort。 **根据 STLPort 库根文件夹中的 INSTALL，如果要添加新的工具链，则必须找到最近的工具链并针对您的编译器进行修改。** 我选择 gcc.mak 并将 gcc 更改为 arm-linux-gcc 并将 c++ 更改为 arm-linux-c++。编译时出现此错误：

```
.../../src/num_get_float.cpp:44:6: #error Unknown endianness.
../../src/num_get_float.cpp: In function `double stlpmtx_std::_Stl_atod(char*, 
   int, int)':
../../src/num_get_float.cpp:728: error: 'struct _ll::<anonymous>' has no member 
   named 'hi'
../../src/num_get_float.cpp:729: error: 'struct _ll::<anonymous>' has no member 
   named 'lo'
../../src/num_get_float.cpp:736: error: 'struct _ll::<anonymous>' has no member 
   named 'hi'
../../src/num_get_float.cpp:737: error: 'struct _ll::<anonymous>' has no member 
   named 'lo' 
```

这是什么错误？如何在 arm-linux-gcc 上为 STLPort 制作适当的 Makefile？

**编辑**：错误已由第一个答案修复，但我有另一个错误：当我尝试编译代码时，makefile 让我得到这句话：
*** 注意！***
此 makefile 尝试使用可能不适用于所有 glibc 风格的系统语言环境。如果构建失败，请求助于 gcc.mak，它将为 STLport 构建仅限 C 语言环境的版本，最后我得到了 c_local.c 的以下错误：

```
In file included from c_locale.c:32:
arm-linux-gcc -I../stlport -W -Wno-sign-compare -Wno-unused -Wno-uninitialized -D_STLP_USE_GLIBC -D_STLP_REAL_LOCALE_IMPLEMENTED -O2 -fpic c_locale.c -c -o ../lib/obj/GCC/ReleaseD/c_locale.o
c_locale_glibc/c_locale_glibc.c: In function `_Find_locale':
c_locale_glibc/c_locale_glibc.c:118: warning: return makes pointer from integer without a cast
c_locale_glibc/c_locale_glibc.c: In function `_Locale_decimal_point':
c_locale_glibc/c_locale_glibc.c:242: error: `DECIMAL_POINT' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c:242: error: (Each undeclared identifier is reported only once
c_locale_glibc/c_locale_glibc.c:242: error: for each function it appears in.)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_thousands_sep':
c_locale_glibc/c_locale_glibc.c:246: error: `THOUSANDS_SEP' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_grouping':
c_locale_glibc/c_locale_glibc.c:250: error: `GROUPING' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_int_curr_symbol':
c_locale_glibc/c_locale_glibc.c:289: error: `INT_CURR_SYMBOL' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_currency_symbol':
c_locale_glibc/c_locale_glibc.c:292: error: `CURRENCY_SYMBOL' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_mon_decimal_point':
c_locale_glibc/c_locale_glibc.c:295: error: `MON_DECIMAL_POINT' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_mon_thousands_sep':
c_locale_glibc/c_locale_glibc.c:298: error: `MON_THOUSANDS_SEP' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_mon_grouping':
c_locale_glibc/c_locale_glibc.c:301: error: `MON_GROUPING' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_positive_sign':
c_locale_glibc/c_locale_glibc.c:304: error: `POSITIVE_SIGN' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_negative_sign':
c_locale_glibc/c_locale_glibc.c:307: error: `NEGATIVE_SIGN' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_int_frac_digits':
c_locale_glibc/c_locale_glibc.c:310: error: `INT_FRAC_DIGITS' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_frac_digits':
c_locale_glibc/c_locale_glibc.c:313: error: `FRAC_DIGITS' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_p_cs_precedes':
c_locale_glibc/c_locale_glibc.c:316: error: `P_CS_PRECEDES' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_p_sep_by_space':
c_locale_glibc/c_locale_glibc.c:319: error: `P_SEP_BY_SPACE' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_p_sign_posn':
c_locale_glibc/c_locale_glibc.c:322: error: `P_SIGN_POSN' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_n_cs_precedes':
c_locale_glibc/c_locale_glibc.c:325: error: `N_CS_PRECEDES' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_n_sep_by_space':
c_locale_glibc/c_locale_glibc.c:328: error: `N_SEP_BY_SPACE' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_n_sign_posn':
c_locale_glibc/c_locale_glibc.c:331: error: `N_SIGN_POSN' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `_Locale_ctype_create':
c_locale_glibc/c_locale_glibc.c:485: error: `_NL_CTYPE_TOLOWER_EL' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c:487: error: `_NL_CTYPE_TOUPPER_EL' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c: In function `cname_lookup':
c_locale_glibc/c_locale_glibc.c:526: error: `_NL_CTYPE_NAMES_EL' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c:531: error: `_NL_CTYPE_HASH_SIZE' undeclared (first use in this function)
c_locale_glibc/c_locale_glibc.c:532: error: `_NL_CTYPE_HASH_LAYERS' undeclared (first use in this function)
make: *** [../lib/obj/GCC/ReleaseD/c_locale.o] Error 1 
```

我认为这个错误与makefile的注意有关。我可以解决什么问题？什么是**gcc.mak**参加的度假胜地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:15:20.893

检查要在其上运行 uclinux 的 ARM 处理器的字节顺序。然后你可以尝试运行`gcc -D_STLP_BIG_ENDIAN ...`或`gcc -D_STLP_LITTLE_ENDIAN ...`在你的 Makefile 中克服这个错误。

# paypal - 打开购物车，订单未显示在仪表板中。使用贝宝

> ID：10398356
> 
> 赞同：2
> 
> 时间：2012-05-01T13:29:00.647
> 
> 标签：paypal, opencart

嗨，我在打开的购物车上使用贝宝。

完全遵循安装指南。但订单没有显示在仪表板上。

我必须去销售>订单>按隐藏排序，它们显示为已取消。

然后我手动将它们更改为挂起/完成，然后它将显示在仪表板上

我也检查了IPN

我所有的排序顺序都正确命名。

我还能错过什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:08:18.817

如果您是

*   使用 .htaccess/.htpasswd 方法保护您的网站的密码
*   本地测试

基本上，贝宝需要访问您的服务器才能发送 IPN。如果您正在执行上述任何一项，那么它不能。如果上述两个都不适用，那么这有时可能是由于贝宝沙箱速度慢（如果您使用的是它而不是实时 PP）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:06:42.487

我遇到了类似的问题，它帮助了我：

[http://forum.opencart.com/viewtopic.php?t=41841](http://forum.opencart.com/viewtopic.php?t=41841)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T02:10:53.967

我已经有一段时间了同样的错误。我重新上传了以下文件，它对我有用。

听起来您的文件需要更新

```
CODE: SELECT ALL
catalog/controller/account/login.php 
```

我也会上传一个新鲜的

```
CODE: SELECT ALL
catalog/model/account/customer.php 
```

# xml - 访问具有整数名称的 XML 节点

> ID：10398358
> 
> 赞同：0
> 
> 时间：2012-05-01T13:29:03.940
> 
> 标签：xml, actionscript-3, apache-flex, flex3

对于我的应用程序，我发出一个 HTTPRequest，并从 JSP 中取回一些 XML。该 XML 有一些（是的，我知道这是无效/不正确的 XML。如果我找不到创可贴，我将尝试在内部解决）以整数作为名称的节点，`<2>`例如。

当我尝试使用 访问它时`myXMLVariable.child("2")`，它会返回第三个 (index=2) XML 节点。我知道这种行为是[“正确的”](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html#child%28%29)。有没有办法解决这种行为？

* * *

# 例子

```
var myXML:String = "<response>" +
                    "<place1>" +
                    "   <item>1</item>" +
                    "   <stuff>1</stuff>" +
                    "</place1>" +
                    "<2>" +
                    "   <item>1</item>" +
                    "   <stuff>1</stuff>" +
                    "</2>" +
                    "<place3>" +
                    "   <item>1</item>" +
                    "   <stuff>1</stuff>" +
                    "</place3>" +
                    "</response>";

protected function getParam():void
{
    var xml:XML = new XML(myXML);

    Alert.show(xml.child("2"));
    //trace(xml.child("2"))
} 
```

`xml.child("2")`返回

```
<place3>
    ...
</place3> 
```

...当我想要的时候

```
<2>
    ...
</2> 
```

* * *

# 笔记

**我知道这是无效的 XML。**我正在寻找一种解决方法，一个短期修复。有一个近期的发布日期，此解决方法将被删除并替换为下一个版本的适当 XML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:50:54.257

在 XMLList 上使用 E4X 搜索表达式。

```
trace(xml.children().(name() == "2").toXMLString()); 
```

1.  让所有孩子
2.  搜索您需要的名称（）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:47:52.150

从 XML 规范：

```
[Definition: A Name is an Nmtoken with a restricted set of initial characters.] 
Disallowed initial characters for Names include digits, diacritics, the full stop and the hyphen. 
```

您的`<2>`标签没有有效的名称。你不应该对它没有按预期工作感到惊讶。

**编辑**

如果没有办法绕过这样的无效文档，我可能会在处理结果之前使用正则表达式将无效标签替换为有效标签：

```
public function replaceNumericalXMLTagNames( input:String ):String {
    var reg:RegExp = /(\<\/?)([0-9]+)(\>)/g;
    return input.replace( reg, function():String {
        return arguments[1]+"num"+arguments[2]+arguments[3];
    } ) );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:47:31.527

我认为 actionscript 正在“帮助”你。.child 的参数是一个对象，我敢打赌 actionscript 会看到一个数字并将其转换并将其用作索引。如果是我，我会修复 XML。以后会困扰你的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:32:24.663

If you want a short-term fix, change your non-XML with its non-standard tags to standard XML with proper named tags. Then you'll be able to use standard XML tools to manipulate it, and you'll get your code working far faster as a result.

# php - 会员制度

> ID：10398362
> 
> 赞同：1
> 
> 时间：2012-05-01T13:29:19.343
> 
> 标签：php, mysql

谁能建议一个好的会员结构？

例如，用户支付了 1 个月的会员费，从 1.2.2012 开始，到 1.3.2012 结束。

检查用户是否仍然是会员的最佳方法是何时何地？

用户按数据库中的数字进行排名（1-常规 2-成员 3-主持人）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-01T13:30:49.963

也许创建一个包含开始和结束日期的成员资格表，以及用户的 FK。

# coldfusion - 如何保护我的 ColdBox 应用程序？

> ID：10398371
> 
> 赞同：0
> 
> 时间：2012-05-01T13:30:08.353
> 
> 标签：coldfusion, coldbox

我正在使用 ColdBox 迈出第一步，但我被卡住了。我有两个数据库表，用户和公司，每个用户属于一家公司。用户登录应用程序后，他可以列出每个公司，但只能编辑他所属的公司。

那么我该如何管理用户只有他公司的编辑链接呢？我应该如何保护公司处理程序和编辑操作？

我正在使用 ColdBox VirtualEntityService 和 Coldfusion ORM。我应该在 UserService 中编写一个验证用户权限的函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:02:00.297

您的编辑权限应该以某种方式成为会话的一部分，并且您的视图应该包含一些关于公司是否“可编辑”并显示编辑链接的逻辑。当然，当有人实际使用编辑链接时，您的控制器需要仔细检查用户权限，以确保他们确实拥有所需的权限。

这似乎是一种“标准逻辑”问题，与 Coldbox 没有太大关系。我不是 CB 专家，但我认为 CB 没有专门的东西可以处理您的案件。这只是关于编写好的控制器和验证代码，并弄清楚要在用户会话中存储什么。

# iphone - uiwebview 没有像在 Safari 中那样正确显示 PDF

> ID：10398373
> 
> 赞同：1
> 
> 时间：2012-05-01T13:30:14.720
> 
> 标签：iphone, ios, uiwebview

我有一个奇怪的问题。UIwebview 没有正确显示 PDF 文件，正如我从 Web URL 或 safari 浏览器加载 PDF 文件时显示的那样。

[http://www.winsolz.com/temp/2.jpg](http://www.winsolz.com/temp/2.jpg)

我正在使用以下代码从本地系统打开 PDF。

```
NSString *pathFOrPDF = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"Page%@", strPDFNumber] ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:pathFOrPDF];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[myWebview loadRequest:request];      
[myWebviewLandscape loadRequest:request]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T08:25:57.700

我不认为它会解决你的问题，但我有一个 pdf 在 safari 中显示而没有在 a 中显示`UIWebView`，我的问题是文件扩展名不正确。`.pdf`我在本地文件 url 的末尾附加了一个并开始工作。我注意到 safari 也会检查内容类型，所以当您提供远程 url 时，它可能正在 safari 上工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T09:38:59.860

这可能会有所帮助。

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
webView.backgroundColor = [UIColor redColor];
NSString*fileName= @"About_Downloads";
NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:@"pdf"];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL fileURLWithPath:path     isDirectory:NO]];
[webView setScalesPageToFit:YES];
[webView loadRequest:request];
[self.view addSubview:webView] 
```

# jquery - jQuery - 在ajax调用后向DOM添加ticker

> ID：10398374
> 
> 赞同：0
> 
> 时间：2012-05-01T13:30:19.213
> 
> 标签：jquery, bind, ticker, news-ticker, popstate

我在我的新项目中使用其中一个 jQuery 代码，并且页面是使用 HTML5 History API（pushState 和 popState）加载的。使用 jQuery.getJSON() 加载页面内容后，我会收到警告说“DOM 中不存在元素！” - 我相信它指的是股票代码容器（在 ajax 调用后返回），因为它在内容加载后不起作用。

我试图在 jQuery.getJSON() 的回调函数中再次实例化代码，但这并没有解决问题：

```
jQuery.getJSON(url, function(data) {
    jQuery.each(data, function(k, v) {
        $('#' + k + ' section').fadeOut(200, function() {
            $(this).replaceWith($(v).hide().fadeIn(200));
        });             
    });
    $('ul#feedNews').ticker({
        speed: 0.10,
        controls: true,
        titleText: '<strong>Latest news</strong>',
        displayType: 'reveal',
        direction: 'ltr',
        pauseOnItems: 3000,
        fadeInSpeed: 600,
        fadeOutSpeed: 300
    });
}); 
```

知道什么是解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:38:04.690

这很可能是由于插件仅使用加载时存在的元素造成的。我猜它不使用`delegate`,`live`或内部的委托版本`on`。

您的选择是找到一个适用于动态内容的插件，或者修改此插件源以使用上述方法之一。

# jquery - jquery改变onclick为第一

> ID：10398376
> 
> 赞同：0
> 
> 时间：2012-05-01T13:30:25.577
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:32:36.370

只需在将其设置为活动后调用该函数！

手动触发 GetTagDataOnPageChangeNumeric(1,5)。

我不确定你是否想要更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:33:10.693

您应该能够使用该`trigger`函数来触发点击事件：

```
$(".navi a:first-child").trigger("click"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:33:29.420

```
$('.navi a:first-child').click(); 
```

编辑，

在这种情况下，您知道什么是函数，为什么不直接调用

```
GetTagDataOnPageChangeNumeric(1,5); 
```

此外，请确保在页面准备好时运行它：

```
$(document).ready(function(){
    $('.navi a').removeClass('active'); 
    $('.navi a:first-child').addClass('active').click();
}) 
```

# php - 找出由 ajax 操作调用的 URL

> ID：10398381
> 
> 赞同：0
> 
> 时间：2012-05-01T13:30:45.787
> 
> 标签：php, ajax, curl

我必须使用 php curl抓取[此页面。](http://www.flipkart.com/computers/components/ram-20214?_l=m56QC%20tQahyMi46nTirnSA--&_r=11FxOYiYfpMxmANj4kGJzg--&_pop=flyout)在这种情况下，当用户向下滚动时，会使用 ajax 加载更多项目。我可以调用 ajax 脚本调用的 URL 吗？如果是这样，那么我如何找出 URL 呢？我知道一点 ajax，但是那里的代码对我来说有点复杂。这里是相关的js代码[pastebin](http://pastebin.com/6DM32c1U)

或者，有人可以建议另一种抓取该页面的方法吗？PS：我这样做是有充分理由的。

编辑：我想通了。实时 http 标头。问题可以关闭。被遗忘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:37:48.403

您可以为此使用[FireBug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)。切换到控制台选项卡，然后使页面发出 AJAX 请求。

这是滚动到页面底部后应该看到的内容：[http ://www.flipkart.com/computers/components/ram-20214?_l=m56QC%20tQahyMi46nTirnSA--&_r=11FxOYiYfpMxmANj4kGJzg--&_pop=flyout&response-type= json&inf-开始=20](http://www.flipkart.com/computers/components/ram-20214?_l=m56QC%20tQahyMi46nTirnSA--&_r=11FxOYiYfpMxmANj4kGJzg--&_pop=flyout&response-type=json&inf-start=20)

如果您进一步滚动：[http ://www.flipkart.com/computers/components/ram-20214?_l=m56QC%20tQahyMi46nTirnSA--&_r=11FxOYiYfpMxmANj4kGJzg--&_pop=flyout&response-type=json&inf-start=40](http://www.flipkart.com/computers/components/ram-20214?_l=m56QC%20tQahyMi46nTirnSA--&_r=11FxOYiYfpMxmANj4kGJzg--&_pop=flyout&response-type=json&inf-start=40)

标记似乎始终保持不变：`_l=m56QC%20tQahyMi46nTirnSA--`和`_r=11FxOYiYfpMxmANj4kGJzg--`，`_pop`-parameter 也是如此：`_pop=flyout` 所以让我们看看其他参数：

这是主页：

```
//no additional parameters... 
```

这是第一次“重新加载”：

```
&response-type=json&inf-start=20 
```

这是第二次“重新加载”：

```
&response-type=json&inf-start=40 
```

因此，显然您只需附加`&response-type=json&inf-start=$offset`到初始 URI 即可获得 JSON 格式的结果。您还可以看到 FireBug 中的内容，这应该可以很容易地使用它们。

这是一个屏幕截图：

![在此处输入图像描述](../Images/b95e413af42f276e22692fcd3e68347a.png)

# java - 了解 Eclipse 中的外部 Jar

> ID：10398382
> 
> 赞同：1
> 
> 时间：2012-05-01T13:30:45.817
> 
> 标签：java, eclipse, jar, classpath

所以我对 Java 尤其是 Eclipse 还很陌生，所以请原谅我的无知。我从服务器获取了一个项目并将其本地复制到我的机器上。当我打开工作区时，由于找不到罐子，我遇到了很多错误。这是有道理的，因为我没有与我从中复制的服务器相同的目录结构。因此，如果我将相同的外部 jar 复制到我的机器并让它编译成一个 jar 并将其复制回服务器，它会工作吗？还是会因为现在外部 jar 位于与预期不同的位置而失败？

另外，我应该把外部罐子放进普通罐子里以避免这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:34:07.463

你应该没问题。Java 使用所谓的类路径来定位依赖项。开发机器上的类路径可能不同，但只要所有依赖项都在生产中的类路径上，一切都应该工作。

为了避免目录结构的同步问题，最常见的方法是使用 Maven——它将为你管理所有依赖项（但你必须管理 pom.xml——Maven 的项目描述符）。有点笨拙的方法是在项目中拥有依赖项，但是您最终可能会导致许多项目必须包含相同的 jar，然后会出现版本冲突等等。

对于小型项目，您可以自己管理依赖项，但较大的项目将需要更多考虑策略（如 Maven）。

关于可执行的jar，确保<jarfile>:\META-INF\MANIFEST.MF 中的Class-Path 条目是正确的，例如在它引用其他jar 的地方，这些jar 将在生产中存在。例如，假设我们拥有`ourjar.jar`并假设这是其 MANIFEST.MF 的片段：

```
Class-Path: lib/myteamjar.jar 
```

然后预计会有以下目录结构：

```
lib/myteamjar.jar
ourjar.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:40:01.160

我不会向 Java 和 Eclipse 的新手推荐 Maven。我也会忘记 Eclipse。

您有包装和 CLASSPATH 问题。专注于此。

你在说什么样的项目？您得到的答案将取决于您正在创建的应用程序类型。它是一个可执行的 JAR 吗？那么正确的做法是将所有内容打包到一个 ZIP 文件中，该文件的布局与 JAR 清单中的 CLASSPATH 完全一致。

如果它是一个 Web 应用程序，那么正确的东西是一个 WAR 文件，其中包含您的应用程序需要的所有 JAR 文件在 WEB-INF/lib 目录中。

如果你正确地打包东西，你最终应该得到一个包，所有的东西都以正确的方式布局。您应该能够将其部署到服务器并使其全部正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:38:21.437

不，外部罐子的位置无关紧要。您想要做的是将外部 jar 放在您的类路径中。你如何做取决于你如何运行你的java代码。如果您使用该`java`命令从 CLI 运行它，它会将类路径作为参数。如果您希望您的代码在 Eclipse 中构建/运行，您需要右键单击您的项目，选择“构建路径”>“配置构建路径...”使用“添加 JAR...”按钮添加您打开的项目的一部分并“添加外部 JAR...”以添加驻留在项目外部的 jar。有关类路径的更多详细信息，请参阅工具的特定文档。

# java - GStreamer 动态更改管道的 filesrc 位置 - 没有声音

> ID：10398383
> 
> 赞同：3
> 
> 时间：2012-05-01T13:30:46.327
> 
> 标签：java, audio, streaming, gstreamer

我目前正在从事涉及 GStreamer 音频流的大学项目。我已经成功地让流在客户端/服务器和 TCP 之间工作。

我的下一个任务是动态更改用户输入的音频流。我尝试了以下方法：

```
 pp.setState(State.PAUSED);

    pp.setState(State.READY);

    pp.unlink(src);

    source = ElementFactory.make("filesrc", "src");

    pp.link(source);

    source.set("location", fpath);

    pp.setState(State.PLAYING); 
```

fpath 是音频文件的位置。当接收到用户输入时，状态设置为 PAUSE，源取消链接并添加新源。状态设置为正在播放。

我在客户端使用了 GST_DEBUG 并且没有错误，缓冲区被发送到客户端但没有声音。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:20:22.763

您无需取消链接并添加新来源。只需直接进入 READY（无需进入 PAUSED 再进入 READY，这将隐含地发生），设置新位置并返回播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:41:27.400

你需要`syncStateWithParent();`。

我将它用于不同的目的，但这可以扩展到您在属性更改[Gstreamer 上的应用程序：暂停/恢复 RTP 流中的视频](https://stackoverflow.com/questions/4712266/gstreamer-pausing-resuming-video-in-rtp-streams/7771723#7771723)

# excel - 用于将多值单元格映射到多值结果的 Excel 公式或数据库查找？

> ID：10398387
> 
> 赞同：1
> 
> 时间：2012-05-01T13:31:03.307
> 
> 标签：excel

我在 Excel 中有两个工作表。

一个是映射，例如

```
A Aardvark
B Bear
C Cow
D Dog 
```

另一个是我想自动完成其第二列的表。第一列包含单个值，或以逗号分隔的多个值：

```
A
A, C
D, B
C 
```

我在第二列中想要的结果是

```
Aardvark
Aardvark, Cow
Dog, Bear
Cow 
```

只要第一列单元格只包含单个值，使用 Excel VLOOKUP 就很容易。

但它不处理多个值（或者更确切地说，它将它们误解为单个值）并给出结果

```
Aardvark
#NA
#NA
Cow 
```

我怎样才能得到想要的结果？也许使用更复杂的公式、不同的 Excel 函数、数组表，或者在 Excel 中使用 MS-SQL 客户端将 Excel 表作为数据库进行查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:19:09.787

UDF 方法：

```
Function MultiVL(v As Range, tbl As Range)

    Dim arr, rv As String, x As Integer, res

    rv = ""
    arr = Split(v.Value, ",")
    For x = LBound(arr) To UBound(arr)
        res = Application.VLookup(Trim(arr(x)), tbl, 2, False)
        rv = rv & IIf(rv <> "", ", ", "") & IIf(IsError(res), "?", res)
    Next x

    MultiVL = rv

End Function 
```

# c# - Sql 到 Linq 的困难 - 分组，有

> ID：10398392
> 
> 赞同：6
> 
> 时间：2012-05-01T13:31:13.360
> 
> 标签：c#, sql, linq, group-by, having

我在 SQL 中有以下查询，我想将其转换为 LINQ：

```
select profile_id from t
where child_id in (1, 2 ,3, ...) //this will be a list of integers CHILDREN
group by profile_id
having count(distinct child_id) = 3 
```

我很难将我的 sql 查询中的最后一行写入 linq。以下是我迄今为止的工作：

```
public IQueryable<ProfileChildRelationship> GetPCRelByCids(List<int> children)
    {
        var query = from pcr in this._entities.ProfileChildRelationships
                    where children.Contains(pcr.pcChildIDF)
                    group pcr by pcr.pcProfileIDF into g
                    ??? having ...?
                    select pcr;

        return query;
    } 
```

我认为可能的主要问题是许多将具有 sql 语句的语句转换为 where linq 语句，但在我的情况下，我认为不可能在 group by linq 语句之后编写另一个 where！

更新：

情况：我有许多孩子，每个孩子都有许多不同的个人资料，（有些可能相同）。用户将选择一些孩子，我想从中得出他们的共同个人资料。也就是说，如果为每个孩子找到配置文件 X，那么我会得到它，如果为除一个之外的每个孩子找到配置文件 Y，那么它将是无效的！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T13:33:45.123

听起来你想要一个`where`条款......

```
var query = from pcr in this._entities.ProfileChildRelationships
            where children.Contains(pcr.pcChildIDF)
            group pcr by pcr.pcProfileIDF into g
            where g.Select(x => x.ChildId).Distinct().Count() == 3
            select g.Key; // This is the profile ID 
```

# c# - 如何在 C# 中连接到 OAuth？

> ID：10398395
> 
> 赞同：1
> 
> 时间：2012-05-01T13:31:36.780
> 
> 标签：c#, .net, oauth

对于一个项目，我正在尝试创建一个不使用令牌的消费者角色。

我设法在代码隐藏中创建了所需的详细信息：

```
 string outUrl = "";
    string querystring = "";

    string consumerKey = "";
    string consumerSecret = "";
    Uri uri = new Uri("");

    oAuthBase2 oAuth = new oAuthBase2();
    string nonce = oAuth.GenerateNonce();
    string timeStamp = oAuth.GenerateTimeStamp();

    string sig = oAuth.GenerateSignature(uri, consumerKey, consumerSecret, string.Empty, string.Empty,
        "POST", timeStamp, nonce, oAuthBase2.SignatureTypes.HMACSHA1, out outUrl,
        out querystring); 
```

我从这里去哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:40:53.487

您的第一站应该是[OAuth 规范](https://www.rfc-editor.org/rfc/rfc5849)。它准确地解释了每个步骤的用途。如果您想要一个使用[DotNetOpenAuth](http://www.dotnetopenauth.net/)（很容易成为 .NET 最完整的 OAuth 库）的 OAuth 示例，我在[此处提供了一个](https://stackoverflow.com/questions/3799323/how-do-i-use-oauth-to-connect-to-the-etrade-api/7904228#7904228)。

DotNetOpenAuth 源代码还包含连接到 Facebook、Twitter 和 Google 的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T09:31:39.450

DOtNetOpenAuth 过于复杂，不利于初学者理解 OAuth 对话框。对于在客户端使用 OAuth 的小项目，让我建议[RestSharp](http://restsharp.org/)很简单，不是最好的，但至少你知道你在做什么。[下面是帮助您入门的代码示例](https://github.com/restsharp/RestSharp/blob/master/RestSharp.IntegrationTests/oAuth1Tests.cs)。我希望这有帮助 ！

# javascript - 如何在 Android 上运行的 PhoneGap 中访问联系人的电话号码

> ID：10398397
> 
> 赞同：1
> 
> 时间：2012-05-01T13:31:42.333
> 
> 标签：javascript, android, html, cordova

我正在尝试在 PhoneGap“Cordova 1.6.1”中访问联系人的电话号码并向该号码发送消息。我一直在 Android 移动平台上测试该应用程序，并且可以使用此功能访问联系人的姓名：

```
 $('#contacts').append('<option value="'+contacts[i].name+'" >' + contacts[i].name.formatted + '</select>'); 
```

但是，当我输入：

```
 contacts[i].phoneNumbers.formatted 
```

输出未定义。

我遇到了什么问题？如何在 PhoneGap android 应用程序中正确访问联系人的电话号码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:55:20.150

phoneNumbers 是一个数组，因此您需要对其进行索引。

```
for (var j=0; j<contacts[i].phoneNumbers.length; j++) {
     alert("Type: " + contacts[i].phoneNumbers[j].type + "\n" + 
           "Value: "  + contacts[i].phoneNumbers[j].value + "\n" + 
           "Preferred: "  + contacts[i].phoneNumbers[j].pref);
} 
```

[http://docs.phonegap.com/en/1.6.1/cordova_contacts_contacts.md.html#ContactField](http://docs.phonegap.com/en/1.6.1/cordova_contacts_contacts.md.html#ContactField)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T11:44:44.597

检查你的 phoneNumbers 数组是否不为空

像这样的东西

```
if (contacts[i].phoneNumbers){
for (var j=0; j<contacts[i].phoneNumbers.length; j++) {
     alert(     " "  + contacts[i].phoneNumbers[j].value + "\n" + 
           );
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T21:02:20.900

您还可以使用[https://github.com/dbaq/cordova-plugin-contacts-phone-numbers](https://github.com/dbaq/cordova-plugin-contacts-phone-numbers)仅检索具有至少一个电话号码的联系人。

# c++ - ptrdiff_t 的无符号对应物是什么？

> ID：10398400
> 
> 赞同：8
> 
> 时间：2012-05-01T13:31:57.607
> 
> 标签：c++

的未签名对应物是`ptrdiff_t`什么？同样 - 的签名对应物是`size_t`什么？

我想要实现的是拥有一个无符号类型，我可以使用它来存储`ptrdiff_t`变量的正值而不必担心大值 - 这似乎是`size_t`.

相反 - 我想要一个有符号类型，我可以存储 的值`size_t`，同样不用担心大值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T13:38:45.720

我认为`ptrdiff_t`(no `uptrdiff_t`) 没有正式的未签名对应物，但使用`size_t`它是非常合理的。

在 POSIX 中，签名对应的`size_t`是`ssize_t`. 它是由函数返回的类型[`read()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/read.html)，例如 .

这表明很少有实现的底层类型`ssize_t`和`ptrdiff_t`不同的实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T13:38:21.260

`size_t`用于表示对象大小。人们普遍认为编译器编写者不会创建负大小的对象。

请注意，使用 ptrdiff_t` 您会根据比较方式获得差异，因此有符号类型是有意义的（将其更改为无符号类型以获得合理值是微不足道的）：

> **5.7 加法运算符**
> 
> **6** [...]与任何其他算术溢出一样，如果结果不适合提供的空间，则行为未定义。[...]

因此，您可能需要为“非常大的值”创建一个特殊类型。

# html - 左栏尽可能宽

> ID：10398402
> 
> 赞同：0
> 
> 时间：2012-05-01T13:32:09.490
> 
> 标签：html, css, layout

我正在尝试使用简单的两列布局编写网页，左列是目录等，右列是实际内容。到目前为止，我看到的所有示例都以像素为单位硬连接左列宽度，这显然并不理想。CSS中推荐的方式是说“使左列尽可能宽，右列占用剩余的可用空间”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:34:55.667

只是不要指定一个固定的`width`. 如果要控制最小或最大宽度，请分别使用`min-width`和`max-width`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:38:36.620

```
.left_col{min-width: 10px;} 
.right_col{max-width: 20px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:38:28.927

您只需要将导航设置为向左浮动。大小将自动发生。

的HTML：

```
<div class="nav">Navigation</div>
<div class="content">Body Text</div> 
```

CSS：

```
div.nav {
    float:left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:37:04.263

您可以使用百分比指定左列的宽度，右列也是如此。例如：

```
left_column { width: 30% }
right_column: { width: 70%} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T16:24:49.387

将此作为您的 HTML

```
<div class="left">Left Div</div>
<div class="right">Right Div</div> 
```

还有你的 CSS

```
.left {float:left; width:auto;}
.right {float:right; width:auto;} 
```

您可以添加边距和/或填充以在两者之间留出一点空间。

这应该是流体布局所需的全部内容。

编辑：如果一个出现在另一个下面添加

```
display:inline-block; 
```

到每个左班和右班。

# mysql - mysql_insert_id() 没有给出价值

> ID：10398412
> 
> 赞同：0
> 
> 时间：2012-05-01T13:32:55.840
> 
> 标签：mysql, insert

这是我正在使用的代码，代码只是通过两种不同的方法获得相同的值，但是 mysql_insert_id() 回显没有给出输出。

-> echo mysql_insert_id() 给出的值；是 0

谁能告诉我可能的原因以及如何解决这个问题？

```
include'config.php';        

$query = "SELECT id
          FROM      users
          ORDER BY  id DESC
          LIMIT     1";

if($query_run = mysql_query($query))
{
    $query_result =  mysql_fetch_row($query_run);

    $id = $query_result[0];     

    echo $id;
    echo $lastId = mysql_insert_id().'<br />';  
    //'Query Successful!';

} else {
    echo mysql_error();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:42:14.563

如果您正在寻找将插入的下一个自动增量 ID。我想你应该试试这个。

```
$query_autoinc="SHOW TABLE STATUS LIKE 'mytable'";
$exec_autoinc=mysql_query($query_autoinc);
$row_autoinc=mysql_fetch_assoc($exec_autoinc);
$inserted_id = $row_autoinc['Auto_increment']; 
```

或者如果你想要最后插入的 id，你可以试试这个。

```
$query= "SELECT max(id)
         FROM      users
         ORDER BY  id DESC
         LIMIT     1"; 
```

# android - 使用图书馆项目中的活动

> ID：10398416
> 
> 赞同：16
> 
> 时间：2012-05-01T13:33:13.273
> 
> 标签：android, library-project

我有一个`Library`项目设置和一个依赖于这个库项目的项目 - 一切都编译得很好，但是我的`Dependent`项目运行良好；

但是，在使用项目中的活动时，我遇到了间歇性问题`Library`。

我的`Library`项目可以作为库项目“未选中”，并且“选择器”活动可以单独运行。以自己的方式运行`Library`项目可以正常工作，没有任何问题。

当我使用`Library`依赖项目中的项目（和“选择器”活动）时，它会给我`NullPointerExceptions`（或历史上的 DexOp）错误，说“选择器”活动找不到它的资源。

谁能告诉我他们以前是否经历过这种情况？

**编辑**

`layout.xml`手动将项目活动使用的复制`Library`到依赖项目，使项目正确打开“选择器”活动。这是必须的吗？！确定不是吗？`R.java`这进一步让我想知道在项目中合并/引用整数 id 是否存在问题`Library`。

**编辑**

我不确定这是否有任何后果，但我的一个`Library`项目是对不同前端项目中使用的一组自定义视图的包装。

这些自定义视图每个都有一个 Activity，以便可以单独测试它们。

其中一个视图具有自定义属性，这些属性在单独运行时运行良好。但是，依赖项目似乎没有正确地拉入属性并将它们保留在其原始命名空间中，从而导致导入的布局引发编译错误：

```
[2012-05-16 12:07:28 - Project] D:\opt\workspace\CustomGlowList\res\layout\main.xml:14: error: No resource identifier found for attribute 'listId' in package 'com.company.library.glowlist'
[2012-05-16 12:07:28 - Project] D:\opt\workspace\CustomGlowList\res\layout\main.xml:14: error: No resource identifier found for attribute 'type' in package 'com.company.library.glowlist 
```

**编辑**

通过删除项目中存在的重复文件名解决了 DexOp 错误`Dependent`。不确定文件名是问题还是文件内容。

**编辑**

到目前为止，我一直无法找到解决这个问题的方法（尽管@yorkw 的回答肯定有助于 xml 属性！谢谢）。

但是，我设法使这个问题断断续续：

我浏览了每个库项目，并确保它们都有自己的命名空间（即`com.company.library.component1`，`com.company.library.component2`等）。经过几次清理（每个项目都以正确的优先级排序）后，此问题自行解决，但是在切换库/不是库以测试组件时最终会再次出现。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T22:10:25.037

### 原因：

[问题 9656：库项目不支持自定义类的自定义 XML 属性](http://code.google.com/p/android/issues/detail?id=9656)

### 解决方案：

升级到最新的 SDK 和 ADT 版本（自 r17 以来已修复）并`http://schemas.android.com/apk/res-auto`用作自定义属性的命名空间 URI，请参阅[ADT 17.0.0 的修订](http://developer.android.com/sdk/eclipse-adt.html)：

> 添加了对库中具有自定义属性的自定义视图的支持。使用自定义属性的布局必须使用命名空间 URI [http://schemas.android.com/apk/res-auto](http://schemas.android.com/apk/res-auto)而不是包含应用程序包名称的 URI。在构建时，此 URI 将替换为特定于应用程序的 URI。

### 相关主题：

[帮助在 Android 库项目中自定义视图属性](https://stackoverflow.com/questions/4461407/help-with-a-custom-view-attributes-inside-a-android-library-project)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T20:25:00.680

不知道你是如何使用 android 库的，但我已经做了很多次了，没有任何问题，所以请阅读下关于使用 android 库的内容：

1.  为了让 android 项目使用 android 库项目，您可以编辑“project.properties”并在那里添加库项目的路径，或者更简单，右键单击项目（使用库项目），选择“android”类别，然后选择“add”并选择库项目。

2.  为了使android项目始终打开android库项目，还选择“java构建路径”->“项目”并选择库项目。

3.  在“project.properties”上，尝试将两个项目的目标设置为相同的目标，以及您拥有的最新目标（现在最新的是 15），即使您无法在此 android 版本上测试应用程序。

4.  源文件和所有资源文件（在 res 文件夹中）都可以在库项目中使用。

5.  assets 文件夹不能在库项目中使用。只有在实际运行的android项目上才能使用assets文件夹。同样的事情也发生在 proguard 文件中。

6.  图书馆项目的清单几乎不需要任何东西。有关更多信息，请参阅此帖子：[https](https://stackoverflow.com/a/10445630/878126) ://stackoverflow.com/a/10445630/878126 。如果库项目中有您希望能够通过使用它的项目访问的活动，请不要忘记将它们包含在 android 项目的清单中（无需将它们写入 android 库的清单中) .

7.  记得在导出应用程序之前运行 lint。它会给你很多警告，但最重要的警告是当你使用太新的函数时，这些函数不能在你的目标 API 范围内运行。这对图书馆很重要，因为如果有多个来源很容易迷路。

8.  如果您希望在 android 库上扩展活动，则需要某种方法在它们之间进行。我知道的唯一方法是扩展应用程序并让它成为如何为每个活动创建意图的管理者。我认为您可以做其他技巧，但它们可能都与这个相似。

9.  如果您在 android 库和 android 项目上拥有相同的资源（“res”文件夹中的任何资源），则 android 项目上的资源将替换另一个资源。这有利有弊。请记住，同一资源不能有不同的文件扩展名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:46:52.250

问题是`R`由每个`Library`项目中的文件未正确构建和引用引起的。资源文件是直接从调用项目中构建和引用的。

每个都`Libraries`需要有唯一的包，如`AndroidManifest.xml`. 这导致它的每个资源都在调用项目内的唯一命名空间中与`Library`包含`class`文件的 jar 一起编译。

![位于情境中的 <code>R</code> 文件](../Images/e8e386b0f178319779c2d49bb25ccb80.png)

在库和可运行项目之间切换时，问题会变得间歇性，因为`clean and build`需要重新生成这些文件，因为在取消单击`Use as library`复选框时它不会自动完成，而 jar（和 java 类）不需要那么多哄骗它们被正确引用，因为库项目在充当`Library`.

这可能会导致间歇性和不同的错误，包括缺少引用，`DexOp`并且`NullPointerException`取决于`R.java`文件被破坏或部分构建的程度以及包之间发生的冲突。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T12:50:13.520

我有同样的问题，我有一个图书馆项目，它有一些活动。当我从主项目调用库项目的活动时，布局文件资源没有为库项目的活动正确加载，并给出“空指针异常”或“无法加载类”等。

解决方案：我注意到在我的库项目和主项目中使用了相同的布局文件名。我刚刚重命名了这些活动，它已经解决了。

可能这会对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-23T20:06:33.583

在 Android App 项目中引用库项目时，我遇到了类似的问题。我从库项目中删除了 R.java 文件，因此它再次生成，App 拾取了生成的文件。您应该在您的应用程序项目->gen->library_namespace_R.java 下看到生成的 R.java 文件。

# asp.net - Visual Studio ASP 开发 - 在现有项目中更改数据库连接

> ID：10398419
> 
> 赞同：0
> 
> 时间：2012-05-01T13:33:17.667
> 
> 标签：asp.net, visual-studio, visual-studio-2010

我是使用 Visual Studio 和 ASP.net 开发网站的新手。我有 2 个问题，如果您能帮助我，我将不胜感激。

我的主要问题是。我继承了一个需要扩展的视觉工作室项目。我已经让它在本地主机上运行，​​但它仍然连接到旧数据库。我已经制作了该数据库的副本，并希望在测试时连接到它，而不是使用实时数据库。谁能解释我如何更改数据库连接。

其次，我有编写 PHP 的经验，基本上是编写 HTML 脚本，但这似乎非常不同。谁能给我指出一个相关的教程，让我知道我应该如何在这个平台上开发网站。我一直在探索项目文件并将其与 html 源进行比较，但无法真正建立联系，因此质量良好的 Visual Studio + ASP 教程对我很有帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:53:35.147

If you're looking for HTML tutorials. I learned a LONG time ago off of [http://www.htmlgoodies.com](http://www.htmlgoodies.com). That's only going to get you so far. Practice and [http://www.asp.net](http://www.asp.net) is a great site to learn.

You should look at converting the WebSite Project [WSP] to a Web Application Project [WAP] (Google it) and take full advantage of the file transformation it offers. That way you only muck around in the web.config file once. Even for experienced developers, it is tedious to modify the web.config file for a deployment into 'DEV', 'TEST', and then 'PROD'. I'd rather press the 'publish' button and it do the work for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:37:07.773

对于数据库连接，请在 web.config 文件中名为 connectionstrings 的部分中更改此项。例如：

```
<connectionStrings>
    <add name="test.DbConnection" providerName="System.Data.SqlClient" connectionString="server=local;database=mydatabase;Integrated Security=FALSE;user=sa;pwd=1234;" />
  </connectionStrings> 
```

# facebook - 您如何通过 Facebook API 跟踪用户在您的博客上阅读的内容？

> ID：10398423
> 
> 赞同：1
> 
> 时间：2012-05-01T13:33:47.157
> 
> 标签：facebook, facebook-graph-api, object, types

我有一个博客。我喜欢人们完全通过 Facebook API 登录我的网站并标记他们阅读了哪些文章。与您当前喜欢（和不喜欢）Facebook 上的帖子的方式类似，我希望用户能够阅读（和未阅读）我博客上的帖子。

现在我完成了以下步骤：

1.  创建了一个应用程序。
2.  用户可以登录我的网站。
3.  我创建了一个动作（读取）和一个对象（文章）。
4.  人们可以按下“阅读”按钮，并使用以下方式在他们的时间线上共享：

    FB.api('/me/[MY_NAMESPACE]:read?article=[URL_TO_ARTICLE]');

5.  当用户在另一台计算机上登录我的网站时，我如何能够追踪它阅读了哪些文章？

或者是通过使用 user.id 和文章 id 将此信息存储在您自己的服务器上来完成此操作的唯一方法？我不喜欢这个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:55:23.493

您应该能够调用同一端点以获取当前用户的现有“读取”操作列表。例子：

```
FB.api('/me[MY_NAMESPACE]:read', function(response){
  //Do stuff with array of read actions here
}); 
```

# c# - 目录树的第二层到最后一层

> ID：10398428
> 
> 赞同：1
> 
> 时间：2012-05-01T13:33:59.727
> 
> 标签：c#, file, tree, filesystems, directory

我正在尝试获取使用数组获取的目录树的倒数第二级。当它到达 Console.WriteLine 部分时，它不显示任何内容，似乎跳过了整行。

```
foreach (string file in files)   
{   
    string thepathoflife = Path.GetFullPath(file);
    string filetocopy = file;
    string location = file;
    bool b = false;
    string extension = Path.GetExtension(file);
    string thenameofdoom = Path.GetFileNameWithoutExtension(file);
    string filename = Path.GetFileName(file);

    //here is my attempt
    string dirthing = Path.GetDirectoryName(filename); //here is my attempt
    System.Console.WriteLine("" + dirthing); //here is my attempt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:36:50.570

您可以调用`Path.GetDirectoryName`两次以向上遍历文件夹层次结构：

```
Path.GetDirectoryName(Path.GetDirectoryName(Path.GetFullPath(file))) 
```

`null`如果您在层次结构中太“高”，它将返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:40:20.307

这里有一些例子：

```
var path = Path.GetFullPath("example.png");
// path == "C:\\Users\\dtb\\Desktop\\example.png"

Path.GetFileName(path)                              // "example.png"
Path.GetFileNameWithoutExtension(path)              // "example"
Path.GetExtension(path)                             // ".png"

Path.GetDirectoryName(Path.GetFileName(path))       // ""

Path.GetDirectoryName(path)                         // "C:\\Users\\dtb\\Desktop"
Path.GetDirectoryName(Path.GetDirectoryName(path))  // "C:\\Users\\dtb" 
```

# jquery - 在 JQuery 中使用 before 函数

> ID：10398432
> 
> 赞同：0
> 
> 时间：2012-05-01T13:34:12.993
> 
> 标签：jquery

我正在学习 jQuery 并且遇到了`before`函数问题。我正在做的是我有一个表，其中包含一个类`fish`并使用`detach`它来删除它并将它放入一个数组中，这样当我点击一个按钮时它会将它恢复到原来的位置。这是我下面的内容。我试图完成的最终结果是将文本（Pan-Fried Halibut）放回表格中。非常感谢任何帮助

```
<table>
    <tr>
        <td>&nbsp;</td>
        <td class="fish">Pan-Fried Halibut</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

这是 jQuery 分离函数：

```
$("input#btn1").click(function () {
    $f = $(".fish").detach();
}); 
```

尝试将文本放回：

```
$("input#btn2").click(function () { 
    $(".fish").first().before($f);  'This statement doesnt work; what am i doing wrong
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:37:13.063

目前尚不清楚您要在这里做什么。

一个问题是，在你做完`$(".fish").detach()`类 fish 之后，没有任何元素会留在 DOM 树中。因此，稍后您什么都不做`$(".fish")`将被匹配，因此不会插入任何内容。

另一个问题是您似乎将两个`click`处理程序附加到同一个元素；两者都会在单击按钮时被调用，最终结果会是什么并不明显。

最后，如何`$f`从第一个事件处理程序传递到第二个？

如果你这样做，你会看到一些结果（可能不是你想要的）：

```
$(function() {
    var $f; // so that it's accessible to both event handlers

    // bind two handlers to the click event, to be executed on alternating clicks
    $("input#btn1").toggle(function () {
        $f = $(".fish").detach();
    }, function() {
        // you need to find some appropriate selector here, $(".fish")
        // will match nothing because those elements have already been detached
        $(/*something*/).first().before($f);  
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:39:27.273

`$f`当您尝试重新添加文本时，我认为变量仍然不在范围内。请尝试以下操作：

```
$("input#btn1").click(function(){
    var $f = $(".fish").first();
    $(".fish").before($f);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:44:23.237

一旦你分离 .fish，它就不再存在了。所以你不能参考它并试图把它放回去。尝试通过提供不同的位置将其放回原处。试试看这个例子 - [http://jsfiddle.net/mnNfH/](http://jsfiddle.net/mnNfH/)

# android - 每次使用android中的广播接收器打开新活动

> ID：10398435
> 
> 赞同：0
> 
> 时间：2012-05-01T13:34:28.820
> 
> 标签：android, broadcastreceiver

我想使用广播接收器打开一个活动。我正在实施它，当活动不在后台运行时它工作正常。但是如果活动在后台运行，那么它不能启动新活动它返回相同的活动，但我想再次打开这个活动，这意味着活动的多个实例

所以，请帮助我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:38:17.117

所以你要`Intent.FLAG_ACTIVITY_NEW_TASK`

参考：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

编辑：

或者，也许，`FLAG_ACTIVITY_MULTIPLE_TASK`。但不建议这样做，因为它会混淆用户的导航路径。

# c# - ComInterfaceType 属性是否应该不是 InterfaceIsDual

> ID：10398442
> 
> 赞同：4
> 
> 时间：2012-05-01T13:34:59.647
> 
> 标签：c#, com

我在托管代码 C# 中实现 IDispatch 接口。通读文档（是的，我知道这是一个坏主意）它说我可以使用`InterfaceIsDual`,`InterfaceIsIDispatch`或`InterfaceIsIUnknown`. 我希望我的界面是后期绑定的，所以我会选择`InterfaceIsDispatch`.. 但是更多的阅读显示`InterfaceIsDual`应该是相同的。选择 Dual 和 Dispatch 之间会有任何功能差异吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T13:43:30.057

InterfaceIsDual 支持早期绑定和后期绑定。这使得 COM 客户端非常需要它，它可以在早期绑定的速度和自动完成支持以及后期绑定的安全性之间进行选择。

安全方面是它在 Microsoft 文档中被轻描淡写的原因，早期绑定到后来更改的接口而没有对接口 [Guid] 进行相应更改会产生*非常*难以诊断的运行时错误。从访问冲突到调用错误的方法。COM 版本控制是一件大事，为了避免麻烦而遵循的硬性规则经常被跳过，因为它们会引起痛苦。

# java - Android EditText 检查帮助

> ID：10398445
> 
> 赞同：0
> 
> 时间：2012-05-01T13:35:29.863
> 
> 标签：java, android

我有一个 editText 字段，我想检查它是否符合某些条件，基本上它必须包含 2 个整数和 3 个字符串，我如何在添加元素之前检查它。

```
 EditText.getText().toString(); 
```

我可以添加一张这样的支票吗

```
public boolean checkString(String StringPassed) {

   String s = StringPassed;
if(s.length == 5){
  boolean hasString = false;
  boolean hasInt = false;
  String letters = s.substring(0, 2);
  Pattern p = Pattern.compile("[a-zA-Z]");
  Matcher m = p.matcher(letters);
  if (m.matches()) {
    hasString = true;
  }
  String numbers=s.substring(2,5);
  try {
    int num = Integer.parseInt(numbers);
    String n = num + "";
    if (num > 0 && n.length() == 3)
        hasInt = true;
  } catch (Exception e) {
  }
  if (hasInt && hasString) {
   return true;
  }
 }else{
  return false;
 }
return false;
} 
```

然后我有一个方法会说

```
public void addString() {

String StringPassed =  EditTextName.getString().toString();
checkString(String StringPassed);

if (StringPassed() == false) {
Display Toast;
}
else {
      add;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:55:11.977

```
 String s = edittext.gettext();
    if(s.length == 5){
      boolean hasString = false;
      boolean hasInt = false;
      String letters = s.substring(0, 2);
      Pattern p = Pattern.compile("^[a-zA-Z]+$");
      Matcher m = p.matcher(letters);
      if (m.matches()) {
        hasString = true;
      }
      String numbers=s.substring(2,5);
      try {
        int num = Integer.parseInt(numbers);
        String n = num + "";
        if (num > 0 && n.length() == 3)
            hasInt = true;
      } catch (Exception e) {
      }
      if (hasInt && hasString) {
        //success
      }
     }else{
      // incorrect string
     } 
```

您还可以`TextWatcher`在您的上添加一个`edittext`以侦听文本输入更改并自动调用您的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:49:13.797

我不知道是否有任何内置解决方案，但是您可以遍历字符串并制作一个正则表达式来检查给定字符是否为整数？

也许是这样的：

```
Boolean isInteger = Pattern.matches("\d", text.toString()); ? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:49:44.943

我们可以实现

```
edittext.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v , int keyCode , KeyEvent event) {

            // TODO Auto-generated method stub
            if (keyCode == // Test whether a Number or Alphabet) {

                // Increase the tag here
            }

            return false;
        }
    }); 
```

但我认为必须有一些隐式功能，我仍在寻找。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T14:01:13.517

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。[这](http://developer.android.com/reference/java/util/regex/Pattern.html)是使用正则表达式验证字符串是否为特定格式的一个很好的示例。下面是[这个问题](https://stackoverflow.com/questions/5646383/validate-string-with-regex-on-android)的代码，用于验证字符串是否为 [az] [az] [0-9] [0-9] [0,9]。

```
package com.ruralogic.regex;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class RegexActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String regex ="[a-z][a-z][0-9][0-9][0-9]";
        TextView text1 = (TextView)findViewById(R.id.text1);
        TextView text2 = (TextView)findViewById(R.id.text2);
        if(IsMatch("123ab",regex)){
            text1.setText("true");
        }else{
            text1.setText("false");
        }
        if(IsMatch("ab123",regex)){
            text2.setText("true");
        }else{
            text2.setText("false");
        }
    }

    private static boolean IsMatch(String s, String pattern) {
        try {
            Pattern patt = Pattern.compile(pattern);
            Matcher matcher = patt.matcher(s);
            return matcher.matches();
        } catch (RuntimeException e) {
            return false;
        }
    }
} 
```

# ios - 如何让webservice通过NSURLConnection的connection:didFailWithError:传递错误？

> ID：10398448
> 
> 赞同：4
> 
> 时间：2012-05-01T13:35:49.053
> 
> 标签：ios, web-services, nsurlconnection

Web 服务需要做什么才能使`NSURLConnection's`委托接收`connection:didFailWithError:`消息？

例如：iOS 应用程序将令牌传递给 Web 服务，Web 服务查找该令牌，然后 Web 服务需要以“无效令牌”之类的错误进行响应。

当前，接收到数据，并在“ `connectionDidFinishLoading`：”中解析错误消息。这意味着我在两个地方检查错误，这是我试图避免的。

我完全可以控制 iOS 应用程序和 Web 服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T18:46:40.107

根据我的经验（编程中最危险的三个词），`-connection:didFailWithError:`只有在 HTTP 交换失败时才会调用。这通常是网络错误或身份验证错误（我不使用身份验证）。如果 HTTP 消息成功，则无论响应代码如何，`-connectionDidFinishLoading:`都会被调用。

我的解决方案：`-connection:didFailWithError:`当我检测到错误时调用。这样我所有的错误处理代码都在一个地方。

在我的顶部`-connectionDidFinishLoading:`，我有：

```
NSError *error;
NSDictionary *result = [self parseResultWithData:self.connectionData error:&error];
if (!result) {
    [self connection:connection didFailWithError:error];
    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:19:10.450

NSUrlConnection 的委托 connection:didFailWithError: 可能会调用很多条件。这是这些[错误或常量](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003793-CH3g-SW40)的列表。我认为 alertview 会更好地显示连接中的 http 错误:didFailWithError:。

```
-(void) connection:(NSURLConnection *)connection   didFailWithError: (NSError *)error 
{   
UIAlertView *errorAlert= [[UIAlertView alloc] initWithTitle: [error localizedDescription] message: [error localizedFailureReason] delegate:nil                  cancelButtonTitle:@"Done" otherButtonTitles:nil];  
[errorAlert show];   
[errorAlert release];     
NSLog (@"Connection Failed"); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:53:48.650

虽然与您的问题没有直接关系，但我鼓励您转向更高级别的库。我可以衷心推荐 AFNetworking，它已准备好生产并且我已经在许多项目中使用它。这将允许您检查失败块中每个请求的响应代码。该项目还抽象出许多您原本需要为网络通信编写的低级处理；我在这里谈论的是解析和创建 XML/JSON 字符串以与服务进行通信。

为了给您一个更集中的问题答案，`cancel`一旦您注意到`connectionDidFinishLoading:`. 这将自动取消请求并调用委托对象的失败方法。

NSURLConnection 的文档非常枯燥，委托的失败方法并没有专门记录失败的情况。您可以在[URL 加载系统编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)中找到更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T00:09:32.800

我看不到森林的树木。

我需要退后一步`connection:didFailWithError:`，看看不同的委托方法`connection:didReceiveResponse:`！

在我完全控制 Web 服务的情况下，端点可以响应 500 状态代码，该代码在 中获取`connection:didReceiveResponse`，并传递一些 JSON 进一步解释情况，该状态代码在 中获取和处理`connection:didReceiveData:`。

NSURLConnection 委托在整个过程中会挂起更多的状态，但它具有我迄今为止发现的最好的代码气味。

[Jeffery 的回答](https://stackoverflow.com/a/10402548/492847)是迄今为止最正确**的：`connection:didFailWithError:`回调仅与网络故障有关，来自 Web 服务的任何响应都意味着连接没有失败！**

# java - Java 泛型错误

> ID：10398452
> 
> 赞同：6
> 
> 时间：2012-05-01T13:36:18.443
> 
> 标签：java, generics

> **可能重复：**
> [Java 如何：创建通用数组](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)
> [错误：创建通用数组](https://stackoverflow.com/questions/3865946/error-generic-array-creation)

我收到此错误：

```
Cannot create a generic array of T 
```

这是我的代码（第 6 行错误）：

```
1    public class HashTable<T> {
2    
3        private T[] array;
4    
5        HashTable(int initSize) {
6            this.array = new T[initSize];
7        }
8    } 
```

我想知道为什么会出现这个错误以及修复它的最佳解决方案。谢谢。

更新：

我调整了我的代码，以便数组改为采用链表，但我收到了一个新错误。

这是我的错误：

```
Cannot create a generic array of LinkedList<T> 
```

这是我的代码（第六行错误）：

```
1    public class HashTable<T> {
2    
3        private LinkedList<T>[] array;
4    
5        HashTable(int initSize) {
6            this.array = new LinkedList<T>[initSize];
7        }
8    } 
```

这个错误是出于完全相同的原因吗？我只是假设我可以创建通用链表并将它们存储在数组中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T13:39:17.797

是的，不能创建通用数组。我知道的最好的解决方法是改用集合：

```
private List<T> list;

.......

list = new ArrayList<T>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:55:17.990

*可以*通过反射创建泛型数组（尽管需要不安全的强制转换），您只需将类作为参数传递（假设以下方法在定义`<T>`类型参数的类内部）：

```
@SuppressWarnings("unchecked")
public T[] createArray(Class<T> klass, int size) {
    return (T[]) Array.newInstance(klass, size);
} 
```

例如，在您的情况下：

```
HashTable<Integer> t = new HashTable<Integer>();
Integer[] intArray = t.createArray(Integer.class, 4);
intArray[0] = 1; intArray[1] = 2;
intArray[2] = 3; intArray[3] = 4;

System.out.println(Arrays.toString(intArray));
> [1, 2, 3, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T16:00:04.510

您不能创建 T（在 Java 中），但 T[] 在内部与 Object[] 相同。

```
public class HashTable<T> {

    private T[] array;

    @SuppressWarnings("unchecked")
    HashTable(int initSize) {
        this.array = (T[]) new Object[initSize];
    }
} 
```

（将编译，我检查过）

由于 newacct 的评论，使用 Object[] 并将项目转换为 T 可能会更好。

```
public class HashTable<T> {

    private Object[] array;

    public HashTable(int initSize) {
        this.array = new Object[initSize];
    }

    public void put(String pKey, T pItem) {
       ...
       array[x] = pItem;
       ....
    }
    public T get(String pKey) {
       ...
       return (T) array[x];
    }
} 
```

# ios - 可以从命令行“安装” Xcode .mobileprovision 文件吗？

> ID：10398456
> 
> 赞同：51
> 
> 时间：2012-05-01T13:36:32.997
> 
> 标签：ios, bash, xcodebuild, xcrun

我正在尝试使用在 Mac Mini Server (OSX 10.7) 上运行的 bash 脚本来自动化为我们的客户构建应用程序的过程。

我的脚本基于来自 github 的非常有用的脚本，最初发布在[https://gist.github.com/949831](https://gist.github.com/949831)

我正在使用 xcodebuild 构建应用程序，然后使用 xcrun 对 mobileprovision 文件进行签名和嵌入。

当我使用 mobileprovision 文件执行所有这些操作时，我使用 GUI（例如双击）手动安装到 Xcode 中，它工作正常。如果我只是尝试使用复制到带有 SCP 的服务器上的 mobileprovision 文件，它会失败（代码签名错误：找不到配置文件“123abc123”。）

大概这是因为该文件未“安装”。

有没有办法从终端安装 mobileprovision 文件？我正在使用 SSH，所以使用诸如“打开”命令之类的东西是行不通的。

谢谢！

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-27T15:17:22.583

如果您不想下载外部依赖项（就像 Ben 所做的那样），在大多数情况下应该可以使用以下方法：

```
uuid=`grep UUID -A1 -a adhoc.mobileprovision | grep -io "[-A-F0-9]\{36\}"`
cp adhoc.mobileprovision ~/Library/MobileDevice/Provisioning\ Profiles/$uuid.mobileprovision 
```

**请注意，** UUID[由十六进制数字组成，](https://en.wikipedia.org/wiki/Universally_unique_identifier#Format)因此正确的范围是`[-A-F0-9]`和不是`[-A-Z0-9]`。

### 奖励：下载并安装配置文件

使用[cupertino 工具](https://github.com/nomad/cupertino)，以下代码片段从 Developer Portal 下载您的所有分发配置文件并安装它们。

```
ios profiles:download:all --type distribution

for file in *.*provision*; do
    uuid=`grep UUID -A1 -a "$file" | grep -io "[-A-F0-9]\{36\}"`
    extension="${file##*.}"
    echo "$file -> $uuid"
    mv -f "$file" ~/Library/MobileDevice/Provisioning\ Profiles/"$uuid.$extension"
done 
```

cupertino（`ios`命令）可以安装`sudo gem install cupertino`.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-01T15:18:11.677

自从提出这个问题以来，我自己建立了一个解决方案。秘诀是简单地将文件复制到 ~/Library/MobileDevice/Provisioning Profiles/ 文件夹，但（这里是棘手的一点）重命名为 [The UUID].mobileprovision。

UUID 保存在文件本身的文本部分（在 plist 中）。不幸的是，该文件还包含二进制文件，因此“默认读取”无法读取它。幸运的是[，这个人](http://idevblog.info/mobileprovision-files-structure-and-reading/)构建了一个小型命令行实用程序来获取 UUID（以及其他一些东西）。

这是我的完整工作脚本：

[https://gist.github.com/2568707](https://gist.github.com/2568707)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-04T12:12:25.890

所有其他答案的纲要[update_provisioning_profile.sh](https://gist.github.com/djromero/5dce571a1a40e8bd07f3#file-update_provisioning_profile-sh)：

```
#!/bin/sh
#
# Download and install a single iOS provisioning profile
# Requires https://github.com/nomad/cupertino
#
# Usage
# - Login to your account once:
# ios login
# - Configure TEAM and PROFILE (instructions below)
# - Run update_provisioning_profile.sh at anytime, usually after adding/removing devices to the profile

# Configure the team identifier
# Copy it from developer portal or just use cupertino to get it:
# ios devices
# Copy the string in parens and set it as TEAM
TEAM="team id"

# Configure the profile name you want to manage
# Copy it from developer portal or use cupertino to get a list (ignoring Xcode managed profiles):
# ios profiles --team ${TEAM} | grep -v 'iOS Team Provisioning Profile'
# Copy the name as-is and set as PROFILE
PROFILE="profile name"

# Fetch the profile using `cupertino` tool
# you need to run `ios login` once to setup the account
ios profiles:download "${PROFILE}" --team ${TEAM}
PROFILE_FILE=`echo $PROFILE | tr ' ' '_'` # `cupertino` tool will replace spaces with _
UUID=`/usr/libexec/PlistBuddy -c 'Print :UUID' /dev/stdin <<< $(security cms -D -i ${PROFILE_FILE}.mobileprovision)`

# copy where Xcode can find it
cp ${PROFILE_FILE}.mobileprovision "$HOME/Library/MobileDevice/Provisioning Profiles/${UUID}.mobileprovision"

# clean
rm ${PROFILE_FILE}.mobileprovision 
```

易于适应您的配置需求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-02T16:40:40.360

我们在 Jenkins 中运行我们的构建并遇到了类似的问题。我们的 Ad Hoc 配置文件经常更改，我们不想在每次更改时都在 xcode 中安装每个构建从站，所以这就是我要做的工作：

```
/usr/bin/xcrun -sdk iphoneos PackageApplication -v <path to yourapp.app> -o <path to your .ipa file> --sign "<Name of signing identity>" --embed <path to .mobileprovision file> 
```

“”是您在目标的构建设置中的“代码签名”部分下看到的内容。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-12T22:18:23.587

看起来 Apple 在每个键值对下方的 .mobileprovision 配置文件中添加了空行，并且 grep 选项不再起作用。

以下是如何使用 PlistBuddy 和使用 python 脚本的安全性来检索它

```
command = "/usr/libexec/PlistBuddy -c 'Print :UUID' /dev/stdin <<< $(security cms -D -i abc.mobileprovision)"
uuid = os.popen(command).readline().rstrip('\n') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-11T05:18:08.997

使用 fastlane sigh 安装特定的临时文件，或者您可以创建一个新文件。

```
fastlane sigh renew --adhoc -n "provisional-profile-name" --app_identifier "app-identifier" -u "user-name" --ignore_profiles_with_different_name 
```

> 临时配置文件名称只是配置文件的名称，不包含 .mobileprovision 扩展名。

要创建添加了所有设备 UUID 的新临时配置文件，

```
fastlane sigh --adhoc --app_identifier "app-identifier" -u "username" 
```

快速文件，

```
lane :build do

sigh(
adhoc: true,
app_identifier: "***APP_ID**",
provisioning_name: "**Profile_name**",
username: "Apple_ID",
force: true,
skip_certificate_verification: true,
)

gym(
#export_options: "exportPlist.plist",
scheme: "**scheme-name**",
export_method: "ad-hoc",
xcargs: "PROVISIONING_PROFILE=$SIGH_UUID",
)
end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-26T20:56:32.460

看起来最近没有任何进展`cupertino`。`Fastlane`有一个称为`sigh`管理配置文件（创建、下载、更新、修复）的工具：[https ://github.com/fastlane/fastlane/tree/master/sigh#readme](https://github.com/fastlane/fastlane/tree/master/sigh#readme)

# c# - mvc对数字的默认验证

> ID：10398458
> 
> 赞同：2
> 
> 时间：2012-05-01T13:36:36.913
> 
> 标签：c#, asp.net-mvc, razor, editorfor

我的模型上有一个数字属性，我在我的剃刀视图上使用 editorfor。该字段不是强制性的，但默认验证使用户输入一个值，因为它不会接受数字的空字符串。我最终将模型属性更改为字符串，然后将我自己的自定义验证属性放在属性上。这不可能是获得我想要的东西的正确方法....可以吗？

```
[NonMandatoryDoubleValidation("Latitude")]
    public string Latitude { get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:44:59.937

你需要的是一个可以为空的 double: `double?`。这样，您的变量将接受空字符串或空值以及双精度值。但是，每次使用它时都需要检查它是否为空，`Latitude.HasValue`并使用它`Latitude.Value`来获取它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:45:33.060

可以为空的双精度如何：

```
[Required]
public double? Latitude { get; set; } 
```

# java - 使用runjettyrun插件时如何查看JSP java文件

> ID：10398459
> 
> 赞同：0
> 
> 时间：2012-05-01T13:36:48.747
> 
> 标签：java, eclipse, jetty, embedded-jetty

我正在使用带有 runjettyrun 插件（最新）的 Eclipse Indigo。webapp 部署成功，但在非平凡页面上出现 JSP 自定义标记编译错误。

我收到以下 JSP 编译错误：

`java.lang.IllegalStateException: STREAM at org.eclipse.jetty.server.Response.getWriter(Response.java:683)`

我想查看从标记文件创建的 java 文件。在堆栈跟踪中，我可以看到 Tag 正在编译为文件名：xyz_Tag.java

我想查看这个 java 文件。知道我在哪里可以找到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:53:46.893

您可以指示 Jetty 保留生成的 java 源文件。有很多方法可以配置它。最简单的方法是在 web.xml 中为 org.apache.jasper.servlet.JspServlet 传递 init 参数 keepgenerated 为 true。

```
 <init-param>
     <param-name>keepgenerated</param-name>
     <param-value>>true</param-value>
 </init-param> 
```

您可以在以下位置找到更多详细信息：[http ://wiki.eclipse.org/Jetty/Howto/Configure_JSP](http://wiki.eclipse.org/Jetty/Howto/Configure_JSP)

# c# - Global.asax 不工作

> ID：10398460
> 
> 赞同：2
> 
> 时间：2012-05-01T13:36:49.433
> 
> 标签：c#, asp.net, import, global-asax

我打算利用 System.Data 包的全局导入。在我添加之后

```
<%@ Import Namespace="System.Data" %> 
```

在 global.asax 的标记中

在我的一堂课中，我删除了代码顶部的“使用 System.Data”。我构建了 global.asax 和类。

但是我没有成功构建，而是收到了错误

> 当前上下文中不存在名称“CommandType”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:44:10.350

我认为您误解了 global.asax 的作用。

它不提供全局 Import/Using 语句。

[在这里](http://msdn.microsoft.com/en-us/library/2027ewzw.aspx)阅读它，甚至更好的[Stackoverflow 答案在这里](https://stackoverflow.com/questions/2340572/global-asax-in-asp-net)

Global.asax 允许您处理应用程序/会话生命周期事件。

您需要将导入命名空间包含在您使用调用 System.Data 命名空间的文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:45:14.027

我认为您可能也需要导入`System.Data.SqlClient`命名空间，假设这是一个失败的命令对象。

**编辑**

如果您希望某些命名空间可用于所有页面，请尝试将它们添加到 web.config 中：

```
<pages>
    <namespaces>
        <add namespace="System.IO" />
        <add namespace="ProjectName.Classes" />
    </namespaces>
</pages> 
```

# asp.net-mvc - MVC 单个域模型中的多个数据库

> ID：10398467
> 
> 赞同：0
> 
> 时间：2012-05-01T13:37:18.103
> 
> 标签：asp.net-mvc, multiple-databases, domain-model

我正在编写一个基于 Steve Sanderson 的 Pro Asp .Net MVC 框架的应用程序，它使用了该书中 Sports Store 应用程序中描述的数据建模。我的应用运行良好，我使用 Castle 项目作为 IOC，但我有两个数据库。第一个存储多种数据和我的客户信息。第二个只存储每个客户的医疗数据。我需要创建一个类，它返回位于数据库 1 上的客户表中的数据以及存储在数据库 2 中的每个客户的医疗信息。

以下是我的代码：

我在 web.config 上的连接字符串：

```
<add name="CNRConnectionString" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=CNR;Persist Security Info=True;User ID=sa;Password=@#@@@!" providerName="System.Data.SqlClient"/>

<add name="CNRpeConnectionString" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=pe;Persist Security Info=True;User ID=sa;Password=@#@@@!" providerName="System.Data.SqlClient"/> 
```

我的新课程（只有数据，没有表格连接）：

```
namespace DomainModel.Entities
{
    public class ImprimePeriodoPaciente
    {
        public int CodConsulta { get; set; }
        public DateTime DataConsulta { get; set; }
        public string Evolucao { get; set; }
        public int CodProfissional1 { get; set; }
        public int CodPaciente1 { get; set; }
        public string NomeProfissional { get; set; } //receives data from other db
        public string NomePaciente { get; set; } //receives data from other db
        public int CodProcedimento { get; set; }
        public bool TagConsulta { get; set; }
        public int? TagConsulta2 { get; set; } 
        public DateTime di { get; set; }
        public DateTime df { get; set; }
    }
} 
```

这是我来自 domainmodel 的具体和接口：

```
public  class SqlConsultasRepository:IConsultasRepository
    {
     private Table<Consulta> consultasTabela;
     private Table<TEvolucao> tEvolucaoTabela;
     private Table<Paciente> pacientesTabela;
     private Table<Funcionario> funcionariosTabela;

     public SqlConsultasRepository(string connectionString)
     {
         consultasTabela = (new DataContext(connectionString)).GetTable<Consulta>();
         tEvolucaoTabela = (new DataContext(connectionString)).GetTable<TEvolucao>();
         pacientesTabela = (new DataContext(connectionString)).GetTable<Paciente>();
         funcionariosTabela = (new DataContext(connectionString)).GetTable<Funcionario>();
     }

        public IQueryable<ImprimePeriodoPaciente> Prontuarios            { 
            get
            { 
                return
                    (
                       from c in consultasTabela
                       join p in pacientesTabela on c.CodPaciente1 equals p.CodigoPaciente //my doom
                       join f in funcionariosTabela on c.CodProfissional1 equals f.CodigoFuncionario //my doom
                       select new ImprimePeriodoPaciente
                       {
                           CodConsulta=c.CodConsulta,
                           DataConsulta=c.DataConsulta,
                           Evolucao=c.Evolucao,
                           NomeProfissional= f.NomeFuncionario, //my doom
                           NomePaciente=p.NomePaciente, //my doom
                           CodProfissional1=c.CodProfissional1,
                           CodPaciente1 = c.CodPaciente1
                       }
                   );
            }

        } 
```

该代码标有“我的厄运”以显示问题发生的位置......我需要创建对另一个数据库的 connectionString 引用，因为此表不在 connectionString 变量指定的当前数据库中。我收到错误消息，说数据不是来自相同的数据上下文（或类似的东西）。

那么，你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T02:10:45.200

根据这篇文章，我通过了它：

[http://dotnetprogrammingtipsbymuhil.blogspot.com.br/2009/12/query-contains-references-to-items.html](http://dotnetprogrammingtipsbymuhil.blogspot.com.br/2009/12/query-contains-references-to-items.html)

对于那些遇到同样问题的人，请按照上述帖子步骤操作。

在我的项目中，我创建了一个具体方法的接口，该方法从每个数据库中获取单独的数据并将它们放在单独的列表中，如下所示：

```
namespace DomainModel.Concrete
{
    public class SqlImprimePeriodoPacientesRepository : IImprimePeriodoPacientesRepository
    {
    private static string cConexao = "Data Source=.\\SQLEXPRESS;Initial Catalog=CNR;Persist Security Info=True;User ID=sa;Password=23092000";
    private static string cConexao2 = "Data Source=.\\SQLEXPRESS;Initial Catalog=PE;Persist Security Info=True;User ID=sa;Password=23092000";

    private IConsultasRepository cRepository = new SqlConsultasRepository(cConexao2);
    private IPacientesRepository pRepisotory = new SqlPacientesRepository(cConexao);
    private IFuncionariosRepository fRepository = new SqlFuncionariosRepository(cConexao);

    public IQueryable<ImprimePeriodoPaciente> ImprimePeriodoProntuarios//(int? codpac, DateTime? di, DateTime? df)
    {
        get
        {
            var consultas =
                (
                    from c in cRepository.Consultas
                    select new
                    {
                        c.cdf,
                        c.cdi,
                        c.CodConsulta,
                        c.CodPaciente1,
                        c.CodProcedimento,
                        c.CodProfissional1,
                        c.DataConsulta,
                        c.df,
                        c.di,
                        c.Evolucao,
                        c.TagConsulta,
                        c.TagConsulta2
                    }
                )
                .ToList();

            var pacientes =
                (
                    from p in pRepisotory.Pacientes
                    select new
                    {
                        p.CodigoPaciente,
                        p.NomePaciente
                    }
                )
                .ToList();

            var funcionarios =
                (
                    from f in fRepository.Funcionarios
                    select new
                    {
                        f.CodigoFuncionario,
                        f.NomeFuncionario
                    }
                )
                .ToList();

            var result =
                (
                    from c in consultas
                    join p in pacientes on c.CodPaciente1 equals p.CodigoPaciente
                    join f in funcionarios on c.CodProfissional1 equals f.CodigoFuncionario
                    select new ImprimePeriodoPaciente
                    {
                        CodConsulta = c.CodConsulta,
                        DataConsulta = c.DataConsulta,
                        Evolucao = c.Evolucao,
                        NomeProfissional = f.NomeFuncionario,
                        NomePaciente = p.NomePaciente,
                        CodProfissional1 = c.CodProfissional1,
                        CodPaciente1 = c.CodPaciente1
                    }
                ).ToList();

            return result.AsQueryable();
        }
    }
}
} 
```

该方法在域的模型方面完成了工作，所以剩下的就是处理结果。

希望这对某人有帮助！

# android - 在android中将字符串转换为XML？

> ID：10398469
> 
> 赞同：0
> 
> 时间：2012-05-01T13:37:34.890
> 
> 标签：android, xml, xml-serialization, xml-parsing, http-post

我正在尝试将数据从数据库转换为 android 中的 XML。之后我打算使用 HttpPost 将 xml 数据发布到服务器？但我不确定如何在android中将字符串转换为xml。

我正在寻找任何示例代码和方法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:42:26.380

使用 java 库中的 DOM。

参考：

[http://developer.android.com/reference/javax/xml/parsers/DocumentBuilder.html#parse(java.lang.String](http://developer.android.com/reference/javax/xml/parsers/DocumentBuilder.html#parse(java.lang.String) )

[http://exampledepot.com/egs/javax.xml.parsers/BasicDom.html](http://exampledepot.com/egs/javax.xml.parsers/BasicDom.html)

# python - 在冻结集上使用元组作为字典的键是否存在性能差异？

> ID：10398470
> 
> 赞同：7
> 
> 时间：2012-05-01T13:37:43.937
> 
> 标签：python

我有一个脚本，它使用由两个变量组成的键对字典进行多次调用。我知道我的程序将以相反的顺序再次遇到这两个变量，这使得将密钥存储为元组是可行的。（为行和列创建具有相同标签的矩阵）

因此，我想知道使用元组而不是冻结集作为字典键是否存在性能差异。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T13:43:23.607

在快速测试中，显然它产生的差异可以忽略不计。

```
python -m timeit -s "keys = list(zip(range(10000), range(10, 10000)))" -s "values = range(10000)" -s "a=dict(zip(keys, values))" "for i in keys:" "  _ = a[i]"
1000 loops, best of 3: 855 usec per loop

python -m timeit -s "keys = [frozenset(i) for i in zip(range(10000), range(10, 10000))]" -s "values = range(10000)" -s "a=dict(zip(keys, values))" "for i in keys:" "  _ = a[i]"
1000 loops, best of 3: 848 usec per loop 
```

我真的会选择你代码中其他地方最好的东西。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-01T13:49:01.443

没有做任何测试，我有一些猜测。对于`frozenset`s，cpython[存储计算后的哈希](http://hg.python.org/cpython/file/5fd1ac1c9474/Objects/setobject.c#l766)值；此外，迭代任何类型的集合都会产生额外的开销，因为数据存储稀疏。在 2 项集合中，这会对第一个散列造成显着的性能损失，但可能会使第二个散列非常快——至少当对象本身相同时。（即不是一个新的但等效的frozenset。）

对于`tuple`s，cpython不存储hash，而是[每次都计算](http://hg.python.org/cpython/file/5fd1ac1c9474/Objects/tupleobject.c#l314)。因此，使用 freezesets重复哈希可能会*稍微便宜一些。*但是对于这么短的元组，可能几乎没有区别；甚至有可能非常短的元组会更快。

[Lattyware](https://stackoverflow.com/a/10398548/577088)当前的时间安排与我在这里的推理路线相当吻合；见下文。

为了测试我对散列新旧冻结集的不对称性的直觉，我做了以下事情。我相信时间上的差异完全是由于额外的哈希时间。顺便说一句，这非常微不足道：

```
>>> fs = frozenset((1, 2))
>>> old_fs = lambda: [frozenset((1, 2)), fs][1]
>>> new_fs = lambda: [frozenset((1, 2)), fs][0]
>>> id(fs) == id(old_fs())
True
>>> id(fs) == id(new_fs())
False
>>> %timeit hash(old_fs())
1000000 loops, best of 3: 642 ns per loop
>>> %timeit hash(new_fs())
1000000 loops, best of 3: 660 ns per loop 
```

请注意，我之前的时间安排是错误的；using`and`创建了上述方法避免的时序不对称。这种新方法在这里为元组产生了预期的结果——时间差可以忽略不计：

```
>>> tp = (1, 2)
>>> old_tp = lambda: [tuple((1, 2)), tp][1]
>>> new_tp = lambda: [tuple((1, 2)), tp][0]
>>> id(tp) == id(old_tp())
True
>>> id(tp) == id(new_tp())
False
>>> %timeit hash(old_tp())
1000000 loops, best of 3: 533 ns per loop
>>> %timeit hash(new_tp())
1000000 loops, best of 3: 532 ns per loop 
```

而且，致命一击，将预先构建的frozenset的哈希时间与预先构建的元组的哈希时间进行比较：

```
>>> %timeit hash(fs)
10000000 loops, best of 3: 82.2 ns per loop
>>> %timeit hash(tp)
10000000 loops, best of 3: 93.6 ns per loop 
```

Lattyware 的结果看起来更像这样，因为它们是新旧frozensets 结果的平均值。（他们对每个元组或 freezeset 进行两次哈希处理，一次是创建字典，一次是访问它。）

所有这一切的结果是，它可能无关紧要，除了我们这些喜欢挖掘 Python 内部结构和测试事物以被遗忘的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T13:44:35.483

虽然您可以使用它`timeit`来查找（我鼓励您这样做，如果没有其他原因，只是为了了解它是如何工作的），最后几乎可以肯定它无关紧要。

`frozenset`s 专门设计为可散列的，所以如果他们的散列方法是线性时间，我会感到震惊。只有当您需要在实时应用程序中在很短的时间内完成固定（大量）数量的查找时，这种微优化才有意义。

**更新：**查看对 Lattyware 答案的各种更新和评论 - 花了很多集体努力（好吧，相对而言），以消除混杂因素，并表明两种方法的性能几乎相同。性能命中不是他们假设的地方，在你自己的代码中也是一样的。

编写代码以工作，然后分析以查找热点，然后应用算法优化，然后应用微优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-20T03:55:21.327

最佳答案（Gareth Latty's）似乎已经过时了。在 python 3.6 上，对 freezeset 进行散列似乎要快得多，但这在很大程度上取决于您要散列的内容：

```
sjelin@work-desktop:~$ ipython
Python 3.6.9 (default, Nov  7 2019, 10:44:02)

In [1]: import time

In [2]: def perf(get_data):
   ...:     tuples = []
   ...:     sets = []
   ...:     for _ in range(10000):
   ...:         t = tuple(get_data(10000))
   ...:         tuples.append(t)
   ...:         sets.append(frozenset(t))
   ...: 
   ...:     start = time.time()
   ...:     for s in sets:
   ...:         hash(s)
   ...:     mid = time.time()
   ...:     for t in tuples:
   ...:         hash(t)
   ...:     end = time.time()
   ...:     return {'sets': mid-start, 'tuples': end-mid}
   ...: 

In [3]: perf(lambda n: range(n))
Out[3]: {'sets': 0.32627034187316895, 'tuples': 0.22960591316223145}

In [4]: from random import random

In [5]: perf(lambda n: (random() for _ in range(n)))
Out[5]: {'sets': 0.3242628574371338, 'tuples': 1.117497205734253}

In [6]: perf(lambda n: (0 for _ in range(n)))
Out[6]: {'sets': 0.0005457401275634766, 'tuples': 0.16936826705932617}

In [7]: perf(lambda n: (str(i) for i in range(n)))
Out[7]: {'sets': 0.33167099952697754, 'tuples': 0.3538074493408203}

In [8]: perf(lambda n: (object() for _ in range(n)))
Out[8]: {'sets': 0.3275420665740967, 'tuples': 0.18484067916870117}

In [9]: class C:
   ...:     def __init__(self):
   ...:         self._hash = int(random()*100)
   ...:         
   ...:     def __hash__(self):
   ...:         return self._hash
   ...:     

In [10]: perf(lambda n: (C() for i in range(n)))
Out[10]: {'sets': 0.32653021812438965, 'tuples': 6.292834997177124} 
```

其中一些差异足以在性能环境中产生影响，但前提是散列实际上是您的瓶颈（几乎从未发生过）。

我不知道是什么让frozensets几乎总是在~0.33秒内运行，而元组在0.2到6.3秒之间运行。需要明确的是，使用相同的 lambda 重新运行永远不会改变超过 1% 的结果，所以它不像是有错误。

在 python2 中结果是不同的，并且两者通常彼此更接近，这可能是 Gareth 没有看到相同差异的原因。

# facebook - 我想编写一个在 Facebook 中创建多个用户的代码。是否可以？

> ID：10398476
> 
> 赞同：-4
> 
> 时间：2012-05-01T13:38:07.947
> 
> 标签：facebook

我是 facebook 编程的新手。但我对 Java 和 Java EE 有所了解。我想做这样一个程序，创建多个用户帐户，然后所有用户都会在某个 Facebook 页面中点赞或在 Facebook 粉丝页面中发表评论。是否可以 ？如何访问 facebook 表以插入/更新？如果这可以在 Java 中完成会更好。如果 Java 在这里不是正确的语言，我也会喜欢其他语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:44:36.240

facebook api 与语言无关，即它适用于 http 请求，因此您可以用任何支持 http 请求的语言来实现它。

有一些针对不同语言的 SDK，例如官方的 javascript、php、iOS 和 android SDK，还有一些（非官方）针对 java、C#、actionscript 等的 SDK。

我不能说我完全理解你想要做什么，但是没有办法用图形 api 创建一个 facebook 用户。您没有对任何 facebook 表（使用 FQL）的插入/更新访问权限，只能选择。

您可以使用图形 api 添加/更改数据，但您需要一个经过身份验证的用户，该用户授予您的应用程序正确的权限。

如果您想自动创建虚构的 Facebook 个人资料，然后“喜欢”一个页面/网址，那么您不能这样做。

# python - 如何从工作流转换的状态更改对象中获取审阅者的姓名？

> ID：10398478
> 
> 赞同：1
> 
> 时间：2012-05-01T13:38:11.650
> 
> 标签：python, workflow, plone

我怎样才能获得状态所针对的用户的详细信息？

就我而言，我有一个 4 状态工作流，初始状态为私有，然后是待处理、审查和发布。当贡献者添加页面时，其状态是私有的，他可以请求审查。然后审阅者会收到一封关于转换的通知电子邮件（我添加了一个 Python 脚本来发送邮件）。

由于 Products.DCWorkflow 有 5 个默认变量（action、actor、time、comments 和 review_history），我可以通过使用 actor 变量来获取请求转换的用户：

```
actorid = wf_tool.getInfoFor(obj, 'actor')  
actor = context.portal_membership.getMemberById(actorid) 
```

我的问题是：如何获取*要*审核的用户的详细信息？

PS：我的脚本适用于工作流的 status_change 对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:34:03.037

您*无法*获得“将要审查”的人的姓名 - 在有人审查之前它不会固定。在默认设置中，您可以通过 Groups 工具找到 Reviewers 组的成员列表，并知道谁*有权*进行审核，但这不是一回事。

# java - Netbeans有没有办法创建一个空项目？

> ID：10398479
> 
> 赞同：1
> 
> 时间：2012-05-01T13:38:13.573
> 
> 标签：java, netbeans

我是一名 Visual Studio (VB.net / C#) 程序员，我已经安装了 Netbeans。

当我打开一个新项目“Java 应用程序”时，不要创建一个新的 EMPTY 项目，而是将该项目添加到其他以前的项目中。

在 Visual Studio（和所有其他 IDE）中，如果我在只看到我的新项目而不是所有项目后选择“新项目”。

如何使用 Netbeans 只创建一个新的空项目？

附言

我不想使用 Eclipse，因为我需要一个 Visual Ide（特别是表单），而 Netbeans 在这一点上看得更好。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T11:27:32.347

*   在 Tools-Plugins 中安装 Freeform 项目 Extras。
*   创造
    *   Java 自由格式项目或
    *   空的基于 Ant 的项目或
    *   基于骨架 Ant 的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:55:24.130

利用：

文件->项目组->新建组...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:48:28.603

右键单击其他项目并选择“关闭项目”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-12T15:44:41.053

这样做没有明确的形式。作为一种解决方法，您可以根据您想要执行的操作（Java、C++、PHP、HTML 等）创建任何类型的项目，然后删除自动创建的资源（“nbproject”文件夹除外）。使用这种方法，您可以获得类似于空项目的内容。我最近使用这个技巧对为 PrestaShop 创建的一些模块进行分组，然后将它们推送到 Git VCS，就好像它是一个单独的项目一样，而实际上每个模块都是一个独立的项目文件夹。

[![在此处输入图像描述](../Images/b155347540d3c2d9a5ac8b70311ea583.png)](https://i.stack.imgur.com/DtxKX.png)

# google-maps - 给定一个纬度/经度坐标，计算 10 公里区域的最小和最大纬度/经度值

> ID：10398481
> 
> 赞同：7
> 
> 时间：2012-05-01T13:38:16.837
> 
> 标签：google-maps, latitude-longitude

假设我有一个 lat lng 坐标，我想把它放在一个 10 公里宽的正方形的中心，然后得到最小 lat/lng 和最大 lat/lng。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-01T14:06:26.027

如果不需要精确，这很容易：

对于纬度，1 公里是 0.009 度（遵循米的原始定义）。由于您的正方形围绕中心 5 公里，您只需从中心点加减 0.045 度。

对于经度，稍微复杂一些：将上述值除以纬度的余弦。

在代码中：

```
lat_min = lat_center - 0.045;
lat_max = lat_center + 0.045;
long_min = long_center - (0.045 / Math.cos(lat_center*Math.PI/180);
long_max = long_center + (0.045 / Math.cos(lat_center*Math.PI/180); 
```

（`Math.PI/180`需要将度数转换为弧度）。

当心：不能在两极附近工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:24:34.670

正方形是怎么定位的？与赤道平行？如果是这样，那么只需从您的纬度/经度进行 45 度、5 公里 * sqrt(2) 距离的方位角即可获得右上角。与左下角类似，使用 225 度的轴承。

[请](http://www.movable-type.co.uk/scripts/latlong.html)参阅http://www.movable-type.co.uk/scripts/latlong.html**上给定距离和方位的目的地点**

# c++ - 无法链接到升级到 Xcode 4 的 Boost 库

> ID：10398485
> 
> 赞同：0
> 
> 时间：2012-05-01T13:38:21.273
> 
> 标签：c++, xcode, boost

我有一个在 Xcode 3.2.6 中运行良好的应用程序。我刚刚升级到 Lion 和 Xcode 4.3.2，我的应用程序现在无法运行。当我尝试在 iPhone 模拟器上运行它时，我收到以下错误消息：

```
dyld: Library not loaded: libboost_date_time.dylib
Referenced from: /Users/[...]/Library/Application Support/iPhone Simulator/5.1/Applications/C551D731-A05A-4A45-9289-4E38166A29AF/myApp.app/myApp
Reason: image not found 
```

我无法弄清楚这意味着什么或为什么会发生。谁能发现出了什么问题？

谢谢，

埃德

# ios - 将多个图像动态添加到 TableView

> ID：10398487
> 
> 赞同：0
> 
> 时间：2012-05-01T13:38:25.323
> 
> 标签：ios, uitableview, uiimageview

我已经相当开始 IOS 开发，并且正在我的第一个客户项目中。

我被困在以下地方：

因此，如果本月有 10 个人的生日，我需要在一行中显示 10 个图像视图（3 张图片、3 张图片和 1 张图片）。

有人可以帮我解决上述问题。将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:54:53.260

如果你想在 tableview 中添加图片/标签/按钮，那么最简单的方法是继承 UITableViewCell。例如，如果你有 5 张图片（不理解 3 张图片，3 张图片和 1 张图片）并且你想显示它们一个表格行然后你可以做这样的事情：

1.  在您的项目中添加一个名为 CustomCell 的新文件，它应该是 UITableviewCell 的子类，如下所示：

    ```
    @interface CustomCell : UITableViewCell {  

        UIImageView *imageView1;  
        UIImageView *imageView2;  
        UIImageView *imageView3;  
        UIImageView *imageView4;  
        UIImageView *imageView5;  
    }  
    @property (nonatomic, retain) UIImageView *imageView1;  
    @property (nonatomic, retain) UIImageView *imageView2;  
    @property (nonatomic, retain) UIImageView *imageView3;  
    @property (nonatomic, retain) UIImageView *imageView4;  
    @property (nonatomic, retain) UIImageView *imageView5;  
    @end 
    ```

2.  在 CustomCell.m 中这样写代码：

    ```
    @synthesize imageView1, imageView2, imageView3, imageView4, imageView5;
    - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier 
    {
    if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) 
        {           
            self.imageView1 = [[UIImageView alloc] initWithFrame:CGRectMake(10, 8, 50, 45)];
            [self.contentView addSubview:imageView1];

            self.imageView2 = [[UIImageView alloc] initWithFrame:CGRectMake(65, 8, 50, 45)];
            [self.contentView addSubview:imageView2];

            self.imageView3 = [[UIImageView alloc] initWithFrame:CGRectMake(120, 8, 50, 45)];
            [self.contentView addSubview:imageView3];

            self.imageView4 = [[UIImageView alloc] initWithFrame:CGRectMake(170, 8, 50, 45)];
            [self.contentView addSubview:imageView4];

            self.imageView5 = [[UIImageView alloc] initWithFrame:CGRectMake(225, 8, 50, 45)];
            [self.contentView addSubview:imageView5];
        }

    return self;
    } 
    ```

所以你已经完成了 UITableViewCell 的子类化。现在如何在你的视图控制器中使用它们？
您必须在 View Controller 类中导入 CustomCell.h。在**cellForRowAtIndexPath 委托方法**中执行以下操作：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath  
    {  
        static NSString *CellIdentifier = @"Cell";  

        //our custom cell  
        CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];  
        if (cell == nil) {  
            cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];  
        }  

        // Configure the cell.  

        //cell.imageView1.image = [UIImage imageNamed:@"testImg1"];  
        //cell.imageView2.image = [UIImage imageNamed:@"testImg2"];  
        //cell.imageView3.image = [UIImage imageNamed:@"testImg3"];  
        //cell.imageView4.image = [UIImage imageNamed:@"testImg4"];  
        //cell.imageView5.image = [UIImage imageNamed:@"testImg5"];  
        //return cell; 
```

你可以使用更好的是：

```
 NSMutableArray *imgArray = [[NSMutableArray alloc] initWithObjects:cell.imageView1, cell.imageView2,cell.imageView3, cell.imageView4, cell.imageView5, nil];

    for (int imageCounter = 0; imageCounter<5; imageCounter++) {
        [[imgArray objectAtIndex:imageCounter] setImage:[UIImage imageNamed:[NSString stringWithFormat:@"testImg%d", imageCounter]]];
            }  
return cell; 
} 
```

这是您问题上下文的原型解决方案。
希望它会帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:28:26.673

```
- (UITableViewCell *)tableView:(UITableView *)tTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
        for (int t =0; t<cell.subviews.count; t=t) {
            if (![[[cell.subviews objectAtIndex:t].class]isEqualToString:@"UIImageView"]) {
                t++;
            }
            else {
                [((UIView*)[[cell.subviews objectAtIndex:t])removeFromSuperview];
            }
        }
    }
    for (int t = 0; t<10; t++) {
        UIImageView * imageView = [[UIImageView alloc]initWithFrame:CGRectMake(cell.frame.size.width/10*t, 0, cell.frame.size.width/10, cell.frame.size.height)];
        [imageView setImage:[UIImage imageNamed:<#(NSString *)#>]];
        [cell addSubview:imageView];
    }
    return cell;
} 
```

我不知道您的意思（3 张图片，3 张图片和 1 张图片），但您应该能够从那里弄清楚。

# javascript - jScrollPane (jQuery) 同时滚动内容窗格 API 中的所有项目

> ID：10398489
> 
> 赞同：0
> 
> 时间：2012-05-01T13:38:29.097
> 
> 标签：javascript, jquery, html, css, jscrollpane

我需要一些帮助。我在同一页面上有 3 或 4 个 jScrollPanes，像这样创建它们：

```
@foreach (var thing in Model.things)
{
    <div class="scrollPanes">
        <ul>
            <li>Model.Item</li>
        </ul>
     </div>
} 
```

我的 CSS 就像（这些窗格水平滚动）：

```
.scrollPanes
{
    overflow: auto;
    width: 100%;
}

ul
{
    list-style: none;
    height: 50px;
    width: 1000px;
    margin: 0;
    padding: 0;
} 
```

这是我如何初始化 jScrollPane

```
var settings = { hideFocus: true };
// Notice how all the elements with class "scrollPane" become a jscrollpane
var pane = $('.scrollPanes').jScrollPane(settings);
var api = pane.data('jsp');
api.reinitialise(); 
```

所以这使得每一个滚动窗格，它们都像我期望的那样工作得很好。

我想做的是使用或以相等的增量滚动*所有元素*`jScrollPane().scrollToX(xxx);``jScrollPane().scrollByX(xxx);`

当我调用该方法时：

`api.scrollByX(200); api.reinitialise();`

这行得通，但它只滚动第一个列表，而不是后面的任何列表。

我正在寻求让它平等地滚动所有这些，我非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T00:20:15.120

1）添加到每个窗格的个人ID

2) 编写自己的函数 PanesMover(X) 用于一次更改所有窗格。在函数中，将每个窗格移动到同一个 X 上（作为函数参数接收），分别按其 ID

3) 调用您的文档 PanesMover(X)，其中 X -是移动参数，将应用于所有窗格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:26:01.417

您的原始代码不起作用的原因是 .data() 方法的工作原理。请参阅[http://api.jquery.com/data/](http://api.jquery.com/data/)：“在命名数据存储中为 jQuery 集合中的第一个元素返回值...”当您调用 pane.data('jsp') 时，它仅返回 API对于集合中的第一个元素（这就是为什么只有第一个窗格为您滚动）。要为集合中的每个元素在 API 上运行方法，您需要逐个循环遍历这些元素。您可以使用 .each() 来做到这一点

```
$(".jpanes").each(function() {
    $(this).data("jsp").scrollByX(200);
}); 
```

或者，如果您计划重复调用 API，则可以获取 API 数组以在需要时调用，然后使用 for 循环。

```
// Store an array of APIs for each element
var apis = $(".jpanes").map(function() {
    return $(this).data("jsp");
}).get();

// Call an API method for each element
for (var i = 0, api; api = apis[i]; i++) {
    api.scrollByX(200);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T20:20:54.467

这是我在回答 #1 之后以简化形式所做的。

首先，我在我想同时滚动的所有元素上附加了唯一的 ID，但它们都使用相同的类。

```
@{ int paneID = 0; }
@foreach (var thing in Model.things)
{
     <div id="@paneID" class="jpanes">
        <ul>
            <li>Item</li>
        </ul>
     </div>
     paneID++;
} 
```

然后我像以前一样使用 jScrollPane 初始化窗格：

```
$('.jpanes').jScrollPane(); 
```

然后我使用数组为每个元素的唯一 ID 初始化了一个单独的 jScrollPane API，如下所示：

```
var jspAPI = new Array();

$('.jpanes').each(function(index) {
    jspAPI[index] = $('#'+$(this).attr('id')).data('jsp');
} 
```

就是这样，当我想滚动它们时，我循环遍历所有内容

```
for (var i=0; i < jspAPI.length; i++) {
    jspAPI[i].scrollByX(10);
} 
```

我很惊讶以前找不到任何人想要这样做并寻求帮助，但希望这对其他人有所帮助。

# vb.net - 如何在 vb.net 中进行非常简单的异步方法调用

> ID：10398490
> 
> 赞同：14
> 
> 时间：2012-05-01T13:38:32.983
> 
> 标签：vb.net, asynchronous

我只有一个简单的 vb.net 网站，它需要调用一个 Sub 来执行一个很长的任务，该任务与文件系统中的一些目录同步（细节不重要）。

当我调用该方法时，它最终会在网站上超时，等待子例程完成。然而，即使网站超时，例程最终也会完成它的任务，并且所有目录最终都会按应有的方式结束。

我只想防止超时，所以我只想异步调用 Sub 。我不需要（甚至不需要）和回调/确认它运行成功。

那么，如何使用 VB.net 在网站内异步调用我的方法？

如果您需要一些代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Call DoAsyncWork()
End Sub

Protected Sub DoAsyncWork()
        Dim ID As String = ParentAccountID
        Dim ParentDirectory As String = ConfigurationManager.AppSettings("AcctDataDirectory")
        Dim account As New Account()
        Dim accts As IEnumerable(Of Account) = account.GetAccounts(ID)

        For Each f As String In My.Computer.FileSystem.GetFiles(ParentDirectory)
            If f.EndsWith(".txt") Then
                Dim LastSlashIndex As Integer = f.LastIndexOf("\")
                Dim newFilePath As String = f.Insert(LastSlashIndex, "\Templates")
                My.Computer.FileSystem.CopyFile(f, newFilePath)
            End If
        Next

        For Each acct As Account In accts
            If acct.ID <> ID Then
                Dim ChildDirectory As String = ConfigurationManager.AppSettings("AcctDataDirectory") & acct.ID
                If My.Computer.FileSystem.DirectoryExists(ChildDirectory) = False Then
                    IO.Directory.CreateDirectory(ChildDirectory)
                End If
                My.Computer.FileSystem.DeleteDirectory(ChildDirectory, FileIO.DeleteDirectoryOption.DeleteAllContents)
                My.Computer.FileSystem.CopyDirectory(ParentDirectory, ChildDirectory, True)
            Else
            End If
        Next
End Sub 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-01T15:51:45.540

`Thread`除非您需要对线程进行更多控制，否则我不建议使用该类，因为创建和拆除线程的成本很高。相反，我建议使用[ThreadPool 线程](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)。[请参阅此](http://blogs.msdn.com/b/pedram/archive/2007/08/05/dedicated-thread-or-a-threadpool-thread.aspx)内容以供阅读。

`ThreadPool`您可以在这样的线程上执行您的方法：

```
System.Threading.ThreadPool.QueueUserWorkItem(AddressOf DoAsyncWork) 
```

您还需要将方法签名更改为...

```
Protected Sub DoAsyncWork(state As Object) 'even if you don't use the state object 
```

最后，还要注意其他线程中未处理的异常会杀死 IIS。请参阅[这篇文章](http://support.microsoft.com/kb/911816)（旧但仍然相关；不确定解决方案，因为我不重新使用 ASP.NET）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T13:51:50.060

你可以用一个简单的线程来做到这一点：

添加 ：

```
 Imports System.Threading 
```

以及您希望它运行的任何地方：

```
 Dim t As New Thread(New ThreadStart(AddressOf DoAsyncWork))
 t.Priority = Threading.ThreadPriority.Normal
 t.Start() 
```

调用`t.Start()`立即返回，新线程`DoAsyncWork`在后台运行，直到完成。您必须确保该调用中的所有内容都是线程安全的，但乍一看，它通常似乎已经如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-04T22:07:51.087

我还在寻找有关 VB 中的异步编程的信息。除了这个线程，我还发现了以下内容：从 Visual Studio 2012 和 .Net Framework 4.5 开始，VB 被赋予了两个新的关键字来在声明中使方法异步，而不使用 Thread 或 Threadpool。新关键字是“Async”和“Await”。如果您愿意，可以参考以下链接：

[http://msdn.microsoft.com/library/hh191443%28vs.110%29.aspx](http://msdn.microsoft.com/library/hh191443%28vs.110%29.aspx)

[https://msdn.microsoft.com/en-us/library/hh191564%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/hh191564%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-11T17:21:16.750

这是一个较旧的线程，但我想无论如何我都会添加它，因为我最近需要解决这个问题。如果要使用 ThreadPool 调用带参数的方法，可以修改@Timiz0r 的示例，如下所示：

```
System.Threading.ThreadPool.QueueUserWorkItem(Sub() MethodName( param1, param2, ...)) 
```

# sql - 使用 SQL 查询 Excel 电子表格时，如何修复 JOIN 语句中的语法错误？

> ID：10398491
> 
> 赞同：2
> 
> 时间：2012-05-01T13:38:33.110
> 
> 标签：sql, excel, jet

我有一个包含多个电子表格的 Excel 工作簿。我需要为桌面应用程序使用 Jet SQL 从他们那里提取数据。我可以毫无问题地查询单个表，但是当我尝试使用需要连接的语句时，它会在 JOIN 语句中给我一个通用的语法错误。我遇到问题的查询是：

```
SELECT      [Subscribed Email IDs].PIN
        ,   [Subscribed Email IDs].[Email Id]
        ,   [SubscriptionList].[Dealer Account]
        ,   [SubscriptionList].[Dealer Name] 
FROM        [Subscribed Email IDs$B4:C30000] 
INNER JOIN  [SubscriptionList$B4:J30000] 
ON          [Subscribed Email IDs].[PIN]        = [SubscriptionList].[Pin Txt] 
WHERE       [Subscribed Email IDs].[Email Id]   = '<email address value here...>' 
```

我必须使用范围，因为电子表格顶部有额外的行，不包含标题或数据，而“A”列不包含任何内容。我试过没有范围，但我得到了同样的错误，所以我认为这是我编写查询的方式更基本的东西。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:55:27.423

您在`ON`子句中使用了不同的范围变量：

```
 ... FROM [Subscribed Email IDs$B4:C30000]
 ... ON [Subscribed Email IDs].[PIN] 
```

我建议您使用较短范围的变量，例如`T`：

```
 ... FROM [Subscribed Email IDs$B4:C30000] AS T
 ... ON T.[PIN] 
```

# jquery - 使浏览器后退按钮关闭 jQuery UI 对话框

> ID：10398500
> 
> 赞同：1
> 
> 时间：2012-05-01T13:39:07.180
> 
> 标签：jquery, jquery-ui, modal-dialog, back-button

使浏览器后退按钮关闭 jQuery UI 对话框的最简单方法是什么？

我知道有带有哈希标签的“虚拟地址”插件，但我追求比这更简单的东西——我正在构建的应用程序主要是一个经典的网络应用程序，但有一些模态 ajax 表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:43:20.813

`onhashchange`事件？这仅在某些浏览器上受支持，但有些插件可以在其他浏览器上实现它。例如[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

# opengl - mingw OpenGL SDL 仅显示白色纹理

> ID：10398503
> 
> 赞同：1
> 
> 时间：2012-05-01T13:39:17.380
> 
> 标签：opengl, mingw, sdl, cross-compiling

我尝试使用教程中提供的 Linux/SDL 版本使用 mingw for Windows 编译 Nehe (http://nehe.gamedev.net/tutorial/texture_mapping/12038/) 课程 06。

立方体被绘制成纯白色而不是纹理。（在win7上测试过，也在我的开发机器上用过wine）

我可以确认 SDL 正确加载了纹理，但显然没有加载到 OpenGL 中。

我还尝试生成随机噪声作为纹理（不使用 SDL_image 或 SDL_loadBMP），但 Windows 构建仍然不显示任何纹理。

我在 Ubuntu 下使用 Codeblocks 并通过本教程[http://wiki.codeblocks.org/index.php?title=Code::Blocks_and_Cross_Compilers](http://wiki.codeblocks.org/index.php?title=Code::Blocks_and_Cross_Compilers)设置我的交叉编译器。

我相信这与我的编译方式有关，但无法确定错误的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:11:18.503

我发现这个问题在谷歌上搜索同样的问题。花了一天时间才知道发生了什么。

问题是调整大小的方法可能会重新创建绘图区域左右，可能有很多程序使用相同的显卡，所以我的猜测是当这个调整大小的代码运行时，显卡会释放纹理。

在 resize 方法中重新加载纹理有助于（在我的项目中）没有尝试过第 6 课，但它遇到了相同的症状。

我将纹理原始数据放入缓存中，然后将它们重新加载到 openGL 中。

我希望这会有所帮助，问候 Kristoffer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:49:21.513

`glEnable(GL_TEXTURE_2D)`. 默认情况下禁用纹理。

* * *

```
#include <SDL/SDL.h>
#include <GL/glew.h>
#include <GL/gl.h>
#include <GL/glu.h>
#include <wchar.h>
#include <math.h>
#include <SDL/SDL_image.h>

#undef main

static int scrWidth = 800;
static int scrHeight = 600;

int main(int argc, char** argv){
    SDL_Init(SDL_INIT_VIDEO);

    SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 16);
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_SWAP_CONTROL, 0);

    if (SDL_SetVideoMode(scrWidth, scrHeight, 32, SDL_OPENGL) == 0){
        fprintf(stderr, "couldn't set mode %dx%d!\n", 640, 480);
        SDL_Quit();
        return -1;
    }
    glewInit();
    IMG_Init(IMG_INIT_PNG|IMG_INIT_JPG);

    SDL_ShowCursor(SDL_DISABLE);

    glClearColor(0.2f, 0.2f, 0.2f, 0.2f);
    glClearDepth(1.0f);

    glEnable(GL_DEPTH_TEST);
    glEnable(GL_TEXTURE_2D);

    GLuint texId = 0;
    glGenTextures(1, &texId);

    glBindTexture(GL_TEXTURE_2D, texId);

    SDL_Surface* tex = IMG_Load("1.png");

    int texW = tex->w, texH = tex->h;
    SDL_LockSurface(tex);

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    int bytesPerPixel = tex->format->BytesPerPixel;

    GLenum texFormat = GL_INVALID_ENUM, pixelFormat = GL_INVALID_ENUM;

    switch(bytesPerPixel){
        case(3):
            texFormat = GL_RGB;
            pixelFormat = texFormat;
            break;
        case(4):
            texFormat = GL_RGBA;
            pixelFormat = texFormat;
            break;
        default:
            fprintf(stderr, "invalid texture format: %d bytes per pixel", bytesPerPixel);
            SDL_FreeSurface(tex);
            SDL_Quit();
            return -1;
            break;
    }

    int expectedPitch = bytesPerPixel*tex->w;
    if (tex->pitch != expectedPitch){
        fprintf(stderr, "invalid surface pitch %d instead of %d", tex->pitch, expectedPitch);
        SDL_FreeSurface(tex);
        SDL_Quit();
        return -1;
    }

    glTexImage2D(GL_TEXTURE_2D, 0, texFormat, texW, texH, 0, pixelFormat, GL_UNSIGNED_BYTE, tex->pixels);
    GLenum err = glGetError();
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    SDL_UnlockSurface(tex);

    SDL_FreeSurface(tex);

    glBindTexture(GL_TEXTURE_2D, texId);

    bool running = true;
    while (running){
        SDL_Event event;
        if (SDL_PollEvent(&event)){
            switch(event.type){
                case SDL_QUIT:
                    running = false;
                    break;
            };
        }

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluOrtho2D(0, scrWidth, scrHeight, 0);

        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();

        glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

        glBindTexture(GL_TEXTURE_2D, texId);

        glBegin(GL_TRIANGLE_FAN);
        glTexCoord2f(0, 0);
        glVertex2f(0, 0);
        glTexCoord2f(1, 0);
        glVertex2f((float)texW, 0);
        glTexCoord2f(1, 1);
        glVertex2f((float)texW, (float)texH);
        glTexCoord2f(0, 1);
        glVertex2f(0, (float)texH);
        glEnd();

        glDisable(GL_DEPTH_TEST);

        glFlush();
        SDL_GL_SwapBuffers();       
    }   

    glDeleteTextures(1, &texId);

    IMG_Quit();
    SDL_Quit();
    return 0;
} 
```

# javascript - 不同服务器上的相对路径

> ID：10398509
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:39:26.480
> 
> 标签：javascript, html

我在 html 页面中有主页链接，我希望它在单击时转到主页，我必须将它上传到两个不同的服务器。我不想在上面放置静态链接。当上传到不同的服务器上时，如何将主页链接定位到那里的相对主页路径。

主页链接是 [http://test.niwas.com](http://test.niwas.com)和 [http://final.niwas.com](http://final.niwas.com)

```
<html>
<body>

<a href="#">home</a>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:48:37.300

因此，正如评论中所述，您可以使用相对路径`/`。

```
<a href="/">home</a> 
```

对于其他链接，您可以使用相同的“链接系统”：

```
<a href="/about.html">about</a> 
```

# schema - Oracle 设置数据库以共享模式

> ID：10398515
> 
> 赞同：1
> 
> 时间：2012-05-01T13:40:10.130
> 
> 标签：schema, oracle11g, oracle-sqldeveloper

我正在寻找设置 Oracle 数据库的最佳方法，以便多个角色可以与表共享一个模式。

例如，我将担任几个角色：

*   应用程序用户
*   N 个开发者用户
*   DBA 用户
*   ... 未来的用户类型

我已经能够创建组、向其他模式授予权限并创建登录触发器以在登录时切换模式。但是，用户无法通过 SQL Developer 查看表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:33:45.970

SQL Developer 只会`current_schema`在树视图中显示当前用户拥有的对象，而不是会话设置拥有的对象，除非您转到`Other Users`并选择您感兴趣的架构。为了查看其他用户拥有的对象，您实际上将不得不导航到适当的模式。如果数据库中有大量模式，您可以右键单击`Other Users`并创建一个过滤器，将返回的用户集限制为您关心的模式。

# c++ - boost::regex 性能问题

> ID：10398526
> 
> 赞同：0
> 
> 时间：2012-05-01T13:41:26.280
> 
> 标签：c++, regex, boost, boost-regex

我正在使用 boost::regex 在字符串中查找分隔符（在 C++ 中）并用不同的分隔符（如果存在）替换它：

```
const boost::regex esc(delimiter);
const std::string rep = "\\\\" + delimiter;

dest += boost::regex_replace(str, esc, rep,
            boost::match_default | boost::format_sed); 
```

但是当使用 boost::regex 时，我的性能会大幅下降（大约 50%）。

有谁知道为什么？这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-01T16:29:45.233

最近，我们推出了自己的基于状态机的模式匹配例程，但发现`regex`速度很慢。这有帮助吗？

# jquery-ui - 使用 jquery ui 自动完成组合框忽略空格

> ID：10398527
> 
> 赞同：2
> 
> 时间：2012-05-01T13:41:26.797
> 
> 标签：jquery-ui, combobox, jquery-autocomplete, jquery-ui-autocomplete

参考[http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)

有没有办法允许搜索，例如：

```
A B C 
```

或者

```
ABC 
```

以任何方式返回相同的结果。

* * *

我的客户有使用以下交替变化的数据，例如：

```
A & B shoe company 
```

和

```
A&B shoes co 
```

* * *

他们的用户希望 jquery ui 自动完成组合框在他们键入以下内容之一时显示：

```
A & B 
```

和

```
A&B 
```

* * *

旧版应用程序以前允许他们这样做，因此他们已经习惯于通过有时排除空格或有时“忘记”在数据中放入空格来“加速”搜索，例如上述数据。

他们当前基于 Web 的应用程序广泛使用了 jquery ui 自动完成组合框，因此我们的目的不是删除它并用一些专有的小部件替换。

我目前正在考虑修改实际的 jquery.ui.combobox.js 源，但更愿意找到推荐的或至少更优雅的方法来实现这一点。

# mysql - MySQL GROUP BY 的 PostgreSQL 等效项

> ID：10398528
> 
> 赞同：6
> 
> 时间：2012-05-01T13:41:36.093
> 
> 标签：mysql, sql, postgresql, group-by, aggregate-functions

我需要在表中找到重复项。在 MySQL 中，我只写：

```
SELECT *,count(id) count FROM `MY_TABLE`
GROUP BY SOME_COLUMN ORDER BY count DESC 
```

这个查询很好：

*   根据 SOME_COLUMN 查找重复项，并给出其重复计数。
*   按重复的 desc 顺序排序，这对于快速扫描主要重复文件很有用。
*   为所有剩余的列选择一个随机值，让我了解这些列中的值。

Postgres 中的类似查询给我一个错误：

> 列“MY_TABLE.SOME_COLUMN”必须出现在 GROUP BY 子句中或在聚合函数中使用

这个查询的 Postgres 等价物是什么？

PS：我知道 MySQL 的行为偏离了 SQL 标准。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T13:44:16.110

反引号是非标准的 MySQL 事物。使用规范的双引号来引用标识符（在 MySQL 中也可以）。也就是说，如果您的表实际上已命名`"MY_TABLE"`（全部大写）。如果您（更明智地）将其命名为`my_table`（全部小写），则可以删除双引号或使用小写。

另外，我使用`ct`而不是`count`作为别名，因为使用函数名作为标识符是不好的做法。

### 简单案例

这适用于 PostgreSQL **9.1**：

```
SELECT *, count(id) ct
FROM   my_table
GROUP  BY primary_key_column(s)
ORDER  BY ct DESC; 
```

`GROUP BY`它需要子句中的主键列。结果**与**MySQL 查询相同，但`ct`始终为 1（或 0 if `id IS NULL`） - 对查找重复项无用。

### 按主键列以外的方式分组

如果您想按其他列分组，事情会变得更加复杂。这个查询模仿你的 MySQL 查询的行为——你**可以**使用`*`.

```
SELECT DISTINCT ON (1, some_column)
       count(*) OVER (PARTITION BY some_column) AS ct
      ,*
FROM   my_table
ORDER  BY 1 DESC, some_column, id, col1; 
```

之所以有效，是因为`DISTINCT ON`（特定于 PostgreSQL），如`DISTINCT`（SQL 标准），是在window function*之后*`count(*) OVER (...)`应用的。[窗口函数](http://www.postgresql.org/docs/current/interactive/functions-window.html)（带有`OVER`子句）需要 PostgreSQL **8.4**或更高版本，并且在 MySQL 中不可用。

适用于任何表，无论主要或唯一约束。

`1`in`DISTINCT ON`和`ORDER BY`只是引用列表中项目序号的简写`SELECT`。

[SQL Fiddle](http://sqlfiddle.com/#!12/8461a/10)并排演示。

这个密切相关的答案中的更多细节：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

* * *

### `count(*)`对比`count(id)`

如果您正在寻找重复项，那么使用`count(*)`比使用更好`count(id)`。`id`if can be存在细微差别`NULL`，因为`NULL`不计算值 - 而`count(*)`计算所有行。如果`id`是定义`NOT NULL`的，结果是相同的，但`count(*)`通常更合适（也稍微快一点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T00:01:27.610

这是另一种方法，使用 DISTINCT ON：

```
select 

  distinct on(ct, some_column) 

  *,
  count(id) over(PARTITION BY some_column) as ct

from my_table x
order by ct desc, some_column, id 
```

数据源：

```
CREATE TABLE my_table (some_column int, id int, col1 int);

INSERT INTO my_table  VALUES
 (1, 3,  4)
,(2, 4,  1)
,(2, 5,  1)
,(3, 6,  4)
,(3, 7,  3)
,(4, 8,  3)
,(4, 9,  4)
,(5, 10, 1)
,(5, 11, 2)
,(5, 11, 3); 
```

输出：

```
SOME_COLUMN ID          COL1        CT
5           10          1           3
2           4           1           2
3           6           4           2
4           8           3           2
1           3           4           1 
```

现场测试：[http ://www.sqlfiddle.com/#!1/e2509/1](http://www.sqlfiddle.com/#!1/e2509/1)

不同的文档：[http ://www.postgresonline.com/journal/archives/4-Using-Distinct-ON-to-return-newest-order-for-each-customer.html](http://www.postgresonline.com/journal/archives/4-Using-Distinct-ON-to-return-newest-order-for-each-customer.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:45:15.027

mysql 允许从列表`group by`中*省略*非聚合的选定列`group by`，它通过返回为按列分组的每个唯一组合找到的*第一行来执行该列。*这是非标准的 SQL 行为。

另一方面，postgres 符合 SQL 标准。

postgres 中没有等效的查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T15:08:18.360

这是一个自联接的 CTE，它允许您使用`select *`. key0 是*预期*的唯一键，{key1,key2} 是处理当前非唯一行所需的附加键元素。使用风险自负，YMMV。

```
WITH zcte AS (
        SELECT DISTINCT tt.key0
        , MIN(tt.key1) AS key1
        , MIN(tt.key2) AS key2
        , COUNT(*) AS cnt
        FROM ztable tt
        GROUP BY tt.key0
        HAVING COUNT(*) > 1
        )
SELECT zt.*
        , zc.cnt AS cnt
FROM ztable zt
JOIN zcte zc ON zc.key0 = zt.key0 AND zc.key1 =  zt.key1 AND zc.key2 = zt.key2
ORDER BY zt.key0, zt.key1,zt.key2
      ; 
```

顺便说一句：要获得 OP 的预期行为，`HAVING COUNT(*) > 1`应省略该子句。

# android - 是否可以在编译时向 AndroidManifest.xml 添加标签？

> ID：10398529
> 
> 赞同：0
> 
> 时间：2012-05-01T13:41:40.680
> 
> 标签：android, android-manifest

我正在实现一个库，我希望这个库的功能包含在我轻松开发的应用程序中。例如，我希望我开发的每个应用程序都实现一个提供文件路径的内容提供程序。

目前，我使用元数据标签识别支持库的应用程序。如果我可以在编译时添加内容提供者的标签，而不是显式地将标签添加到我开发的每个新应用程序的清单中，我会更喜欢它。

我的问题：有没有办法在运行时将代码插入清单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:53:00.060

> 有没有办法在运行时将代码插入清单？

不，对不起。

> 例如，我希望我开发的每个应用程序都实现一个提供文件路径的内容提供程序。

如果这就是全部`ContentProvider`，这类似于用卡车拍打苍蝇。只需在应用程序中的库公开的某个类上调用一些方法，并传入路径。或者，将路径名保存在某个预定义的资源名称中（例如，`R.string.this_is_the_path_yo`），并在运行时从库中按名称查找该资源。或者，让文件位于某个预定义的位置（例如，在 内`assets/`）并跳过整个解决路径问题。

# c# - 在被调用函数执行之前执行代码

> ID：10398530
> 
> 赞同：5
> 
> 时间：2012-05-01T13:41:50.480
> 
> 标签：c#

我希望能够以某种方式标记一个函数（可能是属性？），以便当从任何地方调用它时，其他一些代码可以处理参数并返回一个值而不是被调用的函数，或者可以让函数正常执行。

我会用它来轻松缓存。

例如，如果我有一个名为 Add10 的函数，它看起来像这样：

```
int Add10 (int n)
{
    return n + 10;
} 
```

如果使用相同的值 (Add10(7)) 重复调用该函数，它总是会给出相同的结果 (17)，因此每次重新计算都是没有意义的。当然，我不会用这么简单的函数来做，但我相信你能理解我的意思。

C# 是否提供任何方式来做我想做的事？我需要一种将函数标记为缓存的方法，以便当有人执行 Add10(16) 时，首先在某处运行某些代码以检查字典是否我们已经知道 Add10 的值 16 并在执行时返回它、计算、存储和如果我们不返回，请返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:43:46.140

你想记住这个功能。这是一种方法：

[http://blogs.msdn.com/b/wesdyer/archive/2007/01/26/function-memoization.aspx](http://blogs.msdn.com/b/wesdyer/archive/2007/01/26/function-memoization.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:51:18.007

而不是函数，然后我会公开一个`Func<>` **委托**：

```
Func<int, int> add10 = (n) =>
{
    // do some other work
    ...

    int result = Add10(n); // calling actual function

    // do some more perhaps even change result
    ...

    return result;

}; 
```

进而：

```
int res = add10(5); // invoking the delegate rather than calling function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:53:04.467

就像 Jason 提到的那样，您可能想要*函数 memoization 之*类的东西。

这是另一个关于它的SO线程： [缓存/记忆函数结果是谁的责任？](https://stackoverflow.com/questions/8328895/whose-responsibility-is-it-to-cache-memoize-function-results)

您还可以使用与面向方面编程相关的原则来实现此类功能。

[http://msdn.microsoft.com/en-us/magazine/gg490353.aspx](http://msdn.microsoft.com/en-us/magazine/gg490353.aspx)

[C# 中的面向切面编程](https://stackoverflow.com/questions/1416880/aspect-oriented-programming-in-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T20:57:28.150

[MbCache](http://code.google.com/p/mbcache)可能是您正在寻找的。

# apache - 如何安装两个 Apache 服务

> ID：10398537
> 
> 赞同：2
> 
> 时间：2012-05-01T13:42:24.057
> 
> 标签：apache, compilation, port, listen

我想在 Windows 机器上安装两个不同的 apache2.2 服务。我已经在端口 80 和 443 上安装并运行了一个。我复制了服务器安装目录并将其粘贴到其他地方。我进入 httpd.conf 并将其从 Listen 80 更改为 Listen 8000。我还将 Listen 443 更改为 Listen 8001。

我可以将它作为服务安装，但它说`httpd.conf`.

当我尝试启动服务时，它说：

> `make_sock: could not bind to address 0.0.0.0:80 no listening sockets available, shutting down`

配置文件中没有说要监听端口 80。

什么可能导致这种情况？

### 编辑

我发现如果我更改了我复制的原始 Apache 安装中的配置文件，它会更改错误消息。

例如，我更改了原始配置文件以侦听未使用的端口，并且当我尝试启动新的 Apache 服务时，错误消息会消失。但是，在任务管理器中，它没有将服务显示为正在运行，而是显示为`STOPPED`.

我卸载了该服务并使用标志重新安装它`-f`以指向正确的配置文件，并且没有任何改变。似乎必须有内部指针或在我复制它时保留的东西？

我还尝试从`.msi`安装程序安装 Apache，但它不会安装，因为我已经安装了 apache。

### 第二次编辑

希望我能早点看到这个。根据[Using Apache HTTP Server on Microsoft Windows](http://httpd.apache.org/docs/current/platform/windows.html)我可能需要从源代码构建 Apache。

> 请注意，您不能使用二进制安装程序在同一台计算机上安装两个版本的 Apache 2.3。但是，您可以在同一台计算机上安装 1.3 系列版本和 2.3 系列版本而不会出现问题。如果您需要在同一台计算机上安装两个不同的 2.3 版本，则必须从源代码编译和安装 Apache。

我从来没有做过这样的事情，有人可以更清楚地解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T15:17:08.373

解决方案是进入原始 Apache 安装目录并运行：

```
C:\original-apache-install\bin> httpd -k install -n "new service name" -f "new/config/file/location" 
```

只是复制安装并粘贴到其他地方就可以保持与原始配置文件的联系，并没有让我改变它所指向的内容。当我在新的安装目录中运行上述命令时，它不起作用。例子：

```
C:\new-pasted-apache\bin> httpd -k install -n "new service name" -f "new/config/file/location" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T07:54:39.903

通过使用已经提到的命令分别安装这两个服务，我成功安装了两个不同的 2.4.x 版本的 apache：

```
C:\Apache2.4.23> httpd -k install -n "Apache2.4.23" -f "C:/Apache2.4.23/conf/httpd.conf"

C:\Apache2.4.12\bin> httpd -k install -n "Apache2.4.12" -f "C:/Apache2.4.12/conf/httpd.conf" 
```

当我在 Windows 的“服务”界面中检查这两个服务时，我注意到秒服务与第一个安装的服务具有相同的可执行路径。我通过 regedit 编辑服务解决了这个问题（因为 sc 命令不接受附加到可执行路径的参数“-k runservice”）：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services 
```

请参阅：[https ://superuser.com/questions/222238/how-to-change-path-to-executable-for-a-windows-service/252850#252850](https://superuser.com/questions/222238/how-to-change-path-to-executable-for-a-windows-service/252850#252850)

# jquery - 再次单击时运行不同的功能

> ID：10398539
> 
> 赞同：0
> 
> 时间：2012-05-01T13:42:27.907
> 
> 标签：jquery, jquery-animate, toggle, jquery-1.7

我有这个代码

```
jQuery('.button').click(function() {
    jQuery('.div1').animate({width: 'toggle'});
    jQuery('.div2').animate({width: '100%'});
}); 
```

一次就可以正常工作。但我想在再次点击时恢复**div2**。切换会起作用，但问题是，我不想隐藏 div2 而只是通过动画降低其宽度。

这样做的正确代码是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:46:21.583

在方法之外保留一个标志：

```
var open = false;

jQuery('.button').click(function() {
    open = !open;

    if(open) {
        jQuery('.div1').animate({width: '100%'});
        jQuery('.div2').animate({width: '100%'});
    } else {
        jQuery('.div1').animate({width: '0%'});
        jQuery('.div2').animate({width: '50%'}); // Or whatever else you want to lower it to
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:47:29.050

### 更新的解决方案

由于`.toggle`在 jQuery 1.8 中已弃用并在 1.9 中删除，因此首选解决方案现在将涉及手动跟踪点击以决定做什么。切换切换的通用替代方法是：

```
var handlers = [
    // on first click:
    function() {
        jQuery('.div1').animate({width: 'toggle'});
        jQuery('.div2').animate({width: '50%'});
    },
    // on second click:
    function() {
        jQuery('.div1').animate({width: 'toggle'});
        jQuery('.div2').animate({width: '100%'});
    }
    // ...as many more as you want here
];

var counter = 0;
$(".button").click(function() {
    // call the appropriate function preserving this and any arguments
    handlers[counter++].apply(this, Array.prototype.slice.apply(arguments));
    // "wrap around" when all handlers have been called
    counter %= handlers.length;
}); 
```

### 原始答案

您可以简单地使用[`.toggle`](http://api.jquery.com/toggle-event/)：

```
jQuery('.button').toggle(function() {
    jQuery('.div1').animate({width: 'toggle'});
    jQuery('.div2').animate({width: '50%'});
}, function() {
    jQuery('.div1').animate({width: 'toggle'});
    jQuery('.div2').animate({width: '100%'});
}); 
```

每次单击时，这将完全切换 的可见性并在 50% 和 100% 之间`.div1`切换宽度。`.div2`

如果您不想`.div1`在第一次隐藏后再次显示，只需执行

```
jQuery('.button').toggle(function() {
    jQuery('.div1').animate({width: 'hide'});
    jQuery('.div2').animate({width: '50%'});
}, function() {
    jQuery('.div2').animate({width: '100%'});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:47:04.983

尝试改用 toggleClass 并使用 css 来处理不同的样式。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-06T17:39:25.900

使用变量并在每次点击后更新它，例如：

```
`
var $toggle = 0;
$('.button').click(function(){
    if($toggle == 0){
        $('.div1').animate({width: '50%'});
        $toggle = 1;
    }else{
        $('.div1').animate({width: '100%'});
        $toggle = 0;
    };

});
` 
```

# java - DecimalFormat，如何通过模式设置最大整数位数？

> ID：10398541
> 
> 赞同：3
> 
> 时间：2012-05-01T13:42:47.170
> 
> 标签：java, formatting, numbers

我想使用 DecimalFormat 格式化数字。
整数（和小数）位数的最大数量必须为 2。
如果数字为 345561.7301，则所需结果为：61.73

这是我的代码：

```
double number = 345561.7301;
DecimalFormat formater =              
    (DecimalFormat)DecimalFormat.getInstance(Locale.US);//This locale only    

formater.applyPattern("00.00");

System.out.println(formater.format(number)); 
```

我不想使用 setMaximumIntegerDigits() 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:03:07.097

只使用子字符串怎么样？

```
double number = 345561.7301;
DecimalFormat formater =              
(DecimalFormat)DecimalFormat.getInstance(Locale.US);  //This locale only    
formater.applyPattern("00.00");
//formater.setMaximumIntegerDigits(2); // <- don't want to use this
String tmp = formater.format(number);
System.out.println(tmp.substring(tmp.length() - 5)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:56:25.890

在这种情况下，使用模式可能不是最佳选择。我建议使用模除法“%”并获得数字/100 的余数。

```
double number = 345561.7301 % 100;
DecimalFormat formater = (DecimalFormat)DecimalFormat.getInstance(Locale.US);
formater.applyPattern("00.00");

System.out.println(formater.format(number)); 
```

# database - 在数据库中，将时间段存储为开始/结束日期还是开始日期和时间长度更好？

> ID：10398542
> 
> 赞同：8
> 
> 时间：2012-05-01T13:42:57.310
> 
> 标签：database, database-design

这是一个完全假设的问题：假设我有一个数据库，我需要在其中存储用户的会员资格，该会员资格可以持续特定的时间（1 个月、3 个月、6 个月、1 年等）。

拥有一个包含字段的表是否更好`Memberships`（每个日期都存储为 unix 时间戳）：

`user_id INT`, `start_date INT`,`end_date INT`

或将其存储为：

`user_id INT`, `start_date INT`,`length INT`

无论哪种方式，您都可以查询具有活动成员资格的用户（例如）。对于后一种情况，每次运行查询时都需要执行算术运算，而前一种情况只需要计算一次结束日期（插入时）。从这个角度来看，以前的设计似乎更好——但它有什么缺点吗？是否有任何常见问题可以通过存储长度来避免，而不能通过存储日期来避免？

此外，在存储时间/日期数据时，unix 时间戳是要走的路吗，还是喜欢 DATETIME 之类的东西？我遇到了两种数据类型（过度转换）的问题，但通常选择 unix 时间戳。如果喜欢 DATETIME 之类的东西，这将如何改变我之前的设计问题的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:56:36.753

我不同意。我会有一个开始和结束日期 - 节省每次执行计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:07:29.187

如果取决于您是否要**索引**结束日期，这又取决于您要如何查询数据。

如果你这样做了，并且你的 DBMS 不支持基于函数的索引或计算列上的索引，那么你唯一的办法就是拥有一个物理的`end_date`，这样你就可以直接索引它。

除此之外，我看不出有什么不同。

顺便说一句，使用您的 DBMS 提供的本机日期类型，而不是`int`. 首先，您将获得某种类型的安全性（因此，如果您尝试在预期日期的位置读取/写入 int，则会收到错误），防止您创建不匹配的引用完整性（尽管日期上的 FK 很少见） ，它可以处理时区（取决于 DBMS），DBMS 通常会为您提供提取日期组件等的功能......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T14:10:14.387

这实际上取决于您将针对您的日期运行什么类型的查询。如果查询涉及按开始/结束时间或日期范围搜索，那么开始/和日期肯定会选择第一个选项。

如果您对统计数据更感兴趣（什么是平均会员期？有多少人成为会员超过一年？）那么我会选择第二个选项。

关于过度转换-您正在编程哪种语言？Java/Ruby 在后台使用 Joda Time，它大大简化了与日期/时间相关的逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T13:53:54.653

从设计的角度来看，我发现有一个开始日期和成员资格的长度是一个更好的设计。

结束日期是会员开始日期 + 持续时间的派生值。这就是我的想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T13:57:12.677

这两种策略在功能上是等效的，选择你喜欢的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-06T14:56:06.107

如果成员资格可能会随着时间的推移而切换，我建议使用此选项：

```
user_id INT, 
since_date DATE, 
active_membership BIT 
```

`active_membership`状态是随着时间的推移而切换的状态，并且正在`since_date`跟踪这种情况发生的时间。此外，如果您有一组有限的允许成员长度，并且需要跟踪某个用户选择了哪个长度，则可以将其扩展为：

```
user_id INT, 
since_date DATE, 
active_membership BIT, 
length_id INT 
```

where`length_id`将引用可用和允许的成员资格长度的查找表。但是，请注意，在这种情况下，`since_date`如果可以更改您的会员期限，则会变得模棱两可。在这种情况下，您将不得不进一步扩展它：

```
user_id INT, 
active_membership_since_date DATE, 
active_membership BIT, 
length_since_date DATE,
length_id INT 
```

使用这种方法很容易看出，当两个日期异步更改时，规范化会失效。为了保持这种标准化，您实际上需要 6NF。如果您的要求朝着这个方向发展，我建议您查看[Anchor 建模](http://www.anchormodeling.com)。

# testing - Play framework 2.0 持续集成设置

> ID：10398543
> 
> 赞同：26
> 
> 时间：2012-05-01T13:43:05.227
> 
> 标签：testing, continuous-integration, hudson, jenkins, playframework-2.0

我正在寻找 Play 2.0 持续集成设置的想法。它将包含典型的工作，例如在 git push 之后构建，每晚构建并部署到测试 Heroku 实例等。代码质量和测试覆盖率指标的生成也很方便。

目前堆栈看起来像 Play 2.0 with Java，但可能会更改为 Scala。

对于“传统”Java web 应用程序，我会使用 Hudson/Jenkins。我找到了一个[用于 Play 的 Hudson 插件，](http://wiki.hudson-ci.org/display/HUDSON/play-plugin)但它似乎不支持 Play 2.0。Hudson 是否适合这里的工具，或者您对 Play 2.0 应用程序的设置是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-02T06:51:52.223

Play 2.0 的构建工具只是[SBT](https://github.com/harrah/xsbt/wiki)的一个薄包装。您应该能够使用 Hudson 的[sbt 插件](http://wiki.hudson-ci.org/display/HUDSON/sbt+plugin)来执行 SBT 构建命令，这些命令等同于您从控制台执行的 Play 命令。

我们在 Bamboo 下为我们的构建执行以下操作：

```
SBT_OPTS="-Dsbt.log.noformat=true"
sbt clean compile test 
```

（SBT_OPTS 变量关闭颜色格式，使测试输出在日志文件中清晰可见。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T09:36:12.427

我发现添加 JUnit 报告插件很有用，因为否则我无法显示测试结果。

[https://github.com/bseibel/sbt-simple-junit-xml-reporter-plugin](https://github.com/bseibel/sbt-simple-junit-xml-reporter-plugin)

对于 PMD 和 Checkstyle，我使用了这个： [https ://github.com/ymasory/sbt-code-quality.g8](https://github.com/ymasory/sbt-code-quality.g8)

对于测试覆盖率，我目前正在使用 JaCoCo： [http ://ronalleva.com/2012/04/25/jacoco-and-play.html](http://ronalleva.com/2012/04/25/jacoco-and-play.html)

Scct 可能是其他覆盖选项：http: [//mtkopone.github.com/scct/](http://mtkopone.github.com/scct/)

有了这些和用于 Jenkins 的 PMD、CheckStyle 和 JaCoCo 插件，我现在已经可以很好地设置 Play 2 Java 项目了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T14:40:54.080

这里有一些关于做它的详细教程 [http://wiki.cloudbees.com/bin/view/DEV/Playframework](http://wiki.cloudbees.com/bin/view/DEV/Playframework) 它基于 cloudbees 但它适用于任何 Jenkins 安装

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-01T23:11:32.480

您实际上甚至不需要使用 SBT 插件。我在 Jenkins 上运行 Play 2.1.1，只需使用 Execute Shell。我运行如下内容：

```
cd ./your-play-project-root
play clean compile test stage
exit 
```

这工作得很好。"play" 只是 sbt 的一个薄包装。

“stage”将在您的目标/服务器目录中创建一个可运行文件。然后，您可以简单地再次 shell 以实际启动您的播放应用程序！

# html - CSS，我可以在一个表格单元格中使用两种不同的颜色吗？（例如深紫色和浅紫色）

> ID：10398544
> 
> 赞同：1
> 
> 时间：2012-05-01T13:43:07.227
> 
> 标签：html, css

有谁知道如何在一个表格单元格（td）中使用两种颜色以及如何让它们相互溢出？

例如。对于我的网站 (www.ericversteeg.nl)，我想在我的留言簿标题列中使用单元格顶部的浅紫色和底部的深紫色。

我想我必须在 td 中分配一个类。

但是我如何在 CSS 中创建我的课程？

问候埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:48:50.833

[CSS 3 草案](http://www.w3.org/TR/css3-images/)引入了渐变色。

例如

```
background: linear-gradient(top, rgba(63,76,107,1) 0%,rgba(63,76,107,1) 100%); 
```

请注意，[浏览器支持不是通用](http://caniuse.com/#search=gradient)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:19:04.863

这是你要找的吗？

[http://jsfiddle.net/4NXRx/2/](http://jsfiddle.net/4NXRx/2/)

它使用背景渐变，您不需要调用任何图像资源。您也不必担心更新图像。

对于不支持渐变的浏览器，有一种备用颜色。这种效果对所有访问者来说都不是很重要，所以如果一些访问者看不到渐变也没什么大不了的。

请注意，我已在 49% 处停止，因此没有逐渐变化。我不知道这是否是你想要的。显然，你必须选择更好的颜色。

```
table td {
padding: 10px;

background-color: #CEC3FA;
background-image: linear-gradient(49%, #CEC3FA 8%, #B9AAD1 51%);
background-image: -o-linear-gradient(49%, #CEC3FA 8%, #B9AAD1 51%);
background-image: -moz-linear-gradient(49%, #CEC3FA 8%, #B9AAD1 51%);
background-image: -webkit-linear-gradient(49%, #CEC3FA 8%, #B9AAD1 51%);
background-image: -ms-linear-gradient(49%, #CEC3FA 8%, #B9AAD1 51%);

background-image: -webkit-gradient(
    linear,
    right 49%,
    right 50%,
    color-stop(0.08, #CEC3FA),
    color-stop(0.51, #B9AAD1)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:47:43.337

有几种方法可以做到这一点。第一个是顶部有一个 div，底部有一个 div，每个都有不同的颜色。

```
<td class="multi_purple">
    <div class="top">
    </div>
    <div class="bottom">
    </div>
</td> 
```

并用它们各自的颜色设置两个 div 的样式。

“更好”的选择是只使用正确颜色的背景图像。这将支持跨浏览器，但如果您的表格大小增加或缩小，则效果不佳。

*最新*的选项是添加渐变。查看[http://www.css3please.com](http://www.css3please.com)以查看其语法。

但它是这样的

```
background-color: #444444;
  background-image: -webkit-gradient(linear, left top, left bottom, from(#444444), to(#999999));
  background-image: -webkit-linear-gradient(top, #444444, #999999);
  background-image:    -moz-linear-gradient(top, #444444, #999999);
  background-image:     -ms-linear-gradient(top, #444444, #999999);
  background-image:      -o-linear-gradient(top, #444444, #999999);
  background-image:         linear-gradient(to bottom, #444444, #999999); 
```

当然还有你的紫色色调。

对于不支持渐变的浏览器，这会降级为纯色（看看你，即 6/7？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:48:10.390

我发现这个工具很有帮助：[CSS3 Gradient Generator](http://gradients.glrzad.com/)。它生成的代码不是最漂亮的，但它确实有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T13:49:14.460

您可以使用建议的背景渐变，或使用具有两种颜色的背景图像。

如果您知道您的单元格将是 30px 高，则制作一个 30px 高 x 1px 宽的图像，在您想要的位置分割，并在其中包含两种颜色。然后使用css：

```
td {
  background-image: url(colors.png);
  background-repeat: repeat-x;
} 
```

将其水平平铺，从而获得您想要的效果。

# ios - 在 xib 中分配的图像是否缓存？

> ID：10398547
> 
> 赞同：2
> 
> 时间：2012-05-01T13:43:22.067
> 
> 标签：ios, ios5, interface-builder, uiimage, xib

如果我将图像分配给 xib 中的*UIImage*视图，是否会缓存该图像，以便如果我使用*UIImage imageNamed 访问图像：*我正在获取缓存的图像数据？

我正在使用 iOS 5.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T12:04:50.583

`UIImage imageNamed:`对您使用的任何图像进行自己的缓存。第一次将它用于给定图像时，它将填充缓存，随后它将使用缓存的版本。

`UIImageView`在 Interface Builder 中需要一个字符串来告诉它要使用什么图像。看起来，实际在 Xib 中编码以表示图像的对象是一个名为 的私有类`UIImageNibPlaceholder`，其中包含一个名为 的私有 NSString 变量`runtimeResourceName`。正是这个类实现了`initWithCoder:`系统从 xib 加载对象时使用的方法。

那么，问题来了， inside `UIImageNibPlaceholder`，`initWithCoder:`它使用了 的`imageNamed:`功能`UIImage`吗？我认为假设它是合理的，因为存储在 xib 中的东西是 string `runtimeResourceName`，并且系统在加载 xib 时将该字符串转换为实际图像。

[苹果开发者论坛上的这篇文章](https://devforums.apple.com/message/634219#634219)似乎澄清了这一点（在保密协议下，所以我不能在这里复制它）。我找不到有关该主题的任何可公开访问的信息。

# android - 在android中一段时间 后执行线程的最佳方法

> ID：10398549
> 
> 赞同：2
> 
> 时间：2012-05-01T13:43:29.853
> 
> 标签：android, timer, runnable

我在我的应用程序中有一个服务，它将一个可运行的（在另一个 java 文件中）放入一个线程并启动它。这一次可以正常工作，但我希望它在一段时间内重复。我需要一个好方法来处理它。我没有使用其他问题的答案的原因是我不希望它无限重复，也不知道它会重复多少次任务。它只会由于在 UI 中单击按钮而停止。

我正在考虑使用带有 sleep 和 if 语句的循环。但我认为这对我的应用程序来说真的很糟糕。有没有做这种事情的标准方法？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:09:15.980

您可以使用以某种方式充当计时器的处理程序，但我认为它更适合您的情况。

你像这样初始化它：

```
Handler delayhandler = new Handler(); 
```

像这样设置它的触发时间（以毫秒为单位）：

```
delayhandler.postDelayed(mUpdateTimeTask, 500); 
```

它称之为：

```
private Runnable mUpdateTimeTask = new Runnable()
{   public void run()
    {   // Todo

        // This line is necessary for the next call
        delayhandler.postDelayed(this, 100);
    }
} 
```

您还可以使用以下方法删除下一个呼叫：

```
delayhandler.removeCallbacks(mUpdateTimeTask); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:16:53.857

使用 TimerTask 并让它执行您的线程/方法。

[http://android.okhelp.cz/timer-simple-timertask-java-android-example/](http://android.okhelp.cz/timer-simple-timertask-java-android-example/)

[http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html) - 您可以使用 Cancel() 方法停止 TimerTask 执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:45:24.713

使用 Timer 它将在给定时间段后运行线程，当您想停止时，只需停止计时器或将其设置为无限时间段。

# remote-debugging - Visual Studio 2008 远程调试错误：“无法启动程序 '*****.exe'”

> ID：10398551
> 
> 赞同：1
> 
> 时间：2012-05-01T13:43:39.073
> 
> 标签：remote-debugging, visual-studio-debugging

我正在尝试在 VS2008 中远程调试我的 .exe，但是当我尝试开始调试时，我抛出了一个错误：

> 无法启动程序“ ***** .exe”。应用程序无法启动，因为应用程序配置不正确。查看清单文件以了解可能的错误。重新安装应用程序可能会解决此问题。有关详细信息，请参阅应用程序事件日志。

有人可以告诉我需要做什么才能解决这个问题吗？应用程序事件日志在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:48:49.727

查看（如果可行，请点赞）[此处](https://stackoverflow.com/questions/3515450/installing-ms-debug-dlls-for-remote-debugging)安装 VS2008 可再发行组件的说明。

可以通过“控制面板”中的“管理工具”->“事件查看器”查看应用程序事件日志，可从“开始”菜单访问。

# c++ - 易失性成员函数 (C++)

> ID：10398578
> 
> 赞同：8
> 
> 时间：2012-05-01T13:45:39.390
> 
> 标签：c++, multithreading, volatile

给定以下课程：

```
class MyClass {
  public:
    int value() const {
      return value_;
    }

  private:
    volatile int value_;
}; 
```

value() 成员函数是否也必须标记为 volatile 以避免被优化，或者它是否可以编写？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T13:54:22.743

它与工作方式完全相似`const`。

如果您有一个`const`对象，则只有标记的成员函数`const`是可调用的。

所以...

如果您有一个`volatile`对象，则只有标记的成员函数`volatile`是可调用的。

只要对象本身不是`volatile`，函数是否是没有区别的。

但是，请记住这*与多线程无关*`volatile`，它*不会*帮助您编写线程安全的代码。对于与并发相关的任何事情，它都是错误的工具。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T13:56:38.157

> value() 成员函数是否也必须标记为 volatile 以避免被优化，或者它是否可以编写？

将成员函数标记为 volatile 不会影响它是否被优化掉。写的很好。

> 担心的是我是否有 MyClass c；然后调用 c.value(); 有几次，编译器可能认为 c.value() 将返回相同的值（即使它可能已经改变了..）

听起来您想要了解原子变量。看看std::atomic。

如果你真的想了解 volatile，请阅读这篇论文：[http ://www.cs.utah.edu/~regehr/papers/emsoft08-preprint.pdf](http://www.cs.utah.edu/~regehr/papers/emsoft08-preprint.pdf)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T14:19:42.850

> 担心的是我是否有 MyClass c；然后调用 c.value(); 有几次，编译器可能认为 c.value() 将返回相同的值（即使它可能已经改变了..）

在单独的编译模型中，编译器看不到函数的内部，它不能假设它们不会有副作用（[*]），因此不能删除对函数的不同调用。如果编译器正在查看函数的定义并内联代码，那么它会*看到*该成员是`volatile`，因此也无法对其进行优化。

[*] 一些编译器（即 gcc）具有特殊的属性，您可以使用这些属性告诉它一个函数是*纯*函数（即它没有副作用，并且输出仅取决于提供的参数）以允许对一个函数进行多次调用优化了，例如在这个循环中：

```
const char* lit = "Literal";
int sum = 0;
for ( int i = 0; i < strlen(lit); ++i ) {
    sum += lit[i];
} 
```

因为`strlen`在库中被标记为pure，所以编译器会缓存该值并将循环转换为：

```
const char* lit = "Literal";
int sum = 0;
int __len = strlen(lit);
for ( int i = 0; i < __len; ++i ) {
    sum += lit[i];
} 
```

但是库**必须**明确告诉编译器这是可以做到的。如果没有属性形式的额外信息，则无法假设任何内容，并且`strlen`必须在循环的每次迭代中调用该函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T13:49:56.673

> ## 常量和易失性成员函数（仅限 C++）
> 
> 可以为常量和非常量对象调用使用 const 限定符声明的成员函数。非常量成员函数只能为非常量对象调用。类似地，可以为 volatile 和 nonvolatile 对象调用使用 volatile 限定符声明的成员函数。只能为非易失性对象调用非易失性成员函数。

[http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr028.htm](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8a.doc%2Flanguage%2Fref%2Fcplr028.htm)**

# android - 在 SurfaceView 上绘图时出现 ConcurrentModificationException？

> ID：10398579
> 
> 赞同：3
> 
> 时间：2012-05-01T13:45:41.147
> 
> 标签：android

假设我有一个“blob”对象的 ArrayList，我循环遍历并绘制到画布上。

```
 for (blob b:myBlobList)
     {
         canvas.drawCircle(b.X, b.Y, b.Size, paint);
     } 
```

此外，我还有一个 onTouchListener，只要触摸表面，它就会添加一个新的 blob 对象。

```
 if (event.getAction() == android.view.MotionEvent.ACTION_DOWN)
        {
          myBlobList.add(new blob());
          myBlobList.get(myBlobList.size()-1).X = event.getX();
          myBlobList.get(myBlobList.size()-1).Y = event.getY();;
        } 
```

然而，它们一起导致 ConcurrentModificationException 错误。你有什么建议，我该如何解决？

只需添加

```
try{ ... } catch (ConcurrentModificationException e) {} 
```

发生此异常时使屏幕/画布闪烁并且经常发生。:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:50:19.080

似乎您在迭代该列表时向列表中添加了一个新 blob。一种简单的解决方法是在循环之前制作列表的副本。如果您在迭代时添加项目，它们将不会被考虑在内。

```
List<Blob> myBlobCopy = new ArrayList<Blob>(myBlobList); //copies the content
for (Blob b : myBlobCopy) {
    canvas.drawCircle(b.X, b.Y, b.Size, paint);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:00:09.637

你可以使用`CopyOnWriteArrayList`你的 Blob

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:53:23.010

您需要在 onTouchListener 中使用第二个列表 myBlobList2 ：

```
for (blob b:myBlobList){
         canvas.drawCircle(b.X, b.Y, b.Size, paint);
     }

myBlobList.addAll(myBlobList2);
myBlobList2.clear(); 
```

如果出现以下情况，仍会出现同步问题：

*   在 myBlobList.addAll 期间将对象添加到 myBlobList2

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T14:05:38.767

您可以使用简单的 for 循环代替 forEach 循环，并使用您自己的索引计数器进行迭代。

```
for(int i = 0; i < myBlobList.size(); i++){
   blob b = myBlobList.get(i);
   canvas.drawCircle(b.X, b.Y, b.Size, paint);
} 
```

发生此[ConcurrentModificationException](http://developer.android.com/reference/java/util/ConcurrentModificationException.html)是因为您正在从其他线程添加或删除 ArrayList 中的元素，而 forEach 循环在迭代 ArrayList 时持有 Iterator。

# javascript - 支持PDU模式下的[和]字符

> ID：10398581
> 
> 赞同：7
> 
> 时间：2012-05-01T13:46:06.373
> 
> 标签：javascript, node.js, sms, gsm

我正在 nodejs 中编写应用程序，用于在 PDU 模式下发送和接收短信。我使用 wavecom GSM 调制解调器（7 位编码）发送短信。它还支持8位（AT+CSMP=1,167,0,8）编码方案。

我可以正确发送字母数字字符。但我不能发送一些字符，如（[，]，|等）。

这里字符串：

```
AT+CMGS=14    
0001030C911989890878800004015B 
```

文本字符串：`[`

但我收到了一些垃圾字符。任何的想法？

以及如何发送多部分短信。我已经参考[了 this](http://www.dreamfabric.com/sms/)和[this](http://mobiletidings.com/2009/02/18/combining-sms-messages/)但我没有得到想要的输出。任何人都可以建议 8 位（[7 位编码方案](http://www.dreamfabric.com/sms/hello.html)）文本编码方案吗？请帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:30:58.823

根据[此页面](http://www.smssolutions.net/tutorials/gsm/sendsmsat/)（请参阅发送 Unicode SMS 消息部分），8 位编码实际上是 UCS-2。

我对 nodejs 的了解不够，无法为您提供完整的实现，但这里有一个 .NET 示例：

```
string EncodeSmsText(string text)
{
    // Convert input string to a sequence of bytes in BigEndian UCS-2 encoding
    //    'Hi' -> [0, 72, 0, 105]
    var bytes = Encoding.BigEndianUnicode.GetBytes(text);

    // Encode bytes to hex representation
    //    [0, 72, 0, 105] -> '00480069'
    return BitConverter.ToString(bytes).Replace("-", "");
} 
```

请注意，根据[这篇文章](https://stackoverflow.com/questions/3438340/convert-to-ucs2)，我的代码不适用于编码为代理对的字符，因为`Encoding.BigEndianEncoding`是 UTF-16（不是 UCS-2）。

**编辑**

这是在 Buffer 类中使用内置 UCS2 转换器的 NodeJS 版本：

```
function swapBytes(buffer) {
    var l = buffer.length;
    if (l & 0x01) {
        throw new Error('Buffer length must be even');
    }
    for (var i = 0; i < l; i += 2) {
        var a = buffer[i];
        buffer[i] = buffer[i+1];
        buffer[i+1] = a;
    }
    return buffer; 
}

function encodeSmsText(input) {
    var ucs2le = new Buffer(input, 'ucs2');
    var ucs2be = swapBytes(ucs2le);
    return ucs2be.toString('hex');

}

console.log(encodeSmsText('Hi')); 
```

受这些 SO 答案的启发：

*   [Node.JS 大端 UCS-2](https://stackoverflow.com/questions/7459332/node-js-big-endian-ucs-2)
*   [如何在 node.js 中进行 Base64 编码？](https://stackoverflow.com/questions/6182315/how-to-do-base64-encoding-in-node-js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T10:52:24.407

谢谢，

终于我得到了答案：）

此字符（[，]，|）被编码为两个字符，例如

`[`被编码为`1B1E`（转义字符和 < 符号的组合）

`]`被编码为`1B20`（转义字符和 > 符号的组合）

所以每当我喜欢这样的字符时，我用相应的值替换它，然后我使用 7 位编码。它的工作很好...

所以我的 [ 编码字符串是

```
> AT+CMGS=15
> 0001000C911989890878800000021B1E 
```

而对于“[你好]”

```
> AT+CMGS=21
> 0001000C911989890878800000091B1EBACC66BF373E 
```

再次感谢..

# perl - 在 Perl 中，如何比较 ISO 格式 (%Y-%m-%dT%H:%M:%SZ) 的日期和时间？

> ID：10398585
> 
> 赞同：2
> 
> 时间：2012-05-01T13:46:29.750
> 
> 标签：perl, date

我正在寻找比较 ISO 格式的两个日期（从文件动态接收） - 例如`2011-12-14T17:22:52Z`- 在 Perl 中。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T13:55:14.947

[您展示的ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)表示法的最大优点是它可以与字符串比较进行比较：

```
my $v1 = "2011-12-14T17:22:52Z";
my $v2 = "2012-01-03T19:13:49Z";

print "$v1 earlier than $v2\n" if $v1 lt $v2; 
```

这假设这些值都是祖鲁时间（Z 是时区，又名 UTC）。如果您有不同的时区，那么您需要标准化为单个时区（UTC 是一个明智的选择）然后进行比较。

* * *

请注意术语[“*字符串比较*”](http://perldoc.perl.org/perlop.html#Relational-Operators)。

在 Perl 中，`<`运算符比较两个数字。所呈现的值将被钩子、骗子或蛮力和无知强制转换为一个数字。例如，`if ("A" == "B")`是真的，因为`"A"`被视为一个数字是0，所以是`"B"`。仅当您使用数字比较时，日期/时间字符串才会被视为数字是年份组件。

字符串比较运算符（其助记符可能基于原始的 Fortran 比较运算符：、、、、、、和）`lt`用于比较字符串。您可以使用数字比较器（、、、、和）来比较数字。请注意区分您要进行哪种类型的比较。`le``gt``ge``eq``ne``cmp``<``<=``>``>=``!=``==``<=>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T17:58:58.817

如果您的日期*不一定*在同一时区（问题没有明确提到这一点），那么您最好使用专用的日期和时间模块，而不是自己解析和计算日期字符串。下面是使用[DateTime](http://search.cpan.org/perldoc?DateTime)和[DateTime::Format::ISO8601](http://search.cpan.org/perldoc?DateTime%3a%3aFormat%3a%3aISO8601)模块的示例：

```
use DateTime::Format::ISO8601;

my $dt1 = DateTime::Format::ISO8601->parse_datetime('2011-12-14T17:22:52Z');
my $dt2 = DateTime::Format::ISO8601->parse_datetime('2011-12-14T17:22:52+01:00');

if ($dt1 < $dt2) {
    print "$dt1 is first\n";
} else {
    print "$dt2 is first\n";
} 
```

请注意，比较使用两个对象之间的*数字*比较，这与基于字符串的答案中的*字符串比较不同。*这是因为`DateTime`重载了比较运算符和字符串插值“运算符”。

# sql - SQL Server 2008 外键区分大小写

> ID：10398587
> 
> 赞同：1
> 
> 时间：2012-05-01T13:46:36.927
> 
> 标签：sql, sql-server

SQL Server 2008 是否有可能具有不区分大小写的数据，例如以下将返回数据...

```
SELECT mycolumn FROM mytable WHERE mycolumn='Case' 
SELECT mycolumn FROM mytable WHERE mycolumn='caSE' 
SELECT mycolumn FROM mytable WHERE mycolumn='case' 
```

如果 mytable.mycolumn 的值为 'CASE' 但外键区分大小写？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T13:50:34.133

区分大小写由数据库的[排序规则设置](http://msdn.microsoft.com/en-us/library/ms144250.aspx)确定。它影响一切，比较，外键等......

但是，您可以更改特定列或列的排序规则设置，以便与它进行比较区分大小写，而数据库的其余部分保持不区分大小写。例如：

```
ALTER COLUMN Name VARCHAR(50)  
COLLATE SQL_Latin1_General_CP1_CS_AS 
```

现在所有的比较`Name`都将区分大小写。

在给定区分大小写排序规则的情况下执行不区分大小写比较的一种方法是将每列[排序规则](http://msdn.microsoft.com/en-us/library/ms184391.aspx)转换指定为查询的一部分。如果您使用此方法动态更改排序规则，您可能还想熟悉[排序规则优先级。](http://msdn.microsoft.com/en-us/library/ms179886.aspx)这是在查询点指定的排序规则转换的示例：

```
SELECT Name 
FROM MyTable
WHERE Name = 'CASE' COLLATE SQL_Latin1_General_CP1_CI_AS -- Use case insensitive coll. 
```

可以使用 Table Designer is SSMS 以交互方式更改列的排序规则（对不起，大图）：

![在此处输入图像描述](../Images/45590b170d41b9a6fad1044fb121f789.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:23:16.493

如果您希望外键区分大小写，则只需将列设置为区分大小写（并确保它引用的键使用相同的排序规则）。从迈克尔的回答中借用整理：

```
USE tempdb;
GO

CREATE TABLE dbo.foo 
( 
  [key] VARCHAR(32) COLLATE SQL_Latin1_General_CP1_CS_AS
  PRIMARY KEY
);

CREATE TABLE dbo.bar 
(
  [key] VARCHAR(32) COLLATE SQL_Latin1_General_CP1_CS_AS
  FOREIGN KEY REFERENCES dbo.foo([key])
);

INSERT dbo.foo SELECT 'Bob';
INSERT dbo.foo SELECT 'bOB';
INSERT dbo.foo SELECT 'BOB';
GO

-- fails:
INSERT dbo.bar SELECT 'bob';
GO

-- succeeds:
INSERT dbo.bar SELECT 'Bob';
GO 
```

如果您希望对同一列的查询不区分大小写，则只需指定一个 COLLATE 子句（注意它包含`_CI_`而不是`_CS_`）：

```
SELECT COUNT(*) FROM dbo.foo 
  WHERE [key] = 'Bob';

----
1

SELECT COUNT(*) FROM dbo.foo 
  WHERE [key]  COLLATE SQL_Latin1_General_CP1_CI_AS = 'Bob';

----
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:50:42.453

绝对地。很大程度上取决于选择的 SQL Server 排序规则，其中一些区分大小写或不区分大小写。

[选择 SQL Server 排序规则](http://msdn.microsoft.com/en-us/library/ms144250%28v=sql.105%29.aspx)

# c# - 当父节点等于 LINQ to XML 中的特定值时如何选择子节点

> ID：10398589
> 
> 赞同：1
> 
> 时间：2012-05-01T13:46:46.840
> 
> 标签：c#, asp.net, xml, linq, robots.txt

我正在构建的应用程序的一部分需要从 XML 文档生成 robots.txt 文件。

我有这样的 XML：

```
<root>
  <Robots>
    <UserAgents>
      <UserAgent>*</UserAgent>
      <Disallow>
        <Item>/wibble/</Item>
        <Item>/wobble/</Item>
      </Disallow>
    </UserAgents>
    <UserAgents>
      <UserAgent>Google</UserAgent>
      <Disallow>
        <Item>/</Item>
      </Disallow>
    </UserAgents>
  </Robots>
</root> 
```

如何选择 UserAgent =“*”的“项目”？

换句话说，我只想在父节点等于某个值时选择子节点。父节点中的值将是唯一的。

我在 ASP.net 中使用 C#。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:50:31.653

听起来你想要这样的东西：

```
var query = from agent in doc.Descendants("UserAgent")
            where (string) agent == "*"
            from item in agent.Parent.Elements("Disallow").Elements("Item") 
            select item; 
```

请注意，第二个`from`仅用于展平结果，因此它不是序列序列。

或者：

```
var query = doc.Descendants("UserAgent")
               .Where(agent => (string) agent == "*")
               .SelectMany(agent => agent.Parent.Elements("Disallow")
                                                .Elements("Item")); 
```

或者通过将选中的“顶部”节点更改为`UserAgents`，可以避免父步骤：

```
var query = doc.Descendants("UserAgents")
               .Where(agents => (string) agents.Element("UserAgent") == "*")
               .SelectMany(agent => agent.Elements("Disallow").Elements("Item")); 
```

请注意，如果您`UserAgent`在单个元素下有多个元素，则不会给出相同的结果`UserAgents`。

（顺便说一句，你能改变 XML 模式吗？看起来你应该能够简化这个......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:50:07.563

```
var query = from x in doc.Root.Element("Robots").Elements("UserAgents")
            where (string)x.Element("UserAgent") == "*"
            from y in x.Element("Disallow").Elements("Item")
            select y; 
```

# vim - 如何在 vim 中使用 ctags？

> ID：10398590
> 
> 赞同：1
> 
> 时间：2012-05-01T13:46:48.983
> 
> 标签：vim, ctags

我在源代码目录中使用 ctags 创建了一个*标签*文件。现在，我如何在 vim 中使用它？如果我打开一个文件并在变量或函数名称上按 ctrl-]，vim 会说：*E426: tag not found: variable1*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:57:22.260

```
:set tags=/home/ptomblin/ctags,/usr/local/src/ctags 
```

你可以把它放在你的主 .vimrc 文件中。

# java - charAt 如何在此方法中反转输入？

> ID：10398592
> 
> 赞同：2
> 
> 时间：2012-05-01T13:47:03.573
> 
> 标签：java, methods

```
//method
public static String foo(String s)

{
if (s.length() == 1)

return s;

else

return foo(s.substring(1)) + s.charAt(0);
} 
```

foo(“abcd”) 的评估结果是什么？我的理解是这会反转输入，但这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:49:14.333

您在这里面临[递归](http://en.wikipedia.org/wiki/Recursion)！

递归的每一级都将第一个字符附加到末尾，并在字符串的后缀上调用递归调用。

在您的示例中，调用堆栈将如下所示：

```
s = "abcd" => append 'a' to the end, and invoke on "bcd".
s = "bcd" => append 'b' to the end, and invoke on "cd".
s = "cd" => append 'c' to the end, and invoke on "d".
s= = "d" => return "d" as it is. 
```

当您从递归返回时，实际上是以相反的顺序附加它：

```
return "d"
return "d" + 'c' (="dc")
return "dc" + 'b' (="dcb")
return "dcb" + 'a' (="dcba") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:51:18.290

希望这可以清楚地说明递归在这种情况下是如何工作的：

```
foo("bcd") + "a"
  (foo("cd") + "b") + "a"
    ((foo("d") + "c") + "b") + "a"
      (("d" + "c") + "b") + "a" -> "dcba" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T13:51:33.630

这是一个[*递归*](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)的逆向。`s.substring(1)`是没有第一个字符的行；`s.charAt(0)`是第一个字符。

该函数的意思是“如果该行是一个字符长，则答案是该行本身；否则，砍掉第一个字符，计算相同的函数，并将砍掉的字符添加到结果的末尾”。

您可以在一张纸上计算出执行上述步骤如何相当于反转字符串。

**编辑：**值得注意的是，如果您尝试向其传递一个空字符串，此实现将因异常而崩溃。更改`if (s.length() == 1)`为`if (s.length() == 0)`将解决此问题（感谢 Tom Hawtin - tackline 在评论中提到这一点）。

# css - 如何隐藏DIV后面的复选框

> ID：10398600
> 
> 赞同：0
> 
> 时间：2012-05-01T13:47:40.913
> 
> 标签：css, html, checkbox, hide, visibility

```
<div style="padding-top:5px; overflow:hidden; font-size:13px;">
    <div style="float:left;">
        <div style="background-color:blue; width:20px;">
            <input type="checkbox" id="rememberme" style="z-index:-1;" />
        </div>
    </div>
    <div style="float:left;">
        Remember Me
    </div>
    <div style="float:right;">
        <a href="" id="forgotpassword"> Forgot Password ? </a>
    </div>
</div> 
```

我想隐藏父 DIV 后面的复选框。

我尝试`VISIBILITY:HIDDEN;`了该复选框，但我想创建一个 jQuery 函数，我单击此复选框并且应该发生一些事情，但是当它被隐藏时它没有发生，当我再次显示它时，它起作用了，所以我不想使用`HIDDEN`，但我想把它放在 div 后面，所以它不会出现。

这段代码不起作用，我使用过`z-index=-1`，后来`z-index:20`对于父 DIV，它不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:50:01.190

您不需要隐藏 div 后面的复选框。

尝试`display:none;`在元素上使用：

```
#rememberme {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:17:47.260

是的，阿里，现在您可以自定义复选框，这里是示例[http://jsfiddle.net/chanduzalte/7rSug/3/](http://jsfiddle.net/chanduzalte/7rSug/3/)

# asp.net - 用于在 asp.net 中加载页面的全局 try-catch（本例中为 vb）

> ID：10398603
> 
> 赞同：0
> 
> 时间：2012-05-01T13:47:50.670
> 
> 标签：asp.net, vb.net, exception-handling

我得到了什么：

*   `SecureBasePage.vb`（由需要登录的页面继承）
*   `Default.aspx`继承`SecureBasePage`

应该是什么情况：客户端请求`Default.aspx`但由于他没有登录而被重定向到登录。

`SecureBasePage.vb`有这个构造函数

```
Public Sub ()
        If userIsAuthenticated Then

        Else
            Throw New LoginException()
        End If

End Sub 
```

这会导致异常`LoginException`。现在我想让它被某种全局异常处理程序捕获，该处理程序将客户端踢到`login.aspx`.

我知道有一个函数`Application_Error()`，`Global.asax`但在我看来这不是一个异常处理程序，因为它只接受`Server.GetLastError()`并且不捕获异常。所以这个功能更有可能是允许开发人员发送一封关于未处理异常的电子邮件。我将其称为“全局*未处理异常*处理程序”而不是“*全局异常处理程序*”。

有什么我可以尝试捕获的构造函数异常抛出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:09:10.520

由于所有需要登录的页面都将从`SecureBasePage`该类继承，因此在那里实现您的逻辑可能最有意义。只需覆盖其中一种页面方法，例如`OnLoad`或`OnPreLoad`来处理重定向。

我不建议依赖`global.asax`处理错误，所以你的基类可能是最合适的地方。

**编辑**

作为一般经验法则，您不应该使用异常来控制逻辑流。除非异常本身包含有用的日志信息，否则它的成本可能大于收益，尤其是对于几乎每个请求都会使用的逻辑。

本文就该主题提供了一些有用的建议：

*   [异常管理的最佳实践](http://www.c-sharpcorner.com/UploadFile/akrao/ExceptionManagement11142005020738AM/ExceptionManagement.aspx)

# r - 向量元素的递归操作

> ID：10398612
> 
> 赞同：4
> 
> 时间：2012-05-01T13:48:39.810
> 
> 标签：r

我有一个向量`a`，并希望将每个元素与 递归地相乘`b`，而不使用循环。

```
a <- rep(0, 10)
a[1] <- 1
b <- 2

# with a loop
for (i in 2:length(a)) a[i] <- a[i-1] * b 
```

我将不胜感激有关如何在不使用循环的情况下解决此问题的提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T14:25:51.603

通常，如果没有显式循环，您将无法执行此操作。在这种特定情况下，您可以使用以下提供的隐式循环`cumprod`：

```
a <- rep(2, 10)
a[1] <- 1
cumprod(a)
#  [1]   1   2   4   8  16  32  64 128 256 512 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T00:21:05.377

对于形式的一般递归系列：

```
y[i] = x[i] + f[1]*y[i-1] + ... + f[p]*y[i-p] 
```

您可以使用该`filter`功能。在您的情况下，您有`x[i] = 0`和for 。这转化为：`f[1] = 2``f[i] = 0``i > 1`

```
filter(rep(0,10), 2, method="recursive", init=1/2)
# Time Series:
# Start = 1 
# End = 10 
# Frequency = 1 
#  [1]   1   2   4   8  16  32  64 128 256 512 
```

在你学会了如何使用它之后，第一次并不总是很明显，`filter`它非常强大和高效。但是，对于您的几何案例来说，这可能是矫枉过正。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T23:57:39.197

指数函数`^`是矢量化的，所以很简单：

```
2^(0:9)
# [1]   1   2   4   8  16  32  64 128 256 512 
```

你可能还想写

```
2^seq(from=0, to=9) 
```

对于长向量，我很确定@JoshuaUlrich 的方法会快得多，但这个方法肯定非常紧凑。你还说你不是特别关心速度。

# objective-c - 多线程、采样和基本软件问题

> ID：10398618
> 
> 赞同：0
> 
> 时间：2012-05-01T13:49:00.890
> 
> 标签：objective-c, c, core-audio

在多次打扰你们之后，我正在和苹果公司的人交谈，我必须做出一个你可能比我更了解的决定。

我正在实时处理音频，读取缓冲区，DSP（FFT）并做出决定。我必须将该决定发送到主场景（或主线程），以并行执行操作。因此，获取音频缓冲区，并实时听取决策。

问题是：您不能放入音频回调函数、objC 函数或其他需要时间的东西，例如在做出决定时向其他类发布通知。

我已经尝试过的：

1.  将 NSNotification 放入该回调中以通知主线程有关新数据的信息——它会泄漏。

2.  将决定放在一个全局变量（单音）中，然后从主线程调度该变量 - 这似乎是一个坏主意（并且 NSTimer 不能低于 50 毫秒）。

3.  只需从回调调用另一个类中的另一个函数 - 在那里实现东西 - 导致泄漏 - 即使我只是 NSLOG 那里的东西。

4.  在另一个 objC 函数中创建另一个线程，从音频回调函数中调用它，仍然泄漏（这意味着 - 内存正在快速增长！）

找不到正确的方法来做到这一点。

对于想要查看回调函数（每秒调用 1000 次）的人

打回来 ：

```
static OSStatus recordingCallback(void *inRefCon, 
                                  AudioUnitRenderActionFlags *ioActionFlags, 
                                  const AudioTimeStamp *inTimeStamp, 
                                  UInt32 inBusNumber, 
                                  UInt32 inNumberFrames, 
                                  AudioBufferList *ioData) 
{

    AudioBuffer buffer;
    buffer.mNumberChannels = 1;
    buffer.mDataByteSize = inNumberFrames * 2; //* sizeof(SInt16) ?
    buffer.mData = NULL;// malloc( inNumberFrames * 2 );

    // Put buffer in a AudioBufferList
    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = buffer;

    OSStatus status;

    status = AudioUnitRender(audioUnit, 
                             ioActionFlags, 
                             inTimeStamp, 
                             inBusNumber, 
                             inNumberFrames, 
                             &bufferList); 

    SInt16 *targetBuffer = (SInt16*)(&bufferList)->mBuffers[0].mData;

// got the buffer, here i have tried so many things to do with it ,in order to not leak the app. i need to send it somewhere to process the data, or save it somewhere else.

   [globals sharedGlobals].bufBuf=targetBuffer;

    return noErr;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:01:13.293

UI 运行循环中的 NSTimer 将在 UI 可以更新时触发，因此如果决定由 UI 显示，只需在重复的计时器回调中轮询标志变量。如果另一个线程需要更频繁地更新某些内容，请在音频回调之外启动该线程，然后让该线程轮询或等待锁定。

# symfony - Symfony2.1 动态/扩展形式没有有效的附加部分

> ID：10398635
> 
> 赞同：0
> 
> 时间：2012-05-01T13:50:17.400
> 
> 标签：symfony

我确实使用了 symfony2.1，并且我有一种形式，我确实通过另一种形式进行了扩展，主要部分（来自第一个实体 [ `ToolCategory`]）确实有效，但附加的部分没有（`ToolDocument`）。这是代码：

工具类别

```
namespace Einder\Has\ToolsBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

use Einder\DoctrineBundle\Entity\ActiveInterface;

/**
 * Einder\Has\ToolsBundle\Entity\ToolCategory
 *
 * @ORM\Table(name="tool_category")
 * @ORM\Entity(repositoryClass="Einder\Has\ToolsBundle\Repository\ToolCategoryRepository")
 * @ORM\HasLifecycleCallbacks
 */
class ToolCategory implements ActiveInterface
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=255)
     * @Assert\NotBlank()
     */
    private $name;

    /**
     * @var text $target
     *
     * @ORM\Column(name="target", type="text")
     * @Assert\NotBlank()
     */
    private $target;

    /**
     * @var text $activity
     *
     * @ORM\Column(name="activity", type="text")
     * @Assert\NotBlank()
     */
    private $activity;

    /**
     * @var boolean $active
     *
     * @ORM\Column(name="active", type="boolean", nullable=true)
     */
    private $active = true;

    /**
     * @ORM\OneToMany(targetEntity="ToolDocument", mappedBy="toolCategory", cascade={"persist", "remove"})
     */
    private $documents;

    /**
     * @var boolean $createAnother
     *
     * @Assert\Type(type="boolean")
     */
    private $createAnother = false;

    /**
     * @var datetime $createdAt
     *
     * @ORM\Column(name="created_at", type="datetime")
     */
    private $createdAt;

    /**
     * @var datetime $updatedAt
     *
     * @ORM\Column(name="updated_at", type="datetime")
     */
    private $updatedAt;

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->documents = new ArrayCollection();
    }

    /**
     * __toString
     */
    public function __toString()
    {
        return $this->name;
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set target
     *
     * @param text $target
     */
    public function setTarget($target)
    {
        $this->target = $target;
    }

    /**
     * Get target
     *
     * @return text 
     */
    public function getTarget()
    {
        return $this->target;
    }

    /**
     * Set activity
     *
     * @param text $activity
     */
    public function setActivity($activity)
    {
        $this->activity = $activity;
    }

    /**
     * Get activity
     *
     * @return text 
     */
    public function getActivity()
    {
        return $this->activity;
    }

    /**
     * Set active
     *
     * @param boolean $active
     */
    public function setActive($active = true)
    {
        $this->active = $active;
    }

    /**
     * Get active
     *
     * @return boolean 
     */
    public function getActive()
    {
        return $this->active;
    }

    /**
     * Add documents
     *
     * @param Einder\Has\ToolsBundle\Entity\ToolDocument $documents
     */
    public function addToolDocument(\Einder\Has\ToolsBundle\Entity\ToolDocument $documents)
    {
        $this->documents[] = $documents;
    }

    /**
     * Get documents
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getDocuments()
    {
        return $this->documents;
    }

    /**
     * Set createAnother
     *
     * @param boolean $createAnother
     */
    public function setCreateAnother($createAnother)
    {
        $this->createAnother = $createAnother;
    }

    /**
     * Get createAnother
     *
     * @return boolean
     */
    public function getCreateAnother()
    {
        return $this->createAnother;
    }

    /**
     * Set createdAt
     *
     * @ORM\PrePersist 
     */
    public function setCreatedAt()
    {
        $this->createdAt = new \DateTime();
    }

    /**
     * Get createdAt
     *
     * @return datetime
     */
    public function getCreatedAt()
    {
        return $this->createdAt;
    }

    /**
     * Set updatedAt
     *
     * @ORM\PrePersist
     * @ORM\PreUpdate
     */
    public function setUpdatedAt()
    {
        $this->updatedAt = new \DateTime();
    }

    /**
     * Get updatedAt
     *
     * @return datetime
     */
    public function getUpdatedAt()
    {
        return $this->updatedAt;
    }

    public function setDocuments($documents) {
        $this->documents = $documents;

        foreach ($documents as $document) {
            $document->setToolCategory($this);
        }
    }
} 
```

工具文档

```
namespace Einder\Has\ToolsBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\HttpFoundation\File\UploadedFile;

use Einder\DoctrineBundle\Entity\EntityInterface;

/**
 * Einder\Has\ToolsBundle\Entity\ToolDocument
 *
 * @ORM\Table(name="tool_document")
 * @ORM\Entity(repositoryClass="Einder\Has\ToolsBundle\Repository\ToolDocumentRepository")
 * @ORM\HasLifecycleCallbacks
 */
class ToolDocument implements EntityInterface
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @Assert\File(maxSize="6000000")
     */
    public $file;

    /**
     * @ORM\Column(type="string", length=255)
     * @Assert\NotBlank()
     * @Assert\NotNull()
     * @Assert\MinLength(10)
     */
    private $name;

    /**
     * @ORM\Column(type="string", length=255, nullable=true)
     */
    private $path;

    /**
     * @var boolean $active
     *
     * @ORM\Column(name="active", type="boolean", nullable=true)
     */
    private $active = true;

    /**
     * @var boolean $deleted
     *
     * @ORM\Column(name="deleted", type="boolean", nullable=true)
     */
    private $deleted = false;

    /**
     * @var datetime $deletedAt
     *
     * @ORM\Column(name="deleted_at", type="boolean", nullable=true)
     */
    private $deletedAt;

    /**
     * @ORM\ManyToOne(targetEntity="ToolCategory", inversedBy="documents")
     * @ORM\JoinColumn(name="tool_category_id", referencedColumnName="id")
     */
    private $toolCategory;

    /**
     * @var datetime $createdAt
     *
     * @ORM\Column(name="created_at", type="datetime")
     */
    private $createdAt;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    public function __toString()
    {
        return $this->name;
    }

    public function getAbsolutePath()
    {
        return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->path;
    }

    public function getWebPath()
    {
        return null === $this->path ? null : $this->getUploadDir().'/'.$this->path;
    }

    protected function getUploadRootDir()
    {
        // the absolute directory path where uploaded documents should be saved
        return __DIR__.'/../../../../../web/'.$this->getUploadDir();
    }

    protected function getUploadDir()
    {
        // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
        return '/uploads/tools';
    }

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->file) {
            // do whatever you want to generate a unique name
           $this->setPath(uniqid() . '.' . pathinfo($this->file->getClientOriginalName(), PATHINFO_EXTENSION));
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        if (null === $this->file) {
            return;
        }

        // you must throw an exception here if the file cannot be moved
        // so that the entity is not persisted to the database
        // which the UploadedFile move() method does automatically
        $this->file->move($this->getUploadRootDir(), $this->path);

        unset($this->file);
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if ($file = $this->getAbsolutePath()) {
            unlink($file);
        }
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set path
     *
     * @param string $path
     */
    public function setPath($path)
    {
        $this->path = $path;
    }

    /**
     * Get path
     *
     * @return string 
     */
    public function getPath()
    {
        return $this->path;
    }

    /**
     * Set active
     *
     * @param boolean $active
     */
    public function setActive($active = true)
    {
        $this->active = $active;
    }

    /**
     * Get active
     *
     * @return boolean 
     */
    public function getActive()
    {
        return $this->active;
    }

    /**
     * Set deleted
     *
     * @param boolean $deleted
     */
    public function setDeleted($deleted = false)
    {
        $this->deleted = $deleted;
    }

    /**
     * Get deleted
     *
     * @return boolean 
     */
    public function getDeleted()
    {
        return $this->deleted;
    }

    /**
     * Get deletedAt
     *
     * @return datetime
     */
    public function getDeletedAt()
    {
        return $this->deletedAt;
    }

    /**
     * Set deletedAt
     *
     * @param boolean $deletedAt
     */
    public function setDeletedAt(\DateTime $deletedAt = null)
    {
        $this->deletedAt = $deletedAt;
    }

    /**
     * Set toolCategory
     *
     * @param Einder\Has\ToolsBundle\Entity\ToolCategory $toolCategory
     */
    public function setToolCategory($toolCategory)
    {
        $this->toolCategory = $toolCategory;
    }

    /**
     * Get toolCategory
     *
     * @return Einder\Has\ToolsBundle\Entity\ToolCategory 
     */
    public function getToolCategory()
    {
        return $this->toolCategory;
    }

    /**
     * Set createdAt
     *
     * @ORM\PrePersist 
     */
    public function setCreatedAt()
    {
        $this->createdAt = new \DateTime();
    }

    /**
     * Get createdAt
     *
     * @return datetime
     */
    public function getCreatedAt()
    {
        return $this->createdAt;
    }

    /**
     * Set updatedAt
     *
     * @ORM\PrePersist
     * @ORM\PreUpdate
     */
    public function setUpdatedAt()
    {
        $this->updatedAt = new \DateTime();
    }

    /**
     * Get updatedAt
     *
     * @return datetime
     */
    public function getUpdatedAt()
    {
        return $this->updatedAt;
    }
} 
```

工具类别类型

```
namespace Einder\Has\ToolsBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

use Einder\Has\ToolsBundle\Form\Type\ToolDocumentType;

class ToolCategoryType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
                ->add('name', null, array('label' => 'tool.category.form.labels.name'))
                ->add('target', null, array('label' => 'tool.category.form.labels.target'))
                ->add('activity', null, array('label' => 'tool.category.form.labels.activity'))
                ->add('createAnother', null, array('label' => 'tool.category.form.labels.create_another'))
                ->add('documents', 'collection', array(
                                        'by_reference'  => false,
                                        'type'          => new ToolDocumentType(),
                                        'allow_add'     => true,
                                        'allow_delete'  => true,
                                        'prototype'     => true,
                                        'error_bubbling' => true
                ));
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'Einder\Has\ToolsBundle\Entity\ToolCategory'
        );
    }

    public function getName()
    {
        return 'tool_category';
    }
} 
```

工具文档类型

```
namespace Einder\Has\ToolsBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ToolDocumentType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('name', null, array('label' => 'tool.document.form.labels.name'))
                ->add('file', null, array('label' => 'tool.document.form.labels.file'));
    }

    public function getDefaultOptions()
    {
        return array(
            'data_class' => 'Einder\Has\ToolsBundle\Entity\ToolDocument',
            'cascade_validation' => true,
        );
    }

    public function getName()
    {
        return 'tool_document';
    }
} 
```

> ```
> {{ form_errors(form) }}
> <form method="post" {{ form_enctype(form) }} novalidate>
> 
>     <table class="table table-striped">
>         <tbody>
>             <tr>
>                 <td>{{ form_label(form.name) }}</td>
>                 <td>{{ form_widget(form.name) }} {{ form_errors(form.name) }}</td>
>             </tr>
> 
>             <tr>
>                 <td>{{ form_label(form.target) }}</td>
>                 <td>{{ form_widget(form.target) }} {{ form_errors(form.target) }}</td>
>             </tr>
> 
>             <tr>
>                 <td>{{ form_label(form.activity) }}</td>
>                 <td>{{ form_widget(form.activity) }} {{ form_errors(form.activity) }}</td>
>             </tr>
> 
>             <tr id="tool_category_documents" data-prototype="{{ _self.widget_prototype(form.documents, 'Remove tag')|escape }}">
>                 <td>{{ form_label(form.documents) }}</td>
>                 <td id="widget-collection-holder">
>                     {% for row in form.documents %}
>                         {{ _self.widget_prototype(row) }}
>                     {% endfor %}
>                 </td>
>             </tr>
> 
>             <tr>
>                 <td><a class="jslink_add">{{ 'Add'|trans }}</a></td>
>                 <td></td>
>             </tr>
>         </tbody>
> 
>         <tfoot>
>             <tr>
>                 <td>{{ form_label(form.createAnother) }} {{ form_widget(form.createAnother) }} {{ form_errors(form.createAnother) }}</td>
>                 <td>
>                     <input type="submit" value="{{ 'admin.tools.categories.category.form.save'|trans }}" class="btn btn-success" />
>                     <a href="{{ path('admin_tools_index')}}" class="btn btn-danger">{{ 'global.action.cancel'}}</a>
>                 </td>
>             </tr>
>             <tr>
>                 <td>{{ form_rest(form) }}</td>
>                 <td></td>
>             </tr>
>         </tfoot>
>     </table>
> </form>
> 
> {% block javascripts %}
> <script type="text/javascript">
>     function add() {
>         var collectionHolder = $('#tool_category_documents');
>         var prototype = collectionHolder.attr('data-prototype');
>         console.log(collectionHolder);
>         form = prototype.replace(/__name__/g, $('#widget-collection-holder').children().length);
>         console.log($(form));
>         collectionHolder.find('#widget-collection-holder').append(form);
>     }
> 
>     function remove(object) {
>         $(object).parent().remove();
>     }
> 
>     $('a.jslink_add').live('click', function(event){
>         event.preventDefault();
>         add();
>     });
> 
>     $('a.jslink_remove').live('click', function(event){
>         event.preventDefault();
>         remove(this);
>     });
> </script>
> {% endblock %}
> 
> {% macro widget_prototype(widget) %}
>     {% if widget.get('prototype') %}
>         {% set form = widget.get('prototype') %}
>         {% set name = widget.get('prototype').get('name') %}
>     {% else %}
>         {% set form = widget %}
>         {% set name = widget.get('full_name') %}
>     {% endif %}
> 
>         <div class="widget-holder">{{ form_errors(form) }} {{ form_widget(form.name) }} {{ form_widget(form.file)}} <a href="#" class="jslink_remove">{{ 'Remove'|trans }}</a></div>
> {% endmacro %} 
> ```

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:56:47.303

你应该要么

*   对（首选解决方案）施加`@Assert\Valid`约束`ToolCategory::$documents`，或
*   设置*为父窗体*（即`cascade_validation`），而不是子`true`窗体*`ToolCategoryType`*

# jquery - jQuery Mobile - 标题不在第二页上呈现

> ID：10398636
> 
> 赞同：0
> 
> 时间：2012-05-01T13:50:18.330
> 
> 标签：jquery, mobile, header, rendering

请有人让我摆脱痛苦并告诉我为什么这不起作用？

我有一个简单的 2 页测试站点 - 每个页面都有一个标题和一个指向另一页面的链接 - 所以你可以从一个页面点击到下一个页面然后返回等等。

网站加载时一切看起来都很好 - 第 1 页显示有标题。单击按钮到第 2 页，页面加载，但标题未像第 1 页那样呈现。

我不认为我必须为如此简单的测试做任何特别的事情，但无法找出问题所在。

```
<!DOCTYPE html> 
<html> 
<head> 
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Mobile Test</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body> 
    <div data-role="page" id="pg_1">
        <div data-role="header" data-position="fixed">
            <h1>Page 1</h1>
        </div>
        <div data-role="content">
            <a data-role="button" data-rel="close" href="#pg_2">Goto Page 2</a>
        </div>
    </div>
    <div data-role="page" id="pg_2">
        <div data-role="header" data-position="fixed">
            <h1>Page 2</h1>
        </div>
        <div data-role="content">
            <a data-role="button" data-rel="close" href="#pg_1">Goto Page 1</a>
        </div>
    </div>
</body>
</html> 
```

我也尝试过使用 jQuery 1.7，但结果相同。

我一定是在做一些愚蠢的事情，但就是看不到。任何帮助都非常感谢。

问候尼莫

编辑：无法添加图片，因为我是新手，但可以在第 1 页和第 2 页看到他们在寻找我

```
http://i104.photobucket.com/albums/m186/Nymor/misc/jqm_t1-1.png
http://i104.photobucket.com/albums/m186/Nymor/misc/jqm_t1-2.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:14:58.957

您必须`data-rel="close"`从链接中删除。

这是解决方案：

```
<!DOCTYPE html> 
<html> 
<head> 
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Mobile Test</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head>
<body> 
    <div data-role="page" id="pg_1" data-position="fixed">
        <div data-role="header">
            <h1>Page 1</h1>
        </div>
        <div data-role="content">
            <p><a data-role="button" href="#pg_2">Goto Page 2</a></p>
        </div>
    </div>
    <div data-role="page" id="pg_2" data-position="fixed">
        <div data-role="header">
            <h1>Page 2</h1>
        </div>
        <div data-role="content">
            <p><a data-role="button" href="#pg_1">Goto Page 1</a></p>
        </div>
    </div>
</body>
</html> 
```

# php - 如何检查是否使用 jquery 设置了 PHP 会话？

> ID：10398644
> 
> 赞同：-5
> 
> 时间：2012-05-01T13:50:33.880
> 
> 标签：php, jquery, session

我有一个与 jquery 一起工作的 php 应用程序。我想检查用户会话在 js 函数中是否仍然可用。

如果设置了会话，或者没有设置，则返回 false。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:51:57.377

检查名为 cookie 是否`PHPSESSID`存在。

如果您更改了会话 cookie 的默认名称（在这种情况下，您只需检查您指定的 cookie 名称），或者会话 cookie 已设置为`httpOnly`（出于安全原因应该如此），这将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:54:12.760

多种方式，如果文件是 .php 分机。然后：

`var something = "<?php = $_SESSION['something'] ?>";`

如果您在`file_get_contents()`使用后打印文件`str_replace`

您还可以在 javascript 中检查 cookie，搜索`PHPSESSID`

# mysql - 除了通配符之外，在 mysql select 语句中使用星号 (*) 是什么意思？

> ID：10398647
> 
> 赞同：0
> 
> 时间：2012-05-01T13:50:45.153
> 
> 标签：mysql, select

我遇到了一个如下所示的 mysql 查询：

```
SELECT
   SUM(some_amount*(some_field!=90)*(some_date < '2011-04-22')) 
 , SUM(some_amount*(some_field =90)*(some_date < '2011-04-22')*(another_field IS NULL))
FROM 
   some_table 
```

在这种情况下，select 语句中的 * 是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:57:37.147

看起来`CAST()`对于布尔到整数的转换不是必需的。乘法用于将不需要的行的总和转换为 0（使用 boolean`true`可以转换为`1`和`false`的事实`0`）：

```
some_amount*(some_field!=90)*(some_date < '2011-04-22') 
```

如果`some_field == 90`或`some_date >= '2011-04-22'`，则相应的项将计算为 0，从而将整个表达式转换为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:52:44.040

这是一个乘法运算。

示例 2*3=6

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T13:52:51.573

这是一个标准的乘法运算符，

```
select 2 * 2 
```

= 4

:)

# asp.net-mvc - 是否可以使用 ASP.NET Membership 登录两个或多个？

> ID：10398652
> 
> 赞同：0
> 
> 时间：2012-05-01T13:50:55.253
> 
> 标签：asp.net-mvc, asp.net-mvc-3, login, asp.net-membership

注意：这是针对 MVC 3 **Intranet**应用程序的。是的，两个或更多用户**必须**能够同时登录。

我有一个应用程序需要两个或更多人同时在同一台计算机上登录到一个表单。一个人将登录做工作，另一个人将登录以确认/检查其中的一些工作。

会员可以处理吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:53:50.790

他们不能同时登录到同一个浏览器。就我个人而言，我从未见过可以让两个用户在同一个浏览器中同时登录的 Web 应用程序。我会采用更传统的工作流程。

您必须让第一个人登录、完成工作并注销。第一个用户所做的工作将进入第二个用户的队列。然后第二个用户将登录，从队列中选择工作流，确认/检查工作，然后注销。

# .net - 如何重新加载具有不同参数的表单？

> ID：10398654
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:50:58.880
> 
> 标签：.net, winforms, c++-cli, reload

所以我在 Windows 窗体和 C++ 中创建了一个应用程序，它打印出一段代码，你应该写，你认为它打印出来的，我已经成功地做到了，但现在我需要这样做，那里每个主题中至少有 2 段代码（数组，函数 uc）。这就是表格的样子：http: [//scr.hu/0qz/fk7nn](http://scr.hu/0qz/fk7nn)

所以基本上这种形式在调用时会得到两个变量 - 'id' 和 'step'

'id' - 在 CASE 运算符中用于选择主题。

'step' - 用于标记您所在的代码，因此如果我将参数称为 2 而不是 1，它将加载“ARRAYS 2/2”而不是“ARRAYS 1/2”的表单。

但是，我不知道如何在不重新加载的情况下“刷新”表单。我希望你明白我想要达到的目标，如果你有任何问题，我会尽快回答！提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T02:43:34.593

应该更改方法，以便您不会将两个值都传递到表单中。如果您要显示类似于向导的相关项目的表单，您可以只传递类别的 id，然后根据您所处的步骤使用集合来显示正确的项目。然后，此解决方案将适用于 n 个项目，并且不限于一个或两个项目。

# java-me - 对命令侦听器和新形式 J2ME 感到困惑

> ID：10398658
> 
> 赞同：3
> 
> 时间：2012-05-01T13:51:37.103
> 
> 标签：java-me, midp, lcdui

**编辑：** *我相信我需要帮助来获取我刚刚管理的列表中的选定元素
以显示一个新表单，但是我在查找适用
于源 3.0 的代码时遇到了很多麻烦。*

我一直在尝试制作一个允许用户选择日期然后
根据所选日期添加和删除事件的应用程序。到目前为止，我已经创建了第一个屏幕
，它是一个供用户选择的选项列表。
这些选项是：

*   选择日期
*   添加事件
*   删除事件
*   浏览活动

我遇到的问题是我无法理解如何根据
列表中的选定项目显示新表单。我找到了一个小教程，允许我添加一个
显示所选项目的命令侦听器，但我无法弄清楚它如何
在列表中选择项目，以及如何根据所选项目创建一个新表单？

到目前为止，这是我的代码。

```
 import javax.microedition.lcdui.Alert;
    import javax.microedition.lcdui.AlertType;
    import javax.microedition.lcdui.Command;
    import javax.microedition.lcdui.CommandListener;
    import javax.microedition.lcdui.Display;
    import javax.microedition.lcdui.Displayable;
    import javax.microedition.lcdui.List;
    import javax.microedition.lcdui.Form;
    import javax.microedition.midlet.MIDlet;

    public class mainMidlet extends MIDlet implements CommandListener {

      private Display display;
      private List list = new List("Please Select a Option", List.IMPLICIT);
      private Command select = new Command("Select", Command.SCREEN, 1);
      private Form form;
      Alert alert;

      public mainMidlet() {
        display = Display.getDisplay(this);   

        list.append("Select Date", null);
        list.append("Add Events", null);
        list.append("Remove Events", null);
        list.append("Browse Events", null);
        list.addCommand(select);
        list.setCommandListener(this);

      }

      public void startApp() {
        display.setCurrent(list);
      }

      public void pauseApp() {
      }

      public void destroyApp(boolean unconditional) {
      }

      public void commandAction(Command command, Displayable displayable) {
        if (command == List.SELECT_COMMAND) {
          String selection = list.getString(list.getSelectedIndex());
          alert = new Alert("Option Selected", selection, null, null);
          alert.setTimeout(Alert.FOREVER);
          alert.setType(AlertType.INFO);
          display.setCurrent(alert);
        } else if (command == select) {
          destroyApp(false);
          notifyDestroyed();
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:38:20.510

您可以添加多个表单并在它们之间切换

```
 public void commandAction(Command command, Displayable displayable) {
      if (displayable == list) {
          if (command == List.SELECT_COMMAND) {
              switch (list.getSelectedIndex()) {
                  case 0: // select date
                      display.setCurrent(someForm);
                      break;
                  case 1: //add events
                      display.setCurrent(someOtherForm);
                      break;
              }
          } else if (command == select) {
             destroyApp(false);
             notifyDestroyed();
          }
      }
      if (displayable == someForm) {
          //but it's better practice to make each form a different class implementing CommandListener and it's own commandAction. And leave the display public static in MIDlet class
          //...
      }
  } 
```

# mahout - 如何向购买了 N 件商品的用户推荐 K 件相似的商品？

> ID：10398664
> 
> 赞同：0
> 
> 时间：2012-05-01T13:52:38.407
> 
> 标签：mahout, recommendation-engine

假设用户从我的网站购买了 n 件商品；我需要一种算法或方法（也许使用 Mahout？如何？），以便我可以向用户推荐 k 个类似的项目。我没有用户评分。k 个推荐需要基于用户的购买历史（他的 n 个项目）。

项目有“名称”、“作者”、“关键词”等字段，我需要推荐最相似的项目。如果我同时添加用户评分会发生什么？我将如何考虑到这一点？

我已经阅读了 Mahout 文档，但它似乎总是需要某种评级。如果说到目前为止我只有几个客户，我将如何提供评级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:14:14.310

没有*完美*的方法来构建推荐器。

**没有用户评分的推荐** 根据关键词、姓名和作者计算item-item相似度。然后，您可以提出尚未见过的最相似的项目。由于项目不经常更改，您可以将相似度表存储在某处。

**带有用户评分的推荐** 如果您不想拥有用户评分，您还可以存储用户的查看历史记录。这导致“布尔”评级（只有“看到”和“未看到”）。通过这种伪评级，您可以生成具有用户相似性的推荐。看过类似事物的用户是相似的。

对于一些讲座，我强烈推荐你这本书[Mahout in Action](http://manning.com/owen/)。它包含很多关于如何使用 Mahout 的信息。

# java - 如何使我的 android 对话框全屏显示？

> ID：10398665
> 
> 赞同：5
> 
> 时间：2012-05-01T13:52:40.650
> 
> 标签：java, android, textview, scrollview, fullscreen

我已经尝试了所有我能找到的东西（在stackoverflow和网络上），但我无法将我的对话框设置为全屏。它有一个带有文本视图的滚动视图，当文本视图中没有太多文本时，滚动视图不是全屏的。即使没有太多可见的文本，如何强制它全屏显示？

我创建这样的对话框：

```
 final   TextView    box;
    final   Dialog      info    = new Dialog(cx);
    final   ScrollView  scroll;

    info.setContentView(R.layout.dialoginfo);
    info.setTitle("Info");
    info.setCancelable(true);
    info.getWindow().setFlags(LayoutParams.FLAG_FULLSCREEN, LayoutParams.FLAG_FULLSCREEN);

    scroll = ((ScrollView) info.findViewById(R.id.scrollviewinfo));
    scroll.setPersistentDrawingCache(ScrollView.PERSISTENT_NO_CACHE);
    scroll.setScrollbarFadingEnabled(false);
    box = (TextView) info.findViewById(R.id.infotext);
    box.setText(text);
    info.show(); 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/infolayout"
>

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/ImageView01"
        android:layout_weight="1.0"
        android:id="@+id/scrollviewinfo">

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:id="@+id/infolayout2">

            <TextView   android:layout_margin="5dip" android:layout_width="fill_parent" android:layout_height="wrap_content"
                android:id="@+id/infotext"
                android:textSize="8sp" 
                android:text=""/>

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:17:39.763

看起来您的 ScrollView 的高度设置为`wrap_content`，我首先尝试将其替换为`fill_parent`.

以下是一些可能对您有所帮助的其他资源：

[如何让 Dialog 样式的活动窗口填满屏幕？](https://stackoverflow.com/questions/1362723/how-can-i-get-a-dialog-style-activity-window-to-fill-the-screen)

我从来没有使用过这种`setFlags()`方法，所以这可能会给你同样的结果。基本上尝试更换

`info.getWindow().setFlags(LayoutParams.FLAG_FULLSCREEN, LayoutParams.FLAG_FULLSCREEN);`

和

`info.getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);`

或者，如果您想要更精确地控制高度，您可以创建布局参数的实例，如这里的第一个答案所述：

[如何使警报对话框填充 90% 的屏幕尺寸？](https://stackoverflow.com/questions/2306503/how-to-make-an-alert-dialog-fill-90-of-screen-size)

如果您想将其修改为略小于全屏，您也可以使用此代码获取屏幕尺寸。

```
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
int width = display.getWidth();
int height = display.getHeight(); 
```

还有很多其他方法可以获取当前屏幕尺寸，这只是一个示例。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:05:35.093

您是否尝试过将 ScrollView 的 layout_height 设置为“match_parent”（您也可以将 LinearLayout 设置为“match_parent”，尽管我认为没有必要）？我猜当没有太多文本时它会缩小，因为它设置为“wrap_content”。尝试这个：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/ImageView01"
    android:layout_weight="1.0"
    android:id="@+id/scrollviewinfo">          

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"             
        android:layout_height="match_parent"
        android:orientation="vertical"             
        android:id="@+id/infolayout2"> 
    ...
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T07:47:00.547

尝试将您的**对话框自定义布局**包装到**RelativeLayout**而不是线性布局。这对我有用。

# android - 为什么我的电池小部件会在一夜之间停止更新？

> ID：10398668
> 
> 赞同：1
> 
> 时间：2012-05-01T13:52:46.690
> 
> 标签：android, android-widget

我在市场上有一个小部件。我注意到，并且一直收到用户的报告，当手机在一夜之间充电时，我的电池小部件（显示电池充电状态、容量）不再更新。

不过，该过程仍在运行。这是我做错了吗？我无法在模拟器中复制它。

哎呀，如果有人想看看它，我已经在[github上找到了源代码。](http://github.com/tjsimmons/super-android-battery)

谢谢！

# android - Android：主机无法访问

> ID：10398671
> 
> 赞同：0
> 
> 时间：2012-05-01T13:53:01.750
> 
> 标签：android, android-emulator

我只是将以下代码作为普通的 java 类文件运行，status.isReachable(3000) 返回 true。

```
InetAddress status = InetAddress.getByName("android.com");

status.isReachable(3000); 
```

如果我从 Android 项目运行相同的代码，`status.isReachable(3000)`总是返回 false。为什么它返回错误？它会在模拟器中总是返回 false 吗？我也读过这篇文章 [why-inetaddress-getbyname-isreachable-works-on-device-but-not-on-the-eclipse][1]

到目前为止我做了什么：

-保留mainfest文件的权限

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission> 
```

-禁用我的防火墙。

- 从我的 PC ping android.com，主机可以访问

我这样做是为了检查首选项中的地址是死的还是活的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:57:41.313

我遇到了类似的问题，我的地图应用程序背景是灰色的（没有瓷砖）并且浏览器无法连接到互联网。

在 Eclipse 中，我转到 Run Configurations -> Target 并添加了“-dns-server XXXX”，之后一切正常。（显然 XXXX 是我的 DNS 服务器的 IP 地址）。

# c# - 如何使用正则表达式替换 C# 中的部分字符串？

> ID：10398672
> 
> 赞同：0
> 
> 时间：2012-05-01T13:53:04.007
> 
> 标签：c#, regex

我在 C# 和正则表达式方面没有什么经验，但我需要试试这个逻辑：

```
 string replacedText = Regex.Replace(
     "ssdf bonnets sdf sdf sdf ", 
     @"(?i)^(.+ )?(bonnet)(s?)( .+)?$", 
     "$1hood$3$4"
 ); 
```

上面的代码是对stackoverflow中问题的回答：

**在保持其余部分完好无损的同时更换部分字符串？** 而不是只检测单词（bonnet），我想替换多个值，例如，如果它找到“f”或“b”或“s”，它将被替换为“a”？

例如，如果输入“ahfbsdrts stb”，则输出将是“ahaaadrta ata”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:08:15.877

为什么不直接对 String.Replace 进行多次调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:51:33.200

我发布了另一个短代码选项。

请参阅[http://forums.asp.net/t/1185961.aspx/1](http://forums.asp.net/t/1185961.aspx/1)

就像是`string temp = Regex.Replace(input, @"[fbs]", "a");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:10:25.810

Try this:

```
using System;
using System.Text.RegularExpressions;

public class Example
{
 public static void Main()
 {
  string input = "ssdf bonnets sdf sdf sdf ";
  string pattern_1 = "f";
  string replacement = "a";
  Regex rgx_1 = new Regex(pattern_1);
  string result = rgx_1.Replace(input, replacement);
  string pattern_2 = "b";
  Regex rgx_2 = new Regex(pattern_2);
  result = rgx_2.Replace(result, replacement);
  string pattern_3 = "s";
  Regex rgx_3 = new Regex(pattern_3);
  result = rgx_3.Replace(result, replacement);
  Console.WriteLine("Original String: {0}", input);
  Console.WriteLine("Replacement String: {0}", result);                             
 }
} 
```

# php - 如何为多个文件上传输入字幕

> ID：10398675
> 
> 赞同：0
> 
> 时间：2012-05-01T13:53:08.833
> 
> 标签：php, image-uploading, caption

我有一个照片库，它被划分为相册，每个相册下都有许多照片。我上传多个文件没有问题，我缺少的是让用户输入标题的技术。

我想到了一些技巧，如果他们是正确的，或者如果有更好的方法可以告诉我，我希望有人帮助我选择其中一种。

1.  上传图片，然后让他们一一输入标题。
2.  只需取消上传多个文件的想法，让他们一张一张输入照片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-30T08:58:28.653

我希望你能回答我的问题，
好的，我已经设法让它工作了，或者至少我希望它是这样工作的。这是我的新修改。

这是我的`uploading.js`文件

```
 $(document).ready(function(){
        $.event.props.push('dataTransfer');
        var fileList = new Array();
        $("#droparea").bind('dragenter dragover', false).bind('drop', function(e){

            $.each(e.dataTransfer.files, function(index, file){
                fileList.push(file);
                var fileReader = new FileReader();
                fileReader.readAsDataURL(file);
                fileReader.onload = (function(e){

                    var form = document.createElement('form');
                    form.action = 'uploads';
                    form.className = 'forms';

                    var img = document.createElement('img');
                    img.src = e.target.result;
                    img.width = 80;

                    var label = document.createElement('label');
                    $(label).append('Image Caption');

                    var input = document.createElement('input');
                    input.type = "text";
                    input.name = "title";
                    input.value = "";

                    var button = document.createElement('button');
                    $(button).append('Upload');
                    $(form).append(img);    
                    $(form).append(input);              
                    $(form).append(button);             

                    $('#uploads').append(form);
                });
            });

            e.preventDefault();
            e.stopPropagation();

        });

        $('#upload-all').on('click', function(e){
          e.preventDefault();     
          var formData = new FormData($(this)[0]);    
          $('form').each(function(i){
           var title = $(this).find('input').val();
           formData.append('file[]', fileList[i]);
           formData.append('title[]', title);
        }); 

       upload(formData);
});

function upload(data) {

    var xhr = new XMLHttpRequest();
    xhr.open('post', 'upload.php', true);
    xhr.send(data);

}

        $(document).on('submit', 'form', function(e){
            e.preventDefault();
            //var index what does this do?
            var index = $(this).index();
            var formData = new FormData($(this)[0]);
            formData.append('file', fileList[index]);
            var xhr = new XMLHttpRequest();
            xhr.open('post', 'upload.php', true);
            xhr.send(formData);
        });
    }); 
```

我的上传模板文件是`.html`

```
<div id="droparea" class="droparea">
    Drop files here to upload
</div>
<div id="uploads">

</div>
<button id="upload-all">Upload All</button> 
```

# python - 从正则表达式中的字符串中准确提取四个整数

> ID：10398682
> 
> 赞同：-3
> 
> 时间：2012-05-01T13:53:57.750
> 
> 标签：python, regex

```
list1 = ['Contact: Hamdan Z Hamdan, MBBS, Msc',
        '\r\n            ',
        '+249912468264',
        '\r\n                  ',
        'hamdanology@hotmail.com',
        '\r\n                ',
        'Contact: Maha I Mohammed, MBBS, PhD',
        '\r\n            ',
        '+249912230895',
        '\r\n                  ',
        '\r\n                ',
        'Sudan',
        'Jaber abo aliz',
        '\r\n                  ',
        'Recruiting',
        '\r\n          ',
        'Khartoum, Sudan, 1111  ',
        u'Contact: Khaled H Bakheet, MD,PhD \xa0 \xa0 +249912957764 \xa0 \xa0 ',
        'khalid2_3456@yahoo.com',
        u' \xa0 \xa0 ',
        u'Principal Investigator: Hamdan Z Hamdan, MBBS,MSc \xa0 \xa0  \xa0 \xa0  \xa0 \xa0 ',
       'Principal Investigator:',
       '\r\n      ',
       'Hamdan Z Hamdan, MBBS, MSc',
       '\r\n            ',
        'Al-Neelain University',
        '\r\n                '
    ] 
```

从这个字符串列表中，我只需要提取不应与其他字符关联的 4 位整数吗？

示例：“1111”只是所需的输出。

我们应该如何在 python 中编写正则表达式？显然，这是行不通的：`*([\d]{4})*`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T13:59:52.867

您可以`\b`在正则表达式中使用来指示单词边界，因此以下内容对您有用：

```
import re

for s in list1:
    m = re.search(r'\b\d{4}\b', s)
    if m:
        print m.group(0) 
```

...它只是输出`1111`. 的[文档`\b`](http://docs.python.org/library/re.html)进一步解释：

> `\b`
> 
> 匹配空字符串，但只匹配单词的开头或结尾。单词被定义为字母数字或下划线字符的序列，因此单词的结尾由空格或非字母数字、非下划线字符表示。[...]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:00:05.500

您可以尝试以下方法

```
>>> [l for l in (re.findall(r"[^\d](\d{4})[^\d]",s) for s in list1) if l]
[['1111'], ['3456']] 
```

如果您只对字边界使用的四位数字感兴趣

```
>>> [l for l in (re.findall(r"\b\d{4}\b",s) for s in list1) if l]
[['1111']] 
```

# c - 期望 'struct netif *' 但参数的类型是 'struct netif *'

> ID：10398683
> 
> 赞同：3
> 
> 时间：2012-05-01T13:54:01.120
> 
> 标签：c

当我将 a`struct netif *`从函数范围（编译不会抱怨）声明到全局范围时，gcc 出现以下错误：

```
src/main.c:114:3: warning: passing argument 1 of 'low_level_init' from incompatible pointer type [enabled by default]
src/main.c:62:13: note: expected 'struct netif *' but argument is of type 'struct netif *' 
```

为什么编译器会给出以下“无意义”的抱怨？

`expected 'stuct netif *' but argument is of type 'struct netif *'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:08:30.983

这个“完整程序”

```
void foonetif(struct netif *dst) {
  if (dst) return;
  return;
}

struct netif {
  double bar;
};

int main(void) {
  struct netif *netif = 0; /* NULL */
  foonetif(netif);
  return 0;
} 
```

`gcc 10398683.c`从（gcc 版本 4.6.3）生成此输出，因此使用所有默认选项

```
10398683.c:1:22：警告：在参数列表中声明的“struct netif”[默认启用]
10398683.c:1:22：警告：它的作用域只是这个定义或声明，这可能不是你想要的[默认启用]
10398683.c：在函数“主”中：
10398683.c:12:3：警告：从不兼容的指针类型传递“newnetif”的参数 1 [默认启用]
10398683.c:1:6：注意：预期为“struct netif *”，但参数的类型为“struct netif *”

```

注意最后一个警告（真的是一个注释）:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:45:14.293

问题是范围。第一个`struct netif`在函数参数列表的范围内，并在该函数结束后超出范围。第二个`struct netif`是在一个新的范围内定义的。因此，这些是具有不同标签的不同结构类型，这些标签恰好具有相同的名称。就像`int i;`and`int i;`在两个不同的函数中是碰巧具有相同名称的不同变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T19:14:06.847

一个有趣的问题；我自己也犯了这个罪；[主要是由于涉及对无辜内存块的可疑类型强制转换的可怕黑客攻击](https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule)。

这个答案实际上只是[R 的](https://stackoverflow.com/users/379897/r)答案的必然结果，这几乎解决了这个问题（尽管我不太确定这`and goes out of scope after that function ends..`一点）

对我来说，关键是阅读：
（1）[ISO C99 6.7.2](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)：

> 如果它们的类型相同，则两种类型具有兼容的类型。用于确定两种类型是否兼容的附加规则在 6.7.2 中针对类型说明符、在 6.7.3 中针对类型限定符以及在 6.7.5 中针对声明符进行了描述。46) 此外，两个结构、联合或枚举类型分别声明如果翻译单元的标签和成员满足以下要求，则翻译单元是兼容的：如果一个用标签声明，另一个应该用相同的标签声明。...

(2) [C 命名空间](http://www.dmst.aueb.gr/dds/cscout/doc/name.html)

无论如何，这里有一些代码（~几个翻译单元），希望为那些以前没有遇到过这个问题的人展示一些可能*令人惊讶的行为：*

废话.c：

```
#include <stdio.h>

struct bar  {int a; int b;} stbar; 
struct bar_ {int a; int d;} stbar_; 

void foo(struct bar* pst);
void foo_(struct bar st);

void callfoo() 
{ 
    /*no warnings; possibly surprising results ! */
    stbar.a=313;
    stbar.b=31313;
    foo(&stbar);
    printf("called foo() with stbar:  %d, %d\n", stbar.a, stbar.b);

    /*generates incompatible types warnings:
    blah.c:23:5: warning: passing argument 1 of ‘foo’ from incompatible pointer type [enabled by default]
    blah.c:6:6: note: expected ‘struct bar *’ but argument is of type ‘struct bar_ *’    */
    stbar_.a=313;
    stbar_.d=31313;
    foo(&stbar_);
    printf("called foo() with stbar_: %d, %d\n", stbar_.a, stbar_.d);

    /*generates incompatible types warnings:
    blah.c:31:5: warning: passing argument 1 of ‘foo’ from incompatible pointer type [enabled by default]
    blah.c:6:6: note: expected ‘struct bar *’ but argument is of type ‘struct bar *’      */
    struct bar  {float s; float t;} stbar; 
    foo(&stbar);
    printf("called foo() with locally defined stbar:  %f, %f\n", stbar.s, stbar.t);    
}

void callfoo_()
{
    stbar.a=313;
    stbar.b=31313;

    //passing in incompatible type by value ~ no warnings; possibly surprising results ! 
    foo_(stbar); 

    /*uncomenting next line generates compiler error: 
    blah.c:47:5: error: incompatible type for argument 1 of ‘foo_’
    blah.c:7:6: note: expected ‘struct bar’ but argument is of type ‘struct bar_’     */
    //foo_(stbar_); 
}

void main() 
{
    callfoo();
    callfoo_();
} 
```

废话_.c：

```
#include <stdio.h>

struct bar {int x; float z;} stbar; 

void foo(struct bar* pst)
{
    printf("foo : %d, %f\n", pst->x, pst->z);
    pst->x=13;
    pst->z=13.13;
}

void foo_(struct bar st)
{
    printf("foo_ : %d, %f\n", st.x, st.z);
    st.x=13;
    st.z=13.13;
} 
```

输出：

```
$ gcc  blah.c blah_.c
blah.c: In function ‘callfoo’:
blah.c:23:5: warning: passing argument 1 of ‘foo’ from incompatible pointer type [enabled by default]
blah.c:6:6: note: expected ‘struct bar *’ but argument is of type ‘struct bar_ *’
blah.c:31:5: warning: passing argument 1 of ‘foo’ from incompatible pointer type [enabled by default]
blah.c:6:6: note: expected ‘struct bar *’ but argument is of type ‘struct bar *’

$ ./a.out
foo : 313, 0.000000
called foo() with stbar:  13, 1095898235
foo : 313, 0.000000
called foo() with stbar_: 13, 1095898235
foo : 13274075, 0.000000
called foo() with locally defined stbar:  0.000000, 13.130000
foo_ : 313, 0.000000

$ gcc --version
gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1 ... 
```

推论的推论：赞美神为C++ `namespace`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T14:33:16.617

您的“完整程序”不会编译。

struct netif 没有在使用它的 foonetif 之前声明。尝试在第一次使用之前移动结构定义。

# c# - 从 linq 查询中解析 bool

> ID：10398686
> 
> 赞同：1
> 
> 时间：2012-05-01T13:54:14.757
> 
> 标签：c#, linq

我有`OnHomePage`一个布尔属性。

我正在尝试根据是否从 linq 查询返回结果来设置此值。显然，我可以编写一个外部方法来确定我的查询结果是 null 还是它是否包含一个值，但我希望有一种更好的方法可以在一行中完成。

这是我当前的代码行：

```
OnHomePage = im.PageImages.Select(p => p.ImageId == im.Id 
                                      && p.Page.PageName == "/Home") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T13:55:51.887

您可以使用[Any Extension Method](http://msdn.microsoft.com/en-us/library/bb337697.aspx)来确定查询是否给出任何结果：

```
OnHomePage = im.PageImages.Any(p => p.ImageId == im.Id 
                                   && p.Page.PageName == "/Home"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:55:51.337

您应该简单地用以下方式结束查询[`.Any`](http://msdn.microsoft.com/en-us/library/bb337697.aspx)：

```
OnHomePage = im.PageImages.Where(p => p.ImageId == im.Id 
                                  && p.Page.PageName == "/Home")
                          .Any(); 
```

或者，首先直接使用另一个重载`Any`：

```
OnHomePage = im.PageImages.Any(p => p.ImageId == im.Id 
                                  && p.Page.PageName == "/Home"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T13:55:58.297

```
OnHomePage = im.PageImages.Where(p => p.ImageId == 
  im.Id && p.Page.PageName == "/Home").Any(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T14:11:14.047

As said other users you can use [`Any()`](http://msdn.microsoft.com/en-us/library/bb337697.aspx):

```
OnHomePage = im.PageImages.Any(p => p.ImageId == im.Id 
                                      && p.Page.PageName == "/Home"); 
```

Or another solution could be use [`Exists()`](http://msdn.microsoft.com/en-us/library/bfed8bca.aspx):

```
OnHomePage = im.PageImages.ToList().Exists(p => p.ImageId == im.Id 
                                          && p.Page.PageName == "/Home"); 
```

[Here](https://stackoverflow.com/questions/879391/linq-any-vs-exists-whats-the-difference) is an interesting answer explain the differences.

**PS:**

> In behaviour, these are identical.

# javascript - （tryMS）在ajax HttpRequest中

> ID：10398690
> 
> 赞同：0
> 
> 时间：2012-05-01T13:54:30.793
> 
> 标签：javascript, ajax

在下面的ajax请求中，有人可以解释一下（tryMS）

```
function createRequest() {
  try {
    request = new XMLHttpRequest();
  } catch (tryMS) {
    try {
      request = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (otherMS) {
      try {
        request = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (failed) {
        request = null;
      }
    }
  } 
  return request;
} 
```

(tryMS) 和 (otherMS) 是 javascript 的一部分，还是只是代码中使用的常见参数，它们有特定的功能吗？如果它是一个参数，它的价值来自哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:57:19.730

Internet Explorer 没有 xhr `XmlHttpRequest`- 他们有自己的对象。此代码试图与浏览器无关；即无论使用何种浏览器都试图工作。该`createRequest`方法尝试创建一个`XMLHttpRequest`. 如果失败，它会尝试创建第一个`ActiveXObject`. 如果失败，它会退回到下一个活动的 x 对象。

> (tryMS) 和 (otherMS) 是 javascript 的一部分，还是只是代码中使用的常见参数，它们有特定的功能吗？如果它是一个参数，它的价值来自哪里。

`try/catch`语句将错误传递给 catch 块。So `tryMS`and `otherMS`and`failed`都只是对描述错误的字符串的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:59:38.933

在这种情况下，`tryMS`and`otherMS`只是变量名。您可以用任何有效的变量名称替换它们，并且逻辑将完全相同。在这种情况下，它们将在运行时表示的对象是它们的子类，`Exception`因为它们在 try-catch 语句的 catch 子句中使用。

您可以在此处阅读有关[try-catch-finally 的更多信息。](http://www.javascriptkit.com/javatutors/trycatch.shtml)

我不同意这里使用的命名约定，但变量名称本质上是描述基于所使用浏览器的控制流。例如，如果创建一个`XMLHttpRequest`对象导致引发异常，那么我们应该尝试使用 Microsoft 浏览器的 AJAX 技术`ActiveXObject`- 因此命名为`tryMS`.

# mysql - SQL-Server-2008 中的正则表达式

> ID：10398691
> 
> 赞同：1
> 
> 时间：2012-05-01T13:54:31.370
> 
> 标签：mysql, regex, sql-server-2008, migration

我尝试从 MYSQL 迁移到 SQL Server 2008，但我有一个小问题。

我有这个查询：

```
SELECT SUM(duree) AS 'TotDuree'
FROM `mp3s`
WHERE `dirname` REGEXP CONVERT(_utf8 '$container_dir' USING latin1) 
```

当我尝试更改它时，我总是遇到 REGEXP 的问题。我对此进行了一些搜索，有人说我们不能在 SQL Server 2008 中使用 REGEXP。

我试图找到另一种方法来做到这一点，但我没有成功。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:22:10.063

你可以看看[**`PATINDEX`**](http://msdn.microsoft.com/en-us/library/ms188395.aspx)。另请参阅这些[相关](https://stackoverflow.com/questions/194652/sql-server-regular-expressions-in-t-sql) [问题](https://stackoverflow.com/questions/267921/regular-expressions-in-sql-server-servers)。

# android - Android将光标从一个EditText移动到另一个？

> ID：10398692
> 
> 赞同：2
> 
> 时间：2012-05-01T13:54:44.473
> 
> 标签：android, cursor, android-edittext, cursor-position

我知道这类问题问了很多次。但仍然没有人对此给出完美的答案。

我有问题 ：

我想从**EditText1 ** 移动到另一个 **EditText2** 。我已经检测到editText1但是如何将光标移动到editText2。？

简而言之，我必须将光标位置从一个 editText1 直接移动到另一个 EditText2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T09:15:05.727

我遇到了此类问题，并找到了如下解决方案。

这里我有两个 editText ，

如果我按“a”，我的光标将移动到下一步。我用下面的代码来做这件事。

```
 final EditText editText = (EditText) findViewById(R.id.editText1);

       editText.setOnKeyListener(new OnKeyListener() {

            @Override
            public boolean onKey(View v , int keyCode , KeyEvent event) {

                  EditText editText2 = (EditText) findViewById(R.id.editText2);

                // TODO Auto-generated method stub
                if (keyCode == event.KEYCODE_A) {

                    Selection.setSelection((Editable) editText2.getText(),editText.getSelectionStart());
                    editText2.requestFocus();
                }

                return true;
            }
        }); 
```

如果您对此有任何错误，请告诉我。如果我的回答对您有帮助，请采纳并点赞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-03T13:48:03.323

为此，您需要做的就是...将以下两个属性添加到 xml 中的 EditText 标记，除了最后一个 EditText（如果您也将它添加到最后一个 EditText，那么光标控件将再次转到第一个EditText 当您从键盘按 enter/next 时）

`<EditText . . android:singleLine="true" android:imeOptions="actionNext" . . />`

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T14:01:28.777

这是一个工作示例，希望对您有所帮助。

XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <EditText 
        android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Some string of text"
        />

    <EditText 
        android:id="@android:id/text2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Some string of text"
        />

    <Button 
        android:id="@android:id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Button"
        />

</LinearLayout> 
```

班级：

```
public class Example extends Activity {
    TextView text1;
    TextView text2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        text1 = (EditText) findViewById(android.R.id.text1);
        text2 = (EditText) findViewById(android.R.id.text2);
        Button button = (Button) findViewById(android.R.id.button1);

        button.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {
                Selection.setSelection((Editable) text2.getText(), text1.getSelectionStart());
                text2.requestFocus();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T05:15:34.390

设置 onKeyListener 以检测按下每个键时按下的键检查您的条件以及何时满足您的条件 set edittext property edittext2.requestFocus();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T08:12:43.413

我已经测试了所有以前的代码段，发现一切正常。但我发现使用正确的edittext对象调用“requestFocus()”也可以。根据问题，答案可以是：

edittext2.requestFocus();

这对我来说很好。如果我错了，请纠正我。

# javascript - 将仪表板面板放置在空闲空间中的算法

> ID：10398693
> 
> 赞同：2
> 
> 时间：2012-05-01T13:54:49.233
> 
> 标签：javascript, algorithm, user-interface, dashboard

我正在开发一个门户/仪表板类型的界面，它具有可以在仪表板空间中自由拖动的面板/小部件，只要它们不覆盖任何其他面板。可以通过包含所有可用面板的菜单将新面板添加到仪表板，当单击菜单项时，面板将被放置到仪表板中。当前占据仪表板空间的面板都表示在一个对象中，如下所示：

```
{
    'panel_1': { top: 0, left: 0, width: 300, height: 350 },
    'panel_2': { top: 0, left: 370, width: 200, height: 275 },
    'panel_3': { top: 370, left: 0, width: 275, height: 400 },
    ...
} 
```

我的问题是，什么是有效的算法，当用户单击菜单中的一个时，它会正确地将一个新面板（具有给定宽度和高度）放置在最靠近左侧和顶部（x 和 y）的未占用空间中值 0、0，不重叠任何现有面板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:34:57.730

我认为，简单的蛮力算法会适合你。我记得，适合矩形解决了另一个问题

遍历仪表板轴以找出是否可以放置矩形，直到`X < rectangle.widh + dashboard.width`，对于 Y。

仪表板上的 Foreach X,Y 遍历每个面板以查找它们是否重叠。您可以应用一些优化，以减少迭代量。如果面板重叠矩形，您可以增加 X 或 Y（在嵌套循环中）不是 1，而是面板的宽度或高度。

在大多数情况下，您不会进行`dashboard.width*dashboard.height*panel.count`迭代。通过一些优化，它会很快找到最合适的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T00:31:58.953

我知道这是一个老问题，但如果有人想要概念证明，那么它看起来像这样：

```
function findSpace(width, height) {
    var $ul = $('.snap-layout>ul');
    var widthOfContainer = $ul.width();
    var heightOfContainer = $ul.height();
    var $lis = $ul.children('.setup-widget'); // The li is on the page and we dont want it to collide with itself

    for (var y = 0; y < heightOfContainer - height + 1; y++) {
        var heightOfShortestInRow = 1;
        for (var x = 0; x < widthOfContainer - width + 1; x++) {
            //console.log(x + '/' + y);
            var pos = { 'left': x, 'top': y };
            var $collider = $(isOverlapping($lis, pos, width, height));
            if ($collider.length == 0) {
                // Found a space
                return pos;
            }

            var colliderPos = $collider.position();
            // We have collided with something, there is no point testing the points within this widget so lets skip them
            var newX = colliderPos.left + $collider.width() - 1; // -1 to account for the ++ in the for loop
            x = newX > x ? newX : x; // Make sure that we are not some how going backwards and looping forever

            var colliderBottom = colliderPos.top + $collider.height();
            if (heightOfShortestInRow == 1 || colliderBottom - y < heightOfShortestInRow) {
                heightOfShortestInRow = colliderBottom - y; // This isn't actually the height its just the distance from y to the bottom of the widget, y is normally at the top of the widget tho
            }
        }
        y += heightOfShortestInRow - 1;
    }

    //TODO: Add the widget to the bottom
}

function isOverlapping($obsticles, tAxis, width, height) {
    var t_x, t_y;
    if (typeof (width) == 'undefined') {
        // Existing element passed in
        var $target = $(tAxis);
        tAxis = $target.position();
        t_x = [tAxis.left, tAxis.left + $target.outerWidth()];
        t_y = [tAxis.top, tAxis.top + $target.outerHeight()];
    } else {
        // Coordinates and dimensions passed in
        t_x = [tAxis.left, tAxis.left + width];
        t_y = [tAxis.top, tAxis.top + height];
    }

    var overlap = false;

    $obsticles.each(function () {
        var $this = $(this);
        var thisPos = $this.position();
        var i_x = [thisPos.left, thisPos.left + $this.outerWidth()]
        var i_y = [thisPos.top, thisPos.top + $this.outerHeight()];

        if (t_x[0] < i_x[1] && t_x[1] > i_x[0] &&
             t_y[0] < i_y[1] && t_y[1] > i_y[0]) {
            overlap = this;
            return false;
        }
    });
    return overlap;
} 
```

# haskell - Haskell - 计算列表中每个不同元素出现的次数

> ID：10398698
> 
> 赞同：17
> 
> 时间：2012-05-01T13:55:06.503
> 
> 标签：haskell

我是 Haskell 的新手，我只是想写一个列表理解来计算列表中每个不同值的频率，但我在最后一部分遇到了麻烦。

到目前为止，我有这个：

```
frequency :: Eq a => [a] -> [(Int,a)] 
frequency list = [(count y list,y) | y <- rmdups ] 
```

涉及 rmdups 的最后一部分有问题。

count 函数接受一个字符，然后是一个字符列表，并告诉您该字符出现的频率，代码如下。

```
count :: Eq a => a -> [a] -> Int
count x [] = 0
count x (y:ys) | x==y = 1+(count x ys)
               | otherwise = count x ys 
```

先感谢您。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-14T07:17:52.727

您还可以在计算频率时使用关联数组/有限映射来存储从列表元素到它们的计数的关联：

```
import Data.Map (fromListWith, toList)

frequency :: (Ord a) => [a] -> [(a, Int)]
frequency xs = toList (fromListWith (+) [(x, 1) | x <- xs]) 
```

示例用法：

```
> frequency "hello world"
[(' ',1),('d',1),('e',1),('h',1),('l',3),('o',2),('r',1),('w',1)] 
```

[`fromListWith`](http://hackage.haskell.org/package/containers-0.5.5.0/docs/Data-Map-Lazy.html#v%3afromListWith)请参阅和的文档[`toList`](http://hackage.haskell.org/package/containers-0.5.5.0/docs/Data-Map-Lazy.html#v%3atoList)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-01T14:08:22.860

我不得不使用`Ord`in 而不是`Eq`因为使用`sort`

```
frequency :: Ord a => [a] -> [(Int,a)] 
frequency list = map (\l -> (length l, head l)) (group (sort list)) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-14T23:46:45.043

根据要求，这是使用的解决方案`Control.Arrow`：

```
frequency :: Ord a => [a] -> [(Int,a)] 
frequency = map (length &&& head) . group . sort 
```

这与**ThePestest**的答案相同，除了

```
λ f g l -> (f l, g l) 
```

被替换为

```
-- simplified type signature
(&&&) :: (a -> b) -> (a -> c) -> a -> (b, c) 
```

从`Control.Arrow`. 如果你想避免导入，

```
liftA2 (,) :: Applicative f => f a -> f b -> f (a, b) 
```

也可以（使用 Applicative 实例`(->) r`）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-01T14:12:10.143

Assuming `rmdups` has the type

```
rmdups :: Eq a => [a] -> [a] 
```

Then you're missing a parameter for it.

```
frequency :: Eq a => [a] -> [(Int,a)] 
frequency list = [(count y list,y) | y <- rmdups list] 
```

But the error you're getting would be helpful with diagnosis.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T14:02:17.327

您的`rmdups`功能只是`nub`来自`Data.List`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-14T06:55:11.597

替换`rmdups` 为`nub list`我工作就像一个魅力。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-06T13:23:59.980

哈哈哈哈哈哈`rmdups`pg上有。Graham Hutton**在 Haskell**中编程的第 86篇。它是完美的和递归的。它在很多情况下也很方便。

这是我的一条线`rmdups`，它产生的结果与`nub`赫顿的相同。

```
rmdups ls = [d|(z,d)<- zip [0..] ls,notElem d $ take z ls] 
```

它可以很好地用于计算列表的不同元素。

```
dl = "minimum-maximum"
[ (d,sum [1|x<-dl,d == x]) | d<-rmdups dl] 
```

[('m',6),('i',3),('n',1),('u',2),('-',1),('a',1),( 'x',1)]

# php - 使用标题和描述的组合框搜索 XML

> ID：10398710
> 
> 赞同：1
> 
> 时间：2012-05-01T13:55:35.003
> 
> 标签：php, html, xml, forms, search

您好，我正在尝试使用组合框搜索 XML 文档，以便用户可以搜索描述或标题。我已将 XML 文件加载到我希望在其上显示搜索的页面。其自身的搜索框附加到 top.php 文档。我试图存储变量并将它们应用于 XML 搜索字符串。我收到以下错误，但不确定如何继续。

警告：SimpleXMLElement::xpath() [simplexmlelement.xpath]：第 19 行 /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11034582/public_html/web/searchResults.php 中的表达式无效

警告：在第 22 行的 /var/www/vhosts/numyspace.co.uk/web_users/home/~unn_w11034582/public_html/web/searchResults.php 中为 foreach() 提供的参数无效

搜索结果.php

```
 <?php
include "top.php";
$holidaysXML = simplexml_load_file('holidays.xml');

if(isset($_POST["txtSearch"]) && $_POST["txtSearch"] != "Holiday Search..." && $_POST["txtSearch"] !="")
    {
        $txtSearch = $_POST["txtSearch"];
        $searchOption = $_POST["searchOption"];
        if($_POST["searchOption"] != "null")
        {
            $searchOption = $_POST["searchOption"];
            $searchedResult = "Search results for \"$txtSearch\" in $searchOption";
            $resultsHoliday = "channel/item [contains($searchOption, \"$txtSearch\")]";
        }

    }
    $allHolidays = $holidaysXML->xpath($resultsHoliday);

            foreach ($allHolidays as $currentHoliday) 
            {

                        echo "<a href= \"{$currentHoliday->link}\" style=\"font-weight:normal\" target=\"_blank\">{$currentHoliday->title}</a><br>";
                        echo "{$currentHoliday->pubDate}<br>";
                        echo "{$currentHoliday->description}";
            }

This is where the information is gathered from the user on top.php

    <form action = "searchResults.php" method = "post">
                    <input type = "text" name = "txtSearch" value = "Holiday Search...">
                       <select name = "searchOption">
                       <option value = "null" selected>(select)</option>
                       <option value = "title">Title</option>
                       <option value = "description">Description</option>
                       </select>
                    <input type = "submit" name = "search" value = "Search">
                </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:15:10.610

您看到的第一个问题是由于。

```
Holidays = $holidaysXML->xpath($searchedResult); 
```

应该：

```
Holidays = $holidaysXML->xpath($resultsHoliday); 
```

`$resultsHoliday`保存您的 xpath 查询的变量也是如此。

# php - 从字符串的开头删除，当它变得很长（聊天）php

> ID：10398711
> 
> 赞同：0
> 
> 时间：2012-05-01T13:55:35.613
> 
> 标签：php, iphone, mysql, sql-server, phpmyadmin

我想不通这个。问题很简单。我有一个聊天应用程序，不希望发送长时间的聊天对话。因此，当对话变得很长（可能有 20 条消息）时，第一条消息开始被删除。

我将对话保存在 phpmyadmin 的文本字段中，并使用这种格式（^ 和 &）来确定谁是发件人以及消息是什么：

```
^John&Hi
^Linda&Hi, how are you? 
^John&All good! You? 
^Linda&Same 
```

更新：

```
 $query = mysql_query("UPDATE conversations SET chat= CONCAT(COALESCE(chat,''), '$sendMessage') WHERE conversations='$id'"); 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:57:23.723

将您的对话解析为一个数组，并且只使用前 n 个项目。

或者更好的是，将所有聊天条目（单独）放入一个表中。

# .net - 等待 WebBrowser 在多个 Navigate() 调用之间完全加载

> ID：10398725
> 
> 赞同：0
> 
> 时间：2012-05-01T13:56:29.643
> 
> 标签：.net, wpf, vb.net, user-controls, webbrowser-control

我正在冒险进入 WPF - 第一次在 (VB).NET 中 - 并尝试重新创建我在 MS Access VBA 中开始的项目。它基本上是在 Web 应用程序中抓取一系列页面。正如您可能已经猜到的那样，我在 LoadCompleted 事件中遇到了麻烦。

我已经搜索并找到了一些关于它的信息，但是代码的“流程”只适合等待一页加载。例如：

[http://social.msdn.microsoft.com/Forums/nn-NO/wpf/thread/52c1bc55-dd41-468c-8759-a42726635d4b](http://social.msdn.microsoft.com/Forums/nn-NO/wpf/thread/52c1bc55-dd41-468c-8759-a42726635d4b)

所有代码执行都在 DocumentLoaded 事件中运行，当您只需要导航到一页并执行代码时，该事件就可以正常工作。但是我需要为我的应用程序执行一系列这些循环。

如何可靠地等待文档完全加载，同时仍将代码执行保持在同一个 Sub 中并且不锁定 UI 线程？

这是我正在尝试做的基本想法。

1.  导航到页面
2.  等待页面完全加载
3.  做东西
4.  导航到页面
5.  冲洗，重复

PS - .NET 对我来说很新，所以请不要让我的大脑出现堆栈溢出；）

谢谢，布赖恩

**-＃＃ 编辑 ＃＃-**

这就是我在 VBA 中所做的。这正是我想要做的，只是以“.NET”的方式并且不阻塞 UI 线程：

```
Dim oIE = New SHDocVw.InternetExplorer

        With oIE
            .Navigate(strURL)
            .Visible = False

           ' loop until the page finishes loading
           Do While oIE.Busy : Loop
           Do While oIE.ReadyState <> 4 : Loop

           'Code goes here to read DOM, get fields and click a button (logging in to site)
           'My code execution is done and now I'm ready to go to the next page and read the DOM

           .Navigate(strURL)

        End With 
```

. . . .

就是这样。重复*n*次。我与每个 DOM 的交互有很大不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:14:07.727

我会在处理程序`Navigate`结束时再次调用`LoadCompleted`。然后，我猜，使用窗口范围的变量来跟踪您的目标 URL。

```
List<string> _urls;
int _i = 0;
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    _urls = new List<string>() { url1, url2, url3 };    // URLs to navigate
    webBrowser1.LoadCompleted += webBrowser1_LoadCompleted;
    webBrowser1.Navigate(_urls[_i]);
}
void webBrowser1_LoadCompleted(object sender, NavigationEventArgs e)
{
    // do stuff

    i++;
    var nextUrl = _urls[i];
    webBrowser1.Navigate(nextUrl);
} 
```

**编辑**

也许像这样的东西会更合适。在每个循环之后，您可以设置下一个 URL 及其处理程序。

```
class NavIteration
{
    public string Url { get; set; }
    public delegate void HandleResult(object sender, NavigationEventArgs e);
    public HandleResult ResultHandler { get; set; }
}

NavIteration CurrentIteration;

void setNextIteration()
{
    CurrentIteration = null;
    CurrentIteration = new NavIteration() { 
        Url = someurl, 
        ResultHandler = (sender, e) => {
            // handle
        }
    };
}

private void Window_Loaded(object sender, RoutedEventArgs e)
{
    webBrowser1.LoadCompleted += webBrowser1_LoadCompleted;
    setNextIteration();
    webBrowser1.Navigate();
}

void webBrowser1_LoadCompleted(object sender, NavigationEventArgs e)
{
    CurrentIteration.ResultHandler(sender, e);
    setNextIteration();
    webBrowser1.Navigate(CurrentIteration.Url);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T00:33:18.780

也许我很遥远，但我会在`BackGroundWorker`. 让主线程除了查找页面之外什么都不做。如果“do stuff”比 find 慢，那么下一个找到油门。

您是否考虑过 WebClient 下载到 String 或 Byte 数组然后转换为 DOM。IE中有你需要的东西吗？

# java - 在 main 中退出函数

> ID：10398732
> 
> 赞同：6
> 
> 时间：2012-05-01T13:56:40.417
> 
> 标签：java, return, exit-code

我对 Stackoverflow 和 Java 比较陌生，但我对 C 语言有一点经验。我喜欢 C 在“exit()”函数出现故障后退出程序的非常干净的方式。

我在 Java 中发现了一个类似的函数 System.exit()，它与 ​​C 函数有什么不同，我什么时候应该最好使用“System.exit()”而不是像 void main 函数那样在 Java 中使用简单的“返回”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T13:57:55.977

`System.exit()`将终止为此程序初始化的 jvm，其中`return;`只是将当前方法的控制权返回给调用者

* * *

**另见**

*   [我们什么时候应该调用系统退出java？](https://stackoverflow.com/questions/3715967/when-should-we-call-system-exit-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:08:57.057

`System.exit()`无论谁调用它或为什么调用它，都会退出程序。`return`在主要将退出`main()`但不会杀死任何调用它的东西。对于简单的程序，没有区别。如果您想从另一个函数（可能正在进行性能测量或错误处理）调用您的 main 函数，这很重要。您的第三个选择是抛出一个未捕获的运行时异常。这将允许您从调用堆栈的深处退出程序，允许任何调用您的 main 的外部代码以编程方式拦截和处理退出，并在退出时为用户提供错误的上下文和位置（如反对像 2) 这样的退出状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T14:04:42.300

`System.exit()`当您准备好根据用户（即 GUI 应用程序）的条件终止程序时，可能会很方便。 `return`用于返回程序执行的最后一点。两者是*非常*不同的操作。

# asp.net-mvc-3 - 我可以在 MVC3 基本控制器上为 ViewResults 设置默认布局吗？

> ID：10398734
> 
> 赞同：1
> 
> 时间：2012-05-01T13:56:50.090
> 
> 标签：asp.net-mvc-3

如果我有一个基本控制器，例如 StaffBaseController，我可以使返回的任何 ViewResult 结果具有默认布局页面吗？例如 StaffLayout.cshtml。我知道我可以使用文件夹结构中的 _viewstart 文件来设置默认布局。只是想知道我是否可以在我的基本控制器类上设置它。

如果是这样，我该怎么做？在某些情况下是否可以覆盖默认值？

谢谢

格雷姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:02:00.260

油脂，

你可以在你的基本控制器中尝试这样的事情（这是从一个 aspx 项目中获取的，但应该可以针对剃须刀进行调整）：

```
protected override ViewResult View(string viewName, string masterName, 
    object model)
{

    // we share some views that aren't partialviews
    // therefore, we have to ensure that the Shareholder view
    // is ALWAYS attached to the logged in user if they aren't an admin user
    bool userIsAdmin = IsAuthorised(new[] { "Admin" });

    if (!userIsAdmin && !string.IsNullOrEmpty(
        ControllerContext.HttpContext.User.Identity.Name))
    {
        masterName = "Shareholder";
    }

    return base.View(viewName, masterName, model);
} 
```

因此在该示例中，如果用户不是管理员用户，则最初定义的主模板名称 (Site.Master) 值将更改为“股东”(Shareholder.Master)。

# java - java - 如何在Java中的Jlabels中显示字符串标记器结果

> ID：10398735
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:56:53.270
> 
> 标签：java, swing, jlabel

如何将`StringTokenizer`对象的结果显示到`JLabel`s 中？标记这个后，我的标记很少：`test1$test2$test3$`

```
StringTokenizer tokenizer = new StringTokenizer(str, "$");

while(tokenizer.hasMoreTokens()){
    System.out.println(tokenizer.nextToken());
} 
```

，这导致

```
test1
test2
test3 
```

我希望每个标记在`JLabel`滚动面板上都不同。此处标记化后的结果计数为 3，但它可以更改，因此可以为 5、20 或 25。如何动态执行？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:12:36.897

将代币放入 a`ArrayList`并提供给用户 a [`JList`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html)。有关更多详细信息，请参阅[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)。例如

![JList 演示。](../Images/c6fc2cbe3e7d97122b9a9ba4b98a4c0a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:02:16.110

```
ArrayList<JLabel> labels = new ArrayList<JLabel>();
StringTokenizer tokenizer = new StringTokenizer(str, "$");

while(tokenizer.hasMoreTokens()){
 labels.add(new JLabel(tokenizer.nextToken()));
}

JPanel p = new JPanel();
for(int =0; i<labels.size(); i++)
{
 p.add(labels.get(i));
}
... 
```

[有关Java Swing 的初学者指南，](http://www.ibm.com/developerworks/java/tutorials/j-intswing/)请参见此处。

# c++ - 如何在 wxWidgets 的功能区中获取切换按钮的状态？

> ID：10398738
> 
> 赞同：0
> 
> 时间：2012-05-01T13:57:16.957
> 
> 标签：c++, toggle, wxwidgets, ribbon, togglebutton

我正在使用 C++ 在 Windows 平台中使用 wxWidgets 构建 UI。我在功能区中有一个切换按钮。我按如下方式初始化按钮：

```
m_cell_bar->AddToggleButton(RIBBON_CELLSELECTMODE, wxT("Cell Select"), wxBitmap(selectcell_xpm), wxEmptyString); 
```

为了实现使用切换按钮的目的，我需要从 unchecked->checked 和 checked->unchecked 事件中分配不同的事件。如果它是一个普通的切换按钮，我会使用：

```
buttonid->GetValue() 
```

但它不是.. 那么我怎样才能达到这个状态呢？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:20:24.967

看起来他们没有提供一种方法来获取按钮的选中状态（我正在使用 2.9.2）。但是看起来您可以使用这样的代码来获取它（我没有尝试过，只是查看了 wx 代码）：

```
wxRibbonButtonBarButtonBase* button = m_cell_bar->AddToggleButton(RIBBON_CELLSELECTMODE, wxT("Cell Select"), wxBitmap(selectcell_xpm), wxEmptyString);
// Store the "button" pointer for use later
// ...
// Sometime later
if((button->state & wxRIBBON_BUTTONBAR_BUTTON_TOGGLED) == 0)
{
    // Not checked
}
else
{
    // Checked
} 
```

# git - git 会在提交对象中存储差异信息吗？

> ID：10398744
> 
> 赞同：54
> 
> 时间：2012-05-01T13:57:39.143
> 
> 标签：git, diff

据此：[_](http://schacon.github.io/gitbook/1_the_git_object_model.html)

> 需要注意的是，这与您可能熟悉的大多数 SCM 系统非常不同。Subversion、CVS、Perforce、Mercurial 等都使用 Delta 存储系统——它们存储一个提交和下一个提交之间的差异。Git 不会这样做 - 它会在您每次提交时存储项目中所有文件在此树结构中的样子的快照。这是使用 Git 时要理解的一个非常重要的概念。

然而当我跑`git show $SHA1ofCommitObject`...

```
commit 4405aa474fff8247607d0bf599e054173da84113
Author: Joe Smoe <joe.smoe@example.com>
Date:   Tue May 1 08:48:21 2012 -0500

    First commit

diff --git a/index.html b/index.html
new file mode 100644
index 0000000..de8b69b
--- /dev/null
+++ b/index.html
@@ -0,0 +1 @@
+<h1>Hello World!</h1>
diff --git a/interests/chess.html b/interests/chess.html
new file mode 100644
index 0000000..e5be7dd
--- /dev/null
+++ b/interests/chess.html
@@ -0,0 +1 @@
+Did you see on Slashdot that King's Gambit accepted is solved! <a href="http://game 
```

...它输出提交与先前提交的差异。我知道 git 不会将差异存储在 blob 对象中，但它是否将差异存储在提交对象中？还是`git show`动态计算差异？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2014-07-30T04:16:50.107

该声明的意思是，大多数其他版本控制系统需要过去的参考点才能重新创建当前提交。

例如，在过去的某个时候，基于差异的 VCS（版本控制系统）会存储完整的快照：

```
x = snapshot
+ = diff
History:
x-----+-----+-----+-----(+) Where we are now 
```

因此，在这种情况下，要在 (now) 重新创建状态，它必须检查 (x)，然后为每个 (+) 应用差异，直到它到达现在。请注意，永久存储 delta 的效率极低，因此基于 delta 的 VCS 每隔一段时间就会存储一个完整的快照。[这是 subversion 的完成方式](http://svn.apache.org/repos/asf/subversion/branches/master-passphrase/notes/skip-deltas)。

现在，git 不一样了。Git 存储对完整 blob 的引用，这意味着使用 git，**只需一次提交就足以在该时间点重新创建代码库**。Git 不需要从过去的修订中查找信息来创建快照。

那么如果是这样的话，那么 git 使用的 delta 压缩是从哪里来的呢？

好吧，它只不过是一个压缩概念——如果只有很小的一部分发生了变化，那么将相同的信息存储两次是没有意义的。因此，表示已更改的内容，但存储对它的引用，以便它所属的提交（实际上是引用树）仍然可以重新创建而无需查看过去的提交。但问题是，Git 不会在每次提交后立即执行此操作，而是在垃圾收集运行时执行此操作。所以，如果 git 没有运行它的垃圾收集，你可以在索引中看到具有非常相似内容的对象。

However, when Git runs its garbage collection (or when you call `git gc` manually), then the duplicates are cleaned up and a read only pack file is created. You don't have to worry about running garbage collection manually - git contains heuristics which tell it when to do so.

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-05-01T14:10:04.780

不，git 中的提交对象不包含差异 - 相反，每个提交对象都包含树的哈希，它递归且完整地定义了该提交时源树的内容。git community book 中有一个[很好的解释，说明了](https://book.git-scm.com/book/en/v2/Git-Internals-Git-Objects)blob objects、tree objects 和 commit objects 的内容。

git 工具向您显示的所有差异都是根据文件的完整内容按需计算的。

# llvm - LLVM 3.0 中是否有结构类型同构检查？

> ID：10398746
> 
> 赞同：4
> 
> 时间：2012-05-01T13:57:43.397
> 
> 标签：llvm, llvm-3.0

在 LLVM-3.0 中，命名结构始终是唯一的，并且与其他结构相同的结构的指针相等不起作用。从他们[关于 LLVM-3.0 types 的博客条目中](http://blog.llvm.org/2011/11/llvm-30-type-system-rewrite.html)，亮点是我的：

> 已识别的结构就是我们所说的那种：它们可以有一个名称，并且可以在创建类型之后指定它们的主体。**识别的结构与其他结构类型不唯一**，这就是为什么它们是用 StructType::create(...) 生成的。因为标识的类型可能是递归的，所以 asmprinter 总是按它们的名称打印它们（如果标识的结构没有名称，则打印类似 %42 的数字）。

这通过类型指针检查打破了类型相等检查。例如，haskell 包[llvm](http://hackage.haskell.org/package/llvm)依赖于 llvm 类型指针相等，用于编译时类型检查和类型转换。

有什么方法可以检查两个结构是否同构（相同的结构）？最好在 llvm-c api 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:03:53.983

在 C++ API 中，[StructType](http://llvm.org/docs/doxygen/html/classllvm_1_1StructType.html)类具有

```
bool StructType::isLayoutIdentical(StructType *Other) const 
```

此函数遍历 StructTypes 的元素以查看它们是否相等。

# android - MySQL 数据库连接速度极慢

> ID：10398747
> 
> 赞同：0
> 
> 时间：2012-05-01T13:57:46.147
> 
> 标签：android, mysql, database, jdbc

我正在为 android 开发一个应用程序，我使用 JDBC 连接器与 MySQL 服务器直接连接。最初我使用最旧的 JDBC 连接器，因为它被推荐，但我无法使用该连接器执行过程 CALLS 语句，所以我切换到最新的（5.1.19 JDBC 连接器）。在这里执行这些查询是可能的，但是与服务器的连接非常慢（大约 15 秒，而最旧的连接器大约需要 2-3 秒）。这是我的连接代码：

```
 Class.forName("com.mysql.jdbc.Driver");
        connect = DriverManager
                .getConnection("jdbc:mysql://00.00.00.00/dbname"
                        ,"user" ,"pass");
        if (connect != null){
            System.out.println("CONNECTION SUCCEED"); 
```

由于您看到的安全原因，连接字符串中的 ip 和其他值是不同的。有任何想法吗？非常感谢帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:00:09.620

您应该使用与您的 MySQL 版本兼容的 JDBC 驱动程序。

我建议汇集您的数据库连接。通过这种方式，创建一个的成本将分摊到您的所有请求中。

# jpa-2.0 - EclipseLink JPA CriteriaBuilder 生成了无效的 SQL 语法

> ID：10398748
> 
> 赞同：0
> 
> 时间：2012-05-01T13:57:50.360
> 
> 标签：jpa-2.0, eclipselink, criteria-api

我有两个对象，都定义为实体，一个包含另一个如下：

```
@Entity
public class TestC 
{
    @Id @GeneratedValue
    private Integer id;
    @ManyToOne (cascade = {CascadeType.PERSIST, CascadeType.MERGE} )
    TestD d;
} 

@Entity
public class TestD 
{
    @Id @GeneratedValue
    private Integer id;
    String moo;
} 
```

实体被持久化：

```
TestC c2 = new TestC();
TestD d2 = new TestD();
d2.moo = "d2";
c2.d = d2;
em.getTransaction().begin();
em.persist(d2);
em.persist(c2);
em.getTransaction().commit(); 
```

我正在尝试使用 TestD 的实例查询 TestC 对象：

```
CriteriaBuilder builder = em.getCriteriaBuilder();
CriteriaQuery<TestC> query = builder.createQuery(TestC.class);
Root<TestC> from = query.from(TestC.class);

ParameterExpression<TestD> pe = builder.parameter(TestD.class);

query.where(builder.equal(pe, from.<TestD>get("d")));

TestC found = em.createQuery(query)
    .setParameter(pe, d2)
    .getSingleResult(); 
```

但是EclipseLink在运行查询时会出现以下错误（注意“（？=）”附近的SQL无效，TestD对象没有列名）：

```
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: Invalid argument value: java.io.NotSerializableException
Error Code: 0
Call: SELECT t1.ID, t1.D_ID FROM TESTD t0, TESTC t1 WHERE ((? = ) AND (t0.ID = t1.D_ID))
bind => [1 parameter bound]
Query: ReadAllQuery(referenceClass=TestC sql="SELECT t1.ID, t1.D_ID FROM TESTD t0, TESTC t1 WHERE ((? = ) AND (t0.ID = t1.D_ID))") 
```

我构建查询错误吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:39:11.310

它没有记录在[JavaDoc](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#equal%28javax.persistence.criteria.Expression,%20javax.persistence.criteria.Expression%29)中，但 ParameterExpression 应该是第二个参数。*顺序遵循与equal(Expression x, java.lang.Object y)*相同的逻辑。此外，您需要*.select*。EclipseLink（至少 2.3.0）也可以在没有的情况下工作，但根据规范将选择/多选排除在外是不可移植的：

> *便携式应用程序应该使用 select 或 multiselect 方法来指定查询的选择列表。不使用这些方法之一的应用程序将不可移植。*

在这些更改之后，正确的方法是：

```
CriteriaQuery<TestC> query = builder.createQuery(TestC.class);
Root<TestC> from = query.from(TestC.class);

ParameterExpression<TestD> pe = builder.parameter(TestD.class);
query.select(from)
     .where(builder.equal(from.<TestD>get("d"), pe));

TestC found = em.createQuery(query)
                .setParameter(pe, d)
                .getSingleResult(); 
```

# c# - 合并 IDictionary - 还有比这更有效的方法吗？

> ID：10398751
> 
> 赞同：1
> 
> 时间：2012-05-01T13:58:11.383
> 
> 标签：c#, performance

我有一个助手，它通过连接's方法将两个或多个`IDictionary<TKey, TValue>`对象合并为一个，如下所示：`IDictionary<TKey, string>``TValue``ToString()`

```
public class DictionaryHelper<TKey, TValue>
{
    public static IDictionary<TKey, string> MergeDictionaries<TKey, TValue>(params IDictionary<TKey, TValue>[] dictionaries) where TValue : class
    {
        var returnValue = new Dictionary<TKey, string>();
        foreach (var dictionary in dictionaries)
        {
            foreach (var kvp in dictionary)
            {
                if (returnValue.ContainsKey(kvp.Key))
                {
                    returnValue[kvp.Key] += kvp.Value.ToString();
                }
                else
                {
                    returnValue[kvp.Key] = kvp.Value.ToString();
                }
            }
        }
        return returnValue;
    }

} 
```

虽然这很简单而且很容易阅读，但似乎应该有一种更有效的方法来做到这一点。有没有？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T14:07:33.980

我不知道这是否更有效，但至少它更短：

```
var result = dictionaries.SelectMany(d => d)
                         .ToLookup(kvp => kvp.Key, kvp => kvp.Value)
                         .ToDictionary(g => g.Key, g => string.Concat(g)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:06:11.543

您可以删除*可见* `foreach`的`SelectMany`：

```
foreach (var kvp in dictionaries.SelectMany(dd => dd))
{
    if (returnValue.ContainsKey(kvp.Key))
    {
        returnValue[kvp.Key] += kvp.Value.ToString();
    }
    else
    {
        returnValue[kvp.Key] = kvp.Value.ToString();
    }
} 
```

你可以进一步扩展它，[尽管 dtb 更加优雅和高效](https://stackoverflow.com/a/10398861/7116)：

```
var merged = dictionaries.SelectMany(dd => dd)
                         .GroupBy(kvp => kvp.Key, kvp => kvp.Value)
                         .ToDictionary(
                             gg => gg.Key,
                             gg => String.Concat(gg)); 
```

但是，这不太可能比您当前的方法更有效或更易读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:01:11.967

您可以使用[TryGetValue](http://msdn.microsoft.com/en-us/library/bb299639.aspx)来合并源值的位置和检索。

# objective-c - iOS 5 - 标签内的图像？

> ID：10398752
> 
> 赞同：2
> 
> 时间：2012-05-01T13:58:19.737
> 
> 标签：objective-c, ios, ios5

我确信对此会有一个简单的答案，但我无法确定，因为我还是 iOS/Objective C 的新手。

我有一个表格视图，其中包含一些我用自定义标签填充的单元格。我知道如何用诸如此类的东西填充标签

```
label.font
label.text
etc 
```

但是如何将图像放入标签中？理想情况下，我需要找到一个循环，让我在一个标签中放置多个图像（如星级 - 有些会有 1 星，其他 3 星等）。

帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:06:01.520

```
UILabel * tLable = [[UILabel alloc]init];
tLable setFrame:CGRectMake(<#CGFloat x#>, <#CGFloat y#>, <#CGFloat width#>, <#CGFloat height#>)];
for (int t = 0 ; t< numImages; t++) {
        UIImageView * image = [UIImageView alloc]initWithFrame:CGRectMake(<#CGFloat x#>, <#CGFloat y#>, <#CGFloat width#>, <#CGFloat height#>)];
        [image setImage:[UIImage imageNamed:<#(NSString *)#>]];
        [tLable addSubview:image];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:00:28.870

要使用自定义图像，请使用 a`UIImageView`并将其添加为单元格或标签的子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:07:55.323

简短的回答：你不能。该类`UILabel`不支持图像。要实现您正在寻找的内容，将需要您构建一个自定义视图，该视图可以是一系列`UIImageViews`.

有多种方法可以实现这一目标：

1.  创建一个带有空视图的 NIB 文件，并在其中布局您的图像。在您的方法中加载它的一个实例`cellForRowAtIndexPath:`并将其添加到单元格中的适当位置。
2.  创建一个派生自`UIView`. 覆盖该`initWithFrame`方法并在该方法中创建、定位和添加`UIImageView`实例。公开一些允许您在外部设置图像内容的属性。
3.  创建一个用于设备的类`UITableCellView`并对其进行适当的配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T14:01:34.237

为了将实际图像放入 UILabel 将非常复杂，并且需要您继承 uilabel 并覆盖 drawrect 方法。相反，我会在您想要图像的单元格中添加一个 uiimageview

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T14:01:57.597

您需要使用 UIImageView 而不是标签内的图像。

# c++ - XML获取节点的属性值

> ID：10398755
> 
> 赞同：0
> 
> 时间：2012-05-01T13:58:40.057
> 
> 标签：c++, xml, xmldom

我在 C++ 中使用 XML DOM API 来解析 XML 文件。我找不到任何方法来获取节点元素中的属性值。

例如，在下面的 xml

```
<test>
<fruit count="10">
...
...
</fruit>
<test> 
```

我需要使用 XML API 获取计数字符串（“10”）。任何人都可以帮助我提供一些代码片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-21T07:30:35.177

使用 DOM Parser API 获取属性值计数。

请参考以下示例代码：

```
//code to perform some process for parsing the input file and get rootElement

DOMNodeList* fruitNodes= rootElement->getElementsByTagName(XMLString::transcode("fruit"));

DOMNode* node = fruitNodes->item(0);

DOMElement* fruitElement = dynamic_cast <xercesc::DOMElement*>(node);

const XMLCh* attrValue = fruitElement->getAttribute(XMLString::transcode("count")); 
```

您可以使用以下方法从 attrValue 获得值 10：`string(XMLString::transcode(attrValue))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:20:46.843

基于[http://msdn.microsoft.com/en-us/library/windows/desktop/ms754523(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms754523(v=vs.85).aspx)

尝试类似：

```
pXMLDomNodeList = pXMLDocElement->selectNodes("/test/fruit/@count"); 
```

# dependency-injection - 无法使用 StructureMap 解析 WebApi 控制器依赖项

> ID：10398757
> 
> 赞同：0
> 
> 时间：2012-05-01T13:59:00.373
> 
> 标签：dependency-injection, structuremap, asp.net-web-api

我目前正在将 StructureMap 与 MVC 一起使用，但它抱怨我的 api 控制器没有默认构造函数。有人可以指出我正确的方向以便使用 StructureMap 进行设置吗？据我了解，MVC 和 WebApi 具有单独的解析器（这是有道理的，因为它们是单独的框架）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:21:02.563

我在[这里](http://byterot.blogspot.co.uk/2012/04/aspnet-web-api-series-part-4-dependency.html)为 AutoFac 完成了它。应该给你足够的指针来自己实现它。

# android - 某些 Android 手机无法打开自定义文件扩展名

> ID：10398758
> 
> 赞同：4
> 
> 时间：2012-05-01T13:59:03.213
> 
> 标签：android, mime-types, email-attachments, intentfilter

我有一个应用程序，它通过电子邮件发送具有自定义文件扩展名的文件，这些文件基本上只是加密的 xml 文件。我的应用程序有一个意图过滤器来打开这些，它适用于我的特定手机（Samsung Galazy S Mesmerize），但是当我尝试在其他一些手机（Electrify、Thunderbolt 等）上打开带有自定义文件扩展名的附件时，它说没有任何东西可以打开该文件。（顺便说一句，正在尝试的手机确实安装了我的应用程序）。

这是我的意图过滤器：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <data android:scheme="file" />
  <data android:mimeType="*/*" />
  <data android:pathPattern=".*\\.tgtp" />   
  <data android:host="*" />
</intent-filter> 
```

我能做些什么来确保所有安卓手机在安装了我的应用程序后都能打开我的自定义文件扩展名？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T15:29:13.933

I guess it depends on the path the files are located at on your other devices. I found that the `pathPattern` attribute in the intent filter is very sensitive to the full path of the file.

Take a look at the following answer for a similar question: [https://stackoverflow.com/a/7102838/624109](https://stackoverflow.com/a/7102838/624109)

Basically, you need to have several `pathPattern` attributes that will most likely capture the location of your file.

Another thing is that I think that even if you use local files, you still need to have the `port` attribute.

These two changes are what made it work for me after hours of digging around.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T17:28:16.863

即使开发人员文档说它会是一样的，我相信它不是：

尝试将所有<data ...> 属性放在同一个元素中，即只有一个<data>。

拥有一个以上的 <data> 仅用于使用其他 URI 或 MIME 类型扩大过滤器...

# mongodb - 超过 16,000,000 字节 + mongoDB + ruby 的最大插入大小

> ID：10398760
> 
> 赞同：1
> 
> 时间：2012-05-01T13:59:16.190
> 
> 标签：mongodb, mongoid

我有一个应用程序，我使用 mongodb 作为数据库来存储记录我正在使用的 mongodb 的 ruby​​ 包装器是 mongoid

现在一切正常，直到我遇到上述错误

**超过 16,000,000 字节的最大插入大小**

可以指出如何摆脱错误。

我正在运行一个没有配置文件的 mongodb 服务器（mongodb 源文件没有提供配置）

谁能帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:07:23.787

您已达到 MongoDB 中单个文档的最大限制。如果您在 MongoDB 中保存大型数据文件，请改用[GridFs](http://www.mongodb.org/display/DOCS/GridFS)。如果您的文档有太多子文档，请考虑拆分它并使用关系而不是嵌套。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:10:44.573

The limit of 16MB data per document is a very well known limitation. Use GridFS for storing arbitrary binary data of arbitrary size + metadata.

# c++ - 存储顶点 DirectX C++

> ID：10398761
> 
> 赞同：0
> 
> 时间：2012-05-01T13:59:33.253
> 
> 标签：c++, data-structures, directx, vertices, octree

我目前正在为我的学士论文项目实施八叉树。我的八叉树将 std::vector 作为参数：

```
octree::Octree::Octree(std::vector<const D3DXVECTOR3*> vec) : 
    m_vertices(std::vector<D3DXVECTOR3*>()),
    m_size(m_vertices.size())
{
    int i=0;
    for(;i<m_size;++i) {
        m_vertices.push_back(new D3DXVECTOR3(*vec.at(i)));
    }
} 
```

我在渲染顶点并对它们进行任何剔除测试等之前询问通常用于存储顶点的内容。

我现在保持这个非常简单，我所拥有的只是一个渲染网格的函数。一些片段：

```
#define GRIDFVF (D3DFVF_XYZ | D3DFVF_DIFFUSE)

struct GridVertex {
    D3DXVECTOR3 position; 
    DWORD color;
};

g_dev->SetTransform(D3DTS_WORLD, &matIdentity);
g_dev->SetStreamSource(0, g_buffer, 0, sizeof(GridVertex));
g_dev->SetTexture(0, NULL);
g_dev->DrawPrimitive(D3DPT_LINELIST, 0, GridSize * 4 + 2); 
```

现在，当渲染它时，我使用我的自定义结构 GridVertex，即为 pos 保存一个 D3DXVECTOR9，为颜色值保存一个 DWORD，并通过将灵活的顶点格式设置为 GRIDFVF 来告诉 GPU。但是在我的八叉树中，如果某些顶点在我的八叉树内的节点内，我只想存储位置以执行测试，依此类推。因此，我想创建另一个名为 SceneManager 的类并将所有值存储在 std::vector 中，最后将其传递给我的 Octree 类，该类进行测试，然后将检查的顶点传递给 GPU。这会是一个可靠的解决方案还是实现这样的事情的常见方法？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:03:48.157

通常，不会将实际的渲染几何顶点本身放入八叉树或使用的任何空间分区结构中。这种粒度级别没有用处，因为如果构成模型的一组顶点跨越分区节点，以至于这些顶点的某些子集将被剔除，则您无法正确绘制模型。

您通常想要做的是拥有一个表示实体及其在世界中的边界的对象（例如，面向轴的边界框或边界球体是简单而有效的边界体）。每个实体还与渲染几何相关联（或可以由其他子系统相关联）。实体本身在八叉树中排序。

然后，您使用您的八叉树来确定哪些实体是可见的，并将其*所有*关联的渲染几何体提交到卡。

# javascript - 绑定多个事件时调用特定函数

> ID：10398762
> 
> 赞同：2
> 
> 时间：2012-05-01T13:59:34.213
> 
> 标签：javascript

我有一个站点范围的 JS，它为各种事件创建侦听器，但在某些情况下，我需要调用特定的函数，就像在下面的代码中一样，我需要调用 function **call**，但它没有被调用。

```
<html>
<head>
<script>
window.onload = function ()
{    
   var inputs = document.getElementsByTagName("input");
   var len = inputs.length;

   for (var i=0; i < len; i++) 
   {        
         if (inputs[i].getAttribute("type") == "text") 
         {    
                  var element = inputs[i];

                  element.onfocus = function() 
                  {    
                        var id = element.getAttribute("id");
                        alert(id);
                  }
          }
   }
}

function call(element)
{    
      element.value="";
}
</script>
</head>
<body>
<input type="text" name="myvar1" value="same content" id="noviceid" onfocus="call(this);">
<input type="text" name="myvar2" value="same content" id="noviceid" onfocus="call(this);">
</body>
</html> 
```

请建议。我想同时调用**onfocus**。我是 JavaScript 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:04:54.347

因此，一旦您的页面加载（使用适当的`call` `onfocus`处理程序），您运行`window.onload`的就会覆盖所有这些处理程序。我想这不是你打算做的。相反，如果可能，您可以使用 DOM2 事件：

```
element.addEventListener("focus", function(event) 
      {
            var id = event.target.getAttribute("id");
            alert(id);
      }, false); 
```

# php - 会话问题

> ID：10398765
> 
> 赞同：-1
> 
> 时间：2012-05-01T13:59:50.757
> 
> 标签：php, mysql

我正面临会话代码的问题

这是登录代码：

```
<?php

/**
 * @author Mina Wilson
 * @copyright 2012
 * // EPCI Pharma Survey | Rights Reserved
 */

 // Inialize session
session_start();

// Check, if user is already login, then jump to secured page
if (isset($_SESSION['name'])) {
header('Location: login_process.php');
}
?>
<?php $login="login_process.php" ?>

<!DOCTYPE html>

<html>

<head>

<title>EPCI Pharma Survey</title>

<style>

html, body

{

    height: 100%;

}

body

{

    font: 12px 'Lucida Sans Unicode', 'Trebuchet MS', Arial, Helvetica;    

    margin: 0;

    background-color: #d9dee2;

    background-image: -webkit-gradient(linear, left top, left bottom, from(#ebeef2), to(#d9dee2));

    background-image: -webkit-linear-gradient(top, #ebeef2, #d9dee2);

    background-image: -moz-linear-gradient(top, #ebeef2, #d9dee2);

    background-image: -ms-linear-gradient(top, #ebeef2, #d9dee2);

    background-image: -o-linear-gradient(top, #ebeef2, #d9dee2);

    background-image: linear-gradient(top, #ebeef2, #d9dee2);    

}

/*--------------------*/

#login

{

    background-color: #fff;

    background-image: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#eee));

    background-image: -webkit-linear-gradient(top, #fff, #eee);

    background-image: -moz-linear-gradient(top, #fff, #eee);

    background-image: -ms-linear-gradient(top, #fff, #eee);

    background-image: -o-linear-gradient(top, #fff, #eee);

    background-image: linear-gradient(top, #fff, #eee);  

    height: 240px;

    width: 400px;

    margin: -150px 0 0 -230px;

    padding: 30px;

    position: absolute;

    top: 50%;

    left: 50%;

    z-index: 0;

    -moz-border-radius: 3px;

    -webkit-border-radius: 3px;

    border-radius: 3px;  

    -webkit-box-shadow:

          0 0 2px rgba(0, 0, 0, 0.2),

          0 1px 1px rgba(0, 0, 0, .2),

          0 3px 0 #fff,

          0 4px 0 rgba(0, 0, 0, .2),

          0 6px 0 #fff,  

          0 7px 0 rgba(0, 0, 0, .2);

    -moz-box-shadow:

          0 0 2px rgba(0, 0, 0, 0.2),  

          1px 1px   0 rgba(0,   0,   0,   .1),

          3px 3px   0 rgba(255, 255, 255, 1),

          4px 4px   0 rgba(0,   0,   0,   .1),

          6px 6px   0 rgba(255, 255, 255, 1),  

          7px 7px   0 rgba(0,   0,   0,   .1);

    box-shadow:

          0 0 2px rgba(0, 0, 0, 0.2),  

          0 1px 1px rgba(0, 0, 0, .2),

          0 3px 0 #fff,

          0 4px 0 rgba(0, 0, 0, .2),

          0 6px 0 #fff,  

          0 7px 0 rgba(0, 0, 0, .2);

}

#login:before

{

    content: '';

    position: absolute;

    z-index: -1;

    border: 1px dashed #ccc;

    top: 5px;

    bottom: 5px;

    left: 5px;

    right: 5px;

    -moz-box-shadow: 0 0 0 1px #fff;

    -webkit-box-shadow: 0 0 0 1px #fff;

    box-shadow: 0 0 0 1px #fff;

}

/*--------------------*/

h1

{

    text-shadow: 0 1px 0 rgba(255, 255, 255, .7), 0px 2px 0 rgba(0, 0, 0, .5);

    text-transform: uppercase;

    text-align: center;

    color: #666;

    margin: 0 0 30px 0;

    letter-spacing: 4px;

    font: normal 26px/1 Verdana, Helvetica;

    position: relative;

}

h1:after, h1:before

{

    background-color: #777;

    content: "";

    height: 1px;

    position: absolute;

    top: 15px;

    width: 120px;   

}

h1:after

{ 

    background-image: -webkit-gradient(linear, left top, right top, from(#777), to(#fff));

    background-image: -webkit-linear-gradient(left, #777, #fff);

    background-image: -moz-linear-gradient(left, #777, #fff);

    background-image: -ms-linear-gradient(left, #777, #fff);

    background-image: -o-linear-gradient(left, #777, #fff);

    background-image: linear-gradient(left, #777, #fff);      

    right: 0;

}

h1:before

{

    background-image: -webkit-gradient(linear, right top, left top, from(#777), to(#fff));

    background-image: -webkit-linear-gradient(right, #777, #fff);

    background-image: -moz-linear-gradient(right, #777, #fff);

    background-image: -ms-linear-gradient(right, #777, #fff);

    background-image: -o-linear-gradient(right, #777, #fff);

    background-image: linear-gradient(right, #777, #fff);

    left: 0;

}

/*--------------------*/

fieldset

{

    border: 0;

    padding: 0;

    margin: 0;

}

/*--------------------*/

#inputs input

{

    background: #f1f1f1 url(http://www.red-team-design.com/wp-content/uploads/2011/09/login-sprite.png) no-repeat;

    padding: 15px 15px 15px 30px;

    margin: 0 0 10px 0;

    width: 353px; /* 353 + 2 + 45 = 400 */

    border: 1px solid #ccc;

    -moz-border-radius: 5px;

    -webkit-border-radius: 5px;

    border-radius: 5px;

    -moz-box-shadow: 0 1px 1px #ccc inset, 0 1px 0 #fff;

    -webkit-box-shadow: 0 1px 1px #ccc inset, 0 1px 0 #fff;

    box-shadow: 0 1px 1px #ccc inset, 0 1px 0 #fff;

}

#username

{

    background-position: 5px -2px !important;

}

#password

{

    background-position: 5px -52px !important;

}

#inputs input:focus

{

    background-color: #fff;

    border-color: #e8c291;

    outline: none;

    -moz-box-shadow: 0 0 0 1px #e8c291 inset;

    -webkit-box-shadow: 0 0 0 1px #e8c291 inset;

    box-shadow: 0 0 0 1px #e8c291 inset;

}

/*--------------------*/

#actions

{

    margin: 25px 0 0 0;

}

#submit

{       

    background-color: #ffb94b;

    background-image: -webkit-gradient(linear, left top, left bottom, from(#fddb6f), to(#ffb94b));

    background-image: -webkit-linear-gradient(top, #fddb6f, #ffb94b);

    background-image: -moz-linear-gradient(top, #fddb6f, #ffb94b);

    background-image: -ms-linear-gradient(top, #fddb6f, #ffb94b);

    background-image: -o-linear-gradient(top, #fddb6f, #ffb94b);

    background-image: linear-gradient(top, #fddb6f, #ffb94b);

    -moz-border-radius: 3px;

    -webkit-border-radius: 3px;

    border-radius: 3px;

    text-shadow: 0 1px 0 rgba(255,255,255,0.5);

     -moz-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;

     -webkit-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;

     box-shadow: 0 0 1px rgba(0, 0, 0, 0.3), 0 1px 0 rgba(255, 255, 255, 0.3) inset;    

    border-width: 1px;

    border-style: solid;

    border-color: #d69e31 #e3a037 #d5982d #e3a037;

    float: left;

    height: 35px;

    padding: 0;

    width: 120px;

    cursor: pointer;

    font: bold 15px Arial, Helvetica;

    color: #8f5a0a;

}

#submit:hover,#submit:focus

{       

    background-color: #fddb6f;

    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffb94b), to(#fddb6f));

    background-image: -webkit-linear-gradient(top, #ffb94b, #fddb6f);

    background-image: -moz-linear-gradient(top, #ffb94b, #fddb6f);

    background-image: -ms-linear-gradient(top, #ffb94b, #fddb6f);

    background-image: -o-linear-gradient(top, #ffb94b, #fddb6f);

    background-image: linear-gradient(top, #ffb94b, #fddb6f);

}   

#submit:active

{       

    outline: none;

     -moz-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5) inset;

     -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5) inset;

     box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5) inset;        

}

#submit::-moz-focus-inner

{

  border: none;

}

#actions a

{

    color: #3151A2;    

    float: right;

    line-height: 35px;

    margin-left: 10px;

}

/*--------------------*/

#back

{

    display: block;

    text-align: center;

    position: relative;

    top: 60px;

    color: #999;

}

</style>

</head>

<body>

<form action="<?php echo $login; ?>" class="input" method="post" id="login">

    <h1>EPCI Pharma Login</h1>

    <fieldset id="inputs">

        <input id="Name" name="name" type="text" placeholder="Name" autofocus required>   

        <input id="Password" name="password" type="password" placeholder="Password" required>

    </fieldset>

    <fieldset id="actions">

        <input type="submit" id="submit" value="Log in">

        <a href="">Forgot your password?</a><a href="">Register</a>

    </fieldset>

    <a href="#" id="back">Back to article...</a>

</form>

</body>

</html> 
```

这是 login_process.php

```
<?php
session_start();
$host="localhost"; // Host name 
$username="ebarea_epic"; // Mysql username 
$password="..."; // Mysql password 
$db_name="ebarea_epic"; // Database name 
$tbl_name="medicalrep"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$name=$_POST['name']; 
$password=$_POST['password'];

// To protect MySQL injection (more detail about MySQL injection)
$name = stripslashes($name);
$password = stripslashes($password);
$job_title= stripslashes ($job_title);
$name = mysql_real_escape_string($name);
$password = mysql_real_escape_string($password);

$sql="SELECT * FROM $tbl_name WHERE name='$name' and password='$password'";
$result=mysql_query($sql);
$num_results = mysql_num_rows($result);
$array = mysql_fetch_array($result);
$_SESSION['name']=$array['name'];
$_SESSION['password']=$array['password'];

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $username and $password, table row must be 1 row

if($count==1){

$_SESSION['name']=$_POST['name'];
$_SESSION['password']=$_POST['password'];

if ($array['job_title']=="user")
{ header ("location: userpage.php"); }
     else if ($array['job_title']=="admin")
{ header ("location: adminpage.php"); }
   }
       else if ($name=="ahmedkamal8989@Epci" && $password=="epcisurvey2012@ahmed")
{ header ("location: adminpage.php"); }

    else {
  echo "Wrong user or password";
  }
?> 
```

如果用户和密码错误，它会显示“错误的用户和密码”，通过再次刷新登录表单，它会将我重定向到 login_process.php，并显示消息“错误的用户或密码”

我试图将回显更改为标题和登录表单的位置，但它导致了重定向循环

现在有什么问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:15:18.927

您应该[在每个表单发布后进行重定向](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

在这种情况下，在 login_process.php 中，您应该设置一个会话变量，而不是回显“密码错误”：

```
$_SESSION['message'] = "Wrong password"; 
```

然后将它们重定向回登录页面，如下所示：

```
header("Location:/login.php", TRUE, 303); 
```

在您的 login.php 页面上，您应该有如下内容：

```
<?php echo $_SESSION['message']; unset($_SESSION['message']); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:19:28.520

让我从您的 PHP 文件中的重要内容开始

```
// username and password sent from form 
$name=$_POST['name']; //Save the post in $name
$password=$_POST['password']; //Save the post in $password

$sql="SELECT * FROM $tbl_name WHERE name='$name' and password='$password'";
$result=mysql_query($sql);
$num_results = mysql_num_rows($result);
$array = mysql_fetch_array($result);

$_SESSION['name']=$array['name']; //OK you save the name in SESSION without knowing if the user has submitted the right login information
$_SESSION['password']=$array['password']; //OK you save the password in SESSION without knowing if the user has submitted the right login information

// Mysql_num_row is counting table row
$count=mysql_num_rows($result); //count always has to be 1 else failed login information

if($count==1){

$_SESSION['name']=$_POST['name']; //WHAT!?! override the SESSION with the post? without escaping?
$_SESSION['password']=$_POST['password']; //Same here!?!?!

//Now you decide the job_title
if ($array['job_title']=="user")
{ header ("location: userpage.php"); }
     else if ($array['job_title']=="admin")
{ header ("location: adminpage.php"); }
   }
       else if ($name=="ahmedkamal8989@Epci" && $password=="epcisurvey2012@ahmed")
{ header ("location: adminpage.php"); }

    else {
  echo "Wrong user or password";
  }
?> 
```

所以我像这样在上面制作了这段代码

```
<?php
session_start();
$host="localhost"; // Host name 
$username="ebarea_epic"; // Mysql username 
$password="..."; // Mysql password 
$db_name="ebarea_epic"; // Database name 
$tbl_name="medicalrep"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$name=mysql_real_escape_string($_POST['name']); 
$password=mysql_real_escape_string($_POST['password']);

$sql="SELECT `job_title` FROM $tbl_name WHERE name='$name' and password='$password' LIMIT 1";
$result = mysql_query($sql);
$num_results = mysql_num_rows($result);

if($num_results ==1)
{

$_SESSION['name']=$name;
$_SESSION['password']=$password;
$_SESSION['job_title']=$result[0];

switch($result[0])
{
   case 'user':
      $direct = 'userpage';
   break;

   case 'admin':
      $direct = 'adminpage';
   break;

   default:
      if ($name=="ahmedkamal8989@Epci" && $password=="epcisurvey2012@ahmed")
      {
          $direct = 'adminpage';
      }
      else
      {
          echo 'Wrong user or password';
          die();
      }
   break;
}

header('location: '.$direct.'.php');
die();

?> 
```

我没有对此进行测试，但我希望您可以自己修复错误；）

# c# - 实体框架中的数据库错误处理

> ID：10398767
> 
> 赞同：6
> 
> 时间：2012-05-01T13:59:58.887
> 
> 标签：c#, .net, sql-server, entity-framework, error-handling

我有时会写存储过程女巫**RAISERROR()**。我通过实体框架执行它，例如：

```
using( MyModelEntities conn = new MyModelEntities() ) {
    conn.MyStoredProcedure(input_p, output_p);
} 
```

存储过程：

```
create procedure dbo.MyStoredProcedure(
    @input   nvarchar(255),
    @output int out
)
as
begin
    ...
        RAISERROR (N'My Exception....', 10, 1);
    ...
end
go 
```

有没有机会获得有关错误的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-23T14:14:55.770

在 sql server 中，异常级别 1 到 10 是信息性的，不会将错误返回给您的应用程序。

在 11 到 16 之间更改 Level 以从 SP 引发错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:03:55.927

可以将其放入 try/catch 中并显示异常吗？或者，也许您可​​以尝试进入调试模式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:55:07.977

这是我的处理方式：

```
create procedure dbo.MyStoredProcedure(
    @input   nvarchar(255),
    @output  text out
)
as
begin
    ...
      SELECT @message = convert(varchar, getdate(), 108) + ': My Exception....'
      SET @output = CAST(@message AS text) -- send message to c#/.net
      RAISERROR(@message,0,1) WITH NOWAIT  -- send message to SQL Server Management Studio
    ...
end
go 
```

然后在 C#/EF 端：

```
public string CallMyStoredProcedure(string input)
{
    var outputParameter = new ObjectParameter("output", typeof(string));
    EntityContext.MyStoredProcedure(input, outputParameter);
    return (string)outputParameter.Value;
} 
```

# android - 如何将 Android Parcelable 数组保存到文件中？

> ID：10398768
> 
> 赞同：2
> 
> 时间：2012-05-01T14:00:01.323
> 
> 标签：android, file, outputstream, persistent, parcelable

我有一个位置对象的 ArrayList。ArrayList 通常有 1,000 到 10,000 个 Location 对象。

我希望能够保留 ArrayList，然后再将其读回。

我假设将位置对象的整个 ArrayList 写出作为单个文件而不是将每个位置对象存储在 SQLiteDB 中会快得多。

有人可以向我展示一些示例代码来读取/写入 Location 对象的 ArrayList，或者提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:24:42.687

您真的必须存储所有 10k 位置，将它们全部删除并每次存储一组新的 10k 位置吗？或者只是偶尔做一些更新？（如删除或添加多行）。如果是后者，那么您希望使用 SQLite，因为使用 Db 执行这些操作会非常容易。

另请注意，SQLite 也只是文件系统上的一个存储文件，例如，没有 MySQL 那样的数据库服务器。

除此之外，这已经在 SO 上讨论过，所以你可能想看看这些：

[Android 数据存储 - 文件与 SQLite](https://stackoverflow.com/questions/1803365/android-data-storage-file-vs-sqlite)

[Sqlite vs 基于文件的数据存储？](https://stackoverflow.com/questions/5869236/sqlite-vs-file-based-data-storing)

# linux - bash：最后访问的路径是否有任何类型的缓冲区？

> ID：10398779
> 
> 赞同：2
> 
> 时间：2012-05-01T14:01:13.147
> 
> 标签：linux, bash, terminal

看看这个步骤：

```
:~$ cd programacion/
:~/programacion$ cd sports/
:~/programacion/sports$ cd src/
:~/programacion/sports/src$ cd Sports/
:~/programacion/sports/src/Sports$ cd PlatformBundle/
:~/programacion/sports/src/Sports/PlatformBundle$ cd Entity/
:~/programacion/sports/src/Sports/PlatformBundle/Entity$ cd /
:/$ 
```

在最后一个提示中的这一刻，有什么办法可以直接去，`programacion/sports/src/Sports/PlatformBundle/Entity`因为这是我访问的最后一条路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:02:20.770

您可以使用以下快捷方式访问最后一个目录：

`cd -`

例如：

```
kbrandt@alpine:~$ pwd
/home/kbrandt
kbrandt@alpine:~$ cd src
kbrandt@alpine:~/src$ cd -
/home/kbrandt
kbrandt@alpine:~$ cd -
/home/kbrandt/src
kbrandt@alpine:~/src$ 
```

另一种选择是使用`$OLDPWD`shell 变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:03:57.857

bash`pushd`和`popd`做你想做的事，等等。

```
$ help pushd

$ help popd 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T14:05:38.487

您还可以下载[Teleport](http://www.devdaily.com/linux/linux-teleport-command-cd-improved)脚本，类似于 bash 历史记录，但用于目录。

# cocoa - NSSplitView 调整包含的自定义 NSView 的大小

> ID：10398781
> 
> 赞同：0
> 
> 时间：2012-05-01T14:01:14.553
> 
> 标签：cocoa, nssplitview

我有一个垂直的 NSSplitView，底部子视图包含一个自定义视图（例如 NSView）和一个 NSTextView。

NSView 内部包含两个 NSButton。

当我调整 splitView 的大小，使其更小时，包含按钮的 NSView 也会调整大小。我不想要这种行为。

为了更好地解释我的问题，请查看附图。

图 1：应用程序启动时的窗口，一切正常

图 2：我调整了拆分视图的大小，只有一小部分按钮可见

图 3：我再次放大了拆分视图，但您可以看到 NSView 仍然更小，按钮不再可见（如果我将 splitView 的大小调整到 NSView 的底部“消失”）

![在此处输入图像描述](../Images/3108dfb36dae021b4c23908821b55289.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:53:41.217

在我的情况下，限制分隔线的位置没有帮助，因为我正在为子视图设置动画，并且子视图可以折叠。

我设法通过实现 splitView 委托方法 -splitviewWillResizeSubviews 来实现可接受的解决方案：（意味着，您必须将委托属性从拆分视图连接到 IB 或代码中的控制器）通过将子视图设置为隐藏来保持最小宽度而不是将其缩小为零：

```
- (void)splitViewWillResizeSubviews:(NSNotification *)notification {
    NSUInteger divider = [[[notification userInfo] valueForKey:@"NSSplitViewDividerIndex"] intValue];
    NSView *subview = nil;
    if(divider == SPLITVIEW_DIVIDER_SIDEBAR) {
        subview = (NSView*)[self.splitView.subviews objectAtIndex:SPLITVIEW_SIDEBAR_INDEX];
    }
    if(subview) {
        if(subview.frame.size.width < SPLITVIEW_MINIMUM_SIDEBAR_WIDTH) {
            CGRect correctedFrame = subview.frame;
            correctedFrame.size.width = SPLITVIEW_MINIMUM_SIDEBAR_WIDTH;
            subview.frame = correctedFrame;
            subview.hidden = YES;
        } else {
            subview.hidden = NO;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T23:47:20.983

这是一个基于 Cocoa 视图遗留工作的恶性问题。我见过的最好的解决方案是限制拆分视图任何部分的最小尺寸。如果子视图永远不会崩溃，它们的指标就不会跨越另一个维度，它们应该重新放大就可以了。

为此，请为您的拆分视图设置一个委托，该委托将实现`- splitView:constrainMaxCoordinate:ofSubviewAt:`. 拆分视图将调用您的委托方法，希望它可以将最大分隔符位置留在拆分视图的高度（将其作为第二个参数传入），但您可以简单地从该值中减去一些数量（例如，60）以返回它作为底视图的最小高度。

```
 - (CGFloat)splitView:(NSSplitView *)aSplitView
constrainMaxCoordinate:(CGFloat)proposedMin
           ofSubviewAt:(NSInteger)dividerIndex {

    return proposedMin - 60;
} 
```

当然，您可能希望在此方法中进行更多检查，以确保您正在谈论*正确*的拆分视图和*正确*的子视图，以避免过度影响，但这是基本思想。

（另见[这篇](http://manicwave.com/blog/2009/12/28/unraveling-the-mysteries-of-nssplitview-part-1/)关于这个主题的精彩文章。）

# jquery - jQuery：serialize() 表单和其他参数

> ID：10398783
> 
> 赞同：130
> 
> 时间：2012-05-01T14:01:26.503
> 
> 标签：jquery, ajax, forms, serialization

是否可以通过单个 AJAX 请求发送*表单*元素（使用方法序列化）和其他参数？[`.serialize()`](https://api.jquery.com/serialize/)

例子：

```
$.ajax({
    type : 'POST',
    url : 'url',
    data : {
        $('#form').serialize(),
        par1 : 1,
        par2 : '2',
        par3: 232
    }
} 
```

如果不是，将表单与其他参数一起提交的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2012-05-01T14:04:08.220

`serialize()`有效地将表单值转换为有效的查询字符串，因此您可以简单地附加到字符串：

```
$.ajax({
    type : 'POST',
    url : 'url',
    data : $('#form').serialize() + "&par1=1&par2=2&par3=232"
} 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-11-22T12:06:02.823

或者，如果您将参数存储在某个对象变量中，则可以使用`form.serialize()`with 。`$.param(object)`用法是：

```
var data = form.serialize() + '&' + $.param(object) 
```

请参阅[http://api.jquery.com/jQuery.param](http://api.jquery.com/jQuery.param)以获取更多参考。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-15T08:54:36.497

我不知道，但上述方法都不适合我，然后我使用了它并且它有效：

在表单的序列化数组中，它存储为键值对

我们将一个或多个新值推送到表单变量中，然后我们现在可以直接传递这个变量。

```
var form = $('form.sigPad').serializeArray();
var uniquekey = {
      name: "uniquekey",
      value: $('#UniqueKey').val()
};
form.push(uniquekey); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-11T08:17:51.167

如果您想使用表单序列化发送数据，您可以试试这个

```
var form= $("#formId");
$.ajax({
    type: form.attr('method'),
    url: form.attr('action'),
    data: form.serialize()+"&variable="+otherData,
    success: function (data) {
    var result=data;
    $('#result').attr("value",result);

    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-20T05:17:00.687

像这样传递参数的值

```
data : $('#form_id').serialize() + "&parameter1=value1&parameter2=value2" 
```

等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-28T14:02:47.763

按照**Rory McCrossan 的**回答，如果您想发送一个整数**数组**（几乎适用于 .NET），代码如下：

```
// ...

url: "MyUrl",       //  For example --> @Url.Action("Method", "Controller")
method: "post",
traditional: true,  
data: 
    $('#myForm').serialize() +
    "&param1="xxx" +
    "&param2="33" +
    "&" + $.param({ paramArray: ["1","2","3"]}, true)
,             

// ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-12T06:14:10.177

**在 js 中编码：**

```
 var temp =    $("#pay_property_amount").serialize();
            temp = btoa(temp); 
```

并传入 ajax

```
 data: { temp_data : temp }, 
```

**用php解码**

```
 $temp_data = base64_decode($this->input->post('temp_data'));

 if($temp_data){
$temp_data = $this->unserializeForm($temp_data);
 }

function unserializeForm($str) {
$returndata = array();
$strArray = explode("&", $str);
$i = 0;
foreach ($strArray as $item) {
    $array = explode("=", $item);

    if (preg_match('/(%5B%5D)/', $array[0])) {
          $array[0] = str_replace('%5B%5D','',$array[0]);
          if(array_key_exists($array[0],$returndata)){
                  $returndata[$array[0]][]=$array[1];
          }else{
              $returndata[$array[0]] =array();
              $returndata[$array[0]][]=$array[1];
          }
    }else
    {
        $returndata[$array[0]] = $array[1];
    }

}

return $returndata;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-04T16:46:23.903

```
$("#add_form").submit(function(e) {
    e.preventDefault();
    var total_qty = $('#total_qty').text();
    var total_amt = $('#total_amt').text();

    $("#add_btn").val('adding....');
    $.ajax({
        url: 'action.php',
        method: 'post',
        data: $(this).serialize() + "&total_qty="+total_qty + "&total_amt="+total_amt,
        success: function(data){
            console.log(data);
        }   
    });
}); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-07-17T06:01:52.763

你也可以使用 serializeArray 函数来做同样的事情。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-10-26T11:10:55.407

您可以使用带有另一个表单内容的 jQuery 创建一个辅助表单，然后从其他参数中添加该表单，因此您只需在 ajax 调用中对其进行序列化。

```
function createInput(name,value){
    return $('<input>').attr({
        name: name,
        value: value
    });
}
$form = $("<form></form>");
$form.append($("#your_form input").clone());
$form.append(createInput('input_name', 'input_value'));
$form.append(createInput('input_name_2', 'input_value_2'));
....

$.ajax({
    type : 'POST',
    url : 'url',
    data : $form.serialize()
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-09-17T08:16:28.490

我用under语句解决了这个问题；使用 url 相同的 GET 方法发送数据

```
$.ajax({
    url: 'includes/get_ajax_function.php?value=jack&id='+id,
    type: 'post',
    data: $('#b-info1').serializeArray(), 
```

并通过`$_REQUEST['value']`OR获得价值`$_GET['id']`

# asp.net - 登录控制以及如何实现我正在寻找的东西

> ID：10398787
> 
> 赞同：1
> 
> 时间：2012-05-01T14:01:36.313
> 
> 标签：asp.net, .net, visual-studio-2010

我使用 aspx Visual Studio 2010 创建了一个新项目。我要做的只是用户登录并重定向到另一个页面。我打算将一些东西保存为 cookie 或应用程序/会话对象。
所以我用登录模板创建了一个全新的 aspx 应用程序。我打开了 login.aspx 并打开了登录按钮后面的代码。当用户单击确定时，我连接到我的 sql 服务器数据库并验证他们的登录名/密码。一旦我这样做并确定这是一个有效用户，我如何告诉 aspx 这是一个有效用户？

## 我注意到了这一点：

```
 <div class="loginDisplay">
            <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                <AnonymousTemplate>
                    [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                </AnonymousTemplate>
                <LoggedInTemplate>
                    Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                    [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                </LoggedInTemplate>
            </asp:LoginView> 
```

所以我假设我需要以某种方式说用户已通过身份验证。但是怎么做？我想我对 LoginTemplates VS Anonymous 模板有点困惑。我怎么说现在使用 LoginTemplate 与匿名。是否有我必须执行的属性或方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:03:29.017

在 Login1_Authenticate 中试试这个：

您需要根据他输入的详细信息验证用户。如果用户通过身份验证，请将他重定向到您想要的任何地方。如果没有向他显示一些消息。

```
Protected Sub Login1_Authenticate(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.AuthenticateEventArgs) Handles Login1.Authenticate
        Dim IsValidate As Boolean = Membership.ValidateUser(Login1.UserName, Login1.Password)
        If Not IsValidate Then
            e.Authenticated = False
            Login1.FailureText = "Please check your mail if not activated."
        Else
            e.Authenticated = True
        End If
End Sub 
```

并在 Login1_LoggedIn

```
Protected Sub Login1_LoggedIn(ByVal sender As Object, ByVal e As System.EventArgs) Handles Login1.LoggedIn
        If Request.QueryString("Url") IsNot Nothing Then
            Response.Redirect("~/" & Request.QueryString("Url").ToString())
        Else
            Response.Redirect("~/Default.aspx")
        End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:07:49.570

验证用户凭据后使用[RedirectFromLoginPage方法。](http://msdn.microsoft.com/en-us/library/1f5z1yty.aspx)这会将用户发送到他使用 ReturnUrl 查询字符串参数请求的 URL。这还将设置适当的 FormsAuthentication cookie。

# ios - ios html5 视频 mp4

> ID：10398788
> 
> 赞同：0
> 
> 时间：2012-05-01T14:01:37.047
> 
> 标签：ios, html5-video

为了让我的应用程序接受超过 10 分钟的视频，我需要在 webview 中实现一个 html5 视频。视频正在链接，因为我可以听到音频，但视频是黑屏。视频都是mp4，我使用的是以下html

```
<html><body style="margin: 0; padding: 0;"><video width="480" height="300" controls="controls"><source src="'+video+'" type="video/mp4"></video></body></html> 
```

谁能帮我查看图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:21:05.140

我猜这是视频格式的问题。

以下是支持的内容：

**H.264 视频高达 720p，每秒 30 帧，主要配置文件级别 3.1** 音频：AAC-LC 高达 160 Kbps，48kHz，立体声文件类型：.m4v、.mp4 和 .mov

**MPEG-4 视频，最高 2.5 Mbps，640 x 480 像素，每秒 30 帧，简单配置文件** 音频：AAC-LC，每通道最高 160 Kbps，48kHz，立体声 文件类型：.m4v、.mp4 和 .mov

[Miro](http://www.getmiro.com/)可能会帮助您，因为它有一个“for iphone”选项，可以正确设置视频。

# java - sms消息存储在数据库中，与数据库比较并使用smslib在java中返回sms，如何实现？

> ID：10398790
> 
> 赞同：0
> 
> 时间：2012-05-01T14:01:57.137
> 
> 标签：java, sms, smslib

我正在使用 smslib 用 java 编写一个短信桌面应用程序，我的程序需要将短信存储在数据库表中，然后将短信与另一个表进行比较，最后返回一个新短信，如何用线程实现这个过程？计时器？我需要让应用程序整天运行，程序只需要将数字与另一个表进行比较，然后返回不同的值，我有应用程序，但在某些方面，我只想知道你的方法，用户需要收到带有新号码的短信谢谢

pd 我使用 smslib 和类 readmessages 和 sendmessages。我被困在这部分，我不希望我的程序崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:11:22.147

SMSLib 有两种接收消息的方式。

*   使用`Service.readMessages()`. 这需要实现某种调度。例如您自己的线程或计时器任务。
*   实现回调。这是恕我直言的首选方式。在这种情况下，图书馆关心调度和一切。您只需实现 SMSLib 将在 SMS 消息到达时调用的回调。我只需将其存储在数据库中并实现您描述的比较消息并发送回复的逻辑。

由于发送消息可能需要一些时间（有时是几秒钟），您应该异步执行此操作。此外，发送可能会失败，因此您可能必须实施重试机制。所以，使用排队。最简单的方法是使用 java.concurrency 包中的 Executors 框架。

# php - imagejpeg() [function.imagejpeg]：无法打开“img/100001326588945.jpg”进行写作

> ID：10398795
> 
> 赞同：1
> 
> 时间：2012-05-01T14:02:06.517
> 
> 标签：php, facebook, facebook-graph-api, web-applications, photo-upload

```
$facebook->setFileUploadSupport(true);

//Create an album
$album_details = array(
        'message'=> 'How will you die?',
        'name'=> 'How will you die?'
);
$create_album = $facebook->api('/me/albums', 'post', $album_details);

//Get album ID of the album you've just created
$album_uid = $create_album['id'];

//Upload a photo to album of ID...

$file='img/'.$fbid.'.jpg'; //Example image file

$photo_details = array( 'message'=> 'Find...51', 'image' => '@'.realpath($file));
$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details);

$upphoto = $upload_photo['id'];
print_r ($upphoto);

ImageDestroy( $canvas );

header("Location: http://www.facebook.com/" . urlencode($fbid) . "&photoid=" . urlencode($upload_photo['id'])); 
```

我正在使用此代码在 facebook 应用程序的帮助下创建相册并在 facebook 上的用户个人资料中上传照片。但是一次又一次，我反复遇到三 (3) 个错误

1.  警告：imagejpeg() [function.imagejpeg]：无法打开“img/100001326588945.jpg”进行写入：第 58 行的 /home/a2424901/public_html/index.php 中没有此类文件或目录

2.  curl_setopt_array() [function.curl-setopt-array]：open_basedir 限制生效。File() 不在允许的路径内： (/home/:/usr/lib/php:/tmp) 在 /home/a2424901/public_html/base_facebook.php 的第 802 行

3.  致命错误：未捕获的 CurlException：3：未设置 URL！在第 814 行的 /home/a2424901/public_html/base_facebook.php 中抛出。

[这是 base_facebook.php 代码](http://pastebin.com/TnYDN7Qg)

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:30:51.980

尝试放置相对路径而不是放置绝对路径，至少这就是我解决该问题的方式。

# spine.js - 在 Spine.js 中监听来自其他控制器的自定义事件

> ID：10398796
> 
> 赞同：2
> 
> 时间：2012-05-01T14:02:08.003
> 
> 标签：spine.js

我已经创建了一个 Spine 控制器，我想从它的一个方法中触发一个自定义事件“创建”。然后我想要另一个 Spine Controller 来监听那个事件。这怎么可能使用 Spine.js 的自定义事件方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T02:52:46.567

自定义事件不必是全局的。您可以按控制器实例触发/绑定事件，但不能按控制器类。例如

```
class PresenterController extends Spine.Controller
  giveSpeech: (message) ->
    @trigger("speech",message)

class App extends Spine.Controller
  addKeynote: ->
    @speaker = new PresenterController
    @speaker.bind("speech",@listen)
  listen: (message) =>
    alert("I heard " + message) 
```

但是你不能得到像 PresenterController.bind("speech") 这样的东西

原因是 Model 使用`@extend Event`了，它为*类*添加了方法，而 Controller 使用了，它为*实例*`@include Event`添加了方法。Model 实现了具有实例绑定的外观，因为它定义了自己的 trigger、bind 和 unbind 实现

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:36:52.233

您可以像这样在 Spine 中触发事件

```
Spine.trigger "Create" 
```

在您是其他控制器中，您可以将事件绑定到这样的方法

```
Spine.bind "Create", @create 
```

您必须在此控制器中定义一个名称为 create 的方法：

```
create: =>
  # Create action 
```

因为自定义事件是全局的，所以我建议使用控制器名称作为前缀。您可以使用 ControllerName:Create 例如：

```
Spine.trigger "ControllerName:Create" 
```*

# c - 警告：控制到达非无效函数的末尾。C二叉搜索树

> ID：10398803
> 
> 赞同：1
> 
> 时间：2012-05-01T14:02:30.573
> 
> 标签：c, while-loop, return, binary-search-tree

我有一个二叉搜索树的插入功能，但我不知道为什么会出现该错误。即使我返回 FALSE；在函数结束之前它仍然会发生。任何帮助表示赞赏。

```
boolean insert(NODE **root, Employee e){
NODE *cursor,*temp;
// boolean status;

temp = (NODE *)malloc(sizeof(NODE));
assert(temp != NULL);

temp->element = (Employee *)malloc(sizeof(Employee));
assert(temp -> element != NULL);

*(temp -> element) = e;
temp -> left = NULL;
temp -> right = NULL;

if (*root == NULL) {
    *root = temp;
    return TRUE;
}

// tree is non-empty
cursor = *root;
while (cursor != NULL) {
    if(e.ID < cursor -> element -> ID){
        if(cursor -> left == NULL){
           cursor -> left = temp;
           return TRUE;
        }
        else cursor = cursor -> left;
    }

    //e goes to the right
    else {
        if (e.ID > cursor -> element -> ID){
           if(cursor -> right == NULL){
              cursor -> right = temp;
              return TRUE;
           }                        
           else
              cursor = cursor -> right;
        }
        else { // e is already in the tree
           free(temp -> element);
           free(temp);
           return FALSE;
        }
    }
   }  // while cursor != NULL
 } // insert 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:30:20.447

即使一个函数实际上*确实*在所有可能的路径上返回了一些东西，编译器也不一定能确定——在所有情况下都能够这样做将有效地证明停止问题是可以解决的。这就是为什么此诊断是警告而不是错误的原因。

这是一个很容易看到总是 return 的函数示例`0`，但是许多试图警告您未处理的返回路径的编译器会发出警告：

```
int foo( int x)
{
    while (x >0) {
        --x;
    }
    if (x == 0) return 0;
    while (x < 0) {
        ++x;
    }
    if (x == 0)  return 0;
} 
```

然而，有时一个简单的分析可以确定所有控制路径都返回一个值。以下通常不会生成诊断：

```
int bar(int x)
{
    if (x == 0)
        return 0;
    else 
        return 1;
} 
```

在像您这样复杂的函数中，任何人（编译器或人类）都很难确定`while()`循环永远不会终止，除非通过它`return`内部的 a 。`while`如果您希望是这种情况，您可能希望添加一个始终失败的断言。此外，您可能会考虑将这个循环更改`while (cursor != NULL)`为`for (;;)`哪些“文档”，该循环只会因为内部的`return`or`break`语句而结束（并且可能`assert(cursor != NULL)`在顶部有一个）。

只是为了记录，在`return FALSE;`你的函数结束之前放一个会使警告静音。

# objective-c - iphone xml绑定/解析到对象

> ID：10398805
> 
> 赞同：0
> 
> 时间：2012-05-01T14:02:32.350
> 
> 标签：objective-c, ios, xml, cocoa-touch

我是 iphone 开发的新手，我想要的是一个可以绑定到对象的 xml 解析器。我搜索了很多，但我仍然需要一些帮助。例如，我有以下 xml 结构：

```
<xml>
  <hotels>
    <hotel>
      <id>1</id>
      <name>Hotel Name</name>
    </hotel>
    <hotel>
       ....
    </hotel>
  </hotels>
  <beaches>
    <beach>
      <id>11</id>
      <name>Beach Name</name>
    </beach>
    <beach>
       ....
    </beach>
  </beaches>
</xml> 
```

现在我的问题是......这是读取这个 xml 文件并解析的最好（或者可能更简单）的方法......：

1.  现在我想要一个所有酒店的列表……所以我想要解析并得到那个列表……等等。
2.  现在我想要 id = 11 等的海滩。

这可以在iphone中轻松完成吗？哪个是最好的方法？如果您能给我提供源代码等示例，我将不胜感激。提前致谢。

注意：我将至少支持 ios 4.3 或更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:45:00.337

您可以尝试实现 NSXMLParserDelegate 然后将您的逻辑写入

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI: 
(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary 
*)attributeDict

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:
(NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

示例代码：-

创建 XMLParser 类，然后为 Hotel、Beach 和用于存储这些对象的数组创建 bean 类。

XMLParser.h

```
#import <Foundation/Foundation.h>

@interface XMLParser : NSObject <NSXMLParserDelegate>

@property (strong, readonly) NSMutableArray *yourObjects;

-(id) parseXML:(NSString *)url;

@end 
```

XMLParser.m

```
#import "XMLParser.h"
#import "YourObject.h"
@implementation XMLParser

@synthesize yourObjects    =_yourObjects;

NSMutableString *currentNode;
NSXMLParser *parser;
YourObject *YourObject;

-(id) parseXML:(NSString *)url
{
       _yourObjects       = [[NSMutableArray alloc]init];
       NSURL *nsURL    = [NSURL URLWithString:url];
       NSData *data    = [[NSData alloc] initWithContentsOfURL:nsURL];
       parser          = [[NSXMLParser alloc] initWithData:data];
       parser.delegate = self;
       [parser parse];
       return self;
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
   currentNode = (NSMutableString *) [string stringByTrimmingCharactersInSet:       
   [NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:
(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary   
*)attributeDict

{
  if ([elementName isEqualToString:@"hotel"])
  {
    yourObject = [YourObject alloc]; //eg:- Hotel
    //any logic that you want to include.....
  }
  if ([elementName isEqualToString:@"beach"])
  {
    yourObject = [YourObject alloc]; //eg:- beach
    //any logic that you want to include.....
  }
}

@end

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI: 
(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

   if([elementName isEqualToString:@"status"])
   {
     [self.yourObjects addObject:yourObject];
     yourObject = nil;
     currentNode  = nil;
    }
} 
```

调用 -(id) parseXML:(NSString *)url; 解析所需的 XML 并检索对象。

希望这可以帮助。

# ruby-on-rails - 我想将“app”目录移动到“app/back”，可以吗？

> ID：10398806
> 
> 赞同：0
> 
> 时间：2012-05-01T14:02:39.823
> 
> 标签：ruby-on-rails

为了添加“app/front”（JS代码将在这里）我想将“app”目录移动到“app/back”，有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:08:34.010

您是否想要为“后端”/“前端”样式和 javascript 设置单独的文件夹？如果是这样，您可以像这样安排您的文件夹结构：

```
app/assets/stylesheets/front-end/
app/assets/javascripts/front-end/
app/assets/stylesheets/back-end/
app/assets/javascripts/back-end/ 
```

然后我会做一个单独的布局，`admin_layout.html.erb`引用你的`back-end`样式表和 javascripts。确保添加`config.assets.precompile += ['backend.css', backend.js']`到您的`application.rb`以便它们被编译（假设您`require_tree .`从 application.css/js 文件中删除。

# email - 任务完成后获取启动命令以发送消息 - 是否有可能

> ID：10398811
> 
> 赞同：1
> 
> 时间：2012-05-01T14:03:46.270
> 
> 标签：email, batch-file, notifications, cmd

之前的任务完成时，是否有可能获得一个命令窗口来触​​发电子邮件？

我们在脚本中使用以下内容来触发多个 robocopy

start cmd /T:5A /K robocopy... （感谢此线程中的 msam 在此处使用 start 命令帮助我们[时，如何通过批处理脚本更改命令窗口的颜色）](https://stackoverflow.com/questions/10349069/how-can-i-change-the-colour-of-a-command-window-via-batch-script-when-using-the)

我想做的是，一旦 robocopy 完成并显示摘要部分，就会触发电子邮件或启动不同的批处理文件，以便可以向我发送消息。我们有许多副本要在晚上完成，而不是坐在那里看着它们，一旦我完成登录并开始下一阶段，这会提醒我。

我不确定这是否可行或设置起来有多困难。

恐怕我不知道从哪里开始。

先谢谢了。

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:03:52.010

你可以

1.  在 START 命令中附加通知

    ```
    start cmd /T:5A /K robocopy copyoptions & mailsend mailoptions 
    ```

2.  或准备一个调用 robocopy 然后邮件发送的中间 BAT 文件

    ```
    @echo off
    robocopy %*
    mailsend mailoptions 
    ```

    并称之为

    ```
    start cmd /T:5A /K copyandnotify copyoptions 
    ```

    您可以根据需要多次启动 BAT。

# jquery - 关于在 ASP.NET MVC3 中使用 Ajax 的担忧

> ID：10398816
> 
> 赞同：0
> 
> 时间：2012-05-01T14:04:00.117
> 
> 标签：jquery, ajax, asp.net-mvc-3

我最近才研究了 Ajax（专家们笑我），我对所有添加的功能感到兴奋。但有一些担忧。

1.  表单提交

    在 Ajax 示例中，一个 json 对象要么自动创建（序列化表单），要么通过从每个 DOM 项中检索 val() 手动构建。并且使用javascript执行数据验证。我认为我们可能仍然可以使用 Html.EditorFor （和 Html.TextboxFor 等）来构建表单。但是是否仍然可以使用模型/视图模型上添加的 DataAnnotation 属性？我见过的 MVC+Ajax 示例通常不执行任何类型的服务器端验证。可以省略那部分吗？我想这很好，因为用户现在必须启用 javascript 才能提交表单。但是我们需要一些专业的建议。

2.  查看模型

    在 Ajax 世界中，视图模型通常表示为 JSON 对象。（如果我错了，请纠正我。）那么，在我们的域模型和视图模型之间映射的最佳方式是什么？有没有像 AutoMapper 这样的工具？

    *好的，我需要在这里添加一些东西............*

    引起这种担忧的原因是我发现一些示例使用了一些名为`Knockout.js` [（参见其网站）](http://knockoutjs.com/ "关联")的东西，而不是`return Json(model)`将我们的视图模型的 json 对象返回到`$.Ajax`调用中，它的示例显示视图模型是用 javascript 构建的。

    ```
    // 这是一个简单的 *viewmodel* - 定义 UI 数据和行为的 JavaScript
    函数 AppViewModel() {
        this.firstName = "伯特";
        this.lastName = "伯廷顿";
    }

    // 激活 knockout.js
    ko.applyBindings(new AppViewModel());

    ```

    这种做法有什么好处？

    *----我的更新结束----*

感谢您提供任何有用的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:16:59.133

1) 不要忽略服务器端验证。MVC 有一些内置功能可以在服务器端为您完成其中的一些工作，但最好测试它是否正常工作。通常这只是测试类型、长度、范围和其他一些基本验证。任何复杂的验证都应该由您完成。无论哪种方式都进行测试以确保确实发生了正确的验证。

2) Json 是最常见的，因为它与 JavaScript 一起使用并且易于在 .Net 中序列化。我推荐 Newtonsoft.Json 作为你的序列化库。但是，您可以使用任何可以解析的语言，从 protobuff 到 XML。

ViewModel 是一个模型，它被发送到视图，用于视图需要并且通常只以一种方式发送到视图。

域模型是您持久保存的对象，通常从客户端到服务器双向传输。

一个很好的例子可能是您的视图需要当前日期、经理数据和员工数据，因此您的视图模型包含所有这些属性，但表单仅编辑从客户端发回的域模型员工到要持久化的服务器。

MVC 具有 ModelBinders 可以获取您的发布数据并将它们转换为您需要的任何类型（假设您正确遵循它的约定。）您不太可能必须将视图模型映射到域模型。

# android - web/android 类比：声明式布局 vs 程序式布局

> ID：10398817
> 
> 赞同：1
> 
> 时间：2012-05-01T14:04:00.867
> 
> 标签：android, android-layout, web

我有一些 Web 开发经验，并且正在学习如何构建 android 应用程序。

我了解 XML 布局允许分离程序逻辑和（UI-）布局。这似乎类似于 JavaScript 与 HTML/CSS 的分离。

但是服务器端脚本语言的作用是什么？即，如果有一个用户可以点击播放的音频文件列表，我如何自动生成 XML 布局（在网络世界中，我会通过交错 HTML 和 PHP 来完成）？还是我被迫以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:36:52.417

在 Web 编程世界中，由于客户端与服务器在物理上是分开的，因此需要 javascript 用于动态客户端交互，以及用于处理数据的服务器端语言。在 Android 世界中，由于视图和代码都在同一设备中执行（如桌面应用程序），因此不需要在视图中编写脚本。正因为如此，Android 中的 xml 布局是完全静态的布局定义，就像一个简单的 HTML 文件。当用户与该布局交互时会发生什么，必须在使用该布局的 Activity 中的代码中定义，该布局处理用户事件（javascript），并处理它们（服务器端语言）。

使用您的示例，如果有一个音频文件列表，并假设您使用微调器允许用户选择一个，您将必须使用 onClickListener 或变体附加一个事件处理程序，以告诉应用程序何时该做什么用户选择它。如果您使用 ListView，您通常会扩展 ListActivity，然后覆盖 onListItemClick() 以在用户单击它时执行操作。

在 Web 编程世界中，这类似于将 javascript 事件处理程序附加到页面上的元素，然后当用户执行操作时响应，通常将数据发送到服务器以进行进一步处理。

所以简而言之，是的，您将被迫编写代码来响应用户的操作，并且您不能将（脚本）代码交错到布局文件中。

正常流程是： 1\. 在 xml 中定义布局 2\. 在 Activity 的 onCreate 中使用 setContentView 来指示您正在使用的布局 3\. 使用 R 对象通过 id 使用 findViewById 获取布局中定义的元素 4\. 附加这些元素的事件处理程序以在用户执行操作时做出响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:18:46.717

对于音频文件列表，您可能需要使用 ListView。您可以在 XML 布局中声明 ListView，然后在您的活动中获得 ListView 的句柄并在其上设置一个适配器，用您的文件列表填充它。所以它是一点点 XML 和程序化布局。如有必要，您始终可以同时执行这两项操作（以编程方式添加到您的布局中）。

# python - 为什么 HTMLParser 在非严格模式下会忽略开始标签？

> ID：10398821
> 
> 赞同：0
> 
> 时间：2012-05-01T14:04:21.210
> 
> 标签：python, python-3.x, html-parsing

我写了一个基于 HTMLParser 的简单解析器：

```
from html.parser import HTMLParser

class MyParser(HTMLParser):
    def __init__(self, strict = True):
        super().__init__(strict)

    def handle_starttag(self, tag, attrs):
        print('Start tag: ', tag)

    def handle_endtag(self, tag):
        print('End tag ', tag) 
```

然后我尝试在严格和非严格模式下解析下一个示例（通过在 HTMLParser 构造函数中传递 strict=True 或 strict=False ）：

```
source = '''
<!DOCTYPE html>
<html>
  <head>
    <title>Hello HTML</title>
  </head>
  <body>
    <p>Hello World!</p>
  </body>
</html>
'''
#myParser = MyParser(True) # strict
myParser = MyParser(False) # non-strict
myParser.feed(source)
myParser.close() 
```

结果，对于严格模式和非严格模式，我得到了两个不同的结果。严格的：

```
Start tag:  html
Start tag:  head
Start tag:  title
End tag  title
End tag  head
Start tag:  body
Start tag:  p
End tag  p
End tag  body
End tag  html 
```

非严格：

```
End tag  title
End tag  head
End tag  p
End tag  body
End tag  html 
```

为什么 HTMLParser 在非严格模式下会忽略开始标签？如何在不省略开始标签的非严格模式下使用 HTMLParser？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:20:47.920

这是 python 3.2.2（和其他）中的一个错误，有关详细信息和快速修复，请参阅[http://bugs.python.org/issue13273](http://bugs.python.org/issue13273)。它在 3.2.3 中修复。

# sql - 在EF中插入多行太慢，如何从SqlBulkCopy获取主键？

> ID：10398824
> 
> 赞同：4
> 
> 时间：2012-05-01T14:04:26.110
> 
> 标签：sql, entity-framework, sqlbulkcopy

我们的应用程序中有一个用例，其中用户触发了一个请求，该请求将导致插入 100 到 1000 行。
在插入之后，我们需要对象继续处理并创建更多对象，这些对象是原始插入对象的外键，或者换句话说，我们需要插入对象的主键 ID。

到目前为止，我们已经使用 EF 在 foreach 循环中执行此操作，这太慢了，大约需要 15-20 秒才能完成大约 600 行。（在阻止用户时，不好:(）

原始代码（也处理更新，但我们不关心那里的性能，它不会阻止用户）：

```
foreach (Location updatedLoc in locationsLoaded)
{
    // find it in the collection from the database
    Location fromDb = existingLocations.SingleOrDefault(loc => loc.ExtId.Equals(updatedLoc.ExtId));

    // update or insert
    if (fromDb != null)
    {
        // link ids for update
        updatedLoc.Id = fromDb.Id;

        // set values for update 
        db.Entry(fromDb).CurrentValues.SetValues(updatedLoc);
    }
    else
    {
        System.Diagnostics.Trace.WriteLine("Adding new location: " + updatedLoc.Name, "loadSimple");

        // insert a new location <============ This is the bottleneck, takes about 20-40ms per row
        db.Locations.Add(updatedLoc);
    }
}

// This actually takes about 3 seconds for 600 rows, was actually acceptable
db.SaveChanges(); 
```

所以在研究了SO和互联网之后，我发现我以错误的方式使用EF，需要使用`SqlBulkCopy`

因此代码被重写了，过去大约需要 20 秒，现在需要大约 100 毫秒（！）

```
foreach (Location updatedLoc in locationsLoaded)
{
    // find it in the collection from the database
    Location fromDb = existingLocations.SingleOrDefault(loc => loc.ExtId.Equals(updatedLoc.ExtId));

    // update or insert
    if (fromDb != null)
    {
        // link ids for update
        updatedLoc.Id = fromDb.Id;

        // set values for update
        db.Entry(fromDb).CurrentValues.SetValues(updatedLoc);
    }
    else
    {
        System.Diagnostics.Trace.WriteLine("Adding new location: " + updatedLoc.Name, "loadSimple");

        // insert a new location
        dataTable.Rows.Add(new object[] { \\the 14 fields of the location.. });
    }
}

System.Diagnostics.Trace.WriteLine("preparing to bulk insert", "loadSimple");

// perform the bulk insert
using (var bulkCopy = new System.Data.SqlClient.SqlBulkCopy(System.Configuration.ConfigurationManager.ConnectionStrings["bulk-inserter"].ConnectionString))
{
    bulkCopy.DestinationTableName = "Locations";

    for (int i = 0; i < dataTable.Columns.Count; i++)
    {
        bulkCopy.ColumnMappings.Add(i, i + 1);
    }

    bulkCopy.WriteToServer(dataTable);
}

// for update
db.SaveChanges(); 
```

**问题是**，在大容量复制之后，`Locations`作为 EF ORM 一部分的集合中的对象没有改变（这没关系，并且是预期的），但我需要插入的 id 才能继续处理这些对象。

一个简单的解决方案是立即从数据库中再次选择数据，我手头有数据，我可以简单地将其重新选择到不同的集合中。

~~但是该解决方案感觉不正确，是否无法将 id 作为插入的一部分。~~

**编辑：**简单的解决方案有效，请参阅下面关于如何轻松将其同步回 EF 的已接受答案。

也许我不应该使用 SqlBulkCopy （我预计最多大约 1000 行，不再）并使用其他东西？

请注意，一些相关的 SO 问题和解决方案似乎都远离了 EF..

1.  [可以在 SQL BulkCopy 之后取回 PrimayKey ID 吗？](https://stackoverflow.com/questions/2945414/possible-to-get-primaykey-ids-back-after-a-sql-bulkcopy)
2.  [提高实体框架中的批量插入性能](https://stackoverflow.com/questions/6107206/improving-bulk-insert-performance-in-entity-frame-work)
3.  [在实体框架中插入的最快方法](https://stackoverflow.com/questions/5940225/fastest-way-of-inserting-in-entity-framework)（这是关于具有许多待处理插入的 SaveChanges() 性能，应该在每 X 次插入时调用它，而不是在处理结束时调用 1000s 待处理）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:13:01.040

您通过 EF 所做的任何事情都不会像 SqlBulkCopy 一样快。事实上，原始 SQL`INSERT`没有那么快。所以你只需要重新阅读位置。[通过使用MergeOption.OverwriteChanges](http://msdn.microsoft.com/en-us/library/system.data.objects.mergeoption.aspx)重新读取来刷新查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T16:13:02.897

如果您使用的是 SQL-Server 2008 或更高版本，则可以使用存储过程来完成您的工作。您需要定义一个`TYPE`与 SQL 中的数据表相同的值：

```
CREATE TYPE dbo.YourType AS TABLE (ID INT, Column1 INT, Column2 VARCHAR(5)...) 
```

然后将此类型传递给存储过程。

```
CREATE PROCEDURE dbo.InsertYourType (@YourType dbo.YourType READONLY)
AS
    BEGIN
        DECLARE @ID TABLE (ID INT NOT NULL PRIMARY KEY)
        INSERT INTO YourTable (Column1, Column2...)
        OUTPUT inserted.ID INTO @ID
        SELECT  Column1, Column2...
        FROM    @YourType

        SELECT  *
        FROM    YourTable
        WHERE   ID IN (SELECT ID FROM @ID)

    END 
```

这将捕获插入行的 ID，并返回所有新行。只要您的 c# 数据表符合 dbo.YourType 的格式，您就可以按照通常将参数传递给 SqlCommand 的相同方式传递它。

```
SqlCommand.Parameters.Add("@YourType", YourDataTable) 
```

我意识到这类似于您重新选择数据的建议，但选择应该很快，因为它只使用标识列。虽然您仍然存在使用 SQL 插入而不是大容量复制的问题，但您正在恢复到更多基于集合的解决方案，而不是 EF 的基于过程的解决方案。这与您发布的其中一个链接中接受的答案非常相似，但我使用表变量删除了几个阶段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T22:41:21.070

放：

```
yourContext.Configuration.AutoDetectChangesEnabled = false;
yourContext.Configuration.ValidateOnSaveEnabled = false; 
```

在 100 个插入的包中执行 SaveChanges()...尝试 1000 并查看更改。

由于在所有这些插入过程中，上下文是相同的，因此您可以每 1000 次插入重建上下文对象。var yourContext = new YourContext();

在我的导入数据过程中进行此改进，将其从 7 分钟缩短到 6 秒。

实际数字...在您的情况下不可能是 100 或 1000... 尝试并调整它。

# ruby-on-rails - 如何跟踪用户通过您的应用程序的流量

> ID：10398825
> 
> 赞同：0
> 
> 时间：2012-05-01T14:04:26.267
> 
> 标签：ruby-on-rails

假设我有一个 3 页的 RoR 应用程序。用户可以通过第 1 页或第 2 页上的按钮进入第 3 页。在第 3 页上，我如何跟踪他们的来源 - 以便我可以将它们发送回该页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:17:53.077

一种解决方案是用于`request.referer`将用户从他们到达的任何页面送回。

`<%= link_to "Back", request.referer %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:20:47.770

我认为有三种解决方案。

首先，将上一页的 url 存储在 session 中。请参阅：[如何在 rails 中保存 http referer](https://stackoverflow.com/questions/2341879/how-to-save-http-referer-in-rails)

其次，将 url 存储在`params`get 请求中。例如，第 1 页上的按钮将如下所示：`link_to "page 3", "/page3", :ref => "page1"`

第三，使用@johnernaut 已经回答的http referer

# cakephp - 如何从控制器中的选中复选框中获取值？

> ID：10398827
> 
> 赞同：0
> 
> 时间：2012-05-01T14:04:45.730
> 
> 标签：cakephp, cakephp-2.1

如何从选中的复选框中获取值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:09:02.017

在表单提交后，所有数据都存储在`$this->data`（只读）或`$this->request->data`（可以修改）中。将上述内容包装`$this->data`在`debug()`调用中以查看返回数据的结构。它可能大致如下所示：

```
 array(
    'ModelName' => array(
      'name' => 'value',
      'name' => 'value'
    )
  ) 
```

# java - SqlServer/MyBatis SqlMapConfig 数据源设置

> ID：10398831
> 
> 赞同：5
> 
> 时间：2012-05-01T14:05:19.947
> 
> 标签：java, sql-server, mybatis

我正在完成[这个 MyBatis 教程](http://loianegroner.com/2011/02/getting-started-with-ibatis-mybatis-xml-configuration/)，并且遇到了在 SqlMapConfig.xml 中设置数据源的问题。该教程使用 MySql，就像互联网上存在的所有其他教程一样，但我使用的是 SqlServer 2008。

请帮助我将以下代码转换为连接到本地 SqlServer，或帮助我了解如何设置环境/SqlMapConfig 如何与连接工厂一起使用。

信息/教程的链接也很棒。

谢谢！

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration
    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>

    <typeAliases>
        <typeAlias alias="Contact" type="com.name.model.Contact"/>
    </typeAliases>

    <environments default="development">
        <environment id="development">
          <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="com.mysql.jdbc.Driver"/>
                <property name="url" value="jdbc:mysql://localhost:3306/blog"/>
                <property name="username" value="root"/>
                <property name="password" value="root"/>
            </dataSource>
       </environment>
    </environments>

    <mappers>
       <mapper resource="com/name/data/Contact.xml"/>
    </mappers>

</configuration> 
```

**更新：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration
    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>

    <typeAliases>
        <typeAlias alias="Contact" type="com.name.model.Contact"/>
    </typeAliases>

    <environments default="development">
        <environment id="development">
          <transactionManager type="JDBC"/>
            <dataSource type="POOLED">
                <property name="driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
            <property name="url" value="jdbc:sqlserver://localhost(or name of server):1433;databaseName=yourdbname; catalogName=sameasdbname"/>
            <property name="username" value="root"/>
            <property name="password" value="root"/>
            </dataSource>
       </environment>
    </environments>

    <mappers>
       <mapper resource="com/name/data/Contact.xml"/>
    </mappers>

</configuration> 
```

**注意：** 我在 SQL 2008 中使用最新的 JDBC 驱动程序 4，并且有版本问题，特别是错误：“异常数据：java.lang.UnsupportedClassVersionError (com/microsoft/sqlserver/jdbc/SQLServerDriver) 偏移量 = 6 处的主要版本错误……”

切换到 sqljdbc3/sqljdbc4.jar 上的兼容驱动程序 sqljdbc.jar 以解决此问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:50:45.617

要连接到 SQL Server（或任何其他数据库），您需要两个基本的东西：

*   适当的 JDBC 驱动程序。
*   配置数据源时的适当属性；

对于驱动程序，我想您可以选择“[官方](http://msdn.microsoft.com/en-us/sqlserver/aa937724)”Microsoft JDBC Driver for SQL Server 分发版，您必须在应用程序的类路径中提供该驱动程序，然后在 MyBatis 配置中配置数据源属性，其中涉及指定驱动程序类（`com.microsoft.sqlserver.jdbc.SQLServerDriver`如果我是没有记错）和连接 url（必须以`jdbc:sqlserver://`代替开头`jdbc:mysql://`）。

您可以在官方页面上找到更多信息，该页面将提供[适当的链接](http://msdn.microsoft.com/en-us/library/ms378672%28v=sql.100%29.aspx)来帮助您完成所有操作（只需确保您阅读了您的 SQL Server 版本的文档；SQL Server 2012 已经发布，因此 Microsoft 更新了他们的文档）。

然后根据您正在运行的查询类型（对于基本教程，因为这不应该是一个问题），您必须确保使用[正确的 SQL 语法](http://troels.arvin.dk/db/rdbms/)。

# javascript - 使用 Javascript parseInt() 和 Radix 参数

> ID：10398834
> 
> 赞同：33
> 
> 时间：2012-05-01T14:05:24.630
> 
> 标签：javascript, parseint, radix

谁能解释**parseInt()**函数的工作原理以及**Radix 参数**是什么？

作为一个案例研究，我试图掌握这个代码片段：

```
var maxChars = parseInt( formField.attr('maxlength') ? formField.attr('maxlength') : counter.text() ); 
```

你能解释一下这段代码是如何工作的吗？为什么**formField.attr('maxlength')**有两次？我发现这里使用运算符非常令人困惑！

在这个例子中基数参数是如何工作的？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-01T14:06:32.770

是的`radix`另一个名称，即 2 表示二进制，10 表示十进制，16 表示十六进制，在[Mozilla 开发者网络站点](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)`base`上有更详细的解释。

在您的示例*中，没有 radix 参数*，因此解释器将退回到默认行为，该行为通常将数字视为十进制，除非它们以零（八进制）或`0x`（十六进制）开头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-04T19:48:04.360

在 ECMA 脚本 5 中，当字符串以 0 开头且未指定基数时，默认行为是十进制（与早期版本中的八进制相反）

资料来源：[Mozilla 开发者网络上的 parseInt()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-02T18:09:30.717

**parseInt**有*两个参数*，第二个是可选的。字符串和基数。

**String**是要解析的值。如果提供的值不是字符串，它会将其转换为字符串。

**Radix**是 2 到 36 之间的整数*，表示*上述字符串的基数（数学数字系统中的基数）。

*在您的代码片段中，未指定 Radix，假定为默认 16。*

```
var maxChars = parseInt( formField.attr('maxlength') ? formField.attr('maxlength') : counter.text() ); 
```

您正在定义一个名为“maxChars”的变量。此变量等于对简写 IF 语句的评估。

您正在从变量中获取属性，该变量应该是一个名为“maxLength”的选择器“formField”。该值将作为整数返回，它将回退到它的默认基数。

IF 语句检查返回值是真还是假。0，false，其他会导致变量“maxChars”的值被设置为“counters”组合文本。如果为真，它将导致变量被设置为选择器“formField”属性，称为“maxLength”。

```
formField.attr('maxlength') 
```

是否存在两次，因为一个用于 IF 语句评估，另一个用作 IF 语句中的条件结果为 TRUE 的值。

# c# - 像在十六进制编辑器中一样将字节数据转换为字符串输出

> ID：10398836
> 
> 赞同：4
> 
> 时间：2012-05-01T14:05:37.607
> 
> 标签：c#, hex, hex-editors

我正在寻找将返回字节数据的字符串表示形式的方法，就像十六进制编辑器一样。它应该有一个参数，它`byte[]`返回`string`如下： ![应该是这样](../Images/63b3df4db260019191707136978b972f.png)

此方法应正确处理转义字符、空值和对齐文本。我想在`Debug.WriteLine()`. 请在这件事上给予我帮助！谢谢！

更新：好的。谢谢大家。以下是Darin Dimitrov的即用型解决方案链接[http://illegalargumentexception.blogspot.fr/2008/04/c-file-hex-dump-application.html](http://illegalargumentexception.blogspot.fr/2008/04/c-file-hex-dump-application.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:08:03.343

您可以使用[ToString](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)方法：

```
public static string ToString(byte[] buffer)
{
    return BitConverter.ToString(buffer);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:07:14.277

尝试这个 ：

```
 byte[] b1 = ...

  string h = System.Text.Encoding.UTF8.GetString(b1); 
```

# ios - 这次崩溃的可能原因是什么？

> ID：10398839
> 
> 赞同：2
> 
> 时间：2012-05-01T14:05:39.243
> 
> 标签：ios, stack-trace

我意识到这是一个有点模糊的问题，但我正在寻找一个开始的地方。我有 testflight 实时运行，并注意到以下崩溃：

```
0 Powercents 0x000781de testflight_backtrace + 142
1 Powercents 0x00078d6c TFSignalHandler + 212
2 libsystem_c.dylib 0x319937ec _sigtramp + 48
3 libsystem_c.dylib 0x3198920e pthread_kill + 54
4 libsystem_c.dylib 0x3198229e abort + 94
5 AppSupport 0x35f70c2e abortAfterPassingIntegrityCheck + 38
6 AppSupport 0x35f70ee6 runIntegrityCheckAndAbort + 526
7 AppSupport 0x35f7102c checkResultWithStatement + 120
8 AppSupport 0x35f72a12 _connectAndCheckVersion + 1058
9 AppSupport 0x35f72ab6 CPSqliteDatabaseConnectionForWriting + 42
10 AppSupport 0x35f72b8c CPSqliteDatabaseRegisterFunction + 20
11 AddressBook 0x345523f6 ABCDBContextCreateWithPathAndAddressBook + 214
12 AddressBook 0x34546428 ABCCreateAddressBookWithDatabaseDirectoryAndForceInProcessMigrationInProcessLinkingAndResetSortKeys + 232
13 AddressBook 0x34554cd6 ABAddressBookCreate + 14
14 TextInput 0x377981c4 _ZN2KB45fill_with_matchable_strings_from_address_bookERNS_7HashmapINS_6StringEbEE + 16
15 TextInput 0x3779edf4 _ZN2KB21DynamicDictionaryImpl28background_load_address_bookERKNS_16StaticDictionaryE + 200
16 TextInput 0x3779f72e _ZN2KBL14BackgroundLoadEPv + 278
17 libsystem_c.dylib 0x3194a734 _pthread_start + 320
18 libsystem_c.dylib 0x3194a5ef thread_start + 7 
```

从我在测试飞行中可以看出，崩溃似乎是在打开应用程序时发生的。

这是 applicationDidFinishLaunching 代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    NSDictionary *plistData = [[NSBundle mainBundle] infoDictionary];
    MB_LOG_LEVEL = [[plistData valueForKey:@"MBLogLevel"] intValue];

    NSArray *versionParts = [[plistData objectForKey:@"CFBundleVersion"] componentsSeparatedByString:@" "];

    self.versionString = [NSString stringWithFormat:NSLocalizedString(@"version.string", nil),
                          [plistData objectForKey:@"CFBundleShortVersionString"], 
                          // accounts for $Rev: 407 $
                          [versionParts objectAtIndex: ([versionParts count] > 1 ? 1 : 0)],
                          [plistData objectForKey:@"MBBuildDate"]
                          ];

    [self bootstrap];

    // TestFlight and Google Analytics
    [Tracking startup];

    // Add the tab bar controller's current view as a subview of the window
    // Note: Do it this way, since the UIWindow class has no rootViewController
    // property in iOS 3.x.
    [window_ addSubview:self.tabBarController.view];
    [window_ makeKeyWindow];

    // set up APNS with Urban Airship
    [self initAirship:launchOptions];

    // If it is the first time running the app, delete all local notifications
    [self cleanLocalNotifications];

    // Handle launching from a notification
    UILocalNotification *localNotif =
    [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotif) {
        NSLog(@"Recieved Notification %@",localNotif);
    }    

    return YES;
} 
```

这是引导方法：

```
- (void)bootstrap
{    
    // simple check for a bootstrapped db
    Settings *settings = (Settings*)[DataManager objectForEntity:NSStringFromClass([Settings class]) 
                                            sortDescriptorsOrNil:nil
                                                  predicateOrNil:nil];
    if (!settings) {
        settings = (Settings*)[DataManager createManagedInstance:NSStringFromClass([Settings class])];
        [settings setEnergyMobileFirstRun:[NSNumber numberWithBool:YES]];
        [settings setFirstRun:[NSNumber numberWithBool:YES]];
        [settings setShowWelcomeAlertView:[NSNumber numberWithBool:YES]];
        [settings setOnPeakAlertNotificationTime:[NSNumber numberWithInt:0]];
        [settings setMidPeakAlertNotificationTime:[NSNumber numberWithInt:0]];
        [settings setOffPeakAlertNotificationTime:[NSNumber numberWithInt:0]];
        [settings setOnPeakAlertNotificationsActive:[NSNumber numberWithBool:NO]];
        [settings setMidPeakAlertNotificationsActive:[NSNumber numberWithBool:NO]];
        [settings setOffPeakAlertNotificationsActive:[NSNumber numberWithBool:NO]];
        [DataManager saveManagedInstances];
    }
    if ([settings.firstRun boolValue])
    {
        // Clear the Database
        [DataManager deleteAllObjectsForEntity:@"Appliance"];
        [DataManager deleteAllObjectsForEntity:@"Answer"];
        [DataManager deleteAllObjectsForEntity:@"AnsweredQuestion"];
        [DataManager deleteAllObjectsForEntity:@"Question"];
        [self loadSavingsTipData];
        [self createChecklistTips];
        [self initializeTimeOfUseBehaviour];
        [settings setFirstRun:[NSNumber numberWithBool:NO]];
        [DataManager saveManagedInstances];
    }
} 
```

编辑以添加更多信息：

此堆栈跟踪来自 TestFlight live。崩溃来自从应用商店购买的应用。

这是整个堆栈跟踪：

```
 PRIMARY THREAD THREAD 10

0 Powercents 0x000781de testflight_backtrace + 142
1 Powercents 0x00078d6c TFSignalHandler + 212
2 libsystem_c.dylib 0x319937ec _sigtramp + 48
3 libsystem_c.dylib 0x3198920e pthread_kill + 54
4 libsystem_c.dylib 0x3198229e abort + 94
5 AppSupport 0x35f70c2e abortAfterPassingIntegrityCheck + 38
6 AppSupport 0x35f70ee6 runIntegrityCheckAndAbort + 526
7 AppSupport 0x35f7102c checkResultWithStatement + 120
8 AppSupport 0x35f72a12 _connectAndCheckVersion + 1058
9 AppSupport 0x35f72ab6 CPSqliteDatabaseConnectionForWriting + 42
10 AppSupport 0x35f72b8c CPSqliteDatabaseRegisterFunction + 20
11 AddressBook 0x345523f6 ABCDBContextCreateWithPathAndAddressBook + 214
12 AddressBook 0x34546428 ABCCreateAddressBookWithDatabaseDirectoryAndForceInProcessMigrationInProcessLinkingAndResetSortKeys + 232
13 AddressBook 0x34554cd6 ABAddressBookCreate + 14
14 TextInput 0x377981c4 _ZN2KB45fill_with_matchable_strings_from_address_bookERNS_7HashmapINS_6StringEbEE + 16
15 TextInput 0x3779edf4 _ZN2KB21DynamicDictionaryImpl28background_load_address_bookERKNS_16StaticDictionaryE + 200
16 TextInput 0x3779f72e _ZN2KBL14BackgroundLoadEPv + 278
17 libsystem_c.dylib 0x3194a734 _pthread_start + 320
18 libsystem_c.dylib 0x3194a5ef thread_start + 7
Hide Other Threads

THREAD 1 COM.APPLE.NSURLCONNECTIONLOADER

0 CoreFoundation 0x3738f12a __CFRunLoopRun + 882
1 CoreFoundation 0x373124a4 CFRunLoopRunSpecific + 300
2 CoreFoundation 0x3731236c CFRunLoopRunInMode + 104
3 Foundation 0x37b67bb8 +[NSURLConnection(Loader) _resourceLoadLoop:] + 308
4 Foundation 0x37b67a80 -[NSThread main] + 72
5 Foundation 0x37bfb590 __NSThread__main__ + 1048
6 libsystem_c.dylib 0x3194a734 _pthread_start + 320
7 libsystem_c.dylib 0x3194a5ef thread_start + 7
THREAD 2 COM.APPLE.CFSOCKET.PRIVATE

0 libsystem_c.dylib 0x3194a5ef thread_start + 7
THREAD 3 THREAD 11

Empty Stacktrace

THREAD 4 WEBTHREAD

0 CoreFoundation 0x3738f12a __CFRunLoopRun + 882
1 CoreFoundation 0x373124a4 CFRunLoopRunSpecific + 300
2 CoreFoundation 0x3731236c CFRunLoopRunInMode + 104
3 WebCore 0x32fd20f6 _ZL12RunWebThreadPv + 402
4 libsystem_c.dylib 0x3194a734 _pthread_start + 320
5 libsystem_c.dylib 0x3194a5ef thread_start + 7
THREAD 5 THREAD 8

0 CoreFoundation 0x3738f12a __CFRunLoopRun + 882
1 CoreFoundation 0x373124a4 CFRunLoopRunSpecific + 300
2 CoreFoundation 0x3738f44a CFRunLoopRun + 98
3 Powercents 0x000a9f0a +[UA_ASIHTTPRequest runRequests] + 134
4 Foundation 0x37b67a80 -[NSThread main] + 72
5 Foundation 0x37bfb590 __NSThread__main__ + 1048
6 libsystem_c.dylib 0x3194a734 _pthread_start + 320
7 libsystem_c.dylib 0x3194a5ef thread_start + 7
THREAD 6 THREAD 12

Empty Stacktrace

THREAD 7 THREAD 0

0 CoreFoundation 0x3738f0f0 __CFRunLoopRun + 824
1 CoreFoundation 0x373124a4 CFRunLoopRunSpecific + 300
2 CoreFoundation 0x3731236c CFRunLoopRunInMode + 104
3 GraphicsServices 0x3221f438 GSEventRunModal + 136
4 UIKit 0x33a96e7c UIApplicationMain + 1080
5 Powercents 0x0004cfb2 main + 66
6 Powercents 0x0004cf6b start + 39
THREAD 8 THREAD 1

0 0xffffffff + 0
THREAD 9 THREAD 2

Empty Stacktrace

THREAD 10 THREAD 3

Empty Stacktrace

THREAD 11 THREAD 6

Empty Stacktrace

THREAD 12 THREAD 7

0 CoreFoundation 0x3738f12a __CFRunLoopRun + 882
1 CoreFoundation 0x373124a4 CFRunLoopRunSpecific + 300
2 CoreFoundation 0x3731236c CFRunLoopRunInMode + 104
3 Foundation 0x37b5bb74 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 256
4 Foundation 0x37b75522 -[NSRunLoop(NSRunLoop) run] + 78
5 Powercents 0x0008d25c -[TFNetworkManager networkRunLoopThreadEntry] + 72
6 Foundation 0x37b67a80 -[NSThread main] + 72
7 Foundation 0x37bfb590 __NSThread__main__ + 1048
8 libsystem_c.dylib 0x3194a734 _pthread_start + 320
9 libsystem_c.dylib 0x3194a5ef thread_start + 7 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T19:52:01.903

I am currently seeing an identical crash in Production on iOS 5.1 devices only. Although I'm not sure what is triggering the crash, I think it's safe to say this was an Apple bug that has been fixed in iOS 6.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:12:23.433

在我看来，您的应用程序适用于 iOS 通讯簿。如果您可以调试您的应用程序，请尝试通过更改通讯簿 API 调用在连接时模拟此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T14:14:40.063

它看起来与地址簿相关 - 请发布整个崩溃报告。

看起来好像正在初始化 AddressBook API，并且在打开支持的 sqlLite 数据库时发生错误。也许 connectAndCheckVersion 以某种方式失败。

TestFlight 之所以存在，是因为它安装了一个包罗万象的信号处理程序以向 TestFlight Live 报告应用程序崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T17:51:39.067

我不完全确定，但在我看来，这个答案与我遇到的问题相同：

[应用程序“未能及时恢复”并挂起](https://stackoverflow.com/q/7822988/472344)

# python - 使用哪个 RRD 接口？

> ID：10398841
> 
> 赞同：2
> 
> 时间：2012-05-01T14:05:56.310
> 
> 标签：python, rrdtool

我正在寻找使用 Python 和 RRD 从 MySQL 数据库中的数据创建图表。我看到有两个RRD接口：

*   [RRD工具](http://oss.oetiker.ch/rrdtool/prog/rrdpython.en.html)
*   [PyRRD](http://pypi.python.org/pypi/PyRRD)

是否有一个普遍的偏好/理由来选择一个而不是另一个？我知道 PyRRD 是用 Python 编写的，所以这可能是精益的方式，但我想获得社区的意见。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T21:30:03.327

虽然 RRDTool 能够从 DBI（例如 MySQL）源而不是其自己的 RRD 文件中提取数据，但如果您发现自己处于这种情况，通常最好使用不同的图形包。然而，这不是最初的问题......

至于 RRDTool（shell 接口）和 PyRRD（Python 接口），它们都是同一个底层库函数的接口；Perl、Ruby、PHP 和其他几种语言也存在接口。底层代码是相同的，所以它只取决于你喜欢用哪种语言编写。一般来说，你希望使用 C/C++ 库会快一点，而分叉到命令行界面会慢一些，但是最终结果是相同的，因此取决于您的首选语言。

# jquery - jquery autocomplete 不确定如何加载 C# 处理程序

> ID：10398843
> 
> 赞同：0
> 
> 时间：2012-05-01T14:06:01.093
> 
> 标签：jquery, asp.net

我的 asp.net 页面上有一个简单的文本框，其中包含一个更新面板：

```
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Always" ChildrenAsTriggers="true" runat="server">
                                    <ContentTemplate>
                                        <asp:TextBox ID="txtShipToName" runat="server" 
                                            ToolTip="Enter a name such as a company name or contact name." 
                                            MaxLength="50"></asp:TextBox>
                                    </ContentTemplate>
                                    </asp:UpdatePanel> 
```

试图实现自动完成......所以我创建了一个 .ashx 文件（一个 IHttpHandler），如下所示：

```
 public class LoadAddress : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            DataSet ds;
            Dictionary<long, string> lstAddresses = new Dictionary<long, string>();

            ds = BL.GetAddresses(string.Empty, "both", 0, 100); //just snatching some data...

            foreach(DataRow dr in ds.Tables[0].Rows)
            {
                lstAddresses.Add(Convert.ToInt64(dr["AddressID"].ToString()), dr["Name"].ToString());
            }

            StringBuilder builder = new StringBuilder();

            foreach (KeyValuePair<long, string> item in lstAddresses)
            {
                builder.Append(string.Format("{0}|{1}|{2}",
                      item.Value,
                      item.Key,
                      Environment.NewLine));
            }

            context.Response.Write(builder.ToString());
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    } 
```

但我不确定如何在 jquery 中调用它，我试过：

```
 $("#<%= txtShipToName.ClientID %>").autocomplete('LoadAddress.ashx').
        result(function (event, data, formatted) { // data[0] : Address, data[1] : Address ID
        }); 
```

但是结果是未定义的，请注意这个方法甚至不存在......我怎样才能调用 LoadAddress.ashx？

# 编辑

我添加到网络配置文件中：

```
 <httpHandlers>
      <add verb="*" path="LoadAddress.ashx" type="MyShipper.LoadAddress"/>
    </httpHandlers> 
```

但是自动完成似乎不起作用......在jquery中我将其更改为：

`$("#<%= txtShipToName.ClientID %>").autocomplete('LoadAddress.ashx');`

但就像我说的那样，不会出现自动完成功能。chrome的开发者工具没有错误。我会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:19:36.760

您是否`LoadAddress`在 web.config 中注册了您的处理程序？

(iis 6):

```
<system.web>
  <httpHandlers>
      <add verb="*" path="LoadAddress.ashx" type="NameOfClass, NameOfAssembly"/>
  </httpHandlers>
</system.web> 
```

（对于 iis 7+）：

```
<system.webServer>
  <handlers>
      <add name="LoadAddress" verb="*" path="LoadAddress.ashx" type="NameOfClass, NameOfAssembly"/>
  </handlers>
</system.webServer> 
```

# c++ - 是否有推荐的设计模式用于与进程通信参数？

> ID：10398852
> 
> 赞同：2
> 
> 时间：2012-05-01T14:06:43.643
> 
> 标签：c++, oop, design-patterns, object

我有一个由许多类组成的信号处理路径。每个处理类都是较小类的组合，每个类都有自己的参数。

到现在为止，我一直偷懒，把所有的处理参数都存储在一个单独的参数类中。我把它作为`friend`所有处理类的一个，这样他们就可以直接访问它的数据成员。然而，这使得各个块和参数类之间的耦合非常强，使得设计完全不灵活。

我正在重新设计代码，以便每个小进程都拥有它自己的私有数据成员，以便发挥作用以减少耦合。但是现在，如果加载了一组新参数，我需要一个复杂的方法来设置每个单独的处理块中的所有参数（使用访问器函数）。此方法中的命令将与流程紧密耦合。如何最小化这种耦合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:17:33.423

我会建议类似于[Context Pattern](http://accu.org/index.php/journals/246)的东西。在构建流程时，将它们与上下文对象或对象一起加载（您可以为各种流程提供各种上下文）。然后让每个进程从给定的上下文对象中请求和检索必要的参数。这样，您将设置过程参数的责任完全转移到这些过程中。换句话说，进程知道它需要什么参数，因此进程可以从给定的上下文对象中请求它们并直接设置其私有存储的成员。

请注意，上下文模式有多种风格，通常它是相当灵活的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:33:52.460

您可以开发通用上下文（在映射中具有键/值）或从 SpecificContextBase 继承的特定上下文，这些上下文将具有所有进程共有的参数。

GenericContext 的优点是您不必更改它来添加/删除参数，但缺点是访问每个参数的查找成本。

SpecificContext 的优点是访问参数没有查找成本，但缺点是添加/删除参数的修改。至少使用此选项，您应该只需要修改特定于一个进程的具体 Context 类，它不应该影响其他任何东西。

# apache - apache - 更改目录

> ID：10398857
> 
> 赞同：0
> 
> 时间：2012-05-01T14:07:21.620
> 
> 标签：apache, .htaccess, mod-rewrite

好的，这是问题

我只能从 directadmin 访问服务器，我想更改基本目录

在 public_html 我有框架文件和公共目录，当我访问我的网站时，我想运行公共文件夹

所以目录必须是 public_html/public 而不是 public_html/

ps 我不想重定向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:31:24.020

您需要编辑您的虚拟主机配置并将[DocumentRoot](http://httpd.apache.org/docs/current/mod/core.html#documentroot)更改为`/absolute/path/to/public_html/public`

# ruby-on-rails - RSpec：应该有_选择器失败，但标题存在

> ID：10398864
> 
> 赞同：0
> 
> 时间：2012-05-01T14:07:55.317
> 
> 标签：ruby-on-rails, rspec

我已经谷歌并阅读了大约 4 个小时的 stackoverflow，但无法理解，为什么类似于 rails 教程的测试会失败。

测试很简单：

```
 # encoding: utf-8

require 'spec_helper'

describe "StaticPages" do
  subject { page }

  describe "Contacts page" do
    before { visit contacts_path }

    it { should have_selector(:title, text: "|") }
  end
end
```

所以，我添加了 save_and_open_page 来查看我的联系人页面有什么问题，但它看起来不错。存在标题标签并包含“|”。

我无法理解，怎么了。我有：

*   尝试访问；
*   响应而不是页面；
*   在正文中永久检查其他内容（body.should have_selector(:h1)）。

我还试图了解如何将 rspec 输出提高到更多信息。现在我看到：

```
Failure/Error: it { should have_selector(:title, text: "|") }
       expected id :title with text "|" to return something 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:19:52.417

据我所知`have_selector`，它是一个 Capybara 匹配器，根据[教程](https://github.com/jnicklas/capybara)作为第一个参数，您可以在引号或 xpath 表示法中使用 html 元素名称，但不能使用符号。

# java - 具有扩展多个类型的参数的列表

> ID：10398867
> 
> 赞同：3
> 
> 时间：2012-05-01T14:07:56.917
> 
> 标签：java, generics

使用泛型方法可以扩展一种以上的类型，例如：

```
<T extends MyClass & MyInterface> void foo(T bar) 
```

有没有办法用一个扩展多个类型的参数来指定一个列表？

```
List<MyClass & MyInterface> myList; 
```

不工作...

这将允许以下操作：

```
class A extends MyClass implements MyInterface{}

class B extends MyClass implements MyInterface{}

myList.add(new A());
myList.add(new B());

MyClass c = myList.get(index);
MyInterface i = myList.get(index);

foo(myList.get(index)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:11:14.403

这绝对是不可能的，除非这些类型属于同一类型层次结构（在这种情况下，您将指定`T extends TopMostBase`）。

如果可能的话，这将基本上打破泛型的整个想法（您也可以指定`List<?> myList`和处理它，就好像根本没有泛型一样，手动进行所有类型检查。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T14:11:36.850

答案是不。

根据您的语义期望，您会找到一种解决方法

foo 的一种可能的解决方法

```
 <T extends MyClass> void foo(T bar) {
     if (bar instanceof MyInterface) return;
   } 
```

可能最好的方法是创建一个提供两种类型的类型。缺点是，所有有趣的类都需要从该类派生

```
abstract class MyClassInterface extends MyClass implements MyInterface {}

List<MyClassInterface> myList;

<T extends MyClassInterface> void foo(T bar) 
```

仅提供两种方法的天真方法会导致歧义，因此这是不可能的（对于“AND”，对于“XOR”它是有效的）

```
<T extends MyClass> void foo(T bar)

<T extends MyInterface> void foo(T bar) 
```

# php - 如何使用 PHP 安全地连接到内部网络 SQLSRV 数据库？

> ID：10398870
> 
> 赞同：2
> 
> 时间：2012-05-01T14:08:11.443
> 
> 标签：php, sql, sql-server, sql-server-2008

如何使用 PHP 安全地连接到内部网络 SQLSRV 数据库？

我已阅读此内容，这可能与我收到的错误消息有关`Login failed for user 'NT AUTHORITY\IUSR'`

fastcgi.impersonate 设置为 1

在 SQL 数据库中没有 NT AUTHORITY\IUSR 设置，但在我设置之前我想知道它是否安全，或者是否允许任何人使用它进行连接。

如果那不是一种安全的连接方式，我如何使用 PHP 安全地连接到我的数据库？

当前带有虚拟信息的 PHP：

```
// Server in the this format: <computer>\<instance name> or 
// <server>,<port> when using a non default port number
$server='server\login';
$connectinfo=array("Database"=>"mydatabase");
//connect to DB
$db=sqlsrv_connect($server,$connectinfo);

if($db)
{
echo "Connection established.<br/>";
}
else
{
echo "Connection couldn't be established.<br/>";
die(print_r( sqlsrv_errors(), true));
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T14:11:49.913

在 SQL Server 2008 中创建了我自己的用户帐户，其范围仅适用于我正在处理的数据库。

# ruby - 谁可以在 resque 作业中本地化文本？

> ID：10398873
> 
> 赞同：1
> 
> 时间：2012-05-01T14:08:22.543
> 
> 标签：ruby, internationalization, resque

我想在 resque 工作中使用 i8ng？可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:24:48.410

是的，您应该可以访问 resque 作业中的整个 rails 堆栈。

如果没有，您可以随时手动进行：

```
 require 'i8ln'
   config = YAML.load_file("#{Rails.root}/config/locales/en.yml")
   ...
   ... 
```

# wpf - 在 WPF 主机中运行多个应用程序

> ID：10398877
> 
> 赞同：1
> 
> 时间：2012-05-01T14:08:40.230
> 
> 标签：wpf

我有几个独立的 WPF 应用程序需要在自己的进程中运行（它们不足以在单独的应用程序域或上下文中运行 - 它必须是一个单独的进程），但我的任务是寻找托管它们的方法在单个 WPF“框架”中（无论这可能意味着什么）。“框架”将负责在其自己的停靠系统中打开、关闭和移动每个应用程序。

谁能让我知道实现此类目标的最佳方法？也许潜在的陷阱？

# java - 带有附加信息的 Java 异常处理

> ID：10398878
> 
> 赞同：1
> 
> 时间：2012-05-01T14:08:55.637
> 
> 标签：java, exception-handling

> **可能重复：**
> [Java 异常处理](https://stackoverflow.com/questions/3625672/java-exception-handling)

在Java中，是否可以在控制台中打印带有错误信息的错误代码行号意味着：

```
try {
    // something
} catch(Exception e) {
    // modify this one to print line number of error with additional info
    System.out.println(e);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T14:11:12.373

是的。

```
catch(Exception e) {
    e.printStackTrace();
} 
```

或者你可以简单地抛出异常，这也会给你一个堆栈跟踪。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T14:11:03.483

只需使用

`e.printStackTrace();`

或者让异常冒泡，如果你想让你的程序在异常上停止。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T14:10:44.823

您可能正在寻找`e.printStackTrace()`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-01T14:11:32.500

请注意，如果您不想要完整的堆栈跟踪，则 Exception 方法[getStackTrace()会为您提供](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html#getStackTrace%28%29)[StackTraceElements](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StackTraceElement.html)数组。您可以查询这些以获取行号、文件名等，并生成一些自定义信息消息，突出显示异常的来源。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-01T14:12:11.983

`Throwable`（`Exception`扩展）有一个`getStackTrace()`返回 a的方法`StackTraceElement[]`，每个方法都包含一个方法 getLineNumber()。

所以：

```
e.getStackTrace()[0].getLineNumber() 
```

# facebook - 访问 Facebook 通知、消息等

> ID：10398883
> 
> 赞同：2
> 
> 时间：2012-05-01T14:09:16.133
> 
> 标签：facebook, command-line

我正在尝试构建一个命令行工具或纯文本界面以将 Facebook 用于个人用途。我想知道是否可以通过 python、c++、shell 脚本或 HTML 访问用户的通知、请求、消息等。如果是的话，如果我能找到一个合适的资源，我可以开始工作，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:47:57.127

这是一个好主意，并且完全可以使用 Facebook Graph API (https://developers.facebook.com/docs/reference/api/)。使用 API，您可以执行 GET、POST 和 DELETE 请求来查看、更新和删除帖子、查看新闻提要故事、阅读收件箱等。通读文档以查看可用内容。

但是，在开始之前，您应该考虑如何为用户获取访问令牌，因为所有重要的 Graph API 请求都需要它。一旦用户授予您的应用程序权限，就会授予访问令牌，这只能通过浏览器或移动应用程序中的弹出对话框进行。因此，您的用户需要先通过浏览器对您的应用进行身份验证，然后才能使用命令行工具。有关身份验证过程的信息，请参阅[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)。

# c# - ZipOutputStream 将数据文件附加到现有条目？

> ID：10398884
> 
> 赞同：1
> 
> 时间：2012-05-01T14:09:29.303
> 
> 标签：c#, asp.net, zip

ZipOutputStream 将数据文件附加到现有条目？

美好的一天，asp.net c#，框架 4.0

我使用 Ionic.Zip 压缩数据文件（上传器处理程序）来飞行。

上传大文件。

如果文件上传了全部内容（不是块） - 没关系，但如果文件上传有块......我有问题。

我如何将所有块上传文件添加到存档（一个文件 - 一个条目）？不保存文件本身的驱动器。

对不起我的英语不好。

我的部分代码：

创建长度为 = currents 块的临时文件

```
using (FileStream fs = new FileStream(Path.Combine(pathToCreate, "chunkfile"), FileMode.Create))
            {
                buffer = new byte[fileUpload.InputStream.Length];
                fileUpload.InputStream.Read(buffer, 0, buffer.Length);
                fs.Write(buffer, 0, buffer.Length);
            } 
```

获取 zip 条目：

```
using (ZipFile zipfile = ZipFile.Read(fullpath))
{ 
if (zipfile.ContainsEntry(fileName))
{
zipflag = true;
}
} 
```

如果 Entry 存在 - 追加数据，如果不存在，则创建新的：

```
if (!zipflag)
            {
                using (ZipFile zipfile = ZipFile.Read(fullpath))
                {
                        using ( FileStream input = new FileStream (Path.Combine(pathToCreate, "chunkfile"), FileMode.Open, FileAccess.Read))
                        {
                            using (FileStream output = new FileStream(fullpath, FileMode.Create, FileAccess.Write))
                            {
                                using (ZipOutputStream zipout = new ZipOutputStream(output))
                                {
                                    buffer = new byte[input.Length];
                                    zipout.PutNextEntry(fileName);
                                    int size;
                                    do
                                    {
                                        size = input.Read(buffer, 0, buffer.Length);
                                        zipout.Write(buffer, 0, size);
                                    } while (size > 0);
                                }
                            }
                        }
                }
            }
            else
            {

                    buffer = FileArray(Path.Combine(pathToCreate, "chunkfile"));
                    AppendAllBytes(fullpath, buffer);
             }
        }
public static void AppendAllBytes(string path, byte[] bytes)
{
   using (var stream = new FileStream(path, FileMode.Append))
     {
        using (ZipOutputStream zipout = new ZipOutputStream(path))
            {
               zipout.Write(bytes, 0, bytes.Length);
            }
     }
}
private byte[] FileArray(string filename)
{
   FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read);
   // Create a byte array of file stream length
   byte[] datachunk = new byte[fs.Length];

   //Read block of bytes from stream into the byte array
   fs.Read(datachunk, 0, System.Convert.ToInt32(fs.Length));

  //Close the File Stream
  fs.Close();
  return datachunk; //return the byte data
} 
```

变量此字符串，Zip 文件的完整路径。

我正在尝试使用：

```
using (var stream = new FileStream(path, FileMode.Append))
    {
        ZipFile zipfile = ZipFile.Read(path);
        using (StreamReader sr = new StreamReader(path))
        {
            var zn = zipfile.UpdateEntry(fileName, bytes);
            sr.Close();
            sr.Dispose();
        }
    } 
```

无效，文件不更新。

请帮忙。

# facebook - 为什么这个简单的 Facebook Connect 按钮不起作用？

> ID：10398887
> 
> 赞同：0
> 
> 时间：2012-05-01T14:09:38.233
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我在以下位置创建了一个简单的 facebook 登录页面：

[http://bit.ly/Ims3U6](http://bit.ly/Ims3U6)

在应用程序设置中：

```
App Domain: mysite.com
Address site: http://www.mysite.com 
```

但它不起作用......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:22:54.373

您在哪里处理令牌，您是否以某种方式保存它们？（保存或使用cookies）这很重要，因为当页面返回时，您需要将变量与原始令牌进行比较。

[这](https://developers.facebook.com/docs/authentication/)是一个很好的 fb 身份验证文档。

无论如何，您使用哪个sdk？

# jquery - jQuery 动画 tag I have an with an id of 'objectID'. I can modify its position with .css: $('#objectID').css({'top': "+=200px"}); But wh 问问题 问问题 2012-05-01T14:09:41.180 1471 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an with an id of 'objectID'. I can modify its position with .css: $('#objectID').css({'top': "+=200px"}); But when I use .animate it won't work: $('#objectID').animate({'top': "+=100px"}, 1000); or $('#objectID').animate({top: "10"}, slow); Or any other variation, which works on divs. Is there a limitation to animating object elements? Regular expression javascript to check comma separted numbers can somebody help me write a regex to use with test function for find exactly received number on list of string or numbers that has comma separated numbers. For ex. I have number 125 like argument and string like '12,74,48,125,1253,1' or if it more easy to use list of numbers 12,74,48,125,1253,1 (I can use both) How can I write regex to find exactly this number and return true o false. I used this one, but it don't find if number has 3 o 4 digits if(new RegExp('\\b'+number+'\\b').test('12,74,48,125,1253,1')){ alert('true'); } This list can also be just only one number like '125' I have little practice with regex. Thanks in advance. jqueryjquery-animate 4 4 回答 4 This answer is useful 3 由于不支持该标签，您可以像这样破解自己的动画： var obj = $('#objectID'); var speed = 50; var distance = 100; var i = setInterval(function() { obj.css({'top': '+=1px' }); if (parseInt(obj.css('top')) > distance) { clearInterval(i); } }, speed); 更改速度变量以获得您需要的动画速度。 这是 jsfiddle。 于 2012-05-01T14:50:42.373 回答 This answer is useful 0 为了与顶部动画，您的元素需要位置，例如位置：相对或位置：绝对。 于 2012-05-01T14:27:26.923 回答 This answer is useful 0 您是否为此对象包含了适当的 css？ #objectID{ position: absolute; top: 0px; ... } 确实我相信Object可能不会被支持animate()。我能够.css在 jsfiddle 中使用。 不过应该可以使用：http .css(): //jsfiddle.net/mkprogramming/bw9Kb/15/ 于 2012-05-01T14:29:11.370 回答 This answer is useful 0 $('#objectID').animate({'top': "+=100px"}, 1000); 周围不需要引号top。 $('#objectID').animate({top: "10"}, slow); 整数不应被引号包围，而slow应被引号包围。 那应该可以解决您的问题。 于 2012-05-01T14:29:22.733 回答 Related 7 jquery - jquery datatables actionlink如何添加 0 java - 使用 java xml 解析器在没有 CDATA 部分的情况下解析带有 HTML 内容的 XML 3 c# - 加载项目时DataGrid中的问题 1 iphone - UIWebView 触摸事件没有被触发 1 android - 将大量数据从 Java servlet 发送到 Android 应用程序 4 perl - #!/usr/bin/perl 中的 -T 或 -w 有什么意义？ 1 android - 使我的视图能够接受 xml 中的子视图 1 cassandra - Cassandra 中的最大键空间数是多少？ 2 ssl - 关于ssl的一些问题 1 ios - MPMoviePlayer 和 AVAudioRecorder Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10398888
> 
> 赞同：3
> 
> 时间：
> 
> 标签：jquery, jquery-animate

I have an `<object>` with an `id` of 'objectID'.

I can modify its position with `.css`:

```
$('#objectID').css({'top': "+=200px"}); 
```

But when I use `.animate` it won't work:

```
$('#objectID').animate({'top': "+=100px"}, 1000); 
```

or

```
$('#objectID').animate({top: "10"}, slow); 
```

Or any other variation, which works on divs. Is there a limitation to animating `object` elements?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:50:42.373

由于`<object>`不支持该标签，您可以像这样破解自己的动画：

```
var obj = $('#objectID');
var speed = 50;
var distance = 100;

var i = setInterval(function() {
    obj.css({'top': '+=1px' });
    if (parseInt(obj.css('top')) > distance) {
        clearInterval(i);
    }
}, speed); 
```

更改速度变量以获得您需要的动画速度。

[这是 jsfiddle](http://jsfiddle.net/bw9Kb/25/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:27:26.923

为了与顶部动画，您的元素需要位置，例如位置：相对或位置：绝对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:29:11.370

您是否为此对象包含了适当的 css？

```
​#objectID{
  position: absolute;
  top: 0px;
  ...
}​ 
```

确实我相信`Object`可能不会被支持`animate()`。我能够`.css`在 jsfiddle 中使用。

不过应该可以使用：http `.css()`: [//jsfiddle.net/mkprogramming/bw9Kb/15/](http://jsfiddle.net/mkprogramming/bw9Kb/15/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T14:29:22.733

`$('#objectID').animate({'top': "+=100px"}, 1000);` 周围不需要引号`top`。

`$('#objectID').animate({top: "10"}, slow);` 整数不应被引号包围，而`slow`应被引号包围。

那应该可以解决您的问题。

# javascript - 正则表达式 javascript 检查逗号分隔的数字

> ID：10398889
> 
> 赞同：1
> 
> 时间：2012-05-01T14:09:43.777
> 
> 标签：javascript, regex

有人可以帮我写一个正则表达式与测试函数一起使用，以在字符串列表或具有逗号分隔数字的数字列表中查找准确接收的数字。

例如。我有数字 125 之类的参数和字符串，例如 '12,74,48,125,1253,1' 或者更容易使用的数字列表 12,74,48,125,1253,1 （我可以同时使用两者）我该如何编写正则表达式准确地找到这个数字并返回真或假。

我用过这个，但它没有找到号码是否有 3 或 4 位数字

```
if(new RegExp('\\b'+number+'\\b').test('12,74,48,125,1253,1')){
alert('true');
} 
```

这个列表也可以只有一个数字，比如“125”，我很少使用正则表达式。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:14:42.233

> 如果它更容易使用数字列表 12,74,48,125,1253,1

不要使用正则表达式。只需检查数字是否在数组中。

```
var nums = [12,74,48,125,1253,1];
if (nums.indexOf(125) >= 0) {
    alert('true');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:19:01.267

如果您必须使用正则表达式，只需在字符串上使用`search`或，例如`match`

`var indexOfMatch = '12,74,48,125,1253,1'.search(/125/) // -1 if not present`

或者

`var arrayOfMatches = '12,74,48,125,1253,1'.match(/125/) //returns an array of matches`

然后您可以只测试返回的索引（如果它不是 -1）或返回的数组（如果它的长度 > 0）来确定是否存在 125。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:19:58.693

我建议使用[数组 indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)方法来解决您的问题。

```
var list = '12,74,48,125,1253,1';

function isset(num) {
   return list.split(',').indexOf(""+num) === -1 ? false : true;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-01T14:17:20.750

为什么它需要是一个正则表达式？如果您正在寻找一个确切的数字，请使用 indexOf：

```
var str = '12,74,48,125,1253,1';
var ix = str.indexOf('125');
if(ix == -1) /* number not found */; 
```

# iphone - Constrain Drag UIButton on diagonal path

> ID：10398890
> 
> 赞同：0
> 
> 时间：2012-05-01T14:09:50.457
> 
> 标签：iphone, objective-c, xcode, ios5, graphics

How can I constrain the drag-path of a button so that it can only be dragged to the centre of the screen from any point I want?

I know the current position of the UIButton and the centre coordinates. I need the current x and y formula for the drag event.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:44:08.883

这应该这样做。保存拖动的开始位置，获取每个移动事件的当前位置。将它们传递给这个函数。它将回答一个可以应用于按钮框架的向量。

计算的要点是通过选择阻力的最小分量（x 或 y）并回答在两个维度上具有相同大小的向量（保留两个轴上的符号）来确定大小。

```
// answer a vector to apply to an object's frame, constrained to a diagonal
- (CGPoint)constrainToDiagonalFrom:(CGPoint)from to:(CGPoint)to {

    CGPoint diff = CGPointMake(to.x-from.x, to.y-from.y);
    CGFloat magnitude = MIN(fabs(diff.x), fabs(diff.y));    // this is how large the drag will be
    return CGPointMake(copysignf(magnitude, diff.x), copysignf(magnitude, diff.y));
} 
```

像这样称呼它：

```
// on touches moved
// we saved startPoint on touches began
// get location from this event's touches

CGPoint diagonal = [self constrainToDiagonalFrom:startPoint to:location];
myButton.frame = CGRectOffset(myButton.frame, diagonal.x, diagonal.y); 
```

您可以随意计算幅度。最大分量，最小分量，平均值等。只要结果在两个维度上都是对称的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:43:58.070

你的意思是像：

```
if ((oldX - newX) < oldX && (oldY - newY) < oldY) {
    updatePosition(newX, newY);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:34:22.597

在拖动事件中放置一个条件。如果它被拖动到您需要的位置，则移动它；否则什么都不做。

# iphone - Uploading images and text to Iphone App

> ID：10398893
> 
> 赞同：0
> 
> 时间：2012-05-01T14:10:04.140
> 
> 标签：iphone, xcode

I am making an Iphone App. Using a Tab Bar. The first view controller will be showing images in a scrollview and the second will simply show a text. Now I would like to add new images and change the text weekly. What would be the best way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:19:53.523

有很多方法可以做到这一点，但是...

1) 将您的文本和 URL 粘贴到您的 Web 服务器上的 JSON 文本文件中的图像中。您的应用程序应经常检查文件并刷新文本片段和图像。

2) 您还可以依靠 RSS 提要来更新您的应用程序的内容。

3) 使用 WebView 并简单地显示来自您的 Web 服务器的网页。

# macos - Non-Latin input in emacsclient

> ID：10398897
> 
> 赞同：7
> 
> 时间：2012-05-01T14:10:21.330
> 
> 标签：macos, emacs, unicode, emacsclient

When run in foreground mode, Emacs inserts non-Latin input correctly.

It's when I run it as `emacs --damon` + `emacsclient`, begins the madness. Each keystroke, which should insert a character, results in an action, like selecting words, jumping around expressions, selecting functions and so on. Almost like (a horrifying thought) Vim!

Is there a configuration option I am missing?

**Update:**

Actually solved it: `M-x` `set-locale-environment` `RET``RET`.

It's still not clear why it doesn't use the system-wide locale settings (UTF-8).

**Update 2:**

Yay, fixed in trunk! Thanks to the one who did it!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:51:13.547

我的猜测是您的 emacsclient 会话是在 tty 中运行的，并且出于某种原因，Emacs 认为您在纯 ASCII 终端中运行，其中第 8 位字节标记了 Meta 密钥的使用。`locale`当您在 tty 中运行它时会返回什么？

# c++ - 指针可以是数据结构吗？

> ID：10398902
> 
> 赞同：0
> 
> 时间：2012-05-01T14:10:47.540
> 
> 标签：c++

指针可以被认为是一种高效的语义数据结构吗？它如何与链表、哈希、队列、堆栈叠加？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T14:11:39.130

不，指针只是一种类型，而不是结构。有一些结构的实现是类型（`std::vector`, `std::map`, ...），但指针不是。

它们通常在您枚举的结构的实现内部使用，但就其本身而言，指针不是结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:16:58.783

指针是一种数据*类型*，而不是数据结构（尽管一些术语相当松散的书籍会将诸如指针之类的基本类型定义为更大数据结构集的元素；无论如何，指针肯定不是*抽象*数据结构的示例.)

更相关的是，大多数 C++ 实现的抽象数据结构（如链表、队列、堆栈、树等）都使用指针作为数据*成员*；也就是说，**指针将构成实现的一部分**；它们不是实现本身。

例如，如果您正在考虑实现自己的链表，您可能会选择双重链接版本，其中列表中的每个元素都由包含指向前一个和下一个节点的指针的节点表示：

```
template <typename T>
class DLList
{
public:
    // Lots of things
private:
    Node* _head; // Pointer to the head of the list
    Node* _tail; // Pointer to the tail of the list
}; 
```

您的节点可能会像这样实现：

```
template <typename T>
struct Node {
    Node* _prev;
    Node* _next;
    T     _data;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:17:08.660

数据结构是一种在计算机中存储和组织数据的特殊方式，以便可以有效地使用它。指针确实是一种非常有效的存储和组织数据的方式，并且是当今寻址内存的主要方式。不过，这不是唯一的方法。例如，CPU 寄存器的寻址方式不同。所以第一个问题的答案是肯定的。

至于您的第二个问题，您无法真正将指针与哈希、队列、堆栈等高级数据结构进行比较。这是两个不同的抽象层次。更高级别的容器是使用指针等较低级别的数据结构来实现的。

# iphone - TableView 不显示行

> ID：10398904
> 
> 赞同：0
> 
> 时间：2012-05-01T14:11:00.520
> 
> 标签：iphone, xcode, tableview

我有一个带有根目录和第二个视图的导航控制器。第二个视图包含一个pickerview，用户可以将值设置为0到9。我将此值保存在nsuserdefaults中，并将其用于rootviev上tableview中的numberofrowsinsection。我从 userdefaults 中检索 pickervalue 并将其设置为 NSInteger。NSLog 向我显示了正确的值，但作为表的返回值-> 没有行。表格视图有效，（例如）4的返回值向我显示4行......

对我有什么想法吗？

这里是根视图：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
       return retValv ;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath          *)indexPath
{
UITableViewCell *cell;
cell = [UITableViewCell alloc];
cell = [cell initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
cell.textLabel.text = @"Test";
return cell;
}

-(IBAction)switch1:(id)sender {
 secondView *second=[[secondView alloc]initWithNibName:@"secondView" bundle:nil];

 [self.navigationController pushViewController:second animated:YES];

}

-(IBAction)showLog:(id)sender
{
NSLog(@"retValv is dzt. %i",retValv);

}

- (void)viewDidAppear:(BOOL)animated
{ 
[super viewDidAppear:animated];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
retValv = [defaults integerForKey:@"myInt"];
}
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
self.title = @"Locations";
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:       (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

和第二个视图：

```
#import "secondView.h"

@interface secondView ()

@end

@implementation secondView

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView
{
return 1;
}

-(NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:     (NSInteger)component
{
return 10;
}
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row     forComponent:(NSInteger)component
{
return [NSString stringWithFormat:@"%i",row];
}
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:    (NSInteger)component
{
NSLog(@"Gewählt: Zeile %i",row);

zeile = row;

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setInteger:row forKey:@"pickerRow"];
[defaults setInteger:zeile forKey:@"myInt"];
[defaults synchronize];

}

-(IBAction)showInt:(id)sender {

NSLog(@"show value %i",zeile);

  }

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

self.title = @"Settings";

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[picker selectRow:[defaults integerForKey:@"pickerRow"] inComponent:0 animated:NO];
zeile = [defaults integerForKey:@"myInt"];

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:16:59.040

在根视图中移动代码以将您的号码加载到 viewWillAppear 而不是 viewDidAppear。它加载数字太晚了（在加载和显示表格视图之后）。

# php - Check whether update_batch() is successful in CodeIgniter

> ID：10398907
> 
> 赞同：4
> 
> 时间：2012-05-01T14:11:06.977
> 
> 标签：php, codeigniter, activerecord

I'm running update_batch() on a table in CodeIgniter and I'd like to check whether it was successful.

I've tried using affected_rows(), but that only counts the number of form fields that have been modified so it doesn't quite cut it:

```
$this->db->update_batch("sections", $data, "alias");

log_message("debug", "items in form: ".count($data));
// items in form: 3

log_message("debug", "rows updated: ".$this->db->affected_rows()); 
// rows updated: 0-3 
// depending on whether anything was actually changed on the form

return ($this->db->affected_rows() == count($data)); // unreliable 
```

It seems like a fairly straightforward thing to ask from a batch update function. Is there something I've missed or should I just write my own batch update code?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T11:35:22.643

```
 $this->db->trans_start();
    $this->db->update_batch($table, $update, $variable);
    $this->db->trans_complete();        
    return ($this->db->trans_status() === FALSE)? FALSE:TRUE; 
```

希望这可以帮助！。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:26:21.627

使用一个简单的指令，这将返回真或假

```
return $this->db->update_batch("sections", $data, "alias"); 
```

# .net - msc_cntr_0_txt, asp.net charting: unauthorized access error occurs sporadically

> ID：10398909
> 
> 赞同：0
> 
> 时间：2012-05-01T14:11:13.990
> 
> 标签：.net, charts

MVC .NET 4.0 application is using Charting component and sporadically I get an unauthorized access error - the key word is sporadically.

web.config entry is as follows `<add key="ChartImageHandler" value="storage=file;timeout=20;dir=c:\Temp\AspNetCharting\;deleteAfterServicing=false;" />`

I was looking at other storage modes, i.e. memory or session, but file mode should work and I'm not quite sure why this fails for the same user and the same chart sporadically.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:41:59.513

我在留言板上发现了一些其他人的帖子，声称使用

```
chart1.ImageStorageMode = ImageStorageMode.UseImageLocation 
```

`Page_Load`事件解决了他们的问题。

# wpf - Does ListBox keep the CollectionViewSource per ItemsSource?

> ID：10398913
> 
> 赞同：1
> 
> 时间：2012-05-01T14:11:18.083
> 
> 标签：wpf, listbox, itemssource, collectionviewsource

I'm writing a control to explore a tree structure which can be dynamically created. This controls looks a lot like an explorer window, with a "CurrentItem" being the opened folder, some "ChildrenItems" being subfolders or files.

To display the ChildrenItems, I'm using a ListBox. When I click on a Child Item, I set the new CurrentItem to be the child Item, and update the ChildrenItems (going down the tree).

So technically, I often modify the ItemsSource property of the ListBox.

I also have some standard commands like "Go Up", "Go Back", "Root", etc

I have had some problem with the "Go Up" command, and noticed that when I change the ItemsSource property of the listbox to an ItemsSource I previoulsy set, the SelectedItem of the ListBox is reset to the old item selected when the old ItemsSource was used.

Maybe a little exemple would be more explicit : Let's say I have this tree structure :

```
 - Root
   - Node 1
     - SubNode 1a
     - SubNode 1b
   - Node 2
   - Node 3 
```

I begin exploring this structure by setting the "CurrentItem" as the Root. This mean that my ListBox ItemsSource is set to "Node1,Node2,Node3".

I then click on the "Node1" (which changes the SelectedItem). My Control then set its "CurrentItem" to this new SelectedItem, and also set the ListBox ItemsSource to "SubNode1a, SubNode1b".

After that, if I use my "Go Up" command, the "CurrentItem" is reset to "Root", and the ListBox ItemsSource to "Node1,Node2,Node3", but there is a difference : The "Node1" is selected.

This makes me think of a CollectionViewSource which is reused, therefore keeping the selected item. Is this possible?

Thanks for your insights.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:14:20.877

我发现了Bea Stollnitz的一篇有趣的[文章，她说：](http://bea.stollnitz.com/blog/?p=387)

> CollectionViewSource 还启用了另一个有趣的场景。如果一个特定的 CollectionViewSource 在不同的时间指向不同的集合，它会记住它为包装这些集合而创建的所有视图。如果再次设置了过去已设置的源，CVS 会识别它并重用它最初创建的视图。此行为在分层绑定方案中很有用。

这可能就是我一直在寻找的答案。我的下一个问题是：是否可以禁用此行为？

# html - 由于“singleCursorHandlerTouchEvent -getEditableSupport FASLE”，Phonegap 按钮不会触发

> ID：10398914
> 
> 赞同：2
> 
> 时间：2012-05-01T14:11:19.427
> 
> 标签：html, button, cordova, touch

在最新的 Android 4.0.3 中不会触发 phonegap 按钮。我收到调试消息

```
"singleCursorHandlerTouchEvent -getEditableSupport  FASLE" 
```

（注意拼写错误的 FALSE）之后按钮不会触发或执行任何操作。按钮的代码是

```
<div {{action someAction}}>click here</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:21:41.417

[这里](https://stackoverflow.com/questions/9517142/phonegap-touchevent)有一个类似的问题，同样的消息。这似乎是通过调整 div 的大小来解决的。我收到了同样的调试消息，但它不会影响我的事件处理程序。它还取决于正在测试的设备/模拟器。例如，此消息会显示在运行 ICS 4.0.3 的三星 Galaxy S2 上，但不会出现在模拟器或运行相同 Android 版本的 Nexus S 4G 中。最后（对我来说）在 webview 屏幕中的任何点击都会显示该消息。因此，这表明这只是与 webview 活动相关的调试消息，而不是 phonegap 的问题。

你有按钮的事件处理程序还是它们只是href链接？我假设 {{action someAction}} 将是某种处理程序，例如 onclick="functionName()"。尝试将事件处理程序附加到任何按钮。使用普通的 js 语法：

```
document.getElementById('ButtonID').addEventListener( 'click', function(){
     alert('clicked');
} 
```

# sql-server - How does SQL Server decide format for implicit datetime conversion?

> ID：10398921
> 
> 赞同：21
> 
> 时间：2012-05-01T14:11:55.777
> 
> 标签：sql-server, datetime, implicit-conversion, implicit

```
declare @str_datetime varchar(50)
set @str_datetime='30-04-2012 19:01:45' -- 30th April 2012
declare @dt_datetime datetime
select @dt_datetime=@str_datetime 
```

This is giving following error:

> Msg 242, Level 16, State 3, Line 4
> The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.

My question is how SQL Server decides which format to use for implicit datetime conversion?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-01T15:03:05.227

这可能取决于多种因素 - 操作系统的区域设置、当前用户的语言和日期格式设置。默认情况下，Windows 使用`US English`，用户的设置是`US English`和`MDY`。

但这里有一些例子来说明这种情况如何改变。

用户正在使用英国语言​​设置：

```
-- works:
SET LANGUAGE BRITISH;
SELECT CONVERT(DATETIME, '30-04-2012 19:01:45');

-- fails:
SELECT CONVERT(DATETIME, '04/13/2012');
GO 
```

（错误）

> 消息 242，级别 16，状态 3，第 5 行
> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

用户正在使用法语：

```
-- works:
SET LANGUAGE FRENCH;
SELECT CONVERT(DATETIME, '30-04-2012 19:01:45');

-- fails:
SELECT CONVERT(DATETIME, '04/13/2012');
GO 
```

（错误）

> Msg 242, Level 16, State 3, Line 1
> La conversion d'un type de données varchar en type de données datetime a créé une valeur hors limites。

用户再次使用 Français：

```
SET LANGUAGE FRENCH;

-- fails (proving that, contrary to popular belief, YYYY-MM-DD is not always safe):
SELECT CONVERT(DATETIME, '2012-04-30');
GO 
```

（错误）

> Msg 242, Level 16, State 3, Line 1
> La conversion d'un type de données varchar en type de données datetime a créé une valeur hors limites。

用户使用 DMY 而不是 MDY：

```
SET LANGUAGE ENGLISH;
SET DATEFORMAT DMY;

-- works:
SELECT CONVERT(DATETIME, '30-04-2012 19:01:45');

-- fails:
SELECT CONVERT(DATETIME, '04-30-2012');
GO 
```

（错误）

> 消息 242，级别 16，状态 3，第 2 行
> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

您最好的选择始终是使用 ISO 标准、非区域、安全、明确的日期格式。我通常推荐的两个是：

```
YYYYMMDD                  - for date only.
YYYY-MM-DDTHH:MM:SS[.mmm] - for date + time, and yes that T is important. 
```

这些都没有失败：

```
SET DATEFORMAT MDY;
SET LANGUAGE ENGLISH;
SELECT CONVERT(DATETIME, '20120430');
SELECT CONVERT(DATETIME, '2012-04-30T19:01:45');
SET LANGUAGE FRENCH;
SELECT CONVERT(DATETIME, '20120430');
SELECT CONVERT(DATETIME, '2012-04-30T19:01:45');
SET LANGUAGE BRITISH;
SELECT CONVERT(DATETIME, '20120430');
SELECT CONVERT(DATETIME, '2012-04-30T19:01:45');
SET DATEFORMAT DMY;
SELECT CONVERT(DATETIME, '20120430');
SELECT CONVERT(DATETIME, '2012-04-30T19:01:45'); 
```

因此，我强烈建议不要让用户输入自由文本日期格式（或者您自己使用不可靠的格式），而是控制您的输入字符串并确保它们遵守这些安全格式之一。那么无论用户有什么设置或基础区域设置是什么，您的日期将始终被解释为他们打算成为的日期。如果您当前让用户在表单上的文本字段中输入日期，请​​停止这样做并实现日历控件或至少一个选择列表，以便最终控制传递回 SQL Server 的字符串格式。

有关一些背景知识，请阅读 Tibor Karaszi 的[“日期时间数据类型的终极指南”](http://karaszi.com/the-ultimate-guide-to-the-datetime-datatypes)和我的帖子[“要踢的坏习惯：错误处理日期/范围查询”。](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T16:43:43.423

您还可以更改每个登录和/或每个未来添加的登录的默认日期格式（无需在每个会话中执行“SET DATEFORMAT”。

您进入 SQL Management Studio / Security / Logins。右键单击登录名，然后单击属性。您将在底部看到“默认语言”。

如果您想确保将来添加的任何登录都获得“好”的语言。您右键单击服务器根目录，然后单击属性和高级页面。那里还有一个“默认语言”选项，用于新创建的登录名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T14:20:33.853

> 默认情况下，SQL Server 的日期格式为美国日期格式 MM/DD/YY，**除非已安装 SQL Server 的本地化版本**。此设置适用于以下情况：需要此功能的应用程序的部署方式确保在使用该应用程序的所有平台和位置以相同格式使用和插入日期。
> 
> 但是，在某些情况下，日期必须采用 DD/MM/YY 格式，因为许多国家/地区使用这种格式，而不是美国默认的 MM/DD/YY。对于分布在世界各地的国际申请来说，这尤其是一个问题。

[资源](http://support.microsoft.com/kb/173907)

所以你需要做的是事先设置日期格式：

```
SET DATEFORMAT dmy
GO 
```

然后您的查询将起作用。

# package - Ada: Understanding private types and understanding packaging

> ID：10398922
> 
> 赞同：3
> 
> 时间：2012-05-01T14:11:57.193
> 
> 标签：package, private, ada

I am trying to learn how to use private declarations in Ada and also to understand packaging. I have tried to keep my codes as short as possible.

We start with the main file `rectangular_Form.ads`

```
with Rectangular_Method_1;
package Rectangular_Form renames Rectangular_Method_1;
-- with Rectangular_Method_2;
-- package Rectangular_Form renames Rectangular_Method_2; 
```

This tells us that we can have *two* implementations and that for now `Rectangular_Method_1` has been chosen.

Then we have the specifications file `Rectangular_Method_1.ads`:

```
package Rectangular_Method_1 is
   type Rectangular is private;

   procedure Vector_Basis_r (A : in Long_Float; D : out Rectangular);
   procedure Set_Horz (R : in out Rectangular; H : Long_Float);
   function Get_Horz (R : Rectangular) return Long_Float;

 private
   type Rectangular is
        record
             Horz, Vert: Long_Float;
        end record;
end Rectangular_Method_1; 
```

and its body `Rectangular_Method_1.adb`:

```
with Ada.Numerics.Long_Elementary_Functions;
use  Ada.Numerics.Long_Elementary_Functions;

package body Rectangular_Method_1 is
procedure Vector_Basis_r (A : in Long_Float; D : out Rectangular) is
begin
  D.Horz := Cos (A, Cycle => 360.0);
  D.Vert := Sin (A, Cycle => 360.0);
end Vector_Basis_r;

procedure Set_Horz (R : in out Rectangular; H : Long_Float) is
begin
  R.Horz := H;
end Set_Horz;

function Get_Horz (R : Rectangular) return Long_Float is
begin
  return R.Horz;
end Get_Horz;

end Rectangular_Method_1; 
```

and finally the test script: `test_rectangular_form.adb`:

```
with Ada.Long_Float_Text_IO;
with Ada.Text_IO; use Ada.Text_IO;
with Rectangular_Form;
use type Rectangular_Form.Rectangular;

procedure Test_Rectangular_Form is
Component_Horz, Component_Vert, Theta  : Long_Float;
Basis_r                                : Rectangular_Form.Rectangular;

begin
  Ada.Text_IO.Put("Enter the angle ");
  Ada.Long_Float_Text_IO.Get (Item => theta);

  --Vector basis
  Rectangular_Form.Vector_Basis_r (A => Theta, D => Basis_r);
  Ada.Text_IO.New_Line;

  Ada.Text_IO.Put("rhat_min_theta = ");
  Ada.Long_Float_Text_IO.Put (Item => Rectangular_Form.Get_Horz (Basis_r), Fore => 3, Aft  => 5, Exp  => 0);
  Ada.Text_IO.Put(" ihat + ");
  Ada.Long_Float_Text_IO.Put (Item => Rectangular_Form.Get_Vert (Basis_r), Fore => 3, Aft  => 5, Exp  => 0);
  Ada.Text_IO.Put (" jhat ");
end Test_Rectangular_Form; 
```

Question (applied to `test_rectangular_form.adb`):

I am getting the components `A.Horz` and `A.Vert` directly using

```
 Rectangular_Form.Vector_Basis_r (A => Theta, D => Basis_r); 
```

and accessing the horizontal and vertical components later on by just using

```
 Rectangular_Form.Get_Horz (Basis_r) 
```

and

```
 Rectangular_Form.Get_Vert (Basis_r) 
```

This seems OK as I am using the methods `Get_Horz` and `Get_Vert` to access the *private* *Rectangular* horizontal and vertical components. However I am reading the variable `Theta` directly from the command line and finding its horizontal and vertical components using

```
 Rectangular_Form.Vector_Basis_r (A => Theta, D => Basis_r); 
```

If the *Rectangular* components `A.Horz` and `A.Vert` are private as I have defined them, **why do not I have to use the methods `set_Horz(A)` and `set_Vert(A)` prior** to issuing the command

```
 Rectangular_Form.Vector_Basis_r (A => Theta, D => Basis_r); 
```

PS: The functions for `Set_Vert` and `Get_Vert` were omitted to keep the codes short.

Thanks a lot...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:58:35.583

> 为什么我不必在发出命令之前使用方法 set_Horz(A) 和 set_Vert(A)

因为您通过执行以下命令来*设置*私人记录的字段：

> Rectangular_Form.Vector_Basis_r (A => Theta, D => Basis_r);

（查看 Vector_Basis_r 的实现。）

-- 扩展答案

当您在 Test_Rectangular_Form 过程中声明 Basis_r 变量时，将为该“矩形”变量分配内存。此时私有类型中的 Horz 和 Vert 字段存在，但未设置（它们可以包含任何内容）。

当您调用 Rectangular_Form.Vector_Basis_r 时，它的实现会设置这些私有字段的值。也许这让你感到困惑：*声明私有类型的包的主体可以直接访问这些字段*。这正是 Vector_Basis_r 在设置其值（以及 Set_Vert 和 Set_Horz）时所利用的方面。

# c - Format and arguments inconsistency in printf

> ID：10398925
> 
> 赞同：1
> 
> 时间：2012-05-01T14:12:09.037
> 
> 标签：c, printf

For the following code:

```
#include <stdio.h>
int main(){
    printf("%f", 5);
    printf("%d", 5.01);
} 
```

The first statement will print 0.000000 and the second statement will print a large number.

I thought the printf see the format %f will pop a 4-byte argument from stack. Then I looked up some references that say the printf function will transform float into double, so 8-byte argument. So I thought it may print out a unpredictable value. But how could it print out a 0.000000\.

The second one is also weired. The binary format for 5.01 should be 0 10000001 01000000101000111101100 (0x40A051EC), It should be 1084248556 in decimal format, but the result of the statement is 1889785610\. Why is this happen?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T14:14:08.473

这很令人困惑，但`%d`它是整数的格式，例如`%i`（大多数人希望它是双精度的，因为`%f`它是浮点数，但事实并非如此）。您不能将它与双精度一起使用，您必须使用`%f`. 与 相同`%f`，不能使用整数；您必须使用浮点数或双精度数。

此外，`printf`不会检查您使用它的类型，它只是盲目地将字节解释为您告诉它您给它的类型。使用错误的类型和错误的类型说明符会产生未定义的行为，这就是您看到自己的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:16:11.173

在第一种情况下，`printf`提取 a `double`（由于`%f`），但您传递了`int`. 的格式`double`是不同的形式`int`（参见[IEEE-754](http://en.wikipedia.org/wiki/Floating_point#IEEE_754%3a_floating_point_in_modern_computers)了解最常用的`double`格式）

第二个是类似的：`printf`期望一个`int`（由于`%d`），但你传入一个`double`

当您传入不正确的类型时如何解释实际值是未定义的（可能取决于字节序等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T14:14:20.953

`printf`不是类型安全的，您应该确保为要打印的数据类型使用正确的格式描述符，否则无法保证`printf`将产生的结果。

# javascript - 如何从字符串中删除文本？

> ID：10398931
> 
> 赞同：832
> 
> 时间：2012-05-01T14:12:38.847
> 
> 标签：javascript, string

我有一个`data-123`字符串。

`data-`离开时如何从字符串中删除`123`？

* * *

## 回答 #1

> 赞同：1616
> 
> 时间：2012-05-01T14:14:00.627

```
var ret = "data-123".replace('data-','');
console.log(ret);   //prints: 123
```

[文档。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)

* * *

对于要丢弃的所有事件，请使用：

```
var ret = "data-123".replace(/data-/g,''); 
```

PS：replace函数返回一个新字符串，原字符串不变，所以使用replace()调用后的函数返回值。

* * *

## 回答 #2

> 赞同：158
> 
> 时间：2012-05-01T14:14:37.680

这与 jQuery 没有任何关系。`replace`您可以为此使用 JavaScript函数：

```
var str = "data-123";
str = str.replace("data-", ""); 
```

您还可以将正则表达式传递给此函数。在以下示例中，它将替换除数字以外的所有内容：

```
str = str.replace(/[^0-9\.]+/g, ""); 
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2014-05-08T10:21:04.727

`"data-123".replace('data-','');`如前所述，您可以使用，但`replace()`仅替换匹配文本的第**一个**实例，如果您的字符串类似于`"data-123data-"`then

```
"data-123data-".replace('data-',''); 
```

只会替换第一个匹配的文本。你的输出将是`"123data-"`

[演示](http://jsfiddle.net/QQB29/)

因此，如果您希望将所有匹配的文本替换为字符串，则必须使用带有如下`g`标志的正则表达式：

```
"data-123data-".replace(/data-/g,''); 
```

你的输出将是`"123"`

[演示2](http://jsfiddle.net/QQB29/1/)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2014-11-24T06:08:13.307

如果您事先知道需要从原始字符串中切出多少个字符，则可以使用 slice()。它返回给定起点到终点之间的字符。

```
string.slice(start, end); 
```

以下是一些展示其工作原理的示例：

```
var mystr = ("data-123").slice(5); // This just defines a start point so the output is "123"
var mystr = ("data-123").slice(5,7); // This defines a start and an end  so the output is "12" 
```

[演示](http://jsfiddle.net/mreza/Ltgwh6h2/)

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2012-05-01T14:14:06.650

普通的旧 JavaScript 就足够了——对于这样一个简单的任务，jQuery 不是必需的：

```
var myString = "data-123";
var myNewString = myString.replace("data-", ""); 
```

**有关更多信息和用法，**请参阅：**[`.replace()`MDN 上的文档。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)**

 *** * *

## 回答 #6

> 赞同：17
> 
> 时间：2016-05-26T05:53:31.317

**前任：-**

```
var value="Data-123";
var removeData=value.replace("Data-","");
alert(removeData); 
```

希望这对你有用。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2017-07-31T02:18:25.330

我做的这个小功能一直对我有用:)

```
String.prototype.deleteWord = function (searchTerm) {
    var str = this;
    var n = str.search(searchTerm);
    while (str.search(searchTerm) > -1) {
        n = str.search(searchTerm);
        str = str.substring(0, n) + str.substring(n + searchTerm.length, str.length);
    }
    return str;
}

// Use it like this:
var string = "text is the cool!!";
string.deleteWord('the'); // Returns text is cool!! 
```

我知道这不是最好的，但它一直对我有用:)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2018-04-16T12:30:39.863

```
str.split('Yes').join('No'); 
```

这将从原始字符串中替换该特定字符串的所有出现。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-04-20T12:06:47.690

我习惯了 C# (Sharp) String.Remove 方法。在 Javascript 中，没有字符串的删除函数，但有 substr 函数。您可以使用 substr 函数一次或两次从字符串中删除字符。您可以使用以下函数将开始索引处的字符删除到字符串的末尾，就像 c# 方法首先重载 String.Remove(int startIndex) 一样：

```
function Remove(str, startIndex) {
    return str.substr(0, startIndex);
} 
```

和/或您还可以使用以下函数来删除起始索引和计数处的字符，就像 c# 方法第二个重载 String.Remove(int startIndex, int count) 一样：

```
function Remove(str, startIndex, count) {
    return str.substr(0, startIndex) + str.substr(startIndex + count);
} 
```

然后您可以根据需要使用这两个功能或其中之一！

**例子：**

```
alert(Remove("data-123", 0, 5)); 
```

**输出：123**

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2016-04-07T01:39:50.227

使用`match()`and`Number()`返回一个`number`变量：

```
Number(("data-123").match(/\d+$/));

// strNum = 123 
```

这就是上面的语句所做的......在中间工作：

1.  `str.match(/\d+$/)`- 返回一个数组，其中包含与 . 结尾处任意长度数字的匹配项`str`。在这种情况下，它返回一个包含单个字符串 item 的数组`['123']`。
2.  `Number()`- 将其转换为数字类型。因为从返回的数组`.match()`包含单个元素`Number()`将返回数字。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2021-01-14T18:09:20.563

# 表现

今天 2021.01.14，我在 Chrome v87、Safari v13.1.2 和 Firefox v84 上对 MacOs HighSierra 10.13.6 进行测试，以获取所选解决方案。

## 结果

适用于所有浏览器

*   解决方案 Ba、Cb 和 Db 对于长字符串是最快的/最快的
*   解决方案 Ca, Da 对于短字符串来说是最快的/最快的
*   解决方案 Ab 和 E 对于长字符串来说很慢
*   解决方案 Ba、Bb 和 F 对于短字符串来说很慢

[![在此处输入图像描述](../Images/6b418854d2ed1cc36ece714e407f5c4b.png)](https://i.stack.imgur.com/jwLqa.png)

## 细节

我执行 2 个测试用例：

*   短字符串 - 10 个字符 - 你可以在[这里运行它](https://jsbench.me/e3kjn64qiv/1)
*   长字符串 - 1 000 000 个字符 - 你可以在[这里运行它](https://jsbench.me/m9kjn6dgnm/1)

下面的片段展示了解决方案 [Aa](https://stackoverflow.com/a/10398941/860099) [Ab](https://stackoverflow.com/a/63362111/860099) [Ba](https://stackoverflow.com/a/23539019/860099) [Bb](https://stackoverflow.com/a/63362111/860099) [Ca](https://stackoverflow.com/a/27098801/860099) [Cb](https://stackoverflow.com/a/27098801/860099) [Da](https://stackoverflow.com/a/23181792/860099) [Db](https://stackoverflow.com/a/23181792/860099) [E](https://stackoverflow.com/a/49857431/860099) [F](https://stackoverflow.com/a/45406624/860099)

```
// https://stackoverflow.com/questions/10398931/how-to-strToRemove-text-from-a-string

// https://stackoverflow.com/a/10398941/860099
function Aa(str,strToRemove) {
  return str.replace(strToRemove,'');
}

// https://stackoverflow.com/a/63362111/860099
function Ab(str,strToRemove) {
  return str.replaceAll(strToRemove,'');
}

// https://stackoverflow.com/a/23539019/860099
function Ba(str,strToRemove) {
  let re = strToRemove.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // regexp escape char
  return str.replace(new RegExp(re),'');
}

// https://stackoverflow.com/a/63362111/860099
function Bb(str,strToRemove) {
  let re = strToRemove.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // regexp escape char
  return str.replaceAll(new RegExp(re,'g'),'');
}

// https://stackoverflow.com/a/27098801/860099
function Ca(str,strToRemove) {
  let start = str.indexOf(strToRemove);
  return str.slice(0,start) + str.slice(start+strToRemove.length, str.length);
}

// https://stackoverflow.com/a/27098801/860099
function Cb(str,strToRemove) {
  let start = str.search(strToRemove);
  return str.slice(0,start) + str.slice(start+strToRemove.length, str.length);
}

// https://stackoverflow.com/a/23181792/860099
function Da(str,strToRemove) {
  let start = str.indexOf(strToRemove);
  return str.substr(0, start) + str.substr(start + strToRemove.length);
}

// https://stackoverflow.com/a/23181792/860099
function Db(str,strToRemove) {
  let start = str.search(strToRemove);
  return str.substr(0, start) + str.substr(start + strToRemove.length);
}

// https://stackoverflow.com/a/49857431/860099
function E(str,strToRemove) {
  return str.split(strToRemove).join('');
}

// https://stackoverflow.com/a/45406624/860099
function F(str,strToRemove) {
    var n = str.search(strToRemove);
    while (str.search(strToRemove) > -1) {
        n = str.search(strToRemove);
        str = str.substring(0, n) + str.substring(n + strToRemove.length, str.length);
    }
    return str;
}

let str = "data-123";
let strToRemove = "data-";

[Aa,Ab,Ba,Bb,Ca,Cb,Da,Db,E,F].map( f=> console.log(`${f.name.padEnd(2,' ')} ${f(str,strToRemove)}`));
```

```
This shippet only presents functions used in performance tests - it not perform tests itself!
```

这是 chrome 的示例结果

[![在此处输入图像描述](../Images/8f1923758d59b125632f9cf8e9d3a085.png)](https://i.stack.imgur.com/kb3hi.png)

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2021-10-06T12:02:46.097

1-如果是您的字符串中的序列：

```
let myString = "mytest-text";
let myNewString = myString.replace("mytest-", ""); 
```

答案是文字

2-如果您想删除前 3 个字符：

```
"mytest-text".substring(3); 
```

答案是 est-text

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-11T16:06:59.510

替换字符串的所有实例的另一种方法是使用新的（截至 2020 年 8 月）[`String.prototype.replaceAll()`方法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll)。

它接受字符串或 RegEx 作为其第一个参数，并将找到的所有匹配项替换为其第二个参数（字符串或生成字符串的函数）。

就支持而言，在撰写本文时，此方法已在所有主要桌面浏览器*（甚至 Opera！）的当前版本中采用，IE 除外。对于移动设备，还支持 iOS Safari ^(iOS 13.7) + 、Android Chrome ^(v85+)和 Android Firefox ^(v79+)。

[* 这包括 Edge/Chrome v85+、Firefox v77+、Safari 13.1+ 和 Opera v71+]

用户更新到受支持的浏览器版本需要时间，但现在有了广泛的浏览器支持，时间是唯一的障碍。

参考：

*   [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll)
*   [我可以使用 - 当前浏览器支持信息](https://caniuse.com/#feat=mdn-javascript_builtins_string_replaceall)
*   [TC39 提案回购`.replaceAll()`](https://github.com/tc39/proposal-string-replaceall#stringprototypereplaceall-proposal)

您可以在下面的代码段中测试您当前的浏览器：

```
//Example coutesy of MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll
const p = 'The quick brown fox jumps over the lazy dog. If the dog reacted, was it really lazy?';

const regex = /dog/gi;

try {
  console.log(p.replaceAll(regex, 'ferret'));
  // expected output: "The quick brown fox jumps over the lazy ferret. If the ferret reacted, was it really lazy?"

  console.log(p.replaceAll('dog', 'monkey'));
  // expected output: "The quick brown fox jumps over the lazy monkey. If the monkey reacted, was it really lazy?"
  console.log('Your browser is supported!');
} catch (e) {
  console.log('Your browser is unsupported! :(');
}
```

```
.as-console-wrapper: {
  max-height: 100% !important;
}
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-22T00:57:47.557

确保如果您在循环中替换字符串，则在每次迭代中启动一个新的正则表达式。截至 21 年 9 月 21 日，这仍然是一个已知问题，Regex 基本上错过了所有其他匹配。当我第一次遇到这个时，这让我陷入了循环：

```
yourArray.forEach((string) => {
    string.replace(new RegExp(__your_regex__), '___desired_replacement_value___');
}) 
```

如果您尝试这样做，如果只有其他每个都有效，请不要感到惊讶

```
let reg = new RegExp('your regex');
yourArray.forEach((string) => {
    string.replace(reg, '___desired_replacement_value___');
}) 
```**

# php - PHP Define() - 用多个部分构建它的值参数

> ID：10398932
> 
> 赞同：0
> 
> 时间：2012-05-01T14:12:43.453
> 
> 标签：php, parameters

PHP的值能`define()`不能构造...

1.  像这样：`define(MY_NEW_CONSTANT, "He" + "llo - " + "World");`

2.  像这样：`define(MY_NEW_CONSTANT, "He", "llo - ", "World");`

3.  像这样：`define(MY_NEW_CONSTANT, "He" + "llo - " + $One_Of_My_Variables);`

4.  像这样：`define(MY_NEW_CONSTANT, "He", "llo - ", $One_Of_My_Variables);`

如何在 PHP 中构建 value 参数`define()`- 有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:14:21.413

您使用连接运算符连接`.`：

```
define('MY_NEW_CONSTANT', "He" . "llo - " . "World"); 
```

[`define`](http://php.net/define)只是一个和其他函数一样的函数；对于可以传递的表达式，它没有特殊规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:19:05.060

是的，你可以这样做，但这是个坏主意。常数的意义在于它是……嗯……常数。你知道，就像，总是相同的价值。

如果你用这样的动态值定义一个常量，那么它基本上只是另一个全局变量。诚然，它是一个您不能在程序后期更改的变量，但这并不会改变您也可以使用全局变量的事实。

PHP 也支持`const`，可以认为是`define()`. `const`由于上述原因，不允许动态构造常量。

如果您仍然真的想这样做，只需在`define()`函数内连接您的字符串，就像您将字符串传递给任何其他函数调用一样。IE：

```
define('MYCONST', $var1 . $var2); 
```

但我建议改用变量。

# asp.net-mvc - 找不到类型或命名空间名称“IClientValidatable”

> ID：10398934
> 
> 赞同：0
> 
> 时间：2012-05-01T14:13:01.877
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我使用以下链接在我的 asp.net MVC 应用程序中创建了一个自定义属性：

[http://www.falconwebtech.com/post/2012/04/18/MVC3-Custom-Validation-Attributes-for-Client-Server-Side-Validation-with-Unobtrusive-Ajax.aspx](http://www.falconwebtech.com/post/2012/04/18/MVC3-Custom-Validation-Attributes-for-Client-Server-Side-Validation-with-Unobtrusive-Ajax.aspx)

但我收到以下错误：

错误 52 找不到类型或命名空间名称“IClientValidatable”（是否缺少 using 指令或程序集引用？）
错误 53 找不到类型或命名空间名称“ModelClientValidationRule”（是否缺少 using 指令或程序集引用？）错误 54 找不到类型或命名空间名称“ModelMetadata”（是否缺少 using 指令或程序集引用？）错误 55 找不到类型或命名空间名称“ControllerContext”（是否缺少使用指令还是程序集引用？）

我正在使用 asp.net MVC 4 beta。

我尝试将 asp.net.MVC 的引用添加到项目中，但在添加引用对话框中不可用。

请建议如何解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:15:48.583

确保您已将`using System.Web.Mvc;`定义此类的命名空间添加到文件的顶部。

# java - 删除空的 Changelist Perforce Java API

> ID：10398936
> 
> 赞同：1
> 
> 时间：2012-05-01T14:13:21.640
> 
> 标签：java, api, perforce, changelist

只是想知道是否有人知道如何通过 p4java API 从 perforce 中删除一个空的更改列表。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T06:07:45.720

`deletePendingChangelist`IServer 类中 有一个方法： [http ://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/server/IServer.html](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/com/perforce/p4java/server/IServer.html)

# dataset - 我在哪里可以找到易于以编程方式阅读/使用的人体解剖学数据集

> ID：10398937
> 
> 赞同：3
> 
> 时间：2012-05-01T14:13:22.360
> 
> 标签：dataset, rdf, owl

我正在寻找人体解剖学数据集，它为我提供了身体部位/骨骼/肌肉之间的层次关系。

我发现了诸如[UMLS](https://uts.nlm.nih.gov///home.html)和[GALEN](http://www.opengalen.org/)之类的数据集，它们是大型 RDF/OWL 数据集，可为我提供此类数据，但我发现获取我想要的数据子集非常困难 - 主要是由于缺乏 .NET 库/ OWL 的工具和我对这方面的知识缺乏。

如果需要，我相信我最终能够从他们那里得到一些东西，但我想知道是否有人知道更小/更简单的数据集。如有必要，我们愿意为此付费，因为时间很紧迫。

类似下面的东西，但适用于整个身体（我们在这里可以非常灵活......我们只需要它小/简单）

```
<Arm>
  <Bones>
      <Humerus/>
      <Raduius/>
      <Ulna/>
  </Bones>
  <Muscles>
   ...
  </Muscles>
</Arm> 
```

我在网上搜索了类似的东西，但没有发现这种简单程度的东西，但有必要的细节。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:21:40.613

解剖学基础模型在 mysql 中可用——不过，它可能不像你想要的那么简单。 [http://sig.biostr.washington.edu/projects/fm/index.html](http://sig.biostr.washington.edu/projects/fm/index.html)

常见问题解答有安装说明： [http ://sig.biostr.washington.edu/projects/fma/release/v3.2.1/FMA_instructions.html](http://sig.biostr.washington.edu/projects/fma/release/v3.2.1/FMA_instructions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T19:55:10.930

**Snomed**解剖学：[http ://bioportal.bioontology.org/ontologies/43050?p=terms&jump_to_nav=true&conceptid=http%3A%2F%2Fihtsdo.org%2Fsnomedct%2Fanatomy%23119525000](http://bioportal.bioontology.org/ontologies/43050?p=terms&jump_to_nav=true&conceptid=http%3A%2F%2Fihtsdo.org%2Fsnomedct%2Fanatomy%23119525000)

**解剖学基础模型**：[http ://bioportal.bioontology.org/ontologies/39991?p=terms&jump_to_nav=true&conceptid=FMA%3A13303](http://bioportal.bioontology.org/ontologies/39991?p=terms&jump_to_nav=true&conceptid=FMA%3A13303)

（......另见整个生物门户：http: [//bioportal.bioontology.org](http://bioportal.bioontology.org)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T05:06:16.907

同样在[http://sparql.bioontology.org/](http://sparql.bioontology.org/)中，该图`<http://bioportal.bioontology.org/ontologies/FMA>`包含 FMA 的 RDF 内容。

# delphi - 安装 UniDac 组件后 delphi 加载错误

> ID：10398946
> 
> 赞同：0
> 
> 时间：2012-05-01T14:14:12.943
> 
> 标签：delphi, delphi-xe2, unidac

我为 delphi XE2 下载 UniDac 组件并安装它，现在当运行 DelphiXE2 文件时，我从 delphi 收到以下错误，当按下 ok 时，delphi 加载成功，但未安装 UniDac 组件。

## 列出的错误包括：

## bds.exe - 系统错误

## 程序无法启动，因为您的计算机缺少 fmx162.bpl。尝试重新安装程序以解决此问题。

## 好的

[窗口标题] 错误

[内容] 找不到向导，'d:\Program Files\Devart\UniDAC for RAD Studio XE2\Bin\Win32\unimigwizard160.dll'。

[好的]

* * *

## bds.exe - 系统错误

## 程序无法启动，因为您的计算机缺少 fmx162.bpl。尝试重新安装程序以解决此问题。

## 好的

最后得到这个错误：

[窗口标题] 错误

[内容] 无法加载包 d:\program files\embarcadero\rad studio\9.0\bin\dclunidac160.bpl。指定的模块无法找到。您想在下次加载项目时尝试加载此包吗？

[是] [否]

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:09:02.963

Delphi XE2 有各种更新，主要是因为新的 FireMonkey 功能。

不幸的是，这些更新必须打破 bpl 格式。XE2 更新 4（最新）使用 fmx162.bpl，因此您必须安装此更新才能使用最新的 unidac 组件。

# opengl - 从 FBO 到屏幕的 OpenGL 渲染

> ID：10398949
> 
> 赞同：5
> 
> 时间：2012-05-01T14:14:17.490
> 
> 标签：opengl, rendering, framebuffer

这个想法是在 FrameBuffer 对象中以不同的颜色附件渲染场景的特定部分，然后使用深度缓冲区将这些部分组合为最终图像。在第一步中，我只想渲染到单个附件，然后渲染到屏幕上。`EXT_framebuffer_object`由于我的旧显卡，我为此目的和规格使用了过剩。在主要功能中，我有：

```
int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitWindowSize(600, 512);
    glutInitDisplayMode(GLUT_RGB|GLUT_DOUBLE|GLUT_DEPTH);
    int mainHandle = glutCreateWindow("Demo");
    glutSetWindow(mainHandle);
    glutDisplayFunc(RenderCallback);
    glutReshapeFunc(ReshapeCallback);
    glutIdleFunc(IdleCallback);
    glutKeyboardFunc(KeyboardCallback);
    glutSpecialFunc(ArrowKeyCallback);
    glutMouseFunc(MouseCallback);
    glutMotionFunc(MotionCallback);

    MotionCallback(0,0);
    atexit(ExitNx);

    // Setup default render states
    glClearColor(0.3f, 0.4f, 0.5f, 1.0);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_COLOR_MATERIAL);

    // Setup lighting
    glEnable(GL_LIGHTING);
    float ambientColor[]    = { 0.0f, 0.1f, 0.2f, 0.0f };
    float diffuseColor[]    = { 1.0f, 1.0f, 1.0f, 0.0f };       
    float specularColor[]   = { 0.0f, 0.0f, 0.0f, 0.0f };       
    float position[]        = { 100.0f, 100.0f, 400.0f, 1.0f };     
    glLightfv(GL_LIGHT0, GL_AMBIENT, ambientColor);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuseColor);
    glLightfv(GL_LIGHT0, GL_SPECULAR, specularColor);
    glLightfv(GL_LIGHT0, GL_POSITION, position);
    glEnable(GL_LIGHT0);
    GLenum status,st1,st2;                                            
    GLint colorBufferCount ;
    glGetIntegerv(GL_MAX_COLOR_ATTACHMENTS_EXT, &colorBufferCount);   
    printf("Max number of attachments:%d \n " ,colorBufferCount);
    //initialising FBO
    glGenFramebuffersEXT(1,&fb);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,fb);
    //attaching an image to render to
    glGenRenderbuffersEXT(1,&colorbf);
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT,colorbf);
    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT,GL_RGBA8,600,512);
    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT,   GL_RENDERBUFFER_EXT, colorbf);
    //creating depht buffer
    glGenRenderbuffersEXT(1, &depth_rb);
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, depth_rb);
    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT24, 600, 512);
    //attaching the depth buffer to the FBO
    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, depth_rb);
    st1=glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT);
    //checking for errors
    st2=glGetError();
    if(st1==GL_FRAMEBUFFER_COMPLETE_EXT)
        printf("so far so good\n ");
    else
        if(st1==GL_FRAMEBUFFER_UNSUPPORTED_EXT)
            printf("not good");
    const GLubyte *sir= new GLubyte [256];
    sir=gluErrorString(st1);
    printf("error received %s \n", sir);

    glutMainLoop();
} 
```

在显示回调函数中我有

```
void RenderCallback()
{
    // Setup projection matrix
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60.0f, (float)glutGet(GLUT_WINDOW_WIDTH)/(float)glutGet(GLUT_WINDOW_HEIGHT), 1.0f, 10000.0f);
    gluLookAt(gEye.x, gEye.y, gEye.z, gEye.x + gDir.x, gEye.y + gDir.y, gEye.z + gDir.z, 0.0f, 1.0f, 0.0f);

    // Setup modelview matrix
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb); //setting our FBO to render to
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);  
    //render code 
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,0); //unbiding

    //now I wish to see what I have written in the colorbf attachment , most likely my mistake is in the following to come
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glDrawBuffer(GL_COLOR_ATTACHMENT0_EXT);
    glMatrixMode(GL_MODELVIEW); 
    glLoadIdentity();
    //should I have done something else before?
    glutSwapBuffers();
} 
```

输出是一个空场景。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T15:33:36.750

```
glDrawBuffer(GL_COLOR_ATTACHMENT0_EXT); 
```

`GL_COLOR_ATTACHMENT0_EXT`不是 的有效参数[`glDrawBuffer()`](http://www.opengl.org/sdk/docs/man/xhtml/glDrawBuffer.xml)。

如果您想可视化您的 FBO，请添加纹理附件。完成渲染到 FBO 并[绘制全屏纹理四边形](http://www.songho.ca/opengl/gl_fbo.html#example)后，只需绑定纹理附件即可。

# encryption - 40bit - 256 加密实际上是什么意思？

> ID：10398953
> 
> 赞同：0
> 
> 时间：2012-05-01T14:14:26.117
> 
> 标签：encryption, ssl, ssl-certificate

我最近一直在研究 SSL 证书，并且看到许多供应商销售的低端证书加密在 40-256 位之间。

但是，当我访问具有此类证书的站点时，它会报告该站点正在使用 256 位加密连接。

既然我们都知道 40 位加密现在严重不足，他们怎么能提供这种可能性呢？

似乎他们提供的东西从完全不适合到适合 - 是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:55:00.970

It seems like you mix up two things:

The bit length of the key-pair that belongs to a certificate has nothing to do with the used cipher and it's strength that is used for SSL connections.

The certificate is used for authentication purposes and uses asymmetric cryptography (public and private key forming a key-pair).

The shorter bit lengths you have mentioned are used for encryption of the connection and they are used for symmetric algorithms - their key length is much smaller having an equal security compared to asymmetric crypto algorithms.

Which symmetric algorithm is used for encrypting an SSL connection is negotiated between client and server when the connection starts. Usually the strongest algorithm supported by both sides is used.

# python - Pygame 级别系统导致列表索引错误

> ID：10398957
> 
> 赞同：1
> 
> 时间：2012-05-01T14:14:40.987
> 
> 标签：python, arrays, python-3.x, pygame

我创建了一个pygame，游戏的目的是避免球在屏幕上移动（随机）

```
ballpic = pygame.image.load('ball.png').convert_alpha() 
```

我有一个水平功能：

```
def levels(score):
 global enemies
 global velocity
 enemies = enemies
 velocity = velocity

#level one 
if score >= 500:
  enemies = 6
  velocity = 2

#level two
if score >= 1000:
  enemies = 6
  velocity = 2
  #....And so on 
```

带有缩进的游戏：///已过期/

如果我尝试这样做，我会收到此错误：

```
Traceback (most recent call last):
 File "C:\Users\MO\Desktop\Twerk\twerk-bck.py", line 252, in <module>
  game()
File "C:\Users\MO\Desktop\Twerk\twerk-bck.py", line 199, in game
 positionx[i]=positionx[i]+positionxmove[i]
IndexError: list index out of range 
```

我知道我需要将新值附加到列表中以将它们扩展 3 个条目。我想要实现的是在屏幕上添加更多的球，得分达到一定的数字。但我不知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:42:50.963

`positionx`您在 147 的主循环之前的第 134 行初始化和朋友。然后`levels(score)`在循环内部调用，它更新`enemies`计数但实际上并没有`positionx`为额外的敌人分配更多空间。 `levels()`应该负责在增加敌人数量时调整数组的大小。

正如**Lattyware**评论的那样，为每个敌人使用对象将是一个*更好*的设计。通常，如果您保留任何类型的并行数组，例如`positionx`and `positiony`，您应该将它们替换为对象数组。然后你所有不同的循环`range(enemies)`将被一个大循环取代，如：

```
for enemy in enemies:
    enemy.update(globalGameState) 
```

哪里`globalGameState`是一个或多个变量来跟踪*所有敌人*的鼠标位置等东西。

# jsf - DataTable - InCell 编辑如何获取在托管 Bean 中编辑的对象的值

> ID：10398960
> 
> 赞同：1
> 
> 时间：2012-05-01T14:14:59.447
> 
> 标签：jsf, primefaces

我想将该行作为我的托管 bean 中的对象及其更新的属性。我使用了 PrimeFaces 展示示例[DataTable - InCell Editing](http://www.primefaces.org/showcase/ui/datatableEditing.jsf)。我不明白如何获取编辑后的值来更新数据库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T14:28:25.297

只需将保存按钮添加到同一表单即可。例如

```
<p:commandButton value="Save" action="#{bean.save}" /> 
```

和

```
public void save() {
    someService.save(someList);
} 
```

或者，如果您想对每个单独的行编辑事件执行保存，则将一个添加`<p:ajax event="rowEdit">`到`<p:dataTable>`. 例如

```
<p:dataTable ...>
    ...
    <p:column>
        <p:rowEditor />  
    </p:column>  
    <p:ajax event="rowEdit" listener="#{bean.save}" />
</p:dataTable> 
```

和

```
public void save(RowEditEvent event) {
    someService.save((SomeItem) event.getObject());
} 
```

# oracle - 在 Mule ee 3.2.2 中使用 spring 设置 oracle 连接池

> ID：10398962
> 
> 赞同：1
> 
> 时间：2012-05-01T14:15:00.253
> 
> 标签：oracle, connection-pooling, mule, spring-jdbc

Mule 真的很整洁，但与 spring 共享的刚性 xsd 东西似乎永远不会玩得很好。

Mulesoft 提供的可怕文档仍然是......可怕的。

我正在尝试设置连接池，因为为我的服务运行的每个查询都需要很长时间才能实例化。我被迫在每个服务调用中启动 9 个查询，并且由于没有池而产生的延迟会严重影响性能。对于数据源，我尝试了许多不同的 oracle v6 类，但我似乎总是收到“由于缺少 setter 而无法写入参数”错误。就好像 spring 属性编辑器 impl 被强制退出了 mulesoft xml 模式。

如果有人能够使 oracle 连接池与 oracle 类一起工作，而不是 c3p0 或 dbcp 的东西，请联系兄弟。

这是我的 xml 汤。

```
<spring:beans>
    <context:property-placeholder xmlns:context="http://www.springframework.org/schema/context" location="classpath:somepropfile.properties"></context:property-placeholder>
<spring:bean id="jdbcDataSource" name="jdbcConnectionInfo" class="oracle.jdbc.pool.OraclePooledConnection" doc:name="Bean">
        <spring:property name="url" value="${JDBC.URL}"/>
        <spring:property name="username" value="${JDBC.user}"/>
        <spring:property name="password" value="${JDBC.password}"/>
        <spring:property name="connectionCacheProperties" ref="cacheProperties"/>
    </spring:bean>
<spring:bean id="cacheProperties" name="cacheProps" class="com.erac.obr_mule.appsec.PoolCacheProperties" doc:name="Bean">
        <spring:property name="validateConnection" value="true"/>
        <spring:property name="maxLimit" value="5"/>
        <spring:property name="inactivityTimeout" value="180"/>
        <spring:property name="connectionWaitTimeout" value="120"/>
        <spring:property name="minLimit" value="1"/>
        <spring:property name="initialLimit" value="1"/>
    </spring:bean>   

</spring:beans>

<jdbc:connector name="JDBC" dataSource-ref="jdbcDataSource" queryTimeout="-1" pollingFrequency="0" doc:name="JDBC">
    <jdbc:query key="getMuhDatasHooker" value=" BUNCH O SQL " />
</jdbc:connector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T15:28:00.387

根据[这个答案](https://stackoverflow.com/a/1119070/387927)，你追求的是这样的：

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
  <property name="driverClass" value="oracle.jdbc.driver.OracleDriver"/>
  <property name="jdbcUrl" value="jdbc:oracle:thin:@localhost:1521:XE"/>
  <property name="user" value="username"/>
  <property name="password" value="secret"/>
  <property name="minPoolSize" value="5"/>
  <property name="maxPoolSize" value="20"/>
  <property name="acquireIncrement" value="1"/>
  <property name="idleConnectionTestPeriod" value="100"/>
  <property name="maxStatements" value="0"/>
  <property name="checkoutTimeout" value="60000"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:17:19.563

我选择了 dbcp 解决方案。原来我能够在我们祝福的古物宝库中找到它并使用它。

也许在 3.3 中，他们将有一个只有 oracle 的解决方案

```
 <spring:bean id="jdbcDataSource" name="jdbcConnectionInfo" class="org.apache.commons.dbcp.BasicDataSource" doc:name="Bean">
        <spring:property name="driverClassName" value="oracle.jdbc.pool.OracleDataSource"/>
        <spring:property name="url" value="${JDBC.URL}"/>
        <spring:property name="username" value="${JDBC.user}"/>
        <spring:property name="password" value="${JDBC.password}"/>
        <spring:property name="initialSize" value="1"/>
        <spring:property name="maxActive" value="9"/>
        <spring:property name="maxIdle" value="180"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:51:06.833

将以下用于 oracle 连接池

```
<bean id="connectionPool1" class="oracle.jdbc.pool.OracleDataSource" destroy-method="close">
<property name="connectionCachingEnabled" value="true" />
<property name="URL">
         <value>ORACLE URL</value>
    </property>
<property name="user">
         <value>user id</value>
    </property>
<property name="password">
         <value>user password</value>
    </property>
<property name="connectionCacheProperties">
      <value>
        MinLimit:1
        MaxLimit:5
        InitialLimit:1
        ConnectionWaitTimeout:120
        InactivityTimeout:180
        ValidateConnection:true
      </value>
   </property>
</bean> 
```

# google-maps - 我们可以将地图的一部分复制为图像吗？

> ID：10398964
> 
> 赞同：1
> 
> 时间：2012-05-01T14:15:07.223
> 
> 标签：google-maps, google-maps-api-3

每当我使用 Google API 在 Google Map 中放置一个标记时。我想将地图复制为标记附近的图像。

**例如**：假设我在“Hyderabad”附近放置了一个标记。我想用标记捕捉地图的图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:22:05.503

这取决于您使用它的目的。您应该查看 Google Maps API 服务条款： [https ://developers.google.com/maps/terms](https://developers.google.com/maps/terms)

您不能直接从地图复制，但您可以使用静态地图 API： [https ://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:22:35.840

不，这是服务条款明确禁止的。

您可以使用[静态地图](https://developers.google.com/maps/documentation/staticmaps/)为您提供图像。甚至还有一个[静态地图向导](http://gmaps-samples.googlecode.com/svn/trunk/simplewizard/makestaticmap.html)可以提供帮助。

但是，静态地图图像需要与`<img>`标签一起显示（因此您不能将它们嵌入到电子邮件中）。

# opengl - 将纹理传递给着色器

> ID：10398965
> 
> 赞同：8
> 
> 时间：2012-05-01T14:15:08.473
> 
> 标签：opengl, glsl

我一直试图弄清楚如何将纹理发送到着色器，但我无法弄清楚。我的代码看起来不错，但我的第二个纹理是黑色的。

```
void setShaders() {

    glEnable (GL_TEXTURE_2D);
    v2 = glCreateShader(GL_VERTEX_SHADER);
    f2 = glCreateShader(GL_FRAGMENT_SHADER);    

    load_shader(v2,"a.vert");
    load_shader(f2,"a.frag");

    glCompileShader(v2);
    glCompileShader(f2);

    p = glCreateProgram();

    glAttachShader(p,v2);
    glAttachShader(p,f2);

    GLubyte* textura=LoadImageToTexture("d.jpg");
    GLubyte* textura2=LoadImageToTexture("n.jpg");

    GLuint texturaID[2];
    glGenTextures(2, texturaID);

    glBindTexture(GL_TEXTURE_2D, texturaID[0]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D,0,GL_RGBA, w, h, 0, GL_RGBA,GL_UNSIGNED_BYTE,(GLvoid*)textura );

    glBindTexture(GL_TEXTURE_2D, texturaID[1]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D,1,GL_RGBA, w, h, 0, GL_RGBA,GL_UNSIGNED_BYTE,(GLvoid*)textura2 );

    glLinkProgram(p);
    glUseProgram(p);
    GLint baseImageLoc = glGetUniformLocation(p, "tex");
    GLint normImage = glGetUniformLocation(p, "norm");
    glUniform1i(baseImageLoc, 0);
    glUniform1i(normImage, 1);

    glActiveTexture(GL_TEXTURE0 + 0);
    glBindTexture(GL_TEXTURE_2D, texturaID[0]);

    glActiveTexture(GL_TEXTURE0 + 1);
    glBindTexture(GL_TEXTURE_2D, texturaID[1]);

} 
```

着色器 [顶点]

```
void main()
{

    gl_TexCoord[0] = gl_MultiTexCoord0;
    gl_Position = ftransform();
}

uniform sampler2D tex;
uniform sampler2D norm;

[fragment]
void main()
{
    vec4 color = texture2D(tex,gl_TexCoord[0].st);
    vec4 color2 = texture2D(norm,gl_TexCoord[0].st);
    gl_FragColor = color*color2;
} 
```

**编辑**这里是魔鬼！！！

```
 glTexImage2D(GL_TEXTURE_2D,**1**,GL_RGBA, w, h, 0, GL_RGBA,GL_UNSIGNED_BYTE,(GLvoid*)textura2 ); 
```

而不是**1**它应该是 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T16:02:52.823

您的第二个纹理似乎以错误的方式创建：

```
glTexImage2D(GL_TEXTURE_2D,1,...); 
```

应该

```
glTexImage2D(GL_TEXTURE_2D,0,...); 
```

至于您的第二个问题，即使我不确定是否正确；当您注释这些行时，您实际上将统一值保留为其默认值，即 0。因此，净效果与

```
glUniform1i(baseImageLoc, 0); 
```

# php - 使用 PHP 从多个表中的数据生成一个大的 XML 文件

> ID：10398968
> 
> 赞同：-2
> 
> 时间：2012-05-01T14:15:29.863
> 
> 标签：php, mysql, xml, mysql-workbench

我有这个由 PHP 生成的 XML 文件，但它生成的信息量很小。现在我想生成一个大的 XML 文件，其中包含来自多个相互关联的表的数据。但是使用 PHP 来构造 XML 文件是令人困惑的，因为 SQL 语句变得非常大。有没有办法使用 PHP 或任何其他工具生成一个大的 XMl 文件？

```
$query = "SELECT institution_t.Name, institution_t.idColleges, campus_t.CampusName, campus_t.CampusAddress, campus_t.Lat, campus_t.Lng  FROM institution_t JOIN campus_t ON (campus_t.idColleges = institution_t.idColleges)"; 
```

这只是带有两个表的 SQL 语句，我需要再添加 8 个相互关联的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:38:14.580

您可以尝试定义一个视图来封装您从查询中需要的信息，然后它只是一个简单的单表选择来获取信息。我不知道您的 XML 应该如何构造，所以恐怕我对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:27:12.423

没有什么神奇的“获取查询并将其转储到 XML”，因为这完全取决于您的需要。你用属性？嵌套元素？任何。

查看用于处理 XML 的各种 PHP 工具，例如[XMLWriter](http://www.php.net/manual/en/book.xmlwriter.php)。

# php - set_time_limit() 是全局的还是仅适用于当前正在运行的脚本？

> ID：10398969
> 
> 赞同：5
> 
> 时间：2012-05-01T14:15:45.073
> 
> 标签：php, timeout

我有一个非常丑陋的页面，我必须暂时在 PHP 中将最大超时设置为 2 分钟。我正在使用该`set_time_limit()`功能，但从[官方文档](http://php.net/manual/en/function.set-time-limit.php)中我不清楚“设置”的全局性。

这个简介似乎暗示它仅限于特定的脚本：

> set_time_limit() 函数和配置指令 max_execution_time 只影响脚本本身的执行时间。在确定脚本运行的最长时间时，不包括在脚本执行之外发生的任何活动所花费的时间，例如使用 system() 的系统调用、流操作、数据库查询等。在测量时间是真实的 Windows 上，情况并非如此。

基本上我想仔细检查一下，在一个脚本中设置这个一次性不会影响*任何*其他脚本的最大运行时间，是吗？运行任何其他页面仍将具有默认超时？没有其他页面（实际上没有其他功能）需要此超时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:16:57.257

仅适用于当前正在运行的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T14:19:26.120

它只会影响当前脚本，不会影响其他页面

# php - 阻止控制器执行

> ID：10398970
> 
> 赞同：2
> 
> 时间：2012-05-01T14:15:48.537
> 
> 标签：php, codeigniter

我有一个在 MY_Controller 中运行的 acl。如果权限被拒绝，那么此刻，我只是做一个`redirect('denied')`- 这是一个非常基本的控制器，它加载一个非常基本的视图，说“权限被拒绝”。

但是，我想做的仍然是加载最初请求的 uri，但加载“拒绝”视图而不是默认视图。

我可以在 MY_Controller 中执行此操作，并且拒绝的视图加载正常。但是，这也不会阻止原始控制器/方法的执行，因此我加载了两个视图。在加载被拒绝的视图后，我还尝试`exit;`在 MY_Controller 中放置一条语句，但这不可行，因为这样输出不会在 CI 中触发。

是否可以通过 pre_constructor_controller 钩子来做到这一点？我想不出一种方法来阻止控制器执行......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T14:33:42.897

您必须让控制器执行才能让请求的 URI 加载。

签入 ACL 后`MY_Controller`，如果不允许，则可以在此处加载`denied`视图，但在退出之前还需要做一件事。

```
$this->load->view('denied');
$this->output->_display();
exit(); 
```

# c# - 具有可变子属性的 C# 属性

> ID：10398972
> 
> 赞同：0
> 
> 时间：2012-05-01T14:15:49.083
> 
> 标签：c#, asp.net, xml

是否可以在 C# 中创建具有可变数量子属性的属性，然后通过 xml 生成它们？下面的例子

```
Question.Name = "cake";
Question.Type = "radio";
foreach(Option option in xmloptions)
{
    Question...........
} 
```

所以我得到的是，如果 xmloptions 在一个问题上有 5 个选项，然后在下一个问题上有 4 个选项。我可以在我创建的属性中填充这些以容纳问题吗？如果是这样，我该如何枚举它们？

如果这没有意义，请原谅我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:17:34.353

您可以使用 a `Dictionary<string, object>`（如果您总是提前知道类型，您也可以使用比 object 更具体的类型）来存储它们：

```
var question = new Dictionary<string, object>();
question["Name"] = "cake";
question["Type"] = "radio";

foreach(Option option in xmloptions)
{
    question["SomeOtherProperty"] = option.SomeOtherProperty;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:24:59.773

我认为您的`Question`类的属性之一应该是列表或字典：

```
public class Question {

    private List<Option> _Options = new List<Option>() 

    public List<Option> Options {
      get { return m_Options; }
    }
} 
```

然后你添加选项：

```
question.Options.Add(option); 
```

如果每个选项都由某些东西标识 - 例如名称 - 您可以使用字典：

```
public class Question {

    private  Dictionary<string, Option> _Options = new Dictionary<string,Option>();

    public Dictionary<string,Option> Options {
      get { return _Options; }
    }
} 
```

在这种情况下，您可以添加以下选项：

```
question.Options[name] = option; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T14:17:31.787

您可以将 Option (Question.Option) 的属性类型设为数组列表。如果需要，您可以将其设为 Question 对象列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T14:22:10.880

您可能正在寻找像 .Net 4 中的 ExpandoObject 这样的动态对象。您可以动态添加属性和方法。

[http://blogs.msdn.com/b/csharpfaq/archive/2009/10/01/dynamic-in-c-4-0-introducing-the-expandoobject.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2009/10/01/dynamic-in-c-4-0-introducing-the-expandoobject.aspx)

您也可以从 DynamicObject 或 IDynamicMetaObjectProvider 继承，但这些会显着增加复杂性。

但是，尝试使用字典而不是动态的，这对您来说可能会更容易。

# jquery - 使用 JQuery 放置 DIV

> ID：10398973
> 
> 赞同：-1
> 
> 时间：2012-05-01T14:15:53.917
> 
> 标签：jquery, css, html

在网站的右下角有一个 div，其中包含一个将语言从德语切换到英语的链接。这个 div 应该总是在屏幕的底部。我尝试使用 JQuery Funktion Offset() 来实现这一点，但我无法做到这一点。也许有人可以帮助我。

代码：[http](http://db.tt/gtgdgOeD)
://db.tt/gtgdgOeD 截图：[http ://db.tt/v8FdAuRn](http://db.tt/v8FdAuRn)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:19:17.843

给它一个 CSS 样式：

```
position: fixed;
bottom: 0;
right: 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:19:51.730

将`div`' 的位置设置为`fixed`，然后将`bottom`和`right`css 属性设置为`0`，它将保持在那里。

# android - QuickAction 和隐藏项目的方法

> ID：10398978
> 
> 赞同：2
> 
> 时间：2012-05-01T14:16:27.300
> 
> 标签：android, android-menu, quickaction

我正在使用[此处](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)的代码来创建快速操作。

我正在编写游戏，我想使用快速操作功能作为菜单。因此，当用户单击“暂停”时，我想删除或禁用单击“重置”按钮..

或者如果你有比我更好的想法，我可以改变，但我在玩游戏时屏幕上没有空间，因此我想使用菜单按钮，然后在屏幕上我只使用一个按钮就足够了。

当然，有了这个菜单，我也将删除一些按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:24:59.700

您可以在单击按钮时创建一个新实例`QuickAction`，但这次不要包含“重置”按钮。

# ruby-on-rails - 上传+设计后显示用户徽标

> ID：10398981
> 
> 赞同：0
> 
> 时间：2012-05-01T14:16:44.683
> 
> 标签：ruby-on-rails, devise, paperclip

作为一个 Rails 新手，我遇到了一个我无法弄清楚的问题。我目前使用 Devise 进行身份验证，使用 Paperclip 进行附件。我已成功向用户编辑添加了一个上传字段，并且图像已成功保存。

我目前的设置是我有一个带有默认徽标的标题。我正在尝试创建一个调用来检查用户是否有徽标。

**应用助手：**

```
def logo_for(user)

if user_signed_in? && user.logo.present?
  image_tag user.logo_url(:small)
else 
  image_tag("logo.png", :alt => "Sample App", :class => "round")

   end
end 
```

**_header.html.erb**

```
<%= link_to logo_for(@user), root_path %> 
```

**用户.rb**

```
has_attached_file :logo,
:styles => { :small => "150x150>" },
:url  => "/images/logos/:id/:style/:basename.:extension",
:path => ":rails_root/public/images/logos/:id/:style/:basename.:extension",
:convert_options => { :all => "-auto-orient" }

 attr_accessible :users, :logo, :logo_file_name, :logo_content_type, :logo_file_size, :logo_updated_at
end 
```

我收到错误说明**NO HANDLER** undefined Method

我该如何着手检查用户是否已上传徽标并显示该徽标而不是默认显示？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:22:02.300

`logo_for`我在你的方法中看到了一些错误。

尝试更改回形针`user.logo.present?`提供`user.logo?`的功能（我相信）。此外，您的第一个`image_tag`参考应如下所示：

`image_tag user.logo.url(:small)`，请注意我删除了下划线。

# c# - 用于浏览器兼容性的代码或 javascript

> ID：10398990
> 
> 赞同：0
> 
> 时间：2012-05-01T14:17:03.720
> 
> 标签：c#, javascript, asp.net, css

我正在用 asp.net开发一个**web 应用程序- c#....**

如果我将定义 css 类，例如：

```
.IEStyle{color:Red;}
.FFStyle{color:Blue;}
.DefaultStyle{color:Black;} 
```

我只为标签尝试过....

```
<asp:Label ID="lblSample" runat="server" ie:CssClass="IEStyle"  
mozilla:CssClass="FFStyle" CssClass="DefaultStyle" ie:Text="You are in Internet  
explorer." mozilla:Text="You are in Firefox." Text="You are in other browser." /> 
```

这很好，但它不可能一直存在......我仍然面临浏览器兼容性的问题......任何人都建议我为此**我正在寻找 javascript**。举个例子让我很容易理解并集成到我的应用程序中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:24:28.727

这不是一种常见的方法。但是，请考虑**为每种浏览器类型设置单独的样式表**。每个样式表中的规则名称（类名）都相同。然后，只加载您想要的样式表。

这是动态加载样式表的一种方法（[在此处讨论](http://voices.yahoo.com/loading-css-stylesheets-dynamically-browser-evalution-2161285.html)）。

```
<link id="myLinkstyle" runat="server" rel="Stylesheet" type="text/css">

protected void Page_Load(object sender, EventArgs e)

{

System.Web.HttpBrowserCapabilities browser = Request.Browser;

if (browser.Browser.ToLower() == "ie")

myLinkstyle.Href = "CSS/IEStyles.css";

else

myLinkstyle.Href = "CSS/OtherBrowserStyle.css";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:25:50.060

这是CSS：

```
/*default*/
label{color : #000;}
/*ie*/
.ie label{color : #ff0000;}
/*ff*/
.firefox label{color : #0000ff;} 
```

这是js部分：

```
if(navigator.userAgent.test(/firefox/i))
    document.body.className += ' ff';
else if(navigator.userAgent.test(/msie/i))
    document.body.className += ' ie';
// else => default 
```

以下是发生的情况：javascript 检测浏览器名称并将类名称设置到 body 元素。您的 css 规则对该类名称做出反应，并为每个浏览器为标签着色不同。

# c# - MonoGame Mac MonoGame 模板安装

> ID：10398994
> 
> 赞同：0
> 
> 时间：2012-05-01T14:17:28.790
> 
> 标签：c#, macos, mono, xna, monodevelop

有谁知道如何在 Mac 上将 MonoGame 模板添加到 MonoDevelop 中？我按照自述文件中的说明将 MononDevelop.MonoGame.2.5 添加到位于 MonoDevelop.app 的插件文件夹中，但在 MonoDevelop 的任何地方都找不到模板。我应该在哪里寻找？还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:38:28.373

我读到的最新消息是他们目前有适用于 Windows 和 Linux 的功能模板，但没有 Mac :( 启动和运行一个基本项目对我来说是相当痛苦的，所以[我发布了我使用的模板](https://github.com/danielellis/MonoGame-MacGame)。它非常原始，你'可能需要修复对 MonoGame 项目本身的引用（以及在[此处](https://github.com/mono/MonoGame/wiki/Tutorials%3aInstalling-Prerequisites-on-MacOS-for-MonoMac-project)安装所有 prerequesites ，但它应该是一个很好的基线。

# javascript - 使用 Backbone 的异步模板加载和渲染后操作

> ID：10398997
> 
> 赞同：3
> 
> 时间：2012-05-01T14:17:32.590
> 
> 标签：javascript, jquery, backbone.js, backbone-boilerplate

我正在使用主干样板来呈现我的模板，它的 fetchTemplate 方法缓存了呈现的模板。

我想在渲染的内容上运行一些额外的代码，比如初始化手风琴等，但是使用异步编译的模板来做到这一点比我想象的要棘手。

这是一个例子：

```
Duel.Views.Home = Backbone.View.extend({
  template: "/templates/duel_home.jade",
  render: function() {
    var view = this;
    statusapp.fetchTemplate(this.template, function(tmpl) {
      $(view.el).html( tmpl({duels: view.collection.toJSON()}) );
      view.postrender();
    });
    return this;
  },
  postrender: function() {
    $('#duel-new').each(function() {
      console.log('Found something')
    });
  }
}); 
```

除上述内容外，我还使用[http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/中概述的视图处理程序](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

这我做类似的事情

```
var view = Duel.Views.Home({model: mymodel})
viewHandler('#content').showView(view) 
```

这叫

```
$('#content').html(view.render().el) 
```

但是发生的情况是，当模板还没有缓存时，先调用render，然后按时调用postrender。另一方面，当模板已经被缓存时，模板被立即渲染，postrender 被调用，但`view.el`还没有插入到 DOM 中，因此 $(this.el) 是一个空列表，并且 $('#duel -new').each() 是“无效的”。

当然，我可以在 viewHandler 的 render 调用之后添加 postrender 方法，但这会导致相同的问题，但在第一次调用 render 方法时。由于模板尚未编译，postrender 在其元素存在之前被调用，因此无法在这些不存在的元素上定义处理程序。

关于如何正确克服这个问题的任何想法？例如，使用 .on 的简单点击事件相对简单，但是更一般的结构`$('#tabs').tabs()`呢？例如？

我的 fetchTemplate 函数如下：

```
fetchTemplate: function(path, done) {
  window.JST = window.JST || {};

  // Should be an instant synchronous way of getting the template, if it
  // exists in the JST object.
  if (JST[path]) {
    return done(JST[path]);
  }

  // Fetch it asynchronously if not available from JST
  return $.get(path, function(contents) {
    var tmpl = jade.compile(contents,{other: "locals"});
    JST[path] = tmpl;

    return done(tmpl);
  });
}, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T15:47:16.353

不需要所有这些并发症。

原始`fetchTemplate`返回一个 jQuery [promise](http://api.jquery.com/promise/)。如果您不了解 jQuery 的 Deferreds 和 Promises，那么您的版本也应该如此，现在是查看它们的好时机。回调已死；）

使用 Promise，一切都变得如此简单：在您的`initialize`获取模板并分配 Promise 中。然后仅在承诺已履行时才渲染，例如：

```
Duel.Views.Home = Backbone.View.extend({
    initialize: function () {
       this.templateFetched = statusapp.fetchTemplate(this.template);

    },
    ...

    render: function () {
        var view = this;
        this.templateFetched.done(function (tmpl) {
            view.$el.html( tmpl({duels: view.collection.toJSON()}) );
            ... // All your UI extras here...
        });
    }
}); 
```

请注意，一旦实现了承诺，`done`将始终简单地立即运行。如果您在视图`$el`之外修改视图，您当然可以遵循相同的模式，即将代码包装在`view.templatedFetched.done(...)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:53:31.647

我阅读了您提供链接的文章-僵尸之一。很好，据我所知，它已经包含了您问题的答案，所需要的只是对其进行搜索。在多次阅读和重新阅读您的问题后，我能想到的是您可能喜欢使用 .NET 方式（如 Zombies 文章中所建议的那样）。也就是说，类似：

```
// in showView method of viewHandler
if (this.currentView) {
    this.currentView.close();
}

this.currentView = view;
this.elem.html( this.currentView.render().el );
if ( this.currentView.onAddToDom )  // THIS IS THE IMPORTANT PART.
    this.currentView.onAddToDom(); 
```

在视图中，您添加一个“onAddToDom”方法，当您的视图添加到 dom 时，该方法将被调用。这可用于调用 postrender() 方法，或者您可以将 postrender() 重命名为“onAddToDom()”。这样，问题就解决了。如何？解释如下。

您可以将视图重新定义为：

```
Duel.Views.Home = Backbone.View.extend({
  template: "/templates/duel_home.jade",
  render: function() {
    var view = this;
    statusapp.fetchTemplate(this.template, function(tmpl) {
      $(view.el).html( tmpl({duels: view.collection.toJSON()}) );
    });
    return this;
  },
  onAddToDom: function() {
    $('#duel-new').each(function() {
      console.log('Found something')
    });
  }
}); 
```

现在当你做类似的事情时

```
var view = Duel.Views.Home({model: mymodel})
viewHandler('#content').showView(view); 
```

这被称为

```
$('#content').html(view.render().el)
if(view.onAddToDom)
    view.onAddToDom(); 
```

这将调用（以前称为）postrender() 方法。

问题解决了。

**警告**`view.render()`：但是请注意，如果直接调用而不是从内部调用 onAddToDom，这将失败（即 onAddToDom - 或者我们应该调用 postrender() 吗？ - 不会被调用） ，`viewHandler('selector').showView`因为我们从内部调用 onAddToDom。但无论如何，这不是必需的，因为如果我们想在渲染后调用某些东西，我们可以将它添加到`render()`方法本身。我只是想确保没有任何混淆，所以给出了这个警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T18:52:17.800

1.  您使用的是哪个版本的 Backbone？

2.  您使用的是 jQuery、zepto 还是其他？什么版本？

3.  仅当模板已缓存*且未*异步检索时才会出现问题？如果是这种情况，您可以在 jsfiddle 中创建一个示例吗？

4.  出现问题的浏览器是什么？

5.  > 因此 $(this.el) 是一个空列表，并且 $('#duel-new').each() 是“void”

    请准确定义“空列表”和“无效”的含义。除非严重搞砸了，否则 jQuery`$( this.el )`应该是长度为 1 的 jQuery 对象。 jQuery`$( '#duel-new' ).each()`应该是 jQuery 对象，长度可能为 0。

    正如@20100 提到的，如果您的 Backbone 版本支持它，您最好使用`this.$el`而不是`$( this.el )`.

6.  > 这叫
    > 
    > ```
    >  $('#content').html(view.render().el) 
    > ```

    `jQuery.html()`仅记录为接受字符串参数，因此如果使用 jQuery，我认为这不是一个好主意。

7.  > 这我做类似的事情
    > 
    > ```
    >  var view = Duel.Views.Home({model: mymodel})
    >  viewHandler('#content').showView(view) 
    > ```

    这不应该`new Duel.Views.Home( { model : mymodel } )`吗？否则，在构造函数内部，`this`将是`Duel.Views`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:04:55.923

您可以尝试更改标记的行吗：

`view.$el`与创建自己的相同`$(view.el)`，这是 Backbone 0.9.0+ 中的语法糖

`$('#duel-new')`遍历整个 dom-tree，而`$('#duel-new', this.$el)`仅在当前视图范围内检查，大大减少了 DOM 遍历所花费的时间。

虽然这可能不需要解决您的特殊问题，但我自己没有任何问题

```
Duel.Views.Home = Backbone.View.extend({
  template: "/templates/duel_home.jade",
  render: function() {
    var view = this;
    statusapp.fetchTemplate(this.template, function(tmpl) {
      view.$el.html( tmpl({duels: view.collection.toJSON()}) ); // change this
      view.postrender();
    });
    return this;
  },
  postrender: function() {
    $('#duel-new', this.$el).each(function() { // change this
      console.log('Found something')
    });
  }
}); 
```