# StackOverflow 问答 11732000-11732999

# java - 如何让paintComponent() 在开始时不运行？

> ID：11732003
> 
> 赞同：0
> 
> 时间：2012-07-31T01:40:40.503
> 
> 标签：java, graphics

我正在尝试制作类似于 Paint 的东西，但遇到了一些障碍。基本上，您在调用paintComponent() 的JPanel 中进行绘制。但是，当程序运行时，左上角会出现一个不需要的点。我认为这是因为在程序开始时调用了paintComponent()。有什么办法可以禁用它吗？下面列出了代码（我删除了导入），感谢您的阅读。这是paintBoard类：

```
public class PaintBoard extends JPanel implements MouseListener
{
Image img;
//PaintBoard panel;
int circleX = 25;
int circleY = 25;
int x;
int y;

public PaintBoard()
{
    this.addMouseListener(this);
}
public void paintComponent(Graphics g)
{       
    g.setColor(Color.RED);

    g.fillOval(x, y, circleX, circleY);
}
public void mouseClicked(MouseEvent arg0) 
{   
}
public void mouseEntered(MouseEvent arg0) 
{       
}
public void mouseExited(MouseEvent arg0) 
{   
}
public void mousePressed(MouseEvent arg0) 
{
    x = arg0.getX();
    y = arg0.getY();;

    repaint();
}
public void mouseReleased(MouseEvent arg0) 
{   
}

} 
```

这是主要课程：

```
public class Main 
{
JFrame mainFrame = new JFrame("Painting test");
PaintBoard board = new PaintBoard();

public Main() throws IOException
{   
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainFrame.setSize(1750, 1000);
    mainFrame.setLayout(new GridLayout(2, 2));
    mainFrame.add(board);
    //mainFrame.pack();
    mainFrame.setVisible(true);
}

public static void main(String[] args) throws IOException 
{
    new Main();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T01:46:55.543

这有点不对。您想要一个作为缓冲图像的后缓冲区，当鼠标按下并移动或鼠标按钮被抬起时，您可以绘制到该缓冲区。每次调用paintComponent 时，您都希望使用graphics.draw 或类似的东西将此后缓冲复制到组件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T01:54:44.870

问题是 x/y 坐标已初始化为 0/0，因此您的 paint 方法正在执行您要求它执行的操作。

最好将 x/y 坐标设置为您可以识别的某个值，并且根本不绘制椭圆，例如 -1/-1

```
int x = -1;
int y = -1;

public void paintComponent(Graphics g)
{       
    if (x >= 0 && y >= 0) {
        g.setColor(Color.RED);

        g.fillOval(x, y, circleX, circleY);
    }
} 
```

请注意，马库斯的解决方案是一个更好的解决方案，这只是解决了问题

# python - sqlalchemy 中关于另一个应用程序创建的新行的通知

> ID：11732004
> 
> 赞同：2
> 
> 时间：2012-07-31T01:41:03.393
> 
> 标签：python, sql-server, triggers, sqlalchemy

两个应用程序使用同一个 MSSQL 数据库。

我的应用程序将[sqlalchemy](http://www.sqlalchemy.org/)与[pymssql](http://code.google.com/p/pymssql/)一起使用，并且希望在另一个应用程序将行添加到特定表时收到通知。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:01:06.293

让我们称您的应用程序为“消费者”，而另一个应用程序为“生产者”。

有几种方法，最适合的方法取决于您期望的记录、生产者和消费者的数量。

1.  对于少量记录、生产者和消费者实例，您可以将“ack”字段添加到表中，并将其`false`作为默认值。新条目应将此字段设置为 false，以便其他应用程序在处理新条目后可以将“ack”设置为 true。
2.  您可以将表用作队列，其中生产者实例插入新记录，消费者实例在复制到最终目标表后删除记录。
3.  [为了获得最大的可扩展性，您可以使用AMQP](http://www.amqp.org/)之类的东西来管理消费者和生产者之间的通信

请注意，任何涉及轮询数据库以进行更改的算法都有可能对底层 DBMS 造成沉重负担。

[更新]

[货车](https://stackoverflow.com/users/99594/van)的建议：

> 只是为了不完全的可能性：您还可以使用 AFTER INSERT 触发器将新插入/更新行的标志或 TableName 和 PrimaryKey 存储在某个帮助表中，您的 SA 应用程序将定期轮询这些表。但是，要小心，因为来自 SA 的插入也会触发触发器。–[面包车](https://stackoverflow.com/users/99594/van)

# java - Eclipse 启动器 ini 配置变量可以采用相对路径吗？

> ID：11732006
> 
> 赞同：1
> 
> 时间：2012-07-31T01:41:21.723
> 
> 标签：java, eclipse, eclipse-rcp

我有一个产品，它将 -configuration 文件夹定义为与and文件`RCP Eclipse`位于不同的位置。当我在 中指定相对于 的配置路径时，*启动*产品仅在从.`exe``ini``ini` *`exe``exe`*

 *IE：`/home/Sheldon>product.exe`

*从另一个目录* 启动**失败**，除非*配置路径*设置为文件中的*绝对路径*`ini`。

IE：`>/home/Sheldon/product.exe`

`startup`对于or`launcher.library`变量，情况并非如此。

有没有办法通过*相对配置路径*支持此设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:44:45.050

我很少喜欢在没有评论或回答的情况下结束自己的问题，但我确实得出了结论，我认为这是目前最好的答案。

我不相信这是可能的，而无需修改 eclipse 源。

特别是[LocationManager](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5/org.eclipse/osgi/3.5.0/org/eclipse/core/runtime/adaptor/LocationManager.java#LocationManager.buildURL%28java.lang.String,boolean%29) : [buildLocation](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5/org.eclipse/osgi/3.5.0/org/eclipse/core/runtime/adaptor/LocationManager.java#177)。

因此，最好的折衷方案是将文件夹放置在`configuration`文件夹旁边`plugins`。`plugins`文件夹位于相对路径中很好。例如，`product.ini`在相对路径中包含这些文件夹的有效文件如下所示：

```
-startup
../Common/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
../Common/plugins/org.eclipse.equinox.launcher.i18n.win32.win32.x86_64_4.2.0.v20
1201111650
-vm
../jre/bin/javaw.exe 
```

这意味着`configuration`文件夹必须存在`../Common/configuration`才能具有相对路径。任何其他文件夹都需要绝对路径，或使用不太有用的替换变量之一，{ `@NoDefault`, `@None`, `@user.dir`, `@user.home`}。*

# ruby-on-rails - 如何使用 git 复制 rails 应用程序并部署到 heroku

> ID：11732016
> 
> 赞同：3
> 
> 时间：2012-07-31T01:44:09.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我是编程和 Rails 的新手，我想创建一个我正在使用的 Rails 应用程序的副本，以便无害地尝试一些事情。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T01:44:09.330

是的你可以。这些命令对像我这样的新手来说并不明显，可能会帮助其他人......

首先，根据您计划调用新部署的应用程序的名称，找到当前在 heroku 上可用的名称。

从旧的根目录和要创建的新 Rails 应用程序：

```
$ cp -R old_directory new_directory
$ cd new_directory
$ rm -rf .git
# find and replace all references to old_director found within new_directory
# the command at the terminal 'grep -ri "old_director" .' may help to locate 
# all of the references to the old_directory
$ git init
$ git add .
$ git ci -am “First commit after copying from old_app”
# create new_directory repository at github.  Follow along their 
# directions for new repository with appropriate modifications.  
$ git remote add origin git@github.com:[github username]/[new_directory].git
$ git push -u origin master
$ rake db:migrate
$ heroku create [new_app]
$ git push heroku master 
```

要为您的新应用生成新的密钥：

```
$ rake secret  # generate new secret key for new app
5ed8c7d9a3bda9cec3887b61f22aa95bf430a3a550407642b96751c7ef0ce8946a161506d6739da0dcaaea8c8f4f8b3335b1fb549e3cc54f0a4cec554ede05f8 
```

接下来，使用以下命令将新创建的密钥保存为 Heroku 上的环境变量：

```
$ heroku config:set SECRET_KEY_BASE=5ed8c7d9a3bda9cec3887b61f22aa95bf430a3a550407642b96751c7ef0ce8946a161506d6739da0dcaaea8c8f4f8b3335b1fb549e3cc54f0a4cec554ede05f8 
```

有关将密钥等存储为环境变量的更多详细信息，请参见[Daniel Fone 的博客](http://daniel.fone.net.nz/blog/2013/05/20/a-better-way-to-manage-the-rails-secret-token/)。

最后：

```
$ heroku run rake db:migrate 
```

# mysql - 如何在 MyQuery (Delphi) 中将数据插入 MySQL 表

> ID：11732019
> 
> 赞同：-1
> 
> 时间：2012-07-31T01:44:47.070
> 
> 标签：mysql, delphi, delphi-7, mydac

我正在通过建立用户注册应用程序进行 mysql 连接。我使用Delphi **7。Myquery**（MySQL 访问集）在添加用户信息时出现问题。

```
MyQuery1.SQL.Clear;
MyQuery1.SQLInsert.Add('INSERT INTO uyeler (nick) VALUES ('+QuotedStr(DBEdit1.text)+')');
MyQuery1.SQLInsert.Add('INSERT INTO uyeler (mail) VALUES ('+QuotedStr(DBEdit2.text)+')');
MyQuery1.SQLInsert.Add('INSERT INTO uyeler (site) VALUES ('+QuotedStr(DBEdit3.text)+')');
MyQuery1.SQLInsert.Add('INSERT INTO uyeler (pass) VALUES ('+QuotedStr(DBEdit4.text)+')');
MyQuery1.CachedUpdates:=True;
MyQuery1.Open; 
```

**错误消息：** MyQuery1：未提供 SQL 语句。

**注：** uyeler：成员表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T04:38:15.063

引发此消息是因为您没有填充`SQL`属性，而是使用了`SQLInsert`作为查询语句模板的。

一些额外的提示

1.  你必须使用`Execute`方法，`Open`方法是用于`SELECT`句子的。
2.  使用单个插入句子，例如

    **INSERT INTO uyeler (nick,mail,site,pass) VALUES ('','','','')**

3.  尝试使用参数，而不是直接传递字符串值，这样可以避免 sql 注入攻击并提高性能。

# html - 使用 CSS 的 ASP.NET MVC 中每个视图的不同背景颜色

> ID：11732022
> 
> 赞同：0
> 
> 时间：2012-07-31T01:44:54.483
> 
> 标签：html, css, asp.net-mvc, background-color

我正在尝试使用 ASP.NET MVC 4 构建网站。我的项目带有一个 css 文件，该文件会影响我所有使用主布局 (_Layout.cshtml) 的视图。我希望能够根据视图使用三种不同背景颜色中的一种，我需要帮助。这是我到目前为止所拥有的：

```
/* main layout
----------------------------------------------------------*/

.content-wrapper {
    margin: 0 auto;
    max-width: 960px;
}

#body {
    background-color: #eb6f5c;
    clear: both;
    padding-bottom: 35px;
}

#body#Geldi {
    background-color: #a0f3ab;
    clear: both;
    padding-bottom: 35px;
}

#body#Login {
    background-color: #e8f3a0;
    clear: both;
    padding-bottom: 35px;
}

footer {
    clear: both;
    background-color: #e2e2e2;
    font-size: .8em;
    height: 100px;
} 
```

研究并没有让我走得更远。我所有的页面仍然是粉红色（#eb6f5c）。如何告诉 Visual Studio 我想为特定视图使用“Geldi”主体类型或“登录”主体类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T01:53:57.817

首先，我认为您不能使用那个特定的 CSS 选择器（我认为它可以转换为选择 ID="body" 和 ID="Login"（或“Geldi”）的元素，但 CSS 不是我的强项）。如果您将它设置为页面的主体标签，请去掉`#body`并直接使用`body`，因为您可以通过 HTML 元素名称进行选择。所以改为：`body#Login`和`body#Geldi`

之后，最好使用 ViewData，并将其设置在您的子视图（登录视图或其他内容）中，然后将其提供给您的主视图

例如：

_Layout.cshtml

```
<body id='@(ViewData["PageId"] ?? "")'>
    @RenderBody()
</body> 
```

登录.cshtml

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["PageId"] = "Login";
}

<div id='content'>
    <!-- All of your page content here and whatever -->
</div> 
```

# linux - Linux 的 2D 渲染库（和视频）

> ID：11732025
> 
> 赞同：0
> 
> 时间：2012-07-31T01:45:38.917
> 
> 标签：linux, animation, video, svg, 2d

我想编写一个系统，它采用简单的 DSL，将其转换为 2D 动画，并将其呈现为视频。当我说“动画”时，我的意思是类似于标题序列生成器或精美版本的 PowerPoint（而不是动画卡通）。我是一名 Linux 开发人员，因此理想情况下它会使用 C 堆栈或 Java。

我一直在考虑各种选择，但我觉得我可能会遗漏一些东西。例如，有嵌入的 SVG 动画（使用 Batik 或 librsvg）。这很容易定位，但 SVG 动画实现似乎不完整且容易出错，并且不清楚如何将其转码为视频。

另一方面，有诸如 SDL（与 ffmpeg 结合？）之类的东西——它显然提供了很多功能，但可能有点矫枉过正。我看到了像 synfig 和 Blender 这样的系统，但似乎这些系统并不是真正为想要编写 API 的人设计的。处理可能也是如此，但我不确定。

由于动画不像您在游戏中看到的那样复杂，因此可以生成静止图像并将它们拼接在一起（尽管这对我来说似乎效率很低）。但即使在那里，我也不确定哪些库是理想的。

我希望我正确地描述了这个项目。我想我正在想象一个 Adob​​e Flex 版本，它具有一组更受限制的可能输出（并且再次以视频为目标）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:59:58.127

看看 JavaFX，看看它是否适合你。

JavaFX 具有过渡、效果、混合、动画、视频播放、笔触、填充、渐变、文本和图像处理、html 显示和编辑、平行和透视相机、硬件加速等。

JavaFX 2.2 缺少视频捕获功能，因此您需要使用 ffmpeg 或其他一些库来补充它。

Groovy 或 Scala 可用于创建和运行 DSL，并且 DSL 可以调用 GroovyFX 或 ScalaFX JavaFX 包装器库。或者，如果您愿意，您可以使用普通的 java 应用程序来解析和运行您的 DSL，以避免使用这些语言。

[http://www.oracle.com/technetwork/java/javafx/samples/index.html](http://www.oracle.com/technetwork/java/javafx/samples/index.html)

[http://docs.oracle.com/javafx/](http://docs.oracle.com/javafx/)

[http://fxexperience.com/2012/03/canned-animations/](http://fxexperience.com/2012/03/canned-animations/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T01:48:25.870

或者你可以使用闪光灯，它的喜欢。或 linux 上的 flash 实现。或 javafx 之类的。

# xcode - 使用 Xcode 添加/放置文本文件时遇到问题

> ID：11732027
> 
> 赞同：0
> 
> 时间：2012-07-31T01:46:25.737
> 
> 标签：xcode

我在使用 Xcode 添加文本文件时遇到问题。我有读取它的编码设置，但我不知道将 .txt 文件放在哪里。我在 Product 文件夹下有 .txt，但它会给我一个不想要的输出。我用谷歌搜索并问过我的导师，但他不知道。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:50:26.137

你得到什么不想要的输出？

然后将您的文本文件拖放到xcode上

```
NSString *textFilePath = [[NSBundle mainBundle] pathForResource: @"textfilename" ofType: @"txt"];
NSString *text = [NSString stringWithContentsOfFile:textFilePath
                  usedEncoding:NSUTF8Encoding
                         error:nil]; 
```

# c# - 在 C# 窗口的窗体中访问子窗体属性

> ID：11732029
> 
> 赞同：0
> 
> 时间：2012-07-31T01:46:51.300
> 
> 标签：c#

所以我试图从其父表单访问我的子表单的公共成员变量。该表单有一个公共 get 属性，我试图从中访问该变量。以下是在我的子表单中定义变量的方式：

```
 public partial class frmNewProduct : Form
{
    public Inventory _inventory { get; private set; } 
```

现在让我们切换节奏并转到父表单。子窗体的实例在下面创建，您还可以看到我试图从该实例访问 _iventory 的 get 属性，但我每次都收到编译器错误。

```
 private void btnAdd_Click(object sender, EventArgs e)
    {
        Form newProduct = new frmNewProduct(_inventory, Mode.add);
        newProduct.Show();
        Inventory variable = newProduct._inventory;
    } 
```

编译器错误内容如下：

错误 1“System.Windows.Forms.Form”不包含“_inventory”的定义，并且找不到接受“System.Windows.Forms.Form”类型的第一个参数的扩展方法“_inventory”（您是否缺少使用指令还是程序集引用？）

有谁知道这里有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T01:48:38.953

您正在创建父类型 Form 的类型。您需要将其声明为派生类型frmNewProduct。例如：

```
frmNewProduct newProduct = new frmNewProduct(_inventory, Mode.add);
newProduct.Show();
Inventory variable = newProduct._inventory; 
```

澄清一下：您正在向从 Form 继承的类型 frmNewForm 添加一个属性。Form 没有该属性，因此在将变量声明为 Form 类型时无法访问它。

另一个例子：

```
class BaseClass {
}

class DerivedClass : BaseClass {
    public int MyProperty { get; set; }
} 
```

使用上面的代码，你不能这样做：

```
BaseClass base = new DerivedClass();
base.MyProperty = 12; // ERROR 
```

..但是，您可以这样做：

```
DerivedClass derived = new DerivedClass();
derived.MyProperty = 12; // Works 
```

# ios - 使用 Xcode 中的自定义键盘限制 UITextfield 中的文本

> ID：11732030
> 
> 赞同：0
> 
> 时间：2012-07-31T01:46:51.017
> 
> 标签：ios, xcode, keyboard, uitextfield

我刚刚得到了一个自定义键盘。我想对应用程序进行最后一次触摸，但我无法弄清楚。我想限制文本输入的数量。我用过这个方法......

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
NSLog(@"user is entering numbers");
NSUInteger newLength = [textField.text length] + [string length] - range.length;
return (newLength > 8) ? NO : YES;
} 
```

但它永远不会被调用。我可以在我的实际键盘上输入，文本限制为 8 个。但如果我在模拟器中使用我的自定义键盘，我可以永远输入数字。知道如何从我的自定义键盘调用此方法吗？谢谢！！

编辑

响应 Kjuly 的帮助。这是我的更多代码。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
NSLog(@"textFieldDidBeginEditing");
if ([fahrenheit isFirstResponder]) 
{
    self.currentTextField = self.fahrenheit;
    celcius.text = @"";
    kelvin.text = @"";
    self.userIsEnteringANumber = NO;
}
else if ([celcius isFirstResponder])
{
    self.currentTextField = self.celcius;
    fahrenheit.text = @"";
    kelvin.text = @"";
    self.userIsEnteringANumber = NO;
}
else if ([kelvin isFirstResponder])
{
    self.currentTextField = self.kelvin;
    fahrenheit.text = @"";
    celcius.text = @"";
    self.userIsEnteringANumber = NO;
}
} 
```

开始编辑时会调用此方法。但仍然只有在我使用键盘时才会调用 shouldChangeChararcterInRange 方法。我的 viewDidLoad 方法是

```
- (void)viewDidLoad
{
[super viewDidLoad];
[fahrenheit setText:@""];
[celcius setText:@""];
[kelvin setText:@""];
[fahrenheit setInputView:keyPad];
[celcius setInputView:keyPad];
[kelvin setInputView:keyPad];
fahrenheit.delegate = self;
celcius.delegate = self;
kelvin.delegate = self;
} 
```

所以感谢大家的帮助，我希望尽快解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:51:01.630

> 但它永远不会被调用。

分配后添加`yourTextField`：

```
[self.yourTextField setDelegate:self]; 
```

* * *

### 编辑

你的`-viewDidLoad:`方法应该像：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  // you should alloc your text fields here or in |-init| method
  fahrenheit = [[UITextField alloc] initWithFrame:CGRectMake(...)];
  celcius    = [[UITextField alloc] initWithFrame:CGRectMake(...)];
  kelvin     = [[UITextField alloc] initWithFrame:CGRectMake(...)];
  [self.view addSubview:fahrenheit];
  [self.view addSubview:celcius];
  [self.view addSubview:kelvin];

  [fahrenheit setText:@""]; // you can set it to nil
  [celcius setText:@""];
  [kelvin setText:@""];
  [fahrenheit setInputView:keyPad]; // what's keyPad? It's your custom input view, uh?
  [celcius setInputView:keyPad];
  [kelvin setInputView:keyPad];
  fahrenheit.delegate = self;
  celcius.delegate = self;
  kelvin.delegate = self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:04:22.100

嗯，我终于想通了！！我发现一个帖子说 Xcode 在使用自定义键盘时不会运行方法 shouldChangeCharactersInRange 。与 Xcode 有关，不知道按钮上是否有一个或多个项目。所以这就是为什么从未调用过该方法的原因。然后我看到有人试图用他创建的另一种方法来限制文本。这对我不起作用，因为我的自定义键盘会检查小数以及附加数字。所以我想出了以下代码，它可以工作！我的输入限制为 8 个字符，我仍然可以使用我的否定符号，因为那是一种不同的方法。

```
- (IBAction)buttonPressed:(UIButton *)sender 
{
NSString *button = [sender currentTitle];
NSRange decimalpoint = [self.currentTextField.text rangeOfString:@"."];
if (self.userIsEnteringANumber)
{
    if (currentTextField.text.length < 8)
    {
       if ([button isEqualToString:@"."] && decimalpoint.location != NSNotFound)
       {
           self.currentTextField.text = self.currentTextField.text;
       }else 
           self.currentTextField.text = [self.currentTextField.text stringByAppendingString:button];
    }else 
        self.currentTextField.text = self.currentTextField.text;
}else 
    {
    self.currentTextField.text = button;
    self.userIsEnteringANumber = YES;
    }
} 
```

所以感谢大家的帮助，尤其是@Kjuly。

# sql - 批量更新 Excel 文件连接字符串

> ID：11732033
> 
> 赞同：9
> 
> 时间：2012-07-31T01:46:59.800
> 
> 标签：sql, string, excel, connection

我们最近更改了我们的 SQL 数据库服务器，我想知道是否有更新所有 Excel 文件连接字符串的脚本或更简单的方法？

如果他们使用连接文件会容易得多，但不幸的是，它们都是手动设置的，我们有大约 600 个报告......

任何帮助深表感谢。

谢谢

缺口

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-28T13:12:16.767

我想做同样的事情，并遇到了这个`XLODCTool`从[这里](https://sergeig888.wordpress.com/2011/05/12/office-data-connection-bulk-editor-tool/)调用的工具。

文件链接[在这里](https://skydrive.live.com/redir?resid=53E1D37F76F69444!911&authkey=!AAXddOwbRbNiu9I&ithint=folder%2C.zip)。

您可以批量更改连接字符串中的值，例如

`DSN`从`SERVERA`到`SERVERB`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:21:58.190

是的，您可以...您在 c# 或 vb.net 中创建一个程序，循环遍历所有 600 个文档并打开文档并使用

```
 oModule = oBook.VBProject.VBComponents.Add(VBIDE.vbext_ComponentType.vbext_ct_StdModule)
    oModule.CodeModule.AddFromString(sCode) 
```

并且根据您在 sCode 变量中的设置，您有一个循环通过 Excel.Connections 或

```
 For Each wks In ActiveWorkbook.Worksheets
      For Each qt In wks.QueryTables
        With qt
          .Connection ="myconnstring" 
        End With
      Next qt
    Next wks 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-17T12:54:11.603

基于 Archlight 解决方案，宏如下：

```
Sub UpdateConnectionsString_Click()
   For Each wks In ActiveWorkbook.Worksheets
      For Each qt In wks.QueryTables
          With qt
           'Debug.Print .Connection
           .Connection = Replace(.Connection, "bla.com", "localhost")
          End With
      Next qt
    Next wks
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-02T06:44:28.447

以下 PowerShell 脚本循环遍历当前目录中的所有 xlsx 文件。提取它们，然后在连接字符串文件中进行查找和替换。将文件重新添加到具有相同名称的新存档（xlsx 文件）中。以'_new'为后缀

将粘贴复制到 *.ps1 文件中并运行。

```
echo `nStarting....`n
$Zips = Get-ChildItem -filter "*.xlsx" -Recurse
$Destination = 'Extracted/'
$WinRar = "C:\Program Files (x86)\WinRAR\winrar.exe"

foreach ($zip in $Zips)
{
$des = $Destination + $zip.BaseName + "/"
&$Winrar x -Y -ibck $zip.FullName $des
Get-Process winrar | Wait-Process

}

$configFiles = Get-ChildItem Extracted\*\xl\connections.xml -recurse 
$configFiles | Set-ItemProperty -Name IsReadOnly -Value $false

foreach ($file in $configFiles)
{
    (Get-Content $file.PSPath) |
    Foreach-Object { $_ -replace "SERVER=123456;", "SERVER=7891011;" } |
    Set-Content $file.PSPath

}

$configFiles = Get-ChildItem Extracted | ? {$_.PSIsContainer}

foreach ($file in $configFiles)
{
    $FileDestination = './' + $file.Name + '_new.xlsx'
    $files = 'Extracted/' + $file.Name + '/*.*'
    &$Winrar a -r -afzip -ep1 $FileDestination $files
}

echo `nDone!`n 
```

# java - Java 泛型不允许我向列表中添加另一个项目

> ID：11732049
> 
> 赞同：3
> 
> 时间：2012-07-31T01:49:18.460
> 
> 标签：java, generics

我有这个通用类

```
public class BinTree<T> {

    T value;

    List<BinTree<? extends T>> branch = new ArrayList<BinTree<? extends T>>();

    public BinTree(T v){ value  = v;}

    public void addBranch(BinTree<? extends T> tree){
        if(branch.size() == 2){
            System.out.println("You can only have two childs");
        }else{
            branch.add(tree);
        }
    }

    public BinTree<? extends T> getBranch(int n){ return branch.get(n);}

} 
```

及其在这里的实现

```
public static void main(String[] args){
        BinTree<Number> firstBinTree = new BinTree<Number>(0);
        firstBinTree.addBranch(new BinTree<Integer>(5));
        firstBinTree.addBranch(new BinTree<Double>(6.5));

        Number o = firstBinTree.getBranch(0).value;
        firstBinTree.getBranch(0).addBranch(new BinTree<Integer>(6));

    } 
```

但是这条线

```
firstBinTree.getBranch(0).addBranch(new BinTree<Integer>(6)); 
```

不允许我添加另一个整数类型的 BinTree。这是为什么？我在我的 addBranch 方法中声明它可以添加任何类型，只要它是 Type 的子类（在这种情况下为数字），它将被添加到列表中，但我为什么不能？整数不是数字的子类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T01:54:38.830

它不会知道是否

```
<? extends T> 
```

我认为在 getBranch 和 addBranch 中是相同的。所以它会是

```
<? extends ? extends T> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:11:51.537

这是因为[泛型不是协变的](https://stackoverflow.com/a/2745301/1393766)。

在您的示例`getBranch(0)`中可以返回`BinTree<? extends Number>`（例如`BinTree<Integer>`or `BinTree<Double>`），但编译器无法确定将使用的精确泛型类型。因此，出于安全原因，它不允许使用 BinTree< `Integer`>`addBranch`以防`getBranch(0)`返回与BinTree< >***不同的东西***`Integer`，例如 BinTree< `Double`>。

# xslt - xslt递归乘法

> ID：11732054
> 
> 赞同：1
> 
> 时间：2012-07-31T01:49:38.913
> 
> 标签：xslt

下面的xml文档代表3个数字，2、2和2。一个节点`<s>`算作一个数字，以.结尾`<zero/>`。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <nat xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="nat.xsd">
      <s>
        <s>
          <zero/>
        </s>
      </s>
      <s>
        <s>
          <zero/>
        </s>
      </s>
      <s>
        <s>
          <zero/>
        </s>
      </s>
    </nat> 
```

我刚开始学习 xslt，这是递归练习之一。我可以递归地加上所有数字，但是这个乘以两个以上的数字让我大吃一惊。我不知道该怎么做。

上述 xml 文档的预期答案是 8s（忽略格式）：

`<s><s><s><s><s><s><s><s><zero/></s></s></s></s></s></s></s></s>` 我的想法是这样的，我可以有一个模板通过相加来对两个数字进行乘法运算。所以对于这个 2x2x2，我会做第 2 次 2 次第 3 次 2 返回 4，最后做 2*4。但是调用模板不会在 xslt 中返回值，这与 java 或方案不同，所以我感谢任何提示/帮助。

**更新：** 我通过在 Dimitre 的答案中添加打印模板得到了答案。这里是：

```
 <xsl:template name="print">
    <xsl:param name="pAccum"/>
        <xsl:choose>
            <xsl:when test="$pAccum > 0">
                <s>
                    <xsl:call-template name="print">
                        <xsl:with-param name="pAccum" select="$pAccum - 1"/>
                    </xsl:call-template>
                </s>
             </xsl:when>
             <xsl:otherwise>
                <zero/>
            </xsl:otherwise>    
        </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:26:27.370

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:call-template name="product">
   <xsl:with-param name="pArgs" select="//zero"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template name="product">
  <xsl:param name="pAccum" select="1"/>
  <xsl:param name="pArgs" select="/.."/>

  <xsl:choose>
   <xsl:when test="not($pArgs)">
    <xsl:value-of select="$pAccum"/>
   </xsl:when>
   <xsl:otherwise>
    <xsl:call-template name="product">
     <xsl:with-param name="pAccum"
          select="$pAccum * count($pArgs[1]/ancestor::s)"/>
     <xsl:with-param name="pArgs" select="$pArgs[position() > 1]"/>
    </xsl:call-template>
   </xsl:otherwise>
  </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<nat>
    <s>
        <s>
            <zero/>
        </s>
    </s>
    <s>
        <s>
            <zero/>
        </s>
    </s>
    <s>
        <s>
            <zero/>
        </s>
    </s>
</nat> 
```

**产生想要的正确结果：**

```
8 
```

**说明**：

具有停止条件的原始递归——空参数节点集和累加器——用于将当前累加结果传递给下一个递归调用的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:19:00.123

在 XSLT 2.0 中，我将从两个函数开始：

```
<xsl:function name="f:toNumber" as="xs:integer">
  <xsl:param name="z" as="element(zero)"/>
  <xsl:sequence select="count($z/ancestor::*)"/>
</xsl:function>

<xsl:function name="f:fromNumber" as="element()>
  <xsl:param name="z" as="xs:integer"/>
  <xsl:choose>
   <xsl:when test="$z=0"><zero/></xsl:when>
   <xsl:otherwise><s><xsl:sequence select="f:fromNumber($z - 1)"/>
</xsl:function> 
```

这解决了你的数字表示的怪异问题。

现在您只需要一个计算数字序列乘积的函数：

```
<xsl:function name="f:product" as="xs:integer">
  <xsl:param name="in" as="xs:integer"/>
  <xsl:sequence select="if (count($in) = 1) then $in[1] else $in * f:product($in[position()>1])"/>
</xsl:function> 
```

剩下的就是儿戏了……

# python - 从 hotmail smtp Python 发送电子邮件时出错

> ID：11732058
> 
> 赞同：3
> 
> 时间：2012-07-31T01:50:32.347
> 
> 标签：python, smtplib

我正在尝试使用以下代码发送电子邮件：

```
s = smtplib.SMTP("smtp.live.com",587, timeout=120)
    s.ehlo()
    s.starttls() 
    s.ehlo()
    s.login(user, pass)
msg["To"] = string.joinfields(bundle, ", ")
    s.sendmail(usuario, bundle, msg) 
```

但是我收到以下错误：

```
 File "C:\Python27\lib\smtplib.py", line 242, in __init__
    (code, msg) = self.connect(host, port)
  File "C:\Python27\lib\smtplib.py", line 302, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "C:\Python27\lib\smtplib.py", line 277, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "C:\Python27\lib\socket.py", line 571, in create_connection
    raise err
error: [Errno 10060] A connection attempt failed because the connected party did
 not properly respond after a period of time, or established connection failed b
ecause connected host has failed to respond 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:39:40.410

没什么，我想。您可能在防火墙后面，或者 hotmail 的日子不好过。在命令提示符下，尝试`telnet smtp.live.com 587`. 如果您没有收到回复，则说明您的连接存在问题。

这是我得到的结果：

```
$ telnet smtp.live.com 587
Trying 65.55.96.11...
Connected to smtp.hot.glbdns.microsoft.com.
Escape character is '^]'.
220 BLU0-SMTP406.phx.gbl Microsoft ESMTP MAIL Service, Version: 6.0.3790.4675 ready at  Mon, 30 Jul 2012 19:37:46 -0700 
```

# regex - Perl 二进制/PCAP 正则表达式

> ID：11732060
> 
> 赞同：1
> 
> 时间：2012-07-31T01:50:47.003
> 
> 标签：regex, perl, binary

我有一个 pcap 文件，我需要在字符串上进行匹配。`^@^@GET /test/test.jpg"` 如果我尝试执行 perl 字符串正则表达式，它看不到 ^@^@ 的不可打印字符并且不会匹配。如果我尝试使用十六进制版本`\x5E`来匹配`^`那也是不行的。如何对二进制/pcap 文件进行正则表达式匹配以匹配不可打印的字符，例如`^@^@`？谢谢

所有人都感谢您提出的建议。但是，在尝试了建议的帖子后，我没有得到我试图捕获的数据。如果我可能让您感到困惑，请提前道歉，因为没有发布更多详细信息。我正在尝试从以下文本中捕获数据

^@^@GET /mac/_base_v1/modules/header-search/images/magnify.jpg 到 ^@^@GET /mac/_base_v1/images/icons/facebook.png HTTP/1.1^M

但是，使用建议的捕获会返回文本中的所有数据，而不是较大文本中的子字符串。希望这可以澄清我的目标，并再次感谢您的发布，并对任何不便表示歉意。

```
§~ìd<82>TÉ^V±N^KohÆ<9b>Ïò<9e>X¬L^GÏNr6þLÑ4^Gì^U<8d><91>~¡Ö^WçmJG~<9e>ÁCb<98>L^G^W³Doý¦·&aV<86>^Wt^[Gò^^Âwú"ÂÌ¹^LÔ5<94>j¦5ýw÷!^K<86>"^V3^FÞBlO=<8b>NLu><8f>/<86>Þö^@è«<8c>^X»<88>ð^?âß~IVl^[Ö^Ym<9d>utà÷Öíá×Î`%A'fMr+ôc^D%^R=Ûö^Nö<81>§^HØÜ<9a>nV2åÎ^Q"BÍÕ<8a>Îo©v^Tö·ý<96>äÏ¿^F½Ïâ^D^]ÏS½ã¥yÇ«tií^[<8d>^N"m    ®<98>^B¹^Uk½^SÑÛ0i5^Xn<8d>T5<95>jÅüGâP^Bÿë{~-Wyu^S<93>5Á!å<8b>þÑ^[±å<91><9b>ØÅWq^OÐYVBT^KâdðèÅ<8b>ãGH<83>RÂì­<8d>Á^_^TÊ<88>R    ò^Rb<82>ÿÃ6<85>Ý^U^W^_®áHì®3_´ µõX3^C?VÉÌï}ÌÏ0Ô<83>Z+<91>ÔúËÃ«à0ÁeS9ñØk^Y<88>QÒÚ97<83>¢l<88>^Cñ/         ^.BM^BD^F^G<ÐI<9c>^\^þ^M¼^]$²?£ªüó?Ý^Mã^[ôûðä¿^G^@Èð¶ú8ª^A^@$<9f>ÚOé'^A^@6^@^@^@6^@^@^@^@!^^L# àøG.±N^H^@E^@^@(C@@^@@^FëvÀ¨^@\@^D^K^Q5¾^@P<91>~@^ZÉÇsÐP^P~¿ß¼^@^@$<9f>ÚO:(^A^@¾^A^@^@¾^A^@^@^@!^^L# àøG.±N^H^@E^@^A°¯k@^@@^F}ÃÀ¨^@\@^D^K^Q5¾^@P<91>~@^ZÉÇsÐP^X<81>`UÊ^@^@GET /mac/_base_v1/modules/header-search/images/magnify.jpg HTTP/1.1^M
Host: www.microsoft.com^M
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0^M
Accept: image/png,image/*;q=0.8,*/*;q=0.5^M
Accept-Language: en-us,en;q=0.5^M
Accept-Encoding: gzip, deflate^M
Referer: http://www.microsoft.com/mac/remote-desktop-client^M
DNT: 1^M
Connection: keep-alive^M
^M
$<9f>ÚOW^R^C^@Q^D^@^@Q^D^@^@àøG.±N^@!^^L# ^H^@E^@^DC^?Ä@^@7^F³×@^D^K^QÀ¨^@\^@P5¾ÉÇsÐ<91>~A¢P^X^P^PJþ^@^@HTTP/1.1 200 OK^M
Cache-Control: max-age=900^M
Content-Type: image/jpeg^M
Last-Modified: Thu, 20 May 2010 22:26:01 GMT^M
Accept-Ranges: bytes^M
ETag: "80e2276d6bf8ca1:0"^M
Server: Microsoft-IIS/7.5^M
VTag: 438546932400000000^M
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"^M
X-Powered-By: ASP.NET^M
Date: Fri, 15 Jun 2012 02:34:11 GMT^M
Content-Length: 632^M
^M
ÿØÿà^@^PJFIF^@^A^B^@^@d^@d^@^@ÿì^@^QDucky^@^A^@^D^@^@^@K^@^@ÿî^@^NAdobe^@dÀ^@^@^@^AÿÛ^@<84>^@^C^B^B^B^B^B^C^B^B^C^E^C^C^C^E^E^D^C^C^D^E^F^E^E^E^E^E^F^H^F^G^G^G^G^F^H^H

        ^H^L^L^L^L^L^L^N^N^N^N^N^P^P^P^P^P^P^P^P^P^P^A^C^D^D^F^F^F^L^H^H^L^R^N^L^N^R^T^P^P^P^P^T^Q^P^P^P^P^P^Q^Q^P^P^P^P^P^P^Q^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^P^PÿÀ^@^Q^H^@^V^@^Y^C^A^Q^@^B^Q^A^C^Q^AÿÄ^@i^@^@^B^C^A^@^@^@^@^@^@^@^@^@^@^@^@^C^G^E^F^H     ^A^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^P^@^A^C^C^B^C^D^K^@^@^@^@^@^@^@^@^A^B^C^D^Q^E^F^@!^R^S^GA"b^T1<92>Ò<93>T<94>Ô^U^VV^W^Q^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ÿÚ^@^L^C^A^@^B^Q^C^Q^@?^@èrÿ^@<9a>Ø0¤åY^U¶^C^PâDnDÉ
<88>Ò<8d>8^G`A*Q&<80>^MÉÐ@Ús^<9e>Ì»[íwî<9f>ËÆSx_&Ï:ñk<80>ÜyN<90>T<96>ë^]×ÖÓ<8a> %(}-¨ö^M^EæF-<82>)<87>^Rí<8a>Þ´)$-
<86>Á^D^QB^H(Üh1/ñ¾<93>þ¯^GÜ<8d>^C<8f>'¹KÉúpÍ<86>^Kíµ1´Û&Ã/îÉ<91>n}<89>­!Á½P¥²^R¯       :
§Rº³<99>JÇbÝoX<84>¨¶ì~uºõuäK<83>2Kßm<96>Ü<94>¢^[lºTSÆ<84><97>^Vàl<86>Â»¦º^FE<8f>«¶<8c>³^^<8d><91>Xe<89>P'µÍ<8c>ð¨¨Ü^PA¡^D^PA^GpE4
^_9 <90><8b>"çå#ðÅr<9c>¦èB<9b>Üp^O^V<80><9e>béð®zÍûZ^A"TäÛ<99>T(j\PÊL4GS^\²ÈOp7E<84>R<9e><8d>é Vþ_<9e>~<89>7çí<9f>S ÿÙ$<9f>ÚOj^R^C^@6^@^@^@6^@^@^@^@!^^L# àøG.±N^H^@E^@^@(²U@^@@^F|aÀ¨^@\@^D^K^Q5¾^@P<91>~A¢ÉÇwëP^P^?RÙ<86>^@^@$<9f>ÚO±^R^C^@¯^A^@^@¯^A^@^@^@!^^L# àøG.±N^H^@E^@^A¡<8b>^K@^@@^F¢2À¨^@\@^D^K^Q5¾^@P<91>~A¢ÉÇwëP^X<81>`hè^@^@GET /mac/_base_v1/images/icons/facebook.png HTTP/1.1^M
Host: www.microsoft.com^M
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0^M
Accept: image/png,image/*;q=0.8,*/*;q=0.5^M
Accept-Language: en-us,en;q=0.5^M
Accept-Encoding: gzip, deflate^M
Referer: http://www.microsoft.com/mac/remote-desktop-client^M
DNT: 1^M
Connection: keep-alive^M
^M
$<9f>ÚO_$^E^@<91>^C^@^@<91>^C^@^@àøG.±N^@!^^L# ^H^@E^@^C<83>^@F@^@7^F4^V@^D^K^QÀ¨^@\^@P5¾ÉÇwë<91>~C^[P^X^OðCæ^@^@HTTP/1.1 200 OK^M
Cache-Control: max-age=900^M
Content-Type: image/png^M
Last-Modified: Mon, 24 May 2010 18:00:50 GMT^M
Accept-Ranges: bytes^M
ETag: "be4f6fb6bfbca1:0"^M
Server: Microsoft-IIS/7.5^M
VTag: 791763032400000000^M
P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"^M
X-Powered-By: ASP.NET^M
Date: Fri, 15 Jun 2012 02:34:11 GMT^M
Content-Length: 442^M
^M
<89>PNG^M
^Z
^@^@^@^MIHDR^@^@^@^M^@^@^@^M^H^F^@^@^@rëä|^@^@^@^YtEXtSoftware^@Adobe ImageReadyqÉe<^@^@^A\IDATxÚ<8c>R=KÃP^T=ï%ý^P'ÁEEìÔÁÅE¨^Hnnö^WtvvPp^S
.*(ØMéâ,^U^G]tvQ(:)8^HRÑbm<92>&i<9a>^O^S_^´xué]NÞ=÷Üó^N/¬PÚÞ]_.®bÀÚ©<9e>í±êéMÄRÃ<83>j^Pù6Ô<96>n<83>§^Y!<86>²
<8a><85>)äÆGäÙõ>Q©ÝÊïÐ³ ~h&X<86>n+-æû<82>¸2i^E-ÝJ<9c>\S8I^QuÊO<8e>J¼{|Eå¸N¸P<8a>Ú^FXöïõR^Rï<9f>Þ^Q/%<99>^\1?WÚ<8a>x6¹ÊþÚ^Rf§'þ<85>?<¹ÆÑùw¦^^[ªftÀ]E6ê^O/ð|^_ó39y~n^Zh¼ih4uÄsRätÀÆ^VVúN?Õ¸(K,^_\¢Z»¢<99>b'Û2À^CN^HÏó$^Z<96><83><98>'"<91>I<8d>ü^^BÞ%<84>i&á»¶%Þ<85>r¡<98>^W"Ñä*!t]<97>h<9b>^]ù^G<90>
^\¨aàl2®lüîk<9a><96><88>lSl¦¢HÌ^?       0^@^C=¢X>ä      Ó^@^@^@^@IEND®B`<82>$<9f>ÚO<96>$^E^@6^@^@^@6^@^@^@^@!^^L# àøG.±N^H^@E^@^@(Ü^G@^@@^FR¯À¨^@\@^D^K^Q5¾^@P<91>~C^[ÉÇ{FP^P^?²ÔR^@^@%<9f>ÚO;>^H^@¬^A^@^@¬^A^@^@^@!^^L# àøG.±N^H^@E^@^A<9e>òR@^@@^F:îÀ¨^@\@^D^K^Q5¾^@P<91>~C^[ÉÇ{FP^X<81>`^B¤^@^@ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T01:59:53.010

您可以将二进制字符串`^@^@GET /test/test.jpg`与模式匹配`/^\x{00}{2}GET /test/test.jpg$/`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T01:55:54.097

`@^@`不是 Perl 的不可打印字符。表示一个数组，此时`@`可能会出错。插入符`^`匹配字符串的开头。也会失败。

`\@`如果您想要一个可打印字符`@`或查找不可打印字符 (0x00) 的字节值并匹配 ( )，您是否考虑过转义`/\x00/`？

所以你要么想要正则表达式

```
m{\x{00}\x{00}GET /test/test.jpg} 
```

或者

```
m{\^\@\^\@GET /test/test.jpg} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T01:57:36.087

```
$s = 'This is a @^@GET /test/test.jpg test';
if ($s =~ m{(\@\^\@GET /test/test.jpg)}) {
    print $1;
} 
```

# c# - 从外部 VS 主机环境中检测 VS 的 IWorkspace 更改？

> ID：11732067
> 
> 赞同：0
> 
> 时间：2012-07-31T01:51:30.863
> 
> 标签：c#, visual-studio-2010, roslyn

使用 Roslyn 的工作区，有没有办法获得一个挂钩到 Visual Studio 提供的活动 IWorkspace？

我希望能够在 Visual Studio 中打开 ExampleProject，然后在我自己的应用程序中，我想通过 再次打开 ExampleProject `Roslyn.Services.Workspace`，但仅用于监视在 Visual Studio 中生成的文件/代码更改。我进行了一次充满希望的测试，只是将项目加载到工作区中，并希望它会以某种方式神奇地从磁盘中获取更改，但没有这样的运气。

剩下的唯一可能性是；

1.  直接从 Visual Studio 获取对当前加载的工作区的引用。我不知道 VS 是否甚至跨进程边界暴露了这一点，或者如何找出来。

2.  将我的整个项目重新设计为 Visual Studio 扩展，在那里我可以自动访问打开的工作区。我现在不想深入构建扩展。

这是我用来测试的一些代码：

```
public class ProjectDiskMonitor
{
    public ProjectDiskMonitor(string fullProjectPath)
    {
        WS = Workspace.LoadStandAloneProject(fullProjectPath, null, null, null, true) as Workspace;
        WS.WorkspaceChanged += new EventHandler<WorkspaceEventArgs>(TargetProjectChanged);
//this event is not being fired as I edit the project via another instance of VS

    }

    private void TargetProjectChanged(object sender, WorkspaceEventArgs e)
    {
        Console.WriteLine("Project changed");
    }

    private Workspace WS
    {
        get;
        set;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:02:07.410

如果您正在调用 Workspace.LoadSolution() 来获取工作空间，请将“true”传递给 LoadSolution 的 enableFileTracking 参数，它会自动侦听文件系统并获取更改。不要忘记 ISolution 实例是不可变的，因此要获得新状态，您必须访问 Workspace 上的 CurrentSolution 属性才能获得更新的状态。

目前没有以跨进程方式从 Visual Studio 获取 IWorkspace 的方法，或者至少在没有您构建自己的远程处理协议的情况下没有。

# c++ - 将 Hex 文件解析为具有不同标头数量的输出

> ID：11732069
> 
> 赞同：0
> 
> 时间：2012-07-31T01:51:49.557
> 
> 标签：c++, parsing, csv

我正在为十六进制文件编写一个解析器以对应于某些字段。现在在这我有不同的类型和不同的标题。我首先想到的一些解决方案是存储所有这些，然后根据标题显示。但是我想生成一个可以使用的模板，以便可以重复使用。

基本上我正在做的是解析一个巨大的十六进制文件，然后将其解码为十进制格式，然后根据将其放入相应列的值。

我面临的问题是我事先没有想到它并且已经完成了解析，但是现在输出格式需要只有一列包含所有标题。并且行应该有相应的数据。填充是一种解决方案，但它非常乏味。我认为任何 STL 解决方案都可以。

任何输入将不胜感激。

# javascript - 用于 javascript 的样式化警报系统

> ID：11732070
> 
> 赞同：-1
> 
> 时间：2012-07-31T01:51:50.333
> 
> 标签：javascript

我正在使用[smoke.js](http://ssssnakes.com/smoke/)，它允许设置经典警报javascript 窗口的样式。

您所要做的就是放置`.smoke`在警报之前，即。`smoke.confirm()`

我遇到的问题是 ok/cancel 回调，它对我不起作用。

这是网站显示的示例。

`您可以像使用 js alert() 一样实现这些...只需输入“smoke”。在它面前。

但是，confirm() 替换项的使用需要稍有不同：

```
smoke.confirm('You are about to destroy everything. Are you sure?',function(e){
    if (e){
        smoke.alert('OK pressed');
    }else{
        smoke.alert('CANCEL pressed');
    }
}); 
```

我的代码是；

```
$(".upb_del_bookmark").click( function() {
        if(smoke.confirm(delete_message)) {
            var post_id = $(this).attr('rel');
            var data = {
                action: 'del_bookmark',
                del_post_id: post_id
            };
            $.post(upb_vars.ajaxurl, data, function(response) {
                $('.bookmark-'+post_id).fadeOut();
                $('.upb_bookmark_control_'+post_id).toggle();
            }); 
```

它显示了样式按钮和所有内容，但是当我单击“确定”时，它没有执行上述功能，没有任何反应。

![确认](../Images/014fee894a32bba6b25b44e0099ead5b.png)

所以我把它改写为

```
$(".upb_del_bookmark").click( function() {
        if(smoke.confirm(delete_message, function(e))) {
            if(e){
            var post_id = $(this).attr('rel');
            var data = {
                action: 'del_bookmark',
                del_post_id: post_id
            };
            $.post(upb_vars.ajaxurl, data, function(response) {
                $('.bookmark-'+post_id).fadeOut();
                $('.upb_bookmark_control_'+post_id).toggle();
            });
        }} 
```

但是现在当我点击它甚至不显示任何东西

我不是程序员，求救！！！！！！

如果您想尝试，请使用 david:123321 登录 latinunit.org，然后转到帖子并尝试将其添加到您的收藏夹

**更新**

我尝试了以下操作，它显示了窗口，但没有执行该功能；

```
$(".upb_del_bookmark").click( function() {
        smoke.confirm(delete_message, function(e) {
            if(e){
            var post_id = $(this).attr('rel');
            var data = {
                action: 'del_bookmark',
                del_post_id: post_id
            };
            $.post(upb_vars.ajaxurl, data, function(response) {
                $('.bookmark-'+post_id).fadeOut();
                $('.upb_bookmark_control_'+post_id).toggle();
            });
        }})
        return false;
    }); 
```

这是烟雾脚本[链接的js文件](http://latinunit.org/smoke.js)

当我单击取消以下节目时；

> 未捕获的类型错误：对象# 的属性“回调”不是函数行：198 未捕获的类型错误：对象# 的属性“回调”不是函数行：208

以下是烟雾脚本的那些行中的内容；

```
finishbuildConfirm: function (e, f, box)
    {
        smoke.listen(
            document.getElementById('confirm-cancel-' + f.newid),
            "click", 
            function () 
            {
                smoke.destroy(f.type, f.newid);
                f.callback(false);
            }
        );

        smoke.listen(
            document.getElementById('confirm-ok-' + f.newid),
            "click", 
            function () 
            {
                smoke.destroy(f.type, f.newid);
                f.callback(true);
            }
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:02:06.267

内置的 javascript 警报/确认函数是同步的，但不是。您需要使用 javascript 回调模式处理确认的结果。您将一个函数传递给 Smoke.confirm() 函数，该函数在您需要响应某个操作时调用。

请参阅以下代码。Smoke.confirm() 周围的 if 已被删除，处理代码被包装在传递给 Smoke.confirm() 函数的函数中。

```
$(".upb_del_bookmark").click( function() {
    smoke.confirm(delete_message, function(e) {
        if(e){
            var post_id = $(this).attr('rel');
            var data = {
                action: 'del_bookmark',
                del_post_id: post_id
            };
            $.post(upb_vars.ajaxurl, data, function(response) {
                $('.bookmark-'+post_id).fadeOut();
                $('.upb_bookmark_control_'+post_id).toggle();
            });
        }
    });
} 
```

我强烈建议阅读一些关于 javascript 中的回调模式的信息。这很常见，理解它将帮助您使用此插件和许多其他插件。

# objective-c - va_arg 怎么会返回地址 0，然后是 1，然后是 2？

> ID：11732074
> 
> 赞同：0
> 
> 时间：2012-07-31T01:52:22.710
> 
> 标签：objective-c, ios, variadic-functions

我正在检索 va_args 但我不确定为什么它有时会返回 0、1、2 等等。当我尝试访问它时它会使我的程序崩溃，并且我无法断言它返回的内容。

有任何想法吗？

背景：我在 iOS 上编程。

```
void strngCls::Form(*wchar_t wCh, va_list argList)
{

    va_list argListTest = argList;
    const wchar_t *ws1 = va_arg(argListTest, const wchar_t *);
    const wchar_t *ws2 = va_arg(argListTest, const wchar_t *);

    if(ws1!=NULL && ws1!=(const wchar_t *)1 && ws2!=NULL)
    {
        int asd=wcslen(ws1);

        int asd2=wcslen(ws2);
        NSLog(@"ws1 = %d, ws2 = %d",asd,asd2);

        NSString *s1 = [[NSString alloc] initWithBytes:ws1 length:sizeof(wchar_t) *   wcslen(ws1) encoding: NSUTF32LittleEndianStringEncoding];
        NSLog(@"s1 %@",s1);
        NSString *s2 = [[NSString alloc] initWithBytes:ws2 length:sizeof(wchar_t) * wcslen(ws2) encoding: NSUTF32LittleEndianStringEncoding];
        NSLog(@"s2 %@",s2);

        NSString *iosString = [[NSString alloc] initWithFormat:@"%@ = %@", s1, s2];
        const char *ws3 = [iosString cStringUsingEncoding:NSUTF32LittleEndianStringEncoding];
        [s1 release];
        [s2 release];

        x = vswprintf(m_pchData, GetAllocLength(), (LPCTSTR)ws3, argListTest);

    }
    else if(ws1!=NULL && ws1!=(const wchar_t *)1)
    {
        int asd=wcslen(ws1);

        NSLog(@"ws1 = %d",asd);

        NSString *s1 = [[NSString alloc] initWithBytes:ws1 length:sizeof(wchar_t) * wcslen(ws1) encoding: NSUTF32LittleEndianStringEncoding];
        NSLog(@"s1 %@",s1);
        NSString *iosString = [[NSString alloc] initWithFormat:@"%@", s1];
        const char *ws3 = [iosString cStringUsingEncoding:NSUTF32LittleEndianStringEncoding];
        [s1 release];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:42:52.980

你错过了一个电话`va_start`：

```
void strngCls::Form(*wchar_t wCh, va_list argList)
{
    va_list argListTest = argList;
    va_start(argListTest, wCh);
    const wchar_t *ws1 = va_arg(argListTest, const wchar_t *);
    const wchar_t *ws2 = va_arg(argListTest, const wchar_t *); 
```

另外，`va_end`完成后打电话：

```
 va_end(argListTest);
} 
```

# php - 从数组中获取匹配键

> ID：11732075
> 
> 赞同：0
> 
> 时间：2012-07-31T01:52:55.397
> 
> 标签：php, arrays

我想获得数组中的特定键，但是它是增量计数器的后缀。

```
Array
(
  [nombre] => Carlos
  [apellido] => Delfino
  [sum1] => Array
            (
              [0] => Apple
              [1] => Banana
              [2] => Liquor
            )
  [sum3] => Array
            (
              [0] => Grapes
            )
) 
```

我打算将`sum`键（sum1 和 sum3）放在一个新数组上。A`foreach`在我的脑海中，但是我怀疑我应该为此使用正则表达式还是 PHP 字符串函数。

```
foreach($arr as $k => $v)
{
  //I'm lost here on how to match keys with at least `sum` word on it
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:54:51.820

这将检查它是否以 sum 开头。如果将有其他键与 sum 并在它们之后具有非整数值，则需要一个正则表达式。

```
foreach($arr as $k => $v)
{
  if (strpos($k, 'sum') === 0) {
     // key begins with 'sum'
  }
} 
```

正则表达式方式：

```
foreach($arr as $k => $v)
{
  if (preg_match('/^sum[0-9]+$/', $k)) {
     // key begins with 'sum' and is followed by an integer
  }
} 
```

# mysql - 如何使用基本内连接优化基本 MySQL 查询？

> ID：11732079
> 
> 赞同：0
> 
> 时间：2012-07-31T01:53:32.780
> 
> 标签：mysql, optimization, indexing

```
SELECT au.* 
FROM users au 
INNER JOIN friends fa  ON au.id = fa.to_user_id  
WHERE fa.from_user_id = 369 AND fa.persona_id IN('1241') 
GROUP BY au.id 
ORDER BY id DESC 
LIMIT 0, 9999999999; 
```

这里是解释

```
mysql> EXPLAIN SELECT au.* FROM users au INNER JOIN friends fa  ON au.id = fa.to_user_id  WHERE fa.from_user_id = 369 AND fa.persona_id IN('1241') GROUP BY au.id ORDER BY id DESC LIMIT 0, 9999999999;
+----+-------------+-------+-------------+------------------------------------------------------------+------------------------------------+---------+--------------------+------+---------------------------------------------------------------------------------------------------+
| id | select_type | table | type        | possible_keys                                              | key                                | key_len | ref                | rows | Extra                                                                                             |
+----+-------------+-------+-------------+------------------------------------------------------------+------------------------------------+---------+--------------------+------+---------------------------------------------------------------------------------------------------+
|  1 | SIMPLE      | fa    | index_merge | from_user_id,to_user_id,persona_id,from_user_id_persona_id | persona_id,from_user_id_persona_id | 4,8     | NULL               |   49 | Using intersect(persona_id,from_user_id_persona_id); Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | au    | eq_ref      | PRIMARY                                                    | PRIMARY                            | 4       | kjdb.fa.to_user_id |    1 |                                                                                                   |
+----+-------------+-------+-------------+------------------------------------------------------------+------------------------------------+---------+--------------------+------+---------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

我在这个表中只有 300,000 行，但它需要永远。（运行它大约需要 0.75 秒）

```
mysql> desc friends;
+-------------------+------------+------+-----+---------+----------------+
| Field             | Type       | Null | Key | Default | Extra          |
+-------------------+------------+------+-----+---------+----------------+
| id                | int(11)    | NO   | PRI | NULL    | auto_increment |
| from_user_id      | int(11)    | NO   | MUL | NULL    |                |
| to_user_id        | int(11)    | NO   | MUL | NULL    |                |
| persona_id        | int(11)    | NO   | MUL | NULL    |                |
| action_by_user_id | int(11)    | NO   | MUL | NULL    |                |
| is_disabled       | tinyint(1) | NO   |     | 0       |                |
| created_at        | datetime   | YES  |     | NULL    |                |
| updated_at        | datetime   | YES  |     | NULL    |                |
+-------------------+------------+------+-----+---------+----------------+
8 rows in set (0.01 sec)

> desc users;
+---------------------+--------------+------+-----+---------+----------------+
| Field               | Type         | Null | Key | Default | Extra          |
+---------------------+--------------+------+-----+---------+----------------+
| id                  | int(11)      | NO   | PRI | NULL    | auto_increment |
| username            | varchar(255) | NO   | UNI | NULL    |                |
| first_name          | varchar(255) | NO   | MUL | NULL    |                |
| last_name           | varchar(255) | YES  | MUL | NULL    |                |
| email               | varchar(255) | YES  | UNI | NULL    |                | 
```

这是我的索引：

```
mysql> show indexes from friends;
+-------------------+------------+-------------------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+
| Table             | Non_unique | Key_name                | Seq_in_index | Column_name       | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------------------+------------+-------------------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+
| friends |          0 | PRIMARY                 |            1 | id                | A         |      388926 |     NULL | NULL   |      | BTREE      |         |
| friends |          0 | from_user_id            |            1 | from_user_id      | A         |          17 |     NULL | NULL   |      | BTREE      |         |
| friends |          0 | from_user_id            |            2 | to_user_id        | A         |      388926 |     NULL | NULL   |      | BTREE      |         |
| friends |          0 | from_user_id            |            3 | persona_id        | A         |      388926 |     NULL | NULL   |      | BTREE      |         |
| friends |          1 | to_user_id              |            1 | to_user_id        | A         |       19446 |     NULL | NULL   |      | BTREE      |         |
| friends |          1 | persona_id              |            1 | persona_id        | A         |       32410 |     NULL | NULL   |      | BTREE      |         |
| friends |          1 | action_by_user_id       |            1 | action_by_user_id | A         |        9972 |     NULL | NULL   |      | BTREE      |         |
| friends |          1 | from_user_id_persona_id |            1 | from_user_id      | A         |        9486 |     NULL | NULL   |      | BTREE      |         |
| friends |          1 | from_user_id_persona_id |            2 | persona_id        | A         |       35356 |     NULL | NULL   |      | BTREE      |         |
+-------------------+------------+-------------------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:39:55.407

添加此索引：

```
ALTER TABLE friends ADD INDEX ix_from_persona_to (from_user_id,persona_id,to_user_id); 
```

看看是否有帮助。

如果没有，您可能需要添加`FORCE INDEX`：

```
SELECT 
    au.* 
FROM 
    users au 
INNER JOIN 
    friends fa ON au.id = fa.to_user_id  
FORCE INDEX
    (ix_from_persona_to)
WHERE
    fa.from_user_id = 369 AND
    fa.persona_id IN ('1241')
GROUP BY
    au.id 
ORDER BY
    id DESC
LIMIT
    0, 9999999999; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:52:36.447

group by 上的 order by 导致临时表 + filesort 正在扼杀你的表现。

尝试子选择？

```
SELECT au.* 
FROM users au 
WHERE au.id IN (
  SELECT DISTINCT fa.to_user_id 
  FRoM friends fa 
  WHERE fa.from_user_id = 369 AND fa.persona_id IN('1241') 
)
ORDER BY id DESC 
LIMIT 0, 9999999999; 
```

然后在 friends.from_user_id ， persona_id 上添加索引

# c# - WPF RichTextBox控件中获取word cursor的方式

> ID：11732081
> 
> 赞同：6
> 
> 时间：2012-07-31T01:53:50.383
> 
> 标签：c#, wpf, selection, richtextbox, text-cursor

我想知道如何在 WPF 中获取当前光标所在的单词`RichTextBox`。我知道`RichTextBox`有选择属性。但是，这只给了我在`RichTextBox`. 相反，即使没有突出显示整个单词，我也想知道光标所在的单词。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-01T13:46:08.533

将此函数附加到任意 RichTextBox，现在称为 testRTB，并查看输出窗口以获取结果：

```
private void testRTB_MouseUp(object sender, MouseButtonEventArgs e)
{
        TextPointer start = testRTB.CaretPosition;  // this is the variable we will advance to the left until a non-letter character is found
        TextPointer end = testRTB.CaretPosition;    // this is the variable we will advance to the right until a non-letter character is found

        String stringBeforeCaret = start.GetTextInRun(LogicalDirection.Backward);   // extract the text in the current run from the caret to the left
        String stringAfterCaret = start.GetTextInRun(LogicalDirection.Forward);     // extract the text in the current run from the caret to the left

        Int32 countToMoveLeft = 0;  // we record how many positions we move to the left until a non-letter character is found
        Int32 countToMoveRight = 0; // we record how many positions we move to the right until a non-letter character is found

        for (Int32 i = stringBeforeCaret.Length - 1; i >= 0; --i)
        {
            // if the character at the location CaretPosition-LeftOffset is a letter, we move more to the left
            if (Char.IsLetter(stringBeforeCaret[i]))
                ++countToMoveLeft;
            else break; // otherwise we have found the beginning of the word
        }

        for (Int32 i = 0; i < stringAfterCaret.Length; ++i)
        {
            // if the character at the location CaretPosition+RightOffset is a letter, we move more to the right
            if (Char.IsLetter(stringAfterCaret[i]))
                ++countToMoveRight;
            else break; // otherwise we have found the end of the word
        }

        start = start.GetPositionAtOffset(-countToMoveLeft);    // modify the start pointer by the offset we have calculated
        end = end.GetPositionAtOffset(countToMoveRight);        // modify the end pointer by the offset we have calculated

        // extract the text between those two pointers
        TextRange r = new TextRange(start, end);
        String text = r.Text;

        // check the result
        System.Diagnostics.Debug.WriteLine("[" + text + "]");
} 
```

将 Char.IsLetter(...) 更改为 Char.IsLetterOrDigit(...) 或其他任何适当的值，具体取决于您是否也希望保留数字。

提示：将其提取到单独程序集中的扩展方法中，以便在需要时访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T01:18:04.637

好的，所以为了解决这个问题，我蛮力强迫它。

我使用 `curCaret.GetTextInRun(LogicalDirection.Backward)` 和 `curCaret.GetTextInRun(LogicalDirection.Forward)`

以及其他分隔词并获得子字符串的分隔符`preCaretString.LastIndexOf(" ")`。 最终我添加了字符串的前半部分和字符串的后半部分以获得当前光标所在的单词。 我敢打赌有更聪明的方法可以做到这一点，但至少这解决了问题`postCaretString.IndexOf(" ")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T02:05:42.770

您可以通过 获取光标的当前位置[`CaretPosition`](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.caretposition.aspx)。

不幸的是，没有简单的方法可以让字符位于插入符号位置的左/右。我知道从 RichTextBox 中获取文本的唯一方法是在[这个答案](https://stackoverflow.com/questions/957441/richtextbox-wpf-does-not-have-string-property-text)中，这有点令人费解。但它会完成必要的事情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-29T08:37:50.950

这是我使用 LINQ 和依赖属性的替代解决方案：

```
public class SelectionRichTextBox : RichTextBox
{
    public SelectionRichTextBox()
    {
        // Use base class style
        SetResourceReference(StyleProperty, typeof(RichTextBox));
    }

    public static readonly DependencyProperty SelectedWordProperty =
        DependencyProperty.Register(
                "SelectedWord",
                typeof(string),
                typeof(SelectionRichTextBox),
                new PropertyMetadata("")
                );

    public string SelectedWord
    {
        get
        {
            return (string)GetValue(SelectedWordProperty);
        }
        set
        {
            SetValue(SelectedWordProperty, value);
        }
    }

    protected override void OnMouseUp(MouseButtonEventArgs e)
    {
        TextPointer cursorPosition = CaretPosition;

        string strBeforeCursor = cursorPosition.GetTextInRun(LogicalDirection.Backward);
        string strAfterCursor = cursorPosition.GetTextInRun(LogicalDirection.Forward);

        string wordBeforeCursor = strBeforeCursor.Split().Last();
        string wordAfterCursor = strAfterCursor.Split().First();

        string text = wordBeforeCursor + wordAfterCursor;

        SelectedWord = string.Join("", text
            .Where(c => char.IsLetter(c))
            .ToArray());

        base.OnMouseUp(e);
    }
} 
```

之后，您可以像这样在绑定中使用它：

```
 <custom:SelectionRichTextBox
            SelectedWord="{Binding SelectedWord, Mode=OneWayToSource}"/> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-22T20:33:08.807

由于单词被空格分隔，因此您可以遍历插入符号周围的运行，直到找到空格。即使您`RichTextBox`甚至包含不同的字体和字体大小，此功能也应该起作用。

```
 public string GetWordByCaret(LogicalDirection direction)
    {
        // Get the CaretPosition
        TextPointer position = this.CaretPosition;
        TextPointerContext context = position.GetPointerContext(direction);

        string text = string.Empty;

        // Iterate through the RichTextBox based on the Start, Text and End of nearby inlines
        while (context != TextPointerContext.None)
        {
            // We are only interested in the text here
            //, so ignore everything that is not text
            if (context == TextPointerContext.Text)
            {
                string current = position.GetTextInRun(direction);

                // The strings appended based on whether they are before the caret or after it...
                // And well...I love switches :)
                switch (direction)
                {
                    case LogicalDirection.Backward:
                        {
                            int spaceIndex = current.LastIndexOf(' ');

                            // If space is found, we've reached the end
                            if (spaceIndex >= 0)
                            {
                                int length = current.Length - 1;

                                if (spaceIndex + 1 <= length)
                                {
                                    text = current.Substring(spaceIndex + 1, length - spaceIndex) + text;
                                }

                                return text;
                            }

                            else
                                text = current + text;
                        }
                        break;

                    default:
                        {
                            int spaceIndex = current.IndexOf(' ');

                            // If space is found, we've reached the end
                            if (spaceIndex >= 0)
                            {
                                int length = current.Length;

                                if (spaceIndex <= length)
                                {
                                    text += current.Substring(0, spaceIndex);
                                }

                                return text;
                            }

                            else
                                text += current;
                        }
                        break;
                }
            }

            // Move to the next position
            position = position.GetNextContextPosition(direction);

            // Get the next context
            if (position != null)
                context = position.GetPointerContext(direction);
            else
                context = TextPointerContext.None;
        }
        return text;
    } 
```

现在你可以像这样得到你插入符号所在的词。

```
 string before = GetWordByCaret(LogicalDirection.Backward);
    string after = GetWordByCaret(LogicalDirection.Forward); 
    string word = before + after; // :) 
```

# node.js - 共享 Node App 和 Connect 的端口

> ID：11732083
> 
> 赞同：0
> 
> 时间：2012-07-31T01:53:54.887
> 
> 标签：node.js

有什么方法可以让 Connect 在与您的节点应用程序相同的端口上运行，以便您可以使用相对或绝对路径提供资产？

现在我让它们在不同的端口上运行，这很痛苦：

```
var app     = require('http').createServer(handler).listen(81), 
    connect = require('connect');

connect.createServer(
    connect.static(__dirname + '/assets')
).listen(82); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:52:15.113

让 connect 为您创建服务器：

```
var connect=require('connect'),
  app=connect.createServer(handler,
    connect.static(__dirname+"/assets"))
    .listen(81); 
```

唯一的不同是`handler`现在需要第三个参数，如果它不想处理请求本身而是想将其传递给静态处理程序（或通过连接实现的任何其他内容）`next`，则应该调用该函数。`handler`

# regex - mod_rewrite 到 nginx 重写规则

> ID：11732085
> 
> 赞同：4
> 
> 时间：2012-07-31T01:54:12.427
> 
> 标签：regex, mod-rewrite, nginx, rewrite

我已将大部分 Apache HTTPd mod_rewrite 规则转换为 nginx 的 HttpRewrite 模块（在每个动态请求上通过 FastCGI 调用 PHP-FPM）。由硬位置定义的简单规则可以正常工作：

```
location = /favicon.ico { rewrite ^(.*)$ /_core/frontend.php?type=ico&file=include__favicon last; } 
```

我仍然在使用正则表达式时遇到问题，它们在 mod_rewrite 中像这样解析（请注意，我接受规则中的斜杠，以及将查询字符串附加到每个请求）：

### mod_rewrite

```
# File handler
RewriteRule ^([a-z0-9-_,+=]+)\.([a-z]+)$ _core/frontend.php?type=$2&file=$1 [QSA,L]

# Page handler
RewriteRule ^([a-z0-9-_,+=]+)$   _core/frontend.php?route=$1 [QSA,L]
RewriteRule ^([a-z0-9-_,+=]+)\/$ _core/frontend.php?route=$1 [QSA,L]

RewriteRule ^([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)$   _core/frontend.php?route=$1/$2 [QSA,L]
RewriteRule ^([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)\/$ _core/frontend.php?route=$1/$2 [QSA,L]

RewriteRule ^([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)$   _core/frontend.php?route=$1/$2/$3 [QSA,L]
RewriteRule ^([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)\/$ _core/frontend.php?route=$1/$2/$3 [QSA,L] 
```

我为该站点提出了以下服务器配置，但在解析请求后遇到了不匹配的规则（例如；`GET /user/auth`）：

### 尝试 nginx 重写

```
location / {
    # File handler
    rewrite ^([a-z0-9-_,+=]+)\.([a-z]+)?(.*)$                                /_core/frontend.php?type=$2&file=$1&$3 break;

    # Page handler
    rewrite ^([a-z0-9-_,+=]+)(\/*)?(.*)$                                     /_core/frontend.php?route=$1&$2        break;
    rewrite ^([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)(\/*)?(.*)$                   /_core/frontend.php?route=$1/$2&$3     break;
    rewrite ^([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)\/([a-z0-9-_,+=]+)(\/*)?(.*)$ /_core/frontend.php?route=$1/$2/$3&$4  break;
} 
```

**对于处理我的文件处理程序（只是`filename.ext`）和我的页面处理程序（这是一个独特的路由请求，最多有 3 个由正斜杠定义的属性），您有什么建议？**

由于我还没有得到回复，我也不确定这是否会覆盖我用 定义的 PHP 解析器`location ~ \.php {}`，它包含在这些重写规则之前。

如果我可以解决解析问题而无需为每个数量的路由属性使用新规则，则可以加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:57:26.877

我最终写了以下规则：

**文件处理程序**

```
location ~ ^/([a-zA-Z0-9-_]*)\.([a-zA-Z0-9]*)$ { include /web/_config/php.conf; rewrite ^/([a-zA-Z0-9-_]*)\.([a-zA-Z0-9]*)$ /_core/frontend.php?type=$2&file=$1 last; } 
```

文件处理程序获取名称和扩展名并将其写入 type={ext}&file={name}。

**页面处理程序**

```
location ~ ^/([a-z0-9-_]*)$ { include /web/_config/php.conf; rewrite ^/([a-z0-9-_]*)$ /_core/frontend.php?route=$1 last; }
location ~ ^/([a-z0-9-_]*)/?([a-z0-9-_]*)$ { include /web/_config/php.conf; rewrite ^/([a-z0-9-_]*)/?([a-z0-9-_]*)$ /_core/frontend.php?route=$1/$2 last; }
location ~ ^/([a-z0-9-_]*)/?([a-z0-9-_]*)/?([a-z0-9-_]*)$ { include /web/_config/php.conf; rewrite ^/([a-z0-9-_]*)/?([a-z0-9-_]*)/?([a-z0-9-_]*)$ /_core/frontend.php?route=$1/$2/$3 last; } 
```

页面处理程序（在这种情况下最多处理 3 个“目录”）抓取每个分隔符（/）之间的字符串，执行正则表达式验证并将其写入查询字符串。

这和我原来的配置之间的主要区别是每个条目都有自己的位置处理程序，`last`它在第一次匹配时处理它的规则，所以性能应该稍微好一些。

我还发现 nginx 默认附加查询字符串，因此不需要正则表达式，这是另一个性能改进。

请注意，这`/web/_config/php.conf`只是一个 FastCGI 直通配置，nginx 附带的配置（通常`/etc/nginx/fastcgi.conf`）应该可以正常工作。请注意，如果您专门处理 PHP，则不需要在每个规则中定义它，只需在它们前面加上 include。

希望这可以帮助。

# css - 元素之间的奇数间距

> ID：11732087
> 
> 赞同：0
> 
> 时间：2012-07-31T01:54:25.043
> 
> 标签：css, margin, padding

我有一个包含三个部分的登录页面——一个最新的博客部分、一个关于部分和一个 Tweeter 提要。这些元素的样式和格式都相同，但是最近的博客部分有些地方不太对劲。具体来说，在 , 下有一个更大的空间`<h2><a href="http://growingedgecoaching.com/blog">Growing Edge Blog</a></h2>`，并且`<a href="http://growingedgecoaching.com/home"><span style="color:#b8bf33">Continue Reading</span></a></p>`比它应该的更向下和更大。

有任何想法吗？

[现场直播。](http://growingedgecoaching.com/)

这是相关代码：

```
<div id="landing-brief">
        <ul>
            <li>
                <h2><a href="http://growingedgecoaching.com/blog">Growing Edge Blog</a></h2>
                <p>
                    <?php
                    // Get the most recent post
                    $the_query = new WP_Query( 'posts_per_page=1' );

                    // Pull the excerpt
                    while ( $the_query->have_posts() ) : $the_query->the_post();
                        the_excerpt();
                    endwhile;

                    // Reset Post Data
                    wp_reset_postdata(); 
                    ?>
                <br /><br /><a href="http://growingedgecoaching.com/home"><span style="color:#b8bf33">Continue Reading</span></a></p>
            </li>
            <li>
                <h2><a href="index.php?page_id=27">Meet Mary Anne</a></h2>
                <p>Mary Anne is the founder of Growing Edge Coaching™, a coaching and consulting company, where she helps individuals and companies develop powerful strategies to move forward in their life, their work, or their business. Her coaching is founded on her 20 years of experience as a manager and senior leader in non-profits. <br /><br /><a href="index.php?page_id=27"><span style="color:#b8bf33">More About Mary Anne</span></a></p>
            </li>
            <li>
                <h2><a href="#">Recent Tweets</a></h2>
                <div id="twitter-feed">
                    <?php
                        include_once(ABSPATH . WPINC . '/feed.php');
                        $rss = fetch_feed('https://api.twitter.com/1/statuses/user_timeline.rss?screen_name=Growing_Edge');
                        $maxitems = $rss->get_item_quantity(3);
                        $rss_items = $rss->get_items(0, $maxitems);
                        ?>

                        <ul>
                        <?php if ($maxitems == 0) echo '<li>No items.</li>';
                        else
                        // Loop through each feed item and display each item as a hyperlink.
                        foreach ( $rss_items as $item ) : ?>
                        <li>
                        <?php echo str_replace('Growing_Edge: ', '', $item->get_title()); ?>
                        </li>
                        <?php endforeach; ?>
                        </ul>
                    </div><!-- end twitter-feed -->
                <br /><br /><a href="https://twitter.com/growing_edge"><p><span style="color:#b8bf33">Follow @Growing_Edge</span></p></a>
            </li>
        </ul>
    </div><!-- end brief -->

#landing-brief {
    width: 860px;
    margin: 0 auto;
    padding-bottom: 20px;
    padding-top: 40px;
}

#landing-brief ul li {
    display: inline-block;
    padding-right: 20px;
    vertical-align: top;
    width: 250px;
}

#landing-brief ul li:last-child {
    padding-right: none;
}

#landing-brief ul li p span {
    color: #b8bf33;
}

#landing-brief #twitter-feed {
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-size: 75%;
    line-height: 1.5;
    color: #333333;
    margin-left: -28px;
}

#landing-brief #twitter-feed ul li {
    padding-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:03:19.917

```
<h2><a href="http://growingedgecoaching.com/blog">Growing Edge Blog</a></h2>
<p>
 <p>“Embrace the messy imperfect genius. Seek to be misunderstood by creative minds.” ~Ross Martin One thing I have learned over the years as an entrepreneur is that when I am in my most creative space, I have to release being a perfectionist and jump into my creative messiness. I need to create space that allows [...]</p>
 <br /><br />
 <a href="http://growingedgecoaching.com/home"><span style="color:#b8bf33">Continue Reading</span></a>
</p> 
```

应该是这样的：

```
<h2><a href="http://growingedgecoaching.com/blog">Growing Edge Blog</a></h2>
<p>
  “Embrace the messy imperfect genius. Seek to be misunderstood by creative minds.” ~Ross Martin One thing I have learned over the years as an entrepreneur is that when I am in my most creative space, I have to release being a perfectionist and jump into my creative messiness. I need to create space that allows [...]
 <br /><br />
 <a href="http://growingedgecoaching.com/home"><span style="color:#b8bf33">Continue Reading</span></a>
</p> 
```

我建议你使用 Chrome Developer 工具栏之类的检查工具来检查页面，它提供了大量信息，帮助你找出问题所在。

# jquery - jQuery准备在Rails 3中不起作用

> ID：11732089
> 
> 赞同：0
> 
> 时间：2012-07-31T01:54:26.727
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, coffeescript

## 语境

我有一个正在开发的 Rails 3 应用程序并安装了“jquery-rails”gem，并且

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

在我的 app/assets/javascripts/application.js 文件中。

如果警报和咖啡脚本是基本级别的项目，则它们可以正常工作。

我已将它们直接放入 app/assets/javascripts/application.js、app/assets/javascripts/pages.js*并*尝试将其作为 app/assets/javascripts/pages.js.coffee 中的咖啡脚本版本（只是更改了文件姓名）

一旦我把它们放在类似的东西中：

```
$(document).ready(function(){
alert('works');
}); 
```

或（对于咖啡脚本）

```
jQuery ->
  alert "hi" 
```

**它根本不会着火。**

我也尝试在应用程序布局中包含 jquery 文件，但同样的问题。

## 问题

在 rails 中声明 jQuery 函数有不同的语法吗？有谁知道可能出了什么问题？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:02:42.163

你拼错了函数：

```
// $(document).ready(funtion(){
$(document).ready(function(){
    alert('works');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:32:43.953

正如 Speransky 提到的，我需要检查控制台日志，因为我手动添加了 Foundation 3 框架，所以它正在调用modernizr。它无法获得modernizr，因此以某种方式扼杀了我的jQuery能力。

我将modernizr.js 下载到app/assets/javascripts，然后将其添加到树之前：

```
//= require jquery
//= require jquery_ujs
//= require modernizr
//= require_tree . 
```

做到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T18:28:47.473

另一个常见错误：将 .coffee 更改为 .js 并忘记删除顶部评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T02:05:07.030

我认为咖啡脚本不起作用，因为它应该在具有适当扩展名的文件中。

# asp.net - 为什么 page_load 在 aspx.cs 中很重要？

> ID：11732092
> 
> 赞同：0
> 
> 时间：2012-07-31T01:54:39.083
> 
> 标签：asp.net

有人可以向我解释页面加载的纯粹目的吗？我的代码现在在我的 aspx.cs（代码隐藏）文件中运行得很好。我在这里做非常基本的事情，所以我猜它在某个地方很重要，所以我只是想知道那会是什么。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:09:23.447

您应该检查页面生命周期。负载是此循环中的一个事件。

关于方法，`Page_load()`是服务器端应用程序上的方法，用于`.aspx`文件。此方法内的所有代码在页面开头执行一次。此外，在加载中，如果当前请求是回发，则加载控件属性，其中包含从视图状态和控件状态恢复的信息。（与设置默认值时的初始化不同）因此，在 中`Load Event`，Page 对象调用 上的`OnLoad`方法`Page object`，然后递归地对每个子控件执行相同的操作，直到加载页面和所有控件。单个控件的 Load 事件发生在页面的 Load 事件之后。

一些链接给你：

[ASP .NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

[Page_Load 和回发](http://www.w3schools.com/aspnet/aspnet_events.asp)

谷歌还有更多

# json - MVC Web Api返回的JsonValue在客户端为空

> ID：11732097
> 
> 赞同：2
> 
> 时间：2012-07-31T01:55:04.747
> 
> 标签：json, model-view-controller, asp.net-web-api

我将 MVC Web Api 用于 RESTful 目的。我的控制器方法以字符串格式返回序列化的 Json 对象。我有一些像这样的简单方法：

```
public string Put(Folder folder)
{
   var folder1 = new Folder{Id="1", IsShared=true,Name= folder.Name};
   var jsSerializer = new JavaScriptSerializer();
   return jsSerializer.Serialize(folder1);
} 
```

我像这样在 QUnit 测试中调用 Get、Put、Delete 和 Post 方法，它工作正常：

```
ajax: {
        getData: function (url, data) {
            return processRequest(url, data, "GET");
        },

        postData: function (url, data) {
            return processRequest(url, JSON.stringify(data),"POST");
        },

        updateData: function (url, data) {
            return processRequest(url, JSON.stringify(data),"UPDATE");
        },

        deleteData: function (url, data) {
            return processRequest(url, JSON.stringify(data),"DELETE");
        },

        processRequest: function (url, data, type) {
            return $.ajax({
                type: type,
                dataType: "json",
                contentType: "application/json;charset=utf-8",
                url: url,
                data: data,
                processData: true
            });
        }
    }, 
```

我需要将返回值从字符串更改为实际的 Json 对象，因为我的客户不再需要序列化 ​​Json。他们需要实际的 Json 对象。所以我将方法返回类型更改为 JsonValue 并使用 JsonValue.Parse() 方法解析序列化的 Json 对象。当我在服务器端跟踪我的代码时，JsonValue 对象在其属性中具有正确的值并且看起来不错，但在客户端返回的 JsonValue 具有空属性。这里是改变方法：

```
public JsonValue Put(Folder folder)
{
   var folder1 = new Folder{Id="1", IsShared=true,Name= folder.Name};
   var jsSerializer = new JavaScriptSerializer();
   return JsonValue.Parse(jsSerializer.Serialize(folder1));
} 
```

这是测试结果：

```
Expected:   
{
  "Id": "1",
  "IsShared": true,
  "Name": "abc"
}

Actual:
{
  "Id": [],
  "IsShared": [],
  "Name": []
} 
```

我很感激任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:55:18.690

我所做的修复是将 Newtonsoft.Json.dll 添加到我的项目中并使用 Newtonsoft.Json.Linq.JToken 而不是使用 System.Json.JsonValue。这是我的方法实现：

```
 public Newtonsoft.Json.Linq.JToken Put(Folder folder)
  {
     var folder1 = new Folder{Id="1", IsShared=true,Name = folder.Name};
     var jsSerializer = new JavaScriptSerializer();
     return Newtonsoft.Json.Linq.JObject.Parse(jsSerializer.Serialize(folder1));
  } 
```

如果你有一个 JSON 数组，你需要像这样解析：

```
public Newtonsoft.Json.Linq.JToken Put(IList<Folder> folders)
      {
         var folder1 = new Folder{Id="1", IsShared=true,Name = folder.Name};
         var jsSerializer = new JavaScriptSerializer();
         return Newtonsoft.Json.Linq.JArray.Parse(jsSerializer.Serialize(folders));
      } 
```

# entity-framework-4 - 如何使用 SQL Compact 4 首先使用 Entity Framework 4 代码在 ID 列上设置标识种子？

> ID：11732102
> 
> 赞同：2
> 
> 时间：2012-07-31T01:56:11.720
> 
> 标签：entity-framework-4, ef-code-first, sql-server-ce, identity-column

我在使用代码优先方法在 SQL Compact 4 中的 Id 列上设置身份种子时遇到了一些问题。

我试过这个

```
context.Database.ExecuteSqlCommand("DBCC CHECKIDENT ('Members', RESEED, 100001"); 
```

但这在 Sql Compact 中不起作用。

我的数据库上下文：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        SetupMemberEntity(modelBuilder);

    }

    private static void SetupMemberEntity(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Member>().Property(m => m.Id);
            //.Property(m => m.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        modelBuilder.Entity<Member>().Property(m => m.FirstName).IsRequired();
        modelBuilder.Entity<Member>().Property(m => m.LastName).IsRequired();
        modelBuilder.Entity<Member>().Property(m => m.PinCode).IsRequired();
        modelBuilder.Entity<Member>().Property(m => m.Email);
        //modelBuilder.Entity<Member>().Property(m => m.DateCreated).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed);
        //modelBuilder.Entity<Member>().Property(m => m.DateModified).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

    } 
```

我已向 Member 实体添加了另一个属性 MemberId 并尝试使用

```
 context.Database.ExecuteSqlCommand("ALTER TABLE Members ADD MemberId INT IDENTITY(10000,1) PRIMARY KEY"); 
```

但是我收到一个表只能包含一个身份的错误消息，但我没有设置任何 IDENTITY 所以，Id 列是自动 IDENTITY 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:18:14.557

[我在这里](https://stackoverflow.com/questions/6284485/sql-ce-4-how-can-i-run-dbcc-checkident)找到了答案：

```
context.Database
    .ExecuteSqlCommand("ALTER TABLE Members ALTER COLUMN Id IDENTITY (10000,1)"); 
```

# php - 使用 PHP 函数最小化重复代码

> ID：11732105
> 
> 赞同：2
> 
> 时间：2012-07-31T01:57:15.790
> 
> 标签：php, joomla

我想使用函数最小化重复的 php 代码，我是一名设计师，现在我正在尝试学习 PHP。下面的代码检查模块块是否处于活动状态，并计数块，

```
$TopCol1 = (int)($this->countModules('top-col-1') > 0);
$TopCol2 = (int)($this->countModules('top-col-2') > 0);
$TopCol3 = (int)($this->countModules('top-col-3') > 0);

$topColCount = $TopCol1 + $TopCol2 + $TopCol3;
if ($topColCount) : $TopColClass = 'count-' . $topColCount; 
endif; 
```

然后将处理以下代码

```
 <?php if ($topColCount) : ?>
    <div class="row">
        <?php if ($this->countModules('top-col-1')) : ?>    
        <div id="top-col" class="<?php echo $TopColClass ?> columns">
            <div class="panel">
                <jdoc:include type="modules" name="top-col-1" style="html5" />
            </div>
        </div>
        <?php endif ?>
        <?php if ($this->countModules('top-col-2')) : ?>    
        <div id="top-col" class="<?php echo $TopColClass ?> columns">
            <div class="panel">
                <jdoc:include type="modules" name="top-col-2" style="html5" />
            </div>
        </div>
        <?php endif ?>
        <?php if ($this->countModules('top-col-3')) : ?>    
        <div id="top-col" class="<?php echo $TopColClass ?> columns">
            <div class="panel">
                <jdoc:include type="modules" name="top-col-3" style="html5" />
            </div>
        </div>
        <?php endif ?>
    </div>
<?php endif ?> 
```

我需要在我的模板中多次重复这种类型的代码，请帮我制作一个函数来创建块，而无需一次又一次地重复这些代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:51:43.727

虽然我不推荐这种语法，但您可以将原始 HTML 代码内嵌在 php 函数中。

```
<?php
function code_block( $jdoc_name ) {
global $TopColClass;  //// for variables created outside the function to be visible inside it, we have to include them with "global"
?>
<div id="top-col" class="<?php echo $TopColClass; ?> columns">
        <div class="panel">
            <jdoc:include type="modules" name="<?php echo $jdoc_name; ?>" style="html5" />
        </div>
    </div>
<?php
}

$MODULES = array(
  'top-col-1',
  'top-col-2',
  'top-col-3',
);

//// ....

//// in the page body a foreach loop would also be a good idea:
foreach( (array)$MODULES as $module_name ) {
    if ($this->countModules( $module_name )) {
        code_block( $module_name );
    }
}

?> 
```

* * *

编辑，按要求解决：

```
<?php
function code_block( $jdoc_name ) {
global $TopColClass;  //// for variables created outside the function to be visible inside it, we have to include them with "global"
?>
<div id="top-col" class="<?php echo $TopColClass; ?> columns">
        <div class="panel">
            <jdoc:include type="modules" name="<?php echo $jdoc_name; ?>" style="html5" />
        </div>
    </div>
<?php
}

function module( $prefix, $comma_seperated_suffixes ) {
    foreach( (array)explode( ",", $comma_seperated_suffixes ) as $suffix ) {
        $module_name = $prefix.trim($suffix);
        code_block( $module_name );
    }
}

//// shorter call, as requested :)
module("top-col-", "1,2,3");

?> 
```

* * *

最终编辑，转化为一个类

```
<?php
class tovolt{
    function tovolt() {
        //// constructor function - used to setup default variable states, etc. - if this is omitted PHP may have a fit ( depending on version and config )
    }

    public static $TopColClass = 'default-value';

    function code_block( $jdoc_name ) {
?>
<div id="top-col" class="<?php echo self::$TopColClass; ?> columns">
        <div class="panel">
            <jdoc:include type="modules" name="<?php echo $jdoc_name; ?>" style="html5" />
        </div>
    </div>
<?php
    }

    function module( $prefix, $comma_seperated_suffixes ) {
        foreach( (array)explode( ",", $comma_seperated_suffixes ) as $suffix ) {
            $module_name = $prefix.trim($suffix);
            self::code_block( $module_name );
        }
    }
}

//// calling the class
tovolt::$TopColClass = 'new-value';                //// if you need to change: $TopColClass
tovolt::module("top-col-", "1,2,3");

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:11:25.260

将它们全部放在一个[数组](http://us2.php.net/manual/en/function.array.php)中，然后使用[foreach 循环](http://us2.php.net/manual/en/control-structures.foreach.php)。有时可能只需要一个[for 循环](http://us2.php.net/manual/en/control-structures.for.php)。

# actionscript-3 - Salesforce REST API 和 DELETE 方法

> ID：11732110
> 
> 赞同：3
> 
> 时间：2012-07-31T01:57:54.737
> 
> 标签：actionscript-3, rest, salesforce

我正在使用 Adob​​e AIR 并通过 REST API 与 force.com 平台集成，到目前为止，它的进展相对顺利，但我在使用该`DELETE`方法时遇到了困难。

[文档](http://www.salesforce.com/us/developer/docs/api_rest/index.htm)很简单：

> **删除客户记录**
> 
> 使用 DELETE 方法删除一条记录。在此示例中，删除了客户记录。
> 
> **删除 Account 对象中的字段的示例用法**
> 
> curl [https://instancename.salesforce.com/services/data/v20.0/sobjects/Account/001D000000INjVe](https://instancename.salesforce.com/services/data/v20.0/sobjects/Account/001D000000INjVe) -H“授权：承载**令牌**”-H“X-PrettyPrint：1”-X DELETE
> 
> **删除客户记录的示例请求正文**
> 
> 不需要
> 
> **用于删除客户记录的示例响应正文**
> 
> 没有返回

我的代码如下，注意第二个参数`HTTPConnection.send()`是调用的方法。

```
var headers:Object = new Object();
headers["Authorization"] = "Bearer "+ConnectionAccessToken;
var url:String = ConnectionInstanceURL + "/services/data/v"+_apiVersionNumber+"/sobjects/"+type+"/"+id;

var response:RESTResponse = new RESTResponse(callback);
var httpCallback:IResponder = new mx.rpc.Responder(response.resultHandler,response.faultHandler);

HTTPConnection.send(headers,"DELETE",url,httpCallback); 
```

类似的代码非常适合其他操作，奇怪的是这本身并没有失败，而是收到了成功的响应，但是将有问题的记录连同它的所有字段一起返回。看来我看到了 的结果`[select * from Object where Id = <id>`，只是为了澄清记录*没有被删除*。该对象没有任何主细节关系，所以我不确定还有什么可能阻止这种删除发生 - 有没有人遇到过这种情况或有关于如何解决它的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:08:10.233

通过我正在使用的设置（其中 HTTPConnection 是在内部使用 HTTPService 的自定义类），Adobe 文档指出可供我使用的唯一 HTTP 方法只是 GET 和 POST：

> "可选地，您可以将参数传递给指定的 URL。当您不通过基于服务器的代理服务时，您只能使用 HTTP GET 或 POST 方法。但是，当您将 useProxy 属性设置为 true 并使用服务器时基于代理服务，您还可以使用 HTTP HEAD、OPTIONS、TRACE 和 DELETE 方法。”

[这就是删除失败的原因，因为它必须按照上面jkraybill](https://stackoverflow.com/users/718287/jkraybill)的评论作为 GET 发送。经过实验，我发现可以使用 POST，并将调用的实际方法作为 URL 的参数包含在内：

```
HTTPConnection.send(headers,"POST",url + "?_HttpMethod=DELETE",httpCallback); 
```

# azure - 天蓝色的“连接字符串”项目是什么？我怎么能添加它？

> ID：11732111
> 
> 赞同：1
> 
> 时间：2012-07-31T01:58:11.887
> 
> 标签：azure

这是图片。
[http://www.dotup.org/uploda/www.dotup.org3258537.jpg](http://www.dotup.org/uploda/www.dotup.org3258537.jpg)

我有一个连接字符串可以连接到我网站的 web.config 上的 SQL Server 数据库。
天蓝色门户上的这个项目会给我带来好处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:31:46.630

它是网站门户的链接资源部分中项目的连接字符串 - 目前仅支持 SQL 数据库（例如，不支持 Windows Azure 存储）。[记录](https://www.windowsazure.com/en-us/manage/services/web-sites/how-to-configure-websites/)如下：

> 连接字符串 – 查看链接资源的连接字符串。对于 .NET 站点，这些连接字符串将在运行时注入到您的 .NET 配置 connectionStrings 设置中，覆盖键等于链接数据库名称的现有条目。对于 PHP 和 Node 站点，这些设置将在运行时作为环境变量提供。
> 
> 注意 连接字符串是在您将数据库资源链接到网站时创建的，并且在配置管理页面上查看时是只读的。

# django - Facebook 集成 静态访问令牌

> ID：11732112
> 
> 赞同：0
> 
> 时间：2012-07-31T01:58:29.287
> 
> 标签：django, facebook, facebook-graph-api

我正在尝试在网站后端使用 facebook API。本质上，我希望能够使用 Djano 应用程序创建事件并让它创建相应的 facebook 事件。

我正在为其创建活动的组织已经有一个 Facebook 页面。我只关心在该组织的页面上发布活动。我是组织的管理员，所以我知道所有的登录信息。

我想弄清楚的是如何设置访问令牌，使其仅适用于组织，而无需登录 facebook 应用程序。我在想设置一个静态访问令牌可以解决问题，但我无论如何都找不到。

那么，创建一个只与一个预定义用户交互的 Facebook 应用程序的标准方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:09:30.340

我不完全确定您要做什么。但是，静态访问令牌现在已被弃用。您想要：为使用页面的人创建事件，还是为公司的页面/个人资料创建事件？

希望我能帮上忙

# c# - DrawingContext 到位图文件

> ID：11732113
> 
> 赞同：10
> 
> 时间：2012-07-31T01:58:30.420
> 
> 标签：c#, .net, wpf, rendertargetbitmap, drawingcontext

我有一个 DrawingContext（Visual 或 DrawingGroup 的一部分），我在其中绘制一堆矩形和/或 1 位图像。把它想象成一个掩蔽的 1 位图像。我想将其转换为位图图像文件。

使用`RenderTargetBitmap`不是一个选项，因为它只能以 32 位像素格式渲染，所以如果我必须渲染一个 20MB 的 1 位图像，我最终会在我的堆上获得 640MB (20*32) 的内存。这当然会产生巨大的 LOH 碎片，并且应用程序在第二次拍摄时内存不足。

所以，我基本上需要一种有效地从绘图上下文写入 1 位位图文件的方法。任何想法/建议/替代方法将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T01:02:23.860

很多想法，有些有点复杂......

## 打印到 XPS 然后提取位图

您可以打印`Visual`到 XPS 文档。

如果幸运的话，它将结合您在其中绘制的 1 位图像，`DrawingContext`并在 XPS 文件中生成一个位图。

对于矩形，它可能会在 XPS 中将矩形保留为基于矢量的信息（基于“形状”`Rectangle`或`DrawingContext` `DrawRectangle`可能两者都这样做）......如果发生这种情况，则创建一个位图，在其中绘制矩形部分并将该位图绘制到上下文。

一旦你有了 XPS 文件，你就可以解析它并提取“图像”，如果你幸运的话，那就是它在里面产生的东西。（XPS 只是一个 ZIP 文件，它使用 XAML 来描述内容并使用子目录来存储位图图像数据文件、字体等）。

（我认为您可以使用`Package`该类来访问 XPS 文档的原始部分，或者`XpsDocument`进行更高级别的解释）。

或者，如果您的意图只是提供一种方法来允许在不同的上下文中查看您的组合 1 位图像，则只需在 XPS 查看器中显示 XPS。

*   [将 WPF (XAML) 控件转换为 XPS 文档](https://stackoverflow.com/questions/502198/convert-wpf-xaml-control-to-xps-document)

*   [如何使用 RenderTargetBitmap 创建 BIG 位图？](https://stackoverflow.com/questions/5522178/how-to-create-big-bitmaps-with-rendertargetbitmap)

*   [打印 WPF 位图图像](https://stackoverflow.com/questions/1661995/printing-a-wpf-bitmapimage)

## 使用提供打印到图像功能的打印机驱动程序

这并不理想……尤其是因为您必须在机器上安装打印机驱动程序……但是您可以使用“打印到图像”打印机驱动程序，然后使用它来生成位图。以下是一些建议：

*   [http://sourceforge.net/projects/imageprinter/](http://sourceforge.net/projects/imageprinter/)

*   [http://www.zan1011.com/](http://www.zan1011.com/)

## 创建一个 GDI+ HBITMAP 并使用 GDI+ 调用进行绘图...然后将其包装以供 WPF 使用...或保存到磁盘。

[1] 首先创建一个足够大的 GDI+ 位图以容纳您的合成渲染

（有几种不同的方法可以做到这一点......一种方法是使用 WriteableBitmap 来提供后台缓冲区位/存储......如果你想访问内存中的位......在你的情况下我不认为你做/需要）。

```
var bmp = new System.Drawing.Bitmap( pixelwidth, pixelheight, System.Drawing.Imaging.Format1bppIndexed ); 
```

或者，如果您想要 WriteableBitmap 访问权限，请使用这种方式。

*   [获取 wpf WriteableBitmap 的 DrawingContext](https://stackoverflow.com/questions/88488/getting-a-drawingcontext-for-a-wpf-writeablebitmap)

[2] 将任何 WPF 位图源转换为 GDI+ 位图，以便您可以使用 DrawImage 将它们绘制到 GDI+ 图形上下文中。

您可以使用 CopyPixels 在您的 BitmapSources 上执行此操作。

*   [有没有在 BitmapSource 和 Bitmap 之间转换的好方法？](https://stackoverflow.com/questions/2284353/is-there-a-good-way-to-convert-between-bitmapsource-and-bitmap)

对于您的矩形，您可以只使用 GDI+ DrawRectangle 渲染命令。

[3] 将 GDI+ 位图保存到磁盘

使用 System.Image.Bitmap 上的 .Save 方法将其保存为位图。

[4] 使用保存的图像作为 Image 元素的 Source

（注意这可能会在加载图像时使用大量内存，即使它是 1bpp...因为 WPF 渲染路径都是 32bpp）。

[4] 或者包装 GDI+ 位图以在 WPF 中使用

您可以使用 InteropBitmap 来包装基于 GDI+ 的位图，以便您可以将其用作 WPF 中的 BitmapSource。（请注意，它可能必须是 32bpp 的……如果必须……那么您将回到第 1 格……但无论如何都要尝试）。

*   [http://arbel.net/2008/10/22/improper-use-of-interopbitmap-can-cause-a-memory-leak/](http://arbel.net/2008/10/22/improper-use-of-interopbitmap-can-cause-a-memory-leak/)

*   [http://arbel.net/2008/10/22/improper-use-of-interopbitmap-can-cause-a-memory-leak/](http://arbel.net/2008/10/22/improper-use-of-interopbitmap-can-cause-a-memory-leak/)

## 创建位图“服务”

创建另一个充当服务的进程（不必是 NT 服务...可以只是您启动的子进程）以呈现您的组合 1bpp 图像...有多种方式与它进行通信以提供它是渲染命令。

当内存消耗过高/LOH 碎片化时，您可以重新启动此服务。

## 其他想法

您可以使用 OpenGL 进行渲染（例如使用 OpenTK 或 SharpGL），或者使用 DirectX 进行渲染……通过带有 D3DImage 或 Direct2D 的 3D 路径（这在内存使用方面是否与 RenderTargetBitmap 相同……待查明）。

*   [http://www.codeproject.com/Articles/265903/Using-OpenGL-in-a-WPF-Application](http://www.codeproject.com/Articles/265903/Using-OpenGL-in-a-WPF-Application)

*   [http://www.codeproject.com/Articles/113991/Using-Direct2D-with-WPF](http://www.codeproject.com/Articles/113991/Using-Direct2D-with-WPF)

*   [http://www.codeproject.com/Articles/28526/Introduction-to-D3DImage](http://www.codeproject.com/Articles/28526/Introduction-to-D3DImage)

试用 NET 4.5，因为 LOH 堆中有许多改进：

*   [http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx](http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx)

*   [http://blogs.msdn.com/b/dotnet/archive/2012/07/20/the-net-framework-4-5-includes-new-garbage-collector-enhancements-for-client-and-server-应用程序.aspx](http://blogs.msdn.com/b/dotnet/archive/2012/07/20/the-net-framework-4-5-includes-new-garbage-collector-enhancements-for-client-and-server-apps.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T07:27:53.840

我不认为你可以做得更好。由于 RenderTargetBitmap 使用您无法访问的 MILcore。而且我认为没有其他方法可以复制 Visual。但是我认为还有一个选择。它不会是一条线，但我认为它会足够好。

基本上，您将逐块渲染视觉块（PGBRA32）并将其动态转换为 BlackWhite，然后将其与 Blackwhite 缓冲区连接。我已经开始了一个小示例代码，但在中途决定它不会那么容易，但你可以完成它。

```
 /// <summary>
/// Renders only part of the visual and returns byte[] array
/// which holds only black/white information.
/// </summary>
/// <param name="oVisual"></param>
/// <param name="x"></param>
/// <param name="y"></param>
/// <param name="width"></param>
/// <param name="height"></param>
/// <returns>black/white pixel information. one pixel=one bit. 1=white, 0=black</returns>
public static byte[] RenderPartially(Visual oVisual, 
    int x, int y, double width, double height)
{
    int nWidth = (int)Math.Ceiling(width);
    int nHeight = (int)Math.Ceiling(height);

    RenderTargetBitmap oTargetBitmap = new RenderTargetBitmap(
        nWidth,
        nHeight,
        96,
        96,
        PixelFormats.Pbgra32
    );

    DrawingVisual oDrawingVisual = new DrawingVisual();
    using (DrawingContext oDrawingContext = oDrawingVisual.RenderOpen())
    {
        VisualBrush oVisualBrush = new VisualBrush(oVisual);

        oDrawingContext.DrawRectangle(
            oVisualBrush,
            null,
            new Rect(
                new Point(x, y),
                new Size(nWidth, nHeight)
            )
        );

        oDrawingContext.Close();
        oTargetBitmap.Render(oDrawingVisual);
    }

    //Pbgra32 == 32 bits ber pixel?!(4bytes)
    // Calculate stride of source and copy it over into new array.
    int bytesPerPixel = oTargetBitmap.Format.BitsPerPixel / 8;
    int stride = oTargetBitmap.PixelWidth * bytesPerPixel;
    byte[] data = new byte[stride * oTargetBitmap.PixelHeight];
    oTargetBitmap.CopyPixels(data, stride, 0);

    //assume pixels in byte[] are stored as PBGRA32 which means that 4 bytes form single PIXEL.
    //so the layout is like:
    // R1, G1, B1, A1,  R2, G2, B2, A2,  R3, G3, B3, A3, and so on.

    byte [] bitBufferBlackWhite = new byte[oTargetBitmap.PixelWidth
        * oTargetBitmap.PixelHeight / bytesPerPixel];

    for(int row = 0; row < oTargetBitmap.PixelHeight; row++)
    {
        for(int col = 0; col < oTargetBitmap.PixelWidth; col++)
        {
            //calculate concrete pixel from PBGRA32
            int index = stride * row + bytesPerPixel * col;
            int r = data[index];
            int g = data[index + 1];
            int b = data[index + 2];
            int transparency = data[index + 3];

            //determine whenever pixel is black or white.
            //note that I dont know the exact process how one converts
            //from PBGRA32 to BlackWhite format. But you should get the idea.
            bool isBlack = r + g + b + transparency == 0;

            //calculate target index and USE bitwise operators in order to
            //set right bits.
        }
    }

    return bitBufferBlackWhite;
} 
```

所以本质上，用 BlackWhite 格式设置新的 WriteableBitmap，然后像这样调用这个函数：

```
WriteableBitmap blackWhiteFullBuffer = new WriteableBItmap(....., PIxelFormats.BlackWhite);
for(int x = 0; x < Visual.Width; x += <some uniform amount that divides correctly>)
{
    for(int y = 0; y < VIsual.Height; y+= <some uniform amount that divides correctly>)
    {
        byte[] partialBuffer = PartialRenderer.RenderPartially(Visual, x, y, <uniform amX>,
          <uniform amY>);
        //concat that partial blackWhite buffer with other blackWhite buffer.
        //you do this as long as needed and memory wont grow too much
        //hopefully it will be fast enough too.
        PartialRenderer.ConcateBuffers(blackWhiteFullBuffer, partialBuffer);
    }
} 
```

//然后如果需要，将 blackWhiteFullBuffer 保存到 HDD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:20:07.010

[PixelFormats](http://msdn.microsoft.com/en-us/library/ms635337)怎么样

**编辑**：（感谢安德斯·古斯塔夫森）

较低的是`PixelFormats.BlackWhite`，每像素 1 位。

所以通过这种方式，你可以将任何 BitmapImage 转换为 FormatConvertedBitmap，在这里你可以将格式修改为更低的 bpp。

# php - 在自定义页面中访问 Drupal 网络表单字段

> ID：11732117
> 
> 赞同：1
> 
> 时间：2012-07-31T01:59:34.787
> 
> 标签：php, drupal-7

我已经在我的站点主题文件夹中放置了 webform-submission 页面的副本，并且正在修改它以显示我想要的提交页面。目前，要打印元素值，我使用：

```
$submission->data[n]['value'][0] 
```

其中 data[n] 特定于 web 表单中的元素。有什么方法可以让我使用更像`$submission->data[element_key]['value'][0]`是获取字段信息的方法。它只是使阅读更容易，特别是因为我不会是维护网站的人。

谢谢。

ps 这是在 Drupal 7, webform 3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:10:52.373

该`$usbmission`数组内置于函数中[`webform_get_submissions`](http://api.drupalize.me/api/drupal/function/webform_get_submissions/7)。

请注意，包含`element_key`您要查找的数据的表 ( `webform_component`table) 不会在此函数中查询。

因此，如果您想要该数据，则必须自己获取`element_key`信息并`$submission`在`hook_webform_submission_load`.

# c# - C#在服务器回调方法中抛出异常

> ID：11732118
> 
> 赞同：0
> 
> 时间：2012-07-31T01:59:45.020
> 
> 标签：c#, exception, exception-handling, try-catch

我的程序中有一个方法是服务器回调，如下所示：

```
 private void DeserializerCallback(IAsyncResult aysncResult)
    {
        HttpWebRequest request = (HttpWebRequest)aysncResult.AsyncState;
        HttpWebResponse response;
        try
        {
            response = (HttpWebResponse)request.EndGetResponse(aysncResult);
        }
        catch(WebException e)
        {
            VenueMapException venueMapException = new MyException(MyException.ExceptionType.BadResponseException, e);
            throw venueMapException;
        }

        Stream responseStream = response.GetResponseStream();
        this.DeserializeStream(responseStream);

    } 
```

在我执行此行后调用此方法：

```
this.MyHttpRequest.BeginGetResponse(new AsyncCallback(this.DeserializerCallback), this.MyHttpRequest); 
```

在回调方法中，我抛出了一个自己定义的异常。现在我想尽可能远离这段代码来捕获这个异常，但是如果我没有在这个方法中捕获它，我不确定异常会去哪里。
有人可以提出一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:20:57.927

可以在页面级别或应用程序级别捕获错误

1.  [可以在 Global.asax http://msdn.microsoft.com/en-us/library/24395wz3.aspx](http://msdn.microsoft.com/en-us/library/24395wz3.aspx)中的 Application_Error 事件中的应用程序级别捕获错误
2.  aspx 页面中的 Page_Error 事件可以在页面级别捕获错误 [http://msdn.microsoft.com/en-us/library/24395wz3.aspx](http://msdn.microsoft.com/en-us/library/24395wz3.aspx)

在这些事件中，我们可以通过代码获取最后发生的异常

```
Exception exc = Server.GetLastError(); 
```

# iphone - 相机拍摄设备曝光模式锁定

> ID：11732119
> 
> 赞同：1
> 
> 时间：2012-07-31T01:59:52.710
> 
> 标签：iphone, ios, camera, avcapturedevice

我正在尝试用曝光点锁定曝光，但在我的设备中尝试时它似乎不起作用。虽然当你长按屏幕锁定曝光和焦点时相机应用程序也可以工作，但是当你用我自己的应用程序尝试使用以下代码行时，它不起作用。我错过了配置上的某些内容吗？

```
if ([_captureInput.device isExposureModeSupported:AVCaptureExposureModeLocked] && [_captureInput.device lockForConfiguration:NULL] && [_captureInput.device isExposurePointOfInterestSupported]) 
{
[_captureInput.device setExposurePointOfInterest:pointOfInterest];
[_captureInput.device setExposureMode:AVCaptureExposureModeLocked];
[_captureInput.device unlockForConfiguration];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:19:08.830

例如，如果您要更改 flash 模式，如何锁定配置的示例如下：

```
AVCaptureDevice *temp = [[[[self captureSession] inputs] lastObject] device];

if ([temp isFlashModeSupported:AVCaptureFlashModeOn]) {
        NSError *error;
        bool locked = [temp lockForConfiguration:&error];
        if (locked) {
            switch (self.flashMode.intValue) {
                case 0: // Off
                    [temp setFlashMode:AVCaptureFlashModeOff];
                    break;
                case 1: // On
                    [temp setFlashMode:AVCaptureFlashModeOn];
                    break;
                case 2: // Auto
                    [temp setFlashMode:AVCaptureFlashModeAuto];
                    break;

                default:
                    break;
            }
        } else {
            NSLog(@"Could not lock for configuration");
        }

    } 
```

编辑：这只是一个例子（但它应该可以工作），你可以看到我以一种非常奇怪的方式获取捕获设备，因为如果你保存它或者如果你以不同的方式处理它，我不会将它保存在任何地方它也可以工作.

# generics - 具有 ifort 编译器的通用内部程序

> ID：11732122
> 
> 赞同：3
> 
> 时间：2012-07-31T02:00:04.590
> 
> 标签：generics, compiler-construction, fortran, intel-fortran, fortran2003

以下适用于 gfortran 或 f95，但不适用于 ifort：

```
 interface add
     procedure addr, addi
  end interface add

  real a, b
  integer i, j

  data a, b, i, j /1.0, 2.0, 1, 2/

  call add(a,b)
  call add(i,j)

  stop
  contains 

  subroutine addr(x,y)
  real x, y
  print *, x+y
  return
  end subroutine addr

  subroutine addi(m, n)
  integer m, n
  print *, m+n
  return
  end subroutine addi

  end 
```

ifort 返回此错误：

```
 error #6643: This statement is incorrectly positioned.
            procedure addr, addi
   ---------^
  error #8168: Parentheses are required after the PROCEDURE keyword.
            procedure addr, addi
  ---------^ 
```

假设不能使用任何模块过程（我们不希望模块中有 addr 和 addi）并且 ifort 必须用作编译器。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T03:49:14.637

英特尔 Fortran 12.1.5 不支持没有前导 MODULE 关键字的*procedure-stmt*（错误所指的接口块内的语句）的形式或含义。

（因此，编译器将该行归类为*procedure-declaration-stmt* - 因此出现了两个错误。）

Fortran 2003 标准引入了不带前导模块的过程语句的形式，Fortran 2008 标准引入了将内部过程作为通用接口后面的特定过程的能力。

在英特尔 Fortran 支持特定的 Fortran 2008 功能之前，鉴于您声明的不能使用模块过程的要求，没有任何解决方法。

# c#-4.0 - EntityCollection ToArray() extension method not working in Global.asax.cs

> ID：11732123
> 
> 赞同：0
> 
> 时间：2012-07-31T02:00:22.930
> 
> 标签：c#-4.0, asp.net-mvc-2, entity-framework-4, automapper

I'm trying to move my Automapper Entity -> ViewModel map definition from one of my controllers to my MVC app's `OnApplicationStarted()` method. When I copy it, my Entity's EntityCollection property loses access to its `ToArray()` extension method. When I try to compile, I get an error telling me that there is no method or extension method that matches its signature.

Code:

```
 protected override void OnApplicationStarted()
    {
        // some Ninject setup code

        Mapper.CreateMap<Game, AdminGameViewModel>()
            .BeforeMap((s, d) =>
            {
                int platCount = s.Platforms.Count;
                var plats = s.Platforms.ToArray(); // <-- line in question
                d.PlatformIDs = new int[platCount];

                for (int i = 0; i < platCount; ++i)
                {
                    d.PlatformIDs[i] = plats[i].ID;
                }
            })
            .ForMember(dest => dest.Pros, opt => opt.MapFrom(src => src.Pros.Split(new char[] { '|' })))
            .ForMember(dest => dest.Cons, opt => opt.MapFrom(src => src.Cons.Split(new char[] { '|' })))
            .ForMember(dest => dest.PlatformIDs, opt => opt.Ignore());
    } 
```

Again, this code is straight copied and pasted from my controller, where it compiles and runs fine. I've tried casting to IEnumerable, but that doesn't give me access to the method either.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T01:48:57.127

Add the following using.

```
using System.Data.Linq; 
```

# c# - 在 C# 中重用字节数组的优缺点是什么？

> ID：11732124
> 
> 赞同：3
> 
> 时间：2012-07-31T02:00:25.917
> 
> 标签：c#, variables, memory-management, bytearray

我正在编写一个使用多个字节数组的函数。但是，我只需要在任何给定时间保留最新的。在我的函数开头（在主循环之前）声明一个 byte[] 有什么问题，然后继续为其分配最新的值吗？相反，在我的函数的每个阶段制作一个字节数组实例和变量是一种更好的做法吗？这种重复分配会导致性能损失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:17:52.633

当你声明一个数组时，与 C/C++ 不同，数组是在堆上分配的，而你的变量实际上是对数组的引用。因此重用相同的变量不会使您免于重新分配内存。如果数组的大小完全相同，那么您可以分配一次并重用相同的对象，这将显着提高性能。重用同一个引用的唯一好处是，一旦将它指向一个新数组，旧数组就可以自由地被垃圾收集，尽管还有其他方法可以实现这一点，比如将其设置为 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T02:21:33.730

完成其中任何一项所需的工作量没有区别。编译器会将它们转换为相同的实现。

需要注意的最重要的事情是，在 C# 中，除非您说“new”，否则变量声明实际上不会提交任何资源。如果您精通 C++，您应该想象*所有*C# 变量声明都有一个隐含的 * 与之关联。例如在您的情况下：`byte[] *onePageOfBytes`. 您要求为您提供字节数组的函数将执行实际分配，除非它知道如何回收以前的数组，否则您不会通过尝试避免变量定义来获得任何收益。

# mysql - MySQL视图将行转换为列

> ID：11732125
> 
> 赞同：1
> 
> 时间：2012-07-31T02:00:30.330
> 
> 标签：mysql, view

我想将行转换为 mySQL 的列。

我有一个有四个字段的表

```
Excode SyID adno Mark
IA1      1  2220  70
IA1      1  2134  75
IA1      3  2220  73
IA1      3  2134  80
IA2      1  2220  81
IA2      1  2134  79
IA2      3  2220  65
IA2      3  2134  72
.....
..... 
```

“SyID”和“adno”将保留在列本身中，“Excode”中唯一值的数量应在列中增加，如下所示

```
SyID adno IA1 IA2 ..... ...... .....
1    2220  70  81 ..... ...... .....
3    2220  73  65 ..... ...... .....
1    2134  75  79 ..... ...... .....
3    2134  80  72 ..... ...... .....
.. ...... ..... .... ..... ...... .....
.. ...... ..... .... ..... ...... ..... 
```

请指导我。感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T03:13:20.013

也许您最接近在 MySQL 中将非固定数量的行“PIVOTing”成单行的方法是使用该`GROUP_CONCAT()`函数。这不会完全让你把所有的`Excode`s 放到单独的列中，而是作为一个单独的分隔字符串：

```
SELECT   SyID, 
         adno, 
         GROUP_CONCAT(CONCAT(Excode, ': ', Mark) SEPARATOR ' / ') AS ExcodeMarks
FROM     tbl
GROUP BY SyID, adno 
```

这将产生*类似于*您想要的东西：

```
SyID   |   adno   |   ExcodeMarks
----------------------------------------------
1      |   2220   |   IA1: 70 / IA2: 81
3      |   2220   |   IA1: 73 / IA2: 65
1      |   2134   |   IA1: 75 / IA2: 79 
3      |   2134   |   IA1: 80 / IA2: 72 
```

# android - android谷歌地图绘制路径错误

> ID：11732127
> 
> 赞同：3
> 
> 时间：2012-07-31T02:00:58.983
> 
> 标签：android, google-maps

我正在开发一个包含谷歌地图绘制路径的安卓应用程序。

我使用这样的方法

```
 private void DrawPath(GeoPoint src, GeoPoint dest, int color,
          MapView mMapView01) {

        // connect to map web service
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");//from
        urlString.append( Double.toString((double)src.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)src.getLongitudeE6()/1.0E6 ));
        urlString.append("&daddr=");//to
        urlString.append( Double.toString((double)dest.getLatitudeE6()/1.0E6 ));
        urlString.append(",");
        urlString.append( Double.toString((double)dest.getLongitudeE6()/1.0E6 ));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
        Log.d("xxx","URL="+urlString.toString());

        //System.out.println(urlString);
        // get the kml (XML) doc. And parse it to get the coordinates(direction route).
        Document doc = null;
        HttpURLConnection urlConnection= null;
        URL url = null;
        try
        {
          url = new URL(urlString.toString());
          urlConnection=(HttpURLConnection)url.openConnection();
          urlConnection.setRequestMethod("GET");
          urlConnection.setDoOutput(true);
          urlConnection.setDoInput(true);
          urlConnection.connect();

          DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
          DocumentBuilder db = dbf.newDocumentBuilder();
          doc = db.parse(urlConnection.getInputStream());

          if(doc.getElementsByTagName("GeometryCollection").getLength()>0)
          {
            //String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getNodeName();
            String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getFirstChild().getNodeValue() ;
            Log.d("xxx","path="+ path);
            String [] pairs = path.split(" ");
            String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude lngLat[1]=latitude lngLat[2]=height
            // src
            GeoPoint startGP = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6));
            //mMapView01.getOverlays().add(overlayitem);
            GeoPoint gp1;
            GeoPoint gp2 = startGP;
            for(int i=1;i<pairs.length;i++) // the last one would be crash
            {
              lngLat = pairs[i].split(",");
              gp1 = gp2;
              // watch out! For GeoPoint, first:latitude, second:longitude
              gp2 = new GeoPoint((int)(Double.parseDouble(lngLat[1])*1E6),(int)(Double.parseDouble(lngLat[0])*1E6));
              mMapView01.getOverlays().add(new MapRouteOverlay(gp1,gp2,2,color));
              Log.d("xxx","pair:" + pairs[i]);
            }
            //mMapView01.getOverlays().add(new MapRouteOverlay(dest,dest, 3)); // use the default color
          }
        }
        catch (MalformedURLException e)
        {
          e.printStackTrace();
        }
        catch (IOException e)
        {
          e.printStackTrace();
        }
        catch (ParserConfigurationException e)
        {
          e.printStackTrace();
        }
        catch (SAXException e)
        {
          e.printStackTrace();
        }

      }
} 
```

线

```
 Log.d("xxx","URL="+urlString.toString()); 
```

显示使用这样的浏览器的 url 是完全正确的

[http://maps.google.com/maps?f=d&hl=en&saddr=25.051393,121.560243&daddr=25.052742,121.558137&ie=UTF8&0&om=0&output=kml](http://maps.google.com/maps?f=d&hl=en&saddr=25.051393,121.560243&daddr=25.052742,121.558137&ie=UTF8&0&om=0&output=kml)

最奇怪的是

3天前它工作正常！！

但是昨天，变成了这样的报错

排队

```
doc = db.parse(urlConnection.getInputStream()); 
```

![在此处输入图像描述](../Images/0cd2d57cbcc2307955458418c443d21e.png)

它立即跳转到异常处理

有什么建议吗？

感谢您的大力帮助！

# iphone - CGAffineTransform 旋转走错路了

> ID：11732128
> 
> 赞同：9
> 
> 时间：2012-07-31T02:01:11.873
> 
> 标签：iphone, rotation, cgaffinetransform

在我的实验中，我得出以下结论：

```
YourView.transform = CGAffineTransformMakeRotation( positive value ); 
```

将顺时针旋转视图，并且

```
YourView.transform = CGAffineTransformMakeRotation( Negative value ); 
```

将逆时针旋转视图，

但文件说：

旋转仿射变换的角度（以弧度为单位）。在 iOS 中，正值指定逆时针旋转，负值指定顺时针旋转。

这些相互矛盾吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-31T03:30:23.513

你的困惑是可以理解的。

实际上，正角表示从正 X 轴向正 Y 轴的旋转。负角表示从正 X 轴向负 Y 轴的旋转。

“原生”Core Graphics 坐标系仿照标准[笛卡尔坐标系](http://en.wikipedia.org/wiki/Cartesian_coordinate_system)，其中 Y 轴在页面上**向上增加。**在该系统中，正角表示逆时针旋转：

![法线坐标系](../Images/54a6601bb9c47107eed3fd651cd6755e.png)

因此，如果您创建自己的`CGContext`（例如，通过使用`CGBitmapContextCreate`or `CGPDFContextCreate`），旋转将按您的预期工作。

然而，计算机系统在历史上一直使用 Y 轴在页面上**向下增加的坐标系。**在这样的翻转坐标系中，正角表示顺时针旋转：

![翻转坐标系](../Images/f1ffc1243323923304b1ed3d5d9a57d2.png)

请注意，在两个坐标系中，正角度从正 X 轴向正 Y 轴旋转。

事实证明，UIKit 会翻转它为您创建的图形上下文的坐标系。这包括它在发送给您之前设置`drawRect:`的图形上下文以及它在 中设置的图形上下文`UIGraphicsBeginImageContext`。（[*Quartz 2D 编程指南*](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_overview/dq_overview.html#//apple_ref/doc/uid/TP30001066-CH202-CJBBAEEC)对此进行了解释。）您可以通过查看当前变换矩阵来检查这一点（使用`CGContextGetCTM`）。你会发现它`-1`的`d`元素中有a，这意味着Y轴被翻转了。

A`UIView`还使用翻转坐标系来布置其子视图，这会影响`UIView` `transform`属性的含义。

# python - 在python中排序列表

> ID：11732133
> 
> 赞同：1
> 
> 时间：2012-07-31T02:02:10.823
> 
> 标签：python, sorting

好的，所以我有一点问题，对不起，我是 python 新手。

我正在尝试按分数对列表进行排序，这是一个数字，但如果出现平局，我需要按名称的长度对它们进行排序，名称越短排名越高。

所以我在这里有这个清单

```
11 Jenny
8 Adam
10 Mark
8 Ada 
```

当我在这里使用此代码时，它会返回

```
11 Jenny
10 Mark
10 Mark
10 Mark

def sort(names, counts):
    newArr = []
    newNames = names
    newCount = counts
    for x in range(0, len(names)):
        newArr.append(findBiggest(newNames, newCount))
        for z in range(0, len(names)):
            name = newArr[len(newArr) - 1].split(" ")[1]
            print name 
            if names[z] == name:
                tempArr1 = newNames
                tempArr2 = newCount
                newNames = []
                newCount = []
                for y in range(0, len(tempArr1)):
                    if y != z:
                        newNames.append(tempArr1[y])
                        newCount.append(tempArr2[y])
    return newArr
def findBiggest(names, counts):
    biggest = 0;
    for x in range(0, len(counts)):
        if int(counts[x]) > biggest:
            biggest = int(counts[x])
    biggestCountArr = [[], []]
    for x in range(0, len(counts)):
        if int(counts[x]) == biggest:
            biggestCountArr[0].append(counts[x])
            biggestCountArr[1].append(names[x])
    if len(biggestCountArr[0]) == 1:
        return str(biggestCountArr[0][0]) + " " + biggestCountArr[1][0]
    else:
        return smallestLength(biggestCountArr)
def smallestLength(twoDArr):
    names = twoDArr[1]
    shortestLen = 0
    for x in range(0, len(names)):
        if len(names[x]) > shortestLen:
            shortestlen = len(names[x])
    for x in range(0, len(names)):
        if len(names[x]) == shortestLen:
            return str(twoDArr[0][x]) + " " + twoDArr[1][x] 
```

只是让你知道

```
11 Jenny
8 Adam
10 Mark
8 Ada 
```

应该出来

```
11 Jenny
10 Mark
8 Ada
8 Adam 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T02:05:17.670

```
lst=[(11, "Jenny"),(8, "Adam"),(10, "Mark"),(8, "Ada")]
lst.sort(key=lambda x: (-x[0],len(x[1])) )
print (lst) # [(11, 'Jenny'), (10, 'Mark'), (8, 'Ada'), (8, 'Adam')] 
```

list 方法`sort`和内置函数`sorted`接受一个关键字参数`key`，该参数是一个可调用的。基本上，对于序列中的每个元素，该元素都被传递给`key`函数，该函数的返回值实际上是 python 在排序时用来确定排序的。因此，在上面，我使用`lambda`构造一个从输入元素返回元组的函数。元组是有序的`first_element, lenth_of_second_element`。

当比较元组（或列表）时，它很像比较一个字符串。您查看第一个元素，如果它们相同，则继续查看第二个元素，然后查看第三个元素，依此类推，直到一个元素大于另一个元素。例如

```
(1,2,3,4) > (1,2,3,3) #True 
```

这最终有助于以非常有趣的方式进行排序。

我想解决这个问题，我应该提一下 python 用来排序的算法是*stable*。这意味着如果您先按 keyA 排序，然后再按 keyB 排序，则基于 keyB 比较相等的两个元素将保持它们在使用 keyA 排序后的顺序。换句话说，排序不会改变等值元素的顺序。所以，上面的也可以这样完成：

```
lst.sort(key=lambda x:len(x[1]))  #sort by length of names
lst.sort(key=lambda x:x[0], reversed=True) #sort by score (highest first instead of regular lowest first) 
```

而且我认为如果没有链接到更优雅地[解释它的东西，任何答案都是不完整的。](http://wiki.python.org/moin/HowTo/Sorting/)（具体见“按键功能”部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:11:24.513

您必须遍历每一行并`sort`在它们上使用该方法

```
#open the file and read through the lines.
lines = open('yourfile.txt').readlines()

#iterate over each line, and split along the spaces 
pairs =[]
for line in lines:
   split_string = line.split('')
   num = int(split_string[0])
   pairs.append((num, split_string[1:])

#sort through the pairs (from mgilsons answer)
pairs.sort(key=lambda x: (x[0],len(x[1])) 
```

编辑：实际上误读了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:44:50.217

```
aList = [
    (11, 'Jenny'),
    (8, 'Adam'),
    (10, 'Mark'),
    (8, 'Ada'),
]

aList.sort(lambda x, y: y[0] - x[0])
print aList 
```

# ruby-on-rails - 即时转码/重新混合 FLV 和流式传输

> ID：11732138
> 
> 赞同：1
> 
> 时间：2012-07-31T02:03:36.493
> 
> 标签：ruby-on-rails, video-streaming, video-encoding, mediastreamsegmenter, roku

我正在尝试自学一些有关视频流和转码的知识，同时进行一些 Roku 应用程序开发。我有许多视频文件（主要是 FLV 格式（H.264/AAC）），我想流式传输到客户端，在这种情况下是 Roku 盒子（接受 MP4（H.264/AAC）和HTTP 实时流 (HLS)）。我想知道是否可以对 FLV 文件进行转码/重新混合并将它们即时流式传输到客户端，也许是通过 HLS？

我曾尝试使用 ffmpeg 重新混合文件并在转码过程中立即提供它们，但在写入过程完成之前它们无法播放。我可以通过 Apache/Rails 让 Roku 播放我完成的 MP4 文件。

但我想知道......是否可以设置服务器来转码/重新混合文件并立即将输出文件（来自 ffmpeg/我正在使用的任何工具）流式传输到客户端？如果是这样，需要哪些工具来完成这项工作？是否可以在文件被转码或重新混合时使用媒体文件分段器来分割文件？

我很清楚转码过程是 CPU 密集型的，但我不太担心转码和流式传输的实用性，因为这只是一个个人教育项目（而且我有一个空闲的系统，如果处理这个）。

抱歉，如果我在这里离开基地，只是想通过这个破解我的方式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:25:50.273

在 TS 段完成后立即获得 HLS 服务的技巧是让播放列表在数据到达磁盘时动态更新。

您要做的基本上是通过 HLS 流式传输实时事件，这绝对可以完成，它只需要工具之间的协调。

开源分段器能够做到这一点，诀窍是让 ffmpeg 写出单个 MPEG-TS 流（未分段）并将其写入命名管道（或等效于您的操作系统），然后让分段器从此命名管道中读取并将文件写入共享网络空间中的目录。

分段器在处理过程中重复更新磁盘上的 M3U8 文件，因此它可以用作“实时”流，直到任务完成。

当 ffmpeg 关闭其输出时，分段器将结束标记放入 M3U8 中，文件变为“VOD”。

分段器可以在[这里下载](http://svn.assembla.com/svn/legend/segmenter/)

# iphone - 从 UIViewController 导航到 UITableViewController

> ID：11732140
> 
> 赞同：1
> 
> 时间：2012-07-31T02:03:40.150
> 
> 标签：iphone, objective-c, xcode, uiviewcontroller

我正在尝试使用此操作按钮从 UIViewController 导航到 UITableViewController。显然我做错了什么，所以它丢失了在我的故事板中链接到 UITableViewController 的 UINavigationController。或类似的东西。当我按下按钮时，此代码会显示 TableView，但缺少导航栏，因此无法返回，如果我在 tableview 中滑动，应用程序就会崩溃。

```
-(IBAction)nextButtonPressed:(id)sender{

    ResultsTableViewController *nextController = [[self storyboard] instantiateViewControllerWithIdentifier:@"Results Controller"];
    nextController.objectsArray = resultObjectsArray;
    [self presentModalViewController:nextController animated:YES];
    [nextController release];
} 
```

我应该将 UINavigationController 与 UIViewController 而不是 UITableViewController 链接，那会起作用吗？或者我应该将上面的代码定位为 UINavigationController 吗？怎么做这个简单的事情？谢谢。

编辑1：

将导航控制器添加到 UIViewController 并使用它推送到 TableView，如下所示：

```
[self.navigationController presentModalViewController:nextController animated:YES] 
```

没有解决问题。刷的时候还是会闪退。

编辑2：

如果我这样做：

```
[self.navigationController pushViewController:nextController animated:YES] 
```

一旦 tableview 在屏幕上可见，它就会崩溃。不过，我现在用“后退”按钮瞥了一眼导航栏。这是来自此的崩溃报告：

-[__NSCFType isViewLoaded]：无法识别的选择器发送到实例。Rødvinsguiden[318:f803] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFType isViewLoaded]：无法识别的选择器发送到实例 0x6b9d2e0”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:23:11.407

您忘记使用当前视图的导航控制器进行推送，而只是在没有它的情况下推送新的视图控制器。

```
[self.navigationController presentModalViewController:nextController animated:YES] 
```

# javascript - jquery addClass 和 removeClass 问题

> ID：11732141
> 
> 赞同：0
> 
> 时间：2012-07-31T02:04:31.560
> 
> 标签：javascript, jquery, html, css

我在使用 jQuery 以及添加和删除类时遇到了奇怪的问题。我试图查看 json 请求是否成功，对于特定的超链接，它应该调用`addClass`并`removeClass`添加/删除特定的 css 属性。当我单击它时，它永远不会工作，但是当我独立尝试 css 类时，它们工作正常。我在这里缺少什么吗？感谢您的输入。

```
$(document).ready(function() {
    $('.add_link').bind("click", function(e) {
        $.getJSON("/add/", function(json) {
            if (json.SUCCESS != null) {
                $(this).removeClass('blue_button_link').addClass('gray_out_button_link');
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:06:42.923

```
$(document).ready(function() {
    $('.add_link').bind("click", function(e) {
        // cache it in a local variable.
        var $this = $(this);
        $.getJSON("/add/", function(json) {
            if (json.SUCCESS != null) {
                $this.removeClass('blue_button_link').addClass('gray_out_button_link');
            }
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:07:32.520

在事件处理程序中，您有另一个上下文，因此您无法使用`this`您想要的方式。尝试：

```
$(document).ready(function() {
    var link = $('.add_link');

    link.bind("click", function(e) {
        $.getJSON("/add/", function (json) {
            if (json.SUCCESS != null) {
                link.removeClass('blue_button_link').addClass('gray_out_button_link');
            }
        });
    });
}); 
```

或者：

```
$(document).ready(function() {
    $('.add_link').bind("click", function(e) {
        var link = $(this);

        $.getJSON("/add/", function (json) {
            if (json.SUCCESS != null) {
                link.removeClass('blue_button_link').addClass('gray_out_button_link');
            }
        });
    });
}); 
```

# c# - xPath 定位的 selenium 与不同的驱动程序不同

> ID：11732143
> 
> 赞同：0
> 
> 时间：2012-07-31T02:04:52.417
> 
> 标签：c#, xpath, selenium, treeview, webdriver

我以前使用 firefox webdriver，但现在我将 IE 更改为我的 webdriver

我在网页上有一个树视图，

我通过 xPath 找到了该项目，

但是两种不同的驱动程序在使用相同的 xPath 时会定位两个不同的项目。

如何解决这个问题呢？？

而且 treeView 节点有 id ，但是为什么我通过 id 定位失败？？？

她是我要单击的树视图项目：

1.

id: uwtUserFunTree_1_4

xPath 使用 firefox : //div[2]/div[7]/span[3]

2.

id:uwtUserFunTree_1_4_1

xPath 使用 firefox : //div[8]/div/span[3]

# java - Shiro 'Any' 权限实例

> ID：11732147
> 
> 赞同：1
> 
> 时间：2012-07-31T02:05:12.867
> 
> 标签：java, apache, security, shiro

我对 Shiro 权限格式感到困惑。我有一个名为：

```
'messages:publish:anyThing' 
```

一个人拥有以下权限：

```
'messages:publish:1(Category ID)' 
```

我正在尝试向具有此权限的任何实例的任何人授予权限：

```
'messages:publish' 
```

我尝试了以下行：

```
if (SecurityUtils.getPrincipal().isPermitted("messages:publish:?")) 
```

但没有成功。

我知道一切都是 * ，“任何”如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T11:13:37.717

看到这个答案：[https ://stackoverflow.com/a/5281900/1279987](https://stackoverflow.com/a/5281900/1279987)

所以你可以试试这个：

`if (SecurityUtils.getPrincipal().isPermitted("messages:publish:*"))`

# ios - UITextPosition 到 NSRange

> ID：11732150
> 
> 赞同：18
> 
> 时间：2012-07-31T02:05:33.223
> 
> 标签：ios

我需要使用 NSStringFromRange 但我只有一个开始和结束 UITextPositions。如何将 UITextPosition 转换为 NSRange。

```
NSMutableArray * wordArray = [[NSMutableArray alloc]init];
id<UITextInputTokenizer> tokenizer = tv.tokenizer;
UITextPosition *start = tv.beginningOfDocument;
while (![start isEqual:tv.endOfDocument]) {
    UITextPosition *end = [tokenizer positionFromPosition:start toBoundary:UITextGranularityWord inDirection:UITextStorageDirectionForward];
    NSString *word = [tv textInRange:[tv textRangeFromPosition:start toPosition:end]];
    [wordArray addObject:NSStringFromRange(<#NSRange range#>)];
    start = end;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-31T03:40:54.050

尝试这个：

```
NSInteger startOffset = [tv offsetFromPosition:tv.beginningOfDocument toPosition:start];
NSInteger endOffset = [tv offsetFromPosition:tv.beginningOfDocument toPosition:end];
NSRange offsetRange = NSMakeRange(startOffset, endOffset - startOffset);
[wordArray addObject:NSStringFromRange(offsetRange)]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-25T20:40:56.130

```
- (NSRange)rangeFromTextRange:(UITextRange *)textRange inTextView:(UITextView*)textView {

    UITextPosition* beginning = textView.beginningOfDocument;
    UITextPosition* start = textRange.start;
    UITextPosition* end = textRange.end;

    const NSInteger location = [textView offsetFromPosition:beginning toPosition:start];
    const NSInteger length = [textView offsetFromPosition:start toPosition:end];

    return NSMakeRange(location, length);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-03T16:28:24.267

**Swift3**版本

```
 func angeFromTextRange(textRange:UITextRange,textView:UITextView) -> NSRange {
       let location:Int = textView.offset(from: textView.beginningOfDocument, to: textRange.start)
       let length:Int = textView.offset(from: textRange.start, to: textRange.end)
       return NSMakeRange(location, length)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-05T17:26:37.290

**@Peter Lapisu 答案的**Swift 2版本****

 ****方法1**：作为函数

```
func rangeFromTextRange(textRange:UITextRange,textView:UITextView) -> NSRange {
        let location:Int = textView.offsetFromPosition(textView.beginningOfDocument, toPosition: textRange.start)
        let length:Int = textView.offsetFromPosition(textRange.start, toPosition: textRange.end)
        return NSMakeRange(location, length)
    } 
```

**方法2**：作为扩展

```
extension UITextView {
    func rangeFromTextRange(textRange:UITextRange) -> NSRange {
        let location:Int = self.offsetFromPosition(self.beginningOfDocument, toPosition: textRange.start)
        let length:Int = self.offsetFromPosition(textRange.start, toPosition: textRange.end)
        return NSMakeRange(location, length)
    }
} 
```**

# php - 如何修复我的 elseif 语句？

> ID：11732155
> 
> 赞同：0
> 
> 时间：2012-07-31T02:06:21.500
> 
> 标签：php

我有一个 elseif 语句，我很困惑为什么不起作用？

这是我的脚本

```
 if(isset($namasupexp))
      {
        $supexp = $namasupexp;  //condition 1
        echo $supexp;
      }
 elseif(isset($namasupexp2))
      {
        $supexp = $namasupexp2; //condition 2 is not work, or ignore
        echo $supexp;
      }//end if 
```

为什么只有条件1有效，其他条件无效？

谁能告诉我解决方案或我的错误？

我真的很感谢你的回答。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:08:43.960

```
if(isset($namasupexp))
{
    // if this check is satisfied, it will stop checking any else/elseif statements after it
}
elseif(isset($namasupexp2))
{

}//end if 
```

如果您想同时检查两者，

```
if(isset($namasupexp))
{
}

if(isset($namasupexp2))
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:10:36.807

如果流进入条件 1，那么它永远不会进入条件 2。

在你的情况下，不要使用 elseif。

```
 if(isset($namasupexp)) {
   $supexp = $namasupexp;  //condition 1
   echo $supexp;
 }
 if(isset($namasupexp2)) {
   $supexp = $namasupexp2; //condition 2 
   echo $supexp;
 } 
```

# html - 固定位置宽度

> ID：11732156
> 
> 赞同：2
> 
> 时间：2012-07-31T02:06:41.493
> 
> 标签：html, css, css-position

好吧，我正在一个小型网站上工作。

但是我有固定位置的问题。

我的标题宽度为 770 像素。它包含几个元素。

位置：固定；工作得很好，但是当我将我的网站调整为另一个屏幕尺寸时，固定元素（标题）的宽度不能完全可见，比如 640x480。

我希望它被固定以进行滚动，但我希望它在宽度上完全可见，如果用户在较小的屏幕上并且无法完全看到它。

这是一个关于 wordpress 主题的示例。

[http://dvl-den.net/](http://dvl-den.net/)

我的小项目也有同样的问题。尝试在 640x480（调整浏览器大小）上打开该网站，您会看到我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:22:54.553

我不认为只有 CSS 属性的解决方案。我会尝试使用`position: absolute;`我的 CSS，并使用 JavaScript（我的示例需要 jQuery），例如：

```
jQuery(function($) { // document ready
    var $win = $(window),
        handler = function() {
            // try not to overload browser, creating a throttle
            var throttle,
                throttleFn = function() {
                    // this is what happens on window resize
                    $('#header').css({
                        top: $win.scrollTop()
                    });
                };
            return function() {
                clearTimeout(throttle);
                throttle = setTimeout(throttleFn, 100);
            };
    };
    $win.resize(handler());
}); 
```

它在移动设备中并不是很“酷”，但众所周知，Web 应用程序中的固定标头存在移动问题（与本机不同）。如果您需要，我可以使用 JSFiddle 示例进行更新。

查看演示：http: [//jsfiddle.net/qaKT7/](http://jsfiddle.net/qaKT7/)（您可以使用 100 值来获得更好的体验，也可以使用`.animate()`而不是`.css()`让它看起来更漂亮）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:37:24.317

尝试给予

```
min-width:770px; 
```

或尝试`media queries`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:35:19.457

我认为有两种方法：

1.  将宽度“770px”更改为百分比。
2.  检测屏幕的像素高度，然后据此调整宽度。

# excel - 如何获取“数据验证”CommandBarButton 对象？

> ID：11732159
> 
> 赞同：1
> 
> 时间：2012-07-31T02:07:11.993
> 
> 标签：excel, vsto, add-in, office-2007, commandbar

当用户切换到特定工作表时，我需要隐藏**数据验证**按钮，但我无法在`Application.CommandBars`.

我试图循环出所有`CommandBar`对象及其控件名称，但仍未找到，以前有人尝试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:13:43.547

在 Excel 2007 中，**数据验证**按钮位于功能区 UI（*不是命令栏）中 - 如果不覆盖现有功能区组 (* *GroupDataTools* ) ，您将无法禁用它。有关如何覆盖现有功能区组的信息，请参阅此[相关 SO 帖子。](https://stackoverflow.com/a/9625994/175679)要在功能区中找到菜单组的控件 ID，您可以[从 Microsoft 下载此控件 ID 列表](http://www.microsoft.com/en-us/download/details.aspx?id=3582)。

# python - 在 apache2 上部署烧瓶 WSGI 应用程序的问题

> ID：11732160
> 
> 赞同：2
> 
> 时间：2012-07-31T02:07:13.460
> 
> 标签：python, apache2, flask, wsgi

我创建了一个单文件 Flask 应用程序，因此我可以测试如何在 apache2 服务器上部署它。就服务器和 WSGI 配置而言，我遵循了[Flask上的步骤。](http://flask.pocoo.org/docs/deploying/mod_wsgi/#installing-mod-wsgi)当我指向浏览器中的资源时，它说我没有权限。WSGI 守护进程被赋予与 Flask 应用程序相同的权限。下面是 VirtualHost 配置。

```
<VirtualHost *:80>

ServerName localhost 

WSGIDaemonProcess flask_test user=someuser group=someuser threads=5
WSGIScriptAlias /flask_test/ /var/www/flask_test/flask_test.wsgi

DocumentRoot /var/www/flask_test/
ErrorLog /var/www/flask_test/logs/error.log

    <Directory /var/www/flask_test/>
        WSGIProcessGroup flask_test
        WSGIApplicationGroup %{GLOBAL}
        WSGIScriptReloading On
        Order deny,allow
        Deny from all
    </Directory>

</VirtualHost> 
```

这是WSGI文件

```
import sys

activate_this = '/home/someuser/pyProjects/general/venv/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this))

sys.path.append('/home/someuser/pyProjects')

from general import test as application 
```

最后是 error.log 的输出

```
[Tue Jul 31 01:51:18 2012] [error] Exception KeyError: KeyError(140345719740224,) in <module 'threading' from '/usr/lib/python2.6/threading.pyc'> ignored
[Tue Jul 31 01:51:21 2012] [error] [client 108.207.222.48] client denied by server configuration: /var/www/flask_test/flask_test.wsgi
[Tue Jul 31 01:51:21 2012] [error] [client 108.207.222.48] client denied by server configuration: /var/www/flask_test/favicon.ico 
```

编辑：实施 Graham Dumpleton 建议服务器后，现在返回代码 500 并出现以下错误 `TypeError: 'module' object is not callable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:03:15.163

问题出在 .wsgi 文件中。我没有正确导入应用程序对象。基本上，您要确保将 app 对象作为应用程序导入 wsgi。例如`from flask_test import app as application`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T02:30:34.557

一般要：

```
WSGIScriptAlias /flask_test/ /var/www/flask_test/flask_test.wsgi 
```

子 URL 的挂载点上没有尾部斜杠。

更糟糕的是你有：

```
Deny from all 
```

所以你明确告诉 Apache 返回禁止。

你应该有：

```
Allow from all 
```

在这种情况下。

# c# - 跨数据库的 C# IDataReader 通用访问器

> ID：11732170
> 
> 赞同：0
> 
> 时间：2012-07-31T02:08:50.427
> 
> 标签：c#, ado.net

我正在开发一个需要使用“相似”模式连接到不同数据库类型（SQL Server、Oracle、DB2）的应用程序。我说“相似”模式是因为表名、列等......是相同的，但底层数据类型特定于该数据库类型。例如，在 SQL Server 和 Oracle 数据库中，我都有一个名为“tablename”的表和一个名为“column”的列。'column' 的数据类型对于 Oracle 是 NUMBER，对于 SQL Server 是 float。

我可以通过通用 ADO 接口获取适当的提供程序工厂、连接和查询，但我不确定并且遇到问题的是我应该如何访问此列。

对于 Oracle，我相信我应该对 NUMBER 数据类型字段使用访问器函数“GetDecimal()”，事实上，似乎使用任何其他访问器，例如 GetInt32()、GetDouble()，我都会遇到强制转换异常。对于 SQL Server，我应该使用访问器函数“GetDouble()”。无论底层数据库数据类型如何，是否有一种方法/策略可以使用单个访问器函数获取此值？请注意，我无法控制后端数据库架构。

谢谢，我很感激回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:56:25.443

您可以使用 IDataReader.GetValue 但您仍然需要在某个地方进行投射。您可以将访问抽象到一个通用包装器中，并在数据读取器上使用 GetSchemaTable 作为一种机制，以就将 GetValue 的结果转换为什么做出明智的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T10:19:53.867

是的你可以。考虑到您可以将两种类型（SqlServer 的浮点数和 Oracel 的数量）转换为像十进制这样的 .NET 数据类型，您可以依赖`System.Convert`类中的方法。你实际上应该这样做：

```
internal static decimal Read(IDbCommand cmd)
{
    cmd.CommandText = @"SELECT column FROM tablename LIMIT 1";
    using (var r = cmd.ExecuteReader())
    {
        while(r.Read())
        {
            return Convert.ToDecimal(r[0]);
            //instead of return r.GetDecimal(0);

            //or even better return r[0].ToFormattedDecimal();
        }
    }
}

public static decimal ToFormattedDecimal(this object d)
{
    if (d is DBNull || d == null) //important line - to check DbNull
        return 0; //your value

    try
    {
        return Convert.ToDecimal(d).Normalize();
    }
    catch (Exception ex)
    {
        throw ex;
        // or may be return 0;
    }
}

public static decimal Normalize(this decimal d)
{
    return d / 1.00000000000000000000000000000m;
} 
```

我写了一个扩展方法来让你的工作更轻松。该`Normalize`函数会在末尾修剪所有不需要的零，以获取诸如 23.0000 等十进制值。

# java - 取用户输入数的平均值

> ID：11732171
> 
> 赞同：0
> 
> 时间：2012-07-31T02:08:58.920
> 
> 标签：java

这是我的代码

```
import java.util.*;
import java.io.*;

public class eCheck10A
{
public static void main(String[] args)
{
  PrintStream out = System.out;
  Scanner in = new Scanner(System.in);

  out.print("Enter your integers");
  out.println("Negative = sentinel");

  List<Integer> aList = new ArrayList<Integer>();

  for (int n1 = in.nextInt(); n1 > 0; n1 = in.nextInt())
  {
          if(n1 < 0)
          {
          break;
          }
  }

 }
} 
```

如果我想将我输入的所有数字取为 n1，并将它们平均，我如何引用所有这些数字？我将把它们放在 IF 语句中，所以如果输入负数，程序会停止并发布它们的平均值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:15:10.203

这是您执行此任务所需的伪代码（伪代码，因为它看起来很像家庭作业/课堂作业，如果您自己搞定实现，您将成为更好的开发人员）。

因为您不需要数字本身来计算平均值，所以存储它们没有意义。平均值定义为所有数字的总和除以它们的计数，所以这就是您需要记住的全部内容。像这样的东西就足够了：

```
total = 0
count = 0
n1 = get_next_number()
while n1 >= 0:
    total = total + n1
    count = count + 1
    n1 = get_next_number()
if count == 0:
    print "No numbers were entered.
else:
    print "Average is ", (total / count) 
```

* * *

我会提到其他几点。就目前而言，您的`for`语句将在第一个非正数 ( `<= 0`) 处退出，从而变得`if`多余。

此外，您可能*希望*在平均值中包含任何零： 的平均值`{1,2,3} = 2`与 的平均值不同`{1,2,3,0,0,0} = 1`。

您可以在`for`语句本身中执行此操作，例如：

```
for (int n1 = in.nextInt(); n1 >= 0; n1 = in.nextInt()) 
```

然后你根本不需要`if/break`循环内的位，类似于我提供的伪代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:15:46.637

您需要做的概述：创建一个变量 sum 以将所有值相加并创建另一个名为 count 的变量，该变量将用于存储列表 aList 中非负数的数量。然后将总和除以计数以找到平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:37:48.917

另一种计算运行平均值的方法是：
new_average = old_average + (new_number - old_average ) / count
如果你曾经为变量类型达到最大值，你会喜欢这个公式。

# matlab - matlab：用加法填充稀疏矩阵

> ID：11732175
> 
> 赞同：0
> 
> 时间：2012-07-31T02:09:52.700
> 
> 标签：matlab, sparse-matrix, addition, assign

**前言：**正如matlab指南所说，通常，当一个人想要在matlab中有效地填充一个稀疏矩阵时，他应该在矩阵中创建一个索引向量和他想要分配的值向量，然后将所有分配集中到一个原子操作，从而让matlab提前“准备”矩阵，优化赋值速度。一个简单的例子：

```
A=sparse([]);
inds=some_index_generating_method();
vals=some_value_generating_method();
A(inds)=vals; 
```

**我的问题：**`inds`在包含重叠索引的情况下我能做什么，即`inds=[4 17 8 17 9]`17 重复两次。在这种情况下，我想要发生的是矩阵将被分配添加映射到同一索引的所有值，即对于前面的示例

```
A(17)=vals(2)+vals(4) %as inds(2)==inds(4) 
```

是否有任何直接且最重要的是*快速*的方法来实现这一目标？我无法以“更智能”的方式生成索引和值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T02:51:05.717

这可能会有所帮助：

> `S = sparse(i,j,s,m,n,nzmax)`使用向量`i`、`j`和 s 生成一个`m`稀疏`n`矩阵，使得`S(i(k),j(k)) = s(k)`，空间分配给`nzmax`非零。向量`i`、`j`和`s`都是相同的长度。其中任何为零的元素以及和`s`的相应值都将被忽略。任何具有和的重复值的元素都**被加在一起**。`i``j``s``i``j`

 **[在MATLAB 文档中](http://www.mathworks.com/help/techdoc/ref/sparse.html)查看更多[功能](http://www.mathworks.com/help/techdoc/ref/sparse.html)[`sparse`](http://www.mathworks.com/help/techdoc/ref/sparse.html)**

# django - django-allauth and twitter integration - Social Network Login Failure

> ID：11732180
> 
> 赞同：5
> 
> 时间：2012-07-31T02:10:38.607
> 
> 标签：django, twitter, twitter-oauth, django-socialauth, django-allauth

I am trying to work with django-allauth. I followed the instructions at [github page](https://github.com/pennersr/django-allauth) and done following:

1.  Added allauth urls into urls.py

    ```
    urlpatterns += patterns ('',
        url('^accounts/', include('allauth.urls')),
        url('^accounts/profile/$', ProfileView.as_view(), name='ProfileView'),
        url('^login/$', login, name='account_login'),
        url('^logout/$', logout, name='account_logout'),
        url('^login/cancelled/$', login_cancelled, name='socialaccount_login_cancelled'),
        url('^login/error/$', login_error, name='socialaccount_login_error'),
    ) 
    ```

2.  Updated `TEMPLATE_CONTEXT_DIRS`, `TEMPLATE_CONTEXT_PROCESSORS`, `AUTHENTICATION_BACKENDS` and `INSTALLED_APPS`. Also added `ACCOUNT_AUTHENTICATION_METHOD = "username_email"`

3.  Added Key and Secret for twitter in the Social apps table.

4.  Copied django-allauth templates to my app's directory and modified it. I can see all the templates working fine like `/accounts/signup/` and `/accounts/social/connections/`.

Now, from connections or signup when I click Twitter link `/accounts/twitter/login/` I ended up with the following error:

> **Social Network Login Failure**
> 
> An error occured while attempting to login via your social network account.

Am I missing something? May be some stupid mistake (Twitter login url? No clues!). I also tried to find some tutorials based on the latest codebase but unable to find any. django-allauth example on github wasn't of any help. Please help. Also, please feel free to provide me any links or tutorials based on the latest codebase.

Thanks in advance.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T02:03:58.603

I am a beginner so you can expect some stupid mistakes from people like me but I try to learn. I spent many hours trying to resolve this. Finally the issue turns out to be Twitter App Key Settings:

I get "Social Network Login Failure" error because my Twitter App settings are not configured for the localhost. Make sure you have the following settings configured in your Twitter App for your localhost (development machine):

`Callback URL: http://127.0.0.1:8000/`

**NOTE:** If you want to use it for production server then you need to set Callback to your domain name as follows:

`Callback URL: http://Your_Domain_Name.com`

**OR** better use another set of Keys specifically for production use only.

**BONUS** : If you are using [django-social-auth](https://github.com/omab/django-social-auth/) and you don't have these settings configured then you may end up with `401 Unauthorized` error.

# c# - C# sockaddr 到 sockaddr_in

> ID：11732189
> 
> 赞同：0
> 
> 时间：2012-07-31T02:12:10.647
> 
> 标签：c#, struct, winsock

我正在用 C# 编写一个应用程序，它挂钩另一个程序的连接函数调用并读取它正在连接的 IP。（我知道它是 IPv4）

目前它钩子、拦截和转发函数调用，我得到了变量，但由于 winsock 中的 connect 是使用 sockaddr* 变量作为第二个参数调用的，我需要将其转换为 sockaddr_in 以获取 IP 地址。（除非有办法从 sa_data 字段中检索 ip，但我找不到相关信息。）

这就是我卡住的地方。我使用 InteropSignatureToolkit（生成的代码：[http://pastebin.com/twvGw030](http://pastebin.com/twvGw030)）为结构生成了 C# 代码，但我真的不知道如何将 sockaddr 结构转换为 sockaddr_in。在 C++ 中这很容易，但我不知道如何在 C# 中做到这一点。

感谢您花时间阅读本文，希望您能帮助我。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:24:43.760

`IntPtr`在 p/invoke 声明中使用 an ，然后您可以使用`Marshal.PtrToStructure`. 首先使用`sockaddr`查找，然后使用更具体的类型再次`sa_family`调用。`Marshal.PtrToStructure`

# jquery - 自定义 Jquery 滑块 | 单击菜单项以更改 Silde

> ID：11732191
> 
> 赞同：-4
> 
> 时间：2012-07-31T02:12:20.070
> 
> 标签：jquery, html, css

这是我的代码/示例：http: [//jsfiddle.net/6j4cT/14/](http://jsfiddle.net/6j4cT/14/)

滑块工作得很好，我现在想要的是，如果你点击任何“新闻项目”，比如“节点 1”，相应的图像将呈现 - 与“节点 2”相同

```
// News Article Slideshow
  var periodToChangeSlide = 5000;
  var pp_slideshow = undefined;
  var currentPage = 0;

  $('#news-feature-img-wrap li').css('display','list-item').slice(1).css('display','none');
  $('#news-items li:first').addClass('active');

  $("#news-feature-wrap #news-items li").click( function() {
  $(this).parent().addClass('active');
  $(this).parent().siblings().removeClass('active');

  var index = $(this).parent().index();
  var toShow = $("#news-feature-wrap #news-feature-img-wrap li").eq(index);
  toShow.show();
  toShow.siblings().hide();
  currentPage = index;
  $.stopSlideshow();
  });

  $.startSlideshow = function(){
    if(typeof pp_slideshow == 'undefined'){
    pp_slideshow = setInterval($.startSlideshow, periodToChangeSlide);
  } else {
    $.changePage();
    }
  }

  $.stopSlideshow = function(){
    clearInterval(pp_slideshow);
    pp_slideshow= undefined;
  }
  $.changePage = function(){
    var numSlides= $('#news-feature-wrap #news-feature-img-wrap li').length;
    currentPage = (currentPage + 1) % numSlides;
    var menu = $('#news-feature-wrap #news-items li').eq(currentPage);
    menu.addClass('active');
    menu.siblings().removeClass('active');

    var toShow = $("#news-feature-wrap #news-feature-img-wrap li").eq(currentPage);
    toShow.show();
    toShow.siblings().hide();
  }

  $.startSlideshow(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:30:19.140

我`$.changePage`稍微修改了您的函数以接受内部参数：

```
$.changePage = function(internal) { //add this optional parameter
  var numSlides= $('#news-feature-wrap #news-feature-img-wrap li').length;
  if (typeof internal == 'undefined') currentPage = (currentPage + 1) % numSlides; //add this conditional
  else currentPage = internal; //and this else
  ... 
```

然后你可以添加一个简单的事件监听器：

```
$('#news-items').on('click', 'li', function() {
    //stop and restart to reset the interval
    $.stopSlideshow();
    $.changePage($(this).index());
    $.startSlideshow();
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/6j4cT/27/)

对于 jQuery `1.4.3`- `1.6.4`：

```
$('#news-items').delegate('li', 'click', function() {
    //stop and restart to reset the interval
    $.stopSlideshow();
    $.changePage($(this).index());
    $.startSlideshow();
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/6j4cT/25/)

# java - Java面试任务：完成排序数组的Java方法

> ID：11732200
> 
> 赞同：1
> 
> 时间：2012-07-31T02:14:12.077
> 
> 标签：java

> **可能重复：**
> [从数组中找到一对元素，其和等于给定数字](https://stackoverflow.com/questions/4720271/find-a-pair-of-elements-from-an-array-whose-sum-equals-a-given-number)

我最近收到了以下 Java 面试问题。

目标是仅通过输入数组一次即可完成方法任务。

我声称一次通过阵列是不可能完成这项任务的，但我遇到了通常的沉默，停顿，然后面试官宣布面试结束而没有给我答案。

```
public class SortedArrayOps {  
    public SortedArrayOps() {  

    }  

//    Print at the system out the first two ints found in the sorted array: sortedInts[] whose sum is equal to Sum in a single pass over the array sortedInts[] with no 0 value allowed.  
//  i.e. sortedInts[i] + sortedInts[?] = Sum where ? is the target index to be found to complete the task.  
static void PrintIntSumValues(int Sum, int sortedInts[]) {  
//        need to test to see if the Sum value is contained in the array sortedInts. And, if not do nothing.  
    for(int i=0; i<sortedInts.length; i++) {  
//            ... do some work: algebra and logic ...  
//            System.out.println sortedInts[i]+sortedInts[?] sums to Sum.  
    }  
}  

public static void main(String[] args) {  
    final int[] sortedArray = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50};
    PrintIntSumValues(48, sortedArray);  
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:50:00.183

我不确定您要查找数组中的哪些值（“前两个”整数是什么意思？它们的索引的最小总和？一个是最小的？任何两个碰巧首先弹出？），但这个解决方案是 O( n)，通过一次，不使用额外的数据结构，并且只使用额外的一个 int。它*并不*总是找到最接近的两个索引，也不总是找到“第一个”，无论这可能意味着什么。我*相信*它总会找到总和最小的两个（直到你们找到一个反例）。

如果你们发现任何错误，请告诉我：

```
class Test {

    public static void main(String[] args) {  
        int[] sortedArray = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        PrintIntSumValues(6, sortedArray);

        sortedArray = new int[] {1, 2,3, 12, 23423};
        PrintIntSumValues(15, sortedArray);

        sortedArray = new int[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        PrintIntSumValues(100, sortedArray);

        sortedArray = new int[] {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50};
        PrintIntSumValues(48, sortedArray);  
    }

    //    Print at the system out the first two ints found in the sorted array: sortedInts[] whose sum is equal to Sum in a single pass over the array sortedInts[] with no 0 value allowed.  
    //  i.e. sortedInts[i] + sortedInts[?] = Sum where ? is the target index to be found to complete the task.  
    static void PrintIntSumValues(int Sum, int sortedInts[]) {  
        // need to test to see if the Sum value is contained in the array sortedInts. And, if not do nothing.  
        int offset = sortedInts.length-1;

        for(int i=0; i<sortedInts.length; i++) {  
            //            ... do some work: algebra and logic ...   
            if ((sortedInts[i] + sortedInts[offset]) == Sum){
                System.out.println("sortedInts[" + i + "]+sortedInts[" + offset + "] sums to " + Sum + ".");
                return;
            } else {
                int remaining = Sum - sortedInts[i];
                if (remaining < sortedInts[i] ){
                    // We need something before i
                    if (remaining < sortedInts[offset]) {
                        // Even before offset
                        offset = 0 + (offset - 0)/2;
                    } else {
                        // Between offset and i
                        offset = offset + (i - offset)/2;
                    }
                } else {
                    // We need something after i
                    if (remaining < sortedInts[offset]) {
                        // But before offset
                        offset = i + (offset - i)/2;
                    } else {
                        // Even after offset
                        offset = offset + (sortedInts.length - offset)/2;
                    }
                }
            }
        }  
        System.out.println("There was no sum :(");

    }  
} 
```

[您可以在此处](http://ideone.com/QYsUJ)查看输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:59:16.940

这应该有效。您有两个指针，并且只对数据进行一次传递。

```
j = sortedInts.length - 1;
for(int i=0; i<sortedInts.length && j>=i; i++) {  
    sx = sortedInts[i];
    while (sx + sortedInts[j] > Sum)
        j++;
    if (sx + sortedInts[j] == Sum)
        ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:31:45.127

导入 java.util.HashMap；

```
 public class SortedArrayOps {

                public SortedArrayOps() {
                }

            //    Print at the system out the first two ints found in the sorted array: sortedInts[] whose sum is equal to Sum in a single pass over the array sortedInts[] with no 0 value allowed.
            //  i.e. sortedInts[i] + sortedInts[?] = Sum where ? is the target index to be found to complete the task.
            static void PrintIntSumValues(int Sum, int sortedInts[]) {
                HashMap<Integer, Boolean> pool= new HashMap<Integer, Boolean> ();
                for(int i=0; i<sortedInts.length; i++) {
                    int current = sortedInts[i];
                    int target = Sum - current;
                    if (pool.containsKey(target)) {
                        System.out.println(String.format("%d and %d sum to %d", current, target, Sum));
                        break;
                    }
                    else {
                        pool.put(current, Boolean.TRUE);
                    }
                }
            }

            public static void main(String[] args) {
                final int[] sortedArray = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50};
                PrintIntSumValues(48, sortedArray);
            }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T02:49:46.203

这是使用 a 的完整解决方案`HashMap`：

```
import java.util.HashMap;

public class Test
{
    public static void main(String[] args)
    {
        final int[] sortedArray = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        int sum = 6;

        printSum(sum, sortedArray);
    }

    private static void printSum(int sum, int[] sortedArray)
    {
        HashMap<Integer, Integer> map = new HashMap<Integer, Integer>();

        for (int index = 0; index < sortedArray.length; index++)
        {
            int currentNumber = sortedArray[index];
            int remainder = sum - currentNumber;

            if (map.containsKey(remainder))
            {
                System.out.println(String.format("%d + %d = %d", currentNumber, remainder, sum));

                break;
            }
            else
            {
                map.put(currentNumber, index);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-31T04:27:03.327

因为值的数组是特定的，所以解决方案可以简化为，

```
public class SortedArrayOps {
public SortedArrayOps() {

}

// Print at the system out the first two ints found in the sorted array:
// sortedInts[] whose sum is equal to Sum in a single pass over the array
// sortedInts[] with no 0 value allowed.
// i.e. sortedInts[i] + sortedInts[?] = Sum where ? is the target index to
// be found to complete the task.
static void PrintIntSumValues(int Sum, int sortedInts[]) {
    // need to test to see if the Sum value is contained in the array
    // sortedInts. And, if not do nothing.
    for (int i = 0; i < sortedInts.length; i++) {
        // ... do some work: algebra and logic ...
        // System.out.println sortedInts[i]+sortedInts[?] sums to Sum.
        int remainder = Sum - sortedInts[i];
        if( remainder <= sortedInts.length && remainder>0 && remainder!=sortedInts[i]) {
            System.out.print(String.format("%d + %d = %d", sortedInts[i], sortedInts[remainder-1], Sum));
            break;
        }
    }
}

public static void main(String[] args) {
    final int[] sortedArray = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,
            14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29,
            30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45,
            46, 47, 48, 49, 50 };
    PrintIntSumValues(48, sortedArray);
} 
```

}

# sql - 用于对部门名称进行分组的 PL SQL 查询

> ID：11732201
> 
> 赞同：0
> 
> 时间：2012-07-31T02:14:22.253
> 
> 标签：sql, oracle

我是 PL/SQL 的新手，我被困在无法按部门名称对数据进行分组的这一点上。我的查询如下

```
DECLARE
      CURSOR dept_cur IS

      select department_name ,  NVL(employee_name , 'N/A') , NVL(employee.JOB , 'N/A') ,                    NVL(to_char(hire_date, 'DD-MON-YYYY') , 'N/A')
      FROM department FULL OUTER JOIN employee ON department.department_id = employee.department_id 
      order by department_name , employee_name;

      v_department_name department.department_name%TYPE;
      v_employee_name  employee.employee_name%type;
      v_employee_job  employee.job%type;
      v_hire_date  VARCHAR(20);

BEGIN
        OPEN dept_cur;
        fetch dept_cur into v_department_name , v_employee_name , v_employee_job , v_hire_date ;

        IF dept_cur%FOUND THEN
        DBMS_OUTPUT.PUT_LINE('DEPARTMENT_NAME     EMPLOYEE NAME , EMPLOYEE JOB , HIRE DATE');
        DBMS_OUTPUT.PUT_LINE('-----------------------------------------------------');

         WHILE dept_cur%FOUND LOOP
                DBMS_OUTPUT.PUT_LINE(lpad(v_department_name, 11) || lpad(v_employee_name, 16) || lpad(v_employee_job, 22)|| lpad(v_hire_date,15));
                fetch dept_cur into v_department_name , v_employee_name , v_employee_job , v_hire_date ;
      END LOOP;

      ELSE
          DBMS_OUTPUT.PUT_LINE('No output.');
      END IF;

      CLOSE dept_cur;

END; 
```

我希望输出是这样的，但我的查询返回整个列表。

ACCOUNTING 的员工人数为 2

```
EMPLOYEE_NAME           JOB                          HIRE DATE
--------------------------------------------------------------
JONES                   PUBLIC ACCOUNTANT            02-APR-81
STEEL                   PUBLIC ACCOUNTANT            02-MAR-83 
```

其他部门也一样。我了解它在 PL SQL 块逻辑中的微小变化，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:44:01.927

```
DECLARE
    CURSOR dept_cur IS
        SELECT department_name,
            COUNT(employee.employee_id) OVER (PARTITION BY department_name),
            NVL(employee_name, 'N/A'),
            NVL(employee.JOB, 'N/A'),
            NVL(to_char(hire_date, 'DD-MON-YYYY'), 'N/A')
        FROM department
        FULL OUTER JOIN employee ON department.department_id = employee.department_id 
        ORDER BY department_name, employee_name;

    v_department_name    department.department_name%TYPE;
    last_department_name department.department_name%TYPE;
    v_department_count   NUMBER;
    v_employee_name      employee.employee_name%TYPE;
    v_employee_job       employee.job%TYPE;
    v_hire_date          VARCHAR(20);

BEGIN
    OPEN dept_cur;
    FETCH dept_cur INTO v_department_name, v_department_count, v_employee_name, v_employee_job, v_hire_date;
    last_department_name := NULL;

    IF dept_cur%FOUND THEN
        WHILE dept_cur%FOUND LOOP
            IF last_department_name IS NULL OR last_department_name <> v_department_name THEN
                DBMS_OUTPUT.PUT_LINE('The number of employees in ' || v_department_name || ' is ' || to_char(v_department_count));
                DBMS_OUTPUT.PUT_LINE('EMPLOYEE NAME           EMPLOYEE JOB                 HIRE DATE');
                DBMS_OUTPUT.PUT_LINE('--------------------------------------------------------------');
                last_department_name := v_department_name;
            END IF;

            DBMS_OUTPUT.PUT_LINE(rpad(v_employee_name, 24) || rpad(v_employee_job, 24)|| lpad(v_hire_date,14));

            FETCH dept_cur INTO v_department_name, v_department_count, v_employee_name, v_employee_job, v_hire_date;
        END LOOP;
    ELSE
        DBMS_OUTPUT.PUT_LINE('No output.');
    END IF;

    CLOSE dept_cur;
END; 
```

它使用[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm) `COUNT() OVER ()`计算每个部门结果中的员工人数，并将其插入该部门的每一行。

由于查询已经按部门排序，它只检查何时更改为另一个值，然后打印标题。

# android - 将 Chronometer 添加到我的 Activity 会出错

> ID：11732202
> 
> 赞同：0
> 
> 时间：2012-07-31T02:14:33.073
> 
> 标签：android

我为一个游戏制作了一个活动，它将根据所需部分选择图像。但是当我添加计时器来控制我的活动时间时，它会出错并强制关闭活动。但是在我的代码中，当我添加计时器代码时没有错误。在我的 Logcat 上，它说：“未捕获的处理程序：线程主因未捕获的异常而退出”以及 Logcat 上的更多错误。这是我的代码，请帮助我找到问题，提前谢谢！

```
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.Chronometer;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.TextView;

public class Maingame extends Activity {
    private Gallery gallery;
    Chronometer mChronometer;

    @Override
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.maingame);

    Button button;
    mChronometer = (Chronometer) findViewById(R.id.time);
    // Watch for button clicks.
    button = (Button) findViewById(R.id.start);
    button.setOnClickListener(mStartListener);

    }

View.OnClickListener mStartListener = new OnClickListener() {
    public void onClick(View v) {
        mChronometer.start();
    }
};

{

    gallery = (Gallery) findViewById(R.id.examplegallery);
    gallery.setAdapter(new AddImgAdp(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView parent, View v, int position, long id) {
    // Displaying the position when the gallery item in clicked
        if (position == 0) {
            //Toast.makeText(Maingame.this, "heart", Toast.LENGTH_SHORT).show();
            TextView select = (TextView) findViewById(R.id.txt1);
              select.setText("heart"); 

        } else if (position == 1) {
            //Toast.makeText(Maingame.this, "lungs", Toast.LENGTH_SHORT).show();
            TextView select = (TextView) findViewById(R.id.txt2);
              select.setText("lungs");
        } else if (position == 2) {
            //Toast.makeText(Maingame.this, "brain", Toast.LENGTH_SHORT).show();
            TextView select = (TextView) findViewById(R.id.txt3);
              select.setText("brain");

        }
    }
    });
    Button clear = (Button)findViewById(R.id.clear);
    clear.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            ((TextView) findViewById(R.id.txt1)).setText("");
            ((TextView) findViewById(R.id.txt2)).setText("");
            ((TextView) findViewById(R.id.txt3)).setText("");
        }
    });
    Button pause = (Button)findViewById(R.id.pause);
    pause.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v) {
            moveTaskToBack(true);
        }

    });

    }

    public class AddImgAdp extends BaseAdapter {
    int GalItemBg;
    private Context cont;

    // Adding images.
    private Integer[] Imgid = {
    R.drawable.bladder, R.drawable.kidney, R.drawable.largeintestine, R.drawable.liver, R.drawable.lungs, R.drawable.stomach
    };

    public AddImgAdp(Context c) {
    cont = c;
    TypedArray typArray = obtainStyledAttributes(R.styleable.BodyPartsGame);
    GalItemBg = typArray.getResourceId(R.styleable.BodyPartsGame_android_galleryItemBackground, 0);
    typArray.recycle();
    }

    public int getCount() {
    return Imgid.length;
    }

    public Object getItem(int position) {
    return position;
    }

    public long getItemId(int position) {
    return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imgView = new ImageView(cont);

    imgView.setImageResource(Imgid[position]);
    // Fixing width & height for image to display
    imgView.setLayoutParams(new Gallery.LayoutParams(80, 70));
    imgView.setScaleType(ImageView.ScaleType.FIT_XY);
    imgView.setBackgroundResource(GalItemBg);

    return imgView;
    }
    }
    } 
```

这是我的 LogCat：

```
07-31 02:05:55.150: E/AndroidRuntime(224): Uncaught handler: thread main exiting due to uncaught exception
07-31 02:05:55.180: E/AndroidRuntime(224): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{drj.thesis.tridi/drj.thesis.tridi.Maingame}: java.lang.NullPointerException
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.os.Looper.loop(Looper.java:123)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-31 02:05:55.180: E/AndroidRuntime(224):  at java.lang.reflect.Method.invokeNative(Native Method)
07-31 02:05:55.180: E/AndroidRuntime(224):  at java.lang.reflect.Method.invoke(Method.java:521)
07-31 02:05:55.180: E/AndroidRuntime(224):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-31 02:05:55.180: E/AndroidRuntime(224):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-31 02:05:55.180: E/AndroidRuntime(224):  at dalvik.system.NativeStart.main(Native Method)
07-31 02:05:55.180: E/AndroidRuntime(224): Caused by: java.lang.NullPointerException
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.Activity.findViewById(Activity.java:1612)
07-31 02:05:55.180: E/AndroidRuntime(224):  at drj.thesis.tridi.Maingame.<init>(Maingame.java:49)
07-31 02:05:55.180: E/AndroidRuntime(224):  at java.lang.Class.newInstanceImpl(Native Method)
07-31 02:05:55.180: E/AndroidRuntime(224):  at java.lang.Class.newInstance(Class.java:1479)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-31 02:05:55.180: E/AndroidRuntime(224):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
07-31 02:05:55.180: E/AndroidRuntime(224):  ... 11 more 
```

这是我的 maingame.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout android:id="@+id/LinearLayout01"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android" android:background="@drawable/palybg">

    <LinearLayout
        android:layout_width="70dp"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:gravity="bottom"
        android:orientation="vertical" android:layout_marginTop="10dp">

        <Chronometer
            android:id="@+id/time"
            android:layout_width="50dp"
            android:layout_height="25dp"
            android:layout_gravity="center" android:textColor="#000000" android:layout_marginTop="10dp"/>

        <Button
            android:id="@+id/start"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Start" android:layout_gravity="center"/>

        <Button
            android:id="@+id/button1"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="center" android:background="@drawable/finishbtn"/>

        <Button
            android:id="@+id/pause"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="center" android:background="@drawable/pause"/>
         <Button
            android:id="@+id/clear"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_gravity="center" android:background="@drawable/clear"/>

<TextView
        android:id="@+id/txt1"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>
<TextView
        android:id="@+id/txt2"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>
<TextView
        android:id="@+id/txt3"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>

    <TextView
        android:id="@+id/txt1"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>
<TextView
        android:id="@+id/txt2"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>
<TextView
        android:id="@+id/txt3"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>

<TextView
        android:id="@+id/txt1"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>
<TextView
        android:id="@+id/txt2"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>
<TextView
        android:id="@+id/txt3"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>
    <TextView
        android:id="@+id/txt1"
        android:background="@drawable/rack"
        android:layout_width="65dp"
        android:gravity="center"
        android:layout_height="25dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:textColor="#000000" android:textStyle="bold" android:typeface="sans"/>

    </LinearLayout>

    <Gallery
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/examplegallery"
        android:layout_width="242dp"
        android:layout_height="wrap_content"
        android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:12:19.913

可能是这个部分的问题

```
gallery.setOnItemClickListener(new OnItemClickListener() {

public void onItemClick(AdapterView parent, View v, int position, long id) {
// Displaying the position when the gallery item in clicked
    if (position == 0) {
        //Toast.makeText(Maingame.this, "heart", Toast.LENGTH_SHORT).show();
        TextView select = (TextView) findViewById(R.id.txt1);
          select.setText("heart"); 

    } else if (position == 1) {
        //Toast.makeText(Maingame.this, "lungs", Toast.LENGTH_SHORT).show();
        TextView select = (TextView) findViewById(R.id.txt2);
          select.setText("lungs");
    } else if (position == 2) {
        //Toast.makeText(Maingame.this, "brain", Toast.LENGTH_SHORT).show();
        TextView select = (TextView) findViewById(R.id.txt3);
          select.setText("brain");

    }
}
}); 
```

`txt1,txt2,txt3`我`maingame.xml`猜`your textViews`你`OnCreate`在哪里`onItemClick`？

# openlayers - MapQuest - OSM 大陆样式

> ID：11732211
> 
> 赞同：0
> 
> 时间：2012-07-31T02:16:25.260
> 
> 标签：openlayers, tiles, styling, openstreetmap, mapquest

我正在尝试自定义 MapQuest 的样式，但我不知道如何，

我阅读了 MapQuest 的文章和开发人员文档

我也尝试制作自定义图块，但问题是我没有网络服务器来提供新图块

我只想改变大洲的颜色

你能给我提供任何文章、教程或代码吗

我知道我应该添加我尝试过的代码，但我尝试了很多东西，而且我对 OSM 和 MapQuest 还很陌生，所以帮助我编写代码会让你筋疲力尽，而不是为我提供我之前问过的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:01:14.900

[Mapnik 样式文件](http://developer.mapquest.com/web/products/open/map/style)可供希望基于自定义 MapQuest-OSM 样式生成和托管自己的图块的用户使用，但遗憾的是，无法调用自定义 MapQuest 托管的 OSM 图块上的颜色。

您还可以在[MapQuest 开发者网络论坛](http://developer.mapquest.com/web/info/forums)上提供反馈和建议样式更改。论坛也是询问有关[Open MapQuest API 和 Web 服务](http://developer.mapquest.com/web/products/open)问题的好地方。

# ruby - 更改设计中的布局

> ID：11732214
> 
> 赞同：0
> 
> 时间：2012-07-31T02:16:48.830
> 
> 标签：ruby, ruby-on-rails-3, devise

我有两种布局

```
 layouts/application.html.erb
 layouts/profiles.html.erb 
```

控制器：

```
 class ProfilesController < Devise::RegistrationsController
 end 
```

现在我只想`profiles layout`用于`ProfilesController`所有其他`devise controllers`应该使用的`application layout`，但我`Devise::RegistrationsController`目前`profiles layout`默认使用。我该如何改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:38:08.823

它[记录在项目页面](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-custom-layouts)中。我希望它有所帮助。

更新

在您当前的项目中，您说`RegistrationController`正在使用`profiles`布局。这显然是在项目中的某个位置手动设置的，因为它不是默认布局。只需在您的项目中搜索设置并更改它。

# jquery - jquery alter submit on way to server

> ID：11732220
> 
> 赞同：0
> 
> 时间：2012-07-31T02:17:40.160
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.2

我在一个表单上有两个字段，它们都是在页面加载时具有相同值的输入框，一个是隐藏的。

当用户点击提交时，我想检查这些框，如果值没有不同，我想将可见框的值设置为“”（空字符串）。

这是我的代码（它正在迭代一组输入，但基础是我所描述的）

```
$(".edit_functional_area").submit(function() {        
    $(".value_shown").each(function(i, obj) {
        var hidden_obj = $(this).next();
        if (hidden_obj.val() == $(this).val() && $(this).val() != "") {
            alert($(this).val());

            $(this).val("");

            alert($(this).val());
        }
    });
}); 
```

从视觉上看，该字段实际上已被清空，但在服务器上，在我的控制器中（这是在 rails 应用程序中），参数通过时仍然设置了值。

我想要的是，该值在传入服务器的参数中为空白，因此我的模型在不需要时不会将值添加到数据库中。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:54:27.083

终于让这个工作了。

删除了隐藏字段，因为我创建它的方式导致了 html 中的 ID 冲突。相反，我在输入框中使用了数据属性来设置旧值并使用它在 jquery 中进行比较。

还必须更改更改元素值的命令以使用 attr(field, value) 而不是 val(value) 进行更改。

```
$(".edit_functional_area").submit(function(event) {
    $(".value_shown").each(function(i, obj) {
        var data = $(this).attr('data');
        if (parseFloat(data) == parseFloat($(this).val()) && $(this).val() != '') {
            $(this).attr('value', '');
        }
    });
}); 
```

感谢您的建议！最大限度

# php - 非常基本的 JSON 到 tableView (iOS)

> ID：11732224
> 
> 赞同：0
> 
> 时间：2012-07-31T02:18:16.853
> 
> 标签：php, objective-c, json, uitableview, jsonkit

好吧，我决定是时候学习一项新技能了，编程objective-c。我的编程知识非常少，它由 PHP、一点点 HTML 和一点点 MySQL 组成。我想要做的是获取一些用 php 制作的 JSON 并填充 iOS 表格视图。

这是我的 json.php：

```
<?php
$array = array(1,2,3,4,5,6,7,8,9,10);
$json = json_encode($array);
echo $json;
?> 
```

我唯一的问题是，我不知道从哪里开始使用 JSONKit 框架。[https://github.com/johnezang/JSONKit/](https://github.com/johnezang/JSONKit/) 我更喜欢使用 JSONKit 而不是其他替代品，因为它似乎有更多的支持。

```
NSString *strURL = [NSString stringWithFormat:@"http://api.tekop.net/json.php"];
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];
NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];
NSLog(@"%@", strResult); 
```

我能够在调试控制台中打印 JSON 页面的结果。现在我唯一的问题是下一步是什么？我试图在网上寻找一些教程，但我能找到的只是更高级的 Jason 短语。为了满足我的基本需求。我知道我的问题非常模糊，并且对很多不同的答案持开放态度，但我认为这是提出这类问题的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:53:45.097

iOS 有自己的 JSON 解析，现在称为 NSJSONSerialization。

[http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

你可以看看。我总是这样使用它。

```
[NSJSONSerialization JSONObjectWithData:tmpData
                                       options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments 
                                         error:nil] 
```

通过修改代码进行示例：

```
NSString *strURL = [NSString stringWithFormat:@"http://api.tekop.net/json.php"];
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];
NSArray *arrayResult = [NSJSONSerialization JSONObjectWithData:dataURL
                                       options:NSJSONReadingMutableContainers|NSJSONReadingAllowFragments 
                                         error:nil];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding]; 
```

需要注意的是，如果您的 json 是基于数组的，请使用 NSArray 来存储结果。如果您的 json 是基于哈希的，请使用 NSDictionary。（希望我说清楚，我不知道相关的术语来描述）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:00:35.573

你试过什么？

```
NSArray *array = [dataURL objectFromJSONData];
NSAssert([array isKindOfClass:[NSArray class]], @"This should be an array.");

for (NSNumber *value in array) {
    NSAssert([value isKindOfClass:[NSNumber class]], @"This should be a number.");

    NSLog(@"%@", value);
} 
```

# html - 尽管使用了表格和表格单元格，但图像未垂直居中

> ID：11732225
> 
> 赞同：0
> 
> 时间：2012-07-31T02:18:17.317
> 
> 标签：html, css

我尝试`display: table`在父 div 和`display: table-cell`子 div 中使用，如此处所示[，](http://jsfiddle.net/ENGQG/)但我似乎无法使图像垂直对齐。我究竟做错了什么？

这是我的代码：

HTML：

```
<div class="body_splash">
<img src="https://upload.wikimedia.org/wikipedia/
commons/thumb/a/a3/Cc.logo.circle.svg/64px-Cc.logo.circle.svg.png"/> 
</div>​ 
```

CSS：

```
.body_splash {
    width: 378px;
    float: left;
    display:table;
    height: 400px;
    background-color: #eaeaea;
}
.body_splash img {
    display: table-cell;
    vertical-align: middle;
}​ 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:23:00.930

***尝试[演示](http://jsfiddle.net/SjLSz/1/)***

```
<div class="table">
  <div>
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Cc.logo.circle.svg/64px-Cc.logo.circle.svg.png"/> 
  </div>
</div>​

.table {
  display: table;
  float: left;
  width: 378px;
  height: 400px;
  background-color: #eaeaea;
}

.table > div {
    display: table-cell;
    vertical-align: middle;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:46:36.953

如果盒子是固定大小的，请使用：[Demo 1](http://jsfiddle.net/ENGQG/2/)。

它将图像绝对定位在框内。

还要看看这些：

[演示 2](http://jsfiddle.net/ENGQG/3/)

[演示 3](http://jsfiddle.net/ENGQG/4/)

# iphone - iAd 仍会显示测试广告

> ID：11732233
> 
> 赞同：1
> 
> 时间：2012-07-31T02:20:00.967
> 
> 标签：iphone, ios, xcode

我刚刚通过 iAds 将一个应用程序发布到应用程序商店，但是该应用程序仍然只显示测试广告。但问题是它在itunesconnect上说“直播”。我的广告有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:47:02.690

您的设备上有 iOS 6 的开发者预览版吗？这可能总是一个潜在的问题，导致您看到 iAd 测试广告。

# java - 需要更合乎逻辑的答案来回答“为什么 Java 没有多重继承”

> ID：11732238
> 
> 赞同：3
> 
> 时间：2012-07-31T02:20:31.437
> 
> 标签：java

> **可能重复：**
> [为什么Java中没有多重继承，但允许实现多个接口](https://stackoverflow.com/questions/2515477/why-there-is-no-multiple-inheritance-in-java-but-implementing-multiple-interfac)

到目前为止，我所看到的关于“为什么 Java 没有多重继承”的每个答案都只有一个更具体或更详细的答案，即“降低复杂性”，但没有人定义它如何降低复杂性，如果我们使用接口而不是类什么它产生的差异。难道不是一回事吗？如果我们实现一个接口而不扩展我们的类有什么区别？有人回答钻石问题，但接口也可以产生钻石问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T02:34:00.123

接口与类之间的多重继承之间的区别在于何时必须继承实现。通过多条路径继承方法接口时，可以说实现类必须实现继承的方法。当您从多个类继承时，您必须决定选择几个*实现*中的哪一个。这极大地增加了语言的复杂性，正如您通过检查 C++ 中实现多重继承的方式所看到的那样。

这是一个插图：

```
public class Base {
    public void foo() {System.out.println("base");}
}
public class A extends Base {
    public void foo() {System.out.println("a");}
}
public class B extends Base {
    public void foo() {System.out.println("b");}
}
public class AB extends A, B /* imagine that it's a possibility */{
} 
```

当你这样做时会发生什么？

```
AB ab = new AB();
ab.foo(); 
```

有了接口的继承，`AB`就必须实现`foo`；通过实现的继承，语言将需要决定或为您提供一种自己指定它的方法。无论哪种方式，复杂性都会增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T02:32:30.690

接口不附带代码：只有一组必须实现的方法。

类带有代码。当你遇到类的菱形问题时，你最终会得到同一个函数的两个*实现*，它们可能引用*相同*的变量。

对于接口，只有一种实现，尽管接口可以来自很多地方。

# tsql - 使用 T-SQL 从 txt 文件中读取内容

> ID：11732241
> 
> 赞同：-1
> 
> 时间：2012-07-31T02:20:44.287
> 
> 标签：tsql

> **可能重复：**
> [SQL Server 文件操作？](https://stackoverflow.com/questions/1302099/sql-server-file-operations)

有没有机会我可以使用 T-SQL 来读取 txt 文件的第一行？实际上，我有一个 csv 文件，第一行是所有数百列的名称。我已经编写了可以使用第一行生成包含所有列的表的部分。所以，真的很想弄清楚如何做阅读部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:47:58.987

您可以查看[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365.aspx)语句。

# ios - 触发旋转事件的加速度计和/或陀螺仪的物理值是多少？

> ID：11732246
> 
> 赞同：1
> 
> 时间：2012-07-31T02:21:05.330
> 
> 标签：ios, mobile, accelerometer, gyroscope, device-orientation

我试图弄清楚 iMobileDevice 如何知道何时旋转视口。我的预感是它与加速度计有关，因为视口的旋转似乎取决于它与重力的线性关系（而不是它相对于自身的旋转关系）。

我使用 iPad 的AccelerationIncludivinGravity 属性对此做了一些粗略的探索，发现x、y 和z 的[portrait -> landscape] 值与x、y 和z 的[landscape -> portrait] 值不同。

在我最初的测试中，我发现纵向到横向的旋转事件发生在 (x,y,z) = (8.5, 6.8, 0)，横向到纵向的旋转事件发生在 (x,y,z) = (4.5, 6.8, 0)。

然而，我意识到，系统地继续这个测试是困难的、不可靠的和耗时的，而且由于设备似乎始终知道何时旋转视口，所以有程序员也知道这一点是有道理的。

你们谁能告诉我iMobileDevice知道何时旋转视口的方法，例如，如果有一个方程（或表格或其他什么）考虑到方向和加速度包括重力值，或者它是否完全是别的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:02:25.137

这不是一个完整的答案，但我确实开发了一个记录旋转数据的测试，并想在此处发布（对收集的数据进行一般分析），以便其他人可以想出更好的方法来测试它或分析数据，欢迎他们参与。

对于测试，我将以下 javascript 代码放在一个 <script> 标记内，该标记位于一个框架 HTML 文档中：

```
var ax, ay, az;

window.addEventListener("devicemotion", function(e) { // DO NOT PUT ALERTS IN THIS LISTENER BLOCK!!
   ax = e.accelerationIncludingGravity.x;
   ay = e.accelerationIncludingGravity.y;
   az = e.accelerationIncludingGravity.z;
}, false);

window.addEventListener("orientationchange", function() {
   orient = Math.abs(parseInt(window.orientation)); // returns positive integer value of device orientation
   // It's worth noting that on an iPad, the orientationchange event does not
   // fire until after the rotation has already taken place, so a value of 0 or 
   // 180 corresponds to the accelerometer values for a Landscape-Portrait
   // rotation, while a value of 90 corresponds to the accelerometer values for
   // a Portrait-Landscape rotation event.
   ax = Math.abs(ax);
   ay = Math.abs(ay);
   az = Math.abs(az);
   //I put an ajax call here that sends orient, ax, ay and az as $_POST data to a PHP document
}, false); 
```

这是该 PHP 文档中的相关 PHP 代码：

```
<?php
//I stored my $_POST variables as $orient, $ax, $ay, and $az for consistency
$XYangle = rad2deg(atan($ay/$ax));
$XZangle = rad2deg(atan($az/$ax));
$YZangle = rad2deg(atan($az/$ay));

//tab-delimit the data and enter it into a .txt file that can be imported into Excel for "easy" reading and sorting
$string = $orient."\t".$ax."\t".$ay."\t".$az."\t".$XYangle."\t".$XZangle."\t".$YZangle."\n";

//Open file and write $string to file
?> 
```

设置好之后，我拿起 iPad，在我能想到的尽可能多的方向（相对于重力）上缓慢旋转了数百次。然后，我将记录的数据导入 Excel 文件，并以各种方式对其进行排序，直到开始出现趋势。

你问这些趋势是什么？我的分析是初步的，并不一定能解释在我看来像异常值的东西，但它看起来像：

仅当 XYangle < 28 时才会发生纵向-横向旋转事件。但是，随着 az 值的增加（您将 iPad 相对于地面变平），看起来 XYangle 必须减小。似乎 az 越接近 9.8，旋转事件就越难以预测。

仅当 XYangle > 45 时才会发生 Landscape-Portrait 旋转事件。同样，随着 az 值的增加，XYangle 也必须增加。此外，随着 az 接近 9.8，旋转事件变得难以预测。

我希望这可以为某人提供更好的测试和更好的分析的良好起点。我打算在 iOS 旋转错误修复中使用这些数据，类似于 Scott Jehl 在这里所做的：[https](https://github.com/scottjehl/iOS-Orientationchange-Fix) ://github.com/scottjehl/iOS-Orientationchange-Fix ，到目前为止我已经很好地使用了它，但它仍然不是一个非常干净的解决方案，尤其是当用户将移动设备展平时。

我希望我的分析遗漏了一些东西，一个更细心的人可以用来微调轮换事件的可预测性。

# iphone - 提交之前 iphone 应用商店链接不起作用

> ID：11732250
> 
> 赞同：0
> 
> 时间：2012-07-31T02:22:33.840
> 
> 标签：iphone, hyperlink, app-store, itunes, app-store-connect

在查看了关于如何创建链接以在 App Store 中打开您的应用程序的十几篇或更多帖子后，它们都没有奏效（大多数来自 '09-'10）。

其中许多帖子甚至说它应该在提交您的应用程序之前工作，只要您在 iTunesConnect 中制作了应用程序，并在那里复制应用程序 ID。

当我在 ITC 中尝试“在 App Store 中查看”链接时，它显示：“您请求的项目目前在美国商店中不可用。”

我的应用程序二进制文件尚未提交，此时是否可以测试此链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:48:05.140

您无法在 iTunes 商店中查看尚未批准的应用程序。这意味着在应用程序完成审核过程之前，这些链接将无法使用。应用商店链接的 URL 应如下所示：

[http://itunes.apple.com/us/app/YOUR-APP-NAME/idNUMBEROFYOURAPPHERE?ls=1&mt=8](http://itunes.apple.com/us/app/YOUR-APP-NAME/idNUMBEROFYOURAPPHERE?ls=1&mt=8)

您可以在 iTunes Connect 的“管理应用程序”链接中获取应用程序编号。这种技术对我来说还没有失败。

希望这可以帮助！

# javascript - 如何使用 jquery 根据 url 中的关键字更改 css 类

> ID：11732260
> 
> 赞同：0
> 
> 时间：2012-07-31T02:24:42.417
> 
> 标签：javascript, jquery, html, ajax

我有如下导航栏

```
<ul>
  <li class="selected"><a href=">My Profile</a></li>
  <li><a href="">xxxx</a></li>
  <li><a href="">mybook</a></li>
  <li><a href="">Photos <span>4</span></a></li>
  <li><a href="">Profile List</a></li>
</ul> 
```

我希望如果 url 是 `www.abc.com/user/profile`然后配置文件选项卡类应该选择附加的类

如果照片然后照片选项卡。

如果我们可以进行部分匹配，那会很好，但我不确定这是否可能

就像我拥有并被选中的`/user/book`网址`myBook`一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:35:46.363

Some elegant variant:

```
<ul class="menu">
  <li><a class="profile" href="/user/profile">My Profile</a></li>
  <li><a class="book" href="/user/book">My Book</a></li>
</ul>

$(document).ready(function () {
  var page = document.location.href.split('/').slice(-1)[0];
  $('.menu .' + page).addClass('selected');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:27:49.657

您会想要关闭`location.pathname`. 假设你给了`<ul>`一个类`nav`：

```
$(function () {
    if (location.pathname.search("/user/profile") != -1) {
        // page is /user/profile
        $("#nav li").eq(0).addClass("selected");
    } else if (location.pathname.search("/user/photos") != -1) {
        // page is some/thing
        $("#nav li").eq(3).addClass("selected");
    }
    ... etc
}); 
```

**注意事项**

*   我们使用`$(function () {...});`而不是`$(document).ready(function() {...});`. 打字更少，效率更高

*   我们使用`String.search()`，它返回字符串出现的*索引。*`"/user/profile"`如果没有找到该字符串，`String.search()`将返回-1，如果是`!= -1`，则它存在。

*   We also use `jQuery.eq( index )` this treats elements selected by a jQuery selector as an array and returns the element of the specified index.

**References**

Check out jQuery's `.eq` [here](http://api.jquery.com/eq/), and JavaScript's `String.search` [here](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/search)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:29:29.783

You can grab the part you want with regex:

```
var userPage = /user\/(.+)/.exec(location.href)[1]; 
```

That will give you the part after `user/`. Then you could use a `switch` statement:

```
switch (userPage) {
  case 'profile':
    ...
    break;
  case 'book':
    ...
    break;
} 
```

# permissions - 更改主机和 vhost.conf 文件 (lion) 破坏了 localhost

> ID：11732269
> 
> 赞同：0
> 
> 时间：2012-07-31T02:26:52.127
> 
> 标签：permissions, apache2, osx-lion, localhost, vhosts

我正在使用 OSX 本地 Web 服务器，今天我需要设置一个虚拟主机。这样做之后，在浏览器中访问 localhost 会挂起。127.0.0.1 表示权限被拒绝。即使在我将更改还原为我在 etc/ 下创建的文件之后。奇怪的是，当我检查我的网络共享时，它说可以通过 { someone-else's-computer.local/~my comp name } 访问网络服务器。其他人是和我在同一个路由器上的人。当我断开我的wifi时，它说可以通过我的计算机名访问它。我不知道发生了什么事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:51:53.007

我在第一次编辑它或使用 TextMate 将其保存时搞砸了文件时发现了一些关于我所做的事情。我备份了hosts文件，复制了hosts-original，将其重命名为hosts，然后选择了所有并将联系人粘贴回去。所以基本上内容没有改变，但是这次我把它保存在text wrangler之外，而且很神奇！有效。电脑有时很烦人。

# executable - 7zip 自解压 exe“解压到”文件夹名称中的空格问题

> ID：11732271
> 
> 赞同：1
> 
> 时间：2012-07-31T02:27:10.347
> 
> 标签：executable, 7zip, self-extracting

几年来，我们一直在使用 7zip 压缩我们的软件包以创建一个自解压可执行文件。我们的默认值`InstallPath`是没有空格的路径，例如`C:\Install\Downloads`，这很好用。但是，当路径更改为文件夹名称中带有空格的自定义位置时，例如`C:\my temp folder\Downloads`，提取仍然会成功，但无法找到可执行文件并且无法运行。

弹出的错误信息是***执行期间出错“C:\my temp folder\Downloads\foo\setup.exe”。该系统找不到指定的文件。***如果您打开它所指的文件夹位置，setup.exe 文件肯定在那里。`RunProgram`无论启动配置文件变量中指定的可执行文件，自定义文件位置中的空格似乎都令人困惑。

我们的配置文件：

```
;!@Install@!UTF-8!
Title="FOO PACKAGE NAME"
CancelPrompt="Are you sure you want to cancel?"
FinishMessage="Files were successfully extracted"
GUIFlags="8+128"
OverwriteMode="0"
InstallPath="C:\\Install\\Downloads"
ExtractPathText="Select extraction path"
ExtractPathTitle="FOO TITLE"
ExtractCancelText="Abort"
RunProgram="%%T\foo\setup.exe"
;!@InstallEnd@! 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:44:25.163

我想到了。如果 RunProgram 变量包含在一组双引号中，则它适用于带或不带空格的文件路径。

```
RunProgram="\"%%T\foo\setup.exe\"" 
```

# admin - 在此服务器上找不到 http://localhost:82/xxx/admin1/in1/ (prestashop)

> ID：11732273
> 
> 赞同：0
> 
> 时间：2012-07-31T02:27:30.780
> 
> 标签：admin, prestashop

因为我在笔记本电脑上配置了 IIS，所以我无法访问 prestashop 后台。我不知道为什么在 URL 的末尾有“in1”。此文件夹在 admin 文件夹中不存在。怎么解决？

谢谢

# linux - 如何将 mv 反转为文件 - Unix

> ID：11732275
> 
> 赞同：0
> 
> 时间：2012-07-31T02:28:03.910
> 
> 标签：linux, macos, bash, unix

我不小心按照下面的方法运行了一个 find 和 mv 命令，将一些具有特定扩展名的文件移动到一个目录中。不幸的是，时间还早，我累了，我没有在结尾加上斜线，所有的 .ext 文件都消失了，我只剩下一个名为“file”的文件，没有扩展名。

```
 find /folder -iname "*.zip" -exec mv {} /home/zip \; 
```

问题是：如何从这个“文件”中反转或提取我的 .zip 文件

我试图用存档器、猫、尾巴、头打开，它只是二进制输出，存档器无法提取

注意：我在 Imac 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:46:28.053

你基本上是用你的发现做到了这一点：

```
mv a.zip /home/zip
mv b.zip /home/zip
mv c.zip /home/zip 
```

并且`/home/zip`不是预先存在的目录。所以这些只是常规的文件重命名。每一个都覆盖前一个。除了最后一个文件之外的所有文件都死了。`rm`'ed，有效地。

您应该能够重命名`/home/zip`为更合理的名称`foo.zip`并解压缩以获取最后一个 zip 文件的内容。其他人将需要更多的工作。

您可能也对[这个关于取消删除的超级用户问题感兴趣](https://superuser.com/questions/107396/is-there-any-free-undelete-software-for-the-mac)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:49:37.997

你的命令：

```
find /folder -iname "*.zip" -exec mv {} /home/zip \; 
```

如果 /home/zip**不是**一个目录，那么你所有的 zip 都消失了 :( 除了最后一个

尝试快速卸载磁盘，并使用 sleuthkit (testdisk) 等外部工具来恢复`mv`-ed 文件

# javascript - 删除href的一部分

> ID：11732281
> 
> 赞同：0
> 
> 时间：2012-07-31T02:28:41.883
> 
> 标签：javascript, inline, href

我有这样的链接

```
myaccount.php?posted=true&save=true 
```

我想`save=true`在点击另一个链接时删除，所以剩下的将是

```
myaccount.php?posted=true 
```

注意`myaccount.php?posted=true&save=true`不能放任何`#`

`save=true`并且不能加载需要删除的链接，因为我正在运行 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:32:29.077

对于像这样的锚：

```
<a id="yourId" href="myaccount.php?posted=true&save=true">Your link</a> 
```

您可以使用以下 javascript：

```
var link = document.getElementById('yourId');
link.href = link.href.replace(/&save=true/, ''); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-31T02:33:05.283

如果您使用的是 jQuery：

```
$('anchor-to-click').click(function(e){
    e.preventDefalut(); //stop page loading
    this.href = this.href.replace(/&?save=true/, "");
}); 
```

# c++ - C++ LINK2001 错误

> ID：11732284
> 
> 赞同：1
> 
> 时间：2012-07-31T02:29:04.380
> 
> 标签：c++, linker, compiler-errors, project

对于我的项目可能出现的问题，我非常感谢一些建议。

我正在尝试编译我的项目，但出现以下错误：

```
phoneBook.obj : error LNK2001: unresolved external symbol "private: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * phoneBook::lastName" (?lastName@phoneBook@@0PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A)
phoneBook.obj : error LNK2001: unresolved external symbol "private: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > * phoneBook::firstName" (?firstName@phoneBook@@0PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A)
phoneBook.obj : error LNK2001: unresolved external symbol "private: static int * phoneBook::phone" (?phone@phoneBook@@0PAHA)
phoneBook.obj : error LNK2001: unresolved external symbol "private: static char (* phoneBook::dateOfBirth)[10]" (?dateOfBirth@phoneBook@@0PAY09DA) 
```

这是头文件：

```
//phoneBook.h header file
#ifndef PHONEBOOK_H
#define PHONEBOOK_H
#include <string>
using namespace std;

class phoneBook
{
public:
 phoneBook();                                   //default constructor
 phoneBook(string lastN[], string firstN[], 
            int phoneNumber[], char date[][10]);        //overloaded constructor
 void setLastName(string lastN, int idNum);     //sets last name for a given ID number,
                                                //-IDs range from 1 to 50
 void setFirstName(string firstN, int idNum);   //sets first name for a given ID number
 void setPhoneNumber(int phoneNum, int idNum);  //sets the phone number for a given ID number
 void setDate(char dateOB[], int idNum);            //sets the date of birth for a given ID number
 void loadFromFile(char fileName[]);                //loads phone book data from a local file
 int getPhoneNumber(string lastN, string firstN);//returns phone number for particular person
 void getDOB(string lastN, string firstN, char testDOB[]);  //sets date of birth for a particular person to testDOB array
 void printPhone_DOB(string lastN, string firstN);  //print phone number and date of birth
                                                    //-for a given person
 void printNamesForDOB(char month[]);           //print names of people with birthdays on given numeric month
 void saveData();                               //save data back to the local file
private:
 string filename;
 static string lastName[50];
 static string firstName[50];
 static int phone[50];
 static char dateOfBirth[50][10];
};
#endif 
```

实现文件：

```
//phoneBook.cpp implementation file
#include "phoneBook.h"
#include <iostream>
#include <string>
#include <fstream>
using namespace std;

//default constructor
phoneBook::phoneBook()
{
//declare variables
int i, j;
string lastName[50];
string firstName[50];
int phone[50];
char dateOfBirth[50][10];

//set variables to zero/null
filename = "";
for(i=0; i<50; i++)
{
    lastName[i] = "";
    firstName[i] = "";
    phone[i] = 0;

    //set date to zero, in format 00/00/0000
    for(j=0; j<10; j++)
    {
        dateOfBirth[i][j] = '0';
        if(j==2 || j==5)
            dateOfBirth[i][j] = '/';
    }
}
}

//overloaded constructor
phoneBook::phoneBook(std::string lastN[], std::string firstN[], int phoneNumber[], char date[][10])
{
//declare variables
int i, j;
string lastName[50];
string firstName[50];
int phone[50];
char dateOfBirth[50][10];

//set variables to zero/null
filename = "";
for(i=0; i<50; i++)
{
    lastName[i] = lastN[i];
    firstName[i] = firstN[i];
    phone[i] = phoneNumber[i];
    for(j=0; j<10; j++)
        dateOfBirth[i][j] = date[i][j];
}
}

//setLastName function, sets the last name for a given ID number
void phoneBook::setLastName(string lastN, int idNum)
{
lastName[idNum-1] = lastN;
}

//setFirstName function, sets the first name for a given ID number
void phoneBook::setFirstName(string firstN, int idNum)
{
firstName[idNum-1] = firstN;
}

//setPhoneNumber function, sets the phone number for a given ID number
void phoneBook::setPhoneNumber(int phoneNum, int idNum)
{
phone[idNum-1] = phoneNum;
}

//setDate function, sets the date of birth for a given ID number
void phoneBook::setDate(char dateOB[], int idNum)
{
//declare variables
int i;

//set DOB
for(i=0; i<10; i++)
    dateOfBirth[idNum][i] = dateOB[i];
}

//loadFromFile function, loads phone book data from a local file
void phoneBook::loadFromFile(char fileName[])
{
/*
**Assuming the following data in the text file:
**LastName FirstName PhoneNumber DateOfBirth
**(repeating 50 times)
*/
//setting local variable
filename = fileName;

//declaring variables
int i, j;

//opening file
ifstream file (filename.c_str());

//getting the data and copying it to local variables
while( file.good() )
{
    for(i=0; i<50; i++)
    {
        file >> lastName[i];
        file >> firstName[i];
        file >> phone[i];
        for(j=0; j<10; j++)
            file >> dateOfBirth[i][j];
        file.ignore(100, '\n');
    }
}

//closing file
file.close();
}

//getPhoneNumber function, returns phone number for particular person
int phoneBook::getPhoneNumber(string lastN, string firstN)
{
//declaring variables
int i;
int index;
int phoneNum;

//finding matching first name, last name and its index
for(i=0; i<50; i++)
{
    if(lastName[i] == lastN && firstName[i] == firstN)
        index = i;
}

//returning phone number for matching name
phoneNum = phone[index];
return phoneNum;
}

//getDOB function, returns date of birth for a particular person
void phoneBook::getDOB(std::string lastN, std::string firstN, char testDOB[])
{
//declaring variables
int i;
int index;

//finding matching first name, last name and its index
for(i=0; i<50; i++)
{
    if(lastName[i] == lastN && firstName[i] == firstN)
        index = i;
}

//sets the char array which was passed by reference to the date
//of birth of the matched index
for(i=0; i<11; i++)
    testDOB[i] = dateOfBirth[index][i];
 }

//printPhone_DOB function, prints phone number and date of birth for a
//given person
void phoneBook::printPhone_DOB(std::string lastN, std::string firstN)
{
//declaring variables
int i;
int index;

//finding matching first name, last name and its index
for(i=0; i<50; i++)
{
    if(lastName[i] == lastN && firstName[i] == firstN)
        index = i;
}

//printing phone number and date of birth
cout << "Phone number: " << phone[index] << endl;
cout << "Date of birth: ";
for(i=0; i<10; i++)
    cout << dateOfBirth[index][i];
cout << endl;
}

//printNamesForDOB function, print names of people with birthdays on
//given month
void phoneBook::printNamesForDOB(char month[])
{
//declaring variables
int i;

//printing names of people with birthdays in given month
cout << "The folowing people have birthdays in month number " << month << ":" << endl;
for(i=0; i<50; i++)
{
    if(dateOfBirth[i][3] == month[0] && dateOfBirth[i][4] == month[1])
    {
        cout << "Last name: " << lastName[i] << endl;;
        cout << "First Name: " << firstName[i] << endl;
        cout << endl;
    }
}
}

//saveData function, save data back to the local file
void phoneBook::saveData()
{
/*
**Assuming the following data scheme will be put:
**LastName FirstName PhoneNumber DateOfBirth
**(repeating 50 times)
*/

//opening file, deleting its contents
fstream file (filename.c_str(), fstream::out | fstream::trunc); 

//declaring variables
int i, j;

//re-writting new data to file
for(i=0; i<50; i++)
{
    file << lastName[i];
    file << " ";
    file << firstName[i];
    file << " ";
    file << phone[i];
    file << " "; 
    for(j=0; j<10; j++)
        file >> dateOfBirth[i][j];
    file << " ";
    file << endl; //end line
}

//closing file
file.close();
} 
```

具有主要功能的文件

```
//Problem 2.cpp
#include "phoneBook.h"
#include <iostream>
using namespace std;

int main()
{
 return 0;
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:33:29.323

你已经声明了`static`你的类的一些成员`phoneBook`，但是你没有提供这些成员的定义。

您需要在`.cpp`文件中提供如下定义：

```
string phoneBook::lastName[50];
string phoneBook::lastName[50];
string phoneBook::firstName[50];
int phoneBook::phone[50];
char phoneBook::dateOfBirth[50][10]; 
```

我还注意到您的构造函数声明了与那些成员变量同名的*局部变量。*这可能不是您想要做的，因为一旦声明它们的函数退出，局部变量就会消失。

# wix - 如何使 WIX MSI 始终删除以前的版本？

> ID：11732290
> 
> 赞同：27
> 
> 时间：2012-07-31T02:29:40.057
> 
> 标签：wix, windows-installer, wix3.5

每当开发人员签入更改时，我都会让 CI 构建系统构建一个 MSI。我们在已安装的 MSI 上运行自动化验收测试。

基本上每个 MSI 都是产品的完整安装，因此我们本身没有任何版本控制（ala Windows 安装程序）。

每个 MSI 具有相同的产品 G​​UID 和升级 GUID，以及相同的版本号。但具有不同的包 GUID（在 wix 中使用“*”）。

我想要实现的是，当安装程序运行时，它将“卸载”任何以前安装的产品版本，并安装新版本..全部来自单个 MSI（我们有一个复杂的安装过程，这是我们无法控制的.. citrix 和 sccm，所以我们想给他们一个简单的安装路径）

我试过了：

```
<Property Id='PREVIOUSVERSIONSINSTALLED' Secure='yes' />
<Upgrade Id='$UPGRADE_GUID'>  
  <UpgradeVersion Minimum='1.0.0.0'
                  Maximum='99.0.0.0'
                  Property='PREVIOUSVERSIONSINSTALLED'
                  IncludeMinimum='yes'
                  IncludeMaximum='no' />
</Upgrade> 
```

并且有：

```
<InstallExecuteSequence>
  <RemoveExistingProducts After='InstallFinalize' />
</InstallExecuteSequence> 
```

并尝试过：

```
<InstallExecuteSequence>
  <RemoveExistingProducts After='InstallInitialize' />
</InstallExecuteSequence> 
```

但是，当我尝试从后续版本安装 msi 时，我得到：

```
Another version of this product is already installed. Installation of this version cannot continue. 
To configure or remove the existing version of this product, use Add/Remove Programs on the Control Panel. 
```

这不是我真正想要的..

我知道我可以只更新产品标签中的版本属性，但这变得难以管理。首先，我每天可以生成 20 多个 msi 构建，因为我有许多生成 MSI 的构建管道，并且不确定如何以有意义的方式处理版本编号。

也许 Windows Installer 只是不允许这种类型的“总是覆盖已安装的版本”安装？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-31T07:16:12.277

所以我确实找到了一种不改变版本号的方法。

我在每次构建时更改产品 GUID，但保持升级 GUID 相同。

我还必须将 RemoveExistingProducts 更改为 Before='InstallInitialize'。否则，它只会在安装路径中的构建之间留下“增量”。

正如下面 Wim 所指出的，我可以将生成的产品 G​​UID 替换为`'*'`.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-12-24T12:42:03.007

您可以使用此代码删除旧版本并安装新版本：

```
<Product Id="*"
         UpgradeCode="87795f3dc95-81f5-473e-955e-2871a5bd66a5"
         Name="AppName"
         Language="1033"
         Version="1.0.6"
         Manufacturer="Manufacturer Name">
  <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />
  <MajorUpgrade Schedule="afterInstallInitialize"
                DowngradeErrorMessage="A later version of [ProductName] is already installed"
                AllowSameVersionUpgrades="yes" />
</Product> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T03:42:18.183

尝试

```
<InstallExecuteSequence>
  <RemoveExistingProducts After='InstallFinalize' />
</InstallExecuteSequence> 
```

这应该会在安装完成后删除所有现有产品，尽管您可以自定义执行此操作的点

见[http://mohundro.com/blog/2009/02/23/getting-started-with-wix-and-major-upgrades/](http://mohundro.com/blog/2009/02/23/getting-started-with-wix-and-major-upgrades/)

另请参阅[此问题的已接受答案](https://stackoverflow.com/questions/114165/how-to-implement-wix-installer-upgrade)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-31T04:22:03.057

如果产品代码和版本相同但包代码不同，您将始终收到该 Windows Installer 错误消息。

我强烈建议在 CI 构建中包含安装程序的版本信息。如果您正在安装并随后升级每个构建，那么版本控制并不是一件坏事。将它添加到 CI 构建中应该相对容易。

# ios - 10.6 应用被拒绝 - 专家可以帮助我了解要更改的内容吗？

> ID：11732296
> 
> 赞同：1
> 
> 时间：2012-07-31T02:30:22.807
> 
> 标签：ios, appstore-approval

我的应用被苹果拒绝了，即使在上诉并与他们交谈之后，他们也不愿意就问题所在给我们明确的反馈。他们一直指向 10.6 指南并拒绝我们。我们觉得我们在遵守它方面做得很好。

我很想得到一些关于哪里出了问题的指导。我的应用程序的屏幕截图在此链接下方，按您使用该应用程序的顺序排列。

[http://imgur.com/a/Htfbi](http://imgur.com/a/Htfbi)

该应用程序适用于真人秀节目 - 危险水域。该应用程序的描述如下：

跟随 Dangerous Waters 船员踏上 SeaDoo 私人船只环游世界的旅程。这个应用程序允许您从 DW 工作人员那里获取最新的位置、图像、视频和文本更新。非常适合在这个新的真人秀剧集之间使用。

* * *

我们确保包含标准和视网膜格式的所有图像。该应用程序有 0 个苹果指出的错误，并且还启用了推送通知。

我们真的不知道该怎么做才能让应用程序获得批准。任何提示将非常感谢！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:09:53.590

我认为你被拒绝的原因是因为你使用了 twitter 和 facebook 等的 web 视图。

苹果不允许这样做。几乎可以说网络视图仅用于加载此类本地或网络无 WEBSITE 内容。

使用 twitter api 或 facebook api，不要像在应用程序 webview 中那样添加您的网站，而是通过 safari 链接到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:33:15.477

我认为 Apple 拒绝了您，因为您没有证据表明您有权显示 Dangerous Waters 电视节目的内容。

我同意 Traveling Tech Guy 的观点，并建议您在 Apple 开发人员论坛上发布此内容，以便实际的 Apple 员工可以更好地解决您的问题。他们将能够更好地帮助你。我们这里的所有人都会在黑暗中拍摄。

# jquery - 如何将editbutton添加到jqgrid？

> ID：11732297
> 
> 赞同：0
> 
> 时间：2012-07-31T02:30:29.597
> 
> 标签：jquery, asp.net-mvc-3, jquery-plugins, jqgrid, jqgrid-asp.net

我在这里使用 basicsgrid 示例：http: [//tpeczek.codeplex.com/releases/view/61796](http://tpeczek.codeplex.com/releases/view/61796)

尝试为每一行添加一个编辑按钮，以便我可以打开我的编辑页面但不起作用？我错过了什么？

我在网格定义的末尾添加了这个：

editurl: '/首页/编辑'

网格：

```
<script type="text/javascript">
$(document).ready(function () {
    $('#jqgProducts').jqGrid({
        //url from wich data should be requested
        url: '@Url.Action("Products")',
        //type of data
        datatype: 'json',
        //url access method type
        mtype: 'POST',
        //columns names
        colNames: ['Actions', 'ProductID', 'ProductName', 'SupplierID', 'CategoryID', 'QuantityPerUnit', 'UnitPrice', 'UnitsInStock'],
        //columns model
        colModel: [
            { name: 'act', index: 'act', width: 55, align: 'center', sortable: false, formatter: 'actions' },
                    { name: 'ProductID', index: 'ProductID', align: 'left' },
                    { name: 'ProductName', index: 'ProductName', align: 'left' },
                    { name: 'SupplierID', index: 'SupplierID', align: 'left' },
                    { name: 'CategoryID', index: 'CategoryID', align: 'left' },
                    { name: 'QuantityPerUnit', index: 'QuantityPerUnit', align: 'left' },
                    { name: 'UnitPrice', index: 'UnitPrice', align: 'left' },
                    { name: 'UnitsInStock', index: 'UnitsInStock', align: 'left' }
                  ],
        //pager for grid
        pager: $('#jqgpProducts'),
        //number of rows per page
        rowNum: 10,
        //initial sorting column
        sortname: 'ProductID',
        //initial sorting direction
        sortorder: 'asc',
        //we want to display total records count
        viewrecords: true,
        //grid height
        height: '100%',
        editurl: '@Url.Action("Edit")'
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:55:11.073

如果您想要默认的编辑和删除按钮，那么您可以使用操作格式化程序。

只需在网格中再添加一列`colName`

`colNames:['Actions', ... ]`像这样的东西和`colModal`

```
{
  name:'act', index:'act', width:55, align:'center', sortable: false,
  formatter: 'actions'
} 
```

像这样的东西现在只有你可以指定你的编辑和删除选项

像这样

```
{
  name: 'act', index: 'act', width: 75, align: 'center', sortable: false,
  formatter: 'actions',
  formatoptions: {
    keys: true, restoreAfterError: false, onError: callyourErrorFunction,
    afterSave://if you wanto reload ur grid here, reload it,
    onEdit: function (id) {
      if (typeof (lastSel) !== "undefined" && id !== lastSel) {
        var grid=$("#grid");
        cancelEditing(grid);
      }
      lastSel = id;
    },
    editOptions: {
      url: '@Url.Action("EditAction")',
      restoreAfterError: false
    },
    delOptions: {
      url: '@Url.Action("DeleteAction")'
    }
  }
} 
```

检查这个答案：[jqgrid EditActionIconsColumn Events](https://stackoverflow.com/questions/5196387/jqgrid-editactioniconscolumn-events)

如果你想要自定义按钮，那么你可以这样做

```
loadComplete: function () {
    var iCol = getColumnIndexByName(grid, 'act');
    $(this).find(">tbody>tr.jqgrow>td:nth-child(" + (iCol + 1) + ")")
        .each(function() {
            $("<div>", {
                title: "Custom",
                mouseover: function() {
                    $(this).addClass('ui-state-hover');
                },
                mouseout: function() {
                    $(this).removeClass('ui-state-hover');
                },
                click: function(e) {
                    alert("'Custom' button is clicked in the rowis="+
                        $(e.target).closest("tr.jqgrow").attr("id") +" !");
                }
            }
          ).css({"margin-right": "5px", float: "left", cursor: "pointer"})
           .addClass("ui-pg-div ui-inline-custom")
           .append('<span class="ui-icon ui-icon-document"></span>')
           .prependTo($(this).children("div"));
    });
} 
```

这将与动作格式化程序一起应用。如果您不需要那里的编辑和删除按钮，只需在格式选项中将 editbutton 和 delbutton 设为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:05:42.570

我使用了格式化程序功能来添加将您引导至其他页面的按钮。我是这样做的

```
function PKId_formatter(cellvalue, options, rowObject) {
    return '<a href="yourEditUrl?id=' + cellvalue + '"><img src="pencil.png" border=0 /></a>';
} 
```

然后添加`formatter: PKId_formatter`到您的列定义

```
colModel : [
    ...
    { name: '...', index: '...', formatter: PKId_formatter , ...},
    ...
] 
```

只是一个注意：`PKId_formatter`是您用于格式化按钮列内容的函数名称，您可以使用任何您喜欢的名称

这是对 wiki 文档的参考：[Custom Formatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)

# java - 查询字符串中扁平化 JSON 对象的 Struts2 类型转换

> ID：11732298
> 
> 赞同：2
> 
> 时间：2012-07-31T02:30:32.927
> 
> 标签：java, ajax, json, struts2, kendo-ui

编辑：更改了问题标题和内容。在阅读[JSON 插件指南](http://struts.apache.org/2.x/docs/json-plugin.html)后，我意识到该插件可能需要一个 JSON 字符串而不是这个查询映射，在这种情况下，我通常会使用 GSON。我想问题变成了：Struts2如何处理这样的查询字符串的类型转换：`sort[0][field]=status&sort[0][dir]=asc`

* * *

我正在使用 Kendo UI 网格与我的 Struts2 后端交互。发送到服务器的 AJAX 请求遵循以下格式（GET 查询字符串）：

```
take=5&skip=0&page=1&pageSize=5&sort%5B0%5D%5Bfield%5D=status&sort%5B0%5D%5Bdir%5D=asc 
```

或（非转义）：

```
take=5&skip=0&page=1&pageSize=5&sort[0][field]=status&sort[0][dir]=asc 
```

基本上，Kendo UI 网格正在向服务器发送一个扁平化的 JSON 对象。所以我创建了一个这样的排序模型对象来获取输入：

```
public class SortModel {
    private String field;
    private String dir;
} 
```

并将其作为要填充的变量包含在我的 Struts2 操作中：

```
private SortModel[] sort; 
```

但是，当 AJAX 请求进入时，Struts2 永远不会填充它。我还尝试添加 JSON 拦截器，但我认为我误解了它的反序列化过程，如编辑中所述。

无论如何，有没有人设法使用上述查询字符串或类似的方式进行 Struts2 类型转换：`sort[0][field]=status&sort[0][dir]=asc`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:15:59.610

> 排序[0][字段]=状态&排序[0][目录]=asc

以上不是正确的 JSON，应引用字符串。完成后，以下将起作用。

在这种情况下，表单`name[i]['s']`中的字段（或 json 参数）具有 String 的值，其中 i 是整数，s 是任何字符串，将由以下内容支持：

```
private List<Map<String, String>> name = new ArrayList<Map<String, String>>();

//getter AND setter required 
```

PS：使用 Struts2，您可以索引列表列表的列表...没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:54:17.677

好的。

事实证明，vanilla Struts2 不接受格式中的查询字符串`obj[idx][property]`（请随时纠正我）。我期待它将查询字符串转换为该特定对象的数组。

Struts2 接受的是`obj[idx].property`它会正确转换为`private Object[] obj`.

所以我想可能的解决方案是：

1.  JSON.stringify(jsonObj) 在将它传递给查询字符串之前，a la `&jsonData=[{property:'value'}]`- 在这种情况下，我不能这样做，因为 Kendo UI 网格似乎没有类似拦截器的事件来让我更改查询参数。或者，

2.  实现处理这种特定格式的自定义类型转换器。或者，

3.  在将 AJAX 请求发送到服务器之前拦截它并重新格式化查询字符串，使用 jQuery.ajaxSend 例如

    ```
    $(body).ajaxSend(function(event, req, settings){
        console.log(settings.url); //contains the url string to replace
        settings.url = settings.url.replace(some_regex, 'correct format');
    }); 
    ```

# c - jpeg_read_scanlines 中的 libjpeg 崩溃

> ID：11732303
> 
> 赞同：0
> 
> 时间：2012-07-31T02:31:14.560
> 
> 标签：c, jpeg, loader

当我运行此代码以加载 jpeg 文件时，我在 jpeg_read_scanlines 中崩溃了我正在使用带有 VC++ 2010 的 windows 7 64 位

我正在加载的图像是 100x75 jpg 图像。

如果您需要更多详细信息，请询问

崩溃消息是：LibTest.exe 中 0x012db29e 处的未处理异常：0xC0000005：访问冲突写入位置 0xcdcdcdcd。

```
void JPG_Load (const char *path, image_t *img) 
{
struct jpeg_decompress_struct cinfo;
struct jpeg_error_mgr jerr;
int infile;
JSAMPARRAY buffer;  
int row_stride;     
unsigned char *out;

infile = fopen(path,"rb");
if (infile == 0) {
    memset (img, 0, sizeof(image_t));
    return;
}

cinfo.err = jpeg_std_error(&jerr);

jpeg_create_decompress(&cinfo);
jpeg_stdio_src(&cinfo, (FILE *)infile);
jpeg_read_header(&cinfo, TRUE);
jpeg_start_decompress(&cinfo);
row_stride = cinfo.output_width * cinfo.output_components;
out = malloc(cinfo.output_width*cinfo.output_height*cinfo.output_components);

img->pixels = out;
img->width = cinfo.output_width;
img->height = cinfo.output_height;
img->bytesPerPixel = cinfo.out_color_components;

while (cinfo.output_scanline < cinfo.output_height) {
    buffer = (JSAMPARRAY)out+(row_stride*cinfo.output_scanline);
    jpeg_read_scanlines(&cinfo, buffer, 1);
}

jpeg_finish_decompress(&cinfo);
jpeg_destroy_decompress(&cinfo);

fclose(infile);
} 
```

image_t 定义为：

```
typedef struct {
int width;
int height;
int bytesPerPixel;
byte *pixels;
} image_t; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:49:40.843

不要这样做。

```
buffer = (JSAMPARRAY)out+(row_stride*cinfo.output_scanline); // WRONG 
```

你正在铸造`JSAMPARRAY`，这基本上是`void **`。结果是垃圾，因为这不是您拥有的那种数据：您有一个字节数组。

如果您查看文档，该`jpeg_read_scanlines`函数不会使用指向缓冲区的指针。它需要一个指向扫描线数组的指针，每条扫描线都是指向行数据的指针。

```
while (cinfo.output_scanline < cinfo.output_height) {
    unsigned char *rowp[1];
    rowp[0] = (unsigned char *) out + row_stride * cinfo.output_scanline;
    jpeg_read_scanlines(&cinfo, rowp, 1);
} 
```

**建议：**仅当您知道强制转换是正确的时，才可以添加强制转换来修复编译器错误。除非您知道类型是什么，否则不要强制转换为任何类型。

# usb - usbmon、usb 规范和字节序/字节顺序

> ID：11732307
> 
> 赞同：1
> 
> 时间：2012-07-31T02:32:10.397
> 
> 标签：usb, endianness

我正在尝试破译由产生的 USB I/O 流量的痕迹，`usbmon`并且在解决字节序时遇到了一些问题。例如，以下是我正在使用的跟踪中的两行：

```
ffff8800650e7000 433121059 S Ci:2:000:0 s 80 06 0100 0000 0040 64 <
ffff8800650e7000 433121661 C Ci:2:000:0 0 18 = 12010002 00000040 da0b8781 00010102 0301 
```

我最初在跟踪中除了大端顺序之外没有任何怀疑，但后来我`da0b8781`在第二行中看到，它对应于我正在跟踪的 USB 设备的身份，其供应商 ID`0x0bda`和产品 ID 为`0x8187`（注意跟踪中字节顺序的反转）。

所以在这一点上，我认为可能在`usbmon`跟踪的给定字段中，字节总是以相反的字节顺序进行的，应该这样解释。但相反，让我们检查靠近第一条迹线末端的一小部分，`... 0040 64`

`0040`是一个十六进制字段，表示接受的最大响应大小。 `64`是一个十进制字段，应该代表完全相同的事物。 `0x0040`=`64`十进制，*无需将字节顺序切换为*! `0x4000`=`64`十进制。`usbmon`所以在这一点上，我开始对跟踪不同部分的字节顺序有点不确定。

接下来我想，也许只是`usbmon`跟踪的数据部分是反向字节顺序的。所以我想也许我真的应该读书

```
...12010002 00000040 da0b8781 00010102 0301 
```

作为

```
1030 20101000 1878b0ad 04000000 20001021... 
```

不，这似乎也不对。USB 规范声明供应商 ID（`0x0bda`在我的例子中）应该是这个特定字符串的字节偏移量 8。如果我们将上面的字符串保持原来的顺序，那么供应商 ID 确实从字节偏移 8 开始（`12010002 00000040` 消耗前 8 个字节），但是如果我们像上面那样反转它，那么它从字节偏移 6 开始（`1030 20101000`只消耗前 6 个字节）。

所以我现在最好的*猜测*是`usbmon`显示所有大端，接受它在每个 4 字节字*内切换到反向字节顺序，但**仅用于数据*。任何人都可以澄清这是否正确，或者是否还有其他我遗漏的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T16:02:26.177

对你来说可能有点晚了，但我试过 usbmon （发现没问题）

你可能想看看 evtest

[http://www.freedesktop.org/wiki/Evtest](http://www.freedesktop.org/wiki/Evtest)

# javascript - 图像加载多次触发

> ID：11732308
> 
> 赞同：3
> 
> 时间：2012-07-31T02:32:18.403
> 
> 标签：javascript, jquery, onload

当通过图像标签中的 onload 属性加载图像时，我有一个函数被触发。该图像正在通过一些 jQuery 附加到 DOM。我遇到的问题是，当 jQuery 将该图像放入时，与 onload 关联的函数会触发 6 次。这不是一个复杂的问题（例如，第一次触发一次，第二次触发两次），就像我看到的一些解决方案一样。这会持续触发 6 次。有人知道它为什么这样做吗？

图像触发功能：

```
<img src='image_source.png' onload='myFunction();' /> 
```

功能：

```
function myFunction(){
  console.log('hello');
} 
```

Hello 在控制台日志中出现 6 次。感谢您提供的任何见解。

编辑 - 这是添加图像的代码

```
$("[id=" + type + "]").html("<img src='" + image + "' class='loaded_image' onload='myFunction();' />"); 
```

# sql - 有没有比日期更好的方法来关联两个数据库的状态？

> ID：11732312
> 
> 赞同：1
> 
> 时间：2012-07-31T02:32:30.077
> 
> 标签：sql, sql-server, concurrency

我有一种情况，我需要在同一时间段内从两个不同的 SQL Server 数据库中获取一系列对象。

因此，如果 DB1 有一个`Car`表，而 DB2 有一个`Person`表，我想得到所有`Cars`并`Persons`达到一个时间点`t`。

但是，我不想处理日期（我不想遇到闰秒问题和那种事情），幸运的是两个数据库都使用`RowVersion`列。理想情况下，我想使用这样的东西`RowVersion`作为表示时间点/特定全局状态的并发令牌（我的`t`），然后我可以比较记录。

不幸的是，`RowVersion`列是相对于数据库的，因此不同数据库之间没有可比性。

这里有更好的解决方案吗？我是否对不想使用日期反应过度？

建议表示赞赏:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:52:01.663

因为您谈论的是多个独立的系统，所以很遗憾您的选择是有限的。通过将所有日期时间存储在 GMT 中，您已经在正确的地方开始了。

除此之外，`datetime`它确实是此处使用的唯一合适的数据类型。是的，假设一个良好的公共时间同步，它将在多个系统之间关闭，相差几分之一秒。但是更新记录时的简单网络延迟也会导致时间差异，无论如何，即使时钟完全同步。

`RowVersion`不能帮助你，原因你已经注意到了。

唯一的另一种方法是在一个或另一个数据库中拥有一个“同步”表，该表与任一数据库中的记录相关（逻辑上，而不是“物理上”），并且具有您可以使用的通用日期时间或行版本。这会稍微增加查询的复杂性，但无论如何，您似乎已经在进行跨数据库查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:27:44.920

您是否有特定的时间段要处理？如果是这样，也许可以将一个通用的“TimePeriod”表链接到每条记录，而不必处理日期？

# google-app-engine - 亚马逊 ses 与 gae 的兼容性问题

> ID：11732323
> 
> 赞同：0
> 
> 时间：2012-07-31T02:34:10.700
> 
> 标签：google-app-engine, amazon-ses

我正在尝试使用 amazone ses 在 google app engine for java 上发送电子邮件，但面临如下所述的异常。

这发生在添加所需的 httpcore 和 htttpclient 库时。让它在 GAE 上工作的方法是什么？

```
SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String vik.sakshum.sakshumweb.client.service.SubscribeService.doSubscribe(java.lang.String,java.lang.String) throws java.lang.Exception' threw an unexpected exception: java.lang.NoClassDefFoundError: javax.net.ssl.KeyManagerFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.NoClassDefFoundError: javax.net.ssl.KeyManagerFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.
    at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
    at org.apache.http.conn.ssl.SSLSocketFactory.createSSLContext(SSLSocketFactory.java:184)
    at org.apache.http.conn.ssl.SSLSocketFactory.createDefaultSSLContext(SSLSocketFactory.java:209)
    at org.apache.http.conn.ssl.SSLSocketFactory.<init>(SSLSocketFactory.java:333)
    at org.apache.http.conn.ssl.SSLSocketFactory.getSocketFactory(SSLSocketFactory.java:165)
    at org.apache.http.impl.conn.SchemeRegistryFactory.createDefault(SchemeRegistryFactory.java:45)
    at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.<init>(ThreadSafeClientConnManager.java:98)
    at com.amazonaws.http.ConnectionManagerFactory.createThreadSafeClientConnManager(ConnectionManagerFactory.java:26)
    at com.amazonaws.http.HttpClientFactory.createHttpClient(HttpClientFactory.java:83)
    at com.amazonaws.http.AmazonHttpClient.<init>(AmazonHttpClient.java:116)
    at com.amazonaws.AmazonWebServiceClient.<init>(AmazonWebServiceClient.java:60)
    at com.amazonaws.services.simpleemail.AmazonSimpleEmailServiceClient.<init>(AmazonSimpleEmailServiceClient.java:148)
    at com.amazonaws.services.simpleemail.AmazonSimpleEmailServiceClient.<init>(AmazonSimpleEmailServiceClient.java:129)
    at vik.sakshum.sakshumweb.server.common.CommonServiceCode.sendSubscriptionMail1(CommonServiceCode.java:965)
    at vik.sakshum.sakshumweb.server.common.CommonServiceCode.handleSakshumMailingListSubscription(CommonServiceCode.java:937)
    at vik.sakshum.sakshumweb.server.SubscribeServiceImpl.doSubscribe(SubscribeServiceImpl.java:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:114)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:13:08.913

这是一个已知问题，由于上述对 GAE 的类限制，不支持开箱即用的 Apache HttpClient。

请查看此线程：[如何在 App Engine 上进行 HTTPS 调用](https://stackoverflow.com/questions/6977201/how-to-make-an-https-call-on-app-engine)，其中包含有关如何替换现有类之一和解决此问题的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:36:49.833

[因此，我可以在http://radomirml.com/2012/07/31/amazon-ses-service-with-java-on-gae](http://radomirml.com/2012/07/31/amazon-ses-service-with-java-on-gae)找到一篇提到如何在 gae 上运行 ses 的帖子

# c# - 在 Windows Phone 上检测流或字节数组编码

> ID：11732324
> 
> 赞同：2
> 
> 时间：2012-07-31T02:34:16.247
> 
> 标签：c#, xml, silverlight, encoding, windows-phone

我正在尝试在 Windows Phone 应用程序中读取使用 WebClient.OpenReadAsync() 下载的 xml。问题是，有时，xml 不会带有 UTF8 编码，它可能带有其他编码，例如“ISO-8859-1”，因此重音变得混乱。

我能够使用以下代码完美加载 ISO-8858-1 xml 之一：

```
var buff = e.Result.ReadFully(); //Gets byte array from the stream
var resultBuff = Encoding.Convert(Encoding.GetEncoding("ISO-8859-1"), Encoding.UTF8, buff);
var result = Encoding.UTF8.GetString(resultBuff, 0, resultBuff.Length); 
```

它与 ISO-8859-1 完美配合，文本完美，但它弄乱了 UTF8 xml。

所以，这里的想法是在执行此操作之前检测字节数组或流的编码，然后如果不是UTF8，它将使用上面的方法将数据与检测到的编码进行转换。

我正在寻找一些可以检测互联网上编码的方法，但我找不到任何方法！有人知道我怎么能在 Windows Phone 上做这种事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:00:01.043

您可以在 WebClient.ResponseHeaders 属性中查找“Content-Type”值；如果幸运的话，服务器会将其设置为指示媒体类型及其编码（例如“text/html; charset=ISO-8859-4”）。

# python - 在 Python 中对列表进行布尔测试

> ID：11732329
> 
> 赞同：8
> 
> 时间：2012-07-31T02:35:54.353
> 
> 标签：python, list, boolean

我正在测试一个列表，看看它是否为空。通常我使用 len(list) == 0 并且我隐约记得不久前阅读过测试列表是否为空的正确方法是它是真还是假。

所以我试过 list is False，结果返回 False。也许我想使用 == ？不，这也返回了错误。list 为 True，返回 false 与 list == True 一样。

现在我很困惑，所以我快速搜索了一下，结果是：[检查列表是否为空的最佳方法](https://stackoverflow.com/questions/53513/python-what-is-the-best-way-to-check-if-a-list-is-empty)

最佳答案是：

```
if not a:
    print "List is empty" 
```

所以我搜索了更多内容，最后在 python 手册中找到了 4.1 状态：

可以测试任何对象的真值，用于 if 或 while 条件或作为以下布尔运算的操作数。以下值被认为是错误的：

任何空序列，例如，''、()、[]。

现在我很困惑。如果我测试一个列表，就像不是列表一样，它工作正常。但是如果一个空列表是假的，那么如果列表是假的或者如果列表 == 假，我为什么不能这样做呢？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T02:38:11.773

空列表不是 False，但是当您将其转换为布尔值时，它会转换为 False。对于字典、元组、字符串等也是如此：

```
>>> [] == False
False
>>> bool([]) == False
True
>>> {} == False
False
>>> bool({}) == False
True 
```

当您将某些内容放在`if`子句的条件中时，它是用于测试的布尔值`if`。这就是为什么`if someList`与 相同`if bool(someList)`。同样，`not foo`布尔值不是，所以`not []`等于 True。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T02:47:45.853

正如其他人所说，在 python `bool([]) == False`. python 程序员经常利用的一件事是运算符`and`和`or`不（必然）返回真/假。考虑以下：

```
3 and 4  #returns 4
0 and 8  #returns 0 -- This is short-circuit evaluation
0 or 8   #returns 8
True or 0 #returns True -- This is short-circuit evaluation

[] or False #returns False
False or [] #returns [] 
```

语句中发生的情况`if`是条件按上述方式进行评估，然后 python 隐式调用`bool`结果——因此您可以将其视为：

```
if condition: 
```

与以下内容相同：

```
if bool(condition): 
```

就python而言。对于`not`运算符也是如此：

```
not condition 
```

是一样的

```
not bool(condition) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T02:57:19.187

`mylist is False`意思是“对象的名称与?`mylist` *完全相同*`False`？”

`mylist == False`意思是“命名的对象是否`mylist` *等于* `False`？

`not mylist` means "does the object named `mylist` behave falsily?

* * *

None of these are equivalent: `1 is not 1.0` but `1 == 1.0` and `[] != False` but `not [] is True`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T02:39:27.427

将列表与 进行比较`False`，并测试列表的真假并不完全相同。空列表不等于`False`，但`False`在布尔上下文中的行为。

这是另一种说法，可能有助于理解这一点：

```
print (bool([]) == False) # will print True
print ([] == False) # will print False 
```

# php - PHP - echo 和 print_r 之间是否可以连接

> ID：11732331
> 
> 赞同：3
> 
> 时间：2012-07-31T02:35:58.990
> 
> 标签：php, concatenation, echo

`array`在 PHP 中，是否可以在命令中写出一个`echo`（反之亦然）？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T02:38:51.563

当然， print_r() 有一个额外的选项来允许它返回格式化的文本，而不是直接输出它：

```
echo print_r($array, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:38:26.923

不知道你为什么想要，但你可能会

```
$var = print_r($array, true);

echo 'stack ' . $var; 
```

得到你想要的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:40:11.553

`echo print_r($myVariable, true);` 第二个参数指示函数返回输出而不是成功的布尔值。

# merge - 使用 MapReduce 获取大文件中的重复记录

> ID：11732333
> 
> 赞同：3
> 
> 时间：2012-07-31T02:36:23.193
> 
> 标签：merge, mapreduce

我有一个包含 > 1000 万行的大文件。我想使用 MapReduce 获得重复的行。我怎么解决这个问题？感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T02:45:59.590

您需要利用 MapReduce 的默认行为是基于公共键对值进行分组这一事实。

所以所需的基本步骤是：

1.  将文件的每一行读入映射器，可能使用 TextInputFormat 之类的东西。
2.  将输出键（文本对象）设置为每一行的值。值的内容并不重要。如果需要，您可以将其设置为 NullWritable。
3.  在 reduce 中检查为每个键分组的值的数量。如果你有多个值，你就知道你有一个重复值。
4.  如果您只想要重复的值，请写出具有多个值的键。

# wxwidgets - 如何使用 wxBusyInfo？

> ID：11732334
> 
> 赞同：0
> 
> 时间：2012-07-31T02:36:29.380
> 
> 标签：wxwidgets

我遇到了 wxBusyInfo 的问题。我想在进行一些计算时禁用用户的操作。我只是这样写代码：

```
wxWindowDisabler disableAll;
wxBusyInfo info(_T("Working, please wait..."), this);
for(int i = 0; i < 1; i++)
{
Install();
} 
```

在 Install() 函数中，我做了一些这样的工作：

```
wxSleep();
wxExecute(cmd, output, errors); 
```

当我运行应用程序时，busyinfo 对话框会出现，但它不再位于应用程序的顶部。同样，在我单击应用程序或单击busyinfo 对话框后，它会像所附图片一样。当 Install() 函数完成后，就可以了。但我不希望用户以这种方式结束应用程序。有什么问题？我能做些什么？ [单击busyinfo对话框](http://bbs.nju.edu.cn/file/J/jamesyang/busyinfo2.png)[后单击应用程序后](http://bbs.nju.edu.cn/file/J/jamesyang/busyinfo.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:01:47.053

您正在同步调用 wxExecute，这意味着它不会返回，直到`cmd completes.`您的应用程序没有机会更新显示。

因此，您需要异步调用 wxExecute。

问题是您无法看到已执行命令的输出和错误。

# eclipse - JRebel 不发布 webapp 文件夹

> ID：11732335
> 
> 赞同：3
> 
> 时间：2012-07-31T02:36:31.193
> 
> 标签：eclipse, tomcat, web-applications, jrebel

我正在尝试使用 JRebel 并在 src/main/webapp 文件夹下发布 xhtml 等文件时遇到问题。我可以做类的热替换，它正在工作。

我正在使用 Eclipse Helios、Tomcat 7 和 JRebel Eclipse 插件。我也在使用 WTP。

我检查了 tmp0\wtpwebapps\myapp-web 目录。rebel.xml 存在于 WEB-INF/classes 文件夹中。所以应该没问题。

这是我的 rebel.xml

```
<classpath>
    <dir name="C:/Users/user/workspace/myapp/myapp-web/target/test-classes">
    </dir>
    <dir name="C:/Users/user/workspace/myapp/myapp-web/target/classes">
    </dir>
</classpath>

<web>
    <link target="/">
        <dir name="C:/Users/user/workspace/myapp/myapp-web/src/main/webapp">
        </dir>
    </link>
</web> 
```

我尝试了很多但不明白为什么 JRebel 不热部署 webapp 文件夹。我在 jrebel.log 文件中找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:58:44.813

首先，从 rebel.xml 类路径定义中远程 test-classes 文件夹——你可能会对那个文件夹产生影响。

当应用程序服务器启动时，您是否在控制台看到 JRebel：正在监视目录 'blah' 消息？

将 jrebel.log 发送给支持 - 他们会提供帮助。它可能是 Tomcat 实例的一些次要版本差异。

# r - R中不同类型函数的区别

> ID：11732336
> 
> 赞同：9
> 
> 时间：2012-07-31T02:36:46.857
> 
> 标签：r, function

我希望能帮助您理解 R 中几种类型的函数之间的主要区别。

我对不同类型函数的定义感到有些不知所措，而且理解不同类型的函数如何相互关联变得有些困难。

具体来说，我对以下类型的函数之间的关系和区别感到困惑：

1.  **Generic 或 Method**：基于输入参数的类，通用函数通过使用 Method Dispatch 调用适当的方法函数。

2.  **不可见与可见**

3.  **原始与内部**

我对这些不同类型的功能如何相互关联（如果有的话）以及它们之间的各种差异和重叠之处感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:59:07.733

这是一些关于原始与内部的文档：http: [//www.biosino.org/R/R-doc/R-ints/_002eInternal-vs-_002ePrimitive.html](http://www.biosino.org/R/R-doc/R-ints/_002eInternal-vs-_002ePrimitive.html)

泛型是可以应用于类对象的泛型函数。每个类都使用特定方法编写，然后将其设置为泛型。因此，您可以使用“方法”函数查看与通用调用相关的特定方法：

```
methods(print) 
```

这将列出与通用“打印”相关的所有方法。或者，您可以通过此调用查看给定类的所有泛型

```
methods(,"lm") 
```

其中 lm 是类线性模型。这是一个例子：

```
x <- rnorm(100)
y <- 1 + .4*x + rnorm(100,0,.1)
mod1 <- lm(y~x)
print(mod1)
Call:
lm(formula = y ~ x)

Coefficients:
(Intercept)            x  
       1.002        0.378  

print.lm(mod1)
Call:
lm(formula = y ~ x)

Coefficients:
(Intercept)            x  
       1.002        0.378 
```

print(mod1)（通用调用）和 print.lm(mod1)（对类的方法调用）都做同样的事情。为什么R会这样做？我真的不知道，但据我所知，这就是方法和泛型之间的区别。

# cakephp - 使用 cakephp 重定向登录

> ID：11732337
> 
> 赞同：0
> 
> 时间：2012-07-31T02:36:51.280
> 
> 标签：cakephp, login

我目前正在使用 Usermgmt 插件进行登录功能和用户管理。我想要做的是在他们登录后根据 group_id 重定向特定页面。我现在迷失在蛋糕上。

这是来自 AppController 的代码。

```
 var $helpers = array('Form', 'Html', 'Session', 'Js', 'Usermgmt.UserAuth');
    public $components = array('Session','RequestHandler', 'Usermgmt.UserAuth');
    function beforeFilter(){
        $this->userAuth();
    }

    private function userAuth(){
        $this->UserAuth->beforeFilter($this);
    } 
```

这是来自 UsersController 的登录功能。

```
 public function login() {
    if ($this->request -> isPost()) {
        $this->User->set($this->data);
        if($this->User->LoginValidate()) {
            $email  = $this->data['User']['email'];
            $password = $this->data['User']['password'];

            $user = $this->User->findByUsername($email);
            if (empty($user)) {
                $user = $this->User->findByEmail($email);
                if (empty($user)) {
                    $this->Session->setFlash(__('Incorrect Email/Username or Password'));
                    return;
                }
            }
            // check for inactive account
            if ($user['User']['id'] != 1 and $user['User']['active']==0) {
                $this->Session->setFlash(__('Your registration has not been confirmed please verify your email or contact to Administrator'));
                return;
            }
            $hashed = md5($password);
            if ($user['User']['password'] === $hashed) {
                $this->UserAuth->login($user);
                $remember = (!empty($this->data['User']['remember']));
                if ($remember) {
                    $this->UserAuth->persist('2 weeks');
                }
                $OriginAfterLogin=$this->Session->read('Usermgmt.OriginAfterLogin');
                $this->Session->delete('Usermgmt.OriginAfterLogin');
                $redirect = (!empty($OriginAfterLogin)) ? $OriginAfterLogin : loginRedirectUrl;
                $this->redirect($redirect);
            } else {
                $this->Session->setFlash(__('Incorrect Email/Username or Password'));
                return;
            }
        }
    }
} 
```

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:56:26.507

如果您想将它们重定向到其他地方，请更改重定向行。这假设您的 User 模型与 Group 模型相关，并且递归级别允许您的 find 调用提取数据。

```
// original
$redirect = (!empty($OriginAfterLogin)) ? $OriginAfterLogin : loginRedirectUrl;
// new redirect, eg: /groups/view/3
$redirect = array(
  'controller' => 'groups', 
  'action' => 'view', 
  $user['Group']['id']
);
$this->redirect($redirect); 
```

# bash - Bash grep 将垂直列表转换为水平列表

> ID：11732338
> 
> 赞同：0
> 
> 时间：2012-07-31T02:36:51.523
> 
> 标签：bash, grep

我没有从以下代码中得到预期的结果：

```
#!/bin/bash
cat /home/opmeitle/html/fiesta-one.html | grep -oiE '([$][0-9.]{1,7})' 
```

这是输出：

```
$90.850
$0
$389
$469
$670
$750
$684
$21.744
$604 
```

这是我想要的结果，在控制台中。

```
$90.850 $0 $389 $469 $670 $750 $684 $21.744 $604 
```

我很感激你的回答。谢谢

路易斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:38:00.997

还有很多其他的解决方案：

```
$ echo $(grep -oiE '([$][0-9.]{1,7})' /home/opmeitle/html/fiesta-one.html)
$ grep -oiE '([$][0-9.]{1,7})' /home/opmeitle/html/fiesta-one.html | xargs echo
$ grep -oiE '([$][0-9.]{1,7})' /home/opmeitle/html/fiesta-one.html | tr '\n' ' '
$ grep -oiE '([$][0-9.]{1,7})' /home/opmeitle/html/fiesta-one.html | perl -pe 's/\n/ /;' 
```

并且没有`grep`：

```
$ perl -ne 'print "$1 " if /([\$][0-9.]{1,7})/' /home/opmeitle/html/fiesta-one.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T02:41:15.840

一个简单的解决方法是将换行符转换为空格（我还删除了您对 的不必要使用`cat`）：

```
grep -oiE '([$][0-9.]{1,7})' /home/opmeitle/html/fiesta-one.html | tr '\n' ' ' 
```

# mysql - 如果 value = 'x'，Mysql 运行 where 子句？

> ID：11732339
> 
> 赞同：1
> 
> 时间：2012-07-31T02:37:00.957
> 
> 标签：mysql, sql

我想做的是仅在某个值（将动态加载）=某个值时运行 where 子句。例如

`IF ('<=' == '$dynamic_value') THEN WHERE...`

这可能吗？（$dynamic 值将是 <= 或 >=）

换句话说，我只想在某个值发生或调用时才使用 where 子句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:40:42.777

`CASE`您可以像这样在`WHERE`子句中使用表达式：

```
SELECT *
FROM tbl
WHERE 
    CASE '$dynamic_value' 
        WHEN '>=' THEN column_a >= column_b AND other_conditions
        WHEN '<=' THEN column_a <= column_b AND other_conditions
        ELSE 1
    END 
```

如果`$dynamic_value`不等于`>=`or `<=`，`ELSE 1`则将由`WHERE`子句使用 - 这基本上就像根本没有`WHERE`子句（并返回所有记录）。

由于您似乎使用的是 PHP，并且 的值`$dynamic_value`只能是`>=`or `<=`，因此您可以直接插入参数，例如：

```
$sql = "
    SELECT *
    FROM tbl
    WHERE column_a $dynamic_value column_b"; 
```

当然，如果来自用户输入，那么请确保您正在检查`$dynamic_value`is`>=`或`<=`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:40:32.647

`IF`这通常不是条件，而是在`WHERE`. `AND`将您的动态值与和它一起与其对应的条件相匹配。

```
WHERE
  ('$dynamic_value' = '<=' AND othercolumn = othercondition)
  OR ('$dynamic_value' = '>=' AND othercolumn = someothercondition) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:40:19.043

您可以通过以下方式实现类似的*效果*：

```
WHERE $dynamic_value <> '<=' OR <your-other-clause> 
```

这样，除非设置为 ，否则该`<your-other-clause>`位将无效。`$dynamic_value``'<='`

# python - wx.FileSystem 和 wx.MemoryFSHandler 有什么区别

> ID：11732342
> 
> 赞同：0
> 
> 时间：2012-07-31T02:37:23.947
> 
> 标签：python, wxpython, wxwidgets

他们都有非常相似的方法，其中一个比另一个更安全，真正的区别是什么？

[http://wxpython.org/docs/api/wx.MemoryFSHandler-class.html](http://wxpython.org/docs/api/wx.MemoryFSHandler-class.html)

[http://wxpython.org/docs/api/wx.FileSystem-class.html](http://wxpython.org/docs/api/wx.FileSystem-class.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:46:17.960

根据下面的非官方文档，听起来 MemoryFSHandler 是 FileSystem 的一种类型或子类，这可能就是它们具有相似方法的原因。内存只是将数据存储在内存中的流中，而 FileSystem 只是一个文件打开器，很像 Python 自己的“打开”方法。就个人而言，我从来没有见过在实践中使用过这两种方法，尽管在谷歌搜索信息时，我发现 wx.HtmlWindow 在内部使用了这两种方法。不过，我总是使用 Python 的 I/O 库。

*   [http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.FileSystem.html](http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.FileSystem.html)
*   [http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.MemoryFSHandler.html](http://xoomer.virgilio.it/infinity77/wxPython/Widgets/wx.MemoryFSHandler.html)

# iphone - iPhone 应用程序在请求定位服务权限时崩溃

> ID：11732346
> 
> 赞同：0
> 
> 时间：2012-07-31T02:38:03.450
> 
> 标签：iphone, ios, cllocationmanager

我的应用程序有一个按钮，当点击该按钮时，它会获取手机的当前位置并将 CLLocation 对象的时间戳 (NSString) 附加到另一个字符串。

用户第一次使用应用程序并调用此方法时，应用程序崩溃：

'NSInvalidArgumentException'，原因：' *** -[__NSCFConstantString sringByAppendingString:]: nil 参数'

我可以理解，因为该应用还没有使用位置服务的权限，并且时间戳仍然为零。

同时，应用程序崩溃后，会向用户请求权限，一旦用户授予应用程序使用定位服务的权限，此问题就会消失。

如何阻止应用程序第一次崩溃？如果 [locationManager authorizationStatus] != 已授权，我试图在 viewWillLoad 中获取当前位置，但请求许可的通知只会立即出现。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:02:32.743

为确保您`nil`在有引发异常的风险时使用 a ，您可以非常简单地检查无效性：

```
if(stringToAppend) {
    // Do something with the string
} 
```

这样，如果对象为 nil，则不会执行有风险的代码，应用程序也不会崩溃。

# ruby - Sublime Text：Ruby 的关键字突出显示

> ID：11732351
> 
> 赞同：2
> 
> 时间：2012-07-31T02:38:39.703
> 
> 标签：ruby, sublimetext2

我正在使用 sublime text 2 编写 ruby​​ 代码。

有没有办法突出显示类似于括号匹配模式的关键字对（do...end）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:43:43.660

查看新的[Bracket Highlighter 2 alpha 分支](http://www.sublimetext.com/forum/viewtopic.php?f=5&t=9756)。我相信您现在可以自定义它来完成您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:43:00.117

看看名为 BracketHighlighter ( [github](https://github.com/facelessuser/BracketHighlighter) ) 的 Sublime 扩展。如果它不支持 Ruby，应该很容易添加 - 逻辑已经存在，您只需要添加“括号”。

# events - 非托管 C++ 如何实现 COM sink

> ID：11732361
> 
> 赞同：1
> 
> 时间：2012-07-31T02:40:04.337
> 
> 标签：events, com

我有 ac# COM 服务器为事件处理定义了一些委托。这是来自 MSDN 的示例代码：

```
using System;
using System.Runtime.InteropServices;
namespace Test_COMObject
{
public delegate void ClickDelegate(int x, int y);
public delegate void ResizeDelegate();
public delegate void PulseDelegate();

// Step 1: Defines an event sink interface (ButtonEvents) to be     
// implemented by the COM sink.
[GuidAttribute("1A585C4D-3371-48dc-AF8A-AFFECC1B0967")]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIDispatch)]
public interface MyButtonEvents
{
    void Click(int x, int y);
    void Resize();
    void Pulse();
}
// Step 2: Connects the event sink interface to a class 
// by passing the namespace and event sink interface
// ("EventSource.ButtonEvents, EventSrc").
[ComSourceInterfaces(typeof(MyButtonEvents))]
public class MyButton
{
    public event ClickDelegate Click;
    public event ResizeDelegate Resize;
    public event PulseDelegate Pulse;

    public MyButton()
    {
    }
    public void CauseClickEvent(int x, int y)
    {
        Click(x, y);
    }
    public void CauseResizeEvent()
    {
        Resize();
    }
    public void CausePulse()
    {
        Pulse();
    }
}
} 
```

但是 msdn 只提供了一个 VB 示例来实现 COM 客户端事件接收器，任何人都可以给我一个示例，非托管 c++ 是如何做到这一点的吗？下面是实现 COM 事件接收器的 vb 示例

```
' COM client (event sink)
' This Visual Basic 6.0 client creates an instance of the Button class and 
' implements the event sink interface. The WithEvents directive 
' registers the sink interface pointer with the source.
Public WithEvents myButton As Button

Private Sub Class_Initialize()
Dim o As Object
Set o = New Button
Set myButton = o
End Sub
' Events and methods are matched by name and signature.
Private Sub myButton_Click(ByVal x As Long, ByVal y As Long)
MsgBox "Click event"
End Sub

Private Sub myButton_Resize()
MsgBox "Resize event"
End Sub

Private Sub myButton_Pulse()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:00:12.937

语言运行时通常隐藏与从 COM 对象接收事件有关的大量管道。但是，如果您在原始 C++ 中执行此操作，则需要通过查询 IConnectionPointContainer 的接口指针来开始。这使您可以枚举所有传出接口。然后，您可以获取特定接口的 IConnectionPoint。然后调用它的 Advise() 方法来设置接收回调的接收器接口。这会给你一个cookie，你需要存储它。稍后当您想通过 Unadvise 呼叫取消订阅时。

它在 MSDN 库中描述得相当好，从[这里开始阅读](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686567%28v=vs.85%29.aspx)。

# css - 在样式表中从多个选择器中堆叠 CSS3 转换函数

> ID：11732363
> 
> 赞同：16
> 
> 时间：2012-07-31T02:40:11.903
> 
> 标签：css, css-transforms

假设我有 2 个 DIV：

```
​&lt;div class="div1"></div>
<div class="div2"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我想旋转它们：

```
div {
    position: absolute;
    width: 100px;
    height: 100px;
    -webkit-transform: rotate(30deg);
    -moz-transform: rotate(30deg);
} 
```

然后我想独立移动它们：

```
.div1 {
    background-color: red;
    -webkit-transform: translate(100px,0px);
    -moz-transform: translate(100px,0px);
}
.div2 {
    background-color: green;
    -webkit-transform: translate(0px,100px);
    -moz-transform: translate(0px,100px);
}​ 
```

问题是旋转和移动都使用该`transform`属性，因此移动会覆盖旋转。是否可以将值堆叠在一起而不是相互覆盖？

注意：
我将使用复杂的变换函数，而不仅仅是简单的翻译，所以我不能用 just`left`和`top`属性来代替它们。
我有*很多*DIV，因此在分配它们各自的属性之前选择所有 DIV 并应用它们的公共属性会更有效。

参考：[jsFiddle](http://jsfiddle.net/v8yKx/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T02:50:33.153

不幸的是，由于语法和级联的工作方式，您将无法按照所述堆叠转换。您必须在翻译之前重新声明旋转：

```
.div1 {
    background-color: red;
    -webkit-transform: rotate(30deg) translate(100px,0px);
    -moz-transform: rotate(30deg) translate(100px,0px);
}
.div2 {
    background-color: green;
    -webkit-transform: rotate(30deg) translate(0px,100px);
    -moz-transform: rotate(30deg) translate(0px,100px);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:34:48.997

如何使用关键帧？

演示：[jsFiddle](http://jsfiddle.net/c_vilander/7DeQj/)

代码：

```
.div1 {
    background-color: red;
    -webkit-animation: divone 2.0s ease-in-out forwards;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-delay: 1.0s;

}

.div2 {
    background-color: green;
    -webkit-animation: divtwo 2.0s ease-in-out forwards;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-delay: 1.0s;

}

@-webkit-keyframes divone
{

0%   {-webkit-transform: rotate(0deg);}
50%    {-webkit-transform: rotate(30deg);}
100%  {-webkit-transform: rotate(30deg) translate(100px,0px);}
}

@-webkit-keyframes divtwo
{
0%    {-webkit-transform: rotate(0deg);}
50%    {-webkit-transform: rotate(30deg);}
100%  {-webkit-transform: rotate(30deg) translate(0px,100px);}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:52:39.270

您说：“我有很多 DIV，因此在分配它们各自的属性之前选择所有 DIV 并应用它们的公共属性会更有效。” 它可能对您编码更有效，但不幸的是对结果没有。唯一的方法是在一个电话中完成所有这些（因为 BoltClock 刚刚击败我发布）。

要恢复效率，请考虑使用[LESS](http://lesscss.org/)或[SCSS](http://sass-lang.com/)预处理。[最近关于为多个转换设置 LESS 的问题的另一个答案可能对您有所帮助。](https://stackoverflow.com/questions/11419741/less-css-mixins-with-variable-number-of-arguments/11552717#11552717)

# r - doRedis 在 Ubuntu Linux、R 和 RStudio 中出现奇怪的套接字连接错误

> ID：11732368
> 
> 赞同：0
> 
> 时间：2012-07-31T02:40:46.183
> 
> 标签：r, ubuntu, redis, rstudio, r-doredis

我正在尝试使用 R 2.12.1 在我最新的 Ubuntu 10.0.4 环境中使用 doRedis R 包。我尝试下载最新的 2.15.1，但它会安装（使用 apt-get install ...）这个其他版本。无论如何，当我从 doRedis.R (http://bigcomputing.com/doredis.R) 运行以下行时：

```
library('doRedis') #no issues here 
registerDoRedis(queue='jobs') 
```

我得到以下错误：

```
registerDoRedis(queue='jobs')
Error in socketConnection(host, port, open = "a+b", blocking = TRUE, timeout = timeout) : 
  unused argument(s) (timeout = timeout) 
```

我也让 Redis 服务器运行等待接受没有问题的连接。我可以毫无问题地连接 Redis-cli 客户端。这对同一系统都是本地的。这在我的 Windows 7 上运行良好，没有任何问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:17:22.907

Ubuntu 在其自己的存储库中的版本相当旧。您可以将 CRAN 添加到您的`sources.list`并通过该存储库获取最新版本。阅读[此页面上](http://cran.r-project.org/bin/linux/ubuntu/)的说明以获取更多信息。

关于您的真正问题，似乎调用`socketConnection`包含它不支持的输入参数。请检查你运行的是哪个版本的包，和你在Windows 7下运行的一样吗？此外，请使用上面的链接将您的 R 版本升级到 2.15。

# mysql - 使用 MySQL LIKE 的正确语法？

> ID：11732369
> 
> 赞同：0
> 
> 时间：2012-07-31T02:41:00.887
> 
> 标签：mysql, select, sql-like

我有一堆 LIKE 语句的查询。我想优化/解释运行良好的查询。但是，如果我复制这个：

```
 SELECT a.*, p.ek, p.vk, p.waehrung, p.onlinepreis
     FROM arts a USE INDEX (i_aktiv, i_iln, i_marke )
         LEFT JOIN pls p ON 
           p.iln = a.iln  
         LEFT JOIN fbs zu 
           ON a.farbe = zu.farbe 
           WHERE a.aktiv = "ja"
           AND (
       a.artikelbezeichnung LIKE ? 
    OR a.artikelbezeichnung_lang LIKE ? 
            OR (   a.farbe LIKE '%decke%'
                 OR zu.systemfarbe LIKE '%decke%'
                 OR zu.systemfarbe_en LIKE '%decke%' 
                 )
                                ) 
            )
         ... 
```

作为我想添加`'%decke%'`的参数，但如果我使用`%%`.

知道我做错了什么吗？

我得到的错误是：

您的 SQL 语法有错误.... 检查附近... %'%'decke%' 在 OR ( a.farbe LIKE '%decke%' ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T02:44:45.520

对于通配符 LIKE 比较，您必须伪造它：

```
WHERE somefield LIKE CONCAT('%', ?, '%') 
```

通配符“喜欢”是参数化查询在他们的脸上平淡无奇的一个地方。

# c++ - 如何在 C++ 中使用 OpenCV 解码 mpeg 运动矢量？

> ID：11732373
> 
> 赞同：2
> 
> 时间：2012-07-31T02:41:40.203
> 
> 标签：c++, opencv, mpeg, motion, motion-detection

我想在 C++ 中使用 OpenCV 解码 MPEG 运动矢量。
OpenCV 中是否有任何函数可以让我们得到这个？
在我的情况下，整个视频的亮度可能不是恒定的。

我指的是[用于 MPEG 视频索引的高效摄像机运动表征论文](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=871569&url=http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=871569)

它说使用部分解码从 MPEG 压缩视频序列中获取运动矢量。但我无法确定如何使用 OpenCV 执行此操作。如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:17:39.247

OpenCV 使用 ffmpeg、v4linux 或 QuickTime 作为后端视频编码器/解码器。它无法访问内部数据或部分解码结果，因为它只是对其他库的包装。它所做的只是处理来自后端的帧并将它们转换为 IplImage 或 cv::Mat。

如果你想访问内部数据，你应该使用 ffmpeg 代码。

# encryption - 使用噪声填充进行编码/加密的名称是什么？

> ID：11732375
> 
> 赞同：0
> 
> 时间：2012-07-31T02:42:13.083
> 
> 标签：encryption

我希望代码用 n + x 位非顺序地渲染 n 位。我会用 Google 搜索它，但我的 Google-fu 不起作用，因为我不知道它的术语。

例如，第一列（2 位）中的输入值可能被编码为以下逗号分隔的第二列（4 位）中的任何输出值：

```
 0  1,2,7,9
 1  3,8,12,13
 2  0,4,6,11
 3  5,10,14,15 
```

我的目标是获取一个整数 ID 列表，并以它们仍可用于持久 URL 的方式对其进行转换，但不能按顺序迭代/枚举，并且客户端无法以编程方式确定搜索中的 URL结果集之前已访问过而没有再次访问过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:22:26.920

我将这个过程称为“编码”。您将看到类似的操作，以允许使用具有数据中不允许的特殊符号的通信通道。示例：uuencoding 和 base64 编码。

也就是说，您仍然需要（并且乍一看应该）确保只有一个正确的解码；并接受输出大小的增加（在上述情况下，输出将是大小的两倍，逐位作为输入）。

我认为您最好使用便宜的密码+存储在服务器上的恒定密钥对数字进行加密，在末尾添加一个或四个随机字符以及便宜的校验和，然后简单地拒绝任何不响应的响应'没有有效的校验和。

```
<encrypt(secret)>
    <integer>+<random nonsense>
</encrypt>
+
<checksum()>
    <integer>+<random nonsense>
</checksum> 
```

然后解密第一部分（记住，便宜 == 快），使用校验和验证密文，扔掉随机废话，并使用您存储的整数。

这里可能有一些密码学上的禁忌，但让我们面对现实吧，这个算法被破坏的成本有点偏低。

# iphone - NSInvalidArgumentException 错误

> ID：11732377
> 
> 赞同：-1
> 
> 时间：2012-07-31T02:42:27.103
> 
> 标签：iphone, objective-c, ios, xcode4.3

我试图将一个对象从一个视图控制器传递到另一个视图控制器，但它给出了一个错误，即

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[MapViewController setTMode:]: unrecognized selector sent to instance 0x866ed70'
*** First throw call stack:
(0x250b022 0x2709cd6 0x250ccbd 0x2471ed0 0x2471cb2 0x28044 0x250ce99 0x155c14e 0x155c0e6 0x1602ade 0x1602fa7 0x1602266 0x15813c0 0x15815e6 0x1567dc4 0x155b634 0x2c0bef5 0x24df195 0x2443ff2 0x24428da 0x2441d84 0x2441c9b 0x2c0a7d8 0x2c0a88a 0x1559626 0x261d 0x2595)
terminate called throwing an exception 
```

我对 .h 文件的方法是

```
@interface TransportViewController : UIViewController<UITextFieldDelegate>
{
    MapViewController *modeData;
    MapViewController *walkDistData;
    MapViewController *routeOptData;
    IBOutlet UITextField *tbMode;
    IBOutlet UITextField *tbWalkDist;
    IBOutlet UITextField *tbRouteOpt;
    IBOutlet UIPickerView *pickerView;
    NSMutableArray *modeArray;
    UITextField *activeField;
    IBOutlet UIButton *back;
}    

@property (retain, nonatomic) MapViewController *modeData;
@property (retain, nonatomic) MapViewController *walkDistData;
@property (retain, nonatomic) MapViewController *routeOptData;
@property (retain, nonatomic) IBOutlet UITextField *tbMode;
@property (retain, nonatomic) IBOutlet UITextField *tbWalkDist;
@property (retain, nonatomic) IBOutlet UITextField *tbRouteOpt;
@property (retain, nonatomic) IBOutlet UIButton *back;

- (IBAction) backAction:(id)sender;
@end 
```

这就是我的 .m 文件的方法

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    tbMode.delegate = self;
    tbWalkDist.delegate = self;
    tbRouteOpt.delegate = self;     
}
- (IBAction) backAction:(id)sender
{
    MapViewController *view=[[MapViewController alloc] initWithNibName:nil bundle:nil];
    self.modeData = view;
    self.walkDistData = view;
    self.routeOptData = view;
    // NSLog(@"%@", modeData); // this is where i test all the NSLog at
    modeData.tMode = tbMode.text;
    NSString *str = [tbWalkDist text];
    walkDistData.tWalkDist = [str intValue];
    routeOptData.tRouteOpt = tbRouteOpt.text;
    [self presentModalViewController:view animated:NO];

} 
```

错误在这些行中被捕获

```
modeData.tMode = tbMode.text;
NSString *str = [tbWalkDist text];
walkDistData.tWalkDist = [str intValue];
routeOptData.tRouteOpt = tbRouteOpt.text; 
```

我放了一个`NSLog(@"%@", modeData);`来检查值，它返回`<MapViewController: 0x84627a0>`

它`NSLog(@"%@", tbMode.text);`返回我`A`需要的值。

*错误是`modeData.tMode`& `walkDistData.tWalkDist`&`routeOptData.tRouteOpt`

我做错了什么 ？请帮忙 。我似乎无法弄清楚这个

我的第二个视图控制器 .h

```
@interface MapViewController : UIViewController
{
    NSString *tMode;
    NSString *tRouteOpt;
    int tWalkDist;
} 
@property(nonatomic, retain)NSString *tMode;
@property(nonatomic, retain)NSString *tRouteOpt;
@property(nonatomic)int tWalkDist; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:43:13.473

您需要在中合成`tMode`属性`MapViewController.m`：

```
@implementation MapViewController

@synthesize tMode;

... 
```

# python - Python 读取两个字符串之间的特定文本行

> ID：11732383
> 
> 赞同：5
> 
> 时间：2012-07-31T02:43:49.317
> 
> 标签：python, text, readlines

我无法让 python 读取特定的行。我正在做的是这样的：

```
lines of data not needed
lines of data not needed
lines of data not needed

--------------------------------------
    ***** REPORT 1 *****
--------------------------------------

[key] lines of interest are here
[key] lines of interest are here
[key] lines of interest are here
[key] lines of interest are here
[key] lines of interest are here      #This can also be the EOF

--------------------------------------    
    ***** REPORT 2 *****
--------------------------------------

lines of data not needed
lines of data not needed
lines of data not needed         #Or this will be the EOF 
```

我尝试过的是：

```
flist = open("filename.txt").readlines()

for line in flist:
  if line.startswith("\t**** Report 1"):
    break
for line in flist:
  if line.startswith("\t**** Report 2"):
    break
  if line.startswith("[key]"):
    #do stuff with data 
```

但是，当文件结束时没有结束分隔符时，我遇到了问题......例如不显示报告 #2 时。什么是更好的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T02:51:55.383

一项看起来应该可以解决您的问题的轻微修改：

```
flist = open("filename.txt").readlines()

parsing = False
for line in flist:
    if line.startswith("\t**** Report 1"):
        parsing = True
    elif line.startswith("\t**** Report 2"):
        parsing = False
    if parsing:
        #Do stuff with data 
```

如果您想避免解析“ ***** Report 1”...行本身，只需将开始条件放在 之后`if parsing`，即

```
flist = open("filename.txt").readlines()

parsing = False
for line in flist:

    if line.startswith("\t**** Report 2"):
        parsing = False
    if parsing:
        #Do stuff with data 
    if line.startswith("\t**** Report 1"):
        parsing = True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-29T17:21:18.757

这是使用 itertools 模块的可能替代方法。
尽管这里的问题需要检查 [key]，但我还添加了 itertool.islice() 以表明当用户有一些先验信息时，可以在*开始阅读标记之后跳过几行。*

```
from itertools import takewhile, islice, dropwhile

with open('filename.txt') as fid:
    for l in takewhile(lambda x: '***** REPORT 2 *****' not in x, islice(dropwhile(lambda x: '***** REPORT 1 *****' not in x, fid), 1, None)):
        if not '[key]' in l:
            continue
        print(l) 
```

# pipe - 如何避免 DummyNet 管道的开销

> ID：11732390
> 
> 赞同：2
> 
> 时间：2012-07-31T02:44:44.877
> 
> 标签：pipe, freebsd, lan, emulation, testbed

我正在做一个项目，我想模拟位于不同国家的节点等延迟。更具体地说，我想使用 DummyNet 在 LAN 中模拟 PlanetLab 系统。让局域网中的一个节点运行我的程序的多个实例，所以我想用 20 台机器实现在全球拥有 200-1000 个。

让我担心的是 DummyNet 管道的开销。如果我想在每台机器上安装 1000 个，预先制作它们，这将是一个很大的开销，因为这些机器不仅仅运行我的程序（它是多个组使用的测试平台）。

*这将是大约 1000 个管道，因为我希望每个实例与所有其他实例进行通信。

**问题 #1**：预先拥有大约 1000 个 DummyNet 管道真的是一个很大的开销吗？

**问题#2**：有没有办法以某种方式动态地创建它们（必要时打开它们）或任何其他方式来面对这个问题？

提前谢谢你的帮助 ：）

# bash - 在 1000 个文件中搜索一个字符串，每个文件大小为 1GB

> ID：11732396
> 
> 赞同：1
> 
> 时间：2012-07-31T02:45:49.603
> 
> 标签：bash, shell, unix, hadoop, grep

我正在研究 SunOS（有点脑残）。以下是上述 Solaris 机器的磁盘吞吐量 -

```
bash-3.00$ iostat -d 1 10
    sd0           sd1           sd2           sd3
kps tps serv  kps tps serv  kps tps serv  kps tps serv
  0   0    0  551  16    8  553  16    8  554  16    8
  0   0    0  701  11   25    0   0    0  1148  17   33
  0   0    0    0   0    0    0   0    0    0   0    0
  0   0    0    0   0    0    0   0    0    0   0    0
  0   0    0    0   0    0    0   0    0    0   0    0
  0   0    0    0   0    0    0   0    0    0   0    0
  0   0    0    0   0    0    0   0    0    0   0    0
  0   0    0    0   0    0    0   0    0    0   0    0
  0   0    0    0   0    0    0   0    0    0   0    0
  0   0    0    0   0    0    0   0    0    0   0    0 
```

**问题陈述**

我有`1000 files`，每个文件的大小为`1GB`. 我需要`String`在所有这些`1000 files`以及哪些文件中找到包含该特定字符串的文件。我正在使用`Hadoop File System`，所有这些`1000 files`都在 Hadoop 文件系统中。

所有的`1000 files`都在`real-time`文件夹下，所以如果我在下面这样做，我将获得所有`1000 files`. 我需要找到哪些文件包含特定的字符串。

```
bash-3.00$ hadoop fs -ls /apps/technology/b_dps/real-time 
```

因此，对于上述问题陈述，我使用以下命令来查找包含特定字符串的所有文件-

```
hadoop fs -ls /apps/technology/b_dps/real-time | awk '{print $8}' | while read f; do hadoop fs -cat $f | grep cec7051a1380a47a4497a107fecb84c1 >/dev/null && echo $f; done 
```

因此，在上述情况下，它将找到包含此字符串**cec7051a1380a47a4497a107fecb84c1**的所有文件。它对我来说工作正常，我能够获取包含特定字符串的文件名。

**我的问题是-**

但是上面命令的问题是，它**非常非常慢**。那么我们有什么办法可以`parallelize`使用上述命令或使上述命令更快地搜索文件？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:57:48.533

如果需要，您可以编写一个简单的 MapReduce 作业来实现此目的。不过，您实际上并不需要任何减速器，因此减速器的数量将设置为零。通过这种方式，您可以利用 MapReduce 和块的并行处理能力，尽管文件比串行 grep 快得多。

只需设置一个可以配置为搜索您想要的字符串的映射器。您可能会使用 TextInputFormat 读取文件，拆分行并检查您正在搜索的值。然后，您可以为匹配的 Mapper 写出当前输入文件的名称。

**更新：**

要开始这个，您可以从标准字数示例开始：[http](http://wiki.apache.org/hadoop/WordCount) ://wiki.apache.org/hadoop/WordCount 。您可以删除 Reducer，只需修改 Mapper。它每次读取输入一行，其中该行作为 Text 对象包含在值中。我不知道您的数据是什么格式，但您甚至可以将文本转换为字符串并针对该值硬编码 .contains("") 以找到您正在搜索的字符串（为了简单起见，而不是速度或最佳实践）。您只需要在遇到命中时检查 Mapper 正在处理的文件，然后写出文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:59:37.530

您可以从 grep 类中获得提示。它随示例文件夹中的分发一起提供。

./bin/hadoop jar hadoop-mapred-examples-0.22.0.jar grep 输入输出正则表达式

有关此类实现的详细信息源，您可以转到该目录。发行版附带的“src\examples\org\apache\hadoop\examples”

## 所以你可以在你的主课上这样做：

```
 Job searchjob = new Job(conf);    
 FileInputFormat.setInputPaths("job Name", "input direcotory in hdfs");
      searchjob.setMapperClass(SearchMapper.class);    
      searchjob.setCombinerClass(LongSumReducer.class);
      searchjob.setReducerClass(LongSumReducer.class); 
```

* * *

**在您的 SearchMapper.class 中，您可以执行此操作。**

```
 public void map(K key, Text value,
                      OutputCollector<Text, LongWritable> output,
                      Reporter reporter)
        throws IOException {
        String text = value.toString();
        Matcher matcher = pattern.matcher(text);
        if(matcher.find()) {
          output.collect(key,value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T02:57:32.773

如果您有 1000 个文件，是否有任何理由使用细粒度并行化技术？为什么不直接使用 xargs 或 gnu 并行，并将工作拆分到文件中，而不是将工作拆分到文件中？

此外，您似乎在 grepping 一个文字字符串（不是正则表达式）；您可以使用 -F grep 标志来搜索字符串文字，这可能会加快速度，具体取决于 grep 的实现/优化方式。

我没有专门使用 mapReduce，所以这篇文章可能会也可能不会。

# java - 读取 system.in 时，Runtime.exec 永远不会返回

> ID：11732399
> 
> 赞同：2
> 
> 时间：2012-07-31T02:46:09.180
> 
> 标签：java, multiprocessing, stdin, runtime.exec

这是我的示例代码，我想在运行新的子进程时处理来自标准输入的命令。但是，如果我读取 system.in，exec 方法将永远不会返回。exec() 中的命令非常简单，与标准输入无关。

我想知道有没有办法解决这个问题？如何在启动另一个读取标准输入的线程时启动一个新的子进程？

```
public static void main(String[] args){
    new Thread(new Runnable(){
        public void run(){
            BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
            String command = null;
            try{
                while((command = reader.readLine()) != null){
                    System.out.println("Command Received:" + command);
                }
            }catch(Exception ex){
                ex.printStackTrace();
                //failed to listening command
            }

        }
    }).start();
    Process process = null;
    try {
        process = Runtime.getRuntime().exec("java -cp C:/agenttest Test");
        System.out.println("never returns");
        process.waitFor();
    } catch (IOException e) {
        throw new RuntimeException( e );
    } catch (InterruptedException e) {
        throw new RuntimeException( e );
    }
} 
```

Test类很简单，这里是Test.java

```
public static void main(String[] args){
    System.out.println("Standard out");
    System.out.println("Standard out");
    System.err.println("Standard err");
    System.out.println("Standard out");
    try{
        Thread.sleep(10000);
    }catch(InterruptedException ex){}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:49:20.217

问题可能是您没有处理错误流和输入流，并且超出了平台的缓冲区。尝试按照著名文章[When Runtime.exec() won't](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)处理该输出。

例如：

```
import java.io.*;

public class TestMain {
   private static final String JAVA_CMD = "java";
   private static final String CP = "-cp";

   // *** your CLASS_PATH and PROG Strings will of course be different ***
   private static final String CLASS_PATH = "C:/Users/hovercraft/Documents/workspace/Yr 2012A/bin";
   private static final String PROG = "yr12.m07.b.Test2";

   private static final String[] CMD_ARRAY = { JAVA_CMD, CP, CLASS_PATH, PROG };

   public static void main(String[] args) {
      new Thread(new Runnable() {
         public void run() {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                  System.in));
            String command = null;
            try {
               while ((command = reader.readLine()) != null) {
                  System.out.println("Command Received:" + command);
               }
            } catch (Exception ex) {
               ex.printStackTrace();
               // failed to listening command
            }

         }
      }).start();
      Process process = null;
      try {
         ProcessBuilder processBuilder = new ProcessBuilder(CMD_ARRAY);
         process = processBuilder.start();
         InputStream inputStream = process.getInputStream();
         setUpStreamGobbler(inputStream, System.out);

         InputStream errorStream = process.getErrorStream();
         setUpStreamGobbler(errorStream, System.err);

         System.out.println("never returns");
         process.waitFor();
      } catch (IOException e) {
         throw new RuntimeException(e);
      } catch (InterruptedException e) {
         throw new RuntimeException(e);
      }
   }

   public static void setUpStreamGobbler(final InputStream is, final PrintStream ps) {
      final InputStreamReader streamReader = new InputStreamReader(is);
      new Thread(new Runnable() {
         public void run() {
            BufferedReader br = new BufferedReader(streamReader);
            String line = null;
            try {
               while ((line = br.readLine()) != null) {
                  ps.println("process stream: " + line);
               }
            } catch (IOException e) {
               e.printStackTrace();
            } finally {
               try {
                  br.close();
               } catch (IOException e) {
                  e.printStackTrace();
               }
            }
         }
      }).start();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:41:18.677

你应该继续阅读输入流，否则它会被阻塞。它与 JVM 无关，而与底层操作系统无关。

# ruby-on-rails - 与 Rspec 和 Capybara 的多个会话？

> ID：11732400
> 
> 赞同：1
> 
> 时间：2012-07-31T02:46:27.073
> 
> 标签：ruby-on-rails, rspec, tdd, capybara, bdd

尝试使用会话，但得到奇怪的结果。

以下 RSpec 代码似乎正在生成 2 个单独的会话：

```
visit start_path
post session_path, { foo: "bar" } 
```

在 start_path 控制器调用的方法中：

session[:started] = 'yes' puts "Start: #{session.inspect}"

在会话控制器中：

```
def create
  session[:foo] = params[:foo]
  head :created
  puts "Sessions controller: #{session.inspect}"
end 
```

输出如下所示：

```
Start: {"session_id"=>"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" ...
Sessions controller: {"session_id"=>"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy" ... 
```

会话 ID 不同。

这是因为 RSpec 正在创建 2 个会话，post 调用创建了一个单独的会话，还是我的应用程序正在做一些事情来分离会话？

为什么要创建 2 个会话？

尝试更改`create`为另一个名称，但这并没有什么不同。

使用 cookie 存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-15T19:53:02.017

在现代 Capybara 版本中，您可以通过简单的方式进行操作：

```
 it 'should testing' do
    login user1
    # do stuff

    Capybara.using_session :user2 do
      login user2
      # do something in another chrome window as user2
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:23:29.990

感谢 Stack Overflow，在这里找到了解决方案：[Rails - Losing session with Integration Tests and Capybara - CSRF related?](https://stackoverflow.com/questions/6605364/rails-losing-session-with-integration-tests-and-capybara-csrf-related)

问题是 Capybara 有自己的会话。

需要使用`page.driver.post`而不是`post`！

# c - 如何在 C 中正确地“printf”一个整数和一个字符串？

> ID：11732402
> 
> 赞同：27
> 
> 时间：2012-07-31T02:46:31.027
> 
> 标签：c, string, input, printf

我有以下代码：

```
char *s1, *s2;
char str[10];

printf("Type a string: ");
scanf("%s", str);

s1 = &str[0];
s2 = &str[2];

printf("%s\n", s1);
printf("%s\n", s2); 
```

当我运行代码时，输​​入“A 1”如下：

```
Type a string: A 1 
```

我得到以下结果：

```
A
�&lt;� 
```

我正在尝试将第一个字符读取为字符串，将第三个字符读取为整数，然后将它们打印在屏幕上。第一个字符总是有效，但之后屏幕只会显示随机的东西......我应该如何解决它？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-31T02:50:08.563

你在正确的轨道上。这是一个更正的版本：

```
char str[10];
int n;

printf("type a string: ");
scanf("%s %d", str, &n);

printf("%s\n", str);
printf("%d\n", n); 
```

让我们来谈谈变化：

1.  分配一个 int ( `n`) 来存储您的号码
2.  告诉`scanf`先读入一个字符串，然后读入一个数字（`%d`表示数字，正如您已经从您的`printf`

这就是它的全部内容。您的代码仍然有点危险，因为任何超过 9 个字符的用户输入都会溢出`str`并开始践踏您的堆栈。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T02:51:04.403

`scanf("%s",str)`仅扫描直到找到空白字符。使用 input `"A 1"`，它将仅扫描第一个字符，因此`s2`指向恰好位于 in 的垃圾`str`，因为该数组未初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-07T08:17:05.337

试试这个代码我的朋友...

```
#include<stdio.h>
int main(){
   char *s1, *s2;
   char str[10];

   printf("type a string: ");
   scanf("%s", str);

   s1 = &str[0];
   s2 = &str[2];

   printf("%c\n", *s1);   //use %c instead of %s and *s1 which is the content of position 1
   printf("%c\n", *s2);   //use %c instead of %s and *s3 which is the content of position 1

   return 0;
} 
```

# c - 如何在 C 中不使用 malloc 跟踪和排序指针？

> ID：11732403
> 
> 赞同：1
> 
> 时间：2012-07-31T02:46:38.843
> 
> 标签：c, pointers

我想知道是否有人对跟踪和排序一些指针有建议。每个指针都指向一个包含一些元素的结构（struct1_t）。

我还需要能够（非常快速地）找到具有最多元素的 struct1_t 来添加新元素（从列表中删除完整的元素），但是 struct1_t s 可能会改变它们拥有的元素的数量（增加最多或仅随机递减），因此我需要能够在此存储中快速更新它。所有新的 struct1_t 添加时都有 0 个元素，或 (MAX - 1) 个元素。

但是，这里的挑战是我不知道使用链表的方法，因为不幸的是，我无法使用 malloc。我只能一次分配和释放整个页面（或多个页面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:06:34.163

我认为你可以这样做，定义一个结构

```
struct node{
     int data;
     struct node *prev;
     struct node *next;
}; 
```

如果不能使用malloc，可以声明一个全局数组

```
struct node elements[ENOUGH_SPACE]; 
```

然后像 malloc 的结果一样使用这个数组的每个元素，比如

```
struct node *p = &elements[i];
p->next = ...
p->prev = ... 
```

# android - 为安卓应用创建缓存

> ID：11732406
> 
> 赞同：2
> 
> 时间：2012-07-31T02:47:13.907
> 
> 标签：android, caching

我正在开发一个 android 应用程序，其目的是将一些数据发送到服务器。但是，有时可能没有wifi连接，所以我想问一下是否可以创建一个缓存来存储多组数据，比如3组，然后应用程序会在连接可用时自动发送这些数据.

这是我最近将数据发送到服务器的方式：

```
private class GrabURL extends AsyncTask<String, Void, Void>{
    //ArrayList object for storing the string pairs
    ArrayList<NameValuePair> nameValuePairs;

    public GrabURL() { 
        //constructor of the class
        nameValuePairs = new ArrayList<NameValuePair>(); 
      } 

    protected void onPreExecute(String key, String value) {
        //store the pair of values into the ArrayList 
        nameValuePairs.add(new BasicNameValuePair(key,value));
        }

    @Override
    protected Void doInBackground(String... urls) {
        // TODO Auto-generated method stub
        //Operation being executed in another thread
        try{
            //set up the type of HTTPClient
            HttpClient client = new DefaultHttpClient();
            //set up the location of the server
            HttpPost post = new HttpPost(urls[0]);
            //translate form of pairs to UrlEncodedFormEntity 
            UrlEncodedFormEntity ent = new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8);
            //set up the entity being sent by post method
            post.setEntity(ent);
            //execute the url and post the values
            //client.execute(post);
            HttpResponse responsePOST = client.execute(post); 
            HttpEntity resEntity = responsePOST.getEntity();
            line = EntityUtils.toString(resEntity);
         } catch (Exception e) {
             //catch the exception
            line = "Can't connect to server";
         }
        return null;
    }

    protected void onPostExecute(Void unused) {
        Toast.makeText(getApplicationContext(), "Value updated", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:57:34.397

这可能有助于为对象+图像缓存提供抽象缓存库；

[通用商店 for-android >>](https://github.com/wareninja/generic-store-for-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:15:17.707

要存储原始内容，您可以简单地使用**SharedPreferences**，一旦网络可用，您就可以检查 SharedPreferences 中是否存在具有特定键的内容。如果您不将数据写入持久环境（如 SharedPreferences、Sqlite、SD 卡或内部存储中的文件等），关闭应用程序将导致您的数据丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:53:49.387

我认为缓存数据很简单，您可以将其存储在内存中或将它们存储为文件。您可以侦听网络状态更改事件，以便在有可用连接时得到通知。

这是[示例代码](http://www.netmite.com/android/mydroid/frameworks/base/core/java/android/net/NetworkConnectivityListener.java)。

# iphone - stringWithFormat 和 % 不起作用

> ID：11732410
> 
> 赞同：0
> 
> 时间：2012-07-31T02:47:23.357
> 
> 标签：iphone, objective-c, xcode, nsstring

我有这个字符串

```
 NSString *jsonString = @"http://www.soccerway.com/a/block_home_matches?block_id=block_home_matches_14&callback_params=%7B%22date%22%3A%222012-07-31%22%2C%22display%22%3A%22all%22%7D&action=showMatches&params=%7B%22competition_id%22%3A721%7D";
 NSLog(@"%@",jsonString);

the output is 

http://www.soccerway.com/a/block_home_matches?block_id=block_home_matches_14&callback_params=%7B%22date%22%3A%222012-07-31%22%2C%22display%22%3A%22all%22%7D&action=showMatches&params=%7B%22competition_id%22%3A721%7D 
```

当我使用

```
 NSString *linkId = @"448";//not a constant value only for example 
 NSString *jsonString = [NSString stringWithFormat:@"http://www.soccerway.com/a/block_home_matches?block_id=block_home_matches_14&callback_params=%7B%22date%22%3A%222012-07-31%22%2C%22display%22%3A%22all%22%7D&action=showMatches&params=%7B%22competition_id%22%3A%@%7D",linkId];

 the output is 

http://www.soccerway.com/a/block_home_matches?block_id=block_home_matches_14&callback_params=7                 37040ate23A222㿠                 37040isplay23A0x1.21800000507cp-1027ll27D&action=showMatches&params=7                     –ompetition_id23A(null)      0 
```

如您所见，不一样。我的问题是如何使用 stringWithFormat 来获得此结果：

```
 http://www.soccerway.com/a/block_home_matches?block_id=block_home_matches_14&callback_params=%7B%22date%22%3A%222012-07-31%22%2C%22display%22%3A%22all%22%7D&action=showMatches&params=%7B%22competition_id%22%3A448%7D 
```

所以值 (721) 就在 and 被替换为 (448) 提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:52:30.263

这是因为格式字符串中的所有这些`%`字符都可能被用于使用格式参数，就像`%@`（有关详细信息，请参见[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)）。

这可以看出（例如），其中：

```
callback_params=%7B%22date 
```

转化为：

```
callback_params=7                 37040ate 
```

在这种情况下，我不确定它在`%7B`做什么，因为它不是一个有效的格式说明符，但它`%22date`会产生一个 22 个字符的十进制值，从 开始`%22d`，后跟文字`ate`。

如果您想在输出字符串中`%%`使用单个，则需要在格式字符串中使用。`%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T02:56:17.303

另一种看待它的方式是，您作为格式字符串提供的东西实际上是数据，而不是纯粹的格式。

为了避免这些虚假转换，您需要：

```
NSString *jsonString = [NSString stringWithFormat:@"%@%@%@", @"http://www.soccerway.com/a/block_home_matches?block_id=block_home_matches_14&callback_params=%7B%22date%22%3A%222012-07-31%22%2C%22display%22%3A%22all%22%7D&action=showMatches&params=%7B%22competition_id%22%3A",linkId, @"%7D"]; 
```

# php - JSON 文件包含不需要的空格和换行符

> ID：11732417
> 
> 赞同：0
> 
> 时间：2012-07-31T02:48:27.670
> 
> 标签：php, json

我尝试使用 PHP 解析一个大的 JSON 文件，但它总是给我错误。
当我尝试使用[http://jsonlint.com/](http://jsonlint.com/)验证 JSON 文件时，我遇到了很多错误，其中一些单词被“不需要的”空格和换行符分隔，如下所示：

```
{
                "id": "1",
                "qn
 ame": "detik.co.id.",
                "source": "undefined"
}, 
```

注意“qname”这个词被分成“qn”和“ame”。在这两者之间有空格和换行符。

正确的应该是这样的：

```
{
                    "id": "1",
                    "qname": "detik.co.id.",
                    "source": "undefined"
 }, 
```

因为有很多类似的错误，手动删除这些字符会很痛苦。有没有更快的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:50:58.347

根据数据，您可以去掉*所有*的空格和换行符：

```
tr -d ' \n' < input_json.txt > spaceless_json.txt 
```

但是，如果您的数据带有嵌入式空格，那么这当然会中断，例如：

```
"var one" : 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:04:28.423

如果命令行选项不起作用，请尝试 str_replace()：

```
$parsed = json_decode( str_replace( array( "\r\n", "\r", "\n", "\t" ), '', $nasty_string_from_file ) ); 
```

# ios - Cocos2d - 平铺贴图错误

> ID：11732421
> 
> 赞同：0
> 
> 时间：2012-07-31T02:49:00.253
> 
> 标签：ios, xcode, cocos2d-iphone

每当我将 tilemap 添加到我的 Cocos2d 项目时，我要么收到错误消息，要么幸运地至少实现了黑屏而不会导致应用程序崩溃。Xcode 返回的错误是：

```
rect.origin.x = (gid % max_x) * (tileSize_.width + spacing_) + margin_; 
```

日志返回

```
2012-07-30 22:40:29.237 Tile Map Game[8233:c07] cocos2d: Couldn't add image:Xcode/Game Development/Tilesets/Desert_Tileset.png in CCTextureCache 
```

最后但并非最不重要的是我的代码

```
-(id) init
 {
     if( (self=[super init] )) {

         self.tileMap = [CCTMXTiledMap tiledMapWithTMXFile:@"DesertMap.tmx"];
         self.backgroundLayer = [tileMap layerNamed:@"Background"];

         [self addChild:tileMap z:-1];

      }
     return self;
 }

 - (void) dealloc {

     self.tileMap = nil;
     self.backgroundLayer = nil;

     [super dealloc];
 } 
```

这里发生了什么？我已经尝试了很多tileset首选项，例如从0到1的边距间距，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:03:23.927

保存在 TMX 文件中的图像使用相对路径：

```
Xcode/Game Development/Tilesets/Desert_Tileset.png 
```

此路径通常不存在于您的 iOS 项目中，因为 app bundle 会展平所有文件夹，以便所有文件都位于 app bundle 中的同一路径中。

在编辑和将它们添加到项目时，您应该将您的 tileset 文件与 TMX 文件放在同一个文件夹中。

在这种情况下，您可能需要在 Tiled 中删除并重新添加图块集，或者只需编辑 TMX 文件（在此之前在 Tiled 中将其关闭）并删除图块集的路径。尤其是如果您已经向瓦片集添加了属性，这将是更简单的选择，因为您不必重新编辑瓦片集（瓦片）属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:37:16.620

将 Desert_Tileset.png 图像添加到您的资源中。我像这样解决了我的错误。

# java - 没有继承就可以实现多态性吗？

> ID：11732422
> 
> 赞同：64
> 
> 时间：2012-07-31T02:49:12.473
> 
> 标签：java, oop, inheritance, polymorphism

在一次采访中，有人问我是否可以在没有继承的情况下实现多态性。这可能吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-31T03:13:36.763

我读过的关于这个主题的最佳解释是著名类型理论家[Luca Cardelli的一篇文章。](http://en.wikipedia.org/wiki/Luca_Cardelli)这篇文章名为[On Understanding Types, Data Abstraction, and Polymorphism](http://lucacardelli.name/Papers/OnUnderstanding.A4.pdf)。

## 多态性的类型

Cardelli 在本文中定义了几种类型的多态性：

*   普遍的
    *   参数
    *   包容
*   特别指定
    *   重载
    *   强迫

与遗传相关的多态性分为包含多态性或亚型多态性。

[维基百科](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)提供了一个很好的定义：

> 在面向对象的编程中，子类型多态性或包含多态性是类型理论中的一个概念，其中一个名称可以表示许多不同类的实例，只要它们与某个公共超类相关。包含多态性通常通过子类型来支持，即不同类型的对象完全可以替代另一种类型的对象（它们的基类型），因此可以通过公共接口处理。或者，可以通过类型强制（也称为类型转换）来实现包含多态性。

[另一篇名为“面向对象编程中的多态性”的](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)Wikipedia 文章似乎也回答了您的问题。

## 在 Java 中

Java 中的这种子类型化特性是通过类和接口的继承等方式实现的。尽管 Java 的子类型化特性在继承方面可能并不总是很明显。以泛型的协变和逆变的情况为例。此外，数组是可序列化和可克隆的，尽管这在类型层次结构中的任何地方都不明显。也可以说，通过原始扩展转换，Java 中的数字运算符是多态的，在某些情况下甚至可以接受完全不相关的操作数（即字符串和数字或字符串加上其他对象的连接）。还要考虑对基元进行装箱和拆箱的情况。后一种多态性（强制和重载）与继承无关。

## 例子

**包容性**

```
List<Integer> myInts = new ArrayList<Integer>(); 
```

这就是您的问题似乎所指的情况，即类型之间存在继承或实现关系时，例如 ArrayList 实现 List 的情况。

不过，正如我所提到的，当您介绍 Java 泛型时，有时子类型化的规则会变得模糊：

```
List<? super Number> myObjs = new ArrayList<Object>();
List<? extends Number> myNumbers = new LinkedList<Integer>(); 
```

在其他情况下，API 中的关系甚至不明显

```
Cloneable clone = new int[10];
Serializable obj = new Object[10] 
```

尽管如此，根据 Cardelli 的说法，所有这些都是通用多态性的形式。

**参数**

```
public <T> List<T> filter(Predicate<T> predicate, List<T> source) {
  List<T> result = new ArrayList<>();
  for(T item : source) {
    if(predicate.evaluate(item)){
         result.add(item);
    }
   return result;
  }
} 
```

相同的算法可用于过滤具有各种谓词的各种列表，而无需为每种可能的列表类型重复一行代码。实际列表的类型和谓词的类型是参数化的。[请参阅JDK 8 Preview](http://jdk8.java.net/lambda/)中可用的 lambda 表达式示例（为了谓词实现的简洁性）。

```
filter(x -> x % 2 == 0, asList(1,2,3,4,5,6)); //filters even integers
filter(x -> x % 2 != 0, asList(1L,2L,3L,4L,5L,6L)); //filters odd longs
filter(x -> x >= 0.0, asList(-1.0, 1.0)); //filters positive doubles 
```

根据 Cardelli 的说法，这是一种通用多态性。

**强迫**

```
double sum = 1 + 2.0; 
```

整数和浮点运算是完全不同的。如果没有某种形式的强制，在这里将加号运算符应用于不同类型的两个操作数是不可能的。

在此示例中，类型 integer 和 double 会自动强制（转换）为 double 类型，而无需显式强制转换。整个表达式提升为两倍。之所以如此，是因为在 Java 中我们有原始的扩展转换。

根据 Cardelli 的说法，这种形式的自动强制转换是为加号运算符提供的一种特殊多态性形式。

有些语言在没有显式转换的情况下甚至无法对整数和浮点数求和（即 AFAIK、SML，顺便说一下，参数多态性是克服此类问题的关键）。

**重载**

```
double sum = 2.0 + 3.0;
String text = "The sum is" + sum; 
```

此处的加号运算符表示两种不同的东西，具体取决于所使用的参数。显然，操作员已经超载。这意味着它根据操作数的类型具有不同的实现。根据 Cardelli 的说法，这是为加号运算符提供的一种特殊多态性形式。

当然，这也适用于类中的方法重载形式（即 java.lang.Math 方法 min 和 max 被重载以支持不同的原始类型）。

## 其他语言

即使继承在这些形式的多态性的实现中发挥了重要作用，当然它也不是唯一的方法。其他非面向对象的语言提供其他形式的多态性。例如，在Python 等动态语言甚至 Go 等静态类型语言中的[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)，或SML、Ocaml 和 Scala 等语言中的[代数数据类型](http://en.wikipedia.org/wiki/Algebraic_data_type)，或Haskell 等语言中的[类型类](http://en.wikipedia.org/wiki/Type_class)，Clojure中的[多方法](http://clojure.org/multimethods), JavaScript 中的[原型继承](https://en.wikipedia.org/wiki/Prototype-based_programming)等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-07T18:12:22.907

即席多态 > 运算符重载 > 没有继承

Ad-hoc 多态性 > 方法重载 > 没有继承

即席多态性 > 方法覆盖 > 具有继承

参数多态 > 泛型 > 没有继承

子类型多态或包含多态 > 多态赋值 > 具有继承

子类型多态或包含多态 > 多态返回类型 > 具有继承

子类型多态或包含多态 > 多态参数类型 > 具有继承

强制多态 > 扩展 > 有或没有继承

强制多态 > 自动装箱和拆箱 > 没有继承

强制多态性 > Var args > 没有继承

强制多态 > 类型转换 > 没有继承

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-31T02:52:44.707

当然。在 Java 中，您可以让两个类实现相同的接口，并且它们的结果是多态的。没有继承任何功能。

```
public interface Foo {
  public int a();
}

public class A implements Foo {
  public int a() {
    return 5;
  }
}

public class B implements Foo {
  public int a() {
    return 6;
  }
} 
```

然后在其他地方：

```
Foo x = new A();
System.out.println(x.a())
Foo y = new B();
System.out.println(y.a()) 
```

`x`和都是s，但是当你调用它们时它们有不同的`y`结果。`Foo``a()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T02:58:31.573

**静态类型**

重载 - 这意味着具有相同名称但签名不同的多个方法，无需覆盖即可

```
class StaticPolyExample
{
void print(int s)
{
    //print s
}

void print(String s)
{
    //print s
}

} 
```

**动态类型**

覆盖 - 这意味着超类中的方法将在需要继承的子类中重新定义

```
class Printer
{
void print(String s)
{
  // prints String
}

}

class diffPrinter extends Printer
{
void print(String s)
{
  // prints String differently
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:17:54.713

函数重载是一种多态性（尽管它不是真正的多态性），可以在没有继承的情况下实现。

例如

```
class Foo { 
public void Arrest( Animal A){
    /*code...*/
 }  
public void Arrest( Terrorist T ) {
    /*code...*/
 }  

}

from main :

Foo f= new Foo();
f.Arrest( new Lion() );
f.Arrest(new Terrorist()); 
```

Arrest 方法被调用了 2 次，但代码的执行路径不同。

*这又不是多态性的真正形式。没有继承一般无法实现真正​​的多态性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T02:52:18.267

是的，我认为他们可能想通过接口了解多态性。因此，如果有 2 个类从同一个接口实现，那么我们可以在我们期望具有这种接口的对象的所有地方使用。参见维基百科的代码：

```
// from file Animal.java

public interface Animal {
        public String talk();
}

// from file Cat.java

public class Cat implements Animal {
        @Override
        public String talk() {
                return "Cat says Meow!";
        }
}

// from file Dog.java

public class Dog implements Animal {
        @Override
        public String talk() {
                return "Dog says Woof! Woof!";
        }
}

// from file PolymorphismExample.java

public class PolymorphismExample {

        public static void main(String[] args) {
                Collection<Animal> animals = new ArrayList<Animal>();
                animals.add(new Cat());
                animals.add(new Dog());

                for (Animal a : animals) {
                        System.out.println(a.talk());
                }
        }

} 
```

# sql - 如何评估 WHERE 子句中的输入

> ID：11732423
> 
> 赞同：3
> 
> 时间：2012-07-31T02:49:15.180
> 
> 标签：sql, sql-server-2008, tsql

我在我的一个变量中得到一个输入，基本上我想做类似的事情

```
SELECT * FROM PEOPLE
WHERE 
     IF @INPUT = 1
         ITEMID = 16 OR ITEMID = 13
     ELSE IF @INPUT = 2
         ITEMID = 11 OR ITEMID = 14
     ELSE
         ITEMID = 0 
```

有没有办法做到这一点，如果这是错误的，请原谅，但我想尽可能容易理解地描述我的问题。

在此之前我尝试过使用 CASE

```
WHERE 
    CASE @INPUT
       WHEN 1 THEN ITEMID = 16 OR ITEMID = 13
       WHEN 2 THEN ITEMID = 11 OR ITEMID = 14
       ELSE ITEMID = 0
    END 
```

但是所有这些方法都会引发错误，如果可能的话，我会很感激一个好的建议，更有效的方法来做到这一点。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T02:54:10.580

```
 WHERE (@INPUT = 1 AND ITEMID IN (13,16)) 
    OR (@INPUT = 2 AND ITEMID IN (11,14))
    OR (@INPUT NOT IN (1,2) AND ITEMID = 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:27:25.600

只是为了给另一个答案..

```
WHERE (@INPUT in (1,2) AND ITEMID+2*@INPUT IN (15,18))
OR (@INPUT NOT IN (1,2) AND ITEMID = 0) 
```

或者

```
WHERE (@INPUT in (1,2) AND ITEMID IN (15-2*@INPUT,18-2*@INPUT))
OR (@INPUT NOT IN (1,2) AND ITEMID = 0) 
```

工作，因为当`@input = 1`：

*   `if ITEMID = 13, ITEMID + 2*1 = 15`
*   `if ITEMID = 16, ITEMID + 2*1 = 18`

什么时候`@input = 2`：

*   `if ITEMID = 11, ITEMID + 2*2 = 15`
*   `if ITEMID = 14, ITEMID + 2*2 = 18`

但是你永远不应该使用它，除非你有意隐藏你的代码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:43:28.943

不要过多地混淆这个问题，但我会很快指出，在我看来，Cory 在他建议一个新专栏时是在正确的轨道上，但我可以理解你并不总是有自由改变你的数据结构。

但是，如果我不能更改我的数据结构，我仍然希望我的 SELECT 语句以这样一种方式进行，就好像我确实有完美的结构可以使用一样。

为此，我倾向于使用 APPLY 添加一个额外的派生列，我可以在 WHERE 或 SELECT 子句中引用该列。

例如：

```
SELECT
    *
FROM People p
    CROSS APPLY (
        SELECT
            CASE
                WHEN p.ItemID IN (13,16) THEN 1
                WHEN p.ItemID IN (11,14) THEN 2
                ELSE 0
            END        AS ItemCode
    ) pInfo
WHERE
    @Input = pInfo.ItemCode 
```

但实际上我只是太喜欢使用 CROSS APPLY 了。

这样做的好处是，如果您想重用该条件逻辑（例如通过添加`SELECT pInfo.ItemCode`，甚至`GROUP BY pInfo.ItemCode`），那么它都包含在一个地方。

此外，如果您确实添加了 Cory 提到的那一列，那么查询中您使用 ItemCode 数据的任何位置都已经针对您创建的新结构进行了优化。

# objective-c - 是否应该在头文件或实现文件中声明 ivars 和属性？

> ID：11732428
> 
> 赞同：0
> 
> 时间：2012-07-31T02:49:53.530
> 
> 标签：objective-c, ios, coding-style

我想知道其中哪些被认为是 iOS 开发的“最佳实践”：

1.  在 .h 文件中声明所有 ivars 和属性，以便任何人都可以了解类的结构。

2.  在 .m 文件中声明块内的所有 ivars`@implementation`并在 .h 文件中声明必要的属性。（此外，如有必要，请在 .m 文件中声明一些属性以供内部使用）。这里的想法是其他人不必担心我的结构和实现，他们可以使用我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T02:59:38.530

这真的取决于个人喜好，并且每个项目都不同。这里有几个例子：

创建框架时，您将只想包含您希望其他人看到的属性和方法，因为 .h 文件将是他们真正可以查看的唯一文件。

与团队一起处理大型项目时，您可能希望在 .h 文件中添加更多内容，以便在查找不是您编写的部分代码中的错误时，您知道在哪里可以找到该属性.

我认为大多数在线示例将头文件视为“公共”属性，将 .m 视为“私有”（即使它们不是真正私有的）。

无论如何，据我所见，没有“最佳实践”。只要确保你选择了一种方法并在整个项目中坚持下去，这样你就有了一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:11:15.763

我认为您最好在这里阅读开发人员文档：

## [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17)

# java - Scala/java 清理 31 以上或 1 以下的月份？

> ID：11732430
> 
> 赞同：1
> 
> 时间：2012-07-31T02:50:05.353
> 
> 标签：java, scala, jodatime

使用 JodaTime 库（虽然我有点灵活）。我意识到一些输入正在打破 Joda 时间，因为一个月中的天数高于 31 或低于 1（因为客户端代码）。

我正在使用该`LocalDate`对象进行日历操作。是否有一个库或方法可以轻松清理日期，以便输入不会开始引发异常？

我现在使用的一些 Scala 代码：**编辑：固定代码**

```
 val now = new LocalDate();
 val workingDate = now.withYear(y).withMonthOfYear(m).withDayOfMonth(d).withDayOfWeek(DateTimeConstants.SUNDAY)

 ymdStart = toTimestampAtStart( workingDate ) 
```

澄清一下，这里的目标是将日期转换为正确的日期，因此如果用户提交 7 月 38 日，它将转换为 8 月 7 日。有一个传入的 URL 结构导致了很多这种情况，它看起来像`/timeline/2012/07/30`.

出于纯粹锻炼的原因（我同意标准化似乎是不好的做法），我现在只是纯粹地好奇是否有库可以处理这样的问题。

谢谢！

**最终更新：**

就像答案指出的那样，标准化是一个糟糕的主意。我在客户端做了很多重构来修复传入的变量。这是我最终使用的代码：

```
ymdStart = new Timestamp( toTimestampAtStart( new LocalDate(y,m,d).withDayOfWeek(1) ).getTime - 86400000 )
ymdEnd = new Timestamp( ymdStart.getTime + 691200000 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:58:02.747

首先， LocalDate 是*不可变*的，因此每个链接`with...()`都在创建一个新日期。

其次，一次更新一个日期的片段是一种众所周知的反模式。最终结果将取决于日期的当前值、更新片段的顺序以及实施是否“规范化”日期。

换句话说，***永远不要***更新日期/时间。

假设实现“规范化”（即纠正溢出）无效日期一分钟。给定您的代码，如果今天的日期是 2011 年 1 月 31 日并且您做到了

```
now.setMonth(FEBRUARY);
now.setDayOfMonth(12); 
```

结果将是 2011 年 3 月 12 日。第一条语句将日期设置为 2 月 31 日，将其标准化为 3 月 3 日，然后将日期设置为 12。啊，你说，你可以先设置日期。但这不适用于不同的起点（其构建留作练习）。

根据您的问题，我推测 JodaTime 抛出异常而不是正常化，这是不这样做的另一个原因。

# javascript - 命令按钮动作

> ID：11732435
> 
> 赞同：0
> 
> 时间：2012-07-31T02:50:50.283
> 
> 标签：javascript, salesforce, visualforce

我有一个命令按钮，单击时我希望它保存电话记录并重定向到记录页面，然后在新窗口中打开一个新页面，其中显示与通话相关的新案例的编辑页面。

我这样做是这样的：

```
//Pseudocode
public PageReference saverecord(){
   create a new phone call record;
   insert record;
   if(createnewcase)
      create case;
      insert case;
      create editcaseURL;
   return phonerecord page;
} 
```

在客户端，在命令按钮中，我使用`<apex:param name="newcase" value="true" assignTo="{!createNewCase}"/>`将 createnewcase 设置为 true。和oncomplete javascript打开弹出窗口。我已经分别测试了电话记录和案例记录并成功了。但是当我把它们放在一个班级时，这个案例从未创建过。并在 visualforce 视图状态窗口中。我什至找不到布尔 createnewcase。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:52:41.567

使用 Apex / JavaScript 很容易实现：

顶点代码：

```
// Defining two variables for the both records (case and phone)
public String caseId { get; set; }
public String phoneId { get; set; }

// Defining a boolean to render the JavaScript panel after saving
punlic Boolean redirectNow { get; set; }

public PageReference saverecord(){
    // Create a new phone call record;
    insert record;

    // Now reading a phone record id
    phoneId = record.id;

    if(createnewcase){
        create case;
        insert case;

        // Now reading a case id
        caseId = case.id;
    }

    // If case and phone are OK -> set this flag to true
    redirectNow = true;

    // We do not need to return a real page reference 
    // because we will redirecting with javascript
    return null;
} 
```

以及带有 JavaScript 的 Visualforce 页面：

```
<!-- A command button, that rerenders a panel with JavaScript -->
<apex:commandButton value="Save" action="{!saverecord}" reRender="doAfterSave"/>

<!-- This panel renders only after you will save the new records -->
<apex:outputPanel id="doAfterSave">
    <apex:outputPanel rendered="{!redirectNow}">
        <script>
            // First reading the id's
            var newCaseId = '{!caseId}';
            var newPhoneId = '{!phoneId}';

            if(newCaseId != '' && newPhoneId != '')
            {
                // Now opening a new window with case in edit mode
                window.open('/' + newCaseId + '/e');

                // And then redirecting the main page to the new phone record
                window.location = '/' + phoneId;
            }
        </script>
    </apex:outputPanel>
</apex:outputPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:13:43.783

如果您想在编辑模式下打开新创建的案例，请使用以下代码。

```
public PageReference saverecord(){
   create a new phone call record;
   insert record;
   if(createnewcase)
   {
      create case;
      insert case;
      return new PageReference('/' + case.Id + '/e');
   }
   else
     do other logic here

   return null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:58:03.347

虽然这篇文章已经过时了，但如果你真的需要使用 JavaScript 和弹出窗口来完成这项工作（而不是简单地使用 Visualforce 页面并在 url 中传递参数，或者使用共享相同控制器从而保持相同上下文的 VF 页面，成员变量值等），我会看一下本教程：[教程：使用 Yahoo! 的 Visualforce 中的模态对话框！用户界面库](http://wiki.developerforce.com/page/Visualforce_Popup)

基本技巧是使“弹出”实际上只是同一页面的隐藏方面，以规避与在 Visualforce 中使用 JavaScript 传递值相关的问题。

从教程：

> 构建一个链接或按钮来弹出一个新的 Visualforce 页面实际上非常简单，并且让这个弹出窗口位于当前页面的上方也很容易。当您想在弹出窗口中收集信息并将该信息传递回启动弹出窗口的页面时，就会出现问题。
> 
> 问题是当您使用 window.open() 时，新窗口会作为单独的浏览器请求启动。由于这是对服务器的单独请求，因此新页面不共享相同的控制器上下文/会话。即使两个页面都使用同一个控制器的名称！这是因为这是浏览器级别的两个不同请求。

# matlab - Matlab如何在excel中打开文件放入数组并将数字转换为测量单位

> ID：11732443
> 
> 赞同：0
> 
> 时间：2012-07-31T02:52:00.903
> 
> 标签：matlab

我有一个 excel 文件来打开 matlab 并放入一个单元格数组中 - 然后获取单元格中的数字并转换一些测量值。我该怎么做呢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:45:00.377

我建议研究这两个函数`xlsread`，`xlswrite` 它们都将输入（从 .xls 或 .xlsx）文件分别处理到 matlab 和从 matlab 输出到 excel 文件。如果您想做一些与此不同的事情，请详细说明您发布的内容。

# java - 为什么本机 sql 查询不能在休眠状态下运行并出现异常

> ID：11732453
> 
> 赞同：0
> 
> 时间：2012-07-31T02:53:40.843
> 
> 标签：java, sql, hibernate, exception, hibernateexception

当我在 Hibernate 中运行以下 SQL 查询时，我得到`org.hibernate.exception.GenericJDBCException: could not execute query`：

```
select cast(DECRYPTBYKEY(cc.EncryptCardno) as varchar(30)) as cardNo 
from stmtOfAccounts s, creditCards cc 
where s.creditCardId = cc.id and s.id = :stmtOfAccountId 
```

这是 HQL：

```
String hqlQuery = String.format(
  "select cast(DECRYPTBYKEY(cc.EncryptCardno) as varchar(30)) as cardNo " +
  "from stmtOfAccounts s, creditCards cc " +
  "where s.creditCardId = cc.id and s.id = :stmtOfAccountId"); 
```

# c# - 如何将 SQL 服务器数据库中存储为 Byte[] 的图像显示到 DataGridView

> ID：11732454
> 
> 赞同：0
> 
> 时间：2012-07-31T02:53:42.580
> 
> 标签：c#, sql-server, winforms, ado.net

如何将在 SQL 服务器数据库中存储为 Byte[] 的图像显示到 DataGridView。

这是我用来添加图片的代码：

```
byte[] imgData;
imgData = File.ReadAllBytes(openFileDialog1.FileName);
drow[1] = string.IsNullOrEmpty(imgData.ToString()) ? DBNull.Value : (object)imgData; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:43:33.010

从显示图像中尝试 DataGridViewImageColumn。

[这](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewimagecolumn.aspx)是它的例子。

# c# - 像在某个位置一样在另一个位置运行一些的最佳方法是什么？

> ID：11732460
> 
> 赞同：1
> 
> 时间：2012-07-31T02:54:18.593
> 
> 标签：c#

例如，我不想在 Initialize() 方法中运行代码，而是只想写一行，比如 somecode.run() 它会为我运行一切，允许我在不同的位置编写所有代码为了组织。

我希望代码像在那个地方一样，所以我可以访问私人等。

最好的方法是什么？

编辑以澄清：

这是一个例子

```
public class game
{
    public void Initialize()
    { 
     I want to run some code here but I don't want to write it here, 
     I want to write it in another file for the sake of organization,
     and just  reference it somehow here, but yet still be able to use the
     privates as if it was in this spot
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:16:46.653

做你想做的事情的唯一方法是使用部分类。类似于以下内容：-

```
// In file: game1.cs
public partial class game
{
    private int Value;

    public void Initialize()
    {
        Run();
    }
}

// In file: game2.cs
public partial class game
{
    private void Run()
    {
        Value = 2;  // Access private field.
    }
} 
```

**编辑：** 您提到您不想使用部分类，除非它满足您的要求。我认为这是满足您要求的*唯一*方法，因为您的要求之一是新方法能够访问原始类的私有成员。

部分类可能不满足您的要求的唯一可能情况是您还希望该方法访问您的*局部*变量。但是您可以通过该新方法的参数传递这些局部变量。

说了这么多，我个人不鼓励使用部分类，因为它通常不被认为是一种好的做法。这意味着如果您想以不同的方式进行，您将需要更改您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:32:22.080

部分类和方法应该能够完成您所说的（MS 文档[http://msdn.microsoft.com/en-us/library/wa80x488.aspx](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)）。

我不确定为什么您需要做比 MSDN 文档中定义的更复杂的事情。您可以使用虚拟来允许覆盖并调用基本函数，以调用原始实现。有一种适当的方法可以使用继承来允许在适当的级别进行大量“调整”，但最初的部分类和方法应该允许您执行基本格式。

您通常会在预先编写的代码中看到部分示例（例如在 LINQ 中由 DataContext 编写）。

```
//auto-generated (or half implemented) code
public partial User
{
    public partial void OnFirstNameChanged();

    private string _FirstName = "";
    public string FirstName
    {
        get
        {
            return _FirstName;
        }
        set
        {
            _FirstName = value;
            OnFirstNameChanged();
        }
    }
}

//MyCustomStuff.cs
public partial User
{
    public partial void OnFirstNameChanged()
    {
        Console.Write(string.Format("Your name is {0}", FirstName));
    }
} 
```

# magento - 删除内容登台网站

> ID：11732461
> 
> 赞同：2
> 
> 时间：2012-07-31T02:54:23.453
> 
> 标签：magento

如何删除内容登台网站。我尝试删除根目录中的暂存文件夹，但它仍然显示在管理面板中但不起作用。你完全删除它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:01:59.870

转到“系统 - > 管理商店”并在那里删除您的内容网站

# python - 保留最新文件并删除所有其他文件

> ID：11732465
> 
> 赞同：2
> 
> 时间：2012-07-31T02:55:31.810
> 
> 标签：python

在我的文件夹中，有许多带有日期时间戳格式的 pdf 文件，如最后所示。我想保留当天的最新文件并删除当天的其余文件。我该怎么做？

```
2012-07-13-15-13-27_1342167207.pdf
2012-07-13-15-18-22_1342167502.pdf
2012-07-13-15-18-33_1342167513.pdf
2012-07-23-14-45-12_1343029512.pdf
2012-07-23-14-56-48_1343030208.pdf
2012-07-23-16-03-45_1343034225.pdf
2012-07-23-16-04-23_1343034263.pdf
2012-07-26-07-27-19_1343262439.pdf
2012-07-26-07-33-27_1343262807.pdf
2012-07-26-07-51-59_1343263919.pdf
2012-07-26-22-38-30_1343317110.pdf
2012-07-26-22-38-54_1343317134.pdf
2012-07-27-10-43-27_1343360607.pdf
2012-07-27-10-58-40_1343361520.pdf
2012-07-27-11-03-19_1343361799.pdf
2012-07-27-11-04-14_1343361854.pdf 
```

我应该使用列表来填写和整理吗？期望的输出是：

```
2012-07-13-15-18-33_1342167513.pdf
2012-07-23-16-04-23_1343034263.pdf
2012-07-26-22-38-54_1343317134.pdf
2012-07-27-11-04-14_1343361854.pdf 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:52:36.057

您想要的列表也可以使用 groupby 来实现。

```
from itertools import groupby
from os import listdir,unlink

filtered_list = list()
names = os.listdir()

for key,group in groupby(names,lambda x : x[:10]): # groups based on the start 10 characters of file
  filtered_list.append([item for item in group][-1]) #picks the last file from the group

print filtered_list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:03:34.810

如果列表中的下一个文件在同一天，则对列表进行排序并删除文件，

```
import glob
import os
files = glob.glob("*.pdf")
files.sort()

for ifl, fl in enumerate(files[:-1]):
    if files[ifl+1].startswith(fl[:10]):    #Check if next file is same day
        os.unlink(fl)                       # It is - delete current file 
```

**编辑：**

随着 OPs 的问题变得更加清晰，很明显不仅需要列表的最后一个文件，而且每天的最新文件 - 为了实现这一点，我包括了一个“同一天”有条件的取消链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T03:03:44.507

你可以那样做。以下代码未经测试，但可能有效：

```
import os

names = os.listdir()
names.sort()
for f in names[:-1]:
    os.unlink(f) 
```

幸运的是，您的文件名使用 ISO8601 日期格式，因此文本排序无需解析日期即可达到预期结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T03:36:53.337

以下代码段适用于给定的测试用例。

```
files = os.listdir(".")
days = set(fname[8:10] for fname in files)

for d in days:
    f = [i for i in files if i[8:10] == d]
    for x in sorted(f)[:-1]:
        os.remove(x) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T03:01:46.440

使用字典您可以保留一个值。这可能是肮脏和最快的解决方案，也许不是最好的。

```
#!/usr/bin/env python
import os
import datetime
import stat
import shutil

filelist=[]
lst=[]
dc={}

os.chdir(".")
for files in os.listdir("."):
    if files.endswith(".pdf"):
        lst.append(files)

for x in lst:
    print x[0:10].replace("-","")
    dc[int(x[0:10].replace("-",""))]=x

a = dc.items()
flist=[]
for k, v in a:
    flist.append(v)

dir="tmpdir"    
if not os.path.exists(dir):
    os.makedirs(dir)

from shutil import copyfile
for x in flist:
    print x
    copyfile(x, dir + "/" + x)

#os.chdir(".")
for files in os.listdir("."):
    if files.endswith(".pdf"):
            os.unlink(files)

os.chdir("./tmpdir")
for files in os.listdir("."):
    if files.endswith(".pdf"):
        copyfile(files, "../"+files)

os.chdir("../")
shutil.rmtree(os.path.abspath(".")+"/tmpdir") 
```

# android - 在 Mac OS 上的 android 模拟器上安装 apk

> ID：11732467
> 
> 赞同：22
> 
> 时间：2012-07-31T02:56:18.377
> 
> 标签：android, macos, emulation, apk

我尝试按照这些步骤（从[这里](https://stackoverflow.com/questions/3480201/how-do-you-install-an-apk-file-in-the-android-emulator)）：

```
go to sdk folder, then go to tools.
copy your apk file inside the tool directory
./emulator -avd myEmulator
to run the emulator on mac 
./adb install myApp.apk
to install app on the emulator 
```

但是当我运行“./emulator -avd phoneEmulator”（phoneEmulator 是我的模拟器的名称）时，它只会显示：

```
Phil-Knights-MacBook-Pro:tools philiplknight$ ./emulator -avd phoneEmulator
2012-07-30 22:44:33.377 emulator-arm[2859:80b] Warning once: This application, or a
library it uses, is using NSQuickDrawView, which has been deprecated. 
Apps should cease use of QuickDraw and move to Quartz. 
```

就好像该命令永远不会返回。

如果我无法`./adb install myApp.apk`在该窗口中输入第二个命令，我在哪里调用它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-15T12:25:55.053

1.  打开终端
2.  转到 android-sdk-mac\platform-tools
3.  输入 ./adb install myApp.apk

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-15T02:49:01.037

首先，您不应该将 APK 复制到工具或任何其他 SDK 目录。不要`cd`到 SDK 目录，只需将它们添加到`PATH`环境变量或在命令行中使用它们的绝对路径。然后，如果要运行模拟器，然后从同一终端执行命令，请将进程发送到后台（&）：

```
$ export PATH=$PATH:/path/to/sdk/tools:path/to/sdk/platform-tools
$ emulator -avd myEmulator &
$ adb install /path/to/my.apk 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-03-10T19:07:02.257

您可以通过以下方式解决：

1.  如果您没有 *.apk 文件，请下载它。
2.  打开 Android Studio 并**运行模拟器**。
3.  打开**查找器**并转到包含**您的 *.apk 文件的****位置**。
***   **将该 *.apk**拖放到**模拟器**中，在您确认后它会要求确认，它将在模拟器中安装 *.apk。*   安装成功后，您可以在应用程序菜单中找到它。**

 *** * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-24T06:55:56.237

您可以通过以下方式解决：

1.  将 yourapp.apk 上传到互联网。即：yourhost.com/yourapp.apk
2.  运行模拟器
3.  在您的模拟器上打开互联网浏览器，访问链接 yourhost.com/yourapp.apk
4.  下载并安装

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T05:08:41.947

可能对[MAC OS 终端中的所有命令都有用](http://developer.android.com/tools/devices/emulator.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-05T21:47:10.497

当我从 Eclipse 将应用程序作为 Android 应用程序运行时，我是唯一一个将应用程序安装在模拟器中的人吗？

我的意思是 - 当你可以使用 eclipse 时，为什么还要考虑 adb 的麻烦呢？（除非你有反对日食的东西！）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T02:59:53.197

一旦这个模拟器启动，adb 就可以从一个单独的终端运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-13T23:38:33.850

试试这个[应用程序](http://vitovalov.com/2015/04/12/apk-installer.html)。创建与 .apk 文件的关联后，只需双击它即可安装 apk。这一切都在 github 源代码中进行了解释。**

# haskell - Haskell：发布数据的 URL 编码

> ID：11732469
> 
> 赞同：5
> 
> 时间：2012-07-31T02:56:51.197
> 
> 标签：haskell, post, url-encoding

我一直在查看[`Network.HTTP`](http://hackage.haskell.org/packages/archive/HTTP/4000.2.3/doc/html/Network-HTTP.html)，但找不到创建正确 URL 编码的键/值对的方法。

例如，如何从`[(key, value)]`配对列表中生成所需的发布数据？我想这样的东西已经存在（可能隐藏在`Network.HTTP`包装中）但我找不到它，我宁愿不重新发明轮子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T02:59:15.207

看看[`urlEncodeVars`](http://hackage.haskell.org/packages/archive/HTTP/4000.2.3/doc/html/Network-HTTP-Base.html#v%3aurlEncodeVars)。

```
urlEncodeVars :: [(String, String)] -> String 
```

```
ghci> urlEncodeVars [("language", "Haskell"), ("greeting", "Hello, world!")]
"language=Haskell&greeting=Hello%2C%20world%21" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-03T15:42:30.387

如果您正在尝试 HTTP POST 数据`x-www-form-urlencoded`，`urlEncodeVars`可能不是正确的选择。该`urlEncodeVars`函数不符合[application/x-www-form-urlencoded 编码算法](https://www.w3.org/TR/html5/forms.html#application/x-www-form-urlencoded-encoding-algorithm)有两点值得注意：

*   它将空间编码`%20`为`+`
*   它编码`*`为`%2A`而不是`*`

请注意以下函数旁边的注释[`Network.HTTP.Base`](http://hackage.haskell.org/package/HTTP-4000.2.3/docs/src/Network-HTTP-Base.html#urlEncodeVars)：

```
-- Encode form variables, useable in either the
-- query part of a URI, or the body of a POST request.
-- I have no source for this information except experience,
-- this sort of encoding worked fine in CGI programming. 
```

有关一致编码的示例，请参阅包中的[此函数](https://github.com/hspec/hspec-wai/blob/master/src/Test/Hspec/Wai/Util.hs#L37)`hspec-wai`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-01T22:19:37.007

`wreq`我建议为此尝试。它提供`FormParm`数据类型，因此您可能希望将键值对转换为`[FormParm]`. 然后你可以使用这样的东西：

```
import qualified Data.ByteString.Char8 as C8
import Network.Wreq (post)
import Network.Wreq.Types (FormParam(..))

myPost = post url values where
  values :: [FormParam]
  values = [C8.pack "key" := ("value" :: String)]
  url = "https://some.domain.name" 
```

# c# - wcf中不同绑定的默认保护级别是多少

> ID：11732472
> 
> 赞同：1
> 
> 时间：2012-07-31T02:57:39.637
> 
> 标签：c#, .net, wcf, wcf-binding, wcf-security

我浏览了[MSDN](http://msdn.microsoft.com/en-us/library/aa347692.aspx)文档，发现以下内容：-

![保护等级](../Images/e39926f9bc0c8ef4f0e6d03fddcd0fb9.png)

但是他们没有提到每个绑定的默认保护级别。

谁能告诉我每个绑定的默认保护级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:13:28.863

您可以根据需要设置保护级别，我认为这种情况并不适合，这取决于您的情况。

**无**- 仅身份验证。
**签名**- 对数据进行签名以帮助确保传输数据的完整性。
**EncryptAndSign** - 加密和签署数据以帮助确保传输数据的机密性和完整性。

在文章中提到：

> 如果您选择的绑定没有启用安全性（例如，BasicHttpBinding 类默认禁用安全性），并且没有显式设置 ProtectionLevel，则不会保护任何应用程序数据。

因此，如果您选择了一个绑定，例如，默认情况下禁用了安全性并且您没有明确设置 ProtectionLevel -**没有任何数据将受到保护 - 这就是我的意思没有默认值**。

编辑：这篇文章有几个表格，向您展示比较，并希望能解决混淆：[配置系统提供的绑定](http://msdn.microsoft.com/en-us/library/ms731092.aspx)

# iphone - Xtify 推送通知的自定义操作

> ID：11732480
> 
> 赞同：0
> 
> 时间：2012-07-31T02:58:44.427
> 
> 标签：iphone, ios, methods, push-notification, xtify

我使用 Xtify 的网络服务推送通知。他们有办法在点击时执行自定义操作，但我不确定我是否理解如何做到这一点。基本上，我希望自定义操作允许我选择打开应用程序的选项卡。他们的链接是 [http://developer.xtify.com/display/sdk/6.+Other+Implementation+Methods](http://developer.xtify.com/display/sdk/6.+Other+Implementation+Methods)

我需要在应用程序中设置什么以在推送通知中指定要打开哪个选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:46:25.283

您首先需要使用一个方法设置一个委托，该方法将在您希望在文档中指定的任何地方调用它 -

```
[[XLappMgr get] setDeveloperCustomActionSelector:@selector(developerCustomActionMethod:)]; 
```

然后你需要定义一个名为 developerCustomActionMethod 的方法来进行实际的切换。您可以使用以下代码选择需要切换到的选项卡 -

```
tabBarController.selectedViewController = [tabBarController.viewControllers objectAtIndex:2]; // will select the third tab, as tabs are ranked 0,1,2,3,.... 
```

# python - 如何使用python验证输入中的数字？

> ID：11732486
> 
> 赞同：3
> 
> 时间：2012-07-31T02:59:56.533
> 
> 标签：python, input

我正在尝试学习如何编程，但遇到了问题....

我试图弄清楚如何确保有人输入数字而不是字符串。我发现的一些相关答案令人困惑，有些代码对我不起作用。我想有人发布了 try: 函数，但它不起作用，所以也许我需要导入一个库？

这是我现在正在尝试的：

代码：

```
print "Hi there! Please enter a number :)"
numb = raw_input("> ")

if numb != str()
    not_a_string = int(next)
else:
    print "i said a number, not a string!!!"

if not_a_string > 1000:
    print "You typed in a large number!"

else:
    print "You typed in a smaller number!" 
```

我在问的时候还有另一个问题。我怎样才能让它接受大写和小写拼写？在下面的代码中，如果我输入“Go to the mall”但使用小写 G，它不会运行 if 语句，因为它只接受大写 G。

```
print "What would you like to do: \n Go to the mall \n Get lunch \n Go to sleep"
answer = raw_input("> ")

if answer == "Go to the mall":
    print "Awesome! Let's go!"
elif answer == "Get lunch":
    print "Great, let's eat!"
elif answer == "Go to sleep":
    print "Time to nap!"
else:
    print "Not what I had in mind...." 
```

谢谢。^^

编辑：我也在使用 python 2.7 而不是 3.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T03:02:01.427

你可以这样做：

```
while True: #infinite loop
   ipt = raw_input(' Enter a number: ')
   try:
      ipt = int(ipt)
      break  #got an integer -- break from this infinite loop.
   except ValueError:  #uh-oh, didn't get an integer, better try again.
      print ("integers are numbers ... didn't you know? Try again ...") 
```

要回答您的第二个问题，请使用`.lower()`string 方法：

```
if answer.lower() == "this is a lower case string":
   #do something 
```

如果您愿意，可以使您的字符串比较非常健壮：

```
if answer.lower().split() == "this is a lower case string".split(): 
```

在这种情况下，您甚至可以匹配诸如“ThIs IS A lower Case\tString”之类的字符串。为了在您接受的内容上更加自由，您需要使用正则表达式。

（并且所有这些代码都可以在 python2.x 或 3.x 上正常工作——我通常将我的打印语句括在括号中以使其适用于任一版本）。

**编辑**

此代码在 python3.x 上不太适用——在 python3 中，您需要更改`raw_input`为`input`使其工作。（对不起，忘了那个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:12:57.113

首先，每个帖子你应该只问一个问题。

Q1：使用内置的 .isdigit()

```
if(numb.isdigit()):
    #do the digit staff 
```

Q2：您可以使用 string.lower(s) 来解决资本问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T16:51:26.730

你可以试试

```
 numb = numb.strip()
    if numb.isdigit() or (numb[0] in ('+', '-') and numb[1:].isdigit():
        # process numb 

```

# php - 单击按钮时如何触发 PHP/jQuery

> ID：11732488
> 
> 赞同：2
> 
> 时间：2012-07-31T03:00:39.187
> 
> 标签：php, jquery

我有以下表格：

HTML

```
<form id="myForm" action="" method="post">
<div id="edit-box">
<INPUT type="submit" name="save-text" id="save-text" value="Save">
<textarea id="editor" name="editor">
<?php echo $content; ?>
</textarea>
</div>
</form> 
```

PHP

```
if ($_POST["save-text"]){
    // get form data and do stuff here
} 
```

如何确保仅在单击提交按钮时才运行 PHP 脚本，而不是其他时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:21:45.090

在页面开头的 HTML 标记之前添加它。
也不要忘记将页面扩展名从更改`.html`为`.php`

```
if (isset($_POST['save-text'])) {
    // get form data and do stuff here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:50:09.873

问题是`if($_POST["save-text"])`返回 false ，因此您的代码没有被执行。您将需要`$_POST["save-text"]`用`isset()`函数包装 。[isset()](http://jp.php.net/manual/en/function.isset.php)可用于检查某个变量的存在，并返回`TRUE`变量是否存在并且具有除`NULL`or以外的值`FALSE`。

正确的代码如下所示：

```
if (isset($_POST['save-text'])) {
    //Do something
} 
```

您还应该确保您的提交按钮具有“值”属性。如果他们不这样做，$_POST 数组中就不会有值，因此 isset($_POST["submit"]) 将返回 false。

例子：

```
<input type="submit" name="submit">

isset($_POST["submit"])   // returns false

<input type="submit" name="submit" value="submit">

isset($_POST["submit"])   // returns true. 
```

# php - 如何在 preg_replace 中定义模式以删除空格？

> ID：11732493
> 
> 赞同：0
> 
> 时间：2012-07-31T03:01:07.377
> 
> 标签：php, string, design-patterns, preg-replace

我有一个这样的字符串。

```
$string="howto old_iccid    = 01920930123 new_iccid =102930123" 
```

如何删除空格字符以获得这样的字符串：

```
$string="howto old_iccid=01920930123 new_iccid=102930123" 
```

我用过`preg_replace`，但仍然不明白定义处理这些事情的模式..

如何在 preg_replace 中定义模式以删除空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:06:15.063

```
$string = "howto old_iccid    = 01920930123 new_iccid =102930123";
$string = preg_replace('/\s*=\s*/', '=', $string);
var_dump($string); 
```

# c++ - 与多线程一起登录多进程应用程序

> ID：11732496
> 
> 赞同：5
> 
> 时间：2012-07-31T03:01:43.493
> 
> 标签：c++, logging, boost, multiplatform

我正在寻找一个多进程应用程序的日志记录工具，该应用程序还包含每个进程中的多个线程。

我当前的应用程序只是多线程的，并使用 ACE_Message_Queue 将日志事件发送到记录器线程（实际的日志消息通过全局数组在应用程序线程和记录器线程之间共享）。

我的新应用程序包含多个进程，每个进程中有多个线程。在这种情况下，如何实现体面的日志记录功能？还希望摆脱 ACE 以支持 Boost。我的新应用程序应该在 Linux、Mac 和 Windows 上运行。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:34:52.180

尝试使用[log4cplus](http://log4cplus.sourceforge.net/)。它是一个最新的日志库，允许从多个进程中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:35:02.673

[Boost.Log](http://boost-log.sourceforge.net/libs/log/doc/html/index.html) (v2) 非常容易设置并且非常全面。它还没有在 boost 库中，但很快就会出现。您可以将其用作简单的记录器，或编写过滤器并自定义记录过程和输出。我正在将它用于一个项目，并且对它非常满意。[看到这个问题](https://stackoverflow.com/q/3510473/390913)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:08:05.933

我有一个博客来展示我关于这个问题的日志记录实践：http: [//peihanw.blogspot.com/2012/08/my-answer-to-stackoverflows-question.html](http://peihanw.blogspot.com/2012/08/my-answer-to-stackoverflows-question.html)

# css - 尽管 float:left 和 display:inline-block div 不会对齐

> ID：11732499
> 
> 赞同：0
> 
> 时间：2012-07-31T03:02:00.090
> 
> 标签：css, css-float, alignment

我试图让这三个`<div class="forward-link">`对齐沿着相同的基线。我试过`float:left`and `display:inline-block`，但似乎没有任何效果。有任何想法吗？该站点是使用 php/Wordpress 制作的，但下面是呈现的 HTML 和 CSS。

另外，[http://jsfiddle.net/mugUG/](http://jsfiddle.net/mugUG/)

呈现的 HTML：

```
<div id="landing-content">
    <div id="landing-brief">
        <ul>
            <li>
                <h2><a href="http://growingedgecoaching.com/blog">Growing Edge Blog</a></h2>
                    <p>“Embrace the messy imperfect genius. Seek to be misunderstood by creative minds.” ~Ross Martin One thing I have learned over the years as an entrepreneur is that when I am in my most creative space, I have to release being a perfectionist and jump into my creative messiness. I need to create space that allows [...]</p>
                <div class="forward-link">
                    <p><a href="http://growingedgecoaching.com/home"><span style="color:#b8bf33">Continue Reading</span></a></p>
                </div><!-- end forward-link -->
            </li>
            <li>
                <h2><a href="index.php?page_id=27">Meet Mary Anne</a></h2>
                <p>Mary Anne is the founder of Growing Edge Coaching™, a coaching and consulting company, where she helps individuals and companies develop powerful strategies to move forward in their life, their work, or their business. Her coaching is founded on her 20 years of experience as a manager and senior leader in non-profits.</p>
                <div class="forward-link">
                    <p><a href="index.php?page_id=27"><span style="color:#b8bf33">More About Mary Anne</span></a></p>
                </div><!-- end forward-link -->
            </li>
            <li>
                <h2><a href="#">Recent Tweets</a></h2>
                <div id="twitter-feed">

                        <ul>
                                                    <li>
                        RT @LollyDaskal: regret is often the result of too many excuses. #leadfromwithin #leadership                            </li>
                                                    <li>
                        What you do in small doses becomes big doses in your life.                          </li>
                                                    <li>
                        RT @ThisIsSethsBlog: Seth's Blog: Two kinds of unique http://t.co/1TJ1Vuf9                          </li>
                                                    </ul>
                    </div><!-- end twitter-feed -->
                <div class="forward-link">
                    <p><a href="https://twitter.com/growing_edge"><span style="color:#b8bf33">Follow @Growing_Edge</span></a></p>
                </div><!-- end forward-link -->
            </li>
        </ul>
    </div><!-- end brief -->
    <div id="landing-social">
        <h1>Growing Edge Coaching™ works with individuals and companies to attain positive actions and powerful results in their work and life.</h1>
        <div id="icons">
            <ul>
                <li><a href="http://www.facebook.com/maryanneflanagan"><img src="http://growingedgecoaching.com/wp-content/themes/twentyeleven/images/facebook.png" alt="Growing Edge Coaching Facebook" id="fb" /></a></li>
                <li><a href="https://twitter.com/growing_edge"><img src="http://growingedgecoaching.com/wp-content/themes/twentyeleven/images/twitter.png" alt="Growing Edge Coaching Twitter" id="tw" /></a></li>
                <li><a href="http://www.linkedin.com/in/maryanneflanagan"><img src="http://growingedgecoaching.com/wp-content/themes/twentyeleven/images/linkedin.png" alt="Growing Edge Coaching Linked In" id="li" /></a></li>
            </ul>
        </div><!-- end icons -->
    </div><!-- end social -->
    <div id="landing-contact-info">
        <p><span>PHONE</span> 917.238-9726 | <span>E-MAIL</span> <a href="mailto:maflanagan@growingedgecoaching.com?Subject=contact via website"><span style="color:#333333">maflanagan@growingedgecoaching.com</span></a></p>
    </div><!-- end contact-info -->
</div><!-- end landing-content --> 
```

CSS

```
/* Landing Content */

#landing-content {
    background: #f7f7f7;
    clear: both;
    margin-top: 40px;
}

#landing-brief {
    width: 860px;
    margin: 0 auto;
    padding-top: 40px;
}

#landing-brief ul li {
    display: inline-block;
    height: 200px;
    width: 250px;
    position: relative;
    vertical-align: top;
}

#landing-brief ul li:last-child {
    padding-right: none;
}

#landing-brief #twitter-feed {
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    font-size: 75%;
    line-height: 1.5;
    color: #333333;
    margin-left: -28px;
}

#landing-brief #twitter-feed ul li {
    padding-bottom: 5px;
}

#landing-brief .forward-link {
    position: absolute;
    padding-left: 0; 
    padding-bottom: 0;
    padding-top: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:36:58.740

所以你的`LI`元素水平对齐是吗？

你想要做的是给你的所有`LI`元素一个相等的高度，足以容纳每个 LI 中的内容。

然后制作`LI`元素`position:relative`

然后制作`forward-link`元素`position:absolute, left:0, bottom:0`

这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:14:26.017

![小提琴截图](../Images/1c563912f153f5da3da4a966e2e2ad0e.png)

[小提琴](http://jsfiddle.net/thirdender/vxuUr/2/)

```
ul {
  position: relative;
}
li {
  position: static; /* The default if no position property is applied */
  padding-bottom: 1.6em;
}
a {
  position: absolute;
  bottom: 0; /* Or, in the linked Fiddle, 1em to accommodate the padding
                on the bottom of the UL tag. */
} 
```

这仅适用于 IE7+（IE6 不支持仅具有一条边（`left`、`right`、`top`或`bottom`）属性的绝对定位元素），并且仅在保证元素是并排的情况下才有效。当一个元素被绝对定位但没有指定边缘属性时，浏览器会尝试将元素放在它没有`position: absolute;`. 只给元素一个边缘属性（例如`bottom: 1em;`在示例中）会导致浏览器将其从“默认”位置移动以匹配该单个边缘属性。因此`left`，如果仅指定或，则`right`可以将其保留为自动计算。另请参阅[W3C Wiki：CSS 绝对定位和固定定位](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning#Specifying_the_position)。`top``bottom`

制作`UL`标签`position: relative;`，但`LI`标签`position: static;`（默认值`position`，不是绝对...绝对元素没有布局，并且需要父元素上的固定高度）。在底部为标签提供`LI`足够的填充，以便在底部为您想要的内容腾出空间。在上面的例子中，内容是一行文本，对于大多数字体来说大约是 1.2em。我在示例中为间距添加了更多填充，并使其约为 1.6em。然后制作`A`标签`position: absolute; bottom: 0;`，它们将移动到最近定位的祖先的底部，或者在这种情况下是`UL`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:23:54.060

给你所有的 3 个 div 不同的 id。1st 2 div 将浮动作为左侧，第三个 div 将浮动作为右侧。所有 3 个 div 都放在主 div 中，**溢出隐藏**。

# jquery - 使用 jQuery 将数组中的值读取到输入文本字段中

> ID：11732504
> 
> 赞同：1
> 
> 时间：2012-07-31T03:02:30.217
> 
> 标签：jquery

我有一个 jQuery 函数，它应该将数组中的值读取到文本字段中。但是，我在将数组的零位置读入文本字段时遇到问题。

```
$(function(){
    var values = ['one', 'two', 'three'];
        $('#room').val(values[0].text());  // not sure about this statement
}); 
```

这是我的html代码

```
<input id="room" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:04:43.170

text() 用于将文本转换为元素

```
$(function(){
    var values = ['one', 'two', 'three'];
        $('#room').val(values[0]);
}); 
```

text() 的示例使用

```
<div>Hello World</div>
$("div").text() //this will return Hello World 
```

# jquery - 限制和排序 knockout.js foreach 项目

> ID：11732507
> 
> 赞同：0
> 
> 时间：2012-07-31T03:03:27.470
> 
> 标签：jquery, knockout.js, knockout-mapping-plugin, knockout-2.0

我真的是新的 knockout.js。我想要实现的是限制 foreach 项目。这是我的来源：

```
<div data-bind="foreach: news">
      <!-- ko if: catId === '4' -->
            <div  class="news-item">
                <a data-bind="attr: { href: url, title: title }">
                   <div class="news-header-text" data-bind="text: title"></div>
                 </a>
                 <div class="news-date" data-bind="text: date" /></div>

            </div>
      <!-- /ko -->
</div> 
```

这是我的 javascript：

```
 (function()
        { // Wrap in function to prevent accidental globals
            if(location.protocol != "data:")
            {
                $(window).bind('hashchange', function()
                {
                    window.parent.handleChildIframeUrlChange(location.hash)
                });
            }

            // Class to represent a row in the seat reservations grid
            function cebesEnNewsIndex(title, date, url, catId, hits)
            {
                var self = this;
                self.title = title;
                self.date = date;
                self.url = url;
                self.catId = catId;
                self.hits = hits;
            }

            // Overall viewmodel for this screen, along with initial state
            function cebesEnNewsIndexViewModel()
            {
                var self = this;

                // Non-editable catalog data - would come from the server

                // Editable data
                self.news = ko.observableArray([
                new cebesEnNewsIndex("Welcome to Cebes Enterprise", "18 Mey 2012", "#", '4', '20'),
                new cebesEnNewsIndex("Groove for Dummies", "20 Mey 2012", "#", "4", "21"),
                new cebesEnNewsIndex("New Features of Cebes Framework", "18 Mey 2012", "#", "3", "19"),
                new cebesEnNewsIndex("Welcome to Cebes Enterprise", "20 Mey 2012", "#", "3", "24"),
                new cebesEnNewsIndex("Welcome to Cebes Enterprise sdfadfa", "18 Mey 2012", "#", '4', '20'),
                new cebesEnNewsIndex("Groove for Dummiessdfadf", "20 Mey 2012", "#", "4", "21"),
                new cebesEnNewsIndex("New Features of Cebes Frameworksdfad", "18 Mey 2012", "#", "3", "19"),
                new cebesEnNewsIndex("Welcome to Cebes Enterprisdfadfe", "20 Mey 2012", "#", "3", "24"),
                new cebesEnNewsIndex("Welcome to Cebes Enterprissdfadfe", "18 Mey 2012", "#", '4', '20'),
                new cebesEnNewsIndex("Groove for Dummiesdfads", "20 Mey 2012", "#", "4", "21"),
                new cebesEnNewsIndex("New Features of Cebes Framework", "18 Mey 2012", "#", "3", "19"),
                new cebesEnNewsIndex("Welcome to Cebesasdfa Enterprise", "20 Mey 2012", "#", "3", "24"),
                new cebesEnNewsIndex("Welcome to Cebessdfad Enterprise", "18 Mey 2012", "#", '4', '20'),
                new cebesEnNewsIndex("Groove fsdfaor Dummies", "20 Mey 2012", "#", "4", "21"),
                new cebesEnNewsIndex("New Featuresadfas of Cebes Framework", "18 Mey 2012", "#", "3", "19"),
                new cebesEnNewsIndex("Welcome tosdfad Cebes Enterprise", "20 Mey 2012", "#", "3", "24"),
                new cebesEnNewsIndex("New Emsfadfployee", "22 Mey 2012", "#", "5", "25")
                ]);

            }

            ko.applyBindings(new cebesEnNewsIndexViewModel());
        })(); 
```

正如您在提琴手上看到的那样，过滤作品并显示 8 个新闻项目

我想限制数字并根据具有相同数据的日期项目对数字进行排序（仅显示 3 个过滤和排序的新闻项目）：

[http://jsfiddle.net/2Ffqn/](http://jsfiddle.net/2Ffqn/)

这是我的脚本的 jsfiddle 链接：http: [//jsfiddle.net/StRa6/](http://jsfiddle.net/StRa6/) 保持简单，请编辑并保存我的 jsfiddle。欢迎任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T04:37:24.087

您不应该像那样将业务逻辑放在视图中。一个更好的解决方案是使用`computed`observable 创建一个过滤数组，并绑定到该数组。

```
self.selectedNews = ko.computed(function() {
    return ko.utils.arrayFilter(self.news(), function(i) {
         return i.catId == 4; //Or, you know, whatever
       })
    }); 
```

这是[他的小提琴](http://jsfiddle.net/tyrsius/StRa6/2/)。

# regex - 如何使用蚂蚁计数任务countfilter

> ID：11732509
> 
> 赞同：0
> 
> 时间：2012-07-31T03:03:37.610
> 
> 标签：regex, ant

我试图计算文件中“**此构建列表是否需要编译：true** ”行的出现次数。我尝试了以下代码，但它没有计算

```
<concat>
<fileset file="@{logPathInTestSetup}" />
    <filterchain>
        <tokenfilter>
            <ct:countfilter property="noOfCompiledBuildlists" contains="Does this buildlist need compile:\s*(true)" override="true">
            <ct:counteach propertyprefix="count." select="\1" />
            </ct:countfilter>
         </tokenfilter>
         <ct:stopfilter />
      </filterchain>
</concat> 
```

当我尝试计算“此构建列表是否需要编译：”时，计数器工作并且我得到正确的值。因此，正则表达式肯定存在问题。有人可以帮忙吗？谢谢， 阿尔西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T18:50:06.987

您不需要一些额外的任务，但 Ant 1.7.1+`<concat>`必须是资源。[这是ant manual resourcecount](http://ant.apache.org/manual/Tasks/resourcecount.html) 给定输入 foobar.txt
的一个稍微改编的示例：

```
Does this buildlist need compile: true
whatever
Does this buildlist need compile: false
The quick brown fox
jumps over the lazy dog
Does this buildlist need compile: true
Does this buildlist need compile: false
Does this buildlist need compile: true
foo
blablabla
Does this buildlist need compile: true 
```

蚂蚁脚本示例：

```
<project>
 <property name="file" value="foobar.txt"/>
  <resourcecount property="file.lines">
   <tokens>
    <concat>
     <filterchain>
      <linecontainsregexp>
       <regexp pattern="Does this buildlist need compile:\s*(true)"/>
      </linecontainsregexp>
     </filterchain>
     <fileset file="${file}"/>
    </concat>
   </tokens>
  </resourcecount>
  <echo>The file '${file}' has ${file.lines} lines.</echo>
</project> 
```

输出 ：

```
[echo] The file 'foobar.txt' has 4 lines. 
```

**编辑**
要获得不匹配的行，意味着否定您的正则表达式，只需使用：

```
</linecontainsregexp negate="true"> 
```

# events - Sencha Touch - 如何防止日期选择器隐藏？

> ID：11732514
> 
> 赞同：1
> 
> 时间：2012-07-31T03:03:56.157
> 
> 标签：events, sencha-touch, datepicker, hide

我正在使用 Ext.picker.Date 并且我对 hide 事件进行了一些检查。但是，如果满足某个条件，我想停止该过程并且不隐藏日期选择器。

我尝试使用 beforehide 事件，并在那里运行我的代码，但该事件似乎没有触发。

下面是我的日期选择器的配置。如果条件为真，我怎样才能阻止选择器隐藏？

谢谢你的帮助。

```
var datePicker = new Ext.picker.Date({
        docked: "bottom",
        listeners: {
            beforehide: function() {
                console.log("before hide");
            },
            hide: function() {
                if (1 == 1) {
                    //how do I stop the picker from hiding?
                    Ext.Msg.alert("You cannot select that date.");                        
                }

            }
        },
        slotOrder: ["day", "month", "year"],
        useTitles: false
    });
    this.add(datePicker); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:05:29.047

你用的是煎茶触控 2 吗？我假设是这样，因为您使用的是 Ext.picker.Date。

根据文档，日期选择器不会触发隐藏事件： [Sencha Docs](http://docs.sencha.com/touch/2-0/#!/api/Ext.picker.Date)

你真正想做的是在点击“完成”之后和选择器隐藏之前插入一些逻辑。选择器在内部调用 onDoneButtonTap；您可以像这样注入自己的逻辑：

```
Ext.define('MyApp.widget.DatePicker', {
    extend: 'Ext.picker.Date',
    xtype: 'mypicker',

    onDoneButtonTap: function() {
        if (1 == 1) {
            Ext.Msg.alert("You cannot select that date.");
        } else {
            Ext.picker.Date.prototype.onDoneButtonTap.call(this);
        }
    }
});

this.add({
    xtype     : 'mypicker',
    docked    : "bottom",
    slotOrder : ["day", "month", "year"],
    useTitles : false
}); 
```

这是假设您的逻辑将能够访问日期选择器范围内所需的内容。如果不是这种情况，您可以在创建日期选择器时将其他配置传递给它...可能类似于acceptedDateRange {...}

最简单的方法可能是：

```
var datePicker = new Ext.picker.Date({
    docked: "bottom",
    slotOrder: ["day", "month", "year"],
    useTitles: false,
    onDoneButtonTap: function() {
        if (1 == 1) {
            Ext.Msg.alert("You cannot select that date.");
        } else {
            Ext.picker.Date.prototype.onDoneButtonTap.call(this);
        }
    }
});

this.add(datePicker); 
```

我认为像第一个示例中那样定义自己的类是可行的方法，尤其是在将逻辑注入现有框架代码以及在多个地方使用组件的情况下。但是第二个例子也可以。

# html - 是否有一种技巧可以在仍处于顶部时使图像点击？

> ID：11732515
> 
> 赞同：6
> 
> 时间：2012-07-31T03:03:58.403
> 
> 标签：html, css

我一直在无聊地设计一个新主题，并找到了一个我真正喜欢的想法。它使用`:before`和`:after`伪元素将两个图像放在菜单栏的顶部，使其看起来像一些动物在上面行走/悬挂。

我遇到的问题是这些元素使下面的按钮部分无法点击。顶部有几个像素，即使不在动物的正下方，也无法单击。徽标位于左侧图像的后面，只能在生成块所在的上方单击。

**如果您感到困惑，[请参阅 jsFiddle](http://jsfiddle.net/9tmNN/)。**在此示例中，徽标不存在，因此您可以看到它后面的链接是完全无法点击的。

是否有任何解决方法/黑客可以使图像仍然出现在所有内容之上，但仍然允许通过图像单击其下方的链接？也许在顶部添加图像的另一种方法是至少它们之间的空间是可点击的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T03:11:58.373

## 原始答案

好吧，它还没有完全跨浏览器，但[`pointer-events: none`](https://developer.mozilla.org/en/CSS/pointer-events/)在那些伪元素上可能是你真正想要的。[这是小提琴。](http://jsfiddle.net/9tmNN/2/)

## 次要答案（也许更多跨浏览器）

从 Jimmie Lin 的想法中获得一些灵感，但保持一切语义，如果您确保所有元素的堆叠上下文保持不变，那么对于每个`a`您需要“向前推进”的东西，请设置如下内容[（参见小提琴）](http://jsfiddle.net/9tmNN/10/)：

```
.pushForward {position: relative;}
.pushForward:before {
    content: ''; 
    position: absolute; 
    top: 0; 
    right: 0; 
    bottom: 0; 
    left: 0; 
    z-index: 1000;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T03:14:50.207

一种方法（这是非常hacky，但理论上应该可行）是您应该添加一个`<div>`高于`z-index`动物图标的a，然后将其设置为不透明度为0。我不确定将不透明度设置为0是否会隐藏元素（它不应该），但是一旦你创建了这个`<div>`，复制粘贴所有受你的图标影响的链接。

从理论上讲，这个透明的 DIV 将有效地再次复制链接并捕获所有应该在图标上进行的点击事件。

试试看，也许它有效 - 只是一个 hacky 想法。

# c++ - 从 printf scanf 转换为 cin cout 的问题

> ID：11732516
> 
> 赞同：0
> 
> 时间：2012-07-31T03:04:15.783
> 
> 标签：c++, syntax

对于我的家庭作业，我被要求完成我以前的项目并将其从使用更改`<stdio.h>`为`<iostream>`。在此过程中，我遇到了很多错误，只是有点卡在一些特定的错误上。

就我的预处理器指令而言，我包括：

```
#include <iostream>
#include <iomanip>
#include <fstream> 
```

我得到的错误代码指定了我的代码的特定行。我得到的反复出现的错误之一是：

```
error: expected primary-expression before âfloatâ 
```

此错误来自以下几行：

```
void PrintAverages(ofstream &output, int tot_employees, float tot_payrate, float tot_reghrs,
                   float tot_ovthrs, float tot_gross, float tot_fed, float tot_state,
                   float tot_ssi, float tot_def, float tot_net)
{      

    output << reportfile, "\n\nAverages:" << tot_payrate / tot_employees <<
              tot_reghrs / tot_employees << tot_gross / tot_employees <<
              tot_fed / tot_employees << tot_ssi / tot_employees << tot_net / tot_employees <<
              tot_ovthrs / tot_employees << tot_state / tot_employees << tot_def / tot_employees;
} 
```

这是我的外部功能之一。错误代码与我的其他功能一起出现多次。我认为这个问题类似于导致这个问题的原因。如果有人可以帮助我指出正确的方向，那就太好了！

-德文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:35:18.857

尝试

```
std::ofstream 
```

as ofstream 在命名空间 std 中声明。

报告文件后的逗号也应该是`<<`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:12:41.823

什么类型`reportfile`？`reportfile`和字符串之间的逗号`\n\nAverages:`看起来很奇怪 - 那不应该`<<`也是吗？

你会想要在你的花车之间有空格，否则它会一起运行。`<< " " <<`在每个之间使用，`float`而不仅仅是`<<`.

# ruby-on-rails - spork-minitest 错误但测试通过

> ID：11732517
> 
> 赞同：0
> 
> 时间：2012-07-31T03:04:17.290
> 
> 标签：ruby-on-rails, spork, minitest

我终于为我喜欢的新 Rails 应用程序创建了一个 Windows 环境。一切正常，直到我决定为它创建一个操作方法。您可以在此[博客文章](http://www.manueldeleon.com/Blog/post/2012/07/30/Rails-Testing-on-Windows-%28The-Fast-and-Easy-Way%29.aspx)中找到步骤。

我进行了全新安装，以确保一切正常。一切都说完之后，测试运行良好，我确实收到了一个咆哮弹出窗口，但自动测试窗口显示以下错误。这是怎么回事？

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spork-minitest-0.0.3/bin/testdrb:7:in `exit': can't convert DRb::DRbObject into Integer (TypeError)
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/spork-minitest-0.0.3/bin/testdrb:7:in `<top (required)>'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bin/testdrb:19:in `load'
from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/bin/testdrb:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:32:00.813

需要安装 gem spork-testunit

# javascript - 映射：如何向 infotemplate 添加关闭按钮

> ID：11732518
> 
> 赞同：0
> 
> 时间：2012-07-31T03:04:26.563
> 
> 标签：javascript, html, esri, arcgis-js-api

如何向信息模板添加关闭按钮？

```
// My info template looks like this, 't' and 'Description' are variables

var infoTemplate1 = new esri.InfoTemplate(Title + ' - ' + t,"Description:" + "<br>" + Description); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:16:41.627

添加：

```
<button dojoType='dijit.form.Button' onClick='javascript:window.close();''>Done</button>") 
```

有关更多信息，请参阅此[链接](http://forums.esri.com/Thread.asp?c=158&f=2396&t=279947)。

祝你好运！！

# sockets - 是否可以制作服务器（服务）的中继代理（应用层）？有什么例子吗？C会更好

> ID：11732520
> 
> 赞同：0
> 
> 时间：2012-07-31T03:04:34.560
> 
> 标签：sockets, http

我正在尝试一切 NAT 遍历以使 HTTP（或其他）服务器可以从 Internet 访问。这是上一个问题，但没有运气。 [NAT 后面的 HTTP 服务器](https://stackoverflow.com/questions/11665793/http-server-behind-nats)

所以我正在尝试执行以下操作

IE <--> agentC <---------NAT/Internet/.....----------->agentS<------->Apache 服务器

场景可能是……

1.用户在IE中输入地址如“localhost:9999”（agentC）

2.agentC 使用 Stun/TURN/ICE 连接 agentS

3.agentS 将数据中继到Apache Server，然后回复客户端。

我还参考以下内容： [是否可以“中继”套接字？](https://stackoverflow.com/questions/6711086/is-it-possible-to-relay-a-socket)

但问题是：

1.agentC到agentS之间的连接可能是UDP，但是Http在TCP上，是否可以“中继套接字或数据包”

2.我正在编写agentS<---->Apache部分的测试代码，

```
((pp = popen("echo -e \"GET / HTTP/1.0\\n\\n\\n\"| nc localhost 80", "r")) == NULL)
......... 
```

但输出总是“400 Bad Request”。（而在控制台输入“echo -e”GET / HTTP/1.0\n\n\n“| nc localhost 80”会成功）

3.我将一个简单的控制台聊天室修改为agentS和agentC，是否可以携带http数据（如图片，下载...等）？

感谢您的耐心等待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:25:32.853

您并没有真正中继套接字，而是中继数据。例如，您的示例中的“agentS”打开一个侦听套接字，它接受来自“agentC”的连接。当它从“agentC”获得新连接时，“agentS”连接到 Web 服务器并进入一个循环，其中它从任一连接（“agentC”或 Web 服务器）读取的所有内容都发送到另一个连接。

由于这两个连接是独立的，因此一个是 TCP 而另一个是 UDP 并不重要。

此外，如果您需要对“agentS”中的数据进行一些处理，这很容易，因为您实际上拥有数据。“agentC”和“agentS”之间的协议甚至不必是HTTP，它可以是任何你想要的，因为程序可以进行协议转换。

作为旁注，当向网络服务器发送数据时，您以 结束行，并且标头在其自己的行中`"\r\n"`以单个结尾。`"\r\n"`所以你只需要`"\r\n\r\n"`在请求之后`GET`发送。

# sitecore - Sitecore：跟踪上次访问的页面

> ID：11732521
> 
> 赞同：1
> 
> 时间：2012-07-31T03:04:36.393
> 
> 标签：sitecore, sitecore6

在我正在开发的网站上，我们需要跟踪每个用户的最后访问页面（用户登录到该网站）。最好的方法是什么？我们已经在使用自定义配置文件，因此添加新字段很容易。我认为该站点不会有很多流量，因此更新此字段不会成为问题。有更好的想法吗？sitecore 是否已经提供了我们可以使用的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:53:32.297

我的第一个问题是：为什么只需要用户最后访问的页面？你想确定什么？

在很多情况下，您可能正在开始分析路线，或者甚至可能试图推动一些营销。

如果分析是您想要的，您可能只需将当前用户名作为事件变量弹出一个事件到您的谷歌分析帐户，以便您按用户和页面查看分析。或者，您可以使用 Sitecore OMS/DMS 功能来跟踪所有数据并查看那里的分析。

如果您正在考虑推动营销，您可能想要使用 OMS/DMS，特别是如果您想开始进入个性化或参与计划。OMS/DMS 将跟踪用户活动以及他们访问的所有页面，但不是按用户帐户。通过一些自定义，您可能可以添加该数据，但这取决于您尝试使用这些信息的目的。用户名可能对您来说并不重要。

但是，如果您只想知道在用户登录后将其发送回哪个页面，最好将其存储在 session 中，或者如果 session 不适合您，则作为 post 参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:08:28.797

默认情况下，OMS 有一个“Top Exit Pages”报告……但这是跨会话而不是用户跟踪的。

一个好的 IIS 日志解析器也应该能够为您提供这些信息......再次，这将是通过会话（或 IP）而不是登录用户。

如果您真的想通过登录用户获取每个退出页面和过滤器......我要做的是将一个新的管道处理器添加到 httpRequestBegin，并将其放在 ItemResolver 之后。然后保存 Item.Paths.Path。如果您使用默认的 ASP.NET 配置文件处理程序并且您有大量流量，我建议不要将此数据写入用户配置文件，因为它非常低效。在这里推出您自己的简单存储解决方案，或者只是将数据转储到日志中。

# javascript - 如果有 event.preventDefault 函数，ajaxForm 不起作用

> ID：11732523
> 
> 赞同：1
> 
> 时间：2012-07-31T03:04:53.850
> 
> 标签：javascript, jquery, html, jquery-forms-plugin

大家好，我正在尝试使用 jQuery Form Plugin 提交带有文件的表单，并且我正在使用 HTML5 属性验证表单，这就是我添加“event.preventDefault();”的原因

问题是，它不起作用，也没有显示任何错误消息。

这是代码

```
function showResponse(responseText){
    alert(responseText);
}
function beforeSub(){
    alert("called");
}
$('#prodFormBtn').click(function(){

$("#addProductForm").ajaxForm({
    beforeSubmit: beforeSub,
    success: showResponse
}).submit(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:12:12.947

尝试：

```
$(document).ready(function () {
  function showResponse(responseText){
     alert(responseText);
  }

  function beforeSub(){
    alert("called");
  }

  $("#addProductForm").ajaxForm(showResponse);
}); 
```

函数`ajaxForm`通过ajax表单进行交互，你只需设置成功事件处理程序（`showResponse`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:08:45.957

如果您使用的是 HTML5 验证，那么该验证是浏览器在提交表单时所做的一部分。如果您希望触发 HTML5 验证，请不要`preventDefault()`提交表单。

# ruby-on-rails - RoR：如何使用路由过滤refinerycms 后端内容？

> ID：11732526
> 
> 赞同：0
> 
> 时间：2012-07-31T03:05:36.050
> 
> 标签：ruby-on-rails, ruby, content-management-system, backend, refinerycms

每个人。我是新的炼油厂CMS（和rails也是）。我在文末总结了我的问题，以防问题描述太长。

这是我的问题：如何使用路由（或命名空间）来过滤后端内容？例如，我的网站上有几个部门。它们的结构相似，但内容不同。我想分别管理它们。比如说，我有部门 ABC 和部门 EFG 和部门 MAIN，我想通过 /refinery/ABC 和 /refinery/EFG 和 /refinery(/MAIN) 来管理它们。

我怎样才能实现这样的目标？

目前我有两个想法，但不知道如何实施。

首先，我可以将每个部门创建为 rails 引擎，然后将它们安装在 main_app 上。但是，我不喜欢这种解决方案，因为它会复制许多几乎相同的表，因为每个部门的结构都非常相似。而且我不熟悉创建引擎，担心性能。

我想到的第二种方法是让每个 Refinery::Pages、资源和自定义引擎模型都属于某个部门。然后我可以编写一个控制器来过滤所有这些东西，方法是指定我上面提到的哪个部门“/refinery/:department”。

简而言之，我更喜欢第二种方式，虽然我不知道如何：

1.  使每个模型（自定义引擎或炼油厂原生模型）都属于部门。特别是对于炼油厂原生的（资源、图像、页面）

2.  在控制器过滤了我想要的内容后，如何复制像炼油厂的默认后端一样的管理渲染。

3.  经过一番搜索，我发现@variables 太多无法正确过滤。有没有更简单的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:08:08.203

**Routes.rb**
试试把：

```
get 'refinery/:dep' => 'refinery#deps' 
```

然后在**炼油厂**控制器中你的放

```
def deps
  dep = params[:dep]
  *some code*
end 
```

# r - 在 R 中对分箱计数执行计算

> ID：11732529
> 
> 赞同：-1
> 
> 时间：2012-07-31T03:06:07.180
> 
> 标签：r, statistics

我有一个数据集存储在一个文本文件中，格式为值箱后跟计数，如下所示：

```
var_a 1:5 5:12 7:9 9:14 ... 
```

表示 var_a 在数据集中取值 1 5 次，取值 5 12 次，依此类推。每个变量以该格式位于其自己的行上。

我希望能够在 R 中对此数据集执行计算，例如分位数、方差等。有没有一种简单的方法可以从文件中加载数据并计算这些统计数据？最终，我想为每个变量制作一个盒须图。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T03:38:06.297

您可以使用`readLines`读取数据文件

```
.x <- readLines(datafile) 
```

我将创建一些虚拟数据，因为我没有该文件。这应该相当于输出`readLines`

```
## dummy
.x <- c("var_a 1:5 5:12 7:9 9:14", 'var_b 1:5 2:12 3:9 4:14') 
```

我按间距分开以获得每个

```
#split by space

space_split <- strsplit(.x, ' ')
# get the variable names (first in each list)
variable_names <- lapply(space_split,'[[',1)

# get the variable contents (everything but the first element in each list)
variable_contents <- lapply(space_split,'[',-1)

# a function to do the appropriate replicates
do_rep <- function(x){rep.int(x[1],x[2])}

# recreate the variables 

variables <- lapply(variable_contents, function(x){
  .list <- strsplit(x, ':')
  unlist(lapply(lapply(.list, as.numeric), do_rep))
})

names(variables) <- variable_names 
```

您可以使用获得每个变量的方差

```
lapply(variables, var)

## $var_a
## [1] 6.848718
## 
## $var_b
## [1] 1.138462 
```

或获取箱线图

```
boxplot(variables, ~.) 
```

![在此处输入图像描述](../Images/ecf7eb7449695201f1a52bb5f6c3e5cc.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T03:37:08.483

不知道您的数据的实际形式，我可能会使用类似`readLines`的方法将每一行作为向量，然后执行以下操作：

```
# Some sample data
temp = c("var_a 1:5 5:12 7:9 9:14",
         "var_b 1:7 4:9 3:11 2:10",
         "var_c 2:5 5:14 6:6 3:14")
# Extract the names
NAMES = gsub("[0-9: ]", "", temp)
# Extract the data
temp_1 = strsplit(temp, " |:")
temp_1 = lapply(temp_1, function(x) as.numeric(x[-1]))
# "Expand" the data
temp_1 = lapply(1:length(temp_1), 
                function(x) rep(temp_1[[x]][seq(1, length(temp_1[[x]]), by=2)],
                                temp_1[[x]][seq(2, length(temp_1[[x]]), by=2)]))
names(temp_1) = NAMES
temp_1
# $var_a
#  [1] 1 1 1 1 1 5 5 5 5 5 5 5 5 5 5 5 5 7 7 7 7 7 7 7 7 7 9 9 9 9 9 9 9 9 9 9 9 9 9 9
# 
# $var_b
#  [1] 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2
# 
# $var_c
#  [1] 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 3 3 3 3 3 3 3 3 3 3 3 3 3 3 
```

# php - 我可以缩短这段代码吗？

> ID：11732537
> 
> 赞同：0
> 
> 时间：2012-07-31T03:07:01.293
> 
> 标签：php, preg-replace, preg-match

是否可以使用 preg_replace 而不是 preg_match 来缩短此代码？

我正在使用它从电子邮件正文中删除引用的文本。引用文本是指您在回复电子邮件时引用某人的话。

```
# Get rid of any quoted text in the email body
# stripSignature removes signatures from the email
# $body is the body of an email (All headers removed)
$body_array = explode("\n", $this->stripSignature($body));
$new_body = "";
foreach($body_array as $key => $value)
{
    # Remove hotmail sig
    if($value == "_________________________________________________________________")
    {
        break;

    # Original message quote
    }
    elseif(preg_match("/^-*(.*)Original Message(.*)-*/i",$value,$matches))
    {
        break;

    # Check for date wrote string
    }
    elseif(preg_match("/^On(.*)wrote:(.*)/i",$value,$matches))
    {
        break;

    # Check for From Name email section
    }
    elseif(preg_match("/^On(.*)$fromName(.*)/i",$value,$matches))
    {
        break;

    # Check for To Name email section
    }
    elseif(preg_match("/^On(.*)$toName(.*)/i",$value,$matches))
    {
        break;

    # Check for To Email email section
    }
    elseif(preg_match("/^(.*)$toEmail(.*)wrote:(.*)/i",$value,$matches))
    {
        break;

    # Check for From Email email section
    }
    elseif(preg_match("/^(.*)$fromEmail(.*)wrote:(.*)/i",$value,$matches))
    {
        break;

    # Check for quoted ">" section
    }
    elseif(preg_match("/^>(.*)/i",$value,$matches))
    {
        break;

    # Check for date wrote string with dashes
    }
    elseif(preg_match("/^---(.*)On(.*)wrote:(.*)/i",$value,$matches))
    {
        break;

    # Add line to body
    }
    else {
        $new_body .= "$value\n";
    }
} 
```

这几乎可行，但它保留了第一行“2012 年 7 月 30 日星期一晚上 10:54，人名写道：”

```
$body = preg_replace('/(^\w.+:\n)?(^>.*(\n|$))+/mi', "", $body); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:23:04.947

这样做可能有一种更优雅的方式，但这应该可行（假设正则表达式是正确的）：

```
$search = array(
  "/^-*.*Original Message.*-*/i",
  "/^On.*wrote:.*/i",
  "/^On.*$fromName.*/i",
  "/^On.*$toName.*/i",
  "/^.*$toEmail.*wrote:.*/i",
  "/^.*$fromEmail.*wrote:.*/i",
  "/^>.*/i",
  "/^---.*On.*wrote:.*/i"
);

$body_array = explode("\n", $this->stripSignature($body));
$body = implode("\n", array_filter(preg_replace($search, '', $body_array)));

// or just

$body = str_replace(
  array("\0\n", "\n\0"), '', preg_replace($search, "\0", $body)
); 
```

**编辑：**正如 inhan 所指出的，电子邮件地址中的点（以及可能的[其他特殊字符](http://en.wikipedia.org/wiki/Email_address#Local_part)）需要[`preg_quote()`](http://php.net/preg_quote)在插入模式之前使用转义。

# java-me - LWUIT4IO (v1.5) ConnectionRequest 的 readResponse() 问题 - 诺基亚 SDK 2.0

> ID：11732539
> 
> 赞同：1
> 
> 时间：2012-07-31T03:07:22.073
> 
> 标签：java-me, lwuit, nokia-s40

我一直在将一个现有的 J2ME 移动应用程序移植到最新的**诺基亚 SDK 2.0**平台，该应用程序允许用户查看存档的新闻视频，适用于 40 系列全触控设备。

我将**LWUIT**和**LWUIT4IO**技术分别用于应用程序的 UI 和网络功能。

该应用程序已经过测试，可在**S40 第 5 版 SDK**平台模拟器上运行。扩展 LWUIT4IO 的 **ConnectionRequest** 类并利用 LWUIT 的 **XMLParser**，应用程序可以成功发送 HTTP 请求并从 Web 服务获取预期的响应数据，该服务基本上返回 XML 格式的提要类型（包含视频的必要元数据）（这里是网络服务：  [http](http://nokiamusic.myxph.com/nokianewsfeed.aspx?format=3gp) ://nokiamusic.myxph.com/nokianewsfeed.aspx?format=3gp ）

但由于某种原因，当尝试在最新的诺基亚 SDK 2.0 平台上运行应用程序时，情况并非如此。 在尝试解析 (XMLParser.parse()) Web 服务的 **InputStream** 响应时，它会抛出 *java.lang.NullPointerException 。*当我跟踪发送的相应请求和接收的响应的模拟器的*网络流量监视器*时 - 尽管响应状态为 200 成功，但仍返回 0 个字节作为内容。显然 XMLParser 对象首先没有要解析的内容。

 ***我希望你能以某种方式阐明这个问题或分享任何相关的解决方案，或者帮助我进一步完善这个问题。

下面贴出的是*SegmentService*类（LWUIT 的 ConnectionRequest 的子类）的代码，它连接到 Web 服务并处理 XML 响应：

```
public class SegmentService extends ConnectionRequest implements ParserCallback {

    private Vector segments;
    private Video segment;

    public SegmentService(String backend) {
        String slash = backend.endsWith("/") ? "" : "/";
        setPost(false);
        setUrl(backend + slash + "nokianewsfeed.aspx");
        addArgument("format", "3gp");
    }

    public void setDateFilter(String date) {
        System.out.println(date);
        addArgument("date", date);
    }

    private Video getCurrent() {
        if (segment == null) {
            segment = new Video();
        }
        return segment;
    }

    protected void readResponse(InputStream input) throws IOException {

        InputStreamReader i = new InputStreamReader(input, "UTF-8"); 
        XMLParser xmlparser = new XMLParser();

        System.out.println("Parsing the xml...");
        Element element = xmlparser.parse(i);
        System.out.println("Root " + element.getTagName());

        int max = element.getNumChildren();
        System.out.println("Number of children: " + max);

        segments = new Vector();

        for (int c = 0; c < max; c++) {
            Element e = element.getChildAt(c);
            System.out.println("segment " + c);

            int len = e.getNumChildren();
            System.out.println("Number of children: " + len);

            for (int d=0; d<len; d++) {
                Element s = e.getChildAt(d);
                String property = s.getTagName();
                System.out.println("key: " + property);
                String value = (s.getNumChildren()>0) ? s.getChildAt(0).getText() : null;
                System.out.println("value: " + value);

                if (property.equals("title")) {
                    getCurrent().setTitle(value);
                } else if (property.equals("description")) {
                    getCurrent().setDescription(value);
                } else if (property.equals("videourl")) {
                    getCurrent().setVideoUrl(value);
                } else if (property.equals("thumburl")) {
                    getCurrent().setThumbUrl(value);
                } else if (property.equals("adurl")) {
                    getCurrent().setAdUrl(value);
                } else if (property.equals("publishdate")) {
                    getCurrent().setPublishDate(value);
                } else if (property.equals("category")) {
                    getCurrent().setCategory(value);
                } else if (property.equals("weburl")) {
                    getCurrent().setWebUrl(value);
                } else if (property.equals("thumburl2")) {
                    getCurrent().setThumb210(value);
                } else if (property.equals("thumburl4")) {
                    getCurrent().setThumb40(value);
                }
            }

            if (segment != null) {
                segments.addElement(segment);
                segment = null;
            }
        }
        fireResponseListener(new NetworkEvent(this, segments));
    }

    public boolean parsingError(int errorId, String tag, String attribute, String value, String description) {
        System.out.println(errorId);
        System.out.println(tag);
        System.out.println(value);
        System.out.println(description);
        return true;
    }
} 
```***

# java - 无需任何安装即可使用数据库

> ID：11732542
> 
> 赞同：2
> 
> 时间：2012-07-31T03:07:44.720
> 
> 标签：java, database

我正在开发一个程序，我想知道如何继续，因为我不希望使用它的人安装任何驱动程序或执行 odbc 步骤以使数据库正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T03:09:37.370

使用 HSQLDB，你只需要在你的类路径中包含 jar 就可以了。 [HSQLDB 文档](http://hsqldb.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:13:18.493

SQLite 以紧凑的文件格式保存数据库。它只是您的程序的一个库，可以访问文件中的数据库，不需要设置或安装。

# ios - 在我的应用程序关闭后能够跟踪用户的数据

> ID：11732546
> 
> 赞同：0
> 
> 时间：2012-07-31T03:08:33.677
> 
> 标签：ios, data-storage

我为 iPhone 创建了一个应用程序，其中有两个视图控制器。第 1 页有 a`UIImageView`和 a `UILabel`，第 2 页有一个`UIImagePickerController`允许用户更新第 1 页上的图像 和一个`UITextField`允许用户更新`UILabel`. 第 1 页上的图像视图放置了一个默认图像，以防用户不想更改它。

我不会发布我的代码，因为它可以正常工作。

我的问题是，如果用户选择更改显示在第一页上的图像，我想将他们选择的图像保存在某个地方，所以当应用程序随后打开时，将显示他们自己选择的图像，而不是默认的.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:27:43.093

研究使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)来保存用户的偏好（某种 ivar）。并且在重新启动您的应用程序时，查询默认值以检查选择了哪个首选项并根据该首选项加载图像。

# arrays - Perl 中不打印数组元素

> ID：11732553
> 
> 赞同：0
> 
> 时间：2012-07-31T03:09:55.123
> 
> 标签：arrays, perl, printing, newline

我有两组文件。一个文件给出了基因名称列表（每行一个基因）。第二个文件有一个基因对列表（例如，=> '1,2' 和一个基因对 perl 行）。基因名称是数字的。我想列出除已知基因对之外的所有可能的基因组合。

我的输出应该是：

```
3,4  
4,5  
6,7  
...  
... 
```

但是，我得到这样的东西=>

```
,4  
,5  
,7 
```

所有第一个元素都不会打印。我不确定代码到底有什么问题。任何人都可以帮忙吗？

我的代码：

```
#! usr/bin/perl

use strict;
use warnings;

if (@ARGV !=2) {
   die "Usage: generate_random_pairs.pl <entrez_genes> <known_interactions>\n";
}
my ($e_file, $k_file) = @ARGV;

open (IN, $e_file) or die "Error!! Cannot open $e_file\n";
open (IN2, $k_file) or die "Error!! Cannot open $k_file\n";

my @e_file = <IN>; chomp (@e_file);
my @k_file = <IN2>; chomp (@k_file);

my (%known_interactions, %random_interactions);

foreach my $line (@k_file) {
    my @array = split (/,/, $line);
    $known_interactions{$array[0]} = $array[1];
}

for (my $i = 0; $i <= $#e_file; $i++) {
    for (my $j = $i+1 ; $j <= $#e_file; $j++) {
        if ((exists $known_interactions{$e_file[$i]}) && ($known_interactions{$e_file[$i]} == $e_file[$j])) {next;}
        if ((exists $known_interactions{$e_file[$j]}) && ($known_interactions{$e_file[$j]} == $e_file[$i])) {next;}
        print "$e_file[$i],$e_file[$j]\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T03:15:56.663

您的文件使用 CR LF 作为行尾，但您在使用 LF 作为行尾的系统上，因此您的程序输出

```
"3" <CR> "," "4" <CR> <LF> 
```

您的终端显示为

```
,4 
```

使用修复行尾

```
dos2unix inputfile 
```

或者改变

```
chomp(@e_file);
chomp(@k_file); 
```

至

```
s/\s+\z// for @e_file;
s/\s+\z// for @k_file; 
```

# python - 如何在列表中的每次连续零运行中删除除 x 之外的所有零？

> ID：11732554
> 
> 赞同：4
> 
> 时间：2012-07-31T03:09:54.290
> 
> 标签：python, list, del

对于 Python 中列表中的每次`x`或多个连续零的运行，我想删除运行中的所有零，但`x`它们除外。如果`x = 0`，则删除所有零。

我在想一个 Python 函数，它接受一个列表，`L`和一个数字`x`，作为输入。

例如，让`L = [7, 0, 12, 0, 0, 2, 0, 0, 0, 27, 10, 0, 0, 0, 0, 8]`.

*   如果`x = 0`，则返回`L = [7, 12, 2, 27, 10, 8]`
*   如果`x = 1`，则返回`L = [7, 0, 12, 0, 2, 0, 27, 10, 0, 8]`
*   如果`x = 2`，则返回`L = [7, 0, 12, 0, 0, 2, 0, 0, 27, 10, 0, 0, 8]`
*   如果`x = 3`，则返回`L = [7, 0, 12, 0, 0, 2, 0, 0, 0, 27, 10, 0, 0, 0, 8]`
*   如果`x = 4`，则返回`L = [7, 0, 12, 0, 0, 2, 0, 0, 0, 27, 10, 0, 0, 0, 0, 8]`（与原始相同`L`）
*   如果`x >= 5`，则返回原始 L，因为没有 5 个或更多连续零的运行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T03:17:58.527

作为生成器，这很容易做到。`list`如果您想要一个删除零运行的新列表，请将您的调用包装在构造函数中。

```
def compact_zero_runs(iterable, max_zeros):
    zeros = 0
    for i in iterable:
        if i == 0:
            zeros += 1
            if zeros <= max_zeros:
                yield i
        else:
            zeros = 0
            yield i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T03:16:35.370

使用 groupby：

```
def del_zeros(lst, n):
    lst = (list(j)[:n] if i else list(j) 
           for i,j in itertools.groupby(lst, key=lambda x:x==0))

    return [item for sublist in lst for item in sublist] 
```

和测试：

```
>>> [del_zeros(L, i) for i in range(5)]
[[7, 12, 2, 27, 10, 8],
 [7, 0, 12, 0, 2, 0, 27, 10, 0, 8],
 [7, 0, 12, 0, 0, 2, 0, 0, 27, 10, 0, 0, 8],
 [7, 0, 12, 0, 0, 2, 0, 0, 0, 27, 10, 0, 0, 0, 8],
 [7, 0, 12, 0, 0, 2, 0, 0, 0, 27, 10, 0, 0, 0, 0, 8]] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T03:20:57.090

```
from itertools import groupby, chain, islice
from functools import partial
from operator import eq

def f(L, x):
    groups = groupby(L, partial(eq, 0))
    return list(chain.from_iterable(islice(v, x) if k else v for k,v in groups)) 
```

# algorithm - 当平方和为N时如何找到四个变量的所有可能值？

> ID：11732555
> 
> 赞同：6
> 
> 时间：2012-07-31T03:09:59.810
> 
> 标签：algorithm, language-agnostic

`A^2+B^2+C^2+D^2 = N`给定一个整数`N`，打印出`ABCD`解方程的所有可能的整数值组合。

我猜我们可以比蛮力做得更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T04:45:50.940

天真的蛮力是这样的：

```
n = 3200724;
lim = sqrt (n) + 1;
for (a = 0; a <= lim; a++)
    for (b = 0; b <= lim; b++)
        for (c = 0; c <= lim; c++)
            for (d = 0; d <= lim; d++)
                if (a * a + b * b + c * c + d * d == n)
                    printf ("%d %d %d %d\n", a, b, c, d); 
```

不幸的是，这将导致超过一万亿次循环，效率并不高。

实际上，您可以通过在每个级别打折大量的不可能性来做得更好，例如：

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    int n = atoi (argv[1]);
    int a, b, c, d, na, nb, nc, nd;
    int count = 0;

    for (a = 0, na = n; a * a <= na; a++) {
        for (b = 0, nb = na - a * a; b * b <= nb; b++) {
            for (c = 0, nc = nb - b * b; c * c <= nc; c++) {
                for (d = 0, nd = nc - c * c; d * d <= nd; d++) {
                    if (d * d == nd) {
                        printf ("%d %d %d %d\n", a, b, c, d);
                        count++;
                    }
                    tot++;
                }
            }
        }
    }

    printf ("Found %d solutions\n", count);

    return 0;
} 
```

它仍然是蛮力，但不像它那么粗暴，因为它知道何时尽早停止每个级别的循环。

在我的（相对）适度的盒子上，需要不到一秒^(（a）)的时间来获得最多 50,000 个数字的所有解决方案。除此之外，它开始需要更多时间：

```
 n          time taken
----------      ----------
   100,000            3.7s
 1,000,000       6m, 18.7s 
```

因为`n = ten million`，在我杀死它之前，它已经运行了大约一个半小时。

所以，我想说蛮力在某种程度上是完全可以接受的。除此之外，还需要更多的数学解决方案。

* * *

为了提高效率，您只能在`d >= c >= b >= a`. 那是因为您可以将这些组合中的所有解决方案构建成排列（在两个或多个`a`、`b`、`c`或的值`d`相同的情况下，可能会删除重复项）。

此外，`d`循环体不需要检查 的每个值`d`，只需检查最后一个可能的值。

在这种情况下获得结果`1,000,000`需要不到 10 秒而不是超过 6 分钟：

```
 0    0    0 1000
   0    0  280  960
   0    0  352  936
   0    0  600  800
   0   24  640  768
   :    :    :    :
 424  512  512  544
 428  460  500  596
 432  440  480  624
 436  476  532  548
 444  468  468  604
 448  464  520  560
 452  452  476  604
 452  484  484  572
 500  500  500  500
Found 1302 solutions

real   0m9.517s
user   0m9.505s
sys    0m0.012s 
```

该代码如下：

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    int n = atoi (argv[1]);
    int a, b, c, d, na, nb, nc, nd;
    int count = 0;

    for (a = 0, na = n; a * a <= na; a++) {
        for (b = a, nb = na - a * a; b * b <= nb; b++) {
            for (c = b, nc = nb - b * b; c * c <= nc; c++) {
                for (d = c, nd = nc - c * c; d * d < nd; d++);
                if (d * d == nd) {
                    printf ("%4d %4d %4d %4d\n", a, b, c, d);
                    count++;
                }
            }
        }
    }

    printf ("Found %d solutions\n", count);

    return 0;
} 
```

* * *

而且，根据 DSM 的建议，`d`循环可以完全消失（因为`d`（负数折扣）只有一个可能的值并且可以计算出来），这将一百万个案例减少到两秒，而十百万案例到更易于管理的 68 秒。

该版本如下：

```
#include <stdio.h>
#include <math.h>

int main(int argc, char *argv[]) {
    int n = atoi (argv[1]);
    int a, b, c, d, na, nb, nc, nd;
    int count = 0;

    for (a = 0, na = n; a * a <= na; a++) {
        for (b = a, nb = na - a * a; b * b <= nb; b++) {
            for (c = b, nc = nb - b * b; c * c <= nc; c++) {
                nd = nc - c * c;
                d = sqrt (nd);
                if (d * d == nd) {
                    printf ("%d %d %d %d\n", a, b, c, d);
                    count++;
                }
            }
        }
    }

    printf ("Found %d solutions\n", count);

    return 0;
} 
```

* * *

^((a)) : 所有的时序都是在内部`printf`注释掉的情况下完成的，这样 I/O 就不会扭曲数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T03:52:04.627

维基百科页面有一些有趣的背景信息，但拉格朗日的四平方定理（或者，更准确地说，巴切特定理 - 拉格朗日只证明了这一点）并没有真正详细说明如何找到所说的平方。

正如我在评论中所说，解决方案将很重要。[本文](http://www.myreckonings.com/Dead_Reckoning/Online/Materials/Sum%20of%20Four%20Squares.pdf)讨论了四平方和的可解性。该文件称：

> 没有方便的算法（除了本文第二段中提到的简单算法）来查找表示计算所指示的其他解决方案，但也许这将通过给出什么样的解决方案的想法来简化搜索不存在。
> 
> 还有一些与该主题相关的其他有趣事实。还有其他定理指出每个整数都可以写成四个特定平方倍数的和。例如，每个整数都可以写成 N = a^2 + 2b^2 + 4c^2 + 14d^2。有 54 个这样的情况适用于所有整数，Ramanujan 在 1917 年提供了完整的列表。

有关详细信息，请参阅[模块化表单](http://uclmaths.org/images/9/93/Amersi-modular-16nov.pdf)。除非你有一些数论背景，否则这并不容易理解。如果您可以概括 Ramanujan 的 54 种形式，您可能会更轻松。话虽如此，在我引用的第一篇论文中，有一个小片段讨论了一种可能找到所有解决方案的算法（即使我发现它有点难以理解）：

> 例如，据报道，1911 年，计算器 Gottfried Ruckle 被要求将 N = 15663 减少为四个平方和。他在 8 秒内产生了 125^2 + 6^2 + 1^2 + 1^2 的解，紧随其后的是 125^2 + 5^2 + 3^2 + 2^2。一个更困难的问题（反映在距离原始数字较远的第一项，后面的项相应地更大）花费了 56 秒：11399 = 105^2 + 15^2 + 8^2 + 5^2。**一般来说，策略是首先将第一项设置为 N 以下的最大平方，并尝试将较小的余数表示为三个平方的和。然后将第一项设置为 N 以下的下一个最大正方形，依此类推。**随着时间的推移，闪电计算器将熟悉将小数表示为平方和，这将加快处理速度。

（强调我的。）

该算法被描述为递归的，但它可以很容易地迭代实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T03:53:17.213

似乎所有整数都可以通过这样的组合组成：

```
0 = 0^2 + 0^2 + 0^2 + 0^2
1 = 1^2 + 0^2 + 0^2 + 0^2
2 = 1^2 + 1^2 + 0^2 + 0^2
3 = 1^2 + 1^2 + 1^2 + 0^2
4 = 2^2 + 0^2 + 0^2 + 0^2, 1^2 + 1^2 + 1^2 + 1^2 + 1^2
5 = 2^2 + 1^2 + 0^2 + 0^2
6 = 2^2 + 1^2 + 1^2 + 0^2
7 = 2^2 + 1^2 + 1^2 + 1^2
8 = 2^2 + 2^2 + 0^2 + 0^2
9 = 3^2 + 0^2 + 0^2 + 0^2, 2^2 + 2^2 + 1^2 + 0^2
10 = 3^2 + 1^2 + 0^2 + 0^2, 2^2 + 2^2 + 1^2 + 1^2
11 = 3^2 + 1^2 + 1^2 + 0^2
12 = 3^2 + 1^2 + 1^2 + 1^2, 2^2 + 2^2 + 2^2 + 0^2
.
.
. 
```

等等

当我在脑海中做了一些初步的工作时，我认为只有完美的正方形才会有超过 1 个可能的解决方案。但是，在将它们列出之后，在我看来，它们没有明显的顺序。但是，我想到了一种我认为最适合这种情况的算法：

重要的是使用 4 元组 (a, b, c, d)。在任何给定的 4 元组中，它是 a^2 + b^2 + c^2 + d^2 = n 的解，我们将为自己设置一个约束，即 a 始终是 4 中最大的，b 次之，并且依此类推，例如：

```
a >= b >= c >= d 
```

另请注意，a^2 不能小于 n/4，否则平方和必须小于 n。

那么算法是：

```
1a. Obtain floor(square_root(n)) # this is the maximum value of a - call it max_a
1b. Obtain the first value of a such that a^2 >= n/4 - call it min_a
2\. For a in a range (min_a, max_a) 
```

在这一点上，我们已经选择了一个特定的 a，现在正在研究将 a^2 的差距缩小到 n - 即 (n - a^2)

```
3\. Repeat steps 1a through 2 to select a value of b. This time instead of finding
floor(square_root(n)) we find floor(square_root(n - a^2)) 
```

等等等等。所以整个算法看起来像：

```
1a. Obtain floor(square_root(n)) # this is the maximum value of a - call it max_a
1b. Obtain the first value of a such that a^2 >= n/4 - call it min_a
2\. For a in a range (min_a, max_a)
3a. Obtain floor(square_root(n - a^2))
3b. Obtain the first value of b such that b^2 >= (n - a^2)/3
4\. For b in a range (min_b, max_b)
5a. Obtain floor(square_root(n - a^2 - b^2))
5b. Obtain the first value of b such that b^2 >= (n - a^2 - b^2)/2
6\. For c in a range (min_c, max_c)
7\. We now look at (n - a^2 - b^2 - c^2). If its square root is an integer, this is d.
Otherwise, this tuple will not form a solution 
```

在步骤 3b 和 5b，我使用 (n - a^2)/3, (n - a^2 - b^2)/2。我们分别除以 3 或 2，因为元组中的值的数量尚未“固定”。

一个例子：

在 n = 12 上执行此操作：

```
1a. max_a = 3
1b. min_a = 2
2\. for a in range(2, 3):
    use a = 2
3a. we now look at (12 - 2^2) = 8
max_b = 2
3b. min_b = 2
4\. b must be 2
5a. we now look at (12 - 2^2 - 2^2) = 4
max_c = 2
5b. min_c = 2
6\. c must be 2
7\. (n - a^2 - b^2 - c^2) = 0, hence d = 0
so a possible tuple is (2, 2, 2, 0)

2\. use a = 3
3a. we now look at (12 - 3^2) = 3
max_b = 1
3b. min_b = 1
4\. b must be 1
5a. we now look at (12 - 3^2 - 1^2) = 2
max_c = 1
5b. min_c = 1
6\. c must be 1
7\. (n - a^2 - b^2 - c^2) = 1, hence d = 1
so a possible tuple is (3, 1, 1, 1) 
```

这是仅有的两个可能的元组 - 嘿！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T07:49:17.973

nebffa 有一个很好的答案。一个建议：

```
 step 3a:  max_b = min(a, floor(square_root(n - a^2))) // since b <= a 
```

max_c 和 max_d 也可以以相同的方式进行改进。

这是另一个尝试：

```
1\. generate array S: {0, 1, 2^2, 3^2,.... nr^2} where nr = floor(square_root(N)). 
```

现在的问题是从 sum(a, b,c,d) = N 的数组中找到 4 个数字；

```
2\. according to neffa's post (step 1a & 1b), a (which is the largest among all 4 numbers) is between [nr/2 .. nr]. 
```

我们可以将 a 从 nr 循环到 nr/2 并计算 r = N - S[a]; 现在的问题是从 S 中找到 3 个数字 sum(b,c,d) = r = N -S[a];

这是代码：

```
nr = square_root(N);
S = {0, 1, 2^2, 3^2, 4^2,.... nr^2};
for (a = nr; a >= nr/2; a--)
{
   r = N - S[a];
   // it is now a 3SUM problem
   for(b = a; b >= 0; b--)
   {
      r1 = r - S[b];
      if (r1 < 0) 
          continue;

      if (r1 > N/2) // because (a^2 + b^2) >= (c^2 + d^2)
          break;

      for (c = 0, d = b; c <= d;)
      {
          sum = S[c] + S[d];
          if (sum == r1) 
          {
               print a, b, c, d;
               c++; d--;
          }
          else if (sum < r1)
               c++;
          else
               d--;
      }
   }
} 
```

运行时是**`O(sqare_root(N)^3)`**.

这是在我的 VM 上运行 java 的测试结果（时间以毫秒为单位，结果# 是有效组合的总数，时间 1 有打印输出，时间 2 没有打印输出）：

```
N            result#  time1     time2
-----------  -------- --------  -----------
  1,000,000   1302       859       281
 10,000,000   6262     16109      7938
100,000,000  30912    442469    344359 
```

# sql-server-2008 - 如何排除 Cross apply 以使其有条件

> ID：11732560
> 
> 赞同：2
> 
> 时间：2012-07-31T03:10:21.363
> 
> 标签：sql-server-2008

我的查询中有以下子句。我有一个称为服务条目的表和一个称为服务条目部分的第二个表。一个服务条目记录可以有多个服务条目部分。服务条目部分表有一个名为 servicetypeids 的列，格式如下：第 1 行：1,2,3，第 2 行：3,4 等等。我使用表值函数来查看服务部件中的哪些服务条目具有服务类型 ID，例如我的参数可能是 1 或 2,3 等等。查询的那部分工作正常，我执行交叉应用等。我想要做的是如果我的参数 @ServiceTypes 为 NULL，那么我不想搜索服务类型 ID 列并简单地返回服务条目中存在的服务条目部分。我仍将加入零件表，零件活动条件工作正常。

```
 S.ID IN(SELECT DISTINCT ServiceEntryID
                        FROM 
                          ServiceEntryPart M
                          CROSS APPLY
                          dbo.SplitStrings_Moden(M.ServiceTypeIDs, N',') M2
                          JOIN dbo.SplitStrings_Moden(@ServiceTypes, N',') P ON M2.Item = P.Item
                          INNER JOIN Part ON M.PartID = Part.ID
                              WHERE 
@ActivePart is null or @ActivePart = Part.Active)) 
```

# python - Django 站点的上下文处理器

> ID：11732562
> 
> 赞同：1
> 
> 时间：2012-07-31T03:11:38.680
> 
> 标签：python, django, django-context

我正在建立一个婚礼网站创建者（请不要判断）。

几乎每个视图都需要调用 a`Wedding.objects.get(id=wedding_id)`然后将其作为变量的一部分传递给模板。

似乎这对自定义上下文处理器很有用。想知道创建可以读取 URL 的上下文处理器的最佳方法是什么，如果有婚礼 ID，请在模板中包含一个婚礼对象。如果没有婚礼 ID，则模板中的婚礼=无。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:03:57.053

首先，我会确保您对于几乎每个请求都确实需要它，因为您将在对每个请求的显式查询中进行编码。查询是即时的`get`，而不是惰性的`filter`。如果您想让它更懒惰，您可以将 get 包装在一个小的“get_wedding”包装器中，或者使用 a`filter`并从列表中获取它......

```
def add_wedding_context(request):
    id_ = request.GET.get('wedding_id', None)
    wedding = None
    if id_ is not None:
        try:
            wedding = Wedding.objects.get(id=id_)
        except Wedding.DoesNotExist:
            pass
    return {'wedding':wedding} 
```

如果您想尝试一种惰性方法，以便仅在您实际使用该对象时才运行查询，您可以将其包装在一个惰性对象中：

```
from django.utils.functional import SimpleLazyObject
from functools import partial

def get_wedd_or_none(id_):
    try:
        return Wedding.objects.get(id=id_)
    except Wedding.DoesNotExist:
        return None

def add_wedding_context(request):
    id_ = request.GET.get('wedding_id', None)
    if id_ is not None:
        lazy = SimpleLazyObject(partial(get_wedd_or_none, id_))
        return {'wedding': lazy}
    else:
        return {'wedding': None} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:47:28.757

```
import re

def add_wedding_ring(request):
  if re.match('.*/id=.*',request.get_full_path()):
     return {'wid':Wedding.objects.get(id=wedding_id)}
  return {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:40:49.730

@Brenden 为什么是上下文处理器？如果您使用`Django>=1.3`，那么您可以使用基于类的视图，例如

```
class ViewWedding(DetailView):
  model = Wedding
  pk_url_kwarg = 'wedding_id'
  template_name = 'you-template.html'
  context_object_name = 'wedding' 
```

是否值得拥有一个更多的上下文处理器，而不是通过`wedding`我认为它比 context_processor 更灵活和更可取的方式从视图传递实例？

谢谢，

苏丹

# javascript - 使用 shift 和箭头键时的 textarea 插入符号位置？

> ID：11732570
> 
> 赞同：1
> 
> 时间：2012-07-31T03:12:49.420
> 
> 标签：javascript, html, caret, getcaretpos

我找到了一些很好的答案来查找文本区域中的插入符号位置，但我还没有找到一个可以在按住 shift 键并使用箭头键后检测插入符号位置的答案。当按住 shift 键时，光标可以在选择过程中后退或前进，因此在这种情况下，使用 selectionStart 和 selectionEnd 概念对于光标位置似乎并不可靠。

有人有好的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:49:57.940

实际上，考虑到插入符号只能位于 selectionStart 或 selectionEnd 中，您可以通过跟踪前一个 start+end 来解决这个问题，看看哪个发生了变化。这是一项工作（因为它需要在 Shift+End 操作后将 15-20 更改为 20-25 的情况下进行设置操作），但我认为这并不太难。

# opengl-es - LibGDX - 使用 FBO 将 Sprites 纹理化

> ID：11732572
> 
> 赞同：1
> 
> 时间：2012-07-31T03:12:56.857
> 
> 标签：opengl-es, libgdx, framebuffer, blending, fbo

我正在使用 LibGDX 开发一个简单的绘画应用程序，但我无法使用我正在使用的设置正确“绘画”它。我尝试这样做的方法是使用精灵进行绘制，并在适当的时候使用 LibGDX 的 FBO 命令将这些单独的精灵添加到背景纹理中。

我遇到的问题与混合有关，因为当精灵被添加到我正在构建的这个纹理中时，精灵的任何透明像素都将显着变亮，这些像素位于先前绘制的像素之上，这显然看起来不太好。以下是结果的样子，使用绿色>红色渐变的圆圈作为“画笔”。顶行现在是背景纹理的一部分，而底行仍然是纯精灵绘制的形式。

[http://i238.photobucket.com/albums/ff307/Muriako/hmm.png](http://i238.photobucket.com/albums/ff307/Muriako/hmm.png)

基本上，每个精灵的透明区域都会照亮它们下面的任何东西，我需要让它们完全透明。我弄乱了许多不同的混合模式组合，但找不到更好的组合。例如 GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA 没有这个问题，但是每个精灵的透明像素似乎在 alpha 中降低了，甚至从下面的图层中获取了一些颜色，这看起来更烦人。

我很乐意根据要求发布任何代码片段，但是自从我开始尝试解决这些问题以来，我的代码变得有些混乱，所以我宁愿只在必要时提供必要的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:05:44.227

你画精灵的顺序是什么？Alpha 混合仅适用于目标中已经存在的像素，因此您必须在 Z 中绘制所有包含 Alpha 的事物（以及它们“背后”的所有事物）以获得正确的结果。我在用着`.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);`

# scala - SBT：编译期间查看类文件摘要？

> ID：11732573
> 
> 赞同：8
> 
> 时间：2012-07-31T03:13:02.127
> 
> 标签：scala, compiler-construction, playframework-2.0, sbt, summary

试图准确查看在完整和增量构建期间正在编译哪些源文件。

就目前而言，我看到正在编译的“X 个 Scala 和 Y 个 Java 文件”的摘要，这很好，但*究竟是哪些*文件正在编译？

```
set logLevel in Global := Level.Debug 
```

没有任何用处（我可以看到）

```
set scalacOptions in Compile += "-print" 
```

更有帮助，它打印出互联网......我的意思是，大量生成的代码，其中确实包含类名，只是不太容易筛选。

基本上是想获得正在编译的文件的摘要。

也许上面的 scalac 标志有一个非详细的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:52:10.543

我不知道任何允许这样做的选项，但它可能是您可以编写的最简单的编译器插件（[http://www.scala-lang.org/node/140](http://www.scala-lang.org/node/140)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-19T12:58:04.220

试试`-verbose`。这显示正在解析哪些类，

```
[ERROR] [parsing Tapnon.scala]
[ERROR] [parsing Tapnonics.scala]
[ERROR] [parsing package.scala]
[ERROR] [parsing EvenlyScorer.scala] 
```

# json - 这不是 JSON。它是什么？

> ID：11732579
> 
> 赞同：1
> 
> 时间：2012-07-31T03:13:27.590
> 
> 标签：json, api

Google 的财务 API 返回的内容几乎是 JSON，但不是：

```
{lhs: "1 U.S. dollar",rhs: "0.636658815 British pounds",error: "",icc: true} 
```

我确定这是一种有效的格式，但我不确定是哪种。它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T03:14:34.503

那是一个普通的 JavaScript 对象。它可以用任何 JavaScript 解析器来处理。

与 JSON 非常相似，但不完全一样。如果是 JSON，则键周围会有引号。

# c++ - Delphi 和 C/C++ DLL 结构与记录

> ID：11732585
> 
> 赞同：0
> 
> 时间：2012-07-31T03:14:21.290
> 
> 标签：c++, c, delphi, memory-management, dll

我之前问过一个关于 delphi 和 C/C++ DLL 的问题。

我现在有另一个关于记录/结构的问题。DLL 应该能够从 MainAPP 动态更改指针变量的值。

我的delphi MAINAPP有以下记录：

```
type MyRec = record
 MyInteger    : Pointer;
 MyWideString : pwidechar;
 MyString     : pchar;
 MyBool       : Pointer
end;

type
 TMyFunc = function ( p  : pointer ): pointer; stdcall;

procedure test;
var
 MyFunction  : TMyFunc;
 TheRecord   : MyRec;
 AnInteger   : Integer;
 AWideString : WideString;
 AString     : String;
 ABool       : Bool;
begin
 AnInteger                := 1234;
 AWideString              := 'hello';
 AString                  := 'hello2';
 ABool                    := TRUE;
 TheRecord.MyInteger      := @AnInteger;
 TheRecord.MyWideString   := pwidechar(AWideString);
 TheRecord.AString        := pchar(AString);
 TheRecord.ABool          := @ABool;
 [...]
 @MyFunction := GetProcAddress...
 [...]
 MyFunction  (@TheRecord);  // now the DLL should be able to change the values dynamically.
 MessageBoxW (0, pwidechar(AWideString), '', 0); // Show the results how the DLL changed the String to...
end; 
```

C/C++ 代码（只是示例）

```
typedef struct _TestStruct{
void    *TheInteger;    // Pointer to Integer
wchar_t *TheWideString; // Pointer to WideString
char    *TheAnsiString; // Pointer to AnsiString  
bool    *TheBool        // Pointer to Bool
}TestStruct;

__declspec(dllexport) PVOID __stdcall MyExportedFunc (TestStruct *PTestStruct)
{
MessageBoxW(0 ,PTestStruct->TheWideString, L"Debug" , 0); // We read the value.
    PTestStruct->TheWideString = L"Let me change the value here.";
return 0;
} 
```

由于某些原因它会崩溃等。我做错了什么？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:31:39.927

这可能不是 C++ 代码分配给`TheWideString`指针时崩溃的原因，但我确实看到了预期问题......

我注意到您将 Delphi`AWideString`变量指向的字符串数据的地址放入`MyWideString`记录的字段中。您将记录传递给 C++ 函数，该函数将新的指针值分配给`TheWideString/MyWideString`记录的字段。当执行返回到 Delphi 代码时，输​​出`AWideString`变量的内容。

您的评论表明您希望 C++ 函数更改 AWideString 变量的内容，但这不会发生。

C++ 函数更改结构中的字段。它对字段先前指向的内存位置没有任何作用。AWideString 指向的数据不会受到 C++ 函数的影响。

如果 C++ 代码将数据复制到字段中包含的地址中，那么它将覆盖`AWideString`指向的字符串数据。由于`AWideString`是 Delphi 管理的字符串，并且 C++ 函数将比原始字符串分配的空间更多的数据复制到该字符串内存区域，因此在 C++ 函数中复制数据将超过 Delphi 分配的字符串缓冲区的末尾并且可能损坏Delphi 堆。一段时间后可能会发生崩溃。所以最好只将指针分配给字段，而不是复制数据！;>

要查看 C++ 函数发生了什么变化，您的 Delphi 代码应该`MyWideString`在调用 C++ 函数后输出记录字段的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:59:06.210

同步结构中的字段顺序。您可以使用错误的指针破坏内存堆。此外，请检查 Delphi 和 C++ 中的对齐情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T04:35:32.843

您对字符串字段的管理不善。 `PWideChar`并且`PChar` **与**“指向 WideString 的指针”和“指向 AnsiString 的指针”不同。Delphi 有`PWideString`( `WideString*`) 和`PAnsiString`( `AnsiString*`) 类型用于此目的。您还应该使用 Delphi 的`PInteger`( `int*`) 和`PBoolean`( `bool*`) 类型而不是`Pointer`( `void*`)。Delphi 和 C++ 都是类型安全的语言。尽可能远离无类型指针，你的代码会更好。

```
type
  PMyRec = ^MyRec;
  MyRec = record
    MyInteger    : PInteger;
    MyWideString : PWideString;
    MyAnsiString : PAnsiString;
    MyBool       : PBoolean;
  end;

  TMyFunc = function ( p  : PMyRec ): Integer; stdcall;

procedure test;
var
  MyFunction  : TMyFunc;
  TheRecord   : MyRec;
  AnInteger   : Integer;
  AWideString : WideString;
  AAnsiString : AnsiString;
  ABool       : Bool;
begin
 AnInteger                := 1234;
 AWideString              := 'hello';
 AAnsiString              := 'hello2';
 ABool                    := TRUE;
 TheRecord.MyInteger      := @AnInteger;
 TheRecord.MyWideString   := @AWideString;
 TheRecord.MyAnsiString   := @AAnsiString;
 TheRecord.MyBool         := @ABool;
 [...]
 @MyFunction := GetProcAddress...
 [...]
 MyFunction  (@TheRecord); 
 MessageBoxW (0, PWideChar(AWideString), '', 0);
end; 
```

.

```
typedef struct _MyRec
{
    int        *MyInteger;    // Pointer to Integer
    WideString *MyWideString; // Pointer to WideString
    AnsiString *MyAnsiString; // Pointer to AnsiString  
    bool       *MyBool;       // Pointer to Bool
} MyRec, *PMyRec;

__declspec(dllexport) int __stdcall MyExportedFunc (PMyRec PRec)
{
    MessageBoxW(NULL, PRec->MyWideString->c_bstr(), L"Debug" , 0);
    *(PRec->MyWideString) = L"Let me change the value here.";
    return 0;
} 
```

`AnsiString`话虽如此，像这样跨 DLL 边界操作（和）值是非常危险`UnicodeString`的，特别是如果由于 RTL 差异、内存管理器差异、有效负载而在不同版本的 Delphi/C++Builder 中编写 EXE 和 DLL布局差异等 `WideString`是可以传递的，因为它的内存和布局是由操作系统控制的，而不是 RTL。

# iphone - 将图像放入 mapView 注释中

> ID：11732590
> 
> 赞同：0
> 
> 时间：2012-07-31T03:14:47.023
> 
> 标签：iphone, ios, mkmapview, mkannotation, mkannotationview

假设我在 iPhone 上保存了一个图像，并且我调用`MKAnnotationDelegate`了一个实现该`MKAnnotation`协议的类。

我可以使用该类在地图视图上显示注释，但无法弄清楚如何设置标注附件并放入图像。

所以我已经实现了`MKMapiewDelegate`协议，并给了类一个`UIImage`属性，并定义了

```
-(MKAnnotationView *) mapView:(MKMapView *)mapView 
            viewForAnnotation:(id<MKAnnotation>)annotation; 
```

我已经输入了这两行：

```
annotationView.canShowCallout = YES;

[(UIImageView *)annotationView.rightCalloutAccessoryView setImage: _image]; 
```

但仍然无法弄清楚该怎么做才能将图像放在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:24:08.333

```
UIImageView *imageView = // init the image view ...
[imageView setImage:_image];
[annotationView setRightCalloutAccessoryView:imageView]; 
```

这些通常用于显示 UIButton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:52:59.567

这可能会对您有所帮助，在以下方法实现中：

```
-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id)annotation;
{
// Initialize the MKPinAnnotationView...
UIImage *image = [UIImage imageNamed:@"imagename"];
UIImageView *imgView =[[UIImageView alloc] initWitthImage:image];
[annotationView setRighCalloutAccessoryView:imgView];
//or
[annotationView setLeftCalloutAccessoryView:imgView];

} 
```

Apple Docs 中关于[MKPinAnnotationView 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html)的内容：

> rightCalloutAccessoryView 显示在标准标注气泡右侧的视图。
> 
> ```
> @property (retain, nonatomic) UIView *rightCalloutAccessoryView 
> ```
> 
> **讨论**
> 
> 此属性默认设置为 nil。右侧标注视图通常用于链接到有关注释的更详细信息。视图的高度应为 32 像素或更小。为此属性指定的常见视图是 UIButton 对象，其类型设置为 UIButtonTypeDetailDisclosure。
> 
> 如果您指定的视图也是 UIControl 类的后代，您可以使用地图视图的委托在您的控件被点击时接收通知。如果它不是从 UIControl 派生的，则您的视图负责处理其范围内的任何触摸事件。

另请参阅`leftCalloutAccessoryView`的财产`MKPinAnnotationView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:47:41.993

您仅将图像设置为 RightCalloutAccessoryView 并将 LeftCalloutAccessoryView 设置为 mapview 注释。如果要将视图设置为注释而不是创建自己的自定义注释。

试试这个将 tableview 添加到注释视图[链接](https://github.com/grgcombs/MultiRowCalloutAnnotationView)的示例。

# jquery - 如何获取这些单选按钮的值？

> ID：11732592
> 
> 赞同：1
> 
> 时间：2012-07-31T03:14:57.683
> 
> 标签：jquery

我在此处获取单选按钮的值时遇到了一些麻烦：http: [//testing.feministbitch.com/index.php/quiz_creator](http://testing.feministbitch.com/index.php/quiz_creator)。我在最底部有完整的代码。

当您单击添加问题时，我这样做是为了让人们可以选择以下单选按钮：真/假或多项选择。

我正在尝试这样做：根据他们是选择真/假还是多项选择，问题下方会出现更多单选按钮或输入+下拉菜单。但我失败了。请帮我 ：）。

这里的问题是我不知道如何设置 var x 等于获取 true_false 值或 multiple_choice 值。

我试过了，但这些都没用。

```
 //var x = $("#question_type"+count).value;
 //var x=document.forms["quizquiz"]["question_type" + count].value; 
```

这是我的代码中根据他们选择的单选按钮附加真/假内容或多个内容的部分：

```
 if (x=="true_false"){
 $('#container').append(
 'The above statement is '+ '<Input id="true_or_false_' + count + '" type = "Radio" Name ="true_or_false[]" value= "true">' + 'True' + '&nbsp;&nbsp;&nbsp;&nbsp;'
 + '<Input id="true_or_false_' + count + '" type = "Radio" Name ="true_or_false[]" value= "false">'+ 'False<br /><br/>'
 );
 }else{
 $('#container').append(
        'A: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' +
        'B: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' +
        'C: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' +
        'D: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' + '<br />'
       +'Correct Choice: '
        +'<select name="correct_choice[]">'
        +'<option value="A">A</option>'
        +'<option value="B">B</option>'
        +'<option value="C">C</option>'
        +'<option value="D">D</option>'
        +'</select>'
        +'<br /><br />'
        );
 } 
```

这是完整的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

 <title>Quiz Creator</title>
 <script type="text/javascript" src="http://testing.feministbitch.com/js/jquery.js"></script>
<script type="text/javascript">
var count = 0;
$(function(){
 $('p#add_field').click(function(){
 count += 1;
 $('#container').append(
 '<strong>Question ' + count + '</strong><br />' 
 + 'Question text: ' + '<input id="question_field_' + count + '" name="question_fields[]' + '" type="text" maxlength="300" size="150"/><br />'
 + '<Input id="question_type_' + count + '" type = "Radio" Name ="questiontype_fields'+count+'[]" value= "true_false">' + 'True/False' + '&nbsp;&nbsp;&nbsp;&nbsp;'
 + '<Input id="question_type_' + count + '" type = "Radio" Name ="questiontype_fields'+count+'[]" value= "multiple_choice">'+ 'Multiple Choice<br /><br/>'

 );

 //var x = $("#question_type"+count).value;
 var x=document.forms["quizquiz"]["question_type" + count].value;

 var a=3;
 alert(a);
 if (x=="true_false"){
 $('#container').append(
 'The above statement is '+ '<Input id="true_or_false_' + count + '" type = "Radio" Name ="true_or_false[]" value= "true">' + 'True' + '&nbsp;&nbsp;&nbsp;&nbsp;'
 + '<Input id="true_or_false_' + count + '" type = "Radio" Name ="true_or_false[]" value= "false">'+ 'False<br /><br/>'
 );
 }else{
 $('#container').append(
        'A: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' +
        'B: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' +
        'C: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' +
        'D: ' + '<input id="multi_choices_' + count + '" name="multiple_choices[]' + '" type="text" maxlength="300" size="150"/><br />' + '<br />'
       +'Correct Choice: '
        +'<select name="correct_choice[]">'
        +'<option value="A">A</option>'
        +'<option value="B">B</option>'
        +'<option value="C">C</option>'
        +'<option value="D">D</option>'
        +'</select>'
        +'<br /><br />'

        );
 }

 });
});
</script> 

</head>

<body>

<div id="upload">
 <h1>Quiz Creator</h1>

    <?php

    $attributes = array('name' => 'quizquiz', 'id' => 'quizquiz');

    echo form_open_multipart('quiz_creator');
    //controller named quiz_creator

    ?>
    Quiz Name: <input id="quiz_name" name="quiz_name" type="text" maxlength="100" size="100"/><br /><br />
    <?php

//-------------------------------------------------study guide uploader
 for ($i = 1; $i <= 5; $i++) {   
 echo 'Study Guide '.$i.': '. form_upload('studyguide'.$i.'') . "<br />";
 }
//-------------------------------------------------study guide uploader

echo "<br />";

?>    

        <div id="container">
            <p id="add_field"><a href="#"><span>&raquo; Add a Question</span></a></p>
        </div>

    <br /><br />

<?php
echo "<br /><br />";
    echo form_submit('upload', 'Upload');
    echo form_close();
    ?>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:28:41.313

HTML 规范。声明元素的`id`属性必须是唯一的。单独使用该`name`属性就足以将许多不同的选项组合在一起。另外，我不确定您为什么采用该特定约定，但`id`属性不需要以`_`字符结尾，`name`属性的值也不需要以字符结尾`[]`（我不明白您为什么希望它，因为它降低了可读性）。

要访问这些元素的值，请使用[jQuery 的`.val()`方法](http://api.jquery.com/val/)。

对于单选按钮：

```
var value = $('input:radio[name="true_or_false[]"]:checked','#container').val(); 
```

对于选择元素：

```
var value = $('select[name="correct_choice[]"]','#container').val(); 
```

# javascript - 如何使 jslint 不那么冗长

> ID：11732594
> 
> 赞同：0
> 
> 时间：2012-07-31T03:15:03.517
> 
> 标签：javascript, warnings, jslint, lint

我选择的“IDE”（它不是真正的 IDE）是 Sublime Text 2。

这个编辑器有很好的插件。我非常喜欢使用的一个是[SublimeClang](https://github.com/quarnster/SublimeClang/)：它会在您编写 C/C++ 代码时对其进行解析，并向您显示错误和警告的位置，就像“真正的”IDE 一样。这太棒了，因为它缩短了代码/编译周期，所以我只需要在我编写完代码后返回我的终端，因为我可以在处理代码时看到我的错误。

我曾希望 jsLint（也有用于将其与编辑器集成的[插件](https://github.com/fbzhong/sublime-jslint)）可以帮助我完成相同的任务，以便在我在浏览器中测试我的页面之前发现语法错误。通常，最好的方法是将整个文件上传到服务器并将其加载到浏览器中：虽然这个工作流程可以大大简化，但是在上传之前能够在本地检查代码是很有吸引力的。

我对 jslint 的问题是它抛出了太多关于深奥风格选择的意见，其中许多我不关心。你想让我把我所有的声明放在一行吗？不，谢谢，我在变量旁边有所有这些评论，我保留这些评论！

是否有我可以提供给 jslint 的标志，以便它只会警告我语法错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:24:55.067

许多人对 JSLint 有同样的感受。一个结果是替代的 JSHint。许多人发现它的默认设置更符合他们的喜好。它也有 Sublime 插件。其中两个列在[http://www.jshint.com/platforms/](http://www.jshint.com/platforms/)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:24:19.980

JSLint 确实有[几个选项](http://www.jslint.com/lint.html#options)可以改变其行为。

看起来您可以在`sublime-jslint.sublime-settings`链接到的插件随附的文件中定义这些（在“jslint_options”部分）。

# perl - 遇到 Perl 依赖问题

> ID：11732595
> 
> 赞同：2
> 
> 时间：2012-07-31T03:15:17.967
> 
> 标签：perl, makefile

我接手了一个用 Perl 编写的项目，它有一些依赖项，例如`Template::Toolkit`, `Image::ExifTool`,`GD`等等。目前，这些依赖`--prefix`项使用`make`. 在主 Perl 脚本中，我有类似以下的内容来导入必要的模块：

```
use File::Spec::Functions qw(catdir);
use lib "lib";
use lib catdir(qw(deps lib perl5 site_perl)); 
```

`catdir`用于偏离某些系统要求（例如假设“/”是文件夹分隔符；如果有人有其他选择，我愿意接受建议！）。“lib”文件夹包含我的模块，而“deps/lib/perl5/site_perl”文件夹是我的依赖项安装在原始机器上的位置。

但是，在另一台机器上构建依赖项后，所需的库似乎已移动到不同的文件夹。我现在需要使用这些语句让我的脚本正确运行：

```
use File::Spec::Functions qw(catdir);
use lib "lib";
use lib catdir(qw(deps lib perl 5.14.2));
use lib catdir(qw(deps share perl 5.14.2)); 
```

我想知道是否无论如何指定前缀目录（“deps”）并让`use lib`编译指示递归地在该目录中搜索我的依赖项。此外，此脚本的用户无法访问 Internet，因此将我的项目编译为 CPAN 模块会适得其反。

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T03:50:26.920

安装模块时，对 Makefile.PL使用[INSTALL_BASE，](https://metacpan.org/module/ExtUtils%3a%3aMakeMaker#INSTALL_BASE)对[Build.PL 使用 --install_base 。](https://metacpan.org/module/Module%3a%3aBuild#INSTALL-PATHS)它们提供[稳定的安装位置](https://metacpan.org/module/Module%3a%3aBuild%3a%3aCookbook#prefix-vs-install_base)。PREFIX 和 --prefix 试图模拟 perl 如何布局其系统库，并且对于制作包更有用。

此外，您还需要`rel2abs`在将路径提供给 lib 之前运行该路径，以便为您提供绝对路径。这将保护您，以防您的代码`chdir`s 然后尝试`require`一个模块。或者您可以使用[lib::abs](https://metacpan.org/module/lib%3a%3aabs)。

ikegami 是正确的，没有必要使传递给 lib 的文件路径可移植。只需以 Unix 风格传递它们。Perl 会弄清楚的。

# delphi - delphi 2006 - 是否可以找出资源名称是否存在？

> ID：11732596
> 
> 赞同：5
> 
> 时间：2012-07-31T03:15:45.223
> 
> 标签：delphi, embedded-resource, delphi-2006

找出资源名称是否存在的最佳方法 - 除了查看是否存在

```
LoadFromResourceName (HInstance, 'FOOBAR') 
```

导致异常？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T04:44:43.997

您可以使用该[`FindResource`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648042%28v=vs.85%29.aspx)功能（请记住传递正确的资源类型）

```
 if FindResource(hInstance, 'FOOBAR', RT_RCDATA) <> 0 then
  // do something 
```

# git - 如何防止 gerrit 复制 ref/changes/* 镜像 git 存储库

> ID：11732600
> 
> 赞同：0
> 
> 时间：2012-07-31T03:16:25.107
> 
> 标签：git, gerrit

我的项目正在使用 Gerrit 2.4.2 的内置复制将内容镜像到另一个 git 存储库。

我的配置如下所示，

```
[remote "another-git-server"]
  url = mirorserver.com:/git/projects/${name}
  push = +refs/heads/*:refs/heads/*
  push = +refs/tags/*:refs/tags/* 
```

然而，Gerrit 将所有**refs/changes/***复制到镜像 git repo。我不想将这些内部审查更改复制到另一个 git 服务器。

有什么办法可以防止 gerrit 复制这些引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:47:56.253

根据[http://gerrit-documentation.googlecode.com/svn/Documentation/2.4.2/config-replication.html](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4.2/config-replication.html)上的文档，推送 refs/heads/* 和 refs/tags/* 不会从 refs/ 推送任何内容变化/*。如果您确定这是您所看到的，请在[http://code.google.com/p/gerrit/issues/list](http://code.google.com/p/gerrit/issues/list)提交错误。

您可以尝试另一种解决方法 - 在配置中指定一个 authGroup 并创建一个对 refs/changes/* 没有读取权限的组

# javascript - Node.js - 如何将属性附加到多个文件中的单个对象？

> ID：11732606
> 
> 赞同：0
> 
> 时间：2012-07-31T03:17:24.410
> 
> 标签：javascript, node.js

我想将很多属性附加到单个对象。我不想在一个文件中执行此操作。下面的示例是将其分解为多个文件的正确且好方法吗？

例如，在 中`main.js`，

```
var obj = {};

obj = require('./utils');
obj = require('./part1');
// other requires omitted...

obj.init = function() {
  obj.util1();
  obj.helper1();
};

module.exports = obj; 
```

在`utils.js`,

```
var obj = require('./main');

obj.util = function() {
  console.log('util1');
};

// other methods omitted...

module.exports = obj; 
```

在`part1.js`,

```
var obj = require('./main');

obj.helper1= function() {
  obj.util1();
  console.log('helper1');
};

// other methods omitted...

module.exports = obj; 
```

并且有`part2.js`,`part3.js`等。

您会看到文件中存在循环依赖关系。有没有比上面的例子更好的方法？

# java - 在核心 Java 中的其他相关类中共享不可变类的内部结构的示例

> ID：11732615
> 
> 赞同：1
> 
> 时间：2012-07-31T03:19:36.133
> 
> 标签：java, effective-java, immutability

不可变类的众多优点之一是它们的内部实际上可以在其他相关类中以某种方式共享。

核心 java 库中可以引用什么作为这种技术的示例？为什么这项技术有效？

**编辑**：这实际上是在甲骨文采访中问到我的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T03:30:11.177

> 不可变类的众多优点之一是它们的内部实际上可以在其他相关类中以某种方式重用。

我不买那个论点/前提：

*   Java不允许您重用类的内部......除非您将复制粘贴编程视为合法的重用策略。在 Java 中，您可以重用整个类，或者一个都不重用。

*   您可以像不可变类一样重用可变类。

*   如果您*需要*实体是可变的，那么原始类 cab 中的不变性实际上是重用的*障碍。*

* * *

> 正如这个答案中提到的那样，这个前提实际上是用有效的 Java 写出来的，得到了​​ 121 票。

大不了！仅仅因为您引用了一本知名书籍（没有任何上下文）并不能使您的前提可信。许多知名书籍都说一些值得商榷甚至完全错误的事情。

仅仅因为 121 人投票支持引用这一行（以及其他行）的答案并不能增加可信度。他们投票支持整个答案，不一定是那句话。此外，投票并不表示客观正确性。它们表明主观一致。

如果这是一个辩论/讨论论坛，您应该用您自己的适当论点来反驳我的论点。但事实并非如此，而且这个问题（IMO 正确地）已经关闭。

# ios - 如何将 UISlider 添加到 AVPlayer

> ID：11732620
> 
> 赞同：3
> 
> 时间：2012-07-31T03:20:07.337
> 
> 标签：ios, objective-c, cocoa-touch, avplayer

我想将 uislider 添加到我的播放器中，以便我可以在 AVPlayer 中播放音频时实现擦洗。一旦第一首歌曲播放完，uislider 将回到原来的位置，下一首歌曲将开始播放。如果有人帮助我，我将不胜感激。这是我的代码。

```
-(IBAction)goToiPodLibrary:(UIButton *)sender
{

    // Create picker view
    MPMediaPickerController* picker = [[MPMediaPickerController alloc] init];
    picker.delegate = self;

    if (userMediaItemCollection) {

        MusicTableViewController *controller = [[MusicTableViewController alloc] initWithNibName: @"MusicTableView" bundle: nil];
        controller.delegate = self;

        controller.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

        [self presentModalViewController: controller animated: YES];

        // else, if no music is chosen yet, display the media item picker
    } else {

        MPMediaPickerController *picker =
        [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeMusic];

        picker.delegate                     = self;
        picker.allowsPickingMultipleItems   = YES;
        picker.prompt                       = NSLocalizedString (@"Add songs to play", "Prompt in media item picker");

        // The media item picker uses the default UI style, so it needs a default-style
        //      status bar to match it visually
        [[UIApplication sharedApplication] setStatusBarStyle: UIStatusBarStyleDefault animated: YES];

        [self presentModalViewController: picker animated: YES];
    }

}

-(IBAction)playButtonPressed:(UIButton *)sender
{
    [myPlayer play];
}

-(IBAction)pauseButtonPressed:(UIButton *)sender
{
    [myPlayer pause];
}

-(void) mediaPickerDidCancel:(MPMediaPickerController *)mediaPicker {

    // Dismiss selection view
    [self dismissViewControllerAnimated:YES completion:nil];

}

-(void) mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {

    // Dismiss selection view
    [self dismissViewControllerAnimated:YES completion:nil];

    // Get AVAsset
    NSURL* assetUrl = [mediaItemCollection.representativeItem valueForProperty:MPMediaItemPropertyAssetURL];
    AVURLAsset* asset = [AVURLAsset URLAssetWithURL:assetUrl options:nil];

    // Create player item
    AVPlayerItem* playerItem = [AVPlayerItem playerItemWithAsset:asset];

    // Play it
    myPlayer = [AVPlayer playerWithPlayerItem:playerItem];

    [playlistSongsArray addObjectsFromArray:mediaItemCollection.items];

    NSLog(@" Playlist songs  %@",playlistSongsArray);

    [self.myPlaylistTable reloadData];

    [myPlayer play];

} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T08:38:03.863

```
- (void)sliderValueChanged:(id)sender {
    CMTime newTime = CMTimeMakeWithSeconds(timeSlider.value * durationSeconds, player.currentTime.timescale);
    [self.player seekToTime:newTime];
} 
```

使用`UISlider`（这里称为timeSlider）和上面的方法

这是播放时更新滑块的方法：

```
self.playbackObserver = [player addPeriodicTimeObserverForInterval:interval queue:NULL usingBlock:^(CMTime time) {
    CMTime endTime = CMTimeConvertScale (player.currentItem.asset.duration, player.currentTime.timescale, kCMTimeRoundingMethod_RoundHalfAwayFromZero);
    if (CMTimeCompare(endTime, kCMTimeZero) != 0) {
        double normalizedTime = (double) player.currentTime.value / (double) endTime.value;
        self.timeSlider.value = normalizedTime;
    }
    Float64 currentSeconds = CMTimeGetSeconds(player.currentTime);
    int mins = currentSeconds/60.0;
    int secs = fmodf(currentSeconds, 60.0);
    NSString *minsString = mins < 10 ? [NSString stringWithFormat:@"0%d", mins] :      [NSString stringWithFormat:@"%d", mins];
    NSString *secsString = secs < 10 ? [NSString stringWithFormat:@"0%d", secs] : [NSString stringWithFormat:@"%d", secs];
    currentTimeLabel.text = [NSString stringWithFormat:@"%@:%@", minsString, secsString];
}]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-16T06:51:49.720

我制作了自己的播放器来播放视频。这是`UISlider`我制作的代码。初始化 UISlider

```
self.progressBar = [[[UISlider alloc] init] autorelease];
self.progressBar.frame = CGRectMake(44*frameWidth/240, 6*frameHeight/160, 187*frameWidth/240,33*frameHeight/160);
[self.progressBar addTarget:self action:@selector(progressBarChanged:) forControlEvents:UIControlEventValueChanged];
[self.progressBar addTarget:self action:@selector(proressBarChangeEnded:) forControlEvents:UIControlEventTouchUpInside];
[self.progressBar setThumbImage:[UIImage imageNamed:@"Slider_button"] forState:UIControlStateNormal];
[self.playerManageViewBottom addSubview:self.progressBar]; 
```

现在添加一个观察者和函数。

```
CMTime interval = CMTimeMake(33, 1000);
playbackObserver = [self.moviePlayer addPeriodicTimeObserverForInterval:interval queue:dispatch_get_current_queue() usingBlock: ^(CMTime time) {
    CMTime endTime = CMTimeConvertScale (self.moviePlayer.currentItem.asset.duration, self.moviePlayer.currentTime.timescale, kCMTimeRoundingMethod_RoundHalfAwayFromZero);
    if (CMTimeCompare(endTime, kCMTimeZero) != 0) {
        double normalizedTime = (double) self.moviePlayer.currentTime.value / (double) endTime.value;
        self.progressBar.value = normalizedTime;
    }
    self.playBackTime.text = [self getStringFromCMTime:self.moviePlayer.currentTime];
}]; 
```

功能 ：

```
 -(void)progressBarChanged:(UISlider*)sender
{
    if (self.isPlaying) {
        [self.moviePlayer pause];
    }
    CMTime seekTime = CMTimeMakeWithSeconds(sender.value * (double)self.moviePlayer.currentItem.asset.duration.value/(double)self.moviePlayer.currentItem.asset.duration.timescale, self.moviePlayer.currentTime.timescale);
    [self.moviePlayer seekToTime:seekTime];
}

-(void)proressBarChangeEnded:(UISlider*)sender
{
    if (self.isPlaying) {
        [self.moviePlayer play];
    }
} 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-05T15:06:56.343

我尝试了顶级解决方案，对于更长的视频，这还可以，但是当我有大约 4 秒的视频时，UISlider 非常不稳定。如果您想要精确，请尝试以下解决方案：

```
- (IBAction)sliderSlid:(id)sender {
    if ([sender isKindOfClass:[UISlider class]]) {
        UISlider *slider = sender;

        CMTime playerDuration = player.currentItem.duration;
        if (CMTIME_IS_INVALID(playerDuration)) {
            return;
        }

        double duration = CMTimeGetSeconds(playerDuration);
        if (isfinite(duration)) {
            float minValue = [slider minimumValue];
            float maxValue = [slider maximumValue];
            float value = [slider value];

            double time = duration * (value - minValue) / (maxValue - minValue);

            [player seekToTime:CMTimeMakeWithSeconds(time, NSEC_PER_SEC) toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];
        }
        [player pause];
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T05:05:30.830

这个我的代码是在线播放带有音量滑块的音频歌曲。您可以轻松增加和减少音量。使用 AvAudioPlayer...

*

```
AudioPlayerController.h 
@interface AudioPlayerController : UIViewController{

    AVAudioPlayer *audioPlayer;
    NSMutableData *data;
    NSURLConnection *connection;
    UIView *myView;
    IBOutlet UISlider *volumeSlider1;
    IBOutlet UIView *volumeSlider;

}
@property (retain, nonatomic) IBOutlet UIActivityIndicatorView *activity;
@property (retain ,nonatomic)  AVAudioPlayer *audioPlayer;
- (IBAction)pause:(id)sender;
- (IBAction)play:(id)sender;
- (IBAction)stop:(id)sender;
@end

AudioPlayerController.m
- (void)viewDidLoad
{
//JD...
    [super viewDidLoad];

    volumeSlider1.minimumValue = 0;
    volumeSlider1.maximumValue = 10;
    volumeSlider1.value = [[[NSUserDefaults standardUserDefaults] valueForKey:@"volume"] intValue]; 

    self.navigationController.navigationBarHidden = NO;
    [self getAudioFromNet];
  }
- (void)getAudioFromNet {

    NSURL *url = [NSURL URLWithString:@"http://sound17.mp3pk.com/indian/cocktail/[Songs.PK]%20Cocktail%20-%2001%20-%20Tum%20Hi%20Ho%20Bandhu.mp3"]; 

    NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

}
- (void)connection:(NSURLConnection *)theConnection didReceiveData:(NSData *)incrementalData {
    if (data==nil) {
        data = [[NSMutableData alloc] initWithCapacity:2048];
    }
    [data appendData:incrementalData];
}
- (void)connectionDidFinishLoading:(NSURLConnection*)theConnection {

    audioPlayer = [[AVAudioPlayer alloc] initWithData:data error: nil];
    [audioPlayer setVolume:3];
    [audioPlayer play];

}
- (IBAction)play:(id)sender{

    [audioPlayer play];

}
- (IBAction)pause:(id)sender{

    [audioPlayer pause];

}
- (IBAction)stop:(id)sender{

    [audioPlayer stop];

}
//This Method is Used for Volume...
- (IBAction)sliderMoved:(UISlider *)aSlider
{
    audioPlayer.volume = volumeSlider1.value;

    int valumeInt = volumeSlider1.value;
    [[NSUserDefaults standardUserDefaults] setValue:[NSString stringWithFormat:@"%d",valumeInt] forKey:@"volume"];
    audioPlayer.volume = [[[NSUserDefaults standardUserDefaults] valueForKey:@"volume"] intValue]; 

}
@end 
```

*

# html - 跨一组 html 文件自定义文本字段

> ID：11732623
> 
> 赞同：2
> 
> 时间：2012-07-31T03:20:53.093
> 
> 标签：html, chm

我正在`.chm`使用一组 HTML 文件构建一个文件。每个 html 在其文本中都有一个公司名称。我的问题是这个公司名称需要为我们的每个客户更改。除了更改所有 HTML 文件之外，有没有办法将其保留为共享变量（可能在`.css`文件中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:25:00.180

`<span>`您可以使用css 的`content` [属性](http://www.quirksmode.org/css/content.html)替换 html 元素内的内容。

**html**

```
<span class="company-name">
   YourCompanyName
</span> 
```

**css**

```
.company-name{font-size: 0}

.company-name:after{
      content: "New Company Name";
      font-size: 14px;
 }​ 
```

jsfiddle：http: [//jsfiddle.net/FwKW7/](http://jsfiddle.net/FwKW7/)

其中有一些怪癖。[IE <=8 对此属性的支持](http://www.quirksmode.org/css/contents.html)有限，您可以在查看[这篇](https://stackoverflow.com/questions/11300887/which-css-versions-are-supported-in-chm-files)关于堆栈溢出的帖子后查看更多相关信息。

或者，您也可以查看此答案以使用 css [link](https://stackoverflow.com/questions/10212879/how-to-use-css-to-replace-or-change-text)替换文本。但它需要一个额外的`div`，这是不必要的。

***编辑**
*更新的CSS

# jquery - JQuery 中的 Ajax 效果

> ID：11732625
> 
> 赞同：0
> 
> 时间：2012-07-31T03:20:59.283
> 
> 标签：jquery

我试图找到一种在 ajax 调用正在进行时显示 GIF 图像的方法，我希望在 ajax 响应返回时图像隐藏。谁能帮我做到这一点？我对 JQuery 没有经验。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:26:05.247

我在自己的 Web 应用程序中使用以下方法。

给你的图像一个标识符，（例如：）`id="loading"`。`<script>`然后将以下内容放入文档末尾的一对标签中：

```
$(document).ready(function(){
    $('#loading')
        .ajaxStart(function(){$(this).show();})
        .ajaxStop(function(){$(this).hide();})
        .hide()
    ;
}); 
```

这将为每个 Ajax 调用添加一个事件处理程序，并在初始根页面加载结束时隐藏图像（假设它在页面加载时显示）。

我建议通读[jQuery 文档](http://docs.jquery.com/Main_Page)- 从前几页中获得的知识将使您深入了解 jQuery 的工作原理，并使组合动态界面变得更加容易，每个人都必须从某个地方开始。

# for-loop - awk中的for循环比较文件中的后续行

> ID：11732627
> 
> 赞同：0
> 
> 时间：2012-07-31T03:21:48.960
> 
> 标签：for-loop, awk

我之前问过如何使用 awk 更正计数数据中的错误，其中我的数据的第一列是用于标识正在测量的子竞技场的数字，第二列是来自该子竞技场的计数数据。计数是自动的，程序会出错（下面用# 表示），它偶尔会“计数错误”，因为正在计数的动物已经移出特定子竞技场的范围。

```
1       0
1       2
1       6
1       7
1       7
1       8
1       7 #
1       7 #
1       9
2       0
2       0
2       1
2       4
2       3 #
2       3 #
2       4
2       4
2       6 
```

我想像这样更正上述内容：

```
1       0
1       2
1       6
1       7
1       7
1       8
1       8
1       8
1       9
2       0
2       0
2       1
2       4
2       4
2       4
2       4
2       4
2       6 
```

好心建议的代码不包含用于在每个竞技场的数据中更正的 for 循环（每个文件总共有 20 个），我一直在尝试解决这个问题，但是遇到了非常困难的问题，语法错误有时，有时非法语句错误。我会很感激任何关于为什么以下内容不起作用的提示（对不起，我是个新手，这是我尝试过的众多迭代之一，但没有一个是漂亮的）：

```
awk 'i=1; i<=20; i++; $1=i {NR > 1 && $2 < p {$2 = p} {p = $2} 1}' infile > outfile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:30:42.773

与其计算行数，不如让另一个变量跟踪行号，`p`如果行号增加，它会重置：

```
awk '$1 > l { l = $1; p = 0 } $2 < p { $2 = p } { p = $2 } 1' input-file 
```

First the first position (`$1`) is compared to the value in the `l` variable (that defaults to 0). If it's greater, `l` is set to `$1`, and `p` is reset to 0\. Then the second position (`$2`) is compared to `p`, and if it's less set to `p`. Finally, `p` is set to the value of the (possibly changed) `$2`. The final `1` just means "print"; otherwise the command would do all the processing but not print any of it.

# php - 提交在同一页面上的表单而不刷新页面

> ID：11732628
> 
> 赞同：1
> 
> 时间：2012-07-31T03:22:04.623
> 
> 标签：php, javascript, html, jquery

所以这里是一场混乱的战斗。我想提交一个与我的 php 验证在同一页面上的表单。

html

```
 <form id="form">
  //fields
  <input type="submit" id="submit">
  </form>

<?php
/ /check if form is good
?> 
```

jQuery

```
$("#actvpost").submit(function(){
    //code
  return false;
}); 
```

当我点击提交页面仍然刷新我怎么能让它只发送数据而不使用外部页面

我可以在没有 jquery 的情况下做到这一点，但它会刷新页面，我想将 jquery 附加到它不会刷新页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T03:27:21.203

当您在 jQuery 选择器中引用时，表单的 id`actvpost`不应该是。`form``actvpost`

您的提交功能不应该`return false`，而是应该使用`event.preventDefault`：

```
$("#actvpost").submit(function( event ){
    event.preventDefault();
    // your code
}); 
```

**`event`对象_**

`event`在触发时，所有事件都被传递一个对象作为它们的第一个参数。此对象包含有关事件的许多有用属性，例如`event.target`and `event.type`（返回 click、keyup 等...）。jQuery 还使用有用的方法扩展了这个对象，例如`preventDefault()`

尽管没有必要，但我确实建议将`event.preventDefault()`早期（如果不是首先）放在您的处理程序中。同样，这不是必须的，但如果您计划在未来编写更复杂的代码，这是一个很好的做法。组织是关键，一切都应该遵循某种共同的惯例。当您使用*任何*约定进行编码时，解决问题要容易得多，更不用说通用约定了。

本质上，如果没有新的 HTTP 请求，您将无法运行 PHP，因此，您可能希望在提交*之前*仅使用 javascript 验证，将服务器端验证作为最后一道防线。要将表单提交到您的 PHP 脚本，您需要：

*   使用 AJAX（jQuery 让这一切变得简单）
*   提交到 iframe，同时监听其“加载”事件以获取 Javascript 中的响应

两者都发出新的 HTTP 请求并在 javascript 中提供响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:26:30.127

也许：

```
$("#actvpost").submit(function (event) {
  event.preventDefault();
  // here you may by your self send request and get response
}); 
```

也许你会使用 jQuery Form Plugin 之类的东西并使用`ajaxForm`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T03:54:11.670

代替：

```
<form id="form"> 
```

和：

```
<form id="actvpost"> 
```

# java - 在java中停止循环

> ID：11732630
> 
> 赞同：-4
> 
> 时间：2012-07-31T03:22:51.587
> 
> 标签：java

> **可能重复：**
> [取用户输入数的平均值](https://stackoverflow.com/questions/11732171/taking-average-of-user-input-number)

```
for (int n1 = in.nextInt(); n1 >= 0; n1 = in.nextInt())
  {
          int total = 0;
          int count = 0;

          while (n1 >= 0)
          {
                  n1 = in.nextInt();
                  total = total + n1;
                  count = count + 1;

          }
          out.println(total);
          out.println(count);
  } 
```

我想把我输入的所有数字加起来，这个代码正确吗？它只添加了我最后的 2 个输入。我希望循环继续进行，直到用户输入负数，然后循环停止，然后输出我的总数和计数。

```
Scanner in = new Scanner(System.in);
Printstream out = System.out; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:02:45.213

```
int total = 0;
int count = 0;

while (true) {
    int n = in.nextInt();
    if (n < 0) 
        break;
    total += n;
    count ++;
}
out.println(total);
out.println(count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:03:25.850

您的代码应如下所示。

```
int total = 0;
int count = 0;
int n1;

try
{
    while((n1=Integer.parseInt(in.nextLine()))>=0)
    {
        total = total + n1;
        count = count + 1;
    }
}
catch(Exception e)
{
    System.out.println(e.toString());
}

out.println("Total     = "+total);
out.println("Count     = "+count);

Format df=new DecimalFormat("#.##");
out.println("Average   = "+df.format((double)total/count)); 
```

# php - 为什么 json_encode/decode 会以这种方式配置我的数组？PHP

> ID：11732636
> 
> 赞同：2
> 
> 时间：2012-07-31T03:24:14.440
> 
> 标签：php, post, json

我正在尝试发送一个 JSON 文件来做一些测试。我有一个创建多维数组的简单测试文件。这是测试文件：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

$user['Mongo'] = null; 
$user['Facebook'] = 12345;
$user['Twitter'] = null;
$user['Foursquare'] = null;
$user['Google'] = null;
$user['Name'] = "Bill Gates";
$user['Sex'] = 'M';
$user['Age'] = 26;
$user['Birthday'] = "1985-08-13";
$user['Friends'][0]['Mongo'] = null;
$user['Friends'][0]['Facebook'] = 123456;
$user['Friends'][0]['Twitter'] = null;
$user['Friends'][0]['Foursquare'] = null;
$user['Friends'][0]['Google'] = null;
$user['Friends'][0]['Name'] = "John Smith";
$user['Friends'][0]['Relationship'] = "Open";
$user['Friends'][1]['Mongo'] = null;
$user['Friends'][1]['Facebook'] = 1234567;
$user['Friends'][1]['Twitter'] = null;
$user['Friends'][1]['Foursquare'] = null;
$user['Friends'][1]['Google'] = null;
$user['Friends'][1]['Name'] = "Martina McBride";
$user['Friends'][1]['Relationship'] = "Open";

$user_json = json_encode($user);

$call = curl_init('http://MY_IP_HERE/user_login.php');

curl_setopt($call, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($call, CURLOPT_POSTFIELDS, $user_json);
curl_setopt($call, CURLOPT_RETURNTRANSFER, true);
curl_setopt($call, CURLOPT_HTTPHEADER, array('Content-Type: application/json', 'Content-Length: '.strlen($user_json)));

$result = curl_exec($call);
curl_close($call);

echo $result;
?> 
```

我正在尝试像这样检索文件：

```
<?php
include_once('interaction_class.php');

error_reporting(E_ALL);
ini_set('display_errors', '1');

$fp = fopen('php://input', 'r');
$rawData = stream_get_contents($fp);

$user = json_decode($rawData);

if ($user['Mongo'] == null)
{
    $user_id = $interaction->new_guest($user);
}
//...Other stuff... 
```

我在 if 语句行中收到有关 stdCLass 类对象的错误。所以，我做了一个 var_dump() ，结果如下：

```
object(stdClass)#1 (10) 
{ 
    ["Mongo"] => NULL 
    ["Facebook"] => int(12345) 
    ["Twitter"] => NULL 
    ["Foursquare"] => NULL 
    ["Google"] => NULL 
    ["Name"] => string(15) "Bill Gates" 
    ["Sex"] => string(1) "M" 
    ["Age"] => int(26) 
    ["Birthday"] => string(10) "1985-08-13" 
    ["Friends"] => array(2) 
    { 
        [0] => object(stdClass)#2 (7) 
        { 
            ["Mongo"] => NULL 
            ["Facebook"] => int(123456)
            ["Twitter"] => NULL 
            ["Foursquare"] => NULL 
            ["Google"] => NULL 
            ["Name"] => string(10) "John Smith" 
            ["Relationship"] => string(4) "Open" 
        } 
        [1] => object(stdClass)#3 (7) 
        { 
            ["Mongo"] => NULL 
            ["Facebook"] => int(1234567) 
            ["Twitter"] => NULL 
            ["Foursquare"] => NULL 
            ["Google"] => NULL 
            ["Name"] => string(15) "Martina McBride" 
            ["Relationship"] => string(4) "Open" 
        } 
    } 
} 
```

我的问题是，为什么在我执行 json_decode() 之后无法访问信息：

```
$thing['Key'] 
```

为什么将其解码为对象而不是数组？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T03:29:23.623

PHP 函数 json_decode() 默认返回对象：[http ://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

如果要使用数组，请将布尔值“true”添加为函数中的可选第二个参数，如下所示：

```
$user = json_decode($rawData, true); 
```

这会将数组返回到变量中`$user`

如果你想继续加载对象，而不是使用`$user['Mongo']`你可以使用`$user->Mongo`

希望这会有所帮助，祝你好运！

# c# - C# 中的事件和窗体

> ID：11732638
> 
> 赞同：0
> 
> 时间：2012-07-31T03:24:41.160
> 
> 标签：c#, windows

所以我刚刚通读了 MSDN 上的事件教程，在我的程序中应用它时遇到了一些问题。我想知道这里是否有人可以帮我一把。

所以我有两种形式，一个叫做父母，一个叫做`frmInventory`孩子`frmNewProduct`。孩子有一个名为 的按钮`btnAccept`。目前，有一个名为`btnAccept_Click`订阅此事件的订阅者。现有订阅者位于子窗体上。我想为此事件添加第二个订阅者，但此订阅者将在父表单上。这是我的父表单上的功能：

```
public void updateInventoryFromChild(object sender, EventArgs e)
{
    //Not sure how to get this working either, but that is another story
    _inventroy = (frmNewProduct)sender._inventory
} 
```

这是我尝试将函数订阅到我孩子的事件：

```
this.btnAccept.Click += new System.EventHandler((frmInventory)this.Parent.updateInventoryFromChild); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T03:44:51.380

正如我在您之前的一篇文章中所说，我认为 ShowDialog() 会更好，例如：

```
class ChildForm : Form {
    private Inventory _inventory;

    public Inventory MyInventory {
        get {
            return _inventory;
        }
    }

    private void btnAccept_Click(object sender, EventArgs e) {
        _inventory = <set_inventory_here>;
        DialogResult = System.Windows.Forms.DialogResult.OK;
    }
} 
```

..在你的父母形式..

```
public void updateInventoryFromChild(object sender, EventArgs e)
{
    ChildForm childForm = new ChildForm();
    if (childForm.ShowDialog() == System.Windows.Forms.DialogResult.OK) {
        _inventory = childForm.MyInventory;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:39:31.803

您应该在子表单的构造函数中有以下代码！

```
this.btnAccept.Click += new System.EventHandler(this.Parent.updateInventoryFromChild); 
```

# c# - 使用百分号作为查询字符串中的最后一个字符处理 googlebot 请求

> ID：11732644
> 
> 赞同：1
> 
> 时间：2012-07-31T03:25:46.103
> 
> 标签：c#, asp.net, iis-6

我一直在 iis 6 网站上出现间歇性应用程序池崩溃。我已确定导致此问题的请求来自 Googlebot，请求如下（取自 httperr 日志）

HTTP/1.1 获取 /Folder/PageName.html？**iframe=true&宽度=95%&高度=95%**

被请求的页面发生了变化，但查询字符串是一致的。

我曾尝试向 global.asax.cs 添加代码以去除这些无效的查询字符串，但似乎查询字符串在点击我的代码之前会导致“Connection_Abandoned_By_AppPool”。

显然我需要早点处理这个，但我真的不确定在哪里？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:36:44.090

继续我的研究，我发现我的网络服务器使用的 Parallels Plesk 8.6 软件包含一个名为 urlprotect.dll 的 ISAPI 过滤器，它基本上只允许网站上的某些 URL 受到密码保护。

默认情况下，此 ISAPI 过滤器（至少在此版本的 Plesk 中）应用于服务器上的所有网站，即使您没有定义任何受保护的 URL。

这是无法处理 URL 中未转义的百分号的原因。

我在此论坛帖子 (http://forum.parallels.com/showthread.php?t=83376) 中找到了此信息，这也表明 dll 的问题没有成功解决。

如果您不需要以这种方式保护任何 URL，那么我的经验是可以通过 IIS 安全地将其从站点中删除，而不会产生任何不良影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:33:57.687

这个答案应该告诉您如何处理字符，从而引导您完成您需要做的事情，它是为 IIS 7 编写的，但也适用于 IIS6，[https: //serverfault.com/questions/257680/properly-handle-iis -request-with-percent-sign-in-url/258759#258759](https://serverfault.com/questions/257680/properly-handle-iis-request-with-percent-sign-in-url/258759#258759)

此外，您可能还想在 serverfault 上提出该主题领域的问题，因为该受众可能能够更好地为您提供帮助。

# jqplot - jqPlot 样式 - 如何删除 Y 轴线？

> ID：11732651
> 
> 赞同：4
> 
> 时间：2012-07-31T03:26:38.013
> 
> 标签：jqplot

我在使用 jqPlot 样式时遇到了一些麻烦。目前我有这个：

![在此处输入图像描述](../Images/8b8d5f8f92ce5c2e185d568266b31d0a.png)

这花了相当多的时间才能把它变成这样，但现在我遇到了一个问题——左边的线！我不知道如何删除它，因为我实际上不知道它是什么！

这是我到目前为止的代码。

```
 plot = $.jqplot('chart', [values], {
    animate: !$.jqplot.use_excanvas,
    seriesDefaults: {
      renderer: $.jqplot.BarRenderer,
      rendererOptions: {
        varyBarColor: true,
      },
      pointLabels: { 
        show: true,
      },
      shadow: false,
    },
    axes: {
      xaxis: {
        renderer: $.jqplot.CategoryAxisRenderer,
        ticks: keys,
        tickOptions: {
          showGridline: false,
          showMark: false,
          fontFamily: 'DosisBold',
          textColor: '#ffffff',
          fontSize: 'larger'
        },
      },
      yaxis: {
        tickOptions: {
          showGridline: false,
          showMark: false,
          showLabel: false,
          shadow: false,
        },
      },

    },
    seriesColors: ["#bc4427", "#df8321", "#949629", "#5e8c41", "#739c9b", "#3483b3"],
    grid: {
      background: '#1d1d1d',
      drawGridLines: false,
      borderWidth: 0.0,
      shadow: false,
    },

    highlighter: { show: false }
  }); 
```

我感觉这可能与 y 轴上使用的渲染器有关。目前它只是使用默认的（我假设是 LinearAxisRenderer）。如果我将其更改为 CategoryAxisRenderer，它会摆脱烦人的线条，但随后会显示标记，并使条形顶部的数字不正确（因此可能不会那么有用）。

我还挖掘了 CSS，寻找线条的颜色，#757575 但无济于事。我还将该文件中的每一种颜色都更改为突出的颜色（即红色），但仍然没有任何变化。

我不确定这是否是某些东西的阴影，但我已经尝试了几乎所有方法（除了正确的方法）来删除它们；依然没有。

以前有人遇到过这个问题吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-26T18:19:46.203

我今天遇到了这个问题，我注意到 yaxis 的“drawBaseline”被渲染器的 drawBaseline 覆盖。需要在 rendererOptions 中设置 drawBaseline 选项，如下所示：

```
axes: {
    yaxis: {
        rendererOptions: {drawBaseline: false}
    }
} 
```

看看这个 jsFiddle：http: [//jsfiddle.net/a88MS/1/](http://jsfiddle.net/a88MS/1/)

要查看问题，请评论并取消注释第 38 行。

第 37 行用于演示目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:50:37.600

尝试使用：

```
axes: {
    yaxis: {
       showTicks: false
    }
} 
```

否则它可能是一个边界然后尝试（但你再次设置`borderWidth`为 0 所以它应该具有相同的效果）：

```
grid:{
    drawBorder: false,
    shadow: false
} 
```

[应用了两个选项的示例。](http://jsfiddle.net/2mCjW/24/)

也可以尝试设置每个轴：

```
tickOptions: {
    showGridline: false
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T03:57:40.867

好吧，我仍然没有运气使用 jqPlot 选项解决问题，我找到了一个解决方案，即使用 CSS 隐藏整个 y 轴。

我只是将它添加到标签之间的 HTML 文件中`<style>`，当然您可以将它放在您正在使用的任何样式表中。

```
.jqplot-grid-canvas {
    display: none;
} 
```

瞧！该死的 y 轴终于消失了，让我的图形样式漂亮而朴素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T09:14:48.480

对我来说，以下确实起到了作用：

我已经设置了`borderWidth : 0`这正是问题所在，因为设置它激活了它！删除它解决了问题！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-24T18:20:28.917

我也遇到了同样的问题，但是我真的不想用自定义 css 来修复它。

我终于设法弄清楚你可以传递 gridLineColor 属性，这样你就可以从 jqPlot 图形参数中隐藏左侧那条烦人的线。

```
grid: {
  gridLineColor: "#FFFFFF" //or whatever background color you have
} 
```

# delphi - 将 ADOQuery 的结果获取到组合框

> ID：11732653
> 
> 赞同：0
> 
> 时间：2012-07-31T03:26:53.580
> 
> 标签：delphi

我有一个数据库，想用零件号填充一个组合框，其中 TYPE = RKE 但是当我运行此代码时，它会出现错误

参数 xxx 没有默认值。

```
 procedure TFMain.ComboTypeClick(Sender: TObject);
var
  Qry:TADOQuery;
begin
    Qry:=TADOQuery.Create(self);
  try
    Qry.Connection:=PronetConnection;  //pronet is adoconnection
    Qry.SQL.Clear;
    Qry.SQL.Add('Select PartNumber FROM PNet WHERE Type = RKE');
    Qry.Open;
    with Qry do
    begin
      First;
      ComboType.Items.Clear;
      while not eof do
      begin
        ComboNumber.Items.Add(FieldByName('PartNumber').AsString);
        Next;
      end;
    end;
  finally
    Qry.Active:=False;
    Qry.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:30:05.300

我认为错误在sql脚本中。

```
Qry.SQL.Add('Select PartNumber FROM PNet WHERE Type = '+QuotedStr('RKE')); 
```

# ocaml - 在 OCaml 中输出有限的整数范围

> ID：11732654
> 
> 赞同：1
> 
> 时间：2012-07-31T03:26:55.603
> 
> 标签：ocaml

我正在学习 OCaml 并坚持我正在尝试解决的练习。

练习是取一个整数并输出每个偶数整数，直到该整数，如下所示：

输入：5 输出：“0-2-4”

输入：10 输出：“0-2-4-6-8”

我必须包括负值、字符串输入等错误。

我正在考虑做一个递归函数并使用模式匹配来设置边缘情况并停止递归。

我的问题是，我来自 Ruby，在 Ruby 中，我的方法是简单地创建一个整数数组直到输入，然后使用 array.select、array.filter 等修改该数组，并连接内容将数组转换成字符串。我在 OCaml 中做这样的事情要困难得多。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T03:59:43.073

您可以在 OCaml 中使用您的 Ruby 方法，事实上，以这种方式工作非常地道。您可能想要使用列表而不是数组。我不知道有一个内置函数可以获取最大整数列表，但是写一个很容易。之后，您可以使用`List.filter`从列表中选择所需的元素。

如果您被允许使用额外的库，[OCaml Batteries Included](http://batteries.forge.ocamlcore.org/)中有许多有用的功能。在快速浏览了这个`BatList`模块之后，我想出了这个函数来处理小于 n 的整数范围：

```
let range n = BatList.init n (fun x -> x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:32:23.380

从类似的东西开始

```
let output_even_less_then n = 
   let rec outloop i n = 
     if i < n then begin
        Printf.printf "%d\n" i;
        outloop (i+2) n
     end
   in
     outloop 0 n 
```

然后用输入和有效性测试完成它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:55:19.997

您也可以使用一个简单的`while`循环，一开始可能更容易理解。先前答案的功能样式可能会稍微高效一些。

```
let exercise () =
    let line = input_line stdin in
    let n =
        try int_of_string line
        with e ->
            Printf.eprintf "Could not parse line '%s'\n%!" line;
            exit 1
    in
    if n < 0
    then Printf.eprintf "%i is negative\n%!" n;
    let i = ref 0 in
    while !i < n do
        Printf.printf "%i\n" !i;
        i := !i + 2;
    done
;;

exercise () 
```

# android - 多次传递相同的 Intent 额外，并且不知何故额外不匹配

> ID：11732663
> 
> 赞同：1
> 
> 时间：2012-07-31T03:28:32.323
> 
> 标签：android, android-intent, android-notifications, extra, extras

我有一个应用程序，它设置为在接收到广播时将数据库中的条目显示为通知。该数据库条目的 _id 作为广播意图的附加值传递。单击通知时，应用程序应该在活动中显示该数据库条目。

因此，这是来自广播接收器的代码示例：

```
Long itemID = intent.getLongExtra("com.my.app.receiver.ID", -1);
MyDatabaseHelper helper = new MyDatabaseHelper(context);
Log.i("MyApp", "Received item "+itemID);
Intent pending = new Intent(context, NotifyDisplay.class);
pending.putExtra("com.my.app.NOTIFY", itemID);
PendingIntent onNotifyClick = PendingIntent.getActivity(context,
                    1234567, pending, PendingIntent.FLAG_ONE_SHOT); 
```

从那里，PendingIntent 被抛出到一个通知中，而活动只是`getIntent().getLongExtra()`用来抓取它。然而，LogCat 显示了一个不同的故事。

```
07-25 23:45:00.046: I/MyApp(19630): Received item 1
07-25 23:45:05.456: D/dalvikvm(19630): GC_EXPLICIT freed 47K, 52% free 3213K/6599K, external 6314K/7884K, paused 64ms
07-25 23:45:29.705: I/Notification(19630): Displaying task 0
07-25 23:45:29.755: D/AndroidRuntime(19630): Shutting down VM
07-25 23:45:29.755: W/dalvikvm(19630): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-25 23:45:29.847: E/AndroidRuntime(19630): FATAL EXCEPTION: main 
```

不知何故，该应用程序现在正在尝试（并且失败）显示完全错误的项目。有人可以告诉我为什么在通过时会更改额外的内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T22:28:01.693

我似乎已经解决了这个问题，方法是使用`itemID.longValue()`我放入的额外内容`pending`。显然，由于`getLongExtra()`获取原始值，因此使用 a`Long`而不是 a`long`会导致问题。

# android - 在android中为视频添加音频

> ID：11732664
> 
> 赞同：15
> 
> 时间：2012-07-31T03:28:53.397
> 
> 标签：android

我想开发一个可以录制视频（mp4）的android应用程序，然后我的资源文件夹中有一些音频文件（mp3），我想将它添加到视频的末尾。所以最终的效果就像首先播放视频，然后在视频结束时听到添加的音频。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T07:21:46.443

使用不同的音频编解码器组合文件并不容易。我会做以下事情：

*   将 MP3 文件转换为与视频相同的格式（很可能是 MP4 容器中的 AAC）
*   现在您可以使用[mp4parser](http://mp4parser.googlecode.com)的[AppendExample](https://code.google.com/p/mp4parser/source/browse/trunk/examples/src/main/java/com/googlecode/mp4parser/AppendExample.java)将录制的视频附加到预先录制的声音中
*   结果将是一个 MP4 文件，首先包含视频和声音。

完全披露：我是 mp4parser 的维护者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T13:29:05.187

api 版本 18 之后 android MediaCodec apis 支持访问低级 api。MediaMuxer 混合基本流。

[https://developer.android.com/reference/android/media/MediaMuxer.html](https://developer.android.com/reference/android/media/MediaMuxer.html)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-07-31T04:22:11.050

制作两个活动，一个用于视频，一个用于音频。将视频活动设为主要活动。然后设置音频的等待时间。并使用意图调用音频活动。因此播放视频，等待时间结束后将播放音频视频结束。完美设置音频等待时间。所以它会在视频结束后播放

# java - 如何阻止通过对象或类变量使用的函数？

> ID：11732665
> 
> 赞同：0
> 
> 时间：2012-07-31T03:29:12.143
> 
> 标签：java

这是一个场景“如果我有一个类‘计算器’，它可以做加法、乘法、减法和除法......我想创建另一个类‘ScientificCalculator’来扩展‘计算器’，但我不想使用乘法，我想确保任何其他使用我的类 'ScientificCalculator' 的开发人员都不能使用乘法“我怎样才能实现这个功能？

好的，我需要更详细一点...计算器不是我的课程它是由其他人制作的，我只是将它用作我的课程“科学计算器”的父类。我无法在计算器中进行任何更改。而且我希望将来使用我的类的任何人都不能通过引用我父类的乘法方法的对象来使用乘法方法。——</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T03:35:10.307

不要扩展您的 Calculator 类。创建一个 ScientificCalculator 类，提供必要的方法。对于Calculator提供的方法，调用Calculator的实例，对于其他的，编写自己的实现。

```
public class Calculator {
    public double add(...) {}
    public double multiply(...) {}
    public double divide(...) {}
    public double subtract(...) {}
}

public class ScientificCalculator {
    Calculator c = new Calculator();
    public double add(...) { c.add(..) }
    //public double multiply(...) {}
    public double divide(...) { c.divide(..) }
    public double subtract(...) { c.subtract(..) }
    // .. other methods
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:54:02.577

我会推荐以下...

创建一个`BaseCalculator`只有 3 个操作的接口。

```
interface BaseCalculator{
  public double add(...) {}
  public double divide(...) {}
  public double subtract(...) {}
} 
```

然后在你剩下的类中实现相同的。

```
public class Calculator implements BaseCalculator {
   public double add(...) { }
   public double divide(...) { }
   public double subtract(...) {}       
   public double multiply(...) {}
}

public class ScientificCalculator implements BaseCalculator {
   public double add(...) { }
   public double divide(...) { }
   public double subtract(...) {}
} 
```

使用这个`ScientificCalculator`对象将无法调用乘法。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:31:52.740

替代方法，

通过使用 final 关键字来防止方法覆盖。

```
public class Calculator {
   public double add(...) { }
   public double divide(...) { }
   public double subtract(...) {}       
   public final double multiply(...) {}
}

public class ScientificCalculator extends Calculator {
   //other methods here
} 
```

# ruby-on-rails - 使用 Ajax 在嵌套模型表单中添加字段

> ID：11732667
> 
> 赞同：0
> 
> 时间：2012-07-31T03:29:28.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, nested-forms, railscasts

我按照[RailsCasts](http://railscasts.com/episodes/196-nested-model-form-revised?view=asciicast)上的说明设置了嵌套模型表单。（这使您可以在一个表单中拥有多个模型。）在我将代码添加到控制器新方法以构建嵌套模型之前，初始代码不起作用（见下文）。第二部分是使用 ajax 添加和删除字段。

Ajax 删除用于删除答案，但不是用于添加新答案字段的 ajax。我认为这是因为我需要将 ajax 连接到控制器代码，但我不知道该怎么做。

这是我添加到控制器的代码：

```
def new
      @survey = Survey.new     
      @question = @survey.questions.build
      @question.answers.build
  end 
```

* * *

这是其他相关代码（来自 railscast）：

```
<%= link_to_add_fields "Add answer", f, :answers %> 
```

调用以下方法：

```
def link_to_add_fields(name, f, association)
    new_object = f.object.send(association).klass.new
    id = new_object.object_id
    fields = f.fields_for(association, new_object, child_index: id) do |builder|
      render(association.to_s.singularize + "_fields", f: builder)
    end
    link_to(name, '#', class: "add_fields", data: {id: id, fields: fields.gsub("\n", "")})
  end 
```

哪个调用以下jquery：

```
$('form').on 'click', '.add_fields', (event) ->
  time = new Date().getTime()
  regexp = new RegExp($(this).data('id'), 'g')
  $(this).before($(this).data('fields').replace(regexp, time))
  event.preventDefault() 
```

# java - 下面的行 - 制作三个微调器和玩家添加或选择而不使用相同的名称

> ID：11732668
> 
> 赞同：1
> 
> 时间：2012-07-31T03:29:40.840
> 
> 标签：java, android, android-widget

早安，伙计们。这又是我，大卫·迪马兰塔。我是来问问题的。我需要创建一个程序，如果所有三个玩家的名字都不同，确认将在 toast 上显示“过程完成”。但相反，甚至所有人都没有相同的名字。

脚步：

1.  每个玩家从旋转器中选择一个名字。
2.  该值被写入字符串。
3.  单击按钮时，该过程会评估相似性别名（名称）。
4.  如果相似，至少有两个，toast 消息将显示“请指定不同的用户名”。
5.  如果没有，那么它就完成了。

而且，我的活动名称是“Player_3_at_Spinner_Menu.java”。这是我在这个类的第一部分的代码：

```
//Spinners for Players
private Spinner spinner_1;
private Spinner spinner_2;
private Spinner spinner_3;

//Button to Start
private Button play_it;

//For Displaying Text
private String SUMMON_PICK_UP_1, SUMMON_PICK_UP_2, SUMMON_PICK_UP_3;
private String cplayer_1, cplayer_2, cplayer_3;

//Text Response from a Spinner
public final static String EXTRA_MESSAGE_1 = "com.example.databasetestvertwo.MESSAGE1";
public final static String EXTRA_MESSAGE_2 = "com.example.databasetestvertwo.MESSAGE2";
public final static String EXTRA_MESSAGE_3 = "com.example.databasetestvertwo.MESSAGE3";

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.players_3);

    //Searching for ID... (Button)
    play_it = (Button) findViewById(R.id.START_GAME);

    //Adding listener to the button(s).
    play_it.setOnClickListener(new trigger_happy_start());

    //Call from the Database_Handler.class to call the database.
    Database_Handler db = new Database_Handler(getApplicationContext());

    //Then, load the content and...
    loadSpinnerData();
}

//Insert the value from the database into each of the spinners.
private void loadSpinnerData()
{

    //Initialize the spinners.
    spinner_1 = (Spinner) findViewById(R.id.player_1_spinner);
    spinner_2 = (Spinner) findViewById(R.id.player_2_spinner);
    spinner_3 = (Spinner) findViewById(R.id.player_3_spinner);

    Database_Handler db = new Database_Handler(getApplicationContext());

    List<String> lables = db.getAllLabels();

    //Creating an adapter for the spinner...
    ArrayAdapter<String> data_adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, lables);

    data_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    //Inserts the spinners by a database.
    spinner_1.setAdapter(data_adapter);
    spinner_2.setAdapter(data_adapter);
    spinner_3.setAdapter(data_adapter);

}

    //Action applied if a user chose this item. (Player 1)
public class response_1 implements OnItemSelectedListener
{

    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) 
    {

        SUMMON_PICK_UP_1 = parent.getItemAtPosition(position).toString();

        Toast.makeText(parent.getContext(), "You selected: " + SUMMON_PICK_UP_1, Toast.LENGTH_SHORT).show();

    }

    public void onNothingSelected(AdapterView<?> arg0) 
    {

        //Do nothing. I guess...

    }

}

//Action applied if a user chose this item. (Player 2)
public class response_2 implements OnItemSelectedListener 
{

    public void onItemSelected(AdapterView<?> parent_2, View view, int position, long id) 
    {

        SUMMON_PICK_UP_2 = parent_2.getItemAtPosition(position).toString();

        Toast.makeText(parent_2.getContext(), "You selected: " + SUMMON_PICK_UP_2, Toast.LENGTH_SHORT).show();

    }

    public void onNothingSelected(AdapterView<?> arg0) 
    {

        // TODO Auto-generated method stub

    }

}

//Action applied if a user chose this item. (Player 3)
public class response_3 implements OnItemSelectedListener 
{

    public void onItemSelected(AdapterView<?> parent_3, View view, int position, long id) 
    {

        SUMMON_PICK_UP_3 = parent_3.getItemAtPosition(position).toString();

        Toast.makeText(parent_3.getContext(), "You selected: " + SUMMON_PICK_UP_2, Toast.LENGTH_SHORT).show();

    }

    public void onNothingSelected(AdapterView<?> arg0) 
    {

        // TODO Auto-generated method stub

    }

} 
```

而且，这是检查所有或至少两个玩家是否有相同名字的代码，该过程警告他们不要在此活动下使用相同的名字。这是我的代码：

```
private class trigger_happy_start implements OnClickListener
{

    public void onClick(View v) 
    {

        //Checks if the names assigned on each spinner have a the same name.
        if
        (
                SUMMON_PICK_UP_1 == SUMMON_PICK_UP_2 ||
                SUMMON_PICK_UP_1 == SUMMON_PICK_UP_3 ||
                SUMMON_PICK_UP_2 == SUMMON_PICK_UP_3 
        )
        {
            Toast.makeText(getApplicationContext(), "Please specify a different username.", Toast.LENGTH_SHORT).show();
        }
        else
        {
            Toast.makeText(getApplicationContext(), "Process complete, idiot.", Toast.LENGTH_SHORT).show();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:38:32.460

我认为您的应用程序逻辑没有任何问题。

但是，您忘记设置 Spinner 的 onItemSelected：

```
spinner1.setOnItemSelectedListener( new response_1());
spinner2.setOnItemSelectedListener( new response_2());
spinner3.setOnItemSelectedListener( new response_3()); 
```

# c# - 无法将数据保存到数据库中

> ID：11732671
> 
> 赞同：1
> 
> 时间：2012-07-31T03:29:48.197
> 
> 标签：c#, database, winforms, combobox

我有个问题。我无法将组合框中的选定数据保存到数据库中。任何人都可以提供任何意见或为什么会这样？

以下是使大家能够更多地了解我的问题的代码：

```
private void Create_LS_Load(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            cbStation.DisplayMember = "StationName";
            cbStation.ValueMember = "StationID";
            cbStation.DataSource = Setupctx.stations.ToList();

            cbLocation.DisplayMember = "LocationName";
            cbLocation.ValueMember = "LocationID";
            cbLocation.DataSource = Setupctx.locations.ToList();
        }
    }

private void btnCreate_Click(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            locationstation ls = new locationstation();
            ls.stationID = cbStation.SelectedIndex;
            ls.locationID = cbLocation.SelectedIndex;
            Setupctx.locationstations.AddObject(ls);
            Setupctx.SaveChanges();

            cbStation.SelectedIndex = -1;
            cbLocation.SelectedIndex = -1;

            MessageBox.Show("New Location Station Is Created");
        }
    } 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:33:18.107

在您的 create 方法中，为什么要分配`SelectedIndex`给 ls.StationID 和 ls.locationID ？所选索引将为您提供所选项目的索引。我相信您对[SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem)感兴趣，或者您可以使用[Text](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.text)属性。

编辑：

由于您的 StationID 和 locationID 是 int，您可以在将 SelectedItem 分配给字段之前将它们转换为 int。（*最好使用[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)来避免异常*）

```
int stationID = Convert.ToInt32(cbStation.SelectedItem.ToString());
int locationID = Convert.ToInt32(cbLocation.SelectedItem.ToString()); 
```

或者

```
int stationID = Convert.ToInt32(cbStation.Text);
int locationID = Convert.ToInt32(cbLocation.Text); 
```

然后

```
ls.stationID = stationID;
ls.locationID = locationID; 
```

# python - wiki 链接（irc 机器人）

> ID：11732678
> 
> 赞同：1
> 
> 时间：2012-07-31T03:30:49.020
> 
> 标签：python, bots, irc

我为[http://www.rsplayers.wikia.com/](http://www.rsplayers.wikia.com/)创建了一个 IRC Bot，它成功连接到频道并具有一些基本命令，但我一直停留在允许您链接网站的这一部分. Wiki 链接基本上是 [[Link]]，没什么特别的。目前命令只能在一个 def 中完成，这里是一个示例 say 命令：

```
def say(self, sender, info, cmd):
    return "PRIVMSG %s :%s\n" % (info[2], cmd[1]) 
```

info[2] 是发出命令的通道，而 cmd[1] 是 !say 之后的任何内容。命令也是这样列出的：

```
self.USER_CMD = {'!say': self.say, '!test': self.test, '!time': self.time, '!help': self.help, '!8ball': self.eightball} 
```

我不知道如何创建这个，所以我需要帮助。

**编辑**：正如评论中所要求的更具体：每当有人输入 [[Brakets]] 时，它都会返回一个指向 rsplayers wiki 网站的链接。一个例子是：

> ( 尼克 ) [[主页]]
> 
> （机器人）[http://www.rsplayers.wikia.com/wiki/Main_Page](http://www.rsplayers.wikia.com/wiki/Main_Page)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:24:20.583

假设您只想将链接附加到 wiki 的末尾，那么就这样做。如果你想确保有一个实际的页面，这需要更多的工作，基本上检查 http 状态代码 200 或类似的东西。

要仅附加命令，您应该去掉括号、标题所有内容并在空格处插入下划线，因为这似乎是该 wiki 上使用的方案。

```
def say_wiki(self, sender, info, cmd):
    home = 'http://www.rsplayers.wikia.com/wiki/'
    link = '_'.join(cmd[1].title().split())
    return 'PRIVMSG %s :%s%s\r\n' % (info[2], home, link) 
```

如果需要支持链接是否有效，可以使用 urllib。

```
import urllib

def say_wiki(self, sender, info, cmd):
    home = 'http://www.rsplayers.wikia.com/wiki/'
    link = '_'.join(cmd[1].title().split())
    page = urllib.urlopen(home + link)
    if 200 == page.getcode():
        return 'PRIVMSG %s :%s%s\r\n' % (info[2], home, link)
    else:
        return 'PRIVMSG %s :%s is not a valid page\r\n' % (info[2], cmd[1]) 
```

虽然可能有更好的方法来实现这一点。

# java - 覆盖属性文件

> ID：11732679
> 
> 赞同：0
> 
> 时间：2012-07-31T03:30:57.597
> 
> 标签：java, properties

有没有办法用 Java 只覆盖属性文件中的一个字段？

例如，如果我的 app.properties 看起来像

```
dbpassword=password
database=localhost
dbuser=user1 
```

我想把它改成

```
dbpassword=password
database=localhost
dbuser=user2 
```

只需一个 setProperty 命令，即无需覆盖我的其他字段，我可以做到吗？我尝试了以下方法：

```
prop.setProperty("dbuser", "user2");

prop.store(new FileOutputStream("app.properties",true), null); 
```

但它只是将属性附加到文件中，不会覆盖现有的 dbuser 字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:32:42.037

尝试

```
prop.store(new FileOutputStream("app.properties",false), null); 
```

反而。基本上，您要求`FileOutputStream`将结果附加到现有文件中，而不是覆盖它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T05:32:04.213

```
The  example, PropertiesTest, creates a Properties object and initializes it from myProperties.txt .

subliminal.message = Buy StayPuft Marshmallows!
PropertiesTest then uses System.setProperties to install the new Properties objects as the current set of system properties.

import java.io.FileInputStream;
import java.util.Properties;

public class PropertiesTest {
    public static void main(String[] args)
        throws Exception {

        // set up new properties object
        // from file "myProperties.txt"

        Properties p =
            new Properties(System.getProperties());
        p.load(propFile);

        // set the system properties
        System.setProperties(p);
        // display new properties
        System.getProperties().list(System.out);
    }
}
Note how PropertiesTest creates the Properties object, p, which is used as the argument to setProperties:

Properties p = new Properties(System.getProperties()); 
```

# jira - 将 MantisBT 1.1.2 迁移到 JIRA 5.1.1

> ID：11732681
> 
> 赞同：0
> 
> 时间：2012-07-31T03:31:32.233
> 
> 标签：jira, mantis

我有一个现有的问题跟踪系统，MantisBT 使用非常旧的 1.1.2 版本（使用 MySql 5.0），我需要使用最新的 5.1.1 版本将其迁移到另一个问题跟踪系统 JIRA。

虽然 JIRA 支持 MantisBT 问题迁移，但它仅支持 MantisBT 1.1.8 及以后的版本。我被困住了！！！

我尝试通过执行以下步骤将 MantisBT 升级到最新的 1.2.11（使用 MySql 5.5）： - 将我的旧 MantisBT MySQL 数据库导出到 sql 文件中。- 将此 sql 文件导入 MySql 5.5 - 当我尝试访问新的 MantisBT 登录页面时，遇到以下错误：

```
APPLICATION ERROR #401 
Database query failed. Error received from database was #126: Incorrect key file for table '.\bugtracker\mantis_config_table'; try to repair it for the query: SELECT config_id, user_id, project_id, type, value, access_reqd FROM mantis_config_table. 
```

有人有做上述的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T07:22:18.420

好像你的数据库坏了。你试过修复它吗？[MySQL 修复表语法](http://dev.mysql.com/doc/refman/5.1/en/repair-table.html)

# django - 自动在我的博客上发布来自我的社交服务的链接内容

> ID：11732684
> 
> 赞同：0
> 
> 时间：2012-07-31T03:31:40.433
> 
> 标签：django, twitter, blogs, flickr, instagram

我正在研究是否有可能拥有一个类似于[Jeff Croft 的](http://jeffcroft.com/)博客，该网站会自动[查询其所有者的社交服务](http://jeffcroft.com/blog/2012/may/27/how-this-site-is-built/)（Twitter、Flickr、Pinboard 等）并发布链接到原始服务的内容。

有没有一种简单的方法可以做到这一点，或者更好的是，一个已经以“可插入”方式实现类似功能的博客引擎？理想情况下，设计师将能够自己管理这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:46:51.450

[Syte](http://rigoneri.github.com/syte/)为 Twitter、Dribble、Tumbler、Github、Last.fm 和 Instagram 执行此操作，并且是一个使用响应式设计构建的 Django 应用程序。

# matlab - 用于行和列坐标的 matlab 循环或内置函数

> ID：11732685
> 
> 赞同：0
> 
> 时间：2012-07-31T03:32:00.870
> 
> 标签：matlab, row, coordinates

我需要从另一个矩阵 {data} <259x31878> 中找到我的矩阵 {a} <259x1> 的行和列坐标。我尝试使用 for 循环，但不确定如何使用矩阵列表 {a} 实现 for 循环。请帮助任何人。谢谢你。

更新：很抱歉造成混乱。是的，矩阵 {a} 是矩阵 {data} 的子集。或者，矩阵 {data} 是矩阵 {a} 的超集。我需要在矩阵 {data} 中找到矩阵 {a} 的值的行和列位置。如您所见，矩阵 {data} 太大，单独搜索每个数据点是不切实际的。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T07:34:23.393

```
a(:,ones(1,size(data,2)))==data 
```

这会产生您可以使用的逻辑索引，也可以使用 find 转换它们：

```
[r c]=find(a(:,ones(1,size(data,2)))==data) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:04:47.613

检查 matlab [ismemeber](http://www.mathworks.com.au/help/techdoc/ref/ismember.html)函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:55:09.560

ismember 的第二个输出呢？它为您提供位置而不是逻辑索引矩阵。看看这个问题： [Find index of all (non-unique) elements in a cell array as they appear in a second (sorted and unique) cell array](https://stackoverflow.com/questions/11562196/find-index-of-all-non-unique-elements-in-a-cell-array-as-they-appear-in-a-seco)

# linq - 无法使用已在使用的密钥添加实体...我没有插入，只是在更新

> ID：11732693
> 
> 赞同：0
> 
> 时间：2012-07-31T03:33:42.590
> 
> 标签：linq, linq-to-sql, .net-3.5

我没有插入......主键不是身份，自动生成的值设置为false......有什么想法吗？

```
 var x= dataAccessDataContext.XTable.FirstOrDefault(xt=> xt.ID == Convert.ToInt32(id));

            if (x==null)
            {
                var newX = new Xtable
                                       {
                                           Data=id
                                       };
                dataAccessDataContext.XTable.InsertOnSubmit(newX);
                dataAccessDataContext.SubmitChanges();
            }
            else
            {
                x.Data=id
                dataAccessDataContext.SubmitChanges();//error happens right here when updating
            } 
```

# php - MySQL 语法区域和在 2 个下拉菜单之间进行验证

> ID：11732698
> 
> 赞同：1
> 
> 时间：2012-07-31T03:34:34.067
> 
> 标签：php, mysql, syntax-error

我有一个网站，登录用户可以在其中记录电池销售，但我遇到了一些麻烦......

我有两个问题：

1.  当我提交表单时，我收到一条错误消息，内容为“MySQL 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法使用'，它发生在 'INSERT INTO npc_sales_list' 查询之后并且不知道为什么。

2.  我也在尝试验证下拉菜单（'npc_battery_n_code' 和 'npc_battery_other_code'），以便如果在一个下拉菜单中选择了一个电池，另一个将恢复为“无”。

目前，如果问题 1 可以在 2 之前得到回答，那就太好了，但欢迎提出任何建议。

```
 <?php //logsale.php
 require_once ('./includes/config.inc.php');
 $page_title = 'Log a sale';
 include ('./includes/header.html');

 if (!isset($_SESSION['sp_user_id'])) {

 $url = 'http://' . $_SERVER['HTTP_HOST']
 . dirname($_SERVER['PHP_SELF']);
 // Check for a trailing slash.
 if ((substr($url, -1) == '/') OR (substr($url, -1) == '\\') ) {
 $url = substr ($url, 0, -1); // Chop off the slash.
 }
 $url .= '/login.php'; 

 ob_end_clean(); // Delete the buffer.
 header("Location: $url"); 
 exit(); // Quit the script.
 }
 $users = $_SESSION['sp_user_id'];
 ?>

 <h1>Heading</h1>

 <?php

 if (isset($_POST['submitted'])) {// Handle the form.

 require_once ('mydatabase.php');

 if (!empty($_POST['npc_quantity'])) {
 $quantity = escape_data($_POST ['npc_quantity']);
 } else {
 $quantity = FALSE;
 echo '<p><font color="red">You forgot to enter the Quantity</font></p>';
 }  

 if (!empty($_POST['npc_customer_name'])) {
 $customer = escape_data($_POST ['npc_customer_name']);
 } else {
 $customer = FALSE;
 echo '<p><font color="red">You forgot to enter the Customer Name</font></p>';
 }  

 if (!empty($_POST['npc_registration_no'])) {
 $rego = escape_data($_POST ['npc_registration_no']);
 } else {
 $rego = FALSE;
 echo '<p><font color="red">You forgot to enter the Customer Rego Number</font></p>';
 }  

 if (!empty($_POST['npc_suo_no'])) {
 $suo = escape_data($_POST ['npc_suo_no']);
 } else {
 $suo = FALSE;
 echo '<p><font color="red">You forgot to enter the SUO Number</font></p>';
 }  

 if (!empty($_POST['npc_amb_club_no'])) {
 $repair_order = escape_data($_POST ['npc_amb_club_no']);
 } else {
 $repair_order = FALSE;
 echo '<p><font color="red">You forgot to enter the A-Club number</font></p>';
 }  

 if (!empty($_POST['npc_repair_order'])) {
 $amb_club = escape_data($_POST ['npc_repair_order']);
 } else {
 $amb_club = FALSE;
 echo '<p><font color="red">You forgot to enter the Repair Order</font></p>';
 }  

 if (!empty($_POST['npc_invoice_no'])) {
 $inv = escape_data($_POST ['npc_invoice_no']);
 } else {
 $inv = FALSE;
 echo '<p><font color="red">You forgot to enter the Invoice Number </font></p>';
 }  

 if (!empty($_POST['npc_entry_userdate'])) {
 $inv_date = escape_data($_POST ['npc_entry_userdate']);
 } else {
 $inv_date = FALSE;
 echo '<p><font color="red">You forgot to enter the Invoice Date</font></p>';
 }

 if ($quantity && $customer && $rego && $suo && $repair_order && $amb_club && $inv && $inv_date)  {

 $uid = @mysql_insert_id(); //Get the url ID.
 $query = "INSERT INTO npc_sales_list 
 (npc_item_id , sp_user_id, npc_battery_n_code, npc_battery_other_code, npc_quantity, 
 npc_customer_name, npc_registration_no, npc_suo_no, npc_amb_club_no, npc_repair_order,
 npc_entry_userdate, npc_usertype, npc_points, npc_bonus_points, npc_entry_date)
 VALUES
 ('$uid', '$users', '$_POST[npc_battery_n_code]', '$_POST[npc_battery_other_code]', '$quantity',
 $customer , $rego, $suo, $amb_club , $repair_order, 
 $inv , 'NPC', '5' , '0' , NOW())";
 $result = mysql_query ($query) or trigger_error
 ("Query: $query\n<br />MySQL Error: " .mysql_error());

 if ($result = @mysql_query($query)) {

 //Finish the page.
 echo '<p>The sale with invoice number: <strong>' . $inv . '</strong>       <br />
 is now registered into the system.</p>
 <p>If you would like to log in further sales, please <a href="logsale.php">click here</a></p>
 <p>If you would like to view your sales log, please <a href="viewsales.php">click here</a></p>
 ';
 include ('./includes/footer.html'); // Include the HTML footer.
 exit();

 } else { // If it did not run OK.
 echo '<p><font color="red" size="+1">You could not be
 registered due to a system error. We apologize for any
 inconvenience.</font></p>';
 }

 } 

 } else { // If one of the data tests failed.
 echo '<p><font color="red" size="+1">Please check all manatory fields are complete and try again.
 </font></p>';
 }

 mysql_close(); // Close the database connection.

 ?>                         

 <form enctype="multipart/form-data" action="logsale.php" method="post">

 <table width="520" border="0" cellspacing="3" cellpadding="2">

 <tr>
 <td width="184"><div align="right">NPC Vehicle<span class="style2">*</span></div></td>
 <td width="323"><select  name="npc_battery_n_code" id="npc_battery_n_code">
 <option value="None" 
 <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == 'None') 
 {echo 'selected="selected"';} ?>>None
 </option>
 <option value="55D23L" 
 <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '55D23L') 
 {echo 'selected="selected"';} ?>>55D23L
 </option>
 <option value="55D23R" 
 <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '55D23R') 
 {echo 'selected="selected"';} ?>>55D23R
 </option>                                
 <option value="75D23R" 
 <?php if (isset($_POST['npc_battery_n_code']) && $_POST['npc_battery_n_code'] == '75D23R') 
 {echo 'selected="selected"';} ?>>75D23R
 </option>
 </select></td>
 </tr>

 <tr>
 <td width="184"><div align="right">Other <span class="style2">*</span></div></td>
 <td width="323">
 <select  name="npc_battery_other_code" id="npc_battery_other_code">
 <option value="50D20L" 
 <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '50D20L') 
 {echo 'selected="selected"';} ?>>50D20L
 </option>
 <option value="50D20R" 
 <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '50D20R') 
 {echo 'selected="selected"';} ?>>50D20R
 </option>
 <option value="55D23LMF" 
 <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '55D23LMF') 
 {echo 'selected="selected"';} ?>>55D23LMF
 </option>
 <option value="55D23RMF" 
 <?php if (isset($_POST['npc_battery_other_code']) && $_POST['npc_battery_other_code'] == '55D23RMF') 
 {echo 'selected="selected"';} ?>>55D23RMF
 </option>
 </select></td>
 </tr>

 <tr>
 <td><div align="right">Quantity <span class="style2">*</span></div></td>
 <td><input type="text" name="npc_quantity" size="10" maxlength="10" 
 value="<?php if (isset($_POST['npc_quantity'])) echo $_POST['npc_quantity']; ?>" /></td>
 </tr>

 <tr>
 <td><div align="right">Customer name<span class="style2">*</span></div></td>
 <td><input type="text"  name="npc_customer_name" size="30" maxlength="30" 
 value="<?php if (isset($_POST['npc_customer_name'])) echo $_POST['npc_customer_name']; ?>" /></td>
 </tr>

 <tr>
 <td><div align="right">Rego number <span class="style2">*</span></div></td>
 <td><input type="text" name="npc_registration_no" size="10" maxlength="7" 
 value="<?php if (isset($_POST['npc_registration_no'])) echo $_POST['npc_registration_no']; ?>" /></td>
 </tr>

 <tr>
 <td><div align="right">SUO No.<span class="style2">*</span></div></td>
 <td><input type="text" name="npc_suo_no" size="10" maxlength="7" 
 value="<?php if (isset($_POST['npc_suo_no'])) echo $_POST['npc_suo_no']; ?>"/></td>
 </tr>

 <tr>
 <td><div align="right">A-Club ID<span class="style2">*</span></div></td>
 <td><input type="text" name="npc_amb_club_no" size="15" maxlength="7" 
 value="<?php if (isset($_POST['npc_amb_club_no'])) echo $_POST['npc_amb_club_no']; ?>"/></td>
 </tr>

 <tr>
 <td><div align="right">Repair Order <span class="style2">*</span></div></td>
 <td><input type="text" name="npc_repair_order" size="15" maxlength="12" 
 value="<?php if (isset($_POST['npc_repair_order'])) echo $_POST['npc_repair_order']; ?>" /></td>
 </tr>

 <tr>
 <td><div align="right">Invoice No. <span class="style2">*</span></div></td>
 <td><input size="10" name="npc_invoice_no" 
 value="<?php if (isset($_POST['npc_invoice_no'])) echo $_POST['npc_invoice_no']; ?>" /></td>
 </tr>

 <tr>
 <td><div align="right">Invoice Date <span class="style2">*</span></div></td>
 <td><input size="12" name="npc_entry_userdate" maxlength="10" 
 value="<?php if (isset($_POST['npc_entry_userdate'])) echo $_POST['npc_entry_userdate']; ?>"/>  </td>
 </tr>

 <tr>
 <td></td>
 <td><input type="submit" name="submit" value="Submit" /></p><input type="hidden" name="submitted" value="TRUE" />
 &nbsp;</td>
 </tr>
 </table>
 </form>

 <p>Footer</p>

 <?php
 include ('./includes/footer.html');
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:41:50.853

这是对问题 1 的回应：

您似乎没有与 SQL 中的值匹配的列：

```
$query = "INSERT INTO npc_sales_list 
 (npc_item_id // get rid of this 
```

我认为您想摆脱第一列，因此您需要这样做：

```
$query = "INSERT INTO npc_sales_list 
 (sp_user_id, npc_battery_n_code, npc_battery_other_code, npc_quantity, 
 npc_customer_name, npc_registration_no, npc_suo_no, npc_amb_club_no, npc_repair_order,
 npc_entry_userdate, npc_usertype, npc_points, npc_bonus_points, npc_entry_date)
 VALUES // so on and so forth... 
```

在 SQL 插入语句中，如果您计算您拥有的列数并与您拥有的值的数量进行比较，您会注意到不匹配（15 对 14，这意味着 npc_item_id 不是必需的，并且可能是自动无论如何增加唯一键）。

# iphone - 基于 ARC 的应用程序中呈现和关闭的内存管理

> ID：11732705
> 
> 赞同：0
> 
> 时间：2012-07-31T03:35:05.297
> 
> 标签：iphone, ios, memory-management, automatic-ref-counting

我的应用程序遇到了一个有趣的问题。我的一些视图包含许多元素，每个元素都在 50MB 左右。我已经在我的项目中启用了 ARC，但在呈现和关闭视图控制器时确实存在问题。我相信我使用了错误的方法。

我有 5 个快捷按钮可以在视图之间切换。目前我正在这样做：

```
AboutVC *aboutview = [[AboutVC alloc]initWithNibName:@"AboutVC" bundle:nil];
[self presentModalViewController:aboutview animated:YES]; 
```

所以每次如果用户想要返回登陆视图（或切换到另一个视图），将分配相同数量的内存（50MB）。因此，在切换 4-5 次后，应用程序严重崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T03:40:42.803

您需要确保正确地驳回您的观点。如果将它们添加到任何类型的集合类中，则必须从那里删除它们才能使 ARC 的魔法发挥作用。您需要像这样（从 AboutVC 类中）关闭模态视图控制器`[self dismissModalViewControllerAnimated:YES];`：

# ios - 如果在 iOS 设置中禁用相机，则在 AVCaptureDeviceInput 崩溃

> ID：11732706
> 
> 赞同：0
> 
> 时间：2012-07-31T03:35:07.957
> 
> 标签：ios, cocoa-touch

我正在使用 ZXing 小部件扫描 QRCode。如果用户从 iOS 设置禁用相机访问，我的应用程序将像这样崩溃：

*** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“***无法添加，因为设备不支持 AVCaptureSessionPresetMedium。使用 -[AVCaptureDevice 支持 AVCaptureSessionPreset:]。'

有没有办法尝试提示用户重新打开它？

谢谢

狮子座

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:36:20.847

我在 iPad 1 上遇到了同样的错误，我猜是因为 iPad1 没有摄像头。我这样做是为了解决崩溃：

```
if([[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] supportsAVCaptureSessionPreset:AVCaptureSessionPresetMedium]){
    // add code to open ZXingWidgetController
} else {
    // show alert that device does not support
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T09:39:47.020

您可以使用以下代码，它与 iOS 5+ 兼容

```
- (BOOL)backCameraIsReady
{
    AVCaptureDevice *inputDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    NSError *inputDeviceError = nil;
    AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput deviceInputWithDevice:inputDevice error:&inputDeviceError];
    if (!captureInput) {
        return NO;
    } else {
        return YES;
    }
} 
```

# javascript - 查找 JS 代码中引用的 DOM 元素的工具

> ID：11732713
> 
> 赞同：0
> 
> 时间：2012-07-31T03:35:31.867
> 
> 标签：javascript, html, dom

是否有任何工具可以在页面加载时找到哪一点 JS 代码更新了 DOM 元素。我`<div id="container"`在下面的页面上有一个`display="none"`从一些 JS 代码设置为的页面，因为页面上有很多代码我不知道它在哪里设置。

[http://www.flypeach.com/airport/specialsupport.aspx](http://www.flypeach.com/airport/specialsupport.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:52:04.217

通过一次排除一个文件，您可以轻松检测出问题所在的文件。

如果这不可能，您可以随时尝试 Chrome 中的开发工具。在脚本选项卡上，您可以创建断点并重新加载页面以缩小更改发生的位置和时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:55:28.453

从删除最后几个脚本，它似乎是`/Portals/_default/Skins/FlyPeachsm4/jquery.anntransformer.min.js`

编辑：它位于 annatransformer.min.js 的底部：

```
$("body div").first().css("display","none"); 
```

很可能直接从一些必要的示例中复制而来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T03:41:24.427

有时最好的工具是 Ctrl/Command + F，或 Ctrl/Command + Shift + F。

# java - java中对象的生命周期

> ID：11732714
> 
> 赞同：-1
> 
> 时间：2012-07-31T03:35:41.420
> 
> 标签：java, oop, memory, object, heap-memory

我已经引用了这个链接。[堆内存](https://stackoverflow.com/questions/2129044/java-heap-terminology-young-old-and-permanent-generations)

我有个疑问

```
class Sample
{
    public static void main(String[] args)
    {
        Date dt=new Date();
        System.out.println(""+dt);
    }
} 
```

如果 GC 发生，首先`dt`将在**eden 空间**，如果 GC在Survivor 空间发生，它将进入**Survivor****空间**（如果我错了，请纠正我）。`dt`

 **我的问题是：

1.  如果显示日期并且程序完成运行过程，那么这些 dt 会保留在堆空间中吗？
2.  如果 GC 没有发生， `dt`还会在哪里？
    （伊甸园空间，幸存者空间等）
3.  程序完成运行过程，然后 dt 将没有参考，对吗？

非常感谢你 .....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:26:32.670

如果显示日期（程序完成运行过程）这些 dt 是否会保留在堆空间中？

(1) 当程序完成时，堆上将没有任何东西（dt 将不存在）

如果 GC 没有发生，dt 将保留在哪里？（伊甸园空间，幸存者空间等）

(2) 关于“dt”，你只能说它会在伊甸园空间中创建，之后如果它进入幸存者空间或永久代或被垃圾收集，都是由 GC 管理的，你无法确切知道它在哪里

程序完成运行过程 dt 将没有参考，对吗？

(3) 是的，它不会有任何参考。事实上，当方法终止时 dt 将有资格进行 GC（现在如果 gc 发生在 rt 之外或需要时间你不知道）

需要明确的是，GC 没有任何保证，在程序执行期间分配的任何内存可能在程序终止后仍然分配，在这种情况下它将被操作系统回收**

# ruby - 如何在 Mountain Lion 上为 IntelliJ 安装 ruby -debug-base19x？

> ID：11732715
> 
> 赞同：2
> 
> 时间：2012-07-31T03:35:41.680
> 
> 标签：ruby, intellij-idea, rubymine, ruby-debug

我刚刚升级到 Mountain Lion，IntelliJ 10 ruby​​-debugger 似乎不再工作。我收到以下错误，但无法真正解释如何解决这个问题，知道吗？

```
/Users/kamilski81/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... no
/Users/kamilski81/.rvm/gems/ruby-1.9.3-p194@sc/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:39: Use RbConfig instead of obsolete and deprecated Config.
checking for rb_method_entry_t.body in method.h... no
checking for vm_core.h... yes
checking for iseq.h... yes
checking for insns.inc... yes
checking for insns_info.inc... yes
checking for eval_intern.h... yes
creating Makefile

make
compiling breakpoint.c
compiling ruby_debug.c
ruby_debug.c:24:19: error: conflicting types for 'rb_iseq_compile_with_option'
RUBY_EXTERN VALUE rb_iseq_compile_with_option(VALUE src, VALUE file, VALUE line, VALUE opt); /* from iseq.c */
                  ^
/Users/kamilski81/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby-1.9.3-p194/vm_core.h:505:7: note: previous declaration is here
VALUE rb_iseq_compile_with_option(VALUE src, VALUE file, VALUE filepath, VALUE line, VALUE opt);
      ^
ruby_debug.c:474:60: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
    return rb_funcall2(context, idAtLine, RARRAY_LEN(args) - 1, RARRAY_PTR(args) + 1);
           ~~~~~~~~~~~                    ~~~~~~~~~~~~~~~~~^~~
ruby_debug.c:538:13: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
    s_len = RSTRING_LEN(source);
            ^~~~~~~~~~~~~~~~~~~
/Users/kamilski81/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:674:6: note: expanded from macro 'RSTRING_LEN'
     RSTRING_EMBED_LEN(str) : \
     ^
/Users/kamilski81/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:670:6: note: expanded from macro 'RSTRING_EMBED_LEN'
     (long)((RBASIC(str)->flags >> RSTRING_EMBED_LEN_SHIFT) & \
     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ruby_debug.c:538:13: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
    s_len = RSTRING_LEN(source);
            ^~~~~~~~~~~~~~~~~~~
/Users/kamilski81/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby/ruby.h:675:28: note: expanded from macro 'RSTRING_LEN'
     RSTRING(str)->as.heap.len)
                           ^
ruby_debug.c:539:13: warning: implicit conversion loses integer precision: 'size_t' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]
    f_len = strlen(file);
          ~ ^~~~~~~~~~~~
ruby_debug.c:684:98: error: too few arguments to function call, expected 5, have 4
        rb_str_new_cstr("begin\nend"), rb_str_new_cstr("(exception catcher)"), INT2FIX(1), Qfalse);
                                                                                                 ^
/Users/kamilski81/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/ruby-1.9.3-p194/vm_core.h:505:1: note: 'rb_iseq_compile_with_option' declared here
VALUE rb_iseq_compile_with_option(VALUE src, VALUE file, VALUE filepath, VALUE line, VALUE opt);
^
ruby_debug.c:1695:10: warning: implicit conversion loses integer precision: 'VALUE' (aka 'unsigned long') to 'int' [-Wshorten-64-to-32]
  return level;
  ~~~~~~ ^~~~~
ruby_debug.c:2310:37: warning: implicit conversion loses integer precision: 'long' to 'int' [-Wshorten-64-to-32]
        int frames = jump_cfp - cfp + 2;
            ~~~~~~   ~~~~~~~~~~~~~~~^~~
ruby_debug.c:2378:53: warning: comparison of integers of different signs: 'long' and 'unsigned long' [-Wsign-compare]
            if ((cfp->pc - cfp->iseq->iseq_encoded) >= (cfp->iseq->iseq_size - 1))
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ^   ~~~~~~~~~~~~~~~~~~~~~~~~
ruby_debug.c:2392:27: warning: comparison of integers of different signs: 'int' and 'size_t' (aka 'unsigned long') [-Wsign-compare]
            for (i = 0; i < cfp->iseq->insn_info_size; i++)
                        ~ ^ ~~~~~~~~~~~~~~~~~~~~~~~~~
8 warnings and 2 errors generated.
make: *** [ruby_debug.o] Error 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T20:39:17.947

所以，我发现问题的根源是 linecache19，你需要 -v 0.5.13 才能让它工作。

```
gem install ruby-debug-base19x -v 0.11.30.pre10
gem install ruby-debug-ide -v 0.4.17.beta14
curl -L "http://rubyforge.org/frs/download.php/75414/linecache19-0.5.13.gem" -o /tmp/linecache19-0.5.13.gem
gem install /tmp/linecache19-0.5.13.gem 
```

但是，我的猜测是 linecache19 -v 0.5.13 需要从[http://rubyforge.org/frs/?group_id=8883&release_id=46302下载](http://rubyforge.org/frs/?group_id=8883&release_id=46302)

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T05:59:31.593

我正在使用 RubyMine，所以情况可能略有不同，但应该是相同的..

您需要通过以下方式安装两个 gem `gem install`：

```
archive-tar-minitar
ruby_core_source 
```

然后，在 IDE 中运行调试器。它应该自己构建必要的宝石。如果遇到一些错误，则可能缺少一些 gem，因此请仔细阅读错误并通过 gem install 安装它们。

我尝试使用带有 RubyMine 4.5 和我的应用程序的新安装的 Mountain Lion，它可以正常工作。（我使用的是 Xcode 4.4）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T07:45:37.797

我使用了@Kamilski81 答案中的命令，但最后一个没有用。以下是他的命令，最后一个命令替换为下载和安装命令：

```
gem install ruby-debug-base19x -v 0.11.30.pre10
gem install ruby-debug-ide -v 0.4.17.beta14
curl -L "http://rubyforge.org/frs/download.php/75414/linecache19-0.5.13.gem" -o /tmp/linecache19-0.5.13.gem
gem install /tmp/linecache19-0.5.13.gem 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-14T23:52:45.363

回复：linecache19 - 我提交了[https://github.com/robmathews/linecache19-0.5.13/issues/1](https://github.com/robmathews/linecache19-0.5.13/issues/1) - 所以你现在可以得到它： `$ gem install linecache19-patched Fetching: linecache19-patched-0.5.13.gem (100%) Successfully installed linecache19-patched-0.5.13 Couldn't find file to include 'VERSION' from lib/linecache19.rb Installing ri documentation for linecache19-patched-0.5.13 1 gem installed $`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-29T19:40:48.607

使用[调试器](https://rubygems.org/gems/debugger)gem。

分叉的原因，引用[调试器自述文件](https://github.com/cldwalker/debugger#reason-for-fork)：

> *   ruby-debug19 维护者不维护：
>     *   尽管来自 ruby​​ 核心的补丁，但在 2 年多的时间里没有任何 gem 发布！- 2009 年 9 月 1 日。
>     *   发布已知工作 1.9.3 版本的请求已被忽略。
>     *   不响应 ruby​​forge 问题，也没有打开 github 问题。
> *   当前安装很痛苦。需要[从 ruby​​forge 手动下载 gems](http://blog.wyeworks.com/2011/11/1/ruby-1-9-3-and-ruby-debug)并使用编译器标志安装或[重新编译 ruby](http://blog.sj26.com/post/12146951658/updated-using-ruby-debug-on-ruby-1-9-3-p0)​​ 。
> *   我们需要一个体面的 ruby​​ 调试器来处理未来的 ruby​​！

我使用了新的调试器 gem，几乎没有问题。

# mysql - 出现错误：警告：mysql_fetch_assoc() 期望参数 1 是资源，第 13 行给出的布尔值。这是 php 代码

> ID：11732716
> 
> 赞同：0
> 
> 时间：2012-07-31T03:36:00.463
> 
> 标签：mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

需要帮助我试图让我的自动建议框工作，但我一直收到一条错误消息，上面写着警告 mysql_fetch_assoc() 期望参数 1 是资源，布尔值给定 ... 在第 13 行。这是其中包含 mysql_fetch_assoc 的行。

```
 <?php
    if (isset($_GET['search_text'])) { echo $search_text = $_GET ['search_text'];
     }
    if (@mysql_connect('localhost', 'root', 'newpassword')) {
    if (@mysql_select_db('ajax')) {
    $query = "SELECT 'name' FROM 'names' WHERE 'name'  LIKE '".mysql_real_escape_string     ($search_text)."%'" ;
    $query_run = mysql_query($query);
    while ($query_row = mysql_fetch_assoc($query_run)) {
    echo $name = $query_row ['name'].'<br>';
    }
    }
    } 
    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T03:39:38.450

`$query_run`是布尔值`false`，因为`mysql_query()`失败 - 可能是因为您将字段和表名称用单引号`'`而不是反引号括起来```。

如果您检查错误/失败而不是抑制它们或假设成功，这将更加明显。

* * *

*旁注仅供参考：*

考虑使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)代替旧的 mysql 扩展，因为它不再积极开发并且功能较少。

# jboss - 使用 VisualVm 分析本地 JBoss 7 时出错

> ID：11732721
> 
> 赞同：0
> 
> 时间：2012-07-31T03:37:05.127
> 
> 标签：jboss, rmi, visualvm

我正在尝试使用 jdk6 中打包的 visualvm 工具来分析本地 JBoss 7 服务器。我可以将 visualvm 连接到本地 jboss 服务器。但是如果我在 visualvm 的分析器选项卡中启动 CPU 分析，JBoss 服务器会转储很多错误消息，如下所示。

为什么？

```
11:22:38,220 INFO [stdout]（*** Profiler Agent 通信线程） Profiler Agent：等待端口 5140 上的连接（协议版本：9）
11:22:38,320 INFO [stdout]（*** Profiler Agent 特殊执行线程 5） Profiler Agent：与工具建立本地连接
11:22:49,516 错误 [stderr] (server-timer1) 线程“server-timer1”中的异常 java.lang.ClassCircularityError: org/netbeans/lib/profiler/server/ProfilerRuntimeCPUFullInstr
11:22:49,520 错误 [stderr] (server-timer1) at org.jboss.sun.net.httpserver.ServerImpl$ServerTimerTask1.run(ServerImpl.java:895)
11:22:49,524 错误 [stderr] (server-timer1) at java.util.TimerThread.mainLoop(Timer.java:512)
11:22:49,526 错误 [stderr] (server-timer1) at java.util.TimerThread.run(Timer.java:462)
11:22:49,528 错误 [stderr]（RMI TCP 连接（空闲））线程“RMI TCP 连接（空闲）”中的异常 java.lang.ClassCircularityError：org/netbeans/lib/profiler/server/ProfilerRuntimeCPUFullInstr
11:22:49,532 错误 [stderr] (RMI TCP Connection(idle)) 在 org.jboss.logmanager.Logger.isLoggable(Logger.java:153) 的线程“RMI TCP Connection(idle)”中出现异常
11:22:49,535 错误 [stderr] (RMI TCP Connection(idle)) 在 sun.rmi.runtime.Log$LoggerLog.isLoggable(Log.java:206)
11:22:49,538 错误 [stderr] (RMI TCP Connection(idle)) 在 sun.rmi.runtime.Log$LoggerLog.log(Log.java:210)
11:22:49,539 错误 [stderr] (RMI TCP Connection(idle)) 在 sun.rmi.transport.tcp.TCPConnection.close(TCPConnection.java:201) 的线程“RMI TCP Connection(idle)”中出现异常
11:22:49,542 错误 [stderr]（RMI TCP 连接（空闲））在 sun.rmi.transport.tcp.TCPTransport.handleMessages（TCPTransport.java:564）
11:22:49,545 错误 [stderr] (RMI TCP Connection(idle)) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
11:22:49,547 错误 [stderr]（RMI TCP 连接（空闲））在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run（TCPTransport.java:649）
11:22:49,549 错误 [stderr] (RMI TCP Connection(idle)) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
11:22:49,552 错误 [stderr] (RMI TCP Connection(idle)) java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 线程“RMI TCP Connection(idle)”中的异常
11:22:49,556 错误 [stderr] (RMI TCP Connection(idle)) at java.lang.Thread.run(Thread.java:619)
11:22:49,560 错误 [stderr]（RMI TCP 连接（空闲））线程“RMI TCP 连接（空闲）”中的异常 java.lang.ClassCircularityError：org/netbeans/lib/profiler/server/ProfilerRuntimeCPUFullInstr
11:22:49,563 错误 [stderr]（RMI TCP 连接（空闲））线程“RMI TCP 连接（空闲）”异常在 org.jboss.logmanager.Logger.isLoggable 线程“RMI TCP 连接（空闲）”中出现异常（记录器.java:153)
11:22:49,567 错误 [stderr] (RMI TCP Connection(idle)) 在 sun.rmi.runtime.Log$LoggerLog.isLoggable(Log.java:206) 的线程“RMI TCP Connection(idle)”中出现异常
11:22:49,569 错误 [stderr] (RMI TCP Connection(idle)) 在 sun.rmi.runtime.Log$LoggerLog.log(Log.java:210)
11:22:49,572 错误 [stderr]（RMI TCP 连接（空闲））线程“RMI TCP 连接（空闲）”中的异常线程“RMI TCP 连接（空闲）”中的异常线程“RMI TCP 连接（空闲）”中的异常在 sun.rmi.transport.tcp.TCPConnection.close(TCPConnection.java:201)
11:22:49,577 错误 [stderr]（RMI TCP 连接（空闲））在 sun.rmi.transport.tcp.TCPTransport.handleMessages（TCPTransport.java:564）
11:22:49,581 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790) 处的错误 [stderr] (RMI TCP Connection(idle))
11:22:49,584 错误 [stderr] (RMI TCP Connection(idle)) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
11:22:49,588 错误 [stderr] (RMI TCP Connection(idle)) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
11:22:49,592 错误 [stderr] (RMI TCP Connection(idle)) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
11:22:49,595 错误 [stderr] (RMI TCP Connection(idle)) at java.lang.Thread.run(Thread.java:619)
11:22:49,597 错误 [stderr] (RMI TCP Connection(idle)) java.lang.ClassCircularityError: org/netbeans/lib/profiler/server/ProfilerRuntimeCPUFullInstr

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T17:57:31.167

将以下行添加到您`%JBOSS_HOME%/bin/standalone.conf.bat`之前的行`":JAVA_OPTS_SET"`

```
set "JAVA_OPTS=%JAVA_OPTS% -Xshare:off -Djboss.modules.system.pkgs=org.netbeans.lib.profiler.server -Dorg.osgi.framework.bootdelegation=org.netbeans.lib.profiler.server,org.netbeans.lib.profiler.server.*" 
```

或者以任何其他有效的方式添加提到的 java 选项。

# php - PHP mail() 函数的主题行间距

> ID：11732724
> 
> 赞同：0
> 
> 时间：2012-07-31T03:37:26.030
> 
> 标签：php, email

有谁知道如何在使用 php mail() 回显变量和字符串本身之间为主题行放置一个空格？我试过这个

```
$subject = $user_data->first .' '.'recommends a place'; 
```

还有这个

```
$subject = $user_data->first .' recommends a place'; 
```

但是当邮件发送时，它会显示**'Kevinrecommends a place'**。

这是完整的邮件代码：

```
$to = $form_input['email'];
$subject = $user_data->first .'&nbsp; recommends a place on';

$msg = 
    'Hi,'."\r\n".
    "\r\n".
    'You were recommended a place by '.$user_data->first .'.'."\r\n".
    "\r\n".
    'Click the link to see it on **!'."\r\n".
    'www.**.com/'.$token."\r\n".
    "\r\n".
    'Cheers,'
    $from = 'From:noreply@**.com';

mail($to, $subject, $msg, $from); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:01:49.383

这应该有效：

```
$subject = "{$user_data->first} recommends a place"; 
```

注意文本周围的双引号。他们是必要的，以确保`$user_data->first`得到解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:12:01.983

```
$subject = $user_data->first . ' recommends a place'; 
```

这应该工作得很好。现在，我有时会遇到奇怪的 Unicode 字符的问题。你确定`$user_data->first`变量只包含字母吗？

试试这个（不要这样，它会从你的字符串中删除所有非字母字符）：

```
$name = preg_replace('/[^a-zA-Z]/', '', $user_data->first);
$subject = $name . ' recommends a place'; 
```

# c# - 使用 WCF 使用带有自定义 SOAP 标头的 Delphi Web 服务

> ID：11732727
> 
> 赞同：4
> 
> 时间：2012-07-31T03:37:34.937
> 
> 标签：c#, wcf, delphi, soap, wcf-client

我们需要使用 WCF 使用第三方 Web 服务（用 Delphi 编写）。我们遇到的问题是 Delphi 服务是 RPC/Encoded，并且它使用自定义 SOAP Headers。如果我们将以下内容添加到我们的 ServiceContract（处理 RPC 编码）：

```
[XmlSerializerFormat(Style = OperationFormatStyle.Rpc,
    Use = OperationFormatUse.Encoded)] 
```

我们得到一个错误，说这不能与带有标头的 MessageContracts 一起完成。

```
Message *** must not have headers to be used in RPC encoded style 
```

有谁知道解决这个问题的方法？

谢谢

# php - 将字段数据与另一个表进行比较

> ID：11732729
> 
> 赞同：1
> 
> 时间：2012-07-31T03:37:57.767
> 
> 标签：php, mysql

在网上阅读和查找后，我仍然不知道如何解决我的问题。我不可能这样做：

```
$select=mysql_query("select * from products_list categories where id='3'");
while($row=mysql_fetch_array($select)){

echo "whatever fields that I want to display onto the form before category field";

$select=mysql_query("select * from categories ORDER BY id ASC");
while($row=mysql_fetch_array($select)){

echo "compare with the result in categories table and select the option if it's true";

}
} 
```

我对吗？

目前我在数据库 products_list 和类别中有 2 个表。

表 products_list 包含许多字段：ID、代码、价格、类别、状态等...

表类别只有：ID、类别（此表仅包含所有可用的类别选项集）

我有一个更新/编辑表单，我使用 select 语句并从 Table products_list 中获取用户之前保存所有数据的所有结果。

在表单本身的类别部分下是一个多选列表框。

我现在的问题是：

1.  将 Table products_list 中的所有结果显示到更新/编辑表单上
2.  将表格类别中的所有类别选项显示到更新/编辑表单（列表框）
3.  比较用户在表 products_list 中保存的类别并选择列表框上显示的选项（这是第 2 个问题）

我真的需要很多帮助，因为我以前从未这样做过，也不知道在线阅读这些文章或线程会发生什么。希望你们能理解我的问题。提前致谢。

当前更新了编码，但仍然卡住：

```
$result2= mysql_query("SELECT category FROM categories ORDER BY id ");
$all_cat = array();
while($row2 = mysql_fetch_assoc($result2)) { 
    $all_cat[] = $row2['category'];
}

//dropdownlist query
$query="SELECT * from products_list where id='100'";
$result = mysql_query ($query);

//populate the dropdownlist

while($row = mysql_fetch_assoc($result)) { 

  $sel_cats = explode(",", $row['category']);
  //determine if the category is selected
  foreach ($sel_cats as $sel_cat){

  $selected = '';

  if ($sel_cat == $all_cat ){
           $selected =' selected="selected" ';
           break;
        }

  }

    foreach($all_cat as $i => $value)
    {
     echo  '<option value="' . $value. '"' . $selected . '>'.$value.'</option>\n';
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T03:48:44.737

```
// get all product, assuming the saved category is cat column in product_list table
$result2= mysql_query("SELECT * from products_list where id='3'");
$row2 = mysql_fetch_assoc($result2);
$sel_cat =$row2['cat'];

//dropdownlist query
$query="SELECT cat,id FROM categories ORDER BY id ";
$result = mysql_query ($query);

//populate the dropdownlist
while($row = mysql_fetch_assoc($result)) { 
      //determine if the category is selected
      $selected = ($row['id '] == $sel_cat ) ? ' selected="selected" ' : NULL;
      echo  '<option value="' . $row['id']. '"' . $selected . '>'.$row['cat'].'</option>\n';
} 
```

对于以串联字符串格式保存的类别。例如：黑色，白色，红色

```
 // get all product, assuming the saved category is cat column in product_list table
    $result2= mysql_query("SELECT * from products_list where id='3'");
    $row2 = mysql_fetch_assoc($result2);
    $sel_cats = explode(',', $row2['cat']);

    //dropdownlist query
    $query="SELECT cat,id FROM categories ORDER BY id ";
    $result = mysql_query ($query);

    //populate the dropdownlist
    echo '<select name="cat" size="5" multiple="multiple">';
    while($row = mysql_fetch_assoc($result)) { 
          //loop thru the sel_cat
           foreach ($sel_cats as $sel_cat){
          //determine if the category is selected
           $selected = '';
           if ($row['id '] == $sel_cat ){
               $selected =' selected="selected" ';
               break;
           }
          }
          echo  '<option value="' . $row['id']. '"' . $selected . '>'.$row['cat'].'</option>\n';

    }
    echo '</select>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:42:11.400

使用连接 sql 查询，例如，

```
select * from products_list, categories where product_list.id=categories.id ORDER  BY id ASC

 select * from products_list where id=1 ORDER BY id ASC LIMIT 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T03:46:00.663

我不太明白你的问题，但我假设这是一个简单的 Read 语句。

1.  只需使用 PHP echo 将您的查询结果显示为表单。
2.  与 1 号相同
3.  要进行比较，许多方法之一是将您的结果（类别）存储在不同的变量中。假设 $userSelectedCategory 和 $listCategory（数组），然后对 $listCategory 数组项执行循环并将其与 $userSelectedCategory 进行比较。

接下来要做什么完全取决于您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T03:55:47.010

```
$select=mysql_query(" select * from products_list where id='1' ORDER BY id ASC LIMIT 20 ");
while($row=mysql_fetch_array($select)){
$id = $row["id"]; 
echo $id;
} 
```

# jquery - Jquery：具有相同拓扑但行为不同的孩子

> ID：11732734
> 
> 赞同：1
> 
> 时间：2012-07-31T03:39:21.850
> 
> 标签：jquery, button, onload, ready

我正在使用 jquery 在 $(window).load 上使用以下代码初始化一行按钮：

```
$(window).load(function() {
    var numButt = 0;

    randArr = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]

    var Row = $(document.createElement('div')).attr("id", 'row1');
    Row.appendTo(".rows");

    for (;numButt < 22; numButt++){

        var newBut = $(document.createElement('span')).attr("id", 'but' + numButt);
        newBut.html('<input type="button" name="But' + numButt + '" id="case' + (numButt+1) + '" value= ' + randArr[numButt] + '>');
        newBut.appendTo($(".rows").find("#row1"));
        }
    }
 ); 
```

然后，我有这个来处理点击：

```
$(document).ready(function(){

    $(".rows > div > span > input").click(function () {
    alert(this.id);
    });
}); 
```

在脚本块结束后：

```
<div class='rows'>
    <div id='lol'>
        <span>
        <input type = 'button' name = 'test1' id = 'test1' value = 'test1'>
        </span>
        <span>
        <input type = 'button' name = 'test2' id = 'test2' value = 'test2'>
        </span>
    </div>

</div> 
```

所以，从拓扑上看，两个测试按钮和我初始化的 22 个按钮之一应该是相同的。但它只识别我点击两个测试按钮。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:42:32.537

由于其他按钮是动态添加的，因此您必须委托您的事件。您可以使用[`on()`](http://api.jquery.com/on/).

```
$('.rows').on('click', 'input', function () {
    alert(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:56:03.233

哎呀。我以相反的方式阅读了您的问题。无论如何，我怀疑您在 DOM 上创建元素以及可互换地发出 html 标记的方式存在问题。相反，尝试为 20 多个按钮编写所有 html 标记，并一次性发出该标记。像这样： $("#div1").html(buttons.split('')) // 其中buttons是一个字符串数组，用于组成按钮的html。然后你的 .click 应该可以工作，因为我没有看到任何明显的错误。

# list - GHC：Haskell 字符串优化

> ID：11732741
> 
> 赞同：4
> 
> 时间：2012-07-31T03:40:10.943
> 
> 标签：list, haskell, ghc

我知道[`Data.Text`](http://hackage.haskell.org/package/text-0.11.2.2)存储字符串数据的方式比`String = [Char]`. 但是，我在库中看到的许多函数似乎都希望`String`传递给它们。`Char`考虑到指针会比字符串本身占用更多空间，因此 s的链表读取效率似乎非常低。除了列表融合（这可能并不总是可能的），GHC 是否对`[Char]`'s 的存储进行了任何优化，它是否将类似的原则应用于其他列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T04:28:12.950

所有基础库函数都使用`String`而不是更高效的类型的原因是所需的*文本*库`Text`不是基础库的一部分。然而，文本库提供了它自己的各种输入/输出函数的变体。您可以在 中找到它们`Data.Text.IO`。

另请注意，对于高效的 I/O，您通常会使用现代抽象之一，如管道、迭代器或管道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T04:03:35.297

在 GHC 下，在平均情况下，[每个代码点](http://blog.johantibell.com/2011/06/memory-footprints-of-some-common-data.html)`String`使用5 个字。但是，运行时预先分配 ASCII 范围内的字符这一事实减轻了这种情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T09:18:06.817

[这](http://learnyouahaskell.com/input-and-output#bytestrings)是答案。

> **Bytestring**有点像列表，只有每个元素的大小是一个字节（或 8 位）。他们处理懒惰的方式也不同。

# java - 安卓短信应用

> ID：11732745
> 
> 赞同：2
> 
> 时间：2012-07-31T03:40:43.597
> 
> 标签：java, android, sms

我想创建一个用户可以用来给其他人发短信的 android 应用程序。它应该像适用于 android 的 Whatsapp 应用程序或我相信的任何其他短信应用程序一样运行。

我不确定我应该如何创建它。我听说android中有一个短信API，但我不确定这是否会将短信发送到手机的默认短信应用程序，或者是否会将其发送到手机上的同一个应用程序。基本上，我希望该应用程序能够像手机上的默认短信服务一样运行。我想我可以设置一个适当的界面并允许用户将短信输入到编辑文本中，然后单击发送它将被发送到服务器上的数据库，并且接收者的应用程序将连接到服务器并检索消息。

如果有人能指出如何创建此应用程序的正确方向，我将不胜感激，并且是否有任何用于发短信应用程序的示例代码？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:21:15.543

“有短信应用程序的示例代码吗？” 我在网上找到了一些，您可以在 google 代码中下载左侧面板上的 apk 或浏览 github 一个。我真的无法帮助你解决任何其他问题，我是 android 新手。链接：

[免费短信](http://code.google.com/p/smsforfree/)

[易文本](http://code.google.com/p/texteasy/)

code.google.com/p/android-smspopup/

github.com/WhisperSystems/TextSecure

您将不得不复制并粘贴最后两个链接，stackoverflow 只会让我发布两个链接：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:47:26.873

该 `SmsManager`课程允许您从自己的应用程序发送短信。可以在[http://www.mkyong.com/android/how-to-send-sms-message-in-android/找到一个代码示例](http://www.mkyong.com/android/how-to-send-sms-message-in-android/)

编辑：我看到您还想知道如何接收短信。这篇博文[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)可能比我提到的第一篇更有用。它教如何设置广播接收器和解析 PDU。它还教授如何使用模拟器进行测试。这将节省很多钱。我想这是我第一次在 Android 上玩 SMS 时读到的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:02:33.610

发送短信

```
String phoneNo = “xxxxxxxxxx”;
String Message = “Hello Android.”;

SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(phoneNo, null, Message, 
 PendingIntent.getBroadcast( MainActivity.this, 0, new Intent("com.example"), 0),null); 
```

您还需要清单文件中的权限。

```
<uses-permission android:name="android.permission.SEND_SMS" /> 
```

# java - 学习如何设计用户访问控制的资源？

> ID：11732749
> 
> 赞同：2
> 
> 时间：2012-07-31T03:41:54.067
> 
> 标签：java, access-control

我正在做一个需要用户访问控制的java项目，谁能推荐我关于如何设计一个好的用户访问控制系统的文章、书籍或相关的开源项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T08:02:48.500

看看[Apache Syncope 项目](http://syncope.apache.org/)，那里有很多有趣的代码。您可以将它用作您应用程序的 IDM！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T08:12:25.953

您可以尝试将[Spring ACL](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/domain-acls.html)作为成熟的 ACL。这是教程[http://krams915.blogspot.com/2011/01/spring-security-3-full-acl-tutorial.html](http://krams915.blogspot.com/2011/01/spring-security-3-full-acl-tutorial.html)

# hadoop - 哪个进程/任务负责数据块复制？

> ID：11732756
> 
> 赞同：0
> 
> 时间：2012-07-31T03:42:35.577
> 
> 标签：hadoop, mapreduce, hdfs

Hadoop 中的哪个软件进程负责在具有特定复制因子的不同数据节点之间复制数据块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:24:39.130

“NameNode 做出有关块复制的所有决定。它定期接收心跳和块报告”这是 HDFS 架构和设计的细分：http: [//hadoop.apache.org/common/docs/r0.20.2/hdfs_design。 html#Data+Replication](http://hadoop.apache.org/common/docs/r0.20.2/hdfs_design.html#Data+Replication)，尝试查看 hdfs-site.xml 中 dfs.block.replicator.classname 设置的值，以查看指定如何在 HDFS 中放置块的类的名称

# ios - 你如何在 iOS 中提供实时推送通知？

> ID：11732760
> 
> 赞同：1
> 
> 时间：2012-07-31T03:43:41.567
> 
> 标签：ios, apple-push-notifications

我们有一个启用了 APNS 的 XMPP 聊天客户端。每次，其他用户的应用程序处于非活动状态时，我们都会在服务器上触发推送，以提醒其他用户他在应用程序中有未读消息。我们当前的实现是我们有一个队列，将其传递给每分钟运行的 cron 作业，该作业构建有效负载并将其转发到 Apple 服务器。现在的问题是，这花费的时间太长了，因为该应用程序是一个聊天客户端，用户希望他们会立即收到推送通知（当然延迟几秒钟是可以接受的，因为我知道即使是苹果也可能需要一个在发送推送通知时，但根据我的经验，客户端需要几秒钟才能收到它）。

现在我知道 Apple 在请求方面有限制，这与 C2DM（现在称为 GCM）不同，所以这就是为什么我们将它放在队列中，并将其传递给 cron 作业。其他应用程序正在这样做，我真的不知道他们是如何真正接近实时地做到这一点的。

以下是我的一些问题：

*   我们需要改变我们的实现吗？（队列和 cron 作业）。
*   拥有多个提供商是否可以解决问题？如果是，对此有何要求？
*   是否有任何付费服务已经在这样做？有人能说出一些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:12:22.053

看看城市飞艇。[http://urbanairship.com](http://urbanairship.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:59:31.020

关于付费服务，请查看[http://pushwoosh.com](http://pushwoosh.com)，他们将 API 集成作为选项之一。这可能会有所帮助。

# macos - 将第 3 方组件合并到包中

> ID：11732768
> 
> 赞同：1
> 
> 时间：2012-07-31T03:44:56.653
> 
> 标签：macos, installation, osx-gatekeeper

我们从与我们的软件一起分发的合作伙伴供应商处获得驱动程序和实用程序。我们有哪些选择来接收它们，以便它们可以轻松地包含在我们签名的平面包中？

我们宁愿最终减少工作，并尽可能保留原始供应商的签名。我们希望避免提供两个包以获得更流畅的用户体验。平面包和其他可部署的产品档案似乎不方便，因为它们不能包含在另一个平面包中。

编辑：这个应用程序不会通过应用程序商店分发。驱动程序和实用程序需要对系统上的每个人都可用。它可能会通过安装程序安装，除非有一种方法可以通过拖放操作使每个人都可以使用驱动程序和实用程序。

# linux - 从 Linux 创建 Windows 本地帐户，无需在 Windows 服务器上安装 sshd 或 Web 服务

> ID：11732772
> 
> 赞同：1
> 
> 时间：2012-07-31T03:45:11.493
> 
> 标签：linux, perl, wmi

我想写一个在 Linux 上运行的 Perl/Python 问题，它在 Windows 服务器上创建一个本地用户帐户。我发现建议首先在 Windows 服务器上安装 sshd 或 Web 服务。但是，我不想在 Windows 上安装程序，所以服务器是干净的。是否有 Perl 模块或工具包可以在 Windows 上创建用户？

注意：我还尝试了 Linux 的 WMI 客户端 (WMIC)，但我没有找到如何使用 VMI 客户端执行命令。

# selenium - 单击提交清除由 .sendKeys() 填充的最后一个文本字段

> ID：11732777
> 
> 赞同：1
> 
> 时间：2012-07-31T03:46:32.870
> 
> 标签：selenium, webdriver, sendkeys

单击提交后清除最后一个文本字段的位置，这仍然是 WebDriver 中的错误吗？任何解决方法？我需要做的大多数测试都涉及填写和提交表格，所以如果这是一个问题，我可能需要回到 RC ......或者任何人都有一个类似于 selenium 的免费测试工具，并且应该是可靠的？

```
 //Enter class harvested

    //text fields
            WebElement blankyear1 = driver.findElement(By.id("combobox0-text"));
    WebElement blankyear2 = driver.findElement(By.id("combobox1-text"));
            WebElement blankyear3 = driver.findElement(By.id("combobox2-text"));

            blankyear3.sendKeys("Barley");
    blankyear1.sendKeys("Wheat");

    WebDriverWait wait = new WebDriverWait(driver, 5);
    wait.until(ExpectedConditions.elementToBeClickable(By.id("combobox2-text")));
            Thread.sleep(3000);

            //last text field that gets cleared out before or after submit? (not sure)  
    blankyear2.sendKeys("Wheat");
    Thread.sleep(3000);
            //Submit application
    driver.findElement(By.name("preSubmitApplication")).click();
    Thread.sleep(3000); 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:37:24.410

这个线程本来可以更清楚。在我看来，您想在输入搜索后从组合框中选择一个元素。这个问题已经得到解决，并在谷歌搜索中排名第一。

[Selenium WebDriver 选择组合框项目？](https://stackoverflow.com/questions/6924550/selenium-webdriver-to-select-combo-box-item)

# textarea - 向文本区域添加项目符号？

> ID：11732789
> 
> 赞同：6
> 
> 时间：2012-07-31T03:48:15.313
> 
> 标签：textarea, points

有没有办法将项目符号点添加到 HTML 文本区域？

我想添加一个简单的功能，其中为文本区域中的每一行添加一个项目符号点（类似于列表项目符号点）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-31T15:54:03.410

你不能这样做，但还有另一种方法。删除文本区域。

```
'<section id="textarea" contenteditable="true">
<ul>
    <li>List item here</li>
    <li>List item here</li>
    <li>List item here</li>
    <li>List item here</li>
</ul>

</section>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-20T11:15:43.737

我认为，您将无法在文本区域或任何其他 html 输入控件中添加项目符号（即富文本）。

但是您可以通过添加富文本编辑器来实现结果。或需要编写 jquery 来处理事件并显示结果，例如，如果用户只是查看内容，则以 html-css 格式显示，如果用户单击内容，则显示文本区域并允许添加更多文本。

```
<textarea id="banner-message" class="message" style="display:none">
</textarea>

<div id="display" class="message" style="overflow-y:auto">
</div>

var strings = [];
strings.push(
  "first text",
  "second text",
  "third text"
);

var htmlContent='';
var textAreaContent='';
$(document).ready(function(){
    strings.forEach(element => htmlContent += "<li>"+element+"</li>");
    $("#display").html(htmlContent);
    var i=1;
    strings.forEach(function(element){ 
    if(strings.length==i)
        textAreaContent += ">"+ element;
    else
        textAreaContent += ">"+ element+"\n";
    i++;
  });
  $("#banner-message").val(textAreaContent);  
})

$("#display").click(function(){
    $(this).css("display","none");
  $("#banner-message").css("display","");
  var currentText= $("#banner-message").val();
  //currentText+="\n>";
  $("#banner-message").val(currentText);
    $("#banner-message").focus();
});

$("#banner-message").blur(function(){
 var currentText=$("#banner-message").val();
 var plainText=currentText.replace(/>/g, "")
 var splitText=plainText.split("\n");
 console.log(splitText);
    htmlContent='';
    splitText.forEach(element => htmlContent += "<li>"+element+"</li>");
    $("#display").html(htmlContent);

    $(this).css("display","none");
  $("#display").css("display","");
})

$("#banner-message").keyup(function(e) {
   var code = e.keyCode ? e.keyCode : e.which;
   if (code == 13) {  
            var text=$(this).val();
        text+=">";
        $(this).val(text);
     }
   }); 
```

这是一个演示[https://jsfiddle.net/v5unL369/1/](https://jsfiddle.net/v5unL369/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-09T15:40:55.130

## 您可以通过捕获id并减少代码来选择更改功能

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>

    $("#Projectone").focus(function () {
        if (document.getElementById('Projectone').value === '') {
            document.getElementById('Projectone').value += '• ';
        }
    });

    $("#Projectone").keyup(function (event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            document.getElementById('Projectone').value += '• ';
        }
        var txtval = document.getElementById('Projectone').value;
        if (txtval.substr(txtval.length - 1) == '\n') {
            document.getElementById('Projectone').value = txtval.substring(0, txtval.length - 1);
        }
    });
    //Second project
    $("#Projecttwo").focus(function () {
        if (document.getElementById('Projecttwo').value === '') {
            document.getElementById('Projecttwo').value += '• ';
        }
    });

    $("#Projecttwo").keyup(function (event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            document.getElementById('Projecttwo').value += '• ';
        }
        var txtval = document.getElementById('Projecttwo').value;
        if (txtval.substr(txtval.length - 1) == '\n') {
            document.getElementById('Projecttwo').value = txtval.substring(0, txtval.length - 1);
        }
    });

    // third project
    $("#Projectthree").focus(function () {
        if (document.getElementById('Projectthree').value === '') {
            document.getElementById('Projectthree').value += '• ';
        }
    });

    $("#Projectthree").keyup(function (event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            document.getElementById('Projectthree').value += '• ';
        }
        var txtval = document.getElementById('Projectthree').value;
        if (txtval.substr(txtval.length - 1) == '\n') {
            document.getElementById('Projectthree').value = txtval.substring(0, txtval.length - 1);
        }
    });

    // fourth project
    $("#Projectfour").focus(function () {
        if (document.getElementById('Projectfour').value === '') {
            document.getElementById('Projectfour').value += '• ';
        }
    });

    $("#Projectfour").keyup(function (event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13') {
            document.getElementById('Projectfour').value += '• ';
        }
        var txtval = document.getElementById('Projectfour').value;
        if (txtval.substr(txtval.length - 1) == '\n') {
            document.getElementById('Projectfour').value = txtval.substring(0, txtval.length - 1);
        }
    });

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T03:57:16.097

据我所知，你不能。但是，您可以获得所见即所得的编辑器，您可以在其中使用项目符号列表等（如图像、粗体、斜体等）。这些所见即所得的编辑器是完全可定制的，因此您可以只启用您需要的选项。最著名的是：CKEDITOR：[http](http://ckeditor.com/) ://ckeditor.com/ TinyMCE：[http ://www.tinymce.com/](http://www.tinymce.com/)

J.伯努瓦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T22:13:46.270

这很好地完成了这项工作。将 BULLET 设置为您喜欢的任何字符代码。

```
<head>
    <script>
        var CRLF   = 10;
        var BULLET = String.fromCharCode(45);

        function Init() {
            if (txt.addEventListener) txt.addEventListener("input", OnInput, false);
        }

        function OnInput(event) {
            char = event.target.value.substr(-1).charCodeAt(0);
            nowLen = txt.value.length;

            if (nowLen > prevLen.value) {
                if (char == CRLF) txt.value = txt.value + BULLET + " ";
                if (nowLen == 1) txt.value = BULLET + " " + txt.value;
            }
            prevLen.value = nowLen;
        }
    </script>
</head>

<body onload="Init ();">
    <h4>Automatic bullets in a text box</h4>
    <textarea id="txt" rows="15" cols="40"></textarea>
    <input type="hidden" id="prevLen" value="0"/>
</body> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-28T15:52:57.283

只需使用十六进制 unicode 值： \u2022 。因此，您可以通过这种方式将项目符号添加到新行：

`$textarea.val($textarea.val().replace(/\n/g,"\n\u2022").replace(/\r/g,"\r\u2022"))`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-04T06:27:51.253

简单地使用以下字符 ● 作为项目符号：

```
 <textarea rows="6" cols="20">
    &#9679 Item1
    &#9679 Item2
    &#9679 Item3
    &#9679 Item4
    &#9679 Item5
    </textarea> 
```

# c# - 允许用户根据键入的内容在 DataGrid 中显示数据的代码是什么？

> ID：11732791
> 
> 赞同：0
> 
> 时间：2012-07-31T03:48:25.713
> 
> 标签：c#, sql-server, winforms, ado.net

我创建了这个表格：

![在此处输入图像描述](../Images/70aca30e1c3c368d69f57a44cab1baba.png)

这是这种形式的代码源：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using DevExpress.XtraEditors;
using System.Data.SqlClient;

namespace GESTION_DE_STAGE
{
    public partial class RechercheEtablissement : DevExpress.XtraEditors.XtraForm
    {
        private BindingManagerBase db;
        SQL sql = new SQL();
        public RechercheEtablissement()
        {
            InitializeComponent();
        }

        private void RechercheEtablissement_Load(object sender, EventArgs e)
        {
            sql.cn.Open();
            SqlDataAdapter daEtablissement = new SqlDataAdapter("Select * from Etablissement", sql.cn);
            daEtablissement.Fill(sql.ds, "Etablissement");
            db = this.BindingContext[sql.ds.Tables["Etablissement"]];
            id.DataBindings.Add("text", sql.ds.Tables["Etablissement"], "Id_Etablissement");
            nom.DataBindings.Add("text", sql.ds.Tables["Etablissement"], "Nom_Etablissement");
            ville.DataBindings.Add("text", sql.ds.Tables["Etablissement"], "Ville_Etablissement");
            dgv.DataSource = sql.ds.Tables["Etablissement"];
            for(int i=0; i<sql.ds.Tables["Etablissement"].Rows.Count; i++)
                idE.Properties.Items.Add(sql.ds.Tables["Etablissement"].Rows[i][0]);
        }

        private void first_Click(object sender, EventArgs e)
        {
            db.Position = 0;
        }

        private void last_Click(object sender, EventArgs e)
        {
            db.Position = sql.ds.Tables["Etablissement"].Rows.Count - 1;
        }

        private void previous_Click(object sender, EventArgs e)
        {
            db.Position --;
        }

        private void next_Click(object sender, EventArgs e)
        {
            db.Position ++;
        }

        private void idE_SelectedIndexChanged(object sender, EventArgs e)
        {
            //The code to update the DataGridView where ID = the selected Item
        }

        private void nomE_EditValueChanged(object sender, EventArgs e)
        {
            //The code to update the DataGridView where Nom = the String that the user is typing
        }

        private void villeE_EditValueChanged(object sender, EventArgs e)
        {
            //The code to update the DataGridView where Ville = the String that the user is typing
        }
    }
} 
```

我的问题是我想添加一个代码，根据组合框中的所选项目或 Nom 文本字段或 Ville 文本字段中的文本，在 DataGrid 中显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:52:15.810

// 将事件处理方法与 SelectedIndexChanged 事件相关联。

```
this.ComboBox1.SelectedIndexChanged += 
new System.EventHandler(ComboBox1_SelectedIndexChanged);

private void ComboBox1_SelectedIndexChanged(object sender, 
        System.EventArgs e)
{
     show data in the dataGrid
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:55:44.673

是的，这就是我想要的......我已经使用了这段代码，但它不起作用：

```
 private void idE_SelectedIndexChanged(object sender, EventArgs e)
        {
            DataTable dt = sql.ds.Tables["Etablissement"].Clone();
            DataRow drow = sql.ds.Tables["Etablissement"].NewRow();
            sql.s = "Select * from Etablissement where Id_Etablissement = @Id_Etablissement";
            SqlCommand cmd = new SqlCommand(sql.s, sql.cn);
            cmd.Parameters.AddWithValue("@Id_Etablissement", idE.SelectedItem.ToString());
            sql.dr = cmd.ExecuteReader();
            while (sql.dr.Read())
            {
                drow[0] = sql.dr[0];
                drow[1] = sql.dr[1];
                drow[2] = sql.dr[2];
            }
            dt.ImportRow(drow);
            dgv.DataSource = dt;
            sql.dr.Close();
        }
            while (sql.dr.Read())
            {
                drow[0] = sql.dr[0];
                drow[1] = sql.dr[1];
                drow[2] = sql.dr[2];
            }
            dt.ImportRow(drow);
            dgv.DataSource = dt;
            sql.dr.Close();
        } 
```

# python - Python中的机械化-提交后重定向不起作用

> ID：11732792
> 
> 赞同：5
> 
> 时间：2012-07-31T03:48:27.327
> 
> 标签：python, mechanize, mechanize-python

我刚开始在 Python 中使用 mechanize 并且已经遇到了一些问题。我在 StackOverflow 和 Google 上环顾四周，我看到人们说文档很棒，应该很容易让它工作，但我想我不知道如何查找该文档，因为我可以找到的是代码示例，它们并没有真正教我如何做我想做的特定事情。如果有人可以向我指出此类文档，我会很高兴自己阅读并解决我的问题。

对于实际问题，我试图通过在表单中​​发送我的用户名和密码信息来登录网站。当信息正确时，我通常会被重定向，但它在机械化中不起作用。

这是我没有得到的部分，因为如果我在调用提交后立即打印页面的html内容，页面会显示一个变量，表明认证有效。如果我将密码更改为不正确的密码，html 会显示一条消息“凭据无效”，就像我正常浏览网站一样。

这是我如何做的代码示例。请记住，这可能是完全错误的，因为我只是试图应用我在示例中找到的内容：

```
import mechanize
import cookielib

# Start Browser
br = mechanize.Browser()
cj = cookielib.LWPCookieJar()

br.set_cookiejar(cj)

br.set_handle_equiv(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

br.open('http://www.complexejuliequilles.com/')

for l in br.links(url_regex='secure'):
    br.follow_link(l)

br.select_form('form1')

br.form['fldUsername'] = 'myUsername'
br.form['fldPassword'] = 'myPassword'
br.submit() 
```

在这个特定的示例中，我打开[http://www.complexejulieequilles.com](http://www.complexejuliequilles.com)，然后点击底部的链接，其中包含“管理”文本，在表单中输入我的凭据，然后提交。通常，我会被重定向到我所在的第一个页面，但会有更多的按钮只能由管理员使用。我想单击其中一个链接来填写另一个表格，以添加我拥有其电子邮件地址、姓名等的用户列表。

我缺少一些简单的东西吗？我想我掌握了基础知识，但我对库的了解不足以找到重定向出了什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T06:40:39.567

[http://wwwsearch.sourceforge.net/mechanize/documentation.html](http://wwwsearch.sourceforge.net/mechanize/documentation.html)

避免直接使用“_http”。名称中的第一个下划线告诉我们开发人员将其视为私有的，而您可能不需要它。

```
In [20]: mechanize.HTTPRefreshProcessor is mechanize._http.HTTPRefreshProcessor
Out[20]: True 
```

您在打开 URL 之前放置了一些您并不真正需要的东西。例如： mechanize.Browser() 不是 urllib，它已经为您管理 cookie。你不应该避免 robots.txt。通过查看默认处理程序之前，您可以遵循更多“约定优于配置”：

```
mechanize.Browser().handlers 
```

如果没有，您可能在该列表中有 mechanize.HTTPRedirectHandler （我有）：

```
br.set_handle_redirect(mechanize.HTTPRedirectHandler) 
```

for 循环很奇怪，似乎您正在循环内更改其迭代器（打开 URL 内的链接）（浏览器打开另一个 URL）。我首先以为您想在“安全” URL 匹配时递归单击。错误取决于 links() 生成器的实现方式（可能它遵循固定的 br.response() 实例），但我认为您只想遵循第一个匹配的链接：

```
In [50]: br.follow_link(url_regex="secure") # No loops 
```

我不知道你需要什么样的重定向/刷新。JavaScript 改变 window.location.href？如果是这样，mechanize 不会这样做，除非您自己解析 JavaScript。

您可以通过以下方式获取有关上次打开 URL 的“原始”信息：

```
last_response = br.response() # This is returned by br.open(...) too
http_header_dict = last_response.info().dict
html_string_list = last_response.readlines()
html_data = "".join(html_string_list) 
```

即使是 JavaScript，也可以通过在 html_data 中定位、使用 html_data.find()、正则表达式、BeautifulSoup 等来获取重定向 URL。

PEP8 注意：避免使用孤立的“l”（较低的“L”）作为变量，根据使用的字体和上下文，它可能会被错误地视为“one”或“I”（较高的“i”）。您应该改用“L”或其他名称。

# spring - Spring JDBC 和连接对象

> ID：11732793
> 
> 赞同：0
> 
> 时间：2012-07-31T03:48:35.980
> 
> 标签：spring, spring-mvc, spring-data

我正在使用专有 api 构建应用程序。要连接到数据库，我使用返回 Connection 对象的方法，然后在该连接上调用适当的方法来在数据库上运行查询，例如......

```
Connection conn = JdbcServiceFactory.getInstance().getDefaultDatabase().getConnectionManager().getConnection();

PreparedStatement ps = conn.prepareStatement("select * from test"); 
```

如果我选择在下一个项目中使用 Spring MVC 3，我必须做些什么来设置数据库连接？从我在文档中看到的内容来看，我在容器中使用了数据源标记并传递了 URL、用户名和密码。如图所示，我目前不必这样做来获得连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:15:10.930

归根结底，您的专有 API 必须使用某些凭据访问某些数据库（在某些服务器上可用）。你只是没有看到这一点。在 Spring 中，您必须首先定义一些`DataSource`. 要么使用现有的库，如[dbcp](/questions/tagged/dbcp "显示标记为“dbcp”的问题")、[bonecp](/questions/tagged/bonecp "显示标记为“bonecp”的问题")或[c3p0](/questions/tagged/c3p0 "显示标记为“c3p0”的问题") ，要么使用您的应用程序服务器通过[jndi](/questions/tagged/jndi "显示标记为“jndi”的问题")提供的库。只要他们实现`DataSource`接口，您选择哪种方法都没有关系。太多了，无法详细解释每一个。

一旦你`DataSource`设置了 bean，我**强烈推荐**使用[`JdbcTemplate`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)它来简化你的 JDBC 代码，例如：

```
 List<Map<String,Object>> res = jdbcTemplate.queryForList("select * from test"); 
```

...以及更多。

更新：如果您想将现有的遗留 API 与期望的现代框架`DataSource`（几乎所有）一起使用，实现`DataSource`适配器是微不足道的（剩余的方法可以保持未实现，抛出`UnsupportedOperationException`）：

```
public class LegacyDataSourceAdapter implements DataSource {
    @Override
    public Connection getConnection() throws SQLException {
        return JdbcServiceFactory.getInstance().getDefaultDatabase().getConnectionManager().getConnection();
    }

    @Override
    public Connection getConnection(String username, String password) throws SQLException {
        return getConnection();
    }

    //other methods are irrelevant
} 
```

现在只需创建一个实例`LegacyDataSourceAdapter`（可能作为 Spring bean）并将其传递给`JdbcTemplate`Hibernate、myBatis...

* * *

顺便说一句，您在这里有一些糟糕的 API 设计的一流示例：

```
Connection conn = JdbcServiceFactory.
  getInstance().
  getDefaultDatabase().
  getConnectionManager().
  getConnection(); 
```

# c - C中的文字和常量是同一个概念吗？

> ID：11732795
> 
> 赞同：5
> 
> 时间：2012-07-31T03:48:48.850
> 
> 标签：c

C中的文字和常量是同一个概念吗？它们在使用上有什么区别吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T04:07:16.367

*字面*量和*常量*在 C 中是显着不同的东西。可以说，C 中的*字面*量一词代表占用内存的未命名对象（字面量通常是左值），而术语*常量*代表（可能命名的）不一定占用内存的值内存（常量是右值）。

“经典”C (C89/90) 只有一种文字：*字符串文字*。C 中没有其他类型的文字。C99 还引入了所谓的*复合文字*。

同时，术语*常量*指的是显式值，例如`1`、`2.5f`和。此外，枚举成员也被识别为C中的*常量。*`0xA``'s'`

 *同样，由于 C 中的文字是左值，因此您可以获取并使用它们的地址

```
const char *s = "Hello";
char (*p)[6] = &"World";
int (*a)[4] = &(int []) { 1, 2, 3, 4 }; 
```

由于常量是右值，因此您不能获取它们的地址。

用关键字声明的对象在 C 术语`const`中不被视为*常量。*它们不能用于需要常量值的地方（例如大小写标签、位域宽度或全局、静态变量初始化）。

PS 请注意，C 中的相关术语与 C++ 中的术语有很大不同。在 C++ 中，*字面*量一词实际上涵盖了 C 中称为*常量*的大部分内容。而在 C++ 中，`const`对象可以形成常量表达式。人们有时试图将 C++ 术语强加到 C 上，这通常会导致混淆。

（另请参阅[我更喜欢常量而不是定义吗？](https://stackoverflow.com/questions/2308194/shall-i-prefer-constants-over-defines)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T09:13:53.027

The C standard (specifically ISO/IEC 9899, Second edition, 1999-12-01) does not define “literal” by itself, so this is not a specific concept for C. I find three uses of “literal”, described below.

First, a string literal (or “string-literal” in the formal grammar) is a sequence of characters inside quotation marks, optionally prefixed with an “L” (which makes it a wide string literal). This is undoubtedly called a literal because each character in the string stands for itself: A ”b” in the source text results in a “b” in the string. (In contrast the characters “34” in the source text as a number, not a string, result in the value 34 in the program, not in the characters “3” and “4”.) The semantics of these literals are defined in paragraphs 4 and 5 of 6.4.5\. Essentially, adjacent literals are concatened (`"abc" "def"` is made into `"abcdef"`), a zero byte is appended, and the result is used to initialize an array of static storage duration. So a string literal results in an object.

Second, a compound literal is a more complicated construct used to create values for structures. “Compound literal” is an unfortunate name, because it is not a literal at all. That is, the characters in the source text of the literal do not necessarily stand for exactly themselves. In fact, a compound literal is not even a constant. A compound literal can contain expressions that are evaluated at run-time, including function calls!

Third, in 6.1 paragraph 1, the standard indicates that “literal words and character set members” are indicated by bold type. This use of “literal” is describing the standard itself rather than describing things within the C language; it means that “<strong>goto” in the standard means the string “goto” in the C language.

Aside from string literals, I do not think “literal” is a particular concept in C.

”Constant”, however, is a significant concept.

First, there are simple constants, such as “34”, “4.5f”, and “'b'”. The latter is a character constant; although written with a character, it has an integer value. Constants include integer constants (in decimal, octal, and hexadecimal), floating constants (in decimal and hexadecimal), character constants, and enumeration constants. Enumeration constants are names specified in “enum” constructs.

Second, there are constant expressions, defined in 6.6\. A constant expression can be evaluated during translation (compile time) rather than run time and may be used any place that a constant may be. 6.6 sets certain rules for constant expressions. As an example, if `x` is a static array, as declared by `static int x[8];`, then `&x[(int) (6.8 * .5)]` is a constant expression: It is the address of element 3 of x. (You would rarely using floating-point to index arrays, but I include it in the example to show it is allowed as part of a constant expression.)

Regarding “const”: The standard does not appear to specifically define a const-qualified object as constant. Rather, it says that attempting to modify an object defined with a const-qualified type through an lvalue (such as a dereferenced pointer) with non-const-qualified type, the behavior is undefined. This implies a C implementation is not required to enforce the constantness of const objects. (Also, note that having a pointer-to-const does not imply the pointed-to object is const, just that the dereferenced pointer is not a modifiable lvalue. There could be a separate pointer to the same object that is not const-qualified. For example, in `int i; int *p = &i; const int *q = p;`, q is a pointer-to-const-int, but i is not a const object, and p is a pointer to the same int although it is pointer-to-int, without const.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T03:58:52.080

不完全的。常量变量（与宏中定义的常量相反）是具有专用存储空间的实际变量，因此您可以获取它们的地址。您不能获取文字的地址。

编辑：对不起大家，看来我错了。*

# c - 我在通过 C 中的地址传递时无法取平均值

> ID：11732798
> 
> 赞同：1
> 
> 时间：2012-07-31T03:49:18.090
> 
> 标签：c

所以下面是我的代码的主要部分。我正在使用一些外部文件。在函数 3.6 中，我无法取我（在这种情况下）总工资率（pr）和总雇员数（empCount）的平均值。我在这里缺少什么吗？当我编译它时，我收到一个错误，指出操作数无效。当我修复这些时，我的输出为 0。我对编程很陌生，所以在我尝试回答任何问题时请耐心等待。我遇到问题的函数是代码中倒数第二个函数（3.6 AddDetailToAccumulator）。非常感谢。

```
#include <stdio.h>
#include <stdlib.h>
#include "EmployeeRecord.h"
#include "CalcTaxes.o"
#define ADDR(var) &var
#define REPORTCOLUMNHEADINGS1 "Employee           Pay    Reg Hrs  Gross    Fed     SSI     Net\n"
#define REPORTCOLUMNHEADINGS2 "Name               Rate   OVT Hrs  Pay      State   Defr    Pay\n"
#define BARS                  "========           =====  =======  =======  ======  ======  =======\n\n"  
#define REPORTCOLUMN1         "%s, %s\t%8.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n"
#define REPORTCOLUMN2         "%32.2f%18.2f%8.2f\n\n"

void PrintReportHeadings(FILE * ReportFile); //3.1
void InputEmployeeData(int count,char * lastname,char * firstname,float * hours,float * payrate,float * defr); //3.3
float CalculateGross(float hours, float payrate, float reghours, float ovthours); //3.4 CalculateGross
extern void CalculateTaxes(float gross, float defr, float *ft, float *st, float *ssit); //3.5 CalculateTaxes
void AddDetailToAccumulator(int count,int *empCount,float *pr,float *payrate,float *reg,float *reghours,float *ovt,float *ovthours,float *gp,
                                float *gross,float *fedt,float *ft,float *stt,float *st,float *sst,float *ssit,float *def,
                                float *defr,float *np,float *net,float *avgpr);//3.6 AddDetailToAccumulator
void PrintSummaryReport(float pr,float reg,float ovt,float gp,float fedt,float stt,float sst,float def,float np,float *avgpr,float avgreg,float avgovt, 
                        float avggp,float avgfedt,float avgstt,float avgsst,float avgdef,float avgnp,FILE * ReportFile); //3.7

int main()
    {
     EmployeeRecord r; // Call Employee Record Definitions
     float reghours,ovthours; 
     float ft,st,ssit;
     float pr,reg,ovt,gp,fedt,stt,sst,def,np;
     float avgpr,avgreg,avgovt,avggp,avgfedt,avgstt,avgsst,avgdef,avgnp;
     char answer;
     int empCount,count;
     FILE * ReportFile;

     PrintReportHeadings(ReportFile); //Call 3.1 PrintReportHeadings      

     empCount = 0;// count initializations  
     pr = reg = ovt = gp = fedt = stt = def = sst = np = 0;
     avgpr = avgreg = avgovt = avggp = avgfedt = avgstt = avgsst = avgdef = avgnp = 0;
     do
       {
         InputEmployeeData(count,r.firstname,r.lastname,&r.payrate,&r.defr,&r.hours);//Call 3.3 InputEmployeeData   
         if (r.hours > 40)//Check for Overtime Hours
           {
             reghours = 40;
             ovthours = r.hours - 40;
           }
         else {
             reghours = r.hours;
             ovthours = 0;
         }
          r.gross = CalculateGross(r.hours,r.payrate,reghours,ovthours); //3.4 CalculateGross
          CalculateTaxes(r.gross,r.defr,&ft,&st,&ssit);//Call 3.5 CalculateTaxes

          r.net = r.gross - ft - st - ssit;// Calculate Net Earnings

          printf(REPORTCOLUMNHEADINGS1);
          printf(REPORTCOLUMNHEADINGS2);
          printf(BARS); 
          printf(REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
          printf(REPORTCOLUMN2,ovthours,st,r.defr);   
          ReportFile = fopen("report.txt", "a");
          fprintf(ReportFile,REPORTCOLUMN1,r.lastname,r.firstname,r.payrate,reghours,r.gross,ft,ssit,r.net); 
          fprintf(ReportFile,REPORTCOLUMN2,ovthours,st,r.defr); 
          fclose(ReportFile);

          AddDetailToAccumulator(count,&empCount,&pr,&r.payrate,&reg,&reghours,&ovt,&ovthours,&gp,&r.gross,&fedt,&ft,&stt,&st,&sst,&ssit,
                                 &def,&r.defr,&np,&r.net,&avgpr);//3.6

              while (getchar() != '\n');
              printf(" Repeat (Y/N)? : ");
              scanf("%c",ADDR(answer)); 
        } while (answer == 'Y' || answer == 'y');
            printf("\n"); // print one line for spacing         
       printf("\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
       printf("%32.2f%18.2f%8.2f\n",ovt,stt,def); 

       printf("%d",count);

       printf("\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",avgpr,avgreg,avggp,avgfedt,avgstt,avgnp); 
       printf("%32.2f%18.2f%8.2f\n",avgovt,avgsst,avgdef);

       PrintSummaryReport(pr,reg,ovt,gp,fedt,stt,sst,def,np,&avgpr,avgreg,avgovt,
                        avggp,avgfedt,avgstt,avgsst,avgdef,avgnp,ReportFile); //Call 3.7 PrintSummaryReport       

        fflush(stdin);
        getchar();
        return 0;
}

void PrintReportHeadings(FILE * ReportFile) //3.1
{
    ReportFile = fopen("report.txt", "w");
    fprintf(ReportFile,REPORTCOLUMNHEADINGS1);
    fprintf(ReportFile,REPORTCOLUMNHEADINGS2);
    fprintf(ReportFile,BARS);
    fclose(ReportFile);
}

void InputEmployeeData(int count,char * lastname,char * firstname, float * payrate, float * defr, float * hours) //3.3
{
     printf("Enter employee's name: ");  // input section
     scanf("%s%s",firstname,lastname);
     printf("Enter hourly pay rate: ");
     scanf("%f",payrate);
     printf("Enter deferred amount: ");
     scanf("%f",defr);
     printf("Enter hours worked this pay period: ");
     scanf("%f",hours);
}

float CalculateGross(float hours, float payrate, float reghours, float ovthours) // 3.4
{
    return (reghours * payrate)+(ovthours * payrate * 1.5);
}

void AddDetailToAccumulator(int *empCount,float *pr,float *payrate,float *reg,float *reghours,float *ovt,float *ovthours,float *gp,
                                float *gross,float *fedt,float *ft,float *stt,float *st,float *sst,float *ssit,float *def,
                                float *defr,float *np,float *net,float *avgpr)//3.6
{
         empCount = empCount +1;
         *pr = *pr + *payrate;
         *reg = *reg + *reghours;
         *ovt = *ovt + *ovthours;
         *gp = *gp + *gross;
         *fedt = *fedt + *ft; 
         *stt = *stt + *st; 
         *sst = *sst + *ssit;
         *def = *def + *defr;
         *np = *np + *net; 

         *avgpr = *pr / empCount;        
} 

void PrintSummaryReport(float pr,float reg,float ovt,float gp,float fedt,float stt,float sst,float def,float np,float * avgpr,float avgreg,float avgovt, 
                        float avggp,float avgfedt,float avgstt,float avgsst,float avgdef,float avgnp,FILE * ReportFile) //3.7
{
     ReportFile = fopen("report.txt", "a");
     fprintf(ReportFile,"\nTotals %17.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",pr,reg,gp,fedt,sst,np); 
     fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",ovt,stt,def); 
     fprintf(ReportFile,"\nAverages %15.2f%8.2f%10.2f%8.2f%8.2f%9.2f\n",&avgpr,avgreg,avggp,avgfedt,avgsst,avgnp); 
     fprintf(ReportFile,"%32.2f%18.2f%8.2f\n",avgovt,avgstt,avgdef);
     fclose(ReportFile);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T03:53:17.427

您在这里缺少 empcount 变量上的 * ：

> 雇员计数 = 雇员计数 +1；

和这里

> *avgpr = *pr / empCount ;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T04:07:36.267

正如前面的答案所指出的，您缺少`*`操作员。这称为`dereference`运算符。

你在做什么：

```
empCount = empCount +1;
// or
empCount++;     // Same assignment 
```

在这里，您正在执行*指针运算*。这个赋值将指针推进到下一个整数。

你需要做的：

```
(*empcount)++; 
```

取消引用指针将增加指针指向的 *值*。换句话说，如果指针的值具有地址*0x01*，则上面的行将访问内存位置*0x01*处的整数并将其加一。原始代码只会将指针递增到下一个整数（对于 32 位整数将递增到*0x05 ）。*

# javascript - iOS 检测 UIWebView 中的 Flash 内容

> ID：11732801
> 
> 赞同：3
> 
> 时间：2012-07-31T03:49:57.510
> 
> 标签：javascript, ios, flash, uiwebview, swfobject

我需要检测 UIWebView 实例中的页面中是否包含 Flash 对象。我已经检查了[SWFObject 库](http://code.google.com/p/swfobject/)并特别检查了[JavaScript API](http://code.google.com/p/swfobject/wiki/api)，但是没有看到任何可以根据页面中是否存在 Flash 对象为我提供布尔值的方法。有什么我遗漏的东西，还是有另一种方法可以做到这一点？

# winapi - WinRT 有人脸检测 API 吗？

> ID：11732803
> 
> 赞同：2
> 
> 时间：2012-07-31T03:50:02.757
> 
> 标签：winapi, windows-8, windows-runtime, face-detection

我在网上看到有关 Windows 8 支持人脸检测的声明。这是人脸检测还是人脸识别，还是两者兼而有之？（我不太关心识别。）它是否在 WinRT 应用程序和/或 .Net 中可用的 API 中？这个 API 的文档在哪里？（MSDN 和 Google 都给了我到 Windows Phone 7 的链接。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:07:40.153

WinRT 中没有用于此的内置 API。您必须使用 Web 服务来实现此功能或自己构建一个。

# python - Cython 编译器错误

> ID：11732805
> 
> 赞同：1
> 
> 时间：2012-07-31T03:50:13.627
> 
> 标签：python, c, cython

我在一台较旧的计算机上，我正在尝试使用 Cython 来加速我编写的一些 python 代码，但是我无法让 Cython 使用即使是最简单的脚本。

这是我试图通过 Cython 运行的 python 代码，据我所知应该可以工作：

```
def hw():
    print "Hello World"

if __name__ == "__main__":
    hw() 
```

这是我的终端的输出：

```
C:\PyProjects\_cython>python hw.py
Hello World

C:\PyProjects\_cython>cython hw.py

C:\PyProjects\_cython>gcc hw.c
In file included from hw.c:4:
Python.h:8:22: error: pyconfig.h: No such file or directory
hw.c:457: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__Pyx_
PyInt_AsUnsignedLongLong'
hw.c:461: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__Pyx_
PyInt_AsLongLong'
hw.c:465: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__Pyx_
PyInt_AsSignedLongLong'
hw.c: In function '__Pyx_PyUnicode_Equals':
hw.c:826: error: 'Py_UNICODE' undeclared (first use in this function)
hw.c:826: error: (Each undeclared identifier is reported only once
hw.c:826: error: for each function it appears in.)
hw.c:826: error: expected ';' before 'ch1'
hw.c:827: error: expected ';' before 'ch2'
hw.c:828: error: 'ch1' undeclared (first use in this function)
hw.c:828: error: 'ch2' undeclared (first use in this function)
hw.c: At top level:
hw.c:1204: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__Pyx
_PyInt_AsUnsignedLongLong'
hw.c:1274: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__Pyx
_PyInt_AsLongLong'
hw.c:1344: error: expected '=', ',', ';', 'asm' or '__attribute__' before '__Pyx
_PyInt_AsSignedLongLong'
hw.c: In function '__Pyx_InitStrings':
hw.c:1564: warning: assignment makes pointer from integer without a cast
hw.c: In function '__Pyx_PyInt_AsSize_t':
hw.c:1669: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'val'
hw.c:1669: error: 'val' undeclared (first use in this function)
hw.c:1670: error: expected ')' before 'LONG_LONG'
hw.c:1672: error: expected ')' before 'LONG_LONG' 
```

我在使用 32 位 python 2.7 的 Windows 7 64 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T04:05:02.480

看看[文档](http://docs.cython.org/src/quickstart/build.html#building-a-cython-module-using-distutils)。以我的经验，最简单的方法是使用`distutils`它知道传递给编译器所需的所有信息（例如，头文件的位置、重要的库、用于创建合适的共享对象的编译器选项等）而且，毕竟，写`setup.py`文件并不难。如果您不想安装该库，只需`python setup.py build`将共享对象复制到您想要的任何目录中（尽管您可能需要在目录中挖掘一点`build`才能找到它）。

# php - PHP文本框循环

> ID：11732806
> 
> 赞同：0
> 
> 时间：2012-07-31T03:50:24.500
> 
> 标签：php, loops, input, textarea

假设我从 a 获取以下信息`textarea`：

> 编码很酷
> 
> 编程就是编码
> 
> 绿屏

我可以用 bl2br 打印出来，但是我希望它打印出来的样子是这样的：

```
<div class="coding">Coding is cool</div><div class="green"><?php //php query doing the same, but for another textbox ?></div><div class="one-more-class"></div>
<div class="coding">Programming is coding</div><?php //php query doing the same, but for another textbox ?></div><div class="one-more-class"></div>
<div class="coding">Green screens</div><?php //php query doing the same, but for another textbox ?></div><div class="one-more-class"></div> 
```

输入必须来自文本区域，而不是来自单独的文本框。我不会讨论更复杂的 jQuery 实现。说到这，这个没有Javascript——我相信它可以用PHP来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:56:54.093

首先获取条目数组：

```
$ar = explode("\n", $_POST['textarea']); 
```

然后做任何你想做的事

```
echo implode("\n", arrray_map(function($str){
    //query
    return '<div class="coding">'.$str.'</div><div class="green">'.$queryres.'</div><div class="one-more-class"></div>';
}, $ar)); 
```

匿名函数需要 5.3，您可以使用非匿名函数。

手册：

*   [数组映射](http://php.net/array_map)
*   [爆炸](http://php.net/explode)
*   [内爆](http://php.net/implde)

# iphone - ReloadData 不会触发 tableView:numberOfRowsInSection:

> ID：11732809
> 
> 赞同：0
> 
> 时间：2012-07-31T03:50:38.943
> 
> 标签：iphone, ios, uitableview, reloaddata

我只是遇到一个问题，我调用 UITableView reloadData 方法，但什么也没发生。没有调用 tableView:numberOfRowsInSection。

场景是：

表在视图 A（具有 UITableView）中工作正常，然后视图 B 显示并隐藏，在此步骤之后，UITableView reloadData 不再工作。我确定在主 UI 线程中调用了 reloadData 并且数据源已更改。也没有 IBOutlet 连接问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:08:52.773

尝试在 viewWillAppear 中调用 reloadData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:28:07.927

在 [tableView reloadData] 上设置断点；检查您的 tableView 对象是否不为零。

# javascript - 如何检查字符串是否存在于jquery的变量中

> ID：11732815
> 
> 赞同：7
> 
> 时间：2012-07-31T03:50:59.910
> 
> 标签：javascript

我有像这样的变量

`var myVar = "The man is running"`

`pattern = "run"`

我想通过 jquery 检查它是否包含单词“run”

像

```
if($(myVar).(:contains(pattern)))
return true 
```

这可能吗

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-31T04:03:56.283

RegExp 选项...只是因为...RegExp。

```
var pattern = /run/;

//returns true or false...
var exists = pattern.test(myVar);

if (exists) {
  //true statement, do whatever
} else {
  //false statement..do whatever
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T03:53:50.380

您将使用 Javascript 方法`.indexOf()`来执行此操作。如果您尝试测试 DOM 元素的文本是否包含该模式，您可以使用以下命令：

```
if($(myVar).text().indexOf(pattern) != -1)
    return true; 
```

但是，如果变量`myVar`不是选择器字符串，则不应将其包装在 jQuery 函数中。相反，你会使用这个：

```
if(myVar.indexOf(pattern) != -1)
    return true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T03:55:40.880

为此，您不需要 jQuery。只需检查字符串的索引。

`if (myVar.indexOf(pattern) !== -1) { ... }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T03:57:29.570

正则表达式？

```
var hasRun = /run/i.test(myVar) // case insensitive 
```

# android - 检查画布android中线条和圆圈的碰撞

> ID：11732816
> 
> 赞同：4
> 
> 时间：2012-07-31T03:51:24.020
> 
> 标签：android, function, android-canvas, collision, lines

我正在尝试检查直线和圆之间的碰撞，如果圆撞到直线，它会将布尔值更改为真，一旦它没有被触及，它会将其变回假。我正在使用画布和表面视图。

这是我用于检查碰撞的代码，它不起作用并最终出错：

```
@Override
public void run() {
while(runnable)
    {
        if(!holder.getSurface().isValid()){
            continue;
        }
        Canvas mCanvas = holder.lockCanvas();
        update(mCanvas);
        values = new Values(mCanvas);
        createPaints();
        drawBackground(mCanvas);
        drawObjects(mCanvas);
        holder.unlockCanvasAndPost(mCanvas);

    }
} 
```

现在在更新中处理碰撞：

```
private void update(Canvas c) {
    ball.update(c, checkLinesCollision(values.level1, ball.getX(), ball.getY()));
  //takes a canvas, and a boolean
}

boolean checkLinesCollision(float[] f,float x,float y){
    int c = 0;
    for(int i = 0; i < f.length; i+=4){
        float x1 = f[i];
        float y1 = f[i+1];
        float x2 = f[i+2];
        float y2 = f[i+3];

        if (x> x1 && x<x2 && y>y1 && y>y2){

            c++;

        }
    }
        if(c>0){return true;}else{return false;}

} 
```

级别的值

```
 float yLow = c.getHeight()-c.getHeight()/4;

    level1 = new float[]{0,yLow,c.getWidth(),yLow,
                      40,c.getHeight()/2,300,c.getHeight()/2}; 
```

球更新功能：

```
public void update(Canvas c, boolean b) {

    if(b){

        dy=-dy;
        b = false;
    }
    y -= dy;
    dy--; 
} 
```

现在根据logcat，问题出在主要的更新功能上。
我认为我使用了错误的功能，我该怎么做才能修复它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:48:55.680

我找到了解决方案。显然问题出在浮点数组上。在我的应用程序中，我在构造函数中声明了浮点数组。在网上研究了很长时间，重新检查了我的logcat，我发现你不能在构造函数中声明一个数组。我所做的只是将浮点数组移到构造函数之外，一切都很好，即使我找到了解决方案，我也不知道为什么你不能在构造函数中声明它。

# macos - 能否在系统范围内覆盖或插入 OS X 系统调用？

> ID：11732817
> 
> 赞同：2
> 
> 时间：2012-07-31T03:51:28.510
> 
> 标签：macos, system-calls, interposing, library-interposition

在 OS X Lion 下工作，我最近做了一些代码注入工作，以逐个进程插入系统调用。

在此过程中，我学到了很多东西，现在看来，至少出于研究目的，“简单地”插入对某些系统函数的*所有*调用，例如`pwrite`，如果这样的事情是可能的，它会更有意义。

*对于每个*进程对某些系统调用（例如）的*每次*调用，是否可以调用我的代码而不是操作系统？`pwrite`

 *如果是这样，我能知道是什么进程发出了调用吗？

**编辑：**以免有人认为我是恶意软件作者，因为我的问题的性质，我会解释为什么我现在在这里，问我在问什么：

我正在尝试让一个大型、复杂的闭源软件按其应有的方式工作。为什么不等待供应商修复它？两年前，他们开始指责另一个派对，而那个派对则指指点点。这种情况是荒谬的，值得在没有任何一方帮助的情况下尝试克服，因为该软件被电影和视频制作人员使用，他们每小时收取数百美元的费用，因为他们的创意和技术先进的工作，不应该浪费他们的时间与他们的工具搏斗。

到目前为止，我努力的问题是我需要使用代码注入和插入来找到问题的根源*（这就是我上面所说的“研究”）*。一旦我找到问题的根源，解决方案也可能是注入和插入，或者替换动态库，或者一些晦涩的低级系统调优，或者谁知道呢？我正在分析的软件非常庞大，它又利用了其他框架、库和后台任务，其中一些是 OS X 的一部分，还有一些是相关软件包的一部分。逐个组件的代码注入和插入变得有点疯狂，这就是为什么我想监视*系统调用结束时发生的事情*，所以我可以看到，例如，`pwrite`呼叫发起和呼叫的细节。

我希望这种澄清会有所帮助，并且有人可以为我指明正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:16:31.567

您应该查看 DTrace：[http](http://en.wikipedia.org/wiki/DTrace) ://en.wikipedia.org/wiki/DTrace现在它是 OS X 的一部分。对于介入，我认为有几种方法，其中许多可能会受到 Gatekeeper/Code Signing 的阻碍。如果不担心，您可以使用 otool 编辑应用程序链接，使其加载其库的修改版本。对于代码注入，我相信过去人们已经使用输入组件破解了这个......但我真的不知道这是否仍然有效。我猜这不是一个真正的答案。*

# javascript - 使用 JavaScript 模块模式时，私有方法应该放在哪里？

> ID：11732818
> 
> 赞同：4
> 
> 时间：2012-07-31T03:51:33.970
> 
> 标签：javascript

我已经开始在我的一个项目中使用模块模式。据我了解，它是这样的：

```
var obj = (function(foo){
     //Some initialization logic up here.

     //Private methods
     var privateBazz = function(){
         return "I'm known only to this closure!";
     }();

     //Public methods
     return { 
         publicFoo: foo,
         publicBar: function(){
             return foo + privateBazz;
         }
     }
})(); 
```

这在纸上看起来相当不错，在实践中，似乎工作得相当好。顶部的初始化逻辑是直观的，然后是私有方法，然后是公共方法。

不过，我遇到了一个问题。我应该如何从 return 语句的范围之外和 obj 的函数声明范围内调用 publicFoo 或 publicBar？

我目前的解决方案是执行以下操作：

```
var obj = (function(foo){
     //Private methods declared early for use.
     var privateBazz = function(){
         return "I'm known only to this closure!";
     }();

     var privateBar = function(){
         return foo + privateBazz;
     };

     //Some initialization logic up here.
     var dependentOnBar = privateBar();

     //Public methods
     return { 
         publicFoo: foo,
         publicBar: privateBar
     }
})(); 
```

这行得通，但是突然间我的私有变量的声明被放置在我的对象私有属性声明之上。如果我试图让私有函数声明与第一次调用它们的代码一样接近，问题会变得更加严重，所以我只是在顶部声明了我需要的所有私有函数，然后再初始化属性。同样，这可行，但我习惯于让代码尽可能靠近执行点。所以，在顶部声明私有函数块对我来说真的很尴尬。有没有其他人有这种感觉，或者这是我只需要克服 JavaScript 的问题吗？当我看到这种情况发生时，我应该采取什么步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:30:46.207

听起来你可以通过简单地不使用对象表示法来返回模块来解决这个问题，而是初始化它并随时构建它。这将是这样的：

```
var obj = (function(foo){
     var self = {};
     //Some initialization logic up here.

     //Private properties
     var foo = "only accessible within this scope";

     //Private methods
     var privateBazz = function(){
         return "I'm known only to this closure!";
     }();

     //Public Properties
     self.publicFoo = foo;

     //Public Methods
     self.publicBar = function(){
         return foo + privateBazz;
     };

     return self;
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:41:37.900

这是我的解决方案：如果您在返回之前将所有内容声明为“私有”方法并公开您想要公开的内容，那么您可以从公共内部调用您的私人，反之亦然（在您的第一个示例中，您的私人不能打电话给公众，因为他们当时没有被宣布）

```
var obj = (function() {
    // All functions now have direct access to each other
    var privateFunc = function() {
        return "private "+publicFunc1();
    };

    var publicFunc1 = function() {
        return "public 1 ";
    };

    var publicFunc2 = function() {
        return "public 2 "+publicFunc1();
    };

    var publicFunc3 = function() {
        return "public 3 "+privateFunc();
    };

    // Return the object that is assigned to Module
    return {
        publicFunc1: publicFunc1,
        publicFunc3: publicFunc3,
        publicFunc2: publicFunc2
    };
}());

alert(obj.publicFunc3()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:15:56.077

如果您模拟[CommonJS Modules](http://www.commonjs.org/specs/modules/1.0/)，您可以将属性分配给`exports`对象，并通过限定或非限定名称从 IIFE 范围内的其他地方访问它们。

```
(function (exports, undefined) {
    var priv1 = 42;
    exports.pubOne = function () {};
    var localAlias = function () {};
    localAlias(42);
    exports.pubTwo = localAlias;
})(window.App); 
```

在这个例子中，`Window.App`可能是这个模块的命名空间全局对象，但你可以很容易地传入一个空对象或一些深度嵌套的命名空间。

# php - 在 cakePHP 中显示完整的列

> ID：11732819
> 
> 赞同：3
> 
> 时间：2012-07-31T03:51:46.877
> 
> 标签：php, cakephp

我是 cakephp 的新手，我对 SHOW FULL COLUMN 查询感到困惑我已将 debug leel 设置为 2，然后单击一页，它显示 88 个查询（即使数据为 NULL）这里查询：

显示`item_purchase_returns` 10 10 2的完整列

显示`purchases` 20 20 2的完整列

显示`outcomes` 13 13 1的完整列

显示`transaction_categories` 7 7 96的完整列

显示`incomes` 16 16 2的完整列

显示`last_receivables` 14 14 1的完整列

显示来自`last_funds` 7 7 1 ... 等的完整列

我的问题是为什么 cakePHP 这样做？这些查询有用吗？cakePHP 是否在每个页面上调用这些查询？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T03:59:32.387

CakePHP 调用这些查询是为了构建它的数据库表的内部模型。它确实经常在开发模式下调用它们（缓存每 10 秒刷新一次），以防您对数据库进行更改，但如果调试级别设置为生产 (0)，它将假定您没有创建任何数据库更改并且仅每 99 年刷新一次缓存（基本上从不）。因此，如果您希望在生产中更改应用程序的数据库，则必须删除缓存模型`/app/tmp/`或临时更改为开发模式。

# asp.net - 不同 IP 上的不同用户之间不共享静态类成员

> ID：11732820
> 
> 赞同：1
> 
> 时间：2012-07-31T03:51:46.627
> 
> 标签：asp.net, global-asax

我写了一个静态类，并假设在所有会话之间共享它的成员。它适用于在同一台计算机上运行的所有浏览器，但数据不会在来自不同位置的不同用户之间共享。我的网站是用 ASP.NET 编写的

这是我的课

```
public static class GlobalPool
{
    public static List<string> OnlineUsers;
} 
```

我将 Global.asax 中的 OnlineUSers 属性实例化为

```
void Application_Start(object sender, EventArgs e) 
{
    // Code that runs on application startup
    GlobalPool.OnlineUsers = new List<string>(100);
} 
```

每当用户登录我的网站时，我都会添加用户名：

```
public void Login(int aMemberSerial) 
{ 
    User = new MemberDataAccess().Read(aMemberSerial); 
    new MemberDataAccess().Login(User); 
    GlobalPool.OnlineUsers.Add(User.Username); 
    Message = PostBusiness.NewPost(User); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T00:12:15.273

这不是健壮的代码。ASP.NET 应用程序会定期回收（应用程序池），因此您的所有数据都会消失。解决此问题的最佳方法是将列表存储在数据库中，当 Session 过期时，从数据存储中删除该用户。

# sql - 使用 VBA 自动更新/复制 Microsoft Access 中的表

> ID：11732824
> 
> 赞同：2
> 
> 时间：2012-07-31T03:52:13.137
> 
> 标签：sql, ms-access, vba, entity-relationship

再次回来！所以我目前正在尝试在按下按钮后以编程方式更新表格（Table2）。我希望 Table2 与另一个表（Table1）完全相似。我正在进行这项工作，因为 Access 不允许双重关系，我需要创建一个。因此，我将有两个包含所有联系信息的表格。

我尝试删除 Table2，然后创建 Table1 的另一个副本并将其保存为 Table2。如果 Microsoft Access 没有抛出错误，这是可行的，因为我正在删除已建立关系的表。所以我然后尝试以编程方式删除然后创建适当的关系。然而，事实证明这是一项乏味的练习。对我的口味来说有点太乏味了。

我的下一个想法是创建一个附加查询，它会自动查找两个表之间的差异并相应地更新 Table2。问题是我不知道如何为这样的追加查询构造 SQL 语句。还有一种更简单的方法可以使用我缺少的 VBA 来做到这一点吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:01:28.180

没有必要去解决所有这些麻烦。您**可以**在 MS Access 中建立双重关系。只需根据需要将表添加到关系设计窗口中，您将获得 Table1、Table1_1、Table1_2 等，但它们都只是 Table1 的别名。您现在可以根据需要添加自联接和任意数量的关系。

像这样：

```
*People*
PersonID        *People_1*
ManagerID -- >   PersonID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:34:06.543

听起来您可以在不与任何关系发生冲突的情况下追加`Table1`from `Table2`。如果这是真的，您可以清空`Table2`，然后附加 中的所有行`Table1`。

```
Dim cn As Object
Set cn = CurrentProject.Connection
cn.Execute "DELETE FROM Table2" 
```

如果 Table2 包含自动编号字段，请重置其种子值。

```
cn.Execute "ALTER TABLE Table2" & vbCrLf & _
"ALTER COLUMN autonum_fld COUNTER(1, 1)" 
```

然后做追加...

```
cn.Execute _
"INSERT INTO Table2 (autonum_fld, text_field, long_int_field)" & vbCrLf & _
"SELECT autonum_fld, text_field, long_int_field" & vbCrLf & _
"FROM Table1;" 
```

...或者如果两个表结构相同，您甚至不必列出字段名称...

```
cn.Execute "INSERT INTO Table2" & vbCrLf & _ 
"SELECT *" & vbCrLf & _
"FROM Table1;" 
```

最后...

```
Set cn = Nothing 
```

AFAICT，这可以工作。但是，我不了解您的问题的背景细节，例如“*访问不允许双重关系*”。所以我可能完全不合时宜。

# java - 将 HTML 转换为 pptx4j 元素

> ID：11732828
> 
> 赞同：1
> 
> 时间：2012-07-31T03:52:41.910
> 
> 标签：java, html, powerpoint, docx4j

我已经成功实现了使用 docx4j 的 XHTMLImporter 类将 XHMTL 转换为 docx4j (Word) 元素。但是，我现在需要为 pptx4j（Powerpoint）做同样的事情，但是经过*大量*搜索和反复试验，似乎没有任何与 pptx4j 的 XHTMLImporter 对应的东西，也似乎不可能获取 XHTMLImporter 的 docx4j-element 结果并将它们附加到 pptx4j 形状。

有人为pptx4j解决了这个问题吗？和/或，谁能指出我可以用来执行此任务的库或源代码？

谢谢！

卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:26:36.403

**披露：我维护 docx4j**

您必须复制和更改 XHTMLImporter 代码，以便它发出 DrawingML 而不是 WordML。有点乏味，但非常可行。

# javascript - 在哪里放置我的 AJAX 代码

> ID：11732830
> 
> 赞同：0
> 
> 时间：2012-07-31T03:53:01.530
> 
> 标签：javascript, ajax

我实现了一个基于 AJAX 的小应用程序，现在我得到了 500 多行 AJAX 代码。所以我想知道放置此代码的最佳位置在哪里？为了让我的应用程序易于维护。

谢谢你。

J.伯努瓦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T05:50:22.037

您应该创建一个名为 say 的文件`filename.js`并在那里编写您的 ajax 代码，然后将该 js 文件包含到您的 html 页面中。这是正确的方法，每个人都应该这样做，因为它看起来不错且专业

# java - java.lang.Error：未解决的编译：（SpringSecurityCoreGrailsPlugin.groovy:133）

> ID：11732831
> 
> 赞同：1
> 
> 时间：2012-07-31T03:53:01.943
> 
> 标签：java, grails, compilation, spring-security

我只是检查了一个项目，我试图运行它，但它不会。有一个错误导致这个说：

```
java.lang.Error: Unresolved compilation problem: 

at SpringSecurityCoreGrailsPlugin$_closure1.doCall(SpringSecurityCoreGrailsPlugin.groovy:133)
at _GrailsPackage_groovy$_run_closure5_closure19.doCall(_GrailsPackage_groovy:234)
at _GrailsPackage_groovy$_run_closure5_closure19.doCall(_GrailsPackage_groovy)
at _GrailsSettings_groovy$_run_closure10.doCall(_GrailsSettings_groovy:280)
at _GrailsSettings_groovy$_run_closure10.call(_GrailsSettings_groovy)
at _GrailsPackage_groovy$_run_closure5.doCall(_GrailsPackage_groovy:232)
at _GrailsPackage_groovy$_run_closure2.doCall(_GrailsPackage_groovy:168)
at RunApp$_run_closure1.doCall(RunApp.groovy:28)
at gant.Gant$_dispatch_closure5.doCall(Gant.groovy:381)
at gant.Gant$_dispatch_closure7.doCall(Gant.groovy:415)
at gant.Gant$_dispatch_closure7.doCall(Gant.groovy)
at gant.Gant.withBuildListeners(Gant.groovy:427)
at gant.Gant.this$2$withBuildListeners(Gant.groovy)
at gant.Gant$this$2$withBuildListeners.callCurrent(Unknown Source)
at gant.Gant.dispatch(Gant.groovy:415)
at gant.Gant.this$2$dispatch(Gant.groovy)
at gant.Gant.invokeMethod(Gant.groovy)
at gant.Gant.executeTargets(Gant.groovy:590)
at gant.Gant.executeTargets(Gant.groovy:589)
Error executing script RunApp: Unresolved compilation problem: 
```

尝试过的解决方案：由于我不确定是什么原因造成的，我只是检查了项目并没有修改任何内容。我只是尝试了 project>clean、grails-clean、grails-compile、project>refresh 多次。我仔细检查了插件，它已经在安装的项目中。

有什么建议么？

谢谢。

# iphone - 如果我升级我的应用程序版本，是否应该创建一个新的 Flurry 分析应用程序 ID？

> ID：11732832
> 
> 赞同：1
> 
> 时间：2012-07-31T03:53:08.030
> 
> 标签：iphone, flurry

我想在我的应用程序的不同版本中分析用户行为，我应该在 Flurry 分析中创建不同的应用程序 id，如 DemoApp1.0、DemoApp1.1 等，还是 Flurry 分析会自动记录不同的版本？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:11:02.507

不，您不应该创建单独的应用程序 ID，任何分析服务也不会要求您创建单独的 ID。

Havign 相同的 id 可以帮助您查看数字和比较版本等。

（顺便说一句，所有这些都应该在快速常见问题解答中出现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:39:50.530

不，我认为flurry有应用程序的版本管理功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T03:55:29.360

在您的应用程序委托中，在 Flurry startSesstion 调用之前，请尝试：

```
[FlurryAnalytics setAppVersion:@"1.2"]; 
```

# sql-server-2008 - SQL Server 2008：如何通过查询备份数据库

> ID：11732836
> 
> 赞同：0
> 
> 时间：2012-07-31T03:53:44.067
> 
> 标签：sql-server-2008, database-backups

我正在研究 SQL Server，我收到了一个关于创建备份数据库查询的问题。

我知道 SQL Server 2008 具有创建`.bak`文件的功能。

但是，我不确定是否可以为整个数据库生成查询。

在 SQL Server 2008 中，它们是否具有生成查询以备份整个数据库的功能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:58:01.257

您可以自己生成脚本，只需像正常一样设置备份，但不是单击左上角的正常按钮开始，而是有一个脚本选项 ![在此处输入图像描述](../Images/f3b32022205deb794890ea8ad3031dc1.png)

有关更多高级选项，请参见[备份命令](http://msdn.microsoft.com/en-us/library/ms186865.aspx)

# node.js - Socket.IO 确认交付

> ID：11732837
> 
> 赞同：12
> 
> 时间：2012-07-31T03:53:46.030
> 
> 标签：node.js, socket.io

在我深入研究代码之前，有人可以告诉我是否有任何文档可用于在 Socket.IO 中确认交付？

到目前为止，这是我能够收集到的内容：

1.  可以提供回调以在消息被确认时调用
2.  有一种特殊模式“volatile”不保证交付
3.  有一个不是“易失性”的默认模式

这给我留下了一些问题：

1.  如果消息不是易失性的，它是如何处理的？会无限期缓冲吗？
2.  如果无法在合理的时间内传递消息，是否有任何方法可以得到通知？
3.  如果我想放弃，有什么办法可以取消缓冲消息？

对于如何在时间敏感的应用程序中使用 Socket.IO 而不会退回到易失性模式并使用可以提供故障事件和某种程度的可配置性的外部 ACK 层，我有点不知所措。还是我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-11T21:22:18.760

**TL;DR 除非您愿意等到宇宙消亡，否则您无法获得可靠的确认交付。**

* * *

您寻求的交货确认与理论上的[两个将军问题](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)有关，该问题也在[此 SO 答案](https://stackoverflow.com/a/15590367/3367144)中进行了讨论。

*TCP 通过保证无限*重试后的传递来管理可靠性问题。我们生活在一个有限的宇宙中，所以“保证”这个词在理论上是可疑的 :-)

抛开理论不谈，考虑一下：[engine.io](https://github.com/automattic/engine.io)是 socket.io 1.x 的基础，使用以下传输：

*   网络套接字
*   闪存插座
*   XHR 轮询
*   JSONP 轮询

这些传输中的每一个都基于 TCP，而 TCP 是可靠的。因此，只要连接保持连接并且传输不改变，每个单独的 socket.io 消息或事件都应该是可靠的。但是，有两件事情可能会即时发生：

1.  engine.io 可以改变传输
2.  如果底层传输断开连接，socket.io 可以重新连接

那么，当客户端或您的服务器在管道被这样摆弄时喷出一些消息时会发生什么？在[engine.io 协议](https://github.com/automattic/engine.io-protocol)或[socket.io 协议](https://github.com/automattic/socket.io-protocol)（在撰写本文时分别为版本 3 和 4）中都没有说明。

正如您在评论中所建议的那样，实现中有一些确认逻辑。但是，即使是简单的数字通信也没有不重要的行为，所以我**不相信无监督的 socket.io 连接可以可靠地交付**任务或安全关键操作。在可靠交付成为他们协议的一部分并且他们的方法得到独立和正式验证之前，这种情况不会改变。

欢迎您采用我的政策：

*   给我的消息编号
*   有疑问时要求重新发送
*   不要改变我的状态——客户端*或*服务器——除非我知道我已经准备好了

## 简而言之：

有保证的消息传递确认被证明是不可能的，但 TCP在“无限”重试的情况下保证传递*和顺序。*我对 socket.io 消息不太自信，但它们非常强大且易于使用，所以我只是小心使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-19T11:43:29.270

我使用不同的策略确保交付

1.  我使用套接字发送数据，包括消息中的随机数，以防止重复的消息错误
2.  对方发送收到消息的确认或我在 x 秒后重新发送
3.  我每 30 秒使用一次客户端的 REST 调用来请求服务器发送的所有新消息，以捕获传输过程中丢失的任何消息

# matlab - 如何使用 Nvidia Visual Profile 和 Matlab 分析 CUDA

> ID：11732840
> 
> 赞同：3
> 
> 时间：2012-07-31T03:53:51.667
> 
> 标签：matlab, cuda, profiler

我需要从 Matlab 分析我的 CUDA 代码。我一直在将一些 matlab 代码转换为 CUDA 以提高性能。我通过调用调用 CUDA 的 mexFunction 来做到这一点。matlab feval 函数没有提供足够的控制。我可以通过 VS 运行 mexFunction 来调试它，但我也需要调试内核，因为我相信这就是问题所在。

所以，我的问题是如何在执行调用它的 matlab 函数时通过分析器运行 CUDA 代码？

将所有输入的值硬编码到 CUDA 函数中是不切实际的。

我正在使用 Tesla C2050 GPU 卡在 Windows 7 64 位上运行 Matlab 2012a 64 位

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T09:07:08.950

如果您需要的是分析您的性能而不是 nSight 也为您提供的调试功能，您可以使用以下技巧在可视分析器上运行 matlab 程序，而无需使用测试主函数制作 exe：

创建一个批处理文件

```
matlab -nojvm -nodesktop -wait -sd "yourBaseFolder" -r "theMFunctionYouWantToRun;exit;" 
```

然后在 nVidia Visual Profiler 上运行脚本。

我正在使用 feval CUDA API，因此这具有向您展示 Matlab 实际在做什么的额外优势。我想它在使用 MEX 时也应该可以工作，但从未尝试过。让我知道它是否也适用于 MEX 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-07T21:18:51.063

您可以通过以下过程使用 NVIDIA Visual Profiler 分析 Matlab mexfiles，包括 CUDA 代码。

1.  [按照Compiling CUDA mex files with Visual Studio](http://www.orangeowlsolutions.com/archives/498)中的指南编写包含 CUDA 代码的 mexfile 。
2.  **`cudaDeviceReset()`**在你的 mexfunction 末尾添加。
3.  编写您的 Matlab .m 文件 end add**`exit`**在其末尾。
4.  启动**NVIDIA Visual Profiler**。文件 -> 新会话。
5.  文件：添加**Matlab 可执行文件的完整路径**，例如 C:\Program Files\MATLAB\R2012b\bin\win64\MATLAB.exe 。
6.  工作目录：添加**Matlab .m 文件的完整路径**。
7.  参数：**-nojvm -nosplash -r file_name_without_m_extension**。
8.  下一步 -> 完成，就是这样！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T20:32:19.847

NVIDIA Nsight Visual Studio Edition 2.2 应该能够分析您的内核。

1.  夜视 | 新的分析活动
2.  将 Activity Type 设置为 Profile CUDA Process Tree（matlab 可以启动另一个可执行文件）
3.  要运行的实验设置为全部

Nsight Visual Studio CUDA Profiler 有两个特性可以实现这一点：

1.  活动 Profile CUDA Process Tree 将分析 CUDA 进程和已启动进程的所有子进程。这很重要，因为我认为 Matlab 的默认实现是启动 32 位变体，如果在 64 位系统上启动 64 位可执行文件，因此仅启动 Matlab 是不够的。

2.  Nsight 分析器支持应用程序内核重放，它支持在一次应用程序执行中使用相同的输入多次运行内核。

NVIDIA Visual Profiler 通过多次运行应用程序来收集结果。它不支持启动器应用程序。这可以通过直接启动正确版本的 Matlab.exe 来克服。由于应用程序重放机制，如果您可以自动运行 mexFunction，则可以使用 Visual Profiler 进行分析。我没有尝试使用 Visual Profiler 分析 Matlab，但我知道 Nsight 团队过去已经对此进行了测试。

# wcf - 如何通过浏览器 WCF Rest 流 URI

> ID：11732841
> 
> 赞同：0
> 
> 时间：2012-07-31T03:53:55.227
> 
> 标签：wcf, streaming

我有一个 WCF Rest Service，它返回一个托管在 IIS 中的流。这可以通过 .net 客户端应用程序访问，但不能通过 Web 浏览器访问。

我在 web.config 中有以下内容：

```
<bindings>
    <basicHttpBinding>
        <binding name="StreamedHttp" transferMode="StreamedResponse" maxReceivedMessageSize="67108864">
        </binding>
    </basicHttpBinding>
</bindings>
<services>
    <service behaviorConfiguration="SvcMetaData" name="Services.StreamService">
        <endpoint name="stream" binding="basicHttpBinding" bindingConfiguration="StreamedHttp" contract="Services.IStreamDetails" />
        <endpoint name="wsdl" address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
</services> 
```

界面如下：

```
[ServiceContract]
public interface IStreamDetails
{
    [OperationContract]
    [WebGet(UriTemplate = "Items/{itemID}")]
    Stream GetDetails(string itemID);
} 
```

该服务的实现如下：

```
public Stream GetItem (string ItemID)
{
    string filePath= ConfigurationManager.AppSettings["ImagePath"];
    WebOperationContext.Current.OutgoingResponse.ContentType = "image/jpeg";

    return File.OpenRead(filePath);
} 
```

我可以使用以下方式从.Net客户端访问它：

```
ItemService.ItemDetailsClient client = new ItemDetailsClient();
var v = client.GetDetails("test");
v.CopyTo(new FileStream(@".\temp.doc", FileMode.Create, FileAccess.Write)); 
```

当我从网络浏览器调用它时，我得到一个空白网页。WCF 跟踪日志显示以下异常：

```
<ExceptionType>System.ServiceModel.ProtocolException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>There is a problem with the XML that was received from the network. See inner exception for more details.</Message>
<StackTrace>
at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.ProtocolException: There is a problem with the XML that was received from the network. See inner exception for more details. ---&gt; System.Xml.XmlException: The body of the message cannot be read because it is empty.
   --- End of inner exception stack trace ---</ExceptionString>
<InnerException>
<ExceptionType>System.Xml.XmlException, System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The body of the message cannot be read because it is empty.</Message>
<StackTrace>
at System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action callback)
at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()
at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)
at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.Xml.XmlException: The body of the message cannot be read because it is empty.</ExceptionString>
</InnerException> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T07:15:49.607

这是在您本地的 IIS 上吗？

每当我看到该错误时，它都会通过在我的本地 IIS 网络服务器上运行来解决。

# c++ - 返回 STL 容器元素的引用

> ID：11732843
> 
> 赞同：2
> 
> 时间：2012-07-31T03:54:15.313
> 
> 标签：c++, stl, reference, containers

我在[http://developer-resource.blogspot.com.au/2009/01/pros-and-cons-of-reuring-references.html](http://developer-resource.blogspot.com.au/2009/01/pros-and-cons-of-returing-references.html)看到的博客写道：

> 在这个代码库中工作了一段时间后，我相信返回引用是邪恶的，应该像返回指针一样对待，这是避免它。
> 
> 例如，调试一周后出现的问题如下：

```
class Foo {
        std::vector< Bar > m_vec;
      public:
        void insert(Bar& b) { m_vec.push_back(b); }
        Bar const& getById(int id) { return m_vec[id]; }
      } 
```

> 此示例中的问题是客户端正在调用并获取存储在向量中的引用。现在客户插入一堆新元素后会发生什么？向量需要在内部调整大小并猜测所有这些引用会发生什么？就是那里无效。这导致了一个很难找到的错误，该错误只需通过删除 & 即可修复。

我看不出代码有什么问题。我是否误解了通过引用和 STL 容器返回，或者帖子不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T05:04:13.403

问题更容易显示为：

```
std::vector<int> vec;
vec.push_back(1);
const int& ref = vec[0];
vec.push_back(ref); 
```

的内容`vec[1]`未定义。在第二个`push_back`中，是对初始化时`ref`内存中的任何位置的引用。`vec[0]`在 的内部`push_back`，`vector`可能必须重新分配，从而使`ref`所指的内容无效。

* * *

这是一个很大的不便，但幸运的是，这不是一个经常发生的问题。`Foo`人们插入的容器是否与他们`Bar`刚刚通过 ID 找到的容器相同？这对我来说似乎很有趣。每次访问都复制一份似乎是为了解决问题。如果你觉得已经够糟糕了，

```
void insert(const Bar& b)
{
    if ((m_vec.data() <= &b) && (&b < m_vec.data() + m_vec.size()))
    {
        Bar copy(b);
        return insert(copy);
    }
    else
        m_vec.push_back(b);
} 
```

在 C++11 中，这样写会更好`Foo::insert`（假设`Bar`有一个不错的移动构造函数）：

```
void insert(Bar b)
{
    m_vec.emplace_back(std::move(b));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T04:30:16.463

例如，您在向量中有 2 个元素：

`a`和`b`。您返回这些`r1`和的引用`r2`。

现在另一个客户端插入到向量中。由于向量只有两个元素存储存在。它重新分配存储。它复制`a`并在它们之后`b`插入`c`。这会改变 和 的`a`位置`b`。所以引用`r1`和`r2`现在无效并且指向垃圾位置。

如果 getById 方法没有通过引用返回，则会制作一个副本，并且一切都会正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T06:17:50.947

除了其他答案，值得指出的是，这种效果取决于容器类型。例如，对于[向量](http://msdn.microsoft.com/en-us/library/9xd04bzs%28v=vs.71%29.aspx)，我们有：

> 当成员函数必须将向量对象中包含的序列增加到超出其当前存储容量时，就会发生向量重新分配。其他插入和擦除可能会改变序列内的各种存储地址。在所有这些情况下，指向序列更改部分的迭代器或引用都将变为无效。如果没有发生重新分配，则只有插入/删除点之前的迭代器和引用保持有效。

而[列表](http://msdn.microsoft.com/en-us/library/802d66bt%28v=vs.71%29.aspx)由于其存储数据的方式在这方面更为宽松：

> 当成员函数必须插入或删除列表的元素时，就会发生列表重新分配。在所有这些情况下，只有指向受控序列的已擦除部分的迭代器或引用变得无效。

其他容器类型依此类推。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-17T10:22:47.640

来自同一篇文章的评论：

> 这里的问题不是通过引用返回是邪恶的，只是你返回的引用可能变得无效。
> 
> 第 153 页，“C++ 标准库：教程和参考”的第 6.2 节 - Josuttis，内容如下：
> 
> “插入或删除 elmeents 会使引用以下元素的引用、指针和迭代器无效。如果插入导致重新分配，它会使所有引用、迭代器和指针无效”
> 
> 您的代码示例与持有对向量的第一个元素的引用一样邪恶，将 1000 个元素插入向量中，然后尝试使用现有的引用。

# php - 原始 SELECT 查询有效，但不适用于 PHP 代码中插入的变量

> ID：11732847
> 
> 赞同：0
> 
> 时间：2012-07-31T03:54:46.097
> 
> 标签：php, mysql

我的原始 SELECT 查询有效，但不适用于 PHP 代码中插入的变量。

这是我的实际选择查询：

```
SELECT * FROM `program_list`
WHERE
speciality LIKE '%IM%'
AND (stepone2digit <= 78 OR stepone2digit=0)
AND (stepone3digit <= 189 OR stepone3digit=0)
AND (steptwock2digit <= 78 OR steptwock2digit=0)
AND (steptwock3digit <= 189 OR steptwock3digit=0)
AND (steptwocs = 'PASS' OR steptwocs IS NULL)
AND (steponeattempt <= 1 OR steponeattempt=0)
AND (steptwockattempt <= 1 OR steptwockattempt=0)
AND (steptwocsattempt <= 2 OR steptwocsattempt=0)
AND ((USCEImportance = 'MAND' AND USCENoOfMonths<= '3') OR USCEImportance = 'PREF')
AND (yearsfrompassing >= 2 OR yearsfrompassing=0); 
```

这是我在 PHP 中传递它的方式：

```
 $sql = "SELECT * FROM `program_list`
    WHERE
    speciality LIKE '%%s%'
    AND (stepone2digit <= %d OR stepone2digit=0)
    AND (stepone3digit <= %d OR stepone3digit=0)
    AND (steptwock2digit <= %d OR steptwock2digit=0)
    AND (steptwock3digit <= %d OR steptwock3digit=0)
    AND (steptwocs = '%s' OR steptwocs IS NULL)
    AND (steponeattempt <= %d OR steponeattempt=0)
    AND (steptwockattempt <= %d OR steptwockattempt=0)
    AND (steptwocsattempt <= %d OR steptwocsattempt=0)
    AND ((USCEImportance = 'MAND' AND USCENoOfMonths<= '%s') OR USCEImportance = 'PREF')
    AND (yearsfrompassing >= %d OR yearsfrompassing=0) 
```

当我运行原始查询时，它工作正常，但是当我插入变量并从 PHP 运行它时，没有返回任何结果。

我错过了什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:06:27.697

您没有在那里分配“%d”和“%s”（尝试使用 var_dump($sql) 调试您的 $sql）。您应该为此使用 sprintf。例如 ：

```
$sql = sprintf("SELECT * FROM `program_list` WHERE speciality LIKE '%%s%'",$speciality); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:09:00.313

我假设您正在使用`sprintf`实际值替换您的 %s 和 %d 。

问题出在这个代码片段上：

```
speciality LIKE '%%s%' 
```

`%%`将替换为单个`%`，最后一个`%`将返回警告或通知，因为`%'`对 无效`sprintf`。您必须改用该语法：

```
speciality LIKE '%%%s%%' 
```

您的完整查询将是：

```
$sql = "SELECT * FROM `program_list`
WHERE
speciality LIKE '%%%s%%'
AND (stepone2digit <= %d OR stepone2digit=0)
AND (stepone3digit <= %d OR stepone3digit=0)
AND (steptwock2digit <= %d OR steptwock2digit=0)
AND (steptwock3digit <= %d OR steptwock3digit=0)
AND (steptwocs = '%s' OR steptwocs IS NULL)
AND (steponeattempt <= %d OR steponeattempt=0)
AND (steptwockattempt <= %d OR steptwockattempt=0)
AND (steptwocsattempt <= %d OR steptwocsattempt=0)
AND ((USCEImportance = 'MAND' AND USCENoOfMonths<= '%s') OR USCEImportance = 'PREF')
AND (yearsfrompassing >= %d OR yearsfrompassing=0)"; 
```

并且不要忘记用于`sprintf`在查询中插入值。

# forms - 表单提交按钮悬停效果未显示

> ID：11732848
> 
> 赞同：1
> 
> 时间：2012-07-31T03:55:00.433
> 
> 标签：forms, html, css, hover

我有一个表单的提交按钮。我使用精灵作为背景，所以在悬停时，我将背景移动到按钮的宽度上以获得悬停效果。但是，这是行不通的。

这是我的html：

```
<form class="a">
<All the other Fields...>
<p><input type="submit" value="Submit"/><p>
</form> 
```

我的CSS：

```
.a input[type="submit"] {
    margin-top: 15px;
    background: url(btn.png) no-repeat;
    width: 108px;
    height: 42px;
    border: none;
    color: transparent;
    font-size: 0;
}

.a input[type="submit"]:hover {
    background: url(btn.png) no-repeat 109 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:26:11.503

```
.a input[type="submit"]:hover {
    background: url('btn.png') no-repeat 109px 0px; /*use 109px   */
} 
```

**并检查您的背景图像路径。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:20:24.683

背景位置：`for x: %|px|left|center|right`和`for y %|px|top|center|bottom`

它可能是

```
.a input[type="submit"]:hover {
    background: url(btn.png) no-repeat;
    background-position: 109px 0px; // left 109px, top 0px
} 
```

或者

```
.a input[type="submit"]:hover {
    background: url(btn.png) no-repeat 109px 0px;
} 
```

还要确保你的`image`路径是正确的。`css`根据`url(btn.png)`. _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:20:02.287

你`px`在你的位置上失踪了。请参阅[此小提琴](http://jsfiddle.net/5afGb/)以获取工作示例

# java - 在 java 中使用纸质扫描仪需要哪些库？

> ID：11732857
> 
> 赞同：3
> 
> 时间：2012-07-31T03:55:49.243
> 
> 标签：java, netbeans, applet, japplet, image-scanner

我需要在我正在处理的 java 程序中实现扫描软件，我需要哪些库来执行此操作？我听说过 JTwain 和 JSANE。如果我希望将我的软件用于商业用途，我是否需要同时支付这两项费用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T01:35:59.163

JSANE、JTWAIN 和 Morena 是选项。我之所以选择 Morena，是因为它的跨平台兼容性以及同时使用 SANE 和 TWAIN 界面的能力。

# forms - jquery / ajax 表单不传递按钮数据

> ID：11732861
> 
> 赞同：4
> 
> 时间：2012-07-31T03:56:02.680
> 
> 标签：forms, jquery

我认为 HTML 规范规定单击表单中的按钮会传递它们的值，而“未单击”按钮没有被传递。像复选框...我总是检查按钮值，有时我会根据用于提交的按钮进行不同的处理..

我已经开始使用 AJAX（特别是 jquery）来提交我的表单数据 - 但按钮数据从未传递过 - 有什么我遗漏的吗？我能做些什么来传递这些数据吗？

简单的代码可能看起来像这样

```
<form id="frmPost" method="post" action="page.php" class="bbForm" >
<input type="text" name="heading" id="heading" />   
<input type="submit" name="btnA" value="Process It!" />
<input type="submit" name="btnB" value="Re-rout it somewhere Else!" />
</form>
<script>
$( function() { //once the doc has loaded   
//handle the forms
$( '.bbForm' ).live( 'submit', function() { // catch the form's submit event
    $.ajax({ // create an AJAX call...
        data: $( this ).serialize(), // get the form data
        type: $( this ).attr( 'method' ), // GET or POST
        url:  $( this ).attr( 'action' ), // the file to call
        success: function( response ) { // on success..
            $('#ui-tabs-1').html( response );   
        }           
    });
    return false; // cancel original event to prevent form submitting
});
});
</script> 
```

在处理页面上 - 仅出现“标题”字段，无论单击哪个 btnA 或 btnB 都不会出现......

如果不能“修复”，有人可以解释为什么 Ajax 调用不遵循“标准”表单行为吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T06:54:45.423

我发现这是一个有趣的问题，所以我想我会深入研究一下 jquery 源代码和 api 文档。

我的发现：

您的问题与 ajax 调用无关，与`$.serialize()`函数有关。它根本没有编码返回`<input type="submit">`，甚至`<button type="submit">`我都尝试过。有一个正则表达式针对要序列化的表单中的元素集运行，不幸的是它任意排除了提交按钮。

jQuery 源代码（我出于调试目的进行了修改，但一切在语义上仍然完好无损）：

```
serialize: function() {
    var data = jQuery.param( this.serializeArray() );
            return data;
},

serializeArray: function() {
   var elementMap = this.map(function(){
        return this.elements ? jQuery.makeArray( this.elements ) : this;
    });

   var filtered = elementMap.filter(function(){
                    var regexTest1= rselectTextarea.test( this.nodeName );
                    var regexTest2 = rinput.test( this.type ); //input submit will fail here thus never serialized as part of the form
        var output = this.name && !this.disabled &&
            ( this.checked || regexTest2|| regexTest2);
                    return output;
    });

    var output = filtered.map(function( i, elem ){
        var val = jQuery( this ).val();

        return val == null ?
            null :
            jQuery.isArray( val ) ?
                jQuery.map( val, function( val, i ){
                    return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
                }) :
                { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
    }).get();
    return output;
} 
```

现在检查 jQuery 文档，您满足了它的所有要求以按预期运行 (http://api.jquery.com/serialize/)：

> 注意：只有“[成功的控件](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)”被序列化为字符串。由于未使用按钮提交表单，因此没有序列化提交按钮值。**对于要包含在序列化字符串中的表单元素的值，该元素必须具有 name 属性。**来自复选框和单选按钮（“单选”或“复选框”类型的输入）的值仅在它们被选中时才被包括在内。来自文件选择元素的数据未序列化。

“成功的控制链接分支到 W3 规范，您肯定在规范中确定了预期的行为。

**简短的蹩脚回答：我认为它坏了！报告错误修复！！！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T20:12:39.107

我遇到了一个相当不寻常的问题。我正在开发一个项目，并且有两个单独的 php 页面，其中一个页面上的 html 与 php 代码分开，一个是从 php 代码内部回显 html。当我在具有单独 html 代码的那个上使用 .serialize 时，它​​可以正常工作。它在它的 ajax 调用中将我的提交按钮值发送到另一个 php 页面。但是在从 php 脚本回显的 html 中，我尝试做同样的事情并得到完全不同的结果。它将发送表单中的所有其他信息，但不发送提交按钮的值。我需要做的就是发送我是否按下“删除”或“更新”。一世' 我没有寻求帮助（违反了在其他人的帖子上寻求帮助的规则），但我认为此信息可能有助于找出故障发生的位置。我会寻找解决方案，如果我发现任何问题，我会在这里发帖。

# c - 使用malloc分配的内存没有分配，如何？

> ID：11732862
> 
> 赞同：-1
> 
> 时间：2012-07-31T03:56:13.597
> 
> 标签：c

下面是一个简单的代码片段：

```
int main()
{
int *p;
p=(int*)malloc(sizeof(int));//allocate m/y 4 1 int 
printf("P=%p\tQ=%p",p,p+2);
} 
```

在一个示例运行中，它给了我如下输出：

```
P=0x8210008 Q=0x8210010 
```

P的起始地址是-P=0x8210008，下一个字节是0x8210009，下一个字节是0x821000A，下一个字节是0x821000B。所以int的4个字节到此结束。我们没有使用 malloc 分配更多内存。那么 p+2 是如何将我们带到 0x8210010 的，即 P(0x8210008) 之后的 8 个字节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T04:00:18.240

因为它将它视为指针的整数元素偏移量。您已经为单个整数分配了一个数组。当您要求时，`p+2`它与`&p[2]`. 如果你想要从头开始的两个字节，你需要把它转换成`char*`第一个：

```
char *highWordAddr = (char*)p + 2; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T03:59:29.197

C 很乐意让你做任何你喜欢的指针运算。仅仅因为`p+2`看起来像任何其他地址并不意味着它是有效的。事实上，在这种情况下，它不是。

每当您看到指针算术不会超出分配的范围时，请务必小心。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T08:29:42.017

首先，您打印了一个地址这一事实并不意味着在该地址分配了内存。您只是简单地添加了数字并产生了其他数字。

其次，通过加二得到的编号是比基地址大 8 而不是比基地址大 2，因为当你在 C 中将整数添加到指针时，算术是根据指向的元素完成的，而不是内存中的字节（除非指向的元素是字节）。假设你有一个 int 数组，比如说`int x[8]`，并且你有一个指向 的指针`x[3]`。向该指针添加两个会产生一个指向 的指针`x[5]`，而不是指向超出开头的两个字节的指针`x[3]`. 重要的是要记住 C 是一种抽象，而 C 标准指定了该抽象内部发生的情况。在 C 抽象内部，指针运算适用于元素数量，而不是原始内存地址。C 实现（编译器和将 C 代码转换为程序执行的工具）需要对原始内存地址执行任何操作，以实现 C 标准指定的抽象。通常，这意味着编译器在将整数添加到指针时将其乘以元素的大小。所以 2 乘以 4（在 an`int`是 4 个字节的机器上），得到的 8 加到基地址上。

第三，你不能依赖这种行为。C 标准仅为指向数组内对象的指针定义指针算法，包括数组末尾的一个虚构对象。此外，指向单个对象的指针就像一个元素的数组。因此，如果您有一个指向`p`int 的指针，则可以计算`p+0`or `p+1`，因为它们指向数组中的唯一对象 ( `p+0`) 和数组中最后一个元素之外的虚构对象 ( `p+1`)。不允许计算or ，**因为**它们在数组之外。请注意，这不是取消引用指针的问题（尝试在计算的地址读取或写入内存）：即使**只是计算**`p-1``p+2`**该地址会导致 C 标准未定义的行为：您的程序可能会崩溃，它可能会给您“正确”的结果，或者它可能会删除您帐户中的所有文件，并且所有这些行为都符合 C 标准.**

 **仅仅计算越界地址不太可能产生这种奇怪的行为。但是，该标准允许这样做，因为某些计算机处理器具有不寻常的地址方案，需要比简单的算术更多的工作。可能仅次于平面地址空间的第二常见地址方案是基地址和偏移量方案。在这种方案中，四字节指针的高 16 位可能包含一个基地址，而低 16 位可能包含一个偏移量。对于给定的基地址 b 和偏移量 o，对应的虚拟地址可能是 4096*b+o。（这样的方案只能解决 2 ^(20)字节，并且基数和偏移量的许多不同值可以引用相同的地址。例如，基数 0 和偏移量 4096 与基数 1 和偏移量 0 引用相同的地址。）使用基数和偏移量方案，编译器可以通过仅添加到偏移量并忽略基数来实现指针运算。（这样的 C 实现最多只能支持 65536 字节的数组，该范围仅可通过偏移量寻址。）在这样的实现中，如果您有指向 int`p`且编码为 0x0000fffc（基数 0，偏移量 65532）的指针，并且`int`是四个字节，那么`p+2`将具有值 0x00000004，而不是大于 8 的值 (0x00010004)。

这是一个示例，其中指针运算会产生您不会从平面地址机器中获得的值。很难想象根据 C 标准无效的指针算法会导致崩溃的实现。但是，考虑一个内存必须由进程手动交换的实现，因为处理器没有支持虚拟内存的硬件。在这样的实现中，指针可能包含内存中结构的地址，这些地址描述了磁盘位置和用于管理内存交换的其他信息。在这样的实现中，执行指针运算可能需要读取内存中的结构，因此执行无效指针运算可能会读取无效地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T03:59:13.170

这称为指针算术。[http://www.learncpp.com/cpp-tutorial/68-pointers-arrays-and-pointer-arithmetic/](http://www.learncpp.com/cpp-tutorial/68-pointers-arrays-and-pointer-arithmetic/)**

# sql - 如何在执行存储过程中使用变量作为参数？

> ID：11732866
> 
> 赞同：1
> 
> 时间：2012-07-31T03:56:35.540
> 
> 标签：sql, sql-server, stored-procedures

我已经声明并设置了一些变量。然后我想将该变量值用作执行存储过程的参数。但我总是出错

> 必须声明标量变量。

这是我的变量：

```
--declare variables for parameter @listweek
declare @tgl_other varchar(50);

--set variables for parameter @listweekset 
set @tgl_other = (select top 1 ltrim(rtrim(cast(numweek as char)))+'-('+rangeweek+')' from tbl_weeklyflash where year(dates) = year(getdate()) order by numweek desc);

--the variable values should be like this 30-(01-03-2012 - 08-03-2012) 
--and this value that I want to use as parameter value in executing stored procedure 
```

这是正在执行的存储过程：

```
insert into my_table (field1, field2, field3)
EXEC my_store_procedure @tgl_other
-- the parameter for my_store_procedure is like '30-(01-03-2012 - 08-03-2012)' 
```

是我的变量不正确吗？或者我错误地使用变量作为参数？

更新：

如果我执行这个查询：

```
declare @tgl_other varchar(50);
set @tgl_other = (select top 1 ltrim(rtrim(cast(numweek as char)))+'-('+rangeweek+')' from tbl_weeklyflash where year(dates) = year(getdate()) order by numweek desc);
EXEC my_store_procedure @tgl_other 
```

它工作正常，但如果我添加`INSERT INTO..`语句它将不起作用。为什么会发生？

更新二：这是我尝试运行的整个查询

```
declare @tgl_other varchar(50);
set @tgl_other = (select top 1 ltrim(rtrim(cast(numweek as char)))+'-('+rangeweek+')' from tbl_weeklyflash where year(dates) = year(getdate()) order by numweek desc);
TRUNCATE TABLE mytable
GO
INSERT INTO mytable (field1, field2)    
EXEC my_store_procedure @tgl_other
GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T07:16:35.683

`GO`您在声明变量和调用执行存储过程之间是否有某个地方？变量仅在其范围内可见 - 当您在那里有一个 GO 时，它会终止前一个批次/范围并开始一个新批次 - 在那个新批次/范围内，变量不再可见/声明..

所以试试这个：

```
declare @tgl_other varchar(50);

set @tgl_other = (select top 1 ltrim(rtrim(cast(numweek as char)))+'-('+rangeweek+')' from tbl_weeklyflash where year(dates) = year(getdate()) order by numweek desc);

TRUNCATE TABLE mytable

-- GO     remove this GO to make it work!

INSERT INTO mytable (field1, field2)    
EXEC my_store_procedure @tgl_other
GO 
```

# arduino - 如何使用 Arduino 在一定距离上打开 LED

> ID：11732868
> 
> 赞同：0
> 
> 时间：2012-07-31T03:56:46.620
> 
> 标签：arduino, ping, led

我正在制作一个 Arduino 程序，但我无法让它工作。

该程序所做的只是在有人距离传感器 5 英寸时打开[LED 。](http://en.wikipedia.org/wiki/Light-emitting_diode)问题是每当我启动程序时，LED 无论如何都会保持关闭状态。这是我的程序

```
const int pingPin =7 ;
const int ledPin = 13;

void setup() {
    Serial.begin(9600);
    pinMode(ledPin, OUTPUT);
}

void loop() {
    long duration, inches, cm;

    pinMode(pingPin,OUTPUT);
    digitalWrite(pingPin,LOW);
    delayMicroseconds(2);
    digitalWrite(pingPin,HIGH);
    delayMicroseconds(5);
    digitalWrite(pingPin,LOW);

    pinMode(pingPin,INPUT);
    duration =pulseIn(pingPin,HIGH);

    inches = microsecondsToInches(duration);
    cm = microsecondsToCentimeters(duration);

    Serial.print(inches);
    Serial.print("in, ");
    Serial.print(cm);
    Serial.print("cm");
    Serial.println();
    delay(100);

    while (true) {
        if (inches <= 5) {
            digitalWrite(ledPin, HIGH);
        }
        else {
            digitalWrite(ledPin, LOW);
        }
    }
}

long microsecondsToInches(long microseconds)
{
    return microseconds /74/2;
}

long microsecondsToCentimeters(long microseconds)
{
    return microseconds /29/2;
} 
```

我该如何解决这个问题，以便 LED 在正确的距离处打开和关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:12:25.473

仔细看看你的代码的最后一点：

```
while (true) {
  if (inches <= 5) {
    digitalWrite(ledPin, HIGH);
  } else {
    digitalWrite(ledPin, LOW);
  }
} 
```

你看它在做什么？它永远循环。

所以......你的 var`inches`得到一个值，然后永远（或直到你拔掉）这个值将保持不变..

摆脱 ，`while()`您应该会看到一些响应（假设其他所有内容都正确连接）。

# iphone - NSMutableArray在iphone应用程序中的NSLog时不显示实际值

> ID：11732871
> 
> 赞同：0
> 
> 时间：2012-07-31T03:56:54.943
> 
> 标签：iphone, nsarray

我正在做一个数组的 NSLog，但它显示的不是数据，而是以下值。我不知道如何解决这个问题并从数组中获取值

```
 if(!surveyQuestions){

    surveyQuestions=[[NSMutableArray alloc]init];

  }

Total Survey Questions 3
2012-07-31 08:54:53.555 SQL[442:9203] SurveyQuestions (
"<QuestionData: 0x4da10f0>",
"<QuestionData: 0x4b9f120>",
"<QuestionData: 0x4ba42e0>"
 ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:02:10.217

我不确定您要做什么，但是：可以肯定的是，可怜的数组对象不知道您自己的自定义类做什么和如何做，打印您的类的实例的最佳可能性是调用它的描述方法，你看到的，这并没有真正的帮助。你可能想做两件事：

I. 如果你只想像这样打印你的对象，覆盖你的类的描述方法并使用一些格式字符串（鉴于你没有写一行代码，我不得不回过头来猜测）：

```
- (NSString *)description
{
    return [NSString stringWithFormat:@"Name: %@, address: %@", self.name, self.address];
} 
```

二、如果您想在其他地方使用您的类的数据，您可能需要手动循环其属性：

```
for (QuestionData *d in surveyQuestions)
{
    NSLog(@"%@", d.name);
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:03:20.190

你需要做这样的事情：

```
NSArray *theArray = [[NSArray alloc] initWith...];
NSLog(@"array contents: %@", theArray); 
```

# android - Android 如何同时调用相机或图库意图

> ID：11732872
> 
> 赞同：37
> 
> 时间：2012-07-31T03:57:13.017
> 
> 标签：android

如果我想从本机相机捕获图像，我可以这样做：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
        startActivityForResult(intent, IMAGE_CAPTURE); 
```

如果我想从图库中获取图像，我可以这样做：

```
Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(Intent.createChooser(intent,
                        "Select Picture"), SELECT_PICTURE); 
```

我想知道如何将上述两者放在一起。
这意味着从图库或捕获照片中获取图像 ![选择一个动作](../Images/f205d0a7411a8e629c3bc44dc61c6a12.png)

有没有示例代码可以做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-31T04:06:37.720

`Camera`如果您想从或`Gallery`一起拍照，请查看以下链接。同样的问题也发布在这里。

[从android中的画廊和相机中捕获图像](https://stackoverflow.com/questions/9092532/capturing-image-from-gallery-camera-in-android)

**更新代码：**

检查下面的代码，在此代码中与您想要进入列表视图的代码不同，但它在对话框中提供了从图库或相机中选择图像的选项。

```
public class UploadImageActivity extends Activity {
ImageView img_logo;
protected static final int CAMERA_REQUEST = 0;
protected static final int GALLERY_PICTURE = 1;
private Intent pictureActionIntent = null;
Bitmap bitmap;

    String selectedImagePath;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    img_logo= (ImageView) findViewById(R.id.imageView1);
    img_logo.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            startDialog();
        }

    });
}

private void startDialog() {
    AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(
            getActivity());
    myAlertDialog.setTitle("Upload Pictures Option");
    myAlertDialog.setMessage("How do you want to set your picture?");

    myAlertDialog.setPositiveButton("Gallery",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) {
                    Intent pictureActionIntent = null;

                    pictureActionIntent = new Intent(
                            Intent.ACTION_PICK,
                            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                     startActivityForResult(
                            pictureActionIntent,
                            GALLERY_PICTURE);

                }
            });

    myAlertDialog.setNegativeButton("Camera",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) {

                    Intent intent = new Intent(
                            MediaStore.ACTION_IMAGE_CAPTURE);
                    File f = new File(android.os.Environment
                            .getExternalStorageDirectory(), "temp.jpg");
                    intent.putExtra(MediaStore.EXTRA_OUTPUT,
                            Uri.fromFile(f));

                     startActivityForResult(intent,
                            CAMERA_REQUEST);

                }
            });
    myAlertDialog.show();
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    bitmap = null;
    selectedImagePath = null;

    if (resultCode == RESULT_OK && requestCode == CAMERA_REQUEST) {

        File f = new File(Environment.getExternalStorageDirectory()
                .toString());
        for (File temp : f.listFiles()) {
            if (temp.getName().equals("temp.jpg")) {
                f = temp;
                break;
            }
        }

        if (!f.exists()) {

            Toast.makeText(getBaseContext(),

            "Error while capturing image", Toast.LENGTH_LONG)

            .show();

            return;

        }

        try {

            bitmap = BitmapFactory.decodeFile(f.getAbsolutePath());

            bitmap = Bitmap.createScaledBitmap(bitmap, 400, 400, true);

            int rotate = 0;
            try {
                ExifInterface exif = new ExifInterface(f.getAbsolutePath());
                int orientation = exif.getAttributeInt(
                        ExifInterface.TAG_ORIENTATION,
                        ExifInterface.ORIENTATION_NORMAL);

                switch (orientation) {
                case ExifInterface.ORIENTATION_ROTATE_270:
                    rotate = 270;
                    break;
                case ExifInterface.ORIENTATION_ROTATE_180:
                    rotate = 180;
                    break;
                case ExifInterface.ORIENTATION_ROTATE_90:
                    rotate = 90;
                    break;
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            Matrix matrix = new Matrix();
            matrix.postRotate(rotate);
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(),
                    bitmap.getHeight(), matrix, true);

            img_logo.setImageBitmap(bitmap);
            //storeImageTosdCard(bitmap);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } else if (resultCode == RESULT_OK && requestCode == GALLERY_PICTURE) {
        if (data != null) {

            Uri selectedImage = data.getData();
            String[] filePath = { MediaStore.Images.Media.DATA };
            Cursor c = getContentResolver().query(selectedImage, filePath,
                    null, null, null);
            c.moveToFirst();
            int columnIndex = c.getColumnIndex(filePath[0]);
            selectedImagePath = c.getString(columnIndex);
            c.close();

            if (selectedImagePath != null) {
                txt_image_path.setText(selectedImagePath);
            }

            bitmap = BitmapFactory.decodeFile(selectedImagePath); // load
            // preview image
            bitmap = Bitmap.createScaledBitmap(bitmap, 400, 400, false);

            img_logo.setImageBitmap(bitmap);

        } else {
            Toast.makeText(getApplicationContext(), "Cancelled",
                    Toast.LENGTH_SHORT).show();
        }
    }

}

} 
```

还添加权限：

```
<uses-permission android:name="android.permission.CAMERA" />

 <uses-feature
    android:name="android.hardware.camera.autofocus"
    android:required="false" />
<uses-feature
    android:name="android.hardware.camera"
    android:required="false" /> 
```

将图像存储到 SD 卡：

```
private void storeImageTosdCard(Bitmap processedBitmap) {
    try {
        // TODO Auto-generated method stub

        OutputStream output;
        // Find the SD Card path
        File filepath = Environment.getExternalStorageDirectory();
        // Create a new folder in SD Card
        File dir = new File(filepath.getAbsolutePath() + "/appName/");
        dir.mkdirs();

        String imge_name = "appName" + System.currentTimeMillis()
                + ".jpg";
        // Create a name for the saved image
        File file = new File(dir, imge_name);
        if (file.exists()) {
            file.delete();
            file.createNewFile();
        } else {
            file.createNewFile();

        }

        try {

            output = new FileOutputStream(file);

            // Compress into png format image from 0% - 100%
            processedBitmap
                    .compress(Bitmap.CompressFormat.PNG, 100, output);
            output.flush();
            output.close();

            int file_size = Integer
                    .parseInt(String.valueOf(file.length() / 1024));
            System.out.println("size ===>>> " + file_size);
            System.out.println("file.length() ===>>> " + file.length());

            selectedImagePath = file.getAbsolutePath();

        }

        catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-07-06T09:12:47.973

假设您有两个意图。一个会打开相机，一个会打开画廊。我将在示例代码中调用这些cameraIntent 和gallerIntent。您可以使用意图选择器将这两者结合起来：

**科特林**：

```
val chooser = Intent.createChooser(galleryIntent, "Some text here")
chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, arrayOf(cameraIntent))
startActivityForResult(chooser, requestCode) 
```

**爪哇**：

```
Intent chooser = Intent.createChooser(galleryIntent, "Some text here");
chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Intent[] { cameraIntent });
startActivityForResult(chooser, requestCode); 
```

正如您所问的，这就是如何将两者放在一起（无需制作自己的 UI/对话框）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-13T12:37:43.427

如果要显示手机中安装的所有可以处理照片的应用程序，例如相机、图库、Dropbox 等。

您可以执行以下操作：

1.- 询问所有可用的意图：

```
 Intent camIntent = new Intent("android.media.action.IMAGE_CAPTURE");
    Intent gallIntent=new Intent(Intent.ACTION_GET_CONTENT);
    gallIntent.setType("image/*"); 

    // look for available intents
    List<ResolveInfo> info=new ArrayList<ResolveInfo>();
    List<Intent> yourIntentsList = new ArrayList<Intent>();
    PackageManager packageManager = context.getPackageManager();
    List<ResolveInfo> listCam = packageManager.queryIntentActivities(camIntent, 0);
    for (ResolveInfo res : listCam) {
        final Intent finalIntent = new Intent(camIntent);
        finalIntent.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
        yourIntentsList.add(finalIntent);
        info.add(res);
    }
    List<ResolveInfo> listGall = packageManager.queryIntentActivities(gallIntent, 0);
    for (ResolveInfo res : listGall) {
        final Intent finalIntent = new Intent(gallIntent);
        finalIntent.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
        yourIntentsList.add(finalIntent);
        info.add(res);
    } 
```

2.- 显示带有项目列表的自定义对话框：

```
 AlertDialog.Builder dialog = new AlertDialog.Builder(context);
    dialog.setTitle(context.getResources().getString(R.string.select_an_action));
    dialog.setAdapter(buildAdapter(context, activitiesInfo),
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {
                    Intent intent = intents.get(id);
                    context.startActivityForResult(intent,1);
                }
            });

    dialog.setNeutralButton(context.getResources().getString(R.string.cancel),
            new android.content.DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            });
    dialog.show(); 
```

这是一个完整的例子：[https ://gist.github.com/felixgborrego/7943560](https://gist.github.com/felixgborrego/7943560)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-11T16:06:09.487

我想我以前遇到过你的情况。一个想法是，我们将创建一个带有可选项目的单项列表警报对话框，并且每个项目将执行由您自己的意图定义的独特功能。如果您想要项目列表中每个元素的图标，则需要做更多的工作。希望它会有所帮助。

```
 String title = "Open Photo";
    CharSequence[] itemlist ={"Take a Photo",
                  "Pick from Gallery",
                  "Open from File"};

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setIcon(R.drawable.icon_app);
    builder.setTitle(title);
    builder.setItems(itemlist, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            switch (which) {
            case 0:// Take Photo
                // Do Take Photo task here
                break;
            case 1:// Choose Existing Photo
                // Do Pick Photo task here
                break;
            case 2:// Choose Existing File
                // Do Pick file here
                break;
            default:
                break;
            }
        }
    });
    AlertDialog alert = builder.create();
    alert.setCancelable(true);
    alert.show(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-13T01:33:35.127

实际上，您的对话框标题是“选择一个动作”，这意味着该对话框实际上是一个 Intent 选择器。不是用户自定义的对话框。每一个项目都代表一个意图。

```
public void click(View view) {
        File file = getExternalFilesDir(Environment.DIRECTORY_DCIM);
        Uri cameraOutputUri = Uri.fromFile(file);
        Intent intent = getPickIntent(cameraOutputUri);
        startActivityForResult(intent, -1);
    }

    private Intent getPickIntent(Uri cameraOutputUri) {
        final List<Intent> intents = new ArrayList<Intent>();

        if (true) {
            intents.add(new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI));
        }

        if (true) {
            setCameraIntents(intents, cameraOutputUri);
        }

        if (intents.isEmpty()) return null;
        Intent result = Intent.createChooser(intents.remove(0), null);
        if (!intents.isEmpty()) {
            result.putExtra(Intent.EXTRA_INITIAL_INTENTS, intents.toArray(new Parcelable[] {}));
        }
        return result;

    }

    private void setCameraIntents(List<Intent> cameraIntents, Uri output) {
        final Intent captureIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        final PackageManager packageManager = getPackageManager();
        final List<ResolveInfo> listCam = packageManager.queryIntentActivities(captureIntent, 0);
        for (ResolveInfo res : listCam) {
            final String packageName = res.activityInfo.packageName;
            final Intent intent = new Intent(captureIntent);
            intent.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
            intent.setPackage(packageName);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, output);
            cameraIntents.add(intent);
        }
    } 
```

如果在 OS >= 23 上运行，您可能需要自己解决权限

这是我的演示：（由于操作系统不同，外观差异）
[![在此处输入图像描述](../Images/a99f83083eae514993d16b1108b22dd1.png)](https://i.stack.imgur.com/g8lY6.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T04:06:05.427

在您的 XML 布局中创建一个按钮并添加属性`android:onClick="takeAPicture"` ，然后在您的主活动中从该属性创建一个具有相同名称的方法`onClick`。

```
public void takeAPicture(View view){
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
        startActivityForResult(intent, IMAGE_CAPTURE);
} 
```

当您想从图库中获取图像时，只需执行另一种方法：

```
public void getImageFromGallery(View view) {
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent,
                    "Select Picture"), SELECT_PICTURE);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-11T11:11:53.490

```
public static Intent getPickImageIntent(Context context) {
    Intent chooserIntent = null;

    List<Intent> intentList = new ArrayList<>();

    Intent pickIntent = new Intent(Intent.ACTION_PICK,
            android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    Intent takePhotoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    takePhotoIntent.putExtra("return-data", true);
    takePhotoIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(getTempFile(context)));
    intentList = addIntentsToList(context, intentList, pickIntent);
    intentList = addIntentsToList(context, intentList, takePhotoIntent);

    if (intentList.size() > 0) {
        chooserIntent = Intent.createChooser(intentList.remove(intentList.size() - 1),
                context.getString(R.string.pick_image_intent_text));
        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentList.toArray(new Parcelable[]{}));
    }

    return chooserIntent;
}

private static List<Intent> addIntentsToList(Context context, List<Intent> list, Intent intent) {
    List<ResolveInfo> resInfo = context.getPackageManager().queryIntentActivities(intent, 0);
    for (ResolveInfo resolveInfo : resInfo) {
        String packageName = resolveInfo.activityInfo.packageName;
        Intent targetedIntent = new Intent(intent);
        targetedIntent.setPackage(packageName);
        list.add(targetedIntent);
    }
    return list;
}
```

# android - 出现对话框后未选中 ListView 内的 RadioButton

> ID：11732874
> 
> 赞同：2
> 
> 时间：2012-07-31T03:57:17.753
> 
> 标签：android, android-listview, radio-button, android-alertdialog

我已经对每个项目上包含 RadioButton 的自定义 ListView 进行了分段。当 Dialog 打开时，已选中（选中）的 RadioButton 变为未选中（未选中）。我不知道什么可能导致这种情况发生......

这是我的代码清单。

```
ArrayList<Item> items = new ArrayList<Item>();
private EntryAdapter adapter;
private SharedPreferences preference;
private int usernameKe;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    preference = getSharedPreferences("preference", Context.MODE_PRIVATE);

    items.add(new SectionItem("Pengaturan PIN"));
    items.add(new EntryItem("Ubah PIN",
            "Masukkan PIN Anda yang baru di sini"));

    items.add(new SectionItem("Pilihan Nomor Tujuan Pengiriman"));
    items.add(new EntryItem("IM3", "085741222225"));
    items.add(new EntryItem("AS", "082372423333"));
    items.add(new EntryItem("XL", "081915348000"));
    items.add(new EntryItem("3", "08986903333"));

    items.add(new SectionItem("Pengelolaan User ID"));
    items.add(new EntryItem("Tambah ID", "Masukkan User ID baru"));
    int jumlahUsername = Integer.parseInt(preference.getString(
            "jumlah_userid", "0"));
    if (jumlahUsername >= 1) {
        for (int i = 1; i <= jumlahUsername; i++) {
            String nilaiDitampilkan = preference.getString("u" + i, "");
            items.add(new EntryItem(nilaiDitampilkan, ""));
        }
    }
    // Toast.makeText(this, jumlahUsername + "", Toast.LENGTH_SHORT).show();

    int nomorTerpilih = preference.getInt("nomor", 0);

    adapter = new EntryAdapter(QuickPrefsActivity.this, this, items,
            nomorTerpilih);
    setListAdapter(adapter);
}

@Override
protected void onListItemClick(ListView l, View v, int selectedPosition,
        long id) {

    if (!items.get(selectedPosition).isSection()) {
        RadioButton radioButton = (RadioButton) v
                .findViewById(selectedPosition);

        ((MyApplication) getApplication())
                .setSomeVariable(selectedPosition);
        Editor editorPage = preference.edit();
        editorPage.putInt("nomor", selectedPosition);
        editorPage.commit();

        switch (selectedPosition) {
        case 1:
            showDialog(0);
            break;
        case 3:
            radioButton.setChecked(true);
            break;
        case 4:
            radioButton.setChecked(true);
            break;
        case 5:
            radioButton.setChecked(true);
            break;
        case 6:
            radioButton.setChecked(true);
            break;
        case 8:
            showDialog(1);
        }
        adapter.notifyDataSetInvalidated();
    }
    super.onListItemClick(l, v, selectedPosition, id);
}

@Override
protected Dialog onCreateDialog(int id) {
    Dialog dialog = null;
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final View layout = inflater.inflate(R.layout.ubah_pin_dialog,
            (ViewGroup) findViewById(R.id.ubahPinLayout));
    final TextView textView = (TextView) layout
            .findViewById(R.id.upahPinTextView);
    textView.setGravity(Gravity.CENTER);
    final EditText editText = (EditText) layout
            .findViewById(R.id.pinEditText);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setView(layout);
    if (id == 0) {
        String pin = preference.getString("PIN", "");
        textView.setText("Masukkan PIN Anda yang baru di sini");
        editText.setText(pin);
        editText.setInputType(InputType.TYPE_CLASS_NUMBER);
        builder.setTitle("Ubah PIN");
        builder.setPositiveButton("Ubah",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        String pinDisimpan = editText.getText().toString();
                        if (pinDisimpan.length() == 4) {
                            SharedPreferences pinPreference = getSharedPreferences(
                                    "preference", Context.MODE_PRIVATE);
                            Editor editorPage = pinPreference.edit();
                            editorPage.putString("PIN",
                                    pinDisimpan.toString());
                            editorPage.commit();
                        } else {
                            Toast.makeText(getApplicationContext(),
                                    "GAGAL: PIN tidak valid",
                                    Toast.LENGTH_SHORT).show();
                        }
                    }
                });
        builder.setNegativeButton("Batal",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                    }
                });
        final AlertDialog pinDialog = builder.create();
        dialog = pinDialog;
    } else {
        textView.setText("Masukkan username Anda yang baru di sini");
        editText.setText("");
        builder.setView(layout);
        builder.setTitle("User ID");
        builder.setPositiveButton("Tambah",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        usernameKe = items.size() - 8;
                        String size = String.valueOf(usernameKe);
                        String nilaiDisimpan = editText.getText()
                                .toString();
                        preference = getSharedPreferences("preference",
                                Context.MODE_PRIVATE);
                        Editor editorPage = preference.edit();
                        editorPage.putString("u" + size, nilaiDisimpan);
                        editorPage.putString("jumlah_userid", size);
                        editorPage.commit();

                        Toast.makeText(getApplicationContext(),
                                Integer.parseInt(size) + "",
                                Toast.LENGTH_SHORT).show();
                        items.add(new EntryItem(nilaiDisimpan, ""));
                        adapter.notifyDataSetChanged();
                    }
                });
        builder.setNegativeButton("Batal",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                    }
                });
        final AlertDialog pinDialog = builder.create();
        dialog = pinDialog;
    }
    return dialog;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:24:51.497

在此代码中，您仅在演员 1 和 8 的两种情况下显示对话框。但在这两种情况下您没有更改单选按钮的选择。所以`radioButton.setChecked(true);`也打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T05:53:26.950

好的，我想我知道解决方案。这是因为我将 notifyDataSetInvalidate 放在 switch 案例（listView 项目）之外。它适用于所有情况。因此，代码应如下更改。

```
switch (selectedPosition) {
    case 1:
        showDialog(0);
        break;
    case 3:
        radioButton.setChecked(true);
    adapter.notifyDataSetInvalidated();
        break;
    case 4:
        radioButton.setChecked(true);
    adapter.notifyDataSetInvalidated();
        break;
    case 5:
        radioButton.setChecked(true);
    adapter.notifyDataSetInvalidated();
        break;
    case 6:
        radioButton.setChecked(true);
    adapter.notifyDataSetInvalidated();
        break;
    case 8:
        showDialog(1);
    } 
```

# ruby-on-rails - 从目录打开 Vim 时如何自动“设置路径”？

> ID：11732876
> 
> 赞同：0
> 
> 时间：2012-07-31T03:57:35.683
> 
> 标签：ruby-on-rails, macos, vim, macvim

我试图让`:A`（例如在控制器和规范之间切换）在 vim-rails 中工作。如果我导航到我的 rails 项目，运行`vim .`，打开控制器文件并运行`:A`，我会收到错误消息：

```
E345: Can't find file "app/controllers/widgets_controller.rb" in path 
```

如果我然后明确设置路径：

```
:set path=/Users/me/Documents/Code/my-project 
```

然后`:A`按预期工作。当我用 Vim 打开一个目录时如何设置路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:05:45.143

不完全是在打开目录时：由于您似乎正在处理项目，请尝试使用[项目插件。](http://www.vim.org/scripts/script.php?script_id=69)

使用它，您可以在进入或离开项目时执行任意命令。

从插件描述：

> 您可以使用此插件的基本功能来设置经常访问的文件列表以便于导航。文件列表将显示在 Vim 窗口左侧的窗口中，您可以按或双击列表中的文件名打开文件。这类似于我使用的一些 IDE 的工作方式。我发现这比使用文件浏览器导航目录层次结构更容易使用。它还消除了对缓冲区资源管理器的需要，因为您的文件列表位于 Vim 窗口的左侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-29T16:34:30.463

这就是我为每个项目创建一个本地 .vimrc 文件所做的工作：

*   在我的 ~/.vimrc 文件中，我定义了以下内容：

```
let s:project_root = finddir('.git/..', expand('%:p:h').';')
let s:local_vimrc = join([s:project_root, '.vimrc'], '/')

if filereadable(s:local_vimrc)
    exec "source " . s:local_vimrc
endif 
```

*   在项目根目录（通常有一个 .git 目录）中，我执行以下操作：

```
touch /path/to/project/.vimrc 
```

*   在 .vimrc 文件中，我预先添加了路径变量（注意 ^path）。使用 :set path^= 而不是 :set path+= 会将新目录添加到路径的开头，而不是将其附加到末尾。这使得 find 命令可以更快地搜索您的文件。

```
let s:project_root = finddir('.git/..', expand('%:p:h').';')
exec 'setlocal path^='.s:project_root

setlocal wildmode=longest,list,full
setlocal wildmenu
setlocal tags=/path/to/project/root/tags 
```

现在 :find 命令应该只显示相对于项目根目录的文件和目录。

# c# - 无法从数据网格视图中删除数据

> ID：11732885
> 
> 赞同：0
> 
> 时间：2012-07-31T03:59:11.417
> 
> 标签：c#, linq, datagridview

我遇到了一个问题，当用户从数据网格视图中选择 id 并单击“删除”按钮时，错误提示我们如下：“输入字符串的格式不正确”。

下面是代码，让你们更好地理解代码。

```
private void btnDel_Click(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            int ID = Int32.Parse(lblID.Text);
            var DeleteSL = (from delLS in Setupctx.locationstations
                           where delLS.locationstationID == ID
                           select delLS).Single();
            Setupctx.DeleteObject(DeleteSL);
            Setupctx.SaveChanges();
            this.Delete_LS_Load(null, EventArgs.Empty);
            MessageBox.Show("Selected Location Station Has Been Deleted.");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:02:44.623

您收到此异常*“输入字符串的格式不正确。”* 上

```
int ID = Int32.Parse(lblID.Text); 
```

您`lblID.Text`持有一些无法转换为数字的东西。可能是包含字符和数字的东西。

尝试使用[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)看看是否可以将文本转换为数字。

```
int ID;
if(!int.TryParse(lblID.Text, out ID))
{
   Console.WriteLine("Invalid Number in lblID.Text");
} 
```

# php - yii 如何显示带有验证失败消息的自定义错误消息

> ID：11732887
> 
> 赞同：3
> 
> 时间：2012-07-31T03:59:24.313
> 
> 标签：php, yii

我想用规则验证失败错误消息显示我的自定义错误消息。我该怎么做？

这组来自控制器的味精

```
$expire_date_error = '<p>Please enter the company license expire date more than notification days</p>
                    <ul>
                    <li>Expire Date is less than notificaion days on current date.</li>
                    </ul>';
                Yii::app()->user->setFlash('expire_date_error',$expire_date_error); 

        $this->render('create',array(
            'model'=>$model, 
```

这从视图中获取味精。

```
<?php if(Yii::app()->user->hasFlash('expire_date_error')):?>
        <div class="errorMessage">
            <?php echo Yii::app()->user->getFlash('expire_date_error'); ?>
        </div>
    <?php endif; ?> 
```

[我使用了来自http://www.yiiframework.com/wiki/21/how-to-work-with-flash-messages/](http://www.yiiframework.com/wiki/21/how-to-work-with-flash-messages/)的一些代码

问候 ========================++++++++++++++++++++++++++ +++++++===========================

更新问题。

这是我的控制器

```
public function actionCreate()
    {
        $model=new CompanyLicense;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['CompanyLicense']))
        {
            $currentTime = date('Y-m-d h:i:s', time());     

            $model->attributes= $_POST['CompanyLicense'];
            $model->created = $currentTime; 
            $model->active = 1; 

            $model->expire_date= $_POST['CompanyLicense']['expire_date'];

            if($model->checkExpireDate())
            {
                $model->file_name=CUploadedFile::getInstance($model,'file_name');
                $folder = Yii::getPathOfAlias('webroot').'/images/';
                if($model->save())
                {
                    mkdir($folder.$model->id);
                    $model->file_name->saveAs($folder. $model->id . "/" . $model->file_name);
                    $this->redirect(array('view','id'=>$model->id));
                }
            }else{
                //echo 'debug';
                $expire_date_error = '<p>Please enter the company license expire date more than notification days</p>
                    <ul>
                    <li>Expire Date is less than notificaion days on current date.</li>
                    </ul>';
                Yii::app()->user->setFlash('expire_date_error',$expire_date_error); 
            }
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    }
public function checkExpireDate($attribute='',$params ='')
    {
        $currentTime = date('Y-m-d', time());
        $currentTime = date('Y-m-d', strtotime($currentTime . '+ ' . $this->notification_days.' days'));
        if ($currentTime > $this->expire_date) 
            return false;

        return true;
            //$this->addError($this->expire_date,'should be more ' . $this->notification_days . ' days on current date!');
    } 
```

我想用其他验证失败的错误消息来显示这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:09:38.877

请阅读这个

[http://www.yiiframework.com/wiki/1/how-to-customize-the-error-message-of-a-validation-rule/](http://www.yiiframework.com/wiki/1/how-to-customize-the-error-message-of-a-validation-rule/)

或尝试

```
class Post extends CActiveRecord
{
    public function rules()
    {
        return array(
            array('title, content', 'required',
                  'message'=>'Please enter a value for {attribute}.'),
            // ... other rules
        );
    }
} 
```

在上面，自定义的错误消息包含一个预定义的占位符 {attribute}。CRequiredValidator（需要其别名）将用未通过验证的实际属性名称替换此占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:42:55.837

如果您使用自定义验证功能，则：

```
 class Post extends CActiveRecord
 {
     public function rules()
     {
         return array(
             array('expire_date_error', 'check'),
         );
     }

     public function check()
     {
         if($this->a > $this->b) {
             $this->addError('expire_date_error', 'New custom error message');
             return false;
         }

         return true;
     }
 } 
```

# javascript - Javascript 滑动事件，同时保持浏览器捏合功能

> ID：11732890
> 
> 赞同：4
> 
> 时间：2012-07-31T03:59:33.500
> 
> 标签：javascript, jquery, mobile-safari, swipe

我希望在移动 Web 应用程序（Android 和 iOS）上使用滑动事件，但我还需要浏览器本机捏合缩放功能以保持原位。

我曾尝试使用各种触摸事件库，例如 Hammer.js，但在处理滑动时似乎都放弃了移动 Safari 的捏缩放功能。保持垂直滚动不变也很好。

基本上，我正在寻找一种识别左/右方向滑动的方法，仅此而已。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T06:27:30.487

我在最近的一个项目中使用了与此类似的功能。要使捏合缩放功能起作用，您只需要确保正确指定视口标签中的值，例如。

```
<meta name=viewport content="width=device-width,user-scalable=yes,initial-scale=1.0, maximum-scale=2.0"/> 
```

最重要的值是 user-scalable=yes 和最大比例，因为它必须大于 1.0 才能允许缩放。

您可以在此处找到有关视口的更多信息：[https ://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

对于滑动事件，您可以将 swipeleft 和 swiperight 事件绑定到 jQuery Mobile 中的 .on() 函数。

这是您的代码应如下所示的示例：

```
$('#yourElement').on('swipeleft swiperight', function (event) {
    //swiped to the left
    if (event.type == "swipeleft") {
        //do something
    }
    //swiped to the right
    if (event.type == "swiperight") {
       //do something
    }
}); 
```

有关 jQuery Mobile 事件的更多信息，您可以查看此链接（或上面提供的链接 m_gol，因为它们基本相同）：

[http://jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

使用上面的两组代码，您将能够检测滑动事件以及捏合以缩放页面。

# java - Java中的线程安全

> ID：11732892
> 
> 赞同：2
> 
> 时间：2012-07-31T03:59:45.540
> 
> 标签：java, multithreading, thread-safety

因此，在处理存在锁定问题的事情时，我遇到了一个问题。只能从单个线程访问的对象是否需要锁或同步？

例如，给定 Thread1、Thread2 和 Thread3，以及 Buffer1、Buffer2、Buffer3，其中每个缓冲区在创建线程时被实例化，这意味着 Thread1 只会访问 Buffer1，对于 Thread2 和 Buffer2 以及 Thread3 也是如此和缓冲区 3。Thread1 永远不会触及 Buffer2 或 Buffer3。在流中添加/删除/修改字节时，是否需要锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:11:59.627

不，在这种情况下您不需要任何锁。只有在多个线程之间共享任何资源时才需要锁定和同步。

如果您继续在该缓冲区的私有实例上添加同步，那么它仍然不会有任何区别，因为不会有线程等待获取锁，唯一锁定和释放缓冲区的将是所有者线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:02:57.720

只有当两个或更多线程需要访问共享对象时，您才需要担心锁定问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T04:06:45.357

不会。这种确保线程安全的策略通常称为限制。

限制依赖于封装技术来确保多个线程不能访问一个对象。Doug Lea 的“Java 中的并发编程”一章很好地介绍了限制的细节及其与其他排除技术相比的优缺点。

套用 Lea 的话说，一般来说，在方法 m 中将引用 r 限制到对象 x 需要 4 个条件：

1.  m 不能将 r 作为参数传递给另一个方法。
2.  m 不能将 r 作为返回值传递。
3.  m 不能在可从另一个线程访问的字段（实例或静态）中记录 r。
4.  m 不能让任何其他可能被遍历到 r 的引用逃逸（通过 1-3）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T04:27:51.613

**1.**当**多个线程试图访问一个对象时，锁定就变得必要了。**

**2.此外，****如果可以通过线程进行并发访问**，则开发时的类需要是线程安全的。

 ****3.**一个类被称为线程安全的，如果它在底层操作系统的交错和调度存在下表现正确，而没有来自客户端的任何同步机制。

**4\. 锁定资源**会导致**开销，阻止并发访问和瓶颈情况。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T04:06:19.343

根据我在学习中的记忆，如果您为每个线程使用私有缓冲区，则不必担心锁定它以避免并发访问，因为您没有任何线程。

如果除了创建者之外没有人在读取缓冲区，它可以在上面做他想做的任何事情，而不必担心其他人正在读取或写入它。所以你应该没事

但是你必须记住，一个线程可以随时被中断，所以你的内部缓冲区可能处于不一致的状态。（这应该不是问题，因为您只能从同一个线程按顺序访问）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T04:08:41.593

除非线程同时使用相同的数据结构，否则不需要锁。

因此，如果每个线程使用不同的数据结构，则可以保证您的代码是线程安全的。

`java.util.ArrayList`顺便说一句，这就是关键的 Java 集合类（如不是线程安全的）的主要原因之一：使它们成为线程安全的会增加性能开销，如果不需要，则不必为此付出代价，而且在很多情况*下*在某些情况下您不需要它，因为您可以通过其他方式确保一次只有一个线程访问 ArrayList。**

# android - APK 可以通过 JNI 发送命令来运行 dhcpcd 吗？

> ID：11732898
> 
> 赞同：0
> 
> 时间：2012-07-31T04:01:06.710
> 
> 标签：android, java-native-interface

我编写了一个 android 程序 mydhcp 来发送运行 dhcpcd 的命令（android 默认 dhcp 程序）：

```
dhcpcd eth0 
```

我写了一个 apk 来接收 BOOT_COMPLETED 动作。当收到 BOOT_COMPLETED 时，它会调用我的共享库 (JNI) libmydhcp.so 来控制 mydhcp。所有进程都运行成功，但 dhcpcd 启动失败。

在我的 apk 的 AndroidManifest.xml 中已经设置了与系统 uid 相同的 uid：

```
android:sharedUserId="android.uid.system" 
```

和其他用途 - 许可：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

崩溃点在 main()，它在 external/dhcpcd/dhcpcd.c

```
pidfd = open(pidfile, O_WRONLY | O_CREAT | O_NONBLOCK, 0664); 
```

如何修改来解决这个问题？或者这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:55:04.577

根据您上面的评论，以 root 身份运行命令：

```
public void RunAsRoot(String[] cmds){
        Process p = Runtime.getRuntime().exec("su");
        DataOutputStream os = new DataOutputStream(p.getOutputStream());            
        for (String tmpCmd : cmds) {
                os.writeBytes(tmpCmd+"\n");
        }           
        os.writeBytes("exit\n");  
        os.flush();
} 
```

# javascript - 返回javascript数组不起作用

> ID：11732900
> 
> 赞同：2
> 
> 时间：2012-07-31T04:01:13.853
> 
> 标签：javascript, function, multidimensional-array, return

我有一个从 PHP 获取一些 JSON 的 javascript 函数。当我得到 JSON 时，我的计划是解析它并将其加载到一个数组中，然后返回该数组，以便我可以在任何地方使用数据。

这是ajax函数：

```
function get_ajax(route_val){

$.ajax({
            url: "ajax.php",
            dataType: 'json',
            data: { 
                route: route_val
        },
            success: function(result) {
                if(result.error == true){
                    alert(result.message);
                }else{

                    $.each(result, function(key1, value1){

                        //console.log(key1 + ":" + value1);

                        returnarray[key1] = value1;

                    });             

                    return returnarray;
                }

            }
        });

}
</script> 
```

如果我然后尝试定义say var arr = get_ajax('1')，arr 将是空的。我可以从函数内部的数组中发出警报和 console.log 的东西，但返回它什么也不返回。

它似乎不存在于函数之外。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T04:05:12.683

您使用`Ajax`不正确，我们的想法是不要拥有`return`任何东西，而是将数据交给一个称为`callback`函数的东西，该函数处理数据。

IE：

```
function handleData( responseData ) {
    // do what you want with the data
    console.log(responseData);
}

$.ajax({
    url: "hi.php",
    ...
    success: function ( data, status, XHR ) {
        handleData(data);
    }
}); 
```

`return`提交处理程序中的任何内容都不会执行任何操作，您必须转而交出数据，或者直接在成功函数中执行您想要的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T04:05:57.790

问题是您的成功函数没有将您的数组返回*到任何地方*。您需要做的是在成功处理程序内部完全处理您的数据，或者调用另一个方法/函数来完成所需的操作。

假设它可能看起来像这样：

```
success: function(result) {
    if(result.error == true){
        alert(result.message);
    }else{
        $.each(result, function(key1, value1){
            returnarray[key1] = value1;
        });
        //Something like this  
        ajaxHandlers.handleReturnedArray(returnarray);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:13:18.740

如果你绝对想让它返回一些东西，你可以做一个同步请求（尽管它不是 AJAX 的重点（*异步*JavaScript 和 XML））。

```
function get_ajax(route_val){

    var returnarray = [];

    $.ajax({
        url: "ajax.php",
        dataType: 'json',
        async: false,
        data: { 
            route: route_val
    },
        success: function(result) {
            if(result.error == true){
                alert(result.message);
            }else{

                $.each(result, function(key1, value1){
                    returnarray[key1] = value1;

                });             

            }
        }
    });

    return returnarray;
} 
```

# authorization - 如何限制 web api 仅响应特殊客户端？

> ID：11732901
> 
> 赞同：1
> 
> 时间：2012-07-31T04:01:15.280
> 
> 标签：authorization

假设我正在为我的客户端创建一个 web api 来连接，web api 在 web 上是公开的。但是我只允许特殊的客户端（例如，iOS或Android）可以连接它......其他，不允许调用web api，即使他们的参数是正确的？有什么办法吗？谢谢。

# mysql - 如何在Mysql的2条记录中选择最后一个日期

> ID：11732903
> 
> 赞同：0
> 
> 时间：2012-07-31T04:01:35.400
> 
> 标签：mysql

如何在 Mysql 的 2 条记录中选择最后日期？

表A

```
SID NAME Sex
1  Jam  M
2  Da   F 
```

表 B

```
 ID Title SID Date
   1  A     1   2012-07-31 09:57:10
   2  NULL  1   2012-07-31 09:57:13
   3  A     2   2012-07-31 10:10:13
   4  NULL  2   2012-07-31 10:57:13 
```

我想内联那两张表，

但仅选择表 B（SID 不同）的一条记录，其中标题不为空，然后显示

标题的最大日期为空字段。

结果想要空标题的最大日期：

```
ID Name Title SID  Date
1  Jam  A     1    **2012-07-31 09:57:13**
2  DA   A     2    **2012-07-31 10:57:13** 
```

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:09:05.207

我认为这样的事情对你有用：

```
SELECT b.ID, a.NAME, b.Title, b.SID, b.Date
FROM TABLEA a
    INNER JOIN (SELECT SID, IFNULL(Title, "") AS Title,
                       MAX(IF(Title IS NULL, Date, NULL)) Date
                FROM TABLEB GROUP BY SID) b
        ON a.SID = b,SID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:12:38.987

```
SELECT b.ID, a.NAME, b.Title, b.SID, b.Datea 
from tablea a left outer join 
  (( SELECT sid, MAX(datea) AS latest
         FROM tableb
          where title is not null 
          GROUP BY sid) AS dt
INNER JOIN tableb b  ON b.sid= dt.sid  and b.datea=dt.latest )
on a.sid=b.sid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:43:59.403

试试我的代码（它有效）：

```
SELECT b.id, b.title, b.sid, b.date 
    FROM table_b as b 
    JOIN table_a as a ON a.sid = b.sid
    WHERE b.id in (SELECT MAX(id) FROM table_b GROUP BY sid) 
```

# sql - 从多列查询结果创建联合

> ID：11732904
> 
> 赞同：1
> 
> 时间：2012-07-31T04:01:39.953
> 
> 标签：sql, union

我正在尝试将 sql 查询的结果转换为一个集合。

该表如下所示：

```
create table edges (
  a int,
  b int
); 
```

我想将查询的结果用作子查询，它需要联合中的“a”和“b”列。

```
select * from ... where id in (select a from edges union select b from edges)) 
```

上面的查询有效，但如果我可以将子查询的结果转换为一个联合，而不需要将它与另一个返回第二列的子查询连接起来，那就太好了。

```
... in (select makeunion(a, b) from edges) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:34:44.947

我认为如果你需要使用 IN 语句，你不能避免 UNION。但是您可以使用其他 WHERE 条件，例如：

```
where EXISTS(select a from edges where a=id or b=id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:33:54.280

我实际上认为您不能分解此代码。UNION 要求您使用两个查询，一个是第一个，一个是后一个。

但是，您可以创建一个 php 函数来为您执行此操作：

```
function makeUnion ($table, $rows) {
    $ret = '(';
    $array_rows = explode (',', $rows);
    foreach ($array_rows as $v) {
        if ($ret != '(')
            $ret .= ' UNION ';
        $ret .= 'SELECT ' .$v. ' FROM ' .$table;
    }
$ret .= ')';
return $ret;
} 
```

然后在您的查询中使用它，如下所示：

```
$sql->query("... IN " .makeUnion('edges','a,b')); 
```

我还没有测试过，所以不会有一些错误，但我想你明白了。

# winapi - 在 Win32 中获取项目目录以进行着色器加载

> ID：11732906
> 
> 赞同：2
> 
> 时间：2012-07-31T04:01:50.430
> 
> 标签：winapi, directory, shader, direct3d, resource-files

我现在已经准备好深入研究着色器，尽管我一直在使用基于模块的系统作为学习如何进行图形编程的方法（我已经写过）。

由于我正在使用 D3D，我只想在我的项目根目录中创建一个着色器目录，将着色器存储在那里，然后快速访问它们。

显然有多种方法可以做到这一点，但我对获取项目的根目录并没有很清楚的想法。是否有为此预定义的宏 - 或某种用于访问项目根文件夹的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:30:28.320

大多数语言都有获取应用程序路径的方法，但大多数会包装[`GetModuleFileName()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197(v=vs.85).aspx)函数，传递一个空模块句柄。然后，您可以从生成的路径中删除可执行文件名称以获取基本文件夹。

有关方法的广泛列表，请参阅[此问题](https://stackoverflow.com/questions/218061/get-the-applications-path/11738178#11738178)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:13:52.423

```
DWORD WINAPI [GetCurrentDirectory][1](
  __in   DWORD nBufferLength,
  __out  LPTSTR lpBuffer
); 
```

检索当前进程的当前目录。

我相信这是您正在寻找的功能。然后，将着色器所在的子目录路径附加到返回的完整路径，即执行程序的位置。

# android - 在android中存储和检索大量文本数据的最有效方法

> ID：11732907
> 
> 赞同：3
> 
> 时间：2012-07-31T04:01:57.300
> 
> 标签：android, data-storage

我想编写一个 android 应用程序来存储和检索大量的文本数据。我想按段落存储文本。我需要以有效的方式操作这些文本数据。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:16:10.113

我认为最好的方法是将所有数据保存在一个文件中。并将此文件保存到 sdcard 中的指定位置。如果您将数据保存在文件中，您将获得与保存相同的格式（例如，在您的情况下为段落）。您可以随时删除文件。

我发现这可以帮助您解决问题

**SharedPreferences**显然是在内部作为一个 XML 文件实现的，该文件在更新时被完全序列化和反序列化。它是一个没有索引的键值存储。因此，仅将其用于与您的应用相关的简单数据。任何超过 50 个键，你可能已经做得过火了。

**ContentProvider**旨在跨应用程序共享数据。你已经明确表示你不想那样做。

**SQLiteDatabase**旨在供单个应用程序存储数据，并为以不同方式存储和索引数据提供了很大的灵活性。我个人使用它将日志存储在我的一个应用程序中。我会推荐那条路线。

[有关更多详细信息，请参阅此讨论](https://stackoverflow.com/questions/5617307/best-way-to-store-data-in-android)

# python - Http xmpp多线程进程

> ID：11732909
> 
> 赞同：1
> 
> 时间：2012-07-31T04:02:08.650
> 
> 标签：python, multithreading, http, xmpp, job-queue

我正在使用一个名为 slimxmpp 的 python 库来实现 xmpp 协议。
其实整个过程是，一个客户端向我发送一个http请求，然后我需要通过我的ssloughxmpp库向其他客户端发送xmpp消息。
我需要在队列中收集这些 http 请求，而我的 slimxmpp 需要长期监听队列并发送 xmpp 消息。
python中是否有任何库可以帮助我做到这一点？

# android - 如何在一个活动中查看两个布局？

> ID：11732917
> 
> 赞同：-4
> 
> 时间：2012-07-31T04:02:57.143
> 
> 标签：android

有没有办法让这成为可能？我正在使用 Inflate 但它不起作用。那么有人有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:06:18.470

尝试

**1.** [合并布局，如 Android Developers Resources](http://android-developers.blogspot.in/2009/03/android-layout-tricks-3-optimize-by.html)中所述。

**2.** [一个Activity使用两个layout xml文件](http://www.java2s.com/Code/Android/UI/UsingtwolayoutxmlfileforoneActivity.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:08:30.007

如果你想在屏幕上显示两种不同的布局，只需使用片段。这是解决您的问题的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:07:38.190

**使用 LayoutInflater**

```
LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = vi.inflate(R.layout.Second,null); 
```

# php - 与 Arduino、PHP 和 OpenWrt 的串行连接。漏洞？

> ID：11732934
> 
> 赞同：2
> 
> 时间：2012-07-31T04:05:41.077
> 
> 标签：php, serial-port, arduino, openwrt

我正在尝试使用 OpenWrt 固件通过 TP-Link MR3420 路由器上的 USB 接口创建一个 PHP Web 界面来控制 Arduino Uno

奇怪的是，我的 PHP 脚本只有在运行与 arduino 通信的 python 脚本后才能得到 arduino 的回复

我确定我的 PHP 脚本正在运行，因为它能够关闭 arduino 上的 LED，但没有得到 arduino 的回复

这是我的PHP代码：

```
require("lib/php_serial.class.php");

$serial = new phpSerial;

$serial->deviceSet("/dev/ttyACM0");
$serial->confBaudRate(9600);

$serial->deviceOpen();
$serial->sendMessage($cmd);
sleep(1);
$read = $serial->readPort();
$serial->deviceClose(); 
```

这是我的arduino草图：

```
int numSerial;
if (Serial.available() > 0)
{
char inByte = Serial.read();
switch (inByte)
{
case 'l':
  numSerial = numberFromSerial();
  if (numSerial >= 0)
  {
    Serial.print("LED Mode: ");
    switch (numSerial)
    {
    case 0:
      ledMode = 0;
      Serial.print("OFF");
      break;
    case 1:
      ledMode = 1;
      Serial.print("TEMP");
      break;
    case 2:
      ledMode = 2;
      Serial.print("KR");
      break;
    }
  }
  else
    Serial.print(ledMode);
  break;
case 't': //Data request
  Serial.print(getTemp());
  break;
}
} 
```

这是我的python代码：

```
 import serial
ser = serial.Serial("/dev/ttyACM0", 9600, timeout=3)
ser.open()
ser.write("t")
print ser.readline()
ser.close() 
```

请帮忙。谢谢。

**找到问题的真正根源！**

在 phpSerial 类中：

`$ret = $this->_exec("stty -F " . $this->_device . " " . (int) $rate, $out);`

用。。。来代替：

`$ret = $this->_exec("stty -F " . $this->_device . " raw speed " . (int) $rate, $out);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:58:20.323

**找到问题的真正根源！**

在 phpSerial 类中：

```
$ret = $this->_exec("stty -F " . $this->_device . " " . (int) $rate, $out); 
```

用。。。来代替：

```
$ret = $this->_exec("stty -F " . $this->_device . " raw speed " . (int) $rate, $out); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:29:01.527

[Arduino在串行连接](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)问题上有记录的自动重置。我的第一个猜测是您正在使用 PHP 代码触发此操作（这就是灯关闭但您没有收到任何响应的原因）。

尝试使用上面链接中的一种解决方法。

这是一个 perl 代码片段，您可以使用它来查看您是否真的触发了这个问题。

```
#!/usr/bin/perl
use strict;
use Device::SerialPort;
my $port = Device::SerialPort->new("/dev/ttyUSB0");
$port->databits(8);
$port->baudrate(9600); # <-- match to arduino settings
$port->parity("none");
$port->stopbits(1);
$port->dtr_active(0);  //toggle this to one to trigger reset 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:02:23.870

我在我的 rc.local 文件中使用这一行来在运行任何东西之前设置端口。

```
stty -F /dev/ttyUSB0 raw speed 38400 -echo -hupcl 
```

这两个附加标志很有用： -echo 关闭 OpenWRT/USB 在输入上回显每个输出的习惯 -hupcl 通过在每次传输后不发送 hup 来关闭自动重置问题

又是 YMMV - 我正在发送和接收单个字节而不是字符串或复杂数据

# javascript - 拖动图像以调整位置，如 facebook 缩略图个人资料图片

> ID：11732935
> 
> 赞同：7
> 
> 时间：2012-07-31T04:05:41.740
> 
> 标签：javascript, jquery, asp.net, web-applications

在 facebook 中，缩略图会遗漏整张图片的某些部分，我们可以移动它，以便我们可以调整缩略图以适合首选位置，如何使用网络技术做到这一点。

![在此处输入图像描述](../Images/b710d0dbd10fb2cf89e9a6ab661bf1b4.png)

在示例中，我们可以拖动图像来移动缩略图的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T11:53:29.210

我一直在寻找一种完全相同的插件，找不到，所以我写了一个:)。看看这个。它非常基本，功能不多，但仍然有用。好好使用它，传播它，也感谢我；）

```
. 
```

**编辑：2013 年 12 月 22 日**

我注意到使用百分比的版本没有按预期工作。链接现已更新。

我还添加了 X 轴版本

[JSFiddle（Y 轴）](http://jsfiddle.net/ergec/ZCH64/)

[JSFiddle（X 轴）](http://jsfiddle.net/ergec/qBMwB/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T04:25:17.460

你可以试试这个[jquery plugin](http://www.webresourcesdepot.com/jquery-image-crop-plugin-jcrop/)。它与 Facebook 不同，但提供受控的裁剪功能。

否则，这里已​​经回答了这个问题：[有没有类似于 Facebook 的图像裁剪的 jQuery 图像裁剪插件？](https://stackoverflow.com/q/7850673/577306)

编辑：试试这个：[imgareaselect](http://odyniec.net/projects/imgareaselect/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-08T00:22:37.480

这正是您需要的：http: [//github.com/matiasgagliano/guillotine](http://github.com/matiasgagliano/guillotine)

此外，它还支持缩放、旋转、触摸设备，并且完全响应。

演示： http: [//matiasgagliano.github.io/guillotine](http://matiasgagliano.github.io/guillotine)

# java - 使用 Hadoop 查找包含特定字符串的文件

> ID：11732936
> 
> 赞同：3
> 
> 时间：2012-07-31T04:05:48.970
> 
> 标签：java, hadoop, mapreduce, hive

我有`1000 files`，每个文件的大小为`1GB`. 我需要在所有这些中找到一个字符串，`1000 files`以及哪些文件包含那个特定的字符串。我正在使用 Hadoop 文件系统，所有这些`1000 files`都在 Hadoop 文件系统中。

所有的`1000 files`都在真实文件夹下，所以如果我在下面这样做，我将获得所有`1000 files`. 我需要在真实文件夹下找到哪些文件包含特定的字符串**hello 。**

```
bash-3.00$ hadoop fs -ls /technology/dps/real 
```

这是我在 hdfs 中的数据结构-

```
row format delimited 
fields terminated by '\29'
collection items terminated by ','
map keys terminated by ':'
stored as textfile 
```

如何编写 MapReduce 作业来解决这个特定问题，以便我可以找到哪些文件包含特定字符串？任何简单的例子都会对我有很大帮助。

**更新：-**

通过在 Unix 中使用 grep 我可以解决上述问题场景，但它非常非常慢并且需要大量时间才能获得实际输出 -

```
hadoop fs -ls /technology/dps/real | awk '{print $8}' | while read f; do hadoop fs -cat $f | grep cec7051a1380a47a4497a107fecb84c1 >/dev/null && echo $f; done 
```

所以这就是我正在寻找一些 MapReduce 工作来解决这类问题的原因......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:24:36.977

听起来您正在寻找一个类似 grep 的程序，该程序很容易使用[Hadoop Streaming](http://hadoop.apache.org/mapreduce/docs/r0.21.0/streaming.html)实现（Hadoop Java API 也可以使用）：

首先，编写一个映射器，如果正在处理的行包含您的搜索字符串，则输出正在处理的文件的名称。我使用了 Python，但任何语言都可以使用：

```
#!/usr/bin/env python
import os
import sys

SEARCH_STRING = os.environ["SEARCH_STRING"]

for line in sys.stdin:
    if SEARCH_STRING in line.split():
        print os.environ["map_input_file"] 
```

此代码从`SEARCH_STRING`环境变量中读取搜索字符串。在这里，我拆分输入行并检查搜索字符串是否与任何拆分匹配；您可以更改它以执行子字符串搜索或使用正则表达式来检查匹配项。

接下来，使用此映射器运行 ​​Hadoop 流式作业，不使用减速器：

```
$ bin/hadoop jar contrib/streaming/hadoop-streaming-*.jar \
    -D mapred.reduce.tasks=0
    -input hdfs:///data \
    -mapper search.py \
    -file search.py \
    -output /search_results \
    -cmdenv SEARCH_STRING="Apache" 
```

输出将分几个部分编写；要获取匹配列表，您可以简单地对文件进行分类（只要它们不太大）：

```
$ bin/hadoop fs -cat /search_results/part-*
hdfs://localhost/data/CHANGES.txt
hdfs://localhost/data/CHANGES.txt
hdfs://localhost/data/ivy.xml   
hdfs://localhost/data/README.txt
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:08:56.410

要获取您当前正在处理的文件名，请执行以下操作：

```
((FileSplit) context.getInputSplit()).getPath().getName() 
```

当您按记录搜索文件记录时，当您看到 时`hello`，发出上述路径（可能是行或其他任何内容）。

将 reducer 的数量设置为 0，它们在这里没有做任何事情。

* * *

“行格式分隔”是否意味着行由换行符分隔？在这种情况下`TextInputFormat`，`LineRecordReader`在这里工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:03:04.403

你可以尝试这样的事情，但我不确定这是否是一种有效的方法。让我知道它是否有效 - 我没有测试过它或任何东西。

您可以像这样使用它：***java SearchFiles /technology/dps/real hello***确保您从适当的目录运行它。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Scanner;

public class SearchFiles {

    public static void main(String[] args) throws IOException {
        if (args.length < 2) {
            System.err.println("Usage: [search-dir] [search-string]");
            return;
        }
        File searchDir = new File(args[0]);
        String searchString = args[1];
        ArrayList<File> matches = checkFiles(searchDir.listFiles(), searchString, new ArrayList<File>());
        System.out.println("These files contain '" + searchString + "':");
        for (File file : matches) {
            System.out.println(file.getPath());
        }
    }

    private static ArrayList<File> checkFiles(File[] files, String search, ArrayList<File> acc) throws IOException {
        for (File file : files) {
            if (file.isDirectory()) {
                checkFiles(file.listFiles(), search, acc);
            } else {
                if (fileContainsString(file, search)) {
                    acc.add(file);
                }
            }
        }
        return acc;
    }

    private static boolean fileContainsString(File file, String search) throws IOException {
        BufferedReader in = new BufferedReader(new FileReader(file));
        String line;
        while ((line = in.readLine()) != null) {
            if (line.contains(search)) {
                in.close();
                return true;
            }
        }
        in.close();
        return false;
    }
} 
```

# c# - dropnet api c# 未经授权的用户异常

> ID：11732947
> 
> 赞同：0
> 
> 时间：2012-07-31T04:06:58.353
> 
> 标签：c#, dropbox, dropbox-api

我正在使用 dropnet api 使用 c# 访问保管箱。我发送我的 apikey 和密钥，我得到令牌作为响应。但是当我尝试获取帐户信息或删除文件时，它会引发未经授权的使用异常。任何人都可以帮助我。我的代码如下。

```
 DropNet.DropNetClient client = new DropNet.DropNetClient("xxxxxxxxx", "xxxxxxxxx");
            DropNet.Models.UserLogin login = client.GetToken();
            client.UserLogin = login;
            string st=client.BuildAuthorizeUrl(client.UserLogin,null);
            client.Delete("/Public/testsk");
            var accountInfo = client.AccountInfo(); 
```

问候，

沙哈立德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:49:14.440

Dropbox API 使用标准的 http 错误代码，在您的情况下，401 通常意味着用户访问令牌已过期或被撤销，应该重新创建，

您需要做的就是通过按以下顺序执行后续步骤来重新验证最终用户**保管箱**帐户：

1.  您的应用程序基本身份验证：

    ```
     client = new DropNetClient(Settings.Default.DropboxApiKey, Settings.Default.DropboxApiSecret);
                    client.GetToken(); 
    ```

2.  让用户使用他们的帐户登录 Dropbox 并批准您的 Dropbox 应用：

    ```
     string url = Client.BuildAuthorizeUrl(); 
    ```

3.  检索并保存经过身份验证的用户令牌：

    ```
     UserLogin accessToken = Client.GetAccessToken();
        Account.Token = accessToken.Token;
        Account.Secret = accessToken.Secret;
        Account.Status = AccountStatus.Active; 
    ```

最后 - 在您的应用中保存帐户数据 - Account.Save()

# ruby-on-rails-3 - 如何使用 wicked_pdf 在 PDF 中显示动态地图

> ID：11732948
> 
> 赞同：0
> 
> 时间：2012-07-31T04:06:58.503
> 
> 标签：ruby-on-rails-3, wicked-pdf

我想在我的 PDF 文档中显示世界区域地图。我已经使用一些 jquery 库生成了地图，但不能在通过 wicked_pdf 生成的 PDF 文档中导出相同的地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:19:21.807

这是对我有用的代码（您可以附加 ?d=1 查看 PDF 的 HTML 版本）：

```
def index
  render :pdf => "pdf_with_map",
         :disposition => "attachment",
         :show_as_html => (params[:d] == "1"),
         :layout => "pdf",
         :orientation => 'Landscape'
end 
```

这是pdf布局：

```
!!!
%html
  %head{:xmlns => 'http://www.w3.org/1999/xhtml', :lang => 'en', 'xml:lang' => 'en'}
    %meta{:charset => "utf-8"}
    %title PDF
    = wicked_pdf_stylesheet_link_tag 'pdf'
    = wicked_pdf_javascript_include_tag 'jquery', 'jquery-jvectormap', 'jquery-jvectormap-world-en', 'regionVectorMap'
    = csrf_meta_tags

  %body
    #content
      = yield 
```

当您使用调试时，您会看到帮助程序将 JavasSript 嵌入到 HTML 中。如果 jquery 在 gem 中，地图**对我不起作用**，我将 jquery 移到我的应用程序/资产中，以便 wicked_pdf_javascript_include_tag 可以找到源代码；-)

# ios - CGContext 删除路径

> ID：11732954
> 
> 赞同：2
> 
> 时间：2012-07-31T04:07:44.380
> 
> 标签：ios, xcode

当具有不同颜色的路径使用 CGContext 绘制在先前路径的顶部时，如何删除路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T07:20:12.547

`CGContextBeginPath()`在创建新路径的过程中总是会丢弃以前的路径。

# c# - 用字符串引用对象变量名的 c# 实例

> ID：11732963
> 
> 赞同：1
> 
> 时间：2012-07-31T04:08:34.220
> 
> 标签：c#, .net, silverlight, windows-phone-7, reflection

在 Windows 7 手机（Silverlight 平台）中，当创建一个 ListBox 时，该 ListBox 的名称被实例化并分配给一个同名的变量：

```
<ListBox Name="abcFeed" ... 
```

并用作：

```
abcFeed.ItemsSource = feed.Items; 
```

在我的应用程序中，我有许多提要，并希望将它们分配给各自的列表框。我在字符串字典中有列表框的名称。

```
this.feeds["abcFeed"] = "http://feed.abc.com/....";
this.feeds["nbcFeed"] = "http://feed.nbc.com/...."; 
```

但除了使用开关将提要分配给 ListBoxes 之外，我还想从字典中获取 ListBox 字符串名称并在循环中动态调用实例。

例如，而不是这样做：

```
feedName = "nbcFeed";
// Bind the list of SyndicationItems to our ListBox.
switch (feedName)
{
  case "abcFeed":
    abcFeed.ItemsSource = feed.Items;
    break;
  case "nbcFeed":
    nbcFeed.ItemsSource = feed.Items;
    break;
} 
```

我想以某种方式获取字典键并调用实例化的变量名，例如：

```
feedName = "nbcFeed";
// nbcFeed.ItemsSource = feed.Items;
((ListBox) feedName).ItemsSource = feed.Items; 
```

我已经研究过 Reflection、Assembly 和 Activator.CreateInstance() （虽然我已经有了实例），但我没有清楚地了解这是否可能。

可以这样做还是我被开关卡住了？

我也试过：

```
this.GetType().GetProperty(feedName).ItemsSource = feed.Items; 
```

但我收到一个错误：

> 无法将 lambda 表达式转换为类型“System.Delegate”，因为它不是委托类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T06:55:57.590

不幸的是，您不能使用反射访问在 XAML 中定义的字段。Silverlight 中的安全限制阻止访问 NonPublic 字段（例如为 XAML 元素生成的字段）。

使用 FindName 应该可以正常工作。

```
ListBox abcFeed = LayoutRoot.FindName("abcFeed") as ListBox; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:20:13.377

是的，`Reflection`您需要这样做。但是这个：

> this.GetType().GetProperty(feedName).ItemsSource = feed.Items;

不起作用，因为[`Type.GetProperty()`](http://msdn.microsoft.com/it-it/library/kz0a8sxy%28v=vs.95%29.aspx)方法返回 a [`PropertyInfo`](http://msdn.microsoft.com/en-us/library/8z852kf5)（作为`Type.GetMethod()`返回`MethodInfo`等等......）所以如果你想处理属性值，你应该使用[`PropertyInfo.GetValue()`](http://msdn.microsoft.com/en-gb/library/b05d59ty.aspx)or方法。[`PropertyInfo.SetValue()`](http://msdn.microsoft.com/en-gb/library/xb5dd1f1.aspx)

在您的情况下，这可能有效：

```
var myProperty = (ItemsControl)GetType().GetProperty(feedName).GetValue(this, null); 
myProperty.ItemsSource = feed.Items; 
```

# apache - .htaccess 重写时排除目录

> ID：11732966
> 
> 赞同：0
> 
> 时间：2012-07-31T04:08:59.810
> 
> 标签：apache, .htaccess, mod-rewrite

如果目录是，我想排除 URL 重写`mysite.com/admin`。我努力了：

```
# prepend http://www.
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} !^m\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]
RewriteRule ^(admin|user)($|/) - [L] 
```

我对这些东西不太熟悉，但我似乎无法让它发挥作用。有没有人看到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:13:17.260

**尝试为管理员**移动传递| 重定向*前的***用户**目录：

 *```
RewriteEngine On

RewriteRule ^(admin|user)($|/) - [L]

RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} !^m\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

除此之外，我根本看不到任何重写，所以我不确定需要将它们排除在什么之外。*

# ruby-on-rails-3 - 水豚找不到Rails link_to

> ID：11732971
> 
> 赞同：4
> 
> 时间：2012-07-31T04:10:18.327
> 
> 标签：ruby-on-rails-3, capybara

_header.html.erb

```
<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <%= link_to "sample app", root_path, id: "logo" %>
      <nav>
        <ul class="nav pull-right">
          <li><%= link_to "Home", root_path %></li>
          <li><%= link_to "Help", help_path %></li>
          <% if signed_in? %>
            <li><%= link_to "Users", '#' %></li>
            <li id="fat-menu" class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Account <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to "Profile", current_user %></li>
                <li><%= link_to "Settings", '#' %></li>
                <li class="divider"></li>
                <li>
                  <%= link_to "Sign out", signout_path, method: "delete" %>
                </li>
              </ul>
            </li>
          <% else %>
            <li><%= link_to "Sign in", signin_path %></li>
          <% end %>
        </ul>
      </nav>
    </div>
  </div>
</header> 
```

user_pages_spec.rb

```
 describe "with valid information" do
        before do
            fill_in "Name",         with: "Example User"
            fill_in "Email",        with: "user@example.com"
            fill_in "Password",     with: "foobar"
            fill_in "Confirmation", with: "foobar"
        end

        it "should create a user" do
            expect { click_button submit }.to change(User, :count).by(1)
        end

        describe "after saving the user" do
            before { click_button submit }
            let(:user) { User.find_by_email('user@example.com') }

            it { should have_selector('title', text: user.name) }
            it { should have_selector('div.alert.alert-success', text: 'Welcome') }
            it { should have_link('Sign out') }
        end

        describe "followed by signout" do
            before { click_link "Sign out" }
            it { should have_link('Sign in') }
        end
    end 
```

失败是：

```
1) User pages signup with valid information followed by signout
Failure/Error: before ( click_link "Sign out" )
Capybara::ElementNotFound:
no link with title, id, or text 'Sign out' found
(eval):2:in 'click_link'
./spec/requests/user_pages_spec.rb:63:in 'block (5 levels) in (top (required))' 
```

在手动创建用户过程之后，它似乎可以工作。该链接位于下拉菜单中，如果这可能与它有关？这是在 MHartl rails 教程中他说所有测试都应该通过的地方。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T05:56:04.077

可疑代码显然需要嵌套在前面描述的内部

```
 describe "after saving the user" do
            before { click_button submit }
            let(:user) { User.find_by_email('user@example.com') }

            it { should have_selector('title', text: user.name) }
            it { should have_selector('div.alert.alert-success', text: 'Welcome') }
            it { should have_link('Sign out') }

            describe "followed by signout" do
                before { click_link "Sign out" }
                it { should have_link('Sign in') }
            end
        end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T04:22:25.390

最后一个描述中的`before`块还没有创建用户。这就是用户（尚不存在）当前未登录的原因，因此没有“退出”链接。

一种可能的解决方案是`click_button 'submit'`在 before 块中。另一个是完全跳过块中的注销`before`，因为此时没有用户登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T09:40:26.437

是的，它应该嵌套在前面的描述中。我可以确认这也适用于本教程的 Rails 4 版本。

# mysql - 如果 sql 查询计数小于

> ID：11732977
> 
> 赞同：1
> 
> 时间：2012-07-31T04:10:44.740
> 
> 标签：mysql, sql

如果查询不符合计数阈值，您可以计算查询的结果并使查询的一部分动态化吗？也许使用案例？正如你在下面看到的，我有一个很大的愚蠢的 sql 查询，它有很多事情发生（忽略日期调整部分，抱歉）。有时它从超过 10k 个项目的数据库中返回少于 12 个结果，因为它需要在关闭后 17 小时内的项目。

**所以问题是，我是否可以检查（计数？）整个查询的结果，并将 17 小时参数开放为更大的数字以返回至少 12 个结果？**

提前致谢。

```
SELECT 100 - round((current_price / item.estimated_price)*100) as percent, item.cached_thumbnail_url, item.item_id, current_price, close_date, catalog_item_id FROM catalog_item AS ci JOIN item on item.item_id = ci.item_id
 JOIN item_translations it ON (it.item_id = item.item_id) WHERE ((100 - round((current_price / item.estimated_price)*100)) > 49 AND
 item.estimated_price > 0 AND
 current_price > 0 AND
 ci.close_date > DATE_ADD(NOW(), interval 14400 second) AND
 item.active = 1 AND
 ci.active = 1 AND
 (current_price / estimated_price) < 1 AND 
 (ci.close_date < DATE_ADD(DATE_ADD(NOW(), interval 14400 second), INTERVAL 17 HOUR))) ORDER BY (item.estimated_price - current_price) DESC LIMIT 12 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:21:02.330

不确定，但也许你可以尝试这样的事情或使用子查询：

```
SET @cnt = 0;

SELECT ...
FROM catalog_item AS ci
    JOIN item on item.item_id = ci.item_id
    JOIN item_translations it ON (it.item_id = item.item_id)
WHERE ((100 - round((current_price / item.estimated_price)*100)) > 49 AND
        ...
     (ci.close_date < DATE_ADD(DATE_ADD(NOW(), interval 14400 second), INTERVAL IF(@cnt < 12, 20, 17) HOUR)))
    AND (SELECT @ids := @cnt + 1)
ORDER BY (item.estimated_price - current_price) DESC LIMIT 12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:32:45.647

```
`SELECT 100 - round((current_price / item.estimated_price)*100) as percent, item.cached_thumbnail_url, item.item_id, current_price, close_date, catalog_item_id FROM catalog_item AS ci JOIN item on item.item_id = ci.item_id
 JOIN item_translations it ON (it.item_id = item.item_id) WHERE ((100 - round((current_price / item.estimated_price)*100)) > 49 AND
 item.estimated_price > 0 AND
 current_price > 0 AND
 ci.close_date > DATE_ADD(NOW(), interval 14400 second) AND
 item.active = 1 AND
 ci.active = 1 AND
 (current_price / estimated_price) < 1 AND
CASE WHEN ( SELECT COUNT(1) FROM catalog_item)>1000 
THEN  (ci.close_date < DATE_ADD(DATE_ADD(NOW(), interval 14400 second), INTERVAL 17 HOUR)))
--and so on 
END  ORDER BY (item.estimated_price - current_price) DESC LIMIT 12` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T03:26:57.737

I had a senior colleague lend a hand, and we went a different route. I took the hour interval and limit out of the sql query, and the looped through the results in ruby to return > 12 results, each time increasing the interval +17 hours, until we get + 12\. Once we hit that threshold we break. Thanks for the help!

```
 #DEALS TAB BEGIN
  def self.deals
    #calculate the raw percentage, minus that from 100 to show percentage off
    options = {:select => "100 - round((current_price / item.estimated_price)*100) as percent, item.cached_thumbnail_url, item.item_id, it.name, ci.current_price, ci.close_date, ci.catalog_item_id",

               :from => "catalog_item AS ci",
               :joins => "JOIN item on item.item_id = ci.item_id
                                       JOIN item_translations it ON (it.item_id = item.item_id)",
               :order => "(item.estimated_price - current_price) DESC",

               :conditions => "(100 - round((current_price / item.estimated_price)*100)) > 49 AND
                                  item.estimated_price > 0 AND
                                  ci.current_price > 0 AND
                                  ci.close_date > DATE_ADD(NOW(), interval #{-1*Time.now.utc_offset} second) AND
                                  item.active = 1 AND
                                  ci.active = 1 AND
                                  (current_price / estimated_price) < 1 "}

    #loop adding 17 hours each pass until < 12 results show
    catalog_items = CatalogItem.all(options)
    _deals = []
    if catalog_items.present?
      last_close_date =  CatalogItem.first(:conditions => options[:conditions], :from => options[:from], :joins => options[:joins], :order =>  "ci.close_date DESC", :select => options[:select]).close_date
      start_time = Time.now
      interval = 17.hours
      end_time = start_time + interval
      min_needed_for_view = 12
      until _deals.size >= min_needed_for_view or last_close_date < start_time
        catalog_items.each do |ci|
          if ci.close_date < end_time && ci.close_date > start_time
            _deals.push(ci)
            break if _deals.size >= min_needed_for_view
          end
        end
        start_time = end_time
        end_time += interval
      end
    end
    _deals
  end 
```

# ruby-on-rails - Rspec NoMethodError：未定义的方法“调用”，但一切都通过rails控制台工作

> ID：11732981
> 
> 赞同：3
> 
> 时间：2012-07-31T04:11:26.707
> 
> 标签：ruby-on-rails, ruby, rspec

我是一个尝试学习的 rails/rspec 新手。我已经设置了以下数据模型（摘录）

```
t.string :foo
t.string :bar
t.date :future_date 
```

我有一个 Web 表单来创建与用户关联的这些条目，类似于这个[rails 教程](http://ruby.railstutorial.org/chapters/user-microposts#top)中的微博。Web 表单如下所示（摘录）：

```
<%= f.label :foo %>
<%= f.text_field :foo %>
<%= f.label :bar %>
<%= f.text_field :bar %>
<%= f.date_select :future_date %> 
```

使用“创建”按钮启动帖子。一切似乎都可以通过 rails 控制台正常工作；Web 表单显示正确，条目创建正确，数据库正确填充。但是，当我运行 rspec 我得到

```
NoMethodError:
  undefined method `call' for #<RSpec::Expectations::ExpectationTarget:0x0000000492b7c0> 
```

这是相关的请求规范（摘录）：

```
it "should not create a foobar" do
  expect { click_button "Create" }.should_not change(Foobar, :count)
end 
```

换句话说，单击“创建”而不填写任何信息。稍后我有一个类似的示例，其中填写了信息，但几乎相同的 click_button 也会引发此错误（应该更改 .by(1)）。我有类似的 click_button 测试对于用户创建部分（没有输入/输入的内容）工作正常，除了 future_date 之外，它非常相似。这一点，加上我在无休止的谷歌搜索中遇到的一些事情，让我相信日期在某种程度上是罪魁祸首，也许是版本不一致或其他原因。特别是因为在实际使用中一切正常。这适用于 ruby​​ 1.9.3、Rails 3.2.6 和 Rspec 2.11.1。非常感谢任何见解。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T18:51:37.163

在 RSpec >= 2.11 你应该使用`to`方法而不是`should`

```
expect { click_button "Create" }.to_not change(Foobar, :count) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T06:36:50.030

应该说...

```
it "should not create a foobar" do
  lambda { click_button "Create" }.should_not change(Foobar, :count)
end 
```

... 所以`lambda`，不是`expect`。

# azure - windows azure 新门户上的“链接资源”是什么？

> ID：11732982
> 
> 赞同：2
> 
> 时间：2012-07-31T04:11:33.740
> 
> 标签：azure

在不链接数据库的情况下，网站能够连接到数据库。
那么，我什么时候应该将数据库链接到网站？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:47:51.370

链接资源是一种向门户提供上下文的方式，这些上下文涉及哪些服务属于您部署的应用程序。这可以将这些服务项目的上下文添加到您的`publishsettings`文件中。该`publishsettings`文件由[visual-studio](/questions/tagged/visual-studio "显示标记为“视觉工作室”的问题")、[webmatrix](/questions/tagged/webmatrix "显示标记为“webmatrix”的问题")以及`Windows Azure CLI Tools`和`Windows Azure Powershell Tools`用于导入订阅的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T04:42:12.370

您可以使用链接资源[将](https://www.windowsazure.com/en-us/manage/services/web-sites/how-to-configure-websites/)SQL 数据库数据库添加到您的网站。

# python - 将字典转换为 XML

> ID：11732988
> 
> 赞同：-2
> 
> 时间：2012-07-31T04:12:19.557
> 
> 标签：python, dictionary

我正在尝试从具有以下结构的字典中的值创建一个 XML 字符串。从根到字符串的键数（字典深度）是不确定的，范围从 1 到 ?。

```
'modes': {   'P': {   'S': {  u'01': u'Some Text A.',
                              u'02': u'Some Text B.',
                              u'03': u'Some Text C.',
                              u'04': u'Some Text D.',
                              u'05': u'Some Text E.',
                              u'06': u'Some Text F.'},
                     'U': {   u'01': u'Some Text G.',
                              u'02': u'Some Text H.'}},
            'R': {   'S': {   u'01': u'Some Text I.',
                              u'02': u'Some Text J.',
                              u'03': u'Some Text K.',
                              u'04': u'Some Text M.',
                              u'05': u'LSome Text N.'},
                     'U': {   u'01': u'Some Text O.',
                              u'02': u'Some Text P.',
                              u'03': u'Some Text Q.'}}} 
```

我追求的输出示例是：

```
<modes>
  <property P>
    <property S>
      <text>
        <order>'01'</order>
        <string>'Some Text A.'</string>
      </text>
      <text>
        <order>'02'</order>
        <string>'Some Text B.'</string>
      </text>
      ...
    </property S>

    <property U>
      <text>
        <order>'01'</order>
        <string>'Some Text G.'</string>
      </text>
      <text>
        <order>'02'</order>
        <string>'Some Text H.'</string>
      </text>    
    </property U>
  </property P>

  <property R>
      <property S>
      <text>
        <order>'01'</order>
        <string>'Some Text I.'</string>
      </text>
      <text>
        <order>'02'</order>
        <string>'Some Text J.'</string>
      </text>
      ...
    </property S>

    <property U>
      <text>
        <order>'01'</order>
        <string>'Some Text O.'</string>
      </text>
      <text>
        <order>'02'</order>
        <string>'Some Text P.'</string>
      </text>    
      ...
    </property U>
  </property R>
</modes> 
```

我对如何迭代结构更感兴趣，以便我可以将孩子放在正确的父母中，而不是作为 XML 的确切输出。任何关于可能改变数据结构的建议也将不胜感激，因为我觉得我已经把自己画到了一个角落！谢谢朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:16:51.580

编写一个函数，该函数将采用当前结构以及要添加子节点的节点。当您在结构中遇到递归时，使用新节点和子结构递归函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T04:33:45.020

我发现他们的方法是使用递归函数，如果字典 [key] 不是字典，则打印键、值，否则打印递归调用

```
def _dict_to_xml(dictionary):
    returnlist = []
    for key in dictionary:
        if isinstance(dictionary[key],dict):
            returnlist.append(r'<node name="{name}">'.format(name=key))
            returnlist.append(_dict_to_xml(dictionary[key]))
            returnlist.append(r'</node>')
        else:
            returnlist.append(r'<order>{key}</order>'.format(key=key))
            returnlist.append(r'<string>{value}</string>'.format(value = dictionary[key]))
    return '\n'.join(returnlist)

def dict_to_xml(dictionary):
    return '<?xml version="1.0"?>\n'+_dict_to_xml(dictionary)+'</xml>' 
```

# backbone.js - 主干视图 el 不附加

> ID：11732991
> 
> 赞同：0
> 
> 时间：2012-07-31T04:12:52.743
> 
> 标签：backbone.js, coffeescript

我有以下Backbone（在coffeescript中）视图，我在其中传递一个数组并尝试将每个项目附加到el。但是，我一直想出一个空的el。

```
ItemTagList = Backbone.View.extend
  className  : "itemTagsContainer"
  initialize : (tags) ->
    this.render(tags.taglist)

  render: (taglist) ->
    taglist.forEach (tag) ->
      tag_span = _.template($("#tag").html(), {tag : tag} )
      $(this.el).append(tag_span)
      console.log(tag) 
```

模板`$("#tag")`如下所示：

```
<a class='tag' href="/items?tagged_with=<%= tag =>"><%= tag =></a> 
```

渲染后，上面将正确地遍历`taglist`，所以我知道标记列表已正确传递给主干视图以及`render`函数。

但是，如果我执行以下操作

```
itemTagList = new ItemTagList
  taglist : ["Tag1", "Tag2"]

console.log(itemTagList.el) 
```

我总是得到空的`el`，即

```
 <div class="itemTagsContainer"></div> 
```

代替

```
 <div class="itemTagsContainer">
   <a class='tag' href="/items?tagged_with=Tag1">Tag1</a>
   <a class='tag' href="/items?tagged_with=Tag2">Tag2</a>
 </div> 
```

这是我希望得到的。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T04:22:22.580

您的[`forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)回调函数中只是有上下文问题；( `@`AKA `this`) 将是全局对象（`window`在浏览器中），所以`this.el`不是您认为的那样。在定义回调函数时，您可以通过使用[粗箭头 ( `=>`)来解决此问题：](http://coffeescript.org/#fat_arrow)

```
render: (taglist) ->
  taglist.forEach (tag) =>
    tag_span = _.template($("#tag").html(), tag: tag)
    @$el.append(tag_span)
    console.log(tag) 
```

我也切换到了，[`@$el`](http://backbonejs.org/#View-%24el)因为您的视图已经有一个缓存版本的`$(@el)`.

回调中的上下文`forEach`取决于您所处的模式：

> 如果一个`thisArg`参数被提供给`forEach`，它将被用作每个回调调用的 this 值，就像`callback.call(thisArg, element, index, array)`被调用一样。如果`thisArg`是`undefined`或`null`，则`this`函数内的值取决于函数是否处于严格模式（如果处于严格模式，则传递值，如果处于非严格模式，则为全局对象）。

我建议使用`=>`，这样您就不必担心了；或者，您可以使用`thisArg`：

```
taglist.forEach (tag) -> ...., @ 
```

但这在 CoffeeScript 中往往有点丑陋和麻烦。

# mysql - 将数字连接到字符串，数字始终返回零

> ID：11732992
> 
> 赞同：1
> 
> 时间：2012-07-31T04:12:53.277
> 
> 标签：mysql, sql

我的数据库中有一个名为`storageFolder`. 所述列中的所有行都包含值 8 并设置为 INT (4)。

在我的 SELECT 查询中，我试图返回带有前缀“group”的列，以使记录读取为“group8”。

我正在尝试使用 CONCAT 来执行此操作，如下所示：

```
SELECT photoID, CONCAT('group',storageFolder) AS storageFolder FROM photos 
```

但这总是会返回一个零：

```
storageFolder
----------------
group0 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T04:27:11.297

```
SELECT photoID, CONCAT('group', CAST(storageFolder AS CHAR)) AS storageFolder FROM   photos 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T04:14:48.167

在连接之前尝试将其`storageFolder`转换为字符串：

```
SELECT photoID, 
       CONCAT('group', CAST(storageFolder AS CHAR(10))) AS storageFolder
FROM   photos 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T04:35:21.583

我已经设法解决了这个问题。我的列曾经是一个值为 'group8' 的 VARCHAR，我最近将它修改为一个值为 '8' 的 INT(4)。不知道是什么导致了这个错误。无论如何，我删除了该列并重新创建它并按预期工作。奇怪的！

# css - 如何在 sencha 中动态更改文本字段的颜色？

> ID：11732993
> 
> 赞同：0
> 
> 时间：2012-07-31T04:12:56.203
> 
> 标签：css, sencha-touch, extjs, sencha-touch-2

如何在 sencha 中动态更改文本字段的颜色？我已经尝试过以下提到的这些方法：

```
Ext.getCmp('fieldId').setStyle('color:red;');

Ext.getCmp('fieldId')setFieldStyle('color:red');

Ext.getCmp('fieldId').setCls('updateColor');

Ext.getCmp('fieldId').addCls('updateColor');

Ext.getCmp('fieldId').btnInnerEl.setStyle({color:"red"}); 
```

css 文件：

```
.updateColor{
color: red;
    } 
```

以上都不起作用。我们如何动态更改文本字段的颜色？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T06:39:59.647

尝试将 css 定义为

```
.updateColor .x-form-label,.updateColor .x-form-field{
    color: red;
} 
```

然后使用这条线

```
Ext.getCmp('fieldId').setCls('updateColor'); 
```

# javascript - GitHub 风格的 Markdown 查看器

> ID：11732994
> 
> 赞同：1
> 
> 时间：2012-07-31T04:12:59.237
> 
> 标签：javascript, gist

我的应用程序需要以 GitHub Gist 的方式显示 Markdown（语法类似于`GitHub Flavoured Markdown`）文件。我知道，GitHub 正在使用 redcarpet 包将 markdown 转换为 HTML。

是否有任何 javascript 实用程序可以将 Markdown 转换为 HTML？

注意：我使用`showdown`javascript，但我不满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:27:00.293

github API 有一项服务可以在原始模式和 GMF 模式下“翻译”markdown，唯一的问题是在跨域请求中使用，请查看[http://developer.github.com/v3/markdown/](http://developer.github.com/v3/markdown/)。

# javascript - 在我实现 URL 路由后，ASP.Net URL Routing 4.0 以某种方式阻止了 fancybox 的工作

> ID：11732998
> 
> 赞同：0
> 
> 时间：2012-07-31T04:14:22.537
> 
> 标签：javascript, jquery, asp.net, fancybox, url-routing

我在asp.net web-form项目中工作，到目前为止，`fancybox`一旦用户单击链接，它就会将表单显示为fancybox弹出窗口。但是当我实现 URL 路由时同样不起作用，路由工作正常图像显示，css 工作但它有些如何阻止fancybox 弹出并在选项卡中显示相同的表单而不是传统的`fancybox`

我试图更改`fancybox script`文件的路径，但它不起作用。

[没有 URL 路由的示例链接](http://alfarooqcentre.com.66-132-174-148.habtoor.fohmics.net/en/Activity-Details.aspx?Language=en-US&PageID=31&EventID=10)

页面的相同代码具有注册链接以在`fancybox`弹出窗口中显示简单的 asp.net 网络表单。

我正在使用函数重新初始化脚本，因为我也在页面的一部分中使用更新面板。我什至尝试删除重新初始化的脚本部分，`fancybox`但它仍然不起作用我也`ResolveClientUrl`按照某些文章中的建议使用，但它也不起作用。

我将不胜感激这方面的帮助

**示例代码**

```
<script src='<%=ResolveClientUrl("~/fancybox/jquery.fancybox-1.3.4.js")%>' type="text/javascript"></script>   
    <script src="../fancybox/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script>
    <link href="../fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        //Code to Reinitialize Fancybox script when using update panel START
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_initializeRequest(InitializeRequest);
        prm.add_endRequest(EndRequest);
        function InitializeRequest(sender, args) { }
        function EndRequest(sender, args) { InitMyFancyBox(); }
        $(document).ready(function () {
            InitMyFancyBox();
        });
        //Code to Reinitialize Fancybox script when using update panel END

        function InitMyFancyBox() {

            //Code for Fancybox Star
            $(document).ready(function () {
                $("a.iiframe").fancybox({
                    'scrolling': 'no',
                    'width': 700,
                    'height': 450,
                    'autoScale': false,
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    'hideOnOverlayClick': false,
                    'hideOnContentClick': false,
                    'type': 'iframe'
                });
            });
            //Code for Fancybox End
        }

</script> 
```

**链接的 HTML**

```
<asp:Panel ID="pnlRegForm" runat="server" CssClass="ActivitiesDDetails" Visible="false">
     <asp:HyperLink ID="hylRegister" runat="server" CssClass="iiframe">Register Now!</asp:HyperLink>
</asp:Panel> 
```

代码隐藏

```
pnlRegForm.Visible = true;
hylRegister.NavigateUrl = "ActivityRegistration.aspx?EventID=123&Activity=33&Language=" + Helper.GetQueryStringValue("Language"); 
```

文件夹结构这是一个多语言网站，我将语言相关页面保存在不同的文件夹中，如英语、阿拉伯语、西班牙语等

```
 /
 /fancybox
 /english
 /english/Activity.aspx (Lists all activities with link as SEO Friendly links)
 /english/ActivityDetails.aspx (Shows activity details & link for the fancybox popup)
 /english/ActivityRegistration.aspx (Web form to be shown as popup)

 /Spanish
 /arabic
 /css
 /someotherfolders 
```

如果我不使用 URL 路由，一切正常，URL 路由已实现，它停止了幻想框我不知道如何修复它，因为我也尝试更改脚本路径。我将不胜感激这方面的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:00:02.390

我解决了这个问题，因为它无法从母版页访问 jquery 文件。使用 Page.ResolveUrl 更正了路径