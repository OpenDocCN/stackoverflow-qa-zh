# StackOverflow 问答 10681000-10681999

# python - 我在寻找什么样的设计模式以及如何在 python 中实现它

> ID：10681000
> 
> 赞同：2
> 
> 时间：2012-05-21T07:24:12.113
> 
> 标签：python, oop, design-patterns

我试图为我的代码提供一些通用性。基本上我要找的是这个。

我想写一个 API 接口 MyAPI ：

```
class MyAPI(object):
    def __init__(self):
       pass

    def upload(self):
       pass

    def download(self):
      pass

class MyAPIEx(object):
   def upload(self):
      #specific implementation

class MyAPIEx2(object): 
   def upload(self)
    #specific implementation

#Actual usage ... 
def use_api():
     obj = MyAPI()
     obj.upload() 
```

所以我想要的是基于配置我应该能够调用
MyAPIEx 或 MyAPIEx2 的上传功能。我正在寻找的确切设计模式是什么以及如何在 python 中实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:27:51.793

您正在寻找[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)（或工厂的任何其他实现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:20:38.910

如果没有更多信息，真的很难说你使用的是什么模式。实例化 MyAPI 的方式确实是像 @Darhazer 提到的那样的工厂，但听起来更像是您有兴趣了解用于 MyAPI 类层次结构的模式，并且没有更多信息我们不能说。

我在下面做了一些代码改进，寻找带有 IMPROVEMENT 字样的评论。

```
class MyAPI(object):
    def __init__(self):
       pass

    def upload(self):
       # IMPROVEMENT making this function abstract
       # This is how I do it, but you can find other ways searching on google
       raise NotImplementedError, "upload function not implemented"

    def download(self):
       # IMPROVEMENT making this function abstract
       # This is how I do it, but you can find other ways searching on google
       raise NotImplementedError, "download function not implemented"

# IMPROVEMENT Notice that I changed object to MyAPI to inherit from it
class MyAPIEx(MyAPI):
   def upload(self):
      #specific implementation

# IMPROVEMENT Notice that I changed object to MyAPI to inherit from it
class MyAPIEx2(MyAPI): 
   def upload(self)
      #specific implementation

# IMPROVEMENT changed use_api() to get_api(), which is a factory,
# call it to get the MyAPI implementation
def get_api(configDict):
     if 'MyAPIEx' in configDict:
         return MyAPIEx()
     elif 'MyAPIEx2' in configDict:
         return MyAPIEx2()
     else
         # some sort of an error

# Actual usage ... 
# IMPROVEMENT, create a config dictionary to be used in the factory
configDict = dict()
# fill in the config accordingly
obj = get_api(configDict)
obj.upload() 
```

# visio - Visio 2010：可以将预定义的形状更改为其他形状吗？

> ID：10681006
> 
> 赞同：1
> 
> 时间：2012-05-21T07:25:17.250
> 
> 标签：visio

我正在绘制一个 visio 图，并想更改（即减小）我的一些圆角框的角的半径。我搜索了该程序的帮助并在 Google 上搜索了 > 1/2 小时，但找不到任何有关如何实现此目的的提示 - 至少没有一个有效。

上下文对话框显示一个圆角部分（右键单击 => 格式 => 线条），但在那里所做的任何更改都没有任何效果。是否可能必须“取消保护”这些设置？如果是这样：如何？

任何知道如何改变拐角半径的专家？

后来编辑：我刚刚意识到：我使用流程图符号“圆形过程”而不是普通的圆形圆形框来绘制此图。这就是为什么我不能改变这些角落！是否有一种优雅的方法可以将形状全局更改为另一种类型，即这些流程图形状变成普通的香草盒子？理想情况下，同时保留相关文本？

M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:34:49.363

不是没有编码。但是，我很确定 Sandrilla 有一个现成的工具。它可以以合理的价格获得。[http://www.sandrila.co.uk/](http://www.sandrila.co.uk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T05:39:39.030

您可以在这种情况下创建自己的形状，您可以创建自己的模板，然后将预定义的形状添加到其中。要将预定义的形状添加到模具中，只需按照以下步骤操作

1.  从现有模具中选择形状并右键单击它
2.  从菜单中选择“添加到我的形状”
3.  创建新模具或将其添加到现有模具。

现在您可以编辑主形状，但在此之前您必须将模具置于编辑模式。右键单击模具中新添加的形状，然后单击“编辑母版”->“编辑母版”

您现在可以根据需要修改形状，例如。如果要编辑形状的角，则右键单击母版中的形状，然后选择“格式”->“线”，然后从“圆角”部分选择角的类型。

# json - jquery-ui - json 数据的自动完成

> ID：10681008
> 
> 赞同：0
> 
> 时间：2012-05-21T07:25:19.643
> 
> 标签：json, jquery-ui

我有这种类型的 json 输入。[ {“id1”：“val1”，“id2”：“val2”}，{“id1”：“val3”，“id2”：“val4”}，...]

如何在 jquery-ui 中提供的自动完成插件中解析这个？基本上我希望与 id1 对应的 val1、val3 等成为我的自动完成文本的一部分。关于如何进行此操作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:59:52.283

自动完成小部件需要一组简单的字符串值或具有属性的对象`label`，`value`或两者兼而有之。

您可以使用`$.map`实用程序功能获取数据并将其转换为正确的格式。这假设您正在成功发出 AJAX 请求并且数据正在返回：

```
$.getJSON("/url", function(data) {
    var src = $.map(function (el) {
        return el.id1;
        // or:
        // return { label: el.id1, value el.id2 };
    });

    $("#id").autocomplete({ 
        source: src
    });
}); 
```

**示例：http:** [//jsfiddle.net/df6wB/](http://jsfiddle.net/df6wB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:58:02.000

要将 JSON 字符串转换为 JSON 对象，请使用[`$.parseJSON( ... )`](http://api.jquery.com/jQuery.parseJSON/). 这`var jsonstring`是包含 JSON 文本的文本，仅此而已。`parseJSON()`如果字符串不是有效的 JSON，将失败。

```
var jsonobj = $.parseJSON( jsonstring ); 
```

然后使用它来插入[新选项](http://jqueryui.com/demos/autocomplete/#option-source)以自动完成。

`jsonobj`通过这种方式获取值：

```
alert( jsonobj.id1 ); 
alert( jsonobj.id2 ); 
```

# ruby - Ruby：标准递归模式

> ID：10681012
> 
> 赞同：5
> 
> 时间：2012-05-21T07:25:34.527
> 
> 标签：ruby, recursion, design-patterns

我通常在 ruby​​ 中迷上的一件事是递归模式。例如，假设我有一个数组，它可能包含数组作为无限深度的元素。因此，例如：

```
my_array = [1, [2, 3, [4, 5, [6, 7]]]] 
```

我想创建一个可以将数组展平为`[1, 2, 3, 4, 5, 6, 7]`.

我知道这`.flatten`可以完成这项工作，但这个问题是我经常遇到的递归问题的一个例子——因此我正试图找到一个更可重用的解决方案。

简而言之 - 我猜这种事情有一个标准模式，但我想不出任何特别优雅的东西。任何想法表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T07:43:53.293

递归是一种方法，它不依赖于语言。您在编写算法时要考虑两种情况：再次调用函数的情况（递归情况）和破坏它的情况（基本情况）。例如，在 Ruby 中进行递归展平：

```
class Array
  def deep_flatten
    flat_map do |item|
      if item.is_a?(Array)
        item.deep_flatten
      else
        [item]
      end
    end
  end
end 

[[[1]], [2, 3], [4, 5, [[6]], 7]].deep_flatten
#=> [1, 2, 3, 4, 5, 6, 7] 
```

这有帮助吗？无论如何，这里显示的一个有用的模式是，当您在数组上使用 recusion 时，您通常需要`flat_map`（函数式替代`each`+ `concat`/ `push`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T07:43:51.463

好吧，如果您对 C 有所了解，您只需访问文档并单击 ruby​​ 函数即可获取 C 源代码，它就在那里。

```
http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-flatten 
```

对于这种情况，这是一个 Ruby 实现

```
def flatten values, level=-1
  flat = []
  values.each do |value|
    if level != 0 && value.kind_of?(Array)
      flat.concat(flatten(value, level-1))
    else
      flat << value
    end
  end
  flat
end

p flatten [1, [2, 3, [4, 5, [6, 7]]]] 
#=> [1, 2, 3, 4, 5, 6, 7] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T07:34:21.887

这是一个以尾递归样式编写的展平示例。

```
class Array

  # Monkeypatching the flatten class
  def flatten(new_arr = [])
    self.each do |el|
      if el.is_a?(Array)
        el.flatten(new_arr)
      else
        new_arr << el
      end
    end

    new_arr
  end
end

p flatten [1, [2, 3, [4, 5, [6, 7]]]] 
#=> [1, 2, 3, 4, 5, 6, 7] 
```

[红宝石](/questions/tagged/ruby "显示标记为“红宝石”的问题")

虽然看起来 ruby​​ 并不总是针对尾递归进行优化：[ruby 是否执行尾调用优化？](https://stackoverflow.com/questions/824562/does-ruby-perform-tail-call-optimization "ruby 是否执行尾调用优化？")

# vim - 从 Linux 系统使用 vim 和 SFTP 远程修改 OpenVMS 文件

> ID：10681013
> 
> 赞同：2
> 
> 时间：2012-05-21T07:25:35.263
> 
> 标签：vim, sftp, scp, openvms

我正在使用 CentOS 5.5，并且正在尝试远程修改 OpenVMS 服务器的文件。我尝试使用 scp 但我收到有关“意外换行符”的错误。

我试图找到解决方案，但我还没有找到。

然后我尝试使用 sftp 并成功但仅在我的 openvms 主目录中。我不知道如何访问其他文件夹。

例如 ：

vim sftp://myLogin@myServer//sys\$user/myLogin/test.txt

将在我的 openvms 主目录中成功打开文件 test.txt。

我想要实现的是修改该目录中的文件 test.txt 例如：OpenVMSHomeDirectory.xxx.yyy

有人知道这样做的方法吗？我找不到如何访问我的文件来编辑它。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:02:37.890

您可能正在使用的 OpenSSH sftp 客户端支持以 Unix 为中心的协议版本 3。尝试使用支持更新版本的客户端，如 lftp、WinSCP 或 FileZilla。

如果我没记错的话，OpenVMS SFTP 服务器在与 v3 客户端通信时会将 VMS 文件路径转换为更适合 Unix 的格式（即使用 / 作为目录分隔符）。

# c++ - 无法获得堆中可用内存的准确信息

> ID：10681015
> 
> 赞同：0
> 
> 时间：2012-05-21T07:25:42.060
> 
> 标签：c++, memory-management, new-operator

全部

我使用以下函数来获取有关可用内存和堆中最大连续块的信息。

```
int GetLargestContiguousMemory()
{
    MEMORY_BASIC_INFORMATION mbi;
    DWORD start = 0;
    bool recording = false;
    DWORD freestart = 0, largestFreestart = 0;
    __int64 free = 0, largestFree = 0;  while (true)
    {
//      SIZE_T s = VirtualQueryEx(hproc, reinterpret_cast<lpvoid>(start), &mbi, sizeof(mbi));
        SIZE_T s = VirtualQueryEx(GetCurrentProcess(), (void*)(start), &mbi, sizeof(mbi));
        if (s != sizeof(mbi))
        {
            if (GetLastError() != ERROR_INVALID_PARAMETER)
                //return ReportError(GetLastError(), _T("Failed to VirtualQueryEx at %08x"), start);
                printf("Failed to VirtualQueryEx at %08x", start);
            else
                break;
        }
        if (mbi.State == MEM_FREE)
        {
            if (!recording)
                freestart = start;
            free += mbi.RegionSize;
            recording = true;
        }
        else
        {
            if (recording)
            {
                if (free > largestFree)
                {
                    largestFree = free;
                    largestFreestart = freestart;
                }
            }
            free = 0;
            recording = false;
        }
        start += mbi.RegionSize;
    }

    return largestFree;
}

int GetHeapAvailableMemory()
{
    MEMORY_BASIC_INFORMATION mbi;
    DWORD start = 0;
    bool recording = false;
    DWORD freestart = 0, largestFreestart = 0;
    __int64 free = 0, largestFree = 0;  
    while (true)
    {
//      SIZE_T s = VirtualQueryEx(hproc, reinterpret_cast<lpvoid>(start), &mbi, sizeof(mbi));
        SIZE_T s = VirtualQueryEx(GetCurrentProcess(), (void*)(start), &mbi, sizeof(mbi));
        if (s != sizeof(mbi))
        {
            if (GetLastError() != ERROR_INVALID_PARAMETER)
                //return ReportError(GetLastError(), _T("Failed to VirtualQueryEx at %08x"), start);
                printf("Failed to VirtualQueryEx at %08x", start);
            else
                break;
        }
        if (mbi.State == MEM_FREE)
        {
            if (!recording)
                freestart = start;
            free += mbi.RegionSize;
        }
        start += mbi.RegionSize;
    }

    return free;
} 
```

在我的程序中，我使用 operator new 循环分配内存，但是上面的函数多次迭代返回相同的值，并且返回值突然变化。它显示堆中可用内存的大小减少了 8M 字节。我无法理解。返回堆中可用内存大小的函数是否正确？

谢谢。跑步

# c - 在 gdb 中找不到已知的行号

> ID：10681018
> 
> 赞同：1
> 
> 时间：2012-05-21T07:25:59.527
> 
> 标签：c, linux, gcc, gdb, x86-64

我已经编译了我自己的*glibc*，它产生了`libc.so`. 我`libc.so`通过执行将文件加载到 gdb 中`gdb -q ./libc.so`。但是，当我尝试通过执行来查找函数的位置时`list function_name`，我收到错误消息`No line number known for function_name`. 请注意，我使用 -g 标志来编译*glibc*。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:35:54.680

您甚至可以自己调试 .so 吗？我会尝试做的是`gdb executable_using_my_libc`. 然后这应该加载 glibc 等等。

# python - 在 PIL 中调整图像大小

> ID：10681022
> 
> 赞同：0
> 
> 时间：2012-05-21T07:26:22.157
> 
> 标签：python, python-imaging-library

我有以下函数，它获取图像然后以三种尺寸返回。然后另一个函数将这些图像上传到 Amazon S3。在我看来，文件的保存方式有些冗余-

```
def resize_image(image, size_as_tuple):
    """
    Example usage: resize_image(image, (100,200))
    """

    image_as_string=""
    for c in image.chunks(): 
        image_as_string += c

    imagefile = cStringIO.StringIO(image_as_string)
    image = Image.open(imagefile)

    if image.mode not in ("L", "RBG"):
        image = image.convert("RGB")

    filename = ''.join(random.choice(string.ascii_uppercase + string.digits) for x in range(14)) + ".jpg"
    height, width = size_as_tuple[0], size_as_tuple[1]
    image.thumbnail((height, width), Image.ANTIALIAS)

    imagefile = open(os.path.join('/tmp', filename), 'w')
    image.save(imagefile, 'JPEG')

    imagefile = open(os.path.join('/tmp', filename), 'r')
    content = File(imagefile)

    return (filename, content) 
```

有没有办法改善这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:05:44.327

你可以替换：

```
height, width = size_as_tuple[0], size_as_tuple[1]
image.thumbnail((height, width), Image.ANTIALIAS) 
```

和

```
image.thumbnail(size_as_tuple, Image.ANTIALIAS) 
```

（特别是因为`width`和`height`被交换；它应该是`width, height = size_as_tuple`）

而且你不需要`open()`. `image.save(os.path.join('/tmp', filename))`足够。

# delphi - 在 TFrame 表面上绘画最安全和正确的方法是什么？

> ID：10681027
> 
> 赞同：4
> 
> 时间：2012-05-21T07:26:54.390
> 
> 标签：delphi, frame, delphi-xe, paint

我的项目中有一个框架（`TFrame`的后代），想在上面画一些东西。

正如我从论坛中看到的那样，常见的方法是覆盖`PaintWindow`方法。

我在一个干净的项目上试过这个：

```
type
  TMyFrame = class(TFrame)
  private
    FCanvas: TCanvas;
  protected
    procedure PaintWindow(DC: HDC); override;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy(); override;
  end;

implementation

{$R *.dfm}

constructor TMyFrame.Create(AOwner: TComponent);
begin
  inherited;
  FCanvas := TCanvas.Create();
end;

destructor TMyFrame.Destroy();
begin
  FCanvas.Free();
  inherited;
end;

procedure TMyFrame.PaintWindow(DC: HDC);
begin
  inherited;
  FCanvas.Handle := DC;
  FCanvas.Pen.Width := 3;
  FCanvas.Pen.Color := clRed;
  FCanvas.MoveTo(0, 0);
  FCanvas.LineTo(ClientWidth, ClientHeight);
  FCanvas.Pen.Color := clGreen;
  FCanvas.MoveTo(ClientWidth, 0);
  FCanvas.LineTo(0, ClientHeight);
end; 
```

但是，在将我的框架放在主窗体上之后，**调试器从未进入此方法，直到我`DoubleBuffered`在框架的属性中**启用。的任何值`ParentBackground`都不影响结果。

覆盖`WM_PAINT`处理程序也解决了问题：

```
type
  TMyFrame = class(TFrame)
  protected
    procedure WMPaint(var Message: TWMPaint); message WM_PAINT;
  ...

procedure TMyFrame.WMPaint(var Message: TWMPaint);
begin
  inherited;
  FCanvas.Handle := GetDC(Handle);
  FCanvas.Pen.Width := 3;
  FCanvas.Pen.Color := clRed;
  FCanvas.MoveTo(0, 0);
  FCanvas.LineTo(ClientWidth, ClientHeight);
  FCanvas.Pen.Color := clGreen;
  FCanvas.MoveTo(ClientWidth, 0);
  FCanvas.LineTo(0, ClientHeight);
  ReleaseDC(Handle, FCanvas.Handle);
end; 
```

无论将哪些值分配给`DoubleBuffered`或，此代码始终绘制交叉线`ParentBackground`。

但是当我尝试使用`BeginPaint`/`EndPaint`而不是`GetDC`/`ReleaseDC`时，问题又回来了：

```
procedure TMyFrame.WMPaint(var Message: TWMPaint);
var
  PS: PAINTSTRUCT;
begin
  inherited;
  FCanvas.Handle := BeginPaint(Handle, PS);
  FCanvas.Pen.Width := 3;
  FCanvas.Pen.Color := clRed;
  FCanvas.MoveTo(0, 0);
  FCanvas.LineTo(ClientWidth, ClientHeight);
  FCanvas.Pen.Color := clGreen;
  FCanvas.MoveTo(ClientWidth, 0);
  FCanvas.LineTo(0, ClientHeight);
  EndPaint(Handle, PS);
end; 
```

FCanvas.Handle 非零，但结果是一个空白帧。在这种情况下，设置`DoubleBuffered`或`ParentBackground`不更改任何内容。

也许我叫他们错了？

现在我使用带有/的`WM_PAINT`处理程序，因为我不想在这个框架上启用。另外我担心其他程序员在将我的框架放入他们的项目后会不小心禁用，并且会和我一样头疼。`GetDC``ReleaseDC``DoubleBuffered``DoubleBuffered`

但也许有更安全和正确的方法在框架表面上绘画？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T00:55:54.350

如果我没有在测试框架上放置任何控件，我可以复制您的问题（这也可能是我们没有人可以复制您的问题的原因 - fi 抛出一个控件以在视觉上确保框架在表单上）。

其`PaintHandler`上没有控件时不调用的原因，`DoubleBuffered`尽管没有控件但设置了时调用的原因，只是`WM_PAINT`消息处理程序的`TWinControl`设计方式：

```
procedure TWinControl.WMPaint(var Message: TWMPaint);
var
  ..
begin
  if not FDoubleBuffered or (Message.DC <> 0) then
  begin
    if not (csCustomPaint in ControlState) and (ControlCount = 0) then
      inherited
    else
      PaintHandler(Message);
  end
  else
  begin
    .. 
```

如您所见，when`DoubleBuffered`未设置且没有控件时，`PaintHandler`不会调用（毕竟没有什么可绘制的：我们不是自定义绘图（没有 csCustomPaint 标志），也没有要显示的控件）。设置时`DoubleBuffered`，将遵循不同的代码路径，该路径调用`WMPrintClient`，然后调用`PaintHandler`.

如果您最终要使用没有任何控件的框架（尽管不太可能），那么从上面的代码中可以看出修复（当您知道时也是明智的）：包含`csCustomPaint`在`ControlState`：

```
type
  TMyFrame = class(TFrame)
    ..
  protected
    procedure WMPaint(var Message: TWMPaint); message WM_PAINT;
  ..

procedure TMyFrame.WMPaint(var Message: TWMPaint);
begin
  ControlState := ControlState + [csCustomPaint];
  inherited;
  ControlState := ControlState - [csCustomPaint];
end; 
```

然后继承的`WM_PAINT`处理程序将调用`PaintHandler`.

* * *

至于为什么在消息处理程序中使用`BeginPaint`/进行绘画似乎不起作用，原因是您的绘画代码之前的调用验证了更新区域。打电话后检查你的成员，你会发现它是（0,0,0,0）。`EndPaint``WM_PAINT``inherited``rcPaint``PAINTSTRUCT``BeginPaint`

由于那时没有无效的区域，操作系统只是忽略以下绘图调用。您可以通过在画布上绘制之前使框架的客户矩形无效来验证这一点：

```
procedure TMyFrame.WMPaint(var Message: TWMPaint);
var
  PS: PAINTSTRUCT;
begin
  inherited;
  InvalidateRect(Handle, nil, False);      // <- here
  FCanvas.Handle := BeginPaint(Handle, PS);
  FCanvas.Pen.Width := 3;
  FCanvas.Pen.Color := clRed;
  FCanvas.MoveTo(0, 0);
  FCanvas.LineTo(ClientWidth, ClientHeight);
  FCanvas.Pen.Color := clGreen;
  FCanvas.MoveTo(ClientWidth, 0);
  FCanvas.LineTo(0, ClientHeight);
  EndPaint(Handle, PS);
end; 
```

现在你会看到你的绘图会生效。当然，您可以选择不调用`inherited`，或者仅使您将绘制的部分无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:45:53.043

看起来它只有在设计器中才被调用

```
procedure TCustomFrame.PaintWindow(DC: HDC);
begin
   // Paint a grid if designing a frame that paints its own background
   if (csDesigning in ComponentState) and (Parent is TForm) then
   with TForm(Parent) do
      if (Designer <> nil) and (Designer.GetRoot = Self) and
         (not StyleServices.Enabled or not Self.ParentBackground) then
          Designer.PaintGrid
   end; 
```

做一些特殊绘画的唯一方法是将 WM_PAINT 添加到您的框架中：

```
TFrame3 = class(TFrame)
protected
  procedure WMPaint(var Message: TWMPaint); message WM_PAINT;
end; 
```

# magento - 静态块中的 magento CE v1.6 toplinks

> ID：10681030
> 
> 赞同：2
> 
> 时间：2012-05-21T07:27:03.943
> 
> 标签：magento

我希望将 Magento CE 1.6 中的 topLinks 显示在静态块中。这是因为我的网站正在运行四个不同的商店 [多商店 - 不同的域]，并且只需要在两个商店上拥有 topLinks，同时使用一个模板。

我确实尝试转换 php 调用 [getChildHtml('topLinks'); ?>] 进入静态块内的块标记但未成功。已经深入研究了 template_links [由不同的 xmls 制成] 的 xml，但无法确定如何在静态块中创建一个 {{block}} 以显示 topLinks。

对静态块的调用已经到位，只需要帮助实现内部的topLinks。

任何帮助将不胜感激。

最诚挚的问候

工厂

* * *

我的问题很好：

基本上我需要修改page.xml

从

```
<block type="page/template_links" name="top.links" as="topLinks"/> 
```

至

```
<layout>
<static_block_top_links>
    <reference name="header">
        <action method="unsetChild">
            <name>topLinks</name>
        </action>
        <block type="cms/block" before="-" name="some_name" as="topLinks">
            <action method="setBlockId">
                <name>some_static_block</name>
            </action>
        </block>
    </reference>
</static_block_top_links>

<STORE_store>
    <update handle="static_block_top_links" />
</STORE_store>

<STORE_law>
    <update handle="static_block_top_links" />
</STORE_law> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:55:42.827

使用 local.xml 来实现您的更改：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <default>
        <reference name="header">
            <!-- Unset original toplinks block -->
            <action method="unsetChild">
                <name>topLinks</name>
            </action>

            <!-- Add static block in place with same alias -->
            <block type="cms/block" before="-" name="some_name" as="topLinks">
                <action method="setBlockId">
                    <name>some_static_block</name>
                </action>
            </block>
        </reference>
    </default>
</layout> 
```

请注意，“some_name”可以是“top.links”以外的任何内容，因为这会导致核心 XML 文件中的一些内容尝试对您的 cms 块执行操作。

作为对您的编辑的回应，您可以轻松地为某些商店执行此操作，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <static_block_top_links>
        <reference name="header">
            <action method="unsetChild">
                <name>topLinks</name>
            </action>
            <block type="cms/block" before="-" name="some_name" as="topLinks">
                <action method="setBlockId">
                    <name>some_static_block</name>
                </action>
            </block>
        </reference>
    </static_block_top_links>

    <STORE_myfirststore>
        <update handle="static_block_top_links" />
    </STORE_myfirststore>

    <STORE_mysecondstore>
        <update handle="static_block_top_links" />
    </STORE_mysecondstore>
</layout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:59:10.573

您好，对于拥有 magento CE 1.6+ 多商店多域并希望删除某些商店的 topLinks 的任何人，这是正确的方法。

在您的 app/design/frontend/default/yourtheme/layout/ 中创建一个 local.xml

你的 local.xml 应该是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
<STORE_mystore1>
    <reference name="header">
        <action method="unsetChild">
            <name>topLinks</name>
        </action>
    </reference>
</STORE_mystore1>

<STORE_mystore2>
    <reference name="header">
        <action method="unsetChild">
            <name>topLinks</name>
        </action>
    </reference>
</STORE_mystore2>   
</layout> 
```

将 mystore1 和 mystore2 替换为 Store View [Admin -> Manage Stores -> Store View Name -> Code] 下的代码

确保将 layout.xml 编码为 UTF-8

上传 app/design/frontend/default/yourtheme/layout/ 文件夹中的 layout.xml。

刷新缓存。

我要感谢 Daniel Sloof 和 Robert Popovic 的意见。

# php - Freebase MQL 读取服务和 PHP file_get_contents

> ID：10681034
> 
> 赞同：1
> 
> 时间：2012-05-21T07:27:13.980
> 
> 标签：php, freebase, mql

我的代码：

```
$api_url = "https://www.googleapis.com/freebase/v1-sandbox/mqlread?query=";
$query = $freebase_query."&callback=myfuncname"."&key=".$cfg['fbkey']; 

$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
              "Cookie: foo=bar\r\n"
  )
);

$context = stream_context_create($opts);
$json = file_get_contents($api_url.$query, false, $context, null);
$display = $api_url.$query;
$json_output = json_decode($json); 
```

错误： **警告**：file_get_contents(https://www.googleapis.com/freebase/v1-sandbox/mqlread?query=[{"mid": null,"name": null,"topics:mid|=":[" /m/0gn30","/m/0tc7"]}]&callback=myfuncname&key=[key]) [function.file-get-contents]：打开流失败：HTTP 请求失败！**第59**行**[文件名]**中的 HTTP/1.0 400 错误请求

 **如果我将 URL 直接粘贴到浏览器中，我会毫无问题地返回结果！所以我假设它是我调用服务的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T23:09:44.263

尝试使用 curl 代替，如下所示：

```
$freebase_query = array(array('id' => NULL, 'name' => NULL, 'topics:mid|=' => array('/m/0gn30','/m/0tc7')));
$api_url = 'https://www.googleapis.com/freebase/v1-sandbox/mqlread';
$query = $api_url . '?query=' . urlencode(json_encode($freebase_query));

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $query);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$json_data = json_decode(curl_exec($ch), true);
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:34:53.410

您是否在 php.ini 中将 allow_url_fopen 设置为“on”？你设置cookie有什么原因吗？**

# asp.net - ASP.NET Web 应用程序中的 VSTO 集成

> ID：10681035
> 
> 赞同：1
> 
> 时间：2012-05-21T07:27:20.297
> 
> 标签：asp.net, asp.net-mvc-3, vsto

我想在 web 应用程序 mvc3 中实现 VSTO 词集成，比如谷歌文档。是否可以在线更新word文档？通过 VSTO。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:34:07.483

VSTO 使您能够在 MS Office 应用程序（例如 Word、Excel 等）中运行您的代码，并将您的应用程序与 Office 的功能集成。但是，这仅包括不公开任何 Web UI 的桌面 Office 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:30:53.623

VSTO 不是为在 Web 应用程序中使用而设计的。它引入了对不是服务器端应用程序的 MS Office 的依赖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:15:10.723

VSTO 不能在 Web 应用程序中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T16:18:46.583

SharePoint and SharePoint Online is there for your purpose.

# asp.net - 我可以在没有输入参数的情况下调用 Entity Framework 4.x 中的存储过程吗

> ID：10681036
> 
> 赞同：-3
> 
> 时间：2012-05-21T07:27:23.250
> 
> 标签：asp.net, sql-server, entity-framework-4

我没有看到任何对使用 EF 调用存储过程（当前使用 4.3）而不传递任何参数的引用。这是否被认为是一种不好的做法，不支持或其他什么，因为我在任何地方都找不到答案，DBA 已存储许多程序没有输入参数。

任何人的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:59:42.293

看来您不能传入空值。看看 ObjectParameter，它有一个重载。值和类型。

```
 public ObjectParameter(string name, object value); 
```

和

```
 public ObjectParameter(string name, Type type); 
```

您将需要使用 DBNull.Value 和 typeof(whatever) 等...
我通常在存储过程中创建一个输入参数作为解决方法，因为我没有时间用 null 来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:41:14.363

I run into this same issue. If you pass in Null in place of your ObjectParameters it will throw an exception saying that you must have one.

If you pass in DBNull it says that you have specified a parameter on a Sproc that doesn't except parameters and throws an exception.

The only work around for this I have been able to come up with is to modify the sproc to accept a dummy parameter you do nothing with, to satisfy the requirement.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:35:14.520

实际上，您可以通过仅调用存储过程的名称并省略参数来传递任何参数：

```
context.ExecuteFunction<TestSPROCResult>("TestSPROC"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:03:09.447

如果您首先使用数据库，实体框架将在您创建/更新模型时在数据库中显示存储过程，包括没有输入参数的存储过程。您可以在模型中包含存储过程并在模型浏览器中添加函数导入。上下文通过调用非泛型[ExecuteFunction](http://msdn.microsoft.com/en-us/library/dd986915)方法来执行函数。（它说它“丢弃从函数返回的任何结果”，但事实并非如此，见下文）。

这是否是不好的做法？不必要。我可以想象用户可能希望在应用程序中触发的各种任务，例如执行复杂计算的某个后台进程或对性能敏感的进程。

也许比输入参数更重要的是 sproc 至少*返回*一些东西，以便应用程序可以通知用户 sproc 是否/何时/如何完成。目前，添加函数导入时，唯一的选择是返回一个集合，而不是单个标量值。这意味着存储过程中的`RETURN`语句将被 EF 忽略。它至少应该在`SELECT`语句中返回值，以便 EF 能够收集输出。

# python - 在 Python 中定义一个带有可选参数的类

> ID：10681038
> 
> 赞同：10
> 
> 时间：2012-05-21T07:27:26.510
> 
> 标签：python, class, arguments, default

```
class class1():
    def setdata(self,value1, value2):
    self.data = value1+value2
def display(self):
    print(self.data) 
```

对于上面的代码，当我使用它时。它将需要两个参数。

```
>>>a = class1()
>>>a.setdata('123','456') 
```

但是，如果我想设置一个`default value`for `value2`，例如，它的（`value2`）默认值为`'000'`.

下次我使用该课程时，我可以输入

```
>>>a = class1()
>>>a.setdata('123') 
```

`a.data`将会`'123000'`

或者我可以输入

```
>>>a = class1()
>>>a.setdata('123','654') 
```

`a.data`将会`'123654'`

如何做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T06:24:54.740

请试试这个：

```
def setdata(self, value1, value2 = '000'):
   Your code here 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T07:35:15.253

尝试定义一个[默认参数](http://docs.python.org/tutorial/controlflow.html#default-argument-values)，就像这样。

```
class class1():
    def setdata(self,value1, value2='000'):
        ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T07:34:01.420

```
class class1:    
    def setdata(self,value1, value2=456):
        self.data = value1+value2
    def display(self):
        print(self.data) 
```

可能这解决了你的问题

# iphone - 在 UIWebView 中渲染 html 并从缓存中加载图像

> ID：10681040
> 
> 赞同：3
> 
> 时间：2012-05-21T07:27:36.533
> 
> 标签：iphone, ios, uiwebview

当用户第一次运行我的应用程序时，我已加载所有图像并将其保存到库目录中的缓存文件夹中：**Library/Caches/imgcache/myApp/ready/**

**假设文件名称为：** http/__wscdn.bbc.co.uk_worldservice_assets_images_2012_01_13_120113094952_international_space_station_304x171_reuters_nocredit.jpg

现在，当用户离开网络时，我正在使用 loadHTMLString 渲染 html，如果 html 包含以前存储的文件的任何 img src，它会从缓存而不是从 Internet 加载，因为用户无法访问 Internet。

**现在我的问题是我该如何处理这个问题？我怎样才能做到这一点 ？请帮帮我..**

例如 ：

我有带 html 的字符串，

```
>"<div class="g-container story-body"> <div class="bodytext"> <div class="module "> <div >class="image img-w304"><img width="304" height="171" >src="http://wscdn.bbc.co.uk/worldservice/assets/images/2012/05/18/120518135959_facebook_304>x171_bbc_nocredit.jpg" alt=""/> <div class="module "> <div class="image img-w304"><img >width="304" height="171" >src="http://wscdn.bbc.co.uk/worldservice/assets/images/2012/05/18/120518145635_facebook_304>x171_bbc_nocredit.jpg" alt=""/><p class="caption"></p> </div> </div> <p></p> </div> </div> ><div class="g-container story-body"></div>" 
```

**我已经将这两个图像缓存在用户文档文件夹中，现在当用户无法访问网络时，我想做这样的事情：**

```
><div class="g-container story-body"> <div class="bodytext"> <div class="module "> <div >class="image img-w304"><img width="304" height="171" >src="**Library/Caches/imgcache/myApp/ready/**http://wscdn.bbc.co.uk/worldservice/assets/ima>ges/2012/05/18/120518135959_facebook_304x171_bbc_nocredit.jpg" alt=""/> <div class="module >"> <div class="image img-w304"><img width="304" height="171" >src="**Library/Caches/imgcache/myApp/ready/**http://wscdn.bbc.co.uk/worldservice/assets/ima>ges/2012/05/18/120518145635_facebook_304x171_bbc_nocredit.jpg" alt=""/><p class="caption">>>``</p> </div> </div> <p></p> </div> </div> <div class="g-container story-body"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:32:58.880

您可以通过 webview 的`- (void)loadHTMLString:(NSString *)stringbaseURL:(NSURL *)baseURL`方法使用图像缓存。您需要将 baseURL 指定到本地应用程序库目录。下面的示例代码：

```
NSString * htmlContent = @"your html content";
NSString * path = [NSHomeDirectory() stringByAppendingPathComponent:@"Library"];
[_webView loadHTMLString:htmlContent baseURL:[NSURL fileURLWithPath:path]]; 
```

如果您的图像位置是“YourApp/Library/imageCache/1.png”，则图像 url 应该是相关的 url，例如“./imageCache/1.png”。

希望能帮助到你。

# php - 在 php.ini 中找不到 xcache.var_size

> ID：10681042
> 
> 赞同：0
> 
> 时间：2012-05-21T07:27:40.070
> 
> 标签：php, xcache

我需要更改 php.ini 文件中的 xcache.var_size。我似乎无法在那里找到它的问题。我已经使用 phpinfo(); 验证了这对 eby 是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:51:57.670

确保该值不是从另一个 ini 文件加载的。PHP 可以加载多个 ini 文件。如果它不在任何 ini 文件中，那么您可能会看到默认值。在这种情况下，您可以通过自己添加来覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:51:24.650

检查 /etc/php5/mods-available/xcache.ini

# jquery - 每次点击都有新的 jQuery 对话框

> ID：10681046
> 
> 赞同：0
> 
> 时间：2012-05-21T07:27:49.617
> 
> 标签：jquery, dialog

我们如何使用一个按钮打开多个 jQuery 对话框？

```
<script>
$(document).ready(function() {
    $("#private1").dialog({
    beforeClose: function(event, ui) {
    removeprivate();
   },
    width: 460,
    height: 300,
    closeOnEscape: false,
    hide: "fadeout",
    resizable: false,
    }
    );
  });
</script>
<div id="dialog" title="hi"></div> 
```

我想要点击链接打开一个对话框，再次点击打开另一个对话框等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:35:37.390

```
 $('.button').click(function() {
      $('#dialog').clone().appendTo('body').dialog({
           //your dialog options goes here
      }).dialog('open');
 })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:03:41.730

```
 function TestMessage(message) {
            $('<div class="TestDialog"></div>').appendTo('body')
                    .html('<div><h6>' + message + '</h6></div>')
                    .dialog({
                        modal: true, title: 'Test message', zIndex: 10000, autoOpen: true,
                        width: 460, height: 300, modal: false, resizable: false, closeOnEscape: false,
                        //hide: "fadeout",
                        beforeClose: function (event, ui) {
                            //removeprivate();
                        },
                        buttons: {
                            Ok: function () {
                                $(this).dialog("close");
                            }
                        },
                        close: function (event, ui) {
                            $(this).remove();
                        }
                    });
        };

        $(document).ready(function () {
            $('#btnTest').live('click', function () {
                TestMessage('Hi!');
            });
        }); 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/sqdkB/](http://jsfiddle.net/nanoquantumtech/sqdkB/)

# actionscript-3 - AS3：使用字符串作为变量

> ID：10681051
> 
> 赞同：4
> 
> 时间：2012-05-21T07:28:01.953
> 
> 标签：actionscript-3

是否有可能从字符串中提取变量名并将其用作变量

```
var myvar:String = "flash";
var flash:Number = 10;
trace( myvar as variable ); 
```

类似的东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T08:21:35.370

变量名作为字符串可以这样做：

```
this["myvar"] = "flash"; 
```

笔记：

*   `ReferenceError`如果该属性之前没有定义并且`this`引用一个不是 的对象，这将抛出一个`dynamic`。
*   您当然可以替换`this`为要使用属性的对象的实例名称，例如`mySprite["x"]`.
*   您也可以使用这种方法来调用方法：`this["addChild"](mySprite);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T08:12:58.200

您可以将其用作对象的属性。

```
public dynamic class MyClass {
    function MyClass(propName:String, propValue:*) {
        this[propName] = propValue;
    }
} 
```

或者

```
var myvar:String = "flash";
var o : Object = {};
o[myvar] = 10;
trace(o.flash); //10 
```

如果您不知道属性名称将是什么，那么您应该使用`dynamic`class （默认情况下`Object`）`dynamic`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:26:08.513

您需要的与`Dictionary`.NET 中的类类似，并且默认在`Object`AS3 的类中可用。

```
var key:String="hello";
var value:int=100;
var map:Object=new Object();
map[key]=value; 
```

现在，您可以获得您的储值

```
trace(map[key]); 
```

如果需要，您还可以在此基础上创建一个如下所示的类：

```
public class Dictionary {
    private var _keys:Array;
    private var _maps:Object;
    public function Dictionary() {
        _keys=[];
        _maps:Object={};
    }

    //Returns the array of all saved keys
    public function get keys():Array {
        return _keys;
    }

    //Sets a key-value pair
    public function setProperty(key:*, value:*):int {
        _maps[key]=value;
        return _keys.push(key);
    }

    //Returns the value stored at a particular key
    public function getProperty(key:*):* {
        if(_keys.indexOf(key) != -1) {
            return _maps[key];
        }
        return null;
    }

    //Removes a key-value pair if it exists and returns if the key existed
    public function deleteProperty(key:*):Boolean {
        var ix:int;
        if((ix=_keys.indexOf(key)) != -1) {
            //dissociate value from key
            delete _maps[key];
            //delete key
            _keys.splice[ix,1];
            return true;
        }
        return false;
    }
} 
```

您可以将其用作：

```
var dict:Dictionary=new Dictionary();
//set the value
dict.setProperty("flash", 10);

//get the value
dict.getProperty("flash");

//delete if not required
dict.deleteProperty("flash"); 
```

请注意，这可用于设置任何类型的键和值。它还解决了`ReferenceError`如果属性未定义的问题，并且您不需要在您的代码中使用任何动态类（因为`Dictionary`该类在内部处理它）。

一个非常典型的用途是定义解析函数。例如在电子表格查看器中：

```
var parseFuncts:Dictionary=new Dictionary();
parseFuncts.setProperty("csv", Parsers.parseCSV);
parseFuncts.setProperty("xml", Parsers.parseXML);
parseFuncts.setProperty("txt", Parsers.parseTXT);
parseFuncts.setProperty("xls", Parsers.parseXLS);
parseFuncts.setProperty("xlsx", Parsers.parseXLSX);

var fileToOpen:File; //Already contains the file to open

private function open():void {
    var f:Function=parseFuncts.getProperty(fileToOpen.extension);
    f.apply(this);
} 
```

# json - JSON 作为数据传输的媒介

> ID：10681055
> 
> 赞同：2
> 
> 时间：2012-05-21T07:28:13.823
> 
> 标签：json

我真的很困惑在什么情况下以及如何使用 JSON 作为从客户端到服务器的数据传输的手段。使用它有什么好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:33:08.167

如果您的“客户端”可以运行 JavaScript，那么 JSON 非常有用，因为从 JSON 字符串创建对象非常容易。一般来说，JSON 比 XML 具有更少的“开销”，并且是简单分层数据的更紧凑的表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T07:29:13.647

JSON 的简单性令人惊叹。美妙之处在于它的对象和数组的简单结构提供了比 xml 更简单的语言。下面是学习 JSON 基础知识的参考： [Json Example](http://jsonexample.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:41:21.817

JSON 是一种非常轻量级的数据传输媒介。它几乎可以与系统中的任何 ajax 请求一起使用。

JSON 比 XML 更容易阅读（一旦你习惯了它），但在数据验证方面却不尽如人意。

Id 选择 XML 作为系统任何入口点中的传输机制，可由外部方调用。XML 非常成熟，并且有很多内置功能（如严格的模式验证），这将阻止我编写大量的管道代码。

对于 AJAXy 的所有其他内容，我随时都会选择 JSON。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:30:21.963

JSON 是一种轻量级的文本数据交换格式，与 xml 相比具有自描述性且易于理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T07:31:04.533

如果您有多个客户端，那会很方便，因为 JSON 是一种众所周知的格式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T07:38:57.650

它是 JavaScript 对象表示法。您可以使用它来回发送数据。它通常被推荐，因为没有太多的开销，就像你使用 XML 得到的那样。这就是为什么它比带有 Ajax 的 XML 更受欢迎的原因

JSON 是一种轻量级的数据交换格式（将其视为节食的 XML）。基本上任何可以使用 XML 序列化数据的地方都可以使用 JSON。

链接地址：--

[什么是 JSON？](https://stackoverflow.com/questions/286945/what-is-json)

[http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)

使用 JSON 的好处：--

[http://www.developerfeed.com/json/faq/what-are-benefits-using-json-over-xml](http://www.developerfeed.com/json/faq/what-are-benefits-using-json-over-xml)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-21T07:40:13.470

为什么是文本格式而不是二进制格式？

方便不同平台之间的互操作。人类可读的消息很容易调查和调试。可扩展，可以添加新字段而不会打扰旧客户端。但是我们付出了一些代价，文本消息会比二进制消息大。

为什么使用这种特定的文本格式，而不是 CSV 或 XML？

优于 CSV 以支持任意复杂的结构、数组等。

JSON 比 XML 更简单，除非你有非常好的 XML 工具。在 WEB 2.0 客户端中越来越多地使用 JavaScript 使得 JSON 非常有吸引力，实际上 JSON**是**Javsacript，因此不需要特殊的解析。然而，在大型项目中，您可能会发现您开始受益于更多的控制，因此使用 JSON 模式：迈向更类似于 XML 的世界的一步。

# javascript - JavaScript 变量：将函数返回的值相加，然后将它们乘以另一个函数的返回值

> ID：10681058
> 
> 赞同：0
> 
> 时间：2012-05-21T07:28:31.643
> 
> 标签：javascript, variables

```
var totalPrice = (getOne() + getTwo()) * getThree(); 
```

有没有理由为什么这不起作用？我已经用谷歌搜索了，但我认为我不明白我在做什么足以使用有用的搜索词。作为测试，我尝试不使用括号，看看它是否至少将最后两个函数相乘并添加第一个函数。那甚至不起作用，所以我猜问题出在`*`操作员身上。

谢谢，乔

编辑：谢谢大家，看起来我的一个函数中缺少一个“s”。抱歉，是我的错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:31:55.050

这取决于你如何定义你的功能：例如

```
function getOne() { return 1; }
function getTwo() { return 2; }
function getThree() { return 3; }

var totalPrice = (getOne() + getTwo()) * getThree();
console.log(totalPrice); // 9 
```

也许你没有返回一个值`return`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:34:14.253

这应该有效。这是一个 jsfiddle：http: [//jsfiddle.net/CxD84/](http://jsfiddle.net/CxD84/)

也许问题来自您的一个函数返回，就像在这个 jsfiddle 中一样：http: [//jsfiddle.net/3eRCn/1/](http://jsfiddle.net/3eRCn/1/)

# php - 亚马逊 S3 样本中的错误

> ID：10681059
> 
> 赞同：1
> 
> 时间：2012-05-21T07:28:33.570
> 
> 标签：php, amazon-s3

大家好，我在一个站点中使用 amazon s3 存储桶。[并且在此处](http://aws.amazon.com/sdkforphp/)给出的 amazon SDK for PHP中，在更改配置文件 (config-sample.inc.php) 中的值后未运行示例。`key`根据说明，我在设置和值后尝试查看此页面`secret`。`_samples/cli-s3_get_urls_for_uploads.php`显示错误如下。 ![示例中的 Amazon SDK 错误](../Images/27eaa03aedef84c328b906b0e22b60d0.png)

任何有关此解决问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:31:12.883

从[这里](http://aws.amazon.com/articles/4261?_encoding=UTF8&jiveRedirect=1)：

> 1.  导航到 SDK 目录中的 config-sample.inc.php 文件，**并将其重命名为 config.inc.php**。

# tridion - 来自多个网站的同步联系人问题

> ID：10681062
> 
> 赞同：1
> 
> 时间：2012-05-21T07:28:48.953
> 
> 标签：tridion, tridion2009, tridion-2011, tridion-content-delivery

我们正面临观众管理器的配置文件同步服务的问题。

我们有这样的场景，我们分两步进行订阅：

1.  我们正在使用唯一 id 的用户电子邮件地址，我们将记录保存在 tridion_submgmt 中，后来配置文件同步服务将此记录保存到 tridion_email 数据库中，并使用这个唯一的电子邮件 ID。
2.  我们正在获取用户的出生日期和手机号码，我们希望更新相同的记录。

这 2 个步骤一个接一个地运行。

此外，我们有 87 个网站，其中有不同的地址簿和一个同步目标设置。

我们面临同步问题，有时记录正在更新，但有时记录未按步骤 2 更新。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T08:52:30.077

您是直接将记录添加到数据库中吗？这不受支持，并且可能会干扰同步过程的正常工作。

如果您使用 API 更新记录（在 Content Manager 或 Content Delivery 端），它将自动触发同步服务并确保信息正确同步

根据您的要求的一个小（java）示例：

```
Contact testContact = new Contact();
testContact.setExtendedDetail("Email", "user@domain.com");
testContact.setExtendedDetail("MobileNr", "1234567890");

Calendar calendar = Calendar.getInstance();
calendar.set(1970, Calendar.OCTOBER, 17, 0, 0, 0); // 17 okt 1970   
testContact.getDetails().get("dateOfBirth").setFieldValue(calendar.getTime());

testContact.save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:57:20.363

过去，我们必须设置联系人的 AddressBookId 才能同步到特定的通讯录。

testContact.setGroupId(20); // 20是通讯录id

这是java示例代码。对于.net，我相信它是 testContact.AddressBookId = 20 。

# struct - 为什么我的结构代码不起作用？

> ID：10681063
> 
> 赞同：3
> 
> 时间：2012-05-21T07:29:07.530
> 
> 标签：struct, go

```
package app

type ConfigSet struct {
    installed bool
}

import (
    "fmt"
    "html/template"
    "net/http"
)

func init() {
    config := ConfigSet{}

    // -------------------------------------- //
    //             CONFIGURATION              //
    // -------------------------------------- //

    // Change to "true" after configuration is done!
    config.installed = false

    // -------------------------------------- //
    //           END CONFIGURATION            //
    // -------------------------------------- //

    http.HandleFunc("/", index)
    http.HandleFunc("/index.php", index)
}

func index(w http.ResponseWriter, r *http.Request) {
    if config.installed == false {
        w.Header().Set("Location", "/install/")
        return
    }
} 
```

我似乎无法弄清楚为什么这不起作用。我得到的错误是：

```
2012/05/21 13:22:01 go-app-builder: Failed parsing input (1 error)
2012/05/21 13:22:01 /root/TravianGAE/app/app.go:7:1: expected declaration, found 'import' 
```

我不明白，我应该在那里声明什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T07:33:04.283

把你的`import`第一个，在`type`.

# magento - 按产品 ID 从数据库中获取产品并将其添加到我的购物车

> ID：10681064
> 
> 赞同：-1
> 
> 时间：2012-05-21T07:29:08.563
> 
> 标签：magento, magento-1.6

我想添加一个**输入框**，*用户可以在其中输入* **Product ID**，除了**AddtoCart 按钮**单击该产品将*添加到用户 Shopping Cart*中。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:28:31.583

通过使用 jQuery.post() 完成

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# memcached - 一个内存缓存可以同时被两个不同的进程更新吗？

> ID：10681074
> 
> 赞同：1
> 
> 时间：2012-05-21T07:30:24.003
> 
> 标签：memcached

我正在将 memcache 与 CakePHP 一起使用。

我正在运行一个更新内存缓存键的多线程进程。

因此，两个不同的进程最终更新同一个 memcache 键的概率为 10%，这会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:58:36.733

您可以在使用如下代码设置之前“锁定”一个键。

此代码假定您拥有 Instrumentation-for-php 库：

[http://code.google.com/p/instrumentation-for-php](http://code.google.com/p/instrumentation-for-php)

如果您不想使用它，只需注释掉仪表线

```
function acquire_mutex_or_wait($key,$memcache = false) {
    Instrumentation::get_instance()->increment('memcache_mutex_requests', 1);
    if($memcache === false) {
            #bring in memcache from global scope
            global $memcache;
    }
    #prepend LOCK:: to the key to designate the new key as a lock for the given key
    $key = "LOCK::$key";

    #generate a random number for the lock (see below)
    $lockval = mt_rand(1,2^31);

    #add is SUPPOSED to be atomic, but it isn't really with multiple servers
    #to protect against two connections getting the mutex we initialize it
    #to a random value and check the value after setting.  If we didn't
    #really aquire the mutex, the value we get will be different from the
    #value we set
    $got_lock = $memcache->add($key, $lockval);
    if($got_lock) {
            $got_lock = $memcache->get($key);
            $got_lock = $got_lock === $lockval;
            if($got_lock) return true;
    }

    #the mutex was not acquired.  we must wait for it to be released
    $sleep_time = .01; #initial sleep time
    $sleep_time_increment = .05;
    $max_sleep_time=1; #maximum number of seconds to sleep between checking locks
    Instrumentation::get_instance()->timer();
    Instrumentation::get_instance()->increment('memcache_mutex_waits', 1);
    while(1) {
            usleep($sleep_time * 1000000);
            $sleep_time += $sleep_time_increment;
            if($sleep_time > $max_sleep_time) $sleep_time = $max_sleep_time;
            $exists = $memcache->get($key);
            if(!$exists) break; #mutex has been released
    }
    Instrumentation::get_instance()->increment('memcache_mutex_wait_time',   Instrumentation::get_instance()->timer());
    return false;
}

#NOTE - only the connection that acquired a mutex should release it.  there is no
#protection to ensure this is the case
function release_mutex($key, $memcache = false) {
    if($memcache === false) {
            #bring in memcache from global scope
            global $memcache;
    }

    $key = "LOCK::$key";
    return($memcache->delete($key));
} 
```

# wpf - 编辑 Surface2 WPF 项目时，Expression Blend 崩溃

> ID：10681077
> 
> 赞同：1
> 
> 时间：2012-05-21T07:30:40.153
> 
> 标签：wpf, expression-blend, pixelsense

我正在使用 WPF 构建一个 Surface2 项目。我正在使用带有 SP1 的 Visual Studio 2010 和带有 SketcFlow 的 Expression Blend 4。

当我在 Expression Blend 中打开项目时，程序在加载主视图 xaml 的设计器视图后停止响应。然后我可以选择杀死它或在 Visual Studio 中调试它。

在 xaml 视图中，我只有一个 scatterview、一个地图控件和一个标签可视化器。

这是我在 Visual Studio 中调试时遇到的错误：

```
System.InvalidOperationException was unhandled
  Message=The scene node must be a composite node to access properties.
  Source=Microsoft.Expression.DesignSurface 
```

InvalidOperationException 似乎与从其父级以外的任何其他地方访问 UI 线程有关（基于[this](http://social.msdn.microsoft.com/search/en-US/search/default.aspx?query=System.InvalidOperationException)和[this](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28EHINVALIDOPERATION%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29&rd=true)）。稍后我确实在地图图层顶部绘制了一些折线，但这不应该破坏事情，因为我的相同实现在纯非 Surface WPF 项目中工作。

我的目标框架在 Visual Studio 端设置为 .NET 框架 4。我找到了这个主题：[在 Expression Blend 中使用 Microsoft Surface 控件](https://stackoverflow.com/questions/7465525/using-microsoft-surface-controls-in-expression-blend)，但恐怕这对我的情况没有帮助。如果我从 Visual Studio 创建一个空的 Surface2 WPF 项目，然后在 Blend 中打开它，一切正常。还手动将平台设置为任何 CPU，如在[尝试在 Expression-Blend 4 中打开 WPF 项目时遇到的麻烦中所述，该项目是在 Visual Studio 2010 中创建的，](https://stackoverflow.com/questions/6775687/trouble-when-trying-to-open-wpf-project-in-expression-blend-4-which-was-created)但不起作用。

任何快速解决方法的解决方案或想法？我正在考虑尝试强制 Blend 在其自己的编辑器而不是设计器中打开视图 xaml，但无法找到如何做到这一点。

# xml - XML over Sockets 是好还是坏的做法？

> ID：10681080
> 
> 赞同：5
> 
> 时间：2012-05-21T07:30:58.623
> 
> 标签：xml, sockets, architecture, tcp

一段时间以来，我一直在研究通过套接字传输 xml 的系统。而且我从来没有真正理解过选择 xml 而不是套接字而不是自定义协议的真正优势是什么。

但是我确实看到很多开发人员（特别是最初的 Web 开发人员）设置了这种实现方式（xml over sockets）。

我确实明白这更“人类可读”（这就是我一直听到的）。

但，

*   Xml 携带大量字符，导致大量消息，而实际上内容非常小而简单。

*   消息大小各不相同，因此您需要保证以特定字符或字符串模式终止消息。

*   解析xml时开销更大

由于所有这些原因，当我可以使用使用固定大小消息的自定义协议设置我的系统时，我仍然怀疑是否考虑将 XML over Sockets 用于新系统。避免传输大量消息和性能命中在客户端大小上解析 xml。

我这样想有错吗？就系统架构而言，什么是“最好的”？

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T07:42:14.503

在通过网络传输数据时，传统上使用 XML 的主要原因是它是可扩展的。它可以扩展您的应用程序并将其转变为其他应用程序在您的基础上构建的潜在平台，或者它使其他应用程序能够更轻松地与您集成，而无需解决已经解决的问题。

毕竟，这就是开发人员有偿做的事情。解决新问题。不创建它们。

Ryan Tomayko 在他的博客文章[“我如何向我的妻子解释 REST”](http://tomayko.com/writings/rest-to-my-wife)中谈到了这一点，当时他强调使用标准意味着世界各地的单个系统可以联网以形成庞大的、有凝聚力的但独立的系统。

当您使用自己的自定义协议时，您基本上将您的应用程序限制为仅在它自己的小世界中进行通信。然后，当需要将其与另一个系统粘合在一起时，两端都需要进行更多的集成工作。

话虽如此，JSON 作为 XML 的替代品开始获得很大的吸引力。它更轻量级，被多个平台理解，实际上是 Web 语言 JavaScript 的原生语言。

任何一种选择都很棒，因为您使用的东西是所有有经验的开发人员都可以轻松理解的，并且每个系统都可以使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T07:46:50.827

使用自定义协议不是一个好主意，因为这意味着在开发和测试方面需要付出很多努力，而这是不必要的。此外，除非您付出大量努力以通用方式设计它，否则它将是一个特定的实现。使用 XML，传输本身不会与您的应用程序捆绑在一起。由于 XML 灵活且可扩展，它允许您更改结构和内容而不影响传输。

但是，正如您所指出的，使用 XML 有其自身的一系列缺点。确实，它涉及不必要的重量转移。但是，像 JSON 这样的替代方案将是解决这些问题的好主意。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-21T07:40:49.150

这里没有“最佳”决定，这完全取决于您的要求。如果您需要非常高的性能，那么您应该使用一些带有小消息的自定义二进制协议。然而，这也带来了缺点。XML 的主要优点是它是一种非常标准化的格式，易于从各种平台和应用程序中读取。例如，使用自定义协议，您将需要实现消息的序列化和反序列化。此外，XML 比自定义格式更具可扩展性。

总而言之，这实际上取决于您系统的要求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-21T08:57:50.580

协议在套接字上运行的事实与这个问题没有直接关系。

这么多人选择将 XML 用于其协议的表示层的原因主要是因为它避免了指定和实现您自己的表示层的工作量和成本。是的，如果您想在消息大小、更改的可能性、实施成本和其他因素之间进行不同的权衡，那么您很可能能够设计出一种比 XML 更好地针对这些要求进行优化的协议。或者，考虑到很多非常优秀的人参与了 XML 设计，您可能会设计一些更糟糕的东西（通常是因为您的长期需求不是您认为的那样 - 例如，您最终可能会设计一些东西出色的表现，但变革的潜力很差）。但无论你的设计做得好还是坏，

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-21T07:40:08.623

设计决策都是关于权衡的。您已经列举了 XML 为您提供的东西——可读性和自我描述。它还带有描述语言（XSD），非常便携等。

但是这些优点伴随着你提到的缺点。因此，让我们一一解决：

**冗长**

是的，XML 很冗长，既是自描述的又是基于文本的。如果性能是一个问题，这只是一个真正的问题。是吗？积极的权衡呢？

请注意，这里一个合理的替代方案是 JSON，它同样可读但效率更高。

**不同大小**

是的，但这取决于连接层。如果您没有持久连接（例如 HTTP），或者您正在使用提供其自己的“框架”的协议（例如 AMQP 或 JMS），那么这不是问题 - 传输层会处理它。如果您打算重新发明这个轮子，是的，不同的有效负载会使协议变得更加困难。但是协议（尤其是所有边缘情况）已经够难了。

**解析开销**

这与冗长直接相关。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-21T07:41:20.500

正如您所解释的那样，XML 有其自身的优点和缺点。当您想要减少网络流量的替代方案时，您可以考虑[http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)压缩数据并拥有自己的编组技术。另一个在 Web 技术中广为人知的是 JSON。

在系统架构方面什么是最好的：嗯，我们需要定义它是 Web 还是企业系统集成等等。这完全取决于您设计的系统。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-21T07:37:57.293

重新发明轮子从来都不是一个好主意。我会坚持使用标准 HTTP 协议并使用可互操作的数据交换格式，例如 XML 或 JSON。如果您使用行业标准协议而不是重新发明自定义协议，您会发现更多的工具和支持。这是就最佳实践而言。当然，如果您有一些非常具体的要求，则可能有充分的理由来实现更多定制的东西。

# iphone - 如何在 iPhone 中增加进度视图，直到来自服务器的 JSON 形式的响应

> ID：10681084
> 
> 赞同：0
> 
> 时间：2012-05-21T07:31:12.460
> 
> 标签：iphone

我是 iPhone 开发的新手，想在我的应用程序中添加进度视图，有人可以帮助我如何在我的 iPhone 应用程序中添加进度视图，以及当服务器响应以 json 形式出现时，这个进度视图将如何逐渐增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:41:35.220

这是使用 mbprogesshud 的示例代码，希望您也可以通过此方法设置您的进度视图的进度。参考 nsurldelegate 方法他们如何根据来自服务器的数据设置进度

```
 - (IBAction)showWIthLabelAnnularDeterminate:(id)sender {
        HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
        [self.navigationController.view addSubview:HUD];

        // Set determinate mode
        HUD.mode = MBProgressHUDModeAnnularDeterminate;

        HUD.delegate = self;
        HUD.labelText = @"Loading";

        // myProgressTask uses the HUD instance to update progress
        [HUD showWhileExecuting:@selector(myProgressTask) onTarget:self withObject:nil animated:YES];
    }

    #pragma mark -
    #pragma mark NSURLConnectionDelegete

    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
        expectedLength = [response expectedContentLength];
        currentLength = 0;
        HUD.mode = MBProgressHUDModeDeterminate;
    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        currentLength += [data length];
        HUD.progress = currentLength / (float)expectedLength;
    }

    - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
        HUD.customView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]] autorelease];
        HUD.mode = MBProgressHUDModeCustomView;
        [HUD hide:YES afterDelay:2];
    }

    - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
        [HUD hide:YES];
    } 
```

# jquery-mobile - JqueryMobile 图标没有出现

> ID：10681089
> 
> 赞同：1
> 
> 时间：2012-05-21T07:32:01.923
> 
> 标签：jquery-mobile

我正在为 android 创建一个移动应用程序，并且我使用 jquery mobile 和 phonegap。但我的问题是。我已经下载了 .css 和 .js 以及 jquery mobile 的图像。当我在 chrome 或 safari 中本地运行它时。图标没有出现。我没有做任何自定义图标或任何事情。我只是将 .css 和图像放入我的项目中。代码是：

```
<link rel="stylesheet" href="css/jquery.mobile-1.1.0.css" /> 
```

我将 jquery mobile 中的图像放入项目中的“图像”文件夹中。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T07:43:32.697

将 Images 文件夹放在已复制 css 文件的路径上。

例如

```
d:\myproject\jquery.mobile-1.0.1.min.css

d:\myproject\images 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T19:29:27.327

如果您希望改用 CDN（内容交付网络）方法，您可以在 HTML 的头部使用以下三行：

```
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
```

我遇到了这个确切的问题，图标没有出现在 FF 或 Safari 中，这个在线解决方案适用于我的具体问题。如果您像 OP 一样为 PhoneGap 打包，显然您需要上述正确路径中的物理文件，但如果您使用[jsfiddle](http://jsfiddle.net)或类似站点编写预生产代码，这是一种替代方法.

这些是截至 2012 年 6 月 13 日的最新链接，我从[jQuery 下载站点获得它们。](http://jquerymobile.com/download/)

# android - Android 推特应用程序错误

> ID：10681097
> 
> 赞同：0
> 
> 时间：2012-05-21T07:33:09.090
> 
> 标签：android, twitter, twitter-oauth

我正在使用此代码：[https ://github.com/ddewaele/AndroidTwitterSample](https://github.com/ddewaele/AndroidTwitterSample)

我替换`CONSUMER_KEY`并`CONSUMER_SECRET`相应地但我仍然收到错误：

> java.lang.NoClassDefFoundError: twitter4j.http.AccessToken

谁能解释为什么它给我错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:48:14.823

I Got the Solution. This may be helpful to someone who is using above link. Create a libs folder add all jar file there. After that register your app on twitter obtain consumer key, secrete key and callback url form there. paste it in ur code. Remember also change callback url in manifest file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:15:05.280

如果您使用的是 Eclipse，请转到 Project -> Properties -> Java Build Path -> Add External Jars，然后选择您的库。

# windows-phone-7 - 如何在windows phone 7中将密码显示为水印？

> ID：10681098
> 
> 赞同：0
> 
> 时间：2012-05-21T07:33:17.150
> 
> 标签：windows-phone-7

任何人都请告诉我 Windows Phone 7 中的水印密码文本框。我没有找到任何样本。请帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:08:36.023

Codeplex.com 上有一个 Watermark TextBox 控件：-

[http://watermarktextbox.codeplex.com/](http://watermarktextbox.codeplex.com/)

以下文章也可能有用：-

[http://www.windowsphonegeek.com/articles/WP7-WatermarkedTextBox-custom-control](http://www.windowsphonegeek.com/articles/WP7-WatermarkedTextBox-custom-control)

# c# - 是否有一种简短的方法来替换 C# 中字符串中的两个字符？

> ID：10681099
> 
> 赞同：2
> 
> 时间：2012-05-21T07:33:19.103
> 
> 标签：c#

鉴于：

```
var x = "abc";
var x = "[abc]"; 
```

我编写了以下代码以删除 [ 和 ] 字符。

```
x1 = x.Replace("[", "");
x2 = x1.Replace("]", ""); 
```

有什么方法看起来更干净吗？例如，我可以一个接一个地替换字符串吗？请注意，如果出现 [ 和 ] 将始终在字符串的开头和结尾找到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T07:35:58.313

```
string newstring = x.Trim('[', ']'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T07:34:42.450

> 例如，我可以一个接一个地替换字符串吗？

是的：

```
var result = x.Replace("[", "").Replace("]", ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T07:34:45.323

由于 Replace() 返回一个字符串，您可以将表达式链接在一起：

```
var x1 = x.Replace("[", "").Replace("]", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T07:46:06.907

使用大字符串和许多要删除的字符的可能最有效的方法：

```
String input = "[abc]";
String removed = input.RemoveChars(new[] { '[', ']' });

public static String RemoveChars(this string input, char[] charsToRemove)
{
    Array.Sort(charsToRemove);
    StringBuilder sb = new StringBuilder();
    foreach (char c in input)
    {
        if (Array.BinarySearch(charsToRemove, c) < 0)
            sb.Append(c);
    }
    return sb.ToString();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T07:40:37.197

> 请注意，如果出现 [ 和 ] 将始终在字符串的开头和结尾找到。

您需要使用正则表达式来确保*严格*没有其他方括号被替换：

```
string output = Regex.Replace(x, @"^\[|\]$", ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T07:46:11.153

```
string newstring = x.TrimStart('[').TrimEnd(']'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-21T08:01:14.433

您应该使用 TrimStart 和 TrimEnd：

```
string x = "[abc]";
string result = x.TrimStart('[').TrimEnd(']'); 
```

这将是最简单的方法，并且将具有最佳性能。

在这里，我假设'['将在开头，']'将在结尾。

# windows - Git Bash 看不到我的 PATH

> ID：10681101
> 
> 赞同：125
> 
> 时间：2012-05-21T07:33:25.160
> 
> 标签：windows, bash, git-bash

当我使用 Git Bash（在 Windows 上）时，如果不指定其完整路径，我将无法运行任何可执行文件，尽管它位于我的 PATH 变量中的文件夹中。看起来 bash 无法识别它。为什么？我可以修复它吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-26T06:13:25.307

知道了。作为 Windows 用户，我习惯于键入不带扩展名的可执行文件名。就我而言，我想执行一个名为`cup.bat`. 在 Windows shell 中，键入`cup`就足够了。Bash 不是这样工作的，它需要全名。打字`cup.bat`解决了这个问题。（虽然我无法运行该文件，因为显然 bash 无法理解它的内容）

切换到 posh-git 的另一个原因..

感谢@Tom 为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-21T17:51:32.687

也许 bash 看不到您的 Windows 路径。键入`env|grep PATH`bash 以确认**它**看到的路径。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-01-31T18:31:16.877

Following @Daniel's comment and thanks to @Tom's answer, I found out that Git bash was indeed using the PATH but not the latest paths I recently installed. To work around this problem, I added a file in my home (windows) directory named:

`.bashrc`

and the content as follow:

`PATH=$PATH:/c/Go/bin`

because I was installing Go and this path contained the executable `go.exe` Now Git bash was able to recognize the command:

`go`

Perhaps just a system reboot would have been enough in my case, but I'm happy that this solution work in any case.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-12-06T14:41:34.040

在安装 Git 时，您可以选择如下所示的选项，它会帮助您自动设置路径。

![Git 安装向导](../Images/8add2805bd1786486693ee941671a89b.png)

它为我解决了:)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-11-04T07:15:23.327

在 C:\Users\USERNAME 中创建一个名为 config.bashrc 的文件，其中包含：

```
PATH=$PATH:/c/Program\ Files\ \(x86\)/Application\ with\ space 
```

现在将命令行上的文件移动到正确的位置：

```
mv config.bashrc .bashrc 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-04-25T15:38:47.563

将新值添加到 PATH 后重新启动计算机。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-04-25T13:39:42.303

老问题，但它可以帮助别人。

我已经更改了我的 PATH 用户范围，之后我刚刚注销并再次登录。

这就对了！`git bash`正确加载了新的 PATH 值。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-04-14T02:04:08.123

如果您`git-bash`的`PATH`礼物但不是最新的，并且**您不想重新启动**而是重新生成您`PATH`的 s，您可以尝试以下操作：

*   关闭所有`cmd.exe`、`powershell.exe`和 ，`git-bash.exe`然后从“开始”菜单或桌面上下文重新打开一个 cmd.exe 窗口。
*   如果您更改了 system-wide `PATH`，您可能还需要打开一个特权 cmd 窗口。
*   从 Windows 资源管理器上下文菜单中打开 Git bash 并查看`PATH`env 是否已更新。请注意，**IntelliJ IDEA 中的终端可能是登录 shell 或其他某种魔法，因此`PATH`在您重新启动 IDEA 之前它可能不会改变**。
*   如果这不起作用，您可能还需要关闭所有`Windows Explorer`进程并重试上述步骤。

**注意：这不适用于所有 Windows 版本，并且`cmd.exe`在“开始”菜单或桌面上下文菜单以外的任何地方打开可能无法正常工作**，在我的 4 台计算机上进行了测试，其中 3 台可以正常工作。我不知道为什么会这样，但是由于`PATH`环境变量是在我登录和注销时自动生成的，所以我不会用变量连接来搞乱那个变量。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-15T10:57:35.240

我知道这是一个老问题，但有两种类型的环境变量。一个由用户拥有，一个在系统范围内。根据您如何打开 git bash（使用用户权限或管理员权限），使用的环境变量 PATH 可以来自您的用户变量或系统变量。见下文： [![在此处输入图像描述](../Images/b43c7238fb3c6a6e9922f2da7c11b933.png)](https://i.stack.imgur.com/Cwuct.png)

如上一个答案所述，使用命令检查`env|grep PATH`您正在使用哪个并相应地更新您的变量。顺便说一句，无需重新启动系统。只需关闭并重新打开 git bash

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-10-26T13:14:27.150

我可以确认重启系统会确保windows环境变量中设置的PATH被git拾取，没有其他自动方式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-04T15:11:55.563

在 Windows 10 上，只需卸载 git 并重新安装即可。它会自动为您设置环境变量。我错误地删除了环境变量，我无法在我的 IDE 中使用 git。重新安装 git 解决了这个问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-12-14T10:01:15.163

这里的根本原因似乎是 Git Bash 无法始终正确解析变量 %USERPROFILE% 。它不是相对于 C:\Users\\ 而是获得值 C:\Windows\System 32\systemprofile\ 将其更改为完全限定的地址后，它可以工作，即使我之后将其重新设置，Git Bash 仍然由于某种原因具有正确的 PATH 。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-03T11:05:57.483

我在Win10中尝试使用mingw编译xgboost lib时遇到了这个问题。最后我找到了解决方案。

在您的主目录（通常是 C:\Users\username）中创建一个名为 .bashrc 的文件。然后添加它的路径。如果您的路径包含空白，请记住使用引号，并记住使用 /c/ 而不是 C:/

例如：

PATH=$PATH:"/c/Program Files/mingw-w64/x86_64-7.2.0-posix-seh-rt_v5-rev1/mingw64/bin"

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-15T22:58:23.977

对我来说最方便的是：1）在C：驱动器的根目录中创建目录“bin” 2）添加“C:/bin;” 到“我的电脑 -> 属性 -> 环境变量”中的 PATH

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-12-14T19:48:53.220

就我而言，它是在安装 heroku cli 和 git bash 时发生的，这就是我所做的工作。

到了这个位置

`C:\Users\<username here>\AppData\Local`

并删除我的案例 heroku 文件夹中的文件。所以我删除了文件夹并运行cmd。这是工作

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-30T19:17:22.723

我遇到了一个愚蠢的错误。我在 Windows 10 机器上为我的 golang 工作区设置了系统范围和用户变量路径。当我删除冗余系统变量路径并注销并重新登录时，我能够在 bash 中调用 .exe 文件并成功调用 go env。

尽管 OP 已得到解答，但这是另一个可能使 bash 无法看到您的路径的问题。我刚刚用这个问题再次测试了 bash，它似乎确实产生了某种冲突，阻止了 bash 遵循任一路径。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-08-16T22:03:42.510

编辑/添加到 $PATH 变量时不要转义 (\) 特殊字符。例如，程序文件中的应用程序目录如下所示： `PATH=$PATH:/c/Program Files (x86)/random/application`

不要这样做：
`PATH=$PATH:/c/Program\ Files\ \\(x86\\)/random/application/`

希望这可以帮助。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-05-11T03:21:35.387

Windows 操作系统上的 Git bash 终端能够读取系统路径/用户路径并运行应用程序，但在以下情况下可能会丢失

1.  应用程序添加到环境变量而不关闭终端
2.  MSYS / MinGW 正在转换您的路径
3.  应用程序命令您尝试使用通用别名而不是原始调用方式

**用例 - 1：**

重新启动终端应该可以工作并使用以下命令来验证您的路径

`env|grep PATH`

**用例 - 2：**

让我用一个例子来解释一下，它`docker`不能直接在 git bash 终端上工作，对于这样的应用程序，MSYS 正在将其转换为原始路径。对于此类问题，您可能需要告诉您的终端使用命令忽略路径转换 `MSYS_NO_PATHCONV=1` 并继续执行您的实际执行命令，例如`docker --help`应该如下所示

```
MSYS_NO_PATHCONV=1  MSYS_NO_PATHCONV=1 docker run -dp 3000:3000 -w /app -v "$(pwd):/app" node:12-alpine sh -c "yarn install && yarn run dev"
717d12b9fe5211f0189ccbed0ba056ca242647812627682d0149ede29af472a4 
```

**用例 - 3：** 让我用一个示例`az`cli 来解释，最好是 az cli install in windows，因为`az.cmd`它被添加到系统/用户路径中。在 Windows 操作系统上，powershell 或命令提示符识别 `az.cmd`为`az`但 git bash 不会理解它 - 所以你可以使用别名来避免混淆说`alias az='az.cmd'`然后执行`az --help` 会为你工作

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2018-03-02T16:26:52.667

对于那些尝试过所有上述方法的人，包括 Windows 系统环境。变量、.bashrc、.bashprofile 等，并且可以在 'echo $PATH' 中看到正确的路径……我可能会为您提供解决方案。

**使用exec 2> /dev/null**抑制错误

 **我的脚本运行良好，但抛出“找不到命令”或“未找到目录”错误，尽管据我所知，路径是刷新的。所以，如果你抑制这些错误（可能还必须添加'set +e'），它就会正常工作。

* * *

## 回答 #20

> 赞同：-3
> 
> 时间：2015-04-01T14:42:56.417

创建一个名为 Path 的用户变量并添加为值 %Path%，据我所知，Git Bash 只看到用户变量而不是系统变量。通过执行上述过程，您将在用户变量中公开您的系统变量。

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2017-10-24T00:37:39.763

在 Windows 7 路径环境变量中，我只是在系统变量路径的末尾添加

\;C:\Program Files\Git\bin

现在可以了！**

# c - C数组，我的记忆会发生什么

> ID：10681107
> 
> 赞同：2
> 
> 时间：2012-05-21T07:33:42.490
> 
> 标签：c, arrays, memory, char

读者，

任何人都可以向我解释当我运行这段错误代码时我的计算机会发生什么。使用 gnu gcc 编译器编译。在代码块中。

*这是错误代码：*

```
 char data[5];

  data[0] = '1';
  data[1] = '10';
  data[2] = '30';
  data[3] = '50';

  if(sizeof(data) == 5)
  {
  adjust(data);
  } 
```

sizeof(data) 是 5，因为我声明*了 char data[5]*。

如果我尝试读取数据 [1]，我注意到它会返回最后一个字符。' *0'*或*'48'*。

所以我想知道，data[1] 中的“1”会发生什么，我的记忆会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:41:45.050

您使用多字符文字有点令人困惑，例如`10`，这可能会增加您的困惑。像这样的行会发生什么：

```
data[1] = '10'; 
```

是：

*   `int`-type ( *not* `char` , in C) 值将`'10'`被截断为`char`
*   结果值将分配给`data[1]`。

确切地说，这是哪个值取决于编译器，因为文字大于单个`char`.

If you're seeing `0` (numerically 48 on ASCII systems), this means that `10` was truncated to `0`, which is the value stored. The `1` was then completely lost (not stored in an adjacent slot of the array, which you might have expected).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:39:58.403

除了 的影响之外`adjust()`，发生的事情非常清楚：

*   `data[]`分配有 5 个元素
*   第一个到第四个元素被定义
*   的大小`data[]`与 5 相比
*   *使用指向开头的指针调用*adjust()*`data[]`*

 *我不明白你对阅读的评论`data[1]`。它包含一些未定义的内容，直到分配。

`char x = '10';`与大多数架构相同`char x = '0'`。这与 c++ 的行为有所不同。 `char`表达式主要作为整数处理，然后在存储时隐式类型转换。*

# wif - 通过 WIF 创建自己的 STS 时如何获取用户名和密码

> ID：10681109
> 
> 赞同：1
> 
> 时间：2012-05-21T07:33:43.353
> 
> 标签：wif, sts-securitytokenservice

我正在使用 WIF 构建自定义 STS。继承 SecurityTokenService 类后，我使用 WSTrustServiceHost 和 IWSTrust13SyncContract 将我的 STS 托管为 WCF 服务。因为它只是一个原型 STS，所以我使用的是 BasicHttpBinding。

在客户端，我使用 WSTrustChannelFactory 连接到我的 STS，我可以成功获得输出声明。

但是当我尝试添加身份验证信息（用户名和密码）时，我发现它无法传递到我的 STS 中。

1，如果我使用的是 BasicHttpBinding，即使我通过客户端 factory.Credentials.UserName.UserName 和 .Password 指定了用户名和密码，我也无法在 STS 上找到用户名和密码。

2、我改用了UserNameWSTrustBinding(SecurityMode.Transport)，但还是无法在STS中获取用户名和密码。

3，在 STS 中，GetScope、GetOutputClaimsIdentity 方法的参数是我运行服务器控制台应用程序的主体，而不是我从客户端指定的主体。

4、我注册了另一个UserNameSecurityTokenHandler并覆盖了它的ValidateToken方法。但似乎 STS 没有调用此方法。STS 提出了一个例外，说没有 CreateToken 实现。

5、我试过内置的 WindowsUserNameTokenHandler 它也引发了同样的异常。

任何人都可以看看并就如何处理给我一些建议。

# c++ - 提取符号之间的字符串

> ID：10681112
> 
> 赞同：1
> 
> 时间：2012-05-21T07:33:52.287
> 
> 标签：c++, string, file, pointers, text-extraction

我实际上正在尝试使用这种方法 Travels 来提取信息但是我在这样做时遇到了问题，我希望你们能够帮助我我在尝试提取“”之间的字符串时遇到问题，例如“你好”提取你好。这些是我下面的方法。

游记法

```
char *Travels(char Destination, char *originPtr)
{
do
{
    originPtr++;
}while (*originPtr != Destination);

originPtr++;
return originPtr;
} 
```

在我的主要

```
int main()
{
//pointer for reading of file
char *startPtr1;
char Lines[256];

//read file and perform 
ifstream chordfile("myfile.txt");
if (chordfile.is_open())
{
    do
    {
        chordfile.getline(Lines, 256);
        startPtr1 = Lines;
        readFileInput(startPtr1);

    }while(chordfile.eof() == false);
    chordfile.close();
}

return 0;
} 
```

在我的 readFileInput 方法中（我将展示部分方法）

```
//if it is insert.
if (strcmp(Stringg, "insert") == 0)
{
    char *SpecialPtr1;
    currentPtr1=Travels(' ',startPtr1);  // travels to Insert(*) 7 "your_data"
    int insertPeerNum = (int)atoi(currentPtr1); // travels to Insert (7) "your_data"
    currentPtr1=Travels(' ',currentPtr1); // travels to Insert 7(*)"your_data"
    currentPtr1=Travels('"',currentPtr1);
    SpecialPtr1=Travels('"',currentPtr1);
    *******this is the area which I am actually stucked at**********
    } 
```

在文本文件中

```
Insert 7 "your_data"
Insert 7 "hello" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:35:46.407

由于您没有指定`homework`标签，我建议您使用`std::string`. 这种数据结构带有许多搜索和子字符串组合。

例如在双引号之间查找文本：

```
#include <string>

//...

std::string::size_type    start_position = 0;
std::string::size_type    end_position = 0;
std::string               text = "My \"cat\" is black.\n";
std::string               found_text;

start_position = text.find("\"");
if (start_position != std::string::npos)
{
  ++start_position; // start after the double quotes.
  // look for end position;
  end_position = text.find("\"");
  if (end_position != std::string::npos)
  {
     found_text = text.substr(start_position, end_position - start_position);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:03:56.640

您的代码存在一些问题：

1.  在您的 Travels 方法中，条件 `while (*originPtr != Destination);`应该是`while((*originPtr!=Destination) && (*originPtr != '\0'))`

2.  关于检索字符串，您的逻辑似乎有点倾斜。实际上，您可能已经尝试从两个 '"' 之间检索字符串。语句之后的代码`currentPtr1=Travels('"',currentPtr1);` 可以是

    字符提取字符串[100] = {0};

    ```
    int i = 0;

    while(((*currentPtr1 != '"') && (*currentPtr1 != '\0')) && (i<100))
    {

       extractedstring[i] = *currentPtr1;

       currentPtr1++

       i++;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:48:08.937

首先，我建议您使用 std::string 处理方法，这将有很大帮助 :) 参考：[string](http://www.cplusplus.com/reference/string/string/)

```
// Helper Function 

inline bool find_first(size_t& pos, const std::string& st, const char flag='\"')
   {
       if(pos!= std::string::npos)
            pos=st.find_first_of(flag, pos);
       return (pos!= std::string::npos);
   }

inline bool find_last(size_t& pos, const std::string& st, const char flag='\"')
   {
      if(pos!= std::string::npos)
         pos=st.find_last_of(flag);
      return (pos!= std::string::npos);
   }
 template <class T>
   inline T from_string(const std::string& s)
   {
       T t;
       std::stringstream ss(s);
       ss >> t;
       return t;
   }

// Excerp Sample Code

std::string stdline = Lines.

size_t start
size_t end;
std::string text;
std::string numberText;
int number;

if (stdLine.compare("insert"))
{

if (find_first(start, stdLine,' ') && find_lats(end,stdLine,' ')
{

    numberText=stdLine.substr(start+1,end);
    number = from_string(numberText);
}

if (find_first(start, stdLine) && find_lats(end,stdLind)
{
    text=stdLine.substr(start+1,end); 

}

} 
```

# jquery - 如何在 jquery mobile 的非 ajax 导航中显示加载器？

> ID：10681125
> 
> 赞同：1
> 
> 时间：2012-05-21T07:34:45.807
> 
> 标签：jquery, jquery-mobile

我在 jquery mobile 中使用非基于 ajax 的导航，因为我想在每个页面上加载和运行特定的脚本。但问题是当我在 jquery mobile 中使用基于非 ajax 的导航时。加载器不显示。我通过使用禁用了ajax

```
data-ajax="false" 
```

与每个锚链接。

有没有什么快速的方法可以在每个页面转换时显示加载器，而无需编写自定义函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:57:45.550

我认为禁用 ajax 的微调器是不可能的。我的意思是您可以在页面加载之前或之后将其闪烁一秒钟，但这有点违背了目的。但是，我确实知道在特定页面上加载和运行特定脚本是可能的。所以也许你的问题应该是我如何让特定的脚本在特定的 JQM 页面中运行？

绑定到 pageinit 将帮助您为特定页面执行自己的 javascript。以下内容仅在加载了 id 为 page2 的 JQM 页面时才会执行。只需将其放在外部脚本中并在页面顶部链接到它即可。

```
$(document).on('pageinit','#page2',function(){
    $('#appendMe').append('This text was appended');    
}); 
```

如果要加载外部脚本/库，请使用 $.getScript(); 方法。在我的示例中，我将在加载id 为 page3 的 JQM 页面时加载并执行[spin.js库。](http://fgnass.github.com/spin.js/)Spin.js 只是在页面中放了一个小微调器。

```
​​$(document).on('pageinit','#page3',function(){
    $.getScript('http://fgnass.github.com/spin.js/dist/spin.min.js', function(){
        //the following code gets executed after spin.js is loaded
        var opts = {
            lines: 13, // The number of lines to draw
            length: 7, // The length of each line
            width: 4, // The line thickness
            radius: 10, // The radius of the inner circle
            rotate: 0, // The rotation offset
            color: '#000', // #rgb or #rrggbb
            speed: 1, // Rounds per second
            trail: 60, // Afterglow percentage
            shadow: false, // Whether to render a shadow
            hwaccel: false, // Whether to use hardware acceleration
            className: 'spinner', // The CSS class to assign to the spinner
            zIndex: 2e9, // The z-index (defaults to 2000000000)
            top: 'auto', // Top position relative to parent in px
            left: 'auto' // Left position relative to parent in px
        };
        var target = document.getElementById('spin');
        var spinner = new Spinner(opts).spin(target);
    });
});​​​​​​​​​​​​​​​​ 
```

这是一个[jsfiddle](http://jsfiddle.net/codaniel/yQNJF/1/)来说服你我不只是在编造这一切。呵呵

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:06:04.493

有一个客户端方法来显示/隐藏加载器：

`$.mobile.showPageLoadingMsg();`

`$.mobile.hidePageLoadingMsg();`

# c - Linux 中的参数与原型错误不匹配

> ID：10681132
> 
> 赞同：2
> 
> 时间：2012-05-21T07:35:24.970
> 
> 标签：c, linux, struct, function-prototypes

我有带有以下函数声明的头文件：

```
extern  getEmailDetailsResult * getemaildetails_5(getEmailDetailsInput *, CLIENT *); 
```

在我的 .C 文件中，函数定义是

```
getEmailDetailsResult* getemaildetails_5(inputParams, rqstp)
    getEmailDetailsInput *inputParams;
    struct svc_req *rqstp; 
```

当我在 Unix 中编译我的程序时，编译成功。但在 Linux (gcc 4.1.2) 中，我收到以下错误`"error: argument ârqstpâ doesnât match prototype"`。具有函数原型的 .h 文件是由操作系统在编译过程中生成的。Linux中的错误可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:46:10.127

看起来`struct svc_req *`指针不等于`CLIENT *`指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T17:34:20.847

你有两个指针，`struct svc_req *`和`CLIENT *`。您收到此错误是因为这两个指针都指向不同的类型。那 a 和 a`struct svc_req`不是同一类东西`CLIENT`，所以这两个指针不兼容。

# c++ - C++ 守护进程静默模式

> ID：10681134
> 
> 赞同：0
> 
> 时间：2012-05-21T07:35:28.573
> 
> 标签：c++, daemon, cout, silent

我正在 unix 系统下编写守护程序，并使用`std::cout`at 代码在`no silent`模式下进行调试。当我在启动进程时，`daemon/silence mode`我将打印资源保存到. 似乎在关闭时，它会写入，不是吗？在静音模式下避免资源开销是否正确且最好的方法？或者，也许我需要在每次调用之前使用 global 并检查它？还是其他解决方案？谢谢，对不起我的英语。`close(STDIN_FILENO)``STDOUT_FILENO``STDERR_FILENO``std::cout``/dev/null``silent flag``std::cout`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:42:56.180

`std::cout`通过写入来实现`STDOUT_FILENO`。关闭后者会破坏前者。

# c# - 组合框 WPF C# 4.0 中的列表按钮控件

> ID：10681138
> 
> 赞同：0
> 
> 时间：2012-05-21T07:35:46.907
> 
> 标签：c#, wpf, data-binding, button, combobox

我正在尝试在 WPF 中实现可视化表单设计器。我有一个画布，用户可以在其中拖放一些控件（文本框、文本块、组合框、复选框、图像、按钮）。到现在为止还挺好。现在我正在尝试实现一个组合框，其中列出了用户放在画布上的所有控件（就像 VS 2008 一样）。

组合框显示控件的名称属性。它适用于除按钮和复选框之外的所有控件，我不知道为什么。Combobox 绑定到 ObservableCollection，并且 Combobox 的 Item Collection 填充正确，但是当我选择 Button 或 Checkbox 时，名称不显示为 SelectedItem。所以这是我的绑定：

```
<ComboBox Name="comboBoxCurrentControls" IsEditable="false"
          ItemsSource="{Binding AllFormControls}" DisplayMemberPath="Name" 
          SelectedValuePath="Name"
          SelectedItem="{Binding Path=SelectedCtl, Mode=TwoWay}" 
```

当您简单`ObservableCollection<T>`地使用 Buttons 填写 Codebehind 并在其上绑定一个 Combobox 时，您可以重现该问题。当您选择它时，组合框不会将按钮的名称显示为 SelectedItem。有人可以向我解释这种行为或告诉我解决方法吗！？

提前致谢

克里斯

Ps：我也试过用`ObservableCollection<FrameworkElement>`，但是没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:08:54.383

The problem is that Button is a ContentControl so when the button is selected, the ComboBox's SelectionBoxItem uses the Content property rather than the Button itself. 使用给定的绑定，它会尝试在内容上找到 Name 属性（我想这是一个字符串？）。这可以通过查看绑定错误的输出来发现。您应该会看到如下内容：

System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“字符串”（HashCode = 1231357559）上找不到“名称”属性。绑定表达式：路径=名称；DataItem='String' (HashCode=1231357559); 目标元素是'TextBlock'（名称=''）；目标属性是“文本”（类型“字符串”）

如果您使用 Snoop，当您单击按钮时，您会看到 SelectionBoxItem 是按钮内容，而当您选择不同的控件时，它是控件本身。

编辑：通过谷歌搜索，我发现了这个：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7054a9c9-fec1-463a-9568-b831729acd14](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7054a9c9-fec1-463a-9568-b831729acd14)

# javascript - 将“last”类添加到每个 div 编号 4 、 8 、 12 、 16 等

> ID：10681144
> 
> 赞同：4
> 
> 时间：2012-05-21T07:36:12.847
> 
> 标签：javascript, jquery

如何将“last”类添加到每个 div 编号 4 、 8 、 12 、 16 等。我认为这不是什么大问题，对吧？

前 ：

```
<div id="main">
    <div>Element 1</div>
    <div>Element 2</div>
    <div>Element 3</div>
    <div>Element 4</div>
    <div>Element 5</div>
    <div>Element 6</div>
    <div>Element 7</div>
    <div>Element 8</div>
    <div>Element 9</div>
    <div>Element 10</div>
    <div>Element 11</div>
    <div>Element 12</div>
</div> 
```

后

```
<div id="main">
    <div>Element 1</div>
    <div>Element 2</div>
    <div>Element 3</div>
    <div class="last">Element 4</div>
    <div>Element 5</div>
    <div>Element 6</div>
    <div>Element 7</div>
    <div class="last">Element 8</div>
    <div>Element 9</div>
    <div>Element 10</div>
    <div>Element 11</div>
    <div class="last">Element 12</div>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T07:37:04.853

```
$('#main > div:nth-child(4n)').addClass('last'); 
```

小提琴示例：http: [//jsfiddle.net/T7fE6/](http://jsfiddle.net/T7fE6/)

注意：如果您必须对这些元素应用一些样式（并且您不支持 IE8 或以前的 IE 浏览器），您可以简单地将该选择器定义到您的 CSS 中，例如

```
 #main > div:nth-child(4n) {
     /* supported by IE9+ and all modern browser */
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T07:41:16.313

如果您的标记真的*只是* `div`元素，那么[F. Calderan 的答案](https://stackoverflow.com/a/10681150/157247)就是要走的路。

如果您可能还有其他元素并且您想忽略它们，您可以这样做：

```
$("#main > div").filter(function(index) {
  return index % 4 === 3;
}).addClass("last"); 
```

[实例](http://jsbin.com/uliqep)| [资源](http://jsbin.com/uliqep/edit)

那是因为即使`div:nth-child(4n)` *看起来*它意味着每四个 div，但它不是；这意味着 div 是其父容器中的第 4 个、第 8 个等元素。所以如果你把其他人扔在那里，它就行不通了。

但同样，如果你只有`div`s，F 的答案就是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T07:44:41.743

你可以这样做

```
$(document).ready(function(){
 $('#main div').each(function(e){
     if((e+1) % 4 == 0){
         $(this).addClass('last');
     }
 });
})
​ 
```

这是正在运行的示例

[在此处查找示例](http://jsfiddle.net/Y3mHp/1/)

希望它有帮助...

# ios - 如何检查 NSArray 是否包含特定索引处的任何对象？

> ID：10681149
> 
> 赞同：1
> 
> 时间：2012-05-21T07:37:04.637
> 
> 标签：ios, objective-c, iphone, nsmutablearray

我正在尝试检查一个**NSArray**是否在任何**特定索引处****包含任何对象**，并且在检查它时，如果它为空，我想在该特定索引处**插入该对象。**关于如何做到这一点的任何想法？

 ***** * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T07:43:18.500

`NSArray`不包含`nil`值；`objectAtIndex:`永远不会回来`nil`。`nil`添加到集合中是错误的。

要完成您的任务，您可以使用占位符对象，例如`[NSNull null]`查询数组的`count`. 当然，您将需要一个`NSMutableArray`来实际执行突变（例如替换或插入）。

在 OS X 上，您可以`NSPointerArray`用来表示包含`nil`元素的集合。

* * *

**使用 NSNull 的示例：**

```
const NSUInteger idx = ...;
NSMutableArray * array = ...;

if ([NSNull null] == [array objectAtIndex:idx]) {
  [array replaceObjectAtIndex:idx withObject:someObject];
} 
```****

# iphone - 如何在 tableview 搜索栏中获取对 navigationcontroller 的引用？

> ID：10681151
> 
> 赞同：0
> 
> 时间：2012-05-21T07:37:07.537
> 
> 标签：iphone, objective-c, xcode

我在情节提要中设置了一个导航控制器和一个 tableview 控制器。表格视图中有一个搜索栏。我使用 self.navigationcontroller 获得对导航控制器的引用。我用

```
[self.navigationController setNavigationBarHidden:YES animated:animated]; 
```

在随后显示的视图中隐藏导航栏。在不使用搜索栏的情况下选择表格视图中的单元格时，这可以正常工作。但是，如果我使用搜索栏在表格视图中显示特定单元格，并且如果我从该表格中选择一个单元格，那么显然我会丢失对导航控制器的引用，因为尽管执行了上面的代码，导航栏仍然显示在以下视图。

我应该怎么做才能隐藏导航栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:50:07.193

这就是我发现的： NavigationBarHidden 属性显然已重置，因为当搜索栏离开视图时，它将再次在视图上发送导航栏。我不确定我是否完全理解正在发生的事情，但是我 viewWillDisappear 中的这行代码解决了这个问题：

```
 self.searchDisplayController.active=NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:42:49.980

你为什么不在下面的视图控制器上执行那行代码呢？

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:YES animated:animated];
} 
```

# c# - 如何在 windows phone 7 中读取 sim 卡详细信息？

> ID：10681152
> 
> 赞同：2
> 
> 时间：2012-05-21T07:37:10.133
> 
> 标签：c#, silverlight, windows-phone-7

我想在手机启动时读取 sim 卡的详细信息。我该怎么做，有可能吗？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T07:48:36.053

我非常怀疑是否可以从 Windows Phone 应用程序中读取 SIM 卡详细信息。但无论哪种方式，都不可能在启动时启动应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:29:19.063

Windows Phone 是一个封闭的操作系统；目前，您无法添加任何将在手机启动时启动的应用程序（就像您可以使用 Windows 服务一样），您所拥有的是应用程序后台服务，只要操作系统希望它运行，它们就会运行！

此外，当前的 SDK（版本 7.1.1）不允许您访问 SIM 卡的任何信息...

# c++ - 错误：调用不匹配

> ID：10681153
> 
> 赞同：0
> 
> 时间：2012-05-21T07:37:11.550
> 
> 标签：c++, arduino

嗨，我正在尽我所能了解 C++ 和 OOP。我写了一些代码，当我把它全部放在我的主循环中时。我现在正在尝试整理它并制作我自己的简单库和类。

我的项目有一个连接到 Arduino 板的 8 LED 传感器阵列。我正在尝试读取光传感器的状态。我正在使用 QTRSensors 库，它有一个校准方法，当我实例化我的类时，我想从我的类中调用它。

目前我有以下代码。

标题

```
#ifndef SEDIMENTLOGGER_H
#define SEDIMENTLOGGER_H

#include <QTRSensors.h>
#include <Arduino.h>

#define NUM_SENSORS 8

class sedimentSensor
{
 public:
  QTRSensorsRC sensor1;//(unsigned char [8], int&, int&, int&);
  QTRSensorsRC sensor2;//(unsigned char [8], int&, int&, int&);

  sedimentSensor(); //default constructor
  ~sedimentSensor();
  void  calibrateSensors();
  unsigned int *SensorValues1(){return sensorValues1;};
  unsigned int *SensorValues2(){return sensorValues2;};
  int SampleDelay(){return sampleDelay;};
  int EmitterPin1();
  unsigned int Position1(){return position1;};
  void Position1(unsigned int value){position1 = value;};
  unsigned int Position2(){return position2;};
  void Position2(unsigned int value){position2 = value;};

 private:
  // Map pins to LED numbers
  // first LED array
  int led1;
  int led2;
  int led3;
  int led4;
  int led5;
  int led6;
  int led7;
  int led8;
  int emitterPin1;
  //second Array
  int led9;
  int led10;
  int led11;
  int led12;
  int led13;
  int led14;
  int led15;
  int led16;
  int emitterPin2;

  int  timeout; // waits for 2.5 seconds for sensor outputs to go low
  long sampleDelay; // 1 second
  int numSensors;

  unsigned int sensorValues1[];
  unsigned int sensorValues2[];

  unsigned int position1;
  unsigned int position2;
};
#endif 
```

我对课堂实施的尝试

```
#include "sedimentLogger.h"
#include <Arduino.h>
#include <QTRSensors.h>

sedimentSensor::sedimentSensor() 
{
  //Constructor
  led1 = 24;
  led2 = 26;
  led3 = 28;
  led4 = 30;
  led5 = 32;
  led6 = 34;
  led7 = 36;
  led8 = 38;
  emitterPin1 = 22;
  //second Array
  led9 = 25;
  led10 = 27;
  led11 = 29;
  led12 = 31;
  led13 = 33;
  led14 = 35;
  led15 = 37;
  led16 = 39;
  emitterPin2 = 23;

  timeout = 2500; // waits for 2.5 seconds for sensor outputs to go low
  sampleDelay = 1000; // 1 second

  sensorValues1[NUM_SENSORS];  
  sensorValues2[NUM_SENSORS];
};

sedimentSensor::~sedimentSensor()
{ 
};

int sedimentSensor::EmitterPin1()
{return emitterPin1;};

void sedimentSensor::calibrateSensors()
{
  sensor1((unsigned char[]){led1,led2,led3,led4,led5,led6,led7,led8},numSensors,timeout,emitterPin1);
  sensor2((unsigned char[]) {led9,led10,led11,led12,led13,led14,led15,led16},numSensors,timeout,emitterPin2);

  unsigned int _delay = 500;
  delay(_delay);
  pinMode(13,OUTPUT);
  for(int i = 0; i<400; i++)
    {
      sensor1.calibrate();
      sensor2.calibrate();
    }
  digitalWrite(13,LOW);

  //TODO WRITE MAX AND MIN VALS TO FILE
  Serial.print("Array 1 Min :: ");
  for (int i = 0; i < NUM_SENSORS; i++)
  {
    Serial.print (sensor1.calibratedMinimumOn[i]);
    Serial.print(' ');
  }
  Serial.println();
  Serial.print("Array 2 Min :: ");
  for (int i = 0;i< NUM_SENSORS; i++)
  {
    Serial.print (sensor2.calibratedMinimumOn[i]);
    Serial.print(' ');
  }

  Serial.println();
  Serial.print("array 1 Max :: ");
  // print the calibration maximum values measured when emitters were on
  for (int i = 0; i < NUM_SENSORS; i++)
  {
    Serial.print(sensor1.calibratedMaximumOn[i]);
    Serial.print(' ');
  }
  Serial.println();
  Serial.print("array 2 Max :: ");
  // print the calibration maximum values measured when emitters were on
  for (int 
  i = 0; i < NUM_SENSORS; i++)
  {
    Serial.print(sensor2.calibratedMaximumOn[i]);
    Serial.print(' ');
  }

  Serial.println();
  Serial.println();
  delay(_delay); 
}; 
```

还有我的主要功能和循环

```
#include <QTRSensors.h>
#include <Arduino.h>

#include "sedimentLogger.h"
#include <Wire.h>
#include "/home/marrabld/Programming/Arduino/arduino-1.0/libraries/RTClib/RTClib.h"

sedimentSensor sedLog;//= sedimentSensor();

void setup()
{
  Serial.begin(9600);
  sedLog.calibrateSensors(); 
}

void loop()
{
  sedLog.Position1(sedLog.sensor1.readLine(sedLog.SensorValues1()));
  sedLog.Position2(sedLog.sensor2.readLine(sedLog.SensorValues2()));

  unsigned char i;
  for (i = 0; i < NUM_SENSORS; i++)
    {
      Serial.print(sedLog.SensorValues1()[i] * 10/10001);      
      Serial.print(' ');
    }
  Serial.println(sedLog.Position1());
  for (i=0;i < NUM_SENSORS; i++)
    {
      Serial.print(sedLog.SensorValues2()[i]*10/1001);
      Serial.print(' ');
    }
  Serial.print("  ");
  Serial.println(sedLog.Position2());
  delay(sedLog.SampleDelay());

  Serial.println(sedLog.SampleDelay());
  Serial.println(sedLog.EmitterPin1()); 
} 
```

我收到以下错误

沉积物记录器.cpp：在成员函数“无效沉积物传感器：：校准传感器（）”中：沉积物记录器.cpp：47：102：错误：不匹配调用“（QTRSensorsRC）（无符号字符[8]，int＆，int＆，int＆）”沉积物Logger.cpp:48:108: 错误: 不匹配调用'(QTRSensorsRC) (unsigned char [8], int&, int&, int&)'</p>

我尝试了一些不同的变体，比如将传感器实例化放在我的沉积物传感器构造函数中，以及其他一堆没有运气的东西。

我将不胜感激任何帮助和建议让这个工作。我显然在这里也遗漏了一个概念，因此任何教练建议同样会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:49:38.000

似乎您正在尝试调用 and 的构造函数`sensor1`，`sensor2`但是在代码中它们已经被构造了。尝试使用他们的`init`功能：

```
sensor1.init(
    (unsigned char[]){led1,led2,led3,led4,led5,led6,led7,led8},
    numSensors,
    timeout,
    emitterPin1);

sensor2.init(
    (unsigned char[]){led9,led10,led11,led12,led13,led14,led15,led16},
    numSensors,
    timeout,
    emitterPin2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:00:40.367

我假设第 47 和 48 行是以下两行：

```
sensor1((unsigned char[]){led1,led2,led3,led4,led5,led6,led7,led8},numSensors,timeout,emitterPin1);
sensor2((unsigned char[]) {led9,led10,led11,led12,led13,led14,led15,led16},numSensors,timeout,emitterPin2); 
```

问题是您尝试将*对象*称为*函数*。对象需要在构造函数中初始化，如下所示：

```
sedimentSensor::sedimentSensor() 
    : led1(24), led2(26), /* other variables needing initialization */
      sensor1(/*arguments*/), sensor2(/*arguments*/)
{
    /* .... */
} 
```

为了使上述工作正常，您需要更改类成员变量声明的顺序，因为初始化成员变量的顺序与声明它们的顺序相同。换句话说，你应该把和的声明放在`sensor1`用于`sensor2`初始化它们的变量*之后。*

# ios - UIAlertView 子视图定位

> ID：10681156
> 
> 赞同：1
> 
> 时间：2012-05-21T07:37:31.440
> 
> 标签：ios, cocoa-touch, ipad, uiview, uialertview

我有一个 alertView，当用户更改标签时会弹出

```
UIAlertView *tempAlert = [[UIAlertView alloc] initWithTitle:@"Save Video?" 
                                                    message:@"Do you wish to save the video ?" 
                                                   delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:@"Save",nil];
[tempAlert show];
[tempAlert setDelegate:self];
self.saveAlert = tempAlert;
[tempAlert release]; 
```

现在我处理按钮单击事件，在这种情况下，我想显示另一个带有 progressView 作为子视图的警报

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
{
if ([alertView.title isEqualToString:@"Save Video?"])
{
    if (buttonIndex == [alertView cancelButtonIndex]) 
    {
        UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge]; //17.4.12
        // Adjust the indicator so it is up a few pixels from the bottom of the alert
        indicator.center = CGPointMake(self.saveAlert.bounds.size.width / 2, self.saveAlert.bounds.size.height - 40);
        [indicator startAnimating];
        [self.saveAlert addSubview:indicator];
        [indicator release];
        [(ImageCanvas1AppDelegate*)[[UIApplication sharedApplication] delegate] setMainAlert:self.saveAlert];

        [NSThread detachNewThreadSelector:@selector(performSaveOperationWithTabChangeToIndex:) toTarget:self withObject:[NSNumber numberWithInt:self.tab]];
    }
    else
    {
        [self performSelectorOnMainThread:@selector(playMovie)
                               withObject:nil waitUntilDone:YES];
    }
}
else
{
    if (buttonIndex == [alertView cancelButtonIndex]) 
    {
        [self.videoGenerator cancelVideoGeneration];
    }
}
} 
```

如果用户确实触摸了保存按钮，我会显示一个带有 progressView 作为子视图的警报视图，此方法在“playMovie”方法中调用

```
- (void)showAlert
{
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Generating Video" 
                                                message:@"Please wait!" 
                                               delegate:self cancelButtonTitle:@"Cancel" 
                                      otherButtonTitles:nil, nil];

[alert performSelectorOnMainThread:@selector(show)
                        withObject:nil
                     waitUntilDone:YES];
[alert setDelegate:self];
self.videoAlert = alert;
UIProgressView *progressView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
[progressView setFrame:CGRectMake(alert.bounds.size.width - progressView.bounds.size.width - 95,
                                  alert.bounds.size.height - progressView.bounds.size.height - 80, 
                                  progressView.bounds.size.width, 
                                  progressView.bounds.size.height)];
[alert addSubview:progressView];
self.progressView = progressView;
[progressView release];

[alert release];

[pool release];
} 
```

问题是 ：

如果我正常显示警报视图，则子视图定位很好

但是如果我在

`- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {`

进度视图的位置不正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:57:42.107

为什么要在 uialertview 中显示进度？UIalertviews 是模态的。制作您自己的视图并显示，相反，您可以完全控制，您可以添加暂停、继续和停止按钮，您可以显示所有您想要的信息。

# datetime - 如何将 Doctrine2 中的日期时间字段与日期进行比较？

> ID：10681158
> 
> 赞同：12
> 
> 时间：2012-05-21T07:37:45.767
> 
> 标签：datetime, symfony, doctrine-orm

我想获取今天由 Doctrine2 中的 QueryBuilder 创建的项目。我想将 createdAt(Datetime) 字段与今天的参数(Date) 进行比较。是否可以在一个查询中做到这一点？

```
$qb = $this->createQueryBuilder('i');
$qb->innerJoin('i.type', 'it');
$qb->andWhere('it.name = :type');
$qb->andWhere('i.createdAt < :today');
// i.createdAt == datetime and :today parameter is a date 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-21T14:34:38.507

one idea is to extract from the date: the year, month and day. And then

```
$qb->select('p')
   ->where('YEAR(p.postDate) = :year')
   ->andWhere('MONTH(p.postDate) = :month')
   ->andWhere('DAY(p.postDate) = :day');

$qb->setParameter('year', $year)
   ->setParameter('month', $month)
   ->setParameter('day', $day); 
```

MONTH DAY, and YEAR you take out the DoctrineExtensions from

e.g.

[DoctrineExtensions](https://github.com/simukti/DoctrineExtensions)

This works for me. You only need the files: day.php, month.php and year.php.....

You get the month e.g.:

```
 $datetime = new \DateTime("now");
    $month = $datetime->format('m');
    echo $month; 
```

Copy day.php, month.php and year.php to your bundle Xy\TestBundle\Dql Register the new functions in app\config.yml with

```
doctrine:

orm:
    auto_generate_proxy_classes: %kernel.debug%
    entity_managers:
        default:
            auto_mapping: true
            dql:
                datetime_functions:
                    month: Xy\TestBundle\Dql\Month
                    year: Xy\TestBundle\Dql\Year
                    day: Xy\TestBundle\Dql\Day 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-10-21T09:17:18.260

有比添加日期的学说扩展更好的选择。

首先，您需要获取 start-datetime 和 end-datetime ：

```
$today_startdatetime = \DateTime::createFromFormat( "Y-m-d H:i:s", date("Y-m-d 00:00:00") );
$today_enddatetime = \DateTime::createFromFormat( "Y-m-d H:i:s", date("Y-m-d 23:59:59") ); 
```

现在在查询中使用它们：

```
$em = \Zend_Registry::get('em');
$qb_1 = $em->createQueryBuilder();
$q_1 = $qb_1->select('wsh')
    ->from('\Entities\wishes', 'wsh')
    ->where('wsh.created_at >= :today_startdatetime')
    ->andWhere('wsh.created_at <= :today_enddatetime');

$q_1->setParameter('today_startdatetime', $today_startdatetime);
$q_1->setParameter('today_enddatetime', $today_enddatetime);
$result= $q_1->getQuery ()->getResult (); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-05-23T18:55:43.887

`DATE_DIFF(date1, date2)`也可以使用返回天数差异的内置函数。检查[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html?highlight=setparameter#dql-functions)

```
$result = $this->createQueryBuilder('l')
    ->where('DATE_DIFF(l.startDate, CURRENT_DATE()) = 0') 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-07-09T19:56:32.417

如此成熟的 ORM 不提供该`DATE` 功能的情况很少见。但是，要从日期时间字段中获取日期，您可以应用如下`SUBSTRING`函数：

```
SELECT SUBSTRING(i.dateTimeField,1,10) FROM tableName i 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-21T09:57:55.160

您必须将`today`参数添加到查询 QueryBuilder 中。

```
$today = new \DateTime();
$qb->setParameter('today', $today->format('Y-m-d')); 
```

使用 QueryBuilder，您可以将日期与 DateTime 格式进行比较`'Y-m-d'`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-12T11:08:44.923

一个简单的解决方案是相应地格式化日期时间

```
public function getWithStartingPremium(\DateTime $datetime)
{
    $qb = $this->createQueryBuilder('c');

    return $qb
        ->innerJoin('c.collegePremium', 'cp')
        ->where($qb->expr()->eq('cp.start', ':date'))
        ->setParameters(array(
            'date' => $datetime->format('Y-m-d'),
        ))
        ->getQuery()
        ->getResult();
} 
```

# php - mod_rewrite 可以在 URL 中找到一个变量，替换它之前的一部分，删除变量并保留剩下的部分吗？

> ID：10681159
> 
> 赞同：4
> 
> 时间：2012-05-21T07:37:49.333
> 
> 标签：php, apache, mod-rewrite, wildcard

我环顾四周，但坦率地说，我不确定我需要使用哪些术语来搜索以获得更精确的结果。哎呀，我在 url vs. uri vs. page vs. link 以及每个是什么和不是什么方面都在苦苦挣扎。并且 MOD_REWRITE 指南似乎是为精通 Apache 或 Unix 或其他任何东西的人编写的，尤其是当他们似乎都没有解释或解析示例以了解每个“编程”字符的作用或含义时。在这里和整个谷歌，我似乎没有得到任何我想要的搜索结果的前 25 个结果，我尝试过涵盖...的概念。

好吧，我要做的是替换依赖于三个变量的 URL 的通配符字符串，同时保留其他位。这可以使用 mod_rewrite 吗？

例如

三个请求的 URL 是：

1.  `http://mydomain.com/WORDS-AND-DASHES-c-NUMBERS_WITH_UNDERSCORES`
2.  `http://mydomain.com/WORDS-AND-DASHES-m-NUMBERS_WITH_UNDERSCORES`
3.  `http://mydomain.com/WORDS-AND-DASHES-p-NUMBERS_WITH_UNDERSCORES`

重写后的 URL 分别应该是：

1.  `http://mydomain.com/index.php?index&categories_id=NUMBERS_WITH_UNDERSCORES`
2.  `http://mydomain.com/index.php?main_page=index&mfrs_id=NUMBERS_WITH_UNDERSCORES`
3.  `http://mydomain.com/index.php?main_page=index&products_id=NUMBERS_WITH_UNDERSCORES`

WORDS-AND-DASHES 的内容和长度因页面而异，NUMBERS_WITH_UNDERSCORES 也是如此。唯一的常量是域和三个链接类型标识符，-c-、-n- 和 -p-。WORDS-AND-DASHES 被替换为取决于链接类型的变量，该变量被消除，并且 NUMBERS_WITH_UNDERSCORES 保留在新 URL 中。

IOW 如果 url 包含“-c-”，那么我想用“index.php?index&categories_id=”替换域和“-c-”之间的所有内容，删除“-c-”部分并保留 NUMBERS_WITH_UNDERSCORES。-c-、-m- 或 -p- 后面也可能只有一个数字。

如果我知道 PHP 这可能是可能的，但我不知道，我希望 mod_write 像我认为的那样强大。如果每个变量需要多个规则，我也可以。做3次工作还是比10000+次好。

FWIW，在升级过程中发现旧的 URL 重写模块停止运行，所以我正在尝试快速重建搜索引擎的 .htaccess 和 sitemap.xml 以及它们各自结果中的所有死链接。

......那么我可能又要在 Mangled Metaphorbial Creek 上狂吠了。

感谢您分享的任何知识、前进方向和/或建议。

-公元前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:22:37.063

以下规则应该有效。它们必须放在网站根目录的 .htaccess 文件中。

```
RewriteEngine On
RewriteRule ^([a-z-]+)-c-([0-9_]+) index.php?index&categories_id=$2         [NC]
RewriteRule ^([a-z-]+)-m-([0-9_]+) index.php?main_page=index&mfrs_id=$2     [NC]
RewriteRule ^([a-z-]+)-p-([0-9_]+) index.php?main_page=index&products_id=$2 [NC] 
```

`index.php`当您在问题中提到的 URL 被请求时，Apache 将触发。Apache 将相应地填充查询字符串。如果`WORDS-AND-DASHES`包含其他内容`a-z`，`-`则相应地修改规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:23:18.920

这可能过于简化，但请尝试：

```
RewriteEngine On
RewriteRule ^(.*?)-c-([\d_]+)$ index.php?index&categories_id=$2         [L]
RewriteRule ^(.*?)-m-([\d_]+)$ index.php?main_page=index&mfrs_id=$2     [L]
RewriteRule ^(.*?)-p-([\d_]+)$ index.php?main_page=index&products_id=$2 [L] 
```

# php - 如何使用 Gdata 使用 Youtube API 检索 Youtube 视频描述？

> ID：10681162
> 
> 赞同：1
> 
> 时间：2012-05-21T07:38:05.997
> 
> 标签：php, zend-framework, youtube-api, gdata-api, zend-gdata

我使用 YouTube 视频上传 API 将视频从我的网站上传到 YouTube，但是我还需要检索提供其 url 的视频的视频描述。我用了这条线

`<?php $entry= getVideoEntry("kNUBV9trDoA"); echo $entry->getVideoDescription();?>`

我使用 require zend loader 来操作这些行

```
include("Zend/Loader.php"); 
```

但是当我这样做并在服务器上运行 PHP 文件时，我得到了这个错误

```
Fatal error: Call to undefined function getVideoEntry() 
```

我相信加载器文件会加载操作所需的每个文件

但在 operation.php 中也有这些行

```
Zend_Loader::loadClass('Zend_Gdata_YouTube');
Zend_Loader::loadClass('Zend_Gdata_AuthSub');
Zend_Loader::loadClass('Zend_Gdata_App_Exception'); 
```

但是当我在加载程序下使用这些行时包含行我得到这个错误

警告：include_once(Zend\Gdata\YouTube.php) [function.include-once]：打开流失败：没有这样的文件或目录

它们都在那个文件夹中，但是 php 脚本无法加载它们路径都是正确的，我已经检查过了。

我应该如何使用此 API 检索 YouTube 视频的视频描述 我需要什么文件 我如何初始化或有更简单的方法通过提供 YouTube 的 URL 或视频 ID 来检索视频描述

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:01:52.273

您没有正确输入视频。它应该是：

```
// Assuming $yt is an authorised Zend_Gdata_YouTube object.
$entry       = $yt->getVideoEntry($videoid);
// Sometimes you may need to get the full entry:
$fullentry   = $yt->getFullVideoEntry($videoid);
// Now you can get the description
$description = $entry->getVideoDescription(); 
```

阅读文档的[检索](https://developers.google.com/youtube/2.0/developers_guide_php#Retrieving_Video_Entry)。

# android - Android：/mnt/sdcard下文件的所有者

> ID：10681168
> 
> 赞同：0
> 
> 时间：2012-05-21T07:38:41.483
> 
> 标签：android, sd-card

我发现 /mnt/sdcard 下文件的 owner:group 始终是 system:sdcard_rw。即使我 su 到 root 并创建一个文件，所有者仍然是 system:sdcard_rw。

/mnt/sdcard 下的文件有什么特别之处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:43:03.230

sdcard 上的文件系统可能是 vfat (fat32)，它不存储用户和组的信息。使用挂载点的所有者和组。

用户和组由挂载选项定义。这是我的 AVD 的示例安装输出：

> /dev/block/vold/179:0 /mnt/sdcard **vfat** rw,dirsync,nosuid,nodev,noexec, **uid=1000,gid=1015** ,fmask=0702,dmask=0702,allow_utime=0020,codepage=cp437,iocharset =iso885

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:43:11.577

SD 卡通常格式化为 FAT32，不支持设置文件访问权限。

# javascript - 空表单提交Javascript

> ID：10681173
> 
> 赞同：0
> 
> 时间：2012-05-21T07:39:12.083
> 
> 标签：javascript, iphone, forms, submission

我试图阻止人们通过我在我的网站上的联系我们向我发送空白电子邮件。在我的主要网站上，我成功使用了以下 javascript：

```
<script type="text/javascript">
function checkForm(f)
{
if (f.elements['cf_name'].value == "" && f.elements['cf_email'].value == "" &&          f.elements['cf_message'].value == "")
{
    alert("You have not filled in all of the required fields.");
    return false;
}
else
{
    f.submit();
    return false;
}
}
</script> 
```

虽然这可行，但当我在我的移动网站上实现相同的功能时，人们仍然能够发送空白电子邮件。

我用于表单检查的 HTML 代码是：

```
<form action="contact.php" method="post" name="sform" onSubmit="return checkForm(this);"> 
```

所以我的问题是如果字段为空，我如何在移动设备（特别是 iPhone）上停止表单提交

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:56:14.447

你确定这不是逻辑错误？看起来像这样：

```
if (f.elements['cf_name'].value == "" && f.elements['cf_email'].value == "" &&          f.elements['cf_message'].value == "") 
```

应该：

```
if (f.elements['cf_name'].value == "" || f.elements['cf_email'].value == "" ||          f.elements['cf_message'].value == "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:52:08.003

尽管客户端验证很有用，因为它更直接，但您**永远不**应该依赖它，并且单独使用 Javascript 进行这种检查充满了漏洞（如您所见）。如果 Javascript 可以正常工作，编写代码可以很好地工作，如果 Javascript 没有实现，仍然可以进行您想要的验证。

由于您将表单数据发送到 php 脚本，因此请在客户端以及在客户端进行检查，并且仅在表单数据有效时才发送邮件。

# osx-lion - 通过 Mac 在 PyPy 中安装 Pygame

> ID：10681174
> 
> 赞同：3
> 
> 时间：2012-05-21T07:39:15.323
> 
> 标签：osx-lion, pygame, pypy

我尝试在我的 Mac OSX Lion 上为 PyPy 安装 Pygame 版本 1.9.1release。我先跑`pypy config.py`了`pypy setup.py install`。我将配置添加到安装过程中，因为我看到它正在尝试使用普通 python 进行配置（正确安装，但会导致导入错误）。在安装过程中，有很多警告，例如：

```
src/overlay.c:44:5: warning: implicit declaration of function 'PyObject_Free' is invalid in C99 [-Wimplicit-function-declaration]
PyObject_Free ((PyObject*)self);
^ 
```

但它也为我提供了 2 个类似的错误：

```
 In file included from src/scale_mmx.c:33:
src/scale_mmx64.c:424:27: error: invalid instruction mnemonic 'movsxl'
        asm __volatile__( " /* MMX code for inner loop of X bilinear filter */ "
                          ^
<inline asm>:1:191: note: instantiated into assembly here
         /* MMX code for inner loop of X bilinear filter */  movl             -36(%rbp),      %ecx;            pxor          %mm0,      %mm0;           1:                                           movsxl         (%rdi), ...
                                                                                                                                                                                                     ^~~~~~
In file included from src/scale_mmx.c:33:
src/scale_mmx64.c:499:27: error: invalid instruction mnemonic 'movsxl'
        asm __volatile__( " /* MMX code for inner loop of X bilinear filter */ "
                          ^
<inline asm>:1:191: note: instantiated into assembly here
         /* MMX code for inner loop of X bilinear filter */  movl             -36(%rbp),      %ecx;            pxor          %mm0,      %mm0;           1:                                           movsxl         (%rdi), ...
                                                                                                                                                                                                     ^~~~~~
2 errors generated. 
```

对我来说，PyPy 卡在生成似乎是 C 中的块注释的行对我来说似乎很愚蠢。为什么它将注释封装在 asm 和 volatile 中是我无法理解的。但这是提供给我并在常规 python 中工作的代码。那么这是一个错误吗？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T18:34:39.787

Chances are PyPy has some #defines different than CPython (for good or bad reasons) and pygame chooses to use something else (based on a badly thought out #else with implicit assumptions) that tries to compile invalid C. I'm just guessing though, you would need to follow why and how the same code is/is not compiled on CPython.

# python - 如何进行金字塔形式的国际化？

> ID：10681181
> 
> 赞同：0
> 
> 时间：2012-05-21T07:39:40.143
> 
> 标签：python, internationalization, pyramid, chameleon, deform

我一直在网上寻找*错误消息*和金字塔形式**标签**的本地化，但到目前为止没有任何运气。我研究过 pyramid_simpleform 和 pyramid_deform。有没有人做过类似的事情。文档没有太大帮助。

[此页面](http://deformdemo.repoze.org/i18n/)上给出的示例 对我不起作用。

我还尝试了[pyramid_deform](http://docs.pylonsproject.org/projects/deform/en/latest/i18n.html)和[pyramid_simpleform](http://packages.python.org/pyramid_simpleform/#localization-and-state)的文档。

我不在乎我使用哪个表单库。我想要直接支持本地化的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:49:15.803

这对我有用。

```
 from pyramid.i18n import get_locale_name
   from pyramid_simpleform import Form,State
   from formencode import api as formencode_api
   def includeme(config):
     config.scan(__name__)
     config.add_route('login', '/login')

   @view_config(route_name='login',renderer='website/login.mak')
   def login(request):

     formencode_api.set_stdtranslation(languages=[get_locale_name(request)])

     form = Form(request,
            defaults=dict(request.params),
            schema=MySchema,
            state=State()                
            )
     form.state._ = '' 
```

# java - 提交同一 jsp 中存在的第二个表单时出错....需要建议

> ID：10681182
> 
> 赞同：1
> 
> 时间：2012-05-21T07:39:48.537
> 
> 标签：java, spring, jsp, jakarta-ee, spring-mvc

我有一个 JSP 说 myPage.jsp

在jsp中我有两个div

每个 div 包含一种形式，如下所示：

**分区 A：**

```
<div class="validation-box">                
            <form:form id="compnay-detail" method="post" action="companySave.do" commandName="company">
                    <table cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="col"><label>Address Type</label> <form:input type="text" path="addressType" class="textbox" name="addressType" id="addType" maxlength="20" />
                            </td>
                            <td class="col"><label>Street</label> <form:input path="street"
                            class="textbox" name="street" id="street" maxlength="50" />
                            </td>               
                        </tr>
                        <tr>
                            <td colspan="3" class="no-padding">
                                <div class="button-pannel margin-top">
                                <span class="lhscrv"> <span class="rhscrv"> <input type="submit" class="bttn" id="saveAddress" value="Save" />
                                </span>
                                </span> <span class="lhscrv"> <span class="rhscrv"> <input
                                        type="button" class="bttn" id="reset" value="Reset" />
                                </span>
                                </span> <span class="lhscrv"> <span class="rhscrv"> <input
                                        type="button" class="bttn" id="cancel" value="Cancel" />
                                </span>
                                </span>
                            </td>
                        </tr>
                    </table>
            </form:form>
            </div> 
```

**分区 B：**

```
<div class="validation-box">                
            <form:form id="compnayAddDetail" method="post" action="test.do" commandName="address">
                    <table cellpadding="0" cellspacing="0">
                        <tr>
                            <td class="col"><label>Address Type</label> <form:input type="text" path="addressType" class="textbox" name="addressType" id="addType" maxlength="20" />
                            </td>
                            <td class="col"><label>Street</label> <form:input path="street"
                            class="textbox" name="street" id="street" maxlength="50" />
                            </td>               
                        </tr>
                        <tr>
                            <td colspan="3" class="no-padding">
                                <div class="button-pannel margin-top">
                                <span class="lhscrv"> <span class="rhscrv"> <input type="submit" class="bttn" id="saveAddress" value="Save" />
                                </span>
                                </span> <span class="lhscrv"> <span class="rhscrv"> <input
                                        type="button" class="bttn" id="reset" value="Reset" />
                                </span>
                                </span> <span class="lhscrv"> <span class="rhscrv"> <input
                                        type="button" class="bttn" id="cancel" value="Cancel" />
                                </span>
                                </span>
                            </td>
                        </tr>
                    </table>
            </form:form>
            </div> 
```

**我的控制器类：**

```
@RequestMapping("/companySave.do")
    public String saveCompany(Map<String, Object> map, @ModelAttribute("company")
    Company company,@ModelAttribute("address")
    CompanyAddress address, BindingResult result)
    {           
        //......   code.......
        return "redirect:/companyAddressPage/"+company.getId()+".do";

    }

    @RequestMapping("/companyAddressPage/{id}.do")
    public String companyAddressPage(@PathVariable("id") long id,Map<String, Object> map, @ModelAttribute("company")
    Company company,@ModelAttribute("address")
    CompanyAddress address, BindingResult result)
    {   //......   code.......
        return "myPage";
    }

    @RequestMapping("/test.do")
    public String saveAddressCompany(Map<String, Object> map, @ModelAttribute("company")
    Company company,@ModelAttribute("address")
    CompanyAddress address, BindingResult result)
    {   //......   code.......
        return "myPage";
    } 
```

**目标：**

在提交 div A 中存在的第一个表单后，我想启用包含另一个表单的 div B。

**问题 ：**

第一个表单正确提交，但是当我单击第二个表单的提交按钮时，它抛出异常（甚至没有调用操作）

**例外 ：**

无法将值测试从“java.lang.String”类型转换为“long”类型；嵌套异常是 java.lang.NumberFormatException: For input string: "test"] with root cause

任何想法....？？？

提前致谢...！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:14:34.187

编辑：也见评论。

您需要在第二个表单的 action 属性前面添加一个正斜杠：

```
action="/test.do" 
```

否则，您将最终到达 /companyAddressPage/test.do，因为您刚刚被重定向到 /companyAddressPage/1.do（其中 1 是示例 ID）。这是因为第二种形式的动作属性是相对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:52:23.373

无论您在 @PathVariable 中获得什么值，它始终只有 String 类型值。

所以而不是使用

```
@PathVariable("id") long id 
```

用这个

```
@PathVariable("id") String id 
```

然后在您在函数中使用之前手动将其转换为 long。

希望这对您有所帮助。

干杯。

# sql - oracle sql中的CONNECT BY和START WITH子句

> ID：10681198
> 
> 赞同：1
> 
> 时间：2012-05-21T07:41:14.580
> 
> 标签：sql, oracle, hierarchy, connect-by

我想要下面给出的测试数据的分层数据。对于用户“jones”，它应该获取以下记录。我遇到了 CONNECT BY 和 START WITH 子句的问题。我还认为 menu_items 和 role_menu_items 表之间存在一些 JOIN 问题。

对于用户及其相应的角色，我需要检查以下数据

```
select  mi.id,  mi.NAME,mi.MEN_ID,mi.ICON,mi.ACTION--,r.NAME 
from
menu_items mi,
role_menu_items rmi,
roles r,
USERS U,
USER_ROLES UR
where
mi.ID=rmi.MIT_ID and
rmi.ROL_ID=r.id and
r.id=UR.ROLE_ID and
U.ID=UR.USER_ID and
U.NAME='jones'
start with mi.men_id is null
connect by   prior  mi.ID=mi.men_id 
```

输出

```
1   Menu1           Menu1       /images/home.gif
3   Help            Help    
4   page1   a   1   page1   1   /images/email.gif
7   about   d   1   about   3 
```

* * *

```
Insert into MENU_ITEMS (ID,NAME,SHORTCUT,DISPLAY_SEQUENCE,ACTION,MEN_ID,ICON) 
  values (1,'Menu1',null,null,'Menu1',null,'/images/home.gif');

Insert into MENU_ITEMS (ID,NAME,SHORTCUT,DISPLAY_SEQUENCE,ACTION,MEN_ID,ICON) 
  values (2,'Menu2',null,null,'Menu2',null,null);

Insert into MENU_ITEMS (ID,NAME,SHORTCUT,DISPLAY_SEQUENCE,ACTION,MEN_ID,ICON) 
  values (3,'Help',null,null,'Help',null,null);

Insert into MENU_ITEMS (ID,NAME,SHORTCUT,DISPLAY_SEQUENCE,ACTION,MEN_ID,ICON) 
  values (4,'page1','a',1,'page1',1,'/images/email.gif');

Insert into MENU_ITEMS (ID,NAME,SHORTCUT,DISPLAY_SEQUENCE,ACTION,MEN_ID,ICON) 
  values (5,'page2','b',2,'page2',1,null);

Insert into MENU_ITEMS (ID,NAME,SHORTCUT,DISPLAY_SEQUENCE,ACTION,MEN_ID,ICON) 
  values (6,'page3','c',1,'page3',2,'/images/photo.gif');

Insert into MENU_ITEMS (ID,NAME,SHORTCUT,DISPLAY_SEQUENCE,ACTION,MEN_ID,ICON) 
  values (7,'about','d',1,'about',3,null);

insert into ROLES (ID, NAME)
values (1, 'administrator');

insert into ROLES (ID, NAME)
values (2, 'user');

Insert into ROLE_MENU_ITEMS (ROL_ID,MIT_ID) values (1,4);
Insert into ROLE_MENU_ITEMS (ROL_ID,MIT_ID) values (1,5);
Insert into ROLE_MENU_ITEMS (ROL_ID,MIT_ID) values (1,6);
Insert into ROLE_MENU_ITEMS (ROL_ID,MIT_ID) values (1,7);
Insert into ROLE_MENU_ITEMS (ROL_ID,MIT_ID) values (2,4);
Insert into ROLE_MENU_ITEMS (ROL_ID,MIT_ID) values (2,7);

Insert into USER_ROLES (USER_ID,ROLE_ID) values (2,2);
Insert into USER_ROLES (USER_ID,ROLE_ID) values (1,1);
Insert into USER_ROLES (USER_ID,ROLE_ID) values (3,2);

Insert into USERS (ID,NAME,PASSWORD) values (2,'scott','scott');
Insert into USERS (ID,NAME,PASSWORD) values (1,'john','john');
Insert into USERS (ID,NAME,PASSWORD) values (3,'jones','jones'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:15:42.350

糟糕的计划，但有可能

**1.**为用户角色选择所有menu_id

* * *

```
select RMI.MIT_ID
from ROLE_MENU_ITEMS RMI
   , ROLES R
   , USERS U
   , USER_ROLES UR
where RMI.ROL_ID = R.ID
  and R.ID = UR.ROLE_ID
  and U.ID = UR.USER_ID
  and U.NAME = 'jones' 
```

**2.**反向层次查询

* * *

```
select MI.*
     , max(LEVEL) over () + 1 - level as rev_level
     , lpad(' ', (max(LEVEL) over () + 1 - LEVEL) * 3, ' ') || MI.NAME as LEVEL_NAME
     , rownum RN
from MENU_ITEMS MI
connect by prior MEN_ID = ID
start with ID IN (select RMI.MIT_ID
                  from ROLE_MENU_ITEMS RMI
                     , ROLES R
                     , USERS U
                     , USER_ROLES UR
                  where RMI.ROL_ID = R.ID
                    and R.ID = UR.ROLE_ID
                    and U.ID = UR.USER_ID
                    and U.NAME = 'jones') 
```

**3.** reverse（反向层次查询）

* * *

```
select ID
     , NAME
     , SHORTCUT
     , DISPLAY_SEQUENCE
     , ACTION
     , MEN_ID
     , ICON
     , LEVEL_NAME
from 
(
    select MI.*
         , max(LEVEL) over () + 1 - level as rev_level
         , lpad(' ', (max(LEVEL) over () + 1 - LEVEL) * 3, ' ') || MI.NAME as LEVEL_NAME
         , rownum RN
    from MENU_ITEMS MI
    connect by prior MEN_ID = ID
    start with ID IN (select RMI.MIT_ID
                      from ROLE_MENU_ITEMS RMI
                         , ROLES R
                         , USERS U
                         , USER_ROLES UR
                      where RMI.ROL_ID = R.ID
                        and R.ID = UR.ROLE_ID
                        and U.ID = UR.USER_ID
                        and U.NAME = 'jones')
)
group by ID --distinct with order
       , name
       , SHORTCUT
       , DISPLAY_SEQUENCE
       , ACTION
       , MEN_ID
       , ICON
       , LEVEL_NAME
order by min(-RN) 
```

可以使用子查询按 ID 保留根项目的排序

```
select ID
     , NAME
     , SHORTCUT
     , DISPLAY_SEQUENCE
     , ACTION
     , MEN_ID
     , ICON
     , LEVEL_NAME
from 
(
    select ID
         , NAME
         , SHORTCUT
         , DISPLAY_SEQUENCE
         , ACTION
         , MEN_ID
         , ICON
         , MAX(LVL) OVER () + 1 - LVL
         , rpad(' ', (max(LVL) over () + 1 - LVL) * 3, ' ') || NAME as LEVEL_NAME
         , RN
    from (
        select MI.*
             , rownum RN
             , level LVL
        from MENU_ITEMS MI
        connect by prior MEN_ID = ID
        start with ID IN (select RMI.MIT_ID
                          from ROLE_MENU_ITEMS RMI
                             , ROLES R
                             , USERS U
                             , USER_ROLES UR
                          where RMI.ROL_ID = R.ID
                            and R.ID = UR.ROLE_ID
                            and U.ID = UR.USER_ID
                            and U.NAME = 'jones')
        order siblings by -ID
    )
)
group by ID --distinct with order
       , name
       , SHORTCUT
       , DISPLAY_SEQUENCE
       , ACTION
       , MEN_ID
       , ICON
       , LEVEL_NAME
order by min(-RN) 
```

# asp.net - 何时启用表单身份验证滑动到期

> ID：10681199
> 
> 赞同：0
> 
> 时间：2012-05-21T07:41:15.657
> 
> 标签：asp.net, ssl, forms-authentication

我在 MSDN 中读到，当您的网站没有激活 SSL 时，将slidingExpiration 设置为 false。这是为了限制劫持者使用被盗 authcookie 的时间。

但这没有任何意义。当没有 SSL 时，黑客可以自己获取凭据并使用它们。当他/她可以访问用户名/密码时，他/她为什么要窃取 cookie？

我想说slidingExpiration 与 enabledSSL 无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:54:50.143

> 当他/她可以访问用户名/密码时，他/她为什么要窃取 cookie？

是什么让您认为他可以访问用户名/密码？**只有**用户名存在于加密表单身份验证 cookie 中。所以他窃取的是cookie，而不是用户名或密码。他无法解密它（除非他使用蛮力），因此他无法获取原始用户名，也无法更改此用户名。由于此 cookie 中甚至不存在密码，因此他无法获得密码。因此，如果此 cookie 激活了滑动过期，只要它有效，他就可以使用它。

但总的来说，如果您关心安全性，您应该始终使用 SSL。

# elasticsearch - 将海量数据索引到 Elasticsearch

> ID：10681203
> 
> 赞同：6
> 
> 时间：2012-05-21T07:41:22.240
> 
> 标签：elasticsearch

我是 elasticsearch 新手，拥有大量数据（mysql 表中有超过 16k 大行）。我需要将这些数据推送到弹性搜索中，并且在将其索引到其中时遇到问题。有没有办法让索引数据更快？如何处理海量数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-29T20:25:06.327

## 扩展[批量 API](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/docs-bulk.html)

您将向`/_bulk`

您的有效负载将遵循以下格式，`\n`换行符在哪里。

```
action_and_meta_data\n
optional_source\n
action_and_meta_data\n
optional_source\n
... 
```

**确保你的 json 打印得不是很漂亮**

可用的操作是`index`、`create`和。`update``delete`

* * *

## 批量加载示例

要回答您的问题，如果您只想将数据批量加载到索引中。

```
{ "create" : { "_index" : "test", "_type" : "type1", "_id" : "3" } }
{ "field1" : "value3" } 
```

第一行包含操作和元数据。在这种情况下，我们调用`create`. 我们将插入一个类型的文档到以手动分配的 id`type1`命名的索引中（而不是 elasticsearch 自动生成的）。`test``3`

第二行包含映射中的所有字段，在此示例中`field1`，其值为`value3`.

您只需连接尽可能多的这些，就像您想插入到您的索引中一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T12:24:23.837

这可能是一个旧线程，但我无论如何都会对任何正在寻找解决这个问题的人发表评论。用于 Elastic Search 的 JDBC River 插件对于从各种受支持的 DB 导入数据非常有用。

[在此处链接到 JDBC 的 River 源代码。](http://goo.gl/69b7LY) 使用 Git Bash 的 curl 命令，我**放置**了以下配置文档以允许 ES 实例和 MySQL 实例之间的通信 -

```
curl -XPUT 'localhost:9200/_river/uber/_meta' -d '{
"type" : "jdbc",
"jdbc" : {
 "strategy" : "simple",
 "driver" : "com.mysql.jdbc.Driver",
 "url" : "jdbc:mysql://localhost:3306/elastic",
 "user" : "root",
 "password" : "root",
 "sql" : "select * from tbl_indexed",
 "poll" : "24h",
 "max_retries": 3,
 "max_retries_wait" : "10s"
 },
 "index": {
 "index": "uber",
 "type" : "uber",
 "bulk_size" : 100
 }
}' 
```

确保在 river-jdbc 插件目录中拥有**mysql-connector-java-VERSION-bin ，其中包含 jdbc-river 必需的 JAR 文件。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:44:12.503

尝试批量 api

[http://www.elasticsearch.org/guide/reference/api/bulk.html](http://www.elasticsearch.org/guide/reference/api/bulk.html)

# c++ - 基于坐标和高度的日出和日落时间

> ID：10681204
> 
> 赞同：3
> 
> 时间：2012-05-21T07:41:29.170
> 
> 标签：c++, visual-c++, time

我正在使用此代码来计算日出和日落时间。

```
// Get the daylight status of the current time.
bool
SunLight::CalculateDaylightStatus()
{
   // Calculate the current time of day.
   time_t currentTime = time(NULL);
   m_LocalTime = localtime(&currentTime);

   // Initialize the sunrise and set times.
   *m_Sunrise = *m_LocalTime;
   *m_Sunset = *m_LocalTime;

   // Flags to check whether sunrise or set available on the day or not.
   m_IsSunrise = false;
   m_IsSunset = false;

   m_RiseAzimuth = 0.0;
   m_SetAzimuth = 0.0;

   for (unsigned int i = 0; i < 3; i++)
   {
      m_RightAscention[i] = 0.0;
      m_Decension[i] = 0.0;
      m_VHz[i] = 0.0;
   }

   for (unsigned int i = 0; i < 2; i++)
   {
      m_SunPositionInSky[i] = 0.0;
      m_RiseTime[i] = 0;
      m_SetTime[i] = 0;
   }

   // Calculate the sunrise and set times.
   CalculateSunRiseSetTimes();

   return (mktime(m_LocalTime) >= mktime(m_Sunrise) && mktime(m_LocalTime) < mktime(m_Sunset))
         ? true
         : false;
}
//---------------------------------------------------------------------

bool
SunLight::CalculateSunRiseSetTimes()
{
   double zone = timezone/3600 - m_LocalTime->tm_isdst;

   // Julian day relative to Jan 1.5, 2000.
   double jd = GetJulianDay() - 2451545;

   if ((Sign(zone) == Sign(m_Config->Longitude())) && (zone != 0))
   {
      return false;
   }

   double tz = zone / 24;

   // Centuries since 1900.0
   double ct = jd / 36525 + 1;

   // Local sidereal time.
   double t0 = LocalSiderealTimeForTimeZone(jd, tz, m_Config->Longitude()/360);

   // Get sun position at start of day.
   jd += tz;

   // Calculate the position of the sun.
   CalculateSunPosition(jd, ct);

   double ra0 = m_SunPositionInSky[0];
   double dec0 = m_SunPositionInSky[1];

   // Get sun position at end of day.
   jd += 1;

   // Calculate the position of the sun.
   CalculateSunPosition(jd, ct);

   double ra1 = m_SunPositionInSky[0];
   double dec1 = m_SunPositionInSky[1];

   // make continuous
   if (ra1 < ra0)
      ra1 += 2 * M_PI;

   m_RightAscention[0] = ra0;
   m_Decension[0] = dec0;

   // check each hour of this day
   for (int k = 0; k < 24; k++)
   {
      m_RightAscention[2] = ra0 + (k + 1) * (ra1 - ra0) / 24;
      m_Decension[2] = dec0 + (k + 1) * (dec1 - dec0) / 24;
      m_VHz[2] = TestHour(k, t0, m_Config->Latitude());

      // advance to next hour
      m_RightAscention[0] = m_RightAscention[2];
      m_Decension[0] = m_Decension[2];
      m_VHz[0] = m_VHz[2];
   }

   // Update the tm structure with time values.
   m_Sunrise->tm_hour = m_RiseTime[0];
   m_Sunrise->tm_min = m_RiseTime[1];

   m_Sunset->tm_hour = m_SetTime[0];
   m_Sunset->tm_min = m_SetTime[1];

   // neither sunrise nor sunset
   if ((!m_IsSunrise) && (!m_IsSunset))
   {
      // Sun down all day.
      if (m_VHz[2] < 0)
         m_IsSunset = true;

      // Sun up all day.
      else
         m_IsSunrise = true;
   }
   return true;
}
//---------------------------------------------------------------------

int
SunLight::Sign(double value)
{
   if (value > 0.0)
      return 1;
   else if (value < 0.0)
      return -1;
   else
      return 0;
}
//---------------------------------------------------------------------

// Local Sidereal Time for zone.
double
SunLight::LocalSiderealTimeForTimeZone(double jd, double z, double lon)
{
   double s = 24110.5 + 8640184.812999999 * jd / 36525 + 86636.6 * z + 86400 * lon;
   s = s / 86400;
   s = s - floor(s);
   return s * 360 * cDegToRad;
}
//---------------------------------------------------------------------

// Determine Julian day from calendar date
// (Jean Meeus, "Astronomical Algorithms", Willmann-Bell, 1991).
double
SunLight::GetJulianDay()
{
   int month = m_LocalTime->tm_mon + 1;
   int day = m_LocalTime->tm_mday;
   int year = 1900 + m_LocalTime->tm_year;

   bool gregorian = (year < 1583) ? false : true;

   if ((month == 1) || (month == 2))
   {
      year = year - 1;
      month = month + 12;
   }

   double a = floor((double)year / 100);
   double b = 0;

   if (gregorian)
      b = 2 - a + floor(a / 4);
   else
      b = 0.0;

   double jd = floor(365.25 * (year + 4716))
         + floor(30.6001 * (month + 1))
         + day + b - 1524.5;

   return jd;
}
//---------------------------------------------------------------------

// Sun's position using fundamental arguments
// (Van Flandern & Pulkkinen, 1979).
void
SunLight::CalculateSunPosition(double jd, double ct)
{
   double g, lo, s, u, v, w;

   lo = 0.779072 + 0.00273790931 * jd;
   lo = lo - floor(lo);
   lo = lo * 2 * M_PI;

   g = 0.993126 + 0.0027377785 * jd;
   g = g - floor(g);
   g = g * 2 * M_PI;

   v = 0.39785 * sin(lo);
   v = v - 0.01 * sin(lo - g);
   v = v + 0.00333 * sin(lo + g);
   v = v - 0.00021 * ct * sin(lo);

   u = 1 - 0.03349 * cos(g);
   u = u - 0.00014 * cos(2 * lo);
   u = u + 0.00008 * cos(lo);

   w = -0.0001 - 0.04129 * sin(2 * lo);
   w = w + 0.03211 * sin(g);
   w = w + 0.00104 * sin(2 * lo - g);
   w = w - 0.00035 * sin(2 * lo + g);
   w = w - 0.00008 * ct * sin(g);

   // compute sun's right ascension
   s = w / sqrt(u - v * v);
   m_SunPositionInSky[0] = lo + atan(s / sqrt(1 - s * s));

   // ...and declination
   s = v / sqrt(u);
   m_SunPositionInSky[1] = atan(s / sqrt(1 - s * s));
}
//---------------------------------------------------------------------

// Test an hour for an event.
double
SunLight::TestHour(int k, double t0, double prmLatitude)
{
   double ha[3];
   double a, b, c, d, e, s, z;
   double time;
   double az, dz, hz, nz;
   int hr, min;

   ha[0] = t0 - m_RightAscention[0] + k * cK1;
   ha[2] = t0 - m_RightAscention[2] + k * cK1 + cK1;

   ha[1] = (ha[2] + ha[0]) / 2;    // hour angle at half hour
   m_Decension[1] = (m_Decension[2] + m_Decension[0]) / 2;  // declination at half hour

   s = sin(prmLatitude * cDegToRad);
   c = cos(prmLatitude * cDegToRad);
   z = cos(90.833 * cDegToRad);    // refraction + sun semi-diameter at horizon

   if (k <= 0)
      m_VHz[0] = s * sin(m_Decension[0]) + c * cos(m_Decension[0]) * cos(ha[0]) - z;

   m_VHz[2] = s * sin(m_Decension[2]) + c * cos(m_Decension[2]) * cos(ha[2]) - z;

   if (Sign(m_VHz[0]) == Sign(m_VHz[2]))
      return m_VHz[2];  // no event this hour

   m_VHz[1] = s * sin(m_Decension[1]) + c * cos(m_Decension[1]) * cos(ha[1]) - z;

   a = 2 * m_VHz[0] - 4 * m_VHz[1] + 2 * m_VHz[2];
   b = -3 * m_VHz[0] + 4 * m_VHz[1] - m_VHz[2];
   d = b * b - 4 * a * m_VHz[0];

   if (d < 0)
      return m_VHz[2];  // no event this hour

   d = sqrt(d);
   e = (-b + d) / (2 * a);

   if ((e > 1) || (e < 0))
      e = (-b - d) / (2 * a);

   time = (double)k + e + (double)1 / (double)120; // time of an event

   hr = (int)floor(time);
   min = (int)floor((time - hr) * 60);

   hz = ha[0] + e * (ha[2] - ha[0]);                 // azimuth of the sun at the event
   nz = -cos(m_Decension[1]) * sin(hz);
   dz = c * sin(m_Decension[1]) - s * cos(m_Decension[1]) * cos(hz);
   az = atan2(nz, dz) / cDegToRad;
   if (az < 0) az = az + 360;

   if ((m_VHz[0] < 0) && (m_VHz[2] > 0))
   {
      m_RiseTime[0] = hr;
      m_RiseTime[1] = min;
      m_RiseAzimuth = az;
      m_IsSunrise = true;
   }

   if ((m_VHz[0] > 0) && (m_VHz[2] < 0))
   {
      m_SetTime[0] = hr;
      m_SetTime[1] = min;
      m_SetAzimuth = az;
      m_IsSunset = true;
   }

   return m_VHz[2];
}
//--------------------------------------------------------------------- 
```

我需要在公式中引入高度，以提供更准确的结果。有人可以给我一个快速的解决方案，我必须修改什么以在公式中添加高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:12:54.420

该算法远不能计算日出和日落的时间。您需要的是[Jean Meeus 的《天文算法》一书](http://www.willbell.com/math/mc1.HTM)。您将需要考虑观察者的经度和纬度、动力时间和世界时之间的差异以及地球轨道的偏心率，以获得低精度的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T14:52:55.207

这似乎被称为[日出方程](https://en.wikipedia.org/wiki/Sunrise_equation)。该 Wiki 文章中的公式非常简单，而且它们确实说明了地理位置。

# jquery - 多个 div 的拉斐尔动画

> ID：10681205
> 
> 赞同：0
> 
> 时间：2012-05-21T07:41:29.933
> 
> 标签：jquery, raphael

我是 Raphael 的新手，我想要多个 div 的 raphael 动画。目前我有单个 div 的动画。但我无法为多个 div 做它会发生冲突。

以下是代码

[http://tympanus.net/codrops/2011/04/22/animated-skills-diagram/](http://tympanus.net/codrops/2011/04/22/animated-skills-diagram/)

HTML

```
<div class="diagram"></div>
        <div class="get">
        <div class="arc">
                <span class="text">JavaScript</span>
                <input type="hidden" class="percent" value="95" />
                <input type="hidden" class="color" value="#97BE0D" />
        </div>
            <div class="arc">
                <span class="text">CSS3</span>
                <input type="hidden" class="percent" value="90" />
                <input type="hidden" class="color" value="#D84F5F" />
            </div>
       </div>

<div class="diagram"></div>
        <div class="get">
        <div class="arc">
                <span class="text">JavaScript</span>
                <input type="hidden" class="percent" value="95" />
                <input type="hidden" class="color" value="#97BE0D" />
        </div>
            <div class="arc">
                <span class="text">CSS3</span>
                <input type="hidden" class="percent" value="90" />
                <input type="hidden" class="color" value="#D84F5F" />
            </div>
       </div> 
```

很快...

JAVASCRIPT

```
var o = {
    init: function(){
        this.diagram();

    },
    random: function(l, u){
        return Math.floor((Math.random()*(u-l+1))+l);
    },
    diagram: function(){
        var r = Raphael($('.diagram'),600,600),  //need effects for all the div
            rad =  3,
            defaultText = 'Skills',
            speed = 250;

        r.circle(300, 300, 20).attr({ stroke: 'none', fill: '#193340' });

        var title = r.text(300, 300, defaultText).attr({
            font: '12px Arial',
            fill: '#fff'
        }).toFront();

        r.customAttributes.arc = function(value, color, rad){
            var v = 3.6*value,
                alpha = v == 360 ? 359.99 : v,
                random = o.random(91, 240),
                a = (random-alpha) * Math.PI/180,
                b = random * Math.PI/180,
                sx = 300 + rad * Math.cos(b),
                sy = 300 - rad * Math.sin(b),
                x = 300 + rad * Math.cos(a),
                y = 300 - rad * Math.sin(a),
                path = [['M', sx, sy], ['A', rad, rad, 0, +(alpha > 180), 1, x, y]];
            return { path: path, stroke: color }
        }

        $('.get').find('.arc').each(function(i){
            var t = $(this), 
                color = t.find('.color').val(),
                value = t.find('.percent').val(),
                text = t.find('.text').text();

            rad += 17;  
            var z = r.path().attr({ arc: [value, color, rad], 'stroke-width': 12 });

            z.mouseover(function(){
                this.animate({ 'stroke-width': 20, opacity: .75 }, 1000, 'elastic');
                if(Raphael.type != 'VML') //solves IE problem
                this.toFront();
                title.stop().animate({ opacity: 0 }, speed, '>', function(){
                    this.attr({ text: text + '\n' + value + '%' }).animate({ opacity: 1 }, speed, '<');
                });
            }).mouseout(function(){
                this.stop().animate({ 'stroke-width': 12, opacity: 1 }, speed*4, 'elastic');
                title.stop().animate({ opacity: 0 }, speed, '>', function(){
                    title.attr({ text: defaultText }).animate({ opacity: 1 }, speed, '<');
                }); 
            });
        });

    }
}
$(function(){ o.init(); }); 
```

[http://tympanus.net/codrops/2011/04/22/animated-skills-diagram/](http://tympanus.net/codrops/2011/04/22/animated-skills-diagram/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:57:26.197

自从我使用它已经有一段时间了，如果我错了，请纠正我，但是：

```
var r = Raphael($('.diagram'),600,600),  //need effects for all the div
            rad =  3,
            defaultText = 'Skills',
            speed = 250; 
```

Raphael 对象创建一个画布，然后您对其进行操作，这里有多个 div。Raphael 期望单个元素的问题（为什么作者使用 id 而不是 styleclass）以及返回元素数组的问题？

如果这是问题，请先尝试获取所有 div，然后为每个 div 执行此代码，而不是将所有 div 传递给此函数。

# opengl-es - 使用 OpenGL ES 2.0 在 glBufferData 中加载顶点

> ID：10681210
> 
> 赞同：3
> 
> 时间：2012-05-21T07:41:39.337
> 
> 标签：opengl-es, opengl-es-2.0

我正在使用一个处理 Wavefront OBJ 3D 对象文件的解析器，我不太确定我是否正确加载到 OpenGL 中。

所以基本上我所做的是读取我的 Wavefront OBJ 文件并解析所有数据。

通常在 OpenGL ES 1.1 中，我在加载数据时会执行以下操作：

```
glBegin(GL_TRIANGLES);
glNormal3f(normals[faces[i].normal[0]].v[0], normals[faces[i].normal[0]].v[1], normals[faces[i].normal[0]].v[2]);
glVertex3f(vertices[faces[i].vertex[0]].v[0], vertices[faces[i].vertex[0]].v[1], vertices[faces[i].vertex[0]].v[2]);
glNormal3f(normals[faces[i].normal[1]].v[0], normals[faces[i].normal[1]].v[1], normals[faces[i].normal[1]].v[2]);
glVertex3f(vertices[faces[i].vertex[1]].v[0], vertices[faces[i].vertex[1]].v[1], vertices[faces[i].vertex[1]].v[2]);
glNormal3f(normals[faces[i].normal[2]].v[0], normals[faces[i].normal[2]].v[1], normals[faces[i].normal[2]].v[2]);
glVertex3f(vertices[faces[i].vertex[2]].v[0], vertices[faces[i].vertex[2]].v[1], vertices[faces[i].vertex[2]].v[2]);
glEnd(); 
```

至于 OpenGL ES 2.0，我尝试了以下顶点，但没有任何运气：

```
glBufferData(GL_ARRAY_BUFFER, obj.vertices.size()*sizeof(float), &(obj.vertices[0].v), GL_STATIC_DRAW); 
```

我的数据结构：

```
struct vertex {
    std::vector<float> v;
} 
```

为每个偏离路线的`v`顶点创建向量，其中`{x,y,z}`.

```
class waveObj {
    public:
        std::vector<vertex> vertices;
        std::vector<vertex> texcoords;
        std::vector<vertex> normals;
        std::vector<vertex> parameters;
        std::vector<face> faces;
}

struct face {
    std::vector<int> vertex;
    std::vector<int> texture;
    std::vector<int> normal;
}; 
```

如何像在 2.0 中使用 OpenGL ES 1.1 一样加载我的数据？

甚至可以加载向量（`v`），而不是单独的位置（`float x,y,z`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:19:11.667

有几种选择：

*   为每个数据创建单独的 VBO：一个用于位置，一个用于法线等
*   使用交错数据创建单个 VBO - 但这需要在您的代码中进行一些代码更改。

首先，我建议对一个顶点属性 + 索引缓冲区使用一个缓冲区：

索引缓冲区的一件事：

*   您有 pos、normal、texture 的单独索引（您直接从 OBJ 文件中获取这些值），但如果您使用 IBO（索引缓冲区对象）绘制几何图形，则需要创建**单一**索引。

这是我的一些代码：

```
map<FaceIndex, GLushort, FaceIndexComparator>::iterator 
           cacheIndex = cache.find(fi);

if (cacheIndex != cache.end()) {
    node->mIndices.push_back(cacheIndex->second);   
}
else {
    node->mPositions.push_back(positions[fi.v]);
    node->mNormals.push_back(normals[fi.n]);
    node->mTexCoords.push_back(texCoords[fi.t]);
    node->mIndices.push_back((unsigned int)node->mPositions.size()-1);

    cache[fi] = ((unsigned int)node->mPositions.size()-1);
} 
```

它能做什么：

*   它对每个 pos、nomal 和 tex cood 都有一个向量……但是当 OBJ 文件中有一个“f”标志时，我会检查我的缓存中是否有一个三元组。
*   如果有这样的三元组，我将该索引放入节点的索引中
*   如果不是，我需要创建新索引

# javascript - 我应该使用哪种 jquery ajax 方法？

> ID：10681219
> 
> 赞同：-1
> 
> 时间：2012-05-21T07:42:24.270
> 
> 标签：javascript, jquery, ajax, servlets, post

我想向 servlet 发送一个很长的字符串。可能超过 10,000 个字符。

我想知道哪个 jquery ajax/ 或任何方式将它发送到 servlet。

我使用过 $.post 并遇到字符限制问题。[使用 $.post](https://stackoverflow.com/questions/10634712/using-post-has-character-limits)
[在 jquery 帖子中发送长字符串有字符限制吗？](https://stackoverflow.com/questions/10680630/sending-long-strings-in-jquery-post)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T07:56:11.157

您是否将字符串作为 URL (GET) 的一部分发送，还是将字符串作为 POST 正文的一部分发送？

使用它作为 POST 发送：

```
$.post(url, {longString: veryLongString}, function(){}); 
```

$.post 只是 $.ajax 的别名（使用方法参数预设）=> 您将使用这些方法中的哪一个不会有任何区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T08:51:19.170

如果您在此处有任何疑问：

```
function ajaxTest () {
    var longstr = "qwertyuiopasdfghjklzxcvbnm";

    while (true) {
        longstr += longstr;
        if (longstr.length > 100000) {
            break;
        }
    }

    console.log(longstr.length);

    $.ajax({
        url: '/ajax',
        type: 'post',
        data: longstr,
        processData: false,
        success: function (reply) {
            console.log(reply);
        }
    });
} 
```

我将服务器设置为回复“ok”+收到的帖子数据的长度。第一个控制台日志报告“106496”，第二个控制台日志报告“ok 106496”。

您可以通过 post 发送多少数据 没有*客户端限制（例如，由 jquery 强加）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T07:58:03.620

据我所知，POST 请求没有字符限制。GET 有限制，但我不记得任何关于 POST 操作的内容。

在上述链接中（您参考的链接）：

```
$.post(
"TestServletAsh?xml="+str,
function(data) {
    alert("mission successfull");   //nothing to do with it or data here in this SO question
}
); 
```

将变量“str”作为 get 参数发送。

使用 jquery 将数据发送到 POST 请求的方式是

```
$.post(url, {data:'whatever you want blah blah blah'}, function(data){}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:57:47.770

post没有限制，检查你的js代码，你有一些错误或者使用get方法而不是post

# android - 从 Android 将照片上传到 FB：没有错误，但没有文件上传到 facebook

> ID：10681221
> 
> 赞同：0
> 
> 时间：2012-05-21T07:42:38.030
> 
> 标签：android, facebook

这是将图片上传到我的 facebook 的代码：

```
Bundle parameters = new Bundle();
parameters.putString("message", msg);
byte[] imgData = getImage("http://bandungraos.in/wp-content/resto/1/gallery/kepiting1.jpg");
parameters.putByteArray("picture", imgData);
if (imgData != null) {
    try {
        String response = facebook.request("me/photos", parameters,"POST");
            System.out.println(response);
        } catch (IOException e) {
            e.printStackTrace();
        }
}
.....

private byte[] getImage(String url) {

    try {
        URL imgUrl = new URL(url);
        HttpURLConnection cn = (HttpURLConnection) imgUrl.openConnection();
        cn.setDoInput(true);
        cn.connect();
        int length = cn.getContentLength();
        byte[] imgData = new byte[length];
        InputStream is = cn.getInputStream();
        is.read(imgData);
        return imgData;

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return null;

} 
```

我检查了访问令牌或 imgData 是否不为空

没有错误，但我在我的 facebook 中找不到该图像。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:37:05.827

我有同样的问题，我使用了这段代码`

```
private void upload_FB(Bitmap photo2) {
        // TODO Auto-generated method stub
        Calendar c = Calendar.getInstance();
        String name = c.getTime().toString();

        AsyncFacebookRunner fruner = new AsyncFacebookRunner(facebook);
        Log.d("adr", mCurrentPhotoPath);
        if(photo2!=null && mCurrentPhotoPath!=null){
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            photo2.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            byte[] bMapArray = baos.toByteArray();
            Bundle params = new Bundle();
            params.putByteArray("photo",bMapArray);
            params.putString("caption", name);
            fruner.request("me/photos",params,"POST",new PhotoUploadListener(),null);

        }else
            Toast.makeText(ctx, "ERROR", Toast.LENGTH_LONG).show();
    } 
```

不要忘记添加前提`photo_upload` `

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:42:50.173

根据有关[照片连接的](http://developers.facebook.com/docs/reference/api/user/#photos)[用户对象](http://developers.facebook.com/docs/reference/api/user/)文档，图像参数被命名为*"source"*而不是*"picture"*，您是否尝试过：

 **```
Bundle parameters = new Bundle();
parameters.putString("message", msg);
parameters.putByteArray("source", getImage("...")); 
```**

# iphone - 用 Quartz 2D 绘制中文字体字形？

> ID：10681223
> 
> 赞同：0
> 
> 时间：2012-05-21T07:42:54.660
> 
> 标签：iphone, ios, objective-c, quartz-graphics, glyph

我必须使用以下功能显示汉字：

```
CG_EXTERN void CGContextShowGlyphsAtPoint(CGContextRef context, CGFloat x,
CGFloat y, const CGGlyph glyphs[], size_t count) 
```

但它没有准确显示。我使用的代码如下：

```
CGFontRef cgfont = CGFontCreateWithFontName((CFStringRef)label.font.fontName);
CGContextSetFont(theContext, cgfont);
CGContextSetFontSize(theContext, label.font.pointSize);
CGContextSetTextDrawingMode (theContext, kCGTextClip);

CGGlyph *glyphs = malloc(sizeof(CGGlyph) * [label.text length]);
char *Chars = malloc(sizeof(char) * ([label.text length] + 1));
[label.text getCString:Chars maxLength:([label.text length] + 1) encoding:NSISOLatin2StringEncoding];

for(int currentChar = 0; currentChar < [label.text length]; ++currentChar)
{
    glyphs[currentChar] = Chars[currentChar];
}
CGContextShowGlyphsAtPoint(theContext, 0, (size_t)label.font.ascender, glyphs, [label.text length]); 
```

**编辑**

设备是 iPhone。例如，我想显示像“中文”这样的汉字，但是使用CGContextShowGlyphsAtPoint来绘制字符串会显示像这样“@#Radcx67”。

如何解决这个问题呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:13:47.300

首先，包括这个

```
 #import "CoreText/CTFont.h" 
```

然后请使用以下功能。

```
 void drawStringWithglyphs(CTFontRef iFont, CFStringRef iString, CGContextRef ctx, int x, int y)

{
UniChar *characters;
CGGlyph *glyphs;
//    CGPoint *points;
CFIndex count;

assert(iFont != NULL && iString != NULL);

// Get our string length.
count = CFStringGetLength(iString);

// Allocate our buffers for characters and glyphs.
characters = (UniChar *)malloc(sizeof(UniChar) * count);
assert(characters != NULL);

glyphs = (CGGlyph *)malloc(sizeof(CGGlyph) * count);
assert(glyphs != NULL);

// Get the characters from the string.
CFStringGetCharacters(iString, CFRangeMake(0, count), characters);

CTFontGetGlyphsForCharacters(iFont, characters, glyphs, count);

// Do something with the glyphs here, if a character is unmapped
    CGContextShowGlyphsAtPoint(ctx, x, y, glyphs, count);

// Free our buffers
free(characters);
free(glyphs);
} 
```

# java - 如何将对象从jsp发送到servlet

> ID：10681229
> 
> 赞同：1
> 
> 时间：2012-05-21T07:43:03.763
> 
> 标签：java, jsp, servlets

> **可能的重复：**
> [将对象从 JSP 传递到 Servlet](https://stackoverflow.com/questions/4253660/passing-object-from-jsp-to-servlet)

我有一个从 servlet 成功发送到 jsp 的对象。在那个 jsp 页面中，我有一个按钮，当用户单击该按钮时，应该将同一对象从该 jsp 页面发送到另一个 servlet。我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T07:47:43.827

单击按钮时将其作为请求属性发送 a) 在 jsp 中设置请求属性

```
request.setAttribute("thatobject",thatobject); 
```

在 Servlet 中将其检索为

```
Thatobject obj = (ThatObject) request.getAttribute("thatobject"); 
```

b）在会话中设置对象`session.setAttribute("thatobject",thatobject)` 并将其检索为

```
Thatobject obj = (ThatObject) session.getAttribute("thatobject"); 
```

哦，我的错误更新...

**注意：**我也不提供空检查。我认为你可以处理它

***编辑：***

即使你可以做其他方式，这是非常复杂的方式，

a）创建一个 Bean 类
b）在 bean 类中提供 Object 作为属性，并提供 getter 和 setter 方法
C）在 jsp 中，当页面提交给 servlet 时，使用该 bean 来设置对象
d）从 bean 中检索对象服务

**编辑2：**

请检查此链接有明确的解释。 [JSP2Servlet](http://docs.oracle.com/cd/A97336_01/buslog.102/a83726/basics4.htm#1014142)

***编辑 3***

注意：**如果您正在提交表单，则当您在 servlet 中使用 request.getattribute 时，请求将变为新请求并且对象将变为空。因此，上述方法不适用于 jsp 中的表单提交。**

因此，要克服这个问题，请按照以下链接中提供的说明进行操作

[将对象从 JSP 传递到 Servlet](https://stackoverflow.com/questions/4253660/passing-object-from-jsp-to-servlet)

# java - Vaadin“分析布局（GWT）”解析视图

> ID：10681230
> 
> 赞同：2
> 
> 时间：2012-05-21T07:43:07.217
> 
> 标签：java, gwt, layout, vaadin

有一个 Vaadin 表，其中包含一行面板和另一个表（Debug 窗口在界面中报告没有错误）：

桌子道具：

```
table.setPageLength(0); 
```

将行添加到子表后：

![在此处输入图像描述](../Images/f5fc1666ef046d03f1a47592424954b9.png)

但是当我在 Debug 窗口中按下“Analyze Layout”按钮时，界面看起来像这样（问题已解决）：

![在此处输入图像描述](../Images/8d245b5205b388003d57a6792df3064e.png)

我可以在需要时调用服务器上的“分析布局”吗？

# jquery - 使用 $.post() 的 jquery 按钮

> ID：10681232
> 
> 赞同：0
> 
> 时间：2012-05-21T07:43:13.553
> 
> 标签：jquery, button, .post

我正在尝试使用 jquery 为我的网站创建投票赞成、反对票按钮。我所做的是创建一个表单并使用 $.post() 在外部 php 脚本中对其进行处理。我认为这将允许在后端安静地处理表单，但是当我单击按钮时，jquery 函数似乎不起作用，它只是在前端加载整个脚本。

感谢是否有人可以在这里提供一些帮助。谢谢。以下是我的脚本。

主 PHP 脚本

```
<div class="voting_class">

<?php
    $user =& JFactory::getUser();
    $ip = getenv('REMOTE_ADDR');
    if($user->id == 185){
?>

<form method="post" action="../vote_plus.php">
    <div class="form_element">
        <label>user_id</label>
        <input type="text" name="user_id" class="votetext" value="<?php echo $user->id;?>" />
    </div>
    <div class="element">
        <label>ad_id</label>
        <input type="text" name="ad_id" class="votetext" value="<?php echo $this->content->id;?>"/>
    </div>
    <div class="element">
        <label>ip_address</label>
        <input type="text" name="ip_address" class="votetext" value="<?php echo $ip;?>"/>
    </div>
    <div class="submit_element">
        <input type="submit" class="button" id="submitadd" value="Recommend"/>
        <div class="loading"></div>
    </div>
    <div class="submit_element">
        <input type="submit" class="button" id="submitminus" value="Don't Recommend" />
        <div class="loading"></div>
    </div>
</form>
<p class="success_msg" style="display:none"></p>

<?php }?>

</div> 
```

JAVASCRIPT脚本

```
<script type = "text/javascript">
$(document).ready(function() {

    $('#submitadd').click(function(event) {       

    //Get the data from all the fields
    var user_id = $('input[name=user_id]');
    var ad_id = $('input[name=ad_id]');
    var ip_address = $('input[name=ip_address]');

    $.post('../vote_plus.php', { user: "user_id.val()", ad: "ad_id.val()", ip: "ip_address.val()" }, function () {
            $('.success_msg').append("Vote Successfully Recorded").fadeIn();
        });
        event.preventDefault();
    }); 
});
    //if submit button is clicked
    $('#submitminus').click(function(event) {       

    //Get the data from all the fields
    var user_id = $('input[name=user_id]');
    var ad_id = $('input[name=ad_id]');
    var ip_address = $('input[name=ip_address]');

    $.post('../vote_minus.php', { user: "user_id.val()", ad: "ad_id.val()", ip: "ip_address.val()" }, function () {
            $('.success_msg').append("Vote Successfully Recorded").fadeIn();
        });
        event.preventDefault();
    });

});
</script> 
```

我不会发布外部脚本，因为我认为问题不在于外部 php 脚本，因为可以正确加载所有 mySQL 更新，并且可以正确显示任何信息。我的问题在于我无法让按钮在 jquery 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:46:56.317

你的线

```
$.post('../vote_plus.php', { user: "user_id.val()", ad: "ad_id.val()", ip: "ip_address.val()" }, function(){ 
```

应该

```
$.post('../vote_plus.php', { user: user_id.val(), ad: ad_id.val(), ip: ip_address.val() }, function(){ 
```

* * *

这是您的代码的简化版本。

```
$(function () {
  $('#submitadd').click(function (event) {       
    $.post(
      '../vote_plus.php', { 
        user: $('input[name=user_id]').val(), 
        ad:   $('input[name=ad_id]').val(),
        ip:   $('input[name=ip_address]').val() 
      }, function () {
        $('.success_msg').append("Vote Successfully Recorded").fadeOut();
      }
    );
    event.preventDefault();
  });
}); 
```

一般提示：

*   它不是 jQuery 脚本，而是 JavaScript。
*   不要使用说明显而易见的注释，例如`//if submit button is clicked`. 他们没有增加任何价值。
*   使用正确、*一致*的缩进。
*   使用`event.preventDefault();`代替`return false;`
*   您可以在 jQuery 中链接操作，例如`.append()`和`.fadeOut()`. 无需为此创建两行代码。
*   `$(document).ready()`可以安全地替换为`$()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:51:29.770

改用这个：

```
<script type = "text/javascript">
    $(document).ready(function() {

        //if submit button is clicked
        $('#submitadd').click(function() {       

            //Get the data from all the fields
            var user_id = $('input[name=user_id]').val();
            var ad_id = $('input[name=ad_id]').val();
            var ip_address = $('input[name=ip_address]').val();

            $.post('../vote_plus.php', { user : user_id, ad : ad_id, ip : ip_address }, function(){
            $('.success_msg').append("Vote Successfully Recorded");
                $('.success_msg').fadeOut();
        });        
            return false;
         });
    });     
    </script> 
```

# java - 如何使用我的自定义 TextView 投射 TextView？

> ID：10681235
> 
> 赞同：3
> 
> 时间：2012-05-21T07:43:19.473
> 
> 标签：java, android

我从这里获取文本视图实例：

```
 TextView date = null;

        try {
            date = (TextView) getLayoutInflater().inflate(
                    R.layout.some_textview, null);
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();

        } 
```

我创建了我的自定义文本视图：

```
public class MyTextView extends TextView{

    public MyTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MyTextView(Context context) {
        super(context);
    }

} 
```

现在我想投那些：

```
MyTextView my = (MyTextView)date; 
```

我得到这个例外：

```
 java.lang.ClassCastException: android.widget.TextView cannot be cast to com.myapp.name.MyTextView 
```

那么应该怎么做呢？

谢谢。

***编辑：***

如果我声明`date`为`MyTextView`，仍然得到相同的异常，那是我的 some_textview 的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is a template for date text view"  
        /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T07:50:53.323

您的 XML 布局 `R.layout.some_textview`资源是否正确？

不要使用

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ...
    /> 
```

您必须在 XML 中使用您的自定义类：

```
<com.your.package.MyTextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ...
    /> 
```

类路径正确非常重要！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T07:50:08.637

您可以直接在 XML 中使用您的 MyTextView，而不是`<TextView />`使用`<com.myapp.name.MyTextView />`

然后在您的代码中使用 com.myapp.name.MyTextView 而不是 TextView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:46:25.760

你应该声明`date`为`MyTextView`. 您尝试将 TextView 对象强制转换为 TextView 的子类，但该对象不是子类类型的实例（[参见示例](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassCastException.html)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:47:06.180

尝试在这里使用：

```
 MyTextView date = null;

    try {
        date = (MyTextView) getLayoutInflater().inflate(
                R.layout.some_textview, null);
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();

    } 
```

# php - 如何检测最后有附加文本的 URL？

> ID：10681238
> 
> 赞同：0
> 
> 时间：2012-05-21T07:43:36.743
> 
> 标签：php

我目前正在设计一个使用这个的网站：`<li class="current">`.

我有一个脚本来检测它何时在所述页面上输出正确的类，但是，当在 gallery.php?dir=thedir 页面上时，它无法输出类！

这是我到目前为止所拥有的，这是行不通的......

```
$ispage = preg_match_all('gallery.php/\[(.+?)\]/s'); 
```

我会很感激有人能给我的任何信息:)。

完整代码：

```
<?php 
$ispage = preg_match_all('gallery.php/\[(.+?)\]/s'); 
$currentpage = $_SERVER['REQUEST_URI']; 
if ($ispage==$currentpage) { 
    echo '<li class="current">'; 
} else { 
    echo '<li>'; 
} 
?><a href="gallery.php">Photos</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:50:35.887

您不能将 $_SERVER['SCRIPT_NAME'] 或 $_SERVER['PHP_SELF'] 或 $_SERVER['REQUEST_URI'] 与 php 函数 strpos($haystack, $findme) 一起使用吗？它应该让你的生活变得轻松。

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:47:23.200

如果我理解您的问题，您正在尝试访问查询字符串值

尝试 `echo $_GET['dir'];`

编辑试过这个吗？

```
$ispage = '/'.basename($_SERVER['PHP_SELF']).'?'.($_SERVER['QUERY_STRING']);
$curepage = $_SERVER['REQUEST_URI']; 
```

我认为您需要定义一系列链接来解决您的问题

以便

```
$curpage = $_SERVER['REQUEST_URI'];

$links = array('/gallery.php?dir=thedir', '/home.php?dir=anotherdir');

foreach($links as $link) {
   $class = '';

   if($link == $curpage) {
     $class = 'class="current"';

     echo '<li '.$class.'>';
     .... rest of the code .... 
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:53:10.157

似乎`$_SERVER['PHP_SELF']`是您需要的，它返回相对文件名，没有参数。看看这里：[http ://www.php.net/manual/en/reserved.variables.server.php](http://www.php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:59:16.527

我很确定 preg_match_all 返回一个 int。如果这是完整的代码，它将根本无法工作。是的，使用类似`$_SERVER['PHP_SELF']`. 此外，您应该考虑使用一些更好的 url 来避免这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T08:04:59.220

```
 <?php

$currentpage = $_SERVER['REQUEST_URI'];; 
preg_match('/[^.]+\.[^.]+$/', $currentpage, $matches);
if ($matches[0] == "/gallery.php?dir=thedir") { 
    echo '<li class="current">'; 
} else { 
    echo '<li>'; 
} 
?><a href="gallery.php">Photos</a></li> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T08:19:27.963

如果 URL 类似于： *www.site.com/page.php ?q=foo*

那么这个

```
$currentpage = basename(__FILE__); 
```

只会给你**page.php**

另外，如果你这样称呼它：

```
$currentpage = basename(__FILE__,".php"); 
```

会给你**页面**

# c++ - C++ 禁止在将结构传递给函数时声明 ... 且没有类型错误

> ID：10681255
> 
> 赞同：1
> 
> 时间：2012-05-21T07:45:13.697
> 
> 标签：c++, list, struct

我无法弄清楚我在这里做错了什么。
我想对列表进行排序并具有比较功能来对其进行排序。
找到了一个代码示例，正是我的问题得到了解决，但它对我不起作用。

我总是收到此错误：
**错误：ISO C++ 禁止声明没有类型的“单元”**

*细胞*不是我的类型吗？

AStarPlanner.h

```
class AStarPlanner {

public:

  AStarPlanner();

  virtual ~AStarPlanner();

protected:

  bool compare(const Cell& first, const Cell& second);

  struct Cell {

        int x_;
        int y_;
        int f_;   // f = g + h
        int g_;   // g = cost so far
        int h_;   // h = predicted extra cost

        Cell(int x, int y, int g, int h) : x_(x), y_(y), g_(g), h_(h) {
                f_ = g_ + h_;
        }
  };

}; 
```

AStarPlanner.cpp

```
 bool AStarPlanner::compare(const Cell& first, const Cell& second)
 {
    if (first.f_ < second.f_)
       return true;
    else
       return false;
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T07:47:31.847

将声明移到`Cell`方法声明之前。

```
class AStarPlanner {
public:
  AStarPlanner();
  virtual ~AStarPlanner();
protected:
  struct Cell {
        int x_;
        int y_;
        int f_;   // f = g + h
        int g_;   // g = cost so far
        int h_;   // h = predicted extra cost
        Cell(int x, int y, int g, int h) : x_(x), y_(y), g_(g), h_(h) {
                f_ = g_ + h_;
        }
  };
  bool compare(const Cell& first, const Cell& second);
}; 
```

此外，从技术上讲，没有`Cell`类型，但是`AStarPlanner::Cell`（但它会在 的上下文中自动解析`class`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T08:02:49.363

关于类声明中名称可见性的 C++ 规则并不明显。例如，即使该成员稍后在类中声明，您也可以拥有引用成员的方法实现......但是如果稍后声明类型，则不能拥有引用嵌套类型的方法声明。

在类的开头移动嵌套类型声明可以解决您的问题。

这种限制没有技术原因（或者说得更好，我看不出它可能是什么，但我从来不敢编写完整的 C++ 解析器）。然而，这就是语言的定义方式。

# c++ - 结构/类位域打包

> ID：10681256
> 
> 赞同：2
> 
> 时间：2012-05-21T07:45:13.770
> 
> 标签：c++, c, bit-manipulation

我想使用 cpp 的位域功能。
但是我得到了各种奇怪的行为，我想知道是否有
办法限制编译器。

我想使用这个位字段：

```
class MyBitField
{
   uint32 a :  8;
   uint32 b : 32;
   uint32 c : 32;
} 
```

现在使用此代码：

```
uint8 rawData[9] = {0x12, 0x34, 0x56, 0x78, 0x9A, 0xBC, 0xDE, 0xFF, 0xFF};
MyBitField \*pMyBitField = (MyBitField\*)rawData; 
```

我期望（在小端 32 位 CPU 上）： pMyBitField 的 a 字段
为 0x12，pMyBitField
的 b 字段为 0x9A785634，pMyBitField
的 a 字段为 0xFFFFDEBC。

编译器选择进行一些无法解释的对齐。
我知道如果您在位字段中使用不同的类型，您可能会得到对齐，但事实并非如此。
我该怎么做？

让我们专注于 Visual Studio 2005，但任何其他 env 支持也将受到祝福。

*我阅读了一些关于包装的帖子，但它并没有改变对齐问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:11:53.527

我希望您的代码不会编译。 `rawData`有一个数组类型；this 隐式转换为指针，但不能隐式或显式转换为类类型。

其余的，编译器如何布置位字段是实现定义的，但在你的情况下，我希望它是无关紧要的；在 32 位机器上，32 位位域通常会强制编译器使用下一个字，因此只有第一个位域有任何影响。根据编译器的不同，它会导致编译器将值放在高 8 位或低 8 位（并保留字的其余部分未定义）。

如果您需要匹配外部格式，唯一可靠的方法是逐字节插入该字节所需的任何值。

# java - 错误：获取图像时未捕获的错误：java.lang.NullPointerException

> ID：10681257
> 
> 赞同：0
> 
> 时间：2012-05-21T07:45:21.743
> 
> 标签：java, image, swing

图片路径都是正确的，我不知道为什么会出现这个错误。有人知道吗？

代码用于将背景图像放在框架中并在该图像上添加按钮

错误是

```
Uncaught error fetching image:
    java.lang.NullPointerException
        at sun.awt.image.URLImageSource.getConnection(URLImageSource.java:99)
        at sun.awt.image.URLImageSource.getDecoder(URLImageSource.java:113)
        at sun.awt.image.InputStreamImageSource.doFetch(InputStreamImageSource.java:240)
        at sun.awt.image.ImageFetcher.fetchloop(ImageFetcher.java:172)
        at sun.awt.image.ImageFetcher.run(ImageFetcher.java:136) 
```

## 代码

运行代码时出现错误：

```
 public class BackgroundImg extends JPanel {

            private Image img;

          public BackgroundImg (String img)
          {
              this(new ImageIcon(img).getImage());
          }

          public BackgroundImg (Image img)
          {
            this.img = img;
            Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));
            setPreferredSize(size);
            setMinimumSize(size);
            setMaximumSize(size);
            setSize(size);
            //setLayout(null);
          }

            @Override
          public void paintComponent(Graphics g)
            {
                super.paintComponent(g);
            g.drawImage(img, 0, 0, null);
          }
        }

        public class ApplicationFrame {

        public static void main(String[] args) throws ImageAccessException {
        BackgroundImg panel = new BackgroundImg(Toolkit.getDefaultToolkit().createImage(ApplicationFrame.class.getResource("C:\\test.png")));
    JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(800, 600);

                frame.getContentPane().add(panel);
                ApplicationContents.addContentsToPane(panel);

                frame.setVisible(true);
                //   frame.setVisible(true);

            }

        }

    }
public class ApplicationContents {
    public static void addContentsToPane(Container pane)
    {
        //pane.setLayout(null);
        pane.setLayout(new FlowLayout());

        JButton b1 = new JButton("Test");

        pane.add(b1);

        //Insets insets = pane.getInsets();
        //Dimension size = new Dimension(120,32);

        // b1.setBounds(0 + insets.left, 0 + insets.top,
         //            size.width, size.height);

         b1.addActionListener(
                 new ActionListener()
         {
             public void actionPerformed(ActionEvent event)
            {

                 JOptionPane.showMessageDialog(null, "Test" , "Test", JOptionPane.ERROR_MESSAGE);
            }
         }
         );
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:05:47.523

getResource() 从类路径加载资源，而不是操作系统路径，因此即使“C:\test.png”是正确的，您也无法以这种方式加载它。

另外，请在使用前检查 getResource() 的返回值，以便您发现此类错误。

您可能希望将图像捆绑为 jar 中的资源，并使用指定 jar 中位置的路径加载它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T08:23:23.903

您必须使用**Toolkit.getDefaultToolkit().createImage("c:\\tmp\\test.png");** 要从静态文件夹中获取图像，或者如果要将图像包含在 jar 中，请将图像路径设置为相对于 .class 文件。

# yii - 为 carraydataprovider yii 使用过滤器

> ID：10681258
> 
> 赞同：1
> 
> 时间：2012-05-21T07:45:22.173
> 
> 标签：yii

我在 Yii 中为 CGridView 使用 CArrayDataProvider，我无法使用过滤器。

谁能告诉我如何使用过滤器。我没有特定的模型，我正在从不同的表中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:18:00.557

`CArrayDataProvider`没有过滤器属性（as `CActiveDataProvider`），您需要自己实现此功能。如果您从不同的表中获取数据，您仍然可以使用`ActiveRecord`相关模型`CActiveDataProvider`并按[相关模型进行过滤的事件](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:33:17.997

看看这个页面以获得一个很好的工作示例（评论 5501）：[http](http://www.yiiframework.com/wiki/232/using-filters-with-cgridview-and-carraydataprovider/#c5501) ://www.yiiframework.com/wiki/232/using-filters-with-cgridview-and-carraydataprovider/#c5501 我正在使用这个我的应用之一

# c# - IDisposable 的使用

> ID：10681263
> 
> 赞同：0
> 
> 时间：2012-05-21T07:45:34.083
> 
> 标签：c#, memory-management, dispose

`List<Pupil>`每次瞳孔对象引发事件完成时，我都有一个。那个学生将被从 中删除`List<Pupil>`。瞳孔对象实现了一个`IDisposable`接口。

结束活动。

```
 private void pupil_Finish(Pupilsender)
    {
        lock (this.pupilList)
        {
            if (this.pupilList.Contains(sender))
            {
                this.pupilList.Remove(sender);

                sender.Dispose();
            }
        }
    } 
```

那么，调用该方法后`this.pupilList.Remove(sender)`，我应该使用`sender.Dispose`吗？我想保存我的应用程序内存的那些操作的目的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:02:01.910

Disposables 实际上并不是为了节省内存，而是为了显式释放非托管资源。对象的堆内存仅由 GC 释放。因此调用`Dispose`不会删除堆上的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:51:25.580

如果发件人瞳孔未在其他任何地方引用，则应调用 Dispose。否则不行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T17:53:52.630

正常的模式是`Pupil`使用它的`Dispose`过程来取消订阅它已经订阅的任何事件，并可能引发一个`Disposed`事件，通知其他对象他们应该照顾`IDisposable`他们借给`Pupil`自己使用的任何对象。如果`Finish`应该表现为`Disposed`事件，则无需调用`sender.Dispose`，因为首先引发事件的全部原因`sender`是已经被处置。话虽如此，`Finish`事件处理程序可能应该取消它的订阅，它目前没有。

# php - 如何编写我的 PHP 代码以在 SWIG 中使用指针和引用？

> ID：10681267
> 
> 赞同：0
> 
> 时间：2012-05-21T07:45:46.860
> 
> 标签：php, c++, swig

我正在使用 SWIG 包装我的 C++ 源代码，但我的代码有指针和引用。如何编写我的 PHP 代码来使用这些函数？我的 C++ 类如下：

```
Bitmap : public Image
{
public:
    void fillColor(const unsigned int *color);
}; 
```

如何调用`fillColor()`我的 PHP 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:17:29.240

我想这就是你要找的东西：[http ://www.swig.org/Doc1.3/Php.html#Php_nn2_5](http://www.swig.org/Doc1.3/Php.html#Php_nn2_5)

您有 3 个选项 - 我认为最自然的方法是将“phppointers.i”简单地包含到您的 .swg 或 .i swig 文件中并调用您的 vars REF。
然后你可以像在 C++ 中一样在 PHP 中使用它们，但是它们被称为引用而不是指针（只需在变量的 $ 之前写一个 & 符号）。

# android - 如何使用 Android 的 Gallery 视图实现拉取刷新

> ID：10681271
> 
> 赞同：0
> 
> 时间：2012-05-21T07:46:07.553
> 
> 标签：android, page-refresh, galleryview

我想用Android的Gallery视图实现pull to refresh事件，比如IOS应用程序名称“500px”怎么做，或者我应该使用Horizo​​ntalScrollView而不是Gallery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:46:55.830

**更新**

Chris Banes[下拉刷新库](https://github.com/chrisbanes/Android-PullToRefresh)现在实现了*水平*下拉刷新。

**结束更新**

我不知道 github 或任何 googleable 上可用的水平下拉刷新组件。

要创建您自己的组件，请查看这些下拉刷新组件及其源代码作为起点。在实施任何事情之前检查他们的许可证：

由[Johan Nilsson](https://github.com/johannilsson)[为 Android 拉动刷新](https://github.com/johannilsson/android-pulltorefresh)。该组件直接扩展了 ListView，如果您以前使用过 Android 的 ListView，这使得源代码很容易理解。

[Chris Banes](https://github.com/chrisbanes)的[Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)。它包括许多功能，包括上拉到变老和双上拉下拉状态。恕我直言，如果您只想实现下拉刷新，这可能不是正确的起点，因为它非常全面，但如果您想构建功能非常丰富的东西，这可能会很有趣。

# php - 如何接收数据库中的最后一行ID？

> ID：10681276
> 
> 赞同：0
> 
> 时间：2012-05-21T07:46:14.730
> 
> 标签：php, mysql

如何在不生成新行或更新行的情况下接收数据库中的最后一行 ID。

只是为了阅读最后一个ID？

我有这个功能`mysql_insert_id`并且需要这样的东西，但没有生成新行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T07:47:25.150

```
SELECT MAX(id) AS latest_id
FROM table_name 
```

如果您希望在不插入行的情况下使用即将到来的（但尚不存在的）id，[请参阅我以前的答案](https://stackoverflow.com/questions/10409424/mysql-how-to-output-the-auto-increment-counter-value/10409454#10409454)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:49:03.013

您需要使用`max()`类似的功能

```
select max(yourcol) from yourtable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:50:04.987

您可以为此尝试很多查询：-

```
 select * from TABLE_NAME order by ID desc limit 1; 
```

“或者”

```
SELECT * 
FROM    TABLE
WHERE   ID = (SELECT MAX(ID)  FROM TABLE); 
```

# solr - Solr的语言词干需要解释

> ID：10681281
> 
> 赞同：0
> 
> 时间：2012-05-21T07:46:46.227
> 
> 标签：solr, arabic, stemming

我正在使用带有 Solr 的 nutch 来开发阿拉伯语文本的搜索引擎。我需要在我的阿拉伯语文本上实现一个词干分析器，在 Solr Stemmer 上进行搜索时，我发现它提供了这两个过滤器

`<filter class="solr.ArabicNormalizationFilterFactory"/>`

`<filter class="solr.ArabicStemFilterFactory"/>`

我试过了，但不明白他们做了什么..所以请任何人都可以帮我举一些例子吗？

并做到这两个做到这一点：

العملات 词根为 عملة

البسَاتِين ، بساتينكم 词根为 بستان

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T00:00:43.470

你可以在这里找到一些细节：http: [//lucene.apache.org/core/3_6_0/api/contrib-analyzers/org/apache/lucene/analysis/ar/ArabicStemmer.html](http://lucene.apache.org/core/3_6_0/api/contrib-analyzers/org/apache/lucene/analysis/ar/ArabicStemmer.html)

说的是：

词干定义为：

*   删除附加的定冠词、连词和介词。
*   常见后缀的词干。

# netbeans - 将简单的 JFreeChart 图表添加到 JPanel (netbeans gui)

> ID：10681283
> 
> 赞同：0
> 
> 时间：2012-05-21T07:46:51.497
> 
> 标签：netbeans, jpanel, jfreechart

我对 Java 还很陌生，我一直在尝试将 JFreeChart 放在 JPanel 中。我已经完成了教程练习，您可以在其中生成一个简单的图表（带有自己的应用程序窗口）：

`TimeSeriesChartDemo1`

[![在此处输入图像描述](../Images/6dbfec3049256d7d2816a10eee1fade9.png)](https://i.stack.imgur.com/r2lEh.png)

但是，我正在开展一个更大的小组项目，该项目要求我将图表放在 JPanel 而不是它自己的窗口中。问题是我不知道如何从这里移动，我也没有 NetBeans IDE。

1.  我必须放入什么`initComponents()`来初始化 JPanel？
2.  我还有两个文件`JFreeChartDemo.java`，`NetBeansGUI.java`还是全部都在一个文件中？

如果需要更多信息，请在下方评论。

作为参考，我引用了一个通用`XYPlot`示例：

*   接口：[`TimeSeriesChartDemo1`](https://web.archive.org/web/20170811142345/http://www.jfree.org:80/jfreechart/api/javadoc/org/jfree/chart/demo/TimeSeriesChartDemo1.html)
*   来源：[`TimeSeriesChartDemo1`](https://web.archive.org/web/20170910182855/http://www.jfree.org:80/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/TimeSeriesChartDemo1.html#line.65)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:52:11.220

在您刚刚初始化 JPanel 时（您可以[在此处](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)`initComponents`找到大量信息）。完成此操作后，您应该做的就是将图表添加到. 完成此操作后，只需将其添加到您正在使用的文件中即可。`JPanel``JPanel``JFrame`

所以我假设你有这样的事情：

`public class JFreeChartDemo extends JFrame`

如果你这样做，你应该能够完成大部分工作：

`public class JFreeChartDemo extends JPanel`

这应该允许您重用大部分初始化代码，例如设置面板的大小和位置。但是，您必须从那里删除任何与 JFrame 相关的代码。

最后，您应该保留两个单独的源文件，一个用于图表，一个用于其余的。我假设在`NetBeansGUI`课堂上你正在做其余的 GUI 东西，所以你在你的`initComponent`(in `NetBeansGUI`) 中你也可以拥有：

```
...
JFreeChartDemo jfd = new JFreeChartDemo()...
...
this.getContentPane().add(jfd) 
```

在这种情况下，我还假设`NetBeansGUI`extends `JFrame`。

# forms - 通过表单上传图片

> ID：10681286
> 
> 赞同：0
> 
> 时间：2012-05-21T07:47:09.230
> 
> 标签：forms, file-upload, playframework, image-uploading, playframework-1.x

我应该如何编写控制器类以通过表单上传图像？

我已经创建了这样的表格

```
#{form @index(), enctype:'multipart/form-data'}
    <br/>
    <h4>Image:</h4> <input type="file" name="image" />
    <br/>
    <br/>
    <input type="submit" name="submit" value="Upload Photo" />
#{/form} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:20:11.560

`enctype="multipart/form-data"`需要让 Play 框架处理所有上传。在控制器方面，您只需编写：

```
public static void storeImage(File fileUpload) {
    if (fileUpload == null) {
        //Handle the error case
    }
    //Store the file in a perenial location.
    //For example :
    File storeLocation = new File("/relOrAbsPath"), fileUpload.getName());
    boolean success = fileUpload.renameTo(storeLocation);
    //...
} 
```

默认情况下，Play 将文件存储在临时位置。

您也可以像对其他控制器参数一样使用注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:20:38.017

这里有agoo介绍：[http ://www.lunatech-research.fr/playframework-file-upload-blob](http://www.lunatech-research.fr/playframework-file-upload-blob)

如果您上传多张照片，则会出现一些已知问题。这是对我有用的解决方法：[Playframework 中的多个文件上传](https://stackoverflow.com/questions/7635145/multiple-file-upload-in-playframework)

# android - 相机活动给出空指针异常

> ID：10681290
> 
> 赞同：0
> 
> 时间：2012-05-21T07:47:23.553
> 
> 标签：android, android-camera

在我的相机意图中：

```
fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); 
```

这部分给了我一个空指针异常。谁能解释为什么以及需要改变什么？

```
button_1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE); // create a file to save the image
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

        startActivityForResult(intent, TAKE_PICTURE);
    }
});

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            // Image captured and saved to fileUri specified in the Intent
            Toast.makeText(this, "Image saved to:\n" +
                     data.getData(), Toast.LENGTH_LONG).show();
        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:52:22.690

试试下面的，

```
public class Camera extends Activity 
  {
 private static final int CAMERA_REQUEST = 1888;
 private String selectedImagePath;
 WebView webview;
 String fileName = "capturedImage.jpg";
 private static Uri mCapturedImageURI; 

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    Intent cameraIntent = new Intent(ACTION_IMAGE_CAPTURE); 
    startActivityForResult(cameraIntent, CAMERA_REQUEST);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == CAMERA_REQUEST) 
        { 
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
            Random randomGenerator = new Random();randomGenerator.nextInt();
            String newimagename=randomGenerator.toString()+".jpg";
            File f = new File(Environment.getExternalStorageDirectory()
                                    + File.separator + newimagename);
            try {
                f.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //write the bytes in file

            try {
                fo = new FileOutputStream(f.getAbsoluteFile());
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                fo.write(bytes.toByteArray());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                uri=f.getAbsolutePath(); 
    //this is the url that where you are saved the image
      }

  } 
```

# compiler-construction - 编译 Fortran 代码

> ID：10681295
> 
> 赞同：0
> 
> 时间：2012-05-20T14:58:00.650
> 
> 标签：compiler-construction, fortran, gcc

我正在尝试使用 gcc 和 ubuntu 机器上的 gfortran 包编译 f90 代码。不幸的是，在运行编译器时，我不断收到未定义的参考错误。

我调用编译器如下：

```
gfortran -o gauss Guass1d.f90 linalg.f90 
```

或者，我尝试为 linalg.f90 创建目标文件，然后使用以下内容：

```
gfortran -o guass Guass1d.f90 linalg.mod (tried with linalg.o as well) 
```

这些都不起作用。这些代码来自这里的一本书[https://sites.google.com/site/varga1kalmanbook/computer-codes/part-i/chapter-1/variational-method-shifted-gaussians](https://sites.google.com/site/varga1kalmanbook/computer-codes/part-i/chapter-1/variational-method-shifted-gaussians)（在页面底部）

我确信这只是我如何编译代码的问题，但由于缺乏 fortran 经验，我无法解决。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T08:38:07.517

以下对我有用：

```
 $ gfortran -O2 -c linalg.f90
$ gfortran -O2 gauss_1d_c.f90 linalg.o -o gauss -llapack -lblas 
```

所以原因是 linalg.f90 使用 LAPACK，因此您需要链接到 LAPACK 和 BLAS。

# php - 我无法删除数组中的重复项

> ID：10681296
> 
> 赞同：0
> 
> 时间：2012-05-21T07:47:42.237
> 
> 标签：php, arrays, merge

我有这个：有产品的表，每个产品都有超过 1 种颜色，例如：

1.  玻璃有红色、绿色
2.  球有红色、绿色、黄色

我只想获得一次颜色，但是使用下面的代码，我会收到每种产品的不同数组。array_merge 不会以某种方式将所有数组合并到一个数组中。请帮助我：

1.  将数组合并为一个
2.  删除新数组中的重复颜色。

```
$query='SELECT GROUP_CONCAT(DISTINCT colors SEPARATOR ", ") FROM products WHERE colors!="" GROUP BY colors';

$result=mysql_query($query) or die('Mysql Error:'.mysql_error().'<br /> Query:'.$query);
$num_rows=mysql_num_rows($result);

if($num_rows){
  while ($row = mysql_fetch_array($result, MYSQL_NUM)) {

  $array = array($row[0]);

  $colors = array_merge($array);

  var_dump($colors ); 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:57:07.497

您是否只想要一系列颜色而不考虑产品？尝试这个：

```
SELECT DISTINCT colors FROM products WHERE colors != '' 
```

我在这里猜，但我认为你的颜色列只是一个逗号分隔的颜色列表。这并不是做这种事情的最佳方法，但无论如何......尝试上面的查询，然后在 php

```
$result=mysql_query($query) or die('Mysql Error:'.mysql_error().'<br /> Query:'.$query);
$num_rows=mysql_num_rows($result);

if($num_rows){
$colors = array();
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {

    $array = explode(',' $row[0]);  // your row is just a string, explode it to get an array
    $colors = array_merge($colors, $array); // merge that into the colors array
}

$colors = array_map('trim', $colors); // in case there was any whitespace in your color strings
$colors = array_filter($colors); // remove any empties
$colors = array_unique($colors); // strip out the dupes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:55:00.063

不要 CONCAT 颜色，而是重写 SQL，以便为每种颜色获取一行。将它们全部添加到一个数组中，然后运行`array_filter()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:57:57.410

```
$query='SELECT DISTINCT colors FROM products WHERE colors !=""';
$result=mysql_query($query) or die('Mysql Error:'.mysql_error().'<br /> Query:'.$query);
$colors = array();
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    $colors[] = $row[0]; 
}
var_dump($colors); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:58:49.407

如果我正确理解了您的问题，这意味着您想要由所有项目中的所有颜色组成的单个数组并且该数组必须是唯一的，您应该执行以下操作：您应该声明`$colors`退出 while 循环，然后替换`array_merge`为检查的函数如果提供的颜色在`$colors`数组中，如果没有，则添加到它。代码如下：

```
$query='SELECT GROUP_CONCAT(DISTINCT colors SEPARATOR ", ") FROM products WHERE colors!="" GROUP BY colors';

$result=mysql_query($query) or die('Mysql Error:'.mysql_error().'<br /> Query:'.$query);
$num_rows=mysql_num_rows($result);
$colors=array();
if($num_rows){
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {

$array = array($row[0]);

$colors = array_merge($array);

}
$colors=array_unique($input);
var_dump($colors); 
```

# mysql - 从表中获取某一列的某种前十名列表

> ID：10681297
> 
> 赞同：0
> 
> 时间：2012-05-21T07:47:43.443
> 
> 标签：mysql, sql, statistics

我想从 MySQL 数据库的表中获取某种前十名列表。这是一个例子。假设我有这张桌子：

```
ID  Username    Town
 1  foo         Munich
 2  bar         Kolding
 3  herp        Bordeaux
 4  derp        Bordeaux
 5  test        Cologne
 6  bla         Munich
 7  blob        Bordeaux 
```

现在，我想获取“Town”中最常见的条目，如下所示：

```
Bordeaux  3
Munich    2
Cologne   1
Kolding   1 
```

什么样的查询可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:49:30.323

```
SELECT Town, COUNT(*) AS cnt FROM my_table GROUP BY Town ORDER BY cnt DESC LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:50:20.037

试试这个 -

```
SELECT town,
       count(*)
FROM tablename
GROUP BY town; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:52:09.563

这个怎么样。

```
SELECT Town, Count(1) as TownCount 
FROM myTable 
GROUP BY Town
ORDER BY TownCount DESC; 
```

如果您只想要 10 条记录，请使用

```
SELECT Town, Count(1) as TownCount 
FROM myTable 
GROUP BY Town
ORDER BY TownCount DESC
LIMIT 10; 
```

# css - 你如何设计 VBox 中的间隙？

> ID：10681304
> 
> 赞同：1
> 
> 时间：2012-05-21T07:48:17.220
> 
> 标签：css, actionscript-3, apache-flex, flex3

我想在用作停靠栏的 VBox 中设置垂直间隙的样式。有人知道如何将间隙设置为颜色吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:17:47.220

您可以使用 setStyle 函数来设置您的 VBox 的样式，例如：

```
<mx:Script>
    <![CDATA[
         private function changeHandler():void {
             vBox.setStyle("verticalGap", gap_number);
         }
        ]]>
</mx:Script>

<mx:VBox>
....
</mx:VBox> 
```

gap_number 是一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:51:23.010

你可以对代码做一点虚张声势。创建一个 VBox 并将其填充左、右、上和下设置为 5px，并在该 Vbox 内创建另一个 Vbox。

您可以使用以下代码。

```
<mx:VBox paddingBottom="5" paddingLeft="5" paddingRight="5" paddingTop="5">

    <mx:VBox>

    </mx:VBox>

</mx:VBox> 
```

希望这会对你有所帮助。祝你今天过得愉快...

为了进一步的造型目的，您可以使用以下链接

[http://examples.adobe.com/flex2/consulting/styleexplorer/Flex2StyleExplorer.html](http://examples.adobe.com/flex2/consulting/styleexplorer/Flex2StyleExplorer.html)

# orchardcms - 如何解决果园问题

> ID：10681306
> 
> 赞同：0
> 
> 时间：2012-05-21T07:48:23.713
> 
> 标签：orchardcms

刚刚用 sql se 数据库安装了最新的 orchard 1.4.1 cms。已添加新页面并选中“已添加到主菜单”，但单击菜单项会显示“未找到 HTTP 404 页面”。如何找出问题所在？

**更新**

我找到了原因。该页面的标题为**“媒体”**，固定链接为**“媒体”**，看起来像是果园路线中的一种特殊词。将永久链接更改为**“新帖子”**解决了它开始正常工作的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:39:02.840

首先make suer，您的永久链接是自动创建的，或者您手动编写。然后你应该发布页面。

可能你做得正确，但你只保存了页面，没有发布！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:05:31.353

我找到了原因。该页面的标题为**“媒体”**，固定链接为**“媒体”**，看起来像是果园路线中的一种特殊词。将永久链接更改为**“新帖子”**解决了这个问题，它开始正常工作。

# iphone - 使用模型视图控制器模拟内存警告问题

> ID：10681310
> 
> 赞同：0
> 
> 时间：2012-05-21T07:49:05.443
> 
> 标签：iphone, ios-simulator, didreceivememorywarning

我有一个标签栏应用程序。每个选项卡都包含导航控制器，允许用户从一个视图转换到另一个视图。每个视图都由视图控制器处理，每个视图控制器类都有 -didReceiveMemoryWarning 方法。

问题：当我在任何模型视图控制器中使用 iPhone 模拟器的“硬件 > 模拟内存警告”选项之后，如果我想使用 - 关闭该控制器 -

```
[self dismissModalViewControllerAnimated:YES] 
```

然后，不会为我添加了该模型视图控制器的控制器调用 viewDidLoad 方法，并且应用程序在那里崩溃。任何想法，我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:58:38.333

这可能是因为，在 viewDidLoad 方法中，您没有处理所有释放的对象。在模拟内存警告时，我们必须释放所有可以在 viewDidLoad 中加载的对象。

# java - 在java中从十六进制转换为整数

> ID：10681312
> 
> 赞同：1
> 
> 时间：2012-05-21T07:49:13.960
> 
> 标签：java, hex, int

由于以下代码行，我收到错误消息：

```
int x = color(Integer.parseInt("ffffffde",16)); 
```

我认为这可能是因为它是一个负值

任何想法为什么或如何或如何解决它？

编辑：

抱歉，没有包含实际错误。这里是：

> 线程“动画线程”java.lang.NumberFormatException 中的异常：对于输入字符串：java.lang.NumberFormatException.forInputString(Unknown Source) 处 java.lang.Integer.parseInt(Unknown Source) 处的“ffffffde”

编辑2：

值（“ffffffde”）由以下代码创建：

```
Integer.toHexString(int_val); 
```

编辑3：原来这是一个已知的错误（http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4215269）虽然您可以将整数转换为十六进制字符串，但如果它们是负数，则无法将它们转换回来！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T07:52:40.860

`ffffffde`大于整数最大值

> [Java int 是 32 位有](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)符号类型，范围从 –2,147,483,648 到 2,147,483,647。

```
ffffffde = 4,294,967,262 
```

## 编辑

您曾经`Integer.toHexString(int_val)`将 int 转换为十六进制字符串。从该方法的文档中：

> 将整数参数的字符串表示形式返回为基数为16 的**无符号**整数。

但是`int`是有**符号**类型。

**采用**

```
int value = new BigInteger("ffffffde", 16).intValue(); 
```

将其作为负值取回。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T07:56:16.680

如果您遇到这样的错误，

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "ffffffde"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Integer.parseInt(Integer.java:461)
    at com.TestStatic.main(TestStatic.java:22) 
```

然后，您传递的值存在问题，即**ffffffde**。这不是解析为 int 的有效十六进制值。

请试试这个

```
int x = Integer.parseInt("ffffde",16);
        System.out.println(x); 
```

它应该工作。

对于超过该值的十六进制值，您必须解析为**Long**

```
Long x = Long.parseLong("ffffffde",16);
        System.out.println(x); 
```

这也应该有效

# iphone - 'FirstViewController' 没有可见的@interface 声明选择器'setUIImage'

> ID：10681313
> 
> 赞同：2
> 
> 时间：2012-05-21T07:49:14.737
> 
> 标签：iphone, objective-c, ios, xcode

首先我想说我已经搜索了这个错误的答案，但似乎没有一个答案适合我。

我想做的是将uiimage从一个vc传递到另一个，这是“应该”做的代码。但我收到错误“'FirstViewController' 没有可见的@interface 声明选择器'setUIImage'”

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ImageEdit"])
    {

        FirstViewController *vc = [segue destinationViewController];
        [vc setUIImage:image];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:18:31.397

在destinationViewController 的接口文件中，执行：

```
@property (strong, nonatomic) NSObject *uIImage; 
```

在destinationViewController 的实现文件中，执行：

```
@synthesize uIImage; 
```

高温高压

# xml - 使用 XML Schema 按顺序限制单个属性的使用

> ID：10681315
> 
> 赞同：0
> 
> 时间：2012-05-21T07:49:34.830
> 
> 标签：xml, xsd

假设以下实例文档：

```
<person>
  <name>Maurice Moss</name>
  <addresses>
    <address current="true">441 Wallaby way</address>
    <address>2 Mercer Road</address>
  </addresses>
</person> 
```

使用 XML Schema，是否可以强制在序列中只有一个`<address>`元素的`current`属性设置为“true”。

干杯

注意：我不太清楚如何表达这个问题，所以我希望任何有更好想法的人都可以修复标题或放置相关标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:51:25.497

I think using XSD 1.0 you can enforce that there is only one element with a "current" attribute, as RichardTowers shows, but you cannot allow multiple "current" attributes of which only one may be true.

You can do this of course in XSD 1.1 using assertions:

```
<xs:assert test="count(address[@current='true']) eq 1"/> 
```

(or `count(...) le 1` if that's what was intended).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:21:24.210

至少部分可能使用`<xsd:unique/>`：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="person">
        <xs:complexType>
            <xs:all>
                <xs:element name="name"/>
                <xs:element name="addresses">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="address" maxOccurs="unbounded">
                                <xs:complexType>
                                    <xs:simpleContent>
                                        <xs:extension base="xs:string">
                                            <xs:attribute name="current" type="xs:boolean"/>
                                        </xs:extension>
                                    </xs:simpleContent>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                    </xs:complexType>
                    <!-- HERE -->
                    <xs:unique name="onlyOneCurrentAddress">
                        <xs:selector xpath="address"/>
                        <xs:field xpath="@current"/>
                    </xs:unique>
                    <!-- /HERE -->
                </xs:element>
            </xs:all>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

这将阻止多个`current="true"`属性，但不幸的是也可以阻止多个属性，`current="false"`因此您可能需要对其进行一些调整。

# c - 正常和优化构建之间的正确返回值

> ID：10681324
> 
> 赞同：0
> 
> 时间：2012-05-21T07:50:03.897
> 
> 标签：c, compiler-construction

在[本演示文稿](http://www.slideshare.net/olvemaudal/deep-c)的幻灯片 137-140 中，提到 bar() 甚至可能 foo() 被编译为该示例程序的内联函数，导致在正常构建中打印输出为 42，即使它在技术上应该是垃圾. 您是否碰巧知道优化器启动时为什么输出垃圾如预期？

我已经包含了源代码

```
#include <stdio.h>
void foo(void)
{
    int a;
    printf("%d\n", a);
}
void bar(void)
{
    int a = 42;
}
int main(void)
{
    bar();
    foo();
    return 0;
} 
```

和命令提示符打印输出以供参考。

```
$ cc foo.c && ./a.out
42

$ cc -O foo.c && ./a.out
1606415608 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:02:14.573

只是一个有根据的猜测：

在未优化的情况下，编译器为 bar() 中的 a 变量保留一个空间并将其初始化为 42。然后，当调用 foo() 时，它为未初始化的 a 使用相同的空间并打印出 42。

当它被优化时， bar() 中的 a 的初始化被优化掉了，因为它没有被使用。可能甚至消除了对 bar() 的调用。因此，正如预期的那样， foo() 打印出垃圾，即当时该内存插槽（或寄存器）中发生的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:53:08.037

`a`在第一个函数中未初始化，这意味着您不能期望它具有任何特定值。所以编译器的行为在这两种情况下都是正确的（你得到 42 没有优化只是一个巧合）。

# c# - IDataErrorInfo 接口如何提供验证值

> ID：10681330
> 
> 赞同：0
> 
> 时间：2012-05-21T07:50:27.270
> 
> 标签：c#, wpf, xaml, mvvm

我想在同一个元素上触发多个验证。我找到了代码，但我不明白在哪种情况下会触发验证。xml代码如下：

```
<ComboBox 
            x:Name="CreditedParty"
            Style="{StaticResource FormControlStyle}"
            Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2"
            ItemsSource="{Binding CreditedParties}"
            SelectedItem="{Binding Amount, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"
            DisplayMemberPath="Name"/>
        <ContentPresenter 
            Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2"
            Content="{Binding ElementName=CreditedParty, Path=(Validation.Errors).CurrentItem}"/> 
```

vtewmodel.cs 文件的代码如下：

```
 public string Error
    {
        get { return (_debitNote as IDataErrorInfo).Error; }
    }

    public string this[string columnName]
    {
        get
        {
            string error = null;

            if (columnName == "Amount")
            {
                decimal amount;

                error = ValidateAmount(out amount);
                if (!string.IsNullOrEmpty(error)) return error;

                _debitNote.Amount = amount;
                error = (_debitNote as IDataErrorInfo)["Amount"];
            }
            else if (columnName == "CreditedParty")
            {
                error = ValidateCreditedParty();
                if (!string.IsNullOrEmpty(error)) return error;
                error = (_debitNote as IDataErrorInfo)["CreditedParty"];
            }
            else if (columnName == "DebitedParty")
            {
                error = ValidateDebitedParty();
                if (!string.IsNullOrEmpty(error)) return error;
                error = (_debitNote as IDataErrorInfo)["DebitedParty"];
            }
            else
            {
                error = (_debitNote as IDataErrorInfo)[columnName];
            }

            CommandManager.InvalidateRequerySuggested();

            return error;
        }
    }

    private string ValidateAmount(out decimal amount)
    {
        amount = -1;
        string error = null;

        if (string.IsNullOrEmpty(_amountString))
            error = Strings.JournalViewModel_Amount_Missing;
        else if (!decimal.TryParse(_amountString, out amount))
            error = Strings.JournalViewModel_Amount_NaN;

        return error;
    }

    private string ValidateCreditedParty()
    {
        string error = null;

        if (_debitNote.CreditedParty == _blankCreditedParty)
            error = Strings.JournalViewModel_CreditedParty_NotSpecified;

        return error;
    }

    private string ValidateDebitedParty()
    {
        string error = null;

        if (_debitNote.DebitedParty == _blankDebitedParty)
            error = Strings.JournalViewModel_DebitedParty_NotSpecified;

        return error;
    }

    #endregion 
```

此代码如何触发多个验证？谁能回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:54:26.803

触发[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件以触发验证。

# xcode4.3 - 在调用 segue ViewDidLoad 但未调用 ViewWillAppear 和 ViewDidAppear 之后

> ID：10681337
> 
> 赞同：1
> 
> 时间：2012-05-21T07:50:55.387
> 
> 标签：xcode4.3, segue, viewdidappear

我在故事板中创建了一个名为“CreateGame”的 segue。并用我的 viewController 调用它来加载 CreateGameViewController，`[self performSegueWithIdentifier:@"CreateGame" sender:nil]` 但它不起作用。它在一段时间前工作，但突然它不工作了。

我查看了我的代码。我的

`-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{ NSLog(@"Segue"); }`

每次我调用时都在执行`[self performSegueWithIdentifier:@"CreateGame" sender:nil]`，然后执行 CreateGameViewController `"viewDidLoad"` （符合使用 NSLog(); 语句）。`ViewWillApper`但是没有调用CreateGameViewController 。

我正在使用 NavigationController 所以 segue 的类型是“推送”。有时segue有效，有时无效。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T19:33:57.333

你正在做一些事情`CreateGameViewController's "viewDidLoad"`（可能是一些循环或一些没有结束的递归函数调用）。那将阻止屏幕出现。如果你能提供代码会更有帮助`CreateGameViewController's "viewDidLoad"`

# xml - ehcache 不工作

> ID：10681339
> 
> 赞同：2
> 
> 时间：2012-05-21T07:51:20.730
> 
> 标签：xml, spring-mvc, ehcache

嗨，我正在我的应用程序中实现基于注释的 ehcache。我在服务层上实现了这个，我使用 DetachedCriteria 进行查询，但是 ehcache 不起作用。有人对此有任何想法吗？请帮助我或建议我其他方式来做到这一点。提前致谢

在 ehcache.xml 中

```
 <defaultCache eternal="true" maxElementsInMemory="100" overflowToDisk="false" />

    <cache name="loadAll" maxElementsInMemory="1000" eternal="true" overflowToDisk="false" />

</ehcache> 
```

在我正在使用的服务层上

```
@Cacheable(cacheName="loadAll")
    List<ShiftDetail> loadAll(DetachedCriteria detachedCriteria); 
```

并且在 applicationContext.xml ehcache 被映射为

```
<ehcache:annotation-driven  create-missing-caches="true" cache-manager="cacheManager" />

<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" >
            <property name="configLocation"  value="/WEB-INF/ehcache.xml"/>
    </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:02:16.697

我希望你已经完成了以下步骤。
1\. 您需要一个配置正确的**ehcache.xml**文件。可以在[这里](http://ehcache.org/ehcache.xml)
找到示例 2.在您的 springapplicationcontext.xml 中查看您是否在 beans 标签中添加了正确的**xsd 。**
示例正确配置如下所示：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:cache="http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring"
xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
     http://www.springframework.org/schema/context 
     http://www.springframework.org/schema/context/spring-context-3.2.xsd
     http://www.springframework.org/schema/tx
     http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
     http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
     http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring 
     http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.2.xsd
     ">
<cache:annotation-driven />
    <bean id="cacheManager"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
        <property name="configLocation" value="/WEB-INF/xml/spring/ehcache.xml" /> 
    </bean>

</beans> 
```

现在在你的方法中`@Cacheable`使用`import com.googlecode.ehcache.annotations.Cacheable;`

这是来自我的应用程序，它应该可以工作。

# silverlight - Silverlight - MVVM：绑定到填充有“ChildViewModel”的 ICollectionView 的 Datagrid 不会刷新数据

> ID：10681350
> 
> 赞同：0
> 
> 时间：2012-05-21T07:52:14.260
> 
> 标签：silverlight, mvvm, icollectionview

我还没有找到类似的案例，所以我一直在努力。我是 Silverlight 的新手，并且为 ICollectionView 的刷新而苦苦挣扎。刷新方法实际上不会刷新我的数据网格中的数据，尽管它们已更改（在调试器中查看它，在对数据网格进行几次排序后，它最终会反映更改）。恐怕我完全搞砸了我的应用程序的整个结构。我认为这个问题与我实现的“MainViewModel-ChildViewModel”原理有关。

这是我的构造：在我的主页中，我添加了一个“主视图模型”作为资源。

```
<UserControl.Resources>
        <vm:WorkingBasketViewModel x:Key="VMMain"/>
</UserControl.Resources> 
```

然后 Grid LayoutRoot 将它的 datacontext 设置为此视图模型：

```
<Grid x:Name="LayoutRoot" DataContext="{StaticResource VMMain}" Margin="20">
........// all the content
</Grid> 
```

在“主视图模型”中，我定义了一个 ObservableCollection，它保存将以 CollectionViewSource 形式显示在数据网格中的数据。ObservableCollection 项目基于代表实际数据的“ChildViewModel”，它是每个数据行的逻辑。意思是：添加到 ObservableCollection 的每个项目都是“ChildViewModel”的类型。我这样设计它是因为我将显示几个“详细信息页面”（基于选择的功能或双击单元格），然后允许查看、修改和处理另一个用户控件中的数据。不允许在数据网格中直接修改。这样，我只需要将 childviewmodel 传递到下一页（或用户控件），然后传递数据及其逻辑。

```
private readonly ObservableCollection<childViewModel> _requestList = new ObservableCollection<childViewModel>(); // saves list of "childviewmodel-items"
private readonly ICollectionView _requestCollectionView; // ICollectionView for _requestlist-Collection.

// In the contstructor of the "Main Viewmodel"
var cvs = new CollectionViewSource {Source = _requestList};
                    cvs.SortDescriptions.Add(new SortDescription("RPI_Priority", ListSortDirection.Ascending));
                    cvs.SortDescriptions.Add(new SortDescription("REQ_TestingDate", ListSortDirection.Ascending));
                    _requestCollectionView = cvs.View; 
LoadData(); // db-fetch (entity framework)

/// <summary>
/// Binding to DataGrid!
/// </summary>
public ICollectionView Requests //-> BINDING TO DATAGRID!
{
    get
        {
            return _requestCollectionView;
        }
} 
```

在 db-fetch 的 Completed 事件处理程序中，使用 childviewmodel 填充 observablecollection

```
private void requests_requestLoadingComplete(object sender, EntityResultsArgs<REQ_Request> e)
{
    if (!e.HasError)
    {

       //Fire Event on UI Thread
       Application.Current.RootVisual.Dispatcher.BeginInvoke(() =>
       {
            var o = e.Results.OrderBy(r => r.REQ_TestingDate);
            //clear request list
            _requestList.Clear();
            // add requests to collectionview
            foreach (REQ_Request r in o)
            {
                   // for each record generate a Childviewmodel entry and add it to the observable collection
                   _requestList.Add(new childviewmodel(r));
            }

        });
       }
       else
       {
           // notify if there is any error
           reportError(this,new ResultsArgs(e.Error));
       }

RaiseVMStateChanged();
} 
```

我在主页上还有一个绑定到此 ICollectionView 的数据网格。itemsource 是“ChildViewModel”列表。它的属性是绑定的：

```
<sdk:DataGrid AutoGenerateColumns="False" Grid.Row="1" ItemsSource="{Binding Path=Requests}" SelectionMode="Single">
    <sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn Header="ID" Binding="{Binding REQ_ID}" Width="40" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Applikationsname" Binding="{Binding REQ_ApplicationName}" Width="250" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Typ" Binding="{Binding RET_Type}"  Width="70" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Prio" Binding="{Binding RPI_Priority}" Width="70" IsReadOnly="true" />
        <sdk:DataGridTextColumn Header="Status" Binding="{Binding RST_Status}" Width="70" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Sprache" Binding="{Binding SWL_Language}" Width="70" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Version" Binding="{Binding REQ_Version}" Width="70" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Betriebssystem" Binding="{Binding SOS_OS}" Width="150" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="DA" Binding="{Binding Dienstabteilungen}" Width="150" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="AV" Binding="{Binding AV_Fullname}"  Width="150" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Paketierer" Binding="{Binding Paketierer_Fullname}"  Width="150" IsReadOnly="true"/>
        <sdk:DataGridTextColumn Header="Paketierer QS" Binding="{Binding PaketiererQS_Fullname}" Width="150" IsReadOnly="true" />
        <sdk:DataGridTextColumn Header="Abnahmetermin" Binding="{Binding REQ_TestingDate}" Width="150" IsReadOnly="true" />
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

现在所有这些工作都很好而且很顺利。单击功能按钮时，我打开另一个用“Childviewmodel”实例或继承它初始化的用户控件。（某些功能是子窗口和其他功能，它显示了一个显示所有详细信息等的用户控件）

例如子窗口：

```
ShowChildWindow(new PkgRequestDataControl(_vm.CurrentRequest)); --> PkgRequestDataControl inherits from childviewmodel. _vm.CurrentRequest is one single instance of "childviewmodel" that is given 
```

现在我修改这个子窗口中的日期返回到主页。返回时，我在 collectionView (Requests.Refresh();) 上调用 refresh -> 但数据不会刷新。好吧..有时它会，但大多数时候它不会，直到我对数据网格的更改后的coloum进行了2-3次排序（单击标题进行排序和排序..并排序）

我究竟做错了什么？任何人都可以帮忙吗？整个结构混乱吗？

干杯艾莱姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:07:04.603

我不确定您使用的是哪个 ICollectionView 实现，但通常 ICollectionView.Refresh() 只会刷新 View 属性，并考虑过滤、排序和分组。为了让您的 UI 实现此更改，您仍然需要实现 INotifyPropertyChanged 并在调用 Refresh() 后引发 PropertyChanged 事件。

# c++ - 如何将新字符串重写到文本文件中的特定位置

> ID：10681351
> 
> 赞同：1
> 
> 时间：2012-05-21T07:52:25.210
> 
> 标签：c++

假设我有一个包含以下内容的文本文件：abcdefghk

我想用新文本在位置索引 3 处写一个文本：xyz

这样我就会有一个新的文本文件：abcxyzghk

如何在本机 C++ 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:27:48.390

只需用于`fseek`定位和重写。如果需要插入，则应使用另一种方法。首先，打开附加（“a+t”），设置位置，然后写入。

```
if (FILE* f = fopen("", "a+t"))
{
    const char* line = "xyz";
    const long int offset = 3;
    fseek(f, offset, SEEK_SET);
    fputs(line, f);
    fclose(f);
} 
```

请注意，这是 C++ 代码，我将`FILE* f`其置于 if 范围内，以避免`f`在`fclose`. 注意可能的 I/O 异常（`fseek`在 EOF 之外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T08:19:36.940

一般来说，修改文本文件中间的数据的唯一方法是读取它，修改内存中的数据，然后重写整个文件（最好用不同的名称，然后删除原始文件并重命名新文件）。但是，如果替换文本的长度与原始文本完全相同，并且两者都没有新行，则您可以读取到该位置，然后在该位置写入。

或者，您可以以二进制模式打开文件，使用 寻找任意位置`ostream::seekp`，然后在那里写入。如果文件将被视为文本，则在这种情况下也适用与新行有关的相同限制。在所有情况下，替换数据的长度必须与其替换的数据完全相同。

# android - Android C2DM 不会注册

> ID：10681353
> 
> 赞同：0
> 
> 时间：2012-05-21T07:52:35.543
> 
> 标签：android, android-c2dm

我已经使用了[本指南](http://www.vogella.com/code/de.vogella.android.c2dm/codestartpage.html)。但是如果我将它添加到另一个项目中，我不会收到任何东西：我已经对清单进行了更改，因此它与指南相匹配（我认为）：

问题：但现在我的注册尝试没有得到任何回应。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.vogella.android.c2dm" android:versionCode="1"
    android:versionName="1.0">
    <permission android:name="de.vogella.android.c2dm.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />
    <uses-permission android:name="de.vogella.android.c2dm.permission.C2D_MESSAGE" />
    <!-- Permissions -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <activity android:name="RegisterActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name="de.vogella.android.c2dm.C2DMReceiver" />

        <!-- Only C2DM servers can send messages for the app. If permission is 
            not set - any other app can generate it -->
        <receiver android:name="com.google.android.c2dm.C2DMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND">
            <!-- Receive the actual message -->
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="de.vogella.android.c2dm" />
            </intent-filter>
            <!-- Receive the registration id -->
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="de.vogella.android.c2dm" />
            </intent-filter>
        </receiver>
        <activity android:name="ResultActivity"></activity>
    </application>
</manifest> 
```

如何开始注册（已检查是否达到 if 条件）（从 C2DM2Activity 调用）：

```
public void checkRegistered() {
        String registered = C2DMessaging
                .getRegistrationId(getApplicationContext());
        if (registered.equals("")) {
            Log.i(TAG, "starting registration of C2DM");
            C2DMessaging.register(this, C2DMID);
        }
    } 
```

文件结构：

![文件结构](../Images/9976cbbd9a6827a117d55847bfabcdf7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:24:14.653

如果你添加一个“。”怎么办？对于您的服务名称，我认为应该是这样。

试试这个`<service android:name=".c2dm.C2DMReceiver" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T06:47:59.170

在代码部分。C2DMBaseReceiver，有一个地方定义了 C2DMReceiver 在应用程序包的默认文件夹中。

感谢所有其他人试图提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:20:03.177

尝试改变

```
android:name="com.google.android.c2dm.C2DMBroadcastReceiver" 
```

到

```
android:name="dk.lector.cms.c2dm.YourReceiverClassName" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:08:31.293

你在上面的评论中说那`C2DMBroadcastReceiver`是你的接收者。那`C2DMReceiver`我在你的`de.vogella.android.c2dm`包裹里看到的是什么？

你的问题是关于如何开始注册。在第**2.2 节下的教程中。获取移动应用程序的注册 ID**`register`需要调用一个方法。当*registrationId*从 Google 服务器返回时，它会在您的接收者的`onReceive`. 在他的教程中，注册的接收者是`C2DMRegistrationReceiver`. 如果您说那`C2DMBroadcastReceiver`是您的接收者并且您确定这一点，只需调用*register*并且`onReceive`应该会收到消息。

此外，您应该尝试发布整个 Manifest.xml。确保您使用的是 INTERNET 权限和自定义权限，例如：

```
<permission
    android:name="de.vogella.android.c2dm.simpleclient.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission 
    android:name="de.vogella.android.c2dm.simpleclient.permission.C2D_MESSAGE" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T09:12:13.860

您注册的包名称与`C2DM`您转移的其他项目相同，因为对于 C2DM，它使用其`Package`名称识别应用程序

# python - Twython：运行示例时出错

> ID：10681357
> 
> 赞同：2
> 
> 时间：2012-05-21T07:52:49.910
> 
> 标签：python, twitter, twython

嗨，我刚刚开始评估 python>Twitter api:s 的不同选项。

我已经编写了一些代码来查看 Twython 包中的示例，但我总是最终得到相同的错误。

```
AttributeError: 'Twython' object has no attribute 'auth' 
```

我在运行包含的 core_example 文件时也遇到了同样的错误。

我正在从 git 运行“2.0.0”。

```
/System/Library/Frameworks/Python.framework/Versions/2.7/bin/python /Users/skjortan/dev/trunk/3rdPartyLibs/twython/core_examples/current_trends.py
Traceback (most recent call last):
  File "/Users/skjortan/dev/trunk/3rdPartyLibs/twython/core_examples/current_trends.py", line 5, in <module>
    trends = twitter.getCurrentTrends()
  File "/Library/Python/2.7/site-packages/twython-2.0.0-py2.7.egg/twython/twython.py", line 167, in <lambda>
    return lambda **kwargs: self._constructFunc(key, **kwargs)
  File "/Library/Python/2.7/site-packages/twython-2.0.0-py2.7.egg/twython/twython.py", line 188, in _constructFunc
    content = self._request(url, method=method, params=kwargs)
  File "/Library/Python/2.7/site-packages/twython-2.0.0-py2.7.egg/twython/twython.py", line 205, in _request
    response = func(url, data=myargs, auth=self.auth)
AttributeError: 'Twython' object has no attribute 'auth' 
```

进程以退出代码 1 结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:17:57.313

我注意到了你的问题——我是 Twython 的作者。已提交修复并推出 2.0.1 版本。如果您更新安装，这应该不再是问题。

谢谢，打扰了！我们的 2.0.0 版本中出现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:57:26.950

但它确实没有属性'auth'，但它有如下方法：

```
def get_authentication_tokens(self):
    """Returns an authorization URL for a user to hit."""

def get_authorized_tokens(self):
    """Returns authorized tokens after they go through the auth_url phase.""" 
```

这是来自 django-twython 的示例，其作者如何进行身份验证

```
def begin_auth(request):
    """
    The view function that initiates the entire handshake.
    For the most part, this is 100% drag and drop.
    """
    # Instantiate Twython with the first leg of our trip.
    twitter = Twython(
    twitter_token = settings.TWITTER_KEY,
    twitter_secret = settings.TWITTER_SECRET,
    callback_url =     request.build_absolute_uri(reverse('twython_django_oauth.views.thanks')))

    # Request an authorization url to send the user to...
    auth_props = twitter.get_authentication_tokens()

    # Then send them over there, durh.
    request.session['request_token'] = auth_props
    return HttpResponseRedirect(auth_props['auth_url']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:03:44.243

显然 twitter api 并且不允许正常登录，仅用于 oauth，在 Twitter 和 OAuth 设置选项卡上创建应用程序，从那里获取来自 OAuth 设置的数据，以及 oauth 的方法：

[http://pydoc.net/twython/1.4.5/twython.twitter_endpoints](http://pydoc.net/twython/1.4.5/twython.twitter_endpoints)

# java - 为不同的应用程序生成输入

> ID：10681358
> 
> 赞同：0
> 
> 时间：2012-05-21T07:52:50.187
> 
> 标签：java, testing

我需要在 Java 代码中为在同一台 Win7 机器上运行的不同应用程序以编程方式生成鼠标点击。该进程是已知的（指向进程的指针）。我可以为此使用 API 或应用程序吗？

这是定制测试框架的 GUI 部分所需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:38:10.247

`java.awt.Robot`班级是你的朋友。您可以使用它生成鼠标和键盘输入。

看看[这个教程](http://forum.codecall.net/topic/54172-robot-class/)。

[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)

# spring - 如何在 Grails 应用程序中选择服务实现？

> ID：10681359
> 
> 赞同：9
> 
> 时间：2012-05-21T07:52:55.637
> 
> 标签：spring, grails, groovy

我有几个服务实现了一个通用接口，我希望能够在我的应用程序启动时选择其中一个来注入其他服务。

我已经尝试从 resources.groovy 引用服务实现，如下所示，但是 Spring 创建了所选服务的新实例并且不会自动装配其依赖项。

我怎样才能让这个解决方案发挥作用？还是有其他方法？

```
class MyService {

    Repository repository

    interface Repository {
        void save(...)
    }
}

class MySqlRepositoryService implements MyService.Repository { ... }

class FileRepositoryService implements MyService.Repository { ... } 
```

资源.groovy：

```
beans = {
    ...
    repository(FileRepositoryService) { }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:19:45.363

当然可以从手工制造的工厂中检索对服务的引用，但在我看来，您采用的方法是最好的方法。我自己使用它，因为它将应用程序配置阶段的所有信息收集在一个地方，因此更容易追踪使用了哪个实现。

您遇到的自动装配陷阱可以很容易地解释。放入的所有类`grails-app/services`都由 Grails 自动配置为 Spring 单例 bean，并按名称自动装配。因此，您放置的 bean 定义`grails-app/conf/resources.groovy`创建了另一个 bean，但没有 Grails 约定强加的默认值。

最直接的解决方案是将实现放入`src/groovy`以避免重复bean并使用以下语法打开自动装配：

```
beans = {
  repository(FileRepositoryService) { bean ->
    bean.autowire = 'byName'
  }
} 
```

# java - HashSet 和 LinkedHashSet 有什么区别

> ID：10681360
> 
> 赞同：1
> 
> 时间：2012-05-21T07:52:56.807
> 
> 标签：java, hashset, linkedhashset

我看到它`LinkedHashSet`扩展了`HashSet`，我知道它保持秩序。
但是，通过检查 JDK 中的代码，似乎`LinkedHashSet`只包含构造函数而没有实现，所以我猜所有的逻辑都发生在`HashSet`?
如果这是正确的，为什么要这样设计？这似乎很混乱。

*编辑：*这个问题有一个不幸的错误。我写了`HashMap`and`LinkedHashMap`而不是`HashSet`and `LinkedHashSet`。如果可能的话，我解决了这个问题。
另外，我很感兴趣为什么 Java 设计者选择这样实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:58:27.847

是的，`LinkedHashMap`调用它的超级构造函数。它所做的一件事是覆盖`init()`由超级构造函数调用的方法。

这`LinkedHashMap`是一个`HashMap`添加了双向链表实现的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:01:39.560

正如您所说，两种数据结构之间的区别在于，`LinkedHashMap`它`HashMap`保留了对的插入顺序。

因此 Linked 旨在用作`HashMap`标准方法，`HashMap`并且添加的唯一方法是[removeEldestEntry()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)，如果您想处理数据结构的“列表”部分，这很有用。

# asp.net - 如何启用/使用 MVC 3 的跨域资源共享？

> ID：10681363
> 
> 赞同：7
> 
> 时间：2012-05-21T07:53:19.573
> 
> 标签：asp.net, asp.net-mvc-3

我想使用 AJAX 向 MVC 3 控制器提交表单。

表单和控制器位于两个不同的域上，这就是我想使用 CORS 的原因。

我已经读过下面的代码应该在 ASP.NET 中发挥作用：

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

来自[http://enable-cors.org/#how-asp.net](http://enable-cors.org/#how-asp.net)

这段代码是否应该直接进入获取表单数据的控制器中？据我所知，客户端发布数据和服务器之间必须进行一些数据交换，以确定是否启用/支持 CORS，所以我认为一行代码必须转到其他地方？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:12:02.913

这可以进入控制器。实际上，我可能会在自定义操作过滤器中将其外部化，以避免在需要从跨域 AJAX 调用调用的每个控制器操作中重复它。不需要额外的步骤。只需确保您的浏览器支持 CORS，因为如果不添加此行将完全没有任何效果。

# c# - 如何使用 C# 和 IIOP.NET 查找 Corba 服务？

> ID：10681366
> 
> 赞同：1
> 
> 时间：2012-05-21T07:53:47.707
> 
> 标签：c#, .net, client, corba, nameservers

我正在为 Corba 服务器编写 C# 客户端，我正在使用 IIOP.NET，通过以下页面上的示例进行操作：http: [//iiop-net.sourceforge.net/rmiAdderDNClient.html](http://iiop-net.sourceforge.net/rmiAdderDNClient.html)

我已经做到了这一点，没有错误：

```
// Register channel
IiopClientChannel channel = new IiopClientChannel();
ChannelServices.RegisterChannel(channel, false);

// Access COS naming context
CorbaInit init = CorbaInit.GetInit();
NamingContext context = init.GetNameService(host, port); 
```

变量“host”是一个带有服务器计算机名称的字符串，“port”是一个表示端口号的 int。其他系统当前使用这些值连接到服务器，因此我可以确认它们是正确的。

但是，尝试连接到交易者服务会在运行时产生异常。这是我用来执行此操作的代码：

```
// Looking up VB Trader
NameComponent[] names = new NameComponent[] { new NameComponent("TraderInterface") };
object obj = context.resolve(names); 
```

这是我收到的错误消息：

“CORBA 系统异常：omg.org.CORBA.INV_OBJREF，已完成：Completed_No 次要：10102。”

这似乎暗示了一个无效的对象引用，但这意味着什么？我传递给解析方法的字符串格式是否不正确？我尝试了许多与其他系统中使用的服务不同的名称，但我总是得到相同的错误，这让我怀疑我是否正确解释了它。

顺便说一句，在我绝望的情况下，我还尝试从 IOR 获取对象引用，但这又引发了一个不同的异常（即 omg.org.CORBA.ORB_package.InvalidName）。

```
OrbServices orb = OrbServices.GetSingleton();
object obj = orb.resolve_initial_references(traderIOR); 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:11:04.303

我永远无法使用上述任何方法访问我的服务器，但是以下代码最终使通信正常工作：

```
Hashtable props = new Hashtable();
props[IiopChannel.BIDIR_KEY] = true;
props[IiopServerChannel.PORT_KEY] = port;

// register corba services
IiopChannel channel = new IiopChannel(props);
ChannelServices.RegisterChannel(channel, false);

MyInterface obj = (MyInterface)RemotingServices.Connect(typeof(MyInterface), ior); 
```

我不完全确定为什么我必须使用这种（看似）非常规的方式。可能是由于缺少在服务器上运行的命名服务。不管是什么原因，我希望这可以帮助那里的人。

# android - getLastknownLocation() 在 nexus 上返回空值

> ID：10681369
> 
> 赞同：2
> 
> 时间：2012-05-21T07:54:16.117
> 
> 标签：android, location

我正在开发基于位置的项目，我正在使用以下代码

我正在为该项目使用 google api 8

```
 lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    currloc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    TextView t = (TextView)findViewById(R.id.textView1);
    try{
        t.setText("Your current location is - "+currloc.getLatitude()+","+currloc.getLongitude());
    }catch (Exception e) {
        // TODO: handle exception
        t.setText("cant find current location ");
    } 
```

这段代码在我的银河选项卡上也能正常工作，即使在 HTC 上也是如此

但是当我使用 nexus 时，它会返回位置的空值。我需要更改我的api级别还是对galaxy nexus有任何特定要求提前谢谢你:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:00:11.810

请按照代码行..

```
Step1: into your oncreate

LocationListener locationListener = new LocalLocationListener();
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);

Step2: into class body

/**Listener on location change*/
private class LocalLocationListener implements LocationListener
{

    public void onLocationChanged(Location location)
    {
        String text = "My current Location is: "+location.getLatitude()+", "+location.getLongitude();
        GeoPoint geoPoint = new GeoPoint((int)(location.getLatitude()* 1E6), (int)(location.getLatitude() * 1E6));
        mapController_.animateTo(geoPoint);
        Toast.makeText(LocalMap.this, text, Toast.LENGTH_SHORT).show();
        Log.i("onLocationChanged", text);

    }

    public void onProviderDisabled(String provider)
    {
        // TODO Auto-generated method stub
        Toast.makeText(LocalMap.this, "GPS Disable", Toast.LENGTH_SHORT).show();
        Log.i("onProviderDisabled", "GPS Disable");
    }

    public void onProviderEnabled(String provider)
    {
        // TODO Auto-generated method stub
        Toast.makeText(LocalMap.this, "GPS Enable", Toast.LENGTH_SHORT).show();
        Log.i("onProviderEnabled", "GPS Enable");
    }

    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        // TODO Auto-generated method stub

    } 
```

# c - 是否可以将计时器值存储到变量中？

> ID：10681370
> 
> 赞同：1
> 
> 时间：2012-05-21T07:54:17.577
> 
> 标签：c, if-statement, for-loop, timer, 8051

当传入数据的值为“0”时，我使用 DS89C450 timer0 从 0 开始计数，并且它只会在数据“1”时停止，并且它将与我拥有的值进行比较。但是，是否可以存储计时器计数的值，以便我可以使用 if 循环来比较这些值。

例如：

```
for(i=0;i<15;i++)
{
  if(in_data == 0)
  {  
    TH0 = 0x00;          //Set Timer0 to count from 0
    TL0 = 0x00;
    TR0 = 1;             //Start Timer0
    if(in_data == 1)             //if InputData = 1
    { 
       TR0 = 0;          //Stop Timer0
       //Store Timer0 value under "TimerValue"
     }
    if(TimerValue == 2212)         //If TimerValue = 2212(decimal)/08A4(Hex)
    {
      Data[i] = 0x00;               //Set Data[i] = 0
    }
} 
```

有谁知道可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:19:51.963

我猜`TH0`你的计时器价值。

您应该能够在手册中找到此端口的处理器输入大小。

然后你可以

```
//since no more details are provided i'm assuming TH0 and TL0 are 8 bits
short TimerValue = (TH0 << 8) | TL0; // to store the value. 
```

# c++ - 哪个是整数除以 2 的更好选择？

> ID：10681375
> 
> 赞同：412
> 
> 时间：2012-05-21T07:54:36.977
> 
> 标签：c++, c, optimization, division, micro-optimization

以下哪种技术是整数除以 2 的最佳选择，为什么？

技术1：

```
x = x >> 1; 
```

技术2：

```
x = x / 2; 
```

这里`x`是一个整数。

* * *

## 回答 #1

> 赞同：853
> 
> 时间：2012-05-21T07:57:52.080

使用最能描述您正在尝试执行的操作的操作。

*   如果您将数字视为位序列，请使用 bitshift。
*   如果您将其视为数值，请使用除法。

请注意，它们并不完全相同。对于负整数，它们可以给出不同的结果。例如：

```
-5 / 2  = -2
-5 >> 1 = -3 
```

[（想法）](http://ideone.com/lnABV)

* * *

## 回答 #2

> 赞同：227
> 
> 时间：2012-05-21T07:56:38.147

第一个看起来像分裂吗？不，如果要划分，请使用`x / 2`. 如果可能，编译器可以对其进行优化以使用位移（这称为强度降低），如果您自己进行，这将使其成为无用的微优化。

* * *

## 回答 #3

> 赞同：191
> 
> 时间：2012-05-21T08:34:03.790

继续说：有很多理由支持使用`x = x / 2;` 这里有一些：

*   它更清楚地表达了您的意图（假设您没有处理位旋转寄存器位或其他东西）

*   无论如何，编译器都会将其简化为移位操作

*   即使编译器没有减少它并选择了比 shift 更慢的操作，这最终以可测量的方式影响程序性能的可能性本身也很小（如果它确实对它产生了可测量的影响，那么你有一个实际的使用轮班的理由）

*   如果除法将成为更大表达式的一部分，则如果使用除法运算符，则更有可能获得正确的优先级：

    ```
    x = x / 2 + 5;
    x = x >> 1 + 5;  // not the same as above 
    ```

*   有符号算术可能比上面提到的优先级问题更复杂

*   重申一下 - 无论如何，编译器都会为您执行此操作。实际上，它会将除以常数转换为一系列移位、加法和乘法运算，而不仅仅是 2 的幂。请参阅[此问题](https://stackoverflow.com/a/1168616/12711)以获取有关此问题的更多信息的链接。

简而言之，当你真的想要乘法或除法时，你编写一个班次代码什么都没有，除非可能会增加引入错误的可能性。这是一生，因为编译器不够聪明，无法在适当的时候将这种事情优化为转变。

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2012-05-21T07:59:03.743

> 哪一个是最好的选择，为什么要将整数除以 2？

取决于你的意思**best**。

如果你想让你的同事讨厌你，或者让你的代码难以阅读，我肯定会选择第一个选项。

**如果您想将一个数字除以 2，请使用第二个数字。**

两者不相等，如果数字为负数或在较大的表达式中，它们的行为就不一样 - 位移位的优先级低于`+`or `-`，除法的优先级更高。

您应该编写代码来表达其意图。如果您关心性能，请不要担心，优化器在这些微优化方面做得很好。

* * *

## 回答 #5

> 赞同：60
> 
> 时间：2012-05-21T07:56:04.133

只需使用除 ( `/`)，假设它更清晰。编译器将相应地进行优化。

* * *

## 回答 #6

> 赞同：39
> 
> 时间：2012-05-21T08:02:33.903

我同意您应该喜欢的其他答案，`x / 2`因为它的意图更清晰，编译器应该为您优化它。

然而，另一个优先考虑的原因`x / 2`是，如果是有符号且为负数`x >> 1`，则 的行为`>>`取决于实现。`x``int`

从 ISO C99 标准的第 6.5.7 节第 5 点：

> 结果`E1 >> E2`是`E1`右移的`E2`位位置。如果`E1`具有无符号类型或`E1`具有带符号类型和非负值，则结果的值是`E1`/ 2的商的整数部分^(`E2`)。如果`E1`具有带符号类型和负值，则结果值是实现定义的。

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2012-05-21T07:57:21.263

`x / 2`更清晰，`x >> 1`速度也不快（根据微基准，Java JVM 大约快 30%）。正如其他人所指出的，对于负数，舍入略有不同，因此在处理负数时必须考虑这一点。如果某些编译器知道数字不能为负数，则可能会自动转换`x / 2`为`x >> 1`（即使我无法验证这一点）。

甚至`x / 2`可能不会使用（慢）除 CPU 指令，因为[一些捷径是可能的](http://gcc.godbolt.org/#%7B%22version%22%3A3%2C%22filterAsm%22%3A%7B%22labels%22%3Atrue%2C%22directives%22%3Atrue%2C%22commentOnly%22%3Atrue%7D%2C%22compilers%22%3A%5B%7B%22sourcez%22%3A%22JYOwLgBAZg9jAUFSWBAlAKAN4YhATgKZgCu%2BISEA9BAEwDcGAvkAAA%3D%3D%22%2C%22compiler%22%3A%22g520%22%2C%22options%22%3A%22-O1%20-std%3Dc%2B%2B0x%20-fomit-frame-pointer%22%7D%5D%7D)，但它仍然比`x >> 1`.

（这是一个 C / C++ 问题，其他编程语言有更多的运算符。对于 Java 也有无符号右移，`x >>> 1`，这又是不同的。它允许正确计算两个值的平均值（平均值），这样`(a + b) >>> 1`将即使`a`和的值非常大，也返回平均值`b`。例如，如果数组索引可以变得非常大，则对于二进制搜索来说这是必需的。[在许多版本的二进制搜索中都存在错误](http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html)，因为它们用于`(a + b) / 2`计算平均值。这不会'不能正常工作。正确的解决方案是`(a + b) >>> 1`改用。）

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2012-05-22T23:58:57.280

克努特说：

> *过早的优化是万恶之源。*

所以我建议使用`x /= 2;`

这样代码很容易理解，而且我认为以这种形式优化这个操作，对处理器来说并没有太大的区别。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2012-05-27T00:32:25.617

查看编译器输出以帮助您做出决定。
我使用gcc (GCC) 4.2.1 20070719 [FreeBSD]在 x86-64 上运行了这个测试

另请参阅[godbolt 的在线编译器输出](https://gcc.godbolt.org/#%7B%22version%22%3A3%2C%22filterAsm%22%3A%7B%22labels%22%3Atrue%2C%22directives%22%3Atrue%2C%22commentOnly%22%3Atrue%7D%2C%22compilers%22%3A%5B%7B%22sourcez%22%3A%22JYOwLgBAJsBuBMBnYBzEBTKAKUkCGAlBAN4BQEEATumAK6UgR4QD0E8A3KQL6mm4REAC0pJUGbAMIlyVGvUbMAfEogBGLr1Is2YSgE8IYAPYQA7pWBh0EFeoigj6SgFtEEYwDNocYMmMgADQQtCCItADGEeiIiJ60ADYJhgCSRkKgANbabABGtJBWAOTuuM4xYKAoEELGZhARxi4ADsAJzu7GzZUuwABeNmBCg2amMJ6e5eDJ%2FOA%2BsAD6xkPOC4joLnjgwBGIOHPARGQU1HQMEDgAPAAMEAD8DgDUahAAXA5EbJw8s5Awi8thpQ1hstpVdvB9oUjrJTgoLsAII8ETc7mpXtcCJ92JpSEAA%3D%3D%22%2C%22compiler%22%3A%22clang37x%22%2C%22options%22%3A%22-O3%20-std%3Dc%2B%2B0x%20-march%3Dnative%20-mtune%3Dnative%20-mno-avx%22%7D%5D%7D)。

您看到的是编译器`sarl`在这两种情况下都使用（算术右移）指令，因此它确实识别出两个表达式之间的相似性。如果使用除法，编译器还需要针对负数进行调整。为此，它将符号位向下移动到最低位，并将其添加到结果中。与除法相比，这解决了在移动负数时的非一问题。
由于除法情况进行了 2 次移位，而显式移位情况仅进行了一次，因此我们现在可以在此处解释由其他答案测量的一些性能差异。

带有汇编输出的 C 代码：

对于除法，您的输入将是

```
int div2signed(int a) {
  return a / 2;
} 
```

这编译为

```
 movl    %edi, %eax
    shrl    $31, %eax
    addl    %edi, %eax
    sarl    %eax
    ret 
```

同样对于班次

```
int shr2signed(int a) {
  return a >> 1;
} 
```

输出：

```
 sarl    %edi
    movl    %edi, %eax
    ret 
```

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2012-05-21T18:46:31.020

只是一个补充说明 -

x *= 0.5 在某些基于 VM 的语言中通常会更快——特别是 actionscript，因为不必检查变量是否被 0 整除。

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2012-05-22T05:58:09.947

使用`x = x / 2;` OR `x /= 2;`因为将来可能会有新的程序员使用它。所以他会更容易找出代码行中发生了什么。大家可能不知道这样的优化。

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2012-05-22T01:17:05.007

As far as the CPU is concerned, bit-shift operations are faster than division operations. However, the compiler knows this and will optimize appropriately to the extent that it can, so you can code in the way that makes the most sense and rest easy knowing that your code is running efficiently. But remember that an `unsigned int` can (in some cases) be optimized better than an `int` for reasons previously pointed out. If you don't need signed arithmatic, then don't include the sign bit.

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2012-05-21T18:39:43.170

我说的是编程竞赛的目的。通常，它们具有非常大的输入，其中除以 2 发生多次，并且已知输入是正数或负数。

x>>1 将优于 x/2。我通过运行一个程序检查了 ideone.com，其中发生了超过 10^10 除以 2 的操作。x/2 花了将近 5.5 秒，而 x>>1 花了将近 2.6 秒。

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2012-05-21T20:21:51.530

我想说有几件事需要考虑。

1.  位移应该更快，因为实际上不需要特殊的计算来位移位，但是正如所指出的，负数存在潜在的问题。如果您确定有正数，并且正在寻找速度，那么我建议您使用 bitshift。

2.  除法运算符对人类来说非常容易阅读。因此，如果您正在寻找代码可读性，您可以使用它。请注意，编译器优化领域已经取得了长足的进步，因此使代码易于阅读和理解是一种很好的做法。

3.  根据底层硬件，操作可能有不同的速度。Amdal 法则是让普通案件快速解决。因此，您可能拥有比其他硬件更快地执行不同操作的硬件。例如，乘以 0.5 可能比除以 2 更快。（当然，如果您希望强制执行整数除法，则可能需要乘法的下限）。

如果您追求纯粹的性能，我建议您创建一些可以执行数百万次操作的测试。对执行进行多次采样（您的样本大小），以确定哪一个在统计上最适合您的操作系统/硬件/编译器/代码。

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2012-05-21T12:07:29.733

x = x / 2; 是适合使用的代码.. 但操作取决于您自己的程序，您想如何产生输出。

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2012-05-22T08:29:03.087

让你的意图更清楚......例如，如果你想除法，使用 x / 2，并让编译器优化它以移位运算符（或其他任何东西）。

今天的处理器不会让这些优化对程序的性能产生任何影响。

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2012-05-22T21:11:21.797

这个问题的答案将取决于你工作的环境。

*   如果您正在使用 8 位微控制器或任何没有硬件支持乘法的东西，移位是预期的并且司空见惯，虽然编译器几乎肯定会`x /= 2`变成`x >>= 1`，但在该环境中，除法符号的存在会引起更多关注使用移位来实现除法。
*   如果您在性能关键的环境或代码部分中工作，或者您的代码可以在关闭编译器优化的情况下进行编译，`x >>= 1`那么最好使用注释来解释其推理，以便清楚地说明目的。
*   如果您不符合上述条件之一，只需使用`x /= 2`. 最好为下一个碰巧查看您的代码的程序员节省 10 秒重复执行您的 shift 操作，而不是不必要地证明您知道在没有编译器优化的情况下 shift 更有效。

所有这些都假设无符号整数。简单的转变可能不是您想要的签名。此外，DanielH 提出了关于使用`x *= 0.5`某些语言（如 ActionScript）的一个好点。

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2012-05-21T20:30:22.530

mod 2，测试 = 1。不知道 c 中的语法。但这可能是最快的。

* * *

## 回答 #19

> 赞同：7
> 
> 时间：2012-06-08T11:34:59.853

显然，如果您正在为下一个阅读它的人编写代码，请确保“x/2”的清晰性。

**但是，如果速度是您的目标，请尝试两种方式并计算结果的时间。**几个月前，我研究了一个位图卷积例程，其中涉及遍历整数数组并将每个元素除以 2。我做了各种优化它，包括用“x>>1”替换“x”的老技巧/2"。

当我实际上对两种方式进行计时时，我惊讶地发现**x/2 比 x>>1 快**

这是使用 Microsoft VS2008 C++ 并打开默认优化。

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2012-05-22T10:41:15.207

一般来说，右移分为：

```
q = i >> n; is the same as: q = i / 2**n; 
```

这有时用于以清晰度为代价加快程序的速度。我认为你不应该这样做。编译器足够聪明，可以自动执行加速。这意味着**换班不会以牺牲清晰度为代价**。

看看这个[来自 Practical C++ Programming 的页面。](http://books.google.fr/books?id=pXDzdJ_1E3oC&pg=PT189&dq=c%2b%2b%20shift%20left&hl=fr&sa=X&ei=jGe7T8LxDLOY1AWBu_DlBw&ved=0CDUQ6AEwAA#v=onepage&q=c%2b%2b%20shift%20left&f=false)

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2012-05-22T17:25:52.300

在性能方面。CPU 的移位操作比除法操作码要快得多。因此除以 2 或乘以 2 等都受益于移位操作。

至于外观和感觉。作为工程师，我们什么时候变得如此痴迷于连美女都不用的化妆品！:)

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2012-05-25T05:51:53.890

X/Y 是正确的...和“>>”移位运算符..如果我们想要两个除以一个整数，我们可以使用 (/) 被除数运算符。移位运算符用于移位位..

x=x/2；x/=2；我们可以这样使用..

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-12-21T06:41:31.343

虽然 x>>1 比 x/2 快，但在处理负值时正确使用 >> 有点复杂。它需要类似于以下内容：

```
// Extension Method
public static class Global {
    public static int ShiftDivBy2(this int x) {
        return (x < 0 ? x + 1 : x) >> 1;
    }
} 
```

# c# - 如何从 C# 更改 GridView 中列的格式

> ID：10681378
> 
> 赞同：1
> 
> 时间：2012-05-21T07:54:57.037
> 
> 标签：c#, datetime, gridview, format

我有一个 GridView，我想将它导出到 Word。我想将一列的格式更改为日期时间格式（“dd.MM.yyyy”）

```
var grid = new GridView { DataSource = dt};
grid.DataBind(); 
```

在 *.aspx 页面中这很容易，如下例所示：

```
<asp:boundfield datafield="My_Date_Column"
                dataformatstring="{0:dd.MM.yyyy}"
                htmlencode="false" /> 
```

我想从 c# 更改格式，如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:01:59.163

如果您想从 CodeBehind 更改 GridView 列的格式，请将 a 添加`RowDataBound`到您的网格视图中。

然后在该`GridView_RowDataBound(object sender, GridViewRowEventArgs e)`方法中，您将能够访问`e`它将为您提供访问该行的各个单元格的权限，您可以在其中指定格式化程序。

下面是一个使用`RowDataBound`事件 的例子[http://forums.asp.net/p/1589807/4025153.aspx](http://forums.asp.net/p/1589807/4025153.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:57:02.207

```
String.Format("{0:dd.MM.yyyy}", myDateTimeInstance); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T07:57:11.797

我认为列的格式基于系统当前日期时间格式。

但是当转换为字符串时，您可以这样做

```
String str = dt[RowNumber][ColumnName].ToString("dd.MM.yyyy"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:57:33.370

```
DateTime dt = DateTime.Now;
String formated = dt.ToString("dd.MM.yyyy"); 
```

或者

```
String formated = String.Format("{0:dd.MM.yyyy}", dt ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T07:58:52.900

```
DateTime dt = DateTime.Now;
string formated = dt.ToString("dd.MM.yyyy"); 
```

[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)中显示了可能的格式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T08:34:47.463

如果您想格式化整个列，那么如果您可以为相关列设置属性会更好

`gridview1.Columns[columnIndex].DataFormatString ="{0:dd.MM.yyyy}";`

我认为您需要将列转换为`BoundField`访问该属性。

# css - css内联的left属性

> ID：10681380
> 
> 赞同：0
> 
> 时间：2012-05-21T07:55:05.593
> 
> 标签：css

我试图根据页面的分辨率将控件放置在网页的中心。

左边的属性我在一个css类中分配它并添加它如下-样式类-

```
.PanelStyle
{
   left:100px;
   top:120px;
   border:2px solid #CCC;
   border-radius: 4px 4px 0 0;
}

oPanel.addStyleClass("PanelStyle");//oPanel is my control. 
```

这工作得很好。但是我不想硬编码 left 属性的像素值，而是想根据分辨率动态分配它。为此我正在做类似下面的事情

```
var leftoffset = Math.floor($(window).width()-400)/2+ "px";//400 is my control width
leftoffset = leftoffset.toString(); 
oPanel.style.left=leftoffset ; 
```

但这并没有反映在网页中。

我还尝试简单地添加左属性值而不进行计算

```
oPanel.style.cssText="left : 100px"; 
```

但没有用。请告诉我为什么 inline object.style.left/object.style.cssText=cssString 在这里不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:59:33.580

试试这样：

```
$(oPanel).css("left",Math.floor($(window).width()-400)/2+"px"); 
```

或者如果`'400'`是您的控件`width`，则：

```
$(oPanel).css("left",Math.floor($(window).width()-$(oPanel).width())/2+"px"); 
```

# javascript - 在 iOS 中更改 JavaScript 警报对话框标题

> ID：10681381
> 
> 赞同：35
> 
> 时间：2012-05-21T07:55:10.610
> 
> 标签：javascript, ios, uiwebview

`UIWebview`是否可以在 iPhone中更改 JavaScript 警报标题？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-28T15:13:46.070

基本上你不能更改标题，但最近我找到了一种显示没有标题的警报对话框的方法。

```
var iframe = document.createElement("IFRAME");
iframe.setAttribute("src", 'data:text/plain,');
document.documentElement.appendChild(iframe);
window.frames[0].window.alert('hello');
iframe.parentNode.removeChild(iframe); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-29T01:16:33.030

我针对这个问题提出了三种不同的解决方案。生产代码的最佳解决方案是@Martin H 描述的解决方案。我对此的唯一补充是一个具体示例，展示了如何实现它。

我的其他解决方案依赖于 UIWebView 的未记录行为，但不需要对内容/JS 进行任何更改。

**解决方案 1**：这是一个具体示例，展示了@Martin H 提出的技术。这可能是最好的解决方案，因为它不依赖`UIWebView`/`UIAlertView`未记录的行为。

```
@interface TSViewController () <UIWebViewDelegate>
@end

@implementation TSViewController

- (UIWebView*) webView
{
    return (UIWebView*) self.view;
}

- (void) loadView
{
    UIWebView* wv = [[UIWebView alloc] initWithFrame: CGRectMake(0, 0, 320, 480)];
    wv.delegate = self;
    wv.scalesPageToFit = YES;

    self.view = wv;
}

- (void) viewDidLoad
{
    [super viewDidLoad];

    [self.webView loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString: @"http://www.craigslist.org"]]];
}

- (void) webViewDidFinishLoad: (UIWebView *) webView
{
    // inject some js to re-map window.alert()
    // ideally just do this in the html/js itself if you have control of that.
    NSString* js = @"window.alert = function(message) { window.location = \"http://action/alert?message=\" + message; }";
    [webView stringByEvaluatingJavaScriptFromString: js];

    // trigger an alert.  for demonstration only:
    [webView stringByEvaluatingJavaScriptFromString: @"alert('hello, world');" ];
}

- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL* url = request.URL;

    // look for our custom action to come through:
    if ( [url.host isEqualToString: @"action"] && [url.path isEqualToString: @"/alert"] )
    {
        // parse out the message
        NSString* message = [[[[url query] componentsSeparatedByString: @"="] lastObject] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

        // show our alert
        UIAlertView* av = [[UIAlertView alloc] initWithTitle: @"My Custom Title"
                                                     message: message
                                                    delegate: nil
                                           cancelButtonTitle: @"OK"
                                           otherButtonTitles: nil];

        [av show];

        return NO;
    }
    return YES;
} 
```

**解决方案2：首先，让我说我永远不会在生产代码中亲自使用以下解决方案。** 实现此功能的最佳方法是执行@Martin H 在他的回答中建议的操作，或者如果实际上需要一个空标题，则可能执行@twk 的建议。如果您无法控制 Web 内容本身，也许您可​​以在内容加载后注入 @Martin H 的代码。

也就是说，如果我们做出一些假设，这是可以实现的。首先，Javascript`alert()`方法确实映射到一个真实的`UIAlertView`. （事实上​​确实如此！）其次，我们可以提出一些机制来区分`alert()`-sourced`UIAlertView`和其他 application-sourced `UIAlertViews`。（我们可以！）

我的方法是调配`UIAlertView`. 我知道——[调酒糟透了，有各种各样的缺点](https://stackoverflow.com/questions/5339276/what-are-the-dangers-of-method-swizzling-in-objective-c)。如果我能提供帮助，我不会在生产应用程序中调皮捣蛋。但是对于这个科学项目，我们将混合`UIAlertView setDelegate:`方法。

我发现 1)`UIWebView`将构造一个`UIAlertView`来显示 javascript 警报，以及 2) 在`UIAlertView`设置 UIAlertView 之前设置标题`delegate`。通过`UIAlertView setDelegate:`使用我自己的方法，我可以完成两件事：1）我可以确定`UIAlertView`正在代表 a 委托`UIWebView`（只需检查委托......）和 2）我有机会在 alertview 之前重新设置标题显示。

您可能会问*“为什么不只是调酒`UIAlertview -show`法？”* 那会很棒，但在我的实验中，我发现 UIWebView 从未调用过`show`. 它一定是在调用其他一些内部方法，我没有进一步调查。

我的解决方案在 UIAlertView 上实现了一个类别，它添加了几个类方法。基本上，您使用这些方法注册 UIWebView，并提供要使用的替换标题。或者，您可以提供一个回调块，在调用时返回一个标题。

我使用 iOS6`NSMapTable`类来保留一组 UIWebView 到标题的映射，其中 UIWebView 是一个弱键。这样我就不必取消注册`UIWebView`，一切都得到很好的清理。 **因此，当前的实现仅适用于 iOS6。**

这是基本视图控制器中使用中的代码：

```
#import <objc/runtime.h>

typedef NSString*(^TSAlertTitleBlock)(UIWebView* webView, NSString* defaultTitle );

@interface UIAlertView (TS)
@end

@implementation UIAlertView (TS)

NSMapTable* g_webViewMapTable;

+ (void) registerWebView: (UIWebView*) webView alertTitleStringOrBlock: (id) stringOrBlock
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{

        g_webViewMapTable = [NSMapTable weakToStrongObjectsMapTable];

        // $wizzle
        Method originalMethod = class_getInstanceMethod(self, @selector(setDelegate:));
        Method overrideMethod = class_getInstanceMethod(self, @selector(setDelegate_ts:));
        method_exchangeImplementations(originalMethod, overrideMethod);
    });

    [g_webViewMapTable setObject: [stringOrBlock copy] forKey: webView];
}

+ (void) registerWebView: (UIWebView*) webView alertTitle: (NSString*) title
{
    [self registerWebView: webView alertTitleStringOrBlock: title];
}

+ (void) registerWebView: (UIWebView*) webView alertTitleBlock: (TSAlertTitleBlock) alertTitleBlock
{
    [self registerWebView: webView alertTitleStringOrBlock: alertTitleBlock];
}

- (void) setDelegate_ts: (id) delegate
{
    // call the original implementation
    [self setDelegate_ts: delegate];

    // oooh - is a UIWebView asking for this UIAlertView????
    if ( [delegate isKindOfClass: [UIWebView class]] )
    {
        // see if we've registered a title/title-block
        for ( UIWebView* wv in g_webViewMapTable.keyEnumerator )
        {
            if ( wv != delegate)
                continue;

            id stringOrBlock = [g_webViewMapTable objectForKey: wv];

            if ( [stringOrBlock isKindOfClass: NSClassFromString( @"NSBlock" )] )
            {
                stringOrBlock = ((TSAlertTitleBlock)stringOrBlock)( wv, self.title );
            }

            NSParameterAssert( [stringOrBlock isKindOfClass: [NSString class]] );

            [self setTitle: stringOrBlock];
            break;
        }
    }
}

@end

@interface TSViewController () <UIWebViewDelegate>
@end

@implementation TSViewController

- (UIWebView*) webView
{
    return (UIWebView*) self.view;
}

- (void) loadView
{
    UIWebView* wv = [[UIWebView alloc] initWithFrame: CGRectMake(0, 0, 320, 480)];
    wv.delegate = self;
    wv.scalesPageToFit = YES;

    self.view = wv;
}

- (void) viewDidLoad
{
    [super viewDidLoad];

    // method 1: bind a title to a webview:
    [UIAlertView registerWebView: self.webView alertTitle: nil];

    /*
    // method 2: return a title each time it's needed:
    [UIAlertView registerWebView: self.webView
                 alertTitleBlock: ^NSString *(UIWebView *webView, NSString* defaultTitle) {

                     return @"Custom Title";
    }];
     */

    [self.webView loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString: @"http://www.craigslist.org"]]];
}

- (void) webViewDidFinishLoad: (UIWebView *) webView
{
    // trigger an alert
    [webView stringByEvaluatingJavaScriptFromString: @"alert('hello, world');" ];
}

@end 
```

**解决方案 3**：经过反思，这里有一个比我最初在解决方案 2 中描述的更简单的技术。它仍然取决于未记录的事实，即 javascript 警报是使用 UIAlertView 实现的，该 UIAlertView 的委托设置为源 UIWebView。对于此解决方案，只需子类化 UIWebView 并为 UIAlertView willPresentAlertView: 实现您自己的委托方法，并在调用它时将标题重置为您想要的任何内容。

```
@interface TSWebView : UIWebView
@end

@implementation TSWebView

- (void) willPresentAlertView:(UIAlertView *)alertView
{
    if ( [self.superclass instancesRespondToSelector: @selector( willPresentAlertView:) ])
    {
        [super performSelector: @selector( willPresentAlertView:) withObject: alertView];
    }

    alertView.title = @"My Custom Title";
}

@end

@interface TSViewController () <UIWebViewDelegate>
@end

@implementation TSViewController

- (UIWebView*) webView
{
    return (UIWebView*) self.view;
}

- (void) loadView
{
    UIWebView* wv = [[TSWebView alloc] initWithFrame: CGRectMake(0, 0, 320, 480)];
    wv.delegate = self;
    wv.scalesPageToFit = YES;

    self.view = wv;
}

- (void) viewDidLoad
{
    [super viewDidLoad];

    [self.webView loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString: @"http://www.craigslist.org"]]];
}

- (void) webViewDidFinishLoad: (UIWebView *) webView
{
    // trigger an alert
    [webView stringByEvaluatingJavaScriptFromString: @"alert('hello, world');" ];
}

@end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-24T14:25:33.053

不，您不能在 Javascript 警报中执行此操作。

但是，如果 Javascript 是您的，那么您可以调用一个调用 Objective C 的函数并调用 iOS 本机警报，而不是调用警报。

如果 Javascript 不是您的，那么使用 UIWebView 您可以注入一些 Javascript 来覆盖默认行为并将其更改为调用 iOS 本机警报，即类似这样

```
window.alert = function(message) {
  window.location = "myScheme://" + message"
}; 
```

然后在 UIWebView 的 shouldStartLoadWithRequest 中查找 myScheme 并提取消息

这是从 Javascript 调用 Objective-C 的标准方法

[如何从 Javascript 调用 Objective-C？](https://stackoverflow.com/questions/1662473/how-to-call-objective-c-from-javascript)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-25T17:32:34.833

对于它的价值，Phonegap/Cordova 提供了一个[navigator.notification.alert](http://docs.phonegap.com/en/edge/cordova_notification_notification.md.html#notification.alert)功能。它允许指定自定义标题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-01T19:43:09.787

只需为您的 UIWebView 创建一个类并在其中创建 willPresentAlertView (alertView: UIAlertView) 函数。在那之后，`alertView.title = "your fav title"`它就完成了。

```
 import UIKit

class webviewClass: UIWebView {

func willPresentAlertView(alertView: UIAlertView) {

    alertView.title = "my custum title"
}

} 
```

之后，当出现警报或确认并...显示时，您的自定义标题将显示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-25T06:05:05.317

离开@twk 写的内容，我只是覆盖了警报功能。在 ios7 上运行良好。

```
function alert(words){
var iframe = document.createElement("IFRAME");
iframe.setAttribute("src", 'data:text/plain,');
document.documentElement.appendChild(iframe);
window.frames[0].window.alert(words);
iframe.parentNode.removeChild(iframe);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-05T16:57:13.717

使用科尔多瓦插件对话框。它允许创建本机对话框。

下面的代码将创建本机警报：

```
navigator.notification.alert(message, alertCallback, [title], [buttonName]) 
```

# javascript - 运行脚本标签会阻止其他脚本标签下载吗？

> ID：10681388
> 
> 赞同：7
> 
> 时间：2012-05-21T07:56:00.507
> 
> 标签：javascript, html, optimization, script-tag

这是来自[HTML5 Boilerplate中的](https://github.com/h5bp/html5-boilerplate/blob/master/index.html)**index.html**，就在标签之前：`</body>`

```
<!-- JavaScript at the bottom for fast page loading: http://developer.yahoo.com/performance/rules.html#js_bottom -->

<!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.7.2.min.js"><\/script>')</script>

<!-- scripts concatenated and minified via build script -->
<script src="js/plugins.js"></script>
<script src="js/main.js"></script>
<!-- end scripts -->

<!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
     mathiasbynens.be/notes/async-analytics-snippet -->
<script>
  var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script> 
```

我知道脚本标签会阻止并行下载，这就是为什么[建议将它们放在底部的](http://developer.yahoo.com/performance/rules.html#js_bottom)原因。

**我的问题：**浏览器是否真的等待 jQuery 完全下载并执行，然后才开始下载`plugins.js`然后`script.js`？

或者它是否向前看并尽快（并行）开始*下载所有脚本，并且只是延迟每个脚本的**执行*，直到前一个脚本完成执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T07:58:13.243

> **我的问题**：浏览器是否真的等待 jQuery 完全下载并执行，然后才开始`plugins.js`下载`script.js`？

它可能会也可能不会，但可能不会；浏览器尝试（在限制范围内）并行下载以使页面加载速度更快。

> 或者它是否向前看并尽快（并行）开始下载所有脚本，并且只是延迟每个脚本的*执行*，直到前一个脚本完成执行？

对，因为[规范需要](http://www.w3.org/TR/html5/the-script-element.html#the-script-element)该部分（在没有`async`or`defer`属性的情况下）。正如您的示例所示，在脚本运行之前，它甚至不一定确定脚本应该运行的顺序，因为脚本可能会插入另一个脚本。但它可以下载它们并准备好它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T17:11:06.473

我发现这个细节更适合这个问题的答案，从[http://www.html5rocks.com/en/tutorials/speed/script-loading/](http://www.html5rocks.com/en/tutorials/speed/script-loading/)复制下面的内容，请参阅它以获取更多详细信息。

<script src="//other-domain.com/1.js"></script>

<script src="2.js"></script>

啊，幸福的简单。在这里，浏览器将并行下载两个脚本并尽快执行它们，保持它们的顺序。“2.js”在“1.js”执行之前不会执行（或未能执行），“1.js”在之前的脚本或样式表执行之前不会执行，等等。

不幸的是，当这一切发生时，浏览器会阻止页面的进一步渲染。这是由于“网络的第一个时代”的 DOM API 允许将字符串附加到解析器正在咀嚼的内容上，例如 document.write。较新的浏览器将继续在后台扫描或解析文档并触发下载它可能需要的外部内容（js、图像、css 等），但渲染仍然被阻止。

这就是为什么性能界的优秀人士建议将脚本元素放在文档的末尾，因为它会尽可能少地阻止内容。不幸的是，这意味着您的脚本在下载所有 HTML 之前不会被浏览器看到，并且此时它开始下载其他内容，例如 CSS、图像和 iframe。现代浏览器足够聪明，可以优先考虑 JavaScript 而不是图像，但我们可以做得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:49:39.773

HTML5 规范说：

> 如果两个属性 [即 async 和 defer] 都不存在，则在用户代理继续解析页面之前立即获取并执行脚本。

如果页面没有被解析，那么用户代理就无法知道哪些后续资源需要获取，因此严格遵守的浏览器在第一个资源实际执行之前应该无法获取更多资源。

要了解为什么这是有意义的，请想象第一个脚本包含

```
document.write("<!--"); 
```

如果没有匹配的注释闭包，那么标记中脚本后面的所有内容都将成为注释的一部分，直到`-->`遇到下一个。这可能会导致一个或多个资源引用被跳过。

# actionscript-3 - fzip：压缩文件占用全部内存

> ID：10681394
> 
> 赞同：0
> 
> 时间：2012-05-21T07:56:20.290
> 
> 标签：actionscript-3

我正在使用 fzip 压缩文件夹的内容。该文件夹包含 4 个 500MB 的文件，问题是这使用了我所有的计算机内存。有没有办法防止这种情况？并将内存锁定在 20% 还是什么的？

这是我的代码：

```
public function packageFileParser(filesToZip:Array):void {
            for (var i:uint = 0; i < filesToZip.length; i++) {
                if (filesToZip[i]["isDirectory"] == true) {
                    packageFileParser(filesToZip[i].getDirectoryListing());
                } else {
                    if (filesToZip[i]["isHidden"] == false) {
                        var byteLoader:UrlURLLoader = new UrlURLLoader();
                        byteLoader.dataFormat = URLLoaderDataFormat.BINARY;
                        byteLoader.addEventListener (flash.events.Event.COMPLETE, urlLoaderCompleteHandler);
                        var fileRequest:URLRequest = new URLRequest ("/"+filesToZip[i]["nativePath"]);
                        byteLoader.load (fileRequest);  
                    }
                }
            }
        }

        private function urlLoaderCompleteHandler(event:flash.events.Event):void {
            var saveZip : Function = function(zip : FZip) : void {
                var out : ByteArray = new ByteArray();
                zip.serialize(out);

                var fs : FileStream = new FileStream;
                targetFile = File.desktopDirectory.resolvePath(zipName);
                fs.open(targetFile, FileMode.WRITE);
                fs.writeBytes(out);
                out.clear();
                fs.close();
            };
            var fullpath:String = event.target.urlRequest.url;
            var filename:String = fullpath.substr(fullpath.lastIndexOf("/")+1,fullpath.length);
            var filepath:String = fullpath.substr(0,fullpath.lastIndexOf("/")+1);
            filepath = filepath.split("/Users/Thibaut/Desktop/testfolder").join("");
            zip.addFile(filepath+filename, event.target.data);
            saveZip(zip);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:18:32.047

AFAIK，FZip 库在内存中创建整个存档，然后将其保存到磁盘。除了更改库之外，您无能为力。试试**coltware**的 airxzip，它对我很有帮助（我认为即使在大型存档上也没有大的内存负载，因为它们在向它们添加文件时被刷新到磁盘。）
另外，如果您使用的是 AIR 功能（FileStream 类），您应该在问题中添加“air”标签，与普通 AS3 相比，它发生了很大变化。

# javascript - 如何使用 Jquery 在当前 URL 中发布 id？

> ID：10681399
> 
> 赞同：1
> 
> 时间：2012-05-21T07:56:54.173
> 
> 标签：javascript, jquery-ui, jquery, html-lists, sendkeys

我正在学习 j 查询，我想在当前 URL 中发送 id，然后 UL Li 在点击事件上发送当前 URL 中的 id 而无需刷新页面

**像这样：**

```
Current URL = localhost/backupapp-latest-21-05/index.php?r=site/Application<br>
send id url = localhost/backupapp-latest-21-05/index.php?r=site/Application&abcid=48 
```

有一个**abcid=48**是我的 UL Li id

试试这个代码：

```
$(document).ready(function(e) {
   $('#hari-ul > li').each(function(index, element) {

      $(element).click(function(e) {
         var id = (this.id);
         window.location.href  = "index.php?r=site/Application&abcid="+id;

      }
    });
  });
}); 
```

此代码在 URL 中发送 id 但页面刷新，我想要没有页面刷新的 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:17:09.693

试试这个方法：

```
$.ajax({
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

在此处查看示例：

[在这里检查](http://api.jquery.com/jQuery.get/)

或尝试这种方式：

```
$.get('path/to/yourfile.html', function(data) {
  //do something
}); 
```

# linux - 从命令输出循环和复制所有文件的脚本

> ID：10681402
> 
> 赞同：1
> 
> 时间：2012-05-21T07:57:06.147
> 
> 标签：linux, shell

我正在尝试这样的事情：

```
rpm -ql `rpm -qa | grep openssh-5` 
```

这列出了使用 openssh-5 rpm 安装的所有文件。

我希望将所有这些文件复制到一个文件夹：例如：myfolder

所以我试试这个：

```
cp ``rpm -ql `rpm -qa | grep openssh-5`` myfolder 
```

但它失败了。有什么出路，任何shell脚本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T07:59:15.480

你不能嵌套反引号。这应该工作：

```
cp $(rpm -ql $(rpm -qa | grep openssh-5)) myfolder 
```

另一种方法是：

```
rpm -qa | grep openssh-5 | xargs -d $'\n' rpm -ql | xargs -d $'\n' cp -t myfolder 
```

（这也处理包含空格的文件名。不会处理带有换行符的文件名...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:01:30.350

```
files=${rpm -ql `rpm -qa | grep openssh-5`};

while read file do
    cp $file "myfolder";
done < $files; 
```

也许？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:23:08.847

尝试

```
rpm -qla \*openssh-5\* | while read filename; do
    cp -a "$file" "$myfolder"
done 
```

. 请注意`""`考虑文件名中空格的变量周围的变量（诚然，这在 RPM 包中非常罕见 - 但并非不可能）。

还要注意`rpm -qla`使事情变得更容易的结构。

# android - 在android中发送带有标题的http帖子（此代码完美运行-我忘记将互联网权限放在清单文件中，这就是它不起作用的原因）

> ID：10681407
> 
> 赞同：0
> 
> 时间：2012-05-21T07:57:12.200
> 
> 标签：android, http, post, http-headers

我知道有一些关于这个主题的帖子，但我只能弄清楚我做错了什么。我必须通过邮寄一些参数到`php server`需要登录的 a 。

这是代码：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
String postUrl = "http://dev.demo.fr/Contacts/areaGet.php";

HttpHost targetHost = new HttpHost("dev.demo.fr", 80, "http");

httpclient.getCredentialsProvider().setCredentials(
    new AuthScope(targetHost.getHostName(), targetHost.getPort()),
    new UsernamePasswordCredentials("*****", "*****"));
HttpPost httppost = new HttpPost(postUrl);
try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
    nameValuePairs.add(new BasicNameValuePair("language_id", "1"));
    nameValuePairs.add(new BasicNameValuePair("country_id", "1"));
    nameValuePairs.add(new BasicNameValuePair("postal_code", "42830"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    response = httpclient.execute(targetHost, httppost);
} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}

System.out.println(response); 
```

**重要提示**：用户名和密码`uncoded`在这里：

```
httpclient.getCredentialsProvider().setCredentials(
    new AuthScope(targetHost.getHostName(), targetHost.getPort()),
    new UsernamePasswordCredentials("*****", "*****")); 
```

问题是当我这样做时：`System.out.println(response);` `it prints out null`我只是不知道为什么！！！！

谢谢您的回答！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:11:50.243

如果您从服务器收到响应“null”，则表示您的请求未成功发布在服务器上。

# c++ - 无法从初始化列表中的 lambda 推断类型

> ID：10681415
> 
> 赞同：4
> 
> 时间：2012-05-21T07:57:39.033
> 
> 标签：c++, lambda, functional-programming, c++11, initializer-list

```
#include <functional>
#include <iostream>

namespace{
//const std::function< void( const int ) > foo[] =
const auto foo[] =
{
  []( const int v ){ std::cout<<v<<std::endl; },
  []( const int v ){ std::cout<<v/2<<std::endl; },
  []( const int v ){ std::cout<<v/3<<std::endl; },
};

}

int main()
{
  foo[1](5);
} 
```

上面的示例无法编译（使用 g++ 4.6.1）并出现下一条错误消息：

```
error: unable to deduce 'const std::initializer_list<const auto> []' from '{{}, {}, {}}' 
```

注释行工作正常（不指定函数类型）。

这是 g++ 的怪癖吗？或者标准中有什么东西告诉上面不应该编译？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T08:02:18.663

你不能这样做。每个 lambda 都有一个唯一的、不相关的类型。如果你想要一个 lambdas 的集合，你必须用 擦除类型`std::function`：

```
std::function<void(int)> foo[] = {
    [](int) { ... },
    [](int) { ... },
    ...
}; 
```

即使在

```
auto f1 = []{};
auto f2 = []{}; 
```

这两种类型是不同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:55:32.447

除了其他人所说的具有唯一类型的 lambda 之外，您不允许`auto`在数组变量声明中用作说明符。即使以下内容也不正确

```
auto x[] = { 1, 2, 3 }; // 'auto' disallowed 
```

# javascript - 如何更改 Raphael JS 绘制的路径的宽度和高度？

> ID：10681418
> 
> 赞同：1
> 
> 时间：2012-05-21T07:57:42.187
> 
> 标签：javascript, svg, drawing, raphael, dimensions

我有路径，然后用[Raphael JS](http://raphaeljs.com/)绘制。代码如下所示：

```
var paper = Raphael($('#draw_here')[0], '32', '32');

var star = paper.path("M 22.137,19.625 32,12 20,12 16,0 12,12 0,12 9.875,19.594 6,32 16.016,24.32 26.008,32 z");

star.attr({
    fill: 'white',
    stroke: 'black',
    title: 'This is a STAAAAAAAR!'
}); 
```

它可以工作并且绘制 32 x 32 像素的大星星。**如何改变它的宽度和高度？**

我试图这样做：

```
var paper = Raphael($('#draw_here')[0], 64, 64);

var star = paper.path("M 22.137,19.625 32,12 20,12 16,0 12,12 0,12 9.875,19.594 6,32 16.016,24.32 26.008,32 z");

star.attr({
    fill: 'white',
    stroke: 'black',
    title: 'This is a STAAAAAAAR!',
    width: 64,
    height: 64
}); 
```

...但所有改变的是“纸元素”的宽度和高度，而不是星形的。

我想做的事情是当鼠标光标在它上面时，星星变大的效果。

感谢任何建议！

PS我自己没有写路径，它来自[Iconic set](https://github.com/somerandomdude/Iconic)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T08:19:56.293

你也必须调整路径！[只需在Raphaël Playground](http://raphaeljs.com/playground.html)上试一试。

width 和 height 属性只是要绘制的元素的大小，但路径坐标仍然相同。

**对于简单的调整大小，您也可以使用**

```
star.transform("s2"); 
```

像以前一样调整它的大小`2x`。

**如果不想编辑路径并简单地对其进行缩放**，则应使用该`transform`方法将其大小和`translate`完整路径调整一定值。

```
star.transform("t32,32 s2"); 
```

例如，这`32px`将从顶部和`32px`左侧移动对象并将其大小调整为`2x`与以前一样。

# wordpress - Wordpress 提要和帖子标题重复

> ID：10681423
> 
> 赞同：0
> 
> 时间：2012-05-21T07:57:56.693
> 
> 标签：wordpress, feed, title

我刚刚检查了提要标题和一些帖子标题，非常困惑。标题正在复制自己，如：网站标题 | 网站标题。这是提要的链接： [http ://www.dharamshalatravels.com/feed](http://www.dharamshalatravels.com/feed)

请让我知道任何解决方案。我检查了核心文件，这些文件没有问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:38:32.820

我通常会替换核心提要： [http](http://codex.wordpress.org/Customizing_Feeds) ://codex.wordpress.org/Customizing_Feeds 我通常会制作自定义模板并将其分配给页面。在自定义模板中，我将构建自己的 RSS。

标题由：`<title><?php bloginfo_rss('name'); wp_title_rss(); ?></title>` 这两个功能都可以过滤。

`add_filter('wp_title_rss','');`
和_`add_filter('bloginfo_rss','');`

一些模板或插件可能搞砸了。
添加您自己的过滤器以找出两者中的哪一个（如果不是两者？）搞砸了并应用您自己的过滤器。

# spring-security - Spring Security 的 Oauth2 模块支持哪些流程？

> ID：10681429
> 
> 赞同：0
> 
> 时间：2012-05-21T07:58:10.110
> 
> 标签：spring-security, oauth-2.0

我们想为基于 spring mvc 和 spring 安全的 Web 应用程序添加 Oauth2 支持，因此 oauth2 安全模块 (http://www.buynfctags.com/nfc-tags/stickers/printed-nfc-sticker-ntag.html ) 看起来很合适。

但究竟支持哪些流程？文档仅列出了 Web 服务器 flwo，但例如客户端和资源所有者密码流呢？它会开箱即用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:42:55.430

支持所有主要的 OAuth2 流程 - 授权代码、隐式、客户端凭据和密码。[github wiki](https://github.com/SpringSource/spring-security-oauth/wiki/oauth2)中有更多信息，您可能还想查看[命名空间模式](http://www.springframework.org/schema/security/spring-security-oauth2-1.0.xsd)`authorization-server`中的元素。

[CloudFoundry UAA 项目](https://github.com/cloudfoundry/uaa)是在实践中使用 Spring Security OAuth2的一个有用示例。

# .net - 如何保护与 WCF 服务的连接？Silverlight 使用 WsHttpBinding 使用 WCF 服务。

> ID：10681434
> 
> 赞同：1
> 
> 时间：2012-05-21T07:58:23.293
> 
> 标签：.net, wcf, silverlight, security, wshttpbinding

我被分配开发应该使用 WCF 服务的 silverlight 应用程序。该服务仅使用 WsHttpBinding 公开端点。

据我了解，在 silverlight 应用程序中无法使用此服务（WsHttpBinding 是否需要特殊的操作系统支持？）。

对服务的每次调用都有用户凭据作为其中的参数。

这是生成服务的配置如何查找 .Net 4 应用程序：

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IScheduleService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Transport">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="blahblah/Service.svc/ws"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IScheduleService"
            contract="ScheduleService.IScheduleService" name="WSHttpBinding_IScheduleService">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

抱歉，介绍太长了，这里有个问题。

Silverlight 世界中保护与 WCF 服务的连接的常见方法是什么？如何更改服务，以供silverlight客户端使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:30:27.217

最常见的方法是使用传输安全 (ssl) - 就像您使用此设置一样。这里唯一的问题可能是 wshttpbinding 期望客户端 soap 消息包含 silverlight 可能不支持的 ws-addressing 标头（使用 fiddler 或 wcf 日志记录检查它）。

我会说 - 如果您能够将服务更改为 basicHttpBinding 它是最好的。否则，您仍然可以这样做，但您需要手动将标头推送到肥皂消息中。编写一个工作肥皂客户端（winforms）并查看它发送的肥皂的外观。然后使用[silverlight 上的消息检查](http://blogs.infosupport.com/cookies-and-the-silverlight-client-http-stack/)器添加它。

# cocos2d-iphone - Cocos2d。在没有硬数学计算的情况下围绕另一个点旋转点？

> ID：10681436
> 
> 赞同：0
> 
> 时间：2012-05-21T07:58:26.187
> 
> 标签：cocos2d-iphone, rotation, geometry, angle

我还没有看到关于围绕指定点旋转的简单示例。我尝试了这样的事情，但它不起作用：

```
//CCNode *node is declared
//In a function of a subclass of CCSprite
- (void)moveWithCicrlce
{
anchorNode = [CCNode node];
anchorNode.position = ccpSub(self.position, circleCenter);
anchorNode.anchorPoint = circleCenter;
[anchorNode runAction:[CCRotateBy actionWithDuration:1 angle:90]];
[self runAction:[CCRepeatForever actionWithAction:[CCSequence actions:[CCCallFunc actionWithTarget:self selector:@selector(rotate)], [CCDelayTime actionWithDuration:0.1], nil]]];
}

- (void)rotate
{
self.position = ccpAdd(anchorNode.position, anchorNode.anchorPoint);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:48:34.813

以下是如何围绕半径（到 P 的距离）为 100 的某个点 P (50,50) 旋转节点（精灵等）的方法：

```
CCNode* center = [CCNode node];
center.position = CGPointMake(50, 50);
[self addChild:center];

// node to be rotated is added to center node
CCSprite* rotateMe = [CCSprite spriteWithFile:@"image.png"];
[center addChild:rotateMe];

// offset rotateMe from center by 100 points to the right
rotateMe.position = CGPointMake(100, 0);

// perform rotation of rotateMe around center by rotating center
id rotate = [CCRotateBy actionWithDuration:10 rotation:360];
[center runAction:rotate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:14:51.710

我的近似解决方案：

```
@interface Bomb : NSObject {
    CCSprite *center;
}

...

@end 
```

和一些方法：

```
- (void)explode
{
    BombBullet *bullet = [BombBullet spriteWithFile:@"explosion03.png"];
    [[[CCDirector sharedDirector] runningScene] addChild:bullet];

    center = [CCSprite spriteWithTexture:bullet.texture];
    center.position = explosionPoint;
    center.anchorPoint = ccp(-0.5, -0.5);
    center.visible = NO;
    [[[CCDirector sharedDirector] runningScene] addChild:center];
    [center runAction:[CCRotateBy actionWithDuration:1 angle:360]];

    CCCallFunc *updateAction = [CCCallFuncN actionWithTarget:self selector:@selector(update:)];
    [bullet runAction:[CCRepeatForever actionWithAction:[CCSequence actions:updateAction, [CCDelayTime actionWithDuration:0.01], nil]]];
}

- (void)update:(id)sender
{
    BombBullet *bombBullet = (BombBullet *)sender;
    bombBullet.rotation = center.rotation;
    bombBullet.position = ccpAdd(center.position, center.anchorPointInPoints);
    bombBullet.position = ccpAdd(bombBullet.position, ccp(-bombBullet.contentSize.width / 2, -bombBullet.contentSize.height / 2));
    bombBullet.position = ccpRotateByAngle(bombBullet.position, center.position, bombBullet.rotation);
} 
```

当然我应该添加精灵删除。

# mysql - MYSQL 中的 COUNT 查询

> ID：10681438
> 
> 赞同：0
> 
> 时间：2012-05-21T07:58:29.953
> 
> 标签：mysql, sql, group-by

我有这些关系：

`station`(station_id, 纬度, 经度)
`station_control_manager`(station_id, ctrl_unit_id)

问题

> 将中心城区的站点名称、编号和控制区总数制成表格，例如，纬度在 40.750 和 40.760 之间，经度在 -74.000 和 -73.95 之间。

这是我的查询

```
SELECT DISTINCT s.station_name, s.station_id, count 
FROM station s, 
   (SELECT cm.station_id, COUNT(cm.station_id) as count
    FROM stationcontrolmanager cm GROUP BY cm.station_id) sub_query
WHERE s.latitude >= 40.750 
  AND s.latitude <=40.760 
  AND s.longitude >= -74.000 
  AND s.longitude <= -73.95 
GROUP BY s.station_id; 
```

我通过分组`station_id`计数并计算它重复的次数（通过重复，我们知道它有多少控制区域）。

相反，我有这个： ![在此处输入图像描述](../Images/7ed50f54664511aa574dc22be940b85f.png)

计数应该是 的数量`ctrl_unit_id`，在这种情况下，它也是 的数量`station_id`。但在 DB 中，我数的是 7 行，而不是 2 行。

当然，站名都是正确的。

我的 SQL 语句有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:05:08.850

您可以在没有子查询的情况下执行此操作：

```
SELECT station.station_id, station_name, COUNT(ctrl_unit_id)
FROM station
LEFT JOIN station_control_manager ON station.station_id = station_control_manager.station_id
WHERE (latitude BETWEEN 40.750 AND 40.760) AND (longitude BETWEEN -74.000 AND -73.95)
GROUP BY station.station_id, station_name 
```

1.  由于您需要来自两个表的信息，因此您需要使用`station_id`
2.  您需要使用`LEFT JOIN`，因为一个站可能有零个控制管理器（RIGHT JOIN 将消除没有相应控制管理器记录的站记录）
3.  您需要`COUNT(ctrl_unit_id)`代替，`COUNT(*)`因为当站没有与之关联的控制单元时，后者将（仍然）返回 1。
4.  该`WHERE`条款是不言自明的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T08:08:04.530

试试这个：

```
SELECT a.station_ID, a.station_name, COUNT(b.station_ID)
FROM station a INNER JOIN station_control_manager b
        on a.station_ID = b.station_ID
WHERE  (a.latitude between 40.75 and 40.76) AND
       (a.longitude between -74.0 and -73.95)
GROUP BY a.station_ID 
```

通过对记录进行分组，现在可以省略`DISTINCT`关键字。

# image - 浏览器缓存和自定义图像例程

> ID：10681447
> 
> 赞同：3
> 
> 时间：2012-05-21T07:59:14.587
> 
> 标签：image, meta-tags, browser-cache

我使用 META-Tags 来“告诉”浏览器如何缓存我的网站。现在我只是想知道当我不直接插入图像而是通过以下方法插入图像时浏览器会做什么：

```
<img src="GetThumbnail.aspx?filenum=12"/> 
```

缓存会像普通图片一样在这里工作吗？页面缓存后会调用 GetThumbnail.aspx 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:57:51.430

自己测量。是：它将被缓存

# c# - nhibernate 选择 n 个随机唯一记录

> ID：10681450
> 
> 赞同：0
> 
> 时间：2012-05-21T07:59:28.213
> 
> 标签：c#, mysql, linq, sql-server-2008, nhibernate

这已经被问过很多次了，但我找不到一个确凿的答案。谁能帮忙

我希望能够使用 nhibernate 查询我的数据库（将是我的 sqlServer 和 mysql）以获得 X 行。这些数字必须是唯一的。我从 350 个中选择 250 个，所以我有重复的几率很高（因为随机并不意味着唯一）

这需要对 mysql 和 sql server 都有效。

因为我已经选择了超过 70% 的表，所以我不介意选择所有记录，并使用 LINQ 提取 250 个唯一值（如果可能的话）

任何对我的系统开销影响最小的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:45:18.980

您正在寻找不同的，在 .ToList(); 之前添加**.Distinct** **();**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:07:33.327

我想你已经回答了自己。

与针对 250 条记录的复杂随机化和分页查询相比，针对 350 条记录的全表查询对服务器造成的压力较小（通常通过将唯一标识符附加到内部查询中的行，然后使用它进行排序来完成。你可以t 用 LINQ 做到这一点）

您甚至可以缓存结果，然后每次在内存中随机化列表以获得 250 条不同的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:34:03.773

您可以使用 RAND() 或 NEWID() 对结果进行排序并选择前 250 个 - 结果将是不同的和随机的，就效率而言，这将比检索所有 350 个结果然后在代码中随机排序更有效 -如果您忽略缓存

但是，如果您确实缓存了结果，那么随着时间的推移，将 350 个结果检索到缓存中（最好使用 NHibernate 的二级缓存）然后使用类似的代码在代码中对它们进行排序可能会显着提高效率：

```
var rand = new Random();    
var results = Session.CreateCriteria<MyClass>()
   .SetCacheable(true)
   .List()
   .OrderBy(x => rand.Next()); 
```

# php - 循环没有写入正确的值

> ID：10681455
> 
> 赞同：3
> 
> 时间：2012-05-21T07:59:42.447
> 
> 标签：php, mysql, spreadsheet, spreadsheet-excel-writer

我有一个包含公司所有员工的表（hr_employees）。除了此表之外，还有另一个表，其中包含所有开始日期和结束日期，以及他们拥有的合同类型 (hr_employees_status)。

使用我得到的数据，我将 1 或 0（1 永久基于，0 其他）写入 Excel 电子表格，颜色编码由合同类型确定（1 = 黑色，0 = 蓝色、绿色、灰色或红色） , 每个月（从 2005 年 5 月至今）。我如何通过 case 子句确定哪个单元格中的内容，查看 hr_employee_status 表中的当前状态。

它可以正常循环，并且可以正确执行 99% 的操作。唯一的问题是，一旦员工从临时合同转为永久合同，它有时不会将正确的值写入单元格。

我已经稍微更改了代码，只从数据库中提取月份和年份（并将日期设置为 01），出于希望，因为月份和年份是写入单元格所需的全部内容，它会写正确单元格中的正确数据。但无济于事。

我不知道要发布什么代码，所以这里是确定合同类型并将其写入 excel 表的循环：

```
switch ($dates['status']) {
case '0':
    $color = 'blue';
    $cellcontent="0";
    break;
case '1':
    $color = 23;
    $cellcontent="0";
    break;
case '2':
    $color = 'black';
    $cellcontent="1";
    break;
case '3':
    $color = 'green';
    $cellcontent="0";
    break;
case '4':
    $color = 'red';
    if(mysql_num_rows($query) > 2)
        $cellcontent = "0";
    else {
        $cellcontent="1";
    }
    break;
}
if($s['state'] == '4')
    $color = 'red';
$format_content =& $workbook->addFormat(array('align' => 'center', 'size' => 11, 'numformat' => '@', 'fontfamily' => 'Calibri', 'left' => 1, 'bottom' => 1, 'right' => 1, 'color' => $color));
for($f = $start_at; $f <= $start_at+$count; $f++) {
    $totalmonths = $totalmonths + $cellcontent;
    $worksheet->write($k,15+$f,$cellcontent,$format_content);
} 
```

`$date`是从数据库收到的结果。 `$start_at`是员工开始使用合同类型的日期（从而确定要标记的月份）。 `$count`是开始日期和结束日期（月数）之间的差异。

我想知道为什么从临时合同转换为永久合同时它没有在正确的日期开始。

如果需要任何其他信息，请告诉我。

**编辑 1：** - 对 DaveRandom 和 Oleg 的反馈的回应

@DaveRandom： `hr_employees`看起来像这样：

```
------------------------------------------
|employee_id|name|surname|otherinfo|state|
|1          |Foo |Bar    | ******* |  1  |
|2          |Ben |Smith  | ******* |  1  |
------------------------------------------ 
```

`hr_employees_status`看起来像这样：

```
------------------------------------------
|employee_id|from_date |to_date   |status|
|1          |2006-07-12|2009-08-11|  0   |
|1          |2009-08-12|0000-00-00|  1   |
|2          |2009-07-01|0000-00-00|  1   |
------------------------------------------ 
```

然后excel表格将输出

```
Name      Surname     Start Date     *dates*  June-06  July06  ->- July09 Aug09 Sep09
Foo       Bar         2006-07-12              *empty*     0    ->-   0      1     1
Ben       Smith       2009-07-01              *empty*  *empty* ->-   1      1     1 
```

@Oleg

1.  `$start_at`如下：

    ```
    round(((substr($dates['from_date'],0,4) * 12) + substr($dates['from_date'],5,2)) - ((substr($start_date,0,4) * 12) + substr($start_date,5,2))) + 1;
    // $dates is a loop through the hr_employee_status table 
    ```

2.  看上面。`$dates`是通过 hr_employee_status 表的循环。我 100% 确定该状态在那里。

3.  请解释类型杂耍？status 中的所有值都是 varchar （不要问我为什么，现在看，这似乎是一件愚蠢的事情......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:27:50.837

我们遗漏了您代码的一些关键部分，所以在您提供更多详细信息之前（例如，您能告诉我们您定义`$start_at`的位置吗？）我只能猜测......

1.  您问“为什么它没有在正确的日期开始”，但您从未提供`$start_at`定义的代码。它可能对我们有用。
2.  你干嘛`switch`呢`$dates['status']`？你确定它在`$dates`？
3.  该`switch`语句比较类型杂耍后的值...

[来自 php.net 的示例](http://php.net/manual/en/language.operators.comparison.php)：

```
switch ("a") {
case 0:
    echo "0";
    break;
case "a": // never reached because "a" is already matched with 0
    echo "a";
    break;
} 
```

这可能是您的情况，您的永久合同状态 1`switch statement`由于不正确的类型`$dates['status']`使其停止在`case '0':`.

尝试使用`var_dump()`来查看您在代码中操作的变量的确切类型和值。

# google-app-engine - 任务队列存储的任务字节配额何时重置？

> ID：10681457
> 
> 赞同：1
> 
> 时间：2012-05-21T07:59:49.737
> 
> 标签：google-app-engine, task-queue

现在有几天——甚至可能是几周，因为我没有在日历中标记它；）——我对任务队列存储的任务字节配额的使用率很高，我想知道该怎么做，或者要等多长时间才能释放它。

我的任务队列几乎是空的，它们可以做一些事情，但不能证明高使用率是合理的。我有一段时间进行架构迁移工作，由于错误是任务分叉炸弹，高使用率是合理的（见底部）。

在[推送队列的配额和限制](https://developers.google.com/appengine/docs/python/taskqueue/overview-push?hl=pl#Quotas_and_Limits_for_Push_Queues)中写道：

> 执行或删除任务后，将回收该任务使用的存储空间。任务的存储配额的回收是定期发生的，这可能不会在任务被删除后立即反映在存储配额中。

那么这些定期间隔是多长时间？什么时候之后我应该担心？在什么时间之后提交[生产问题](http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue)是合理的？

> 如果推送任务创建成功，最终会被删除（最多在任务成功执行后 7 天）。删除后，其名称可以重复使用。

如前所述，我们有一个任务分叉炸弹，但在发现它之后清除了队列。这可能是原因吗？那么如何从清除队列中清除数据以回收配额？

[任务名称](https://developers.google.com/appengine/docs/python/taskqueue/overview?hl=pl#Task_Names)应该将使用过的名称锁定 7 天，但我确信叉形炸弹发生的时间比 7 天前还要多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T00:58:39.777

在大多数情况下，存储将在一天内回收。

如果存储配额在几天后仍未回收，您应该使用您的应用程序名称提交生产问题。

# c# - 如何将选定的项目保存在临时内存中？

> ID：10681458
> 
> 赞同：1
> 
> 时间：2012-05-21T07:59:51.000
> 
> 标签：c#, asp.net, .net, caching, ext.net

我想在单击保存按钮之前从 gridview 临时内存中添加项目。不添加数据库。用户添加绿色右箭头。我正在使用 Ext.NET

加入购物车（内存显示gridview） 加入购物车（内存显示gridview） 加入购物车（内存显示gridview）

然后将按钮保存到数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:34:21.137

我认为这可以帮助您在 MVC 应用程序中使用 Session，在 global.asax 中试试这个：

```
protected void Session_Start()
{
    HttpContext.Current.Session.Add("superadmin", user);
} 
```

然后在您的任何控制器中：

```
user = HttpContext.Session["superadmin"]; 
```

答案来自这里：[http ://forums.asp.net/t/1622898.aspx/1?MVC+amp+Session+Variables](http://forums.asp.net/t/1622898.aspx/1?MVC+amp+Session+Variables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:35:33.233

您可以将请求的数据保留在 SQL 数据库中，也可以使用某种私有静态`Dictionary<Request, Cart>`。

# forms-authentication - 如何让 ImageResizer 忽略 ASP.NET 表单身份验证规则？

> ID：10681460
> 
> 赞同：2
> 
> 时间：2012-05-21T07:59:55.723
> 
> 标签：forms-authentication, webforms, imageresizer

我们正在构建一个使用表单身份验证保护的 Web 应用程序。在某个页面上，我们有一个缩略图列表。这些缩略图是使用 ImageResizer 生成的，如下所示：

```
<img src="/Data/Pictures/image01.jpg?width=100" /> 
```

在使用 Visual Studio 2010 的内置 Web 服务器进行开发期间，这一切都运行良好。当我们将应用程序部署到我们的生产服务器（运行 Windows 2008 和 IIS 7.5）时，我们注意到缩略图不再工作了。当将我们的开发版本切换到 IIS Express 而不是 Cassini 时，我们遇到了同样的问题。

1.  直接导航到`/Data/Pictures/image01.jpg`时（登录时），我们可以看到图像。

2.  直接导航到`/Data/Pictures/image01.jpg?width=100`（登录时）时，我们会收到以下错误消息：

    > # “/”应用程序中的服务器错误。
    > 
    > ### 不提供此类页面。
    > 
    > **说明：**您请求的页面类型未提供服务，因为它已被明确禁止。扩展名“.jpg”可能不正确。请查看下面的 URL 并确保其拼写正确。
    > 
    > **请求的网址：** /Data/Pictures/image01.jpg

3.  直接导航到`/Data/Pictures/image01.jpg.ashx?width=100`时（登录时），我们可以看到调整大小的图像。

该问题的解决方法是从表单身份验证中排除图片目录，如下所示：

```
<location path="Data/Pictures">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location> 
```

现在缩略图再次可见，但我觉得这个解决方法不太正确。

我已经[在 ImageResizer 的网站](http://imageresizing.net)上提交了一张支持票，并询问为什么没有查询字符串的图像可以工作，而带有查询字符串的图像则不能。ImageResizer 的作者回复并告诉我：

> 因为 ImageResizer 不处理未处理的图像，所以由 IIS 处理。您需要复制规则以保护静态内容：[http ://www.iis.net/ConfigReference/system.webServer/security/authorization](http://www.iis.net/ConfigReference/system.webServer/security/authorization)

我已阅读该页面，并尝试将我们的身份验证和授权设置复制到`<security>`内部元素，`<system.webServer>`但我无法以这种方式解决它。

我们能做些什么来解决这个问题？

# 更新

我已将应用程序部署到我们的两台生产服务器，它们都有相同的问题。我们在 IIS Express 中的两台开发人员机器上也遇到了问题。我们的生产服务器在配置上不一定相同（我不确定这一点，但我认为必须有一些细微的差异）。所以我猜（实际上，我希望 :-)）原因可以在下面的 Web.Config 文件中找到：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="MyApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
        <section name="resizer" type="ImageResizer.ResizerSection" />
        <section name="dotless" type="dotless.Core.configuration.DotlessConfigurationSectionHandler, dotless.Core" />
    </configSections>
    <connectionStrings>
        <add name="MyAppContext" connectionString="xxx" providerName="System.Data.SqlClient" />        
    </connectionStrings>
    <system.web>
        <pages validateRequest="false" />
        <httpRuntime requestValidationMode="2.0" />
        <globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="nl-BE" uiCulture="nl-BE" />
        <authentication mode="Forms">
            <forms loginUrl="~/Default.aspx" timeout="480" />
        </authentication>
        <authorization>
            <deny users="?" />
        </authorization>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
    <entityFramework>
        <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
            <parameters>
                <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
            </parameters>
        </defaultConnectionFactory>
    </entityFramework>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="Yahoo.Yui.Compressor" publicKeyToken="f8b4b81ec75097e2" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-1.7.1.0" newVersion="1.7.1.0" />
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="AjaxMin" publicKeyToken="21ef50ce11b5d80f" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-4.51.4507.18296" newVersion="4.51.4507.18296" />
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="dotless.Core" publicKeyToken="96b446c9e63eae34" culture="neutral" />
                <bindingRedirect oldVersion="0.0.0.0-1.3.0.3" newVersion="1.3.0.3" />
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
    <system.webServer>
        <validation validateIntegratedModeConfiguration="false" />
        <modules>
            <add name="ImageResizingModule" type="ImageResizer.InterceptModule" />
        </modules>
        <handlers>
            <add name="dotless" path="*.less" verb="GET" type="dotless.Core.LessCssHttpHandler,dotless.Core" resourceType="File" preCondition="" />
        </handlers>
    </system.webServer>
    <location path="Assets">
        <system.web>
            <authorization>
                <allow users="*" />
            </authorization>
        </system.web>
    </location>
    <location path="Data/Pictures">
        <system.web>
            <authorization>
                <allow users="*" />
            </authorization>
        </system.web>
    </location>
    <dotless minifyCss="false" cache="true" web="false" />
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T23:16:16.070

ImageResizer 旨在与 IIS 5、IIS 5.1、IIS 6、IIS 7、IIS 7.5、Cassini 和 IIS Express 的默认安装中的 ASP.NET URL 授权正确集成。

但是，在 IIS7 和 IIS 7.5 上至少有十几种可用的排列。您可以选择性地安装或卸载（以及启用或禁用）IIS 6 Legacy、IIS 7、ASP.NET 2 和 ASP.NET 4 Url Authorization 模块。并且有集成模式或经典模式。在经典模式下，它都是基于扩展的，这意味着它们可以被定制或者[可以有通配符映射](http://imageresizing.net/docs/cleanurls)。然后是 RAMMFAR 属性[RunAllManagedModulesForAllRequests](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)。此外，您可以在几个单独的 UrlAuthorizationModule 上设置先决条件，以控制它们执行的扩展。这些变量中的每一个都会影响 4 个 URL 授权引擎中的哪一个控制哪些文件类型，并且**这些变量中的一个或多个设置错误**。

现在，在全新安装时，ImageResizer 可以确保一切都得到正确处理；所有图像都遵循 ASP.NET 规则，遵循 ASP.NET 身份验证和授权规则。但是有很多方法弄乱了 Url Authorization，并且不知道在 IIS 中安装和启用了哪些模块，也没有看到 Web.config 的完整副本，我不知道为什么 ASP.NET UrlAuthorization 没有得到一致地应用。

**ImageResizer 的行为极简——除非图像具有查询字符串，并且该查询字符串已识别命令，否则 ImageResizer 不会对其执行任何操作。**因此，只有经过处理的图像被“强制”遵循 ASP.NET 网址授权规则。

默认情况下，假设您在集成模式下运行，未触及的请求（没有查询字符串命令）也应该遵循 ASP.NET 规则。但是，**您**的安装或配置有问题。“不提供此类页面。” 是 IIS 的已知 403 消息，但它通常也意味着配置不正确。静态文件不遵循 ASP.NET 规则的事实是配置问题的另一个指标。

验证它是 OS/IIS 配置问题的一种简单方法是启动一个[labslice](http://labslice.com)虚拟机（仅花费四分之一），然后将您的软件放在那里。如果您再次看到问题，您就知道它在 Web.config 中。如果不是，则为 IIS/Machine.config 或操作系统级别。

您已经说明了一种解决方案 - 为图像添加 URL 授权例外，因此 ImageResizer 不需要身份验证来显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-27T12:55:47.573

我有类似的问题：Image Resizer 在本地运行良好，但在服务器上运行良好。这是因为该项目使用了经典管道。我的解决方案：添加这个 Web.config

```
 <resizer>
    <pipeline fakeExtensions=".axd" defaultCommands="autorotate.default=true"/>
    <plugins>
      <add name="DiskCache" />
      <add name="PrettyGifs" />
      <add name="MvcRoutingShim" />
    </plugins>
  </resizer>
..
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules>
      <!-- This is for IIS7/8 Integrated mode -->
      <add name="ImageResizingModule" type="ImageResizer.InterceptModule"/>
    </modules>
  </system.webServer> 
```

并将其添加到图像链接中：

```
+ ".axd?height=165&width=297&mode=crop"; 
```

# c++ - C++/Qt (Windows) 的报告生成器

> ID：10681463
> 
> 赞同：2
> 
> 时间：2012-05-21T08:00:11.467
> 
> 标签：c++, qt, pdf, report

我有一个为 Windows 编写的 un C++/Qt 程序，它以 pdf 格式打印一些图形和 HTML 格式的一些其他数据。

我需要将所有内容一起打印成一个 PDF，一个单一文件的报告。

我已经寻找了一些类似于 Crystal 报表的库，但我只找到了付费的，我需要一个免费的开源解决方案。我终于找到了[RTK 报告](http://reports.sourceforge.net/index.php)，但它看起来只能在 UNIX 上运行。

有什么图书馆或不同的解决方案可以满足我的需求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:37:12.060

您可能想查看 Qt 在 4.7 和 4.8 版本中内置的内容。从[Qt 4.8：使用 Qt 打印](http://doc.trolltech.com/main-snapshot/printing.html)，有一个小花絮“Qt 的打印系统还可以生成 PostScript 和 PDF 文件......” [QPrinter 类](http://doc.trolltech.com/main-snapshot/qprinter.html)支持几种不同的[输出格式](http://doc.trolltech.com/main-snapshot/qprinter.html#OutputFormat-enum)，包括 PDF。

免责声明：我没有玩过 Qt 的这一部分，所以 YMMV。

# java - SocialAuth java 库未按预期工作（使用 NetBeans）

> ID：10681465
> 
> 赞同：1
> 
> 时间：2012-05-21T08:00:23.307
> 
> 标签：java, facebook, servlets, netbeans, socialauth

我正在尝试运行 socialauth spring 示例（http://code.google.com/p/socialauth/wiki/SpringSample），但是当我尝试与 Facebook 连接时，来自 SuccessController.java 的 socialAuthTemplate.getSocialAuthManager() 调用返回空值。我无法进行任何调试以找出我做错了什么，因为它是来自 sociaauth.jar 的函数，我无权访问它的代码。以前有人遇到过这个问题吗？我应该怎么办？我唯一的猜测是我没有正确配置项目（我没有包含一些库或smth）。我正在使用netbeans。

这是代码：

```
@Controller
public class SuccessController {

    @Autowired
    private SocialAuthTemplate socialAuthTemplate;

    @RequestMapping(value = "/authSuccess")
    public ModelAndView getRedirectURL(final HttpServletRequest request)
                    throws Exception {
            ModelAndView mv = new ModelAndView();
            List<Contact> contactsList = new ArrayList<Contact>();
            SocialAuthManager manager = socialAuthTemplate.getSocialAuthManager();     //returns null
            AuthProvider provider = manager.getCurrentAuthProvider();
            contactsList = provider.getContactList();
            if (contactsList != null && contactsList.size() > 0) {
                    for (Contact p : contactsList) {
                            if (!StringUtils.hasLength(p.getFirstName())
                                            && !StringUtils.hasLength(p.getLastName())) {
                                    p.setFirstName(p.getDisplayName());
                            }
                    }
            }
            mv.addObject("profile", provider.getUserProfile());
            mv.addObject("contacts", contactsList);
            mv.setViewName("/jsp/authSuccess.jsp");

            return mv;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:04:37.953

你能在你的 spring 配置文件中验证 socialAuthTemplate 类的范围吗？它应该具有会话范围。

```
 <bean id="socialAuthTemplate" class="org.brickred.socialauth.spring.bean.SocialAuthTemplate" scope="session">
    <aop:scoped-proxy/>
</bean> 
```

如果您需要 socialauth 的代码库，您可以从以下位置下载 socialauth-java-sdk-2.3.zip 文件。它包含所有源代码以及示例。

[http://code.google.com/p/socialauth/downloads/list](http://code.google.com/p/socialauth/downloads/list)

# eclipse - Ecore TreeIterator 缺少根对象

> ID：10681466
> 
> 赞同：1
> 
> 时间：2012-05-21T08:00:26.100
> 
> 标签：eclipse, eclipse-emf

我有以下问题：我想使用 TreeIterator 遍历我的 Ecore 模型。

但是，根元素总是被跳过，有没有办法在 TreeIterator 循环中获取 RootElement ？

```
EPackage rootElement = (EPackage) EcoreUtil.getRootContainer(model);
for (TreeIterator iter = EcoreUtil.getAllProperContents(rootElement, true); iter.hasNext();) {
EObject element = iter.next()... // I want the root element to be the first element here! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T04:30:06.067

尝试这个：

```
Resource res = model.eResource();
TreeIterator<EObject> allContents = res.getAllContents(); 
```

# oracle - 在基于日期的选择语句中获取oracle中的自定义线性唯一ID

> ID：10681467
> 
> 赞同：1
> 
> 时间：2012-05-21T08:00:26.810
> 
> 标签：oracle, datetime

我有一个这样的 oracle 表。

![在此处输入图像描述](../Images/b79074b9b1ff678161d2deac749258dc.png)

我想在选择语句中获取格式为 Mon-YY/唯一编号的自定义唯一 ID

结果看起来像（参见 UNIQUEORDERID 列）

![在此处输入图像描述](../Images/4fe5e72092c3357ef06a61fe5f25bc32.png)

是否可以在 select 语句中实现结果？请帮我写查询。

谢谢，萨贾德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:11:12.087

试试这个 -

```
SELECT REQUEST_ID,
       NAME_OF_TRAINING,
       APPLIED_DATE,
       to_char(APPLIED_DATE,'MON-YY') || '/' || ROW_NUMBER over (partition by to_char(APPLIED_DATE,'MON-YY') order by to_char(APPLIED_DATE,'MON-YY')) AS UNIQUEORDERID
FROM tablename; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:24:44.617

```
SELECT request_id,
       name_of_training,
       applied_date,
       to_char(applied_date,'MON-YY') || 
               '/' || 
               to_char(row_number() over (partition by to_char(applied_date,'MON-YY'), '000')
               ) AS UNIQUEORDERID
FROM tablename; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:07:04.893

```
select a.*,to_char(a.applied_date,'MON-YY')||a.request_id UNIQUEORDERID
from table_name a; 
```

**编辑** 将此转换为您的数据

```
select object_name
,to_char(created,'MON-YY')||'/'||row_number() over (partition by to_char(created,'MON-YY') order by to_char(created,'MON-YY'))
from user_objects; 
```

# facebook - iframe 中的 Facebook 推荐框：网址无效

> ID：10681468
> 
> 赞同：4
> 
> 时间：2012-05-21T08:00:27.433
> 
> 标签：facebook

我在[这里](https://developers.facebook.com/docs/reference/plugins/recommendations/)创建 Facebook 推荐框。
域是“http://www.mydomain.co.il/”。例如（“http://www.sport5.co.il/”）
我可以在右侧看到正确的框，但是当我单击“获取代码”并选择“IFRAME”时，我收到以下消息：“有效的 url使用 iframe 实现时需要。"
你也可以试试。
这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T06:02:32.360

它仍然不起作用，所以我自己构建了 iframe 标签：

```
 <iframe src="http://www.facebook.com/plugins/recommendations.php?  
       site=mydomain.co.il&width=300&height=300&header=  
       false&colorscheme=light&locale=he_IL"   
       scrolling="no" frameborder="0" allowTransparency="true">
    </iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T06:56:19.057

您可以使用这种格式来创建 Facebook 推荐框

```
<iframe scrolling="no" style="border: medium none; overflow: hidden; height: 400px; width: 236px;" src="http://www.facebook.com/plugins/recommendations.php?action=like&appId=123456789&border_color=%23ececec&font=tahoma&header=true&height=400&linktarget=_blank&locale=en_US&site=http%3A%2F%2Fwww.domainname.com&width=236"></iframe> 
```

# objective-c - SubView willAnimateRotation 方法没有被调用

> ID：10681471
> 
> 赞同：0
> 
> 时间：2012-05-21T08:00:43.107
> 
> 标签：objective-c, orientation

我有一个 UIViewController 作为根 UIView 的程序。

我已经向它添加了一个子视图。

当我将 WillAnimateRotation 赋予主视图和子视图时。

只调用了 Root UIViewController WillAnimateRotation，而没有调用子视图 WillAnimateRotation。

有什么解决办法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T04:09:51.123

最简单的解决方案是将消息从您的根`UIViewController`传递到`UIViewController`您的子视图：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    // you can do some extra stuff here if you like
    [_mySubviewsViewController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
} 
```

请记住，此方法仅适用于`UIViewController` **not** `UIView`。

# ajax - Ajax vs Comet（不是聊天应用程序）

> ID：10681475
> 
> 赞同：2
> 
> 时间：2012-05-21T08:01:11.470
> 
> 标签：ajax, comet

我开发了一个基于 Web 的应用程序，其中登录用户应该每 3 秒向服务器发送一条消息，告诉他他仍然在线。然后由服务器处理该消息，并在 Mysql 中调用一个存储过程将用户的状态设置为在线。我已经研究过比较 Comet 和 Ajax 的类似问题（[此处](https://stackoverflow.com/questions/2182052/comet-vs-ajax-for-chatting)或[此处](https://stackoverflow.com/questions/2975290/comet-vs-ajax-polling)），但考虑到 3 秒延迟是可以接受的，并且系统中最多有 1000 个用户在线，使用 Ajax 是明智的选择还是应该使用 Comet ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:19:58.447

对于彗星这种特征比较合适：

*   您的客户发送消息（我在线）
*   您的服务器**广播**处理后的消息（用户 X 仍然在线）

以 ajax 方式，您只向服务器提供消息。

为了以ajax方式获得“广播效果”。你最终会做一些类似于彗星的事情，但带宽效率较低。

阿贾克斯：

*   客户端发送服务器 - 我在
*   服务器进程
*   服务器发送回用户的客户端列表。

在这种情况下，每个客户端每 3 秒向数据库询问一次**COMPLETE** “in”列表。

在彗星中：

*   客户端 X 发送服务器 - 我在
*   服务器进程
*   **服务器向客户端S**发回用户 X 仍然在线

在这种情况下，每个客户端每 3 秒告诉服务器他在其中。服务器**仅**向每个连接的客户端发回x 仍在

Comet 只是一种将消息广播回来并将消息推送到客户端的技术 Ajax 是一种无需刷新所有页面即可将客户端信息推送到服务器的技术。

引用维基百科： [http ://en.wikipedia.org/wiki/Comet_%28programming%29](http://en.wikipedia.org/wiki/Comet_%28programming%29)

Comet 还有其他几个名字，包括**Ajax Push**、 **Reverse Ajax**、Two-way-web、HTTP Streaming 和 HTTP server push 等。

所以去彗星吧:)

如果你不广播任何东西，那么简单的 Ajax 是最好的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:36:59.050

In this particular case, since you do not need to send any information from the server to the client(s), I believe Ajax is the more appropriate solution. Every three seconds, the client tells the server it is connected, the database is updated, and you're done.

It could certainly be done using Comet, in which case you would basically ping each registered client to see if it is still connected. But, you would still need to run a query on the database for each client that responds, plus you would still need the client to notify the server on its initial connection. So, it seems to me that Comet would be more trouble than it's worth. The only thing that might make sense is if you could ping each registered client and store the responses in memory, then once all clients have been pinged you can run one single query to update all of their statuses. This would give you the added bonus of knowing as soon as a client disconnects as opposed to waiting for a timeout. Unfortunately, that is beyond the scope of my expertise with Comet so, at this point, I can't help to actually implement it.

# string - 方案：解析字符串

> ID：10681478
> 
> 赞同：3
> 
> 时间：2012-05-21T08:01:16.680
> 
> 标签：string, list, scheme

我想将字符串转换`"(1 2 3 4)"`为列表`(1 2 3 4)`。
如何使用 Scheme 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:57:11.737

`read`您可以通过将字符串转换为“输入端口”（打开以供读取的文件的抽象）来使用内置函数：

```
(read (open-input-string "(1 2 3 4)")) ;; evaluates to (1 2 3 4) 
```

这在 Guile 和 Racket 中都有效。根据您的 Scheme 实现，您可能还需要导入[SRFI-6](http://srfi.schemers.org/srfi-6/srfi-6.html)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:39:00.283

查看 Racket 中的指南：

[http://docs.racket-lang.org/guide/read-write.html?q=read](http://docs.racket-lang.org/guide/read-write.html?q=read)

# cakephp - Cakephp 中的 Paypal 集成

> ID：10681489
> 
> 赞同：1
> 
> 时间：2012-05-21T08:02:06.053
> 
> 标签：cakephp, paypal, cakephp-2.0

我真的似乎做不到。我很沮丧地学习了近三天，但我仍在努力。我实际上想要发生的是：

客户填写订单

填写完毕后，他会点击我页面底部的“立即购买”按钮。

我想提取用户从订单中输入的数据并将其保存到数据库中。

不知道它是否与 IPN 或 PDT 的东西有关。关键是我现在三天都不能前进。我想知道这可能是如何开始的，我实际上可以用它做什么的伪代码？

我的意思是我可以从哪里开始。好的，我下载了插件并将其解压缩到/app/Plugin/中，然后呢？我已经阅读了手册并尝试了各种教程，但它并没有让我到任何地方。我完全是一个初学者。请帮忙。

* * *

这是我正在做的更新。

我收到了这个错误：

```
Error: PaypalIpn.PaypalHelper could not be found.

Error: Create the class PaypalHelper below in file: C:\xampp\htdocs\wifidrivescanportal\app\Plugin\paypal_ipn\View\Helper\PaypalHelper.php

<?php
class PaypalHelper extends AppHelper {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:22:59.343

既然您说这是 cake 2.x，请确保您的插件已加载：

[http://book.cakephp.org/2.0/en/plugins.html#installing-a-plugin](http://book.cakephp.org/2.0/en/plugins.html#installing-a-plugin)

从 cake 2.0 开始，插件需要这个才能工作。此外，请确保您使用的插件是为 Cake 2.x 版本制作的，而不是更早的版本，因为它们不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T21:42:53.827

这是因为您没有配置全局引导程序。将以下行添加到您的 cakephp/app/Config/bootstrap.php 中，它应该可以工作！

```
CakePlugin::load('PaypalIpn', array('bootstrap' => array('paypal_ipn_config'), 'routes' => true)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:44:07.940

你没有提到你的蛋糕版本——你总是应该提到的。但我认为它是 2.x

那么你为什么不在约定之后命名你的插件呢？paypal_ipn 应该是 PaypalIpn

# iphone - 是自我释放，释放的实际对象吗？

> ID：10681491
> 
> 赞同：1
> 
> 时间：2012-05-21T08:02:14.747
> 
> 标签：iphone, objective-c, ios, singleton

我有一个单例类，它在整个项目中只分配一次。下面有几行代码..

宣言... ....

```
MyClassName *classObject = nil 
```

在 init 方法中，代码如下所示。

```
-(id) init(){
    self = [super init];

    if(classObject == nil){

        1\. Allocate object code here
        2\. classObject = self;
        3\. return classObject
     } else {
        return classObject;
     }
} 
```

但我的问题是我将如何释放这个对象。我从所有类中调用这个 init 方法，它每次都返回 classObject 引用。

我的做法……

从 appdelegate.m 中的 dealloc 方法，我正在调用一个在 MyClassName 中定义的函数 (releaseObject)。这是函数体的定义......

```
 -(void) releaseObject {

    [self release]; // Confusion: Will it dealloc classObject reference?
    [super release];

} 
```

这是个好主意吗？我的问题是在应用程序没有关闭之前我不必释放对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:26:50.273

答案是永远不要发布单例。无论如何，它应该会持续应用程序的生命周期，并且会在进程终止时与其他所有内容一起自动消失。你可能会发现你的应用程序委托上的 dealloc 方法永远不会因为同样的原因被调用。

如果您在应用程序关闭时需要清理，最好将其移至单独的方法中，并在应用程序即将终止时调用它。

* * *

单例 IMO 的一个更简单的模式是有一个类方法来返回单例实例，而不是在 init 中释放东西。

```
+(MyClass*) sharedInstance
{
    static MyClass* theInstance = nil;
    static dispatch_once_t pred;
    dispatch_once(&pred, ^{ theInstance = [[MyClass alloc] init]});
    return theInstance;
} 
```

以上用于`dispatch_once`确保初始化块在应用程序的生命周期中只发生一次。您仍然可以通过`init`直接调用来创建其他实例，但这是 IMO 的优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:10:40.503

我建议在你的单例中创建一个额外的类方法：

```
static MyClassName *classObject = nil;
...
+ (MyClassName *)sharedInstance {
...
}

+ (void)releaseSharedInstance {
  [classObject release];
  classObject = nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:05:23.310

如果您的班级是单身人士，则在 AppDelegete dealloc 中只需调用

```
[[YourClass instance] release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T09:43:28.590

这是通过Objective C ++的解决方法：

```
class StaticOwner {
private:
    id<NSObject> object;
public: 
    StaticOwner(id<NSObject> obj) { object = [obj retain];  }
    ~StaticOwner() { [object release]; }
    id<NSObject> instance() {return object;}
}; 
```

使用示例：

```
+ (MySingleton*) sharedInstance {
    static StaticOwner owner = StaticOwner([[[MySingleton alloc] init] autorelease]);
    return owner.instance();
} 
```

# asp.net-mvc - ASP.NET MVC 文化更改日期时间格式

> ID：10681504
> 
> 赞同：4
> 
> 时间：2012-05-21T08:03:13.650
> 
> 标签：asp.net-mvc, globalization, datetime-format

我有一个带有 EF 项目的 ASP.NET MVC 4。当用户登录时，我正在更改当前的线程文化。 Global.asax.cs

```
protected void Application_BeginRequest(object sender, EventArgs e)
    {           
        CultureInfo objculture = new CultureInfo(Helios.MvcApplication.Lang); //Lang = en-US, ro-RO, fr-FR

        //DateTimeFormatInfo objDTFI = objculture.DateTimeFormat;
        //objDTFI.ShortDatePattern = "dd.MM.YY";
        //objDTFI.DateSeparator = ".";
        //objculture.DateTimeFormat = objDTFI;

        objculture.NumberFormat.CurrencyDecimalSeparator = ".";
        objculture.NumberFormat.NumberDecimalSeparator = ".";

        Thread.CurrentThread.CurrentUICulture = objculture;
        Thread.CurrentThread.CurrentCulture = objculture;   
    } 
```

DateTime.cshtml //我的日期时间的EditorTemplate

```
@model System.DateTime?
@Html.TextBox("", String.Format("{0:d}", Model.HasValue ? Model : DateTime.Today), new { @class = "datefield" })

<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.20/themes/base/jquery-ui.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.20/jquery-ui.min.js" type="text/javascript"></script>

<script  type="text/javascript">
$(function () {
    $(".datefield").datepicker({
        changeMonth: true, changeYear: true, firstDay: 1, changeYear: true,
        dateFormat: 'dd.mm.yy'
    });
}); 
```

如果我使用：*String.Format("{0:yyyy-MM-dd}"*或*String.Format("{0:MM-dd-yyyy}"*它可以工作，但如果我使用*String.Format("{0: dd.MM.yyyy}"*它不起作用。

**问：**如何将每种文化/语言的日期时间格式更改为**“dd.MM.yyyy” ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-10T08:32:32.280

老问题，但对于其他需要更改字符串格式而与当前文化无关的人：

```
DateTime.Today.ToString("dd.MM.yyyy", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T13:02:09.583

我一直在寻找这个问题的答案，并在这里找到了答案

[将值传递回控制器时的 ASP.NET MVC 日期时间文化问题](https://stackoverflow.com/questions/7889038/asp-net-mvc-datetime-culture-issue-when-passing-value-back-to-controller)

# haskell - Haskell：插入排序的惰性求值与急切求值

> ID：10681507
> 
> 赞同：8
> 
> 时间：2012-05-21T08:03:24.490
> 
> 标签：haskell

我目前被 IFPH 第 7 章中的一个问题困住了。

**练习 7.1.2**内容如下：

“的一个定义`sort`是去`sort = foldr insert []`哪里

```
insert x [] = [x]
insert x (y:ys) = if x <= y then x : y : ys else y : insert x ys 
```

详细给出表达式的急切和惰性求值缩减序列`sort [3,4,2,1]`，解释它们的不同之处”

现在，我首先从急切求值归约序列开始，我认为这是*最内层*归约。

对我来说，这会产生...

```
sort [3,4,2,1] 
=> foldr insert [] [3,4,2,1]
=> insert 3 (foldr insert [] [4,2,1])
=> insert 3 (insert 4 (foldr insert [] [2,1]
=> insert 3 (insert 4 (insert 2 (foldr insert [] [1])))
=> insert 3 (insert 4 (insert 2 (insert 1 (foldr [] []))))
=> insert 3 (insert 4 (insert 2 (insert 1 [])))
=> insert 3 (insert 4 (insert 2 [1]))
=> insert 3 (insert 4 (1 : insert 2 []))
=> insert 3 (insert 4 (1 : [2]))
=> insert 3 (1 : insert 4 [2])
=> insert 3 (1 : 2 : insert 4 [])
=> insert 3 (1 : 2 : [4])
=> insert 3 [1,2,4]
=> 1 : insert 3 [2,4]
=> 1 : 2 : insert 2 : [4]
=> 1 : 2 : 3 : [4]
=> [1,2,3,4] 
```

哪个是排序列表。

现在对于惰性求值，我能想到的唯一归约顺序与急切求值完全相同。当然，Haskell 对惰性求值进行了最左外层求值：但我认为在内部计算完成之前，它不能对列表的大部分进行操作。

这个推理正确吗？直觉告诉我没有。

如果有人能指出如何执行延迟评估减少序列，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T08:25:24.847

在包含的行上

```
insert 3 (1 : insert 4 [2]) 
```

您已经计算了足够的外部第二个参数`insert`，您可以运行计算，给出下一行

```
if 3 <= 1 then 3 : 1 : insert 4 [2] else 1 : insert 3 (insert 4 [2]) 
```

你现在可以运行 if 语句，下一个计算为

```
1 : insert 3 (insert 4 [2])     -- (LAZY) 
```

而不是急切的评估所拥有的：

```
insert 3 (1 : 2 : insert 4 [])  -- (EAGER) 
```

使用惰性求值，您计算结果的第一个元素是`1`在对列表的其余部分进行排序之前 - 与急切求值相反，后者在找出第一个元素是什么之前对列表的几乎整个尾部进行排序。

# websphere - Websphere Portal 的五个版本有什么区别？

> ID：10681508
> 
> 赞同：0
> 
> 时间：2012-05-21T08:03:33.500
> 
> 标签：websphere, portal

有谁知道 Websphere Portal 的五个版本之间有什么区别：WebSphere Portal Server、WebSphere Portal Enable、WebSphere Portal Enable for z/OS、WebSphere Portal Extend 和 WebSphere Portal Express？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T12:50:04.453

1.  代码完全相同，但捆绑包不同。
2.  WebSphere Portal Express 专为小型企业而设计。
3.  WebSphere Portal Enable 和 WebSphere Portal Extend 用于大型业务和大规模部署。
4.  WebSphere Portal Express 安装和配置 DB2。
5.  WebSphere Portal Enable 和 WebSphere Portal Extend 随 derby 一起提供，您必须使用其他数据库对其进行配置。
6.  WebSphere Portal Express 具有与 WebSphere Portal Enable 或 WebSphere Portal Extend 不同的许可包。
7.  该许可证禁止使用 WebSphere Portal Express 进行集群。Portal Express v8 确实允许通过购买特殊的附加许可证来使用空闲备用集群服务器；但是，必须在 Web 服务器插件中将空闲服务器设置为“备份”模式 - 除非主服务器不可用，否则基本上不允许最终用户流量使用服务器。
8.  该许可证允许使用 WebSphere Portal Enable 和 WebSphere Portal Extend 进行集群。
9.  WebSphere Portal Extend 与 Lotus Collaborative Component CD 捆绑在一起。
10.  WebSphere Portal Enable 没有与 Lotus Collaborative Component CD 捆绑在一起。
11.  WebSphere for Z/OS 有不同的 CD，因为它是针对大型机的，对于 WebSphere Portal enable for Z/OS 和 WebSphere Portal Extend for Z/OS 都是如此。
12.  当您看到短语“WebSphere Portal”时，它表示除 WebSphere Portal Express 或 WebSphere Portal for Z/OS 之外的任何 WebSphere Portal 系列。

# wpf - 播放时在另一个线程中添加关键帧

> ID：10681510
> 
> 赞同：2
> 
> 时间：2012-05-21T08:03:36.943
> 
> 标签：wpf, animation, storyboard

我这里有问题。

假设您有一个`Storyboard`控制一个对象的`DoubleAnimationUsingKeyFrames`对象。一开始，动画只有100帧。

有一个按钮，在它的按键中，我们想要播放故事板。但是，另一个线程将启动，在该线程中，动画中添加了关键帧。但是，这不会发生。我的意思是，*添加*了帧，但情节提要在达到第 100 帧时结束。如果您再次播放情节提要，它会通过线程添加所有帧！！！

我该怎么办？？

编辑：在`CurrentTimeInvalidated`情节提要的事件中，我们也有同样的问题。如果您在那里添加帧，它们不会显示在当前动画中，但如果您重播，它们会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:33:20.263

`Storyboard`源自`Freezable`。据我所知，您在启动后无法更改`Storyboard`，因为冻结的克隆将被动画化。

# asp.net - 从子弹出窗口关闭父弹出窗口

> ID：10681515
> 
> 赞同：0
> 
> 时间：2012-05-21T08:03:56.167
> 
> 标签：asp.net, telerik, popup

我正在使用 telrik radopen 函数打开弹出窗口。我有一种情况，即从祖父母 .aspx 页面打开的父弹出窗口打开子弹出窗口。

> 祖父母（.aspx 页面）-> 弹出（父）-> 弹出（子）

我想通过单击子弹出窗口上的按钮来关闭父弹出窗口和子弹出窗口。我尝试使用

```
GetRadWindow().BrowserWindow.BrowserWindow.Close() // this one and variations of this errored !

GetRadWindow().BrowserWindow.close(); // this didn't error but didn't close parent window

GetRadWindow().Close(); //this closes only child window when invoked from button click on //child window 
```

我读了问题是否可以从子窗口关闭父窗口（Javascript）？

如果无法从子弹出窗口关闭父弹出窗口，是否有一种解决方法，以便我可以模拟子控件上的“提交按钮单击”的行为可以关闭子控件和父弹出窗口并刷新祖父母 .aspx 上的网格页？

可能是重定向可以帮助。在那种情况下，我该怎么做？有什么建议么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:43:06.833

您可以先关闭子窗口，然后关闭父窗口（基于子窗口传递的值），而不是一次性关闭所有窗口。

[窗口/从对话框返回值](http://demos.telerik.com/aspnet-ajax/window/examples/dialogreturnvalue/defaultcs.aspx)

[CommunicationBetweenRadWindowsASPNET.zip](http://www.telerik.com/ClientsFiles/088130_CommunicationBetweenRadWindowsASPNET.zip)

# delphi - 我不应该永远不显示线程中的表单或消息框吗？

> ID：10681516
> 
> 赞同：3
> 
> 时间：2012-05-21T08:03:59.473
> 
> 标签：delphi, delphi-7

我一直在主线程中显示这些东西，并使用事件将窗口的结束与线程同步，让它知道窗口何时关闭。

今天，在开发过程中，我想将显示的表单从线程移动到主 UI，但它成功显示了。我唯一添加的是在主线程中我正在推送等待事件的消息：

```
procedure WaitWithMessageLoop();
var
vWaitForEventHandles:array[0..1] of THandle;
vWaitForResponse:DWORD;
Msg: TMSG;
begin
vWaitForEventHandles[0] := LServiceMonitor.Handle;
while (1=1) do
begin
  vWaitForResponse := MsgWaitForMultipleObjects(1, vWaitForEventHandles, FALSE, INFINITE, QS_ALLINPUT);
  if (vWaitForResponse = WAIT_OBJECT_0 + 1) then
  begin
    while (PeekMessage(msg,0,0,0,PM_REMOVE)) do
    begin
      TranslateMessage(msg);
      DispatchMessage(msg);
    end;
  end
  else
  if (vWaitForResponse = WAIT_FAILED)
    then RaiseLastOSError
    else break;
end;
end; 
```

所以我的问题是。这样的场景可以接受吗？或者我应该移动一个表单以显示在主线程中吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:42:27.597

您不能在主 GUI 线程之外可靠地运行 VCL 表单。当您尝试执行此操作时，它可能看起来可以工作，但在将来的某个时候，此类代码将失败。最有可能在您最重要的客户机器上，以一种特别关键的方式！

VCL 的设计使得所有 VCL 表单都只能从主 GUI 线程创建和操作。如果您需要调用 VCL 表单，那么您必须使用诸如`TThread.Synchronize`确保表单是在 GUI 线程上创建的工具。

# java - 调试期间无法在 Eclipse 的表达式视图中使用 org.apache.common.lang3.builder.toStringBuilder

> ID：10681517
> 
> 赞同：0
> 
> 时间：2012-05-21T08:04:03.437
> 
> 标签：java, eclipse, debugging, view

这是我最初的问题：[如何将变量的全部内容发送/导出到文本文件/xml 文件/剪贴板？](https://stackoverflow.com/questions/10629544/how-can-i-send-export-the-whole-content-of-a-variable-to-a-text-file-xml-file-cl)（问题仍然对建议开放）。现在我正在尝试在表达式视图中执行 artbristol 给出的代码，但没有成功，即使我确实将 jar 添加到我的构建路径中。显然，在构建路径中包含 lang3 jar 不会使其对 eclipse 可见调试时（但是，在将 jar 添加到构建路径后，我可以将 lang3 类导入项目的 .java 文件）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:19:48.530

如果您要添加全部内容

```
org.apache.commons.io.FileUtils.writeStringToFile(
    new java.io.File("C:\\objectAsString.txt"),
    org.apache.commons.lang3.builder.ToStringBuilder.reflectionToString(
    variableToInspect,
    org.apache.commons.lang3.builder.ToStringStyle.MULTI_LINE_STYLE)) 
```

到表达视图，是的，它不会向您显示内容。

您只需添加以下内容：

```
org.apache.commons.lang3.builder.ToStringBuilder.reflectionToString(
        variableToInspect,
        org.apache.commons.lang3.builder.ToStringStyle.MULTI_LINE_STYLE) 
```

然后在 ExpressionView 中选择表达式，它会显示内容。

# html - 标签中的类属性？

> ID：10681523
> 
> 赞同：19
> 
> 时间：2012-05-21T08:04:33.763
> 
> 标签：html

类是 HTML 元素的合法属性吗？

```
<html class="..."> 
```

我的 Oracle ADF 应用程序会这样做——为什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-21T08:06:56.337

[它在HTML 4](http://www.w3.org/TR/html4/struct/global.html#h-7.3)中无效：

```
<!ENTITY % html.content "HEAD, BODY">

<!ELEMENT HTML O O (%html.content;)    -- document root element -->
<!ATTLIST HTML
  %i18n;                               -- lang, dir --
  > 
```

[它在XHTML 1.0](http://www.w3.org/TR/xhtml1/dtds.html#a_dtd_XHTML-1.0-Strict)中无效：

```
<!ELEMENT html (head, body)>
<!ATTLIST html
  %i18n;
  id          ID             #IMPLIED
  xmlns       %URI;          #FIXED 'http://www.w3.org/1999/xhtml'
  > 
```

它在[HTML 5](https://www.w3.org/TR/html5/dom.html#global-attributes)中有效：

> 以下属性对所有 HTML 元素（即使是本规范中未定义的元素）都是通用的并且可以在其上指定：
> 
> *   ...
> *   班级
> *   ...

* * *

> 我的 Oracle ADF 应用程序会这样做 - 为什么

大概是将共享外部文件中的样式或 JS 应用到特定页面。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-24T21:02:29.643

**在 HTML 标记上使用类有一些很好的理由。**

您可以使用这样的 css 全局变量来围绕不同的页面、不同的浏览器等设置样式。

[modernizr](http://modernizr.com)使用这种技术

[css_browser_selector.js](https://raw.github.com/rafaelp/css_browser_selector/master/css_browser_selector.js)使用这种技术

[Richard Pianka 讨论了](http://richardpianka.com/2011/01/css-browser-selector/)如何在上述 css_browser_selector 脚本中使用该技术

[Chris Coyier 讨论了](http://css-tricks.com/why-use-classes-or-ids-on-the-html-element/)为什么该技术很有用

延伸阅读：

[避免为 html 设置全局类](https://stackoverflow.com/questions/17908447/avoid-setting-a-global-class-for-html)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-21T08:07:03.037

“类属性在以下位置无效：base、head、html、meta、param、script、style 和 title”。 [http://www.w3schools.com/tags/att_standard_class.asp](http://www.w3schools.com/tags/att_standard_class.asp)

你可以使用这个模式得到你想要的：

```
<html>
   <body class="">
   </body>
</html> 
```

或（更好，我猜）

```
<html>
   <body>
      <div class="">
      </div>
   </body>
</html> 
```

# c++ - 在命令行应用程序中显示进度

> ID：10681530
> 
> 赞同：16
> 
> 时间：2012-05-21T08:05:09.387
> 
> 标签：c++, c

好吧，我有点不好意思问这么简单的事情，但还是。

我有命令行实用程序应用程序，需要向用户显示进度。

我可以将进度写入 cout，如下所示：

```
std::cout << "10%\n";
...
std::cout << "20%\n";
...
std::cout << "30%\n"; 
```

...但结果用户将看到：

```
some line printed before
10%
20%
30%
... 
```

...但我真正需要的是该百分比得到了**更新**，就像一开始的那样：

```
some line printed before
10%
... 
```

...更新后：

```
some line printed before
20%
... 
```

...并在第二次更新后：

```
some line printed before
30%
... 
```

我应该如何做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-21T08:08:31.313

而不是使用`'\n'`，使用`'\r'`：

```
std::cout << "\r10%" << std::flush; 
```

完成后打印换行符 ( `'\n'`)。

使用它很重要，`std::flush`因此流内容确实是输出的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T08:07:19.427

使用**回车**。

```
std::cout << "\r10%";
std::cout << "\r20%";
... 
```

转到行首。

# android - Android - 用于 SCP 的 dbclient

> ID：10681535
> 
> 赞同：1
> 
> 时间：2012-05-21T08:05:53.093
> 
> 标签：android, ssh

我正在尝试让 scp 从电话到计算机工作。

它适用于从电脑到手机。

但是从手机到电脑我得到了：

```
/usr/bin/dbclient: No such file or directory 
```

如何在 Android 上获取 dbclient？

我查看了 CyanogenMod 的来源，但它似乎有同样的问题并且没有提供 dbclient 二进制文件。

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:38:21.030

这就是我要走的路：使用 Android NDK 从源代码编译，补丁来自：[http ://dan.drow.org/android/](http://dan.drown.org/android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:20:10.060

我建议您查看[Connectbot](http://code.google.com/p/connectbot/)源代码 - 它不执行 scp 但确实提供 SSH shell 访问，也许答案就在其中。

此外，dumload 项目似乎包含 scp 客户端代码；得到它：

```
git clone http://git.joshuawise.com/dumload.git/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:51:09.093

scp 从手机到 PC 的 apk 可在以下链接中找到

[https://play.google.com/store/apps/details?id=com.perdeas.droidscp&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wZXJkZWFzLmRyb2lkc2NwIl0](https://play.google.com/store/apps/details?id=com.perdeas.droidscp&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5wZXJkZWFzLmRyb2lkc2NwIl0)。

下面的 API 可能很有用。

导入 org.apache.commons.net.ftp.FTP；导入 org.apache.commons.net.ftp.FTPClient；导入 org.apache.commons.net.ftp.FTP 文件；

# ios - 将 nil 添加到数组（dict）时如何将 nil 自动转换为 [NSNull null]？

> ID：10681539
> 
> 赞同：2
> 
> 时间：2012-05-21T08:07:00.283
> 
> 标签：ios, objective-c, cocoa

我有一些值需要添加到数组中（使用`initWithObjects`），然后编码为 JSON 字符串。

众所周知，当数组遇到 a 时`nil`，它将停止读取下一个值。

作为 JSON Array 的约定，nil 应在有序位置充当空值。

`[NSNull null]`我应该检查每个值，并在将其添加到数组之前手动将其转换为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:16:29.880

> 我应该检查每个值，并在将其添加到数组之前手动将其转换为 [NSNull null] 吗？

是的。您可以创建一个简单的辅助方法/函数：

```
id GuardJSONElement(id arg) { return arg ? arg : [NSNull null]; } 
```

进而：

```
[array addObject:GuardJSONElement(something)]; 
```

# sql - `单行子查询返回多行`错误不明确

> ID：10681545
> 
> 赞同：2
> 
> 时间：2012-05-21T08:07:21.173
> 
> 标签：sql

我有两张桌子。第一个持有一个类型，第二个持有这个类型的值。在我的示例中，如果有更多值 'john' 作为 'first_name' 我得到：`single-row subquery returns more than one row`

```
SELECT DISTINCT id FROM name WHERE id=(
 SELECT id FROM name WHERE text1='first_name' INTERSECT
 SELECT name_id FROM value WHERE text2='john'); 
```

我对sql不是很好。我应该使用`LEFT JOIN`或类似的东西，但我不清楚我应该如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:17:17.370

由于子查询 [can] 返回多个值，`IN`比`=`

```
SELECT DISTINCT id 
FROM name 
WHERE id IN (
        SELECT id FROM name WHERE text1='first_name' 
        INTERSECT
        SELECT name_id FROM value WHERE text2='john'); 
```

`IN`等价于`OR`，例如：

```
SELECT *
FROM tableName
WHERE a = 4 or a = 5 or a = 6 
```

可以写成

```
SELECT *
FROM tableName
WHERE a in (4,5,6) 
```

（`=`等号）用于分配单个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:14:52.143

除了简单的修复（使用 IN 而不是 id=），您还可以使用更简单的查询版本：

```
SELECT DISTINCT id FROM name WHERE text1='first_name' 
and id in (
SELECT name_id FROM value WHERE text2='john') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:10:13.600

```
SELECT id FROM name WHERE text1='first_name' INTERSECT
SELECT name_id FROM value WHERE text2='john'); 
```

此查询返回多行，那么您应该使用`IN`这里的子句

```
SELECT DISTINCT id FROM name WHERE id IN (
SELECT id FROM name WHERE text1='first_name' INTERSECT
SELECT name_id FROM value WHERE text2='john'); 
```

或者，如果您只期望一行，则必须查看数据库的逻辑和行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T08:14:20.513

您可以将 WHERE id= 更改为 WHERE id IN

# ios - UITableViewCell 中的可点击链接

> ID：10681547
> 
> 赞同：0
> 
> 时间：2012-05-21T08:07:26.877
> 
> 标签：ios, uitableview, hyperlink, datadetectortypes

我正在尝试在 UITableViewCell 中添加可点击文本，我尝试了一些不同的方法：

*   我尝试使用 3rd 方标签，例如 fancyLabel 等，但问题在于它们不支持从右到左的语言（它们总是从左到右开始文本）

*   我尝试使用 UIWebView 作为文本视图，但是当我将 UIWebView 添加到 UITableViewCell 并快速滚动表格时，webView 内的文本为空，并且当滚动减速时，文本再次出现，所以看起来不太好

*   我不能使用 UITextView，因为它不支持自定义 UIDataDetectionTypes，我需要为高音链接检测 # 和 @

关于如何解决这个问题的任何想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:21:52.907

创建一个无边框`UIButton`并设置样式，使其看起来像一个链接（按钮也支持左/右对齐的文本），单击时只需启动一个包含链接内容的 Web 视图。

# eclipse - 如何使用 Maven 从我的类路径中排除测试文件夹中的源？

> ID：10681560
> 
> 赞同：2
> 
> 时间：2012-05-21T08:08:43.583
> 
> 标签：eclipse, maven, build, classpath

我设法使用以下行从“src/main/java”中排除文件：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.5</source>
        <target>1.5</target>
            <excludes>
            <exclude>**/MyExcludedFile.java</exclude>
        </excludes>
    </configuration>
</plugin> 
```

添加之后，maven 生成了我的 .classpath 文件的以下几行：

```
<classpathentry excluding="**/MyExcludedFile.java" kind="src" output="target/classes" path="src/main/java"/>
<classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources"/>
<classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
<classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources"/> 
```

**现在我如何为 src/test/java 做同样的事情？**

我期待这样的东西出现在我的 .classpath 文件中：

```
<classpathentry excluding="**/MyExcludedFile.java" kind="src" output="target/classes" path="src/main/java"/>
<classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources"/>
<classpathentry excluding="**/MyExcludedFileTest.java" kind="src" output="target/test-classes" path="src/test/java"/>
<classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources"/> 
```

看第三行。我希望这个 -> [ exclude="**/MyExcludedFileTest.java"] 出现在我的 .classpath 文件中。我如何告诉 maven 这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:43:24.330

使用`<testExcludes>`.

这个[问答](https://stackoverflow.com/a/3656223/136913)应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T16:42:28.817

对我来说，它不能通过处理 testExcludes 而是通过直接修改 eclipse 插件配置来工作

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <configuration>
        <sourceExcludes>
            <exclude>**/MyExcludedFile.java</exclude>
        </sourceExcludes>
    </configuration>
</plugin> 
```

# python - 如何在 python-gnupg 中选择加密/解密密钥？

> ID：10681563
> 
> 赞同：1
> 
> 时间：2012-05-21T08:09:04.847
> 
> 标签：python, gnupg

我正在尝试在 python-gnupg 中使用备用密钥，相当于命令的 -u 开关：

```
gpg --encrypt --armor -r <<theirkeyid>> -u <<my_nondefault_key_id>>
gpg --decrypt -r <<theirkeyid>> -u <<my_nondefault_key_id>> 
```

但无法弄清楚，python-gnupg 总是使用我的默认私钥。我唯一想到的可能是使用另一个钥匙圈，还是有办法？或者另一个 py 库是否支持多个私钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-21T04:53:54.723

在 python-gnupg 中，接收者键 "-r <<theirkeyid>>" 接受一个列表，方便您只使用一个字符串。

将您的 nondefaultkeyid 添加到收件人列表中，python-gnupg 似乎注意到包含的私有并将其用作默认密钥。例子：

```
recipients=["<<theirkeyid>>", "<<nondefault_key_id>>"]
encrypt_file(file, recipients) 
```

以上对我有用，虽然不是很明显“为什么”？

提示：我将自己添加到收件人列表中，因此我可以解密文件以验证加密文件没有损坏（如果原始原始文件已经消失，则恢复原始文件。）

其他两个选项（如果您正在寻找更多确定性）

*   符号
*   额外参数

### 符号

签署加密文件时明确支持设置“默认密钥”。

例如，您的函数调用如下所示：

```
encrypt_file( file, "<<theirkeyid>>", armor=True, sign="<<nondefault_key_id>>") 
```

python-gnupg 代码中的一个片段告诉我们，要对文件进行“签名”，python-gnupg 将命令行选项设置为“--sign”，然后将“--default-key”设置为为'签字'。

```
 if sign is True:  # pragma: no cover
            args.append('--sign')
        elif sign:  # pragma: no cover
            args.extend(['--sign', '--default-key', no_quote(sign)]) 
```

参考：[https ://bitbucket.org/vinay.sajip/python-gnupg/src/master/gnupg.py](https://bitbucket.org/vinay.sajip/python-gnupg/src/master/gnupg.py)

### 额外参数

如果你不想签名，走自己的路怎么办？

我们想要的是将以下命令行选项添加到 'gpg'

```
--default-key <<nondefault_key_id>> 
```

从上述相同的文档中，您似乎也可以通过使用 extra_args 选项来摆脱困境：

encrypt_file 和 extra_args 的文档参数是：

```
 def encrypt_file(self,
                     file,
                     recipients,
                     sign=None,
                     always_trust=False,
                     passphrase=None,
                     armor=True,
                     output=None,
                     symmetric=False,
                     extra_args=None):
...
...
        if extra_args:
            args.extend(extra_args) 
```

其中**extra_args**是命令行选项的 python 列表。

我们可以使用 extra_args 为 encrypt_file 传递进一步的自定义选项。下面是一个例子：

```
encrypt_file( file, "<<theirkeyid>>", armor=True, extra_args=["--default-key", "<<nondefault_key_id>>"]) 
```

让我们知道哪个最适合您。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-21T10:42:50.970

*   当`--encrypt`只使用对方的公钥时，这种情况下该`-u`选项被忽略
*   收件人的密钥可以在`options.recipients`列表中设置。
*   同样，当`--decrypt`ing`-r`选项被忽略时。通常用于解密的密钥是根据消息中的密钥 ID 自动确定的。除非您的消息使用多个公钥加密，并且您的密钥库中有多个匹配的私钥。
*   你可以设置默认键`options.default_key`
*   如果你想使用不同的密钥库文件，你可以将它添加到额外的参数中，或者在`call`参数列表中直接使用它：

    ```
    gpg = GnuPGIntreface.GnuPG()
    #    ...
    gpg.options.recipients += ['spam', 'eggs']
    gpg.options.extra_args += ['--keyring', 'keyringfile']
    #    ...
    #    or:
    gpg.call(['--encrypt', '--keyring', 'keyringfile'])
    #    ... 
    ```

# touch - Sencha Touch + DeftJS

> ID：10681569
> 
> 赞同：2
> 
> 时间：2012-05-21T08:10:13.620
> 
> 标签：touch, extjs, sencha-touch-2

我正在 Sencha Touch 应用程序中试用 DeftJS 框架。

但是当它超过以下几行时，我在实施最新版本（0.6.5）时遇到了麻烦：

```
classDefinition = Ext.ClassManager.get(this.getClassName()); 
```

在哪里

```
this.getClassName()    outputs    "TimeSheetApp.store.TotalActualStore" 
```

所以下面一行

```
if (classDefinition.singleton) 
```

抛出此异常：

```
Uncaught TypeError: Cannot read property 'singleton' of null 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:07:58.183

这里的问题是指定的类要么未加载，要么不存在。

仔细检查您指定的类名是否完全正确，并且它已通过`Ext.require()`您的主 JavaScript 文件 before`Ext.onReady()`或通过`requires:`您的根 Sencha Touch 应用程序类上的注释加载。

即使作为 Deft JS 框架的作者，我这周也遇到了这个问题。从 v0.6.5 开始抛出的错误并不是特别有用。我在 GitHub 上提交了一个问题，捕获了这个问题，因此您可以在那里跟踪进度：

[https://github.com/deftjs/DeftJS/issues/16](https://github.com/deftjs/DeftJS/issues/16)

我们将在 v0.6.6 中添加更好的错误处理和通知。

与此同时，更正名称或添加缺失的课程要求应该会让你重新开始。

感谢您查看 Deft JS！

# embedded-linux - 当我有 mdev 时，是否有理由使用 udev？

> ID：10681570
> 
> 赞同：2
> 
> 时间：2012-05-21T08:10:14.063
> 
> 标签：embedded-linux, hotplugging

我正在运行基于 TI 的 Arago 基础映像的嵌入式 linux 系统。这个发行版带有 mdev 和 udev。似乎它们中的任何一个都没有配置，所以我将在其中一个中进行选择。该系统非常强大（ARM A8 1 GHz），因此 CPU 功率并不是真正的问题。

那么，当 mdev 可用时，还有什么理由选择 udev 呢？是否存在 mdev 无法应对的场景？

# javascript - 在 ASP.NET 中嵌入 JavaScript 文件的本地化资源

> ID：10681571
> 
> 赞同：1
> 
> 时间：2012-05-21T08:10:15.140
> 
> 标签：javascript, asp.net, resx, webresource

我想将我的资源文件嵌入到我的 javascript 文件中。

我有：

*   *全局.resx*

*   *main.js*

*   *默认.aspx*

将此添加到 assembly.cs：

*[程序集：System.Web.UI.WebResource("main.js", "application/x-javascript")]*

*[程序集：System.Web.UI.ScriptResource("main.js", "Resources.Global", "Resources")]*

将 main.js 更改为嵌入资源

***我完全按照这里所说的做了：*** [Embedding Localized Resources for a JavaScript File](http://msdn.microsoft.com/en-us/library/bb398868.aspx)

但是我仍然知道资源在我的 js 中是“未定义的”。

# android - 为什么这不会导致崩溃？我正在从其他线程更新 UI

> ID：10681574
> 
> 赞同：4
> 
> 时间：2012-05-21T08:10:44.690
> 
> 标签：android, dialog, thread-safety, android-ui

这个例子是从一本关于 Android 的书中复制而来的。正如您从我的问题中看到的那样，我是 Android 新手并试图理解。**这个应用程序应该崩溃但它没有**（我正在从另一个线程更新 UI。这是不允许的。它应该会导致崩溃。它不会。为什么？）。我的代码是：

```
final ProgressDialog dialogue = ProgressDialog.show(this, "title", "message");

       new Thread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
                try {
                    Thread.sleep(7000);
                dialogue.dismiss();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        }
    }).start(); 
```

这是在`OnCreate`函数中完成的。我对线感到困惑 -`dialogue.dismiss();`这不是从另一个线程更新 UI（关闭对话）吗？为什么这个应用程序**不会**导致分段错误？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T08:28:51.320

如 Android 文档中所述， [dismiss()](http://developer.android.com/reference/android/app/Dialog.html#dismiss())方法可以在任何线程上安全运行。

> 公共无效解雇（）
> 
> 自：API 级别 1 关闭此对话框，将其从屏幕上移除。可以从任何线程安全地调用此方法。请注意，当对话框被关闭时，您不应重写此方法进行清理，而应在 onStop() 中实现该方法。

# objective-c - 如何在滚动视图下执行 imageView 触摸事件？

> ID：10681575
> 
> 赞同：1
> 
> 时间：2012-05-21T08:11:08.857
> 
> 标签：objective-c

我正在使用`- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event` 触摸方法，`imageView`但我已经采取`imageView`了`scrollview`这就是为什么触摸事件不执行，因为它直接采用滚动视图

我的代码是

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    // get touch event
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    if ([touch view] == imagedisplay) {
        // move the image view
        imagedisplay.center = touchLocation;
    }

} 
```

图像显示我的 imageView 对象，但在不工作的触摸事件中，我在滚动视图中工作，所以请提供适用于滚动视图和 imageView 的任何解决方案和源代码相关的触摸

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:15:04.563

使用下面的代码，您正在创建 imageView-

```
imageView.userInteractionEnabled = YES; 
```

因为它是`NO`默认的。

# jquery - 如果另一个有值，jQuery 显示/隐藏一个 div

> ID：10681578
> 
> 赞同：2
> 
> 时间：2012-05-21T08:11:15.387
> 
> 标签：jquery

我有以下代码：

```
<div class="field-name-new">
  <div class="field-label">New</div>
  <div class="field-items">
    <div class="field-item">0</div>
  </div>
</div> 
```

仅当 div.field-item 的值为 1 时才需要显示 div.field-label ，如果值为 0 则隐藏它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:14:26.043

```
var $item = $('.field-item');

if ($item.text() == 0)​​ {
    $item.parent().siblings('.field-label').hide();
}​ 
```

[http://jsfiddle.net/zerkms/FTbBT/](http://jsfiddle.net/zerkms/FTbBT/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T08:16:47.253

使用[`toggle`方法](http://api.jquery.com/toggle/)根据条件显示或隐藏元素：

```
$('.field-label').toggle($('.field-item').text() == '1'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:16:17.277

```
$(document).ready(function(){
 $('.field-item').each(function(){
       if($(this).text() == 0){
            $(this).parent().prev().hide();
       }else{
           $(this).parent().prev().show();
    }
    });
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T08:16:44.913

```
$('.field-label').each(function() {
       $(this).css('display', $(this).next('.field-items').find('.field-item').is(':contains("1")') ? 'block' : 'none');
}); 
```

[http://jsfiddle.net/HackedByChinese/kXdat/1/](http://jsfiddle.net/HackedByChinese/kXdat/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T08:18:58.370

`div.field-item`假设每个里面只有一个，`div.field-items`这应该可以工作：

```
$('.field-items').each(function(i,el)
{
    var field_item = $(el);
    if(field_item.text() == 1)
        $(this).prev().show();
    else
        $(this).prev().hide();
}); 
```

示例：http: [//jsfiddle.net/zsA7W/](http://jsfiddle.net/zsA7W/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T08:19:36.097

您可以使用[`toggle()`](http://api.jquery.com/toggle/)布尔标志

```
$('.field-name-new').each(function() {
    var $this = $(this);
    $this.find('.field-label').toggle(!!$this.find('.field-item').text())
}); 
```

我创建了一个`each`以防你有多个`.field-name-new`块

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-21T08:22:11.687

**它工作正常！**

```
$(document).ready(function() {
    if($(".field-item").html() == '0'){    
    $("div.field-label").hide();
    }
});​ 
```

**更新了 Jsfiddle： http:** [//jsfiddle.net/ipsjolly/m4BTd/4/](http://jsfiddle.net/ipsjolly/m4BTd/4/)通过更改值来测试它`<div class="field-item">0</div>` 并单击`Run`

# oracle - 使用 sql developer 的自动警报电子邮件

> ID：10681579
> 
> 赞同：1
> 
> 时间：2012-05-21T08:11:20.580
> 
> 标签：oracle, loops, plsql, oracle11g

超市有很多产品。当其中一种产品的数量为零时，需要向经理发送一封自动电子邮件，表明该产品缺货。

我已经完成了电子邮件部分（通过 SQL Developer 发送电子邮件）。现在我需要设置一个循环来跟踪产品的数量。这个循环怎么叫？.

装甲运兵车？我试过了。但它不适合我

```
create or replace
procedure check_stock_qty
begin      
for r in ( select product_name,product_id from super_market 
where pro_qty = 0 )  
loop       
UTL_MAIL.send(sender => 'blabla@me.com',
        recipients => 'blabla@me.com',
         subject => 'Test Mail',
         message => ( r.product_name ),
      mime_type => 'text; charset=us-ascii');  

end loop; 
end;
------------------------
BEGIN    

dbms_scheduler.create_job (job_name => 'stock check',
job_type        => 'PLSQL_BLOCK',        
job_action      => 'BEGIN check_stock_qty; END;',    
start_date      => SYSTIMESTAMP,       
repeat_interval => 'freq=minutely; interval=5; bysecond=0;',    
end_date        => NULL,         
enabled    => TRUE,
END; 
```

该程序已编译，但win运行它。它给出错误“所选程序处于无效运行状态。重新编译程序并重试”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:10:40.580

最好的方法是使用数据库作业定期检查 PRODUCTS 表。

首先你需要一个存储过程。像这样的东西：

```
create or replace procedure check_stock_qty
begin
     for r in ( select product_name from products
                where qty = 0 )
     loop
         your_email_proc_here ( r.product_name );
     end loop;
end; 
```

然后，您可以将其设置为定期运行。当您使用 Oracle 11g 时，您应该使用 DBMS_SCHEDULER API 来执行此操作。此调用将每五分钟运行一次上述库存检查器：

```
BEGIN
    dbms_scheduler.create_job (
        job_name        => 'stock check',
        job_type        => 'PLSQL_BLOCK',
        job_action      => 'BEGIN check_stock_qty; END;',
        start_date      => SYSTIMESTAMP,
        repeat_interval => 'freq=minutely; interval=5; bysecond=0;',
        end_date        => NULL,
        enabled         => TRUE,
END;
/ 
```

DBMS_SCHEDULER 相当复杂，即复杂但有据可查。 [了解更多。](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sched.htm)

# css - 如何有一个弯曲的边缘三角形

> ID：10681582
> 
> 赞同：2
> 
> 时间：2012-05-21T08:11:29.880
> 
> 标签：css

我想要 css3 中的弯曲边缘三角形。是否可以在 css3 中获得它？我下面的代码有一个正常的三角形......

[http://jsfiddle.net/dVbJr/](http://jsfiddle.net/dVbJr/)

```
#left-triangle {
   width: 0;
   height: 0;
   border-right: 100px solid orange;
   border-top: 50px solid transparent;
   border-bottom: 50px solid transparent;
} 
```

我想要这样。。 ![在此处输入图像描述](../Images/8f6a19ab0d6539882e5466718f601db4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T08:18:44.937

你可以这样做：

**CSS**

```
.arrow{
    width:50px;
    height:100px;
    position:relative;
    overflow:hidden;
}
.arrow:after{
    content:'';
    width:100px;
    height:100px;
    -moz-transform:rotate(45deg);
    -webkit-transform:rotate(45deg);
    transform:rotate(45deg);
    background:red;
    position:absolute;
    top:0;
    right:-70px;
    border-radius:10px;
    -moz-border-radius:10px;
} 
```

**HTML**

```
<div class="arrow"></div> 
```

检查这个[http://jsfiddle.net/dVbJr/4/](http://jsfiddle.net/dVbJr/4/)

# jquery - Fancybox2 幻灯片助手按钮

> ID：10681590
> 
> 赞同：1
> 
> 时间：2012-05-21T08:12:30.837
> 
> 标签：jquery, fancybox, fancybox-2

有什么方法可以指定，fancybox 2 的助手中的幻灯片应该显示什么按钮？其实我不需要切换按钮。

```
helpers : {
  title : { type : 'inside' },
  buttons : {}// is these takes some button names?
} 
```

如何删除切换按钮？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T08:15:45.230

通过使用 tpl 选项覆盖默认的 html 模板，您可以在不编辑源文件的情况下删除大小切换按钮。原始模板包含在 jquery.fancybox-buttons.js 中。（注意对 ul 标签的 inline-css 宽度调整以纠正更窄的总宽度。）

```
helpers: {
  buttons: { tpl: '<div id="fancybox-buttons"><ul style="width:132px"><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:jQuery.fancybox.close();"></a></li></ul></div>' }
} 
```

# c++ - 空地图的 map::begin() 的返回值是多少？

> ID：10681593
> 
> 赞同：13
> 
> 时间：2012-05-21T08:12:56.343
> 
> 标签：c++, stl, map

我使用这样的东西：

```
map<string, Data>::iterator it  = mymap->begin();
map<string, Data>::iterator end = mymap->end();

while (it != end) {
    // do stuff
    ++it;
} 
```

我只是想知道即使地图是空的，这是否会起作用。如果地图为空，我找不到任何有关返回 map::begin() 的信息。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-21T08:14:15.627

如果映射为空，则`begin`和`end`迭代器相等，即返回`mymap->end()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-14T20:11:32.910

您不能尝试将迭代器递增到末尾，或者将迭代器引用到空映射，这就是为什么您必须在代码中使用 if 语句来检查映射和/或迭代器，然后再使用它。

# ruby-on-rails - 在 ruby on rails 中捆绑安装期间的“致命错误”

> ID：10681596
> 
> 赞同：1
> 
> 时间：2012-05-21T08:13:09.370
> 
> 标签：ruby-on-rails, git, rubygems, bundler, ruby-on-rails-3.2

我的 GemFile 中有这个

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem "nested_form", :git => "https://github.com/ryanb/nested_form.git" 
gem 'lazy_high_charts', :git => "https://github.com/michelson/lazy_high_charts.git"

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

当我尝试捆绑安装时...我收到以下错误

```
Updating https://github.com/michelson/lazy_high_charts.git
Unfortunately, a fatal error has occurred. Please report this error to the Bundler issue tracker at https://github.com/carlhuda/bundler/issues so that we can fix it. Please in
clude the full output of the command, your Gemfile and Gemfile.lock. Thanks!
C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/source.rb:578:in ``': No such file or directory - git fetch --force --quiet --tags "https://github.com/michel
son/lazy_high_charts.git" "refs/heads/*:refs/heads/*" (Errno::ENOENT)
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/source.rb:578:in `git'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/source.rb:533:in `block in checkout'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/source.rb:620:in `chdir'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/source.rb:620:in `in_path'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/source.rb:532:in `checkout'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/source.rb:760:in `specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:486:in `block in converge_locked_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:475:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:475:in `converge_locked_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:166:in `resolve'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:113:in `specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:108:in `resolve_remotely!'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/installer.rb:81:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/installer.rb:14:in `install'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/cli.rb:224:in `install'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/task.rb:22:in `run'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor.rb:263:in `dispatch'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/base.rb:386:in `start'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.pre/bin/bundle:13:in `<top (required)>'
        from C:/Ruby193/bin/bundle:23:in `load'
        from C:/Ruby193/bin/bundle:23:in `<main>' 
```

如果我取出这两行......

```
:git => "https://github.com/ryanb/nested_form.git" 
:git => "https://github.com/michelson/lazy_high_charts.git" 
```

捆绑安装发生得很完美......似乎是什么问题？我该如何解决？我正在使用 Windows 7。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:03:36.780

FWIW：

就我而言，它归结为外壳找不到`git`二进制文件。

我打开了一个**GitHub Shell**，因为我已经安装了**GitHub Client**，`bundle install`这次运行完美。

# iphone - JSONKit 是否支持 ARC，或者是否有支持 ARC 的 fork？

> ID：10681597
> 
> 赞同：19
> 
> 时间：2012-05-21T08:13:14.390
> 
> 标签：iphone, ios, json, jsonkit

根据这些评论，JSONKit 不支持 ARC，甚至不支持在 ARC 环境中使用 fobjc-no-arc 设置运行： [https ://github.com/johnezang/JSONKit/issues/37](https://github.com/johnezang/JSONKit/issues/37)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-21T08:18:03.413

您仍然可以在带有 ARC 的应用程序中使用 JSONKit。

我自己在用。

在 XCode 5 中选择您的项目根目录，在`Targets`选择您的应用程序下，然后选择`BuildPhases`选项卡。在`Compile Sources`双击 JSONKit.m 并添加以下编译器标志`-fno-objc-arc`。

希望能帮助到你

干杯

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T08:19:15.497

我在`ARC`项目中使用 JSONKit`-fno-objc-arc`和编译源设置中的 JSONKit.m 文件。

您在问题中链接到的一些帖子已经说它有效。

# ruby-on-rails - ActionView::MissingTemplate: 缺少模板 :formats=>[:mobile]

> ID：10681600
> 
> 赞同：1
> 
> 时间：2012-05-21T08:13:34.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 中，我正在尝试实现移动视图。刚刚安装`mobylette`的 gem 似乎比 mobile_fu 有更多的活动。

[https://github.com/tscolari/mobylette](https://github.com/tscolari/mobylette)

但是，来自移动设备的大多数请求最终都会出现此错误

```
ActionView::MissingTemplate: Missing template my_controller/index, application/index with {:locale=>[:en], :formats=>[:mobile], :handlers=>[:erb, :builder, :haml]}. Searched in: * "/app/app/views" * "/app/vendor/bundle/ruby/1.9.1/gems/devise-1.5.2/app/views" * "/app/app/views" 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:21:49.847

您可能需要自己添加移动格式。

在 config/initializers/mime_types.rb 中，添加：

```
Mime::Type.register_alias "text/html", :mobile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:51:10.057

如果您`respond_to :mobile`在控制器中设置了 mime 类型，那么您唯一的问题应该是实际上缺少移动模板文件。

默认情况下，您需要在适当的 view_path 中有一个名为的模板文件`<action>.<format>.<handler> or <action>.<handler>`

我怀疑默认设计模板（成功创建重定向以显示操作后）是`show.html.erb`

您最安全的选择是创建它或对其进行符号链接（以及所有其他操作）

```
ln -sf show.html.erb show.mobile.erb # in linux 
```

在哪里？好吧，如果你使用了设计 rake 任务

```
rails generate devise:views 
```

那么你知道它会在`app/views/devise/registrations`

如果你在`config.scoped_views = true`里面设置`config/initializers/devise.rb`，那么它会在`app/views/users/registrations`你的设计模型是用户使用用户控制器的情况下。

# php - php正确捕获依赖库异常

> ID：10681601
> 
> 赞同：1
> 
> 时间：2012-05-21T08:13:50.273
> 
> 标签：php, exception, exception-handling, doctrine-orm

大家好，我有一个例外的问题。

以下代码块执行此结果：

```
Fatal error: Uncaught exception 'Doctrine\DBAL\Types\ConversionException' with message 'Could not convert database value ..... 
```

代码：

```
foreach ($result as $indexArray => $objectID) {
  try {
    $tempObject = new OggettoEbayDB();
    $tempObject = $entityManager->find('OggettoEbayDB',$objectID);
    if($tempObject->checkValid()){
    //.... do something else      
    }    
  } catch(Doctrine\DBAL\Types\ConversionException $e){
    $arrayOggettoEbayDBDeleted [] = '<b>Oggetto con id -> '.$tempObject->getId().' ha dato problemi con il seguente messaggio '.$e->getMessage().'<br/><br/>';
  }
} 
```

我需要首先捕获有错误的对象，但稍后在其他对象上继续 foreach

无论如何我无法进入 catch 块，异常总是被捕获为“未捕获”

我必须指定正确的类型还是什么？

谢谢任何朋友！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:25:10.700

这可能是由于命名空间解析规则造成的。

当你不在 Doctrine 命名空间本身时，你应该通过在它前面加上一个反斜杠来使异常类成为绝对类：

```
\Doctrine\DBAL\Types\ConversionException 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:29:20.727

您提供的代码块引发了您正在捕获的其他类型的异常。然后，您试图将此异常转换为`Doctrine\DBAL\Types\ConversionException`引发不再捕获的新异常。

先试试这个：

```
...
try { ... }
catch(\Exception $e) {
    $arrayOggettoEbayDBDeleted [] = '<b>Oggetto con id -> '.$tempObject->getId().' ha dato problemi con il seguente messaggio '.$e->getMessage().'<br/><br/>';
} 
```

这应该有效。

# database - 为投票应用程序选择数据库

> ID：10681613
> 
> 赞同：1
> 
> 时间：2012-05-21T08:14:54.983
> 
> 标签：database, database-design, architecture, nosql, voting-system

我看到很多主题要求为投票机制选择数据库，但我的输入有点不同。我有一个包含 GUI 的应用程序，其中可以有多个字段/单选按钮或以上的组合。GUI 不固定。根据提交的表单，动态生成答案 XML。

因此，如果有一个表单，那么可能有 10000 个不同的人提交同一个表单。我将拥有 10000 种不同的表格（数量会增加）。

我现在有以下 2 个选项。将每个 xml 原样存储在数据库中（我没有选择使用关系数据库或 nosql 数据库，如 mongodb。）或解析 xml 并为每个表单创建表。这样表的数量将是巨大的。

现在，我必须建立一个投票机制，它基本上查看为特定表单生成的所有 xml，即 10000 个 xml，并提取提交的答案（注意：xml 很复杂，因为 1 个表单可以有多个答案元素）然后投票看看有多少人给出了相同的答案。

我的问题：

1.  我应该使用关系数据库还是 NOSQL（MongoDB /Redis 或类似的）？
2.  我是否需要将 xml 文档保存在数据库中，还是应该解析它并将其转换为表格并保存？我可以遵循的任何其他方法。

我目前正在使用 JAVA/J2EE 进行开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:42:33.100

如果您的问题是关于如何存储可变结构的数据，那么文档数据库将非常方便。由于它是无模式的，因此 rdbms 列维护不会有任何问题。

从逻辑上讲，这种方式与将 xml 存储在关系数据库中非常相似。不同之处在于，使用 rdbms 方法，每个数据库读取器都应该有一个特殊的 xml 解析层。（还有关于 xml，您参考了[为什么我会选择在关系数据库中存储和操作 XML？。](https://stackoverflow.com/questions/184727/why-would-i-ever-choose-to-store-and-manipulate-xml-in-a-relational-database)）

一般来说，如果您打算拥有一个单一的数据库客户端，您可以使用 xml/rdbms。

顺便说一句，您可以以其他方式使用 rdbms，而不是存储 xml - 定义“通用”结构。例如，您可以有“Entities (name, type, id)”表和“Attributes (entityId, name, type, value)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:05:49.347

如果您将 XML 存储在数据库中 - 您将获得性能和可维护性方面的灵活性（使用 xpath 等进行 XML 解析可能很冗长且容易出错，尤其是对于复杂且深度嵌套的 XML 结构）

如果您为每个 XML 存储表 - 您将获得性能、易用性、复杂性和灵活性

选择一种混合方法。将 XML 作为通用 XML 结构存储在 rdbms 表中（如答案之一中所建议）。通过这种方式，您可以拥有更少的表（更少的复杂性）并避免 XML 解析的所有性能问题。

# c# - 目录：在 C# 中给予完全控制

> ID：10681616
> 
> 赞同：3
> 
> 时间：2012-05-21T08:15:09.493
> 
> 标签：c#, winforms

我在 C# 中有这段代码，可以完全控制任何文件，效果很好。

但是我怎样才能完全控制任何目录呢？

提供对文件的完全访问权限的代码：

```
string fileName = @"d:\MyFile.mdb";
FileSecurity fSecurity = File.GetAccessControl(fileName);
fSecurity.AddAccessRule(new FileSystemAccessRule("Everyone", FileSystemRights.FullControl, AccessControlType.Allow));
File.SetAccessControl(fileName, fSecurity); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:18:38.867

以完全相同的方式，但使用`Directory.GetAccessControl`代替`File.GetAccessControl`：

```
DirectorySecurity dirSec = Directory.GetAccessControl("C:\\temp");
dirSec.AddAccessRule(new FileSystemAccessRule("Everyone", FileSystemRights.FullControl, AccessControlType.Allow));
Directory.SetAccessControl("c:\\temp", dirSec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:18:05.807

这是一个例子：

```
 DirectoryInfo myDirectoryInfo = new DirectoryInfo(@"C:\Dir1\");

        DirectorySecurity myDirectorySecurity = myDirectoryInfo.GetAccessControl();

        string User = System.Environment.UserDomainName + "\\" + "Everyone"; 

        myDirectorySecurity.AddAccessRule(new FileSystemAccessRule(User, 
                                          FileSystemRights.FullControl, 
                                          AccessControlType.Deny)); 

        myDirectoryInfo.SetAccessControl(myDirectorySecurity); 
```

# jquery - jquery masonry 动画项目

> ID：10681622
> 
> 赞同：2
> 
> 时间：2012-05-21T08:15:31.223
> 
> 标签：jquery, jquery-plugins

我已经实现了 jquery masonry 并玩了一下。

这是我的工作：http: [//jsfiddle.net/jackoverflow/JDAmS/](http://jsfiddle.net/jackoverflow/JDAmS/)

如您所见，单击“展开”将为宽度为“300px”的项目设置动画，并在单击“折叠”时折叠回正常宽度。

除了单击折叠所有项目的“第一项”外，一切正常。

有人能帮助我吗？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:34:47.190

从[砌体文档 - 帮助 - 第一项打破网格](http://masonry.desandro.com/docs/help.html#first_item_breaks_grid)：

> 如果您遇到重新调整第一个项目的大小的问题，并且所有其余项目不再适合网格，您很可能需要设置 columnWidth 选项。如果没有设置 columnWidth，Masonry 将使用第一项的宽度作为其列的大小。

```
$('#container').masonry({
  columnWidth: 220
}); 
```

# epoll - EPOLLPRI 这种情况什么时候发生？

> ID：10681624
> 
> 赞同：6
> 
> 时间：2012-05-21T08:15:38.650
> 
> 标签：epoll

当我设置我的 epoll 选项时，我可以看到 EPOLLPRI。

它解释了需要紧急“阅读”。

这实际发生在什么时候？

有没有办法在那个 PRI 模式下发送？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T06:54:40.760

`EPOLLPRI`在`epoll(7)`以及`POLLPRI`在`poll(2)`用于接收这些紧急数据。

有时需要通过连接发送高优先级（紧急）数据，而另一端可能有未读的低优先级数据。例如，用户界面进程可能正在解释命令并通过流连接将它们发送到另一个进程。当用户键入命令以取消所有未处理的请求时，用户界面可能已用尚未处理的请求填充流。您可以将其作为带外 (OOB) 数据或紧急数据发送，而不是让高优先级数据在低优先级数据之后等待处理。

[基于 Socket 的 IPC 教程](http://people.cis.ksu.edu/~singh/CIS725/Fall99/programs/sock_ipc_tut.html#TRANSFERRING)

要发送 OOB ，请`MSG_OOB`在`send(2)`.

# android - 在 Android MediaRecorder 或使用 AudioRecord 上同时录制两个频道？

> ID：10681634
> 
> 赞同：3
> 
> 时间：2012-05-21T08:16:31.340
> 
> 标签：android, audiorecord, android-mediarecorder, android-audiorecord, channels

我可以使用 MediaRecorder 或 AudioRecord 同时录制多个频道吗？我想要的是能够同时录制 MediaRecorder.AudioSource.VOICE_UPLINK 和 VOICE_DOWNLINK。可以分为两个单独的文件或具有两个通道的同一个文件。我尝试使用两个独立的 MediaRecorder 实例。但只有第一个记录。第二个说输入不可用。我还尝试同时使用一个 MediaRecorder 和一个 AudioRecord。同样，两者都单独工作，但是当 MediaRecorder 启动后出现 AudioRecord 时，会显示以下错误。

```
05-21 03:40:42.735: E/AudioRecord(1322): Could not get audio input for record source 1
05-21 03:40:42.735: E/AudioRecord-JNI(1322): Error creating AudioRecord instance:     initialization check failed.
05-21 03:40:42.825: E/AudioRecord-Java(1322): [ android.media.AudioRecord ] Error code -20     when initializing native AudioRecord object. 
```

我还尝试将第二个 MediaRecorder 放在一个新线程上。同样的结果。所以这让我想知道是否可以同时录制。我也在考虑是否可以使用一个带有两个通道的 AudioRecord 从 VOICE_UPLINK 和 VOICE_DOWNLINK 设置两个单独的输入，但如果可能的话，我不知道如何设置源。

提前致谢

编辑：

Lucifer 的回答意味着 AudioRecord 不能在同时运行多个实例的情况下被异步调用。有谁知道可以同时录制 AudioSource.VOICE_UPLINK 和 AudioSource.VOICE_DOWNLINK 的方式？也许使用具有多个通道的单个 AudioRecord 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:24:33.793

据我所知，AudioRecording 是一种同步方法。所以你不能同时使用做两个录音。

当您的代码用于第二个录制过程时，它会显示错误`05-21 03:40:42.735: E/AudioRecord(1322): Could not get audio input for record source 1`，这纯粹意味着录制通道已经被第一个忙碌了。

然而，这可以通过两个线程的并行处理来实现，即第一个线程记录特定的时间量。当控制通过两个第二个线程时，第一个线程停止录制，第二个线程开始录制，反之亦然。但是对于移动设备，这将变得更加复杂。所以最好一次录制一个频道。

您可以创建一个录制队列，它将逐个录制。

# android - 在模拟器 2.2 中安装 android 市场应用程序

> ID：10681637
> 
> 赞同：1
> 
> 时间：2012-05-21T08:16:46.800
> 
> 标签：android, emulation

我必须在android中构建一个推送通知的应用程序。我从网络教程中读到推送通知C2DM是必需的。对于c2dm，需要安装android市场应用程序。我能有关于如何安装android市场应用程序的指南吗我的模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:24:32.757

对于推送通知的实现，你真的不需要市场应用程序，看看这个答案 [Android C2DM Push Notification](https://stackoverflow.com/questions/6276342/android-c2dm-push-notification)

和教程 [http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/)

# uitableview - UItableviewcell 从我的 UITableViewCell 类中设置自定义高度

> ID：10681640
> 
> 赞同：1
> 
> 时间：2012-05-21T08:17:01.513
> 
> 标签：uitableview, heightforrowatindexpath

假设我创建了 myTableViewCell 类：

```
#import "MyTableViewCell.h"

@implementation MyTableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{

self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code

    UIImageView *imgSponsor=[[UIImageView alloc ] initWithFrame:CGRectMake(0,0,self.bounds.size.width,200)];

    imgSponsor.image = [UIImage imageNamed:@"imageFirstCell"];

    [self.contentView addSubview:imgSponsor];
}
return self;
}

[...]

@end 
```

除了通过关联的 tableviewcontroller 方法 (heightForRowAtIndexPath..) 运行之外，我可以在此类中为该单元格设置默认高度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:22:43.697

你可以像在`MyTableViewCell.h`-

```
-(void)layoutSubviews {  
    self.frame = //Define your frame;

    [super layoutSubviews];
} 
```

# php - Joomla 框架问题

> ID：10681652
> 
> 赞同：0
> 
> 时间：2012-05-21T08:17:51.177
> 
> 标签：php, joomla, themes

我打算给我一个新的网站。我选择了 Joomla 作为我的 CMS。但在开始之前，我有两个问题：

1.  是否可以（并且容易）动态更改主题？以便用户可以选择替代主题？

2.  你对框架有什么看法？特别是对于 Joomla。我应该用一个吗？如果是，你建议哪一个？（一个免费的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:39:14.057

1.  是的，用户可以即时切换模板。看到[这个扩展](http://extensions.joomla.org/extensions/style-a-design/templating/7466)。

2.  Joomla！有自己的内置[MVC 框架](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)，如果您开发自己的组件，您将看到并使用它。无需在其中使用另一个框架。

# javascript - 通过 javascript 从 LinkedIn API 获取结果

> ID：10681653
> 
> 赞同：0
> 
> 时间：2012-05-21T08:17:55.200
> 
> 标签：javascript, variables, undefined, linkedin

首先感谢您阅读本文。我在使用 javascript 获取 Linkedin 登录 API 提供的数据时遇到了一些问题。这是脚本：

```
 <script type="text/javascript">
    function onLinkedInAuth() {
    IN.API.Profile("me").fields(["firstName","lastName","headline","summary","location","educations","skills"]).result(displayProfiles);
    }

function displayProfiles(profiles) {
     member = profiles.values[0];
     document.getElementById("name").value = member.firstName +" "+ member.lastName;
     document.getElementById("pos").value = member.headline;
     document.getElementById("city").value = member.location.name;
     document.getElementById("sum").value = member.summary;

     var i=0; 
      do {

            var oldHTML = document.getElementById('para').innerHTML;
            var newHTML = oldHTML + "<tr><td>" + member.educations.values[i].schoolName + "</td></tr>";
            document.getElementById('para').innerHTML = newHTML;
        i++;
      }
      while(i<=1);
      var v=0;
      do {
            var oldHTML = document.getElementById('tara').innerHTML;
            var newHTML = oldHTML + "<tr><td>" + member.skills.values[v].skill.name + "</td></tr>";
            document.getElementById('tara').innerHTML = newHTML;
        v++; 
      }
      while(member.skills.values[v].skill.name);

     document.getElementById("educ").value = member.educations.values[1].schoolName;
     document.getElementById("skills").value = member.skills.values[0].skill.name;
}
</script> 
```

这是获取用户信息的非常基本的脚本，其中包括用户的教育和专业背景。问题是 member.educations.values[i].schoolName 和 member.skills.values[v].skill.name 可以有多个值，我想将它们全部收集起来。

只要指定的字段不为空，它就可以工作，但它会输出一个错误，指出 member.skills.values[v] 未定义并且它不运行第二个循环。

我知道这个错误是非常基本的，但我在 javascript 中并不是那么好。

无论如何感谢您的帮助，祝您有美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:42:28.237

您应该检查返回值的长度，然后根据需要循环它们。类似于以下内容：

```
var educations = member.educations;
if(educations._total > 0) {
  for(var i = 0; i < educations._total; i++) {
    document.getElementById("educ").value += (i > 0) ? ', ' : '';
    document.getElementById("educ").value += educations.values[i].schoolName;
  }
} 
```

# java - java JSONObject 初始化返回 java.lang.OutOfMemoryError java Heap

> ID：10681658
> 
> 赞同：-3
> 
> 时间：2012-05-21T08:18:15.100
> 
> 标签：java, json

我有这个从打开的套接字获取的 JSON 对象：

```
{
 "action" : "login",
 "id" : "1554",
 "name": "asaf",
 "lat" : "26.519966",
 "long" : "-4.151437",
 "radius":"0", 
  "data":[
          {"id":"12345"},
          {"id":"1234"},
          {"id":"123"}
         ]
} 
```

当我在做的时候在我的代码里面：

```
stream = new JSONObject(input); 
```

（输入是我来自套接字的对象）我得到了 java.lang.OutOfMemoryError java Heap ..

实在想不明白为什么……

堆栈跟踪：

```
Exception in thread "Worker for Socket:     Socket[addr=/0:0:0:0:0:0:0:1,port=52571,localport=9001]" java.lang.OutOfMemoryError: Java     heap space
at java.util.Arrays.copyOf(Unknown Source)
at java.util.Arrays.copyOf(Unknown Source)
at java.util.ArrayList.ensureCapacity(Unknown Source)
at java.util.ArrayList.add(Unknown Source)
at org.json.JSONArray.<init>(JSONArray.java:117)
at org.json.JSONTokener.nextValue(JSONTokener.java:322)
at org.json.JSONObject.<init>(JSONObject.java:205)
at ServerWorker.run(ServerWorker.java:80) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:23:03.257

如果您的 JSON 响应很大，您可能可以这样做：

```
stream = new JSONObject(new JSONTokener(input)): 
```

# ios - HTTP 不支持的媒体类型问题

> ID：10681659
> 
> 赞同：0
> 
> 时间：2012-05-21T08:18:21.833
> 
> 标签：ios, wcf, http, iis

我将 WCF 与 ios 应用程序一起使用，当请求某些方法时，IIS 返回 415 错误，不支持的媒体类型。代理类是通过 wsdl2objc 生成的，来自 Windows 应用程序的相同调用工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:00:15.720

问题可能出在您的 WCF 服务配置中，特别是您正在使用的绑定。我想您已将其配置为使用自定义绑定`WSHttpBinding`或. 我不太确定如何修复它，但首先为标准配置您的服务并试一试。同时恢复您对 wsdl2objc 生成的代码所做的所有更改。 顺便说一句，使用 SOAP 1.2，我不确定是否可以使用它（我只测试过它）。`application/soap+msbin1``text/xml``BasicHttpBinding`
`WSHttpBinding``wsdl2objc``BasicHttpBinding`

# python - 如何从 GAE Python 的开发服务器（dev_appserver.py）提供电影文件？

> ID：10681661
> 
> 赞同：5
> 
> 时间：2012-05-21T08:18:27.070
> 
> 标签：python, google-app-engine

我正在尝试在 GAE python 开发环境中提供 mp4/video（使用 dev_appserver.py），但到目前为止我无法在我的浏览器上播放它。

由于开发服务器上发生了“Broken Pipe”错误，我能够在生产环境（在谷歌服务器上）播放它，问题可能是由浏览器的并行请求引起的。（如果我的理解是正确的，dev_appserver.py 是单线程的，无法处理并行请求。）

我尝试了 Chrome 的“--disable-preconnect”选项，但没有解决问题。

有什么解决方法吗？非常感谢您的建议。

编辑：电影文件存储为静态资源，我尝试直接访问它（没有使用视频标签）。

[版本信息]

*   操作系统：Ubuntu 12.04 LTE
*   浏览器：Chrome 19.0.1084.46、Firefox 12.0
*   GAE：Python - 1.6.5，
*   蟒蛇：2.7.3

[错误日志]

```
 INFO     2012-05-21 07:35:04,575 dev_appserver.py:2891] "GET /static/test.mp4 HTTP/1.1" 200 -
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 36240)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/home/chikashi/Development/google_appengine/google/appengine/tools/dev_appserver.py", line 2579, in __init__
    BaseHTTPServer.BaseHTTPRequestHandler.__init__(self, *args, **kwargs)
  File "/usr/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/usr/lib/python2.7/SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
---------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:36:02.503

任何很长的操作（例如提供电影）都会占用一个线程，直到它完成。由于开发服务器是单线程的，它唯一的工作线程必须等到下载完成才能处理下一个请求。

无论如何，生产 App Engine 环境没有这个问题，并且会很乐意为您的文件提供服务，只要它不是太大（我不记得限制）。

您也可以考虑从另一台服务器提供电影文件。根据您使用的带宽，有比 App Engine 更便宜的托管解决方案（即使没有一个像他们的那样酷;-)）

# rpm - 如何在 RPM 规范文件中运行 shell 命令？

> ID：10681664
> 
> 赞同：8
> 
> 时间：2012-05-21T08:18:38.243
> 
> 标签：rpm, rpm-spec

如何在规范文件中运行 shell 命令？我想执行类似的东西：

```
uname -r | sed s/(...stuff...)/(...stuff...) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T01:47:54.397

如果您需要在`%define`or`%global`或宏之类的东西中使用它，您可以使用“ `%(shell_command)`”。注意`()`不是`{}`。

# ios - 在动画期间保持 CAShapeLayer 蒙版静态

> ID：10681676
> 
> 赞同：4
> 
> 时间：2012-05-21T08:19:16.910
> 
> 标签：ios, core-animation

我正在尝试在圆形遮罩（使用 myImageView.layer.mask 设置）内旋转 UIImageView。问题是，每当我尝试旋转所述 UIImageView 时，遮罩都会随之旋转。这是一些代码。

设置面具：

```
 UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:CGPointMake(0, - 169)
                                                        radius:191 
                                                    startAngle:0.0
                                                      endAngle:2*M_PI 
                                                     clockwise:YES];    

    CAShapeLayer *shapeLayer  = [CAShapeLayer layer];
    [shapeLayer setFrame:myImageView.bounds];
    [shapeLayer setPath:[path CGPath]];
    myImageView.layer.mask = shapeLayer; 
```

动画片：

```
[UIView animateWithDuration:kRotationTime animations:^(void){        
    myImageView.transform = CGAffineTransformMakeRotation(angle);
}]; 
```

这基本上就是它的全部内容。一个 UIImageView 在一个固定位置的圆形遮罩内围绕它自己的中心旋转——这就是想要的效果。也许还有另一种构建视图层次结构的方法，以便 myImageView 和掩码是兄弟姐妹，但我没有走这条路。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T08:27:04.037

将图像视图放入一个额外的普通 UIView 超级视图中。在superview上设置图层蒙版。动画图像视图。

# matlab - 在 MATLAB R2010b 中对双精度值进行位移

> ID：10681677
> 
> 赞同：3
> 
> 时间：2012-05-21T08:19:17.120
> 
> 标签：matlab

我正在尝试对 MATLAB 2010b 中的双精度值执行位移右操作。似乎在较新的 MATLAB 版本中，这可以使用[bitsra()](http://www.mathworks.com/help/toolbox/fixedpoint/ref/bitsra.html)来完成，例如：

```
y = double(128);
bitsra(y,3) 
```

但此功能在旧版本中不可用。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T08:36:04.717

您可以使用该[`bitshift`](http://www.mathworks.co.uk/help/toolbox/fixedpoint/ref/bitshift.html)函数，该函数至少可从 MATLAB 2009a 获得。从文档

> `c = bitshift(a, k)`返回按`a`位移`k`位的值。
> 
> *   当`k`为正时，0 值位向右移入。
>     
>     
> *   当`k`为负数且`a`无符号时，或有符号且正数时，0 值位向左移入。
>     
>     
> *   当`k`是负数并且`a`是有符号和负数时，1 值位向左移入。

在 MATLAB 2012b 上

```
>> bitsra(128, 3)

ans =

    16 
```

在 MATLAB 2009a 上：

```
>> bitshift(128, -3)

ans =

    16 
```

**编辑：** `bitshift`适用于任何*定点*数据类型，尽管调用生成的错误消息`bitshift(128.5, -3)`表明它需要整数值。因此`bitshift(128.5, -3)`，例如，将不起作用`128.5`，因为默认情况下，它是一个浮点双精度变量。从文档中，`bitshift`您可以使用`fi`浮点工具箱中的函数来创建*定点数*。因此，要使用分数，可以执行类似的操作

```
>> bitshift(fi(128.5), -3)

ans =

    16.025 
```

# javascript - jquery悬停和选定的问题

> ID：10681683
> 
> 赞同：0
> 
> 时间：2012-05-21T08:19:36.510
> 
> 标签：javascript, jquery, css

[http://www.kars4kids.org/charity/v2/nirangahtml/program_pop/meet_animals.asp](http://www.kars4kids.org/charity/v2/nirangahtml/program_pop/meet_animals.asp)

上面的链接，当我选择下面的图标之一时。它更改为选定状态，但问题是我需要限制悬停效果并进一步选择该 Icon 。（因为我正在使用图像更改）。

下面是我完整的 jquery 代码。

```
$(document).ready(function(){
    $('#animal_content_text_horse').css("display", "block");
    $('#animal_pic_horse_span').css("display", "block");
    $('#page_animal_img_horse').css("display", "block");

$('.animal_thumb_link').each(function() {

    $(this).click(function(e) {
    e.preventDefault();
    default_set($(this).attr('id'));

    $(".animal_thumb_link").removeClass("thumbselected");
    $(this).addClass("thumbselected");
    $(".animal_thumb_link").find('img').addClass("imgHoverable");
    $(this).find('img').removeClass("imgHoverable");

   });  

});

       // Change the image of hoverable images
       $(".imgHoverable").hover( function() {
           var hoverImg = HoverImgOf($(this).attr("src"));
           $(this).attr("src", hoverImg).hide().fadeIn(0);
         }, function() {
           var normalImg = NormalImgOf($(this).attr("src"));
           $(this).attr("src", normalImg).show();
         }
       );

    function HoverImgOf(filename)
    {
       var re = new RegExp("(.+)\\.(gif|png|jpg)", "g");
       return filename.replace(re, "$1_r.$2");
    }
    function NormalImgOf(filename)
    {
       var re = new RegExp("(.+)_r\\.(gif|png|jpg)", "g");
       return filename.replace(re, "$1.$2");
    }

});

function default_set(obj12){

var arr = ["horse_content", "camel_content", "peacock_content", "goat_content", "donkey_content", "rooster_content", "sheep_content", "alpacas_content", "cynthia_content", "rabbit_content", "cow_content"];
var arr2 = ["../images/horse_thumb.gif", "../images/camel_thumb.gif", "../images/peacock_thumb.gif", "../images/goat_thumb.gif", "../images/donkey_thumb.gif", "../images/rooster_thumb.gif", "../images/sheep_thumb.gif", "../images/alpacas_thumb.gif", "../images/cynthia_thumb.gif", "../images/rabbit_thumb.gif", "../images/cow_thumb.gif"];

for ( var i = 0; i <= arr.length; i++ ) {
if ( arr[ i ] === obj12 ) {
    old_url = $("#" + obj12).children('img').attr('src');
    new_url = old_url.replace(/thumb/,'thumb_r');
    $("#" + obj12).children('img').attr('src',new_url);
}else{
    $('#' +arr[ i ]).children('img').attr('src',arr2[ i ]);
}

}

}

function load_page(obj1,obj2,obj3){
    /* detect current div if so hide */
    current_pagepharadiv = document.getElementById("pagepharadiv_hidden").value;
    current_pageheadertext = document.getElementById("pageheadertext_hidden").value;
    current_pageimage = document.getElementById("pageimage_hidden").value;

    $('#' + current_pagepharadiv).css("display", "none");
    $('#' + current_pageheadertext).css("display", "none");
    $('#' + current_pageimage).css("display", "none");

    image_hover(obj1);
    image_hover(obj2);
    $('#' + obj3).fadeIn("fast");

    //image_hover(obj3);
    //$('#' + obj1).fadeIn("fast");
    //$('#' + obj2).fadeIn("fast");
    document.getElementById("pagepharadiv_hidden").value = obj1;
    document.getElementById("pageheadertext_hidden").value = obj2;
    document.getElementById("pageimage_hidden").value = obj3;

} 
```

请各位大侠指教，加油！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:04:28.517

在我看来，你真的让事情变得比他们需要的更复杂。以下是我将如何实现该页面：

*   底部方块作为div，使图像透明png
*   使用 css 更改底部方形颜色：hover
*   在服务器上为 div 中的每个动物生成整个顶部内容：因此您有 11 个 div 一个接一个，而不必在 3 个位置隐藏/显示内容。在下面的代码示例中，我假设他们有类`animal-content`
*   将每个顶部 div 的 id 作为 html5 数据属性添加到相应的拇指链接

这样，您在 jQuery 中需要做的就是：

```
$(".animal_thumb_link").click(function() {
  var topId = $(this).data("topId");
  $(".animal_thumb_link").removeClass("thumbselected");
  $(this).addClass("thumbselected");

  $(".animal-content").toggle(function() { return this.id === topId; });
}); 
```

# sql-server - 无法将行从一个数据库复制到 SQL Server 上不同服务器上的另一个数据库

> ID：10681686
> 
> 赞同：2
> 
> 时间：2012-05-21T08:19:45.567
> 
> 标签：sql-server, database, copy

我试图将一行从一个数据库复制到不同服务器上的另一个数据库，这是查询：

```
set identity_insert ms_tpl on

INSERT ms_tpl select * from [10.24.0.2].[MILKP].[dbo].[ms_tpl] where [id] = 3076

set identity_insert ms_tpl off 
```

当我按 F5 时，我收到如下错误消息：

> 消息 8101，第 16 层，状态 1，第 3 行
> 
> 只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表“ms_tpl”中的标识列指定显式值。

我的查询有错误吗？如何解决这个问题呢？

更多信息：在数据库上`ms_tpl`，有一列称为`id`自动增量。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T08:22:01.227

> **只有在使用列列表** 并且 IDENTITY_INSERT 为 ON时，才能为表“ms_tpl”中的标识列指定显式值。

不要使用`*`. 列出您的列：

```
INSERT into ms_tpl (col1, col2, ...) select col1, col2, ... from ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:23:41.430

在插入语句中添加列列表

```
INSERT ms_tpl column1, column2, ... 
```

这将解决问题

# php - 内部while循环不起作用..它仅限于一行

> ID：10681693
> 
> 赞同：0
> 
> 时间：2012-05-21T08:20:13.850
> 
> 标签：php, mysql

> **可能重复：**
> [内部while循环不起作用](https://stackoverflow.com/questions/10680530/inner-while-loop-not-working)

这是我项目网页中的一段代码。在这里，我想显示用户选择的类别，然后想显示属于类别的主题。在那里，用户可能有超过 1 个类别，没问题我可以在我的第一个 while 循环中打印所有这些类别……但问题是当我尝试打印主题时，结果只有一行……还有更多主题在每个类别中。谁能告诉我发生了什么？

这是我的代码....注意：两个查询都正常工作..我尝试了那些用户 mysql 客户端程序。

```
 <?php

    require_once ('../../includes/config.inc.php');
    require_once( MYSQL1 );

    $outQuery = "SELECT institute_category.category_id, category_name
            FROM institute_category
            INNER JOIN category ON institute_category.category_id = category.category_id
            WHERE institute_category.institute_id = $instituteId";  

    $outResult = mysqli_query( $dbc, $outQuery);

    while ( $outRow = mysqli_fetch_array ( $outResult, MYSQLI_ASSOC) )   {

        $categoryId = $outRow['category_id']; 
        $category = $outRow['category_name']; 

        echo '<fieldset class="alt">
                <legend><span>Category : <em style="color: red;">' . $category . '</em></span></legend>';

                    $innerQuery = "SELECT category_subject.category_id, category_subject.subject_id, subjects
                            FROM category_subject
                            INNER JOIN category ON category_subject.category_id = category.category_id
                            INNER JOIN subject ON category_subject.subject_id = subject.subject_id
                            WHERE category_subject.category_id = $categoryId";  

                    $innerResult = mysqli_query( $dbc, $innerQuery);

                    $c = $i = 0;

                        echo '<table class="form_table" ><tr>'; 

                                while($innerRow = mysqli_fetch_array( $innerResult, MYSQLI_ASSOC  )){

                                    // if remainder is zero after 2 iterations (for 2 columns) and when $c > 0, end row and start a new row:  
                                    if( ($c % 2) == 0 && $c != 0){
                                        echo "</tr><tr>";
                                    }

                                    echo '<td width="50%"><input type="checkbox" name="subject[]"  value="' . $innerRow['category_id'] . ":" . $category . ":"  . $innerRow['subject_id'] . ":". $innerRow['subjects'] . '" />&nbsp;&nbsp;' . $innerRow['subjects'] . '</td>' . "\n";

                                    $c++; 

                                } // while..
                                    // in case you need to fill a last empty cell:
                                    if ( ( $i % 2 ) != 0 ){

                                    // str_repeat() will be handy when you want more than 2 columns
                                      echo str_repeat( "<td>&nbsp;</td>", ( 2 - ( $i % 2 ) ) );
                                    }
                                echo "</tr></table>";   

    } 

echo '</fieldset>'; 
?> 
```

这是我的 HTML

```
 good<fieldset class='alt'>
<legend><span>Category : <em style='color: red;'>grade 1 - 4</em></span></legend>
    <table class='form_table'><tr>
    <tr>
        <td width='50%'><input type='checkbox' name='subject[]' value='2:grade 1 - 4:2:Art' />&nbsp;&nbsp;Art</td>
        <td width='50%'><input type='checkbox' name='subject[]' value='2:grade 1 - 4:3:Art & Craft' />&nbsp;&nbsp;Art & Craft</td>
    </tr>
    <tr>
        <td width='50%'><input type='checkbox' name='subject[]' value='2:grade 1 - 4:4:Bialogy' />&nbsp;&nbsp;Bialogy</td>
        <td width='50%'><input type='checkbox' name='subject[]' value='2:grade 1 - 4:5:Buddhism' />&nbsp;&nbsp;Buddhism</td>
    </tr>
    </table>
<fieldset class='alt'>
    <legend><span>Category : <em style='color: red;'>grade 5 (scholarship exam)</em></span></legend>
        <table class='form_table'><tr>
            <tr>
            <td width='50%'><input type='checkbox' name='subject[]' value='3:grade 5 (scholarship exam):1:Agro & Food Technology' />&nbsp;&nbsp;Agro & Food Technology</td>
            <td width='50%'><input type='checkbox' name='subject[]' value='3:grade 5 (scholarship exam):2:Art' />&nbsp;&nbsp;Art</td>
            </tr>
    <tr>
        <td width='50%'><input type='checkbox' name='subject[]' value='3:grade 5 (scholarship exam):3:Art & Craft' />&nbsp;&nbsp;Art & Craft</td>
        <td width='50%'><input type='checkbox' name='subject[]' value='3:grade 5 (scholarship exam):4:Bialogy' />&nbsp;&nbsp;Bialogy</td>
    </tr>
    </table>
        <fieldset class='alt'>
    <legend><span>Category : <em style='color: red;'>grade 6 - 10</em></span></legend>
        <table class='form_table'><tr>
    <tr>
        <td width='50%'><input type='checkbox' name='subject[]' value='4:grade 6 - 10:2:Art' />&nbsp;&nbsp;Art</td>
        <td width='50%'><input type='checkbox' name='subject[]' value='4:grade 6 - 10:3:Art & Craft' />&nbsp;&nbsp;Art & Craft</td>
    </tr>
    <tr>
        <td width='50%'><input type='checkbox' name='subject[]' value='4:grade 6 - 10:4:Bialogy' />&nbsp;&nbsp;Bialogy</td>
        <td width='50%'><input type='checkbox' name='subject[]' value='4:grade 6 - 10:5:Buddhism' />&nbsp;&nbsp;Buddhism</td>
    </tr>
    </table>
</fieldset> 
```

任何意见都非常感谢..

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:08:06.580

Since you fetch your rows in the inner loop into an associative array, and the key is the `category_id`, every iteration will replace the result of the previous one. I think you should use `mysqli_fetch_row()` instead.

# reporting-services - SSRS 中的“仅打印”分页符

> ID：10681707
> 
> 赞同：1
> 
> 时间：2012-05-21T08:21:26.657
> 
> 标签：reporting-services, printing

我在 SSRS 中有一份长篇报告，其中包含 3 个 tablix。在浏览器中查看时，我希望将它放在一个页面中，但是在打印时，我希望将每个 tablix 放在它自己的页面上。是否可以定义仅适用于打印的分页符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T04:00:10.747

您可以进行有条件的分页符，但我认为您想要做的这个问题是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T16:12:17.053

看看这是否有帮助，背后的想法是在我的页脚中插入一个文本框并仅在偶数页上打印此文本框：

=iif(Globals!PageNumber Mod 2,True,False)

让我知道这个是否奏效

# ios - 在 UITextField 中输入值，使用实体类中的方法，需要在 TableView 中显示值

> ID：10681708
> 
> 赞同：0
> 
> 时间：2012-05-21T08:21:32.033
> 
> 标签：ios, uitableview, core-data

我在我的视图控制器中调用方法 doSomething。该方法在我的超类和子类中声明（这些类用于我的 3 个实体 - 1 是其他 2 的父类）。超类被称为 SuperClass （不是真的，而是为了提问）。我为名为 superClass 的类创建了一个实例。

[超类做某事];

该方法返回一个字符串，这个返回的字符串应该是用户在 ViewController 中声明的 UITextField 中输入的文本。我不能让它工作。当一切都包含在 VC 中时，我让它工作正常，但现在我不得不使用实体类，如果超类没有返回值，它会在子类中查找。该属性是要返回的名称。我需要在 headingText (UITextField) 中输入值，让 doSomething (method) 返回存储在 superClass.name 中的值，然后 cell.displayText.text = superClass.name 将显示该值。非常感谢任何和所有帮助！谢谢！

超类.m

```
#import "SuperClass.h"

@implementation SuperClass

@dynamic name;

-(NSString *)doSomething
{

    return self.name;
}

@end 
```

子类A.m

```
#import "SubClassA.h"  //SubClassA.h imports SuperClass.h

@implementation SubClassA

@dynamic body;
@dynamic heading;

-(NSString *)doSomething
{
   [super doSomething];

   return self.name;
}

@end 
```

视图控制器.m

```
- (IBAction)donePressed:(id)sender {

    AppDelegate* appDelegate = ( AppDelegate* ) [ [UIApplication sharedApplication]      delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    SuperClass *superClass = [NSEntityDescription
                        insertNewObjectForEntityForName:@"SuperClass"
                        inManagedObjectContext:context];

   superClass.name = headingText.text; //headingText is UITextField

   NSString *fromDoSomething = [superClass doSomething];

   // I'm missing something here!

  [superClass doSomething];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%s",__FUNCTION__);

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.textLabel.font = [UIFont systemFontOfSize:19.0];
    }

    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
    SuperClass *superClass = (SuperClass *)object;
    superClass.name = superClass.doSomething;

    cell.textLabel.text = superClass.name;

    return cell;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T06:26:54.683

这是我的最终代码。我将值（属性“名称”）作为参数传递。

```
- (IBAction)donePressed:(NSString*) name {

    AppDelegate* appDelegate = ( AppDelegate* ) [ [UIApplication sharedApplication]      delegate];

    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    SuperClass *superClass = [NSEntityDescription
                              insertNewObjectForEntityForName:@"SuperClass"
                              inManagedObjectContext:context];

    superClass.name = headingText.text;  //headingText is UITextField on ViewController

    [superClass doSomething]; //doSomething is method in entity class

    NSError *error;
    BOOL success = [self.managedObjectContext save:&error];
    if (!success)
    {
        NSLog(@"%@", [error localizedDescription]);
    }

    [self fetchResults];

    [self.tableView reloadData];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:45:21.810

我没有查看你的接口文件，所以我不知道你是否继承了超类，但如果你继承了并且你想重写那个方法，那么你重写同名的方法

`[super doSomething]`

`[super doName]`当你的方法名称是`doSomething`.you 应该覆盖它时，你是如何覆盖 doName的

```
[super doSomething]; 
```

覆盖方法意味着您正在调用具有相同名称而不是子类的超类的方法。

# python - 使用烧瓶 zodb 的 LockError

> ID：10681709
> 
> 赞同：2
> 
> 时间：2012-05-21T08:21:33.210
> 
> 标签：python, flask, zodb

我在[使用](http://flask.pocoo.org/). [_](http://readthedocs.org/docs/flask-zodb/en/latest/) _ 每次我尝试使用数据库例如设置默认值时：`mod_wsgi`

```
from flaskext.zodb import zodb, List

db = ZODB(app)
app.config.from_pyfile('settings.py') # here I have defined ZODB_STORAGE = "/home/username/webapps/myapp/htdocs/Data.fs"

@app.before_request
def set_db_defaults():
   if 'entries' not in db:
       db['entries'] = List() 
```

或在这样的视图中：

```
@app.route('/add', methods=['POST'])
def add_entry():
   db['entries'].append(request.form)
   flash('New entry was successfully posted')
   return redirect(url_for('show_entries')) 
```

我收到以下错误：

```
[Sat May 19 16:52:30 2012] [error] [client 127.0.0.1]
self._lock_file = LockFile(file_name + '.lock')
[Sat May 19 16:52:30 2012] [error] [client 127.0.0.1]   File
"/home/userame/.virtualenvs/myapp/lib/python2.7/site-packages/zc/lockfile/__init__.py",
line 76, in __init__
[Sat May 19 16:52:30 2012] [error] [client 127.0.0.1]     _lock_file(fp)
[Sat May 19 16:52:30 2012] [error] [client 127.0.0.1]   File
"/home/username/.virtualenvs/myapp/lib/python2.7/site-packages/zc/lockfile/__init__.py",
line 59, in _lock_file
[Sat May 19 16:52:30 2012] [error] [client 127.0.0.1]     raise
LockError("Couldn't lock %r" % file.name)
[Sat May 19 16:52:30 2012] [error] [client 127.0.0.1] LockError:
Couldn't lock '/home/username/webapps/myapp/htdocs/Data.fs.lock' 
```

该应用程序在开发环境中运行良好，我不认为存在权限问题，因为我尝试设置：

```
ZODB_STORAGE = "/tmp" 
```

并引发了同样的异常。我不明白为什么会发生这种情况以及如何避免这种错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T09:25:53.110

您正在尝试从多个进程打开 ZODB；大概在开发中您只使用一个 WSGI 进程。这基本上是[ZODB 中 zc.lockfile.LockError](https://stackoverflow.com/questions/5128807/zc-lockfile-lockerror-in-zodb)的欺骗。

您的选择是：

1.  将您的生产环境限制在一个进程中。

2.  使用 ZEO，见参考问题；zodburi[等价物](http://zodburi.readthedocs.org/en/latest/#zeo-uri-scheme)是`zeo://localhost:9100`.

3.  使用 RelStorage。您可以使用[ZConfig URI 方案](http://zodburi.readthedocs.org/en/latest/#zconfig-uri-scheme)进行连接，前提是 RelStorage egg 可用。[这在旧`repoze.zodbconn`名称](http://pypi.python.org/pypi/RelStorage#configuring-repoze-zodbconn)下的 RelStorage 文档中有记录。

# android - 如何在 android 应用程序上支持 WVGA——仅限

> ID：10681714
> 
> 赞同：0
> 
> 时间：2012-05-21T08:21:55.680
> 
> 标签：android

我正在开发一个我只想在 WVGA 设备上运行的 android 游戏。我如何限制其他分辨率设备。

普通屏幕，高密度有 WVGA 设备，但中低密度设备也是其中的一部分。如何限制我的应用程序在大屏幕和普通屏幕上运行（不包括低密度和中密度）

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:21:31.040

您可以在文件中添加`<support screens>`权限，`Manifest`如下所示：

```
 <supports-screens 
            android:largeScreens="true"
            android:normalScreens="false" 
            android:smallScreens="false"/> 
```

请阅读此文档链接：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# url - 如何检查我的网站正在使用哪些外部连接

> ID：10681727
> 
> 赞同：1
> 
> 时间：2012-05-21T08:23:02.930
> 
> 标签：url, google-maps-api-3

我不能 100% 确定这是否是一个编程问题，但我确实相信我针对这个问题的目标受众是正确的。

我已经为应用程序构建了一个基于 Web 的前端。现在前端将部署到客户的机器（基于本地主机的网站）。但是，此前端使用 Google Maps V3 和其他一些外部组件。它将需要互联网访问，但客户网络是高度安全的。我的问题从这里开始。

为了确保一切按计划进行，我们需要允许在启动网页时建立连接，所以我需要一个我的前端在启动时使用的 URL 列表。我主要需要谷歌地图网址，它们种类繁多（googleis.com，gstatic.com，...）

如何获取这些 URL 的列表？是否有任何 Google 文档（没有找到）？

我考虑过使用 Firebug 并在“网络”选项卡中列出所有条目。但是，这可以扩展到大约 2000 个项目（包括从本地网站加载的所有图像、脚本、CSS 样式表等）。

或者是否有一种工具/解决方法可以轻松找出应该明确允许哪些连接以使网站正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:40:13.533

您使用 Firebug - Network 选项卡的方法很好。Chrome 开发者工具 - 网络视图也非常好。我还没有看到地图加载的所有内容的列表，但那是因为它会根据您设置地图的方式而有所不同。我知道 Google 会根据您的选择努力仅加载您的地图所需的内容。

因此，如果您只使用选定的地图控件，Google 将尝试将图像下载限制为显示您的地图所需的控件所需的内容。当然，如果您包含其他项目，例如在加载绘图工具的 URL 上使用参数 ( `libraries=drawing`)，您将有额外的网络加载。Google 将这些“额外”项目定义为库，以避免加载所有内容；只有那些需要它们的人必须加载它们。

除了设置地图并查看加载的内容之外，我想不出其他选择。

# javascript - jquery.mobile 覆盖 Jquery UI 主题：

> ID：10681734
> 
> 赞同：1
> 
> 时间：2012-05-21T08:23:32.367
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

当我嵌入`jquery.mobile-1.1.0.css`并`jquery.mobile-1.1.0.js`在我的项目中时，它会覆盖我已经使用的`Jquery UI`主题：

意味着我的所有按钮都变成`white rounded shape`了移动网站中使用的按钮，并且 `Center loading image circle`始终存在。然后我把这两个都放在`top of all scripts and stylesheets`了 jquery UI 滑块上，其他的东西都不能正常工作但`buttons problem and that center images circle prolem`消失了。

谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:40:44.083

`jquerymobile`覆盖一些`css`使用的类`jquery-ui`。至于为什么即使将脚本移到顶部它也不起作用是因为`jquerymobile`框架在准备好文档时会自动增强某些元素（您可以通过配置一些默认选项来指定不增强某些元素，例如

`$.mobile.selectmenu.prototype.options.nativeMenu`用于选择菜单等。

某些元素的增强可以通过不为它们提供 jquerymobile 所需的数据属性来防止，但某些元素（如按钮）会自动增强，而无需提及任何特定于 jquerymobile 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:59:59.290

更改它们在主页中的包含顺序

```
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.18/jquery.mobile-1.1.0.css"></script>
<script src="http://code.jquery.com/ui/1.8.18/jquery.mobile-1.1.0.js"></script> 
```

到

```
<script src="http://code.jquery.com/ui/1.8.18/jquery.mobile-1.1.0.css"></script>
<script src="http://code.jquery.com/ui/1.8.18/jquery.mobile-1.1.0.js"></script>
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script> 
```

最后放置要在该页面上的文件（样式表），

您可以在 Chrome 中查看

检查一些`div`并查看任何页面中的样式，div 的样式在设置时更改为最后附加的某些样式。

如果两种样式在同一个文件中，则两种样式（div 的样式）都适用于该 div，但附加的样式来自该文件的最后几行

# mysql - 如何在给定 id 的匹配表中选择相互匹配的用户

> ID：10681736
> 
> 赞同：0
> 
> 时间：2012-05-21T08:23:38.817
> 
> 标签：mysql, sql, many-to-many

只有当 id_user_a 和 id_user_b 对于给定的用户 ID 相互匹配时，我才需要选择用户。

```
users                  // SQL Statements: http://pastebin.com/w34qQv0g
id username
1  user1
2  user2
3  user3
4  user4

matches
id_user_a id_user_b
1         2
2         1
1         4
4         1 
```

正如您在上面看到的，对于给定的用户 id 1，匹配表中双向匹配的 id 是 id=2 和 id=4。因为第一个匹配第二个，反之亦然（1-2 和 2-1 :: 1-4 和 4-1）。

对于给定的 id 4，只有一个 id 在两个方向（1-4 和 4-1）上匹配，然后只有 id=1 在两个方向上与 id 4 匹配。我想选择在两个方向上匹配的 id给定的 id。这个概念很清楚，不是吗？但是，我如何在选择语句中做到这一点？谁能帮助我？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:41:33.037

对于 id 4：

```
SELECT
distinct m1.id_user_b
FROM 
MATCHES M1
JOIN MATCHES M2 ON M1.ID_USER_A = M2.ID_USER_B AND M2.ID_USER_A = M1.ID_USER_B
WHERE M1.ID_USER_A = 4 
```

并将4更改为参数。

# python - Gtk.Treeview 通过信号和代码取消选择行

> ID：10681740
> 
> 赞同：3
> 
> 时间：2012-05-21T08:23:48.007
> 
> 标签：python, c, gtk, pygobject, gtktreeview

我正在使用 PyGObject 但我认为这是一个可以适用于所有 GTK 的问题，所以如果有人知道如何使用 C 或任何东西也应该在 python 中工作。

我有两个树视图，活动和非活动，我从 Sqlite 数据库加载数据，我可以交换和拖放项目从一个到另一个。这只是一个美学的事情，如果我单击一个树视图上的一个项目，我希望取消选择另一个之前选择的项目。

似乎没有人必须做类似的事情，因为我在网上没有找到任何关于它的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:47:28.920

冒着过于基本的风险（也许我误解了问题），要操作树视图选择，您使用`GtkTreeSelection`从`GtkTreeView.get_selection`. 您可以附加到此对象上的信号，更改当前选择等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:44:15.223

要关闭另一个视图中的选择，您可以获取其选择模式属性并将其设置为`GTK_SELECTION_NONE`。要在单击时重新打开它，我的想法是您可以捕获`grab-focus`信号，在该视图中将选择模式设置为单一，并在另一个视图中将选择模式设置为无：

```
 (connect view-1 'grab-focus
       (lambda args
         (set-mode (gtk-tree-view-get-selection view-1) "GTK_SELECTION_SINGLE")
         (set-mode (gtk-tree-view-get-selection view-2) "GTK_SELECTION_NONE"))) 
```

（该代码使用了[guile-gnome](http://www.gnu.org/software/guile-gnome/)包装器，但概念在任何语言绑定中都应该是相同的。）这种方法的一个问题是，现在为了进行选择，您必须单击树形视图两次 - 一次以获取焦点，然后再次进行选择。

# android - 即使用户转到 Activity B，Android WebView(Activity A) 音乐仍然会播放

> ID：10681742
> 
> 赞同：1
> 
> 时间：2012-05-21T08:24:00.050
> 
> 标签：android

我想找到当用户返回*主*活动时如何停止音乐的解决方案。

我的代码在下面，用户可以像往常一样回到*Activity A*但音乐仍然从*Activity B*播放。

我有第二个活动，如下代码：

# 布局 A

```
<Button
    android:id="@+id/buttonUrl"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="My Song" /> 
```

# Activity A 的 Java

```
public class MySongActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        final Context context = this;

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         final Button button = (Button) findViewById(R.id.buttonUrl);
         button.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {

                Intent intent = new Intent(context, WebViewActivity.class);

                startActivity(intent);
         }
     });
}
} 
```

# 布局 B

```
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/webView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:scrollbars="none" /> 
```

# Activity B的Java

```
public class WebViewActivity extends Activity {

WebView mWebView;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.playlist);

    mWebView = (WebView) findViewById(R.id.webView1);
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.getSettings().setAllowFileAccess(true);
    mWebView.loadUrl("http://m.orkun2u.com/msopheap/song/mysongs.htm");
}
private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

请帮助我。我非常感谢您的帮助。

**注意**：

我尝试了谷歌的所有方式，但仍然没有停止音乐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:36:06.993

关于Padma Kumar所说的还有一件事。停止的方法是使用该`dismiss`功能。

```
@Override
public void onPause() {
    mWebView.setVisibility(View.GONE);
    mWebView.destroy();
    super.onPause();
} 
```

*更新：*将功能从`dismiss()`到`destroy()`，更多信息：阅读此处：http: [//developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:31:44.150

//onPause 停止你的音乐

```
 public class MySongActivity extends Activity {
        public void onCreate(Bundle savedInstanceState) {
            final Context context = this;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

     final Button button = (Button) findViewById(R.id.buttonUrl);
     button.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {

            Intent intent = new Intent(context, WebViewActivity.class);

            startActivity(intent);
     }
 }); 
```

}

```
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    //stop the music here
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-06T12:05:00.690

我只是认为解决这个问题的最好方法不是`webView.destory()`在 Activity 中`onPause()`。

我觉得：

```
@Override  
protected void onResume() {  
    super.onResume();  
    webView.resumeTimers();  
    webView.onResume();
}

@Override  
protected void onPause() {  
    if (null != getWebView()) {  
        webView.pauseTimers();  
        webView.onPause();  
        webView.reload();  
    }  
    super.onPause();  
} 
```

尽我所能。

# python - 在Python的for循环中列出元素？

> ID：10681744
> 
> 赞同：0
> 
> 时间：2012-05-21T08:24:04.887
> 
> 标签：python, list

我有一个清单

```
a = ['1','2','3'] 
```

我的代码：

```
result=[]
for item in a:
    if item == '1': # 1
        result.append(item)
    else:
        result.append('haha') 
```

但它不起作用。我能做些什么？我得到：

```
result = ['haha', 'haha', 'haha'] 
```

我想：

```
result = ['1', 'haha', 'haha'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:34:25.443

您的代码是正确的，结果符合预期（请参见此处：http: [//ideone.com/ZZpPW](http://ideone.com/ZZpPW)）。

问题可能是以下之一：

1.  您的代码与您发布的代码不同。
2.  `a`不是`['1', '2', '3']`，而是例如。`[1, 2, 3]`（`1`整数不等于`'1'`字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:00:08.677

答案可以是一个单行列表表达式：

`result = [ x if x == "1" else "haha" for x in a ]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:27:57.920

缩进是错误的。它应该是 -

```
for item in a:
    if item == '1':
        result.append(item)
    else:
        result.append('haha') 
```

要使 'if' 语句成为 'for' 的一部分，你应该像上面那样缩进它。

# mysql - 如何使用 MySql 在此查询中使用 WHERE CLAUSE 应用 IF 条件

> ID：10681745
> 
> 赞同：3
> 
> 时间：2012-05-21T08:24:12.407
> 
> 标签：mysql, database, if-statement, where

这是我的 MySQL 查询，我在这个查询中有**一周**的问题。我不知道如何将 IF 条件与`WHERE`子句一起应用。

询问：

```
SELECT
*,
IFNULL((SELECT ur.user_rating FROM user_rating ur 
WHERE ur.vid_id = v.id AND ur.user_id = '1000'),'NULL') AS user_rating
FROM videos v
WHERE WEEK(v.video_released_date) = WEEK(NOW())
AND  
v.`is_done` = 1
ORDER BY v.admin_listing ASC; 
```

我想要 OR（如何将这个条件与 where 子句一起应用？）

```
IF( WEEK(v.video_released_date) = WEEK(NOW()) , WEEK(NOW()) , WEEK(NOW())-1)
=
IF( WEEK(v.video_released_date) = WEEK(NOW()) , WEEK(NOW()) , WEEK(NOW())-1) 
```

简报

如果视频发布日期已过且与本周不匹配，则适用前一周

我

当我像这样尝试自己时，他们将整个数据返回给我

```
SELECT
*,
IFNULL((SELECT ur.user_rating FROM user_rating ur 
WHERE ur.vid_id = v.id AND ur.user_id = '1000'),'NULL') AS user_rating
FROM videos v
WHERE IF(WEEK(v.video_released_date) = WEEK(NOW()),WEEK(NOW()),WEEK(NOW())-1)
= IF(WEEK(v.video_released_date) = WEEK(NOW()),WEEK(NOW()),WEEK(NOW())-1) 
AND  
v.`is_done` = 1
ORDER BY v.admin_listing ASC; 
```

我在这个查询中做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:29:58.393

尝试这个 -

```
 SELECT *,
           IFNULL((SELECT ur.user_rating FROM user_rating ur 
                   WHERE ur.vid_id = v.id AND ur.user_id = '1000'),'NULL') AS user_rating
    FROM videos v
    WHERE WEEK(v.video_released_date) = IF(WEEK(v.video_released_date) = WEEK(NOW()),WEEK(NOW()),WEEK(NOW())-1) 
    AND  v.is_done = 1
    ORDER BY v.admin_listing ASC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:27:51.023

使用*CASE WHEN THEN ELSE END*结构。您可以在文档中阅读有关它[的](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)更多信息。

```
SELECT *,
    IFNULL((SELECT ur.user_rating FROM user_rating ur 
        WHERE ur.vid_id = v.id AND ur.user_id = '1000'),'NULL') AS user_rating
    FROM videos v
    WHERE 
        WEEK(v.video_released_date) = 
            CASE WHEN WEEK(v.video_released_date) = WEEK(NOW()) 
            THEN WEEK(NOW()) ELSE WEEK(NOW())-1 END
    AND  
        v.`is_done` = 1
ORDER BY v.admin_listing ASC; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:27:39.207

好吧，看起来您通过这些比较 x 和 x `IF`。

x = x “总是”为真。

# android - Android，如何从 UI 中删除视图？

> ID：10681748
> 
> 赞同：2
> 
> 时间：2012-05-21T08:24:29.650
> 
> 标签：android, dynamic, view, add

在我的应用程序的主页中，服务器向我发送了一些标志。其中之一是广告标志。如果它设置为 true 我需要显示广告，如果它设置为 false 我不应该显示它。

现在，问题。我需要像这样将广告空间放在 XML 文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<RileativeLayout
    android:id="@+id/adv"
    android:layout_width="fill_parent"
    android:layout_height="100dip">

</RileativeLayout>

.
.
.
</LinearLayout > 
```

根据上面的代码，如果标志设置为 false，我不会显示广告，但差距仍留在我的屏幕上。如何动态地从我的代码中删除它并转移其他视图（这是它的打击）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:32:16.013

正如上面对您问题的评论中提到的：一个视图有几个不同的视图选项。

*   **View.VISIBLE：**这意味着它是可见的并且可以被用户看到。

*   **View.INVISIBLE：**这意味着视图仍在布局中，但用户无法看到（用户也无法与之交互）。

*   **View.GONE：**这意味着视图被销毁并且不再是它的一部分。

从你应该使用的布局中完全删除一个视图`View.GONE`，如果你要让它可见，你应该使用`View,INVISIBLE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:28:18.947

当你的标志为假时试试这个

```
add.setVisibility(View.GONE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:32:13.853

您可以通过更改视图的可见性来“删除”视图。利用

```
View ad = findViewById(R.id.adv);
ad.setVisibility(View.GONE); 
```

# php - PHP 中人类可读的日期参考，例如“上周一”

> ID：10681752
> 
> 赞同：1
> 
> 时间：2012-05-21T08:24:49.760
> 
> 标签：php, date, datediff

> **可能重复：**[使用 PHP 的 PHP 人类可读日期中的人类](https://stackoverflow.com/questions/4003476/human-readable-date-using-php)
> [可读、当前时间敏感的日期和时间格式](https://stackoverflow.com/questions/3259261/human-readable-current-time-sensitive-date-and-time-formatting-in-php)

我正在寻找一种以对话方式生成人类可读日期参考的方法，例如：

```
diff( '2012-05-15', '2012-05-21' ) == "last Tuesday"
diff( '2012-05-15', '2012-05-16' ) == "yesterday"
diff( '2012-05-15', '2012-05-17' ) == "on Tuesday"
diff( '2012-04-11', '2012-05-21' ) == "on the 11th of April" 
```

我调查了`strtotime()`，这似乎与我想要的相反。该解决方案不需要使用未来的日期，只是过去的日期。[我看到另一个问题在 JavaScript 中](https://stackoverflow.com/questions/3259261/human-readable-current-time-sensitive-date-and-time-formatting-in-php)询问未来日期的相同问题，但它并没有真正解决我的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:42:52.093

我认为[PHP：从时间戳生成相对日期/时间](https://stackoverflow.com/questions/2690504/php-producing-relative-date-time-from-timestamps)是您正在寻找的：

这是该问题的已接受答案中的代码（在此处复制，因为原始问题仅链接到粘贴箱）：

```
function time2str($ts)
{
    if(!ctype_digit($ts))
        $ts = strtotime($ts);

    $diff = time() - $ts;
    if($diff == 0)
        return 'now';
    elseif($diff > 0)
    {
        $day_diff = floor($diff / 86400);
        if($day_diff == 0)
        {
            if($diff < 60) return 'just now';
            if($diff < 120) return '1 minute ago';
            if($diff < 3600) return floor($diff / 60) . ' minutes ago';
            if($diff < 7200) return '1 hour ago';
            if($diff < 86400) return floor($diff / 3600) . ' hours ago';
        }
        if($day_diff == 1) return 'Yesterday';
        if($day_diff < 7) return $day_diff . ' days ago';
        if($day_diff < 31) return ceil($day_diff / 7) . ' weeks ago';
        if($day_diff < 60) return 'last month';
        return date('F Y', $ts);
    }
    else
    {
        $diff = abs($diff);
        $day_diff = floor($diff / 86400);
        if($day_diff == 0)
        {
            if($diff < 120) return 'in a minute';
            if($diff < 3600) return 'in ' . floor($diff / 60) . ' minutes';
            if($diff < 7200) return 'in an hour';
            if($diff < 86400) return 'in ' . floor($diff / 3600) . ' hours';
        }
        if($day_diff == 1) return 'Tomorrow';
        if($day_diff < 4) return date('l', $ts);
        if($day_diff < 7 + (7 - date('w'))) return 'next week';
        if(ceil($day_diff / 7) < 4) return 'in ' . ceil($day_diff / 7) . ' weeks';
        if(date('n', $ts) == date('n') + 1) return 'next month';
        return date('F Y', $ts);
    }
} 
```

# ruby-on-rails - Rails3：在多模型表单中显示验证错误？

> ID：10681753
> 
> 赞同：0
> 
> 时间：2012-05-21T08:24:54.683
> 
> 标签：ruby-on-rails, forms, validation

是否可以创建这种带有显示错误的表单，如简单模型？ [http://i.imgur.com/8t6ef.png](http://i.imgur.com/8t6ef.png)

我创建了两个模型......但是如果我填写错误的表格......错误消息将不会出现，并且错误 Rails 屏幕会告诉我，例如“验证失败：field1 不能为空......”

[http://i.imgur.com/6KvVh.png](http://i.imgur.com/6KvVh.png)

楷模：

```
class Step < ActiveRecord::Base

  #validates
  validates :tree_id, :presence => true, :numericality => true
  validates :is_first, :presence => true, :length => {:maximum => 1}
  validates :status, :presence => true, :numericality => true
  validates :step_type_id, :presence => true

  #relations
  belongs_to :step_type
  belongs_to :tree
  has_many :statements

  accepts_nested_attributes_for :statements 

end

class Statement < ActiveRecord::Base

  #validates
  validates :step_id, :presence => true, :numericality => true
  validates :title, :presence => true, :length => {:maximum => 255}
  validates :statement, :presence => true
  validates :help, :presence => true
  validates :is_last_version, :presence => true, :length => {:maximum => 1}

  #relations
  belongs_to :step
  has_many :transitions

end 
```

有什么例子或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:02:52.830

您认为以下几行？

```
<% if @statement.errors.any? %>
  <% flash[:notice] = "Please correct!" %>

    <% for message in @statement.errors.full_messages %>
        <li class="cf-messages-li"><%= message %></li>
    <% end %>

<% end %> 
```

# ios - Iphone Facebook IOS 上传图片需要太多时间？

> ID：10681754
> 
> 赞同：3
> 
> 时间：2012-05-21T08:24:59.667
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

我正在使用 Facebook IOS sdk 图形 API 将照片上传到我的 facebook 墙上。一切正常这里是我使用的常用代码：

```
// Here i am compressing the image
NSData *yourImageData= UIImageJPEGRepresentation([_images objectAtIndex:pageIndex],0.5);

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"Photo taken with my app", @"message", yourImageData, @"source", nil];

[_facebook requestWithGraphPath:@"/me/photos" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

所以我的问题是我应该进一步压缩我的图像吗？还是有其他方法可以更快地完成照片上传？

非常感谢，veer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:18:32.147

请更新到新的 SDK 3.0.8 并使用 FBRequest 类

[https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBRequest/#//api/name/requestForUploadPhoto](https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/class/FBRequest/#//api/name/requestForUploadPhoto)：

您可以在作为 SDK 的一部分（Hackbook 或 Scrumptuous）的示例应用程序中看到它是如何完成的。

谢谢！

# php - 从服务器图像 URL 转换为绝对地址

> ID：10681755
> 
> 赞同：1
> 
> 时间：2012-05-21T08:25:02.730
> 
> 标签：php

我想这是一个简单的问题，但我真的找不到任何可以帮助我的东西。

我正在使用图像下载脚本，为此我需要一个如下所示的图像 URL：“/home/clients/websites/w_apo/public_html/apo/wp-content/uploads/2012/05/Beautiful.jpg” [type1 ]

但我所拥有的是：“http://www.apo.com/wp-content/uploads/2012/05/Beautiful.jpg”[type2]

我试图编写一个函数，将类型 1 的 URL 返回到类型 2 的 URL，但它并没有那么好。这是它的外观：

```
function relativeToServerAddress($relativeURL) {
    $paths = explode('wp-content/', $relativeURL);
    $thePath = getcwd()."/wp-content"."/".$paths[1];
    return $thePath;
} 
```

有没有更好的方法来做到这一点？我试图找到一个预定义的函数但失败了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:50:45.510

```
$file = basename("http://www.apo.com/wp-content/uploads/2012/05/Beautiful.jpg");
return getcwd()."/wp-content/".$file; 
```

? 您需要告知我们您希望保留/从绝对 url 移动的目录；以上只是复制文件。

# sql - 在数据库中存储多个版本的值

> ID：10681762
> 
> 赞同：4
> 
> 时间：2012-05-21T08:25:20.157
> 
> 标签：sql, database, database-design

一个数据库设计问题。

我需要设计具有相同价值的多个版本的项目，例如多语言商店中的购物车产品。

说我有一个产品

```
CREATE TABLE product 
 id INT,
 name VARCHAR(64),
 description SMALLTEXT,
 whatever BOOL,
 another INT; 
```

和一个翻译表

```
CREATE TABLE product_language
 product_id INT,
 language_id INT,
 name VARCHAR(64),
 descripton SMALLTEXT; 
```

现在我的问题是......桌子是否`product`合理？`product`大多数商店只有一种语言，那么在表中保留默认语言的名称和描述以避免`JOINs`系统上只有一种语言时是否有意义？或者它会给我带来我无法预见的头痛？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T08:32:02.753

我会说获得 product_language 的 JOIN 是无关紧要的。RDBM 非常擅长执行高性能连接 :)。我认为使用“默认”名称和描述没有任何好处。如果没有匹配的特定语言可用，您必须同步值和/或在应用程序中进行特殊处理以显示默认名称和描述。

# php - 如何将内容放入数组

> ID：10681764
> 
> 赞同：-1
> 
> 时间：2012-05-21T08:25:26.133
> 
> 标签：php, arrays

我正在使用免费的 API 服务向我提供有关 IP 位置的信息，这是我正在使用的代码

```
$api = file_get_contents('http://api_site.com?ip=XX.XX.XX.XX');
// WHERE XX.XX.XX.XX Is IP and api_site.com is my provider 
```

输出如下（这是我的）

```
OK;XX.XX.XX.XX;EG;EGYPT;AL QAHIRAH;CAIRO;+02:00
// ok , IP , Country code , Country , Region , City , Time zone GMT 
```

现在如何将以下输出放入数组中，以便我可以轻松地显示它我使用了以下代码。

```
$api = file_get_contents('http://api_site.com?ip=XX.XX.XX.XX');
$info = array_shift(explode(";", api));
$message = "$info";
// Output is just "OK"
//OK;XX.XX.XX.XX;EG;EGYPT;AL QAHIRAH;CAIRO;+02:00
// I want get all sperated 
```

那么有什么方法可以让我爆炸`;`并得到所有并能够出现〜谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:28:27.943

你只需要爆炸。根本不要使用 array_shift 。这是一个例子：

```
$info = explode(";", api);
$message = spritnf('Country: %s', $info[3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:29:04.347

你为什么用`array_shift`？该函数将返回数组的第一个元素，将其从数组本身中删除。这应该足够了：

```
$api = file_get_contents('http://api_site.com?ip=XX.XX.XX.XX');
$info = explode(";", $api); 
```

如果要一起打印结果，则需要使用`implode`具有相同参数的函数`explode`

# c - 结构指针数组

> ID：10681765
> 
> 赞同：0
> 
> 时间：2012-05-21T08:26:00.980
> 
> 标签：c

我基本上是在尝试创建一个结构指针数组。这些指针中的每一个都应该指向同一结构数组的另一个元素，即 BLOCKS[2]。

这是我到目前为止所做的。

```
typedef struct bb {
      ..
      ..
      ..
    struct bb **successor;
} BLOCK;

BLOCK BLOCKS[10];

struct bb **A = malloc(sizeof(struct bb*)*5);        //create an array of pointers of type struct bb, 5 units i.e A[0]->A[4]. 

BLOCKS[0].successors = A                            //just assigning 
```

现在......如何将指针数组的第一个元素 A 分配给另一个结构？

我试过：

```
A[0] = &BLOCKS[6]; 
```

它编译得很好，但我得到了一个段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:03:24.437

你试过这个：

```
typedef struct bb {
      ..
      ..
      ..
    struct bb *successor;
} BLOCK;

BLOCK BLOCKS[10];

struct bb *A = malloc(sizeof(struct bb)*5);        //create an array of pointers of
type struct bb, 5 units i.e A[0]->A[4]. 

BLOCKS[0].successors = A[0]; 
```

因为在快速查看之后，我认为 ** 应该呈现为 * 并且您的 malloc 保留的内存不是 5 个结构的大小，而是 5 个指向该结构的指针的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:24:42.807

引用问题：*“**我基本上是在尝试创建一个结构指针数组。** ”*

结构指针数组应该是

```
BLOCK *ptrBlockArr[10]; //This an array of size 10, which can store 10 pointers to the structure BLOCK 
```

现在，由于这些是指针，您将为每个元素分配内存。这应该像

```
for(int i=0; i<10; i++)
{
   ptrBlockArr[i] = (BLOCK *)malloc(sizeof(BLOCK));
} 
```

您的问题还包括：*“**这些指针中的每一个都应该指向同一结构数组的另一个元素**”*。这可以像

```
for(int i=0; i<9; i++) // Run the loop till the last but one element
{
  ptrBlockArr[i]->successor = ptrBlockArr[i+1];
}
//Assign the last's element's sucessor as the first element. This will make it circular. Check if this is your intention
ptrBlockArr[9]->successor = ptrBlockArr[0] 
```

请注意，在您的结构`successor`中是`struct bb**`，而应该是`struct bb*`。

此外，您可以优化代码以将我上面显示的两个循环组合成一个循环。我将把它留给你自己学习和实施。

# emacs - Emacs org-mode：对文件的文本引用：行

> ID：10681766
> 
> 赞同：9
> 
> 时间：2012-05-21T08:26:08.323
> 
> 标签：emacs, lisp, org-mode, bookmarks

我正在使用`org-mode`in`Emacs`来记录我的开发活动。我必须不断手工完成的任务之一是描述代码区域。`Emacs`有一个很好的[书签列表](http://emacswiki.org/emacs/BookMarks)：用-创建一个书签，用`CTRL`-`x` `r` `m`列出它们。这非常有用，但不是我所需要的。`CTRL``x` `r` `l`

org-mode有链接的概念，该命令`org-store-link`会在任意文件中记录一个指向当前位置的链接，可以粘贴到org-file中。这个问题有两个方面：

*   它存储为 org-link，链接的位置不是直接可见的（只是描述）。
*   它以 format 存储`file/search`，这不是我想要的。

我需要有文本形式的书签，这样我就可以将它复制粘贴到 org-mode，如果需要，结束编辑它，使用如下简单格式：

```
absolute-file-path:line 
```

这必须从当前点位置获得。工作流程很简单：

*   转到我要记录的位置
*   调用函数：（`position-to-kill-ring`我会将其绑定到键盘快捷键）
*   转到`org-mode`缓冲区。
*   拉下位置。
*   根据需要进行编辑（有时我需要通过相对路径更改绝对路径，因为我的代码位于不同机器中的不同位置）

不幸的是，我`lisp`的不存在，所以我不知道该怎么做。我的问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T09:10:46.887

```
(defun position-to-kill-ring ()
  "Copy to the kill ring a string in the format \"file-name:line-number\"
for the current buffer's file name, and the line number at point."
  (interactive)
  (kill-new
   (format "%s:%d" (buffer-file-name) (save-restriction
                                        (widen) (line-number-at-pos))))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-21T16:44:30.113

你想使用`org-create-file-search-functions`and`org-execute-file-search-functions`钩子。

例如，如果您需要您描述的文本模式文件搜索，请使用以下命令：

```
(add-hook 'org-create-file-search-functions
      '(lambda ()
         (when (eq major-mode 'text-mode)
           (number-to-string (line-number-at-pos)))))

(add-hook 'org-execute-file-search-functions
      '(lambda (search-string)
         (when (eq major-mode 'text-mode)
           (goto-line (string-to-number search-string))))) 
```

然后`M-x org-store-link RET`将做正确的事情（将行号存储为搜索字符串）并且`C-c C-o`（即`M-x org-open-at-point RET`）将打开文件并转到该行号。

您当然可以检查其他模式和/或条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:20:30.120

我自己是一个 elisp 初学者，我认为它是一个很好的练习，瞧：

**编辑：**使用格式方法重写它，但我仍然认为不将其存储到杀戮环对我的工作流程的干扰较小（不了解你）。我还添加了添加列位置的功能。

```
(defvar current-file-reference ""  "Global variable to store the current file reference")

(defun store-file-line-and-col ()
  "Stores the current file, line and column point is at in a string in format \"file-name:line-number-column-number\". Insert the string using \"insert-file-reference\"."
  (interactive)
  (setq current-file-reference (format "%s:%d:%d" (buffer-file-name) (line-number-at-pos) (current-column))))
(defun store-file-and-line ()
  "Stores the current file and line oint is at in a string in format \"file-name:line-number\". Insert the string using \"insert-file-reference\"."
  (interactive)
 (setq current-file-reference (format "%s:%d" (buffer-file-name) (line-number-at-pos))))

(defun insert-file-reference ()
  "Inserts the value stored for current-file-reference at point."
  (interactive)
  (if (string= "" current-file-reference)
      (message "No current file/line/column set!")
    (insert current-file-reference))) 
```

没有经过广泛测试，但为我工作。只需点击**store-file-and-line**或**store-file-line-and-col**来存储当前位置和**insert-file-reference**以在点插入存储的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:50:43.607

顺便说一句，如果你想要比 FILE:LINE 更好的东西，你可以尝试使用`add-log-current-defun`（在 add-log.el 中）它应该返回当前函数的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-21T03:16:55.190

```
;; Insert a org link to the function in the next window
(defun insert-org-link-to-func ()
  (interactive)
  (insert (with-current-buffer (window-buffer (next-window))
        (org-make-link-string
         (concat "file:" (buffer-file-name)
             "::" (number-to-string (line-number-at-pos)))
         (which-function)
         )))) 
```

该函数生成以函数名作为描述的链接。打开两个窗口，一个是org文件，一个是src代码。然后`M-x insert-org-link-to-func RET`

# performance - 我应该使用 == 和 =:= 中的哪一个？

> ID：10681770
> 
> 赞同：6
> 
> 时间：2012-05-21T08:26:25.383
> 
> 标签：performance, coding-style, erlang

[等于和完全等于术语比较运算符之间](https://stackoverflow.com/questions/10329497/difference-between-equal-to-and-exactly-equal-to-term-comparison-operators)的差异解释了这种差异，但还有一个重要问题是：当我不将浮点数与其他事物进行比较时，我应该使用哪个？

“Pragmatic Programming Erlang”推荐 =:= 并说你应该对 == 保持怀疑，并且只在处理浮点数时使用它。但是，它也表示许多现有代码不遵循此规则。

所以我有点进退两难。我是否应该使用“==”（即使**不**将浮点数与其他值进行比较）以与周围代码保持一致？我是否应该酌情使用“=:=”，即使这与文件的其余部分不一致？我应该将文件中的其他表达式转换为使用“=:=”吗？

有哪些权衡？任何一个操作员都比另一个更有效吗？如果保证其中一个操作数不是数字，那么我使用哪个操作数有关系吗？是否没有隐藏的陷阱（例如，特殊的浮点值，如 NaN、Inf 等 - 如果 Erlang 支持这些）。

顺便说一句，我面临的代码库是 ejabberd。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T14:00:27.150

如果您不需要将整数与浮点数进行比较，请使用 =:=。性能是相同的（或者至少差异太小而无法测量），并且 Erlang 中不存在 NaN、inf 等。

很多 OTP 库代码使用 == 的原因可能是因为 =:= 是 Erlang 中最近添加的。

# google-maps-api-3 - Google Maps V3 似乎忽略了版本参数

> ID：10681771
> 
> 赞同：2
> 
> 时间：2012-05-21T08:26:27.607
> 
> 标签：google-maps-api-3, openlayers

在我的 OpenLayers 应用程序中，我想嵌入 3.6 版的 google maps api，因此请求它像这样：

`<script type="text/javascript" scr="http://maps.google.com/maps/api/js?v=3.6&sensor=false"></script>`

不幸的是，谷歌地图似乎发送了 3.7 版本，至少响​​应包含：

`getScript("http://maps.gstatic.com/intl/de_de/mapfiles/api-3/7/17/main.js");`

这打破了我的 OpenLayers 地图，因为每次地图移动都会显示版权弹出窗口，尽管地图已经显示了正确的归属学分。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:33:22.790

此问题已在[此处](https://github.com/openlayers/openlayers/commit/b17c7b69f25ce0ddbaf720f91b7d48328b005831#commitcomment-1343896)的 OpenLayers github 页面上进行了讨论。有几个选项可以解决所讨论的问题。最快的 hacky 修复是添加以下 css，

```
.olLayerGooglePoweredBy {
     visibility:hidden;
} 
```

这确实可能违反使用条款，所以我不能完全推荐它。应用票上讨论的补丁会更明智。在那里问也可能会给你一个很好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:05:01.127

3.6 版已被撤回。

[http://groups.google.com/group/google-maps-js-api-v3/msg/3f73f6593a787b7f](http://groups.google.com/group/google-maps-js-api-v3/msg/3f73f6593a787b7f)

还有[http://groups.google.com/group/google-maps-js-api-v3-notify](http://groups.google.com/group/google-maps-js-api-v3-notify)订阅它是个好主意。

应在问题跟踪器中报告错误：[http](http://code.google.com/p/gmaps-api-issues/issues/list) ://code.google.com/p/gmaps-api-issues/issues/list （我找不到此问题的相关报告）。您将需要包含指向演示者的链接。

# facebook - Facebook 评论插件未发布到我的个人资料中

> ID：10681775
> 
> 赞同：0
> 
> 时间：2012-05-21T08:26:47.647
> 
> 标签：facebook

我的网站上有一个 Facebook 评论插件，当我对其发表评论时，它会显示在我的网站上，但不会显示在我的 Facebook 个人资料上。我勾选了关于个人资料选项的帖子，但它仍然没有显示。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:39:09.030

您必须在 facebook 中创建一个应用程序，然后将元标记添加到您的站点

```
<meta content='{YOUR APP ID}' property='fb:app_id'/>
<meta content='YOUR FACEBOOK ID' property='fb:admins'/> 
```

[您可以在此处](http://developers.facebook.com/)创建应用程序

# php - 根据条件检查表中是否有数据的语法

> ID：10681778
> 
> 赞同：0
> 
> 时间：2012-05-21T08:26:55.853
> 
> 标签：php, mysql

我有一个 MySQL 语法，我在其中为用户返回一些数据。执行以下查询有没有更好的方法，我只想知道`user X`in是否有数据`category y`。

```
$search_sql = " SELECT id FROM sn_news WHERE id_category = $category AND id_client = $client ";
$search_query = mysql_query($search_sql);    
$search_query_result = mysql_fetch_assoc($search_query);

if($search_query_result)
{
    $search_result = TRUE;
}
else
{
    $search_result = FALSE;
} 
```

`TRUE`如果有我的查询的数据，或者如果没有，我只是得到什么`FALSE`，以便稍后使用该结果`$.post()`来知道要打印出什么以及要删除什么。

注意：我没有尝试过代码，但我想它可以工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:31:09.993

```
$search_sql = " SELECT id FROM sn_news WHERE id_category = $category AND id_client = $client ";
if ($search_query = mysql_query($search_sql))
{
    $search_result=(mysql_num_rows($search_query) ? TRUE : FALSE);
} 
```

或者，也实际检索数据

```
$search_sql = " SELECT id FROM sn_news WHERE id_category = $category AND id_client = $client ";
$search_query_result=array(); // initialise empty return array
if ($search_query = mysql_query($search_sql))
{
    switch mysql_num_rows($search_query)
    {
        case 0:
            $search_result=FALSE;
            break;
        default: // got something
            $search_result=TRUE;
            while ($row=mysql_fetch_assoc($search_query)
            {
                $search_query_result[]=$row;
            }
            break;
    }
} 
```

这将检查返回的行数并使用有用的小副作用来相应地设置变量，即整数值 0 等效于 FALSE。

我还将添加一些检查以查看查询是否首先有效。检查是否有 SQL 中的语法错误或服务器本身存在问题总是有用的（请参阅我的代码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:34:01.223

`mysql_fetch_assoc()``FALSE`当没有要获取的行时返回。您可以像这样检查返回值：

```
$search_result = mysql_fetch_assoc($search_query) !== FALSE; 
```

告诉你什么，这与你在原始代码中所做的基本相同。

# android - 为列表视图设置圆角边框

> ID：10681783
> 
> 赞同：0
> 
> 时间：2012-05-21T08:27:36.513
> 
> 标签：android

我正在尝试为 android 中的列表视图设置圆角边框。我使用 shape xml 设置列表视图的背景。但是，当我单击一个项目时，突出显示在圆形区域上方。

有没有办法克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:32:20.897

此代码将您的列表视图更改为圆角

**形状.xml**

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 
     <gradient android:startColor="#SomeGradientBeginColor" android:endColor="#SomeGradientEndColor" 
            android:angle="270"/> 

    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

将 xml 文件放在您的可绘制文件夹中，在您的列表视图中设置如下，`android:background:"@drawable/shape"`

# iphone - 关于以下内存泄漏的任何建议

> ID：10681784
> 
> 赞同：1
> 
> 时间：2012-05-21T08:27:39.083
> 
> 标签：iphone, memory-leaks, uinavigationcontroller

我正在使用导航控制器开发应用程序。当我在下一个视图中推送视图时，它显示我泄漏，如下图所示。请帮助我找出泄漏解决方案。即使我发布了下一个视图对象，也比在它显示我泄漏之后，如下所示。如果您需要更多的屏幕截图或详细信息，请告诉我。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ActivityUpdateiPad *updateactivity = [[ActivityUpdateiPad alloc]initWithNibName:@"ActivityUpdateiPad" bundle:nil];
    [self.navigationController pushViewController:updateactivity animated:YES];
    [updateactivity release];
} 
```

![在此处输入图像描述](../Images/553a8b71e6e4282f7ecfbd5e59c14784.png)

# php - PHP随机链接不重复

> ID：10681786
> 
> 赞同：0
> 
> 时间：2012-05-21T08:27:39.417
> 
> 标签：php, random, hyperlink, repeat

我正在尝试建立一个网站，以随机方式引导您浏览八个页面，而不重复页面，例如：第一个“filmpje4.php”，其中包含指向“filmpje8.php”的链接，它导致“ filmpje3.php'，等等，直到所有八个页面都被访问过。

我环顾了几个网站，但我发现的代码似乎不起作用。我不断重复...

我尝试的代码示例：

```
$links = array('<a href="filmpje1.php">filmpje1</a>', [...]'<a href="filmpje8.php">filmpje8</a>'); 

// get users visited links to an array
$visited_links = explode('|', $_SESSION['visited_links']);
// remove visited links from links array
foreach($visited_links as $visited_link) {
unset($links[array_search($visited_link, $links)]);
}

// get a random link from unvisited links
$link = $links[rand(0, count($links)-1)];

// add the selected link to visited array
$visited_links[] = $link;

// save visited links to user session as | separated string
$_SESSION['visited_links'] = implode('|', $visited_links);

echo $link; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:39:51.480

```
<?php
  session_start();
  if (!isset($_SESSION["visited_pages"])) { $_SESSION["visited_pages"] = array(); }

  $links = array("file1.php","file2.php","file3.php","file4.php");
  $nonvisited_links = array_values(array_diff($links,$_SESSION["visited_pages"]));

  $next_index = mt_rand(0,sizeof($nonvisited_links)-1);

  $_SESSION["visited_pages"][] = $next_page = $nonvisited_links[$next_index];
?>

<a href="localhost/<?php echo $next_page; ?>">visit!!</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:31:23.823

试试这个：

```
$tmp = array('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i');
$visited = array('b', 'f', 'h'); // get from session

if(count($tmp) == count($visited))
{
    $visited = array();
    // reset session
}

while(true)
{
    $item = $tmp[rand(0, count($tmp) - 1)];
    if(!is_array($item, $visited))
        break;
}

$visited[] = $item;
// set session 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:20:59.667

无需校对您编写的代码，这里有一个新代码。

可以/应该对代码进行适当的优化测试，但它可以解决问题。

```
<?php

$all_page_links = ('a.php','b.php','c.php','d.php',
              'e.php','f.php');
$visited_page_links = $_SESSION['visited_page_links']; 
                        //eg data: 'c.php','f.php'

$can_visit_pages = array_diff($all_page_links,$visited_page_links);

 if(!isset($_GET['next_page']) //this is the first visit
  {
   $can_visit_index = rand(0, count($can_visit_pages) - 1);
   $current_page = $can_visit_pages[$can_visit_index];
   unset($can_visit_pages[$can_visit_index]);
   $visited_page_links[] =  $current_page;

   $next_page = $can_visit_pages[rand(0, count($can_visit_pages) - 1)];
   include($current_page); //include the contents of the current 
                           //page (or redirect). $current_page code will 
                           //have the link to the $next_page.
  } 
else
 if(isset($_GET['next_page']))
  {
   //TO-Do - pre-check if the page has been visited.
   $current_page = $_GET['next_page'];
   $visited_page_links[] =  $current_page;
   $current_page_index = array_search($current_page,$can_visit_pages);
   unset($can_visit_pages[$current_page_index]);

   $next_page = $can_visit_pages[rand(0, count($can_visit_pages) - 1)];
   include($current_page); //include the contents of the current 
                           //page (or redirect). $current_page code will 
                           //have the link to the $next_page.
  }

$_SESSION['visited_page_links'] = $visited_page_links;

?> 
```

# c# - 按钮单击 Open richTextBox 并显示 readfile

> ID：10681796
> 
> 赞同：3
> 
> 时间：2012-05-21T08:28:36.763
> 
> 标签：c#, winforms, visual-studio-2010

我有 2 个按钮，单击这些按钮时会读取不同的文件。由于文件很大，我使用 来显示 readfile `MsgBox` ，所以我想将它显示在`richTextBox`.

当我单击这些按钮中的任何一个时，如何打开`richTextBox`并显示？`read file`

```
private void button1_Click(object sender, EventArgs e)
{  
    DisplayFile(FileSelected);//DisplayFile is the path of the file
    var ReadFile = XDocument.Load(FileSelected); //Read the selected file to display

    MessageBox.Show("The Selected" + " " + FileSelected + " " + "File Contains :" + "\n " + "\n " + ReadFile);
    button1.Enabled = false;
}

private void button2_Click(object sender, EventArgs e)
{
    FileInfo file = (FileInfo)comboBox2.SelectedItem;
    StreamReader FileRead = new StreamReader(file.FullName);
    string FileBuffer = FileRead.ReadToEnd(); //Read the selected file to display

    //MessageBox.Show("The Selected" + " " + file + " " +"File Contains :"  + "\n " + "\n " + FileBuffer);
    // richTextBox1.AppendText("The Selected" + " " + file + " " + "File Contains :" + "\n " + "\n " + FileBuffer);
    //richTextBox1.Text = FileBuffer;
} 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:02:14.907

这是一个简单的示例（基于代码的表单设计）。如果您通过 GUI 设计器创建表单会更好：

```
private void button1_Click(object sender, EventArgs e)
{
    //test call of the rtBox
    ShowRichMessageBox("Test", File.ReadAllText("test.txt"));
}

/// <summary>
/// Shows a Rich Text Message Box
/// </summary>
/// <param name="title">Title of the box</param>
/// <param name="message">Message of the box</param>
private void ShowRichMessageBox(string title, string message)
{
    RichTextBox rtbMessage = new RichTextBox();
    rtbMessage.Text = message;
    rtbMessage.Dock = DockStyle.Fill;
    rtbMessage.ReadOnly = true;
    rtbMessage.BorderStyle = BorderStyle.None;

    Form RichMessageBox = new Form();
    RichMessageBox.Text = title;
    RichMessageBox.StartPosition = FormStartPosition.CenterScreen;

    RichMessageBox.Controls.Add(rtbMessage);
    RichMessageBox.ShowDialog();
} 
```

# wordpress - wordpress 应用过滤器

> ID：10681798
> 
> 赞同：1
> 
> 时间：2012-05-21T08:28:43.767
> 
> 标签：wordpress

我对 wordpress 完全陌生，所以对糟糕的解释表示歉意。

我正在尝试返回数组“选项”的值列表，我知道我可以通过使用带有“woocommerce_currencies”的 add_filter 过滤此信息（并添加到此数组），但是如何查看数组中已包含的值？

这是一段代码，它来自 woocommerce functions.php 文件 - 基本上......我正在尝试回显此选项数组中的值。

```
'options' => array_unique(apply_filters('woocommerce_currencies', array( 
            'USD' => __( 'US Dollars (&#36;)', 'woocommerce' ),
            'EUR' => __( 'Euros (&euro;)', 'woocommerce' ),
            'GBP' => __( 'Pounds Sterling (&pound;)', 'woocommerce' )..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:35:26.083

### 您可以使用该[`get_option`](http://codex.wordpress.org/Function_Reference/get_option)函数从数据库中检索任何命名选项。

```
$values = get_option('woocommerce_curencies');
        foreach ( (array) $values as $option ) {
            print_r( $option );
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-07T18:14:56.043

你可以做：

```
add_filter('woocommerce_currencies', function($currencies) {
    var_dump($currencies);
}, 10, 1 ); 
```

然后，您可以根据需要进行修改`currencies`。

仅供参考，`10`是过滤器中的优先级`woocommerce_currencies`，1 是过滤器传递的参数数量。

# xpath - xpath中元素属性中的空格

> ID：10681804
> 
> 赞同：0
> 
> 时间：2012-05-21T08:29:09.950
> 
> 标签：xpath, yaml

我们在 YML 文件中定义了这个 XPath：

```
message_form_show: //div[@class='cart']/div[@class='message']/form[@id='message-form' and not contains(@style, 'display:none')] 
```

但是，我们想改为“ `display: none`”，但是在添加空格时，Netbeans 抱怨说 YML 没有正确解析，并且运行 Selenium 测试也失败了。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:01:41.600

问题是更改后，[YAML 将](http://www.yaml.org/spec/1.2/spec.html#%3a%20mapping%20value//) `display:`（冒号后跟空格）解析为一个新数组，其中包含`none')]`. 这通常使 YAML 能够包含例如数组列表，但在这种情况下，它会使事情出错。

[解决方案是将字符串专门分隔为一个块，这样 YAML 就不会尝试解析它](http://www.yaml.org/spec/1.2/spec.html#id2760844)：

```
message_form_show: >
  //div[@class='cart']/div[@class='message']/form[@id='message-form' and not contains(@style, 'display: none')] 
```

或者只是用双引号引用它：

```
message_form_show: "//div[@class='cart']/div[@class='message']/form[@id='message-form' and not contains(@style, 'display: none')]" 
```

# c++-cli - TPL + C++/CLI：教程、示例

> ID：10681808
> 
> 赞同：0
> 
> 时间：2012-05-21T08:29:26.310
> 
> 标签：c++-cli, task-parallel-library

是否可以在 C++/CLI 中使用 TPL？
我发现的主要材料与 PPL 相关，而不是 TPL。如果我尝试像使用 C# 一样使用 TPL（例如，通过 检索异步操作的结果`->Result`），那么得到类似

> 错误 150 错误 C2039：“结果”：不是“System::Threading::Tasks::Task`1”的成员

任何示例或好的教程？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:05:16.860

您忘记发布代码片段，因此您的问题无法诊断。请务必使用`Task<TResult>`Result 属性。此示例代码编译并运行没有问题。

```
#include "stdafx.h"
#using <System.Core.dll>
using namespace System;
using namespace System::Threading::Tasks;

ref class SomeTask {
public:
    static int run() {
        return 42;
    }
};

int main(array<System::String ^> ^args)
{
    Task<int>^ task = Task<int>::Factory->StartNew(gcnew Func<int>(&SomeTask::run));
    task->Wait();
    Console::WriteLine(task->Result);
    return 0;
} 
```

# exception - 在 numpy 的 svd 方法中使用替代 LAPACK 驱动程序？

> ID：10681812
> 
> 赞同：5
> 
> 时间：2012-05-21T08:29:42.553
> 
> 标签：exception, numpy, lapack, svd

我正在使用 numpy.svd 来计算条件不良矩阵的奇异值分解。对于某些特殊情况，svd 不会收敛并引发 Linalg.Error。我做了一些研究，发现 numpy 使用 LAPACK 的 DGESDD 例程。标准实现的硬编码迭代限制为 35 次或其他迭代。如果我尝试在 Matlab 中分解相同的矩阵，一切正常，我认为有两个原因： 1\. Matlab 使用 DGESVD 而不是 DGESDD，这通常看起来更健壮。2\. Matlab 在例程中使用了 75 次的迭代限制。（他们在源代码中对其进行了更改并重新编译。）

现在的问题是：有没有一种简单的方法可以将 numpy 中使用的后端从 DGESDD 更改为 DGESVD 而无需修改 numpy 源？

在此先感谢米沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-03T08:44:54.880

对我有用的是只计算该矩阵的[“经济规模”SVD](http://de.mathworks.com/help/matlab/ref/svd.html)`X`：

```
U,S,V = np.linalg.svd(X, full_matrices=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:21:59.720

我有点晚了，但也许这会帮助别人......

我在[julia](http://julialang.org)遇到了类似的问题。

我[从 R 帮助列表中找到了这种方法](http://r.789695.n4.nabble.com/Observations-on-SVD-linpack-errors-and-a-workaround-td837282.html)，它应该适用于使用 lapack 库的任何环境：

基本上，如果 svd(M) 失败，请尝试 svd(M')，并适当地交换结果 U,V。

以下是我在 Julia 中的做法：

```
try
  U,S,V = svd( E_restricted )
  failed = false
catch
  failed = true
end
if failed
  # try it with matrix transposed
  try
    V,S,U = svd( E_restricted' )
    failed = false
  catch
    failed = true
  end
end
if failed
  error("ERROR: svd(E) and svd(E') failed!")
end 
```

# ruby-on-rails - 默认呈现 JSON 而不是 HTML？

> ID：10681816
> 
> 赞同：43
> 
> 时间：2012-05-21T08:29:52.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rendering

我试图告诉 rails 3.2 它应该默认呈现 JSON，并完全像这样踢 HTML：

```
respond_to :json    

def index
  @clients = Client.all
  respond_with @clients
end 
```

使用这种语法，我必须添加`.json`到 URL。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-21T09:01:12.250

您可以修改`routes.rb`文件以指定默认格式

**路线.rb**

```
resources :clients, defaults: {format: :json} 
```

这将修改整个响应的默认格式`clients_controller`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-22T19:54:35.013

如果您想对两者使用相同的控制器操作，此模式效果很好。像往常一样制作网页版本，使用 :html 作为默认格式。然后，将 api 放在一个路径下，并将 :json 设置为那里的默认值。

```
Rails.application.routes.draw do

  resources :products

  scope "/api", defaults: {format: :json} do
    resources :products
  end

end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-21T09:02:59.253

如果您在索引操作中不需要 RESTful 响应，那么只需直接呈现您的 xml 响应：

```
def index
  render json: Client.all
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-19T13:31:06.643

扩展 Mark Swardstrom 的答案，如果您的 rails 应用程序是一个始终返回 JSON 响应的 API，您可以简单地做

```
Rails.application.routes.draw do
  scope '/', defaults: { format: :json } do
    resources :products
  end
end 
```

# perl - 在 Perl 中为 Selenium Grid 执行并行测试

> ID：10681818
> 
> 赞同：1
> 
> 时间：2012-05-21T08:29:54.143
> 
> 标签：perl, selenium, parallel-processing

我有一个在多个浏览器中并行执行的 perl 脚本。我需要设置这个脚本`sub setup()`继续执行。我遇到了一个问题，因为 setup() 遇到了 sub 的结尾`}`

代码如下：

```
 my @browser = ('*firefox','*iexplore');
   my $i = @browser;  
$pm = new Parallel::ForkManager($i);

    foreach $browser (@browser){

    $pid =  $pm->start and next;

    $sel = WWW::Selenium->new( host => $host , port => 4444, browser => $browser, browser_url => $url,);
    $sel->start();
    print("\n Execution : ".$browser."\n");
    $sel->open("/");

    $pm->finish();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:15:59.610

那么并行运行测试需要什么？那么你所需要的只是一个并行测试运行器。对我们来说幸运的是，Perl 是互联网（以及自动化）的瑞士军刀。对于我们的实现，我们将使用一个模块和 perl 的 fork()。

第一个模块在此处可用：[File::Find::Rule](http://search.cpan.org/~rclamp/File-Find-Rule-0.33/lib/File/Find/Rule.pm)
第二个模块随您的 Perl 发行版一起提供

我们将使用 File::Find::Rule 解析目录并在此过程中创建文件列表（数组）；并用于管理我们并行运行的多个测试 fork()。

```
1:  #!C:/Perl64/bin/perl  
2:  use strict;  
3:  use warnings;  
4:  use File::Find::Rule;  
5:    
6:  my $start_dir = shift || 'C:\Tests\';  
7:  my $count = 0;  
8:    
9:  my @subdirs = File::Find::Rule->directory->in($start_dir);  
10:    
11:  my @files = File::Find::Rule->file()  
12:                ->name( '*.pl' ) # Get only perl files  
13:                ->in( $subdirs[0] );  
14:    
15:  foreach my $test (@files) {  
16:    my $pid = fork;  
17:    die "fork failed" unless defined $pid;  
18:      
19:    if ($pid == 0) { # We Got a Child  
20:      print "Executing Test: " . $test . " Sequence #: " . $count . "\n";  
21:      my $exit_code = system($test);  
22:      print "Done Executing Test: " . $test . " Sequence #: " . $count . "\n";  
23:      print "Exit Code: " . ($exit_code >> 8) . "\n";  
24:      exit ($exit_code >> 8);  
25:    }  
26:    $count++;    
27:  }  
28:  exit(0); 
```

如果您使用 C:\Temp\ 目录中的两个 .pl 文件运行上述脚本，您将获得以下输出：

```
 Executing Test: C:\Temp\test1.pl Sequence #: 0  
 Executing Test: C:\Temp\test2.pl Sequence #: 1  
 Done Executing Test: C:\Temp\test2.pl Sequence #: 1  
 Exit Code: 2  
 Done Executing Test: C:\Temp\test1.pl Sequence #: 0  
 Exit Code: 1 
```

这就是上面的脚本正在做的事情：
1\. 你传入一个目录，或者它使用 C:\Tests\ 作为默认值
2\. 创建一个子目录列表
3\. 进入每个目录并获取一个文件列表
4\. fork 每个这些文件之一（确保它们退出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:20:47.897

这是另一个关于如何实现并行测试运行器（用于 Selenium 或任何其他类型的测试）的快速教程。

首先是代码：

```
1:  #!C:/Perl64/bin/perl  
2:  use strict;  
3:  use warnings;  
4:  use File::Find::Rule;  
5:    
6:  my $start_dir = shift || 'C:\Tests';  
7:  my $count = 0;  
8:    
9:  my @subdirs = File::Find::Rule->directory->in($start_dir);  
10:    
11:  my @files = File::Find::Rule->file()  
12:                ->name( '*.pl' ) # Only get perl files  
13:                ->in( $subdirs[0] );  
14:  foreach my $test (@files) {  
15:    system(1, $test);  
16:    print "Executing Test: " . $test . " Sequence #: " . $count . "\n";  
17:    print "My Father Is: " . $$ . "\n"; # process that started me  
18:    $count++;  
19:  }  
20:  exit(0); 
```

这里的魔法由第 15 行执行。使用这种特殊形式的 perl 函数系统，我们可以强制它在继续之前不等待它启动的进程，从而有效地允许我们[几乎]同时产生多个测试。

来自 Perl 文档：

> ```
> system(1, @args)
> 
> spawns an external process and immediately returns its process designator, without waiting for it to terminate. 
> ```

上面的脚本将输出以下内容：

```
 Executing Test: C:\Temp\test_template.pl Sequence #: 0  
 My Father Is: 8692  
 Executing Test: C:\Temp\test_template2.pl Sequence #: 1  
 My Father Is: 8692  
 Executing Test: C:\Temp\test_template3.pl Sequence #: 2  
 My Father Is: 8692  
 Executing Test: C:\Temp\test_template4.pl Sequence #: 3  
 My Father Is: 8692 
```

下图显示了在我的调试器中，测试运行程序如何停止但 4 个衍生进程仍在运行（理论上正在运行自动化测试），正如我的 Windows 任务管理器中正在运行的 perl.exe 进程所指示的那样。

![在此处输入图像描述](../Images/3d57ae86dff68818bb3c91abf06295b4.png)

这就是使用 Perl 的系统函数同时启动多个自动化测试所需的全部内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T05:53:44.397

我们可以使用启动和关闭的方法。供参考检查。

[将参数传递给 Test::Class Setup 方法](https://stackoverflow.com/questions/10682276/passing-parameter-to-testclass-setup-method/10691516#10691516)

# ruby-on-rails - 如何在 Rails 中创建时使用附加到字符串的 id 更新字段

> ID：10681822
> 
> 赞同：2
> 
> 时间：2012-05-21T08:30:01.937
> 
> 标签：ruby-on-rails, model

我有下表和相应的模型：

```
Orders
ID|ORDER_REF|.... 
```

订单参考的格式为'ORDER#000-00'+ORDER.ID 问题是我需要启用它，以便在插入时设置订单参考。有没有办法做到这一点而无需在插入后进行更新，我在这里使用 RoR。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:05:34.280

Do you really need that data in your database? The best way would be to just have a method on your model that returns the order ref in the desired format, based on the `id` in the database.

```
class Order < ActiveRecord::Base
  def order_ref
    "ORDER#000-#{self.id.to_s.rjust(3, '0')}"
  end
end 
```

With the abobe you can do this:

```
order = Order.create(params[:order])
order.id #=> 12
order.order_ref #=> "ORDER#000-012" 
```

If you *do* need the order ref in the database, I recommend using an `after_create` callback:

```
class Order < ActiveRecord::Base
  after_create :generate_order_ref

  def generate_order_ref
    self.order_ref = "ORDER#000-#{self.id.to_s.rjust(3, '0')}"
    save
  end
end 
```

This *does* do an update after inserting, but I don't see any problem with that.

# sql - 即使其中一个没有参与者，如何显示所有答案？

> ID：10681825
> 
> 赞同：0
> 
> 时间：2012-05-21T08:30:18.137
> 
> 标签：sql, sql-server-2008-r2

我有以下数据库设计：

```
Employee Table: EmployeeID, Name, OrgCode
Department Table: OrgCode, DepartName
CompleteSurvey Table: ID, RespondantID, QuestionsAnswersID
Questions Table: QuestionID, Question
Answers Table: AnswerID, Answer
QuestionsAnswers Table: ID, QuestionID, AnswerID 
```

每个问题都有不同的多项选择。大多数问题都有相同的选择，例如（同意，不同意）。我想编写一个查询，显示问题及其所有选择以及每个选择中的参与者数量，即使它为零。***我编写了查询，即使没有人选择其中一个答案，它也会显示问题的所有答案，但是除了没有参与者的答案之外，查询在“问题”列中显示 NULL 并且我不知道为什么***。请问有什么帮助吗？

我的查询：

```
SELECT     COUNT(DISTINCT dbo.CompleteSurvey.RespondantID) AS [Total Number of Participants], dbo.Answers.Answer, dbo.Questions.Question
FROM         dbo.CompleteSurvey INNER JOIN
                      dbo.QuestionsAnswers ON dbo.CompleteSurvey.QuestionsAnswersID = dbo.QuestionsAnswers.ID INNER JOIN
                      dbo.Questions ON dbo.QuestionsAnswers.QuestionID = dbo.Questions.QuestionID RIGHT OUTER JOIN
                      dbo.Answers ON dbo.QuestionsAnswers.AnswerID = dbo.Answers.AnswerID
GROUP BY dbo.Answers.Answer, dbo.Questions.Question 
```

**更新：**

***查询应该显示问题中每个部门的参与者数量及其所有答案，那么该怎么做呢？***

我更新的查询：

```
SELECT     COUNT(DISTINCT dbo.CompleteSurvey.RespondantID) AS [Total Number of Participants], dbo.Answers.Answer, dbo.Questions.Question, 
                      dbo.Departments.DepartmentName
FROM         dbo.Employees INNER JOIN
                      dbo.CompleteSurvey ON dbo.Employees.EmployeeID = dbo.CompleteSurvey.RespondantID INNER JOIN
                      dbo.Departments ON dbo.Employees.OrgCode = dbo.Departments.OrgCode RIGHT OUTER JOIN
                      dbo.Questions INNER JOIN
                      dbo.QuestionsAnswers ON dbo.Questions.QuestionID = dbo.QuestionsAnswers.QuestionID INNER JOIN
                      dbo.Answers ON dbo.QuestionsAnswers.AnswerID = dbo.Answers.AnswerID ON dbo.CompleteSurvey.QuestionsAnswersID = dbo.QuestionsAnswers.ID
GROUP BY dbo.Answers.Answer, dbo.Questions.Question, dbo.Departments.DepartmentName 
```

***但它的问题并没有显示部门。它应该显示每个问题的每个部门的参与者数量及其所有答案，即使其中一个答案没有参与者。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:51:47.573

QuestionAnswers 是获取答案所需的表，但由于您使用的是`INNER JOIN`从 CompleteSurvey 到 QuestionAnswers 的表格，因此您正在消除 QuestionAnswers 中的所有行，而 CompleteSurvey 中没有相应的行。我认为如果您将它们之间的连接更改为`RIGHT OUTER`.

```
SELECT  COUNT(DISTINCT dbo.CompleteSurvey.RespondantID) AS [Total Number of Participants], 
        dbo.Answers.Answer, 
        dbo.Questions.Question
FROM    dbo.CompleteSurvey 
        RIGHT OUTER JOIN dbo.QuestionsAnswers 
            ON dbo.CompleteSurvey.QuestionsAnswersID = dbo.QuestionsAnswers.ID 
        INNER JOIN dbo.Questions 
            ON dbo.QuestionsAnswers.QuestionID = dbo.Questions.QuestionID 
        RIGHT OUTER JOIN dbo.Answers 
            ON dbo.QuestionsAnswers.AnswerID = dbo.Answers.AnswerID
GROUP BY dbo.Answers.Answer, dbo.Questions.Question 
```

**但是**，我建议您切换您加入的顺序，以下将消除一个外部联接，总体上它的性能不如内部联接。当使用左连接而不是右连接时，它还（在我的选项中）使查询更容易阅读。

```
SELECT  COUNT(DISTINCT dbo.CompleteSurvey.RespondantID) AS [Total Number of Participants], 
        dbo.Answers.Answer, 
        dbo.Questions.Question
FROM    dbo.Questions
        INNER JOIN dbo.QuestionAnswers
            ON Questions.QuestionID = QuestionAnswers.QuestionID
        INNER JOIN dbo.Answers
            ON QuestionAnswers.AnswerID = Answers.AnswerID
        LEFT JOIN dbo.CompleteSurvey
            ON QuestionAnswers.QuestionAnswersID = CompleteSurvey.QuestionAnswersID
GROUP BY Answers.Answer, Questions.Question 
```

* * *

**更新要求**

如果我正确理解要求，您只需加入 Employee 和 Department 以 questionAnswer 即可获得部门。这可以通过左加入两次来完成，但是我将它移到子查询中只是因为我喜欢在我可以使用的地方使用 INNER JOIN，所以如果有办法我可以用更少的 OUTER JOIN 重新排列查询我会这样做：

```
SELECT  COUNT(DISTINCT CompleteSurvey.RespondantID) AS [Total Number of Participants], 
        Answers.Answer, 
        Questions.Question,
        DepartName
FROM    dbo.Questions
        INNER JOIN dbo.QuestionsAnswers
            ON Questions.QuestionID = QuestionsAnswers.QuestionID
        INNER JOIN dbo.Answers
            ON QuestionsAnswers.AnswerID = Answers.AnswerID
        CROSS JOIN Departments
        LEFT JOIN 
        (   SELECT  OrgCode, QuestionsAnswersID, RespondantID
            FROM    dbo.CompleteSurvey
                    INNER JOIN dbo.Employees
                        ON EmployeeID = RespondantID
        ) CompleteSurvey
            ON QuestionsAnswers.ID = CompleteSurvey.QuestionsAnswersID
            AND Departments.OrgCode = CompleteSurvey.OrgCode
GROUP BY Answers.Answer, Questions.Question, DepartName
ORDER BY Questions.Question, Answers.Answer, DepartName 
```

# android - 在 Android 上使用 POST 发布数据

> ID：10681828
> 
> 赞同：0
> 
> 时间：2012-05-21T08:30:25.610
> 
> 标签：android, image, http-post

我已经搜索了两个星期，如何在 Android 上使用 post 发布数据，我到处寻找，尝试了所有解决方案，但它仍然不起作用。现在，我只需要发布一个字符串链，稍后我将不得不发布带有一些字符串链的图片。我的实际代码是：

```
public String Publication()
{
    try
    {
        Intent intentget = getIntent();
        String titre = intentget.getExtras().getString("titre");
        String poster = titre +"="+getTableau(_tlab, iNbLignes, iNbCol);
        Log.d("reponse","gettableau");
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://tweet.envrac.ch/Publication.php");
        Log.d("reponse","url");
        List<NameValuePair> pairs = new ArrayList<NameValuePair>(1);
        pairs.add(new BasicNameValuePair("LabColler", poster));
        Log.d("reponse","pairs");
        post.setEntity(new UrlEncodedFormEntity(pairs));
        Log.d("reponse","encode");
        //bug ici
        HttpResponse response = client.execute(post, new BasicHttpContext());
        Log.d("reponse","post");
        return "reponse =  "+response;
    }
    catch (Exception e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return "erreur";
    }

} 
```

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:37:17.353

也许这段代码可以帮助你。

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("firstname", str_firstName));
        nameValuePairs.add(new BasicNameValuePair("middlename", str_middleName));
        nameValuePairs.add(new BasicNameValuePair("lastname", str_lastName));

        try{
            HttpClient httpClient = new DefaultHttpClient();
            URI uri = URIUtils.createURI("http","www.abc.com", -1,                              "dosomething.php",
                    URLEncodedUtils.format(nameValuePairs, "UTF-8"), null);
            Log.i("URI : " , uri.toString());
            HttpPost httpPost = new HttpPost(uri);
            HttpResponse response = httpClient.execute(httpPost);

            HttpEntity entity = response.getEntity();
           }catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Error", Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:37:35.497

我稍微修改了你的代码，试试这个

```
public String Publication()
{
    try
    {
        Intent intentget = getIntent();
        String titre = intentget.getExtras().getString("titre");
        String poster = titre +"="+getTableau(_tlab, iNbLignes, iNbCol);
        Log.d("reponse","gettableau");
        HttpClient client = new DefaultHttpClient();
        ResponseHandler<String> res = new BasicResponseHandler(); //newly added line
        HttpPost post = new HttpPost("http://tweet.envrac.ch/Publication.php");
        Log.d("reponse","url");
        List<NameValuePair> pairs = new ArrayList<NameValuePair>(1);
        pairs.add(new BasicNameValuePair("LabColler", poster));
        Log.d("reponse","pairs");
        post.setEntity(new UrlEncodedFormEntity(pairs));
        Log.d("reponse","encode");
        //bug ici
        HttpResponse response = client.execute(post, res); // Changed line
        Log.d("reponse","post");
        return "reponse =  "+response;
    }
    catch (Exception e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return "erreur";
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:39:30.733

之后添加这个

```
HttpResponse response = client.execute(post, new BasicHttpContext()); 
```

->

```
BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
String line = "";
while ((line = rd.readLine()) != null) 
{
    Log.e("HttpResponse", line);
} 
```

此外，检查清单中的互联网许可和您的网址中不允许的符号；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T08:48:56.550

这是我用来将值发布到服务器的代码，它工作正常，如果可能的话，意味着根据你的修改此代码，

```
public void executeMultipartPost() throws Exception {
    try {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bm.compress(CompressFormat.JPEG, 75, bos);
        byte[] data = bos.toByteArray();
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost postRequest = new HttpPost(
                "http://10.0.2.2/cfc/iphoneWebservice.cfc?returnformat=json&amp;method=testUpload");
        ByteArrayBody bab = new ByteArrayBody(data, "forest.jpg");
        // File file= new File("/mnt/sdcard/forest.png");
        // FileBody bin = new FileBody(file);
        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("uploaded", bab);
        reqEntity.addPart("photoCaption", new StringBody("sfsdfsdf"));
        postRequest.setEntity(reqEntity);
        HttpResponse response = httpClient.execute(postRequest);
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent(), "UTF-8"));
        String sResponse;
        StringBuilder s = new StringBuilder();

        while ((sResponse = reader.readLine()) != null) {
            s = s.append(sResponse);
        }
        System.out.println("Response: " + s);
    } catch (Exception e) {
        // handle exception here
        Log.e(e.getClass().getName(), e.getMessage());
    }
} 
```

# c++ - C++11 填充物

> ID：10681833
> 
> 赞同：3
> 
> 时间：2012-05-21T08:30:55.653
> 
> 标签：c++, c++11, feature-detection, waf

我正在开始一个新项目，该项目将针对`MSVC`、`GCC (latest)`等`GCC 4.3 ARM`。我们构建的`waf`构建系统具有`C++11`编译器的功能检测。

`C++11`例如，我现在有针对编译器中所有功能的预处理器宏`#ifdef WAF_FEATURE_CXX_STRONGLY_TYPED_ENUMS`。因此，我可以针对编译器支持的内容编译不同的代码。几乎`GCC`支持它`MSVC`甚至还没有接近（即使有`MSVC`11 个）

这让我想到了 Web 开发 polyfill——如果该功能不可用，则使用可用的功能集实现它。

这不像 web 开发 polyfill 那样简单，`C++11`但是如果编译器不支持它，我可以用 C++03 简单地实现什么吗？

这归结为这样一个事实，即我想在我的公共 API 中使用强类型枚举器，但作用域看起来`MyClass::MyEnumerator::EnumValue`更像`MyClass::EnumValue`. `C++03`无论如何我可以`C++03`很容易地发生同样的事情：

```
class MyClass {
    public:
#ifdef WAF_FEATURE_CXX_STRONGLY_TYPED_ENUMS
        enum class MyEnumerator : unsigned int {
#else
        enum MyEnumerator {
#endif
             EnumValue = 0
        }
    void method(MyEnumerator e);
}

MyClass mc = new MyClass();
mc.method(MyClass::MyEnumerator::EnumValue) // C++11
mc.method(MyClass::EnumValue)               // C++03 :( 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T15:02:46.747

这就是你需要做的（我对指针和非指针访问做了其他简单的修复）。Bsically，这就是@demi 所说的。我必须创建一个虚拟枚举名称。这适用于 g++-4.7。

```
class MyClass {
    public:
#if __cplusplus > 201000
        enum class MyEnumerator : unsigned int {
             EnumValue = 0
        };
    void method(MyEnumerator e) {}
#else
        class MyEnumerator {
        public:
          enum Dummy {
             EnumValue = 0
          };
        };
    void method(MyEnumerator::Dummy e) {}
#endif
};

int main() {
    MyClass mc;
    mc.method(MyClass::MyEnumerator::EnumValue); // C++11 or C++03
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:45:26.033

你可以模仿`enum class`类。您的样板代码将仅在定义中，但 C++11 和 C++03 的用法将相同，并且可以使用模板/宏来完成。[在这里看答案](https://stackoverflow.com/questions/4980280/enum-class-emulation-or-solid-alternative-for-msvc-10-0)

# c - 无法在 C 中定义函数类型

> ID：10681836
> 
> 赞同：0
> 
> 时间：2012-05-21T08:31:05.757
> 
> 标签：c, dll, typedef

这让我很困惑：

`typedef bool(*pGetNameByPid)(DWORD PID, TCHAR lpszProcessName[MAX_PATH]);`

上面的句子有什么东西吗？我想导出一个`GetNameByPid`用 C++ 编写的 DLL 命名的函数。但是编译报告说：

`error C2143: syntax error : missing ')' before '*'`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:33:42.900

C89中没有`bool`类型，这是 Microsoft 编译器支持的 C 标准。您可以使用 an`int`或 WINAPI`BOOL`作为返回类型：

```
typedef BOOL (*pGetNameByPid)(DWORD PID, TCHAR lpszProcessName[MAX_PATH]); 
```

从 DLL 导出函数：

```
__declspec(dllexport) BOOL GetNameByPid(DWORD PID, TCHAR* lpszProcessName)
{
    /* Do some work */
    return TRUE;
} 
```

# java - 动态生成的图像，使用 POST 获取

> ID：10681837
> 
> 赞同：5
> 
> 时间：2012-05-21T08:31:07.810
> 
> 标签：java, javascript, ajax, prototypejs

我需要在 JSP 中动态加载图像。我试过了 `<img src="servletUrl?p1=x&p2=y"/>`，但问题是 URL 太长，无法使用 GET 发送。

我现在正在执行 POST 调用。根据我发送的参数，我从 servlet 生成饼图图像。图像没有保留，所以我不能返回“images/image1.jpg”之类的东西并将其设置为图像的 src。

所以我将图像作为字节数组返回并设置适当的图像内容类型。

我的问题是：一旦我在 javascript 中有图像字节，如何在相应的 img 标签中显示它们？

这是我的 AJAX 调用：

```
new Ajax.Request(url, {
        method: 'post',
        parameters: params,
        onComplete: function(request) {
                    alert(request.responseText);      
        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:12:45.707

我自己没有尝试过，但它应该可以工作。[您可以使用dataUrl](http://en.wikipedia.org/wiki/Data%3a_URL)创建图像并设置其 src 。您必须将`byte[]`in 转换为 base64 编码的字符串才能正常工作。

```
new Ajax.Request(url, {
        method: 'post',
        parameters: params,
        onComplete: function(response) {
            var img = new Image();
            img.src = "data:image/png;base64," + response;

            document.body.appendChild(img);
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:23:48.373

这是我头脑中的解决方案，应该适用于所有浏览器：

代替 AJAX 和`<img>`标签，使用`<iframe>`带有隐藏字段的预填充表单，其中包含所有必要的 POST 参数，并`onload`设置处理程序以将此表单提交到图像服务脚本。使此脚本返回将显示在此 iframe 中的纯图像，保持页面的其余部分完好无损。

# iphone - iphone解析大型Xml文档

> ID：10681839
> 
> 赞同：0
> 
> 时间：2012-05-21T08:31:15.360
> 
> 标签：iphone, memory, nsxmlparser

我刚刚实现了我的第一个`XmlParser`对象 ( `MyParserObj`)，它依赖于 NSXMLParser 对象。此解析器嵌入在`tableviewController`( ) 中，并从' 方法`MyTableViewController`开始解析。`MyTableViewController``viewDidLoad`

好的。这工作得很好。不过它是一个小的 Xml 文件！我想知道在处理大型 Xml 文件时是否应该选择不同的方法？解析大型 xml 文档时内存会受到影响吗？

**更新**

我想了解的真正要点是流程的流程：

我现在放置了几个断点，它看起来像这样：

*   应用程序首先遇到（在 MyTableViewController 的 viewDidLoad 方法中）[MyParserObj parseXMLFileAtURL:path] 并开始解析 Xml 文档；
*   应用程序完成对整个 Xml 文档的解析 (parserDidEndDocument..)；
*   tableviewController 开始填充其 tableView 单元格 (cellForRowAtIndexPath..);

**除了选择一个或多或少消耗时间/内存的 XmlParser（在您建议的那些之间）之外，上述步骤是否相同？**

**如果是肯定的，那么在解析器完成该特定元素后立即开始填充单元格是否正确？我该怎么做？**

谢谢

卢卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:39:51.713

[Jim Dovey](http://alanquatermain.me/)创建了一篇关于解析大型 XML 文件的精彩博客文章。

[http://blog.alanquatermain.me/2009/04/06/aqxmlparser-equals-equals-big-memory-win/](http://blog.alanquatermain.me/2009/04/06/aqxmlparser-equals-equals-big-memory-win/)在这里，Jim 描述了他的一个 XML 解析器，它的用户 les 内存然后是其他解析器。

因此，如果您需要解析大型 XML 文件，我建议您查看开源 XML 解析器[AQXMLParser](https://github.com/AlanQuatermain/aqtoolkit)，它是博客文章中创建的解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T08:47:53.940

在 iPhone 设备上，MAC 上没有可用的 NSXMLDocument，它将整个 XML 文档读入内存。有许多可用的 XML Parser 类，您可以在下面的链接中找到它们。

[http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

这篇关于 Ray Wenderlich 的教程是您需要阅读的内容，以了解哪种 xml 阅读器最适合您的应用程序。

对于我自己的应用程序，我使用 SMXMLDocument，您可以在这里阅读：http: [//nfarina.com/post/2843708636/a-lightweight-xml-parser-for-ios](http://nfarina.com/post/2843708636/a-lightweight-xml-parser-for-ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:37:24.483

对于大数据，我建议使用 json 而不是 xml，请参阅此处的教程

[http://www.readwriteweb.com/hack/2010/11/json-vs-xml.php](http://www.readwriteweb.com/hack/2010/11/json-vs-xml.php)

# eclipse - eclipse 启动时出错（WebDev + JBoss Tools + Tomcat）

> ID：10681841
> 
> 赞同：1
> 
> 时间：2012-05-21T08:31:27.937
> 
> 标签：eclipse, tomcat, jsf-2

每次我启动 Eclipse 时都会遇到以下错误。如果我将我的项目移动到一个新的工作区，那么在一个会话期间一切正常 - 一旦我下次打开 eclipse，同样的事情会再次弹出。

我尝试了在其他帖子中找到的各种建议（关闭/重新打开项目、验证、清理等），但均未成功。[这](http://eckquarters.com/eclipse_error_log.txt)是我上次会话的堆栈跟踪（它太长了，不能直接在这里发布:)）

主要症状是 Tomcat 没有启动 - 它卡在 7%。提前谢谢你们，非常感谢您的帮助！！如果您还需要什么，请给我留言，我会发布！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:12:06.753

您的 Eclipse 环境严重混乱。也许您以错误的方式安装了插件，或者您使用了错误的 Eclipse 或插件版本。

垃圾所有。完全删除 Eclipse 程序文件夹。您可以保留工作区文件夹，但应删除其`.metadata`文件夹。[现在下载Eclipse for Java EE](http://www.eclipse.org/downloads/)的新副本（注意，带有 EE！），解压缩它，然后通过*Servers*视图以通常的方式再次集成 Tomcat。请注意，此步骤不需要任何其他插件。

JBoss Tools 应该通过*Help > Install New Software 安装*。您应该指定与确切的 Eclipse 版本匹配的 JBoss Tools 更新站点。目前它是 Indigo SR2，所以您应该指定[http://download.jboss.org/jbosstools/updates/indigo/SR2/](http://download.jboss.org/jbosstools/updates/indigo/SR2/)作为 URL。

# c - C如何不是面向对象的？

> ID：10681842
> 
> 赞同：1
> 
> 时间：2012-05-21T08:31:39.023
> 
> 标签：c, oop, class, architecture, struct

> **可能重复：**
> [你能用 C 编写面向对象的代码吗？](https://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c)
> [C中的面向对象编程](https://stackoverflow.com/questions/2181079/object-oriented-programming-in-c)

因此，据我所知，“对象”基本上只是值和方法的包装器。你不能在 C 中拥有与`struct`s 相同的功能吗？A`struct`看起来就像一个简单的`class`，但是，当然，它没有任何方法。在这里，我们进入了我的问题的核心：我根本不明白为什么需要方法。如果我们有一个外部函数，它只接受一个指向 a 实例的指针，难道不是更简单、更节省内存`struct`吗？或者甚至让`struct`s 有指向这些函数的指针，但这似乎纯粹是美学......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:45:27.487

面向对象意味着*开箱即用地面向对象*。当然，您可以使用 C（以及许多其他非 OO 语言）模拟面向对象，但如果该语言（和/或其标准库）不能以任何方式帮助您（特殊语法、标准对象等）和默认不鼓励写OO风格，不会被称为面向对象的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T08:34:43.813

使用 c 风格的函数指针作为结构成员，您确实可以使 C 面向对象。

我喜欢将一个类的属性和方法都定义在一起的概念。它更容易看到相关实体是什么，而不是像你提到的那样拥有指向结构的单独函数。

以下是 2 个相关的 SO 问题：

[是否有一种简单的方法可以在 ANSI C 中编写适合 11 英寸 MacBook Air 屏幕的策略（或其他）设计模式？](https://stackoverflow.com/q/10678127/1158895)

[C 中的函数指针是如何工作的？](https://stackoverflow.com/q/840501/1158895)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T08:35:53.227

您的建议已经用于在 C 中实现 OO 功能。但是许多人发现使用包含 OO 功能的专用语言更容易。

这与人们从汇编转向 C 的趋势相同。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-21T08:38:58.190

对象是现实世界的实体，它具有状态、行为。在 class(c++/java) 中，我们可以将状态定义为成员变量，将函数定义为行为。在 C: in struct 的情况下，您可能有状态但没有行为。因此C不是面向对象的。这只是一个小例子，例如 C 也不支持 OOPS 原则，如继承、函数重载、多态等。

# fosuserbundle - FOSUserBundle + 有效登录后验证用户相关属性

> ID：10681843
> 
> 赞同：1
> 
> 时间：2012-05-21T08:31:41.037
> 
> 标签：fosuserbundle

我已经在我的应用程序上实现了 FOSUserbundle，我已经设法让链接的用户提供程序工作以及覆盖一些默认控制器。

我有一个问题，我需要找到一种方法来拦截登录过程。

我的用户对象链接到客户端实体，现在我需要拒绝访问用户对象，即使它是有效的，因为客户端实体被禁用。

我所尝试的。

1）我尝试扩展 SecurityController 无济于事，它似乎在执行我的代码之前重定向。

2）我尝试将登录表单上的 _target_path 设置为检查客户端实体状态的控制器，这似乎可行，但在我使用注销用户后，

```
$this->get('request')->getSession()->invalidate() ; 
```

用户被重定向回登录页面，但我无法在 twig 模板上显示一条 Flash 消息，说明客户端未处于活动状态。

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T02:40:04.023

您可能希望将处理程序附加到登录和注销过程：[http ://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/](http://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/)

# php - PHP ZIP 文件下载

> ID：10681844
> 
> 赞同：3
> 
> 时间：2012-05-21T08:31:43.027
> 
> 标签：php, zip, download

这是从 imap 服务器下载附件文件的代码。几乎所有文件类型（pdf、doc、xls 等）都可以正确下载，其中一些 zip 文件会出现以下错误：

“存档格式未知或已损坏”

代码：

```
//data from imap server
$name = "xyz 123.zip";
$type = "APPLICATION";
$subtype = "ZIP";
$encoding = "BASE64";
$body = imap_base64($data);

header('Content-Description: File Transfer');
header('Content-Type: '. $type .'/'. $subtype);
header('Content-Disposition: attachment; filename='.$name);
header('Content-Transfer-Encoding: '.$encoding);
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
ob_clean();
flush();
echo $body; 
```

另外，如果我回显数据并将其转换为文件，则使用：

[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)

该文件正在正确下载。因此从服务器获取文件没有问题。我哪里错了？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T08:41:14.310

用于下载 zip 格式文件的脚本： **zip.php**

```
<?php

/**
* Zip file creation class.
* Makes zip files.
*
* Last Modification and Extension By :
*
*  Hasin Hayder
*  HomePage : www.hasinme.info
*  Email : countdraculla@gmail.com
*  IDE : PHP Designer 2005
*
*
* Originally Based on :
*
*  http://www.zend.com/codex.php?id=535&single=1
*  By Eric Mueller <eric@themepark.com>
*
*  http://www.zend.com/codex.php?id=470&single=1
*  by Denis125 <webmaster@atlant.ru>
*
*  a patch from Peter Listiak <mlady@users.sourceforge.net> for last modified
*  date and time of the compressed file
*
* Official ZIP file format: http://www.pkware.com/appnote.txt
*
* @access  public
*/
class zipfile
{
    /**
     * Array to store compressed data
     *
     * @var  array    $datasec
     */
    var $datasec      = array();

    /**
     * Central directory
     *
     * @var  array    $ctrl_dir
     */
    var $ctrl_dir     = array();

    /**
     * End of central directory record
     *
     * @var  string   $eof_ctrl_dir
     */
    var $eof_ctrl_dir = "\x50\x4b\x05\x06\x00\x00\x00\x00";

    /**
     * Last offset position
     *
     * @var  integer  $old_offset
     */
    var $old_offset   = 0;

    /**
     * Converts an Unix timestamp to a four byte DOS date and time format (date
     * in high two bytes, time in low two bytes allowing magnitude comparison).
     *
     * @param  integer  the current Unix timestamp
     *
     * @return integer  the current date in a four byte DOS format
     *
     * @access private
     */
    function unix2DosTime($unixtime = 0) {
        $timearray = ($unixtime == 0) ? getdate() : getdate($unixtime);

        if ($timearray['year'] < 1980) {
            $timearray['year']    = 1980;
            $timearray['mon']     = 1;
            $timearray['mday']    = 1;
            $timearray['hours']   = 0;
            $timearray['minutes'] = 0;
            $timearray['seconds'] = 0;
        } // end if

        return (($timearray['year'] - 1980) << 25) | ($timearray['mon'] << 21) | ($timearray['mday'] << 16) |
                ($timearray['hours'] << 11) | ($timearray['minutes'] << 5) | ($timearray['seconds'] >> 1);
    } // end of the 'unix2DosTime()' method

    /**
     *
     * Function to force the download of the archive as soon as it is created
     *
     * @param archiveName string - name of the created archive file
     * @access public
     * @return ZipFile via Header
     */
    public function forceDownload($archiveName) {
        if(ini_get('zlib.output_compression')) {
            ini_set('zlib.output_compression', 'Off');
        }

        // Security checks
        if( $archiveName == "" ) {
            echo "<html><title>Public Photo Directory - Download </title><body><BR><B>ERROR:</B> The download file was NOT SPECIFIED.</body></html>";
            exit;
        }
        elseif ( ! file_exists( $archiveName ) ) {
            echo "<html><title>Public Photo Directory - Download </title><body><BR><B>ERROR:</B> File not found.</body></html>";
            exit;
        }

        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: private",false);
        header("Content-Type: application/zip");
        header("Content-Disposition: attachment; filename=".basename($archiveName).";" );
        header("Content-Transfer-Encoding: binary");
        header("Content-Length: ".filesize($archiveName));
        readfile("$archiveName");
    }

    /**
     * Adds "file" to archive
     *
     * @param  string   file contents
     * @param  string   name of the file in the archive (may contains the path)
     * @param  integer  the current timestamp
     *
     * @access public
     */
    function addFile($data, $name, $time = 0)
    {
        $name     = str_replace('\\', '/', $name);

        $dtime    = dechex($this->unix2DosTime($time));
        $hexdtime = '\x' . $dtime[6] . $dtime[7]
                  . '\x' . $dtime[4] . $dtime[5]
                  . '\x' . $dtime[2] . $dtime[3]
                  . '\x' . $dtime[0] . $dtime[1];
        eval('$hexdtime = "' . $hexdtime . '";');

        $fr   = "\x50\x4b\x03\x04";
        $fr   .= "\x14\x00";            // ver needed to extract
        $fr   .= "\x00\x00";            // gen purpose bit flag
        $fr   .= "\x08\x00";            // compression method
        $fr   .= $hexdtime;             // last mod time and date

        // "local file header" segment
        $unc_len = strlen($data);
        $crc     = crc32($data);
        $zdata   = gzcompress($data);
        $zdata   = substr(substr($zdata, 0, strlen($zdata) - 4), 2); // fix crc bug
        $c_len   = strlen($zdata);
        $fr      .= pack('V', $crc);             // crc32
        $fr      .= pack('V', $c_len);           // compressed filesize
        $fr      .= pack('V', $unc_len);         // uncompressed filesize
        $fr      .= pack('v', strlen($name));    // length of filename
        $fr      .= pack('v', 0);                // extra field length
        $fr      .= $name;

        // "file data" segment
        $fr .= $zdata;

        // "data descriptor" segment (optional but necessary if archive is not
        // served as file)
        $fr .= pack('V', $crc);                 // crc32
        $fr .= pack('V', $c_len);               // compressed filesize
        $fr .= pack('V', $unc_len);             // uncompressed filesize

        // add this entry to array
        $this -> datasec[] = $fr;

        // now add to central directory record
        $cdrec = "\x50\x4b\x01\x02";
        $cdrec .= "\x00\x00";                // version made by
        $cdrec .= "\x14\x00";                // version needed to extract
        $cdrec .= "\x00\x00";                // gen purpose bit flag
        $cdrec .= "\x08\x00";                // compression method
        $cdrec .= $hexdtime;                 // last mod time & date
        $cdrec .= pack('V', $crc);           // crc32
        $cdrec .= pack('V', $c_len);         // compressed filesize
        $cdrec .= pack('V', $unc_len);       // uncompressed filesize
        $cdrec .= pack('v', strlen($name) ); // length of filename
        $cdrec .= pack('v', 0 );             // extra field length
        $cdrec .= pack('v', 0 );             // file comment length
        $cdrec .= pack('v', 0 );             // disk number start
        $cdrec .= pack('v', 0 );             // internal file attributes
        $cdrec .= pack('V', 32 );            // external file attributes - 'archive' bit set

        $cdrec .= pack('V', $this -> old_offset ); // relative offset of local header
        $this -> old_offset += strlen($fr);

        $cdrec .= $name;

        // optional extra field, file comment goes here
        // save to central directory
        $this -> ctrl_dir[] = $cdrec;
    } // end of the 'addFile()' method

    /**
     * Dumps out file
     *
     * @return  string  the zipped file
     *
     * @access public
     */
    function file()
    {
        $data    = implode('', $this -> datasec);
        $ctrldir = implode('', $this -> ctrl_dir);

        return
            $data .
            $ctrldir .
            $this -> eof_ctrl_dir .
            pack('v', sizeof($this -> ctrl_dir)) .  // total # of entries "on this disk"
            pack('v', sizeof($this -> ctrl_dir)) .  // total # of entries overall
            pack('V', strlen($ctrldir)) .           // size of central dir
            pack('V', strlen($data)) .              // offset to start of central dir
            "\x00\x00";                             // .zip file comment length
    } // end of the 'file()' method

    /**
     * A Wrapper of original addFile Function
     *
     * Created By Hasin Hayder at 29th Jan, 1:29 AM
     *
     * @param array An Array of files with relative/absolute path to be added in Zip File
     *
     * @access public
     */
    function addFiles($files /*Only Pass Array*/)
    {
        foreach($files as $file)
        {
        if (is_file($file)) //directory check
        {
            $data = implode("",file($file));
                    $new_file = $this->prefix_name.end(explode('/', $file));
                    $this->addFile($data, $new_file);
                }
        }
    }

    /**
     * A Wrapper of original file Function
     *
     * Created By Hasin Hayder at 29th Jan, 1:29 AM
     *
     * @param string Output file name
     *
     * @access public
     */
    function output($file)
    {
        $fp=fopen($file,"w");
        fwrite($fp,$this->file());
        fclose($fp);
    }

} // end of the 'zipfile' class
?> 
```

**示例用法：**

```
<?php

include_once('zip.php');

$zip_file = 'my_files.zip'; // name for downloaded zip file

$ziper = new zipfile();
$ziper->prefix_name = 'folder/'; // here you create folder which will contain downloaded files
$ziper->addFiles($files_to_zip);  // array of files
$ziper->output($zip_file); 
$ziper->forceDownload($zip_file);
@unlink($zip_file);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-12T10:03:09.930

我可能有点晚了，但我遇到了同样的问题，这些台词对我来说就像一个魅力

```
while (ob_get_level()) {
  ob_end_clean();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T07:17:09.630

罪魁祸首是 imap_base64。它没有正确解码数据。我将其替换为 base64_decode，如下所示，代码运行良好。

```
$body = base64_encode($data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-25T16:10:46.923

我还没有看到有人提到这一点，但是在下载 ZIP 文件时尝试删除 Content-Length 标头。我有这个完全相同的问题，它适用于

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-07T02:25:09.327

您非常接近解决方案！我发现解决这个问题的方法是一起删除 Content-type 标头，让浏览器找出这是一个 .zip 文件。删除 Content-Type ，它应该可以根据需要工作。

```
// Remove this line 
header('Content-Type: '. $type .'/'. $subtype); 
```

在我的控制台（Chrome）中，我收到一条奇怪的消息：

> 资源解释为文档，但使用 MIME 类型 application/octet-stream 传输：
> 
> 资源解释为 Document，但使用 MIME 类型 application/zip 传输：

当我删除 MIME 类型（内容类型标头）时，.zip 停止给我一个错误并正常工作。

使 .zip 工作的最基本的下载脚本最后看起来像这样：（注意：您仍然可以添加更多标头用于缓存等）

```
<?php
    header("Content-Disposition: attachment; filename=\"".$Filename."\"");
    header("Content-Length: ".filesize($Filename));
    readfile($Filename);
?> 
```

**已编辑**

如果浏览器读取额外的空格，您的 .zip 也会遇到问题。您可以通过添加 exit(); 来防止 readfile() 末尾的多余空格；但您需要确保文件开头没有任何空格。这在处理框架（尤其是您自己的）时尤其常见。小技巧：如果在缓冲区开始输出 HTML 之前包含所有函数、配置和类，请查看源代码。开始时 . 之前会有一个空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-12T10:13:05.847

```
It Worked For Me. It Download My .Zip File. But, you have to provide the full path of File, where it is located.
For ex: My File is inside assets/upload Folder. Attach name of that file with this location. You will download it without any problem.

$FilePaths='assets/Upload/'.$FileName; //Give proper file path with file name.

download_file($FilePaths);

function download_file( $fullPath )
{
  if( headers_sent() )
    die('Headers Sent');

  if(ini_get('zlib.output_compression'))
    ini_set('zlib.output_compression', 'Off');

  if( file_exists($fullPath) )
  {

    $fsize = filesize($fullPath);
    $path_parts = pathinfo($fullPath);
    $ext = strtolower($path_parts["extension"]);

    switch ($ext) 
    {
      case "pdf": $ctype="application/pdf"; break;
      case "exe": $ctype="application/octet-stream"; break;
      case "zip": $ctype="application/zip"; break;
      case "doc": $ctype="application/msword"; break;
      case "xls": $ctype="application/vnd.ms-excel"; break;
      case "ppt": $ctype="application/vnd.ms-powerpoint"; break;
      case "gif": $ctype="image/gif"; break;
      case "png": $ctype="image/png"; break;
      case "jpeg":
      case "jpg": $ctype="image/jpg"; break;
      default: $ctype="application/force-download";
    }

    header("Pragma: public"); 
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: private",false); 
    header("Content-Type: $ctype");
    header("Content-Disposition: attachment; filename=\"".basename($fullPath)."\";" );
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: ".$fsize);
    ob_clean();
    flush();
    readfile( $fullPath );

  } 
  else
    die('File Not Found');

} 
```

有关更多信息，请查看此[文件下载](https://stackoverflow.com/questions/32329586/how-do-i-download-a-file-using-php-and-mysql-db/32330239#32330239)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-21T08:43:48.637

这对于大文件下载非常有用。用户将立即收到文件。也许 zip 这样也将是正确的。

```
 if(file_exists($filename) && is_readable($filename) && file_exists($filename)){
             header("Content-Disposition: attachment; filename=".basename(str_replace(' ', '_', $filename)));
             header("Content-Type: application/force-download");
             header("Content-Type: application/octet-stream");
             header("Content-Type: application/download");
             header("Content-Description: File Transfer");
             header("Content-Length: " . filesize($filename));
             flush(); // this doesn't really matter.

             $fp = fopen($filename, "r");
             while (!feof($fp))
             {
                 echo fread($fp, 65536);
                 flush(); // this is essential for large downloads
             }
             fclose($fp);
         exit;
    } 
```

# java - Junit测试不恢复数据

> ID：10681849
> 
> 赞同：4
> 
> 时间：2012-05-21T08:32:13.713
> 
> 标签：java, junit, testcase

我在junit中做了一些测试用例，在测试了这些方法之后，它没有从数据库中恢复数据。为此，我向数据库中插入了一些数据。然后我测试了方法。所以在完成测试数据后必须删除，但它没有发生。这是我的代码

```
public class TestAdminMethodsWebService extends AbstractTransactionalDataSourceSpringContextTests {
protected WebServiceTemplate admin;
Connection connection = null;
public TestAdminMethodsWebService(){
    try {
        Class.forName("org.postgresql.Driver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}
protected String[] getConfigLocations() {
    return new String[] { "applicationContext-test.xml" };
}
public WebServiceTemplate getAdmin() {
    return admin;
}
public void setAdmin(WebServiceTemplate admin) {
    this.admin = admin;
}
@Override
protected void onSetUp() throws Exception{  
    String query1 = "INSERT INTO roles( id,is_active,name) VALUES ('1',true,'admin')";
    String query2 = "INSERT INTO customers(id, is_active, name, lxg_username, lxg_password, lxg_classid) VALUES ('1', true,'cust1','naomi@mkinetic.com','5966nM','INFO1' )";
    String query3 = "INSERT INTO users(id,  is_active)  VALUES ('1',  true)";
    String query4 = "INSERT INTO customers(id,  is_active)  VALUES ('1',true)";
    String query5 = "INSERT INTO users( id, is_active,email, password, lxg_username, lxg_password, lxg_classid, role_id, customer_id) VALUES ('1',true,'gfe@gfe.com','gfe','naomi@mkinetic.com','5966nM','INFO1','1','1')";
    String query6 = "INSERT INTO roles( id,is_active,name) VALUES ('2',true,'User') ";

    try {
        connection = DriverManager.getConnection("jdbc:postgresql://localhost/g","g", "root");
        Statement st = connection.createStatement();
        st.execute(query1);
        st.execute(query2);
        st.execute(query3);
        st.execute(query4);
        st.execute(query5);
        st.execute(query6);

    } catch (Exception e) {
        e.printStackTrace();
    }
    finally{
        try {
            connection.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
@Override
protected void onTearDown() throws Exception{
    String query1 = "delete from users where id='1'";
    String query2 = "delete from roles where id='1'";
    String query3 = "delete from customers where id='1'";
    String query4 = "delete from users where id='1'";
    String query5 = "delete from customers where id='1'";
    String query6 = "delete from roles where id ='2'";
    try {
            connection = DriverManager.getConnection("jdbc:postgresql://localhost/g","g", "root");
            Statement st = connection.createStatement();
            st.execute(query1);
            st.execute(query2);
            st.execute(query3);
            st.execute(query4);
            st.execute(query5);
            st.execute(query6);
        } catch (Exception e) {
            e.printStackTrace();
        }
        finally{
            try {
                connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
}
@SuppressWarnings("unckecked")
@Test
public void test_AddCompany(){
    try{
    AddCompany addCompany = new ObjectFactory().createAddCompany();
    com.gfe.services.soap.admin.AddCompany.AdminCredentials adminCredentials = new com.gfe.services.soap.admin.AddCompany.AdminCredentials();
    adminCredentials.setPassword("gfe");
    adminCredentials.setUsername("gfe@gfe.com");
    com.gfe.services.soap.admin.AddCompany.CompanyInfo companyInfo = new com.gfe.services.soap.admin.AddCompany.CompanyInfo();
    companyInfo.setCompanyKey("company1");
    companyInfo.setLxgPassword("5966nM");
    companyInfo.setLxgUsername("naomi@mkinetic.com");
    companyInfo.setName("gfe1");
    companyInfo.setUrl("http://www.google.com");
    addCompany.setAdminCredentials(adminCredentials);
    addCompany.setCompanyInfo(companyInfo);
    JAXBElement<AddCompanyResponse> xmlResponse = (JAXBElement<AddCompanyResponse>) admin.marshalSendAndReceive(addCompany);
    AddCompanyResponse response = xmlResponse.getValue();
    CompanyResponse companyResponse =response.getReturn();
    BaseErrorResponseBean baseErrorResponseBean = companyResponse.getError();
    if (baseErrorResponseBean!= null) {
        String errorCdoe = baseErrorResponseBean.getErrorCode();
        String errorMessage = baseErrorResponseBean.getErrorMessage();
        System.out.println("Error code = " +errorCdoe);
        System.out.println("Error Message = " + errorMessage);
    }
    String transactionId = companyResponse.getTransactionId();
    Boolean success = companyResponse.isSuccess();
    if (success) {
        System.out.println("The test addCompany runned successfully");  
    }
    else{
        System.out.println("Some error occoured in test addCompany ");
    }
    }
    catch(Exception e){
        System.out.println("ERROR IN TRY BLOCK");
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:23:16.793

您应该使用 dbunit 而不是真正的数据库。你想对它进行单元测试

# jquery - 用于更改下划线颜色的jQuery插件？

> ID：10681851
> 
> 赞同：0
> 
> 时间：2012-05-21T08:32:14.867
> 
> 标签：jquery, html, css

是否有任何插件可以更改链接下划线颜色和文本颜色？我需要将该功能添加到现有的 HTML 代码中，但还没有找到好的东西。我无法更改 HTML，因此无法包装`<a>`或`<span>`使用 CSS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:34:04.140

难道你不能通过将 text-decoration 设置为 none 来删除下划线，然后添加一个 border-bottom:1px 红色实体或者你想要的 JS 悬停在什么地方？

这听起来像是 2 行 jQuery，或者 3-10 行 JS。

[实例](http://jsbin.com/acukit)| [来源](http://jsbin.com/acukit/edit)：

```
$("selector for the links you want to change").css({
  "text-decoration": "none",
  "border-bottom": "1px solid green"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:04:18.543

听起来您正在尝试更改链接，对吗？您不能更改 html 还是无法访问它？如果您可以更改它，我建议您这样做：

```
//set the anchor color to the underline
$('a').css('color', '#fff');

//get the text in the link and wrap it in a span with the text color
var linkText = $('a').innerHTML();
var linkText = '<span style="color:#000">' + linkText + '</span>';

//update the anchor with the new html
$('a').innerHTML(linkText); 
```

让我知道这是否有意义:)

# r - R：round() 可以找到对象， sprintf() 不能，为什么？

> ID：10681852
> 
> 赞同：3
> 
> 时间：2012-05-21T08:32:15.267
> 
> 标签：r, ggplot2

我有一个函数，它接受一个数据框并使用 ggplot2 从该数据框中绘制一些列。ggplot2 中的 aes() 函数接受一个标签参数，我想使用 sprintf 来格式化该参数 - 这是我之前在其他代码中做过很多次的事情。当我将格式字符串传递给 sprintf（在本例中为“%1.1f”）时，它显示“找不到对象”。如果我使用 round() 函数并将参数传递给该函数，它可以毫无问题地找到它。格式（）也是如此。显然只有 sprintf() 无法看到该对象。

起初我认为这是由于调用函数而不是使用内联代码导致的延迟评估问题，但是在传递给 sprintf 的格式字符串上使用 force() 并不能解决问题。我可以解决这个问题，但我想知道为什么会这样。当然，这可能是我忽略的一些微不足道的事情。

问：为什么 sprintf() 找不到字符串对象？

代码如下（编辑和修剪以获得更简单的示例）

```
require(gdata)
require(ggplot2)
require(scales)
require(gridExtra)
require(lubridate)
require(plyr)
require(reshape)

set.seed(12345)
# Create dummy time series data with year and month
monthsback <- 64
startdate <- as.Date(paste(year(now()),month(now()),"1",sep = "-")) - months(monthsback)
mydf <- data.frame(mydate = seq(as.Date(startdate), by = "month", length.out = monthsback), myvalue5 = runif(monthsback, min = 200, max = 300))
mydf$year <- as.numeric(format(as.Date(mydf$mydate), format="%Y"))
mydf$month <- as.numeric(format(as.Date(mydf$mydate), format="%m"))

getchart_highlight_value <- function(
                          plotdf,
                          digits_used = 1
                          )
{
    force(digits_used)
    #p <- ggplot(data = plotdf, aes(x = month(mydate, label = TRUE), y = year(mydate), fill = myvalue5, label = round(myvalue5, digits_used))) +
    # note that the line below using sprintf() does not work, whereas the line above using round() is fine
    p <- ggplot(data = plotdf, aes(x = month(mydate, label = TRUE), y = year(mydate), fill = myvalue5, label = sprintf(paste("%1.",digits_used,"f", sep = ""), myvalue5))) +
      scale_x_date(labels = date_format("%Y"), breaks = date_breaks("years")) +
      scale_y_reverse(breaks = 2007:2012, labels = 2007:2012, expand = c(0,0)) +
      geom_tile() + geom_text(size = 4, colour = "black") +
      scale_fill_gradient2(low = "blue", high = "red", limits = c(min(plotdf$myvalue5), max(plotdf$myvalue5)), midpoint = median(plotdf$myvalue5)) +
      scale_x_discrete(expand = c(0,0)) +
      opts(panel.grid.major = theme_blank()) +
      opts(panel.background = theme_rect(fill = "transparent", colour = NA)) +
      png(filename = "c:/sprintf_test.png", width = 700, height = 300, units = "px", res = NA)
      print(p)
      dev.off()
}

getchart_highlight_value (plotdf <- mydf,
                          digits_used <- 1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:56:21.387

使用 Martin 的最小示例（这是一个最小示例，另请参见此[问题](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)`ggplot()`），您可以通过指定应使用的环境来使代码工作。为此，请`environment`在`ggplot()`函数中指定参数，例如：

```
require(ggplot2)

getchart_highlight_value <- function(df)
{
  fmt <- "%1.1f"
  ggplot(df, aes(x, x, label=sprintf(fmt, lbl)),
         environment = environment()) + 

  geom_tile(bg="white") + 
  geom_text(size = 4, colour = "black")
}

df <- data.frame(x = 1:5, lbl = runif(5))
getchart_highlight_value (df) 
```

该函数`environment()`返回当前（本地）环境，即由函数创建的环境`getchart_highlight_value()`。如果你不指定这个，`ggplot()`将在全局环境中查找，并且`fmt`没有定义变量。

与懒惰的评估无关，与选择正确的环境有关。

上面的代码产生以下情节：

![在此处输入图像描述](../Images/1a46e0d39572c004dd7584bf1124ccc3.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T12:31:14.387

这是一个最小的例子

```
require(ggplot2)

getchart_highlight_value <- function(df)
{
    fmt <- "%1.1f"
    ggplot(df, aes(x, x, label=sprintf(fmt, lbl))) + geom_tile()
}

df <- data.frame(x = 1:5, lbl = runif(5))
getchart_highlight_value (df) 
```

它失败了

```
> getchart_highlight_value (df)
Error in sprintf(fmt, lbl) : object 'fmt' not found 
```

如果我`fmt`在全球环境中创建，那么一切都很好；也许这解释了上面的“有时它有效”/“它对我有效”的评论。

```
> sessionInfo()
R version 2.15.0 Patched (2012-05-01 r59304)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggplot2_0.9.1

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.0       
 [5] labeling_0.1       MASS_7.3-18        memoise_0.1        munsell_0.3       
 [9] plyr_1.7.1         proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1    
[13] scales_0.2.1       stringr_0.6 
```

# algorithm - 交互式可视化算法，如传播、大小、物理等

> ID：10681856
> 
> 赞同：5
> 
> 时间：2012-05-21T08:32:35.940
> 
> 标签：algorithm, canvas, svg, visualization, data-visualization

是否有任何书籍或网站描述了人们在构建交互式可视化时使用的算法，例如：

*   均匀放置东西
*   尺寸选项，例如根据受欢迎程度
*   应用重力和摩擦等物理学
*   有机增长等

我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:19:28.867

我曾经读过这个关于图形绘制算法的调查：绘制图形的算法[：带注释的参考书目](http://www.cs.brown.edu/people/rt/papers/gdbiblio.pdf)。非常广泛地介绍了绘制图形的各种技术，包括保持可视化的美感。

不久前，我还阅读了几篇关于如何绘制基于物理的自动间距图的论文，但我不记得我将它们保存在哪里。将很快更新答案。--> 这里有几个：

[基于物理的信息可视化的加速力计算](http://dl.acm.org/citation.cfm?id=769928)

[通过力导向放置绘制图形](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.13.8444)

如果你喜欢学术型的出版物，可以看看 VIS、VAST 和 InfoVis 等会议。

# c - 多个返回语句如何工作？

> ID：10681857
> 
> 赞同：1
> 
> 时间：2012-05-21T08:32:36.720
> 
> 标签：c

我的印象是 C 中的任何函数都只支持一个 return 语句，直到我遇到一些提到多个 return 语句的注释。我的问题是这些多重返回语句是如何工作的。任何帮助都会得到帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T08:35:40.973

执行的第一条`return`语句将终止函数并使用其值。

但是，显然可以有多个执行路径——它们可以返回不同的值。实际上，在非 void 函数中，每个可能的执行路径**都**必须返回一些东西。实现这一点的最简单方法显然是`return`在函数的最后声明。

```
if(foo)
    return 23;
else
    return 42; 
```

代码中只有一个 return 语句有[一些论据；](http://c2.com/cgi/wiki?SingleFunctionExitPoint)如果其中任何一个适用于您，请考虑阅读该文章。一个很好的例子是总是需要进行一些清理的代码。在这种情况下，您只想在完成此操作后返回 - 因此您将为返回值设置一个变量，`goto`如果您需要提前返回，请使用它跳转到函数末尾的清理和返回部分.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:38:15.147

好吧，它将遇到的第一个 return 语句将停止进一步执行并将控制权返回给调用者函数。如果您想在函数中处理后访问多个值，那么您可以使用结构或数组这些对象，您可以从函数返回，因此您将获得更新的值作为整个结构/数组对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:35:55.777

无论哪个返回先被击中，都会导致函数退出并将控制权交还给调用者。

例如：

```
int foo(int x)
{
    if(x == 0) return 0;
    return 1;
} 
```

在这种情况下，如果`x`是`0`，那么第一个返回将被击中并被`0`返回。如果传递了任何其他数字，则第二次返回被击中并`1`返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T08:36:37.253

你的意思是这样吗？

```
int function(int input)
{
   if (input == 1) return 1;
   else return 0;
} 
```

好吧，它们作为返回语句工作。当然，对函数中的每个代码路径都有一个返回语句才有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T08:36:52.593

如果在其他逻辑块中有返回......那么你可以想象在一个函数中有多个返回。

但类似：return 1; 返回 2；

没那么多。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-21T08:38:53.433

规则是，对于非 void 函数，如果没有返回语句，就必须不可能到达函数的末尾。

当执行一个函数时，当你点击一个 return 语句时，无论你在函数中的哪个位置（在 for 或 if ... 内），都会退出函数。因此，如果同一分支中有两个 return 语句，则只会考虑第一个。

# android - Android：使用 ViewSwitcher 切换后 TableLayout 失去布局

> ID：10681858
> 
> 赞同：0
> 
> 时间：2012-05-21T08:32:39.930
> 
> 标签：android, alignment, tablelayout

我加载了一个布局，其中包含一个 TableLayout。布局是 ViewSwitcher 的一部分。然后我切换到不同的布局，然后返回到具有 TableLayout 的原始布局。TableLayout 失去了它的布局结构。该表有 2 列和多行。第二列中的单元格全部对齐，但在切换到另一个布局后返回时，单元格不再对齐。在视图之间切换时，Android 似乎会丢失布局。有关解决此问题的任何建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:33:44.323

通过在最右侧列的 TableLayout 上设置 android:stretchColumns，这解决了问题。

# jquery - 加载图像时添加“加载”gif

> ID：10681860
> 
> 赞同：-1
> 
> 时间：2012-05-21T08:33:06.810
> 
> 标签：jquery, asp.net

我如何在加载图像时使用 jQuery 添加加载 gif 文件，而不在后面的代码中执行？例如到这条线？请帮忙。

```
<asp:HyperLink ID="hprImage" runat="server" NavigateUrl='<%# Eval("WebAddress")%>' ImageUrl='<%# ReturnFilePath((Eval("FileName")).ToString()) %>' Target="_blank"></asp:HyperLink> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:36:01.940

```
$("loading place").ajaxStart(function(){
    $(this).html("<img id='loading'/>")
}); 
```

另外，更多 jQuery 参考，请访问[jQuery 网站](http://jquery.com/)或[w3school](http://www.w3schools.com/)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:41:54.877

我曾经使用过这个黑客：

```
<div>
  <span id="id1">View image</span>  
  <div style="display:none;" id="spinner">
    <img src='/images/preloader.gif' width="16"/>
  </div>
</div> 
```

这是 'id1' 的 onClick 函数：

```
 function loadImage()
    {
        var spinnerObj = $('#spinner'); //Spinner until the image loads
        spinnerObj.show();
        var img = $("<img width='100px;' />").attr('src', 'http://www.foo.com/a.gif').load(function()
        {
       var imageDiv = spinnerObj.parent();
       imageDiv.html(img);
        });
    } 
```

# java - Web 上不再提供 Spring Beans Schema？

> ID：10681864
> 
> 赞同：5
> 
> 时间：2012-05-21T08:33:43.983
> 
> 标签：java, spring

在我的浏览器中访问[http://www.springframework.org/schema/beans/spring-beans-3.1.xsd](http://www.springframework.org/schema/beans/spring-beans-3.1.xsd)会产生 403。

在我的浏览器中访问[http://www.springframework.org/schema/security/spring-security-3.1.xsd](http://www.springframework.org/schema/security/spring-security-3.1.xsd)返回一个有效的模式......

那么我错过了什么？这是一个暂时的问题吗？还是将 bean 模式移动到其他地方？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T09:04:51.940

我有同样的问题，似乎互联网上的公共模式不可用。

我更改了架构位置以在类路径上使用 xsd，例如

```
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
```

变成：

```
classpath:/org/springframework/beans/factory/xml/spring-beans-3.0.xsd 
```

并修复了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T15:29:18.510

值得一提的是，公共架构于 5 月 21 日东部时间上午 11:00 回归。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:38:56.587

另请参阅[此问题](https://stackoverflow.com/questions/10680000/you-dont-have-permission-to-access-schema-beans-spring-beans-3-1-xsd-on-this-s)。

不过，您并没有遗漏任何东西，您有正确的 url，而且他们有一个（可能是可修复的）问题。

但是从长远来看，您可能应该将您的应用程序配置为不依赖于 http url，而是在本地存储和引用模式。

# android - 在自定义视图中提供默认样式（属性）

> ID：10681868
> 
> 赞同：12
> 
> 时间：2012-05-21T08:33:56.153
> 
> 标签：android, view, background, widget, styles

请让我知道，如何将自定义按钮的默认背景设置为空。

我的意思是......我知道我可以定义一个“样式”，将 android:background 设置为“@null”，并要求用户在他们的布局中明确应用该样式。例如：

```
<style name="MyButton" parent="@android:style/Widget.Button">
    <item name="android:background">@null</item>
</style> 
```

和

```
<com.xxx.widget.MyButton
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    style="@style/MyButton"
    android:text="MyButton" /> 
```

上面的代码运行良好。但是我怎样才能在我的类“MyButton”内部应用这种风格，让用户不要明确地设置风格呢？

例如，如何使以下布局像以前一样工作：

```
<com.xxx.widget.MyButton
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="MyButton" /> 
```

我尝试在下面的构造函数中执行此操作，但它不起作用。

```
public MyButton(Context context, AttributeSet attrs) {
    this(context, attrs, com.xxx.R.style.MyButton);
} 
```

PS。当用户没有明确设置背景时，我想应用这个“空”背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T18:01:32.647

在您的 MyButton() 构造函数中，为什么不调用 setBackground(null)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-14T15:11:38.663

在这里聚会真的很晚了。但如果有人偶然发现同样的问题，这是我的解决方案。

假设我们想要一个自定义视图来扩展`TextInputLayout`. 这是该类通常的样子：

```
class MyTextInputLayout: TextInputLayout {
    constructor(context: Context) : this(context, null)
    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)
    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int)
        : super(context, attrs, defStyleAttr)
} 
```

现在，为了使用我们的自定义样式作为默认样式，将第三个构造函数（具有三个参数的构造函数）更改为：

```
class MyTextInputLayout: TextInputLayout {
    constructor(context: Context) : this(context, null)
    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0)
    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int)
        : super(ContextThemeWrapper(context, R.style.MyTextInputLayoutStyle), attrs, defStyleAttr)
} 
```

现在我们可以在布局 XML 文件中使用自定义视图，如下所示：

```
<com.xxx.MyTextInputLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"> 
```

我们不再需要`style="@style/MyTextInputLayoutStyle"`在组件中定义。

简而言之，我们需要将`context`传递给超级构造函数的内容替换为包装我们样式的构造函数。这样我们就不需要在现有主题中定义 R.attr.MyTextInputLayoutStyle 了。当您想将自定义视图用作库时很有用。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-07-20T03:16:31.677

这或多或少是一种便宜的方法，但为什么不将背景设置为透明正方形。像这样->

**transparent_square.xml：（放到drawable目录下）**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/square"
    android:>

    <solid android:color="#00808080"></solid> // The first two zeros set the alpha
                                              // to 0

</shape> 
```

然后将按钮的背景设置为您的可绘制对象。

**按钮：**

```
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send"
        android:id="@+id/sendButton"
        android:layout_weight="1"
        android:background="@drawable/transparent_square"/> 
```

# html - 更改 WPF 中的 Webbrowser 背景颜色

> ID：10681878
> 
> 赞同：1
> 
> 时间：2012-05-21T08:34:29.797
> 
> 标签：html, wpf, colors, background, browser

我的 xaml 代码中有 webbrowser 控件，我想更改它的文档背景颜色。

```
<WebBrowser  Source="http://google.com" x:Name="IE" Navigated="IE_Navigated" />

private void IE_Navigated(object sender, NavigationEventArgs e)
{
    HtmlDocument document = (HtmlDocument)IE.Document;
    var color = System.Drawing.Color.Black;
    document.BackColor = color;
} 
```

它不工作；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T08:16:42.377

它不起作用的原因是因为您混合了 WPF WebBrowser 和 WinForms WebBrowser 并且它们不兼容。

您的 XAML 正在创建 WPF WebBrowser，但在 Navigated 事件中，您将 IE.Document 转换为 HtmlDocument，这是 WinForms WebBrowser 的类型。因此，该演员将失败。

即使您将其更改为工作，还有一个问题是，一旦下载开始，导航事件就会被触发，而不是在下载完成之后（如[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.navigated.aspx)中所述）。WPF WebBrowser 没有像 WinForms WebBrowser 那样的 DocumentCompleted 事件。

如果您想在 WPF 应用程序中使用此功能，一种简单的方法是使用 WinForms WebBrowser 而不是 WPF 版本。这是通过将其托管在 WindowsFormsHost 中来完成的，如下所示：

```
 <wfi:WindowsFormsHost Name="host" /> 
```

您必须包含对 System.Windows.Forms（您可能已经拥有）和 WindowsFormsIntegration 的引用，然后将命名空间定义为：

```
xmlns:wfi="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration" 
```

在代码隐藏中：

```
 webBrowser = new System.Windows.Forms.WebBrowser();
  host.Child = webBrowser; 
```

然后导航：

```
 webBrowser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser_DocumentCompleted);
  webBrowser.Navigate("http://google.com"); 
```

然后将背景设置为黑色，您可以在身体上这样做，如下所示：

```
void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
  HtmlDocument document = (HtmlDocument)webBrowser.Document;
  document.Body.Style = "background-color:black";
} 
```

我已经对此进行了测试，并且可以正常工作。

# c# - Download html with encoding utf-8 vs iso-8859-1

> ID：10681880
> 
> 赞同：0
> 
> 时间：2012-05-21T08:34:35.217
> 
> 标签：c#, encoding, utf-8, webclient, iso-8859-1

Can I download a webpage with `charset=iso-8859-1`, and download it with `encoding=utf-8`? Will it download correctly?

Can I always download with utf-8 encoding for all encodings in the web?

**My code:**

Html page in the web:

```
<html debug="true">
<head/>
<body>
<%@LANGUAGE="JAVASCRIPT" CODEPAGE="1252"%>
<title>Untitled Document</title>
<meta name="robots" content="noindex"/>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
............ 
```

Func:

```
void download() {
        WebClient client = new WebClient();
        client.Encoding = Encoding.UTF8;
        client.DownloadDataCompleted += new DownloadDataCompletedEventHandler(client_DownloadDataCompleted);
        worker.ReportProgress(i);
        client.DownloadDataAsync(new Uri(link), i);
}
void client_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e) {
   Encoding enc = Encoding.UTF8;
   string myString = enc.GetString(e.Result);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:45:46.420

No, this doesn’t work. The [documentation of `WebClient.Encoding`](http://msdn.microsoft.com/en-us/library/system.net.webclient.encoding.aspx) clearly says:

> When a string is downloaded using the DownloadString or DownloadStringAsync methods, WebClient uses the Encoding returned by this to convert the downloaded Byte array into a string.

And why should it work? Your web page has an encoding different from UTF-8\. Why do you *want* to use UTF-8 here? It makes no sense. The document is encoded as ISO 8859-1, consequently this is the encoding you need to use to read it.

# c# - 创建 c# int[]，值为 0,1,2,3...长度

> ID：10681882
> 
> 赞同：39
> 
> 时间：2012-05-21T08:34:41.830
> 
> 标签：c#, arrays

我喜欢创建一个`int[]`长度`X`并用 [0,1,2....X] 赋值

例如

`public int[] CreateAA(int X){}`

`int[] AA = CreateAA(9) => [0,1,2,3,4,5,6,7,8,9]`

有什么简单的方法吗？或者必须循环和初始化值

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-21T08:36:19.897

您可以利用 IEnumerable 的功能。

```
int[] arr = Enumerable.Range(0, X+1).ToArray(); 
```

这将为您创建一个 IEnumerable List 并`.ToArray()`满足您的 int 数组需求。

因此，在您的情况下，对于 X=9，它将为`[0,1,2,3,4,5,6,7,8,9]`（根据需要）生成数组

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-21T08:57:28.787

使用`Enumerable.Range(0, 10).ToArray()`非常简洁，但是如果你想创建一个非常大的数组，`ToArray`扩展方法将不得不将数字收集到一个必须多次重新分配的缓冲区中。在每次重新分配时，缓冲区的内容都会复制到新的更大的缓冲区。.NET 使用的策略是在每次重新分配时缓冲区的大小加倍（并且初始缓冲区有四个项目）。

因此，如果您想避免缓冲区的多次重新分配，您需要提前创建数组：

```
int[] aa = new int[10];
for (var i = 0; i < aa.Length; i += 1)
  aa[i] = i; 
```

这是初始化数组的最有效方式。

但是，如果您需要一个包含 100,000,000 个连续数字的数组，那么您应该考虑一种不必将所有数字都保存在数组中的设计，以避免内存需求的影响。`IEnumerable<int>`为此目的非常有用，因为您不必分配整个序列，而是可以在迭代时生成它，而这正是`Enumerable.Range`它所做的。因此，首先避免连续数字的数组可能比考虑如何创建它更好。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-21T08:35:39.890

为什么要在已经存在的情况下创建一个功能。

对于此特定示例，请使用

```
int[] AA = Enumerable.Range(0, 10).ToArray(); 
```

在哪里`0 is the starting value`和`10 (X + 1) is the length of array`

所以一个通用的适用于所有人

```
int[] AA = Enumerable.Range(0, X + 1).ToArray(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T09:03:30.123

初始化试试这个

```
int x = 10;
Enumerable.Range(0, x)
          .Select((v, i) => v + i).ToArray(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-21T08:40:31.500

带函数和循环：

```
static int[] f(int X)
{
    int[] a = new int[X+1];
    for(int i = 0; i < a.Length; i++)
        a[i] = i;
    return a;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T08:50:50.310

为了完整起见，这里有一个创建数组的函数。

`CreateArray(0, 9)`我通过设置最小值和最大值的参数（即返回值）使其更加通用`{0,1,2,3,4,5,6,7,8,9}`。

```
static int[] CreateArray(int min, int max) {
  int[] a = new int[max - min + 1];
  for (int i = 0; i < a.Length; i++) {
    a[i] = min + i;
  }
  return a;
} 
```

# java - 我可以在 ejb 3.1 单例中定义一个非最终静态字段吗

> ID：10681886
> 
> 赞同：0
> 
> 时间：2012-05-21T08:35:14.257
> 
> 标签：java, ejb, ejb-3.1

根据 EJB 规范，不允许使用非最终静态字段。定义为单例的 EJB 3.1 无状态会话 bean 是否仍然如此？

只是为了让事情更清楚，并防止诸如您为什么要这样做的问题：

我有一种情况，我需要一个 EJB 来开始服务器启动工作，做一些与数据库相关的工作，只有当它完成时，它才会向系统中的所有其他组件发出信号，表明它们可以开始工作。

此 EJB 也将使用计时器定义，因此它将每隔几分钟启动一次，因此，如果它第一次失败，它将重试直到成功，或者直到有人注意到有问题。一旦成功，标志将被更改，并且所有其他组件（计时器 EJB）都可以启动。

所以我有一个单例 EJB，我需要它来保存所有其他组件/EJB 可以引用的静态（全局）标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:58:33.457

仍然禁止非最终静态字段，因为一旦您尝试对应用程序进行集群，就会遇到问题。EJB 单例只是运行它们的服务器实例上的单例。如果你有两个服务器实例，你可以有两个版本的单例，在你的静态字段中具有不同的值。

如果您需要全局标志，最好将其存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:36:46.280

请注意，类与单例 EJB 定义是一对多的。换句话说：

```
<session>
  <ejb-name>TestA</ejb-name>
  <ejb-class>org.example.SingletonBean</ejb-class>
</session>
<session>
  <ejb-name>TestB</ejb-name>
  <ejb-class>org.example.SingletonBean</ejb-class>
</session> 
```

在此示例中，将有多个`SingletonBean`类实例，一个用于`TestA`EJB，另一个用于`TestB`EJB。考虑到这个用例和 EJB 编程模型试图保护程序员的倾向（无论好坏），保持对静态字段的限制似乎是合理的。

鉴于容器正在管理单例 EJB 的单个实例，您不妨将全局状态作为实例变量存储在单例中。将单例注入到您的其他 bean 中，它们都可以通过成员变量访问共享状态。无论如何，这就是单例 EJB 的意义所在。

# c# - 从 C# 错误中调用 C++ 代码使用 c# 中的 c++ 引用中的引用

> ID：10681887
> 
> 赞同：3
> 
> 时间：2012-05-21T08:35:14.653
> 
> 标签：c#, c++, dll, pinvoke

所以在我的 c++.dll 文件中，我得到了以下函数：

```
 DLL void GetUserPass(char* &userName, char* &passWord)
{
    userName = "ceva";
    passWord = "altceva";
} 
```

现在我想从 c# 调用它，但它给了我一个错误：

```
[DllImport("myDLL.dll")]
private static extern void GetUserPass(ref string userName, ref string passWord);

static void f()
{
        string userName ="";
        string passWord ="";

        GetUserPass(ref userName, ref passWord);
} 
```

错误是：

> 调用 PInvoke 函数“下载 FTP 存档！Download_FTP_Archive.Program::GetUserPass”使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我应该在 C++ dll 文件中尝试类似：

```
using std::string;
 DLL void GetUserPass(string &userName, string &passWord)
{
    userName = "ceva";
    passWord = "altceva";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:58:35.573

尝试以下操作：

```
DLL void __stdcall GetUserPass(char* &userName, char* &passWord)
{
    userName = "ceva";
    passWord = "altceva";
}

[DllImport("myDLL.dll", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.StdCall)]
private static extern void GetUserPass(ref IntPtr userName, ref IntPtr passWord);
static void f()
{
        IntPtr userNamePtr = new IntPtr();
        IntPtr passWordPtr = new IntPtr();
        GetUserPass(ref userNamePtr, ref passWordPtr);
        string userName = Marshal.PtrToStringAnsi( userNamePtr );
        string passWord = Marshal.PtrToStringAnsi( passWordPtr );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:39:18.217

我不是 C++ 开发人员，但我对 C++ 语义有点熟悉。这`char* &userName`对我来说毫无意义。也许我错了，但试着`char* userName`看看它是否适合你。

# android - 一旦应用程序启动，从应用程序本身的 SD 卡复制数据库是一个好习惯吗？

> ID：10681891
> 
> 赞同：0
> 
> 时间：2012-05-21T08:35:22.447
> 
> 标签：android, database, sd-card

我不希望用户在我的应用程序运行时移除 SD 卡，因为它将包含我将在我的应用程序中用于显示图像和信息的数据库。

我看到的可能解决方案是在应用程序启动时将 SD 卡中的数据库内容复制到应用程序中（但它可能会消耗时间）。

当 SD 卡被移除时，有什么特别的方法可以冻结我的应用程序吗？

提前感谢您的帮助！

干杯，苏米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:43:01.200

SD卡上没有数据库怎么样？如果要下载，请直接下载到内部存储。如果它作为资产或资源在 APK 中，请将其提取到内部存储中。

如果您需要使用外部存储（SD卡），请在应用启动时检查外部存储是否已挂载。如果不是，则显示适当的消息并完成活动。

# php - 如何将 ImageView 中的图像发送到 php 服务器？

> ID：10681901
> 
> 赞同：2
> 
> 时间：2012-05-21T08:35:59.950
> 
> 标签：php, android, android-camera

一旦我在 ImageView 中有图像，如何以最简单的方式将图像发送到 Web 服务器？

我使用这个从图库中获得了图像：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
        try {
            // We need to recyle unused bitmaps
            if (bitmap != null) {
                bitmap.recycle();
            }
            InputStream stream = getContentResolver().openInputStream(
                    data.getData());
            bitmap = BitmapFactory.decodeStream(stream);
            stream.close();
            imageView.setImageBitmap(bitmap);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

我已将该图像设置为我的 imageView。我这样做是为了向上传者显示图像的预览。现在如何将该图像上传到网络服务器（最好的最简单的方法）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:53:28.373

我没有用 PHP 做到这一点，而是用 .NET 使用 base64 字符串发送了图像。

将您的图像转换为 base64 并将此字符串发送到您的服务器上。您的服务器会将此 base64 转换为原始图像

将图像转换为字节 [] 尝试以下代码

```
private void setPhoto(Bitmap bitmapm) {
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            bitmapm.compress(Bitmap.CompressFormat.JPEG, 100, baos); 

            byte[] byteArrayImage = baos.toByteArray();
            String imagebase64string = Base64.encodeToString(byteArrayImage,Base64.DEFAULT);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:45:22.253

这是来自此 URL 的代码（我在评论中指出了 -[如何使用 http 将 Android 中的文件从移动设备发送到服务器？](https://stackoverflow.com/questions/4126625/how-to-send-a-file-in-android-from-mobile-to-server-using-http)）：

```
String url = "http://yourserver";
File file = new File(Environment.getExternalStorageDirectory(),
        "yourfile");
try {
    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost(url);

    InputStreamEntity reqEntity = new InputStreamEntity(
            new FileInputStream(file), -1);
    reqEntity.setContentType("binary/octet-stream");
    reqEntity.setChunked(true); // Send in multiple parts if needed
    httppost.setEntity(reqEntity);
    HttpResponse response = httpclient.execute(httppost);
    //Do something with response...

} catch (Exception e) {
    // show error
} 
```

我猜很简单。而不是`File`and`FileInputStream(file)`我认为你可以使用 Your`stream`类型`InputStream`- 但我不确定......

# opengl - 顶点的缠绕顺序

> ID：10681908
> 
> 赞同：4
> 
> 时间：2012-05-21T08:36:28.173
> 
> 标签：opengl, 3d

我了解缠绕顺序是什么，以及它如何用于背面剔除。

但是，我不确定像 Blender 这样的 3D 建模程序如何能够获取任意一组三角形并将它们全部正确缠绕。

我试着用谷歌搜索答案，这是我发现的最好的：

[http://www.gamedev.net/topic/550481-vertex-winding-order-逆时针-oder-vertex---算法/](http://www.gamedev.net/topic/550481-vertex-winding-order-counter-clockwise-oder-vertex---algorithm/)

基本上，对于每个三角形，您可以找到它的中心（准确地说是质心），然后从该三角形计算出一个法线向量，从而为您提供一条射线。你取这条射线并测试它与其他所有三角形的交点。如果它是偶数，那么你的绕组是正确的，如果它是一个奇数，你的绕组是不正确的（我想这取决于你如何准确地生成法线向量，但你以某种方式使用奇数/偶数策略）。无论如何，这意味着整个过程通常是 O(n^2)。如果您有 1000 个三角形，那么对于每个三角形，您必须针对 999 个其他三角形的交集来测试它。是否有一种不太明显的方法来正确缠绕顶点，更有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T08:52:05.543

你确实理解错了。它没有

```
test it against intersection against every other triangle. 
```

首先，您可以仅根据三角形表面的法线向量来定向（缠绕）三角形。那么就只剩下两个选项了——**整个模型**要么好要么被翻转；）

所以你真的只需要检查**一个**三角形，然后根据最后一次检查的结果结束其余的检查，这基本上给你 O(n)。

编辑：哦，我想我知道这种方法什么时候会失败。我只记得例如 Google Sketchup 做的不是很好，有时你需要自己定位面孔。但是，如果您增加随机光线的数量（对于随机三角形），您确实会增加正确标记所有内容的机会。

EDIT2：在一些 50k+ 的人投票反对我之前 - 如果模型完全混淆（所有三角形都是随机顺序），**没有其他方法**可以正确定位它们，而不是检查它们与另一个凸面模型是例外。

# wpf - Idataerrorinfo 中如何调用索引器？

> ID：10681910
> 
> 赞同：2
> 
> 时间：2012-05-21T08:36:37.783
> 
> 标签：wpf, mvvm, idataerrorinfo

在 MVVM`IDataErrorInfo`中用于验证。在这个时间索引器检查值不能得到。在调用它后如何检查我无法获取的值。代码在这里。列名中传递的值是什么。

```
public string this[string columnName]
{
    get { return GetValidationError(columnName); }
} 
```

为什么要在 wpf 中使用索引器进行验证。任何人都可以说一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:42:31.943

如果使用 IDataErrorInfo 接口，则验证实现该接口的类。

如果您有属性名称，请激活验证并更改属性，索引器将使用字符串 columnName = "Name" 调用。现在您可以在 if 语句中处理“名称”验证

```
if(columnName  == "Name")
    // do Name validation 
```

//编辑

如果您通过绑定更改属性，则会在 wpf 中触发验证。你应该像这样装饰你的绑定：

```
Text="{Binding UpdateSourceTrigger=LostFocus, Path=FirstName, ValidatesOnDataErrors=true, NotifyOnValidationError=true}" 
```

这是使用 WPF 数据绑定和错误模板的 IDataErrorInfo 实现的简单说明。

[WPF：使用 IDataErrorInfo 轻松进行验证](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)

# javascript - 将 id 传递给我想在 fancybox 中显示的页面

> ID：10681912
> 
> 赞同：0
> 
> 时间：2012-05-21T08:36:50.083
> 
> 标签：javascript, jquery, web, fancybox

在我的网络应用程序中，我使用 fancybox 来显示产品详细信息。在主屏幕中，用户需要选择一些标准来获得他最喜欢的咖啡。

如果他在列表中选择了一种咖啡，产品详细信息应该会在一个花式框中打开。是否可以将 id 传递给fancybox 中的页面？这样我就可以从 de product-detailfiche 中的 xml 中获取有关咖啡的信息？

一些代码：

```
 function mycarousel_getItemHTML(item) {
            return '<a href="' + "detail.htm?"+item.getId() + '" class="' + "fancybox fancybox.iframe" + '" >' + '<img src="' + "http://www.oww.be/UserFiles/Image/Producten/koffiekiezer/product" + item.getCode() + ".png" + '" width="210" height="280" />' + '</a>';
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:03:05.803

您可以使用查询字符串传递 id。
为此，请使用此..

```
"detail.htm?id=" + <your_value>; 
```

`detail.htm`从中获取价值`querystring["id"]`

# meteor - 当 Meteor 响应式模板更新从数据订阅更改时，如何防止窗口焦点更改？

> ID：10681918
> 
> 赞同：2
> 
> 时间：2012-05-21T08:37:26.667
> 
> 标签：meteor

我有一页长。它包含对模板的引用，其中一些会呈现数据。

页面上的一个模板订阅了一个集合。当集合更改时，该模板中的视图会呈现已添加或更改的那些项目。它做得很好，不会重新加载页面。

问题是当数据呈现时页面的焦点会跳转到那个模板。模板呈现的数据正在由其他用户和服务器更新。因此，当呈现传入数据和更改时，用户可能不会查看页面的该部分。

如果用户在此模板呈现数据时正在页面下方读取数据，则屏幕焦点会跳回到呈现数据的页面的反应性模板区域。这很烦人。

如何防止屏幕焦点跳转到在长页面上呈现数据的区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:22:17.687

Meteor 目前不支持“自动对焦”属性。如果你想把重点放在页面加载上，你必须明确地做到这一点。

# javascript - 登录时 Facebook 无限循环

> ID：10681919
> 
> 赞同：2
> 
> 时间：2012-05-21T08:37:30.403
> 
> 标签：javascript, facebook, login, oauth

```
 var login = false;
 FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
              console.log('connected');
              login=true;
                // the user is logged in and connected to your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
          }
          else{
              FB.login(function(response) {
               if (response.authResponse) {
                 console.log('Welcome!  Fetching your information.... ');
                 FB.api('/me', function(response) {
                   console.log('Good to see you, ' + response.name + '.');
                   if(login===false)
                   {
                       window.open("http://www.facebook.com/EnergyZuerich/app_332399760133904", "_top");
                   }
                   //window.location.href=window.location.href;
                   //FB.logout(function(response) {
                     //console.log('Logged out.');
                   //});
                 });
               } else {
                 console.log('User cancelled login or did not fully authorize.');
               }    
             }, {scope: 'email'});
          }}); 
```

此身份验证适用于我和我公司中的大多数其他人，除了一个人，它会导致无限循环。

Login Popup Show 会出现一小段时间（他已经通过了身份验证）。然后弹出窗口消失，站点刷新并从头开始。

我用 IE、Firefox 和 Chrome 对其进行了测试，没有任何问题。他正在尝试使用 Firefox ..

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:45:00.967

用户可能禁用了 cookie。

# encryption - hsqldb：现有数据库的加密？

> ID：10681920
> 
> 赞同：0
> 
> 时间：2012-05-21T08:37:30.623
> 
> 标签：encryption, hsqldb

您知道一种加密现有 hsql 数据库而不丢失其内容的方法吗？

之后我想将它与 jdbc url 一起使用

```
jdbc:hsqldb:file:<database path>;crypt_key=<key>;crypt_type=blowfish 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:43:17.860

做到这一点的唯一方法是修改代码并构建一个特殊的 jar，它以明文形式读取 .script，但所有写入都使用加密。

使用普通 jar，`SHUTDOWN SCRIPT`在现有数据库上执行，将其转换为 .script 文件。

`Crypto crypto = null;`使用而不是现有行修改 org.hsqldb.persist.Log#processScript() 。使用 Ant 或 Gradle 编译 jar。

使用特殊 jar 的加密 URL 打开数据库并执行`SHUTDOWN`. 这将加密数据库

使用普通 jar 访问加密数据库。

由于这是一个有用的特性，它可能会被添加到 HSQLDB 的未来版本中。

# r - 将几个文本文件导入 R

> ID：10681922
> 
> 赞同：3
> 
> 时间：2012-05-21T08:37:39.507
> 
> 标签：r, import

我有四个文件夹，其中包含同名的文本文件（制表符分隔），我想将所有这些文本文件导入 data.frame。例如：

```
TopFolder = "G:\\University" 
SubFolder = list.files(TopFolder)
#find the name of the folders in the current directory
DateTime = rbind(read.table(paste(TopFolder,SubFolder[1],"Data.txt",sep = "\\"),sep="\t"),
                read.table(paste(TopFolder,SubFolder[2],"Data.txt",sep = "\\"),sep="\t"),
                 read.table(paste(TopFolder,SubFolder[3],"Data.txt",sep = "\\"),sep="\t"),
                 read.table(paste(TopFolder,SubFolder[4],"Data.txt",sep = "\\"),sep="\t")) 
```

这个例子工作得很好，虽然我希望使用循环或其他函数来生成这个变量，而不必单独导入所有文件。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T08:44:36.897

这个怎么样？

```
lf = list.files(path = "G:\\University", pattern = "Data.txt", 
                full.names = TRUE, recursive = TRUE, include.dirs = TRUE)

library(plyr)
DateTime = ldply(lf, read.table, sep = "\t") 
```

# c++ - 如何使用 boost 文件系统确定文件或目录的所有者？

> ID：10681929
> 
> 赞同：5
> 
> 时间：2012-05-21T08:38:07.913
> 
> 标签：c++, boost, filesystems, boost-filesystem

> **可能重复：**
> [使用 boost 获取文件的所有者和组](https://stackoverflow.com/questions/10289491/get-files-owner-and-group-using-boost)

我想使用 boost::filesystem 来确定哪些文件和目录/文件夹归特定用户所有。

我需要在 Linux (ext3) 和 Windows (NTFS) 文件系统上执行此操作。

如何使用 boost::filesystem 获取指定路径的用户标识符？

提前致谢。

编辑：来自所选答案的代码：

```
#include <iostream>
#include <string>

#ifdef LINUX
#include <pwd.h>
#include <grp.h>
#include <sys/stat.h>
#else
#include <stdio.h>
#include <windows.h>
#include <tchar.h>
#include "accctrl.h"
#include "aclapi.h"
#pragma comment(lib, "advapi32.lib")
#endif

bool getOwner(const std::string &Filename, std::string &Owner)
{
#ifdef LINUX
    struct stat FileInfo;
    stat(Filename.c_str(), &FileInfo);
    struct passwd *UserDatabaseEntry  = getpwuid(FileInfo.st_uid);
    struct group  *GroupDatabaseEntry = getgrgid(FileInfo.st_gid);
    //
    if (UserDatabaseEntry != 0)
    {
        Owner = UserDatabaseEntry->pw_name;
        return true;
    }
    else
    {
        return false;
    }
#else
    DWORD dwRtnCode = 0;
    PSID pSidOwner = NULL;
    BOOL bRtnBool = TRUE;
    LPTSTR AcctName = NULL;
    LPTSTR DomainName = NULL;
    DWORD dwAcctName = 1, dwDomainName = 1;
    SID_NAME_USE eUse = SidTypeUnknown;
    HANDLE hFile;
    PSECURITY_DESCRIPTOR pSD = NULL;

    // Get the handle of the file object.
    hFile = CreateFile(
        TEXT(Filename.c_str()),
        GENERIC_READ,
        FILE_SHARE_READ,
        NULL,
        OPEN_EXISTING,
        FILE_ATTRIBUTE_NORMAL,
        NULL);

    // Check GetLastError for CreateFile error code.
    if (hFile == INVALID_HANDLE_VALUE)
    {
        DWORD dwErrorCode = 0;

        dwErrorCode = GetLastError();
        _tprintf(TEXT("CreateFile error = %d\n"), dwErrorCode);
        return false;
    }

    // Get the owner SID of the file.
    dwRtnCode = GetSecurityInfo(
        hFile,
        SE_FILE_OBJECT,
        OWNER_SECURITY_INFORMATION,
        &pSidOwner,
        NULL,
        NULL,
        NULL,
        &pSD);

    // Check GetLastError for GetSecurityInfo error condition.
    if (dwRtnCode != ERROR_SUCCESS) {
        DWORD dwErrorCode = 0;

        dwErrorCode = GetLastError();
        _tprintf(TEXT("GetSecurityInfo error = %d\n"), dwErrorCode);
        return false;
    }

    // First call to LookupAccountSid to get the buffer sizes.
    bRtnBool = LookupAccountSid(
        NULL,           // local computer
        pSidOwner,
        AcctName,
        (LPDWORD)&dwAcctName,
        DomainName,
        (LPDWORD)&dwDomainName,
        &eUse);

    // Reallocate memory for the buffers.
    AcctName = (LPTSTR)GlobalAlloc(
        GMEM_FIXED,
        dwAcctName);

    // Check GetLastError for GlobalAlloc error condition.
    if (AcctName == NULL) {
        DWORD dwErrorCode = 0;

        dwErrorCode = GetLastError();
        _tprintf(TEXT("GlobalAlloc error = %d\n"), dwErrorCode);
        return false;
    }

    DomainName = (LPTSTR)GlobalAlloc(
        GMEM_FIXED,
        dwDomainName);

    // Check GetLastError for GlobalAlloc error condition.
    if (DomainName == NULL) {
        DWORD dwErrorCode = 0;

        dwErrorCode = GetLastError();
        _tprintf(TEXT("GlobalAlloc error = %d\n"), dwErrorCode);
        return false;

    }

    // Second call to LookupAccountSid to get the account name.
    bRtnBool = LookupAccountSid(
        NULL,                   // name of local or remote computer
        pSidOwner,              // security identifier
        AcctName,               // account name buffer
        (LPDWORD)&dwAcctName,   // size of account name buffer 
        DomainName,             // domain name
        (LPDWORD)&dwDomainName, // size of domain name buffer
        &eUse);                 // SID type

    // Check GetLastError for LookupAccountSid error condition.
    if (bRtnBool == FALSE)
    {
        DWORD dwErrorCode = 0;

        dwErrorCode = GetLastError();

        if (dwErrorCode == ERROR_NONE_MAPPED)
        {
            _tprintf(TEXT("Account owner not found for specified SID.\n"));
        }
        else
        {
            _tprintf(TEXT("Error in LookupAccountSid.\n"));
        }
        return false;

    }
    else if (bRtnBool == TRUE)
    {

        // Print the account name.
        _tprintf(TEXT("Account owner = %s\n"), AcctName);
        Owner = AcctName;
        return true;
    }
#endif
    return false;
}

int main(int argc, char *argv[])
{
    std::string Filename = argv[0];
    if (argc > 1)
    {
        Filename = argv[1];
    }
    std::cout << "File " << Filename << " is owned by: ";
    //
    std::string Owner;
    bool OK = getOwner(Filename, Owner);
    if (OK)
    {
        std::cout << Owner << "." << std::endl;
    }
    else
    {
        std::cout << "Unknown." << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:00:41.890

恐怕 boost::filesystem 库没有涵盖您要实现的目标。可以检索[文件权限](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#Enum-perms)，但是对于所有权，您必须求助于其他东西或编写自己的东西。

这是对[Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446629%28v=vs.85%29.aspx)和[Linux](https://stackoverflow.com/questions/7328327/how-to-get-files-owner-name-in-linux-using-c)的说明。

# c++ - 字符串反转，std::string 不允许字符赋值？

> ID：10681936
> 
> 赞同：0
> 
> 时间：2012-05-21T08:38:20.670
> 
> 标签：c++, stdstring

这是我使用`std::string`. 但它不起作用..

```
#include <string>
#include <iostream>
using namespace std;

main()
{
   string input;
   int i, j;
   cout << "Enter a string: ";
   getline(cin,input);

   string output;
   for(i = 0, j = input.length() - 1; i < input.length(); i++, j--)
      output[i]=input[j];

   cout << "Reversed string = " << output;
   cin.get();
} 
```

但是如果我们替换字符串输出，因为`char output[100];`它可以工作。所以`std::string`不允许字符分配？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T09:05:27.970

`std::string` allows character assignments, but not beyond the end of the string. Since `std::string output;` creates an empty string, `output[0]` is beyond the end of the string.

Presumably this is a learning exercise, but you may as well also be aware of some tools that will do it for you:

```
#include <string>
#include <iostream>
#include <algorithm>

int main() {
    std::string input;
    std::getline(cin,input);
    std::cout << "input: " << input << '\n';

    std::reverse(input.begin(), input.end());
    std::cout << "reversed: " << input << '\n';
} 
```

or:

```
#include <iterator>
...

    std::string output;
    std::reverse_copy(input.begin(), input.end(), std::back_inserter(output));
    std::cout << "reversed: " << output << '\n'; 
```

or:

```
 std::string output;
    std::copy(input.rbegin(), input.rend(), std::back_inserter(output)); 
```

or:

```
 std::string output(input.rbegin(), input.rend()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T08:43:32.577

您必须调整输出大小：

```
output.resize(input.length()); 
```

或最初设置长度：

```
string output(input.length(), ' ');

#include <string>
#include <iostream>
using namespace std;

main(){
string input;
int i,j;
cout << "Enter a string: ";
getline(cin,input);
string output(input.length(), ' '); // initially set sufficient length
for(i=0,j=input.length()-1;i<input.length();i++,j--)
output[i]=input[j];

cout << "Reversed string = " << output;
cin.get();
} 
```

参见： [std::string](http://www.cplusplus.com/reference/string/string/string/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-21T08:41:18.453

因为`output`是空字符串`output[i]`会访问无效的内存位置。只需使用 . 将字符附加到`output`字符串即可`output += input[j]`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-21T09:11:07.897

试试反向的STL算法？

```
include <algorithm>
// ...
std::string str("hello world!");
std::reverse(str.begin(), str.end()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T08:43:26.580

构建后`string output;`它的长度为0。您需要将其调整为`input.length()`.

```
string output;
output.resize(input.length()); 
```

调整大小比逐个字符附加要快，但您必须先知道大小。

# git - 带有 git 扩展的 git-svn 卡在身份验证领域

> ID：10681937
> 
> 赞同：4
> 
> 时间：2012-05-21T08:38:22.507
> 
> 标签：git, git-svn

我正在尝试通过 git 检查 svn 存储库，在 git 扩展应用程序中，在输入屏幕上我为 svn 存储库指定一个 http url，以及一个将我的 svn 用户映射到 git 用户的作者文件。我卡在“身份验证领域：Subversion 存储库”

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T08:18:30.343

仔细检查您正在使用的用户名和密码，最后检查存储库 URL。我有 Authentication realm: 问题，因为 IT 管理员更改了 svn 用户的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T03:40:36.943

看起来 Git Extensions 的 GUI 缺少​​获取更新的 SVN 凭据。只需从命令行运行 svn rebase ：

工具-> Git bash

```
$ git svn rebase 
```

在这里您可以输入更新的密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:59:46.230

我为此头疼了一段时间，但找到了原因，

如果你有一个安全的 svn 存储库，你应该使用

```
$ svn2git http://svn.example.com/path/to/repo --username <<user_with_perms>> 
```

但这不会要求您输入密码，除非您点击“Enter”。（当然它没有给您任何这样做的说明）

就我而言，我们有一个非标准的结构化回购，所以我使用了；

```
$ svn2git http://svn.example.com/path/to/repo --username <<user_with_perms>> --rootistrunk  -v 
```

--verbose 或 -v 确实有帮助

# javascript - 如何重定向推荐人？完整的域，而不仅仅是单个地址

> ID：10681939
> 
> 赞同：0
> 
> 时间：2012-05-21T08:38:26.837
> 
> 标签：javascript, redirect

我的网站上有以下重定向脚本：

```
 <script type="text/javascript">
if (document.referrer == "http://dontwantthisreferrer.com/") {
   document.location = "http://urltoredirect.com/";
 }
</script> 
```

我的问题是：如何阻止[http://dontwanthisreferrer.com](http://dontwantthisreferrer.com)的完整域？现在我只从主页重定向，而不是从[http://dontwanthisreferrer.com/post-1/](http://dontwantthisreferrer.com/post-1/)重定向，我想从这个域的所有地址重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:41:41.073

您可以尝试`indexOf`方法检查您的域名是否存在于推荐人地址中。

```
if (document.referrer.indexOf("http://dontwantthisreferrer.com") == 0) {
    document.location = "http://urltoredirect.com/";
} 
```

否则，您可以使用正则表达式来做同样的事情，但方式更灵活。

```
if (/^http:\/\/(www.)?dontwantthisreferrer.com/.test(document.referrer)) {
    document.location = "http://urltoredirect.com/";
} 
```

顺便说一句，最好的选择是为您的任务使用服务器端解决方案。例如，不仅可以使用 PHP、Python、Perl 等轻松完成相同的操作，还可以使用您的 Web 服务器配置（例如使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）轻松完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:54:50.177

首先提取协议和域部分：

```
var referrer = /^(https?:\/\/[^\/]*)/.exec(document.referrer)
if (referrer && referrer[1] == "http://dontwantthisreferrer.com") {
    ducument.location = "http://urltoredirect.com"
} 
```

这样，如果需要，就可以轻松测试域数组，如下例所示。请注意，我更改了 regex `/^https?:\/\/([^\/:]*)/`，只提取没有协议的域。

```
var forbidden_referrers = ["www.referrer1.com", "www.referrer2.com"]
var referrer = /^https?:\/\/([^\/:]*)/.exec(document.referrer)
referrer && for (i in forbidden_referrers) {
    forbidden_referres[i] == referrer[1] && document.location = "http://urltoredirect.com"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:41:20.377

使用正则表达式。

```
if (/^https?:\/\/(www.)?dontwantthisreferrer.com\//.test(document.referrer)) {
   document.location = "http://urltoredirect.com/";
} 
```

# php - PHP电子邮件更改脚本

> ID：10681942
> 
> 赞同：0
> 
> 时间：2012-05-21T08:38:45.557
> 
> 标签：php, email, login

我正在尝试做一些小脚本来更改我的免费服务中的电子邮件。用户使用名称、密码等进行注册。我想要的是添加 Web 表单以使用 PHP 脚本更改他们在数据库中的电子邮件，这允许他们通过确认过程将电子邮件更改为旧电子邮件。它应该如何工作？

用户进入某个站点（登录）单击更改电子邮件，将出现旧电子邮件、新电子邮件和新电子邮件2 的字段。将检查旧电子邮件是否真的是数据库中的旧电子邮件，newemail 与 newemail2 相同。我在这里对电子邮件等的有效性进行了一些检查：

```
 if ($auth->isLogged())
{
    if(!empty($email))
    {
        if ($this->checkEmail($mail))
        {           
            $this->db->selectDb("login");            
            if (!mysql_result(mysql_query("SELECT COUNT(id) FROM account WHERE email='".$mail."'"), 0) > 0)
            { 
```

我创建了脚本 - 它使用 php 更改电子邮件与数据库和站点在一页上具有 php self 函数，如下所示：

```
$login_db_new_connect = mysql_connect($logindb[db_host],$logindb[db_username],$logindb[db_password]);
$selectdb = mysql_select_db($logindb[db_name],$login_db_new_connect); 
    if ($_GET[h] && $_GET[h] != '' && $_GET[h] != '0')
    {
        $emailz = $newemail1;
        $query = mysql_query("SELECT username FROM `account` WHERE reset_email='$_GET[h]'");
        $res = mysql_fetch_array($query);
        $check = mysql_query("SELECT email FROM `account` WHERE reset_email='$_GET[h]'");
        $ress = mysql_fetch_array($check);
        $check1 = mysql_query("SELECT reset_email2 FROM `account` WHERE reset_email='$_GET[h]'");
        $resss = mysql_fetch_array($check1);
        $emailz = $resss[reset_email2];

        if (mysql_num_rows($query) == 1)
        {
            echo "<b>E-mail was changed.</b>";
            $to = $ress[email];
            $headers = "Headers here";  
            $message = "Email has been Changed (more text to come later)";
            mail($to, '', $message, $headers);
            mysql_query("UPDATE account SET email='$emailz' WHERE reset_email='$_GET[h]'") or die ('query change ...');
            mysql_query("UPDATE account SET reset_email='', reset_email2='' WHERE username='$res[username]'") or die ('query ...');
        }
        else
        {
            echo "<b>Error not changed.</b>";     
        }
    }
    else
    {  
        $oldemail = addslashes($_POST["oldemail"]);
        $newemail1 = addslashes($_POST["newemail1"]);
        $newemail2 = addslashes($_POST["newemail2"]);
        if ($oldemail == "" || $newemail1 == "" || $newemail2 == "")
        {
            $reason =  "
            <form action=\"".$_SERVER['PHP_SELF']."\" method=\"POST\">
            <table width=\"310\">
            <tr><td>Old e-mail:</td><td><input type=\"email\" name=\"oldemail\"></td></tr>
            <tr><td>New e-mail:</td><td><input type=\"email\" name=\"newemail1\"></td></tr>
            <tr><td>New e-mail again:</td><td><input type=\"email\" name=\"newemail2\"></td></tr>
            <tr><td align=\"center\" colspan=\"2\"><br><input type=\"submit\" value=\"Change e-mail\">
            </table>
            </form>";
        }
        else
        {   
            $login_db_new_connect = mysql_connect($logindb[db_host],$logindb[db_username],$logindb[db_password]);
            $selectdb = mysql_select_db($logindb[db_name],$login_db_new_connect);
            $queryy = mysql_query("SELECT username FROM `account` WHERE id='$id'");
            $resu = mysql_fetch_array($queryy);  
            $sql = "SELECT * FROM account WHERE email='$oldemail' AND username='$resu[username]'";
            $result = mysql_query($sql);
            $result2 = mysql_num_rows($result);

            if ($result2 !== 1)
            {
                $reason = "Something is wrong";
            }
            else
            {
                if ($newemail1 == $newemail2)
                {
                    $emailz = $newemail1;       
                    $rand = random_string(40);
                    $sql1 = "UPDATE `account` SET reset_email='$rand' WHERE id='$id'";
                    mysql_query($sql1) or die ('query ...');
                    $sql2 = "UPDATE `account` SET reset_email2='$newemail1' WHERE id='$id'";
                    mysql_query($sql2) or die ('query ...');
                    $to = $_POST["oldemail"];
                    $headers = "";  
                    $message = "Activation link: $config[path_to_thisfile]?h=$rand\n\n\n";
                    mail($to, '', $message, $headers);
                    echo "<b>activation link has been sent</b>";
                }
                else
                {                                                                                  
                    echo "<b>wrong input data</b>";
                }
            }
        } 
    }
?> 
```

但我希望有更多像我上面提到的检查电子邮件完整性和验证，检查用户是否在线......也许我的脚本不完全正常：D

所以我现在对你的想法持开放态度:) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:15:26.780

关于*电子邮件验证*，我正在使用：

```
// returns TRUE if 'email' is valid
function email_valid($email)
{
   return eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $email);
} 
```

另外，在将用户文本直接写入数据库之前，请考虑使用**mysql_real_escape_string ；**他们可能在文本中有引号“，”。

周围还有一个数据库混乱；如果可能，考虑减少这种对安全的要求

还可以考虑放置内联 HTML 块，例如：

```
$reason =  "
<form action=\"".$_SERVER['PHP_SELF']."\" method=\"POST\">
<table width=\"310\"> 
```

进入其他文件并像这样称呼它们：

```
include("template.php"); 
```

避免重复引用并减少未来的混乱

# ios - iOS 中的 Flash 视频流

> ID：10681943
> 
> 赞同：0
> 
> 时间：2012-05-21T08:38:49.420
> 
> 标签：ios, flash, ffmpeg, browser, video-streaming

我正在尝试为 iOS 制作一个网络浏览器应用程序。到目前为止，我可以在其中浏览桌面版网站并播放与 iOS 兼容的视频。但我想支持 Flash 视频。我的灵感来自[vBrowse](http://itunes.apple.com/us/app/vbrowse-flash-video-desktop/id418791028?mt=8)，根据那里的[声明](http://bewhere.co.uk/vBrowse/about.html)，他们在他们的应用程序中使用“FFmpeg”和“librtmp”。所以任何人都可以帮助我实现这个库，以便我的浏览器支持 swf/flv 视频。

提前捆绑thanx以获得任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T06:13:35.867

如果您正在编写本机应用程序，那么这是可能的。

您可以使用 ffmpeg-1.0 并在不支持 lib rtmp 的情况下对其进行编译，因为 ffmpeg 中已经有这个库。在那之后

1.  连接到服务器 - avformat_open_input
2.  查找并打开编解码器 - avcodec_open2
3.  读取数据包 - av_read_frame
4.  如果pkt是音频，解码它（avcodec_decode_audio4）并使用audioqueue或audiounit播放它如果pkt是视频解码它（avcodec_decode_video2）并将其转换为RGB并将其缩放并显示在屏幕上

乍一看你应该在上面做......另外，你可以看看我们的付费 sdk 位于[http://www.videostreamsdk.com](http://www.videostreamsdk.com)它支持从 rtmp 服务器流式传输

# php - 有没有办法在对象上 foreach 哪个类在 PHP 中实现 Iterator？

> ID：10681945
> 
> 赞同：2
> 
> 时间：2012-05-21T08:38:52.650
> 
> 标签：php, iterator

我尝试修改 php.net 中的示例，以尝试实现类似 Java/C# 的集合，其中键可能是对象（[http://php.net/manual/en/language.oop5.iterations.php](http://php.net/manual/en/language.oop5.iterations.php)，示例＃2）：

```
<?php
class Test {
        private $_n;
        public function __construct($n) {
              $this->_n = $n;  
        }
        public function getN() {
                return $this->_n;
        }
}
class MyIterator implements Iterator
{
    private $var = array();

   // code from php.net ....

    public function key() 
    {
        $var = key($this->var);
        echo "key: $var\n";

        return new Test($var);
    }

    // code from php.net...

}

$values = array(1,2,3);
$it = new MyIterator($values);

foreach ($it as $a => $b) {
    print $a->getN() . ": $b\n";
} 
```

但我有这样的通知：

> 警告：从 MyIterator::key() 返回非法类型

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T16:43:33.850

您正在寻找的东西很容易做到，但是，您需要`foreach`一点帮助：

```
foreach ($it as $b) {
    $a = $it->key();
    print $a->getN() . ": $b\n";
} 
```

背景：`foreach`只能处理整数或字符串的键（有人说是标量，我更喜欢数组键的类比），但不能处理数组或对象。

然而，手动获取密钥确实没有问题，有时甚至对于作为迭代器但返回数组作为密钥的 PHP 内置类是必要的，[例如使用`MultipleIterator`](http://hakre.wordpress.com/2012/04/05/iterating-over-multiple-iterators-at-once/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:50:57.527

键的类型*必须*是标量。该错误是由于您的`key`方法返回一个对象引起的。返回字符串或数字类型，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:17:04.630

另一种解决方法：让当前返回一个包含您的键和值的数组......

```
function current() {
    return array($this->key, $this->val);
} 
```

...然后在循环中解压缩数组：

```
foreach ($iterator as $key_and_value) {
    list($key, $value) = $key_and_value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T08:51:05.427

`key()`应该返回位置，而不是该位置的元素。如果我们想象我们在数组世界中，假设：返回键，而不是值。

手册上[`key()`](http://www.php.net/manual/en/iterator.key.php)说：

> 返回当前元素的键。
> 
> 成功时返回标量，失败时返回 NULL。

如果要返回当前位置的元素，请使用[`current()`](http://www.php.net/manual/en/iterator.current.php)：

> 返回当前元素。
> 
> 可以返回任何类型。

**更新：**不幸的是，您不能将对象用作键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-18T10:07:03.583

如果您使用 PHP 5.5 或更高版本，它将工作：

> **foreach 现在支持非标量键**
> 
> foreach 现在支持任何类型的键。虽然非标量键不能出现在原生 PHP 数组中，但可以`Iterator::key()`返回任何类型的值，现在可以正确处理。

[http://php.net/manual/de/migration55.new-features.php](http://php.net/manual/de/migration55.new-features.php)

# java - 如何防止使用显示标签对导出到 excel 的数据进行换行？

> ID：10681958
> 
> 赞同：5
> 
> 时间：2012-05-21T08:39:22.010
> 
> 标签：java, export-to-excel, displaytag

我们在基于 Java 的 Web 应用程序中使用[Display 标签库](http://www.displaytag.org/1.2/)。

除了使用显示标签库来显示列表之外，我们还使用它来将数据导出到工作正常的 Excel 表。

问题是数据被*包裹在 Excel 工作表列*中。

我需要单击单元格以展开单元格以查看完整数据。

有什么办法可以防止这种数据包装？Excel 工作表单元格可以根据其中数据的宽度自行调整吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T18:06:58.457

是的，如果您使用 POI 和 HSSF 来创建文档，则可以自动格式化单元格。如果不是，我建议您使用它，只需打开现有文档并自动调整您需要的列大小。

**创建所有单元格后**但在保存文档之前，您只需调用此方法来调整列的大小。例如，我在一张这样的表格上为我的所有列都这样做了：

```
//
// Create an instance of workbook and sheet
//
HSSFWorkbook workbook = new HSSFWorkbook();
HSSFSheet sheet = workbook.createSheet();
sheet.setAutobreaks(true);
 .
 .//code in which you create actual rows and cells HERE  
 .
//auto formating to fit the page
for(int i=0; i<repModel.getReportHeaders().length;i++){
sheet.autoSizeColumn((short) (i+1));     
} 
```

这里是使用 poi 启动的最佳链接： [Busy Developers' Guide to HSSF and XSSF Features](http://poi.apache.org/spreadsheet/quick-guide.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T18:50:23.960

看起来[此博客条目](http://koodo.wordpress.com/2010/02/27/extending-the-export-functionality-of-the-display-tag-library/)讨论了 DisplayTag 的 excel 导出机制，并向您展示了如何修改 Excel 导出以绑定到自定义 HSSF 表编写器。

总结一下：

*   编写一个实现 org.displaytag.export.BinaryExportView（或扩展 DisplayTag 的 DefaultHssfExportView）
*   所述实现需要委托给扩展 DisplayTag 的 HssfTableWriter 的新类（或将 DisplayTag 中的原始数据复制/粘贴到新源中，因为这听起来像是一堆不必要的私有访问器方法）
*   覆盖（或更改）HssfTableWriter 中的特定方法（我认为它称为 writeBottomBanner()）
*   使用以下行更新您的 displaytag.properties 文件：export.excel.class=xyzMyExcelExportView

也就是说，我正在查看 DisplayTag 1.2 中的源代码，它似乎已经在扩展自动调整大小的列 (http://displaytag.sourceforge.net/1.2/displaytag-export-poi/xref/org/ displaytag/render/HssfTableWriter.html#347）。您使用的是 DisplayTag 1.2，还是使用的是早期版本？如果您使用的是早期版本，升级到 1.2 可能会解决您的问题。还是我误解了您所说的数据被“包装”的意思？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T08:13:08.750

如果您使用 HSSF Poi 生成 excel 文档，那么您应该能够调整列宽：

[http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#setColumnWidth%28int,%20int%29](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#setColumnWidth%28int,%20int%29)

# joomla1.5 - How to hide a menu item for a certain language in joomla?

> ID：10681962
> 
> 赞同：1
> 
> 时间：2012-05-21T08:39:44.480
> 
> 标签：joomla1.5, menuitem, joomfish

I have multilingual website in joomla and want to hide one menu item (not all the menu items, but just one of them) for a certain languages, for instance, when current language is English hide menu item.

How can I achieve this? I am using joomfish with joomla 1.5 version.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:44:30.337

just set condition in the component and module which displays menu

u would need to hard code it

for example for language with id = 60

conditions like in php

```
if( $lid == 60) {

// show the menu for a speacial language

}

else{

 //  else show the basic menu for all

 } 
```

refer this link [http://www.packtpub.com/article/customizing-menus-menu-in-joomla](http://www.packtpub.com/article/customizing-menus-menu-in-joomla)

# iphone - 如何制作 URL/电话可点击的 UILabel？

> ID：10681965
> 
> 赞同：119
> 
> 时间：2012-05-21T08:39:52.267
> 
> 标签：iphone, objective-c, url, uilabel

我想在我的应用程序上创建一个可点击的标签，引导我进入 Safari 网页。我还希望用户只能通过单击来拨打电话号码？

感谢您的建议

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-05-21T08:43:40.243

您可以在检查器中使用`UITextView`并选择检测链接、电话号码和其他内容。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2012-05-21T18:46:03.697

使用`UITextView`代替，`UILabel`它具有将文本转换为超链接的属性。

### 目标-C：

```
yourTextView.editable = NO;
yourTextView.dataDetectorTypes = UIDataDetectorTypeAll; 
```

### 迅速：

```
yourTextView.editable = false; 
yourTextView.dataDetectorTypes = UIDataDetectorTypes.All; 
```

这将自动检测链接。

有关详细信息，请参阅[文档](https://developer.apple.com/documentation/uikit/uidatadetectortypes)。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-05-21T08:53:05.310

[https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)

这绝对是你需要的。您还可以为标签应用属性，例如下划线，并为其应用不同的颜色。只需查看可点击网址的说明即可。

主要是，您执行以下操作：

```
NSRange range = [label.text rangeOfString:@"me"];
[label addLinkToURL:[NSURL URLWithString:@"http://github.com/mattt/"] withRange:range]; // Embedding a custom link in a substring 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-21T08:44:10.420

您可以根据需要制作自定义 UIButton 和 setText 并添加一个方法。

```
UIButton *sampleButton = [UIButton buttonWithType:UIButtonTypeCustom];
[sampleButton setFrame:CGRectMake(kLeftMargin, 10, self.view.bounds.size.width - kLeftMargin - kRightMargin, 52)];
[sampleButton setTitle:@"URL Text" forState:UIControlStateNormal];
[sampleButton setFont:[UIFont boldSystemFontOfSize:20]];

[sampleButton addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:sampleButton];

-(void)buttonPressed:(id)sender{
  // open url
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-11-22T16:35:23.540

如果您希望这由 UILabel 而不是 UITextView 处理，您可以创建 UILabel 子类，如下所示：

```
class LinkedLabel: UILabel {

fileprivate let layoutManager = NSLayoutManager()
fileprivate let textContainer = NSTextContainer(size: CGSize.zero)
fileprivate var textStorage: NSTextStorage?

override init(frame aRect:CGRect){
    super.init(frame: aRect)
    self.initialize()
}

required init?(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)
    self.initialize()
}

func initialize(){

    let tap = UITapGestureRecognizer(target: self, action: #selector(LinkedLabel.handleTapOnLabel))
    self.isUserInteractionEnabled = true
    self.addGestureRecognizer(tap)
}

override var attributedText: NSAttributedString?{
    didSet{
        if let _attributedText = attributedText{
            self.textStorage = NSTextStorage(attributedString: _attributedText)

            self.layoutManager.addTextContainer(self.textContainer)
            self.textStorage?.addLayoutManager(self.layoutManager)

            self.textContainer.lineFragmentPadding = 0.0;
            self.textContainer.lineBreakMode = self.lineBreakMode;
            self.textContainer.maximumNumberOfLines = self.numberOfLines;
        }

    }
}

func handleTapOnLabel(tapGesture:UITapGestureRecognizer){

    let locationOfTouchInLabel = tapGesture.location(in: tapGesture.view)
    let labelSize = tapGesture.view?.bounds.size
    let textBoundingBox = self.layoutManager.usedRect(for: self.textContainer)
    let textContainerOffset = CGPoint(x: ((labelSize?.width)! - textBoundingBox.size.width) * 0.5 - textBoundingBox.origin.x, y: ((labelSize?.height)! - textBoundingBox.size.height) * 0.5 - textBoundingBox.origin.y)

    let locationOfTouchInTextContainer = CGPoint(x: locationOfTouchInLabel.x - textContainerOffset.x, y: locationOfTouchInLabel.y - textContainerOffset.y)
    let indexOfCharacter = self.layoutManager.characterIndex(for: locationOfTouchInTextContainer, in: self.textContainer, fractionOfDistanceBetweenInsertionPoints: nil)

    self.attributedText?.enumerateAttribute(NSLinkAttributeName, in: NSMakeRange(0, (self.attributedText?.length)!), options: NSAttributedString.EnumerationOptions(rawValue: UInt(0)), using:{
        (attrs: Any?, range: NSRange, stop: UnsafeMutablePointer<ObjCBool>) in

        if NSLocationInRange(indexOfCharacter, range){
            if let _attrs = attrs{

                UIApplication.shared.openURL(URL(string: _attrs as! String)!)
            }
        }
    })

}} 
```

此类是通过重用此[答案](https://stackoverflow.com/a/28519273/745161)中的代码制成的。为了使属性字符串检查这个[答案](https://stackoverflow.com/a/18518339/745161)。[在这里](https://stackoverflow.com/a/5456573/745161)您可以找到如何制作电话网址。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-03-04T12:11:09.797

使用这个我非常喜欢它，因为它只在整个标签文本上创建了与特定文本的蓝色链接：[FRHyperLabel](https://github.com/null09264/FRHyperLabel)

[![在使用条款上巧妙地应用超链接](../Images/88800bd294782ae02ad7dee78dd9054c.png)](https://i.stack.imgur.com/5XgHz.png)

去做：

1.  从上面的链接下载并复制到您`FRHyperLabel.h`的`FRHyperLabel.m`项目中。

2.  拖放`UILabel`您的`Storyboard`并定义自定义类名称以`FRHyperLabel`识别检查器，如图所示。

[![在此处输入图像描述](../Images/1299e095cf83c51b1a2bc064672116fb.png)](https://i.stack.imgur.com/OFih0.png)

3.  将您的 UILabel 从情节提要连接到您的 viewController.h 文件

`@property (weak, nonatomic) IBOutlet FRHyperLabel *label;`

4.  现在在您的 viewController.m 文件中添加以下代码。

`NSString *string = @"上传即表示同意使用条款"; NSDictionary *attributes = @{NSFontAttributeName: [UIFont preferredFontForTextStyle:UIFontTextStyleHeadline]};

```
_label.attributedText = [[NSAttributedString alloc]initWithString:string attributes:attributes];
[_label setFont:[_label.font fontWithSize:13.0]];

[_label setLinkForSubstring:@"Terms of Use" withLinkHandler:^(FRHyperLabel *label, NSString *substring){
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]];
}];` 
```

5.  并运行它。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-07-04T16:54:33.847

使用 UITextView 而不是 UILabel ，它具有将文本转换为超链接的属性

SWIFT代码：

```
yourTextView.editable = false
yourTextView.dataDetectorTypes = UIDataDetectorTypes.All
//or
yourTextView.dataDetectorTypes = UIDataDetectorTypes.PhoneNumber
//or
yourTextView.dataDetectorTypes = UIDataDetectorTypes.Link 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-31T11:56:47.927

```
extension UITapGestureRecognizer {

    func didTapAttributedTextInLabel(label: UILabel, inRange targetRange: NSRange) -> Bool {

        let layoutManager = NSLayoutManager()
        let textContainer = NSTextContainer(size: CGSize.zero)
        let textStorage = NSTextStorage(attributedString: label.attributedText!)

        // Configure layoutManager and textStorage
        layoutManager.addTextContainer(textContainer)
        textStorage.addLayoutManager(layoutManager)

        // Configure textContainer
        textContainer.lineFragmentPadding = 0.0
        textContainer.lineBreakMode = label.lineBreakMode
        textContainer.maximumNumberOfLines = label.numberOfLines
        textContainer.size = label.bounds.size

        // main code
        let locationOfTouchInLabel = self.location(in: label)

        let indexOfCharacter = layoutManager.characterIndex(for: locationOfTouchInLabel, in: textContainer, fractionOfDistanceBetweenInsertionPoints: nil)
        let indexOfCharacterRange = NSRange(location: indexOfCharacter, length: 1)
        let indexOfCharacterRect = layoutManager.boundingRect(forGlyphRange: indexOfCharacterRange, in: textContainer)
        let deltaOffsetCharacter = indexOfCharacterRect.origin.x + indexOfCharacterRect.size.width

        if locationOfTouchInLabel.x > deltaOffsetCharacter {
            return false
        } else {
            return NSLocationInRange(indexOfCharacter, targetRange)
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-03T19:31:48.783

为什么不直接使用**NSMutableAttributedString**？

```
let attributedString = NSMutableAttributedString(string: "Want to learn iOS? Just visit developer.apple.com!")
        attributedString.addAttribute(.link, value: "https://developer.apple.com", range: NSRange(location: 30, length: 50))

        myView.attributedText = attributedString 
```

您可以[在此处找到更多详细信息](https://developer.apple.com/documentation/foundation/nsattributedstring)

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2018-03-01T16:59:29.243

使用 UIButton 的 Swift 4.0 可能的解决方案

```
 phoneButton = UIButton(frame: CGRect(x: view.frame.width * 0, y: view.frame.height * 0.1, width: view.frame.width * 1, height: view.frame.height * 0.05))
     phoneButton.setTitle("333-333-3333", for: .normal )
     phoneButton.setTitleColor(UIColor(red: 0 / 255, green: 0 / 255, blue: 238 / 255, alpha: 1.0), for: .normal)
     phoneButton.addTarget(self, action: #selector(self.callPhone), for: .touchUpInside )

     @objc func callPhone(){

         UIApplication.shared.open(URL(string:"tel://3333333333")!, options: [:] , completionHandler: nil)

    } 
```

# c# - 如何减少 WAV 文件的下载和上传时间？

> ID：10681974
> 
> 赞同：0
> 
> 时间：2012-05-21T08:40:40.187
> 
> 标签：c#, audio, windows-phone

我正在 windows phone 上开发一个应用程序，它非常声音、沉重，而且这些声音需要同时播放。这意味着我需要使用 PCM WAV 文件来创建 SoundEffect 类。

这些文件的下载时间太长，尝试使用 GZIP 并没有压缩太多。

还有哪些其他方法可以加快这些文件的下载时间。我曾尝试为 Windows Phone 找到 MP3 到 WAV 的转换类，但运气不佳（一切似乎只在服务器端运行）

我愿意接受任何可能的解决方案，只要我可以将 Windows Phone 设备上的 SoundEffect 类（或类似）与我下载的文件一起使用。我真的不在乎它是如何被压缩或解压缩的，只要它可以在电话和服务器端执行，我可以在过程结束时使用 SoundEffect 类中的文件。

谢谢你。

虽然我很想编写自己的解码器，但我并没有真正得到空间或时间来做这件事。（我也不知道从哪里开始）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:51:32.843

这个 URL 上有一个纯 C# MP3 解码器：[http ://robburke.net/mle/mp3sharp/](http://robburke.net/mle/mp3sharp/)

您可以使用它将 mp3 手动解码为 Wave PCM 音频，然后使用原始音频数据创建一个新的 SoundEffect 实例。

这是基于我去年在 AppHub 上的一次谈话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T04:34:12.923

我终于解决了这个问题。我所做的是我使用了[Ogg vorbis](https://github.com/mono/csvorbis)和[OggSound 类](http://oggsharp.codeplex.com/releases/view/85231)，它将 ogg 转换为动态音效。它并不完美，但通过一些修补和包装，我能够让它全部工作。

# c# - 在 Tab 控件中换行

> ID：10681976
> 
> 赞同：2
> 
> 时间：2012-05-21T08:40:50.390
> 
> 标签：c#, vb.net

我有两个关于 .net(3.5) 的选项卡控制的问题。我正在开发 Windows 应用程序。

1.  在选项卡控件（标题）中换行文本，使其分成两行
2.  选项卡控件的方角插入圆角

请 suugest 我如何使用 vb.net 或 C#。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:03:17.040

您不能自动换行，但您可以通过插入回车来放置多行（这只能在运行时完成）

但是，当您这样做时，您还需要调整选项卡的高度以容纳两行文本：

```
 With TabControl1
        'Increase the size of the tabs
        .ItemSize = New Size(.ItemSize.Width, .ItemSize.Height * 2)

        'Put two lines of text on the first tab
        .TabPages(0).Text = "Foo" + Convert.ToChar(13) + "Bar"

    End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:50:27.667

使用 WPF - 然后您可以随意设置选项卡的样式。据我所知，在 Windows 窗体中这是不可能的。

# sql-server - 如果已经安装了 SQL Server 2008 Express，我可以安装 SQL Server 2008 R2 标准版吗？`

> ID：10681980
> 
> 赞同：0
> 
> 时间：2012-05-21T08:40:55.070
> 
> 标签：sql-server, sql-server-2008-r2

在我的 windows xp 机器上，我已经安装了 SQL Server 2008 R2 Advanced Express 版本。

现在我想安装 SQL Server 2008 R2 标准版。是否可以将两者安装在同一台机器上？我可以安装 SQL Server 2008 R2 标准版吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T08:43:46.343

[从这里：](http://msdn.microsoft.com/en-us/library/ms143694%28v=sql.105%29.aspx)

> SQL Server 在同一台计算机上支持数据库引擎、Analysis Services 和 Reporting Services 的多个实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:44:00.043

[http://paresh-sqldba.blogspot.de/2011/04/can-we-install-multiple-versions-of-sql.html](http://paresh-sqldba.blogspot.de/2011/04/can-we-install-multiple-versions-of-sql.html)参考这篇博文应该是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:45:14.133

简短的回答：是的

我安装了两个版本。您的 sqlexpress 可能安装为命名实例，您在连接字符串中使用“\sqlexpress”连接到该实例

# android - 复杂的布局取决于父母的大小

> ID：10681983
> 
> 赞同：0
> 
> 时间：2012-05-21T08:41:06.850
> 
> 标签：android, android-layout

我需要用你在 UI-Mockup 中看到的行来实现 ListView：

![布局](../Images/a36eed7556eb53f854bbf4461f819bf1.png)

我设法根据行的数据处理不同的行布局。问题是，您将采用哪种方式来实现显示的时间线布局？我开始使用RelativeLayouts，使用边距将标记和文本放置在时间轴上的正确位置，但是在滚动列表时会产生很多麻烦。TextViews 并不总是在绝对正确的位置。

这是行布局的重要部分（图像的第二行带有长蓝线）：

```
<LinearLayout 
        android:id="@+id/progress"
        android:layout_height="50dp"
        android:layout_width="fill_parent"
        android:paddingBottom="10dp"
        android:paddingRight="10dp"
        android:layout_gravity="bottom">
        <RelativeLayout
            android:id="@+id/progressContainer"
            android:layout_height="fill_parent"
            android:layout_gravity="bottom"
            android:layout_width="0px"
            android:layout_weight="6"
            >
            <RelativeLayout
                android:id="@+id/blue"
                android:background="#FF33B5E5"
                android:layout_width="fill_parent"
                android:layout_height="7dp"
                android:layout_alignParentBottom="true"
                />

            <tv.px.android.play.widget.CustomImageView android:id="@+id/progressMarker"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/marker"
                android:layout_alignParentBottom="true"
                />
            <tv.px.android.play.widget.CustomTextView android:id="@+id/periodIndicator"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:singleLine="true"
                android:layout_above="@id/progressMarker"
                android:paddingBottom="2dp"
                />
        </RelativeLayout>
        <RelativeLayout 
            android:layout_height="fill_parent"
            android:layout_gravity="bottom"
            android:layout_weight="1"
            android:layout_width="0px"
            >
            <RelativeLayout
                android:id="@+id/red"
                android:background="@drawable/red_fadeout_linear_gradient"
                android:layout_alignParentBottom="true"
                android:layout_width="fill_parent"
                android:layout_height="7dp"
                />
            <TextView android:id="@+id/periodEndIndicator"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Sa"
                android:layout_above="@id/red"
                android:layout_alignParentLeft="true"
                android:paddingBottom="2dp"
                />
        </RelativeLayout>
    </LinearLayout> 
```

在`CustomImageView`我重写了`onMeasure`计算位置（leftMargin）的方法，效果很好：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = MeasureSpec.getSize(widthMeasureSpec);

    int widthPerDay = width / daysTotal;
    int margin = (daysOver * widthPerDay) - getWidth()/2;

    ((RelativeLayout.LayoutParams) this.getLayoutParams()).leftMargin = margin;
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
```

在`CustomTextView`我尝试了类似的方式，但它导致不同的位置。我猜在回收适配器中的视图时会出现问题，比如 TextView 的宽度没有更新。**编辑：我刚刚发现 parentWidth 因行而异。**

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int parentWidth = MeasureSpec.getSize(widthMeasureSpec);

    int widthPerDay = parentWidth / daysTotal;
    int margin = (daysOver * widthPerDay) - getWidth() / 2;

    if (margin < 0) {
        margin = 0;
    }

    if (margin + getWidth() >= parentWidth) {
        margin = parentWidth - getWidth() - 10;
    }

    ((RelativeLayout.LayoutParams) this.getLayoutParams()).setMargins(margin, 0, 0, 0);
    this.requestLayout();
} 
```

最后但并非最不重要的是适配器的 getView 实现：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        View v = convertView;

        TimeLineItem ci = getItem(position);

        if (v == null) {
            LayoutInflater vi;
            vi = LayoutInflater.from(getContext());
            holder = new ViewHolder();

            v = vi.inflate(R.layout.cleaning_list_item, null);

                holder.marker = (CustomImageView) v.findViewById(R.id.progressMarker);
                holder.periodIndicator = (CustomTextView) v.findViewById(R.id.periodIndicator);

            }

            v.setTag(holder);

        } else {
            holder = (ViewHolder) v.getTag();
        }

        if (ci != null) {

                int daysTotal = 6;
                int daysOver = ci.getTotal();
                // CustomTextView
                holder.periodIndicator.setDaysTotal(daysTotal);
                holder.periodIndicator.setDaysOver(daysOver);
                if (daysTotal - daysOver == 1) {
                    holder.periodIndicator.setText("in einem Tag");
                } else {
                    holder.periodIndicator.setText("in " + (daysTotal - daysOver) + " Tagen");
                }
                // CustomImageView
                holder.marker.setDaysTotal(daysTotal);
                holder.marker.setDaysOver(daysOver);
                holder.marker.requestLayout();

        }

        return v;

    } 
```

所以，第一个问题是：我是否以正确的方式来实现如此复杂的布局？如果是这样，我做错了什么？为什么 CustomTextView 没有正确定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:00:40.357

如果使用标准小部件和布局进行自定义显示变得太难，请通过子类化[View](http://developer.android.com/reference/android/view/View.html)创建自定义小部件。这样做很容易：在您的情况下，您可能只需要覆盖`onDraw`即可绘制自定义显示。

# c# - 从正在运行的应用程序接收/更改值

> ID：10681991
> 
> 赞同：0
> 
> 时间：2012-05-21T08:41:42.257
> 
> 标签：c#, api, hex, hook

我使用作弊引擎找到了两个地址（fi 43BE7E61）。如何让 c# 访问正在运行的应用程序的地址以确定/更改那里的值？我需要一个像

```
int value_at_address(string address, <some type> object) 
```

在打电话给类似的东西之后

```
<some type> inject_into_app(string path); 
```

这给了我使用的对象

```
<some type> object = new <some type> inject_into_app(string path); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:23:02.433

看到这个帖子。

[http://www.mpgh.net/forum/250-c-programming/298510-c-writeprocessmemory-readprocessmemory.html](http://www.mpgh.net/forum/250-c-programming/298510-c-writeprocessmemory-readprocessmemory.html)

# qt - 如何使用 QMdiArea 限制 Qt 中窗口的可移动区域？

> ID：10681993
> 
> 赞同：0
> 
> 时间：2012-05-21T08:41:49.743
> 
> 标签：qt, qt4

我正在尝试实施一个项目，在这个项目中我会有不同的窗口，所以我想给他们一个可以移动的指定区域。

例如，一个窗口将无法通过屏幕的一半。

可以用 sing QMdiArea 做到这一点吗？

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:31:25.363

QMdiArea 允许您将窗口添加到该区域。可能在 QMdiArea 上堆叠不同的窗口。您可以使用不同的区域并将子窗口添加到其中。但这实际上是出于完全不同的目的。

为了在此事件中使用窗口的 QMoveEvent 来限制您对[窗口](http://qt-project.org/doc/qt-4.8/qwidget.html#moveEvent)的限制，可以使用窗口的 oldpos() 来限制窗口的移动，并且可以使用当前的 pos() 来限制窗口的移动，就像它到达边界一样并尝试越过，您必须不断地将窗口的位置替换为当前 pos() 越过限制的每个 QMoveEvent 的限制。如果你愿意，你也可以使用 setfixedheight(),setfixedwidth()。

# iphone - IOS5收到“kCTMessageReceivedNotification”通知时如何获取消息

> ID：10681995
> 
> 赞同：7
> 
> 时间：2012-05-21T08:41:53.413
> 
> 标签：iphone, ios5, sms, jailbreak

使用 ios4.x 我可以在收到“kCTMessageReceivedNotification”通知时使用下面的代码来获取消息

```
CTTelephonyCenterAddObserver( ct, NULL, callback,NULL,NULL, CFNotificationSuspensionBehaviorHold); 

if ([notifyname isEqualToString:@"kCTMessageReceivedNotification"])//receive message
    {

        NSDictionary *info = (NSDictionary *)userInfo;
        CFNumberRef msgID = (CFNumberRef)[info objectForKey:@"kCTMessageIdKey"];
        int result;
        CFNumberGetValue((CFNumberRef)msgID, kCFNumberSInt32Type, &result);   
        Class CTMessageCenter = NSClassFromString(@"CTMessageCenter");
        id mc = [CTMessageCenter sharedMessageCenter];
        id incMsg = [mc incomingMessageWithId: result];} 
```

但是对于 ios5 我不能这样做，因为 incMsg 是 nil，所以我该怎么做才能得到消息？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T03:39:13.173

这是我发现的...

仅查看转储的私有 API，**ChatKit.framework 似乎**可以提供帮助。看看 [CKSMSService.h](http://developer.limneos.net/index.php?framework=ChatKit.framework&header=CKSMSService.h)

或[CKMadridService.h](http://developer.limneos.net/index.php?framework=ChatKit.framework&header=CKMadridService.h)用于 iMessage 消息。

我确实很快尝试将我自己的方法混入其中，其中有几种方法`CKSMSService`：

```
- (void)_receivedMessage: (id)arg1 replace:(BOOL)arg2 replacedRecordIdentifier:(int)arg3 postInternalNotification:(BOOL)arg4;

- (void)_receivedMessage: (id)arg1 replace:(BOOL)arg2 postInternalNotification:(BOOL)arg3; 
```

但在 iOS 5.0.1 上，我没有看到其中任何一个被调用（也许是我的错误？）。因此，我尝试直接从 sqlite SMS 数据库中获取消息。注意...我没有构建完整的应用程序来注册通知。我假设您获取的代码`kCTMessageReceivedNotification`没问题……它只是不再为您提供 SMS**内容**。因此，如果您将以下代码放入通知处理程序中，您应该能够看到消息文本：

```
- (NSString *) mostRecentSMS  { 
    NSString *text = @"";

    sqlite3 *database;
    if(sqlite3_open([@"/private/var/mobile/Library/SMS/sms.db" UTF8String], &database) == SQLITE_OK) {
        sqlite3_stmt *statement;

        // iOS 4 and 5 may require different SQL, as the .db format may change
        const char *sql4 = "SELECT text from message ORDER BY rowid DESC";  // TODO: different for iOS 4.* ???
        const char *sql5 = "SELECT text from message ORDER BY rowid DESC";

        NSString *osVersion =[[UIDevice currentDevice] systemVersion];         
        if([osVersion hasPrefix:@"5"]) {
            // iOS 5.* -> tested
            sqlite3_prepare_v2(database, sql5, -1, &statement, NULL);
        } else {
            // iOS != 5.* -> untested!!!
            sqlite3_prepare_v2(database, sql4, -1, &statement, NULL);
        }

        // Use the while loop if you want more than just the most recent message
        //while (sqlite3_step(statement) == SQLITE_ROW) {
        if (sqlite3_step(statement) == SQLITE_ROW) {
            char *content = (char *)sqlite3_column_text(statement, 0);
            text = [NSString stringWithCString: content encoding: NSUTF8StringEncoding];
            sqlite3_finalize(statement);
        }

        sqlite3_close(database);
    }
    return text;
} 
```

现在，确保这个应用程序安装在**/Applications/**中。如果您只是构建此应用程序，并使用 Xcode 正常安装，由于应用程序沙盒，您将在打开 sqlite 数据库时收到权限被拒绝错误。

我的代码片段只是获取最新的文本内容。 [这是一个使用数据库做更多事情的例子](https://github.com/treason/WifiSMS/blob/master/wifiSMS/Classes/MyHTTPConnection.m)。看`QuerySMS`方法。

另外，这里是**sms.db**[数据库格式](http://theiphonewiki.com/wiki/index.php?title=IMessage)的链接。你可以在那里找到你需要的其他东西。或者，只需将 sms.db 复制到您的计算机，然后使用[Firefox SQLiteManager 插件](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)之类的东西浏览它。祝你好运！

 ****更新：**[我在 iOS 上的多进程 SQLite 线程安全上发布](https://stackoverflow.com/q/11058098/119114)的问题中的一些信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-22T06:58:26.483

我设法在未越狱的 iOS8 设备上收到最后一条消息：

1.  `CKDBMessage.h`从标题中获取`ChatKit`并将文件添加到您的项目中。
2.  注册`kCTMessageReceivedNotification`通过`CTTelephonyCenterAddObserver`
3.  使用此函数获取最后收到的消息的信息：

    ```
    void SmsReceived()
    {
        NSLog(@"GOT SMS");

        //open IMDPersistence framework
        void *libHandle =     dlopen("/System/Library/PrivateFrameworks/IMDPersistence.framework/IMDPersistence", RTLD_NOW);

        //make/get symbol from framework + name
        IMDMessageRecordGetMessagesSequenceNumber = (int (*)())dlsym(libHandle, "IMDMessageRecordGetMessagesSequenceNumber");

        // get id of last SMS from symbol
        int lastID = IMDMessageRecordGetMessagesSequenceNumber();
        NSLog(@"%d", lastID);

        // close (release?) framework -> needed??
        dlclose(libHandle);

        // get message object
        dlopen("/System/Library/PrivateFrameworks/ChatKit.framework/ChatKit", RTLD_LAZY);
        Class CKDBMessageClass = NSClassFromString(@"CKDBMessage");// objc_getClass("CKDBMessage");
        CKDBMessage *msg = [[CKDBMessageClass alloc] initWithRecordID:lastID];

        NSString *text = msg.text;
        NSLog(@"text: %@", text);
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T09:11:21.393

您可以参考以下链接

1.  [http://tech.ruimaninfo.com/?p=83](http://tech.ruimaninfo.com/?p=83)

2.  [http://www.ifans.com/forums/threads/coretelephony-cttelephonycenterremoveobserver.232745/](http://www.ifans.com/forums/threads/coretelephony-cttelephonycenterremoveobserver.232745/)

3.  [如何在 iPhone 越狱 + 代码中阻止传入的短信](https://stackoverflow.com/questions/10122998/how-to-block-incoming-sms-in-iphone-jailbreak-code)

4.  [IOS越狱如何拦截短信/短信](https://stackoverflow.com/questions/8680764/ios-jailbreak-how-do-intercept-sms-text-messages)**

# javascript - 使用 javascript 自定义 url

> ID：10681999
> 
> 赞同：0
> 
> 时间：2012-05-21T08:42:10.347
> 
> 标签：javascript, url

我正在寻找一个简单的书签来获取我网站的当前 URL，并通过一些更改来刷新它。例如：

取当前页面：[https ://3eesho.com/articles/2293/-/page/1](https://3eesho.com/articles/2293/-/page/1)

并将其更改为：https://3eesho.com/articles/2293

然后将该新 URL 存储在哈希表中。

我尝试搜索可以执行此操作的书签，但找不到。谁能指出我正确的方向？即使是一个做这样的事情的书签，我也可以根据我的需要进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:29:01.003

您可以使用Javascript的`split(" ")`功能

```
var link="https://3eesho.com/articles/2293/-/page/1";
var splitlink=link.split("/"); 
```

`Example :` [http://jsfiddle.net/ipsjolly/gk72d/3/](http://jsfiddle.net/ipsjolly/gk72d/3/)