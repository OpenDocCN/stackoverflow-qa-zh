# StackOverflow 问答 000696000-000696999

# asp.net-mvc - RouteTable.Routes RouteCollection？

> ID：696000
> 
> 赞同：11
> 
> 时间：2009-03-30T04:30:59.743
> 
> 标签：asp.net-mvc, routes, routetable

我到处看到的 MVC 风格路由的例子是这样的：

```
void Application_Start(object sender, EventArgs e) 
{
    RegisterRoutes(RouteTable.Routes);
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.Add(new Route
    (
         "Category/{action}/{categoryName}"
         , new CategoryRouteHandler()
    ));
} 
```

将 RouteTable.Routes 集合传递给 RegisterRoutes() 的原因是什么？为什么不只是：

```
void Application_Start(object sender, EventArgs e) 
{
    RegisterRoutes();
}

public static void RegisterRoutes()
{
    RouteTable.Routes.Add(new Route
    (
         "Category/{action}/{categoryName}"
         , new CategoryRouteHandler()
    ));
} 
```

除了 RouteTable.Routes 之外，还有哪些 RouteCollection 会添加路由？RouteTable.Routes 不是Web 应用程序**的**RouteCollection 吗？

我有一个具有 Map() 方法的特定 IRouteHandler：

```
public class ChatRouteHandler : IRouteHandler
{
    private static bool mapped;

    public void Map()
    {
        if (!ChatRouteHandler.mapped)
        {
            RouteTable.Routes.Add
            (
                new Route("chat/{room}/{date}", 
                new ChatRouteHandler())
            );
        }
    } 
```

Map() 是否有理由接受 RouteCollection 而不是添加到 RouteTable.Routes 集合中？同样，这个 IRouteHandler 还会添加到其他哪些 RouteCollection 中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-30T04:37:43.973

单元测试。

通过从 RouteTable.Routes 中解耦（通过参数传递）注册，您可以选择在单元测试中使用哪个 RouteCollection 进行注册。

IMHO, it's also nicer to write routes.Add() instead of RouteTable.Routes.Add() everywhere.

"Is there a reason that Map() should accept a RouteCollection and not add to the RouteTable.Routes collection?"

I'm interpreting this question as "Why doesn't RouteCollection have the MapRoute method, instead of an extension method?". Yeah, RouteCollection is in System.WEb.Routing, whilst MapRoute extension method is in System.Web.Mvc. MapRoute() depends on MvcHandler, which System.Web.Routing has no idea about.

# jquery - 带有分页和排序的表格数据

> ID：696005
> 
> 赞同：1
> 
> 时间：2009-03-30T04:33:13.547
> 
> 标签：jquery, asp.net-mvc, wcf

我的项目详情如下，

项目类型：WCF 客户端项目
技术：ASP.NET MVC

我以 List<SomeInterface> 的形式从 WCF 服务获取数据，例如“GetAllMessages(int ServiceChannel)”或接口“SomeInterface”的方法不公开 PageSize、PageNumber。

我没有使用模型，因为数据来自 WCF 服务。

如何显示表格数据并为其添加分页和排序功能？

我尝试过使用 MVCContrib、jqGrid。但我无法让它们工作。

所以想知道，如何继续这个。任何想法，见解都会有所帮助。
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T04:42:24.630

在服务器端：

```
YourListObject.OrderBy(x => x.Field).Skip(5).Take(5); 
```

使用 OrderBy、Skip 和 Take 方法从列表中返回数据子集。

# c# - 添加项目

> ID：696006
> 
> 赞同：0
> 
> 时间：2009-03-30T04:33:43.827
> 
> 标签：c#, visual-studio

在 Visual Studio (C#) 中，我有一个作为项目的一部分创建的表单，需要访问另一个应该通过另一个项目创建的表单，并在必要时让两个表单相互引用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T04:44:03.130

右键单击项目中的引用并选择“添加引用”，然后添加另一个项目作为引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T04:44:54.143

您可以在项目资源管理器窗口中右键单击项目名称。并选择添加参考。在“添加引用”窗口中，选择“项目”选项卡并选择您希望引用的项目。对另一个项目做同样的事情。他们现在应该可以互相引用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T05:40:00.063

如果它们在不同的程序集中，那么您将有一个循环引用，这是不允许的。当您尝试添加第二个引用时，Visual Studio 会给您一条错误消息。这个问题的真正解决方案是引入一个抽象（假设您不能直接将它们放入同一个程序集中，也就是说）。

[这是我发现的关于这个问题的最好的文章。](http://www.objectmentor.com/resources/articles/dip.pdf)希望能帮助到你。

# php - MiniXml (php) 无法解析大于 100k 的文件

> ID：696007
> 
> 赞同：0
> 
> 时间：2009-03-30T04:36:00.030
> 
> 标签：php, xml

我正在从 Web 服务中检索 XML，然后将其加载到 MiniXml (PHP) 中。当文件小于 100k 时，它解析得很好。更大，我得到一个错误：

> 在非对象上调用成员函数 getElement()

当我尝试从根元素中取出第一个元素时，就会发生这种情况。

```
$parsedDoc = new MiniXMLDoc();
$parsedDoc->fromString($xml);
$root =& $parsedDoc->getElement('my-root-element');
$lists =& $root->getElement($type); 
```

我调用的 Web 服务允许我指定要调用的顶级元素的数量。最后一个大小超过 100k 的元素格式良好，完全没有任何问题。我唯一能想到的就是尺寸。在这种情况下，大小是否重要？

**更新：**我相信这是一个缓冲区问题，但我不知道是哪个缓冲区导致了问题。我确信这不是“网络服务调用”，因为我知道它正在检索所有数据。是导致问题的 PHP 缓冲区还是 MiniXml 缓冲区？还是完全是别的东西？（感谢丹指出这一点）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-30T05:25:04.530

[我在将 HTML 转换为 PDF 时](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php/434391#434391)遇到了同样的事情。

[此错误](http://bugs.php.net/bug.php?id=40846)描述了该问题。PHP 5.2.x 引入了一个新参数[pcre.backtrack_limit](http://php.oregonstate.edu/manual/en/ref.pcre.php)，默认值为 100,000。从 PHP 5.2 开始，基本上任何 preg_* 函数都会**在大于 100k 的字符串上静默失败**。顺便说一句，提到的错误仍然是开放的。对此没有做任何事情。

限制太低了。如果您可以选择将其提高到 2,000,000（或您需要的任何值）。如果这不是一个选项——它可能不在共享托管环境中——那么你就有问题了。

当我发现它时，我真的不敢相信它。此更改不仅破坏了大量模板代码（正如许多线程、错误报告和上述所有注释所证明的那样），而且没有引发错误（除非您碰巧看到 preg_last_error()，让我们面对现实吧，大多数人不）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T04:43:03.523

我对php知之甚少，对MiniXml一无所知，但我想到的是，也许你有一个<= 100K大小的输入缓冲区，所以当它被输入MiniXML时，顶层缺少关闭标记文档中的元素。**（这与您引用的最后一个**元素是否格式正确是一个不同的问题。）

# architecture - 你现在在做 MDA（模型驱动架构）吗？如果是这样，您使用什么工具，效果如何？

> ID：696021
> 
> 赞同：10
> 
> 时间：2009-03-30T04:46:17.617
> 
> 标签：architecture, mda

模型驱动架构的想法是，您创建模型来表达您需要以一种没有任何（或至少大多数）实现技术的方式解决的问题，然后为一个或多个特定平台生成实现。声称是在更高的抽象层次上工作更强大和更有生产力。此外，您的模型比技术更有效（因此，当您的第一语言/平台过时时，您仍然有一些东西可以用于下一代解决方案）。另一个声称的关键好处是可以生成许多样板文件和“繁重的工作”。一旦计算机理解了您的情况的语义，它就可以为您提供更多帮助。

*有人声称这种方法的生产力提高了 10 倍，而且这将是我们所有人在 10 年内构建软件**的方式。***

然而，这一切都只是理论。我想知道当橡胶遇到道路时会产生什么结果。此外，MDA 的“官方”版本来自[OMG](http://omg.org)，看起来很重。它很大程度上基于 UML，这可能被认为是好还是坏取决于你问谁（我倾向于“坏”）。

但是，尽管有这些担忧，但很难与在更高抽象级别上工作并“教”计算机理解问题和解决方案的语义的想法争论。想象一系列简单地表达真理的 ER 模型，然后想象使用这些模型来生成解决方案的重要部分，首先是在一组技术中，然后是在另一组技术中。

所以，**我很想听听现在真正在做 MDA 的人（“官方”与否）。你使用什么工具？效果如何？你能够捕捉到多少理论上的承诺？您看到真正的 10 倍效率提升了吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T01:11:57.570

对这个问题缺乏回应有点不祥……也许我会让[Dijkstra](http://www.cs.utexas.edu/users/EWD/transcriptions/EWD08xx/EWD898.html)解决这个问题。

> ... 因为计算机出现在十年，当时人们对科学技术的进步和健康的信心几乎是无限的，所以回顾一下，鉴于其最初的目标，人类在过去五个世纪的科学努力可能是明智的是一场壮观的失败。
> 
> 你们都记得，首要目标是开发长生不老药，让喝它的人长生不老。但由于永远贫困没有多大意义，科学界很快就开始了第二个项目，即。魔法石可以让你根据需要制造尽可能多的黄金。
> 
> ...
> 
> 对理想的编程语言和理想的人机界面的追求，使软件危机像阳光下的雪一样融化，具有——而且仍然具有！——寻找万能药和石头的所有特征。这种搜索得到了两方面的大力支持，首先是因为奇迹的创造是你对计算机的期望最低的事实，其次是来自一个一直需要灵药和石头的社会的财政和政治支持首先。
> 
> 可以区分两个主要流，对石头的追求和对灵药的追求。
> 
> 对 Stone 的探索是基于我们的“编程工具”太弱的假设。一个例子是认为当前的编程语言缺乏我们需要的“特性”。PL/I 是生产的更壮观的准宝石之一。我还记得 1968 年 Datamation 中的广告，其中一个微笑的 Susie Mayer 用全彩宣布她已经通过切换到 PL/I 解决了她所有的编程问题。可以预见的是，几年后，可怜的苏西·梅耶尔将不再微笑。不用说，任务继续进行，并在适当的时候以 Ada 的形式生产了下一个可能的石头（在铁幕后面被感知地称为 PL/II）。
> 
> ...
> 
> 另一个以“编程工具”形式出现的石头系列是在“软件工程”的旗帜下产生的，随着时间的推移，它试图用管理学科取代知识学科，以至于它现在已经接受了它的章程。 “如果你不能编程，如何编程。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T09:13:19.807

自 1999 年以来，我一直在模型驱动软件开发领域进行自己的独立研究。我终于在 2006 年开发了一种通用建模方法，我将其命名为 ABSE（基于 Atom 的软件工程）。

因此，ABSE 建立在两个基本方面：

*   编程是关于问题分解
*   一切都可以在树上表示

一些 ABSE 功能：

*   它可以支持所有其他形式的软件工程，从传统的面向文件的方法到基于组件的开发、面向方面的编程、特定领域的建模、软件产品线和软件工厂。

*   它的通用性足以应用于企业软件、嵌入式、游戏、航空电子设备、互联网，实际上任何领域。

*   如果有效，您无需成为火箭科学家即可使用。“纯粹的开发人员凡人”可以访问 ABSE。没有像 oAW/MDA/XMI/GMF/etc 工具链中那样的复杂性。

*   它的元元模型旨在支持从模型中 100% 生成代码。无需往返。元模型直接支持自定义/生成的代码组合。

*   该模型可以同时操作。可以应用工作流程和版本控制（需要工具支持）。

这听起来像是在乌托邦方面，但实际上我离开了研究阶段，我现在正处于将上述所有内容付诸实践的 IDE 的实施阶段。我想我会在几周内（大约四月底）准备好一个基本的原型。IDE（名为 AtomWeaver）是通过 ABSE 构建的，因此 AtomWeaver 将成为 ABSE 方法的第一个概念验证。

所以，这不是 MDA（谢天谢地！），但至少是一种非常易于管理的方法。作为 ABSE 的发明者，我对此感到兴奋是可以理解的，但我相信模型驱动软件开发将在 2009 年得到推动！

敬请关注...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-04T12:48:20.990

模型驱动的软件开发仍然是一个利基领域，但已发表的案例研究和越来越多的其他文献显示出比手动编码方法更成功。

OMG 的 MDA 只是一种方法，其他人正在使用领域特定语言（不使用 UML 进行建模）取得成功。

关键是从模型生成代码并在生成器没有生成您想要的内容时更新它——而不是修改您的代码。帮助您执行此操作的专业工具已经存在多年，但在过去五年左右的时间里，由于 Microsoft 进入该领域并通过 Eclipse 世界中的 openArchitectureWare 等开源项目，对这种方法的兴趣有所增加。

我经营着几个网站：[www.modeldrivensoftware.net](http://www.modeldrivensoftware.net/)和[www.codegeneration.net](http://www.codegeneration.net/)，您可以在其中获得有关这些主题的更多讨论、采访、文章和工具选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-24T11:38:21.957

我从 1997 年开始使用模型驱动技术和 DSL，我对 MDE 越来越感兴趣。

我可以证明，在某些情况下，达到 10 倍以上的生产力（甚至可能更多；-）是可能的。我已经实现了许多模型驱动的软件工厂，它们能够使用非常简单的模型生成可执行软件，从持久性层到 UI 层，与它们生成的技术文档相关联。

但我不遵循 MDA 标准有几个原因。MDA 承诺以 PIM 模型表达您的软件，并能够自动将其转换为一个或多个技术堆栈 (PSM)。

但 ：

*   谁需要在现实生活中针对多个技术堆栈？谁需要针对一个单一且定义明确的架构？
*   MDA 的魔力在于 PIM->PSM 转换，但是以迭代和增量方式进行 model2model 转换很困难：
    *   model2model 的实现、调试、维护比 model2text 复杂得多。
    *   由于几乎不可能生成 100% 的软件，因此必须将细节添加到生成的 PSM 模型中，并在转换后保留转换。这意味着合并操作（3 路，以记住添加的细节）。在处理模型时，对象的合并图比文本合并要复杂得多（效果很好）。
    *   你必须处理一个 PSM 模型（也就是说一个看起来非常接近你最终生成的源代码的模型）。这对工具供应商来说很有趣，因为现成的 PSM 配置文件和相关的代码生成器可以与 MDA 工具一起销售和交付。

我提倡 MDE 策略，其中 PIM 是一种 DSL，它讲述您的逻辑架构（独立于任何技术堆栈），并使用自定义和特定代码生成器从该 PIM 生成代码。

**优点：**

*   您不必处理复杂的技术性 PSM 模型。你有你的代码。
*   使用 DSL 技术，PIM 更有效、更可持续、更具表现力，并且易于由代码和文档生成器解释。模型保持简单和精确。
*   它使您有义务尽早定义您的架构要求和概念（因为它是您的 PIM 元模型），独立于任何技术堆栈。通常，它是关于识别各种类型的数据、服务、ui 组件，以及它们的定义、功能和特性（属性、与其他概念的链接；...）。
*   生成的代码符合您的需求，因为它是自定义的。如果您生成的代码扩展了一些额外的手动维护的框架类，您可以使其更加简单。
*   您以几种正交的方式利用知识：
    *   模型利用功能/业务
    *   代码生成器利用从逻辑架构组件到特定技术堆栈的技术映射决策。
    *   PIM DSL 将您的逻辑架构的定义大写
*   使用面向逻辑架构的 PIM，可以生成所有技术代码和其他非代码文件（配置、属性等）。开发人员可以专注于模型无法完全表达的业务功能的实现，通常不必再处理技术堆栈。
*   合并操作都是关于平面源代码文件的，这很好用。
*   如果您针对多个技术堆栈，您仍然可以定义多个代码生成器。

**缺点：**

*   您必须实现和维护自己的特定代码和文档生成器
*   一般来说，要充分利用 DSL 方法，您必须投资特定工具（模型验证、特定向导、对话框、菜单、导入/导出......）。
*   在更新/改进您的 DSL 时，您有时需要迁移您的模型。通常这可以通过一些一次性迁移代码来完成，或者手动完成（取决于影响）。
*   所有这些缺点都需要具有模型驱动技能的特定开发人员团队

这种特殊的方法可以在具有 UML 配置文件或特定模型编辑器（文本或图形）的可扩展 UML 建模器之上实现。

MDA和MDE之间的巨大区别可以概括为：

*   MDA 是一组通用工具和语言，为每个人的需要提供现成的 md 配置文件和工具。这对于工具供应商来说是完美的，但我怀疑每个人的需求和背景都不同。
*   使用 MDE + 特定的 DSL 和工具，您需要一些辅助的、熟练的模型驱动开发人员来维护您的自定义软件工厂（建模器、建模器扩展、生成器......），但您可以随时随地利用并管理非常简单-精确-可持续的模型。

这两种方法之间存在某种利益冲突。一个提倡重用现成的预资本化模型驱动组件，而在另一个方面，您可以通过定义 DSL 和相关工具来实现自己的资本化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T02:31:37.363

我试过一次。大约在项目进行到一半时，我意识到我的模型与我的代码相比已经过时了，而且非常复杂，以至于让它们保持最新是令人望而却步的，这让我放慢了速度。

问题是软件充满了边缘情况。模型非常擅长捕捉大局，但是一旦您开始实际编写实现代码，您就会不断发现所有这些边缘情况，不久之后您会发现模型过于精细，您必须在维护模型或获取模型之间做出选择写了一些代码。也许样板生成对启动有好处，但在那之后好处很快就消失了，我发现我的生产力急剧下降。这些模型最终从那个项目中消失了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-19T05:49:03.590

We do use MDA and EMF as tools. It saves us a lot of man-hours through code generation instead of manual coding. It does require high qualification of analytics, but it is what IT is about. So we mainly concentrated on problems itself and also tools/frameworks which do code generation and run-time support of the generated code. Finally, I can confirm that we do have 10x productivity increase with MDA.

# c# - 设计模式：建造者

> ID：696027
> 
> 赞同：24
> 
> 时间：2009-03-30T04:52:35.263
> 
> 标签：c#, design-patterns, interface-builder, builder

我一直在寻找**Builder 模式的一个****很好**的例子（在 C# 中），但找不到一个，因为我不了解 Builder 模式，或者我正在尝试做一些从未想过的事情。例如，如果我有一个抽象汽车和抽象构建器方法来创建汽车零件，我应该能够将我所有的 30 个选择发送给 Director，让它构建我需要的部件，然后构建我的汽车。无论生产哪辆汽车、卡车、半挂车等，我都应该能够以完全相同的方式“驾驶”它。

 **第一个问题是大多数示例硬编码属性值到具体部分，我真的认为应该来自数据库。我认为这个想法是将我的选择发送给主管（从数据源），并让构建器根据我的数据创建定制产品。

第二个问题是我希望构建器方法实际创建部件然后将它们分配给产品，而不是传递字符串而是真正的强类型产品部件。

例如，我想通过让 Builder 为我制造表单字段来动态创建表单，包括标签、输入部分、验证等。这样我可以从我的 ORM 中读取对象，检查对象的元数据，将其传递给我的 Builder 并将新创建的用户控件结果添加到我的 Web 表单中。

但是，我发现的每个 Builder 示例都只有硬编码数据，而不是将选择从主代码传递给 Builder 并推出定制产品。一切似乎都是一个很大的静态案例陈述。例如，如果我有三个参数，每个参数有 10 个选项，我不想构建 30 个具体的 Builder 方法，我只想创建足以制造我的产品所需的属性，可能只有三个。

我很想让 Director 仅存在于主代码中。应该有一种方法可以自动确定调用哪个具体的构建器方法，类似于多态性和方法重载（尽管这是一个非常糟糕的例子），而不是在模式中使用 case 语句。（每次我需要添加新的产品类型时，我都需要修改现有的Director，这很糟糕）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-30T05:40:34.303

大多数情况下，BuilderPattern 的调用如下所示：

```
Car car = new CarBuilder().withDoors(4).withColor("red").withABS(true).build(); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-03-30T09:43:02.723

我从来没有这样想过，但是 LINQ（模式，而不是语法）实际上是一个构建器，对吗？

它是一个流畅的接口，可以构建查询并可以以不同的表示形式创建查询（SQL、内存中对象查询、Web 服务查询，Bart de Smet 甚至编写了 Linq-to-Excel 的实现）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-30T12:29:39.780

我将在[此处](http://en.wikipedia.org/wiki/Builder_pattern)参考 Wikipedia 文章中的 C# 示例。

> 第一个问题是大多数示例硬编码属性值到具体部分，我真的认为应该来自数据库。我认为这个想法是将我的选择发送给主管（从数据源），并让构建器根据我的数据创建定制产品。

在这种情况下，您将拥有实现 PizzaBuilder 的类，该类知道如何从数据库中检索数据。您可以通过多种方式进行操作。

一个是制作一个 HawaiianPizzaBuilder。当类初始化时，它会在数据库中查询夏威夷披萨并检索该行。然后，当调用各种 Build(x) 方法时，它会将属性设置为检索到的数据库行的相应字段。

另一种方法是创建一个 PizzaDatabaseBuilder 并确保在初始化类时将其传递给该类型的比萨饼所需的行的 ID。例如，而不是

```
waiter.PizzaBuilder = new HawaiianPizzaBuilder(); 
```

你用

```
waiter.PizzaBuilder = new PizzaDatabaseBuilder("Hawaiian"); 
```

> 第二个问题是我希望构建器方法实际创建部件然后将它们分配给产品，而不是传递字符串而是真正的强类型产品部件。

应该不是问题。您需要的是其他 Factory/Builder 类型模式来初始化 Pizza 的字段。例如

代替

```
 public override void BuildDough()   { pizza.Dough   = "pan baked"; } 
```

你会做类似的事情

```
 public override void BuildDough()   { pizza.Dough   = new DoughBuilder("pan baked"); } 
```

或者

```
 public override void BuildDough()   { pizza.Dough   = new PanBakedDoughBuilder(); } 
```

DoughBuilder 可以转到数据库中的另一个表以正确填写 PizzaDough 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T05:33:40.810

我会说你无法避免其中任何一个——你的部件很少有重载，并且在堆栈的某处有一个 case/if 语句。添加新类时还必须修改代码可能是您唯一的选择。

话虽如此，您还可以通过其他模式获得帮助 - 即可以在构建过程中帮助您的工厂。多态性的合理使用（例如，所有部分都从某种类型继承，无论是类还是接口）可以减少 ifs/cases 和重载的数量。

希望这可以帮助。

# jquery - 如何使用 JQuery 选择一个整体 标记并使其成为链接？

> ID：696028
> 
> 赞同：4
> 
> 时间：2009-03-30T04:52:53.000
> 
> 标签：jquery, jquery-animate

我正在尝试创建一个新闻列表摘要部分，`<ul>`并希望使整个`<li>`可点击。我想使用它在`<li>`URL 中找到的第一个链接，以便在未启用 JavaScript 时仍可访问...我的 HTML 是：-

```
 <h3>Regional news</h3>
            <ul>
                <li class="alt clickable">
                    <h4><a href="/dave.htm">Fusce porta varius eros</a></h4>
                    <h5>22 Feb 2009</h5>
                    <p>Donec bibendum, mauris at vulputate vestibulum, nulla odio eleifend sem, in adipiscing orci neque sit amet ipsum.</p>
                </li>
                <li class="clickable">
                    <h4><a href="/dave.htm">Praesent turpis tellus, sagittis eu, molestie ac, posuere id, quam</a></h4>
                    <h5>18 Feb 2009</h5>
                    <p>Aliquam mollis. Aliquam erat volutpat. Nulla ultricies ullamcorper magna. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit rhoncus dui.</p>
                </li>
                <li class="alt clickable">
                    <h4><a href="/dave.htm">Vivamus libero est, pulvinar vitae, dignissim ut, mollis non, tellus</a></h4>
                    <h5>24 Feb 2009</h5>
                    <p>Morbi quis felis. Nunc hendrerit nibh porttitor leo. Aenean ut ipsum sit amet est feugiat bibendum. Vivamus adipiscing purus sed ipsum.</p>
                </li>                                     
            </ul>    
            <p class="moreregionalnews"><a href="#">View more regional news</a></p> 
```

所以基本上当用户将鼠标悬停在整个面板上时，整个面板都会发生翻转，`<li>`而不仅仅是`<h4>`标签……而是使用标签中包含的 URL`<h4>`作为链接……

我希望我能明智地解释一下……我想我在那里搞糊涂了：）

干杯

亚当

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-30T04:58:41.643

```
// when the page is loaded..
$(function() {
    // make the cursor over <li> element to be a pointer instead of default
    $('li.clickable').css('cursor', 'pointer')
    // iterate through all <li> elements with CSS class = "clickable"
    // and bind onclick event to each of them
    .click(function() {
        // when user clicks this <li> element, redirect it to the page
        // to where the fist child <a> element points
        window.location = $('a', this).attr('href');
        return false;
    });
}); 
```

顺便说一句，您可以仅使用 HTML/CSS（不使用 JavaScript）实现相同的功能。但这是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:55:49.120

$(li).text.append(""+[Link.n]+"")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T10:55:38.790

对于不太以 jQuery 为中心的方法。

如果您将 li 的内容包装在 <a> 中并在 a 上显示：块，您将获得整个 li 可点击。

**编辑 - 在 < > 中使用标题`a`无效，但没有理由不将 h 标签换成 < `p`> 或类似标签并将样式应用于它们。**

```
<style type="text/css">
.clickable a
{
     display: block;
}
</style>

<li class="alt clickable">
     <a href="/dave.htm">
     <h4>Fusce porta varius eros</h4>
     <h5>22 Feb 2009</h5>
     <p>Donec bibendum, mauris at vulputate vestibulum, nulla odio eleifend sem, in adipiscing orci neque sit amet ipsum.</p>
     </a>
</li> 
```

# wpf - Office 2007 和 WPF

> ID：696031
> 
> 赞同：1
> 
> 时间：2009-03-30T04:54:02.717
> 
> 标签：wpf, office-2007

我最近一直在使用 Excel 和 Powerpoint 2007，很明显这些形状正在使用 WPF。

编辑 - 我知道这些形状永远存在于 Office 中，这不是我的问题。看看 2007 年形状的填充可能性，看看渐变填充，看看它的参数——据我所知，这与 WPF 相同。回到最初的问题，有人知道 Office 使用什么来做到这一点吗？我很确定 MS 并没有为 Office 重新发明所有的图形美观、3D、旋转等等，因为它们已经在 WPF 中拥有完全相同的东西。

任何人都可以确认办公室正在使用 WPF 吗？如果是这样，我想做的是获取这些 WPF 项目，以便我们可以在我们自己的应用程序中使用它们，有效地使用 Excel/Powerpoint 作为 WPF 生成器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T05:40:20.560

您在 Office 2007 中看到的形状早在 WPF 之前就已经存在。这些[矢量图形实际上](http://en.wikipedia.org/wiki/Vector_graphics) *可能*已经由 WPF 呈现，如果将来某个时间将 Office 移植到 WPF，它们可能会。

如果您正在寻找一种为您的 WPF 应用程序创建矢量图形的简单方法，您可能需要查看[Microsoft Expression Design](http://www.microsoft.com/expression/features/Default.aspx?key=design)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T05:13:56.663

我怀疑。无需 WPF，您始终可以制作任何您喜欢的效果，这只是代码问题

Office 是早于 .Net 的旧代码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-18T09:01:33.787

据我所知，您可以使用 MFC 功能包创建 Office 2007 外观（请参阅本教程： http: [//nibuthomas.com/tutorial_mfc_feature_pack1_part1](http://nibuthomas.com/tutorial_mfc_feature_pack1_part1)）

# git - 如何拆分 git 存储库？

> ID：696043
> 
> 赞同：12
> 
> 时间：2009-03-30T05:02:12.400
> 
> 标签：git

我有一个 git 存储库，其中包含多个模块，每个模块都在它们自己的子文件夹中，我想将它们拆分为独立的存储库，理想情况下尽可能多地保留它们各自的历史。有这样做的规范方法吗？

### 完全重复

[分离（移动）子目录到单独的 Git 存储库](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)

# python - 使用不同的类型和消息重新引发异常，保留现有信息

> ID：696047
> 
> 赞同：164
> 
> 时间：2009-03-30T05:04:34.047
> 
> 标签：python, exception-handling, polymorphism

我正在编写一个模块，并希望对它可以引发的异常有一个统一的异常层次结构（例如，从`FooError`抽象类继承所有`foo`模块的特定异常）。这允许模块的用户捕获那些特定的异常并在需要时清楚地处理它们。但是从模块中引发的许多异常都是由于其他一些异常而引发的；例如，由于文件上的 OSError 导致某些任务失败。

我需要的是**“包装”捕获的异常，使其具有不同的 type 和 message**，以便通过捕获异常的任何内容在传播层次结构中进一步获取信息。但我不想丢失现有的类型、消息和堆栈跟踪；对于试图调试问题的人来说，这些都是有用的信息。顶级异常处理程序不好，因为我试图在异常进一步向上传播堆栈之前装饰异常，而顶级处理程序为时已晚。

这部分通过`foo`从现有类型（例如`class FooPermissionError(OSError, FooError)`）派生我的模块的特定异常类型来解决，但这并没有使将现有异常实例包装在新类型中变得更容易，也没有修改消息。

Python 的[PEP 3134](http://www.python.org/dev/peps/pep-3134/) “异常链接和嵌入式回溯”讨论了 Python 3.0 中接受的“链接”异常对象的更改，以表明在处理现有异常期间引发了新异常。

我正在尝试做的是相关的：我需要它也可以在早期的 Python 版本中工作，而且我不需要它用于链接，而仅用于多态性。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2009-04-27T03:25:42.617

**Python 3**引入了**异常链接**（如[PEP 3134](http://www.python.org/dev/peps/pep-3134/)中所述）。这允许在引发异常时引用现有异常作为“原因”：

```
try:
    frobnicate()
except KeyError as exc:
    raise ValueError("Bad grape") from exc 
```

捕获的异常（`exc`，一个 KeyError ）因此成为新异常 ValueError 的一部分（是“原因”）。“原因”可用于捕获新异常的任何代码。

通过使用此功能，设置`__cause__`属性。内置的异常处理程序还[知道如何报告异常的“原因”和“上下文”</a>以及回溯。](https://www.python.org/dev/peps/pep-3134/#enhanced-reporting)

 [* * *](https://www.python.org/dev/peps/pep-3134/#enhanced-reporting) 

[在**Python 2**中，这个用例似乎没有很好的答案（如](https://www.python.org/dev/peps/pep-3134/#enhanced-reporting)[Ian Bicking](http://blog.ianbicking.org/2007/09/12/re-raising-exceptions/)和[Ned Batchelder](http://nedbatchelder.com/blog/200711/rethrowing_exceptions_in_python.html)所述）。真可惜。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-03-30T05:40:08.753

您可以使用 sys.exc_info() 获取回溯，并使用所述回溯引发新异常（如 PEP 所述）。如果您想保留旧的类型和消息，您可以在异常上执行此操作，但这仅在捕获您的异常的任何内容寻找它时才有用。

例如

```
import sys

def failure():
    try: 1/0
    except ZeroDivisionError, e:
        type, value, traceback = sys.exc_info()
        raise ValueError, ("You did something wrong!", type, value), traceback 
```

当然，这真的没那么有用。如果是，我们就不需要那个 PEP。我不建议这样做。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-03-30T05:38:00.817

您可以创建自己的异常类型来扩展您捕获的[任何异常。](http://docs.python.org/library/exceptions.html)

```
class NewException(CaughtException):
    def __init__(self, caught):
        self.caught = caught

try:
    ...
except CaughtException as e:
    ...
    raise NewException(e) 
```

但大多数时候，我认为捕获异常、处理它以及`raise`原始异常（并保留回溯）或`raise NewException()`. 如果我正在调用您的代码，并且收到您的自定义异常之一，我希望您的代码已经处理了您必须捕获的任何异常。因此我不需要自己访问它。

编辑：我发现了对抛出自己的异常并保留原始异常的方法的[分析。](http://blog.ianbicking.org/2007/09/12/re-raising-exceptions/)没有漂亮的解决方案。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-29T18:08:12.033

我还发现很多时候我需要对引发的错误进行一些“包装”。

这包括在函数范围内，有时只在函数内包装一些行。

创建了一个包装器来使用 a`decorator`和`context manager`：

* * *

## 执行

```
import inspect
from contextlib import contextmanager, ContextDecorator
import functools    

class wrap_exceptions(ContextDecorator):
    def __init__(self, wrapper_exc, *wrapped_exc):
        self.wrapper_exc = wrapper_exc
        self.wrapped_exc = wrapped_exc

    def __enter__(self):
        pass

    def __exit__(self, exc_type, exc_val, exc_tb):
        if not exc_type:
            return
        try:
            raise exc_val
        except self.wrapped_exc:
            raise self.wrapper_exc from exc_val

    def __gen_wrapper(self, f, *args, **kwargs):
        with self:
            for res in f(*args, **kwargs):
                yield res

    def __call__(self, f):
        @functools.wraps(f)
        def wrapper(*args, **kw):
            with self:
                if inspect.isgeneratorfunction(f):
                    return self.__gen_wrapper(f, *args, **kw)
                else:
                    return f(*args, **kw)
        return wrapper 
```

## 使用示例

### 装饰师

```
@wrap_exceptions(MyError, IndexError)
def do():
   pass 
```

调用`do`方法时，不用担心`IndexError`，只需`MyError`

```
try:
   do()
except MyError as my_err:
   pass # handle error 
```

### 上下文管理器

```
def do2():
   print('do2')
   with wrap_exceptions(MyError, IndexError):
       do() 
```

inside `do2`, in the `context manager`, if `IndexError`is raise 会被包裹起来`MyError`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-12-17T18:06:56.950

满足您需求的最直接的解决方案应该是：

```
try:
     upload(file_id)
except Exception as upload_error:
     error_msg = "Your upload failed! File: " + file_id
     raise RuntimeError(error_msg, upload_error) 
```

通过这种方式，您可以稍后打印您的消息以及上传功能抛出的特定错误

# database - 火鸟数据库密码

> ID：696049
> 
> 赞同：4
> 
> 时间：2009-03-30T05:06:40.987
> 
> 标签：database, firebird

我真的很想知道，如何保护 firebird 数据库不被任何用户打开，而是从它自己的应用程序中打开。如果我分发带有单个文件 Firebird 数据库（未嵌入）的桌面应用程序，如何保护数据库不被复制到另一台运行 Firebird 且具有已知 sysdba 密码的机器上？

我搜索了与这个主题相关的问题，只找到了这个：[Finding a legacy firebird/Interbase database password](https://stackoverflow.com/questions/685420/finding-a-legacy-firebird-interbase-database-password)

如果该帖子中的答案是正确的，如何将桌面应用程序与 firebird 数据库一起使用并禁止任何用户使用另一台机器打开它？或者我应该使用其他数据库，如 mySQL 或 PostgreSQL？

PS：我使用Delphi 2006 开发GUI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-05T13:06:47.110

在考虑 Firebird 数据库的密码时，您错过了重点——服务器是开源的，因此无法做您想做的事。用户可以简单地重新编译服务器并注释掉密码检查。

基本上你只能做两件事：

*   将您自己的修改写入 Firebird 服务器，使其写入与所有其他服务器不兼容的数据库文件。那么人们可以将数据库转移到另一台机器上并不重要，因为标准的服务器可执行文件将无法访问数据库中的数据。

*   仅将加密数据写入文件，因此可以访问数据库并不重要。

两者当然也不是万无一失的，因为一个坚定的破解者可以简单地使用您自己的应用程序来获取数据。拥有将调试器附加到正在运行的进程的权限足以在任何时间点停止应用程序的执行并检查 RAM 中的（解密的）数据。另请参阅 SO 问题[“如何提高 Delphi 中的内存安全性？”](https://stackoverflow.com/questions/536328) ，尤其是[这个答案](https://stackoverflow.com/questions/536328/how-can-i-increase-memory-security-in-delphi/537826#537826)，以获取有关此主题的更多信息。

顺便说一句：无论您选择什么数据库引擎，都可以这样做，以回答您问题的最后一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T05:18:54.263

> 如何使用带有firebird数据库的桌面应用程序并禁止任何用户使用另一台机器打开它

如果您的意思是用户同时拥有加密数据和密钥，那么您就是在进行 DRM。确定的答案是：你不能。您可以通过使用不同的方法隐藏密钥来减慢用户的速度，但您无法阻止他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T05:38:13.857

你没有。

[这与 Pidgin 在http://developer.pidgin.im/wiki/PlainTextPasswords](http://developer.pidgin.im/wiki/PlainTextPasswords)中的问题或多或少相同，只是它保护的是某些用户而不是其他用户，而不是您的应用程序而不是任何最终用户。

# iphone - 创建 iPhone 库/框架

> ID：696051
> 
> 赞同：6
> 
> 时间：2009-03-30T05:11:36.357
> 
> 标签：iphone, cocoa, cocoa-touch

是否有任何教程描述如何创建库或者它是 iPhone 的框架？我有许多在应用程序之间共享的方法。这些将作为图书馆得到更好的维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T23:21:10.323

将您的代码放入静态库中（正如 Roger 通过他的链接指出的那样）。但是，请考虑使用 Xcode 跨项目引用将该静态库“导入”到所有其他需要它的项目中。我编写了一个教程来解释如何做到这一点（以及为什么我认为它比创建一个“胖”通用二进制文件更好）：[http ://www.clintharris.net/2009/iphone-app-shared-libraries/](http://www.clintharris.net/2009/iphone-app-shared-libraries/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T06:32:19.080

网上有很多信息可以帮助解决这个问题，例如[this](http://www.mobileorchard.com/sharing-compiled-code-building-static-libraries-in-xcode-for-the-iphone/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-08-08T08:34:41.133

一种更新（和更强大）的方法来执行“涵盖模拟器和设备的单个库文件”：

[使用 Xcode 和 SDK 4+ 构建胖静态库（设备 + 模拟器）](https://stackoverflow.com/questions/3520977/build-fat-static-library-device-simulator-using-xcode-and-sdk-4)

（我写了一个在接受的答案中提到的帖子；这在当时对 Xcode3 有效，但苹果故意用更高的版本打破它，并且没有提供替代方案。所以，我们最终得到了上面的 SO 问题/答案）

# blogengine.net - BlogEngine.Net - “无法生成临时类”错误

> ID：696053
> 
> 赞同：1
> 
> 时间：2009-03-30T05:12:45.637
> 
> 标签：blogengine.net

我刚刚将 blogengine.net 的一个新实例上传到我主机上的子域，我收到以下错误：

> 无法生成临时类（结果=1）。错误 CS2001：找不到源文件“C:\WINDOWS\TEMP\jn5ced1y.0.cs”错误 CS2008：未指定输入

我的主机上确实有 VPS 计划，我需要请求特定权限吗？

在以前的 BE 安装（旧版本）中，我从来没有遇到过这个问题——我做错了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T15:24:21.237

听起来像是 TEMP 目录的权限问题。我在我的开发机器上本地遇到了同样的问题，并采取了顽皮的 EVERYONE/ALL 路线来解决。

# c# - ConfigurationManager.OpenExeConfiguration() 与 XML 文件

> ID：696055
> 
> 赞同：1
> 
> 时间：2009-03-30T05:13:06.727
> 
> 标签：c#, configuration

有人能告诉我使用 ConfigurationManager 类的优点吗？该类加载的配置文件用于操作 VS 带有您自己构建的类以读取它的 XML 文件？

最近，我构建了一个继承自 ConfigurationSection 的类，以便在 app.config 中操作自定义部分。与仅打开和读取 XML 文件相比，这是一项相当多的工作。

有些人选择了第一种方法，有些人选择了第二种方法。

有什么好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-04-09T18:10:36.073

这是一个老问题，但到底是什么......所以是的，编写配置部分和元素时有相当多的代码开销，但与使用您自己的类和 XML 序列化程序相比，您得到的包括：

*   类型转换和验证：如果您的配置设置之一是“类型”（也许您在配置中存储需要为某个提供程序创建什么样的实现），那么 ConfigurationManager 不仅会转换写入的任何内容将 .config 文件添加到 System.Type，但您也可以在 ConfigurationElement 的属性上添加验证属性，例如“SubclassTypeValidatorAttribute”，它将检查给定类型是否派生自您的基本提供程序类/接口。您当然可以添加自己的验证器，这样在您的其余代码中，您只需“获取”配置并且您知道一切都是有效的。
*   多级设置层次结构：您可以在机器、应用程序或用户级别存储设置，这为您提供了一种机制来处理默认设置和用户特定设置。您还可以使用 API 从自定义位置加载配置。
*   配置文件中没有重复：如果您正在使用其他 .NET 功能，例如 TraceSources 和其他东西，则该配置已经在 .config 文件中（假设您正在解决问题并且您想要打开一些已关闭的调试跟踪默认情况下...您只需修改 .config 即可）。如果您使用自己的配置文件进行自定义设置，那么您最终会得到 2 个配置文件，这不太好。

可能还有其他好处，但到目前为止，这就是我想到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T05:29:37.297

这只是在配置文件中读取和写入数据的推荐且更简单的方法。使用 XML DOM 太低级了。

如果需要，您始终可以使用 section.SectionInformation.GetRawXml() 从 ConfigurationSection 获取原始 xml 配置。同样使用 SetRawXml 来设置它。

但是在使用 ConfigurationManager 时有一些问题，例如，当您使用 OpenMappedExeConfiguration 加载配置文件时，您会得到一个“合并”的内存配置，并且包含来自 machine.config 的部分。您可以使用 section.ElementInformation.Source.Equals(source.FilePath) 检查某个部分是否来自您提供的文件。

参考：[MSDN](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)

# c# - 套接字编程

> ID：696062
> 
> 赞同：0
> 
> 时间：2009-03-30T05:17:33.563
> 
> 标签：c#, .net, sockets

在 c# 中模拟 lan-messenger 时，我使用环回地址只是为了让初学者检查代码的功能。但是在发送一些消息后，我在使用 end-connect 方法和套接字时遇到套接字异常发送数据时出现异常。这个异常背后有什么原因吗？

```
 private void button1_Click(object sender, EventArgs e)
    {

        HideCaret(this.textBox1.Handle);
        StringBuilder sb = new StringBuilder(this.textBox1.Text);
        str = this.textBox2.Text;
        Socket newsock = new Socket(AddressFamily.InterNetwork,socketType.Stream,   ProtocolType.Tcp);
        IPEndPoint ip = new IPEndPoint(localaddress, 5555);
        newsock.BeginConnect(ip, new AsyncCallback(connected), newsock);
        if (str != "")
        {
            sb.AppendLine(this.textBox2.Text);
            this.textBox1.Text = sb.ToString();
            this.textBox2.Text = "\0";
            send = Encoding.ASCII.GetBytes(str);
            try
            {
                newsock.BeginSend(send, 0, send.Length, SocketFlags.None, new AsyncCallback(sent), newsock);
            }
            catch (ArgumentException)
            {
                MessageBox.Show("arguments incorrect in begin-send call", "Error", MessageBoxButtons.OK);
            }
            catch (SocketException)
            {
                MessageBox.Show("error in accessing socket while sending", "Error", MessageBoxButtons.OK);
            }
            catch (ObjectDisposedException)
            {
                MessageBox.Show("socket closed while sending", "Error", MessageBoxButtons.OK);
            }
            catch (Exception)
            {
                MessageBox.Show("error while sending", "Error", MessageBoxButtons.OK);
            }

        }                                 

    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T05:38:30.660

这可能是因为您在发送数据之前没有等待套接字连接。你有两个选择：

1.  `connected`从您的回调方法异步发送数据。
2.  通过阻塞该线程直到连接来同步发送数据。

您通过将要发送的数据和套接字组合到一个新类中来完成 #1，然后像`state`在调用[`BeginConnect`](http://msdn.microsoft.com/en-us/library/tad07yt6.aspx). 然后将您的发送代码移动到回调方法。

您通过设置 a[`System.Threading.ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)并调用[`WaitOne`](http://msdn.microsoft.com/en-us/library/58195swd.aspx)after来完成 #2 [`BeginConnect`](http://msdn.microsoft.com/en-us/library/tad07yt6.aspx)。然后调用[`EndConnect`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.endconnect.aspx)你的`connected`回调方法，然后[`Set`](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.set.aspx)在你的[`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx). 然后像上面一样继续发送。

* * *

如果你知道你得到的是什么，你也可能会学到更多`SocketException`。

从 MSDN 文档：

> 如果您收到`SocketException`，请使用该`SocketException.ErrorCode` 属性来获取特定的错误代码。获取此代码后，请参阅 MSDN 库中的 Windows Sockets version 2 API 错误代码文档，了解错误的详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T05:37:47.900

您是否有从套接字读取的单独线程？如果没有，您的套接字缓冲区可能已满。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-11T17:21:40.270

您也可以使用 .Net`Socket.Connect`方法，它会阻止您的代码直到连接。所以，你不需要使用`ManualResetEvent`和调用`WaitOne`. 您也可以进一步使用其他套接字异步方法。

# css - sIFR 3：IE6 额外间距

> ID：696071
> 
> 赞同：0
> 
> 时间：2009-03-30T05:22:40.587
> 
> 标签：css, internet-explorer, internet-explorer-6, sifr

我在以下网站[http://www.bevelite.com.au/test2](http://www.bevelite.com.au/test2)上使用 sIFR 3，它很有魅力！唯一的问题是我将页脚 div 设置为绝对位于页面底部，但是一旦 sIFR 完成渲染，它会在页脚下方放置一些额外的空间，从而破坏了我绝对定位的页脚的目的！

有没有办法可以定义 sIFR 渲染文本的行高？目前，文本在 28px 高处呈现 H1，理想情况下，我想将其设置为 19px 高，用于呈现之前的文本和 sIFR 之后的文本。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T14:07:05.507

您正在尝试`line-height`在您的 中设置`sifr-config.js`，但我认为这不会产生任何影响。尝试设置`leading`。它采用像素值，但不采用单位。

例如：

```
css: [
    '.sIFR-root {leading: -2;}'
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T18:36:47.287

您还可以使用 、 和 的参数删除 Flash 影片`tuneWidth`中`tuneHeight`的`offsetTop`额外`offsetLeft`空间`sIFR.replace()`。

# c# - WPF：从自定义控件引用窗口

> ID：696072
> 
> 赞同：2
> 
> 时间：2009-03-30T05:23:15.017
> 
> 标签：c#, wpf, events

关于为资源字典创建代码隐藏文件，我已经按照[这篇文章](https://stackoverflow.com/questions/92100/is-it-possible-to-set-code-behind-a-resource-dictionary-in-wpf-for-event-handli)中接受的答案的说明，并且它有效......所以现在我可以将事件附加到 generic.xml 文件中的控件。

但是现在我希望能够`DragMove()`从那里的事件中调用该方法，并且由于当时没有对托管字典的窗口的任何引用，所以我不知道如何调用此`DragMove()`方法。

那么，从文件后面的资源字典代码中，有什么方法可以引用当前将托管该资源字典的窗口？

* * *

**[更新]（临时解决方案）**

作为一个简单（但愚蠢）的解决方法，我目前做了以下事情：
因为我可以`Application.Current.MainWindow`从`Generic.xaml.cs`代码隐藏中引用，我现在在`Generic.xaml.cs`:

```
private void Border_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{               
    Application.Current.MainWindow.DragMove();
} 
```

然后我将`PreviewMouseLeftButtonDown`处理程序附加到`Window`我拥有的每个上，如下所示：

```
private void Window_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    Application.Current.MainWindow = this;
} 
```

它，嗯，它有效......直到有人能想出正确的方法来做到这一点，它应该足够好地为我服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T08:39:01.177

我不知道这样做。但是，如果您尝试确定`Window`给定的特定资源，则可以使用`RelativeSource`：

```
<SolidColorBrush x:Key="MyBrush" Color="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}, Converter={StaticResource WindowToColorConverter}"/> 
```

如果您从代码中执行此操作，则可以使用[Window.GetWindow()](http://msdn.microsoft.com/en-us/library/system.windows.window.getwindow.aspx)。您只需要在其中`DependencyObject`托管一个`Window`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T17:40:55.900

从架构的角度来看，我会说你即将打破范式。为资源字典提供使用它的 UI 概念并提供一些逻辑而不是提供资源可能是一个糟糕的决定。

如果确实需要连接资源字典，您可能需要在 UI 和资源字典或控制器之间使用一些适配器，但同样您不应该在资源容器中注入任何逻辑......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-30T08:17:50.340

您可以通过以下方式访问主窗口

```
Application.Current.MainWindow 
```

希望这可以帮助

# java - java.lang.NoSuchMethodError: java.util.Properties.load （嗯？为什么？）

> ID：696079
> 
> 赞同：4
> 
> 时间：2009-03-30T05:28:29.637
> 
> 标签：java, nosuchmethoderror

我已经构建了一个可以从我的 IDE (Netbeans) 正确执行的 Java 应用程序。我已将 jar 打包到 Mac OS (Leopard) 的包中。如果我从捆绑包或外壳运行应用程序，则会收到此错误：

> java.lang.NoSuchMethodError: java.util.Properties.load(Ljava/io/Reader;)V

我正在使用 java 1.5.0_16。

你知道为什么我在使用 shell 执行 jar 时会出现这个错误吗？你知道为什么我在使用 IDE 时没有得到它吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-30T05:32:02.920

您使用的是 Java 5，但`Properties.load(Reader)`仅在 Java 6（又名 1.6）中引入。如果这种情况再次发生，请检查 JavaDocs（例如本例中的[`Properties`JavaDoc](http://java.sun.com/javase/6/docs/api/java/util/Properties.html)）并查看您感兴趣的成员 - 它通常会给出引入它的版本（例如，本例中的“Since: 1.6”） .

您需要创建一个`InputStream`而不是`Reader`- 或升级到 Java 6。我怀疑您会发现 NetBeans 正在使用 Java 6，这就是它在那里工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-07-18T21:17:22.420

只有阅读器支持 UTF-8 属性。我们需要自己重写那个方法。

# ruby-on-rails - Facebook 应用配置文件选项卡不显示内容

> ID：696098
> 
> 赞同：1
> 
> 时间：2009-03-30T05:40:34.787
> 
> 标签：ruby-on-rails, facebook

我正在尝试将个人资料选项卡添加到我的 Facebook 应用程序。在 Facebook 编辑应用程序页面中，我已将选项卡 url 设置为[http://apps.facebook.com/my-suggestions-tu/pages/test](http://apps.facebook.com/my-suggestions-tu/pages/test)。我只需要在文本字段中输入“pages/test”；“ [http://apps.facebook.com/my-suggestions-tu/](http://apps.facebook.com/my-suggestions-tu/) ”已经由 Facebook 提供。

我可以查看[http://apps.facebook.com/my-suggestions-tu/pages/test](http://apps.facebook.com/my-suggestions-tu/pages/test)就好了。我还能够将应用程序选项卡添加到我的测试 Facebook 页面。但是，应用程序选项卡不显示任何内容。

我的应用程序使用 Facebooker 插件在 Rails 2.2 上运行。

谢谢，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T05:55:38.620

确保未执行`:ensure_application_is_installed_by_facebook_user`和/或before_filters。`:ensure_authenticated_to_facebook`

一种方法是创建一个单独的控制器来处理配置文件选项卡。

例如：

```
class TabsController < ApplicationController
  skip_before_filter :ensure_application_is_installed_by_facebook_user
  def index
   render :text => "tab content"
  end
end 
```

（标签网址将只是“标签”）

请记住，`fb_sig_user`选项卡上没有 facebook 参数，因此如果您有依赖它的过滤器，它们将不起作用。

# usability - 当网页完成加载时，是否应该关注控件？

> ID：696102
> 
> 赞同：8
> 
> 时间：2009-03-30T05:45:24.730
> 
> 标签：usability

以下是我的意思的一些例子：

google.com - 焦点设置在“搜索”框上

gmail.google.com - 焦点设置在“用户名”字段上（实际上，大多数网络电子邮件客户端都这样做）。

stackoverflow，问一个问题 - 焦点设置在“标题”框上。

有时，这是一个方便的功能 - 例如，在 Google 上。然而，从可用性的角度来看，它真的被认为是登录页面上的一个好功能吗？

就我个人而言，我经常输入我的用户名，开始输入我的密码，然后页面加载完成并将焦点放回用户名字段。不幸的是，由于我有复杂的密码，迫使我在打字时看键盘，所以我没有注意到焦点何时转移。我经常在未屏蔽的用户名字段中输入我的密码，让站在我身后的任何人都可以看到。

另一种不那么危险但仍然很烦人的情况是，当我在我的地址栏中输入一个 url 而我的主页仍在加载时。但是，一旦完成，并且如果我没有完成输入 url，焦点就会从我身上偷走并放在其他字段上。

是否应该对网站和/或浏览器进行编程，以便在用户已经与网站或浏览器交互时焦点不会改变？这样的问题会困扰普通（即非程序员）用户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T06:17:09.520

当网站成为焦点时，我个人讨厌它。主要原因是在我的笔记本电脑上，如果我使用触控板并按下退格键，它会自动导航回上一页。如果焦点已放在文本框上，它会将退格视为我正在尝试删除字符。

我个人的偏好（这与最佳实践几乎没有关系）是它不应该有初始焦点，但第一个选项卡会将它带到您想要初始焦点的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T18:48:58.730

这实际上是两个不同的问题，有不同的答案：

问：是否应该将重点放在用户最有可能使用的输入字段上？

答：如果“大多数用户”真的是 90% 或更多，那肯定是的。

问：网页加载完成时是否应该发生这种情况？

A：不。“onLoad”事件是一个非常愚蠢的地方。输入字段一出现就应该获得焦点 - 当页面完成加载时，它通常完全无关紧要。只需`<script>`在输入元素本身之后放置一个设置焦点的标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T06:20:51.760

我在 Gmail 中也遇到了同样的情况，我觉得它有点烦人，尤其是因为它*应该*很容易绕过：在`OnLoad`事件处理程序中，检查输入框（用户名或密码）是否已经包含文本。如果是这种情况，请不要改变焦点。

与所有简单的解决方案一样，如果有一些奇怪的副作用使其不实用，我不会感到惊讶，但无论如何我都会尝试一下。哦，如果可行，您为什么不向 Google 发送电子邮件？;-)

话虽如此，我认为这种行为`usability glitch`不是错误，但有点烦人。不要惹恼你的客户。修理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T06:01:47.717

我认为只有我们程序员才有在页面加载之前打字的习惯；-) 我的大多数非程序员朋友都等到他们从加载区域看到“完成”信号。

但是，上述两个问题比每次都必须移动鼠标指针/使用选项卡来在不关注特定控件的站点中输入我们想要的内容（用户名、密码）要烦人。

“是否应该对网站和/或浏览器进行编程，以便在用户已经与网站或浏览器交互时焦点不会改变？”

我认为浏览器应该比网站更能做到这一点。因为这将是另一次返回服务器，并且对于低速连接可能会令人沮丧。

总的来说，我认为这只是我们可以忍受的另一个小问题/烦恼。正如我所说，只有我们程序员甚至在页面加载之前就输入类型。我的大多数朋友都不知道他们可以在页面加载之前输入:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T06:26:48.063

在某些网站上，您实际上有一个普通用户使用键盘的用例（*普通用户*-像我一样，也使用键盘进行导航）。像 Google 搜索这样的网站实际上希望您只需输入您要查找的内容并点击`enter`。

具有多个输入区域和多个退出路径的站点有时也会将初始焦点放在某个地方，然后就会变得烦人。如果他们对输入区域有一些奇怪的标签顺序，那就更糟了——所以他们实际上*强迫*你使用鼠标。

我个人不认为网站完成加载后焦点的变化是一个问题，而不是一般用户。但是，正如我所提到的，如果它真的有用，那取决于您的特定应用程序中的用例是什么。这可能是向某些人展示处于 beta 阶段的应用程序并执行可用性测试的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-30T18:34:21.357

是的，焦点应该默认为用户最有可能开始输入的位置。不这样做是教科书式糟糕的 UI 设计。

当焦点默认干扰您已经在做的事情时，这不是焦点默认的固有问题，而是实施不充分的失败。这就是为什么我将一个[通用的“智能”自动对焦脚本](http://lostsouls.org/grimoire_form_autofocus)放在一起的原因，如果你已经开始打字，它会做一些事情，比如让你一个人呆着。

（是的，我知道这很麻烦。大部分的麻烦是处理跨浏览器问题——实际上，这是 Firefox 的一次失败。）

# java - Spring框架如何协助应用程序开发？

> ID：696104
> 
> 赞同：6
> 
> 时间：2009-03-30T05:45:47.443
> 
> 标签：java, spring

这里有点迷茫！Spring框架如何协助应用程序的一般开发？我使用 django 框架，我可以快速向外行解释所有部分如何组合在一起（Django、Python、模板、包等）以生成出色的 Web 应用程序，但是当我看到 spring 时，我有点迷失了！我正在寻找答案，但不限于以下内容；

1.  有人可以告诉我他们是如何使用 spring 来生成应用程序的吗？
2.  有人可以指点我在春天完成的一些现实世界的应用程序（iread 某处linkedin.com 是用spring 完成的！
3.  有人可以告诉我这些部分是如何组合在一起的（Strut、javascript、glassfish/jboss、apache 等，当然还有 spring）来生成应用程序吗？
4.  使用 Spring 生成应用程序需要多少个单独的软件？
5.  使用 Spring 框架生成应用程序有多容易？

我需要血淋淋的细节:)

加思

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-30T07:07:45.030

有许多 Spring 项目，但最初的 Spring (POJO) 项目是因为使用 J2EE 的感知困难而出现的。您会在 SpringSource 网站上发现许多项目都是基于此而发展起来的，但它们并没有被集中到一个框架中，而是采用了更加模块化的方法。对于他们生产的所有产品，请参见：

[http://www.springsource.org/projects](http://www.springsource.org/projects)

问：谁能告诉我他们是如何使用 spring 来制作应用程序的？

Spring 提供了许多特性，但最常用的一个是依赖注入。这允许您通过在 XML/Annotations 中声明关系来将组件（例如 Javabeans）连接在一起。然后 Spring 容器读取此信息并在运行时构造 bean 层次结构。在 XML 中描述 bean 的标准方法是应用程序上下文。

[http://static.springframework.org/spring/docs/2.0.x/reference/beans.html](http://static.springframework.org/spring/docs/2.0.x/reference/beans.html)

问：有人可以指点我在 spring 中完成的一些真实世界的应用程序（iread 某处linkedin.com 是用 spring 完成的！

有很多使用 Spring 构建的应用程序。我不确定大型商业项目，但我预计会有很多。

问：谁能告诉我这些部分是如何组合在一起的（Strut、javascript、glassfish/jboss、apache 等，当然还有 spring）来生成应用程序？

Spring 通常与其他框架集成，这些框架中有各种钩子，您需要分别查看每个钩子以了解它们的全部内容。可以在这里找到 Struts 和 Spring 框架的集成：

[http://www.ibm.com/developerworks/web/library/j-sr2.html](http://www.ibm.com/developerworks/web/library/j-sr2.html)

使用 Glasshfish/JBoss 更多的是关于如何配置与 Spring 相关的应用程序，而不是应用程序服务器。看到这个：

[http://static.springframework.org/spring/docs/2.5.x/reference/web-integration.html](http://static.springframework.org/spring/docs/2.5.x/reference/web-integration.html)

问：使用 spring 生成应用程序需要多少个单独的软件？

例如，Web 应用程序将由 Spring MVC + Spring Backend 组成。一个桌面应用程序 - Java Swing + Spring 后端。就 Spring 框架本身（使用 XML 配置）而言，它将涉及：

1.  创建您的标准 JavaBean 类（用于服务/DTO/DAO）

    公共类 ExampleBean {

    ```
    private AnotherBean beanOne;
    private YetAnotherBean beanTwo;
    private int i;

    public ExampleBean(
        AnotherBean anotherBean, YetAnotherBean yetAnotherBean, int i) {
        this.beanOne = anotherBean;
        this.beanTwo = yetAnotherBean;
        this.i = i;
    } 
    ```

    }

2.  在应用程序上下文文件中声明 bean

3.  通过 web.xml 等将 Spring 与您的 Web 应用程序/应用程序集成......

这些取自 Spring docs btw ......请参阅：

[http://static.springframework.org/spring/docs/2.0.x/reference/beans.html](http://static.springframework.org/spring/docs/2.0.x/reference/beans.html)

Q. 使用 Spring 框架制作应用程序有多容易？

非常简单，但又取决于您正在构建的内容。如果您只是使用 Spring POJO 框架来构建服务和集成层，那么它相当简单。如果您必须构建一个 Web 应用程序层，那么了解内部结构会稍微复杂一些（根本不是非常复杂）。

希望有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T09:56:48.197

1.  有人可以告诉我他们是如何使用 spring 来生成应用程序的吗？

将 Spring JAR 放入您的 CLASSPATH 中，遵循 Spring 习惯用法（例如，描述层的接口），并使用它将您的代码粘合在一起。

2.  有人可以指点我在春天完成的一些现实世界的应用程序（iread 某处linkedin.com 是用spring 完成的！

[这是](https://www.thehartfordatwork.com/thaw/)一个。现在已经投入生产三年了，而且还在不断增加。

3.  有人可以告诉我这些部分是如何组合在一起的（Strut、javascript、glassfish/jboss、apache 等，当然还有 spring）来生成应用程序吗？

Struts 是 web 层的一种选择；JavaScript 是您可以用来使您的客户端动态化的东西；Glassfish/JBOSS/WebLogic/WebSphere/Tomcat/Spring DM 都是部署 Spring 应用的应用服务器选择；Apache 是一个 HTTP 网络服务器；Spring 和您的代码在应用服务器上运行。

4.  使用 Spring 生成应用程序需要多少个单独的软件？

你需要一个应用服务器，可能还需要一个数据库、一个浏览器、你的代码和 Spring。

5.  使用 Spring 框架生成应用程序有多容易？

你是一个多么优秀的程序员？取决于你的知识。

一旦我理解了春天，它肯定让我的生活变得更轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T05:56:14.767

Spring 是一个相当大的框架，任何人都很难在这里总结所有内容。我认为使用 Spring 的最大优点是它的依赖注入支持。它可以用于任何类型的应用程序，并提供大量的框架特性和实用程序。如果您真的感兴趣，我建议您从 springsource.org 上的文档开始：

[http://www.springsource.org/documentation](http://www.springsource.org/documentation)

网上也有很多教程。要完全理解它，您应该尝试编写一些示例应用程序来感受它，并看看有什么可用的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T08:47:57.863

只是添加另一个维度 - 如果您对构建 Java Web 应用程序感兴趣，并且没有限制（例如与/更新集成的遗留代码），那么看看[grails](http://grails.org)。它是编写 web 应用程序的最佳 web 框架。当然，它在内部也使用 spring，但它对你来说相当抽象。事实上，我把它比作 django。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T06:39:52.430

您可以从这个[http://static.springframework.org/docs/Spring-MVC-step-by-step/](http://static.springframework.org/docs/Spring-MVC-step-by-step/)开始。这将为您提供基本框架，然后 spring 很大，因此根据您的需要，您可以探索并使用 spring。

这对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T10:51:53.573

如果你同时谈论 Struts 和 JavaScript，这意味着你不知道你在说什么，对于一般的 Web 开发来说。

**什么是什么？** - 您拥有 Java 框架，例如 Spring、Struts 等，可帮助您构建基于 Java 的 Web 应用程序。这些 Java 框架通常将 Web 与 ORM 工具和其他技术集成在一起。- 您拥有 Tomcat、Jetty 等 Servlet 容器，您可以在这些容器上运行经典的 Java Web 应用程序。JBoss、Glassfish 等 J2EE 容器嵌入了 Tomcat 等 servlet 容器，并提供了 J2EE 容器，有时还提供其他工具来部署 Java Enterprise 应用程序。

**选择框架** 选择框架取决于您对它的感受以及它如何满足您的需求。例如，您为什么使用 Django 而不是 TurboGears？有些人会告诉你 Django 很烂，而 TurboGears 很烂，等等。

无论您做什么，都由您决定，**阅读**文档并选择一台应用程序服务器和一个或多个框架来构建您的应用程序。

# java - 拆分数组

> ID：696113
> 
> 赞同：2
> 
> 时间：2009-03-30T05:53:43.290
> 
> 标签：java

如何在 Java 中将一个数组划分为四个子数组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-30T05:57:22.547

创建 2 个长度为您想要的数组。

并使用

```
System.arraycopy(src, srcPos, dest, destPos, length) 
```

将值从原始值复制到两个新的目标数组。

例子：

```
 int[] original = new int [13];
    int[] a = new int[3];
    int[] b = new int[10];

    System.arraycopy(original, 0, a, 0, 3);
    System.arraycopy(original, 3, b, 0, 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T17:00:58.397

除了已经说过的内容之外，您还可以使用 class 中可用的[Arrays.copyOfRange(...)](http://java.sun.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange(boolean[],%20int,%20int))方法之一`java.util.Arrays`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T20:27:24.263

在这里查看我的答案：

[将数组拆分为具有特定最大大小的多个数组](https://stackoverflow.com/questions/5731042/split-array-into-two-parts-without-for-loop-in-java/12590378#12590378)

您必须通过将数组长度除以子数组的数量来评估的最大大小是多少（注意浮点结果，它必须是整数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T06:02:26.407

普通分区...我会使用以下两种方法之一：

1.  如果您需要将项目组移动到单独的数组中，例如项目 0 到 10 到数组 1、11 到 20 到数组 2 等，我将创建四个数组并使用`System.arraycopy()`静态方法：

    ```
    System.arraycopy(sourceArray, sourceStart, destArray, destStart, length); 
    ```

2.  如果您必须检查特定项目的位置，请创建四个数组、四个索引计数器变量并循环遍历原始数组的元素。测试条件并将其添加到四个数组之一，增加相应的索引计数器。

# html - 将表格布局转换为 CSS 布局的最佳方法是什么？

> ID：696116
> 
> 赞同：9
> 
> 时间：2009-03-30T05:56:44.953
> 
> 标签：html, css

我即将开始使用基于表格的复杂布局（几年前编码）的网页。

我想做的一件事是将布局转换为带有 div 和 span 的正确 CSS 布局。

您能否提出解决此类问题的好方法？我应该使用像 Blueprint 这样的 CSS 框架吗？只是进入那里并破解它直到它看起来正确？我已经大量使用了 Firebug 和 IE Developer Toolbar。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-30T06:04:36.633

在表格和 CSS 之间进行转换通常没有灵丹妙药。每个网站都是不同的，有不同的要求。唯一真正的答案是：只需从头开始标记。

最好的建议是先完全编写标记。确保标记准确、语义化并完全代表您的数据。*不要写样式表......但是。*标记完成后，创建 CSS。这样你就有了语义标记，而 CSS 纯粹是控制表示。

CSS 框架通常不提倡这种语义标记方法，因为它们会强制您添加额外的标签以符合他们的方法。因此，CSS 框架有时比它的价值更麻烦。

做标记，然后是 CSS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T08:51:12.630

在开始之前，请确保您使用的是 CSS 重置。[Eric Meyer](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)和[Yahoo YUI](http://developer.yahoo.com/yui/reset/)都很出色。这将有助于使您的所有浏览器看起来都一样。

此外，还要安装[HTML 验证器](https://addons.mozilla.org/en-US/firefox/addon/249)。这将确保您的 HTML 看起来不错并准备好添加 CSS。

[然后获取Firebug](https://addons.mozilla.org/en-US/firefox/addon/1843)的副本并将其安装在 firefox 中。这对于查看哪些 CSS 规则在做什么非常有用。您可以通过单击每个规则的交叉来禁用单个规则。

现在，访问一些正确验证的网页，看看他们在样式表中使用了哪些规则。

可以尝试的网站有[www.alistapart.com](http://www.alistapart.com/)、[CSS Zen Garden](http://www.csszengarden.com/)、[SimpleBits](http://simplebits.com/)等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T06:07:00.590

转换过程将是一个痛苦的头痛！我建议你开始一个整体的重新设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T15:49:16.417

我不知道这是否有任何帮助，我构建了名为[Emastic](http://code.google.com/p/emastic/)的 CSS 框架（支持流动和固定列），如果需要，您可以模拟表格这里是[Emastic Table示例](http://www.allapis.com/emastic/Table-Emastic.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T16:39:15.220

我支持那些说你应该从头开始重新设计整个东西的评论者。清理 HTML，然后制作 CSS。

我想补充一个这样做的理由。通常基于表格的设计至少有几年的历史，因此看起来已经过时了。利用这个机会改进设计。根据您的口味和需求，稍微刷新或彻底检修。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T06:11:51.547

迭代方式也有效。从小块开始，将它们转换为 CSS。这应该会简化您的表格结构，希望只在表格中保留“基本网格”，而在 CSS 中保留所有其余部分。

从那里选择一个现有的、经过测试的解决方案，如果它是一个简单的布局（对于 1 到 3 列，那里有大量经过测试的解决方案）。如果它更复杂，请使用蓝图。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-31T03:17:04.457

我不会使用框架。学习一个新框架只有在你一遍又一遍地使用它时才有用。每个框架都有自己的错误和弱点。采用

```
display: table-cell; 
```

做一个专栏。这些将像`float: left;`. 见[http://quirksmode.org/css/css2/display.html](http://quirksmode.org/css/css2/display.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-18T18:41:29.923

在某些情况下，使用正则表达式可以加快您的进程。

例如，像这样：

```
<table.*>\R*.*<tr>\R*.*<td[^>]*?>(.*)</td> 
```

将匹配表的开头并提供 $1 中第一个单元格的内容以进行替换：

```
<div class="container">\n\t<div class="row">\n\t\t<div class="span6">$1</div> 
```

当然，您需要进行自定义以匹配您的特定用例。如果您有许多类似的页面，您可以尝试先手动编码一个，然后使用类似的方法来简化其他页面的转换。

另一种方法是使用类似这样的 jQuery 插件：[https ://github.com/ryandoom/jquery-plugin-table-to-div](https://github.com/ryandoom/jquery-plugin-table-to-div)

它旨在修改以下渲染，但可以在开发期间用于获取给定表格并提供基于 DIV 的简单形式。

# c++ - 关闭 C++ 控制台应用程序时会发生什么

> ID：696117
> 
> 赞同：24
> 
> 时间：2009-03-30T05:57:05.887
> 
> 标签：c++, winapi, console-application

我想这个问题说明了一切，但是，如果有人关闭了 C++ 控制台应用程序会发生什么？如，单击右上角的“x”。它会立即关闭吗？它会引发某种异常吗？它是未定义的行为吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-30T06:11:40.987

[如果您使用SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/ms686016(VS.85).aspx)函数设置控制处理程序，则使用右上角的“x”关闭 c++ 控制台应用程序会引发`CTRL_CLOSE_EVENT`您可以捕获和处理的问题。在那里，您可以覆盖关闭功能并执行您想做的任何事情，然后仍然可以选择执行默认行为。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-30T06:08:04.097

我想控制台进程只是被操作系统毫不客气地杀死了。如果您想捕获此事件并执行某些操作，看起来[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/ms686016(VS.85).aspx)函数就是执行此操作的方法。

也可以看看：

*   [如何在命令行界面中处理 ctrl-break 信号](https://stackoverflow.com/questions/181413/how-to-handle-a-ctrl-break-signal-in-a-command-line-interface)
*   [控制台事件处理](http://www.codeproject.com/KB/winsdk/console_event_handling.aspx?display=PrintAll)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-30T06:09:00.180

在 Linux 和其他 Unix 系统上，控制台作为单独的进程运行。当您关闭 shell 时，它会向当前活动的进程或未在后台执行的进程发送 SIGHUP 信号。如果程序员不处理它，则该过程简单地终止。如果您关闭与终端和活动进程的 SSH 会话，则会发送相同的信号。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-12-15T13:12:44.983

`SIGBREAK`在 Windows 上引发。

# asp-classic - 带有 Expression Web 2 和 Vista 的经典 ASP

> ID：696139
> 
> 赞同：0
> 
> 时间：2009-03-30T06:08:18.420
> 
> 标签：asp-classic, windows-vista, expression-web

我以前在 XP 和 MS Server 2003 中使用过 Expression Web，在每种情况下我都可以在浏览器中预览 .asp 页面。

我现在转移到 Vista 并收到错误“此页面可能包含需要 Web 服务器的动态内容......”另一方面，如果我希望预览 HTML 页面，则没有问题。

我知道 Expression 不支持 Classic ASP IntelliSense，但我可以忍受......如果必须的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T14:25:00.540

您可以预览的 (HTML) 页面似乎没有由 Web 服务器提供服务。

您是否能够确认它们是在 http ( [http://..](http://..) ) 协议而不是本地文件协议 (file:///...) 上呈现的？

# windows-ce - Win CE 设备的进程查看器

> ID：696141
> 
> 赞同：3
> 
> 时间：2009-03-30T06:08:46.857
> 
> 标签：windows-ce

我必须找出 Windows ce 4.0/5.0 设备上的内存泄漏问题。是否有任何工具可以向我显示所有进程信息，如内存、句柄计数......以便我可以识别罪魁祸首进程。

是否有针对 CE 4.0/5.0 的内存泄漏检测工具？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T06:12:29.703

[http://www.vttoth.com/LPK/taskmanager.html](http://www.vttoth.com/LPK/taskmanager.html)

这有点旧，但可能仍然有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T13:24:30.743

最好的工具是[Entrek 的 CodeSnitch](http://entrek.com/codesnitch.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T06:21:12.007

看看这篇[文章](http://www.codeproject.com/KB/mobile/MobileTaskManager.aspx)。如果您的设备中提供了 Toolhelp32 库，您就可以轻松编写枚举进程和内存的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T07:38:03.697

[acbTaskMan](http://www.acbpocketsoft.com/Products/acbTaskMan/acbTaskMan-Overview-7.html)对我来说就像一个魅力。免费版不显示每个进程的信息，但付费版并不太贵。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-16T23:42:05.767

[PocketPC Process Explorer](http://madebits.com/tools/pocketpc-process-explorer.php)怎么样？它是免费的，并且提供了一些很酷的功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-24T12:21:57.963

这个是免费的，就像一个魅力：[ITaskMgr](http://urana.info/mobile/wince/itaskmgr/index.html)

# sharepoint - InfoPath - 无法填写此表单....此表单的只读版本？

> ID：696143
> 
> 赞同：1
> 
> 时间：2009-03-30T06:09:40.570
> 
> 标签：sharepoint, infopath, readonly

在我的项目中，我使用 InfoPath，并将它生成的 xml 存储在数据库中（通过 WS） - 所以一路上没有 SharePoint。

当我打开服务器的 InfoPath 表单时，它总是显示这个奇怪的消息：

无法填写此表单，原因可能是您没有足够的权限、另一个用户打开了该表单，或者该表单已在另一个程序中打开。您要打开此表单的只读版本吗？

单击是后 - InfoPath 将打开表单，让您进行所有更改，基本上按预期工作。这是让我需要摆脱的用户感到困惑的消息......

请注意，我没有安装任何 FrontPage 扩展（而且我不太可能安装这些扩展）。

感谢您的任何帮助！雅尔达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T06:26:05.850

[带有您答案的 Google 图书预览](http://books.google.com/books?id=XKKWuSHExC8C&pg=PA435&lpg=PA435&dq=infopath+%22This+form+cannot+be+filled+out%22+message&source=bl&ots=jiu7INquz2&sig=vR8WioQet9hOMtQDr58KJQNz8LM&hl=en&ei=QmXQSYzWDJLstQPskLigAw&sa=X&oi=book_result&resnum=5&ct=result)

我无法选择文本，因为这是一本扫描的书，但基本上它说这可能会由更高版本的 Infopath 解决。现在用户需要忽略此消息，或者即使您打算让用户提交而不是保存已完成的表单，您也需要在您的服务器上公开写入权限以填写表单。

# c# - 初学者如何在 ASP C# 网页中维护状态

> ID：696149
> 
> 赞同：1
> 
> 时间：2009-03-30T06:12:53.230
> 
> 标签：c#, asp.net, visual-studio

**更新**：我在网上找到的最清晰的解释，因为我一直在努力解决这个问题，可以在[这里](http://aspalliance.com/articleViewer.aspx?aId=135&pId=)找到。

也许我只是不太了解 runat 服务器的模型。看起来下面的代码总是在执行 if 块。如果代码在服务器端运行，我想我可以理解它必须是无状态的。

我是一位经验丰富的非网络程序员，但对我来说似乎与直觉相反。我是否需要创建某种会话对象或在 URL 中传递当前状态或什么？

```
<script runat="server">

DateTime begin;
DateTime end;
int iSelectedStart = 0;
int iSelectedEnd = 0;
int iPutName = 0;

protected void Button1_Click(object sender, EventArgs e)
{
    if (iPutName == 0)
    {
        iPutName = 1;
        Label1.Text = TextBox1.Text + " you will be slecting your start and end dates."; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T06:21:10.540

这里要记住的重要一点是网络是无状态的。来自个人浏览器的每个请求都与之前的所有请求完全分开。您的代码发生的情况是，每次客户端请求页面时，都会从头开始实例化该类。这包括单击 Button1。

如果您希望值在请求之间保持不变，则必须将其存储在以后可以检索的位置。Session 对象为您提供了这个。

基本上，您需要以某种方式将 iPutName 变量存储在会话中。可能最好的方法是将其封装在一个属性中：

```
protected int iPutName
{
    get { 
        if (Session["iPutName"] == null)
            Session["iPutName"] == 0;
        return Session["iPutName"];
    }
    set { Session["iPutName"] = value; }
} 
```

**编辑：** ViewState 对象也可以工作（只要在页面上打开 ViewState）。这对 HTML 中隐藏字段中的值进行编码，并在返回时对其进行解码。

**编辑（再次）：**对重复编辑表示歉意，但我应该澄清这一点。乔纳森和埃米尔所说的是正确的。您可能应该为此使用 ViewState 而不是 Session ，除非您希望此值在页面之间保持可访问性。请注意，这确实需要[打开 ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)，这将导致向客户端发送更大的有效负载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T06:23:48.583

看起来您的部分代码被截断了，但这是 Web 编程的基本内容——它是无状态的。除非，也就是说，你做了一些事情（使用 ViewState、Session 等）来将一些状态添加到组合中。

在您的情况下，您似乎希望通过刷新页面来保持某种状态。将要保留的值放在 ViewState 中，以使它们在回发到同一页面时保持不变。如果您想在网站上的页面之间保存值，请使用 Session。如果您想在对站点的访问期间维护值，请将它们放入数据库并将它们绑定到登录名或 cookie。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T06:32:25.240

我真的建议看一下快速入门教程。

[http://quickstarts.asp.net/QuickStartv20/aspnet/Default.aspx](http://quickstarts.asp.net/QuickStartv20/aspnet/Default.aspx)

dot net 中有很多概念可以模拟 UI 上的状态。在您的情况下，我认为您真正想要做的是使用视图状态。会话应谨慎使用，我认为您正在寻找的概念已本地化到页面而不是整个用户会话。

您还应该查看代码隐藏/代码前端的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T06:20:11.293

因为 ASP.NET 是无状态的，所以您假设是正确的。回发将导致页面丢失 iPutName 的变量。存储在会话中是一种选择，或者存储在视图状态中可能是另一种选择。

这里要了解的主要内容是 ASP.NET 页面生命周期是如何工作的，以及每次回发到服务器时会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T06:25:05.133

对于生命周期，请查看以下 URL： [http ://www.eggheadcafe.com/articles/20051227.asp](http://www.eggheadcafe.com/articles/20051227.asp)

您可以通过执行以下操作将您的 iPutName 存储在会话中：

```
Session["iPutName"] = iPutName; 
```

获取会话变量也很容易，但您应该确保进行 NULL 检查，如下所示：

```
if (Session["iPutName"] != null) iPutName = Session["iPutName"]; 
```

尚未对此进行任何测试，但如果您遇到拼写错误......对不起;）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-31T06:07:01.363

您在更新中发布的 URL 绝对不是关于 ViewState 的“所有您想知道的”......甚至没有关闭。我只扫描了他的文章，但他似乎根本没有解决页面生命周期问题。如果您选择查看状态路线，请阅读以下 2 个链接：

[Scott Mitchell 了解 ASP.NET 视图状态](http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic2)

[Dave Reed 真正理解 ViewState](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/truly-understanding-viewstate.aspx)

如果您是 ViewState 的新手，那么请转储所有关于解析链接文章中提到的 ViewState 的废话（文章的一半）。除了高度专业化的场景外，其他任何事情都不需要它。做 re:ViewState 绝对不是一件正常的事情。

# coding-style - 如果我们在代码中只需要一次对象，我们应该创建对象吗？

> ID：696150
> 
> 赞同：1
> 
> 时间：2009-03-30T06:14:18.950
> 
> 标签：coding-style

这是一个编码风格的问题：-

这是案例

```
Dim obj1 as new ClassA

' Some lines of code which does not uses obj1

Something.Pass(obj1) ' Only line we are using obj1 
```

还是应该在将对象作为参数传递时直接初始化对象？

```
Something.new(new ClassA()) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T06:17:01.987

如果您只在该方法调用中使用该对象，最好将“new ClassA()”直接传递到调用中。这样，您将不会有额外的变量，将来有人可能会错误地尝试使用。

但是，为了可读性和调试，创建临时对象并将其传入通常很有用。这样，您可以在调试器中检查变量，然后再将其传递给方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T06:39:08.860

您的问题是“我们应该创建对象吗”；您的两个示例都创建了一个对象。

这两个例子在逻辑上没有任何区别。给一个对象起一个名字允许它在多个地方被引用。如果您不这样做，那么不给它命名会更清楚，因此维护代码的人可以立即看到该对象仅传递给另一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T07:24:21.030

我个人更喜欢一致的事情，让我的生活更轻松（我认为让我的生活更轻松的事情可能不是你认为让你的生活更轻松的事情......所以按照你的建议去做）。

如果你有这样的事情：

```
o = new Foo();
i = 7

bar(o, i, new Car()); 
```

那么你有一个不一致的地方（两个参数是变量，另一个是动态创建的）。为了保持一致，您可以：

*   总是将事物作为变量传递
*   总是传递即时创建的东西

只有其中一个会起作用（第一个！）。

它还有一些实际的方面：制作变量使调试更容易。

这里有些例子：

```
while(there are still lines in the file)
{
    foo(nextLine());
} 
```

如果要显示下一行进行调试，现在需要将其更改为：

```
while(there are still lines in the file)
{
    line = nextLine();
    display(line);
    foo(line);
} 
```

预先设置变量会更容易（也更安全）。它更安全，因为您不太可能意外调用 nextLine() 两次（通过忘记将其从 foo 调用中取出）。

您还可以在调试器中查看“line”的值，而无需进入“foo”方法。

另一个可能发生的情况是：

富（bcd（））；// 在 Java 中，你会在这一行得到 NullPointerException...

“b”或“c”是空的吗？不知道。

```
Bar b;
Car c;
int d;

b = ...;
c = b.c;   // NullPointException here - you know b was null
d = c.d(); // NullPointException here - you know c was null    
foo(d);    // can view d in the debugger without having to go into foo. 
```

一些调试器会让你突出显示“d()”并查看它的输出，但如果“d()”有副作用，那么这是很危险的，因为每次你通过调试器）。

我为此编写代码的方式确实使它更加冗长（例如这个答案:-)，但如果事情没有按预期工作，它也会让我的生活更轻松 - 我花更少的时间想知道出了什么问题，而且我还能够修复错误比我采用这种做事方式之前快得多。

对我来说，编程时最重要的是保持一致。如果您保持一致，那么代码就更容易通过，因为您不必经常弄清楚发生了什么，并且您的眼睛会被代码中的任何“奇怪”所吸引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T06:32:39.593

一般来说，我会说不，你在做什么没有*错*，但听起来你的调用函数、被调用函数和临时对象之间的职责可能有些模糊。也许需要进行一些重构。

# zend-framework - 如何更改 Zend Framework 的包含目录

> ID：696152
> 
> 赞同：3
> 
> 时间：2009-03-30T06:14:30.870
> 
> 标签：zend-framework

我收到以下错误消息：

```
Warning: include_once(Zend\Db.php) [function.include-once]: 
failed to open stream: No such file or directory in 
C:\EasyPHP3\www\VPZ\Lib\Zend_1.7.7\Loader.php on line 83    

Warning: include_once() [function.include]: 
Failed opening 'Zend\Db.php' for inclusion (include_path='VPZ/') in 
C:\EasyPHP3\www\VPZ\Lib\Zend_1.7.7\Loader.php on line 83

Warning: require_once(Zend/Exception.php) 
[function.require-once]: failed to open stream: 
No such file or directory in 
C:\EasyPHP3\www\VPZ\Lib\Zend_1.7.7\Loader.php on line 87

Fatal error: require_once() [function.require]: 
Failed opening required 'Zend/Exception.php' (include_path='VPZ/') in 
C:\EasyPHP3\www\VPZ\Lib\Zend_1.7.7\Loader.php on line 87 
```

* * *

我想包括 ZendXXX\Db.php

如何改变它

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-25T11:36:57.227

创建一个目录（比如“lib”），然后将 Zend 目录放入其中。所以你的目录结构是这样的：

```
- application
- lib
  |- Zend
- wwwroot
  |- index.php 
```

现在您应该将 lib 添加到包含路径中。编辑你的 index.php 文件：

```
$includePath = array();
$includePath[] = '.';
$includePath[] = './../application';
$includePath[] = './../lib';
$includePath[] = get_include_path();
$includePath = implode(PATH_SEPARATOR,$includePath);
set_include_path($includePath); 
```

现在您的包含路径中有您的库。你可以像这样包含所有 Zend 组件：

```
include 'Zend/Loader.php';
require_once 'Zend/Db.php'; 
```

最好的方法是先包含 Zend_Loader，然后用它来加载类。做这个：

```
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Db'); 
```

您还可以注册以自动加载类。只需将这一行添加到您的代码之后：

```
Zend_Loader::registerAutoLoad('Zend_Loader',true); 
```

现在您不需要包含文件来调用类。只是实例化你的类：

$session = new Zend_Session_Namespace('user');

不需要包含“Zend/Session/Namespace.php”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T06:19:06.117

使用`set_include_path()`. [请参阅 PHP.net 文档](http://us2.php.net/set_include_path)

例子：

```
 set_include_path(get_include_path() . PATH_SEPARATOR . '/path/to/Zend'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T06:25:21.203

我通常将框架文件存储在“库”文件夹下：

*   应用
*   public_html
*   图书馆
    *   曾德
    *   常见的
    *   ETC....

然后在我的引导文件或前端控制器中，我将该“库”文件夹添加到包含路径：

```
set_include_path(get_include_path() . PATH_SEPARATOR . '../library'); 
```

也可以看看：

*   [选择应用程序的目录布局](http://framework.zend.com/wiki/display/ZFDEV/Choosing+Your+Application%27s+Directory+Layout)。
*   [创建文件系统布局](http://framework.zend.com/manual/en/zend.controller.html#zend.controller.quickstart.go.directory)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T12:59:53.160

其他建议之所以这么说，是因为这是一个糟糕的举动——换句话说，你做错了。

您可以创建一个子目录并将其命名为 Zend *xxx*，但是您必须将其添加到您的 include_path 中，并在您放置一个新命名的版本时对其进行更改。

我冒险猜测，并说您没有测试网站的好方法（因此您想将其锁定到 ZF 的特定版本），此外，您没有使用修订控制，所以如果您在直接在服务器上更改实时运行的代码时发现问题，您希望站点目录中的所有先前版本的代码都能够返回。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-08-26T06:57:48.127

没有库的项目并且包括来自一个位置的库
项目 C:\xampp\htdocs\my\application
library C:\xampp\Zend\library

在 index.php 中进行更改

```
// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR,  
           array(realpath(APPLICATION_PATH.'/../../../Zend/library'),get_include_path(),))); 
```

# latex - 乳胶\h线间距

> ID：696157
> 
> 赞同：18
> 
> 时间：2009-03-30T06:18:54.383
> 
> 标签：latex

如何在表格中的 \hline 之后添加间距？我可以使用 \vspace 在它之前添加间距，但是如果我尝试在 \hline 之后添加间距，则间距将出现在下一行文本之后。这是我到目前为止所拥有的：

```
\multicolumn{2}{Hello!} \vspace{4pt} \\
\hline \textit{Hi!} & \textit{Ho!} 
```

我不想在 \hline 之后添加换行符并执行 \vspace{-xxpt} 之类的操作或使用 \rule，因为从 Hevea 生成的 HTML 文档会很丑陋。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-03-30T06:43:31.097

创建一个新行`\hline`并用负间距修剪它：

```
\multicolumn{2}{c}{Hello!} \\

\hline & \\[-1.5ex]

\textit{Hi!} & \textit{Ho!} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-30T13:07:19.193

我认为您的问题是当 hlines 在每行之间时，表格中的垂直换行不够大。解决方案是添加

```
\usepackage{tabularx}

\setlength{\extrarowheight}{3pt} 
```

进入你的序言。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-04-01T02:16:24.207

在尝试为自己回答这个问题时，我遇到了来自[https://www.msu.edu/~harris41/latex_tablespacing.html的以下技巧](https://www.msu.edu/%7Eharris41/latex_tablespacing.html)

我使用的是 M456 提到的解决方案，但这与表格环境中的垂直规则不能很好地配合，所以我认为这是一个不好的选择作为默认解决方案（通常我不包括垂直规则，但我的一个为了清晰起见，表格确实需要它们）。

这个想法是定义一个支柱，它应该包含在一个单元格中，用于紧接在 hline 之前或之后的行。

在序言中定义：

```
\newcommand\tstrut{\rule{0pt}{2.4ex}}
\newcommand\bstrut{\rule[-1.0ex]{0pt}{0pt}} 
```

然后使用表中的支柱引入所需的间距：

```
\begin{tabular}{ccc}
\hline\hline
Head 1  & Head 2 & Head 3 \tstrut \bstrut \\
\hline
a1 & a2 &  a3 \tstrut \\
b1 & b2 &  b3 \\
c1 & c2 &  c3 \\
d1 & d2 &  d3 \bstrut \\
\hline\hline
\end{tabular} 
```

（我从网页上稍微调整了支柱尺寸 - 调整它以适合您的口味）

可能有更好的方法来做到这一点，但这看起来足够干净，并且很容易定制。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-30T09:14:20.110

如果您担心 TeX 以外的其他程序的输出，正确的方法是定义一个更高级别的命令或环境来执行您想要的操作，使用定义中的任何脏黑客来使 TeX 输出看起来不错，并定义它的 HTML 含义是分开的（我不知道如何在 Hevea 中做到这一点，但我想任何合理的 TeX 处理器都会有这种设施）。

也许这已经为您解决了：例如[booktabs 是否](http://texcatalogue.sarovar.org/entries/booktabs.html)会在 LaTeX 中生成您喜欢的那种表格？Hevea 能很好地处理 booktabs 命令吗？如果 booktabs 不符合您的要求，那么查看它的源代码可能会很有趣 - 这完全是关于设置行的宽度和间距，以便表格看起来像样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-03-05T05:47:27.663

这可能会有所帮助：

```
\newcommand{\hlinee}{\begin{tabular}{p{\textwidth}}\hline\ \\\end{tabular}} 
```

这里还有另一个：

```
\newcommand{\hlineee}{\begin{tabular}{p{\textwidth}}\hline\ \end{tabular} \\[-2.5ex] } 
```

然后使用例如：

```
foo\\
\hlineee
foo2 
```

Ntg

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T06:30:55.650

不确定这是否适用于表格环境，但您可以尝试在 \hline 周围使用 \minipage：

```
\begin{minipage}{ <width> }
... \hline \vspace{4pt}
\end{minipage} 
```

# asp.net - 网格视图比较

> ID：696166
> 
> 赞同：0
> 
> 时间：2009-03-30T06:22:13.503
> 
> 标签：asp.net, vb.net

我想比较两个网格视图的行。GW1 和 GW2。

当我单击搜索按钮时，我想检查 GW2 中的值，如果 GW1 和 GW2 具有相同的 PayID，EmpID，则必须禁用 GW1 的特定行

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-08T01:59:38.940

```
int i = 0;

while(i < GridView1.Rows.Count && i < GridView2.Rows.Count)
{

if(
GridView1.Rows[i].Cells[column for pay ID].Text == GridView2.Rows[i].Cells[column for pay ID].Text && 
GridView1.Rows[i].Cells[column for emp ID].Text == GridView2.Rows[i].Cells[column for emp ID].Text))
{
GridView1.Rows[i].Enabled = false;
}

i++;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T07:17:44.570

我能想到的唯一方法是遍历表一并在表二中搜索相似的行。您可以这样做：

1.  循环遍历表 1。
2.  使用 DataTable.Select 查找表 2 中是否存在具有相同 PayID 和 EmpID 的行。
3.  如果该方法返回多于 0 行，则禁用这些行。

除此之外，您还可以考虑编写/搜索一种可以为您提供两个表交集的方法。如果这两列是主键，那么这将起作用。如果没有，那么您将需要根据需要调整代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-07T06:21:19.343

做这样的事情，它不是实际的代码，但你会有这个想法。

```
for i=0 to gw1rowscount-1
     for j=0 to gw2rowscount-1

       if gw1(i)(column1)=gw2(j)(column1) and gw1(i)(column2)=gw2(j)(column2) then

       end if

     next
next 
```

# delphi - 如何在 Delphi 应用程序中创建虚拟文件

> ID：696169
> 
> 赞同：2
> 
> 时间：2009-03-30T06:23:01.240
> 
> 标签：delphi, virtualbox

我之前有[一篇](https://stackoverflow.com/questions/680098/delphi-play-memorystream-in-wmp-activex)关于如何在 wmp activex 中播放 memorystream 的帖子，并得到了回复，并附有 boxedapp sdk 的链接。它不是免费软件，所以我研究了这个过程，发现它使用虚拟文件来保存流，并且它的文件名用作 URL。所以，我的问题是如何创建一个返回句柄的虚拟文件，然后应该由 THandleStream 访问该句柄。我正在使用 Delphi 7。谢谢。

关于如何在 wmp activex 或任何播放器中播放 memorystream 的所需过程：

1.  创建一个虚拟文件并返回一个HANDLE；（这是我的问题）
2.  然后这个 HANDLE 被一个 THandleStream 访问；
3.  THandleStream 复制要播放的 MemoryStream 的内容；
4.  播放器（在我的情况下为 wmp activex）访问文件名。
5.  播放器播放它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T12:02:09.503

如果您尝试创建对用户隐藏的内容，正如您的一条评论所暗示的那样，您现在可能会忘记它。不可能。从来没有工作过，也永远不会。你可以让它变得更难，但归根结底，如果计算机能够读取它，足够聪明的黑客可以读取你的代码并复制你的技巧。即使是高度加密的 DRM 方案在被破解之前最多只能持续大约一个月，而且你甚至没有尝试走那么远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T06:49:48.820

[Boxedapp](http://www.boxedapp.com/boxedappsdk/)拦截所有 IO 调用，如果文件是使用其 API (IE BoxedAppSDK_CreateVirtualFile) 创建的，它们将自行处理调用。这不是一件容易的事，你可以看看[detours](http://research.microsoft.com/en-us/projects/detours/)，它是一个拦截框架，但是对于拦截所有的IO调用，祝你好运。

你为什么需要那个？为什么不能将内存流保存到临时文件夹并从那里播放文件？完成后是否需要清理文件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T11:14:36.450

我相信您使用管道功能（来自 msvcrt.dll）：

```
function _pipe(phandles : pointer; psize : uint; textmode : integer) : integer; cdecl; external 'msvcrt.dll' name '_pipe'; 
```

一些伪代码：

```
var
 _handles : array[0..1] of THandle;
begin
  if _pipe(@_handles, size, 0) = -1 then
   Exit;

  FReadHandle := _handles[0];
  FWriteHandle  := _handles[1];

  _write(FVirtualWriteHandle, Buffer, size);

  close(FWriteHandle);
  close(FReadHandle);

end; 
```

# java - 没有打开窗口的Java Keylistener？

> ID：696170
> 
> 赞同：5
> 
> 时间：2009-03-30T06:23:01.317
> 
> 标签：java, keylistener

我正在尝试在 Java 中创建一个自动点击器（只有我知道的语言，我刚刚学习了线程）。我想让小程序在它自己的窗口中打开（而不是在网页上），并且我希望能够在不选择窗口的情况下使用空格键启动和停止程序，以便我可以在另一个程序上使用自动点击器并且能够在没有 alt-f4 一堆东西的情况下阻止它。

你有什么可以推荐给我的，可以帮助我吗？或者你有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-12-09T02:49:30.227

迟到的答案，但希望有帮助:)

您可以使用 JNA，这简直是小菜一碟！！

1.  获取 JNA (jna.jar)
2.  在表单中为 User32 (User32.dll) 创建您自己的映射

    ```
    公共接口 User32 扩展 StdCallLibrary {
    User32 INSTANCE = (User32) Native.loadLibrary("User32", User32.class, Options.UNICODE_OPTIONS);

    // dwWakeMask 常量
    公共静态最终int QS_ALLEVENTS = 0x04BF；
    公共静态最终 int QS_ALLINPUT = 0x04FF;
    公共静态最终 int QS_ALLPOSTMESSAGE = 0x0100;
    公共静态最终 int QS_HOTKEY = 0x0080;
    公共静态最终 int QS_INPUT = 0x407;
    公共静态最终int QS_KEY = 0x0001；
    公共静态最终 int QS_MOUSE = 0x0006;
    公共静态最终 int QS_MOUSEBUTTON = 0x0004;
    公共静态最终int QS_MOUSEMOVE = 0x0002；
    公共静态最终int QS_PAINT = 0x0020；
    公共静态最终 int QS_POSTMESSAGE = 0x0008;
    公共静态最终int QS_RAWINPUT = 0x0400；
    公共静态最终 int QS_SENDMESSAGE = 0x0040;
    公共静态最终int QS_TIMER = 0x0010；

    公共静态最终 int INFINITE = 0xFFFFFFFF;

    /*
    DWORD WINAPI MsgWaitForMultipleObjects(
    __in DWORD nCount,
    __in const HANDLE *pHandles,
    __in BOOL bWaitAll,
    __in DWORD dwMilliseconds，
    __in DWORD dwWakeMask
    );*/

    int MsgWaitForMultipleObjects(int nCount, Pointer pHandles, boolean bWaitAll, int dwMilliSeconds, int dwWakeMask);

    /* fsModifiers 值 */
    公共静态最终 int MOD_ALT = 0x0001;
    公共静态最终 int MOD_CONTROL = 0x0002;
    公共静态最终 int MOD_NOREPEAT = 0x4000;
    公共静态最终 int MOD_SHIFT = 0x0004;
    公共静态最终 int MOD_WIN = 0x0008;

    /* BOOL WINAPI 注册热键（
    __in_opt HWND hWnd,
    __in int id,
    __in UINT fsModifiers,
    __in UINT vk
    );
    */
    boolean RegisterHotKey(指针 hWnd, int id, int fsModifiers, int vk);
    }

    ```

3.  只需查看以下页面，即可清楚了解幕后工作的原理：

h**p://msdn.microsoft.com/en-us/library/ms646309%28VS.85%29.aspx

h**p://msdn.microsoft.com/en-us/library/ms684242%28VS.85%29.aspx

1.  检查此页面以查看可以注册回调的关键常量是什么

h**p://msdn.microsoft.com/en-us/library/dd375731%28v=VS.85%29.aspx

1.  像这样创建一个测试程序：

```
用户 32 用户 32 = 用户 32.实例；
boolean res = user32.RegisterHotKey(Pointer.NULL, 9999, User32.MOD_ALT | User32.MOD_CONTROL, WINUSER.VK_LEFT);
如果（！res）
  System.out.println("无法注册热键");

System.out.println("启动和等待");
user32.MsgWaitForMultipleObjects(0, Pointer.NULL, true, User32.INFINITE, User32.QS_HOTKEY);
System.out.println("结尾");

```

User32.INFINITE 是一个未记录的常量，值为 0xFFFFFFFF

很抱歉将 http 链接重命名为 h**p :) Stackoverflow 规则 Stefano

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T20:00:19.277

这可能超出了 Java 小程序的范围。事实上，全局键盘挂钩绝对超出了简单使用 Java 的范围，但我可以帮助您朝着正确的方向前进。

不过，你有一些希望。我将向您指出[JNI（Java Native Interface）](http://java.sun.com/docs/books/jni/)的方向，这将允许您使用本机库。现在，既然您想留在 Java 世界中，我建议您不要直接使用 JNI，因为您将不得不编写一些令人困惑的本机代码（通常是 C、C++）。JNI 有几个包装器允许您使用这些函数，但是本地实现被抽象掉了，但是其中很多都需要花钱。

* * *

所以我认为对你来说最好的解决方案是[JNA (Java Native Access)](https://github.com/twall/jna/)。这允许您从 Java 中直接调用本机库。（注意：实现不会是跨平台的。您必须为 Windows、Linux 等单独实现。）项目网站上的示例中有一个很好的 Windows 键盘挂钩示例。

至于不是在网页中打开它自己的窗口，您是否希望小程序不在浏览器中运行而是在其自己的单独进程中运行，或者只是在单独的窗口中并且仍然依赖于打开的浏览器窗口？

*   如果您只想启动一个新窗口并且仍然需要打开浏览器，那么这里有一个很好的例子：

    ```
    final Frame window = new Frame("This is the Frame's Title Bar!");
    window.add(new Label("This is the Frame."));
    window.setSize(300,200);
    window.setVisible(true);

    window.addWindowListener(new WindowAdapter(){
        public void windowClosing(WindowEvent we){
            window.dispose();
        }
    }); 
    ```

*   如果您希望小程序生成一个新进程并在不需要浏览器的情况下运行，请查看[JavaFX](http://www.sun.com/software/javafx/)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-03-19T08:03:05.603

我认为您可以使用`setVisible(false)`方法来做到这一点。窗口将在那里，但用户将无法看到它。

# java - 在 Java 中为我自己的语言语法生成解析器的最佳工具是什么？

> ID：696180
> 
> 赞同：3
> 
> 时间：2009-03-30T06:26:53.197
> 
> 标签：java, parsing, programming-languages, antlr

我正在开发一种主要基于 C99 标准的小型编程语言，并且我已经用 java 编写了一个相当不错的词法分析器，现在我正在寻找从语法生成一个 Java Parser。我知道有[Bison](http://www.gnu.org/software/bison/)，但这似乎只生成 C 代码。我正在寻找一个应用程序，它允许我输入我的语法并在 java 代码中创建一个完整的解析器类。阅读有关相关主题的其他 SO 帖子，我找到了 ANTLR，但我想知道 SO 中是否有人知道更好的工具？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T06:30:03.657

另一对要查看的是[JavaCC](https://javacc.dev.java.net/)和[SableCC](http://sablecc.org/)（我已经很久没有查看 SableCC 了）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T07:25:36.470

[BNFC](http://www.cs.chalmers.se/Cs/Research/Language-technology/BNFC/)给我留下了深刻的印象，它能够在 Java 以及 C、C++、C#、F#、Haskell 和 OCaml 中生成解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T13:51:57.617

[http://jflex.de](http://jflex.de)上的 JFlex 主页指出了在哪里可以找到可以针对 Java 的类似 Bison 的工具：

[http://byaccj.sourceforge.net/](http://byaccj.sourceforge.net/) [http://www2.cs.tum.edu/projects/cup/](http://www2.cs.tum.edu/projects/cup/) [http://www.antlr.org/](http://www.antlr.org/)

# mysql - 如果条目不存在则创建，否则更新？

> ID：696190
> 
> 赞同：33
> 
> 时间：2009-03-30T06:33:40.293
> 
> 标签：mysql

用这么短的话来说有点奇怪，呵呵。

无论如何，我想要的基本上是更新表中的条目（如果确实存在），否则创建一个用相同数据填充它的新条目。

我知道这很容易，但就我使用它的程度而言，我对 MySQL 还比较陌生：P

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2009-03-30T07:08:31.223

很多开发人员仍然执行查询来检查表中是否存在字段，然后根据第一次查询的结果执行插入或更新查询。尝试使用 ON DUPLICATE KEY 语法，这比执行 2 个查询更快更好。更多信息可以在[这里找到](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

> INSERT INTO table (a,b,c) VALUES (4,5,6) ON DUPLICATE KEY UPDATE c=9;

如果您想为 c 保持相同的值，您可以使用相同的值进行更新

> INSERT INTO table (a,b,c) VALUES (4,5,6) ON DUPLICATE KEY UPDATE c=6;

“替换”和“重复键”之间的区别：

> 替换：插入，或删除和插入
> 
> 在重复键上：插入或更新

如果您的表没有主键或唯一键，则替换没有任何意义。

您还可以使用该`VALUES`函数来避免必须两次指定实际值。例如，而不是

`INSERT INTO table (a,b,c) VALUES (4,5,6) ON DUPLICATE KEY UPDATE c=6;`

您可以使用

`INSERT INTO table (a,b,c) VALUES (4,5,6) ON DUPLICATE KEY UPDATE c=VALUES(c);`

Where`VALUES(c)`将评估为先前指定的值 (6)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-03-30T06:35:58.743

使用“替换成”：

```
 REPLACE INTO table SET id = 42, foo = 'bar'; 
```

在[MySQL 文档中查看更多信息](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-03-30T07:16:45.150

正如其他人所说，`REPLACE`这是要走的路。不过要小心使用它，因为它实际上是在桌子上做 a`DELETE`和。`INSERT`这在大多数情况下都很好，但是如果你有带有类似约束的外键`ON DELETE CASCADE`，它可能会导致一些大问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T06:35:35.343

在 MySQL 手册中查找[REPLACE 。](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。请参见第 12.2.5 节，“INSERT 语法”。
> 
> REPLACE 是对 SQL 标准的 MySQL 扩展。它要么插入，要么删除和插入。对于标准 SQL 的另一个 MySQL 扩展——插入或更新——请参阅 [第 12.2.5.3 节](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)，“INSERT ... ON DUPLICATE KEY UPDATE 语法”。

如果您有以下 INSERT 查询：

```
INSERT INTO table (id, field1, field2) VALUES (1, 23, 24) 
```

这是您应该运行的 REPLACE 查询：

```
REPLACE INTO table (id, field1, field2) VALUES (1, 23, 24) 
```

# vb.net - 如何在 vb.net 中创建组织结构图？

> ID：696197
> 
> 赞同：0
> 
> 时间：2009-03-30T06:36:17.947
> 
> 标签：vb.net

如何在 vb.net 中创建组织结构图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-03T12:37:10.423

使用图形绘制方法中的框和线绘制自己的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-30T15:12:30.490

您可以查看上面链接中提到的我们的组件：

demos @ [http://www.orgchartcomponent.com/demo.aspx](http://www.orgchartcomponent.com/demo.aspx)并从网站上的其他地方下载示例！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-05T10:41:40.097

最简单的方法是使用 TreeView 控件。

它对编写组织结构图有一些限制（无法进行双重报告或矩阵组织），但如果您要表示的组织是分层的，那就可以了。

它不需要任何类型的扩展，如 Visio 或创建您自己的图形：这是我在应用程序中使用它的主要原因。

绘制适当的图标来代表不同级别的组织，并广泛使用工具提示以使其更有用。它可以很容易地放入 SQL 数据库中。

主要信息来源有几个很好的例子：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview(v=VS.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-05T00:39:29.983

如果您有 Visio，则可以使用自动化在 Visio 中创建组织结构图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-05T00:42:39.413

获取 Microsoft Office 的副本并启动 Visio。拖放到您心中的内容。为什么要重新发明轮子？

# delphi - 德尔福进度条

> ID：696199
> 
> 赞同：3
> 
> 时间：2009-03-30T06:36:39.660
> 
> 标签：delphi, progress-bar

我正在尝试制作一个从 0% 开始的进度条，需要 5 秒才能达到 100%。单击 Button1 后，进度条将开始上升。有什么建议吗？我在谷歌上看了看，但这对我没有什么好处。

此外，在 0% 时，应该有一个标签说`Waiting...`，当进度条开始时，它应该转到`Working...`，当它完成时，它应该说`Done!`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-30T06:52:56.207

您可以使用间隔为 50 的计时器，并首先将启用设置为 false。

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  timer1.Enabled := True;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
const
  cnt: integer = 1;
begin
  ProgressBar1.Position := cnt;
  if cnt = 1 then Label1.Caption := 'Waiting...'
  else if cnt = 100 then begin
    Label1.Caption := 'Done!';
    Timer1.Enabled := False;
  end else
    Label1.Caption := 'Working...';
  Inc(cnt);
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T17:28:06.320

使用 GetTickCount() 并初始化变量：

```
uses Windows;

var mseconds, starttime: integer;

procedore TForm1.FormCreate()
begin
  starttime := GetTickCount();
  mseconds := 0;
  Timer1.Enabled := false;
  Label1.Caption := '';
  ProgressBar1.Position := 0;
  Label1.Caption := 'Waiting...';
end;

procedure TForm1.Button1Click(Sender: TObject);
begin  
  ProgressBar1.Min := 0;
  ProgressBar.Max := 100;
  ProgressBar1.Position := 0;
  timer1.Enabled := True;
  Label1.Caption := 'Working...';  
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin  
  mseconds := GetTickCount() - starttime;
  if mseconds < 5000 then
    ProgressBar1.Position := Trunc(mseconds / 50)
  else begin
    ProgressBar1.Position := 100;
    Label1.Caption := 'Done!';
    Timer1.Enabled := false;
  end;
end; 
```

# postgresql - SQL Servfer 的 CONTEXT_INFO 的 PostgreSQL 等价物是什么？

> ID：696200
> 
> 赞同：5
> 
> 时间：2009-03-30T06:36:52.000
> 
> 标签：postgresql, logging, rdbms, audit, dml

关于我的另一个问题[“审计日志删除的最佳方法是什么？”](https://stackoverflow.com/questions/695817/whats-the-best-way-to-audit-log-deletes) . PostgreSQL 相当于`CONTEXT_INFO`什么？

我想使用触发器记录删除，但由于我没有将数据库用户用作我的应用程序的逻辑用户，因此我无法`CURRENT_USER`将触发器代码中的用户记录为删除记录的用户。但是对于`INSERT`并且`UPDATE`可以从触发器记录记录更改，因为您可以在记录中添加一个用户字段，比如`inserted_by`and `last_updated_by`，并使用这些字段记录到审计表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T08:58:43.813

[http://www.postgres.cz/index.php/PostgreSQL_SQL_Tricks_II#Any_other_session_variables](http://www.postgres.cz/index.php/PostgreSQL_SQL_Tricks_II#Any_other_session_variables)

PostgreSQL 提供了更多的变种，请看这个网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-15T04:54:44.563

接受的答案已过时。

在 postgresql 的最新版本中（我认为是 9.3 或 9.4），可以设置/检索配置变量仅在当前会话 [或事务] 中有效。[文档参考](https://www.postgresql.org/docs/current/functions-admin.html)

设置*会话*变量的示例：

```
hal=# select set_config('myvar.foo', 'bar', false);
 set_config 
------------
 bar
(1 row)

hal=# select current_setting('myvar.foo');
 current_setting 
-----------------
 bar
(1 row) 
```

可以`current_setting`像使用其他集合返回函数一样使用该函数。

例子：

```
create table customers (id int);
insert into customers values (1), (2), (3), (4);

select c.*, s.*
from customers c
left join current_setting('myvar.foo') s
       on c.id = length(s) 
```

# windows - 暂时隐藏模式对话框

> ID：696201
> 
> 赞同：0
> 
> 时间：2009-03-30T06:36:56.447
> 
> 标签：windows, winforms, winapi, modal-dialog

我显示了一个模式对话框，主应用程序窗口设置为所有者（如 中`dialog.ShowDialog(mainAppWindow)`），我想暂时允许用户在再次返回模式对话框之前与主应用程序窗口进行交互。

我怎样才能做到这一点？我正在使用 Windows 窗体。

**编辑：** AutoCAD 做得很好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-30T06:38:30.187

那么我不认为你想要一个模态对话框......

模态对话框的全部目的是用户在以某种方式摆脱它之前不能做*任何事情。*我认为您应该只创建自己的表单类以按照您想要的方式行事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-31T01:46:14.873

只需关闭模态对话框。它不会像普通的 Form 实例那样被释放，因此您只需将其 DialogResult 属性设置回 None 并再次调用 ShowDialog() 即可将其恢复活力。

请注意，在模态对话框上调用 Hide() 也会关闭它，因为您的应用程序的所有窗口都被禁用，因此必然如此。与 Close() 没有什么不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T06:43:18.927

看看[http://en.wikipedia.org/wiki/Modal_window#Criticisms](http://en.wikipedia.org/wiki/Modal_window#Criticisms) ...有一种观点认为你不应该首先使用模态窗口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T08:02:21.920

您需要再次启用父窗口。对于模式对话框，Windows 会自动禁用父窗口并在模式对话框关闭时重新启用它。

我没有尝试过，但是将父表单的 Enabled 属性设置为 true 就足够了。如果这不起作用，则使用 E​​nableWindow Win32 API 确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T06:47:45.500

模态/无模式范例是，如果您希望用户能够与主应用程序交互，请使用无模式窗口，如果您不这样做，请使用模式。如果你想阻止他使用主应用程序——然后使用它——然后不使用它——你的用户界面设计不适用于模态/非模态范式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-06-22T10:53:14.870

出于某种原因，我必须在 .NET 中面临同样的问题。我有（主）表单显示模态对话框，我需要隐藏它，与主窗口交互，然后再次返回模态对话框。

从 Windows (API) 的角度来看，我个人不理解后果，但以下解决方案对我有用。

整个技巧在于在显示模式对话框之前将主窗体设置为禁用（当主窗体未明确设置为 Enabled = false 时，隐藏模式对话框后，即使调用 Enabled = true 也无法与它进行交互）。

作为对模态对话框事件（称为 NeedInteraction）的响应，我只是隐藏模态对话框，启用主窗体，在某个循环中与用户进行交互，禁用主对话框并再次显示模态对话框。

```
void ShowDialog()
{
  var dialog = new MyModalForm();
  dialog.NeedInteraction += (sender, eventArgs) =>
  {
    dialog.Hide();
    Enabled = true;

    //wait till user finishes working with main window

    Enabled = false;
    dialog.Show();
  }

  Enabled = false;
  dialog.ShowDialog();
  Enabled = true; //don't forget to make it enabled afterwards
} 
```

它可能不是干净的解决方案（因为不需要隐藏模式对话框），但它至少适用于我的情况。

# qt - Qt中固定大小的不可调整大小的QDialog？

> ID：696209
> 
> 赞同：75
> 
> 时间：2009-03-30T06:42:30.367
> 
> 标签：qt, qdialog

我有一个 Qt 对话框应用程序。现在我不希望该对话框可调整大小。我不确定如何实现这一目标。我尝试了很多东西，但是当对话框启动时，这个对话框仍然可以调整大小。

我应该设置什么属性来禁用对话框/小部件调整大小。

我也试过

```
setSizePolicy(QSizePolicy::Fixed); 
```

但我得到一个错误说..

```
源\nimcac_settingsMain.cpp(36)：错误 C2248：
**'QSizePolicy::QSizePolicy'：无法访问在类'QSizePolicy'中声明的私有成员**
        p:\ThirdPartyExports\Qt\export\4.3\4.3.1f14\include\QtGui\../../src\gui\
kernel\qsizepolicy.h(177) : 参见 'QSizePolicy::QSizePolicy' 的声明
        p:\ThirdPartyExports\Qt\export\4.3\4.3.1f14\include\QtGui\../../src\gui\
kernel\qsizepolicy.h(34) : 见 'QSizePolicy' 的声明

```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2009-07-20T05:42:14.427

您得到的编译错误是因为您尝试传递 a `QSizePolicy::Policy`to `setSizePolicy(QSizePolicy)`，但没有从`QSizePolicy::Policy`（这是一维的策略）到（这是一个包含每个维度（高度、宽度）`QSizePolicy`一个类等的类）的隐式转换`Policy`. `QSizePolicy`不过，无论如何都不适用于顶级小部件（窗口）。

`setFixedSize()`仅当您事先知道对话框的大小时才有效（通常您不知道，更改字体大小和语言会怎样）。你可以做

```
window()->setFixedSize( window()->sizeHint() ); 
```

但使用起来要好得多

```
window->layout()->setSizeConstraint( QLayout::SetFixedSize ); 
```

这让布局确定对话框的大小，但不允许调整大小，我认为这是您所要求的。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-03-30T14:37:28.350

我不知道你是否已经尝试过，但`QWidget::setFixedSize`应该做你想做的

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-10-14T03:18:27.613

```
this->setFixedSize(this->width(),this->height()); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-30T07:33:10.867

您需要更改对话框的 windowFlags 并将其设置为 Qt::MSWindowsFixedSizeDialogHint。

**这仅适用于 windows**。

有关更多信息，请参阅此示例： [http ://doc.qt.digia.com/4.5/widgets-windowflags.html](http://doc.qt.digia.com/4.5/widgets-windowflags.html)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-06-06T12:44:15.780

在 QT Creator 的 UI 编辑器中，单击属性窗口中的顶部对象，然后在 Layout 部分的底部滚动。您应该看到 layoutSizeConstraint 属性。

设置`layoutSizeConstraint`为`SetFixedSize`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-02T21:18:53.093

如果您使用 QtCreator（当然是），您可以将属性 Horizo​​ntalsizePolicy 设置为 fixed，并将 Vertical Policy 也设置为 Fixed。然后您可以将 maximumSize 设置为您想要的尺寸。窗口不会再次最大化。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-01T00:54:40.810

在代码中你可以做这样的事情，

```
Dialog->resize(581, 292);
QSizePolicy sizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
sizePolicy.setHorizontalStretch(0);
sizePolicy.setVerticalStretch(0);
sizePolicy.setHeightForWidth(WaterLevelEditorDialog->sizePolicy().hasHeightForWidth());
Dialog->setSizePolicy(sizePolicy);
Dialog->setMinimumSize(QSize(581, 292));
Dialog->setMaximumSize(QSize(581, 292));
Dialog->setSizeGripEnabled(false); 
```

在 QtCreator 中执行以下操作，

1.  选择对话框小部件
2.  在对象窗口中找到对话框小部件
3.  在对象窗口中，右键单击对话框对象以弹出菜单
4.  从菜单中选择“尺寸约束”->“设置最大尺寸”
5.  再次右键单击对话框对象以弹出菜单
6.  选择“尺寸约束”->“设置最小尺寸”
7.  在属性窗口中，
    *   确保“sizePolicy”->“Horizo​​ntal Policy”的值为“Fixed”
    *   确保“sizePolicy”->“Vertical Policy”的值为“Fixed”
    *   确保未选中“sizeGripEnabled”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-03-08T11:36:59.243

从 Qt 文档中，`setSizePolicy()`方法要么接受零个参数，要么接受两个参数，但不能是一个参数。这就是您收到此编译错误的原因。根据我的实验，如果您不设置固定大小。这种方法没有用。窗口仍然可以调整大小。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-02T20:43:07.823

一种更简单的方法是将最大尺寸设置为 0。

```
this->setMaxiumSize(QSize(0, 0)); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-19T09:48:51.187

如果您在 QML 中设计 UI 并使用 QDeclarativeView 启动，请尝试以下代码。

```
QScopedPointer<QmlApplicationViewer> viewer(QmlApplicationViewer::create());
.
.
.
//To make the window non-resizable
viewer->setFixedSize(viewer->width(),viewer->height()); 
```

这里的 QmlApplicationViewer 是从 QDeclarativeView 派生的。

# web-applications - 使用 OpenID 还是不使用？

> ID：696210
> 
> 赞同：8
> 
> 时间：2009-03-30T06:42:30.957
> 
> 标签：web-applications, login, openid

我是这个网站的新手，但我已经阅读了规则并搜索了问题部分，但没有发现任何相关问题得到了很好的回答。
无论如何，问题是：优点是什么。＆缺点。在网站上使用 OpenID 而不是常规登录系统？我的客户希望我在本地销售系统中使用这种登录名，我不知道，为什么！？提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-30T06:49:54.700

OpenId 由 Stackoverflow 实现。由于您刚刚注册，您可能已经亲身体验了这些好处。

基本上，它可用于允许用户在不创建帐户或向您发送任何个人信息的情况下登录网站。只要他们拥有您网站支持的 OpenId 提供商（例如 Google）的帐户，他们就可以简单地使用他们的 google 用户名和密码通过您的网站登录。这可以提高客户保留率并减少用户因忘记密码而离开的可能性。

以下是 37signals.com 的概述，解释了 OpenId 对其应用程序的好处：[http ://www.37signals.com/openid/](http://www.37signals.com/openid/)

当然，您可以在以下网址找到更多信息：http: [//openid.net/](http://openid.net/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-30T07:14:58.977

我想不出任何*不*使用它的理由，但有些事情你应该考虑。

我建议提供 OpenID 作为**替代**机制，主要是因为缺乏用户意识。许多开发人员不熟悉它，所以用户肯定不会，当他们在注册/登录页面上看到 OpenID 请求他们的谷歌或雅虎登录名/密码时，这会让他们感到困惑（什么是 OpenID？我的谷歌登录有什么与购买烤面包机有关吗？）。因此，他们将被带到 Google 或其他网站，以确认他们希望允许您的网站访问他们的登录数据，这可能会使他们更加困惑（这些人是否可以访问我的 gmail？）。从安全的角度来看，据我所知，您的网站可能正在存储我的谷歌登录数据，我可能会因为信任问题而放弃登录或购买。

因此，根据网站的性质，可能建议将登录/密码系统放在前面，将 openID 放在侧面。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T07:43:17.880

尽管对于我们这些技术人员来说，OpenID 的好处非常明显，但普通用户有时会发现很难掌握使用一个站点的登录名登录到另一个站点的想法。他们只是习惯于为他们开始使用的网站创建一个帐户。

主要问题是用户并不完全了解 OpenID 是什么。在可用性研究的帮助下，通过推广 OpenID 登录作为提供他们已有帐户（如 Yahoo、GMail 或 MS Passport 帐户）凭据的可能性来解决这个问题，因为他们的运营商最近已成为 OpenID 提供者。正如雅虎[所说](http://developer.yahoo.com/openid/bestpractices.html)，“推广实用性，而不是技术”。

当然，重要的是要强调他们不必再拥有另一个帐户和另一个密码来记住（或贴上另一个便利贴；））并且消费站点没有任何方法来存储提供者的凭证数据。这应该足以让他们信服。

但是由于提供 openid 登录的网站的性质不同，我不愿意用它登录到我的银行帐户。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T18:56:12.847

**不**使用 OpenID 的一个原因是安全性。

如果用户使用第三方 OpenID 提供商（Google、Yahoo 等），则有权访问该提供商的恶意员工*可以*获取登录信息并利用用户的帐户。

在设计用于管理客户重要服务的内部应用程序时，我遇到了这种情况。OpenID 非常有吸引力，因为用户已经熟悉外部服务（似乎每个人都有 gmail 或 yahoo 帐户）。不利的一面是，任何漏洞利用都可能导致数十万美元的收入损失。

解决方案是实施对用户透明且 OpenID 提供商无法利用的附加安全层：应用程序的登录屏幕只能从公司网络内部访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T19:13:19.757

您应该知道，openID 可能更容易受到网络钓鱼的攻击，因为用户对此知之甚少。如果恶意站点假装实现了 openID，但将登录尝试转发到其控制下的恶意站点（例如模仿 Google 登录），则它可以在所有 openID 站点上访问该钓鱼用户的帐户。因此，如果您使用 openID，可能会有更高的概率出现 bot 和恶意用户，也可能不会。

这将如何在实践中发挥作用以及它是否会成为一个有效的安全问题是任何人的猜测。我相信对 openID 标准也有一些提议的更改，以尝试减轻这些攻击，尽管我不知道细节。

# c# - Windows 窗体 StatusStrip 控件中的纯图像

> ID：696215
> 
> 赞同：11
> 
> 时间：2009-03-30T06:44:49.097
> 
> 标签：c#, .net, winforms, visual-studio-2008, controls

我正在尝试将纯图像放在`System.Windows.Forms.StatusStrip`控件上（Visual Studio 2008，C# .Net 3.5）。

我记得在早期的框架版本中能够很容易地做到这一点，但由于某种原因，这个新的 StatusStrip 提供给我的唯一控件是 a `StatusLabel`、 a `ProgressBar`、 a`DropDownButton`和 a `SplitButton`。

我`SplitButton`目前正在使用该控件，因为它可以让我包含图像，但它显然并不理想，因为它附加了菜单下拉菜单。

有没有办法可以向此`StatusStrip`控件添加纯图像？我应该使用不同的 Windows 窗体控件吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-30T07:48:05.713

添加 StatusLabel 控件并使用 Image 属性。

# c# - C# 中是否存在 __LINE__ __FILE__ 等价物？

> ID：696218
> 
> 赞同：52
> 
> 时间：2009-03-30T06:45:20.717
> 
> 标签：c#, logging

用于记录目的

```
__LINE__ 
__FILE__ 
```

是我在 C/C++ 中的朋友。在 Java 中，为了获得这些信息，我必须抛出一个异常并捕获它。为什么在现代编程语言中如此忽视这些旧备用？它们的简单性有一些神奇之处。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-07-12T18:41:17.087

[调用方信息](http://msdn.microsoft.com/en-us/library/hh534540%28v=vs.110%29.aspx)已添加到 .NET 4.5。这将被编译，与手动检查堆栈跟踪相比有了很大的改进。

```
public void Log(string message,
        [CallerFilePath] string filePath = "",
        [CallerLineNumber] int lineNumber = 0)
{
    // Do logging
} 
```

只需以这种方式调用它。编译器会为你填写文件名和行号：

```
logger.Log("Hello!"); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-03-30T06:50:03.840

[它更丑陋，但你可以在 C# 中使用StackTrace](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stacktrace)和[StackFrame](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stackframe)类做这样的事情：

```
StackTrace st = new StackTrace(new StackFrame(true));
Console.WriteLine(" Stack trace for current level: {0}", st.ToString());
StackFrame sf = st.GetFrame(0);
Console.WriteLine(" File: {0}", sf.GetFileName());
Console.WriteLine(" Method: {0}", sf.GetMethod().Name);
Console.WriteLine(" Line Number: {0}", sf.GetFileLineNumber());
Console.WriteLine(" Column Number: {0}", sf.GetFileColumnNumber()); 
```

当然，这会带来一些开销。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-05-23T15:31:01.653

使用[调用方信息](https://msdn.microsoft.com/en-us/library/hh534540(v=vs.110).aspx)（在 .NET 4.5 中引入），您可以在 C#中创建等效的`__LINE__`and ：`__FILE__`

```
static int __LINE__([System.Runtime.CompilerServices.CallerLineNumber] int lineNumber = 0)
{
    return lineNumber;
}
static string __FILE__([System.Runtime.CompilerServices.CallerFilePath] string fileName = "")
{
    return fileName;
} 
```

唯一要记住的是这些是函数而不是编译器指令。

例如：

```
MessageBox.Show("Line " + __LINE__() + " in " + __FILE__()); 
```

如果您要在实践中使用它，那么我建议您使用不同的名称。我使用 C/C++ 名称只是为了更清楚地说明它们返回的内容，以及类似`CurrentLineNumber()`并且`CurrentFileName()`可能是更好的名称。

与使用调用者信息的任何解决方案相比，使用调用者信息的优势`StackTrace`在于行和文件信息可用于调试和发布。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-03-30T06:47:38.107

最接近这些的是您可以创建一个`StackTrace`对象并在堆栈顶部找到方法的名称，因此您可以接近`__FUNCTION__`宏的功能。

```
StackTrace stackTrace = new StackTrace();           
StackFrame[] stackFrames = stackTrace.GetFrames();  

foreach (StackFrame stackFrame in stackFrames)
    Console.WriteLine(stackFrame.GetMethod().Name); 
```

为了减少手动输入的成本以及运行时代码，您可以编写一个辅助方法：

```
[Conditional("Debug")]
public void LogMethodName()
{
    Trace.WriteLine("Entering:" + new StackTrace().GetFrame(1).GetMethod().Name);
} 
```

请注意我们如何获得第 1 帧，因为第 0 帧将是`LogMethodName`它本身。通过将其标记为 Conditional("Debug") 我们确保从发布版本中删除代码，这是避免可能不需要的运行时成本的一种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T06:50:16.133

因为堆栈跟踪包含您需要的大部分内容。它不会给你文件名，但会给你类/方法名。它还包含行号。它不会被忽视，它是自动的。你只需要像在 Java 中那样抛出一个异常

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-30T06:50:19.177

这是获取行号的一种方法：[http ://askville.amazon.com/SimilarQuestions.do?req=line-numbers-stored-stack-trace-C%2523-application-throws-exception](http://askville.amazon.com/SimilarQuestions.do?req=line-numbers-stored-stack-trace-C%2523-application-throws-exception)

如果您使用 log4net，您可以在日志中获取行号和文件名，但是：

*   它可以减少你的应用程序。表现
*   您必须将 .PDB 文件与您的程序集一起使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-30T07:13:43.737

已经有一些建议可以实现您想要的。使用 StackTrace 对象或更好的 log4net。

*在 Java 中，为了获得这些信息，我必须抛出一个异常并捕获它。*

这并不完全正确。你也可以在不抛出异常的情况下拥有它。看看 log4j。它甚至会记录您的方法和类名称，而不会使用包含当前方法名称的硬编码字符串污染您的代码（至少我在某些情况下见过这种情况）。

*为什么在现代编程语言中如此忽视这些旧备用？*

Java 和 C# 不使用（在后者中：过度使用）预处理器。而且我认为这很好。滥用预处理器来制作不可读的代码非常容易。如果程序员*可以*滥用某些技术......他们*会*滥用它。

只是关于性能的注释，这很可能是下一件事，它会在您的脑海中弹出：

如果您使用 StackTrace 或 log4net，您总是会读到或听到它很慢，因为它使用反射。我正在使用 log4net，但我从未遇到过日志记录作为性能瓶颈。如果是这样，我可以声明式地停用（部分）日志记录——而不更改源代码。与删除 C/C++ 代码中的所有日志记录行相比，这简直太美了！（此外：如果性能是主要目标，我会使用 C/C++ ...尽管有 Java 和 C#，但它永远不会消亡。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-26T01:47:07.820

多年来我一直使用 FILE 和 LINE 宏来登录 C/C++，我真的想要在 C# 中使用类似的解决方案。这是我的解决方案。我更喜欢 @fostandy 建议使用不同数量的参数创建许多重载。这似乎不那么具有侵入性，并且不限制格式化参数的数量。您只需要愿意接受在每个 Log.Msg() 调用开始时添加的 FL() 参数。

```
using System;
using System.Runtime.CompilerServices;

namespace LogFileLine
{
    public static class F
    {
        // This method returns the callers filename and line number
        public static string L([CallerFilePath] string file = "", [CallerLineNumber] int line = 0)
        {
            // Remove path leaving only filename
            while (file.IndexOf("\\") >= 0)
                file = file.Substring(file.IndexOf("\\")+1);

            return String.Format("{0} {1}:", file, line); 
        }
    }

    public static class Log
    {
        // Log a formatted message. Filename and line number of location of call
        // to Msg method is automatically appended to start of formatted message.
        // Must be called with this syntax:
        // Log.Msg(F.L(), "Format using {0} {1} etc", ...);
        public static void Msg(string fileLine, string format, params object[] parms)
        {
            string message = String.Format(format, parms);
            Console.WriteLine("{0} {1}", fileLine, message);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            int six = 6;
            string nine = "nine";
            string dog = "dog";
            string cat = "cats";

            Log.Msg(F.L(), "The {0} chased the {1} {2}", dog, 5, cat);

            Log.Msg(F.L(), "Message with no parameters");

            Log.Msg(F.L(), "Message with 8 parameters {0} {1} {2} {3} {4} {5} {6} {7}",
                1, 2, 3, "four", 5, 6, 7, 8.0);

            Log.Msg(F.L(), "This is a message with params {0} and {1}", six, nine);
        }
    }
} 
```

这是上面这段代码的输出

```
Program.cs 41: The dog chased the 5 cats
Program.cs 43: Message with no parameters
Program.cs 45: Message with 8 parameters 1 2 3 four 5 6 7 8
Program.cs 48: This is a message with params 6 and nine 
```

# jquery - jQuery portlet 和对话框问题

> ID：696220
> 
> 赞同：2
> 
> 时间：2009-03-30T06:46:45.207
> 
> 标签：jquery, dialog, jquery-ui-sortable, portlet

我创建可排序元素并在每个 portlet 上附加一个单击事件以打开对话框，但是当我打开（将更多 portlet 拖到主仪表板）并单击设置链接（在 portlet 的标题上）时，alert() （我为测试目的设置）总是为主仪表板上的每个 portlet 触发，为什么会发生这种情况？

下面是我用来设置可排序的代码，它从另一个可排序的接收元素（您可以看到左侧的元素）。

您可以在此网址上看到一些屏幕截图：[http ://wildanm.wordpress.com/2009/03/25/ofc-reloading-problem-on-jquery-sortable-elements/](http://wildanm.wordpress.com/2009/03/25/ofc-reloading-problem-on-jquery-sortable-elements/)

如果您需要 HTML 标记，我稍后也会发布..

顺便说一句，我是 jQuery 的新手 ..

谢谢！

```
$(function() {
   var param ; //additional param to the a portlet ; later
   var title = ""; //title for prototyping only

   $("#maincontent .column").sortable({
       connectWith: ['#maincontent .column'],
       opacity: 0.6,
       scroll: false,
       handle : ".portlet-header",
       receive: function(event, ui) {
         var id = $(ui.item).attr('id');
         var chartId = 'chart-'+id ;

         $("#"+id+" > .portlet-content").flash({
             data: '/swf/open-flash-chart.swf',
             id: chartId,
             name: 'chart-'+id,
             expressInstall: true ,
             flashvars: { 
               'data-file': '/chart/'+id
             },
         })

         $("#"+id).find("span").removeClass("ui-icon ui-icon-arrow-4-diag");
         $("#"+id).addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all")
            .find(".portlet-header")
                .addClass("ui-widget-header ui-corner-all")
                .prepend('<span class="ui-icon ui-icon-close"></span>')
                .prepend('<span class="ui-icon ui-icon-wrench"></span>')
                .prepend('<span class="ui-icon ui-icon-plusthick"></span>')
                .end()
            .find(".portlet-content");

            $("#maincontent .column .portlet-header .ui-icon-plusthick").click(function() {
                $(this).toggleClass("ui-icon-minusthick");
                $(this).parents(".portlet:first").find(".portlet-content").toggle();
            });

            $("#maincontent .column .portlet-header  .ui-icon-wrench").click(function() {
                $("#dialog").css("visibility","visible");
                //dialog            
                 alert($(this).parent('div').attr('id'));
                        $("#dialog").dialog({ 
                            bgiframe: true,
                            autoOpen: false,
                            height: 400,
                            width:300,
                            modal: true,
                            buttons: {
                                'Update Chart': function() {
                                title = $("#title").val();
                                url = "/chart/"+id+"?title="+title+'&id='+id ;
                                  $.getJSON(url,function(data) { jsonData = data ; reloadJsonData() }) ;
                                  function reloadJsonData() {   
                                    data = JSON.stringify(jsonData) ;
                                    tmp = findSWF(chartId);
                                    tmp.load(data);
                                  }
                                  $(this).dialog('close');
                                },
                            Cancel: function() {
                                $(this).dialog('close');
                                }
                            },
                            close: function() {
                            //allFields.val('').removeClass('ui-state-error');
                            }
                        });
                $('#dialog').dialog('open');
            });

            $("#maincontent .column .portlet-header  .ui-icon-close").click(function() {
                $(this).parents(".portlet:first").remove();
            });                
            //resize();             
       },

       start: function(event, ui) {
       },
       stop: function(event, ui) { 
         // Here's the trick:

         $("#maincontent .column").each(function() {
           //alert($(this).sortable("toArray"));
           //$(this).resizable();
         })
       }
     })

$("#maincontent .column .portlet").addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all")
.find(".portlet-header")
    .addClass("ui-widget-header ui-corner-all")
    .prepend('<span class="ui-icon ui-icon-close"></span>')
    .prepend('<span class="ui-icon ui-icon-plusthick"></span>')
    .end()
.find(".portlet-content");

$("#maincontent .column .portlet-header .ui-icon").click(function() {
    $(this).toggleClass("ui-icon-minusthick");
    $(this).parents(".portlet:first").find(".portlet-content").toggle();
});

$("#maincontent .column .portlet-header  .ui-icon-close").click(function() {
    $(this).parents(".portlet:first").remove();
});

$("#maincontent .column").disableSelection();

});

   function findSWF(movieName) {
        if (navigator.appName.indexOf("Microsoft")!= -1) {
            return window[movieName];
        } else {
            return document[movieName];
        }
    } 
```

**更新 ：**

感谢凯尔的回答，

在重新检查我的代码并尝试您提出的更改后，我认为主要问题是我们如何告诉对话框他的父元素（他来自哪个 portlet）。在上面的代码中，单击更新按钮后，受影响的 portlet 始终是我放到主区域的第一个 portlet ..，我希望我的解释对您来说足够清楚 ..，谢谢！

顺便说一句，这是单个 portlet 的标记：

```
<div id="gambarTigaSatu" class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" style="opacity: 1;">
        <div class="portlet-header ui-widget-header ui-corner-all">
               <span class="ui-icon ui-icon-plusthick"/>
               <span class="ui-icon ui-icon-wrench" id="setup-gambarTigaSatu"/>
               <span class="ui-icon ui-icon-close"/>
               <span class=""/>SDM yang Terlibat Kegiatan Penelitian dan Pengabdian Masyarakat (Valid)
       </div>

       <div class="portlet-content">
              <object width="320" height="180" data="/swf/open-flash-chart.swf" type="application/x-shockwave-flash" style="vertical-align: text-top;"  
        name="chart-gambarTigaSatu" id="chart-gambarTigaSatu"><param value="data-file=/chart/gambarTigaSatu" name="flashvars"/>
             </object>
       </div>
</div> 
```

ui-icon-wrench id 是自动添加的，目前仅用于测试，我尝试遍历 dom，并从那里获取对象元素的 id。对象元素也是使用 swfobject 自动生成的，你可以看到上面的代码..（顺便说一句，答案的评论仅限于 300 个字符，所以我在这里发布）

最好的祝福，

维尔丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T15:21:21.053

我不确定我是否完全理解您的问题，但是，我认为您想说的是，当您拖动 portlet 时，它应该将单击事件侦听器绑定到您的“设置”（扳手）按钮portlet 以便在单击它时弹出一个对话框。而且，您是说当您单击该扳手时，会弹出一个对话框，显示您的*所有*portlet，而不仅仅是您单击其中的按钮的那个。

如果是这种情况，则可能是您多次绑定该扳手，以便在单击它时，它的行为就像多次单击它一样。我给你的唯一建议是，不要使用“点击”方法，而是使用“绑定”方法。

这就是我的意思......不要这样做：

```
$("#maincontent .column .portlet-header  .ui-icon-wrench").click(function() {
    // do stuff here
}); 
```

改为这样做，看看它是否有任何不同：

```
$("#maincontent .column .portlet-header  .ui-icon-wrench").unbind('click').bind('click',function() {
    // do stuff here
}); 
```

如果这没有帮助，请告诉我，我会看看是否可以进一步帮助您。

**更新：** 好的，所以我想我现在可能明白你的问题了……当那个扳手被点击时，它会弹出一个对话框，在那个对话框中你可以对某个 portlet 进行更改。但是，您不知道如何让对话框知道它应该在更新时影响哪个 portlet。

因此，在那张纸条上，您可以执行以下操作：

```
 $("#maincontent .column .portlet-header  .ui-icon-wrench").unbind('click').bind('click',function() {
     var portlet_to_edit = $(this).parents('.portlet').attr('id');
 $("#dialog").css("visibility","visible");
 $('#dialog').data('my_app.portlet_to_edit',portlet_to_edit);
 $("#dialog").dialog({
        // some of your stuff here...
        buttons: {
    'Update Chart': function() {
        var portlet_to_edit_id = $(this).data('my_app.portlet_to_edit');
        var portlet_to_edit = $('#'+portlet_to_edit_id);
                    // Do stuff with 'portlet_to_edit', for instance:
                    portlet_to_edit.find('.portlet-content').remove();
                    // ... or whatever you wanted to do...
            },
            // the rest of your buttons and stuff
        }
    });
    $('#dialog').dialog('open');
}); 
```

给你的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-12T16:19:34.660

好吧，我认为答案很简单，只需使用 $(this) 以便仅针对该特定 portlet 触发事件句柄。这是我在 JQuery 体验中遇到的问题。

# c# - 将winforms网格绑定到亚音速类.Net

> ID：696234
> 
> 赞同：0
> 
> 时间：2009-03-30T06:52:50.637
> 
> 标签：c#, .net, winforms

我正在尝试将 winforms 网格绑定到 subsonic DB Generated 类。我来自 ASP.Net 背景，这可以完美运行，但是当我尝试使用 Win Forms 执行此操作时，它永远不会加载数据并且不允许我编辑或更新。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-09T06:42:39.990

我通过反复试验发现，最好的方法是在需要数据之前通过表单加载事件或任何其他此类事件中的代码加载数据。

此外，一旦加载集合，它应该绑定到您正在使用的数据源的数据源属性。

# cl.exe - GRETA 正则表达式库入门

> ID：696236
> 
> 赞同：1
> 
> 时间：2009-03-30T06:53:39.263
> 
> 标签：cl.exe, greta

我需要在 Microsoft Research 提供的 GRETA 正则表达式库上工作。`cl.exe`使用Visual Studio 2008 提供的示例程序时，我无法编译和运行示例程序。它给出了一些错误，例如：

```
D:\greta\greta-2.6.4>cl /EHsc num_match.cpp
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.21022.08 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

    num_match.cpp
    d:\greta\greta-2.6.4\restack.h(355) : warning C4346: 'regex::hetero_stack<Alignm
    entT,RuntimeTypeCheckT,AssumePodT,DynamicBlockSizeT,StaticBlockSizeT>::stack_nod
    e::header' : dependent name is not a type
            prefix with 'typename' to indicate a type
            d:\greta\greta-2.6.4\restack.h(854) : see reference to class template in
    stantiation 'regex::hetero_stack<AlignmentT,RuntimeTypeCheckT,AssumePodT,Dynamic
    BlockSizeT,StaticBlockSizeT>' being compiled
    d:\greta\greta-2.6.4\restack.h(355) : error C2923: 'regex::hetero_stack<Alignmen
    tT,RuntimeTypeCheckT,AssumePodT,DynamicBlockSizeT,StaticBlockSizeT>::aligned_siz
    eof' : 'regex::hetero_stack<AlignmentT,RuntimeTypeCheckT,AssumePodT,DynamicBlock
    SizeT,StaticBlockSizeT>::stack_node::header' 
```

它不是参数“T”的有效模板类型参数。

任何人都可以帮助我开始使用 GRETA 吗？

# java - Java：“控制”外部应用程序

> ID：696238
> 
> 赞同：0
> 
> 时间：2009-03-30T06:55:40.397
> 
> 标签：java, firefox

是否可以以编程方式从 Java 启动应用程序，然后向其发送命令并接收程序的输出？

我正在尝试实现这种情况：

我想访问一个使用大量 javascript 和特殊 html + css 功能的网站 -> 该网站未正确显示在 swt.browser 或任何其他可用的浏览器小部件中。但是网站可以在firefox中显示没有任何问题。所以我想运行一个隐藏的Firefox实例，加载网站并获取数据。（如果 FF 可以嵌入到 JFrame 左右就好了..）

有人知道如何实现这一点吗？任何帮助将不胜感激！

编辑：该网站加载了一些 Javascript 来执行一些 html 魔术并加载一些图片。当我只从网站上阅读 html 时，我只看到一些 JavaScript 调用。但是当网站在浏览器中加载时，它会显示一些覆盖有文本的图像。这就是我试图向我的应用程序用户展示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T07:11:24.210

要从应用程序中启动 Firefox，您可以使用：

```
Runtime runtime = Runtime.getRuntime();
try {
    String path = "/path/to/firefox";
    Process process = runtime.exec(path + " " + url);
} catch (IOException e) {
    // ...
} 
```

要在进程启动后对其进行操作，通常可以使用*process.getInputStream()*和*process.getOutputStream()*，但这对 Firefox 没有帮助。

除了尝试在应用程序和浏览器实例之间直接交互之外，您可能应该寻找解决特定问题的方法。考虑将整个界面移动到 Java gui 中，或者从头开始做一个 Web 应用程序——而不是一半一半。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T07:24:20.733

请参阅这篇[文章](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)- 它将教您如何启动进程、读取其输出并写入其输入流。

但是，此解决方案可能不是最适合您的问题。您需要从网页中获取哪些类型的数据？用 HTTP GET 读取 html 然后用 Html 解析器解析会更好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T11:57:59.310

如果您有可用的文本模式浏览器（如 linux 上的 links2），您可能想看看*它*渲染页面的效果如何。例如，命令“links -dump [http://someurl.com](http://someurl.com) ”会将页面格式化为文本并立即退出，从而生成可以使用 Ray Myers 和 kgiannakakis 建议的方法轻松解析的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T12:23:55.567

如果网站是静态的，您可以使用像[Jericho](http://jerichohtml.sourceforge.net/doc/index.html)这样的网络抓取工具来加载 URL、解析 HTML 并在 DOM 中浏览您需要的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T19:02:12.303

尽管未来[**计划**](http://www.pcpro.co.uk/news/250343/taskfox-commanding-firefoxs-future.html)[为 FireFox](http://www.pcpro.co.uk/news/250343/taskfox-commanding-firefoxs-future.html)[提供与您所描述的功能类似的功能](http://www.pcpro.co.uk/news/250343/taskfox-commanding-firefoxs-future.html)**，但它尚不可用。该功能被称为[TaskFox](https://wiki.mozilla.org/Taskfox)，在链接的 wiki 中，“它的目的是让用户快速访问信息并执行通常需要几个步骤才能完成的任务。”**

 **事实上，即将推出的 TaskFox 功能的消息今天刚刚爆出。也许您应该考虑将职业视为通灵者而不是程序员。

# javascript - 类方法不能访问属性

> ID：696241
> 
> 赞同：4
> 
> 时间：2009-03-30T06:57:52.450
> 
> 标签：javascript, class, dom-events

我创建了一个像这样的类：

```
function MyClass()
{
    var myInt = 1;
}

MyClass.prototype.EventHandler = function(e)
{
    alert(this.myInt);
} 
```

不幸的是，这`this`是触发事件（在我的情况下是一个`<a>`标签），我无法访问类属性。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T07:07:21.570

这取决于您在注册事件时如何提供事件处理程序。

以下代码

```
element.addEventListener("click", myObject.EventHandler); 
```

不会做你想做的事。

例如，Javascript 不像 C# 那样处理委托，因此 myObject.EventHandler 不是为 myObject 调用的 EventHandler 方法。

如果要将对象上的方法作为事件处理程序调用，最好将其包装到函数中。

```
element.addEventListener("click", function(event)
{
    myObject.EventHandler(event);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T07:14:33.160

在构造函数中声明的“vars”在其他公共函数中不可用，它们被视为“*私有成员*”。

您可以使用`this.myInt = 1`使成员公开，并可供所有类方法使用：

```
function MyClass(){
    this.myInt = 1;  // Public member
}

MyClass.prototype.EventHandler = function(e){
    alert(this.myInt);
} 
```

或者您可以使用“*特权*”方法来访问构造函数范围内的“*私有*”成员：

```
function MyClass(){
    var myInt = 1; // Private member

    this.getMyInt = function(){  // Public getter
        return myInt;
    }
}

MyClass.prototype.EventHandler = function(e){
    alert(this.getMyInt());
} 
```

推荐讲座：[JavaScript 中的私人会员](http://www.crockford.com/javascript/private.html)（Douglas Crockford）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T07:11:32.887

JavaScript 实际上没有类。 `MyClass`是对象的构造函数，其原型是 object `MyClass.prototype`。

关键字可能会`this`让人难以理解；它在函数中的值取决于函数作为属性被调用的对象。

如果您希望能够从事件处理程序调用对象的方法，您应该使用像 Vincent Robert 建议的函数闭包。

我建议您查看这些链接以获取有关以下内容的更多信息`this`：

*   [http://trephine.org/t/index.php?title=Understanding_JavaScript's_this_keyword](http://trephine.org/t/index.php?title=Understanding_JavaScript's_this_keyword)
*   [http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)

此外，

```
function MyClass()
{
    var myInt = 1;
} 
```

此构造函数在函数内设置一个局部变量，该变量不能从函数外部访问。如果要初始化对象的某个属性，则需要使用`this.myInt = 1`. 但是，该值将仅在由 构造的对象上设置`new MyClass()`，而不是在 MyClass 函数对象本身上设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T12:10:41.620

假设您替换`var myInt`为`this.myInt`，您可以`MyClass.myInt`从内部引用它，`MyClass.prototype.EventHandler`而不必担心引用`this`的是什么。

# windows-vista - 在 Vista 中将 exe 作为当前用户域启动

> ID：696243
> 
> 赞同：0
> 
> 时间：2009-03-30T07:00:12.630
> 
> 标签：windows-vista

我正在通过安装程序（MSI）启动一个应用程序（EXE）。在 Vista 中安装 MSI 时，它会自动以管理员权限运行（经过彻底的 UAC）。因此，启动的应用程序也在系统用户下运行。我希望这个应用程序在当前用户下运行。为了在当前用户中运行应用程序，我需要明确双击 exe。但我希望它以编程方式完成。到目前为止，唯一的出路是使用 Process.start() 使用用户名/密码。为此，我需要提示用户并从他那里获取密码，这是我不想要的。

我们可以在当前用户下以编程方式运行 exe（Vista）吗？

问候苏梅特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T07:06:30.447

如果生成程序的安装程序在用户下运行，则对于该程序，“当前用户”是该用户，即。您的情况下的管理员。

您将不得不显式转义到不同的用户上下文，不幸的是，这涉及让用户指定他的密码（至少）。否则，您可能会让程序完全冒充用户。

# sql-server - 更改登录名

> ID：696244
> 
> 赞同：4
> 
> 时间：2009-03-30T07:01:08.260
> 
> 标签：sql-server, tsql, sql-server-2000, database-restore

将 DB_1 数据库备份恢复到 DB_2 数据库时出现问题。但缺少用户 dbo 的登录名 ()。我如何重新创建登录名？我使用 SQL 2000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-10T14:19:05.207

您在此处拥有的称为孤立用户。即用户存在于您已恢复的数据库中，但未将其设置为数据库服务器上的登录名。

如果用户是windows集成登录，只需将登录添加到数据库服务器即可。如果它是一个 SQL Server 登录，那么它有点小技巧：

要获取有关已还原数据库中的孤立用户的报告，请运行：

```
USE restored_database
GO
exec sp_change_users_login @Action='Report';
GO 
```

要在登录时重新创建数据库并将其链接到恢复的数据库运行：

```
EXEC sp_change_users_login 'Auto_Fix', 'user', 'login', 'password' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-23T00:39:20.470

在还原的数据库上调用 sp_dropuser 'user'。

如果服务器上已经存在用户，则授予用户对恢复的数据库的权限，否则在服务器上重新创建用户，然后授予对恢复的数据库的权限。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-03-30T07:50:05.897

添加“sa”作为数据库所有者，因此在将备份恢复到该目录之前，将“sa”添加到 DB_2 目录的数据库所有者角色。

顺便说一句，对不起，如果我听起来很粗鲁，但 stackoverflow 主要用于编程问题，而不是系统管理员问题，我认为如果您在面向 sqlserver 的板上提出问题，您会得到更多回复。

# delphi - 通过库代码传递对象时避免强制转换（在 Delphi 中）

> ID：696249
> 
> 赞同：4
> 
> 时间：2009-03-30T07:05:46.893
> 
> 标签：delphi, architecture, casting

在设计库时，我经常采用以下模式，我不喜欢这种模式，因为它会导致大量类型转换。

基本模式是：
使用库的代码将对象交给库，然后库将对象交还给调用代码。调用代码被迫转换对象，因为库交回了一个泛型类型。（下面的精简代码示例）

该库定义了以下对象和功能：

```
TThing = Class
End;

TThingProcessor = Class
Public
    Function  CreateThing : TThing; Virtual; Abstract;
    Procedure ProcessThing (Thing : TThing); Virtual; Abstract;
End;

Procedure DoEverything (Processor : TThingProcessor); 
```

然后调用代码通过覆盖对象并调用 DoEverything 来使用该库，如下所示 -

```
TMyThing = Class(TThing)
Public
    X : Integer;
End;

TMyThingProcessor = Class(TThingProcessor)
Public
    XSum : Integer;

    Function  CreateThing : TThing; Override;
    Procedure ProcessThing (Thing : TThing); Override;
End;

Function TMyThingProcessor.CreateThing : TThing;
Begin
    Result := TMyThing.Create;
End;

Procedure TMyThingProcessor.ProcessThing (Thing : TThing);
Begin
    XSum := XSum + (Thing As TMyThing).X;
    //Here is the problem, the caller is forced to cast to do anything
End; 
```

处理器类也是一个 TThing 工厂。该库保证它只会将 TThings 传递给创建它们的相应 TThingProcessor，因此它可以工作，但不是类型安全的。虽然上面的代码有点愚蠢，因为它实际上并没有做任何事情，但它说明了为什么 ProcessThing 不能简单地转移到 TThing 并且是多态的 - XSum 变量需要更新。

如何重组代码以使强制转换是不必要的？我需要将库代码分开，但能够接受任何类型。

编辑：根据建议将硬转换更改为 as-cast，因此在类型不匹配的情况下，它至少会抛出异常而不是崩溃

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T07:20:26.030

你应该重构你的代码。如果您正在创建大量的“TThing”，那么它应该有一个祖先类，其 irs 进程方法声明为虚拟，那么您只需使用祖先。通常，当您对非常不同的类进行类似调用时，总是可以定义一个通用的“基类”。如果您无法创建这样的类结构，请使用接口来定义您的处理要求并将此接口附加到您的 TThing。

在您无法避免强制转换的最后手段中，请使用以下内容以方便阅读和调试......

```
procedure Something( ASender : TObject );
var
  MyThing : TMyThing;
begin
  MyThing := ASender as TMyThing;
  MyTHing.DoSomething;
  MyThing.DoSomethingElse;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T13:23:22.397

你用的是德尔福 2009 吗？这对泛型很有用。将您的声明更改为：

```
TThingProcessor<T: TThing> = Class
Public
    Function  CreateThing : T; Virtual; Abstract;
    Procedure ProcessThing (Thing : T); Virtual; Abstract;
End;

TMyThingProcessor = Class(TThingProcessor<TMyThing>)
Public
    XSum : Integer;

    Function  CreateThing : TMyThing; Override;
    Procedure ProcessThing (Thing : TMyThing); Override;
End; 
```

没有更多的铸造。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T11:52:54.643

如果 TMyThingProcessor 只接受 TMyThing 对象而基本 TThing 对象不起作用，那么不要尝试多态地执行此操作。声明 ProcessThing 并**重新引入；**指令而不是**覆盖；**指示。

此外，如果您拥有它，Delphi 2009 的泛型特性有助于在某些情况下减少虚假类型转换。

# objective-c - 在 copyWithZone: 中，我应该将区域用于所有分配还是仅用于返回的对象？

> ID：696256
> 
> 赞同：0
> 
> 时间：2009-03-30T07:08:21.503
> 
> 标签：objective-c, cocoa, memory-management

假设我有这样的课程：

```
@interface SomeClass : NSObject<NSCopying> {
    SomeOtherClass *obj;
} 
```

在 copyWithZone: 的定义中，我这样做：

```
SomeClass *someCopy = [[SomeClass allocWithZone:zone] init]; 
```

所以我的问题是，如果我想复制 obj，哪些是正确的/推荐的？

选项A：

```
objCopy = [obj copyWithZone:zone]; 
```

选项 B：

```
objCopy = [obj copy]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T21:35:54.353

如果您使用的是引用计数内存管理（不是垃圾收集），您应该使用`[obj copyWithZone:zone]`. 此外，您应该（在相同情况下）使用`+allocWithZone:`而不是`+alloc`分配副本。这会为指定内存区域中的实例分配内存（请参阅 NSZone）。如果开发人员打算同时分配*许多*不再需要的对象，他们可能会使用一个单独的区域。然后可以在一个操作中回收整个区域`NSRecylceZone`，有助于防止内存碎片。通常，不需要使用私有区域（通常会损害性能；分析您的代码！）。假设开发人员想要一个特定区域中的副本，我想您会假设他们想要同一区域中的所有相关实例。

和方法分别调用`-copy`和方法，传递默认区域。`+alloc``-copyWithZone:``+allocWithZone:`

# php - 使用 time() 更新 MySQL TIMESTAMP 字段？

> ID：696270
> 
> 赞同：0
> 
> 时间：2009-03-30T07:14:19.197
> 
> 标签：php, mysql

这是通过 phpMyAdmin 导出时感兴趣的表：

```
CREATE TABLE IF NOT EXISTS `users` (
  `ip` varchar(20) NOT NULL,
  `lastcheck` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  UNIQUE KEY `ip` (`ip`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

这是查询：

```
mysql_query("REPLACE INTO users SET ip = '$uip', lastcheck = '$tim'") or throwerror("part2 ".mysql_error()); 
```

$tim 设置为 time();

现在由于某种原因 lastcheck 仍然设置为 0000-00-00 00:00:00。

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T07:45:34.893

我不确定我是否理解您的问题，查看列 lastcheck 声明 CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP 这意味着当您更新 (ip = '$uip') 此列时，最后检查也会发生自动日期更新。这意味着您可以编写如下更新语句：

```
REPLACE INTO users SET ip = '$uip'; 
```

这也应该更新 lastcheck 字段，我认为最好使用 mysql 日期函数来存储您的日期/时间，而不是在 php 中编写它们并将它们作为字符串保存在数据库中......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T07:18:42.197

尝试使用 date('Ymd H:i:s') 代替 time()

php 中的 time() 返回一个 unix 时间戳，这不是 MySQL 日期时间的有效插入

希望这可以帮助

# visual-studio - vs 2008 中的 Ctrt + F5 和 .Net 3.5 无法运行我的网站应用程序

> ID：696277
> 
> 赞同：0
> 
> 时间：2009-03-30T07:18:03.900
> 
> 标签：visual-studio, visual-studio-2008

我无法从 VS 2008 运行网站应用程序。当我按 Ctrl + F5 时，我收到一条警告“无法连接到 ASP.net 部署服务器”（sp。）我使用的是 windows 2k3 sp2。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T07:25:11.683

您是否有可能干扰它的防火墙或安全套件？

如果没有有用的错误信息，您可能需要修复 IIS/VS。我已经看到过去解决了类似的问题。

# sql-server - SQL 列编辑问题

> ID：696283
> 
> 赞同：0
> 
> 时间：2009-03-30T07:19:59.400
> 
> 标签：sql-server

当我要更改列名的数据类型时，出现这些错误，你能告诉我解决方案吗

不允许保存更改。您所做的更改需要以下内容。您对无法创建的表进行了更改或启用了选项阻止保存需要重新创建表的更改..我可以在哪里找到“防止保存需要重新创建表的更改”选项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T07:23:42.013

您可以在 SQL Server Management Studio 的工具 -> 选项 -> 设计器中找到它。

# mysql - mySQL 查询列出我的网站每天收到的评论数？

> ID：696289
> 
> 赞同：6
> 
> 时间：2009-03-30T07:23:54.353
> 
> 标签：mysql, drupal

我经营一家在线杂志，想要一种非常简单的方法来跟踪 3 个指标：

1.  每天留下多少评论。
2.  我的用户提交了多少链接。
3.  我每天有多少新成员。

这些信息是我所有的数据库，我只是不知道如何将其取出。

我有一个包含大约 3500 条评论的“评论”表。每个评论在表格中占一行。表中的一列是“时间戳”。

我假设有一个查询会选择这个表，按时间戳对行进行排序，以 24 小时为增量对它们进行分组，然后计算每组中的行数——告诉我每天收到多少新评论。

该查询会是什么样子？如果我让第一个工作，我想我可以弄清楚其他的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T13:58:09.193

此片段将在主题表中显示您的结果：

```
$sq = 'SELECT COUNT(*) cnt, DATE(FROM_UNIXTIME(timestamp)) day '
    . 'FROM {comments} c '
    . 'GROUP BY 2 '
    . 'ORDER BY 2 DESC';
$q = db_query($sq);
$stats = array();
while ($o = db_fetch_object($q)) {
  $stats[$o->day] = array($o->day, $o->cnt);
}
return theme('table', NULL, $stats)); 
```

使用 DATE(timestamp) 不起作用，因为 comments.timestamp 是 UNIX_TIMESTAMP 格式，而 DATE() 需要一个 ASCII 日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T07:31:30.293

使用 date_format() 函数来格式化日期；

```
select count(id) as commentCount, date_format(dateColumn, '%Y-%m-%d') as commentDate
from yourTable
group by commentDate 
```

# java - 在 Eclipse RCP 中嵌入 Silverlight 应用程序

> ID：696299
> 
> 赞同：0
> 
> 时间：2009-03-30T07:29:57.083
> 
> 标签：java, silverlight, eclipse, eclipse-rcp

有没有人有关于在 Eclipse RCP 应用程序中嵌入 Silverlight 应用程序的好资源？场景如下：我们有一个第三方应用程序，我们想将它集成到一个已经开发的 Eclipse RCP 应用程序中，并且我们不想重做任何事情。此外，我不能将其作为第二个应用程序启动，而是必须嵌入到我们已有的应用程序中。

我知道可以使用 OLE 对象嵌入，这是要走的路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T08:34:56.303

只是一个想法：您可以使用 SWT 浏览器控件并在其中运行 Silverlight 应用程序。使用浏览器非常简单。您不需要连接到网络：HTML 可以从本地文件中读取或临时生成。

查看[SWT 片段页面](http://www.eclipse.org/swt/snippets/)以获取一些有用的示例。

更新：另一种选择是在 SWT 中嵌入 WebKit 的[Project Blinki 。](http://www.genuitec.com/about/labs.html)它比基本的浏览器小部件更可控，但是，目前还不是完全平台中立的。

# c++ - 运行时检查失败 #0 从 kernel32.dll 加载 QueryFullProcessImageName

> ID：696306
> 
> 赞同：8
> 
> 时间：2009-03-30T07:35:29.257
> 
> 标签：c++, winapi, windows-vista, function-pointers

我有一个需要在 WinXP 和 Vista64 上运行的应用程序。我的程序需要 QueryFullProcessImageName() 才能在 Vista 上工作，但不能在 XP 上工作。

我尝试通过 kernel32.dll 加载 QueryFullProcessImageName() （而不是静态链接），以便相同的可执行文件可以在 WinXP 和 Vista 上运行。加载它的代码是：

```
//only gets called on vista
bool LoadQueryFullProcessImageName()
{
  HMODULE hDLL = LoadLibrary("kernel32.dll");
  if (!hDLL) return(0);

  //Now use pointer to get access to functions defined in DLL
  fpQueryFullProcessImageName = (LPQueryFullProcessImageName)GetProcAddress(hDLL, "QueryFullProcessImageNameA"); //ANSI version
  if (!fpQueryFullProcessImageName) 
     return false;

  return true;
} 
```

类型定义是

```
typedef WINBASEAPI
BOOL (*LPQueryFullProcessImageName)(
    __in HANDLE hProcess,
    __in DWORD dwFlags,
    __out_ecount_part(*lpdwSize, *lpdwSize) LPSTR lpExeName,
    __inout PDWORD lpdwSize
    ); 
```

不幸的是，当函数指针被取消引用时，我在 Vista 上遇到了运行时错误：

运行时检查失败 #0 - ESP 的值未在函数调用中正确保存。这通常是调用使用一种调用约定声明的函数和使用另一种调用约定声明的函数指针的结果。

typedef 直接来自 .h 文件，所以我不明白为什么它会搞砸。有什么帮助吗？我尝试了很多变种，但没有运气。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-30T08:09:21.060

您应该将 typedef 更改为

```
typedef BOOL (WINAPI *LPQueryFullProcessImageName)(
     HANDLE hProcess, DWORD dwFlags, LPSTR lpExeName, PDWORD lpdwSize ); 
```

WINBASEAPI 用于声明静态依赖项，它没有指定 __stdcall 调用约定。您使用 GetProcAddress() ，因此您对静态依赖项不感兴趣，但您仍然需要 __stdcall 才能进行正确的调用。

# c# - C#/.Net Web 浏览器是否容易受到攻击？

> ID：696307
> 
> 赞同：4
> 
> 时间：2009-03-30T07:36:14.057
> 
> 标签：c#, .net, clr, buffer-overflow, exploit

说 .Net 平台更安全是因为 CLR 可以防止缓冲区溢出攻击，这是否正确？

假设在托管操作系统（如[Cosmos](http://gocosmos.org/index.en.aspx)、[SharpOS](http://www.sharpos.org/doku.php)或[Singularity](http://research.microsoft.com/en-us/projects/singularity/)）中运行 Web 浏览器，攻击者在技术上是否可以将 IL 代码注入应用程序？

我是否需要担心在非托管应用程序中不可能发生的攻击？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T07:46:05.127

在大多数情况下，你是对的。具有安全类型系统（不仅仅是 .NET 或 Java）的应用程序不允许应用程序违反这些约束。

缓冲区溢出和许多其他远程代码漏洞的发生是因为这些语言和运行时中的约束不提供检查，并且不能保证程序不会执行诸如在内存中执行任意代码之类的事情。安全系统验证代码不受这些影响。

（附带说明一下，C# 仍然可以执行不安全的操作并将自己设置为执行任意代码。它相当麻烦，不太可能在实际应用程序中使用。）

您会在托管浏览器中看到的安全漏洞是，如果它允许加载任意代码，使用 CLR 作为安全环境。虽然 CLR 生成的代码（即应用程序的 JIT）是安全的，但加载程序和验证程序本身通常是用低级语言编写的。有一些安全漏洞（我认为 .NET 有 2 个？）恶意形成的程序集可能会迫使实际的 CLR 执行任意代码。然而，这些都是相对罕见的问题，而且表面积远远小于其他情况。

所以，是的，一个完全安全的托管浏览器本身不会成为这些特定漏洞的牺牲品。但这也意味着您必须以类似的方式编写和执行插件（Flash？）。最后，还有其他一些可以作为攻击目标的安全漏洞，但通常它们不会像使用非托管应用程序那样严重。例如，跨站点脚本仍然是一个问题。但至少你不会有“查看文档可以执行任意代码”类型的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T07:44:11.917

CLR（和 JVM）可以防范许多常见的攻击，但这并不能消除所有威胁。CLR 或任何库都可能包含允许漏洞利用的错误。应用程序错误也可能允许漏洞利用。SQL 注入是由于应用程序中缺少输入验证而可能发生的攻击的一个示例。

# c++ - 是提升 shared_ptr 线程安全？

> ID：696308
> 
> 赞同：2
> 
> 时间：2009-03-30T07:37:14.040
> 
> 标签：c++, boost, thread-safety

使用 boost shared_ptr 时，以下代码线程安全吗？谢谢！

```
class CResource
{
xxxxxx
}
class CResourceBase
{
CResourceBase()
{
m_pMutex = new CMutex;
}
~CResourceBase()
{
ASSERT(m_pMutex != NULL);
delete m_pMutex;
m_pMutex = NULL;
}
private:
CMutex *m_pMutex;
public:
   void SetResource(shared_ptr<CResource> res)
   {
     CSingleLock lock(m_pMutex);
     lock.Lock();
     m_Res = res;
     lock.Unlock();
   }

   shared_ptr<CResource> GetResource()
   {
     CSingleLock lock(m_pMutex);
     lock.Lock();
     shared_ptr<CResource> res = m_Res;
     lock.Unlock();
     return res ;
   }
private:
   shared_ptr<CResource> m_Res;
}

CResourceBase base;
//----------------------------------------------
Thread A:
    while (true)
    {
       ......
        shared_ptr<CResource> nowResource = base.GetResource();
        nowResource.doSomeThing();
        ...
     }   

Thread B:
    shared_ptr<CResource> nowResource;
    base.SetResource(nowResource);
    ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T08:32:07.810

*您的示例*中没有种族可能性（它已正确锁定）。但是，您应该非常小心使用`shared_ptr`多线程代码。请记住，您有可能通过来自不同线程的不同 shared_ptrs 访问相同的对象。例如，之后：

```
Thread B:
    shared_ptr<CResource> nowResource;
    base.SetResource(nowResource);
    ... 
```

线程 B 仍然可以访问 nowResource。如果线程 A 获得资源 ptr，则两个线程可以同时使用对象**而无需任何同步！**

这当然是比赛条件。

# reporting - 运行时的 BIRT 动态过滤器

> ID：696309
> 
> 赞同：0
> 
> 时间：2009-03-30T07:37:58.237
> 
> 标签：reporting, birt

是否有一种简洁的方法可以访问 BIRT 报告的数据集以添加/修改一些过滤器。我知道我可以更改 XML(rptdesign) 文件，但我希望有一个 java 方法或其他东西。顺便说一句，我将通过 PHP-Java Bridge 访问它，因为我的前端是在 PHP 上的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-26T11:51:47.353

好的，我只是不希望这个问题无人回答。

解决方案是访问设计元素，然后访问数据集，然后从那里添加过滤条件。

```
$report = $birtReportEngine->openReportDesign("${here}/myreport.rptdesign");
$filter = new java("org.eclipse.birt.report.model.api.elements.structures.FilterCondition"); // create a new filter condition object

$filter->setExpr("row['id']");

$filter->setOperator("in"); 
$filter->setValue1('["32","679","333","233"]');
$report->getDesignHandle()->findDataSet("Employees")->addFilter($filter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-04T01:06:01.517

我不确定“过滤器”是什么意思，但您可以创建 BIR 报告，该报告采用您可以传递的报告参数。例如，传递用户 (xxx) 名称以显示带有针对指定用户定制的查询的报告（又名 SQL WHERE user==xxx）

# wpf - WPF中像素着色器的线条艺术效果？

> ID：696314
> 
> 赞同：0
> 
> 时间：2009-03-30T07:40:43.813
> 
> 标签：wpf, silverlight, pixel, shader

我想创建一个艺术线条效果，但现在 WPF 不支持顶点着色器。有没有办法通过像素着色器创建线条艺术效果？任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-09T16:03:05.837

查看[Shader Effect Library](http://www.codeplex.com/wpffx)，您很可能必须创建自己的 Pixel Shader 才能获得所需的效果，但该网站上也有一个很好的教程可以教您如何操作。

# django - 分离 Django 应用程序视图

> ID：696318
> 
> 赞同：16
> 
> 时间：2009-03-30T07:43:29.703
> 
> 标签：django, views

如果 app/views.py 文件变得非常大，我应该把它分开吗？如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-30T08:34:33.543

一些开发人员将他们的视图制作为**[python 包](http://www.python.org/doc/essays/packages.html)**而不是模块。这只是意味着在您的应用程序中创建一个目录`views`，然后将每个视图放在该包中自己的模块（文件）中。

然后你创建一个`__init__.py`文件（这就是使它成为一个包的原因）。该文件可以是空的，也可以将所有视图模块导入到它自己的命名空间中。

如果它是空的，你必须直接导入你需要的每个视图，否则你可以导入它，就像它是一个 views.py 模块一样。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-30T09:27:24.633

没有通用的*最佳方法*。但是有适合您情况的*正确方法。*

*   将视图放在它们**自己的文件**中并将**它们导入到**您的视图中。这很好，只是看看它是如何工作的
*   在项目中创建一个**单独的应用程序**来维护一组视图
*   创建您自己的[通用视图](https://docs.djangoproject.com/en/1.9/topics/class-based-views/)，共享大多数应用程序的通用视图

*就像一个开始的例子：* 我建议你从模型开始，自己动手：

*   **你有多少**型号？
*   它们实际上都**相关**还是可以分组？
*   如果可以**分组**将应用程序分成两个应用程序
*   所以你也会**拆分视图**
*   确定哪些视图函数是相似的并使它们**通用**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T08:20:32.143

我会将具有相似目的或功能的视图分离到一个文件中，并将其包含在 views.py 中。我这样做只是为了可读性和维护。例如，特定对象或对象组的 CRUD 视图。

通过将这些视图直接导入到主views.py 文件中，它允许不熟悉您的约定的人找到什么在哪里。

```
views/object_view.py 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T08:41:04.230

在一个理想的世界里，你不应该这样做。相反，请尝试将您的代码重构为不同的 django 应用程序，以满足您项目所需的每个子目的。这样，您可以比仅拆分 views.py 文件更好地对项目进行分区。

有关如何将项目拆分为不同应用程序的提示，我建议阅读 James Bennett 的*Practical Django Projects*，这是我现在正在重新阅读的内容 :)

# c++ - 重载 C++ STL 方法

> ID：696320
> 
> 赞同：3
> 
> 时间：2009-03-30T07:44:39.390
> 
> 标签：c++, stl, overloading

如何为查找、擦除和插入等方法重载 STL 实现以获取不同的参数？我试图查找 STL 方法的重载，但找不到任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-30T07:47:30.537

如果不编辑该类的代码，就不能重载该类的方法。

编写自己的免费函数作为助手；他们会将相关的容器类作为第一个参数。

您可以从类继承并以这种方式添加方法，但 std 容器类并非旨在继承自。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T07:55:10.720

不允许在 std 命名空间中添加重载。只允许为您自己的数据类型专门化函数和算法。如果您确实想要不同的查找、擦除、插入...实现一个包装器（在 std 命名空间之外）并使用它。

而且我也不推荐它......你想提供什么样的重载？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-02T23:56:43.190

您不得这样做；该标准禁止它。

# php - 多次在同一个数组上使用array_multisort？

> ID：696327
> 
> 赞同：2
> 
> 时间：2009-03-30T07:47:08.447
> 
> 标签：php, arrays, sorting, multidimensional-array

我从我的数据库中提取了一个较大的数据表（约 1500 行，每行有 10-15 个字段），我正在做一些过滤器并生成一些统计数据并将这些数据存储在 Excel 电子表格中供用户下载。

我不是一次又一次地用相同的相当复杂的查询来访问数据库，只做了很小的修改（对 WHERE 和 ORDER BY），而是一次访问数据库，将结果放入一个大数组中，然后使用`array_filter`和`array_multisort`获得我对数据的新看法。

我是新手，`array_multisort`所以我会在这里发布我所做的事情以供批评。

```
// an numerical array of associative arrays
$records = $dbResult->convertToArray();

$fields = $dbResult->getFieldNames();

// this is run once at the start
$sortArr = array();
foreach ($fields as $field) $sortArr[$field] = array();

foreach ($records as $r) {
    foreach ($r as $key => $value) {
        $sortArr[$key][] = $value;
    }
}

// and then to sort:
array_multisort(
    $sortArr['Date Completed'], SORT_DESC,
    $sortArr['Last Name'], SORT_ASC,
    $sortArr['First Name'], SORT_ASC,
    $sortArr['Course'], SORT_ASC,
    $records
); 
```

这很好用，尽管最初的“将整个结果复制到另一个数组中”对我来说似乎很奇怪。当我需要再次对列表进行排序时，就会出现问题。我有一种感觉，我`$sortArr`需要与`$records`数组保持同步，但每次排序后它都会被破坏。

我什至不确定这是 的预期用途`array_multisort`，所以我可能在这里偏离轨道。任何人都可以提供一些建议或提示吗？如何对多维数组进行排序*？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T08:22:29.470

这就是我最终的结果。`usort`这是 martin 在PHP 手册页面的评论中发布的函数的略微修改版本。

```
function arfsort( &$array, $fieldList ){
    if (!is_array($fieldList)) {
        $fieldList = array(array($fieldList, SORT_ASC));
    } else {
        for ($i = 0; $i < count($fieldList); ++$i) {
            if (is_array($fieldList[$i])) {
                if (!isset($fieldList[$i][1])) $fieldList[$i][1] = SORT_ASC;
            } else {
                $fieldList[$i] = array($fieldList[$i], SORT_ASC);
            }
        }
    }
    $GLOBALS['__ARFSORT_LIST__'] = $fieldList;
    usort( $array, 'arfsort_func' );

}

function arfsort_func( $a, $b ){
    foreach( $GLOBALS['__ARFSORT_LIST__'] as $f ) {
        $strc = strcasecmp($b[$f[0]], $a[$f[0]]);
        if ( $strc != 0 ){
            return $strc * (!empty($f[1]) && $f[1] == SORT_DESC ? 1 : -1);
        }
    }
    return 0;
} 
```

我希望该功能比原始解决方案更强大。用法：

```
arfsort($my2DArray, "id");  // just sort by the id field, ascending
// sort by these lastName then firstName, ascending
arfsort($my2DArray, array("lastName", "firstName"));

arfsort($my2DArray, array(
    array("date", SORT_DESC),    // sort by date DESC
    array("lastName", SORT_ASC), // then by last name ascending
    array("firstName"),          // SORT_ASC is the default
    "middleInitial"              // and you don't need to wrap stuff in an array.
)); 
```

# c# - 基于正则表达式拆分字符串

> ID：696331
> 
> 赞同：5
> 
> 时间：2009-03-30T07:49:41.047
> 
> 标签：c#, regex, arrays, string, split

我想在 C# 中拆分一个看起来像的字符串

A B C D”

这样生成的数组将具有

数组[0] =“一个”

数组[1] = "b"

数组[2] = "c:d"

我用什么正则表达式来达到所需的结果。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T08:00:35.093

如果分隔符冒号用空格分隔，可以使用 \s 来匹配空格：

```
string example = "a : b : \"c:d\"";
string[] splits = Regex.Split(example, @"\s:\s"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T08:00:18.947

这对我来说似乎适用于 RegexBuddy

`(\w+)\s:\s(\w+)\s:\s"(\w+:\w+)"`

输入

> A B C D”

匹配组

> 1.  一种
> 2.  b
> 3.  光盘

一如既往地小心并了解正则表达式的实际作用。不要盲目抄袭。这匹配单词字符`\w`、空格`\s`等。考虑一下您的输入实际上将包含哪些数据！

# php - 反转 mysql_fetch_array()

> ID：696333
> 
> 赞同：3
> 
> 时间：2009-03-30T07:51:06.020
> 
> 标签：php, mysql

```
function outputscores($mysqlquery,$reverse=false)
{
    while($row = mysql_fetch_array($mysqlquery))
    {
        echo '<img src="img/date.png" /> ' . date("j M Y",strtotime($row['timestamp'])) . '
        <img src="img/time.png" /> ' . date("H:i:s",strtotime($row['timestamp'])) . '
        <img src="img/star.png" /> '.$row['score'].$_GET["scoretype"].'<br />';
    }
} 
```

如果 $reverse 设置为 true，我需要反转数组，但 PHP 说`mysql_fetch_array`' 的输出不是有效数组。$mysqlquery 本身也不是。

有什么帮助吗？

哇我今天问了这么多问题._。

**编辑**

```
$result = mysql_query("SELECT * FROM $gid LIMIT 25") or throwerror(mysql_error());

outputscores($result); 
```

**EDIT2** 另一个可能的调用：

```
$result = mysql_query("SELECT * FROM ".$gid.",users WHERE users.lastcheck < ".$gid.".timestamp") or throwerror(mysql_error());

outputscores($result); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T07:55:14.387

您可能正在尝试反转整个结果集，请尝试以下操作：

```
function outputscores($mysqlres,$reverse=false)
{
   $results = array();
   while($row = mysql_fetch_array($mysqlres)){
    print('I found a result: <pre>'.print_r($row, false).'</pre>'); //debugging purposes
    $results[] = $row;
   }
   if($reverse) { $results = array_reverse($results); }
   foreach($results as $row)
   {
    echo '<img src="img/date.png" /> ' . date("j M Y",strtotime($row['timestamp'])) .    '
    <img src="img/time.png" /> ' . date("H:i:s",strtotime($row['timestamp'])) . '
    <img src="img/star.png" /> '.$row['score'].$_GET["scoretype"].'<br />';
  }
} 
```

哦，是的，正如 soulmerge 所说，您应该为函数提供 mysql 资源而不是实际查询。因此像这样：

```
$query = "SELECT field FROM table";
$res = mysql_query($query);
output_scores($res, true); 
```

关于您的评论，请确保您的查询实际上正在返回结果，在 phpMyAdmin 或其他东西中对其进行测试，或者像我上面所做的那样在 while 循环中添加一个简单的打印。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T07:59:18.450

编辑：将您的 sql 查询更改为：

```
$mysqlquery="SELECT * FROM $gid"; 
```

将您的功能更改为：

```
function outputscores($mysqlquery,$reverse=false)
{
    if ($reverse==true)
        $mysqlquery.=" ORDER BY id DESC LIMIT 25";
    else
        $mysqlQuery.=" LIMIT 25";
    $result=mysql_query($mysqlquery);
    while($row = mysql_fetch_array($result))
    {
       //Do output here
    }
} 
```

在这里，通过添加单词`ORDER BY id DESC`，您将使记录按表中“id”列的降序排列。通过键入`ASC`而不是`DESC`您可以让它们按升序排列。此外，您可以将 'id' 替换为表中的任何其他列，例如`timestamp`,`score`等。

编辑：或者，您也可以使用不同的函数将`LIMIT`and`ORDER BY`子句添加到查询中。然后你可以做这样的事情：

```
$reverse=false;//or true
$mysqlquery=addOrderBy("SELECT * FROM $gid",$reverse);
outputScores($mysqlquery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T07:58:51.913

如果我做对了，$mysqlquery 应该是一个 mysql 查询结果，而不是一个数组。*有*两种情况`mysql_fetch_array()`不返回数组：

 *1.  参数不是查询结果资源（使用`var_dump($mysqlquery))`, 或
2.  根本没有结果（`mysql_fetch_array()`返回`FALSE`）。

我希望您不会`mysql_fetch_array()`像变量名称所暗示的那样将查询本身传递给。你必须先打电话`mysql_query()`，然后才能取到任何东西。

反转本身可以通过获取所有行并调用[array_reverse()](http://us.php.net/manual/en/function.array-reverse.php)来完成。例子：

```
$rows = array();
while ($row = mysql_fetch_array($result)) {
    $rows[] = $row;
}
array_reverse($rows); 
```

# ruby-on-rails - 何时在 Ruby on Rails 中使用 memoization

> ID：696338
> 
> 赞同：24
> 
> 时间：2009-03-30T07:54:12.080
> 
> 标签：ruby-on-rails, ruby, performance, memoization

2008 年 7 月中旬，Memoization 被添加到 Rails 核心中。用法演示在[这里](http://www.railway.at/articles/2008/09/20/a-guide-to-memoization)。

我还没有找到任何关于何时应该记住方法以及每个方法的性能影响的好例子。[例如，这篇博](http://blog.purepistos.net/index.php/2008/09/29/rails-memoization-is-not-always-faster/)文建议，通常根本不应该使用记忆。

对于可能对性能产生巨大影响的东西，似乎很少有资源可以提供简单的教程。

有没有人在他们自己的项目中看到过记忆化？哪些因素会让你考虑记忆一个方法？

* * *

在我自己做了一些更多的研究之后，我发现在 Rails 核心中使用了很多次记忆。

这是一个例子：http: [//github.com/rails/rails/blob/1182658e767d2db4a46faed35f0b1075c5dd9a88/actionpack/lib/action_view/template.rb](http://github.com/rails/rails/blob/1182658e767d2db4a46faed35f0b1075c5dd9a88/actionpack/lib/action_view/template.rb)。

这种用法似乎与上述博客文章的发现背道而驰，即发现记忆化会损害性能。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-12-04T14:15:04.707

我认为许多 Rails 开发人员并不完全理解 memoization 的作用以及它是如何工作的。我已经看到它应用于返回延迟加载集合的方法（如 Sequel 数据集），或应用于不带参数但基于实例变量计算某些东西的方法。在第一种情况下，记忆只是开销，而在第二种情况下，它是令人讨厌且难以追踪的错误的来源。

如果我*不会*应用记忆

*   返回的值只是计算起来有点贵。它必须*非常*昂贵，并且不能进一步优化，才能值得记忆。
*   返回的值是或可能是延迟加载的
*   该方法不是一个纯函数，即它保证为相同的参数返回完全相同的值——并且只使用参数来完成它的工作，或者其他纯函数。使用实例变量或调用反过来使用实例变量的方法意味着该方法可以为相同的参数返回不同的结果。

还有其他不适合记忆的情况，例如问题中的那个和上面的答案，但我认为这三个不是那么明显。

最后一项可能是最重要的：memoization 根据方法的参数缓存结果，如果方法看起来像这样，它就不能被 memoized：

```
def unmemoizable1(name)
  "%s was here %s" % name, Time.now.strftime('%Y-%m-%d')
end

def unmemoizable2
  find_by_shoe_size(@size)
end 
```

然而，两者都可以被重写以利用记忆（尽管在这两种情况下，由于其他原因显然不应该这样做）：

```
def unmemoizable1(name)
  memoizable1(name, Time.now.strftime('%Y-%m-%d'))
end

def memoizable1(name, time)
  "#{name} was here #{time}"
end
memoize :memoizable1

def unmemoizable2
  memoizable2(@size)
end

def memoizable2(size)
  find_by_shoe_size(size)
end
memoize :memoizable2 
```

（假设`find_by_shoe_size`没有或依赖于任何副作用）

诀窍是从方法中提取一个纯函数，然后对其应用记忆化。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-30T08:22:56.847

当一个方法从多个表中获取数据，并在返回结果对象之前执行一些计算，并且该方法在请求中多次出现时，记忆化可能是有意义的。

请记住，查询缓存也处于活动状态，因此只有执行 Ruby 计算的 memoize 方法，而不是纯数据库获取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-04-04T21:46:14.743

也许我的经验是什么时候不使用 memoize 的一个很好的例子。在我的 Order 模型中，我记住了两个简单的计算结果，即 Order#subtotal、Order#tax；以及模型对象，即 Order#most_recent_credit_card_used。在后者中，当记忆返回 CreditCard 对象的方法时，我会在尝试更新记忆对象的属性时收到“冻结哈希”错误。订单#most_recent_credit_card_used.frozen？当方法被记忆时返回 true，这当然不是我想要的。

**我的收获很简单：对返回简单数据类型（整数、浮点数等）的昂贵操作使用 memoize，但在返回ActiveRecord 模型等**复杂对象时不要使用 memoize 。**如果您打算在内存中更新这些对象。**

 **# python - Windows 上的 Python 2.6：如何使用“shell=True”参数终止 subprocess.Popen？

> ID：696345
> 
> 赞同：8
> 
> 时间：2009-03-30T07:56:27.940
> 
> 标签：python, windows, windows-xp, subprocess, python-2.6

有没有办法终止以 subprocess.Popen 类启动的进程，其中“shell”参数设置为“True”？在下面的最小工作示例中（使用 wxPython），您可以愉快地打开和终止记事本进程，但是如果您将 Popen“shell”参数更改为“True”，则记事本进程不会终止。

```
import wx
import threading
import subprocess

class MainWindow(wx.Frame):

    def __init__(self, parent, id, title):        
        wx.Frame.__init__(self, parent, id, title)
        self.main_panel = wx.Panel(self, -1)

        self.border_sizer = wx.BoxSizer()

        self.process_button = wx.Button(self.main_panel, -1, "Start process", (50, 50))
        self.process_button.Bind(wx.EVT_BUTTON, self.processButtonClick)

        self.border_sizer.Add(self.process_button)
        self.main_panel.SetSizerAndFit(self.border_sizer)
        self.Fit()

        self.Centre()
        self.Show(True)

    def processButtonClick(self, event):
        if self.process_button.GetLabel() == "Start process":
            self.process_button.SetLabel("End process")
            self.notepad = threading.Thread(target = self.runProcess)
            self.notepad.start()
        else:
            self.cancel = 1
            self.process_button.SetLabel("Start process")

    def runProcess(self):
        self.cancel = 0

        notepad_process = subprocess.Popen("notepad", shell = False)

        while notepad_process.poll() == None: # While process has not yet terminated.
            if self.cancel:
                notepad_process.terminate()
                break

def main():
    app = wx.PySimpleApp()
    mainView = MainWindow(None, wx.ID_ANY, "test")
    app.MainLoop()

if __name__ == "__main__":
    main() 
```

为了这个问题，请接受“shell”确实必须等于“True”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T11:26:52.677

你为什么用`shell=True`？

只是不要这样做。你不需要它，它会调用 shell，那是没用的。

我不接受它必须是`True`，因为它没有。使用`shell=True`只会给你带来问题，没有好处。只是不惜一切代价避免它。**除非你正在运行一些 shell 内部命令，否则你永远**都不需要它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-30T08:46:54.420

当使用 shell=True 并在进程上调用终止时，您实际上是在杀死 shell，而不是记事本进程。shell 可以是 COMSPEC 环境变量中指定的任何内容。

我能想到杀死这个记事本进程的唯一方法是使用 Win32process.EnumProcesses() 来搜索进程，然后使用 win32api.TerminateProcess 杀死它。但是，您将无法将记事本进程与其他同名进程区分开来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T19:35:58.243

根据 Thomas Watnedal 的回答中给出的提示，他指出在示例中实际上只有 shell 被杀死，我根据 Mark Hammond 的 PyWin32 库中给出的示例，安排了以下函数来解决我的场景中的问题：

procname 是在任务管理器中看到的进程的名称，没有扩展名，例如 FFMPEG.EXE 将是 killProcName("FFMPEG")。请注意，该函数相当慢，因为它会枚举所有当前正在运行的进程，因此结果不是即时的。

```
import win32api
import win32pdhutil
import win32con

def killProcName(procname):
    """Kill a running process by name.  Kills first process with the given name."""
    try:
        win32pdhutil.GetPerformanceAttributes("Process", "ID Process", procname)
    except:
        pass

    pids = win32pdhutil.FindPerformanceAttributesByName(procname)

    # If _my_ pid in there, remove it!
    try:
        pids.remove(win32api.GetCurrentProcessId())
    except ValueError:
        pass

    handle = win32api.OpenProcess(win32con.PROCESS_TERMINATE, 0, pids[0])
    win32api.TerminateProcess(handle, 0)
    win32api.CloseHandle(handle) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-29T10:18:28.197

如果您确实需要`shell=True`标志，那么解决方案是使用带有标志的`start`shell 命令。`/WAIT`使用此标志，`start`进程将等待其子进程终止。然后，例如使用该[`psutil`](https://pypi.python.org/pypi?%3aaction=display&name=psutil#downloads)模块，您可以通过以下顺序实现您想要的：

```
>>> import psutil
>>> import subprocess
>>> doc = subprocess.Popen(["start", "/WAIT", "notepad"], shell=True)
>>> doc.poll()
>>> psutil.Process(doc.pid).get_children()[0].kill()
>>> doc.poll()
0
>>> 
```

第三行之后出现记事本。多亏了标志，只要窗口打开就`poll`返回。kill 后的子记事本窗口消失，并返回退出代码。`None``/WAIT``start``poll`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-30T10:16:37.277

Python 2.6 有一个针对 subprocess.Popen 对象的 kill 方法。

[http://docs.python.org/library/subprocess.html#subprocess.Popen.kill](http://docs.python.org/library/subprocess.html#subprocess.Popen.kill)

# sql-server - SQL Server 两层复制 - 事务/合并 - 行不下来

> ID：696346
> 
> 赞同：1
> 
> 时间：2009-03-30T07:56:53.820
> 
> 标签：sql-server, merge, replication, transactional

我有一个 SQL 2000 实例，该实例具有带有事务发布的数据库 - 仅表。它由 SQL 2005 实例订阅 - 没有问题。

我需要在合并发布中发布来自此事务订阅的一些表。现在，我在 SQL 2005 实例中使用另一个数据库作为合并订阅者。

设置如下所示：

SQL2000 --(事务)--> SQL2005-1 --(合并)--> SQL2005-2

SQL2000 发布的初始快照一直到 SLQ2005-2 合并订阅者。

如果我在 SQL2000 端更新或插入一行，它会通过中间的 SQL2005-1 数据库。但是，这些行不会传播到 SQL2005-2 数据库。如果我在 SQL2005-1 数据库中手动插入或更新一行，更改确实会通过。

当事务订阅执行插入或更新时，似乎没有调用合并发布工作的更新或插入触发器。

我怎样才能让它工作？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T17:07:01.393

我在这里猜测，但是您的 2005-1 到 2005-2 触发器是否标记为“不用于复制”，因此正在发生 2000 到 2005-1 被跳过的情况？链接复制不是一个简单的过程，需要修改大量的“向导”内容才能使其工作。

[http://msdn.microsoft.com/en-us/library/ms152529.aspx](http://msdn.microsoft.com/en-us/library/ms152529.aspx)

# windows - 使用 VBScript 创建用户帐户

> ID：696348
> 
> 赞同：2
> 
> 时间：2009-03-30T07:58:59.073
> 
> 标签：windows, vbscript

我正在使用此代码创建用户帐户，

函数 CreateUserAccount (acc, paas)

```
 Dim WinUserAccountName, WinUserAccountPass

 WinUserAccountName = Session.Property("WIN_USER_ACCOUNT")
 WinUserAccountPass = Session.Property("WIN_USER_PASS")

 strComputer = "."
 set objSystem = GetObject("WinNT://" & strComputer)
 set objUser = objSystem.Create("user", WinUserAccountName)
 objUser.SetPassword WinUserAccountPass
 objUser.SetInfo 
```

结束功能

到目前为止它工作正常，我唯一需要实现的是：

1.  当用户名已经在机器中时。向用户显示消息，告诉他/她该用户名已经存在。

我怎样才能在 VBScript 中做到这一点？有我能捕捉到的错误代码吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T08:40:48.863

好的，我找到了我正在寻找的脚本：

```
QueryForUser("kenmyer")
Wscript.Echo "This user account does not exist."

Sub QueryForUser(strUserName)
    strComputer = "."
    Set objDomain = GetObject("WinNT://" & strComputer)
    objDomain.Filter = Array("user")
    For Each User In objDomain
        If lcase(User.Name) = lcase(strUserName) Then
            WScript.Echo User.Name & " already exists."
            WScript.Quit
        End If    
    Next
End Sub 
```

# java - 避免并行继承层次结构

> ID：696350
> 
> 赞同：35
> 
> 时间：2009-03-30T07:59:22.130
> 
> 标签：java, oop, inheritance, anti-patterns

我有两个并行的继承链：

```
Vehicle <- Car
        <- Truck <- etc.

VehicleXMLFormatter <- CarXMLFormatter
                    <- TruckXMLFormatter <- etc. 
```

我的经验是，随着并行继承层次结构的增长，它们可能会成为维护方面的难题。

即不向`toXML(), toSoap(), toYAML()`我的主要课程添加方法。

如何在不破坏关注点分离概念的情况下避免并行继承层次结构？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-30T08:14:13.827

我正在考虑使用访客模式。

```
public class Car : Vehicle
{
   public void Accept( IVehicleFormatter v )
   {
       v.Visit (this);
   }
}

public class Truck : Vehicle
{
   public void Accept( IVehicleFormatter v )
   {
       v.Visit (this);
   }
}

public interface IVehicleFormatter
{
   public void Visit( Car c );
   public void Visit( Truck t );
}

public class VehicleXmlFormatter : IVehicleFormatter
{
}

public class VehicleSoapFormatter : IVehicleFormatter
{
} 
```

这样，您就可以避免额外的继承树，并将格式化逻辑与您的车辆类分开。当然，当您创建新车辆时，您必须向 Formatter 接口添加另一个方法（并在 formatter 接口的所有实现中实现这个新方法）。
但是，我认为这比创建一个新的 Vehicle 类更好，并且对于您拥有的每个 IVehicleFormatter，创建一个可以处理这种新型车辆的新类。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-30T09:28:08.377

另一种方法是采用推模型而不是拉模型。通常你需要不同的格式化程序，因为你打破了封装，并且有类似的东西：

```
class TruckXMLFormatter implements VehicleXMLFormatter {
   public void format (XMLStream xml, Vehicle vehicle) {
      Truck truck = (Truck)vehicle;

      xml.beginElement("truck", NS).
          attribute("name", truck.getName()).
          attribute("cost", truck.getCost()).
          endElement();
... 
```

您将数据从特定类型提取到格式化程序的位置。

相反，创建与格式无关的数据接收器并反转流程，以便特定类型将数据推送到接收器

```
class Truck  implements Vehicle  {
   public DataSink inspect ( DataSink out ) {
      if ( out.begin("truck", this) ) {
          // begin returns boolean to let the sink ignore this object
          // allowing for cyclic graphs.
          out.property("name", name).
              property("cost", cost).
              end(this);
      }

      return out;
   }
... 
```

这意味着您仍然封装了数据，并且您只是将标记的数据提供给接收器。然后，XML 接收器可能会忽略数据的某些部分，可能会重新排序其中的某些部分，然后编写 XML。它甚至可以在内部委托给不同的接收器策略。但是 sink 不一定需要关心车辆的类型，只关心如何以某种格式表示数据。使用内部全局 ID 而不是内联字符串有助于降低计算成本（仅在您编写 ASN.1 或其他紧凑格式时才重要）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T08:33:53.310

您可以尝试避免对格式化程序进行继承。只需制作一个`VehicleXmlFormatter`可以处理`Car`s、`Truck`s、... 的方法，通过分割方法之间的职责和找出一个好的调度策略，重用应该很容易实现。避免超载魔法；在格式化程序中尽可能具体地命名方法（例如`formatTruck(Truck ...)`，而不是`format(Truck ...)`）。

只有在需要双重分派时才使用访问者：当您有类型的对象`Vehicle`并且想要将它们格式化为 XML 而不知道实际的具体类型时。访问者本身并不能解决在格式化程序中实现重用的基本问题，并且可能会引入您可能不需要的额外复杂性。上面的方法重用规则（切碎和分派）也适用于您的访问者实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-18T19:08:08.977

您可以使用[Bridge_pattern](https://en.wikipedia.org/wiki/Bridge_pattern)

*桥接模式将抽象与其实现分离，以便两者可以独立变化*。

[![在此处输入图像描述](https://i.stack.imgur.com/g16qC.png)](https://i.stack.imgur.com/g16qC.png)

两个正交的类层次结构（***抽象***层次结构和***实现***层次结构）使用组合（而不是继承）链接。这种组合有助于两个层次结构独立变化。

实现从不引用***Abstraction***。抽象包含***实现***接口作为成员（通过组合）。

回到你的例子：

`Vehicle`是***抽象的***

`Car`并且`Truck`是***RefinedAbstraction***

`Formatter`是***实施者***

`XMLFormatter`,`POJOFormatter`是 ***ConcreteImplementor***

伪代码：

```
 Formatter formatter  = new XMLFormatter();
 Vehicle vehicle = new Car(formatter);
 vehicle.applyFormat();

 formatter  = new XMLFormatter();
 vehicle = new Truck(formatter);
 vehicle.applyFormat();

 formatter  = new POJOFormatter();
 vehicle = new Truck(formatter);
 vehicle.applyFormat(); 
```

相关帖子：

[什么时候使用桥接模式？它与适配器模式有何不同？](https://stackoverflow.com/questions/319728/when-do-you-use-the-bridge-pattern-how-is-it-different-from-adapter-pattern/37514779#37514779)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T08:13:27.493

为什么不让 IXMLFormatter 成为与 toXML()、toSoap() 和 YAML() 方法的接口，并让 Vehicle、Car 和 Truck 都实现它？这种方法有什么问题？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-18T19:28:22.030

我想将泛型添加到 Frederiks 的答案中。

```
public class Car extends Vehicle
{
   public void Accept( VehicleFormatter v )
   {
       v.Visit (this);
   }
}

public class Truck extends Vehicle
{
   public void Accept( VehicleFormatter v )
   {
       v.Visit (this);
   }
}

public interface VehicleFormatter<T extends Vehicle>
{
   public void Visit( T v );
}

public class CarXmlFormatter implements VehicleFormatter<Car>
{
    //TODO: implementation
}

public class TruckXmlFormatter implements VehicleFormatter<Truck>
{
    //TODO: implementation
} 
```

# c# - 使用 MatchEvaluator 委托生成列表而不使用类变量？

> ID：696352
> 
> 赞同：1
> 
> 时间：2009-03-30T08:00:13.097
> 
> 标签：c#, regex

**背景：**我正在尝试从具有整个引用的页面生成引用列表，并用 HTML 替换引用标记。

我正在使用 C#

文本看起来像：

```
The dog ate 3 cats and felt ill <ref name="something">http://cateater.com</ref> 
```

我想使用 Regex.Replace 方法替换所有`<ref>`s，将它们推入一个 Hash 中，稍后我可以将其呈现为引用列表。

**问题：**看起来在替换操作期间运行代码的方式是使用一个接受 Match 对象的“MatchEvaluator Delegate”，但它似乎不能接受其他参数。

[MSDN 上](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx)的示例使用类变量来完成此操作，但我希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T08:11:24.270

由于您使用的是 XML 标记，是否有原因无法将源文档作为 XML DOM 处理？在这种情况下，使用 XSLT 会比 RegEx 容易得多。

如果没有，那么可以通过使用匿名函数来有效地对 MatchEvaluator Delegate 进行参数化：-

```
MatchEvaluator evaluator = delegate(Match m)
{
    // code to return replacement
    // this code uses and modifies lookups
}

Dictionary<string, string> lookups = new Dictionary<string, string>();
sOutput = someRegex.Replace(sInput, evaluator); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T13:46:19.773

使用以下内容获取参考列表：

```
var srcmatches = Regex.Matches(src, "<ref .*?>(.*?)</ref>");

List<string> refs = srcmatches.OfType<Match>().Select(x => x.Groups[1].ToString()).ToList(); 
```

首先它匹配`<ref>`标签，然后它查询标签的内容并将其转换为字符串列表。

# java - 在 IE6 上的小程序中本地访问资源

> ID：696356
> 
> 赞同：2
> 
> 时间：2009-03-30T08:00:54.047
> 
> 标签：java, applet, internet-explorer-6, getresource, next-generation-plugin

遇到错误时试图遵循[http://java.sun.com/docs/books/tutorial/uiswing/components/icon.html 。](http://java.sun.com/docs/books/tutorial/uiswing/components/icon.html)`"C:\projects\html\test.html"`似乎 getResource在 IE6 中本地访问页面时（即，当 URL 为 时）返回 null 。类和资源在同一个 Jar 文件中。

有人知道原因和解决方法（如果存在的话）吗？

在 Win XP/IE 6/JRE 1.6.0_11 中遇到，但在 Win XP/IE 7/1.6.0-b105 中没有遇到。

在它工作的环境中，类加载器是：

```
sun.plugin.security.PluginClassLoader 
```

在它被破坏的环境中，它是：

```
sun.plugin2.applet.Applet2ClassLoader 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-24T07:19:54.500

正如 Nick 提到的，Java 6 更新 11 更改了在文件系统上运行的小程序的安全设置。通过使用 getResource() 您正在从 URL 加载，并且可能不小心碰到了不应该真正适用于您的新限制。

请尝试 getResourceAsStream() ，如下所示：

```
InputStream in = getClass().getResourceAsStream("image.jpg");
Image image = ImageIO.read(in);
ImageIcon icon = new ImageIcon(image); 
```

我还没有实际测试过这个，但我通常不会从文件系统运行小程序:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T17:31:31.863

听起来不同之处在于您在 1.6u10中使用了[“下一代”插件技术。](http://java.sun.com/developer/technicalArticles/javase/java6u10/#plugin)You can disable it and use the older plugin technology by changing the appropriate option under the Advanced tab in the Java Control Panel. 这至少可以将您的问题隔离到特定版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-08T10:24:12.250

您是否在 Java 控制台中检查了消息？

据我所知，Internet Explorer 6 的安全规则比旧的 IE5 或 Netscape/Mozilla 更严格。虽然 Netscape 允许从本地驱动器打开的小程序访问该驱动器上的资源，但 IE 不允许。在这种情况下，您可能会在控制台中看到一些安全异常。

解决方法是设置一个本地网络服务器，例如[Tomcat](http://tomcat.apache.org/)，并通过它访问包含小程序的 html 文件，例如[http://127.0.0.1:8080/some/applet.html](http://127.0.0.1:8080/some/applet.html)。[然后小程序不再来自您的硬盘，并且能够访问服务器http://127.0.0.1:8080/](http://127.0.0.1:8080/)提供的任何资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-22T22:09:24.090

The security settings running locally is very restrictive, see [security report](http://sunsolve.sun.com/search/document.do?assetkey=1-66-246387-1) (similar question asked [here](https://stackoverflow.com/questions/850497/socket-connection-to-originating-server-of-an-unsigned-java-applet/853558#853558)).

As suggested in another answer, run it in a web-server (eg [tomcat](http://tomcat.apache.prg)) and most of your problems should be gone.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-30T08:39:00.430

只是一个猜测：也许小程序安全限制在这里适用？一般来说，除非小程序没有签名，否则是不允许访问本地资源的。如果从本地存储的页面打开小程序，我不确定这是如何工作的，但这很可能是根本原因。

签署小程序并在浏览器中接受证书可能会解决问题。

# nhibernate - 推荐 Castle Windsor/NHibernate 堆栈？

> ID：696359
> 
> 赞同：3
> 
> 时间：2009-03-30T08:04:05.800
> 
> 标签：nhibernate, castle-windsor

我有一个个人（学习）项目，它使用 Castle Windsor（使用 NHibernate 设施）和 NHibernate（以及 ASP.NET MVC 和 Moq，以及 SQL Server 2008，所有我想了解更多的东西）。

周末我尝试使用[NHibernate Validator ，但它需要](http://nhforge.org/wikis/validator/default.aspx)[NHibernate](http://www.hibernate.org/343.html)的 2.1.0Alpha2 版本。

由于 Castle Windsor 1.0RC3 是针对旧版本的 NHibernate 构建的，所以一切都出错了。

我在 Castle Windsor 网站上查看，组合安装程序似乎已被弃用，并且似乎有一段时间没有任何组件已打包。

那么：我应该在我的 ASP.NET MVC 软件堆栈中使用哪些版本的 NHibernate 和各种 Castle 组件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T17:51:02.660

您应该查看[S#arp Architecture](http://groups.google.com/group/sharp-architecture)。附带一个 VS 项目模板，包含快速启动和运行所需的所有二进制文件。使用 ASP.NET MVC 1.0、NHibernate 2.0.1（但 2.1 已记录并且可以使用）、Castle 等。

这是一个很棒的框架。很棒的文档和非常有用的用户社区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T10:48:39.867

到目前为止，最好的选择是不幸地检查 Castle 的树干，以这种方式编译和使用它。

当温莎城堡被释放时，这将被“修复”（很快;））。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T14:26:12.607

我正在使用以下组件：

*   NHibernate 2.0.1GA
*   NHibernate 验证器 1.0.0GA
*   温莎城堡（定制）

为了获得与 NHibernate 期望相匹配的 Castle Windsor & co 版本，我从他们的 subversion 存储库中检查了 Castle 的修订版 5330（这是 NH 的构建依据）并构建了它。

奇迹般有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T09:31:13.517

使用 Castle[构建服务器](http://builds.castleproject.org/cruise/index.castle)。它带有自己的 NHibernate 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-28T15:47:18.023

托德上面说的。S#arpe 架构将使您免于尝试手动整理依赖关系。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-24T09:14:10.203

还有大黄蜂：

*   [http://code.google.com/p/hornget/](http://code.google.com/p/hornget/)

这似乎已经死了，但现在也有 Nu：

*   [http://nu.wikispot.org/](http://nu.wikispot.org/)

这些消除了依赖地狱的痛苦，让 n00bs 更快地启动和运行，并且更少担心构建版本等等。所有这一切都有一个尖锐的学习曲线，但痛苦是值得的:)

# objective-c - 在另一个类中访问 RootViewController 的数据成员

> ID：696360
> 
> 赞同：4
> 
> 时间：2009-03-30T08:04:57.967
> 
> 标签：objective-c, cocoa, cocoa-touch, macos

我正在使用 Objective-C 开发一个 iPhone 应用程序。我想访问另一个类中 RootViewController 类的 NSMutableArray 类型的数据成员。我尝试使数组静态。但我想要一个非静态数组。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-30T16:06:02.257

你需要两件事：

1.  参考`RootViewController`
2.  一种让你的变量脱离`RootViewController`.

在您（很可能）`RootViewController`每个应用程序都有一个的情况下，在应用程序的委托中保留对该对象的引用是有意义的。您可以像这样获取应用程序委托：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate]; 
```

在您的应用程序委托类中，您应该添加一个名为的属性`rootViewController`来公开您的`RootViewController`对象。现在你可以写像

```
RootViewController *theRootViewController = appDelegate.rootViewController; 
```

这满足了第一个要求。现在，为了访问视图控制器拥有的对象，您需要向`RootViewController`. 您并没有真正说出对象是什么或做什么，所以我们就叫它吧`myMutableArray`。在 上创建一个`readonly`具有该名称的属性，`RootViewController`现在您将能够编写如下内容：

```
NSMutableArray *myArray = theRootViewController.myMutableArray; 
```

这会让你做你想做的事。

不过，我必须警告你：暴露 an`NSMutableArray`通常不是一个好主意。原因是，如果您更改该数组的内容，`RootViewController`您将不知道您已经这样做了。因此，如果您正在创建一个主从视图，您`RootViewController`将不会知道您添加了一个新对象。

`RootViewController`如果您编写允许在内部修改数组的方法会更好。例如，您可以有一个名为的方法`addFooObject:`来管理数组。然后视图控制器会知道你对它做了什么。对于访问，您可以很容易地从您的属性中返回可变数组的不可变的、自动发布的副本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-09-22T23:58:49.363

您还可以在一行代码中使用 SharedApplication 访问根视图控制器：

```
[[[UIApplication sharedApplication] keyWindow] rootViewController] 
```

# java - 使用java对软件进行编程设置

> ID：696361
> 
> 赞同：-1
> 
> 时间：2009-03-30T08:05:22.817
> 
> 标签：java

我正在构建一个餐厅系统，我想授予管理员更改和保存设置的权限，以便其他用户登录时，可以找到新设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T08:20:29.147

Java 有一个专用的[首选项 API](http://java.sun.com/j2se/1.4.2/docs/guide/lang/preferences.html)，它比使用属性文件更强大——这应该正是您想要的。它提供“系统”首选项和“用户”首选项 - 大概管理员将被允许更改“系统”首选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T08:09:53.183

您可以使用 java 属性 api 将任何设置保存为键值对。

教程在这里[http://java.sun.com/docs/books/tutorial/essential/environment/properties.html](http://java.sun.com/docs/books/tutorial/essential/environment/properties.html)

这可以将您的属性保存为 .properties 文件以及 XML 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T08:12:15.750

您可以在磁盘上创建一个目录并存储看起来像的文件

```
user=Ben
font=arial
... 
```

您可以使用 java.util.Properties 对象读取这些文件。

```
Properties p;
p.load(inStream); 
```

您可以添加到系统属性并通过调用在代码的每个位置使用它的属性

```
System.setProperty(font, arial);

System.getProperty(font); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T10:57:11.923

有很多方法可以做到这一点： - 序列化 - 首选项 API - 使用文本文件（XML、属性文件、ini 类文件等） - 数据库

# javascript - YUI：取消窗口关闭事件时自定义消息浏览器显示

> ID：696364
> 
> 赞同：1
> 
> 时间：2009-03-30T08:08:53.323
> 
> 标签：javascript, ajax, cross-browser, yui

我有一个 YUI 应用程序。在某些情况下，我想在用户关闭窗口之前提醒他。因此我捕获窗口关闭事件并执行

```
onWindowClose: function(e) {
        if (...)
        {
            YAHOO.util.Event.preventDefault(e);
        }
    } 
```

浏览器显示一条标准消息：“您确定要离开此页面吗？按 OK 继续，取消停留在当前页面”。

如何自定义浏览器显示的消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T08:35:46.770

检查 onbeforeunload 事件和我的答案

[用户关闭 IE 时显示消息框](https://stackoverflow.com/questions/564778/show-a-message-box-when-user-close-ie/564850#564850)

和

[ASP.NET：更改数据关闭窗口时发出警告](https://stackoverflow.com/questions/250055/asp-net-warning-on-changed-data-closing-windows)

它可能对你有用。

# .net - 来自 IDataReader 的 .NET 对象水合会降低性能

> ID：696375
> 
> 赞同：0
> 
> 时间：2009-03-30T08:13:21.473
> 
> 标签：.net, performance, string, datareader

我正在尝试对约 400 个业务对象的列表进行水合，当它需要对字符串进行水合时，性能会变得非常慢。为 400 个物体补水需要超过 20 秒。

**编辑**

*我们使用 MySQL 5.1 和 dotConnect for MySQL v5.0.12 作为数据提供者[http://www.devart.com/dotconnect/mysql/](http://www.devart.com/dotconnect/mysql/)*

我做了一些基准测试以将其缩小到导致问题的字符串类型。我开始测量从记录 2 到 n 的时间，以忽略加载其他程序集可能占用的时间。

以下代码在 0ms 内水合 1 个对象

```
objUserInfo.PortalID = portalId
objUserInfo.IsSuperUser = Convert.ToBoolean(dr("IsSuperUser"))
objUserInfo.UserID = Convert.ToInt32(dr("UserID")) 
```

这也可以在 0 毫秒内为 1 个对象补水

```
objUserInfo.PortalID = portalId
objUserInfo.IsSuperUser = Convert.ToBoolean(dr("IsSuperUser"))
objUserInfo.UserID = Convert.ToInt32(dr("UserID"))
objUserInfo.Firstname = "FirstName" 
```

但是，一旦我将 datareader 对象转换为字符串，平均需要 53ms

```
objUserInfo.PortalID = portalId
objUserInfo.IsSuperUser = Convert.ToBoolean(dr("IsSuperUser"))
objUserInfo.UserID = Convert.ToInt32(dr("UserID"))
objUserInfo.Firstname = Convert.ToString(dr("FirstName")) 
```

我还尝试为 2 根琴弦补水并扼杀它并没有像 1 根琴弦那样吹出性能？以下仅需要平均 57ms 来水化 1 个对象

```
objUserInfo.PortalID = portalId
objUserInfo.IsSuperUser = Convert.ToBoolean(dr("IsSuperUser"))
objUserInfo.UserID = Convert.ToInt32(dr("UserID"))
objUserInfo.Firstname = Convert.ToString(dr("FirstName"))
objUserInfo.LastName = Convert.ToString(dr("LastName")) 
```

我知道很多人使用上述语法来水合业务对象。有没有更有效/更快的方法来做到这一点？

**编辑** 刚刚做了另一个测试，它是在一个字符串上进行直接投射，它产生相同的慢速:( 53ms 只是为了做投射。

```
objUserInfo.FirstName = DirectCast("alex", String) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T08:27:46.993

试试这个：

代替

```
objUserInfo.Firstname = Convert.ToString(dr("FirstName")) 
```

采用

```
objUserInfo.Firstname = dr.GetString(2); 
```

1.  使用 GetXXX 方法并依靠 Microsoft 优化转换。（编辑：我怀疑这`Convert.ToString(dr("FirstName"))`是在做一些丑陋的隐式和耗时的转换和/或（取消）装箱操作。）
2.  不要使用字符串索引器（“FirstName”）访问列，而是使用数字索引器（2）。这更快，但可读性较差。

编辑：亚历克斯发现了问题。不是选角问题！他对此的评论：

> 好的，我已经找到了问题！我正在使用 DotNetNuke 并填充其中一个标准对象。问题是，当我设置 FirstName 属性时，它会再次调用配置文件对象，这实际上需要很长时间！这与字符串转换或强制转换无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T08:22:31.013

您使用什么数据提供者？我们在使用 oracle one 时遇到了一个丑陋的问题。

最有效的方法是调用 dr.GetString(columnNumber) - 您通过 dr.GetOrdinal(columnName) 获得的列号（您可以在读取循环的开头缓存）。

然而，这不应该是真正的问题。不能是列的大小吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T08:20:19.350

> 我还尝试为 2 根琴弦补水并扼杀它并没有像 1 根琴弦那样吹出性能？以下仅需要平均 57ms 来水化 1 个对象

你是如何测量时间的？也许涉及到额外的程序集加载，您的 53 毫秒将其考虑在内。

您应该仅在第一个循环（第一次水合）之后开始测量时间。这样，任何装配加载都将在测量之前完成。

# visual-studio-2008 - Visual Studio 团队资源管理器在 build en 报告文件夹中显示红十字

> ID：696391
> 
> 赞同：3
> 
> 时间：2009-03-30T08:22:17.550
> 
> 标签：visual-studio-2008, explorer

任何想法可能是什么问题？

一些事实：

- 直接报告链接有效（我可以[浏览 http://theserver/Reports/Pages/Folder.aspx?ItemPath=/someSite](http://theserver/Reports/Pages/Folder.aspx?ItemPath=/someSite)）

-我有足够的权利

-它已经工作了，但它突然停止工作

-我可以开源控制

-我通过本地局域网与 tfs 服务器直接连接

-我的同事们没有这样的问题

[TFSproblem http://img178.imageshack.us/img178/5871/tfsproble.jpg](http://img178.imageshack.us/img178/5871/tfsproble.jpg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T23:24:38.240

我不久前遇到了这个问题，并在[这里](http://social.msdn.microsoft.com/forums/en-US/tfssetup/thread/07a54abf-3c48-492f-bda6-53e7dce1d8d1/)找到了我的解决方案。该解决方案由线程底部附近的“Fern82”描述。

您需要做的是删除以下目录：

```
C:\Documents and Settings\<Current User>\Local Settings\Application Data\Microsoft\Team Foundation\1.0 
```

接下来在 Visual Studio 命令提示符中运行以下语句：

```
devenv /resetuserdata 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-12T21:06:42.707

搜索以下链接以获取完整解决方案：

问题：报告文件夹和新建 TFS 团队项目创建错误：TF30004、TF30171、TF300224

[http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/27eca9a3-39e1-45ce-8f3c-8af8ede006c6](http://social.msdn.microsoft.com/Forums/en-US/tfsadmin/thread/27eca9a3-39e1-45ce-8f3c-8af8ede006c6)

阿伦桑加尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-12T09:39:38.820

我遇到了同样的问题，而且显然是一个单独的问题，无法发布。我找到了发布问题的解决方案，它也解决了我的 TFS 问题！

这可能对你有用。打开命令提示符并运行以下命令，具体取决于您的 Windows 版本。

regsvr32 "C:\Program Files (x86)\Internet Explorer\ieproxy.dll"

regsvr32 "C:\Program Files\Internet Explorer\ieproxy.dll"

这将重新注册 Visual Studio 使用的 Internet Explorer dll。

# javascript - Adobe AIR for JS 是否支持某种非持久性数据容器？

> ID：696396
> 
> 赞同：0
> 
> 时间：2009-03-30T08:25:21.773
> 
> 标签：javascript, air, session-state

对于需要在 Adob​​e AIR 中开发应用程序的项目，我选择 HTML/Ajax 版本。目前该项目很小，包含登录部分和详细信息部分。

我想做的是在应用程序启动时显示 login.html，如果那是成功的 show/browse-to details.html 。

我的问题是，是否有一些快速而肮脏的方法可以将我从登录中收到的一些信息（例如用户 ID）保存在会话/应用程序容器中？

我简要查看了他们的`BlackBookSafe`示例，但我看到的是，虽然有多个页面，但它们实际上一直保持`blackbooksafe.html`打开状态，并将子页面加载到正文中，从而将会话数据保存在`blackbooksafe.html`
但在我看来，它创建了一种一团糟，宁愿每个页面都照顾好自己（javascript wise），这将使它更容易阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-13T22:56:41.507

好的，我意识到这个线程是旧的，但如果它对某人有帮助。

我的解决方案感觉就像一个完整的 hack - Adob​​e 的耻辱 - 但它有效。

# 将数据作为 JSON 字符串存储在菜单数据中

菜单在页面加载时保持不变，您可以将自定义数据分配给菜单。到目前为止，它似乎只喜欢简单的数据类型，如字符串或整数。所以解决方案是下载 json2.js ( [http://json.org](http://json.org) ) 并使用它`stringify()`和`parse()`命令将您的应用程序状态转换为 JSON 字符串，然后将其存储在`.data`菜单的成员中。

我将它存储在第一个菜单中。在`items`列表中。
使用`jQuery`，我的应用程序代码如下所示：

```
 function InitApp() {
    // check before we create the menu for the very first time.
    var menu = air.NativeApplication.nativeApplication.menu;
    var firstMenu = menu.items[0];
    var dataStore = firstMenu.data;
    if (dataStore == null) {
        air.trace("Create Menu Data Store");
        var dataObj = { 
            msg: "Message Object",
            status: 1 
        };
        var dataObjStr = JSON.stringify(dataObj);
        firstMenu.data = dataObjStr;
        dataStore = firstMenu.data;
        air.trace("Created menu data store");
        air.trace(dataObjStr);
    } else {
        var dataStore = firstMenu.data;
        var obj = JSON.parse(dataStore);
        air.trace("Retrieved Menu Data Store");
        air.trace(obj.msg);
    }

    BuildMenu();
    // check after we create our menu
    firstMenu = air.NativeApplication.nativeApplication.menu.items[0];
    firstMenu.data = dataStore; // pass it along.

}

$(document).ready(InitApp); 
```

此数据在应用程序关闭时消失，因此仅在应用程序打开时才会持久。

真正的答案是 nativeApplication 支持与菜单完全相同的功能！

注意：我是在 Mac 上编写的，因此您必须调整代码以将 NativeWindow.menu 用于 windows / linux。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T16:57:54.357

我看到了一些技巧，例如将数据保存在文件中（在 Adob​​e 的一个示例中使用），或者将其放入数据库中，但我没有找到任何快速的非持久性数据存储。我希望看到一个连接到 NativeApplication 对象的键/值字典，我可以在其中添加我的非持久性数据，但这并不存在。

最后我选择了一个 IFRAME 解决方案，父页面存储非持久性数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-31T17:04:24.247

由于您使用的是 AIR，我认为这不是 Web 应用程序。

当然，Web 应用程序需要会话的原因是网页不打开持久连接。但是，在您的情况下，您可以使用正常的持久连接资源，其中包括保持打开状态的数据库连接，并使用您正在使用的任何 dbms 连接解决方​​案包含登录信息。出于您的目的，这应该完成在网络上使用的会话。

或者，您可以使用单例用户类。在应用程序期间保持打开状态。

* * *

编辑：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T20:15:08.140

为什么不只创建一个常规对象：

```
var storage = {}; 
```

用法：

```
storage.pswd = 'password';
storage.user = 'username';
// Retrieval:
alert(storage.pswd); 
```

# c# - 如何在 C# 中使用感知器实现 AND、OR 和 XOR 逻辑？

> ID：696397
> 
> 赞同：1
> 
> 时间：2009-03-30T08:25:24.237
> 
> 标签：c#, neural-network, perceptron

我正在学习神经网络基础知识。

如何在 C# 中使用感知器实现 AND、OR 和 XOR 逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T08:31:44.550

查看 SNNS 和 JNNS：

[http://www.ra.cs.uni-tuebingen.de/SNNS/](http://www.ra.cs.uni-tuebingen.de/SNNS/)

[http://www.ra.cs.uni-tuebingen.de/software/JavaNNS/welcome_e.html](http://www.ra.cs.uni-tuebingen.de/software/JavaNNS/welcome_e.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T07:33:42.897

你可以查看我关于感知器（人工神经网络）的文章，我试图提供一个直观的例子和详细的解释。

“人工神经网络（感知器）从自动驾驶汽车中检测汽车/行人的直观示例”

[https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10](https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10)

[[ ![在此处输入图像描述](https://i.stack.imgur.com/15e10.jpg)]](https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10) [2](https://i.stack.imgur.com/15e10.jpg)

# asp.net - 什么是 ASP.NET 的最佳/推荐 CAPTCHA 组件

> ID：696398
> 
> 赞同：19
> 
> 时间：2009-03-30T08:26:20.117
> 
> 标签：asp.net, captcha

有人对在 ASP.NET 项目中使用的 CAPTCHA 组件有任何建议吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-30T08:28:46.367

我一直在为几个网站使用[recaptcha ，并取得了巨大的成功。](https://developers.google.com/recaptcha/docs/v3)我真的推荐它。

[这里](https://developers.google.com/recaptcha/docs/aspnet)有一个用于asp.net 的recaptcha 控件。

我也成功地使用[了这个](http://www.mondor.org/captcha.aspx)验证码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-30T14:08:13.693

在评估任何验证码解决方案之前，您应该建立一个清晰的用户档案。不用说，任何验证码解决方案都会使您的网站更难使用。如果您的用户年龄较大且视力有困难，那么即使不是不可能，破译验证码也是极其困难的。随机字符与真实单词可能会影响您的用户。母语可能会影响用户对字符表示的内容（特殊字符）的感知。

这里没有建议，但是了解您的用户以及他们将容忍和/或能够做到的事情应该会对您的决定产生重大影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-23T13:54:39.427

[BotDetect](http://captcha.com/asp.net-captcha.html)怎么样？

免费版本也可用，但它们不会强迫您的访问者解决 2 个验证字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-01-08T02:02:59.243

我会支持第一个答案中提到的[Mondor 的验证码。](http://mondor.org/captcha.aspx)与 reCaptcha 不同，它是完全独立的，您无需调用其他网站。此外，它允许要求求解一个简单的方程（如“5 + 3”），而机器人会回答“5+3”，而人类会回答 8。此外，与 reCaptcha 不同，您可以根据需要自定义它，并且包括您自己的字母表（西里尔文、阿拉伯文、中文 - 随便）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-05T11:30:45.263

如果您想依赖 Google，Recaptcha 是一个很好的验证码，可以保护您的表单。

Telerik 有一个很棒的[ASP.Net 验证码控件](http://www.telerik.com/products/aspnet-ajax/captcha.aspx)，您也应该检查一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T12:22:28.357

我也在使用recaptcha，它很棒！

这是 ASP.NET 插件/包装器的链接：

[在 ASP.NET 中使用 reCAPTCHA](https://developers.google.com/recaptcha/docs/aspnet)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-26T09:50:42.587

你可以试试[Picatcha](http://picatcha.com/) - 使用起来很酷，而且看起来很容易实现。图片与文字。相当可定制

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-30T13:04:50.980

如果您使用 VB.NET 作为您的基础语言（甚至是经典 ASP），我刚刚在[TipsTrips.org](http://www.tipstricks.org/)找到了一个很棒的免费 CAPTCHA 。您自定义所需的验证码，然后下载代码。.NET 下载包括一个 ASHX 处理程序文件、两个 VB 类文件和一个 ASPX 测试页。

# c++ - 如何将不同的模板类型放入一个向量中

> ID：696399
> 
> 赞同：9
> 
> 时间：2009-03-30T08:26:27.433
> 
> 标签：c++, templates, polymorphism

我想构造一条长度或参数数量未知的消息。我拿了一个简单的模板，比如

```
template <typename T> class Argument {
public:
    int size;
    int type;
    T data;
}; 
```

并且有一些重载

```
addMessage (int value) {
    Argument<int> *a = new Argument<int>;
    vec.push_back(a);
} 
```

（对于字符串等也是如此）我尝试将其全部推入一个向量中。我试过

```
std::vector<Argument* > vec;
std::vector<Argument<typename T>* > vec;
std::vector<Argument<>* > vec; 
```

但这似乎没有任何作用。有没有办法做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-30T08:30:14.227

选项 1：确保所有不同类型的参数都派生自基类并使用指向该类的指针。请注意，此选项在内存管理方面存在风险。您可能希望通过使用 boost::shared_ptr 而不是指针来使其更安全。否则，当从向量中删除项目时，您必须手动清理。

选项 2（我个人最喜欢的）：使用[Boost.Variant](http://www.boost.org/doc/libs/1_38_0/doc/html/variant.html)生成所有可能参数类型的 typedef，并将该 typedef 用作 std::vector 中的参数类型

```
typedef boost::variant<ArgumentType1, ArgumentType2, ArgumentType3> ArgumentType;
std::vector<ArgumentType> vec; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T08:31:13.630

最简单的方法是创建一个未模板化的基本 Argument 类，然后从它派生特定的数据类型。（您甚至可以使模板化版本直接从基类派生并只使用这两个类。）然后将它们作为指针存储在向量中。

这确实需要某种函数来访问参数值并根据需要执行任何转换。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-30T08:28:50.313

您可以使用 boost::variant ( [http://www.boost.org/doc/libs/1_38_0/doc/html/variant.html](http://www.boost.org/doc/libs/1_38_0/doc/html/variant.html) )
或 boost::any ( [http://www.boost.org/doc/ libs/1_38_0/doc/html/any.html](http://www.boost.org/doc/libs/1_38_0/doc/html/any.html) ) 类型

或 void* - 丑陋且非类型安全
或实现自己的泛型类型，该类型将具有一个接口和不同的模板化实现，并将指针存储在该接口上。

但我不确定使用类似类型是否是好的设计。

# objective-c - NSMutableArray 仅将对象添加为指针？

> ID：696417
> 
> 赞同：5
> 
> 时间：2009-03-30T08:33:53.920
> 
> 标签：objective-c, cocoa, nsmutablearray, nsnumber

我有这个小代码

```
 NSMutableArray *myArray = [[NSMutableArray alloc] init]; 
 NSNumber *myNumber = [NSNumber numberWithDouble:752.65];

 [myArray addObject:myNumber]; 
```

使用此代码，我将对象存储在数组中。但现在我有两个相互独立的对象。

如果我在将 myNumber 添加到数组后更改它，则数组内的值不会改变。我怎样才能存档呢？我试图只给数组一个指针，但它不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-30T10:58:01.657

您不能将*变量*放入数组中，这`myNumber`就是：变量。变量是容器，数组也是；不同之处在于变量不是对象*，就像数组一样，您只能将对象放入数组中。

您传递给`addObject:`的不是变量`myNumber`，而是它包含的对象。这就是您要添加到数组中的内容。

要添加变量而不是其中的对象，您需要执行`addObject:&myNumber`, 以便将指针传递给变量本身。但这不起作用，原因有两个：

1.  正如我所提到的，变量不是对象，您只能添加对象。
2.  由于这是一个局部变量，所以函数退出时它会消失；然后你有一个指向数组内死内存的指针。当您访问该指针处的任何内容时，您的程序将崩溃。

有三种解决方案可以工作：

1.  正如 f3lix 建议的那样，创建一个可变数字类，并从此类而不是 NSNumber 创建您的数字对象。您需要按照[NSNumber 文档中的](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/)描述覆盖 NSValue 的所有原始方法。
2.  替换数组中的对象而不是改变它。当然，这需要从您想要更改数字的任何地方访问数组。
3.  创建一个具有数字作为属性的模型对象类。

在我看来，最后一个解决方案是正确的。我怀疑您只管理一个数字列表；更有可能的是，您正在向用户显示具有数字作为属性的事物的列表。在您的代码中对此进行建模，一切都变得更加简单。

用模型对象替换裸 NSNumbers 后的代码将类似于：

```
MyModelObject *myModelObject = [[[MyModelObject alloc] init] autorelease];
[myModelObject setNumber:[NSNumber numberWithDouble:42.0]];
[myArray addObject:myModelObject];

//Some time later, you decide to change the number.
[[myArray objectAtIndex:idx] setNumber:[NSNumber numberWithDouble:43.0]];
//Or:
for (MyModelObject *obj in myArray) {
    [obj setNumber:1000.0];
} 
```

*我的意思是可可对象。C 语言确实将任何指针、int 等称为“对象”，但这是一个不同的定义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-30T09:12:57.227

您的问题是 NSNumber 对象是*不可变*的；这意味着您无法更改它们的值。所以为了改变一个值，你必须创建一个新的 NSNumber 对象。例如：

```
myNumber = [NSNumber numberWithDouble:[myNumber doubleValue]+1.0] 
```

现在，当然，您的 myNumber 指向的对象与添加到数组中的对象不同。因此，您必须通过替换更改的 NSNumber 对象来更新数组：

```
[myArray replaceObjectAtIndex:0 withObject:myNumber] 
```

好吧，这给您留下了一个问题，您必须将索引与每个 NSNumber 一起存储才能更新数组。如果您想传递 NSNumber 对象并允许更改值，这很不方便。

您可以通过引入包装器对象来解决此问题，该包装器对象包装 NSNumber 以允许透明更新，或者您可以创建自己的类来处理您的 doubleValue（有点可变 NSNumber 类）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T09:11:03.363

如果您更改指针 myNumber，那么正如您所说，存储在数组中的值不会更改。但是，存储在数组中的指针是 myNumber 的副本，因此如果将 myNumber 指向的对象更改为数组元素指向的对象，将反映该更改，因为它是同一个对象。

您似乎想要做的是使数组指向不同的对象（每当您更改 myNumber 时）。您必须手动执行此操作，例如 -replaceObjectAtIndex:withObject:，如下所示：

```
NSNumber *myNumber = [NSNumber numberWithDouble: 3.141592];
int myNumberIndex = [myArray count];
[myArray addObject: myNumber];

myNumber = ...; //whatever
[myArray replaceObjectAtIndex: myNumberIndex withObject: myNumber]; 
```

基本上，这段代码所做的是存储您放入 myArray 的对象的索引，然后用新的对象替换该对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T11:34:17.660

听起来你想要类似`NSPointerArray`...

> NSPointerArray 可能是最强大的（这些）专用集合类之一。它指定了一个 `NSArray`类似的接口，但允许插入空值（和任意指针）。此外，通过在创建 的实例时指定某些选项 `NSPointerArray`，您可以将阵列配置为针对其中存储的对象具有特定的内存管理策略。
> 
> 当您使用方法创建 NSPointerArray 实例时，您可以为实例指定选项`-initWithOptions:`或`-initWithPointerFunctions:`。使用方法 -initWithOptions:` 时，您指定要创建的数组将遵守您作为参数传递的选项所规定的策略。使用按位或指定的选项为数组设置特定的策略或“个性”。

它继续...

> 当您将此实例传递给 时`NSPointerArray`，它将使用您在插入、删除对象等时定义的函数，而不是正常的保留、释放和其他将在正常的`NSArray`.

[来源（但如果您想了解更多信息，我会寻找其他地方）](http://www.scribd.com/doc/56496659/179/Using-specialized-collections)

# xml - 无效的 XML 文件？

> ID：696424
> 
> 赞同：2
> 
> 时间：2009-03-30T08:37:28.140
> 
> 标签：xml, format

我在 Visual Studio 2008 中将以下文件作为新的 XML 文件编写，它报告以下错误。错误消息是什么以及为什么它被视为错误格式的 XML 文件？

这是 XML 文件和相关的错误消息。

```
<?xml version="1.0" encoding="utf-8"?>
<Foo>&#x2;</Foo>

Error   1   Character ' ', hexadecimal value 0x2 is illegal in XML documents.   XMLFile1.xml    2   6   Miscellaneous Files 
```

感谢提前，乔治

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-30T08:43:56.580

您的问题是对 的引用，它本质上是无法打印的随机二进制数据。这在 XML1.0 中是不允许的（它在 XML 1.1 和更高版本中，但不确定您的 .Net 版本是否允许，即使您更改 XML 版本）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T13:42:18.030

> 我在 Visual Studio 2008 中将以下文件作为新的 XML 文件编写，它报告以下错误。错误消息是什么以及为什么它被视为错误格式的 XML 文件？

**根据[W3C XML 1.0 Specification](http://www.w3.org/TR/2008/REC-xml-20081126/)，XML 文档中允许的唯一字符`&#x20;`是制表符 (09)、换行符 (0A) 和回车符 (0D)。**

**[XML 1.1 允许几乎所有字符](http://www.w3.org/TR/2006/REC-xml11-20060816/#charsets)**，不包括 00，但很少实现，不应该依赖于找到 XML 1.1 实现。

即使在 XML 1.1 规范中。据说`&#x20;`“强烈反对”使用下面现在允许的字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T09:34:48.767

查看[XML 1.0 规范](http://www.w3.org/TR/2008/REC-xml-20081126/)

具体见第 2.2 节对 Characters 的定义：

```
Char ::= #x9 | 
         #xA |
         #xD |
         [#x20-#xD7FF] |
         [#xE000-#xFFFD] |
         [#x10000-#x10FFFF] 
```

以及4.1节中实体引用的定义：

> 使用字符引用引用的字符必须与 Char 的产生式相匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T08:40:35.027

0x2 不是可打印字符。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-30T09:01:06.257

如果您需要将二进制数据放入 XML 中，请使用 CDATA 部分。 [http://www.w3schools.com/XML/xml_cdata.asp](http://www.w3schools.com/XML/xml_cdata.asp)

# c# - 总和可为空的 Linq 查询

> ID：696431
> 
> 赞同：72
> 
> 时间：2009-03-30T08:40:31.393
> 
> 标签：c#, linq, linq-to-sql, sum, nullable

```
from i in Db.Items
select new VotedItem
{
    ItemId = i.ItemId,
    Points = (from v in Db.Votes
              where b.ItemId == v.ItemId
              select v.Points).Sum()
} 
```

我收到了这个查询，但是如果没有发现异常投票，它将失败：

```
The null value cannot be assigned to a member with type System.Int32 which is a non-nullable value type. 
```

我假设它是因为 sum 返回一个 int 而不是一个可为空的 int，所以给 sum 一个 int？由于输入仅给出相同的错误，可能导致 sum 仅适用于整数。

有什么好的解决方法吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2010-02-09T21:50:27.533

您想使用 Sum 的可为空形式，因此请尝试将您的值转换为可为空的：

```
from i in Db.Items
select new VotedItem
{
    ItemId = i.ItemId,
    Points = (from v in Db.Votes
              where b.ItemId == v.ItemId
              select v.Points).Sum(r => (decimal?) r.Points)
} 
```

您的问题在这里更详细地讨论：

[http://weblogs.asp.net/zeeshanhirani/archive/2008/07/15/applying-aggregates-to-empty-collections-causes-exception-in-linq-to-sql.aspx](http://weblogs.asp.net/zeeshanhirani/archive/2008/07/15/applying-aggregates-to-empty-collections-causes-exception-in-linq-to-sql.aspx)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-03-30T08:46:39.943

```
from i in Db.Items
select new VotedItem
{
    ItemId = i.ItemId,
    Points = (from v in Db.Votes
              where b.ItemId == v.ItemId
              select v.Points ?? 0).Sum() 
} 
```

编辑 - 好吧，这个怎么样......（再次拍摄，因为我不知道你的模型......）：

```
from i in Db.Items
select new VotedItem
{
    ItemId = i.ItemId,
    Points = (from v in Db.Votes
              where b.ItemId == v.ItemId)
              .Sum(v => v.Points) 
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2010-12-13T15:58:51.050

假设“v.Points”是小数，只需使用以下内容：

```
from i in Db.Items
select new VotedItem
{
    ItemId = i.ItemId,
    Points = (from v in Db.Votes
              where b.ItemId == v.ItemId
              select (decimal?) v.Points).Sum() ?? 0
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-04-19T10:25:39.783

尝试检查一下：

```
var count = db.Cart.Where(c => c.UserName == "Name").Sum(c => (int?)c.Count) ?? 0; 
```

所以，问题的根源是这样的 SQL 查询：

```
SELECT SUM([Votes].[Value])
FROM [dbo].[Votes] AS [Votes]
WHERE 1 = [Votes].[UserId] 
```

返回 NULL

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2010-10-15T22:22:30.207

如果您不喜欢转换为 nullabe 十进制，您也可以尝试使用带有 ToList() 方法的 Linq To Objects，

LinqToObjects 空集合之和为 0，其中 LinqToSql 空集合之和为空。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-03-30T08:53:11.300

一个简单但有效的解决方法是仅对 Points.Count > 0 的投票求和，因此您永远不会有空值：

```
from i in Db.Items
select new VotedItem
{    
  ItemId = i.ItemId,
  Points = (from v in Db.Votes
            where b.ItemId == v.ItemId &&
            v.Points.Count > 0
            select v.Points).Sum()
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-09-05T15:37:50.557

只是为了在组合中添加另一种方法:)

```
Where(q=> q.ItemId == b.ItemId && b.Points.HasValue).Sum(q=>q.Points.Value) 
```

我有类似的情况，但在求和时我没有比较额外的字段......

```
Where(q => q.FinalValue.HasValue).Sum(q=>q.FinalValue.Value); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-10-21T21:22:11.293

假设 Points 是一个 Int32 列表，那么类似：

```
var sum = Points.DefaultIfEmpty().Sum(c => (Int32)c ?? 0) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-04T14:46:00.903

我有同样的问题。用空列表联合解决它：

```
List<int> emptyPoints = new List<int>() { 0 };

from i in Db.Items
select new VotedItem
{
 ItemId = i.ItemId,
 Points = (from v in Db.Votes
           where b.ItemId == v.ItemId
           select v.Points).Union(emptyPoints).Sum()
} 
```

如果“点”是整数，这应该有效。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-28T08:44:42.770

我认为这是同样的情况。我解决了。这是我的解决方案：

```
var x = (from a in this.db.Pohybs
                 let sum = (from p in a.Pohybs
                            where p.PohybTyp.Vydej == true
                            select p.PocetJednotek).Sum()
                 where a.IDDil == IDDil && a.PohybTyp.Vydej == false
                 && ( ((int?)sum??0) < a.PocetJednotek)
                 select a); 
```

我希望这会有所帮助。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-11-01T19:07:33.663

以为我会在那里抛出另一个解决方案。我有一个类似的问题，这就是我最终解决它的方式：

```
Where(a => a.ItemId == b.ItemId && !b.IsPointsNull()).Sum(b => b.Points) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-30T10:24:17.540

```
 (from i in Db.Items
         where (from v in Db.Votes
                where i.ItemId == v.ItemId
                select v.Points).Count() > 0
         select new VotedItem
         {
             ItemId = i.ItemId,
             Points = (from v in Db.Items
                       where i.ItemId == v.ItemId
                       select v.Points).Sum()
         }).Union(from i in Db.Items
                  where (from v in Db.Votes
                         where i.ItemId == v.ItemId
                         select v.Points).Count() == 0
                  select new VotedItem
                  {
                      ItemId = i.ItemId,
                      Points = 0
                  }).OrderBy(i => i.Points); 
```

这有效，但不是很漂亮或可读。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-04T16:00:40.453

我遇到了类似的问题，并提出了解决方案，即从数据库中获取任何我想从数据库中取出的内容，对这些内容进行计数，然后只有在我有任何返回的情况下才进行总和。由于某种原因无法让演员工作，所以如果其他人有类似的问题，请发布此内容。

例如

```
Votes = (from v in Db.Votes
          where b.ItemId = v.ItemId
          select v) 
```

然后检查是否有任何结果，以免返回 null。

```
If (Votes.Count > 0) Then
    Points = Votes.Sum(Function(v) v.Points)
End If 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-05-15T10:36:29.427

与之前的答案类似，但您也可以将整个总和的结果转换为可为空的类型。

```
from i in Db.Items
select new VotedItem
{
    ItemId = i.ItemId,
    Points = (decimal?)((from v in Db.Votes
              where b.ItemId == v.ItemId
              select v.Points).Sum()) ?? 0
} 
```

[可以说这更符合实际情况，但它与此答案](https://stackoverflow.com/a/2232796/318600)中的演员具有相同的效果。

# sql - 如何使用带有日期条件的选择？

> ID：696438
> 
> 赞同：12
> 
> 时间：2009-03-30T08:42:57.050
> 
> 标签：sql, sql-server

在 sqlserver 中，如何比较日期？例如：

从 RegistrationDate >= '1/20/2009' 的用户中选择 *

（RegistrationDate 是日期时间类型）

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-30T08:47:21.563

如果你投入

```
SELECT * FROM Users WHERE RegistrationDate >= '1/20/2009' 
```

它会自动将字符串`'1/20/2009'`转换`DateTime`为日期格式`1/20/2009 00:00:00`。因此，通过使用`>=`，您应该获得注册日期为 2009 年 1 月 20 日或更近的每个用户。

编辑：我把它放在评论部分，但我可能也应该在这里链接它。这是一篇文章，详细介绍了在您的查询中使用 DateTime 的一些更深入的方法：[http ://www.databasejournal.com/features/mssql/article.php/2209321/Working-with-SQL-Server-DateTime-Variables-第三部分---搜索特定日期值和范围.htm](http://www.databasejournal.com/features/mssql/article.php/2209321/Working-with-SQL-Server-DateTime-Variables-Part-Three---Searching-for-Particular-Date-Values-and-Ranges.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T09:31:38.790

```
Select * from Users where RegistrationDate >= CONVERT(datetime, '01/20/2009', 103) 
```

使用安全，与服务器上的日期设置无关。

可以在[此处](http://msdn.microsoft.com/en-us/library/ms187928.aspx)找到完整的样式列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-30T07:15:16.403

```
select sysdate from dual
30-MAR-17

select count(1) from masterdata where to_date(inactive_from_date,'DD-MON-YY'
between '01-JAN-16' to '31-DEC-16'

12998 rows 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-20T22:03:15.163

如果您不想被日期格式所困扰，您可以将该列与一般日期格式进行比较，例如

`select * From table where cast (RegistrationDate as date) between '20161201' and '20161220'`

确保日期为 DATE 格式，否则`cast (col as DATE)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T17:56:08.890

我总是把过滤日期变成一个日期时间，没有时间（时间= 00:00:00.000）

```
DECLARE @FilterDate  datetime --final destination, will not have any time on it
DECLARE @GivenDateD  datetime --if you're given a datetime
DECLARE @GivenDateS  char(23) --if you're given a string, it can be any valid date format, not just the yyyy/mm/dd hh:mm:ss.mmm that I'm using

SET @GivenDateD='2009/03/30 13:42:50.123'
SET @GivenDateS='2009/03/30 13:42:50.123'

--remove the time and assign it to the datetime
@FilterDate=dateadd(dd, datediff(dd, 0, @FilterDateD), 0)
--OR
@FilterDate=dateadd(dd, datediff(dd, 0, @FilterDateS), 0) 
```

您可以使用此 WHERE 子句进行过滤：

```
WHERE ColumnDateTime>=@FilterDate AND ColumnDateTime<@FilterDate+1 
```

这将给出 2009 年 3 月 30 日当天或之后的所有比赛，直到并包括 2009 年 3 月 30 日的全天

您也可以对 START 和 END 过滤器参数执行相同的操作。始终将开始日期设置为日期时间，并在您想要的那一天使用零时间，并设置条件“>=”。始终将结束日期设为您想要的第二天的零时间并使用“<”。这样做，您将始终正确地包含任何日期，无论日期的时间部分如何。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T18:03:02.523

另一个特点**是**：

```
Select * from table where date between '2009/01/30' and '2009/03/30' 
```

# networking - 什么是隧道（ssh 隧道和 ppp 隧道）

> ID：696440
> 
> 赞同：14
> 
> 时间：2009-03-30T08:43:05.380
> 
> 标签：networking

什么是隧道（ssh 隧道和 ppp 隧道）？我在谷歌搜索，但它令人困惑.. 任何人都可以提供一些关于这个隧道主题的好材料吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-30T08:59:13.627

好吧，基本上你有 3 台机器：

*   **你的**机器
*   **B**服务器
*   **C**远程机器

基本隧道将是**A**的端口 X 上的任何通信都由**B**转发到**C**的端口 Y。即你有**A** → **B** → **C而不是****A** → **C**。所以对于机器**C**来说，通信似乎来自**B**，而不是**A**。如果**C**的防火墙不允许来自**A 的**连接（例如区域受限），则很有用。例如：

 ******```
ssh -L8080:www.example.com:80 your.server 
```

`localhost:8080`从您实际访问的机器`www.example.com:80`访问`your.server`.

* * *

其他类型的隧道将是：

*   **本地网络中**的一台机器****
***   **B**服务器**

 ****您在服务器B**上打开端口 X ，该端口上的任何通信都会转发到本地机器**A**上的端口 Y 。如果您在 NAT/防火墙后面，这很有用。例如：

```
ssh -R8080:192.168.1.1:80 your.server 
```

任何访问`your.server:8080`的人实际上都是`192.168.1.1:80`在您的本地网络中访问。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-30T09:00:58.287

隧道是不是直接通过网络发送数据包，而是通过[封装](http://en.wikipedia.org/wiki/Encapsulation_(networking))在另一个（通常加密的）连接中发送。在 SSH 隧道的情况下，TCP/IP 数据包在 SSH 连接内发送到另一台主机，然后由后者决定如何处理这些数据包（通常转发到内部网络）。

有关隧道的 Wikipedia[文章很有帮助，但要更好地理解它，您应该对封装和](http://en.wikipedia.org/wiki/Tunneling_protocol)[OSI 模型](http://en.wikipedia.org/wiki/Osi_model)的工作原理有一个基本了解。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-30T08:58:50.990

[隧道](http://en.wikipedia.org/wiki/Tunneling_protocol)是一个通用术语，指将一个协议封装在另一个协议中。

通常 TCP/IP 通过较低级别的传输（例如以太网）进行传输。但是，可以使用更高级别的协议（例如 SSH）作为传输 TCP/IP 的基础。

这意味着协议是嵌套的：

*   （本机）TCP/IP 传输 SSH
*   SSH 传输（隧道）TCP/IP

乍一看，这可能看起来无用且复杂，但允许人们使用较低级别的协议（例如 TCP/IP）来利用高级协议（例如 SSH 的加密）的优势。

请注意，[VPN](http://en.wikipedia.org/wiki/VPN)通常是使用某种隧道实现的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T08:46:32.143

就我的理解而言，SSH 隧道是一种使用远程计算机互联网连接的方式，就像代理一样。

基本上，您在基本计算机上有一个网络连接，并且您使用该连接通过 SSH 隧道连接到远程计算机。现在，网络流量不再直接流向您的计算机，而是首先通过远程计算机。您的计算机会认为所有网络流量都来自一个连接（远程计算机），而不是像往常一样来自多个连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-27T09:41:04.200

什么是隧道（ssh 隧道和 PPP 隧道）？我在谷歌搜索，但它令人困惑.. 任何人都可以提供一些关于这个隧道主题的好材料吗？

要了解什么是隧道，您首先需要了解数据包封装。

数据包可以封装在另一个包中以发送到另一个协议或 OSI 级别。比如你到这个网站的连接是一个HTTP请求，它会被翻译成TCP连接，然后TCP数据包会被封装在IP数据包中，以此类推。

它无处不在。再例如，当您从智能手机浏览时，您的 HTTP 请求被封装到 IP 包中，并且它们被封装在 WiFi 802.11 帧中。就像俄罗斯娃娃一样，一个人在另一个人体内，并且可以有很多其他人。

您可以[在此处](https://serversuit.com/community/technical-tips/view/things-to-do-with-ssh-ssh-tunneling.html)查看 SSH 隧道示例，以及如何使用它将您的流量从本地 PC 代理到远程服务器。

了解什么是封装的最好方法是首先阅读有关 OSI 模型的内容。

# c# - 在 Java 中实现自定义 COM 接口

> ID：696442
> 
> 赞同：3
> 
> 时间：2009-03-30T08:43:08.297
> 
> 标签：c#, java, com, interface

我需要将一些数据从 Java 提取到 C# 中。我已经通过 COM 公开了我的 C# 类。所以我认为从 Java 中提取数据的一个好方法是`IReadStream`从 C# 中公开并`IReadStream`在 Java 中实现。然后我可以将实现的实例作为参数发送到 C#，以便我可以`IReadStream.Read`在 C# 中调用。

如何在 Java 中实现自定义 COM 接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T09:01:16.833

我不知道它是否支持这个方向，但是[Jacob](http://jacob-project.wiki.sourceforge.net/)是一个经常被提及的 Java COM Bridge。

此外，使用[IKVM](http://www.ikvm.net/)运行 Java 代码可能会大大简化任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T10:58:20.343

使用 COM 听起来过于混乱，通过套接字公开您的 c# 代码并让 java 吸收它有什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T11:02:17.480

最后我选择了命名管道。

在 java 端，我写入一个命名管道（从 c# 端提供服务）。在 c# 中，我现在应该能够从命名管道中读取。只要读取操作是阻塞的，它就应该与从 java 中提取数据相同。

有关命名管道 api 调用的 ac# 包装器，请参阅[http://www.codeproject.com/KB/threads/dotnetnamedpipespart1.aspx](http://www.codeproject.com/KB/threads/dotnetnamedpipespart1.aspx)。

# google-app-engine - Google App Engine 中的静态 301？

> ID：696446
> 
> 赞同：1
> 
> 时间：2009-03-30T08:44:29.497
> 
> 标签：google-app-engine, http-status-code-301

是否可以为 301 重定向到规范主机名定义**静态规则？**即我想要 Apache 的 mod_rewrite 中的内容：

```
# To force the use of 
RewriteEngine On
RewriteCond %{HTTP_HOST}   !^www\.example\.com [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/(.*)         http://www.example.com/$1 [L,R=301] 
```

我知道我可以在 Python 代码中做到这一点，但我更愿意将其分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T11:29:07.307

不，纯粹在 app.yaml 中不可能做到这一点。但是，您可以在 Python 中定义一个极其简单的请求处理程序，然后使用它来执行重写。处理程序可以与您用于应用程序其余部分的处理程序分开，因此您仍然保持一定程度的分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T06:00:31.627

GAE 要求您仅为特定应用程序指定一个域名。您可以指定任意数量的子域（www1.example.com、www2.example.com 等），但不能将 example.com 之外的任何域映射到它。

这不是一个直接的答案，但根据您要管理的主机名，您想要做的事情可能是不可能的。

# asp.net - 如何阻止gridview列自动编码html实体

> ID：696455
> 
> 赞同：3
> 
> 时间：2009-03-30T08:47:00.037
> 
> 标签：asp.net, html-encode

我对 asp.net 相当陌生，并且在使用 gridview 时遇到了问题。

我添加了一些包含“&”符号的条目，例如“PR Murphy & Associates”。在将数据插入数据库之前，我没有对数据进行任何编码。

当 gridview 更改为编辑模式时，我的文本如下所示：“PR Murphy & Associates”

你有什么办法可以阻止它对信息进行编码，我的意思是在插入时将文本保留为“PR Murphy & Associates”，然后在编辑之后/期间。

感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-30T08:52:08.820

在 GridView 的菜单中，您可以选择列，然后在该列的属性下，您可以将 HTMLEncode 设置为 False（或根据您的需要设置为 True）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T13:01:08.670

`GridView1_RowDataBound`我用事件解决了这个问题

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
           for (int i = 0; i < e.Row.Cells.Count; i++) 
           {
               string encoded = e.Row.Cells[i].Text;
               e.Row.Cells[i].Text = Context.Server.HtmlDecode(encoded);
           }
    }
} 
```

# ruby-on-rails - Rails 应用程序的生命周期

> ID：696461
> 
> 赞同：26
> 
> 时间：2009-03-30T08:49:05.367
> 
> 标签：ruby-on-rails, ruby

我正在尝试学习 rails 应用程序的生命周期。application_controller.rb 什么时候运行？是每次更改一次，还是每次请求都只有一次？

我想知道关于以下文件的相同信息：

*   config/environments/*.rb（开发、生产或测试，取决于当前模式）
*   引导文件
*   环境.rb
*   路线.rb

我问这个的原因之一是，我想知道哪里是放置的好地方

*   初始化代码
*   自定义配置数据

编辑：

@Gdeglin 的回答很好，但我实际上很想知道每个文件何时运行。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-03-30T08:59:56.073

### application_controller.rb

ApplicationController 是所有控制器的父类。出于这个原因，其中声明的方法将可供所有控制器使用。

ApplicationController 是一个方便的地方，用于过滤您想要应用于应用程序中所有控制器的过滤器，或者您希望对所有控制器都可用的方法。

### 配置/环境/*.rb

config/environments/*.rb 中的文件会覆盖默认 config/enviornment.rb 文件中的设置，具体取决于您的服务器运行的环境（开发/生产）。一个例子是，在开发中，错误被打印到屏幕上，而在生产中，一个通用的错误页面被返回。此设置位于 config/environments/development.rb

### 引导文件

boot.rb 用作 Rails 初始化过程的一部分。你通常不需要，也可能不应该碰它。

### 环境.rb

environment.rb 是应用程序的通用配置文件。

### 路线.rb

routes.rb 用于定义您的应用程序如何处理对特定 url 的请求。例如，您可能希望所有 404 请求都转到特定操作，而不是由默认错误处理程序处理：

```
map.connect '*path', :controller => 'home', :action => 'on_404' 
```

它也是实现[RESTful](http://guides.rubyonrails.org/getting_started.html#rest)应用程序的重要组成部分。

### 在哪里放置初始化和配置代码

初始化代码和自定义配置数据都应该放在 enviornment.rb 中（阅读此文件中的注释）。如果您希望某些代码在初始化期间仅在开发或生产中运行，请将其分别放在 config/environments/development.rb 或 config/environments/production.rb 中。

编辑：

此处提供了有关在初始化期间运行每个文件的时间的一个很好的概述：

[http://toolmantim.com/articles/environments_and_the_rails_initialisation_process](http://toolmantim.com/articles/environments_and_the_rails_initialisation_process) [https://github.com/toolmantim/toolmantim/blob/master/articles/environments_and_the_rails_initialisation_process.haml](https://github.com/toolmantim/toolmantim/blob/master/articles/environments_and_the_rails_initialisation_process.haml)

基本上这些步骤是：

1.  Rails Initializer 已加载（[http://api.rubyonrails.org/classes/Rails/Initializer.html](http://api.rubyonrails.org/classes/Rails/Initializer.html)）

2.  rails Initializer 设置日志记录，然后加载 environment.rb

3.  environment.rb 加载 boot.rb

4.  boot.rb 设置`RAILS_ROOT`常量并将 rails 库和应用程序代码添加到`LOAD_PATH`

5.  environment.rb 执行`Rails::Initializer.run`。

6.  rails 框架已加载（ActiveRecord、ActionMailer 等）

7.  您的环境的特定配置文件已加载（config/environments/development.rb。）

8.  `after_initialize``to_prepare`如果您创建了任何回调，则会执行回调

9.  Rails 已完成加载并准备好处理请求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T11:10:56.570

稍加努力，您就可以自己遵循它，这可能会更有用。

从“ruby 脚本/服务器”开始。在我的 (2.1) 应用程序中，在“脚本”目录中查找名为“服务器”的文件。它包含以下内容：

```
#!/usr/bin/env ruby
require File.dirname(__FILE__) + '/../config/boot'
require 'commands/server' 
```

所以它需要 boot.rb，它定义了很多东西，然后调用`Rails.boot!`它或多或少地运行您定义的任何预初始化，然后 requires `environment`，它执行另一个级别的引导。到那时它开始变得复杂：我推荐一张大的纸......

等等。

或者，您可以在`Kernel#require`需要文件时破解日志 - 我自己没有尝试过（并且该方法可能在其他地方被覆盖）但它*可以*工作......

application_controller 根本不完全是“运行”的——它是其他控制器的父类，因此它的内容（如果需要且未覆盖）在加载继承控制器时变得可用。您通常会使用它为所有控制器提供通用功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-20T17:24:50.383

这是我通过在代码中放置一堆打印语句所观察到的：

application_controller 和 posts_controller（例如）在每个请求上“运行”。不在方法 def/end 内的每一行代码都在两个控制器中执行，然后代码流传递给请求/路由的方法。

因为这不是我所期望的，所以我认为值得发布它。如果我错了，请随时编辑。

使用 Heroku，打印语句输出仅在打印语句出于某种原因位于方法内部时才会显示在标准输出日志中。但我相信上面的描述仍然适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T09:05:22.253

通常将初始化的东西放在 config/initializers/ 目录中。这样你可以保持你的 environment.rb 文件干净（呃）。

请参阅Ryan Daigle 的[这篇文章](http://ryandaigle.com/articles/2007/2/23/what-s-new-in-edge-rails-stop-littering-your-evnrionment-rb-with-custom-initializations)。

# linux - 为什么 wdiff 不适用于命名管道

> ID：696463
> 
> 赞同：4
> 
> 时间：2009-03-30T08:51:00.837
> 
> 标签：linux, bash, diff

我怎么能在 bash 中做到这一点：

```
$ diff -u <(echo -e "line1\nline2") <(echo -e "line1\nline3")
--- /dev/fd/63  2009-03-30 09:49:07.527272646 +0100
+++ /dev/fd/62  2009-03-30 09:49:07.527272646 +0100
@@ -1,2 +1,2 @@
 line1
-line2
+line3 
```

即我可以使用命名管道/进程替代来获取一小段文本的差异。但是，当我尝试使用 wdiff 时，单词的差异，而不仅仅是行，我没有得到有用的输出

```
wdiff <(echo -e "line1\nline2") <(echo -e "line1\nline3")
[--]{++} 
```

更新：看起来有一个现有的 ubuntu 错误报告：[https ://bugs.launchpad.net/ubuntu/+source/wdiff/+bug/160912](https://bugs.launchpad.net/ubuntu/+source/wdiff/+bug/160912)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-30T09:14:22.030

An`strace`揭示了`wdiff` `stat`这些文件（可能是为了找出它们的大小）。由于命名管道报告的大小为 0，它可能假定两个文件都是空的，因此相等：

```
$ strace -efile wdiff -1 <(echo -e "line1\nline2") <(echo -e "line1\nline3")
execve("/usr/bin/wdiff", ["wdiff", "-1", "/dev/fd/63", "/dev/fd/62"], [/* 44 vars */]) = 0
[剪掉无趣的东西]
stat64("/dev/fd/63", {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
打开（“/dev/fd/63”，O_RDONLY）= 3
打开（“/tmp/wdiff.MzPXmH”，O_RDWR|O_CREAT|O_EXCL，0600）= 4
stat64("/dev/fd/62", {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
打开（“/dev/fd/62”，O_RDONLY）= 4
打开（“/tmp/wdiff.5nma9j”，O_RDWR|O_CREAT|O_EXCL，0600）= 5
--- SIGCHLD（孩子退出）@ 0 (0) ---
取消链接（“/tmp/wdiff.MzPXmH”）= 0
取消链接（“/tmp/wdiff.5nma9j”）= 0
{++}进程 27699 已分离

```

编辑：还请注意，如果内核支持它，`bash`可能会使用`/dev/fd`-style 文件名而不是命名管道（最近的文件名支持，上面的示例显示了这一点），但效果几乎相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-30T09:02:03.353

我的猜测是 wdiff 坏了。

# .net - 给定一个私钥，是否可以推导出它的公钥？

> ID：696472
> 
> 赞同：62
> 
> 时间：2009-03-30T08:54:11.033
> 
> 标签：.net, encryption, cryptography, encryption-asymmetric

从我通过阅读各种材料了解到的任何一点点来看，公私钥对是非对称加密的基础，也是选择 2 个素数（大致是您的私钥）并将它们相乘（大致是您的公钥）的基础。在我看来，如果您知道私钥，则可以生成公钥。这是正确的还是我弄错了什么？

*让我更困惑的是，仅*使用私钥（使用 .NET 类 RSACryptoServiceProvider）无法将 RSA 密钥序列化为 XML 。不确定此限制是否是故意的！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-09-03T12:22:13.717

在大多数非对称密码系统实现中，唯一可以确保的事实是您无法从公钥中找到私钥。反过来，在大多数情况下，从私钥中找到公钥是微不足道的。

例如，在 RSA 中，您可以使用以下方法从私钥创建公钥：

```
openssl rsa -in private.pem -pubout -out public.pem 
```

具有误导性的是术语：“私钥”是指两个不同的概念，无论您是在谈论理论，还是在谈论实际实施：

*   *理论上*的私钥是与 (e, n) 共享完美对称（数学）关系的一对*(d,* n *)*。如果您正在比较这些，则无法从另一个计算得出。
**   *实用*的私钥（例如在 openssl 实现中）指的是一个包含*(d, n)*的文件，但也包含几个用于解码速度目的的重要中间值。除此之外，公钥*e*的理论上“未知”部分通常按照惯例固定为常用值（`0x10001`默认情况下在 openssl 中，尽管可以更改，但强烈建议仅使用[非常具体的值](https://security.stackexchange.com/questions/2335/should-rsa-public-exponent-be-only-in-3-5-17-257-or-65537-due-to-security-c)） . 因此，从私钥推导出公钥*(e, n)*是微不足道的，原因不止一个。*

 ** * *

## 回答 #2

> 赞同：41
> 
> 时间：2009-03-30T09:22:48.670

这取决于加密系统。

在**RSA**中，我们有（引用维基百科）：

> 公钥由模数 n 和公开（或加密）指数 e 组成。私钥由模数 n 和必须保密的私钥（或解密）指数 d 组成。

现在，如果我们有 n 和 d（私钥），我们只缺少 e 作为公钥。但 e 通常相当小（小于三位数），甚至是固定的（常见值为 65537）。在这些情况下，获取公钥是微不足道的。

对于**Elliptic Curve Diffie-Hellman**，私钥是 d，公钥是 dG（G 也是公开的），所以它也很简单。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-02T22:57:56.277

这取决于算法，以及“私钥”的含义。

RSA 私钥通常以“中国剩余定理”的形式存储。例如，`RSAPrivateKey`在 PKCS #1 中定义并被许多其他加密标准重新使用的结构采用这种形式。这种形式包括两个通常用`p`和表示的秘密数字`q`，从中可以计算出总金额。使用 totient 和私有指数，可以快速计算公共指数。

在任何情况下，大多数 RSA 密钥对都使用 65537 作为公共指数，并且模数始终作为私钥的一部分携带。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-30T09:27:18.940

在任何公钥密码系统中，公钥在数学上都与私钥相关。这很简单。

公钥是在生成时从私钥派生的，并且在将来的任何时候使用私钥都可以轻松地重新派生公钥。

走另一条路是不可行的。给定一个公钥，导出私钥并不容易。这就是为什么我们可以安全地与其他人共享公钥。如果你有足够的时间/CPU 周期，你可以暴力破解它，但等待对密钥的数学攻击可能更容易。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-24T05:52:08.380

对私钥是什么存在误解。私钥只是 (d,n) 对，仅考虑到这一点，从它生成公钥是不可行的，除非您可以假设公钥是 65537，几乎所有 rsa 密钥都是这种情况。

如果出于任何原因，公共指数是一个更大的数字，则您无法从私有指数创建公共密钥。

也就是说，存储为 pem 文件的“私钥”的值不仅是私钥，还包含主要因素（除其他外），因此很容易从中生成公钥。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-21T14:40:33.650

对于 OpenSSH 和[ssh-keygen](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&sektion=1)的特定情况，**是的，您可以**：

> ssh-keygen -y
> 
> 此选项将读取私有 OpenSSH 格式文件并将公钥打印到标准输出。

* * *

通常，这取决于算法和您标记私钥的内容。但是，任何明智的实现都会在秘密文件中包含完整的信息（公钥和私钥）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-05T08:25:03.063

是的，可以使用私钥获取公钥。可以使用openssl来完成。请参考以下命令以使用私钥获取公钥。

openssl rsa -in privatekey.pem -pubout

Please refer this screenshot : [Fetch public key using private key](https://i.stack.imgur.com/Kz0YO.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-30T08:59:04.640

是的，通过访问私钥，可以生成公钥

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-25T15:44:39.630

公钥是模数 N（和公共指数 e，通常为 65537），私钥由两个素数 p、q（和私人指数 d，有时还有 CRT 部分 d_p、d_q 用于加速）给出，基本上你有 N=pq 和 e *d=1 mod ((p-1)* (q-1))，您还可以使用给定私钥的 CRT 计算 d_p 和 d_q，公钥模数的计算是“无聊”乘法，公共指数在规范中或使用扩展计算如果标准 e 不够好，则使用 euclid 算法。给定公钥，私钥的计算需要找到 d（RSA 问题）或 p,q（因式分解，请参阅数字字段筛以获得最佳算法）。这些问题在合理的条件下被证明是等价的 [Breaking RSA Generically is Equivalent to Factoring, D. Aggarwal and U. Maurer, 2008]

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2009-03-30T08:58:41.753

这在理论上是可能的，但对于大密钥在计算上是不可行的。

# sql-server - 从 SQL Server 中的两个不同查询中获取公共行

> ID：696475
> 
> 赞同：2
> 
> 时间：2009-03-30T08:54:37.020
> 
> 标签：sql-server

有什么方法可以在两个不同的查询中获取公共行？假设一个查询返回 30 行，另一个返回 100。但只有 17 行具有相同的 ID……有两列，比如 QuestionID 和 Answer .. 我需要两个不同的用户回答相同的问题. 如果我能在.NET 中开始 foreachs 之前在 SQL 端执行此操作，我将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T09:18:26.747

INTERSECT 可能是您正在寻找的。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms188055.aspx)。如果您不能满足交集的要求，请考虑将两个结果连接起来或使用 EXISTS 子句。或者创建两个结果的 UNION，按问题 id 对行进行分组，并对每组的行进行计数，只返回包含一行以上的组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T08:58:10.523

> 此示例在相关（或重复）子查询中使用 IN，该查询的值依赖于外部查询。它被重复执行，对于外部查询可能选择的每一行执行一次。此查询检索每个作者的名字和姓氏的一个实例，其中 titleauthor 表中的版税百分比为 100，并且作者标识号在 authors 和 titleauthor 表中匹配。
> 
> ```
> USE pubs
> 
> SELECT DISTINCT au_lname, au_fname
> FROM authors
> WHERE 100 IN
>     (SELECT royaltyper
>     FROM titleauthor
>     WHERE titleauthor.au_id = authors.au_id) 
> ```

取自：[http ://doc.ddart.net/mssql/sql70/sa-ses_4.htm](http://doc.ddart.net/mssql/sql70/sa-ses_4.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T09:29:36.720

您应该向我们提供表格结构，以帮助我们为您提供更好的答案。
这是我的尝试：

```
SELECT *
FROM dbo.Questions q
     INNER JOIN dbo.Answers a ON a.QuestionID = q.QuestionID 
```

# security - OpenID 是垃圾邮件发送者的有利目标？

> ID：696476
> 
> 赞同：4
> 
> 时间：2009-03-30T08:54:42.933
> 
> 标签：security, openid, spam-prevention

由于 OpenID 的性质，它不是垃圾邮件发送者的有利目标吗？对于初学者，您可以在任何站点上创建一个 OpenID 帐户并在任何其他站点上使用它，这意味着如果论坛假定登录的用户可以信任，我可以登录到论坛并写几千个帖子。

您是否同意 OpenID 对垃圾邮件发送者有利可图？OpenID 预计会受到冲击吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T09:34:28.393

是的，这是一个问题。不，这与 OpenID 没有任何关系。

OpenID 旨在成为基于电子邮件登录的用户友好型替代品。它只是为解决基于电子邮件的登录的可用性问题而设计的，而不是为解决基于电子邮件的登录的任何安全问题而设计的。

如果那里有流氓 OpenID 提供商，允许用户随意创建帐户，而不检查他们的身份，那么这就是一个问题。然而，今天同样的问题也存在于电子邮件登录中：如果电子邮件提供商允许您在不证明身份的情况下创建电子邮件帐户，那么您可以使用该电子邮件地址登录任何论坛。

然而，这个问题早已在 E-Mail 案例中得到解决：只允许使用来自可信赖提供商的 E-Mail 地址登录。对于 OpenID 也可以这样做：只接受由可信赖的提供商发布的 OpenID。如果有人用 登录`http://John.Doe.VeriSign.Com/`，你让他们进来，如果有人试图用 登录`http://Any.Nymous.Evil-4aX0rZ.ru/`，你拒绝他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T09:28:15.583

这可能会发生，但我还没有听说过。

无论如何，OpenID 并不是为了防止垃圾邮件，但也不能阻止它。除了通过 OpenID 登录之外，站点还可以始终使用验证码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-12T21:07:19.490

实际上，我认为 OpenID 有很大的潜力击败垃圾邮件发送者。一方面，在不同站点上拥有不同身份的要求意味着真实用户没有机会发展任何类型的声誉或信誉。

通过使用 OpenID，第三方可以协作和聚合信誉信息。例如，如果我使用 OpenID 帐户 5 年没有收到垃圾邮件投诉，那么，无论出于何种意图和目的，我都是一个优秀的用户并且值得信赖。

较新的 OpenID 登录可能会受到更多审查，可能还有更多规则，例如无法发布超链接或存在垃圾邮件关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-01T19:43:00.230

我认为它确实使事情变得更容易让我们说更少的技术垃圾邮件发送者，他们手动执行操作。如果有人想向 30 个论坛发送垃圾邮件，那就是 30 个完整注册，这需要时间，使用 open id 是在 yahoo、google 等处进行一次完整注册，然后在接受 open id 的论坛上进行 30 个部分（或根本没有）注册。

# flash - 带有 onRollOver 问题的 for 循环

> ID：696480
> 
> 赞同：1
> 
> 时间：2009-03-30T08:57:11.507
> 
> 标签：flash, actionscript, actionscript-2, for-loop

我无法使用 onRollOver 使这个 For 循环工作。

```
for (var i:Number = 1; i<=4; i++) {
    this['videobutton'+i].onRollOver = function() {
        trace(i);
        this['stream'+i].pause(false);
        this['video'+i].attachVideo(this['stream'+i]);
        fadeIn(this['video'+i]);
    };
} 
```

它认为它与变量范围和 i 有关，但我不知道如何修复它。

痕迹给了我：5

有任何想法吗？

这是源文件： [http ://drop.io/gqdcyp3](http://drop.io/gqdcyp3)

**更新**
我自己解决了，但我认为这不是最佳解决方案：

```
var videos:Array = new Array(
'ltp_video-low1.flv',
'ltp_video-low1.flv',
'ltp_video-low1.flv',
'ltp_video-low1.flv'
);

function videoOver(buttonMC,video,stream) {
    buttonMC.onRollOver = function() {
    stream.pause(false);
    video.attachVideo(stream);
    fadeIn(video);
    };
}

function videoOut(buttonMC,video,stream) {
    buttonMC.onRollOut = function() {
    fadeOut(video);
    stream.pause();
    };
}

for (var i:Number=1; i<=4; i++) {
    this['connection'+i] = new NetConnection();
    this['connection'+i].connect(null);
    this['stream'+i] = new NetStream(this['connection'+i]);
    this['stream'+i].play(videos[i-1]);
    videoOver(this['videobutton'+i],this['video'+i],this['stream'+i]);
    videoOut(this['videobutton'+i],this['video'+i],this['stream'+i]);
} 
```

无论如何，这行得通。但是，如果有人可以给我一个由此创建的解决方案，那就太好了，因为它有效。我怎样才能在循环中拥有这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T09:27:32.730

我以前没有对 Flash 做过任何事情，但看起来变量`i`正在被[关闭](http://en.wikipedia.org/wiki/Closure_(computer_science))。翻转处理程序中的代码仅在翻转时执行，并`i`在那时进行评估；不是在定义函数时。

通过在另一个函数中创建处理函数，每个处理程序都应该有自己的`i`：

```
for (var i:Number = 1; i<=4; i++) {
        this['videobutton'+i].onRollOver = MakeRollOverHandler(i);
}

function MakeRollOverHandler(i:Number)
{
    return function()  {
        trace(i);
                this['stream'+i].pause(false);
                this['video'+i].attachVideo(this['stream'+i]);
                fadeIn(this['video'+i]);
        };
} 
```

您可能需要针对 ActionScript 的语法进行调整，但假设函数参数是按值传递的，总体思路应该是合理的。每次调用 MakeRollOverHandler 都会创建一个不同的`i`.

我从 ActionScript 文档中注意到 onRollOver 没有提供有关触发事件的按钮的任何信息。很遗憾，因为如果这样做，您可以使用该信息选择适当的字段集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T10:04:37.353

嗯，这可能有帮助，也可能没有帮助。Flash AS2 的作用域非常糟糕，而且还有事件驱动的东西，“i”与“i”不同。你在哪里

```
trace(i) 
```

尽管我将其扩展为 trace("i:"+i+" this.ID:"+this.ID) 你总是会得到 5，因为虽然 i 在循环中是 1-4，但循环已经完成并且“i " 按下按钮后仍为 5（我有点不确定为什么它是 5 而不是 4...）。我发现在这种情况下向movieClips 添加一个ID 字段是一种很好的做法。

ID 是使用令牌访问器访问的（我认为这就是它的名称），因为它不是 MovieClip 类的本机属性（我猜“videobutton”是由 MovieClip 制成的）

```
for (var i:Number = 1; i<=4; i++) {
    this['videobutton'+i]["ID"]=i
    this['videobutton'+i].onRollOver = function() {
        trace("i:"+i+" this['ID']:"+this["ID"]);
        this['stream'+this["ID"]].pause(false);
        this['video'+this["ID"]].attachVideo(this['stream'+this["ID"]]);
        fadeIn(this['video'+this["ID"]]);
    }
} 
```

我希望这有效....如果没有，请继续发布！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T11:56:10.097

您需要定义一个变量，比如说`id`在您的每个`videobutton`movieClip 中。与 不同，这些变量`i`对每个按钮都有不同的值。然后，您`this.i`不再在 onRollOver 函数中使用，而是使用`this.id`.

另外，因为 onRollOver 是在每个 videobutton 上运行的，`this`所以函数内部指向的是 videobutton，而不是舞台。

新代码将是：

```
for (var i:Number = 1; i<=4; i++) {
        this['videobutton'+i].id = i;
        this['videobutton'+i].onRollOver = function() {
        trace(this.id);
                ['stream'+this.id].pause(false);
                this.attachVideo(['stream'+this.id]);
                fadeIn(['video'+this.id]);
        };
} 
```

它根据您滚动的按钮跟踪从 1 到 5 的数字。如果您的其余代码没有其他问题，它也应该与视频一起使用。

# ajax - 加快在每个页面浏览量上加载 30-40 个动态加载的图像

> ID：696481
> 
> 赞同：0
> 
> 时间：2009-03-30T08:57:17.407
> 
> 标签：ajax, performance, xmlhttprequest

我有一个流量很大的社交社区。在站点布局的右栏中，我们有一个“在线列表”，它打印出一张 40x40 像素的朋友、您所在地区的人等的缩略图，总共 30-40 张图像。

就在右列加载之前，它在加载所有这些图像时挂起。我需要一个兼容 IE6 的更快的解决方案。

是否可以在页面加载后通过 ajax 加载图像，使用某种内联 gfx（IE6 支持）或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T09:20:57.020

通过 AJAX 加载图像将起作用。例如，您可以使用 jQuery 轻松完成。为要显示的每个图像定义一个 div。当页面最初显示时，也许您可​​以显示“正在加载..”图像或类似的东西来代替实际图像。

jQuery 有很多选择。[有一个懒加载](http://www.appelsiini.net/2007/9/lazy-load-images-jquery-plugin)插件，可以[预加载图片](http://jqueryfordesigners.com/image-loading/)，在图片显示的时候可以很方便的添加效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T09:00:16.650

使此页面区域在后台异步加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T09:13:22.453

是的，您可以延迟加载图像，尽管您可能希望在`<noscript>`标签中包含常规 HTML 版本，以便更简单的用户代理/蜘蛛可以看到您的页面。

另一种技术是从多个子域加载图像，因为浏览器通常只打开到每个域的少量连接。例如，如果您的站点位于 foo.com，请从 a.foo.com、b.foo.com 和 c.foo.com 加载静态图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T09:17:55.000

我也会考虑不显示 30-40 动态图片，因为服务器和客户端都不能有效地缓存这些图片。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T09:22:30.590

如果您的问题与在运行时调整这些图像服务器端的大小有关，您可能希望在调整一次大小后存储缩略图，然后在以下加载时仅提供缩略图。

对于大多数脚本来说，40 个小图像应该没问题。调整大小的 40 张全尺寸图像可能会带来很多负载。

伪代码：

1.  用户请求图像
2.  检查该图像的缩略图是否存在
3.  如果没有，请创建一个缩略图并提供它
4.  如果是，提供缩略图

您可以让服务器缓存这些图像，方法是使用 apache rewrite 将某些 .jpg|.png|etc 请求路由到您的调整大小脚本。其他服务器无疑具有类似的功能。

# asp.net - http 和受限部分

> ID：696483
> 
> 赞同：0
> 
> 时间：2009-03-30T08:57:48.043
> 
> 标签：asp.net, security, https

我想问你们，因为我不确定答案。

我有网站 Asp.Net 2.0，其中有部分只有经过身份验证的用户才能访问。确保只有在成功验证（登录/通过）后，用户才会被重定向到受限部分。但我的问题更关心的是我是否需要在 http 上使用 https。我确实检查了 Page_load 方法，用户已通过身份验证并且处于适当的角色。像这样：

```
 protected void Page_Load(object sender, EventArgs e)
  {
     if (!IsPostBack)
     {
        ApplyAuthorizationRules();
        InitData();
     }
  }

  private void ApplyAuthorizationRules()
  {
     //Check if the user is logged in
     if (!Page.User.Identity.IsAuthenticated)
     {
        Response.Redirect(NotAuthenticated.UrlToSelf());
     }
     //check if the user is in one of FU roles
     if (!Page.User.IsInRole(Constants.ROLECLIENT))
     {
        Response.Redirect(NotAuthorized.UrlToSelf());
     }
  } 
```

为了更好的描述，有我的 web.config 设置的快照：

```
 <identity impersonate="false" />
  <authentication mode="Windows" />
  <authorization>
    <allow users="*" />
  </authorization> 
```

并且有我的身份验证过程的快照：

```
 public static bool Login(string username, string password)
  {
     AppIdentity identity = AppIdentity.GetIdentity(username, password);
     AppPrincipal principal = new AppPrincipal(identity);
     HttpContext.Current.User = principal;

     return identity.IsAuthenticated;
  } 
```

那么真的有必要使用https吗？

感谢您的任何建议。X。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T09:03:21.447

授权和加密服务于不同的目的。如果数据很敏感，您可能应该使用 https。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T09:03:59.667

假设您使用[“基本”HTTP 身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)，那么请注意，如果您使用 http，则用户名、密码将在每个请求中以明文形式发送。如果您想提供更多安全性以防止凭据被嗅探，请使用 https。

还有其他方法，例如[摘要式身份验证](http://en.wikipedia.org/wiki/Digest_access_authentication)，它提供了更多的保护，但一般来说，对用户可能感到保护的任何东西都使用 https。

# c# - DrawItemEventArgs 的“索引”属性有时会变为负数

> ID：696485
> 
> 赞同：4
> 
> 时间：2009-03-30T08:58:23.550
> 
> 标签：c#, listbox, ownerdrawn

我有一个所有者绘制的列表框控件。

问题是有时传递给我的 DrawItem 事件处理程序的 DrawItemEventArgs 参数的 Index 属性为“-1”。这是我的不道德修复：

```
private void lstBox_DrawItem(object sender, DrawItemEventArgs e)
{
    if (e.Index >= 0)
    {
        handler implementation
    }
} 
```

我想知道通常是什么导致将负索引传递给处理程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T09:09:15.177

这可能是当列表框为空但获得焦点时 - 例如，如果列表在关闭时被清除。

# entity-framework - 存储过程和实体框架

> ID：696499
> 
> 赞同：0
> 
> 时间：2009-03-30T09:01:38.050
> 
> 标签：entity-framework

我已经存储了返回如下行结构的过程 getSalesOrder()：

订单（使用 EF 映射）、customfield1、customfield2、customfield3。

我如何使用 EntityFramework 来获取订单和自定义字段值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T13:24:48.790

使用当前发布的实体框架，您不能。我相信，返回标量值的存储过程是为 .NET Framework 4.0 计划的功能。

# database - SQL DataType - 如何存储一年？

> ID：696506
> 
> 赞同：44
> 
> 时间：2009-03-30T09:03:48.387
> 
> 标签：database, types, sqldatatypes

我需要在数据库中插入一年（例如：1988 ,1990 等）。当我使用 Date 或 Datetime 数据类型时，它显示错误。我应该使用哪种数据类型。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-03-30T16:17:21.387

**常规的 4 字节 INT 太大了，浪费空间！**

你没有说你正在使用什么数据库，所以我不能推荐一个特定的数据类型。每个人都在说“使用整数”，但大多数数据库以 4 个字节存储整数，这远远超出了您的需要。您应该使用两字节整数（SQL Server 上的 smallint），这样可以更好地节省空间。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-03-30T09:06:25.637

如果您需要在数据库中存储一年，您可能想要使用 Integer 数据类型（如果您只存储年份）或 DateTime 数据类型（这将涉及存储基本上是 1/1/ 的日期1990 00:00:00 格式）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2010-03-23T06:53:42.113

嘿，你可以在 MySQL 中使用**year()**数据类型，它有两位数或四位数的格式。

注：四位数格式允许的值：1901 到 2155。两位数格式允许的值：70 到 69，代表 1970 到 2069 年

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-02-07T14:49:03.093

理想情况下，在 MSSQL 中存储“年份”取决于您使用它做什么以及该“年份”对您的应用程序和数据库的含义。话虽如此，这里有几件事要说明。MSSQL 中截至 2012 年的年份没有“数据类型”。我倾向于使用 SMALLINT，因为它只有 2 个字节（节省了 INT 要求的 4 个字节中的 2 个）。您的限制是您的年份不能超过 32767（从 SQL Server 2008R2 开始）。我真的不认为 SQL 会成为一万年后的首选数据库，更不用说 32767 年了。您可以将 INT 视为 MSSQL 中的 Year() 函数将数据类型“DATE”转换为 INT。就像我说的，这取决于您从哪里获取数据以及数据的去向，但是 SMALLINT 应该没问题。INT将是矫枉过正... 除非您有其他原因，例如我上面提到的原因，或者代码要求需要 INT 形式（例如与现有应用程序集成）。很可能 SMALLINT 应该没问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-30T09:06:05.700

仅仅一年，没有别的吗？为什么不使用简单的整数？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-30T09:06:07.757

如果您只需要存储年份，请使用整数。如果您认为在查询此列时会有基于日期的计算，您也可以使用 datetime

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T16:33:00.443

存储可能只是问题的一部分。这个值将如何在查询中使用？

是要与其他日期时间数据类型进行比较，还是所有关联的行也有数值？

您将如何处理需求的变化？您对用更短时间片替换年份的请求的反应有多容易？即现在他们想要按季度分解？

数字类型可以很容易地在日期时间查询中使用，方法是使用一个查找表来连接，其中包含开始和停止日期（1/1/X 到 12/31/x）等内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-08T02:33:14.203

我不认为使用整数或整数的任何子类型是一个不错的选择。迟早您将不得不对其进行其他日期操作。同样在 2019 年，我们不必太担心空间问题。看看那些节省的 2 个字节在 2000 年花费了我们什么。

我建议使用年份 + 0101 转换为真实日期的日期。同样，如果您需要将一年中的一个月存储年 + 月 + 01 作为真实日期。

如果你这样做了，你以后就可以在上面正确地做“约会的东西”

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-18T12:08:19.783

您试图在数据库中插入一年，然后使用：
`type YEAR`

# data-warehouse - Jitterbit 作为 ETL 工具

> ID：696516
> 
> 赞同：0
> 
> 时间：2009-03-30T09:07:14.167
> 
> 标签：data-warehouse, etl, business-intelligence, jitterbit

有人用[Jitterbit](http://www.jitterbit.com)作为 ETL 工具吗？任何评论/教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-01-27T20:08:46.293

我使用过 Jitterbit，我发现它易于使用，而且他们是一家反应迅速的公司。

自从问题发布以来，他们已经在他们的网站上添加了几个网络研讨会，让您很好地了解您可以使用该产品做什么：

[Jitterbit 集成网络研讨会](http://www.jitterbit.com/Product/integration-webinars.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T12:14:12.577

它非常好且易于使用。

非常擅长转型。它具有自动映射工具，这是您可以轻松映射源和目标的一种方式。

GUI 非常简洁，非常用户友好。

它有很多文件操作。您可以访问 FTP、共享、本地文件、HTTP、LDAP 等

Web服务也写得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-28T09:30:08.703

Jitterbit 开发者添加了一些小教程： [链接文字](http://www.jitterbit.com/Product/documents.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T14:01:55.057

我使用 Jitterbit 将本地 PostgreSQL 数据库与 salesforce 集成

# wpf - WPF - 无法停止动画 StoryBoard，IsControllable 不起作用？

> ID：696534
> 
> 赞同：4
> 
> 时间：2009-03-30T09:16:18.217
> 
> 标签：wpf, storyboard

我有一个 3D 立方体，我正在使用共享故事板制作动画。动画代码位于组合框的 selectionChanged 事件中，旨在确保任何仍在运行的动画在下一个开始之前停止；但它不是那样工作的！

我意识到这是一些非常混乱的代码，但我仍然不明白为什么我的故事板不会响应控制，因为我正在调用 .begin(this,true)。

谁能告诉我为什么我不能停止 StoryBoard？我仍然收到那个狡猾的`'System.Windows.Media.Animation Warning: 6 : Unable to perform action because the specified Storyboard was never applied to this object for interactive control.; Action='Stop';'`消息

```
 Storyboard sb = new Storyboard();
    DoubleAnimation forward90 = new DoubleAnimation(0,90,TimeSpan.FromMilliseconds(2000));
    DoubleAnimation back90 = new DoubleAnimation(0,-90, TimeSpan.FromMilliseconds(2000));

private void cbo_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        forward90.BeginTime = TimeSpan.Zero;
        back90.BeginTime = TimeSpan.Zero;

        NameScope.SetNameScope(this, new NameScope());

        RegisterName(this.Name, this);

        sb.Stop(this);
        sb.Remove(this);

        sb.Children.Clear();

        sb.AccelerationRatio = 0;
        sb.DecelerationRatio = 1;
        sb.RepeatBehavior = RepeatBehavior.Forever;

        int i = cbo.SelectedIndex;
        Orientation o = (Orientation)i;

        ViewModel vm = this.DataContext as ViewModel;
        if(vm !=null)vm.Orient = o;

        switch (o)
        {
            case Orientation.Front0:

                break;
            case Orientation.Front90:

                sb.Children.Add(forward90);

                Storyboard.SetTarget(forward90, cube2);

                Storyboard.SetTargetProperty(forward90, new PropertyPath(CubeControl.CubeControl.XRotationProperty));
                sb.Begin(this, true);

                break;
            case Orientation.Right0:

                sb.Children.Add(back90);

                Storyboard.SetTarget(back90, cube2);

                Storyboard.SetTargetProperty(back90, new PropertyPath(CubeControl.CubeControl.YRotationProperty));
                sb.Begin(this, true);

                break;
            case Orientation.Right90:

                back90.BeginTime = TimeSpan.FromMilliseconds(2000);

                sb.Children.Add(forward90);
                sb.Children.Add(back90);

                Storyboard.SetTarget(back90, cube2);
                Storyboard.SetTarget(forward90, cube2);

                Storyboard.SetTargetProperty(forward90, new PropertyPath(CubeControl.CubeControl.YRotationProperty));
                Storyboard.SetTargetProperty(back90, new PropertyPath(CubeControl.CubeControl.ZRotationProperty));

                sb.Begin(this, true);

                break;
            case Orientation.Top0:

                sb.Children.Add(back90);

                Storyboard.SetTarget(back90, cube2);
                Storyboard.SetTargetProperty(back90, new PropertyPath(CubeControl.CubeControl.ZRotationProperty));
                sb.Begin(this, true);

                break;
            case Orientation.Top90:

                back90.BeginTime = TimeSpan.FromMilliseconds(2000);

                sb.Children.Add(forward90);
                sb.Children.Add(back90);

                Storyboard.SetTarget(forward90, cube2);
                Storyboard.SetTarget(back90, cube2);

                Storyboard.SetTargetProperty(forward90, new PropertyPath(CubeControl.CubeControl.XRotationProperty));
                Storyboard.SetTargetProperty(back90, new PropertyPath(CubeControl.CubeControl.ZRotationProperty));

                sb.Begin(this, true);
                break;
            default:
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T21:16:35.427

我相信你需要将 cbo 而不是这个传入 begin 方法。

这指的是当前类（我猜是你的窗口类），而控制动画的是cbo中的变化。

# java - Quick Swing 问题：需要关闭我的数据库

> ID：696542
> 
> 赞同：1
> 
> 时间：2009-03-30T09:21:29.220
> 
> 标签：java, swing, database-connection

我一直在构建一个测试应用程序，该应用程序与直到最近还没有 UI 的数据库一起使用。我现在加一个。问题是，JFrame 在另一个线程中启动，我需要在该线程关闭时关闭我的数据库连接（我应该说当 UI 关闭时）。我该怎么做呢？

此外，如果应用程序崩溃或被强制关闭，应用程序的数据库连接（在本例中为嵌入式数据库）会发生什么情况？我听说未关闭的连接会导致资源泄漏。如果发生这种情况，我能做些什么来清理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T09:37:43.923

您可以在运行时系统中添加[关闭挂钩。](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread))这是一个将在关闭虚拟机时触发的线程。在线程中，您可以关闭所有数据库连接和其他关键资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T09:28:26.020

1.  如果用户尝试关闭您的JFrame，则将触发[WindowClosingEvent 。](http://java.sun.com/javase/6/docs/api/java/awt/event/WindowListener.html#windowClosing(java.awt.event.WindowEvent))因此，在这种方法中，您可以关闭您的连接。
2.  您的 DBMS 使用连接池。如果您没有正确关闭连接，则此连接池将充满未使用的连接。
    如果池已满并且需要新的连接，那就不好了。该应用程序将无法正常工作。用户要么等待并再试一次（在他等待时，一个连接可能会关闭或终止），要么手动重新启动数据库，因此所有连接都将丢失。
    DBMS 在预定义的时间后关闭所有未使用的连接。这次指定了哪个参数，您可以在 DBMS 手册中找到它。

除了你的评论：你不能保证你有足够的时间来清理你的连接。可能您的应用程序被您的系统或其他任何东西杀死了。所以：**尝试**尽快清理您的连接。
只有在丢失连接对象后，DBMS 才能删除未使用的连接。

# javascript - 鉴于下面的链接如何使用 jQuery 滑动

> ID：696546
> 
> 赞同：0
> 
> 时间：2009-03-30T09:23:20.370
> 
> 标签：javascript, jquery

我对 js 或 jquery 知之甚少，我需要你的帮助： [幻灯片示例](http://www.inetsoftware.de/products/crystal-clear/samples)

像那样。鉴于下面的链接如何使用 jQuery 进行滑动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T13:39:41.173

我认为您可以使用[Cycle 插件](http://www.malsup.com/jquery/cycle/)，但您仍然需要自己编写代码。

# php - 如何使用 PHP 中的 is_dst 参数获取正确的时间戳？

> ID：696552
> 
> 赞同：0
> 
> 时间：2009-03-30T09:25:19.350
> 
> 标签：php, datetime, mktime

我们正在使用 mktime 方法创建一个 unix 时间戳，并提供以下属性：

```
print_r(mktime(0,0,0,3,1,2009));
print_r(mktime(null,null,null,3,1,2009) / 60 / 60 / 24) . "days");` 
```

这产生了一个结果

```
1235862000

14303.958333333 days 
```

这应该是 14304 天。在这种情况下，问题是冬季时间。您可以使用 is_dst 参数，当我们使用 0（默认 -1）时，这有时会正常工作，结果是 14304 天。

但有时这会产生以下问题：

> 严格标准：mktime() [function.mktime]：is_dst 参数已弃用

我不知道这意味着什么以及我能做些什么。有人知道吗？因为冬天的时候会导致可怕的头痛......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T09:30:20.617

使用[gmmktime](http://www.php.net/manual/en/function.gmmktime.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T10:08:59.277

```
date("I", time()); 
```

如果是夏令时，会给你 1，如果不是，会给你 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T10:13:36.613

从 php 手册页：

“如果时区无效，每次调用日期/时间函数都会生成 E_NOTICE，如果使用系统设置或 TZ 环境变量，则生成 E_STRICT 消息。另请参见[date_default_timezone_set()](http://php.net/manual/en/function.date-default-timezone-set.php) ”

这可能意味着您应该以前使用[date_default_timezone_set()](http://php.net/manual/en/function.date-default-timezone-set.php)并跳过 is_dst 参数

# c# - 将代码从 .Net 1.1 升级到 2.0/3.5 (C#)

> ID：696556
> 
> 赞同：1
> 
> 时间：2009-03-30T09:27:25.930
> 
> 标签：c#, .net

我正在升级早期 .NET 1.1 的 Windows 客户端应用程序。以前的开发人员手写了许多可以使用较新版本的 .NET 自动完成的解决方案。由于我对 .NET 比较陌生，并且对我在这里询问的功能没有完整的概述。

以后的 .NET 版本中提供的最显着的类和语法特性是什么，它们可能会用库中的特性替换手写代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T09:31:13.580

我脑海中最大的变化：

*   使用泛型集合而不是 ArrayList、Hashtable 等。
*   对于 C# 3.5，使用 LINQ 而不是手动过滤/投影
*   使用泛型委托，而不必一直声明自己的委托
*   使用匿名方法而不是创建用于在一个地方创建委托的单行方法
*   将 BackgroundWorker 用于 WinForms 后台任务

在我看来，泛型是影响最广泛的变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T09:34:04.820

就个人而言，我会留下任何在使用 2.0/3.5 编译时都能正常工作的 1.1 代码。除非你有时间，否则你重写的任何东西都必须再次测试，而且你仍然可能引入测试找不到的新错误。

不过，我希望用于未来版本的东西将是泛型和 LINQ。.NET 2 的泛型和 .NET 3.5 的 LINQ。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T09:30:33.767

LINQ 是一个巨大的飞跃。可能可以在某些地方使用它（例如 XML 代码）。此外，泛型可能会减少对某些类的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T09:42:18.997

还要注意并测试框架版本之间的*重大更改可能产生的影响。*谷歌搜索应该显示最重要的问题。

# silverlight - 为什么Windows CE 上缺乏创新和Silverlight？

> ID：696558
> 
> 赞同：4
> 
> 时间：2009-03-30T09:27:41.437
> 
> 标签：silverlight, windows-mobile, windows-ce, deprecated

一位经理让我快速研究在 Windows CE 设备上进行 Silverlight 开发的可能性。

15分钟后，我很惊讶：

*   **Silverlight for Windows CE 似乎无处可见**，一些网站想要报告它非常糟糕，他们[引用 twitter 推文作为他们的新闻来源，](http://www.wmexperts.com/silverlight-mobile-rumored-windows-mobile-65) [Silverlight 3 功能列表](http://timheuer.com/blog/archive/2009/03/18/silverlight-3-whats-new-a-guide.aspx)中甚至没有“移动”这个词，但你可以在有人说*我希望听到有关将 Silverlight 安装到 Windows Mobile 和诺基亚设备上的更新*的评论。

*   **Windows CE 6.5 甚至还没有发布，它正在受到严厉的评论**，比如[这篇文章](http://www.engadget.com/2009/02/18/editorial-ten-reasons-why-windows-mobile-6-5-misses-the-mark/)基本上说：没有什么新东西，界面改进落后于曲线，UI 调整（蜂窝状）皮肤深入，没有电容式触摸屏，直到 2009 年第四季度才发布，不向后兼容，没有 zune，没有新的 windows 媒体播放器，没有像样的屏幕键盘，浏览器在竞争中相形见绌，第 10 号：微软在其最新的移动操作系统上几乎没有创新，微软在移动领域的领导地位为零。微软似乎**在 iPhone 的阴影下软弱无力**。Windows CE 6.5 上明显缺乏 Silverlight 甚至没有列入问题清单。

我以为事情不一样了。所以我很遗憾地不得不报告，移动设备上的 Silverlight 可能需要等待一年或更长时间。

**有没有人可以在移动设备上报告有关 Silverlight 的更积极、更*实质性的*消息？**

**YMS 更新（不是原来的 OP）：**
*这个问题在某种程度上被弃用了，因为 Windows Compact 7 已经发布了[（某种）Silverlight 支持](http://msdn.microsoft.com/en-us/library/ee502198.aspx)。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T09:59:13.340

我最近还研究了 Silverlight 在 Windows CE 上的使用。结果是，虽然它似乎快到了，但 MIX08 的视频展示了它，它可能会在今年某个时候发布，但可能不会在上半年发布。他们说“2009 年的某个时候”，而现在几个月来，它处于“私人测试”状态。

因此，虽然我很喜欢使用 Silverlight，但我决定使用 OpenGL ES 2.0 和 OpenVG，它们在我们当前的目标设备上是完全硬件加速的。即使来自 .NET Compact Framework，功能也很强大，而且使用起来并不难。

哦，iPhone 对于手机（或音乐播放器）来说非常酷，但 Windows CE 可用于更多设备，包括非个人小工具/非移动产品。这是苹果公司不擅长的领域，因为他们没有授权他们的平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-21T20:03:30.263

我听说WindowsMo​​bile 7.0 的用户界面将基于Silverlight/WPF。听起来微软并没有在此之前的任何版本上投入任何努力，因为一旦 WM7 出来，他们就会想要杀死之前出现的任何东西。

# forward-declaration - 前向引用与前向声明

> ID：696562
> 
> 赞同：14
> 
> 时间：2009-03-30T09:29:04.240
> 
> 标签：forward-declaration, forward-reference

我有点困惑。前向声明和前向引用有什么区别？在我看来，前向声明是当你声明一个尚未实现的函数时，但这不正确吗？您是否必须查看特定情况以声明案例“前向引用”或“前向声明”？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-01-21T21:47:35.540

前**向声明**是在实现和使用方法或变量之前的声明。前向声明的目的是节省编译时间。

变量的前向声明会导致存储空间被留出，因此您可以稍后设置该变量的值。

函数的前向声明也称为“函数原型”，是一种声明语句，它告诉编译器函数的返回类型是什么，函数的名称是什么，以及它的参数类型。C/C++ 和 Pascal 等语言的编译器将声明的符号（包括函数）存储在查找表中，并在代码中遇到它们时引用它们。这些编译器按顺序读取您的代码，即从上到下，因此如果您不前向声明，编译器会在查找表中发现它无法引用的符号，并引发它不知道的错误如何响应函数。

前向声明是对您在其他地方定义（填写实现）函数的编译器的提示。

例如：

```
int first(int x); // forward declaration of first

...

int first(int x) {
   if (x == 0) return 1;
   else return 2;
} 
```

但是，您会问，为什么我们不让编译器对每个源文件进行两次传递：第一次对内部的所有符号进行索引，第二次对引用进行解析并查找它们？根据丹故事：

> 当 C 语言于 1972 年创建时，计算资源更加稀缺且价格昂贵——一次存储复杂程序的整个符号表所需的内存在大多数系统中根本不可用。固定存储也很昂贵，而且速度极慢，因此像虚拟内存或在磁盘上存储部分符号表这样的想法根本不允许在合理的时间范围内进行编译......当您处理寻道时间很短的磁带时以秒为单位，读取吞吐量以每秒字节数（不是千字节或兆字节）为单位，这非常有意义。
> 
> C++ 是在将近 17 年后创建的，它被定义为 C 的超集，因此必须使用相同的机制。
> 
> 到 1995 年 Java 出现时，普通计算机已经拥有足够的内存来保存一个符号表，即使对于一个复杂的项目，也不再是一个沉重的负担。而且 Java 的设计初衷并不是为了向后兼容 C，所以它不需要采用遗留机制。C# 同样不受阻碍。
> 
> 结果，他们的设计者选择将划分符号声明的负担从程序员身上转移到计算机上，因为它的成本与编译总工作量的比例是最小的。

在 Java 和 C# 中，标识符会自动从源文件中识别并直接从动态库符号中读取。在这些语言中，出于同样的原因，不需要头文件。

前**向引用**则相反。它是指在声明之前使用实体。例如：

```
int first(int x) {
   if (x == 0) return 1;
   return second(x-1); // forward reference to second
}

int second(int x) {
   if (x == 0) return 0;
   return first(x-1);
} 
```

请注意，“前向引用”有时用作“前向声明”的同义词，但并不经常使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T09:40:53.027

来自[维基百科](http://en.wikipedia.org/wiki/Forward_declaration)：

> ### 前向声明
> 
> 尚未定义的变量或函数的声明。稍后可以看到它们的定义。
> 
> ### 前向参考
> 
> 与前向声明类似，但在变量或函数首先出现的地方，定义也已到位。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T09:37:08.480

前向声明用于允许对一种语言（C、Pascal）进行单遍编译。

如果在没有前向声明的情况下允许前向引用（Java、C#），则需要两遍编译器。

# cryptography - 公钥和私钥有何不同？

> ID：696563
> 
> 赞同：19
> 
> 时间：2009-03-30T09:29:26.593
> 
> 标签：cryptography

我对给定私钥有一个后续问题[，是否可以派生它的公钥？](https://stackoverflow.com/questions/696472/given-a-private-key-is-it-possible-to-derive-its-public-key)

公钥和私钥是否“相同”（从某种意义上说，您只是选择公开一个）还是使用私钥比使用公钥做更多？

编辑 - 更好地陈述我的问题：

生成两个密钥后，我可以随机选择其中一个作为公钥吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-09-07T07:20:06.730

一些*论文*描述将公钥和私钥的角色呈现为非常对称，但*您绝对不能在现实世界中交换私钥和公钥的角色*。

**常见用法**：

*   公钥必须用于加密和验证签名
*   私钥必须用于解密和签名

有几个原因：

*   **您不想让用户选择应该发布哪个密钥，哪个不发布**。公钥在全球范围内发布，您可以将其视为您的公共身份。当您必须向其他人证明您比其他人更了解此身份时，需要私有部分：您可以阅读发送给它的消息，您可以签署可以由知道您的公共 ID 的任何人验证的消息。如果要发布的公钥/私钥的哪一部分留给用户，那么您将以用户同时发布这两种方式结束。但这不是主要原因。

*   **当您拥有私钥时，您确实拥有两个密钥，**我所知道的每个常见实现都提供从私有文件中提取公钥的工具。这对于 pgp、gpg、openssl 来说都是如此。这意味着所谓的私钥文件存储了算法中描述的私钥和公钥。这是设计使然。

例如，使用 openssl 生成 RSA 密钥对的命令序列可以是：

```
openssl genrsa -out private.key 2048
openssl rsa -in private.key -pubout -out public.key 
```

应该很清楚，第一个命令在私钥文件中生成两个密钥，而公钥只是从中提取出来的。

结果是，如果您的私钥被泄露，那么您的两个密钥都会被泄露。另一种方法是安全的，如果您既不从文件中也不从数学攻击中知道公钥，则无法推断出私钥。

*   **用私钥加密在数学上很弱**：好吧，前面的一点已经足够了，但是一些狡猾的用户可能会考虑使用非对称加密来隐藏两个密钥以交换数据。不要，如果你想进行这种交换，请使用对称加密。是的，可以使用私钥加密消息并使用公钥解密（这基本上是用于签名的，但用例不同，因为您也有初始消息）。两个密钥的内部参数不相同，并且密码学的所有强度都已被证明仅用于通常的方向和常用用途。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-30T09:35:08.733

这实际上取决于您所说的“私钥”。在几乎所有实际情况中，知道私钥的发送者也知道公钥。它向其他人提供其公钥，因此它需要知道它。所以本质上，那个“私钥”将包含“公钥”信息，或者至少它可以从中派生出来。

通常，您不能交换私钥和公钥。事实上，它们并不总是相同的类型（取决于使用的密码系统）。例如，在 ECDSA 中，您的公钥是椭圆曲线上的一个二维“点”，而您的私钥是一个数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T09:32:25.183

来自[http://www.webopedia.com/TERM/P/public_key_cryptography.html](http://www.webopedia.com/TERM/P/public_key_cryptography.html)：

> 使用两个密钥的加密系统——每个人都知道的公钥和只有消息接收者知道的私钥或秘密密钥。当 John 想要向 Jane 发送安全消息时，他使用 Jane 的公钥来加密消息。然后 Jane 使用她的私钥对其进行解密。
> 
> 公钥系统的一个重要元素是公钥和私钥以这样一种方式相关联，即只有公钥可以用来加密消息，只有相应的私钥可以用来解密它们。此外，如果您知道公钥，几乎不可能推断出私钥。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T09:33:05.087

不，这就是在 PPK 世界中生成一*对*密钥的想法。您通常使用公钥加密并使用私钥解密。因此，您将与您的朋友共享公钥，并在他们向您发送银行帐号时要求他们使用它。

# visual-c++ - 解决方案文件

> ID：696567
> 
> 赞同：2
> 
> 时间：2009-03-30T09:30:31.460
> 
> 标签：visual-c++, visual-c++-6

Visual c++ 6.0 中的解决方案文件是什么，如何生成解决方案文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T09:33:20.970

VC++ 6.0 中没有解决方案文件。在那些日子里，我们现在所知道的解决方案被称为工作区，并且有一个与它们相关联的文件，扩展名为 .dsw。

# c++ - 除法双精度时意外损失精度

> ID：696573
> 
> 赞同：6
> 
> 时间：2009-03-30T09:31:16.747
> 
> 标签：c++, double, precision

我有一个函数 getSlope ，它以 4 个双精度数作为参数，并返回另一个使用给定参数计算的双精度数，方法如下：

```
double QSweep::getSlope(double a, double b, double c, double d){
double slope;
slope=(d-b)/(c-a);
return slope;
} 
```

问题是，当使用参数调用此函数时，例如：

```
getSlope(2.71156, -1.64161, 2.70413, -1.72219); 
```

返回的结果是：

```
10.8557 
```

这对我的计算来说不是一个好的结果。我已经使用 Mathematica 计算了斜率，相同参数的斜率结果是：

```
10.8452 
```

或更多数字以提高精度：

```
10.845222072678331. 
```

我的程序返回的结果在我进一步的计算中并不好。此外，我不明白程序如何从 10.845222072678331 开始返回 10.8557（假设这是除法的近似结果）？我怎样才能为我的部门取得好成绩？

提前谢谢你，马达琳娜

* * *

我使用命令行打印结果：

```
std::cout<<slope<<endl; 
```

可能是我的参数可能不好，因为我从另一个程序中读取它们（它计算一个图表；在我从他的图表中读取这个参数之后，我刚刚显示它们以查看它们的值但可能显示的向量不一样计算值的内部精度..我不知道这真的很奇怪。出现了一些数值错误..）

当计算我从中读取参数的图形时，会使用一些用 C++（带有模板）编写的数值库。此计算不使用 OpenGL。

谢谢你，马达琳娜

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T10:47:41.180

我尝试使用 float 而不是 double ，结果得到 10.845110 。它看起来仍然比madalina的结果好。

编辑：

我想我知道你为什么会得到这个结果。如果您从其他地方获得 a、b、c 和 d 参数并打印它，它会为您提供四舍五入的值。然后，如果你把它放到 Mathemtacia （或 calc ;) ）它会给你不同的结果。

我试着改变一点你的参数。当我这样做时：

```
double c = 2.7041304; 
```

我得到 10.845806。我只在 c 中添加 0.0000004！所以我认为你的“错误”不是错误。以更高的精度打印 a、b、c 和 d，然后将它们放入 Mathematica。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-30T09:34:38.953

会不会是您在项目中使用了 DirectX 或 OpenGL？如果是这样，他们可以关闭双精度，你会得到奇怪的结果。

您可以检查您的精度设置

```
std::sqrt(x) * std::sqrt(x) 
```

结果必须非常接近 x。我很久以前就遇到过这个问题，花了一个月的时间检查所有的公式。但后来我发现

```
D3DCREATE_FPU_PRESERVE 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-30T09:40:28.457

以下代码：

```
#include <iostream>
using namespace std;

double getSlope(double a, double b, double c, double d){
    double slope;
    slope=(d-b)/(c-a);
    return slope;
}

int main( ) {
    double s = getSlope(2.71156, -1.64161, 2.70413, -1.72219);
    cout << s << endl;
} 
```

使用 g++ 给出 10.8452 的结果。您如何在代码中打印出结果？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-30T09:36:19.730

这里的问题是 (ca) 很小，所以浮点运算中固有的舍入误差在这个例子中被放大了。一个通用的解决方案是修改你的方程，这样你就不会被一个小数除，不过我不确定你会怎么做。

编辑：

Neil 对这个问题的评论是正确的，我使用 Doubles 在 VB 中计算了答案，并得到了与数学相同的答案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-30T12:31:31.993

您得到的结果与 32 位算术一致。在不了解您的环境的更多信息的情况下，不可能建议该做什么。

假设显示的代码正在运行，即您没有将任何内容转换为字符串或浮点数，那么 C++ 中没有修复。它在您显示的代码之外，并且取决于环境。

由于 Patrick McDonald 和 Treb 提出了您输入的准确性和错误`a-c`，我想我会看一下。查看舍入误差的一种技术是区间算术，它使值表示的上限和下限显式（它们隐含在浮点数中，并且固定为表示的精度）。通过将每个值视为上限和下限，并通过表示中的误差扩展边界（对于双精度值 x 约为 x * 2 ^ -53），您会得到一个结果，该结果给出了值的准确性，考虑到最坏情况下的精度误差。

例如，如果您有一个在 [1.0, 2.0] 范围内的值并从中减去一个在 [0.0, 1.0] 范围内的值，那么结果必须在 [below(0.0),above(2.0)] 范围内因为最小值是 1.0-1.0，最大值是 2.0-0.0。`below`并且`above`等价于 floor 和 ceiling，但用于下一个可表示的值而不是整数。

使用代表最坏情况双舍入的间隔：

```
getSlope(
 a = [2.7115599999999995262:2.7115600000000004144], 
 b = [-1.6416099999999997916:-1.6416100000000002357], 
 c = [2.7041299999999997006:2.7041300000000005888], 
 d = [-1.7221899999999998876:-1.7221900000000003317])
(d-b) = [-0.080580000000000526206:-0.080579999999999665783]
(c-a) = [-0.0074300000000007129439:-0.0074299999999989383218]

to double precision [10.845222072677243474:10.845222072679954195] 
```

因此，虽然与or`c-a`相比很小，但与双舍入相比仍然很大，所以如果您使用可想象到的最差的双精度舍入，那么您可以相信该值精确到 12 位数字 - 10.8452220727。您在双精度方面丢失了一些数字，但您仍在努力超越输入的重要性。`c``a`

但是，如果输入仅精确到有效数字，而不是双精度值 2.71156 +/- eps，那么输入范围将为 [2.711555,2.711565]，因此您会得到结果：

```
getSlope(
 a = [2.711555:2.711565], 
 b = [-1.641615:-1.641605], 
 c = [2.704125:2.704135], 
 d = [-1.722195:-1.722185])
(d-b) = [-0.08059:-0.08057]
(c-a) = [-0.00744:-0.00742]

to specified accuracy [10.82930108:10.86118598] 
```

这是一个更广泛的范围。

但是您必须不遗余力地跟踪计算的准确性，并且浮点固有的舍入误差在此示例中并不显着 - 在最坏的情况下双精度舍入精确到 12 位数字。

另一方面，如果您的输入只知道 6 个数字，那么您得到 10.8557 还是 10.8452 实际上并不重要。两者都在 [10.82930108:10.86118598] 之内。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-30T10:01:56.627

最好也打印出论点。正如我猜测的那样，当您以十进制表示法传输参数时，您将失去每一个参数的精度。问题在于 1/5 是二进制的无限级数，因此例如 0.2 变为 .001001001...。此外，在将二进制浮点数转换为十进制文本表示时，小数会被截断。

除此之外，有时编译器会选择速度而不是精度。这应该是记录在案的编译器开关。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-30T10:06:36.380

[帕特里克](https://stackoverflow.com/questions/696573/unexpected-loss-of-precision-when-dividing-doubles/696592#696592)似乎是正确的（ca）是主要原因：

> 分贝 = -1,72219 - (-1,64161) = -0,08058
> 
> ca = 2,70413 - 2,71156 = -0,00743
> 
> S = (db)/(ca)= -0,08058 / -0,00743 = 10,845222

你从六位数的精度开始，通过减法你得到减少到三位数和四位数。我最好的猜测是你失去了额外的精度，因为数字 -0,00743 不能用双精度表示。尝试使用精度更高的中间变量，如下所示：

```
double QSweep::getSlope(double a, double b, double c, double d)
{
    double slope;
    long double temp1, temp2;

    temp1 = (d-b);
    temp2 = (c-a);
    slope = temp1/temp2;

    return slope;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-27T19:10:22.930

虽然正在进行的学术讨论非常有助于了解编程语言的局限性，但您可能会发现该问题的最简单解决方案是用于[任意精度算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)的数据结构。

这会产生一些开销，但是您应该能够找到具有相当可保证准确性的东西。

# silverlight - 抛出新异常和 Application_UnhandledException

> ID：696575
> 
> 赞同：0
> 
> 时间：2009-03-30T09:31:46.013
> 
> 标签：silverlight, exception, exception-handling

**我的场景：**

我正在使用 Silverlight MVVM 模式。我所有的视图模型都继承自 BaseViewModel 类，该类维护一些基本值和行为。

其中一种行为确定用户是否有权使用特定功能并返回布尔值。

如果找不到该函数，我想抛出一个新异常并在 App.xaml *Application_UnhandledException*方法中捕获它，并引发我自己的异常事件，如下所示：

```
protected bool IsFunctionEnabled(string FunctionName)
        {
            //fetch the function / role 
            if (_FunctionRoles().ContainsValue(FunctionName))
            {
                KeyValuePair<int, string> kvp = _FunctionRoles().GetEntryByStringValue(FunctionName);

                //determine if the user has been assigned to this role
                return (_UserRoles().ContainsKey(kvp.Key));
            }
        //throw an exception when the function name is not located.
        throw new Exception(string.Format(Constants.UNHANDLED_EXCEPTION, "security role assignment: '" + FunctionName + "' not located."));
    } 
```

然后我希望在 App.XAML 中自动获取它：

```
private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
        {
            // throw this message to the main application exception event handler
            ApplicationEvents.OnExceptionOccurred(this, 
                new ExceptionEventArgs(e.ExceptionObject, 
                    null, 
                    ExceptionImportance.Critical));
        } 
```

**我的问题**

抛出异常时，它不会在堆栈中冒泡。当一次又一次地调试异常时，没有其他代码正在运行。

我在这里做错了什么？

谢谢，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T11:57:34.483

我认为这是因为异常在 UI 线程之外被抛出，所以没有其他代码“等待运行”。在此处触发事件意味着编写更多代码，但确实允许 UI 线程订阅此事件并在 UI 中正确呈现消息。

# c++ - 获取启动时崩溃的进程的转储

> ID：696580
> 
> 赞同：4
> 
> 时间：2009-03-30T09:33:29.207
> 
> 标签：c++, winapi, startup, crash-dumps

在我无权访问的客户计算机 (WinXP SP2) 上，我有一个 Win32 EXE（非托管 C++）在启动时崩溃。我想解决此问题的最佳方法是获取（小型）转储并稍后使用 windbg 或类似工具对其进行分析。

现在，我通常会告诉客户安装适用于 Windows 的调试工具并运行

```
cscript adplus.vbs -crash 
```

但是，您似乎无法将 adplus 用于启动时崩溃的应用程序（[http://support.microsoft.com/kb/q286350/](http://support.microsoft.com/kb/q286350/)表示“在以下情况下请勿使用 ADPlus：如果您必须对程序进行故障排除或在启动期间意外退出的进程”）。同一篇文章说“使用用户模式进程转储”，但我没有成功安装它。

知道如何获取在 Win32 上启动时崩溃的进程的转储吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-31T05:20:04.347

或者，您可以设置自己的转储生成框架，当遇到任何未处理的异常时自动创建进程转储。这将避免客户端必须安装 Windbg。

使用 SetUnhandledExceptionFilter Win32 API 在应用程序启动时注册应用程序级异常处理程序。只要有任何未处理的异常，就会调用注册的回调函数。然后，您可以使用 DbgHelp.dll 中的 MiniDumpWriteDump api 创建进程转储。

示例代码：-

```
LONG WINAPI My_UnhandledExceptionFilter(struct _EXCEPTION_POINTERS* ExceptionInfo)
{
    HANDLE hFile = CreateFile("FileName",
            GENERIC_WRITE,
            0,
            NULL,
            CREATE_ALWAYS,
            FILE_ATTRIBUTE_NORMAL,
            NULL);

    MINIDUMP_EXCEPTION_INFORMATION aMiniDumpInfo;
    aMiniDumpInfo.ThreadId = GetCurrentThreadId();
    aMiniDumpInfo.ExceptionPointers = ExceptionInfo;
    aMiniDumpInfo.ClientPointers = TRUE;

    MiniDumpWriteDump(GetCurrentProcess(),
            GetCurrentProcessId(),
            hFile,
            (MINIDUMP_TYPE) (MiniDumpWithFullMemory|MiniDumpWithHandleData),
            &aMiniDumpInfo,
            NULL,
            NULL);

    CloseHandle(hFile);

    return EXCEPTION_EXECUTE_HANDLER;
}

int main(int argc, char* argv[])
{
    SetUnhandledExceptionFilter(&My_UnhandledExceptionFilter);

    // User code throwing exception..

    return 0; 
} 
```

注意：- 调试进程时不会调用注册的异常过滤器。因此，在调试过程中，如果您在异常过滤器函数中放置断点，即使在导致未处理的异常之后它也没有命中，请不要感到惊讶。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-30T09:46:07.443

您可以在客户端计算机上安装[WinDBG](http://www.microsoft.com/whdc/devtools/debugging/)，然后使用“[图像文件执行选项](http://support.microsoft.com/kb/824344)”并将 WinDBG 设置为在进程启动后打开。然后运行崩溃进程，WinDBG 将立即打开。按***g*** (Go) 并等待进程崩溃，然后键入“ **.dump /mfh dumpFileName.dmp** ”。现在您有了可以调试的转储文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-13T20:48:17.490

这是收集 Vista SP1 崩溃的好方法：

[http://msdn.microsoft.com/en-us/library/bb787181(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb787181(VS.85).aspx)

无需在机器上安装任何东西！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-14T12:32:57.263

在客户端机器上安装开发人员工具将是我最后的手段，我必须承认我讨厌这个想法，尤其是在有替代方案对你有用的地方。

首先注册[WinQual](https://winqual.microsoft.com/)。您现在可以自动访问客户的故障转储和其他错误。我记得这是一项免费服务，没有理由不使用它。

Since WinQual will likely take a while for the crash dump to get to you, and it is always nice to be a little more responsive to customers especially when you application crashes, use [Dr. Watson](http://support.microsoft.com/kb/308538). As I recall when the crash occurs, before clicking on the dialog you can run **drwatsn32** from Start->Run or the command line and Dr Watson will pop up. At this point dismissing the crash dialog will generate a crash dump file. Should this fail, install Dr Watson by running it with the **-i** parameter on the command line.

# asp.net-mvc - 我应该为 ASP.Net MVC 项目使用什么 ORM？

> ID：696582
> 
> 赞同：7
> 
> 时间：2009-03-30T09:34:26.303
> 
> 标签：asp.net-mvc, orm

我正在开始一个新的 ASP.Net MVC 项目，并且想知道最好的模型方法是什么。

大多数演示都推荐 LinqToSQL，但我知道微软并没有真正增强这个产品，而是更多地关注实体框架。

我喜欢 Subsonic 方法，但我认为这将与版本 3 的 MVC 一起内置，但没有关于该项目开发阶段的消息，所以如果有新的版本，我对使用版本 2 有点谨慎很快发布。

我听说过 NHibernate 和 Castle Record，但对这些没有任何经验，并且听说过两者的许多优点/缺点。

强烈推荐任何帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-30T09:47:06.693

nHibernate 学习曲线更高但值得。使用 Fluent nHibernate 可以稍微缓解疼痛。nHibernate 的视觉效果不如某些 ORM，但这实际上只是您刚开始时的一个问题，一旦您有经验，缺乏视觉设计师是 IMO 的一个好处。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-31T23:06:38.680

对于 SubSonic，Rob 刚刚发布了一个新的 MVC 模板，您可以在开始一个新项目时使用该模板，该模板将很多好东西烘焙到一个新的 MVC 项目中，包括 SubSonic 3 的预发布。详细信息[可在 Rob Conery 的博客上找到](http://blog.wekeroad.com/blog/putting-the-ldquo-m-rdquo-back-in-mvc/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-30T13:36:51.977

[LLBLGenPro](http://www.llblgen.com/)非常适合我。它是目前最好的 .net ORM。我会避免使用 Linq to Sql，因为一旦项目增长，你就会遇到问题，而且它的功能相当薄弱（除了明显的缺点，比如只适用于 SQL Server 等）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T09:56:37.450

我使用 linq2sql，我认为如果您使用 MSSQL 作为数据库，它绝对可以工作（它也适用于其他数据库，但它需要一些 3rd 方工具）。是的，微软已经“停止”了它的开发，但它对于普通项目来说已经足够成熟了。我怀疑你会碰到任何墙壁。如果您正在启动一个需要在未来几年内支持的大型项目，那么实体框架可能更合适。

我*个人*之前没有使用过 NHibernate 和 Subsonic，但是就像 Craig 所说的，NHibernate 的学习曲线有点陡峭，尽管它应该是一个很棒的框架（一切都来自我听到或读到的一切）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-30T15:21:07.747

如果您愿意花一些钱或有一个较小的项目，我至少会尝试[LightSpeed](http://www.mindscape.co.nz/products/LightSpeed/default.aspx)。我发现了我曾经尝试过的非常 ORM 的痛点，我自己目前正在使用 LINQ to SQL。

LightSpeed 的功能非常丰富，尽管 LINQ 支持缺少一些无法解决的主要功能。它与 LINQ to SQL 和 LINQ to Entities 非常接近，但具有更多功能，例如全文搜索。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-31T18:17:39.313

[Castle ActiveRecord](http://www.castleproject.org/activerecord/index.html)非常适合基于 MVC 的中小型项目——我目前在几个项目中使用它，发现它非常适合 ASP.NET MVC。

它是在底层使用 NHibernate 的[活动记录模式](http://en.wikipedia.org/wiki/Active_record_pattern)的实现——换句话说，只要您对每个数据库表都有一个类感到高兴，它就会为您完成大部分 NHibernate 配置，让您自由编写代码如：

```
Customer bob = Customer.Find(/* customer Id goes here */);
bob.FirstName = "Robert";
bob.Save();

Invoice newInvoice = new Invoice();
newInvoice.Products.Add(Product.Find(/* product ID goes here */);
bob.Invoices.Add(newInvoice);
bob.Save(); 
```

几乎没有显式的 NHibernate 配置（当然，假设您的数据库中有客户、发票和产品表）

因为它在底层是 NHibernate，所以如果你需要迁移到 NHibernate 应该很简单——你已经拥有了所有必要的引用和库。NHibernate 行为的一些方面是您*不能*忽略的（例如[会话范围和刷新](http://www.castleproject.org/activerecord/documentation/trunk/usersguide/lifecycle.html)） - 但弄清楚这些发生了什么并不难，并且在 ActiveRecord 中使用它们将为您提供一个良好的开端 if/when您需要直接使用 NHibernate。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-31T18:47:11.143

我们在这里使用 Fluent + NHibernate，效果很好。一些很好的替代方案是 SubSonic、Entity Framework 和 Linq to SQL。我认为直接的 NHibernate 比它的价值要麻烦一些，但它是一个很好的底层与 Castle ActiveRecord 和 Fluent。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-30T09:51:28.243

我在一个项目中使用了一个名为 netTiers ( [http://www.nettiers.com/](http://www.nettiers.com/) ) 的产品，效果很好。它是一个 CodeSmith 脚本，可以从您的数据库表、视图和存储过程中生成业务对象。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-30T14:26:19.487

如果它不是一个巨大的项目，我会使用 Linq To SQL。如果您需要所有的花里胡哨，请使用 nHibernate 并尝试一下。我不认为你会以一种或另一种方式遇到任何严重的问题。

# pair-programming - 什么是结对编程？

> ID：696586
> 
> 赞同：4
> 
> 时间：2009-03-30T09:34:52.883
> 
> 标签：pair-programming

这个词似乎在英语社区中被广泛使用。我很好奇它是什么？是像两个学生在一台 PC 上一起编写代码还是什么？这个组织（不管它是什么）是否只在美国使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-30T09:37:08.760

结对编程是极限编程（XP）的主要实践之一。它确实意味着两个人在一台计算机上工作，通常一个在键盘上（通常称为驱动程序）和一个伙伴（称为乘客或霰弹枪）。它以提高生产力和生成代码的质量以及强制执行代码的组所有权而闻名 - XP 的另一个宗旨。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T09:40:21.700

[http://en.wikipedia.org/wiki/Pair_programming](http://en.wikipedia.org/wiki/Pair_programming)

> 结对编程是一种软件开发技术，其中两个程序员在一个键盘上一起工作。一个键入代码，另一个在键入时检查每一行代码。键入的人称为驱动程序。审查代码的人称为观察员[1](http://en.wikipedia.org/wiki/Pair_programming)或导航员。两位程序员经常更换角色（可能每 30 分钟一次）。
> 
> 在审查时，观察员还考虑工作的战略方向，提出改进的想法和未来可能解决的问题。这使驾驶员可以将所有注意力集中在完成当前任务的“战术”方面，使用观察者作为安全网和指南。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-30T09:38:55.480

如有疑问，请咨询 Wikipedia: [Pair Programming](http://en.wikipedia.org/wiki/Pair_programming)。一般的想法是让一个人编写代码，而另一个人扫描错误和凝聚力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-13T21:37:21.017

[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)的从业者有时使用的结对编程的扩展是[Ping Pong Pairing](http://c2.com/cgi/wiki?PairProgrammingPingPongPattern)。

乒乓配对的工作原理如下：

*   编写一个失败的测试（开发人员 A）
*   实现使测试通过的代码，然后（可选）[重构](http://en.wikipedia.org/wiki/Refactoring)（开发人员 B）
*   编写一个失败的测试（开发人员 B）
*   实现使测试通过的代码，然后（可选）重构（开发人员 A）
*   等等...

Ping Pong Pairing 的好处之一是任何开发人员都很难睡很长时间；-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T18:23:34.097

配对编程是指两个开发人员在同一个故事卡上共享一台计算机和键盘。它被认为是一种极端的编程实践。极限编程需要一些积极的东西，在这种情况下是代码审查，并将其发挥到极致。持续代码审查之外的好处如下：

*   **提高质量**：一对活跃的程序员在同一张故事卡上工作，完成卡时缺陷更少
*   **提高生产力**：在解决问题时，如果没有完全阻塞，则一对不太可能放慢速度。此外，当您与合作伙伴一起工作时，更难通过电子邮件或网络度假……您不想让合作伙伴失望。成对工作时，您将通过更简洁的设计和更少的代码行来解决问题
*   **消除知识孤岛**：通过轮换对，您将在整个团队中学习应用程序和领域业务知识。该团队不太可能被阻止，因为 Sue 在度假时没有其他人知道她的代码。
*   **知识转移：**当他们一起工作时，轮换的人会互相传授新的技能（工程和领域）。每个人的团队水平都会提高，知识会通过团队传播。
*   **团队自我选择：**团队学习一个花药的技能，并迅速淘汰表现不佳的人。

# java - java程序将图像文件分成4部分

> ID：696589
> 
> 赞同：-1
> 
> 时间：2009-03-30T09:35:16.050
> 
> 标签：java

我想使用 java 将图像文件分成 4 个部分，我试过了，但我遇到了异常，而且我想将图像的所有像素值存储到一个数组中。为此，我使用了像素采集器类，但没有用。请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T09:44:15.983

你试过[这个](http://www.javalobby.org/articles/ultimate-image/#13)吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-30T09:42:52.943

javax.imageio.ImageIO.read() 返回一个 BufferedImage。我认为这应该很有用。

# php - 如何管理数据层中的 SQL 语句

> ID：696596
> 
> 赞同：2
> 
> 时间：2009-03-30T09:37:33.377
> 
> 标签：php, sql

在 PHP 项目中，我们已经将业务逻辑与数据库访问分离。所有数据库任务都封装在按数据库和主题分组的不同数据库类中。这些类看起来很可怕，一半的源代码是 SQL 字符串，里面充满了参数等等。我们考虑将 SQL 放在“其他”位置，例如资源文件或其他位置。什么被认为是最佳实践，您知道 PHP 的任何支持工具/库吗？

亲切的问候

斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T11:42:01.923

您应该尽可能使用存储过程。这样您就可以提高性能、安全性和代码维护。这应该是您的第一种方法。

如果您仍想将 SP 查询与 DAL 分开，为什么不将它们存储在数据库中呢？将 SQL 查询存储在数据库中以进行抽象可能看起来很奇怪，因为需要一个查询来提取其他查询。这实际上是一种非常常见的方法，您可以在其中选择与特定条件匹配的查询，并可能（如果需要）动态构建查询。

另一种方法可能是创建动态构建查询的查询类；

```
class FruitQuery {
    ...
    public function addTypeCriteria($type) {
        $this->internalSQLCriterias[]  = "fruit=:type";
        $this->internalSQLParameters[] = array(':type', $type);
    }
    ...
    public function create() {
        $this->internalSQLQuery = "SELECT ... FROM Fruits";

        if (sizeof($this->internalSQLCriterias) > 0) {
            $this->internalSQLQuery .= " WHERE ";
            $moreThanOne = '';

            foreach ($this->internalSQLCriterias as $criteria) {
                $this->internalSQLQuery .= $moreThanOne . $criteria;
                $moreThanOne = " AND ";
            }
        }
    }
    ...
    public function execute() {
        /* Bind the parameters to the internalSQLQuery, execute and return results (if any) */
    }
... 
```

这门课在任何方面都绝对不完整，你可能想重新考虑它的结构——但你可能明白我想要表达的意思。:) 当然，您必须过滤查询生成器的输入以避免安全漏洞！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-31T16:52:04.057

我不了解 PHP，但根据我使用其他语言的经验，我可以告诉你很多：数据访问层是[架构宇航员](http://www.codinghorror.com/blog/archives/000165.html)的主要目标。有这么多“最佳实践”，没有一个是真正最好的。在设计 DAL 时，很容易陷入过度抽象的陷阱。只要你需要。

我几乎总是使用存储过程来避免意大利面条式代码并简化数据库中的授权，而不是出于性能原因；由于数据库引擎何时以及如何准备它们的复杂性，存储过程的性能提升可能很难确定。另一方面，如果我需要编写一个非常灵活的数据库操作（例如在具有许多输入的搜索屏幕上），我有时会将 SQL 直接放入代码中。有时无论你把它放在哪里，它都会变得难以理解。你必须在某个地方做这项工作。

如果您没有（不必要地）混合 SQL 和过程代码，请将 SQL 放在对应用程序的范围和规模最有意义的地方。抱歉，我无法回答您关于 PHP 工具和库的问题，但我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T09:58:32.750

好吧，您总是可以将[PDO](http://php.net/pdo)用于跨不同数据库的一致 API 并编写[可移植的 SQL 语句](http://developer.mimer.com/validator/index.htm)。

另一种选择是使用数据库抽象层，例如[Zend_DB](http://framework.zend.com/manual/en/zend.db.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T14:04:14.343

您的数据库访问层中几乎不应该有任何 SQL，因为它应该只是抽象与数据库的通信，而不管它正在通信的实际 SQL 是什么。

在现在著名的 MVC 模式中，您的业务逻辑*通常*包含形成模型层的 SQL。

撇开所有这些“宗教”定义不谈，你现在所拥有的还算正常，以成堆的 SQL 告终。SQL 必须存在于某个地方。根据您的优先级和性能要求，我会这样做（按性能折衷排序）：

1.  如果 SQL 中有明显的重复，我会进行快速重构迭代以隐藏方法中的所有常见 SQL。这些方法不一定要执行它，而只是构建它。这完全取决于您的应用程序以及 SQL 的复杂程度。如果您没有与数据库进行实际通信的底层，那么重构的一部分可能是添加它。

2.  我会考虑一个查询生成器。这是性能和灵活性之间的一个很好的平衡。您只能找到作为 ORM 或数据库访问层（如 Zend_Db 及其子组件）、Propel 和/或 Doctrine 的一部分的查询构建器。因此，您可以将其中一个查询构建器移植到您的项目中，而无需使用整个层（这真的不应该很难，因为它们都是基于 PDO 的）。这不应该增加任何明显的性能问题。

3.  我会考虑Doctrine ORM。但是，这对性能有相当大的影响。但是，您最终会得到非常可维护的代码。

最后，我永远不会考虑将 SQL 放入 Resources 或类似的东西中。

# asp.net - ASP.NET UserControls - 如何使内容字段可从 aspx 代码访问？

> ID：696607
> 
> 赞同：0
> 
> 时间：2009-03-30T09:41:57.250
> 
> 标签：asp.net, user-controls

我找不到解决我以下问题的好文章，所以如果有人有答案或只是答案的链接，我会很高兴。

假设我创建了一个名为 MyUserControl.ascx 的用户控件

我在 ascx 中用前缀 uc 注册它

```
<uc:MyUserControl runat="server" id="uc_test" SomeProperty="true">
<InnerContent>
  ...
  Controls added in here....
  <asp:Button runat="server" id="btn_test" Text="Test">
  ...
<InnerContent>
</uc:MyUserControl> 
```

我知道如何创建用户控件以及如何向其中添加属性和事件。

但是如何在我的用户控件中创建“InnerContent”字段？

我不知道所以请具体一点:)

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T09:57:16.980

您通常不会使用用户控件 ( `.ascx`) 来执行此操作。不过这完全有可能。这主要在您使用代码文件构建的自定义控件中完成。为了完成它，你声明你的控制类，如：

```
[ParseChildren(true), PersistChildren(false)]
public class MyControl : Control, INamingContainer {

   [PersistenceMode(PersistenceMode.InnerProperty),
    TemplateContainer(InnerContentTemplate)]
   public ITemplate InnerContent { get; set; }

   void CreateChildControls() { 
       InnerContentTemplate temp = new InnerContentTemplate();
       InnerContent.InstantiateIn(temp);
       Controls.Add(temp);
   }
}

public class InnerContentTemplate : Control, INamingContainer {

} 
```

对于`.ascx`文件，您可以从中继承它`UserControl`。

ASP.NET 中的模板是一件相当复杂的事情。不可能在答案中解释所有内容。您应该查看一些示例和文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T10:05:07.150

您想创建一个模板化控件，就像一个Repeater（即，您有一个ItemTemplate 区域，加上标题和wotnot）。[这](http://www.codeproject.com/KB/user-controls/TemplatedControl.aspx?display=PrintAll&fid=910746&df=90&mpp=25&noise=3&sort=Position&view=Quick)是一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T14:41:40.870

作为对 Merhdad 回复的评论的扩展：这对我有用，但我似乎无法找到一种方法来让我在模板中添加的控件再次退出。对我有什么快速提示吗？– 真正的午睡者（14 分钟前） 尝试过的`Control.FindControl`方法？– Mehrdad（8 分钟前）

.....................

我可以通过访问我添加到的面板来找到模板。像这样的东西：

```
pnl_content.Controls[index] 
```

但我不知道如何从模板中获取控件..

这就是我的代码的样子：

```
<uc:PopupOKCancel ClientInstanceName="pop_createCompany" runat="server" ID="pop_createCompany" OKButtonText="opret" HeaderText="Opret nyt firma">
     <ContentTemplate>
           <uc:CompanyDetails runat="server" id="uc_companyDetails"></uc:CompanyDetails>
     </ContentTemplate>
</uc:PopupOKCancel> 
```

CompanyDetails UserControl 似乎实际上并不存在.. 似乎只存在模板.. 我尝试向 Template 类添加一些属性，以便我可以设置它们并获取它们，但这是不可能的.. 由于某种原因。

# sql - 如何通过 PL/SQL 中的变量动态插入？

> ID：696612
> 
> 赞同：2
> 
> 时间：2009-03-30T09:44:02.800
> 
> 标签：sql, database, insert, dynamic

让我们先创建一个表

```
create table test
(
  id number,
  name varchar2(20)
); 
```

现在在插入期间，我想先将数据保存到变量中，然后像这样动态地将变量传递到 VALUES 子句中：

```
declare
  v_data varchar2(50);
begin
  v_data:='1,sunny';
  execute immediate 'insert into test values(v_data)';
  commit;
end; 
```

但是它显示了一些错误（没有足够的值）......请帮助如何实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T09:48:29.047

您需要为每个值使用不同的变量

```
declare 
  v_data1 number
  v_data2 varchar2(50);
begin 
  v_data1 :=1
  v_data2 = 'sunny'; 

  insert into test values(v_data1,v_data2);
  -- Alternatively insert into test (Name) values (v_data2);
commit; 
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T09:47:19.080

表测试有两列。您只插入一个而不命名它是哪一列，因此“值不足”。所以你需要：

```
INSERT INTO test (name) VALUES (data) 
```

或者可能更好的是输入一个 ID：

```
INSERT INTO test (id, name) VALUES (1, data) 
```

或者简单地说：

```
INSERT INTO test VALUES (1, data) 
```

对于这种事情，虽然我会使用游标而不是动态 SQL（甚至是内联 SQL）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T11:02:14.390

将值传递到动态 SQL 语句的常规方法是使用如下绑定变量：

```
declare 
   v_id integer;
   v_name varchar2(50);
begin
   v_id := 1;
   v_name := 'sunny';
   execute immediate
      'insert into test (id, name) values(:b1, :b2)'
      using v_id, v_name; 
   commit; 
end; 
```

每个值需要一个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T10:05:09.223

您的方法有效，但您需要稍微调整查询：

```
execute immediate 'insert into test values(' || v_data|| ')'; 
```

以便您的 v_data 变量的内容实际上被插入到字符串中，而不是值“v_data”本身。

# java - Java FileReader 编码问题

> ID：696626
> 
> 赞同：136
> 
> 时间：2009-03-30T09:55:19.667
> 
> 标签：java, file, unicode, encoding

我尝试使用 java.io.FileReader 读取一些文本文件并将它们转换为字符串，但我发现结果编码错误并且根本不可读。

这是我的环境：

*   Windows 2003，操作系统编码：CP1252

*   Java 5.0

我的文件是 UTF-8 编码或 CP1252 编码的，其中一些（UTF-8 编码文件）可能包含中文（非拉丁）字符。

我使用以下代码来完成我的工作：

```
 private static String readFileAsString(String filePath)
    throws java.io.IOException{
        StringBuffer fileData = new StringBuffer(1000);
        FileReader reader = new FileReader(filePath);
        //System.out.println(reader.getEncoding());
        BufferedReader reader = new BufferedReader(reader);
        char[] buf = new char[1024];
        int numRead=0;
        while((numRead=reader.read(buf)) != -1){
            String readData = String.valueOf(buf, 0, numRead);
            fileData.append(readData);
            buf = new char[1024];
        }
        reader.close();
        return fileData.toString();
    } 
```

上面的代码不起作用。我发现 FileReader 的编码是 CP1252，即使文本是 UTF-8 编码的。但是 java.io.FileReader 的 JavaDoc 说：

> 此类的构造函数假定默认字符编码和默认字节缓冲区大小是适当的。

这是否意味着如果我使用 FileReader，我不需要自己设置字符编码？但是我目前确实得到了错误编码的数据，处理我的情况的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2009-03-30T09:58:33.403

是的，您*需要指定*要读取的文件的编码。

是的，这意味着您必须*知道*要读取的文件的编码。

不，没有通用的方法来*猜测*任何给定的“纯文本”文件的编码。

[的单参数构造函数`FileReader`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/FileReader.html)总是使用平台默认编码，这通常*是个坏主意*。

由于 Java 11`FileReader`还获得了接受编码的构造函数：[`new FileReader(file, charset)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/FileReader.html#%3Cinit%3E(java.io.File,java.nio.charset.Charset))和[`new FileReader(fileName, charset)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/FileReader.html#%3Cinit%3E(java.lang.String,java.nio.charset.Charset)).

在早期版本的 java 中，您需要使用.[`new InputStreamReader(`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStreamReader.html)[`new FileInputStream(pathToFile)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/FileInputStream.html)`, <encoding>)`

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2009-03-30T10:07:25.193

`FileReader`使用 Java 的平台默认编码，这取决于运行它的计算机的系统设置，并且通常是该区域设置中用户中最流行的编码。

如果这个“最佳猜测”不正确，那么您必须明确指定编码。不幸的是，`FileReader`不允许这样做（API 中的主要疏忽）。相反，您必须使用`new InputStreamReader(new FileInputStream(filePath), encoding)`并理想地从有关文件的元数据中获取编码。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-06-05T07:44:17.013

对于 Java 7+[文档](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)，您可以使用：

```
BufferedReader reader = Files.newBufferedReader(path, StandardCharsets.UTF_8); 
```

这是所有字符集[文档](https://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)

例如，如果您的文件在 CP1252 中，请使用此[方法](https://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html#forName(java.lang.String))

```
Charset.forName("windows-1252"); 
```

这是 IO 和 NIO [doc的 Java 编码的其他规范名称](https://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html)

如果您不知道您在文件中获得的确切编码，您可以使用一些第三方库，例如 Google 的[这个](https://mvnrepository.com/artifact/com.googlecode.juniversalchardet/juniversalchardet)工具，它工作得相当简洁。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-12-07T04:36:37.800

从 Java 11 开始，您可以使用它：

```
public FileReader(String fileName, Charset charset) throws IOException; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-20T22:01:45.583

带有 InputStreamReader 的 FileInputStream 比直接使用 FileReader 更好，因为后者不允许您指定编码字符集。

这是一个同时使用 BufferedReader、FileInputStream 和 InputStreamReader 的示例，以便您可以从文件中读取行。

```
List<String> words = new ArrayList<>();
List<String> meanings = new ArrayList<>();
public void readAll( ) throws IOException{
    String fileName = "College_Grade4.txt";
    String charset = "UTF-8";
    BufferedReader reader = new BufferedReader(
        new InputStreamReader(
            new FileInputStream(fileName), charset)); 

    String line; 
    while ((line = reader.readLine()) != null) { 
        line = line.trim();
        if( line.length() == 0 ) continue;
        int idx = line.indexOf("\t");
        words.add( line.substring(0, idx ));
        meanings.add( line.substring(idx+1));
    } 
    reader.close();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-10T20:31:59.473

对于另一种拉丁语言，例如西里尔语，您可以使用以下内容：

```
FileReader fr = new FileReader("src/text.txt", StandardCharsets.UTF_8); 
```

并确保您的`.txt`文件以`UTF-8`（但不是默认`ANSI`）格式保存。干杯!

# visual-studio - 如何在 Visual Studio 中设置标准编码

> ID：696627
> 
> 赞同：114
> 
> 时间：2009-03-30T09:55:26.547
> 
> 标签：visual-studio, visual-studio-2008, encoding, character-encoding

我正在寻找一种设置 Visual Studio 的方法，以便它始终以 UTF-8 保存我的文件。

我只找到了设置这个项目范围的选项。有没有办法在 Visual Studio 范围内设置它？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-12-09T17:49:56.617

您是否希望文件保存为 UTF-8，因为您使用了在 ASCII 编码中会丢失的特殊字符？如果是这种情况，那么 VS2008 中有一个全局设置`Tools > Options > Environment > Documents`，名为`Save documents as Unicode when data cannot be saved in codepage`. 启用此选项后，如果某些字符无法在其他默认代码页中表示，VS2008 将保存为 Unicode。

另外，哪些文件*没有*保存为 UTF-8？默认情况下，我所有的 .cs、.csproj、.sln、.config、.as*x 等都保存为 UTF-8（带有签名、字节顺序标记）。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-07-25T08:37:28.010

## 什么

可以使用[EditorConfig](https://editorconfig.org)。

> EditorConfig 帮助开发人员在不同的编辑器和 IDE 之间定义和维护一致的编码风格。

这还包括文件编码。

EditorConfig 默认内置在 Visual Studio 2017 中，我有插件可用于与 VS2012 一样旧的版本。[从EditorConfig Visual Studio 插件页面](https://github.com/editorconfig/editorconfig-visualstudio#readme)了解更多信息。

## 如何

您可以在文件夹结构中设置足够高的 EditorConfig 配置文件以跨越所有预期的存储库（如果您的文件真的分散在任何地方，直到您的驱动器根目录）并配置[设置`charset`](https://editorconfig.org/#file-format-details)：

> **charset** : 设置为 latin1, utf-8, utf-8-bom, utf-16be 或 utf-16le 来控制字符集。

如果您希望进行更好的控制，您可以在每个文件夹级别或按文件名/类型添加过滤器和例外等。

配置完成后，兼容的 IDE 应该会自动使匹配的文件符合设置规则。请注意，Visual Studio 不会自动转换所有文件，但会在您在 IDE 中处理文件（打开和保存）时发挥作用。

## 接下来是什么

虽然您可以进行 Visual-studio 范围的设置，但我强烈建议您仍将 EditorConfig 根包含到您的解决方案版本控制中，以便显式设置也自动同步到所有团队成员。如果某些项目尚未设置自己的 editorconfig 文件，则您的驱动器根 editorconfig 文件可以作为后备。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-01-24T06:46:38.480

I work with Windows7.

Control Panel - Region and Language - Administrative - Language for non-Unicode programs.

After I set "Change system locale" to English(United States). My default encoding of vs2010 change to `Windows-1252`. It was `gb2312` before.

I created a new `.cpp` file for a C++ project, after checking in the new file to TFS the encoding show Windows-1252 from the properties page of the file.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T10:53:58.123

我不知道全局设置，但你可以试试这个：

1.  以 UTF-8 格式保存所有 Visual Studio 模板
2.  编写一个 Visual Studio 宏/插件，它将侦听 DocumentSaved 事件并将文件保存为 UTF-8 格式（如果尚未）。
3.  在源代码控制上放置一个代理，以确保新文件始终为 UTF-8。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-21T22:58:23.203

**问题是 Windows/Microsoft 应用程序在保存为非 ASCII 类型（UTF-8 等）时会将字节顺序标记放在所有文件的开头。**其他应用程序在读取文件顶部的这些奇怪的 Microsoft UTF-8 字节顺序编码标记时经常会中断。

这个问题的一个完美例子是在使用 UTF-8 编码时在旧 IE Web 浏览器中触发*quirsksmode*，因为浏览器通常会根据页面开头的编码显示 XHTML 网页。当其他应用程序查看那些 UTF-8 Visual Studio 页面时，它会变得一团糟。

我通常不推荐 Visual Studio Extensions，但我这样做是为了解决这个问题：

修复文件编码：[https ://vlasovstudio.com/fix-file-encoding/](https://vlasovstudio.com/fix-file-encoding/)

上面的 FixFileEncoding 安装删除了字节顺序标记并强制 VS 在所有 .NET 页面的顶部以 UTF-8 格式保存所有没有字节顺序标记签名的文件。安装后转到工具 > 选项，然后选择“FixFileEncoding”。它应该允许您将所有保存设置为 UTF-8 。将“cshtml 添加到文件列表中以始终以 UTF-8 格式保存，不带字节顺序标记，如下所示：“.(htm|html|cshtml)$)”。

现在在 Visual Studio 中打开您的文件之一。要验证其是否保存为 UTF-8，请转到“文件”>“另存为”，然后在“保存”按钮下选择“使用编码保存”。默认情况下，它应该从编码列表中选择“UNICODE（不带签名保存）”。现在，当您保存该页面时，它应该始终保存为 UTF-8，在 Visual Studio 中保存时，文件开头没有字节顺序标记。

# security - 散列和加盐密码如何使应用程序安全？

> ID：696629
> 
> 赞同：4
> 
> 时间：2009-03-30T09:56:27.857
> 
> 标签：security, passwords

据我所知，对站点管理员本人保密是一个好主意，因为他可以尝试获取用户的电子邮件并使用相同的密码登录到他的邮箱（因为许多用户在任何地方都使用相同的密码）。

除此之外，我看不出重点。我知道这会使字典攻击更加困难，但是......如果有人未经授权进入数据库，担心密码是否为时已晚？这家伙现在可以访问数据库中的所有表，并且可以获取所有数据并做他想做的任何事情。

还是我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-30T10:02:47.840

更大的问题是[人们倾向于](http://www.readwriteweb.com/archives/majority_use_same_password.php) [到处使用相同的密码](http://computerworld.co.nz/news.nsf/news/BDAAA24BAA7E8A1ECC257576006B207A)。因此，如果您获得了用户名和未加盐密码的数据库，那么它们很有可能在其他地方也可以使用，例如 hotmail、gmail 等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T10:01:57.280

该人可能可以对**您的系统**做任何他/她想做的事情，但您不应该允许他/她对*其他系统*做任何事情（通过使用您的用户密码）。

密码是您的用户的财产。你应该妥善保管它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-30T10:02:07.217

您的许多用户在您的网站上使用与他们在银行相同的凭据（用户名/密码）。如果有人可以获得凭证表，他们就可以立即访问一堆银行账户。失败。

如果您实际上不存储密码，那么攻击者无法仅通过获取凭据表来窃取您用户的银行帐户。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-30T10:10:05.420

它依赖于哈希是单向函数的事实。换句话说，将密码转换为哈希非常容易，但反之则非常困难。

因此，当用户注册时，您将他们选择的密码转换为哈希并存储。稍后，他们使用他们的密码登录，您将密码转换为其哈希值并进行比较，这是因为如果 (passwordhashA == passwordhashB) 然后密码A=passwordB，则概率很高。

盐渍是一个相关问题的解决方案。如果您知道某人的密码哈希值是 ABCDEF，那么您可以尝试计算所有可能密码的哈希值。迟早你会发现 hash('dog') = ABCDEF，所以你知道他们的密码。这需要很长时间，但是可以通过使用预先创建的“字典”来加快该过程，对于给定的哈希，您可以查找相应的密码。然而，Salting 意味着被散列的文本不是一个简单的英文单词，也不是一个简单的单词组合。例如，我在上面给出的情况下，将被散列的文本不是“dog”，而是“somecrazymadeuptextdog”。这意味着任何现成的字典都是无用的，

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-30T10:14:24.833

站点管理员可能不是唯一可以访问您的密码的人。整个数据库的转储总是有可能意外地出现在公共共享上。在这种情况下，世界上每个可以访问互联网的人都可以下载它并阅读以明文形式方便地存储的密码。

是的，这已经发生了。也可以使用信用卡数据。

是的，它很有可能再次发生。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-30T10:31:11.220

“如果有人未经授权进入数据库，担心密码是不是太迟了？”

您假设一个糟糕的数据库设计，其中授权数据与应用程序数据混合在一起。

“关注点分离”原则和“最少访问”原则建议用户凭据应与其他所有内容分开。

例如，将您的用户凭据保存在 LDAP 服务器中。

此外，您的问题假设数据库凭据是唯一的凭据。同样，最少访问原则表明您拥有与数据库凭据分开的应用程序凭据。

您的 Web 应用程序用户名和密码不是数据库用户名和密码。对于桌面应用程序也是如此。应用认证不一定是数据库认证。

此外，良好的安全性建议将对用户名和密码的访问与应用程序数据分开。在拥有大量数据库用户的大型组织中，一名管理员应该是“安全官”并处理身份验证和授权。没有其他用户可以修改授权，并且安全官无权访问应用程序数据。

这是一个快速审核，以确保安全人员永远不会访问数据。这有点复杂，但另一个审计可以确定拥有数据授权的人是真实的人，而不是安全官的别名。

散列密码是有效安全策略的一部分。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-30T10:09:10.133

当然，存储密码的哈希值而不是纯文本并不能使您的应用程序安全。但这是增加安全性的一种措施。正如您所提到的，如果您的服务器被包含，此措施不会拯救您，但它会限制损害。

*链条的强度取决于其最薄弱的环节*

散列密码只是加强了链条的一个环节。所以你将不得不做更多的事情。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-30T11:01:22.707

除了已经说过的关于加盐的内容外，加盐还解决了另一个问题：

如果您在任何地方都使用相同的盐（或根本不使用盐），那么只需查看数据库就可以说用户 foo 和用户 bar 都具有相同的密码（即使您不知道密码是什么）。

然后，如果一个人获得了 foo 的密码（例如使用社会工程），那么 bar 的密码也是已知的。

此外，如果盐在任何地方都相同，则可以建立一个专用于该特定盐的字典，然后使用此“加盐”字典进行暴力攻击。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-30T12:43:50.590

这可能有点跑题了，但是偶尔，我注意到一些网站没有使用散列（例如，当我单击忘记密码按钮时，他们以明文形式向我发送我的密码，而不是让我选择另一个） .

我通常只是取消订阅，因为**我认为我不能信任一个由不采取散列密码基本预防措施的人设计的网站。**

这是加盐的另一个原因:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-10T18:49:06.097

人们似乎对此太自满了！威胁不是某个对您的系统或备份媒体具有 shell 访问权限的人，它可能是任何可以看到您站点的未受保护（但动态）部分（*）和一个被忽视的 SQL 注入威胁的脚本小子。一个查询，突然他可以以任何用户身份登录，甚至可以以管理员身份登录。对密码进行散列使得攻击者不太可能以任何特定用户的身份使用他们的密码登录 - 或者 - 使用他们自己的密码更新记录。

(*) “不受保护”包括可以作为自行注册用户访问的网站的任何部分。将此与银行网站进行对比，例如，您必须拥有一个现有的银行帐户才能访问该网站的大部分内容。攻击者仍然可以开设一个银行账户来访问该网站，但是当他试图破解系统时，派大个子拿着更大的枪来跟踪他会容易得多。

# linq-to-entities - Eager-loading 和 LINQ to Entity

> ID：696633
> 
> 赞同：2
> 
> 时间：2009-03-30T09:56:57.183
> 
> 标签：linq-to-entities

据我所知，LINQ to entity 鼓励使用`Load()`or进行急切加载`Include()`。但是，我想知道在多层应用程序中应该在哪里进行急切加载？

数据访问层（封装实体实例的存储库类）具有通用`Item GetItem(int id)`功能是否正确，并且在业务逻辑层中执行

```
Item item = dbRepository.GetItem(itemId);
if (!item.itemDetails.IsLoaded)
 item.itemDetails.Load() 
```

或者存储库类应该有不同的显式函数来加载不同的外部关系，因此返回预先加载的关系项？

非常感谢！

**编辑：** 示例 - [http://www.asp.net/learn/mvc/tutorial-29-cs.aspx](http://www.asp.net/learn/mvc/tutorial-29-cs.aspx)

```
public Contact GetContact(int id) 
```

该函数返回一个`Contact`实体类型。但是，取决于业务逻辑的需要，我们可能想要`Load()`或不同的实体`Include()`的对外关系。`Contact`这个要求是否意味着我们需要更多带有参数的重载`GetContact()`方法来指示要加载哪些关系，或者只是执行`Load()`业务逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T13:34:17.567

在大多数情况下，我都不做任何一个。相反，我使用 LINQ 将我的实体类型映射到表示模型类型。在这种情况下，您根本不必考虑加载。例如：

```
var presentationModel = (from entity in Repository.Entities
                         select new PresentationEntity ()
                         {
                             Prop = entity.Prop,
                             ChildProp = entity.Child.Prop
                         }).First(); 
```

请注意，我不必考虑加载 Child。当您投影到不同类型时，LINQ to entity 会为您执行此操作。

# selenium - Selenium 地址栏

> ID：696634
> 
> 赞同：1
> 
> 时间：2009-03-30T09:56:59.883
> 
> 标签：selenium

早上好

我正在使用硒，我遇到了一点墙。

我正在尝试通过在地址栏中输入来导航到另一个页面，但是在使用 selenium 时我似乎无法做到这一点。

这可能吗？

我不能简单地在指向该页面的页面上放置一个链接。

干杯卡梅伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T16:24:35.597

简短的回答：尝试“打开”命令。

长答案：Selenium 不支持“在地址栏中输入”。它只能控制页面画布中的内容*，*或者更具体地说，它只能做 JavaScript 可以做的事情。换句话说，它可以更改位置，但不能通过在地址栏中实际输入内容来更改。open 命令使用 JavaScript 来更改页面的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-10T13:19:34.783

地址栏是您放置基本网址的位置，

并使用打开您需要使用 selenium open 命令的 url，

前任：

基本网址：google.com

命令1#

命令 = 打开目标 = /

# git - 有没有办法在 git 中使用审查板，而无需每次都通过 Web 界面手动上传差异？

> ID：696638
> 
> 赞同：11
> 
> 时间：2009-03-30T09:58:15.900
> 
> 标签：git, review-board

我知道审查委员会是开源的，我可以自己修改代码，但我想知道是否有更简单的方法。

“审查委员会”是指基于网络的差异审查工具：[http ://www.review-board.org/](http://www.review-board.org/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-30T14:38:23.670

我根本没有使用过审查委员会工具，但[审查后的文档](http://www.review-board.org/docs/manual/dev/users/tools/post-review/)确实提供[了一些关于将 git 提交发布到该工具的信息](http://www.review-board.org/docs/manual/dev/users/tools/post-review/#automating-post-review)。我认为这在你的 git 存储库中设置为 post-commit 挂钩相当简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-02-02T15:23:28.750

如果您正在使用中央 git 存储库，您也可以在 pre/post 推送挂钩中使用 post-review。

# c# - 模糊的关系数据库映射到 C# 数据集

> ID：696645
> 
> 赞同：0
> 
> 时间：2009-03-30T09:59:47.987
> 
> 标签：c#, .net, database, ado.net

为上一篇文章道歉，有时写问题实际上也解决了它；）就像“答案就在问题中”

所以我试图连接一个通过 DLL 入口点访问的旧的原始数据库系统，但是在对象理性映射方面已经做了一些工作，人们可以创建每个表的对象并以这种方式访问​​数据库，但是为了查看整个数据库几乎不可能解析这么多表（1000 个左右的对象） 但是，如果我可以创建某种模式映射到 C# Dataset 类，那么它就可以访问了。

希望能给我一些信息来了解我正在尝试的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T16:43:41.137

我不知道您要访问哪种 DBMS，但如果您的旧系统有某种查询语言，您可以编写某种接口来查询数据库（SQL 到旧语言类、SQL 驱动程序等等） ）。

我不确定您为什么要对此进行对象关系映射。为什么不编写一个让您以简单而有效的方式查询它的界面呢？

编辑：我看到你写“对象理性映射”，我想你的意思是对象关系映射

# layout - 重构 Crystal Reports：是否要、要什么以及为什么？

> ID：696646
> 
> 赞同：0
> 
> 时间：2009-03-30T10:01:48.217
> 
> 标签：layout, crystal-reports, reporting, graphing

报表设计、生成和维护并不难，但很乏味。我们在 Crystal Reports XI 中有许多旧版（不同程度的旧版）报表。这些是为 A4/PDF 设计的 - 不一定是印刷的，但具有可预测的布局，我们不可能很快淘汰它们。

所有这些都连接到现有的存储过程 (SQL Server 2005) 以获取它们的数据。*为了使这些报告看起来如此*，已经花费了很多时间。报告的实际创建主要通过 .NET/C# API 完成并导出为 PDF。有许多本地开发和维护的应用程序是稳定的并且可以很好地处理这个过程。

因此，我们喜欢 Crystal Reports 稳定、我们的应用程序可靠地生成这些报告、PDF 输出一致以及当 Crystal Reports 模板被批准和设置后，它就可以正常工作的事实。

但是，这种情况存在一些大问题。最大的问题是对底层报告模板本身的任何更改都是一个巨大的痛苦。使 Crystal Reports 模板达到用户满意的程度是一件非常麻烦的事情，并且可能涉及 DTP/图形/数据库/协调的长期迭代和无数其他小问题。

再加上 Crystal Reports 是一种相对稀有的技能，而且没有人愿意承认，我们正在尝试寻找替代解决方案。

我已经开始考虑一些想法 - 欢迎任何其他想法！

*   Crystal Reports 2008 是否比 XI 提供任何好处？
*   其他人是如何管理从 CR 迁移出来的？又该做什么？
*   鉴于数据访问层结构良好，也许可以通过 Excel 服务生成图形，然后将它们作为图形导入框架模板？水晶，另一个 - 有没有人尝试过这样的事情？
*   报告服务更好吗？（我们有一些 RS 技能，但同样，人们不愿意真正承认知道任何事情的另一件事。）
*   是否有任何可用的布局工具（最好带有 .NET API）用于在过去称为桌面出版的内容？如果我们有图形/表格/其他对象作为图像，然后可以自动渲染，

理想情况下，我想转向一个解决方案，让用户可以更好地控制底层更改，以及是否可以在我们可以提供给他们的工具中以编程方式处理这一切，这样我就可以编码而不是编辑 Crystal Reports 模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T16:58:37.727

那么您在使用 Crystal 时还有哪些其他问题？听起来您希望用户处理报告......（不是我们所有人）。问题是他们从不想使用提供的任何数据模型。必须有人知道如何查询数据库。通过使用存储过程，您已经拥有了它。也许让几个用户学习基本的水晶原理（分组、排序、求和等），然后你编写存储过程，然后他们用水晶格式化它。这样你就可以绕过水晶的最大绊脚石，也就是在水晶中做表连接。

我有水晶知识，并认为它相当容易使用。不过我不会称它为 Skillz，更像是我知道它能做什么和不能做什么，所以我可以为自己节省很多时间。

我不是要为水晶辩护，但如果它没有坏...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-03T17:07:57.767

我们最近在 XP 上升级到了 VS 2008。我们的用户仍在 Win2K 上运行 .NET 2.0 框架，而且我们近期不会在公司范围内进行升级。直到我们从 2005 年升级到 2008 年才发现，VS 2008 附带的 Crystal Reports 可再发行组件只能在 XP 或更高版本上运行。哎呀。因此，我们现在无法编辑旧报告，因为 CR 会自动将其更新到新版本。

我最终要做的是使用我们现有的[XMLSerializer](https://stackoverflow.com/questions/667881/serializing-a-list-of-strongly-typed-objects/667959#667959)，构建一个保存报告数据的类（本质上是大量字符串和 List<T> 属性），并将其序列化为 XML 文件。插入将其转换为 HTML/CSS 的 XSL 样式表声明，并在 IE 中打开它。

它最终比 Crystal Reports 快了很多，特别是在开发方面，我通常可以让他们给我一个 Word 文档，无论他们希望报表看起来是什么样的，将其导出为 HTML，清理它，然后然后将其用作 XSL 生成的模板。

它远不如 Crystal Reports 功能齐全，但对于我们需要的（XRay 和实验室报告和工作订单）来说，它是完美的。

# c# - 为什么这会出现在我的 c# 字符串中：

> ID：696659
> 
> 赞同：10
> 
> 时间：2009-03-30T10:07:23.477
> 
> 标签：c#, .net, asp.net, localization, string

我在 c# 中有一个字符串，初始化如下：

```
string strVal = "£2000"; 
```

但是，每当我写出这个字符串时，都会写下以下内容：

￡2000

它不会用美元来做到这一点。

我用来写出值的示例代码：

```
System.IO.File.AppendAllText(HttpContext.Current.Server.MapPath("/logging.txt"), strVal); 
```

我猜这与本地化有关，但如果 c# 字符串只是 unicode，那么这肯定可以工作吗？

**澄清：**再多一点信息，Jon Skeet 的回答是正确的，但是当我对字符串进行 URLEncode 时，我也遇到了问题。有没有办法防止这种情况？

所以 URL 编码的字符串如下所示：

“%c2%a32000”

%c2 = %a3 = £

如果我编码为 ASCII，那么 £ 会输出为 ?

还有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T10:09:51.380

[`AppendAllText`](http://msdn.microsoft.com/en-us/library/ms143356.aspx)正在用 UTF-8 写出文本。

你用什么看它？可能是它不理解 UTF-8，或者没有先尝试 UTF-8。告诉您的编辑器/查看器这是一个 UTF-8 文件，一切都应该很好。或者，使用`AppendAllText`允许您指定编码并使用对您来说最方便的任何编码的重载。

编辑：针对您编辑的问题，使用 ASCII 编码时失败的原因是 £ 不在 ASCII 字符集中（即 Unicode 0-127）。

从外观上看，URL 编码也使用 UTF-8。同样，如果您想使用不同的编码，请将其指定为[`HttpUtility.UrlEncode`](http://msdn.microsoft.com/en-us/library/h10z5byc.aspx)接受编码的重载。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T10:39:01.687

在 HTML 页面和 HTTP 标头中使用的 URL 的默认字符集称为[ISO-8859-1](http://en.wikipedia.org/wiki/ISO_8859-1)或 ISO Latin-1。

它与 UTF-8 不同，也与 ASCII 不同，但它确实适合每个字符一个字节。范围 0 到 127 很像 ASCII，整个范围 0 到 255 与 Unicode 的范围 0000-00FF 相同。

因此，您可以通过将每个字符转换为一个字节来从 C# 字符串生成它，或者您可以使用它`Encoding.GetEncoding("iso-8859-1")`来获取一个对象来为您进行转换。

（在此字符集中，英磅符号为 163。）

**背景**

[RFC](http://www.rfc-editor.org/rfc/rfc1738.txt)规定未编码的文本必须限制在传统的 7 位 US ASCII 范围内，并且必须对其他任何内容（加上特殊的 URL 分隔符）进行编码。但它留下了一个问题，即在 8 位范围的上半部分使用什么字符集，使其依赖于 URL 出现的上下文。

该上下文由另外两个标准 HTTP 和 HTML 定义，它们确实指定了默认字符集，并且它们共同对实现者产生了一种实际上不可抗拒的力量，即假设地址栏包含引用 ISO-8859-1 的百分比编码.

ISO-8859-1[是通过 HTTP 发送的基于文本的内容的字符集，](http://www.rfc-editor.org/rfc/rfc2616.txt)除非另有说明。因此，当 URL 字符串出现在 HTTP GET 标头中时，它应该在 ISO-8859-1 中。

另一个因素是 HTML 也使用 ISO-8859-1 作为其默认值，并且 URL 通常源自 HTML 页面中的链接。因此，当您在记事本中制作一个简单的最小 HTML 页面时，您在该文件中键入的 URL 是 ISO-8859-1 格式的。

它有时被描述为标准中的“漏洞”，但事实并非如此。只是 HTML/HTTP 填补了 RFC 为 URL 留下的空白。

因此，例如，[此页面](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm#how)上的建议：

> 字符的 URL 编码由“%”符号组成，后跟字符的 ISO-Latin 代码点的两位十六进制表示（不区分大小写）。

（ISO-Latin 是 IS-8859-1 的另一个名称）。

理论就这么多。将此粘贴到记事本中，将其保存为 .html 文件，然后在几个浏览器中打开它。点击链接，谷歌应该搜索英镑。

```
<HTML>
  <BODY>
    <A href="http://www.google.com/search?q=%a3">Test</A>
  </BODY>
</HTML> 
```

它适用于 IE、Firefox、Apple Safari、Google Chrome - 我现在没有其他可用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T10:35:03.677

请注意，`%a3`不能以*ASCII*（7 位，[*Basic Latin*](http://www.unicode.org/charts/PDF/U0000.pdf)）编码。

[英镑符号（页面下方）](http://www.unicode.org/charts/charindex3.html#P)是[*Latin-1*](http://www.unicode.org/charts/PDF/U0080.pdf)编码的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-14T07:26:26.837

我注意到只有在使用长字符串（超过 4000 个）字符时才会发生这种情况。我的解决方案是在接收到数据库中的参数后，我只需将 Â 符号替换为空。请注意，实际上可能需要 Â，如果是这种情况，则此解决方案不合适。

# svn - svn update 在提交后不起作用

> ID：696662
> 
> 赞同：2
> 
> 时间：2009-03-30T10:08:36.547
> 
> 标签：svn, hook, post-commit

我正在尝试实现一个提交后挂钩来更新工作副本。据我所知，post commit hook 正在运行（我在文件中写了一些东西来验证它）但更新命令没有运行。

一开始我是

```
cd /home/user/working/copy
svn update 
```

但这不起作用，然后我读到您必须提供 svn 的完整路径：

```
cd /home/user/working/copy
/usr/bin/svn update 
```

但它仍然无法正常工作。

我将权限更改为 777 并在一个空的环境中运行了脚本......并且它可以工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T16:29:14.323

```
#!/bin/bash
/usr/bin/svn 更新 /home/user/working/copy
```

上面的代码应该作为一个提交后的钩子。

如果需要，添加 --username 和 --password 选项。

**编辑：**

看[http://subversion.tigris.org/faq.html#website-auto-update](http://subversion.tigris.org/faq.html#website-auto-update)

执行提交的服务器程序（svnserve 或 apache）与将运行提交后挂钩脚本的程序相同。这意味着该程序必须具有适当的权限才能更新工作副本。

如果需要更新的“工作副本”由同一用户拥有，那么您无需担心用户名和密码。

Subversion 常见问题解答建议将 Setuid 与以下 C 程序一起使用。

```
#include <stddef.h>
#include <stdlib.h>
#include <unistd.h>
int main(void)
{
execl("/usr/local/bin/svn", "svn", "update", "/home/joe/public_html/",
    (const char *) NULL);
return(EXIT_FAILURE);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T11:17:39.143

工作副本位于用户的主目录中。如果 SVN 服务器作为不同的用户运行，比如“svnserver”，那么提交后挂钩脚本将作为“svnserver”运行。一个用户不能修改或读取另一个用户的文件是有道理的，除非文件的权限设置允许这样做。

**您不应在多个用户之间共享工作副本**。如果你真的必须，那么仅仅为每个用户授予读/写权限是不够的。您还需要确保没有任何用户创建其他用户无法访问的文件。要实现这一点，您需要为设置正确[umask的 svn 命令编写包装脚本，或者让所有相关用户能够通过](http://en.wikipedia.org/wiki/Umask)[sudo](http://en.wikipedia.org/wiki/Sudo)充当特定用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T11:28:57.463

如果您自己不使用工作副本，您可以将工作副本分配给运行**钩子**脚本的用户

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-11T02:56:55.757

我也遇到了同样的问题，并尝试了（包括官方常见问题解答中的那个）所有方法都没有运气

当然，我每次也根据需要运行 chmod -R 和 chown -R www-data:www-data 。

在大多数情况下，执行了更新命令，没有权限错误，没有任何其他错误消息，但工作副本没有更新。

最后，以下步骤对我很有效：

在提交后挂钩运行

```
export LC_CTYPE=en_US.UTF-8
cd [/working-copy-folder/] # heading tail slash
/usr/bin/svn checkout [source path] 
```

一次，然后将提交后挂钩更新为

```
export LC_CTYPE=en_US.UTF-8
cd [/working-copy-folder/]
/usr/bin/svn update 
```

现在它正在工作，我太累了，找不到根本原因。一整天都在'svn update'上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-31T13:11:25.960

我得到的最终解决方案是我得到的一些答案的混合。我的服务器的 apache 以无人身份运行，所以我将工作副本设置为无人拥有，并在用户名组中，然后将其 chmod 为 775。这样钩子将起作用，并且用户名也将有权通过 FTP 更新文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T23:50:45.573

wcoenen 的回答绝对是在正确的轨道上。解决此问题的最简单方法是将 SVN 用户添加到您的组中。假设您的提交后挂钩由用户 someUser 和组 someUser 拥有。将 SVN 服务器添加到 someUser 组，并将您的提交后挂钩脚本更改为组可执行，将解决您的问题。

我希望这是有道理的：P

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-20T14:16:20.573

这个脚本更好，因为它只更新需要的文件... [http://vidax.net/blog/en/2010/03/subversion-post-commit-hook/](http://vidax.net/blog/en/2010/03/subversion-post-commit-hook/)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2009-03-30T12:36:04.273

我相信提交后实际上是在提交可见之前运行的。这很奇怪，但是假设您提交了修订版 30。提交后仍会将 29 视为最新修订版。提交后脚本完成后，您将看到 30 作为头部修订。

我可能是错的。这完全来自记忆。至少可以尝试一些东西。

# perl - 如何获取用户在 Perl AGI 脚本中输入的扩展名？

> ID：696668
> 
> 赞同：0
> 
> 时间：2009-03-30T10:11:43.687
> 
> 标签：perl, asterisk, telephony, agi

我是 Asterisk AGI 编程的新手。我正在尝试使用[asterisk-perl](http://search.cpan.org/dist/asterisk-perl)创建一个简单的 IVR，用户可以在其中输入从 1 到 4 的任何扩展名。到目前为止，这是我的代码：

```
use Asterisk::AGI;

$AGI = new Asterisk::AGI;

for($i = 0 ; $i < 2 ; $i++)
{
    $AGI->exec('Playback','welcome');

    $AGI->exec('WaitExten','5|m');

} 
```

现在，我想知道用户输入的扩展名并采取相应的措施。如何获取用户输入的扩展名？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-08T22:57:51.673

我相信您想使用 get_data，允许您播放文件，然后等待给定的时间等待给定的位数，例如：

> $AGI->get_data('demo-welcome', 15000, 5);

看[这里](http://kobesearch.cpan.org/htdocs/asterisk-perl/Asterisk/AGI.html#AGI_gt_get_data_filename_timeout_max)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T23:59:18.300

好吧，既然[WaitExten](http://voip-info.org/wiki-Asterisk+cmd+WaitExten)命令将用户更改为新的扩展，我想您可以在调用 WaitExten 后读取特殊变量[${EXTEN}](http://www.voip-info.org/wiki/index.php?page=Asterisk+variables#PredefinedChannelVariables)。虽然我不熟悉 Asterisk::Perl，但我只使用 Java 中的 FastAGI，所以我不知道确切的命令，但必须有一些命令来读取变量的值。

# sql - MySQL - 结合来自多个事务的问题和答案

> ID：696669
> 
> 赞同：1
> 
> 时间：2009-03-30T10:11:53.810
> 
> 标签：sql, mysql

我在数据库中有以下表格，用于存储调查结果：

![替代文字](https://i.stack.imgur.com/091sC.jpg)

每次我在商店（阅读 Shop）与某人交谈时，我都会创建一个带有日期/时间的新交易（tblTransaction.Created）。每个事务可以有许多与之相关的问题答案。

我的问题是 2 个事务可能都包含对同一问题的不同答案，我正在尝试创建一个 SQL 查询/过程以仅返回给定商店的最新问题答案。

这是一个例子：

我在 Some Shop Plc 与某人交谈。并在 09 年 1 月 1 日创建交易（交易 ID 1）。在这个交易中，我询问 QuestionID 1 和 2。然后在 2009 年 10 月 1 日，我再次与他们交谈，创建一个新交易（交易 ID 2）并回答问题 2 和 3。

我希望能够显示最新答案列表；第一笔交易的问题 1 和第二笔交易的问题 2 和 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T11:50:37.770

```
SELECT
     S.StoreID,
     S.BranchName,
     A.QuestionID,
     T.Created,
     A.*
FROM
     tblStore S
INNER JOIN tblTransaction T ON
     T.StoreID = S.StoreID
INNER JOIN tblAnswer A ON
     A.TransactionID = T.TransactionID AND
     A.StoreID = S.StoreID
WHERE NOT EXISTS
          (
          SELECT
               T2.StoreID,
               A2.QuestionID,
               T2.TransactionID,
               T2.CreatedDate
          FROM
               tblTransaction T2
          INNER JOIN tblAnswer A2 ON
               A2.TransactionID = T2.TransactionID AND
               A2.StoreID = T2.StoreID
          WHERE
               T2.StoreID = T.StoreID AND
               A2.QuestionID = A.QuestionID AND
               T2.CreatedDate > T.CreatedDate
          ) 
```

您也可以通过在与 WHERE 子句中相同的条件下 LEFT OUTER JOINing 子查询并在其中查找 NULL 值来执行此操作，或者您可以从子查询中删除 TransactionID 在 CreatedDate 上使用 MAX() 并查找匹配项使用 INNER JOIN 的方式。

请记住，如果您在同一商店有多个交易且创建日期相同，这可能与您的预期不同。您可能需要根据围绕该情况的业务规则在此处添加其他标准。

# java - Macbook 安全警报任务

> ID：696670
> 
> 赞同：1
> 
> 时间：2009-03-30T10:11:55.043
> 
> 标签：java

我打算把我的 macbook 放在我的楼梯平台/走廊上，以防楼下的人上来翻找我的卧室/房间，这样当检测到入侵者时，就会发生一组脚本事件，例如从 10 开始倒计时，然后非常响亮音乐，但现有的软件要么是商业的，要么是不够的。我不打算在这上面花钱。

给定带有网络摄像头的 Macbook 或台式机。使用java，我需要哪些库来实现上述的基本版本？还有哪些用于实现这些运动检测程序的参考资料会有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T10:50:50.097

你应该看看[OpenCV](http://sourceforge.net/projects/opencvlibrary/)。

虽然它适用于 C++，但我不确定是否有适用于 Java 的版本。

它是处理网络摄像头的最佳 API。如果您可以切换到 C++ 来使用它，那么我强烈建议您这样做。

# asp.net-mvc - ASP.NET MVC 中的小写 URL

> ID：696673
> 
> 赞同：12
> 
> 时间：2009-03-30T10:15:49.777
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

是否可以强制/扩展路由引擎以生成小写 URL，`/controller/action`而不是`/Controller/Action`?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-09-07T23:56:37.230

此外，您应该强制将任何大写的传入请求*重定向*到小写版本。搜索引擎区分大小写处理 URL，这意味着如果您有多个指向同一内容的链接，则该内容的页面排名是分散的，因此会被稀释。

为此类链接返回 HTTP 301（永久移动）将导致搜索引擎“合并”这些链接，因此只保留一个对您的内容的引用。

将类似的内容添加到您的`Global.asax.cs`文件中：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    // Don't rewrite requests for content (.png, .css) or scripts (.js)
    if (Request.Url.AbsolutePath.Contains("/Content/") ||
        Request.Url.AbsolutePath.Contains("/Scripts/"))
        return;

    // If uppercase chars exist, redirect to a lowercase version
    var url = Request.Url.ToString();
    if (Regex.IsMatch(url, @"[A-Z]"))
    {
        Response.Clear();
        Response.Status = "301 Moved Permanently";
        Response.StatusCode = (int)HttpStatusCode.MovedPermanently;
        Response.AddHeader("Location", url.ToLower());
        Response.End();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T10:28:13.007

是的，只需在 global.asax 文件中的路由中更改它即可。

@所有人都在问这是否重要：是的，我*确实*认为这很重要。将网址全部小写看起来更好。

每次你尽可能不让某件东西看起来不错时，比尔巴克斯顿都会杀死一只小猫。

# sql - 逗号分隔值

> ID：696675
> 
> 赞同：2
> 
> 时间：2009-03-30T10:17:24.157
> 
> 标签：sql, mysql

如何使用 mysql 获取此查询？

**表格1：**

```
id : nos

1   12,13,14
2   14
3   14,12 
```

**表2：**

```
id : values

12   PHP
13   JAVA
14   C++ 
```

**现在，我想要这样的输出：**

```
1   PHP, JAVA, C++
2   C++
3   C++, PHP 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-30T10:26:50.873

未经测试，但应该是这样的：

```
SELECT table1.id, GROUP_CONCAT(table2.values)
FROM table1 INNER JOIN table2 ON FIND_IN_SET(table2.id, table1.nos)
GROUP BY table1.id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T10:27:21.150

据我所知，没有办法在 SQL 中实现这一点。相反，您应该使用 1 到 N 的关系来表示这些列表。就像是：

表 1：（只是 ids）

*   1
*   2
*   3

表 1.1：（将 id 映射到列表中的值）

*   1、12
*   1、13
*   1, 14
*   2, 14
*   3、14
*   3、12

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T11:36:54.247

不确定这是否适用于 mySQL 但在 SqlServer 中您可以创建一个函数：

```
create function dbo.replaceIdsWithValues
(
    @inIds varchar(50)
)
returns varchar(50)
as
begin
    declare @ret as varchar(50)
    set @ret = @inIds
    select @ret = replace(@ret,cast(id as varchar),theValues) from t2
    return @ret
end 
```

然后简单地调用：

```
select id, nos, dbo.replaceIdsWithValues(nos) from t1 
```

假设你的表结构：

```
create table t1 (id int, nos varchar(50))
create table t2 (id int, theValues varchar(50)) 
```

您可以测试完整的示例

```
create table t1 (id int, nos varchar(50))
create table t2 (id int, theValues varchar(50))
insert into t1(id, nos)
select 1, '12,13,14'
union all select 2, '14'
union all select 3, '14,12'

insert into t2(id, theValues)
select 12, 'PHP'
union all select 13, 'JAVA'
union all select 14, 'C++'

select id, nos, dbo.replaceIdsWithValues(nos) from t1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T11:12:40.997

打算将此作为评论，但它越来越长。

[SoulMerge](https://stackoverflow.com/users/44562/soulmerge) answer(+1) 特定于 MySql，该问题最初是针对该问题的。请参阅初始问题的编辑。

似乎问题再次为 MY-SQL 进行了编辑，但无论如何。

虽然您可以[通过使用 PATINDEX 在 MS SQL](http://www.databasejournal.com/features/mssql/article.php/3071531/Using-SQL-Servers-CHARINDEX-and-PATINDEX.htm)中实现这一点，但我不确定您是否可以在 oracle 中做到这一点。

[我认为按照jo227o-da-silva](https://stackoverflow.com/users/46329/jo227o-da-silva) (+1)的建议重组表格会更好 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T11:17:20.953

虽然与主题（MySQL）不完全相关，但会帮助其他人按标题查找问题，在 MSSQL 服务器中，这可以使用 FOR XML 提示和一些讨厌的字符串替换来实现。

当我找到它时，我会发布一些代码......

# c# - 移除 来自文本文件？

> ID：696677
> 
> 赞同：3
> 
> 时间：2009-03-30T10:19:00.890
> 
> 标签：c#, xml, html

我在 C#.net 中做了一个小程序，它并没有真正起到多大的作用，它根据今天的新闻告诉你你的 DOOM 的机会大声笑。它会从 BBC 网站加载一个 RSS，然后寻找关键词，这些关键词要么增加要么减少 DOOM 的百分比机会。

疯狂的小项目，也许有一天这些课程会派上用场，再次用于更重要的事情。

我收到了 xml 格式的 RSS，但它包含很多 div 标签和格式化字符，我真的不想在关键字数据库中，

删除这些不需要的字符和 div 的最佳方法是什么？

谢谢，

灰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T10:30:15.917

恕我直言，最简单的方法是使用正则表达式。就像是：

```
string txt = Regex.Replace(htmlString, @"<(.|\n)*?>", string.Empty); 
```

当然，根据您要删除的标签和字符，您将修改正则表达式。如果您在网络上搜索['strip html C#'](http://www.google.com/search?hl=en&q=c%23+strip+html&btnG=Search) ，您会发现很多关于此方法和其他方法的材料。

SO question [Render or convert Html to 'formatted' Text (.NET)](https://stackoverflow.com/questions/356597/render-or-convert-html-to-formatted-text-net)也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T10:46:57.390

如果您还想删除带有内容的 DIV 标签：

```
string start = "<div>";
string end = "</div>";
string txt = Regex.Replace(htmlString, Regex.Escape(start) + "(?<data>[^" + Regex.Escape(end) + "]*)" + Regex.Escape(end), string.Empty); 
```

输入：`<xml><div>junk</div>XXX<div>junk2</div></xml>`

输出：`<xml>XXX</xml>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T10:37:47.383

从给定的字符串中去除 HTML 标记是一种常见的要求，您可能会在网上找到许多资源来为您做这件事。

然而，公认的方法是使用基于正则表达式的搜索和替换。[本文](http://dotnetperls.com/Content/Remove-HTML-Tags.aspx)提供了一个很好的示例以及基准测试。值得一提的另一点是，您需要针对所看到的不同类型的不需要的字符进行单独的基于正则表达式的查找。（也许向我们展示您收到的 HTML 示例会有所帮助）

请注意，您的要求可能会因您要删除的标签而异。在您的问题中，您只提到了 DIV 标签。如果这是您需要替换的唯一标签，那么简单的字符串搜索和替换就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T10:41:49.807

像这样的正则表达式：

```
<([A-Z][A-Z0-9]*)\b[^>]*>(.*?)</\1> 
```

将突出显示所有 HTML 标记。

使用它从您的数据中删除它们。

# toolbar - 您如何使所有窗口都可以使用 SAS 工具栏？

> ID：696679
> 
> 赞同：0
> 
> 时间：2009-03-30T10:20:09.437
> 
> 标签：toolbar, sas, dm, display-manager

我正在使用 SAS 9.1 并希望无论哪个窗口处于“焦点”（例如日志、编辑器、输出）中都可以使用我的工具栏。

我的代码如下所示：

```
libname temp678 "\\MyDrive\Team Autoexec";
dm "toolload bar temp678.profile.MycustomToolbar";
libname temp678 clear; 
```

但是，当我运行它时，它只会应用于日志窗口！我在某处读到 SWITCHING 需要关闭，但这似乎是 V6.1 选项，在 Base SAS 窗口环境中找不到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T15:36:18.537

9.1 中有一个 TOOLSWITCH 命令，但我认为这不会满足您的要求。除非有人知道执行您想要的特定选项，否则我建议您在日志和编辑器工具栏上复制您的附加按钮。

# sql-server-2005 - 如何根据条件选择 select 语句的列？

> ID：696681
> 
> 赞同：1
> 
> 时间：2009-03-30T10:22:18.853
> 
> 标签：sql-server-2005

我必须创建一个 SQL Server 2005 查询来检查表中一个属性的值，并根据其值选择不同的列集。我怎样才能做到这一点？

例如

在表'car'中，如果'type'属性的值在type = 1时为1和2，我想执行一个带有3列的select'query1'。当 type = 2 时，我想用 4 个其他列执行另一个 select 'query2'。

我怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T10:33:55.207

我认为您正在查看带有 If 语句的存储过程。CASE 可以工作，但不能更改返回的列数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-30T10:55:32.753

```
SELECT
  Col1 = CASE WHEN Type = 1 THEN (SELECT Null FROM T1)
         ELSE (SELECT Col1 FROM T2) END
  , Col2 = CASE WHEN Type = 1 THEN (SELECT Col1 FROM T1)
           ELSE (SELECT Col2 FROM T2) END
  , Col3 = CASE WHEN Type = 1 THEN (SELECT Col2 FROM T1)
           ELSE (SELECT Col4 FROM T2) END
  , Col4 = CASE WHEN Type = 1 THEN (SELECT Col3 FROM T1)
           ELSE (SELECT Col4 FROM T2) END
FROM Cars 
```

如果您向我们展示所有涉及的表的 DDL，您可能会得到更好的答案或不同的（阅读更好的）方法。

# mysql - MySQL：很多表还是很多数据库？

> ID：696682
> 
> 赞同：68
> 
> 时间：2009-03-30T10:22:44.097
> 
> 标签：mysql, performance

对于一个项目，我们拥有一堆始终具有相同结构且未链接在一起的数据。有两种方法可以保存数据：

*   为每个池创建一个新数据库（大约 15-25 个表）
*   在一个数据库中创建所有表，并按表名区分池。

对于 MySQL，哪一个更容易和更快地处理？

**编辑：**我对数据库设计问题不感兴趣，我只是对这两种可能性中的哪一种更快感兴趣。

**编辑2：**我会尽量让它更清楚。如前所述，我们将拥有数据，其中一些日期很少属于不同的池。将一种类型的所有数据放在一个表中并将其与池 id 链接不是一个好主意：

*   很难备份/删除一个特定的池（我们预计一段时间后我们会用完主键（即使使用 big int））

所以想法是为每个池创建一个数据库，或者在一个数据库中创建很多表。针对数据库的 50% 查询将是简单的`inserts`。49% 将是一些简单`selects`的主键。

问题是，处理什么更快`MySQL`？许多表或许多数据库？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2009-04-08T07:55:03.263

单个数据库中的多个表与单独数据库中的多个表之间应该没有显着的性能差异。

在 MySQL 中，数据库（标准 SQL 对此使用术语“模式”）主要用作表的命名空间。一个数据库只有几个属性，例如默认字符集和排序规则。并且使用`GRANT`可以方便地控制每个数据库的访问权限，但这与性能无关。

您可以通过单个连接访问任何数据库中的表（前提是它们由同一 MySQL 服务器实例管理）。您只需要限定表名：

```
SELECT * FROM database17.accounts_table; 
```

这纯粹是语法上的差异。它应该对性能没有影响。

关于存储，您不能像@Chris 推测的那样将表组织到每个数据库的文件中。使用 MyISAM 存储引擎，每个表总是有一个文件。使用 InnoDB 存储引擎，您要么拥有一组合并所有表的存储文件，要么每个表都有一个文件（这是为整个 MySQL 服务器配置的，而不是为每个数据库配置的）。无论哪种情况，在单个数据库中创建表与在多个数据库中创建表都没有性能优势或劣势。

没有多少 MySQL 配置参数适用于每个数据库。大多数影响服务器性能的参数都在服务器范围内。

关于备份，您可以将表的子集指定为`mysqldump`命令的参数。备份每个数据库的逻辑表集可能更方便，而不必在命令行上命名所有表。但这对性能没有影响，只是在您输入备份命令时为您提供方便。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-03-30T10:25:40.033

为什么不创建一个表来跟踪您的池（使用 PoolID 和 PoolName 作为您的列，以及您想要跟踪的任何其他内容）然后在您的 15-25 个表上添加一个列，这将是将外键返回给您的台球表，以便您知道该特定记录属于哪个池。

如果您不想像那样混合数据，我建议您制作多个数据库。为相同的功能创建多个表让我的蜘蛛感觉刺痛。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-03-30T11:03:51.733

如果您不想要一组具有 TheTXI 建议的 poolID poolname 的表，请使用单独的数据库而不是多个表，它们都做同样的事情。

这样，您可以将访问不同池之间的差异限制为初始“使用数据库”语句，您不必每次都重新编码 SELECT 或使用动态 sql。

这种方法的其他优点是：

*   轻松备份/恢复
*   轻松启动/停止数据库实例。

缺点是：

*   更多的管理工作，但不多。

我不知道您的应用程序是什么，但在创建一个数据库中的所有表之前真的要仔细考虑一下。疯狂的谎言就是这样。

编辑：如果性能是你唯一关心的事情，你需要衡量它。获取一组有代表性的查询并衡量它们的性能。

编辑 2：许多表/许多数据库模型之间的单个查询的性能差异可以忽略不计。如果你有一个数据库，你可以调整它。如果你有很多数据库，你可以把它们全部调出来。

我的（我们的？ - 不能代表其他任何人）的观点是，对于调整良好的数据库，三个选项（表中的 poolid、多个表、多个数据库）之间的性能几乎没有差异，所以您可以选择对您来说最简单的选项，无论是短期还是长期。

对我来说，最好的选择仍然是一个带有 poolId 的数据库，正如 TheTXI 建议的那样，然后是多个数据库，这取决于您（主要是管理）的需要。如果您需要确切了解两个选项之间的性能差异，我们无法为您提供答案。您需要对其进行设置和测试。

使用多个数据库，很容易将硬件投入其中以提高性能。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-06T19:50:23.513

在您描述的情况下，经验使我相信，当您拥有大量池时，您会发现单独的数据库会更快。

不过，这里有一个非常重要的一般原则要遵守：*不要考虑它会有多快，而是对其进行分析。*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-30T11:20:42.007

我不太确定我是否完全理解您的情况。您是否希望所有池都使用相同的表，但只是通过区分键不同？或者您是否希望在一个数据库中使用单独的表池，并在每个表上使用后缀来区分池？

不管怎样，出于两个主要原因，您应该拥有多个数据库。第一个是如果您必须更改一个池上的架构，它不会影响其他池。

第二，如果您的负载增加（或出于任何其他原因），您可能希望将池移动到具有新数据库服务器的单独物理机器上。

此外，可以更严格地锁定对数据库服务器的安全访问。

所有这些事情仍然可以在不需要单独的数据库的情况下完成 - 但分离将使所有这些变得更容易，并降低必须在心理上跟踪要操作哪些表的复杂性。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-05T20:07:01.967

按表名区分池或将它们放在单独的数据库中是相同的事情。但是，如果您在一个数据库中有很多表，MySQL 必须在登录/连接时加载表信息并对所有这些表进行安全检查。

正如其他人所提到的，单独的数据库将允许您转移事物并创建特定于某个池（即压缩表）的优化。这是额外的管理开销，但具有更大的灵活性。

此外，如果需要，您始终可以通过使用联合表或合并表来“合并”位于不同数据库中的表，以简化查询。

至于主键用完，如果您使用 MyISAM 表，您始终可以使用复合主键。例如，如果您有一个名为 groupCode（任何类型）的字段和另一个名为 sequenceId（自动递增）的字段，并将主键创建为 groupCode+sequenceId。sequenceId 将根据组代码集中的下一个唯一 ID 递增。例如：AAA 1 AAA 2 BBB 1 AAA 3 CCC 1 AAA 4 BBB 2 ...

尽管对于大表，您必须小心缓存并确保您使用的文件系统能够处理大文件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-02T01:12:33.660

我不太了解mysql，但我想我必须给出标准的性能答案——“这取决于”。

一些想法（仅处理性能/维护，而不是数据库设计）：

*   创建新数据库意味着文件系统中有一个单独的文件（或多个文件）。如果一个文件的性能需要与其他文件分开，则这些文件可以放在不同的文件系统上，等等。
*   一个新的数据库可能会以不同的方式处理缓存；例如。一个数据库中的所有表将意味着数据库的共享缓存，而将表拆分为单独的数据库意味着每个数据库可以有一个单独的缓存[显然所有数据库将共享相同的物理内存用于缓存，但可能存在限制每个数据库等]。
*   与单独的文件相关，这意味着如果您的一个数据集变得比其他数据集更重要，它可以很容易地被拉到新的服务器上。
*   分离数据库还有一个额外的好处，即允许您比使用单个数据库更轻松地一次部署更新。

然而，相比之下，拥有多个数据库意味着服务器可能会使用更多内存（因为它有多个缓存）。我确信多数据库方法有更多的“缺点”，但我现在画的是空白。

所以我想我会推荐多数据库方法。显然，这只是在理解可能存在更好的“数据库设计”方式来处理您实际执行的任何操作的情况下。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-02T23:40:14.913

鉴于您对其施加的限制，我宁愿在现有数据库中启动更多表，而不必连接到多个数据库。除了管理您可能拥有的不同数据库优化之外，管理连接字符串往往更难。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-03T23:37:42.710

FTR，在正常情况下，我会采用 TheTXI 描述的方法。

不过，在回答您的具体问题时，我发现它取决于使用情况。（警察我知道，但听我说完。）

单个数据库可能更容易。您只需要担心一个连接，并且仍然需要指定表。不过，在某些条件下，多个数据库可能会更快。

如果我是你，我会尝试两者。我们无法为您提供有用的答案。

# ssis - 有没有办法在 SSIS 变量中编写超过 4000 个字符的变量表达式？

> ID：696685
> 
> 赞同：0
> 
> 时间：2009-03-30T10:25:08.350
> 
> 标签：ssis

任何人都可以告诉我是否有任何方法可以在 SSIS 包中的变量中编写一个超过 4000 个字符的表达式，这是允许的最大限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T11:24:25.787

我想说可能有一种更有效的方式来做到这一点，为什么需要这么大的表达方式？减少这种情况的方法包括：

*   将逻辑移动到源数据（例如存储过程）
*   条件拆分数据并使用集合，每个集合都有自己的表达式逻辑

你能提供更多关于这个的细节吗？

# c# - 在模态对话框之外捕获鼠标点击

> ID：696691
> 
> 赞同：0
> 
> 时间：2009-03-30T10:27:27.000
> 
> 标签：c#, winforms, compact-framework, modal-dialog

我有一个用 C# 编写的面向 .NET Compact Framework 3.5 的应用程序，在 Windows CE 上运行。如果用户尝试与其所有者窗口进行交互而不先关闭对话框，我想在模态对话框中提供自定义视觉提示。

模态对话框是否可以在其所有者窗口上接收鼠标点击通知？所有者窗口以全屏模式运行，因此通常捕获模式对话框之外的点击就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-05T21:12:34.227

这就是模态的工作原理。当对话框以模态方式显示（CE 或桌面 Windows）时，该窗口将获得它自己的内部消息泵。这意味着当您在窗口外收到一条消息（如鼠标按下）时，泵会丢弃它。泵无法将消息“向上”发送到另一个泵（当然，如果您自己对两个泵都进行了处理 - 可能是的，但复杂、复杂，而且根本不可扩展或可维护）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T10:31:37.880

您可能可以使用[Control.Capture](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.capture.aspx)属性。

# web-services - 如何从 VBA-Word 中的 Web 服务中获取数据？

> ID：696697
> 
> 赞同：1
> 
> 时间：2009-03-30T10:31:02.000
> 
> 标签：web-services, vba, ms-word

如何从 VBA-Word 中的 Web 服务中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T10:35:59.837

这是一小段代码，应该会有所帮助：

[http://developerresources.wordpress.com/2008/06/13/vbvba-call-webservice/](http://developerresources.wordpress.com/2008/06/13/vbvba-call-webservice/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-09T14:35:31.430

添加对 Soap Client COM 库的引用并使用 Web 服务很容易，因此我宁愿采用以下方法： [http ://esamsalah.blogspot.com/2005/11/consume-web-service-使用-vb6-long.html](http://esamsalah.blogspot.com/2005/11/consume-web-service-using-vb6-long.html)

# security - 用于密码散列的散列算法会影响彩虹表的生成吗？

> ID：696702
> 
> 赞同：0
> 
> 时间：2009-03-30T10:33:05.037
> 
> 标签：security, hash, passwords, md5, rainbowtable

re [question non-random-salt-for-password-hashes](https://stackoverflow.com/questions/536584/non-random-salt-for-password-hashes) Potato Head 先生指出，使用 md5 而不是 SHA-512 可以更轻松地生成彩虹表？我原以为一旦生成彩虹表，使用的算法就无关紧要了？这对您如何使用彩虹表检查已知哈希没有影响？有没有办法知道以任何方式使用了什么散列算法？

编辑更新：

我认为需要对您的密码表进行适当的哈希处理，这不是为了保护您的应用程序，而是为了保护用户将重复使用密码和 ID 的其他所有人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T10:36:47.510

[他说过](https://stackoverflow.com/questions/536584/non-random-salt-for-password-hashes/536620#536620)

> 对于生成彩虹表的人来说，使用 SHA-512 比使用 MD5 更痛苦，

计算 SHA-512 哈希比计算 MD5 哈希更昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T10:50:02.737

它纯粹是一个性能问题。MD5 比 SHA-512 更简单，因此您可以在给定时间范围内生成更多彩虹表条目或更多暴力攻击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T11:11:09.563

[彩虹表就够了：您需要了解的有关安全密码方案](http://chargen.matasano.com/chargen/2007/9/7/enough-with-the-rainbow-tables-what-you-need-to-know-about-s.html)的内容简要介绍了这一点。它以关于人们误解彩虹表和它们所呈现的实际危险程度的小型咆哮开始，但随后变成了对密码哈希算法性能影响的很好的讨论。

关于你的最后一个问题，更直接的答案是，通过单独检查输出，你只能确定最终散列算法输出中的位数。根据算法的不同，这可能是唯一的，也可能不是唯一的，但是，如果算法很好，就不会有任何可检测的模式来准确识别它。（我说“最终”是因为 MD5-only 的输出看起来与 SHA512-then-MD5 的最终结果相同，因为最后一步在两种情况下都是相同的。）

但更实际的是，任何可以窃取您的密码数据库的人也可能会窃取您的源代码，因此他们只需查看您的源代码以了解您的算法是什么，然后复制它以攻击您的数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T11:26:08.833

实际上，生成表格的时间是无关紧要的，因为您只执行一次。

破解的时间更为重要。彩虹表只是减少恢复密码所需的哈希运算次数的一种方法，但您仍然需要在破解密码时应用哈希函数。例如，彩虹表可以将散列操作的数量减少 10,000 倍。如果你有一个较慢的哈希（例如 SHA-512），破解会比较慢。

请注意，一个好的密码哈希函数不仅包括盐，它还应用了数千次哈希函数。对于所有实际目的，散列仍然会很快，但破解（通过任何方法）会慢数千倍。

# ruby-on-rails - 如何在 ruby -rails 中自动删除临时文件？

> ID：696704
> 
> 赞同：5
> 
> 时间：2009-03-30T10:33:13.697
> 
> 标签：ruby-on-rails, ruby, temporary-files

我的 Rails 应用程序必须处理和生成 PDF XFA 文件并发送给用户/浏览器。它工作正常。但问题是在将文件发送给用户之前，它会在 rails tmp 目录中创建 2 个文件。

如果 pdf_controller 有 10 个请求，则 tmp 目录中的临时文件数量会增加一倍，并且会占用空间。

在四处寻找之后，我认为清扫车会来救援。但对Sweeper了解不多。

那么，有人可以建议走哪条路吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T15:01:32.817

Tempfile 将在对象完成时删除文件。

[Rdoc 上的临时文件](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)

例子：

```
def get_pdf
  model = Model.find(params[:id])
  file = Tempfile.new
  model.to_pdf(file)
  send_file file.path, ...
end 
```

如果您将代码粘贴到您的问题中，我可以提供一个更好的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T11:45:57.810

您可以使用 cron 任务，每 n 分钟删除一次文件，或者，您可以从控制器本身命令删除。

# c# - Form中Load事件、Activate事件和Enter事件的区别

> ID：696708
> 
> 赞同：8
> 
> 时间：2009-03-30T10:34:10.307
> 
> 标签：c#, vb.net, winforms

我正在为 Windows 应用程序使用 VB.NET。表单中的Load事件，Activate事件和Enter事件有什么区别以及上述事件的执行顺序。请任何人帮助我。

西瓦库玛

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-30T10:41:00.620

有关信息，请参阅[Windows 窗体事件生命周期](http://www.c-sharpcorner.com/UploadFile/mamta_m/WindowsFormsLifecycle11182008235227PM/WindowsFormsLifecycle.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T10:46:20.293

Enter 事件在 Form 中被抑制。它的等效项是已激活。Loaded 在创建期间发生一次。每当表单变为活动状态（例如，由用户选择、打开等）时，就会发生激活。加载在激活之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-19T06:00:59.397

Load：此事件发生在第一次显示表单之前。

已激活：此事件在表单以代码或用户激活时发生。

# mysql - 重新生成大量 MySQL 表的最佳方法

> ID：696713
> 
> 赞同：0
> 
> 时间：2009-03-30T10:36:55.777
> 
> 标签：mysql

我正在开发一个需要每天重建几个非常大的 MyISAM 表的应用程序（主要是搜索使用最新行业和站点数据重建的表）。用于重建这些表的查询非常繁重，不适合针对主生产数据库运行。

我们有一个单独的服务器专门用于生成这些表，并且我们使用主从复制在我们用作重建查询的一部分的处理服务器上保持生产数据库的最新副本。我的问题是，一旦构建了这些表，将它们转移到生产数据库中的最佳方法是什么（有效地删除旧表并用新表替换它）？

我们之前刚刚在服务器之间移动二进制数据和索引文件并复制到位。但是，这与复制效果不佳。

这项任务还有哪些其他方法？生产数据库和加工数据库之间的主-主复制有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T10:43:48.600

在单独的表中构建新表怎么样，例如“newfoo”，让它花费你需要生成它的时间，当你准备好交换它时，只需[重命名](http://dev.mysql.com/doc/refman/5.0/en/rename-table.html)它

```
drop table if exists oldfoo;
rename table foo to oldfoo, newfoo to foo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T11:00:11.667

很久以前我遇到过同样的问题，这就是我所做的：使用两张表，一张用于偶数天，另一张用于奇数天。

因此，通过代码或存储过程，您可以通过将一年中的天数除以二来选择插入该日期的位置并检查结果。

奇怪的日子你处理偶数表，反之亦然。

这是我们用来选择表格的代码

```
<?php
$day_of_year = (int) date('z');
$table_sufix = $day_of_year % 2 ? "even" : "odd";
$insert_on = "table_" . $table_sufix;

?> 
```

和过程

```
<?php
$day_of_year = (int) date('z');
$table_sufix = $day_of_year % 2 ? "odd" : "even"; // note only this little change
$process_table = "table_" . $table_sufix;

?> 
```

# ruby-on-rails - 类缓存如何在 Rails 2.2+ 中工作

> ID：696724
> 
> 赞同：2
> 
> 时间：2009-03-30T10:43:07.540
> 
> 标签：ruby-on-rails, activerecord

我有一个使用手动编码验证器修补 ActiveRecord 的 rails 应用程序。

通过在 config/environment.rb 中添加以下行来制作补丁

```
Rails::Initializer.run do |config|  
...    
end  

class ActiveRecord::Base  
  include MtLib::DBValidations  
end 
```

这在生产模式下工作正常，即

```
config.cache_classes = true 
```

但是它在 cache_classes 设置为 false 的开发中不起作用。

抛出的错误是

```
    ArgumentError（MtLib::DBValidations 的副本已从  
      模块树，但仍处于活动状态！）：

```

我的问题是当 cache_class 设置为 false 时遵循的过程是什么。Rails 会重新运行任何初始化方法吗？如果不是，那么我将补丁放在哪里以确保它在所有模型中并且在类重新加载后仍然存在？

我已经尝试将补丁添加到 config/initializers/active_record_patch，但是当类重新加载时，这不会重新运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T18:18:08.353

Ruby On Rails google 组的 Frederick Cheung 提供的解决方案将包含已加载类的目录添加到 load_once_path 数组中。

我编辑 environment.rb 看起来像这样

```
 config.load_paths +=  
   %W( #{RAILS_ROOT}/lib/soap_clients/carefone #{RAILS_ROOT}/lib/mt_lib)  

  # Make sure load_once_paths is a subset of load_paths  
  config.load_once_paths +=  %W( #{RAILS_ROOT}/lib/mt_lib) 
```

现在这可以在开发模式下工作，而无需在每次请求时重新加载服务器

# c# - 代表的组成（功能陷阱）

> ID：696729
> 
> 赞同：4
> 
> 时间：2009-03-30T10:46:46.270
> 
> 标签：c#, functional-programming, delegates

当尝试在 C# 中使用委托以功能方式解决问题时，我遇到了一个我想分享的陷阱。我想听听你的建议。

**背景**

我想从对象列表中填充一个网格，其中单列的值是使用委托获取的（从[Philip Pipers ObjectListView control](http://objectlistview.sourceforge.net/cs/index.html)借来的想法）。

此外，我想自动插入包含两个值之间（数字）差异的列。

因此，我的对象具有属性`FirstValue`，`SecondValue`并且`ThirdValue`我想要具有`FirstValue`, `(SecondValue-FirstValue)`, `SecondValue`, `(ThirdValue-SecondValue)`,的列`ThirdValue`。

我已经调整了现有的网格控件以在对象列表上使用委托，这部分工作正常。

**第一次尝试**

首先，我尝试了类似的方法：

```
class MyGridClass : DelegateGrid
{
  DelegateGrid.ValueGetter lastGetter;

  public MyGridClass() {
    AddMyColumn(delegate(MyObj obj) { return obj.FirstValue; });
    AddMyColumn(delegate(MyObj obj) { return obj.SecondValue; });
    AddMyColumn(delegate(MyObj obj) { return obj.ThirdValue; });
  }

  private void AddMyColumn(DelegateGrid.ValueGetter getter) {
    if (lastGetter != null)
      base.AddColumn(new DelegateColumn(delegate(MyObj obj) { 
        return getter(obj)-lastGetter(obj); 
      }));
    base.AddColumn(new DelegateColumn(getter));
  }
}; 
```

**问题**

在函数式语言中，以这种方式计算差异可以正常工作，因为新委托（在内部构造`AddMyColumn`）将使用构造时的*值*。`lastGetter`但在 C# 中，新委托使用对 的*引用*，`lastGetter`因此在执行时，它使用执行时的实际值。因此，差异将始终建立在最后一列（即`obj.ThirdValue`）上。

**解决方案**

我为自己找到的一种解决方案是

```
public AddMyColumn(DelegateGrid.ValueGetter getter) {
  if (lastGetter != null) {
    DelegateGrid.ValueGetter newLastGetter = 
      new DelegateGrid.ValueGetter(lastGetter);
    base.AddColumn(new DelegateColumn(delegate(MyObj obj) { 
     return getter(obj)-newLastGetter(obj); 
    }));
  }
  // ...
} 
```

注意

```
if (lastGetter != null) {
  DelegateGrid.ValueGetter newLastGetter = 
    delegate(MyObject obj){return lastGetter(obj); }; 
```

不会解决问题的。

**问题**

已经找到解决方案，这部分有点形式，但是

*   有没有人有更好的解决方案的建议
*   我正在使用 C#2.0，并且对 C#3.0 中的 lambda 表达式只有理论知识：它们是否允许更清洁的解决方案（因此值得他们的名字......）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-30T10:50:40.597

问题只是被捕获的*变量*而不是值。这是一个几乎相同但稍微简单的解决方案：

```
public AddMyColumn(DelegateGrid.ValueGetter getter) {
  if (lastGetter != null) {
    DelegateGrid.ValueGetter newLastGetter = lastGetter;
    base.AddColumn(new DelegateColumn(delegate(MyObj obj) { 
     return getter(obj)-newLastGetter(obj); 
    }));
  }
  // ...
} 
```

基本上没有必要创建一个新的委托实例——委托是不可变的，所以你可以通过赋值复制值。

就被捕获的值而言，这实际上并不是一个特定于委托的问题——它是匿名方法和一般 lambda 表达式的常见问题。典型的例子是；

```
List<Action> actions = new List<Action>();
for (int i=0; i < 10; i++)
{
    actions.Add(() => Console.WriteLine(i));
}
foreach (Action action in actions)
{
    action();
} 
```

这将打印“10”10 次。要打印 0-9，您再次需要更改捕获变量的范围：

```
List<Action> actions = new List<Action>();
for (int i=0; i < 10; i++)
{
    int copy = i;
    actions.Add(() => Console.WriteLine(copy));
}
foreach (Action action in actions)
{
    action();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T10:54:03.223

为了回答您的其他观点，lambda 语法将使它变得更好，因为它们会减少冗长的代码。

```
delegate(MyObj obj) { 
    return getter(obj)-newLastGetter(obj); 
} 
```

变成：

```
obj => getter(obj)-newLastGetter(obj) 
```

# jquery - 看看父母是否是复选框

> ID：696736
> 
> 赞同：1
> 
> 时间：2009-03-30T10:50:27.133
> 
> 标签：jquery, css-selectors

如何检查“this”是否为复选框？

这是查看是否为选择框的方法

```
if($(this).parent().is('select'))   { 
```

现在我可以看到它是否是一个复选框？所以我尝试了这个：

```
 }else if($(this).is(:Checkbox)){\n 
```

但它给了我一个语法错误。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T10:53:50.963

你有没有尝试过：

```
if($(this).is(':checkbox')) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T11:02:30.863

复选框：

```
if ($(this).is(":checkbox")) ... 
```

检查：

```
if ($(this).is(":checkbox:checked")) ... 
```

请[参阅 jQuery 选择器](http://docs.jquery.com/Selectors)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-16T13:11:03.120

如果你想要一些简单的代码，那么你可以这样检查..

var id = jQuery(this).attr('type'); id 将为您提供类似复选框的类型，选择

我试过那个对我来说很好用..

警报（ID）；

# caching - 如何防止在嵌入式 Jetty 实例中缓存静态文件？

> ID：696738
> 
> 赞同：5
> 
> 时间：2009-03-30T10:50:45.620
> 
> 标签：caching, jetty, embedded-jetty

我想防止我的 CSS 被缓存在浏览器端。如何在嵌入式 Jetty 实例中执行此操作？

如果我使用的是 xml 配置文件，我会添加如下行：

```
<init-param>
  <param-name>cacheControl</param-name>
  <param-value>max-age=0,public</param-value>
</init-param> 
```

我怎样才能把它变成代码？

现在我以这种方式启动 Jetty：

```
BasicConfigurator.configure();

Server server = new Server();
SocketConnector connector = new SocketConnector();
// Set some timeout options to make debugging easier.
// 1 hour
connector.setMaxIdleTime( 1000 * 60 * 60 );
connector.setSoLingerTime( -1 );
connector.setPort( 8081 );
server.setConnectors( new Connector[] { connector } );

WebAppContext bb = new WebAppContext();
bb.setServer( server );
bb.setContextPath( "/" );
bb.setWar( "src/webapp" );

server.addHandler( bb ); 
```

我想我应该在 WebAppContext 责任区域的某个地方搜索 setControlCache。

对此有何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T11:07:34.160

我通常使用 ServletHolder，如下所示：

```
WebAppContext context = new WebAppContext();
ServletHolder servletHolder = new ServletHolder(MyServlet.class);
servletHolder.setInitParameter("cacheControl","max-age=0,public"); 
context.addServlet(servletHolder, "myservletpath"); 
```

虽然这与您的代码不*完全*匹配，但您应该能够从那里弄清楚吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-19T17:18:21.877

呃，如何做相反的事情[如何为Jetty的web.xml中的静态资源配置缓存？](https://stackoverflow.com/questions/1906745/how-to-configure-cache-for-static-resources-in-web-xml-for-jetty)?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-28T20:41:16.077

这只是一个工作代码，无需弄清楚、猜测和尝试。它是针对有问题的代码和 jetty 6 提供的。对于 jetty 7 及更高版本，需要将 Context 更改为 ServletContextHandler。

```
BasicConfigurator.configure();

Server server = new Server();
SocketConnector connector = new SocketConnector();
// Set some timeout options to make debugging easier.
// 1 hour
connector.setMaxIdleTime( 1000 * 60 * 60 );
connector.setSoLingerTime( -1 );
connector.setPort( 8081 );
server.setConnectors( new Connector[] { connector } );

//--- The difference with code in question starts here

DefaultServlet defaultServlet = new DefaultServlet();
ServletHolder holder = new ServletHolder(defaultServlet);
holder.setInitParameter("useFileMappedBuffer", "false");
holder.setInitParameter("cacheControl", "max-age=0, public");

Context bb = new Context();
bb.setResourceBase("src/webapp");
bb.addServlet(holder, "/");

//--- Done. Caching is off!

server.addHandler( bb );
// Run server as usual with server.run(); 
```

我的示例还将 useFileMappedBuffer 设置为 false，如果您出于任何原因在 Windows 上进行开发，这对于不阻止磁盘上的文件是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-04T06:03:53.977

我将 resourceHandler 用于静态内容。这是在 Jetty 9 上运行良好的代码。

```
 ResourceHandler rh = new ResourceHandler();
    rh.setResourceBase([your_resource_base_dir]);
    rh.setCacheControl("no-store,no-cache,must-revalidate"); 
```

# windows - 使用 Base SAS 验证 Windows 密码

> ID：696741
> 
> 赞同：0
> 
> 时间：2009-03-30T10:52:34.087
> 
> 标签：windows, passwords, sas, validation

我们有一个登录脚本，它需要 Windows 密码才能访问和验证 SAS 元数据服务器。

问题是，如果更改了 Windows 密码，并且脚本运行了几次而没有更新，那么用户就会被锁定，并且必须致电 IT 支持部门来重置密码。

使用 Base SAS (9.1.3) 验证 Windows 密码的最简单方法是什么？即如果提供的密码无效，则向用户发出警告...

编辑：

问题不在于是否应该这样做，而在于如何做到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-31T15:54:25.193

听起来解决方案与 Windows 密码和您的 IT 组有关。大多数具有像您描述的计划作业的项目在具有有限权限和静态密码的特定用户下运行。

我相信您的解决方案属于 IT 部门，而不是复杂的 SAS 登录脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T16:20:09.580

您使用的是 SAS 9.2 吗？如果是这样，您是否可以使用不需要底层主机操作系统帐户并且可以配置自定义到期规则的内部帐户？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-19T00:42:49.283

好的，您可以使用标志很容易地检查这一点。如果标志为“on”，则 SAS 将不会运行该脚本。如果标志为“关闭”，SAS 将继续运行脚本。这将停止重置密码的问题。至于您选择如何与用户交流，这取决于您。

伪代码中的 EG sas 脚本：

```
if flag_is_on then do;
  communicate message password is invalid; ** THIS IS OPTIONAL.  YOU COULD JUST KEEP THE NOTIFICATION BELOW AND REMOVE THIS ONE. OTHERWISE YOU WILL RECEIVE MULTIPLE NOTIFICATIONS;
  endsas; ** QUITS SAS. NOTHING ELSE IS RUN;
end;
else do;
  flag_is_on = 1;
  run the rest of your program including login attempt;

  if program_ran_successfully then do; ** POSSIBLY USE SYSERR AND SYSMSG TO DETERMINE THIS?;
    flag_is_on = 0;  ** TURN FLAG OFF AGAIN;
  end;
  else do;
    communicate message password is invalid;
    ** NOTE THAT WE LEAVE THE FLAG TURNED ON HERE SO THAT NEXT TIME THE PROGRAM IS LAUNCHED THE FLAG WILL STILL BE ON AND THE PROGRAM WILL NOT RUN.;
  end; 
end; 
```

干杯抢

# php - UDP同时写入套接字和从套接字读取（再次修改）

> ID：696742
> 
> 赞同：0
> 
> 时间：2009-03-30T10:53:21.433
> 
> 标签：php, sockets, udp

服务器：

```
<?php
error_reporting(E_ALL | E_STRICT);

$socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);

socket_bind($socket, '192.168.1.7', 11104);

$from = "";
$port = 0;
socket_recvfrom($socket, $buf, 12, 0, $from, $port);
//$buf=socket_read($socket, 2048);

echo "Received $buf from remote address $from and remote port $port" . PHP_EOL;
$msg="Sikerult";

//socket_write($socket, $msg, strlen($msg));
socket_sendto($socket, $msg, strlen($msg), 0, '192.168.1.6', 11105);
//socket_close($socket);
?> 
```

客户：

```
<?php
$sock = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
$result = socket_connect($sock, '192.168.1.6', 11105);
$msg = "Sikerult";
$len = strlen($msg);
//socket_write($sock, $msg, strlen($msg));
socket_sendto($sock, $msg, $len, 0, '192.168.1.7', 11104);
//$buf=socket_read($sock, 2048);
socket_recvfrom($sock, $buf, 12, 0, $from, $port);
echo $buf;
socket_close($sock);
?> 
```

服务器从客户端接收数据，但客户端没有从服务器得到任何数据，并且没有停止运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-09-03T14:42:53.837

如果它是 UDP 套接字，那么为什么需要首先连接。这还不够吗？

```
<?php
    $sock = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);

    $msg = "Sikerult";
    $len = strlen($msg);

    socket_sendto($sock, $msg, $len, 0, '192.168.1.7', 11104);

    socket_recvfrom($sock, $buf, 12, 0, '192.168.1.7', 11104);
    echo $buf;

    socket_close($sock);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T15:10:37.210

我假设那`192.168.1.7:11104`是你的服务器。

在服务器中，您需要将数据包发送回您收到它的位置：

```
//...
$msg="Sikerult";
//...
socket_sendto($socket, $msg, strlen($msg), 0, $from, $port); 
```

在客户端中，您连接到自身。您应该将其连接到服务器：

```
$srvIP = '192.168.1.7';
$srvPort = 11104;
$result = socket_connect($sock, $srvIP, $srvPort);
$msg = "Sikerult";
$len = strlen($msg);
socket_send($sock, $msg, $len, 0);
socket_recv($sock, $buf, 12, 0); 
```

# c++ - C++ Builder [C++ 错误] sysmac.h(58)：E2040 声明错误终止

> ID：696749
> 
> 赞同：0
> 
> 时间：2009-03-30T10:56:31.847
> 
> 标签：c++, delphi, c++builder, vcl

我想创建一个不使用 VCL 的 C++ Builder DLL 项目。但我在 sysmac 中收到此错误。有谁知道这个错误的可能原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T11:59:20.337

猜测（因为我使用 C++ Builder 已经有 5 年了）这是因为 sysmac.h 需要 VCL，来自这个[VCL 概述](http://www.informit.com/articles/article.aspx?p=31668&seqNum=2)

> __declspec 关键字是为 VCL 的语言支持提供的，以克服前面提到的项目。sysmac.h 文件提供了在需要使用此关键字时应使用的宏。接下来讨论 __declspec 变体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T13:18:29.120

E2040 声明错误终止 (C++)

声明有一个额外的或不正确的终止符号，例如放在函数体之后的分号。

在标题和左大括号之间用分号声明的类中声明的 C++ 成员函数也会生成此错误。

[http://docwiki.embarcadero.com/RADStudio/XE3/en/E2040_Declaration_terminated_incorrectly_%28C%2B%2B%29](http://docwiki.embarcadero.com/RADStudio/XE3/en/E2040_Declaration_terminated_incorrectly_%28C%2B%2B%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T15:59:08.167

这意味着您在项目中的某处包含 VCL 标头 - 很可能在编译为 C 单元的文件中（因此出现语法错误）。

您可以在项目选项中打开“扩展错误信息”以追踪责任模块。

# asp.net - AJAX+ASP.NET

> ID：696751
> 
> 赞同：0
> 
> 时间：2009-03-30T10:57:31.687
> 
> 标签：asp.net, ajax, asp.net-ajax

据我所知......AJAX用于部分页面刷新（克服网页中的闪烁效果）......AJAX还有其他功能......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T11:01:35.483

您的问题有点令人困惑，但您可以使用 ASP.NET 执行 Ajax。您可以使用 ASP.NET 中的 UpdatePanel 使用 Ajax 进行部分页面刷新。您可能还想查看 jQuery 以获得更简单、更轻量级的 Ajax 解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T11:04:23.293

技术上是的。通过消除完整的页面刷新，Ajax 用于“部分页面”刷新。有2个主要优点

1.  数据传输：与整个页面刷新相比，数据传输（往返于服务器）较少
2.  更好的用户体验：由于用户不会看到一个空白页面，它给用户一种与网站交互的错觉。

使用 AJAX 可以完成的事情是一个永无止境的列表。

例如：Gmail 使用 AJAX 处理电子邮件。如果您使用 gmail 并将其与其他电子邮件提供商进行比较，您就会知道其中的区别。

Facebook 在其站点中具有丰富的 AJAX 功能。

SO 使用 AJAX 进行评论

我认为 AJAX 不能做什么会更容易提及。例如

AFAIK 网络浏览器无法维护启用 AJAX 的网站的视图状态。

某些启用 AJAX 的网站无法在移动浏览器中正确呈现。

还有什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T11:06:42.743

我觉得你大错特错了。如果创建 AJAX 只是为了解决部分页面刷新/页面闪烁的问题，那么它就不会像现在这样彻底改变 Web。

AJAX 提供的最大优势是客户端到服务器的通信，它基于客户端上的某些操作而启动。这立即使我们能够使网络更具响应性和用户友好性，而无需用户等待页面重新加载和回发。

我建议你花一些时间研究这个主题。阅读有关 AJAX的[Wiki 文章。](http://en.wikipedia.org/wiki/Ajax_(programming))

就 ASP.NET 而言，AJAX 很好地集成到其中。成熟的 AJAX 框架（例如[ASP.NET AJAX](http://www.asp.net/ajax/)和[Anthem.NET）](http://anthem-dot-net.sourceforge.net/)混淆了`XmlHttpRequest`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T11:13:17.843

Ajax 让我可以使用免费的 Ajax 工具包为我的 Web 应用程序添加一些很棒的新功能。见链接

[阿贾克斯示例](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/Default.aspx)

它们并非没有问题，但是一旦您学会了如何使用它们，它们就可以真正增加您网站的用户体验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-09-08T09:47:55.360

如您所知，ASP.NET 使用 UpdatePanel 使用 AJAX 进行部分页面刷新。

一个鲜为人知的特性是 .NET 称为 Web 方法的东西。这实际上是未连接到页面的 GUI 部分的 AJAX 调用。您可以将（服务器端）方法声明为 WebMethod，在客户端，您可以使用 JavaScript 调用它。

# 例子：

此示例说明如何获取会话变量的值。请注意，该方法必须是 Shared - 这意味着它不知道页面对象上的任何成员值。

对于所有 ASP.NET AJAX 功能，您需要在页面上有一个 ScriptManager 元素。要启用页面方法，您还需要`EnablePageMethods="true"`像这样添加到 ScriptManager：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true" /> 
```

### 服务器端代码（VB）：

```
<Services.WebMethod()> Public Shared Function GetPreviewImages() As String
  Dim lPreviewImages As String = HttpContext.Current.Session("mPreviewImages")
  If lPreviewImages IsNot Nothing Then
    Return lPreviewImages
  Else
    Return ""
  End If
End Function 
```

### 客户端代码：

```
//Declare the return methods:
function GetPreviewImages_Success(result, userContext, methodName) {
    alert(result);
}
function GetPreviewImages_Failed(error, userContext, methodName) {
    var errorMessage = 'Error in map server method ' + methodName ;
    if(error !== null) errorMessage += '\n' + error.get_message();
    alert(errorMessage);
}

// Call the page method:
PageMethods.GetPreviewImages(GetPreviewImages_Success, GetPreviewImages_Failed); 
```

另请参阅[C# 中的示例](http://blogs.msdn.com/b/mattgi/archive/2006/11/15/accessing-session-data-from-javascript.aspx)，其中还包括参数在 Web 方法中的工作方式。

# c# - InfoPath 重复表验证

> ID：696755
> 
> 赞同：1
> 
> 时间：2009-03-30T10:59:12.870
> 
> 标签：c#, infopath

我在 InfoPath 表单中有几个重复表。基本上每个都列出了一堆字符串，旁边有复选框。当用户单击提交时，我想确保每个重复表至少有一个复选框已被勾选。

我正在为表编写一个验证事件处理程序，它将一个验证变量设置为真或假，但我意识到主数据源在验证和更改事件时是只读的。

在提交表单之前，我将如何检查重复表中是否已勾选某些内容？

[注意] 我使用重复表而不是多选控件，因为表单必须与浏览器兼容。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-17T01:16:54.273

我认为您有两个选择（这些只是我的想法/实际上并没有构建类似的表单解决方案）。

1) 构建一个 XPath 表达式，该表达式将评估您的复选框是否已被选中。比向您的表单添加一个隐藏节点（一个未绑定到 w 视图中的控件的节点），并将此验证属性添加到它。

2）继续编写您的事件处理程序，在代码中运行您的自定义验证逻辑后取消提交事件。

[http://msdn.microsoft.com/en-us/library/microsoft.office.infopath.formevents.submit(VS.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.infopath.formevents.submit(VS.80).aspx)

# model-view-controller - 从 global.asax 访问 RequestContext

> ID：696756
> 
> 赞同：11
> 
> 时间：2009-03-30T10:59:57.877
> 
> 标签：model-view-controller

有谁知道如何从 global.asax 中的 Application_Error 事件中获取当前的 RequestContext ？我的问题是我需要进行重定向，因此需要使用 UrlHelper 生成 url - 它采用上述 RequestContext。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-12-18T00:08:39.773

虽然没有直接访问 RequestContext 的方法，但您可以自己创建一个：

```
RequestContext context = new RequestContext(new HttpContextWrapper(HttpContext.Current), RouteTable.Routes.GetRouteData(new HttpContextWrapper(HttpContext.Current))) 
```

所以 UrlHelper 可以通过以下方式构造：

```
UrlHelper helper = new UrlHelper(new RequestContext(new HttpContextWrapper(HttpContext.Current), RouteTable.Routes.GetRouteData(new HttpContextWrapper(HttpContext.Current)))); 
```

不漂亮，但它完成了工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T12:07:09.400

您可以使用访问请求上下文

```
HttpContext.Current.Request.RequestContext 
```

或者，如果你在`Global.asax`你可以使用

```
Context.Request.RequestContext 
```

直接地。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-08-11T16:00:11.660

从当前 HttpContext 创建一个 HttpContextBase，然后您可以从中生成一个 UrlHelper：

```
// Create Http Context Base from current Context
var contextBase = new System.Web.HttpContextWrapper(System.Web.HttpContext.Current);
// Get its request context
System.Web.Routing.RequestContext requestContext = contextBase.Request.RequestContext;
// Build url helper from request context
var urlHelper = new System.Web.Mvc.UrlHelper(requestContext); 
```

# c# - 为什么在C#中添加多个双精度时顺序会影响舍入

> ID：696769
> 
> 赞同：7
> 
> 时间：2009-03-30T11:05:47.097
> 
> 标签：c#, .net, compiler-construction, rounding, precision

考虑以下 C# 代码：

```
double result1 = 1.0 + 1.1 + 1.2;
double result2 = 1.2 + 1.0 + 1.1;

if (result1 == result2)
{
    ...
} 
```

result1 应该总是等于 result2 对吧？问题是，它没有。结果 1 为 3.3，结果 2 为 3.3000000000000003。唯一的区别是常量的顺序。

我知道双打的实现方式可能会出现舍入问题。我知道如果我需要绝对精度，我可以使用小数。或者我可以在 if 语句中使用 Math.Round() 。我只是一个想了解 C# 编译器在做什么的书呆子。谁能告诉我？

**编辑：**

感谢迄今为止建议阅读浮点运算和/或谈论 CPU 如何处理双精度数的固有不准确性的所有人。但我觉得我的问题的主旨仍未得到解答。这是我没有正确措辞的错。让我这样说：

分解上面的代码，我预计会发生以下操作：

```
double r1 = 1.1 + 1.2;
double r2 = 1.0 + r1
double r3 = 1.0 + 1.1
double r4 = 1.2 + r3 
```

让我们假设上述每个添加都有一个舍入误差（编号为 e1..e4）。所以 r1 包含舍入误差 e1，r2 包含舍入误差 e1 + e2，r3 包含 e3，r4 包含 e3 + e4。

现在，我不知道舍入误差是如何发生的，但我希望 e1+e2 等于 e3+e4。显然不是，但这对我来说似乎是错误的。另一件事是，当我运行上面的代码时，我没有得到任何舍入错误。这就是让我认为是 C# 编译器在做一些奇怪的事情而不是 CPU 的原因。

我知道我问了很多，也许任何人都能给出的最佳答案是去攻读 CPU 设计的博士学位，但我只是想我会问。

**编辑 2**

从我的原始代码示例中查看 IL，很明显是编译器而不是 CPU 执行此操作：

```
.method private hidebysig static void Main(string[] args) cil managed
{
.entrypoint
    .maxstack 1
    .locals init (
        [0] float64 result1,
        [1] float64 result2)
    L_0000: nop 
    L_0001: ldc.r8 3.3
    L_000a: stloc.0 
    L_000b: ldc.r8 3.3000000000000003
    L_0014: stloc.1 
    L_0015: ret 
} 
```

编译器正在为我添加数字！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-30T13:31:45.093

> 我本来希望 e1+e2 等于 e3+e4。

这并不完全不同于预期

```
 floor( 5/3 ) + floor( 2/3 + 1 ) 
```

等于

```
 floor( 5/3 + 2/3 ) + floor( 1 ) 
```

除非你在发言之前乘以 2^53。

对您的值使用 12 位精度浮点和截断：

```
1.0 = 1.00000000000
1.1 = 1.00011001100
1.2 = 1.00110011001

1.0 + 1.1 = 10.00011001100 // 在求和期间扩展
r1 = 1.0 + 1.1 = 10.0001100110 // 截断为 12 位
r1 + 1.2 = 11.01001100101 // 在求和期间扩展
r2 = r1 + 1.2 = 11.0100110010 // 截断为 12 位

1.1 + 1.2 = 10.01001100110 // 在求和期间扩展
r3 = 1.1 + 1.2 = 10.0100110011 // 截断为 12 位
r3 + 1.0 = 11.01001100110 // 在求和期间扩展
r4 = r3 + 1.0 = 11.0100110011 // 截断为 12 位

```

因此更改操作/截断的顺序会导致错误发生变化，并且 r4 != r2。如果在这个系统中加上 1.1 和 1.2，最后一位携带，所以在截断时不会丢失。如果将 1.0 添加到 1.1，则 1.1 的最后一位丢失，因此结果不一样。

在一个排序中，舍入（通过截断）删除了尾随`1`.

在另一种排序中，四舍五入删除了两次尾随`0`。

一不等于零；所以错误是不一样的。

双精度位的精度更高，C# 可能使用舍入而不是截断，但希望这个简单的模型向您展示相同值的不同排序可能会发生不同的错误。

fp 和 maths 之间的区别在于 + 是“add then round”的简写，而不仅仅是 add。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T11:09:15.403

c# 编译器没有做任何事情。CPU是。

如果 CPU 寄存器中有 A，然后添加 B，则存储在该寄存器中的结果为 A+B，近似于使用的浮点精度

如果您随后添加 C，则错误加起来。这个误差加法不是传递操作，因此是最终的差异。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-30T11:18:32.667

请参阅有关该主题[的经典论文（每个计算机科学家都应该了解的关于浮点运算](http://docs.sun.com/source/806-3568/ncg_goldberg.html)的知识）。浮点运算会发生这种情况。需要计算机科学家来告诉你 1/3+1/3+1/3**不**等于 1...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T11:08:46.013

浮点运算的顺序很重要。不直接回答您的问题，但您应该始终小心比较浮点数。通常包含一个公差：

```
double epsilon = 0.0000001;
if (abs(result1 - result2) <= epsilon)
{
    ...
} 
```

这可能很有趣：[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.sun.com/source/806-3568/ncg_goldberg.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T11:16:43.700

> result1 应该总是等于 result2 对吧？

**错了**。这在数学中是正确的，但在[浮点算术](http://en.wikipedia.org/wiki/Floating_point)中则不然。

您需要阅读一些[数值分析入门](http://docs.sun.com/source/806-3568/ncg_goldberg.html)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-30T15:54:45.077

为什么错误因顺序而异，可以用不同的例子来解释。

假设对于 10 以下的数字，它可以存储所有数字，因此它可以存储 1、2、3 等直到包括 10，但是在 10 之后，由于内部丢失，它只能存储每秒的数字精度，换句话说，它只能存储 10、12、14 等。

现在，通过该示例，您将了解为什么以下会产生不同的结果：

```
1 + 1 + 1 + 10 = 12 (or 14, depending on rounding)
10 + 1 + 1 + 1 = 10 
```

浮点数的问题在于它们不能被准确地表示，而且错误并不总是以同样的方式出现，所以顺序很重要。

例如，3.00000000003 + 3.00000000003 最终可能是 6.00000000005（注意不是最后的 6），但 3.00000000003 + 2.99999999997 最终可能是 6.00000000001，并且这样：

```
step 1: 3.00000000003 + 3.00000000003 = 6.00000000005
step 2: 6.00000000005 + 2.99999999997 = 9.00000000002 
```

但是，更改顺序：

```
step 1: 3.00000000003 + 2.99999999997 = 6.00000000001
step 2: 6.00000000001 + 3.00000000003 = 9.00000000004 
```

所以这很重要。

现在，当然，您可能很幸运，因为上述示例相互平衡，第一个将向上摆动 .xxx1，另一个向下摆动 .xxx1，两者都给您 .xxx3，但不能保证。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-30T11:18:05.007

您实际上没有使用相同的值，因为中间结果不同：

```
double result1 = 2.1 + 1.2;
double result2 = 2.2 + 1.1; 
```

因为双精度数不能准确地表示十进制值，所以您会得到不同的结果。

# java - 如何在 Netbeans 可视化库中选择节点？

> ID：696772
> 
> 赞同：2
> 
> 时间：2009-03-30T11:06:53.647
> 
> 标签：java, swing, netbeans

我使用 Netbens 视觉库创建了一个基于图形的视觉应用程序。

有人可以发布一个代码示例，可以通过鼠标单击（和 Ctrl 键进行多选）来选择节点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T20:55:17.607

[http://graph.netbeans.org/examples.html](http://graph.netbeans.org/examples.html)包含许多编写良好的示例。不要错过**test.action.SelectLockedActionTest**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-07-17T14:52:55.293

相同的链接，但是`test.object.MultiMoveActionTest`一个更相关的例子。

# c# - WPF 应用程序引用 System.Windows.Forms

> ID：696773
> 
> 赞同：4
> 
> 时间：2009-03-30T11:07:11.243
> 
> 标签：c#, wpf

我正在创建我的第一个 WPF 应用程序，我想了解在混合来自 System.Windows.Forms 命名空间的功能时是否存在某种最佳实践。

基本上我希望在用户监视器的右下角默认打开一个弹出窗口。

我在 WPF 命名空间中找不到 Screen.PrimaryScreen.Bounds 等效项。我看到的示例建议在 WPF 应用程序中引用 System.Windows.Forms。

这让我想到了一个问题，这是不好的做法吗？考虑到默认情况下不包含此参考。

我将在我现有的 Windows 窗体应用程序中引用 WPF 所需的资源，以便我可以使用这个新的 WPF 窗口。

这种方法有什么问题吗？

编辑：我实际上找到了一个返回主屏幕信息而不引用 Windows 窗体的属性。该属性是 SystemParameters.WorkArea，但我的混合引用问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T11:18:49.843

我不认为在需要时引用 WinForms 是不好的。由于 WPF 仍然是一项相对较新的技术，它与 WinForms 的功能还没有完全对等。例如，据我所知，尚未在 WPF 中实现任何标准的 Windows 对话框（打开文件、保存文件、浏览文件夹等）。在 WPF 应用程序中显示这些的唯一方法是使用 WinForms 版本，或者使用 P/Invoke 自己显示 Win32 版本。我个人使用 WinForms 版本，因为他们已经费心包装 Win32 API。

我的方法是尽可能多地使用 WPF，如果 WPF 不能满足我的需求，则只回退到 WinForms。希望在 WPF 的下一个版本中，这将变得越来越没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T13:04:30.557

您还应该考虑资源和性能开销，因为您的应用程序必须为 Windows 窗体和 WPF 加载程序集。在 MSDN 论坛中多次提到 WPF/Winforms 互操作需要相当多的 CPU 周期......

# sql - CSV 回车符

> ID：696775
> 
> 赞同：2
> 
> 时间：2009-03-30T11:07:26.907
> 
> 标签：sql, csv

我的一个应用程序有一个 CSV 输出。这会从 Web 表单数据中生成一个文件。

在某些情况下，我的注释字段中会出现回车符。这会在导入文件时导致错误。我想删除这个字符。

当用户将信息从 word 文档粘贴到表单中或按住 shift 键并按 enter 时，似乎会出现此问题。

该字段是 ntext 并填充在多行文本框控件中。

我一直在尝试使用替换功能来删除它，但一些回车符似乎正在通过。

SQL

```
REPLACE(Fieldname), CHAR(13) + CHAR(10), ' ') AS new_Fieldname 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-30T11:11:05.557

最好单独替换字符，因为它们并不总是一起出现或按顺序出现：

```
REPLACE(REPLACE(Fieldname, CHAR(13),' '), CHAR(10), ' ') AS new_Fieldname 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T11:12:07.393

请注意，您可能有一个回车 + 换行，或者只是一个回车（取决于源平台、数据源等）。所以你可能需要处理这两种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T11:21:54.967

您可以读取带有回车符的 CSV。回车应该在一个字符串表示的字段中（即用引号括起来）。这使您可以读取行并将它们包含在您的字段中。如果您一次读取 CSV 一行，则需要维护行之间的状态并根据需要附加数据。

在 .Net 中，读取 CSV 的最简单方法是使用 Microsoft.VisualBasic.FileIO.textFileParser 对象（是的，如果添加引用，您可以在 C# 中使用它）。这甚至可以轻松读取我扔给它的最讨厌的 CSV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T11:11:20.517

在 Word 中，有不同种类的换行符。也许您还应该搜索/替换其他的。

我不确定哪些是所有不同的可能性，至少段落标记是我所知道的。

# svn - TortoiseSVN 兼容模式

> ID：696776
> 
> 赞同：1
> 
> 时间：2009-03-30T11:07:27.593
> 
> 标签：svn, tortoisesvn

我们的代码是在 Windows 上开发的（企业要求），但它在 Linux 服务器上运行。因此，我们使用 Samba 共享并对其进行 SVN 结帐。不幸的是，我们需要在服务器端使用一些使用 SVN 的脚本，但是我们在服务器上的 SVN 是 1.4，而我们在 Windows 客户端上的 TortoiseSVN 是 1.5 或 1.6。所以本质上，使用 TortoiseSVN 对结帐的任何操作都会升级结帐的内部结构，因此它不能再在服务器端使用，因为“客户端版本太旧”。

您知道解决此问题的任何方法吗？我知道的唯一方法是根本不在客户端使用 SVN，但这有点适得其反。在服务器上升级 SVN 也是没问题的。还有其他可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T12:08:57.443

不要共享工作副本！

尤其是在不同的操作系统之间。你迟早**会遇到麻烦。**一个（最明显的）问题是文本文件的行尾。如果将 svn:eol-style 属性指定为“native”，那么在 Linux 上运行的 svn 客户端与在 Windows 上运行的 svn 客户端是不同的。

还有更多的差异会让你在使用这种方法时遇到麻烦，但这些差异需要了解 svn 内部结构才能理解。

再说一遍：不要共享工作副本！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-30T11:10:29.970

那你为什么不使用旧的 1.4 TortoiseSVN 呢？

另一种选择是为 Samba 共享和运行您提到的那些 SVN 脚本提供单独的工作副本。这样您的共享工作副本就可以使用 v1.6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T11:28:42.987

只要服务器可以看到 svn 存储库，我就会使用一个小批处理文件，它使用来自 putty 的**plink**之类的东西，并在服务器上运行一个脚本来更新它的签出文件夹。

并且还在每台开发机器上保留一个单独的工作副本（我假设你已经拥有了）

这样，我们使用的客户端版本无关紧要，因为所有客户端签出的存储库都是独立的。为了简化一些事情，还要检查 plink 和批处理文件以在服务器上运行更新脚本，然后在用户知道其 ID/密码的盒子上创建一个受限帐户，然后您可以轻松地从客户端机器上运行它. 我们有一个命令行如下

tools\PLINK.EXE -pw 密码 user@server /fullPathToSNVUpdateScript

# javascript - 我如何将 addListener 添加到 GOOGLE MAPS 以获取 MapType

> ID：696778
> 
> 赞同：1
> 
> 时间：2009-03-30T11:07:55.453
> 
> 标签：javascript, google-maps

我如何将 addListener 添加到 GOOGLE MAPS 以获取 MapType

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T11:22:47.773

尝试：

```
GEvent.addListener(map, "maptypechanged", function() {
    var newMapType = map.getCurrentMapType();
    // ...
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T12:22:19.113

行！我自己找到了 map.getCurrentMapType().getName();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-11-01T08:56:22.043

这效果更好。用 alert() 测试

```
GEvent.addListener(map, "maptypechanged", function() {
    var newMapType = map.getCurrentMapType().getName(true);   
    //alert(newMapType);
    ....
}) 
```

# java - 从 java.sql.ResultSet 中检索列名

> ID：696782
> 
> 赞同：251
> 
> 时间：2009-03-30T11:10:14.950
> 
> 标签：java, jdbc

有没有办法通过使用列的索引`java.sql.ResultSet`来获取列的名称？`String`我浏览了 API 文档，但找不到任何东西。

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2009-03-30T11:13:12.553

您可以从`ResultSet`元数据中获取此信息。请参见[ResultSetMetaData](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSetMetaData.html)

例如

```
 ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM TABLE2");
 ResultSetMetaData rsmd = rs.getMetaData();
 String name = rsmd.getColumnName(1); 
```

您可以从那里获取列名。如果你这样做

```
select x as y from table 
```

然后`rsmd.getColumnLabel()`也会为您提供检索到的标签名称。

* * *

## 回答 #2

> 赞同：157
> 
> 时间：2010-09-29T04:24:35.847

除了上述答案之外，如果您正在使用动态查询并且想要列名但不知道有多少列，您可以使用 ResultSetMetaData 对象先获取列数，然后循环它们.

修改布赖恩的代码：

```
ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM TABLE2");
ResultSetMetaData rsmd = rs.getMetaData();
int columnCount = rsmd.getColumnCount();

// The column count starts from 1
for (int i = 1; i <= columnCount; i++ ) {
  String name = rsmd.getColumnName(i);
  // Do stuff with name
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-03-30T11:15:27.743

您可以为此使用 ResultSetMetaData ( [http://java.sun.com/javase/6/docs/api/java/sql/ResultSetMetaData.html](http://java.sun.com/javase/6/docs/api/java/sql/ResultSetMetaData.html) ) 对象，如下所示：

```
ResultSet rs = stmt.executeQuery("SELECT * FROM table");
ResultSetMetaData rsmd = rs.getMetaData();
String firstColumnName = rsmd.getColumnName(1); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-12-02T05:04:21.073

这个问题很老，以前的正确答案也是如此。但是当我发现这个主题时，我一直在寻找类似这个解决方案的东西。希望它可以帮助某人。

```
// Loading required libraries    
import java.util.*;
import java.sql.*;

public class MySQLExample {
  public void run(String sql) {
    // JDBC driver name and database URL
    String JDBC_DRIVER = "com.mysql.jdbc.Driver";
    String DB_URL = "jdbc:mysql://localhost/demo";

    // Database credentials
    String USER = "someuser"; // Fake of course.
    String PASS = "somepass"; // This too!

    Statement stmt = null;
    ResultSet rs = null;
    Connection conn = null;
    Vector<String> columnNames = new Vector<String>();

    try {
      // Register JDBC driver
      Class.forName(JDBC_DRIVER);

      // Open a connection
      conn = DriverManager.getConnection(DB_URL, USER, PASS);

      // Execute SQL query
      stmt = conn.createStatement();
      rs = stmt.executeQuery(sql);
      if (rs != null) {
        ResultSetMetaData columns = rs.getMetaData();
        int i = 0;
        while (i < columns.getColumnCount()) {
          i++;
          System.out.print(columns.getColumnName(i) + "\t");
          columnNames.add(columns.getColumnName(i));
        }
        System.out.print("\n");

        while (rs.next()) {
          for (i = 0; i < columnNames.size(); i++) {
            System.out.print(rs.getString(columnNames.get(i))
                + "\t");

          }
          System.out.print("\n");
        }

      }
    } catch (Exception e) {
      System.out.println("Exception: " + e.toString());
    }

    finally {
      try {
        if (rs != null) {
          rs.close();
        }
        if (stmt != null) {
          stmt.close();
        }
        if (conn != null) {
          conn.close();
        }
      } catch (Exception mysqlEx) {
        System.out.println(mysqlEx.toString());
      }

    }
  }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-10T04:30:52.977

> SQLite 3

使用 getMetaData();

```
DatabaseMetaData md = conn.getMetaData();
ResultSet rset = md.getColumns(null, null, "your_table_name", null);

System.out.println("your_table_name");
while (rset.next())
{
    System.out.println("\t" + rset.getString(4));
} 
```

编辑：这也适用于 PostgreSQL

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-24T09:41:49.533

```
import java.sql.*;

public class JdbcGetColumnNames {

    public static void main(String args[]) {
        Connection con = null;
        Statement st = null;
        ResultSet rs = null;

        try {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/komal", "root", "root");

            st = con.createStatement();

            String sql = "select * from person";
            rs = st.executeQuery(sql);
            ResultSetMetaData metaData = rs.getMetaData();

            int rowCount = metaData.getColumnCount();

            System.out.println("Table Name : " + metaData.getTableName(2));
            System.out.println("Field  \tDataType");

            for (int i = 0; i < rowCount; i++) {
                System.out.print(metaData.getColumnName(i + 1) + "  \t");
                System.out.println(metaData.getColumnTypeName(i + 1));
            }
        } catch (Exception e) {
            System.out.println(e);
        }
    }
} 
```

表名：person Field DataType id VARCHAR cname VARCHAR dob DATE

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-05-18T08:01:40.160

```
while (rs.next()) {
   for (int j = 1; j < columncount; j++) {
       System.out.println( rsd.getColumnName(j) + "::" + rs.getString(j));      
   }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-24T12:33:15.723

从数据库查询中读取数据的 SQL 语句在结果集中返回数据。SELECT 语句是从数据库中选择行并在结果集中查看它们的标准方法。该`**java.sql.ResultSet**`接口表示数据库查询的结果集。

*   **获取方法：**用于查看光标所指向的当前行的列中的数据。

使用`MetaData of a result set to fetch the exact column count`

```
ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM TABLE2");
ResultSetMetaData rsmd = rs.getMetaData();
int numberOfColumns = rsmd.getColumnCount();
boolean b = rsmd.isSearchable(1); 
```

[http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html)

并进一步将其绑定到数据模型表

```
public static void main(String[] args) {
    Connection conn = null;
    Statement stmt = null;
    try {
        //STEP 2: Register JDBC driver
        Class.forName("com.mysql.jdbc.Driver");

        //STEP 3: Open a connection
        System.out.println("Connecting to a selected database...");
        conn = DriverManager.getConnection(DB_URL, USER, PASS);
        System.out.println("Connected database successfully...");

        //STEP 4: Execute a query
        System.out.println("Creating statement...");
        stmt = conn.createStatement();

        String sql = "SELECT id, first, last, age FROM Registration";
        ResultSet rs = stmt.executeQuery(sql);
        //STEP 5: Extract data from result set
        while(rs.next()){
            //Retrieve by column name
            int id  = rs.getInt("id");
            int age = rs.getInt("age");
            String first = rs.getString("first");
            String last = rs.getString("last");

            //Display values
            System.out.print("ID: " + id);
            System.out.print(", Age: " + age);
            System.out.print(", First: " + first);
            System.out.println(", Last: " + last);
        }
        rs.close();
    } catch(SQLException se) {
        //Handle errors for JDBC
        se.printStackTrace();
    } catch(Exception e) {
        //Handle errors for Class.forName
        e.printStackTrace();
    } finally {
        //finally block used to close resources
        try {
            if(stmt!=null)
                conn.close();
        } catch(SQLException se) {
        } // do nothing
        try {
            if(conn!=null)
                conn.close();
        } catch(SQLException se) {
            se.printStackTrace();
        } //end finally try
    }//end try
    System.out.println("Goodbye!");
}//end main
//end JDBCExample 
```

非常好的教程在这里：[http ://www.tutorialspoint.com/jdbc/](http://www.tutorialspoint.com/jdbc/)

```
ResultSetMetaData meta = resultset.getMetaData();  // for a valid resultset object after executing query

Integer columncount = meta.getColumnCount();

int count = 1 ; // start counting from 1 always

String[] columnNames = null;

while(columncount <=count) {
    columnNames [i] = meta.getColumnName(i);
}

System.out.println (columnNames.size() ); //see the list and bind it to TableModel object. the to your jtbale.setModel(your_table_model); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-16T21:42:43.323

当您需要列名但不想获取条目时：

```
PreparedStatement stmt = connection.prepareStatement("SHOW COLUMNS FROM `yourTable`");

ResultSet set = stmt.executeQuery();

//store all of the columns names
List<String> names = new ArrayList<>();
while (set.next()) { names.add(set.getString("Field")); } 
```

**注意：**仅适用于 MySQL

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-14T11:48:58.080

@Cyntech 是对的。

如果您的表是空的并且您仍然需要获取表列名，您可以将列作为 Vector 类型，请参见以下内容：

```
ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM TABLE2");
ResultSetMetaData rsmd = rs.getMetaData();
int columnCount = rsmd.getColumnCount();

Vector<Vector<String>>tableVector = new Vector<Vector<String>>(); 
boolean isTableEmpty = true;
int col = 0;

 while(rs.next())
    {
      isTableEmpty = false;  //set to false since rs.next has data: this means the table is not empty
       if(col != columnCount)
          {
            for(int x = 1;x <= columnCount;x++){
                 Vector<String> tFields = new Vector<String>(); 
                 tFields.add(rsmd.getColumnName(x).toString());
                 tableVector.add(tFields);
             }
            col = columnCount;
          }
     } 

      //if table is empty then get column names only
  if(isTableEmpty){  
      for(int x=1;x<=colCount;x++){
           Vector<String> tFields = new Vector<String>(); 
           tFields.add(rsmd.getColumnName(x).toString());
           tableVector.add(tFields);
        }
      }

 rs.close();
 stmt.close();

 return tableVector; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-12T15:25:54.297

```
ResultSet rsTst = hiSession.connection().prepareStatement(queryStr).executeQuery(); 
ResultSetMetaData meta = rsTst.getMetaData();
int columnCount = meta.getColumnCount();
// The column count starts from 1

String nameValuePair = "";
while (rsTst.next()) {
    for (int i = 1; i < columnCount + 1; i++ ) {
        String name = meta.getColumnName(i);
        // Do stuff with name

        String value = rsTst.getString(i); //.getObject(1);
        nameValuePair = nameValuePair + name + "=" +value + ",";
        //nameValuePair = nameValuePair + ", ";
    }
    nameValuePair = nameValuePair+"||" + "\t";
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-11-07T13:52:21.433

如果你想使用 spring jdbctemplate 并且不想处理连接人员，你可以使用以下：

```
jdbcTemplate.query("select * from books", new RowCallbackHandler() {
        public void processRow(ResultSet resultSet) throws SQLException {
            ResultSetMetaData rsmd = resultSet.getMetaData();
            for (int i = 1; i <= rsmd.getColumnCount(); i++ ) {
                String name = rsmd.getColumnName(i);
                // Do stuff with name
            }
        }
    }); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-17T09:54:34.890

U 可以从 resultSet.getMetaData() 中获取列名和值；这段代码对我有用：

```
Connection conn = null;
PreparedStatement preparedStatement = null;
    try {
        Class.forName("com.mysql.cj.jdbc.Driver");
        conn = MySQLJDBCUtil.getConnection();
        preparedStatement = conn.prepareStatement(sql);
        if (params != null) {
            for (int i = 0; i < params.size(); i++) {
                preparedStatement.setObject(i + 1, params.get(i).getSqlValue());
            }
            ResultSet resultSet = preparedStatement.executeQuery();
            ResultSetMetaData md = resultSet.getMetaData();
            while (resultSet.next()) {
                int counter = md.getColumnCount();
                String colName[] = new String[counter];
                Map<String, Object> field = new HashMap<>();
                for (int loop = 1; loop <= counter; loop++) {
                    int index = loop - 1;
                    colName[index] = md.getColumnLabel(loop);
                    field.put(colName[index], resultSet.getObject(colName[index]));
                }
                rows.add(field);
            }
        }
    } catch (SQLException e) {
        e.printStackTrace();
    } finally {
        if (preparedStatement != null) {
            try {
                preparedStatement.close();
            }catch (Exception e1) {
                e1.printStackTrace();
            }
        }
        if (conn != null) {
            try {
                conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
    return rows; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-05T16:02:34.300

我知道，这个问题已经得到解答，但可能像我这样的人需要`DatabaseMetaData`通过标签而不是索引访问列名：

```
ResultSet resultSet = null;
DatabaseMetaData metaData = null;

    try {
        metaData  = connection.getMetaData();
        resultSet = metaData.getColumns(null, null, tableName, null);

        while (resultSet.next()){
            String name = resultSet.getString("COLUMN_NAME");
        }
    } 
```

# python - 在多个项目中共享公共文件的pythonic方式是什么？

> ID：696792
> 
> 赞同：5
> 
> 时间：2009-03-30T11:12:51.433
> 
> 标签：python

假设我在兄弟目录中有项目 x 和 y：projects/x 和 projects/y。
myutils.py 中的两个项目都有一些实用程序函数，mydbstuff.py 中有一些 db 东西等。
这些都是次要的常见好东西，所以我不想为它们创建一个包。

关于这些文件的下落、对 PYTHONPATH 的可能更改、正确的导入方式等问题出现了。

使用此类文件的“pythonic 方式”是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-30T11:24:34.027

pythonic 方法是为它们创建一个额外的包。

你为什么不想创建一个包？您可以将这个包与两个项目一起分发，效果是一样的。

如果您通过使用 PYTHONPATH 和自定义导入来进行修改，那么您将永远无法在所有安装场景和平台上正确执行此操作。

只需创建另一个包即可立即完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T11:25:26.533

您可以[**`sys.path`**](http://docs.python.org/library/sys.html#sys.path)直接通过`sys.path.append(pathToShared)`或通过定义`.pth`文件添加共享文件的路径并将它们添加到 with [**`site.addsitedir`**](http://docs.python.org/library/site.html#site.addsitedir)。路径文件 ( `.pth`) 是简单的文本文件，每行都有一个路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T12:39:50.803

您还可以创建一个`.pth`文件，该文件将存储您要添加到 PYTHONPATH 的目录。 `.pth`文件被复制到`Python/lib/site-packages`目录中，并且该文件中的任何目录都将在运行时添加到您的 PYTHONPATH 中。

[http://docs.python.org/library/site.html](http://docs.python.org/library/site.html)
[StackOVerflow 问题（请参阅接受的解决方案）](https://stackoverflow.com/questions/632171/automatically-fetching-latest-version-of-a-file-on-import)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T12:50:06.863

我同意“创建一个包”。

如果你不能这样做，那么使用符号链接/连接（`ln -s`在 Linux 上，`linkd`在 Windows 上）怎么样？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T12:54:36.990

我建议为此使用[setuptools](http://peak.telecommunity.com/DevCenter/setuptools)。它允许您设置依赖关系，因此您可以在安装包之前确保所有这些包/单个模块都在 sys.path 上。如果你想安装的只是一个单一的源文件，它支持自动为它生成一个简单的 setup.py。如果您决定不走包路线，这可能会很有用。

如果您打算在多台计算机上部署它，我通常会设置一个网络服务器，其中包含我计划使用的所有依赖项，以便它可以自动为您安装它们。

我也听说过[摊铺机](http://www.blueskyonmars.com/projects/paver/)的好东西，但我自己没用过。

# security - 具有 2 个 DNS 名称的服务器上的 SSH 登录警告消息

> ID：696793
> 
> 赞同：3
> 
> 时间：2009-03-30T11:13:02.570
> 
> 标签：security, ssh, dns, remote-access

我正在通过笔记本电脑对服务器 x1.example.com 进行 ssh，有时来自外部，有时来自局域网。从 lan 我只是说

```
ssh karl@x1 
```

从万：

```
ssh karl@x1.example.com 
```

但是从 lan 我总是收到警告：远程主机标识已更改。

我每次都可以删除 known_hosts 文件中的另一个键，但我想知道是否有更好的解决方案。

我正在犹豫是否要关闭密钥验证，因为这样会不太安全。但是一直收到警告也是不安全的（因为我一直忽略这些警告）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T14:05:32.983

在 known_hosts 文件中，您可以为一个键列出多个名称甚至 IP，例如：

```
x1,x1wan.example.com,192.168.0.134,23.41.51.23 ssh-rsa AAAA/bunch/of/gibberish/looking/data/== 
```

但这不是你的问题。如果您收到主机标识已更改的警告，这确实意味着。这意味着在您第一次从 lan 连接到该主机的那一刻到现在，有人为该主机重新生成了主机密钥，例如在重新安装操作系统时。或者你有一个中间人攻击。

与您的管理员确认已重新安装主机并重新生成主机密钥，然后从您的 known_hosts 文件中删除旧密钥。下次连接时，您将向 known_hosts 文件添加一个新的正确密钥，此警告将消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T11:20:07.203

从技术上讲，我认为它实际上是一个名字。

分配第二个主机名（可能通过您的主机文件）以从 WAN 访问您的服务器：例如：

```
ssh karl@x1wan.example.com 
```

我通过 ssh 访问具有两个不同名称（相同 IP）的服务器，没有任何警告。例如：name1.example.com 和 name2.example.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-09T11:11:29.023

非常感谢您的回答。

抱歉，我丢失了基于 cookie 的登录信息，无法再评分或编辑。当我从 LAN 更改为 WAN 时，您的问题帮助我解决了这个问题。我认为这个问题已经解决了。

但现在我发现问题更严重了，因为我在同一个 IP 上也有 2 台主机，而且 IP 也发生了变化，我在一个新问题中涵盖了这个问题（来自我不能再丢失的新帐户），其中包含更多详细信息：

[如何在同一（但不断变化的）IP 地址上处理 2 个不同主机的 ssh 主机密钥验证？](https://stackoverflow.com/questions/733753/how-to-handle-ssh-host-key-verification-with-2-different-hosts-on-the-same-but-c)

# java - Java indexOf为未找到的字符串返回false？

> ID：696809
> 
> 赞同：5
> 
> 时间：2009-03-30T11:18:42.277
> 
> 标签：java

我需要知道在 Java 中该`indexOf()`方法是返回`false`还是返回`void`未找到的字符串？还是返回索引`int`为 0？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-03-30T11:21:23.330

它会返回-1（提示：试试看）

与[JavaDoc中一样](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html#indexOf%28int%29)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-30T11:21:43.737

[Java API 文档](http://java.sun.com/javase/6/docs/api/java/lang/String.html)包含这个答案。如果找不到字符，则返回 -1的`indexOf`方法。`String`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-30T11:23:50.470

看[签名](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/String.html#indexOf(int))。它说`int`，所以返回一个整数。要返回另一种类型（void 或 boolean），签名会有所不同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-30T13:04:04.940

只有[PHP 的 str_pos](http://php.net/str_pos)很奇怪，在找不到索引时返回 0/false。大多数人认为 PHP 版本是一个糟糕的实现。

```
int strpos  ( string $haystack  , mixed $needle  [, int $offset= 0  ] )

//Returns the position as an integer. If needle  is not found, strpos()
// will return boolean  FALSE.

/*
  Warning
  function may return Boolean FALSE, but may also return a non-Boolean value which
  evaluates to FALSE, such as 0 or "". Please read the section on Booleans for more
  information. Use the === operator for testing the return value of this function.
*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T11:21:50.537

你是说Javascript吗？它返回-1。

# apache-flex - Flex PureMVC：何时注册中介

> ID：696818
> 
> 赞同：1
> 
> 时间：2009-03-30T11:22:46.540
> 
> 标签：apache-flex, puremvc

设置：

让主 mxml 文件显示登录面板和主面板的视图堆栈。主面板内部有两个面板，一个表单面板和一个列表面板

启动时，应用程序中介器和登录中介器分别附加到应用程序面板和登录面板。在 login_successful 事件中，应用程序中介将主面板中介附加到主面板。然后主面板调解器为表单面板和列表面板附加调解器。

问题：

在主面板调解器中注册表单面板和列表面板的调解器时，来自主面板的视图组件引用（到列表/表单面板）为空。从主面板调解器到表单面板的引用为空，同样适用于列表面板。原因是表单和列表的面板尚未渲染，因此为空。

有没有办法急切地加载面板？还是有更好的方法来构建它以附加侦听器以在创建面板后调用 registermediator 发生？

对不起，我对 flex 很陌生，所以对遇到类似问题的任何人的任何反馈都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T00:08:18.360

您可以尝试将 ViewStack 的[creationPolicy](http://livedocs.adobe.com/flex/3/langref/mx/core/Container.html#creationPolicy)设置为“all”以强制在启动时初始化主面板。

或者，您可以尝试在主面板的 creationComplete 事件中附加表单和列表调解器 - 此时您知道表单和列表已被初始化。

有关 creationPolicy 属性的更多信息：http: [//livedocs.adobe.com/flex/3/html/layoutperformance_05.html](http://livedocs.adobe.com/flex/3/html/layoutperformance_05.html)

# asp.net - 在 ASP.net 中持有用户 ID

> ID：696823
> 
> 赞同：2
> 
> 时间：2009-03-30T11:24:11.327
> 
> 标签：asp.net, session, userid

我正在使用 ASP.net 开发 Intranet 网站。我需要在网站中所有页面的所有回发中保留用户 ID。是否建议将这些信息保存在 Session 中或其他方式可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T11:25:52.010

[FormsAuthentication](http://msdn.microsoft.com/en-us/library/7t6b43z4.aspx)还能够保存自定义用户 ID，并为您解决很多事情，例如设置 cookie、登录页面重定向等。

您可以使用[RedirectFromLoginPage](http://msdn.microsoft.com/en-us/library/1f5z1yty.aspx)方法设置用户 ID，然后使用[FormsAuthentication_OnAuthenticate](http://msdn.microsoft.com/en-us/library/467h1csc.aspx)事件来查找和设置 Page.User 属性，以访问您需要的所有其他逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T11:26:06.847

最常用的方法是使用 ASP.NET 会话对象或使用 cookie。

无论哪种方式都可以，但是如果您希望他们的用户信息即使在会话超时（例如关闭浏览器窗口）后仍然存在，那么您需要查看 cookie。会话信息将在关闭浏览器或达到活动超时时处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T11:26:28.327

如果使用表单身份验证，则用户名将可用作：

```
Page.User.Identity.Username 
```

如果您需要同时保存另一条信息，请使用 Session。

PS。我建议使用一个类来包装你的会话变量以获得强类型和潜在的默认值。

# css - 滚动固定定位

> ID：696827
> 
> 赞同：22
> 
> 时间：2009-03-30T11:24:46.863
> 
> 标签：css

例如，如果我有一个使用固定定位的菜单，但它大于当前窗口的高度，有没有办法让它滚动？浏览器的默认行为是隐藏它，而不是让您访问它。

```
div#sidebar {
    position:fixed;
    top:30px;
    left:0;
    bottom:4px;
    width:148px;
    background-color:#d7d7d7;
} 
```

这是我目前所拥有的一个片段。它是否需要一些 JavaScript 或类似的东西？

**编辑：**我不确定这是否真的可以纠正。我想要一个距离文档顶部 30 像素的元素。我想允许它使用溢出：自动和高度：100％滚动。无论哪种方式，我似乎都这样做，滚动条将被隐藏，或者 div 的一部分将被隐藏。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-03-30T11:28:11.520

您需要将`overflow:scroll`（或`overflow:auto`）设置为该 div，并将高度设置为 100%。

# spring - 与 Spring 相比，Enterprise Java Beans 仍然有用吗？

> ID：696830
> 
> 赞同：4
> 
> 时间：2009-03-30T11:25:50.497
> 
> 标签：spring, jakarta-ee, ejb

我有一个即将到来的项目，该项目将允许我使用 EJB 或 Spring，我想知道什么更适用于“现实世界”的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T11:33:15.970

这两种技术并不相互排斥。当您说 EJB 时，这取决于您是在谈论会话 bean 还是实体 bean（或完整性的消息驱动 bean）。

如果没有其他原因，无状态会话 bean 一直非常有用，因为它们为分布式事务提供了相当一致的低门槛。

EJB3 还借鉴了 Spring 的一些依赖注入特性。

话虽如此，这一直是争议的长期原因。

可能值得阅读 Web 上的一些（许多）比较，例如[这个](http://www.onjava.com/pub/a/onjava/2005/06/29/spring-ejb3.html?page=1)。

在不了解您的要求的情况下，很难推荐其中一个。除非我有充分的理由不这样做，否则我个人更喜欢 Spring。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-17T15:41:38.433

对于 EJB2 旨在解决的一些问题，Spring 采用了完全不同的（并且得到了极大改进）的方法。随之而来的是 EJB3，它与 Spring 方法有着惊人的相似之处——并不是 Sun 或 JBoss 之类的公司会承认这一点。

尽管有相似之处，但 EJB3 和 Spring 并没有解决相同的问题。EJB3 提供了一个组件编程模型和框架，而 Spring 更像是一个工具箱，它为许多横切关注点（例如事务管理和远程处理）提供一致的解决方案。EJB3 提供了更多开箱即用的结构，但另一方面是它变得更具限制性。

# optimization - 我应该在我的 sitemap.xml 中包含分页结果吗？

> ID：696836
> 
> 赞同：16
> 
> 时间：2009-03-30T11:26:36.767
> 
> 标签：optimization, pagination, sitemap

我列出了在 url 上采用 page 参数的页面，如下所示：

```
http://www.domain.com/foo/bar/?page=7 
```

我应该只包含不带参数的 URL，还是应该在我的 sitemap.xml 中列出所有页面？

### 编辑

分页内容是列表，如索引。因此，它们的内容也（更详细地）在详细信息页面中找到。但是这些分页是访问详细信息页面的唯一途径。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-05T12:06:43.010

我真的很想给你找一个可靠的消息来源，但我做不到。这意味着您将不得不按照我的直觉行事：

如果文章仅以分页形式存在，并且您希望将它们作为单独的页面进行索引，*请将它们全部列出*。它们都有不同的内容，因此您不会因重复而受到处罚。

我发现了一个例外的细节；[包括第 1 页两次](http://www.ragepank.com/articles/the-pagination-issue/)。基本上你需要选择第一页是 /foo/bar/?page=1 还是只是 /foo/bar/，然后从你不想使用的版本做一个 301 重定向。

希望这会有所帮助（即使只是一点点）。

汤姆

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-23T22:45:02.203

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T12:03:47.363

在这种情况下，?page=7 可能与内容管理系统页面有关。在您的站点地图文件中，您可以添加它。在站点地图中，如果您希望这些页面中的每一个都显示在使用此文件的内容中，是的，您应该添加它们。

# asp.net - 如何转换为日期时间

> ID：696837
> 
> 赞同：1
> 
> 时间：2009-03-30T11:26:40.120
> 
> 标签：asp.net, vb.net

我有一个显示时间的下拉列表。例如**上午 8:00**或**上午 8:30**。

当我将此时间保存到数据库时，我想保存为今天的日期+时间。例如：**上午 8:00**为`03/30/2009 8:00:00:000`. 任何人都可以提供适当的代码进行转换，如上所示？

我试过

```
Convert.ToDateTime(ddlStartTime.SelectedItem.Text) 
```

但是有一个错误指出“字符串未被识别为有效的日期时间”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T12:20:25.607

Portmans 解决方案的 VB.NET 答案。评论的字符太多，所以包括在这里。

```
Dim time As String() = Me.DropDownList1.SelectedValue.Split(New Char() {":", " "})
Dim hours As Integer = Integer.Parse(time(0))
Dim minutes As Integer = Integer.Parse(time(1))
Dim ampm As Integer = 12
If time(2).ToLower() = "am" Then
  ampm = 0
End If
Dim dt As DateTime = DateTime.Today.AddHours(hours + ampm).AddMinutes(minutes) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T11:29:42.267

看看 DateTime.TryParse 和 DateTime.Today。使用它们应该足以做你想做的事。

未经测试的代码。

```
DateTime dt;
if (DateTime.TryParse(Dropdown1.SelectedValue, out dt))
{
    DateTime result = DateTime.Today.AddHours(dt.Hour).AddMinutes(dt.Minute);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T11:31:28.517

将时间表示的从午夜开始的分钟数存储为每个下拉项的值。然后：-

```
valueToStore = DateTime.Today + TimeSpan.FromMinutes(Int32.Parse(value)) 
```

通过使用 HTML 选项的 value 属性来存储值的简单表示，您可以消除代码对用于简单显示值集的实际格式的依赖。如果它决定将时间表示更改为使用不同的格式，则其余代码将继续工作而无需修改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T11:43:45.943

基本上，您只需要解析时间字符串。它将自动解析为当前日期。

```
Dim strTime As String = "8.30am"
Dim parsedTime As DateTime
If DateTime.TryParseExact(strTime, "h.mmtt", New System.Globalization.DateTimeFormatInfo(), Globalization.DateTimeStyles.None, parsedTime) = True Then
  'Parse was successful.
Else
  'Handle the error.
End If 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T11:35:39.677

```
var time = this.DropDownList1.SelectedValue.Split(':', ' ');
var hours = Int32.Parse(time[0]);
var minutes = Int32.Parse(time[1]);
var ampm = (time[2] == "PM") ? 12 : 0;
var dt = DateTime.Today.AddHours(hours + ampm).AddMinutes(minutes); 
```

解析您的 DropDownList 的小时和分钟，然后将它们添加到 DateTime.Today。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T11:29:18.007

阅读时间的各个部分，以便您有小时和分钟，然后使用以下代码：

```
DateTime myDate = DateTime.Now.Date;
myDate = myDate.AddHours(hours);
myDate = myDate.AddMinutes(minutes); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-30T12:19:35.110

使用 ParseExact 以便您可以指定您正在使用的格式。

h = 12 小时制格式的小时数
。= 文字字符
mm = 两位数的分钟
tt = AM/PM 指示符

```
Dim time As DateTime = DateTime.ParseExact(dropdown.SelectedValue, "h.mmtt", CultureInfo.InvariantCulture) 
```

您未在字符串中指定的 DateTime 值的组成部分（年、月、日期、秒、时区、纪元）使用 DateTime.Today 作为默认值，这正是您在本例中想要的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-30T12:40:42.923

这似乎总是对我有用。可能不是最优雅的方式，但到目前为止我还没有遇到任何问题。

```
dTime = DateTime.Now;

string time = this.DropDownList1.SelectedValue;     

DateTime FormattedDateTime = Convert.ToDateTime(dTime.Date.ToShortDateString() + 
" " + time); 
```

# linux - 如果进程死了，如何编写 bash 脚本来重新启动进程？

> ID：696839
> 
> 赞同：276
> 
> 时间：2009-03-30T11:27:08.700
> 
> 标签：linux, bash, cron, scripting

我有一个 python 脚本，它将检查队列并对每个项目执行操作：

```
# checkqueue.py
while True:
  check_queue()
  do_something() 
```

如何编写一个 bash 脚本来检查它是否正在运行，如果没有，则启动它。大致如下伪代码（或者它应该做类似的事情`ps | grep`？）：

```
# keepalivescript.sh
if processidfile exists:
  if processid is running:
     exit, all ok

run checkqueue.py
write processid to processidfile 
```

我将从 crontab 中调用它：

```
# crontab
*/5 * * * * /path/to/keepalivescript.sh 
```

* * *

## 回答 #1

> 赞同：722
> 
> 时间：2009-03-30T12:53:53.950

避免使用 PID 文件、crons 或任何其他试图评估不是其子进程的进程。

在 UNIX 中，您只能等待您的孩子，这是有充分理由的。任何试图解决这个问题的方法（ps 解析、pgrep、存储 PID，...）都是有缺陷的，并且存在漏洞。只是**说不**。

相反，您需要将监控您的进程的进程作为该进程的父进程。这是什么意思？这意味着只有*启动*你的进程的进程才能可靠地等待它结束。在 bash 中，这绝对是微不足道的。

```
until myserver; do
    echo "Server 'myserver' crashed with exit code $?.  Respawning.." >&2
    sleep 1
done 
```

上面这段 bash 代码循环运行`myserver`。`until`第一行开始`myserver`并等待它结束。当它结束时，`until`检查它的退出状态。如果退出状态为`0`，则表示它正常结束（这意味着您要求它以某种方式关闭，并且它成功地关闭了）。在这种情况下，我们不想重新启动它（我们只是要求它关闭！）。如果退出状态*不是* `0`，将运行循环体，它会在 STDERR 上发出错误消息并*在 1 秒后*`until`重新启动循环（回到第 1 行）。

 *我们为什么要等一秒钟？因为如果启动顺序有问题`myserver`，它会立即崩溃，你将有一个非常密集的循环，不断重启和崩溃。消除了`sleep 1`压力。

现在您需要做的就是启动这个 bash 脚本（可能是异步的），它会监控`myserver`并在必要时重新启动它。如果您想在启动时启动监视器（使服务器“存活”重新启动），您可以使用`@reboot`规则将其安排在用户的 cron(1) 中。使用以下命令打开您的 cron 规则`crontab`：

```
crontab -e 
```

然后添加一个规则来启动你的监控脚本：

```
@reboot /usr/local/bin/myservermonitor 
```

* * *

或者; 查看 inittab(5) 和 /etc/inittab。您可以在其中添加一行以`myserver`从某个初始级别开始并自动重生。

* * *

编辑。

让我添加一些关于为什么**不**使用 PID 文件的信息。虽然它们很受欢迎；他们也有很大的缺陷，你没有理由不以正确的方式去做。

考虑一下：

1.  PID回收（杀错进程）：

    *   `/etc/init.d/foo start`: 开始`foo`，将`foo`PID写入`/var/run/foo.pid`
    *   过了一会儿：`foo`不知何故死去。
    *   过了一会儿：任何开始的随机进程（称为它`bar`）都需要一个随机 PID，想象一下它使用`foo`的是旧的 PID。
    *   你注意到`foo`'s''''''''''''''''''''''''''''''''''''''''''''''`/etc/init.d/foo/restart`读取，检查它`/var/run/foo.pid`是否还活着，找到' ' ''''''''''''''''''''''''''''`bar``foo``foo`
2.  PID 文件过时。您需要过于复杂（或者我应该说，不平凡）的逻辑来检查 PID 文件是否过时，并且任何此类逻辑再次容易受到`1.`.

3.  如果您甚至没有写访问权限或处于只读环境中怎么办？

4.  这是毫无意义的过度复杂化；看看我上面的例子是多么简单。完全没有必要把它复杂化。

另请参阅：[“正确”执行时，PID 文件是否仍然存在缺陷？](https://stackoverflow.com/questions/25906020/are-pid-files-still-flawed-when-doing-it-right/25933330#25933330)

顺便一提; **比 PID 文件更糟糕的是解析`ps`！** 永远不要这样做。

1.  `ps`非常不便携。虽然您几乎可以在每个 UNIX 系统上找到它；如果您想要非标准输出，它的参数会有很大差异。标准输出仅供人类使用，不能用于脚本解析！
2.  解析`ps`会导致很多误报。举`ps aux | grep PID`个例子，现在想象有人以某个地方的数字作为参数启动一个进程，该参数恰好与您盯着守护程序使用的 PID 相同！想象一下，两个人开始一个 X 会话，而你正在寻找 X 来杀死你的会话。这只是各种各样的坏事。

如果您不想自己管理流程；有一些非常好的系统可以作为您流程的监控器。例如，查看[runit](http://smarden.org/runit/)。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2009-03-30T12:39:02.207

看看 monit ( [http://mmoni.com/monit/](http://mmonit.com/monit/) )。它处理脚本的启动、停止和重新启动，并且可以在必要时进行健康检查和重新启动。

或者做一个简单的脚本：

```
while true
do
/your/script
sleep 1
done 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-30T11:32:47.250

最简单的方法是在文件中使用flock。在 Python 脚本中你会做

```
lf = open('/tmp/script.lock','w')
if(fcntl.flock(lf, fcntl.LOCK_EX|fcntl.LOCK_NB) != 0): 
   sys.exit('other instance already running')
lf.write('%d\n'%os.getpid())
lf.flush() 
```

在 shell 中，您实际上可以测试它是否正在运行：

```
if [ `flock -xn /tmp/script.lock -c 'echo 1'` ]; then 
   echo 'it's not running'
   restart.
else
   echo -n 'it's already running with PID '
   cat /tmp/script.lock
fi 
```

但是当然你不必测试，因为如果它已经在运行并且你重新启动它，它会退出`'other instance already running'`

当进程终止时，它的所有文件描述符都将关闭，并且所有锁都会自动删除。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-30T12:19:59.727

您应该使用 monit，这是一个标准的 unix 工具，可以监控系统上的不同事物并做出相应的反应。

来自文档： http: [//mmonit.com/monit/documentation/monit.html#pid_testing](http://mmonit.com/monit/documentation/monit.html#pid_testing)

```
使用 pidfile /var/run/checkqueue.pid 检查进程 checkqueue.py
       如果更改了 pid 然后 exec "checkqueue_restart.sh"

```

您还可以将 monit 配置为在重启时向您发送电子邮件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-30T11:34:05.297

```
if ! test -f $PIDFILE || ! psgrep `cat $PIDFILE`; then
    restart_process
    # Write PIDFILE
    echo $! >$PIDFILE
fi 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-11-25T08:36:53.163

## 排队：

```
while true; do <your-bash-snippet> && break; done 
```

**例如#1**

```
while true; do openconnect x.x.x.x:xxxx && break; done 
```

**例如#2**

```
while true; do docker logs -f container-name; sleep 2; done 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-10-22T00:00:46.767

我不确定它在操作系统之间的可移植性如何，但您可以检查您的系统是否包含“run-one”命令，即“man run-one”。具体来说，这组命令包括“run-one-constantly”，这似乎正是需要的。

从手册页：

> 不断运行命令 [ARGS]

注意：显然这可以从你的脚本中调用，但它也完全不需要脚本。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-10T09:20:27.613

```
watch "yourcommand" 
```

如果/当它停止时（延迟 2 秒后），它将重新启动该过程。

```
watch -n 0.1 "yourcommand" 
```

在 0.1 秒后重新启动它而不是默认的 2 秒

```
watch -e "yourcommand" 
```

如果程序出现错误退出，则停止重新启动。

## 好处：

*   内置命令
*   一条线
*   易于使用和记忆。

## 缺点：

*   仅在完成后在屏幕上显示命令的结果

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-05-24T09:47:19.750

我在众多服务器上使用了以下脚本并取得了巨大成功：

```
pid=`jps -v | grep $INSTALLATION | awk '{print $1}'`
echo $INSTALLATION found at PID $pid 
while [ -e /proc/$pid ]; do sleep 0.1; done 
```

笔记：

*   它正在寻找一个 java 进程，所以我可以使用 jps，这在分布之间比 ps 更加一致
*   `$INSTALLATION`包含足够多的流程路径，这是完全明确的
*   在等待进程死亡时使用睡眠，避免占用资源:)

该脚本实际上用于关闭正在运行的 tomcat 实例，我想在命令行中关闭（并等待）它，因此将它作为子进程启动根本不适合我。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-21T06:03:21.763

我将它用于我的 npm 进程

```
#!/bin/bash
for (( ; ; ))
do
date +"%T"
echo Start Process
cd /toFolder
sudo process
date +"%T"
echo Crash
sleep 1
done 
```

# sharepoint - Search Server Web 内容源中可用的默认字段？

> ID：696840
> 
> 赞同：1
> 
> 时间：2009-03-30T11:27:17.730
> 
> 标签：sharepoint, search-engine, field

我在 Web 应用程序中安装 Search Server 2008 Express 时使用搜索 Web 服务。

我已经创建了内容源和范围，如果我指定了我希望返回的字段，则可以成功查询 Web 服务。

我无法找出哪些字段可供我使用，如果我将查询修改为“SELECT * ...”，那么我会收到一个错误，即我的查询格式错误。

谁能告诉我默认情况下哪些字段可用于基于 Web 的搜索源？

谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T13:23:43.957

有一些很好的工具可以帮助您调试它，这里有一些建议：

1.  我的[SearchCoder](http://www.codeplex.com/MOSSSearchCoder)将帮助您正确地纠正 SQL
2.  [搜索服务工具](http://sharepointsearchserv.codeplex.com/)可帮助您使用 Web 服务
3.  MSDN 上有一些 .NET 帮助程序，这里[是 SharePoint Server 2007 搜索查询 Web 服务的帮助程序类，这些服务是使用 Microsoft .NET Framework 构建的](http://msdn.microsoft.com/en-us/library/bb852171.aspx)

以及CodePlex 上的[搜索社区工具包。](http://sct.codeplex.com/)他们都应该让你动起来。

# sql - sql server 2005 命令行安装错误 ADD_LOCAL 属性已安装

> ID：696846
> 
> 赞同：1
> 
> 时间：2009-03-30T11:29:33.623
> 
> 标签：sql, sql-server, sql-server-2005, command-line, installation

我有 SQL Server 2005 的静默安装，当在尚未安装 SQL Server 的机器上安装 SQL Server 时效果很好。我在执行安装时使用以下参数：

```
#define SQL_SILENT                    "/passive /qb"
#define SQL_USERNAME                  "username=MyUserName"
#define SQL_COMPANYNAME               "companyname=MyCompanyName"
#define SQL_ADDLOCAL                  "ADDLOCAL=SQL_Engine"
#define SQL_UPGRADE                   ""
#define SQL_DISABLENETWORKPROTOCOLS   "disablenetworkprotocols=0"
#define SQL_INSTANCENAME              "instancename=MYSQLINSTANCE"
#define SQL_SQLAUTOSTART              "SQLAUTOSTART=1"
#define SQL_SECURITYMODE              "SECURITYMODE=SQL"
#define SQL_SAPWD                     "SAPWD=StrongPassword"
#define SQL_SQLACCOUNT                "SQLACCOUNT="""""
#define SQL_SQLPASSWORD               "SQLPASSWORD=""""" 
```

它可以毫无问题地安装 SQL Server Express 的实例。但是，当我尝试在已经有另一个包含组件的实例的机器上安装 SQL Server 时，我收到以下错误：

*“您在 ADD_LOCAL 属性中指定的组件已安装。要升级现有组件，请参阅 template.ini 并将 UPGRADE 属性设置为组件的名称。”*

我也尝试过根据错误消息使用 UPGRADE 方法

```
#define SQL_UPGRADE       "UPGRADE=SQL_Engine INSTANCENAME=MYSQLINSTANCE" 
```

但得到以下错误：

*“SQL Server 安装程序无法执行升级，因为该组件未安装在计算机上。要继续，请验证当前安装的要升级的组件，并且在 ADDLOCAL 属性中指定了要升级的组件。”*

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T12:32:54.720

您确定服务器名称/实例名称正确吗？您在注册表中看到了什么，特别是

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL 
```

和

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\90\Machines 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T13:41:04.977

我在一个地方定义了实例名称并重新使用它以避免在其他地方输入错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T03:34:37.763

您从添加/删除程序中手动删除工作站组件并安装它

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-11-04T17:14:35.157

当我尝试在现有 SQL 2005 安装之上安装 Management Studio 时，我遇到了类似的问题。对我来说，这个问题的原因是我安装了 SQL Express 工具。由于它们没有出现在“添加/删除程序”下，我使用我下载的名为“Windows Install Clean Up”的 Microsoft 工具卸载了它们。完成此操作后，我可以通过直接从 CD 运行 SqlRun_Tools.msi 来安装 SQL 2005 客户端工具（Management Studio 等）。

# ruby-on-rails - 帮助 Rails 路线

> ID：696848
> 
> 赞同：0
> 
> 时间：2009-03-30T11:29:50.317
> 
> 标签：ruby-on-rails, routes

假设我有一个控制器，配置文件，它只有两个动作。第一个是`list`，它将只显示名称列表。我希望这些名称成为链接，然后将您带到显示完整个人资料的页面。所以我需要第二个操作，`view`然后可以输入一个参数来指示要查看的配置文件。

例如：我会访问`/profile/list`，然后如果我想查看 John 的个人资料，我会点击他的名字，这应该带我到`/profile/view/john`。我的视图操作将读取 john 参数，然后进行适当的数据库查询。

我必须对 routes.rb 进行哪些更改才能发生这种情况？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T12:26:48.760

我宁愿使用默认的 :controller/:action/:id 路由来防止列表中有 2 个 John 的情况。

要拥有像您提到的自定义路线，请编辑 Routes.rb 以包含新路线

```
map.connect ':controller/:action/:user_name' 
```

现在像 profile/view/john 这样的请求应该以

```
@params = {:controller => "profile", :action=> "view", :user_name => "john"} 
```

使用 params[:user_name] 值在控制器的视图操作中定位并显示相关记录。您还可以对 url 的 :user_name 部分设置一些要求，例如它必须匹配 /SomeRegexpToValidateNames/

```
map.connect ':controller/:action/:user_name',
   :requirements => {:user_name => /\w+/} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T13:30:42.117

如果您想按名称识别配置文件，例如“/profile/view/john”，您可以使用 permalink_fu 插件

[http://www.seoonrails.com/even-better-looking-urls-with-permalink_fu](http://www.seoonrails.com/even-better-looking-urls-with-permalink_fu)

当名称重复时，这将使您免受麻烦...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-30T11:55:06.027

如果模型是“用户”，则必须覆盖 to_param 方法。这将允许您返回用户的“id-name”而不是“id”。（例如：/profile/view/23-john）

我知道，这并不完全符合您的要求，但这应该是一个简单的解决方案。

```
class User < ActiveRecord::Base
  def to_param
    "#{id}-#{name.gsub(/\W/, '-').downcase}"
  end
end 
```

只需在路由配置中添加一个简单的资源声明：

```
map.resources :users 
```

# .net - 使用 Func<> 提高代码可读性的机会

> ID：696850
> 
> 赞同：4
> 
> 时间：2009-03-30T11:30:16.570
> 
> 标签：.net, linq, lambda

今天我终于“得到”了[`Func<>`](http://msdn.microsoft.com/en-us/library/bb549151.aspx)委托，并看到了如何使用它来使我的一些可读性较差的 LINQ 查询（希望如此）更具可读性。

这是一个简单的代码示例，以（非常）简单的示例说明了上述内容

```
List<int> numbers = new List<int> { 1, 5, 6, 3, 8, 7, 9, 2, 3, 4, 5, 6, };

// To get the count of those that are less than four we might write:
int lessThanFourCount = numbers.Where(n => n < 4).Count();

// But this can also be written as:
Func<int, bool> lessThanFour = n => n < 4;

int lessThanFourCount = numbers.Where(lessThanFour).Count(); 
```

其他人可以给出他们使用场景的任何例子`Func<>`吗？

（请注意，我不提倡`Func<>`在如上所示简单的场景中使用，这只是一个示例，希望能够使功能`Func<>`清晰。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-30T11:35:53.500

我想只有在你打算在许多地方重用有问题的 Func 时才有意义（而且它涉及的不仅仅是微不足道的逻辑）。否则使用标准方式似乎更好并且完全可读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T11:46:34.970

只有当/如果您重用它时，它才真正更具可读性/有用。

一个更有趣的 Lambda 可以传递和使用，`Expression<Func<int,bool>>`因为您仍然可以在需要时调用它，但您也可以将它完全拆开并修补它。

它......好吧......死性感。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T12:19:03.410

我正在使用 Func 和 Action 委托来处理异常。我经常发现自己一遍又一遍地构建相同的 try-catch 块，因为我让它们尽可能短。Delegate 和 Action 可以减少 try-catch 代码重复。

一个非常简单的例子是：

```
...    
DoSomethingPotentiallyBad((x) => x * 2, 0); // both delegates do
DoSomethingPotentiallyBad((x) => 2 / x, 0); // something different ... 
...

    static int DoSomethingPotentiallyBad(Func<int, int> function, int input)
    {
      // ... but get exception handled all the same way  
      try
        {
            return function.Invoke(input);
        }
        catch
        {
            Console.WriteLine("Evaluation failed! Return 0.");
            return 0;
        }
    } 
```

这个例子是非常人为的，并没有显示它的威力。但是假设您有类似数据库操作的东西，并且您想重试每个失败的数据库操作 5 次（这涉及使用标志、finally 块和 while 循环）并且想要*相同*的应用程序范围的日志记录，那么您只有一个放置 try-catch 块的地方：它是方法，它以 Func 或 Action 委托作为参数。处理业务逻辑的代码几乎没有那些 try-catch-blocks，因此更具可读性。

有关一些更高级的示例和更长的描述，请查看： [Action Policy](http://abdullin.com/journal/2008/11/29/what-is-an-action-policy.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T11:34:31.943

我通常只在我想重用委托时才这样做。否则，不经常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T14:11:20.043

如何`Func<>`在适当的时候在您自己的方法中接受一个参数，以使它们更加灵活和可扩展？例如：

```
public static string ToDelimitedString<T>(
    this IEnumerable<T> source, Func<T, string> converter, string separator)
{
    // error checking removed for readability

    StringBuilder sb = new StringBuilder();
    foreach (T item in source)
    {
        sb.Append(converter(item));
        sb.Append(separator);
    }

    return (sb.Length > 0) ?
        sb.ToString(0, sb.Length - separator.Length) : string.Empty;
}

// ...

List<int> e1 = new List<int> { 1, 2, 3 };
// convert to "2|4|6"
string s1 = e1.ToDelimitedString(x => (x * 2).ToString(), "|");

DateTime[] e2 = new DateTime[]
    { DateTime.Now.AddDays(-100), DateTime.Now, DateTime.Now.AddDays(100) };
// convert to "Tuesday, Thursday, Saturday"
string s2 = e2.ToDelimitedString(x => x.DayOfWeek.ToString(), ", ");

List<MyCustomType> e3 = new List<MyCustomType>
    { new MyCustomType("x"), new MyCustomType("y"), new MyCustomType("z") };
// convert to "X and Y and Z"
string s3 = e3.ToDelimitedString(x => x.Name.ToUpper(), " and "); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T11:31:39.687

大多数时候不是。

# sql - 根据字段内容更改仅在一行上选择的 WHERE

> ID：696851
> 
> 赞同：0
> 
> 时间：2009-03-30T11:30:58.377
> 
> 标签：sql, tsql, select, multilingual, case

好的，这听起来可能有点奇怪，但我需要做的很简单。我有一份公司名单，每个公司都有描述。该网站有 4 种语言版本。当我用英文列出一家公司时，我的问题就出现了，但负责翻译它的法语的人仍然没有翻译，所以我有一个简单的：

```
SELECT TOP(6)
    company.name,
    company.description,
    company.address
WHERE
    langid=1
ORDER BY
    company.id DESC 
```

真正的查询更复杂，但我认为使用这个查询会更容易理解问题。我需要做的是，当 langid 2 中的描述为空时，请向我显示 langid 1，因为 langid 1 始终是第一个添加的。我不想将描述字段显示为空。

想象一下，第 1 行、第 2 行、第 3 行和第 5 行有 langid 2 的描述，但没有第 4 行和第 6 行。我需要为包含它的行显示 langid 2，但为没有描述的行显示 langid 1。

我知道我可以用 @i 字段递增并在临时表中一个一个地插入结果来做一段时间，但是有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-30T11:41:30.317

除非`lng1.name`缺少等（即英语/备用变体），否则这将起作用。

```
SELECT TOP(6) 
  COALESCE(lng2.name, lng1.name)               [name], 
  COALESCE(lng2.description, lng1.description) description, 
  COALESCE(lng2.address , lng1.address )       address
FROM 
  company lng1
  LEFT JOIN company lng2 ON 
    lng1.id     = lng2.id AND
    lng1.langid = 1 AND
    lng2.langid = 2  /* your "foreign language" id, e.g. a parameter */
WHERE
  lng1.id IN (1,2,3,4,5,6)  /* or whatever */
ORDER BY 
  lng1.id DESC 
```

如果仅缺少部分本地化变体，它也不会用英语/备用版本替换整个地址。只有缺少的部分将被替换。

# xml - 如何从 Silverlight 应用程序读取本地主机上的 XML 文件？

> ID：696852
> 
> 赞同：3
> 
> 时间：2009-03-30T11:31:07.067
> 
> 标签：xml, silverlight

我有带有**IIS7的****Vista**。

 **我想创建一个**从 localhost 读取 xml 文件**的简单 Silverlight 应用程序。

我创建了这个文件（我必须以管理员身份复制并单击“允许”）：

> **`C:\inetpub\wwwroot\data\customers.xml`**

当我在浏览器中访问时可以看到它：

> **`http://localhost/data/customers.xml`**

但是当我运行以下代码时，我得到一个**目标调用异常**：

```
using System;
using System.Net;
using System.Windows.Controls;
using System.IO;

namespace TestXmlRead234
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();

            WebClient client = new WebClient();
            client.OpenReadAsync(new Uri("http://localhost/data/customers.xml", UriKind.Absolute));
            client.OpenReadCompleted += new OpenReadCompletedEventHandler(client_OpenReadCompleted);
        }

        void client_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
        {
            StreamReader myReader = new StreamReader(e.Result);
            Output.Text = myReader.ReadLine();
            myReader.Close();
        }
    }
} 
```

所以我创建了**`C:\inetpub\wwwroot\crossdomainpolicy.xml`**：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
    <cross-domain-access>
        <policy >
            <allow-from http-request-headers="Content-Type">
                <domain uri="*"/>
            </allow-from>
            <grant-to>
                <resource path="/" include-subpaths="true"/>
            </grant-to>
        </policy>
    </cross-domain-access>
</access-policy> 
```

但我仍然得到**目标调用异常**错误。

这是完整的内部异常：

> {System.Security.SecurityException ---> System.Security.SecurityException: Sicherheitsfehler bei System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) bei System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClass5.b__4(Object sendState) bei System.Net.Browser.AsyncHelper.<>c__DisplayClass2.b__0(Object sendState) --- Ende der internen Ausnahmestapelüberwachung --- 在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 上 System.Net.Browser .BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) bei System.Net.WebClient.GetWebResponse(WebRequest request, IAsyncResult result) bei System.Net.WebClient.OpenReadAsyncCallback(IAsyncResult result)}

**更新 1：**在 Windows 资源管理器中，然后我右键单击**`C:\inetpub\wwwroot\data`**并使 IIS_USERS 成为该目录的共同所有者。但仍然得到同样的错误。:-(

**更新 2：**也使“每个人”成为 的共同所有者 **`C:\inetpub\wwwroot\data`**，同样的错误。:-(

**更新3：**以管理员身份打开命令窗口并执行此命令：netsh http add urlacl url= [http://+:80/](http://+:80/) user=MYDOMAIN\MyUserName

**我还需要什么才能从 Silverlight 应用程序从 localhost 读取文本文件？**

# 务实的回答：

对于本地测试，只需发布​​到您甚至不需要跨域文件的临时 localhost 网络服务器端口，然后在实时发布时进行必要的更改：

```
using System;
using System.Linq;
using System.Net;
using System.Windows.Controls;
using System.IO;
using System.Xml.Linq;

namespace TestWeb124
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();

            WebClient wc = new WebClient();
            wc.OpenReadAsync(new Uri("http://localhost:49512/customers.xml", UriKind.Absolute));
            wc.OpenReadCompleted += wc_OpenReadCompleted;
        }

        private void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
        {
            if (e.Error != null)
            {
                Output.Text = e.Error.Message;
                return;
            }
            using (Stream s = e.Result)
            {
                XDocument doc = XDocument.Load(s);
                Output.Text = doc.ToString(SaveOptions.OmitDuplicateNamespaces);
                var customers = from c in doc.Descendants("customer")
                                select new
                                {
                                    FirstName = c.Element("firstName").Value
                                };

                foreach (var customer in customers)
                {
                    Output.Text += customer.FirstName;
                }

            }
        }        

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T11:33:58.277

[使服务跨域边界可用](http://msdn.microsoft.com/en-us/library/cc197955%28VS.95%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T16:31:32.133

据我所见，通常的行为是创建一个可以完全解决 Silverlight 跨域问题的 Web 服务，然后让 Silverlight 代码通过该 Web 服务进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T11:39:16.220

尝试删除属性`http-request-headers="Content-Type"`，我不确定那是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T11:48:51.580

我在从 Silverlight 应用程序访问本地 IIS 上的页面时遇到了类似的问题。我最终配置了一个 HTTP 代理以查看发生了什么。在我的情况下，Silverlight 正在发送对 crossdomainpolicy.xml 的请求，并且 IIS 正确地返回了它，所以肯定没有 ACL 问题，但由于某种原因，Silverlight 不会接受它。

在尝试了 crossdomainpolicy 文件中的无数选项后，我决定测试一下 Silverlight 也理解的 Flash crossdomain.xml 策略文件的替代选项，并且它第一次工作。

可能对你有用。

```
<?xml version=""1.0""?>
<!DOCTYPE cross-domain-policy SYSTEM ""http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd"">
<cross-domain-policy>
    <allow-http-request-headers-from domain=""*"" headers=""*""/>
</cross-domain-policy> 
```

编辑：要尝试这一点，您需要删除 crossdomainpolicy.xml 文件，因为 Silverlight 会首先请求该文件，如果发现它不会请求 crossdomain.xml。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-07T04:27:34.020

您的 xml 格式不正确，并且在顶部附近有一个额外的 > 。

# c# - WinForms 中的下拉绑定

> ID：696864
> 
> 赞同：5
> 
> 时间：2009-03-30T11:35:48.787
> 
> 标签：c#, .net, winforms, data-binding

想象一下这两个类：

```
class Part
{
 public string Name { get; set;}
 public int Id { get; set; }
}

class MainClass
{
 public Part APart { get; set;}
} 
```

如何将 MainClass 绑定到 WinForm 上的组合框，使其显示 Part.Name ( `DisplayMember = "Name";`) 并且组合的选定项设置 MainClass 的 APart 属性，而无需处理下拉列表中的任何事件。

据我所知，将 ComboBox 的 ValueMember 设置为“Id”意味着它将尝试将 APart 设置为一个不正确的数字 (Id)。

希望这足够清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T12:40:47.117

您正在寻找的是让`ValueMember`(= `ComboBox.SelectedItem`) 成为对对象本身的引用，而`DisplayMember`它是项目的单个属性，对吗？`ComboBox`据我所知，由于方式`ValueMember`和`DisplayMember`工作的原因，如果不创建自己的绑定并自己进行绑定，就没有好方法。

*但是，您可以*尝试以下几件事（假设您在`Part`某处有 s 的集合）：

1.  覆盖 `Part` 的 `ToString()` 方法以返回 `Name` 属性。然后将 `ComboBox` 的 `ValueMember` 设置为 `"APart"` 并将 `DisplayMember` 留空。（未经测试，所以不能保证）
2.  您可以在 Part 中创建一个新属性以返回对自身的引用。将“ValueMember”设置为新属性，将“DisplayMember”设置为“名称”。它可能感觉有点像黑客，但它应该可以工作。
3.  用你的 `APart` getter 和 setter 做有趣的事情。你会失去一些强类型，但是如果你将 `APart` 设为一个对象并且 `MainClass` 包含 `Part` 的集合，你可以通过 `Id` (`int`) 或 `Part` 来设置它。（显然，当您将 ComboBox 绑定到它时，您会希望通过 Id 设置它。）

```
Part _APart;
object APart 
{ 
    get {return _APart;}
    set {
        if(value is int)
            _APart = MyPartCollection.Where(p=>p.Id==value).Single();
        else if(value is Part)
            _APart = value;
        else
            throw new ArgumentException("Invalid type for APart");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T12:39:42.893

我做了一点研究，发现[这篇文章](http://www.codeproject.com/KB/cs/ObjectBindingSource.aspx)作者已经能够通过扩展标准绑定源组件来绑定到嵌套属性。
我已经尝试过了，它似乎工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T13:31:39.930

如果将组合框的 ValueMember 设置为 null，则数据绑定将返回选定的项目（即 Part 实例）而不是指定的成员。将 DisplayMember 设置为“名称”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-31T04:00:09.030

创建一个支持类来保存“信息”，并为所有数据创建属性。然后在该类上实现 System.ComponentModel.INotifyPropertyChanged，例如：

```
private String _SelectedPart = String.Empty; 

public String SelectedPart 
{
   get  
   {   
      return _SelectedPart;   
   }  
   set   
   {            
      if (_SelectedPart != value)  
      {
         _SelectedPart  = value;   

         // helper method for handing the INotifyPropertyChanged event
         PropertyHasChanged(); 
      }
   }
} 
```

然后为该类创建一个“ObjectDataSource”（VS2008 中的 Shift-Alt-D 将在查看表单时显示它），然后单击您的 ComboBox 并设置以下属性：

DataSource，设置为刚刚创建的 ObjectDataSource “BindingSource”。DisplayMember，设置为部件列表 ValueMember 的 Name 属性，设置为部件列表 DataBindings.SelectedValue 的 ID 成员，设置为刚刚创建的“BindingSource”上的 SelectedPart。

我知道上面的内容听起来很复杂，并且可能需要一些时间才能找到我刚刚描述的所有部分（希望我可以提供教程或屏幕截图），但是一旦你习惯了它，它真的非常快。

顺便说一句，这在 .NET 中被认为是“数据绑定”，并且有一些很好的教程可以为您提供更多信息。

# sql - 如何加入（合并？）几个表？

> ID：696866
> 
> 赞同：0
> 
> 时间：2009-03-30T11:36:20.347
> 
> 标签：sql, sql-server, join, merge

我有三张桌子

```
AUTHOR_TABLE
-------------
AUTHOR_ID (PK)   AUTHOR_NAME   
1                me
2                you 

ARTICLE_AUTHOR_TABLE
-------------
AUTHOR_ID  ARTICLE_ID  
1          100
2          101

EVENT_AUTHOR_TABLE
------------------------------------------
AUTHOR_ID   EVENT_ID  
1           200
1           201 
```

我想要的只是

```
RESULTS
-----------------------------------------
AUTHOR_ID AUTHOR_NAME SOURCE_TABLE ID
1         me          article      100
2         you         article      101
1         me          event        200
1         me          event        201 

/* where SOURCE_TABLE would be either "EVENT" or "ARTICLE" */ 
```

**编辑我真的不想要这个**

```
RESULTS
-----------------------------------------
AUTHOR_ID AUTHOR_NAME EVENT_ID ARTICLE_ID
1         me          NULL         100
2         you         NULL         101
1         me          200         NULL
1         me          201         NULL 
```

任何指针表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T11:39:46.483

```
SELECT
  at.author_id,
  at.author_name,
  'article' AS source_table,
  aat.id
FROM
  author_table at
  JOIN article_author_table aat
    ON at.author_id = aat.author_id

UNION ALL

SELECT
  at.author_id,
  at.author_name,
  'event' AS source_table,
  eat.id
FROM
  author_table at
  JOIN event_author_table eat
    ON at.author_id = eat.author_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T11:39:14.537

```
SELECT A.AUTHOR_ID, A.AUTHOR_NAME, EA.EVENT_ID, AA.ARTICLE_ID
FROM AUTHOR_TABLE AS A
    LEFT JOIN ARTICLE_AUTHOR_TABLE AS AA ON AA.AUTHOR_ID = A.AUTHOR_ID
    LEFT JOIN EVENT_AUTHOR_TALBE AS EA ON EA.AUTHOR_ID = A.AUTHOR_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T11:40:53.907

由于这是家庭作业，而且我猜您正在使用 MySQL，[请阅读有关 UNION 语法的文档](http://dev.mysql.com/doc/refman/5.0/en/union.html)。您所做的基本上是从相似的数据库中执行两个（或更多）查询并在一个查询中获取结果。

请注意，生成的列需要相同。

您还可以创建变量来显示您从哪个表调用。

```
SELECT AUTHOR_ID, AUTHOR_NAME, `AUTHOR_TABLE` AS SOURCE_TABLE, ID FROM AUTHOR_TABLE 
```

您这样做会影响所有联合，但会更改表名。

# python - 在python中填充列表

> ID：696874
> 
> 赞同：4
> 
> 时间：2009-03-30T11:39:52.850
> 
> 标签：python, list, tuples

我有一系列代表坐标的 Python 元组：

```
tuples = [(1,1), (0,1), (1,0), (0,0), (2,1)] 
```

我想创建以下列表：

```
l = []
for t in tuples:
  l[ t[0] ][ t[1] ] = something 
```

我得到一个 IndexError: list index out of range。

我的背景是 PHP，我希望在 Python 中您可以创建以 index > 0 开头的列表，即创建空白然后填充它们，但似乎您不能。

我们的想法是在之后对列表进行排序。我知道我可以用字典来做到这一点，但据我所知，字典不能按键排序。 **更新**：我现在知道他们可以 - 查看接受的解决方案。

编辑：我想要做的是创建一个二维数组，它将表示用元组坐标描述的矩阵，然后按顺序迭代它。如果我使用字典，我无法保证对键的迭代将按顺序进行 -> (0,0) (0,1) (0,2) (1,0) (1,1) (1,2 ) (2,0) (2,1) (2,2)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-30T11:46:32.850

不，您不能创建有间隙的列表。但是您可以使用元组键创建字典：

```
tuples = [(1,1), (0,1), (1,0), (0,0), (2,1)]
l = {}
for t in tuples:
    l[t] = something 
```

**更新：** 尝试使用[NumPy](http://numpy.scipy.org/)，它提供了对矩阵和数组的广泛操作。引用站点上可用的 NumPy 上的免费 pfd（3.4.3 平面迭代器索引）：*“如前所述，X.flat 返回一个迭代器，它将迭代整个数组（以 C 连续样式，最后一个索引变化最快"* . 看起来像你需要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-30T11:45:52.507

您应该查看 dicts 的类似内容。

```
for t in tuples:
  if not l.has_key(t[0]):
    l[t[0]] = {}
  l[t[0]][t[1]] = something 
```

不过，迭代 dict 与迭代列表有点不同。您将拥有 keys()、values() 和 items() 函数来帮助解决这个问题。

编辑：尝试这样的订购：

```
for x in sorted(l.keys()):
   for y in sorted(l[x].keys()):
       print l[x][y] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T11:51:14.430

您创建一个一维列表`l`并希望将其用作二维列表。这就是您收到索引错误的原因。

您有以下选择：创建一个映射并使用元组 t 作为索引：

```
l = {}
l[t] = something 
```

您将在 l 中获得以下条目：

```
{(1, 1): something} 
```

如果您想要传统的数组结构，我建议您查看[numpy](http://www.numpy.org/)。使用 numpy，您可以获得具有“传统”索引的 n 维数组。

正如我提到的使用numpy，

使用 numpy，您可以创建一个二维数组，用零或一填充，或者...您可以根据需要使用索引 [x,y] 填充任何所需的值。当然，您可以将行和列或整个数组作为列表进行迭代。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T12:03:53.383

如果你事先知道你的尺寸，你可以制作一个这样的列表列表

```
>>> x = 3
>>> y = 3
>>> l = [[None] * x for i in range(y)]
>>> l
[[None, None, None], [None, None, None], [None, None, None]] 
```

然后您可以像最初建议的那样对其进行迭代。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T12:10:48.780

扩展[Nathan](https://stackoverflow.com/questions/696874/populate-a-list-in-python/696925#696925)的答案，

```
tuples = [(1,1), (0,1), (1,0), (0,0), (2,1)]
x = max(tuples, key = lambda z : z[0])[0] + 1
y = max(tuples, key = lambda z : z[1])[1] + 1
l = [[None] * y for i in range(x)] 
```

然后你可以做任何你想做的事

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-30T12:33:12.363

“但据我所知字典不能按键排序”到底是什么意思？

虽然这与“排序字典”并不严格相同，但您*可以*轻松地将字典转换为按键排序的列表，这似乎是您所追求的：

```
>>> tuples = [(1,1), (0,1), (1,0), (0,0), (2,1)]
>>> l = {}
>>> for t in tuples:
...    l[t] = "something"
>>> sorted(l) # equivalent to sorted(l.keys())
[(0, 0), (0, 1), (1, 0), (1, 1), (2, 1)]
>>> sorted(l.items()) # make a list of (key, value) tuples, and sort by key
[((0, 0), 'something'), ((0, 1), 'something'), ((1, 0), 'something'), ((1, 1), 'something'), ((2, 1), 'something')] 
```

（我变成`something`字符串“something”只是为了让代码工作）

但是，要在您的情况下使用它（如果我理解正确的话），您仍然需要为字典填充 None 值或每个“空”坐标元组的东西）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-30T11:51:00.140

如前所述，您不能制作带有空格的列表，而字典可能是这里更好的选择。诀窍是确保`l[t[0]]`在您将某物放置到位时存在`t[1]`。为此，我会使用[defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict:)。

```
import collections
tuples = [(1,1), (0,1), (1,0), (0,0), (2,1)]
l = collections.defaultdict(dict)
for t in tuples:
    l[t[0]][t[1]] = something 
```

由于`l`是 defaultdict，如果`l[t[0]]`不存在，它将创建一个空 dict 供您放入`something`at position `t[1]`。

注意：这最终与@unwesen 的答案相同，没有手动检查内部字典是否存在的小麻烦。将其归结为并发回答。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-30T12:38:32.770

给出的 dict 解决方案可能最适合大多数用途。对于按顺序遍历键的问题，通常您会遍历*坐标空间*，而不是 dict 键，这与您对列表列表的方式完全相同。使用 .get ，您可以指定用于空白单元格的默认值，或者使用“ `collections.defaultdict`”在创建字典时定义默认值。例如。

```
for y in range(10):
    for x in range(10):
        value = mydict.get((x,y), some_default_value)
        # or just "value = mydict[x,y]" if used defaultdict 
```

如果您确实需要一个实际的列表列表，您可以直接构建它，如下所示：

```
max_x, max_y = map(max, zip(*tuples))
l=[[something if (x,y) in tuples else 0 for y in range(max_y+1)] 
     for x in xrange(max_x+1)] 
```

如果元组列表可能很长，出于性能原因，您可能希望使用集合进行查找，因为 " `(x,y) in tuples`" 执行列表扫描，而不是通过散列进行快速查找。即，将第二行更改为：

```
tuple_set = set(tuples)
l=[[something if (x,y) in tuple_set else 0 for y in range(max_y+1)] 
     for x in xrange(max_x+1)] 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-03-30T11:47:47.993

我认为您只声明了一个一维列表。

我认为您将其声明为

```
l = [][] 
```

* * *

**编辑**：这是一个语法错误

```
>>> l = [][]
  File "<stdin>", line 1
    l = [][]
           ^
SyntaxError: invalid syntax
>>> 
```

# css - 如何让多个样式表在单个页面上工作？

> ID：696879
> 
> 赞同：1
> 
> 时间：2009-03-30T11:42:19.910
> 
> 标签：css, layout, html

这是情况。

1.  我为我目前正在处理的三个页面中的每个页面制作了三个样式表。一种适用于 IE8/Safari/Opera/Firefox。一种适用于 IE7，另一种适用于 IE6

2.  我在 www.xenocode.com/browsers 和该站点的 IE 6 和 7 模拟器上测试了所有内容。

3 我使用了文章建议的变体来使所有工作表都能正常工作。（在该部分：

[http://www.thesitewizard.com/css/excludecss.shtml](http://www.thesitewizard.com/css/excludecss.shtml)

问题是，虽然它为 IE 8 和 IE 7 在线调用了正确的 css（它直接在我的计算机上工作得很好），它似乎无法正确地在线调用 IE6 的代码，导致布局被搞砸了在 IE 6 中（或者至少是 xenocode.com 上的模拟器。

有没有更好的方法？

（无法向您展示整页，因为我的客户坚持在项目完成之前不展示它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T11:50:11.873

假设您正在使用浏览器条件语句...

我会检查您使用的模拟器是否能够解释浏览器条件语句。如果不确定，您总是可以禁用所有其他样式表并正常链接（使用链接标记）到 IE6 样式表，然后测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T12:21:10.410

您可以将这些 css 选择标签用于 IE 的特定浏览器版本。

```
<!--[if IE 6]><link rel="stylesheet" type="text/css" href="/css/ie60.css" /><![endif]-->
<!--[if IE 5.5000]><link rel="stylesheet" type="text/css" href="/css/ie55.css" /><![endif]-->
<!--[if lt IE 5.5000]><link rel="stylesheet" type="text/css" href="/css/ie50.css" /><![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T11:47:15.983

你想拥有[IE6 特定的 CSS](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)吗？另外，请考虑使用[Microsoft SuperPreview](http://www.microsoft.com/expression/try-it/superpreview/)在本地查看您的设计在各种版本的 IE6 中的外观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-12T16:38:29.060

[http://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)

我喜欢这个东西，因为它让我可以为不同的浏览器/操作系统详细定义我想要的所有更改。

# visual-studio-2008 - 是否可以用 VS2008 创建解决方案模板？

> ID：696882
> 
> 赞同：1
> 
> 时间：2009-03-30T11:44:47.953
> 
> 标签：visual-studio-2008

我正在尝试在网上查找有关如何制作*解决方案*模板的示例。一切都会导致*项目*模板的示例，这对我来说还不够好。我正在寻找一个解决方案模板，因为我有许多项目我希望放入同一个解决方案并制作一个模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T13:33:09.333

[Guidance Automation Toolkit](http://msdn.microsoft.com/en-us/teamsystem/aa718948.aspx)可用于创建解决方案模板。例如，[服务工厂](http://www.codeplex.com/servicefactory)就是这样完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T11:49:14.277

您的意思是[http://www.codeplex.com/treesurgeon](http://www.codeplex.com/treesurgeon)之类的东西，但是使用您的自定义解决方案方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-08T07:17:49.660

您可以在项目模板中尝试以下操作：

```
 <TemplateContent>
    <ProjectCollection>
      <ProjectTemplateLink ProjectName="$projectname$.BusinessLogic" >.\Project.BusinessLogic\MyTemplate.vstemplate</ProjectTemplateLink>
      <ProjectTemplateLink ProjectName="$projectname$.DataAccess">.\Project.DataAccess\MyTemplate.vstemplate</ProjectTemplateLink>
    </ProjectCollection>
  </TemplateContent> 
```

这是您的主模板，然后您需要模板中具有自己模板的文件夹。

# eclipse-pde - 启动 eclipse 时出现错误（MESSAGE 发生处理程序冲突。这可能会禁用某些命令）

> ID：696887
> 
> 赞同：1
> 
> 时间：2009-03-30T11:46:36.577
> 
> 标签：eclipse-pde

我在 eclipse 3.3.2 中开发了一个插件（RMP），我在其中动态创建菜单项。我运行了该应用程序，它运行良好，并且能够看到动态创建的菜单项。

现在我导出了这个插件（RMP）。我在 eclipse 3.4 安装的插件文件夹中添加了这个。现在我启动了 eclipse，我可以看到我的插件（RMP）中实现的所有功能，但是动态创建的菜单项是不可见的。当我点击菜单时，什么都没有。
请在下面找到错误日志以获取更多信息。我从我的`workspace -> .metadata`文件夹中取出了这个日志。

```
Log:
!ENTRY org.eclipse.ui.workbench 2 0 2009-03-30 11:59:23.266
!MESSAGE A handler conflict occurred.  This may disable some commands.
!SUBENTRY 1 org.eclipse.ui.workbench 2 0 2009-03-30 11:59:23.267
!MESSAGE Conflict for 'AUTODCTOOL':
HandlerActivation(commandId=AUTODCTOOL,
    handler=ActionDelegateHandlerProxy(null,com.ericsson.eadt.apstoolsintegrator.actions.APSToolAction),
    expression=AndExpression(ActionSetExpression(APSToolsIntegrator.APSSystemFullSet,org.eclipse.ui.internal.WorkbenchWindow@166c114),WorkbenchWindowExpression(org.eclipse.ui.internal.WorkbenchWindow@166c114)),sourcePriority=16640)
HandlerActivation(commandId=AUTODCTOOL,
    handler=ActionDelegateHandlerProxy(null,com.ericsson.eadt.apstoolsintegrator.actions.APSToolAction),
    expression=AndExpression(ActionSetExpression(APSToolsIntegrator.APSSystemFullSet,org.eclipse.ui.internal.WorkbenchWindow@166c114),WorkbenchWindowExpression(org.eclipse.ui.internal.WorkbenchWindow@166c114)),sourcePriority=16640)
!SUBENTRY 1 org.eclipse.ui.workbench 2 0 2009-03-30 11:59:23.267
!MESSAGE Conflict for 'BTIDRIVER':
HandlerActivation(commandId=BTIDRIVER,
    handler=ActionDelegateHandlerProxy(null,com.ericsson.eadt.apstoolsintegrator.actions.APSToolAction),
    expression=AndExpression(ActionSetExpression(APSToolsIntegrator.APSSystemFullSet,org.eclipse.ui.internal.WorkbenchWindow@166c114),WorkbenchWindowExpression(org.eclipse.ui.internal.WorkbenchWindow@166c114)),sourcePriority=16640)
HandlerActivation(commandId=BTIDRIVER,
    handler=ActionDelegateHandlerProxy(null,com.ericsson.eadt.apstoolsintegrator.actions.APSToolAction),
    expression=AndExpression(ActionSetExpression(APSToolsIntegrator.APSSystemFullSet,org.eclipse.ui.internal.WorkbenchWindow@166c114),WorkbenchWindowExpression(org.eclipse.ui.internal.WorkbenchWindow@166c114)),sourcePriority=16640) 
```

在这方面请求帮助，在此先感谢。

斯内哈尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T12:33:54.420

尝试使用该`-clean`选项启动 eclipse3.4。

If a `-clean` is not enough, the problem lies in the definition of `com.ericsson.eadt.apstoolsintegrator.actions.APSToolAction`.

If it is an [action set](https://stackoverflow.com/questions/552435/eclipse-rcp-actions-vs-commands), check its definition: a keybinding used might be in conflict with legacy eclipse3.4 keys definition.

# c# - C# 中的进度监视器实现

> ID：696895
> 
> 赞同：2
> 
> 时间：2009-03-30T11:50:58.750
> 
> 标签：c#, .net, progress-bar

在 Eclipse 中，我看到了 IProgressMonitor 的实现——它随后也在 SharpDevelop 中，但我不确定它是如何工作的。其他地方有没有这样的例子可能更容易理解？

我想要实现的是一种通过一个进度条跟踪一堆任务（从 20 分钟到 5 秒变化很大）进度的方法（可以在任何时间点添加任务）。

这样的事情会是一个很好的选择/想法吗？

```
interface ITask
{
    int TotalWork; // ProgressMax
    event Progresschanged; // Notifies of the current progress
    event ProgressComplete;
} 
```

然后“监视器”简单地使用观察者模式来监视这两个事件。当所有进度条完成后，它将隐藏进度条。另一个问题是这些是正在产生的单独线程。

任何人都可以就某事给我建议或带领我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-25T16:05:06.237

维护一份任务清单，并根据它们的整体贡献来衡量它们；

```
struct Task { int work, progress  }
class OverallProgress
{
    List<Task> tasks;
    int Work { get { return tasks.Sum(t=>t.work; } }
    int Progress { get { return tasks.Sum(t=>t.progress/t.work); } }
    void AddTask(Task t) { tasks.Add(t); }
} 
```

这个实现只是为了**说明这个概念**。

是的，这个实现效率不高。您可以存储计算`Work`结果，以便仅在添加新任务时重新计算它。

是的，您可能会因进行整数除法而失去精度。你也必须连接你自己的事件。

如果您对这些任务有疑问，请提及，我或其他人可以提供此类的完整实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T18:38:34.667

System.Component.BackgroundWorker 处理进度通知。我会生成多个 BG 工作人员，并让他们向 UI 线程上的单个方法报告。然后，您可以更新进度条。

# php - 如何使用 PHP Simple Mail 控制电子邮件的生命周期（传输时间）？

> ID：696900
> 
> 赞同：-2
> 
> 时间：2009-03-30T11:52:39.450
> 
> 标签：php, email

我正在使用 PHP 中的简单邮件。现在我打算知道一封电子邮件的生命周期。

如果用户希望在提交表单后一天发送电子邮件，我该如何在 PHP 中实现呢？

```
$headers =  'From: '.$Name.''. "\r\n" .
    'Reply-To: '.$_POST['email'].'' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();
$subject = "Subject";
$message = "Message";       
mail($to, $subject, $message, $headers); 
```

我需要包含一个标题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T11:57:33.477

您要做的是指定发送电子邮件的时间。将其与电子邮件地址、主题、消息和标题一起保存在数据库中。

然后创建一个 cronjob，每隔几分钟检查一次数据库，看看是否应该发送任何电子邮件。如果是这样，该 PHP 文件（cronjob 执行）将发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T11:58:59.060

我认为您没有办法在发送消息时设置消息的传递日期。

您可以将电子邮件消息保存在数据库中并每天运行一个 cron 作业来检查当天必须发送的电子邮件并发送它们。

电子邮件的生命周期不同。例如，如果您发送了一封电子邮件，但由于某种原因没有发送邮件，它将排队。服务器会在一段时间后尝试发送邮件，如果无法发送邮件，服务器将删除电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-30T20:30:33.090

正如其他人所说，您需要将邮件放入数据库，然后从那里发送。[Pear Mail_Queue](http://pear.php.net/mail_queue)非常易于使用，您可以随意运行发送过程，或者更好的是，通过一些 cron 作业（或者保持运行，如果您想尽快发送它，可以使用一些 'sleep(10)'时间到了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T11:58:03.587

可能您应该将电子邮件存储在数据库中。然后您可以通过某种周期性脚本（cron 等）发送电子邮件。

# windows - 什么可能导致应用程序和系统变慢？

> ID：696904
> 
> 赞同：4
> 
> 时间：2009-03-30T11:56:00.860
> 
> 标签：windows, performance, debugging, winapi, profiling

我正在调试一个严重减慢**系统速度的应用程序。**应用程序从本地硬盘加载大量数据（大约 1000 个文件，每个半 MB）。这些文件作为内存映射文件加载，并且仅在需要时进行映射。这意味着在任何给定时间点，虚拟内存使用量都不会超过 300 MB。

我还使用 sysinternals 中的 handle.exe 检查了句柄计数，发现最多打开了大约 8000 个奇数句柄。卸载数据时，它会下降到 400 左右。每次加载和卸载操作后都没有句柄泄漏。

在 2-3 次加载卸载循环之后，在一次加载期间，系统变得非常缓慢。我检查了应用程序的虚拟内存使用情况以及此时的句柄计数，它完全在限制范围内（VM 大约 460MB 也没有太多碎片，句柄计数 3200）。

我想要一个应用程序如何使系统响应很慢？我可以使用哪些其他工具来调试此场景？

让我更具体地说，当我的意思是系统时，整个窗口都在变慢。任务管理器本身需要 2 分钟才能启动，并且通常需要硬重启

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-05T01:37:56.870

整个系统变慢的事实非常烦人，这意味着您无法轻松附加分析器，这也意味着甚至很难停止分析会话以查看结果（因为您说它需要硬重启）。

在这种情况下，最适合这项工作的工具是 ETW（Windows 事件跟踪），这些工具非常棒，可以为您提供您正在寻找的确切答案

在这里查看它们

[http://msdn.microsoft.com/en-us/library/cc305210.aspx](http://msdn.microsoft.com/en-us/library/cc305210.aspx) 和 [http://msdn.microsoft.com/en-us/library/cc305221.aspx](http://msdn.microsoft.com/en-us/library/cc305221.aspx) 和 [http://msdn.microsoft.com/ zh-CN/性能/default.aspx](http://msdn.microsoft.com/en-us/performance/default.aspx)

希望这有效。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:17:17.597

此时您可以使用的工具：

*   性能监视器
*   事件查看器

以我的经验，当系统发生阻止任务管理器弹出的事情时，它们通常属于硬件种类 - 检查事件查看器的系统事件日志有时只是充满警告或某些硬件设备正在计时的错误出去。

如果事件查看器没有表明任何类型的可记录硬件错误导致速度变慢，那么试试 Perfmon——为系统对象添加计数器以每秒跟踪文件读取、异常、上下文切换等，看看那里是否有明显的东西。

坦率地说，所展示的这种行为意味着用户模式代码不可能 - 按照设计 - 导致。WinNT 付出了很多努力来使应用程序相互隔离，并防止恶意应用程序使系统无法使用。所以我怀疑是某种硬件故障是罪魁祸首。您是否有机会在不同的 PC 上简单地运行相同的测试？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T12:28:59.470

如果您没有分析器，则可能必须手动完成相同的工作...

您是否尝试过注释掉所有读/写操作，只是为了检查减速是否消失？“分而治之”的策略将帮助您找到问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T12:50:57.657

如果你在 IDE 下运行它，运行它直到它变得非常慢，然后点击“暂停”按钮。你会在做任何需要花费大量时间的事情时抓住它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T12:15:58.893

您使用“IBM Rational Quantify”或“Intel VTune”之类的工具来检测性能问题。
[编辑]
就像 Benoît 所做的那样，一个好的方法是测量任务时间以确定哪个正在消耗 CPU。
但是请记住，由于您正在处理许多文件，因此很可能会丢失导致内存到磁盘交换的文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T15:49:41.453

当任务管理器需要 2 分钟才能启动时，您是否有很多磁盘活动？还是受cpu限制？

我会尝试来自 sysinternals 的进程资源管理器。当您的系统处于减速状态并且您尝试运行记事本时，请注意页面错误增量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-09T01:51:39.083

Windows 对缓存文件数据非常贪婪。我会尝试按照某人的建议删除文件 I/O，并确保在完成文件后立即关闭文件映射。I/O 可能导致您的速度变慢，特别是如果您的文件与操作系统位于同一磁盘上。另一种测试方法是将文件移动到另一个磁盘，看看是否能缓解问题。

# php - swiftmailer 电子邮件未送达

> ID：696906
> 
> 赞同：0
> 
> 时间：2009-03-30T11:56:52.747
> 
> 标签：php, email, swiftmailer

您好，我正在尝试使用 swiftmailer 4.0.3 版发送电子邮件。我得到一个返回码 2。似乎消息已发送，但它们没有到达。

我正在使用 sendmail 传输模式

```
$this->psTransport = Swift_SendmailTransport::newInstance('/usr/sbin/sendmail -t'); 
```

我得到一个返回码 2 并且没有异常发生。

有谁熟悉这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-23T18:13:43.113

SMTP 传输，Swift_SmtpTransport 无疑是最常用的传输，因为它可以在 99% 的 Web 服务器上运行。

这是一种更专业的方式来做你想做的事。请参阅文档：

[http://swiftmailer.org/docs/smtp-transport](http://swiftmailer.org/docs/smtp-transport)

SMTP 传输很简单，并且您的邮件更容易被接收者识别，因为不是您的网络服务器发送您的电子邮件，而是一个已经稳定的电子邮件服务器，具有已知和批准的 ip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T10:31:48.433

大多数情况下，使用 PHP 套接字发送邮件会受到远程 SMTP 服务器的惩罚并被检测为垃圾邮件。我曾多次遇到同样的问题。

我的建议是改用 SMTP 传输方法，并通过认可和验证的 SMTP 发件人服务器发送您的邮件。如果您每小时发送的消息不多，您甚至可以使用 GMail 服务器，我经常将它们用于测试和小型应用程序。

# perl - 如何确定连接在 mod_perl 中使用的 SSL 客户端证书？

> ID：696912
> 
> 赞同：6
> 
> 时间：2009-03-30T11:59:02.320
> 
> 标签：perl, ssl, https, mod-perl, client-certificates

我正在用 Perl 编写一个 Web 服务，它将在带有客户端证书的 SSL (HTTPS) 下运行。如何确定当前连接中客户端正在使用哪个证书，以便过滤掉不需要的证书？

注意：Web 服务作为 mod_perl 脚本运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-30T13:12:28.493

[在PerlMonks](http://www.perlmonks.org/)上找到答案：

使用[Apache::SSLLookup 模块](http://search.cpan.org/~geoff/Apache-SSLLookup-2.00_04/SSLLookup.pm)

```
 sub handler {
    my $r = Apache::SSLLookup->new(shift);
    my $request_is_over_ssl = $r->is_https;
    my $certificate = $r->lookup_var('SSL_CLIENT_CERT');

    ...
  } 
```

mod_ssl 环境参考[这里](http://eregie.premier-ministre.gouv.fr/manual/mod/mod_ssl/ssl_reference.html#ToC25)。

# php - Apache别名/目录问题

> ID：696916
> 
> 赞同：0
> 
> 时间：2009-03-30T11:59:54.470
> 
> 标签：php, apache

我正在运行 XAMPP - apache 2.2。我在[http://localhost/examplefolder中有 200 多个文件夹](http://localhost/examplefolder)

我已经购买了另一个硬盘来对文件夹进行负载平衡，现在我在 C:/xampp/htdocs/examplefolder 中有 100 多个文件夹，在 D:/examplefolder 中有另外 100 个文件夹。

如何指向两个目录，以便 200 多个文件夹出现在[http://localhost/examplefolder 中](http://localhost/examplefolder)？

我不希望它有不同的文件夹名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T13:19:26.307

答案取决于您的最终环境/应用程序。理想情况下，您应该尝试使用 RAID 0，它将透明地在两个硬盘之间分配您的文件夹，但是，您的应用程序将访问它们，就好像它们只是一个大硬盘驱动器一样。更重要的是，您应该考虑分布式文件系统。

[话虽如此，您可以使用mod_rewrite](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)实现您想要的。基本上，您将检查所请求的 URI 是否存在，如果存在，就让它通过。如果没有，您将重写*C:/xmpp/htdocs/examplefolder*部分以变为*D:/examplefolder*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-07T15:05:32.263

如果我可以澄清您想在一个“网络文件夹”中显示来自不同驱动器的两个文件夹的文件夹内容的问题，vHosts 不会让您到达您想去的地方？

您可以通过将第二个文件夹添加为**别名**来解决此问题，并在一个文件夹中包含 100+ 以及指向其他 100+ 的链接。

但是，我会质疑为什么要在一个“文件夹”中包含 100 多个文件夹，这会变得很混乱，而且我认为很难找到东西，除非这是用户结构或某种形式的组织：文件夹 az 等；

# wcf - WCF 异常 - 检索大型集合时“找不到服务”

> ID：696918
> 
> 赞同：0
> 
> 时间：2009-03-30T12:01:24.687
> 
> 标签：wcf, silverlight, web-services

我的 WCF 服务被 Silverlight 应用程序用来检索数据。我没问题

```
 [OperationContract]
MyCollectionClass GetList(int sessID, string name);

  [CollectionDataContract]
public class MyCollectionClass : List<MyClass>{ }

  [DataContract]
public class MyClass {

  [DataMember]
  public string Prop1 { get; set; }

  [DataMember]
  public string Prop2 { get; set; } 
```

}

但是..当 MyCollectionClass 的“记录”少于 3000 条时，它可以工作。当记录数较多时，WCF 服务似乎可以工作，但在 Silverlight 应用程序的已完成事件上发生异常：“未找到服务”。
我发现这可能与服务配置有关，我已经尝试使用两者：

```
maxBufferSize="2147483647"
maxReceivedMessageSize="2147483647" 
```

关于 WCF 和客户端配置。还补充说：

```
readerQuotas: 
  maxArrayLength="2000000" 
  maxStringContentLength="2000000"/> 
```

（也更改了找到的值）但似乎不起作用。我认为问题在于消息超出了每个“消息”的最大字节数，但我不明白为什么数据没有跨越不同的消息。
任何提示表示赞赏。

乔治奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:45:02.387

我有同样的问题，在我的情况下只是序列化一个字符串并且没有问题，但是在你的情况下你正在序列化一大堆对象，有一个默认限制，我记得我看过一篇关于这个的帖子（只是一个在配置中设置 --> maxItemsInObjectGraph) 以增加序列化对象的数量，

**链接**

[http://silverlight.net/forums/t/17674.aspx](http://silverlight.net/forums/t/17674.aspx) [http://forums.asp.net/t/1330713.aspx](http://forums.asp.net/t/1330713.aspx)

**设置：**

HTH布劳里奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T13:05:13.003

尝试在服务器端启用 wcf 服务日志记录。这可能会有所帮助：http: [//msdn.microsoft.com/en-us/library/ms730064.aspx](http://msdn.microsoft.com/en-us/library/ms730064.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T18:18:32.487

我在 InitializeComponent 之后立即使用这两个语句：

binding.MaxReceivedMessageSize = 5000000 binding.MaxBufferSize = 5000000

您可以将数字更改为您想要的，但我必须这样做才能在 Silverlgiht 客户端上接收大量数据。我的绑定对象定义为：

私有绑定作为新的 BasicHttpBinding

这是在 vb.net 中。包含这些物品后，它就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-05T17:57:59.247

我会看看[http://smehrozalam.wordpress.com/2009/01/29/retrieving-huge-amount-of-data-from-wcf-service-in-silverlight-application/](http://smehrozalam.wordpress.com/2009/01/29/retrieving-huge-amount-of-data-from-wcf-service-in-silverlight-application/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-29T19:20:24.480

我使用silverlight 4和vs 2010，我遇到了同样的问题，我解决了修改web.config文件。

我原来的 web.config 文件有：

```
<system.serviceModel>
   <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

我改变了它：

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <behaviors> 
         <serviceBehaviors> 
             <behavior> 
                 <serviceMetadata httpGetEnabled="true"/> 
                 <serviceDebug includeExceptionDetailInFaults="true"/> 
                 <dataContractSerializer maxItemsInObjectGraph="2147483647"/>  <!--this very is important: it is the size of the buffer-->
             </behavior> 
         </serviceBehaviors> 
     </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-01-13T04:43:33.250

我可以建议您减少要返回的记录数吗？不是作为解决方法，而是作为可用性建议。我无法想象任何用户都可以处理 3000 多条记录。如果您要从数据集中聚合值而不是在服务器端聚合它们，它将大大提高您的应用程序的性能......我在我的应用程序中遇到过几次这种情况，几乎总是比更改设计更好选项...

# c# - 您如何处理 C# 的新特性，以免它们导致编写糟糕的代码？

> ID：696919
> 
> 赞同：5
> 
> 时间：2009-03-30T12:01:50.690
> 
> 标签：c#, coding-style

C# 3.0 中引入了许多让我感到不安的特性，例如对象初始化器、扩展方法和隐式类型变量。现在在 C# 4.0 中，我越来越担心动态关键字之类的东西。

我知道这些功能中的每一个都**可以**以适当的方式使用，**但**在我看来，它们使开发人员更容易做出错误的编码决策，从而编写更糟糕的代码。在我看来，微软正试图通过使编码变得简单和不苛刻来赢得市场份额。就我个人而言，我更喜欢一种严谨的语言，它对我的​​编码标准提出了更高的要求，并迫使我以 OOP 方式构建事物。

以下是我对上述功能的担忧的几个例子：

对象构造函数可以执行不暴露给消费者的重要逻辑。这是在对象开发者的控制之下。对象初始化器取消了这种控制，并允许使用者决定初始化哪些字段。

编辑：我没有意识到你可以混合构造函数和初始化程序（我的错），但这在我看来开始变得混乱，所以我仍然不相信这是向前迈出的一步。

允许开发人员使用扩展方法扩展内置类型允许所有人开始将他们最喜欢的宠物方法添加到字符串类中，这可能会导致一系列令人眼花缭乱的选项，或者需要更多的编码标准来清除这些。

允许隐式类型变量允许快速而肮脏的编程而不是正确的 OOP 方法，这可能很快成为整个应用程序中难以管理的 vars 混乱。

我的担心有道理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-30T14:04:48.710

对象初始化器仅允许客户端在构造后立即设置属性，不会放弃控制，因为调用者仍必须确保满足所有构造函数参数。

我个人觉得他们添加的很少：

```
Person p1 = new Person("Fred");
p1.Age = 30;
p1.Height = 123;

Person p2 = new Person("Fred")
{
    Age = 30;
    Height = 123;
}; 
```

我知道很多人不喜欢 'var' 关键字。我可以理解为什么这是一种公开的滥用行为，但我不介意它的类型非常明显：

```
var p1 = new Person("Fred");
Person p2 = GetPerson(); 
```

在上面的第二行中，尽管有方法名称，但类型并不明显。在这种情况下，我会使用该类型。

扩展方法——我会非常谨慎地使用，但它们对于使用便捷方法扩展 .NET 类型非常有用，尤其是 IEnumerable、ICollection 和 String。String.IsNullOrEmpty() 作为扩展方法非常好，因为它可以在空引用上调用。

我认为您不必担心，优秀的开发人员总是会尊重地使用他们的工具，而糟糕的开发人员总是会想方设法滥用他们的工具：限制工具集并不能解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T14:21:32.103

您可以通过将限制写入编码标准来限制开发人员可以使用的 C# 3.0 功能。然后，在签入前审查代码时，应发现任何违反这些规则的代码并拒绝签入。一种这样的情况很可能是扩展方法。

显然，您的开发人员会想要使用新功能——所有开发人员都这样做。但是，如果你有很好的、有据可查的理由说明为什么不应该使用它们，那么优秀的开发人员会遵循它们。随着新信息的曝光，您还应该对修改这些规则持开放态度。

使用 VS 2008，您可以指定要定位的 .NET 版本（右键单击解决方案并选择属性 > 应用程序）。如果您将自己限制在 .NET 2.0 中，那么您将无法获得 .NET 3.5 中的任何新功能。显然，如果您想使用某些功能，这无济于事。

但是，我认为你的担心`vars`是没有根据的。C# 仍然像以往一样是强类型的。将某事声明为`var`简单地告诉编译器为该变量选择最佳类型。变量不能改变类型，它总是一个`int`或`Person`什么的。就我个人而言，我遵循与 Paul Ruane 相同的规则；如果从语法中可以清楚类型，则使用 a `var`; 如果没有明确命名类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T14:39:55.133

我看到你的立场是这样表达的：

> 构建一个任何傻瓜都可以使用的开发环境，你得到的是许多傻瓜开发的。

这是非常正确的，但相比之下我们其他人看起来不错。我认为这是一件好事。我见过的最有趣的帖子之一说

> VB不应被低估。它是一个非常强大的工具，可以让白痴远离这个 [C++] 新闻组。

更严重的是，工具是否危险取决于使用者的智慧。防止愚蠢的唯一方法是防止行动。`foreach`看起来无害，但您甚至无法在迭代集合时删除项目，因为删除项目会使迭代器无效。您最终会抛弃它们以支持经典的 for 循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T14:46:21.280

我认为你们中唯一真正合理的问题是过度使用扩展方法。当重要功能只能通过扩展方法访问时，有时组中的每个人都很难找到并使用该功能。

担心对象初始化器和“var”关键字似乎很挑剔。两者都是简单且可预测的语法，可用于使代码更具可读性，我不清楚您如何看待它们被“滥用”。

我建议您通过书面的、商定的编码标准来解决此类问题。如果没有人能想出充分的理由来使用新的语言特性，那么毕竟没有必要使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T14:04:01.647

对象初始化器只是花哨的语法。开发人员可以用它们做任何他以前不能做的事情 - 但是它们确实为您节省了几行代码。

如果“扩展内置类型”是指扩展方法 - 同样，这并不是什么新鲜事，只是更好的语法。这些方法是静态方法，*看起来*好像它们是成员。内置类保持不变。

Linq 需要隐式类型变量。我还将它们与具有大量类型参数的泛型一起使用。但我同意我不希望看到它们被专门使用。

当然，每个功能都可能被滥用，但我认为这些新功能实际上让您编写更易于阅读的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T14:33:20.390

关于 var 的一大缓解因素是它永远不能在作用域之间移动。它不能是返回类型或参数类型。在我看来，这使它更安全，因为它始终是紧密类型的，并且始终是一种方法的实现细节。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-30T14:39:40.453

引入新功能是因为 Microsoft 意识到它们对于实现新语言功能是绝对必要的。例如，像 LINQ。**因此，您可以使用相同的策略：1) 了解这些功能，2) 在您发现绝对必要之前**不要使用。

如果您真的了解这些功能，我敢打赌您很快就会觉得有必要。:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-30T20:59:24.220

至少对于“var”和初始化器，你并不能真正做任何新的事情，它只是一种新的写东西的方式。尽管看起来对象初始化器编译为稍微不同的 IL。

关于扩展方法，真正让我大吃一惊的一个角度是，您可以将它们放在接口上。这意味着一个类可以通过实现一个接口来继承具体的代码。而且由于一个类可以实现多个接口，这意味着，以一种迂回的方式，C# 现在有类似多重继承的东西。所以这是一个绝对应该小心处理的新功能。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-03-30T17:43:41.227

> 我的担心有道理吗？

不，这是对简单问题的简单回答的另一个版本。

# sharepoint - 将文件拖放到 SharePoint Webpart 中以上传到 DocLibrary

> ID：696923
> 
> 赞同：2
> 
> 时间：2009-03-30T12:02:42.107
> 
> 标签：sharepoint, asp.net-ajax, upload, document-library

是否可以创建一个 SharePoint（wss3 或 MOSS 2007）webpart，允许将文件拖放到它上面，然后将文件上传到预定义的文档库中？

我想这需要某种形式的客户端脚本（Ajax？），但我对 ajax 的了解有点粗略。

从我目前的探索来看，我在想：

1.  用户将文件拖到“放置区”Webpart 上。
2.  这个动作触发了一些代码
3.  此代码将文件加载到 SharePoint 库中（如下所示：[将文件上传到 SharePoint](https://stackoverflow.com/questions/468469/how-do-you-upload-a-file-to-a-document-library-in-sharepoint)）

任何指针将不胜感激

非常感谢。

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T12:07:21.537

好，

正如您所说，我要做的是一个带有 javascript 的 Web 部件，它允许用户将一些文件拖放到 Web 部件内的区域中。用户完成后，我将在单击 webpart 的按钮后上传这些文件。我认为最好在一个独特的事务中使用 SharePoint，而不是使用 AJAX 上传和删除文件。因此，拖放功能可以使用某种 javascript（如 Scriptaculous）和另一种 javascript（如经典回发）来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-07-19T15:04:49.447

您可能还想看看另一种方法来执行此操作。如果您在 Web 部件中执行此操作，则需要将该 Web 部件添加到您希望此功能起作用的每个站点中。您可能想尝试 Sharegate (www.share-gate.com)。它是一种最终用户工具，允许您将文件从计算机（或任何 SharePoint 列表/库）拖放到任何 SharePoint 库。通过将文档放入库中，您将被要求选择一个属性模板，您可以在其中定义附加到文档的所有属性。您不仅会拖放文档，还会同时构建信息。希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-31T02:06:56.073

也许我的回复与你的帖子有点无关！我觉得上传文件到SharePoint并不是一件苦差事，内置功能足以让我们上传文件。我认为，问题在于签入过程，可能是你应该做的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-12T10:36:13.860

Altought 现在可能不那么重要了，但是 CodePlex 现在有一个 SharePoint 插件，它允许通过拖放将文件上传到 SharePoint 文档库中。

可在此处获得： http: [//dndupload.codeplex.com/](http://dndupload.codeplex.com/)

在 Firefox 和 Chrome 中工作，使用来自 HTML5 的 FileApi，同时支持 SharePoint 2007 和 2010。

# c# - 将应用程序（win）的输出渲染到图像的 API 调用

> ID：696927
> 
> 赞同：0
> 
> 时间：2009-03-30T12:04:15.583
> 
> 标签：c#, .net, printing, screen, printscreen

我需要构建一个应用程序（.NET），给定另一个应用程序的 pid 不断使该应用程序的打印屏幕制作视频......我正在使用 API 调用： new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height, PixelFormat.Format32bppArgb);

我遇到的问题是速度....

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T13:00:33.013

如果您需要高速捕获，您可能需要检查 DirectShow api，以便您可以构建屏幕捕获图并将输出保存为电影（avi、wmv 等）。您可以在此处找到一些相关信息：[DirectShow.NET](http://directshownet.sourceforge.net/)。

您可以查看例如 PlayCap 示例。您需要的是屏幕截图源过滤器。（您可以从 Windows sdk 示例中看到[MediaLooks](http://www.medialooks.com/)或 PushSourceDesktop 我相信还有更多选择..）

# c# - 需要帮助理解 C# 泛型

> ID：696930
> 
> 赞同：2
> 
> 时间：2009-03-30T12:07:13.517
> 
> 标签：c#, visual-studio

我正在自学 C# 参考，它提供了以下信息：

1.21.4。声明通用参数 通用参数可以在类、结构、接口、委托（参见即将到来的“委托”部分）和方法的声明中引入。其他构造，例如属性，不能引入泛型参数，但可以使用泛型参数。例如，属性 Value 使用 T：

```
public struct Nullable<T>
{
  public T Value {get;}
} 
```

首先，我在尝试编译它时遇到一个错误，它说它必须包含一个主体，因为它既不是抽象的也不是外部的，或者自动参数必须同时具有 get 和 set 访问器。

其次，假设它是错误的并且我通过添加“set;”来纠正它，我似乎无法成功地格式化对它的调用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-30T12:10:37.003

那只是显示API`Nullable<T>`而不是实现。它不是用来编译的——`System.Nullable<T>`它是框架的一部分，你不必自己实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T12:15:54.760

您似乎正在阅读“C# 3.0 in a Nutshell”。好吧，这个例子就是这样 - 一个例子。它只是为了说明`Value`Generic`Nullable`类的属性如何公开由包含类型声明的泛型参数。

它并不意味着成为可编译示例的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T12:19:51.693

我不确定您是否只是为您的结构名称选择了一个不好的示例（因为 Nullable 是一个框架结构），但如果不是，则错误是由于您的属性中没有设置访问器。自动属性（在 C# 3.0 中添加）需要 get 和 set 属性。因此，如果您将代码更改为：

```
public struct Nullable<T>
{
  public T Value {get; set; }
} 
```

它应该工作。在这种情况下，错误与泛型无关。要创建实例，您可以使用：

```
Nullable<int> i = new Nullable<int>(); 
```

这将使它编译。然而，正如 Jon 和 Cerebrus 都指出的那样，这可能只是展示泛型工作的一个例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-30T12:50:40.090

对于自动属性，您始终需要 getter 和 setter。如果没有 getter，您可以设置该值，但没有任何东西可以检索它。如果没有设置器，该值将始终是默认值，因为没有任何东西可以设置它：

```
//tradition 
private T _value; 
public T Value 
{ 
    get 
    {
        return _value;
    }
}
//locally, _value can always be set

//Auto-matically implemented property
public T Value { get; }
//there is never a way to set it

//with this it can be privately set, but is get only to everyone else
public T Value{ get; private set; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T12:47:16.760

您在这里的问题似乎是关于自动属性，而不是泛型。

自动属性必须有一个 set 访问器，尽管它不必具有与 get 相同的可见性：

```
public T Value { get; private set; } 
```

您可以在构造函数中调用集合：

```
public Nullable ( T value ) {
    Value = value;
} 
```

尽管在这种情况下您正在处理一个结构，并且它们总是有一个默认（无参数）构造函数 - 您必须更加小心结构和自动属性。

在 .net 中已经有一个可以为空的泛型：

```
Nullable<int> i = GetCounterThatMightBeNull();

int j = 0;
if( i.HasValue )
    j = i.Value;
... 
```

这是在 .Net 2 中添加的（与泛型同时），虽然早期的 beta 看起来像上面的代码，但他们在最终版本中对其进行了简化：

```
//int? is shorthand for Nullable<int>
int? i = GetCounterThatMightBeNull(); 

// ?? is shorthand for the null check
int j = i ?? 0;

//or
if( i == null ) {
    //this works even though Nullable<int> is a struct
} 
```

# model-view-controller - 从 MVC 引用脚本文件

> ID：696933
> 
> 赞同：0
> 
> 时间：2009-03-30T12:07:29.537
> 
> 标签：model-view-controller

我在引用应该包含在我的视图中的脚本时遇到问题，当我使用不同的路由访问该页面时，我的脚本失败了。

这个想法是两条路线实际上指向同一个动作：

`http://localhost/PaydayWebsite/registration`

`http://localhost/PaydayWebsite/organizations/p001/departments/vest/employees/chn/registration`

第二个只是为我的操作包含更多参数。我试过使用

ResolveUrl、Url.Content 和 mvccontribs Html.ScriptInclude 但似乎都不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-30T12:17:30.233

您应该能够使用 Url.Content，但您需要使您的路径相对于应用程序的根目录而不是当前路径。

采用

```
 Url.Content( "~/Content/Scripts/jquery-1.3.2.min.js" ) 
```

而不是

```
 Url.Content( "../../Content/Scripts/jquery-1.3.2.min.js" ) 
```

# tomcat - 使用 Teamcity 时，我的 Tomcat 重新部署失败

> ID：696940
> 
> 赞同：1
> 
> 时间：2009-03-30T12:09:59.783
> 
> 标签：tomcat, teamcity

我正在使用 Teamcity 运行 CI，它运行良好，除了一件事：当我的 webapp 在几次 Tomcat 内存不足后部署到 web 容器（Tomcat 5.5）时。这也是您在开发中看到的东西，但从那时起您可以以任何方式手动重新启动，这并不是一个大问题 - 使用 CI 它是全自动的，这真的很烦人。

我尝试设置 Teamcity，以便在每次部署时重新启动 Tomcat，但后来我遇到了另一个问题 - Tomcat 启动脚本在从 ant 调用时挂起（即它启动 Tomcat 就好了，但在构建中没有进一步-过程）。

有类似 Teamcity-Tomcat 设置的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T12:24:00.123

这是tomcat的问题，类加载器和类没有被正确地垃圾收集。每次重新加载 webapp 上下文时，都会加载这些类的更多副本，并且由于这些副本存储在永久堆生成中，因此最终会耗尽内存。

您可以在 tomcat 启动时[增加 PermGen 大小](https://stackoverflow.com/questions/88235/how-to-deal-with-java-lang-outofmemoryerror-permgen-space-error)，这只允许您重新部署更多次而不会耗尽内存，这并不是真正的修复，但您可以增加部署次数，直到您必须重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T13:41:31.513

我们遇到了完全相同的问题，正如 Mark Robinson 所指出的，这与没有收集垃圾的类有关。

我们遇到的特殊问题是加载了大量静态内容：log4j、静态全局变量中填充的 spring 上下文以及其他创建静态实例或单例的类库。

可以使用探查器跟踪其中的很多内容，然后在 servlet 的`destroy()`方法中明确处理资源清理。虽然这并没有完全解决问题，但确实缓解了一些问题。

最后，我们添加了一对额外的 ant 目标来停止和启动 Tomcat，并将构建过程包装在这些目标中。YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-10T22:11:57.657

我猜这个问题并不是 TeamCity 特有的。

您如何从 Ant 调用 Tomcat 启动脚本？

如果您使用“exec”任务，您可能需要将“spawn”属性设置为 true，以便它在另一个进程中生成 Tomcat。否则 Ant 在继续之前等待进程结束。

在我们的部署中，我们有一个脚本可以检查 permgen 级别，如果 permgen 太高，则（可选）重新启动 Tomcat。

# asp.net - ASP DetailsView，有条件地隐藏显示控件和行？

> ID：696943
> 
> 赞同：2
> 
> 时间：2009-03-30T12:10:35.210
> 
> 标签：asp.net, detailsview

我有条件地在 DetailsView 中隐藏/显示面板...我还想隐藏/显示面板所在的 DetailsView 行/字段，因为当面板隐藏时它当前显示空行？

```
ASCX:

<asp:DetailsView>
<asp:TemplateField>
  <ItemTemplate>
    <asp:panel runat="server" ID="pnlHideShow" OnInit="OnInit_Panel">  
... 
```

代码隐藏：

```
protected void OnInit_Panel(object sender, EventArgs e)
{
  Panel pnl = (Panel) sender;
  pnl.Visible = false;

  switch (pnl.ID)
  {
    default:
      break;
    case "pnlHideShow":
      pnl.Visible = (some condition); 
    //How to hide/show DetailsView item containing this panel? 
    break;
    ...
  }
  ...
} 
```

希望我不是“[比失败更糟糕](http://thedailywtf.com)”的候选人；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-08-18T22:35:13.807

就像是：

```
pnl.Visible = (some condition);
pnl.Parent.Visible = true;  // you may have to go pnl.Parent.Parent.Parent.Visible... try stepping through debug 
```

# c++ - 位掩码到数组索引

> ID：696952
> 
> 赞同：3
> 
> 时间：2009-03-30T12:15:19.863
> 
> 标签：c++, indexing, bitmask

有没有一种简单的方法可以将位掩码转换为数组索引？

IE。如果我有一个枚举

```
a = 0x01,
b = 0x02,
c = 0x04,
d = 0x08,
e = 0x10, 
etc 
```

我想将相关数据存储在一个数组中，有没有一种简单的方法可以将a转换为0，b转换为1，c转换为2等？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-30T12:19:41.910

```
r =   ln base 2 
and programmatically,

unsigned int v=yourEnumValue;
unsigned r = 0; 
while (v >>= 1) 
{
   r++;
}

r is your answer 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-30T12:19:06.280

我不确定这是否是你要问的，但你为什么不只取一个 2-base log 呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-30T12:18:50.230

记录[2] n?

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-30T12:18:48.527

我不知道您要求的简单解决方案，但是为什么不使用地图而不是数组呢？

应该在没有任何魔法转换的情况下工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T12:19:43.847

使用 std::map：

```
#include <map>

std::map <my_enum, my_datatype> m;
m[ a ] = whatever; 
```

# visual-studio - 是否有用于一次替换 XAML/XML/HTML 中的开始和结束标记名称的 Visual Studio 快捷方式？

> ID：696963
> 
> 赞同：5
> 
> 时间：2009-03-30T12:19:40.943
> 
> 标签：visual-studio, tags, keyboard-shortcuts, shortcuts

我想要类似于[这篇](https://stackoverflow.com/questions/335799/html-editor-edit-both-start-and-end-tag-at-once)文章但使用 Visual Studio 的东西。这在编辑 XAML、XML 或 HTML 时非常有用。

例如：

```
<StackPanel>
    <Button>I'm A Button</Button>
</StackPanel> 
```

如果我开始更改“StackPanel”标签，我想自动更改结束标签以匹配（例如，如果我将其切换为“Grid”）。我想我可以编写一个宏来做到这一点，但如果可以的话，我想先使用本机方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-04T18:14:51.590

[来自devexpress](http://devexpress.com)的CodeRush 和 Refactor pro会为你做这件事，还有很多其他很酷的东西。虽然我很害怕，但它是一种付费产品——我不知道有什么免费的东西可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-04T19:26:27.393

恐怕您必须：

1.  写一个宏。
2.  编写附加组件（或自定义现有的开源附加组件）。
3.  购买其中一种产品（CodeRush 或 Refactor）。

# jquery - jquery v1.3.2 按属性查找元素

> ID：696968
> 
> 赞同：27
> 
> 时间：2009-03-30T12:20:21.893
> 
> 标签：jquery

我需要查找并遍历所有具有特定属性的子元素。以下代码在 jquery 1.2.6 中运行良好，但在 1.3.2 中抛出异常

```
$(parentElement).find('*[@someAttributeName]').each(function(index){
    doSomething(this);
}); 
```

实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-03-30T12:24:06.050

我相信，只要摆脱@。

```
$(parentElement).find('[someAttributeName]').each(function(index){
    doSomething(this);
}); 
```

来自 jQuery[选择器](http://docs.jquery.com/Selectors)文档：

> 注意：在 jQuery 1.3 [@attr] 样式选择器被删除（它们以前在 jQuery 1.2 中被弃用）。只需从您的选择器中删除“@”符号，以使其再次工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-30T12:24:19.297

请注意，从版本 1.2 开始，不推荐使用属性名称之前的“@”。

```
$(parentElement).find('*[someAttributeName]').each(function(index){
    doSomething(this);
}); 
```

只需将其删除即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T12:25:02.600

`[@attribute]`表示法在 jQuery 1.3 中已弃用。删除`@`标志，你很高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T05:50:50.190

我认为这是找到并可以改变它的最好方法

```
 $('.youritem').each(function(){
                          if($(this).attr('title') == 'add image')
                                           $(this).attr('id','imageuploader');

                        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-02-23T11:26:53.013

当我想用`required=""`.

当我更改为`required="required"`. 也许其他组合也可以使用[https://stackoverflow.com/a/3012975/588759](https://stackoverflow.com/a/3012975/588759)

# wpf - WPF 加速键，如 Visual Studio

> ID：696973
> 
> 赞同：3
> 
> 时间：2009-03-30T12:22:50.203
> 
> 标签：wpf, hotkeys

我正在使用 C# 和 WPF 开发大型业务应用程序。我们的标准是在所有表单（保存、取消、搜索等）上包含用于按钮的加速键。我最近注意到，当加载表单时，即使用户没有按下“Alt”键，加速键也处于活动状态。例如，我们的搜索按钮使用“Alt-H”作为加速键，但用户只需按“H”即可启动搜索。我在按钮内容中使用标准的“_”来创建加速键。

```
<Button Content="Searc_h"/> 
```

有没有其他人注意到这种行为，是否有人找到了需要按下“Alt”键的合适解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-03-17T20:49:55.363

这是 Windows 上没有文本输入时加速键的标准行为。请不要破坏它，把它留在里面。

你可以自己检查一下。按 Win+R 调出“运行...”对话框，然后按 Tab 使其中一个按钮成为焦点，然后按“B”。“浏览”按钮将被激活。

这也是为什么您可以使用简单的 Y/N（而不是 Alt+Y / Alt+N）来回答这些 MessageBox 提示的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-10-03T23:38:34.160

根本不要输入下划线，然后将其添加到窗口中。

```
 <Window.InputBindings>
    <KeyBinding Command="Help" Key="H" Modifiers="Alt"/>
  </Window.InputBindings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-05T15:20:24.333

[Sara Ford 的博客](http://blogs.msdn.com/saraford/archive/2004/04/16/114935.aspx)上的这篇文章讨论了这种现象。

评论者将此作为解决方案提到：

“如果您正在编写一个应用程序并且您不喜欢这种行为，请查找 WM_CHANGEUISTATE，特别是 UISF_HIDEFOCUS 标志。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-07-19T10:01:10.703

菜单和工具栏助记符无需在 WPF 中按 Alt 键即可工作。这是微软的标准。请参阅此链接[http://social.msdn.microsoft.com/Forums/en/wpf/thread/14f6f49f-0027-471b-b68c-e7f6ba012012](http://social.msdn.microsoft.com/Forums/en/wpf/thread/14f6f49f-0027-471b-b68c-e7f6ba012012)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2010-05-11T21:45:05.590

实际上，WPF 中的命令模式允许您更精细地控制允许使用的键盘快捷键。它比按钮文本中的“_”更进一步。

检查以下链接以获取更多信息：

[http://www.switchonthecode.com/tutorials/wpf-tutorial-command-bindings-and-custom-commands](http://www.switchonthecode.com/tutorials/wpf-tutorial-command-bindings-and-custom-commands)

编辑：以前的链接已失效 - 提供了一个新链接。

-道格

# c++ - 同一类的多个定义

> ID：696985
> 
> 赞同：1
> 
> 时间：2009-03-30T12:26:43.267
> 
> 标签：c++, linker

玩弄 MSVC++ 2005，我注意到如果多次定义同一个类，程序仍然可以愉快地链接，即使是在最高警告级别。我觉得很奇怪，这怎么不是错误？

模块_a.cpp：

```
#include <iostream>
struct Foo {
  const char * Bar() { return "MODULE_A"; }
};
void TestA() { std::cout << "TestA: " << Foo().Bar() << std::endl; } 
```

模块_b.cpp：

```
#include <iostream>
struct Foo {
  const char * Bar() { return "MODULE_B"; }
};
void TestB() { std::cout << "TestB: " << Foo().Bar() << std::endl; } 
```

主.cpp：

```
void TestA();
void TestB();
int main() {
  TestA();
  TestB();
} 
```

输出是：

```
TestA: MODULE_A
TestB: MODULE_A 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-30T12:29:35.490

这是一个错误 - 代码违反了 C++ 单一定义规则。如果你这样做，标准会说你会得到未定义的行为。

代码链接，因为如果您有：

```
struct Foo {
  const char * Bar() { return "MODULE_B"; }
}; 
```

在这两个模块中都不会违反 ODR - 毕竟，这基本上是 #include 标头所做的。违规是因为您的定义不同（另一个包含字符串“MODULE_A”）但链接器（仅查看类/函数名称）无法检测到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T12:36:44.180

编译器可能会认为该对象除了在 Test#() 函数中使用之外毫无用处，因此内联了整个事物。这样，链接器将永远不会看到任何一个类甚至存在！不过，只是一个想法。

或者不知何故，TestA 和类 Foo[#] 之间的链接将在编译中完成。如果链接器正在寻找类 Foo（多个定义），则会发生冲突，但链接器根本不寻找它！

如果在未启用优化的调试模式下编译，是否有链接错误？

# php - 修复一个启用了 REGISTER GLOBALS 的管理系统是否值得？

> ID：696995
> 
> 赞同：0
> 
> 时间：2009-03-30T12:30:45.397
> 
> 标签：php, debugging

我有一个管理站点，我已将其复制到新服务器以测试错误并与其他一些站点一起上线。

管理员似乎打开了 REGISTER GLOBALS 并将其用于 300 个 php 文件中的大部分。

基于您无论如何都必须登录该系统的事实，是否值得花费数周的时间重新编码所有变量？

还是很高兴我会在将来添加任何新功能时修复每个页面？

如果我们不立即修复所有问题，Register Globals 是否会在已清理的代码中留下问题？我猜它可能因为 $user_id 可以由任何全局设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T12:42:49.047

这个应用程序也可能充斥着许多其他劣质的编程实践。（保证 300 个 php 文件的应用程序有多大？）。如果是这种情况，如果维护已经变得太麻烦，最好让应用保持原样并在一个体面的框架之上从头开始编写一个新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T12:54:47.070

我会从 php.ini 中禁用 register_globals，并在每个脚本的顶部放置一个代码块，从 $_REQUEST、$_GET 或 $_POST 中提取变量，例如：

```
$nVars = extract($_GET, EXTR_SKIP); 
```

上面的代码将在传递的数组中注册与键名相同的变量。它对于快速重构启用 REGISTER_GLOBALS 的旧代码很有用，但您必须小心。[阅读PHP extract()](http://php.net/extract)文档中的以下摘录：

> 不要对不受信任的数据使用 extract()，例如用户输入 ($_GET, ...)。如果您这样做，例如，如果您想临时运行依赖于 register_globals 的旧代码，请确保使用不可覆盖的 extract_type 值之一，例如 EXTR_SKIP 并注意您应该按照 variables_order 中定义的相同顺序进行提取在 php.ini 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-30T12:38:52.083

Register_Globals不安全**，**不应使用。如果我是你，我会从头重写代码或应用程序本身。但是，如果这是一个管理员系统，并且没有人知道它的 URL，因此只有管理员自己可以访问它，那么你应该可以不更改它（只要确保它的 URL 保持秘密）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T12:41:02.250

它可能导致一些非常严重的安全问题，这有点取决于它的编码方式。

例如：

```
<?php
// $loggedin comes from $_SESSION['loggedin']
if($loggedin)
{
    echo 'Loggedin!';
}
else
{
    echo 'Please login';
}
?> 
```

这里的主要问题是脚本不检查 $loggedin 的来源。因此，如果我执行 script.php?loggedin=1，我将登录。鉴于有大约 300 个 PHP 文件，很难检查所有内容。

所以保留它是一个（非常）坏主意。即使您使用 .htaccess 来阻止访问，它也可能会在将来导致问题（IE 网络托管程序设置 REGISTER_GLOBALS 关闭）和混乱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-30T12:42:30.420

不要重写整个系统。如果系统正常工作，并且您可以随意升级，则无需从头开始。

我会根据信息的敏感性权衡解决注册全局变量的重要性。

如果它是一个构建良好的系统，您应该能够看到整个站点使用了哪些变量，并且只需将它们放在页面顶部即可。警惕任何通过全局 $this、$that 提取数据的函数；

如果数据对保护很重要，我的投票是做这项工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-30T12:48:50.173

这取决于你的很多事情。仅举几个：

1.  公司安全政策
2.  重写成本
3.  申请的重要性
4.  对应用程序其他部分的影响。
5.  ETC

# xslt - 带有命名空间的元素的 xpath 选择

> ID：696996
> 
> 赞同：11
> 
> 时间：2009-03-30T12:31:00.013
> 
> 标签：xslt, xpath, namespaces

这是一篇微不足道但有效的 Docbook 文章：

```
<?xml version="1.0" encoding="utf-8"?>
<article xmlns="http://docbook.org/ns/docbook" version="5.0">
<title>I Am Title</title>
<para>I am content.</para>
</article> 
```

这是一个样式表，用于选择`title`是否删除`xmlns`上面的属性，而不是保留它：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html"/>
    <xsl:template match="/">
        <xsl:apply-templates select="article"/>
    </xsl:template>
    <xsl:template match="article">
      <p><xsl:value-of select="title"/></p>
    </xsl:template>
    <xsl:template match="text()"/>
</xsl:stylesheet> 
```

如果 XPath 具有该名称空间属性，我如何让 XPath 进行选择`title`？`article`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-30T12:38:38.137

您需要为命名空间添加别名并在 XPath 中使用该别名

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:a="http://docbook.org/ns/docbook"
   exclude-result-prefixes="a"
   >
<xsl:output method="html"/>
    <xsl:template match="/">
        <xsl:apply-templates select="a:article"/>
    </xsl:template>
    <xsl:template match="a:article">
      <p><xsl:value-of select="a:title"/></p>
    </xsl:template>
    <xsl:template match="text()"/>
</xsl:stylesheet> 
```

# ruby-on-rails - 如何整合多个 Rails 应用并共享资源

> ID：696999
> 
> 赞同：5
> 
> 时间：2009-03-30T12:33:03.673
> 
> 标签：ruby-on-rails, architecture

我有我当时用 PHP 开发的内部网。

我处理多个应用程序和工具（博客、链接共享、文件共享、事件、clendar...），以及用于登录和授权管理的大型用户身份验证系统。

我想开始用 Rails 重新构建它。
我不想构建一个大应用程序。
我想将网站构建为多个较小的应用程序，共享一些常见资源，如用户管理系统、模板、布局和导航......

Rails Engine 提供了一种将应用程序嵌入到另一个应用程序的方法。
我想我可以有一个“主”应用程序，嵌入所有其他应用程序。但如果我有 10-15 个不同的应用程序，我觉得这不是正确的方法（我可能是错的）。

你会怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T16:00:30.337

我们创建的应用程序分为 2 个 - 面向用户的站点和一个管理站点。我们刚刚创建了 2 个独立的站点，它们具有相同的数据库和模型以及它们自己的视图和控制器。

这非常有效，让我们可以自由地在安全性和部署方面对每个站点进行不同的处理。

我没有任何比这更远的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-30T19:47:48.620

Check out [ActiveResource](http://api.rubyonrails.org/classes/ActiveResource/Base.html) - it is designed to allow you to use RESTful webservices as if they were ActiveRecord objects.

I'm working on a project now with a bunch of separate sub-apps that are pure web services (no UI). There's one "main" application that has all the UI and handles login/authentication, and then accesses the others via ActiveResource.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:34:11.350

您可以在项目之间共享模型添加

```
config.autoload_paths << Dir["SHARED_MODEL_PATH/app/models/*"] 
```

到您的**application.rb**配置文件。

或者您可以查看有关 ActiveResource 的教程，例如：

*   [http://andywaite.com/2010/12/22/activeresource-layered-rails-app](http://andywaite.com/2010/12/22/activeresource-layered-rails-app)
*   [http://wholemeal.co.nz/blog/2010/03/08/active-resource-associations-and-nested-resources/](http://wholemeal.co.nz/blog/2010/03/08/active-resource-associations-and-nested-resources/)
*   [http://ofps.oreilly.com/titles/9780596521424/activeresource_id59243.html](http://ofps.oreilly.com/titles/9780596521424/activeresource_id59243.html)*******************