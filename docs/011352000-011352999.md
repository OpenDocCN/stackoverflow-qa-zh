# StackOverflow 问答 11352000-11352999

# windows-phone-7 - 在 Button 模板中添加 TextBlock

> ID：11352000
> 
> 赞同：0
> 
> 时间：2012-07-05T20:20:38.007
> 
> 标签：windows-phone-7, templates, button, textblock

我为我的按钮创建了一个自定义样式，如下所示：

```
<phone:PhoneApplicationPage.Resources>
    <Style x:Key="CustomButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="#464646" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="BorderThickness" Value="2" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver"/>
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ButtonNumber">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ButtonCharacters">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ButtonNumber">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ButtonCharacters">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="0">
                            <Canvas>
                                <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" />
                                <TextBlock Margin="23,14,0,0" FontFamily="Segoe WP SemiLight" FontSize="48" Foreground="{StaticResource PhoneForegroundBrush}" x:Name="ButtonNumber" Text="XXX" />
                                <TextBlock Margin="54,36,0,0" FontFamily="Segoe WP Light" FontSize="18" Foreground="{StaticResource PhoneForegroundBrush}" x:Name="ButtonCharacters" Text="YYY" />
                            </Canvas>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</phone:PhoneApplicationPage.Resources> 
```

如您所见，我在按钮 (`ButtonNumber`和`ButtonCharacters`) 内添加了两个新的 TextBlock。现在我想为`Text`这两个 TextBlocks（标有 XXX 和 YYY）的属性使用自定义值，使其看起来像这样：

```
<Button Style="{StaticResource CustomButtonStyle}" ButtonNumber.Text="123" ButtonCharacters.Text="SomeText" /> 
```

我没有线索！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:18:05.230

更好的做法是继承 Button 类，添加两个依赖属性（例如 Text1 和 Text2）并添加到该类（暂时称它为 TextButton）。

然后，为 TextButton 和 ControlTemplate 设置通用模板（在 /themes/generic.xaml 中），您可以使用以下标记

```
 <TextBlock x:Name="ButtonNumber" Text="{TemplateBinding Text1}" />
      <TextBlock x:Name="ButtonCharacters" Text="{TemplateBinding Text2}" /> 
```

那将是最简单和最佳实践的方式。

# perl - IPC::可共享的哈希存储哈希

> ID：11352012
> 
> 赞同：1
> 
> 时间：2012-07-05T20:21:29.300
> 
> 标签：perl, hash, ipc, fork

我正在用 perl 编写一个脚本，我在其中使用分叉，我需要在单独的进程之间共享变量。目前我正在使用[IPC::Shareable](http://search.cpan.org/~bsugars/IPC-Shareable-0.60/lib/IPC/Shareable.pm)，效果很好。但是，它似乎不适用于哈希哈希。例如：

```
$todo->{$next_todo_key}{'urls_hash'} = \%temp;

or 

$todo->{$next_todo_key}{'url_idlist'} = $url_idlist; 
```

会给我错误`IPC::Shareable::SharedMem: shmget: File exists at /usr/lib/perl5/site_perl/5.8.8/IPC/Shareable.pm line 566 Could not create shared memory segment: File exists`。

有谁知道如何解决这一问题？或者类似的模块可以让我存储散列的散列？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:32:56.657

我建议给[DBM::Deep](https://metacpan.org/module/DBM%3a%3aDeep)一个尝试。如果您需要散列的散列，您可能已经超出了共享内存工具所能提供的范围。

如果您真的希望它是临时的，您可以将 DBM::Deep 数据库存储在 RAM 磁盘中，或者只使用可以在脚本运行结束时清理的临时文件。

# grails - 仅使用 HTTP 服务器创建 Grails 存储库？

> ID：11352014
> 
> 赞同：3
> 
> 时间：2012-07-05T20:21:38.783
> 
> 标签：grails, plugins, grails-plugin

我有一些不公开的第三方插件。我想创建一个本地存储库，以便我和我的同事可以轻松安装这些插件。我有一台已经安装了 nginx 的服务器。因此，如果可能的话，我想使用它。也就是说，我并不热衷于安装另一个像 Tomcat 这样的 Web 服务器来运行像 grails.org Web 界面这样的东西（正如“[您自己的插件门户](http://grails-plugins.github.com/grails-release/docs/guide/plugins.html)”中的文档所建议的那样）。

基于[grailsRepo()](https://github.com/grails/grails-core/blob/c4c4ffbbd8f9afa69a77f885387e639844be9f50/grails-bootstrap/src/main/groovy/org/codehaus/groovy/grails/resolve/config/RepositoriesConfigurer.groovy#L160)函数和[getPluginList()](https://github.com/grails/grails-core/blob/c4c4ffbbd8f9afa69a77f885387e639844be9f50/grails-bootstrap/src/main/groovy/org/codehaus/groovy/grails/resolve/GrailsRepoResolver.java#L92)，我在我的 Web 服务器上创建了一个“grails”目录，如下所示：

```
/grails
- /.plugin-meta
  - /plugins-list.xml
- /grails-my-plugin
  - /tags
    - /RELEASE_1_0_123
      - /grails-my-plugin-1.0.123.zip 
```

其中插件名为“my-plugin”，插件版本号为 1.0.123。

我的 plugins-list.xml 是这样的：

```
<plugins revision="1">
    <plugin latest-release="1.0.123" name="my-plugin">
        <release tag="RELEASE_1_0_123" type="svn" version="1.0.123">
            <title>MyPlugin</title>
            <author>No Author</author>
            <authoremail>no@email</authoremail>
            <description>An example plugin.</description>
            <file>http://mydev.example.com/grails/grails-my-plugin/tags/RELEASE_1_0_123/grails-my-plugin-1.0.123.zip</file>
        </release>
    </plugin>
</plugins> 
```

将存储库配置为详细信息后，我创建了一个新的 Grails 应用程序 ( `grails create-app test-app`) 并对其进行了调整`grails-app/conf/BuildConfig.groovy`以包含以下配置：

```
repositories {
  grailsRepo("http://mydev.example.com/grails", "myDevRepo")
} 
```

每当我尝试将“my-plugin”插件安装到这个 Grails 应用程序时，我都会在我的 Web 服务器上看到一个请求，并且 Grails 报告它试图从我的存储库中下载，如下所示：

```
==== myDevRepo: tried

  -- artifact org.grails.plugins#my-plugin;latest.integration!my-plugin.zip:

  http://mydev.example.com/grails/grails-my-plugin/tags/LATEST_RELEASE/grails-my-plugin-[revision].zip 
```

在我看来，Grails 并没有尝试读取`.plugin-meta/plugins-list.xml`我为存储库创建的文件。我需要做什么才能使这个存储库在本地 Grails 应用程序的最低配置下工作？

**注意：**我使用的是 Grails 1.3.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:55:47.650

*来自 irc.freenode.org 上#grails 的 cdeszaq 引导我找到以下解决方案：*

忘记使用“grailsRepo”类型的存储库布局。这是可悲的无证，显然不能很好地工作。相反，请使用[Maven 存储库布局](http://docs.codehaus.org/display/MAVEN/Repository+Layout+-+Final)。

假设您在 1.0.5 版本中有一个名为“foo”的插件，它被打包成一个名为“foo-1.0.5.zip”的 zip 文件。要创建基于 HTTP 的存储库，我们执行以下操作：

首先，在您的 Web 服务器上创建一个目录结构：

```
/grails-maven
-/org
  -/grails
    -/plugins
      -/foo
        -/1.0.5 
```

将您的“foo-1.0.5.zip”文件连同一个 MD5 总和文件 ( `md5sum -b foo-1.0.5.zip > foo-1.0.5.zip.md5`) 放入该树的最深目录中。因此，您将拥有以下 URL：

```
http://example.com/grails-maven/org/grails/plugins/foo/1.0.5/foo-1.0.5.zip
http://example.com/grails-maven/org/grails/plugins/foo/1.0.5/foo-1.0.5.zip.md5 
```

`grails-maven`为您的 Web 服务器配置中的目录启用目录索引输出。在 nginx 的情况下，以下配置将起作用：

```
server {
  location ^~ /grails-maven {
    autoindex on;
  }
} 
```

最后，在您的 Grails 应用程序中启用存储库`BuildConfig.groovy`：

```
repositories {
  mavenRepo("http://example.com/grails-maven/")
} 
```

完成上述操作后，您现在`grails install-plugin foo`可以将插件安装到您的 Grails 应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:48:10.813

不是对您的追求的真正答案，它可能会有所帮助...

我们不使用 servre 作为内部存储库，而是通过 svn 分发的平面文件夹。

如果您只是将存储库指定为

```
repositories {
  flatDir name:'myRepo', dirs:'/path/to/repo'
} 
```

但似乎 a`grails list-plugin`行不通。Grails 1.3.7 甚至似乎都没有尝试解析 plugins-list.xml 文件。

如果您将插件作为名为`[plugin]-[version].zip` **and** `[grails]-[plugin]-[version].zip`的 zip 文件删除，grails 将在您执行

```
grails install-plugin [plugin] 
```

您不必以这种方式指定完整路径。不要问我为什么要丢两份——它对我有用:-(

# matlab - 在matlab中如何从命令行保存直方图？

> ID：11352018
> 
> 赞同：7
> 
> 时间：2012-07-05T20:22:01.807
> 
> 标签：matlab, histogram

我有大量文件需要制作直方图，因此我想从命令行保存它。对于绘图，我通常使用以下命令将其保存在 matlab 中：

```
figure = plot (x,y)
saveas(figure, output, 'jpg') 
```

我想对直方图做同样的事情：

```
figure = hist(x)
saveas(figure, output, 'jpg') 
```

但是，我收到一个错误，提示句柄不正确。我也试过`imwrite`函数，代码执行但保存一个空白的黑色图像。有没有办法可以保存我的直方图？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T20:34:06.390

当您将[hist](http://www.mathworks.com/help/techdoc/ref/hist.html)与输出参数一起使用时，它会返回每个 bin 的计数，而不是像您习惯的其他类型的绘图那样的句柄对象。

相反，抓住一个图形的句柄，使用`hist`不带输出参数的图形绘制图形，然后保存图形。

```
fh = figure;
hist(x);
saveas(fh, output, 'jpg')
close(fh) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:19:21.553

`export_fig`来自[MATLAB 文件交换](http://www.mathworks.com/matlabcentral/fileexchange/23629)的文件会自动为您处理此问题，并且还具有其他不错的功能。有关如何使用它的示例，请参见我的另一个[答案](https://stackoverflow.com/a/11267928/274967)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T19:04:40.910

```
fh = figure;
imhist(x);
saveas(fh, 'output', 'jpg'); 
```

# python - 使用 Django 和 Postgres 在数据库中存储十六进制数据

> ID：11352022
> 
> 赞同：0
> 
> 时间：2012-07-05T20:22:17.240
> 
> 标签：python, django, postgresql, binary-data

我遇到了一种情况，`os.urandom(BLOCK_SIZE)`我需要使用 Django 模型将二进制数据（使用创建的）存储在 Postgres 数据库中。

我已经阅读了一些关于 Django 尚不支持 Bytea (VARBINARY) 字段类型的参考资料。[我在这里](http://django-postgresql.readthedocs.org/en/latest/fields/bytea.html)找到了参考，但不知道从哪里获得该库（django_postgresql）。

我目前在 Ubuntu 12.04 上使用 Python 2.7 和 Django 1.4 - 如果有帮助的话。

我已经阅读了一些建议，作为解决此问题的一种方法是在存储之前将我的数据转换为十六进制。

```
import binascii
key = binascii.hexlify(value) 
```

好的，现在呢？我试图将此值保存到数据库中，但出现错误：

`invalid byte sequence for encoding "UTF8": 0xd6c2`

好的，我应该使用哪种数据字段类型来执行此操作？

`key = models.TextField(max_length = 200)`?

`key = models.CharField(max_length = 200)`?

`key = models.???(max_length = 200)`？？？

我想远离创建自己的[自定义字段类型](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)。首先，我对 Django 还是很陌生，而且还不会觉得这样做很舒服。其次，我对数据库很陌生，所以我不确定从哪里开始定义这样的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:40:54.720

如果您在保存键值时遇到 unicode 错误，则说明您做错了。`binascii.hexlify()`返回一个简单的十六进制字符串，它不会给你“无效的字节序列”。

要获得更高效的存储，请使用 base64 编码：

```
import base64
mymodelinstance.key = base64.b64encode(raw_key_value) 
```

并解码：

```
raw_key_value = base64.b64decode(mymodelinstance.key) 
```

您可以只使用长度的 CharField`BLOCK_SIZE * 2`来保存十六进制数据，或者`4 * ( BLOCK_SIZE / 3)`用于 base64。

# java-me - 使用 http 的广播流诺基亚 sdk 1.1

> ID：11352029
> 
> 赞同：1
> 
> 时间：2012-07-05T20:22:55.840
> 
> 标签：java-me, lwuit, nokia, lwuit-form

我正在开发一个调频广播流媒体项目，我正在为诺基亚 sdk1.1 实现广播流媒体，但我没有成功，我遵循了许多替代方案，例如

J2ME/StreamingMedia.htm">http://www.java2s.com/Tutorial/Java/0430_J2ME/StreamingMedia.htm

```
player = Manager.createPlayer("http://someurl:someport"); // this is not working and showing invalid url while same url works in media player i have checked and it is valid. 
```

请给我一些建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:24:20.897

我建议你研究一下 rtsp，j2me 的实时流协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:10:26.943

我使用输入流来创建广播播放器。

InputStream is = Connector.openInputStream(" `http://someurl:someport`");

Player player = Manager.createPlayer(is, "audio/mpeg");

播放器.start();

# c# - 自定义 404 错误消息 ASP.NET Visual Studio

> ID：11352031
> 
> 赞同：3
> 
> 时间：2012-07-05T20:23:00.267
> 
> 标签：c#, asp.net, visual-studio-2010, redirect, http-status-code-404

任何人都知道如何设置 Visual Studio 开发服务器使用的自定义 404 错误页面？

如果我设置为本地 IIS 服务器，然后在 IIS 中设置自定义 404 页面，我知道如何让它工作。但我想在本地 VS 开发服务器上实际更改它们，这样当我在 Visual Studio 的开发服务器中测试应用程序时，它就可以正常工作。

我假设它是 VS 中的一个设置。

我目前正在运行 VS 2010。

我已经在 web.config 中为 .aspx 页面添加了自定义 404 重定向。现在我需要弄清楚为所有其他页面更改错误重定向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:03:34.693

不确定这是否是您所追求的，但您可以在 web.config 中进行如下设置：

```
<customErrors defaultRedirect="GenericError.htm" mode="On">
          <error statusCode="404" redirect="notfound.htm"/>
      </customErrors> 
```

并有一个名为 notfound.html 的 html 文件

参考：

*   [http://weblogs.asp.net/dotnetstories/archive/2011/09/24/creating-custom-error-pages-in-asp-net-applications.aspx](http://weblogs.asp.net/dotnetstories/archive/2011/09/24/creating-custom-error-pages-in-asp-net-applications.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:30:45.080

最简单的方法可能是在本地 IIS 上设置一个应用程序，或者使用 vs 2010 提供的“IIS Express”选项： [http ://learn.iis.net/page.aspx/868/iis-express-overview /](http://learn.iis.net/page.aspx/868/iis-express-overview/)

您也可以使用“模拟配置”方法，但这让我觉得工作量太大。 [.Net C# 中参考 Web.Config 的测试方法](https://stackoverflow.com/questions/10587516/testing-methods-with-reference-to-web-config-in-net-c-sharp)

# r - 等效于使用强制转换的功能聚合语句

> ID：11352033
> 
> 赞同：1
> 
> 时间：2012-07-05T20:23:07.267
> 
> 标签：r, aggregate, reshape, reshape2

给我按月平均销售额的聚合函数工作正常。

```
library(chron)
set.seed(42)
dat <- data.frame(sales = rnorm(1000, mean = 1000, sd = 40),
              dates = rep(as.Date(seq(from = 14610, to = 14859),
                              origin = "1970-01-01"),4))
aggregate(sales~months(as.chron(dates)), mean, data=dat) 
```

...并产生以下输出：

```
months(as.chron(dates))     sales
1                     Jan 1000.0723
2                     Feb  999.1580
3                     Mar  995.3055
4                     Apr 1000.4912
5                     May 1003.9703
6                     Jun  997.1086
7                     Jul  996.5939
8                     Aug  998.5012
9                     Sep 1001.3709 
```

我的理解是以下 cast 语句应该产生相同的输出：

```
cast(dat, months(as.chron(dates)) ~ ., mean, value="sales") 
```

而是返回以下错误：

```
Error: Casting formula contains variables not found in molten data: months(as.chron(dates)) 
```

我可能会遗漏一些东西，但是否可以在 cast 语句中使用 chronmonths() 调用？以下两个语句将在 cast() 中完成相同的操作，但我试图一步完成并更好地了解 cast 的工作原理。

```
dat$mont <- months(as.chron(dat$dates))
cast(dat, mont ~ ., mean, value="sales") 
```

提前致谢，--JT

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:06:59.387

这将与`reshape2`

```
library(reshape2)
dcast(dat, months(as.chron(dates)) ~ ., mean, value.var="sales")
##   months(as.chron(dates))        NA
## 1                     Jan 1004.5404
## 2                     Feb 1002.3146
## 3                     Mar  996.0883
## 4                     Apr  994.1707
## 5                     May 1000.4652
## 6                     Jun 1002.8020
## 7                     Jul  996.0357
## 8                     Aug 1001.6754
## 9                     Sep  997.6772 
```

或者你可以使用`plyr`

```
library(plyr)
ddply(dat, .(months = months(as.chron(dates))), summarize, sales = mean(sales))
##  months     sales
## 1   Jan 1004.5404
## 2   Feb 1002.3146
## 3   Mar  996.0883
## 4   Apr  994.1707
## 5   May 1000.4652
## 6   Jun 1002.8020
## 7   Jul  996.0357
## 8   Aug 1001.6754
## 9   Sep  997.6772 
```

或使用 data.table

```
library(data.table)
DT <- data.table(dat)
DT[, month := months(as.chron(dates))][,list(sales =  mean(sales)),by = month]
##    month     sales
## 1:   Jan 1004.5404
## 2:   Feb 1002.3146
## 3:   Mar  996.0883
## 4:   Apr  994.1707
## 5:   May 1000.4652
## 6:   Jun 1002.8020
## 7:   Jul  996.0357
## 8:   Aug 1001.6754
## 9:   Sep  997.6772 
```

* * *

马修·道尔的评论

`:=`不需要，iiuc，直接`by`接受表达式：

```
DT[, list(sales=mean(sales)), by=months(as.chron(dates))]
##    months     sales
## 1:    Jan 1004.5404
## 2:    Feb 1002.3146
## 3:    Mar  996.0883
## 4:    Apr  994.1707
## 5:    May 1000.4652
## 6:    Jun 1002.8020
## 7:    Jul  996.0357
## 8:    Aug 1001.6754
## 9:    Sep  997.6772 
```

# vim - 在 Github 中打开代码/文件的插件？

> ID：11352034
> 
> 赞同：0
> 
> 时间：2012-07-05T20:23:26.443
> 
> 标签：vim, github

有谁知道 Vim 的插件可以让我打开 Github 上的当前文件（或者理想情况下，如果在可视模式下，甚至是当前选择）？

我以前有这个插件用于 Sublime Text，现在我正在使用 Vim，想要同样的东西。

**编辑**：我正在寻找一个插件，它将打开我的网络浏览器到 github.com 上与我当前正在编辑的文件相对应的页面。例如，如果我在 Vim`foo/bar.js`中的本地克隆库中进行编辑，使用此插件将打开. 这相当于[ST2-Githubinator](https://github.com/ehamiter/ST2-GitHubinator)。`quux``https://github.com/dtb/Quux/blob/master/foo/bar.js`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T22:05:58.513

[fugitive.vim](https://github.com/tpope/vim-fugitive/)插件可以满足`:help fugitive-:Gbrowse`您的需求。总的来说也很棒。

```
 *fugitive-:Gbrowse*
:[range]Gbrowse         If the remote for the current branch is on GitHub,
                        open the current file, blob, tree, commit, or tag
                        (with git-web--browse) on GitHub.  Otherwise, open the
                        current file, blob, tree, commit, or tag in
                        git-instaweb (if you have issues, verify you can run
                        "git instaweb" from a terminal).  If a range is given,
                        it is appropriately appended to the URL as an anchor.
                        To use with GitHub FI, point g:fugitive_github_domains
                        at a list of domains:

                        let g:fugitive_github_domains = ['git.example.com']

:[range]Gbrowse!        Like :Gbrowse, but put the URL on the clipboard rather
                        than opening it. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T15:47:13.513

一个补充：如果您的遥控器不在 github 上或者您使用的是 mercurial，我的[aurum](https://bitbucket.org/ZyX_I/aurum)具有类似的功能（尽管它永远不会运行`git instaweb`）[`:AuHyperlink`](http://vimpluginloader.sourceforge.net/doc/aurum.txt.html#line196-0)：. 可以在[此处](https://bitbucket.org/ZyX_I/aurum/src/tip/autoload/aurum/drivers/common/hypsites.vim)找到支持的 git 遥控器列表（搜索`s:hyp.git`，链接指向最新版本）。除了复制 HTML 格式文件的链接外，`:AuHyperlink`还可以复制带有文件注释版本的 URL、当前或给定修订版本的 URL、带有文件历史或存储库日志的页面 URL、推送和克隆 URL。不过，它并没有用 git 进行很好的测试：我几乎只使用 mercurial（支持 python 的版本）并且没有其他用户参与开发。

为了不将 URL 复制到系统剪贴板，但要打开浏览器，您必须使用类似

```
AuHyperlink cmd call\ system('xdg-open\ '.shellescape(%s)) 
```

`xdg-open`（如果无法按原样运行，请更换为您喜欢的浏览器）。

# java - h:inputText 里面的值：modalPanel 没有绑定到支持 bean

> ID：11352036
> 
> 赞同：1
> 
> 时间：2012-07-05T20:23:41.670
> 
> 标签：java, jsf, richfaces, seam

当我单击保存按钮时，会调用“addCompany”操作，但是当我调试并在我的支持 bean 中看到实例变量 companyName 的值时，它显示为 null。我想我正在犯一些真正愚蠢的错误。

**Modal XHTML** : 包含在另一个 xhtml 的表单标签中。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                    xmlns:ui="http://java.sun.com/jsf/facelets"
                    xmlns:h="http://java.sun.com/jsf/html"
                    xmlns:a4j="http://richfaces.org/a4j"
                    xmlns:rich="http://richfaces.org/rich"
                    xmlns:f="http://java.sun.com/jsf/core">

        <rich:modalPanel id="AddDmpCompanyModalId"
                             showWhenRendered="#{companyAdminAction.showAddCompanyModal}"
                             width="500"
                             height="340"
                             autosized="true">

                <f:facet name="header">
                    <h:outputText value="Add Company"/>
                </f:facet>

                <a4j:outputPanel id="addDmpCompanyInputPanel">

                            <label style="font-weight:bold;margin-top:5px">Name: </label>
                            <h:inputText id="companyName"  value="#{companyAdminAction.companyName}"/>

                                <a4j:commandLink id="submit-add-company-name-link"
                                                 immediate="true"
                                                 action="#{companyAdminAction.addCompany()}"
                                                 styleClass="button"
                                                 reRender="AddDmpCompanyModalId,addDmpCompanyInputPanel"
                                                 limitToList="true">
                                    <span class="inner-button">Save</span>
                                </a4j:commandLink>

                </a4j:outputPanel>

            </rich:modalPanel>

    </ui:composition> 
```

**Backing Bean（接缝组件）**

```
Name("companyAdminAction")
@Scope(ScopeType.CONVERSATION)
public class CompanyAdmin {

    private String companyName;     

    public String getCompanyName() {
        return companyName;
    }

    public void setCompanyName(String companyName) {
        this.companyName = companyName;
    }

      public void addCompany() {
    // On click of save debugger comes here, but shows the value of          
      //companyName as null 
     }  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:08:07.393

是的，原因很简单：你`immediate=true`在你的`<a4j:commandLink/>`. 此选项使 JSF在转换值和更新模型**之前**`addCompany()`调用函数。

 **解决方案同样简单：`immediate=true`从`<a4j:commandLink/>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:32:04.720

也许复合组件在一个表单中，并且在表单中您有另一个组件绑定到`companyName`您的 bean 的属性。为您添加一个表单`rich:modalPanel`并将其移到包含的实际表单之外。你的代码应该是这样的：

```
<rich:modalPanel id="AddDmpCompanyModalId" ... >
    <f:facet name="header">
        <h:outputText value="Add Company"/>
    </f:facet>
    <h:form>
        <a4j:outputPanel id="addDmpCompanyInputPanel">
            ...
        </a4j:outputPanel>
    </h:form>
</rich:modalPanel> 
```

更多信息：

*   [如果您将相同的支持 bean 属性绑定到相同表单中的两个输入字段，那么 JSF 的行为是什么？](https://stackoverflow.com/q/1037725/1065197)**

# scala - 自 1970 年 1 月 1 日以来的 Scala UTC 时间戳（以秒为单位）

> ID：11352037
> 
> 赞同：58
> 
> 时间：2012-07-05T20:23:42.560
> 
> 标签：scala, timestamp, utc

如何获得自 1970 年 1 月 1 日以来的 Scala UTC 时间戳（以秒为单位）？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-07-05T20:37:11.190

与在 Java 中的方式相同：

```
val timestamp: Long = System.currentTimeMillis / 1000 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-01-26T23:11:43.727

从 Java 8 开始，可以这样做：

```
import java.time.Instant
unixTimestamp : Long = Instant.now.getEpochSecond 
```

通过 micha 的回答：[https ://stackoverflow.com/a/24703573/577199](https://stackoverflow.com/a/24703573/577199)

# php - AJAX 分页，页面不可点击

> ID：11352038
> 
> 赞同：-2
> 
> 时间：2012-07-05T20:23:43.247
> 
> 标签：php, javascript, ajax

我对 ajax 页面有疑问。在索引文件中，我有这个分页代码：

```
<div id="pagesn">
<?php
    require_once 'libs/db.class.php';
    require_once 'libs/global.inc.php';
         $query="select count(*) as tot from table";
          $countset=$db->runquery($query);
          $count=$db->get_row($countset);
          $tot=$count['tot'];
          $page=1;
          $ipp=3;
          $totalpages=ceil($tot/$ipp);
          echo"<ul class='pages'>";
          for($i=1;$i<=$totalpages; $i++)
          {
              echo"<li class='$i'>$i</li>";
          }
          echo"</ul>";
        ?>
</div> 
```

这是 AJAX 代码：

```
$("#pagesn .pages li").click(function(){
        //show the loading bar
        showLoader1();  
        $("#pagesn .pages li").css({'background-color' : ''});
        $(this).css({'background-color' : '#A5CDFA'});                
        $("#resn").load("data1.php?page=" + this.className, hideLoader1);
    });

    // by default first time this will execute
    $(".1").css({'background-color' : '#A5CDFA'});
    showLoader1();
    $("#resn").load("data1.php?page=1",hideLoader1); 
```

主要问题是php代码在索引文件中，所以不刷新就不能更新，所以这意味着当我添加新条目时，页码没有更新。我尝试将此代码添加到其他文件并使用 jQuery 加载到同一个 div 中：

```
$('#pagesn').load('data.php'); 
```

之后，页面会自动更新，但随后它们变得无法点击，是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:26:18.657

当您动态添加和删除`li`元素时，为了附加 ' `click`' 处理程序，您需要使用[**.on**](http://api.jquery.com/on/)函数：

```
$('#pagesn').on('click','.pages li',function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:26:39.507

尝试：

```
$("#pagesn").on("click",".pages li",function(){
        showLoader1();  
        $("#pagesn .pages li").css({'background-color' : ''});
        $(this).css({'background-color' : '#A5CDFA'});                
        $("#resn").load("data1.php?page=" + $(this).attr("class"), hideLoader1);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:32:41.073

从[.on() 函数的文档中](http://jqapi.com/#p=on)：

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。

因此，使用`.on()`代替`.click()`将确保即使在执行代码后插入的元素上也执行处理函数。

```
$('#pagesn').on('click','.pages li',function(){
  // Do something ...
}) 
```

# python - 在 Python 中从数据点中查找移动平均值

> ID：11352047
> 
> 赞同：57
> 
> 时间：2012-07-05T20:24:25.540
> 
> 标签：python, plot, sum, average

我又玩了一下 Python，发现了一本带有示例的简洁书。示例之一是绘制一些数据。我有一个包含两列的 .txt 文件，并且我有数据。我将数据绘制得很好，但在练习中它说：进一步修改您的程序以计算和绘制数据的运行平均值，定义为：

```
$Y_k=\frac{1}{2r}\sum_{m=-r}^r y_{k+m}$ 
```

在`r=5`这种情况下（并且`y_k`是数据文件中的第二列）。让程序在同一张图上绘制原始数据和运行平均值。

到目前为止，我有这个：

```
from pylab import plot, ylim, xlim, show, xlabel, ylabel
from numpy import linspace, loadtxt

data = loadtxt("sunspots.txt", float)
r=5.0

x = data[:,0]
y = data[:,1]

plot(x,y)
xlim(0,1000)
xlabel("Months since Jan 1749.")
ylabel("No. of Sun spots")
show() 
```

那么如何计算总和呢？在 Mathematica 中它很简单，因为它是符号操作（例如 Sum[i, {i,0,10}]），但是如何在 python 中计算总和，它取数据中的每十个点并取平均值，直到最后点数？

我看了这本书，但没有找到任何可以解释这一点的东西：\

* * *

heltonbiker 的代码成功了^^：D

```
from __future__ import division
from pylab import plot, ylim, xlim, show, xlabel, ylabel, grid
from numpy import linspace, loadtxt, ones, convolve
import numpy as numpy

data = loadtxt("sunspots.txt", float)

def movingaverage(interval, window_size):
    window= numpy.ones(int(window_size))/float(window_size)
    return numpy.convolve(interval, window, 'same')

x = data[:,0]
y = data[:,1]

plot(x,y,"k.")
y_av = movingaverage(y, 10)
plot(x, y_av,"r")
xlim(0,1000)
xlabel("Months since Jan 1749.")
ylabel("No. of Sun spots")
grid(True)
show() 
```

我得到了这个：

![图片](../Images/4e73f684551024aab59245d025f031c2.png)

非常感谢^^ :)

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2015-12-21T02:00:15.293

由于*numpy.convolve*非常慢，那些需要快速执行解决方案的人可能更喜欢更容易理解的*cumsum*方法。这是代码：

```
cumsum_vec = numpy.cumsum(numpy.insert(data, 0, 0)) 
ma_vec = (cumsum_vec[window_width:] - cumsum_vec[:-window_width]) / window_width 
```

其中*data*包含您的数据，*ma_vec*将包含*window_width*长度的移动平均值。

平均而言，*cumsum比**convolve*快 30-40 倍。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-07-05T20:37:47.593

> 在阅读这个答案之前，请记住下面还有另一个答案，来自 Roman Kh，它使用`numpy.cumsum`并且比这个答案快得多。

* * *

~~最佳~~将移动/滑动平均值（或任何其他滑动窗口函数）应用于信号的一种常见方法是使用`numpy.convolve()`.

```
def movingaverage(interval, window_size):
    window = numpy.ones(int(window_size))/float(window_size)
    return numpy.convolve(interval, window, 'same') 
```

在这里，interval 是您的`x`数组，`window_size`是要考虑的样本数。窗口将以每个样本为中心，因此它会在当前样本之前和之后获取样本以计算平均值。您的代码将变为：

```
plot(x,y)
xlim(0,1000)

x_av = movingaverage(interval, r)
plot(x_av, y)

xlabel("Months since Jan 1749.")
ylabel("No. of Sun spots")
show() 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-07-05T20:41:10.537

移动平均是卷积，numpy 会比大多数纯 python 操作更快。这将为您提供 10 点移动平均线。

```
import numpy as np
smoothed = np.convolve(data, np.ones(10)/10) 
```

如果您正在处理时间序列数据，我也**强烈建议您使用大熊猫包。**内置了一些不错的[移动平均操作](http://pandas.pydata.org/pandas-docs/stable/computation.html#moving-rolling-statistics-moments)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-05T20:36:15.813

```
ravgs = [sum(data[i:i+5])/5\. for i in range(len(data)-4)] 
```

这不是最有效的方法，但它会给出您的答案，我不清楚您的窗口是 5 分还是 10。如果是 10，请将每个 5 替换为 10，将 4 替换为 9。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-29T04:27:19.317

接受的答案有问题。我认为我们需要在这里使用**“有效”**而不是**“相同”** - `return numpy.convolve(interval, window, 'same')`。

作为一个例子，试试这个数据集的 MA = `[1,5,7,2,6,7,8,2,2,7,8,3,7,3,7,3,15,6]`- 结果应该是`[4.2,5.4,6.0,5.0,5.0,5.2,5.4,4.4,5.4,5.6,5.6,4.6,7.0,6.8]`，但是“相同”会给我们一个不正确的输出`[2.6,3.0,4.2,5.4,6.0,5.0,5.0,5.2,5.4,4.4,5.4,5.6,5.6, 4.6,7.0,6.8,6.2,4.8]`

生锈的代码来试试这个 - ：

```
result=[]
dataset=[1,5,7,2,6,7,8,2,2,7,8,3,7,3,7,3,15,6]
window_size=5
for index in xrange(len(dataset)):
    if index <=len(dataset)-window_size :
        tmp=(dataset[index]+ dataset[index+1]+ dataset[index+2]+ dataset[index+3]+ dataset[index+4])/5.0
        result.append(tmp)
    else:
      pass

result==movingaverage(y, window_size) 
```

用 valid & same 试试这个，看看数学是否有意义。

另见-：[http ://sentdex.com/sentiment-analysisbig-data-and-python-tutorials-algorithmic-trading/how-to-chart-stocks-and-forex-doing-your-own-financial-charting/计算简单移动平均 sma-python/](http://sentdex.com/sentiment-analysisbig-data-and-python-tutorials-algorithmic-trading/how-to-chart-stocks-and-forex-doing-your-own-financial-charting/calculate-simple-moving-average-sma-python/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-23T22:07:26.657

我的移动平均线函数，没有 numpy 函数：

```
from __future__ import division  # must be on first line of script

class Solution:
    def Moving_Avg(self,A):
        m = A[0]
        B = []
        B.append(m)
        for i in range(1,len(A)):
            m = (m * i + A[i])/(i+1)
            B.append(m)
        return B 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T20:29:20.280

我认为是这样的：

```
aves = [sum(data[i:i+6]) for i in range(0, len(data), 5)] 
```

但我总是要仔细检查指数是否符合我的预期。你想要的范围是 (0, 5, 10, ...) 和 data[0:6] 会给你 data[0]...data[5]

ETA：哎呀，当然，你想要 ave 而不是 sum。所以实际上使用你的代码和公式：

```
r = 5
x = data[:,0]
y1 = data[:,1]
y2 = [ave(y1[i-r:i+r]) for i in range(r, len(y1), 2*r)]
y = [y1, y2] 
```

# c - 如何将模式与多行匹配并显示它们？

> ID：11352048
> 
> 赞同：0
> 
> 时间：2012-07-05T20:24:27.237
> 
> 标签：c, regex, grep

我有一个头文件（.h），其中包含 C 中结构的定义。

有些是这样定义的：

```
typedef struct {
 ...
 ...
 ...
} structure1 
```

有些是这样定义的：

```
typedef struct structure2 {
 ...
 ...
 ...
} structure2 
```

和一些命令的结构定义：一些是这样定义的：

```
//typedef struct {
// ...
// ...
// ...
//} structure1 
```

如何使用 egrep 或更多 unix 命令查找头文件中的所有结构并打印所有结构的名称？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:34:03.447

这很容易`perl`：

```
perl -e 'local $/; $_ = <>; print $1."------\n" while (/(typedef struct {.*?}.*?\n)/msg);' 
```

例子：

```
$ cat /tmp/1.txt 
typedef struct {
 ...
 ...
 ...
} structure1

hello

typedef struct {
 ...
 ...
 ...
} structure2

bye

$ cat /tmp/1.txt | perl -e 'local $/; $_ = <>; print $1."------\n" while (/(typedef struct {.*?}.*?\n)/msg);'
typedef struct {
 ...
 ...
 ...
} structure1
------
typedef struct {
 ...
 ...
 ...
} structure2
------ 
```

已建立的块用`---------`.

当您只想获取结构的名称时，您必须对正则表达式的另一部分进行分组（使用 对需要的部分进行分组`()`）：

```
$ cat /tmp/1.txt | perl -e 'local $/; $_ = <>; print $1."\n" while (/typedef struct {.*?}\s*(.*?)\n/msg);'
structure1
structure2 
```

如您所见，我稍微修改了正则表达式：

```
/typedef struct {.*?}\s*(.*?)\n/ 
```

后面的字符串部分`}`将被捕获到组`$1`中。

# database - 使用 Mediawiki 连接到自定义数据库？

> ID：11352052
> 
> 赞同：2
> 
> 时间：2012-07-05T20:24:54.460
> 
> 标签：database, mediawiki

我不知道这是否可行，而且我知道 Mediawiki 并不是为此而设计的，但我无法真正找到有关此的任何信息，并且担心我没有使用正确的术语。是否可以将 Mediawiki 上的页面连接到数据库？例如，假设您在服务器上的数据库中存储了一个信息表，其中列出了一堆国家/地区数据。有没有办法让 Mediawiki 页面从该数据库中获取信息，比如使用 PHP，并将其输出为 HTML 表格？像传统的 .php 文件那样链接到您的 mySQL 表并将它们的信息显示到 HTML 表中？还是我必须使用我的 PHP 脚本来生成表格，然后基本上将信息 c/p 到 Mediawiki 中？

太感谢了！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T18:05:56.997

这是正确的扩展，我会说（虽然我有偏见，因为我写了它）：[http ://www.mediawiki.org/wiki/Extension:External_Data](http://www.mediawiki.org/wiki/Extension:External_Data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:55:36.647

这个扩展应该这样做：[http](http://www.mediawiki.org/wiki/Extension:SQL2Wiki) ://www.mediawiki.org/wiki/Extension:SQL2Wiki 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:33:03.193

您可以轻松地在 PHP 中为 MediaWiki[编写扩展](http://www.mediawiki.org/wiki/Manual%3aExtensions)，这些扩展可以连接到您的自定义数据库。

您的情况可以通过专门用于获取该国家/地区表的[特殊页面来解决，但您也可以编写解析器函数挂钩或](http://www.mediawiki.org/wiki/Manual%3aSpecial_pages)[标记扩展](http://www.mediawiki.org/wiki/Manual%3aTag_extensions)以将表（或该数据库中的任何其他表？）包含在通常的 wiki 页面中。

# postgresql - PostgreSQL 复合主键

> ID：11352056
> 
> 赞同：45
> 
> 时间：2012-07-05T20:25:17.037
> 
> 标签：postgresql, indexing, composite-primary-key

在 MySQL 中，当我创建复合主键时，例如使用 columns `X, Y, Z`，所有三列都会自动成为索引。Postgres 也会发生同样的情况吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-07-05T21:03:35.563

如果你创建一个复合主键 on `(x, y, z)`，PostgreSQL 会借助一个`UNIQUE`多列 btree 索引 on来实现这一点`(x, y, z)`。此外，所有三列都是（隐式），这是 a和 a`NOT NULL`之间的主要区别。`PRIMARY KEY``UNIQUE INDEX`

除了对数据的明显限制外，[多列索引](https://www.postgresql.org/docs/current/indexes-bitmap-scans.html)`x`对查询性能的影响也与、`y`和上的三个单独索引有所不同`z`。

dba.SE的相关讨论：

*   [PostgreSQL中索引的工作](https://dba.stackexchange.com/q/6115/3684)

通过示例、基准、讨论和展望[Postgres 9.2 中](https://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.2#Index-only_scans)[*仅索引扫描*](https://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.2#Index-only_scans)的新功能。

特别是，主键 on将`(x, y, z)`加速条件为 on`x`或最佳的查询。它还有助于查询、或，但程度要小得多。`(x,y)``(x,y,z)``y``z``(y,z)``(x,z)`

如果您需要加快对后一种组合的查询，您可能需要更改 PK 约束中的列顺序和/或创建一个或多个附加索引。看：

*   [复合索引是否也适用于第一个字段的查询？](https://dba.stackexchange.com/a/27493/3684)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:54:43.230

不，你得到一个三列主键的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:42:48.663

[是的](http://www.postgresql.org/docs/current/static/indexes-unique.html)：

> 当为表定义唯一约束或主键时，PostgreSQL 会自动创建唯一索引。索引涵盖构成主键或唯一约束的列（多列索引，如果适用），并且是强制执行约束的机制。

# php - PHP MySQL 在 float(3,1) 中插入总是得到“0”作为十进制

> ID：11352057
> 
> 赞同：0
> 
> 时间：2012-07-05T20:25:18.230
> 
> 标签：php, mysql, floating-point, decimal

我想将此值插入到我的数据库中的 FLOAT(3,1) 列中：

```
$sec['votos_rating'] = 5 + ($sec['votos_pos'] * (5 / $sec['votos_total'])) - ($sec['votos_neg'] * (5 / $sec['votos_total'])); 
```

但我总是得到`1.0`, `2.0`, `3.0`, 等等...

你知道我做错了什么吗？

这就是问题所在：

```
 $db->addInteger('votos_rating', $sec['votos_rating']); 
```

我应该改用 addFloat ... ;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:57:47.530

用于`addFloat($val)`实现您想要的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:27:35.520

可能是您使用 $db->addInteger 吗？

# multithreading - 分工，将任务分配给线程数组

> ID：11352059
> 
> 赞同：1
> 
> 时间：2012-07-05T20:25:21.003
> 
> 标签：multithreading, delphi, delphi-xe2

我需要对备忘录中的文本进行数学计算。[文件大小：~2mb]

一个合适的例子是我需要解码的编码文本。

我将备忘录文本传递给一个字符串以便对其进行解码。我想使用线程运行我的解码功能会更快。但经过一番谷歌搜索后，我没有找到适合我目的的好例子。

示例函数：

```
function entr_base_N(my_text:String):String;
var
    ts_hamil64:Integer;
begin
    For ts_hamil64 := 1 to Length(my_text) do
    begin
         Result:= Result + Chr(Ord(my_text[ts_hamil64])+10)
    end;    
end;
.....
.....
Memo1.Text:=entr_base_N(Memo1.Text) 
```

我想把工作分成小块，平均分配工作，比如说 3..8 个线程并将我的解码功能分配给这些线程。你能指导我吗？

当前处理文本文件的时间：~35 秒。谢谢你的热心帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:56:14.127

线程不是问题。您的函数`entr_base_N`会立即运行。在调试器中尝试。你会发现它根本不需要时间。在现代计算机上处​​理 2MB 的字符串是微不足道的。也就是说，我总是建议在可能的情况下预先分配一个返回缓冲区。

所有时间都花在将结果字符串发送回备忘录控件上。发生的事情是您将#13 和#10 字符转换为#23 和#20。无论出于何种原因，备忘录控件都不喜欢这样。在我看来，您发送回一个根本没有换行符的字符串，并且备忘录的自动换行代码表现不佳。

一个快速而肮脏的方法是`WordWrap`在`False`你的备忘录上设置。

这里的重要教训是，您必须在尝试优化之前正确识别瓶颈。不过，这很容易落入陷阱，正如我最初为回答这个问题所做的努力所表明的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:43:03.360

要更快地分配到 Memo1.Text，您可以使用以下命令：

```
memo1.Perform(wm_setredraw, 0, 0);
try
  memo1.Text:= entr_base_N(memo1.Text);
finally
  memo1.Perform(wm_setredraw, 1, 0);
  memo1.invalidate;
end; 
```

# knockout.js - KnockoutJS 与 UL LI 的数据绑定

> ID：11352060
> 
> 赞同：0
> 
> 时间：2012-07-05T20:25:24.877
> 
> 标签：knockout.js

我有一个文本框和一个按钮，如果我在文本框中输入一些文本并单击按钮，文本框下方的 UL LI 部分将添加新项目。我想为 UL Li 设置数据绑定，以便在提交表单时收集所有项目。

在实施这样的事情时我需要采取什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:32:33.880

以下 knockoutjs.com[文档](http://knockoutjs.com/documentation/foreach-binding.html)页面中的示例 #2 听起来非常接近您想要实现的目标。通过一些小的修改，它可以满足您的需求。

# ruby-on-rails - 笛卡尔积红宝石

> ID：11352061
> 
> 赞同：8
> 
> 时间：2012-07-05T20:25:27.357
> 
> 标签：ruby-on-rails, ruby

```
class CartesianProduct
include Enumerable
# your code here
end
#Examples of use
c = CartesianProduct.new([:a,:b], [4,5])
c.each { |elt| puts elt.inspect }
# [:a, 4]
# [:a, 5]
# [:b, 4]
# [:b, 5]
c = CartesianProduct.new([:a,:b], [])
c.each { |elt| puts elt.inspect }
# (nothing printed since Cartesian product
# of anything with an empty collection is empty) 
```

我是红宝石新手。而且我了解如何定义笛卡尔积的实例方法，但对此我一无所知。我应该如何构造类对象来满足要求。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-05T20:36:47.820

我建议使用[`Array#product`](https://ruby-doc.org/core-2.4.0/Array.html#method-i-product).

```
[:a, :b].product [4,5] 
```

这将产生你想要的输出。

```
irb(main):001:0> [:a, :b].product [4,5]
=> [[:a, 4], [:a, 5], [:b, 4], [:b, 5]]
irb(main):002:0> 
```

如果你想要一个惰性的排列生成器，我以前写过这样的东西。但是我警告你，如果你有大量的排列来计算它可能需要一段时间。您应该能够从该文件的前 40 - 45 行中获取您需要的内容[（](https://github.com/rk/werd/blob/master/grammartest.rb)无论如何，该文件是一个实验）。

诀窍是使用 Ruby 1.9.2 构建枚举器来处理数组数组。因此，您首先构建一个将在数组中无限循环的枚举器，然后在您的数组数组枚举器中跟踪第一个输出集并在第二次命中时结束循环。这是我能弄清楚如何终止这样一个循环的唯一方法。

```
def infinite_iterator(array)
  Enumerator.new do |result|
    loop do
      array.cycle { |item| result << item }
    end
  end
end

def cartesian_iterator(data)
  Enumerator.new do |result|
    first = data.map { |p| p.next }
    result << first

    i = 1
    parts = first.dup
    loop do
      parts[2-i] = data[2-i].next
      break if parts == first

      result << parts.join
      i = ((i + 1) % parts.size)
    end
  end
end

array = [ infinite_iterator([:a,:b]), infinite_iterator([4,5]) ]
generator = cartesian_iterator(array)

generator.each { |a| p a } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-05T21:22:36.233

I wouldn't use a class for that, but keeping the structure of the question, I'd write:

```
class CartesianProduct
  include Enumerable

  def initialize(xs, ys)
    @xs = xs
    @ys = ys
  end

  def each
    return to_enum unless block_given?
    @xs.each do |x| 
      @ys.each { |y| yield [x, y] }
    end
  end
end 
```

Instead, I'd simply write `xs.product(ys)` or build my own `Array#lazy_product` if laziness were important (see this [ticket](http://bugs.ruby-lang.org/issues/6499)).

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-05T20:36:57.440

您需要`each`在您的类中定义一个方法来调用`yield`产品的每个组合。

您可以使用`Array#product`，但它返回一个数组，因此它并不懒惰。

Ruby 2.0 中有一个[提案`Array.product`](http://bugs.ruby-lang.org/issues/6499)可以做到这一点。

# ruby-on-rails - 在 iFrame 内的新窗口中打开链接

> ID：11352072
> 
> 赞同：1
> 
> 时间：2012-07-05T20:26:32.060
> 
> 标签：ruby-on-rails, iframe, toolbar

我正在寻找类似于固定在新打开页面顶部的 Digg/Stumbleupon 栏的东西。

在我的应用程序中，我显示了一堆指向外部站点的链接。不，当有人单击其中一个时，我希望它们在新标签中打开，我的徽标/栏位于页面顶部。

我认为这可以使用 iframe 来完成。

但是，我不知道将 iframe src 的 URL 参数传递到新选项卡上的最简单方法是什么。

任何反馈都深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:36:17.420

您必须将链接指向 Rails 操作，将外部 URL 作为参数传递。

所以而不是：

```
 = link_to "http://rubyonrails.org/"
 # => <a href="http://rubyonrails.org/"> 
```

您将链接到：

```
 = link_to open_url_path, url: "http://rubyonrails.org/"
 # => <a href="/open_url?url=http%3A%2F%2Frubyonrails.org%2F"> 
```

然后您可以将 url 从您的控制器传递到视图：

```
def open_url
  @url = params[:url]
end 
```

并呈现包含您的工具栏和 iframe 的 HTML：

```
<div id="toolbar" />
<iframe src="<%= @url %>" /> 
```

# attributes - Unboundid LDAP 域属性

> ID：11352073
> 
> 赞同：3
> 
> 时间：2012-07-05T20:26:32.660
> 
> 标签：attributes, passwords, ldap, dns

我需要根据 Active Directory 评估用户的密码过期时间。
我正在使用 Android 和 Unboundid sdk。我可以使用此代码成功连接到服务器

```
final SocketFactory _socket_factory;
final SSLUtil _ssl_util = new SSLUtil(new TrustAllTrustManager());

try {               
  _socket_factory = _ssl_util.createSSLSocketFactory();             
}
catch (Exception e) {
  Log.e(LOG_TAG, "*** Unable to initialize ssl", e);
  return null;              
}

LDAPConnectionOptions _ldap_connection_options = new LDAPConnectionOptions();
_ldap_connection_options.setAutoReconnect(true);
_ldap_connection_options.setConnectTimeoutMillis(30000);
_ldap_connection_options.setFollowReferrals(false);
_ldap_connection_options.setMaxMessageSize(1024*1024);

LDAPConnection _ldap_connection = new LDAPConnection(_socket_factory, _ldap_connection_options, _host, _port);

BindRequest _bind_request = new SimpleBindRequest(_username, _password);
BindResult _bind_result = _ldap_connection.bind(_bind_request); 
```

我使用搜索检索用户属性

```
Filter _filter = Filter.create("(userPrincipalName=lorenzoff)");
SearchRequest _search_request = new SearchRequest(_server._base_dn, SearchScope.SUB, _filter); 
```

但是我怎样才能读取域的属性' *maxPwdAge* '？我可以在域属性中看到它...

![在此处输入图像描述](../Images/88a0e05ae244eeacdbceffc88e885ca5.png)

我需要它来评估用户密码过期之前的剩余天数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T16:56:14.600

我遇到了同样的问题并找到了解决方案。这个想法很简单，您必须访问基本 DN 并获取该属性：

```
SearchRequest _search_request = new SearchRequest(_server._base_dn, 
      SearchScope.BASE, "(objectClass=*)","maxPwdAge"); 
```

有了这个，你应该得到那个属性的结果，如果你得到了，`SearchRequest.ALL_USER_ATTRIBUTES`你将拥有屏幕截图上显示的所有属性。

该属性对所有用户都是通用的，接下来您需要做的是搜索您的特定用户，就像您在获取属性之前所做的`pwdLastSet`那样，因为您期望它具有用户最后一次更改密码的时间戳。

现在很简单，你需要找到用户最后一次更改它的到期日期，以及密码年龄

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:50:34.147

如果`maxPwdAge`是“操作”属性，则必须在搜索请求中明确请求。返回“用户”属性（如果权限允许），但必须明确请求“操作”属性。要请求`maxPwdAge`创建您的请求，如下所示：

```
SearchRequest _search_request = new SearchRequest(_server._base_dn, 
      SearchScope.SUB, _filter,"maxPwdAge"); 
```

构造`SeachRequest`函数实际上也接受一个可变长度的属性类型列表：

```
SearchRequest _search_request = new SearchRequest(_server._base_dn, 
     SearchScope.SUB,_filter,"maxPwdAge","minPwdAge",
     SearchRequest.ALL_USER_ATTRIBUTES); 
```

requests `maxPwdAge`、`minPwdAge`和所有其他用户属性。要请求所有操作属性，请使用`SearchRequest.ALL_OPERATIONAL_ATTRIBUTES`.

# android - 如何检查android数据库中的重复名称？

> ID：11352081
> 
> 赞同：1
> 
> 时间：2012-07-05T20:27:13.367
> 
> 标签：android, database, cursor, duplicate-data

我想从两个编辑文本中输入姓名和电话号码。我使用两个按钮保存并使用列表视图在模拟器中显示它。输入姓名后，当我单击保存按钮时，**如何检查我是否已经输入了相同的姓名。**我是 android 的新手，解释会很有帮助。

```
public void onCreate(SQLiteDatabase db) {

    db.execSQL("CREATE TABLE "+tbname+"("+Key_id+" INTEGER PRIMARY KEY AUTOINCREMENT, "+Key_name+" TEXT,"+Key_mobile+" TEXT)");

}

public void n(String aa, String bb) {
    SQLiteDatabase db=this.getWritableDatabase();
    ContentValues cv=new ContentValues();
    cv.put(Key_name, aa);
    cv.put(Key_mobile, bb);
    db.insert(tbname, Key_name, cv);

    db.close();

}

public Cursor cr()

{
    SQLiteDatabase db=getReadableDatabase();
    String [] colms=new String[]{Key_id+" as _id",Key_name,Key_mobile};
    Cursor cur=db.query(tbname, colms, null, null, null, null, null);
    cur.moveToFirst();
    return cur;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:47:02.233

我将首先通过添加 NOT NULL 和 UNIQUE 约束来更改您的表定义。

```
db.execSQL("CREATE TABLE "+tbname+"("+Key_id+" INTEGER PRIMARY KEY AUTOINCREMENT, "+Key_name+" TEXT NOT NULL UNIQUE,"+Key_mobile+" TEXT)"); 
```

然后，您可以选择用于插入的方法。您可以使用：

`insertOrThrow`将返回您的新记录的 id，或在错误时返回 -1（并且没有唯一名称的约束失败将是一个错误）。

`insertWithOnConflict`如果输入参数 'conflictAlgorithm' = CONFLICT_IGNORE 或 -1 如果有任何错误，将返回新记录的 id 或现有行的主键。

就个人而言，我会使用`insertWithOnConflict`CONFLICT_IGNORE 标志集。这样，您可以获取重复记录的行 ID（以及不让重复记录输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:38:28.337

放入`UNIQUE`您的表字段定义，然后使用`insertOrThrow`. 如果插入相同，`insertOrThrow`会引发异常，可以拦截。

# listview - asp组合框中的选定选项

> ID：11352093
> 
> 赞同：0
> 
> 时间：2012-07-05T20:27:54.290
> 
> 标签：listview, asp-classic, listboxitem

我正在使用 asp classic（没有 .net）我有一个用户列表，当用户（按 id_rol 排序）发生变化时，例如如果用户查看，我一直试图放置一种标签列表第一个选项获取（“Todos”），这意味着他可以看到所有用户，但如果他看 1 可以看到 10 个 id_rol=1 的用户，如果看这个列表的第 12 个位置，它会显示一个标签调用“编辑器”并显示其他 10 个用户，我的问题是，在代码中我告诉如果选项为 0 显示 TODO，如果为 1 显示 DIRECTOR 和下面的用户，如果选择为 12 显示 DIGITADOR 和所有用户该描述，如果列表中的位置是 22，则显示 EDITOR 并继续，

![在此处输入图像描述](../Images/f52a3dda55ae83550e1c0b8c5cbd5ebf.png) rigth 现在显示 0、1、2 和 3 位置的选项，但我需要 0、1、12 和 22 位置的选项有什么帮助吗？请。这是我的代码：

```
function cb_usuarios(cod_usuario)
'response.write seccion&"<*------"
sql=" select * from usuarios where 1=1"
'sql=" select * from usuarios where 1=1 order by id_rol asc"
if Session("id_perfil") ="1" then sql = sql &" and id_rol in(3,4)"
if Session("id_perfil") ="2" then sql = sql &" and id_rol=3"
if Session("id_perfil") ="3" then sql = sql &" and id_rol in(3,4,7)"
if Session("id_perfil") ="4" then sql = sql &" and id_rol in(1,7,6)"
if Session("id_perfil") ="6" then sql = sql &" and id_rol in(7,4)"
'sql = sql &" order by nombre "
 sql = sql &" order by id_rol "

'if(id_rol=1)then
'response.write director
'else
'response.write('esto es una prueba')
'response.write sql
Set rsx = Server.CreateObject("ADODB.Recordset")
rsx.Open SQL, conexion, 3
%>

Usuarios<select name="usuarios" class="filtros">
<option selected value="0">TODOS</option>
<option selected value="1">DIRECTOR</option>
<option selected value="12">DIGITADOR</option>
<option selected value="22">EDITOR</option>

<%
while not rsx.eof
if ( trim(rsx("usuario")) = trim(cod_usuario)) then
sel="Selected"
else
sel=""
end if 
%>
<option select value="<%=rsx("usuario")%>" <%=sel%>><%=rsx("nombre")%></option>
<%
rsx.movenext
wend
rsx.close
%></select><%
end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:46:47.607

选择的语法是...

```
<select>
    <option value="1">unos</option>
    <option selected value="2">duos</option> 
```

没有这样的事情：选项***选择***值....***选择***是错误的html只有选择的是html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:41:14.740

这段代码成功了：

![在此处输入图像描述](../Images/717dab8376ee495db02ec626718ff263.png)

```
function cb_usuarios(cod_usuario)
'response.write seccion&"<*------"

     sql=" select * from usuarios where 1=1"
    'sql=" select * from usuarios where 1=1 order by id_rol asc"

            if Session("id_perfil") ="1" then sql = sql &" and id_rol in(3,4)"
            if Session("id_perfil") ="2" then sql = sql &" and id_rol=3"
    if Session("id_perfil") ="3" then sql = sql &" and id_rol in(3,4,7)"
    if Session("id_perfil") ="4" then sql = sql &" and id_rol in(1,7,6)"
    if Session("id_perfil") ="6" then sql = sql &" and id_rol in(7,4)"

        'sql = sql &" order by nombre "
     sql = sql &" order by id_rol "

    'if(id_rol=1)then
    'response.write director
    'else
    'response.write('esto es una prueba')

'   response.write sql
    Set rsx = Server.CreateObject("ADODB.Recordset")
    rsx.Open SQL, conexion, 3
%>

Usuarios<select name="usuarios" class="filtros">

        <option selected value="0">TODOS</option>

    <%
    while not rsx.eof
        if ( trim(rsx("usuario")) = trim(cod_usuario)) then
            sel="Selected"
        else
            sel=""
        end if 
                    if ( trim(rsx("id")) =9) then
                     %>
        <option select value="0" <%=sel%>>======DIRECTOR=======</option>
        <%
                      end if
                     if ( trim(rsx("id")) =47) then
                     %>
        <option select value="0" <%=sel%
>>======DIGITADOR=======</option>
        <%
                      end if
                  if ( trim(rsx("id")) =37) then
                  %>
        <option select value="0" <%=sel%>>=====EDITOR========</option>
        <%
        end if
        if ( trim(rsx("id")) =24) then
                  %>
        <option select value="0" <%=sel%>>=====SUPERVISOR
JEFE========</option>
        <%
        end if
        if ( trim(rsx("id")) =41) then
                  %>
        <option select value="0" <%=sel% 
 >>=====ADMINISTRADOR========</option>
        <%
        end if
        if ( trim(rsx("id")) =43) then
                  %>
        <option select value="0" <%=sel%
 >>=====SUPERVISOR========</option>
        <%
        end if

        if ( trim(rsx("id")) =29) then
                  %>
        <option select value="0" <%=sel%
 >>=====CODIFICACION========</option>
        <%
        end if      %>
        <option select value="<%=rsx("usuario")%>" <%=sel%>><%=rsx
 ("nombre")%></option>
        <%
        rsx.movenext
    wend
    rsx.close
%></select><%
 end function 
```

# jquery - Internet Explorer 文本阴影 + 悬停

> ID：11352095
> 
> 赞同：-1
> 
> 时间：2012-07-05T20:27:57.110
> 
> 标签：jquery, internet-explorer, css

我正在尝试制作一个悬停时“取消模糊”（删除文本阴影）的页面。

这适用于除 IE 之外的所有浏览器：http: [//mmhudson.com/brett.html](http://mmhudson.com/brett.html)

它不起作用，因为当元素未悬停时我将颜色设置为“透明”，并且 IE 过滤器“模糊”继承了它，因此文本阴影也是透明的。

我怎样才能使过滤器不继承它或使它只有阴影不可见？

我目前正在使用插件，但如果更可取，我可以使用常规 css。

[http://jsfiddle.net/PaDwt/](http://jsfiddle.net/PaDwt/)

如果 IE 阻塞，请注意 html

我只需要支持 IE8 和 IE9，但 IE7 和更早版本也不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:35:24.147

看这个：[CSS Blurred text shadow in IE part I](http://www.useragentman.com/blog/2011/04/23/css-blurred-text-shadow-in-ie-part-i/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:42:11.583

问题不在于它继承了透明色，而在于 IE 根本不支持 text-shadow。

使用这个 stackoverflow.com/questions/6905658/css3-text-shadow-in-ie9

```
p.shadow { 
    filter: progid:DXImageTransform.Microsoft.Shadow(color=#0000FF,direction=45);
} 
```

- - - - - -编辑 - - - - - - -

这是你要找的吗？ [http://jsfiddle.net/PaDwt/4/](http://jsfiddle.net/PaDwt/4/)

-CSS

```
#paragraphs p{
  /*the width needs to be a set value, not a percentage*/
  width: 600px;
  /*blur all paragraphs*/
  color: transparent;
  text-shadow: 0px 0px 2px #666666;
  filter: progid:DXImageTransform.Microsoft.Blur(pixelradius=3);
} 
```

-JS

```
$(document).ready(function(){
  if($.browser.msie) $("#paragraphs p").css("color", "black");
  $("#paragraphs p").mouseover(function(){
    var thisP = this;
    if($.browser.msie)
    {
      $("#paragraphs p").css({
        filter:"progid:DXImageTransform.Microsoft.Blur(pixelradius=3)"
      });
    }
    else{
      $("#paragraphs p").css({
        color:"transparent",
        textShadow:"0 0 2px #666",
      });
    }
    $(thisP).css({
      color:"#000",
      textShadow:"none",
      filter:"none"
    })
  });
  $("#paragraphs p").mouseout(function(){
    if($.browser.msie)
    {
      $("#paragraphs p").css({ 
        filter:"progid:DXImageTransform.Microsoft.Blur(pixelradius=3)"
      });
    }
    else
    {
      $("#paragraphs p").css({
        color:"transparent",
        textShadow:"0 0 2px #666"
      });
    }
  });
});​ 
```

这适用于我在 IE9 中。

# batch-file - 制作 .bat 文件以在所有 .txt 中搜索

> ID：11352097
> 
> 赞同：-2
> 
> 时间：2012-07-05T20:28:05.050
> 
> 标签：batch-file

我使用此代码在特定输入中进行搜索：

如何在不要求特定文件的情况下使此代码搜索所有 .txt？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:38:40.433

我更喜欢“findstr”命令。检查它的帮助'findstr /？对于完整的选项列表，但我会像这样使用它：

```
set /p text=what text do you want to find?
set /p outfile=where to place the results? 
findstr /sipnc:"%text%" *.txt > "%outfile%" 
```

编辑：添加了输出文件重定向以更紧密地匹配您的原始脚本。

下面更新了脚本（在批处理文件中）：

```
@echo off
set /p test=what text do you want to find?
set /p outfile=where to place the results?
echo.>%outfile%
for /f %%f in ('dir /s /b *.txt') do find /i "%text%" < "%%f" >> "%outfile%" 
```

# c# - 计算 C# 中的转发总数

> ID：11352098
> 
> 赞同：1
> 
> 时间：2012-07-05T20:28:07.920
> 
> 标签：c#, twitter, tweets

我正在用 C# 创建一个 Web 应用程序，我想计算转发给用户的总数。

我发现了很多用于计算[特定推文](https://api.twitter.com/1/users/show.json?screen_name=kool_aid_wino)转发的代码片段，但我想计算转发给用户的总数（不使用 OAuth）。以前有人做过这种类型的工作吗？

温柔地感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:29:39.250

你的意思是用户看到了多少转推？

有一个特定的 API 调用 - 请参阅[statuses/retweeted_to_user 的文档](https://dev.twitter.com/docs/api/1/get/statuses/retweeted_to_user)

这是人们发给我的最后 100 条转推

```
https://api.twitter.com/1/statuses/retweeted_to_user.xml?screen_name=edent&count=100 
```

此方法**不需要**OAuth

***编辑***根据您的回答...

您想计算用户转发了多少次。

您需要调用[用户的时间线](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)并确保您有 include_rts=true

因此，例如，要获取我发送的最后 200 条推文

```
https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=edent&count=200 
```

然后，计算“retweeted_status”的数量。

同样，这不需要 OAuth。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T20:26:25.007

有一个特定的 API 调用 - 请参阅 statuses/retweeted_to_user 的文档，您也可以在那里查看文档，有许多可用的免费库可以达到此目的

# python - 遍历列表并精美处理 Python 中的 StopIteration

> ID：11352099
> 
> 赞同：8
> 
> 时间：2012-07-05T20:28:08.873
> 
> 标签：python, list, iterator, stopiteration

我正在尝试遍历列表，并且仅当迭代到达列表末尾时才需要执行特定操作，请参见下面的示例：

```
data = [1, 2, 3]

data_iter = data.__iter__()
try:
    while True:
        item = data_iter.next()
        try:
            do_stuff(item)
            break # we just need to do stuff with the first successful item
        except:
            handle_errors(item) # in case of no success, handle and skip to next item
except StopIteration:
    raise Exception("All items weren't successful") 
```

我相信这段代码不是太 Pythonic，所以我正在寻找更好的方法。我认为理想的代码应该如下所示：

```
data = [1, 2, 3]

for item in data:
    try:
        do_stuff(item)
        break # we just need to do stuff with the first successful item
    except:
        handle_errors(item) # in case of no success, handle and skip to next item
finally:
    raise Exception("All items weren't successful") 
```

欢迎任何想法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T20:30:19.573

您可以`else`在 for 循环之后使用，其中的代码`else`只有在您没有`break`退出 for 循环时才会执行：

```
data = [1, 2, 3]

for item in data:
    try:
        do_stuff(item)
        break # we just need to do stuff with the first successful item
    except Exception:
        handle_errors(item) # in case of no success, handle and skip to next item
else:
    raise Exception("All items weren't successful") 
```

您可以在[声明的](http://docs.python.org/reference/compound_stmts.html#the-for-statement)[文档中`for`](http://docs.python.org/reference/compound_stmts.html#the-for-statement)找到它，相关部分如下所示：

```
for_stmt ::=  "for" target_list "in" expression_list ":" suite
              ["else" ":" suite] 
```

> 在第一个套件中执行的`break`语句终止循环而不执行该`else`子句的套件。

# java - Java - 将十进制解析为 x 位字节的解析器库

> ID：11352100
> 
> 赞同：1
> 
> 时间：2012-07-05T20:28:11.200
> 
> 标签：java, parsing, converter, 8-bit

我的解析器有问题。

问题是我得到一个整数，例如“8”，我需要将它转换为一个 8 位无符号字节。稍后我将收到一个整数“56”，需要使用相同的方法对其进行转换，但是当我得到一个“-53”（例如）时，我会说这是通信和发送中的错误。

例如，

```
number = 538; //or 63492873 or 8 or 17826312631 or -231 or whatever
try{
  byte response[] = Parse8BitUnsigned(number);
}catch(Idkexcepcion ex){
  System.out.println("the number is a signed one");
  byte response[] = Parse8BitSigned(number);
} 
```

注意： Parse8BitSigned() 和 Parse8BitSigned() 尚未实现。我需要那个方法来处理任何数字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:50:59.290

你可以[`ByteBuffer`](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)用来做你想做的事：

```
String number="8";
int num = Integer.valueOf(number);
if(num < 0 ) //ERROR
// Return 8 in a 4 bytes array
byte[] bytes = ByteBuffer.allocate(4).putInt(num).array(); 
```

# java - 在整个测试套件中加载一次 bean

> ID：11352102
> 
> 赞同：0
> 
> 时间：2012-07-05T20:28:27.073
> 
> 标签：java, spring, hibernate, junit

我有一个描述我的会话工厂的 bean。我只想在整个测试套件中加载这个 bean 一次。我想知道，这可能吗？如果可能的话，我也想本地化到我`context.xml`的。我可以发布你想要的任何来源，只要问。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:35:11.960

在 Spring 测试框架中，如果所有测试用例类使用相同的`locations`属性，则在运行之间保留上下文。在下面的示例中，定义的上下文`context.xml`将仅加载一次（在第一个测试用例之前），并将在 JVM 退出时关闭：

```
@ContextConfiguration(locations = "classpath:context.xml")
@Transactional
public class FooTest {
  //...
}

@ContextConfiguration(locations = "classpath:context.xml")
@Transactional
public class BarTest {
  //...
} 
```

您不能只保留一个 bean，但您可以加载整个上下文一次。请参阅我的文章[*加速 Spring 集成测试*](http://nurkiewicz.blogspot.no/2010/12/speeding-up-spring-integration-tests.html)。

# php - php数组和mysql查询

> ID：11352103
> 
> 赞同：1
> 
> 时间：2012-07-05T20:28:30.327
> 
> 标签：php, mysql, arrays

这让我发疯！我需要用从数据库中提取的值填充 HTML 表。HTML 表的每个值都有 100 个 td。

我有一个我填充的数组：

```
$x = 1;
$ArrayA = array();
    for ($x = 1; $x <= 100; $x++) {
        $ArrayA[$x] = 0;
    } 
```

所以现在我有一个包含 100 个值的数组，对吧？

然后我查询我的数据库，并得到我“想要”的结果（从 table1 中选择 num）6 行具有以下值： `1,3,14,50,100.`

然后我将查询中的值插入到我之前用一百个 0 填充的 $ArrayA 中

```
$x = 1;
while ($row = mysql_fetch_array($result)) 
    { 
    extract($row);
    $ArrayA[$x] = "$num";
        $x++;   
} 
```

现在`$ArrayA`有这个： `1,3,14,17,100,0,0,0,0,0,0,0,0,0,0,0,0.....`

我的目标是用`0`我应该有一个“下一个”数字的地方替换，这很难解释。我需要这个结果： `1,0,3,0,0,0,0,0,0,0,0,0,0,14,0,0,17,0....`

我尝试使用 PHP `array_splice`，但它不起作用。我尝试了一些 if 语句，但我的逻辑和编程经验并不是那么好。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:16:09.813

```
$match_rows = mysql_fetch_array($result);
$rows = range(1,100);

    foreach( $rows as $row){

    echo '<td>';

        if( in_array($row, $match_rows) ){
        echo $row;
        }else{
        echo 0;
        }

    echo '</td>' . PHP_EOL; 

    } 
```

抱歉，这是未经测试的 - 它可能更短或更整洁，但这样可能说明了实现您想要的另一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:46:59.893

我*认为*这是您想要的第二个代码块：

```
while ($row = mysql_fetch_array($result)) 
{ 
    extract($row);
    if($num > 0 && $ <= 100 )
    {
        $ArrayA[$num] = "$num";
    } 
} 
```

如果您的数据库值为 3、10、15、22、100，那么您最终会得到 0,0,3,0,0,0,0,0,0,10,0,0,0,0,15等等等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:49:37.170

如果我理解这一点，您想在查询返回的每个元素之后添加一个零吗？正确的？如果是这样，为什么不在将元素添加到数组后立即添加零呢？

```
$x = 1; while ($row = mysql_fetch_array($result))      {

extract($row);     
$ArrayA[$x] = "$num";       
$x++;
$ArrayA[$x] = "0"; //adds zero after every $num insert    
} 
```

也许您可以澄清这是否不是您要问的...

# java - 是否有 Eclipse 插件可以从 SVN 向 jar 添加依赖项？

> ID：11352105
> 
> 赞同：0
> 
> 时间：2012-07-05T20:28:35.910
> 
> 标签：java, eclipse, dependencies

是否有一种简单的方法可以将 JAR 作为 Eclipse 中 SVN 的项目的依赖项包含在内。像 Eclipse 插件或类似的东西？

我不想使用 Maven，这对这个项目来说太过分了。

**更新 ：**

我们有 2 个项目：

*   项目 A -> 提供 projecta.jar

*   项目 B -> 需要 projecta.jar

projecta.jar 在 SVN 中自动提交

在 Eclipse 中，ProjectB 需要依赖 projecta.jar 来构建。

我想在 Eclipse 中向 projecta.jar 上的构建路径添加一个依赖项，直接添加到我们的 SVN 存储库。目前，我们只能在文件系统上这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:30:38.653

看看如何[包含一个常见的子项目](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-howto-common-projects.html#tsvn-howto-common-externals)
同一网页中的其他部分可能会有所帮助......

# line - 加权最小二乘法找到最佳拟合线

> ID：11352106
> 
> 赞同：3
> 
> 时间：2012-07-05T20:28:48.480
> 
> 标签：line, weighted

我正在尝试找出最适合多个数据点 (x,y) 的线。我正在使用这里描述的最小二乘法[http://faculty.cs.niu.edu/~hutchins/csci230/best-fit.htm](http://faculty.cs.niu.edu/~hutchins/csci230/best-fit.htm)

但是我需要调整算法，以便我可以为每个数据点添加权重，并且线条将更倾向于数据集中比其他点更重要的点。

请注意，我只知道非常基本的统计数据，因此请记住，您在回答时是在向具有基本知识的人解释。

# php - 是的，没有选项，带有用于链接的 javascript 删除功能

> ID：11352107
> 
> 赞同：2
> 
> 时间：2012-07-05T20:28:55.100
> 
> 标签：php, javascript

在第一页我有一个充满数据的表，每一行的末尾都有一个删除链接。当我单击该链接时，该链接转到另一个删除页面，其中 mysql 删除查询从数据库中删除该特定数据。该删除页面使用第一页（位置：1stpage）重定向。现在，当我想应用 javascript 删除是/否检查时，每次它都会弹出“你确定吗？” 我按是或否，数据将从我的表中删除。我认为 return false 在这种情况下不起作用。代码在下面。请帮助我我该怎么做。

对不起，我的英语不好。提前致谢。第 1 页：

```
<?php
include "include.php";
?>

<script type="text/javascript">

function show_confirm()
{
var con = confirm("Are You Sure");
if (con ==true)
  {
  alert("You pressed OK!");
  }
else
  {
  alert("You pressed Cancel!");
  }
}

 </script> 
<table>
  <tr>
    <td align="center">EDIT OR DELETE DATA</td>
  </tr>
  <tr>
    <td>
      <table border="1">
      ?php
        if(isset($_POST['submit']))
        {
            $order = "UPDATE books SET author='$_POST[author]', title='$_POST[title]', price='$_POST[price]' WHERE isbn='$_POST[isbn]'";
            mysql_query($order) or die (mysql_error());
        }   

      $order = "SELECT * FROM books ORDER BY author" or die (mysql_error());
      $result = mysql_query($order);
      while ($row=mysql_fetch_array($result))
      {
        echo ("<tr>
                <td>$row[isbn]</td>
                <td>$row[author]</td>
                <td>$row[title]</td>
                <td>$row[price]</td>
                <td> <a href=\"editdata_form.php?isbn=$row[isbn]\"> Edit </a> </td>
                <td> <a href=\"delete.php?isbn=$row[isbn]\" onclick='show_confirm()'> Delete </a> </td>
              </tr>");
      }       

  ?>
      </table>
    </td>
   </tr>
</table> 
```

mysql删除查询运行的页面：

```
<?php header("Location: editordeletedata.php"); ?>  
<p> <title>delete</title> </p>
<?php
include "include.php";
?>

<?php

if(isset($_GET['isbn']))
{
    $order = "DELETE FROM books WHERE isbn = '$_GET[isbn]'";
    mysql_query($order) or die (mysql_error());
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:40:43.030

看看我写的这个简单的代码片段，应该能让你正确解决问题。

```
<html>
<head>
<script type="text/javascript">

function show_confirm() {
    return confirm("Are You Sure");
}
</script>
</head>
<body>
    <a href="http://www.google.com" onclick='return show_confirm();'> Google </a>
</body>
</html> 
```

[**小提琴**](http://jsfiddle.net/ult_combo/AqqX6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:34:18.110

禁用删除链接并将重定向移动到 javascript 函数。该链接应如下所示：

```
<a href=\"javascript:void(0)\" onclick='show_confirm($row[isbn])'> Delete </a> 
```

而javascript函数就像这样：

```
function show_confirm(isbn)
{
if (confirm("Are You Sure"))
  {
  alert("You pressed OK!");
  location.replace('delete.php?isbn='+isbn);
  }
else
  {
  alert("You pressed Cancel!");
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:40:10.113

我看不出 return false 不起作用的任何原因。

```
function show_confirm()
{
    if (confirm("Are You Sure"))
    {
      alert("You pressed OK!");
    }
    else
    {
        alert("You pressed Cancel!");
        return false;
    }
} 
```

# c++ - 将坐标按顺时针顺序排列

> ID：11352110
> 
> 赞同：4
> 
> 时间：2012-07-05T20:29:14.477
> 
> 标签：c++, objective-c, c, math, screen-scraping

我有 9 个屏幕坐标，每个坐标代表 9 个位置之一。从右上角开始，我希望该位置从第一个位置开始，以下顺时针坐标表示第二个、第三个、第四个等等，直到第 9 个，这将是左上角的坐标。

这里有人能想出某种数学方法来确定 9 个坐标中的哪个坐标在哪个位置吗？它们都是相对的，并且永远是相对的。

示例坐标可以是：

```
(x,y)
X   Y
663 382
543 454
303 454
183 382
418 459
543 209
303 209
653 259
183 259 
```

绘制成类似的图像： ![坐标的表示](../Images/25c51e001032db0881cdab93a73a77b8.png)

有人会有什么想法吗？我只是想要某种形式的编程方式以顺时针顺序列出这些坐标......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T20:34:14.410

找到“圆”的中心，即平均 X 和平均 Y

移动 X 和 Y 值，使它们都相对于新中心。

转换为极坐标并按角度排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:40:36.170

假设我理解正确，我会做类似的事情

newPosition = (originalPosition + # of rotations) mod 8

我假设第一个位置是 0，并且您只能使事物顺时针以整数增量跳跃（因此是旋转数）

# winapi - 是否有获取高级打印机设备设置的 API？

> ID：11352116
> 
> 赞同：1
> 
> 时间：2012-07-05T20:30:10.223
> 
> 标签：winapi, vb6, printers

我需要通过 win32 api 获取特定打印机的可用支持的打印机文档功能。

下图中的示例打印机显示了我所指的选项。您可以通过右键单击打印机图标和单击首选项，然后单击对话框中的高级选项卡来获取此对话框。

![在图像中](../Images/7d7ebfce62123760cf4d061264043d86.png)

谁能告诉我需要调用的api，以及其他什么？

我的目标是 Windows Windows XP+ 并使用 vb6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:14:20.187

DeviceCapabilities 函数是只读的。您正在寻找的是[DocumentProperties 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183576%28v=vs.85%29.aspx)。DeviceCapabilities 实际上已经过时了，早就应该被淘汰了，因为它假设只有一个用户和一个应用程序在使用打印机。您不想为每个打印作业设置*打印机*属性；您想为当前打印作业设置*文档属性。*DocumentProperties 函数将为您执行此操作，但请密切注意上面链接中有关如何进行更改的说明。这是一个不必要的复杂功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:04:31.573

我认为您正在寻找的是[`DeviceCapabilities`](http://winapi.freetechsecrets.com/win32/WIN32DeviceCapabilities.htm)来自 winspool.drv 的内容。来自 Microsoft 的[示例代码。](http://support.microsoft.com/kb/81245)现在网上的大部分文档都是针对 .Net 的，所以我输入了[*Dan Appleman 的 Visual Basic Programmer's Guide to the Win32 API中的 VB6 定义*](https://rads.stackoverflow.com/amzn/click/com/0672315904)

VB6 的声明是：

```
Declare Function DeviceCapabilities& Lib "winspool.drv" Alias "DeviceCapabilitiesA" (ByVal lpDeviceName as String, ByVal lpPort as String, ByVal iIndex as Long, ByVal lpOutput as String, ByVal lpDeviceMode as Long) 
```

* * *

根据您的评论，您需要使用[`DocumentProperties`](http://winapi.freetechsecrets.com/win32/WIN32DocumentProperties.htm)它来检索或修改 [`DevMode`](http://winapi.freetechsecrets.com/win32/WIN32DEVMODE.htm)结构。它可能有也可能没有你要找的东西。你最好的办法是得到上面的书，第 12 章有丰富的信息。还看着您的图片，您似乎正在使用某种 POS 打印，您应该查阅制造商文档以了解打印机可能支持的特定 api。

```
Declare Function DocumentProperties& Lib "winspool.drv" Alias "DocumentPropertiesA" (ByVal  hwnd as Long, ByVal hPrinter as Long, ByVal pDeviceName as String, ByVal pDeviceModeOutput as Long, ByVal pDeviceModelInput as Long, ByVal fMode as Long) 
```

**开发模式结构**

```
Public Const CCHDEVICENAME = 32
Public Const CCHFORMNAME = 32

Type DEVMODE
    dmDeviceName as String * CCHDEVICENAME
    dmSpecVersion as Integer
    dmDriverVersion as Integer
    dmSize as Integer
    dmDriverExtra as Integer
    dmFields as Long
    dmOrientation as Integer
    dmPaperSize as Integer
    dmPaperLength as Integer
    dmPaperWidth as Integer
    dmScale as Integer
    dmCopies as Integer
    dmDefaultSource as Integer
    dmPrintQuality as Integer
    dmColor as Integer
    dmDuplex as Integer
    dmYResolution as Integer
    dmTTOption as Integer
    dmCollate as Integer
    dmFormName as String * CCHFORMNAME
    dpBitsPerPixel as Integer
    dmBitsPerPel as Long
    dmPelWidth as Long
    dmPelHeight as Long
    dmDisplayFlags as Long
    dmDisplayFrequency as Long
    dmICMMethod as Long
    dmICMIntent as Long
    dmMediaType as Long
    dmDitherType as Long
    dmReserved1 as Long
    dmReserved2 as Long
End Type 
```

# c# - 是否可以在 C# DataColumn.Expression 的 SUM 中使用 IIF？

> ID：11352118
> 
> 赞同：3
> 
> 时间：2012-07-05T20:30:15.777
> 
> 标签：c#, datatable, sum, iif

这是我要评估的表达式：

```
Sum(IIF(QUALITY<=9.0,1.0,0.0)) 
```

问题是

```
string expr = "Sum(IIF(QUALITY<=9.0,1.0,0.0))";
dataTable.Compute(expr, "") 
```

抛出一个错误说

```
Syntax error in aggregate argument: Expecting a single column argument with possible 'Child' qualifier. 
```

主要的挑战是我不能手动重写表达式，因为它是从 RDL 文件中以字符串形式出现在我的程序中的，所以它最初看起来像

```
Sum(IIF(Fields!QUALITY.Value<=9.0,1.0,0.0)) 
```

并且我的程序需要自动将其转换为一个字符串，该字符串在传递给`dataTable.Compute()`. 我从 Microsoft 的 Compute 方法文档中确定 C# 不喜欢“字段！” 或语法的“.Value”部分，通过删除它们，我可以使更简单的表达式正常工作；例如，这些语句都返回预期值：

```
dataTable.Compute("Sum(QUALITY)");
dataTable.Compute("Count(QUALITY)"); 
```

有可能做我想做的事吗？我觉得我应该只需要在某个地方稍微改变一下语法就可以了，但我无法在互联网上找到答案，这让我非常沮丧。

以下是我迄今为止尝试过的一些事情，但无济于事：

```
Sum(IIF([QUALITY]<=9.0,1.0,0.0))
Sum(Convert(IIF(QUALITY<=9.0,1.0,0.0), 'System.Double'))
Sum(IIF(Convert(QUALITY, 'System.Double')<=9.0,1.0,0.0)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:49:48.367

执行此操作的一种方法可能是将聚合列添加到`DataTable`Expression 设置为`IIF(QUALITY<=9.0,1.0,0.0)`。

```
dataTable.Columns.Add("AggregateColumn", typeof(double), "IIF(QUALITY<=9.0,1.0,0.0)"); 
```

然后对聚合列求和或计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:39:46.047

`IIF(condition, value1, value2)``value1`如果为真则返回`condition`，`value2`否则返回。因此，您的原始语句计算`Quality`值 <= 9 的所有字段的数量。您可以使用包含`filter`参数的重载来实现此目的。

```
dataTable.Compute("Count(QUALITY)","QUALITY <= 9"); 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)。

编辑：错过了第一轮的动态要求。

发生错误是因为 IIF 将其设为两列操作，并且`Compute`不允许在聚合函数中进行两列操作。意思`Compute("IIF(Quality <= 9, 1, 0)")`是有效的，但`Compute("Sum(IIF(Quality <= 9, 1, 0))")`不是。您可以使用`IIF(Quality <= 9, Quality, SomeOtherColumn)`而不是文字作为 的后两个参数`IIF`，并且解析器似乎不知道其中的区别。

您可以使用 Joe 的解决方案，或添加更多字符串处理以分离出条件句并将它们移至过滤器参数。Joe 的回答比试图重新实现在`Compute`.

# ios - 如何在 FMDB for iOS 中使用 SQL IN 运算符

> ID：11352122
> 
> 赞同：0
> 
> 时间：2012-07-05T20:30:42.080
> 
> 标签：ios, xcode4.3, fmdb

我一直试图让 IN 运算符与 FMDB 一起工作，但运气为零。我尝试了许多不同的谷歌搜索，我发现的唯一相关帖子是在 Stack Overflow 上，但它返回 0 条记录。 [通过 FMDB 将数组传递给 sqlite WHERE IN 子句？](https://stackoverflow.com/questions/8383684/passing-an-array-to-sqlite)...

如果有任何现有的例子，或者如果有人知道如何做到这一点，我将非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:38:32.870

我遇到了同样的问题，我相信我已经解决了，至少对于我自己的应用程序。首先，像这样构造您的查询，将问号的数量与数组中的数据量相匹配：

NSString *getDataSql = @"SELECT * FROM data WHERE dataID IN (?, ?, ?)";

然后使用 executeQuery:withArgumentsInArray 调用：

FMResultSet *results = [数据库 executeQuery:getDataSql withArgumentsInArray:dataIDs];

在我的例子中，我在名为 dataIDs 的 NSArray 中有一个 NSString 对象数组。我尝试了各种方法来让这个调用正常工作，但是通过这种 sql / function 的组合，我能够得到结果。

# php - MyISAM 在使用数据库时变慢

> ID：11352126
> 
> 赞同：0
> 
> 时间：2012-07-05T20:30:59.743
> 
> 标签：php, mysql, database, innodb, myisam

我在 MyISAM 数据库上运行了大约 50,000 个查询，但是查询运行的时间越长，它变得越慢。例如，一开始可以在一秒钟内完成 20 行，到最后它是每秒完成 5 行。发生这种情况是因为 MyISAM 在每次插入后锁定表还是其他原因？

我想我必须使用 MyISAM，因为我正在使用带有全文索引的 match()against()，据我所知只有 MyISAM 支持。是否可以使用具有此功能的 InnoDB 或其他一些 DB 类型，或者是否有办法加快查询，因为当前查询的执行时间约为 45 分钟。

我预计会有很多关于我的查询结构的答案，我将三个具有不同列的表整理到一个表中，并尝试将 3 个不同的行匹配在一起以形成一个“超级表”，因此我需要做很多匹配（ )against()、preg_match、选择和循环以准确匹配它们。为了优化我的循环，我使用 PDO 和准备好的语句，但这只会将查询时间缩短到我上面提到的时间，使用 mysql_connect 和标准函数接近一个小时。

请记住，查询一开始并不慢，只有在完成大约 10,000 次查询之后，它才会明显变慢，并且随着它做的更多，它变得越来越慢，直到它达到任何服务器公司接受的不合理水平，谁能给我一个解法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:41:50.363

我的建议是尝试更新您的 MySQL，

如果你有很多编写 MySQL -V 5.6+ 允许你在 InnoDB 表中使用全文索引，除此之外 Innodb 允许你锁定行，这是一件大事。

您也可以尝试修复索引，`ANALIZE`这可能有助于提高性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T04:36:22.277

MySQL 全文搜索无法通过设计有效地处理大数据。大多数情况下，从 MyISAM 切换到 InnoDB 是个好主意，因为它有助于提高非 FT 查询的性能和并发性，并且在 InnoDB 支持事务时保证数据安全，但不会大大提高 FT 查询速度（根据 Percona 的基准[http://bit.ly/M6DMsj](http://bit.ly/M6DMsj)）。

我建议将全文查询移出 MySQL。在这种情况下，任何外部搜索引擎（如 Solr 或 Sphinx）都会非常有用。

我不是 Solr 的专家，但如果您决定使用 Sphinx，您可以使用[http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/](http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/)作为指南初始配置。

希望这可以帮助。

# magento - Magento - 非 eav 集合排序顺序

> ID：11352128
> 
> 赞同：2
> 
> 时间：2012-07-05T20:31:13.123
> 
> 标签：magento

在 Magento 中，当使用非 eav 集合时，添加排序顺序的最佳方法是什么？

对于 eav 集合，我相信有一些方便的方法可以做到这一点，但对于非 eav，似乎没有相同的设施。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T23:46:23.550

Magento 集合超类 ([`Mage_Core_Model_Resource_Db_Collection_Abstract`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php)和[`Mage_Eav_Model_Entity_Collection_Abstract`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php)) 都从集合超类继承了三个公共便利方法[`Varien_Data_Collection_Db`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/lib/Varien/Data/Collection/Db.php)：

*   [`setOrder()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/lib/Varien/Data/Collection/Db.php#L271)
*   [`addOrder()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/lib/Varien/Data/Collection/Db.php#L283), 的别名`setOrder()`
*   [`unshiftOrder()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/lib/Varien/Data/Collection/Db.php#L295), 用于将排序参数移动到第一个位置

EAV 集合超类提供了另一种方法 ，[`addAttributeToSort()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php#L351)它确保将属性连接到集合以进行排序。

正如[Vinai](https://stackoverflow.com/users/485589/vinai)在他的 tumblr上[指出的那样，](http://tweetorials.tumblr.com/post/11137227678/magento-collection-ordering-or-sorting)这些方法的行为方式和时间需要考虑一些因素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T06:35:29.663

对我来说对自定义模块集合（平面集合）进行排序的唯一方法是用作：

```
$sortField = 'field-goes-here';
$direction = 'ASC'; //or 'DESC'
$collection->getSelect()->order($sortField , $direction); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T12:05:56.513

试试这个

```
$_productCollection=Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($_category)->setOrder('field-goes-here', 'DESC'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-04T10:58:21.223

```
$collection->getSelect()->order($sortField , $direction); 
```

替换为：

```
$collection->getSelect()->order($sortField . $direction); 
```

订单期望 1 个参数

# linux - Linux 应用程序是否需要适当的文件扩展名？

> ID：11352129
> 
> 赞同：1
> 
> 时间：2012-07-05T20:31:18.183
> 
> 标签：linux

我使用各种 3rd 方库来转换我的 Linux 服务器上的文件。例如，ImageMagick/convert 用于图像，libreoffice3.5/convert-to 用于 Microsoft Office 文档等。

这些应用程序是否可能需要预先转换的文件具有适合文件类型的扩展名？例如，如果文件是 png 文件，则需要将其命名为whatever.png 而不仅仅是随便什么。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:36:20.197

你的问题听起来很笼统，一般来说 linux 应用程序不需要扩展。bash 将愉快地使用 shell 命令执行一个 .png 文件，vi 将打开一个名为 a.exe 的文本文件。扩展通常不是以 and 开头的 unix/linux 概念。只是文件名中允许的字符。

话虽如此，某些特定的应用程序可能会解释甚至需要正确的扩展名。

# objective-c - presentPopoverFromBarButtonItem

> ID：11352130
> 
> 赞同：0
> 
> 时间：2012-07-05T20:31:26.133
> 
> 标签：objective-c, ios, ipad, uipopovercontroller

每当用户单击按钮时，我都会尝试显示我的弹出菜单。

我有两种方法，第一种创建按钮

```
- (void)viewDidLoad {

    [super viewDidLoad];

    UIBarButtonItem *btnMenu = [[UIBarButtonItem alloc]initWithTitle:@"Forms List" style:UIBarButtonItemStyleBordered target:self action:@selector(showPopover:)];
    self.navigationItem.leftBarButtonItem = btnMenu;

} 
```

第二个由第一个调用，以显示弹出框

```
-(IBAction)showPopover:(id)sender{

    NSLog(@"called with %@", sender);
    self.popoverController = popoverController;
    popoverController.delegate = self;
    [popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

目前，当我单击按钮时，没有任何反应。我认为问题在于第二种方法，主要是`presentPopoverFromBarButtonItem`线路。

任何帮助将不胜感激，我真的不明白该方法调用是如何工作的。

谢谢。

编辑1：

这是我（认为）初始化 popoverController 的代码

```
@interface DetailViewController ()
@property (nonatomic, retain) UIPopoverController *popoverController;
- (void)configureView;
@end

@implementation DetailViewController

@synthesize toolbar, popoverController, detailItem, detailDescriptionLabel; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:37:32.057

你的初始化了`UIPopoverController`吗？

```
UIPopoverController *popoverController = [[UIPopoverController alloc] initWithContentViewController:VCTHATGOESINSIDE]; 
```

如果一切都失败了，请尝试从 rect 呈现它并指定一个`CGRect`. 希望这可以帮助！

编辑：initWith**内容**ViewController

# java - 将大的 XML 文件拆分成较小的文件

> ID：11352132
> 
> 赞同：2
> 
> 时间：2012-07-05T20:31:33.297
> 
> 标签：java, xml, xslt

我目前正在开发一个需要拆分 XML 的项目。例如这里是一个示例：

```
<Lakes>
  <Lake>
    <id>1</id>
    <Name>Caspian</Name>
    <Type>Natyral</Type>
  </Lake>
  <Lake>
    <id>2</id>
    <Name>Moreo</Name>
    <Type>Glacial</Type>
  </Lake>
  <Lake>
    <id>3</id>
    <Name>Sina</Name>
    <Type>Artificial</Type>
  </Lake>
</Lakes> 
```

现在，在我的 java 代码中，理想情况下会发生这种情况，它会将 XML 拆分为 3 个用于此示例的小部分，并使用信使服务将它们中的每一个发送出去。信使服务的代码并不重要。我已经这样做了。

因此，例如代码将运行，将第一部分拆分为：

```
<Lakes>
  <Lake>
    <id>1</id>
    <Name>Caspian</Name>
    <Type>Natyral</Type>
  </Lake>
</Lakes> 
```

然后java代码会在一条消息中发送出去。然后它将继续进行下一部分，将其发送出去等等，直到它到达大 XML 的末尾。这可以通过 XSLT 或通过 java 来完成，这无关紧要。有任何想法吗？

为了清楚起见，我几乎知道如何使用 XSLT 分解文件，但我不知道如何分解它并一次单独发送每个部分。我也不想在本地存储任何东西，所以理想情况下它们都会被转移到字符串中并发送出去。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:42:35.297

如果您必须对文件进行分块的方式是固定的并且已知的，那么最简单的解决方案是使用 SAX 或 StAX 以编程方式进行。我个人更喜欢 StAX 来完成这类任务，因为代码通常更干净、更容易理解，但 SAX 也能同样出色地完成这项工作。

XSLT 是一个很棒的工具，但它的主要缺点是它只能产生一个输出。除了少数例外，XSLT 引擎不支持流式处理，因此如果初始文件太大而无法放入内存，则无法使用它们。

**更新：**在 XSLT 2.0`<xsl:result-document>`中可用于生成多个输出文件，但如果您想逐个获取块而不将它们存储在文件中，这并不理想。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:47:12.983

我会流式传输 XML（而不是在内存中构建 DOM 树）并在旅途中切出块。每当遇到`Lake`标签时，就开始将内容复制到缓冲区中，当`</Lake>`遇到最终标签时，您将发送并重置该缓冲区。

**编辑**查看此[链接](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP.html)以了解有关 Java 中 XML 流的更多信息

# jquery - FormsAuthentication ASPXAUTH Cookie WCF 和 JSON

> ID：11352133
> 
> 赞同：1
> 
> 时间：2012-07-05T20:31:33.850
> 
> 标签：jquery, json, wcf, cookies, formsauthentication

我有一个 WCF Web 服务，它公开获取 X 信息的函数。该服务以 JSON 格式返回信息。**如果我想保护此 Web 服务，我需要做什么？不使用默认的 IIS 安全性，我想使用自定义登录（使用数据库验证）。**

我想显示 X 信息的客户端应用程序进行 JQUERY 和 AJAX 调用。首先，我有一个登录页面，我可以在其中输入用户名和密码（以 MD5 加密）。客户端使用这些信息调用服务，如果用户有效（postgresql 数据库上的简单选择）或 false，服务返回 YES。目前，我启动了一个 FormsAuthentication 对象并将其添加到 cookie 中。

```
Private Function SetAuthCookie(name As String, rememberMe As Boolean, userData As String) As Integer

    ' In order to pickup the settings from config, we create a default cookie and use its values to create a new one.
    Dim cookie As HttpCookie = FormsAuthentication.GetAuthCookie(name, rememberMe)
    Dim ticket As FormsAuthenticationTicket = FormsAuthentication.Decrypt(cookie.Value)

    Dim newTicket As New FormsAuthenticationTicket(ticket.Version, ticket.Name, ticket.IssueDate, ticket.Expiration, ticket.IsPersistent, userData, ticket.CookiePath)
    Dim encTicket As String = FormsAuthentication.Encrypt(newTicket)

    ' Use existing cookie. Could create new one but would have to copy settings over...
    cookie.Value = encTicket

    HttpContext.Current.Response.Cookies.Add(cookie)

    Return encTicket.Length
End Function 
```

其次，我看到当我从客户端代码调用时，每个调用都会传递 .ASPXAUTH cookie。**但是，我需要在服务器端做些什么来验证这是一个好用户**而不是“被盗”的 cookie ASPXAUTH 代码？我不认为这个小的 isValidUser 函数足以验证调用。

```
Private Function isValidUser() As Boolean
    Dim cookie As HttpCookie = HttpContext.Current.Request.Cookies(FormsAuthentication.FormsCookieName)

    If cookie Is Nothing Then Return False

    Dim decrypted = FormsAuthentication.Decrypt(cookie.Value)

    If String.IsNullOrEmpty(decrypted.UserData) Then Return False

    Return True
End Function 
```

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:40:17.107

根据您的描述，我假设您正在使用 IIS 中的 http 绑定运行 WCF 服务。

如果您在 web.config 中启用表单身份验证，ASP.NET 引擎将负责读取身份验证 cookie 并设置处理请求的线程的身份。您不必直接处理 cookie。要检查用户是否经过身份验证，请检查`HttpContext.Current.User.Identity.IsAuthenticated`属性。

# javascript - 在 dom 中循环遍历 li 元素

> ID：11352135
> 
> 赞同：1
> 
> 时间：2012-07-05T20:31:46.607
> 
> 标签：javascript, jquery

我有李元素

```
<ul class="">

        <li class="current-rating" id="current-rating" style="width: 0px"></li>

        <li><a href="#" title="1 star out of 5" class="one-star star star-rating stars-1">1</a></li>

        <li><a href="#" title="2 star out of 5" class="two-stars star star-rating stars-1">2</a></li>

        <li><a href="#" title="3 star out of 5" class="three-stars star star-rating stars-1">3</a></li>

        <li><a href="#" title="4 star out of 5" class="four-stars star star-rating stars-1">4</a></li>

        <li><a href="#" title="5 star out of 5" class="five-stars star star-rating stars-1">5</a></li>

   </ul> 
```

当我将鼠标悬停在 3 上时，我怎样才能将所有元素都放在 dom 上？即，当我单击或将鼠标悬停在第三个 li 上时，我想要 3 个 li。当我将鼠标悬停在第 5 个时，我拥有所有 5 个。我不确定如何遍历我尝试使用 parent() 和 parents() 但没有工作的 dom。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:32:27.313

## *[jsBin 演示](http://jsbin.com/aciseb/edit#javascript,html,live)*

仅`.prevAll().andSelf()`用于评级系统。可以做到这一点。

[http://api.jquery.com/prevall](http://api.jquery.com/prevall)
[http://api.jquery.com/andself](http://api.jquery.com/andself)

但请注意，如果您想保持原始选择器与 : 结合使用，`.andSelf()`例如：

```
$('li').hover(function(){
   $(this).prevAll().andSelf().css({background: 'gold'});
},function(){
   $(this).prevAll().andSelf().css({background: '#eee'});
}); 
```

我把它留给你来做交换类的诡计和`click`魔法。你有你需要的一切。

# opengl - 如何计算网格表面上的一致切向量？

> ID：11352138
> 
> 赞同：3
> 
> 时间：2012-07-05T20:32:07.407
> 
> 标签：opengl

OpenGL 着色器中的凹凸映射通常在 中完成`tangent space`，它具有法线、切线和副法线作为基向量。

根据我的书*OpenGL Shading Language*，要求基向量`consistently oriented across the surface of the object`用于照明方程正确插值。它还定义了一致，它意味着与法线贴图纹理坐标一致。

因此，给定任意网格的顶点位置、法线和法线贴图纹理坐标，我如何计算一致的切向量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:16:52.087

计算切线和双切线向量以使它们与纹理坐标正确定向并正确匹配法线实际上相当复杂。

我过去使用的一个很好的代码示例是这个： [http ://www.terathon.com/code/tangent.html](http://www.terathon.com/code/tangent.html)

Crytek 也有关于这个主题的演讲。他们的实现还解决了切线空间计算的许多常见问题：http: [//crytek.com/cryengine/presentations/triangle-mesh-tangent-space-calculation](http://crytek.com/cryengine/presentations/triangle-mesh-tangent-space-calculation)

# c - 在c中正确声明变量

> ID：11352140
> 
> 赞同：0
> 
> 时间：2012-07-05T20:32:26.860
> 
> 标签：c, scanf

对于 c 编码器来说，接下来的内容肯定会非常简单，但我正在编写一个小程序来建模一些名为 gomoku 的游戏。对于用户，您必须输入一个整数 N，它对应于一个由“N 乘 N”整数组成的“N 乘 N”正方形。

所以代码运行得很好，但我有一些简单的问题：当我输入“N 次 N”整数时，我做了一些

```
 int N;
    scanf("%d",&N);
    char c[N][N];
    while (i<N){
        scanf("%s\n",&c[i]); 
        i++;
    } 
```

然后我将每个 char 转换为 int`c[i]`以进行一些涉及 的计算`c[i][j]`，这是非常不自然的。但是如果我必须声明 int `c[N][N]`，就不可能检索到与`c[i][j]`我在 while 循环运行时输入的整数相同的整数。

有没有人有想法声明 int `c[N][N]`，输入整数，然后在使用整数计算时进行相同的计算`c[i][j]`？

最好的，纽本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:35:37.147

您不必读取 char 然后将其转换为 int。你可以简单地读取整数：

```
for(int i = 0; i < N; ++i)
    scanf("%d", &c[i]);       //of course c has to be int** type 
```

你确定你只想读取 N 个整数吗？不是*整个数组的 N N？如果您想将 N* N 个对象读取到数组中，代码应如下所示：

```
int N, i, j;
scanf("%d",&N);
int c[N][N];

for(i = 0; i < N; ++i)
{
    for(j = 0; j < N; ++j)
    {
        scanf("%d", &c[i][j]);
        /* do something */
    }
} 
```

# c# - 获取解决方案中所有方法参数的方法

> ID：11352144
> 
> 赞同：0
> 
> 时间：2012-07-05T20:32:39.347
> 
> 标签：c#

C# 中有没有办法获取与某些扩展方法一起使用的所有参数？

例子：

```
public static string GlueStrings(this string mystring, string otherString)
{
   return mystring + otherstring;
} 
```

在 Form1 的某些方法中

```
string string1 = "Glued";
string string2 = string1.GlueStrings("Strings"); 
```

在 Form2 的某些方法中

```
string string1 = "Foo";
string string2 = string1.GlueStrings("bar"); 
```

有没有一种方法可以创建方法来列出整个解决方案中与该方法一起使用的所有参数，我对`otherString`整个解决方案中的参数感兴趣？

更新：

这只是一个例子，我需要它来处理不同的类型。就像在 MVC Controller annonations 中一样，您可以获得所有使用了一些 annonation 的控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:38:30.753

您可以在类中保留一个静态*ConcurrentBag*并在运行时向其中添加每个参数。

（线程安全的并发集合[http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:39:57.683

在性能方面不是最好的方法

但你可以使用 MethodBase.GetParameters

别的

GlueStrings 怎么样（这个字符串 mystring，params object[] 其他）

PS：我没有尝试过或单元测试过

**更新：**根据您的要求提供示例

假设 Glue 类具有 GlueStrings 方法，则：

```
ParameterInfo[] parameterInfos = typeof (Glue).GetMethod("GlueStrings").GetParameters(); 
```

# bash - 重复输入重定向到 bash 中的 c++ 可执行文件

> ID：11352150
> 
> 赞同：1
> 
> 时间：2012-07-05T20:32:44.420
> 
> 标签：bash, file-io, io, executable, io-redirection

我用 c++ 编写了一个可执行文件，它旨在从文件中获取输入，并输出到标准输出（我想将其重定向到单个文件）。问题是，我想在文件夹中的所有文件上运行它，而我使用的 find 命令不合作。我正在使用的命令是：

```
find -name files/* -exec ./stagger < {} \; 
```

通过查看示例，我的理解是 {} 替换了文件名。但是，我收到错误：

```
-bash: {}: No such file or directory 
```

我假设一旦解决了这个问题，为了将所有结果放入一个文件中，我可以简单地使用模式命令 >> outputfile.txt。

感谢您的帮助，如果问题可以澄清，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:42:11.927

您遇到的问题是在 find 命令之前处理了重定向。您可以通过在 -exec 调用中生成另一个 bash 进程来解决此问题：

```
find files/* -exec bash -c '/path/to/stagger < "$1"' -- {} \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:39:41.377

1.  在`<`运行命令之前，操作符被 shell 解释为重定向。shell 尝试将输入从名为 's stdin 的文件重定向`{}`，`find`如果该文件不存在，则会发生错误。

2.  to 的参数`-name`未加引号并包含一个全局字符。shell 应用路径名扩展并给出无意义的参数来查找。

3.  文件名不能包含斜杠。的论点`-name`即使被引用也不起作用。如果 GNU find 可用，`-path`可用于指定 glob 模式`files/*`，但这并不意味着“名为 files 的目录中的文件”，因为您需要`-regex`. 便携式解决方案更难。

4.  您需要指定一个或多个`find`开始路径。

假设您真正想要的是让 shell 执行重定向，这是 GNU find 的一种方法。

```
find . -type f -regex '.*foo/[^/]*$' -exec sh -c 'for x; do ./stagger <"$x"; done' -- {} + 
```

这可能是使用`find`（`-depth`并且`-prune`不适用于此）的最佳便携方式：

```
find . -type d -name files -exec sh -c 'for x; do for y in "$x"/*; do [ -f "$y" ] && ./stagger <"$y"; done; done' -- {} + 
```

如果您使用的是 Bash，那么这个问题非常适合仅使用`globstar`模式而不是`find`.

```
#!/usr/bin/env bash
shopt -s extglob globstar nullglob

for x in **/files/*; do
    [[ -f "$x" ]] && ./stagger <"$x"
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:45:32.657

只需转义小于符号，以便通过 find 命令而不是它正在运行的 shell 执行重定向：

```
find files/* -exec ./stagger \< {} \; 
```

# javascript - 除了 tinyMCE_GZ.init 之外的 Tinymce 压缩

> ID：11352151
> 
> 赞同：0
> 
> 时间：2012-07-05T20:32:48.050
> 
> 标签：javascript, tinymce

在下面的帖子中，有什么方法可以提前构建 build.xml 并添加所有插件，例如 table、save 等，并使用相同的 build.xml 文件对其进行压缩。原因是有一个 ant 脚本文件将所有文件压缩为一个，不仅是 tinymce js 文件，还包括其他项目相关文件。

[tinymce 构建脚本来压缩所有 js 文件](https://stackoverflow.com/questions/8787744/tinymce-build-script-to-compress-all-js-files/11351965#11351965)

我知道可以通过声明额外的 tinyMCE_GZ.init 来进行压缩，但为什么要在同一个项目中使用两种压缩方法。使用 build.xml 就像在上面的帖子中描述的那样。

插件结构如何工作可以将所有内容放在一个文件中并且仍然可以插入插件，现在当我从表插件（即从 table.htm）文件中取出所有脚本标签时，即使脚本标签也出现 javascript 错误可用于调用表插件的父 html 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:25:06.353

我试过了，但我失败了。我不会说这是不可能的，但实现起来会非常困难。我最终做的是使用两种压缩方法。

# python - PyQT 窗口：我想记住它关闭的位置

> ID：11352157
> 
> 赞同：5
> 
> 时间：2012-07-05T20:33:14.213
> 
> 标签：python, pyqt

我有一个 QDialog，当用户关闭 QDialog 并稍后重新打开它时，我想记住位置并在完全相同的位置打开窗口。我怎么能准确地记住那个位置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-04T03:28:17.883

为此，您可以使用[`saveState()`](http://pyqt.sourceforge.net/Docs/PyQt4/qmainwindow.html#saveState),~~[`saveGeometry()`](http://pyqt.sourceforge.net/Docs/PyQt4/qwidget.html#saveGeometry)~~ `resize()`和`move()`方法，以及其他答案提到的[closeEvent()](http://pyqt.sourceforge.net/Docs/PyQt4/qwidget.html#closeEvent)和[QSettings 。](http://pyqt.sourceforge.net/Docs/PyQt4/qsettings.html)这是一些示例，以了解这个想法：

```
class MyWindow(QMainWindow):
    def __init__(self, parent):
        QMainWindow.__init__(self, parent)
        self.settings = QSettings("MyCompany", "MyApp")
        self.restoreGeometry(self.settings.value("geometry", ""))
        self.restoreState(self.settings.value("windowState", ""))

    def closeEvent(self, event):
        self.settings.setValue("geometry", self.saveGeometry())
        self.settings.setValue("windowState", self.saveState())
        QMainWindow.closeEvent(self, event) 
```

**编辑：**

更新了使用 PyQt API v2 的答案。如果使用 API v1，您必须手动将结果`settings.value()`转换为 ByteArray，如

```
self.restoreState(self.settings.value("windowState").toByteArray()) 
```

我还使用了窗口自己的`size()`and `pos()`，因为我已经从`.ui`文件中加载了窗口。如果从头开始对窗口进行编码，您可以在这些行之前将其设置为默认值。对于状态，我默认为空字符串，该函数很乐意将其作为空 ByteArray 接受，并且在第一次运行时不执行任何操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-25T18:09:33.977

Ronan Paixão 的回答几乎是正确的。尝试此操作时出现错误：

```
AttributeError: 'NoneType' object has no attribute 'toByteArray' 
```

这是因为起初没有保存的几何和状态。此外，返回值已经是一个 QByteArray。这段代码对我有用：

```
class MyWindow(QMainWindow):
    def __init__(self, parent):
        QMainWindow.__init__(self, parent)
        self.settings = QSettings("MyCompany", "MyApp")
        if not self.settings.value("geometry") == None:
            self.restoreGeometry(self.settings.value("geometry"))
        if not self.settings.value("windowState") == None:
            self.restoreState(self.settings.value("windowState"))
    def closeEvent(self, event):
        self.settings.setValue("geometry", self.saveGeometry())
        self.settings.setValue("windowState", self.saveState())
        QMainWindow.closeEvent(self, event) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:44:54.280

看起来您可以为此使用[QSettings](http://qt-project.org/doc/qt-4.8/qsettings.html)。如果您查看文档中标题为“[恢复 GUI 应用程序的状态](http://qt-project.org/doc/qt-4.8/qsettings.html#restoring-the-state-of-a-gui-application)”的部分，您会发现一个主窗口的示例。

换句话说，当用户关闭对话框时保存大小和位置，然后在下次打开对话框时重新加载这些设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T20:50:25.353

您可以重新实现对话框的 CloseEvent（可[在](http://qt-project.org/doc/qt-4.8/qsettings.html)Qt 文档中找到），并使用 QSettings（此处的文档）保存适当的[设置](http://qt-project.org/doc/qt-4.8/qwidget.html#closeEvent)。

```
class MyDialog(QDialog):
    def closeEvent(event):
        settings = QSettings()
        settings.setValue('value1', 1)
        event.accept() 
```

# javascript - 避免在我的表单 JQuery 中重复提交

> ID：11352159
> 
> 赞同：2
> 
> 时间：2012-07-05T20:33:29.037
> 
> 标签：javascript, jquery

JSfiddle：[代码](http://jsfiddle.net/abude/TKtKq/1/)

我试图用 POST 发送信息；然后我添加了此代码以在提交一次后禁用该按钮：

```
 $('form').submit(function(){
        $('input[type=submit]', this).attr('disabled', 'disabled');
        return true;
    }); 
```

但是**现在**：按钮被禁用并且页面被重新加载但表单没有提交信息......请提供任何解决方案

**PS：**我需要一个像上面代码这样的通用解决方案，我的表单没有id，因为我需要将此函数应用于我的所有表单......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T20:39:39.353

您正在将事件传递给该处理程序函数。如果您使用[`.ajax()`](http://jqapi.com/#p=jQuery.ajax)POST 请求提交表单（考虑使用[`.post()`](http://jqapi.com/#p=jQuery.post)），则需要防止默认行为（即提交表单）。

```
$("form").on("submit", function(e){
  e.preventDefault();
  // Send the form data using .ajax() or .post()
}); 
```

如果有人（例如几周前的我）建议把`return false`你的函数放在末尾，请他们参考文章[jQuery Events: Stop (Mis)Using Return False](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)（近两年前）。

当使用 AJAX 发送表单以及作为常规表单提交时，上述内容会有所帮助。但看起来你的**问题是两次点击提交按钮**（偶然或故意）。正如您在回答中指出的那样，解决方案是在短（人类）/长（计算机）时间后停用按钮，正如[BalusC 在他的回答中指出的那样](https://stackoverflow.com/a/2830812/95033)：

```
$(document).ready(function () {
    $("form").submit(function () {
        setTimeout(function () {
            $('input[type=submit]').attr('disabled', 'disabled');
        }, 50);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:06:28.520

这解决了我的问题： [https ://stackoverflow.com/a/2830812/1436998](https://stackoverflow.com/a/2830812/1436998)

```
$(document).ready(function(){
    $("form").submit(function(){
        setTimeout(function() {
            $('input').attr('disabled', 'disabled');
            $('a').attr('disabled', 'disabled');
        }, 50);
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-09T09:32:26.063

我遇到过无法抗拒两次、三次或多次点击的人的问题。这可能会给您带来各种问题。这就是我使用 Jquery 解决多次提交的方法。如果对您有帮助，请随意复制。复制粘贴进行测试。如果你愿意，可以疯狂地点击。此表格只提交一次！

```
<%@LANGUAGE="VBSCRIPT"%>
<%Option Explicit%>

<!DOCTYPE html>
 <html>
  <head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <style type="text/css">
   body{
        height:100%;
        width:100%;
       }
    h2 {
        font-family:sans-serif;
        font-style:italic;
        font-size:1.4em;
        color:#777;
    }
    #tekst {
        padding:6px;
        border:none;
        border-radius:4px;
        background-color:#666;
        color:#fff;
        opacity:1;
    }
   .loading {
        opacity:0.7;
        background-color:#ddd;
        position:fixed;
        width:100%;
        height:100%;
        top:0px;
        left:0px;
        z-index:1 /*(top)*/;
        visibility:hidden
   }
    .loading-content {
        width: 240px; /* or to your liking.*/
        height: 100px;
        text-align:center;
        margin: 0 auto;
        padding-top:25px;
        position: relative;
        top:20%;
        background-color:#900;
        font-size:1.1em;
        font-weight:bold;
        font-style:italic;
        font-family:sans-serif;
        color:#eee;
        opacity:1;
        z-index:2; /*above . loading*/
        user-select: none; /* Non-prefixed version, currently
                              supported by Chrome, Edge, Opera and Firefox */
    }
    #upload {
        background-color:#000; 
        color:#fff;
        font-style:italic;
        font-weight:bold;
        border-radius:8px;
        border-color:#000;
        padding:3px 8px;
        cursor:pointer;
        z-index:-1;
    }
    p {
        display:inline-block;
        font-size:1em;
        font-style:italic;
        color:#555;
    }
    br {
        line-height:40px;
    }
 </style>

  <title>test</title>
</head>

  <body> 
  <%
    'this is VB script, but use whatever language you want to receive the submitted form
    dim tekst
    tekst=Request.Form("tekst")
    if tekst <> "" then
    Response.Write("<h2>" & tekst & " (Submitted only once).</h2>")
    end if
  %>

  <div class="loading"> 
    <div class="loading-content"></div>
  </div>

  <form action="#" method="post" id="form1">
    <input type="text"  name="tekst"  id="tekst" placeholder="Enter some text"/>
    <input type="submit" value="Submit form" Id="upload" />  <p>Try and double or triple click to check, also during submit.</p>       
  </form>

  <script type="text/javascript">

     $(function () {       
         $(":submit").on('click', function (e) { //this happens when you click, doubleclick or whatever how many clicks you do:
                 e.preventDefault(); //first we prevent a submit to happen
                 $(':submit').attr('disabled', 'disabled'); // then disable the submit button
                 $('.loading').css('visibility', 'visible'); //now the page load message is made visible                    
                 $('.loading-content').html("Page is loading.<br>Please wait a second.");
                 $('.loading').fadeOut(3000); // you do this your own way of course
                 setTimeout(function () { $('#form1').submit();}, 2000); //Here is the important clue. Now, submit the form, with or without a message . Because of the delay, doubleclicks are filtered out and the form submits only once.
         });                   
     });

   </script>

 </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-09T09:35:30.397

你也可以使用

> $("form").beforeSubmit(function(){ // 函数体在这里.... });

# jquery - Jquery多步骤表单收集和数据并添加编辑链接

> ID：11352162
> 
> 赞同：0
> 
> 时间：2012-07-05T20:33:36.690
> 
> 标签：jquery, forms, html

我正在编写一个多步骤表单。在此表单的末尾，我希望有一个 div 来显示每个条目的值。有些条目需要格式化。例如，我将长度和宽度作为两个单独的输入，并希望将结果显示为长度 X 宽度。而其他人都在一条线上。我希望每个条目旁边都有一个编辑按钮。

我的 HTML

```
<form>
<article id="part1">
<input type"text" name="input1" id="input1">
<input type"text" name="input1" id="input2">
<input type"text" name="input1" id="input3">
<input class="next button" type="button"  value="Next">
</article>

<article id="part2">
<input type"radio" name="radio" id="input4">
<input type"radio" name="radio" id="input5">
<input class="next button" type="button"  value="Next">
</article>

<article id="part3">
<div id="results"></div>
<input name="Submit" type="submit" class="next button submitLast"  value="Order">
</article>
</form> 
```

每次有人点击“input.next”时，下一篇文章就会出现。

当他们点击“article#part2”中的“input.next”时，最后一篇文章就会出现。“div#results”中的文本应该是在所有其他步骤中输入的内容，包括选择了哪个收音机。每个条目都应该有一个按钮，可以让人们跳回来。此外，#input2 和 #input3 应该显示在一行上，就像 "#input2"+" x "+"#input3" 其余的应该在一行上。

我知道我可以使用 .serializeArray() 来显示结果，但这给我留下了两个问题。

1.  如何使两个唯一输入显示在一行上。
2.  我如何处理编辑按钮

现在我在显示最后一篇文章时调用了这个函数。

```
function showValues () {
var line1 = $("#input1").val()
var line2 = $("#input2").val()+" x "+$("input3").val()
var option1 = $("#input4").is(":checked")
var option2 = $("#input5").is(":checked")
if (option1==true) {
var type = "option1"
}
if (option2==true) {
var type = "option2"
}
$("results").append(line1+"<br>"+line2+"<br>"+type);

} 
```

但是我如何添加编辑按钮并告诉它在点击时转到正确的文章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:14:08.093

试试下面的代码

```
function showValues() {
        var line1 = $("#input1").val()
        var line2 = $("#input2").val() + " x " + $("#input3").val()
        var option1 = $("#input4").is(":checked")
        var option2 = $("#input5").is(":checked")
        if (option1 == true) {
            var type = "option1"
        }
        if (option2 == true) {
            var type = "option2"
        }

        var data = new Array();
        data[0] = { text: line1, edit: 0 };
        data[1] = { text: line2, edit: 0 };
        data[2] = { text: type, edit: 1 };

        for (var i = 0; i < data.length; i++) {
            $("#results").append(data[i].text);
            $("#results").append("<input type='button' value='edit' onclick='changePage(" + data[i].edit + ")' /><br />");
        }
    }

    function changePage(pageIndex) {
        // Replace this with whatever code is needed to change the page
        alert(pageIndex);
    } 
```

这与您的代码基本相同，只是先将数据放入数组中（每个项目代表一行），然后一次插入一行。它还在每一行添加了编辑按钮。

请注意插入的编辑按钮如何具有单击处理程序，该处理程序调用 changePage 方法并传递适当的页面索引值。

这可能只是一个错字，但您的两个 jQuery 选择器中缺少“#”。

# jsf - 绑定数据表 JSF 2.0

> ID：11352165
> 
> 赞同：1
> 
> 时间：2012-07-05T20:33:42.357
> 
> 标签：jsf

我有以下代码，我想获取选定的行。

```
@ManagedBean
@SessionScoped
public class ElementTableData {

    private List<Element> elementList;
    private DataModel<Element> model;

    private HtmlDataTable htmlDataTable;
    private Element element;
    private List<Element> selectedElementList;
        ....
        public HtmlDataTable getHtmlDataTable(){
        return htmlDataTable;
    }

    public void setHtmlDataTable(HtmlDataTable aHtmlDataTable){
        htmlDataTable = aHtmlDataTable;
    }
        ....
    } 
```

当我尝试进行绑定时

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link rel="stylesheet" type="text/css" href="css/styles.css" />
    <script type="text/javascript" src="js/global.js"></script>
</h:head>
<h:body>
    <f:loadBundle
        basename="messages"
        var="labels" />
    <h:form>
        <h:dataTable binding="elementTableData.htmlDataTable" styleClass="dataTable" rowClasses="rowOdd,rowEven"
            value="#{elementTableData.elementList}" var="element">
            <!-- Table Title -->
            <f:facet name="caption">#{labels.TableTitle}</f:facet> 
```

我收到以下异常：

```
javax.faces.FacesException: javax.el.PropertyNotWritableException: /index.xhtml at line 20 and column 52 binding="elementTableData.htmlDataTable": Illegal Syntax for Set Operation 
```

我有 htmlDataTable 的 getter 和 setter，但我不明白为什么会出现异常。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:41:07.313

将绑定设置为 EL 表达式：

```
<h:dataTable binding="#{elementTableData.htmlDataTable}" ...> 
```

# java - 为 CXF 网络服务生成 XSD

> ID：11352179
> 
> 赞同：1
> 
> 时间：2012-07-05T20:34:57.577
> 
> 标签：java, eclipse, xsd, cxf

我有一个 CXF Web 服务 Java 类，我使用 Eclipse 3.5。我生成了服务 WSDL 文件，它有`<wsdl:types>`，但是我工作的客户端要求一个单独的 XSD 文件，如何在 Eclipse 中生成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:24:00.320

如果您使用的是 JavaEE Eclipse（或将所有相关模块添加到另一个 Eclipse 版本），请右键单击包含您的服务实现的类 -> *Web Services* -> *Create Web Service*。

使用默认值应该一切正常，只需确保第一页具有正确的服务实现类，并且*Apache CXF Web 服务 Java2WS 配置*页面选中了*生成 WSDL*和*生成独立 XSD*复选框。

# asp.net - 将 STS 和依赖方合并到同一个网站

> ID：11352181
> 
> 赞同：3
> 
> 时间：2012-07-05T20:35:00.143
> 
> 标签：asp.net, asp.net-mvc, wif

我正在开发一个 MVC 项目，我想完全使用 WIF 抽象身份验证。默认情况下，无需任何额外配置，此应用除了作为依赖方外，还需要是它自己的 STS。有没有人这样做并有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:39:05.567

前段时间我试图想出完全相同的机制，但我失败了。

我的理由是，要成为 RP，应用程序必须获得由 STS 颁发的签名 SAML 令牌。收到令牌后，将创建联合 cookie。

但是要成为 STS，应用程序应该有一个登录页面和一个保持登录会话的机制，这样用户就不必再次登录。然后它应该对`wsignin1.0`请求做出反应并发出 SAML 令牌。

这导致了我认为的矛盾。应用程序在发出 SAML 令牌之前应该有一个联合 cookie（将用户会话作为 STS 维护），但同时它可以在收到 SAML 令牌后创建一个联合 cookie（作为 RP）。

当然，您可以维护两个 cookie，一个用于 RP 部分的联合 cookie 和一个用于 STS 部分的表单 cookie（可能），但这听起来不切实际并且违背了抽象身份验证的想法。

简而言之：在我看来，这并不容易。但是，我很高兴听到某人的其他想法。

# ruby-on-rails - 如何在 tcserver 上启动 rails 应用程序？

> ID：11352186
> 
> 赞同：0
> 
> 时间：2012-07-05T20:35:34.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3, tomcat, ruby-on-rails-3.1, ruby-on-rails-3.2

我试图在 mongrel 上运行 rails，所以我在 gemfile 中包含 gem 'mongrel' 并启动`rails server mongrel`，服务器启动正常。但我需要在'tcserver'上启动rails。我怎样才能做到这一点？。`rails server tcserver`throws`LoadError: no such file to load -- rack/handler/tcserver`这很明显。请让我知道如何在 tcserver 上启动 rails 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:36:54.307

Vfabric TC Server 是 Apache Tomcat 的改编版，因此是一个 Java servlet 容器。它不会按原样运行 Ruby-on-Rails。

您将需要使用 JRuby 和诸如[Warbler](https://github.com/jruby/warbler/)之类的工具，它将 Rails 应用程序打包到与 Tomcat 兼容的 WAR 中。

[这](http://techylinguist.com/posts/2012/01/13/deploy-jruby-rails-application-war/)是该过程的一个很好的分步操作。（用TC服务器实例替换Tomcat）

# emacs - 从 emacs 中递归删除子目录

> ID：11352187
> 
> 赞同：1
> 
> 时间：2012-07-05T20:35:36.293
> 
> 标签：emacs, dired

我经常查看 dired 结构，通过递归显示整个目录：`(dired dir "-lR")`. 这在大多数情况下都很有效。

但是，有时，我不想查看巨大的子目录结构。有没有办法递归地杀死一个包含完整树的dired缓冲区中的子目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:21:04.293

好的，我刚刚写了以下省略号：

```
(defun bp-kill-directory-rec()
  (interactive )
  (let (
    (i (point))
        (cur-dir (dired-current-directory)))
    (beginning-of-buffer)
    (while (search-forward cur-dir nil t)
      (dired-kill-subdir))
    (goto-char i))) 
```

从要杀死的目录中的光标开始，它将杀死该目录的所有子目录。诀窍是`(dired-current-directory)`给出整个路径，所以搜索它应该只给出你想要杀死的目录。如果你有一个目录结构，你有类似的东西`/home/a/b`，`/home/c/d/home/a/b`然后可能会发生不好的事情。但你必须有点疯狂才能做到这一点，不是吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:53:12.293

我`find-dired`用于相同的目的。`Run find (with args):`要排除子目录，我在提示符处输入类似这样的内容： `-path ./exclude_me -prune -o true`，这将给我一个目录的递归列表，不包括一个目录`exclude_me`。这仅在您使用带有 find 函数版本的类 Unix 时才有效。

编辑：删除树的另一种方法是简单地将 dired 缓冲区切换为可读 ( `C-x C-q`) 并编辑缓冲区。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-27T18:30:39.640

使用[**Dired+**](http://www.emacswiki.org/DiredPlus)， command **`diredp-kill-this-tree`**。

只需将光标放在要从列表中删除的子目录中，然后调用命令。该插入的子目录及其所有也插入（列出）的后代都将被删除。

在将 point 放入子目录列表之后，您也可以通过以下任何一种方式调用此命令：

*   单击`mouse-3`并选择项目**Remove This Inserted Subdir 和 Lower**。
*   选择菜单栏菜单**Single** （在 vanilla Emacs 中称为*Immediate ），项目***Remove This Inserted Subdir 和 Lower**。

# javascript - javascript中的即时java编译器

> ID：11352191
> 
> 赞同：6
> 
> 时间：2012-07-05T20:35:51.207
> 
> 标签：javascript

我正在尝试构建一个在线 Java 编辑器。我需要能够让我在单击提交时向用户报告编译错误（如果有）的功能。我很想知道是否有任何 javascript 库可以使用现成的来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:41:06.197

获取文本并在服务器端调用 javac，以某种结构化方式发回结果并显示在客户端

# c# - PHP 在解密之前将 C# Hex Blob 十六进制字符串转换回字节数组

> ID：11352193
> 
> 赞同：0
> 
> 时间：2012-07-05T20:36:06.923
> 
> 标签：c#, php, string, bytearray

我有一条以十六进制字符串格式接收的数据，例如：“65E0C8DEB69EA114567954”。它是在 C# 中通过将字节数组转换为十六进制字符串来实现的。但是，我正在使用 PHP 来读取这个字符串，并且需要暂时将它转换回字节数组。如果这很重要，我将解密这个字节数组，然后将其重新转换为未加密的十六进制和/或纯文本，但我稍后会弄清楚。

所以问题是，如何将上面的字符串转换回**PHP 中的编码字节数组/ blob？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:13:24.693

这可以解决问题：

```
$validHex = '65E0C8DEB69EA114567954';
$binStr = join('', array_map('chr', array_map('hexdec', str_split($validHex, 2)))); 
```

# google-chrome - 如何使用 x-webkit-speech 录制音频输入？

> ID：11352196
> 
> 赞同：1
> 
> 时间：2012-07-05T20:36:20.883
> 
> 标签：google-chrome, audio, webkit, audio-recording

我想记录音频输入，将其保存为波形文件并将其流式传输到服务器，可以使用 x-webkit-speech 吗？如果没有，我怎么能意识到这一点？

# facebook - redirect_url 应该是一个绝对 url

> ID：11352197
> 
> 赞同：1
> 
> 时间：2012-07-05T20:36:25.800
> 
> 标签：facebook, registration

我正在我的网络应用程序上安装 FB reg（并在本地进行测试）。

我提出这个：

```
<div class="auth">
    <script language="javascript">
$(function(){
    var root = $('#fb-root');
    if ((!root) || (!root.length)){
        $('body').append('<div id="fb-root"></div>');
    }
    window.fbAsyncInit = function() {
        console.log('fbAsyncInit');
        FB.init({
            appId      : '111...', // App ID
            channelUrl : 'http://www.wonderlandlabs.com/channel.html', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        });
    };
    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));
}) 
```

...并收到此错误：

“'redirect_uri' 应该是一个绝对 URL。”

为什么会这样？

# python - 使用线程与套接字通信

> ID：11352199
> 
> 赞同：1
> 
> 时间：2012-07-05T20:36:40.747
> 
> 标签：python, multithreading, sockets

我目前正在编写一个充当客户端的 python 类。因为我不想阻塞主线程，所以数据包的接收是在另一个线程中完成的，如果数据包到达，则会调用回调函数。

接收到的数据包要么是广播消息，要么是对客户端发送的命令的回复。发送命令的功能是同步的，它会阻塞直到回复到达，所以它可以直接返回结果。

简化示例：

```
import socket
import threading

class SocketThread(threading.Thread):
    packet_received_callback = None

    _reply = None
    _reply_event = threading.Event()

    def run(self):
        self._initialize_socket()

        while True:
            # This function blocks until a packet arrives
            p = self._receive_packet()

            if self._is_reply(p):
                self._reply = p
                self._reply_event.set()
            else:
                self.packet_received_callback(p)

    def send_command(self, command):
        # Send command via socket
        self.sock.send(command)

        # Wait for reply
        self._reply_event.wait()
        self._reply_event.clear()

        return self._process_reply(self._reply) 
```

我现在面临的问题是我无法在回调函数中发送命令，因为这会以死锁结束（send_command 等待回复但无法接收数据包，因为接收数据包的线程实际上正在执行回调功能）。

我目前的解决方案是每次都启动一个新线程来调用回调函数。但是这样会产生很多线程，并且很难确保在流量大的情况下同步处理数据包。

有人知道更优雅的解决方案还是我走对了路？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:20:46.530

A proper answer to this question depends a lot on the details of the problem you are trying to solve, but here is one solution:

Rather than invoking the callback function immediately upon receiving the packet, I think it would make more sense for the socket thread to simply store the packet that it received and continue polling for packets. Then when the main thread has time, it can check for new packets that have arrived and act on them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T11:28:17.940

最近有一个想法，让我知道你的想法。这只是解决此类问题的一般方法，以防其他人遇到类似问题并需要使用多线程。

```
import threading
import queue

class EventBase(threading.Thread):
    ''' Class which provides a base for event-based programming. '''

    def __init__(self):
        self._event_queue = queue.Queue()

    def run(self):
        ''' Starts the event loop. '''

        while True:
            # Get next event
            e = self._event_queue.get()

            # If there is a "None" in the queue, someone wants to stop
            if not e:
                break

            # Call event handler
            e[0](*e[1], **e[2])
            # Mark as done
            self._event_queue.task_done()

    def stop(self, join=True):
        ''' Stops processing events. '''

        if self.is_alive():
            # Put poison-pill to queue
            self._event_queue.put(None)
            # Wait until finished
            if join:
                self.join()

    def create_event_launcher(self, func):
        ''' Creates a function which can be used to call the passed func in the event-loop. '''

        def event_launcher(*args, **kwargs):
            self._event_queue.put((func, args, kwargs))

        return event_launcher 
```

像这样使用它：

```
event_loop = eventbase.EventBase()
event_loop.start()

# Or any other callback
sock_thread.packet_received_callback = event_loop.create_event_launcher(my_event_handler)

# ...

# Finally
event_loop.stop() 
```

# dart - Initializer 必须是编译时常量

> ID：11352205
> 
> 赞同：2
> 
> 时间：2012-07-05T20:37:05.983
> 
> 标签：dart

我只想要一个带有颜色的最终列表：

```
final List<String> COLORS =  ['#cefbe4', '#81ec72', '#5cd646'];
final num MAX = 90;
class Square {
 // ... 
```

MAX 可以，但不能为 list 编译：Initializer must be a compile time constant

我也试过：

```
static final num MAX = 90;
class Square {
    final List<String> COLORS =  ['#cefbe4', '#81ec72', '#5cd646']; 
```

新错误：“初始化程序必须是编译时间常数”

我发现的唯一解决方案是在构造函数中初始化......我不喜欢这个解决方案：我不想要 Square 对象的列表实例。我能怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:27:34.827

我没有得到和你一样的错误。在第一种情况下，我收到一个编译时警告“预期的常量表达式”，在第二种情况下，我收到另一个编译时警告和运行时错误。尝试您可以在[此处](http://gsdview.appspot.com/dart-editor-archive-continuous/latest/)找到的最新 SDK 。

```
static final num MAX = 90;
class Square {
    final List<String> COLORS =  ['#cefbe4', '#81ec72', '#5cd646']; 
```

在这种情况下， static 它没有任何意义，因为**static**表示*类变量*对于同一类的所有实例化对象都是相同的。在这种情况下，**MAX**在类边界之外。因此会显示运行时错误和编译时警告（“顶级字段不能是静态的”）。

我猜**MAX**和**COLORS对于***Square*类的所有实例都应该是相同的。所以这样做是有意义的：

```
class Square {
    static final List<String> COLORS = const ['#cefbe4', '#81ec72', '#5cd646'];
    static final num MAX = 90;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:41:00.320

列表本身是最终的部分，而不是内容。最终列表中的内容仍然可以添加和删除。

```
final List<String> COLOURS = new ArrayList<String>(); 
```

这将创建您的列表。列表的实际填充将在构造函数中完成，或者在代码中的任何地方完成。

在我看来，为此使用枚举更合适。

# jquery - jQuery Chosen 插件动态添加选项

> ID：11352207
> 
> 赞同：59
> 
> 时间：2012-07-05T20:37:09.307
> 
> 标签：jquery, jquery-chosen

我制作了一个**jQuery** Chosen 下拉菜单，如下所示：

```
$('.blah').chosen(); 
```

我找不到如何添加选项，例如：

```
$('.blah').chosen('add', name, value); 
```

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-05T20:41:00.790

首先，您需要将`<option>`s 添加到`<select>`Chosen 绑定的 s 中。例如：

```
$('.blah').append('<option value="foo">Bar</option>'); 
```

然后，您需要触发`chosen:updated`事件：

```
$('.blah').trigger("chosen:updated"); 
```

可以在[此处](http://harvesthq.github.com/chosen/)找到更多信息（尽管您需要向下滚动到`Change / Update Events`）。

* * *

2013 年 8 月 7 日更新

`chosen:updated`正如 Tony 在评论中提到的那样，事件名称已更改为自 1.0 版（2013 年 7 月）以来。可在[此处](http://harvesthq.github.io/chosen/#change-update-events)找到更新的文档。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-10-23T15:29:22.003

最新选择的版本将事件名称更改为“选择：更新”

所以你的代码将是这样的：

```
$('.blah').append("<option value='"+key+"'>"+value+"</option>");
$('.blah').val(key); // if you want it to be automatically selected
$('.blah').trigger("chosen:updated"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-21T08:04:21.417

使用 Ajax 将元素保存到服务器后，您可以调用此函数将元素添加到选择中：

```
function appendToChosen(id,value){
    $('.blah')
        .append($('<option></option>')
        .val(id)
        .attr('selected', 'selected')
        .html(value)).trigger('liszt:updated');
} 
```

阿贾克斯调用：

```
$.ajax({
    type: 'POST',
    url: 'savepage.php',
    data: $('#modal-form form').serialize(),

    success: function(data, status) {
        appendToChosen(data[0],data[1]);
    },
    error: function (response) {
        alert(response);
    }
    }).always(function(data, status) {
        //hide loading
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-21T09:25:14.770

尝试这个..

```
 $.ajax({
            url: "@Url.Action("Actionname", "Controller")",
            data: { id: id },
                dataType: "json",
                type: "POST",
                success: function (data) {
                $("#id_chzn .chzn-results").children().remove();
                var opts = $('#id')[0].options;
                    $.map(data, function (item) {
                        var text = item.text;
                        for (var i = 0; i < opts.length ; i++) {
                            var option = opts[i];
                            var comparetext = option.innerText;
                            var val = 0;
                            if(text == comparetext)
                            {
                                val = option.index;
                                $('#id_chzn .chzn-results').append("<li id='id_chzn" + val + "' class='active-result' style>" + item.text + "</li>");
                            }
                        }
                    });
                  }
                }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-06T11:07:04.933

我使用下面的代码动态更新选择的下拉选项并且它有效：

```
var myDropDownOptionHtml ='<option value="0">--Customer--</option>'; 

$('#myDropdownId').html(myDropDownOptionHtml );
setTimeout(function() {
    $("#myDropdownId").trigger("liszt:updated");
},100); 
```

仅供参考，我正在使用 jQuery Chosen**版本 0.13.0**

快乐编码！

# javascript - 使用jquery禁用特定条件的下拉菜单

> ID：11352209
> 
> 赞同：0
> 
> 时间：2012-07-05T20:37:11.527
> 
> 标签：javascript, jquery

我有两个名为“国家”和“州”的下拉菜单。“国家”下拉菜单中有两个值，印度和巴基斯坦。如果我选择“印度”，那么我的第二个下拉菜单“州”应该被启用，但如果我选择“巴基斯坦”，那么我的第二个下拉菜单应该被禁用。我想使用 jquery 来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:47:48.493

这个问题可以分解为以下几点：

```
If the country is changed, do the following:
   Determine if the country is India. If it is, enable the state dropdown
      or, if the country is not India, disable the state dropdown 
```

写在代码中，它将是：

```
<select id="country">
  <option value="india">India</option>
  <option value="pakistan">Pakistan</option>
</select>
<select id="state">
   <option value="1">State 1</option>
   <option value="2">State 2</option>
   <option value="3">State 2</option>
</select>

<script language="javascript">
$(document).ready(function() {

    $("#country").change(function() { // The country value has been changed

          if($(this).val() == 'india') { // The country is set to india

              $("#state").prop('disabled', false); // Since the country is India, enable the state dropdown

          } else { // The country is NOT India

              $("#state").prop('disabled', true); // Since the country is NOT India, so disable the state dropdown

          }

      }

});
</script> 
```

编写此代码有更多“优雅”和“优化”的方式，但我认为以上内容对于刚刚学习解决此类问题的人来说是最清晰的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:40:31.570

```
$country.change(function(){
  $state.prop('disabled', true)
  if (/india/i.test($(this).val()))
    $state.prop('disabled', false)
}) 
```

# mongodb - 使用 $where 查询进行自我比较

> ID：11352211
> 
> 赞同：0
> 
> 时间：2012-07-05T20:37:24.693
> 
> 标签：mongodb

作为升级脚本的一部分，我想用来`$where`查找 id 与其中一个字段匹配的文档。我知道这很慢，因为它是用光标完成的，但这对我来说没问题；我只会运行一次。但我无法让它工作：

```
> db.things.drop()
true

> stuff = {}
{ }

> db.things.save(stuff)

> stuff.original_id = stuff._id
ObjectId("4ff5f9f97fadec5abb7b5392")

> db.things.save(stuff)

//why doesn't this return anything?
> db.things.find({$where: "this._id == this.original_id"})

//interstingly, this works fine
> db.things.find({$where: "this._id == this._id"})
{ "_id" : ObjectId("4ff5f9f97fadec5abb7b5392"), "original_id" : ObjectId("4ff5f9f97fadec5abb7b5392") } 
```

这里有什么问题？为什么我不能`_id`比较`original_id`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:51:14.183

`ObjectId`是一个对象。此处的`==`运算符测试引用相等性。

```
> ObjectId("4ff5fbed3a015a91f85e80bb") == ObjectId("4ff5fbed3a015a91f85e80bb")
false 
```

但是如果操作数是更简单的类型（数字或字符串），它会检查值是否相等。

```
> '4ff5fbed3a015a91f85e80bb' == '4ff5fbed3a015a91f85e80bb'
true 
```

因此，这个简单的解决方法将起作用：

```
> db.where.find({$where: "this._id.toString() == this.orig_id.toString()"})
{ "_id" : ObjectId("4ff5fbed3a015a91f85e80bb"), "orig_id" : ObjectId("4ff5fbed3a015a91f85e80bb") } 
```

这是[一篇关于 Javascript 中比较运算符的更多信息的帖子](https://stackoverflow.com/a/359509/125816)。

这是[另一篇文章](http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/)。

# c# - 关于 ThreadExceptionDialog 对话框

> ID：11352215
> 
> 赞同：0
> 
> 时间：2012-07-05T20:37:44.130
> 
> 标签：c#, exception, exception-handling

我知道对于程序中发生的所有异常都会抛出 ThreadExceptionDialog。我的问题是对话框表单显示了程序集信息以及异常详细信息。

有没有办法隐藏程序集信息并只显示异常信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:57:58.553

您可以通过调用应用程序`Application.SetUnhandledExceptionMode()`的方法来完全“禁用”此行为。`Main()`据我所知，没有办法只隐藏默认的程序集信息`ThreadExceptionDialog`。但是，如果您将应用程序设置为处理`ThreadException`，则可以显示您自己的信息。如果你不覆盖它，你会得到正常`ThreadExceptionDialog`的，用户可能会退出或继续。在 99.99% 的情况下，继续下去并不是一个好的结果。

请查看[MSDN](http://msdn.microsoft.com/en-us/library/ms157905.aspx)文档以获取更多信息。

# javascript - 如何使用 JQuery.Load 访问 Div 中加载的 URL 的 UL“id”、“name”等以设置 JQuery Treeview

> ID：11352217
> 
> 赞同：0
> 
> 时间：2012-07-05T20:37:52.787
> 
> 标签：javascript, jquery

# sample.html 代码

```
<ul id="browser" class="filetree">
   <li><span class="folder">Folder 1</span>
        <ul>
            <li><span class="file">Item 1.1</span></li>
        </ul>
   </li>
</ul> 
```

# 主页代码

```
<div id="LtrLeftContent">
   <script type="text/javascript">
       $('#LtrLeftContent').load('sample.html');
   </script>                    
</div> 
```

页面加载成功。但**无法在****主页**中使用以下代码填充 Jquery Treeview

 ****过程1：**

```
$("div#LtrLeftContent").contents().find("ul#browser").treeview(); 
```

**过程2：**

```
$("div#LtrLeftContent").ready(function () {
    $("ul#browser.filetree").treeview();
}); 
```

**过程3：**

```
$(document).ready(function () {
    $("ul#browser").treeview();
}); 
```

**过程4：**

```
$("#LtrLeftContent").html().find("#browser").treeview(); 
```

但是，如果我将下面的代码放入“ **sample.html** ”中。代码成功填充 Treeview

```
$(document).ready(function () {
    $("#browser").treeview();
}); 
```

如何将树视图设置为**主页**以填充 JQuery 树视图？

**注意：**我不想将 Javascript 放入“ **Sample.html** ”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:53:15.273

您需要等待填充树视图以加载 sample.html（请参阅[load 文档](http://api.jquery.com/load/)）：

```
$('#LtrLeftContent').load('sample.html', function(response, status, xhr) {
    $("#browser").treeview();
}); 
```**

# php - 在脚本结束之前关闭来自 php 的 ajax 请求

> ID：11352222
> 
> 赞同：3
> 
> 时间：2012-07-05T20:38:39.433
> 
> 标签：php, javascript, jquery, ajax

如何在脚本结束之前关闭来自 php 的 ajax 请求？示例：用户请求 php.php，其中有一行：echo "phpphp"，在此行之后，ajax 请求完成并有数据 "phpphp"，但***PHP 脚本***继续运行，不使用进程或分叉？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:49:04.933

[我如何使用 PHP 实现这个场景？](https://stackoverflow.com/questions/10403521/how-do-i-implement-this-scenario-using-php/10403777)有答案。使用刷新设置连接关闭和内容长度标头。

```
 ob_start();

  echo "111";
  header("Content-Length: ".ob_get_length());
  header("Connection: close");

  flush();
  somescript(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:49:27.180

尝试流式传输 PHP 文件，一旦达到某个点，就向 JS 发送一个返回，这将关闭 JS 连接并（也许？）允许这个 php 文件继续？

没试过，但值得一试。

```
// set as plain text
header('content-type:text/plain');

// let it stream
ob_implicit_flush(true);
ob_end_flush(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T20:46:25.123

`exit`或任何别名`exit`将停止脚本执行。

看一下输出缓冲 - 使用[`ob_start()`](http://php.net/ob_start)with[`ob_flush()`](http://php.net/ob_flush)或简单地[`flush()`](http://php.net/flush)可能会成功。

# regex - 在 Perl 中替换 2 个非默认行正则表达式

> ID：11352224
> 
> 赞同：1
> 
> 时间：2012-07-05T20:38:49.020
> 
> 标签：regex, perl, syntax, substitution

我想用 "xx:xx:xx" 替换 Perl 中 2 个字符串的 "hh:mm:ss" 的 reg 表达式我该怎么做？

代码：

```
use strict;
use warnings;
my $l="12:48:25 - Properties - submitMode : 2";
my $r="54:01:00 - Properties - submitMode : 2";
#my $newLn;
#Find "hh:mm:ss" in $_ :P
if ($l =~ /\d\d:\d\d:\d\d/ || $r=~ /\d\d:\d\d:\d\d/) {
#print "Time found";
s/\d\d:\d\d:\d\d/xx:xx:xx/g; #looking for default $_ , but have $l and $r
s/\d\d:\d\d:\d\d/xx:xx:xx/g;    
     #substitute with xx: p
print $l,"\n";
print $r,"\n";
} else {
print "No time found found";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:48:56.243

```
$l =~ s/\d\d:\d\d:\d\d/xx:xx:xx/g;
$r =~ s/\d\d:\d\d:\d\d/xx:xx:xx/g; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:54:21.687

*toolic 的*解决方案有效，但如果您想使用带有默认变量的替换命令`$_`，请使用`foreach`循环，如下所示：

```
use strict;
use warnings;
my $l="12:04:25 - Properties - submitMode : 2";
my $r="54:01:00 - Properties - submitMode : 2";
#my $newLn;
#Find "hh:mm:ss" in $_ :P
#if ($l =~ /\d\d:\d\d:\d\d/ || $r=~ /\d\d:\d\d:\d\d/) {

for ( $l, $r ) { 
    s/\d\d:\d\d:\d\d/xx:xx:xx/g || 
        do { 
            print "Not time found in $_\n"; 
            next 
        };
    print $_,"\n";
} 
```

# c# - 在同一屏幕上更新/插入 2 个不同的模型？

> ID：11352225
> 
> 赞同：1
> 
> 时间：2012-07-05T20:38:56.283
> 
> 标签：c#, asp.net-mvc-3, razor, entity

我正在开发一个允许用户编辑特定实体的编辑视图。如果用户没有看到已经存在的实体，其中一个下拉菜单需要允许用户创建不同相关实体的新实例。我正在尝试找出最佳实践。

他们正在编辑的模型：

```
 public class SurveyProgramModel
    {

        [Key]
        public int ProgramId { get; set; }

        [DisplayName("Year")]
        public int ProgramYear { get; set; }

        [DisplayName("Status")]
        public int ProgramStatusId { get; set; }

        [DisplayName("Program Title")]
        public string ProgramTitle { get; set; }

        public int ProgramTypeId { get; set; }

        [DisplayName("Program Type")]
        public virtual SurveyProgramTypeModel ProgramType { get; set; }

        [DisplayName("Status")]
        public virtual ProgramStatusModel ProgramStatusModel { get; set; }

        public virtual ICollection<SurveyResponseModel> SurveyResponseModels { get; set; }
    } 
```

如果用户没有看到`ProgramType`符合他们想要的内容，他们需要有一个空文本框，允许他们创建一个新的`ProgramType`.

```
Here is the ProgramType model:

   public class SurveyProgramTypeModel
    {

        [Key]
        public int ProgramTypeId { get; set; }

        [DisplayName("Program Type")]
        public string ProgramType { get; set; }

        public virtual ICollection<SurveyProgramModel> SurveyProgramModels { get; set; }

    } 
```

在一次提交中更新 2 个模型的最佳做法是什么？我如何保持我的观点强类型化`SurveyProgramModel`？创建视图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:45:25.633

您已经知道答案，您将创建一个视图模型并在您的 HttpPost 操作中进行必要的更改。

# coldfusion - 以特定用户身份运行 ColdFusion

> ID：11352228
> 
> 赞同：7
> 
> 时间：2012-07-05T20:39:17.717
> 
> 标签：coldfusion

在[这个页面上](http://helpx.adobe.com/coldfusion/kb/running-coldfusion-specific-user.html)，它讨论了 Windows NT、2000、XP 和 2003。幸运的是，我有一台 Windows 7 机器。

第一行说：

> 在域的用户管理器中，为 ColdFusion 服务创建一个本地用户以作为登录用户。

我没有看到“域用户管理器”，所以它们的意思是“添加新用户”吗？

如果它确实意味着，我可以使用我自己的用户帐户作为 ColdFusion 用户，还是应该专门为 ColdFusion 创建一个新帐户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:37:42.447

如果您要创建域帐户，则必须在域上创建它 - 对连接到域控制器的域使用用户管理器。如果这是您需要的，那么系统管理员必须提供帮助。

如果你在 Windows 7 上做一个“本地”用户，我总是在我做对之前四处寻找用户管理器的正确视图:) 以下是我使用的步骤：

1.  从头开始搜索并打开“用户帐户”cpl。
2.  点击“管理用户帐户”
3.  单击“高级”选项卡
4.  单击“高级”按钮。

这将我带到了我习惯的类似 mmc 的用户视图，我可以在其中添加用户、更改成员资格、设置密码等。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:04:17.517

您可以使用自己的用户名，也可以创建一个供 CF 运行的用户名。创建一个用户来运行 CF 可能更接近地复制您的生产环境（假设），因此如果生产例如写入 UNC 路径，coldfusion 用户必须具有访问权限。你可以在本地模仿这个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T21:27:50.047

您可以使用运行 ColdFusion 的操作系统的本地帐户，也可以使用域帐户（如果操作系统已加入域）。在您的情况下，您可以在 Windows 7 操作系统上创建一个本地用户并以该用户身份运行 ColdFusion 应用程序服务。用户帐户需要访问 ColdFusion 的安装文件夹，以及对 webroot 的读取权限。

整个想法是以具有处理请求所需的最低权限的用户身份运行 ColdFusion 服务，并在数据泄露或远程代码执行的情况下防止访问其他资源（例如，有人利用上传表单并设法获得自己的在您的服务器上运行的 CF 代码；它并不漂亮，但可以通过在具有受限访问权限的用户帐户下运行 CF 服务而受到一定的限制）。

正如其他人提到的，如果 CF 需要访问其他网络资源，则用户帐户也需要被授予对这些资源的访问权限（通过使用域帐户或在远程系统上拥有具有相同用户名和密码的本地帐户）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T19:36:18.300

刚刚在带有 CF 10 的 Windows 2008 R2 上执行此操作。诀窍是更改 c:\windows 和 c:\windows\system32 目录的所有权，如此处所述。

[从trustedInstaller 更改所有权](http://www.askvg.com/guide-how-to-restore-trustedinstaller-as-default-owner-of-a-file-or-folder-in-windows/)

# ruby-on-rails - 在 Rails 控制台中测试 Factory_Girl 导致堆栈级别太深

> ID：11352229
> 
> 赞同：1
> 
> 时间：2012-07-05T20:39:20.403
> 
> 标签：ruby-on-rails, gem, factory-bot

我尝试将 Factory_girl 放入我的 Rails 应用程序中进行测试。

这是 Gemfile 的一部分：

```
gem 'rspec-rails', :group => [:development, :test]

group :development do
  gem 'annotate'
  gem 'faker', '0.3.1', :require => false
  gem 'populator', '1.0.0'
  gem 'ruby-debug19'
end

group :test do
  gem "capybara"
  gem 'factory_girl_rails', '~> 3.5.0'
  gem 'guard-rspec'
  gem 'guard-spork'
  gem 'spork'
  gem 'rb-inotify'
  gem 'libnotify'
end

group :development, :test do
  gem 'sqlite3-ruby', :require=>'sqlite3'
end 
```

然后我进入控制台测试Factory_Girl的安装，例如：`rails c`调用该方法：`find_definitions`

```
Loading development environment (Rails 3.0.5)
irb(main):002:0> FactoryGirl.find_definitions
NameError: uninitialized constant FactoryGirl
    from (irb):2
    from /var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/commands/console.rb:44:in     `start'
    from /var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/commands/console.rb:8:in     `start'
    from /var/lib/gems/1.9.1/gems/railties-3.0.5/lib/rails/commands.rb:23:in `<top         (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

所以我假设我必须要求宝石：我这样做并且：

```
irb(main):003:0> require 'factory_girl_rails'
SystemStackError: stack level too deep
    from /usr/lib/ruby/1.9.1/irb/workspace.rb:80
Maybe IRB bug!! 
```

我收到了这个奇怪的错误。

我究竟做错了什么？

有关信息，我在 Rails 3.0.5 和 ruby​​ 1.9.2 上。

宝石配置是：

```
RubyGems Environment:
- RUBYGEMS VERSION: 1.3.7
- RUBY VERSION: 1.9.2 (2011-07-09 patchlevel 290) [i686-linux]
- INSTALLATION DIRECTORY: /var/lib/gems/1.9.1
- RUBY EXECUTABLE: /usr/bin/ruby1.9.1
- EXECUTABLE DIRECTORY: /usr/local/bin
- RUBYGEMS PLATFORMS:
  - ruby
  - x86-linux
- GEM PATHS:
   - /var/lib/gems/1.9.1
   - /home/izambard/.gem/ruby/1.9.1
 - GEM CONFIGURATION:
   - :update_sources => true
   - :verbose => true
   - :benchmark => false
   - :backtrace => false
   - :bulk_threshold => 1000
- REMOTE SOURCES: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:56:00.220

您正在运行开发环境，同时将 FactoryGirl 包含在您的测试环境中。如果您在测试环境中运行控制台，FactoryGirl 将被包含在内。

```
RAILS_ENV=test rails c 
```

我不太清楚为什么`require 'factory_girl_rails'`在开发中会导致无限递归。可能是工厂女孩或旧 Rails 版本中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:53:18.980

实际上，我`factory_girl_rails`在 spec_helper.rb 和 factory.rb 文件中有一个要求。我删除了 factory.rb 中的那个，它现在正在工作...... :-s

# php - 为什么使用 multi_curl 同时调用多个 php 脚本时脚本执行会有延迟？

> ID：11352237
> 
> 赞同：0
> 
> 时间：2012-07-05T20:40:07.610
> 
> 标签：php, apache, httpd.conf, curl-multi

我有一个脚本可以同时调用大约 40 个单独的 php 脚本（位于同一台服务器上）。我注意到每个单独的 php 脚本的启动有长达 5 秒的延迟。服务器负载 CPU 和内存看起来不错，没有交换，请参阅 top 命令向下：

```
top - 22:32:36 up  1:06,  1 user,  load average: 0.18, 0.05, 0.01
Tasks: 181 total,   1 running, 179 sleeping,   0 stopped,   1 zombie
Cpu(s):  0.0%us,  0.5%sy,  0.0%ni, 99.5%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   1048576k total,  1024144k used,    24432k free,    20160k buffers
Swap:  2097144k total,        0k used,  2097144k free,   352520k cached 
```

绑定所有 multi_curl 请求的循环中的最后一个脚本通常具有最大的延迟。我在每个脚本一开始就测量了延迟。

我能做些什么来防止这种延迟？

下面是我的 httpd.conf

```
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  

ServerRoot "/etc/httpd"
Listen 80

#LoadModule dummy_module /usr/lib/apache/mod_dummy.so
#LoadModule php5_module        /usr/lib/apache/libphp5.so
Include /etc/httpd/conf/extra/httpd-phpmodules.conf

User apache
Group apache

KeepAlive On
KeepAliveTimeout 30

ServerAdmin admin@localhost
DocumentRoot "/var/www/html"

MaxClients 800
MaxRequestsPerChild 800

<Directory /home/*>
    AllowOverride All
    Options -MultiViews -Indexes FollowSymlinks IncludesNoExec +Includes
<Limit GET POST OPTIONS PROPFIND>
    Order allow,deny
    Allow from all
</Limit>
<LimitExcept GET POST OPTIONS PROPFIND>
    Order deny,allow
    Deny from all
</LimitExcept>
</Directory>

<Directory />
    Options All
    AllowOverride All
</Directory>

<Directory "/var/www/html">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
   <IfModule mod_suphp.c>
        suPHP_Engine On
        suPHP_UserGroup webapps webapps
    SetEnv PHP_INI_SCAN_DIR
   </IfModule>
</Directory>

<IfModule mod_dir.c>
    DirectoryIndex index.html index.htm index.shtml index.php index.php5 index.php4 index.php3 index.phtml index.cgi
</IfModule>

<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

ErrorLog /var/log/httpd/error_log
LogLevel warn

#replace %b with %O for more accurate logging
<IfModule mod_logio.c>
    LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %O" common
    LogFormat "%O %I" bytes
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
</IfModule>

    CustomLog /var/log/httpd/access_log common

<IfModule mod_alias.c>
    # Include some DirectAdmin alias
    Include conf/extra/httpd-alias.conf
</IfModule>

<Directory "/var/www/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

DefaultType text/plain

<IfModule mod_mime.c>
    TypesConfig conf/mime.types
    AddType application/x-gzip .tgz
    AddEncoding x-compress .Z
    AddEncoding x-gzip .gz .tgz
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddHandler cgi-script .cgi
    AddHandler type-map var
    AddType text/html .shtml
    AddOutputFilter INCLUDES .shtml
    AddType video/x-ms-asf .avi
    AddType video/mpeg .mpg
    AddType video/mpeg .mpeg
    AddType video/quicktime .mov
    AddType video/x-ms-wmv .wmv
</IfModule>

#EnableMMAP off
#EnableSendfile off

#######################################################################################
# Do not change anything in included files, because they are rewritten by DirectAdmin #
#######################################################################################

# This is needed for PHP
Include conf/extra/httpd-php-handlers.conf

# Server-pool management (MPM specific)
Include conf/extra/httpd-mpm.conf

# Multi-language error messages
Include conf/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
Include conf/extra/httpd-autoindex.conf

# Language settings
Include conf/extra/httpd-languages.conf

# User home directories
#Include conf/extra/httpd-userdir.conf

# Real-time info on requests and configuration
Include conf/extra/httpd-info.conf

# Virtual hosts
Include conf/extra/httpd-vhosts.conf

# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
Include conf/extra/httpd-dav.conf

# Various default settings
Include conf/extra/httpd-default.conf

# Secure (SSL/TLS) connections
Include conf/extra/httpd-ssl.conf

# Deflate module settings
Include conf/extra/httpd-deflate.conf

# All the DirectAdmin vhosts
Include conf/extra/directadmin-vhosts.conf

# All suPHP directives
Include conf/extra/httpd-suphp.conf

# For user configurations not maintained by DirectAdmin. Empty by default.
Include conf/extra/httpd-includes.conf

#######################################################################################
# End of included files that are rewritten by DirectAdmin                             #
#######################################################################################

<IfModule mod_ssl.c>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:01:29.057

最常见的原因是，调用脚本时出现了阻塞。

这可能是 php 在 session-handler 中的构建，它阻止了对同一 session-id 的并发请求（关键字：race-conditions）。如果这是您的问题并且您需要解决方案，您可以实现自己的会话处理程序，它以适合您的方式处理会话数据。

另一个原因可能是集群文件或系统 IO 压力过大（例如慢速磁盘）。

# php - 使用 mysql_real_escape_string() 时拒绝访问 www-data 的 Joomla

> ID：11352241
> 
> 赞同：0
> 
> 时间：2012-07-05T20:40:27.110
> 
> 标签：php, mysql, joomla, joomla1.6

我在使用 Joomla 开发的代码中使用了 mysql mysql_real_escape_string($somevariable)！api。除了这个问题显示错误之外，一切都运行良好。

`mysql_real_escape_string(): Access denied for user 'www-data'@'localhost' (using password: NO) in /var/www/JOOMLA/components/com_quiz/models/questions.php`

我在互联网上搜索并得到以下解决方案：创建一个`$con=mysql_connect(....);`并将其作为第二个参数传递，`mysql_real_escape_string($somevariable,$con)`其中工作正常。

问题是我在代码中的每个地方都使用 Joomla API。所以我可以为此使用默认的 Joomla db 对象 `$db =& JFactory::getDBO();`吗？

基本上我想要类似的东西 `$db =& JFactory::getDBO();` `mysql_real_escape_string($somevariable,$db)`

但它显示错误： `mysql_real_escape_string() expects parameter 2 to be resource, object given in /var/www/JOOMLA/components/com_quiz/models/questions.php on line 85`

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:41:55.807

如果您使用 Joomla 数据库对象进行查询，为什么要使用 mysql 库的转义功能？你不需要。按照这个[Joomla wiki 条目](http://docs.joomla.org/Secure_coding_guidelines#Constructing_SQL_queries)向您展示如何使用他们的 DBO 创建正确转义的 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:45:51.477

改用 $db->quote($somevariable);

# c# - C# Linq - 延迟执行

> ID：11352244
> 
> 赞同：10
> 
> 时间：2012-07-05T20:40:34.487
> 
> 标签：c#, linq

如果我建立一个查询说：

（查询是使用 System.Xml.Linq 中的 XDocument 类构建的）

```
var elements = from e in calendarDocument.Root.Elements("elementName") select e; 
```

然后我多次调用 elements.Last() 。每次调用都会返回最新的 Last() 元素吗？

例如，如果我这样做

```
elements.Last().AddAfterSelf(new XElement("elementName", "someValue1"));
elements.Last().AddAfterSelf(new XElement("elementName", "someValue2"));
elements.Last().AddAfterSelf(new XElement("elementName", "someValue3"));
elements.Last().AddAfterSelf(new XElement("elementName", "someValue4")); 
```

它实际上是每次都获取最新元素并在末尾添加一个新元素，还是 elements.Last() 每次都是相同的元素？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T20:44:04.530

是的，linq 查询是惰性求值的。直到您调用`Last()`查询才会执行。在这种情况下，它将每次都获得最新的最后一个元素。

我认为这实际上是我第一次看到`Last()`多次正确使用调用（或任何其他执行查询的运算符）。当人们这样做时，通常是错误地导致性能不佳。

我认为 linq-to-xml 库足够智能，可以为您的查询获得良好的性能，但如果不尝试，我不会相信它。

# c++ - C++ 线程之间的内存共享

> ID：11352249
> 
> 赞同：22
> 
> 时间：2012-07-05T20:40:42.707
> 
> 标签：c++, multithreading, memory, heap-memory, stack-memory

我是 C++ 线程的新手，我试图清楚地了解内存是如何在线程之间共享/不共享的。我正在使用`std::thread`C++11。根据我在其他 SO 问题上所读到的内容，**堆栈**内存仅由一个线程拥有，而**堆**内存在线程之间共享。因此，根据我对堆栈与堆的理解，以下应该是正确的：

```
#include <thread>
using namespace std;

class Obj {
public:
    int x;
    Obj(){x = 0;}
};

int main() {
    Obj stackObj;
    Obj *heapObj = new Obj();
    thread t([&]{
        stackObj.x++;
        heapObj->x++;
    });
    t.join();
    assert(heapObj->x == 1);
    assert(stackObj.x == 0);
} 
```

如果我搞砸了一堆东西，请原谅我，lambda 语法对我来说很新。但希望我正在尝试做的是连贯的。这会按我的预期执行吗？如果不是，我有什么误解？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-05T20:44:11.787

记忆就是记忆。C++ 中的对象占用内存中的某个位置；该位置可能在堆栈或堆上，或者它可能已被静态分配。对象的位置无关紧要：任何具有对象引用或指针的线程都可以访问该对象。如果两个线程有​​一个对象的引用或指针，那么两个线程都可以访问它。

在您的程序中，您创建一个工作线程（通过构造一个`std::thread`）来执行您提供的 lambda 表达式。因为您通过引用捕获两者`stackObj`（`heapObj`使用`[&]`捕获默认值），所以该 lambda 具有对这两个对象的引用。

这些对象都位于主线程的堆栈上（请注意，这`heapObj`是一个指针类型的对象，位于主线程的堆栈上，并指向位于堆上的动态分配的对象）。不制作这些对象的副本；相反，您的 lambda 表达式具有对对象的引用。它直接修改和修改间接`stackObj`指向的对象。`heapObj`

主线程加入工作线程后，两者`heapObj->x`的`stackObj.x`值都为`1`.

* * *

如果您使用了值捕获默认值 ( `[=]`)，您的 lambda 表达式将同时*复制*`stackObj`和`heapObj`。lambda表达式`stackObj.x++`中的表达式将增加*copy*，而`stackObj`您在其中声明的`main()`将保持不变。

如果捕获`heapObj`按值，则仅复制指针本身，因此在使用指针的副本时，它仍然指向同一个动态分配的对象。该表达式`heapObj->x++`将取消引用该指针，产生`Obj`您通过 创建的`new Obj()`，并增加其值。然后，您会在末尾观察到`main()`已`heapObj->x`递增。

（请注意，为了修改按值捕获的对象，必须声明 lambda 表达式`mutable`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:47:48.960

我同意 James McNellis 的观点，`heapObj->x`并且`stackObj.x`将是`1`。

此外，此代码**仅**在您`join`生成线程后立即起作用。如果你启动了线程，然后在它运行时做了更多的工作，异常可能会展开堆栈，突然新线程`stackObj`无效。这就是为什么在线程之间共享堆栈内存是一个坏主意，即使它在技术上是可行的。

# python - 从 raw_data.txt 读取并写入 results.txt 文件并在 Python 中进行处理

> ID：11352250
> 
> 赞同：-1
> 
> 时间：2012-07-05T20:40:51.877
> 
> 标签：python

这是我的第一篇文章。我有一个询问学生人数的功能。然后，对于每个学生，前三行包含以下信息：学生 ID、姓名和该学期修读的课程数量。现在，对于每门课程，都会列出课程编号、学分和学生获得的分数百分比。

```
def rawdata():
    semester = 1
    if semester == 1:
        raw_file = open('raw_data.txt', 'a')
        total = 0.0
        total2 = 0.0
        num_students = int(input('Enter number of students: '))        
        for student in range(num_students):
            raw_file.write('Start' + '\n')
            student_id = input('Enter student ID: ')
            name = input('Enter Name: ')
            num_classes = int(input('Enter number of courses taken: '))
            raw_file.write(student_id + '\n')
            raw_file.write(name + '\n')
            raw_file.write(str(num_classes) + '\n')
            for classes in range(num_classes):
                course_number = input('Enter Course Number: ')
                credits = int(input('Enter Credit Hours: '))
                GPA1 = float(input('Enter percentage grade for class: '))
                raw_file.write(course_number + '\n')
                raw_file.write(str(credits) + '\n')
                raw_file.write(str(GPA1) + '\n')
                total += credits
            raw_file.write('End' + '\n')
        raw_file.close()
        print('Data has been written') 
```

所有数据都列在一个 txt 文件中，现在我需要从我的 raw_data.txt 中提取这些信息，如下所示（因输入而异）：

```
Start
eh2727
Josh D
2
MAT3000
4
95.0
COM3000
4
90.0
End
Start
ah2718
Mary J
1
ENG3010
4
100.0
End 
```

并对其进行处理，以便我可以计算每个学生的 GPA。我让每个学生的信息块都包含在开始/结束中，我不知道如何在我的处理函数中读取这些信息以便计算他们的 GPA。这是我到目前为止所拥有的：

```
def process():
    data = open('raw_data.txt', 'r')
    results = open('process_results.txt', 'w')
    buffer = []
    for line in data:
        if line.startswith('Start'):
            buffer = []
        buffer.append(line)
        if line.startswith("End"):
            for outline in buffer:
                results.write(outline) 
```

这只是将其全部写入我的结果文本，我不知道如何单独处理每个信息块来计算 GPA。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:09:11.940

您需要开发一个状态机来处理学生记录。你的'if line.strip() == 'Start' 走在正确的轨道上，这是一个指示记录开始的哨兵。此时你可以做的是设置一个标志，processStudentRecord = true，所以下一次通过'for line in data'你知道你得到的行是记录的一部分。设置标志后，您应该打破该 if 循环，这样您就不必拥有一堆 elif。

```
processStudentRecord = False
for line in data:
  if line.strip() == 'Start':
    processStudentRecord = True
    expecting            = "student_id"
    # break here so you go immediately to the next line
  if line.strip() == 'End':
    processStudentRecord = False
    # break here so you go immediately to the next line
  if processStudentRecord:
    # keep track of where you are in the student record
    if expecting == "student_id":
      # extract the student name and then proceed to the next expected line
      expecting = "student_name"
    elif expecting == "" 
```

等等等等。请注意，这是一种“程序化”方法——可以发明面向对象或功能性的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:09:50.070

由于将数据写入 .txt 文件是您自己的代码，因此您可以考虑以更容易和/或更容错的格式编写它以供机器读取，例如 JSON 或 XML。或者，您可能需要考虑使用 pickle 或 cpickle 来序列化数据并再次读入。

无论如何，关于你的问题：如何读取文件。不幸的是，您没有告诉我们您想对解析后的数据做什么。我假设你想在这里打印它。通常，您当然会创建一个很好的类或描述学生和课程的类。

为了解析像你这样的文件，我经常使用字符串方法 split() 。split() 是你最好的朋友。有关字符串方法的更多信息，请参阅[python 文档](http://docs.python.org/release/2.5.2/lib/string-methods.html)。

```
f = open('raw_data.txt', 'rt')
data = f.read()

students = data.split('Start\n')[1:]

for s in students:
    lines = s.split('\n')
    id = lines[0]
    name = lines[1]

    nrcourses = int(lines[2])

    line = 2
    courses = []
    for n in range(nrcourses):
        number = lines[line+1]
        credit = lines[line+2]
        score = lines[line+3]
        courses.append((number, credit, score))
        line += 3

    print 'id: %s; name %s; course list %s' % (id, name, courses)

f.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:43:22.270

这是相当多的代码，但如果你一直跟踪它直到你理解它是如何工作的，你会学到很多东西。

首先，我们需要获取一个班级标记并将其转换为分数。你可以把它写成 13 的级联`if`，但我喜欢数据驱动的方法：

```
import bisect

def grade_points(pct):
    grade  = [  0,  50,  53,  57,  60,  63,  67,  70,  73,  77,  80,  85,  90]
    points = [0.0, 0.7, 1.0, 1.3, 1.7, 2.0, 2.3, 2.7, 3.0, 3.3, 3.7, 4.0, 4.0]
    if 0 <= pct <= 100:
        # find the highest grade <= pct
        idx = bisect.bisect_right(grade, pct) - 1
        # return the corresponding grade-point
        return points[idx]
    else:
        raise ValueError('pct value should be in 0..100, not {}'.format(pct)) 
```

接下来，我们想要一个 Student 类来轻松跟踪每个学生的数据

```
class Student(object):
    str_format = '{id:>8}  {name}  {gpa}'

    def __init__(self, *args):
        if len(args)==1:    # copy constructor
            student = args[0]
            self.id, self.name, self.classes = student.id, student.name, student.classes
        elif len(args)==3:  # "id", "name", [classes,]
            self.id, self.name, self.classes = args
        else:
            raise ValueError('Failed call to {}.__init__{}'.format(type(self), args))

    @property
    def gpa(self):
        points = sum(hour*grade_points(grade) for code,hour,grade in self.classes)
        hours  = sum(hour                     for code,hour,grade in self.classes)
        return points / hours

    def __str__(self):
        return type(self).str_format.format(id=self.id, name=self.name, classes=self.classes, gpa=self.gpa)

    def __repr__(self):
        return "{}('{}', '{}', {})".format(type(self).__name__, self.id, self.name, self.classes) 
```

所以你可以创建一个学生并像这样找到她的 GPA：

```
sally = Student('ab2773', 'S Atkins', [
    ('MAT3000', 4, 81.0),
    ('ENG3010', 4, 85.0)
])
print sally     # '  ab2773  S Atkins  3.85' 
```

现在我们需要能够将 Student 流式传输到文件和从文件中传输。从 OOP 的角度来看，这有点痛苦，因为 Student 对象实际上不需要了解 File 对象的任何信息，反之亦然，而且更重要的是因为我们希望将您升级到更好的文件格式 - Student object 绝对不需要知道多个不兼容的文件类型。

我已经通过子类化 Student 来解决这个问题；我以这样一种方式编写了该`Student.__init__`方法，即我可以来回转换并且不必为子类重写它，因此子类只知道如何将自己转换为您讨厌的文件格式

```
class NastyFileStudent(Student):
    @classmethod
    def from_strings(cls, strings):
        if len(strings) > 3 and len(strings) == 3 + int(strings[2])*3:
            codes  = strings[3::3]
            hours  = map(int,   strings[4::3])
            grades = map(float, strings[5::3])
            return Student(strings[0], strings[1], zip(codes, hours, grades))
        else:
            # not enough data returned - probably end of file
            return None

    def __str__(self):
        data = [self.id, self.name, str(len(self.classes))] + [str(i) for c in self.classes for i in c]
        return '\n'.join(data) 
```

文件只知道它有学生数据，但对内容一无所知

```
class NastyFile(object):
    START = 'Start'
    END   = 'End'

    @staticmethod
    def _read_until(endfn, seq):
        is_end = endfn if callable(endfn) else lambda s: s==endfn
        data = []
        for s in seq:
            if is_end(s):
                break
            else:
                data.append(s)
        return data

    def __init__(self, name, mode='r'):
        self.name = name
        self.mode = mode
        self._f = open(name, mode)
        self.lines = (ln.strip() for ln in self._f)

    def __del__(self):
        self._f.close()

    def __iter__(self):
        return self

    def next(self):
        _       = NastyFile._read_until(NastyFile.START, self.lines)
        strings = NastyFile._read_until(NastyFile.END,   self.lines)

        student = NastyFileStudent.from_strings(strings)
        if student is None:
            raise StopIteration()
        else:
            return student

    def read(self):
        return list(self)

    def write(self, s):
        if not hasattr(s, '__iter__'):
            s = [s]
        for student in s:
            self._f.write('{}\n{}\n{}\n'.format(NastyFile.START, str(NastyFileStudent(student)), NastyFile.END)) 
```

现在我们可以像这样读写学生记录文件了

```
>>> students = NastyFile('student_records.txt').read()

>>> for s in students:
...     print s
  eh2727  Josh D  4.0
  ah2718  Mary J  4.0

>>> students.append(sally)

>>> students.sort(key=lambda s: s.name.rsplit(None,1)[-1])  # sort by last name

>>> for s in students:
...     print s
  ab2773  S Atkins  3.85
  eh2727  Josh D  4.0
  ah2718  Mary J  4.0

>>> newfile = NastyFile('new_records.txt', 'w')
>>> newfile.write(students)

>>> for i,s in enumerate(NastyFile('new_records.txt'), 1):
...     print '{:>2}: {}'.format(i, s)
 1:   ab2773  S Atkins  3.85
 2:   eh2727  Josh D  4.0
 3:   ah2718  Mary J  4.0 
```

# html - Django / div ID

> ID：11352261
> 
> 赞同：1
> 
> 时间：2012-07-05T20:41:12.023
> 
> 标签：html, css, django, forms, post

我有一个关于 Django 的问题。当您将视图配置为使用 POST 方法将信息从客户端返回到您的视图/模板中时，您还可以通过 div id 发送吗？我问的原因是我有一个表单，其中包含从客户端返回的大量信息，并且希望能够通过 div id 对其进行排序（在 Django 中）。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:45:57.493

是的，这是可能的。您可以添加一个隐藏的输入字段，其中包含 div id 的值。只需将以下内容放入`<form>`标签中：

```
<input type="hidden" name="form_id value="name_of_id"> 
```

您现在可以在 Django 视图中检索该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:55:43.247

替代但类似的解决方案是给按钮，以发布表单，div id 的名称。

```
<button type="submit" value="div id" name="div id">Submit</button> 
```

# c# - 无法在委托函数中向 datagridview 添加行

> ID：11352262
> 
> 赞同：0
> 
> 时间：2012-07-05T20:41:12.423
> 
> 标签：c#, datagridview, delegates

我正在尝试向公共函数中的现有 datagridview 添加新行。每当我尝试访问 datagridview 的任何数据属性时，我都会得到空值。数据源属性为空，因此我无法向其添加新元素。我创建了一个新的 datagridviewrow，但 CreateCells 方法不会复制列并引发索引越界错误。有谁知道我在这里尝试做的事情可能有什么问题？

下面是整个函数的代码：

```
public void AddToGrid(Attendance newRecord)
    {
        try
        {
            DataGridViewRow newRow = new DataGridViewRow();
            newRow.CreateCells(AttendanceGrid);
            newRow.Cells[1].Value = newRecord.EmployeeNumber;
            newRow.Cells[2].Value = newRecord.ScheduledDate;
            newRow.Cells[3].Value = newRecord.SIn;
            newRow.Cells[4].Value = newRecord.SOut;
            newRow.Cells[5].Value = newRecord.AIn;
            newRow.Cells[6].Value = newRecord.AOut;
            newRow.Cells[7].Value = newRecord.RecordCode;
            newRow.Cells[8].Value = newRecord.ReasonCode;
            newRow.Cells[9].Value = newRecord.Comments;

            AttendanceGrid.Rows.Add(newRow);
            AttendanceGrid.Refresh();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message + ":  " + ex.StackTrace, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

谁能看到我在做什么的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:44:20.707

您应该有 DatagridView 的数据源，例如 DataTable。

然后，您通过绑定源将该 DataTable 绑定到 Datagridview。

您可以向 DataTable 添加新行，然后它将自动反映在 Datagrid 中。

# python - 明年日期时间到期

> ID：11352263
> 
> 赞同：0
> 
> 时间：2012-07-05T20:41:22.537
> 
> 标签：python, datetime

我在 python 中有一个 UTCDateTime 对象，我需要检查它是否在今天之后但在明年之内。实现这一目标的最佳方法是什么？

提前致谢

从 13 个月变为 1 年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:50:39.093

```
now = datetime.datetime.utcnow()
    if now.month < 12:
        expire_date = now.replace(year=now.year + 1, month=now.month + 1)
    else:
        expire_date = now.replace(year=now.year + 2, month=0) 
```

虽然......如果你在 1 月 31 日运行它仍然会失败，因为 2 月 31 日不存在。您可以添加一些与月份相关性相关的条件以避免这些问题。

如果您将其更改为 12 个月（回复：评论），您只需要担心闰年。

```
now = datetime.datetime.utcnow()
exp_year = now.year + 1
exp_month = now.month
exp_day = now.day

if exp_month == 2 and exp_day == 29:
    exp_month += 1
    exp_day = 1

exp_date = now.replace(year=exp_year, month=exp_month, day=exp_day) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:05:51.510

该`dateutil`模块可以为您处理这个......（与日期时间相同）

```
from datetime import date
from dateutil import relativedelta

from date import date

d = date(2011, 1, 31)
delta = relativedelta.relativedelta(months=13)
d + delta

#datetime.date(2011, 2, 28) 
```

# android - 从 SCAN_RESULTS ZXing 中提取数据

> ID：11352264
> 
> 赞同：-1
> 
> 时间：2012-07-05T20:41:31.540
> 
> 标签：android, zxing

这次我有一个关于 ZXing 的新问题。好的，我已经阅读了我在这个网站上可以找到的所有关于将 ZXing 与应用程序一起使用的信息，但我很困惑。我已经编写了我的数据库应用程序，我想创建一个带有数据的条形码，即组名称、小时和成本，没什么复杂的。我可以在线创建条形码，而不是概率。问题是如何从 ZXing 中的 SCAN_RESULTS 返回的“内容”中提取组名称、小时数和成本。

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.scanButton:
    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
    intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
    startActivityForResult(intent, REQUEST_BARCODE);
    break;

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == REQUEST_BARCODE) {
        if (resultCode == RESULT_OK) {

            //barcode is variable where the string from SCAN_RESULT is stored
            String barcode = intent.getStringExtra("SCAN_RESULT");
           // etName.setText(barcode); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:22:54.080

If it is safe to assume that group name will never contain spaces you could use String.split() to get the data.

something like this:

```
String[] datas = barcode.split(" ");
String groupName = datas[0];
double hours = Double.valueOf(datas[1]);
double cost = Double.valueOf(datas[2]); 
```

# apache-flex - Flash Builder 的快速替代品

> ID：11352266
> 
> 赞同：0
> 
> 时间：2012-07-05T20:41:36.670
> 
> 标签：apache-flex, intellij-idea, flash-builder

我在 Flex 中有一个大型应用程序。我使用 Flash Builder 来开发它。Flash Builder 运行良好，直到我尝试编译我的项目。检查应用程序界面的微小变化需要花费太多时间。

1.  Flash Builder 有更快的替代方案吗？InelliJ Idea 是否可以更快地编译大型项目？
2.  我只需要检查 100 个界面面板中的一个，是否有任何解决方案可以只预览它（将应用程序划分为更小的模块除外）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:36:43.847

FDT 和 IntelliJ Idea 都使用 SDK 随附的默认编译器，用于您使用的 Flex 版本。我会假设 Flash Builder 也是如此，但我目前从未使用过这个产品。我知道 FDT 将通过仅编译自上次编译以来已更改的那些内容来快速编译相对较大的程序，这也是 IntelliJ 的一个选项。

在放弃您当前的 IDE 之前，我会检查以确保它也不是一个选项，我知道如果我从 FDT 转到 FlashDevelop 或 IntelliJ，IDE 中似乎会出现一些小东西。没有一个是真正的错误，但必须在编译之前处理以保持整洁。

如果您认为必须对 IDE 进行更改，我可以保证以上任何一种软件都是可以使用的可靠软件，而 FDT 是我目​​前最喜欢的，因为它拥有我最常使用的工具。

# linux - 端口 80 上的 pdflush 阻止 Apache 重新启动

> ID：11352271
> 
> 赞同：1
> 
> 时间：2012-07-05T20:41:58.803
> 
> 标签：linux, apache, centos, plesk

预备：+ CentOS 5 + Plesk 10.4.4 更新 #35

问题：在 plesk 中添加/更改新域/主机期间，它通常会写入新的或更新 apache vhost 配置文件，然后重新启动 apache 服务。更新重写似乎很好，文件中没有错误，但是最近apache由于端口80不可用而在关闭后无法重新启动，通过“netstat -tulpn ...”进一步检查显示以下...

```
Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name
tcp        0      0 :::80                       :::*                        LISTEN      25794/PDFLUSH
tcp        0      0 :::443                      :::*                        LISTEN      25794/PDFLUSH 
```

您可以看到 PDFLUSH 占用了较高的进程 ID，但同时位于 80 和 443 上，这会阻止 apache 重新启动。我必须手动获取 PID 并发出 kill 指令，然后才能再次运行“service httpd start”来启动 apache。

在我的搜索中，我看到有人被黑客入侵的旧参考，但我可以找到任何类似的症状，老实说，我不知道在日志中查找什么或具体查看哪个日志文件。我还听说这可能是内存故障的症状，但我不知道如何在生产服务器上测试内存。

拜托，任何帮助将不胜感激，每次我收到服务器再次关闭的短信时，我的心都会下沉！

* * *

编辑通过简单地添加子域再次发生这种情况，但是这次我能够在杀死 PDFLUSH 实例并恢复 apache 之前快速运行 ps -aux ...

> apache ... ./PDFLUSH -b service.config

现在正在努力寻找它的位置...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:30:45.677

好消息是我找到了罪魁祸首，坏消息是它是“c99”，只要谷歌一下，你就会发现它的历史很长。现在真正的乐趣开始了，服务器已经root了吗？

对于那些有类似问题并认为即使使用“PDFLUSH”以外的名称也可能相同的人，只需执行

> 查找 /var/www/vhosts -name PDFLUSH

想知道这个小混蛋藏在哪里。我在我的一个共享托管客户端站点中找到了我的站点，该站点深埋在 webroot 内的目录树中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:48:45.620

`netstat`您包含的输出非常可疑：

*   您看到的程序`PDFLUSH`以大写的所有字符调用。这似乎是一种逃避检测的尝试；`pdflush`（全部小写）是处理将脏内存页写回磁盘的合法内核线程的名称。任何合法程序都不太可能使用这样的名称。

*   合法的`pdflush`没有任何网络功能 - 它与网络无关。这似乎是作为一个 Web 服务器，但不存在具有这样名称的 Web 服务器。除非你用那个不幸的名字明确地安装了一个自定义的 Web 服务器，否则你就会遇到问题。

    您是否尝试过`netcat`使用 Telnet 客户端连接到这两个端口？这可能会给你一个关于正在发生的事情的线索。

就测试系统内存而言，[`memtest86`](http://www.memtest.org/)这是当今事实上的标准工具。然而，失败的记忆通常以随机崩溃的形式出现——你所看到的似乎太具体了。

# javascript - 如何优化我的 javascript 滑块加载？

> ID：11352275
> 
> 赞同：1
> 
> 时间：2012-07-05T20:42:18.007
> 
> 标签：javascript, jquery

我一直在编写一个小的响应式图像滑块来使用[responsiveslides.js](http://responsive-slides.viljamis.com/)和一个小脚本来显示我的婚礼照片来处理垂直图像（它根据浏览器视口设置最大高度）。你可以在[http://johnandalex.us/photos](http://johnandalex.us/photos)看到它终于可以按照我想要的方式工作了，但有两个例外：

1.  图片显示并在延迟后调整大小（当浏览器窗口小于图片的完整大小时）
2.  在图片完全加载之前，上一个/下一个箭头不会显示（这需要一段时间，尤其是在较慢的连接上，因为有超过 100 个图像）

关于如何改进这两个项目的任何想法？我对 HTML 和 CSS 完全满意，但在 JS 方面完全是新手。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:45:56.980

我会隐藏幻灯片容器，直到 $(document).ready 触发，然后显示控件。您可以在页面加载时显示加载程序动画 gif。

**编辑：**

以下是如何实现此效果的示例：

首先，您需要在包含您的幻灯片的 UL 上指定 display:none：

```
<ul class="rslides rslides1" style="display:none;"> 
```

接下来，在准备好的文档上显示幻灯片容器并像您已经完成的那样初始化插件：

```
 $(document).ready(function () {

    $(".rslides").show();

    $(".rslides").responsiveSlides({
        auto: false,
        speed: 700,
        timeout: 3000,
        nav: true
    });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:46:05.813

1.  如果可能，您应该始终为图像设置高度和宽度。

# python - tkFileDialog 的 askopenfilename 方法中的默认文件类型

> ID：11352278
> 
> 赞同：5
> 
> 时间：2012-07-05T20:42:28.693
> 
> 标签：python, tkinter

出于某种原因，默认文件类型会根据我是使用菜单打开文件对话框还是使用 Ctrl+O 热键而改变。为什么？

```
from Tkinter import *
import tkFileDialog

FILEOPENOPTIONS = dict(defaultextension='.bin',
                       filetypes=[('Bin file','*.bin'), ('All files','*.*')])

class TestGUI(Tk):
    def __init__(self):
        Tk.__init__(self)
        self.title('Test')
        menu = self.menubar = Menu(self)
        fmenu = self.filemenu = Menu(menu, tearoff=0)
        menu.add_cascade(label='File', underline=0, menu=fmenu)
        fmenu.add_command(label="Open", underline=0,
                          accelerator='Ctrl+O',
                          command=self.fopendialog)
        self.config(menu=menu)
        self.bind_all('<Control-o>', self.fopendialog)

    def fopendialog(self, event=None):
        print repr(tkFileDialog.askopenfilename(parent=self,
                                                **FILEOPENOPTIONS))

if __name__ == "__main__":
    test = TestGUI()
    test.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-21T12:26:00.537

我遇到了同样的问题，但我通过将默认文件扩展名放在字典的最后来修复它。

像这样：

```
FILEOPENOPTIONS = dict(defaultextension='.bin',
                  filetypes=[('All files','*.*'), ('Bin file','*.bin')]) 
```

请参阅[此页面](http://tkinter.unpythonic.net/wiki/tkFileDialog)上的示例以供参考。

# c# - 使用 C# 中的类将数据保存到 SQL DB

> ID：11352286
> 
> 赞同：3
> 
> 时间：2012-07-05T20:43:54.917
> 
> 标签：c#, asp.net, visual-studio-2010

对不起，如果我在错误的论坛上发布了这个问题。这是我第一次在 Stackoverflow 上发帖。而且我自己也在学习 ASP.NET 和 C#，所以如果这是初级的，请原谅我。

我使用 Visual Studio 2010 在 ASP.NET 4.0 C# 中创建了一个类文件。我的代码如下所示

```
namespace My.Customers
{
    public class EmailMailingList
    {
        #region members

        private string _emailList;

        #endregion

        #region properties

        /// <summary>
        /// gets or sets Customer Email for Mailing List
        /// </summary>
        public string EmailList
        {
            get { return _emailList; }
            set { _emailList = value; }
        }

        #endregion
    }
} 
```

我在 SQL 2008 中有一个名为 MailingList 的数据库表，其中包含 2 个字段，即 Id 和 Email，其中 Id 是具有自动增量的 int 和 Email Varchar(50)。

我还根据这个表创建了一个存储过程来输入电子邮件地址。

我感到困惑的是如何将此信息添加到我的类文件中，以便将数据保存到数据库中。

我还创建了一个名为 Join-Mailing-List.aspx 的 Web 表单，其中包含一个名为 tbEmail 的文本框和一个名为 Join 的提交按钮。

我想要的是当有人在文本框中输入电子邮件地址时，我想将文本框值传递给我的类文件中的字符串 EmailList 并将数据保存到数据库中。

我知道如何将文本框值传递给我的类文件。我只是不知道如何在不使用 aspx 页面中的数据库代码的情况下将信息保存到数据库

感谢并非常感谢您提供任何建议或示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:57:12.200

使用 C# 将信息保存到数据库有多种不同的方法。一些比较常见的：

*   [网络](http://msdn.microsoft.com/en-us/library/h43ks021%28v=vs.110%29.aspx)
*   [Linq-To-SQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)
*   [实体框架](http://msdn.microsoft.com/en-us/library/bb399572.aspx)

您可能需要阅读这些内容才能找到最适合您的内容。如果您想要快速且相对简单的东西，我可能会选择 ADO.NET，但其他人可能不同意。

至于如何在你的类中包含更新代码，你可以添加一个`Update()`or`Save()`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:16:32.210

有几种方法可以保存到数据库中

这是一个：（我认为更简单）

```
public class EmailMailingList
{

    private string _emailList;

    public string EmailList
    {
        get { return _emailList; }
        set { _emailList = value; }
    }

    #endregion

   public void Save()
   {
      //Insert (this.EmailList); to database
   }
}

//Use:
EmailMailingList ml = new EmailMailingList();
ml.EmailList = "blah";
ml.Save(); 
```

一些学派对此皱眉。

另一个是创建一个特殊的类来做到这一点

```
public class MailingListSaver
{
   public static void Save(EmailMailingList ml)
   {
      //insert (ml.EmailList) into database
   }
}

//Use:
EmailMailingList ml = new EmailMailingList();
ml.EmailList = "blah";
MailingListSaver.Save(ml); 
```

调查（谷歌）

*   活动记录模式
*   存储库模式
*   N层应用程序c#

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:54:21.203

为了清楚起见，您可以稍微简化您的课程：

```
public class EmailMailingList
{
    public string EmailList { get; set; }
} 
```

然后，您有很多选项可以将此信息发送到您的数据库。如果您刚刚开始，我认为plain ol' ADO.Net 是习惯事物的最佳选择。就像是：

```
// A method in your code-behind:
public void Save(EmailMailingList list)
{
    using(var connection = new SqlConnection("your connection string"))
    {
        var command = connection.CreateCommand();
        command.CommandText = "name of your stored procedure";
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.Add(new SqlParameter( ... ));
        command.ExecuteNonQuery();
    }
} 
```

当然，最终您会想要了解 .Net 世界中可用的强大 ORM（实体框架、NHibernate、LinqToSql）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T21:02:34.467

我建议使用实体数据模型。这是最快、最简单的方法，也是“最佳实践”。您应该开始阅读本教程：

[http://www.asp.net/web-forms/tutorials/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-1](http://www.asp.net/web-forms/tutorials/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-1)

一旦您使用向导设置了数据模型，那么从代码端的表单中保存数据非常快速和简单：

```
dataModel.dataEntities de;
dataModel.dataTable tbl;

protected void Page_Load(object sender, EventArgs e)
{

}
protected void btnSubmit_Click(object sender, EventArgs e)
{
    //Create new entity object and table object
    de = new dataModel.dataEntities();
    de.Connection.Open();

    tbl = new dataModel.DataEntities();

    tbl.Field1 = ((TextBox)tbField1).Text.ToString(); ;
    tbl.Field2 = ((TextBox)tbField2).Text.ToString(); ;

    //Insert the row and save the change to the table
    de.AddToDataTable(tbl);
    de.SaveChanges();

    de.Connection.Close();
} 
```

# javascript - 使用 Ryan Fait 的“自定义表单元素”时的“全选”功能

> ID：11352287
> 
> 赞同：1
> 
> 时间：2012-07-05T20:43:58.037
> 
> 标签：javascript, jquery, forms, checkbox

我使用 Ryan Fait 的自定义表单元素制作了一个简单的表单。现在我正在尝试实现“全选”/“取消全选”功能。

我的大部分工作都是有效的，除了用户必须单击按钮两次才能获得所需的结果。我有一种感觉，我需要从自定义表单元素脚本中调用此函数，但我不知道如何。

我正在使用 JQuery、自定义表单元素 (http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/custom-form-elements.js)，并且这个：

```
<script type = "text/javascript">
function cboxToggle(group, action) {
for( var i=0, len = group.length; i < len; i++) {
group[i].checked = action;
}
}

</script> 
```

我的 HTML：

```
<form name="myname" action="checkboxes.asp" method="post">
<input type = "button" value = " CHECK ALL" onclick = "cboxToggle(check_list, !this.checked)"><br>
<input type = "button" value = " UNCHECK ALL" onclick = "cboxToggle(check_list, this.checked)"><br>

<p><input type="checkbox" name="check_list" value="1" class="styled" />Option 1 </p> 
<p><input type="checkbox" name="check_list" value="2" class="styled" />Option 2 </p>
<p><input type="checkbox" name="check_list" value="3" class="styled" />Option 3 </p>
</form> 
```

任何帮助将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:52:27.397

如果您正在使用 jQuery，那么为什么不充分利用它呢？这也意味着，没有内联代码......首先为您的按钮添加一个 id。然后确保您正确使用组，而不是`group`使用`group[]`. 然后使用此代码，它应该可以工作：

```
var ckToggle = function (group, action) {
  $('[name="'+ group +'"]').prop('checked', action)
}

$('#buttonAll').click(function(){ ckToggle('check_list[]', true) })
$('#buttonNone').click(function(){ ckToggle('check_list[]', false) }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T08:37:52.607

查看以下网址

[取消选中自定义表单元素中的复选框](http://www.apnacode.com/javascript/how-to-uncheck-checkbox-in-custom-form-elements-using-javascript/)

# sql - SQL - 在没有“硬”编码的情况下删除重复项？

> ID：11352292
> 
> 赞同：0
> 
> 时间：2012-07-05T20:44:20.690
> 
> 标签：sql, duplicates, where, procedure, clause

这是我的场景。

我有一个包含 3 行的表，我想在存储过程中返回，行是电子邮件、名称和 ID。id 必须 = 3 或 4，并且电子邮件只能针对每个用户，因为有些有多个条目。

我有一个 Select 语句如下

```
SELECT
     DISTINCT email,
     name,
     id
from table
where
     id = 3
     or id = 4 
```

好的相当简单，但是有些用户的条目既是 3 又是 4，所以它们出现两次，如果它们出现两次，我只想要那些 id 为 4 的用户。我将在下面举另一个例子，因为它很难解释。

桌子 -

```
Email              Name    Id
jimmy@domain.com   jimmy   4
brian@domain.com   brian   4
kevin@domain.com   kevin   3
jimmy@domain.com   jimmy   3 
```

因此，在上述情况下，我想忽略 id 为 3 的 jimmy，有什么方法可以在没有硬编码的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:48:37.320

```
SELECT
     email,
     name,
     max(id)
from table
where
     id in( 3, 4 )
group by email, name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:49:22.330

这是你想要达到的目标吗？

```
SELECT Email, Name, MAX(Id) FROM Table WHERE Id IN (3, 4) GROUP BY Email; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:55:28.543

有时使用`Having Count(*) > 1`可能有助于查找重复记录。

```
select * from table group by Email having count(*) > 1 
```

或者

```
select * from table group by Email having count(*) > 1 and id > 3. 
```

之前提供的`MAX(ID)`从表中选择的解决方案听起来很适合这种情况。这可能是一个替代解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T21:21:53.923

您使用的是什么 RDMS？ **这将只返回一个 "Jimmy"**，使用`RANK()`：

```
SELECT A.email, A.name,A.id
FROM SO_Table A
INNER JOIN(
SELECT 
email, name,id,RANK() OVER (Partition BY name ORDER BY ID DESC) AS COUNTER
FROM SO_Table B  
) X ON X.ID = A.ID AND X.NAME = A.NAME
WHERE X.COUNTER = 1 
```

回报：

```
 email          name    id
 ------------------------------
 jimmy@domain.com   jimmy   4
 brian@domain.com   brian   4
 kevin@domain.com   kevin   3 
```

# php - 构建 hiphop 时自定义 libevent 包的问题

> ID：11352300
> 
> 赞同：0
> 
> 时间：2012-07-05T20:45:28.320
> 
> 标签：php, linux, cmake, libevent, hiphop

我在 Backtrack 5 下构建 hiphop 时遇到了麻烦。我已经安装了所有必需品，显然它一直失败的唯一部分是自定义 libevent 包。

这是我为构建和安装 libevent 而运行的命令。

```
wget http://www.monkey.org/~provos/libevent-1.4.14b-stable.tar.gz
tar -xzvf libevent-1.4.14b-stable.tar.gz
cd libevent-1.4.14b-stable
cp ../hiphop-php/src/third_party/libevent-1.4.14.fb-changes.diff .
patch -p1 < libevent-1.4.14.fb-changes.diff
./configure --prefix=$CMAKE_PREFIX_PATH
make
make install 
```

在构建 libevent 时，它构建和安装时没有错误。在尝试构建 hiphop 时，这些是我正在运行的命令：

```
cd hiphop-php
git submodule init
git submodule update
cmake -D CMAKE_PREFIX_PATH=`/bin/pwd`/../ . 
```

但是，在运行 CMAKE 时出现此错误：

```
CMake Error at CMake/HPHPFindLibs.cmake:65 (message):
Custom libevent is required with HipHop patches 
```

有谁知道解决此问题的方法或至少为我指明正确的方向？

**编辑：**

我忘了提及这一点，但每次我尝试修补 libevent 源时，我都会收到以下消息：

```
patch -p1 < libevent-1.4.14.fb-changes.diff
patching file event.c
Reversed (or previously applied) patch detected!  Assume -R? [n] 
```

在这里，我通常只回答是并允许它继续进行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:28:05.750

我有一段时间有同样的问题。

遵循上述步骤肯定会正确安装 libevent。

虽然网站里不清楚，但这个错误可能是cmake路径错误造成的。

比如我把hiphop保存在以下路径：/dev/，而libevent在路径：/。所以，我必须设置以下内容：

```
CMAKE_PREFIX_PATH=/ 
```

# windows - 如何在不“邪恶”的情况下使用 DoEvents()？

> ID：11352301
> 
> 赞同：25
> 
> 时间：2012-07-05T20:45:29.643
> 
> 标签：windows, winforms, winapi, visual-c++, doevents

一个简单的[搜索`DoEvents`](http://www.google.com/search?q=doevents)会带来很多结果，这些结果基本上会导致：

> `DoEvents`是邪恶的。不要使用它。改用线程。

一般引用的原因有：

*   再入学问题
*   表现不佳
*   可用性问题（例如在禁用的窗口上拖放）

但是一些值得注意的 Win32 函数，例如`TrackPopupMenu`并`DoDragDrop` *执行它们自己的消息处理*以保持 UI 响应，就像这样`DoEvents`做一样。
然而，这些似乎都没有遇到这些问题（性能、重入等）。

他们是怎么做到的呢？他们如何避免引用的问题`DoEvents`？（还是*他们*？）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-05T21:07:02.130

DoEvents() 是*危险*的。但我敢打赌，你每天都会做很多危险的事情。就在昨天，我引爆了一些爆炸装置（未来的读者：请注意相对于某个美国假期的原始发布日期）。小心，我们有时可以解释危险。当然，这意味着了解和理解危险是什么：

*   **再入境问题。**这里实际上有两个危险：

    1.  这里的部分问题与调用堆栈有关。如果您在一个循环中调用 .DoEvents()，而该循环本身处理使用 DoEvents() 的消息等等，那么您将获得一个非常深的调用堆栈。*很容易过度使用 DoEvents() 并意外填满您的调用堆栈*，从而导致 StackOverflow 异常。如果你只在一两个地方使用 .DoEvents() ，你可能没问题。如果它是您在长时间运行过程时使用的第一个工具，那么您很容易在这里遇到麻烦。即使在错误的地方使用一次也可能使用户有可能*强制*stackoverflow 异常（有时只需按住 enter 键），这可能是一个安全问题。
    2.  有时可能会在调用堆栈上找到两次相同的方法。如果你在构建方法时没有考虑到这一点（提示：你可能没有），那么可能会发生坏事。如果传入方法的所有内容都是值类型，并且不依赖于方法之外的东西，那么您可能会没事。但除此之外，您需要仔细考虑如果在调用 .DoEvents() 时将控制权返回给您之前再次运行整个方法会发生什么。您的方法之外的哪些参数或资源可能会被您意想不到的修改？您的方法是否更改了任何对象，堆栈上的两个实例都可能作用于同一个对象？
*   **性能问题。**DoEvents() 可以产生多线程的*错觉*，但它不是真正的多线程。这至少有三个真正的危险：

    1.  当您调用 DoEvents() 时，您将对现有线程的控制权交还给消息泵。消息泵可能反过来将控制权交给其他东西，而其他东西可能需要一段时间。结果是您的原始操作可能需要更长的时间才能完成，而不是它本身在一个永远不会产生控制权的线程中，肯定比它需要的时间更长。
    2.  重复工作。因为可能会发现自己运行相同的方法两次，而且我们已经知道这种方法很昂贵/运行时间很长（或者你一开始就不需要 DoEvents()），即使你考虑了所有提到的外部依赖项以上所以没有不良的副作用，你可能最终还是会重复很多工作。
    3.  另一个问题是第一个问题的极端版本​​：可能出现死锁。如果您的程序中的其他内容取决于您的进程完成，并且会阻塞直到完成，并且该内容由 DoEvents() 的消息泵调用，您的应用程序将卡住并变得无响应。这听起来可能有些牵强，但实际上意外地很容易发生意外，而且以后很难找到和调试崩溃。这是您可能在自己的计算机上遇到的一些挂起应用程序情况的根源。
*   **可用性问题。**这些是由于没有正确考虑其他危险而导致的副作用。这里没有什么新鲜事，只要你适当地看其他地方。

***如果***你能*确定*你已经解释了所有这些事情，那就继续吧。但实际上，如果 DoEvents() 是您寻求解决 UI 响应/更新问题的第一个地方，那么您可能没有正确解决所有这些问题。如果这不是您第一次看到的地方，那么还有足够多的其他选项，我会质疑您是如何考虑 DoEvents() 的。今天，DoEvents() 的存在主要是为了与在其他可用选项之前出现的旧代码兼容，并作为尚未获得足够经验来接触其他选项的新程序员的拐杖。

现实情况是，大多数时候，至少在 .Net 世界中，**[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)**组件几乎一样简单，至少在您完成一次或两次之后，它会以安全的方式完成工作。最近，**async/await 模式**或使用 a**`Task`**可以更加有效和安全，无需自己深入研究成熟的多线程代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T20:54:10.953

回到 16 位 Windows 时代，当每个任务共享一个线程时，保持程序在紧密循环内响应的唯一方法是`DoEvents`. 正是这种非模态用法不鼓励使用线程。这是一个典型的例子：

```
' Process image
For y = 1 To height
    For x = 1 to width
        ProcessPixel x, y
    End For
    DoEvents ' <-- DON'T DO THIS -- just put the whole loop in another thread
End For 
```

对于模态的东西（比如跟踪弹出窗口），它可能仍然可以。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T21:04:33.983

我可能错了，但在我看来，这`DoDragDrop`是`TrackPopupMenu`相当特殊的情况，因为它们接管了 UI，所以没有重入问题（我认为这是人们描述`DoEvents`为“邪恶”的主要原因）。

就我个人而言，我认为将某个功能视为“邪恶”并没有帮助 - 而是解释其中的陷阱，以便人们可以自己决定。在`DoEvents`极少数情况下使用它仍然是合理的，例如在显示模态进度对话框时，用户无法与 UI 的其余部分交互，因此不存在重入问题。

当然，如果你所说的“邪恶”是指“在没有完全理解陷阱的情况下不应该使用的东西”，那么我同意那`DoEvents`是邪恶的。

# objective-c - 用 NSBox 替换子视图

> ID：11352303
> 
> 赞同：1
> 
> 时间：2012-07-05T20:45:40.547
> 
> 标签：objective-c, xcode4, nsbox

我想使用 NSBox *dynamicSection 根据从中选择的索引和 NSPopUpButton 控件用不同的视图替换框的内容。下面的方法接收 NSPopUPButton 作为对象，并使用大小写开关来动态设置框的视图和标题。

```
@interface AppDelegate : NSObject <NSApplicationDelegate> {
IBOutlet NSTextField *dynamicTitle;
NSMutableString *title;
NSBox *dynamicSection;
NSView *Sect1_View;
NSView *Sect2_View;
NSView *Sect3a_View;
NSView *Sect3b_View;
NSView *Sect3c_View;
NSView *Sect4_View;
}
@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSBox *dynamicSection;
@property (assign) IBOutlet NSPopUpButton *menuOptions;

}

@implementation {

- (IBAction)menuSelected:(NSPopUpButton *)sender {

NSInteger index = [sender indexOfSelectedItem];
NSLog(@"Selected button index is %ld", index);

switch (index) {
    case 0:
        dynamicSection = [[NSBox alloc] init];
        [dynamicSection setTitle:[self returnSectionTitle:index]];
        [dynamicSection setContentView:Sect1_View];
         NSLog(@"%@",[self returnSectionTitle:index]);
        break;
    case 1:
        dynamicSection = [[NSBox alloc] init];
        [dynamicSection setTitle:[self returnSectionTitle:index]];
        [dynamicSection setContentView:Sect2_View];
        break;
    case 2:
        dynamicSection = [[NSBox alloc] init];
        [dynamicSection setTitle:[self returnSectionTitle:index]];
        [dynamicSection setContentView:Sect3a_View];
        break;
    case 3:
        dynamicSection = [[NSBox alloc] init];
        [dynamicSection setTitle:[self returnSectionTitle:index]];
        [dynamicSection setContentView:Sect3b_View];
        break;
    case 4:
        dynamicSection = [[NSBox alloc] init];
        [dynamicSection setTitle:[self returnSectionTitle:index]];
        [dynamicSection setContentView:Sect3c_View];
        break;
    case 5:
        dynamicSection = [[NSBox alloc] init];
        [dynamicSection setTitle:[self returnSectionTitle:index]];
        [dynamicSection setContentView:Sect4_View];
        break;

    default:
        break;
  }

} 
```

}

它正在识别正确的索引，并将标题打印到日志中，但是在选择时无法正确切换视图。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:55:37.240

您似乎没有将其添加`NSBox`为视图的子视图，我无法从应该添加它的问题中看出。

其他问题：

1.  一旦您将其添加为子视图，您需要通过释放分配的内存来避免内存泄漏`NSBox`，因为视图将保留它。
2.  您*可能*不需要将`dynamicSection`其作为类的 ivar。
3.  你有太多重复的代码：

在之前执行此操作`switch`：

```
dynamicSection = [[NSBox alloc] init];
[dynamicSection setTitle:[self returnSectionTitle:index]]; 
```

并在之后添加视图`switch`：

```
[someView addSubview:dynamicSection];
[dynamicSection release]; 
```

# javascript - 将 JSON 数据呈现给播放框架模板

> ID：11352310
> 
> 赞同：1
> 
> 时间：2012-07-05T20:46:09.617
> 
> 标签：javascript, json, playframework, playframework-2.0

在没有任何 JQuery 详细知识的情况下试图让它工作。我真的很难找到一个易于理解的示例，说明如何从我传递到 String 对象内部的一些 json 中创建一个无编号列表。

我正在使用游戏！框架。我的应用程序有一个方法，它返回一个包含 json 项目数组的字符串。

```
GET     /items                       controllers.Application.items() 
```

该方法如下所示：

```
public static Result items() {      
    return ok(Json.toJson(Item.all()));
} 
```

您将如何处理这些数据以使您的模板将其显示为未编号的列表？

数据，例如：

```
@Entity
public class Item {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
public int id;
public String title;

public String type;
public int quantity;
public BigDecimal unitPrice;

public Item() {}

public static List<Item> all() {
    EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("defaultPersistenceUnit");
    EntityManager entityManager = entityManagerFactory.createEntityManager();

    TypedQuery<Item> query = entityManager.createQuery("SELECT i FROM Item i", Item.class);
    return query.getResultList();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:36:34.220

您需要使用 javascript ajax 请求调用 items() 操作。然后你可以使用 javascript 和 jQuery 来创建你的列表。

像这样的东西：

```
<script type="text/javascript">
    $(function(){
        $.getJSON('/items', function(items){
            var ul = $('<ul>');
            $.each(items, function(item){
                var li = $('<li>').text(item.title);
                ul.append(li);
            });

            $('body').append(ul);
        });
    });    
</script> 
```

# c - 释放 malloc 的内存失败

> ID：11352311
> 
> 赞同：2
> 
> 时间：2012-07-05T20:46:13.813
> 
> 标签：c, malloc

我有一个相当简单的程序，我用 snprintf 写入一个字符串，如果需要，我会扩展字符串长度以适应我要写入的内容。然后，我尝试添加到该字符串。它确实有效，但是当我释放 malloc 的变量时，它崩溃了。

编码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int ac, char **av) {
    char buf[16];
    char *str = buf;
    char *extra = NULL;
    int len;

    if(!av[1]) {
        return 0;
    }

    if((len = snprintf(str, 16, "%s", av[1])) >= 16) {
        printf("more than 15 chars, %d\n",len);
        if (extra = malloc((len + 1) * sizeof(char))) {
            snprintf(str = extra, len + 1, "%s", av[1]);
        }
    } else {
        printf("less than 15 chars, %d\n",len);
    }

    printf("%s\n", str);

    if((len = snprintf(str+strlen(str), 16, "%s", av[1])) >= 16) {
        printf("more than 15 chars, %d, required: %d\n",len,(len + strlen(av[1]) + 1));
        if ((extra = malloc((len + strlen(av[1]) + 1) * sizeof(char)) ) && strcpy(extra,str)) {
            str = extra;
            snprintf(extra+strlen(av[1]), len + 1, "%s", av[1]);
        }
    } else {
        printf("less than 15 chars, %d\n",len);
    }
    printf("%s\n", str);

    if(extra) {
        free(extra);
    }

    return 1;
} 
```

输出：

```
more than 15 chars, 16
1234567890123456
more than 15 chars, 16, required: 33
12345678901234561234567890123456
*** glibc detected *** ./testprog: free(): invalid next size (fast): 0x0000000000ce0030 ***
======= Backtrace: =========
/lib/libc.so.6(+0x78a56)[0x7fe46c0b9a56]
./testprog[0x4008c7]
/lib/libc.so.6(__libc_start_main+0xf5)[0x7fe46c062455]
./testprog[0x4005a9]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:03 26355255                           /home/joachim/kc/testprog
00600000-00601000 rw-p 00000000 08:03 26355255                           /home/joachim/kc/testprog
00ce0000-00d01000 rw-p 00000000 00:00 0                                  [heap]
7fe46be2c000-7fe46be41000 r-xp 00000000 08:03 15077980                   /usr/lib/libgcc_s.so.1
7fe46be41000-7fe46c040000 ---p 00015000 08:03 15077980                   /usr/lib/libgcc_s.so.1
7fe46c040000-7fe46c041000 rw-p 00014000 08:03 15077980                   /usr/lib/libgcc_s.so.1
7fe46c041000-7fe46c1d8000 r-xp 00000000 08:03 393241                     /lib/libc-2.15.so
7fe46c1d8000-7fe46c3d8000 ---p 00197000 08:03 393241                     /lib/libc-2.15.so
7fe46c3d8000-7fe46c3dc000 r--p 00197000 08:03 393241                     /lib/libc-2.15.so
7fe46c3dc000-7fe46c3de000 rw-p 0019b000 08:03 393241                     /lib/libc-2.15.so
7fe46c3de000-7fe46c3e2000 rw-p 00000000 00:00 0 
7fe46c3e2000-7fe46c403000 r-xp 00000000 08:03 393253                     /lib/ld-2.15.so
7fe46c5d5000-7fe46c5d8000 rw-p 00000000 00:00 0 
7fe46c600000-7fe46c603000 rw-p 00000000 00:00 0 
7fe46c603000-7fe46c604000 r--p 00021000 08:03 393253                     /lib/ld-2.15.so
7fe46c604000-7fe46c605000 rw-p 00022000 08:03 393253                     /lib/ld-2.15.so
7fe46c605000-7fe46c606000 rw-p 00000000 00:00 0 
7fff72b84000-7fff72ba5000 rw-p 00000000 00:00 0                          [stack]
7fff72bff000-7fff72c00000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted 
```

现在我不完全是你所说的 C 专家，所以这个错误可能相当简单，但我自己无法解决这个问题/在网上找到任何有用的东西。

谢谢您的帮助！

编辑：

固定代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int ac, char **av) {
    char buf[16];
    char *str = buf;
    char *extra = NULL;
    int len;
    int ssize = 16;
    if(ac != 2)
    {
        return 0;
    }

    if((len = snprintf(str, 16, "%s", av[1])) >= 16) {
        printf("more than 15 chars, %d\n",len);
        if (extra = malloc((len + 1) * sizeof(char))) {
        ssize = (len + 1);
          snprintf(str = extra, len + 1, "%s", av[1]);
        } 
    } else {
        printf("less than 15 chars, %d\n",len);
    }

    printf("%s\n", str);

    char *extra2 = NULL;
    printf("space: %d (%d-%d)\n",ssize-strlen(str),ssize,strlen(str));
    if((len = snprintf(str+strlen(str), ssize-strlen(str), "%s", av[1])) >= ssize-strlen(str)) {
        printf("more than 15 chars, %d, required: %d (strlen: %d)\n",len,(len + strlen(av[1]) + 1),strlen(str));

        if ((extra2 = malloc((len + strlen(av[1]) + 1) * sizeof(char)) ) && strcpy(extra2,str)) {
          str = extra2;
        ssize = (len + strlen(av[1]) + 1);
          snprintf(extra2+strlen(av[1]), len + 1, "%s", av[1]);
        } else printf("failed extraing");
    } else {
        printf("less than 15 chars, %d\n",len);
    }
    printf("%s\n", str);

    if(extra) {
        free(extra);
    }
    if(extra2) {
        free(extra2);
    }

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:57:13.637

在字符串的第二个副本中，您使用此代码，它告诉 snprintf() 缓冲区中有 16 个字节：

```
if((len = snprintf(str+strlen(str), 16, "%s", av[1])) >= 16) { 
```

但是您已经`str + strlen(str)`作为要写入的地址传递了。显然，您没有来自该地址的 16 个字节可用，您只有 1 个（假设您最初输入的字符串长于 16，然后分配了 len + 1 个字节）。因此，当您告诉 snprintf() 时，它会写入超过您分配的内存末尾的 16 个，这有时只会在您尝试释放它时显示为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:17:35.250

你至少有2个问题。

1\. 您正在检查 argv 指针的参数数量。如果只提供 1 个参数，这将导致核心转储，因为 argv 指针数组将具有`null` at`av[1]`

所以而不是跟随

```
 if(!av[1]) 
 {
    return 0;
} 
```

你应该检查：

```
if(ac != 2)
{
   return 0;
} 
```

2\. 您的程序中有内存泄漏。你正在做 2`malloc`秒，但正在用第二个 malloced 指针覆盖第一个 malloced 指针。

3\. 您的程序中有内存损坏。

```
if((len = snprintf(str+strlen(str), 16, "%s", av[1])) >= 16) { 
```

的大小`str`只有 16 。你最终会写超出`str`导致腐败的大小。

**所以 glibc 抱怨释放问题主要是由于这种腐败。**

# c# - 大写对象和小写对象有什么区别？

> ID：11352316
> 
> 赞同：7
> 
> 时间：2012-07-05T20:46:36.803
> 
> 标签：c#, class, types

> **可能重复：**
> [c#：“System.Object”和“object”之间的区别](https://stackoverflow.com/questions/1017282/c-difference-between-system-object-and-object)

虽然我目前正在使用 C#，但这个问题可能适用于其他语言。

`Object`invoking 和之间有什么区别`object`吗？`Dictionary`具体来说，我正在使用构造函数创建一个实例：

```
Dictionary<String, Object> foo = new Dictionary... 
```

IDE 自动填写`new Dictionary<string, object>`。我回去改变了我最初的声明，但这让我想知道。

*   `String`当我使用大写或`Object`与小写`string`或时有任何不良反应`object`吗？
*   我假设大写是指类（因此我可以访问类方法），而小写只是指类型。这是真的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T20:47:21.910

`object`是 System.Object 的关键字（别名），同样适用于`string`.

编译后将完全相同。

在[MSDN 页面上，`object`](http://msdn.microsoft.com/en-us/library/9kkx3h3c%28v=vs.71%29.aspx)它说以下内容：

> 对象类型是 .NET Framework 中 System.Object 的别名。您可以将任何类型的值分配给对象类型的变量。

[您可以在MSDN](http://msdn.microsoft.com/en-us/library/x53a06bb%28v=vs.100%29.aspx)上找到 C# 中所有关键字的长列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:49:22.200

有些类具有对象、字符串、int、short 等别名。它们都在内部映射到带有大写字母的*真实类。*

请注意，某些稀有类型取决于平台。例如，在 x86 上 IntPtr 存储一个 32 位值，而在 x64 上它存储一个 64 位值。

到目前为止，我知道short 总是映射到Int16，long 映射到Int64。

# windows - 如何在 Server2go 应用程序中动态分配 BrowserPath？

> ID：11352319
> 
> 赞同：1
> 
> 时间：2012-07-05T20:46:52.407
> 
> 标签：windows, server2go

这是我关于堆栈溢出的第一篇文章。我在笔式驱动器上使用 Server2go 和 Portable Firefox。Server2go 中有一个名为 pms_config.ini 的配置文件。有一行允许您指定要使用的浏览器的路径。无论如何要获取USB的驱动器号，以便我可以将它动态包含在配置文件中？

```
[Browser]
;--- The browser that is started after server start (possible values: IEXPLORER,    FIREFOX, PORTABLEFIREFOX, MOZILLA, DEFAULT, EXTERNAL)
;--- Please take a look at the www.server2go-web.de/wiki pages for a documentation how to use PORTABLEFIREFOX!!!!!!!!
BrowserType=PORTABLEFIREFOX
;--- Browser command options like -k (NOT IN USE AT THE MOMENT)
BrowserCommandOptions=
;--- Path to an external browser that is used instead the browser above
BrowserPath=G:\FirefoxPortable\FirefoxPortable.exe 
;--- Specify caption text of Work Offline dialog box. You can use mor than one captions     (seperated with ;)
;--- The captions for german, english, french, dutch and spanish are build in by   default
WorkOfflineTitle=
;--- The size of the started browser. Can be a pixel dimension (1024x768) or the values MAXIMIZE and KIOSK (Internet Explorer only)
BrowserSize= 
```

无论如何我可以使驱动器号由环境变量识别吗？

提前谢谢你的帮助 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T17:43:57.357

来自关于使用 Portable Firefox 的 Server2Go 文档： [https ://bitbucket.org/thaberkern/server2go/wiki/Using%20FirefoxPortable%20as%20browser%20from%20CD](https://bitbucket.org/thaberkern/server2go/wiki/Using%20FirefoxPortable%20as%20browser%20from%20CD)

您可以省略驱动器号：

```
BrowserPath=FirefoxPortable/FirefoxPortable.EXE 
```

# math - 如何在二进制级别检测溢出？

> ID：11352321
> 
> 赞同：11
> 
> 时间：2012-07-05T20:46:55.327
> 
> 标签：math, binary, hardware

我正在阅读 Hennessey 和 Patterson 的教科书《计算机组织与设计》（第 4 版）。在第 225 页，他们描述了如何在有符号的 2 补码算术中检测到溢出。我什至无法理解他们在说什么。

> *“当它确实*发生时，我们如何检测[溢出] ？显然，添加或减去两个 32 位数字会产生需要 33 位才能完全表达的结果。”

当然。而且它不需要 34 位，因为即使是最小的 34 位数字也是最小 33 位数字的两倍，我们正在添加 32 位数字。

> “缺少第 33 位意味着当发生溢出时，符号位被设置为结果的*值*，而不是结果的正确符号。”

这是什么意思？符号位是用结果的“值”设置的......这意味着它被设置为好像结果是无符号的？如果是这样，那么缺少第 33 位是怎么回事？

> “由于我们只需要一个额外的位，因此只有符号位可能是错误的。”

这就是他们完全失去我的地方。

我从中得到的是，当添加有符号数字时，当且仅当符号位错误时才会出现溢出。因此，如果您添加两个正数并得到负数，或者如果您添加两个负数并得到正数。但我不明白他们的解释。

此外，这仅适用于无符号数，对吗？如果您要添加有符号数字，那么检测溢出肯定要简单得多。如果 ALU 的最后一个半加器设置了它的进位位，就会发生溢出。

注意：我真的不知道这里适合什么标签，请随意编辑。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T02:22:44.023

任何时候你想处理这些类型的 ALU 项目，无论是加、减、乘等，从 2 或 3 位数字开始，比 32 或 64 位数字更容易处理。在 2 位或 3 位之后，无论是 22 位还是 2200 位都无关紧要，从那时起，它的工作原理完全相同。基本上，如果您想制作一个包含所有 3 位操作数及其结果的表，以便您可以直观地检查整个表，但是您可以手动创建一个包含所有 32 位操作数和所有 32 位操作数及其结果的表，不能这样做在合理的时间内手动进行，并且无法直观地检查整个表。

现在*二进制补码*，这只是一种表示正数和负数的方案，它不是有原因的任意事物，疯狂的原因是您的加法器逻辑（这也是减法器使用的相同）乘数使用的东西）不关心未签名或签名。它不知道区别。在我的三位世界中，程序员关心的是位模式 0b111 可能是正七（+7），也可能是负七。相同的位模式，将其提供给加法逻辑，得到相同的结果，而得到的答案我可以选择解释为*无符号*或*二进制补码*（只要我将操作数和结果全部解释为*无符号*或全部作为*二进制补码*）。二进制补码还具有对负数设置最高有效位 (msbit) 的特性，对于正数则为零。所以它不是符号加幅度，但我们仍然谈论 msbit 是符号位，因为除了它告诉我们的两个特殊数字，数字的符号，其他位实际上告诉我们它们的幅度只是不是像*符号+幅度符号*中那样的无符号幅度。

所以，整个问题的关键是理解你的极限。对于 3 位无符号数，我们的范围是 0 到 7、0b000 到 0b111。对于 3 位有符号（*二进制补码*）解释，我们的范围是 -4 到 +3（0b100 到 0b011）。现在如果你添加 7+1 将我们限制为 3 位，`0b111 + 0b001 = 0b1000`但我们只有一个 3 位系统，所以 0b000，7+1 = 8，我们不能在我们的系统中表示 8，所以这是溢出，因为我们碰巧将这些位解释为无符号，我们查看“*无符号溢出*”，也称为进位位或标志。现在，如果我们采用相同的位但将它们解释为有符号，则 0b111 (-1) + 0b001 (+1) = 0b000 (0)。减一加一是零。没有溢出，没有设置“有符号溢出”......什么是有*符号溢出*？

首先什么是“*无符号溢出*”。

无论我们的寄存器中有多少位，“一切都一样”的原因与以 10（十进制）为基数的小学数学没有什么不同。如果你添加 9 + 1，它们都在个列中，你说 9 + 1 = 零携带 1。你将 1 带到十列，然后 1 加 0 加 0（你在十列中填写了两个零）是 1 携带零。您在十列中有一个 1，在个列中有一个零：

```
 1
  09
 +01
====
  10 
```

如果我们声明我们仅限于个列中的数字，那么十列就没有空间了。那么进位位非零意味着我们有一个溢出，为了正确计算我们需要另一列的结果，与二进制相同：

```
 111 
   111
 + 001
=======
  1000 
```

7 + 1 = 8，但是如果我们声明一个 3 位系统，我们不能做 8，我们可以在设置进位位的情况下做 7 + 1 = 0。这就是*补码*之美的所在：

```
 111 
   111
 + 001
=======
   000 
```

如果您查看上述三位加法，则无法通过查看是否设置进位位的 7 + 1 = 0 或 -1 + 1 = 0 来判断。

因此，对于*无符号加法*，正如我们从小学开始就知道的那样，将非零的东西转移到下一列意味着我们已经溢出了那么多占位符，需要一个占位符，一个列来保存实际答案。

*签名溢出*。学术上的答案是msbit 列的*进位与**进位*不匹配。让我们在我们的 3 位世界中举一些例子。因此，对于*二进制补码*，我们仅限于 -4 到 +3。因此，如果我们添加 -2 + -3 = -5 将无法正常工作？为了弄清楚减二是多少，我们进行反转并添加一个 0b010，反转 0b101，添加一个 0b110。减三是 0b011 -> 0b100 -> 0b101

所以现在我们可以这样做：

```
 abc
  100 
   110
 + 100
======
   010 
```

如果您查看 b 下的数字，即 msbit 列的“*进位*”，a 下的数字 1，是*进位*，这两个不匹配所以我们知道存在“有*符号溢出*”。

让我们试试 2 + 2 = 4：

```
 abc
  010
   010
 + 010
======
   100 
```

你可能会说，但这看起来是对的，肯定是*无符号*的，但是我们在这里做有*符号*的数学运算，所以结果实际上是 -4 而不是正的 4\. 2 + 2 != -4。b 下的*进位*是 1，msbit 的*进位是 0，**进位*和*进位*不匹配。 *签名溢出*。

无需查看*进位*（或*进位*）即可计算出带*符号溢出*的捷径。 *有符号溢出*，否则无*符号溢出*。opa 是一个操作数， opb 是另一个操作数， res 结果。**`if ( msbit(opa) == msbit(opb) ) && ( msbit(res) != msbit(opb) )`**

 ***```
 010
 + 010
======
   100 
```

取这个+2 + +2 = -4。msbit(opa) 和 msbit(opb) 相等，结果 msbit 不等于 opb msbit 所以这是一个有*符号溢出*。您可以使用此表来考虑它：

```
x ab cr 
0 00 00
0 01 01
0 10 01
0 11 10 signed overflow
1 00 01 signed overflow
1 01 10
1 10 10
1 11 11 
```

这张表是所有可能的组合，如果*进*位、操作数 a、操作数 b、*进*位和单列的结果位 将头侧向左侧排序，看到 x 是*进位*，a 和 b 列是两个操作数。 `cr`作为一对是`xab`011 的结果意味着 0+1+1 = 2 十进制是 0b10 二进制。因此，按照我们规定的规则，如果*进位*和*进位*不匹配，那就是有*符号溢出*. 那么 x 列中的项目与 c 列中的项目不匹配的两种情况表示为 a 和 b 输入相互匹配但结果位与 a 和 b 相反的情况。因此，假设规则是正确的，这个不需要知道进位位是什么的快速快捷方式会告诉您是否存在有*符号溢出*。

现在您正在阅读一本 H&P 书籍。这可能意味着 mips 或 dlx，mips 或 dlx 都不像大多数其他处理器那样处理进位和*签名标志。*mips 不是最好的第一个指令集 IMO 主要是因为这个原因，他们的方法在任何方面都没有错，但是作为一个古怪的人，你将永远花在不同的思考上，并且在使用大多数其他处理器时不得不进行翻译。如果您学习了典型的 znvc 标志（零标志、负标志、v=有*符号溢出*、c=进位或*无符号溢出*）方式，那么您只需在转到 mips 时进行翻译。通常这些是在每个 alu 操作上计算的（对于非 mips 类型的处理器）你会看到有符号和*无符号溢出*正在计算加减法。（我习惯了较旧的 mips，也许这一代的书和当前的指令集有一些不同）。在了解了上述关于加法器电路如何不关心有符号与无符号的所有内容之后，在 mips 的开头将其称为 addu add unsigned 是 mips 的一个大问题，它确实使您陷入错误的心态来理解这么简单的事情。导致人们相信有符号加法和无符号加法之间存在差异。只有溢出标志的计算方式不同。现在乘法和除法肯定存在*二进制补码*与*无符号差*，理想情况下您需要有*符号乘法*和*无符号乘法*或者你需要处理这个限制。

我推荐一个简单的（取决于你的位操作有多强和*二进制补码*) 练习，你可以用一些高级语言编写。基本上取所有无符号数 0 到 7 的组合加到 0 到 7 并保存结果。以十进制和二进制打印（操作数三位，结果四位），如果结果大于 7，则打印溢出。使用带符号的变量重复此操作，使用数字 -4 到 +3 添加到 -4 到 +3。打印带有 +/- 符号的十进制和二进制。如果结果小于 -4 或大于 +3 则打印溢出。从这两个表中，您应该能够看到上面的规则是正确的。严格查看允许大小的操作数和结果位模式（在这种情况下为三位），您将看到加法运算给出相同的结果，给定输入对的相同位模式与这些位模式是否被视为无符号或二进制补码无关。您还可以验证*无符号溢出*是当结果需要使用第四列时，msbit有一个*进位。**当进位与进位*不匹配时*进行*签名，您可以使用查看操作数和结果的 msbits 的快捷方式看到。更好的是让你的程序进行这些比较并打印出一些东西。因此，如果您在表中看到结果大于 7 的注释，并且在表中看到结果中设置了位 3 的注释，那么您将看到无符号表始终如此（仅限于输入 0至 7)。还有更复杂的，有*符号溢出*, 总是在结果小于 -4 且大于 3 并且操作数高位匹配且结果高位与操作数不匹配时。

我知道这是超长而且非常基本的。如果我在这里完全错过了标记，请发表评论，我将删除或重写此答案。

另一半与魔法*相得益彰。*硬件没有减法逻辑。“转换”为*二进制补码*的一种方法是“反转和加一”。如果我想使用*二进制补码*减去 3 - 2 ，实际发生的情况与 +3 + (-2) 相同，并且为了从 +2 到 -2，我们反转并加一。看看我们小学的加法，你注意到第一列*进位的洞了吗？*

```
 111H
   111
 + 001
=======
  1000 
```

我在洞所在的位置上方放了一个 H。那么*进*位被添加到操作数对吗？我们的加法逻辑不是一个二输入加法器它是一个三输入加法器是吗？大多数列必须添加三个一位数才能计算两个操作数。如果我们在第一列上使用三输入加法器，现在我们有一个地方可以......加一个。如果我想减去 3 - 2 = 3 + (-2) = 3 + (~2) + 1 这是：

```
 1
  011
+ 101
===== 
```

在我们开始并填写之前是：

```
 1111
  011
+ 101
=====
  001 
```

3 - 2 = 1。

逻辑的作用是：

如果添加则*进位*= 0; b 操作数不反转，*进位*不反转。如果减去则*进位*= 1; b 操作数被反转，*进位可能*被反转。

上面的加法显示了一个*执行*，我没有提到这是一个无符号操作 3 - 2 = 1。我使用了一些*二进制补码*技巧来执行一个无符号操作，因为无论我是否将操作数解释为有符号或unsigned 相同的规则适用于加法或减法。为什么我说*进位可能*被反转是因为有些处理器会反转*进位*而有些则不会。它与*级联操作有关*，假设一个 32 位加法逻辑并使用进位标志和带进位的加法或带借位的减法指令创建 64 位加法或减法，或基址寄存器大小的任何倍数。假设您在 32 位系统中有两个 64 位数字 a:b + c:d 其中 a:b 是 64 位数字，但它保存在两个寄存器 a 和 b 中，其中 a 是上半部分，b 是下半部分一半。所以 a:b + c:d = e:f 在一个 32 位无符号系统上，它有一个进位并加进位：

```
add f,b,d
addc e,a,c 
```

加法从状态寄存器进位标志的最高位通道中离开其*进*`addc`位位，指令是带进位的加法运算，取操作数 a+c，如果进位位被设置，则再加一个。a+c+1 将结果放入 e 并将*进位*放入进位标志中，因此：

```
add f,b,d
addc e,a,c
addc x,y,z 
```

是96位加法，等等。这里又是一些对 mips 非常陌生的东西，因为它不像其他处理器那样使用标志。*有符号进位*的反转或不反转是在特定处理器的借位减法上。对于减法：

如果减去则*进位*= 1; b 操作数被反转，*进位可能*被反转。

对于借位减法，您必须说如果状态寄存器中的进位标志指示借位，则*进位*为 0，否则*进位*为 1，并且您必须将*进位*输入状态寄存器以指示借位.

基本上对于正常的减法，一些处理器将 b 操作数取反并在输入中*进行并*在输出中执行，一些处理器将 b 操作数取反并*在输入中进行，但在**输出*时不取反。然后当你想做一个条件分支时，你需要知道进位标志是大于还是小于（通常语法会有一个分支如果大于或小于分支，有时会告诉你如果进位哪个是简化分支如果进行清除，则设置或分支）。（如果你没有“明白”我刚才所说的那是另一个同样长的答案，只要你正在研究 mips，它就没有任何意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:58:15.620

由于 32 位有符号整数由 1 个符号位和 31 位表示实际数字，因此我们实际上是将两个 31 位数字相加。因此，第 32 位（符号位）将是溢出可见的位置。

> “缺少第 33 位意味着当发生溢出时，符号位被设置为结果的值，而不是结果的正确符号。”

想象一下以下两个正数的加法（16 位简化）：

```
 0100 1100 0011 1010  (19514)
+ 0110 0010 0001 0010  (25106)
= 1010 1110 0110 1100  (-20884 [or 44652]) 
```

对于两个大负数的总和，但是需要额外的位

```
 1100 1100 0011 1010  
+ 1110 0010 0001 0010  
=11010 1110 0110 1100 
```

通常，CPU 将这个第 33 位（或它在 +1 上运行的任何位大小）暴露为微架构中的溢出位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:58:24.010

它们的描述涉及对具有特定位序列的值的操作：第一位对应于值的符号，而其他位与该值的大小有关。

> 这是什么意思？符号位用结果的“值”设置......

他们的意思是*溢出*位 - 这是添加需要溢出到下一个数字的两个数字的结果 - 被转储到符号位应该在的相同位置。

> “由于我们只需要一个额外的位，因此只有符号位可能是错误的。”

所有这一切意味着，当您执行溢出的算术时，*唯一*可能值不正确的位是符号位。所有其他位仍然是它们应该是的值。

这是上面描述的结果：由于溢出导致符号位的值混淆。***

# ruby-on-rails - image_tag 不会显示带有 uuid 文件名的图像

> ID：11352327
> 
> 赞同：1
> 
> 时间：2012-07-05T20:47:07.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这两个文件都存在于同一个文件夹（资产/图像）中，但是 t.png 显示得很好，而具有自动生成的 uuid 的文件则没有。这是什么原因？

```
<%= image_tag('b9ea6033-a438-4d11-b888-de0d24f463d7.png') %>
<%= image_tag('t.png') %> 
```

**更新： b9ea6033-a438-4d11-b888-de0d24.png 有效，它指向文件名中的 30 个字符限制。任何名称都被拒绝并且不呈现图像..但是为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:52:13.683

您可以尝试在此处和文件系统上重命名图像....您是否在浏览器中显示红色 x？

LMK 发生了什么

# php - phpqrcode 库将图像作为字符串返回

> ID：11352334
> 
> 赞同：11
> 
> 时间：2012-07-05T20:47:54.760
> 
> 标签：php

[http://sourceforge.net/projects/phpqrcode/](http://sourceforge.net/projects/phpqrcode/)，是一个很棒的库，但我找不到**如何将 png 图像作为字符串返回**，基本示例是

```
QRcode::png('code data text', 'filename.png'); // creates file 
QRcode::png('some othertext 1234'); // creates code image and outputs it directly into browser 
```

我检查了文档，什么也没有，求助！:B

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-05T20:51:51.607

```
ob_start();
QRCode::png('text', null);
$imageString = base64_encode( ob_get_contents() );
ob_end_clean(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-22T12:10:58.630

```
$qrTempDir = 'path/to/your/temp';
$filePath = $qrTempDir.'/'.uniqid();

QRcode::png('some text', $filePath);
$qrImage = file_get_contents($filePath);

unlink($filePath); 
```

这应该是您正在寻找的。您可以扩展它以显示这样的图像：

```
<img src="data:image/png;base64,<?php echo base64_encode($qrImage) ?>" /> 
```

不幸的是，该库目前不支持任何其他方法，因为在没有 file 参数的情况下调用 QRcode::png 函数不仅会使其发送这些标头，而且还会退出代码执行，因此无法收回或覆盖标题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-30T15:10:36.293

我遇到了与@iim.hlk 相同的问题

这就是我所做的稍微修改了@Lusitanian 他对此的回答

```
ob_start();
QRCode::png($string);
$imageString = base64_encode( ob_get_clean() );
header('Content-Type: text/html'); 
```

这通过简单地覆盖它来解决标题问题。不干净或其他任何东西，但它可以达到目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-04T14:14:58.867

这对我有用

```
include '../phpqrcode/qrlib.php';
$content = "any content";
ob_start();
QRcode::png($content);
$result_qr_content_in_png = ob_get_contents();
ob_end_clean();
// PHPQRCode change the content-type into image/png... we change it again into html
header("Content-type: text/html");
$result_qr_content_in_base64 =  base64_encode($result_qr_content_in_png); 
```

然后在你的 html 文件中

```
<img src="data:image/jpeg;base64,$result_qr_content_in_base64'"/> 
```

# asp.net-mvc-3 - 使用 jQuery 刷新部分视图

> ID：11352336
> 
> 赞同：0
> 
> 时间：2012-07-05T20:48:06.150
> 
> 标签：asp.net-mvc-3, jquery, razor

在我的主编辑视图中，我有 3 个包含主视图模型的子数据的部分视图。我还有用于输入和保存相关数据（例如注释等）的 html 文本框。在输入或选择项目并传递给控制器​​操作后，如何刷新部分视图？这是我到目前为止的代码，但它不起作用。我想我需要用我的部分视图传回一个模型？我正在使用 ajax 来调用我的控制器方法。局部视图：

```
@model cummins_db.Models.CaseComplaint

<table width="100%">
<tr>
    <td>
        @Html.DisplayFor(modelItem => Model.ComplaintCode.ComplaintCodeName)    
    </td>
   <td>
    @Html.DisplayFor(modelItem => Model.ComplaintCode.ComplaintType)
   </td>

</tr>

</table> 
```

这是局部视图所在的html：

```
<div class="editor-label">
    @Html.Label("Search and select a complaint code")
</div>
<div class="textarea-field">
    <input id = "CodeByNumber" type="text" />
</div>   
@Html.ActionLink("Refresh", "Edit", new { id = Model.CasesID })
    <table width="100%">
        <tr>
            <th>Complaint Code</th>
            <th>Complaint Description</th>
        </tr>
        @try
            {
            foreach (var comp_item in Model.CaseComplaint)
                {
                <div id="complaintlist">
                @Html.Partial("_CaseComplaintCodes", comp_item)
                </div>
                }
            }
        catch
            {

            }

    </table> 
```

这是返回部分视图的控制器方法。

```
public ActionResult SelectForCase(int caseid, int compid, string compname)
        {

        if (ModelState.IsValid)
            {
            CaseComplaint c = new CaseComplaint
            {
                CasesID = caseid,
                ComplaintCodeID = compid
            };
            db.CaseComplaints.Add(c);
            db.SaveChanges();
            }

        return PartialView("_CaseComplaintCodes");

        } 
```

jQuery ajax 调用控制器，它是自动完成功能选择的一部分。

```
$('#CodeByNumber').autocomplete(
    {

        source: function (request, response) {
            $.ajax({
                url: "/Cases/CodeByNumber", type: "GET", dataType: "json",
                data: { searchText: request.term, maxResults: 10 },
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.ComplaintType,
                            value: item.ComplaintCodeName,
                            id: item.ComplaintCodeID
                        };  //return
                    })  //map
                            );  //response

                }  //success

            });  //ajax 
        }, //source

        select: function (event, ui) {
            var url = "/Cases/SelectForCase";
            $.ajax({
                type: "GET",
                dataType: "html",
                url: url,
                data: { caseid: $('#CaseID').val(), compid: ui.item.id, compname: ui.item.label },
                success: function (result) { $('#complaintlist').html(result); }
            });

        },
        minLength: 1
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:19:31.047

如果部分视图不如下：

```
@model cummins_db.Models.CaseComplaint

<table width="100%">
    <tr>
        <td>
            @Html.DisplayFor(m => m.ComplaintCodeName)    
        </td>
        <td>
            @Html.DisplayFor(m => m.ComplaintType)
        </td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:22:16.123

这就是我最终为使其工作而做的事情。我通过控制器操作更改为：

```
public ActionResult SelectForCase(int caseid, int compid)
        {

        if (ModelState.IsValid)
            {
            CaseComplaint c = new CaseComplaint
            {
                CasesID = caseid,
                ComplaintCodeID = compid
            };
            db.CaseComplaints.Add(c);
            db.SaveChanges();

            var m = from d in db.CaseComplaints
                where d.CasesID == caseid
                select d;

            return PartialView("_CaseComplaintCodes", m);
            }

        return PartialView("_CaseComplaintCodes");

        } 
```

现在可以使用

# ios - iOS：确定设备语言是否为从右到左 (RTL)

> ID：11352342
> 
> 赞同：63
> 
> 时间：2012-07-05T20:48:50.863
> 
> 标签：ios, localization

有没有办法轻松确定设备设置的语言是否是从右到左 (RTL)？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2015-08-01T07:06:27.653

在 iOS 9 中，可以确定每个单独视图的当前方向。

```
if #available(iOS 9.0, *) {
  if UIView.userInterfaceLayoutDirection(
    for: myView.semanticContentAttribute) == .rightToLeft {

      // The view is shown in right-to-left mode right now.
  }
} else {
    // Use the previous technique
    if UIApplication.shared.userInterfaceLayoutDirection == .rightToLeft {

        // The app is in right-to-left mode
    }
} 
```

这是在 iOS 9 中确定布局方向的推荐方法。

WWDC 2015 视频[New UIKit Support for International User Interfaces](https://developer.apple.com/videos/wwdc/2015/?id=222)。31:20 分后。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-08-26T07:16:15.927

有一个官方的方法来做到这一点：

```
if ([UIApplication sharedApplication].userInterfaceLayoutDirection == UIUserInterfaceLayoutDirectionRightToLeft) {
} 
```

我建议不要使用其他一些解决方案，因为它们不会总是返回正确的语言环境。仅仅因为它在首选语言之上并不意味着应用程序支持它。

来源：[https ://developer.apple.com/library/content/documentation/MacOSX/Conceptual/BPInternational/SupportingRight-To-LeftLanguages/SupportingRight-To-LeftLanguages.html](https://developer.apple.com/library/content/documentation/MacOSX/Conceptual/BPInternational/SupportingRight-To-LeftLanguages/SupportingRight-To-LeftLanguages.html)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-05T21:03:45.123

`NSLocale`有两种方法`+characterDirectionForLanguage:`和`+lineDirectionForLanguage:`。第一个大概是从左到右 vs 从右到左，第二个是从上到下 vs 从下到上。你可以通过它的结果`[[NSLocale currentLocale] objectForKey:NSLocaleLanguageCode]`。

**更新：**

最初的问题是如何确定设备语言是否为 RTL。使用`+[NSLocale characterDirectionForLanguage:]`and`+[NSLocale lineDirectionForLanguage:]`无疑是正确的；您可以传递其中一个`[[NSLocale currentLocale] objectForKey:NSLocaleLanguageCode]`或传递`[NSLocale preferredLanguages][0]`给它以获取相关信息（我不确定是`NSLocaleLanguageCode`使用首选语言还是设置区域）。

但是，很可能原发帖人真正想知道的是应用程序的界面应该是 RTL 还是 LTR 布局。这与询问语言的方向非常相似，只是它考虑了应用程序的可用本地化。如果应用程序未本地化为用户的首选语言，它将使用非首选语言。这个问题的答案是使用`[UIApplication sharedApplication].userInterfaceLayoutDirection`.

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-10T02:06:56.603

确保返回当前选择的语言，而不是设备的当前区域。地区和语言通常相同。但是，如果我在北美并且我将语言设置为日语，我的地区仍将是英语（美国）。为了检查当前所选语言的字符方向，您可以执行以下操作：

```
+ (BOOL)isDeviceLanguageRTL {
  return ([NSLocale characterDirectionForLanguage:[[NSLocale preferredLanguages] objectAtIndex:0]] == NSLocaleLanguageDirectionRightToLeft);
} 
```

您可能想要缓存结果，使用`dispatch_once`.

请记住，这是用户的首选语言方向，不一定是文本的语言方向。为此，请使用基于`u_charDirection`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-11-28T13:55:48.080

这是一个 swift 3 版本：

```
import UIKit

extension UIView
{
    /// Returns text and UI direction based on current view settings
    var userInterfaceLayoutDirection: UIUserInterfaceLayoutDirection
    {
        if #available(iOS 9.0, *) {
            return UIView.userInterfaceLayoutDirection(for: self.semanticContentAttribute)
        } else {
            return UIApplication.shared.userInterfaceLayoutDirection
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-06T14:35:13.813

感谢 Kevin Ballard 的回答，我能够创建以下实用函数来执行此操作：

```
+ (BOOL)isDeviceLanguageRTL {
   return [NSLocale characterDirectionForLanguage:[[NSLocale currentLocale] objectForKey:NSLocaleLanguageCode]]==NSLocaleLanguageDirectionRightToLeft;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-02-02T13:06:13.213

如果您只想知道 iOS 10+ 上的特定视图布局方向，可以使用：

```
view.effectiveUserInterfaceLayoutDirection == .rightToLeft 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-21T16:20:01.183

这是我使用它的方式：

```
+(NSTextAlignment) alignmentOfLanguage {
if ([NSLocale characterDirectionForLanguage:[[NSLocale preferredLanguages] objectAtIndex:0]]==NSLocaleLanguageDirectionRightToLeft){
        return NSTextAlignmentRight;
    }
   return NSTextAlignmentLeft;  
} 
```

最后一个例子对我不起作用，但有一个小变种，我得到了正确的 X2。

任何意见？

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-29T16:27:34.730

如果您想在 swift 3 中检查设备是在 RTL 还是 LTR 中运行

```
if(UIApplication.shared.userInterfaceLayoutDirection == UIUserInterfaceLayoutDirection.rightToLeft) {
    //RTL
} else {
   //LTR
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-13T09:39:45.237

好的，虽然这是一个可以接受答案的老问题，但无论如何我都会回答。

对于那些想要检查**设备语言是否为 RTL 的**人，独立于您的应用程序是否支持这种语言，您应该`[NSLocale characterDirectionForLanguage:]`像这样使用：

```
+ (BOOL)isDeviceLanguageRightToLeft {

    NSLocale *currentLocale = [NSLocale currentLocale];
    NSLocaleLanguageDirection direction = [NSLocale characterDirectionForLanguage:[currentLocale objectForKey:NSLocaleLanguageCode]];
    return (direction == NSLocaleLanguageDirectionRightToLeft);
} 
```

`YES`如果您的应用仅支持英语，但您的设备设置为阿拉伯语，则上面的代码将返回。

Apple 建议您使用`[UIApplication sharedApplication].userInterfaceLayoutDirection`，因为它会根据您的应用程序使用的语言返回方向（支持）。这是代码片段：

```
+ (BOOL)isAppLanguageRightToLeft {

    NSLocaleLanguageDirection direction = [UIApplication sharedApplication].userInterfaceLayoutDirection;
    return (direction == UIUserInterfaceLayoutDirectionRightToLeft);
} 
```

`NO`当您的应用仅支持英语但您的设备设置为阿拉伯语时，上述代码将返回。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-07-21T10:22:49.373

```
if ([[UIDevice currentDevice].systemVersion floatValue] >= 9.0) {
    if ([UIView userInterfaceLayoutDirectionForSemanticContentAttribute:self.view.semanticContentAttribute] == UIUserInterfaceLayoutDirectionRightToLeft) {
        NSLog(@"Right to left");
    }
    else{
        NSLog(@"left to Right");
    }
} else {
    /* Use the previous technique */
    //Work for earlier ios 6 to ios 10
    if ([NSLocale characterDirectionForLanguage:[[NSLocale preferredLanguages] objectAtIndex:0]] == NSLocaleLanguageDirectionRightToLeft) {
        NSLog(@"Right to left");
    }
    else{
        NSLog(@"left to Right");
    }
} 
```

必看[国际化进阶专题 wwdc2014](https://developer.apple.com/videos/play/wwdc2014/201/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-02-11T10:35:22.903

Rose Perrone 是完全正确的。然而，在一个简单的布尔值的 getter 中使用 dispatch_once - 确实是太多的开销。一次不必要的调度使用。因为您可能希望在布局或绘图功能中多次使用。

所以你有两个更快的选择：

```
+ (BOOL)isRtl
{
    static BOOL isRtl = NO;
    static BOOL isRtlFound = NO;
    if (!isRtlFound)
    { // This is "safe enough". Worst case is this code will be called twice in the app's lifecycle...
        isRtl = [NSLocale characterDirectionForLanguage:[NSBundle mainBundle].preferredLocalizations[0]] == NSLocaleLanguageDirectionRightToLeft;
        isRtlFound = YES;
    }
    return isRtl;
} 
```

或者只是使用静态构造函数将其缓存在静态变量中：

```
static BOOL s_isRtl = NO;
+ initialize
{
    s_isRtl = [NSLocale characterDirectionForLanguage:[NSBundle mainBundle].preferredLocalizations[0]] == NSLocaleLanguageDirectionRightToLeft;
} 
```

请注意，这实际上将在使用此代码的任何类之间共享静态变量。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-21T16:34:16.027

> **适用于 iOS 9 及更高版本**

```
 extension UIView {

    var isLayoutDirectionRightToLeft: Bool {
        UIView.userInterfaceLayoutDirection(for: semanticContentAttribute) == .rightToLeft
    }

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-24T13:12:10.630

你可以像这样检查RTL

```
- (BOOL)isDeviceLanguageRTL {
  return ([NSLocale characterDirectionForLanguage:[[NSLocale preferredLanguages] objectAtIndex:0]] == NSLocaleLanguageDirectionRightToLeft);
} 
```

```
if ([self isDeviceLanguageRTL]) {
    //RTL
}
 else
{
   //LRT
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-08T07:41:41.440

在 macOS 上，NSView 有一个`userInterfaceLayoutDirection`属性可以用来确定语言方向。归功于iOS版本的[这个答案](https://stackoverflow.com/a/31759275/3151675)。

```
let view = NSView()

if view.userInterfaceLayoutDirection == .rightToLeft {
    print("RTL")
} 
```

# c++ - 如何使用 C++ 从软件内部禁用特定的 Windows 热键？

> ID：11352343
> 
> 赞同：3
> 
> 时间：2012-07-05T20:48:51.420
> 
> 标签：c++, windows, hotkeys

我想在软件中放入必要的代码，以禁用 Windows（Xp、Vista，特别是 7 和后续版本）热键，这些热键可以让用户远离软件。

细节：

*   命令必须仅在软件运行时有效；当它没有运行时，必须启用 Windows 热键（因此：如果用户启动软件，热键将被禁用；如果他关闭它，则必须重新启用）。
*   我不想禁用所有 Windows 热键（某些键热键，例如 ctrl+alt+del 必须仍然可以操作），因此诸如某种禁用所有热键的 Windows 配置之类的解决方案对我来说毫无用处。我必须能够专门选择我想继续工作和不想继续工作的热键。
*   “热键”昵称包括 Windows 按钮。
*   代码必须使用 C++ 或 Windows 函数。
*   最好不需要终止 explorer.exe。

我确实在stackoverflow中看到了一篇与我的情况非常相似的帖子（[防止用户通过系统热键退出Windows应用程序](https://stackoverflow.com/questions/7082524/prevent-users-from-quitting-a-windows-application-via-system-hotkeys)），但据我所知，所提出的解决方案都不适用于我的具体情况，而且我也没有在网上找到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T20:08:11.900

好的，我知道该怎么做了。该代码能够使用低级键盘钩子在没有 DLL 的情况下创建一个系统范围的钩子。这是代码（更好地解释）（使用Qt）：

```
//Installing the hook
SWH_return = SetWindowsHookEx(WH_KEYBOARD_LL,LowLevelKeyboardProc,GetModuleHandle(NULL),0);

if (SWH_return != NULL)
    qDebug() << "Hook true";
else
    qDebug() << "Hook false";

//Uninstalling the hook
bool teste = false;

teste = UnhookWindowsHookEx(SWH_return);

if (teste)
    qDebug() << "Unhook: true";
else
    qDebug() << "Unhook: false";

//The function responsible for detecting the keystrokes
LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
if (nCode < 0)
    return CallNextHookEx(NULL, nCode, wParam, lParam);

tagKBDLLHOOKSTRUCT *str = (tagKBDLLHOOKSTRUCT *)lParam;

switch(str->flags)
{
    case (LLKHF_ALTDOWN):
        qDebug() << "ALT";
        delete str;
    return 1;
}

if (wParam == WM_KEYDOWN)
{
    switch (str->vkCode)
    {
        case VK_RWIN:
        case VK_LWIN:
        case VK_LCONTROL:
        case VK_RCONTROL:
        case VK_APPS:
        case VK_SLEEP:
        case VK_MENU:
            qDebug() << "SPECIAL PRESS";
            delete str;
        return 1;
    }
}

return CallNextHookEx(NULL, nCode, wParam, lParam);
} 
```

最后一个函数不需要 .h 或 .cpp 文件中的任何声明。它阻止 Ctrl、Windows 键和 Alt 的输入。另外两个必须分别放在用户想要开始按键禁用的功能和他想要停止的功能中。

谢谢，

莫尔吉尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T10:22:38.230

RegisterHotKey 也是全局禁用所有应用程序的热键，除了进行 RegisterHotKey 函数调用的地方。

```
RegisterHotKey(GetSafeHwnd(), 100, 0,VK_F5); //F5 works only in our application 
```

# haskell - 有没有办法在 do 表示法中捕获延续？

> ID：11352346
> 
> 赞同：4
> 
> 时间：2012-07-05T20:49:03.327
> 
> 标签：haskell, types, continuations, coroutine, continuation-passing

由于以下做块：

```
do
  x <- foo
  y <- bar
  return x + y 
```

脱糖为以下形式：

```
foo >>= (\x -> bar >>= (\y -> return x + y)) 
```

这里不是`\x -> ...`而且`y -> ...`实际上是延续吗？

我想知道是否有一种方法可以捕获 定义中的延续`bind`，但我无法获得正确的类型。IE：

```
data Pause a = Pause a | Stop

instance Monad Pause where
  return x = Stop
  m >>= k = Pause k         -- this doesn't work of course 
```

现在我试着混淆了这些类型：

```
data Pause a = Pause a (a -> Pause ???) | Stop
                       ------- k ------ 
```

但这也不起作用。有没有办法捕捉这些隐含的延续？

顺便说一句，我知道`Cont`单子，我只是在试验和尝试一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:27:16.733

好的，我不太确定，但让我提出一些想法。我不太确定捕获延续应该意味着什么。例如，您可以 `do`在结构中捕获整个块：

```
{-# LANGUAGE ExistentialQuantification #-}

import Control.Monad

data MonadExp b = Return b | forall a. Bind (MonadExp a) (a -> MonadExp b)

instance Monad MonadExp where
    return x = Return x
    f >>= g = Bind f g 
```

例如：

```
block :: MonadExp Int
block = do
    x <- return 1
    y <- return 2
    return $ x + y

instance Show (MonadExp a) where
    show (Return _) = "Return _"
    show (Bind _ _) = "Bind _ _"

print block
>> Bind _ _ 
```

然后评估整个事情：

```
finish :: MonadExp a -> a
finish (Return x) = x
finish (Bind f g) = finish $ g (finish f)

print $ finish block
>> 3 
```

或单步执行并查看零件

```
step :: MonadExp a -> MonadExp a
step (Return _) = error "At the end"
step (Bind f g) = g $ finish f

print $ step block
>> Bind _ _
print $ step $ step block
>> Return _ 
```

好吧，现在我想多了，这可能不是你要问的。但也许它会帮助你思考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:27:58.870

好吧，我不知道您的 lambdas 是否是最严格意义上的延续，但在我看来，它们也类似于这个概念。

但请注意，如果它们是延续，那么脱糖的一元代码已经以延续传递风格 (CPS) 编写。“捕获”延续的控制操作符的通常概念是基于直接式程序；“捕获的”延续仅隐含在直接式程序中，但 CPS 转换使其显式。

由于脱糖的单子代码已经在 CPS 或类似的东西中，好吧，也许一种解决问题的方法是单子代码是否可以表达 CPS 代码可以表达的一些控制流技巧。通常，这些技巧归结为这样一种想法，即在 CPS 机制下，一个函数通过调用其延续来完成是常规的，一个函数可以选择用它选择的另一个延续来*替换它的延续。*可以使用对原始延续的引用来构造这个替换延续，以便它可以反过来“恢复”那个原始延续，如果它选择的话。例如，协同程序被实现为相互的“替换/恢复”循环。

从这个角度来看，我认为您的答案大多是否定的；CPS 要求 in `foo >>= bar`,`foo`必须能够选择是否`bar`将被调用，并且`foo`必须能够为 提供替代品`bar`，但`(>>=)`它本身并没有提供`foo`这样做的机制，更重要的`(>>=)`是，它可以控制执行流，不是`foo`。一些特定的 monad 实现了它的一部分或全部（例如，`Maybe`monad 允许通过产生结果`foo`来放弃执行），但其他的则不然。`bar``Nothing`

我能得到的最接近的是放弃`(>>=)`并改用它：

```
-- | Execute action @foo@ with its "continuation" @bar@.
callCC :: Monad m => ((a -> m b) -> m b) -> (a -> m b) -> m b
foo `callCC` bar = foo bar 
```

在这里`foo`可以选择是否`bar`要使用。但请注意，这`callCC`真的只是`($)`！

# asp.net - 使用asp.net菜单控件时如何使活动链接项加粗

> ID：11352349
> 
> 赞同：-1
> 
> 时间：2012-07-05T20:49:10.197
> 
> 标签：asp.net, web-controls

使用asp.net菜单控件时如何使活动（选定）链接项加粗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:02:54.257

您可以只使用`Menu`控件的样式：

```
 <asp:Menu ID="Menu1" DataSourceID="mySiteMap" runat="server" 
        Orientation="Horizontal" RenderingMode="Table" 
        StaticSubMenuIndent="16px">
        <StaticSelectedStyle Font-Bold="True" />
    </asp:Menu> 
```

这是结果：

![在此处输入图像描述](../Images/15e672ce2d080a320bdafcb0d02cc65a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:53:06.223

1 - 查看 HTML 源代码。

2 - 查找`class`名称或`id`用于表示活动元素。

3 - 使用在步骤 2 中找到的选择器适当地设置元素的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:25:23.343

如果您要变为粗体的链接是一个级别

```
<asp:menu id="NavigationMenu" ..............>
    <levelmenuitemstyles>
      <asp:menuitemstyle BackColor="LightSteelBlue" forecolor="Black"/>
    </levelmenuitemstyles>
    <levelselectedstyles>
    <asp:menuitemstyle BackColor="Cyan" forecolor="Gray"/>
      </levelselectedstyles>
    </levelmenuitemstyles>
</asp:menu> 
```

# php - 获取 Wordpress 设置电子邮件

> ID：11352355
> 
> 赞同：0
> 
> 时间：2012-07-05T20:49:28.207
> 
> 标签：php, mysql, wordpress

我试图让电子邮件存储在 wordpress 中的“设置”。我知道有一个旧功能：`get_settings`但这是[depreciated](http://codex.wordpress.org/Function_Reference/get_settings)。我找不到替代品 - 这是有原因的吗？在 wordpress 中返回设置电子邮件的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:51:49.923

而不是使用[`get_settings()`](http://codex.wordpress.org/Function_Reference/get_settings)，使用[`get_option()`](http://codex.wordpress.org/Function_Reference/get_option)。

例子：

```
$email = get_option('admin_email'); 
```

# ruby-on-rails-3 - 如何在 copycopter 中使用多个环境？

> ID：11352364
> 
> 赞同：1
> 
> 时间：2012-07-05T20:50:04.497
> 
> 标签：ruby-on-rails-3

(使用 Rails 3.2.1) 使用 copycopter-server 应用程序并编辑副本时，它建议您可以保存为草稿，它只会提交到开发/登台站点，或者，如果您单击发布，它将保存它适用于所有环境 - 包括生产。

我的问题是 - 如何使用 copycopter 设置这些环境？我到处看了看。Railcast 提到您可以使用该功能这一事实，但从未解释您需要做什么才能设置它。

有没有人有任何经验或这方面的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:06:04.773

我在 help.copycopter.com 的（谷歌）缓存版本中发现，您需要在 copycopter.rb 配置文件中指定环境。

将 copycopter.rb 更改为：

```
CopycopterClient.configure do |config|
  config.api_key = 'your_api_key_here'
  config.host = 'host.name'
  config.environment_name = Rails.env
end 
```

现在，当您将某些内容另存为草稿时，它将自动填充到您的开发/登台服务器中。当您发布某些内容时，它将填充所有服务器（包括生产）。我不确定他们为什么不将其添加到原始文档中，花了很长时间才找到。

# c++ - 使用用户生成的文件名创建 ifstream？

> ID：11352373
> 
> 赞同：1
> 
> 时间：2012-07-05T20:50:31.413
> 
> 标签：c++, fstream, ifstream

我在使用`ifstream`未在编译时定义的文件名创建 a 时遇到问题。以下示例工作正常：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main() {
    string file, word;
    int count = 0;

    cout << "Enter filename: ";
    cin >> file;
    ifstream in("thisFile.cpp");
    while(in >> word)
        count++;
    cout << "That file has " << count << " whitespace delimited words." << endl;

} 
```

但是，如果我将行更改为，则会`ifstream in("thisFile.cpp");`出现`ifstream in(file);`编译错误。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:53:49.663

C++98 中的文件流仅采用 C 样式字符串作为构造函数参数，而不采用 C++ 字符串，这是 C++98 标准中的一个疏忽，在 C++11 更新中得到了纠正。如果您的编译器还不支持 C++11，您可以通过简单地调用`c_str()`从 C++ 字符串中获取 C 样式字符指针来从字符串名称打开文件：

```
ifstream in(file.c_str()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T20:52:55.083

在 c++11 之前，ifstream 构造函数只接受了一个 `const char*`不是文件名的字符串。

所以试试`ifstream in(file.c_str());`吧

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T20:53:07.690

您需要[c_str](http://en.cppreference.com/w/cpp/string/basic_string/c_str)方法：

```
ifstream in(file.c_str()); 
```

# android-asynctask - android：即使在 doInBackground 上启动新活动，AsyncTask onPostExecute 也会继续工作

> ID：11352374
> 
> 赞同：0
> 
> 时间：2012-07-05T20:50:38.117
> 
> 标签：android-asynctask

我正在为客户端构建一个应用程序，以从服务器获取问题并回答它，如果服务器没有问题，我想转到新屏幕并打印几分钟后重试的消息`AsyncTask`，如果服务器没有，则会收到问题'没有问题，它会在响应的标题中发送一个`isFindAQuestion`带有值的标题`false`，这是客户端上的代码，以确保如果`false`我在 LogCat 上打印并且我看到了`message = false`，但我的问题是即使我开始新的活动使用`intent`，此活动继续工作并向我显示异常，这是`null pointer exception`因为`onPostExceute`将采用参数`null`并尝试处理它，我将其放在`finish()`末尾`false statement`但未完成活动

```
if (response.getFirstHeader("isFindAQuestion").getValue()
                        .toString().equals("false")) {
                    Log.d("message", "false");
                    Bundle basket = new Bundle();
                    basket.putString("Message", "sorry no enought questions");
                    Intent goToAnswerQuestion = new Intent(AnswerQuestion.this,
                            FinishTime.class);
                    goToAnswerQuestion.putExtras(basket);
                    startActivity(goToAnswerQuestion);
                    finish();

                } 
```

### 编辑

是因为`AsyncTask`正在工作，`thread`所以如果活动完成，该线程将继续工作？如果是这样，我该如何停止该线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:51:14.817

doInBackground 不在 UI 线程中执行，而是在单独的线程中执行：

> 在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。

如果您想停止后台操作并在 UI 线程上执行一些活动，最好调用 cancel()，然后在 onCancelled 回调中执行您想要的所有内容，该回调在 UI 线程上执行。

从 AsyncTask 文档：

> 可以通过调用 cancel(boolean) 随时取消任务。调用此方法将导致对 isCancelled() 的后续调用返回 true。调用此方法后，将在 doInBackground(Object[]) 返回后调用 onCancelled(Object)，而不是 onPostExecute(Object)。为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 doInBackground(Object[]) 定期检查 isCancelled() 的返回值。

```
protected void onCancelled (Result result) 
```

> 在调用 cancel(boolean) 并且 doInBackground(Object[]) 完成后在 UI 线程上运行。默认实现只是调用 onCancelled() 并忽略结果。如果您编写自己的实现，请不要调用 super.onCancelled(result)。

# abap - ABAP中的得墨忒耳定律

> ID：11352376
> 
> 赞同：-2
> 
> 时间：2012-07-05T20:50:39.347
> 
> 标签：abap, law-of-demeter

我想检测和解决违反德墨忒尔法则的行为。</p>

重点是班级水平。有人有一些想法或文章吗？

请回复

最好的问候尹晓

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:01:03.983

好的，

这是您需要使用的（以及更多）：

*   `READ REPORT <prog> INTO <itab>.`这会将代码读入内部表以进行分析
*   `SYNTAX-CHECK FOR <prog> MESSAGE <m> LINE <l> WORD <w> PROGRAM <itab>.`这将语法检查您对代码所做的任何更改
*   `CALL FUNCTION 'RS_DELETE_PROGRAM'`在保存更改的报告之前，您可能需要先将其删除
*   `INSERT REPORT p_abap FROM it_prog.`这将从更改的 itab 创建更改的报告
*   `GENERATE REPORT p_abap.`这将生成您插入的报告
*   分析表格`TRDIR`，对于类名`XYZ`，您会在其中找到所有具有名称的组件`XYZ========<componentname>`，这些都是您可以阅读和修改的报告
*   我还会研究 SAP 如何“在哪里使用”，它可能会帮助您以简单的方式发现违规行为

给智者的一句话：SAP 不可能支持这一点；这些关键字中有 80% 仅供内部使用（这些关键字当然是最有趣的；），如果这不是学术练习，那么您几乎肯定是在浪费时间。

此外，我不确定符合得墨忒耳定律的代码是否一定是更好的代码，但这是与啤酒最好的哲学讨论。

T。

# ruby-on-rails - 在 Ruby on Rails 中查找对象（需要在 Net::SSH 中取消 ssh 连接）

> ID：11352377
> 
> 赞同：1
> 
> 时间：2012-07-05T20:50:39.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, object, ssh

我使用[Net::SSH](https://github.com/net-ssh/net-ssh)创建了以下端口转发：

```
def connectToCustomerSystem
  Net::SSH.start("localhost", 'myuser', :password => "password") do |ssh|
    logger.debug ssh.exec!("hostname")
    ssh.forward.local(1234, "www.capify.org", 80) 
    #ssh.loop { true } #dont use loop to directly render director/index
  end  
  render :controller => "director", :action => "index"
end 
```

现在我将通过“ssh.forward.cancel_local(1234)”以新的其他方法取消此连接。

```
def disconnectForwarding
  ssh.forward.cancel_local(1234)
end 
```

但是，当然，“ssh”在这种情况下是无效的。我如何搜索类型为“Net::SSH”的所有可用对象？或者有没有其他方法可以退出特定的转发（因为最终，一些不同的用户会有很多转发，我不想杀死所有人，只是一个特定的用户）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:10:41.710

我看到您在与 Rails 交互时试图保留有状态的 Ruby 对象。这不适用于 Rails 对服务器的“不共享”方法。由于块超出了您的方法的范围，因此 ssh 不仅不在范围内，而且您下次将与不同的工作进程交谈。

您需要在后台分离运行时间较长的 ruby​​ 进程来管理 ssh 连接。一个简单的方法是启动一个 ruby​​ 脚本并使用 DRb 连接到管理 ssh 的对象。然后，您可以在每次处理请求时重新连接到管理连接的 Ruby 进程，并通过 DRb 向它发出命令。在这种情况下，ssh 变量可能会作为您通过[DRb 与之](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/drb/rdoc/DRb.html "DRB")交谈的对象内的实例变量（看起来您可以将其设置为循环，以便它保持不变）。

有一些可怕的方法可以摆脱范围框，例如将变量设置为线程局部变量，或搜索 ObjectSpace.each_object，但这些方法在原则上非常糟糕。

# c# - Excel 插件 C# oracle 连接。它安全吗？

> ID：11352384
> 
> 赞同：2
> 
> 时间：2012-07-05T20:51:21.360
> 
> 标签：c#, vsto, excel-addins

我使用 Visual Studio 2008 和内置项目模板创建了一个 Excel 2007 加载项。在我的项目中，我有一个数据库连接类，它使用连接字符串连接到 Oracle 数据库，例如：

```
string connectionString = "Data Source=ibd1.dev;User Id=xxx;Password=xxx;"; 
```

我的问题是，部署加载项后这有多安全。最终用户（或恶作剧的黑客）是否可以反编译加载项并查看连接字符串？如果可能的话，我不能冒险。

我应该提到它是如何部署的。我正在使用 Visual Studio 中的“发布”功能将安装文件放在公司内部任何人都可以访问的共享网络驱动器上。生成的目录有一个 setup.exe、一个 VSTO 文件和几个带有 DLL 和 MANIFEST 文件的子目录。我没有太多部署经验，因为我通常是 Web 应用程序开发人员。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:54:46.207

> 最终用户（或恶作剧的黑客）是否可以反编译加载项并查看连接字符串？如果可能的话，我不能冒险。

是的。Reflector、[dotPeek](http://www.jetbrains.com/decompiler/)等工具使这变得微不足道。

我可能不会从 VSTO 插件直接连接到数据库。相反，我会调用一个 Web 服务（它与 DB 对话），并且用户需要使用用户名和密码、Windows 集成身份验证等对 Web 服务进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:55:35.147

是的，它很容易反编译，但你可以[加密你的连接字符串](http://msdn.microsoft.com/en-us/library/89211k9b%28VS.80%29.aspx)以减少问题。但如果它不是独立应用程序，您可以使用服务器端服务中的数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:57:15.477

与所有 .NET 应用程序一样，DLL 可以很容易地被反编译，这会以纯文本形式公开连接字符串和密码。您可以通过下载免费的反编译器（我建议[http://www.jetbrains.com/decompiler/](http://www.jetbrains.com/decompiler/)）在几分钟内自行测试。

.NET 具有加密连接字符串的功能，请在此处尝试文档：http: [//msdn.microsoft.com/en-us/library/89211k9b (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/89211k9b(v=vs.80).aspx)

# php - 调整“NOW()”时区

> ID：11352386
> 
> 赞同：0
> 
> 时间：2012-07-05T20:51:25.227
> 
> 标签：php, mysql

现在我的查询看起来像这样（相关部分）：

```
UPDATE last_seen=NOW() 
```

但它插入了一个比我早 2 小时的时间。有什么办法可以调整吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:53:19.627

在您的数据库上设置时区..看看这篇文章。 [https://stackoverflow.com/a/3451971/1227435](https://stackoverflow.com/a/3451971/1227435)

这是另一个很棒的资源：

[PHP 和 MySQL 的时区问题](https://stackoverflow.com/questions/1053252/having-timezone-problems-with-php-and-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:00:17.170

我建议你尝试这样的事情：

有一个`hidden input`收集用户的时区

```
<input type="hidden" name="offset" class="offset">
$('.offset').val(new Date().getTimezoneOffset()); 
```

然后在更新之前获取它并像这样将其转换为秒

```
$offset    = intval($_REQUEST['_offset']) * 60; 
```

最后将其添加到`time()`：

```
$now = time() + $offset; 
```

执行上述操作，您将获得一个变量，其中包含客户在其时区中的时间。如果您不希望这样，并且希望每个人都有一个共同的时间，只需在您的以下设置您的时区`index.php`：

```
date_default_timezone_set('TIMEZONE IN HERE'); //Supported timezone list: http://www.php.net/manual/en/timezones.php 
```

但最好将其设置在您的`php.ini`（时区）或更改服务器的时区（Debian/Ubuntu: `dpkg-reconfigure tzdata`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:55:32.793

[http://dev.mysql.com/doc/refman//5.5/en/time-zone-support.html](http://dev.mysql.com/doc/refman//5.5/en/time-zone-support.html)您需要设置 MySQL 的时区概念。希望有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T20:54:27.677

听起来 MySQL 和你不在同一个时区。

你有一些选择：

*   设置 MySQL 的时区。
*   使用 PHP 设置存储前的日期。
*   存储为 UTC 时间戳，然后*显示*正确的本地时间。更多代码，但我推荐。

# sonarqube - 第一次使用 Maven 设置 SONAR，在 RulePriority 上出现错误，分析失败

> ID：11352392
> 
> 赞同：0
> 
> 时间：2012-07-05T20:51:57.130
> 
> 标签：sonarqube

我正在尝试在服务器上设置 SONAR。我有 Maven 3.0.3 并在 Java 项目中使用 Sonar 3.1.1。

在中途`mvn sonar:sonar`，我收到以下错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli) on project XXXXXXX-common: Can not execute Sonar: No enum const class org.sonar.api.rules.RulePriority.3 -> [Help 1] 
```

我以前设置过声纳，从来没有见过这个，它一直是解压缩的。但是在这个特定的服务器上，我不断收到这个错误。

我尝试创建一个空白规则集，但仍然弹出错误。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:10:28.620

我认为您面临此处描述的相同问题 [http://sonar.15.n6.nabble.com/Xpath-rules-gt-Failed-startup-of-context-td3183230.html](http://sonar.15.n6.nabble.com/Xpath-rules-gt-Failed-startup-of-context-td3183230.html)

你可能会发现它很有用

# c# - 从函数返回值并启动任务

> ID：11352393
> 
> 赞同：3
> 
> 时间：2012-07-05T20:52:04.710
> 
> 标签：c#, multitasking

有没有可能有这样的功能

```
public string Foo()
{
    Task.Factory.StartNew(Foo2());
    return "computedUniqueId";
} 
```

问题是我想在 Foo 返回一个值之后启动 Foo2 任务。我问这个的原因是 Foo() 函数的调用者将使用“computedUniqueId”监听信息。Foo2() 将触发该信息，因此可能会出现侦听器不会等待什么并且会错过该消息的情况。所以总结一下：有什么东西（比如 continueWith）会断言 Foo() 在 Foo2() 开始之前返回它的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:54:52.920

这是不可能的，因为这`return`是该方法中发生的最后一件事。在 a 之后`return`，有问题的方法已将控制权和范围交还给调用者。时期。我能想到的最好的方法是，如果您从返回字符串“computerUniqueId”的地方调用 Foo2。

也许如果您提供更多详细信息，我们可以提供更多帮助。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:55:47.017

> 有没有什么东西（比如 continueWith）会断言 Foo() 在 Foo2() 开始之前返回它的值？

不，问题是您无法控制等式的聆听方面。如果侦听器提前知道唯一 ID 很重要，我会将其分成两部分，并将唯一标识符传递给任务本身：

```
public string GenerateFooId()
{ 
    return "computedUniqueId";
}
public void Foo(string id)
{
    Task.Factory.StartNew(Foo2(id));
} 
```

这样，您始终可以保证调用者在开始任务之前知道 ID（因为调用者必须正确提供 ID）。将 ID 设为自定义类型可以为您提供更多的安全性和控制权，因为您可以阻止任何事情，但`GenerateFooId`无法生成此 ID。

# tomcat - 如何获取tomcat ApplicationContextFacade的工作目录

> ID：11352394
> 
> 赞同：1
> 
> 时间：2012-07-05T20:52:04.667
> 
> 标签：tomcat, jboss

我有 JBoss 和 Tomcat，我喜欢为两者制作一个可移植的 webapp。

在 JBoss 上，我使用 jboss.server.data.dir-property 来存储网络会话。在 Tomcat id 上喜欢使用 /work/-dir。但是如何获得工作目录？

我在 tomcat 上只有一个**ApplicationContextFacade** -instance。是否有可能获得工作目录？我环顾四周，找到了 .getWorkDir/.getWorkPath，这看起来就像我寻找的方法。但因此我需要一个上下文实例。

```
1 public static String getPath(EventObject session) {
2   String path=System.getProperty("jboss.server.data.dir");
3   
4   if (path == null && session.getSource() instanceof ApplicationContextFacade) {
5       ApplicationContextFacade acf = (ApplicationContextFacade) session
6               .getSource();
7       
8       path = acf.getWorkDir();
9
10  }
11  return path;
12} 
```

（第 8 行不起作用）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:52:59.677

尝试使用 servlet API 的一部分：

```
java.io.File tmpDir = ServletContext.getAttribute("javax.servlet.context.tempdir"); 
```

在 Tomcat 上，这将为您提供一个`File`指向`$CATALINA_BASE/work/[service[/[engine]/[context]`.

# java - 我如何在对象中预加载哈希图（没有 put 方法）？

> ID：11352396
> 
> 赞同：6
> 
> 时间：2012-07-05T20:52:14.290
> 
> 标签：java, map, hashmap

我有一个类，其中有几个数据结构，其中有一个哈希图。但我希望哈希图具有默认值，所以我需要预加载它。既然我不能在对象中使用 put 方法，我该怎么做？

```
class Profile
{
    HashMap closedAges = new HashMap();
    closedAges.put("19");
} 
```

我用这个修复了它，但我必须在对象中使用一个方法。

```
class Profile
{   
    HashMap closedAges = loadAges();
    HashMap loadAges()
    {
        HashMap closedAges = new HashMap();

        String[] ages = {"19", "46", "54", "56", "83"};
        for (String age : ages)
        {
            closedAges.put(age, false);
        }
        return closedAges;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T20:55:26.393

例如，您想在类的构造函数中执行此操作

```
class Example {

   Map<Integer, String> data = new HashMap<>();

   public Example() {
      data.put(1, "Hello");
      data.put(2, "World");
   }
} 
```

或者使用 Java 奇怪的双括号初始化特性：

```
class Example {

   Map<Integer, String> data;

   public Example() {
        /* here the generic type parameters cannot be omitted */
        data = new HashMap<Integer, String>() {{
           put(1, "Hello");
           put(2, "World");
      }};
   }
} 
```

最后，如果您`HashMap`是类的静态字段，则可以在块内执行初始化`static`：

```
static {

   data.put(1, "Hello");
   ...
} 
```

* * *

为了解决 Behes 的评论，如果您不使用 Java 7，请`<>`用您的类型参数填充括号，在这种情况下为`<Integer, String>`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-05T20:55:51.790

你可以这样做：

```
Map<String, String> map = new HashMap<String, String>() {{
   put("1", "one");
   put("2", "two");
   put("3", "three");
}}; 
```

这个java习语称为[*双括号初始化*](http://c2.com/cgi/wiki?DoubleBraceInitialization)。：

> 第一个大括号创建了一个新的 AnonymousInnerClass，第二个大括号声明了一个实例初始化程序块，该程序块在实例化匿名内部类时运行。

# c# - 尝试使用必应翻译 API 时出现 WebException

> ID：11352397
> 
> 赞同：2
> 
> 时间：2012-07-05T20:52:16.430
> 
> 标签：c#, bing, translate

我正在尝试使用 Bing Translate 的 API 将一些英文文本翻译成中文。

我的代码基本上是[MSDN](http://msdn.microsoft.com/en-us/library/ff512437)上提供的，尽管做了一些修改。

```
using System;
using System.Text;
using System.Net;
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Json;
using System.Web;
using System.ServiceModel.Channels;
using System.ServiceModel;

namespace AutoTranslate2
{
    public class Translator
    {
        private string authToken;

        public Translator(string clientId, string clientSecret)
        {
            AdmAccessToken admToken;

            AdmAuthentication admAuth = new AdmAuthentication("clientId", "client secret");

            admToken = admAuth.GetAccessToken();
            DateTime tokenReceived = DateTime.Now;
            this.authToken = "Bearer " + admToken.access_token;
        }

        public string TranslateMethod(
            string text,
            string inputLang = "en",
            string outputLang = "zh-CHS", // Chinese, simplified ('zh-CHT' is traditional Chinese)
            string inputType = "text/html",
            string outputType = "general")
        {
            // Add TranslatorService as a service reference, Address:http://api.microsofttranslator.com/V2/Soap.svc
            TranslatorService.LanguageServiceClient client = new TranslatorService.LanguageServiceClient();
            //Set Authorization header before sending the request
            HttpRequestMessageProperty httpRequestProperty = new HttpRequestMessageProperty();
            httpRequestProperty.Method = "POST";
            httpRequestProperty.Headers.Add("Authorization", this.authToken);

            // Creates a block within which an OperationContext object is in scope.
            string translationResult;
            using (OperationContextScope scope = new OperationContextScope(client.InnerChannel))
            {
                OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = httpRequestProperty;
                //Keep appId parameter blank as we are sending access token in authorization header.
                translationResult = client.Translate("", "<p>" + text + "</p>", inputLang, outputLang, inputType, outputType);
            }
            return translationResult;
        }
    }

    [DataContract]
    public class AdmAccessToken
    {
        [DataMember]
        public string access_token { get; set; }
        [DataMember]
        public string token_type { get; set; }
        [DataMember]
        public string expires_in { get; set; }
        [DataMember]
        public string scope { get; set; }
    }

    public class AdmAuthentication
    {
        public static readonly string DatamarketAccessUri = "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13";
        private string clientId;
        private string clientSecret;
        private string request;

        public AdmAuthentication(string clientId, string clientSecret)
        {
            this.clientId = clientId;
            this.clientSecret = clientSecret;
            //If clientid or client secret has special characters, encode before sending request
            this.request = string.Format("grant_type=client_credentials&client_id={0}&client_secret={1}&scope=http://api.microsofttranslator.com", HttpUtility.UrlEncode(clientId), HttpUtility.UrlEncode(clientSecret));
        }

        public AdmAccessToken GetAccessToken()
        {
            return HttpPost(DatamarketAccessUri, this.request);
        }

        private AdmAccessToken HttpPost(string DatamarketAccessUri, string requestDetails)
        {
            //Prepare OAuth request 
            WebRequest webRequest = WebRequest.Create(DatamarketAccessUri);
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.Method = "POST";
            byte[] bytes = Encoding.ASCII.GetBytes(requestDetails);
            webRequest.ContentLength = bytes.Length;
            using (Stream outputStream = webRequest.GetRequestStream())
            {
                outputStream.Write(bytes, 0, bytes.Length);
            }
            WebResponse webResponse = webRequest.GetResponse();
            using (webResponse)
            {
                DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(AdmAccessToken));
                //Get deserialized object from JSON stream
                AdmAccessToken token = (AdmAccessToken)serializer.ReadObject(webResponse.GetResponseStream());
                return token;
            }
        }
    }
} 
```

...在我的代码中的其他地方，我确实...

```
Translator t = new Translator(client_id, secret);
string output = t.TranslateMethod(text); 
```

但是，代码总是返回异常：

```
Unhandled Exception: System.Net.WebException: The remote server returned an error: (400) Bad Request.
   at System.Net.HttpWebRequest.GetResponse()
   at AutoTranslate2.AdmAuthentication.HttpPost(String DatamarketAccessUri, String requestDetails) in C:\Users\Deflect\AutoTranslate2\AutoTranslate2\Translate.cs:line 102
   at AutoTranslate2.AdmAuthentication.GetAccessToken() in C:\Users\Deflect\AutoTranslate2\AutoTranslate2\Translate.cs:line 87
   at AutoTranslate2.Translator..ctor(String clientId, String clientSecret) in C:\Users\Deflect\AutoTranslate2\AutoTranslate2\Translate.cs:line 26
   at AutoTranslate2.Chinese.Parse(String rawText) in C:\Users\Deflect\AutoTranslate2\AutoTranslate2\Parse.cs:line 68
   at AutoTranslate2.Program.Main(String[] args) in C:\Users\Deflect\AutoTranslate2\AutoTranslate2\Program.cs:line 19 
```

我将是第一个承认我真的不知道我的代码在做什么的人，因为我主要是从 MSDN 复制和粘贴的——有人知道我的代码为什么返回异常，以及如何让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:02:14.590

就是这一行：

```
AdmAuthentication admAuth = new AdmAuthentication("clientId", "client secret"); 
```

我忘记将示例中的字符串与实际变量交换。

# api - 我转发了一个域，现在我收到有关 Google Api Key 的错误消息

> ID：11352399
> 
> 赞同：0
> 
> 时间：2012-07-05T20:52:23.573
> 
> 标签：api, dns, forwarding

我们购买了这个域名[http://deerrepellent.ca/](http://deerrepellent.ca/)并将其转发到我们的主站点[http://bobbex.ca](http://bobbex.ca)

但是现在我们收到一条错误消息，说每当有人进入新域时我们都需要一个新的 google api 密钥。我们确实在本网站中使用地图。有没有办法为多个域使用一个 API 密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:03:00.630

遗憾的是，每个域都需要一个 API 密钥。以下博客文章概述了与您类似的问题以及开发人员如何解决它/他们仍然需要有两个 API 密钥，但使用一些 JavaScript，他们能够根据域应用正确的密钥：

[http://wave.coop/blog/2010/12/google-maps-api-keys-sites-multiple-domain-names/](http://wave.coop/blog/2010/12/google-maps-api-keys-sites-multiple-domain-names/)

以下是 Google 上关于多个域和 API 密钥的官方说法，在上面的博客文章中也有引用：

[https://developers.google.com/maps/faq#multiplekeys](https://developers.google.com/maps/faq#multiplekeys)

# php - ajax 在发布后从另一个页面检索数据

> ID：11352402
> 
> 赞同：2
> 
> 时间：2012-07-05T20:52:36.850
> 
> 标签：php, jquery, ajax

我知道这很容易，但我只知道这段代码的 DOM 等价物。很长的那个。我已经在堆栈中搜索了一些问题，但我似乎找不到解决方案。

所以基本上我有这个脚本：

```
function searchNow(str)
{
    $.ajax({
    url: "search.php",
    type: "POST",
    async: false,
    data:  {"search": str},
    success: function(data){
            alert("test");
            $("#result").html(data);
        }
    });
}

<table>

<tr>
    <td>Search: </td>
    <td><input type = "text" name = "search" onBlur="searchNow(this.value)">      </td>
</tr> 
```

这会将搜索提交给 search.php 以进行查询搜索并检索结果并将其显示在 id result 中。

我可以使用旧的 DOM ajax 轻松做到这一点，但后来我想尝试使用这个 jquery 版本，因为它更干净，也许更快。

在我的 search.php 我有这个：

```
$search = $_POST['search'];
return $search; 
```

可悲的是，我似乎根本无法归还任何东西。

一些输入将不胜感激，我已经开始熟悉 jquery ajax 但仅在同一页面上，而不是在页面间操作上。

谢谢你，-魔术师

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:55:28.780

您的 PHP 文件应输出该值。ajax 将读取该页面并获取其内容。

```
$search = $_POST['search'];
echo $search; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T20:55:39.497

你想做`echo $search`而不是`return`。

您还可以添加`print_r($_POST);`以查看 PHP 方面正在发生的事情。

一旦你看到它在做什么，你就可以进一步开发你的 php 脚本。

```
// Sets the correct response type
header('Content-type: application/json');

// get your search string/query
$search = $_POST['search'];

/*
 * Do whatever you need in order to get a result
 */

echo json_encode($result);

exit; 
```

如果您将搜索查询传递给数据库，请务必阅读 Nettuts[对 PDO 的精彩介绍](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)。有很多常见的陷阱会导致安全问题/漏洞利用——避免其中一个主要的陷阱（SQL 注入）在这篇文章中有所介绍。

根据您的评论，确保带有搜索字段的页面在正确的位置正确包含 jquery（抱歉，如果这很明显，我并不是要光顾！）

```
<html>
<head>

    <title>Jquery Ajax</title>

    <!-- google nicely host jquery for free... -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>

<body>

    <script type="text/javascript">
    function searchNow(str)
    {
        $.ajax({
            url: "search.php",
            type: "POST",
            data:  { "search": str },

            success: function(data) {
                alert("test");
                $("#result").html(data);
            }
        });
    }
    </script>

    <table>
        <tr>
            <td>Search: </td>
            <td><input type="text" name="search" onBlur="searchNow(this.value)" /></td>
        </tr>
    </table>

    <div id="results"></div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:56:31.683

您的 PHP 文件应输出该值。ajax 将读取该页面并获取其内容。

```
$search = $_POST['search'];
echo $search; 
```

此外，在 jQuery 的未来版本中将不推荐使用 success 选项。您应该像这样使用 .done(callbackFunction) ：

```
 $.ajax({
      url: 'beh.php',
      type: 'POST',
      data: {search: "beeeeeeeh"}
    }).done(function () {
      // do stuff
    }) 
```

另外，有什么特别的原因为什么您将 async 设置为 false 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T21:07:06.047

不要忘记创建一个 ID="result" 的 HTML 元素，选择器使用它来包含 search.php 打印的结果。

```
$("#result").html(data); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-20T04:31:05.560

我尝试使用

```
type: 'GET' 
```

在 php 文件中，得到的值为

```
$search = $_GET['search'];
echo $search; 
```

有效。希望它也对你有用。

# objective-c - 重新加载 searchResultsTableView

> ID：11352403
> 
> 赞同：1
> 
> 时间：2012-07-05T20:52:40.720
> 
> 标签：objective-c, uitableview, uisearchdisplaycontroller

在我的主 tableView 中，我有一些自定义单元格（基本上是带有 imageView 的单元格）。

仅当我的 plist 上的值为 false 时才设置 imageView。然后，当它为真时，imageView 为零。

基本上当用户进入detailView时，值被设置`YES`为`cell.imageView`nil。

没关系，它有效

我正在使用a `searchDisplayController`，当我搜索具有cell.imageView的东西时，进入detailView然后返回到`searchResultsTable`，单元格仍然有图像，虽然它不应该，但是主tableView有正确的单元格（所以，没有图像）。

我认为它可能取决于 searchResultsTableView，但我不确定。我试过了

```
[self.searchDisplayController.searchResultsTableView reloadData]; 
```

没有效果。

我怎样才能重新加载 searchResultsTableView 以便它显示正确的单元格，那些有图像的单元格和那些不再有图像的单元格？

任何帮助表示赞赏！

*编辑*

这是我的`cellForRowAtIndexPath`方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSArray *rows;
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        rows = filteredList; //for search
    } else {
        NSDictionary *section = [localSortedTips objectAtIndex:indexPath.section];
        rows = [section objectForKey:@"Rows"];
    }

    NSDictionary *item = [rows objectAtIndex:indexPath.row];
    cell.textLabel.text = [item objectForKey:@"name"];  
    if ([[item valueForKey:@"isRead"] boolValue] == NO) {
        cell.imageView.image = [UIImage imageNamed:@"unread.png"];
    } else {
        cell.imageView.image = nil;
    }
    cell.textLabel.font = [UIFont boldSystemFontOfSize:15.0];
    cell.textLabel.adjustsFontSizeToFitWidth = YES;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T23:10:51.987

如果我理解正确，那么您可以有一个解决方法，但使用相同的搜索字符串再次搜索：

```
if (self.searchDisplayController.active) {
    self.searchDisplayController.searchBar.text = self.searchDisplayController.searchBar.text;
} 
```

将其放入`viewWillAppear:`或`viewDidAppear:`每次显示视图时都会调用它（例如，您从 回到`detail view`您的`search view`）。并且在这个地方重新加载数据也会很好，以获得正确的数据（例如，如果您在示例代码中将单元格标记为已读）

Just `[self.tableView reloadData];`and not the `searchResultsTableView`(它会在新搜索后自动使用更新的数据)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:31:12.613

听起来好像您的细胞正在被回收并且没有正确重置。UITableView 使用视图回收，因此重要的是，如果您执行诸如设置图像之类的操作，即使它们不是要显示的图像，也要确保明确设置它。

如果您分享您的`cellsForRowAtIndexPath`代码，您可能会获得更多帮助。

# php - 使用 cakePHP Formhelper 在 Firefox 中丢失复选框的表单发布数据

> ID：11352404
> 
> 赞同：0
> 
> 时间：2012-07-05T20:52:46.007
> 
> 标签：php, html, firefox, cakephp

我正在开发我的第一个 cakePHP 应用程序，我遇到了我的第一个主要问题。我有一个 Search/Filter 表单，它将数据提交给我的控制器的 Index 操作。这一切都是使用 cakePHP 的 Formhelper 完成的。然后我使用 $this->data 访问这些数据。它在 chrome 和 IE 中运行良好，但在 Firefox 中我的所有字段都是空的。根据 Firebug 的发布数据，HTML 很好。

[http://i.imgur.com/SznRc.png](http://i.imgur.com/SznRc.png)

我错过了什么？

在我看来 ：

```
<?php echo $this->Form->create('Contact', array('action' => 'index')); ?>
<?php echo $this->Form->input('keywords', array('class' => 'search', 'label' => false)); ?>
<?php echo $this->Form->input('sex', array('label' => false, 'multiple' => 'checkbox', 'div' => false, 'options' => array('F' => __('Female'),'M' => __('Male')))); ?>
<?php echo $this->Form->input('language', array('multiple' => 'checkbox', 'label' => false, 'div' => false, 'options' => $languages)); ?>
<?php echo $this->Form->end(array('label' => __('Search'))); ?> 
```

在我的控制器中：

```
class ContactsController extends AppController {
public $helpers = array('Html', 'Form', 'Paginator');

    public function index(){

        $this->set('languages', $this->Contact->Language->find('list',array('fields' => array('Language.id', 'Language.label_en'))));

        echo pr($this->data);
    } 
```

# queue - 全循环队列？

> ID：11352415
> 
> 赞同：2
> 
> 时间：2012-07-05T20:53:22.250
> 
> 标签：queue

我们只是在课堂上学习循环队列，我有几个问题。由于我们将尾部定义为最后一个值旁边的空白区域，如下图所示：

```
|1| |3|4|5|6| 
```

头部将指向数字 3，尾部将指向 1 和 3 之间的空白空间。我很困惑如果该空间被填满会发生什么，例如下面：

```
|1|2|3|4|5|6| 
```

那么头部仍然指向3，但是尾部需要指向之前空白框之后的下一个框，因此它会指向3，或者头部。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T21:06:50.183

当这种情况发生时，您的队列已满。在处理可以推送的新项目时，您有几种选择：

1.  丢弃推送的事件：只有在弹出其他项目时才能再次推送项目。既没有`head`也没有`tail`更新。

    > 示例：考虑一个已填满的事件队列，新请求被简单地忽略。

2.  丢弃（弹出）队列中最旧的事件：在这种情况下，您将和指针*都更新到一个位置。*`head``tail`

    > 示例：缓冲来自网络摄像头的传入图像帧以进行处理。对于“实时”提要，您可能更愿意在处理出现中断时丢弃较旧的帧。

3.  创建一个更大的队列：即动态分配更多内存

    > 示例：您使用循环队列，因为它是一种高效的实现，在您推送项目时*大部分时间*不需要内存分配。但是，您不希望丢失队列中的项目，因此您允许偶尔重新分配更多内存

正确的操作取决于您的应用程序。

**PS.：**您的实现基于在队列中保留一个空槽以区分满缓冲区和空缓冲区。另一种选择是保留队列中元素数量的计数器以进行区分。更多信息可以在[循环缓冲区（维基百科）](https://en.wikipedia.org/wiki/Circular_buffer#Full_.2F_Empty_Buffer_Distinction)上找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T20:59:05.807

正如我所想的那样，循环队列是循环的，部分原因是它没有被“填满”。它将始终保持一定数量的元素，并根据需要丢弃旧的元素。

所以你永远不会填满空白；如果您插入一个新元素，您将删除一个旧元素，因此仍然会有一个空白空间。

换句话说，在您的图表中，如果您插入一个新数字，例如 0，您的队列如下所示（假设`1`是最后一个元素，`3`第一个元素）：

```
|1| |3|4|5|6| 
```

然后它将如下所示：

```
| |0|3|4|5|6| 
```

但是，如果您想要的话，循环队列的某些实现会在达到其全长时简单地抛出异常/错误。看看[这个](http://cppgm.blogspot.com/2007/07/circular-queue.html)例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T00:44:25.663

> 这是我找到的关于队列的最简洁的解释。您可以在此基础上扩展您的队列。资料来源：“*算法*”，Robert Sedgewick 着。

常量最大值=100；

```
var queue: aray[0..max]of integer;
     head,tail: integer;

procedure put(v:integer);    
  begin
    queue[tail] := v;   
    tail := tail + 1;   
    if (tail > max) then tail := 0;
  end;

function get: integer;  
  begin
    get := queue[head];
    head := head + 1;   
    if (head > max) then head := 0; 
  end;

procedure queueinitialize;   
  begin
    head := 0;
    tail := 0;
  end;

function queueempty: boolean;   
  begin   
    queueempty := (head = tail);
  end; 
```

> “需要维护两个索引，一个到队列的开头（头），一个到结尾（尾）。队列的内容是数组中头尾之间的所有元素，考虑到“ wraparound" 当遇到数组末尾时返回 0。如果 head = tail 则队列定义为空；如果 head = tail + 1，或 tail = max 且 head = 0，则定义为满。 "

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T13:01:45.833

当头部和尾部指向同一个位置时，我们说队列已满。不能添加更多元素。要添加任何元素，您必须从队列中删除一个元素。这样头部将增加并且再次生成一个空间。

# forms - Access 2010 尝试通过表单输入唯一记录

> ID：11352418
> 
> 赞同：0
> 
> 时间：2012-07-05T20:53:45.133
> 
> 标签：forms, ms-access, ms-access-2010

我正在尝试为我的表单输入错误检查。我让用户输入姓名，如果他们尝试使用记录中已经存在的姓名，我想提示他们。

示例：Person 表有 3 条记录，其 FName 为：Jeff、Kyle、Darren。

如果在 Fname Box 中的添加人员表单上输入 Kyle，则更新后事件将通知用户此名称已被认领，并且该字段为空。就像 Greg 进入一样，不会出现任何通知。

我只是不知道如何将文本字段值与过滤查询列表中的值进行比较，而且 Google 搜索还有其他松散相关的链接。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:55:49.407

如果所有 fname 都必须是唯一的，请向表中添加唯一索引。这将防止输入重复项。表单错误属性将允许您提供自定义错误。

您还可以检查该名称是否存在于控件的更新前事件中。

在此示例中，控件和字段都称为 AText。通常，您应该重命名控件，使其与字段不同。

```
Private Sub AText_BeforeUpdate(Cancel As Integer)
Dim IsOk As Boolean

''One of the very few places where the .Text property is used
sLookUp = Me.AText.Text

IsOk = IsNull(DLookup("Atext", "Table1", "Atext='" & sLookUp & "'"))

If Not IsOk Then
    MsgBox "Found!"
    Cancel = True
End If
End Sub 
```

# html - 由于某种原因，我的网页被 5 - 10 px 边框框起来

> ID：11352438
> 
> 赞同：1
> 
> 时间：2012-07-05T20:55:13.087
> 
> 标签：html

我在我正在从事的几个项目中一直遇到这个问题。

我确定这是一个基本问题，我尝试寻找答案但无济于事。

整个页面的代码是：

HTML

```
<html>
    <head>
    <link rel="stylesheet" href="cssbin/default.css" type="text/css">

    </head>

    <body>

        <header>
        </header>

        <nav>

        </nav>

        <section>

        </section>

        <footer>

        </footer>
    </body>
</html> 
```

CSS：

```
body {
    background-color: #B3BDE6;
}

header {
    height: 200px;
    background-color: #020C36;
}

nav {
    height:100px;
    background-color: #7A8FE6;
}

section {
    height:500px;
    background-color: #2B314D;
}

footer {
    height: 200px;
    background-color: #020c36;
}

body, header, nav, section, footer {
 border: 1px solid black;
} 
```

下面的网页显示了我在说什么：

[http://virtualharrogate.co.uk/template.php](http://virtualharrogate.co.uk/template.php)

在谷歌浏览器中，页面是框架的，我不确定是否在每个浏览器中都会发生这种情况，但如果没有其他问题，我需要纠正 chrome 的问题......

我问为什么那里的边界（因为我显然错过了某处的点）以及如何解决这个问题？

我尝试使用 css 属性设置页面样式，`width: 100%; & height: 100%;`但仍然没有。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:57:24.963

发生这种情况是因为默认情况下`body`具有`margin:8px`.

这是默认样式表 - [http://www.w3.org/TR/CSS21/sample.html](http://www.w3.org/TR/CSS21/sample.html)

只需添加一个`margin:0;`样式来纠正它。

在应用自定义 css 之前，您应该使用某种 css 重置。这是处理事情的正确方式。

查看[Initializr](http://www.initializr.com/)。它提供了更多功能，包括 IE6+ 兼容性/回退等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:00:03.897

查看 CSS 的最后一行：

```
body, header, nav, section, footer {  border: 1px solid black; } 
```

这是在所有这些元素周围添加 1px 边框。尝试从那条线上移除身体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:02:59.243

只需使用`body {margin: 0;}` 或`body {margin: auto;}`

# wpf - 在 WPF（WAF 框架）中执行验证

> ID：11352447
> 
> 赞同：0
> 
> 时间：2012-07-05T20:55:42.353
> 
> 标签：wpf, validation

我有一个关于如何在下面的设置中最好地执行验证的问题。

我有一个基于 WPF 的小型 UI（使用 WAF 框架）。此特定对话框包含一个`DecimalUpDown`控件（来自 WPF 扩展工具包），用户可以在其中通过使用向上/向下箭头或键入或粘贴来修改值。

在提供有效数字（格式和范围）之前，不应允许用户继续（应禁用下一步按钮）。用户还应该知道，阻止他们继续的是该字段的值。 **如何执行此验证？**

我有一个非常简单的视图模型——它包含一个`float FooValue`属性（绑定到上/下控件）并实现`bool IsValid()`了父容器绑定到的一个（用于`Next`按钮的启用状态）。

![在此处输入图像描述](../Images/a670c393cf9c625bb103b7c4829f7f00.png)

我注意到其他一些网站建议我应该在设置器中抛出异常（例如[http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation)）。这在这里真的没有意义，因为我的财产是`float`. 是否应该绑定到数字上/下的“文本”值并在视图模型级别进行解析（并抛出异常）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:14:04.313

在 waf.codeplex.com 上实际上有一个示例显示如何进行数据输入验证 - [http://www.codeplex.com/Download?ProjectName=waf&DownloadId=282750](http://www.codeplex.com/Download?ProjectName=waf&DownloadId=282750)。它使用框架源代码中包含的 BookLibrary 示例应用程序。

基本上，您将在`ValidatesOnDataErrors=true`属性上使用数据注释，在 XAML 元素上使用属性。

# javascript - 为什么旋转上下文后图像质量会下降？

> ID：11352450
> 
> 赞同：23
> 
> 时间：2012-07-05T20:55:48.207
> 
> 标签：javascript, image, canvas, browser

我正在制作一个自上而下的射击游戏，它依赖于始终旋转指向鼠标光标的头像。我实现这样的旋转：

```
//Rendering.
context.save(); //Save the context state, we're about to change it a lot.

context.translate(position[0] + picture.width/2, position[1] + picture.height/2); //Translate the context to the center of the image.
context.rotate(phi); //Rotate the context by the object's phi.
context.drawImage(picture.image, -picture.width/2, -picture.height/2); //Draw the image at the appropriate position (center of the image = [0, 0]).

context.restore(); //Get the state back. 
```

当`phi`为 0 时，图像以其正常质量呈现，具有锐利的边缘和可检测的像素。但是，当我将 设置`phi`为非零值时（实际上，当它不是`0`、`Pi/2`、或时） `Pi`，图像会失去其清晰度，并且无法再看到单个像素，因为它们被模糊了。`Pi+Pi/2``2Pi`

这是一个屏幕截图（很抱歉屏幕截图的质量一般很差，但我认为差异非常明显）：

![在此处输入图像描述](../Images/3c0bd0c809701e7139929750429d4c40.png)

这是，嗯，有点不可接受。我不能让图像总是模糊不清！**为什么会发生这种情况，我可以解决吗？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-14T19:08:07.067

你可以试试

```
context.imageSmoothingEnabled = false; 
```

请参阅[文档](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#image-smoothing)：

> context.imageSmoothingEnabled [ = value ]
> 
> 返回是否填充图案，如果必须重新缩放图像，drawImage() 方法是否会尝试平滑图像（而不是仅使用“大像素”渲染图像）。
> 
> 可以设置，以更改图像是否平滑（真）或不（假）。

如果您想要一个真正的像素艺术复古风格效果，您需要手动创建多个角度的旋转精灵图像，查找当前值的适当精灵`phi`，并在不旋转的情况下绘制它。这显然需要相当多的艺术作品！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:41:13.160

如果您要围绕其中心点旋转图像，请确保图像本身具有偶数个像素。一旦你最终得到奇坐标，就需要为目标画布插入图像数据。[Apple 有一些关于翻译和旋转画布的](https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/HTML-canvas-guide/Translation,Rotation,andScaling/Translation,Rotation,andScaling.html#//apple_ref/doc/uid/TP40010542-CH8-SW1)不错的文档。

因此，对于任何图像，如上所述，使用舍入捕捉到完整像素。

```
context.translate(Math.floor(img.width/2), Math.floor(img.height/2)); 
```

这样，图像的每个源像素将始终精确地绘制到画布内的像素中，并且不会发生模糊。然而，这仅适用于 90 度的倍数。

似乎所有浏览器在某种程度上都会在图像绘制中进行抗锯齿，因此您可能必须提供旋转图像作为精灵。

根据这个[Chromium 错误报告](http://code.google.com/p/chromium/issues/detail?id=7508)，如果他们还没有修复它，你可能会很幸运。通读一遍，您将了解到 Ian Hickson 可能反对将抗锯齿图像绘制作为可选选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T09:32:43.550

`(picture.width/2, picture.height/2)`点并不总是有效。

`(Math.floor(picture.width/2) + 0.5, Math.floor(picture.height/2) + 0.5)`应该有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:02:20.717

好吧，实际上这是您无法解决的问题

如果您将图像旋转 90 度的倍数，您的库应该足够智能，以便不应用插值。

但是，一旦您将图像旋转了一个不同于 90 度的倍数的角度，您就需要进行插值。结果，你得到了平滑。如果你对理论感兴趣，你可以找一本关于计算机图形学或图像处理的书。

对于图像旋转的具体情况，您可以查看本文， [http://bigwww.epfl.ch/publications/unser9502.html](http://bigwww.epfl.ch/publications/unser9502.html)

# html - 让插入框阴影覆盖包含 div 中的文本？

> ID：11352460
> 
> 赞同：0
> 
> 时间：2012-07-05T20:56:48.453
> 
> 标签：html, css

我很难让这个插入框阴影（#shadow-overlay）覆盖#text-container中的文本。我已经完成了我的研究并尝试将 z-index 与 position:relative/absolute 一起使用，甚至制作一个单独的 div 并将其用作叠加层。我仍然无法让它工作！基本上，我希望#shadow-overlay 底部的插入框阴影覆盖#text-container 中的文本。你们能帮帮我吗？谢谢！

CSS：[http://pastebin.com/QdNhCc9H](http://pastebin.com/QdNhCc9H) HTML： http: [//pastebin.com/D3tYKXky](http://pastebin.com/D3tYKXky)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:52:25.457

1.  添加`z-index: -2`到`#content-box`
2.  添加`z-index: -1`到`#text-container`
3.  `z-index: 2`从中删除`#shadow-overlay`

您可能必须使用覆盖大小/定位来防止它覆盖滚动条。

# php - 如何在金字塔排名系统中获得挑战者

> ID：11352463
> 
> 赞同：5
> 
> 时间：2012-07-05T20:56:49.420
> 
> 标签：php, algorithm

所以我得到了一个基本上是金字塔的排名系统：

```
 01
    02 03
   04 05 06
  07 08 09 10
 11 12 13 14 15
16 17 18 19 20 21 
```

现在每个人都可以挑战同一排左边的每个人和上排右边的每个人。

因此，例如 18 可以挑战 13-17
基本上您可以在阶梯上挑战越低的位置。

关于如何解决这个问题的任何想法？在考虑这个问题时，我只是通过倒计时计算金字塔的层数来计算范围的一些非常复杂的计算，但我确信必须有一个简单的解决方案。

范围的更多示例：
02 - 01
03 - 02
04 - 02-03
05 - 03-04
06 - 04-05
07 - 04-06
08 - 05-07
11 - 07-10
17 - 12-16

顺便说一句，即使它看起来像家庭作业，我可以向你保证我已经离开学校好几年了。这实际上是进入我正在尝试为当地射箭俱乐部数字化的射箭梯系统:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T21:00:33.633

对于玩家`x`来说，很容易看出该范围内的上限值始终为`x - 1`。棘手的部分是找到较低的值。

首先请注意，您可以挑战的人数等于您上方一排的人数。通过查看下图，您可能会更容易理解为什么这是真的，其中每个椭圆恰好包含玩家 13 可以挑战的人之一（9、10、11、12）：

![显示与三角数的关系](../Images/986006e4f507f92eaa3c85a0fc0e1c80.png)

13号可以挑战的人有4个人，13号玩家上方的那一排有4个人。

* * *

所以我们需要找到 x 上面那一行的人数。请注意，x 以上的总人数是some的[三角形数](http://en.wikipedia.org/wiki/Triangular_number) 。的值是 x 上方行中的人数。`T(n)``n``n`

要查找三角数，您可能会发现此公式很有用：

```
T(n) = n * (n+1) / 2 
```

问题是找到最大的`n`这样`T(n) < x`。

您可以使用循环遍历 的所有可能值`n`，计算`T(n)`直到超过`x`。这很有效，很简单，而且几乎可以肯定对于您的目的来说足够快。

但是您也可以通过使用[上述二次方程的逆来](http://www.wolframalpha.com/input/?i=inverse+of+t%28n%29+%3D+n*%28n%2B1%29%2F2)更直接地到达那里：

![倒三角数公式](../Images/a499227e6bb8b2034019562acd8137bb.png)

唯一需要的调整是首先减去`1`，`x`因为我们希望三角形数严格小于`x`。如果没有这种调整，它将给出精确三角数的*当前*行，而不是上面的行。

使用这个公式并将其转换为 PHP，我们可以直接得到任何结果`x`：

```
$n = floor((sqrt(1 + 8 * ($x - 1)) - 1) / 2);
$lower = $x - $n;
$upper = $x - 1; 
```

结果：

```
2：1 - 1
3：2 - 2
4：2 - 3
5：3 - 4
6：4 - 5
7：4 - 6
8：5 - 7
9：6 - 8
10：7 - 9
11：7 - 10
12：8 - 11
13：9 - 12
14:10 - 13
15：11 - 14
16：11 - 15
17：12 - 16
18:13 - 17
19:14 - 18
20：15 - 19
21:16 - 20

```

在线查看它：[ideone](http://ideone.com/rJ2RJ)

# .net - 更改 .NET 应用程序设置而不重新编译

> ID：11352465
> 
> 赞同：6
> 
> 时间：2012-07-05T20:57:00.217
> 
> 标签：.net, application-settings

我有一个引用另一个程序集（类库）的 Windows 服务。在另一个程序集中，我使用应用程序设置来存储一些值。当我将所有必需的文件复制到服务器时，我可以在**AssemblyName.dll.config**文件中看到这些设置。

但是，当我更改此配置文件中的设置并重新启动服务时，更改无效。即使我卸载/重新安装服务，它仍然会在运行时返回旧值。

配置文件：

```
 <setting name="RecordLimit" serializeAs="String">
     <value>300</value>
   </setting> 
```

代码：

```
if (recordCount > Settings.Default.RecordLimit) //always 300 
```

因此，即使我将配置文件中的值更改为 400 并重新启动甚至重新安装服务，该值始终为 300，这让我认为该值存储在编译代码中并从编译代码返回。

我做错了什么，对应用程序设置的更改是否总是需要重新编译和重新安装（我知道我可以使用`Save()`方法从代码中更改设置，但这是一个 Windows 服务，所以使用这种方法似乎没有感觉）？

如果存储在配置文件中的这些设置无效并且设置存储在编译代码中，我可以安全地删除这些配置文件吗？

如果在不重新编译的情况下无法更改这些设置，我必须存储哪些其他选项可以在不重新编译的情况下更改？

编辑：我刚刚删除了**AssemblyName.dll.config**文件，代码返回 300，因此配置文件显然无关紧要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:29:57.690

据我所知，配置文件是如何工作的，它必须在 EXE 级别：appname.exe.config 用于服务/应用程序，web.config 用于网站/服务。

[请参阅Can有人提供快速 App.config/Web.config 教程](https://stackoverflow.com/questions/1188681/can-someone-provide-a-quick-app-config-web-config-tutorial)中的问题/答案？以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:24:17.643

引用 DLL 的 exe 可以在自己的配置中操作配置设置吗？

您应该尝试将设置添加到 exe.config 作为测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:28:49.657

我认为实际使用的 .config.dll 文件可能位于**C:\Users\Username\AppData**中的某个位置（在 Win7 中）。尝试在该文件夹中搜索 AssemblyName.dll，然后四处寻找应该可以找到它。

# plsql - 如何在 PL/SQL 中向电子邮件动态添加内容？

> ID：11352468
> 
> 赞同：1
> 
> 时间：2012-07-05T20:57:07.313
> 
> 标签：plsql, cursor, oracle-apex

我正在使用 Oracle apex 并尝试使用自动电子邮件进行练习。理想情况下，场景将是这样的：用户可以通过他的愿望清单向朋友“推荐”游戏。用户通过复选框选择他们想要推荐的游戏，然后选择朋友和电子邮件内容。我为此准备的代码如下：

```
DECLARE
content VARCHAR2(4000) := :P4_EMAIL ||  'Here are the game(s):';
game VARCHAR2(100);
i    NUMBER := 1;

/*Declare the cursor and it's query */
cursor CURSOR IS
    SELECT name
    from gs_games
    where game_id = APEX_APPLICATION.G_F01(i)
    FOR UPDATE;

BEGIN
FOR i in 1..APEX_APPLICATION.G_F01.count
LOOP
OPEN cursor;
FETCH cursor INTO game;
CLOSE cursor;
END LOOP;
htmldb_mail.Send(p_to   => :P4_FRIENDS,
                 p_from => 'gametracker@gametracker.com',
                 p_subj => 'Game recommendations from ' || :F56_USER_NAME,
                 p_body => content || ' ' || game);
END; 
```

这仅部分有效。对于一个单一的选择，每个人都可以完美地工作，但是一旦用户选择了多个游戏，那么电子邮件只包含第一个选中的游戏的名称，而不是应该包含的每个游戏。我意识到这与我设置光标的方式有关，但我不完全确定如何在保持 for 循环处于活动状态的同时使用它。有没有人有任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:18:45.703

最直接的问题是，每次从游标中获取下一行到本地变量`game`时，都会覆盖该变量的先前值。从游标中获取每一行后，`game`将具有您处理的最后一行的值。

假设您希望您的电子邮件包含以逗号分隔的游戏名称列表，您可以执行类似的操作

```
-- You probably want to create this function inside of a package that provides other methods
-- for interacting with games
CREATE OR REPLACE FUNCTION get_game_name( p_game_id IN gs_games.game_id%type )
  RETURN gs_games.name%type
IS
  l_name gs_games.name%type;
BEGIN
  SELECT name
    INTO l_name
    FROM gs_games
   WHERE game_id = p_game_id;

  RETURN l_name;
END get_game_name;

DECLARE
  l_content   VARCHAR2(4000) := :P4_EMAIL ||  'Here are the game(s):';
  l_game_list VARCHAR2(100);
BEGIN
  FOR i in 1..APEX_APPLICATION.G_F01.count
  LOOP 
    l_game_list := l_game_list || ', ' || get_game_name( APEX_APPLICATION.G_F01(i) );
  END LOOP;
  l_game_list := LTRIM( ', ' );

  apex_mail.send( p_to   => :P4_FRIENDS,
                  p_from => 'gametracker@gametracker.com',
                  p_subj => 'Game recommendations from ' || :F56_USER_NAME,
                  p_body => l_content || ' ' || l_game_list);
END; 
```

关于风格的一些注意事项

*   命名游标`CURSOR`是有问题的，应该不惜一切代价避免。如果你确实需要声明一个游标，你真的应该给它一个有意义的名字。
*   局部变量的命名通常应该与表中的列名区分开来（在我的例子中，我使用`l_`局部变量的`p_`前缀和参数的前缀，尽管有许多不同的有效约定。这在PL/SQL 因为 SQL 语句中的标识符首先使用表中列的名称然后使用局部变量来解析。这使得在您打算使用局部变量时无意中编写使用列的代码太容易了，如果你没有一些约定来明确你正在使用哪个。
*   您不想使用游标选择单行数据。如果您有一个知道应该准确返回 1 行的查询，请使用`SELECT INTO`.
*   我创建了一个单独的函数来获取`name`特定的`game_id`，因为它可以最大限度地重用——可能还有很多其他地方需要做类似的事情，所以你想编写一次代码并多次使用它。将 in 放入匿名 PL/SQL 块中的循环是完全合法的`SELECT INTO`，最好将该代码分解为函数。
*   假设您使用的是最新版本的 APEX，您应该使用该`apex_mail`软件包而不是旧`htmldb_mail`软件包。两者之间应该没有任何功能差异，但 HTML DB 是许多版本之前 Oracle APEX 的旧名称，因此逐步淘汰旧包名称的使用是个好主意。

# html - 在 Ruby on Rails 项目中加载字体需要太多时间

> ID：11352474
> 
> 赞同：5
> 
> 时间：2012-07-05T20:57:39.217
> 
> 标签：html, css, ruby-on-rails-3, fonts

我在一个 Rails 项目中，我正在使用`/assets/fonts`文件夹中的两种字体。

```
@font-face {
  font-family: FuturaStd-Light;
  src: url("/assets/fonts/FuturaStd-Light.otf");
}

@font-face {
  font-family: HelveticaNeue;
  src: url("/assets/fonts//HelveticaNeue.dfont");
} 
```

字体是非常大的文件（尤其是第二个），加载它们需要很长时间。在每一页中，文本都出现在其他所有内容之后。

有没有更好的方法来加载字体？有没有办法缓存它们？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:14:31.550

@font-face 是一种很棒的技术，但是大字体文件肯定会减慢您的网站速度。您可以使用许多技术来解决这个问题：

*   使用字体托管服务，如[google fonts](http://www.google.com/webfonts/)或[typekit](http://typekit.com/)
*   在 CDN 上托管您的字体文件
*   [使用诸如fontsquirrel 之](http://fontsquirrel.com/)类的服务优化您的字体文件

`SCRIPT`需要特别注意的一件事是，如果您的样式表之前有一个元素，IE 将阻止整个页面的呈现。因此，请确保您的所有样式表链接都位于您正在加载的任何 javascript 文件之上。

进一步阅读：

*   [Web 字体性能：权衡@font-face 选项和替代方案](http://www.artzstudio.com/2012/02/web-font-performance-weighing-fontface-options-and-alternatives/)
*   [@font-face 和性能](http://www.stevesouders.com/blog/2009/10/13/font-face-and-performance/)
*   [与 FOUT 战斗](http://paulirish.com/2009/fighting-the-font-face-fout/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T21:58:56.430

我同意 Scott 的观点，@font-face 可能会减慢您的网站速度，因此根据您的目标，您可能希望使用 google 字体、typekit 或其他在线字体提供商。对于我目前正在从事的项目，我选择了谷歌字体。您所要做的就是将代码段 google web fonts 添加到您的 applications.html.erb 中：

```
<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic' rel='stylesheet' type='text/css'> 
```

然后将其添加到您的 css 文件中：

```
h1 {
  font-family: "PT Sans", Arial, Helvetica, sans-serif;
} 
```

# asp.net - Asp.net mvc 保存一对多并在提交时传递 master

> ID：11352475
> 
> 赞同：1
> 
> 时间：2012-07-05T20:57:40.003
> 
> 标签：asp.net, asp.net-mvc, nhibernate, razor, one-to-many

我在 asp.net mvc 中保存 master 的详细信息时遇到问题。

作为参考，我正在使用 nhibernate。

我在 Store 和 Employee 实体之间有一对多的关系。我分两步保存主文件和细节。您首先创建商店，保存它，然后创建员工。

这是两个类：

```
public class Store
{
    public Store()
    {
        Employees = new List<Employee>();
    }

    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual IList<Employee> Employees { get; set; }
}

public class Employee
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual Store Store { get; set; }
} 
```

因此，要创建商店，我在商店的控制器和视图中有以下代码：

```
public virtual ActionResult Create()
{
    var model = new StoreModel();

    return View(model);
}

[HttpPost]
public ActionResult Create(StoreModel model)
{
    if (ModelState.IsValid)
    {
        Store entity = new Store(model);

        Repository<Store> repository = new Repository<Store>();
        repository.Create(entity);
        return RedirectToAction("Index");
    }

    return View(model);
}

@model StoreModel
@{
    ViewBag.Title = "Create store";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>
    Create store
</h2>
@Html.ValidationSummary(true)
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(store => store.Name)
    </div>
    <div>
        @Html.TextBoxFor(store => store.Name)
        @Html.ValidationMessageFor(store => store.Name)
    </div>
    <p>
        <input type="submit" value="Create"/>
    </p>
}
<div>
    @Html.ActionLink("Back", "Index")
</div> 
```

这很好，但我的问题是当我试图拯救员工时，**商店总是 null**。因此，要创建员工，我在员工的控制器和视图中有以下代码：

```
public virtual ActionResult Create(int storeId)
{
    var model = new EmployeeModel();
    Repository<Store> repository = new Repository<Store>();
    model.Store = repository.Read(storeId);

    return View(model);
}

[HttpPost]
public ActionResult Create(EmployeeModel model) //Problem here, store is null in the model
{
    if (ModelState.IsValid)
    {
        Employee entity = new Employee(model);

        Repository<Employee> repository = new Repository<Employee>();
        repository.Create(entity);
        return RedirectToAction("Index");
    }

    return View(model);
}

@model EmployeeModel
@{
    ViewBag.Title = "Create employee";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>
    Create employee
</h2>
@Html.ValidationSummary(true)
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(employee => employee.Name)
    </div>
    <div>
        @Html.TextBoxFor(employee => employee.Name)
        @Html.ValidationMessageFor(employee => employee.Name)
    </div>
    <p>
        <input type="submit" value="Create"/>
    </p>
}
<div>
    @Html.ActionLink("Back", "Index")
</div> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:02:30.507

您没有在任何地方设置员工的商店财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:19:36.187

您没有在任何地方传递 storeId 。我建议您在“创建员工”表单中创建一个下拉列表，并用您的商店列表填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T21:40:24.263

我能够通过在 httppost 创建中添加 int storeId 并从数据库中读取存储并设置员工的存储来解决我的问题。

```
[HttpPost]
public ActionResult Create(EmployeeModel model, int storeId) //Problem here, store is null in the model
{
    if (ModelState.IsValid)
    {
        Repository<Store> storeRepository = new Repository<Store>();    
        Store store = storeRepository.Read(storeId);

        Employee employee = new Employee(model);
        employee.Store = store;

        Repository<Employee> employeeRepository = new Repository<Employee>();
        employeeRepository.Create(employee);
        return RedirectToAction("Index");
    }

    return View(model);
} 
```

并使用隐藏字段：

```
@model EmployeeModel
@{
    ViewBag.Title = "Create employee";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>
    Create employee
</h2>
@Html.ValidationSummary(true)
@using (Html.BeginForm())
{
    @Html.Hidden("storeId", Model.Store.Id)
    <div>
        @Html.LabelFor(employee => employee.Name)
    </div>
    <div>
        @Html.TextBoxFor(employee => employee.Name)
        @Html.ValidationMessageFor(employee => employee.Name)
    </div>
    <p>
        <input type="submit" value="Create"/>
    </p>
}
<div>
    @Html.ActionLink("Back", "Index")
</div> 
```

# objective-c - 如何同时运行两个循环？

> ID：11352476
> 
> 赞同：1
> 
> 时间：2012-07-05T20:57:39.823
> 
> 标签：objective-c, xcode, multithreading, scanf

我一直在使用 Objective C 和 Xcode 开发一个非常简单的文本游戏。它几乎完成了，但我遇到了一个问题，**scanf**方法停止循环并要求用户输入，而我需要计算机运行循环的其余部分，我想出的解决方案是同时运行两个 while 循环时间，一个是逻辑循环，另一个是用户输入循环。

我一直在做我的研究，看起来使用线程是要走的路，我只是还没有找到一个教程可以将它分解为Objective C中的n00b（我在java中很不错，我只是从未使用过线程）。如果有人可以解释它们或将我链接到一个非常分解的教程，那就太好了。或者，如果有人有其他想法，我对其他任何事情都持开放态度。

必要的代码（我遇到问题的scanf在线上有星号）：

```
 while(running != 0)
    {
        if(gameState == 1)
        {
            if(timeToGenerateNum == true)
            {
                while(randNumber < 10000000)
                {
                    randNumber = arc4random() % 100000000;
                }
                NSLog(@"%i", randNumber);
                timeToGenerateNum = false;
            }
            else 
            {
                while(time <= 2500)
                {
                    NSLog(@"Testing");
                    time++;
  ******************scanf("%i", &userNum);************************
                    if(userNum == randNumber)
                    {
                        score += time;
                        time = 0;
                        timeToGenerateNum = true;
                    }
                }
                NSLog(@"Game Over! Your score was %i!", score);
                running = 0;
            }
        }
        else if(gameState == 2)
        {
            NSLog(@"To play, simply type in the number that appears on the screen.");
            NSLog(@"But be careful, you only have a short amount of time before GAME OVER!");
            NSLog(@"The quicker you type in the number the more score you get!");
            NSLog(@"Are you ready to start, if so type '1' and press enter!");
            scanf("%i", &gameState);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:47:39.880

您将不得不学习一些关于 BSD（Unix、Linux）输入/输出的知识才能实现这一目标：将您对 scanf 的调用替换为您编写的非阻塞函数以从用户键盘获取输入。

这个函数应该立即返回用户输入的任何内容，或者如果她没有输入任何内容，则立即返回零字符数。

阅读 select(2) 系统调用，并记住键盘输入（标准输入）是第一个文件描述符，文件描述符为零。

# binary-tree - 在二叉树中查找循环

> ID：11352480
> 
> 赞同：7
> 
> 时间：2012-07-05T20:58:09.693
> 
> 标签：binary-tree

如何在二叉树中找到循环？我正在寻找一种解决方案，而不是将访问的节点标记为已访问或进行地址散列。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:45:00.987

假设您有一棵二叉树，但您不信任它并且您认为它可能是一个图，一般情况下将要求记住访问过的节点。从图中构造最小生成树在某种程度上是相同的算法，这意味着空间和时间复杂度将是一个问题。

另一种方法是考虑您保存在树中的数据。考虑您有许多哈希值，以便进行比较。

伪代码将测试这种情况：

1.  每个节点最多必须有 2 个子节点和 1 个父节点（最多 3 个连接）。超过 3 个连接 => 不是二叉树。
2.  父母不能是孩子。
3.  如果一个节点有两个子节点，则左子节点的值小于父节点，右子节点的值更大。因此，考虑到这一点，如果叶节点或内部节点具有更高级别的某个节点（如父节点的父节点）作为子节点，则您可以根据这些值确定循环。如果一个子节点是右节点，那么它的值必须大于它的父节点，但如果该子节点形成一个循环，则意味着他来自父节点的左侧或右侧。

    3.a. 因此，如果它来自左侧，那么它的值小于它的兄弟。所以 => 不是二叉树。另一部分的想法有些相同。

抛开测试不谈，您要测试的树是什么形式的？请记住，每个节点都有一个指向其父节点的指针。一个 this 指针指向*一个单亲*。因此，根据您树的格式，您可以从中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:29:22.983

如前所述：树（根据定义）不包含循环（循环）。

要测试您的有向图是否包含循环（对已添加到树中的节点的引用），您可以遍历树并将每个节点添加到访问列表（或者如果您更喜欢它的哈希）并检查每个新节点，如果它在列表中。大量用于图中循环检测的算法只需 google 搜索即可。

# c# - 使用列表中的代理

> ID：11352484
> 
> 赞同：-4
> 
> 时间：2012-07-05T20:58:28.297
> 
> 标签：c#

我正在尝试编写一个需要使用代理 3 次然后移动到列表中的下一个代理的程序，依此类推。用户将他们的代理列表输入到列表/文本文件中，程序将使用列表中的第一个，然后继续遍历列表，直到它到达末尾。

如何从列表中获取代理详细信息并使用 httpwebrequest 使用它们？如果我在代码中设置代理但不知道如何让它通过列表工作，我使用代理没有问题

基本上是这样的：用户将代理列表输入文本文件程序使用列表中的第一个代理 3 次然后移动到下一个。如此重复直到完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:07:29.040

我现在看到你的评论，所以试试这个：

```
foreach (string proxy in proxies) // proxies is the list entered by user
{
    // proxy is the proxy you must try for three times;
    bool proxy_works = test_proxy(); // test function you must write
    // if you need to find first working proxy and then stop
    // use next statements, on the contrary remove them 
    // and you'll travel the whole list
    if (proxy_works)
    {
        // do here what you need (save working proxy?!?)
        break;
    }
} 
```

如果您的用户输入以逗号分隔的代理（例如），您可以按如下方式构建代理：

```
string[] proxies = strProxy.Split(",".ToCharArray(), 
                                  StringSplitOptions.RemoveEmptyEntries); 
```

或者如果你想从文件中读取：

```
string[] proxies = File.ReadAllLines(file_path); 
```

如果每个代理都完成了，`host_name:port`你可以做

```
string vars = proxy.Split(':'.ToCharArray());
if (vars.Length == 2) 
{
    string MyProxyHostString = vars[0];
    int MyProxyPort = int.Parse(vars[1]); // Better if you use int.TryParse method
} 
```

# objective-c - 具有整数值的 NSDictionary

> ID：11352486
> 
> 赞同：22
> 
> 时间：2012-07-05T20:58:56.087
> 
> 标签：objective-c, int, nsdictionary

我正在做一个有怪物的游戏。每个都有一个统计数据列表，这些统计数据都将是整数。我可以将每个统计信息设置为它自己的变量，但我更愿意将它们保存在 NSDictionary 中，因为它们都是相关的。当我尝试更改每个统计数据的值时，我遇到了问题。

**是）我有的：**

```
-(id) init {
    self = [super init];
    if(self) {
        stats = [NSDictionary dictionaryWithObjectsAndKeys:
              @"Attack",  0,
              @"Defense", 0,
              @"Special Attack", 0,
              @"Special Defense", 0,
              @"HP", 0, nil];
    }
    return self;
} 
```

**我想做的事**

```
-(void) levelUp {
    self.level++;
    [self.stats objectForKey:@"Attack"] += (level * 5);
    [self.stats objectForKey:@"Defense"] += (level * 5);
    [self.stats objectForKey:@"Special Attack"] += (level * 5);
    [self.stats objectForKey:@"Special Defense"] += (level * 5);
    [self.stats objectForKey:@"HP"] += (level * 5);
} 
```

**我得到的错误**

```
Arithmetic on pointer to interface 'id', which is not a constant size in non-fragile ABI 
```

所以对我来说很明显，我遇到问题的原因是我得到了一个从 objectForKey 返回的对象，而不是一个整数。所以我尝试对我得到的对象执行 intValue 方法，但这给了我另一个错误，特别是：

```
Assigning to 'readonly' return result of an objective-c message not allowed 
```

我不知道如何解决这个问题。有什么帮助吗？放弃将它们全部存储在一起并为每个统计数据使用一个 int 属性的想法会更好吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-05T21:10:39.493

1.  您只能在 Cocoa 集合类中存储对象，而不是原语，因此要存储数字，您需要使用`NSNumber`对象。
2.  `NSMutableDictionary`如果您想稍后更改内容，则需要使用。
3.  您的调用`dictionaryWithObjectsAndKeys`使键和值颠倒了。
4.  您的`stats`对象没有被保留，因此它将在下次运行循环时被释放（如果您使用手动引用计数）。

你要：

```
stats = [[NSMutableDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:0], @"Attack",
    [NSNumber numberWithInt:0], @"Defense",
    [NSNumber numberWithInt:0], @"Special Attack",
    [NSNumber numberWithInt:0], @"Special Defense",
    [NSNumber numberWithInt:0], @"HP",
    nil] retain]; 
```

为了更改值，您需要创建一个新`NSNumber`对象，因为它们是不可变的，例如：

```
NSNumber *num = [stats objectForKey:@"Attack"];
NSNumber *newNum = [NSNumber numberWithInt:[num intValue] + (level * 5)];
[stats setObject:newNum forKey:@"Attack"]; 
```

如果你问我，这一切都很乏味；必须有更简单的方法，例如创建一个 Objective-C 类来存储和操作这些东西怎么样？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T21:03:05.543

`NSDictionary``NSObject*`s商店 为了将它们与整数值一起使用，不幸的是，您需要使用类似`NSNumber`. 所以你的初始化看起来像：

```
-(id) init {
    self = [super init];
    if(self) {
        stats = [NSDictionary dictionaryWithObjectsAndKeys:
              @"Attack",  [NSNumber numberWithInt:0],
              @"Defense", [NSNumber numberWithInt:0],
              @"Special Attack", [NSNumber numberWithInt:0],
              @"Special Defense", [NSNumber numberWithInt:0],
              @"HP", [NSNumber numberWithInt:0], nil];
    }
    return self;
} 
```

然后你必须将它们作为数字检索：

```
NSNumber *atk = [self.stats objectForKey:@"Attack"];
int iAtk = [atk intValue];
[self.stats setObject:[NSNumber numberWithInt:iAtk] forKey:@"Attack"]; 
```

**编辑**

当然，为了做到这一点，`self.stats`需要`NSMutableDictionary`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-04T18:01:06.817

使用漂亮的语法糖来调整 @trojanfoe 对现代 Objective-C 的回答：

```
stats = [@{@"Attack"          : @0,
           @"Defense"         : @0,
           @"Special Attack"  : @0,
           @"Special Defense" : @0,
           @"HP"              : @0} mutableCopy]; 
```

并更新一个值：

```
stats[@"Attack"] = @([stats[@"Attack"] intValue] + (level * 5)); 
```

# ruby-on-rails - 使用多个“用户”模型获取 Paper_trail + Rails_admin + 设计

> ID：11352491
> 
> 赞同：1
> 
> 时间：2012-07-05T20:59:09.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, rails-admin, paper-trail-gem

我正在 Rails 3 中开发一个应用程序，目前我使用 Devise 作为登录名，Rails_admin 作为管理面板，Paper_trail 跟踪“用户”模型所做的所有更改......问题是我有两个用户模型，用户和管理员。所以在 rails_admin.rb (initiliazer) 中有一行代码来设置 Paper_trail 来跟踪历史：

```
 config.audit_with :paper_trail, User 
```

**有什么方法可以让用户和管理员都进行 paper_trail 监控更改，还是只能遵循一种模型？**我注意到，即使它是这样设置的，并且我以管理员身份在 Rails_admin 中进行了更改，但更改表明它是由与进行更改的管理员具有相同 ID 的用户进行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:25:13.933

处理此问题的最佳方法是安装 CanCan，删除我的管理员模型，并在当前情况下利用单个模型中的多个角色。

# ssrs-2008 - SSRS 2008 中的分组 - 过滤

> ID：11352493
> 
> 赞同：1
> 
> 时间：2012-07-05T20:59:22.340
> 
> 标签：ssrs-2008

我是 SSRS 的新手。我想按 customerid 对交易表进行分组，并计算每个 customerid 有多少交易。我能够做到这一点。

但是我想按那个计数排序，和/或按那个计数过滤。你是怎么做到的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T20:23:49.013

要对行组设置排序和过滤，请右键单击行组。

您可以在此处访问组排序和过滤属性。它们都应该允许您根据计数列的名称设置规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:08:26.063

# 选项1

如果您不需要在报告中显示事务，则应在查询中的数据库级别执行聚合，而不是通过 SSRS。您将获得以下好处：

1.  更快的渲染。
    *   您将通过网络发送更少的数据。
    *   SSRS 引擎要处理的数据会更少，因此可以更快地执行任何排序。
2.  `ORDER BY`通过将最常见/预期的值放在基础查询的子句中， 您的数据集可以“预先排序” 。
    *   从而也为任何渲染提供了速度提升。
3.  任何过滤器都可以直接应用于查询返回的聚合数据，而无需尝试在 SSRS 中执行复杂的表达式。
    *   这也将在渲染时提高性能。
4.  您可以有一个“过滤器”参数，可以在`HAVING`聚合查询的子句中使用
    *   同样，由于网络上的数据减少和要处理的数据，性能得到了提升。
    *   为您的报告提供一定程度的交互性，而不是尝试预先定义用户口味并在表达式或“最佳猜测”上设置过滤条件。

## 例子

```
-- Will filter out any customers who have 2 or fewer transactions
DECLARE @Filter AS int = 2
;

SELECT 
    CustomerId
    ,COUNT(TransactionId)

FROM
    Transactions

GROUP BY
    CustomerId

HAVING
     COUNT(TransactionId) > @Filter 
```

* * *

# 选项 2

如果您仍需要显示交易，请在查询中添加一个附加列，该列执行`Count()`using`OVER`子句 and `PARTITION BY customerid`，如下所示：

```
COUNT(transactions) OVER (PARTITION BY customerid) AS CustomerTransactionCount 
```

假设一个非常简单的表结构，您最终会得到如下查询结构：

```
SELECT
    CustomerId
    ,TransactionId
    ,TransactionAttribute_1
    ,TransactionAttribute_2
    ,TransactionAttribute_3
    .
    .
    .
    ,TransactionAttribute_n
    ,COUNT(TransactionId) OVER (PARTITION BY CustomerId) AS CustomerTransactionCount

FROM
    Transactions 
```

您将能够`CustomerTransactionCount`在 SSRS 中的任何行/列组中用作过滤器和排序列。

### 这种方法的缺点

*   窗口函数，即`OVER (PARTITION BY...)`不能在`HAVING`子句中使用，因为没有`GROUP BY`使用子句。这意味着任何过滤都必须由 SSRS 执行。

### 解决方法选项

1.  我们采用上面的查询并围绕它包装一个 CTE。这将允许我们根据聚合结果进行过滤。
2.  将聚合放在派生表中。

### CTE 示例

```
--Filter variable
DECLARE @Filter AS int = 2
;

WITH    DataSet_CTE AS
        (
            -- Build the data set with transaction information and the aggregate column
            SELECT
                CustomerId
                ,TransactionId
                ,TransactionAttribute_1
                ,TransactionAttribute_2
                ,TransactionAttribute_3
                .
                .
                .
                ,TransactionAttribute_n
                ,COUNT(TransactionId) OVER (PARTITION BY CustomerId) AS CustomerTransationCount

            FROM
                Transactions
        )

-- Filter and return data       
SELECT  *
FROM    DataSet_CTE
WHERE   CustomerTransationCount > @Filter 
```

### 派生表示例

```
--Filter variable
DECLARE @Filter AS int = 2
;

SELECT
    *

FROM
    (
        -- Build the data set with transaction information and the aggregate column
        SELECT
            CustomerId
            ,TransactionId
            ,TransactionAttribute_1
            ,TransactionAttribute_2
            ,TransactionAttribute_3
            .
            .
            .
            ,TransactionAttribute_n
            ,COUNT(TransactionId) OVER (PARTITION BY CustomerId) AS CustomerTransationCount

        FROM
            Transactions
    ) AS DataSet

WHERE
    DataSet.CustomerTransationCount > @Filter 
```

# jquery - iOS中文本字段之间的自动制表符

> ID：11352494
> 
> 赞同：1
> 
> 时间：2012-07-05T20:59:23.227
> 
> 标签：jquery, ios, forms

每当按下一个键时，我都会尝试自动标记文本字段（因此每个输入中只有一个字母）。

我已将以下内容附加到`keyup`输入的事件中：

```
var next = $(e.target).next();
while(next.length && !next.is('input')) next = next.next();
next.focus(); 
```

在浏览器中，它会查找下一个输入（或表单的末尾）并将焦点移至它。完美运行。

然而，在 iOS 设备上，它看起来像是在`next`输入获得所有焦点样式的意义上工作，但是键盘消失了，您必须触摸输入才能将其取回。

我该如何解决这个问题？

**编辑**：响应对自动标签的负面反馈。让我重新表述一下这个问题：

我正在为客户构建一个非常简单的、特定于 iPad 的琐事游戏。回答问题，点击下一个，回答问题，点击下一个，类型的东西。我们有许多问题格式：多项选择、拼字游戏风格重新排列字母，以及......“命运之轮”-ish 填写单词问题。

我通过有 n 个输入来表示单词中的字母来做到这一点，并且必须制表符（在 iPad 上点击下一个）每个字母都很痛苦。

我该如何着手为 iPad 构建这种问题格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T03:56:07.340

您不能使用 JavaScript 在 iOS 中强制触发键盘。虽然您可以轻松地将焦点设置在某个字段上，但键盘只会在用户发起的交互（点击）时出现。

（我也同意在大多数情况下，从用户体验的角度来看，自动选项卡是一个坏主意。）

编辑：关于命运之轮，您可以简单地构建自己的键盘。好处是您可以将已经选择的字母变灰。

# python - 获取某个用户的 last_login 时间？(django)

> ID：11352495
> 
> 赞同：2
> 
> 时间：2012-07-05T20:59:33.947
> 
> 标签：python, django, login

我有代码，`User.objects.values_list('last_login',flat= True)`它为我提供了所有用户的所有最后登录列表，但我不确定你是如何精简对特定用户所做的。我尝试了类似`User.objects.get(username='user1').values_list('last_login',flat= True)`但没有用的代码。我想我需要在第一组paren和values_list之间有一些东西，但我不确定我会放什么来让它们连接起来？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T21:02:54.260

尝试这个：

```
user = User.objects.get(username='user1')
last_login = user.last_login 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T06:52:56.523

当您查看 Django 文档时，它位于[返回新 QuerySets 的方法](https://docs.djangoproject.com/en/dev/ref/models/querysets/#methods-that-return-new-querysets)`values_list`下。因此，它不适用于您所做的单个对象。last_login是模型的字段，[因此](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.last_login)您可以通过以下方式直接访问它，`User`

```
User.objects.get(username='user1').last_login 
```

# oracle - 将 Oracle 系统参数设置回默认值

> ID：11352497
> 
> 赞同：0
> 
> 时间：2012-07-05T20:59:42.010
> 
> 标签：oracle, oracle11g, sqlplus

有问题的参数是`LOCAL_LISTENER`。以前运行时`SHOW PARAMETER LOCAL_LISTENER`没有返回值。前段时间，这已更改为某个值。我们现在遇到了侦听器问题，并希望将其恢复为默认值。我是使用相同的`ALTER SYSTEM`命令，但使用空白字符串还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:13:41.990

使用“ `alter system reset ...`”

# actionscript-3 - 在 InDesign Extension Builder 中截取页面的屏幕截图

> ID：11352498
> 
> 赞同：1
> 
> 时间：2012-07-05T20:59:44.037
> 
> 标签：actionscript-3, flash, flash-builder, adobe-indesign

对于我目前的任务，我需要使用 Adob​​e Creative Suit Extension Builder 和 Flash Builder 为 Adob​​e InDesign 进行扩展。我想对于那些了解 Extension Builder 和 InDesign API 的人来说，这更像是一个问题。

这个扩展的重点是加载一些数据并将一些数据发送到服务器。我需要对页面进行截图，然后以 jpg 格式将其发送到服务器。但是，没有（或至少我找不到任何）方法来创建位图（将其投射到对象上似乎是不可能的，因为这个对象只是对象，而不是 DisplayObjects）。

我设法默默地将页面导出为 jpeg，现在我正在考虑加载它们并发送，但这需要构建一个 AIR 应用程序来处理这一切，所以这会有点笨重。

所以总结一下这个问题，如何使用 CS Ext.Builder 在 InDesign 中截取页面上的所有元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:06:44.217

导出到 JPG 有什么问题？您可以选择导出页面或对象本身。

这是我在最近的一个项目中写的一个片段。希望能帮助到你。

```
public static function getFilePath():String {

var app:com.adobe.indesign.Application = InDesign.app;
var sel:* = app.selection, oldResolution:Number, oldColorSpace:JpegColorSpaceEnum, groupItems:Array = [], i:int = 0, n:int = sel.length;

if (!sel || !n )
        {
            Alert.show("Pas de selection !", "title", Alert.OK, Sprite(mx.core.Application.application));
            return "";
        }

        for ( i = 0 ; i < n ; i ++ )
        {
            groupItems [ groupItems.length ] = sel[i];
        }
        sel = ( sel.length > 1 )? app.activeDocument.groups.add ( sel ) : sel[0] ;

        var tempFolder:File = File.createTempDirectory();
        AppModel.getInstance().jpgFolder = tempFolder;
        var jpgFile:File = new File ();
        jpgFile.nativePath = tempFolder.nativePath + "/temp.jpg";

        oldResolution = app.jpegExportPreferences.exportResolution;
        app.jpegExportPreferences.exportResolution = 72;
        oldColorSpace = app.jpegExportPreferences.jpegColorSpace;
        app.jpegExportPreferences.jpegColorSpace = JpegColorSpaceEnum.GRAY;
        sel.exportFile ( ExportFormat.jpg, jpgFile );

        app.jpegExportPreferences.jpegColorSpace = oldColorSpace;
        app.jpegExportPreferences.exportResolution = oldResolution;

        if ( sel is Group )
        {
            sel.ungroup();
            app.select ( groupItems );
        }

        return jpgFile.nativePath;
    } 
```

# android - Android 应用程序：dovelop 升级

> ID：11352503
> 
> 赞同：0
> 
> 时间：2012-07-05T21:00:11.367
> 
> 标签：android, build, upgrade

我必须对现有的 Android 应用程序进行一些升级。这个应用程序不是我创建的，制造商提供给我的唯一源代码是：

*   **AndroidManifest.xml**文件
*   **源**目录
*   **资源**目录

这些文件和目录是否足以做到这一点？如果是这样，我如何在 Eclipse 中使用现有的 AndroidManifest.xml 文件以及 src 和 res 目录创建一个新的 android 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:03:59.650

在 Eclipse 中，单击“文件”->“新建 Android 项目”，为其命名并选择“从现有源中创建项目”按钮。然后选择源文件夹的位置。

请注意，如果此应用程序已在 Android Market/Google Play 上发布，则您还需要来自提供源代码的人的应用程序签名密钥库。您将需要密钥库来签署应用程序，否则您将无法在 Android Market 上更新它。

# xcode - 我收到“clang：错误：没有输入文件”

> ID：11352507
> 
> 赞同：38
> 
> 时间：2012-07-05T21:00:25.050
> 
> 标签：xcode, clang

我有一个文件，我删除并替换为另一个同名的文件。

尽管进行了清洁并多次尝试，但我仍然收到此错误：

> clang：错误：没有这样的文件或目录：'/Users/Andrew/App/Version 1.1/XCode/UIImage+Alpha.m' clang：错误：没有输入文件

因此，我无法继续使用我的应用程序。有任何想法吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-31T15:30:30.977

问题可能是因为您的项目 > 目标 > 构建阶段 > 编译源正在尝试编译一个不存在的文件。它可能在那里两次，如下面的屏幕截图。我的项目包含 UIImage+FFXtras，我什至可以删除它并重新添加它，这不会解决问题！

![缺少源文件](../Images/8f8830a34de16e3364a26ae63026a432.png)

我不确定项目是如何进入这种状态的——但我知道出了什么问题并不明显。突出显示红色问题之一并将其删除。

因此，请查看 clang 抱怨的文件的编译源阶段。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-28T21:03:19.247

遇到了类似的烦恼。

当您的项目引用已经存在的源代码树时，XCode 似乎不会生成正确的相对文件路径（相对路径不包含要编译的文件路径中的 .xcodeproj）。

但是有一个简单的解决方法：在项目资源管理器中选择一个或多个文件文件，然后查看文件检查器中的选项。其中之一标有“位置”；将其设置为绝对路径，然后重试。这为我解决了这个问题:)

[![在此处输入图像描述](../Images/a3570907a16d2b6c7b9024d9698f6e14.png)](https://i.stack.imgur.com/KLKiq.jpg)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-04T19:23:10.370

除了所有答案：

1.  删除派生数据
2.  重启
3.  删除派生数据
4.  干净的
5.  建造
6.  成功！

在我的情况下，只有这个序列对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-30T03:47:45.537

我用了很多可可豆荚，这件事发生在我身上。一个快速的“豆荚更新”为我整理了一些东西。-菲尔

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-06T07:30:35.313

如果您正在使用 vs 代码并遇到这个问题

```
clang: error: no such file or directory: 'filename'
clang: error: no input files 
```

运行文件时出错：

![运行文件时出错](../Images/6ac621768568f1e775a3f953d9aaef75.png)

**我通过在文件名***.extension*中删除空格或用*下划线*(_)替换空格来解决此问题

 **** * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T21:26:09.233

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-30T09:45:03.813

在您的 pod 文件中添加这一行并运行 pod install：

```
use_frameworks! 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-14T22:59:14.570

我在monodevelop中有这个错误。我只是去编辑>首选项并更改了程序文件的默认位置。它被设置为当你打开一个文件时他们给你的 monodevelop 默认值，而不是我改变它的文件夹。很可能，您需要调整存储文件的 xcode 的设置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-29T10:07:59.850

我在设置 React Native 项目时看到了这一点。使用以下方法解决了它：

```
sudo xcode-select --switch /Applications/Xcode.app 
```

[资源](https://github.com/react-native-maps/react-native-maps/issues/2290)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-12-13T16:37:23.460

从另一个站点引用的评论是问题已为我解决

嗯，这很奇怪。试试这个 - 在 Xcode 左侧的文件/文件夹列表中单击您的项目名称（在列表的最顶部）。查看右侧窗口左侧的“目标”部分。很可能，列出了两个，第二个是“测试”项目。右键单击该项目并选择“删除”。然后尝试再次运行该项目。请参阅下面的屏幕截图以获取视觉提示。

[![](../Images/5e2c1b29a9a09e6f1b1f1578dfe8287c.png)](https://i.stack.imgur.com/JARMc.png)***

# c# - 这个错误是什么意思？可访问性不一致：字段类型“DannyGeneral.OptionsFile”的可访问性低于字段“AnimationEditor.Form1”

> ID：11352508
> 
> 赞同：4
> 
> 时间：2012-07-05T21:00:28.810
> 
> 标签：c#

```
Inconsistent accessibility: field type 'DannyGeneral.OptionsFile' is less accessible than field 'AnimationEditor.Form1.setting_file' 
```

在Form1中我做了：

```
public  OptionsFile setting_file; 
```

错误在 setting_file 部分。

这是 Options_File 代码的开头：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Configuration;

namespace DannyGeneral
{
    class OptionsFile
    {

        string path_exe;
        string temp_settings_file;
        string temp_settings_dir;
        string Options_File;
        StreamWriter sw;
        StreamReader sr;

    public OptionsFile(string settings)
    {
        if (!File.Exists(settings))
        {
            if (!Directory.Exists(Path.GetDirectoryName(settings)))
            {
                Directory.CreateDirectory(Path.GetDirectoryName(settings));
            }
            File.Create(settings).Close();
        }
        path_exe = Path.GetDirectoryName(Application.LocalUserAppDataPath);
        Options_File = settings; 
    } 
```

在 Form1 的顶部：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using DannyGeneral;
using unfreez_wrapper;

namespace AnimationEditor
{
    public partial class Form1 : Form
    {
        private static string settings_dir;
        private static string settings_file;
        public  OptionsFile setting_file; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T21:04:04.953

`OptionsFile`如果要将类型用作`public`属性，则需要将类型本身设为公开。

[使用辅助功能级别的限制（C# 参考）](http://msdn.microsoft.com/en-us/library/cx03xt0t.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:04:13.170

将类标记`OptionsFile`为`public`或将字段标记`setting_File`为非公共（`internal`或`private`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T21:03:58.273

我有同样的问题，但我现在明白了，那些不明白的人应该是

```
 namespace DannyGeneral
{
    public class OptionsFile
    {

        string path_exe;
        string temp_settings_file;
        string temp_settings_dir;
        string Options_File;
        StreamWriter sw;
        StreamReader sr; 
```

# sql-server - 用 min 加入子查询

> ID：11352513
> 
> 赞同：0
> 
> 时间：2012-07-05T21:00:48.607
> 
> 标签：sql-server, sql-server-2005

我正在使用一个子查询来避免大约 100 个重复项（在大约 40k 条记录中）。显示重复的记录是因为它们在 h2.datecreated 中有 2 个日期是有正当理由的，所以我不能只清理数据。

我试图只得到最早的返回日期。第一个子查询（以“select distinct address_id”开头，带有 MIN）可以自己正常工作……不返回重复项。所以看起来左连接（或者只是简单的连接......我也试过了）不可能看到第二个 h2.datecreated，因为它甚至没有出现在子查询中。但是当我运行整个查询时，它会返回一些 ipc.mfgid 的 2 个值，一个是我想要的 h2.datecreated，另一个是我不想要的。

我知道这一定是非常简单的事情，或者是不可能的事情。看起来它真的应该工作！这是 MSSQL。谢谢！

```
select distinct ipc.mfgid as IPC, h2.datecreated,
case when ad.Address is null
then ad.buildingname end as Address, cast(trace.name as varchar) 
    + '-' + cast(trace.Number       as varchar) as ONT, 
 c.ACCOUNT_Id,
case when h.datecreated is not null then h.datecreated
     else  h2.datecreated end as Install
from equipmentjoin as ipc
left join historyjoin as h on ipc.id = h.EQUIPMENT_Id 
   and h.type like 'add'
left join circuitjoin as c on ipc.ADDRESS_Id = c.ADDRESS_Id 
           and c.GRADE_Code like '%hpna%'
join (select distinct address_id, equipment_id,  
     min(datecreated) as datecreated, comment
     from history where comment like 'MAC: 5%' group by equipment_id, address_id, comment)
          as h2 on c.address_id = h2.address_id
left join (select car.id, infport.name, carport.number, car.PCIRCUITGROUP_Id
     from circuit as car (NOLOCK)  
     join port as carport (NOLOCK) on car.id = carport.CIRCUIT_Id
      and carport.name like 'lead%'
      and car.GRADE_Id = 29 
     join circuit as inf (NOLOCK) on car.CCIRCUITGROUP_Id = inf.PCIRCUITGROUP_Id
     join port as infport (NOLOCK) on inf.id = infport.CIRCUIT_Id
     and infport.name like '%olt%' )
 as trace on c.ccircuitgroup_id = trace.pcircuitgroup_id
join addressjoin as ad (NOLOCK) on ipc.address_id = ad.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:08:41.337

仅获取最低行的典型方法是以下之一。您没有费心指定您使用的是什么版本的 SQL Server，您想对关系做什么，我没有兴趣尝试将其应用于您的复杂查询，因此我将向您展示一个抽象的简化不同的版本。

**SQL Server 2000**

```
SELECT x.grouping_column, x.min_column, x.other_columns ...
FROM dbo.foo AS x
INNER JOIN
(
  SELECT grouping_column, min_column = MIN(min_column)
  FROM dbo.foo GROUP BY grouping_column
) AS y  
ON x.grouping_column = y.grouping_column
AND x.min_column = y.min_column; 
```

**SQL Server 2005+**

```
;WITH x AS
(
   SELECT grouping_column, min_column, other_columns,
     rn = ROW_NUMBER() OVER (ORDER BY min_column)
   FROM dbo.foo
)
SELECT grouping_column, min_column, other_columns
FROM x
WHERE rn = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:50:58.370

这个子查询：

```
select distinct address_id, equipment_id,  
 min(datecreated) as datecreated, comment
 from history where comment like 'MAC: 5%' group by equipment_id, address_id, comment 
```

可能会返回多行，因为不能保证注释相同。

试试这个：

```
CROSS APPLY (
   SELECT TOP 1 H2.DateCreated, H2.Comment -- H2.Equipment_id wasn't used
   FROM History H2
   WHERE
      H2.Comment LIKE 'MAC: 5%'
      AND C.Address_ID = H2.Address_ID
   ORDER BY DateCreated
) H2 
```

`OUTER APPLY`如果您想要没有匹配的所需历史条目的行，请将其切换到。

# c# - 根据 int 值返回类类型

> ID：11352514
> 
> 赞同：3
> 
> 时间：2012-07-05T21:00:55.143
> 
> 标签：c#, generics

现在，我有一个这样的枚举：

```
public enum ReferenceType
{
    Language = 1,
    Period = 2,
    Genre = 3
} 
```

Language、Period 和 Genre 都是映射回我的数据库中的表的实体类。我还有模型类与实体类几乎 1 到 1 映射，然后我将其显示在视图中。

我也有这样的服务方法：

```
List<Model> Get<Model, Entity>()
        where Model : BaseModel
        where Entity : BaseEntity; 
```

我可以这样称呼它`Service.Get<LanguageModel, Language>()`，它会从我的数据库中返回表 Language 的每一行，并自动将它们转换为 LanguageModel，然后我将在我的视图中显示。

我想围绕该`Get()`方法创建一个包装器方法，您只需传入一个整数，它将调用我的`Get()`方法自动填充实体和模型类类型。唯一的问题是我很难理解这背后的实际实现。

伪代码将类似于：

1.  称呼`WrapperGet((int)ReferenceType.Genre)`
2.  Wrapper 方法解析实体类型 ( `Genre`) 和模型类型 ( `GenreModel`)
3.  使用已解析的实体和模型类型调用该`Get()`方法，这样就可以了`Get<GenreModel, Genre>()`
4.  返回结果

我将如何在 C# 中实际实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:08:52.000

我想不出一个完整的通用方式，我认为最简单的方法如下：

```
List<Model> WrapperGet(int type)
{
   switch (type)
   {
      case 1: return Get<LanguageModel, Language>();
      ....
   }
   return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:58:30.310

如果您想要强类型的结果，您将不得不放弃传入`int`或枚举的想法，并切换到`Get`直接调用或制作如下方法：

```
List<LanguageModel> GetLanguages() { return Get<LanguageModel, Language>(); } 
```

如果弱类型对你有用，那么我会选择 Saeed 的解决方案，但类型需要稍微改变才能工作。 `Model`在您的示例中是泛型类型，因此大概他的意思`List<BaseModel>`是返回类型。但是 a`List<LanguageModel>`不是 a `List<BaseModel>`！您可以通过使其返回`IEnumerable<BaseModel>`或更改`Get`为返回来解决此问题`List<BaseModel>`，或者之后使用`return new List<BaseModel>(Get<...`

# ruby - Tmux 不会在 Cucumber 场景中运行 - 产生错误“不是终端”

> ID：11352522
> 
> 赞同：2
> 
> 时间：2012-07-05T21:02:12.737
> 
> 标签：ruby, cucumber, tmux

我正在尝试运行一个运行 tmux 的 Ruby 程序来创建一个新会话。我正在用 Cucumber 测试这个。Ruby 程序本身可以正常工作并启动 tmux 会话，但是当从 Cucumber 场景运行代码时，我在 Cucumber 输出中的控制台上出现错误 - “不是终端”。

我知道这是由于 tmux 认为它没有在终端中运行，因为 isatty() 的返回值是 tmux 在启动时调用的。为什么在通过 Cucumber 运行时会发生这种情况，并且无论如何都在它周围，因为我真的希望能够用这些场景测试我的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:45:29.480

如果我使用 -d 选项启动 tmux 会话“分离”，我似乎可以解决这个问题。我宁愿留在 tmux 会话中，但这是下一个最佳解决方案，这意味着我可以通过工作测试继续我的开发！

我仍然不确定为什么在通过 Cucumber 运行“tmux new-session”时收到“不是终端”消息，但当我直接在命令行上使用 ruby​​ 脚本时却没有...

# python - Qt 和 PyQt 表格小部件增加行数

> ID：11352523
> 
> 赞同：1
> 
> 时间：2012-07-05T21:02:20.123
> 
> 标签：python, excel, qt, pyqt, rows

我正在学习 Python 并尝试编写一个程序来帮助我父亲。我希望它像excel一样，现在看起来很棒，但是我不知道如何使tableWidget中的行数（而不是列）在某人向下滚动时增长...我可以使用QtDesigner 还是我必须在 .py 文件中编写代码？任何帮助表示赞赏......对不起，如果我问愚蠢的问题，我真的是一个菜鸟......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:30:26.347

这是一个概念验证示例：

```
class Widget(QtGui.QWidget):
    def __init__(self):
        super(Widget, self).__init__()
        self.resize(600,400)

        layout = QtGui.QVBoxLayout(self)
        self.table = QtGui.QTableWidget(20,10)
        self.vBar = self.table.verticalScrollBar()
        self._vBar_lastVal = self.vBar.value()

        layout.addWidget(self.table)

        self.vBar.valueChanged.connect(self.scrollbarChanged)

    def scrollbarChanged(self, val):
        bar = self.vBar
        minVal, maxVal = bar.minimum(), bar.maximum()
        avg = (minVal+maxVal)/2
        rowCount = self.table.rowCount()

        # scrolling down
        if val > self._vBar_lastVal and val >= avg:
            self.table.insertRow(rowCount)

        # scrolling up
        elif val < self._vBar_lastVal:
            lastRow = rowCount-1
            empty = True
            for col in xrange(self.table.columnCount()):
                item = self.table.item(lastRow, col)
                if item and item.text():
                    empty=False
                    break
            if empty:
                self.table.removeRow(lastRow)

        self._vBar_lastVal = val 
```

您必须依靠表格小部件的垂直滚动条来发出有关其更改值的信息。所以我们将它的`valueChanged(int)`信号连接到我们的方法。

SLOT将`scrollbarChanged`接收滚动条的值。我在这里所做的是检查那一刻滚动条的最小值和最大值，并查看当前位置是否至少在中间。我们还检查当前滚动条值是否大于上次，因为我们只想在向下滚动时添加行。如果这些条件为真，那么我们插入一个新行。

将其缩小回来的行为涉及更多，因为我相信您需要检查最后一行以确保它是空的，并且只有在这样的情况下才将其删除。我的版本给你一个粗略的想法，但数学逻辑可能需要更多的工作。但它正在做的是检查最后一行中的每个项目，看看它是 None 还是空值。如果整行为空，则将其删除。因此，向上滚动时确实会获得减少效果。

希望这能给你一个起点！如果您需要任何部分的更详细说明，请随时询问代码。

# windows - 从 Inno Setup 一次安装多个应用程序

> ID：11352525
> 
> 赞同：10
> 
> 时间：2012-07-05T21:02:42.400
> 
> 标签：windows, installation, inno-setup

我对 Inno Setup 很陌生。我创建了一个相当简单的安装程序（一点也不难），它由一个应用程序组成。我想知道 Inno Setup 是否是创建安装程序的合适选择，该安装程序由多个应用程序组成，它们有自己的安装程序（据我所知，这些安装程序可以从 Inno Setup 运行）。是否有一个选项（可能与编写一些 Delphi 代码有关），可以让用户选择需要安装的应用程序（使用复选框或类似的东西）。我知道这不是一个真正的具体问题（尽管会很感激代码示例或完整答案），我只是不想花太多时间设置这个工具（尽管我喜欢 Inno Setup），如果它不满足我的需要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T10:42:30.660

Inno Setup 可以包含其他设置并在任何条件下提取/运行它们，包括依赖项（不存在）、用户提示和`[Components]`/ `[Tasks]`。

您可以使用普通`[Files]`条目将其提取到`{tmp}`并使用`[Run]`条目来运行它。

如果其他设置在 Inno 设置之外，请跳过该`[Files]`条目并使用`{src}\BlahSetup.exe`该`[Run]`条目。

# android - 应用程序在启动时死机

> ID：11352527
> 
> 赞同：3
> 
> 时间：2012-07-05T21:02:49.510
> 
> 标签：android

当我启动我的应用程序时，我开始`AsyncTask`进行一些下载。这可能需要一段时间。
当该线程正在下载数据时，我已经在监听位置更新。当我收到一个新的位置时，我开始一个新`AsyncTask`的做一些处理。但是，这个类依赖于下载的数据，所以它必须等到下载完成：

```
public void setLocation(Location location) throws IOException {
    Logger.log("New location - calculating nearest stations");
    if (!initialStationsRead) {
        Logger.log("Location update waiting for stations to be read");
        while (!initialStationsRead)
            ;
        Logger.log("Location update done waiting");
    }
    /* Do the processing */
} 
```

第一个线程设置`initialStationsRead`为`true`完成后，因此第二个线程可以在那之后接起。这一切都适用于我的测试设备。

但是，我收到了一封来自用户的电子邮件，告诉我该应用程序无法启动。加载屏幕出现，10-12 秒后消失，没有任何警告。他使用的是 HTC One S。

这是他发给我的logcat：

```
07-05 22:11:04.938: W/dalvikvm(19961): threadid=2: spin on suspend #2 threadid=11 (pcf=1)
07-05 22:11:04.938: I/dalvikvm(19961): "GC" daemon prio=5 tid=2 RUNNABLE
07-05 22:11:04.938: I/dalvikvm(19961):   | group="system" sCount=0 dsCount=0 obj=0x40d5c580 self=0x1669ae8
07-05 22:11:04.938: I/dalvikvm(19961):   | sysTid=19965 nice=0 sched=0/0 cgrp=default handle=21931384
07-05 22:11:04.938: I/dalvikvm(19961):   | schedstat=( 0 0 0 ) utm=2 stm=0 core=1
07-05 22:11:04.938: I/dalvikvm(19961):   at dalvik.system.NativeStart.run(Native Method)
07-05 22:11:04.938: I/dalvikvm(19961): "AsyncTask #3" prio=5 tid=11 RUNNABLE JIT
07-05 22:11:04.938: I/dalvikvm(19961):   | group="main" sCount=1 dsCount=0 obj=0x40f90588 self=0x1b35b00
07-05 22:11:04.938: I/dalvikvm(19961):   | sysTid=19991 nice=0 sched=0/0 cgrp=default handle=29193008
07-05 22:11:04.938: I/dalvikvm(19961):   | schedstat=( 0 0 0 ) utm=287 stm=1 core=1
07-05 22:11:04.938: I/dalvikvm(19961):   at com.busybits.treinverkeer.data.Data.setLocation(Data.java:~102)
07-05 22:11:04.938: I/dalvikvm(19961):   at com.busybits.treinverkeer.TreinVerkeer$SetLocationAsyncTask.doInBackground(TreinVerkeer.java:408)
07-05 22:11:04.938: I/dalvikvm(19961):   at com.busybits.treinverkeer.TreinVerkeer$SetLocationAsyncTask.doInBackground(TreinVerkeer.java:1)
07-05 22:11:04.938: I/dalvikvm(19961):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-05 22:11:04.938: I/dalvikvm(19961):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-05 22:11:04.938: I/dalvikvm(19961):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-05 22:11:04.938: I/dalvikvm(19961):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-05 22:11:04.938: I/dalvikvm(19961):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-05 22:11:04.938: I/dalvikvm(19961):   at java.lang.Thread.run(Thread.java:864)
07-05 22:11:05.629: D/WifiStateMachine(436): fetchRssiAndLinkSpeedNative RSSI = -32
07-05 22:11:05.689: W/dalvikvm(19961): threadid=2: spin on suspend #3 threadid=11 (pcf=1)
07-05 22:11:05.689: I/dalvikvm(19961): "GC" daemon prio=5 tid=2 RUNNABLE
07-05 22:11:05.689: I/dalvikvm(19961):   | group="system" sCount=0 dsCount=0 obj=0x40d5c580 self=0x1669ae8
07-05 22:11:05.689: I/dalvikvm(19961):   | sysTid=19965 nice=0 sched=0/0 cgrp=default handle=21931384
07-05 22:11:05.689: I/dalvikvm(19961):   | schedstat=( 0 0 0 ) utm=2 stm=0 core=1
07-05 22:11:05.689: I/dalvikvm(19961):   at dalvik.system.NativeStart.run(Native Method)
07-05 22:11:05.689: I/dalvikvm(19961): "AsyncTask #3" prio=5 tid=11 RUNNABLE JIT
07-05 22:11:05.689: I/dalvikvm(19961):   | group="main" sCount=1 dsCount=0 obj=0x40f90588 self=0x1b35b00
07-05 22:11:05.689: I/dalvikvm(19961):   | sysTid=19991 nice=0 sched=0/0 cgrp=default handle=29193008
07-05 22:11:05.689: I/dalvikvm(19961):   | schedstat=( 0 0 0 ) utm=362 stm=1 core=1
07-05 22:11:05.689: I/dalvikvm(19961):   at com.busybits.treinverkeer.data.Data.setLocation(Data.java:~102)
07-05 22:11:05.689: I/dalvikvm(19961):   at com.busybits.treinverkeer.TreinVerkeer$SetLocationAsyncTask.doInBackground(TreinVerkeer.java:408)
07-05 22:11:05.689: I/dalvikvm(19961):   at com.busybits.treinverkeer.TreinVerkeer$SetLocationAsyncTask.doInBackground(TreinVerkeer.java:1)
07-05 22:11:05.689: I/dalvikvm(19961):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-05 22:11:05.689: I/dalvikvm(19961):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-05 22:11:05.689: I/dalvikvm(19961):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-05 22:11:05.689: I/dalvikvm(19961):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-05 22:11:05.689: I/dalvikvm(19961):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-05 22:11:05.689: I/dalvikvm(19961):   at java.lang.Thread.run(Thread.java:864)
07-05 22:11:05.719: D/skia(1004): AndroidImageRef[ 0x2438190 ] releasePixel fail as lockCount=1
07-05 22:11:06.439: W/dalvikvm(19961): threadid=2: spin on suspend #4 threadid=11 (pcf=1)
07-05 22:11:06.439: I/dalvikvm(19961): "GC" daemon prio=5 tid=2 RUNNABLE
07-05 22:11:06.439: I/dalvikvm(19961):   | group="system" sCount=0 dsCount=0 obj=0x40d5c580 self=0x1669ae8
07-05 22:11:06.439: I/dalvikvm(19961):   | sysTid=19965 nice=0 sched=0/0 cgrp=default handle=21931384
07-05 22:11:06.439: I/dalvikvm(19961):   | schedstat=( 0 0 0 ) utm=2 stm=0 core=1
07-05 22:11:06.439: I/dalvikvm(19961):   at dalvik.system.NativeStart.run(Native Method)
07-05 22:11:06.439: I/dalvikvm(19961): "AsyncTask #3" prio=5 tid=11 RUNNABLE JIT
07-05 22:11:06.439: I/dalvikvm(19961):   | group="main" sCount=1 dsCount=0 obj=0x40f90588 self=0x1b35b00
07-05 22:11:06.439: I/dalvikvm(19961):   | sysTid=19991 nice=0 sched=0/0 cgrp=default handle=29193008
07-05 22:11:06.439: I/dalvikvm(19961):   | schedstat=( 0 0 0 ) utm=437 stm=1 core=1
07-05 22:11:06.439: I/dalvikvm(19961):   at com.busybits.treinverkeer.data.Data.setLocation(Data.java:~102)
07-05 22:11:06.439: I/dalvikvm(19961):   at com.busybits.treinverkeer.TreinVerkeer$SetLocationAsyncTask.doInBackground(TreinVerkeer.java:408)
07-05 22:11:06.439: I/dalvikvm(19961):   at com.busybits.treinverkeer.TreinVerkeer$SetLocationAsyncTask.doInBackground(TreinVerkeer.java:1)
07-05 22:11:06.439: I/dalvikvm(19961):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
07-05 22:11:06.439: I/dalvikvm(19961):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-05 22:11:06.439: I/dalvikvm(19961):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-05 22:11:06.439: I/dalvikvm(19961):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-05 22:11:06.439: I/dalvikvm(19961):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-05 22:11:06.439: I/dalvikvm(19961):   at java.lang.Thread.run(Thread.java:864) 
```

这重复x次。

现在，`Data.java:102`是 line `while(!initialStationsRead)`，所以那里一定有问题。

发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:34:58.017

> 第一个线程在完成后将 initialStationsRead 设置为 true，因此第二个线程可以在此之后继续。

繁忙的循环是邪恶的化身。如果我手边有圣水，你现在会很湿。:-)

（这也意味着我在远距离投掷圣水的目标非常好，可能不是这样）

Java 有很多线程同步选项，并且已经使用了十多年，从低级`wait()`到. 选择一个并使用它，摆脱繁忙的循环。`notify()``Object``java.util.concurrent``Semaphore`

或者，按照 Jan-Henk 的建议，根据标志在同一个线程上连续完成工作。

> 知道为什么这会发生在他的设备上而不是我的设备或我认识的其他人的设备上吗？

好吧，对于初学者来说，One S 是双核的，因此您的线程实际上可能同时运行（每个内核一个）。多核环境中更容易出现线程问题。

此外，Angelo 的回答——在我写这篇文章时发布——值得注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:34:11.353

我不知道这是否有帮助，但请记住，在`HoneyComb`( `Android 3.0`) 之后和`Donut`( ) 之前`Android 1.6`只有一个`AsyncTask`可以同时运行，因为`AsyncTask`使用线程池模式并且这些版本上的默认线程池大小为 1。如果你想要`AsyncTasks`你是使用在这些版本中同时运行`Android`，您可以使用该`executeOnExecutor(Executor, Params...)`标志使用此代码`THREAD_POOL_EXECUTOR`。有关更多信息，请参阅[上一篇文章](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible/4072832#4072832)的答案。看到拥有`HTC One S`运行设备的用户，这`Android 4.0`可能是您问题的根源。

# opencv - OpenCV霍夫最强线

> ID：11352528
> 
> 赞同：13
> 
> 时间：2012-07-05T21:02:53.037
> 
> 标签：opencv, hough-transform

OpenCV 中的 HoughLines 或 HoughLinesP 函数是否像 HoughCircles 函数一样以累加器顺序返回行列表？我想知道行的顺序。获取线的累加器值也非常方便，因此可以使用智能和自适应阈值而不是固定阈值。是否可以在不[自己重写 OpenCV](https://stackoverflow.com/questions/3265987/opencv-get-hough-accumulator-value)的情况下使用排序值或累加器值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-06T12:04:21.437

HoughTransform 按票数降序排列行。[你可以在这里](https://github.com/opencv/opencv/blob/master/modules/imgproc/src/hough.cpp#L166)看到代码

但是，当函数返回时，投票计数会丢失 - 获得它的唯一方法是修改 OpenCV。

好消息是这不是很复杂——我自己做过一次。将输出从`vector< Vec2f >`to更改为`vector< Vec3f >`并用投票计数填充最后一个参数只需几分钟。

此外，您必须修改 CvLinePolar 以添加第三个参数 - hough 在 中实现`C`，并且在其中有一个包装器`C++`，因此您必须同时修改实现和包装器。

修改的主要代码在这里

```
 for( i = 0; i < linesMax; i++ )
 {
        CvLinePolar line;
        int idx = sort_buf[i];
        int n = cvFloor(idx*scale) - 1;
        int r = idx - (n+1)*(numrho+2) - 1;
        line.rho = (r - (numrho - 1)*0.5f) * rho;
        line.angle = n * theta;

        // add this line, and a field voteCount to CvLinePolar
        // DO NOT FORGET TO MODIFY THE C++ WRAPPER
        line.voteCount = accum[idx];          

        cvSeqPush( lines, &line );
 } 
```

# android - 如何连接到 Android 中的在线数据库？

> ID：11352529
> 
> 赞同：0
> 
> 时间：2012-07-05T21:02:54.047
> 
> 标签：android, database, connection

真的有困难。Android 开发新手。如何连接到在线数据库？PHP，Java 还是？php 不工作，不知道如何处理 php 文件，它不会工作。如果我必须在 myphpadmin 上，我如何在服务器端输入？java是更好的方法吗？我想做一个登录屏幕并填充列表视图，向数据库添加多个数据等。无法弄清楚如何引用 myphpadmin 服务器上的实际数据库，我必须使用数据库的数据库密码和用户名还是引用数据库 html？

另外我如何检查我是否连接到数据库？

如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:33:01.947

查找有关 RESTful Web 服务的教程，您可以在 Java Servlet、PHP 或 ASP.NET 上实现它。这个想法是 Web 服务层充当您的应用程序和数据库之间的中间人。或者，如果您愿意，可以在 Web 服务和数据库之间添加另一层应用服务器逻辑。

一旦你正确实现了 Web 服务，你就可以在你认为合适的时候向你的应用程序公开 CRUD 方法。例如，创建数据库条目的 PUT 请求，检索它的 GET 请求，更新它的 POST 请求，以及删除它的 DELETE 请求。

当然，您需要添加某种身份验证逻辑，以限制或允许某些 Web 服务方法对某些授权用户。

# c++ - 对 GUI 库的建议？

> ID：11352538
> 
> 赞同：0
> 
> 时间：2012-07-05T21:03:12.753
> 
> 标签：c++, winforms, user-interface

我最近放弃了 C# 转而使用 C++，因为我更喜欢用它编写代码。

但是，我真的很想念 Windows 窗体以及创建窗口、按钮等是多么简单。

有没有类似于 .NET windows 窗体的好的 C++ 库？我可以使用 C++/CLI，但让我感到困扰的是 Visual Studio 中没有任何智能感知！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:05:05.750

你可能想看看[Qt](http://qt.nokia.com/products/)。如果您习惯于 Windows 窗体，我发现信号和插槽是一个相当简单的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T21:05:06.277

我会推荐你​​Qt。它有很好的文档，学习和使用非常简单。它也有巨大的能力。例如谷歌地球正在使用它:)[这里](http://qt-project.org/doc/qt-4.8/index.html)有更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T21:10:45.767

试试[wxWidgets](http://www.wxwidgets.org/)。它可以在*许多*不同的平台上编译，并且与 Qt 具有本机小部件相比，显着提高了可用性。

# windows - VC++ Metro 风格应用程序 Windows

> ID：11352542
> 
> 赞同：1
> 
> 时间：2012-07-05T21:03:33.173
> 
> 标签：windows, visual-c++, mfc, microsoft-metro

我有十年前的 MFC VC++ 桌面应用程序。该应用程序的美妙之处在于它适用于 Windows 2000 到 Windows 7，支持超过 15 种语言。它在winsocket之上具有IPC和SSL的多线程。

最近我读到 win 8 Metro 风格我们将无法运行现有的应用程序。这是否意味着 Windows 正在走向杀死 VC++ 或 MFC？

我是否有可能为所有 Windows 版本保留相同的代码库？我有用于 winsock 和 MFC 的替代 API 吗？必须用 HTML5 编写应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:43:43.323

> 最近我读到 win 8 Metro 风格我们将无法运行现有的应用程序

[我发现从Windows 运行时 (WinRT)](http://msdn.microsoft.com/library/windows/apps/br211369)的角度考虑事情更容易。基于 ARM 的 Windows 8 系统将**仅**支持 WinRT 程序。基于 x86 的 Windows 8 系统能够运行 WinRT 程序**和**现有的 Win32 程序。

暗示（或者可能是假设？）所有 Metro 风格的应用程序都是 WinRT 应用程序。当然，WinRT 旨在用于构建[Metro 风格的应用程序](http://msdn.microsoft.com/en-us/windows/apps/br229512.aspx)。我可以想象构建看起来像 Metro 应用程序的传统 Win32 应用程序 - 大方形活动磁贴、延伸到可见桌面左右两侧的应用程序表面等。我不确定这些是否真的会被视为“Metro 风格”应用程序如果它们的构建方式与 Metro 应用程序相同。

现有应用程序不会在基于 ARM 的 Windows 8 系统上运行，也不会在基于 x86 的 Windows 8 系统的非桌面部分中运行。它们**将**在基于 x86 的 Windows 系统的桌面部分中运行。这就是 Visual Studio 运行的地方，PhotoShop 可能会运行的地方，以及当前在 Windows 7 上运行的所有程序都将运行的地方。

> 这是否意味着 Windows 正在走向杀死 VC++ 或 MFC？

绝对不。MFC 应用程序可以在基于 x86 的系统上的 Windows 8 桌面环境中正常运行。MFC 应用程序**不会**在基于 ARM 的 Windows 8 系统上运行 - 但是有很多地方 MFC 应用程序不会运行。

至于 VC++，如果你愿意，你可以[使用 C++构建 Metro 风格的应用程序，你只需要遵循 Metro “风格”。](http://msdn.microsoft.com/library/windows/apps/hh700360)

> 我是否有可能为所有 Windows 版本保留相同的代码库？

这取决于您所说的“所有 Windows 版本”是什么意思。今天在基于 Windows 7 x86 的系统上运行的代码明天将在基于 Windows 8 x86 的系统上运行。如果那是您的目标市场，那么您就完成了，您无需更改代码。你唯一不会拥有的是一个活跃的瓷砖。但是您可以使用 Metro 风格 API 构建一个活动磁贴，并将其绑定到您的应用程序的逻辑中（如果有意义的话）。

如果您想支持基于 ARM 的 Windows 8 系统以及基于 x86 的系统，或者如果您希望您的所有程序在基于 x86 的系统上运行时都具有 Metro 的外观和感觉，那么您必须更改您的程序以使用 HTML /CSS 或 XAML 和 WinRT API，而不是 MFC 和 Win32 API。

或者，如果您想要两个世界，也许您甚至可以将程序的逻辑与 UI 分离，然后围绕该通用逻辑构建 MFC 皮肤和 Metro 皮肤

> 我有用于 winsock 和 MFC 的替代 API 吗？

对于网络，您可以使用 JavaScript、Visual Basic、C# 和 C++中的[许多类。](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452751.aspx)要构建 UI，您可以使用[HTML/CSS](http://msdn.microsoft.com/en-us/library/windows/apps/br229576.aspx)或使用[XAML](http://msdn.microsoft.com/en-us/library/windows/apps/hh465045.aspx)。

或者，如果符合您的需要，您可以继续使用 MFC。您可能永远不会构建具有[多文档界面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632591%28v=vs.85%29.aspx)和选项卡式 UI 的 Metro 风格应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:18:28.480

Metro Style 完全是关于用户体验和不同的 UI 布局。如果你想在你的应用程序中使用 Metro 风格的 UI，那么你需要在你的应用程序周围编写一个 WinRT 包装器来使用它。这并不意味着您的应用程序根本不会在 Windows 8 中运行，所有旧版应用程序仍在 Windows 8 中运行

# ruby-on-rails - 如何从字符串值中查找和提取日期

> ID：11352544
> 
> 赞同：2
> 
> 时间：2012-07-05T21:03:44.027
> 
> 标签：ruby-on-rails, ruby, regex

我有一个像这样的字符串红宝石。

```
mystring = "some string value with a date 02/02/2002" 
```

我想只提取日期以便将其存储在数据库中。我很确定我将需要某种正则表达式和搜索模式并从字符串中获取它的方法。

不确定这里需要做什么。

我在网上找到了这个正则表达式，它应该可以让你匹配那个日期格式。

```
reg = Regexp.new("^\d{1,2}\/\d{1,2}\/\d{4}$") 
```

我将如何使用它从字符串中解析出上述日期？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T21:11:16.630

有点酷：

```
1.9.2-p290 :005 > "some string value with a date 02/02/2002".to_date
=> Sat, 02 Feb 2002
1.9.2-p290 :013 > "some another string 05/07/2012 with stuff after".to_date
=> Thu, 05 Jul 2012 
```

然后用它做任何你想做的事情，因为它的类是日期。

（我知道这不是正则表达式，但我仍然认为它很酷；P）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-05T21:07:07.123

这个怎么样？

```
s = "some string value with a date 02/02/2002"
regex = /\d{1,2}\/\d{1,2}\/\d{4}/

s[regex] # => "02/02/2002" 
```

请注意，您不需要`^`and`$`在您的正则表达式中，因为您不会完全匹配字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-30T09:26:07.440

您可以尝试[https://rubygems.org/gems/dates_from_string](https://rubygems.org/gems/dates_from_string)：

```
text = "1988-1990 and 2000 and one more date 28.04.2015" 
dates_from_string = DatesFromString.new()
dates_from_string.get_structure(text)

#=> returns
#  [{:type=>:year, :value=>"1988", :distance=>0, :key_words=>[]},
#  {:type=>:year, :value=>"1990", :distance=>2, :key_words=>[]},
#  {:type=>:year, :value=>"2000", :distance=>5, :key_words=>[]},
#  {:type=>:year, :value=>"2015", :distance=>0, :key_words=>[]},
#  {:type=>:month, :value=>"04", :distance=>0, :key_words=>[]},
#  {:type=>:day, :value=>"28", :distance=>0, :key_words=>[]}] 
```

# jquery - 动画 div 以捕捉到最常见的元素

> ID：11352546
> 
> 赞同：1
> 
> 时间：2012-07-05T21:03:47.723
> 
> 标签：jquery

我有一系列元素，一个在下一个之下。每个元素的顶部都会有内容，但底部有一个空间，水平条将位于其上方。

页面上只有一个水平条。它需要“固定”到第一个元素的底部，直到该元素滚动出视图，此时它需要动画到当前视图元素的底部。

我已经模拟了一个小提琴，它显示了一些突出当前活动部分的逻辑，我对此很满意。默认情况下，这些部分是灰色的。当您向上和向下滚动时，最显眼的部分会变为红色，表示它是活动部分 - 效果很好。水平条为蓝色。

我正在努力使蓝色条在滚动时更改为动画到红色部分的底部。

[http://jsfiddle.net/9kW5N/2/](http://jsfiddle.net/9kW5N/2/)

我认为我在小提琴中的代码不起作用的主要原因是窗口滚动事件不是“实时”的，所以不知道当前活动的（红色）部分是什么。

谁能建议如何实现这一目标？

感谢大家的指点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:18:23.910

`changeSection()`所以我在你的函数中更改了一些代码。它有点工作，但绝对不是完美的。也许它会为您指明正确的方向？

还注释掉了动画onScroll。

```
function changeSection() {
    $('.active').removeClass('active');
    var currentlyActive = $('section').eq(closestArrPos);
    currentlyActive.addClass('active');
    $("#horiz").animate({"top" : currentlyActive[0].offsetTop + currentlyActive.height()}, "fast");
} 
```

**演示**：http: [//jsfiddle.net/9kW5N/5/](http://jsfiddle.net/9kW5N/5/)

还需要将 window.scroll 事件放在 setTimeOut 函数中，以便仅在滚动完成后才有效调用它，而不是在整个过程中调用多次。

# java - 如何检测文件已从 br.readline() 循环中删除

> ID：11352552
> 
> 赞同：0
> 
> 时间：2012-07-05T21:04:10.117
> 
> 标签：java, unix, io, bufferedreader, bufferedwriter

与此问题相关的 Java 仅在我正在阅读的情况下[写入已删除的文件。](https://stackoverflow.com/questions/9164925/java-writing-to-a-deleted-file)根据该评论，是的，Windows 阻止删除而 Unix 没有。并且在 unix 下从不抛出任何 IOException

该代码是穷人的`tail -f`，我有一个Java线程监视目录中的每个日志文件。我当前的问题是如果文件被删除，我不处理它。我需要中止并开始一个新线程或其他东西。我什至没有意识到这是一个问题，因为下面的代码在 Unix 下没有抛出异常

编码

```
BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(f)));
String line = null;

while (true) {
    try {
        line = br.readLine();
        // will return null if no lines added
    } catch (IOException e) {
        e.printStackTrace();
    }

    if (line == null) {
        // sleep if no new lines added to file
        Thread.sleep(1000);

    } else {
        // line is not null, process line
    }
} 
```

明天我会尝试在睡觉前添加这个检查，也许就足够了

```
if (!f.exists()) {
    // file gone, aborting this thread
    return;
} 
```

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:16:31.883

当您到达文件末尾时，无论它是否已被删除，BufferedReader 都应始终返回 null。它不是你应该检查的东西。

您能否向我们展示一些代码，因为很难阻止 BufferedReader 不返回空值？

这个节目

```
public class Main {

    public static void main(String... args) throws IOException {
        PrintWriter pw = new PrintWriter("file.txt");
        for (int i = 0; i < 1000; i++)
            pw.println("Hello World");
        pw.close();

        BufferedReader br = new BufferedReader(new FileReader("file.txt"));
        br.readLine();
        if (!new File("file.txt").delete())
            throw new AssertionError("Could not delete file.");
        while (br.readLine() != null) ;
        br.close();
        System.out.println("The end of file was reached.");
    }
} 
```

在窗口打印

```
AssertionError: Could not delete file. 
```

在 Linux 上打印

```
The end of file was reached. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:15:47.467

[您可以使用WatchService API](http://docs.oracle.com/javase/tutorial/essential/io/notification.html#overview)监视您的目录以进行更改并采取相应措施

# javascript - Controls not functioning in jquery modal dialog

> ID：11352554
> 
> 赞同：0
> 
> 时间：2012-07-05T21:04:16.530
> 
> 标签：javascript, jquery, asp.net, jquery-dialog, componentart

I'm using the jquery dialog in my ASP.net web app. Within it I have a user control with some link. When the dialog is in modal mode, the links are not selectable.

I tried the workaround in [this](https://stackoverflow.com/questions/8355595/asp-net-viewstate-validation-when-manipulating-dom) post, but it did not work for me.

**Update**
Added a post to ComponentArt forum [here](http://www.componentart.com/community/forums/p/64116/110604.aspx#110604). It seems to be related to the component art TabStrip control. A link in here isn't working correctly, but works outside of the tabstrip. See markup added below:

```
 var dlg = $("#dialog-form").dialog({
            autoOpen: false,
            height: 650,
            width: 700,
            modal: true,
            buttons: {

                close: function () {
                    $(this).dialog("close");
                }
            }
        });

        dlg.parent().appendTo($('form:first'));

<div id="dialog-form" title="">
<ComponentArt:tabstrip runat="server"
                          CssClass="TopGroup"
                          SiteMapXmlFile="../UserControls/AppDetailsTabData.xml"
                          DefaultItemLookId="DefaultTabLook"
                          DefaultSelectedItemLookId="SelectedTabLook"
                          DefaultDisabledItemLookId="DisabledTabLook"
                          DefaultGroupTabSpacing="1"
                          ImagesBaseUrl="../App_Themes/Default/Tab/images/"
                          MultiPageId="MultiPage1"
                          runat="server">
    <ItemLooks>
        <ComponentArt:ItemLook LookId="DefaultTabLook" CssClass="DefaultTab" HoverCssClass="DefaultTabHover" LabelPaddingLeft="10" LabelPaddingRight="10" LabelPaddingTop="5" LabelPaddingBottom="4" LeftIconUrl="tab_left_icon.gif" RightIconUrl="tab_right_icon.gif" HoverLeftIconUrl="hover_tab_left_icon.gif" HoverRightIconUrl="hover_tab_right_icon.gif" LeftIconWidth="3" LeftIconHeight="21" RightIconWidth="3" RightIconHeight="21" />
        <ComponentArt:ItemLook LookId="SelectedTabLook" CssClass="SelectedTab" LabelPaddingLeft="10" LabelPaddingRight="10" LabelPaddingTop="4" LabelPaddingBottom="4" LeftIconUrl="selected_tab_left_icon.gif" RightIconUrl="selected_tab_right_icon.gif" LeftIconWidth="3" LeftIconHeight="21" RightIconWidth="3" RightIconHeight="21" />
    </ItemLooks>

</ComponentArt:tabstrip>

<ComponentArt:MultiPage id="MultiPage1" CssClass="MultiPage" runat="server">
    <ComponentArt:PageView CssClass="PageContent" runat="server">

        <a href="www.google.com">click me</a>

    </ComponentArt:PageView>

    <ComponentArt:PageView CssClass="PageContent" runat="server">

    </ComponentArt:PageView>

</ComponentArt:MultiPage> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:25:11.443

got rid of the component art control and made my own which was much simpler and plays well with others.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:23:46.830

First of all your control's wrapper div `<div id="dialog-form" title="">` has no closing tag `</div>` but it could be a typo here, whatever check this again to make sure that the closing tag `</div>` is not missing.

But in this `dlg.parent().appendTo($('form:first'));` line you are trying to append the `parent container` of `<div id="dialog-form" title=""> which is dlg` not the `dlg` itself and I didn't see any parent wrapper of `<div id="dialog-form" title="">` in your code, so it could be a problem. In your code the following line means

```
`dlg.parent().appendTo($('form:first'));` 
```

Append the dlg's parent or append the parent div of this(`<div id="dialog-form" title="">`)div in to the first form of the page.

*If you want to append the `dlg` which refers to `<div id="dialog-form" title="">` in to the first form then you should write*

```
dlg.appendTo($('form:first')); 
```

or

```
$('form:first').append(dlg); 
```

or

```
$($('form')[0]).append(dlg); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T21:09:39.317

I guess this should be your answer. See the modal option description. It disables other elements and creates layer over hyperlinks or other form elements. This layer prevents links from working.

[http://jqueryui.com/demos/dialog/#modal-message](http://jqueryui.com/demos/dialog/#modal-message)

# jquery - 对 Coldfusion CFC 的 JQuery 搜索输入

> ID：11352561
> 
> 赞同：2
> 
> 时间：2012-07-05T21:04:52.227
> 
> 标签：jquery, search, cordova, coldfusion, cfc

我非常擅长使用 Coldfusion 并通过 URL 通过 Web 以表单形式传递变量。我还不能完全理解这些移动设备。我正在开发一个从我服务器上的数据库中提取的应用程序。我现在对服务器进行了 2 次调用，它们只是在没有任何“where”语句的情况下提取数据，并且它们工作得很好。我想添加一个搜索输入，该输入将包含用户在框中输入的内容，以便在我的 .cfc 上进行查询。不知道如何将该数据从电话表单传递到我服务器上的 cfc。

这是搜索按钮代码...

```
<form action="searchresult.html" method="post"  data-transition="none">
    <input type="search" name="mySearch" 
           id="mySearch" value="" data-mini="true" data-theme="b" />
</form> 
```

这是我在 XCode 中的脚本代码，应该在提交搜索时运行......（我不知道将任何变量放在哪里传递给 cfc。它可以在 URL 中传递吗？）

```
$("#resultPage").live("pageshow", function() {
    console.log("Getting remote list" + event.notification);
    $.mobile.showPageLoadingMsg();
    $.get("http://www.mywebsite.com/jquery/ryprad.cfc?
                      method=getsearch&returnformat=json", 
        {}, 
        function(res) {
            $.mobile.hidePageLoadingMsg();
            var s = "";
            for(var i=0; i<res.length; i++) {
                s+= "<li><a name=" + res[i].id + " + href='" 
                    + res[i].showlink + "'>" 
                    + res[i].date + "<br/>" + res[i].name + "<br/>" 
                    + res[i].description + "</a></li>";
            }

            $("#resultList").html(s);
            $("#resultList").listview("refresh");
            },
        "json"
    );
}); 
```

这是我在服务器上的cfc ...

```
component {
remote array function getsearch() {
    var q = new com.adobe.coldfusion.query();
        q.setDatasource("myDat");
        q.setSQL("
            select id1, Date, ShowLInk, IntName, description from RYPRadio 
            Where intName 
            LIKE '%#VARIABLE_FROM_PHONE_SEARCH#%' 
            order by date desc"
        );
        var data = q.execute().getResult();
        var result = [];
        for(var i=1; i<= data.recordCount; i++) {
            arrayAppend(
                result, 
                {
                    "id"=data.id1[i], 
                    "name"=data.IntName[i], 
                    "date"=dateformat(data.date[i], "mmmm d, yyyy"), 
                    "description"=data.description[i], 
                    "showlink"=data.ShowLInk[i]
                }
            );
        }
        return result;
    }
} 
```

我希望有人可以帮助解决这个问题。如果我能做到这一点，它将帮助我开发其他可以传递变量的东西！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T21:25:09.320

将搜索字符串添加到 jquery 调用中：

```
$.get("http://www.mywebsite.com/jquery/ryprad.cfc?method=getsearch&returnformat=json&searchName="+ $("#mySearch").val(), {}, function(res) { 
```

并在 ColdFusion 中添加一个参数：

```
remote array function getsearch( searchName ) { 
```

并相应地调整您的查询。你应该像这样使用一个参数：

```
q.setSQL("select id1, Date, ShowLInk, IntName, description from RYPRadio Where intName LIKE :searchParam order by date desc");
q.addParam( name="searchParam", value="%#searchName#%" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:22:05.900

你的意思是这样的：http: [//jacktraynor.blogspot.com.au/2012/02/jquery-autocomplete-using-coldfusion.html ?m=1](http://jacktraynor.blogspot.com.au/2012/02/jquery-autocomplete-using-coldfusion.html?m=1)

# java - 为什么java（maven）在编译期间关心文件时间戳？

> ID：11352562
> 
> 赞同：1
> 
> 时间：2012-07-05T21:04:58.873
> 
> 标签：java, maven, timestamp, javac, non-deterministic

我有一个项目，我已经工作了几天，我终于把它编译干净了。但是，同一远程分支的 git clone（在同一台机器上，在同一终端实例中编译）导致编译错误。另一台机器上的新克隆有同样的错误。我认为这是我的工作目录有一些额外的未跟踪文件的问题，但我删除了所有未跟踪的文件，以至于`diff`除了 .git 文件夹中包含的内容之外，这些目录是相同的。我什至检查了权限`tree`并将生成的文件与它们进行了比较`meld`——它们基本上是相同的，尽管一些源文件的执行权限略有不同。

该错误来自我在 maven-compiler-plugin 中排除的文件。这本质上*应该*意味着文件名永远不会传递给 javac，尽管我不知道它到底是如何工作的。我意识到如果编译器内部的代码出错，编译器显然会从某个地方获取文件。在我的计算机上可以运行的一个目录中，没有错误并且可以完美编译。在 repo 的其他克隆上（根据 ，它们再次相同`diff`），它在这个（排除的）文件上给出了一个错误。

额外的实验表明，在`git clone`远程分支、`cp -R`本地目录或本地目录的新分支`git clone`上，编译失败。但是，如果我使用该`--archive`选项执行 cp，则结果目录中的编译*成功*。我将其缩小到`--preserve=timestamps`标志（由于与`--archive`相同而启用`-dR --preserve=all`）。如果你没听清楚，我会再说一遍。

**当我正常复制目录时，它拒绝正确编译。只有当时间戳被保留时，它的行为才会与原始目录相同。**

我不明白这一点 - 为什么 java 编译器（或 maven）关心时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:45:27.127

问题最终是一个 Maven 编译器插件问题，再加上我试图做一些有点被误导的事情。

简而言之，编译器插件会传入您要编译的每个文件的列表以及指向源目录的链接。

文件列表非常好，因为这是 javac 知道要编译哪些东西的方式。但是，源目录也被传递的事实并不理想。当您将文件（或模式）放入 maven 编译器插件的`<excludes>`标签时，它将不再显示在传递给 javac 的文件列表中。但是，它很可能驻留在您的源目录中（maven 传递给 javac）。这意味着如果 javac 愿意，它仍然可以编译这些文件，即使您排除了它们。如果其中一个文件是另一个文件的依赖项，则可能会发生这种情况。这里的预期行为将是抛出一个错误 - 相反，它编译排除的文件并继续其愉快的方式。

在我的情况下（正如我在评论中解释的那样）我遇到了问题，因为一个被明确排除的文件（原因：maven 处理类路径的方式中的一个不相关的错误意味着 maven 无法正确编译文件）仍在尝试编译，即使我试图提供该类的预编译版本。

在这种情况下，如果我复制了没有保留时间戳的文件，它会认为源文件最近已被修改，并且该类的预编译版本已过时。因此 javac 试图编译排除的文件。只有当我保留了时间戳（这表明文件在几个月内没有被修改）时，javac 才意识到它应该使用提供的 .class 文件。

# log4net - 特定异常类型的 Log4Net appender 过滤器？

> ID：11352565
> 
> 赞同：7
> 
> 时间：2012-07-05T21:05:09.073
> 
> 标签：log4net

我正在尝试根据记录的异常类型过滤我的附加程序。这在 log4net 中可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T15:53:11.500

log4net 不直接支持这个。`IFilter`但是，您可以通过从接口或`FilterSkeleton`类（都在命名空间中）派生来轻松实现自己的过滤器`log4net.Filter`。

这样的事情应该可以解决问题：

```
public class ExceptionTypeFilter : FilterSkeleton
{
     override public FilterDecision Decide(LoggingEvent loggingEvent)
     { 
          var ex = loggingEvent.ExceptionObject as YourExceptionType;
          return (ex != null) ? FilterDecision.Accept : FilterDecision.Deny;         
     }
} 
```

然后，您可以像使用常规过滤器一样使用此过滤器。如需进一步参考，您可以查看标准 log4net 过滤器的源代码。

# eclipse - Eclipse RCP 应用程序的自定义构建

> ID：11352566
> 
> 赞同：0
> 
> 时间：2012-07-05T21:05:17.213
> 
> 标签：eclipse, ant, rcp

我想将以下内容集成到构建过程中： - 删除源中的所有 jrxml 文件。- 使用 proguard 配置文件处理插件 jar。

## 这是我迄今为止尝试过的

保留“Eclipse 导出向导”过程的其余部分。

我试图在插件的“构建”选项卡中启用“自定义构建”检查并得到“没有找到 build.xml 尝试禁用...”然后禁用它，再次尝试，复制 build.xml，并取消选中'自定义构建'并再次尝试，出现错误：

```
C:\workspace\.metadata\.plugins\org.eclipse.pde.core\temp\org.eclipse.pde.container.feature\compile.org.eclipse.pde.container.feature.xml:4: The following error occurred while executing this line:
C:\project\build.xml:245: The following error occurred while executing this line:
C:\project\build.xml:206: java.lang.reflect.InvocationTargetException
The following error occurred while executing this line:
C:\project\build.xml:245: The following error occurred while executing this line:
C:\project\build.xml:206: java.lang.reflect.InvocationTargetException 
```

尝试将 build.xml 作为 ant 运行，但我没有找到 java_home，设置了 java_home 并且 build.xml 工作，但 Eclipse 导出向导仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:05:37.330

我终于设法做到了，

1.  您需要取消选中 build.properties 的“构建”选项卡上的“自定义构建”。
2.  然后右击build.properties / PDE Tools / Create Ant Build 文件（这会生成一个build.xml）
3.  然后您可以检查“自定义构建”

这就是所有人......您将拥有一个可以修改的 build.xml（我可以添加 ant 标签以忽略 *.jrxml 并将 proguard 与 ant 集成）一个细节是您可能需要更改绝对值和${eclipse.home} ${java.home} 的相对路径

# c++ - 多线程应用程序没有输出

> ID：11352568
> 
> 赞同：4
> 
> 时间：2012-07-05T21:05:53.483
> 
> 标签：c++, multithreading, c++11

我正在做一个处理多线程运动的应用程序。假设我们有 10 辆汽车，并且有一个最多可容纳 5 辆汽车的停车场。如果一辆汽车不能停车，它会等到有空闲空间。
我正在使用 c++11 线程执行此操作：

```
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>

using namespace std;

int cars=0;
int max_cars=5;
mutex cars_mux;
condition_variable cars_cond;

bool pred()
{
    return cars< max_cars;
}

void task()
{
    unique_lock<mutex> lock(cars_mux);
    while(true)
    {
        cars_mux.lock();
        cars_cond.wait(lock,pred);
        cars++;
        cout << this_thread::get_id() << " has parked" << endl;
        cars_mux.unlock();
        this_thread::sleep_for(chrono::seconds(1));  // the cars is parked and waits some time before going away
        cars_mux.lock();
        cars--;
        cars_cond.notify_one();
        cars_mux.unlock();
    }
}

int main(int argc, char** argv)
{
    thread t[10];
    for(int i=0; i<10; i++)
        t[i]=thread(task);
    for(int i=0; i<10; i++)
        t[i].join();
    return 0;
} 
```

问题是没有输出，似乎所有线程都被阻塞等待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:50:51.660

这里有2个问题：

首先，当你构造你的`lock`对象时

```
unique_lock<mutex> lock(cars_mux); 
```

然后`cars_mux`被锁定。因此，尝试在同一个线程中再次锁定是一个错误（[未定义的行为](https://stackoverflow.com/questions/11173532/why-is-locking-a-stdmutex-twice-ub)`cars_mux`） ，这是您尝试在`while`循环内立即执行的操作

```
cars_mux.lock(); 
```

Secondly, there is no way for the threads to join since there is no way to exit the `while(true)` loop in `task` - cars will continue to park forever! You don't need the `while` loop at all.

If you remove the first `cars_mux.lock();`, the corresponding unlock attempt at the end of the `while` loop, and the `while` loop itself, you should get the desired behaviour.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T04:11:05.857

Fraser's answer is great, but when I looked at this I felt a working example would be nice.

I made some changes:

*   Personally, I like to use RAII to lock/unlock so that you don't forget to do so (even if it means extra scopes). In the past, I've also had race conditions that I couldn't figure out, and switching to the RAII approach has often made those disappear as well... It's just easier, so do it ;)

*   I like to see when the cars leave, so I add I/O for that too.

Here's the working code example for the stated problem. FYI, I use clang 3.1 with libc++:

```
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>
#include <chrono>

using namespace std;

int cars=0;
int max_cars=5;
mutex cars_mux;
condition_variable cars_cond;

bool pred()
{
    return cars < max_cars;
}

void task()
{
    {
        unique_lock<mutex> carlock(cars_mux);
        cars_cond.wait(carlock,pred);
        cars++;
            cout << "Thread " << this_thread::get_id() 
                 << " has parked. There are " << cars << " parked cars." << endl;
    }

    this_thread::sleep_for(chrono::seconds(1));

    {
        unique_lock<mutex> carlock(cars_mux);
        cars--;
        cout << "Thread " << this_thread::get_id() 
             << " has left. There are " << cars << " parked cars." << endl;
        cars_cond.notify_one();
    }
}

int main(int argc, char** argv)
{
    const int NumThreads = 10;
    thread t[NumThreads];
    for(int i=0; i<NumThreads; i++)
        t[i]=thread(task);
    for(int i=0; i<NumThreads; i++)
        t[i].join();
    return 0;
} 
```

Edit: Simplified code as per Rami Al Zuhouri's suggestion.

# view - PeopleSoft 提示表添加 eff_status 标准

> ID：11352580
> 
> 赞同：1
> 
> 时间：2012-07-05T21:07:18.680
> 
> 标签：view, prompt, peoplesoft

我正在使用基于 JOBCODE_TBL 记录的自定义提示表 (PS_AVZ_JD_JBCD_SRC)： SELECT a.jobcode , a.descr , a.eff_status , a.flsa_status ,a.job_family FROM ps_jobcode_tbl a WHERE 1=1 AND A.setid='GLOBL ' AND a.effdt = ( 从 ps_jobcode_tbl a_ed 中选择 MAX(a_ed.effdt) 其中 a_ed.jobcode = a.jobcode AND a_ed.effdt <= sysdate)

这应该返回活动和非活动的工作代码（我没有在视图中指定这个）。但是，当我单击提示按钮时，只返回活动的作业代码。SQL 跟踪显示以下 SQL 被触发：SELECT /*+ FIRST_ROWS */ JOBCODE, DESCR, EFF_STATUS FROM PS_AVZ_JD_JBCD_SRC WHERE EFF_STATUS<>'I' ORDER BY JOBCODE

eff_status 标准来自哪里？如果重要的话，提示在非关键字段上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:00:03.273

显然，EFF_STATUS 是一个“特殊”字段，组件处理器自动在提示上应用 eff_status（和 effdt）逻辑。为了解决这个问题，我用 STATUS 替换了 EFF_STATUS 字段，并且我的查找工作如我所愿。

# android - 谷歌云消息安全

> ID：11352583
> 
> 赞同：11
> 
> 时间：2012-07-05T21:07:42.240
> 
> 标签：android, security, android-c2dm, google-cloud-messaging

公司创建一个项目并收到一个发件人 ID。公司创建一个应用程序，输入其发件人 ID 并将该应用程序放置在商店中。

攻击者对应用程序进行反向工程并提取发送者 ID 和用于接收 GCM 注册 ID 的服务器接口。

攻击者创建自己的应用程序，烘焙公司的发件人 ID 和服务器注册界面，将应用程序放入商店。就 GCM 而言，攻击应用程序基本上模仿了 Company 的真实应用程序：它注册以接收来自 Company 的发件人 ID 的消息，然后将其 GCM 注册 ID 发送到 Company 的服务器，就像“真实”应用程序一样。

现在公司想要向其应用程序的所有实例广播一些信息。也许这是一个提醒，而不是可用的更新。有什么方法可以区分“攻击应用程序”（与真实应用程序一样注册）与公司应用程序的“真实”版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T05:48:06.643

我认为从您的情况来看，即使攻击者拥有注册 ID，攻击者也不可能向用户发送消息。发送他们需要进行身份验证（OAuth2）的消息的公司服务器首先通过谷歌帐户。因此，只有攻击者知道发送方的密码和注册 ID 才能发送用户。但是发送方的密码当然是永远不会发送给客户端的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:14:43.827

好吧，这甚至可以在攻击者应用程序的调试版本中工作，但他不能将他的应用程序放在商店中。GCM 标识的一部分是应用程序 ID，它需要在商店中是唯一的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T03:24:11.367

C2DM 也可能存在同样的问题，您可以通过它嗅探发件人的电子邮件地址，而不是 GCM 的项目 ID。

C2DM 或 GCM，不应该用于发送敏感的用户信息（即帐户名、私人信息等），它主要用于通知，真正的应用程序可以使用它来执行进一步的操作。

我看不出通知对“假/黑客”应用程序有多大用处，他们将如何处理“您有新消息”通知？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T21:33:36.850

GCM 注册 ID 由 Google 请求，从应用程序请求并提交到您的服务器。当使用不同应用程序（但发件人 ID 相同）的人创建 Regid 时，仍必须将其提交给服务器，并且您首先必须明确向该特定 regid 发送消息。

应用程序安装，无论是否合法，都永远不会收到未经授权的消息。（前提是您声明并使用了`C2D_MESSAGE`许可）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T03:11:55.323

实际上，谷歌让你为 GCM 注册一个服务器密钥，它可以让你将服务器 IP 列入白名单......所以你应该添加你的服务器 IP 并且你会很安全，因为只有你的服务器被允许使用该密钥发送消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-04T10:09:58.507

在这种情况下，GCM 是安全的。
在您在 GoogleApiConsole 中注册应用程序之前，您甚至无法在原始应用程序中使用您的发件人 ID。这意味着您在 GoogleApiConsole 中指向私钥指纹。够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-12T18:12:22.223

我建议您拥有自己的“临时服务器”，它使用 API 密钥（您所指的发件人 ID）。而不是将其嵌入应用程序本身。

# c++ - 如何在 C++ 中将常量映射指针初始化为空？

> ID：11352585
> 
> 赞同：1
> 
> 时间：2012-07-05T21:07:57.480
> 
> 标签：c++, pointers, map

简单的问题，我只想将地图初始化为空，而不是 nullptr。

```
 const std::map<std::string, std::string>* emptyDictionary; 
```

我试过

```
const std::map<std::string, std::string>* emptyDictionary = {"", ""}; 
```

但显然这是不对的。多谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:14:06.923

你根本忘了做任何地图——你只是做了一个指针！您可以使指针指向动态分配的映射：

```
 const std::map<std::string, std::string>* emptyDictionary
     = new std::map<std::string, std::string>; 
```

这张地图将是真正的空白。如果您添加初始化程序`{{"", ""}}`，您可能会这样做，那么您实际上并没有一个空映射，而是一个具有一个元素的映射，它将一个空字符串映射到一个空字符串。

请注意，您永远不能通过 const 指针修改您的地图，所以您为什么要这样做有点可疑。

另请注意，肆意的动态分配通常是一种糟糕的编程风格。几乎肯定有更好的方法来做任何你需要做的事情，或者，根据你的评论，你只是严重误解了一些东西：获取指针的最佳方法是获取现有对象的**地址：**

```
std::map<std::string, std::string> m;
foo(&m); // pass address of m as a pointer 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T21:14:38.700

```
const std::map<std::string, std::string>* emptyDictionary 
     = new std::map<std::string, std::string>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T21:22:24.527

map 的默认（空）构造函数将创建一个空地图[http://www.cplusplus.com/reference/stl/map/map/](http://www.cplusplus.com/reference/stl/map/map/)。只需编写即可在堆栈上声明具有自动分配的映射

```
std::map<std::string, std::string> emptyDictionary(); 
```

并使用 addres-off 运算符将其发送到您的函数

```
yourfunction(&emptyDictionary); 
```

但是，如果字典比创建它的实例的寿命更长，则需要动态分配它以避免调用其析构函数。

```
const std::map<std::string, std::string>* emptyDictionary = new std::map<std::string, std::string>(); 
```

然后你在调用你的函数时不需要地址运算符。

```
yourfunction(emptyDictionary); 
```

但是，解除分配的责任将由您承担。当您不再需要该对象时，您需要使用 delete 语句删除该对象。

```
delete emptyDictionary; 
```

# javascript - 我将变量错误地传递给函数并且看不到我的错误

> ID：11352586
> 
> 赞同：0
> 
> 时间：2012-07-05T21:08:09.893
> 
> 标签：javascript, function

代码可能看起来比它需要的更复杂我想将 i 传递给 balm 函数，但它返回 undefined 因为我做错了。
只是额外的信息：这是针对我正在编写的游戏的服务器。在控制台中运行节点。

```
for (i=30;i>=0;i--){
   setTimeout(function balm(i){
      this_sql ="UPDATE game_moblist SET hp = least(max_hp, hp +"+Math.round(i/2)+") WHERE id ="+mobid
      connection.query(this_sql, function(err, rows, fields) {if (err) err=null});
      console.log(this_sql)
      this_sql ="SELECT hp, max_hp FROM  game_moblist WHERE id ="+mobid;   //emite catch all update pointint to hp..
      connection.query(this_sql, function(err, rows, fields) {if (err) throw err;
      socket.emit ('updatemisc',handler,rows);//eval handler using args
      if (rows[0].hp==rows[0].max_hp){
         i=0;
         return i;
      }
      });
   },(31-i)*333);
} 
```

这是一个简化版本，只是展示了这个概念

```
for (i=3;i>=0;i--){
   setTimeout(function foo(i){
      console.log(foo)
   },1000*i); 
```

我希望在 1000 毫秒后出现以下输出“1” 在 2000 毫秒后出现“2” 在 3000 毫秒后出现“3” 编辑：当我在 setTimeout() 之外定义函数然后像这样调用它 setTimeout(balm(i) ……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:11:06.723

您不能使用`i`在回调函数外部声明的循环变量，并期望它在回调实际执行后具有正确的值 - 它将具有分配给它的最后一个值。

下面的代码显示了最简单（但不是最短）的解决方案：

```
function showNumber(n) {
    return function() {
        console.log(n);
    }
}

for (i = 3; i >= 0; i--) {
     setTimeout(showNumber(i), 1000 * i);
} 
```

换句话说，你调用一个函数（它的参数“绑定”到你的循环变量），然后*返回*另一个函数，它是由`setTimeout()`.

还有其他方法可以做到这一点，通常使用*即时调用函数表达式*，如@Xander 的答案所示，但上面的代码很好地演示了解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:12:23.907

`i`是`0`第一个回调执行并在其余调用中保持这种方式的时间。

您可以创建一个闭包来捕获`i`声明时的值：

```
for (i = 3; i >= 0; i--){
    function(x) {
        setTimeout(function foo(i){
            console.log(i)
        },1000 * x);
    })(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:14:14.200

变量不能在其声明中传递给函数。

```
 for (i=3; i>=0; i--) {
        fooLoop(i);
    }

    function fooLoop(iterator) {
        setTimeout(function () {
            console.log("value of i is" + iterator);
        }, 1000*iterator);
    } 
```

# android-ndk - 是否可以使用带有 cgo 和/或 SWIG 或类似工具的 NDK 在 Go 中构建 Android 游戏？

> ID：11352592
> 
> 赞同：6
> 
> 时间：2012-07-05T21:08:42.297
> 
> 标签：android-ndk, go, swig, cgo

是否可以使用 Go 来构建 Android 游戏？我不喜欢主题行中提到的技术。我知道[有些人](https://groups.google.com/forum/?fromgroups#!topic/golang-nuts/7j4s8VHkA9g)在 Go 中构建了一些 Android 程序，但他们可能是无头的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:38:21.770

不，现在不可能。Go 和 C 程序可以通过 cgo 进行互操作。但在这种情况下，Go 程序必须在将控制权传递给程序的基于 C 的部分之前启动并初始化其运行时。

在 Android 中使用 NDK 时，Dalvik 虚拟机通过 dlopen 调用您的 C 代码。因此 Go 运行时将没有机会进行自我初始化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T00:59:32.337

如果您想要非无头应用程序，我的建议是使用 cgo 作为 GUI。这听起来违反直觉，但如果 NDK 支持 C android gui 库，那么使用这些调用编写 GUI 可能是最简单的。当然，您不必在 C 中编写所有逻辑。您可以简单地为每个 GUI 调用编写 cgo 包装器，然后在 go 中编写 GUI，除了每个 gui 调用都将通过 cgo 进行转换。

# dynamic - 如何获取动态创建的选择列表组件的选定值

> ID：11352593
> 
> 赞同：0
> 
> 时间：2012-07-05T21:08:43.160
> 
> 标签：dynamic, controller, salesforce, apex-code, visualforce

我不确定这是否可能，但我试图在 VisualForce Apex 控制器类中获取动态创建的选择列表的值。

我正在使用下面的代码为特定对象（例如联系人）中的每个字段动态创建一个选择列表，但现在我不知道如何取回所选值。我尝试在构造函数中和单独的行（不在下面的代码示例中）设置每个值，但这似乎不起作用。

视觉力量页面：

```
<apex:dynamicComponent componentValue="{!contactPageBlockSection}" /> 
```

顶点控制器：

```
public Component.Apex.PageBlockSection GetContactPageBlockSection(string objectName)   
{
    Map<string, Schema.SObjectField> FieldMap;
    FieldMap = Schema.SObjectType.Contact.fields.getMap();
    Set<string> FieldSet = FieldMap.keySet();
    List<string> FieldList = new List<string>();
    FieldList.addAll(FieldSet);
    FieldList.sort();
    Component.Apex.PageBlockSection pbs = new Component.Apex.PageBlockSection(columns = 2);

    for (string fieldName : FieldList)
    {
        Component.Apex.PageBlockSectionItem pbsi = new Component.Apex.PageBlockSectionItem();
        Schema.DescribeFieldResult field = (FieldMap.get(fieldName)).getDescribe();

        if (field.isUpdateable() && field.IsAccessible())
        {
            Schema.DisplayType dt = field.getType();
            Component.Apex.OutputLabel lblText = new Component.Apex.OutputLabel(escape = false);
            lblText.value = field.getLabel();
            pbsi.childComponents.add(lblText);

            Component.Apex.SelectList selList = new Component.Apex.SelectList(id = field.getName(), multiselect = false, size = 1, style = 'width:200px;');

            if (dt == Schema.DisplayType.Integer || dt == Schema.DisplayType.Double || dt == Schema.DisplayType.Currency || dt == Schema.DisplayType.Percent)
            {
                AddSelectOption(selList, 'Keep highest value');
                AddSelectOption(selList, 'Keep lowest value');
                AddSelectOption(selList, 'Keep master value');
                pbsi.childComponents.add(selList);
                pbs.childComponents.add(pbsi);
            }
        }
    }

    return pbs;
}

private void AddSelectOption(Component.Apex.SelectList selList, string option)
{
     Component.Apex.SelectOption selOption = new Component.Apex.SelectOption();
     selOption.itemLabel = option;
     selOption.itemValue = option;
     selList.childComponents.add(selOption);
} 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:12:43.440

您可以尝试使用动态视觉力绑定。IE

```
map<String,String> FieldToString {get; set;}
...
selList.expressions.value = '{!FieldToString[\'' + fieldname + '\']}'; 
```

但是，我从来没有在动态视觉力中使用过动态视觉力绑定，所以请注意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:22:46.360

只需使用表达式语法将动态创建的选择列表的 value 属性绑定到字符串属性，例如：

```
String selectedValue {get; set;}
...
setList.expressions.value = '{!selectedValue}'; 
```

然后，该属性应存储选定的值，就像它在选择列表的静态声明性定义中一样。

# html - 如何混合使用相对和固定大小的列将表格宽度设置为 100%

> ID：11352595
> 
> 赞同：2
> 
> 时间：2012-07-05T21:08:51.337
> 
> 标签：html

我将此表格宽度设置为 100%。里面我有 3 列，中间的应该固定为 300px。左列和右列应在剩余空间中平均分配。

结果是带有图像的 col 被拉伸了。如何解决此问题以使左右列保持相同大小？

[http://jsfiddle.net/RqhCv/](http://jsfiddle.net/RqhCv/)

**重要提示：不要在左栏中添加任何内容，内容必须保留`&nbsp;`**
**也必须在IE7中工作**

***请不要发布有关 DIV 的答案。这个问题是关于表格的。***

```
 <table style="width:100%;height:100%;">
        <tr>
            <td bgcolor="#FF0000">&nbsp;</td>
            <td bgcolor="#99CC33" style="width:300px;">this is 300PX</td>
            <td bgcolor="#0000FF"><img src="http://www.google.com/logos/2012/kondratyuk-12-hp.jpg" width="377" height="167"></td>
        </tr>
    </table> 
```

...

*我确实尝试了很多东西，包括 COLGROUP，没有任何效果......*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:23:31.217

这似乎可以使左右列的大小相同，中间列 300px;。不过，我不确定您想对图像做什么。

```
<table style="width:100%;height:100%;table-layout:fixed;overflow:hidden" >
    <tr>
        <td bgcolor="#FF0000" style="width:50%;"></td>
        <td bgcolor="#99CC33" style="width:300px;"><div style="width:300px">this is 300PX</div></td>
        <td bgcolor="#0000FF" style="width:50%;" ><div style="overflow:scroll"><img src="http://www.google.com/logos/2012/kondratyuk-12-hp.jpg" width="377" height="167"></div></td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:15:33.120

经过几个小时的试验，我能够生成这段代码。

适用于所有浏览器，在 Webkit 中稍微向左移动，但我认为我可以忍受。

这看起来确实很危险，我一点也不喜欢，但我在最新的 Crome、FF、Opera、IE9、IE8、IE7、Safari 和 iPad 上的 Safari 中进行了测试。一切看起来都很好。

**不过，如果有人对此或更好的解决方案有任何意见，请不要犹豫发布。**

```
<table style="width:100%;height:100%;">
    <tr>
        <td bgcolor="#FF0000" style="width:50%;">&nbsp;</td>
        <td bgcolor="#99CC33" style="width:300px;"><img src="p.png" width="300" height="1"></td>
        <td bgcolor="#0000FF"  style="width:50%;"><img src="http://www.google.com/logos/2012/kondratyuk-12-hp.jpg" style="display:block;" width="377" height="167"></td>
    </tr>

</table> 
```

# python - Django - 设置 DATE_INPUT_FORMATS 和 TIME_INPUT_FORMATS 时，ValueError：“strftime 格式以原始 % 结尾”？

> ID：11352599
> 
> 赞同：2
> 
> 时间：2012-07-05T21:08:56.663
> 
> 标签：python, django, django-forms, django-settings, strftime

在 Django 中，我有一个使用 SplitDateTimeField 的表单，该表单设置为具有如下所示的初始值。当尝试查看包含表单的模板时，我得到 ValueError：“strftime 格式以原始 % 结尾。”

```
# forms.py

class DiscountForm(Form):
    title = CharField(widget=TextInput(), required=True)
    description = CharField(widget=Textarea(), required=True)
    fineprint = CharField(widget=Textarea(), required=True)
    start = SplitDateTimeField(
        input_date_formats='%m/%d/%Y',
        input_time_formats='%I:%M %p',
        initial= lambda: dt.datetime.now(),
        required=True
    )
    end = SplitDateTimeField(
        input_date_formats='%m/%d/%Y',
        input_time_formats='%I:%M %p',
        initial= lambda: dt.datetime.now() + dt.timedelta(days=30),
        required=True
    )
    limit = IntegerField(min_value=0, initial=0, required=True)

# relevant in settings.py 

USE_I18N = False
USE_L10N = False
USE_TZ = True

DATETIME_INPUT_FORMATS = ('%m/%d/%Y %I:%M %p')
DATE_INPUT_FORMATS = ('%m/%d/%Y')
TIME_INPUT_FORMATS = ('%I:%M %p') 
```

这是我的回溯：[http ://dpaste.org/y55eV/](http://dpaste.org/y55eV/)

非常感谢任何指导。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:28:50.797

参数`input_date_formats`和`input_time_formats`需要是列表或元组，而不是字符串（请参阅文档中的[SplitDateTimeField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.SplitDateTimeField)）。该错误可能是由于它现在正在迭代字符而不是多种输入格式。

尝试将代码更改为以下内容：

```
start = SplitDateTimeField(
    input_date_formats=('%m/%d/%Y',),
    input_time_formats=('%I:%M %p',),
    initial= lambda: dt.datetime.now(),
    required=True
)
end = SplitDateTimeField(
    input_date_formats=('%m/%d/%Y',),
    input_time_formats=('%I:%M %p',),
    initial= lambda: dt.datetime.now() + dt.timedelta(days=30),
    required=True
) 
```

# c# - 将 url 视为 c# 对象，以便我可以拆分参数

> ID：11352602
> 
> 赞同：0
> 
> 时间：2012-07-05T21:09:17.857
> 
> 标签：c#, http

我想使用控制台应用程序轻松地将 URL 与其参数分开，以便对参数进行 URL 编码。有没有一种类型可以让这变得简单？请记住，这是在 Web 服务器之外运行的。

URL 的格式为

例如

```
string url = "http://sitename/folder1/someweb.dll?RetrieveTestByDateTime?PatientID=1234&param2=blah blah blah"; 
```

那么我可以做

```
string finalUrl = "http://sitename/folder1/someweb.dll?RetriveTestByDateTime?PatientID=" + HttpUtility.UrlEncode(PatientIDValue) + HttpUtility.UrlEncode(param2Value); 
```

第二，第二个`?`有效吗？此数据来自第 3 方应用程序。当然，这可以通过 Regex 来完成，但我不喜欢使用它，因为我团队中的大多数人都不知道正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:15:53.147

使用[`Uri`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类 - 将字符串传递`url`给构造函数，它将解析出不同的部分。

查询将在属性中，您可以使用和编码`Query`的 轻松重建 URL 。`Scheme``AbsolutePath``Query`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:26:49.890

首先你的网址结构不好

```
string url = "http://sitename/folder1/someweb.dll?RetrieveTestByDateTime?PatientID=1234&param2=blah blah blah"; 
```

应该

```
string url = "http://sitename/folder1/someweb.dll?RetrieveTestByDateTime&PatientID=1234&param2=blah blah blah"; 
```

一个可能的解决方案，我现在不在开发环境中，所以这是从头开始的。可能需要对代码进行一些更改。

```
string url = "http://sitename/folder1/someweb.dll?RetrieveTestByDateTime&PatientID=1234&param2=blah blah blah";
var uri = new Uri(url);
var queryString = uri.Query;
NameValueCollection query = HttpUtility.ParseQueryString(queryString)
query["PatientID"] = string.Concat(HttpUtility.UrlEncode(PatientIDValue), HttpUtility.UrlEncode(param2Value));

// Rebuild the querystring
queryString = "?" + 
                 string.Join("&", 
                              Array.ConvertAll(query.AllKeys, 
                                                key => string.Format("{0}={1}", 
                                                HttpUtility.UrlEncode(key), 
                                                HttpUtility.UrlEncode(query[key])))); 
```

# r - 数据框中多个因子的样条

> ID：11352604
> 
> 赞同：1
> 
> 时间：2012-07-05T21:09:22.733
> 
> 标签：r, plyr, spline

这个问题是在我有很多模型类型的上下文中，每个模型类型都相同，但是每个模型的数据量很小，我想通过样条曲线获得更完整的数据集。我希望找到一种方法来做到这一点，而不必一次单独地对每个模型进行样条化。

所以我有以下df：

```
mydf<- data.frame(c("a","a","b","b","c","c"),c("e","e","e","e","e","e")
                 ,as.numeric(c(1,2,3,10,20,30)),
                 as.numeric(c(5,10,20,20,15,10))) 
```

给一些名字：

```
colnames(mydf)<-c("Model", "Class","Seconds", "Speed") 
```

这创造了：

```
> mydf
  Model Class Seconds Speed
1     a     e       1     5
2     a     e       2    10
3     b     e       3    20
4     b     e      10    20
5     c     e      20    15
6     c     e      30    10 
```

所以我想要每个模型的秒和速度列上的样条。因此，例如，如果我在模型“a”上使用样条线，那么您只需将“a”上的那些元素作为模型进行样条线。

像：

```
spline(x=mydf[1:2,3], y=mydf[1:2,4])
$x
[1] 1.0 1.2 1.4 1.6 1.8 2.0

$y
[1]  5  6  7  8  9 10 
```

这可行，但是当你有数百个模型时......

我想只使用“a”来样条“a”，然后它移动到“b”并且只使用“b”等。理想情况下，它会输出为一个新的数据框，但此时我只是不想得到一个错误.

我在 plyr 中尝试了 ddply 但出现错误。我希望避免使用循环或带有循环的函数，但如果这是唯一的选择，那么......

谢谢，如果我能改进这个问题，请告诉我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-05T22:13:00.680

那这个呢：

```
ddply(mydf, .(Model), summarise, Spline = spline(x = Seconds, y = Speed), 
      Var = c("Seconds", "Speed"))
  Model                        Spline     Var
1     a  1.0, 1.2, 1.4, 1.6, 1.8, 2.0 Seconds
2     a             5, 6, 7, 8, 9, 10   Speed
3     b 3.0, 4.4, 5.8, 7.2, 8.6, 10.0 Seconds
4     b        20, 20, 20, 20, 20, 20   Speed
5     c        20, 22, 24, 26, 28, 30 Seconds
6     c        15, 14, 13, 12, 11, 10   Speed 
```

# html - HTML -- 数据内容字段

> ID：11352605
> 
> 赞同：0
> 
> 时间：2012-07-05T21:09:30.363
> 
> 标签：html, seo

我在一个网站上注意到在 h1 内，他们有一个`data-content-field`所以代码是

```
<h1 data-content-field="site-title">
    My Amazing Website
</h1> 
```

数据内容字段有什么需要吗？我个人以前从未使用过它。我听说在索引网站时，它对 SEO 和 Google 的机器人有好处。

我已经看到它们被用于其他标签以及网站标题。

如果我要添加/删除它会伤害我的网站（尤其是对于 SEO）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:38:47.987

不，不。你没有抓住重点。

所有`data-`属性都是自定义属性，可以由用户添加。例如，在我使用的应用程序中`data-id`，`data-int`以及其他一些应用程序中。

好处是你可以在这里放你自己的属性。请注意，**HTML5 及更高版本****`data-`**支持该标签。

 **`data-content-field`和 SEO之间没有任何联系。

我希望它对你有帮助！阅读一些关于 SEO 的教程，它们可能会让你成为更好的程序员/网站管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T06:11:08.117

所有 data-* 属性都供页面或站点内部使用，主要用于客户端脚本、站点特定搜索系统等。一般的搜索引擎应该会忽略它们。您提到的示例看起来相当误导，除其他外，因为 h1 意味着特定于页面，而不是特定于站点，并且因为这里的类属性直观地看起来更合适 - 但是在没有页面地址的情况下，这是只是一个有根据的猜测。**

# c# - 在 ASP.NET C# 中让新创建的线程将输出发送到 asp:panel 时出现问题

> ID：11352607
> 
> 赞同：0
> 
> 时间：2012-07-05T21:09:31.373
> 
> 标签：c#, multithreading

我正在创建一个用于 Intranet 的文件处理器。我在另一个问题中描述了它 - [ERR_EMPTY_RESPONSE 使用 C# 在 ASP.Net 中处理大量文件时](https://stackoverflow.com/questions/11128368/err-empty-response-when-processing-a-large-number-of-files-in-asp-net-using-c-sh)

现在，正如上述问题的答案所建议的，我正在尝试使用线程来执行文件处理任务。

但有一个问题。我需要新创建的线程将反馈写入页面中的组件（asp:panel 或 div 或其他）。这些反馈将是几个数据库操作的结果。

应用程序读取这些 txt，解释其中的每一行，并将数据插入数据库。插入数据库的每一行都必须返回一个反馈，例如“成功插入注册表 'regname'”或“我在文件 'filename' 中插入注册表 'regname' 时遇到问题，跳到下一个注册表”。

我做了一些非常简单的测试：

```
protected void DoImport()
{
    try
    {
        MainBody.Style.Add(HtmlTextWriterStyle.Cursor, "wait");

        int x = 0;
        while (x < 10000)
        {
            ReturnMessage(String.Format("Number {0}<hr />", x), ref pnlConfirms);
            x++;
        }
    }
    catch (Exception ex)
    {
        ReturnMessage(String.Format("<font style='color:red;'><b>FATAL ERROR DURING DATA IMPORT</b></font><br /><br /><font style='color:black;'><b>Message:</b></font><font style='color:orange;'> {0}</font><br />{1}", ex.Message, ex.StackTrace), ref pnlErrors);
    }
    finally
    {
        MainBody.Style.Add(HtmlTextWriterStyle.Cursor, "default");
    }
} 
```

该函数从 Page_Load 调用，并在加载时用一行数字填充名为“pnlConfirms”的 asp:panel。

我将其更改为：

```
protected void DoImport()
{
    try
    {
        MainBody.Style.Add(HtmlTextWriterStyle.Cursor, "wait");
        ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork));
    }
    catch (Exception ex)
    {
        ReturnMessage(String.Format("<font style='color:red;'><b>FATAL ERROR DURING DATA IMPORT</b></font><br /><br /><font style='color:black;'><b>Message:</b></font><font style='color:orange;'> {0}</font><br />{1}", ex.Message, ex.StackTrace), ref pnlErrors);
    }
    finally
    {
        MainBody.Style.Add(HtmlTextWriterStyle.Cursor, "default");
    }
}

private void DoWork(Object stateInfo)
{
    int x = 0;
    while (x < 10000)
    {
        ReturnMessage(String.Format("Number {0}<hr />", x), ref pnlConfirms);
        x++;
    }
} 
```

两者都使用此功能：

```
public void ReturnMessage(string message, ref Panel panel, bool reset = false)
{
    if (reset)
    {
        panel.Controls.Clear();
    }
    Label msg = new Label();
    msg.Attributes.Add("width", "100%");
    msg.Text = message;
    panel.Controls.Add(msg);
} 
```

我需要`ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork));`用反馈填充这些 asp:panels - 比如插入错误和警告。

我的代码已经在`try...catch`语句下有这些反馈，但是它们没有从线程池中获取任何 asp:panel 的输出（当直接从`DoImport()`函数调用时，它可以工作，就像我发布的第一个示例一样）。

我做错了什么，但我不知道是什么（我研究了将近 2 周）。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:38:35.343

在 ASP.NET 中，当浏览器请求一个页面时，该页面会在其处理完成后立即呈现并发送到浏览器，因此浏览器将在页面最终呈现时显示该页面。

根据您的代码，您尝试呈现页面，显示等待光标，并期望它显示在浏览器上，然后光标被默认光标更改。正如我所解释的，与使用或不使用额外线程无关，页面在完全呈现之前不会被发送到浏览器。所以你永远不会在客户端看到等待光标。

获得您想要做的最简单的等待是使用 Web 服务（传统的 .asmx 或 WCF）和 AJAX（jquery os ASP.NET AJAX）。

1）创建一个进行处理的Web服务

2) 创建一个发送到浏览器的页面，并使用 javascript（jQuery 或 ASP.NET AJAX）调用 Web 服务，并显示一些内容让用户知道正在处理请求。（等待光标，或者更好的动画 gif）

3）当流程完成时，您的 javascript 将从 Web 服务获取响应，您可以更新页面以让用户知道流程已完成。

如果您没有 javascript 方面的经验，您可以使用以下方法完成大部分任务：

*   [ScriptManager](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)可用于为您的客户端[创建一个 javascript Web 服务代理（](http://msdn.microsoft.com/en-us/magazine/cc163354.aspx)[其他有趣的文章](http://msdn.microsoft.com/en-us/magazine/cc163499.aspx)），并且是其余控件所必需的

*   一些javascript（或jquery）可用于更新客户端的“进程运行/进程完成提示”。即当对Web服务的调用结束时，您可以使用javascript使用DOM来更新页面，或者加载一个新页面或带有特殊参数的同一页面以显示该过程的结果

这样你就可以做你想做的事：

1) 以显示进程正在运行的状态显示页面

2) 以显示进程结束的状态显示相同或其他页面

诀窍是使浏览器与服务器通信，而这只能使用一些可用的 ajax 技术来完成。

另一种典型的技术是使用 jQuery.ajax，就像[encosia.com 中解释的那样](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/)

根据 OP 消息，所有文件的处理过程都会非常缓慢，以至于它会占用 Web 服务调用。如果是这种情况，您可以使用以下解决方案：

1）创建一个处理一个（或一批）待处理文件的Web服务，并在完成当前文件（或批处理）的处理时至少返回待处理文件的数量。

2）从客户端（javascript）调用网络服务。完成后，更新显示待处理文件数量的页面，如果此数量大于零，则再次调用 Web 服务。

3）当调用web服务返回0个挂起文件时，可以更新页面显示工作完成，不要再调用了。

如果一次处理所有文件，客户端不会有任何反馈，也会出现超时。此外，IIS 可以决定停止正在工作的工作线程。IIS 这样做有几个原因。

一个更可靠但更难实施的解决方案是：

1) 实现一个 Windows 服务，它执行文件处理

2) 实现一个返回待处理文件数量的 Web 服务（您可以使用文件系统、数据库表或类似的东西间接通信 Windows 服务和 Web 应用程序）

3) 使用网页中的计时器（ajax 计时器或 javascript setInterval）使用 Web 服务每 N 秒轮询一次服务器，直到待处理文件的数量为 0。

更难的方法是在 Windows 服务中托管 WCF 服务，而不是在 Web 应用程序和 Windows 服务之间进行间接通信。这种情况要复杂得多，因为您需要使用线程来完成工作，并参加对 wcf 服务的调用。如果您可以使用间接通信，则实施起来会容易得多。dtabse 表是一个简单而有效的解决方案：您的工作进程在处理文件时更新表中的一行，并且 Web 服务从该表中读取进度状态。

对于一个不那么简单的问题，有许多不同的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:44:59.947

您正在启动新线程（或更准确地说，在线程池中的一个空闲线程上运行您的代码）而不是等待主线程中的结果。如果您想走这条路，则需要使用诸如 Thread.Join （如果您将使用手动线程创建）或其他同步机制作为事件。

您链接到的问题建议使用您没有使用的异步页面。您将开始处理请求，启动任务并释放线程，当任务完成时您完成请求。

旁注：考虑简单地在处理请求的主线程上进行所有转换。除非您期望缓慢的 I/O 完成将 CPU 工作从一个线程转移到另一个线程的任务，否则可能不会产生显着的收益。请测量您当前解决方案的性能并确认它不符合您为应用程序设置的性能目标。（如果您出于娱乐/教育目的这样做，则不适用）。

# version-control - 我可以清除具有大量未使用历史记录的 Mercurial 存储库吗？

> ID：11352608
> 
> 赞同：4
> 
> 时间：2012-07-05T21:09:35.730
> 
> 标签：version-control, mercurial, google-code

我的团队有一个历史悠久的 Mercurial 存储库，其中包括不再属于项目的大文件。存储库变得如此之大，以至于在尝试从 Google 代码托管站点克隆时经常超时。我们是否可以剔除存储库，以便将不在提示中的文件完全从历史记录中删除，同时保留所有其他活动文件的历史记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:23:53.900

[ConvertExtension](http://mercurial.selenic.com/wiki/ConvertExtension)可以做到这一点。查看它的`--filemap`选项。

# r - 将日期数据从 SAS 传输到 R

> ID：11352611
> 
> 赞同：3
> 
> 时间：2012-07-05T21:09:43.723
> 
> 标签：r, date, import, sas

问这个问题很奇怪，我将 sas7 数据集应用到 R 中。我的变量之一是 visit_date

现在看起来像这样，我想知道在哪里可以将它们转换回 MM-DD-YYYY，因为我需要排除小于 MDY（08-01-2010）的数据。

```
> chris$visit_date
  [1] 17077 17091 17105 17119 17133 17069 17083 17097 17111 17125 17080 17094 17108
 [14] 17122 17136 17098 17112 17210 17224 17238 17252 17266 17247 17261 17254 17268
 [27] 17282 17296 17324 17237 17251 17265 17279 17293 17329 17343 17357 17385 17413
 [40] 17259 17273 17287 17301 17315 17328 17342 17356 17370 17384 17335 17349 17377
 [53] 17391 17405 17331 17345 17359 17373 17387 17435 17449 17463 17477 17505 17336
 [66] 17364 17378 17392 17406 17352 17366 17380 17394 17408 17427 17441 17469 17483
 [79] 17497 17440 17454 17468 17482 17496 17434 17448 17462 17476 17490 17419 17433
 [92] 17447 17461 17475 17518 17560 17574 17588 17616 17653 17667 17681 17695 17709
[105] 17644 17658 17686 17700 17728 17755 17769 17783 17811 17825 17825 17610 17624
[118] 17638 17652 17666 18072 18114 18127 18155 18169 17651 17665 17680 17693 17707
[131] 17657 17671 17685 17699 17659 17673 17687 17701 17715 17646 17660 17674 17688
[144] 17702 17721 17735 17749 17763 17770 17734 17748 17762 17790 17861 17736 17750
[157] 17764 17778 17792 17751 17765 17779 17793 17807 17742 17756 17770 17784 17798
[170] 17772 17757 17771 17785 17799 17813 17777 17791 17819 17833 17854 17923 17937
[183] 17965 17979 17993 17825 17839 17853 17867 17909 17832 17846 17860 17874 17888
[196] 17919 17933 17961 17975 17989 17960 17974 17988 18002 18016 18183 18211 18225
[209] 18239 18253 17931 17945 17959 17973 17987 17940 17954 17968 17982 17996 17966
[222] 17980 17994 18022 18036 18021 18035 18049 18063 18091 18050 18064 18078 18092
[235] 18106 18045 18059 18073 18087 18115 18024 18038 18052 18066 18080 18056 18070
[248] 18084 18098 18112 18107 18121 18135 18149 18163 18105 18119 18133 18161 18175
[261] 18143 18171 18185 18199 18213 18203 18246 18274 18288 18302 18316 18248 18276
[274] 18290 18304 18318 18310 18324 18338 18352 18366 18315 18343 18357 18364 18378
[287] 18350 18364 18378 18406 18420 18337 18351 18365 18379 18393 18374 18388 18402
[300] 18430 18472 18344 18358 18386 18400 18414 18353 18381 18395 18409 18423 18387
[313] 18415 18429 18443 18450 18408 18422 18436 18443 18464 18430 18437 18457 18464
[326] 18471 18427 18434 18441 18455 18462 18428 18442 18456 18463 18470 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T21:47:05.617

这些“日期”显然使用了与可用于此转换的典型 POSIX 标准不同的原点/偏移量。R 一般使用 YYYY-MM-DD 格式

```
as.Date(ddd, origin="1970-01-01")

> head( as.Date(ddd, origin="1970-01-01") )
[1] "2016-10-03" "2016-10-17" "2016-10-31" "2016-11-14" "2016-11-28" "2016-09-25" 
```

所以你需要建立正确的原点。如果是 1960-01-01，那么这些日期都不大于 08-01-2010。

```
> sum( as.Date(ddd, origin="1960-01-01") >= as.Date("2010-08-01") )
[1] 0
> sum( as.Date(ddd, origin="1960-01-01") < as.Date("2010-08-01") )
[1] 336 
```

# c# - C#获取远程机器上进程的主窗口标题

> ID：11352618
> 
> 赞同：1
> 
> 时间：2012-07-05T21:10:34.603
> 
> 标签：c#, mainwindow

我正在开发一个从服务器运行并监视另一组服务器上的进程的 C# 程序。我正在监视的进程都具有相同的 exe 名称，但不同的窗口标题名称。我正在寻找一种从这些进程中远程提取 Windows 标题名称的方法。

基本上我想做的是以下内容；

```
 Process[] processList = Process.GetProcesses("ServerName");
        foreach (Process p in processList)
        {
            try
            {
                Console.WriteLine(p.MainWindowTitle);

            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        } 
```

但是，.NET 不支持此功能

有谁知道另一种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:21:37.807

I won't tell you this is the best approach, but it's possible to use it. You could create a simple service (windows service) and install it on each server. You might want to implement auto update functionality and therefore after installation you don't have to reinstall this service app on every machine. And this service app gets processes and associated windows titles (it may be more than one window within single process) and returns it to the machine that queries that information. I think you could use WCF here. And other advantage is that you can add more other functionality more easier.

# android - 在活动和服务之间共享数据库

> ID：11352625
> 
> 赞同：2
> 
> 时间：2012-07-05T21:11:08.567
> 
> 标签：android, sqlite, file-upload, service, ipc

我正在创建一个排队上传管理器。有了[这个](https://stackoverflow.com/a/11346410/420001)对我之前问题指南的回答，我将使用服务来上传这些图像。建议我使用数据库来跟踪成功上传的文件和待处理的文件。

我最初的研究让我相信我想要创建一个绑定服务，这样我可以在照片上传后更新我的 UI，以及一个启动的服务，这样它就可以独立于创建它的我的活动运行。看来我还需要通过`process=":something"`应用清单中的指令在自己的进程中启动它。

我的问题是，在 N 活动客户端和上传服务之间共享 SQLite（除非有更好的方法）数据库的最佳方式是什么？

我设想它在伪代码中像这样工作：

```
// in an app
writeRecordToDb( . . . );

// start service
if( service doesn't exist )
{
  // start service, and bind
}

// in the service:
if( shared db has another row )
{
  doDownload( . . . );

  if( download worked )
  {
    notifyActivity();

    if( db has another row )
      doDownload( . . . );
  }
  else
  {
    retryDownload( . . . );
  }
} 
```

这是解决这个问题的正确方法吗？我再次尝试规避在几乎没有蜂窝信号时让多个 Activity 实例请求上传照片的问题。我刚刚读完服务和绑定服务文档，感觉很好，但不是很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:27:12.683

> 我最初的研究让我相信我会想要创建一个绑定服务

我不会。

> 所以我可以在照片上传后更新我的用户界面

您不需要使用绑定模式来更新 UI。你可以：

*   `LocalBroadcastManager`使用活动拾取的本地广播发送本地广播，或
*   调用由活动额外`PendingIntent`提供的一个，或`Intent``startActivity()`
*   试试Square 的[Otto 事件总线](http://corner.squareup.com/2012/07/otto.html)（看起来很有趣，但我还没用过）
*   等等

> 以及已启动的服务，因此它可以独立于创建它的我的活动运行

这就是为什么您不应该为绑定而烦恼，因为您不需要绑定，但您确实需要启动服务。

> 我的问题是，在 N 活动客户端和上传服务之间共享 SQLite（除非有更好的方法）数据库的最佳方式是什么？

选项 #1：将您`SQLiteOpenHelper`的数据保存在静态数据成员中

选项 #2：在数据库周围使用`ContentProvider`包装器

> 这是解决这个问题的正确方法吗？

使用数据库作为组件之间的通信渠道类似于两个隔壁邻居使用双翼飞机拖曳的横幅相互通信。是的，它有效。但是，它缓慢且昂贵。

（另外，当你需要双翼飞机时，从来没有双翼飞机，但我离题了......）

如果您希望使用数据库作为未决下载的后备存储，以防出现一些中断（例如，用户关闭设备）并且您希望稍后再获取这些下载，那很好。但是，该服务将通过您发送给它的命令知道要下载什么`startService()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T21:39:57.410

CommonsWare 基本上涵盖了您需要的一切......但这里有一些代码说明了这两个选项，以防万一有任何混淆。

1.  保持你`SQLiteOpenHelper`的静态数据成员。

    ```
    public class DatabaseHelper extends SQLiteOpenHelper { 
        private static DatabaseHelper mInstance = null;

        private static final String DATABASE_NAME = "databaseName";
        private static final String DATABASE_TABLE = "tableName";
        private static final int DATABASE_VERSION = 1;

        private Context mCxt;

        public static DatabaseHelper getInstance(Context ctx) {
            /** 
             * use the application context as suggested by CommonsWare.
             * this will ensure that you dont accidentally leak an Activitys
             * context (see this article for more information: 
             * http://developer.android.com/resources/articles/avoiding-memory-leaks.html)
             */
            if (mInstance == null) {
                mInstance = new DatabaseHelper(ctx.getApplicationContext());
            }
            return mInstance;
        }

        /**
         * constructor should be private to prevent direct instantiation.
         * make call to static factory method "getInstance()" instead.
         */
        private DatabaseHelper(Context ctx) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            this.mCtx = ctx;
        }
    } 
    ```

    然后在您的`Service`/`Activity`中，保留对您的引用`DatabaseHelper`并调用`getInstance()`它。

2.  将数据库包装在一个`ContentProvider`. 如果您已经实现了一个，那么您可以简单地使用

    ```
    mContext.getContentResolver().query(...); 
    ```

    这是有效的，因为`Activity`两者`Service`都扩展`Context`（它包含对 的引用`ContentResolver`）。

# ios - 在 Salesforce 中获取 Http 请求的 JSON 正文

> ID：11352628
> 
> 赞同：1
> 
> 时间：2012-07-05T21:11:24.847
> 
> 标签：ios, json, salesforce, apex-code

我正在创建一个带有 salesforce 集成的 iOS 应用程序。iOS 应用程序将通过 http 请求的正文向 salesforce 发送 JSON 数据。如何在 apex 中将正文作为 JSON 字符串获取？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:03:36.190

像这样的东西（如果您是从 Apex 中进行调用，否则使用 Web 服务来捕获传入呼叫并以类似方式解析）。

准备您的 HTTP 请求对象：

```
// Prepare HTTP 
HTTPResponse hTTPRes;
HTTPRequest req = new HttpRequest();
req.setTimeout(120000); 
```

设置您的端点：

```
req.setEndpoint(baseURL + callName + '?' + parameterString); 
```

进行标注：

```
HTTP http = new HTTP();
String body;
hTTPRes = http.send(req);
body = hTTPRes.getBody(); 
```

调用 JSON 解析器并解析结果：

```
// Invoke JSON parser 
JSONParser parser = System.JSON.createParser(body);

// Parse JSON response to get individual field values.
while(parser.nextToken() != null)
{
   if((parser.getCurrentToken() == JSONToken.FIELD_NAME) && (parser.getText() == 'yourfield')) 
      // store values as you walk the JSON
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:49:39.873

您可以在 salesforce.com 中实现一个简单的 REST Web 服务，这非常简单，并且内置了对 JSON 或 XML 消息的支持。查看 APEX 文档的以下页面： [http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_rest_methods.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_rest_methods.htm)
此集成的复杂部分是身份验证。无论您使用 REST 还是 SOAP，您都需要一个有效的会话 ID 来进行身份验证。这可以通过调用标准 Web 服务 API 的登录操作或使用更适合 REST 方法但可能相当复杂的 OAuth 来完成。另一个专门针对 iOS 开发的集成选项是 Simon Fell 的 zksForce 框架，它提供了与标准 salesforce.com Web 服务 API 交互的可靠方法： [GitHub 上的 zkSforce](https://github.com/superfell/zkSforce)

# database - 从训练数据集中提取测试集

> ID：11352630
> 
> 赞同：-1
> 
> 时间：2012-07-05T21:11:34.010
> 
> 标签：database, dataset, data-mining, cluster-analysis, cross-validation

我有一个数据集（其中每个数据都是带有相应类标签的属性向量）。我想将数据集拆分为训练集和测试集。无论如何可以自动执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:09:18.250

将建模数据集拆分为训练集、验证集和测试集的典型方法是使用随机样本。也就是说，分配一个介于 0 和 1 之间的随机数。如果要进行 40/30/30 拆分，则值介于 0 和 0.4 之间的行在训练中，在 0.4 和 0.7 之间在验证中，在 0.7 和 1.0 之间在测试中. 40/30/30 slpit 没有什么神奇之处。它恰好是 SAS Enterprise Miner 中的默认值（实际上，我经常将其更改为 60/30/10）。

对此有一些调整和可能的改进。如果你知道有重要的建模特征，比如地理，那么你可以做一个分层样本。为此，您将按列对数据进行排序，然后基本上执行“每 n 个”记录样本。我说“基本上”，因为这对于 40% 的拆分要复杂一些。为了处理这个问题，一次取 10 个记录，选择 4 个作为训练集，3 个作为验证集，3 个作为测试集。你从这 10 个中选择哪一个并不重要。

一个更大的问题是当你有分层数据时，几乎所有用于建模的数据都是层次结构。例如，您的客户数据可能包含大量描述客户人口普查区的列。如果这些变量作为预测变量很重要，那么您可以考虑在人口普查区域而不是客户级别进行抽样。也就是说，将人口普查区域（随机）分成三组，因此 40% 的客户进入训练集，30% 进入验证集，30% 进入测试集。

您要确保对数据进行分区，并且没有记录属于一个以上的组。如果你不知道什么是训练集、验证集和测试集，那么我强烈建议你买一本关于数据挖掘的书（例如“面向营销、销售和客户支持的数据挖掘技术，第三版”，网址为[http ://www.amazon.com/Data-Mining-Techniques-Relationship-Management/dp/0470650931/ref=pd_sim_b_5](https://rads.stackoverflow.com/amzn/click/com/0470650931)）。

# php - CakePHP 1.3 警告 array_merge 清理

> ID：11352632
> 
> 赞同：1
> 
> 时间：2012-07-05T21:11:38.757
> 
> 标签：php, cakephp, sanitize

我正在使用 CakePHP 1.3.7 并遇到了一个非常具体的问题。

我的应用程序中使用的 Sanitize 核心类方法是 1.2 版本的方法之一。当我想保存特定数据时，它会给我一个警告：

> 警告：array_merge()：参数 #2 不是第 113 行 /usr/share/php/cake/libs/sanitize.php 中的数组

但它确实可以保存，并且具有正确的编码/格式。

这是导致此警告的方法（版本 1.2，不在第 113 行，但我稍后会谈到）

```
 function html($string, $remove = false) {
    if ($remove) {
        $string = strip_tags($string);
    } else {
        $patterns = array("/\&/", "/%/", "/</", "/>/", '/"/', "/'/", "/\(/", "/\)/", "/\+/", "/-/");
        $replacements = array("&amp;", "&#37;", "&lt;", "&gt;", "&quot;", "&#39;", "&#40;", "&#41;", "&#43;", "&#45;");
        $string = preg_replace($patterns, $replacements, $string);
    }
    return $string;
} 
```

下面是这个方法的调用方式

```
$value = Sanitize::html($value,true); 
```

现在你可以看到，array_merge() 没有在这个方法中调用，但是如果我用 1.3 版本替换 html() 方法

```
 function html($string, $options = array()) {
    static $defaultCharset = false;
    if ($defaultCharset === false) {
        $defaultCharset = Configure::read('App.encoding');
        if ($defaultCharset === null) {
            $defaultCharset = 'UTF-8';
        }
    }
    $default = array(
        'remove' => false,
        'charset' => $defaultCharset,
        'quotes' => ENT_QUOTES
    );

    $options = array_merge($default, $options);

    if ($options['remove']) {
        $string = strip_tags($string);
    }

    return htmlentities($string, $options['quotes'], $options['charset']);
} 
```

array_merge() 正好在第 113 行。

如果我现在以这种方式调用 html()

```
$value = Sanitize::html($value,array('remove' => true)); 
```

我不再收到警告。但是，我的数据不再以正确的编码/格式保存。

这是我需要保存的文本示例（它是法语，需要 UTF-8 编码）

> L'envoi d'une communication & à la fenêtre

我无法克服这种做法

```
$value = Sanitize::html($value,array('remove' => true, 'quotes' => ENT_HTML401)); 
```

因为我使用的是 PHP 5.3.6，所以我不能使用常量 ENT_HTML401

如果我使用另一个常量，如 ENT_NOQUOTES，它会忽略引号（显然），但不会忽略法语口音和其他特殊字符，这些字符旨在以这种方式工作，但我想完全按照我引用的方式保存文本（或至少阅读它） .

我猜我不需要使用 htmlentities，但我认为更新核心方法更安全，这是我发现没有收到警告的唯一方法。我还想我不应该真正修改这些文件，而不是更新它们？

所以，简而言之，我想：

*   摆脱警告
*   以正确的格式保存/读取数据

我可能忘记了一些信息，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:51:38.370

我最终更新了 Sanitize 类的 html() 方法以匹配 1.3 版，如下所示

```
 function html($string, $options = array()) {
    static $defaultCharset = false;
    if ($defaultCharset === false) {
        $defaultCharset = Configure::read('App.encoding');
        if ($defaultCharset === null) {
            $defaultCharset = 'UTF-8';
        }
    }
    $default = array(
        'remove' => false,
        'charset' => $defaultCharset,
        'quotes' => ENT_QUOTES
    );

    $options = array_merge($default, $options);

    if ($options['remove']) {
        $string = strip_tags($string);
    }

    return htmlentities($string, $options['quotes'], $options['charset']);
} 
```

我这样称呼它

```
$value = Sanitize::html($value, array('remove'=>true,'quotes'=>ENT_NOQUOTES)); 
```

每当我从数据库中读取文本字段的值时，我都会以这种方式对文本字段进行解码

```
$data['Model']['field'] = html_entity_decode($data['Model']['field'], ENT_NOQUOTES, "UTF-8"); 
```

* * *

编辑：我不得不撤消我上面描述的内容，因为在 1.3 版本的函数中编码数据的方式使得我们必须在读取整个应用程序时解码整个应用程序中的数据。

另外，我没有使用 CakePHP 1.3.7（与蛋糕控制台混淆）；我使用的是 1.2.4，所以更新功能毕竟是不合适的。

我保留了 1.2 版本，这次我只是将第二个参数更改为一个数组，如下所示，它似乎起到了作用，因为我不再收到警告。

```
 function html($string, $options = array()) {
    if ($options['remove']) {
        $string = strip_tags($string);
    } else {
        $patterns = array("/\&/", "/%/", "/</", "/>/", '/"/', "/'/", "/\(/", "/\)/", "/\+/", "/-/");
        $replacements = array("&amp;", "&#37;", "&lt;", "&gt;", "&quot;", "&#39;", "&#40;", "&#41;", "&#43;", "&#45;");
        $string = preg_replace($patterns, $replacements, $string);
    }
    return $string;
} 
```

# java - 使用纪元时间使用java更改文件的时间戳

> ID：11352633
> 
> 赞同：0
> 
> 时间：2012-07-05T21:11:39.343
> 
> 标签：java, epoch, unix-timestamp

我正在开发一个在 linux 机器上运行的 java 应用程序，它应该将文件的时间戳更改为以纪元形式存储的另一个时间。需要更改时间戳的文件存在于本地文件系统中。

Ex - 时间戳显示**17 Jul 5 20:03**的 localFile.txt需要更改为纪元**“1341446400000”**

我写过这样的代码 -

```
private void modifyTime(final String localFile, final long originalEpoch) throws  IOException {
    String getDateFromEpoch = "date -d@" + String.valueOf(originalEpoch);
    //getDateFromEpoch is returned in form - "Thu Jul  5 20:03:32 UTC 2012"
    Process process = runCommand(getDateFromEpoch);
    InputStream iStream = process.getInputStream();
    BufferedReader bufReader = new BufferedReader(new InputStreamReader(iStream));
    String originalDate = bufReader.readLine();
    bufReader.close();

    String touch = "touch -c -d " + originalDate + " " + localFile;
    runCommand(touch);
}

private Process runCommand(final String cmd) throws IOException {
    Process p = Runtime.getRuntime().exec(cmd);
    try {
        p.waitFor();
    } catch (InterruptedException e) {
        // ignore this exception
    }
    return p;
} 
```

Running`"date -d@" + String.valueOf(originalEpoch);`正在返回**Thu Jul 5 20:03:32 UTC 2012 之**类的东西。在触摸命令中使用此命令对我不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:21:29.423

听起来你只想要 File.setLastModified

[http://docs.oracle.com/javase/7/docs/api/java/io/File.html#setLastModified(long](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#setLastModified(long) )

# ios - iOS上的音频文件问题

> ID：11352636
> 
> 赞同：0
> 
> 时间：2012-07-05T21:12:06.567
> 
> 标签：ios, audio

我的 iphone 项目中有 3000 个小型音频文件。文件大小通常在 1kb 到 50kb 之间。我将所有文件复制到一个目录，我可以播放它们。要减小项目规模，我应该怎么做？将文件压缩为 zip 文件然后在 iphone 上解压缩以进行首次运行怎么样？有没有办法将所有这些文件组合起来并从一个文件中播放？什么是理想的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:16:46.713

如果您的文件是 mp3，则几乎不可能通过压缩它们来使它们变小。事实上，mp3 是一种可以让您获得非常高的压缩率的格式。

您可以做的是减少编码，您可以获得可观的收益。例如，如果您的文件是 256kbps，您可以转到 192 或 128……另一个可以提供巨大优势的选项是将文件转换为单声道音频文件。

我并不是说所有这些都可以为您的应用程序明智地完成，它们只是选项。

无论如何，我对 20MB 不会太担心，您当然可以将所有这些文件保存在应用程序的资源目录中。

# c++ - boost::filesystem::path 和 fopen()

> ID：11352641
> 
> 赞同：12
> 
> 时间：2012-07-05T21:12:42.200
> 
> 标签：c++, windows, fopen, std, boost-filesystem

尝试执行此操作时出现错误：

```
path p = "somepath";
FILE* file = fopen(p.c_str(), "r"); 
```

我得到：

> “const boost::filesystem::path::value_type *”类型的参数与“const char *”类型的参数不兼容

谁能告诉我我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T21:25:18.973

如果您在 Windows 下，即`value_type`，`wchar_t`并且将在转换中失败`fopen`（需要 a `char*`）。根据文档，您似乎必须使用该`string()`方法来获取具有默认代码转换器（`wchar_t`-> `char`）的标准字符串：

```
FILE* file = fopen(p.string().c_str(), "r"); 
```

# java - Androids ExpandableListView - 放置子按钮的按钮侦听器的位置

> ID：11352642
> 
> 赞同：0
> 
> 时间：2012-07-05T21:12:47.640
> 
> 标签：java, android, expandablelistview, onclicklistener, expandablelistadapter

我一直在使用 ExpandableListView，但我无法弄清楚在哪里为将成为视图中的子按钮的按钮添加按钮侦听器。我确实设法让一个使用下面的 getChildView() 的按钮侦听器工作，但它似乎是所有按钮的同一个侦听器。

最好的情况是，我将能够在实例化 ExpandableListAdapter 类的类中实现按钮侦听器，而不必将侦听器放在实际的 ExpandableListAdapter 类中。在这一点上，我什至不知道这是否可能

我一直在尝试这个教程/代码：[这里](http://shenhengbin.wordpress.com/2012/03/25/android-practice-custom-expandablelistview-sample-2/)

**getChildView()**

```
@Override
public View getChildView(int set_new, int child_position, boolean view, View view1, ViewGroup view_group1)
{
    ChildHolder childHolder;
    if (view1 == null)
    {

        view1 = LayoutInflater.from(info_context).inflate(R.layout.list_group_item_lv, null);

        childHolder = new ChildHolder();

        childHolder.section_btn = (Button)view1.findViewById(R.id.item_title);
        view1.setTag(childHolder);
        childHolder.section_btn.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                Toast.makeText(info_context, "button pushed", Toast.LENGTH_SHORT).show();

            }
        });

    }else {
        childHolder = (ChildHolder) view1.getTag();
    }
        childHolder.section_btn.setText(children_collection.get(set_new).GroupItemCollection.get(child_position).section);
        Typeface tf = Typeface.createFromAsset(info_context.getAssets(), "fonts/AGENCYR.TTF");

        childHolder.section_btn.setTypeface(tf);
        return view1;
} 
```

任何帮助将非常感激。谢谢你，我会站在一旁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:34:05.300

如果按钮在 ExpandableListView 中，则它们的侦听器需要在适配器中。

我不确定你问题的主旨，但如果你问如何将按钮与子行的内容联系起来，我可以回答。:p

出于演示目的，我将假设一个稍微简单的子行布局。

**child_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:orientation="horizontal" >
<TextView
    android:id="@+id/ListItem1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left|center_vertical"
    android:paddingLeft="7dip"
    android:paddingRight="7dip"
    android:textAppearance="?android:attr/textAppearanceLarge" />
<TextView
    android:id="@+id/ListItem2"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="right|center_vertical"
    android:textAppearance="?android:attr/textAppearanceLarge" />
<Button
    android:id="@+id/button"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:textAppearance="?android:attr/textAppearanceLarge" />
</LinearLayout> 
```

然后，要在按下按钮时获取行的内容，请使用按钮回溯到父视图，然后获取必要的子视图及其内容：

```
 childHolder.section_btn.setOnClickListener(new OnClickListener()    
    {    
        @Override    
        public void onClick(View v)    
        {    
            LinearLayout ll = (LinearLayout) v.getParent();    // get the view containing the button
            TextView tv1 = (TextView) ll.findViewById(R.id.ListItem1);  // get the reference to the first widget
            TextView tv2 = (TextView) ll.findViewById(R.id.ListItem2);  // get the reference to the second widget
            String text1 = tv1.getText.toString();  // Get the contents of the first widget to a string
            String text2 = tv2.getText.toString();  // Get the contents of the second widget to a string
        }    
    }); 
```

如果这不是您要寻找的内容，请澄清您的问题，我会再试一次。

# apache - Apache 是否允许根据子请求的结果授权 HTTP 请求？

> ID：11352643
> 
> 赞同：7
> 
> 时间：2012-07-05T21:12:56.073
> 
> 标签：apache, authentication, authorization

我正在寻找一个等效的[nginx http auth request 模块](https://github.com/PiotrSikora/ngx_http_auth_request_module)，但对于 Apache。

对于每个传入的 HTTP 请求，模块都会向身份验证/授权后端发送一个子请求。auth 请求携带原始请求的路径和所有标头。根据身份验证请求的结果，允许原始请求（HTTP 代码 200）、拒绝（HTTP 代码 403）或请求登录（HTTP 代码 401）。这种通用机制允许构建真正灵活的身份验证和授权方案。

在 Apache 中是否有可能发生这样的事情（可能在某些第三方模块的帮助下）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-25T21:26:43.700

这个模块就是这样做的...... [http://search.cpan.org/~chansen/Authen-Simple-HTTP-0.2/lib/Authen/Simple/HTTP.pm](http://search.cpan.org/~chansen/Authen-Simple-HTTP-0.2/lib/Authen/Simple/HTTP.pm)

# 或作为 mod_perl Authen 处理程序

```
PerlModule Authen::Simple::Apache
PerlModule Authen::Simple::HTTP

PerlSetVar AuthenSimpleHTTP_url "http://www.host.com/protected"

<Location /protected>
  PerlAuthenHandler Authen::Simple::HTTP
  AuthType          Basic
  AuthName          "Protected Area"
  Require           valid-user
</Location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T00:11:19.760

如果您愿意使用 mod_perl，[Apache2::AuthCookie会执行类似的操作。](http://search.cpan.org/~mschout/Apache-AuthCookie-3.22/lib/Apache2/AuthCookie.pm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-29T11:59:20.573

最接近的内置等效项似乎是[mod_authnz_fcgi](https://httpd.apache.org/docs/2.4/mod/mod_authnz_fcgi.html)。这允许您使用[mod_proxy_fcgi](https://httpd.apache.org/docs/2.4/mod/mod_proxy_fcgi.html)对 FCGI 处理程序执行身份验证子请求。它不允许您直接传递给另一个 URL 处理程序，但可以配置 FCGI 处理程序来执行此操作。

# sql-server - 范围锁定的 SQL Server 竞争条件问题

> ID：11352644
> 
> 赞同：2
> 
> 时间：2012-07-05T21:12:57.717
> 
> 标签：sql-server, tsql, locking, deadlock

我正在 SQL Server 中实现一个队列（请不要对此进行讨论）并且遇到了竞争条件问题。感兴趣的 T-SQL 如下：

```
set transaction isolation level serializable
begin tran
declare @RecordId int
declare @CurrentTS datetime2
set @CurrentTS=CURRENT_TIMESTAMP
select top 1 @RecordId=Id from QueuedImportJobs with (updlock) where Status=@Status and (LeaseTimeout is null or @CurrentTS>LeaseTimeout) order by Id asc
if @@ROWCOUNT> 0
begin
update QueuedImportJobs set LeaseTimeout = DATEADD(mi,5,@CurrentTS), LeaseTicket=newid() where Id=@RecordId
select * from QueuedImportJobs where Id = @RecordId
end
commit tran 
```

`RecordId`是PK，还有一个索引`Status,LeaseTimeout`。

我基本上在做的是选择一条租约恰好过期的记录，同时将租约时间更新为 5 分钟并设置新的租约票。

所以问题是当我使用几个线程并行运行这段代码时，我遇到了死锁。我已经对其进行了调试，直到发现更新语句有时会为同一条记录执行两次。现在，我的印象是`with (updlock)`应该防止这种情况（顺便说一句，它也会发生`xlock`，而不是`tablockx`）。所以实际上看起来在同一范围的记录上有一个 RangeS-U 和一个 RangeX-X 锁，这应该是不可能的。

那么我错过了什么？我在想它可能与 top 1 子句有关，或者 SQL Server 不知道它`where Id=@RecordId`实际上在锁定范围内？

死锁图： ![在此处输入图像描述](../Images/4278bd9679739594d00a191955a4645e.png)

表架构（简化）： ![在此处输入图像描述](../Images/b5ecea77534d197e82cb840e4dd2748e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:14:57.337

看起来锁在不同的 HOBT 上。表上有多个索引吗？

如果是这样，则选择`with (updlock)`可能只`update`锁定一个索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:19:08.480

为什么不只是：

```
DECLARE @t TABLE(Id INT);

UPDATE TOP (1) dbo.QueuedImportJobs 
  SET LeaseTimeout = DATEADD(MINUTE, 5, CURRENT_TIMESTAMP)
  OUTPUT inserted.Id INTO @t
  WHERE Status = @Status 
  AND COALESCE(LeaseTimeout, '19000101') < CURRENT_TIMESTAMP;

SELECT <cols> FROM dbo.QueuedImportJobs 
  WHERE Id IN (SELECT Id FROM @t); 
```

顺便说一句，您可能需要`ORDER BY`根据所需的索引顺序确保所选行是队列中的第一个。如果 Id 上的索引是聚集的，这可能就是它无论如何都会工作的方式，但除非你这么说，否则无法保证。这将需要对查询进行轻微的重组，因为您不能`ORDER BY`直接在 上应用（或索引提示）`UPDATE`，例如：

```
WITH x AS
(
  SELECT TOP (1) Id, LeaseTimeout
    FROM dbo.QueuedImportJobs
    WHERE Status = @Status 
    AND COALESCE(LeaseTimeout, '19000101') < CURRENT_TIMESTAMP
    ORDER BY Id
)
UPDATE x
  SET LeaseTimeout = DATEADD(MINUTE, 5, CURRENT_TIMESTAMP)
  OUTPUT inserted.id INTO @t; 
```

# jquery - 覆盖或删除就绪处理程序

> ID：11352645
> 
> 赞同：6
> 
> 时间：2012-07-05T21:13:01.420
> 
> 标签：jquery, overriding, handler, ready

我必须修改使用 jQuery 的就绪处理程序的站点，我不想重用代码并且不必再次编写它，但是我需要更改原始就绪处理程序的行为，问题是：

*   如何删除准备好的处理程序（应用新的）？
*   或者如何覆盖现有的就绪处理程序（原来使用了匿名函数）？

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:31:32.107

好的，显然你不能取消绑定准备好的处理程序，准确地说，你不能在使用*ready()*时，但你可以使用*bind('ready', handler)*所以而不是

```
$(document).ready(handler); 
```

利用

```
$(document).bind('ready', handler); 
```

然后每当您想更改现有的事件处理程序时，请使用：

```
$(document).unbind('ready', handler);//when there is reference to the handler 
```

或者

```
$(document).unbind('ready');//to remove all handlers for ready event 
```

正如我最近发现的那样，您可以添加事件命名空间:) 以仅删除该命名空间中的就绪事件（我已经查看了 jplayer 代码），如下所示：

```
var GD_EVENT_NAMESPACE = ".GrelaDesign";
$document.bind('ready' + GD_EVENT_NAMESPACE, function(){ alert('ready'); });
//later
$document.unbind('ready' + GD_EVENT_NAMESPACE);//this will remove only specific events 
```

此致

ps我在这里问之前进行了广泛的搜索:)，在我问完之后不久我就找到了答案:-)

# javascript - Ember.js CollectionView 订单

> ID：11352646
> 
> 赞同：4
> 
> 时间：2012-07-05T21:13:12.770
> 
> 标签：javascript, ember.js

我有一个`ArrayController`定期更新的。它有一个`sorted`计算属性，可以让事情保持秩序。我正在尝试使用`CollectionView`它的`content`属性绑定到`sorted`属性，但它没有以正确的顺序呈现它们。[演示](http://jsfiddle.net/URFr8/1/)

我显然做出了错误的假设，即在`content`and`childViews`属性之间保持顺序。这样做的正确方法是什么？

**车把**：

```
<script type="text/x-handlebars" data-template-name="item">
    id {{view.content.id}}
</script>

<script type="text/x-handlebars">
    <ul>
     {{collection
        contentBinding="App.itemController.sorted"
        itemViewClass="App.ItemView"
    }} 
    </ul>        
</script> 
```

**JavaScript**：

```
​App = Ember.Application.create({
    ready: function(){

        // add a new object with a random id
        // every second
        setInterval(function(){

            var id = Math.round(Math.random() * 100),
                obj = Em.Object.create({ id: id });
            App.itemController.pushObject(obj);

        }, 1000);

    }
});

// Collection Item View
App.ItemView = Em.View.extend({
    tagName: "li",
    templateName: "item"
});

App.itemController = Em.ArrayController.create({

    // random order
    content: Em.A([
        Em.Object.create({ id: 5 }),
        Em.Object.create({ id: 3 }),
        Em.Object.create({ id: 10 }),
        Em.Object.create({ id: 6 }),
        Em.Object.create({ id: 1 }),
        Em.Object.create({ id: 2 }),
        Em.Object.create({ id: 100 }),
    ]),

    // filtered content
    sorted: function(){
        return this.get('content').sort(function(a,b){
            return a.get('id') - b.get('id');
        });
    }.property("@each")

}); 
```

​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T13:52:34.610

为了完整起见@sly7_7 的正确答案，这里有一个带有 的版本`CollectionView`，请参阅[http://jsfiddle.net/pangratz666/ctPAA/](http://jsfiddle.net/pangratz666/ctPAA/)。

**车把**：

```
<script type="text/x-handlebars">
    {{collection
        tagName="ul"
        contentBinding="App.itemController"
        itemViewClass="App.ItemView" }} 
</script> 
```

**JavaScript**：

```
App.itemController = Em.ArrayController.create({

    sortProperties: 'id'.w(),

    // random order
    content: Em.A([
        ...
    ])

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T22:18:14.673

受到这个答案的启发：[ember.js #each order by property](https://stackoverflow.com/questions/11205013/ember-js-each-order-by-property)

我使用 ArrayController 的排序属性：[https ://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/sortable.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/sortable.js)

我不使用 CollectionView，而是一个简单的#each，并调用 addObject 而不是 pushObject

**模板**

```
<script type="text/x-handlebars" data-template-name="item">
    id {{view.content.id}}
</script>

<script type="text/x-handlebars" data-template-name="application">
    <ul>
     {{#each item in App.itemController}}
        {{view App.ItemView contentBinding="item"}}
     {{/each}} 
    <li>        
</script> 
```

**javascript**

```
App = Ember.Application.create({
  ready: function() {

    // add a new object with a random id
    // every second
    setInterval(function(){
        var id = Math.round(Math.random() * 100),
            obj = Em.Object.create({ id: id });
        // should call addObject, because pushObject does not sort the inserted item
        //App.itemController.pushObject(obj); 
        App.itemController.addObject(obj);
    }, 1000);
  }       
});

// Collection Item View
App.ItemView = Em.View.extend({
  tagName: "li",
  templateName: "item"
});

App.itemController = Em.ArrayController.create({
  sortProperties: ['id'],
  // random order
  content: Em.A([
    Em.Object.create({ id: 5 }),
    Em.Object.create({ id: 3 }),
    Em.Object.create({ id: 10 }),
    Em.Object.create({ id: 6 }),
    Em.Object.create({ id: 1 }),
    Em.Object.create({ id: 2 }),
    Em.Object.create({ id: 100 }),
  ]),
});
App.ApplicationView = Ember.View.extend({
  templateName: 'application'
});
App.ApplicationController = Ember.Controller.extend();
App.Router = Ember.Router.extend({root: Em.Route.extend()});
App.initialize();​ 
```

jsfiddle：http: [//jsfiddle.net/Sly7/LJAYk/](http://jsfiddle.net/Sly7/LJAYk/)

# java - 套接字 - 地址已在使用中

> ID：11352650
> 
> 赞同：0
> 
> 时间：2012-07-05T21:13:36.940
> 
> 标签：java, android, sockets

我是新手`Socket`，我尝试在同一个应用程序上编写服务器和客户端代码只是为了看看它是如何工作的。

**代码：**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ((Button)this.findViewById(R.id.bouton1)).setOnClickListener(this);

}

public void onClick(View v) {
    TCPServer server = new TCPServer();
    TCPClient client = new TCPClient();
    server.start();
    client.start();     
}

public class TCPServer extends Thread {
    @Override public void run() {

        try {

            ServerSocket s = new ServerSocket(8080,0,InetAddress.getLocalHost());
            Socket cli = s.accept();

            byte[] b = new byte[512];
            int n;

            InputStream is = cli.getInputStream();
            while((n=is.read(b))>0){
                Log.d("TCPServer",new String(b));
                if(new String(b).contains("\r\n\r\n"))break;
                b = new byte[512];
            }

            OutputStream os = cli.getOutputStream();
            os.write("Hello".getBytes());

        } catch (Exception e) { 
            e.printStackTrace();
        } 

    }
}
public class TCPClient extends Thread {     
    @Override public void run() {

        try {
            Socket s = new Socket(InetAddress.getLocalHost().getHostAddress(),8080);
            //Socket s = new Socket("www.google.com",80);                               
            //Log.i("",s.getLocalAddress().getHostAddress());

            byte[] b = new byte[512];
            int n;

            if (s.isConnected()) {

                OutputStream os = s.getOutputStream();
                os.write("Hi How are you \r\n\r\n".getBytes());

                InputStream is = s.getInputStream();
                while((n=is.read(b))>0){
                    Log.d("TCPClient",new String(b));
                    b = new byte[512];
                }

            }

            s.close();

        } catch (Exception e) { 
            e.printStackTrace();
        } 

    }
} 
```

代码工作正常，但只是我第一次点击我的按钮。错误是`java.net.BindException: Address already in use`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:18:30.667

如果它第一次工作，但之后没有，听起来你在程序退出之前没有正确关闭套接字。

您可以通过运行检查它是否仍然打开

```
netstat 
```

等待你不在 Windows 机器上。我敢肯定他们有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:27:23.247

对不起，我只是忘记关闭`ServerSocket`后打开它

# javascript - History.js 在 Internet Explorer 中不起作用

> ID：11352651
> 
> 赞同：7
> 
> 时间：2012-07-05T21:13:42.257
> 
> 标签：javascript, jquery, html, pushstate, history.js

我正在尝试让 history.js 在 Internet Explorer 中工作，因为我需要 history.pushState() 才能工作。我已经阅读了 GitHub ( [https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/) ) 上的说明并尝试实现它，但没有取得任何成功。这就是我所拥有的

```
<!DOCTYPE html>
<html>
<head>
    <!-- jQuery --> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
    <!-- History.js --> 
    <script defer src="http://balupton.github.com/history.js/scripts/bundled/html4+html5/jquery.history.js"></script> 
    <script type="text/javascript">
        function addHistory(){

            // Prepare
            var History = window.History; // Note: We are using a capital H instead of a lower h

            // Change our States
            History.pushState(null, null, "mylink.html"); 
        }      
    </script>
</head>
<body>
    <a href="mylink.html">My Link</a>
    <a href="otherlink.html">Other Link</a>
    <button onclick="addHistory()" type="button">Add History</button>   
</body> 
```

不知道我做错了什么，但它绝对不适用于 IE8 或 IE9。它确实在 Firefox 中工作，但这可能是因为 Firefox 实际上支持 history.pushstate 开始。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T10:30:22.173

在第二个`<script>`标签中删除单词`defer`。
因为，如果你提到那个词，就意味着推迟。（如果您想保存它以减少页面渲染的阻塞，请不要删除它）。IE也非常严格，这就是你遇到这个问题的原因。希望能帮助到你

参考[这个](http://www.webpagetest.org/forums/showthread.php?tid=7897)

# visual-studio-2010 - 在 Visual Studio 中导出模板时如何添加相同的解决方案项目引用？

> ID：11352654
> 
> 赞同：6
> 
> 时间：2012-07-05T21:13:56.840
> 
> 标签：visual-studio-2010, visual-studio, project-template, project-reference

我有一个包含多个项目的解决方案，我们称它们为 ProjectA 和 ProjectB。我需要 ProjectA 来引用 ProjectB，但是当我“导出模板”时，我似乎无法保留引用。我想做的是让它在我创建一个新项目时为我创建引用，然后自动将其命名为我输入的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T16:37:23.227

这稍微超出了纯 Visual Studio 模板的范围。

Visual Studio 模板支持模板的替换参数，所以你可以做的是：

*   在您的`ProjectA.zip`模板文件中，您将找到`ProjectA.csproj`该项目的模板
*   在`ProjectA.csproj`您将找到一个`<ItemGroup>`包含`<Reference>`条目
*   其中应该有一个类似的条目`<Reference Include="ProjectB">`

当您从 ProjectB 模板创建项目时，它的名称将由用户指定，因此您希望`ProjectB`使用替换参数（如`$Foo$`.

这就是它超出纯模板范围的地方：你如何告诉 Visual Studio 替换`$Foo$`？替代品会是什么？

您在这里唯一的选择是使用自定义向导，该向导要么查找 ProjectB 类型的项目，要么向用户询问。

以下是如何让模板和自定义向导相处的大纲：

*   创建 VSIX 包项目。
*   请务必将`[ProvideBindingPath]`属性添加到您的包中。这是注册自定义向导所必需的（否则您需要将其安装到 GAC，以便 VS 找到它）
*   创建你的向导，它应该实现`Microsoft.VisualStudio.TemplateWizard.IWizard`
*   将您的模板添加到解决方案中，并将其作为 ProjectTemplate 资产添加到您的包的 vsixmanifest 中

在模板的 .vstemplate 文件中，在块下方添加以下代码`<TemplateContent>`段：

```
<WizardExtension>
  <Assembly>Your.Packages.Assembly</Assembly>
  <FullClassName>Your.Wizard</FullClassName>
</WizardExtension> 
```

创建项目时，这将显示您的向导。您可以在该`RunStarted`方法中调出一个对话框，要求提供参考，或者您可以使用`automationObject`参数（实际上是一个`EnvDTE.DTE`实例）来尝试查找 ProjectB 项目并在`replacementsDictionary`.

# ruby - Ruby中具有NaN值的变量不等于自身

> ID：11352655
> 
> 赞同：4
> 
> 时间：2012-07-05T21:13:57.380
> 
> 标签：ruby, equality, nan

当我偶然发现一些非常有趣的东西时，我正在测试我的一些 Ruby 1.9 代码。我希望有人能解释为什么会这样。

这是代码：

```
inf = Float::INFINITY

x = inf - inf
y = 0.0/0.0

puts "X is #{x}"
puts "Y is #{y}"

puts "X and Y are both NaN." if x.nan? && y.nan?

puts "This is all as we expected, but here is the mystery..."

puts "X is not equal to Y." if x == y

puts "Surprisingly not even X is equal to X." if x == x 
```

这是输出：

```
X is NaN
Y is NaN
X and Y are both NaN.
This is all as we expected, but here is the mystery... 
```

我以两种不同的方式为两个变量分配了一个 NaN 值，当我测试它们是否相等时，情况并非如此。在那之后，我测试了一个变量是否等于它自己，即使那不是真的。期望某个值等于自身是合乎逻辑的，但正如我们可以看到的那样，事实并非如此。

我不知道这是否是测试 NaN 值的正确方法，但我真的很想知道这一切的背后是什么，Ruby 有这样的行为吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:20:02.827

如果我们仔细想想，这似乎是合乎逻辑的。你`x`是通过从另一个无限大的数中减去一个无限大的数得到的吗？结果是什么？我们不知道。

我们如何比较我们不知道的事物？

为了备份我的逻辑，这是`Float#==`

```
static VALUE flo_eq(VALUE x, VALUE y)
{
    volatile double a, b;

    switch (TYPE(y)) {
      case T_FIXNUM:
        b = (double)FIX2LONG(y);
        break;
      case T_BIGNUM:
        b = rb_big2dbl(y);
        break;
      case T_FLOAT:
        b = RFLOAT_VALUE(y);
#if defined(_MSC_VER) && _MSC_VER < 1300
        if (isnan(b)) return Qfalse;
#endif
        break;
      default:
        return num_equal(x, y);
    }
    a = RFLOAT_VALUE(x);
#if defined(_MSC_VER) && _MSC_VER < 1300
    if (isnan(a)) return Qfalse;
#endif
    return (a == b)?Qtrue:Qfalse;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T21:28:44.823

用 Javascript 编写完全相同的代码：

```
x = Infinity - Infinity
y = 0/0
if(!(x==y)) alert("Not equal");
if(!(x==x)) alert("Not equal"); 
```

它将具有完全相同的行为。这种行为是意料之中的。两个 NaN 之间不相等。Infinity - Infinity 与 [一个巨大的数字] - [同一个巨大的数字] 不同，它们是两个不同的巨大数字。没有人知道这个操作的结果。所以，这是一个 NaN。

所以，这不是一个错误。这在数学上是合理的。

另外，试试

```
if(!(NaN==NaN)) alert("Not equal");
if(!(NaN===NaN)) alert("Not equal"); 
```

NaN 永远不会等于任何东西。

# printing - Crystal Reports XI PrintToPrinter“缺少参数值”

> ID：11352656
> 
> 赞同：0
> 
> 时间：2012-07-05T21:13:57.430
> 
> 标签：printing, parameters, crystal-reports, reporting

我正在处理 Crystal 报表（在 VB 应用程序中运行的 Crystal XI）的问题，在尝试直接打印报表时收到零星的“缺少参数值”错误。以下是问题的摘要：

1.  用户通过报告菜单运行报告（一切正常）
2.  用户单击“打印预览”（一切正常）
3.  用户点击“打印”（本应将文档直接发送到打印机，但有时会出现缺少参数错误）

这是我要开始的代码：

```
 crystalReportViewer.MdiParent = parent
    crystalReportViewer.Show()

    Dim report As ReportDocument = CType(crystalReportViewer.ReportSource, ReportDocument)

    report.PrintToPrinter(1, False, 0, 0)
    crystalReportViewer.Close()
    crystalReportViewer.Dispose() 
```

根据我一直在谷歌搜索，我想出了这段代码：

```
 crystalReportViewer.MdiParent = parent
    crystalReportViewer.Show()

    Dim report As ReportDocument = CType(crystalReportViewer.ReportSource, ReportDocument)

    'here are my attempts to get it to work
    Dim pf As ParameterFields = report.ParameterFields
    report.PrintOptions.PrinterName = "Microsoft XPS Document Writer"

    report.PrintToPrinter(1, False, 0, 0)
    crystalReportViewer.Close()
    crystalReportViewer.Dispose() 
```

我对如何解决这个问题一无所知。有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T19:37:28.223

**起始代码：**您的报告中可能有一些空参数。

**搜索代码后：**您有此行：

```
Dim pf As ParameterFields = report.ParameterFields 
```

你有一个参数，你没有设置任何值。

**对于两者，请使用：**

```
//[C#]
report.setParameterValue(parameterName, parameterValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-12T16:50:20.340

这很简单。在使用“printtoprinter”之前，请确保报表中的所有参数都已填充并抛出数据。我已经解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:13:08.777

据我所知，这看起来像是 Crystal 中的一个问题。我找不到修复程序，所以我只是使用解决方法，直到修复程序可用（生成报告然后手动打印）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T11:23:53.363

首先你需要从**toolBox添加****PrintDialog** 然后添加以下代码**button_click_event**

 ****```
 ReportName.PrintOptions.PrinterName = PrintDialog1.PrinterSettings.PrinterName

        ReportName.PrintOptions.PaperOrientation = CrystalDecisions.[Shared].PaperOrientation.Landscape

        ReportName.PrintOptions.PrinterName = "Microsoft XPS Document Writer"

        ReportName.PrintToPrinter(PrintDialog1.PrinterSettings.Copies, True, 1, 99) 
```

这会将打印直接发送到“Microsoft XPS Document Writer”。如果您觉得这有帮助，请投票****

# javascript - 使用 javascript/jquery 在 javascript 对象上进行分组后搜索

> ID：11352658
> 
> 赞同：0
> 
> 时间：2012-07-05T21:14:04.513
> 
> 标签：javascript, jquery

我在下面有 jsfiddle。我想对这个返回的 javascript 对象（即 byJob）进行一些搜索。

[http://jsfiddle.net/ravice70/2yUuT/](http://jsfiddle.net/ravice70/2yUuT/)

例如，如果用户选择 id 2，它将显示如下。应删除所有其他记录。

2,2

2、测试组1

2、测试组1

有人知道吗？

谢谢

# vba - 尝试使用 Range.Formula 属性时格式错误的 VLookup 公式

> ID：11352660
> 
> 赞同：1
> 
> 时间：2012-07-05T21:14:09.783
> 
> 标签：vba, excel, vlookup

我有 Excel 工作表，其中包含来自许多来源的数据，这些数据将组合在一起，以便需要查看的内容高于您正在查看的内容，因此一张工作表的不同部分会有许多 VLookup。

```
Sub linkFDCfdv()
Range("A1").Select
Dim doesFDChaveDescription As Boolean
Dim isLastRowFDC As Boolean
Dim myRange As String
Dim firstFDCrow As Long
Dim lastFDCrow As Long
While Len(Selection.Value) > 0

    If Selection.Value = "FDC" Then

        If isLastRowFDC = False Then
            firstFDCrow = ActiveCell.Row

        End If

        isLastRowFDC = True

        ActiveCell.Offset(0, 3).range("A1").Select

        If Len(Selection.Value) > 0 Then
            doesFDChaveDescription = True
        Else
            doesFDChaveDescription = False
        End If
        ActiveCell.Offset(0, -3).range("A1").Select
    Else
        If isLastRowFDC = True Then
            lastFDCrow = ActiveCell.Row - 1
        End If

    End If

    If Selection.Value = "FDV" Then

        ActiveCell.Offset(0, 10).range("A1").Select

        myRange = "B" & firstFDCrow & ":D" & lastFDCrow

        ActiveCell.Formula = "=VLOOKUP(R[0]C[-2]," & myRange & ",2)"

        ActiveCell.Offset(0, -10).range("A1").Select
    End If

    ActiveCell.Offset(1, 0).range("A1").Select

Wend

End Sub 
```

发生的事情是我的宏使公式：

`=VLOOKUP(I9,'B3':'D8',2)`

如果我去掉`'`标记，宏就可以完美运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:31:16.957

那是因为您使用的是 R1C1 样式和 A1 样式的混合。这是你正在尝试的吗？

```
ActiveCell.Formula = "=VLOOKUP(" & ActiveCell.Offset(,-2).Address & _
                     "," & myRange & ",2)" 
```

# android - android列表背景与单独的列表项背景重叠

> ID：11352663
> 
> 赞同：0
> 
> 时间：2012-07-05T21:14:20.630
> 
> 标签：android, listview, selector

我创建了一个列表视图并为它设置了一个选择器，以便它有一个背景。我对其中的列表项元素做了同样的事情。

[http://dl.dropbox.com/u/67419/list.png](http://dl.dropbox.com/u/67419/list.png)

列表本身是灰色的，右侧有深灰色边框。激活列表项后，我通过其自己的选择器将列表项的背景更改为白色。但是，我似乎无法让白色背景占据列表视图的整个空间，并且它在右侧留下了几个像素（仅足以显示背景中的边框）。有没有办法让它一直延伸？列表右侧是一个白色片段，因此我希望列表项中的白色连接到片段的白色。

我的 list_item_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_activated="true"
        android:drawable="@color/white" />
    <item android:state_selected="true"
        android:drawable="@color/grey" />
    <item android:state_pressed="true"
        android:drawable="@color/grey" />
</selector> 
```

和我的 list_selector

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/rightborder" />
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:32:25.190

您是否尝试过：`android:constantSize="true"`在选择器属性中？

# php - PHP：需要 eval() 的替代方法来动态构建多维数组

> ID：11352669
> 
> 赞同：3
> 
> 时间：2012-07-05T21:14:49.087
> 
> 标签：php, arrays, eval

好的，所以我知道使用 eval() 不是很好，但是我无法为我的问题提出更好的解决方案，而且直到最近，还没有不使用它的性能原因。但是，我现在将足够的数据传递给函数，它花费的时间长得令人无法接受。

被调用的函数是：

```
public static function makeAMultiDimensionalArrayWithSumsBasedOnMultipleFields($inArray, $dimensionFieldNames, $sumFieldNameArray, $staticFieldNameArray = array())
{
    $outArray = array();

    // Just in case the array has indices, sort it so array_pop works as expected.
    ksort($dimensionFieldNames);

    foreach ($inArray as $row)
    {
        // make sure each row in the inArray has all keys specified by $dimensionFieldNames
        $allFieldsPresent = TRUE;
        foreach ($dimensionFieldNames as $keyFieldName)
        {
            if (!array_key_exists($keyFieldName, $row))
            {
                // Note that alternatively we could set the field to a specified default value.
                $allFieldsPresent = FALSE;
            }
        }

        if ($allFieldsPresent)
        {
            $indexString = '';
            $keyFieldNameArrayCopy = $dimensionFieldNames;

            foreach ($dimensionFieldNames as $keyFieldName)
            {
                $indexString .= "['" . $row[$keyFieldName] . "']";
                // lets sum values
                foreach ($sumFieldNameArray as $sumFieldName)
                {
                    eval ('$outArray' . $indexString . '[' . $sumFieldName . '] += $row[' . $sumFieldName . '];');
                }

                foreach ($staticFieldNameArray as $staticFieldName)
                {
                    eval ('$outArray' . $indexString . '[' . $staticFieldName . '] = $row[' . $staticFieldName . '];');
                }
            }
        }

    }
    return $outArray;
} 
```

它是这样调用的：

```
makeAMultiDimensionalArrayWithSumsBasedOnMultipleFields($data, $dimensionArray, $sumArray, $staticArray); 
```

传递给函数的变量类似于：

```
$dimensionArray = array("firstLevelID", "secondLevelID", "thirdLevelID", "fourthLevelID", "fifthLevelID");
$sumArray = array("revenue", "cost", "profit", "sales", "inquires", "cost", "walkins");
$staticArray = array("date", "storeID", "storeName", "productID", "productName", "managerID", "managerName", "salesperson"); 
```

所以我想重写这个函数，这样我就不再使用 eval() 了。我在这方面花了相当多的时间，觉得是时候寻求一些建议了。

目标是获取一个数组数组，并根据 $dimensionArray 中的维度将其转换为多维数组。

我现在不想用太多细节让你厌烦，所以请询问你是否需要更多或有其他问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:19:03.550

哇，好吧。我第一次错过了您的索引连接。试试这个：

```
if ($allFieldsPresent) {
    $keys = array();
    foreach ($dimensionFieldNames as $keyFieldName) {
        $keys[] = $row[$keyFieldName];
        // lets sum values
        foreach ($sumFieldNameArray as $sumFieldName)
            self::deepAssign($outArray, $keys, $sumFieldName, $row[$sumFieldName], true);
        foreach ($staticFieldNameArray as $staticFieldName)
            self::deepAssign($outArray, $keys, $staticFieldName, $row[$staticFieldName]);
    }
}

protected static function deepAssign(&$array, $keys, $fieldName, $value, $sum = false) {
    $target =& $array;
    foreach ($keys as $key) {
        if (!isset($target[$key]))
            $target[$key] = array();
        $target =& $target[$key];
    }
    if($sum)
        $target[$fieldName] += $value;
    else
        $target[$fieldName] = $value;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T21:17:20.743

您应该查看`create_function()`（此处的[文档](http://www.php.net/manual/en/function.create-function.php)）

# heroku - 在 Heroku 上恢复 Redis To Go 数据库

> ID：11352672
> 
> 赞同：0
> 
> 时间：2012-07-05T21:15:03.780
> 
> 标签：heroku, redis, redistogo

有没有人能够在 Heroku 上恢复 Redis 数据库？他们有常规帐户的说明，但 Heroku 仪表板无法使用“编辑”选项。 [http://support.redistogo.com/kb/info/restore-from-a-backup](http://support.redistogo.com/kb/info/restore-from-a-backup)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:36:17.627

我相信我们是通过 Redis To Go 支持网站来解决这个问题的，我仍然会为其他人回答。此功能仅适用于直接帐户，Redis To Go 正在努力为 heroku 附加帐户发布相同的选项，但目前切换到直接帐户是最快的。如果您对 heroku 很着迷，提出支持请求[support.redistogo.com](http://support.redistogo.com/)让支持人员上传您的备份也是您的选择！

-摩根

# sockets - 简单的聊天应用程序（我应该使用套接字吗？Apple 应用商店会批准吗？）

> ID：11352673
> 
> 赞同：1
> 
> 时间：2012-07-05T21:15:04.697
> 
> 标签：sockets, app-store

我有一个涉及“聊天功能”的应用程序的想法，基本上是人们相互聊天的能力。由于通过服务器发送消息会很慢（另外，如果您有新消息，必须每秒检查一次服务器会很糟糕）我想使用套接字来获得点对点聊天功能，而不是通过服务器。

我的2个问题：

1) 套接字编程是开发聊天程序的最佳方式吗？我知道有推送通知服务，但我认为它不能很好地用于聊天程序。如果您想象有 5,000 人聊天并且必须每秒轮询服务器，那么通过服务器似乎有点糟糕。

2) Apple 在批准具有使用套接字的点对点聊天程序的应用程序时会遇到问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:38:22.953

套接字确实是合适的。但是您最好使用客户端/服务器方法而不是 P2P 方法。

在一个非常知名的即时消息服务上工作了很多年，我可以绝对告诉你，通过服务器并不慢——只要你的服务器不慢。

客户端/服务器有很多优点。也就是说，它不像任何类型的 P2P 连接那样困难，因为 NAT 和防火墙等问题使直接套接字连接变得困难和不可靠。此外，无论如何，您都需要一个消息服务来让客户端交换 IP 地址。

您所说的客户端或服务器必须“轮询”的假设不是可扩展系统的工作方式。您应该使用持久的 TCP 套接字，并考虑通过目前存在的任何可用异步方法来扩展套接字服务。Linux 上的 select()、poll()、epoll 和 Windows 上的 IO Completion Ports 都是无需定期轮询即可同时连接数千个套接字的技术。

我的建议 - 只需部署 XMPP/Jabber 服务器。大多数实现都可以很好地扩展到数千个客户端。那么你的聊天程序只是一个 XMPP 客户端套接字。对于用户只能通过 http 或 http 代理服务器进行访问的情况，一些 Jabber 服务器甚至支持 HTTP 连接。前段时间我玩过[Openfire](http://www.igniterealtime.org/projects/openfire/index.jsp)，印象深刻。

我相当肯定 iOS 有套接字，而且它是苹果允许的。我只从从事 iOS 产品工作的人那里得到二手信息。您可能不应该将推送通知服务用于通知来唤醒您的应用程序需要做的事情之外的任何事情。

希望这可以帮助。

# curl - 使用 php 和 cURL 将数据从表单 (xml) 发布到 Zoho CRM

> ID：11352675
> 
> 赞同：0
> 
> 时间：2012-07-05T21:15:10.043
> 
> 标签：curl, zoho

我正在尝试将变量添加到 URL，以便将 XML 字符串内容发布到 Zoho CRM。我想我可以用 cURL 做到这一点。但什么也没有发生。我从 Zoho CRM API 获得了 xml 值。

```
<?php

$xml_data = '<SalesOrders>'.
'<row no="1">'.
'<FL val="Subject">Zillium - SO</FL>'.
'<FL val="Due Date">2009-03-10</FL>'.
'<FL val="Sub Total">48000.0</FL>'.
'<FL val="Tax">0.0</FL>'.
'<FL val="Adjustment">0.0</FL>'.
'<FL val="Grand Total">48000.0</FL>'.
'<FL val="Billing Address Street">test</FL>'.
'<FL val="Shipping Street">test</FL>'.
'<FL val="Billing City">test</FL>'.
'<FL val="Shipping City">test</FL>'.
'<FL val="Billing State">test</FL>'.
'<FL val="Shipping State">test</FL>'.
'<FL val="Billing Code">223</FL>'.
'<FL val="Shipping Code">223</FL>'.
'<FL val="Billing Country">test</FL>'.
'<FL val="Shipping Country">test</FL>'.
'<FL val="Product Details"></FL>'.
'<FL val="Terms and Conditions">Test by Zoho</FL>'.
'<FL val="Description">Test By Zoho</FL>'.
'</row>'.
'</SalesOrders>';

$ch = curl_init("https://crm.zoho.com/crm/private/xml/SalesOrders/insertRecords?
authtoken=xxxxxxxxxxxxx&scope=crmapi             
&newFormat=1&xmlData=");       
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_data);
curl_exec($ch);
curl_close($ch);

?> 
```

我在网上到处搜索以找到解决方案，但没有任何效果。这

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:40:16.980

```
$zoho_url='https://crm.zoho.com/crm/private/xml/SalesOrders/insertRecords?'; 

$token="get ur token here";
$data='newFormat=1&authtoken='.$token.'&scope=crmapi&xmlData='.$xml_data;

$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_URL, $zoho_url);
$result = curl_exec($ch);
$error=curl_error($ch);
if($error)
    throw Exception('Error in inserting records to Zoho CRM');
curl_close($ch); 
```

希望这可以帮助 ：）

# flash - g.711 == PCM

> ID：11352676
> 
> 赞同：1
> 
> 时间：2012-07-05T21:15:15.797
> 
> 标签：flash, audio-streaming

如果这听起来很无知，请原谅我，但我对 g.711 和 PCM mulaw 感到困惑。它们是一样的吗？我问的原因是参考 Adob​​e 在他们的文档中交换 PCM 和 g.711；比如这个：http: [//www.adobe.com/products/flashplayer/features._sl_id-contentfilter_sl_featuredisplaytypes_sl_new.html](http://www.adobe.com/products/flashplayer/features._sl_id-contentfilter_sl_featuredisplaytypes_sl_new.html)
对于 Adob​​e 在这方面的部分，麦克风类的编解码器选择只允许 PCMU、PCMA、NellyMoser 或 Speex ; 但他们说他们支持g.711，因此我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:17:30.017

[维基百科](http://en.wikipedia.org/wiki/G.711)：

> G.711 是用于音频压扩的 ITU-T 标准。它主要用于电话。该标准于 1972 年发布使用。**其正式名称为脉冲编码调制 (PCM)**的语音频率。它是许多技术的标准要求，例如 H.320 和 H.323 规范。它还可用于通过 IP 网络进行传真通信（如 T.38 规范中所定义）。G.711，也称为脉冲编码调制（PCM），是一种非常常用的波形编解码器。G.711 使用每秒 8,000 个样本的采样率，该速率的容差为百万分之 50 (ppm)。使用 8 位的非均匀（对数）量化来表示每个样本，从而产生 64 kbit/s 的比特率。有两个略有不同的版本；μ-law，主要用于北美，A-law，在北美以外的大多数其他国家/地区使用。

# c# - 为什么我的 NumericUpDown 控件不支持其 .Minimum 属性？

> ID：11352678
> 
> 赞同：1
> 
> 时间：2012-07-05T21:15:39.083
> 
> 标签：c#, winforms

在 .NET 4 C# WinForms 应用程序中，我在特定表单上有几个 NumericUpDown 控件。在运行时输入值进行测试时，最小值和最大值按预期强制执行，但在一个控件上除外。

我已将问题控制设置`.Maximum`为 86400 和`.Minimum`3。在运行时，它只允许从***51*** (!) 到 86400 的值。

设计器（自动生成）代码如下所示：

```
this.numEvilControl.Minimum = new decimal(new int[] {
3,
0,
0,
0}); 
```

我已经清理并重建了项目，但无济于事。

是什么导致这个控件产生了它自己的`.Minimum`值？我不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:25:55.397

而不是删除问题，我想我会发布我是如何发现问题的......

事实证明，有一个`.ValueChanged`事件正在修改值（我早就忘记了）。

因此，对于所有将来*可能*遇到此问题的人，请在您开始想知道为什么属性会被神奇地更改之前检查您的事件！

# html - 粘贴到 MS Word 时如何设计网页以最小化格式损失

> ID：11352679
> 
> 赞同：4
> 
> 时间：2012-07-05T21:15:40.200
> 
> 标签：html, css, ms-word

我正在开发一个 Web 应用程序，我希望用户能够复制页面的某些部分并将它们粘贴到 MS Word*中，同时最大限度地减少 html 格式的损失*。例如，用户应该能够从页面中仅复制一个表格并将其粘贴到 word 中，损失最小（假设页面包含必要的均值，脚本仅选择单个表格或 div）。

我应该如何开发 html 以便用户可以以最小的损失复制粘贴？例如，我应该更喜欢 b、i 之类的标签而不是 css，我应该更喜欢内联 css 等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:40:02.647

只要你不依赖外部 CSS 你就很好；内联 CSS 或诸如 B 之类的标签都可以解决问题。可能应该坚持 CSS2 - 没有 CSS3 的幻想。当然只使用网络安全字体，它们必须在客户端机器上可用。如果用户能够复制多个容器元素，您可能希望使用表格而不是 div 进行设计。坚持严格的布局，不要使用绝对定位的元素和类似的东西。力求严格、方形和狭窄的布局，以很好地适合 a4 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:37:59.307

如果您知道您的用户将粘贴什么，则保存选项是将该部分放在单独的页面中，以便于粘贴。

默认情况下，MS-Word 会给出相同的格式，但宽度始终是固定的，这可能会导致一些问题（太宽或太窄）。

要考虑的另一点是，从网站复制始终遵循 HTML 的流程，而不是它在浏览器中的显示方式。因此，所有要粘贴的数据都需要在 HTML 中相邻。

请注意：

*   绝对定位元素、覆盖等。
*   使用 Ajax 编写脚本或动态加载的元素

脚本将始终被丢弃

要对其进行测试，只需将一些内容粘贴到 word 中，然后将 word 文件保存在 HTML 中。看看它的样子。

# ruby-on-rails - 设计确认电子邮件未从haml转换为html

> ID：11352683
> 
> 赞同：0
> 
> 时间：2012-07-05T21:15:51.380
> 
> 标签：ruby-on-rails, devise, devise-confirmable

我正在使用 Devise 的可确认模块，当应用程序发送一封电子邮件，要求用户确认他们的电子邮件地址时，它不会将消息从 HAML 转换为 HTMl。相反，这是交付给用户的内容。

```
%p Welcome #{@resource.email}! %p You can confirm your account 
email through the link   below: %p= link_to 'Confirm my account',
confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:44:37.033

查看此文档，[https://github.com/plataformatec/devise/wiki/How-To%3a-Create-custom-layouts](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-custom-layouts)

```
 config.to_prepare do
     Devise::Mailer.layout "email" # email.haml or email.erb
  end 
```

# javascript - 使用 array.push 正确编码

> ID：11352684
> 
> 赞同：1
> 
> 时间：2012-07-05T21:15:53.087
> 
> 标签：javascript, arrays, join, push

我在一个网站上找到了一些代码，并对其进行了一些修改。它涉及一些从数组中添加和删除学生（添加代码如下）到值字段的函数。但是，我不明白为什么在 tarnations 中我们需要这段额外的代码。

这是js代码：

```
var students  = ['Paulie', 'Nicole', 'Kevin', 'Mare'];
function addClick(){
    var addRemove   = document.getElementById('addRemoveStudent');
    var studentsBox = document.getElementById('studentsBox')
    students.push(addRemove.value);
    addRemove.value = '';
    studentsBox.value = students.join(', ');
} 
```

我的问题是：为什么我们需要这`addRemove.value = '';`条线？我已经在没有该代码的情况下对其进行了测试，它仍然可以正常工作。我们需要这个有什么理由吗？

我可以发送更多代码，包括 HTML，但没有什么让任何人不知所措。

提前非常感谢！-安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:19:18.027

Presumably `addRemove` is an `input` element. Setting the `value` property of an `input` element to an empty string `''` means that the input is emptied: it will have no text in it.

My guess is that this function is run when a button is clicked, so it adds a new student to the array, updates the `studentsBox` field with the right data, and clears the input element so you can add more if the user wishes to do so.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:18:13.117

这不是必需的。我猜从语义上讲，这意味着在替换值之前先清除`addRemove`框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T21:18:14.503

它是可选的，但它只是清除文本框，以便用户在想要再次运行该函数时可以输入一个全新的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T21:18:22.053

清除`addRemoveStudent`（我认为是a `input type="text"`）的值只是为了它，数组中不需要它。只是为了清除该控件的值。

# deployment - 如何让 Presto 创建具有特定用户名和密码的 Windows 服务？

> ID：11352688
> 
> 赞同：1
> 
> 时间：2012-07-05T21:16:24.050
> 
> 标签：deployment, automated-deploy, presto

如何让 Presto 创建具有特定用户名和密码的 Windows 服务？我会发布我尝试过的内容，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:35:36.470

**实际创建服务通常需要三个步骤：**

![在此处输入图像描述](../Images/1747845154dba17106dd3fd5f6bc6cff.png)

**首先，实际创建服务：**

> /c sc create "$(serviceName) $(serviceNameSuffix)" binPath= "$(servicePath)"

![在此处输入图像描述](../Images/afb1a19963b1c6da259505cd93d74fa4.png)

**二、配置用户和密码：**

> /c sc config "$(serviceName) $(serviceNameSuffix)" obj= "$(account)" password= "$(password)" start= auto

![在此处输入图像描述](../Images/177a828921ac58301e36f5b5fe400d57.png)

**三、启动服务：**

![在此处输入图像描述](../Images/93c9631f0fa5a6ac16f98f98b01f4880.png)

如您所见，您只是使用 Window 的命令提示符来执行这些操作。无论您可以在命令提示符下做什么，都可以在 Presto 中执行。

# ruby-on-rails - 测试保持使用 Rspec 登录

> ID：11352692
> 
> 赞同：1
> 
> 时间：2012-07-05T21:16:40.137
> 
> 标签：ruby-on-rails, session, rspec

我对如何（以及在​​哪里）为您看到的“保持登录”功能编写一些 rspec 测试感到有些困惑，包括在谷歌登录时。

我在网上找到的例子没有多大帮助。具体来说，我想测试这两种情况。

1

*   a) 用户使用有效凭据登录而没有单击“保持登录”
*   b) 用户关闭浏览器，重新打开并请求保护页面。
*   用户不应看到受保护的页面。
*   用户应该会看到要求他们登录的页面。

2

*   a) 用户使用有效凭据登录并单击“保持登录”
*   b) 用户关闭浏览器，重新打开它并请求一个受保护的页面。
*   用户不应看到要求他们登录的页面。
*   用户应该被带到受保护的页面。

我第一次尝试解决这个问题涉及通过删除我存储在会话中的 user_id 来模拟浏览器关闭（因为它在浏览器关闭时被删除）。但是，这些测试失败了，因为我在请求规范文件夹中工作并且无法访问会话变量。我之前的相关问题：[会话在某些 rspec 文件中可用，而在其他文件中不可用。怎么会？](https://stackoverflow.com/questions/11342355/)

使用 rspec 进行这些测试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:02:18.360

这里有两个问题，我认为属于不同的测试：

1.  用户未登录时无法访问受保护的页面。这是控制器测试。
2.  即使会话被销毁，用户也会自动登录，只要在 cookie 中设置了“记住”我的标志。

对于＃1，您可以尝试以下操作：

```
describe UsersController do
  context "when not logged in" do
    context "GET users/edit" do
      it "redirects to login" do
        get :edit, :id => 123
        response.should redirect_to login_path
      end
    end
  end
end 
```

您可以制作一个更通用的测试用例，断言所有未明确列出的操作，这样如果稍后访问代码意外变得更加宽松，您就不会出现测试间隙。但这是更微妙的一点。

对于#2，您可以编写一个设置“记住我标志”的请求规范，然后注销，然后再次登录并检查您是否到达了预期的页面。通过填写凭据、选中记住我框、单击按钮来从浏览器驱动所有这些。

问题是：为什么？你为什么要测试这个？您使用的是国产登录系统吗？除非您是一流的安全专家，否则非常气馁。如果您没有使用自制系统，而是使用[经过](https://rubygems.org/gems/devise)测试的设计，则不要重新测试库功能。只需测试您的应用程序代码，例如#1 涵盖的某些页面的访问权限。您还可以查看 Devise 随附的测试如何测试这种情况。

希望这可以帮助。

**更新**以澄清 #2 的请求规范。正如@cutalion 的另一个答案中所提到的（他的正确答案值得称赞），用于验证登录是否可以在会话关闭期间持续存在的机制内置于 ActionDispatch IntegrationTest 框架中`open_session`。

请参阅包含示例的[Rails 文档 IntegrationTest API 。](http://api.rubyonrails.org/classes/ActionDispatch/IntegrationTest.html)一篇[博客文章](http://weblog.jamisbuck.org/2006/3/9/integration-testing-in-rails-1-1)扩展了自定义 DSL 的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:09:34.397

我认为您应该尝试使用标准 rails 方法进行集成测试 - `open_session`.
就我个人而言，我从来没有这样做过，也不能给你测试过的代码。

[请参阅rails guides](http://guides.rubyonrails.org/testing.html#integration-testing-examples)上的多个会话示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-31T18:08:08.110

这似乎仍然是 2018 年反复出现的问题。一些基本文档显然缺失。我终于找到了一个解决方案：“给我看饼干”宝石。

切换 Capybara 驱动程序会清除会话，因此一种可能性是在测试中间更改驱动程序以模拟浏览器关闭/打开。但是让替代驱动程序（例如 selenium 或 selenium_chrome）工作并非易事，此外这种方法可能会删除*所有*cookie。

这个简单的命令也重置了会话：`Capybara.reset_sessions!`但问题再次是它不仅破坏了会话 cookie，而且还破坏了永久 cookie。所以它对于测试“记住我”的功能是没有用的。

我终于决定给[我看饼干](https://github.com/nruth/show_me_the_cookies)宝石。安装和实施非常简单。我只是按照提供的 rspec 说明进行操作。该命令`expire_cookies`提供了令人满意的退出和打开浏览器的模拟。

# android - 通过应用程序通过 HttpPost 登录网站

> ID：11352697
> 
> 赞同：2
> 
> 时间：2012-07-05T21:17:20.763
> 
> 标签：android, android-intent, http-post, android-webview

你好Stackoverflowers！

我编写了一个相对简单的应用程序，它由一个登录文本字段、一个密码文本字段和一个登录按钮组成。

我的目标是当用户输入登录信息并触摸登录按钮时，应用程序会将用户登录到我指定的网站并以不同的意图或 WebView 打开它。我当前的实现使用 WebView 打开一个新活动并传入登录信息。我的新活动代码如下：

```
setContentView(R.layout.web);

    try {
        //add the users login information(username/pw) to a List
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("email", "random@gmail.com"));
        nameValuePairs.add(new BasicNameValuePair("password", "password1"));

        //declare a new HttpClient
        HttpClient httpclient = new DefaultHttpClient();

        //set the HttpPost to the desire URL
        HttpPost httppost = new HttpPost(URL_STRING);

        //set the entity to a new UrlEncodedForm with the login info and type
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));

        //store the response
        HttpResponse response = httpclient.execute(httppost);

        //get the data from the response
        String data = new BasicResponseHandler().handleResponse(response);            

        //get the webview from the xml
        WebView webview = (WebView)findViewById(R.id.webView);

        webview.setWebViewClient(new WebViewClient() {  
            @Override  
            public boolean shouldOverrideUrlLoading(WebView view, String url)  
            {  
                view.loadUrl(url);  
                return true;  
            }  
        }); 

        //load the return website from the server
        webview.loadDataWithBaseURL(httppost.getURI().toString(), data, "text/html", HTTP.UTF_8, null); 
```

这成功让我登录到 URL（一个 https 站点）并打开页面，但是如果您尝试单击网站上的任何按钮，它会将您带回 WebView 中的登录页面，并且它不会显示很多网站上的属性（图表/图形）。

这可能是饼干吗？

那么有没有办法通过新的意图发送登录信息？或者我的 WebView 实施有解决方案吗？

（这是一个相对相似（ish）的问题，从未得到明确的答案[Android SSO (Single sign-on) for app](https://stackoverflow.com/q/3587375)）

感谢您的时间！我真的很感谢你看看我的问题。

**编辑**：所以 giseks 的解决方案对我有用，让网页留在 WebView 中，但是页面上的图表/图形/等仍然没有显示，解决方案就像为 WebSettings 启用 javascript 一样简单

```
webview.getSettings().setJavaScriptEnabled(true); 
```

这是 Google 的 WebSettings Android API 供参考：[WebSettings](http://developer.android.com/reference/android/webkit/WebSettings.html)

这对我有帮助，希望对你有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:52:35.367

我的猜测是您的应用程序没有正确处理 cookie。看看这个问题，它可能会有所帮助。

[Android 上的 WebView 和 Cookie](https://stackoverflow.com/questions/2566485/webview-and-cookies-on-android)

**编辑**

在您的代码中，您似乎只将从请求中检索到的 html 传递给 WebView。饼干似乎在某个地方迷路了。我建议你另一种方法。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    WebView webv = (WebView)findViewById(R.id.MainActivity_webview);         
    webv.setWebViewClient(new WebViewClient(){
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
    });

    String postData = FIELD_NAME_LOGIN + "=" + LOGIN +
            "&" + FIELD_NAME_PASSWD + "=" + PASSWD;

    // this line logs you in and you stay logged in
    // I suppose it works this way because in this case WebView handles cookies itself
    webv.postUrl(URL, EncodingUtils.getBytes(postData, "utf-8"));
} 
```

# apache - 我应该为我的 VPS 使用 FastCGI 还是 SuPHP？

> ID：11352698
> 
> 赞同：3
> 
> 时间：2012-07-05T21:17:27.123
> 
> 标签：apache, fastcgi, vps, suphp, opcode-cache

我有一个运行 Centos 的 VPS 和一个 Cpanel 安装。2 GB 内存。

它目前运行 Apache 1.3.42。我也可以使用 2.0.64 或 2.2.22，我应该升级吗？

PHP (5.3) 作为 SuPHP 运行。

我想知道我是否应该坚持当前的设置？还是我应该实现 FastCGI 并使用 PHP 操作码缓存（APC、XCache 等）？

如果可能的话，我想使用操作码缓存来加快我的页面生成时间，但是我读过在 VPS 上运行 FastCGI 会增加服务器负载。

SuPHP 与 FastCGI 的安全隐患是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-08T05:08:50.430

通常，FastCGI PHP 处理程序比 suPHP 更快地处理 PHP 请求。当您想减少 CPU 使用率时，FastCGI 通常是不错的选择。它利用服务器的免费 RAM 将 PHP 脚本存储在内存中，而不是为每个传入的 PHP 请求启动一个单独的 PHP 进程。换句话说，与 suPHP 不同，FastCGI 不需要每个 PHP 请求执行单个 PHP 进程。但是，这种方法有一些缺点，通常，FastCGI 是内存密集型的，因为它会在 RAM 中保持 PHP 会话在后台打开，以便更快地访问。当您有大量可用的可用 RAM 并且由于 suPHP 处理程序而遇到过多的 PHP 执行请求时，FastCGI PHP 处理程序是理想的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T10:03:18.940

我会推荐 FastCGI PHP 处理程序，因为 FastCGI 是一种比使用 suPHP 更快的方式来处理 PHP 请求。FastCGI 擅长通过利用服务器的可用 RAM 将 PHP 脚本保存在内存中来降低 CPU 使用率，而不必为每个脚本启动单独的 PHP 进程和每个 PHP 请求，它的主要好处是 CPU 性能和使用操作码缓存的能力。

# cucumber - Cucumber::Rake::Tasks 不使用 ruby --1.9？

> ID：11352704
> 
> 赞同：0
> 
> 时间：2012-07-05T21:17:52.607
> 
> 标签：cucumber, rake, jruby, factory-bot

我们正在尝试使用 Rake 在我们的构建服务器上运行 Cucumber 测试。几周以来一切都运行良好，但昨晚我们开始看到错误

```
C:\jruby-1.6.7\bin\jruby.exe --1.9 -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) C:\jruby-1.6.7\bin\rake manual_tests
(in <local_folder_name>)
C:/jruby-1.6.7/bin/jruby -I "C:/jruby-1.6.7/lib/ruby/gems/1.8/gems/cucumber-1.2.1/lib;lib" "C:/jruby-1.6.7/lib/ruby/gems/1.8/gems/cucumber-1.2.1/bin/cucumber" --dry-run --format html --out results/manual-tests.html --format progress --tags ~@wip --tags @manual
C:/jruby-1.6.7/lib/ruby/gems/1.8/gems/factory_girl-3.1.0/lib/factory_girl/null_factory.rb:9: syntax error, unexpected ':'

delegate :defined_traits, :callbacks, :attributes, :constructor, to: :definition
                                                                   ^ (SyntaxError) 
```

经过进一步调查，我们发现这是 Ruby --1.9 的新哈希语法，所有其他网站都建议在 jruby 中升级或指定使用 --1.9。然而，我们已经设置了所有可能的选项来使用 Ruby 1.9，但我们仍然看到这个错误。

更奇怪的是，我们还使用 Rake 运行一些 rspec 单元测试，使用相同的代码库，只是测试不同。它在 rspec 中工作得很好，让我们想知道这个错误是否与 Cucumber::Rake::Tasks 没有认识到我们在 Ruby 1.9 中有关

这是正在运行的命令行参数，您可以清楚地看到它正在运行--1.9：

```
 C:\jruby-1.6.7\bin\jruby.exe --1.9 -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) C:\jruby-1.6.7\bin\rake manual_tests
(in <local_folder_name>)
C:/jruby-1.6.7/bin/jruby -I "C:/jruby-1.6.7/lib/ruby/gems/1.8/gems/cucumber-1.2.1/lib;lib" "C:/jruby-1.6.7/lib/ruby/gems/1.8/gems/cucumber-1.2.1/bin/cucumber" --dry-run --format html --out results/manual-tests.html --format progress --tags ~@wip --tags @manual 
```

如果有人对如何解决这个问题有任何想法，或者甚至为什么它会在没有任何明显相关更改的情况下开始发生，我们将不胜感激。

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:00:59.873

我们终于解决了这个问题，正如预期的那样，当 JRuby 和 Cucumber 设置为使用 --1.9 时，当我们尝试通过 rake 运行它时，它仍在尝试使用 --1.8。为了解决这个问题，我们为构建创建了一个 rake 环境变量：

```
JRUBY_OPTS=--1.9 
```

我们仍然不确定为什么这之前有效，并且最近才开始失败，所以如果您有任何想法，请随时发表评论。谢谢。

# dvcs - Jira DVCS 连接器未将提交链接到问题

> ID：11352705
> 
> 赞同：2
> 
> 时间：2012-07-05T21:17:54.953
> 
> 标签：dvcs, jira, ondemand

我试图弄清楚 DVCS 连接器插件是如何工作的。我试图将我的提交链接到 Jira 问题。

据我所知，我的设置似乎是正确的。至少它不会抱怨任何事情。

我将我的问题添加到“MBL-10 修复了一些小问题...”之类的评论中，但它们与问题无关。

当我尝试按下“强制同步”按钮时，它会显示“7 小时前的最后一次提交”，而且一整天都在说。

以前有人遇到过类似的问题吗？

顺便说一句，我正在使用 Jira OnDemand。

# android - AOSP 的 Android 设备配置

> ID：11352709
> 
> 赞同：48
> 
> 时间：2012-07-05T21:18:17.477
> 
> 标签：android

我已经下载了安卓源代码。现在我想为我自己的设备（LG GT540）制作它。我听说您需要为此创建一些“设备配置”。虽然已经有几个开发者为我的设备创建了设备配置，但​​我想创建自己的，只是为了学习。
我看到了很多像 BoardConfig.mk、AndroidProducts.mk 等文件。但不知道它们是做什么的。此外，它们还包含很多配置。除此之外，没有很好的文档。
任何有 Android 移植和设备配置经验的人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-07-05T22:11:59.933

对...所以您想构建自己的设备树，请继续阅读。

***免责声明：***这绝不是完整的，并且会有遗漏，因为我已经解释了所有这些，并复制粘贴了我在自己的设备树上的某些位。

例如，设备树`/device/lg/gt540`将包含以下 make 文件：

*   **Android.mk** - 这将告诉构建系统包含并专门为您的设备构建源代码。请参阅下面的示例。这取决于设备和硬件，您可以在示例设备树下拥有 libsensors、liblights、libcamera 子目录，即`/device/lg/gt540/libsensors`,`/device/lg/gt540/liblights`等`/device/lg/gt540/libcamera`。
*   **AndroidBoard.mk** - 这是用于内核的，构建系统使用它来放置内核映像（几分钟后会详细介绍）
*   **AndroidProducts.mk** - 指定适当设备的 make 文件，用于构建。即`/device/lg/gt540/device_gt540.mk`，这也是具体的。
*   **device_xxxxx.mk** - 指定要复制到最终输出中的属性和附加内容，在这种情况下，它可以是例如，`device_gt540.mk`
*   **BoardConfig.mk** - 这是所有内容的核心，这是设置编译器条件标志、分区布局、引导地址、ramdisk 大小等的地方。

让我们看看其中的每一个，看看它们都适合哪里。

***安卓.mk：***

```
ifeq ($(TARGET_BOOTLOADER_BOARD_NAME),xxxxx)
    include $(call all-named-subdir-makefiles, recovery libsensors liblights libcamera ....)
endif 
```

这就是构建将如何使用它来构建恢复、传感器、灯光和摄像头（当然会有更多），它的意思是“ *Yo Builder，进入每个指定的目录，并构建各自的源 plskthxbai* ”

***AndroidBoard.mk：***

```
LOCAL_PATH := device/lg/gt540/

#
# Boot files
#
TARGET_PREBUILT_KERNEL := $(LOCAL_PATH)/kernel

file := $(INSTALLED_KERNEL_TARGET)
ALL_PREBUILT += $(file)
$(file): $(TARGET_PREBUILT_KERNEL) | $(ACP)
    $(transform-prebuilt-to-target) 
```

现在，这是告诉构建系统，能够将此内核放入`out/target/product/lg/gt540`（注意与设备树目录的相关性？）

***安卓产品.mk：***

```
PRODUCT_MAKEFILES := \
    $(LOCAL_DIR)/device_gt540.mk 
```

它在' *Yo Builder中告诉构建，请阅读该设备制作文件并在构建完成后处理它。*'

* **device_xxxxx.mk：（对于本例，device_gt540.mk）***

```
PRODUCT_NAME := lg_gt540
PRODUCT_DEVICE := gt540
PRODUCT_MODEL := LG GT 540

PRODUCT_COPY_FILES += \
    ... specific ...

PRODUCT_PROPERTY_OVERRIDES := \
    ro.com.android.dateformat=dd-MM-yyyy \
     ... more stuff ... 
```

在这种情况下，设备的所有细节（例如驱动程序、专有库、专门为设备支持的脚本）都将被复制到`out/target/product/lg/gt540/system/`这里。注意属性的覆盖，这些最终在Android ROM`build.prop`的根目录中找到。`/system`

***BoardConfig.mk：***

```
LOCAL_PATH:= $(call my-dir)

TARGET_NO_BOOTLOADER := true
TARGET_PREBUILT_KERNEL := device/lg/gt540/kernel
TARGET_PREBUILT_RECOVERY_KERNEL := device/lg/gt540/recovery_kernel

# This will vary from device!
TARGET_BOARD_PLATFORM := msm7k
TARGET_ARCH_VARIANT := armv6-vfp
TARGET_CPU_ABI := armeabi
TARGET_CPU_ABI := armeabi-v6l
TARGET_CPU_ABI2 := armeabi

# OpenGL drivers config file path
BOARD_EGL_CFG := device/lg/gt540/egl.cfg

# Dependant, not to be taken literally!
BOARD_GLOBAL_CFLAGS += -DHAVE_FM_RADIO

# Dependant, not to be taken literally!
BOARD_KERNEL_BASE := 0x02600000

# this will be device specific, and by doing cat /proc/mtd will give you the correct sizes
BOARD_BOOTIMAGE_PARTITION_SIZE     := 0x00480000
BOARD_RECOVERYIMAGE_PARTITION_SIZE := 0x00480000
BOARD_SYSTEMIMAGE_PARTITION_SIZE   := 0x0cf80000
BOARD_USERDATAIMAGE_PARTITION_SIZE := 0x0d020000
BOARD_FLASH_BLOCK_SIZE := 131072 
```

这是一段摘录，请注意我们如何指定内核的基地址，这是`boot.img`编译完成后生成的获取方式，然后再次被放入`out/target/product/lg/gt540/boot.img`. 此外，更重要的是，我们告诉构建系统使用目标平台来交叉编译源代码 (*TARGET_BOARD_PLATFORM*/*TARGET_CPU_ABI*) 那里会有更多信息，例如要传递给编译器的条件标志，例如一个例子。我们指定了指令`HAVE_FM_RADIO`来告诉它，在处理 FM 广播系统的源时，有条件地编译部分源。同样，这是特定于硬件的，里程会有所不同，这也适用于引导地址。简而言之，这就是说'*Yo Builder，阅读该死的变量并记住它们并在交叉编译这些源文件时应用它们！*'

现在显示了每个 Android 构建生成文件的内部结构。

现在，就它的`vendor/`一部分而言，在 AOSP 中，再次简单地与`device/`树相关并对应，就像继续这个示例一样，`vendor/lg/gt540/`它被`lunch`. 那里有更多的 make 文件，但普遍的共识是有一个名为的目录`proprietary`，其中包含被复制的专有库（由于关闭源等）。库的复制在文件*device-vendor-blobs.mk*中指定，在本例中为`gt540-vendor-blobs.mk`.

当魔术发生时，请执行以下操作：

```
. build/envsetup.sh 
```

这是读取在每个`device/`子目录中找到的整个条目并“记住它们”，因此构建系统知道使用什么类型的目标等。

当`. lunch`被调用时，会出现一个菜单，提示您选择构建所需的设备。现在进行构建的最后一步也是最后一步......

```
make -j5 > buildlog.log 2>&1 
```

我`multitail`在另一个终端上运行并监视`buildlog.log`文件以检查并确保其构建。

最后一步将取决于您拥有多少核心（通常为 n 个核心 + 1），构建需要一段时间，GB 构建在我运行 Arch Linux 64 位的笔记本电脑上需要 40 分钟，ICS 构建大约需要 2 小时 30 分钟。因此，里程会因您的机器所具有的马力类型而异。

构建完成后，会响起一个小铃铛，在所述日志文件的底部，我看到：

```
Combining NOTICE files: out/target/product/xxxxx/obj/NOTICE.html
Target system fs image: out/target/product/xxxxx/obj/PACKAGING/systemimage_intermediates/system.img
Install system fs image: out/target/product/xxxxx/system.img
out/target/product/xxxx/system.img+ total size is 108776448 
```

作为感兴趣的 JBQ（Jean Baptiste Queru - 管理/分发来自 Google 的源代码的“老板”），他的构建步骤是......

```
make -j32 
```

是的！32核！那个……很给力。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T10:41:39.367

这里有一些信息：http: [//elinux.org/Android_Device](http://elinux.org/Android_Device)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:52:01.100

对于任何为设备构建 Android 的人来说，这里是一个极好的资源： [http ://com.odroid.com/sigong/nf_file_board/nfile_board_view.php?bid=98](http://com.odroid.com/sigong/nf_file_board/nfile_board_view.php?bid=98)

（ODROID 中 Android 平台开发的实用现实方法）

尽管其中的一些内容是 ODROID 板所特有的，但它仍然提供了对 Android 内部工作原理和新板的必要定制的深入了解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T18:50:30.503

如果您想了解硬件方面的问题，我发现的信息量最大的资源可能是：

[http://source.android.com/compatibility/overview.html](http://source.android.com/compatibility/overview.html)

通读他们为希望构建 Android 设备的制造商编写的文档，这是您会发现的最彻底/完整的参考资料。

# html - 通过 VBA 在 Internet Explorer 上控制打开/保存/另存为对话框

> ID：11352712
> 
> 赞同：0
> 
> 时间：2012-07-05T21:18:22.380
> 
> 标签：html, internet-explorer, vba

我目前正在研究 VBA 代码以自动与带有价格的网页进行交互。我设法到达可以下载文件（csv 格式）的网页并识别需要调用 Click 方法的 DOM 元素对象。URL 无法访问文件（它们可能不存在事件，因为单击元素会运行 javascript 代码）。如果我单击它们，则会出现在 IE 中打开/保存/保存窗口。我想知道如何在其中自动选择一个选项（打开、保存和另存为）（我试图发送密钥，但不知何故不起作用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:01:56.937

您的部分问题还不清楚，但我会尽力提供帮助。虽然我不确定您将如何从对话框中选择一个选项，但您可能能够检查 javascript 以找出它在做什么，并使用以下脚本执行功能重新创建其中*一部分*所需的功能js，即决定在哪里查找所需文件的部分。

```
objIE.Document.parentWindow.ExecScript "alert('yep, it worked!')" 
```

当然，您可以编写一个完整的 .js 文件，使用 FileSystemObject（或其他方式）导入它，然后使用 ExecScript 运行它。

希望有帮助:)

# c++ - 蓝牙：使用 Bluez 检测事件

> ID：11352717
> 
> 赞同：7
> 
> 时间：2012-07-05T21:18:49.247
> 
> 标签：c++, linux, bluetooth, bluez

*   我们正在尝试检测 C/C++ 中的事件。
*   我们在 Linux 上使用 Bluez 作为我们的蓝牙库。
*   我们的目标是在触发该事件时运行外部脚本。
*   具体来说，我们有一个摩托罗拉 H730 耳机，上面有一个按钮，我们正在寻找检测该按钮的按下。
*   我们已经配对了蓝牙设备 (hcitool)，我们可以连接到它 (bluez-test-audio)，但有兴趣将该方法迁移到 C/C++。
*   连接设备并按下按钮时 hcidump 的输出为：

    HCI 嗅探器 - 蓝牙数据包分析器 2.2 版
    设备：hci0 snap_len：1028 过滤器：0xffffffff

    > HCI 事件：模式更改 (0x14) plen 6
    > 状态 0x00 句柄 21 模式 0x00 间隔 0
    > 模式：活动
    > ACL 数据：句柄 21 个标志 0x02 dlen 17
    > L2CAP(d)：cid 0x0041 len 13 [psm 0]
    > < ACL 数据：句柄 21 个标志0x00 dlen 14
    > L2CAP(d)：cid 0x0047 len 10 [psm 0]
    > < ACL 数据：处理 21 个标志 0x00 dlen 22
    > L2CAP(d)：cid 0x0047 len 18 [psm 0]
    > < ACL 数据：处理 21 个标志 0x00 dlen 22
    > L2CAP (d)：cid 0x0047 len 18 [psm 0]
    > HCI 事件：已完成数据包的数量 (0x13) plen 5
    > 处理 21 个数据包 1
    > ACL 数据：处理 21 个标志 0x02 dlen 18
    > L2CAP(d)：cid 0x0041 len 14 [psm 0]
    > < ACL 数据：句柄 21 标志 0x00 dlen 14
    > L2CAP(d)：cid 0x0047 len 10 [psm 0]
    > HCI 事件：已完成数据包数 (0x13) plen 5
    > 处理 21 个数据包 1
    > HCI 事件：已完成数据包数 (0x13) plen 5
    > 处理 21 个数据包 1
    > HCI 事件：数量已完成数据包 (0x13) plen 5
    > 处理 21 个数据包 1
    > HCI 事件：模式更改 (0x14) plen 6
    > 状态 0x00 处理 21 模式 0x02 间隔 2048
    > 模式：嗅探

*   我们一直在寻找蓝牙文档并没有取得太大的成功。
    我们如何使用 Bluez 在 C/C++ 中检测蓝牙事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-08T18:37:20.177

我去年做了类似的事情。我选择的方法是使用[libdbus-c++](http://dbus-cplusplus.sourceforge.net/)生成 c++ 代理对象/类，以通过 dbus 与 bluez 进行通信。

*   确定耳机实现的蓝牙接口。我使用了[d-feet](https://wiki.gnome.org/action/show/Apps/DFeet?action=show&redirect=DFeet)并在连接设备时对其进行了探索。您可以在此处手动控制和读取耳机的状态，这对于调试非常有用。
*   生成、查找或创建所需接口的 dbus xml 描述。我通过将 api 规范从[bluez api 文档](https://git.kernel.org/cgit/bluetooth/bluez.git/tree/doc)转换为 xml 手动完成了这项工作，但是我相信您也可以通过 dbus 自省来创建它们。
*   使用 [dbusxx-xml2cpp](http://%20dbusxx-xml2cpp)生成代理对象
*   确定按下按钮时调用的回调
*   根据需要将代理对象集成到您的代码中

您需要将您的代码链接到 libdbus-c++ 并将其安装在目标上。

您可以使用生成的代理对象来访问耳机的全部功能，它可能比按下按钮更有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:25:26.173

收集的 hcidump 是设备主机和控制器之间的日志。事件是控制器发送到设备主机的事件，命令是发送到设备主机的请求/响应。

Bluez 编程指南：[http://people.csail.mit.edu/albert/bluez-intro/](http://people.csail.mit.edu/albert/bluez-intro/)

# java - 如何刷新 Eclipse 视图插件

> ID：11352718
> 
> 赞同：2
> 
> 时间：2012-07-05T21:18:50.037
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp

我根据 Eclipse 插件视图教程创建了一个简单的视图。我添加了允许我的插件监听调试器更改的功能。我的问题是，每次调试器发生某些事情时，我都希望我的视图能够刷新并使用新信息进行更新。这是我所拥有的/我正在尝试的：

```
 public void createPartControl(Composite parent) {

        listener = new DebugContextListener(this);
        DebugUITools.getDebugContextManager().addDebugContextListener(listener);

        // Check if there is an already started debug context
        IAdaptable dc = DebugUITools.getDebugContext();
        if (dc != null) {
                dataCollection.add(new ProxyScope("hi")); // manually injecting data 
                Object o = dc.getAdapter(IStackFrame.class);
                if (o instanceof IStackFrame)
                        setStackFrame((IStackFrame) o);

                viewer.refresh(); // this doesn't work
        }       

        viewer = new TreeViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL);

        // Set column lines visible, and create two columns
        Tree tree = viewer.getTree();
        tree.setHeaderVisible(true);
        tree.setLinesVisible(true);

        TreeColumn column1 = new TreeColumn(tree, SWT.LEFT);
        column1.setText("Name");
        column1.setWidth(400);
        TreeColumn column2 = new TreeColumn(tree, SWT.LEFT);
        column2.setText("Value");
        column2.setWidth(200);

        drillDownAdapter = new DrillDownAdapter(viewer);
        viewer.setContentProvider(new VariableViewContentProvider());
        viewer.setLabelProvider(new VariableViewLabelProvider());
        viewer.setSorter(new ViewerSorter());
        viewer.setInput(getViewSite());

....

} 
```

所以基本上，我在顶部有所有这些调试监听逻辑，这发生在 if 语句中。我知道我的程序进入了那里。每次发生某些变化时，我都想刷新我的视图，并且我尝试过 viewer.refresh，但它不起作用。我的视图显示的信息基于 dataCollection 对象，因此与 dataCollection.add... 的那一行是我只是手动添加数据，就好像调试器做了什么一样。如果我将该行放在 if 语句之外，那么我的视图可以工作（我猜这只是我第一次启动插件时视图的原始构造），但是当我将它放在 if 语句中时它不起作用，这意味着我的视图永远不会刷新。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T03:52:29.280

`createPartControls`是视图生命周期的时间，其中包含的小部件被创建（当视图最初变得可见时）。此代码仅在视图生命周期中执行一次，因此您不能直接在此处添加任何内容来刷新视图。

Eclipse 部件通常会更新其内容作为对工作台内更改选择的反应（例如，用户可能会单击调试视图中的另一个堆栈框架）。我不确定这是否已经完全满足您的需求，但这肯定是一个好的开始，并且在[Eclipse FAQ](http://wiki.eclipse.org/FAQ_How_do_I_make_a_view_respond_to_selection_changes_in_another_view%3F)中有很好的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:11:11.637

我对 tableViewer 有类似的问题。对于一种情况，简单的 viewer.refresh() 有效，但对于另一种情况，我必须得到一个不那么“漂亮”的解决方案..

我现在的解决方案是不使用 viewer.setInput(null) 将输入设置为 null，然后再次将输入设置为更新的数据。这对我来说是暂时的，因为我没有大量数据。否则，每次更改的创建开销可能不可行。

如果我找到更清洁的解决方案，我会发布它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T23:04:07.087

感谢 Bananeweizen 的回答，我已经能够破解一些与我需要它做的类似的代码，即使可能有更好的方法。我添加了 ISelectionListener，它在选择事件发生时进行监听（这在 ViewPart 类中作为全局变量）：

> ```
> ISelectionListener selectionListener = new ISelectionListener() {
>     public void selectionChanged(IWorkbenchPart part, ISelection sel) {
>        if (!(sel instanceof IStructuredSelection))
>            return;
>        IStructuredSelection ss = (IStructuredSelection) sel;
> 
>        if(sel.toString().contains("org.eclipse.jdt.internal.debug.core.model")){
>            viewer.setInput(getSite());
>        }
>     }
>  }; 
> ```

因此，如果我单击任何调试按钮，它将刷新我的视图。setInput 基本上在 ContentProvider 中调用 getElements() ，它提供了如何在我的视图中形成表格的具体实现。

# windows - 如何知道在 Windows 中复制文件需要多长时间？

> ID：11352720
> 
> 赞同：0
> 
> 时间：2012-07-05T21:18:53.340
> 
> 标签：windows, copy

我需要通过 Windows 操作系统在文件中复制 1TB。

复制完所有文件后，有没有办法知道复制所有文件需要多少时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:21:41.847

如果您要复制 1TB 的文件，我建议您使用类似[Robocopy](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29)的东西。它将总结复制所花费的时间（以及提供许多在复制大文件和/或许多文件时特别重要的其他好处）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:21:53.760

事先和之后打印日期和时间？

或者使用类似[timethis](http://www.microsoft.com/en-us/download/details.aspx?id=3087)的东西。

# apache - How to prevent two links show the same content with .htaccess?

> ID：11352727
> 
> 赞同：1
> 
> 时间：2012-07-05T21:19:24.063
> 
> 标签：apache, .htaccess, mod-rewrite, seo, rewrite

I have this case:

*   /css/ <-- a folder
*   /css/something.css <-- a file

If the user accesses the folder (/css/), I want that Apache returns the file. If the user tries to access the file directly, (/css/something.css), I want that he be redirected to the folder.

How can I do this without getting a loop? I've read a lot but I couldn't figure it out applying two rules, it always returns a loop. Note: this is my first question on Stack Overflow. Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:45:03.540

将这些放在文档根目录中的 htaccess 文件中：

```
# internal rewrite to serve the file
RewriteRule ^css/$ /css/something.css [L]

# check if the actual request was for the file, then redirect
RewriteCond %{THE_REQUEST} ^(GET|POST)\ /css/something.css
RewriteRule ^css/something.css$ /css/ [R=301,L] 
```

# asp.net-mvc - How to send extra data in jqGrid's "Add Row" request?

> ID：11352730
> 
> 赞同：0
> 
> 时间：2012-07-05T21:19:36.213
> 
> 标签：asp.net-mvc, jqgrid, jqgrid-asp.net

*   using jqGrid's ASP.NET MVC component

I have a jqGrid that is working splendidly except for one thing: it's a grid of Shoes that I must associate with a ShoeOwner (object names changed to protect the innocent)

So when I have a grid, it displays only the Shoes that a particular ShoeOwner owns. And when a user of the system decides to add a Shoe, before that request is sent, I need to add an additional parameter to the request that associates this new Shoe with this particular ShoeOwner. (otherwise the request will arrive at the Controller as just a lonely Shoe.)

Since I'm using the MVC component, I can't just stick this into the jqGrid() object when it's instantiated - it seems like I either need to:

*   add the parameter to the set of data that jqGrid will send along when an Add (or edit, for that matter) request is sent (right now it just sends the Shoe information) - the problem with this is that I'd have to programatically add the parameter to the jqGrid after it's instantiated, and so far I have not been able to do that, with either `editParams` or `addParams`.

*   hook into an event right before the request goes out and add the additional information in then. The problem here is I haven't been able to find an event that reliably fires right before the "add a new row" request is sent.

**Does anyone know how I can associate an entity added with jqGrid with the parent entity with which it belongs?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:18:33.393

您可以监听`beforeSubmit`addOptions/editOptions.. 的事件以向请求添加额外的参数。

前任。

```
var addOptions = {
    editCaption: 'Add Post',
    processData: "Saving...",
    width: 420,
    closeAfterEdit: true,
    closeOnEscape: true,

    beforeSubmit: function (postdata, form) {
        var $grid = $(gridName);

            // additional parameters
        postdata.AdditionalData1 = ...
        postdata.AdditionalData2 = ...

        return [true];
    }
};

$(gridName).jqGrid('navGrid', pagerName, {
            cloneToTop: true,
            search: true,
            view: true
        },

editOptions, addOptions, deleteOptions); 
```

# javascript - Mock window.document object for out-of-browser jQuery

> ID：11352731
> 
> 赞同：1
> 
> 时间：2012-07-05T21:19:37.467
> 
> 标签：javascript, jquery, .net, dom

I am looking for a way to replicate the window.document object so that I can run jQuery in a non-browser environment.

My goal is to have a set of javascript unit tests that are exercised with MSTest with the help of a .NET javascript interpreter. I would like to have these javascript unit tests run with the rest of our C# tests.

So far, simple unit tests using the interpreter work fine and behave perfectly, however, throwing jQuery and the use of browser objects into the mix isn't working due to the non-browser environment. I have searched and cannot find any type of mock/fake document object that I could use.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:24:23.340

它不仅仅是文档对象。Jquery 与浏览器基础设施紧密相关，需要完整的 DOM、回调、CSS 支持等。

我在 clr 世界中找不到等价物，但我已经成功在 htmlUnit/rhino 上运行 jquery。

那么，如何使用它呢？最简单的方法是创建一个 Java 命令行应用程序，将 htmlUnit 和 Rhino 作为无头模拟浏览器运行，并注入您想要在命令行上运行的 jsUnit 测试。

如果您想要更好的集成，那么您可以尝试在 IKVM 上运行 htmlUnit 和 Rhino。这样您就可以直接从您的 c# 测试中触发您的测试。

另一种是使用 Selenium Webdriver/OpenQA。它有一个 C# 接口。然后，您可以针对真正的浏览器或无标题等效项运行测试。这是我使用的方法。在开发过程中，我在 Chrome 上运行，所以我可以看到有什么问题。然后我针对 htmlUnit/Rhino 运行它以进行持续集成测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T20:27:18.873

如果你想在 MSTest 中运行 JavaScript 单元测试，那么你应该看看[Chutzpah](https://github.com/mmanela/chutzpah)。它与 Visual Studio 集成，并在测试资源管理器（与常规 C# 单元测试相同的面板）中显示测试和结果。它支持 QUnit、Jasmine 和 Mocha。它使用[PhantomJS](http://phantomjs.org/)无头浏览器，因此它可以处理 DOM 等。

有一个命令行测试运行器，它接受一个 html 文件或一个 js 文件，它有一个 VS 上下文菜单项，用于在选定的文件中运行测试。

[用于测试资源管理器的 Chutzpah 测试适配器](https://visualstudiogallery.msdn.microsoft.com/f8741f04-bae4-4900-81c7-7c9bfb9ed1fe)

[Chutzpah 测试运行程序上下文菜单扩展](https://visualstudiogallery.msdn.microsoft.com/71a4e9bd-f660-448f-bd92-f5a65d39b7f0)

[GitHub 上的 Chutzpah](https://github.com/mmanela/chutzpah)

至于嘲笑文件。我建议您在测试之前在代码中创建所需的任何 DOM 元素。PhantomJS 提供了一个 DOM，因此当测试在 Chutzpah 中运行时，您的 jQuery 代码将能够获取您的元素。

我觉得非常好用。

# authentication - Streaming MJPG with Authentication

> ID：11352734
> 
> 赞同：0
> 
> 时间：2012-07-05T21:19:56.077
> 
> 标签：authentication, video-streaming, mjpeg

I have an MJPG stream I need to embed in a web page. It requires authentication to view, but I do not necessarily want to prompt the user when they view the page.

So, is there a MJPG streamer (built into a browser or Java/Flash based) that supports passing the required credentials to the MJPG stream to authenticate?

The only way I would know how to do that would be to pass the username and password in the URL like this: `http://username:password@[ip address]/`. This doesn't work, unfortunately.

# python - 如何让 for 循环重新评估 while 循环的每次迭代

> ID：11352736
> 
> 赞同：1
> 
> 时间：2012-07-05T21:20:03.697
> 
> 标签：python, for-loop, while-loop, evaluation, flow

代码的问题部分：

```
while counter < length:
    if something:
    else:
        for key,value in dictionary.items():
            if something:
            else:
    counter += 1 
```

该结构是`{ key:[ {key:value,key1:value1}, {key:value,key1:value1} ] }` 计数器（列表索引）的用途。

因此，我在自学 Python (3.2.3) 时编写的一些脚本中多次注意到这一点。

我尝试搜索但没有运气（也许我的搜索词是错误的，谁知道？）我检查了文档，问题似乎是对于 while 语句它说，“while 语句用于重复执行只要表达式为真”。对于 For 语句，它说，“表达式列表被评估一次”。

现在，当我的脚本运行时，它不断收到一个关键错误，因为计数器增加了 1；但是 for 语句没有更新以反映另一个字典列表中的新元素；它仍在使用第一个元素。

我假设 while 循环中的每次迭代都会导致 For 语句重新评估。显然我在这方面是错误的。

现在我可以重写代码来解决这个问题，但是我已经遇到过几次了，我想知道的是如何以这种方式在 while 语句中使用 For 循环但让它重新- 通过 while 循环在每次迭代中评估 For 语句。

谢谢！

更新：我在下面添加了实际代码。如果我只是做错了什么，我不会感到惊讶。我正在查看调试器中的值，当计数从 0 变为 1 时，它从 while 循环的下一次迭代开始。从那里一切都按原样进行，直到它到达 For 循环“for key,value in item.items():”，并且 item.items() 的值根本没有改变。更新更新：在试图弄清楚之后，我很确定它是 v: 中的 for 项目导致了问题。让我们看看我能不能解决它！

固定的！问题在于 v: 中的 For 项，它位于 while 循环之外，通过将其移入循环来解决。

```
def checkDifferences(newFile,oldFile):
    resultDiff = []
    for k,v in newFile.items():
        if newFile[k] != oldFile[k]:
            for item in v:
                count = 0
                lengthList = len(newFile[k])
                newKeys = newFile[k][count].keys()
                oldKeys = oldFile[k][count].keys()                
                while count < lengthList:
                    if newKeys == oldKeys:
                        for key,value in item.items():
                            newValue = newFile[k][count][key] 
                            oldValue = oldFile[k][count][key]
                            if newValue == oldValue:
                                pass
                            else:
                                resultDiff.append((k,count,key, oldValue,newValue))
                    else:
                        newValue = list(newFile[k][count].keys())
                        oldValue = list(oldFile[k][count].keys())
                        keyList = [key for key in newValue if key not in oldValue]
                        print(keyList)
                        for key,value in item.items():
                            if key in keyList:
                                oldValue = oldFile[k][count][oldKey]
                                resultDiff.append((k,count,key, None,newValue))
                            else:
                                oldValue = oldFile[k][count][key]
                            newValue = newFile[k][count][key]
                            if newValue == oldValue:
                                pass
                            else:
                                resultDiff.append((k,count,key, oldValue,newValue))
                            oldKey = key
                    count += 1
     return resultDiff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:42:57.300

`for`每次 for 循环开始时，对语句中的表达式求值一次。由于您已将 for 循环放入 while 循环中，因此每次在 while 循环周围遇到 for 语句时，都会计算表达式。

您的代码还有其他问题。发布一个真实的代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:40:10.150

**我的猜测**是，相信 OP 可能想要遍历`'dict`主字典中包含的 '，以下是一般流程。

```
list_of_dicts = dictionary['key']
for subdict in list_of_dicts:
    print subdict.items() # or whatever 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T00:15:33.523

您的问题对我来说似乎有点含糊，但根据您对结构格式和示例代码的评论，以下几行内容将允许您处理其内容：

```
# for structure { key:[ {key:value,key1:value1}, {key:value,key1:value1}, ... ] }

for dict_list in structure.values():
    if something:
    else:
        for key,value in dict_list.items():
            if something:
            else: 
```

`for`每次从外部字典中检索另一个字典列表时，都会评估内部循环`structure`。我之所以使用`structure.values()`，是因为您似乎对什么`structure`是键不感兴趣。的每个`structure`键似乎都与作为字典列表的 value 相关联，这是`dict_list`上面代码中使用的变量。

在 Python 中，通常不需要计数器或循环索引来处理容器（例如列表或字典）的内容，因为您可以直接使用 a 遍历它们`for`，如图所示。

# python - 如何遍历列表评估列表中每个项目的第一个字符

> ID：11352740
> 
> 赞同：3
> 
> 时间：2012-07-05T21:20:25.547
> 
> 标签：python, list

**问题：** 如何遍历列表，查看每个列表项中的第一个字符。如果第一个字符`= "0"`然后删除“0”然后查看列表中的下一项进行相同的评估。否则：保持原样。

**到目前为止的代码：**

```
gList = ["094G.016", "094G.019", "094G.005", "194G.015"]

for x in gList:
    lGrid[i].lstrip("0")
    print gList
else:
    pass 
```

**期望的输出：**

```
gList = ["94G.016", "94G.019", "94G.005", "194G.015"] 
```

**研究：**

我可以使用`gList.lstrip("0")`从列表中的第一项中删除零，但不知道如何让它移动到下一个条目并重复该过程。

或者：我知道我可以`gList[0][0]`用来选择第一个列表/字符项，但再次需要它循环遍历列表的方式。

**编辑：使用发电机：**

**到目前为止的代码：**

```
def rem0(data):
    (x.lstrip('0') for x in lGrid)
    yield x

for i in rem0(lGrid):
    print i 
```

**期望的输出：**

```
gList = ["94G.016", "94G.019", "94G.005", "194G.015"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:23:15.710

```
>>> gList = ["094G.016", "094G.019", "094G.005", "194G.015"]
>>> [x.lstrip('0') for x in gList]
['94G.016', '94G.019', '94G.005', '194G.015'] 
```

**改进您的方法：** 每次迭代 x 都指向当前项目，因此适用`lstrip()`于 x 而不是`gList`

**使用项目：**

```
for x in gList:  
    x.lstrip("0") 
```

**使用索引**：

```
for index in xrange(len(gList)):   #xrange() or(range() in python 3.x) returns a iterable which contains values from 0 to len(gList)-1 
    gList[index].lstrip("0") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:24:51.390

在 python 文档中查看列表推导的美妙之处。

一个解决方案是

删除项目：

```
[item for item in gList if item[0] != '0'] 
```

或删除前导 '0'

```
[item.lstrip('0') for item in gList] 
```

更新了答案，因为我无法发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T21:39:22.730

要修复您的代码：

```
gList = ["094G.016", "094G.019", "094G.005", "194G.015"]

outL=[]
for x in gList:
    outL.append(x.lstrip("0"))

print outL
# prints ['94G.016', '94G.019', '94G.005', '194G.015'] 
```

正如其他人所说，使用列表理解更容易：

```
>>> [x.lstrip('0') for x in gList]
['94G.016', '94G.019', '94G.005', '194G.015'] 
```

或者，更好的是，一个生成器：

```
>>> (x.lstrip('0') for x in gList)
<generator object <genexpr> at 0x10c27c140>
>>> list(_)
['94G.016', '94G.019', '94G.005', '194G.015'] 
```

**编辑**

您可以轻松地以两种方式制作生成器。

首先是写一个函数：

```
def rem0(data):
    for x in data:
       yield x.lstrip('0')

for i in rem0(gList):
   print i 
```

另一个是您需要的 gen 表达式：

```
for i in (x.lstrip('0') for x in gList): 
   print i 
```

甚至：

```
g=(x.lstrip('0') for x in gList)
for i in g:
    ... 
```

两种方式都打印您想要的输出。

# c++ - std::list<>::splice 使迭代器无效。理由？

> ID：11352742
> 
> 赞同：11
> 
> 时间：2012-07-05T21:20:30.650
> 
> 标签：c++, stl, iterator, invalidation

`std::list<>::splice`我想知道使引用被拼接到新容器中的子序列的迭代器无效背后的基本原理是什么。这对我来说看起来有点不合逻辑，尤其是在标准`std::container::swap`规范的情况下。根据语言标准`std::container::swap` ，不会使任何迭代器失效。这是一个完全合理的实用规范。但是，我想说这`std::list<>::splice`也将从保留迭代器的行为中受益匪浅。

我知道基于迭代器可达性等概念可能存在一些纯粹的学术考虑。但同时`splice`是一个`std::list`特定的操作，这意味着为其提供定制的规范可能不会对一般的 STL 设计。

那是什么？`std::list`它是否会取缔或使某些我无法识别的实际实现变得过于复杂？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T21:29:40.920

在 C++11`splice`中不会使迭代器无效，而是让它们引用`*this`容器中的适当元素。这在 23.3.5.5 中都有描述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T00:42:00.340

如果容器具有自定义的、**不相等（不兼容）的分配器**，则您无法交换指针，您别无选择，只能真正复制元素。

# jquery - jQuery Mobile- Landscape and Portrait Changes

> ID：11352743
> 
> 赞同：0
> 
> 时间：2012-07-05T21:20:43.097
> 
> 标签：jquery, jquery-mobile

Hello stackoverflow community, I just had a quick question regarding landscape and portrait viewing of images on the iphone or any mobile devices. You can head to this site [http://dev1.affectdesign.com](http://dev1.affectdesign.com) to view to problem I'm talking about, the site is incomplete and not as "pretty" as I'd like it yet. But it's coming along. When viewing on the iphone or android in portrait, the app looks how i want it to look image wise. However once you turn it to landscape the images say the same size and just align left. How can i get a static image to adjust to landscape and portrait? I am only proficient in the HTML side of Jquery. Javascript is not my forte by any means, so try to provide a simple solution.

(if the question is answered correctly and easily and viewed a lot, ill create a subdomain with the current site and code for if people want to view this problem later)

Thanks you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:54:42.617

Add this to your stylesheet:

```
img {
   width: 100%;
} 
```

# javascript - 当用户滚动到页面底部时，如何仅加载一次数据？

> ID：11352746
> 
> 赞同：1
> 
> 时间：2012-07-05T21:21:10.970
> 
> 标签：javascript, ajax, scroll, jquery

我有一个从 PHP 脚本动态加载 HTML 的页面，当用户滚动到页面底部时，该脚本会抓取另一个站点的图像链接。问题是脚本需要一段时间才能完成，并且检测用户已滚动到页面底部的功能会被触发多次，并且 HTML 会多次加载，从而导致图像集重复。有没有一种简单的方法让 javascript 等到加载 HTML 后再让函数再次运行？检测/加载脚本如下所示：

```
$(window).scroll(function() {
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
        //alert("at the bottom.");
        $.post("function.php", function(data) {
            $('#wrap').append(data);
            });
    }
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:25:45.777

```
var loadAgain = true;
$(window).scroll(function() {
    if (loadAgain && $(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
        loadAgain = false;
        //alert("at the bottom.");
        $.post("function.php", function(data) {
            $('#wrap').append(data);
            loadAgain = true;
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:25:46.660

设置布尔状态以确保事件在完成之前不会被多次触发。像这样：

```
 var loading = false;
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 10) {
        if (!loading) { 
            loading = true;
            $.post("function.php", function () {
                loading = false;
            })
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:25:04.183

试试这个：

```
var loadFinished = true;
$(window).scroll(function() {
    if (loadFinished && ($(window).scrollTop() >= $(document).height() - $(window).height() - 10)) {
        //alert("at the bottom.");
        loadFinished = false;
        $.post("function.php", function(data) {
            $('#wrap').append(data);
            loadFinished = true;
        });
    }
}); 
```

# php - Wordpress 媒体库访问 PHP

> ID：11352757
> 
> 赞同：0
> 
> 时间：2012-07-05T21:21:53.417
> 
> 标签：php, mysql, wordpress

我试图找到一种从帖子或 wordpress 的内置图像库中提取随机图像的方法。我不确定如何从帖子或媒体库中查询图像 uri - 是否有我可以采用的标签或方法？我应该只用 PHP 写一些东西来手动查询 wordpress 数据库吗？如果是这样，返回图片网址的最有效方法是什么？

PS 我会在 Wordpress Stack 上发布这个，但它看起来更像是一个技术问题，而不是一个特定于 wordpress 的问题，所以我把它带到了这里。Wordpress 堆栈问题有一个不好的习惯，就是没有得到回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:28:47.120

Wordpress 具有内置函数来访问附加到帖子的图像上的数组。我在网上找到了这个功能，它可能正是你要找的。它获取附加到帖子的图像，对它们进行随机排序，并返回第一个的 URL：

```
function random_image_url($size=large) {

    global $post;
    if ( $images = get_posts(array(
        'post_parent' => get_the_ID(),
        'post_type' => 'attachment',
        'numberposts' => 1,
        'orderby' => 'rand',
        'post_mime_type' => 'image',))) {

        foreach( $images as $image ) {
            $attachmenturl=wp_get_attachment_image_src($image->ID, $size);
            $attachmenturl=$attachmenturl[0];
            echo ''.$attachmenturl.'';
        }

    }  else {
        echo '' . get_bloginfo ( 'stylesheet_directory' ) . '/img/no-attachment.gif';
    }
} 
```

[来源](http://wordpress.org/support/topic/random-post-image)

# mysql - 在 MySQL Datagridview 中将单元格内容转换为超链接

> ID：11352761
> 
> 赞同：0
> 
> 时间：2012-07-05T21:21:58.330
> 
> 标签：mysql, vb.net, datagridview

我有一个 datagridview windows 窗体中的 MySQL 表（内置于 Visual Basic）。我表中的一列在每一行中都有电子邮件地址。我希望用户能够单击单元格，它将自动从 Outlook 打开一封电子邮件，其中单元格中的电子邮件地址填充在电子邮件的“收件人：”部分中。

我一直没有成功将它添加到查询和数据绑定完成类中。

```
select name, email, phone, address from t1 where name is like 'A%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:58:38.313

您可以使用 datagridview 单元格单击事件。

```
Private Sub MyDataGridView_CellClick(ByVal sender As Object, ByVal e As DataGridViewCellEventArgs) Handles MyDataGridView.CellClick
  If MyDataGridView.Columns(e.ColumnIndex).HeaderText = "email" then        
    Dim selectedEMailCell As DataGridViewCell = MyDataGridView.Rows(e.RowIndex).Cells(e.ColumnIndex)
    If selectedEMailCell.Value IsNot Nothing Then       
      System.Diagnostics.Process.Start("mailto:" & selectedEMailCell.Value.ToString)
    End If
  End If
End Sub 
```

# macos - transmit vs macfusion (osx), a remote drive using Git

> ID：11352766
> 
> 赞同：4
> 
> 时间：2012-07-05T21:22:20.423
> 
> 标签：macos, git, sshfs

I am a developer and I needed to create a remote drive. At first time it was not problem because I would use Panic Transmit to mount the drive with SSH connection. And I could open, edit and save any file normally.

But this project is using Git (Version Control), so that I couldn't add/commit nothing into repository. If I try commit I get an Input/Output Error.

If I try connect to a server and commit directly there, I couldn't because I dont have credentials there. I need to commit it using my computer. So that I must have the remote drive.

I only get the right way using macfuse/macfusion. Anyone can give any explanation, or have any idea, about that ? Did I do something wrong in Transmit ?

# osx-server - 无法向开发机器上的 Lion Server 进行身份验证

> ID：11352770
> 
> 赞同：0
> 
> 时间：2012-07-05T21:22:35.070
> 
> 标签：osx-server

我有一台从 Snow Leopard Server 升级而来的 Lion Server 机器，也是我的主要开发机器。当我打开 Server 应用程序并选择“This Mac - pro1”来管理服务时，系统会要求我使用管理员名称和密码进行身份验证。因为我是我机器上的管理员，所以我使用了我的用户名和密码，但是当我选择“连接”按钮时，它会抖动并拒绝我访问。

我不知道如何进行。我不确定我是否超过了重试次数限制，但是即使我显然是以自己的身份登录，但执行包括重新启动 Mac 在内的所有操作仍然让我无法对服务器应用程序进行身份验证。任何有关如何诊断此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:34:47.497

找到答案： http: [//support.apple.com/kb/TS3960](http://support.apple.com/kb/TS3960)

当我查看我的 servermgrd.plist 时，我看到 Disabled 键设置为 true。将其更改为 false，保存并重新加载 plist。现在我可以自己登录了。唯一的谜团是它是如何设置的。我正在运行 10.7.4，理论上不应该有相应的问题。

# jquery - Submit iframed form2 inside form1.submit()?

> ID：11352772
> 
> 赞同：1
> 
> 时间：2012-07-05T21:22:43.277
> 
> 标签：jquery, forms, submit

I'm working on a site and I do not have access to the html, but I have a section where I can put custom javascript.

I am trying to take a few fields from an existing form and send them to an external database on a different domain when the user clicks save on the original form.

HTML I cannot change:

```
<form id="settings_form" action="thisdomain.com/savesettings" method="post" enctype="multipart/form-data">
<input type="text" name="fullName" id="fullName">
...
<input type="submit" class="button" value="Save">
</form> 
```

Here's my javascript:

```
$("#settings_form").submit(function(){
  var fd = $("input#fullname").val();           

  var iframe = document.createElement('iframe');
  var uniqueString = "addform";
  document.body.appendChild(iframe);
  iframe.style.display = "none";
  iframe.contentWindow.name = uniqueString;    

  var form = document.createElement("form");
  form.target = uniqueString;
  form.action = "http://externaldomain.com/add.php";
  form.method = "POST";

  var inputn = document.createElement("input");
  inputn.type = "hidden";
  inputn.name = "n";
  inputn.value = fd;
  form.appendChild(inputn);

  document.body.appendChild(form);
  form.submit();      
}); 
```

With this code my iframed form is not sent before #settings_form is sent and the page is refreshed.

If I add "preventDefault();" or "return false;" to the submit() function, it posts properly to the external database, but then I can't submit the original form. Is there any way I can send both forms to their respective locations with a single user click of the "Save" button?

# .htaccess - RewriteCond + RewriteRule redirect with strings and multiple "sub-domains"

> ID：11352773
> 
> 赞同：0
> 
> 时间：2012-07-05T21:22:43.750
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

I have a website running on nginx and my index file is inside a folder. /folder/index.php

I asked my website host to add a "index" directive but they said it is not possible (insecure) and told me to do that by RewriteRule.

So every time that someone type my web address, he need to goes to /folder/file.php

But is not that simple, because I also need that when someone clicks on my banners, I receive the strings from Google URL Builder.

And there is more: my website allows the user to make its own URL, like mydomain.com/user so I already have this RewriteRule:

```
^/([a-z,0-9,A-Z,_-]+)$  /myhotsite.php?ID=$1
flag: Continue (last) 
```

The myhotsite.php handles the query and mount the webpage based on a MySQL consult.

So let me try to explain in topics:

1.  mydomain.com -> /folder/file.php
2.  mydomain.com/?utm_source=blablabla -> /folder/file.php/?utm_source=blablabla
3.  mydomain.com/* -> nothing happens, no redirect, it keeps my current rewrite rule that goes to /myhotsite.php?ID=$1

In case 2, I need to keep the query strings, that will go to Google Analytics (as long as I'm concerned, I need to use QSA, but not sure how to)

So, how do you think that we can solve this in the easiest way?

And which rule will have priority: the one that I already have or the one that you will help me to create?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:46:10.767

1 和 2 都使用以下规则处理：

```
RewriteRule ^/?$ /folder/file.php [L] 
```

查询字符串会自动附加。你需要把它放在你的其他规则之前。

# c++ - c ++如何解决我的内存泄漏？

> ID：11352774
> 
> 赞同：1
> 
> 时间：2012-07-05T21:22:45.443
> 
> 标签：c++, memory, copy-constructor

考虑以下整数的 Binary 类表示的实现：

```
class Binary {
private:
    int *digits;
    int first1;
public:
    Binary() {
        digits = new int[128];
        digits[0]=0;
        first1=0;
    }
    ~Binary() {
        cout<<"deleting"<<endl;
        delete [] digits;
    }
    Binary(const Binary& b){
        digits = new int[128];
        memcpy(digits,b.digits,128*sizeof(int));
        first1=b.first1;
    }
    explicit Binary(double x){
        int n=(int)x,i;
        digits = new int[128];
        for (i=0; n ; i++,n>>=1) digits[i]=(n & 1)? 1:0;
        first1=i-1;
    }
    Binary& operator =(const Binary& b){
        if (this==&b) return *this;
        memcpy(digits,b.digits,128*sizeof(int));
        first1=b.first1;
        return *this;
    }
    Binary(int n) {
        int i;
        digits = new int[128];
        for (i=0; n ; i++,n>>=1) digits[i]=(n & 1)? 1:0;
        first1=i-1;
    }
    void print() {
        for (int i=first1; i>=0 ; i--) cout<<digits[i];
        cout<<endl;
    }
    operator int() {
        int x = 1,sum=0;
        for (int i=0; i<=first1 ; i++,x<<=1) sum+=digits[i]*x;
        return sum;
    }
    Binary& operator +(Binary& a) {
        int overflow = 0;
        Binary* b1=new Binary();
        int max = a.first1>this->first1? a.first1 : this->first1,bit;
        for (int i=0; i<=max ; i++) {
            bit=a.digits[i]+this->digits[i]+overflow;
            overflow=0;
            if (bit>1) overflow=1;
            b1->digits[i]=bit%2;
        }
        return *b1;
    }

}; 
```

和主要使用它：

```
int main() {
    Binary b(91);
    int x=9;
    Binary *b2=new Binary();
    *b2=b+x;
    x=*b2;
    b2->print();
    cout<<" = "<<x;
    cin>>x;
} 
```

让我们谈谈这条线：

```
*b2=b+x; 
```

首先编译器为 int x 隐式分配一个新的二进制实例，然后将其用作加法的参数，然后为加法结果创建一个新的二进制实例，并将其逐位复制到 *b2。

问题是，如果您运行此代码，它只会打印删除 ONCE，而为执行命令创建了 2 个对象。显然有一个泄漏来自添加代码，我在其中明确创建了一个新对象来返回结果。

**Q1**：我说的对吗？

**Q2**：我能做些什么来克服这个问题？

**编辑**：可以在[此处找到有关运算符重载主题的答案和更多信息](https://stackoverflow.com/questions/4421706/operator-overloading)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:39:07.890

摘要：用 分配的对象`new`必须用 删除`delete`。用 分配的对象`new[]`必须用 删除`delete[]`。全局变量和局部变量在其作用域/TU 执行结束时被自动删除。在`Binary& operator +(Binary& a)`你制造一个`Binary`被泄露的，在`main`你制造另一个`Binary`被泄露的。

如果这样写，这些问题就可以避免`operator+`：

```
Binary operator +(Binary& a) const{ //return by value
    Binary b1(*this); //hold it on the stack
    //math here
    return b1; //return by value
} 
```

如果主要你也避免分配：

```
Binary b2 = b+x;
x = b2;
b2.print(); 
```

这将比您的原始代码更快，更易于阅读和理解，并且不会泄漏。

[其他说明]

将 a`std::vector`用于内部数据，而不是管理您自己的动态数组。 `vector`更容易，犯错的可能性也更小。

通常最好尽可能明确地进行转换（如`int`-> ）。`Binary`它增加了打字，但省去了麻烦。这也适用于您的`int`转换运算符。

使您的 const 函数为 const。现在，如果你得到一个`const Binary`，你*几乎*不能用它做任何事情。你不能打印它，你不能添加任何东西......

您似乎每存储一位`int`，这意味着您使用的空间比所需空间多 97%（浪费了 99.99999995% 的值），这很愚蠢。大多数新手都是从`0-9`per开始的`char`，这样只会浪费 50% 的空间。（虽然这仍然是 96% 的值），但是真的很容易理解。

加法的正常方法是这样的：

```
Binary& operator+=(const Binary& rhs) { 
    int max = a.first1>this->first1? a.first1 : this->first1,bit;
    for (int i=0; i<=max ; i++) {
        bit=a.digits[i]+this->digits[i]+overflow;
        overflow=0;
        if (bit>1) overflow=1;
        b1->digits[i]=bit%2;
    }
}  
Binary friend operator+(Binary lhs, const Binary& rhs) {  
{return lhs+=rhs;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:59:39.833

如果你真的只看到一次“删除”，那么这一定是变量 b。`*b2 = b+x`可以通过将 b 转换为 int、添加 x、从中构造一个 Binary 并将其复制到 b2 指向的位置来完成。由于 b2 只是一个原始指针，因此您正在泄漏初始 *b2 实例以及覆盖它的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:59:56.887

您不会在 main 末尾删除 b2。

运算符也应该按值返回，而不是返回分配的 Binary 对象，因为这会泄漏，因为 C++ 不是垃圾收集

operator+ 也应该采用 const 引用。

此外，print、operator+ 和 operator int 应该是 const 成员函数

此外，您不需要动态分配 128 个整数，只需将其设为 128 个整数的数组

```
private:
    int digits[128]; 
```

并删除数字上的删除

另外，你应该在构造函数中初始化它

```
memset(digits, 0, sizeof(digits)); 
```

# caching - grails中springcache插件的使用

> ID：11352776
> 
> 赞同：0
> 
> 时间：2012-07-05T21:23:10.250
> 
> 标签：caching, grails, service, aspectj, ehcache

我一直在尝试将 SpringCache 添加到我的一项 Spring 托管服务中。我使用 STS 作为我的开发 IDE。

这是我所做的：

1.  安装 springcache 1.3.1 插件

2.  向 Config.groovy 添加缓存配置：

    ```
    grails.spring.disable.aspectj.autoweaving = true

    springcache {
      enabled = true
      defaults {
          eternal = false
          diskPersistent = false
      }
      caches {
          tripCache {
              memoryStoreEvictionPolicy = "LRU"
          }
      }
    } 
    ```

3.  在服务中我的测试方法上方添加`@Cacheable`注释如下：

    ```
     int counter = 0

      @Cacheable("testCache")
      String testInc(String x) {
        return (++counter).toString()
      } 
    ```

4.  现在，我从控制器调用此方法，如下所示：

    ```
     def testDashboard() {
        [data:testService.testInc("1")]
      } 
    ```

并且`testInc()`总是返回一个新值，即连续调用返回 1、2、3 等，这让我认为缓存不起作用。我错过了什么并且没有正确打开缓存吗？

我试图查看缓存是否正常工作，我挂钩了 ehcache-2.4.6 的源代码并在 CachingAspect 的 invokeCachedMethod 中设置断点，但是当我运行我的应用程序时，上述方法似乎没有被执行。

我还尝试在缓存中查看“1”的值，看起来它为空，即键“1”没有存储在缓存中。我在控制器测试方法中添加了以下两行：

```
 Ehcache c = springcacheService.getOrCreateCache("testCache")
      String x = c.get("1") 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:37:32.687

基本上，我在这里阅读了 springcache 的文档时被误导了：http: [//gpc.github.com/grails-springcache/docs/guide/3.%20Caching%20Service%20Methods.html](http://gpc.github.com/grails-springcache/docs/guide/3.%20Caching%20Service%20Methods.html)

`Config.groovy`应该有而`grails.spring.disable.aspectj.autoweaving = false`不是`true`.

希望这对那些陷入同一问题的人有所帮助。

# python - 替换numpy数组值python

> ID：11352778
> 
> 赞同：2
> 
> 时间：2012-07-05T21:23:19.750
> 
> 标签：python, numpy, scipy

我在尝试替换 numpy 数组中的值并遇到一个非常奇怪的行为时遇到了很糟糕的情况，我希望有人能解释一下。本质上，我想在遗传算法中进行交叉操作。这是一个简单的例子。我有一个 2 X 10 数组，并希望将第 1 行到第 5 列的所有值与第 2 行到第 5 列的值交换。代码如下：

```
z=np.random.uniform(low=0,high=1,size=(2,10))
zcopy = z
print z

[[ 0.77488523  0.39966358  0.63233664  0.77093136  0.04102615  0.98984184
0.43402537  0.0910648   0.28037032  0.76654885]
[ 0.49980878  0.28161905  0.71972029  0.01208004  0.87851569  0.16853681
0.96325992  0.90886083  0.12344231  0.83665396]]

z[1,range(4)] = zcopy[0,range(4)]
print z

[[ 0.77488523  0.39966358  0.63233664  0.77093136  0.04102615  0.98984184
0.43402537  0.0910648   0.28037032  0.76654885]
[ 0.77488523  0.39966358  0.63233664  0.77093136  0.87851569  0.16853681
0.96325992  0.90886083  0.12344231  0.83665396]] 
```

如您所见，它只是将第 1 行的所有内容复制到两行中。但是，如果我没有指定另一个数组的子集，而只是给它说整数，它就可以完美地工作

```
z[1,range(4)] = range(4)
print z
[[ 0.77488523  0.39966358  0.63233664  0.77093136  0.04102615  0.98984184
0.43402537  0.0910648   0.28037032  0.76654885]
[ 0\.          1\.          2\.          3\.          0.87851569  0.16853681
0.96325992  0.90886083  0.12344231  0.83665396]] 
```

我比较困惑。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:33:09.967

尝试这个

```
z=np.random.uniform(low=0,high=1,size=(2,10))
z[:,range(4)] = z[::-1,range(4)] 
```

前

```
[[ 0.30778241  0.04832341  0.616925    0.81325565  0.44578265  0.59024722 0.32147695  0.68434105  0.47430297  0.06256859]
 [ 0.58522801  0.23922353  0.15388696  0.46400394  0.33126422  0.54651948 0.34724277  0.46974174  0.68646707  0.62549495]] 
```

后

```
[[ 0.58522801  0.23922353  0.15388696  0.46400394  0.44578265  0.59024722 0.32147695  0.68434105  0.47430297  0.06256859]
 [ 0.30778241  0.04832341  0.616925    0.81325565  0.33126422  0.54651948 0.34724277  0.46974174  0.68646707  0.62549495]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:30:05.257

这里似乎有两个问题。

1.  “为什么不`zcopy = z`复制？”
2.  “为什么不`z[1,range(4)] = zcopy[0,range(4)]`交换前四列的值？”

第一个问题的答案是，在 Python 中为变量名赋值不会产生副本。Python 中的变量只是对象的标签；给对象一个新标签根本不会改变对象本身。如果要复制 numpy 数组，具体来说，可以使用该`copy`方法，该方法返回数组的新副本。如：

```
zcopy = z.copy() 
```

第二个问题的答案是您的代码仅分配一组值：`z[1, range(4)]`. 如果要更改两行，则必须分配给两行！在许多语言中，您可以使用`tmp`变量来执行此操作，但 python 提供了一种无需临时变量即可交换值的优雅方式：

```
>>> z[1, range(4)], z[0, range(4)] = z[0, range(4)], z[1, range(4)] 
```

[nye17](https://stackoverflow.com/a/11352882/577088)的答案有点干净，但它做同样的事情。

# jqgrid - 将 shrinkToFit 设置为整数有什么影响？

> ID：11352782
> 
> 赞同：1
> 
> 时间：2012-07-05T21:23:47.643
> 
> 标签：jqgrid

在[jqGrid 选项文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)中，它说您可以将 shrinkToFit 设置为整数，但没有说明它有什么影响。我想知道是否有人知道它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T13:42:56.437

好问题。如果您查看[grid.jqueryui.js](https://github.com/tonytomov/jqGrid/blob/master/js/grid.jqueryui.js)的源代码，您可以看到该选项被传递给内部调用，以`setGridWidth`在调整网格大小时进行：

```
$($t).jqGrid('setGridWidth',ui.size.width,opts.shrinkToFit); 
```

然后，如果您查看[grid.base.js](https://github.com/tonytomov/jqGrid/blob/master/js/grid.base.js)，您可以看到该选项是如何在内部使用的`setGridWidth`：

```
setGridWidth : function(nwidth, shrink) {
       return this.each(function(){
          ...
          if(typeof shrink != 'boolean') {
              shrink=$t.p.shrinkToFit;
          }
          ...
          if(shrink ===false && $t.p.forceFit === true) {$t.p.forceFit=false;}
          if(shrink===true) { 
```

由于每个`shrink`比较都是使用类型检查（with `===`）完成的，因此它们都将是`false`if`shrinkToFit`是一个整数。`shrinkToFit`如果和`forceFit`都设置为 ，这与您将获得的效果相同`false`。中也有类似的逻辑`setColWidth`。`shrinkToFit`但在这两种情况下，都不会使用实际的整数值。

jqGrid [wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)指出

> 如果shrinkToFit的值为整数，则根据它计算宽度。

但是基于此代码分析，我只是看不到这一点。也许这是一个为未来版本准备的功能？或者，也许我错过了什么？无论如何，我建议您现在只需将布尔值传递给`shrinkToFit`.

# css - 如何计算类型的 REM？

> ID：11352783
> 
> 赞同：13
> 
> 时间：2012-07-05T21:24:01.673
> 
> 标签：css

如何为我的类型将 PX 转换为 REM？我已经阅读了 Jonathan Snook 关于使用 REM 的文章，但他使用的是 font-size:62.5%，它默认为您的字体大小为 10px（以便于计算）。如果我要使用 100%、75% 等，我将如何将我的 PX 单位转换为 REM？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-05T21:50:00.157

`Target Size / Base Size = Value`

因为我们可以假设浏览器默认使用 16px（毕竟，这是 Jonathan Snook 所做的假设 62.5% 是 10px），那么你的 Base 是 16。如果你想要 32px，那么`32 / 16 = 2`，想要 40px，然后`40 / 16 = 2.5`想要 24 `24 / 16 = 1.5`。

75% 也是如此……确定 75% 是多少（它是 12）并执行相同的计算。如果你想要 32px，那么`32 / 12 = 2.666`，想要 40px，然后`40 / 12 = 3.333`想要 24 `24 / 12 = 2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-26T01:39:23.060

如果您只是将此代码添加到您的样式文件中

```
html {
  font-size: 62.5%;
} 
```

它将转换 1 rem=10px。现在你将以 10px 为基础工作。所以

```
body {
  font-size: 1.6 rem;
} 
```

你的字体大小为 1.6*10=16 像素。

# svn - .svn/条目的权限

> ID：11352786
> 
> 赞同：0
> 
> 时间：2012-07-05T21:24:33.777
> 
> 标签：svn, permissions

我的应用程序在 tomcat7 下运行，并将文件存储在本地文件系统上。这些文件最终会提交给 SVN。当它们被提交时，.svn 目录的内容如下所示：

```
drwxr-xr-x 6 tomcat7 tomcat7 4.0K 2012-07-05 22:12 .
drwxr-xr-x 3 tomcat7 tomcat7 4.0K 2012-06-16 18:14 ..
-r--r--r-- 1 tomcat7 tomcat7  265 2012-06-16 18:23 all-wcprops
-r--r--r-- 1 root    root     558 2012-06-30 13:53 entries
drwxr-xr-x 2 tomcat7 tomcat7 4.0K 2012-06-16 18:23 prop-base
drwxr-xr-x 2 tomcat7 tomcat7 4.0K 2012-06-16 18:23 props
drwxr-xr-x 2 tomcat7 tomcat7 4.0K 2012-06-16 18:23 text-base
drwxr-xr-x 5 tomcat7 tomcat7 4.0K 2012-06-30 13:53 tmp 
```

请注意，该`entries`目录归 root/root 所有，而所有其他目录归 tomcat7/tomcat7 所有。这目前正在阻止应用程序（以 tomcat7 用户身份运行）删除任何包含提交给 SVN 的文件的目录。

有什么方法可以将 .svn/entries 文件配置为由 tomcat7/tomcat7 拥有，就像 .svn 下的所有其他文件一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:34:12.743

我不是 svn 的任务来处理文件权限。

也许您可以`chown`将工作副本下的所有文件递归到tomcat7：tomcat7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T14:31:27.060

```
chown tomcat7:tomcat7 entries 
```

这是一个迟到的答案，但我刚刚从搜索中发现了这个。

# mysql - MySQL：自动递增减一？

> ID：11352788
> 
> 赞同：1
> 
> 时间：2012-07-05T21:25:02.843
> 
> 标签：mysql, auto-increment

我有一些代码可以从数据库中删除帖子：

```
mysql_query("DELETE FROM `posts` WHERE ID = '$id'"); 
```

现在我想设置自动增量减一以跟上已删除的帖子。这可能吗？如果是这样，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:29:48.300

您可以手动设置该`AUTO_INCREMENT`值（http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html），但这是个坏主意。

首先，假设有 5 个帖子。如果删除了 ID 为 3 的帖子，则无法真正将自动增量设置为 3，因为 ID 4 和 5 仍在使用中。

其次，如果另一个表中对该 ID 的任何引用没有被删除，那么当该 ID 被重用时，这些引用将是错误的。

通常，自动增量值只能使用一次。如果你愿意，你可以解决这个问题，但实际上没有理由这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:32:26.893

你真的不想这样做。

想象一下会发生以下情况：

一个新帖子是用 id 100 发布的 一个新帖子是用 id 101 发布的

所以现在你有两个 101 的 id？如果你的约束允许你，那就不好了。如果他们不让你，那是不可能的。

无论哪种方式，最好让“id 101”永远死去。不会错过的，还有数十亿个数字可供选择……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T21:30:25.600

更改表 yourtable auto_increment=5

也许可以使用子查询来获取计数：

alter table yourtable auto_increment=(select count(*) from yourtable) + 1

你真的确定这是你想做的吗？请记住，如果您删除“中间”行而不是最后一行，这将中断。

# android - 使用 WebView 自动登录 Gmail？

> ID：11352792
> 
> 赞同：2
> 
> 时间：2012-07-05T21:25:12.593
> 
> 标签：android, webview, gmail, android-webview

我想使用用户的 Gmail 用户名和密码在`WebView`. 是否有任何现有代码如何执行此操作，因为我遇到了问题（需要发布哪些隐藏字段，获取/重新注入 cookie）。

我尝试使用 JavaScript 简单地填写用户名/密码字段，这很有效，但是在提交登录表单（再次使用 JavaScript）时，`WebView`询问用户他/她是否希望保存密码，这是我需要的避免（使其真正自动化）。

谢谢，
尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:08:23.587

```
WebSettings mWebSettings = mWebView.getSettings();
mWebSettings.setSavePassword(false);
mWebSettings.setSaveFormData(false) 
```

试试这个，但不确定是否需要两个 setSave[...] 方法。

但是等等：假设你真的只是简单地用 JavaScript 填写登录表单，你会以纯文本形式存储密码吗？如果是这样，你不应该这样做，不仅仅是因为安全问题。我假设您通过对话框询问用户他/她的密码。对很多用户来说，询问密码似乎很可疑。

我建议学习如何保存和恢复 cookie。

# r - 将不规则降水时间序列转换为规则降水时间序列

> ID：11352793
> 
> 赞同：2
> 
> 时间：2012-07-05T21:25:18.040
> 
> 标签：r, xts

我有一个`xts`包含一年降水数据的系列：

```
str(data_prec)
An ‘xts’ object from 2011-01-01 to 2011-12-31 23:55:00 containing:
  Data: num [1:105125, 1] 0 0 0 0 0 0 0 0 0 0 ...
  Indexed by objects of class: [POSIXct,POSIXt] TZ: 
  xts Attributes:  
List of 2
 $ tclass: chr [1:2] "POSIXct" "POSIXt"
 $ tzone : chr "" 
```

部分数据如下：

```
2011-12-15 05:15:00, 0
2011-12-15 05:20:00, 0
2011-12-15 05:25:00, 0.1
2011-12-15 05:30:00, 1.2
2011-12-15 05:31:00, 0.2
2011-12-15 05:32:00, 0.6
2011-12-15 05:33:00, 0.1
2011-12-15 05:35:00, 0.1
2011-12-15 05:36:00, 0
2011-12-15 05:37:00, 0.6
2011-12-15 05:40:00, 0
2011-12-15 05:45:00, 0
2011-12-15 05:50:00, 0.1 
```

我需要通过汇总以前的数据每五分钟获取一次数据。我尝试过使用`aggregate`，`to.minutes5`但`merge`没有成功。我不知道我做错了什么。这是我到达的最接近的方式：

```
align.time(period.sum(data_prec,endpoints(data_prec,"minutes",k=5)),300) 
```

那给了我：

```
2011-12-15 05:15:00, 0
2011-12-15 05:20:00, 0
2011-12-15 05:25:00, 0      
2011-12-15 05:30:00, 0.1    
2011-12-15 05:35:00, 2.1    
2011-12-15 05:40:00, 0.7    
2011-12-15 05:45:00, 0
2011-12-15 05:50:00, 0      
2011-12-15 05:55:00, 0.1
2011-12-15 06:00:00, 0 
```

这就是我要找的：

```
2011-12-15 05:15:00, 0
2011-12-15 05:20:00, 0
2011-12-15 05:25:00, 0.1
2011-12-15 05:30:00, 1.2
2011-12-15 05:35:00, 1.0
2011-12-15 05:40:00, 0.6
2011-12-15 05:45:00, 0
2011-12-15 05:50:00, 0.1
2011-12-15 05:55:00, 0
2011-12-15 06:00:00, 0 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:17:29.527

你没有始终如一地对待时代。按照设计，一分钟的 :00 是该分钟的*开始*- 例如 12:00:00 属于 12:00:00 - 12:59:59.999999 范围，也就是第 12 小时。

因此，您需要将您的时间向后移动一小部分时间，以使其成为我认为您所期望的方式。也就是说，您的“希望”结果也不一致（请参阅我的解决方案下方的添加内容）：

**解决方案**

```
.index(x) <- .index(x) - 1
align.time(period.sum(x, endpoints(x,"mins",k=5)))
                [,1]
2011-12-15 05:15:00  0.0
2011-12-15 05:20:00  0.0
2011-12-15 05:25:00  0.1
2011-12-15 05:30:00  1.2
2011-12-15 05:35:00  1.0
2011-12-15 05:40:00  0.6
2011-12-15 05:45:00  0.0
2011-12-15 05:50:00  0.1 
```

**你的问题**

```
sum(data_prec)  # the sample data you gave (well, not really gave in reproducible form)
[1] 3.0

# your addition
0.1 + 1.2 + 1 + 0.7 + .1
[1] 3.1 
```

高温高压

# c# - 使用视图数据源从实体框架驱动的网格视图中删除表记录

> ID：11352796
> 
> 赞同：0
> 
> 时间：2012-07-05T21:25:22.877
> 
> 标签：c#, asp.net, entity-framework-4

我遇到的问题似乎可能是我的误解或实体框架的错误。

我有一个 .NET 4.0 ASP.NET Web 项目，它仅使用 GridView 和 Entity Framework 视图对象的数据源，只选择了一些列。

实体框架基于 SQL Server 2008 R2 中的数据库模型；表格设计主要是第三范式。

相关对象的快速数据库模式：

[t_User] 用户 ID、bigint、PK FirstName、varchar(50) LastName、varchar(50)

[t_Manager] MgrID, int, PK UserID, bigint, FK

[v_Manager] MgrID, int UserID, bigint FirstName, varchar(50) LastName, varchar(50)

当我将表和视图导入到我的 EF 模型中时，它从 v_Manager 为 PK 分配了 MgrID，我认为这很好。

v_Manager 驱动 ASPX GridView 控件，其中数据源设置为使用 v_Manager 实体的 EF 模型。

GridView 工作正常，我有它，页脚 CreateNew 行命令工作。

当我使用 GridView RowDeleting 触发器删除记录时出现问题，代码如下所示：

```
protected void MgrsGrid_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    // parse userId
    long mgrSelected = long.Parse(e.Values[0].ToString());

    using (DBEntity db = new DBEntity())
    {
        // select mgr object based on userid, (we don't select mgrid for the gridview bind)
        var mgrToDelete = db.t_Manager.Single(m => m.UserID == mgrSelected);

        if (mgrToDelete != null)
        {
            db.DeleteObject(mgrToDelete);
            db.SaveChanges();
            MgrGrid.DataBind();
        }
    }
} 
```

我已经逐步完成了 RowDeleting() 的所有代码，它可以工作并且实际上删除了记录（在 SSMS 中验证），但是一旦 EF 代码运行，我在页面呈现时收到以下错误：

无法更新 EntitySet 'v_Manager'，因为它有一个 DefiningQuery 并且元素中不存在支持当前操作的元素。

我没有尝试更新 v_Manager 也没有从中删除任何内容，我正在使用 t_Manager。我已经对收到的错误进行了堆栈和谷歌搜索，并手动更新了我的 edmx 文件以删除 DefiningQuery，但随后我直接从 SQL Server 2008 收到错误消息，说它无法从 v_Manager 中删除记录，因为它会影响多个表。

我在这里错过了什么吗？我认为从 t_Manager 实体中删除记录并调用 SaveChanges() 只会导致 SQL Server 在 v_Manager 实体上运行 Refresh() 不是吗？

我需要使用 v_Manager 实体来驱动 GridView，但我偷偷怀疑如果我将 GridView 更改为与 t_Manager 绑定，我不会有任何问题。

似乎问题来自由 v_Manager 驱动的 GridView 触发 RowDeleting 事件导致它对 GridViews 数据源运行删除。

有没有办法覆盖这种行为，或者这是设计使然，如果是这样，人们如何在使用视图（大多数数据库将使用）时发现 Entity Framework 有用？

感谢任何人提供的任何帮助，谢谢！

编辑：我应该提到我尝试设置 EnableDelete 标志 = false 并且只导致 Web 表单告诉我在单击 GridView 中的删除链接时数据源不允许删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:43:41.140

Reddit 上的 TobiasFunkeMD 值得称赞（再次感谢！） [Reddit 链接](http://www.reddit.com/r/csharp/comments/w3j9l/c_delete_table_record_from_entity_framework/)

只需添加 e.Cancel = true; 在 GridView.DataBind() 之后；

例子：

```
db.DeleteObject(mgrToDelete);
db.SaveChanges();
MgrGrid.DataBind();

e.Cancel = true; 
```

当您使用 e.CancelBubbling 时，这与在 javascript 中的工作方式相同，本质上它会阻止事件在链上继续进行。

实体框架运行良好，问题是 GridViews 自己的 RowDeleting 事件总是与 GridViews 自己的 DataSource 冲突，无论 RowDeleting 函数中正在做什么。

# sql-server - 删除当前 spid 的临时表

> ID：11352801
> 
> 赞同：0
> 
> 时间：2012-07-05T21:25:52.293
> 
> 标签：sql-server

如何删除临时表并确保它仅适用于当前的@@spid。

```
IF EXISTS
(
SELECT *
FROM tempdb.dbo.sysobjects
WHERE ID = OBJECT_ID(N'tempdb..#tmp')
)
BEGIN
DROP TABLE #tmp
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:27:53.203

A local #temp table is, by definition, only for the current ~~spid~~ `session_id` - so your query already does what you're asking. This is probably a bit simpler though:

```
IF OBJECT_ID(N'tempdb..#tmp', 'U') IS NOT NULL
BEGIN
  DROP TABLE #tmp;
END 
```

But what is the purpose of explicitly dropping this temp table? You know the parser won't let you create another one with the same name in the same batch, right?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:32:32.350

本地 tempdb 表（如`#tmp`）仅对当前会话可见。

全局 tempdb 表（如`##tmp`）在其他会话中也可见。

只要您只使用一个`#`前缀，您的临时表将是您会话的本地表。

有关详细信息，请参阅[有关 SQL Server 中心的这篇文章](http://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/)。

# c - 我将哪个地址系列与 src IPv4 和 dest IPv6 一起使用？

> ID：11352802
> 
> 赞同：1
> 
> 时间：2012-07-05T21:25:54.047
> 
> 标签：c, windows, sockets, ipv6, ipv4

我正在尝试创建一个套接字以允许 IPv4 到 IPv4、IPv4 到 IPv6、IPv6 到 IPv4 和 IPv6 到 IPv6 地址连接。

1.) 协议组合（例如 IPv4 到 IPv6、IPv6 到 IPv4）是否允许？

2.) 如果是这样，我是使用源地址族还是目标地址族来创建套接字？

目前我正在使用源地址，并且在使用 IPv6 源地址和 IPv4 目标地址时收到套接字错误 10014 WSAEFAULT。

代码的相关部分：

```
if ( !strchr( srcAddr, '[' ) )
    sock = socket( AF_INET, SOCK_STREAM, IPPROTO_TCP );
else
    sock = socket( AF_INET6, SOCK_STREAM, IPPROTO_TCP );

if ( !strchr( srcAddr, '[' ) )
{
    rc = bind( sock, ( struct sockaddr * ) &sAddrSrc, 
        sizeof( sAddrSrc ) );
}
else
{
    rc = bind( sock, ( struct sockaddr * ) &sAddrSrc6, 
        sizeof( sAddrSrc6 ) );
}

if ( !strchr( destAddr, '[' ) )
{
    rc = connect( sock, (struct sockaddr *) &sAddrDest, 
        sizeof(sAddrDest) );
}
else
{
    rc = connect( sock, ( struct sockaddr * ) &sAddrDest6, 
        sizeof( sAddrDest6 ) );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:06:32.137

您可以使用 IPv6 套接字连接到 IPv4 地址或 IPv6 地址。IPv4 套接字只能连接到 IPv4 目标。在服务器端，IPv6 套接字可以接受来自 IPv6 或 IPv4 的连接，而 IPv4 套接字只能接受 IPv4 连接。

你真的应该避免自己解析地址，使用`getaddrinfo`. 但是，它不会解析`[]`，因此您必须先提取其中的部分。`getaddrinfo`会告诉您应该使用 IPv4 套接字还是 IPv6 套接字，但是如果您总是想使用 IPv6，您可以设置`ai_family`为`AF_INET6`然后添加`AI_V4MAPPED`到`ai_flags`. 在这种情况下，如果需要，返回的地址将是`::ffff:IPv4`IPv6 套接字连接到 IPv4 目标所需的地址。

在服务器端，使用 IPv6 套接字，然后确保调用`setsockopt(s, IPPROTO_IPV6, IPV6_V6ONLY, &(int){0}, sizeof(int))`以使其同时接受 IPv6 和 IPv4 连接。（请注意，MSVC 可能不接受这种 C99 语法。）

话虽如此，如果您已经调用了与 IPv4 源的绑定，则无法连接到 IPv6 目标，反之亦然，但如果您不在连接端调用绑定，或者等待选择，则答案适用在调用 getaddrinfo 之前要绑定什么地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:07:26.483

不，您不能连接到与您的套接字配置的地址系列不同的地址系列。IPv6 和 IPv4 使用不同的网络堆栈，因此如果您尝试连接到 IPv6 端点，那么您也必须使用 IPv6 作为源地址。

在您的情况下，如果要连接到一个 IPv4 地址和另一个用于 IPv6 地址，则需要 2 个套接字。

在服务器端，还需要 2 个套接字来监听 IPv4 和 IPv6。两个套接字可以绑定到相同的端口号（因为它们都是不同的网络堆栈），但它们将侦听不同的 IP 地址。

这本电子书是 IPv4 和 IPv6 路由的非常好的参考：[Microsoft Windows 的 Tcp/IP 基础知识](http://www.microsoft.com/en-us/download/details.aspx?id=8781)

# javascript - Appending to an object literal

> ID：11352810
> 
> 赞同：0
> 
> 时间：2012-07-05T21:26:24.310
> 
> 标签：javascript

I pass an object literal to a function like this:

```
pre( {model:'MUserTry'} ); 
```

I then wish to augment it, but I end up writing over it like this.

```
 pre : function( o_p ) {
        o_p = {
            result: '0',
            page  : {}
        }; 
```

model is now gone as o_p is completely new

What is the best way to append object properties.

Do you have to explicitly define them now.

```
o_p.result = 0;
o_p.page = {}; 
```

or is there a function that will allow me to write out the object literal and combine them?

kind of like this

```
object1.push (object2 ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:28:23.093

要添加新的对象属性或方法，请使用点运算符：

```
obj.dog = "woof"; 
```

这也是等价的：

```
obj["dog"] = "woof"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:28:08.047

您可以通过分配给它们来添加属性：

```
o_p.result = '0'; 
```

这不会创建新对象并因此保留您的`model`属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T21:39:23.690

在您的代码中，局部变量 o_p 通过分配重新定义：

```
function( o_p ) {
    // assign a new value to local variable o_p
    // object passed as an argument is untouched
    o_p = {
        result: '0',
        page  : {}
    };
} 
```

你可以像这样合并你的对象：

```
function( o_p ) {
    var mergee = {
        result: '0',
        page  : {}
    };
    for (var attrname in mergee) { o_p[attrname] = mergee[attrname]; }    
} 
```

或者，如果你可以使用 JQuery，你可以只使用 extend 方法：

```
function( o_p ) {
    var mergee = {
        result: '0',
        page  : {}
    };
    $.extend(o_p, mergee);
} 
```

# cocoa - How to loop through subviews in order to get the text of NSTextViews

> ID：11352811
> 
> 赞同：0
> 
> 时间：2012-07-05T21:26:39.753
> 
> 标签：cocoa, nstextview, metaclass

I have a NSView which contains several instances of NSTextView. I would like to get the content (string) of each instance. So far, I have this (this code does not compile) :

```
for(NSView *view in [self subviews]) {
    NSLog(@"class: %@ ", [view className]);
if([view isKindOfClass:[NSTextView class]])
    NSLog(@"[view string] %@",[view string]);} 
```

At this point, I expect to be able to send the `string` message to `view` which is an instance of NSTextView, but:

`Error message: No visible @interface for 'NSView' declares the selector 'string'`

Where is my error ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:39:40.157

您可能只需进行简单的转换即可获得编译器的接受。您可以使用局部变量或更复杂的内联转换来做到这一点：

```
for(NSView *view in [self subviews]) {
  NSLog(@"class: %@ ", [view className]);
  if([view isKindOfClass:[NSTextView class]]) {
    NSTextView *thisView = (NSTextView *)view;
    NSLog(@"[view string] %@",[thisView string]);
  }
} 
```

或者

```
for(NSView *view in [self subviews]) {
  NSLog(@"class: %@ ", [view className]);
  if([view isKindOfClass:[NSTextView class]])
    NSLog(@"[view string] %@",[(NSTextView *)view string]);
} 
```

编辑：我会提到我们所说的“鸭子打字”......您可能会考虑询问对象它是否响应您要发送的选择器，而不是它是否是您期望的类（如果它像鸭子一样嘎嘎叫，它是鸭子...）。

```
for(NSView *view in [self subviews]) {
  NSLog(@"class: %@ ", [view className]);
  if([view respondsToSelector:@selector(string)]) {
    NSLog(@"[view string] %@",[view performSelector:@selector(string)]);
  }
} 
```

# jquery - jQuery slideToggle() moves

> ID：11352813
> 
> 赞同：0
> 
> 时间：2012-07-05T21:26:52.563
> 
> 标签：jquery, html, css

I have a slideToggle that shows/hides a table.

jQuery

```
$("#featMoreInfo").click(function() {    
    $("#featben2").slideToggle('slow');
    var txt = $(this).text() == '+ More Info' ? '- Minimize' : '+ More Info';
    $(this).text(txt);
});
$("#featMoreInfo2").click(function() {
    $('html, body').animate({ scrollTop: 0 }, 'slow');
    $("#featben2").slideToggle('slow');
    $("#featMoreInfo").text('+ More Info');
}); 
```

I have a javascript tooltip in some of the columns. Occationally whenever you click `+ More Info` the alignment gets thrown off. Has anyone had this issue before?

![Sometimes Good Slide](../Images/1085faf356a72c9e101d74ce035fd5d9.png)

![Sometimes Bad Slide](../Images/7eaf88d1797aa0e5c6cc1cfae06c3fe8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:42:00.543

这是 jQuery 的一个已知错误，[http://api.jquery.com/slideToggle/#comment-82454830](http://api.jquery.com/slideToggle/#comment-82454830)，这是由于 jQuery 无法计算和呈现表格行/单元格的正确高度。

我在一个项目中遇到了这个问题，最终使用了另一种效果，因为它不稳定，因此不适合生产。

快速搜索并找到了 spankmaster79 的帖子，该帖子回答了这个问题并提出了修复建议，因此这篇帖子可能值得一读。 [jQuery slideToggle 关闭时跳转](https://stackoverflow.com/questions/3004480/jquery-slidetoggle-jump-on-close)

# android - 活动发起不止一次

> ID：11352817
> 
> 赞同：1
> 
> 时间：2012-07-05T21:27:13.540
> 
> 标签：android, android-asynctask, android-activity

我正在编写一个给我带来一些问题的应用程序。我有一个带有按钮的活动 A。当用户按下按钮时，它使用 AsyncTask 类从 Internet 检索数据，当检索到数据时，AsyncTask 类调用在活动 A 中声明的方法，该方法启动新的活动 B。

但这有一个问题，我不知道如何解决。如果用户按下按钮两次（或多次），则两次检索数据并启动两次活动 B。所以，一旦我在活动 B 中，当我按下后退按钮时，活动 B 的实例被破坏但我仍然在活动 B 中（因为它被启动了两次）。

来自 AsyncTask 类的一些下载数据的代码：

```
@Override
protected String doInBackground(String... urls) {
    try {
        String data = downloadUrl(urls[0]);
        return downloadUrl(urls[0]);
    } catch (IOException e) {
        return m_errorCODE;
    }
}

@Override
protected void onPostExecute(String result) {
    ((MainActivity) mParentActivity).displayInfo(result);
} 
```

来自 MainActivity 的方法 displayInfo() 启动活动 B：

```
public void displayInfo(String result) {
        int duration = Toast.LENGTH_LONG;
        Toast toast = null;
        setSupportProgressBarIndeterminateVisibility(false);
        if (result == "404 ERROR") {
            toast = Toast.makeText(getBaseContext(), R.string.error_file_not_found, duration);
            toast.show();
        } else if (result == "CONNECTION_ERROR") {
            toast = Toast.makeText(getBaseContext(), R.string.error_connection, duration);
            toast.show();
        } else {

            Intent intent = new Intent(this, DisplayInfo.class);
            m_data = result;
            intent.putExtra(DOWNLOADED_DATA, m_data);
            intent.putExtra(FORMAT_OK, Boolean.toString(m_formatOK));
            intent.putExtra(URL_FILE, urlFile);
            startActivity(intent);
        }
    } 
```

所以我有三个问题：

1.  我怎样才能只下载一次数据？
2.  我怎样才能只打开一次活动 B？
3.  我怎么知道我的 Activity A 在执行 onPostExecute() 时还活着？

为了解决#2，我尝试在开始活动 B 之前使用 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)。它只打开一个活动 B，但如果我按下回，活动 A 会再次启动活动 B 的另一个实例。

我需要粘贴更多代码吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:31:26.570

对于#1 和#2，您可以在单击按钮后设置的活动中使用实例变量。在按钮的 onClick() 方法中，您可以检查此变量以查看您是否应该启动 AsyncTask 或者它是否已经启动。

对于＃3，您可以测试 mParentActivity 是否不为空？不过我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:32:56.733

AsychTasks 是一种只执行一次的线程。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:34:51.120

我会使用[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)类来代替。网上有很多关于如何将其与 AsyncTask 结合使用的示例。

# c# - Amazon EC2 .NET API，启动随机实例

> ID：11352821
> 
> 赞同：1
> 
> 时间：2012-07-05T21:27:33.827
> 
> 标签：c#, .net, amazon-ec2, cloud, amazon

我有以下问题...我想知道 EC2 .NET API 上是否有一些方法允许我列出给定区域中所有可用的 AMI（如在 Web 界面中）。至少他们的身份证。我想设置一个随机图像，这是拼图中唯一遗漏的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T00:11:06.787

应该很简单。这是一个代码摘录，它将返回所有处于可用或挂起状态的 AMI（添加您自己的过滤器和周围的`try/catch`块）：

```
AmazonEC2 ec2 = AWSClientFactory.CreateAmazonEC2Client(
    "YOUR_ACCESS_KEY",
    "YOUR_SECRET_KEY"
    );

DescribeImagesRequest request = new DescribeImagesRequest();
request.WithFilter(new Filter[] {
    new Filter().WithName("state").WithValue("available", "pending")});
DescribeImagesResponse ec2Response = ec2.DescribeImages(request); 
```

此查询将带来所有公共和私有 AMI。由于结果集中的结果包含说明实例是公共还是私有的属性（例如`<Visibility>Private</Visibility>`）。

如果您只需要自己的 AMI，请将 添加`.WithOwner("YOUR_AMAZON_ID")`到您的过滤器定义中。例如：

```
request.WithFilter(new Filter[] {
    new Filter().WithName("state").WithValue("available", pending")})
    .WithOwner("YOUR_AMAZON_ID"); 
```

或者

```
request.WithOwner("YOUR_AMAZON_ID"); 
```

如需进一步参考，请参阅[适用于 .NET 的 AWS 开发工具包文档](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/Index.html)。在左侧的树上，选择 Amazon/Amazon.EC2.Model/DescribeImagesRequest 类。此外，[DescribeImages API 参考](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeImages.html)`Filter`包含您可以在此请求中使用的每个名称和可能的值。

PS：由于您明确谈论区域，并且 AMI 没有与之关联的区域，因此您可能正在谈论实例。在这种情况下，有一个类似的请求称为`DescribeInstances`. [在此处](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/Index.html)（Amazon/Amazon.EC2.Model/DescribeInstancesRequest 类）和[此处](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeInstances.html)查找有关它的更多详细信息。

希望能帮助到你。

# android - 不一致的 Android ICS 键盘行为与在 PhoneGap 应用程序中

> ID：11352836
> 
> 赞同：3
> 
> 时间：2012-07-05T21:29:06.677
> 
> 标签：android, html, jquery-mobile, cordova

`<input type="number">`在我的 Phonegap jQuery Mobile 应用程序中使用时，我看到键盘行为不一致。`<input type="number">`在 Android 4.0.3 上，当输入元素获得焦点时，包含正确显示 Android 数字键盘的简单页面。在更复杂的页面上，`<input type="number">`显示默认的 Android 键盘而不是数字键盘。

仅当我在运行 Android 4.0.3 的 Acer Iconia A200 平板电脑上将我的应用程序作为通过 Phonegap 打包的本机应用程序运行时，才会发生这种情况。如果我使用 iOS 5.1.1 在 iPad2 上运行相同的应用程序，所有`<input type="number">`元素都会正确显示数字键盘。如果我在 Acer 平板电脑上的 Google Chrome 下运行此应用程序，则会为所有`<input type="number">`元素显示正确的键盘。

我正在使用 jQuery Mobile 1.1 和 Phonegap 1.8.1。

jQuery Mobile 下有什么东西会导致`type="number"`被忽略吗？当元素获得焦点时，是否有某种方法可以通过 HTML / JavaScript 强制显示数字键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:36:57.903

尝试从您的 CSS 中删除这一行。这条线是为了避免在安卓手机上闪烁，但现在不需要了。

```
.ui-page {
    -webkit-backface-visibility: hidden !important;    
} 
```

我尝试解决 Nexus 上的问题，但尝试解决一个会产生其他问题。升级设备上的转换性能可能很差

参考：[Jquery Mobile 支持的平台](http://jquerymobile.com/test/docs/about/platforms.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:17:21.097

Phonegap、ICS (Android 4.0.3/4.0.4) 和 JQuery Mobile(JQM) 根本不能一起玩！

我遇到了键盘问题、页面（ajax）转换问题、jquery 验证问题——所有这些都让我得出一个令人沮丧的结论，即 ICS 和 JQM 不兼容！

最令人沮丧的部分是，*有时*页面确实可以工作，而其他时候却没有 - 完全不一致的行为！呸！

JQTouch 也不能很好地与 ICS/Phonegap 配合使用......虽然看起来比 JQM 工作得稍微好一些。

据我所知，如果您使用 ICS/Phonegap，则必须实现纯 HTML/CSS/JS 网页。

我所有的测试都是通过 Eclipse 上的 10.1 Samsung Galaxy Tab II 上的 USB 调试完成的。

# javascript - Windows上的红宝石osascript？

> ID：11352837
> 
> 赞同：0
> 
> 时间：2012-07-05T21:29:09.813
> 
> 标签：javascript, ruby

我正在尝试使用我发现的 Ruby 脚本 - 但它失败了，我认为问题在于它使用*osascript*来运行一个小的 javascript 脚本，我怀疑这会使 Ruby 程序特定于 Mac，这是正确的/如果是这样，是否有任何与端口等效的简单窗口？

语言有这么多的 windows 解释器，如果没有 JavaScript 的解释器，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:19:29.997

osascript 不是 javascript，而是 AppleScript——我不知道有任何 Windows 解释器。

# ruby-on-rails - 为“一页”网站推送新版本通知

> ID：11352838
> 
> 赞同：3
> 
> 时间：2012-07-05T21:29:12.277
> 
> 标签：ruby-on-rails, backbone.js

我正在开发一个使用 ROR 和主干编写的应用程序，它基本上是一个使用 ROR 作为 api 并在 Backbone 和 js 模板的帮助下呈现所有 UI 的 1 页应用程序。

当我部署新版本时，我们有不刷新浏览器选项卡的用户，我想确定已部署新版本并向他们推送通知，要求刷新页面。

什么是从客户端确定已部署新版本的好方法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:33:22.540

我可能会创建`/version`一条返回当前部署的 git 修订版的 SHA 的路线。客户端可以定期获取此 url 并查看它是否已更改。

这种方法让服务器不必担心维护当前连接的客户端列表（用于推送通知）。更重要的是，它易于实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T10:13:37.093

这可以在不需要轮询服务器的情况下完成：

客户端应将其版本与每个 APi 调用一起发送到服务器（可以是 HTTP 标头）

如果服务器支持客户端的版本，它将成功并返回所需的数据。

否则，服务器将返回一个错误代码，指出不再支持客户端。UI 然后可以显示一条消息，要求重新加载页面。

在主干方面，您需要覆盖模型的“同步”方法，或配置传输层（默认为 jQuery 以将 HTTP 标头添加到每个 AJAX 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:55:32.557

我也喜欢使用浏览器推送简单：[http](http://pusher.com/) ://pusher.com/为此...所以你可以：

Pivotal Tracker 执行此操作：

*   向用户推送通知，告知他们应该在更改前 15 分钟保存他们的工作
*   向用户推送应用需要刷新的通知

# mongodb - MongoDB MapReduce 返回意外结果并分组两次

> ID：11352839
> 
> 赞同：0
> 
> 时间：2012-07-05T21:29:17.333
> 
> 标签：mongodb, mapreduce, grouping

我正在使用 MongoDB 并想计算集合中每个不同的“concatenated_handles”（字符串类型的字段）的出现次数。

我还必须根据出现的次数进行排序，所以我决定使用 mapreduce，一切顺利，但突然我开始得到意想不到的结果，我没有更改任何代码

这是我的地图：

```
function() { emit(this.concatenated_handles, { count: 1}); } 
```

这是减少：

```
r = function(key, values) { var result = {count : 0}; values.forEach(function(value) { result.count++; }); return result; } 
```

它为某些字段返回正确的值，而为其他字段返回不正确的值。我记录了输出，就在这里（仅显示被窃听的字段）

```
 msdhoni#yuvstrong12:0
    msdhoni#yuvstrong12:1
    msdhoni#yuvstrong12:2
    ....
    ...
    msdhoni#yuvstrong12:255
    msdhoni#yuvstrong12:256
    musclenerd#pod2g:0
    musclenerd#pod2g:1 
```

该字段在其他几行之后再次开始分组（所有重新分组都在最后）

```
justinbieber#pattiemallette:0
justinbieber#pattiemallette:1
justinbieber#pattiemallette:2
justinbieber#pattiemallette:3
justinbieber#scooterbraun:0
justinbieber#scooterbraun:1
justinbieber#scooterbraun:2
kaleycuoco#kunalnayyar:0
kaleycuoco#kunalnayyar:1
kaleycuoco#kunalnayyar:2
kaleycuoco#kunalnayyar:3
kaleycuoco#kunalnayyar:4
kaleycuoco#kunalnayyar:5
msdhoni#yuvstrong12:0
msdhoni#yuvstrong12:1
msdhoni#yuvstrong12:2 
```

上述所有字段都在最后重新分组。它们似乎相同，但它们分组了两次，因此产生了意想不到的结果。所有记录都不会发生这种情况。

我哪里错了？组字段是一个字符串。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:36:11.433

好的，MongoDB 可以递归或部分调用 MapReduce。因此，reduce 函数应该是幂等的。

你会说我的reduce函数也是幂等的，因为值映射的结构是发射的，而reduce返回的值的结构是相同的。但是，需要注意的一个非常重要的一点是 - 每当迭代进行调用时，第一次调用的结果将作为输入传递给第二次调用。

所以在我的情况下，这个 reduce ：

```
r = function(key, values) { var result = {count : 0}; values.forEach(function(value) { result.count++; }); return result; } 
```

对同一键的每次后续调用都将从 0 开始递增并添加 1，而不是添加从前一次迭代传递给它的计数作为 value.count

所以而不是做

```
result.count++; 
```

我应该一直在做

```
result.count += value.count; 
```

这样每次通话都会使用计数，直到上一次通话。

我不确定我是否正确解释了这一点，但这里有很好的记录（在更多技术解释下）：

[http://www.mongodb.org/display/DOCS/MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

# symfony - Symfony2 全球/站点范围的资产

> ID：11352844
> 
> 赞同：6
> 
> 时间：2012-07-05T21:29:26.737
> 
> 标签：symfony, assetic

我正在使用assetic 在 Symfony2 应用程序中管理我的资产。我想知道我应该将我的全球或网站范围的资产放在哪里。他们应该进入 /web 文件夹还是 /app/Resources 文件夹？

这是我目前做事的方式，但我不确定这是否是最佳做法。我搜索了高低的建议。

```
{% stylesheets filter='less'
   '../app/Resources/public/less/test.less'
   '@MopaBootstrapBundle/Resources/bootstrap/less/bootstrap.less'
%}
<link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
{% endstylesheets %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:56:26.030

真的，两者都可以。甚至还有第三种选择，将它们全部放在“核心”捆绑包中。这取决于您希望如何组织项目以及是否打算共享捆绑包。

我会稍微倾向于直接存储在 /web 中。只是因为我几乎总是合并和缩小我的资产，因此，将它们全部保存在一个不可通过网络访问的位置（如`/app/Resources`or`/src/CoreBundle/Resources`然后让`assetic:dump`或`assets:install`将它们推送到正确的网络位置）会更容易/更清洁。

# javascript - jQuery.each 和普通 for 循环之间的 javascript / jquery 范围差异？

> ID：11352845
> 
> 赞同：2
> 
> 时间：2012-07-05T21:29:27.207
> 
> 标签：javascript, jquery

这里有一个有趣的问题，优化了一些代码，但在使用 javascript 循环而不是 jQuery 循环时遇到了范围问题。

例如，如果我们有 3 次“十年”迭代，其值为“1950”、“1960”和“1970”，使用 javascript 循环，我们将一直得到“1970”（循环中的最后一次迭代） “alert”的decade.name，但使用jQuery.each 我们得到每个创建元素的预期值。

问题： - 为什么这适用于 jQuery.each 而不是常规的 javascript 循环？- 我怎样才能使用普通的 javascript for 循环来完成这项工作？

```
$.ajax({
    async: true,
    type: 'post',
    url: 'ajax/products.php',
    data: {
        'action': 'get_filter_decades',
        'data': {
            "search_term": ple.find('input[name="search_term"]').val(),
            "first_letter": $.bbq.getState('first_letter'),
            "category_id": categoryId.val(),
            "original_release_year_range": ple.find('input[name="original_release_year_range"]').val()
        }
    },
    success: function (jsonResponse) {
        if (jsonObj = handleJsonResponse(jsonResponse)) {
            var filterDecadesResultList = filterDecades.find('ul.decade_result_list');
            filterDecadesResultList.hide();
            filterDecadesResultList.empty();

            var originalReleaseYearRange =     $(ple.find('input[name="original_release_year_range"]'));

            // jquery loop
            //$( jsonObj.data.decades ).each( function( i, decade ) {

            // javascript loop (faster!)
            var decadesLength = jsonObj.data.decades.length;
            var listElement;
            var linkElement;
            var decade;

            for (var i = 0; i < decadesLength; i++) {
                decade = jsonObj.data.decades[i];
                listElement = $('<li />');
                linkElement = $('<a />');
                linkElement.text(decade.name);

                if (decade.product_count > 0) {
                    linkElement.append(' (' + decade.product_count + ')');
                    if (decade.selected) {
                        linkElement.addClass('selected');
                    }
                    linkElement.on("click", function () {
                        alert(decade.name);

                        if (!linkElement.hasClass('selected')) {
                            originalReleaseYearRange.val(decade.name);
                            $.bbq.pushState({
                                'original_release_year_range': decade.name
                            });
                            productListPaginate(ple);
                        } else {
                            originalReleaseYearRange.val('');
                            $.bbq.removeState('original_release_year_range');
                            productListPaginate(ple);
                        }
                    });
                }

                listElement.append(linkElement);
                filterDecades.find('ul.decade_result_list').append(listElement);
                // jquery loop
                //});

                // javascript loop
            }

            filterDecadesResultList.show();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:41:23.797

`jQuery.each`是一个函数，并且Javascript函数是自动作用域的，即当它们消失时，它们中的所有变量也是如此。然而，纯 Javascript for 循环没有作用域，因为它是一个流控制——它看起来像一个包含的单元，但原则上它与任何其他关键字或语句没有什么不同。

`jQuery.each`除了将它放在像匿名函数之类的东西中之外，没有什么可以做的事情来使 for 循环范围更广：

```
(function(){
    for (i=0; i<10; i++) {
        // do something
    }
})(); 
```

但这并没有真正改变 for 循环的行为，它只是封装了命名空间，因此在匿名函数（以​​及内部的 for 循环）执行后没有任何东西可以存活。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T21:47:14.707

考虑以下示例：http: [//jsfiddle.net/9vZUg/1/](http://jsfiddle.net/9vZUg/1/)

```
var years = [2010, 2011, 2012];
for (var i=0; i<years.length; i++) {
    var year = years[i];
    var input = document.createElement("input");
    input.type = "button";
    input.value = year;
    input.onclick = function(){
        alert(year); // at this point year will be always be 2012
    }
    document.body.appendChild(input);
}​ 
```

发生这种情况是因为我们在某一时刻创建了函数，但稍后再使用它。目前我们称它为 2012 年，就像上一次迭代一样。我们该如何解决？创建闭包：

```
var years = [2010, 2011, 2012];
for (var i=0; i<years.length; i++) {
    (function(){
        var year = years[i];
        var input = document.createElement("input");
        input.type = "button";
        input.value = year;    
        // now year is stored here and would be unique for each handler
        input.onclick = function(){
            alert(year);
        }
        document.body.appendChild(input);
    })();
}​ 
```

# mysql - 显示任何值而不是 null？

> ID：11352846
> 
> 赞同：0
> 
> 时间：2012-07-05T21:29:31.580
> 
> 标签：mysql, null

*   数据库：网球

*   表：球员

*   一些列：playerno、first name、last name、leagueno。

*   任务：如果联赛编号为NULL，则赋值为1。

*   问题：我们可以在没有合并功能的情况下做到这一点吗？还是没有任何其他功能？

*   我的代码是错误的。我仍然看到 null 而不是 1。此外，由于这种情况，还有不必要的列。

代码：

```
use tennis;
select playerno, name, initials,leagueno,
case 
when leagueno = null then 1 
end
from players
where tennis.players.town = 'Stratford'
order by leagueno desc; 
```

请帮助我正确地做到这一点。我有使用合并的答案。但我想尝试另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:39:08.097

我想你想要的是这样的：

```
use tennis;

select playerno, name, initials,
case 
when leagueno is null then 1 -- note: is null instead of = null
else leagueno
end as leagueno -- This names the result column "leagueno", which may be useful
                -- depending on how you read the result
from players
where tennis.players.town = 'Stratford'
order by leagueno desc; 
```

这基本上是最后一列`leagueno`，除了如果它是`NULL`，你会得到`1`。

# python - 使用python套接字在两台计算机之间进行通信

> ID：11352855
> 
> 赞同：19
> 
> 时间：2012-07-05T21:30:25.493
> 
> 标签：python, sockets, networking

我正在使用这两个程序在我的两台计算机之间进行通信，其中一台是我通过 ssh 连接的，并且我不会在任何一方返回任何内容。它只是运行而不发送任何内容

客户

```
import sys
from socket import socket, AF_INET, SOCK_DGRAM

SERVER_IP   = '127.0.0.1'
PORT_NUMBER = 5000
SIZE = 1024
print ("Test client sending packets to IP {0}, via port {1}\n".format(SERVER_IP, PORT_NUMBER))

mySocket = socket( AF_INET, SOCK_DGRAM )

while True:
        mySocket.sendto('cool',(SERVER_IP,PORT_NUMBER))
sys.exit() 
```

服务器

```
from socket import socket, gethostbyname, AF_INET, SOCK_DGRAM
import sys
PORT_NUMBER = 5000
SIZE = 1024

hostName = gethostbyname( '0.0.0.0' )

mySocket = socket( AF_INET, SOCK_DGRAM )
mySocket.bind( (hostName, PORT_NUMBER) )

print ("Test server listening on port {0}\n".format(PORT_NUMBER))

while True:
        (data,addr) = mySocket.recvfrom(SIZE)
        print data
sys.ext() 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-05T21:49:12.987

问题出在您客户的地址中：

```
SERVER_IP   = '127.0.0.1' 
```

您正在连接到本地计算机并发送数据，而您的服务器位于不同的 ip 上。您需要连接到服务器 ip 或主机名。

您可以通过让客户端先连接来验证这一点（如果无法连接则失败）

```
...

import time

mySocket = socket( AF_INET, SOCK_DGRAM )
mySocket.connect((SERVER_IP,PORT_NUMBER))

while True:
        mySocket.send('cool')
        time.sleep(.5) 
```

**从评论更新**

因为您使用的是 wifi 连接，这意味着这两台机器都在本地网络上。您需要找到服务器的 LAN ip 地址，将其指定为目标。

查找 IP 的命令行方法

*   操作系统/Linux：`ifconfig`
*   视窗：`ipconfig /all`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-08-23T03:59:34.960

该程序用于从客户端发送“小写字母字符串”并从服务器获取“大写字母”

# 服务器端

```
import socket

def Main():

    host = '192.168.0.12' #Server ip
    port = 4000

    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.bind((host, port))

    print("Server Started")
    while True:
        data, addr = s.recvfrom(1024)
        data = data.decode('utf-8')
        print("Message from: " + str(addr))
        print("From connected user: " + data)
        data = data.upper()
        print("Sending: " + data)
        s.sendto(data.encode('utf-8'), addr)
    c.close()

if __name__=='__main__':
    Main() 
```

# 客户端

```
import socket

def Main():

    host='192.168.0.13' #client ip
    port = 4005

    server = ('192.168.0.12', 4000)

    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    s.bind((host,port))

    message = input("-> ")
    while message !='q':
        s.sendto(message.encode('utf-8'), server)
        data, addr = s.recvfrom(1024)
        data = data.decode('utf-8')
        print("Received from server: " + data)
        message = input("-> ")
    s.close()

if __name__=='__main__':
    Main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:52:10.843

如果将 SERVER_IP 更改为真实服务器的地址后仍无法正常工作，请检查服务器上的防火墙是否接受端口 5000 上的 UDP 流量。

如果您的服务器是 linux 机器， iptables -L 会显示防火墙规则。iptables -F 将删除所有（！）防火墙规则，因此您可以测试是否有帮助。这不是重新启动持久性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T22:32:59.060

您应该会看到如下所示的 LAN ip 地址：192.168.1.102，这是通常的 WiFi 路由器默认本地地址。例如，您将使用 ipconfig 在 Windows 命令提示符中看到以下内容：

```
C:\Users\jackc>ipconfig

Windows IP Configuration

Wireless LAN adapter Wireless Network Connection 3:

   Media State . . . . . . . . . . . : Media disconnected
   Connection-specific DNS Suffix  . :

Wireless LAN adapter Wireless Network Connection:

   Connection-specific DNS Suffix  . :
   Link-local IPv6 Address . . . . . : fe80::ed97:91a4:9449:204b%13
   IPv4 Address. . . . . . . . . . . : 192.168.8.106
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 192.168.8.1 
```

我尝试了以下适用于我的测试代码。

客户：

```
#!/usr/bin/env python3

import sys
from socket import socket, AF_INET, SOCK_DGRAM

SERVER_IP   = '192.168.8.102'
PORT_NUMBER = 5000
SIZE = 1024
print ("Test client sending packets to IP {0}, via port {1}\n".format(SERVER_IP, PORT_NUMBER))

mySocket = socket( AF_INET, SOCK_DGRAM )
myMessage = "Hello!"
myMessage1 = ""
i = 0
while i < 10:
    mySocket.sendto(myMessage.encode('utf-8'),(SERVER_IP,PORT_NUMBER))
    i = i + 1

mySocket.sendto(myMessage1.encode('utf-8'),(SERVER_IP,PORT_NUMBER))

sys.exit() 
```

服务器：

```
#!/usr/bin/env python3

from socket import socket, gethostbyname, AF_INET, SOCK_DGRAM
import sys
PORT_NUMBER = 5000
SIZE = 1024

hostName = gethostbyname( '0.0.0.0' )

mySocket = socket( AF_INET, SOCK_DGRAM )
mySocket.bind( (hostName, PORT_NUMBER) )

print ("Test server listening on port {0}\n".format(PORT_NUMBER))

while True:
    (data,addr) = mySocket.recvfrom(SIZE)
    print data
sys.exit() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-09T16:58:52.427

要连接到任意客户端，您必须将套接字绑定到 `socket.gethostname()`我正在使用的成功或使用空字符串`""`

参考服务器代码：我们使用`socket.gethostname()`这样套接字对外界可见。如果我们使用

```
s.bind(('localhost', 80)) 
```

或者

```
s.bind(('127.0.0.1', 80)) 
```

我们仍然会有一个“服务器”套接字，但它只在同一台机器上可见。`s.bind(('', 80))`指定套接字可以通过机器碰巧拥有的任何地址访问。

[来源](https://docs.python.org/2/howto/sockets.html)

# objective-c - 应用程序终止时泄漏

> ID：11352857
> 
> 赞同：2
> 
> 时间：2012-07-05T21:30:31.607
> 
> 标签：objective-c, ios, c, memory-management, memory-leaks

我应该在应用程序终止时处理泄漏，还是让系统处理它们更有效？我认为系统无论如何都会回收所有内存，所以释放它的额外努力不会是开销吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:38:16.093

引用[paxdiablo](https://stackoverflow.com/users/14860/paxdiablo)：

> 我所知道的所有操作系统都会回收已分配的常规内存。这是因为分配通常来自进程私有地址空间，该地址空间将在退出时回收。

据我所知，这也适用于 iOS。

然而，Apple 可能会拒绝您的申请。单独的内存泄漏通常不是拒绝应用程序的理由，但是它们可能是导致桶溢出的下降。适当的内存管理是一种很好的做法，应该始终坚持下去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:00:16.540

**当您的应用程序终止时，没有理由尝试释放所有内存。**

这样做是在浪费 CPU 周期。

当然，您可能需要一个“关闭”阶段来保持某些状态，但您的代码还必须假设“关闭”代码路径可能不会运行。

当应用程序终止时，系统将回收应用程序分配的*所有*资源，无论它是如何终止的。

事实上，UIKit (iOS) 和 AppKit (OS X) 在应用程序终止期间都采用了很多快捷方式，导致在应用程序终止时仍然分配大量内存。这样做完全是出于响应性的原因；当用户请求退出应用程序时，它应该很快退出。

（而且我真的想不出一个不会在进程终止时自动回收资源的现代多任务、任务隔离操作系统。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:53:18.790

所有应用程序（进程）都在它们自己的私有内存空间中运行。操作系统对此进行管理，并且始终确切地知道已为进程分配了哪些“物理”内存。当进程退出时，它能够完全恢复所有使用的内存。

因此，如果您的应用程序要退出，您不需要进行任何内存管理或清理（文件访问或网络连接等也是如此，尽管在这些情况下清理可能符合您的最佳利益）。

但是，您的应用程序不应该“泄漏”内存。

**泄漏是指您分配了一块内存，然后在正在运行的程序中丢失了对它的所有引用。**

单例不是泄漏，Instruments 不会将其标记为泄漏。

所以，如果你有这样的事情：

```
static NSString *aStaticString = nil;

+ (void)aFunction {
    aStaticString = [[NSString alloc] initWithString:@"aFunction"];
} 
```

这不是泄漏。因此，假设您还有另一个功能：

```
+ (void)anotherFunction {
    aStaticString = [[NSString alloc] initWithString:@"anotherFunction"];
} 
```

现在，假设您使用的是 ARC，调用这些函数不会导致泄漏。编译器/运行时知道管理 NSString 分配，并且随着 aStaticString 变量的变化，释放旧内存。

因此，鉴于此，您如何获得泄漏？一般来说，这将是由于循环引用。例如：

```
+ (void)aBadFunction {
    NSMutableDictionary *aDict = [[NSMutableDictionary alloc] init];
    [aDict addObject:aDict forKey:@"aCircularReference"];
} 
```

在这里，aDict 被创建（分配），然后对它自身的引用被添加到它。当函数返回时，由于您的程序不再引用 aDict 变量（如果再次调用该函数，将创建一个新的完全不同的 aDict 变量），内存就会泄漏。现在通常 ARC 会确保 aDict 在函数退出时被释放，但在这种情况下它不能，因为**在对象本身中**有对它的引用。

一般像这样的循环引用比较复杂，但是原理是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T21:57:10.773

但是，您应该始终释放内存，请参阅以下评论：

两者之间有区别：

```
int main() {

    int* i = malloc(5);
    ... // do stuff here
    return 0; // i "leaked" here, not that serious, a lot of programmers will skip freeing `i` before return

} 
```

和：

```
int main() {

    int* i;
    for(int j = 0; j < 5000; j++)
        i = malloc(5); // you leaked 5 bytes 5000 times, very serious, DO NOT DO THIS
    // the 24KB here will most likely be reclaimed later, HOWEVER
    // what if j changes? what if you have more loops? you may run of memory, especially on an embedded device!
    ... // do stuff here
    return 0;

} 
```

只需遵循一条规则：在处理适当的 C 内存管理（C 编码约定）时，永远不要担心开销。

这样做：

```
int main() {

    int* i;
    for(int j = 0; j < 5000; j++) {
        i = malloc(5);
        ... // do stuff with i here
        free(i); // you are not leaking anything =D         
    }
    ... // do stuff here
    return 0;
} 
```

# asp.net - ASP.NET 文本框的自动完成功能不适用于 IE9

> ID：11352859
> 
> 赞同：0
> 
> 时间：2012-07-05T21:30:51.860
> 
> 标签：asp.net, internet-explorer-9

标题几乎说明了一切。我有一个表单，用户必须输入一些数据，比如 ID (1234)。如果他回来，我希望通过浏览器的自动完成功能可以看到该条目。

目前，它不适用于 IE9。我在 Chrome 上尝试过，它运行良好。问题是客户希望它在 IE 上。

到目前为止，这是我尝试过的： - 我在 IE 选项中启用了自动完成功能：Internet 选项 > 内容 > 自动完成，我检查了所有选项。

*   检查了软件 > Internet Explorer > 控制面板下的一些注册表项（Win 7 中不存在）

*   将属性设置为不“关闭”的东西。

我很无知。问题是 IE9 还是我的页面？看到它在 Chrome 上运行让我认为它是浏览器，但我们永远不知道。

谢谢

- 编辑

好吧对不起，也许我还不够清楚（可能不是）。我有一个带有文本框的asp页面。默认情况下，该文本框应该自动完成用户输入的条目。

它在 Chrome 中工作，但由于某种原因不在 IE 中。我用谷歌搜索了一整天以找到解决方案。没有javascript，没有ajax控制什么都没有。只是基本的东西不起作用。我在同一个项目的不同页面中对其进行了测试，它确实有效。但该特定页面没有。该 asp 页面有一个 masterPageFile 并且正在使用该组件。

所以我的问题是：什么可以使文本框自动完成不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:49:28.340

我找到了。不知道为什么要这样做，但在我的一个嵌入式母版页中删除该行修复了它。

有人可以向我解释吗？

<%@ 注册 TagPrefix="uc" Namespace="ProjectName.Reports" Assembly="ProjectName" %>。

# powershell - 如何使用 powershell 脚本禁用任务计划程序作业

> ID：11352860
> 
> 赞同：1
> 
> 时间：2012-07-05T21:30:51.950
> 
> 标签：powershell

我正在寻找一个可以运行以禁用任务计划程序作业（内部禁用 .bat 文件）的 powershell 脚本，该脚本可以在我们提到脚本的时间戳之间禁用。使用 Powershell 脚本是否可行？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:29:49.647

我将首先使用带有 CSV 格式输出的方便的 SCHTASKS 可执行文件来获取包含所有计划任务信息的对象：

```
$tasks = & SCHTASKS /Query /V /FO CSV | ConvertFrom-Csv 
```

参数的神奇解码环：/Query 是操作，/V 是详细输出，/FO CSV 是输出格式。现在它在一个对象中，您可以轻松过滤以找到您正在寻找的任务：

```
$task = $tasks | ? { $_.TaskName -eq "My Batch File" } 
```

然后再次使用 SCHTASKS 可执行文件，可以轻松启用或禁用任务：

```
& SCHTASKS /Change /DISABLE /TN "$Task.TaskName" 
```

您可以使用相同的代码轻松地再次启用该任务，只需将 /DISABLE 替换为 /ENABLE。SCHKTASKS 是一个非常强大的工具，用于创建和操作计划任务。

参考：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb736357.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:55:12.130

在 Windows Server 2008 及更高版本中，您可以使用`SCHTASKS`COM 对象`Schedule.Service`以更加面向对象的方式操作任务。有关[同时](http://letitknow.wordpress.com/2011/05/20/create-scheduled-task-by-using-powershell/)使用`SCHTASKS`和`Schedule.Service`. 任务计划程序的 COM 接口记录在[http://msdn.microsoft.com/en-us/library/aa383608(v=vs.85](http://msdn.microsoft.com/en-us/library/aa383608(v=vs.85) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T08:28:44.910

仅限 Windows 2012 / 8.1 及更高版本 [https://technet.microsoft.com/en-us/library/jj649816%28v=wps.630%29.aspx](https://technet.microsoft.com/en-us/library/jj649816%28v=wps.630%29.aspx)

# cxf - 没有消息正文编写器/JAX-RS/CXF

> ID：11352861
> 
> 赞同：4
> 
> 时间：2012-07-05T21:30:59.407
> 
> 标签：cxf, jax-rs

我有一个生成的 JAXB 类（来自 XSD）。我能够以 XML 和 JSON 的形式返回，但是只要将 text/html 添加到我的 Produces 注释中，我就会得到：

```
"No message body writer for response class Employee" 
```

这是我的 API：

```
@GET
@Path("/employee/{employeeId}/getEmployeeById")
@Produces({"application/xml", "application/json", "text/html"})
public Employee getEmployeeById(@PathParam("employeeId") String employeeId); 
```

这是我的客户电话（使用 CXF 客户端）：

```
WebClient client = WebClient.create(basePath);
    client = client.path("employeeervice/employee/1/getEmployeeById").
    accept(MediaType.TEXT_HTML_TYPE).type(MediaType.TEXT_HTML_TYPE); 
```

客户端响应为 500。

在 application/xml 中调用相同的 API，它工作正常。

```
Employee e = client.path("employeeservice/employee/1/getEmployeeById")
    .accept(MediaType.APPLICATION_XML_TYPE).get(Employee.class); 
```

我需要为 text/html 做些不同的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T18:52:07.817

您可以按照此 SO 答案[CXF: No message body writer found for class - 自动映射非简单资源](https://stackoverflow.com/questions/6312030/cxf-no-message-body-writer-found-for-class-automatically-mapping-non-simple-r)中列出的说明操作 我修改了 text/html 的注释，但它几乎可以正常工作。也可能希望确保您的 POJO 也实现 Serializable。

# java - 当我引用 ArrayList.add 方法时，Android 应用程序在启动时崩溃

> ID：11352869
> 
> 赞同：2
> 
> 时间：2012-07-05T21:32:13.320
> 
> 标签：java, android, crash, nullpointerexception, startup

这是我的 MainActivity 的完整代码。如您所见，我只添加了 2 行：

```
ArrayList<String> y = null; 
y.add(new String("buggy")); // When I remove this line it works 
```

当我注释掉 y.add() 时，应用程序不会崩溃。

我的问题是：为什么使用 y.add() 会导致程序失败？

移动设备是三星 Galaxy Mini S5570，运行 Android 2.3.4

这是完整的代码，后面是 LogCat：

```
package com.testbug;
import javax.*;
import java.util.*;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu; 
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //
    // Only these 2 lines added by me. The rest is automatically generated in Eclipse.
    ArrayList<String> y = null; 
    y.add(new String("buggy")); // When I remove this line it works
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

## 堆栈跟踪：

```
07-05 21:01:37.919: D/AndroidRuntime(32067): Shutting down VM
07-05 21:01:37.919: W/dalvikvm(32067): threadid=1: thread exiting with uncaught exception (group=0x40018578)
07-05 21:01:37.929: E/AndroidRuntime(32067): FATAL EXCEPTION: main
07-05 21:01:37.929: E/AndroidRuntime(32067): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testbug/com.testbug.MainActivity}: java.lang.NullPointerException
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.os.Looper.loop(Looper.java:130)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.app.ActivityThread.main(ActivityThread.java:3687)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at java.lang.reflect.Method.invokeNative(Native Method)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at java.lang.reflect.Method.invoke(Method.java:507)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at dalvik.system.NativeStart.main(Native Method)
07-05 21:01:37.929: E/AndroidRuntime(32067): Caused by: java.lang.NullPointerException
07-05 21:01:37.929: E/AndroidRuntime(32067):    at com.testbug.MainActivity.onCreate(MainActivity.java:20)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-05 21:01:37.929: E/AndroidRuntime(32067):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
07-05 21:01:37.929: E/AndroidRuntime(32067):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T21:33:55.380

您将其设置为 null 然后在其上调用方法...这将导致空指针

在调用 add()*之前*像这样初始化它：

```
ArrayList<String> y = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:45:19.067

您必须初始化已声明的数组。如果您尝试将项目添加到空数组，它将导致`java.lang.NullPointerException`（正是您所拥有的）。

您必须执行以下操作：

```
//Declaring and Initializing
ArrayList<String> y = new ArrayList<String>();
    y.add(new String("buggy")); 
```

# asp.net - 正则表达式匹配特定字符串

> ID：11352870
> 
> 赞同：7
> 
> 时间：2012-07-05T21:32:17.520
> 
> 标签：asp.net, regex

RegEx 一直是我的致命弱点。我正在编写网络应用程序，用户将在其中输入他的标识符。我`RegexValidator`用来验证这个输入。

标识符应该是这样的：

```
TN-In-PL-KW-2012-1234 
```

这就是标识符的构建方式：

*   前两个字母总是`TN`
*   后跟连字符
*   然后是两个字母，它们是：`In`、、`Te`或`Yo``Et`
*   连字符
*   两个大写字母
*   另一个连字符
*   另外两个大写字母
*   连字符
*   四位数字，即一年，所以介于 1970 年和 2012 年之间（只要有 4 位数字，我就可以忽略它）
*   连字符
*   可以有 1 到 4 位数字的序数

请帮助我编写正则表达式以匹配此标识符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T21:37:03.443

```
^TN-(In|Te|Yo|Et)-[A-Z]{2}-[A-Z]{2}-\d{4}-\d{1,4}$ 
```

就像评论一样，如果您想提高您的正则表达式技能，我建议您使用[Rubular](http://rubular.com/)，这是一个简单实用的页面，当您需要使用正则表达式时，请牢记

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:39:57.560

`TN-(In|Te|Yo|Et)-([A-Z]{2}-){2}(19[7-9][0-9]|200[0-9]|201[0-2])-[0-9]{1,4}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T21:35:14.723

```
TN-((In)|(Te)|(Yo)|(Et))-[A-Z]{2}-[A-Z]{2}-\d{4}-\d{1,4} 
```

# macos - 桌面应用程序的图形工作指南

> ID：11352874
> 
> 赞同：0
> 
> 时间：2012-07-05T21:32:32.453
> 
> 标签：macos, cocoa

在开发 Mac 桌面应用程序 (cocoa) 时，您通常是使用默认按钮/样式创建应用程序的工作版本，然后应用自定义图形，还是从完成图形开始？

即是否很难改造应用程序，或者他们对这两种方法有任何问题吗？

我之前从未创建过桌面应用程序（仅限网络），关于如何应用图形的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:35:57.110

这取决于。如果您要使用自定义控件，请先制作图形并确保控件支持样式。如果您打算使用标准控件，那么您可以稍后制作图形，因为苹果在让开发人员自定义它们方面做得非常好。

# javascript - iframe 文档写入自我“不安全的 JavaScript 尝试使用 URL 访问框架”

> ID：11352881
> 
> 赞同：-1
> 
> 时间：2012-07-05T21:33:08.640
> 
> 标签：javascript, iframe, cross-domain

我在 Chrome 中遇到跨域错误。在 iframe 内的页面上使用 javascript 在自身内部写入数据。我本身并没有违反任何跨域规则。我相信我看到错误是因为我正在使用`document.write()`或`document.getElementById()`在 iframe 的页面中，它导致浏览器认为我正在引用父文档。

* * *

`parent.html`坐在`domainA.com`

`<iframe src="iframe.html"></iframe>`

* * *

`iframe.html`坐在`domainB.com`

```
<html>
    <head>
        <title>iFrame</title>
    </head>
    <body>
        <script type="text/javascript">
            document.write('hello world');
        </script>
    </body>
</html> 
```

我还应该注意，我尝试过`self.document.write()`无济于事。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:33:33.107

由于没有任何问题并且它只发生在 chrome 中，我认为这可能是一个已知的调试器问题，可能会导致这种情况。看看这篇文章[Debugging iframes with Chrome developer tools](https://stackoverflow.com/questions/3275816/debugging-iframes-with-chrome-developer-tools)

# java - Java - 创建一个模拟浏览器

> ID：11352888
> 
> 赞同：3
> 
> 时间：2012-07-05T21:33:48.190
> 
> 标签：java

我正在开发一个与社交网络上的用户交互的程序。我想要一个可以处理大部分或全部网络通信的工具

我的工作包括登录网站、阅读帖子、发送回复和个人信息。

我最初认为我可以处理一些套接字代码的必要交互。我最初的单次运行案例运行成功（我能够登录、发布内容、回复查询等），但是尝试一起运行所有内容都不起作用（服务器无法识别我的请求，以及各种其他错误）。我做了一些非常糟糕的 cookie 跟踪，我将套接字从 80 切换到 443 以进行 SSL 通信，我生成自己的数据包以发送到社交网络服务器，因为这是我第一次尝试网络交互，所以我离我还很远深度。我更喜欢跟踪 cookie、处理 SSL 通信、处理一般通信问题等的集成解决方案。基本上我希望我可以给出一个按钮的 X、Y 坐标（或从页面获取按钮列表，找到我想要的那个） ,

我想知道是否有可以使用的 java 模拟浏览器。即，我可以获得页面上文本框的句柄，输入我的登录信息并执行登录过程（然后模拟浏览器将处理所有 cookie，处理单个数据包等）

我的目标是拥有一个可以在我的计算机上运行的程序，它可以与社交网络上的用户进行交互，而无需我进行任何重大输入（我不希望该程序垄断 Firefox，这会阻止我在我的系统上使用 Firefox )

对于上下文，我正在发送典型的 html 页面调用以及自定义数据包调用（并解析结果）

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:44:39.947

我建议您使用以下两条路线之一：

**选项 1：** 使用[Apache Http 组件库](http://hc.apache.org/httpcomponents-client-ga/)。我发现这很容易用于将表单数据发送到 Web 服务器。它支持 SSL 和 cookie，尽管我没有为此使用它。我唯一遇到的问题是我似乎无法让它通过代理服务器进行通信。请参阅[我发布的关于此的问题。](https://stackoverflow.com/questions/11251826/java-communication-fails-through-web-proxy-using-apache-httpclient) 但只要你不通过代理，我就会给图书馆一个热情洋溢的推荐，我在上面的链接中发布的代码显示了它是多么容易使用。这是将表单数据发送到 Web 服务器的代码示例：

```
import org.apache.http.*;
import org.apache.http.client.*;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.client.methods.*;  //HttpHead, HttpPut, HttpGet, etc...
import org.apache.http.client.utils.URIBuilder;
import org.apache.http.conn.params.ConnRoutePNames;
import org.apache.http.entity.*;
import org.apache.http.impl.client.SystemDefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.util.EntityUtils;

public static void sendForm(String user, String val) throws IOException {    
    List<NameValuePair> formparams = new ArrayList<NameValuePair>();
    formparams.add(new BasicNameValuePair("user", user));
    formparams.add(new BasicNameValuePair("message", val));
    UrlEncodedFormEntity entity = new UrlEncodedFormEntity(formparams, "UTF-8");
    String uri = "http://theServer.com";
    HttpPost httppost = new HttpPost(uri);  
    HttpClient httpclient = new SystemDefaultHttpClient();
    HttpResponse response = httpclient.execute(httppost);
    response.getStatusLine().toString() + "\n" +
    EntityUtils.toString(response.getEntity()));
    System.out.println(EntityUtils.toString(response.getEntity()));       
} 
```

**选项 2：** JavaFX 附带一个功能齐全的 Web 浏览器，称为 Web 视图。您可以通过编程方式与它进行交互，这在 [Java Spotlight Podcast](https://blogs.oracle.com/javaspotlight/entry/java_spotlight_episode_88_html)最近的一期中进行了讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:18:13.973

您可以[将 env.rhino.js 嵌入到您的 Java 应用程序](http://www.envjs.com/doc/guides)中。

env.js 是“作为脚本环境的浏览器的高度可移植的 javascript 实现（通常称为‘无头’浏览器）。”

rhino 实现使用 rhino javascript 引擎，它是 JavaScript 的 Java 运行时，将随 Oracle Java 实现一起提供。

env.js 相当有能力，因为它使用了参考 html5 解析器的交叉编译版本，并且可以处理充分利用 jQuery 库和 html dom 的 JavaScript。

* * *

此外，我很喜欢 Thorn 对 JavaFX Web 组件的建议。但是，如果您不需要显示任何视觉效果，您可能只需要[WebEngine](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)而不需要 WebView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:28:57.593

行业标准是[Selenium](http://seleniumhq.org/)。它通常用于创建自动化系统测试，但它可以用于任何需要代码内浏览器的地方。

我会提醒你，让它工作起来可能是一个陡峭的学习曲线……需要大量神秘的[胶水代码](http://en.wikipedia.org/wiki/Glue_code)，但是一旦你启动并运行它就很好了。

# javascript - 简单的 Javascript 问题

> ID：11352895
> 
> 赞同：1
> 
> 时间：2012-07-05T21:34:20.387
> 
> 标签：javascript

我想选择所有`id`名为 singleFeed1 到 singleFeed10 的元素；

```
for (var i=0;i<10;i++){
    var post=document.getElementById('singleFeed'+i);
    post.style.color='blue';

    if (i==4){
        post.style.color='red';
    }
} 
```

它似乎不起作用。

我的 html

```
<li id=singleFeed1>aaaaaaaaaaaa</li>
<li id=singleFeed2>vvvvvvvvvvvv</li>
<li id=singleFeed3>dddddddddddd</li>
<li id=singleFeed4>aqqqqqqqqq</li>
<li id=singleFeed5>aaaaaddddaa</li>
......
......
​ 
```

有人有更好的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:37:39.213

```
for (var i=1;i<=10;i++){
    var post=document.getElementById('singleFeed'+i);
    post.style.color='blue';

    if (i==4){ // you need two equal signs
        post.style.color='red';
    }
} 
```

下次检查控制台（即萤火虫），你会自己发现这些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:38:18.480

```
for (var i=1;i<=10;i++){
    var post=document.getElementById('singleFeed'+i);
    post.style.color='blue';

    if (i===4){
        post.style.color='red';
    }
} 
```

在您的原始代码中，您尝试获得 0-9 而不是 1-10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T21:41:15.077

在我看来，@Chris 有正确的答案。但是，我会做这样的事情：

**HTML**

```
<li id=singleFeed1 class="singleFeed">aaaaaaaaaaaa</li>
<li id=singleFeed2 class="singleFeed">vvvvvvvvvvvv</li>
<li id=singleFeed3 class="singleFeed">dddddddddddd</li>
<li id=singleFeed4 class="singleFeed">aqqqqqqqqq</li>
<li id=singleFeed5 class="singleFeed">aaaaaddddaa</li> 
```

**Javascript**

```
var posts=document.getElementsByClassName('singleFeed');
for(var i=0;i<posts.length;i++){
    posts[i].style.color='blue';
    if(i==4){
        posts[i].style.color='red';
    }
} 
```

# pci-dss - 我有几个关于 PCI 合规性的问题

> ID：11352897
> 
> 赞同：2
> 
> 时间：2012-07-05T21:34:34.833
> 
> 标签：pci-dss

我正在查看商家帐户，据我了解，存储送货地址对于 PCI 合规性来说是可以的，这是真的吗？此外，似乎 Recurly 的 API 需要 SAQ C 或 SAQ D，我查看了一些示例问题：

*   配置标准是否包括对每个 Internet 连接以及任何非军事区 (DMZ) 和内部网络区域之间的防火墙的要求？
*   是否有批准和测试所有外部网络连接以及防火墙和路由器配置更改的正式流程？

我的意思是，对于大多数人来说，我认为不。PCI 合规性是否仅适用于成熟的公司？我相信很多人都想要无缝结帐，而且肯定有一些服务可以避免 PCI 合规性，那么为什么要获得商家帐户呢？值得付出额外的努力吗？我的意思是，看到这些示例问题已经很麻烦了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:42:38.843

[任何接受信用卡的商家都需要遵守 PCI 规定](https://www.pcisecuritystandards.org/merchants/how_to_be_compliant.php)。

您最好与专门从事 PCI 合规性的公司交谈。无论如何，您可能需要聘请审计员来验证您的合规水平。我认为这是一个完整答案的错误论坛。

但是，解决您的一些观点：

*   PCI 不禁止存储送货地址。大多数购物车都是这样做的。
    *   但是，作为客户，如果存储我的地址的企业将其视为有价值的敏感信息，并像信用卡数据或社会安全号码一样保护它，我将不胜感激。
*   DMZ/防火墙配置对站点来说完全是题外话，但总的来说，是的。
*   您的公司/企业应该有自己的测试/验证/文档的正式流程，并且您将被要求证明您拥有此流程（通过将其提供给您的审核员）并证明您遵循它（显示更改票证请求并列配置更改，或任何适用于您的情况）

此外，请记住，PCI 合规性应被视为***最低限度***的良好安全实践。符合 PCI 标准并不意味着您是安全的。这意味着您符合该特定标准。

许多符合 PCI 标准的公司遭到破坏，并丢失了关键/敏感数据，包括导致其客户/员工身份被盗的类型。

几年前我们开始进行审计时，这让我们大开眼界，在我们大开眼界之后，我们集成了安全开发生命周期，需要大量培训，并且随着时间的推移了解到 PCI 合规性只是一个开始。PCI 没有涵盖的内容太多了。

无论如何，我会从[这里](https://www.pcisecuritystandards.org/merchants/)开始，然后确定你需要达到的水平。

至于这是一个巨大的麻烦，你是对的......

良好的安全性是一件麻烦事。它需要对细节的繁琐关注。你不只是出去写代码，你做威胁建模、代码审查、渗透测试。从需求收集到发布，您的整个过程都应记录在案，并在每一步都解决安全问题。您应该考虑关注点分离，以确保没有一个流氓开发人员可以在他或她心怀不满时感染您的网站，或者系统管理员无法锁定所有内容并退出（就像加利福尼亚州的一个城市发生的那样不久前）。

如果你想要任何保护，你必须得到的细节数量是疯狂的，然后你仍然必须忍受你永远无法达到 100% 无懈可击的事实。

而这仅仅是开始。

它增加了很多开销，而且很麻烦。

但这么大的麻烦是值得的。当您考虑被破坏的成本时，不仅对您，而且对您的客户、业务合作伙伴等。

# asp.net - 用户在错误的会话中

> ID：11352905
> 
> 赞同：1
> 
> 时间：2012-07-05T21:34:51.293
> 
> 标签：asp.net, session, caching, load-balancing

我发现文章描述了与我的问题相似但不够接近的问题。我有一个非常间歇性的问题，一个用户可以登陆另一个用户会话并最终看到他们存储在会话中的一些信息。这是我的场景：我们在负载平衡环境中使用 AbleCommerce，使用 Application Request Routing 和 Web Farm Framework。我们使用进程内会话，但我们配置了粘性会话（客户端/服务器关联）并且可以正常工作。我已经验证没有缓存导致这个问题（没有使用页面输出缓存，没有 ARR 缓存，没有 IIS 或 WAAS 缓存）。会话中存储的信息偶尔会出现在其他人的浏览器上，这些信息通过基于会话的单例对象存储在会话中。

例如：

```
public class ExampleObject
{
    public string ExampleData{get; set;}

    public static TicketingSession Instance
    {
        get
        {
            if (HttpContext.Current.Session["ExampleObject"] == null)
            {
                HttpContext.Current.Session["ExampleObject"] = new ExampleObject();
            }
            return (ExampleObject)HttpContext.Current.Session["ExampleObject"];
        }
    }
} 
```

然后在其他一些代码中我可以使用它：

```
ExampleObject.Instance.ExampleData = "whatever";
//or
txtSomeTextBox.Text = ExampleObject.Instance.ExampleData; 
```

我知道我应该避开负载平衡环境中的静态数据和进程内会话，但由于我使用的是客户端/服务器关联，而且我使用的这个静态对象只是一个属性，它的 getter 只是直接从会话状态我没有看到问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T21:44:38.053

在网络农场场景中，您需要远离 inproc 会话。您需要使用进程外会话存储来确保它`Session ID`是唯一的。

ASP.NET 将其存储`Session ID`在浏览器的 cookie 集合中。如果用户具有相同的会话，那么`Session ID`他们的会话对服务器来说将是相同的。使用不同的服务器，甚至同一台服务器上的工作进程，都可能导致这些类型的`Session ID`冲突。

您可以通过[MSDN 获得有关 ASP.NET 支持的各种会话状态模式的](http://msdn.microsoft.com/en-us/library/ms178586.aspx)更多详细信息。

# facebook - 如何从 Facebook 启动我的应用程序？

> ID：11352910
> 
> 赞同：2
> 
> 时间：2012-07-05T21:35:31.930
> 
> 标签：facebook, icons, center, launch

我们有一个已提交到应用中心的 Android 应用。我的应用程序图标显示在 Facebook 应用程序列表中。单击该图标时，我希望该应用程序能够启动。而是使用我的应用程序的应用程序页面启动 Play 商店。出现一个打开按钮，确认应用程序 FB 正在尝试启动，而我的应用程序是相同的。我已经根据我的 android 应用清单仔细检查了 FB 开发人员设置中的包名和类名。有人对如何启动我的应用程序而不是应用程序的 Play 商店页面有任何建议吗？我已经建立了一个全新的项目作为测试并重现了这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T22:03:01.557

我有一个类似的问题，你的哈希键可能是错误的。正确获取散列密钥可能很棘手，请确保使用生产密钥存储并指定别名。这是一个示例命令：

```
keytool -exportcert -alias mykey -keystore YOURKEYNAME | openssl sha1 -binary | openssl base64 
```

如果你给出了错误的命令，你仍然会得到一个键，但值会是错误的，当发生这种情况时，你会看到你看到的行为，即为你的应用启动了 Play 商店。

# oracle - 如何使用 Oracle 的 dbms 加密来创建与 htpasswd 兼容的密码

> ID：11352911
> 
> 赞同：1
> 
> 时间：2012-07-05T21:35:55.303
> 
> 标签：oracle, plsql, .htpasswd, dbms-crypto

有没有办法使用 Oracles DBMS_CRYPTO PL/SQL 包来创建与 apache 的 htpasswd 兼容的密码？因此，在 PL/SQL 包中，我创建了一个散列密码，稍后将其存储在 .htpasswd 文件中时，它可以正常工作。

我们目前在 unix 中使用命令 htpasswd -n -b -d 执行此操作。但是，我们希望创建它们并将它们保存在 Oracle 表中。然后在需要时检索它们以创建 .htpasswd 文件。

谢谢！

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:57:17.890

该`htpasswd`工具能够生成一些散列密码类型。您正在使用使用史前哈希格式 的`-d`标志。哈希非常不安全，而且非常容易破解。 `crypt()``crypt()`

根据[Oracle 10g 的这个手册页](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_crypto.htm)，该`DBMS_CRYPTO`软件包*不*支持`crypt()`。这并不奇怪。

您将需要切换到不同的散列算法才能实现这一目标。最直接的方法相当于使用`-s`标志而不是`-d`标志来创建 SHA1 密码。在命令行上试试看结果。给出的密码格式是文字 string `{SHA}`，后跟 base64 编码的 SHA1 哈希，没有加盐。该`DBMS_CRYPTO`软件包似乎支持 SHA1，并暗示还有一个函数可以进行 base64 编码。或者，如果您自己生成 .htpasswd 文件，您可以简单地以您喜欢的任何方式存储哈希，并使用您选择的语言将其转换为输出。

# php - JSON - 双引号内的单引号

> ID：11352915
> 
> 赞同：-1
> 
> 时间：2012-07-05T21:36:03.103
> 
> 标签：php, javascript, ajax, json

我有以下代码用于填充表单字段。此代码接收已使用 PHP json_encode 函数编码的 JSON 数据集。

该代码分别适用于单引号和双引号，但是有时我会在双引号内使用单引号。一个例子是文本区域内的文本，它可能会说：这个人说“我要去度假”。

我读过单引号不需要转义，并且双引号被正确转义。我已将 Firebug 中的 JSON 代码复制到验证器中，它返回正确，这让我认为下面的代码有问题。我在 Firebug 中遇到的错误是语法错误。奇怪的是，如果我有两个单引号（即打开和关闭），问题就不再存在了。

我已经花了 3 个小时来研究这个问题，但似乎离解决方案还差得远。我一如既往地接受所有建议！我可以根据需要提供更多代码片段。

```
$.ajax({
    type: "GET",
    url: "casedata.php",            
    data: {'caseid':'<?php echo($caseid); ?>', 'callid':'<?php echo($_GET['callid']); ?>', 'stage':'thlViewCall'},
    dataType: "json",
    async: false,
    success: function(data){                    
        $.each((data), function(i, e) {                                 
            if($("input[type=text]")) {
                $('#'+i).val(e);
            }
            if($("input[type=select-one]")) {
                $('#'+i+' option').prop("selectedIndex", e);    
            } 
            if($("input[type=select-multiple]")) {                          
                $('#'+i+' option').prop("selectedIndex", e);    
            }
            if($("input[type=radio]")) {
                $('input[name="'+i+'"][value="'+e+'"]').attr('checked', 'checked');
            }
        });
    }
}); 
```

**编辑：**

抱歉，请在下面找到显示此错误的 JSON：

```
{"calldate":"06-07-2012","adviserid":"18","service":"THL","dda_sen":"eqa","finalhearing_date":"24-07-2012","reason_for_tribunal":"part_4","next_deadline_description":"before_final_evidence","understanding_paperwork":"1","ability_negotiate":"1","legal_complexity":"1","comments":"test","action":"referred_to_tss_for_telephone_support","bgInfo":"The man said \"I'm going on holiday\"","initialAdvice":"test2","logreceived":"no","monitored":"no","monitoredby":"","monitoreddate":"00-00-0000","monitorednotes":"","legalsupport":"no","legalsupportid":"0","legalsupportdate":"00-00-0000","legalsupportnotes":""} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:50:07.197

我可以在这里看到至少两个可能的问题。

1.  您正在使用此选择器：*$('#' + i)*。这是否意味着您的 HTML id 属性只是数字？那将不是有效的 HTML。
2.  看起来您正在尝试将*selectedIndex*属性设置为某个 JSON 元素*e* : .prop("selectedIndex", e)。你的意思是用*i*代替*e*吗？如果您将带有单引号的文本插入 HTML 属性，这可能会解释语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:37:24.160

我已经解决了这个问题，并想分享我的结果，考虑到我在多个主题的多个问题中收到的建议。

我发现使用 input[type] 进行选择非常不可靠，由于某种原因，我的文本字段被检测为单选框，导致不需要的结果。解决此问题的最简单方法是使用应用于我的表单元素的类选择器，我的代码示例如下：

```
if($("[name="+i+"]").is(".textbox, .select")) {
    $("[name="+i+"]").val(e);
}

if($("[name="+i+"]").is(".radio")) {
    $("input[name="+i+"][value="+e+"]").attr('checked', 'checked');
} 
```

这将评估在“i”javascript 变量中传递的字段名称，检查该字段的 CSS 类，然后相应地设置值或属性。在我看来，这非常整洁，也使 CSS 样式更容易一些。

我希望我的解释取消了 -1 因为缺少 JSON 开头:-)

# objective-c - 应用程序未通过协同设计验证。签名无效，包含不允许的权利，，，

> ID：11352916
> 
> 赞同：1
> 
> 时间：2012-07-05T21:36:04.457
> 
> 标签：objective-c, loader, verification, codesign

当我尝试构建我的归档应用程序并尝试通过应用程序加载器发送时，我得到了这个：

`warning: Application failed codesign verification. The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011) Executable=/Users/tomkowz/Library/Developer/Xcode/DerivedData/pertcalculator-ctqojevgktdyusdypszrwaabqxyr/Build/Products/Release-iphoneos/pertcalculator.app/pertcalculator codesign_wrapper-4.1: using Apple CA for profile evaluation /Users/tomkowz/Library/Developer/Xcode/DerivedData/pertcalculator-ctqojevgktdyusdypszrwaabqxyr/Build/Products/Release-iphoneos/pertcalculator.app: valid on disk /Users/tomkowz/Library/Developer/Xcode/DerivedData/pertcalculator-ctqojevgktdyusdypszrwaabqxyr/Build/Products/Release-iphoneos/pertcalculator.app: satisfies its Designated Requirement test-requirement: code failed to satisfy specified code requirement(s) codesign_wrapper-4.1: failed to execute codesign(1) - (null)`

我该如何解决？我试着半天发这个：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:16:33.207

回答：

当您在 ADC 中创建开发人员配置文件时，不要忘记创建分发配置文件。不要忘记在您的构建方案的编辑方案中检查发布。

# c++ - 该代码在VS2010中无法编译，但是当我将光标移到Ah中的j上时，我可以看到显示const int j = 10的工具提示。怎么会？

> ID：11352917
> 
> 赞同：1
> 
> 时间：2012-07-05T21:36:17.283
> 
> 标签：c++, visual-studio-2010

我相信代码无法编译，因为我正在`extern const int j`使用. 但是根据标准，为什么这是错误的？ `i``class A`

档案啊

```
extern const int j;

class A
{
    static const int i = j;     //  error C2057:expected constant expression
}; 
```

文件 A.cpp

```
#include "A.h"

const int j = 10;

int main()
{
    A a;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:39:53.223

`j`是一个常量变量，而不是编译时常量。

编译器无法知道编译`j`的翻译单元中的值`class A`。例如，以下将起作用：

```
static const int j = 10;

class A
{
    static const int i = j;
}; 
```

请注意，在这种情况下`j`不会是全局的，但每个 TU 都会存在一个副本。这个片段只是为了证明一个观点。

# c - “内联”函数与“fastcall”调用约定的性能影响

> ID：11352921
> 
> 赞同：3
> 
> 时间：2012-07-05T21:36:39.313
> 
> 标签：c, compiler-construction, inline, fastcall

我有一个 CRC 计算函数，它以极高的频率被调用。我已经宣布，因为`inline`我试图让它成为一个`__attribute((hot))__`，但我不确定这是否能买到任何东西。我正在考虑把它做成一个`fastcall`.

根据[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)，

> fastcall 在 Intel 386 上，fastcall 属性使编译器在寄存器 ECX 中传递第一个参数（如果是整数类型），在寄存器 EDX 中传递第二个参数（如果是整数类型）。随后的和其他类型的参数在堆栈上传递。被调用的函数将从堆栈中弹出参数。如果参数的数量是可变的，则所有参数都被压入堆栈。

`fastcall`将使它本质上更快，因为输入参数将通过寄存器发送，而不是将它们推入堆栈。使用`inline`，编译器将用函数体替换函数调用。

所以问题是`fastcall`当使用时是否`inline`有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:41:17.813

如您所说，如果您制作 function `inline`，编译器将简单地将其“粘贴”到您编写它的任何位置。

因此，不会调用任何内容，因此使用`fastcall`将毫无意义。

# ruby-on-rails-3 - 从 Rails 中的 ActiveAdmin 记录链接到 Paperclip URL

> ID：11352924
> 
> 赞同：1
> 
> 时间：2012-07-05T21:36:52.277
> 
> 标签：ruby-on-rails-3, paperclip, activeadmin

我在 Rails 3.1 应用程序中同时使用 ActiveAdmin 和 Paperclip。在我的用户模型中，我使用的是 Paperclip，因此用户可以上传 PDF。我想要做的是显示 PDF 文件的链接，而不是在表中看到分段的回形针字段（即 file_name、content_type、file_size）。

我的 user.rb 模型：

```
has_attached_file :letter 
validates_attachment_content_type :letter, :content_type => ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'application/pdf', 'image/tiff'], :message => "Only pdf, jpeg, gif, tiff and png files are allowed" 
```

我的 ActiveAdmin 的 user.rb：

```
ActiveAdmin.register User do
  index do
    id_column
    column :username
    column :email    
    default_actions
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:02:52.790

你可以通过它一个块。类似于：

```
ActiveAdmin.register User do
  index do
    id_column
    column :username
    column :email
    column :letter do |user|
      link_to user.letter, letter_url_path
    end
    default_actions
  end
end 
```

# c++ - 如何在不明确说明它是什么的情况下从函数调用泛型派生类函数

> ID：11352926
> 
> 赞同：0
> 
> 时间：2012-07-05T21:37:27.730
> 
> 标签：c++, derived-class, base-class

我不是 C++ 人，但我正在努力学习。我真的不懂行话，所以我不确定要搜索什么，或者如何问这个问题。我能做的最好的就是提供以下示例：

定义一个泛型类：

```
class IPlugin
{
public:
    virtual void go(const Image &src, Image &dst) = 0;
} 
```

然后是两个“插件”

```
class pluginDenoise : public IPlugin
{
public:
    virtual void go(const Image &src, Image &dst)
    {
        denoise(src, dst);
    }
}

class pluginDeblur : public IPlugin
{
public:
    virtual void go(const Image &src, Image &dst)
    {
        deblur(src, dst);
    }
} 
```

我现在想定义一个通用框架，例如：

```
class Processor
{
public:
    Processor(IPlugin &unknown_plugin)
    {
        Image src = imRead("inpImage.jpg");
        Image dst;     

        unknown_plugin.go(src, dst);          

        imWrite(dst, "outImage.jpg");
    }
} 
```

从主代码中，我想把它叫做

```
int main()
{
    pluginDeblur d;

    Processor p(d);
} 
```

我知道这段代码不会编译......这甚至叫什么？这可能吗？

# c# - 使用多个复选框过滤 Gridview 结果（如何使 And/Or 语句起作用）

> ID：11352927
> 
> 赞同：2
> 
> 时间：2012-07-05T21:37:28.993
> 
> 标签：c#, asp.net, gridview, filter, sqldatasource

所以，我有一个`GridView`“CustomerGridView”和一个`SqlDataSource`“SqlDataSource1”，它们从我的 sql 表中提取数据。现在我想添加一些过滤，所以我创建了一个带有各种选项的侧面板。

我的问题是，使用我当前的代码，如果我选择，说客户每月支付一次，新客户，还有每半年支付一次的客户。它向我展示了所有这些类型，包括符合标准的活跃（非新）客户，而不是只向我展示半年或每月付款的新客户。

我怎样才能解决这个问题？

我试过括号等，但都无济于事；我是否只需要为每种情况创建一个 if 并手动编写每个过滤器表达式？

```
protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
{
    SqlDataSource1.FilterExpression = string.Empty;
    if (MonthlyCheckBox.Checked)
    {

            SqlDataSource1.FilterExpression = "[CustomerSubscriptionType]='Monthly'";
    }
    if (SemiAnnuallyCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += "OR ([CustomerSubscriptionType]='Semi-Annually')";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerSubscriptionType]='Semi-Annually'";
        }

    }
    if (AnnuallyCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += "OR ([CustomerSubscriptionType]='Annually')";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerSubscriptionType]='Annually'";
        }
    }
    if (NewCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += " ( OR [CustomerStatus]='Active')";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerStatus]='New'";
        }

    }
    if (ActiveCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += " OR [CustomerStatus]='Active'";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerStatus]='Active'";
        }
    }
    if (SuspendedCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += " OR [CustomerStatus]='Suspended'";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerStatus]='Suspended'";
        }
    }
    if (ResidentialCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
                SqlDataSource1.FilterExpression += " AND [CustomerType]='Residential' ";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerType]='Residential'";
        } 
    }
    if (CommercialCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += " AND [CustomerType]='Commercial' ";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerType]='Commercial'";
        } 

    }
    if (NotInGroupCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += " AND [CustomerGroup]=''";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerGroup]=''";
        }
    }
    if (InGroupCheckBox.Checked)
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += " AND [CustomerGroup]<>''";
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerGroup]<>''";
        }
    }
    if (GroupDropDownFilter.Text != "Select...")
    {
        if (!string.IsNullOrEmpty(SqlDataSource1.FilterExpression))
        {
            SqlDataSource1.FilterExpression += " AND [CustomerGroup]='{0}'";
            SqlDataSource1.FilterParameters.Add("@CustomerGroup", GroupDropDownFilter.Text);
        }
        else
        {
            SqlDataSource1.FilterExpression = "[CustomerGroup]='{0}'";
            SqlDataSource1.FilterParameters.Add("@CustomerGroup", GroupDropDownFilter.Text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:11:15.253

您正在使用`OR`运算符。

`if(@CustomerSubscriptionType = 'Monthly' OR @CustomerStatus = 'New')`将为您提供所有按月付费的客户（活跃和新客户）和所有新客户（无论订阅类型如何）。

如果您使用`AND`运营商，您只会让新客户按月付费。

您可能希望使用这两个运算符的组合，因此我将在组内使用运算符并在组之间`OR`使用`AND`运算符。

```
if(
    (@CustomerSubscriptionType = 'Monthly' OR @CustomerSubscriptionType = 'Semi-Monthly')
AND (@CustomerStatus = 'New')
AND (@SomeOtherCriteria = 'Other' OR @SomeOtherCriteria = 'Other2')
AND etc... 
```

要修复您的代码，我将为每个“组”使用单独的字符串：

```
SqlDataSource1.FilterExpression = string.Empty;

List<string> subscriptionTypeFilter = new List<string>();
if (MonthlyCheckBox.Checked)
{
    subscriptionTypeFilter.Add("[CustomerSubscriptionType]='Monthly'");
}

if (SemiAnnuallyCheckBox.Checked)
{
    subscriptionTypeFilter.Add("[CustomerSubscriptionType]='Semi-Annually'");
}

if (AnnuallyCheckBox.Checked)
{
subscriptionTypeFilter.Add("[CustomerSubscriptionType]='Annually'");
}

List<string> customerStatusFilter = new List<string>();
if (NewCheckBox.Checked)
{
subscriptionTypeFilter.Add("[CustomerStatus]='New'");             
}

if (ActiveCheckBox.Checked)
{
subscriptionTypeFilter.Add("[CustomerStatus]='Active'");
}

if (SuspendedCheckBox.Checked)
{
subscriptionTypeFilter.Add("[CustomerStatus]='Suspended'");
}

List<string> filters = new List<string>();

filters.Add("(" + string.Join(" OR ", subscriptionTypeFilter) + ")");
filters.Add("(" + string.Join(" OR ", customerStatusFilter) + ")");

SqlDataSource1.FilterExpression = string.Join(" AND ", filters); 
```

> **编辑**：是的，这就是我必须“为每种情况创建一个 if 并手动编写每个过滤器表达式”的意思。我希望我不必这样做，并且可以以其他方式使其工作

要动态地执行您想要的操作，您可以将字段名称和值指定为元素上的自定义属性：

```
<asp:CheckBox id="SuspendedCheckBox" runat="server" fieldName="CustomerStatus" fieldValue="Suspended" /> 
```

正确定义所有复选框后，只需循环控制控件即可。

```
foreach(Control c in this.Controls)
{
    if(c is CheckBox)
    {
        CheckBox cb = (CheckBox)c;

        if(cb.IsChecked)
        {
            string fieldName = cb.Attributes["fieldName"];
            string fieldValue = cb.Attributes["fieldValue"];

            someDictionaryMaybe.Add(string.Format("[{0}] = '{1}'", fieldName, fieldValue), fieldName);
        }
    }
}

// loop through the dictionary, joining the different expressions with ORs and ANDs
// or use LINQ to put it all together, it's up to you.  The fieldName was added to 
// the dictionary, which can be used to separate with ANDs and ORs. 
```

# php - SQL Joining - 需要单行

> ID：11352928
> 
> 赞同：1
> 
> 时间：2012-07-05T21:37:29.733
> 
> 标签：php, sql, join, left-join

我的 MySQL 表结构由两个类似于以下的表组成：

```
UserId field1 field2
1       XXX    YYY
2       ABC    DDD
3       EEE    FFF
.
.
.
n       GGG    DDD

UserId  attribute
1        blah
1        adfadf 
1        ddad
2        adff
3        adfa
3        sdff
.
.
.
z        adss 
```

表 1 每个 ID 只有 1 条记录。表 2 每个 id 有 M 条记录。表 1 和表 2 中的 id 是相关的。我的查询类似于以下内容：

```
SELECT
    t1.`UserId`,
    t1.`field1`,
    t1.`field2`,
    t2.`attribute`
FROM `table1` AS `t1`
    LEFT JOIN `table2` AS `t2` ON `t1`.UserId = `t2`.UserId
WHERE t1.`UserId` = 3 
```

查询返回以下内容：

```
3 EEE FFF adfa
3 EEE FFF sdff 
```

我不想为每个返回重复记录。我想返回一行，比如

```
3 EEE FFF (adfa,sdff) 
```

第 4 个字段是一个数据结构（数组？结果集？），它包含为给定用户 ID 返回的所有属性。

编辑::: 我看到许多涉及 CONCAT 的解决方案，将其转换为 CSV。有逗号的字段会不会把事情搞砸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:45:08.710

```
SELECT
    t1.`UserId`,
    t1.`field1`,
    t1.`field2`,
    CONCAT'(',GROUP_CONCAT(DISTINCT t2.`attribute`SEPARATOR ','),')') AS Attributes
FROM `table1` AS `t1`
    LEFT JOIN `table2` AS `t2` ON `t1`.UserId = `t2`.UserId
WHERE t1.`UserId` = 3
GROUP BY  t1.`UserId`,t1.`field1`,t1.`field2` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:57:39.913

我的评论摘要：

可以存在于单个字段中的唯一数据结构是原始数据类型。

在这种情况下，您最终使用逗号分隔的字符串是有意义的。您不能在其中放置数组，也不能在其中嵌套数据集。正如您已经拥有的那样，关系数据库通过多行数据完成您想要的工作。在关系数据库中，将多个值聚合到一个字段中被认为是一种非常痛苦的反模式。它使以多种不同方式查询数据变得痛苦。

简而言之：

*   单独行上的单独值 = `good`。
*   将值组合成一个字段 = `bad`.

当前结构是关系数据库中的正常最佳实践，我永远不会推荐 JSON_ENCODED 字符串选项。我的建议是根本不要这样做，除非你有特殊的理由需要这样做。如果您确实有一个，我会很想知道它，因为我们可能会评论这种方法是否真的有用。从长远来看，通常尝试按照您的要求去做是没有帮助的。

根据您的示例，如果您有两个已经包含逗号的值会发生什么？这只是自找麻烦。

如果您真的担心不必要的网络流量，请分别从两个表中选择并在嵌套循环中处理它们。*（只需确保两个数据集以相同的方式排序 [在这种情况下按 user_id]，以使嵌套循环尽可能简单。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:44:04.170

不确定这是否适用于您的 SQL 变体。在 T-SQL 中，这可以通过引入局部变量来实现。这个小样本演示了。如果您不熟悉，“WITH”子句是一个“公用表表达式”，它可以轻松地为我提供可使用的示例数据。

```
declare @temp as varchar(10);
select @temp = '';

with vals as (
    select '1' as a
    union select '2' as a
)
select @temp = @temp +  a + ','
from vals

select '(' + @temp + ')' 
```

对于您的查询，只需将其更改为`select @temp = @temp + attribute`. 当然，您需要添加一些子字符串代码来删除最后的额外逗号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T21:44:05.823

如果您使用的是 mysql，那么一种方法是使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T21:44:29.393

如果您使用 mysql，请尝试[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)。如果这适合，请注意 GROUP_CONCAT 有一个最大长度。您可以使用会话变量“group_concat_max_len”进行调整。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T21:45:59.440

您需要使用 group_concat 运算符进行连接和分组：

```
SELECT t1.`UserId`, t1.`field1`, t1.`field2`,
       concat('(', group_concat(t2.`attribute`, ','), ')')
FROM `table1` `t1` LEFT JOIN
     `table2` AS `t2`
     ON `t1`.UserId = `t2`.UserId
WHERE t1.`UserId` = 3 
group by t1.`UserId`, t1.`field1`, t1.`field2` 
```

# nginx - 一劳永逸地停止 Mac OS X Lion 上的 nginx 服务器

> ID：11352931
> 
> 赞同：6
> 
> 时间：2012-07-05T21:37:50.810
> 
> 标签：nginx

我已经尝试通过 nginx 发送信号。我试过杀死所有进程，但它们似乎又回来了。

```
$ which nginx
/opt/local/sbin/nginx

$ sudo nginx -s stop

$ sudo /opt/local/sbin/nginx -s stop

$ ps -ef | grep nginx
141:    0 24627     1   0  2:29PM ??         0:00.00 nginx: master process /opt/local/sbin/nginx
142:   -2 24628 24627   0  2:29PM ??         0:00.02 nginx: worker process
143:   -2 24629 24627   0  2:29PM ??         0:00.07 nginx: worker process
144:   -2 24630 24627   0  2:29PM ??         0:00.07 nginx: worker process
145:   -2 24631 24627   0  2:29PM ??         0:00.07 nginx: worker process
146:   -2 24632 24627   0  2:29PM ??         0:00.07 nginx: worker process
147:   -2 24633 24627   0  2:29PM ??         0:00.07 nginx: worker process
148:   -2 24634 24627   0  2:29PM ??         0:00.07 nginx: worker process
149:   -2 24635 24627   0  2:29PM ??         0:00.07 nginx: worker process
150:   -2 24636 24627   0  2:29PM ??         0:00.07 nginx: worker process
151:   -2 24637 24627   0  2:29PM ??         0:00.07 nginx: worker process
167:    0 24924     1   0  2:36PM ??         0:00.01 /opt/local/bin/daemondo --label=nginx --start-cmd /opt/local/sbin/nginx ; --pid=fileauto --pidfile /opt/local/var/run/nginx/nginx.pid
168:    0 24925 24924   0  2:36PM ??         0:00.00 (nginx)
169:    0 24926     1   0  2:36PM ??         0:00.00 nginx: master process /opt/local/sbin/nginx
170:   -2 24927 24926   0  2:36PM ??         0:00.00 nginx: worker process
171:   -2 24928 24926   0  2:36PM ??         0:00.00 nginx: worker process
172:   -2 24929 24926   0  2:36PM ??         0:00.00 nginx: worker process
173:   -2 24930 24926   0  2:36PM ??         0:00.00 nginx: worker process
174:   -2 24931 24926   0  2:36PM ??         0:00.00 nginx: worker process
175:   -2 24932 24926   0  2:36PM ??         0:00.00 nginx: worker process
176:   -2 24933 24926   0  2:36PM ??         0:00.00 nginx: worker process
177:   -2 24934 24926   0  2:36PM ??         0:00.00 nginx: worker process
178:   -2 24935 24926   0  2:36PM ??         0:00.00 nginx: worker process
179:   -2 24936 24926   0  2:36PM ??         0:00.00 nginx: worker process
205:  502 24939 24879   0  2:36PM ttys010    0:00.00 grep -n nginx 
```

我已经尝试杀死这些进程，但它们又出现了。

如何一劳永逸地停止 nginx？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-09T11:17:57.270

你得到了答案，但只是为了清楚，也许可以帮助别人：

OS X 应该为您重新启动 nginx 进程（将其作为系统服务运行，这是您大部分时间想要的）。所以你需要告诉launchd停止使用命令为你管理这个过程`sudo launchctl unload <plist-filepath>`，在我的例子中是：

`sudo launchctl unload /Library/LaunchDaemons/dev.nginx.plist`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T22:08:11.243

`daemondo`正在重新启动 nginx。

不幸的是，没有太多关于在线使用它的信息，而且我没有在这台计算机上安装它，但是`daemondo --help`应该提供一些关于如何阻止它重新启动的指示`nginx`。

# java - 动态添加和对齐 JLabels 和 JCheckBoxes 到 JScrollPane

> ID：11352934
> 
> 赞同：-2
> 
> 时间：2012-07-05T21:38:04.557
> 
> 标签：java, swing, jscrollpane, layout-manager

我的出发点是这样的：

![在此处输入图像描述](../Images/c987ac7aa065c69fcbe4d9750705e9c9.png)

标签下的矩形是`JScrollPane`.

根据变量的值，我必须将 JLabels 和 JCheckBoxes 添加到滚动窗格。

我读了其他线程，但我不能做我想做的事。你能帮助我吗？

我没有代码，因为我认为我可以使用 NetBeans 设计器来完成。我唯一能做的就是

```
JLabel label = new JLabel("New Label");
JCheckBox cb = new JCheckBox("New CheckBox");
jScrollPane1.add(label);
jScrollPane1.add(cb); 
```

但显然它不起作用。感谢 Robby，现在我可以添加组件了。我需要知道如何对齐它们。例如，jLabel1 下的一列标签，jLabel2 下的一列复选框等。所有这些都具有相同的高度和宽度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T22:02:52.593

您不会将元素直接添加到 JScrollPane。您将元素添加到 JPanel，*然后*将其添加到 JScrollPane。我强烈建议阅读 Swing，如果没有别的[Java Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/)。

所以：

```
JPanel panel = new JPanel();
JLabel label = new JLabel("New Label");
JCheckBox cb = new JCheckBox("New CheckBox");
panel.add(label);
panel.add(cb);
JScrollPane scrollPane = new JScrollPane(panel); 
```

将是一个开始。

或者如果滚动窗格已经存在：`scrollPane.setViewportView(panel)`而不是构造函数。

或类似的。但实际上，正如上面评论中提到的，您真的想先学习实际*编码*，而不是依赖程序（或其他人）为您编写代码。

# c++ - 为什么我们在 C++ 中使用 std::function 而不是原来的 C 函数指针？

> ID：11352936
> 
> 赞同：44
> 
> 时间：2012-07-05T21:38:06.693
> 
> 标签：c++, c++11, function-pointers

`std::function<T1(T2)>`比原版有什么优势`T1 (*)(T2)`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-05T21:42:29.213

`std::function`可以容纳多个函数指针，即*functors*。

```
#include <functional>

void foo(double){}

struct foo_functor{
  void operator()(float) const{}
};

int main(){
  std::function<void(int)> f1(foo), f2((foo_functor()));
  f1(5);
  f2(6);
} 
```

[Ideone 上的实时示例。](http://ideone.com/qzbeF)

如示例所示，您也不需要完全相同的签名，只要它们*兼容*（即，`std::function`可以将参数类型传递给包含的函数/仿函数）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-05T21:40:47.010

`std::function`可以保存函数对象（包括 lambda），以及具有正确签名的函数指针。所以它更通用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-14T18:04:37.090

除了更简洁的外观和更具描述性的语法外，`std::function`还可以存储任何*可调用*对象：

*   职能
*   lambda 表达式
*   绑定表达式
*   函子

更不用说将对象存储、复制和绑定到成员函数更容易和更直观。

# javascript - Flowplayer 不循环播放

> ID：11352938
> 
> 赞同：0
> 
> 时间：2012-07-05T21:38:15.517
> 
> 标签：javascript, jquery, flowplayer

我在 flowplayer 循环时遇到问题。我尝试了很多不同的东西，但我无法让它循环。它播放一次并停止。

这是代码：

HTML：

```
<div id="home_fplayer" href="/File/1.mp4"><img alt="" src="/File/ld.jpg" /></div> 
```

JS：

```
$(document).ready(function () 
{
    $f("home_fplayer", {src:"/js/flowplayer/flowplayer.commercial-3.2.7.swf", wmode: 'opaque'}, 
    {
        key: '#$1432062db092e251814',
        plugins: 
        {
            controls: null
        },
        loop: true,
        clip: 
        {
            autoPlay: true,
            onBeforePause: function(clip) 
            {
               return false;
            },
            onFinish: function () 
            {
                this.play(0);return false;
            },
            onBeforeFinish: function () 
            {
                this.play(0);return false;
            }
        }
    }).ipad();

    $f("home_fplayer").play();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-17T09:32:53.537

您需要做的就是将 onBeforeFinish 设置为返回 false：

```
$(document).ready(function(){
    $f("home_fplayer",{src:"/js/flowplayer/flowplayer.commercial-3.2.7.swf",wmode:'opaque'},
        {
        key: '#$1432062db092e251814',
        plugins:{
            controls: null
        },
        clip:{
            autoPlay: true
        },
        onBeforeFinish:function(){
            return false;
        }
    }).ipad();

    $f("home_fplayer").play();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:39:21.077

您可能必须使用[播放列表插件](http://flowplayer.org/plugins/javascript/playlist.html)来启用循环播放。

# javascript - 如何将信息从本地主机发送到我的 web 应用程序？

> ID：11352943
> 
> 赞同：0
> 
> 时间：2012-07-05T21:38:54.273
> 
> 标签：javascript, proxy, localhost, apache

因此，在我的 JS 网络应用程序中，我打开了一个指向外部网站的弹出窗口，由于安全原因，我无法访问该网站。当用户完成交互后，该站点将重定向到我的本地主机，现在它在标题中包含信息。(http://localhost/authkey=12345)。当我连接到本地主机并将此信息传输回我的应用程序时，有什么方法可以检测服务器端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:48:34.393

如果远程网站将您重定向回您自己的应用程序，您可以使用其**GET**或**POST**值。

你提到了**“服务器端”** ——如果你想使用服务器端脚本，你必须学习一些语言，比如 PHP 或 ASP。

如果您只想处理基本的基本事情，您仍然可以使用 Javascript。

我知道有两个库可以帮助您解析 URL：

*   [jsUri](http://code.google.com/p/jsuri/)
*   [jQuery URL Parser 插件](https://github.com/allmarkedup/jQuery-URL-Parser)- 如果你想使用 jQuery。

如果远程网站也为您提供**POST**信息，您将不得不使用服务器端脚本来处理这些数据。

想知道：

**GET** - 您的 URL 中的信息，例如`authkey=12345`.

**POST** - 对客户端不可见。

# sql - 在 DB2 中查找所有空表

> ID：11352945
> 
> 赞同：0
> 
> 时间：2012-07-05T21:39:04.687
> 
> 标签：sql, db2

您好我想知道如何在 db2 中查找所有空表。我正在考虑列出每个模式的所有表（即“列出模式的表”），然后进行计数（*）查询，检查哪些给出了 0，但这似乎很麻烦而且很脏，因为我有编写一个shell脚本来解析表名并循环遍历每个表，运行count SQL。

有更快的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:12:35.237

另一种选择是查看数据字典或元数据表，如果正确收集了适当的统计信息，它们将包含此信息。在 oracle 中，这将是 user/all/dba_tables 数据字典视图。

看起来 D2 中的 SYSCAT.TABLES 目录视图具有类似的目的，但列值也可能具有 -1、-2，在这种情况下它们具有不同的值。检查此链接。

[SYSCAT.TABLES 目录视图：DB2](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0001063.htm)

count(*) 可能仍然更准确，因为在大多数情况下收集的统计数据不能保证 100% 的准确性。

# jquery - jQuery检查所有使用切换方法

> ID：11352946
> 
> 赞同：2
> 
> 时间：2012-07-05T21:39:05.297
> 
> 标签：jquery, checkbox, toggle

如何使用 jquery 进行全选取消选中所有选择

```
<input type="checkbox" name="filters" rel="2" checked="checked" /> name
 &emsp; <input type="checkbox" name="filters" rel="3" checked="checked" />tname
&emsp;<input type="checkbox" name="filters" rel="4" checked="checked" />lname 
```

查询

```
$(function(){
    $(':checkbox').on('change', function(){
        $('td').filter(':nth-child(' + $(this).attr('rel') + ')').toggle();
        $('th').filter(':nth-child(' + $(this).attr('rel') + ')').toggle();
    });
}) 
```

此时每个人都会隐藏一个字段，但对于检查所有检查按钮会很好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:41:34.077

使用[`prop()`](http://api.jquery.com/prop)函数（jQuery v1.6+）：

检查所有：

```
$("input[type='checkbox']").prop("checked", true); 
```

取消选中所有：

```
$("input[type='checkbox']").prop("checked", false); 
```

要检查是否检查了输入，您可以使用`if (this.checked)`

# javascript - Sec-WebSocket-Accept 不匹配

> ID：11352948
> 
> 赞同：0
> 
> 时间：2012-07-05T21:39:08.323
> 
> 标签：javascript, python, websocket

我目前正在用 Python 开发 WebSocket 服务器，但我显然无法计算 Sec-WebSocket-Accept，这通常不是很困难。这是我的计算函数（用 Python 编写）：

```
def get_accept_websocket_key(self, key):
    magic_string = '258EAFA5-E914-47DA-95CA-C5AB0DC85B11'
    key += magic_string
    return base64.b64encode(hashlib.sha1(key).hexdigest()) 
```

我所有的结果似乎都很好，但我总是在 javascript 控制台中：

> WebSocket 握手期间出错：Sec-WebSocket-Accept 不匹配

你有什么解决办法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:24:29.097

工作示例。使用“Sec-WebSocket-Protocol”查找代码

```
from base64 import b64encode, b64decode
from hashlib import sha1

def sendHeaers(self, connect)
    data = ["HTTP/1.1 101 Switching Protocols",
            "\r\nUpgrade: websocket",
            "\r\nConnection: Upgrade"]

    if 'Sec-WebSocket-Protocol' in self.httpHeader:
        data.append("\r\nSec-WebSocket-Protocol: webserver")

    if 'Sec-WebSocket-Key' in self.httpHeader:
        sha1f = sha1()
        sha1f.update(self.httpHeader['Sec-WebSocket-Key'] + "258EAFA5-E914-47DA-95CA-C5AB0DC85B11")
        ticket = b64encode(sha1f.digest())
        data.append("\r\nSec-WebSocket-Accept: " + ticket)

    data.append("\r\n\r\n")
    connect.send( "".join(data) ) 
```

# c# - 使用 c# 将公式写入现有 excel 工作表的语法是什么？

> ID：11352949
> 
> 赞同：2
> 
> 时间：2012-07-05T21:39:16.357
> 
> 标签：c#, excel, vba

我正在尝试使用 c# 将我在 VBA 中编写的内容转换为可执行文件。我的想法是将某些公式写入现有的 Excel 工作簿。我有写入新工作簿的语法，但没有写入现有工作簿的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:49:33.497

**久经考验**

```
using System;
using System.Windows.Forms;
using System.IO;
using Excel = Microsoft.Office.Interop.Excel;

Namespace WindowsFormsApplication5
{
    public partial class Form1 : Form
    {
        Public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            Microsoft.Office.Interop.Excel.Application xlexcel;
            Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
            Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;

            object misValue = System.Reflection.Missing.Value;
            xlexcel = new Excel.Application();

            // Open a File
            xlWorkBook = xlexcel.Workbooks.Open("C:\\MyFile.xlsx", 0, true, 5, "", "", true,
            Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

            // Set Sheet 1 as the sheet you want to work with
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

            //////////////////////////////////////////////////////////
            // REST OF THE CODE HERE TO INTERACT WITH THE WORKSHEET//
            //////////////////////////////////////////////////////////

            //Once done close and quit Excel
            xlWorkBook.Close(true, misValue, misValue);
            xlexcel.Quit();

            releaseObject(xlWorkSheet);
            releaseObject(xlWorkBook);
            releaseObject(xlexcel);
        }

        private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Unable to release the Object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:47:47.567

您可以通过该`Workbooks.Open`方法执行此操作，[本文](http://www.codeproject.com/Articles/5123/Opening-and-Navigating-Excel-with-C)提供了详细信息。

```
string workbookPath = "c:/SomeWorkBook.xls";
Excel.Workbook excelWorkbook = excelApp.Workbooks.Open(workbookPath,
        0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "",
        true, false, 0, true, false, false); 
```

`Worksheets`然后，您可以通过该属性引用特定工作表。

```
Excel.Sheets excelSheets = excelWorkbook.Worksheets; 
```

# c++ - 当我使用 cin 时控制台中的新行

> ID：11352954
> 
> 赞同：3
> 
> 时间：2012-07-05T21:39:44.600
> 
> 标签：c++

我对 C++ 练习有疑问。

在练习中，我应该让用户输入一个日期。

问题是当我使用`cin`控制台时，当我按下回车键时会向下跳一行，所以它变成了这样：

```
Enter date please: 12

/23

/2001 
```

而不是：2001 年 12 月 23 日

有人可以帮我克服这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T21:45:46.867

你没有说你是如何`cin`阅读日期的。尝试这个：

```
char ignored;
int day, month, year;
std::cin >> month >> ignored >> day >> ignored >> year; 
```

然后，当您运行程序时，在您输入整个日期之前**不要按 Enter 。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T21:57:47.980

Robᵩ 有一个很好的答案，但我要扩展它。使用结构和重载运算符，并检查斜杠。

```
struct date {
    int day;
    int month;
    int year;
};
std::istream& operator>>(std::istream& in, date& obj) {
    char ignored1, ignored2;
    in >> obj.day>> ignored1 >> obj.month>> ignored2 >> obj.year;
    if (ignored1!='/' || ignored2!='/')
        in.setstate(in.rdstate() | std::ios::badbit);
    return in;
} 
```

如果您有用于[流式传输的](https://stackoverflow.com/a/9832875/845092)代码，则可以将其简化为：

```
std::istream& operator>>(std::istream& in, date& obj) {
    return in >> obj.day>> '/' >> obj.month>> '/' >> obj.year;
} 
```

# xcode - IOS 5：如何向我的 TableView 的底栏添加标签？

> ID：11352956
> 
> 赞同：1
> 
> 时间：2012-07-05T21:39:49.610
> 
> 标签：xcode, ios5, label, tableview, uitoolbar

我正在尝试在 StoryBoard 中的 TableView 的底部栏中添加一个标签。但是当我把它拖过来时它不会留下来。我能够以这种方式添加刷新按钮，但不能添加标签。我只能在底栏添加按钮吗？谢谢！

编辑：在下面添加了其他信息。

![显示底部工具栏的图像](../Images/7d8ec1883366250f9f6f6ba0cebb7f28.png)

我通过更改图片右侧“模拟指标”下的“底栏”下拉列表来显示底栏。然后，我的表格视图下方有底部黑条。我添加了一个按钮栏项目，即刷新按钮。我现在要做的是在按钮右侧添加一个标签，这样我就可以显示上次更新信息的时间。但是，当我尝试将标签拖到该部分时，它什么也不做，只是返回控制窗口。谢谢！

更新：

通过添加“条形按钮项”并将其样式更改为“普通”，我进一步了解了这一点。这几乎提供了我想要的视觉效果。现在看来我只需要禁用“按钮按下”视觉效果，它会在触摸时亮起。这是一个新的屏幕截图，显示了我目前拥有的内容。

![通过添加栏按钮项目的新标签](../Images/dc6e3632f07a0f789b6fe4d573eafba6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:24:30.307

您应该首先在底部添加一个 UIView，然后在 UIView 内添加控件，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T19:50:57.430

我有类似的问题，我也是这样做的。然后我自定义了它的文本（使其“不同”），例如：

```
NSDictionary *labelAtribbute = [NSDictionary dictionaryWithObjectsAndKeys:
                                           [UIFont fontWithName:@"Courier-Bold" size:20.0f], UITextAttributeFont,
                                           [UIColor whiteColor], UITextAttributeTextColor,
                                           [UIColor blackColor], UITextAttributeTextShadowColor,
                                           [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                           nil];
     [[myBar.items objectAtIndex:2]  setTitleTextAttributes:labelAttribute forState:UIControlStateNormal]; 
```

我无法禁用按钮按下效果......所以我决定让它可用（当然，取决于你的应用程序）。这就是我所说的将问题转化为功能；）

希望有帮助

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T23:47:35.313

我尝试了提供的两个答案，但都没有奏效。据我了解，这是正确的解决方案。首先，我认为只有 UIBarButtonItem 可以添加到 UIToolbar。所以我添加了一个按钮并将样式设置为“普通”。通过这样做，它将它设置为只是文本。虽然字体大小有点大，所以我通过执行以下操作来解决这个问题......

```
[self.lastUpdated setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [UIFont fontWithName:@"Helvetica" size:14.0f], UITextAttributeFont, nil] forState:UIControlStateNormal]; 
```

该代码将字体更改为 Helvetica 并将大小更改为 14.0f。我也可以通过使用更改文本`self.lastUpdated.title = LastUpdatedText;`

现在唯一需要修复的是当您触摸文本时出现的辉光（光）。我目前对此并不十分担心，但似乎您可以通过执行以下操作来解决此问题，我从这里的另一个问题的评论中得到：[iPhone：按下时如何从 UIBarButtonItem 中移除发光（光）？](https://stackoverflow.com/questions/11384879/iphone-how-to-remove-glow-light-from-uibarbuttonitem-when-pressed/11385282#comment15007786_11385282)

`Unfortunately, you can't do it with the standard bar button item. If you want to customize it to that level, you'd have to create a bar button item with a custom view that is actually a button configured the way you want (e.g., no glow) and add that instead of the standard items.`- 杰森可可

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T00:35:04.520

不要使用 UITableViewController 作为基础，而是使用 UIViewController 作为基础，并在视图底部添加一个 UITabelView 控件和 UIToolbar。这将允许您在 UIToolbar 中添加一个 UILabel 控件。

# ms-access - 使用来自单独表单 Access 2007 的用户输入自动填充表单中的字段

> ID：11352963
> 
> 赞同：1
> 
> 时间：2012-07-05T21:40:21.747
> 
> 标签：ms-access, ms-access-2007, vba

我的设置：我有两个表：tblAuthors 和 tblBooks。tblAuthors 包括作者列表：Kurt Vonnegut、Frank Herbert、JK Rowling、John Nichols 等。tblBooks 包括书籍列表：Slaughter House Five、Cat's Cradle、Monkey House、Dune、Harry Potter、Milagro Beanfield War 等。

我也有两种形式：frmAuthor 和 frmBooks。frmAuthor 包括作者姓名以及与此问题无关的更多作者特定信息（出生日期、出生地点、首选流派、灵感等）。frmBooks 包括作者姓名以及其他一些信息（出版公司、完成日期、类型）。

tblBooks 和 tblAuthors 之间也存在一对多的关系；tblAuthors 中的作者用作此关系的主键。只是为了让您更好地了解这些表如何输入以及数据库组织背后的思想。

这些表单交互的方式如下： 更新此数据库的预期方式是按书将信息输入到 frmBooks。如果缺少该书的作者，则会出现一个窗口，提示用户从 NotInList 事件中添加新作者。如果用户点击“是”，frmAuthors 将弹出。用户将输入作者信息，然后点击表单底部的“完成”命令，这将使用户返回 frmBooks 以完成输入另一本书的数据。

我正在寻找一种基于 NotInList 事件的输入自动填充字段“作者”的方法。目前它被保存为临时变量，第二个表单上的作者输入将其保存在表中。我只是想简化这个过程，让第一个表单中的输入继续并自动填充第二个表单中的相同字段。

我对 VBA 不是很熟悉，并且可以使用一个针对可能不了解代码所有方面的人的解释。

预先感谢您为我提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:37:16.733

如果您想以另一种形式引用字段，请使用 -

```
Forms![frmBooks]![txtAuthor].Text 
```

# winapi - 在 64 位 Windows 7 上添加虚拟打印机时出错

> ID：11352965
> 
> 赞同：0
> 
> 时间：2012-07-05T21:41:04.537
> 
> 标签：winapi, printing

我们有一些用 C# 编写的打印服务器软件（其中 P/Invokes 函数来自 winspool.drv）。一些“打印机”实际上是[打印到目录的](http://www.codeguru.com/cpp/w-p/printing/article.php/c5893/Print-monitor-that-prints-into-a-directory.htm)虚拟打印机。安装这种打印机的代码是：

```
public override void AddLocalDirectoryPrinter(string printerName, string directory)
{
    IntPtr hPrinter = IntPtr.Zero;

    try
    {
        PRINTER_DEFAULTS pd;
        PRINTER_INFO_2 pi2;

        pd.datatype = null;
        pd.pDevMode = IntPtr.Zero;
        // Access = PRINTER_ALL_ACCESS
        // http://msdn.microsoft.com/en-us/library/cc244650%28v=prot.10%29.aspx
        pd.desiredAccess = PRINTER_ALL_ACCESS;

        // Attributes = PUBLISHED | DO_COMPLETE_FIRST | SHARED
        // http://msdn.microsoft.com/en-us/library/aa394363%28v=vs.85%29.aspx
        pi2.attributes = 0x2208;
        pi2.averagePpm = 0;
        pi2.jobs = 0;
        pi2.defaultPriority = 0;
        pi2.comment = "Auto-Generated by [name of program]";
        pi2.datatype = "RAW";
        pi2.pDevMode = IntPtr.Zero;
        pi2.driverName = "Generic / Text Only";
        pi2.location = string.Empty;
        pi2.parameters = string.Empty;
        pi2.portName = directory;
        pi2.printerName = printerName.ToUpperInvariant();
        pi2.printProcessor = "WinPrint";
        pi2.priority = 0;
        pi2.pSecurityDescriptor = IntPtr.Zero;
        pi2.sepFile = string.Empty;
        pi2.serverName = string.Empty;
        pi2.shareName = printerName.ToUpperInvariant();
        pi2.startTime = 0;
        pi2.status = 0;
        pi2.untilTime = 0;

        hPrinter = AddPrinter(null, 2, ref pi2);

        if (hPrinter == IntPtr.Zero)
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }
    }
    catch (Exception ex)
    {
        throw new PrintingException("Failed to add printer", ex);
    }
    finally
    {
        if (hPrinter != IntPtr.Zero)
        {
            ClosePrinter(hPrinter);
        }
    }
} 
```

在 32 位 Windows XP 上，上述代码可以正常运行。但在 64 位 Windows 7 上，对[AddPrinter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183343%28v=vs.85%29.aspx)的调用失败并出现 Windows 错误 1796（“指定的端口未知”）。

为什么它可以在一个版本的 Windows 上运行，而不能在另一个版本上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:15:49.260

事实证明，我只需要构建一个 64 位版本的 dirport.dll。

# d3.js - 标记 D3 条形图（带正负条）

> ID：11352966
> 
> 赞同：0
> 
> 时间：2012-07-05T21:41:12.787
> 
> 标签：d3.js, label, bar-chart

所以，我有这个条形图，我需要标记条形，但有些是正面的，有些是负面的。我已经得到了负面的覆盖...

[http://randomness.s3.amazonaws.com/bar_labels.html](http://randomness.s3.amazonaws.com/bar_labels.html)

![在此处输入图像描述](../Images/e4e4fd3117629a7a11dd056cfc93bd03.png)

对于正数条，如何将这些标签移动到条的末尾而不影响负值条标签？

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:41:08.113

设置 x 属性时使用 if 语句：

```
.attr("x", function(d, i) { 
    if (d.value <= 0) {return  x(Math.min(0, d.value)) - 15;}
    else {return  x(Math.min(0, d.value)) + Math.abs(x(d.value) - x(0)) + 1;}
}) 
```

如[http://jsfiddle.net/qAHC2/141/](http://jsfiddle.net/qAHC2/141/)

# android - 为 alpha 值设置动画以让 Bitmap 消失/淡出

> ID：11352970
> 
> 赞同：1
> 
> 时间：2012-07-05T21:41:16.510
> 
> 标签：android

我正在将 a 渲染`Bitmap`到 Android `Canvas`。位图有一个 alpha 通道，用于仅显示可见的部分而不遮挡背景。我想让位图慢慢消失。我的第一个想法是将它与第二个 alpha 值相乘，该值表示图像仍有多少可见。不幸的是，它没有用。我试过这样的事情：

```
canvas.drawBitmap(bitmap, x, y, alphaPaint); 
```

对象在哪里`alphaPaint`，`Paint`我只需通过以下方式调整其 alpha 值

```
alphaPaint.setAlpha( .. ); 
```

但这不会这样做。您还有其他想法吗？我真的不想更改位图本身的 alpha 值，因为位图加载一次并多次使用以节省内存。

# regex - 检查目录是否存在递归地反转路径

> ID：11352973
> 
> 赞同：1
> 
> 时间：2012-07-05T21:41:24.017
> 
> 标签：regex, bash, sed, awk

我在这里有点困惑！我不知道如何提出这个问题。

可以举个例子。

我正在编写一个 bash 脚本，它检查名为“FNS”的特定文件夹是否在当前目录中。要检查文件是否存在，我这样做。

```
 FOLDER=FNS
        if [ -f $FOLDER ];
        then
        echo "File $FOLDER exists"
        else
        # do the thing
        fi 
```

如果文件不存在，就会出现问题！我希望脚本记下当前路径并移回一个目录[我的意思是 cd .. 在命令行中，我不确定我是否在这里使用了正确的词汇]并检查文件是否存在，如果不存在，再次后退一步，直到它存在的目录出现[它肯定存在]。找到时将路径存储在变量中。当前的执行目录不应该改变。我尝试将 传递`pwd`给一个变量并切割到最后一个斜杠和其他一些东西但没有成功！

希望我能在这方面做点什么。像往常一样，欢迎提出建议、算法和变通方法:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:50:31.923

试试这个，用括号启动一个子shell，所以 cd 命令不会更改当前 shell 的当前目录

```
(while [ ! -d "$FOLDER" ];do cd ..;done;pwd) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:59:06.943

bash *pushd*和*popd*内置命令可以帮助您。在伪代码中：

```
function FolderExists() { ... }

cds = 0
while (NOT FolderExists) {
    pushd ..
    cds=cds+1;
}

store actual dir using pwd command

for(i=0;i<cds;i++) {
    popd
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:39:22.397

一种使用方式`perl`。

内容`script.pl`（目录是硬编码的，但很容易修改程序以将其作为参数读取）：

```
use warnings;
use strict;
use File::Spec;
use List::Util qw|first|;

## This variable sets to 1 after searching in the root directory.
my $try;

## Original dir to begin searching.
my $dir = File::Spec->rel2abs( shift ) or die;

do {
    ## Check if dir 'FNS' exists in current directory. Print
    ## absolute dir and finish in that case.
    my $d = first { -d && m|/FNS$| } <$dir/*>;
    if ( $d ) { 
        printf qq|%s\n|, File::Spec->rel2abs( $d );    
        exit 0;
    }   

    ## Otherwise, goto up directory and carry on the search until
    ## we reach to root directory.
    my @dirs = File::Spec->splitdir( $dir );
    $dir = File::Spec->catdir( @dirs[0 .. ( $#dirs - 1 || 0 )] )
} while ( $dir ne File::Spec->rootdir || $try++ == 0); 
```

使用开始搜索的目录运行它。它可以是相对路径或绝对路径。像这样：

```
perl script.pl /home/birei/temp/dev/everychat/ 
```

或者

```
perl script.pl . 
```

如果找到目录，它将打印绝对路径。我的测试示例：

```
/home/birei/temp/FNS 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T22:50:32.520

```
#!/bin/bash
dir=/path/to/starting/dir    # or $PWD perhaps
seekdir=FNS

while [[ ! -d $dir/$seekdir ]]
do
    if [[ -z $dir ]]    # at /
    then
        if [[ -d $dir/$seekdir ]]
        then
            break    # found in /
        else
            echo "Directory $seekdir not found"
            exit 1
        fi
    fi
    dir=${dir%/*}
done

echo "Directory $seekdir exists in $dir" 
```

请注意，该`-f`测试适用于常规文件。如果您想测试目录，请`-d`像我一样使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T22:59:49.397

```
 #!/bin/bash

FOLDER="FNS"
FPATH="${PWD}"
P="../"

if [ -d ${FOLDER} ];

then 

    FPATH="$(readlink -f ${FOLDER})"
    FOLDER="${FPATH}"
    echo "FNS: " $FPATH

else

    while [ "${FOLDER}" != "${FPATH}" ] ; do
    NEXT="${P}${FOLDER}"    

    if [ -d "${NEXT}" ];
    then
        FPATH=$(readlink -f ${NEXT})
        FOLDER="${FPATH}"
        echo "FNS: " $FPATH
    else
        P="../${P}"
    fi

    done

fi 
```

# javascript - 带有正则表达式的 jquery .replace() 防止选择输入的所有值

> ID：11352978
> 
> 赞同：1
> 
> 时间：2012-07-05T21:42:31.590
> 
> 标签：javascript, jquery, regex

jsfiddle：http: [//jsfiddle.net/ztNHL/3/](http://jsfiddle.net/ztNHL/3/)

选择顶部的输入，然后跳到第二个。它会将光标放在值的末尾，而不是全选。如果您删除 javascript 并再次运行，您会看到此行为不会发生。

毫无头绪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:46:06.243

没有什么奇怪的。`keyup`事件对`TAB`您的代码做出反应并执行

```
this.value = this.value.replace(/[^0-9\.]/g, ""); 
```

女巫更新输入字段的值。这就是为什么它首先选择该字段，然后删除选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T21:47:34.340

```
$(function() {
    $('.numbersOnly').keyup(function (evt) {
        if ($.inArray(evt.which, [37, 38, 39, 40]) != -1) return false;
            this.value = this.value.replace(/[^\d\.]/g,'');
            if (evt.which == 9) this.select(); //<-- re-select field value
    });
});            
​ 
```

我做了一些其他的修改：

*   模式变短（使用`\d`别名）
*   光标键被重新启用（在您的代码中它们被阻止工作）
*   选择仅在按下 tab 键时才会发生，而不仅仅是任何键

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T21:48:49.063

嗨，还有其他一些问题，例如：

**工作演示**顺利：http: [//jsfiddle.net/wWxVL/2/](http://jsfiddle.net/wWxVL/2/)

*   左箭头键不起作用。
*   当用户键入时，这些东西有点古怪。
*   选项卡/选择所有问题（已知）

这里有一篇很棒的帖子：[如何使用 jQuery 在 HTML 输入框中只允许数字 (0-9)？](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)

希望有帮助，加油

**代码**

```
$(document).ready(function() {
    $(".numbersOnly").keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
        // Allow: Ctrl+A
        (event.keyCode == 65 && event.ctrlKey === true) ||
        // Allow: home, end, left, right
        (event.keyCode >= 35 && event.keyCode <= 39)) {
            // let it happen, don't do anything
            return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                event.preventDefault();
            }
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T21:47:05.270

当我（在 chrome 中）标签到第二个框时，它不会到达值的末尾，直到我放开标签键（即在 keyup 上）

```
this.value = this.value.replace(/[^0-9\.]/g,''); 
```

当您放开 tab 键时正在执行

# javascript - 如何让 chrome 访问本地文件...？

> ID：11352979
> 
> 赞同：0
> 
> 时间：2012-07-05T21:42:35.520
> 
> 标签：javascript, jquery, google-chrome

我有需要在脚本中使用的 json 文件。我正在使用 $.getJSON 方法来访问这些文件。在 Firefox 中一切正常，但由于 chrome 中的相同来源策略，它无法访问文件。

使用这个“chrome.exe --allow-file-access-from-files”可以访问它们，但是有没有其他方法可以访问它们。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-05T21:49:40.047

使用`JSONP`而不是`JSON`这样您就不会受到同源策略的限制，这会影响 FireFox 以及 IE 和 Chrome。

# windows-phone-7 - 工具提示未在 MS Windows Phone 上显示

> ID：11352981
> 
> 赞同：1
> 
> 时间：2012-07-05T21:42:43.407
> 
> 标签：windows-phone-7

我有两个关于工具提示的问题。

1.  我在按钮上添加了工具提示，但它没有显示。

    ```
    <Button Content=">" Name="btn_2" Grid.Row="3"  Grid.Column="2"  Grid.RowSpan="4" ToolTipService.ToolTip="updated"></Button> 
    ```

2.  我可以在 ApplicationBarIconButton 上添加工具提示吗？如果是这样，你能给我一个样本或链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:37:45.407

您本身无法添加工具提示，但您可以尝试模拟执行以下操作：

[http://igrali.com/2012/01/07/show-a-tooltip-for-tapped-pushpin-on-windows-phone/](http://igrali.com/2012/01/07/show-a-tooltip-for-tapped-pushpin-on-windows-phone/)

这使用 Silverlight for Windows Phone 工具包中的上下文菜单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T22:55:23.517

1.  手机上没有工具提示（任何手机）

2.  见 1

# grails-validation - 来自另一个域类的属性的 Grails 自定义验证器

> ID：11352982
> 
> 赞同：0
> 
> 时间：2012-07-05T21:42:53.373
> 
> 标签：grails-validation

Grails 2.0 的新手，如果在评估中创建 custid 在客户中的自定义验证器，将不胜感激。只有现有客户才能完成评估。谢谢！

类客户{

```
String custId
String firstName
String lastName

static constraints = {
    custId()
    firstName()
    lastName()
} 
```

}

类评估{

```
String custId
String comment

static constraints = {
    custId()
    comment()
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:17:21.650

我建议稍微重新设计并将 Customer 的实例传递到您的评估对象中。然后在评估类中，创建一个验证以确保客户不为空。这样做是利用 Customer 类验证来确保您拥有一个“有效的”客户 ID，无论如何您都需要拥有该 ID，以便从我假设您从 Web 获取的 custId 中查找/实例化一个 Customer 对象正在提交的表格。

```
class Evaluation {
  Customer customer
  String comment

  static constraints = {
    customer nullable: false
  }
} 
```

# postgresql - 无响应的 postgres 提示

> ID：11352984
> 
> 赞同：1
> 
> 时间：2012-07-05T21:42:58.710
> 
> 标签：postgresql, postgresql-9.1

我在 Ubuntu 12.04 中安装了 PostgreSQL，按照通常的步骤，到达了 'postgres=#' 提示符。此后它对某些命令没有响应。'\l' 之类的命令有效，但对'createuser' 和'createdb' 之类的命令完全没有响应。我错过了安装一些软件包还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:48:38.530

`createuser`并且`createdb`不是SQL 语句，它们是帮助脚本*。*不要在 Postgres 命令行客户端 ( `psql`) 中运行它们，而是在常规 shell 中运行它们（例如，在 Bash 中）。

# html - 包含在 HTML 中的带有“img”标签的 SVG 可以链接到带有“image”标签的外部图像吗？

> ID：11352985
> 
> 赞同：5
> 
> 时间：2012-07-05T21:43:00.277
> 
> 标签：html, svg, image, xlink

我在服务器上的同一位置有以下文件 image.svg 以及文件 bitmap.png：

```
<?xml version="1.0" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100px" height="100px" version="1.1"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">
  <image x="0" y="0" width="100px" height="100px"
         xlink:href="bitmap.png" />
</svg> 
```

当我直接进入图像文件时，它包含 bitmap.png 图像。

当我在带有`<object data="image.svg"></object>`标签的网页中包含图像时，会加载 bitmap.png 文件。

当我在带有标签的网页中包含图像时，**不会**`<img src="image.svg" />`加载bitmap.png 。

 **是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:31:53.020

svg 本身是有效的。

当通过 <img> 引用 svg 时，某些浏览器不允许外部引用。您可以做的是将 png 转换为数据 URI 并将其放在那里，例如，请参阅[此答案](https://stackoverflow.com/questions/6249664/does-svg-support-embedding-of-bitmap-images)以了解如何执行此操作。**

# c# - 制作列表框菜单

> ID：11352987
> 
> 赞同：1
> 
> 时间：2012-07-05T21:43:02.620
> 
> 标签：c#, wpf, xaml

我正在尝试制作一个与 Microsoft Office 中的样式相同的简单菜单：

[![示例截图](../Images/5ea93645f760d5f6b23e105bca88eb2f.png)](https://i.stack.imgur.com/arSBO.jpg)
[（来源：[techairlines.com](http://s.techairlines.com/wp-content/uploads/2009/11/Office-Share.jpg)）]

我曾尝试将 a`ListBox`作为菜单，但似乎无法将每个 listboxitem 绑定到不同的面板。是否有捷径可寻？如果有人能给我一些指示或指点我一些教程，我将不胜感激。我觉得我已经在网上到处搜索了。

* * *

我有几个问题。我在 c# 中使用了 Silvermind 的代码并添加了一个事件：

```
 [ContentProperty("Content")]
public class ModelForMyListBox : INotifyPropertyChanged
{
    private string title;
    private object content;
    public string Title
    {
        get { return title; }
        set
        {
            if (value == title)
                return;
            title = value;
            OnPropertyChanged("Title");
        }
    }
    public object Content
    {
        get { return content; }
        set
        {
            if (value == content)
                return;
            content = value;
            OnPropertyChanged("Content");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

在 XAML 中添加此内容时出现错误。

```
xmlns:controls="clr-namespace:WpfApplication1.Controls" 
```

“WpfApplication1.Controls”不包含在程序集中

至于 XAML 的其余部分，我在使用控件时遇到错误，但我猜这是由于上述错误。

希望你能帮我纠正最后一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:42:24.487

最简单的方法是这样的：

```
[ContentProperty("Content")]
public class ModelForMyListBox : INotifyPropertyChanged
{
    private string title;
    private object content;
    public string Title
    {
        get { return title; }
        set
        {
            if (value == title)
                return;
            title = value;
            OnPropertyChanged("Title");
        }
    }
    public object Content
    {
        get { return content; }
        set
        {
            if (value == content)
                return;
            content = value;
            OnPropertyChanged("Content");
        }
    }
} 
```

添加 ModelForMyListBox 的命名空间，前缀如窗口中的控件或用户控件，如`xmlns:controls="clr-namespace:Application1.Controls"`

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="1*"/>
    </Grid.ColumnDefinitions>
    <ListBox x:Name="MenuListBox" DisplayMemberPath="Title">
        <controls:ModelForMyListBox Title="Share">
            <!-- <MyCustomViewObject here -->
        </controls:ModelForMyListBox>
        <controls:ModelForMyListBox Title="Help">
            <!-- <MyCustomViewObject here -->
        </controls:ModelForMyListBox>
    </ListBox>
    <ContentPresenter Grid.Column="1" 
                      DataContext="{Binding ElementName=MenuListBox, Path=SelectedItem}"
                      Content="{Binding Path=Content}"/>
<Grid> 
```

我希望这能让你继续前进。

# python - Google Shortener API 和 Python 出错

> ID：11352988
> 
> 赞同：1
> 
> 时间：2012-07-05T21:43:16.633
> 
> 标签：python, json, api, google-url-shortener

我正在制作一个适用于 url 的应用程序，我需要缩短它们。我写了以下代码：

```
import requests, json
gUrl = 'https://www.googleapis.com/urlshortener/v1/url'
data = json.dumps({'longUrl': 'http://www.google.es'})
r = requests.post(gUrl, data) 
```

它应该用 json 编码，但是，我收到以下错误：

```
print r.json
{u'error': {u'code': 400, u'message': u'This API does not support parsing form-encoded
input.', u'errors': [{u'domain': u'global', u'message': u'This API does not support
parsing form-encoded input.', u'reason': u'parseError'}]}} 
```

其他可能有用的信息：

```
print r.request
Request [POST]

print r.headers
{'x-xss-protection': '1; mode=block', 'x-content-type-options': 'nosniff',
'transfer-encoding': 'chunked', 'expires': 'Thu, 05 Jul 2012 20:47:11 GMT',
'server': 'GSE', 'cache-control': 'private, max-age=0', 
'date': 'Thu, 05 Jul 2012 20:47:11 GMT', 'x-frame-options': 'SAMEORIGIN', 
'content-type': 'application/json; charset=UTF-8'} 
```

非常感谢您提前。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T21:47:10.553

您需要确保`Content-Type: application/json`正在发送，否则 POST 数据是表单编码的。

**例如** `r = requests.post(gUrl, data, headers={'Content-Type': 'application/json'}`）

`print r.json`- 输出：

```
{u'kind': u'urlshortener#url', u'id': u'http://goo.gl/5Af0', u'longUrl': u'http://www.google.es/'} 
```

# dll - 在 Ubuntu EC2 实例上找不到 libdl.so

> ID：11352991
> 
> 赞同：1
> 
> 时间：2012-07-05T21:43:31.397
> 
> 标签：dll, amazon-ec2, ubuntu-12.04

我是 Ubuntu 新手，正在 Amazon EC2 云中运行 Ubuntu。

我正在尝试`cppunit`在 Ubuntu 框（`i386`和`amd64`）上编译，它不会链接到`libdl`

```
g++ -g -O2 -o .libs/DllPlugInTester DllPlugInTester.o CommandLineParser.o  -ldl ../../src/cppunit/.libs/libcppunit.so -lm  -Wl,--rpath -Wl,/home/ubuntu/cppunit/lib
../../src/cppunit/.libs/libcppunit.so: undefined reference to `dlsym'
../../src/cppunit/.libs/libcppunit.so: undefined reference to `dlopen'
../../src/cppunit/.libs/libcppunit.so: undefined reference to `dlclose' 
```

现在我不明白`libdl.so`存在且正确：

```
ubuntu@domU-12-31-39-0A-98-1A:~/cppunit$ ls /lib/i386-linux-gnu/libdl*
/lib/i386-linux-gnu/libdl-2.15.so  /lib/i386-linux-gnu/libdl.so.2 
```

但是`whereis`什么都没有：

```
ubuntu@domU-12-31-39-0A-98-1A:~/cppunit$ whereis libdl
libdl: 
```

`libc6`已安装：

```
ubuntu@domU-12-31-39-0A-98-1A:~/cppunit$ sudo apt-get install libc6
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libc6 is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. 
```

那么为什么我的构建找不到呢？

`uname -r`是_`3.2.0-25-virtual`

*Fedora 上的“正常”* `whereis`如下所示：

```
[matt cppunit] whereis libdl
libdl: /lib/libdl.so /usr/lib/libdl.so /lib64/libdl.so /usr/lib64/libdl.so 
```

有任何想法吗？

*编辑*：我`/etc/ld.so.conf.d/*.conf`似乎很明智：

```
ubuntu@domU-12-31-39-0A-98-1A:~$ cat /etc/ld.so.conf.d/*.conf
/usr/lib/i386-linux-gnu/mesa
# Multiarch support
/lib/i386-linux-gnu
/usr/lib/i386-linux-gnu
/lib/i686-linux-gnu
/usr/lib/i686-linux-gnu
# libc default configuration
/usr/local/lib
# This directive teaches ldconfig to search in nosegneg subdirectories
# and cache the DSOs there with extra bit 1 set in their hwcap match
# fields. In Xen guest kernels, the vDSO tells the dynamic linker to
# search in nosegneg subdirectories and to match this extra hwcap bit
# in the ld.so.cache file.
hwcap 1 nosegneg 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:46:46.323

我也在 64 位 ubuntu，gcc 4.6.3 上遇到了这个问题，我的直觉是链接库的排序。但是，同样的事情建立在 32 位上。我在链接命令的末尾添加了 -ldl 并链接了它，所以看起来像是某种链接器问题。您还可以从 shell 设置 env var: LIBS=-ldl，它会构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:18:35.137

因为 ld.so.conf 用于动态链接器，而不是后组装链接器，ld(1)。有人创建了这个新路径，但没有更新链接器搜索的目录。/lib64 或 /usr/lib64 中应该有 libdl 的链接，或者链接器搜索链接 64 位对象的路径之一。

这条（新路径）是另一个例子，来自我的 PoV，各种 Linux 发行版在不完全了解后果或历史的情况下进行的随机更改。

# javascript - Pinterest“Pin It”按钮破解

> ID：11352995
> 
> 赞同：2
> 
> 时间：2012-07-05T21:44:10.247
> 
> 标签：javascript, api, pinterest

我正在寻找一种方法来创建一个按钮，我可以将其放置在页面上的每个项目旁边。

当用户单击该按钮时，它会自动抓取它旁边的任何项目的图像，并自动将其发布到该用户的 Pinterest 板上（使用相同的描述）。

我一直在寻找几天的方法来做到这一点，但没有太多运气，我遇到的只是这两个网站：

[http://www.nextscripts.com/pinterest-automated-posting](http://www.nextscripts.com/pinterest-automated-posting)

[http://www.brandaiddesignco.com/blog/add-a-custom-pinterest-pin-it-button-to-your-website/375/#](http://www.brandaiddesignco.com/blog/add-a-custom-pinterest-pin-it-button-to-your-website/375/#)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:14:35.270

看看[pinterest.com/about/goodies](http://pinterest.com/about/goodies/)提供给您的[这个脚本：“](http://assets.pinterest.com/js/pinit.js) [*Pin It Button for Web Sites*](http://pinterest.com/about/goodies/) [”](http://pinterest.com/about/goodies/)。[在http://jsbeautifier.org/](http://jsbeautifier.org/)去混淆它，看看它做了什么：[](http://pinterest.com/about/goodies/)

 **   它获取`<a>`文档中的所有元素，并且当它们的`href`属性包含字符串`"//pinterest.com/pin/create/button/?"`时，
*   它用 iframe ( [http://pinit-cdn.pinterest.com/pinit.html?...](http://pinit-cdn.pinterest.com/pinit.html) ) 替换它们，其属性取决于 URI 和链接的其他属性。

现在，您应该能够编写一个脚本来获取所有按钮、抓取旁边的图像（但是这将起作用，取决于您的 DOM）并创建这样的 iframe。

如果您不想要弹出窗口，您可以查看 iframe / 弹出窗口源代码并直接发布到您在那里找到的地址。

> 我遇到的是这两个网站：

[http://www.nextscripts.com/pinterest-automated-posting](http://www.nextscripts.com/pinterest-automated-posting)是一个非免费的 wordpress 插件，包括一个用于发布到 pinterest 的 API（因为他们自己没有）。在购买之前，您只能猜测 PHP 代码中发生了什么。

[http://www.brandaiddesignco.com/blog/add-a-custom-pinterest-pin-it-button-to-your-website/375/#](http://www.brandaiddesignco.com/blog/add-a-custom-pinterest-pin-it-button-to-your-website/375/#)只是在您单击该按钮时动态加载[此脚本](http://assets.pinterest.com/js/pinmarklet.js)，并且脚本然后创建一个 GUI 以从页面中选择图像。*

# php - 自动包含缺失的功能？

> ID：11352996
> 
> 赞同：0
> 
> 时间：2012-07-05T21:44:19.960
> 
> 标签：php, function, error-handling, include

> **可能重复：**
> [php中的自动加载函数](https://stackoverflow.com/questions/4196881/autoload-functions-in-php)

我正在开发一个 PHP 框架。我想知道是否有一种方法可以在函数不存在时重写错误处理程序以自动尝试首先包含说明该函数的文件。

例子：

```
echo general_foo(); // <-- general_foo() is not yet stated.
                    // A handler tries to include_once('functions/general.php') based on the first word of the function name.
                    // If the function still doesn't exist - throw an error. 
```

这样做的好处是跳过编译不必要的文件或跳过跟踪和状态包括在这里和那里。

只需 __autoload 用于函数而不是类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:46:14.140

它不存在，而且可能永远不会存在。是的，我也想要它……但是，这并不妨碍您使用具有静态函数的类并让 PHP 自动加载。

[http://php.net/spl-autoload-register](http://php.net/spl-autoload-register)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T22:50:52.703

我这样解决了

类文件classes/functions.php：

```
 class functions {

    public function __call($function, $arguments) {

      if (!function_exists($function)) {
        $function_file = 'path/to/functions/' . substr($function, 0, strpos($function, '_')).'.php';
        include_once($function_file);
      }

      return call_user_func_array($function, $arguments);
    }
  } 
```

函数文件functions/test.php

```
 function test_foo() {
    return 'bar';
  } 
```

脚本 myscript.php：

```
 require_once('classes/functions.php');
  $functions = new functions();

  echo $functions->test_foo(); // Checks if function test_foo() exists,
                               // includes the function file if not included,
                               // and returns bar 
```

您最终可以使用 __autoload() 自动加载 classes/functions.php。

**最后，my_function() 的语法变成了 $functions->my_function()。如果函数不存在，您可以编写自己的错误处理程序。;)**

# java - 在现有 SOAP Web 服务上构建 REST 包装器

> ID：11352998
> 
> 赞同：1
> 
> 时间：2012-07-05T21:44:26.183
> 
> 标签：java, rest, soap, proxy-object

我的团队正在现有的基于 SOAP 的 Web 服务上开发 REST 服务包装器。我们并不完全了解 SOAP 服务的内部结构，只是可以访问 WSDL 文件。我们的 REST 服务包装器将只是一对一的映射。

我知道它实际上并不遵循 REST 哲学，尽管请允许我称它为 REST 服务。此 REST 服务将部署在 Tomcat 上，并且许多客户端将同时访问它。

当前的实现是，我们将为每个客户端创建一个代理对象（使用 SOAP WSDL 代理类）。此代理对象将用于调用 SOAP API。SOAP 需要在代理对象上绑定身份验证详细信息，因此我们在运行时将每个客户端的这些对象保存在内存中，同时进行第一次 REST 调用以建立会话。

保存的对象是在运行时使用 SessionID 标识符获取的。现在的问题是这些代理对象占用了很大的内存块，并且只支持少数 REST 客户端。（使用默认的 64 MB，只有 19 个 REST 客户端可以运行）。这是现在我们要改变方法的麻烦，需要您的建议。

请让我知道是否存在任何更好的解决方案。我们不希望数据库存储对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:05:22.337

如果您所能做的只是调用 HTTP/Soap 服务并且无法访问代码，那么您可以使用适当的 REST 约定创建 REST 服务，然后实现对 SOAP 服务调用的转换......您会自动创建 SOAP 客户端类来自 WSDL，这将为您节省一些时间。

但是您将需要编写一个自定义翻译层，并且不要制作一组 hacky REST 服务并尝试将其融入 SOAP 模型。尽量保持真实的休息并使翻译层更加复杂......这将是值得的。